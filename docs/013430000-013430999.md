# StackOverflow 问答 13430000-13430999

# asp.net - 通过使用 Visual Studio 组合表格的两列来设置唯一键

> ID：13430005
> 
> 赞同：2
> 
> 时间：2012-11-17T11:13:12.533
> 
> 标签：asp.net, database, visual-studio-2010

我想通过使用 Visual Studio for Asp.net 网站组合表的两列来创建唯一键。我在 MySql 命令提示符的帮助下知道该方式，但在 Visual Studio 中我不知道图形方式。

请帮我..

# parameters - 错误“未引用形式参数“G””

> ID：13430006
> 
> 赞同：1
> 
> 时间：2012-11-17T11:13:35.400
> 
> 标签：parameters, ada

我在编译代码时收到错误消息“parsing.adb:22:32: 警告：未引用形式参数“G””。知道我必须更改什么才能收到此错误消息吗？

这是我的代码：

```
with Ada.Text_IO, Ada.Integer_Text_IO, Life, parsing;
use Ada.Text_IO, Ada.Integer_Text_IO, Life, parsing;

package body Parsing is

Parsing_Failed : exception;

type New_Grid is record
Hauteur : Natural;
Largeur : Natural;
Tableau : Grid;
end record;

   procedure Grid_Load_LIF(G : out Grid ; File_Name : in String) is
    Fichier:File_Type;
    Ligne:String(1..75);
    Grille : New_Grid;
    Num_Ligne : Positive := 1;
    Lu : Natural:=0;
begin
open(Fichier, In_File, File_Name);

while not End_of_File(Fichier) loop
    get_Line(Fichier, Ligne, Lu);

for i in 1..Lu loop
    if ligne(I) = '*' then
        grille.Tableau(Num_Ligne,I) := True;
    elsif ligne(I)= '.' then
        grille.Tableau(Num_Ligne,I) := False;

    end if;
end loop;
Num_Ligne := Num_Ligne +1;
grille.Largeur := Lu;
grille.Hauteur := Num_Ligne;

end loop;
end Grid_Load_LIF;

end Parsing; 
```

谢谢你的帮助 ！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-17T16:20:53.940

我认为您可能需要更改`Grid_Load_LIF`为

```
procedure Grid_Load_LIF(Grille : out New_Grid ; File_Name : in String) 
```

然后删除该行

```
Grille : New_Grid; 
```

这样，当你说

```
grille.Largeur := Lu;
grille.Hauteur := Num_Ligne; 
```

你指的`New_Grid`是调用者实际传递的`Grid_Load_LIF`；也就是说，调用者会写

```
 Gr : New_Grid;
begin
   Grid_Load_LIF (Gr, "data_file.lif"); 
```

返回`Gr`时将保存从文件中读取的数据。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-19T14:56:09.650

这里的基本问题是您的子例程包含一个`out`参数，`G`您从不为其赋值。这意味着如果编译器允许您这样做，它在例程之外的值将是垃圾（甚至可能导致 Contraint_Error）。

**您需要****为所有**参数提供一个值（在所有非异常代码路径中）**。****`out`**

# django - Django 在 M2M 字段上使用可选参数进行动态过滤

> ID：13430007
> 
> 赞同：1
> 
> 时间：2012-11-17T11:13:38.190
> 
> 标签：django, listview, filtering, m2m

我正在尝试做一个 ListView 接受可选参数以用作查询集的过滤器。

现在，我有我的模型：

```
class Author(models.Model):
    name = models.CharField(max_length=100, default='')
    surname = models.CharField(max_length=100, default='')

    def __unicode__(self):
        return "%s %s" % (self.name,self.surname)

class Tag(models.Model):
    name = models.CharField(max_length=100, default='')

    def __unicode__(self):
        return "%s" % (self.name)

class Publication(models.Model):
    title = models.CharField(max_length=100, default='')
    authors = models.ManyToManyField(Author,blank=True, null=True)
    conf = models.CharField(max_length=100, default='')
    year = models.IntegerField(default=0)
    tags = models.ManyToManyField(Tag,blank=True, null=True)

    def __unicode__(self):
        return "%s" % (self.title) 
```

我以这种方式映射了网址

url(r'^publications/(?P.*)/', PublicationList.as_view(), name='publication-list'),

这个想法是在 之后附加可选参数`publications`，类似 `year=2012`或 这样的东西让我可以自由地进行过滤`year=2012&tags=food`。`year=2012&tags=food,car&authors=bobby`顺便说一句，这是通过 url 传递多个参数的正确/标准方式吗？

现在，我有这个 ListView 类

```
class PublicationList(ListView):
template_name = 'publications.html'
context_object_name='pubs'

def get_queryset(self):
    ... 
```

与`self.kwargs['optional']`我可以得到参数的完整字符串。但是：我是否必须对数据进行所有案例才能进行过滤？那么在结果列表（）上进行拆分，然后在结果列表（`args`）上执行一个for并检查每个值（`arg`），如果它是年份（`arg=='year'`）然后做`filter(year=arg)`？

有什么可以为我做这件事或更好的事情吗？

此外，由于我与标签和作者有 m2m 关系，例如，我如何对标签进行相同的过滤？基本上我必须检查标签值是否与`tag.name`M2M 关系中的任何一个匹配。

再见

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-17T11:20:54.637

我强烈建议使用[django-filter](https://github.com/alex/django-filter)，或者看看它是如何工作的。本质上，它接受表单输入，并使用从表单传入的参数构建查询集。

在一般情况下，您要解决的问题并不容易。

# vb.net - 我想在 vb.net 中仅以 1 个窗口形式显示所有页面

> ID：13430022
> 
> 赞同：0
> 
> 时间：2012-11-17T11:15:49.313
> 
> 标签：vb.net, winforms

您好，我正在创建一个 Windows 应用程序，其中我有多个表单，并且我想将它们显示在一个 Windows 表单中，例如 Windows 操作系统，即当我单击 form1.vb 时，它应该显示在当前打开的同一个窗口中. 我不知道如何实现它请帮助我。谢谢....

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-17T11:19:31.003

使用`multiple document interface`（MDI）
将一个表单设置为 mdiParent 表单，其余表单设置为 mdiChild 表单，然后当您打开其他表单时，它们只会出现在 MDIparent 表单区域中。

# javascript - 嵌套回调未来/现在

> ID：13430025
> 
> 赞同：1
> 
> 时间：2012-11-17T11:16:24.443
> 
> 标签：javascript, callback

我试图弄清楚如何以某种方式嵌套回调。

```
var alpha = function(callback){
    var x = 5;
    if(x > 2){
        callback();
    }else if(x = 10){
        callback();
    }else{
        future();
    }
};

var beta = function(callback){
    var x = 5;
    if(x > 10){
        callback();
    }
}

alpha(function(){
    beta(function(){
      // also run future();
    }); 
}); 
```

假设我希望`future()`和 beta`callback()`相同，或者至少在两者中运行相同的代码。我将如何做到这一点？请忽略我的基本`>`示例。

我正在尝试使我的代码更干燥。可以说 beta 在其中运行了多次，`alpha()`但该`future()`函数已经赶上了 beta 的回调。

**更新**

我想避免像这样多余。

```
var alpha = function(callback){
    var x = 5;
    if(x > 2){
        //---       
        var x = 5;
        if(x > 10){
            callback();
        }
        //---
    }else if(x = 10){
        //---
        var x = 5;
        if(x > 10){
            callback();
        }
        //---
    }else{
        callback();
    }
}; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-17T11:31:09.730

您可以在代码中接受 2 个回调函数，也可以定义命名函数（或变量）并在 beta 回调中使用它

```
var alpha = function(callback, callback2){
    var x = 5;
    if(x > 2){
        callback();
    }else if(x = 10){
        callback();
    }else{
        callback2();
    }
};

var beta = function(callback){
    var x = 5;
    if(x > 10){
        callback();
    }
}

alpha(function(){
        beta(function(){
           future();
        }); 
    }, function future(){
    // your code here
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-17T11:33:07.973

我不确定我是否正确理解了您，但如果我理解了，您的问题是您想在两个回调中调用某种行为。为此，您可以简单地将该行为传递给外部回调，然后将其作为附加参数传递给内部回调：

```
var alpha = function(future, callback) {
    [...]
    else if(x == 10) {
        callback(future); // Where callback would be beta
    } else {
        future();
    }
}

alpha(future, function(future) {
    beta(function() {
        future();
    });
} 
```

# php - PHP、Mysql 插入

> ID：13430027
> 
> 赞同：1
> 
> 时间：2012-11-17T11:16:39.327
> 
> 标签：php, javascript, jquery, mysql, ajax

我正在尝试制作星级评分系统，但无法将结果插入 mysql。我错过了一些东西，但我不知道是什么。我将向您展示我的代码，也许你们中的一个人可以看到问题出在哪里。提前致谢！

首先，我的表格：

```
<!DOCTYPE html PUBLIC '-//W3C//DTD XHTML 1.0 Transitional//EN' 'http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd'>
 <html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
 <head> 
 <script src='jquery.js' type="text/javascript"></script>
 <script src='documentation/documentation.js' type="text/javascript"></script>
 <link href='documentation/documentation.css' type="text/css" rel="stylesheet"/>
 <script type="text/javaScript" src="documentation/chili/jquery.chili-2.0.js"></script> 
 <script type="text/javascript">try{ChiliBook.recipeFolder="documentation/chili/"}catch(e){}</script>
 <script src='jquery.MetaData.js' type="text/javascript" language="javascript"></script>
 <script src='jquery.rating.js' type="text/javascript" language="javascript"></script>
 <link href='jquery.rating.css' type="text/css" rel="stylesheet"/>
</head>

<body>
<div id="tab-Testing">
<script>
$('form1').submit(function() {
 var ans=$(this).serialize();
  $.ajax({
  type: "POST",
   url: "starsubmit.php",
  data:ans
 }).done(function( msg ) {
 alert( "Data Saved: " + msg );
 });
 return false;
});
</script>

<div class="Clear">&nbsp;</div>
<form id="form1">

        Question 1:bla bla bla

   <input class="star required" type="radio" name="Question 1" value="1"/>
    <input class="star" type="radio" name="Question 1" value="2"/>
    <input class="star" type="radio" name="Question 1" value="3"/>
    <input class="star" type="radio" name="Question 1" value="4"/>
    <input class="star" type="radio" name="Question 1" value="5"/>
   </div>
   <br/>
   <div class="Clear">

        Question 2:bla bla bla

    <input class="star required" type="radio" name="Question 2" value="1"/>
    <input class="star" type="radio" name="Question 2" value="2"/>
    <input class="star" type="radio" name="Question 2" value="3"/>
    <input class="star" type="radio" name="Question 2" value="4"/>
    <input class="star" type="radio" name="Question 2" value="5"/>
   </div>
   <br/>
   <div class="Clear">

        Question 3:bla bla bla

    <input class="star required" type="radio" name="Question 3" value="1"/>
    <input class="star" type="radio" name="Question 3" value="2"/>
    <input class="star" type="radio" name="Question 3" value="3"/>
    <input class="star" type="radio" name="Question 3" value="4"/>
    <input class="star" type="radio" name="Question 3" value="5"/>
   </div>
 <br>
   <div class="Clear">

        Question 4:bla bla bla

    <input class="star required" type="radio" name="Question 4" value="1" />
    <input class="star" type="radio" name="Question 4" value="2" />
    <input class="star" type="radio" name="Question 4" value="3" />
    <input class="star" type="radio" name="Question 4" value="4" />
    <input class="star" type="radio" name="Question 4" value="5" />
   </div>
   <br/>
   <div class="Clear">

        Question 5:bla bla bla

    <input class="star required" type="radio" name="Question 5" value="1"/>
    <input class="star" type="radio" name="Question 5" value="2"/>
    <input class="star" type="radio" name="Question 5" value="3"/>
    <input class="star" type="radio" name="Question 5" value="4"/>
    <input class="star" type="radio" name="Question 5" value="5"/>
   </div>
   <br/>
   <div class="Clear">

        Question 6:bla bla bla

    <input class="star required" type="radio" name="Question 6" value="1" />
    <input class="star" type="radio" name="Question 6" value="2" />
    <input class="star" type="radio" name="Question 6" value="3" />
    <input class="star" type="radio" name="Question 6" value="4" />
    <input class="star" type="radio" name="Question 6" value="5" />
   </div>

   <input type="submit" value="Submit scores!" />  </td>

</form>
</body>
</html> 
```

> 现在，我的starsubmit.php：

```
<?php
$mysql_hostname = "localhost";
$mysql_user = "root";
$mysql_password = "";
$mysql_database = "cosmote";
$prefix = "";
$bd = mysql_connect($mysql_hostname, $mysql_user, $mysql_password) or die("Opps some thing went wrong");
mysql_select_db($mysql_database, $bd) or die("Opps some thing went wrong");
if($_SERVER["REQUEST_METHOD"] == "POST")
{
$question1 = mysql_real_escape_string($_POST['question1']);
$question2 = mysql_real_escape_string($_POST['question2']);
$question3 = mysql_real_escape_string($_POST['question3']);
$question4 = mysql_real_escape_string($_POST['question4']);
$question5 = mysql_real_escape_string($_POST['question5']);
$question6 = mysql_real_escape_string($_POST['question6']);

mysql_query("INSERT INTO answers (q1,q2,q3,q4,q5,q6) VALUES ('$question1','$question2','$question3','$question4','$question5','$question6')");
echo "<h1>Thank You !</h1>";
}

?> 
```

最后，我的桌子：

```
CREATE TABLE IF NOT EXISTS `answers` (
  `q1` int(3) NOT NULL,
  `q2` int(3) NOT NULL,
  `q3` int(3) NOT NULL,
  `q4` int(3) NOT NULL,
  `q5` int(3) NOT NULL,
  `q6` int(3) NOT NULL
) ENGINE=InnoDB DEFAULT CHARSET=latin1; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-17T11:22:13.370

我必须说这应该是：

```
$('form1').submit(function() { // <------you are not submiting the specific form 
```

像这样：

```
$('#form1').submit(function() { // <------ every id should have a '#' in jquery 
```

如果您可以更改 .done 功能，这可能是问题

```
.done(function() {  
   alert( "Data Saved");  // try removing the passed param "msg"
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-17T11:23:41.567

在 jQuery 中，ID 以“#”开头

`$('form1').submit(function() {`

# php - PHP 和文件处理过程来记录访问者 ip 并禁止他们

> ID：13430028
> 
> 赞同：0
> 
> 时间：2012-11-17T11:16:40.123
> 
> 标签：php, file-handling

我想将访问者的 ips 记录在一个文件中。然后在第二次尝试访问后，我不希望那个人在 10 天内访问该网站。如果他再次访问，那么我希望生成被禁止的消息。我可以用 mysql 数据库做到这一点，但我想通过文件处理来做到这一点。这很紧急

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-17T11:29:15.977

我认为以下代码段将对您有所帮助：

```
define('IP_FILE', 'ip.php');//where to save IP data
define('LIMIT_SECONDS', 10*24*3600); // 10 days
//loading IP data
function loadIPFile() {
    if (file_exists(IP_FILE)) {
       require_once IP_FILE;
       if (isset($ipArray) and is_array($ipArray)) {
            return $ipArray;
        }
    }
    return array();
}

//saving IP data
function saveIPFile($ipArray) {
    $fp = fopen(IP_FILE, 'wb');
    fwrite($fp, '<?php'.PHP_EOL);
    fwrite($fp, '$ipArray = '.var_export($ipArray, true).';'.PHP_EOL);
    fwrite($fp, '?>');
    fclose($fp);
}

$ipArray = loadIPFile();//load info into array
$ip = $_SERVER['REMOTE_ADDR'];//visitor ip
//if such ip already exists and 10 days are not behind us redirect visitor
if (isset($ipArray[$ip]) and time() - $ipArray[$ip] < LIMIT_SECONDS) {
   header('Location: banned_page.php');
   exit;
}
else {
    //else record new  ip or new time
    $ipArray[$ip] = $time;
}
//save IP information
saveIPFile($ipArray); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-17T12:43:12.913

如果您知道如何对数据库执行此操作，为什么还要对文件执行此操作？数据库基本上是一个文件，其功能位于顶部以帮助您访问数据。通过使用文件直接存储此类数据，您必须重写 MySQL 开箱即用的最小访问功能。为什么要重新发明轮子？

如果由于某种原因您无法访问 MySQL，那么也许可以尝试 SQLite [http://php.net/manual/en/book.sqlite.php](http://php.net/manual/en/book.sqlite.php)，它为您提供了很多 sql 类型的功能，但基于您的本地目录而不是 sql server。

# c++ - 如何使用迭代器达到列表项的值？

> ID：13430030
> 
> 赞同：0
> 
> 时间：2012-11-17T11:16:53.210
> 
> 标签：c++, list

我有一个清单；

```
list<Car*>* carList = new list<Car*>; 
```

但是当我尝试到达元素的属性应用程序停止运行。

```
list<Car*>::iterator i = CarList->end();
while(i!=carList->begin())
{
   string plate = (*i)->Plate;//Here app stops
   i--;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-17T11:18:44.903

这不是迭代器的工作方式。您从开始到结束或重新开始进行迭代。您的代码最多会导致无限循环，并且很可能会导致段错误。另外，你需要存储指针吗？您可能正在存储副本。

```
std::list<Car> cars;
//insert a few cars

for (std::list<Car>::iterator it = cars.begin(), end = cars.end(); it != end; ++it) {
    std::cout << it->plate << std::endl;
} 
```

反向迭代的代码几乎完全相同：

```
for (std::list<Car>::reverse_iterator it = cars.rbegin(), end = cars.rend(); it != end; ++it) {
    std::cout << it->plate << std::endl;
} 
```

* * *

使用指针反而会稍微复杂一些，但也不算太糟糕：

```
std::list<Car*>* cars = new std::list<Car*>;
//insert a few Car*

for (std::list<Car*>::iterator it = cars->begin(), end = cars->end(); it != end; ++it) {
    std::cout << (*it)->plate << std::endl;
} 
```

虽然没有看到更广泛的背景，但我的猜测是您不必要地使用动态内存分配。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-17T11:21:50.107

`rbegin`您应该从to迭代`rend`。

如果您仍想使用`begin`and `end`，您可以执行以下操作：

```
list<Car*>::iterator i = CarList->end();
while(i!=AracList->begin())
{
   i--;
   string plate = (*i)->Plate;//Here app stops
} 
```

实际上，`end`指向列表实际末尾**之后**的一个位置，这就是您不能`end()`直接释放的原因。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-17T11:20:53.713

要从头到尾迭代，请使用反向迭代器：

```
list<Car*>::reverse_iterator i = CarList->rbegin();
list<Car*>::reverse_iterator end = CarList->rend();
while(i!=end)
{
   string plate = (*i)->Plate;//Here app stops
   ++i;
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-17T11:21:57.677

您的代码甚至不会在以下行编译：

```
list<Car*> carList = new list<Car*>;
           ^^^ carList is not a pointer, you can't new it 
```

建议您将 Car 对象存储在 List 中

```
List<Car> cars;
Car car1;
cars.push_back(car1);
for (auto it = cars.begin(), end = cars.end(); it != end; ++it) {
    std::cout << it->plate << std::endl;
} 
```

如果您将 Car 指针存储在 List 中（由于多态性原因，您可能需要存储指针，从 Car 派生的类也可以存储在列表中）但我建议您将共享指针存储在 std::list 中。

```
C++11
std::list<std::shared_ptr<Car*>> Cars;

C++03:
std::list<std::shared_ptr<Car*> > Cars;
                               ^^ you need a space to differentiate from operator >> 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-17T11:21:59.293

问题是容器`end`函数返回*一个超出*实际结束的值。这就是你的程序崩溃的原因。要么使用其他答案提出的`rbegin`/函数，要么*在*访问迭代器之前放置。`rend``i--`

# java - 将我的存储库推送到 heroku 失败

> ID：13430032
> 
> 赞同：1
> 
> 时间：2012-11-17T11:17:05.920
> 
> 标签：java, git, heroku, playframework, playframework-2.0

我在 play 2.0 中构建了一个应用程序，当我在本地运行应用程序时`play run`它运行良好，但是当我尝试上传到 heroku 时，`git push heroku master`它开始正常上传，但过了一段时间它总是以这些错误结束：

```
 [info] Compiling 10 Scala sources and 6 Java sources to /tmp/build_26zvdeyfp5qfp/target/scala-2.9.1/classes...
       [error] error while loading MapStream, class file '/tmp/build_26zvdeyfp5qfp/.jdk/jre/lib/rt.jar(java/lang/MapStream.class)' is broken
       [error] (bad constant pool tag 18 at byte 43)
       [error] one error found
       [error] {file:/tmp/build_26zvdeyfp5qfp/}Workshop0182Host/compile:compile: Compilation failed
       [error] Total time: 20 s, completed Nov 17, 2012 11:08:23 AM
 !     Failed to build app with sbt
 !     Heroku push rejected, failed to compile Play 2.0 - java app

To git@heroku.com:dry-thicket-4545.git
 ! [remote rejected] master -> master (pre-receive hook declined)
error: failed to push some refs to 'git@heroku.com:dry-thicket-4545.git' 
```

我确保我的 heroku-toolbelt 是最新的，尝试完全重新初始化 git 并创建了一个新的 heroku 应用程序。但这些都没有进一步帮助我

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-18T19:11:08.940

显然在 heroku 中使用 JDK 1.8 会出现这个问题。

# html - jQueryMobile 无法向下滚动到动态创建的页面内容

> ID：13430038
> 
> 赞同：1
> 
> 时间：2012-11-17T11:18:02.017
> 
> 标签：html, cordova, jquery-mobile, iscroll4

使用 jQueryMobile 和 iscrollview 插件，我无法在包含动态添加的内容的页面上向下滚动。这是我的 HTML：

```
<div data-role="content" class="care-plan-fields"  id="scroll-wrapper" data-iscroll>

                <div data-role="fieldcontain" id="field1">
                    <label for="field1Text" id="field1Label"></label>
                    <textarea cols="40" rows="2" id="field1Text" spellcheck="true" autocorrect="on" autocapitalize="on"></textarea>
                </div>

                <div data-role="fieldcontain">
                    <label for="field2Text" id="field2Label"></label>
                    <textarea cols="40" rows="2" id="field2Text" spellcheck="true" autocorrect="on" autocapitalize="on"></textarea>
                </div>

                <div data-role="fieldcontain">
                    <label for="field3Text" id="field3Label"></label>
                    <textarea cols="40" rows="2" id="field3Text" spellcheck="true" autocorrect="on" autocapitalize="on"></textarea>
                </div>

                <div data-role="fieldcontain" id="field4">
                    <label for="field4Text" id="field4Label"></label>
                    <textarea cols="40" rows="2" id="field4Text" spellcheck="true" autocorrect="on" autocapitalize="on"></textarea>
                </div>

            </div> 
```

**我在pagebeforeshow**处理程序中向 textareas 添加数据，如下所示：

```
$("label[for='field1Text']").text(carePlan.fields[0].label);
$('#field1Text').val(carePlan.fields[0].text); 
```

然后立即在滚动视图上调用刷新以使其调整大小：

```
$('#scroll-wrapper').iscrollview("refresh"); 
```

但是，虽然 textareas 已调整大小以适应添加到其中的文本的大小，但页面似乎没有调整大小，如果添加的数据超出页面底部，我将无法向下滚动。

如果我离开页面并再次返回，我可以完全向下滚动。

我认为这是一些渲染问题，并且无法弄清楚如何重新渲染页面而无需再次导航。（请注意，iscrollview 插件适用于我的应用程序中的其他列表视图，但它们没有像这样动态添加的数据。）有人有什么想法吗？干杯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-17T12:55:49.367

那些其他列表视图也是页面的主要内容 div 吗？

可能 iscroll 与 jquery mobile 布局设置冲突 - 内容 div 调整大小以适应 jquery mobile 的内容，然后 iscroll 将其作为可用的屏幕区域，即使它实际上并非全部可见。内容 div 附带的开箱即用滚动也不会生效，因为 iscroll 正在捕获所有触摸事件。

# php - joomla 2.5 导航菜单字幕

> ID：13430039
> 
> 赞同：1
> 
> 时间：2012-11-17T11:18:18.257
> 
> 标签：php, joomla, menu, navigation, joomla2.5

您好我是网页设计师，我想知道如何设置菜单字幕？使用 yoo 主题很容易实现，但我需要知道如何在不使用 YooTheme 模板的情况下完成它。我认为 mod_menu 需要进行少量修改，但我不知道具体是什么。我google了一整天，找不到解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T10:12:02.350

当然有更好的解决方案，但我是这样做的：

在菜单项的名称中插入一个字符。例如“|”。它应该如下所示： 标题 | 字幕。在这个位置，您可以划分名称。

现在您必须[覆盖](http://docs.joomla.org/How_to_override_the_output_from_the_Joomla!_core)modules/mod_menu/tmpl 中的文件 default_component.php。

添加此行：

```
$parts = explode("|", $linktype);
// the "|" is the divider
if(isset($parts[1])){
    $linktype = $parts[0].'<span>'.$parts[1].'</span>';
}else{
    $linktype = $parts[0];
}; 
```

后：

```
$class = $item->anchor_css ? 'class="'.$item->anchor_css.'" ' : '';
$title = $item->anchor_title ? 'title="'.$item->anchor_title.'" ' : '';
if ($item->menu_image) {
        $item->params->get('menu_text', 1 ) ?
        $linktype = '<img src="'.$item->menu_image.'" alt="'.$item->title.'" /><span class="image-title">'.$item->title.'</span> ' :
        $linktype = '<img src="'.$item->menu_image.'" alt="'.$item->title.'" />';
}
else { $linktype = $item->title;
} 
```

现在您在字幕周围有了一个跨度，并且可以对其进行样式设置。

# python - 覆盖标准框架时如何在一帧上获得多个面板？

> ID：13430041
> 
> 赞同：0
> 
> 时间：2012-11-17T11:18:40.570
> 
> 标签：python, wxpython, panel, frame

我正在学习来自[http://wiki.wxpython.org/Getting%20Started](http://wiki.wxpython.org/Getting%20Started)的教程，我正忙于笔记本示例。在这里，多个面板被添加到一个框架中。它使用以下示例代码：

```
class ExamplePanel(wx.Panel):
    def __init__(self, parent):
        [...]

app = wx.App(False)
frame = wx.Frame(None, title="Demo with Notebook")
nb = wx.Notebook(frame)

nb.AddPage(ExamplePanel(nb), "Absolute Positioning")
nb.AddPage(ExamplePanel(nb), "Page Two")
nb.AddPage(ExamplePanel(nb), "Page Three")
frame.Show()
app.MainLoop() 
```

这对我有用。但是，我不想使用标准的 wx.Frame() 作为框架，而是使用我自己的框架（如果我只使用一个面板，框架就可以工作）：

```
class ExampleFrame(wx.Frame):
    def __init__(self, parent, title):
        wx.Frame.__init__(self,parent, title = title)
        panel = wx.Panel(self)
        self.CreateStatusBar()
        # Setting up the menu.
        filemenu = wx.Menu()

        #wx.ID_ABOUT and wx.ID_EXIT are standard IDs provided by wxWidgets
        menuAbout = filemenu.Append(wx.ID_ABOUT, "&About", " Information about this program")
        menuExit = filemenu.Append(wx.ID_EXIT, "E&xit", " Terminate the program")

        # Creating the menubar
        menuBar = wx.MenuBar()
        menuBar.Append(filemenu, "&miP3") # Adding filemenu to the MenuBar
        self.SetMenuBar(menuBar) # Adding the MenuBar to the Frame content.

        # Set events
        self.Bind(wx.EVT_MENU, self.OnAbout, menuAbout)
        self.Bind(wx.EVT_MENU, self.OnExit, menuExit)     

    def OnAbout(self, event):
        # A message dialoge box with an OK button. wx.OK is a sandard ID in wxWidgets
        dlg = wx.MessageDialog(self, "Author: Niek de Klein", "About miP3")
        dlg.ShowModal() # show it
        dlg.Destroy() # finally destroy it when finished

    def OnExit(self, eevent):
        self.Close(True) # close the frame

app = wx.App(False)
frame = frame = ExampleFrame(None, title="Demo with Notebook")
nb = wx.Notebook(frame)

nb.AddPage(ExamplePanel(nb), "Absolute Positioning")
nb.AddPage(ExamplePanel(nb), "Page Two")
nb.AddPage(ExamplePanel(nb), "Page Three")
frame.Show()
app.MainLoop() 
```

如何将多个面板添加到我的自定义框架？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-17T15:46:03.153

你可以这样做：

```
#!/usr/bin/env python
import wx
import wx.grid

class ExampleFrame ( wx.Frame ):

    def __init__( self, parent ):
        wx.Frame.__init__ ( self, parent)

        self.SetSizeHintsSz( wx.DefaultSize, wx.DefaultSize )

        bSizer1 = wx.BoxSizer( wx.VERTICAL )

        self.Panel = wx.Panel( self, wx.ID_ANY, wx.DefaultPosition, wx.DefaultSize, wx.TAB_TRAVERSAL )
        bSizer2 = wx.BoxSizer( wx.VERTICAL )

        self.nb = wx.Notebook( self.Panel, wx.ID_ANY, wx.DefaultPosition, wx.DefaultSize, 0 )

        bSizer2.Add( self.nb, 1, wx.EXPAND |wx.ALL, 5 )

        self.Panel.SetSizer( bSizer2 )
        self.Panel.Layout()
        bSizer2.Fit( self.Panel )
        bSizer1.Add( self.Panel, 1, wx.EXPAND |wx.ALL, 0 )

        self.SetSizer( bSizer1 )
        self.Layout()
        self.menuBar = wx.MenuBar( 0 )
        self.filemenu = wx.Menu()
        self.menuAbout = wx.MenuItem( self.filemenu, wx.ID_ANY, u"&About", u" Information about this program", wx.ITEM_NORMAL )
        self.filemenu.AppendItem( self.menuAbout )

        self.menuExit = wx.MenuItem( self.filemenu, wx.ID_ANY, u"E&xit", u" Terminate the program", wx.ITEM_NORMAL )
        self.filemenu.AppendItem( self.menuExit )

        self.menuBar.Append( self.filemenu, u"&miP3" )

        self.SetMenuBar( self.menuBar )

        self.statusBar = self.CreateStatusBar( 1, wx.ST_SIZEGRIP, wx.ID_ANY )

        self.Centre( wx.BOTH )

        self.Bind( wx.EVT_MENU, self.OnAbout, id = self.menuAbout.GetId() )
        self.Bind( wx.EVT_MENU, self.OnExit, id = self.menuExit.GetId() )

    def __del__( self ):
            pass

    def OnAbout( self, event ):
        event.Skip()

    def OnExit( self, event ):
        event.Skip()

class ExamplePanel ( wx.Panel ):

    def __init__( self, parent ):
        wx.Panel.__init__ ( self, parent )

        # whatever you want on your panel goes here, for example a grid
        bSizer3 = wx.BoxSizer( wx.VERTICAL )
        self.m_grid1 = wx.grid.Grid( self, wx.ID_ANY, wx.DefaultPosition, wx.DefaultSize, 0 )
        self.m_grid1.CreateGrid( 5, 3 )
        self.m_grid1.EnableEditing( True )
        self.m_grid1.EnableGridLines( True )
        self.m_grid1.EnableDragGridSize( False )
        self.m_grid1.SetMargins( 0, 0 )
        self.m_grid1.EnableDragColMove( False )
        self.m_grid1.EnableDragColSize( True )
        self.m_grid1.SetColLabelSize( 30 )
        self.m_grid1.SetColLabelAlignment( wx.ALIGN_CENTRE, wx.ALIGN_CENTRE )
        self.m_grid1.EnableDragRowSize( True )
        self.m_grid1.SetRowLabelSize( 80 )
        self.m_grid1.SetRowLabelAlignment( wx.ALIGN_CENTRE, wx.ALIGN_CENTRE )
        self.m_grid1.SetDefaultCellAlignment( wx.ALIGN_LEFT, wx.ALIGN_TOP )
        bSizer3.Add( self.m_grid1, 1, wx.ALL|wx.EXPAND, 5 )
        self.SetSizer( bSizer3 )
        self.Layout()

    def __del__( self ):
        pass

class MyFrame( ExampleFrame ):
    def __init__( self, parent ):
        ExampleFrame.__init__( self, parent )

        self.title = "Demo with Notebook"
        self.SetTitle(self.title)

        self.nb.AddPage(ExamplePanel(self.nb), "Absolute Positioning")
        self.nb.AddPage(ExamplePanel(self.nb), "Page Two")
        self.nb.AddPage(ExamplePanel(self.nb), "Page Three")

    def OnAbout(self, event):
        # A message dialoge box with an OK button. wx.OK is a sandard ID in wxWidgets
        dlg = wx.MessageDialog(self, "Author: Niek de Klein", "About miP3")
        dlg.ShowModal() # show it
        dlg.Destroy() # finally destroy it when finished

    def OnExit(self, eevent):
        self.Close(True) # close the frame

class testapp(wx.App):
    def OnInit(self):
        self.m_frame = MyFrame(None)
        self.m_frame.Show()
        self.SetTopWindow(self.m_frame)
        return True

app = testapp(0)
app.MainLoop() 
```

# java - 使用 GridLayout 在 java 中设置布局

> ID：13430046
> 
> 赞同：0
> 
> 时间：2012-11-17T11:19:24.140
> 
> 标签：java, swing, layout, jbutton

> **可能重复：**
> [屏幕键盘 gui 不工作](https://stackoverflow.com/questions/13428104/on-screen-keyboard-gui-is-not-working)

我正在使用 java 中的 Jbutton 制作键盘。问题我无法使用原始键盘的布局设置键盘布局。我怎样才能做到这一点？我正在学习java，过去3个小时我一直在解决这个问题，但找不到解决方案。代码如下：

```
public Keyboard()
{
    super("Keyboard");

    pane1= new JPanel();
    pane2= new JPanel();
    pane3= new JPanel();

    glayout= new GridLayout(5,14,2,5);
    text= new JTextArea(15,65);

    text.setFocusable(true);

    Handler = new HandlerClass();

    pane1.add(text);

    pane2.setLayout(glayout);
    pane3.setLayout(new BorderLayout(5,5));

    but= new JButton[57];

    for(int i=0;i<names.length;i++)
    {
            but[i]=new JButton(names[i]);
            pane2.add(but[i]);
    }

    text.addKeyListener(Handler);

    pane3.add(pane1,BorderLayout.NORTH);
    pane3.add(pane2,BorderLayout.SOUTH);
    add(pane3);

} 
```

![在此处输入图像描述](../Images/165652e8b9680b1cbb196cbe3dd8a9fe.png)

我怎么解决这个问题？

问候

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-17T12:04:07.327

我自己找到了我的问题的答案。我刚刚为键盘中的每一行制作了面板。这是解决这个问题的漫长方法，但它完成了工作。如果任何其他人有更好的解决方案，请将其发布在答案中，我会选择该答案。

# c++ - 在 C++ 中用前导零更改十六进制数的位，（C）

> ID：13430050
> 
> 赞同：2
> 
> 时间：2012-11-17T11:19:54.513
> 
> 标签：c++, c, binary, hex

我在十六进制字符串中有这个数字：

```
002A05. 
```

我需要将此数字的第 7 位设置为 1，所以转换后我会得到

```
022A05 
```

但它必须适用于每 6 个字符的十六进制数。

我尝试通过 strtol 将十六进制字符串转换为整数，但该函数去除了前导零。

请帮助我如何解决它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-17T11:29:40.213

```
int hex=0x002A05;
int mask = 0x020000;
printf ("%06X",hex | mask); 
```

希望这可以帮助

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-17T11:32:34.630

在一个 24 位数字中，第 7 位（从左侧开始计数，就像您在示例中所做的那样，而不是从右侧开始计数，就像通常所做的那样）始终位于左侧的第二个字节中。您可以通过取第二个十六进制数字，将其转换为数字 0..15，设置其位 #3（再次从左数）并将结果转换回十六进制来解决您的问题，而无需将整个数字转换为整数数字。

```
int fromHex(char c) {
    c = toupper(c);
    if (c >= '0' && c <= '9') {
        return c-'0';
    } else {
        return c-'A'+10;
    }
}
char toHexDigit(int n) {
    return n < 10 ? '0'+n : 'A'+n-10;
}

char myNum[] = "002A05";
myNum[1] = toHexDigit(fromHex(myNum[1]) | 2);
printf("%s\n", myNum); 
```

这将打印“022A05”（指向 ideone 的[链接](http://ideone.com/91hkDX)）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-17T11:35:58.913

在我看来，您想要操纵一个字符串，而不是十六进制常量。你可以很容易地通过旋转十六进制字符的 ascii 值来做到这一点。如果您有 char 表示 , 或 等十六进制字符`char h = '6';`，`char h = 'C';`则`char h = '';`可以在字符表示的数字中设置左起第三位（右起第二位）：

```
 h = h > '7' ? h <= '9' ? h + 9 : ((h + 1) | 2) - 1 : h | 2; 
```

因此，您可以对字符串中的第二个字符（4 + 3 位）执行此操作。这适用于任何具有 2 个或更多字符的十六进制字符串。这是您的示例：

```
char hex_string[] = "002A05";

// Get the second character from the string
char h = hex_string[1];

// Calculate the new character
h = h > '7' ? h <= '9' ? h + 9 : ((h + 1) | 2) - 1 : h | 2;

// Set the second character in the string to the result
hex_string[1] = h;

printf("%s", hex_string); // 022A05 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-17T11:35:21.750

您特别询问`strtol`，因此要回答您的问题，只需在使用以下转换数字后添加填充`strtol`：

```
const char *s = "002A05";
int x = strtol(s, NULL, 16);
x |= (1<<17);
printf("%.6X\n",x); 
```

# wpf - 在 RibbonGroup 内水平拉伸 WPF 网格

> ID：13430053
> 
> 赞同：3
> 
> 时间：2012-11-17T11:20:07.273
> 
> 标签：wpf, xaml, ribbon, alignment

如何在一个 WPF`Grid`内水平拉伸 WPF `RibbonGroup`？尽管`HorizontalAlignment`有财产，但它并没有伸展。

```
<Window x:Name="FrmMain" x:Class="PhotoCell.MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    Title="PhotoCell" Height="386.821" Width="757.701" WindowState="Maximized">
<Grid>
    <Image x:Name="imgMain" Margin="10,142,10,9"/>
    <Ribbon VerticalAlignment="Top">
        <RibbonTab Header="Home" Height="88" VerticalAlignment="Top">
            <RibbonGroup Header="Save/Load" Height="88" Margin="0" VerticalAlignment="Top" Width="90">
                <Grid HorizontalAlignment="Stretch">
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto" />
                        <RowDefinition Height="Auto" />
                    </Grid.RowDefinitions>
                    <RibbonButton x:Name="cmdLoadImage" Background="#FFFFC500" Label="Load" Click="cmdLoadImage_Click" Margin="10,10,10,0" Grid.Row="0" HorizontalAlignment="Stretch" />
                    <RibbonButton x:Name="cmdSaveImage" Background="#FFFFC500" Label="Save" Click="cmdSaveImage_Click" Margin="10,10,10,0" Grid.Row="1" HorizontalAlignment="Stretch" />
                </Grid>
            </RibbonGroup>
        </RibbonTab>
    </Ribbon>
</Grid>
</Window> 
```

我也试过添加

```
<Grid.ColumnDefinitions>
    <ColumnDefinition Width="*" />
</Grid.ColumnDefinitions> 
```

在行定义之后。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-17T13:41:17.837

我不确定为什么`HorizontalAlignment`和`HorizontalContentAlignment`属性没有按应有的方式执行 - 可能是功能区控件模板中的错误。

无论如何，有一个解决方法：您可以将`RibbonGroup`and绑定`Grid`到该`RibbonTab's` `ActualWidth`属性。您可能需要使用转换器通过偏移量微调这些值，但总而言之，它可以解决问题：

```
<Ribbon VerticalAlignment="Top">
    <RibbonTab x:Name="tab" Header="Home" Height="88" VerticalAlignment="Top">
        <RibbonGroup Width="{Binding ElementName=tab, Path=ActualWidth}" Header="Save/Load" Height="88" Margin="0" VerticalAlignment="Top">
            <Grid Width="{Binding ElementName=tab, Path=ActualWidth}" HorizontalAlignment="Stretch">
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto" />
                    <RowDefinition Height="Auto" />
                </Grid.RowDefinitions>
                <RibbonButton x:Name="cmdLoadImage" Background="#FFFFC500" Label="Load" Click="cmdLoadImage_Click" Margin="10,10,10,0" Grid.Row="0" HorizontalAlignment="Stretch" />
                <RibbonButton x:Name="cmdSaveImage" Background="#FFFFC500" Label="Save" Click="cmdSaveImage_Click" Margin="10,10,10,0" Grid.Row="1" HorizontalAlignment="Stretch" />
            </Grid>
        </RibbonGroup>
    </RibbonTab>
</Ribbon> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T14:49:38.360

我想`RibbonGroup`在`Ribbon`. 我使用了不同的方法。由于我必须进行一些计算（获取所有其他 RibbonGroups 的宽度），因此我没有使用带转换器的绑定。在转换器中，我无法轻松访问其他控件。我使用`SizeChanged`了`Ribbon`. 这里我设置了宽度`RibbonGroup`：

```
 private void RibbonOnSizeChanged(object sender, SizeChangedEventArgs sizeChangedEventArgs)
    {
        ChangeWidgetsGroupWidth(sizeChangedEventArgs.NewSize.Width);
    }

    private void ChangeWidgetsGroupWidth(double newRibbonWidth)
    {
        double otherRibbonGroupWidths = 0;
        foreach (RadRibbonGroup item in HomeTab.Items)
        {
            if (item != rgWidgetsGroup)
            {
                otherRibbonGroupWidths += item.ActualWidth + 2; // Extra margin between groups
            }
        }
        double width = newRibbonWidth - otherRibbonGroupWidths - 6; // '6' to add extra margin
        rgWidgetsGroup.Width = width > 0 ? width : 0;
    } 
```

`rgWidgetsGroup`是`RibbonGroup`我想要的最大尺寸。`Control`我认为对inside a做类似的事情会很容易`RibbonGroup`。

# c - C基本无限循环MVS，计算与邻居的平均值

> ID：13430056
> 
> 赞同：2
> 
> 时间：2012-11-17T11:20:43.777
> 
> 标签：c, visual-studio-2010, infinite-loop

所以这应该是非常基本的，我几乎可以肯定我错过了一些东西，因为我设法编写了更复杂的代码......

代码应该采用正整数并将每个数字与其邻居的平均值写入，用户给出的整数至少为 2 个整数。

所以如果用户给出 a1 a2 a3 a4 输出将是“(a1+a2)/2, (a1+a2+a3)/3,(a2+a3+a4)/3,(a3+a4)/2"但它不限于4个数字，它可以更少或更多。

问题是，当我只有 a1 a2 时，输出是 (a1 +a2)/2, (a1 + a2)/2 代码应该知道是否有 a3，然后决定如何计算第二个? 我确定我在这里遗漏了一些东西，我不知道......我不应该使用比基本更多的东西，我写了一些计算 a1 和 a2 的东西，以防只有输入（a1，a2 ) 但这显然是错误的，因为代码不适用于 a1、a2、a3 等等......

我正在输入代码，尽管它并不接近解决方案，并且即使它的作用也没有被完善：

```
 #include <stdio.h>
int main()
{
    float num=0.0,num2=-1, nextnum=-1,nextnext=-1, after=0.0,after2=0.0;
    do {
        scanf("%f", &num);
        if (num2==-1)
        {
            scanf("%f", &num2);

        after=num+num2  ;   

        nextnum=num2;
        printf("%4g" , (after/2) );
        }

        after=num+nextnum   ;   

        nextnum=num;

    printf("%4g" , (after/2));

    }           
    while (num>0);
    return 0;

} 
```

任何形式的帮助/建议/指导都会很高兴地被接受..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-18T17:16:46.200

首先，我建议您在每次迭代后编写一个变量表及其值。我做了 3 次迭代，它只计算每 2 个数字的平均值。我不知道这是您的原始代码还是只是其中的一部分，因为您甚至没有使用`nextnext`或`after2`变量。但是要解决您最初的问题，您应该`else`为您的 . 添加一个块`if`，并向 if 部分添加任何必要的说明。一个可能的解决方案可能是：

```
do {
    scanf("%f", &num);
    if (num2==-1)
    {
        scanf("%f", &num2);

    after=num+num2  ;   

    nextnum=num;
    nextnext = num2;
    printf("%4g" , (after/2) );
    }
    else {

    after=num+nextnum+nextnext   ;   

    nextnext=nextnum;
    nextnum=num;

    printf("%4g" , (after/2));
    }

}           
while (num>0); 
```

这应该是最后 3 个数字的平均值，您可以在 cicle 之后添加最后 2 个数字的部分，其中`while`应该包含 cicle 之后的最后 2 个输入数字`nextnum`。`nextnext`

# android - Eclipse ADT 版本 21 插件，当一切正确设置时，无法编译工作工作区“没有可用的目标”

> ID：13430057
> 
> 赞同：4
> 
> 时间：2012-11-17T11:20:45.460
> 
> 标签：android, eclipse, adt

在更新到 ADT 2.1 之后，在一些 Eclipse 重新启动并且在任何地方都找不到关于它的任何提及之后，我在编译工作区时遇到了问题。我正在运行 Mac OS X Mountain Lion，并且我还尝试使用与最新 ADT 21 捆绑在一起的 Eclipse 安装。问题仍在重复。在我看来，这似乎是错误。

在 Eclipse 的 Android 首选项中，即使您的文件夹已正确设置为正确的 SDK，也会出现消息“没有可用的目标”。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-17T11:20:45.460

因此，我花了将近两个小时才找到解决这个 bug 的有效解决方案。我重新安装了所有东西，试图回到 ADT 20，然后意外升级了工具，再次被迫将 ADT 更新到 21，这对我来说失败了……

解决方案只是拥有两个正确的 Android SDK 文件夹，并且您必须将 eclipse 指向其他文件夹，应用，它会正确加载 SDK，而不是返回到您实际使用的 SDK 并且一切正常。好吧，直到下一次重新启动，你必须再做一次。感谢 Android 开发人员，每次新的大更新，osx 上的新大错误 :)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-13T14:13:59.187

还有另一个选项（来自[https://stackoverflow.com/a/14045656/4100](https://stackoverflow.com/a/14045656/4100)），如果您确实在启动时禁用了 android 插件运行，则会发生这种情况。启用它应该可以修复错误。

# html - 允许用户在 HTML5 Canvas 游戏中输入文本

> ID：13430069
> 
> 赞同：9
> 
> 时间：2012-11-17T11:21:52.950
> 
> 标签：html, canvas, html5-canvas, kineticjs

我正在尝试结合使用 Canvas 和出色的 KineticJS 库来编写我的第一个 HTML5 游戏，但我很早就遇到了一些困难。

我想要做的是要求用户在游戏中的一个框中输入他们的名字。做了一些研究后，我看不出有任何方法可以在我正在使用的画布的那部分上获得一个浮动的 HTML 元素。

它是否正确？

在很多Flash和网页游戏中长大，我确定每次输入名称或保存文件名时，都是直接在游戏本身中完成的，它不依赖HTML来生成它吗？

任何关于如何做到这一点的建议将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-17T13:08:24.057

您可以使用以下 CSS 技术在画布顶部获取浮动 HTML 元素。

[http://css-tricks.com/absolute-positioning-inside-relative-positioning/](http://css-tricks.com/absolute-positioning-inside-relative-positioning/)

*   制作一个包装器 div 位置：相对

*   使用 position: absolute 添加画布

*   使用 position: absolute 添加其他 HTML 控件

这适用于所有 HTML 元素，而不仅仅是画布。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-29T11:45:40.793

快速而肮脏的方式：

```
var userInput = prompt('What is your name?'); 
```

它有效，但肯定不是最漂亮的方法。iOS实际上有一个非常好的提示。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-10-24T01:25:03.410

我知道这有点旧，但是......

[**Canvas Input**](http://goldfirestudios.com/blog/108/CanvasInput-HTML5-Canvas-Text-Input)是我在游戏中使用的一个很棒的库：

[![在此处输入图像描述](../Images/3d1e100fe94883bef067a3480b79c886.png)](https://i.stack.imgur.com/2vSPa.png)

如您所见，我可以在框中输入内容并将其显示在屏幕上。它易于使用：

```
var input = new CanvasInput({
    canvas: document.getElementById("ctx"),
    x: 0,
    y: 0,
    fontSize: 18,
    fontFamily: 'Arial',
    fontColor: '#212121',
    fontWeight: 'bold',
    width: 200,
    padding: 8,
    borderWidth: 1,
    borderColor: '#000',
    borderRadius: 3,
    onsubmit: function() {
        // your code here for submitting (when user presses enter)
    },
}); 
```

免责声明：我与 CanvasInput 没有任何关系，也没有收到这篇文章的任何内容:)

# c# - 在 C# 中使用 sql server 视图

> ID：13430070
> 
> 赞同：1
> 
> 时间：2012-11-17T11:21:53.200
> 
> 标签：c#, sql-server

我想从 sql server 中的视图将数据加载到 gridview。但是怎么做呢？例如，对于数据库表，我有不同的（由 vs 生成）表适配器，如 TClientTableAdapter、TShopsTableAdapter 等。但我没有看到任何视图（视图 - TVProvider）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-17T11:25:16.533

表格和视图之间没有区别，您可以将其视为表格并使用它。只考虑视图是一个表格&做程序，它可以像表格一样加载数据

# javascript - 如何防止在JS上通过中键粘贴到输入中？

> ID：13430073
> 
> 赞同：3
> 
> 时间：2012-11-17T11:22:00.137
> 
> 标签：javascript

鼠标中键将值粘贴到输入字段中。我想覆盖这个功能。这是可能的？我使用以下代码，但它不会阻止默认粘贴：

```
$('input').on('mouseup',function(e){
    //middle button is clicked
    if (e.which == 2)
    {
        e.preventDefault();

        $(this).val('another value');
    }
}) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-17T11:37:55.143

您需要做的就是取消`mousedown`事件而不是`mouseup`.
这是一个现场演示：http: [//jsfiddle.net/77En2/2/](http://jsfiddle.net/77En2/2/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-12-10T16:29:50.510

事情发生了变化——现在情况正好相反。阻止 mousedown 或 pointerdown 不会阻止它。

2021年解决方案：

```
input.addEventListener('pointerup', (e) => {
  if (e.button === 1) {
    e.preventDefault();
  }
}); 
```

或者

```
input.addEventListener('mouseup', (e) => {
  if (e.button === 1) {
    e.preventDefault();
  }
}); 
```

这是一个更好的变化，因为粘贴发生在 MMB 发布之后。

顺便说一句，只有 Linux 实现了这种行为。

# javascript - 2 谷歌地图在同一页面上使用地理编码

> ID：13430076
> 
> 赞同：1
> 
> 时间：2012-11-17T11:22:11.197
> 
> 标签：javascript, google-maps, google-maps-api-3, geocoding

我正在使用谷歌地图对地址进行地理编码并将该信息填充到输入字段中。我可以为 1 张地图成功执行此操作，但我的页面上需要有 2 张地图。每个都有自己的地理编码信息。

我试图将 Javascript 代码放在一起，基本上复制了我的第一张地图。

我的JavaScript如下

```
<script type="text/javascript">

         var geocoder;
         var map;

         function initialize() {
             geocoder = new google.maps.Geocoder();
             var latlng = new google.maps.LatLng(53.2948557, -6.139267399999994);
             var mapOptions = {
               zoom: 10,
               center: latlng,
               mapTypeId: google.maps.MapTypeId.ROADMAP
             }
             map = new google.maps.Map(document.getElementById('map_canvas'), mapOptions);
          }

         function codeAddress() {
             var address = document.getElementById('address').value;
             geocoder.geocode( { 'address': address}, function(results, status) {
               if (status == google.maps.GeocoderStatus.OK) {
                 map.setCenter(results[0].geometry.location);
                 var marker = new google.maps.Marker({
                     map: map,
                     position: results[0].geometry.location
                 });
                 document.getElementById("input_15_169").value = marker.getPosition().lat();
                 document.getElementById("input_15_167").value = marker.getPosition().lng();
                 document.getElementById("input_15_92").value = address;

               } else {
                 alert('Geocode was not successful for the following reason: ' + status);
               }
             });
           }

           var geocoder;
               var map2;

               function initialize() {
                   geocoder = new google.maps.Geocoder();
                   var latlng = new google.maps.LatLng(53.2948557, -6.139267399999994);
                   var mapOptions = {
                     zoom: 10,
                     center: latlng,
                     mapTypeId: google.maps.MapTypeId.ROADMAP
                   }
                   map2 = new google.maps.Map(document.getElementById('map_canvas2'), mapOptions);
                }

               function codeAddress() {
                   var address = document.getElementById('address').value;
                   geocoder.geocode( { 'address': address}, function(results, status) {
                     if (status == google.maps.GeocoderStatus.OK) {
                       map.setCenter(results[0].geometry.location);
                       var marker = new google.maps.Marker({
                           map: map2,
                           position: results[0].geometry.location
                       });
                       document.getElementById("input_16_169").value = marker.getPosition().lat();
                       document.getElementById("input_16_167").value = marker.getPosition().lng();
                       document.getElementById("input_16_92").value = address;

                     } else {
                       alert('Geocode was not successful for the following reason: ' + status);
                     }
                   });
                 }

         </script> 
```

在我的 html 中，我给了地图 2 个不同的 id`map_canvas`和`map_canvas2`

但是，当我加载我的页面时，只出现第二张地图，当我尝试绘制地址时，即使上面的输入字段是正确的，也没有任何反应。

我想我在添加第二张地图并在上面的 javascript 中寻找一些建议时做错了。

谢谢

JSFiddle 代码在这里[http://jsfiddle.net/JJKx5/](http://jsfiddle.net/JJKx5/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-17T14:19:22.217

你不能有同名的方法，否则解释器不知道选择哪一个，所以把你的逻辑放在一个方法中。

[http://jsfiddle.net/JJKx5/1/](http://jsfiddle.net/JJKx5/1/)

```
 function initialize() {
             geocoder = new google.maps.Geocoder();
             var latlng = new google.maps.LatLng(53.2948557, -6.139267399999994);
             var mapOptions = {
               zoom: 10,
               center: latlng,
               mapTypeId: google.maps.MapTypeId.ROADMAP
             };
             map = new google.maps.Map(document.getElementById('map_canvas'), mapOptions);
             map2 = new google.maps.Map(document.getElementById('map_canvas2'), mapOptions);
          } 
```

# android - 请帮我解决以下异常？

> ID：13430079
> 
> 赞同：4
> 
> 时间：2012-11-17T11:23:06.690
> 
> 标签：android

在按钮上单击我想显示联系人列表并检索用户选择的联系人号码。这是我的代码：

```
public class MainActivity extends Activity {
    int level;
    final int PICK_CONTACT =1;
    private TextView textView;
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        textView = new TextView(this);
        textView.setWidth(100);
        textView.setHeight(100);

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        getMenuInflater().inflate(R.menu.activity_main, menu);
        return true;
    }
    public void onClick(View v) {

        @SuppressWarnings("deprecation")
           //Contracts class is deprecated , please tell any other alternative if possible.
        Intent intent= new Intent(Intent.ACTION_PICK,  Contacts.CONTENT_URI);

        startActivityForResult(intent, PICK_CONTACT);

    }
    @Override
    public void onActivityResult(int reqCode, int resultCode, Intent data) {
      super.onActivityResult(reqCode, resultCode, data);

      switch (reqCode) {
        case (PICK_CONTACT) :
          if (resultCode == Activity.RESULT_OK) {
            Uri contactData = data.getData();
            Cursor c =  managedQuery(contactData, null, null, null, null);
            if (c.moveToFirst()) {
//here am retrieving name , please tell how to retrieve number as well             
 String name = c.getString(c.getColumnIndex(ContactsContract.Contacts.DISPLAY_NAME));
              textView.setText(name);
              // TODO Fetch other Contact details as you want to use

            }
          }
          break;
      }
    }

} 
```

在清单文件中添加了权限：android.permission.READ_CONTACTS

不知道它实际上是否需要。

还请告诉我是否要检索用户从联系人列表中选择的多个联系人。

这是我的日志：

```
11-17 15:28:58.265: E/AndroidRuntime(12359): FATAL EXCEPTION: main
11-17 15:28:58.265: E/AndroidRuntime(12359): java.lang.IllegalStateException: Could not execute method of the activity
11-17 15:28:58.265: E/AndroidRuntime(12359):    at android.view.View$1.onClick(View.java:2144)
11-17 15:28:58.265: E/AndroidRuntime(12359):    at android.view.View.performClick(View.java:2485)
11-17 15:28:58.265: E/AndroidRuntime(12359):    at android.view.View$PerformClick.run(View.java:9080)
11-17 15:28:58.265: E/AndroidRuntime(12359):    at android.os.Handler.handleCallback(Handler.java:587)
11-17 15:28:58.265: E/AndroidRuntime(12359):    at android.os.Handler.dispatchMessage(Handler.java:92)
11-17 15:28:58.265: E/AndroidRuntime(12359):    at android.os.Looper.loop(Looper.java:130)
11-17 15:28:58.265: E/AndroidRuntime(12359):    at android.app.ActivityThread.main(ActivityThread.java:3687)
11-17 15:28:58.265: E/AndroidRuntime(12359):    at java.lang.reflect.Method.invokeNative(Native Method)
11-17 15:28:58.265: E/AndroidRuntime(12359):    at java.lang.reflect.Method.invoke(Method.java:507)
11-17 15:28:58.265: E/AndroidRuntime(12359):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:867)
11-17 15:28:58.265: E/AndroidRuntime(12359):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:625)
11-17 15:28:58.265: E/AndroidRuntime(12359):    at dalvik.system.NativeStart.main(Native Method)
11-17 15:28:58.265: E/AndroidRuntime(12359): Caused by: java.lang.reflect.InvocationTargetException
11-17 15:28:58.265: E/AndroidRuntime(12359):    at java.lang.reflect.Method.invokeNative(Native Method)
11-17 15:28:58.265: E/AndroidRuntime(12359):    at java.lang.reflect.Method.invoke(Method.java:507)
11-17 15:28:58.265: E/AndroidRuntime(12359):    at android.view.View$1.onClick(View.java:2139)
11-17 15:28:58.265: E/AndroidRuntime(12359):    ... 11 more
11-17 15:28:58.265: E/AndroidRuntime(12359): Caused by: java.lang.IllegalArgumentException: URI: content://contacts, calling user: android.uid.system:1000, calling package is one of: [com.sec.android.app.popupuireceiver, com.android.Preconfig, com.sec.app.RilErrorNotifier, com.sec.android.providers.drm, com.android.server.vpn, com.android.systemui, com.android.providers.security, com.wssyncmldm, com.android.settings, com.wssnps, com.android.bluetoothtest, com.sec.android.app.servicemodeapp, com.sec.android.app.factorytest, com.android.settings.mt, com.samsung.InputEventApp, com.sec.dsm.system, com.sec.android.app.wlantest, com.samsung.AlertRecipients, com.sec.android.app.personalization, android, com.sec.android.app.selftestmode, com.google.android.backup, com.android.providers.settings, com.android.providers.subscribedfeeds, com.sec.android.app.lcdtest]
11-17 15:28:58.265: E/AndroidRuntime(12359):    at android.os.Parcel.readException(Parcel.java:1326)
11-17 15:28:58.265: E/AndroidRuntime(12359):    at android.os.Parcel.readException(Parcel.java:1276)
11-17 15:28:58.265: E/AndroidRuntime(12359):    at android.app.ActivityManagerProxy.getProviderMimeType(ActivityManagerNative.java:2846)
11-17 15:28:58.265: E/AndroidRuntime(12359):    at android.content.ContentResolver.getType(ContentResolver.java:215)
11-17 15:28:58.265: E/AndroidRuntime(12359):    at android.content.Intent.resolveType(Intent.java:3268)
11-17 15:28:58.265: E/AndroidRuntime(12359):    at android.content.Intent.resolveTypeIfNeeded(Intent.java:3290)
11-17 15:28:58.265: E/AndroidRuntime(12359):    at 
11-17 15:28:58.265: E/AndroidRuntime(12359):    at com.example.sms.MainActivity.onClick(MainActivity.java:82) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T05:33:37.940

在您的按钮 onclick 中，您必须添加 intent.setType(Phone.CONTENT_TYPE); 您的代码中缺少此内容，请使用以下代码。

```
 Intent intent= new Intent(Intent.ACTION_PICK,  Contacts.CONTENT_URI);
 intent.setType(Phone.CONTENT_TYPE);
 startActivityForResult(intent, PICK_CONTACT); 
```

# spring - Spring Data 根据 uri /files <-> files/1 为同一对象提供不同的数据

> ID：13430082
> 
> 赞同：3
> 
> 时间：2012-11-17T11:23:14.630
> 
> 标签：spring, rest, spring-data, spring-data-jpa, spring-data-rest

我对 Spring-DATA-REST 有疑问。我已经在春季[论坛发帖](http://forum.springsource.org/showthread.php?131789-Spring-Data-Rest-with-HSQL-in-memory-old-data-after-server-restart)，但没有得到答复。也许这里有人可以帮忙？

我有一个使用 Spring-DATA-REST 设置的测试应用程序，并且我的所有域对象都被 spring data rest 公开。

现在：如果我访问 uri /files/ 下的文件存储库，我会得到我刚刚创建的文件列表。

但是：如果我随后使用直接 uri /files/{id} 访问其中一个文件，例如 /files/1，我会从很久以前输入的文件中获取数据。我无法解释这些数据来自哪里......

我刚刚检查了 JpaRepository。没关系，我从以下文件检索到的数据相同：

JpaRepository.findAll().get(0) 从 jpaRepository.findOne(JpaRepository.getAll().get(0).getId())

spring data rest中是否有一些缓存，仍然有旧数据？

我真的很绝望。任何人都知道如何使用弹簧数据休息来获取我的新数据？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T06:35:26.927

我假设您使用 HTTP 作为传输层。如果是，那么您应该查看 HTTP 缓存标头作为响应。结果可能会缓存在两者之间。您可以使用：

```
curl -vvl uri/files/{id} 
```

查看所有响应的标题。

# php - 表单中的变量未传递给 php

> ID：13430083
> 
> 赞同：1
> 
> 时间：2012-11-17T11:23:20.290
> 
> 标签：php

我有这个表格，我试图用它来获取一些用户输入的变量并将它们传递给 calculate.php 以计算和显示结果。

### 计算.html

```
<HTML>
<HEAD>
<TITLE>Calculation Form</TITLE>
</HEAD>
<BODY>
<FORM METHOD="POST" ACTION="calculate.php">
<P>Value 1: <INPUT TYPE="text" NAME="vall" SIZE=10></P>
<P>Value 2: <INPUT TYPE="text" NAME="val2" SIZE=10></P>

<P>Calculation:<br>
<INPUT TYPE="radio" NAME="calc" VALUE="add"> add<br>
<INPUT TYPE="radio" NAME="calc" VALUE="subtract"> subtract<br>
<INPUT TYPE="radio" NAME="calc" VALUE="multiply"> multiply<br>
<INPUT TYPE="radio" NAME="calc" VALUE="divide"> divide</P>

<P><INPUT TYPE="submit" NAME="submit" VALUE="Calculate"></P>

</BODY>
</HTML> 
```

### 计算.php：

```
 <?
if (($_POST["vall"] == "") || ($_POST["val2"] == "") || ($_POST["calc"] =="")) {
    header("Location: http://localhost/calculate.html");
exit;
}

if ($_POST["calc"] == "add") {
   $result = $_POST["vall"] + $_POST["val2"];
} else if ($_POST["calc"] == "subtract") {
   $result = $_POST["vall"] - $_POST["val2"];
} else if ($_POST["calc"] == "multiply") {
   $result = $_POST["vall"] * $_POST["val2"];
} else if ($_POST["calc"] == "divide") {
   $result = $_POST["vall"] / $_POST["val2"];
}

?>

<HTML>
<HEAD>
<TITLE>Calculation Result</TITLE>
</HEAD>
<BODY>

<P>The result of the calculation is: <? echo $result; ?></P>

</BODY>
</HTML> 
```

谁能说我的错误在哪里，因为我只得到： 计算的结果是：

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-17T11:26:15.477

### `"`您在所有的数组索引中都错过了s `$_POST[]`，因此您需要添加`""`.

```
<?
if (($_POST["vall"] == "") || ($_POST["val2"] == "") || ($_POST["calc"] =="")) {
    header("Location: http://localhost/calculate.html");
exit;
}

if ($_POST["calc"] == "add") {
   $result = $ POST[vall] + $_POST[val2];

} else if ($_POST["calc"] == "subtract") {
   $result = $_POST["vall"] - $_POST["val2"];
} else if ($_POST["calc"] == "multiply") {
   $result = $_POST["vall"] * $_POST["val2"];
} else if ($_POST["calc"] == "divide") {
   $result = $_POST["vall"] / $_POST["val2"];
}

?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-17T11:27:18.767

这些`$_POST[vall]`需要`$_POST['vall']`。字符串文字`vall`是关键。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-17T11:33:57.140

您在 calculate.php 的第 8 行有一个错误：

```
$result = $ POST[vall] + $_POST[val2]; 
```

应该：

```
$result = $_POST["vall"] + $_POST["val2"]; 
```

并考虑到以前的答案

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-17T11:48:20.703

可能只是在这里打错了，但是 - 除了其他人所说的之外，**你忘了**关闭`</form>`标签

```
<INPUT TYPE="radio" NAME="calc" VALUE="divide"> divide</P>

<P><INPUT TYPE="submit" NAME="submit" VALUE="Calculate"></P>

</FORM> <!-- MISSING -->

</BODY> 
```

我还会在处理之前检查 POST 请求：

```
if ($_SERVER['REQUEST_METHOD'] == 'POST')
{
   // do your stuff
} 
```

# java - HTTP 状态 500 错误

> ID：13430092
> 
> 赞同：0
> 
> 时间：2012-11-17T11:24:18.667
> 
> 标签：java, tomcat, jsp-tags

我收到类似的错误

```
org.apache.jasper.JasperException: Unable to compile class for JSP: 
An error occurred at line: 6 in the generated java file
Only a type can be imported. com.sixpanview.getcoordinate resolves to a package
An error occurred at line: 7 in the generated java file
Only a type can be imported. com.sixpanview.fileReader resolves to a package
An error occurred at line: 8 in the generated java file
Only a type can be imported. com.sixpanview.cookieInfo resolves to a package 
```

并在使用`getcoordinate`,`fileReader`和`cookieInfo`.jsp 程序的行中出现错误，并且堆栈跟踪是

```
at org.apache.jasper.compiler.DefaultErrorHandler.javacError(DefaultErrorHandler.java:92)
        at org.apache.jasper.compiler.ErrorDispatcher.javacError(ErrorDispatcher.java:330)
        at org.apache.jasper.compiler.JDTCompiler.generateClass(JDTCompiler.java:439)
        at org.apache.jasper.compiler.Compiler.compile(Compiler.java:356)
        at org.apache.jasper.compiler.Compiler.compile(Compiler.java:334)
        at org.apache.jasper.compiler.Compiler.compile(Compiler.java:321)
        at org.apache.jasper.JspCompilationContext.compile(JspCompilationContext.java:592)
        at org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:328)
        at org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:313)
        at org.apache.jasper.servlet.JspServlet.service(JspServlet.java:260)
        at javax.servlet.http.HttpServlet.service(HttpServlet.java:717)
        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:290)
        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
        at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:233)
        at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:191)
        at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:127)
        at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102)
        at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109)
        at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:293)
        at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:859)
        at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:602)
        at org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:489)
        at java.lang.Thread.run(Thread.java:679) 
```

为什么我会得到它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-17T11:30:13.707

您不能导入`package`. 您需要`classes`在该包中导入。

在您的导入语句中，将您的导入替换为：-

```
com.sixpanview.getcoordinate.*;
com.sixpanview.fileReader.*;
com.sixpanview.cookieInfo.*; 
```

我假设这些包下没有其他子包。

`.*`将导入该包下的所有类。理想情况下，您不应该这样做。`import`如果您知道它们是什么，而是这些包中的特定类。

喜欢： -

```
import java.util.List; 
```

优于：-

```
import java.util.*; 
```

**PS : -**请不要`bold case`在您的内容中使用，除非突出显示真的很重要。它很难阅读。并在将来发布您的代码片段，同时发布异常。

# scala - 在 sbt 运行任务中重定向标准输入/标准输出

> ID：13430093
> 
> 赞同：7
> 
> 时间：2012-11-17T11:24:25.050
> 
> 标签：scala, sbt

有没有办法为 sbt`run`任务重定向标准输入/标准输出？我可以像这样从 Bash shell 中做到这一点：

```
sbt run < myfile.txt 
```

但不是来自 sbt 控制台。这不起作用，例如：

```
> run < myfile.txt 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-17T15:27:35.627

您可以编写一个自定义`runWithInput`任务，通过运行一个新的 JVM 进程并使用从参数文件重定向的输入来为您执行此操作。请参阅[https://github.com/harrah/xsbt/wiki/Process](https://github.com/harrah/xsbt/wiki/Process)和[https://github.com/harrah/xsbt/wiki/Getting-Started-Custom-Settings](https://github.com/harrah/xsbt/wiki/Getting-Started-Custom-Settings)。

# ruby-on-rails - validates_presence_of 是否用作保存时的默认值？

> ID：13430095
> 
> 赞同：0
> 
> 时间：2012-11-17T11:24:30.790
> 
> 标签：ruby-on-rails

是否`validates_presence_of`用作保存时所有属性的默认值？所以你不必每次都把它写在你的模型中？

[这里是我的问题的参考](http://apidock.com/rails/ActiveModel/Validations/HelperMethods/validates_presence_of)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-17T11:35:18.177

No.`validates_presence_of`不用作默认值，您每次都必须在模型中为您想要存在的每个属性编写它。

# javascript - 读取 cookie 返回未定义

> ID：13430100
> 
> 赞同：1
> 
> 时间：2012-11-17T11:25:00.813
> 
> 标签：javascript

这是我的情况。我有一个下拉菜单来选择家中的国家。

如果没有 cookie，我将 cookie 默认设置为“美国”，然后用户在新选项卡中打开一个链接并转到结帐页面，我过滤其他国家并在下拉选择中仅显示所选国家，一切都很好，但是在第一个选项卡上时它在第二个选项卡上将国家更改为德国 Cookie 是德国，但国家仍然是美国。

有两种选择，

```
<select id="country">
    <option>Select Country</option>
    <option value="US">Select Country</option>
</select> 
```

我想做的是

```
function readCookie(k){return(document.cookie.match('(^|; )'+k+'=([^;]*)')||0)[2]} 
```

或任何其他读取 cookie 的函数，如此处描述[的在 JavaScript 中按名称读取 cookie 的最短函数是什么？](https://stackoverflow.com/questions/5639346/shortest-function-for-reading-a-cookie-in-javascript)

```
document.getElementById('country').onchange = function () { 
    this.options.length = 0;
    this.options[1] = new Option(readCookie('country'),readCookie('country'));
    this.options[1].setAttribute("selected","selected");
} 
```

它们返回未定义，但当我使用配置文件检查时，cookie 就在那里。基本上，我只想根据 cookie 更新选项

当我做

```
document.getElementById('country').onchange = function () { 

    alert(readCookie('country'); //returns undefined
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-17T11:54:03.483

您在创建 cookie 时检查了路径吗？确保路径是 /，我有时会忘记并创建 2 个 cookie 或无法删除旧的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-18T15:40:23.227

我改用本地存储。

# c++ - 内联或相同的代码

> ID：13430101
> 
> 赞同：1
> 
> 时间：2012-11-17T11:25:02.093
> 
> 标签：c++, visual-studio, visual-c++, inline, disassembly

如何设置编译器以生成相同的代码？例如：**_**

```
inline bool iszero(int a)
{
    return (a == 0);
}

int main()
{
    int a = 4;

    if(a == 0) // First
        a = 5;

    if(iszero(a)) // Second
        a = 5;

    ///...
} 
```

在调试模式（带内联）反汇编代码如下所示：

```
if(a == 0) // First
     a = 5;

bool temp; // Second
if(a == 0)
    temp = 0;
else
    temp = 1;

if(temp == 0)
    a = 5; 
```

为什么会这样？

为什么有人问这个问题？我需要使用内联函数调试我的应用程序（**以加快调试速度**），并且我不想在调试模式下**失去性能。**

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-17T11:26:56.907

在发布模式下编译，并进行全面优化。生成的代码将相当于：

```
int main()
{
} 
```

在没有优化的情况下比较代码是没有意义的，因为在没有优化的情况下进行基准测试是没有意义的。

# package - 如何在包内的 Meteor 中将模板添加到正文

> ID：13430102
> 
> 赞同：11
> 
> 时间：2012-11-17T11:25:08.557
> 
> 标签：package, meteor, handlebars.js

我有这个模板：

```
<template name="sample">
  <h1>Sample</h1>
</template> 
```

在 Meteor 应用程序中，我可以通过这种方式将其添加到正文中（作为部分）：

```
{{> sample}} 
```

有用。我什至测试过调用 Template.sample(); 在浏览器控制台内，它可以工作。

当我将它移动到我的包中（即我的包文件夹中的 sample.html 文件）时，模板似乎消失了：`Template.sample() is not a function`每当我调用该函数时，我什至无法将它呈现为部分。

我有这个代码（很明显，包是通过文件在`package.js`我的应用程序中正确加载的）：`packages``.meteor`

```
Package.on_use(function (api) {
  api.add_files(['sample.html', 'sample.js'], 'client');
}); 
```

为什么这不起作用？ **如何从我的包中将（反应性）模板附加到正文？**

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-11-17T16:13:34.980

解决了！添加这一行：

```
api.use(['templating'], 'client'); 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2014-08-04T08:10:34.240

`html`在文件之前包含文件也很重要`js`

```
api.add_files("client/sampleTemplate.html", "client");
api.add_files("client/sampleTemplate.js", "client"); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-12-15T14:11:32.420

包含在`packages.js`包的文件中

前

```
api.use('meteor-platform');
api.use('ui');` 
```

在第一个“.html”文件之后，在“.js”文件之后

```
api.addFiles('filename.html','client');
api.addFiles('filename.js','client');` 
```

# android - 搜索对话框搜索建议

> ID：13430117
> 
> 赞同：1
> 
> 时间：2012-11-17T11:27:43.513
> 
> 标签：android

我已经实现了搜索对话框和在线搜索建议。但是我希望当用户单击建议以将字符串从建议列表复制到搜索对话框以及当用户单击搜索按钮开始搜索时。现在，当用户点击建议搜索时会自动启动。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T23:54:47.327

Take a look at [http://developer.android.com/guide/topics/search/adding-custom-suggestions.html#RewritingQueryText](http://developer.android.com/guide/topics/search/adding-custom-suggestions.html#RewritingQueryText) which lists 3 different approaches to do this as per below:

1) Add the android:searchMode attribute to your searchable configuration with the "queryRewriteFromText" value. In this case, the content from the suggestion's SUGGEST_COLUMN_TEXT_1 column is used to rewrite the query text.

2) Add the android:searchMode attribute to your searchable configuration with the "queryRewriteFromData" value. In this case, the content from the suggestion's SUGGEST_COLUMN_INTENT_DATA column is used to rewrite the query text. This should only be used with URI's or other data formats that are intended to be user-visible, such as HTTP URLs. Internal URI schemes should not be used to rewrite the query in this way.

3) Provide a unique query text string in the SUGGEST_COLUMN_QUERY column of your suggestions table. If this column is present and contains a value for the current suggestion, it is used to rewrite the query text (and override either of the previous implementations).

# sql-server - 选择不同列和行值的空值和非空值

> ID：13430119
> 
> 赞同：1
> 
> 时间：2012-11-17T11:27:56.317
> 
> 标签：sql-server

我有一个关于 SQL 的问题；请帮我。

```
COLUMN NAME1    COLUMN NAME2
----------------------------    
A                  1
A                  2
A                  NULL
B                  3
C                  NULL 
```

这是我的表，我必须选择 A 和 B 的非空值，并选择 C ​​的空值。

也就是说，如果 A 仅具有 NULL 值而 C 具有 NOT NULL 值仅意味着我必须选择 A 的 NULL 值而不是 C 的空值。

也就是说，如果 A 同时具有 NULL 和 NOT NULL 值意味着我只想要 A 的 NOT NULL 并且 C 具有 NULL 值意味着我想要 C 的 NULL 值。

同时，如果 C 有 NULL AND NOT NULL 值意味着我想要 C 的 NOT NULL 值。

请尽快帮助我。我在等待

# php - str_getcsv() 替代旧 PHP 版本，最后给我一个空数组

> ID：13430120
> 
> 赞同：2
> 
> 时间：2012-11-17T11:27:56.863
> 
> 标签：php, regex, csv

我的托管服务提供商没有支持 str_getcsv() 的 PHP 版本，所以我环顾四周，发现了这个函数。它可以解决问题，只是它给了我一个额外的空数组并且它弄乱了我的代码。示例 "a, b, b" 将返回`Array ( [0] => a [1] => b [2] => c [3] => )`。这是功能：

```
function _pick_csv_element($x) {
return strlen($x[1]) ? $x[1] : $x[2];
}

function str_getcsv($input) {
preg_match_all(
    '/\G (?: \s*"([^"]*)"\s* | ([^,]*) ) (?:,|$) /x',
    $input, $matches,
    PREG_SET_ORDER
);
return array_map('_pick_csv_element', $matches);
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-17T11:49:28.063

可能最可靠的解决方法是：

```
$fh = fopen('php://temp', 'r+');
fwrite($fh, $string);
rewind($fh);

$row = fgetcsv($fh);

fclose($fh); 
```

您继续使用内置的 CSV 功能，您只需要从流中读取它。不过，这会对性能造成轻微影响，因为需要复制字符串。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-24T05:46:00.347

戴夫，

我猜你使用的是 PHP 5.2.*。如果您的要求是将整个 CSV 文件读入一个多维关联数组，那么下面会像一个美女一样工作：

```
function parse_csv_file($csvfile) {
    $csv = Array();
    $rowcount = 0;
    if (($handle = fopen($csvfile, "r")) !== FALSE) {
        $max_line_length = defined('MAX_LINE_LENGTH') ? MAX_LINE_LENGTH : 10000;
        $header = fgetcsv($handle, $max_line_length);
        $header_colcount = count($header);
        while (($row = fgetcsv($handle, $max_line_length)) !== FALSE) {
            $row_colcount = count($row);
            if ($row_colcount == $header_colcount) {
                $entry = array_combine($header, $row);
                $csv[] = $entry;
            }
            else {
                error_log("csvreader: Invalid number of columns at line " . ($rowcount + 2) . " (row " . ($rowcount + 1) . "). Expected=$header_colcount Got=$row_colcount");
                return null;
            }
            $rowcount++;
        }
        //echo "Totally $rowcount rows found\n";
        fclose($handle);
    }
    else {
        error_log("csvreader: Could not read CSV \"$csvfile\"");
        return null;
    }
    return $csv;
} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-05-13T09:33:22.313

在这里寻找您的答案，这可能对您有很大帮助。

[替代 str_getcsv](https://stackoverflow.com/questions/16481376/explode-inspite-of-str-getcsv)

# java - 如何使用 api 将 HTML 转换为 PPT 文件？

> ID：13430122
> 
> 赞同：1
> 
> 时间：2012-11-17T11:28:01.210
> 
> 标签：java, jsp, html-parsing, ms-office, openoffice.org

我必须添加一个将 jsp（*呈现为 html 页面*）导出为 ppt 文件的功能。以前使用 poi 将 jsp 导出为 excel 并使用 iText 导出为 pdf 已经完成。我用谷歌搜索了很多，`html/jsp to ppt java api`但感觉很不幸。

仅供参考，我已经将 jsp 转换为 pdf，所以如果 java 中有任何 pdf 到 ppt 转换器 API，那也会有帮助。

请向我推荐任何 API 或分享有关的经验`html/jsp to ppt converter java api`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T12:29:40.753

ppt 格式请使用 poi-scratchpad，pptx 格式请使用 poi-ooxml。有关示例，请参阅[poi.apache.org/slideshow](http://poi.apache.org/slideshow)

# c++ - 在有限差分法中使用的最佳 epsilon/dx 值是多少？

> ID：13430123
> 
> 赞同：2
> 
> 时间：2012-11-17T11:28:09.233
> 
> 标签：c++, double-precision, derivative, epsilon

```
double MyClass::dx = ?????;

double MyClass::f(double x)
{
    return 3.0*x*x*x - 2.0*x*x + x - 5.0;
}

double MyClass::fp(double x)    // derivative of f(x), that is f'(x)
{
    return (f(x + dx) - f(x)) / dx;
} 
```

使用有限差分法进行推导时，选择最佳`dx`值至关重要。在数学上，`dx`必须尽可能小。但是，我不确定选择最小的正双精度数（即 2.2250738585072014 x 10 ^(-308)）是否是正确的选择。

是否有最佳数值区间或精确值可供选择`dx`以使计算误差尽可能小？

（我使用的是 64 位编译器。我将在 Intel i5 处理器上运行我的程序。）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-17T11:58:17.373

选择最小的可能值几乎肯定是错误的：如果`dx`是那个最小的数字，那么由于四舍五入`f(x + dx)`将*完全*等于。`f(x)`

所以你有一个权衡：选择`dx`太小，你会因为舍入误差而失去精度。选择太大，由于*x*变化时导数的变化，您的结果将不精确。

要判断数字错误，请在数学上考虑`(f(x + dx) - f(x))/f(x)`¹。分子表示您要计算的差异，但分母表示您正在处理的数字的大小。如果该分数约为 2 ^(‒<i>k)，那么您可以预期结果中的精度约为*k*位。

如果你知道你的函数，你可以计算出选择`dx`太大会导致什么错误。然后，您可以平衡事物，以便由此产生的误差与舍入产生的误差大致相同。但是，如果您知道该函数，则最好提供一个直接计算导数的函数，例如您的示例中的 polygonal `f`。

pogorskiy[指出](https://stackoverflow.com/questions/13430123/what-is-the-optimum-epsilon-dx-value-to-use-within-the-finite-difference-method#comment18357187_13430123)的[Wikipedia 部分](http://en.wikipedia.org/wiki/Numerical_differentiation#Practical_considerations_using_floating_point_arithmetic)建议了 sqrt(ε) *x*的值，或近似。如果没有关于函数的任何更详细的知识，这样的经验法则将提供一个合理的默认值。另请注意，同一部分建议不要除以，而是除以，因为这会将计算产生的舍入误差考虑在内。但我想整篇文章都充满了您可能会使用的建议。*`1.5e-8 * x``dx``(x + dx) - x``x + dx`*

 ** * *

¹这个公式确实应该除以`f(x)`，而不是除以`dx`，即使过去的编辑想法不同。我试图比较除法后剩余的有效位数，而不是切线的斜率。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-11-17T14:30:54.987

为什么不直接使用幂律推导导数，你会得到一个准确的答案：

```
f(x) = 3x^3 - 2x^2 + x - 5
f'(x) = 9x^2 - 4x + 1 
```

所以：

```
f(x) = 3.0 * x * x * x - 2.0 * x * x + x - 5.0
fp(x) = 9.0 * x * x - 4.0 * x + 1.0 
```*

# xaml - 如何从 WPF 中的类触发 xaml 代码？

> ID：13430124
> 
> 赞同：0
> 
> 时间：2012-11-17T11:28:13.553
> 
> 标签：xaml

它工作正常：

```
 <Button Width="100" Height="30" Content="Click Me!">
      <Button.ToolTip>
          <Border Margin="-4,0,-4,-3" Padding="10" Background="Silver">
             <Border.BitmapEffect>
                 <OuterGlowBitmapEffect></OuterGlowBitmapEffect>
             </Border.BitmapEffect>
                <Label>Nice tooltip</Label>
             </Border>
          </Button.ToolTip>
  </Button> 
```

但是，我希望在有条件时撤销代码。例如：

```
 if(str=="aaa")
    MessageBox.Show("All will be o'kay");
 else 
  {
      //I would like this code to revoke
      /*  <Border.BitmapEffect>
              <OuterGlowBitmapEffect></OuterGlowBitmapEffect>
          </Border.BitmapEffect>
       */
   } 
```

怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-17T12:44:53.600

只需创建一个引发通知的属性。您可以实现 INotifyPropertyChanged 接口。更改代码中属性的值并将其与 xaml 绑定。

# php - MySql 选择除与特定值关联的数据之外的所有数据

> ID：13430125
> 
> 赞同：0
> 
> 时间：2012-11-17T11:28:20.713
> 
> 标签：php, mysql

我有下表，我想选择所有（通过 php 查询）但只选择与 course1 匹配的行，我尝试了以下但它不起作用。

```
$comments = array();
$result = mysql_query("select * from comments where course1='$post_id' order by id ASC"); 
```

什么是正确的查询？

```
+----+-----------+----------+-----+-------------------------+---------------+-------------
| id | post_id   | name     | url | email              | body               | dt         |
+----+-----------+----------+-----+-------------------------+---------------+-------------
|  1 | course2   | john     |     | john@john.com      | comments by john   | 2012-11-16 |
|  2 | course1   | wiki     |     | wiki@wiki.com      | comments by wiki   | 2012-11-16 |
|  3 | course2   | daniel   |     | daniel@gmail.com   | comments by daniel | 2012-11-16 |
|  4 | course2   | ram      |     | ram@ram.com        | comments by ram    | 2012-11-16 |
|  5 | course1   | velu     |     | velu@velu.com      | comments by velu   | 2012-11-16 |
+----+-----------+----------+-----+-------------------------+---------------+------------- 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-17T11:32:30.470

您需要引用要搜索的字段名称：

```
$result = mysql_query("select * from comments where post_id='$post_id' order by id ASC"); 
```

您的 $post_id 字符串变量包含值“course1”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-17T11:33:55.147

试试这个：

```
$result = mysql_query("select * from comments where post_id='$post_id' order by id ASC"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-17T11:37:40.643

试试这个：SELECT * FROM comments WHERE post_id='course1' order by id ASC

我认为您在 sql 中混淆了列名和搜索值

# android - 从 asmx Web 服务将 xml 写入 assets 文件夹

> ID：13430135
> 
> 赞同：1
> 
> 时间：2012-11-17T11:30:02.680
> 
> 标签：android, web-services

我有一个 asmx Web 服务，它与数据库交互以检索我的 android 应用程序的数据。有没有办法，我可以将 xml 文件中的所有数据从 Web 服务写入我的 android 应用程序的 assets 文件夹？

# webgl - 三.js阴影问题

> ID：13430137
> 
> 赞同：1
> 
> 时间：2012-11-17T11:30:11.747
> 
> 标签：webgl, three.js, shadow

我的 Three.js 脚本有问题。我有这个场景，

[http://jsfiddle.net/Rhtr2/7/](http://jsfiddle.net/Rhtr2/7/)

但是一旦我启用阴影（取消注释`spot.castShadow=true;`），它就会变成这样：

[http://prntscr.com/jx7id](http://prntscr.com/jx7id)

我不确定我的代码哪里有问题，但我认为这很明显。

顺便说一句：其他带影子工作的 Three.js 示例，所以这不是我的 gpu 的一般问题，也没有控制台输出。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-17T15:14:12.327

你的小提琴有很多错误。请参阅 three.js 示例，了解如何`renderer`正确地将 a 添加到 DOM。

此外，您需要进行试验，直到您了解旋转在 three.js 中的工作原理。

你需要正确设置你的影子`near`相机`far planes`。

这是一个更新的小提琴：http: [//jsfiddle.net/Rhtr2/58/](http://jsfiddle.net/Rhtr2/58/)

* * *

哎呀！小提琴版本 58！阅读 jsfiddle 常见问题解答。你不需要“更新”你的小提琴来运行它。

# google-maps-api-3 - Google map API v3 方向的自定义图标

> ID：13430147
> 
> 赞同：3
> 
> 时间：2012-11-17T11:31:59.510
> 
> 标签：google-maps-api-3

我知道如何更改标准谷歌地图 api v3 上的图标。有没有办法改变地图上的图标和方向？

```
<script type="text/javascript">
  var directionDisplay;
  var directionsService = new google.maps.DirectionsService();
  var map;

  function initialize(){
    directionsDisplay = new google.maps.DirectionsRenderer();
    var mapOptions={
      center: new google.maps.LatLng(-34.397, 150.644),
      zoom: 11,
      mapTypeId: google.maps.MapTypeId.ROADMAP
    };

    var map = new google.maps.Map(document.getElementById("map_canvas"),mapOptions);
      directionsDisplay.setMap(map);
      directionsDisplay.setPanel(document.getElementById("directionsPanel")
    );

    var marker = new google.maps.Marker({
      position: map.getCenter(),
      map: map,
      icon: 'marker/image.png',
      title: 'Click to zoom'
    });

    google.maps.event.addListener(marker, 'click', function(){
      map.setZoom(15);
      map.setCenter(marker.getPosition());
    });

    google.maps.event.addDomListener(window, 'load', initialize);
  }

  function calcRoute() {
    var start = document.getElementById("start").value;
    var end = '-34.397, 150.644';
    var request = {
        origin:start, 
        destination:end,
        travelMode: google.maps.DirectionsTravelMode.DRIVING
    };
    directionsService.route(request, function(response, status) {
      if (status == google.maps.DirectionsStatus.OK) {
        directionsDisplay.setDirections(response);
      }
    });
  }
</script> 
```

上面的代码显示带有我的自定义图标标记的地图，但是当我生成方向而不是在我的自定义标记顶部时，我看到另一个带有字母 B 的标准绿色制造商。

如何覆盖它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-17T15:46:50.680

您需要做的是使用[DirectionsRenderer](https://developers.google.com/maps/documentation/javascript/reference#DirectionsRendererOptions)的 suppressMarkers 选项，这将阻止它添加任何标记。

[带有自定义图标的示例](http://www.geocodezip.com/v3_directions_custom_iconsC.html)，根本不使用 DirectionsRenderer，它来自该选项可用之前。

# c# - 将 char 数据类型转换为 datetime 数据类型导致超出范围的 datetime 值

> ID：13430148
> 
> 赞同：0
> 
> 时间：2012-11-17T11:32:02.780
> 
> 标签：c#, wpf, sql-server-2005

我有一个 WPF 应用程序。`date`是我的表，它的两列是`employeename`( `varchar(10)`) 和`date`( `datetime`)

我的代码是：

```
Sqlconncetion con = new Sqlconnection("my database connection ");    
SqlCommand cmd = new SqlCommand("insert into date values('"+textBox1.Text+"','"+datePicker1.Text+"')", con);    
con.Open();               
int n = cmd.ExecuteNonQuery();                
if (n > 0)
{
    MessageBox.Show("insert");
} 
```

实际上，我的 WPF`datepicker`格式输入为`"dd/mm/yyyy`“并且 SQL Server 表接受日期格式`mm/dd/yyyy`。如何更改我的 SQL Server`datetime`数据类型日期格式？请通过 c# 中的代码给出解决方案。

我的任务是显示所有姓名和出生日期。我的情况是基本的，但在日期选择和按钮输入时，我得到了异常。我的代码是

```
SqlConnection con = new SqlConnection("my connection ");

SqlDataAdapter da = new SqlDataAdapter("select name,date from date where date between'"+ Convert.ToDateTime( datePicker2.SelectedDate)+"' and  '"+ Convert.ToDateTime( datePicker3.SelectedDate)+"'",con);

DataSet ds = new DataSet();

da.Fill(ds, "entry");

da.Dispose();

dataGrid1.DataContext = ds.Tables["entry"].DefaultView; 
```

请帮我解决代码错误并编写正确的代码。这是一个 WPF 应用程序。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-17T11:33:38.180

使用[SqlParameters](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlparameter.aspx)将您的值传递给数据库。它为您提供类型安全、性能和防止 SQL 注入。还使用`using`语句来保证数据库连接将被关闭：

```
var cmdText = "INSERT INTO date VALUES(@name, @date)";

using(var con = new SqlConnection(conString))
using(var cmd = new SqlCommand(cmdText, con)) {
     cmd.Parameters.Add("@name", textBox1.Text);
     cmd.Parameters.Add("@date", datePicker1.SelectedDate);
     con.Open();
     int n = cmd.ExecuteNonQuery();
     //...
} 
```

# php - fOpen + fWrite -a ，文件中的数据在一段时间后被擦除。

> ID：13430149
> 
> 赞同：1
> 
> 时间：2012-11-17T11:32:12.827
> 
> 标签：php, heroku, append, fopen, fwrite

我有一个将客户数据写入文件的脚本，在输入几个条目后，customers.txt 文件在 Heroku 服务器上托管时变为空白。这个问题的根源是什么？不用说我不是编程大师，非常欢迎所有帮助，谢谢。

```
$fname = $_POST['fname'];
$lname = $_POST['lname'];
$dob = $_POST['dob'];
$email = $_POST['email'];
$phone = $_POST['phone'];

$data = "$fname | $lname | $dob | $email | $phone"."\r\n ";

$fh = fopen("customers.txt", "a");

fwrite($fh, $data);

fclose($fh); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-17T14:48:24.863

除了 Heroku 上的文件系统之外，您还需要将数据存储在其他地方。cedar 堆栈有一个[临时文件系统](https://devcenter.heroku.com/articles/dynos#ephemeral-filesystem)，所以你不能期望你写在那里的数据会保留在那里。

# php - SQL 只获取一些行？

> ID：13430156
> 
> 赞同：-4
> 
> 时间：2012-11-17T11:32:52.357
> 
> 标签：php, mysql, sql

前段时间我和我一起工作过，`PHP, MySQL and SQL,`所以我需要一些帮助。在我的表中，我有 44 行，但我只想得到其中的 24 行。在我像下面的代码一样加载所有行之前，现在我需要一些帮助来修改它以仅加载 24 行。谢谢！

```
$query = "SELECT * FROM {$tableObject} {$sort1};";

$res = $mysqli->query($query);

$row_cnt = mysqli_num_rows($res);

while($row01 = $res->fetch_object()) {
// Some other code here
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-17T11:33:48.400

在您的查询中使用它：

```
LIMIT 24 
```

**LIMIT**是一个 MySQL 函数，它从查询结果中选择特定范围的结果。基本上有两种使用方式：

1.  通过简单地指定要获取的结果数，例如`LIMIT 24`; 或者
2.  通过以 的形式指定另一个范围`LIMIT X, Y`。`X`开头在哪里，`Y`是您要获取的行数，例如：`LIMIT 10,5`这将从行中选择 5 个结果`11`到`15`

在您的特定情况下，您可以简单地替换此行：

```
$query = "SELECT * FROM {$tableObject} {$sort1};"; 
```

为了：

```
$query = "SELECT * FROM {$tableObject} {$sort1} LIMIT 24;"; 
```

甚至：

```
$query = "SELECT * FROM {$tableObject} {$sort1} LIMIT 0,24;"; 
```

为了更好地了解如何使用限制，我建议您阅读[MySQL 手册中的此页面](http://dev.mysql.com/doc/refman/5.1/en/limit-optimization.html)

# ios - 从按钮而不是工具栏实现 Sharekit

> ID：13430157
> 
> 赞同：0
> 
> 时间：2012-11-17T11:32:54.143
> 
> 标签：ios, facebook, ios6, uiactionsheet, sharekit

我是 sharekit 和 ios 开发的新手。希望在从按钮而不是工具栏实现 sharekit 方面获得一些帮助..

例如，我分享一个链接：

```
- (IBAction) btnShareClicked :(id)sender;
{
    SHKItem *item = [SHKItem URL:webView.request.URL title:[webView pageTitle]];
    SHKActionSheet *actionSheet = [SHKActionSheet actionSheetForItem:item];
    [actionSheet showFromToolbar:self.navigationController.toolbar];
} 
```

如何更改此示例代码以包含按钮而不是工具栏..需要一些指导..对不起，如果这是一个愚蠢的问题...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-17T14:04:14.380

```
- (IBAction) btnShareClicked :(id)sender;
{
     NSString *text = @"Hello";

    SHKItem *item = [SHKItem text:text];
    SHKActionSheet *actionSheet = [SHKActionSheet actionSheetForItem:item];  
    [actionSheet showInView:self.view];
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-17T14:08:53.560

只需检查`UIActionSheet`文档...

例如

```
[actionSheet showInView:[sender view]; 
```

或者：

```
[actionSheet showFromRect:[[sender view] frame] inView:[[sender view] superview] animated:YES]; 
```

假设发件人是您的按钮，它应该是。

# algorithm - 动态任务调度面试街

> ID：13430160
> 
> 赞同：1
> 
> 时间：2012-11-17T11:33:28.027
> 
> 标签：algorithm, optimization, scheduled-tasks

**贪心算法**解决n个任务的**任务调度问题**。我在各种编码挑战中遇到过这种特殊的问题，它要求**动态**找出最大超调的最小值。其中之一如下所述：

 ******面试街题：**

您今天需要完成一长串任务。任务*i*由您必须完成的最后期限 (Di) 和完成任务所需的分钟数 (Mi) 指定。您无需一口气完成一项任务。您可以完成其中的一部分，切换到另一个任务，然后再切换回来。

您已经意识到实际上不可能在截止日期前完成所有任务，因此您决定完成它们，以便将任务完成时间超过其截止日期的最大量减至最少。

**我的方法**

现在考虑一个中间阶段，我们已经找到了*i-1 个*任务的解决方案，并将它们按排序顺序排列。我们还存储了*i-1*任务最大超调的任务索引，比如*maxLate*。在第 i 个任务到达后，我们检查是否 D[ *i* ] < D[ *maxlate* ] 那么新的 maxLate 将是第 i 个任务的旧 maxLate。*我对 D[ i* ] > D[ *maxlate* ]的情况感到困惑。这种情况需要线性扫描吗？还建议一个**好的数据结构**来更新新列表并使它们保持排序。谢谢你的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T15:41:42.670

首先，您需要证明给定一组任务`(m_i, d_i)`，最好的时间表是根据他们的截止日期完成工作，即最先出现的工作。

问题相当于：

```
for each job in original order:
    dynamically insert this job (m_i, d_i) into a sorted job_list
    query max{ (sum(m_k for all k <= n) - d_n) for all n in job_list } 
```

该算法在 O(N^2) 中运行，其中 N 是工作数量，这对于在面试街上被接受来说太慢了。但是，我们可以使用一些高级的数据结构，来加快`insert`和`query`操作。

我使用[延迟更新的分段树](http://p--np.blogspot.ro/2011/07/segment-tree.html)在 O(NlgN) 时间内解决了这个问题，这是我的代码

```
#include <iostream>
#include <vector>
#include <cstdio>
#include <cstring>
#include <string>
#include <algorithm>
using namespace std;

class SegTree
{
public:
    SegTree(int left, int right, const vector<int>& original_data)
    {
        this->left = left;
        this->right = right;
        this->lazy_flag = 0;
        left_tree = right_tree = NULL;
        if (left == right)
        {
            this->value = this->max_value = original_data[left];
        }
        else
        {
            mid = (left + right) / 2;
            left_tree = new SegTree(left, mid, original_data);
            right_tree = new SegTree(mid + 1, right, original_data);
            push_up();
        }
    }
    void modify(int left, int right, int m_value)
    {
        if (this->left == left && this->right == right)
        {
            leaf_modify(m_value);
        }
        else
        {
            push_down();
            if (left <= mid)
            {
                if (right >= mid + 1)
                {
                    left_tree->modify(left, mid, m_value);
                    right_tree->modify(mid + 1, right, m_value);
                }
                else
                {
                    left_tree->modify(left, right, m_value);
                }
            }
            else
            {
                right_tree->modify(left, right, m_value);
            }
            push_up();
        }
    }
    int query(int left, int right)
    {
        if (this->left == left && this->right == right)
        {
            return this->max_value;
        }
        else
        {
            push_down();
            if (left <= mid)
            {
                if (right >= mid + 1)
                {
                    int max_value_l = left_tree->query(left, mid);
                    int max_value_r = right_tree->query(mid + 1, right);
                    return max(max_value_l, max_value_r);
                }
                else
                {
                    return left_tree->query(left, right);
                }
            }
            else
            {
                return right_tree->query(left, right);
            }
        }
    }
private:
    int left, right, mid;
    SegTree *left_tree, *right_tree;

    int value, lazy_flag, max_value;

    void push_up()
    {
        this->max_value = max(this->left_tree->max_value, this->right_tree->max_value);
    }
    void push_down()
    {
        if (this->lazy_flag > 0)
        {
            left_tree->leaf_modify(this->lazy_flag);
            right_tree->leaf_modify(this->lazy_flag);
            this->lazy_flag = 0;
        }
    }
    void leaf_modify(int m_value)
    {
        this->lazy_flag += m_value;
        this->max_value += m_value;
    }
};

vector<int> vec_d, vec_m, vec_idx, vec_rank, vec_d_reorder;

int cmp(int idx_x, int idx_y)
{
    return vec_d[idx_x] < vec_d[idx_y];
}

int main()
{
    int T;
    scanf("%d", &T);
    for (int i = 0; i < T; i++)
    {
        int d, m;
        scanf("%d%d", &d, &m);
        vec_d.push_back(d);
        vec_m.push_back(m);
        vec_idx.push_back(i);
    }

    sort(vec_idx.begin(), vec_idx.end(), cmp);
    vec_rank.assign(T, 0);
    vec_d_reorder.assign(T, 0);
    for (int i = 0; i < T; i++)
    {
        vec_rank[ vec_idx[i] ] = i;
    }
    for (int i = 0; i < T; i++)
    {
        vec_d_reorder[i] = -vec_d[ vec_idx[i] ];
    }

//  for (int i = 0; i < T; i++)
//  {
//      printf("m:%d\td:%d\tidx:%d\trank:%d\t-d:%d\n", vec_m[i], vec_d[i], vec_idx[i], vec_rank[i], vec_d_reorder[i]);
//  }

    SegTree tree(0, T-1, vec_d_reorder);

    for (int i = 0; i < T; i++)
    {
        tree.modify(vec_rank[i], T-1, vec_m[i]);
        int ans = tree.query(0, T-1);
        printf("%d\n", max(0,ans));
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-01-22T22:06:38.853

```
class Schedule {

    int deadLine = 0;

    int taskCompletionTime = 0;

    int done = 0;

    Schedule(int deadline, int taskCompletionTime) {
        this.deadLine = deadline; 
        this.taskCompletionTime = taskCompletionTime;
    }
}

class TaskScheduler {

  public static void main(String args[]) {

    Scanner in = new Scanner(System.in);

    int n = in.nextInt();
    int max = 0;
    ArrayList<Schedule> sch = new ArrayList<Schedule>();
    for(int i = 0; i < n; i++) {
        int deadLine = in.nextInt();
        int taskCompletionTime = in.nextInt();
        Schedule s = new Schedule(deadLine, taskCompletionTime);
        int j = i-1;
        while(j >= 0 && sch.get(j).deadLine > s.deadLine) {
            Schedule s1 = sch.get(j);
            if(s1.deadLine <= s.deadLine) break;
            s1.done += s.taskCompletionTime;
            max = Math.max(max, s1.done - s1.deadLine);
            j--;
        }
        sch.add(j+1, s);
        if(j < 0)
            s.done = s.taskCompletionTime;
        else
            s.done = sch.get(j).done + s.taskCompletionTime;

        max = Math.max(max, s.done - s.deadLine);

        System.out.println(max);
     }
  }
} 
```****

# java - 防止 checkstyle 在特定的 Maven 子模块中运行

> ID：13430161
> 
> 赞同：53
> 
> 时间：2012-11-17T11:33:30.187
> 
> 标签：java, maven, checkstyle

我想在 pom 文件中定义一个 checkstyle 运行，并让它在*除*某些指定的子模块之外的所有子模块上运行。

换句话说，我需要某种`<excludes>`（存在但适用于文件名）但以模块为目标的类型。有人知道吗？

* * *

## 回答 #1

> 赞同：119
> 
> 时间：2012-12-13T10:57:51.143

如果您不想更改您的 pom.xml，您可以使用 -D 选项从命令行将跳过设置为 true。这在上面被提到为“在执行中覆盖了跳过参数”。这与 -D​​maven.test.skip=true 用法非常相似。

```
mvn site -Dcheckstyle.skip=true 
```

* * *

## 回答 #2

> 赞同：74
> 
> 时间：2012-11-17T20:58:30.763

将以下内容放入您希望禁用 checkstyle 的项目中：

```
<project>
  ...
  <properties>
    ...
    <checkstyle.skip>true</checkstyle.skip>
    ...
  </properties>
  ...
</project> 
```

Checkstyle 仍将运行，但将执行无操作...

那是除非你覆盖了[maven-checkstyle-plugin`skip`参数](http://maven.apache.org/plugins/maven-checkstyle-plugin/checkstyle-mojo.html#skip)的默认绑定，在这种情况下你可以在特定项目中使用以下实现相同的效果

```
<project>
  ...
  <build>
    ...
    <plugins>
      ...
      <plugin>
        <artifactId>maven-checkstyle-plugin</artifactId>
        <configuration>
          <skip>true</skip>
        </configuration>
      </plugin>
      ...
    </plugins>
    ...
  </build>
  ...
</project> 
```

当然，除非您在执行中覆盖了`skip`参数......但是如果您知道那是什么，您也知道解决方案并且不会问这个问题;-)

# sql - SQL QUERY 用于显示学生 1993 年出生的地点，11

> ID：13430168
> 
> 赞同：0
> 
> 时间：2012-11-17T11:34:02.153
> 
> 标签：sql

我有学校的任务

请显示他们在 1993 年第 11 个月出生的学生姓名

```
select 
    x.[5_name] 
from
    [5Student] x, [5Birthday] y 
where 
    YEAR(y.[5_date]) = '1993' 
    and MONTH(y.[5_date]) = '11' 
    and x.[5_nim] = y.[5_student] 
```

如果您有其他解决查询的方法，请在此处分享

*可能该代码对某人很重要

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-17T11:43:31.970

您当前的`WHERE`条款是无可争议的。重写为范围查询

```
WHERE y.[5_date] >= { d '1993-11-01' } AND  y.[5_date] < { d '1993-12-01' } 
```

表示可以使用索引。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-17T11:38:26.213

您不是在说您使用什么**数据库引擎**（SQL = 结构化查询语言 - 只是语言，而不是产品） - 但我建议*始终*使用新的 ANSI 标准`JOIN`语法（而不仅仅是列出逗号分隔的表列表使用）：

```
select 
    x.[5_name] 
from
    [5Student] x
inner join
    [5Birthday] y ON x.[5_nim] = y.[5_student]
where 
    YEAR(y.[5_date]) = '1993' 
    and MONTH(y.[5_date]) = '11' 
```

使您加入的内容更加清晰，并将`JOIN`条件移动到它所属的位置 - 到`JOIN`语句中（并且不会将`WHERE`条件与`JOIN`条件混淆）。

如今，几乎所有体面的数据库引擎都**应该支持这一点**。

# matlab - 如何获取数据集的其余部分

> ID：13430173
> 
> 赞同：1
> 
> 时间：2012-11-17T11:34:55.297
> 
> 标签：matlab

下面是一个从数据集中选择一组随机排列的例子，我如何用剩余的数据创建一个新的数据集。例如下面我选择 49402（大约 10%）并创建一个以此命名的数据集`UnseenTestdata`，我希望其余的进入一个名为`testdata`.

```
pointsToPick = 49402;  %# Numbers to pick
rVec = randperm(494021);   %# Random permutation of datapoint indices (N=494021 in this case)  

UnseenTestdata = fulldata(rVec(1:pointsToPick),:); %# Random sample 
```

Unseentestdata 减去 fulldata = 恰当命名为 testdata 的数据集的剩余部分。

fulldata 集的维度是 494021x6，我从 fulldata 中随机选择 49402x6。然后我需要从 fulldata 中减去 unseentestdata 剩下的内容。

Barnabas Szabolcs 添加了以下测试用例答案：

```
fulldata = [1 2; 3 4; 5 6; 7 8];
rVec = randperm(4);  
pointsToPick=2;
unseen = fulldata(rVec(1:pointsToPick),:); 
testdata = fulldata(rVec(pointsToPick:length(rVec)),:); 
```

但是这不起作用，我已经屏幕转储了结果：

![在此处输入图像描述](../Images/9e71cb2dbe425054cdab113c810104f3.png)

如果您在屏幕转储中注意到未见过的数据 = 3,4 和 7,8，但是如果您在 testdata 中注意到 7,8 仍然存在。

如果完整数据 =

```
1,2
3,4
5,6
7,8 
```

在这种情况下，我们选择两个随机行，看不见的行是：

```
row
3,4
7,8 
```

那么剩下的应该是：

```
1,2
5,6 
```

但是，如果您在示例测试 testdata 的屏幕转储中注意到该行：

```
7,8 
```

表明示例测试不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-17T11:49:26.687

如果我正确理解您的问题，解决方案是

```
testdata = fulldata(rVec((pointsToPick+1):length(rVec)),:); 
```

简单的测试用例：

```
fulldata = [1 2; 3 4; 5 6; 7 8;10 9];
rVec = randperm(4);  // gives me first time [4 2 3 1 5]
pointsToPick=2;
unseen = fulldata(rVec(1:pointsToPick),:); // [7 8; 3 4]
// length(rVec) is 5
testdata = fulldata(rVec((pointsToPick+1):length(rVec)),:); // [5 6; 1 2; 10 9] 
```

从某种意义上可以清楚地看到`fulldata`= `unseen`(setplus) `testdata`。请注意，我们需要“+1”，因为与 c++ 中的说法不同，数组是从一个向上索引的，所以最后一个索引`length`不是`length-1`.

您可以使用以下方法验证事情是否正确：

```
 isequal(sort([unseen; test]), sort(full_data)) // should be true 
```

# php - PHP 会话不保存/存储

> ID：13430175
> 
> 赞同：0
> 
> 时间：2012-11-17T11:35:04.100
> 
> 标签：php

对于一个项目，我正在创建一个 Web 应用程序，其中登录将是最重要的部分。不幸的是，我似乎无法让会话正常工作，所以登录根本不会持续。这是我在[测试/实验/调试页面上编写的一些简单代码。](http://alexandstein.com/Testing/)

这是测试页面的头部。

```
<? 
if(!isset($_SESSION)){
    session_start(); 
}
?>
<!DOCTYPE html>
... 
```

这是使用会话数据的代码。

```
$_SESSION[0] = $_SESSION[0] + 1;
echo($_SESSION[0]); 
```

它应该随着每次访问而增加，但它并没有这样做，就像登录系统一样。

`phpinfo()`如果有帮助，这是该功能的会话设置。

```
Session Support enabled
Registered save handlers    files user sqlite
Registered serializer handlers  php php_binary wddx

Directive   Local Value Master Value 
session.auto_start  Off Off
session.bug_compat_42   On  On
session.bug_compat_warn On  On
session.cache_expire    180 180
session.cache_limiter   nocache nocache
session.cookie_domain   no value    no value
session.cookie_httponly Off Off
session.cookie_lifetime 0   0
session.cookie_path /   /
session.cookie_secure   Off Off
session.entropy_file    no value    no value
session.entropy_length  0   0
session.gc_divisor  100 100
session.gc_maxlifetime  1440    1440
session.gc_probability  1   1
session.hash_bits_per_character 4   4
session.hash_function   0   0
session.name    PHPSESSID   PHPSESSID
session.referer_check   no value    no value
session.save_handler    files   files
session.save_path   /tmp    /tmp
session.serialize_handler   php php
session.use_cookies On  On
session.use_only_cookies    On  On
session.use_trans_sid   0   0 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-17T11:44:02.190

您不需要 !isset 来检查您的会话，只需调用 session_start(); 在处理会话变量的任何页面的顶部。

根级别的键必须是有效的标识符，因此 session[1] 不起作用，但 session['1'] 会。

[会话文档](http://php.net/manual/en/reserved.variables.session.php)中有一些有趣的限定词。

评论中还有一些更高级的示例：
如果您无法控制 register_globals 设置：(isset($_REQUEST['_SESSION']))。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-17T11:47:50.467

取自[PHP session_start 文档](http://php.net/manual/en/function.session-start.php)：

> session_start() 根据通过 GET 或 POST 请求或通过 cookie 传递的会话标识符创建会话或恢复当前会话。

因此，要使用基于 cookie 的会话，您应该始终`session_start()`在每个脚本的开头调用以恢复当前会话。不要检查`$_SESSION`，PHP 不会启动新会话，而是恢复当前会话。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-17T11:50:20.840

我像这样设置我的会话-（它是安全的并且对我有用）

在登录页面上：

```
$_SESSION['fingerprint'] = md5($_SERVER['HTTP_USER_AGENT'] . PHRASE . $_SERVER['REMOTE_ADDR']); 
```

// 或者只是`$_SESSION['fingerprint'] = $login['id']`// 将 ID 存储为会话（不安全）

（配置页面上定义的短语）

然后在整个站点其余部分的标题上：

```
session_start();
if ($_SESSION['fingerprint'] != md5($_SERVER['HTTP_USER_AGENT'] . PHRASE . $_SERVER['REMOTE_ADDR'])) {       
    session_destroy();
    header('Location: http://website login page/');
    exit();     
} 
```

然后使用你的`session['fingerprint']`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-17T12:15:47.253

您能否详细说明您的问题。如果您在多个页面上不存在会话时遇到问题，那么您可能不会在每个页面上调用会话。据我所知，登录后工作的每个页面都必须单独调用会话

# android - 意图画廊图像android位置和arraylist

> ID：13430178
> 
> 赞同：0
> 
> 时间：2012-11-17T11:35:38.940
> 
> 标签：android, android-intent, android-gallery

我正在使用意图将图像库中的选定图像发送到 NextImage.java 活动。我想将图像的选定位置和图像数组发送到下一个活动。我对意图感到困惑。

```
String[]imageUrls= new String[PostDetails.size()];

for (int index=0;index<imageUrls.length;index++){

       imageUrls[index]=PostDetails.get(index).getImag();
}

gallery = (Gallery) findViewById(R.id.img_gallery);

gallery.setAdapter(new ImagePagerAdapter(imageUrls));

gallery.setOnItemClickListener(new OnItemClickListener() {

      public void onItemClick(AdapterView<?> gallery, View view, int position, long id) {

          Intent galleryIntent  = new Intent(ImageGalleryActivity.this, MyNextImage.class);

          galleryIntent.putExtra(imageUrls, position);

          startActivity(galleryIntent);

      } 
```

在下一个图像类中：

```
private ViewPager pager;

String[] imageUrls;

private DisplayImageOptions options;

String images;

public void onCreate(Bundle savedInstanceState) {

    super.onCreate(savedInstanceState);

    setContentView(R.layout.view_flipper_item);

    Bundle bundle = getIntent().getExtras();

    String[] imageUrls = bundle.getStringArray(images);

    int pagerPosition = bundle.getInt(position, 0); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-17T12:49:25.503

你把额外的东西如下：

```
galleryIntent.putExtra("IMAGE_URLS", imageUrls);
galleryIntent.putExtra("POSITION", position); 
```

并按以下方式获取额外内容：

```
String[] imageUrls = bundle.getStringArray("IMAGE_URLS");
int pagerPosition = bundle.getInt("POSITION", 0); 
```

# objective-c - AppDelegate、rootViewController 和 presentViewController

> ID：13430179
> 
> 赞同：41
> 
> 时间：2012-11-17T11:35:48.690
> 
> 标签：objective-c, xcode, facebook, ios6, appdelegate

我正在做 Facebook 集成教程，如果用户有当前状态的有效令牌，我想显示我的 MainViewViewController，否则我想显示 LoginViewController。

MainViewAppDelegate.m

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    if (FBSession.activeSession.state == FBSessionStateCreatedTokenLoaded) {
        // To-do, show logged in view
    } else {
        // No, display the login page.
        [self showLoginView];
    }
    return YES;
}
- (void)showLoginView
{
    UIStoryboard *mainstoryboard = [UIStoryboard storyboardWithName:@"MainStoryboard"          bundle:nil];
    LoginViewController* loginViewController = [mainstoryboard      instantiateViewControllerWithIdentifier:@"LoginViewController"];
    [self.window.rootViewController presentViewController:loginViewController animated:YES completion:NULL];
} 
```

控制台错误：

```
Warning: Attempt to present <LoginViewController: 0xb492fd0> on <MainViewViewController: 0xb1bd820> whose view is not in the window hierarchy! 
```

我不想使用 NavigationController。

* * *

## 回答 #1

> 赞同：137
> 
> 时间：2012-12-03T16:50:02.743

我遇到过同样的问题。根据[这个问题](https://stackoverflow.com/questions/7067443/objective-c-how-to-present-modal-view-controller-from-appdelegate)的答案，我`[self.window makeKeyAndVisible]`之前添加了`presentViewController:animated:completion:`，并且为我修复了它。

在您的情况下， showLoginView 变为

```
- (void)showLoginView
{
    UIStoryboard *storyboard = [UIStoryboard storyboardWithName:@"MainStoryboard" bundle:nil];
    LoginViewController *loginViewController = [storyboard instantiateViewControllerWithIdentifier:@"LoginViewController"];
    [self.window makeKeyAndVisible];
    [self.window.rootViewController presentViewController:loginViewController animated:YES completion:NULL];
} 
```

* * *

## 回答 #2

> 赞同：38
> 
> 时间：2014-01-23T00:49:26.883

有时从 window.rootViewController 呈现模态视图控制器可能会产生相同的警告并且没有效果。这种视图控制器层次结构的示例：

1.  [ **MYUITableViewController** ]（由 MYUIViewController 模态呈现）
2.  [ **MYUIViewController** ]（下面 UINavigationController 的 rootViewController）
3.  [ **UINavigationController** ] (根)

现在打电话

```
[[UIApplication sharedApplication].keyWindow.rootViewController presentViewController:[UIViewController new] animated:YES completion:nil]; 
```

将导致这个确切的警告（在 iOS6 和 7 Sim 上测试）

解决方案：而不是使用 rootViewController - 使用它提供的顶部：

```
 UIViewController *topRootViewController = [UIApplication sharedApplication].keyWindow.rootViewController;
    while (topRootViewController.presentedViewController) 
    {
        topRootViewController = topRootViewController.presentedViewController;
    }

    [topRootViewController presentViewController:yourController animated:YES completion:nil]; 
```

*   *有时 keyWindow 可能已被替换为 nil rootViewController 的窗口（在 iPhone 上显示 UIAlertViews、UIActionSheets 等），在这种情况下，您应该使用 UIView 的 window 属性。*

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2017-03-03T00:07:32.920

**在Swift 3中，** [Stepan Generalov 的回答](https://stackoverflow.com/a/21297223/3338129)对我来说是正确的！！！
当然使用新的语法等，所以我会在这里复制它：

```
let sb = UIStoryboard(name: "Main", bundle: nil)
let vc = sb.instantiateViewController(withIdentifier: "MainApp") as! ViewController

var topRootViewController: UIViewController = (UIApplication.shared.keyWindow?.rootViewController)!
while((topRootViewController.presentedViewController) != nil){
    topRootViewController = topRootViewController.presentedViewController!
}
topRootViewController.present(vc, animated: true, completion: nil) 
```

在这种情况下，“MainApp”是我的主视图控制器的标识符。

我知道还有其他方法，但是如果您需要使用不同的 URL 方案来打开应用程序的不同部分，则必须在 AppDelegate 中处理它，所以这是完美的，因为在

```
func application(_ app: UIApplication, open url: URL, options: [UIApplicationOpenURLOptionsKey : Any] = [:]) -> Bool {} 
```

方法，您可以检查什么`url`是字符串，然后决定是否执行上述编写的代码，或者可能是具有不同标识符的其他视图控制器的类似代码（`withIdentifier`）

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-09-15T11:42:35.250

在 Swift 3 中：-

```
let storyboard = UIStoryboard(name: "Login", bundle: nil)
let viewController = storyboard.instantiateViewController(withIdentifier: "LoginViewController")
window?.makeKeyAndVisible()
window?.rootViewController?.present(viewController, animated: true, completion: nil) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-04-05T08:42:50.913

以防万一，当您不使用情节提要时。首先，您需要创建 YourViewController。转到文件 -> 新建 -> 文件...（或快捷方式 - 命令 + N） [![在此处输入图像描述](../Images/7d488d4b8c3487cbd4e3e0fd11208d9e.png)](https://i.stack.imgur.com/Kni7N.png)

之后，选择 Cocoa Touch Class。单击下一步，或输入 [![在此处输入图像描述](../Images/564698321aafb22b67b8efb9da858eb3.png)](https://i.stack.imgur.com/sNrpC.png)

然后为您的 viewController 输入名称，然后单击 Next [![在此处输入图像描述](../Images/dc743caaea526d40c68246408c6d4764.png)](https://i.stack.imgur.com/IBf1c.png)

```
#import "AppDelegate.h"
#import "YourViewController.h"

@interface AppDelegate ()

@end

@implementaion AppDelegate

- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions {

// Init window
self.window = [[UIWindow alloc] initWithFrame:UIScreen.mainScreen.bounds];
[self.window makeKeyAndVisible];

// Init YourViewController
YourViewController *viewController = [[YourViewController alloc] init];

// Init YourNavigationController
UINavigationController *navigationContoller = [[UINavigationController alloc] initWithRootViewController: viewController];

// Set rootViewController
self.window.rootViewController = navigationContoller;

return YES;

}

@end 
```

Swift 3/4 示例

```
import UIKit

@UIApplicationMain

class AppDelegate: UIResponder, UIApplicationDelegate {

var window: UIWindow?

func application(_ application: UIApplication, didFinishLaunchingWithOptions launchOptions: [UIApplicationLaunchOptionsKey: Any]?) -> Bool {

//1-st step
window = UIWindow(frame: UIScreen.main.bounds)
window?.makeKeyAndVisible()

//2-nd - create a window root controller, and create a layout
let layout = UICollectionViewFlowLayout()
window?.rootViewController = UINavigationController(rootViewController: HomeController(collectionViewLayout: layout))

return true 
```

}

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-12-23T16:23:43.993

您可以在 Objective-C 中像这样从 root 启动一个新的 viewController

```
UIViewController *presenter = ((AppDelegate *)[[UIApplication sharedApplication] delegate]).window.rootViewController;

[presenter presentViewController:yourViewController animated:YES completion:nil]; 
```

不要忘记添加这个：

```
#import "AppDelegate.h" 
```

# php - codeigniter 缓存驱动程序函数 clean() 不起作用

> ID：13430184
> 
> 赞同：0
> 
> 时间：2012-11-17T11:36:36.130
> 
> 标签：php, codeigniter

我在codeigniter中使用基于文件的缓存它成功地设置了缓存，但它无法清理它。

**代码**

```
<?php if ( ! defined('BASEPATH')) exit('No direct script access allowed');

class Tm extends CI_Controller {

public function index(){

    $this->load->driver('cache');

    if ($foo = $this->cache->file->get('foo2'))
        echo $foo.'<br />';
    else
        {
        echo 'Saving to the cache!<br />';
        $foo = 'foobarbaz! :D';
        $this->cache->file->save('foo2', $foo, 60);
        }
    if($this->cache->clean())
        echo "clearing cache ";
    else
        echo "Error clearing cache ";
    }

} 
```

第一个输出：

> 保存到缓存！
> 
> 清除缓存

当我刷新它

> 胡说八道！:D
> 
> 清除缓存

看起来函数在失败时也`$this->cache->clean()`总是返回**true**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T14:45:34.977

在编辑我自己的最后一条评论时，我意识到我犯了和你一样的错误——`->file`在`clear()`通话中失踪了。

Cache 类的默认适配器是 'dummy' 并且您没有将新适配器传递给初始化程序，因此调用`$this->cache->clear()`会尝试调用`$this->cache->dummy->clear()`而不是`$this->cache->file->clear()`.

`$this->cache->file->clear()`加载库时，您必须显式调用或执行此操作：

```
$this->load->library('cache', array('adapter' => 'file')); 
```

编辑：

`CI_Cache_file`如果它不能删除任何或所有带有缓存路径的文件，它仍然会返回 TRUE。它只是调用`delete_files()`文件助手，它不检查`unlink()`. 您无法解决这个问题，因为没有数据库中的文件删除事务。

# javascript - 调用外部 javascript 文件

> ID：13430185
> 
> 赞同：-1
> 
> 时间：2012-11-17T11:36:38.970
> 
> 标签：javascript

以下是否应在消息框中显示“测试”？如果不是，我应该做哪些改变？

```
<html>
<base href="http://www.google.com"></base>
<body>
<script language="JavaScript" type="text/javascript" src="test.js"></script>
</body>
</html> 
```

test.js 包含：

```
alert("Test"); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-17T11:44:58.170

是的。请参阅此处，我已将其插入到 jsFiddle 示例中。下次尝试只是这样做而不是问问题。[您可以在此处](http://jsfiddle.net/4rZCr/)查看示例

```
alert("Test"); 
```

是执行消息框的命令！

# r - 如何在 reshape2 中使用 dcast 获得累积/累积的逐行总和

> ID：13430186
> 
> 赞同：-1
> 
> 时间：2012-11-17T11:36:41.350
> 
> 标签：r, reshape2

在 RI 聚合数据（总和）中使用 reshape2 库中的 dcast

```
library('reshape2')

DF <- data.frame(Cohort=rep("", 9), Weeks=rep("", 9), myvalue=rep(0, 9), stringsAsFactors=FALSE )
DF[1, ] <- c("2012_30","0",0.02)
DF[2, ] <- c("2012_30","1",0.01)
DF[3, ] <- c("2012_30","2",0.1)
DF[4, ] <- c("2012_31","0",0.08)
DF[5, ] <- c("2012_31","1",0.0)
DF[6, ] <- c("2012_31","2",0.3)
DF[7, ] <- c("2012_32","0",0.26)
DF[8, ] <- c("2012_32","1",0.01)
DF[9, ] <- c("2012_32","2",0.01)

dcast(DF, Cohort ~ Weeks, value = myvalue, fill='') 
```

这产生

```
Cohort   0    1    2      
2012_30  0.02 0.01 0.10
2012_31  0.08 0.00 0.30
2012_32  0.26 0.01 0.01
... 
```

我希望能够获得这样的累积值：

```
Cohort   0    1    2      
2012_30  0.02 0.03 0.13
2012_31  0.08 0.00 0.38
2012_32  0.26 0.27 0.28
... 
```

[我试图在 reshape2 和原始 reshape 论文](http://www.jstatsoft.org/v21/i12/paper)的 dcast 文档中找到 fun.aggregate 的示例

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-17T13:12:09.693

尝试`ddply`作为临时步骤：

```
DF$myvalue <- as.numeric( DF$myvalue )
library( plyr )
DF <- ddply( DF, .(Cohort), transform, CUMSUM = cumsum( myvalue ) )
DF <- dcast( DF, Cohort ~ Weeks, value = CUMSUM, fill='' )
DF
   Cohort    0    1    2
1 2012_30 0.02 0.03 0.13
2 2012_31 0.08 0.08 0.38
3 2012_32 0.26 0.27 0.28 
```

# c++ - 在递归函数中释放内存时堆损坏

> ID：13430189
> 
> 赞同：0
> 
> 时间：2012-11-17T11:37:03.547
> 
> 标签：c++, pointers, heap-corruption

我正在实施一种算法来选择数组的第 K 个最小元素。到目前为止，当我试图释放堆内存时，我收到了这个错误：crt 检测到应用程序在堆缓冲区结束后写入内存......

```
int SEQUENTIAL_SELECT(int *S , int k , int n)
{
    if(n<=Q) // sort S and return the kth element directly
    {
        qsort(S,n,sizeof(int),compare);
        return S[k];
    }
    // subdivide S into n/Q subsequences of Q elements each
    int countSets = ceil((float)n/(float)Q);

    //sort each subsequnce and determine its median
    int *medians = new int[countSets];
    for(int i=0;i<countSets;i++)
    {
        if(i==countSets-1) 
        {
            int size = Q - (n%Q);
            qsort(&S[Q*i],size,sizeof(int),compare);
            medians[i] = S[i*Q+size/2];
            continue;
        }
        qsort(&S[Q*i],Q,sizeof(int),compare);
        medians[i] = S[i*Q+Q/2]; 
    }

    // call SEQUENTIAL_SELECT recursively to find median of medians 
    int m = SEQUENTIAL_SELECT(medians,countSets/2,countSets);
    delete[] medians;
    int size = (3*n)/4;

    int* s1 = new int[size]; // contains values less than m
    int* s3 = new int[size]; // contains values graten than m

    for(int i=0;i<size;i++)
    {
        s1[i] = INT_MAX;
        s3[i] = INT_MAX;
    }
    int i1=0;
    int i2=0;
    int i3=0;
    for(int i=0;i<n;i++)
    {
        if(S[i]>m)
            s3[i3++] = S[i];
        else if(S[i]<m)
            s1[i1++] = S[i];
        else
            i2++; // count number of values equal to m
    }

    if( i1>=k )
        m = SEQUENTIAL_SELECT(s1,k,i1);
    else if( i1+i2+i3 >= k)
        m = SEQUENTIAL_SELECT(s3,k-i1-i2,i3);

    delete[] s3;
    delete[] s1;

    return m;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-17T15:20:01.843

@Dcoder 肯定是正确的那`Q - n%q`是不正确的。应该是`n%Q`。另外，计算`size = (3*n)/4`不可靠；在给定向量的情况下尝试`n = 6`（假设，似乎可以肯定，`Q`实际上是 5）`[1, 2, 3, 4, 5, 0]`。

您可以通过简单地检查每个数组下标分配的索引值来避免让很多人关注您的代码（尽管这不会捕获 内部的分配`qsort`，但下面会详细介绍）。

您肯定已经想到您正在使用大量内存来执行一个简单的操作，而这实际上可以就地完成。通常避免进行就地操作的原因是您需要保留原始向量，但是您正在计算`qsort`就地排序的中位数，因此原始向量已经被修改。如果这是可以接受的，那么没有理由不就地执行其余的中位数算法。[1]

顺便说一句，虽然我当然不是害怕浮点计算的人之一，但完全没有理由为`countSets = ceil(float(n)/float(Q))`. `(n + Q - 1)/Q`会工作得很好。这个成语也可以有用地用于计算`size`，尽管我完全不确定你`3n/4`从哪里得到计算。

* * *

[注 1] 提示：不是连续分组，而是将向量分成五个区域，并找到每个区域的第 i^个元素的中值。找到后，将其与第一个区域的第 i^个元素交换；完成后，您的第一个区域（向量的前五分之一）包含中位数，您可以在该子向量上递归。这意味着实际上将中值代码写成一系列比较，这很乏味，但比调用`qsort`. 这也避免了我上面提到的退化情况，其中中位数计算错误地返回向量中的最小元素。

# android - bonjour 嵌入式系统

> ID：13430200
> 
> 赞同：1
> 
> 时间：2012-11-17T11:38:26.393
> 
> 标签：android, bonjour, mdns

我已按照安装文件中提供的步骤为嵌入式系统初始化 bonjour。首先，我为我的嵌入式系统生成了 bonjour 源代码的共享 ib，然后我通过调用 mDNS_Init api 对其进行了初始化。

由于我只需要在客户端浏览，我按照 dns_sd.h 调用了浏览功能，但出现以下错误。

mDNS_StartBrowse：mDNSPlatformRawTime 倒退了 1669225997 个滴答；将校正因子设置为 1669225997

11-17 00:28:08.481: D/bonjour(1280): mDNS_StartBrowse: mDNS_Unlock: 错误！m->timenow 区域为零

11-17 00:28:08.481: D/bonjour(1280): DNSServiceBrowse("_appl._tcp.", "local.") 失败: mDNS_StartBrowse (-65546)

11-17 00:28:08.490: I/System.out(1280): DNSService 调用失败 -65546

11-17 00:32:24.720：E/ThrottleService(161)：onPollAlarm 期间出现问题：java.lang.IllegalStateException：解析统计数据问题：

我在苹果论坛上发帖，但我没有收到任何关于这个问题的帮助..

# php - 推进模式反向错误：找不到驱动程序

> ID：13430201
> 
> 赞同：2
> 
> 时间：2012-11-17T11:38:31.460
> 
> 标签：php, pdo, propel

刚开始使用 php 和推进。

我正在使用统一服务器（wamp 服务器）并在 mysql 中有 db。

运行“propel-gen test reverse”时出现以下错误

```
propel > reverse:

[echo] +-----------------------------------------------+
[echo] | |
[echo] | Generating XML from PDO connection ! |
[echo] | |
[echo] +-----------------------------------------------+
[propel-schema-reverse] There was an error building XML from metadata: could not find driver 
```

建造完成

甚至错误也没有那么详细。

这是我的 build.properties

```
propel.home = .

propel.project = test

propel.targetPackage = lib.model

propel.packageObjectModel = true

propel.database = mysql

propel.database.driver = mysql

propel.database.url = mysql:host=localhost;dbname=db_test

propel.database.user = myuser

propel.database.password = mypwd 
```

请告诉我如何解决此问题并查看错误描述。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-08T14:15:11.560

您应该启用下面的添加行到 php-cli.ini 来解决这个问题

```
extension=php_pdo_mysql.dll 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-09-27T09:32:13.823

您必须更正 url 或 dns。例如，在我的 database.yml 中（我在 Symfony 下使用 Propel）你必须这样写：

```
all:
  propel:
    class: sfPropelDatabase
    param:
      classname: PropelPDO
      **dsn: 'mysql:host=localhost;dbname=sfjob'**
      username: root
      password: miyoko
      encoding: utf8
      persistent: true
      pooling: true 
```

重要的是 url: 应该是**mysql**而不是**msql**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-17T11:49:57.207

嗯 换个试试

```
propel.data.driver = mysql 
```

至

```
propel.data.driver = mysqli 
```

如果它仍然不起作用，那么 WAMP 似乎没有附带 php PDO 驱动程序。不知道我不使用 WAMP，但替代方案可能是[XAMP](http://www.apachefriends.org/en/xampp.html)

# jquery - jQuery - onClick 没有被激活

> ID：13430202
> 
> 赞同：2
> 
> 时间：2012-11-17T11:38:32.120
> 
> 标签：jquery

当我单击登录链接时，我试图激活警报，令人惊讶的是没有任何反应。我需要一些帮助。

我想在单击登录链接时弹出警报，但令人惊讶的是没有任何反应。谢谢，米克

```
<!DOCTYPE html>
<html>
<head>
<title>Facebook Client-side Authentication Example</title>
<script src="jquery.js" type="text/javascript"></script>

</head>
<body>

<div id="fb-root"></div>
<script type="text/javascript">
    // want Alert to popup when I click on auth-loginlink
$("#auth-loginlink").on("click",function () {
  alert("hi hello");
});
// ultimately I would like this to be binded with login and logout link
$("#auth-logoutlink").on("click", bindLogout);

function bindLogin(event){
alert("hello");
//FB.login();
};

function bindLogout(event){
alert("Out !!!");
//FB.logout();
};      

</script>
<h1>Facebook Client-side Authentication Example</h1>
    <div id="auth-status">
    <div id="auth-loggedout">
        <a href="#" id="auth-loginlink">Login</a>
    </div>
    <div id="auth-loggedin" style="display:none">
        Hi, <span id="auth-displayname"></span>  
        (<a href="#" id="auth-logoutlink">logout</a>)
    </div>
    </div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-17T11:44:01.993

您的代码在页面中加载元素之前执行。

发生这种情况是因为您的脚本位于 HTML 中的元素之上。

您将需要将脚本移动到页面底部，或者在 DOM 准备好后以更健壮的方式调用它。

jQuery为此提供了一种方法。

```
$(document).ready(function(){
 // your code in here will be called after the DOM is ready
}); 
```

或简短的版本

```
$(function(){
     // your code in here will be called after the DOM is ready
}); 
```

[http://api.jquery.com/ready/](http://api.jquery.com/ready/)上的文档

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-17T11:40:45.243

你必须使用：

```
$(function() {
  //Your code here
}) 
```

因为然后代码在页面加载后执行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-17T11:41:29.340

JQuery 中的所有内容都需要在里面

```
$(document).ready(function() {
}); 
```

除了函数定义。否则，您会尝试将处理程序注册到尚不存在的东西。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-17T11:56:43.007

问题是您的函数`<script>`未绑定到标签。确保在文档准备好时耦合了一个 JQuery 函数。使用此构造：

```
 $(document).ready(function(){
//Add your functions here. 
//Use the JQuery-Factory-function to construct JQuery-Objects, encapsulating the tag:

$(SELECTOR).click(YOURFUNCTION);

 }); 
```

更强大的方法是使用您的“JQuery-Add-On-Code”创建一个新的 JS 文件：

```
(function($){
$(document).ready(function(){

//Your own JQuery-Code
});
})(jQuery); 
```

# r - 使用另一个变量的汇总计数获取唯一值组合

> ID：13430203
> 
> 赞同：2
> 
> 时间：2012-11-17T11:38:46.937
> 
> 标签：r, dataframe, plyr, summary

我有一个看起来像这样的数据框：

```
pred1 pred2 pred3 exp
a     b     c     0
a     d     c     0
a     b     c     1 
```

我想做的是首先获取pred1-3的所有唯一组合，将它们写入一个附加表，为每个组合的频率添加一列，并添加另一列给出exp值1的比例（每个组合只能是 0 或 1)。像这样的东西：

```
pred1 pred2 pred3 freq exp_prop
a     b     c     2    0.5
a     d     c     1    0 
```

使用 plyr，前三个步骤变得非常简单：

```
ddply(df, .(pred1, pred2, pred3), summarise, freq=length(exp)) 
```

或更短

```
count(df[,c(pred1, pred2, pred3)]) 
```

但我只是不知道如何获得 exp 的比例。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-17T13:13:29.040

你快完成了。只需添加`exp_prop = mean(exp)`到`ddply`命令：

```
ddply(df, .(pred1, pred2, pred3), summarise,
      freq = length(exp), exp_prop = mean(exp))

  pred1 pred2 pred3 freq exp_prop
1     a     b     c    2      0.5
2     a     d     c    1      0.0 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-17T11:53:36.777

```
# read in your data
x <- 
read.table(text="pred1 pred2 pred3 exp
a     b     c     0
a     d     c     0
a     b     c     1" , h = T)

library(sqldf)
sqldf( "select pred1, pred2, pred3, count(*) as numtimes, avg( exp ) as prop from x group by pred1, pred2, pred3" )

###### alternative:

# write all the column names according to some pattern
cols <- paste0("pred" , 1:3 , collapse = "," )

# save your data frame to another object
y <-
    sqldf( 
        paste( 
            "select" , 
            cols  , 
            " , count(*) as numtimes, avg( exp ) as prop from x group by" , 
            cols 
        ) 
    )

# print to screen
y 
```

# r - 在 aov() 函数中使用 + 和 *

> ID：13430205
> 
> 赞同：1
> 
> 时间：2012-11-17T11:39:14.930
> 
> 标签：r, stat, anova

我对 + 和 * 之间的区别有点困惑。

我想对此数据进行 ANOVA 测试，以查看性能是否受该方法的影响，其中测试广告在 4 个会话期间重复。

我试过了：

```
a = aov(perf~(method*test*sess))
summary(a)
                 Df Sum Sq Mean Sq F value  Pr(>F)   
method            2  894.0   447.0   5.794 0.00885 **
test              3  109.2    36.4   0.472 0.70466   
sess              1    9.2     9.2   0.119 0.73279   
method:test       6  425.5    70.9   0.919 0.49851   
method:sess       2  745.1   372.6   4.829 0.01727 * 
test:sess         3   98.2    32.7   0.425 0.73718   
method:test:sess  6  409.2    68.2   0.884 0.52162   
Residuals        24 1851.5    77.1                   
---
Signif. codes:  0 ‘***’ 0.001 ‘**’ 0.01 ‘*’ 0.05 ‘.’ 0.1 ‘ ’ 1 
```

我可以看到一些意义，`method:sess`但我不知道这是否解释了 4 个会话期间的重复读数？另外，如果我想查看会话之间是否有任何显着差异，在计算 aov 时是否需要在 sess 之前添加“+”？

数据：

```
method  perf    test    sess
m1  39  a   1
m2  49  a   1
m3  40  a   1
m1  38  a   4
m2  32  a   4
m3  51  a   4
m1  39  a   2
m2  42  a   2
m3  45  a   2
m1  43  a   3
m2  54  a   3
m3  55  a   3
m1  26  b   1
m2  47  b   1
m3  55  b   1
m1  46  b   4
m2  48  b   4
m3  42  b   4
m1  37  b   2
m2  42  b   2
m3  42  b   2
m1  35  b   3
m2  30  b   3
m3  66  b   3
m1  40  c   1
m2  60  c   1
m3  37  c   1
m1  37  c   4
m2  32  c   4
m3  50  c   4
m1  50  c   2
m2  49  c   2
m3  55  c   2
m1  48  c   3
m2  29  c   3
m3  60  c   3
m1  30  d   1
m2  66  d   1
m3  36  d   1
m1  39  d   4
m2  49  d   4
m3  39  d   4
m1  26  d   2
m2  45  d   2
m3  48  d   2
m1  33  d   3
m2  33  d   3
m3  53  d   3 
```

# iphone - 在 iOS 中将事件添加到生日日历

> ID：13430206
> 
> 赞同：0
> 
> 时间：2012-11-17T11:39:17.187
> 
> 标签：iphone, ios, calendar, add

我写了这段代码，但它不起作用，你能帮我吗？我坚持了最后2个小时。

```
- (IBAction)addBirthday:(id)sender {

    NSString *name = self.textField.text;
    NSDate *date = [self.datePicker date];

    EKEventStore *eventStore = [[EKEventStore alloc] init];
    [eventStore calendarsForEntityType:EKEntityTypeEvent];

    EKEvent *event  = [EKEvent eventWithEventStore:eventStore];
    event.title = [NSString stringWithFormat:@"%@’s Birthday", name];

    event.startDate = date;
    event.endDate   = date;

    NSArray *calendars = [eventStore
                          calendarsForEntityType:EKEntityTypeEvent];

    NSLog(@"ARRAY: %@", [calendars objectAtIndex:0]);

    [event setCalendar: [calendars objectAtIndex:0]];
    NSError *err;
    [eventStore saveEvent:event span:EKSpanThisEvent error:&err];
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-17T12:13:15.617

生日日历可能是只读的

# c# - 将字节插入文件中间（在 Windows 文件系统中）而不读取整个文件（使用文件分配表）？

> ID：13430210
> 
> 赞同：30
> 
> 时间：2012-11-17T11:40:19.710
> 
> 标签：c#, windows, file, winapi, filesystems

我需要一种将一些文件簇插入文件中间以插入一些数据的方法。

通常情况下，我会读取整个文件并再次将其写回更改，但文件大小为数 GB，读取文件并再次将其写回需要 30 分钟。

集群大小不会打扰我；我基本上可以在我插入的集群的末尾写出零，它仍然可以在这种文件格式下工作。

如何使用 Windows 文件 API（或其他机制）修改文件的文件分配表，在文件中间的指定点插入一个或多个未使用的集群？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2013-03-14T01:03:32.030

[编辑：]

废话 - 我要说“这不可行，至少不能通过 MFT 修改，没有很多痛苦”；首先，NTFS MFT 结构本身并不是 100%“开放”的，所以我开始深入研究逆向工程领域，它具有我没有心情处理的法律影响。此外，在 .NET 中执行此操作是一个非常繁琐的映射和编组结构的过程，基于大量的猜测（并且不要让我开始了解大多数 MFT 结构都以奇怪的方式压缩的事实）。短篇小说，虽然我确实学到了很多关于 NTFS 如何“工作”的知识，但我离这个问题的解决方案还差得远。

[/编辑]

呃……太多的编组废话……

这让我觉得“有趣”，因此我不得不在这个问题上四处寻找......它仍然是一个“正在进行的答案”，但想发布我所需要帮助其他人想出的东西。:)

另外，我有一个粗略的感觉，这在 FAT32 上会更容易，但考虑到我只有 NTFS 可以使用......

所以 -**大量**的 pinvoking 和编组，所以让我们从那里开始并向后工作：

有人可能会猜到，标准的 .NET File/IO api 在这里对您没有多大帮助 - 我们需要*设备级*访问：

```
[DllImport("kernel32.dll", SetLastError = true, CharSet = CharSet.Auto)]
static extern SafeFileHandle CreateFile(
    string lpFileName,
    [MarshalAs(UnmanagedType.U4)] FileAccess dwDesiredAccess,
    [MarshalAs(UnmanagedType.U4)] FileShare dwShareMode,
    IntPtr lpSecurityAttributes,
    [MarshalAs(UnmanagedType.U4)] FileMode dwCreationDisposition,
    [MarshalAs(UnmanagedType.U4)] FileAttributes dwFlagsAndAttributes,
    IntPtr hTemplateFile);

[DllImport("kernel32.dll", CharSet = CharSet.Auto, SetLastError = true)]
public static extern bool ReadFile(
    SafeFileHandle hFile,      // handle to file
    byte[] pBuffer,        // data buffer, should be fixed
    int NumberOfBytesToRead,  // number of bytes to read
    IntPtr pNumberOfBytesRead,  // number of bytes read, provide NULL here
    ref NativeOverlapped lpOverlapped // should be fixed, if not null
);

[DllImport("Kernel32.dll", SetLastError = true, CharSet = CharSet.Auto)]
public static extern bool SetFilePointerEx(
    SafeFileHandle hFile,
    long liDistanceToMove,
    out long lpNewFilePointer,
    SeekOrigin dwMoveMethod); 
```

因此，我们将使用这些讨厌的 win32 野兽：

```
// To the metal, baby!
using (var fileHandle = NativeMethods.CreateFile(
    // Magic "give me the device" syntax
    @"\\.\c:",
    // MUST explicitly provide both of these, not ReadWrite
    FileAccess.Read | FileAccess.Write,
    // MUST explicitly provide both of these, not ReadWrite
    FileShare.Write | FileShare.Read,
    IntPtr.Zero,
    FileMode.Open,
    FileAttributes.Normal,
    IntPtr.Zero))
{
    if (fileHandle.IsInvalid)
    {
        // Doh!
        throw new Win32Exception();
    }
    else
    {
        // Boot sector ~ 512 bytes long
        byte[] buffer = new byte[512];
        NativeOverlapped overlapped = new NativeOverlapped();
        NativeMethods.ReadFile(fileHandle, buffer, buffer.Length, IntPtr.Zero, ref overlapped);

        // Pin it so we can transmogrify it into a FAT structure
        var handle = GCHandle.Alloc(buffer, GCHandleType.Pinned);
        try
        {
            // note, I've got an NTFS drive, change yours to suit
            var bootSector = (BootSector_NTFS)Marshal.PtrToStructure(
                 handle.AddrOfPinnedObject(), 
                 typeof(BootSector_NTFS)); 
```

哇，哇哇 - 到底是什么`BootSector_NTFS`？它是一个字节映射`struct`，尽可能接近 NTFS 结构的样子（包括 FAT32）：

```
[StructLayout(LayoutKind.Sequential, CharSet=CharSet.Ansi, Pack=0)]
public struct JumpBoot
{
    [MarshalAs(UnmanagedType.ByValArray, ArraySubType=UnmanagedType.U1, SizeConst=3)]
    public byte[] BS_jmpBoot;
    [MarshalAs(UnmanagedType.ByValTStr, SizeConst=8)]
    public string BS_OEMName;
}

[StructLayout(LayoutKind.Explicit, CharSet = CharSet.Ansi, Pack = 0, Size = 90)]
public struct BootSector_NTFS
{
    [FieldOffset(0)]
    public JumpBoot JumpBoot;
    [FieldOffset(0xb)]
    public short BytesPerSector;
    [FieldOffset(0xd)]
    public byte SectorsPerCluster;
    [FieldOffset(0xe)]
    public short ReservedSectorCount;
    [FieldOffset(0x10)]
    [MarshalAs(UnmanagedType.ByValArray, SizeConst = 5)]
    public byte[] Reserved0_MUSTBEZEROs;
    [FieldOffset(0x15)]
    public byte BPB_Media;
    [FieldOffset(0x16)]
    public short Reserved1_MUSTBEZERO;
    [FieldOffset(0x18)]
    public short SectorsPerTrack;
    [FieldOffset(0x1A)]
    public short HeadCount;
    [FieldOffset(0x1c)]
    public int HiddenSectorCount;
    [FieldOffset(0x20)]
    public int LargeSectors;
    [FieldOffset(0x24)]
    public int Reserved6;
    [FieldOffset(0x28)]
    public long TotalSectors;
    [FieldOffset(0x30)]
    public long MftClusterNumber;
    [FieldOffset(0x38)]
    public long MftMirrorClusterNumber;
    [FieldOffset(0x40)]
    public byte ClustersPerMftRecord;
    [FieldOffset(0x41)]
    public byte Reserved7;
    [FieldOffset(0x42)]
    public short Reserved8;
    [FieldOffset(0x44)]
    public byte ClustersPerIndexBuffer;
    [FieldOffset(0x45)]
    public byte Reserved9;
    [FieldOffset(0x46)]
    public short ReservedA;
    [FieldOffset(0x48)]
    [MarshalAs(UnmanagedType.ByValArray, SizeConst = 8)]
    public byte[] SerialNumber;
    [FieldOffset(0x50)]
    public int Checksum;
    [FieldOffset(0x54)]
    [MarshalAs(UnmanagedType.ByValArray, SizeConst = 0x1AA)]
    public byte[] BootupCode;
    [FieldOffset(0x1FE)]
    public ushort EndOfSectorMarker;

    public long GetMftAbsoluteIndex(int recordIndex = 0)
    {
        return (BytesPerSector * SectorsPerCluster * MftClusterNumber) + (GetMftEntrySize() * recordIndex);
    }
    public long GetMftEntrySize()
    {
        return (BytesPerSector * SectorsPerCluster * ClustersPerMftRecord);
    }
}

// Note: dont have fat32, so can't verify all these...they *should* work, tho
// refs:
//    http://www.pjrc.com/tech/8051/ide/fat32.html
//    http://msdn.microsoft.com/en-US/windows/hardware/gg463084
[StructLayout(LayoutKind.Explicit, CharSet=CharSet.Auto, Pack=0, Size=90)]
public struct BootSector_FAT32
{
    [FieldOffset(0)]
    public JumpBoot JumpBoot;    
    [FieldOffset(11)]
    public short BPB_BytsPerSec;
    [FieldOffset(13)]
    public byte BPB_SecPerClus;
    [FieldOffset(14)]
    public short BPB_RsvdSecCnt;
    [FieldOffset(16)]
    public byte BPB_NumFATs;
    [FieldOffset(17)]
    public short BPB_RootEntCnt;
    [FieldOffset(19)]
    public short BPB_TotSec16;
    [FieldOffset(21)]
    public byte BPB_Media;
    [FieldOffset(22)]
    public short BPB_FATSz16;
    [FieldOffset(24)]
    public short BPB_SecPerTrk;
    [FieldOffset(26)]
    public short BPB_NumHeads;
    [FieldOffset(28)]
    public int BPB_HiddSec;
    [FieldOffset(32)]
    public int BPB_TotSec32;
    [FieldOffset(36)]
    public FAT32 FAT;
}

[StructLayout(LayoutKind.Sequential)]
public struct FAT32
{
    public int BPB_FATSz32;
    public short BPB_ExtFlags;
    public short BPB_FSVer;
    public int BPB_RootClus;
    public short BPB_FSInfo;
    public short BPB_BkBootSec;
    [MarshalAs(UnmanagedType.ByValArray, SizeConst=12)]
    public byte[] BPB_Reserved;
    public byte BS_DrvNum;
    public byte BS_Reserved1;
    public byte BS_BootSig;
    public int BS_VolID;
    [MarshalAs(UnmanagedType.ByValTStr, SizeConst=11)] 
    public string BS_VolLab;
    [MarshalAs(UnmanagedType.ByValTStr, SizeConst=8)] 
    public string BS_FilSysType;
} 
```

所以现在我们可以将整个混乱'o'bytes映射回这个结构：

```
// Pin it so we can transmogrify it into a FAT structure
var handle = GCHandle.Alloc(buffer, GCHandleType.Pinned);
    try
    {            
        // note, I've got an NTFS drive, change yours to suit
        var bootSector = (BootSector_NTFS)Marshal.PtrToStructure(
              handle.AddrOfPinnedObject(), 
              typeof(BootSector_NTFS));
        Console.WriteLine(
            "I think that the Master File Table is at absolute position:{0}, sector:{1}", 
            bootSector.GetMftAbsoluteIndex(),
            bootSector.GetMftAbsoluteIndex() / bootSector.BytesPerSector); 
```

此时输出：

```
I think that the Master File Table is at 
absolute position:3221225472, sector:6291456 
```

让我们使用 OEM 支持工具快速确认`nfi.exe`：

```
C:\tools\OEMTools\nfi>nfi c:
NTFS File Sector Information Utility.
Copyright (C) Microsoft Corporation 1999\. All rights reserved.

File 0
Master File Table ($Mft)
    $STANDARD_INFORMATION (resident)
    $FILE_NAME (resident)
    $DATA (nonresident)
        logical sectors 6291456-6487039 (0x600000-0x62fbff)
        logical sectors 366267960-369153591 (0x15d4ce38-0x1600d637)
    $BITMAP (nonresident)
        logical sectors 6291448-6291455 (0x5ffff8-0x5fffff)
        logical sectors 7273984-7274367 (0x6efe00-0x6eff7f) 
```

酷，看起来我们在正确的轨道上......继续！

```
 // If you've got LinqPad, uncomment this to look at boot sector
            bootSector.Dump();

    Console.WriteLine("Jumping to Master File Table...");
    long lpNewFilePointer;
    if (!NativeMethods.SetFilePointerEx(
            fileHandle, 
            bootSector.GetMftAbsoluteIndex(), 
            out lpNewFilePointer, 
            SeekOrigin.Begin))
    {
        throw new Win32Exception();
    }
    Console.WriteLine("Position now: {0}", lpNewFilePointer);

    // Read in one MFT entry
    byte[] mft_buffer = new byte[bootSector.GetMftEntrySize()];
    Console.WriteLine("Reading $MFT entry...calculated size: 0x{0}",
       bootSector.GetMftEntrySize().ToString("X"));

    var seekIndex = bootSector.GetMftAbsoluteIndex();
    overlapped.OffsetHigh = (int)(seekIndex >> 32);
    overlapped.OffsetLow = (int)seekIndex;
    NativeMethods.ReadFile(
          fileHandle, 
          mft_buffer, 
          mft_buffer.Length, 
          IntPtr.Zero, 
          ref overlapped);
    // Pin it for transmogrification
    var mft_handle = GCHandle.Alloc(mft_buffer, GCHandleType.Pinned);
    try
    {
        var mftRecords = (MFTSystemRecords)Marshal.PtrToStructure(
              mft_handle.AddrOfPinnedObject(), 
              typeof(MFTSystemRecords));
        mftRecords.Dump();
    }
    finally
    {
        // make sure we clean up
        mft_handle.Free();
    }
}
finally
{
    // make sure we clean up
    handle.Free();
} 
```

啊，更多的原生结构要讨论 - 所以 MFT 的排列方式是前 16 个左右的条目是“固定的”：

```
[StructLayout(LayoutKind.Sequential)]
public struct MFTSystemRecords
{
    public MFTRecord Mft;
    public MFTRecord MftMirror;
    public MFTRecord LogFile;
    public MFTRecord Volume;
    public MFTRecord AttributeDefs;
    public MFTRecord RootFile;
    public MFTRecord ClusterBitmap;
    public MFTRecord BootSector;
    public MFTRecord BadClusterFile;
    public MFTRecord SecurityFile;
    public MFTRecord UpcaseTable;
    public MFTRecord ExtensionFile;
    [MarshalAs(UnmanagedType.ByValArray, SizeConst = 16)]
    public MFTRecord[] MftReserved;
    public MFTRecord MftFileExt;
} 
```

在哪里`MFTRecord`：

```
[StructLayout(LayoutKind.Sequential, Size = 1024)]
public struct MFTRecord
{
    const int BASE_RECORD_SIZE = 48;
    [MarshalAs(UnmanagedType.ByValTStr, SizeConst = 4)]
    public string Type;
    public short UsaOffset;
    public short UsaCount;
    public long Lsn;  /* $LogFile sequence number for this record. Changed every time the record is modified. */
    public short SequenceNumber; /* # of times this record has been reused */
    public short LinkCount;  /* Number of hard links, i.e. the number of directory entries referencing this record. */
    public short AttributeOffset; /* Byte offset to the first attribute in this mft record from the start of the mft record. */
    public short MftRecordFlags;
    public int BytesInUse;
    public int BytesAllocated;
    public long BaseFileRecord;
    public short NextAttributeNumber;
    public short Reserved;
    public int MftRecordNumber;
    [MarshalAs(UnmanagedType.ByValArray, SizeConst = 976)]
    public byte[] Data;
    public byte[] SetData
    {
        get
        {
            return this.Data
               .Skip(AttributeOffset - BASE_RECORD_SIZE)
               .Take(BytesInUse - BASE_RECORD_SIZE)
               .ToArray();
        }
    }
    public MftAttribute[] Attributes
    {
        get
        {
            var idx = 0;
            var ret = new List<MftAttribute>();
            while (idx < SetData.Length)
            {
                var attr = MftAttribute.FromBytes(SetData.Skip(idx).ToArray());
                ret.Add(attr);
                idx += attr.Attribute.Length;
                // A special "END" attribute denotes the end of the list
                if (attr.Attribute.AttributeType == MftAttributeType.AT_END) break;
            }
            return ret.ToArray();
        }
    }
} 
```

而且......这就是我现在逐渐消失的地方；主要是因为我想吃晚饭之类的。但是，我会回到这个话题！

参考文献（部分是为了我自己的记忆，部分是为了帮助其他调查人员）

*   [http://ntfs.com/ntfs-mft.htm](http://ntfs.com/ntfs-mft.htm)
*   [http://technet.microsoft.com/en-us/library/cc781134%28WS.10%29.aspx](http://technet.microsoft.com/en-us/library/cc781134%28WS.10%29.aspx)
*   [http://waynes-world-it.blogspot.com/2008/03/viewing-ntfs-information-with-nfi-and.html](http://waynes-world-it.blogspot.com/2008/03/viewing-ntfs-information-with-nfi-and.html)
*   [http://en.wikipedia.org/wiki/NTFS](http://en.wikipedia.org/wiki/NTFS)
*   [http://msdn.microsoft.com/en-us/library/aa365247(v=vs.85).aspx#win32_device_namespaces](http://msdn.microsoft.com/en-us/library/aa365247(v=vs.85).aspx#win32_device_namespaces)
*   [http://www.pjrc.com/tech/8051/ide/fat32.html](http://www.pjrc.com/tech/8051/ide/fat32.html)
*   [http://msdn.microsoft.com/en-us/library/aa364572(VS.85).aspx](http://msdn.microsoft.com/en-us/library/aa364572(VS.85).aspx)

完整代码转储如下：

我在上面涂上的所有本机映射（由于帖子大小限制，而不是完整的重新散列）：

```
public enum MftRecordFlags : ushort
{
    MFT_RECORD_IN_USE = 0x0001,
    MFT_RECORD_IS_DIRECTORY = 0x0002,
    MFT_RECORD_IN_EXTEND = 0x0004,
    MFT_RECORD_IS_VIEW_INDEX = 0x0008,
    MFT_REC_SPACE_FILLER = 0xffff
}
public enum MftAttributeType : uint
{
    AT_UNUSED = 0,
    AT_STANDARD_INFORMATION = 0x10,
    AT_ATTRIBUTE_LIST = 0x20,
    AT_FILENAME = 0x30,
    AT_OBJECT_ID = 0x40,
    AT_SECURITY_DESCRIPTOR = 0x50,
    AT_VOLUME_NAME = 0x60,
    AT_VOLUME_INFORMATION = 0x70,
    AT_DATA = 0x80,
    AT_INDEX_ROOT = 0x90,
    AT_INDEX_ALLOCATION = 0xa0,
    AT_BITMAP = 0xb0,
    AT_REPARSE_POINT = 0xc0,
    AT_EA_INFORMATION = 0xd0,
    AT_EA = 0xe0,
    AT_PROPERTY_SET = 0xf0,
    AT_LOGGED_UTILITY_STREAM = 0x100,
    AT_FIRST_USER_DEFINED_ATTRIBUTE = 0x1000,
    AT_END = 0xffffffff
}

public enum MftAttributeDefFlags : byte
{
    ATTR_DEF_INDEXABLE = 0x02, /* Attribute can be indexed. */
    ATTR_DEF_MULTIPLE = 0x04, /* Attribute type can be present multiple times in the mft records of an inode. */
    ATTR_DEF_NOT_ZERO = 0x08, /* Attribute value must contain at least one non-zero byte. */
    ATTR_DEF_INDEXED_UNIQUE = 0x10, /* Attribute must be indexed and the attribute value must be unique for the attribute type in all of the mft records of an inode. */
    ATTR_DEF_NAMED_UNIQUE = 0x20, /* Attribute must be named and the name must be unique for the attribute type in all of the mft records of an inode. */
    ATTR_DEF_RESIDENT = 0x40, /* Attribute must be resident. */
    ATTR_DEF_ALWAYS_LOG = 0x80, /* Always log modifications to this attribute, regardless of whether it is resident or
                non-resident.  Without this, only log modifications if the attribute is resident. */
}

[StructLayout(LayoutKind.Explicit)]
public struct MftInternalAttribute
{
    [FieldOffset(0)]
    public MftAttributeType AttributeType;
    [FieldOffset(4)]
    public int Length;
    [FieldOffset(8)]
    [MarshalAs(UnmanagedType.Bool)]
    public bool NonResident;
    [FieldOffset(9)]
    public byte NameLength;
    [FieldOffset(10)]
    public short NameOffset;
    [FieldOffset(12)]
    public int AttributeFlags;
    [FieldOffset(14)]
    public short Instance;
    [FieldOffset(16)]
    public ResidentAttribute ResidentAttribute;
    [FieldOffset(16)]
    public NonResidentAttribute NonResidentAttribute;
}

[StructLayout(LayoutKind.Sequential)]
public struct ResidentAttribute
{
    public int ValueLength;
    public short ValueOffset;
    public byte ResidentAttributeFlags;
    public byte Reserved;

    public override string ToString()
    {
        return string.Format("{0}:{1}:{2}:{3}", ValueLength, ValueOffset, ResidentAttributeFlags, Reserved);
    }
}
[StructLayout(LayoutKind.Sequential)]
public struct NonResidentAttribute
{
    public long LowestVcn;
    public long HighestVcn;
    public short MappingPairsOffset;
    public byte CompressionUnit;
    [MarshalAs(UnmanagedType.ByValArray, SizeConst = 5)]
    public byte[] Reserved;
    public long AllocatedSize;
    public long DataSize;
    public long InitializedSize;
    public long CompressedSize;
    public override string ToString()
    {
        return string.Format("{0}:{1}:{2}:{3}:{4}:{5}:{6}:{7}", LowestVcn, HighestVcn, MappingPairsOffset, CompressionUnit, AllocatedSize, DataSize, InitializedSize, CompressedSize);
    }
}

public struct MftAttribute
{
    public MftInternalAttribute Attribute;

    [field: NonSerialized]
    public string Name;

    [field: NonSerialized]
    public byte[] Data;

    [field: NonSerialized]
    public object Payload;

    public static MftAttribute FromBytes(byte[] buffer)
    {
        var hnd = GCHandle.Alloc(buffer, GCHandleType.Pinned);
        try
        {
            var attr = (MftInternalAttribute)Marshal.PtrToStructure(hnd.AddrOfPinnedObject(), typeof(MftInternalAttribute));
            var ret = new MftAttribute() { Attribute = attr };
            ret.Data = buffer.Skip(Marshal.SizeOf(attr)).Take(attr.Length).ToArray();
            if (ret.Attribute.AttributeType == MftAttributeType.AT_STANDARD_INFORMATION)
            {
                var payloadHnd = GCHandle.Alloc(ret.Data, GCHandleType.Pinned);
                try
                {
                    var payload = (MftStandardInformation)Marshal.PtrToStructure(payloadHnd.AddrOfPinnedObject(), typeof(MftStandardInformation));
                    ret.Payload = payload;
                }
                finally
                {
                    payloadHnd.Free();
                }
            }
            return ret;
        }
        finally
        {
            hnd.Free();
        }
    }
}

[StructLayout(LayoutKind.Sequential)]
public struct MftStandardInformation
{
    public ulong CreationTime;
    public ulong LastDataChangeTime;
    public ulong LastMftChangeTime;
    public ulong LastAccessTime;
    public int FileAttributes;
    public int MaximumVersions;
    public int VersionNumber;
    public int ClassId;
    public int OwnerId;
    public int SecurityId;
    public long QuotaChanged;
    public long Usn;
}

// Note: dont have fat32, so can't verify all these...they *should* work, tho
// refs:
//    http://www.pjrc.com/tech/8051/ide/fat32.html
//    http://msdn.microsoft.com/en-US/windows/hardware/gg463084
[StructLayout(LayoutKind.Explicit, CharSet = CharSet.Auto, Pack = 0, Size = 90)]
public struct BootSector_FAT32
{
    [FieldOffset(0)]
    public JumpBoot JumpBoot;
    [FieldOffset(11)]
    public short BPB_BytsPerSec;
    [FieldOffset(13)]
    public byte BPB_SecPerClus;
    [FieldOffset(14)]
    public short BPB_RsvdSecCnt;
    [FieldOffset(16)]
    public byte BPB_NumFATs;
    [FieldOffset(17)]
    public short BPB_RootEntCnt;
    [FieldOffset(19)]
    public short BPB_TotSec16;
    [FieldOffset(21)]
    public byte BPB_Media;
    [FieldOffset(22)]
    public short BPB_FATSz16;
    [FieldOffset(24)]
    public short BPB_SecPerTrk;
    [FieldOffset(26)]
    public short BPB_NumHeads;
    [FieldOffset(28)]
    public int BPB_HiddSec;
    [FieldOffset(32)]
    public int BPB_TotSec32;
    [FieldOffset(36)]
    public FAT32 FAT;
}

[StructLayout(LayoutKind.Sequential)]
public struct FAT32
{
    public int BPB_FATSz32;
    public short BPB_ExtFlags;
    public short BPB_FSVer;
    public int BPB_RootClus;
    public short BPB_FSInfo;
    public short BPB_BkBootSec;
    [MarshalAs(UnmanagedType.ByValArray, SizeConst = 12)]
    public byte[] BPB_Reserved;
    public byte BS_DrvNum;
    public byte BS_Reserved1;
    public byte BS_BootSig;
    public int BS_VolID;
    [MarshalAs(UnmanagedType.ByValTStr, SizeConst = 11)]
    public string BS_VolLab;
    [MarshalAs(UnmanagedType.ByValTStr, SizeConst = 8)]
    public string BS_FilSysType;
} 
```

和测试工具：

```
class Program
{        
    static void Main(string[] args)
    {
        // To the metal, baby!
        using (var fileHandle = NativeMethods.CreateFile(
            // Magic "give me the device" syntax
            @"\\.\c:",
            // MUST explicitly provide both of these, not ReadWrite
            FileAccess.Read | FileAccess.Write,
            // MUST explicitly provide both of these, not ReadWrite
            FileShare.Write | FileShare.Read,
            IntPtr.Zero,
            FileMode.Open,
            FileAttributes.Normal,
            IntPtr.Zero))
        {
            if (fileHandle.IsInvalid)
            {
                // Doh!
                throw new Win32Exception();
            }
            else
            {
                // Boot sector ~ 512 bytes long
                byte[] buffer = new byte[512];
                NativeOverlapped overlapped = new NativeOverlapped();
                NativeMethods.ReadFile(fileHandle, buffer, buffer.Length, IntPtr.Zero, ref overlapped);

                // Pin it so we can transmogrify it into a FAT structure
                var handle = GCHandle.Alloc(buffer, GCHandleType.Pinned);
                try
                {
                    // note, I've got an NTFS drive, change yours to suit
                    var bootSector = (BootSector_NTFS)Marshal.PtrToStructure(handle.AddrOfPinnedObject(), typeof(BootSector_NTFS));
                    Console.WriteLine(
                        "I think that the Master File Table is at absolute position:{0}, sector:{1}",
                        bootSector.GetMftAbsoluteIndex(),
                        bootSector.GetMftAbsoluteIndex() / bootSector.BytesPerSector);
                    Console.WriteLine("MFT record size:{0}", bootSector.ClustersPerMftRecord * bootSector.SectorsPerCluster * bootSector.BytesPerSector);

                    // If you've got LinqPad, uncomment this to look at boot sector
                    bootSector.DumpToHtmlString();

                    Pause();

                    Console.WriteLine("Jumping to Master File Table...");
                    long lpNewFilePointer;
                    if (!NativeMethods.SetFilePointerEx(fileHandle, bootSector.GetMftAbsoluteIndex(), out lpNewFilePointer, SeekOrigin.Begin))
                    {
                        throw new Win32Exception();
                    }
                    Console.WriteLine("Position now: {0}", lpNewFilePointer);

                    // Read in one MFT entry
                    byte[] mft_buffer = new byte[bootSector.GetMftEntrySize()];
                    Console.WriteLine("Reading $MFT entry...calculated size: 0x{0}", bootSector.GetMftEntrySize().ToString("X"));

                    var seekIndex = bootSector.GetMftAbsoluteIndex();
                    overlapped.OffsetHigh = (int)(seekIndex >> 32);
                    overlapped.OffsetLow = (int)seekIndex;
                    NativeMethods.ReadFile(fileHandle, mft_buffer, mft_buffer.Length, IntPtr.Zero, ref overlapped);
                    // Pin it for transmogrification
                    var mft_handle = GCHandle.Alloc(mft_buffer, GCHandleType.Pinned);
                    try
                    {
                        var mftRecords = (MFTSystemRecords)Marshal.PtrToStructure(mft_handle.AddrOfPinnedObject(), typeof(MFTSystemRecords));
                        mftRecords.DumpToHtmlString();
                    }
                    finally
                    {
                        // make sure we clean up
                        mft_handle.Free();
                    }
                }
                finally
                {
                    // make sure we clean up
                    handle.Free();
                }
            }
        }
        Pause();
    }

    private static void Pause()
    {
        Console.WriteLine("Press enter to continue...");
        Console.ReadLine();
    }
}

public static class Dumper
{
    public static string DumpToHtmlString<T>(this T objectToSerialize)
    {
        string strHTML = "";
        try
        {
            var writer = LINQPad.Util.CreateXhtmlWriter(true);
            writer.Write(objectToSerialize);
            strHTML = writer.ToString();
        }
        catch (Exception exc)
        {
            Debug.Assert(false, "Investigate why ?" + exc);
        }

        var shower = new Thread(
            () =>
                {
                    var dumpWin = new Window();
                    var browser = new WebBrowser();
                    dumpWin.Content = browser;
                    browser.NavigateToString(strHTML);
                    dumpWin.ShowDialog();                        
                });
        shower.SetApartmentState(ApartmentState.STA);
        shower.Start();
        return strHTML;
    }

    public static string Dump(this object value)
    {
         return JsonConvert.SerializeObject(value, Formatting.Indented);
    }
} 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-03-13T22:00:15.403

罗伯特，我不认为如果不主动操作文件系统的文件系统数据结构，从它的声音来看，它是挂载的，你想要实现的目标是不可能的。我想我不必告诉你这种做法有多*危险*和*不明智。*

但如果你*需*要这样做，我想我可以给你一张“餐巾纸背面的草图”让你开始：

您可以利用 NTFS 的“稀疏文件”支持通过调整 LCN/VCN 映射来简单地添加“间隙”。完成后，只需打开文件，寻找新位置并写入数据。NTFS 将透明地分配空间并将数据写入文件中间，您在其中创建了一个洞。

有关更多信息，请查看有关NTFS 中的[碎片整理支持](http://msdn.microsoft.com/en-us/library/windows/desktop/aa363911%28v=vs.85%29.aspx)的页面，以获取有关如何稍微操作事物并允许您在文件中间插入集群的提示。至少通过对此类事情使用认可的 API，您不太可能将文件系统损坏到无法修复的程度，尽管我猜您仍然可以可怕地冲洗您的文件。

获取所需文件的检索指针，将它们拆分到需要的位置，根据需要添加尽可能多的额外空间，然后移动文件。Russinovich/Ionescu “Windows Internals”一书中有一个关于这类事情的有趣章节（[http://www.amazon.com/Windows%C2%AE-Internals-Including-Windows-Developer/dp/0735625301](https://rads.stackoverflow.com/amzn/click/com/0735625301)）

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-13T21:31:27.187

抽象问题，抽象答案：

当然可以在 FAT 中执行此操作，并且可能在大多数其他 FS 中，您实际上是在对文件进行分段，而不是更常见的碎片整理过程。

FAT 是用簇指针组织的，这些指针产生一个簇号链，其中存储数据，第一个链接索引与文件记录一起存储，第二个链接索引存储在索引[第一个链接的编号]处的分配表中，等等。只要您插入的数据在集群的边界处结束，就可以在链中的任何位置插入另一个链接。

通过找到一个[开源库](https://code.google.com/p/jallib/downloads/list)，您可能会**更**轻松地在 C 中执行此操作。虽然在 C# 中使用 PInvoke 可能可以做到这一点，但您不会发现任何好的示例代码可供您开始使用。

我怀疑您对文件格式（视频文件？）没有任何控制权，如果您这样做，那么首先设计数据存储以避免问题会容易得多。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-03-14T01:48:17.897

您不需要（也可能不能）修改文件访问表。您可以使用过滤器驱动程序或可堆叠的 FS 来实现相同的目的。让我们考虑一个 4K 的集群大小。我只是出于我在最后解释的原因而写出设计。

1.  新文件的创建将在标题中显示文件的布局图。标题将提及条目数和条目列表。标头的大小将与集群的大小相同。为简单起见，让标题为固定大小的 4K 条目。例如，假设有一个 20KB 的文件，标题可能会提到：[DWORD:5][DWORD:1][DWORD:2][DWORD:3][DWORD:4][DWORD:5]。该文件当前没有插入。

2.  假设有人在扇区 3 之后插入了一个簇。您可以将其添加到文件末尾并将 layout-map 更改为：[5][1][2][3][5][6][4]

3.  假设有人需要寻找聚类 4。您将需要访问布局图并计算偏移量，然后寻找它。它将在前 5 个集群之后，因此将从 16K 开始。

4.  假设有人连续读取或写入文件。读取和写入必须以相同的方式映射。

5.  假设标题只剩下一个条目：我们需要通过在文件末尾使用与上面其他指针相同的格式指向新簇的指针来扩展它。要知道我们有多个集群，我们需要做的就是查看项目的数量并计算存储它所需的集群数量。

您可以使用 Windows 上的过滤器驱动程序或 Linux 上的可堆叠文件系统 (LKM) 来实现上述所有功能。实现基本级别的功能是在困难的研究生学校迷你项目的水平上。让它作为商业文件系统工作可能非常具有挑战性，尤其是因为您不想影响 IO 速度。

请注意，上述过滤器不会受到磁盘布局/碎片整理等任何更改的影响。如果您认为这会有所帮助，您也可以对自己的文件进行碎片整理。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-03-14T20:44:39.377

不，您要问的内容在 Windows 中无法直接实现。

这是因为在 Windows 中，文件是逻辑上连续的字节集合，不可能在不覆盖的情况下将字节插入文件中间。

为了理解为什么，让我们进行一个思想实验，看看如果可能的话，这意味着什么。

首先，内存映射文件会突然变得更加复杂。如果我们将文件映射到特定地址，然后在其中添加一些额外的字节，这对内存映射意味着什么？现在内存映射是否应该突然移动？如果是这样，不希望它发生的程序会发生什么？

其次，让我们考虑如果两个句柄对同一个文件打开，并且一个在该文件的中间插入额外的字节，GetFilePointer 会发生什么。假设进程 A 已打开文件以供读取，而进程 B 已打开文件以供读取和写入。

进程 A 想在进行几次读取时保存它的位置，所以它写了一些代码有点像

```
DWORD DoAndThenRewind(HANDLE hFile, FARPROC fp){
   DWORD result;
   LARGEINTEGER zero = { 0 };
   LARGEINTEGER li;
   SetFilePointer(hFile, zero, &li, FILE_CURRENT);

   result = fp();

   SetFilePointer(hFile, &li, &li, FILE_BEGIN);
   return result;
} 
```

现在如果进程 B 想在文件中插入一些额外的字节，这个函数会发生什么？好吧，如果我们在进程 A 当前所在的位置之后添加字节，一切都很好——文件指针（即从文件开头开始的线性地址）在前后保持不变，一切都很好。

*但是，如果我们在进程 A 所在的位置之前*添加额外的字节，那么，突然我们捕获的文件指针都未对齐，并且开始发生坏事。

或者换一种说法，在文件中间添加字节意味着我们突然需要发明更聪明的方法来描述我们在文件中的位置以用于倒带，因为文件不再是逻辑上连续的字节选择。

因此，到目前为止，我们已经讨论了为什么 Windows 公开这种功能可能是个坏主意；但这并不能真正回答“它实际上是否可能”的问题。这里的答案仍然是否定的。这不可能。

为什么？因为没有这样的功能暴露给用户模式程序来执行此操作。作为一个用户模式程序，你有一个获取文件句柄的机制（NtCreateFile/NtOpenFile），你可以通过 NtReadFile/NtWriteFile 读取和写入它，你可以通过 NtSetFileInformation 查找并重命名和删除它，然后你可以通过 NtClose 释放句柄引用。

即使在内核模式下，您也没有更多选择。文件系统 API 是从您那里抽象出来的，文件系统将文件视为逻辑上连续的字节集合，而不是字节范围的链接列表或任何可以轻松公开一种方法以便您在中间插入非覆盖字节的方法一份文件。

这并不是说它*本身是不可能的*。正如其他人所提到的，您可以打开磁盘本身，伪装成 NTFS 并直接更改分配给特定 FCB 的磁盘集群。但这样做是勇敢的。NTFS 几乎没有文档记录，很复杂，可能会发生变化，并且即使它没有被操作系统挂载也很难修改，不管它什么时候挂载。

所以，恐怕答案是**否定**的。不可能通过正常的安全 Windows 机制在文件中间添加额外字节作为插入而不是覆盖操作。

相反，请考虑查看您的问题，看看是否适合将文件分块为较小的文件并拥有一个索引文件。这样您就可以修改索引文件以插入额外的块。通过打破对需要驻留在一个文件中的数据的依赖，您会发现更容易避免文件系统要求文件是逻辑上连续的字节集合。然后，您将能够修改索引文件以向“pseduofile”添加额外的块，而无需将整个伪文件读入内存。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-03-16T00:06:19.860

您是否了解在未对齐的位置插入未对齐的数据几乎 99.99% 是不可能的？（也许可以使用一些基于压缩的hack。）我认为你可以。

“最简单”的解决方案是创建稀疏运行记录，然后覆盖稀疏范围。

1.  对 NTFS 缓存做一些事情。最好在脱机/卸载驱动器上执行操作。
2.  获取文件记录（@JerKimball 的回答听起来很有帮助，但没有做到这一点）。如果文件中的属性溢出并且它们被存储起来，则可能会出现问题。
3.  获取文件的数据运行列表。此处描述了数据运行概念和格式（[http://inform.pucp.edu.pe/~inf232/Ntfs/ntfs_doc_v0.5/concepts/data_runs.html](http://inform.pucp.edu.pe/~inf232/Ntfs/ntfs_doc_v0.5/concepts/data_runs.html)），其他一些 NTFS 格式数据可以在相邻页面上看到.
4.  遍历数据运行，累积文件长度，以找到正确的插入点。
5.  您很可能会发现您的插入点位于运行的中间。您需要拆分运行，这并不难。（现在只存储两个结果运行。）
6.  创建稀疏运行记录非常容易。它只是由字节前置的运行长度（以簇为单位），它包含长度的低 4 位中的字节大小（高 4 位应该为零以指示备用运行）。
7.  现在您需要计算必须在数据运行列表中插入多少额外字节，以某种方式为它们让路并进行插入/替换。
8.  然后您需要修复文件大小属性以使其与运行一致。
9.  最后，您可以安装驱动器并将插入的信息写入备用点。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2013-03-19T05:04:45.067

这完全取决于原始问题是什么，这就是您要实现的目标。修改 FAT / NTFS 表不是问题，它是您问题的解决方案 - 可能是优雅和高效的，但更可能是非常危险和不合适的。您提到您无法控制将使用它的用户系统，因此可能至少对于其中一些用户，管理员会反对入侵文件系统内部。

无论如何，让我们回到问题上来。鉴于信息不完整，可以想象几个用例，根据用例，解决方案将是简单的还是困难的。

1.  如果您知道在编辑后一段时间内不需要文件，那么在半秒内保存编辑很容易 - 只需关闭窗口并让应用程序在后台完成保存，即使需要半秒小时。我知道这听起来很愚蠢，但这是一个常见的用例——一旦你完成了文件的编辑，你保存它，关闭程序，很长一段时间你都不需要那个文件了。

2.  除非你这样做。也许用户决定再编辑一些，或者另一个用户出现。在这两种情况下，您的应用程序都可以轻松地检测到文件正在保存到硬盘的过程中（例如，在保存主文件时，您可能有一个隐藏的保护文件）。在这种情况下，您将按原样（部分保存）打开文件，但向用户显示文件的自定义视图，使其看起来好像文件处于最终状态。毕竟，您拥有关于哪些文件块必须移动到哪里的所有信息。

3.  除非用户需要立即在另一个编辑器中打开文件（这不是很常见的情况，尤其是对于非常专业的文件格式，但谁知道呢）。如果是这样，您是否有权访问该其他编辑器的源代码？或者您能否与其他编辑器的开发人员交谈并说服他们将未完全保存的文件视为处于最终状态（这并不难——只需从保护文件中读取偏移信息）。我可以想象，另一个编辑器的开发人员同样对保存时间过长感到沮丧，并且很乐意接受您的解决方案，因为这将有助于他们的产品。

4.  我们还能有什么？也许用户想立即将文件复制或移动到其他地方。Microsoft 可能不会为了您的利益而更改 Windows Explorer。在这种情况下，您要么需要实现 UMDF 驱动程序，要么明确禁止用户这样做（例如，重命名原始文件并将其隐藏，在其位置留下空白占位符；当用户至少尝试复制文件时他会知道出了什么问题）。

5.  *如果您事先*知道将编辑哪些文件，则会出现另一种可能性，它不能很好地适合上述层次结构 1-4 。在这种情况下，您可以“预稀疏”文件，沿文件的体积均匀地插入随机间隙。这是由于您提到的文件格式的特殊性质：如果链接正确指向下一个数据块，则可能没有数据间隙。如果你知道哪些文件将被编辑（不是不合理的假设——你的硬盘驱动器上有多少 10Gb 文件？）你在用户开始编辑之前“膨胀”文件（比如前一天晚上），然后四处走动当您需要插入新数据时，这些较小的数据块。这当然也依赖于您不必插入太多的假设。

无论如何，根据您的用户实际想要什么，总是有不止一个答案。但我的建议来自设计师的观点，而不是程序员的观点。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2021-01-28T16:57:56.793

还有一种可能。

创建一个用户模式文件系统，例如使用 FUSE 或 Dokan，并且您设计为保存单个文件。从那里，您可以使用任何您想要的解决方案，包括将多个文件的片段连接在一起，使某些东西看起来好像是一个大文件。

然后创建指向该文件的符号链接。

* * *

## 回答 #9

> 赞同：-2
> 
> 时间：2013-03-19T17:53:27.253

已编辑 - 另一种方法 - 为这项任务切换到 Mac 怎么样？他们具有出色的编辑功能，具有自动化功能！

已编辑 - 原始规格表明该文件被修改了很多，而是修改了一次。建议像其他人指出的那样在后台进行操作：复制到新文件，删除旧文件，将新文件重命名为旧文件。

我会放弃这种方法。数据库就是你要找的。/YR

# .net - 在 Winforms 的另一个表单中关闭一个不相关的 .NET 表单

> ID：13430212
> 
> 赞同：0
> 
> 时间：2012-11-17T11:40:29.853
> 
> 标签：.net, winforms

我试图了解 WinForms 应用程序中以下代码的行为。
我有两个表格 - Form1 和 Form2。当我从 Form2 内部关闭 Form1 时，即使 Form2 也会关闭。我确保他们都将 Owner 属性设置为 null。

谁能从下面的代码中解释为什么 Form2 也会被关闭？
表格1：

```
public partial class Form1 : Form
{
    public Form1()
    {
        InitializeComponent();
    }
} 
```

表格2：

```
public partial class Form2 : Form
{
    Form1 f1;
    public Form2(Form1 f1)
    {
        InitializeComponent();
        this.f1 = f1;
    }

    private void button1_Click(object sender, EventArgs e)
    {          
        f1.Close();         
    }
} 
```

程序.cs

```
static void Main()
    {           
        Form1 f1 = new Form1();
        f1.Size = new Size(0, 0);
        f1.Show();           

        Form2 f2 = new Form2(f1);
        f2.ShowDialog();            

        Application.Run(new MainForm());
    } 
```

当单击 Form2 上的按钮时，Form1 和 Form2 都会关闭。我还确保该按钮不是 Form2 的确定按钮或取消按钮。谁能解释为什么会这样？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-17T12:16:23.867

Form1 关闭是因为您创建了一个新的 Form1 并将其传递给 Form2，而在 Form2 内部，您正在关闭 Form1。并且正因为Form2是一个DialogForm，并且是在Form1之后创建的，所以它应该是Form1的DialogForm，所以如果Form1关闭了，DialogForm也关闭了。这是一种预期的行为，而不是一种古怪的行为。

要么显示它使用

```
f2.Show(); 
```

或在 MainForm 中显示 Form2 对话框表单（通过 MainForm 将 f1 传递给 Form2），因此 Form1 关闭但不是 Form2。

更新：

在您的 Program.cs 中尝试此操作，您将看到关闭 Form1 后应用程序的 MainWindow 已关闭。

```
Form1 f1 = new Form1();
f1.Size = new Size(0, 0);
f1.Show();

MessageBox.Show(System.Diagnostics.Process.GetCurrentProcess().MainWindowHandle.ToString());

Form f2 = new Form2(f1);

MessageBox.Show(System.Diagnostics.Process.GetCurrentProcess().MainWindowHandle.ToString());

f2.ShowDialog();

MessageBox.Show(System.Diagnostics.Process.GetCurrentProcess().MainWindowHandle.ToString());

Application.Run(new MainForm()); 
```

# ios - 如何在应用程序中获取 IPHONE 的 UUID？

> ID：13430214
> 
> 赞同：0
> 
> 时间：2012-11-17T11:41:11.493
> 
> 标签：ios, database, uuid

我正在开发一个带有外部数据库的应用程序。为此，我必须保存一个 uuid 作为每个注册用户的唯一标识符。这样，如果用户是新用户还是已经在应用程序中注册的用户，它会有所不同。我用这个创建一个新的uuid：

NSUUID *uuid = [NSUUID UUID];

我用用户名将其保存在外部数据库中。当用户再次进入应用程序时，我如何获取这些信息？我必须将其保存在设备的某个位置吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-17T11:58:04.687

一方面，你可以使用`NSUserDefaults`

**缓存 uuid：**

```
[[NSUserDefaults standardUserDefaults] setObject:uuid forKey:@"userIDKey"]; 
```

**要检索 uuid：**

```
NSString *uuid = [[NSUserDefaults standardUserDefaults] objectForKey:@"userIDKey"]; 
```

请注意，使用`NSUUID`该类会将您限制为 iOS 6.0+ 的 iOS 目标。还有其他方法可以生成 UUID < iOS 6.0，例如

```
+ (NSString*)stringWithUUID {
    CFUUIDRef uuidObj = CFUUIDCreate(nil);
    NSString *uuidString = (__bridge_transfer NSString*)CFUUIDCreateString(nil, uuidObj);
    CFRelease(uuidObj);
    return uuidString;
} 
```

# javascript - How to imitate watercolor with JavaScript?

> ID：13430216
> 
> 赞同：0
> 
> 时间：2012-11-17T11:41:34.443
> 
> 标签：javascript, graphics

I wonder how to imitate *watercolors* in JavaScript. For instance, I would like to fill a shape in the screen as if it were painted with watercolors. Is there any JavaScript library for that?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-17T18:42:29.087

Because a "watercolor" effect can take many forms in terms of the staining and where colors become more transparent or more opaque, this could end up being quite specific to the shape in question that you want to fill.

Only solution I can think of is:

1.  Prepare a number of scalable background images with watercolor effects. This will give you a selection to choose from which you can use to fill your shape or div.

    Example tutorials are out there for [Photoshop](http://bluefaqs.com/2010/04/watercolor-effect-photoshop-tutorials/) and [GIMP](http://www.youtube.com/watch?v=KvEIJIzBdEw).

2.  Load up the background images dynamically and set the background of the shape to the relevant image when selected.

    See [Set an Image object as a div background image using javascript](https://stackoverflow.com/questions/9790347/set-an-image-object-as-a-div-background-image-using-javascript)

# c# - 如何使用 c# 从 .csv 文件中读取并存储在 asp.net 中的数据库中？

> ID：13430218
> 
> 赞同：0
> 
> 时间：2012-11-17T11:42:13.043
> 
> 标签：c#, asp.net, file-upload, csv

我正在上传一个带有数据的 .csv 文件。现在我必须从这个 .csv 文件中读取这些数据并将其存储在数据库中……我已经用 excel 完成了这个，但我不能在这个项目中使用 excel，所以我有像这样的excel代码：

```
private bool writetoven()
{

    OleDbConnection excelConnection = new OleDbConnection(excelConnectionString);

    try
    {
        OleDbCommand ocmd = new OleDbCommand("select * from [Sheet1$]", excelConnection);
        excelConnection.Open();
        OleDbDataReader odr = ocmd.ExecuteReader();
        string vcode = "";
        string pswd = "";
        string vname = "";

        while (odr.Read())
        {
            vcode = valid(odr, 0);
            pswd = valid(odr, 1);
            vname = valid(odr, 2);

            insertdataintosql(vcode,pswd,vname);
        }
        excelConnection.Close();
        return true;
    }
    catch (DataException)
    {
        return false;
    }
    finally
    {

        excelConnection.Close();
        lblmsg4.Text = "Data Inserted Sucessfully";

    }

} 
```

没有.csv文件该怎么办..我以前从未使用过.csv文件所以想要一些帮助

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-11-17T11:55:26.500

最简单的方法是使用像 FileHelpers [http://filehelpers.sourceforge.net/这样的库](http://filehelpers.sourceforge.net/)

无需自己编写所有细节和管道。它也非常快速和灵活。

# javascript - 如何动态计算文本框中的值

> ID：13430222
> 
> 赞同：5
> 
> 时间：2012-11-17T11:43:20.167
> 
> 标签：javascript, jquery, html, ajax

我有一张发票，我必须使用 jquery 在文本框中计算一些值。

我对 Jquery 不太了解。请帮我解决这个问题。

在我的发票中有数量文本框，

> 如果用户输入数量然后动态它应该显示计算的价格，即`(total_subPrice= unit_price * quantity)`在另一个名为“价格”的文本框中。

再次，所有价格的总和应该在按钮中显示为总计。

请检查我下面的 html 代码并在浏览器中运行它，然后你就会完全理解我的问题。

```
 <html>
        <body>
        <form name="invoice form" action="saveToDatabase.java">
        <table border="1" height="30%" width="30%">
        <tr>
        <td align="center" colspan="5">Customer Invoice</td>
        </tr>

        <tr>
            <td width="5%" bgcolor="#CCCCCC">Sn.no.</td>
            <td width="25%" bgcolor="#CCCCCC">Item</td>
            <td width="25%" bgcolor="#CCCCCC">Unit Price(In $)</td>
            <td width="20%" bgcolor="#CCCCCC">Quantity</td>
            <td width="25%" bgcolor="#CCCCCC">Line Total<br/>(Price * Qnty)</td>  
        </tr>

        <tr>
            <td width="5%">1</td>
            <td width="25%">Iphone 5S</td>
            <td width="25%"><input type="text" value="400" name="unitprice1" size="4" disabled></td>
            <td width="20%"><input type="text" name="quantity1" value="2" size="2"/></td>
            <td width="25%"><input type="text" name="price1" value="400" size="4"/></td>  
        </tr>

        <tr>
            <td width="5%">2</td>
            <td width="25%">Ipad 2</td>
            <td width="25%"><input type="text" value="700" name="unitprice2" size="4" disabled></td>
            <td width="20%"><input type="text" name="quantity2" value="1" size="2"/></td>
            <td width="25%"><input type="text" name="price2=" value="700" size="4"/></td>  
        </tr>

        <tr>
            <td width="5%">1</td>
            <td width="25%">mp3</td>
            <td width="25%"><input type="text" value="50" name="unitprice1" size="4" disabled></td>
            <td width="20%"><input type="text" name="quantity1" value="3" size="2"/></td>
            <td width="25%"><input type="text" name="price1" value="150" size="4"/></td>  
        </tr>
        <tr>
        <td align="right" colspan="5">Total<input type="text" name="subtotal" value="1250" size="12" disabled/></td>
        </tr>
        </table>
        </form></body>
        </html> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-17T11:58:25.103

我喜欢看实际的例子来学习像 jQuery 这样的东西，所以我为你的问题做了一个例子，这样你就可以看到它是如何工作的：http: [//jsfiddle.net/bozdoz/LGyeq/](http://jsfiddle.net/bozdoz/LGyeq/)

逐行：

选择所有输入标签并在更改时调用函数：

```
$('input').change(function(){ 
```

创建一个变量来存储总计，计算小计：

```
var linetotals = 0; 
```

选择每个带有“lineTotal”类的元素（我添加了它，以便我们可以选择它们）：

```
$('.lineTotal').each(function(){ 
```

通过在同一个 tr 元素中查找输入元素来获取价格和数量（eq(#) 分别获取第一个和第二个元素）：

```
price = $(this).parents('tr').find('input').eq(0).val();
quantity = $(this).parents('tr').find('input').eq(1).val(); 
```

将 lineTotal 类元素设置为新的总计，并将总计添加到 lineTotals 变量：

```
$(this).val(price*quantity);
linetotals += price*quantity; 
```

});

将小计设置为 linetotals 变量的值：

```
 $('#total').val(linetotals);
});​ 
```

这是您可以做到的一种方式。这与偏好有很大关系。希望这是一个好的开始。

## 更新

回复：询问者对更通用代码的新请求

使用 CSS 属性选择器来选择输入字段。JSFiddle 使用以下代码更新：

```
$('input').change(function(){
    var linetotals = 0;
    $('[name^="price"]').each(function(){
        price = $(this).parents('tr').find('input').eq(0).val();
        quantity = $(this).parents('tr').find('input').eq(1).val();
        $(this).val(price*quantity);
        linetotals += price*quantity;
    });
    $('[name=subtotal]').val(linetotals);
});​ 
```

# spring - spring data rest：为什么所有内容都暴露在一般对象uri（例如/files/）中，而不仅仅是特定的uri（例如/files/1）

> ID：13430228
> 
> 赞同：1
> 
> 时间：2012-11-17T11:44:04.893
> 
> 标签：spring, spring-data-rest

我正在使用弹簧数据休息建立一个项目。公开我的域模型似乎可行，但我有一些奇怪的行为：

根据 wiki/docs，如果我访问像 /files/ 这样的 uri，我最终应该得到一组指向单个文件的链接。但是，在访问 uri /files/ 时，我不仅获得了文件的链接，还获得了文件对象的属性。

这很烦人，因为我将文件的内容作为 byte[] 并且在访问 /files/ 时最终传输了所有文件的所有内容

有谁知道如何关闭这种行为？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T20:33:56.780

好的，我自己找到了答案。我正在为其他有同样问题的人发布这个......

我必须在我的请求中使用标题：“接受：application/x-spring-data-compact+json”来获取我的存储库的紧凑表示......

就是这样...

# javascript - 在弹出窗口中打开 jQuery 生成的链接

> ID：13430229
> 
> 赞同：3
> 
> 时间：2012-11-17T11:44:05.733
> 
> 标签：javascript, jquery, popup, hyperlink, gcal

我正在为我的学校重新制作旧网站。请不要介意所有的 css 和 html 混乱，因为我正忙着这样做。另外，我不是javascript专家，所以...

现在，对于我的问题。

该网站使用谷歌日历来记录他们的活动等。在主页上，有一个带有即将发生的活动的小边栏。我不打算每隔一天更改一次，所以我遇到了这个 jQuery 的东西，它直接从日历中提取即将发生的事件。这是在我的页面上加载的：

```
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>
<script src="http://www.sint-jozefscollege.be/gallery3/minislideshow/js/jquery.minislideshow.4.0.min.js"></script>
<script src="/jquery.gcal_flow.js"></script>
<script src="/jquery.popupWindow.js"></script> 
```

这是它的外观：

```
 <div id="gcf-custom-template">
      <div class="gcf-header-block" style=" font-family: verdana; font-size: x-large;">
        <div class="gcf-title-block">
          <a href="/schoolkalender">Agenda</a>
        </div>
      </div>
      <div class="gcf-item-container-block" style=" font-size: 12px; margin-top: 8px;">
        <div class="gcf-item-block">
          <div class="gcf-item-header-block" style=" font-size: 14px; margin-top: 8px;">
<div class="gcf-item-title-block">
              <a class="gcf-item-link"><span class="gcf-item-daterange">00/00</span></a>
              <strong class="gcf-item-title" style=" float: right; width: 150px;">Item Title of Your event
</strong>
            <div style="display: block; clear: both;"></div>
</div>
          </div>
        </div>
      </div>
    </div> 
```

有了上面的东西，这个脚本就来了：

```
<script type="text/javascript">
  $('#gcf-custom-template').gCalFlow({
  calid: 'jb1p8523dur2d9qtrf0d2demcg%40group.calendar.google.com',
  maxitem: 4,
  mode: 'upcoming',
  daterange_formatter: function (start_date, allday_p) {
  function pad(n) { return n < 10 ? "0"+n : n; }
  return pad(start_date.getDate() + "/" + pad(start_date.getMonth()+1)) + ":";
  }
   });
</script> 
```

现在，我正在尝试让“您的活动的项目名称”中生成的链接在新选项卡中打开。我尝试使用这个脚本：

```
<script type="text/javascript"> 
 $('#link').popupWindow({ 
   height:500, 
   width:800, 
   top:50, 
   left:50 
  }); 
</script> 
```

我修改了 jquery.gcal_flow.js 文件以将 'id="link"' 添加到链接中，但它不起作用。如果我尝试使用未生成的另一个链接，它就可以正常工作。

欢迎任何帮助！PS：包含所有内容的页面：[http ://www.sint-jozefscollege.be/calendar1.html](http://www.sint-jozefscollege.be/calendar1.html)

编辑：实施的解决方案可在[http://www.sint-jozefscollege.be](http://www.sint-jozefscollege.be)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-17T12:45:47.927

我会说你的问题是当你的脚本绑定 popupWindows 时没有生成链接。因此，该事件永远不会受到约束。该插件似乎不支持委托事件，但您始终可以手动创建弹出窗口，使用[`.on()`](http://api.jquery.com/on/).

```
$(function() {
    $('body').on('click', '.link', function(e) {
        e.preventDefault();
        new_window = window.open($(this).attr('href'),'','height=500,width=800');
    });
}); 
```

您还会在这里注意到两件事。首先，是我把代码放在了[jQuery 就绪函数](http://api.jquery.com/ready/)中。您应该*始终*将所有与 jQuery 相关的代码放在 ready 函数中。其次，我使用`.link`而不是`#link`. ID 只能在文档中使用一次，如果需要多次使用，请改用类。

# python - 如何在 matplotlib 中获得笛卡尔坐标系？

> ID：13430231
> 
> 赞同：31
> 
> 时间：2012-11-17T11:44:24.923
> 
> 标签：python, matplotlib

我是使用 Python 绘图的新手，无法真正找到问题的答案：如何在 matplotlib 中获得笛卡尔坐标平面？我的意思是垂直参考线（坐标轴）以箭头结束，在原点（0,0）处相交，原点位于图的中心。

考虑一个用于做高中几何的飞机，以下是我需要实现的完美示例：

![使用笛卡尔坐标绘制](../Images/7ee936e7081c9bd2ebb94cd46de0b49c.png)

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2018-10-11T01:18:24.217

这是一个老问题，但我认为在今天的 matplotlib 版本中，关键字是[spines](https://matplotlib.org/gallery/ticks_and_spines/spine_placement_demo.html)。你会这样做：

```
ax = plt.gca()
ax.spines['top'].set_color('none')
ax.spines['bottom'].set_position('zero')
ax.spines['left'].set_position('zero')
ax.spines['right'].set_color('none') 
```

该链接提供了更多示例。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2020-08-22T17:25:21.160

这是绘制笛卡尔坐标系的另一种方法，基于已经给出的答案。

```
import numpy as np                 # v 1.19.2
import matplotlib.pyplot as plt    # v 3.3.2

# Enter x and y coordinates of points and colors
xs = [0, 2, -3, -1.5]
ys = [0, 3, 1, -2.5]
colors = ['m', 'g', 'r', 'b']

# Select length of axes and the space between tick labels
xmin, xmax, ymin, ymax = -5, 5, -5, 5
ticks_frequency = 1

# Plot points
fig, ax = plt.subplots(figsize=(10, 10))
ax.scatter(xs, ys, c=colors)

# Draw lines connecting points to axes
for x, y, c in zip(xs, ys, colors):
    ax.plot([x, x], [0, y], c=c, ls='--', lw=1.5, alpha=0.5)
    ax.plot([0, x], [y, y], c=c, ls='--', lw=1.5, alpha=0.5)

# Set identical scales for both axes
ax.set(xlim=(xmin-1, xmax+1), ylim=(ymin-1, ymax+1), aspect='equal')

# Set bottom and left spines as x and y axes of coordinate system
ax.spines['bottom'].set_position('zero')
ax.spines['left'].set_position('zero')

# Remove top and right spines
ax.spines['top'].set_visible(False)
ax.spines['right'].set_visible(False)

# Create 'x' and 'y' labels placed at the end of the axes
ax.set_xlabel('x', size=14, labelpad=-24, x=1.03)
ax.set_ylabel('y', size=14, labelpad=-21, y=1.02, rotation=0)

# Create custom major ticks to determine position of tick labels
x_ticks = np.arange(xmin, xmax+1, ticks_frequency)
y_ticks = np.arange(ymin, ymax+1, ticks_frequency)
ax.set_xticks(x_ticks[x_ticks != 0])
ax.set_yticks(y_ticks[y_ticks != 0])

# Create minor ticks placed at each integer to enable drawing of minor grid
# lines: note that this has no effect in this example with ticks_frequency=1
ax.set_xticks(np.arange(xmin, xmax+1), minor=True)
ax.set_yticks(np.arange(ymin, ymax+1), minor=True)

# Draw major and minor grid lines
ax.grid(which='both', color='grey', linewidth=1, linestyle='-', alpha=0.2)

# Draw arrows
arrow_fmt = dict(markersize=4, color='black', clip_on=False)
ax.plot((1), (0), marker='>', transform=ax.get_yaxis_transform(), **arrow_fmt)
ax.plot((0), (1), marker='^', transform=ax.get_xaxis_transform(), **arrow_fmt)

plt.show() 
```

![笛卡尔坐标系](../Images/ef01d76b9dd2fc0a220893e2ae4854d0.png)

请注意，根据我的经验，我没有添加显示点坐标的注释，它需要更多代码才能很好地定位它们并具有最小的重叠。要获得注释，最好使用[adjustText 包](https://github.com/Phlya/adjustText)或交互式图形库，例如[Plotly](https://github.com/plotly/plotly.py)。

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2012-11-17T12:55:24.953

如果您只想绘制一些点，散点图就是您想要的

```
from pylab import *

x = [0,2,-3,-1.5]
y = [0,3,1,-2.5]
color=['m','g','r','b']

scatter(x,y, s=100 ,marker='o', c=color)

show() 
```

对于漂亮的打印（带有箭头和虚线）：

```
from pylab import *
import matplotlib.pyplot as plt

x = [0,2,-3,-1.5]
y = [0,3,1,-2.5]
color=['m','g','r','b']

fig = plt.figure()
ax = fig.add_subplot(111)

scatter(x,y, s=100 ,marker='o', c=color)

[ plot( [dot_x,dot_x] ,[0,dot_y], '-', linewidth = 3 ) for dot_x,dot_y in zip(x,y) ] 
[ plot( [0,dot_x] ,[dot_y,dot_y], '-', linewidth = 3 ) for dot_x,dot_y in zip(x,y) ]

left,right = ax.get_xlim()
low,high = ax.get_ylim()
arrow( left, 0, right -left, 0, length_includes_head = True, head_width = 0.15 )
arrow( 0, low, 0, high-low, length_includes_head = True, head_width = 0.15 ) 

grid()

show() 
```

还有一些工作要做，但距离结果不远：

![在此处输入图像描述](../Images/a08101b42422bc66aac8ce23d1879ad9.png)

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2012-11-17T21:22:11.443

我认为 matplotlib 画廊中的这个例子应该让你足够接近：http: [//matplotlib.org/examples/axes_grid/demo_axisline_style.html](http://matplotlib.org/examples/axes_grid/demo_axisline_style.html)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2018-05-22T17:09:07.743

下面的代码将为您提供笛卡尔平面。

```
import matplotlib.pyplot as plt

def build_cartesian_plane(max_quadrant_range):
    """ The quadrant range controls the range of the quadrants"""
    l = []
    zeros = []
    plt.grid(True, color='b', zorder=0,)
    ax = plt.axes()
    head_width = float(0.05) * max_quadrant_range
    head_length = float(0.1) * max_quadrant_range
    ax.arrow(0, 0, max_quadrant_range, 0, head_width=head_width, head_length=head_length, fc='k', ec='k',zorder=100)
    ax.arrow(0, 0, -max_quadrant_range, 0, head_width=head_width, head_length=head_length, fc='k', ec='k', zorder=100)
    ax.arrow(0, 0, 0, max_quadrant_range, head_width=head_width, head_length=head_length, fc='k', ec='k', zorder=100)
    ax.arrow(0, 0, 0, -max_quadrant_range, head_width=head_width, head_length=head_length, fc='k', ec='k', zorder=100)
    counter_dash_width = max_quadrant_range * 0.02
    dividers = [0,.1,.2,.3,.4, .5, .6, .7, .8, .9, 1]
    for i in dividers:
        plt.plot([-counter_dash_width, counter_dash_width], [i*max_quadrant_range, i*max_quadrant_range], color='k')
        plt.plot([i * max_quadrant_range, i*max_quadrant_range], [-counter_dash_width, counter_dash_width], color='k')
        plt.plot([-counter_dash_width, counter_dash_width], [-i * max_quadrant_range, -i * max_quadrant_range], color='k')
        plt.plot([-i * max_quadrant_range, -i * max_quadrant_range], [-counter_dash_width, counter_dash_width], color='k')
        l.append(i * max_quadrant_range)
        l.append(-i * max_quadrant_range)
        zeros.append(0)
        zeros.append(0)

build_cartesian_plane(10)
plt.show() 
```

[代码的示例输出](https://i.stack.imgur.com/QVEpu.png)

# c# - WPF 显示带有参数的方法的成员路径

> ID：13430232
> 
> 赞同：1
> 
> 时间：2012-11-17T11:44:26.683
> 
> 标签：c#, wpf

我有一个 WPF 列表框，我将其绑定到一些元素（我无法自定义）。绑定本身也是一个密封类。

该元素有一个 ToString，它采用 CultureInfo 参数。我想绑定到那个特定的表示 - 通过传递那个参数（我将从正在运行的线程中获取它）。无论如何要指定绑定以显示该特定表示？

XAML：

```
<ListBox Height="212" HorizontalAlignment="Left" Margin="6,6,0,0" 
    Name="listBoxTriggers" VerticalAlignment="Top" Width="183" /> 
```

物品来源：

```
listBoxTriggers.ItemsSource = _triggers 
```

和后面的代码（我想调用的方法）

```
trigger.ToString(cultureInfo); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-17T14:31:45.920

[注意：在这个链接](https://stackoverflow.com/a/7197210/279516)上有一个使用转换器的好选择。

如果我理解正确，您希望您的 ListBox 使用特定的文化显示 ToString() 。虽然这可能是可能的（参见上面提到的链接），但一种解决方法是使用一个[DTO](http://en.wikipedia.org/wiki/Data_transfer_object)，它包含触发器的 ID 和您正在寻找的 ToString() 表示。

```
public class TriggerDto
{
    public int TriggerId { get; set; }
    public string TriggerName { get; set; }
} 
```

创建一个新列表，然后循环遍历所有触发器，添加新的 TriggerDto 对象。

```
List<TriggerDto> triggerDtos = new List<TriggerDto>();

foreach (Trigger trigger in _triggers)
{
    triggerDtos.Add(new TriggerDto() { Id = trigger.Id, TriggerName = trigger.ToString(cultureInfo) });
}

this.TriggerDtos = triggerDtos; 
```

将绑定设置为 TriggerDtos。

当用户选择一个 TriggerDto 时，您只需要使用它的 ID 来获取您想要使用的真实 Trigger 对象。

免责声明：此处可能存在拼写错误。我将代码直接输入到答案中，而不是在 Visual Studio 中。

# blackberry - 将 TableModel.addRow 中的数据插入 Blackberry TableView

> ID：13430234
> 
> 赞同：1
> 
> 时间：2012-11-17T11:45:01.803
> 
> 标签：blackberry, java-me, tableview, blackberry-eclipse-plugin, tablemodel

我需要创建一个需要 3 列并且可以有多行的表。我正在使用 BlackBerry API 版本 6。我已经调试了我的代码并且它给出了`IllegalArgumentException`. 我无法解决这个错误。

我的代码如下：

```
public class designTableLayout extends MainScreen{

    TableModel theModel = new TableModel();
    theView = new TableView(theModel);
    TableController theController = new TableController(theModel, theView,
                                                        TableController.FIELD_FOCUS);
    theView.setController(theController);

    HeaderTemplate theTemplate = new HeaderTemplate(theView, 1, 3);
    theTemplate.createRegion(new XYRect(0,0,1,1));
    theTemplate.createRegion(new XYRect(1,0,1,1));
    theTemplate.createRegion(new XYRect(2,0,1,1));
    theTemplate.setRowProperties(0, new TemplateRowProperties(60));
    theTemplate.setColumnProperties(0, new TemplateColumnProperties(40));
    theTemplate.setColumnProperties(1, new TemplateColumnProperties(40));
    theTemplate.setColumnProperties(2, new TemplateColumnProperties(40));
    theTemplate.useFixedHeight(true);
    theView.setDataTemplate(theTemplate);

    theModel.addRow(new String[]{"the","quick","brown"});// problem arises here
    theModel.addRow(new String[]{"jumps","over","the"});
    theModel.addRow(new String[]{"dog","the","quick"});
    add(theView);
} 
```

* * *

```
class HeaderTemplate extends DataTemplate {
    LabelField field1 = new LabelField("field1");
    LabelField field2 = new LabelField("field2");
    LabelField field3 = new LabelField("field3");

    public HeaderTemplate(DataView view,int rows,int columns){
        super(view, rows, columns);
    }

    public Field[] getDataFields(int modelRowIndex) {
         TableModel theModel = (TableModel) getView().getModel();

         //Get the data for the row.
         Object[] data = {field1, field2, field3};
         data = (Object[]) theModel.getRow(modelRowIndex);

         //Create a array to hold all fields.
         Field[] theDataFields = new Field[data.length];
         theDataFields[0] = new LabelField(field1/*, DrawStyle.ELLIPSIS*/);
         theDataFields[1] = new LabelField(field2/*, DrawStyle.ELLIPSIS*/);
         theDataFields[2] = new LabelField(field3/*, DrawStyle.ELLIPSIS*/);

         return theDataFields;
    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T16:06:12.587

我知道您可能正在使用其中一些代码来测试您的表格模型，但我认为您的模板应该看起来更像这样：

```
class HeaderTemplate extends DataTemplate {

    public HeaderTemplate(DataView view,int rows,int columns){
        super(view, rows, columns);
    }

    public Field[] getDataFields(int modelRowIndex) {
         TableModel theModel = (TableModel) getView().getModel();

         //Get the data for the row.
         Object[] data = (Object[]) theModel.getRow(modelRowIndex);

         //Create a array to hold all fields.
         Field[] theDataFields = new Field[data.length];
         theDataFields[0] = new LabelField((String)data[0], DrawStyle.ELLIPSIS);
         theDataFields[1] = new LabelField((String)data[1], DrawStyle.ELLIPSIS);
         theDataFields[2] = new LabelField((String)data[2], DrawStyle.ELLIPSIS);

         return theDataFields;
    }

} 
```

然后将您的数据添加为`Object[]`：

```
theModel.addRow(new Object[]{"the","quick","brown"}); 
```

[这是关于此的黑莓示例](http://docs.blackberry.com/en/developers/deliverables/18125/Table_Model_1328111_11.jsp)

# qt - Xlib 等价于 QPainter::translate

> ID：13430235
> 
> 赞同：2
> 
> 时间：2012-11-17T11:45:17.013
> 
> 标签：qt, user-interface, coordinates, xlib, coordinate-transformation

如何使用 xlib 函数来实现 QPainter::translate 功能。我希望 xlib 在绘制时为所有像素添加一些 xOffset、yOffset。

我可以保留两个变量 xOffset 和 yOffset 并在每次调用它们时将它们添加到绘图函数中。但我想像 QPainter::translate 那样做一次。

# c# - 使用 Windows 在系统托盘中启动应用程序，但通常由用户运行？

> ID：13430238
> 
> 赞同：0
> 
> 时间：2012-11-17T11:46:00.007
> 
> 标签：c#, startup, tray

我有一个需要与 Windows 一起运行的应用程序，我已经成功地做到了，但我需要它启动到系统托盘中，我也有它在做，但是当用户从桌面图标启动它时也会发生这种情况。

我现在面临的问题是让它在启动时在托盘中启动，同时允许用户打开应用程序而不会在启动时消失到托盘中。

我已经看到使用启动键中的启动开关来实现这一点，例如 c:\program.exe -h 和它的 -h 使应用程序在托盘中启动。

有没有这样的可能，或者有没有其他方法可以解决这个问题？

我考虑过诸如在第一次启动一天时更改的注册表项之类的事情，但是如果计算机关闭并再次打开，我想到的所有事情都会出现上述故障。除了为启动创建另一个应用程序之外，我不确定如何实现这一点。

请注意：应用程序可以被终止，因此它会检查现有进程并在发现不合适时将其最大化，这将带来其他问题。这也在一定程度上完成了，因为一次只能运行一个实例，但如前所述，我可以让它在第一次运行时启动到托盘，但如果它被终止并再次启动，它将再次进入托盘，这就是我想避免。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-17T20:57:23.870

由 C# 回答[- 是否可以创建一个可以使用参数从命令行运行的 Windows 窗体应用程序？](https://stackoverflow.com/questions/1521606/c-sharp-is-it-possible-to-create-a-windows-forms-application-that-can-run-from)以及 Hans Passant 使用逗号选项所说的话。

这是我放入 Program.cs 类的代码：

```
[STAThread]
        static void Main(string[] args)
        {
            Application.EnableVisualStyles();
            Application.SetCompatibleTextRenderingDefault(false);
            Main_Form main = new Main_Form();
            main.Show();
            foreach (string s in args)
            {
                if (s == "-h")
                {
                    main.Hide();
                }
            }
            Application.Run();
        } 
```

改编自[Hide form at launch的代码集](https://stackoverflow.com/questions/522154/hide-form-at-launch)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-17T11:55:55.650

该应用程序应该在注册表中有一个条目`HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Windows\CurrentVersion\Run`

以及如何使用 c# 编写注册密钥

```
Microsoft.Win32.RegistryKey key;
key = Microsoft.Win32.Registry.CurrentUser.CreateSubKey("Names");
key.SetValue("Name", "Isabella");
key.Close(); 
```

# svg - 缩放旋转对象以适合特定矩形

> ID：13430241
> 
> 赞同：1
> 
> 时间：2012-11-17T11:47:25.607
> 
> 标签：svg

如何找到旋转的 Rect 元素的比例，以使其适合特定大小的边界矩形（未旋转）？

基本上，我想要 getBoundingClientRect 的反面，setBoundingClientRect。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-17T14:20:21.597

首先，您需要获取应用于元素的变换，使用`<svg>.getTransformToElement`, 以及`rect.getBBox()`您可以计算实际大小的结果。宽度，您可以将比例因子计算为所需大小并将其添加到矩形的变换中。有了这个，我的意思是你应该将实际的变换矩阵与一个新的比例矩阵相乘。

但是：这是对您对 AABB 感兴趣的情况的描述，表示轴对齐的边界框，`getBoundingClientRect`对于真实的旋转边界框，交付的结果是什么，因此在这种情况下，矩形本身需要计算 (并应用）宽度和/或高度的比例因子。

祝你好运……</p>

编辑：：

```
function getSVGPoint( x, y, matrix ){
    var p = this._dom.createSVGPoint();
    p.x = x;
    p.y = y; 
    if( matrix ){
        p = p.matrixTransform( matrix );
    }
    return p;
}

function getGlobalBBox( el ){
    var mtr = el.getTransformToElement( this._dom );
    var bbox = el.getBBox();
    var points = [
        getSVGPoint.call( this, bbox.x + bbox.width, bbox.y, mtr ),
        getSVGPoint.call( this, bbox.x, bbox.y, mtr ),
        getSVGPoint.call( this, bbox.x, bbox.y + bbox.height, mtr ),
        getSVGPoint.call( this, bbox.x + bbox.width, bbox.y + bbox.height, mtr ) ];

    return points;

}; 
```

使用此代码，我曾经做过类似的技巧...`this._dom`指代一个`<svg>`和`el`一个元素。第二个函数返回一个点数组，从右上角开始，逆时针围绕 bbox 进行。

**编辑：**

的结果`<element>.getBBox()`不包括应用于元素的变换，我猜新的所需大小是绝对坐标。因此，您需要做的第一件事就是使 »BBox« 全球化。

您可以通过以下方式计算 sx 和 sy 的比例因子：

```
var sx = desiredWidth / globalBBoxWidth;
var sy = desiredHeight / globalBBoxHeight;

var mtrx = <svg>.createSVGMatrix();
mtrx.a = sx;
mtrx.d = sy; 
```

比您必须将此矩阵附加到元素的转换列表，或将其与实际连接并替换它，这取决于您的实现。这个技巧最令人困惑的部分是确保您在**同一**转换中使用坐标计算比例因子（绝对值很方便）。在此之后，您将缩放应用于 的变换`<element>`，不要替换整个矩阵，将其与实际应用的矩阵连接，或将其作为新项目附加到变换列表中，但请确保不要将其插入现有项目之前. 在矩阵连接的情况下，请确保保留乘法的顺序。

最后的步骤取决于您的实现，您如何处理转换，如果您不知道您有哪些可能性，请查看[此处](http://www.w3.org/TR/SVG/coords.html)并特别注意实现此操作所需的 DOMInterfaces。

# javascript - 视图页面无法识别加载中的空元素

> ID：13430243
> 
> 赞同：0
> 
> 时间：2012-11-17T11:47:37.457
> 
> 标签：javascript, asp.net-mvc

我有一个 javascript 函数，它基于 DropDown 在我的页面中生成链接。我在两个地方检查 javascript 函数；当 DropDown 使用属性“onchange”更改时，以及页面加载时。当页面在 viewbag 上没有元素的情况下加载时会生成错误，我的 javascript 无法识别空元素以生成没有 viewbag 上的信息的链接。

```
<p>Pesquisar por: @Html.DropDownList("tipoPesquisa", ViewBag.DropDownPesquisa as SelectList, new { onchange = "alteraFiltro()" }) 

<div id="dadosFornecedor">
        @if (ViewBag.CurrentFornecedor != null)
        {
            <fieldset>
                <legend>@ViewBag.CurrentFornecedor.RazaoSocial</legend>
                <b>Razão Social:</b> @ViewBag.CurrentFornecedor.RazaoSocial <b>Endereço:</b> @ViewBag.CurrentFornecedor.Endereco
                @Html.Hidden("idFornecedor", new { IdFornecedor = ViewBag.CurrentFornecedor.IdFornecedor })
                <input type="button" class="btn" onclick="removerFornecedor();" value="Remover Fornecedor" />
                <br />
                <br />
            </fieldset>
            <br />

        }
    </div>

<script type="text/javascript">
    $(function () {

       alteraFiltro();
    });

    function removerFornecedor() {
        var div = $("#dadosFornecedor");
        var hidden = $("#idFornecedor");
        div.empty();

        div.append("<input type='hidden' name='deletarFornecedor' value='true' />")

    }

        function alteraFiltro() {
            var urlCodigo = $("#linkCodigo");
            var urlLancamento = $("#linkLancamento");
            var urlPagamento = $("#linkPagamento");
            var urlFornecedor = $("#linkFornecedor")
            var dropValue = $("#tipoPesquisa").val();
            var hidden = $("#idFornecedor");

            if (hidden.val() == "" || hidden.val() == null || hidden == null) {
                urlCodigo.attr("href", "saidasDiversas?sortOrder=@ViewBag.CodigoSortParm&currentFilter=@ViewBag.CurrentFilter&currentDrop=" + dropValue + "");
                urlLancamento.attr("href", "saidasDiversas?sortOrder=@ViewBag.DataLancamentoSortParm&currentFilter=@ViewBag.CurrentFilter&currentDrop=" + dropValue + "");
                urlPagamento.attr("href", "saidasDiversas?sortOrder=@ViewBag.DataPagamentoSortParm&currentFilter=@ViewBag.CurrentFilter&currentDrop=" + dropValue + "");
                urlFornecedor.attr("href", "saidasDiversas?sortOrder=@ViewBag.FornecedorSortParm&currentFilter=@ViewBag.CurrentFilter&currentDrop=" + dropValue + "")
            } else{
                urlCodigo.attr("href", "saidasDiversas?sortOrder=@ViewBag.CodigoSortParm&idFornecedor=@ViewBag.CurrentFornecedor.IdFornecedor&currentFilter=@ViewBag.CurrentFilter&currentDrop=" + dropValue + "");
                urlLancamento.attr("href", "saidasDiversas?sortOrder=@ViewBag.DataLancamentoSortParm&idFornecedor=@ViewBag.CurrentFornecedor.IdFornecedor&currentFilter=@ViewBag.CurrentFilter&currentDrop=" + dropValue + "");
                urlPagamento.attr("href", "saidasDiversas?sortOrder=@ViewBag.DataPagamentoSortParm&idFornecedor=@ViewBag.CurrentFornecedor.IdFornecedor&currentFilter=@ViewBag.CurrentFilter&currentDrop=" + dropValue + "");
                urlFornecedor.attr("href", "saidasDiversas?sortOrder=@ViewBag.FornecedorSortParm&idFornecedor=@ViewBag.CurrentFornecedor.IdFornecedor&currentFilter=@ViewBag.CurrentFilter&currentDrop=" + dropValue + "")
            }

        }

    </script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-17T16:59:04.437

如果问题是由于`ViewBag.CurrentFornecedor`第一次加载视图时没有值引起的，请尝试按照以下方式更改您的 javascript：

```
 var hidden = $("#idFornecedor");

 if (hidden.val() == "" || hidden.val() == null || hidden == null) {

 // ...

 }
 else {

    urlCodigo.attr("href", "saidasDiversassortOrder=@ViewBag.CodigoSortParm&idFornecedor=" 
         + @{ViewBag.CurrentFornecedor != null ? ViewBag.CurrentFornecedor.IdFornecedor : -1} 
        + "&currentFilter=@ViewBag.CurrentFilter&currentDrop=" + dropValue + "");

    // ...

} 
```

# emacs - Emacs 冻结向 ecb-source-path 添加远程流浪者路径

> ID：13430245
> 
> 赞同：2
> 
> 时间：2012-11-17T11:47:55.480
> 
> 标签：emacs, tramp, emacs-ecb

我正在尝试通过修改Emacs 24.2、ecb 2.40、OS X 10.8.2 下文件中的`ecb-source-path`变量来将远程目录添加到我的 ecb 目录窗格。`.emacs`以下通过 emacs 中的 tramp 工作：

```
 /username@server.com:/home/username
   /username@server:/home/username      (have set up an alias server->server.com)
   /server.com:/home/username           (username is same as local user, so can be omitted)
   /server:/home/username 
```

我不确定我的语法是否错误，但我尝试了以下方法来添加到 ecb 的路径：

```
 (setq ecb-source-path (quote("/username@server.com:/home/username"))) (**)
   (setq ecb-source-path (quote("/server.com:/home/username")))
   (setq ecb-source-path (quote("/scpc:username@server.com:/home/username"))) 
```

这导致emacs在发出时挂起`ecb-activate`，消息缓冲区中没有显示错误消息

```
 (setq ecb-source-path (quote("/username@server:/home/username")))
   (setq ecb-source-path (quote("/server:/home/username")))
   (setq ecb-source-path (quote("username@server.com:/home/username"))) 
```

导致消息：`Warning: Source-path <ENTERED PATH> is not accessible - ignored!`

有没有人这样做并且知道添加远程路径的正确语法`ecb-source-path`？根据文档，`(**)`应该可以工作。如果语法确实正确，是否有任何提示可以调试可能发生的事情并导致 emacs 冻结？或者这是ecb本身的问题？

# android - 如何获取最近拨打的号码

> ID：13430246
> 
> 赞同：3
> 
> 时间：2012-11-17T11:48:00.080
> 
> 标签：android, phone-call

我正在开发一个应用程序，我需要在其中获取 5 个最近拨打的号码。我可以按降序对号码进行排序，因此最近拨打的号码排在第一位。我正在使用以下代码来获取最近的数字。

```
dialledCall = (TextView)findViewById(R.id.dialledCall);

              String strOrder = CallLog.Calls.DATE + " DESC";
              Cursor mCallCursor = getApplicationContext().getContentResolver().query(CallLog.Calls.CONTENT_URI,
                      null,
                      CallLog.Calls.TYPE 
                      ,null,
                      strOrder);
              mCallCursor.moveToFirst();
              do {
                  if( i >5 )
                      break;
                  mobileNumber =   mCallCursor.getString(mCallCursor.getColumnIndex(android.provider.CallLog.Calls.NUMBER));
              number += mobileNumber + "\n";

              i++;
              }
              while (mCallCursor.moveToNext());
         dialledCall.setText(number); 
```

有了这个，我可以按最近的顺序对数字进行排序，而且我刚刚获取了最后 5 个数字。但查询返回所有号码，我的意思是已拨、未接和已接。但在这里我只想要拨打的号码。

我知道`CallLog.Calls.TYPE`上面的查询与此有关。

我尝试传递空值，但它返回所有数字。

我也尝试`CallLog.Calls.OUTGOING_TYPE`过代替它，但它给出了不允许 int 值的错误，它应该是一个字符串值。

关于如何替换上述代码的任何建议，以便只获得拨打的电话。

**注意-**我已经查看了[https://stackoverflow.com/a/10480569/1626878](https://stackoverflow.com/a/10480569/1626878)，但它没有提供仅获取已拨号码的解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-17T11:58:11.987

您可以使用 CallLog 类来获取此信息（请参阅[http://developer.android.com/reference/android/provider/CallLog.Calls.html](http://developer.android.com/reference/android/provider/CallLog.Calls.html)）。

您对 getLastOutgoingCall 方法感兴趣，该方法返回最后拨打的电话号码。

检查通话记录。您可以轻松访问它。做类似的事情，

定义，公开`Cursor mCallCursor`；

然后定义要从通话记录中获取的字段，

```
public static final String[] STR_FIELDS = {
        android.provider.CallLog.Calls.NUMBER, 
        android.provider.CallLog.Calls.TYPE,
        android.provider.CallLog.Calls.CACHED_NAME,
        android.provider.CallLog.Calls.CACHED_NUMBER_TYPE,
        android.provider.CallLog.Calls.DATE,
        android.provider.CallLog.Calls.DURATION, android.provider.CallLog.Calls.CACHED_NUMBER_LABEL,android.provider.CallLog.Calls.NUMBER
        }; 
```

设置顺序，public static final String STR_ORDER = android.provider.CallLog.Calls.DATE + "DESC";

调用光标。

```
mCallCursor = getContentResolver().query(
            android.provider.CallLog.Calls.CONTENT_URI,
            STR_FIELDS,
            null,
            null,
            STR_ORDER); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-13T08:24:23.407

我已经解决了这个问题，所以我将它发布给未来的访问者。

```
 String mobileNumber="";
    int i = 1;
    String number = "";
    TextView dialledCall;
        @Override
        public void onCreate(Bundle savedInstanceState)
        {
            super.onCreate(savedInstanceState);
            setContentView(R.layout.main);
            dialledCall = (TextView)findViewById(R.id.dialledCall);

    //              String[] strFields = { android.provider.CallLog.Calls.NUMBER, android.provider.CallLog.Calls.TYPE, android.provider.CallLog.Calls.CACHED_NAME,         android.provider.CallLog.Calls.CACHED_NUMBER_TYPE, android.provider.CallLog.Calls.DURATION     };
                  String strOrder = CallLog.Calls.DATE + " DESC";
                  Cursor mCallCursor = getApplicationContext().getContentResolver().query(CallLog.Calls.CONTENT_URI,
                          null,
                          CallLog.Calls.TYPE + " = " + CallLog.Calls.OUTGOING_TYPE
                          ,null,
                          strOrder);
                  mCallCursor.moveToFirst();
                  do {
                      if( i >5 )
                          break;
                      mobileNumber =   mCallCursor.getString(mCallCursor.getColumnIndex(android.provider.CallLog.Calls.NUMBER));
                  number += mobileNumber + "\n";

                  i++;
                  }
                  while (mCallCursor.moveToNext());
             dialledCall.setText(number);
        } 
```

在查询中，这里`CallLog.Calls.TYPE + " = " + CallLog.Calls.OUTGOING_TYPE`将拨出的电话分开。

# ios - 执行 NSURLRequest 和响应委托与使用 dispatch_async 有什么区别？

> ID：13430247
> 
> 赞同：4
> 
> 时间：2012-11-17T11:48:10.743
> 
> 标签：ios, nsurlconnection, dispatch

我正在努力解决异步性问题；调度，多线程，运行循环等。

有什么区别：

1) 在给定的方法中创建一个 NSURLRequest 和 NSURLConnection，并让它执行并且我们响应委托方法（didReceiveResponse、didReceiveData、connectionDidFinishLoading 等），以及

2）创建一个块并让它 dispatch_async ？

使用第一种方法，我可以访问委托方法似乎很棒（我仍然可以访问那些使用 dispatch 的方法吗？），并且委托方法的执行在触发（或接近它？）时执行

使用块/调度方法，我猜块是在它的线程中同步处理的？然后回到主线程处理结果？我一直在看的示例代码：

```
 dispatch_async(kBgQueue, ^{
    NSData* data = [NSData dataWithContentsOfURL: 
      kLatestKivaLoansURL];
    [self performSelectorOnMainThread:@selector(fetchedData:) 
      withObject:data waitUntilDone:YES];
}); 
```

那么，“self performSelector ....”是在收到数据后执行的吗？（我之前的意思是同步 - 也许是错误的术语）。块的下一行将我们送回主线程。

目的是什么，或者为什么会有“waitUntilDone:YES”？是不是因为如果它不存在，其他事情可能不会发生在主线程中？

上面的第一种方法还是只在主线程上执行吗？

最后，在对网页进行 JSON 查询的情况下，每种方法的优缺点是什么？一种方法比另一种方法有什么好处吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-17T18:11:50.527

1) 当你使用 NSURLConnection 时，无论是在你的主线程中还是在 NSOperation 中，你都可以完全控制在任何时候停止它，并跟踪它的进度。当各种事情发生时，您得到的是委托方法，但您不是坐等某事完成。如果你想在任何时候停止它，你发送它取消，然后你可以释放（或 nil）它并忘记它。

2）所以看看这个。如果您在主线程中执行此调用，它将一直等到它成功或失败。一旦开始，它必须运行成功或失败。如果在主线程中，这将阻塞您的 UI。将它放在一个块中并在其他线程上运行它，同样的事情也会发生 - 所选线程将阻塞，直到方法结束。使用'self'发送结果将保留self。因此，如果 self 是一个 UIViewController，那么即使你弹出它（认为它会被删除），它也会一直存在直到这个方法完成，天知道会发生什么。这种用法非常危险，可能经常工作，但当设备具有糟糕的 inet 连接（例如）时会发生灾难性的失败。

等待直到做是同步线程。如果您想知道该方法已在主线程上运行，然后才继续，请使用 YES。如果您只希望方法排队并且您已经完成（就像在这种情况下），您只需使用 NO。

该方法肯定会在主线程上 - 这个 Apple 向您承诺这种方法。

3）JSON

我认识的大多数用户都使用来自 NSOperations 或块的 NSURLConnections。可以取消操作（然后会取消连接） - 因此无论发生多少事情，您都可以处理按下“返回”按钮。如果查询失败，您可以查看 html 状态（您是否收到 400 或 500 错误？超时？等）

在 github 上有一个开源项目，几乎没有 200 行代码，它提供了一个优雅且易于使用的帮助类来运行操作（带有演示代码）：[/NSOperation-WebFetches-MadeEasy](https://github.com/dhoerl/NSOperation-WebFetches-MadeEasy)。我个人在商店中的 8 多个应用程序中使用此代码并取得了巨大成功 - 单个 OperationsRunner 通常同时进行数百次提取，并且该应用程序有多个类同时运行 OperationsRunners。

如果您在 NSOperation 中处理 JSON，您将在多核设备上获得真正的加速。

# javascript - 如何在 jquery 事件中返回对象方法

> ID：13430251
> 
> 赞同：1
> 
> 时间：2012-11-17T11:48:26.127
> 
> 标签：javascript, jquery, oop

我试图在`jQuery.change()`文本字段的事件上返回一个对象方法，这里是代码：

```
var Utente = function(indice){

    this.Indice = indice;
    this.Dati = new Array();

    this.initialize = function() {
        this.Dati['stato_civile'] = this.getField('stato_civile').val();
        this.onChange('stato_civile',this.checkObbligatorieta);
    }

    this.getField = function(name) {
        return $('#'+indice+name);
    }

    this.onChange = function(field, func) {

        this.getField(field).live('change',function() {
            return func.apply(); 
        });

    }

    this.checkObbligatorieta = function() {

         this.Dati['stato_civile'] = this.getField('stato_civile').val();

         [...]

    }

    this.initialize();

} 
```

使用它我得到该字段正确`"#stato_civile"`返回函数`this.checkObbligatorieta`，但它给了我一个错误：**`this.getField('stato_civile').val()`不是函数

我认为这与范围严格相关，但我无法弄清楚。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-17T11:52:46.030

那是因为你没有`func()`在与调用者相同的上下文中调用，所以`this`没有绑定到同一个对象。

您可以通过传递`this`给[apply()](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Function/apply)来解决问题：

```
this.onChange = function(field, func) {
    this.getField(field).live("change", function() {
        return func.apply(this);
    });
}; 
```

# ruby - 批量分配的弃用警告属于铁路上的关联 3.2.8

> ID：13430255
> 
> 赞同：2
> 
> 时间：2012-11-17T11:48:47.453
> 
> 标签：ruby, ruby-on-rails-3, ruby-on-rails-3.2

我最近将一个应用程序从 Rails 3.0.10 更新到 Rails 3.2.8，我们开始在我们的规范中收到此弃用警告：

弃用警告：您正在尝试创建属性`profissional'. Writing arbitrary attributes on a model is deprecated. Please just use`attr_writer` 等（从 .../spec/models/agendamento/agendamento_spec.rb:109 中的块（3 级）调用）

有问题的行是：`Agendamento::Agenda.new(descricao: 'Agenda', profissional: profissional, situacao: :ativa)`。Agenda 与profissional 有belongs_to 关联。

两个数据库在上次迁移时都是最新的，因此其他类似问题的答案并不能解决我的问题。

这真的会被弃用，并且预计不会在未来版本的 Rails 上工作，还是我错过了什么？

# algorithm - 理解主定理

> ID：13430256
> 
> 赞同：8
> 
> 时间：2012-11-17T11:48:53.503
> 
> 标签：algorithm, master-theorem

通用形式：`T(n) = aT(n/b) + f(n)`

所以我必须将 n^logb(a) 与 f(n) 进行比较

如果`n^logba`>`f(n)`是**案例 1**并且`T(n)=Θ(n^logb(a))`

如果`n^logba`<`f(n)`是**情况 2**并且`T(n)=Θ((n^logb(a))(logb(a)))`

那是对的吗？还是我误解了什么？

那么案例3呢？什么时候适用？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2015-06-19T20:36:06.213

## 解决递归的主定理

重复发生在解决复杂问题的分而治之的策略中。

**它解决了什么问题？**

*   它解决了表单的重复问题`T(n) = aT(n/b) + f(n)`。
*   `a`应该大于或等于1。这意味着问题至少被简化为一个较小的子问题一次。至少需要一次递归。
*   `b`应该大于 1。这意味着在每次递归时，问题的大小都会减小到更小的大小。如果`b`不大于 1，这意味着我们的子问题不是较小的。
*   `f(n)`对于相对较大的 值，必须为正`n`。

考虑下图：

![在此处输入图像描述](../Images/eea4a041d36b7338448fbd53abfc5e72.png)

假设我们有一个尺寸问题`n`要解决。在每一步，问题都可以分为`a`子问题，每个子问题的规模都较小，其中规模缩小了`b`.

上面的简单表述意味着一个大小的问题`n`可以分成`a`大小相对较小的子问题`n/b`。

另外，上图显示，最后当我们多次划分问题时，每个子问题会很小，可以在恒定时间内解决。

对于以下推导，请考虑`log`base `b`。

假设那`H`是树的高度，那么`H = logn`。叶数 = `a^logn`.

*   第 1 级完成的总工作量：`f(n)`
*   第 2 级完成的总工作量：`a * f(n/b)`
*   第 1 级完成的总工作量：`a * a * f(n/b2)`
*   最后一级完成的总工作量：`number of leaves * θ(1)`。这等于`n^loga`

## 大师定理的三种情况

### 情况1：

现在让我们假设每个级别的操作成本都增加了一个重要因素，并且当我们到达叶级别时， 的值`f(n)`变得多项式地小于值`n^loga`。那么整体运行时间将在很大程度上受到最后一级的成本的支配。因此`T(n) = θ(n^loga)`。

### 案例二：

让我们假设每个级别的操作成本大致相等。在那种情况下`f(n)`大致等于`n^loga`。因此，总运行时间将`f(n)`乘以关卡总数。

`T(n) = θ(n^loga * logn)`哪里`k`可以`>=0`。一棵树`logn`的高度是多少`k >= 0`。

注意：这里k+1是log in logn的基础

### 案例3：

让我们假设每个级别上的操作成本在每个级别上都减少了一个显着因素，并且当我们到达叶级别时，值`f(n)`变得多项式大于值`n^loga`。那么整体运行时间将主要受第一级成本的支配。因此`T(n) = θ(f(n))`。

* * *

如果您对更详细的阅读和练习示例感兴趣，请访问我的博客条目[解决重复的主方法](http://techieme.in/solving-recurrences-master-method/)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-26T21:40:54.100

我想你误解了它。 **如果 n^logba > f(n) 是案例 1 并且 T(n)=Θ(n^logb(a))**

在这里你不应该担心 f(n) 结果，你得到的是 T(n)=Θ(n^logb(a))。f(n) 是 T(n) 的一部分。如果你得到结果 T(n)，那么该值将包含 f(n)。所以，没有必要考虑那部分。

如果您不清楚，请告诉我。

# typescript - 在 TypeScript 中构建大型复杂模块

> ID：13430260
> 
> 赞同：6
> 
> 时间：2012-11-17T11:49:30.193
> 
> 标签：typescript

我正在 TypeScript 中创建一个复杂的模块（解析 PE 文件结构，类似于 Mono.Cecil 所做的，但在 TS/JS 中并且不太复杂）。

问题是如何最好地将该功能放在文件/文件夹/模块维度中。

我从类似于 C# 的结构开始，每个类都在自己的文件中，命名空间（模块）对应于或多或少独立的功能集并位于子文件夹中。

现在在 TypeScript 中有几个问题。或者问题可能与我的愚蠢有关？

1.  单独文件中的每个类都有利于开发，但对编译输出没有意义。没有人愿意携带 24 个文件而不是一个。
2.  如果我将所有内容编译到一个文件中（tsc -out），每个单独文件的内容几乎都是独立发出的，即使它们都属于同一个模块。TypeScript 使用一些时髦的 hacky 语法构建该模块，而不是我手动编写的（这会将它们全部粘贴在一个模块定义的立即调用函数中）。
3.  我希望我的东西可以在 Node.js 和浏览器中工作。对于 Node，我需要使用“导出模块”来添加所有内容，但对于浏览器，典型的用法只是生成whatever.js 并让页面包含它——这意味着我应该去掉“导出模块”。

处理它的最佳方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-17T18:35:19.957

我目前正在使用 require.js 和 amd 模块来构建代码。每个类都在一个文件中，只需要一个 require.js 引导程序。我不使用节点，所以不能在这里发表评论，但它可能值得一看。 [http://blorkfish.wordpress.com/2012/10/23/typescript-organizing-your-code-with-amd-modules-and-require-js/](http://blorkfish.wordpress.com/2012/10/23/typescript-organizing-your-code-with-amd-modules-and-require-js/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-12T09:34:46.613

Typescript 1.0+ 对此的回答是使用使用 CommonJs 语法的模块

传递`tsc`旗帜

```
--module commonjs 
```

生成 CommonJS 样式模块并在 Typescript 文件中，使用 require 语法导入资源

```
import A = require('./A')  //no .ts in the name 
```

要在浏览器中使用，请使用[browserify](http://browserify.org/)，很可能与[grunt-browserify相关联](https://www.npmjs.org/package/grunt-browserify)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-06-09T08:38:03.320

如果您不想要 browserify（参见 BGR 的回答），您可以创建 2 个构建过程，一个用于 CommonJS（节点），另一个用于 RequireJS（浏览器）。2 个构建可以将其结果输出到其他文件夹（例如`projectRoot/dist/server`）。地狱般的 Grunt/Gulp 项目，但并非不可能。

为了更好的可用性，我还将创建一个没有类/接口的**包装文件**，它只包含其他文件并选择要导出的内容。我刚刚得到了一些提示： [TypeScript export import interface](https://stackoverflow.com/questions/30712638/typescript-export-imported-interface)

# sql - 在命令行执行一系列 SQL 命令

> ID：13430261
> 
> 赞同：3
> 
> 时间：2012-11-17T11:49:55.310
> 
> 标签：sql, sql-server-2005, batch-file, database-backups

我想从命令行对 SQL Server 2005 数据库运行一系列 SQL 语句。

当我启动第一个语句时

```
osql -E -S <Server_Name>\<Instance_Name> -d <Server_Name> 
```

`1>`在我无法继续通过脚本后，它将从那里提示窗口。

如何给`1>`提示输入我的意思是给下一条 SQL 语句

```
BACKUP DATABASE  TO DISK = 'c:\test.bak' WITH INIT,SKIP 
```

最后`exit`到那个提示

我尝试使用 && 但我想这仅适用于命令行命令。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-17T11:55:17.507

您正在寻找 sqlcmd 工具上的 -Q 开关（不要在 sqlserver 2005 或更高版本上使用 osql）（键入 sqlcmd /? 以查看所有选项）或在[msdn上查找](http://msdn.microsoft.com/en-us/library/ms162773.aspx)

```
sqlcmd -E -S <Server_Name>\<Instance_Name> -d <Server_Name> -Q "BACKUP DATABASE TO DISK = 'c:\test.bak' WITH INIT,SKIP" 
```

或者，您可以创建一个 sqlscript 文件，将所有要执行的 sql 语句放入其中。假设您将文件命名为 myscript.sql，则 osql 命令将如下所示：

```
 sqlcmd -E -S <Server_Name>\<Instance_Name> -d <Server_Name> -i myscript.sql 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-17T20:59:36.767

也许您可能想尝试从这个论坛的其他问题中出现的一个小技巧（不幸的是被删除了）。

您可以直接在命令下面的行中插入命令的输入，然后执行文件不是作为批处理文件，而是作为输入 por cmd.exe（这类似于 Linux 中的*here 文档*）。例如：

脚本.TXT：

```
@echo off
osql -E -S <Server_Name>\<Instance_Name> -d <Server_Name>
BACKUP DATABASE  TO DISK = 'c:\test.bak' WITH INIT,SKIP
exit 
```

以这种方式执行以前的“脚本”：

```
cmd < script.TXT 
```

如果您执行此测试，请报告结果...

安东尼奥

# java - Android 模拟器（无法绑定到本地 8601 进行调试）

> ID：13430263
> 
> 赞同：5
> 
> 时间：2012-11-17T11:50:16.983
> 
> 标签：java, android, windows, emulation

我有 Windows 8、JDK 7 (7u9) 和所有适用于 Android 的 SDK。当我尝试启动 Android Emulator 时，我在 DDMS 控制台上有以下消息：

```
[2012-11-17 12:34:32 - ddms] Can't bind to local 8601 for debugger 
[2012-11-17 12:34:39 - ddms] Can't bind to local 8606 for debugger
[2012-11-17 12:34:40 - ddms] Can't bind to local 8613 for debugger
[2012-11-17 12:34:40 - ddms] Can't bind to local 8619 for debugger
[2012-11-17 12:34:40 - ddms] Can't bind to local 8632 for debugger
[2012-11-17 12:34:40 - ddms] Can't bind to local 8635 for debugger
[2012-11-17 12:34:42 - ddms] Can't bind to local 8606 for debugger
[2012-11-17 12:34:44 - ddms] Can't bind to local 8638 for debugger
[2012-11-17 12:34:48 - ddms] Can't bind to local 8641 for debugger 
```

我的 AVD 以 Google API (10) 为目标，我的项目是一个测试谷歌地图的简单项目。它有 Google APIs [Android 2.3.3] 作为项目构建目标。

在 StackOverflow 中寻找解决方案我找到了这个答案：[我应该担心 DDMS 控制台日志消息“无法绑定到本地 nnnn 以进行调试器”吗？](https://stackoverflow.com/questions/2937532/should-i-worry-about-ddms-console-log-messages-cant-bind-to-local-nnnn-for-deb)

我做到了，但我仍然有这个“问题”。我该如何解决？

编辑

[已解决] 另一个重要的事情：我需要从谷歌获取密钥才能使用它的地图，但是当我插入指纹并尝试生成密钥时，谷歌没有给我它。我该如何解决这个其他问题？也许它与第一个有关？

这个问题是JDK 7引起的，获取MD5指纹的正确命令是：

keytool -keystore **-v** C:\Users\USER_NAME.android\debug.keystore -list

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-23T08:35:02.933

经过大量研究，我发现消息“无法绑定到本地...”的问题是由于JRE版本（最新7）造成的。删除它并安装 JRE 6.38 版就足够了。

# mysql - MYSQL PHP SYNTAX 别名连接

> ID：13430264
> 
> 赞同：0
> 
> 时间：2012-11-17T11:50:18.200
> 
> 标签：mysql, join, syntax, alias

我正在尝试对两个执行左连接的表进行查询，其中两个表中有共同的字段名称。我的模糊理解是 MYSQL 不记得某些表的首字母，所以你最好使用别名。但是，以下查询在别名 muserid 上引发了未知列错误。

将不胜感激有关如何修复的建议。

```
$sql= "SELECT c.id as cid, c.*,m.userid as muserid
FROM `contacts` c
LEFT JOIN `mycontacts` m
ON cid = personid
WHERE muserid = '$userid' "; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-17T12:00:27.423

这不是关于`JOIN`。在 MySQL 中，`SELECT`语句在`WHERE`and`FROM`子句之后进行评估，因为您不能在`WHERE`子句中引用别名。试试这个：

```
SELECT *
FROM
(
    SELECT c.id as cid, c.*,m.userid as muserid
    FROM `contacts` c
    LEFT JOIN `mycontacts` m ON c.id = m.personid
) t
WHERE muserid = '$userid'; 
```

这是 MySQL 查询执行顺序¹：

> *   FROM 子句
> *   WHERE 子句
> *   GROUP BY 子句
> *   HAVING 子句
> *   选择子句
> *   ORDER BY 子句。

^(**1：**^([**MySQL查询执行顺序**](http://nijumohan.com/mysql-query-execution-order/)))

# c# - 如何在 C# 中创建和使用自定义 Awaitable？

> ID：13430266
> 
> 赞同：4
> 
> 时间：2012-11-17T11:50:20.137
> 
> 标签：c#, .net, async-await

我正在尝试在`await Thread.SleepAsync()`不创建任何额外线程的情况下实现自定义等待执行。

这是我所拥有的：

```
 class AwaitableThread : INotifyCompletion
    {
        public AwaitableThread(long milliseconds)
        {
            var timer = new Timer(obj => { IsCompleted = true; }, null, milliseconds, Timeout.Infinite);
        }

        private bool isCompleted = false;

        public bool IsCompleted
        {
            get { return isCompleted; }
            set { isCompleted = value; }
        }

        public void GetResult()
        {}

        public AwaitableThread GetAwaiter() { return this; }

        public void OnCompleted(Action continuation)
        {
            if (continuation != null)
            {
                continuation();
            }
        }
    } 
```

以下是睡眠的工作原理：

```
 static async Task Sleep(int milliseconds)
    {
        await new AwaitableThread(milliseconds);
    } 
```

`OnCompleted`问题是这个函数立即返回，即使 in`IsCompleted`仍然是假的。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-17T13:15:00.670

完全实现用于生产的等待模式是一项棘手的工作——除其他外，您需要捕获执行上下文。[Stephen Toub 关于这方面的博文](http://blogs.msdn.com/b/pfxteam/archive/2012/06/15/executioncontext-vs-synchronizationcontext.aspx)有更多细节。在许多情况下，搭载`Task<T>`或`Task`可能更容易使用`TaskCompletionSource`. 例如，在您的情况下，您可以编写如下等价物`Task.Delay`：

```
public Task MyDelay(int milliseconds)
{
    // There's only a generic TaskCompletionSource, but we don't really
    // care about the result. Just use int as a reasonably cheap version.
    var tcs = new TaskCompletionSource<int>();

    Timer timer = new Timer(_ => tcs.SetResult(0), null, milliseconds,
                            Timeout.Infinite);
    // Capture the timer variable so that the timer can't be garbage collected
    // unless the task is (in which case it doesn't matter).
    tcs.Task.ContinueWith(task => timer = null);

    return tcs.Task;
} 
```

您现在`await`可以执行该任务，就像您可以等待`Task.Delay`.

# r - 我自己的存储库有问题：它在 R 2.15.2 中找不到我的包

> ID：13430271
> 
> 赞同：3
> 
> 时间：2012-11-17T11:51:01.790
> 
> 标签：r, cran

我在我的服务器[cran.gforge.se](http://cran.gforge.se)上创建了一个 CRAN 存储库，它在 2.15.2 之前曾经像一个魅力一样工作，但现在我收到一个错误，抱怨该包不存在。

我安装 Gmisc 包的代码：

```
reps = c("http://ftp.sunet.se/pub/lang/CRAN",
         "http://cran.gforge.se")
install.packages("Gmisc", repos=reps, dependencies=TRUE) 
```

这给出了错误：

> install.packages 中的警告：包“Gmisc”不可用（对于 R 版本 2.15.2）

我试图查看这个似乎非常相似但没有任何帮助的[SO 问题。](https://stackoverflow.com/questions/11927266/r-setting-up-my-own-cran-repository?rq=1)[该手册](http://cran.r-project.org/doc/manuals/R-admin.html#Setting-up-a-package-repository)在这个主题上有点稀缺，但目前我在上传之前做了以下 write_PACKAGES：

```
library(tools)
write_PACKAGES("C:\\Software\\cran", verbose=TRUE, subdirs=TRUE, type="win.binary")
write_PACKAGES("C:\\Software\\cran", verbose=TRUE, subdirs=TRUE, type="source")
write_PACKAGES("C:\\Software\\cran\\src\\contrib", verbose=TRUE, subdirs=TRUE)
write_PACKAGES("C:\\Software\\cran\\bin\\windows\\contrib\\2.15", verbose=TRUE, subdirs=TRUE, type="win.binary")
write_PACKAGES("C:\\Software\\cran\\src\\contrib\\2.15", verbose=TRUE, subdirs=TRUE, type="source") 
```

我还尝试了[这个 SO question](https://stackoverflow.com/questions/13132111/my-package-doesnt-work-for-r-2-15-2)中建议的解决方案：

```
options(install.packages.check.source = FALSE)
install.packages("Gmisc", repos=reps, dependencies=TRUE) 
```

由于我有一个并行源代码，这应该不是问题还是我错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-17T12:44:13.260

您可以尝试放入`Gmisc_3.5.tar.gz`然后`/src/contrib`执行 `install.packages("Gmisc", repos="http://cran.gforge.se", type="source")`吗？

# webkit - 如何在 webkit 浏览器中使用代理

> ID：13430272
> 
> 赞同：2
> 
> 时间：2012-11-17T11:51:25.533
> 
> 标签：webkit

我有用于使用代理连接到互联网的应用程序，并用于该 webkit webbrowser。问题是 webkit webbrowser 不接受代理。那么我怎样才能让 webkit webbrowser 像 vs 2012 附带的普通 webbrowser 一样使用代理呢？任何帮助将不胜感激。

# perl - 在分配之前测试哈希条目是否存在的更好方法

> ID：13430273
> 
> 赞同：3
> 
> 时间：2012-11-17T11:52:05.423
> 
> 标签：perl, parsing, perl-data-structures

我正在寻找一种更好的方法来首先“测试”哈希键在使用之前是否存在。我目前正在编写一个事件日志解析器，它将十六进制数字解码为字符串。由于我无法确定我的解码表是否包含十六进制数字，我首先需要检查密钥是否存在于哈希中，然后再将值分配给新变量。所以我经常做的是：

```
if ($MEL[$i]{type} eq '5024') {
  $MEL[$i]{decoded_inline} = $decode_hash{checkpoint}{"$MEL[$i]{raw}[128]"}
    if exists ($decode_hash{checkpoint}{"$MEL[$i]{raw}[128]"})
} 
```

我不喜欢的是该表达式`$decode_hash{checkpoint}{"$MEL[$i]{raw}[128]"}`在我的代码中出现了两次。上面的行有更好或更短的版本吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-17T12:08:38.410

我怀疑这是否称得上“不错”，但我认为它正在实现不两次引用该表达式的目标。我不确定这是否值得这种痛苦，请注意：

```
my $foo = $decode_hash{checkpoint}; 
my $bar = $MEL[$i]{raw}[128]; 
if ($MEL[$i]{type} eq '5024') { 
  $MEL[$i]{decoded_inline} = $foo->{$bar} 
    if exists ( $foo->{$bar} ); 
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-18T05:00:31.310

是的，有一种更简单的方法。您知道您只能将引用存储在数组或哈希中，对吗？嗯，这有一个很好的副作用。您可以引用深度散列或数组槽，然后将它们视为标量引用。不幸的副作用是它会自动激活该插槽，但是如果您总是要分配给该插槽，并且只想先进行一些检查，那么避免一遍又一遍地输入内容并不是一个坏方法——因为以及重复索引结构。

```
my $ref = \$decode_hash{checkpoint}{"$MEL[$i]{raw}[128]"};
unless ( defined( $$ref )) { 
    ...
    $$ref = {};
    ...
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-17T15:55:21.150

只要现有的哈希元素不能有未定义的值，我就会写这个

```
if ($MEL[$i]{type} eq '5024') {
  my $value = $decode_hash{checkpoint}{$MEL[$i]{raw}[128]};
  $MEL[$i]{decoded_inline} = $value if defined $value;
} 
```

（请注意，您不应该在哈希键周围加上双引号。）

# javascript - 等待加载背景图像

> ID：13430275
> 
> 赞同：2
> 
> 时间：2012-11-17T11:52:37.243
> 
> 标签：javascript, jquery, html, image

我在我的 javascript 中得到了这一行：

```
$("#botbg").css("background-image", "url(/png/" + epage + ".jpg)"); 
```

“botbg”是一个div。是否可以将回调附加到此函数？我只是希望其他操作等到完成。

这些没有成功：

```
$("#botbg").css("background-image", "url(/png/" + epage + ".jpg)").load(function(){
//...
});

$("#botbg").css("background-image", "url(/png/" + epage + ".jpg)").one("load", function(){
//...
});

$("#botbg").css("background-image", "url(/png/" + epage + ".jpg)").ready(function(){
//...
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-17T12:08:00.857

尝试

```
var img = new Image();
img.src = url;
img.onload = function( ) {
    $("#botbg").css("background-image", "url(" + url + ")");
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-17T12:01:05.277

在 jQuery 中，回调函数只应用于`asynchronous`任务，因为`css`函数是一个`synchronized`函数，所以没有回调这样的东西，因此你在`.css()`函数之后放置的每一行代码都会被立即调用。

但是，您可以跟踪背景图像的负载，但即使这样做，也不能保证您的代码将在图像显示后执行，特别是在浏览器需要一些时间才能显示图像的大`render`图像中。要跟踪您的图像是否已加载，您可以执行以下操作：

```
$img = $('<img src="/png/'+epage+'.jpg" id="myImg"/>');//now it will work
$img.bind('load',function(){
    $("#botbg").css("background-image", "url(/png/" + epage + ".jpg)");
}); 
```

这是一个功能[小提琴](http://jsfiddle.net/brunovieira/nj6Z6/)。

我希望它有所帮助。干杯

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-17T12:00:41.450

不，你不能。

您可以做的最好的事情是将图像加载到临时 div 中，然后在调用加载回调时设置背景图像，如下所示：

```
<div id="tmp"><img src="/png/yourimage.jpg" /></div>

$("#tmp").load(function(){
    $("#botbg").css("background-image", "url(/png/yourimage.jpg)");
}); 
```

**编辑**

调用 .load() 函数的新方法

```
<div id="tmp"><img src="/png/yourimage.jpg" /></div>

$("#tmp").on("load", function() {
    $("#botbg").css("background-image", "url(/png/yourimage.jpg)");
}); 
```

# objective-c - 为什么按钮不能在动画中移动？

> ID：13430277
> 
> 赞同：0
> 
> 时间：2012-11-17T11:53:32.870
> 
> 标签：objective-c, ios, animation, uianimation

我想点击`_transitButton`调用`onTransitButtonDidClick`移动`_rightView`。问题是按钮不能按照我的设置`self.transitButton.frame = CGRectMake(0, 0, 30, 20);`。

## 更新：

`_transitButton`原帧`(0,280,30,20)` 的结果是，按钮从原帧移动到`(0,0,30,20)`，但很快又回到原点。为什么它回去了？

为什么以及如何解决这个问题？

```
- (IBAction)onTransitButtonDidClick:(id)sender {
    [UIView animateWithDuration:0.3
                      delay:0.0
                    options:UIViewAnimationCurveEaseInOut
                 animations:^{
                     [_rightView setFrame:CGRectMake(40,0,320,548)];
                     [_transitButton setFrame:CGRectMake(0,0,30,20];
                 }
                 completion:nil];
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-18T10:14:30.643

您在 xib 中使用自动布局，并且约束将按钮保持在原位。对于动画，它似乎可以工作，因为没有为动画评估约束。

所以要么关闭这个xib的AUTOLAYOUT，要么修改适当的约束。

（我用一个小示例应用程序尝试了这个，就是这样。）

# xcode - 如何在Cocos和box2d中添加独立移动到主层的背景图像

> ID：13430281
> 
> 赞同：1
> 
> 时间：2012-11-17T11:54:06.850
> 
> 标签：xcode, background, cocos2d-iphone, box2d, layer

我想为侧滚动游戏添加背景，该游戏以与主游戏层不同的速率移动。最好的方法是什么？我可能想要 2 个背景层，每个滚动的速度都比另一个慢，以便在玩家移动时给人一种深度感。

另外，创建图层并直接控制它的最佳方法是什么？目前创建了一个图层，但我无法在代码的其他部分访问它。这是默认情况下完成的方式，这是我使用的方式：

```
+(CCScene *) scene
{
// 'scene' is an autorelease object.
CCScene *scene = [CCScene node];

// 'layer' is an autorelease object.
HelloWorldLayer *layer = [HelloWorldLayer node];

// add layer as a child to scene
[scene addChild: layer];

// return the scene
return scene;
} 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-17T13:17:36.217

CCParallaxNode 对你有好处。

```
 // background layer: another image
    CCSprite *background = [CCSprite spriteWithFile:@"background.png"];
    background.scale = 1.5f;
    background.anchorPoint = ccp(0,0);

    // create a void node, a parent node
    CCParallaxNode *voidNode = [CCParallaxNode node];

    [voidNode addChild:background z:-1 parallaxRatio:ccp(0.4f,0.5f) positionOffset:CGPointZero];

    [voidNode addChild:tilemap z:1 parallaxRatio:ccp(2.2f,1.0f) positionOffset:ccp(0,-200)];

    [voidNode addChild:cocosImage z:2 parallaxRatio:ccp(3.0f,2.5f) positionOffset:ccp(200,800)];

    [self addChild:voidNode]; 
```

参考 Cocos2D 示例中的 ParallaxTest。

# asp.net - ASP.NET Web API 将 http 响应投射到 json 数组

> ID：13430282
> 
> 赞同：6
> 
> 时间：2012-11-17T11:54:09.410
> 
> 标签：asp.net, asp.net-web-api

我的代码在调用 REST URL 时工作正常：http:
[//api.feedzilla.com/v1/categories.json](http://api.feedzilla.com/v1/categories.json)

但是当我调用以下 URL 时出现错误：
[http ://api.feedzilla.com/v1/categories/15/articles.json?count=36&since=2012-11-15&client_source=&order=relevance&title_only=0&](http://api.feedzilla.com/v1/categories/15/articles.json?count=36&since=2012-11-15&client_source=&order=relevance&title_only=0&)

错误：

```
{"Cannot deserialize the current JSON object (e.g. {\"name\":\"value\"}) into type 'System.Collections.Generic.IEnumerable`1[Nitin.News.DAL.Resources.Article]' because the type requires a JSON array (e.g. [1,2,3]) to deserialize correctly.\r\nTo fix this error either change the JSON to a JSON array (e.g. [1,2,3]) or change the deserialized type so that it is a normal .NET type (e.g. not a primitive type like integer, not a collection type like an array or List<T>) that can be deserialized from a JSON object. JsonObjectAttribute can also be added to the type to force it to deserialize from a JSON object.\r\nPath 'articles', line 1, position 12."} 
```

我的代码如下：

```
 public class Article
    {
        public string publish_date { get; set; }
        public string source { get; set; }
        public string source_url { get; set; }
        public string summary { get; set; }
        public string title { get; set; }
        public string url { get; set; }
    }
    public IEnumerable<Article> Get()
    {
        HttpClient client = new HttpClient();
        client.BaseAddress = new Uri("http://api.feedzilla.com/v1/");

        //Add an Accept header for JSON format.
        client.DefaultRequestHeaders.Accept.Add(new MediaTypeWithQualityHeaderValue("application/json"));

        // call the REST method
        HttpResponseMessage response = client.GetAsync("http://api.feedzilla.com/v1/categories/2/articles.json??count=36&since=2012-11-15&client_source=&order=relevance&title_only=0&").Result;  // Blocking call!
        if (response.IsSuccessStatusCode)
        {
            // Parse the response body. Blocking!
            return response.Content.ReadAsAsync<IEnumerable<Article>>().Result;

            //wont work
            //string JSON =response.Content.ReadAsStringAsync().Result;
            //return JsonConvert.DeserializeObject<IEnumerable<T>>(JSON);
        }
        else
        {
            throw new Exception(string.Format("Data access faild,{0} ({1}) method:{2}", (int)response.StatusCode, response.ReasonPhrase, MethodURL));
        }
    } 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-11-17T12:31:04.643

您的对象层次结构中需要另一个级别...即包含 IEnumerable 的根。

[在http://json2csharp.com/](http://json2csharp.com/)将 JSON 运行到工具中会生成以下代理类：

```
public class Enclosure
{
    public int length { get; set; }
    public string media_type { get; set; }
    public string uri { get; set; }
}

public class Article
{
    public string author { get; set; }
    public string publish_date { get; set; }
    public string source { get; set; }
    public string source_url { get; set; }
    public string summary { get; set; }
    public string title { get; set; }
    public string url { get; set; }
    public List<Enclosure> enclosures { get; set; }
}

public class RootObject
{
    public List<Article> articles { get; set; }
    public string description { get; set; }
    public string syndication_url { get; set; }
    public string title { get; set; }
} 
```

您只需将代码更改为此：

```
// Parse the response body. Blocking!
return response.Content.ReadAsAsync<RootObject>().Result.articles; 
```

显然去掉你不需要的任何属性。只是以为我会出于兴趣向他们展示。

# asp.net - 编写 CSS 以在 ASP.NET 捆绑中生存的指南

> ID：13430283
> 
> 赞同：0
> 
> 时间：2012-11-17T11:54:15.943
> 
> 标签：asp.net, css, minify

当我为我的 ASP.NET MVC 4 网站创建样式表时，在调试/开发模式下一切正常。

一旦我在 IIS 上部署网站，在发布配置中，css 的某些部分并没有应用于元素，因为它们根本不存在于添加到页面的单个缩小的 .css 文件中。

使我的声明更具体 - 例如，包括 id > class 或类似的东西通常可以解决问题，但是编写 css 样式以便它们提供给客户端并且不会被 ASP.NET 缩小过滤掉的一般规则是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-17T12:32:32.763

如果您谈论的是 ASP.NET 捆绑，默认情况下它将按字母顺序捆绑 CSS 文件。确保文件始终以正确顺序呈现的一种简单方法是在文件名上使用前缀，例如：

```
01.first-file.css
02.second-file.css
03.third-file.css
04.fourth-file.css 
```

话虽如此，让您的声明更具体，从而减少对文件顺序的依赖可能是一个好主意。

# c# - 在我的 dll 中，我通过事件公开了日志消息。如何使用日志消息正确更新表单上的列表框？

> ID：13430284
> 
> 赞同：1
> 
> 时间：2012-11-17T11:54:20.860
> 
> 标签：c#, winforms, multithreading

在我的 dll 中，我公开了一个事件，如下所示：

```
 public delegate void LogMsgEventHandler(object sender, LogEventArgs e);

        public event LogMsgEventHandler newLogMessage;

        public class LogEventArgs : EventArgs
        {
            public string logMsg;
        }

        protected virtual void OnChanged(LogEventArgs e)
        {
            if (newLogMessage != null)
                newLogMessage(this, e); 
        } 
```

各种方法触发事件以记录操作细节。在使用 dll 的主窗体上，我将任何日志消息输出到列表框：

```
 slotUtil.newLogMessage += new slotUtils.LogMsgEventHandler(slotUtil_newLogMessage); 
```

..

```
 void slotUtil_newLogMessage(object sender, slotUtils.LogEventArgs e)
        {
            lbDebug.Items.Add(e.logMsg);
        } 
```

问题是如果日志事件触发得太快，表单就会冻结。我认为这是一个线程问题？我怎样才能修复这个表单更新流畅的设计？这是一个糟糕的设计吗？我的备用设计 ID 也将所有日志记录存储在 dll 中的私有字符串中，然后仅在调用特定方法时转储日志。想法？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-17T12:40:09.160

如果您的 dll 中的类实例不在另一个线程中，则这不是线程问题。事件处理程序

```
void slotUtil_newLogMessage(object sender, slotUtils.LogEventArgs e)
        {
            lbDebug.Items.Add(e.logMsg);
        } 
```

在注册它的同一个线程中执行。

因此，如果您的实例在 UI 线程中，则此事件处理程序也在 UI 线程中执行。它将新项目添加到触发新列表框重绘的列表框。如果事件触发的速度比绘制发生的速度快，那么事件处理程序将堆积在队列中等待 Invalidates 完成。如果是这种情况，你应该尝试，至少做这样的事情：

```
System.Windows.Forms.Timer t;
public Form1()
{
    InitializeComponent();

    t = new System.Windows.Forms.Timer();
    t.Interval = 1000;
    t.Tick += new EventHandler(t_Tick);
}

void t_Tick(object sender, EventArgs e)
{
    for(int i = 0;i<count;i++)//you must add here only those valid strings, can't use foreach
        lbDebug.Items.Add(item);
    count = 0;
}

static int count = 0;
static string[] items = new string[5];
void slotUtil_newLogMessage(object sender, slotUtils.LogEventArgs e)
{
            t.Stop();
            items[count++] = e.logMsg;
            if (count >= items.Length)
            {
                foreach (string item in items)
                    lbDebug.Items.Add(item);
                count = 0;
            }
            else
            {
                t.Start();
            }
 } 
```

当五个日志准备好或在最后一个日志之后经过一秒钟时，将向列表框添加项目。在将它们添加到列表框之前，您可以在数组中添加任意数量的日志（只需更改其大小）。

# matlab - Matlab：查找所需边界之间的矩阵值

> ID：13430285
> 
> 赞同：0
> 
> 时间：2012-11-17T11:54:25.673
> 
> 标签：matlab, sorting, matrix

我有一个按升序排序的矩阵。

```
S = 25;
RT = zeros(S,2);
  for i = 1:S;
    for j = 1:i;
    R = i *j;
    T = R + j;
    RT(j,:) = [R T];
    end

  end
sortRT = sortrows(RT, [1 2]);
disp(sortRT); 
```

我想找到每列值低于 500（对于 R）和 490（对于 T）的 sortRT 元素，并将这些值放在矩阵中。可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-17T12:42:01.073

只需使用[find](http://www.mathworks.nl/help/matlab/ref/find.html)：

```
idx = find(sortRT(:,1)<500 & sortRT(:,2)<490)

idx' = 

 1  2  3  4  5  6  7  8  9  10  11  12  13  14  15  16  17  18 
```

这些是 和 的`R<500`行`T<490`。您当然可以将这两者分开：

```
idxR500 = find(sortRT(:,1)<500);
idxT490 = find(sortRT(:,2)<490); 
```

如果您只是要复制元素或行，那么 find 甚至没有必要，您可以使用[逻辑索引](http://www.mathworks.nl/company/newsletters/articles/Matrix-Indexing-in-MATLAB/matrix.html)：

```
R500 = sortRT(find(sortRT(:,1)<500) , 1); 
```

是相同的

```
R500 = sortRT(sortRT(:,1)<500 , 1); 
```

这会复制第一列的元素，如果要复制整行，请使用[冒号运算符](http://www.mathworks.nl/help/matlab/ref/colon.html)：

```
R500 = sortRT(sortRT(:,1)<500 , :); 
```

# mod-rewrite - 使用 mod_rewrite 的基本重定向

> ID：13430290
> 
> 赞同：0
> 
> 时间：2012-11-17T11:54:47.470
> 
> 标签：mod-rewrite, redirect

我想使用`mod_rewrite`.

当有人打开[http://aswt.mobileworldindia.com](http://aswt.mobileworldindia.com)时 ，他们将被自动重定向到[http://www.mobileworldindia.com/panels/mobile/index.php?subdomain=aswt](http://www.mobileworldindia.com/panels/mobile/index.php?subdomain=aswt)

请注意，[http://aswt.mobileworldindia.com](http://aswt.mobileworldindia.com)不是一个实际的子域，根本不存在，我也不想拥有它。我只想在我的网站上有一个重定向。

尝试了以下代码但没有用，谁能告诉我我错在哪里。

```
RewriteEngine On
RewriteBase /

RewriteCond %{HTTP_HOST} ^(.+)\.sellingsellingsold\.co.uk$
RewriteRule ^$ /index.php?subdomain=%1 [L,R=301] 
```

这是在 sell sellsold 的根目录上上传的，我正在尝试打开[http](http://aswt.sellingsellingsold.co.uk) ://aswt. sell sellsold.co.uk 。请帮我整理一下。自从我尝试实现重定向以来已经 2 周了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-17T11:59:38.227

在主服务器配置或`.htaccess`文件中是这样的。使用服务器配置是首选且更可靠。

```
RewriteEngine On
RewriteCond %{HTTP_HOST} ^(aswt)\.mobileworldindia\.com$
RewriteRule ^$ /panels/mobile/index.php?subdomain=%1 [L,R=301] 
```

如果您想从任何可能的子域重定向，而不仅仅是“aswt”。使用 (.+) 代替 (aswt)。

# php - 使用 preg_replace 删除标签内的空间

> ID：13430291
> 
> 赞同：0
> 
> 时间：2012-11-17T11:54:50.027
> 
> 标签：php, preg-replace

有谁知道如何使用 preg_replace 来更改以下字符串

```
<a href="http://www.ulr .  php" target="   _blank"> http://www.url/thank  . php </ a> 
```

进入这个

```
<a href="http://www.ulr.php" target="_blank">http://www.url/thank.php</a> more text 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-17T12:07:00.753

```
<?php
$str='<a href="http://www.ulr .  php" target="   _blank"> http://www.url/thank  . php </ a>';
$res=preg_replace('/\s+\.\s+/','.',$str);
echo $res; 
```

# java - Java 7：在没有堆栈跟踪的情况下抛出异常

> ID：13430292
> 
> 赞同：1
> 
> 时间：2012-11-17T11:54:50.400
> 
> 标签：java, scala, stack-trace, suppress

**EDIT2**
@paradigmatic 提出了一个很好的建议，即重定向而不是抛出异常；这解决了日志记录问题。Play 2 中的问题是重定向需要在所谓的`Action`范围内发生，而日期解析器调用并非总是如此。

作为一种解决方法，我使用了 Play 的全局拦截器，大概相当于 Java servlet 过滤器。

```
val ymdMatcher = "\\d{8}".r // matcher for yyyyMMdd URI param
val ymdFormat = org.joda.time.format.DateTimeFormat.forPattern("yyyyMMdd")
def ymd2Date(ymd: String) = ymdFormat.parseDateTime(ymd)

override def onRouteRequest(r: RequestHeader): Option[Handler] = {
  import play.api.i18n.Messages
  ymdMatcher.findFirstIn(r.uri) map{ ymd=>
    try { ymd2Date( ymd); super.onRouteRequest(r) }
    catch { case e:Exception => // kick to "bad" action handler on invalid date 
      Some(controllers.Application.bad(Messages("bad.date.format"))) 
    }
  } getOrElse(super.onRouteRequest(r))
} 
```

**编辑**
这里有一点可以使用的上下文：

```
// String "pimp": transforms ymdString.to_date call into JodaTime instance
class String2Date(ymd: String) {
  def to_date = {  
    import play.api.i18n.Messages
    try{ ymdFormat.parseDateTime(ymd) } 
    catch { case e:Exception => throw new NoTrace(Messages("bad.date.format")) }
  }
  val ymdFormat = org.joda.time.format.DateTimeFormat.forPattern("yyyyMMdd")
}
@inline implicit final def string2Date(ymd: String) = new String2Date(ymd) 
```

和一个测试自定义异常处理程序：

```
public class NoTrace extends Exception {
  static final long serialVersionUID = -3387516993124229948L;

  @Override
  public Throwable fillInStackTrace() {
      return null;
  }      
  public NoTrace(String message) {
    super(message);
  }
} 
```

在无效的 yyyyMMdd 字符串上调用日期解析器会将 30 行堆栈跟踪记录到日志中（这发生在 Play 框架/Netty 容器的上游，优于默认的 100 行跟踪）：

```
"20120099".to_date 
```

**原始**
有一个问题，我的 application.log 充满了与 uri 日期解析器操作相关的错误，如果给定有效的`yyyyMMdd`uri 日期，该操作应该成功。

然而，一些用户试图通过输入无效日期来规避这一点，以期获得免费访问仅限付费订阅者的内容。这是没有意义的，因为它根本不起作用，但无论如何，我的应用程序日志中有这些错误跟踪的 MB 数。

有没有办法将一个真正修剪`Exception`的日志扔到日志中？我找到[了这个 SO 答案](https://stackoverflow.com/a/2318231/185840)，但在我的应用程序中，它看起来像容器（Netty 上的 Play 框架）进入混合状态并将其自己的 30 行堆栈跟踪记录到日志中（30 行优于 100 行，但仍有 29 行太多）

同样，我发现了这个关于 Java 7 的[线程和抑制堆栈跟踪的新选项；](https://stackoverflow.com/a/11434494/185840)然而，由于某种原因，尽管在 Java 1.7 上，Eclipse 配置为 Java 1.7，但只有 Throwable 的旧 2 参数方法可用（当我单击 Throwable 类时，我确实看到了 4 参数方法；也许是 Scala 2.9.2 库问题？）

无论如何，理想情况下，我可以简单地记录一条*1 行异常消息*，而不是厨房水槽。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2018-12-10T05:24:58.940

只需在您的自定义异常类中覆盖此方法：

```
@Override
public Throwable fillInStackTrace() {
    return this;
} 
```

添加此方法后，您的跟踪方法将不会打印

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-17T11:59:32.183

您的问题是，尽管您可以抑制自己的代码抛出的异常的堆栈跟踪，但对于框架将包含的异常，您无能为力。我能看到的唯一途径是根本不允许框架捕获您的异常（进行您自己的顶级处理）或调整日志配置。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-17T12:13:00.253

我认为你有两个选择：

1.  控制日志记录以不保存某些异常的堆栈跟踪。
2.  编写一个后处理器，从日志文件中过滤掉跟踪。

除非您面临磁盘空间不足的危险，否则我认为#2 是更好的选择，因为如果您确实有错误，您可以返回完整日志并查看所有异常历史记录。

想法 #2 背后的理念是磁盘空间很便宜，但在调试期间信息可能很宝贵。记录大量数据。通常，在将日志写入磁盘后使用脚本检查日志。

例如，如果有一种您从没想过会看到的日志条目，但如果它确实出现则需要立即采取行动，请编写一个搜索它的脚本，如果找到它就给您发送一封电子邮件。

这种方法中最有用的脚本形式之一是删除堆栈跟踪行。通常，您只需要知道发生了哪些异常，堆栈跟踪占用了大量屏幕空间而不会告诉您太多。如果您确实需要调查异常，请返回完整日志，找到异常行，并查看堆栈跟踪以及异常之前发生的情况。

如果您的日期异常过多，请让脚本甚至删除异常行。如果您想跟踪它们发生的频率，请运行一个每小时计算日期异常的脚本。

这种脚本通常需要几分钟的时间，用您最喜欢的支持正则表达式的脚本语言进行编程。

# html - 在jsp页面中显示当前日期

> ID：13430293
> 
> 赞同：0
> 
> 时间：2012-11-17T11:54:59.667
> 
> 标签：html, jsp

我想以 html 形式生成当前日期并将其存储在变量**currentDate**中。当我写它时，如果用户输入文本区域，它就可以正常工作。但我想存储当前日期（用户无需输入）并将其存储在变量**currentDate**中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-17T11:58:17.043

在jsp中使用隐藏变量如果是jsp

JSP HTML：

```
 <input type="hidden" name="currentDate" id="currentDate" value="<%=new Date()%>">
    <div id="div1"></di> 
```

JAVASCRIPT：

```
function onLoad()
  {
   document.getElementById('div1').innerHTML ='<%=new Date()%>';
  } 
```

在 html 中使用隐藏变量 如果是 HTML ，调用这个 onLoad 表单

HTML：

```
<input type="hidden" name="currentDate" value="">
<div id="div1"></di> 
```

JAVASCRIPT：

```
 function onLoad()
    {
    var month = dateObj.getUTCMonth();
    var day = dateObj.getUTCDate();
    var year = dateObj.getUTCFullYear();

    newdate = year + "/" + month + "/" + day;
    document.getElementById('currentDate').value=newdate;
    document.getElementById('div1').innerHTML =newdate;
    } 
```

# xaml - WinRT 缩放和椭圆，但保持居中

> ID：13430297
> 
> 赞同：2
> 
> 时间：2012-11-17T11:55:37.003
> 
> 标签：xaml, windows-runtime, winrt-xaml

```
 <Ellipse HorizontalAlignment="Center" Height="238" Stroke="Black" StrokeThickness="3" VerticalAlignment="Top" Width="300">
        <Ellipse.RenderTransform>
            <TransformGroup>
                <ScaleTransform ScaleX="1.3" CenterX="0.5" />

            </TransformGroup>

        </Ellipse.RenderTransform>
    </Ellipse> 
```

我试图让一个椭圆在屏幕中央伸展，但它总是向右伸展——我一直在玩 CenterX，认为这是在设置中心点？但它没有任何效果。

有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-17T12:26:39.343

您需要将Ellipse 上的[RenderTransformOrigin](http://msdn.microsoft.com/en-us/library/windows/apps/windows.ui.xaml.uielement.rendertransformorigin.aspx)`0.5,0.5`设置为以使其居中：

```
<Ellipse RenderTransformOrigin="0.5,0.5" 
     HorizontalAlignment="Center" Height="238" Stroke="Black" 
     StrokeThickness="3" VerticalAlignment="Top" Width="300">
    <Ellipse.RenderTransform>
        <TransformGroup>
            <ScaleTransform ScaleX="1.3" CenterX="0.5" />
        </TransformGroup>
    </Ellipse.RenderTransform>
</Ellipse> 
```

# android - 按钮单击时无法动画到有效的地理点

> ID：13430299
> 
> 赞同：1
> 
> 时间：2012-11-17T11:55:51.433
> 
> 标签：android, android-mapview, geopoints

我正在制作的应用程序的一部分需要谷歌地图。我希望用户能够在edittext中输入一些搜索字符串，然后按下搜索按钮，地图将动画到第一个结果。

当我按下按钮时，应用程序搜索并获取第一个结果并将其放入一个地理点，以便程序的这一部分工作。但是当我尝试动画到那个点时，应用程序崩溃了。

这是我成功导航到“冰岛达尔维克”位置的 onCreate 函数。

```
public class LocationPicker extends MapActivity {
    static GeoPoint point;
    static MapController mc;
    static MapView mapView;
    private EditText location;
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_location_picker);
        MapView mapView = (MapView) findViewById(R.id.mapview);
        mapView.setBuiltInZoomControls(true);
        location = (EditText)findViewById(R.id.locationString);
        mc = mapView.getController();
        String tmp = "Dalvík, Iceland";
        try {
            point = searchLocation(tmp);
        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
        mc.animateTo(point);
        mc.setZoom(14); 
        MapOverlay mapOverlay = new MapOverlay();
        List<Overlay> listOfOverlays = mapView.getOverlays();
        listOfOverlays.clear();
        listOfOverlays.add(mapOverlay);   

        mapView.invalidate();

    } 
```

我的按钮点击代码是，并且要清楚 System.out.println(point) 打印有效点。但是当我单击按钮时，我的应用程序仍然崩溃。

```
public void search(View v) throws IOException{
        GeoPoint tmpPoint = searchLocation(location.getText().toString());
        System.out.println(tmpPoint);
        if( tmpPoint != null){
            mc.animateTo(tmpPoint);
            mapView.invalidate();
        }   
    } 
```

而searchLocation函数如下：

```
public GeoPoint searchLocation (String searchString) throws IOException{
        Geocoder geo = new Geocoder(this);
        List<Address> addr;
        addr = geo.getFromLocationName(searchString, 10);
        if(!addr.isEmpty()){
                    Address loc = addr.get(0);
                    GeoPoint point = new GeoPoint((int) (loc.getLatitude() * 1E6),
                        (int) (loc.getLongitude() * 1E6));
                    return point;
        }
        else {  
            return null;
        }   
} 
```

因此，总结一下，我显然在 onclick“搜索”功能中做错了什么。

有什么想法有什么问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-17T12:00:39.240

您没有检查正确的变量是否为空值：

```
 if( point != null){
        mc.animateTo(tmpPoint);
        mapView.invalidate();
    } 
```

应该

```
 if( tmpPoint!= null){
        mc.animateTo(tmpPoint);
        mapView.invalidate();
    } 
```

此外，您希望`geoCoder.getFromLocationName`在 UI 线程之外调用该方法，因为这可能很耗时。例如，使用 an `AsyncTask`。

最后，即使您获得地址列表，也不能保证它们具有纬度和经度。使用`hasLatitude`和`hasLongitude`函数选择结果列表的第一个地址和坐标。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-17T15:47:18.900

我找到了答案。

导致这个的问题是这条线

mapView.invalidate();

# php - 在类析构函数中取消设置（$this）是个好主意吗

> ID：13430304
> 
> 赞同：1
> 
> 时间：2012-11-17T11:56:28.247
> 
> 标签：php

> **可能重复：**
> [我应该在 php __destruct() 中使用 unset 吗？](https://stackoverflow.com/questions/2251113/should-i-use-unset-in-php-destruct)

在类 destruct 中 unset($this) 是个好主意吗？它会有什么不同？

```
function __destruct(){
  unset($this);

 } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-17T11:58:49.867

[`$this`是 PHP 中的一个特殊变量](http://php.net/this)- 很特殊，它是伪变量。我想知道您是否可以从类/对象上下文中完全取消它，也许在早期的 PHP 版本中，但是您应该认为它是一个缺陷。

不要那样做。取消设置对象指针（即从外部），垃圾收集会自行处理。

该`__destruct`函数用于取消设置实际上位于对象内部的“外部”对象指针`$this`，例如使用聚合和组合。

尤其是循环引用，它可能有助于 PHP 垃圾收集器更有效地完成这项工作。但这并不取决于`$this`对象实际携带的内容，这意味着它高度依赖于具体代码。

您是否遇到了实际的内存问题，您觉得垃圾收集器无法处理？只有当你可以回答*是*，你通常需要考虑`__destruct`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-17T11:58:23.423

不，这完全没有意义。`unset`本身并不释放内存，它只是将其标记为垃圾收集的候选对象，这正是销毁对象的含义。

# css - 如何防止div被拉伸

> ID：13430308
> 
> 赞同：3
> 
> 时间：2012-11-17T11:57:24.023
> 
> 标签：css, html

这是代码

```
 <div style="display:inline-block; 
                 float:right; 
                 padding:0pt 6pt 4pt 6pt; 
                 margin-left:8pt; margin-top:2pt; margin-bottom:4pt; 
                 border-right:1px dotted black; 
                 border-left:1px dotted black;                 
                 background: url(http://zin.webd.pl/16mm/images/im-bg.png) no-repeat;">

                 <img src="http://zin.webd.pl/16mm/images/midsize/Battersea_Power_Station_-_geograph.org.uk_-_829933.jpg"/>
                 <br/>
                 <span class="caption">Battersea is an area of the London Borough of Wandsworth, England
                 </span>
        </div> 
```

div size 只是匹配其中图像的大小。图像大小每次都可以不同。所以 div 的宽度不能被硬编码。

问题是，标题文本拉伸了我的 div，所以 div 比图像更宽。如何预防？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-17T15:00:09.560

你喜欢 JS 技巧吗？如果是这样，您可以这样做。
在`<head>`标签内定义一个 JS 变量。这是为了保持你的最终宽度`div`。

```
<head>
  <script>
    var divWidth;
  </script>
</head> 
```

现在添加以下部分。请注意，“myDiv”是您的`div`.

```
<body>
  <div style="display:inline-block;
             float:right; 
             padding:0pt 6pt 4pt 6pt; 
             margin-left:8pt; margin-top:2pt; margin-bottom:4pt; 
             border-right:1px dotted black; 
             border-left:1px dotted black;                 
             background: url(http://zin.webd.pl/16mm/images/im-bg.png) no-repeat;"
     id="myDiv">
   <img src="http://zin.webd.pl/16mm/images/midsize/Battersea_Power_Station_-_geograph.org.uk_-_829933.jpg"/>
   <br/>
   <script>
      divWidth = document.getElementById('myDiv').clientWidth;
   </script>
   <span class="caption">Battersea is an area of the London Borough of Wandsworth, England
   </span>
  </div>            
  <script>
    document.getElementById('myDiv').style.width = divWidth;
  </script>
</body> 
```

您在这里所做的是获取渲染`div`之前的宽度`span`，然后将该宽度设置为渲染之后的`div`宽度`span`。

# google-chrome - Chrome 扩展清单错误：content_script[0].matches[0]

> ID：13430309
> 
> 赞同：0
> 
> 时间：2012-11-17T11:57:45.137
> 
> 标签：google-chrome, google-chrome-extension, content-script

我相信这可能是问题所在：

```
"content_scripts" : [
    {
      "matches" : [
        "http://195.88.55.16"
      ],
      "js" : ["script.js"],
      "run_at" : "document_idle",
      "all_frames" : false
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-17T11:59:52.160

您需要在该`matches`部分的主机上附加一个斜杠（可能是斜杠 + 星号），以使该模式有效。

```
 "matches" : [
    "http://195.88.55.16/*"
  ], 
```

有关更多信息，请查看[匹配模式](http://developer.chrome.com/extensions/match_patterns.html)的文档：

> 这是基本语法：
> 
> ```
> <url-pattern> := <scheme>://<host><path>
> <scheme> := '*' | 'http' | 'https' | 'file' | 'ftp' | 'chrome-extension'
> <host> := '*' | '*.' <any char except '/' and '*'>+
> <path> := '/' <any chars> 
> ```

# qt - openGl 对显示地图有用吗？

> ID：13430311
> 
> 赞同：0
> 
> 时间：2012-11-17T11:57:49.930
> 
> 标签：qt, opengl

我必须显示一个平铺地图来显示模拟结果
一个可以在地图上缩放/取消缩放，所以如果缩放很远，将会显示更多的平铺。

我正在使用 QGraphicsPixmapItem 将图块添加到 QGraphicsScene。
我想知道是否`openGl`能够加快速度

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-17T13:49:55.673

> 我正在使用 QGraphicsPixmapItem 将图块添加到 QGraphicsScene。

QGraphicsScene 已经使用空间细分（Kd 树）等方法来确定场景的哪些部分可见，哪些不可见。此外，QGraphicsScene 可以使用 OpenGL 作为渲染后端。

我强烈建议你坚持使用 QGraphicsScene，你几乎不会比这更有效率，尤其是考虑到你的下一个问题：

> 我想知道openGl是否能够加快速度

如果天真地使用，则不会。OpenGL 不是场景图。我无法剔除不可见的几何图形而不发出绘图命令。如果您向它发送绘图命令，它将处理它们。与维护场景数据的 QGraphicsScene 不同，OpenGL 将执行您要求它执行的任何绘图操作。即使最终的结果可能是无形的。只有在最后的处理步骤（剪辑、早期片段拒绝）中，不可见的*片段*才会被丢弃。

# android - 接近传感器方法android

> ID：13430312
> 
> 赞同：1
> 
> 时间：2012-11-17T11:57:54.830
> 
> 标签：android

使用接近传感器时我无法实现方法。我想使用接近传感器的值，以便在传感器的事件值在特定时间间隔内保持不变时执行任务。我们可以为此使用计时器吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-17T14:27:36.427

我不确定，但会`onSensorChanged()`引发 -Event 吗？如果是这样，比较从最后一个事件到这里的时间，如果它在你的时间间隔内调用你的方法，否则更新从最后一个事件到当前事件的时间。

# python - 我可以用 Python 处理视频吗？

> ID：13430317
> 
> 赞同：-1
> 
> 时间：2012-11-17T11:58:20.657
> 
> 标签：python, video, image-processing, opencv

我开始做一项涉及检测视频中的特征的任务，我必须检测矩形形状的红色区域并用另一种颜色替换。我可以在 python 中使用“opencv”接口继续执行此操作吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-17T12:00:56.767

绝对地。转换为 HSV 颜色空间有助于在图像中找到红色，而 Hough 变换将帮助您找到矩形

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-17T12:09:19.120

是的，OpenCV 已经有了一个通过 swighPythonInterface 的 python 接口

[http://opencv.willowgarage.com/wiki/PythonInterface](http://opencv.willowgarage.com/wiki/PythonInterface)

[http://opencv.willowgarage.com/wiki/SwigPythonInterface](http://opencv.willowgarage.com/wiki/SwigPythonInterface)

# delphi - Delphi Firemonkey TListBox 拖放

> ID：13430321
> 
> 赞同：1
> 
> 时间：2012-11-17T11:58:43.187
> 
> 标签：delphi, drag-and-drop, firemonkey, delphi-xe3, firemonkey-fm2

我有一个需要包含文件列表的 ListBox。我需要用户选择一个或多个文件而不是将文件拖放到 ListBox 上的功能。删除文件时，会使用文件名创建项目。这很好用，但问题是，当我将文件拖放到 ListBox 内动态创建的项目上时，文件图标仍然作为“幽灵”绘制在桌面上。请查看以下屏幕截图以获取更多详细信息：

![截图 1](../Images/9961cdb2a085e161da0b55850d54f838.png)

![截图 2](../Images/03c259937880c1a9b916f63a01e43a33.png)

此“sample.txt”图标保留在桌面上。谁能告诉我我做错了什么？

这是用于拖放操作的代码：

```
procedure TTestForm.FileListBoxDragDrop(Sender: TObject; const Data: TDragObject;
  const Point: TPointF);
var
  i: integer;
  item: TListBoxItem;
begin
  try
    FileListBox.BeginUpdate;
    for i := Low(Data.Files) to High(Data.Files) do begin
      Item := TListBoxItem.Create(Self);
      Item.Text := ExtractFileName(Data.Files[i]);
      Item.Parent := FileListBox;
    end;
  finally
    FileListBox.EndUpdate;
  end;
end;

procedure TTestForm.FileListBoxDragOver(Sender: TObject; const Data: TDragObject;
  const Point: TPointF; var Accept: Boolean);
begin
  Accept := True;
end; 
```

# position - Wordpress 插件：Facebook 评论框位置

> ID：13430322
> 
> 赞同：1
> 
> 时间：2012-11-17T11:58:48.087
> 
> 标签：position, wordpress, facebook-comments

我对 Wordpress 的“新”Facebook 插件有疑问。我想在我的帖子页面上重新定位它。我在其他地方（或者可能在这里）读到你可以使用developers.facebook.com 的评论框，但我想使用原始的Facebook 插件。所以这里是：我发现（在插件文件夹中）Facebook 在我的主题中放置了安装评论框的代码。它看起来像这样：

```
公共静态函数 the_content_comments_box( $content ) {
        全球 $post;

        if ( !isset( $post ) )
            返回;

        $options = get_option('facebook_comments');

        if ( !is_array( $options ) || empty( $options ) )
            返回$内容；

        // 关闭的帖子可以有之前打开状态的评论
        // 显示这些注释的 noscript 版本
        $content .= "\n" 。self::comments_markup('noscript') 。"\n";

        // 没有通过 JS SDK 显示评论但不接受新评论的选项
        // 如果我们想要更多评论，只显示 JS SDK 版本的评论框显示
        if ( comments_open( $post->ID ) ) {
            $url = apply_filters('facebook_rel_canonical', get_permalink());
            if ( $url ) // 可能发生错误。让 JS SDK 处理兼容模式
                $options['href'] = $url;
            $content .= self::js_sdk_markup( $options );
        }

        返回$内容；
    }
}

```

如何将 Facebook 评论框放在我的帖子页面底部？您可以在此处查看随机帖子页面：[我的临时站点](http://bogkatalog.dk/jabra-rhythm-test-stereo-headset/)我最终要做的是在 Relaterede indlæg（相关帖子）之后添加 Facebook 评论框。

这是可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T16:37:10.133

我不使用 Wordpress 的 FB 插件，因为它们对我来说显得臃肿。但是，这是我用来添加 facebook 评论框的简单单行代码。您可以将其放置在任何模板中的任何位置。

```
<div class="fb-comments" data-href="<?php echo $_SERVER["HTTP_HOST"] . $_SERVER["REQUEST_URI"] ?>"></div> 
```

请注意：此方法要求您在网站上安装 Facebook SDK。此外，除非您启用了在小部件中执行 PHP 的功能（需要插件），否则它不会作为小部件工作。

# java - 编译时和运行时之间的依赖注入

> ID：13430325
> 
> 赞同：1
> 
> 时间：2012-11-17T11:59:01.310
> 
> 标签：java, design-patterns, dependency-injection, refactoring

一般而言，是否应该努力使类的依赖项与其导入保持一致？

例如，通常应该避免做这样的事情：

**酒吧.java：**

```
import com.somepackage.Foo;
import com.somepackage.Baz;

public Bar(Foo foo) {...}

public void doSomething(Baz baz) {...} 
```

**巴兹.java：**

```
import com.somepackage.Bar;

public Baz(Bar bar) {...}

//etc... 
```

基本上， Bar.java 导入/使用/使用将它作为依赖项的东西，这看起来很奇怪。虽然，我不确定使用其*依赖*项的类是否一定会构成某种气味（即，编译时依赖项与运行时依赖项不一致，暗示可能应该进行一些重构......）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-17T12:26:53.250

我认为这是一种设计气味。你能提取第三个类来解决循环依赖吗？依赖的一个方向是否应该与接口解耦？

如果没有类如何相互依赖的详细信息，将很难更具体。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-17T12:05:30.237

这是一个循环依赖的例子，Java 允许这样做。

参见[java 类中的循环依赖](https://stackoverflow.com/questions/3646113/circular-dependency-in-java-classes)

设计方面，我觉得在包中存在这种依赖关系是可以的。

# mysql - 如何将mysql中的列写入仅限于程序

> ID：13430328
> 
> 赞同：0
> 
> 时间：2012-11-17T11:59:14.480
> 
> 标签：mysql, database, triggers, innodb

有没有办法使用 MySQL 中的 innodb 引擎限制插入或更新到表中的特定列？我只想通过触发器或过程更新这些列

我想要做的是自动计算这些列，并且不允许直接更改这些列。如果我的方法不正确，请告诉我

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-17T12:24:30.000

> 如果我的方法不正确，请告诉我

你的方法不同寻常，但并非不可能。它是否“正确”将取决于您的问题中未提及的因素：

*   如果列始终是某个简单表达式的结果，您可以简单地在 each 中指定该表达式[`SELECT`](http://dev.mysql.com/doc/en/select.html)：

    ```
    SELECT col_a, col_b, LEAST(10*col_a, 5*col_b) AS calculated_column
    FROM   mytbl
    WHERE  ... 
    ```

    或者将结果存储在[视图](http://dev.mysql.com/doc/en/views.html)中，这样您就不需要每次都编写表达式：

    ```
    CREATE VIEW myview AS
    SELECT col_a, col_b, LEAST(10*col_a, 5*col_b) AS calculated_column
    FROM   mytbl 
    ```

    在这种情况下，要选择结果，只需执行以下操作：

    ```
    SELECT * FROM myview WHERE ... 
    ```

    但是，请注意，`calculated_column`每次从视图中选择时仍会对其进行评估，因此如果它是一个复杂的表达式或您的表很大，可能会导致性能问题。相反，如果您想存储计算结果（以便不需要在每个 上进行评估`SELECT`），您可以定义覆盖用户提供的任何值的[触发器](http://dev.mysql.com/doc/en/triggers.html)：

    ```
    CREATE TRIGGER mytbl_insert AFTER INSERT ON mytbl FOR EACH ROW SET
      NEW.calculated_column = LEAST(10*NEW.col_a, 5*NEW.col_b);

    CREATE TRIGGER mytbl_update AFTER UPDATE ON mytbl FOR EACH ROW SET
      NEW.calculated_column = LEAST(10*NEW.col_a, 5*NEW.col_b); 
    ```

*   如果这些列实际上会定期更新，但仅来自存储过程：

    1.  拒绝现有用户更新列的权限：

        ```
        REVOKE INSERT (col1, col2), UPDATE (col1, col2) ON mydb.mytbl FROM myuser; 
        ```

        请注意，如果您的用户具有表级或数据库级权限，则需要将其撤销并酌情替换为列级权限。

    2.  创建一个用户，该过程将在该用户下运行：

        ```
        GRANT INSERT, UPDATE ON mydb.mytbl TO
        'procuser'@'nonexistent' IDENTIFIED BY PASSWORD ''; 
        ```

    3.  定义要在该新用户下运行的过程：

        ```
        CREATE DEFINER = 'procuser'@'nonexistent' PROCEDURE ... 
        ```

# android - 在 monodroid 活动中使用进程属性时出现黑屏

> ID：13430334
> 
> 赞同：1
> 
> 时间：2012-11-17T11:59:56.103
> 
> 标签：android, android-mapview, xamarin.android

从一个活动我的应用程序将转到第二个活动（我在这里发送一些活动代码）。这个活动有一个地图视图。因为我的应用程序中有 2 个地图视图，所以我应该在此活动中使用“进程”属性。但是当我在午餐前使用此属性时，活动应用程序会显示黑屏几秒钟，然后会显示我的 ProgressDialog 和活动。我想让这个黑屏不出现

这是我的班级的定义：

```
 [Activity (Label = "PropertyShowActivity",
           Process =":PropertyShowMapActivity")]            
public class PropertyShowActivity : MapActivity
{.....} 
```

这个活动的onCreate代码是：

```
protected override void OnCreate (Bundle bundle)
    {
        try {
            base.OnCreate  (bundle);

            RequestWindowFeature (WindowFeatures.NoTitle);
            PD = new ProgressDialog (this);
            PD.SetMessage ("Please Wait...");
            PD.Indeterminate = true;
            PD.SetCancelable (false);
            PD.Show ();
            currentproperty = new Property ();
            SetContentView (Resource.Layout.PropertyShow);
            mapLayout = FindViewById ,,,,<LinearLayout > (Resource .Id.PrptyLocationOnMapLayout);
            mapLayout .Visibility = ViewStates.Gone;

            if (RplSettings.Sitename == string.Empty) {
                RplSettings.LoadAllSettings (this);
            }
            action = Intent.GetStringExtra (AppConstants.Action);
            Pid = Intent.GetLongExtra ("Pid", 0);

            Common .MenuInitialize (this, "Property");
            Common .MenuEventInitialize (this);
            AssignBottomActionBarEvents ();

            FindElemnts ();

            if (Pid == 0)
                Pid = Intent.GetIntExtra ("Pid", 0);

            if (action == string.Empty) {
                PD.Hide ();
                Finish ();
            }
            if (action == AppConstants.DownloadProperty) {
                LoadPropertyData ();
            } else if (action == AppConstants.OfflineProperty) {
                OfflineProperty = true;
                //var path = Intent.GetStringExtra (AppConstants.PropertyFilePath);
                //currentproperty = IOAddOn.ParsePropertyJsonString (UTF8Encoding.UTF8.GetString (Property.LoadPropertyFromSD (path)));
                LoadPropertyData ();
            }

        } catch (Exception ex) {
            Common.HandleException (ex);
        }
    } 
```

而且 ddms 的日志是：当我定义我的类时，如下所示，它工作正常：

```
[Activity (Label = "PropertyShowActivity")]         
public class PropertyShowActivity : MapActivity
{.....} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-18T00:53:19.967

添加`Process`属性时，您是在告诉 Android 操作系统在新进程中启动该活动。加载新进程可能需要一些时间，这就是出现黑屏的原因（将其视为启动新应用程序）。不幸的是，除了优化代码（见下文）之外，您无能为力避免这种情况。

看来您在`OnCreate()`覆盖中做了很多工作，例如加载设置等。您可能希望像这样在后台运行这些。

```
 Task.Factory.StartNew(()=>
            {
                // load settings here
                // do expensive non-ui work here

                RunOnUiThread(() =>
                    {
                        // do UI work here
                    });
            }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T05:27:47.003

我解决了在同一进程中运行两个应用程序的问题。但是在进行第二个活动后，我将新应用程序的状态保存在应用程序的应用程序类中。然后当我在 OnResume 中支持第一个地图活动时，我将 mapview 的状态更改为过去的状态。它工作正常。

# c# - 如何在 asp.net mvc web api 中使用导航属性

> ID：13430337
> 
> 赞同：1
> 
> 时间：2012-11-17T12:00:28.973
> 
> 标签：c#, asp.net-mvc, entity-framework, asp.net-web-api

我正在使用 EF 代码优先模型开发 asp.net mvc 4 web api。我有一个具有导航属性的类，例如，

```
public class Branch
{
[Key]
public int Id{get; set;}
public List<book> books{get; set;}
} 
```

我的书课就像，

```
public class book
{
[Key]
public int id{get; set;}
public string Name{get; set;}
} 
```

现在我需要获取分支列表，所以我这样写，

```
public IQuerable<branch> GetBranches(int branchid)
{
  return context.school.where(m=>m.id==branchid).ToList().AsQuerable();
} 
```

现在我想将一些数据分配给分支类中的 book 属性，所以喜欢，

```
context.school.ToList().ForEach(m=>m.books=GetBooks(branchid)); 
```

现在要获得分支，我有类似的网址，

```
/api/branch/12 
```

有什么方法可以使用像这样的 url 在特定分支中获取特定书籍

```
/api/branch/12/book/567 
```

归还第 12 号分行的第 567 号书。请指导我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-17T12:19:14.607

您可以使用这种 url 将 book 传递给 BranchController：

```
/api/branch/12?book=567 
```

或者您可以为您的网址创建新路线

```
config.Routes.MapHttpRoute(
    name: "BranchBooksApi",
    routeTemplate: "api/branch/{id}/book/{bookId}",
    defaults: new { controller = "Branch" }); 
```

两个选项都将调用类似的方法

```
public book Get(int id, int bookId)
{
    //...
} 
```

此外，如果您需要获取书籍（我不清楚您想要什么 - 用单本书进行分支，或者只是从分支中预订），那么可能`BooksController`更适合此代码。

# sql-server-2008-r2 - 在 sql server 2008 中按时间间隔分组

> ID：13430341
> 
> 赞同：0
> 
> 时间：2012-11-17T12:00:40.270
> 
> 标签：sql-server-2008-r2, group-by

我有一个查询返回每条记录的时间，时间格式就像

> “060000”

我想按三组中的记录进行分组：

```
first group whose time is <=072000 (Right Time)
second group whose time is >072000 and <=074500  (Late Comers)
Third group whose time is >074500       (For Half Day) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-17T23:52:48.220

使用`CASE`语句和子查询：

```
SELECT t1.TimeGroup, COUNT(t1.*)
FROM (SELECT [...],
      CASE 
         WHEN Time <= 072000 THEN 'Right Time'
         WHEN Time BETWEEN 072001 AND 074500 THEN 'Late Comers'
         WHEN Time > 074500 THEN 'For Half Day'
      END AS "TimeGroup"
   FROM [...]) t1
GROUP BY t1.TimeGroup 
```

# css - 由于 HTML 中的换行符而删除不需要的边距

> ID：13430345
> 
> 赞同：1
> 
> 时间：2012-11-17T12:00:59.297
> 
> 标签：css, html

我在风格之间`block1`和风格之间得到了不需要的余量。看到这个[jsFiddle](http://jsfiddle.net/SbUwt/)。`block2``display: inline-block`

**HTML**

```
<div id="container">
    <div id="innercontainer">
        <div id="block1">
            block1
        </div>
        <div id="block2">
            block2
        </div>
    </div>
</div> 
```

**CSS**

```
* {
    margin: 0px;
    padding: 0px;
}
#container {
    background-color: #f00;
    width: 100%;
    height: 200px;
}
#innercontainer {
    background-color: #0f0;
    width: 200px;
    height: 200px;
    margin: 0px auto;
}
#block1, #block2 {
    display: inline-block;
    background-color: #00f;
    height: 200px;
} 
```

当我将 HTML 更改为此时，边距消失：

```
<div id="container">
    <div id="innercontainer">
        <div id="block1">
            block1
        </div><div id="block2">
            block2
        </div>
    </div>
</div> 
```

或这个：

```
<div id="container">
    <div id="innercontainer">
        <div id="block1">
            block1
        </div><!--
     --><div id="block2">
            block2
        </div>
    </div>
</div> 
```

虽然我更喜欢后者，但我仍然想知道是否有人知道解决方案，以便我可以使用原始 HTML，但`innercontainer`. 另请注意，我想避免同时设置`float: left;`和`block1`/`block2`或使它们浮动，`position: absolute|relative`因为这会在我的布局中产生其他问题。有任何想法吗？

**编辑**

好的，所以我的布局遇到了更多麻烦。当我向 block1 添加图像时，整个块向下移动，非常奇怪（参见[jsFiddle](http://jsfiddle.net/AbKMJ/)）。我现在正在使用`float: left`并且必须弄清楚如何添加一个消耗右侧可用空间的 div。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-17T12:04:33.993

更新这部分 css ：

```
#block1, #block2 {
    display: block;
    float: left;
    background-color: #00f;
    height: 200px;
} 
```

当您内联时，空格会占用空间！

**编辑 ：**

为了安全起见，更改这部分 HTML

```
<div id="container">
    <div id="innercontainer">
        <div id="block1">
            block1
        </div>
        <div id="block2">
            block2
        </div>
        <div style="clear: both"></div>
    </div> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-17T12:13:12.003

如果你想使用`display: inline-block;`. 你需要像你提到的那样缩小标签之间的差距。因为它本身也被视为内联元素。当两个标签之间有空格或换行符时，它们之间会产生间隙。

您可以通过将周围容器的字体大小设置为 0 并将它们设置回子节点来解决此问题。

```
#innercontainer {
    background-color: #0f0;
    width: 200px;
    height: 200px;
    margin: 0px auto;

  font-size: 0px;

}
#block1, #block2 {
    display: inline-block;
    background-color: #00f;
    height: 200px;

  font-size: 15px;

} 
```

[http://jsfiddle.net/SbUwt/27/](http://jsfiddle.net/SbUwt/27/)

# sml - 如何在 SML 的 IF 语句中使用 AND 运算符

> ID：13430352
> 
> 赞同：7
> 
> 时间：2012-11-17T12:02:05.750
> 
> 标签：sml, smlnj, ml

我是 SML 的新手。如何在 IF 语句中使用 AND 运算符？这是我的代码：

```
val y = 1;
val x = 2;
if (x = 1 AND y = 2) then print ("YES ") else print("NO "); 
```

我的错误是：stdIn：66.9-67.3 错误：未绑定的变量或构造函数：AND stdIn：66.3-67.9 错误：运算符不是函数 [literal] 运算符：表达式中的 int：1 stdIn：66.3-67.9 错误：运算符和操作数 don '不同意 [literal] 运算符域：bool * bool 操作数：bool * int 表达式：x = (1) y = 2

谢谢

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-11-17T12:15:37.740

`AND`SML中没有运算符（除非您自己定义一个）。有一个`and`关键字，但您不能在`if`语句中使用它（或通常作为任何表达式的一部分），因为它不是运算符。它与 结合使用`fun`来定义相互递归的函数。

您可能正在寻找`andalso`运算符，它接受两个布尔操作数，当且仅当两个操作数都为真时才返回真。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-01-14T03:52:41.993

我可以不同意 Vishal 的评论吗？

```
*-true andalso true ;     
val it = false : bool
-true andalso false ;  
val it = false : bool* 
```

我*认为*（REPL 也是如此）

> *真实的也真实的；*

评估为真，而不是假

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2017-09-22T12:32:53.723

这是一个示例，它将清除 andalso 的用法

```
-true andalso true ;
val it = false : bool
- true andalso false ; 
val it = false : bool 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2018-05-10T23:04:13.560

数字门中的一加一始终为 1；因此，在上述情况下，真和真“必须必然评估为真，而不是假；我是正确的吗？还有 1 和 0 也不能永远是 1；

1或0可以是1；

# javascript - iframe 父文档元素

> ID：13430353
> 
> 赞同：1
> 
> 时间：2012-11-17T12:02:08.300
> 
> 标签：javascript, html, iframe, parent

根据我查找的所有内容，这应该可以工作，但事实并非如此。

我有一个带有文档的 html。它有一个 div，其中包含我要访问的特定元素。

```
<li><a href="FAQ.html#" target="page" id="Faq">FAQ</a></li> 
```

该 html 文档还包含一个带有 FAQ.html 的 iframe，它具有以下加载代码：

```
<script>
function loaded() {
    parent.document.getElementById("Faq").style.color = "green";}
</script> 
```

然而，什么也没有发生。我究竟做错了什么？错误控制台没有报告任何可以帮助我分析的内容。

编辑：这是一个基本概念。

[https://dl.dropbox.com/u/32831239/Screenshots/htmlstructure.png](https://dl.dropbox.com/u/32831239/Screenshots/htmlstructure.png)

（不幸的是，到目前为止，stackoverflow 不允许我发布图片）

左侧 div 应用作导航栏。页面加载后，li 条目应标有颜色（例如绿色）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-17T12:07:27.633

```
 <iframe src="test1.html" 
 style="float: right; 
 width: 260px; height: 130px; 
 margin-left: 12px; border: 1px solid black;" 
 name="#boogiejack">
Alternative Content
</iframe> 
```

Test1.html 内容

```
<li><a href="#" target="_new" id="Faq" onClick="javascript:loaded()">FAQ</a></li>
<script type="text/javascript">
function loaded() {
document.getElementById("Faq").style.color = "green";}
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-17T12:42:58.423

调用`onload event`的主体的使用`FAQ.html``loaded function`

```
<html>
<head>
    <script>
        function loaded() {
            alert("Hello !"); //alert to check if this is being invoked.
            parent.document.getElementById("Faq").style.color = "green";
        }
    </script>
</head>
<body onload="loaded();" >
...
</body>
</html> 
```

或者只是删除该功能`(no need to use body onload event)`

```
<script>            
   parent.document.getElementById("Faq").style.color = "green";
</script> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-17T12:49:40.083

您可以在父母中使用以下内容

```
var iframe = document.createElement("iframe");
iframe.src = urlToYourIframe;

// if this is IE then use attachEvent
if (iframe.attachEvent){

    iframe.attachEvent("onload", function(){
        parent.document.getElementById("Faq").style.color = "green";
    });

} else {

    iframe.onload = function(){
        parent.document.getElementById("Faq").style.color = "green";
    };

}

var el = document.getElementById("iFrameContainer");
el.appendChild(iframe);​ 
```

# html - Twitter Bootstrap 响应式导航栏 - 居中链接

> ID：13430356
> 
> 赞同：1
> 
> 时间：2012-11-17T12:02:24.010
> 
> 标签：html, css, twitter-bootstrap, navbar

目前，我正在使用 Twitter Bootstrap 构建我的第一个响应式网站，但我遇到了一个我自己无法解决的问题。

我正在自定义媒体查询，但是当涉及到导航栏中的链接时，我被卡住了。我想`.brand`居中，导航链接应该在下方居中 - 每个链接都有一个新行。我设法`.brand`在适当的媒体查询中使用此 CSS 代码居中：

```
.brand {
    display: block;
    width: 100%;
    text-align: center;
} 
```

现在为链接。这是代码：

```
.navbar li a {
    display: block;
} 
```

选择器似乎是正确的，因为当我分配背景颜色时，它会显示出来。但是使用`display: block;`不会导致每个链接都有一个新行。使用`width: 100%;`也不会产生所需的形式。

我的猜测是它与包含的`li`每个链接有关。

```
<div class="navbar">
    <div class="navbar-inner">
        <a class="brand" href="#">Thomas Glaser</a>
            <ul class="nav">
                <li><a href="#">Arbeiten</a></li>
                <li><a href="#about">Thomas</a></li>
                <li><a href="#contact">Kontakt</a></li>
            </ul>
    </div><!-- /.navbar-inner -->
</div> 
```

我试图摆弄 CSS，但是我猜我并不真正推荐使用试错法结合如此大的 CSS 文件，这就是我问你的原因：需要什么 CSS 代码来显示导航栏中的链接一个低于另一个？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-17T12:12:03.983

它实际上非常简单，您只需要以下 css 规则：

```
.navbar .nav {
    width: 100%;
}

.navbar .nav > li {
    float: none;
    text-align: center;
} 
```

所以你是对的，需要设置样式的是 li，而不是锚 :)

# objective-c - 删除 NSString 中的特殊字符

> ID：13430361
> 
> 赞同：17
> 
> 时间：2012-11-17T12:04:22.583
> 
> 标签：objective-c, ios

我正在将段落转换为包含许多特殊字符的单词，例如

```
"  , "  . ` 
```

如何删除 nsstring 中的这些字符并仅获取 nsstring 中的字母

前“新”到新`//the special characters are change`

* * *

## 回答 #1

> 赞同：81
> 
> 时间：2012-11-17T12:26:12.597

```
NSString *unfilteredString = @"!@#$%^&*()_+|abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ1234567890";
NSCharacterSet *notAllowedChars = [[NSCharacterSet characterSetWithCharactersInString:@"abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ"] invertedSet];
NSString *resultString = [[unfilteredString componentsSeparatedByCharactersInSet:notAllowedChars] componentsJoinedByString:@""];
NSLog (@"Result: %@", resultString); 
```

试试这个它可以帮助你

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-17T12:18:42.013

有很多方法可以处理这个问题。例如，这是一个使用正则表达式的解决方案。这只是一个例子。我们不知道您要删除的所有特殊字符范围。

```
#import <Foundation/Foundation.h>

int main(int argc, const char * argv[])
{

    @autoreleasepool {
        NSRegularExpression *expression = [NSRegularExpression regularExpressionWithPattern:@"[,\\.`\"]"
                                                                                    options:0
                                                                                      error:NULL];
        NSString *sampleString = @"The \"new\" quick brown fox, who jumped over the lazy dog.";
        NSString *cleanedString = [expression stringByReplacingMatchesInString:sampleString
                                                                       options:0
                                                                         range:NSMakeRange(0, sampleString.length)
                                                                  withTemplate:@""];
        printf("cleaned = %s",[cleanedString UTF8String] );

    }
    return 0;
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2019-03-28T20:59:08.867

根据@Rostyslav Druzhchenko 对@MadhuP 所选答案的评论：

```
NSString *unfilteredString = @"!@#$%^&*()_+|abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ1234567890";
NSCharacterSet *notAllowedChars = [[NSCharacterSet alphanumericCharacterSet] invertedSet];
NSString *escapedString = [[unfilteredString componentsSeparatedByCharactersInSet:notAllowedChars] componentsJoinedByString:@""];
NSLog (@"Result: %@", escapedString); 
```

这是`alphanumericCharacterSet`用于处理多个国家字符集的答案。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-06-14T08:29:00.213

SWIFT 接受的答案（但不是 SWIFTY 方式）：

```
 let notAllowedCharactersSet = NSCharacterSet(charactersInString: "ABCDEFGHIJKLMNOPQRSTUVWXYZ").invertedSet
 let filtered = (stringToFilter.componentsSeparatedByCharactersInSet(notAllowedCharactersSet) as NSArray).componentsJoinedByString("") 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2014-11-04T06:04:06.580

我确信有一个更优雅的解决方案，但对于任何试图在 Swift 中执行此操作的人，我都会这样做以确保我的用户电话号码中没有特殊字符。

```
var phone = "+1 (555) 555 - 5555"
var removeChars: NSCharacterSet = NSCharacterSet(charactersInString: "1234567890").invertedSet
var charArray = phone.componentsSeparatedByCharactersInSet(removeChars)
var placeholderString = ""
var formattedPhoneNumber: String = placeholderString.join(charArray).stringByTrimmingCharactersInSet(NSCharacterSet.whitespaceCharacterSet()) 
```

`stringByTrimmingCharactersInSet`可能没有必要。

# android - Android：混合本地化语言

> ID：13430362
> 
> 赞同：3
> 
> 时间：2012-11-17T12:04:25.830
> 
> 标签：android, localization

我无法在 main.java 中显示正确的语言。在某些设备（例如，galaxy nexus）上，语言可以像 /res/values-de 一样正确显示。在某些设备上，例如 htc legend 或 samsung ace，main.java 是英文的，以下页面是德文的。main.java 中的日志显示语言环境是“DE”...

有人知道如何解决这个问题吗？

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-17T12:13:32.937

这取决于您的手机语言设置。您可以在代码中更改语言设置，但不要忘记在关闭应用程序后更改为默认设置。

```
//in onCreate();
Resources standardResources = getApplicationContext();
DisplayMetrics metrics = standardResources.getDisplayMetrics();
Configuration config = new Configuration(standardResources.getConfiguration());
config.locale = new Locale("de") // change
standardResources.updateConfiguration(config, metrics);

// in onDestroy()
config.locale = Locale.getDefault(); // default
standardResources.updateConfiguration(config, metrics); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-17T12:16:20.263

检查您的所有国家/地区代码是否正确

*   [http://colincooper.net/blog/2011/02/17/android-supported-language-and-locales/](http://colincooper.net/blog/2011/02/17/android-supported-language-and-locales/)

# php - 空格被替换为 '+' 在 php 的链接中

> ID：13430364
> 
> 赞同：1
> 
> 时间：2012-11-17T12:04:38.970
> 
> 标签：php, html

我在变量中有一个值如下...

```
$variable = "chicken soup.jpg"; 
```

当我执行以下操作时，输出中的空格将转换为 + 符号

```
$body = "www.abc.com/" . $variable
mail($to, $subject, $body,$headers) 
```

> 收到的邮件输出：**www.abc.com/chicken+soup.jpg**

但我想要输出如下？请帮忙

> 预期输出：www.abc.com/chicken%20soup.jpg 或 www.abc.com/chicken soup.jpg

我尝试使用**str_replace**函数但没有运气

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-17T12:17:18.723

我很确定，如果您的电子邮件客户端支持查看该消息的原始来源，您会发现该 url 是`"www.abc.com/chicken soup.jpg"`; 只有您的浏览器/电子邮件客户端对其进行编码，因为它是无效的 URL。

如果要生成有效的 url，请使用以下命令手动对其进行编码：

```
$body = 'www.abc.com/' . urlencode( $variable );
// this will be 'www.abc.com/chicken+soup.jpg' as this is a valid url 
```

或者：

```
$body = 'www.abc.com/' . rawurlencode( $variable );
// this will be 'www.abc.com/chicken%20soup.jpg' 
```

**编辑**：

您可以阅读有关差异的更多信息：

*   RFC 3986 编码 ( [`rawurlencode()`](http://www.php.net/manual/en/function.rawurlencode.php))
*   `application/x-www-form-urlencoded`（或表单帖子）编码（[`urlencode()`](http://www.php.net/manual/en/function.urlencode.php)）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-17T12:12:52.823

您的解决方案是`urlencode()`在文件名变量上使用。这会将空格和其他非 URL 友好字符转换为 %20 等，以便它可以用作有效 URL 的一部分。

**示例**：

```
$variable = urlencode("chicken soup.jpg"); echo $variable; 
```

**输出**：

```
chicken%20soup.jpg 
```

查看**[urlencode()](http://php.net/manual/en/function.urlencode.php)**文档以获取更多信息。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-17T12:07:53.587

这是因为所有 url 都经过编码。可能是您的电子邮件客户端收到“chicken soup.jpg”，但将其解析为 url，因此它得到“chicken+soup.jpg”，因为 url 中的“”无效。

# sql - PL/SQL 阿拉伯语显示为？

> ID：13430366
> 
> 赞同：1
> 
> 时间：2012-11-17T12:04:45.993
> 
> 标签：sql, plsql, arabic, plsqldeveloper

当我在 PL/SQL Developer 中查询具有阿拉伯文本的数据时，它显示为问号 (????)。

我确信数据正确存储在数据库中，因为它正确显示在网站上，也在服务器上。

所以我认为这是与我的 PL/SQL Developer (v8.0.4.1514) 有关的问题。

*   有没有办法改变 PL/SQL Developer 显示/编码阿拉伯文本的方式？

*   如何检查存储阿拉伯文本的格式/编码？

我的问题可能遗漏了一些细节，所以只要问我并记住我是 PL/SQL 和 SQL 的初学者。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T08:46:05.333

我找到了一个解决方案（它也可能适用于显示为 ' `????`' 的其他语言）

我将`NLS_LANG`注册表更改为`AMERICAN_AMERICA.AL32UTF8`

（我`NLS_LANG`在注册表中找到了 3 ，检查每一个，或者像我一样将它们全部更改。）

然后重新启动 PL/SQL 开发人员，测试查询和阿拉伯文本正常显示。

谢谢你们。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-17T12:24:17.297

你能用`SET NLS_LANGUAGE`阿拉伯语吗`ALTER SESSION SET NLS_LANGUAGE = 'ARABIC'`

它可能是解决方案，如果不是，您能否提供有关 O/S 及其版本的更多信息，......等等

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-11-16T10:34:43.187

可能安装了多个 oracle 实例，因此您必须为所有实例设置默认编码。只需按照以下说明操作：

1.  打开 reg 编辑并转到 `Computer\HKEY_LOCAL_MACHINE\SOFTWARE\Oracle`. 每个实例都有一个或多个键：

[![在此处输入图像描述](../Images/c6955af734fb7703389c29569a4310cf.png)](https://i.stack.imgur.com/v4TLr.png)

2.  对于**每个**键，右键单击并创建一个名为（`NLS_LANG`如果还没有）的字符串值：

[![在此处输入图像描述](../Images/d01e62ef0b3a54bd521f7a25f81a0ea7.png)](https://i.stack.imgur.com/HI8x6.png)

3.  然后将它的值设置为`AMERICAN_AMERICA.AL32UTF8`并完成，只需在 PL/SQL 中刷新您的查询。

[![在此处输入图像描述](../Images/1c3d413570648d2e4be7447136b9a37f.png)](https://i.stack.imgur.com/jQCjO.png)

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2018-05-14T08:50:31.560

在 registery 中查找`NLS_LANG`并将其值从 更改`AMERICAN_AMERICA.WE8MSWIN1252`为`AMERICAN_AMERICA.UTF8` 对我来说对波斯字符来说很好。

# jquery - jquery匹配唯一的类名

> ID：13430367
> 
> 赞同：0
> 
> 时间：2012-11-17T12:04:51.870
> 
> 标签：jquery, unique, match, classname

我试图让评论在带有 jquery 的 wordpress 滑块中工作。我绝不是专家，所以我正在寻求帮助。这是我到目前为止所拥有的。

```
<div id="slider-1>
<div id="content-805">content here</div>
<div id="comments-wrap-805" class="comments-805"> //Parent
<div id="commentform-798" class="comments-798">comment stuff</div> //child
<div id="commentform-605" class="comments-605">comment stuff</div> //child
<div id="commentform-735" class="comments-735">comment stuff</div> //child
<div id="commentform-425" class="comments-425">comment stuff</div> //child
<div id="commentform-810" class="comments-810">comment stuff</div> //child
</div>
</div> 
```

id 和 classes 后面的数字是 wordpress post id。我想要做的是隐藏没有与父母匹配的班级的孩子。这可能吗？

到目前为止，这是我的脚本..

```
jQuery(document).ready(function() {
if ((" " + jQuery("div[id^='commentform']").parent().attr('class') + " ").match(/\scomments-\d+\s/) != null) {
jQuery(this).hide();
}
}); 
```

干杯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-17T12:38:25.993

你可以这样做

```
$.each($("div[id^='comments-wrap']"),function(){ // this will fetch all parent div's
    var CurrectDiv=$(this);
    CurrectDiv.find('div').filter(function(){
        if($(this).attr('class')==CurrectDiv.attr('class'))
        {
           $(this).hide(); 
        }
     });
}); 
```

[​工作演示](http://jsfiddle.net/Vzjuc/)

# html - 页面底部的页脚

> ID：13430370
> 
> 赞同：0
> 
> 时间：2012-11-17T12:05:51.720
> 
> 标签：html, css, footer

我希望我的页脚位于页面底部，但它不起作用。总是有滚动条，这是为什么呢？

[http://www.yannickluijten.be/luc/website/](http://www.yannickluijten.be/luc/website/)

```
#top {
position: relative;
width: 100%;
height: 50px;
background: #00aeef; 
```

}

```
#wrapper {
position: relative;
width: 960px;
min-height: 100%;
height: auto !important;
height: 100%;
margin: 0 auto -20px; 
```

}

```
#footerbg {
width: 100%;
height: 20px;
background: #d7d7d7; 
```

}

```
.push {
height: 20px; 
```

}

```
<div id="top"></div>
<div id="wrapper">
    <div class="push"></div>
</div>
<div id="footerbg"></div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-17T13:07:00.410

尝试更新版本：http: [//jsfiddle.net/F577v/8/](http://jsfiddle.net/F577v/8/)

首先，您的容器不需要是相对位置。其次，页脚应该通过将宽度和左右边距设置为自动居中：

```
#footerbg {
    width: 960px;
    ....
    margin-left: auto;
    margin-right: auto;
}​ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-17T13:08:06.130

您有 2 个选项：

1）把`footerbg`里面`wrapper`

2）放入`footerbg`与包装器相同的样式（相同的**宽度**和**边距**值）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-17T12:16:31.357

包装器应该是内容的容器

看看这里：http: [//jsfiddle.net/F577v/](http://jsfiddle.net/F577v/)

```
<div id="top"></div>
<div id="wrapper"> 
    <div id="content"><p>content here</p></div>
</div>
<div id="footerbg"></div> 
```

​</p>

我将页脚设置在包装器的底部，如果您想将顶部移到外面也可以，但请记住，您还必须调整底部填充以补偿其高度。

在此处查看更新的代码：http: [//jsfiddle.net/F577v/2/](http://jsfiddle.net/F577v/2/)

# com - 使用 COM 自动化应用程序

> ID：13430372
> 
> 赞同：0
> 
> 时间：2012-11-17T12:06:04.717
> 
> 标签：com, vbscript, automation, dispatch

我正在为现有应用程序构建自动化界面。在实现了 DLL 服务器和 EXE 服务器（主要是为了熟悉 COM 的基础知识）之后，我现在可以从 IDL 文件生成类型库，并且可以，例如，基本上从 VBScript 自动化我的应用程序：

```
Set oApp = CreateObject("MyApp.1") 
oApp.ShowAboutBox() 
```

这个对不带参数的函数的简单调用是有效的。我要采取的下一步是调用一个带参数的函数。

IDL 文件中函数的签名是

```
HRESULT CreateSomeChildWindow([out, retval] MyChildWindow** ppChildWindow); 
```

在 VBScript 中我认为它会是

```
Dim oWnd As MyChildWindow
oWnd = oApp.CreateSomeChildWindow() 
```

此调用已**在 C++ 中**运行，但`MyChildWindow`当前未在注册表中注册为 COM 对象。`MyChildWindow` *不需要*注册的原因是`CreateSomeChildWindow`简单地将接口指针返回到`MyChildWindow`参数中创建的对象。*它没有*注册的原因是我想避免冗余，而且我不想`MyChildWindow`被直接实例化（例如通过调用`CreateObject`VBScript）。

**问题：**

现在我正在尝试找出是否有必要注册`MyChildWindow`。我的假设是否正确，以便调用`CreateSomeChildWindow`VBScript

*   我需要写`Dim oWnd As MyChildWindow`
*   为此，`MyChildWindow`必须注册

如果答案是*肯定*的，希望客户仍然不能`MyChildWindow`直接，因为我没有为它实现类对象？还是我必须实现一个类对象？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-17T18:18:06.383

您的 out/retval 不是一个对象（在脚本方面），它是一个接口指针。并且由于该方法`CreateSomeChildWindow`在 IDL、类型库、注册类型库中 - 脚本/自动化知道接口定义，例如方法等，因为整个类型库已经注册。您已经准备就绪，无需额外注册。

当调用者接收到一个接口指针时，它并不关心该指针属于哪个对象。单独的接口指针就足够了，脚本/自动化环境知道如何处理它。

然而，在被调用方，您需要返回一个接口指针，并且您正在处理对象。所以你需要一些实现这个接口的类，然后你返回这个对象的接口。

# python - 在python的递归函数中使用新列表

> ID：13430373
> 
> 赞同：0
> 
> 时间：2012-11-17T12:06:19.473
> 
> 标签：python, recursion

我正在尝试运行一个创建列表的函数。

唯一的问题是它是一个递归函数，所以如果我定义我正在使用的新列表， `list=[]`那么每次运行它时列表都会自行清空，如果我不这样做，则说新列表没有被定义

代码示例：

```
def rec (a_list_of_numbers):

    if a_list_of_numbers==[]:
        return 0
    newlist=[] ##the problem is here
    newlist.append(rec(**some sort of recursion here**)+rec(**some sort of recursion here**)
    return newlist 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-17T12:13:04.780

没有看到你的代码，你确定你需要`newlist`吗？

```
def rec(a_list_of_numbers):
    if a_list_of_numbers == []:
        return []
    else:
        return rec(...) + rec(...) 
```

您的递归看起来很可疑 - 基本情况是一个空列表，您所做的只是将它们连接在一起。

# android - 无法从堆栈中删除我的活动

> ID：13430375
> 
> 赞同：-1
> 
> 时间：2012-11-17T12:06:29.533
> 
> 标签：android

我知道这已经被问到了。我浏览并尝试了我找到的任何东西，但由于某种原因，它对我不起作用。

我的代码如下

```
runOnUiThread(new Runnable() {
@Override
public void run() {
  Intent intent = new Intent(LoginActivity.this, HomepageActivity.class);
  intent.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK | Intent.FLAG_ACTIVITY_CLEAR_TOP);
  startActivity(intent);
} 
```

我不能使用

机器人：noHistory =“真”

因为我的活动在某些情况下必须留在堆栈上。

所以，我有以下行为。我使用 LoginActivity 登录到我的应用程序，然后它转到 HomepageActivity，但是如果我按下 Back 底部，LoginActivity 会再次弹出，这是我不想要的。

知道如何解决这个问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-17T12:12:05.963

这可以通过在 之后调用来[`finish()`](http://developer.android.com/reference/android/app/Activity.html#finish%28%29)完成`startActivity()`。

`finish()`销毁当前活动，因此将其从堆栈中删除。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-17T13:00:15.137

`finish()`之前打电话`startActivity()`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-17T12:11:41.367

你可以覆盖`onBackPressed`你的活动方法来做你想做的事

# actionscript-3 - AS3 - 使用相同的符号不同的图像？

> ID：13430377
> 
> 赞同：0
> 
> 时间：2012-11-17T12:06:44.257
> 
> 标签：actionscript-3, actionscript, symbols

基本上我正在开发一款新游戏并决定提出拥有不同敌人的想法 - 但是我是否必须为这些敌人创建多个符号，或者我可以使用那个符号并更改加载到它的图像?

如果是的话 - 我将如何去做？

目前该符号被称为`Enemy`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-18T04:29:15.533

您的符号必须是影片剪辑。在每一帧中都有不同的图像并通过标签添加。改变你可以调用的敌人：

```
Enemy.gotoAndStop(labels)// use Enemy.gotoAndPlay(labels) if you want the animated ones. 
```

带标签的是一个字符串。

# python - TypeError：“A”对象不可调用

> ID：13430378
> 
> 赞同：0
> 
> 时间：2012-11-17T12:06:49.237
> 
> 标签：python

这里发生了什么？

括号在这里做什么`test2 = A()`？

如何使对象 A() 可调用。

```
class A(object):
    @property
    def a(self):
        "an important attribute"
        return ["a value","dsfsdfsd"]

test1 = A

test2 = A()

print test1().a                                

print test2().a 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-17T12:11:59.833

（我已经编辑了我以前的 anwser，它正在工作，但正如所指出的，这并不是一个很好的做法）

Python 中的对象表示在这里有轻微的混淆：

```
test1 = A 
print test1 #return : <class '__main__.A'> 
```

在 python 中，您可以复制一个类，因为 Python 中的一个类也是一个对象。您可以将其视为别名，但它比这更有用。

```
test2 = A() 
print test2 #return : <__main__.A object at 0x0126DF90> 
```

在这里，您在某个地址创建了一个 A 对象。

```
print test1().a 
```

你正在做的是在现实中：`A().a`。换句话说，您创建一个临时对象，然后调用 a 属性。它在您的示例中有效，但它并不比静态方法更有用，因为对象是临时的（通常使用类方法来查看/修改对象的内部状态）。

`print test2().a # == [A()]().a` 这不起作用，因为您想将对象作为方法调用。为此，您必须`__call__`在类描述中添加一个特殊方法。如果您的财产很重要，那我会这样做：

```
class State(object):
    " Dummy Finite state machine "

    def __init__(self)
         self.count = 0

    @property
    def state(self):
        return self.count % 4

    def __call__(self):
        return self.state

    def next(self):
        self.count +=1

s = State() # State object
print s() # return 0
s.next() # count = 1
s.next() # count = 2
s.next() # count = 3
s.next() # count = 4
s.next() # count = 5
print s() # return 5 % 4 =1 
```

# objective-c - 方向更改时的 UIScrollview 内容大小

> ID：13430379
> 
> 赞同：4
> 
> 时间：2012-11-17T12:06:59.083
> 
> 标签：objective-c, ios, uiscrollview, uiinterfaceorientation, contentsize

我有一个带有分页的滚动视图。在 viewDidLoad 我检查当前方向是否为横向然后我将其内容大小的高度设置为 440

```
 if (UIDeviceOrientationIsPortrait([[UIDevice currentDevice] orientation])) 
    {
        [scroll      setContentSize:CGSizeMake(self.scroll.frame.size.width*numberOfPages,340)];

    }
    else if (UIDeviceOrientationIsLandscape([[UIDevice currentDevice] orientation]))

    {
        [scroll setFrame:CGRectMake(0,0,480,480)];
        [scroll setContentSize:CGSizeMake(self.scroll.frame.size.width*numberOfPages, 440)];

    } 
```

一切正常滚动视图滚动流畅，没有对角滚动。

但当方向改变时，

我必须再次设置滚动视图的框架和内容大小，我将其设置如下

```
-(void)orientationChanged:(id)object
{
if(UIDeviceOrientationIsPortrait([[UIDevice currentDevice] orientation]))
{
    self.scroll.frame = [[UIScreen mainScreen]bounds];

    [scroll setContentSize:CGSizeMake(self.scroll.frame.size.width*numberOfPages, 340)];
}

else
{
 self.scroll.frame = CGRectMake(0,0,480,480);
        [scroll setContentSize:CGSizeMake(self.scroll.frame.size.width*numberOfPages, 600)];
}

} 
```

我不明白为什么我必须在横向模式下将内容大小的高度设置为 600，这还不够。它又增加了一个问题，即滚动视图开始对角滚动，这是我不想要的，因为它看起来很奇怪。谁能帮助我了解我在哪里以及缺少什么？

我已将滚动视图的自动调整大小掩码设置为

```
[scroll setAutoresizingMask:UIViewAutoresizingFlexibleLeftMargin|UIViewAutoresizingFlexibleRightMargin|UIViewAutoresizingFlexibleHeight]; 
```

但改变它没有帮助。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-17T15:23:56.307

1.  不要使用`UIDeviceOrientation`. 改为使用`UIInterfaceOrientation`。`DeviceOrientation`这里有两个你不需要的额外选项。(`UIDeviceOrientationFaceUp`和`UIDeviceOrientationFaceDown`)

2.  `Yes`从返回`shouldAutorotateToInterfaceOrientation`

3.  `willRotateToInterfaceOrientation: duration:`每次旋转设备时都会调用Now 。

4.  像这样实现这个方法。

    ```
    -(void)willRotateToInterfaceOrientation:(UIInterfaceOrientation)toInterfaceOrientation duration:(NSTimeInterval)duration
    {
    CGRect frame;
    int pageNumber = 2;
    int statusBarHeight = 20;

    if ((toInterfaceOrientation == UIInterfaceOrientationLandscapeLeft) || (toInterfaceOrientation == UIInterfaceOrientationLandscapeRight)) {
        frame = CGRectMake(0, 0, 480, 320 - statusBarHeight);
    } else {
        frame = CGRectMake(0, 0, 320, 480 - statusBarHeight);
    }

    scrollView.frame = frame;
    scrollView.contentSize = CGSizeMake(frame.size.width * 2, frame.size.height);
    } 
    ```

    让，

    页数 = 2

    状态栏高度 = 20

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-17T15:23:15.480

这是您的代码中的问题。为什么要这样设置帧大小？您只有`320px width`. 而当它变为 时`landscape`，高度将仅为`320px`。但是您将滚动设置`height`为`480px`and it `goes out of the screen`and `start to scroll diagonally`。

```
self.scroll.frame = CGRectMake(0,0,480,480); 
```

而不是那个帧大小，像这样改变

```
self.scroll.frame = CGRectMake(0,0,480,320); 
```

您需要根据滚动视图中任一方向的内容**来**设置**内容****大小。**

# eclipse - Eclipse 无法在 Ubuntu 中启动

> ID：13430384
> 
> 赞同：5
> 
> 时间：2012-11-17T12:07:47.127
> 
> 标签：eclipse, ubuntu

Eclipse 无法在 Ubuntu 中启动并给出错误日志 -`java.lang classNotFoundException`

```
!SESSION Sat Nov 17 14:47:28 EAT 2012 ------------------------------------------
!ENTRY org.eclipse.equinox.launcher 4 0 2012-11-17 14:47:28.694
!MESSAGE Exception launching the Eclipse Platform:
!STACK
java.lang.ClassNotFoundException: org.eclipse.core.runtime.adaptor.EclipseStarter
    at java.net.URLClassLoader$1.run(URLClassLoader.java:366)
    at java.net.URLClassLoader$1.run(URLClassLoader.java:355)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.net.URLClassLoader.findClass(URLClassLoader.java:354)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:423)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:356)
    at org.eclipse.equinox.launcher.Main.invokeFramework(Main.java:619)
    at org.eclipse.equinox.launcher.Main.basicRun(Main.java:577)
    at org.eclipse.equinox.launcher.Main.run(Main.java:1410) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-19T00:41:21.203

如果有一些 eclipse 文件或文件夹，请查看您的主目录并删除它们。您可以在 /home 上使用“CTRL + H”查看它们。

或者尝试清理您的工作区。

或者尝试删除位于目录中的 .snap 文件：/.metadata/.plugins/org.eclipse.core.resources

或者尝试重新安装

或者尝试升级

# php - mysql查询在php中损坏

> ID：13430385
> 
> 赞同：-1
> 
> 时间：2012-11-17T12:07:47.867
> 
> 标签：php, mysql, select, echo

我在 php 中有一个 mySQL 查询：

```
$query = "SELECT serial FROM code WHERE type='".$type."' AND year='".$year."' AND subject='".$subject."' AND mounth='".$mounth."' AND day='".$day."' ORDER BY serial DESC LIMIT 1"; 
```

当我回显它（出于调试目的）时，我看到了：

```
SELECT serial FROM code WHERE type='in' AND year='391' AND subject='pcyear=393' AND mounth='04' AND day='1' ORDER BY serial DESC LIMIT 1 
```

**subject='pcyear=393**附近有什么问题？

请帮忙

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-17T12:13:01.517

您的 $subject 变量设置为`subject='pcyear=393`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-17T12:13:58.300

我敢打赌，如果你回去，`echo $subject`你会得到`pcyear=393`

检查并确保`$subject`正确分配。

# arrays - 汇编器数组最大元素搜索

> ID：13430389
> 
> 赞同：3
> 
> 时间：2012-11-17T12:08:05.917
> 
> 标签：arrays, delphi, assembly, delphi-7, basm

我需要在 Delphi 中编写 asm 函数来搜索最大数组元素。所以那是我写的。这里有几个问题。

首先 -`mov ecx, len`只是在这里以正确的方式工作。实际上它替换了 value in`ECX`但不是 value in `len`！如果我只是写一个例子`mov ecx, 5`，那么 ecx 中就会出现 5。

其次 - 我在 5 个元素的数组上测试这个函数（使用`mov ecx, 5`ofc ）它返回一些奇怪的结果。我想可能是因为我在尝试像这样读取数组 0 元素时做了一些磨损

```
mov edx, arr
      lea ebx, dword ptr [edx] 
```

但如果我这样读

```
 lea ebx, arr 
```

它说操作无效，如果我这样尝试

```
lea bx, arr 
```

它说尺寸不匹配。

我该如何解决这个问题？完整代码在这里：

```
 program Project2;

    {$APPTYPE CONSOLE}

    uses
      SysUtils;

    Type
      TMyArray = Array [0..255] Of Byte;

    function randArrCreate(len:Integer):TMyArray;
    var temp:TMyArray; i:Integer;
    begin
      Randomize;
      for i:=0 to len-1 do
        temp[i]:=Random(100);
      Result:= temp;
    end;

    procedure arrLoop(arr:TMyArray; len:Integer);
    var i:integer;
    begin
      for i:=0 to len-1 do begin
          Write(' ');
          Write(arr[i]);
          Write(' ');
        end;
    end;

    function arrMaxAsm(arr:TMyArray; len:integer):Word; assembler;
    asm
      mov edx, arr
      lea ebx, dword ptr [edx]
      mov ecx, len
      xor ax,ax  //0
      mov ax, [ebx]  //max

      @cycle:
        mov dx, [ebx]
        cmp dx, ax
        jg @change
        jmp @cont
      @change:
        mov ax, dx
      @cont:
        inc ebx
      loop @cycle

      mov result, ax
    end;

    var massive:TMyArray; n,res:Integer;
    begin
      Readln(n);
      massive:=randArrCreate(n);//just create random array
      arrLoop(massive,n);//just to show what in it
      res:=arrMaxAsm(massive, n);
      Writeln(res);
      Readln(n);
    end. 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-17T15:38:18.490

首先，调用约定：什么数据被发送到函数以及在哪里？

根据[文档](http://docwiki.embarcadero.com/RADStudio/XE3/en/Program_Control#Register_Convention)，数组作为指向数据的 32 位指针传递，整数作为值传递。

根据相同的文档，支持多个调用约定。不幸的是，默认的没有记录 - 明确指定一个是个好主意。

根据您`mov ecx, len`不起作用的描述，我猜编译器`register`默认使用约定，并且参数已经放在`ecx`and中`edx`，然后您的代码将它们混合在一起。您可以更改代码以使用该约定，或者告诉编译器使用堆栈传递参数 - 使用`stdcall`约定。我随意选择了第二个选项。无论您选择哪一个，请确保明确指定调用约定。

* * *

接下来，实际的功能逻辑。

1.  您使用 16 位寄存器而不是完整的 32 位寄存器是否有原因？
2.  您的数组包含字节，但您正在阅读和比较单词。
3.  `lea ebx, dword ptr [edx]`是一样的`mov ebx, edx`。您只是在引入另一个临时变量。
4.  您正在比较元素，就好像它们已签名一样。
5.  现代编译器倾向于在不使用`loop`.
6.  文档还说`ebx`需要保留 - 因为函数使用`ebx`，它的原始值需要在开始时保存并在之后恢复。

* * *

这就是我重写你的函数的方式（使用[Lazarus](http://www.lazarus.freepascal.org/)，因为我已经有大约 8 年没有接触过 Delphi - 没有编译器触手可及）：

```
function arrMaxAsm(arr:TMyArray; len:integer):Word; assembler; stdcall;
 asm
  push ebx                 { save ebx }

  lea edx, arr             { Lazarus accepts a simple "mov edx, arr" }
  mov edx, [edx]           { but Delphi 7 requires this indirection }

  mov ecx, len
  xor ax, ax               { set default max to 0 }
  test ecx, ecx
  jle @done                { if len is <= 0, nothing to do }
  movzx ax, byte ptr [edx] { read a byte, zero-extend it to a word } 
                           { and set it as current max }

 @cont:
  dec ecx                  
  jz @done                 { if no elements left, return current max }

 @cycle:
  inc edx
  movzx bx, byte ptr [edx] { read next element, zero-extend it }
  cmp bx, ax               { compare against current max as unsigned quantities }
  jbe @cont
  mov ax, bx
  jmp @cont

 @done:
  pop ebx                  { restore saved ebx }
  mov result, ax
end; 
```

可以通过重新组织循环跳转来进一步优化它 - YMMV。

* * *

*注意*：这仅适用于字节大小的无符号值。为了使其适应不同大小/符号的值，需要进行一些更改：

## 数据大小：

1.  读取正确数量的字节：

```
 movzx bx, byte ptr [edx]  { byte-sized values }

    mov bx, word ptr [edx]    { word-sized values }

    mov ebx, dword ptr [edx]  { dword-sized values }
                              { note that the full ebx is needed to store this value... }
```

请注意，这个阅读是在两个地方完成的。如果您正在处理 dwords，您还需要将结果从 更改`ax`为`eax`。

1.  推进适当数量的字节。

```
 @cycle:
      inc edx    { for an array of bytes }

      add edx, 2 { for an array of words }

      add edx, 4 { for an array of dwords }
```

## 处理有符号值：

1.  如果应用了值扩展，则需要将其从 更改`movzx`为`movsx`。

2.  设置新最大值前的条件跳转需要调整：

```
 cmp bx, ax         { compare against current max as unsigned quantities }
      jbe @cont

      cmp bx, ax         { compare against current max as signed quantities }
      jle @cont
```

# php - PHP会话登录 - 没有任何反应，为什么？

> ID：13430391
> 
> 赞同：-1
> 
> 时间：2012-11-17T12:08:12.437
> 
> 标签：php, mysql, session, login

我有一个 MySQL 数据库，用户名为 admin（和密码 admin）。我正在使用它来测试我的配置。当我点击登录时，什么也没有发生。谁能看看我是否做错了什么？

这是我的登录表格：

```
 <form action="loginProcess.php" method="POST">
    Username: <input type='text' name='username'></br>

    <!-- input type password makes the password hidden as it is typed -->
    &nbsp;Password: <input type='password' name='password'></br>

    <input type='submit' value='Login'/>

    </form>
    </br>
    </br>
    <!-- Register New User -->
    <form action="register.php" method="POST"> </br>
    Not Registered?<input type='submit' value='Click Here To Register'/>

    </form> 
```

此表单将您带到此 loginProcess.php 文件：

```
<?php
ob_start();
session_start();
// Include database connection and select database UFPProducts
include "./shopdb/connection.php";

?>
<?php
    //
// (2) Collect data from form and save in variables
// real escape string to protect from SQLi attacks
$username=mysql_real_escape_string(htmlentities($_POST['username']));
$password=mysql_real_escape_string(htmlentities($_POST['password']));

// (3) Create query of the form below to search the user table
//   "SELECT * FROM Users WHERE UserName='$username' AND  Password='$password'"

$query = "SELECT * FROM USERS where Username='$username' AND Password='$password'";
$result = mysql_query($query) or die (mysql_error()); 

// (3) Run query through connection

// (4) Check result of query using code below

// if rows found set authenticated user to the user name entered 
if (mysql_num_rows($result) > 0) { 
$_SESSION["authenticatedUser"] = $username;
// Relocate to the logged-in page
header("Location: ./login/loggedOn.php");
} 
else
// login failed redirect back to login page with error message
{
$_SESSION["message"] = "Could not connect as $username " ;
header("Location: login.php");
}
?> 
```

这是我的 connection.php 文件，以防万一有人想看：

```
<?php 
//***  "die()" will exit the script and show an error if something goes wrong with the "connect" or "select" functions. 
//***  A "mysql_connect()" error usually means your connection specific details are wrong 
//***  A "mysql_select_db()" error usually means the database does not exist.

// Place db host name. Usually is "localhost" but sometimes a more direct string is needed
$db_host = "localhost";
// Place the username for the MySQL database here
$db_username = "root"; 
// Place the password for the MySQL database here
$db_pass = "";
// Place the name for the MySQL database here
$db_name = "UFPProducts";

$connect = mysql_connect("$db_host","$db_username","$db_pass") or die(mysql_error());
mysql_select_db("$db_name") or die("there is no database with that name");

// echo "<center>You are successfully connected to the Under5Pounds database.</center><br>";
?> 
```

我现在没有收到任何错误消息，一旦我输入用户名+密码并单击登录，它就不会做任何事情。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-17T12:17:27.837

在 loginProcess.php 中尝试此代码

```
$username=$_POST['username']; 
```

$password=$_POST['密码'];

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-17T12:18:12.373

我认为你应该删除 ob_start(); 从 loginProcess.php 文件的第一行开始，它与那里无关（除非告诉我充分的理由），它阻止数据发送到浏览器

# amplifyjs - amplify.request中Error的常用方法调用

> ID：13430394
> 
> 赞同：1
> 
> 时间：2012-11-17T12:08:47.473
> 
> 标签：amplifyjs

在我的应用程序中，我使用 amplify.js 来调用数据 API。在来自 API 的响应中，我想检查响应是否为 403 Forbidden 并将用户重定向到登录页面。我的问题是我有大约 50 个不同的 API 调用，我想在一个地方处理它。amplify.js 中有什么方法可以处理单个地方的错误吗？

# facebook - Facebook linter 抱怨多个 og:url，但只有一个

> ID：13430396
> 
> 赞同：-1
> 
> 时间：2012-11-17T12:08:59.557
> 
> 标签：facebook, facebook-graph-api

在与 facebook 等集成时，我一直在努力确保我的新博客中的页面绝对正确。当我将我的 URL 放在 facebook linter 中时：

[http://developers.facebook.com/tools/debug](http://developers.facebook.com/tools/debug)

并输入：myurl.com?fbrefresh=true

它抱怨“指定了多个 OG URL”。我检查了源代码，只有一个 og:url，我还从 linter 页面本身的底部链接检查了它，其中有“Scraped Url：查看我们的抓取工具对您的 URL 看到的确切内容”，然后我再次只找到一个 og:url。

那它为什么抱怨呢？

根据 facebook 在我的页面中的两个 URL 是相同的！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-18T02:29:16.053

您在两个地方指定了 OG 网址

`<!-- Facebook Opengraph -->`
`<meta property="og:url" content="http://www.eve.com.mt/2012/11/16/is-living-abroad-something-for-everyone/">`

和

`<meta property="http://ogp.me/ns#url" content="http://www.eve.com.mt/2012/11/16/is-living-abroad-something-for-everyone/">`

在 WordPress 中出现这种情况的一个可能原因是使用两个插件同时更新元数据。

如果您使用的是 Facebook 官方 WordPress 插件，您的元数据可能会从中插入。

# php - jquery checkbox sumbit - 多种形式？

> ID：13430399
> 
> 赞同：1
> 
> 时间：2012-11-17T12:09:11.233
> 
> 标签：php, jquery, forms

单击复选框时，我使用它从单个表单提交值。该表格称为我的表格。

```
$( '#my-form input[type=checkbox]' ).click( function() {
    $.post(
        'form.php',
        $( '#my-form' ).serialize(),
        function( response ) {
            $( '#my-form #form-response' ).html( response );
        }
    );
} ); 
```

这适用于一种形式。但我想有其他形式，也许 10 在同一页面上并重新使用此代码。

我知道每个表单都必须有一个唯一的 ID，但是我如何只提交该表单，而不是其他任何表单？

谢谢 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-17T12:15:30.933

给你所有的表格一个相同的类，并这样做

```
$( '.my-form input[type=checkbox]' ).click( function() {
    var CurrectForm=$(this).parents('.my-form:first');
    $.post(
        'form.php',
        CurrectForm.serialize(),
        function( response ) {
            CurrectForm.find('#form-response').html( response );
        }
    );
} ); 
```

`my-form`是所有表单的类名。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-17T12:16:50.257

您可以将 id 更改为类，然后提交复选框的父表单，如下所示：

```
$( '.my-form input[type=checkbox]' ).click( function() {
    var $my_form = $(this).closest('.my-form');    

    $.post(
        'form.php',
        $my_form.serialize(),
        function( response ) {
            $( '.form-response', $my_form ).html( response );
        }
    );
} ); 
```

# html - 使html表格自动在下一行显示td

> ID：13430401
> 
> 赞同：0
> 
> 时间：2012-11-17T12:09:33.550
> 
> 标签：html, html-table, markup

我在我的管理面板中使用 html 表格。目前，当行很大时，我的表在一个小的浏览器窗口中跨越容器：

![大排](../Images/bd46b4dc8bff243367be476f96afbfa1.png)

我希望表格行不要超出容器，因为它变得太小以至于无法容纳一行。所需的行为是 s 不适合出现在下一行。

这可以实现吗？如何实现？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-17T13:01:56.597

发生的事情是正常的。为了避免大单元格占用如此多的宽度，您可以做的是应用自定义 css 规则。例如，您可以在表格的第三个单元格中为下拉菜单设置固定宽度以节省一些空间。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-17T12:19:39.703

您描述的行为对表格没有意义。表格显示**单元格****行**，它不做高级布局。

 **如果您不希望表格在狭窄的浏览器窗口中破坏设计，请将`min-width`body 标记的属性设置为比表格更宽的值。这样，至少滚动条会出现在窗口的底部，并且不会破坏设计。**

# iphone - 如何在设置/常规/关于中访问 iOS 信息

> ID：13430403
> 
> 赞同：1
> 
> 时间：2012-11-17T12:09:54.283
> 
> 标签：iphone, objective-c, ios

在 iOS 的 about 部分，它有很多关于设备的信息。我可以和我是否可以访问此信息。就像有一个方法可以返回可用的磁盘空间或应用程序的数量。

如果没有可用的单一方法，我可以计算安装的应用程序的数量。

其次，对于像照片数量这样的事情，有没有办法获得这个数字，或者我是否必须进入设备照片库并自己计算。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-17T13:54:48.163

我已经搜索但发现您无法读取或写入设备的设置。这是为了保护用户（假设每个应用程序都可以更改您 iphone 的设置）。那就是您无法获得安装的应用程序数量。

获取可以使用的图像计数的代码`ALAssetsLibrary`

```
ALAssetsLibrary *library = [[ALAssetsLibrary alloc] init];
NSAssert(library, @"Unable to open ALAssetsLibrary");

NSUInteger __block images = 0;
[library enumerateGroupsWithTypes:ALAssetsGroupAll
                       usingBlock:^(ALAssetsGroup *group, BOOL *stop) {
                           images += group.numberOfAssets;
                       }
                     failureBlock:^(NSError *err) {
                         NSLog(@"err=%@", err);
                     }];
NSLog("images count %d", images); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-17T13:22:21.483

尝试使用 systemUtilites 类方法来检索您想要的信息。您可以在此链接中找到它的描述

[http://www.binpress.com/app/ios-system-utilities/908](http://www.binpress.com/app/ios-system-utilities/908)

# java - 如何将int值分配给整数变量

> ID：13430407
> 
> 赞同：2
> 
> 时间：2012-11-17T12:10:30.840
> 
> 标签：java, android, integer, int

如何将 int 值转换为整数值？

这是我的代码-

```
private static int[] value= {R.drawable.collection1,R.drawable.collection2}

public static ArrayList<Integer> AddIntValue (int[] value){
    ArrayList<Integer> Intvalue=new ArrayList<Integer>();

    for(int i=0;i<value.length; i++)
    {
        Intvalue.add(Integer.valueOf(value[i]), null);
    }

    return Intvalue;
} 
```

在**Intvalue.add(Integer.valueOf(value[i]), null);上出现错误**

请帮我

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-17T15:58:02.517

java 5 添加了自动装箱，所以你应该可以使用它

```
int i=3;
Integer number=i;//number now equals 3 
```

您收到错误的原因是因为您使用数组作为索引并尝试在此索引处添加 null。如果您的数组是 {100,101,102}，它会尝试在不存在的索引 100、101 和 102 处将 null 添加到 intValues，从而为您提供 IndexOutOfBoundsEception；

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-17T12:49:12.343

如果您想使用您的代码并且仍然可以控制元素列表索引，您必须： 1\. 初始化 ArrayList 大小 2\. 正确使用 add 方法

```
public static List<Integer> addIntValue(int[] value) {
    List<Integer> intValues = new ArrayList<Integer>(value.length);

    for (int i = 0; i < value.length; i++) {
        intValues.add(i, value[i]);
    }

    return intValues;
} 
```

# javascript - 简单风格的 Pikachoose 数据源（仅限幻灯片）

> ID：13430408
> 
> 赞同：1
> 
> 时间：2012-11-17T12:10:32.457
> 
> 标签：javascript, jquery, slider, slideshow

我如何摆脱底部出现的东西？我想要一个简单风格的幻灯片（没有控件，没有拇指索引等。只是幻灯片）。

到目前为止，我可以让 Pikachoose 动态创建图像。但是，我的问题是：

*   我无法摆脱不需要的项目/元素。我想要一个简单的布局，如本示例[http://www.pikachoose.com/demos/simple/中的布局](http://www.pikachoose.com/demos/simple/)
*   我可以让 Pikachoose 正确调整其背景和宽度：550px 和高度：225

[http://jsfiddle.net/2C5YD/4/](http://jsfiddle.net/2C5YD/4/)

为方便起见，我添加了代码，但是如果您编辑 jsFiddle，它将对我有更多帮助

**HTML：**

```
<head>
    ...head code...
    <link type="text/css" href="../../../_api/PikaChoose/4.5.0/styles/simple.css" rel="stylesheet" />

    <!-- START: scripts ******************************************************* -->
        <!-- jQuery -->
    <script type="text/javascript" src="http://code.jquery.com/jquery-latest.js"></script>
        <!-- Pikachoose -->
    <script type="text/javascript" src="../../../_api/PikaChoose/4.5.0/lib/jquery.jcarousel.min.js"></script>
    <script type="text/javascript" src="../../../_api/PikaChoose/4.5.0/lib/jquery.pikachoose.full.js"></script>
        <!-- Data -->
    <script type="text/javascript" src="../../../_temp/StackOverflow/PikaChoose/datasource-js.php"></script>
    <!-- END: scripts ******************************************************* -->

</head>

<body>
<!-- START: content ******************************************************* -->
<div id="content">
    <div class="pikachoose">
    </div>
</div>
<!-- END: content ******************************************************* -->

</body>
</html> 
```

**JS：**

```
$(document).ready(function (){
     var $banner = [{"image":"_img/home/banner/banner_01.jpg","caption":"My caption","link":"#","title":"It's a title"}...and so on...];         

    $(".pikachoose").PikaChoose( {data:$banner, speed: 4000, animationSpeed: 1500} );
} ); 
```

# windows-8 - 网格视图 - 如何停止移动内容

> ID：13430409
> 
> 赞同：3
> 
> 时间：2012-11-17T12:10:35.763
> 
> 标签：windows-8

我已经编写了如下菜单，除了一件事之外它运行良好。当我拖动 GridView 的内容时，它会稍微移动，在这种情况下看起来很糟糕。有什么财产或方法可以阻止它。它是菜单，所以我喜欢拖动时内容不移动。

![在此处输入图像描述](../Images/eea8f98cad06acdda1ecffb6e2c36790.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T13:49:24.453

您是否尝试过禁用`ScrollViewer`控件，像这样......

```
<GridView ScrollViewer.HorizontalScrollBarVisibility="Disabled" 
          ScrollViewer.HorizontalScrollMode="Disabled">
    <!--Your Content-->
</GridView> 
```

# spring - 未连接到 Internet 时 Spring 配置出错

> ID：13430413
> 
> 赞同：2
> 
> 时间：2012-11-17T12:11:23.677
> 
> 标签：spring

我的 Spring 配置如下：

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:tx="http://www.springframework.org/schema/tx"
xmlns:aop="http://www.springframework.org/schema/aop"
xsi:schemaLocation="http://www.springframework.org/schema/beans 
                        http://www.springframework.org/schema/beans/spring-beans-3.1.xsd
                        http://www.springframework.org/schema/tx http://www.springframework.org/schema/tx/spring-tx-3.1.xsd
                        http://www.springframework.org/schema/aop http://www.springframework.org/schema/aop/spring-aop-3.1.xsd"> 
```

当服务器连接到互联网时，这可以正常工作。但是，如果访问被撤销，则会发生以下错误：

> org.springframework.beans.factory.xml.XmlBeanDefinitionStoreException：来自类路径资源 [spring/applicationContext-service-webapp.xml] 的 XML 文档中的第 2 行无效；嵌套异常是 org.xml.sax.SAXParseException：与元素类型“http-equiv”关联的属性“{1}”需要打开引号。

知道为什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-17T13:00:46.320

似乎正在加载所包含架构之一的某些不同版本，或者根本无法访问/加载该架构。

* * *

**更新** 排除 pom 文件中的重复工件将解决问题。

# macos - 在osx中 使用SecKeychainFindGenericPassword时在passwordData中获取附加数据

> ID：13430415
> 
> 赞同：1
> 
> 时间：2012-11-17T12:11:45.463
> 
> 标签：macos, printing, passwords, keychain, garbage

我正在使用以下代码从钥匙串中获取密码。

```
-(OSStatus *)getPasswordFromKeyChain:(NSString *)username{
    OSStatus status;

    const char *cService_name = "Mac App";
    UInt32 service_length = strlen(cService_name);

    const char *cUser_name = [username cStringUsingEncoding:NSUTF8StringEncoding];
    UInt32 username_length = strlen(cUser_name);

    void *passwordData = nil; 
    SecKeychainItemRef itemRef = nil;
    UInt32 passwordLength = nil;

    status = SecKeychainFindGenericPassword(
                                    NULL,            // default keychain
                                    service_length,  // length of service name
                                    cService_name,    // service name
                                    username_length,// length of account name
                                    cUser_name,    // account name
                                    &passwordLength,  // length of password
                                    passwordData,        // pointer to password data
                                    NULL             // the item reference
                                    );
    NSLog(@"%s",passwordData);

    status = SecKeychainItemFreeContent (NULL,           //No attribute data to release
                                     passwordData);    //Release data buffer allocated by SecKeychainFindGenericPassword

    return status;
} 
```

当我获得成功状态时，这很好用。

但是当我尝试打印我获得的密码时，我得到以下结果 - 如果密码超过 6 个字符，我会在实际密码的末尾看到一些乱码。例如

```
2012-11-17 12:01:28.731 MAC App[2042:303] sssssss`—~ 
```

如果密码少于或等于 6 个字符，我会得到正确的密码。例如

```
2012-11-17 12:01:33.244 MAC App[2042:303] ssssss 
```

我的问题是为什么我最后会得到这些垃圾字符？我该如何解决这个问题？我需要这个密码才能在我的应用程序中使用它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-17T12:28:59.353

我从[这个链接](http://www.cocoabuilder.com/archive/cocoa/280680-convert-password-from-seckeychainfindgenericpassword-to-nsstring.html)得到了答案。

获取字符的原因在提供的链接中进行了说明。我使用以下代码将密码转换为 NSString，这对我有用。

```
 NSString *tempStr = [[NSString alloc]initWithBytes:passwordData length:passwordLength encoding:NSUTF8StringEncoding];

NSLog(@"%@",tempStr); 
```

# c - 在这种情况下会发生堆碎片吗？

> ID：13430422
> 
> 赞同：2
> 
> 时间：2012-11-17T12:12:35.027
> 
> 标签：c, memory, heap-memory

在具有多次迭代的循环中，在循环开始时我分配一些空间，处理它并在最后释放它。像这样的东西：

```
....
while(...){
  list=malloc(N);
  do_some_work_with_list(...)
  free(list)
} 
```

这里会出现碎片吗？

PS我已经尝试发布这个问题，但后来找不到，如果重复，对不起

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-17T12:17:46.960

这得看情况。如果没有其他分配发生，也不会发生碎片，因为分配的块将在分配下一个块之前被释放。但是，如果`do_some_work_with_list`分配在返回之前未释放的内存，*则可能*会发生碎片。此外，如果分配了其他线程、库调用等，则*可能*存在碎片。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-17T15:52:58.523

这将完全取决于平台的内存管理技术（例如，首先分配最大的空闲块/最适合的空闲块）和堆内存中的当前分配状态。

由于堆是动态内存分配的地方，如果找到一个足够大的块来分配，那么一旦你以后释放内存就不会造成碎片。如果由于之前堆中存在碎片而没有找到单个块，那么很可能碎片可能会因这段代码而增加（同时考虑到系统上运行的其他线程可能同时分配内存）。

# iphone - 适用于多个设备的 iOS 背景图像

> ID：13430427
> 
> 赞同：3
> 
> 时间：2012-11-17T12:12:53.560
> 
> 标签：iphone, objective-c, ios, uiimageview

我是一名 iOS 开发爱好者（实际上是个初学者）。我目前正在制作一个 iPhone 应用程序并尝试定义一个适用于 480、960 和 1136 分辨率的通用背景图像。

我的想法是将图像视图与图像一起放入背景中，并且其顶部的所有其他视图都将使用 clearColor 作为背景；因此，背景图像将始终可见。问题是图像不能失真；所以，我实际上在不同的屏幕尺寸上显示了三个不同的图像。

问题是我真的不知道如何让这个概念发挥作用。我试图在互联网上搜索答案但无济于事，这让我认为可能有更好的方法来做到这一点。

有人可以让我开始使用上述想法或向我展示一种实现相同目标但更有效的方法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-17T15:59:30.123

好的，我相信我解决了它（在下面评论者的帮助下:)。这是我的代码似乎有效（尽管它可能不是最好的解决方案；所以，如果您有更好的方法，请告诉我）：

```
UIImage *backgroundImage = [[UIImage alloc] init];
if ([UIScreen mainScreen].bounds.size.height > 480.0f) {
    backgroundImage = [UIImage imageNamed:@"background-568h.png"];
    }
else {
    backgroundImage = [UIImage imageNamed:@"background.png"];
    }

 self.window.backgroundColor = [UIColor colorWithPatternImage:backgroundImage]; 
```

一件重要的事情：即使目前没有设备使用 4 英寸非视网膜显示屏，当您在代码中引用图片时，您需要使用非视网膜版本，然后包含具有较小图像的视网膜版本。所以需要有一个 background-568h@2x.png 用于代码中引用的 background-568h.png。没有意义，但这就是它的工作方式......：P

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-17T12:21:33.183

对于 480 像素 - ImageName.png

对于 960px - ImageName@2x.png （将自动作为视网膜显示的图像）。

对于 1136px，请参考此[链接](http://angelolloqui.com/blog/20-iPhone5-568h-image-loading)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-17T13:00:51.957

为每种分辨率提供单独的图像是相当普遍且值得推荐的。不过，你的想法是可以理解的。我假设您的图形可以很好地适应各种设备的所有不同纵横比。如果是这样，那么只需创建一个具有您想要使用的最大分辨率的图像（我想是 png）。将此图像分配给您用于背景的 UIImageView 对象。以编程方式在 IB 或 UIViewContentModeScaleToFill 中将内容模式设置为“缩放以填充”。

# php - 打印垂直排序的 4 列数组

> ID：13430435
> 
> 赞同：2
> 
> 时间：2012-11-17T12:13:15.840
> 
> 标签：php, sorting

我需要打印一个包含 4 列菜单项的数组，垂直排序，并像这样填写：

![在此处输入图像描述](../Images/5729cc9c45a8df9443bc58c0a6e6ef1d.png)

这是要遵循的标记结构（5 项）。

```
<ul>
    <li>1</li>
    <li>2</li>
</ul>
<ul>
    <li>3</li>
</ul>
<ul>
    <li>4</li>
</ul>
<ul>
    <li>5</li>
</ul> 
```

我一直在尝试这样的事情，但这不起作用，因为它没有首先填写行，如上例所示：

```
$cols = 4;
$cnt = count($items);

echo "<ul>";
foreach($items as $i => $item) {
     echo "<li>" . $item->ID . "</li>";
    if(($i + 1)%$cols == 0 && ($i + 1) != $cnt) {
        echo "</ul>\n<ul>";
    }
}
echo "</ul>"; 
```

对此的任何帮助表示赞赏！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-17T12:44:16.623

这样的事情应该可以解决您想做的事情。只需输入一个数据数组和所需的列数，它将将该数组分成指定的列数

```
<?php
    $items = array(1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17);
    $numCols = 4;
    $result = ListArrayVals($items,$numCols);
    echo $result;
    function ListArrayVals($items,$numCols) {
        $minPerRow = floor(count($items)/$numCols);
        $remaining = count($items) % $numCols;
        $colCount = array();
        for ($i = 0;$i<$numCols;$i++) {
            if ($i < $remaining) {
                array_push($colCount,$minPerRow+1);
            } else {
                array_push($colCount,$minPerRow);
            }
        }
        $listString = '';
        $count = 0;
        for ($i = 0;$i<count($colCount);$i++) {
            $listString = $listString . "<ul>";
            for ($j = 0;$j<$colCount[$i];$j++) {
                $listString = $listString . '<li>' . $items[$count] . '</li>';
                $count = $count + 1;
            }
            $listString = $listString . '</ul>';
        }
        return $listString;
    }
?> 
```

只需简单地更改 echo 语句以包装任何 HTML 标记或您想要的任何内容。

**编辑**我修好了。它现在适用于任意数量的列和输入数据。我还把它做成了一个函数，所以它可以重复使用很多次。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-17T15:33:58.427

试试[css3多列属性](http://www.w3schools.com/css3/css3_multiple_columns.asp)

```
<style>
.menu {
  -moz-column-count:4; /* Firefox */
  -webkit-column-count:4; /* Safari and Chrome */
  column-count:4;
}
</style>

<ul class="menu">
  <li>1</li>
  <li>2</li>
  <li>3</li>
  <li>4</li>
  <li>5</li>
  <li>6</li>
  <li>7</li>
</ul> 
```

# random - REXX 选择随机说命令

> ID：13430437
> 
> 赞同：0
> 
> 时间：2012-11-17T12:13:21.527
> 
> 标签：random, command, rexx

任何人都知道如何做到这一点？：

```
say 'something'
or 
say 'something'
or 
say 'something' 
```

我想在这些说命令之间随机选择。怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-17T22:22:08.400

```
/* REXX */    
x = RANDOM(1,3)
       Select
         when x = 1 then
            say 'something'
         when x = 2 then do
            say 'something'
         Otherwise
            say 'something'
       end  /* Select */
 Pull answer .
 if answer='NO' then say 'Answer is NO.' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-17T14:52:33.867

我建议使用[Random](http://publibfp.dhe.ibm.com/cgi-bin/bookmgr/BOOKS/e04a2a01/4.4.42?DT=19921218100410)函数和[Select](http://publibfp.dhe.ibm.com/cgi-bin/bookmgr/BOOKS/e04a2a01/3.21?DT=19921218100410)语句。

# php - CodeIgniter - 使用事务插入多个表

> ID：13430439
> 
> 赞同：2
> 
> 时间：2012-11-17T12:13:27.053
> 
> 标签：php, codeigniter

我目前正在关注关于在 PHP / MySQL 中创建论坛的教程......并且我试图将它实现到我的 CodeIgniter 项目中。

我遇到了一个我以前从未处理过的问题，交易......我已经阅读了关于 codeigniters 交易的文档，但考虑到我需要转换的代码，我并没有真正理解它。

我想知道是否有人可以将下面的代码转换为我的 codeigniters 事务代码，我自己尝试过，但它使用多个表，我完全糊涂了。

任何帮助都会很棒，代码如下：

```
$query = "BEGIN WORK;";
$result = mysql_query($query)

if(!$result) {
    echo 'An error has occured';
} else {
    $sql = "INSERT INTO topics(t_subeject,date,cat) VALUES ($_POST['subject'],NOW(),$_POST['cat'])";
    $result = mysql_query($sql);

    if(!$result) {
        echo 'An error has occured';
        $sql = "ROLLBACK;";
        $result = mysql_query($query)
    } else {
        $topid = mysql_insery_id();
        $sql = "INSERT INTO posts(content, date) VALUES ($_POST['content'],NOW())";
        $result = mysql_query($sql);

        if(!$result) {
            echo 'An error has occured';
            $sql = "ROLLBACK;";
            $result = mysql_query($sql);
        } else {
            $sql = "COMMIT;";
            $result = mysql_query($sql);
            echo 'Insert successful!';
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-17T12:26:18.853

如果 INSERT 失败，它将自动执行 ROLLBACK。这就是您首先使用事务的原因。无需明确检查。所以最后，这应该是它的全部内容：

```
$this->db->trans_start();
$this->db->query("INSERT INTO topics(t_subeject,date,cat) VALUES ($_POST['subject'],NOW(),$_POST['cat'])");
$topid=$this->db->insert_id();
$this->db->query("INSERT INTO posts(content, date) VALUES ($_POST['content'],NOW())");
$this->db->trans_complete(); 
```

...从您的模型类中。因此，如果第一个 INSERT 已经失败，它将不会执行第二个。

[http://ellislab.com/codeigniter/user_guide/database/transactions.html](http://ellislab.com/codeigniter/user_guide/database/transactions.html)

# php - 将帖子空白数据提交到mysql

> ID：13430441
> 
> 赞同：2
> 
> 时间：2012-11-17T12:13:41.580
> 
> 标签：php, html, mysql, post

我对此真的很陌生，我遇到了问题，过去几天一直在伤害我的大脑，我尝试搜索我的问题和事情，但没有任何效果。

问题是，我有一个 HTML 表单，当您单击提交时，它会将数据发布到 mysql 表中，它可以很好地提交数据，但是每次您按下提交时，它都会提交一组数据，其中所有字段都是空白的，除了`customer`对应的字段到 $session_user_id。

我已经尝试过' if isset '，但它似乎对代码没有影响。这可能是我缺少的一些小东西，但我没有收到任何错误。我的代码在下面，数据库连接在另一个 .php 文件中并且工作正常。

```
<?php

if ( isset($session_user_id, $_POST['description'])){

$description = htmlentities(mysql_real_escape_string($_POST['description']));

mysql_query ("INSERT INTO `jobs` (customer, description) 
    VALUES ('".$session_user_id."', '".$description."')");

}

?> 
```

和我的html表单：

```
<form action="" method="POST">
    <ul>
        <li>
            <label for="description">Description:</label>
            <textarea name="description" rows=5 cols=30></textarea>
        </li>
        <li>
            <input type="submit" value="Submit">
        </li>
    </ul>
</form> 
```

非常感谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-17T12:58:07.340

尝试删除`htmlentities`原因仅适用于特定字符集。[在这里](http://php.net/manual/en/function.htmlentities.php)也检查一下。

# android - 使用 ActionBarSherlock 和支持库

> ID：13430447
> 
> 赞同：2
> 
> 时间：2012-11-17T12:14:09.893
> 
> 标签：android, actionbarsherlock

我正在尝试向我的应用程序添加菜单，为了与旧版本的 android 兼容，我决定尝试 ActionBarSherlock。

我的应用大量使用 support v4 库，例如它使用`ViewPager`.

现在，当我添加 ActionBarSherlock 时，我得到了“jar mismatch”错误。通过从构建路径中删除支持库 jar 来解决此问题。但是对于所有使用支持库的东西，我得到“无法解析为一种类型”。我知道 ABS 导出了一些类，例如 SherlockFragmentsActivity，但它没有类似`SherlockViewPager`.

我如何使用支持库，或者我在这里遗漏了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-17T12:50:26.067

我不知道是否有其他方法可以修复它，但只需将 v4 支持库从 ABS 复制到您的项目（或相反）并将其添加到构建路径。它应该可以工作并且不应该出现“jar mismatch”错误。这就是我在项目中的做法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-17T12:29:54.690

ABS 已经在使用 android 支持库。如果您也在使用它，请让您的项目和 ABS 使用相同的版本。

一种简单的方法是从项目中删除支持库并添加到 ABS 库项目中。

这样，支持库将与 ABS 同时提供给您的项目

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-12T08:38:00.420

看起来您有 2 个版本的库.... 一个来自 ABS，第二个来自您添加的支持库。一旦尝试从您的 lib 文件夹中删除 android-support-V4.jar 并重建项目。

# java - 使用 Java 将多维数组添加到数组列表

> ID：13430448
> 
> 赞同：0
> 
> 时间：2012-11-17T12:14:18.643
> 
> 标签：java, multidimensional-array, arraylist

我有一个方法（函数），应该将 (8*6)Array 添加到 Array 列表中。函数被多次调用。

```
int [][] KeySelection = new int [8][7];

  for(int i=0;i<KeySelection.length;i++){
  for(int j=0;j<KeySelection[0].length;j++){
      KeySelection[i][j] = (int) (Math.random () * 2);

     }
  } 
```

每次调用此函数时，`KeySelection`都会完成一个全新的数组。我现在需要的是声明一个数组列表，以便它可以将所有`KeySelection`数组存储在该列表中。

这样当我需要第一个`KeySelection`表时，我可以在数组列表的第一个索引中找到它。有人可以帮忙吗

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-17T12:29:39.717

创建一个`ArrayList`类型`int[][]`： -

```
List<int[][]> list = new ArrayList<int[][]>(); 
```

然后，在创建后将您的数组添加到此列表中：-

```
list.add(keySelection); 
```

**注意： -**变量名称应以小写字母开头。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-17T12:16:09.820

由于 Java 中的数组是特殊类型的对象，因此您可以使用对象的 ArrayList 来保存数组。像这样声明您的列表并通过 for 循环等填充它。

```
ArrayList<int[][]> list = new ArrayList<int[][]>(); 
```

# php - 重定向除 webkit 之外的所有浏览器

> ID：13430452
> 
> 赞同：0
> 
> 时间：2012-11-17T12:14:35.270
> 
> 标签：php, jquery, apache

如何将除 webkit 之外的所有浏览器重定向到特定 URL？

我正在研究 Apache/Htaccess、jQuery/Javascript 等，但除了 IE 的这个东西之外，我还没有找到太多：

```
 <!--[if IE]>
   <script type="text/javascript">
      window.location = "http://www.site.net/classic/";
   </script>
 <![endif]--> 
```

换句话说，如何托管一个仅 webkit 的网站？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-17T12:22:56.073

这是jquery解决方案：

```
 if (!$.browser.webkit) {
        window.location = "http://www.site.net/classic/";
   } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-17T12:27:50.843

对于一种`php`方法，您可以使用该`$_SERVER['HTTP_USER_AGENT']`变量来确定您的用户浏览器正在使用哪个引擎，然后简单地将页面显示给带有`webkit`引擎的引擎，如下所示：

```
<!DOCTYPE html>
<?php   

    $navigator_user_agent = ' ' . strtolower($_SERVER['HTTP_USER_AGENT']);
    if (strpos($navigator_user_agent, "webkit")) { 
?>

//Your page goes here

<?php
    } else {

        header('Location: www.example.com/get-webkit'); //redirects user to the given location
    }
?> 
```

即使执行上述操作，您也不能 100% 确定访问您的站点的浏览器是什么，因为有一些工具可以修改浏览器被引入服务器的方式，甚至包括基于 cUrl 的机器人，它们可以简单地更改其用户代理变量。

# meteor - 在流星#each 迭代器中使用@index 不起作用

> ID：13430455
> 
> 赞同：11
> 
> 时间：2012-11-17T12:14:47.893
> 
> 标签：meteor, handlebars.js

为什么这在流星中不起作用？[https://github.com/wycats/handlebars.js/issues/250](https://github.com/wycats/handlebars.js/issues/250)

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-14T00:12:18.943

它尚未在流星版本的车把中实现；`@index`正确渲染的反应性有一个微妙之处。你可以在这里阅读更多关于它的信息：[https ://github.com/meteor/meteor/issues/489#issuecomment-11270564](https://github.com/meteor/meteor/issues/489#issuecomment-11270564)

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-10-02T06:31:00.157

这对我来说绝对是一种挫败感。与此同时，我制作了一个车把助手来将任何内容解析为命名的“键”和“值”对象：

```
Handlebars.registerHelper('key_value', function(context, options) {
  var result = [];
  _.each(context, function(value, key, list){
    result.push({key:key, value:value});
  })
  return result;
}); 
```

这将与`#each`运算符一起使用，例如：

```
<dl class="attributes">
  {{#each key_value attributes}}
    <dt>{{key}}</dt><dd>{{value}}</dd>
  {{/each}}
</dl> 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-12-28T08:17:34.213

让它工作的另一种方法是使用带有[地图光标功能](http://docs.meteor.com/#map)的标准 Meteor 模板助手。

下面是一个示例，展示了在将 each 与集合一起使用时如何返回索引：

```
index.html:

<template name="print_collection_indices">
  {{#each items}}
    index: {{ this.index }}
  {{/each}}

index.js:

Items = new Meteor.Collection('items');

Template.print_collection_indices.items = function() {
  var items = Items.find().map(function(doc, index, cursor) {
    var i = _.extend(doc, {index: index});
    return i;
  });
  return items;
}; 
```

# c# - 如何泛化具有相同结构但属性名称不同的类？

> ID：13430471
> 
> 赞同：0
> 
> 时间：2012-11-17T12:16:29.400
> 
> 标签：c#, architecture

我在 Windows 窗体应用程序上使用的数据库有很多表，这些表由主键 int 标识字段、varchar 描述以及与另一个使用其 id 和描述的表的一对一关系组成。

我使用 Entity Framework Code First 映射到数据库的 C# POCO 的一个示例是：

```
public class OtherClass
{
  public int Id { get; set; }
  public string Description { get; set; }
}

public class Foo
{
  public int Id { get; set; }
  public string Description { get; set; }
  public OtherClass OtherClassProperty { get; set; }
} 
```

因为像“Foo”这样的类都共享相同的结构，所以我正在创建一种基本形式，它应该能够与像这样的所有类一起使用。

我的问题是所有这些类的 ID 和描述都有不同的属性名称（例如，有时称为名称）。更不用说他们引用的另一个类总是不同的。

我的第一个想法是创建一个需要实现具有固定名称的属性的接口：Id、Description、KeyId、KeyDescription。这些属性将在每个类上实现，但仅指向“真实属性”。像这样：

```
public class Foo : MyInterface
{
  public int Id { get; set; }
  public string Description { get; set; }
  public OtherClass OtherClassProperty { get; set; }  

  //Interface implementation
  public int CommonId { get { return this.Id; } set { this.Id = value; } }
  public int CommonDescription { get { return this.Description; } set { this.Description = value; } }
  public int CommonKeyId { get { return this.OtherClassProperty.Id; } set { this.OtherClassProperty.Id = value; } }
  public int CommonKeyDescription { get { return this.OtherClassProperty.Description; } set { this.OtherClassProperty.Description = value; } }
} 
```

我的印象是可能有更好的解决方案。我还可以想象实现属性属性并使用反射在运行时检查并获取属性。

有人对这种情况有什么建议吗？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-17T12:36:54.187

对我来说，这看起来是一个很好的实现。

它直截了当且易于理解。

但是我会考虑使用显式接口实现

```
public int MyInterface.CommonId { get { return this.Id; } set { this.Id = value; } } 
```

代替

```
public int CommonId { get { return this.Id; } set { this.Id = value; } } 
```

如果可能的话，我还将创建一个长期的架构目标来重构数据库以统一命名。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-17T12:40:41.763

固定名字听起来是个不错的方向。查看[适配器模式](http://en.wikipedia.org/wiki/Adapter_pattern)以获得更正式的方法。

# ios - iOS 6 模拟器上的智能横幅不起作用

> ID：13430487
> 
> 赞同：2
> 
> 时间：2012-11-17T12:18:16.293
> 
> 标签：ios, xcode, ios-simulator

智能应用横幅似乎可以在设备上运行，但似乎无法在模拟器设备上触发。

我目前在 iphone 4 英寸视网膜模拟器上运行 iOS6。

我错过了什么吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-05T11:03:53.113

无法在 iPhone 模拟器上启动 AppStore。然后，当您尝试打开链接时，模拟器不会对此操作做出反应。

我已经用安装在模拟器上的应用程序测试了这个功能，但这不起作用，所以我认为苹果没有在模拟器上实现它。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-10-20T15:14:20.033

根据苹果的[文档](https://developer.apple.com/library/ios/documentation/AppleApplications/Reference/SafariWebContent/PromotingAppswithAppBanners/PromotingAppswithAppBanners.html)：

> 横幅不会出现在 iOS 模拟器中。

# c++ - C++ 如何让这段代码更有效率？

> ID：13430490
> 
> 赞同：2
> 
> 时间：2012-11-17T12:18:57.020
> 
> 标签：c++, performance, organization

我有一个单词数组，我有一个文本文件。我想要做的是使用单词数组并搜索文本文件，计算数组中每个单词出现在文本文件中的次数。

我曾考虑过使用 For 循环，但这只是给了我总字数，而不是每个字数。我无法将文本文件放入数组中，因为文本文件中有大约 40000 个单词。

计数后，我想将每个计数除以一个称为“比例”的整数值。然后用新的计数乘以一个字符串。

所以我目前正在这样做，如下所示。无论如何我可以提高效率吗？

任何帮助是极大的赞赏。

单词数组 = 测试词。

文件名 = testF。

inWord = 文件中的每个单词。

```
while(testF >> inWord)
    {if (inWord == testwords[0]){
            count1++;
            }
        if (inWord == testwords[1]){
            count2++;
            }
        if (inWord == testwords[2]){
            count3++;
            }
        if (inWord == testwords[3]){
            count4++;
            }
        if (inWord == testwords[4]){
            count5++;
            }
        if (inWord == testwords[5]){
            count6++;
            }
        if (inWord == testwords[6]){
            count7++;
            }
        if (inWord == testwords[7]){
            count8++;
            }
}
cout << testwords[0] << " " << count1 << " " << s1.append(count1/scale, '*') << endl;
cout << testwords[1] << " " << count2 << " " << s2.append(count2/scale, '*') << endl;
cout << testwords[2] << " " << count3 << " " << s3.append(count3/scale, '*') << endl;
cout << testwords[3] << " " << count4 << " " << s4.append(count4/scale, '*') << endl;
cout << testwords[4] << " " << count5 << " " << s5.append(count5/scale, '*') << endl;
cout << testwords[5] << " " << count6 << " " << s6.append(count6/scale, '*') << endl;
cout << testwords[6] << " " << count7 << " " << s7.append(count7/scale, '*') << endl;
cout << testwords[7] << " " << count8 << " " << s8.append(count8/scale, '*') << endl; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-17T12:21:10.000

在担心效率之前，您应该担心方法。您没有使用逻辑数据结构。不要有 8 个单独的计数，而是保留一个计数数组。或者更好的是，保留单词图 -> 计数。

幸运的是，在这种情况下，更简洁的代码将对应于更快的执行速度。

特别是，使用`std::map<std::string, size_t>`.

或者，如果您使用 C++11，则可以使用 std::unordered_map 以获得更好的性能。

假设您正在阅读您的话`cin`：

```
std::map<std::string, size_t> counts;

std::string word;

while (std::cin >> word) {
    ++counts[word];
}

for (std::map<std::string, size_t::const_iterator it = counts.begin(),
     end = counts.end(); it != end; ++it) {
    std::cout << "The word '" << it->first << " appeared " 
              << it->second << " times" << std::endl;
} 
```

[std::map 的文档](http://en.cppreference.com/w/cpp/container/map)。

[std::unordered_map 的文档](http://en.cppreference.com/w/cpp/container/unordered_map)。

对于它的价值， std::unordered_map （几乎总是）实现为[hash map](http://en.wikipedia.org/wiki/Hash_table)，并且 std::map 使用平衡二叉树作为支持结构来实现（几乎总是）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-17T12:21:04.227

设置一个`std::map<std::string, unsigned long long>`，逐字扫描文档，并为每个单词递增计数器：

```
std::map<std::string, unsigned long long> wordMap;

std::string word; // read words into this string
...
wordMap[word]++; // increase counter each time a word is found. First call will insert 0. 
```

然后你可以遍历你的单词数组，检查地图中的条目：

```
for (unsigned int i = 0; i < nWords; ++i)
{
  std::cout << "Word " << testWords[i] << " was found " << wordMap[testWords[i]] << " times\n";
} 
```

每次找到一个新词，`myMap[word]`都会插入一个键值对`word : 0`。

如果你有 c++11，你可以尝试使用 an`std::unordered_map`并选择性能最好的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-17T12:34:58.750

只需比较 8 个值，您很可能会找到比 std.h 更好的哈希算法。它可能只包含前两个字符，或最后一个字符，或字符串长度：

```
while (std::cin >> word) {
  int i=my_hash(word);
  if (word==my_sparse_hash_table[i].word) my_sparse_hash_table[i].count++;
} 
```

只需使用您的方法：

```
while (std::cin >> word) {
   for (int i=0;i<N;i++) 
     if (word == myTable[i].word) { myTable[i].count++; break; }
}  // earlies break out of the loop 
```

微优化包括将找到的条目移向数组 myTable 的开头。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-17T13:09:05.910

这里的所有其他答案都是非常好的建议。您可以进行的一项小优化是在现有代码中使用**else 。**

```
if (inWord == testwords[0])
{
    count1++;
}
if (inWord == testwords[1])
{
    count2++;
} 
```

可以替换为

```
if (inWord == testwords[0])
{
    count1++;
}
else if (inWord == testwords[1])
{
    count2++;
} 
```

这个概念是，如果**inWord**确实匹配元素 0，则不太可能匹配任何其他元素。

无论如何， [Profilers](http://en.wikipedia.org/wiki/Profiling_%28computer_programming%29)都是你的朋友。

# ruby-on-rails - 寻找更快的 ActiveRecord 查询（Ruby on Rails）

> ID：13430491
> 
> 赞同：5
> 
> 时间：2012-11-17T12:19:13.173
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, performance

我有一个按特定顺序排序的模型。我的目标是从模型中找到一条记录，其中所有先前记录的特定列的总和等于某个数字。下面的例子得到了我需要的东西，但它很慢，尤其是在一张相当大的桌子上。有没有更快的方法来解决所有先前产品点的总和 = 100000 的 product.id？

```
 total_points = 0
 find_point_level = 100000
 @products = Product.order("id").all
 @products.each do |product|
    total_points = product.points + total_points
    @find_product = product.id
    break if total_points >= find_point_level
 end 
```

**更新**

以下是一些解决方案的一些时间。这将通过大约 60,000 条记录。时间用于 ActiveRecord。

原始示例（上）：
2685.0ms
1238.8ms
1428.0ms

使用 find_each 的原始示例：
799.6ms
799.4ms
797.8ms

用总和创建一个新列：
181.3ms
170.7ms
172.2ms

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-17T12:33:11.800

您可以尝试对数据库进行非规范化，并将部分总和直接保存在`products`表中。简单的查询`where`and`limit`将立即为您返回正确的答案。

您需要创建额外的过滤器，每当添加产品时都会更新单个记录，并且每当产品被删除或它的`points`字段被更改时都会更新所有产品。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-17T13:03:32.140

事实证明，实际上有一种方法可以在 SQL 中执行此操作。首先，让我们设置一些测试环境：

```
rails new foobar
cd foobar
rails g model Product name:string points:integer
rake db:migrate
rails console 
```

在 Rails 控制台中，向数据库提供一些记录：

```
Product.new(name: 'Foo',  points: 1).save!
Product.new(name: 'Bar',  points: 2).save!
Product.new(name: 'Baz',  points: 3).save!
Product.new(name: 'Baf',  points: 4).save!
Product.new(name: 'Quux', points: 5).save! 
```

Now i found a way of getting running totals in SQL [in this post here](http://www.databasejournal.com/features/mssql/article.php/3112381/SQL-Server-Calculating-Running-Totals-Subtotals-and-Grand-Total-Without-a-Cursor.htm). It works like this:

```
query = <<-SQL
  SELECT *, (
    SELECT SUM(points)
    FROM products
    WHERE id <= p.id
  ) AS total_points
  FROM products p
SQL 
```

Running this query against the test DB gives us:

```
Product.find_by_sql(query).each do |p|
  puts p.name.ljust(5) + p.points.to_s.rjust(2) + p.total_points.to_s.rjust(3)
end

# Foo   1  1
# Bar   2  3
# Baz   3  6
# Baf   4 10
# Quux  5 15 
```

So we can now use a `HAVING` clause (and a `GROUP BY` because this is needed for `HAVING`)to fetch only the products that match the condition and `LIMIT` the number of results to one:

```
query = <<-SQL
  SELECT *, (
    SELECT SUM(points)
    FROM products
    WHERE id <= p.id
  ) AS total_points
  FROM products p
  GROUP BY p.id
  HAVING total_points >= #{find_point_level}
  LIMIT 1
SQL 
```

I'm really curious how this performs in your environment with many many records. Give it a try and tell me if it works for you, if you like.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-17T13:18:16.460

*   this does not really solve the problem, but you can use `find_each` instead of `each` to load products in batches instead of loading all the table. see the [guides](http://guides.rubyonrails.org/active_record_querying.html#retrieving-multiple-objects-in-batches)

**EDIT** ignore the following, i forgot that window functions do not permit WHERE and HAVING clauses

*   ~~if you are willing to use a non db-agnostic solution, you can use this (not tested):~~

     ~~```
    query = <<-SQL
      SELECT id, SUM(points) OVER (ORDER BY id) AS total_points
      FROM products
      HAVING total_points >= 100000
      LIMIT 1
    SQL

    @product = Product.find_all_by_sql( query ) 
    ```~~ 

~~this uses window functions that are NOT supported by all RDBMS (Postgresql does). Beware, once you have retrieved the `@product`, it will be a readonly record with only two attributes accessible: `id` and `total_points`~~

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2012-11-17T12:52:51.000

如果表很大，你可以使用普通的 sql 查询：

```
find_point_level = 100000
Product.find_all_by_sql("SELECT SUM(points) FROM (SELECT points FROM products ORDER BY id LIMIT #{find_point_level}) AS subquery") 
```

列索引也应该是数据库中存在的索引。

# regex - 这个用于电子邮件地址验证的正则表达式如何工作？

> ID：13430493
> 
> 赞同：0
> 
> 时间：2012-11-17T12:19:17.013
> 
> 标签：regex, email-validation, capturing-group, regex-group

在搜索用于电子邮件地址验证的正则表达式时，我遇到了这个页面：[http](http://www.regular-expressions.info/email.html) ://www.regular-expressions.info/email.html 。我无法理解。

> 它说： \b[A-Z0-9._%+-]+@(?:[A-Z0-9-]+.)+[AZ]{2,4}\b 将匹配 john@server。 department.company.com 但不是 john@aol...com。

你能`(?:[A-Z0-9-]+\.)`详细解释一下它是如何工作的，以及它是如何不匹配`john@aol...com`和匹配另一个的吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-17T12:32:41.673

那是因为 a 的出现`.`只有一次，所以`.`不会匹配多个。要匹配`..`or `...`etc ，它必须是`\.+`（`+`表示一次或多次，并且与`{1,}`

正则表达式表示`(?:[A-Z0-9-]+\.)+`它是一个或多个字母数字（或下划线），带有一个点，整个事情可以重复一次或多次，所以`c.c.c.`会匹配，但`c..c.c.`不会。

这`(?: )`是非捕获的，通常更快。您可以使用`( )`它，它也可以工作，但速度较慢，匹配的文本将进入捕获组。

# c - 在C中读取几个字符串后如何读取带有空格的其余行

> ID：13430495
> 
> 赞同：0
> 
> 时间：2012-11-17T12:19:38.523
> 
> 标签：c, input, fgets

我的输入如下所示：

```
save 001 Some very long string with spaces... after three dots there , is also a comma 
```

在此之后我调用类型：

```
load 001 
```

它应该给我输出：

```
Some very long string with spaces... after three dots there , is also a comma 
```

我正在尝试，但似乎没有任何效果，例如：

```
while ((scanf("%s %s", mode, key)) != EOF) {
    if (strcmp(mode, "save") == 0) { 
        getchar();
        fgets(data, 100, stdin);
        root = save(root, key, data);
        root = balance_RBT(root, blc);
    }
    if (strcmp(mode, "load") == 0) {
        load(root, key); 
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-17T15:34:56.660

给定的输入/输出没有任何问题，其余代码类似于：

```
#include <stdio.h>
int main() 
{ 
  char mode[444], key[333], data[222];
  while (1)
  while ((scanf("%s %s", mode, key)) != EOF) {
    if (strcmp(mode, "save") == 0) { 
      getchar();
      fgets(data, 100, stdin);
      printf("SAVE %s %s %s\n",mode,key,data);
    //root = save(root, key, data);
    //root = balance_RBT(root, blc);
    }
   if (strcmp(mode, "load") == 0) {
     printf("LOAD %s %s\n",mode,key);
     // load(root, key); 
     }
   }
 } 
```

因此，无论您遇到什么问题，他们都必须处理您对模式、键和数据的定义，或者树插入/搜索的实现。

# php - 如何在不选择文件的情况下使用 uploadify 发送表单值？

> ID：13430498
> 
> 赞同：0
> 
> 时间：2012-11-17T12:19:47.417
> 
> 标签：php, jquery, jquery-ui, jquery-plugins

我正在使用 Uplodify 插件上传视频文件和表单数据（一些值），在这种情况下，我想在不选择视频文件的情况下存储表单数据？我发现提交是一个锚链接，所以如何找到视频文件是否存在。它应该在没有选择文件的情况下工作

这是我的工作代码：

```
<form>
Firstname<input type="firstname" name="firstname" id="firstname"  >
    Lastname<input type="lastname" name="lastname" id="lastname"  >
Upload file: <input type="file" name="file_upload" id="file_upload" />
<p><a href="javascript:$('#file_upload').uploadify('upload')">Submit</a></p>

</form>

<script>
$('#file_upload').uploadify({

'swf'      : 'uploadify.swf',
'uploader' : 'new.php',
'method'   : 'post',
'auto'      :false,
'onQueueComplete' : function(queueData) {
    window.location.replace("success.php?success=uploaded");
},
'onUploadStart' : function(file) {

    $('#file_upload').uploadify('settings','formData',{
        'fname': $('input#firstname').val(),
        'lname': $('input#lastname').val()

    });
}

// Your options here
});
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-17T12:23:40.557

好吧，您的锚只需调用处理的 javascript：`Upload file: <input type="file" name="file_upload" id="file_upload" />`您可以简单地使用 PHP 检查输入是否已选择任何内容，然后根据您的需要执行 javascript 和表单。

# java - 尝试使用 DOM 解析时出现 MalformedByteSequenceException 异常

> ID：13430499
> 
> 赞同：0
> 
> 时间：2012-11-17T12:19:49.390
> 
> 标签：java, domparser

我有这个代码：

```
DocumentBuilderFactory builderFactory =
            DocumentBuilderFactory.newInstance();
    DocumentBuilder builder = null;
    try {
        builder = builderFactory.newDocumentBuilder();
    } catch (ParserConfigurationException e) {
        e.printStackTrace();  
    }
    Document document = null;
    try {
        URL url = new URL("http://en.wikipedia.org/wiki/Charlie_Chaplin");

        //Reader reader = new InputStreamReader(url.openStream(),"UTF-8");
        document = builder.parse(url.openStream());
    } catch (SAXException e) {
        e.printStackTrace();
        return;
    } catch (IOException e) {
        e.printStackTrace();
        return;
    } 
```

在我尝试处理的页面上，出现以下异常：

> com.sun.org.apache.xerces.internal.impl.io.MalformedByteSequenceException：1 字节 UTF-8 序列的字节 1 无效。

如何将页面更改为 UTF-8？或者，我还有什么其他方法可以解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-17T12:42:52.863

您正在尝试使用 XML 解析器读取 HTML。你的字符集只是你问题的开始。

您将需要一个适当的 HTML 解析器。如果你想要一个类似 DOM 的结构，我推荐[http://jsoup.org/](http://jsoup.org/)。如果你只想要文本，你可以使用 Apache Tika。

如果您坚持将其提供给 XML 解析器，您可以将字节读取到缓冲区中，然后使用 Tika 的字符编码检测器来发现编码，然后将其转换为字符串，并将字符串提供给 DOM 解析器。

# iphone - 独家触控功能

> ID：13430500
> 
> 赞同：0
> 
> 时间：2012-11-17T12:20:07.593
> 
> 标签：iphone, objective-c, ios

在我的应用程序中，我有一个`UISlider`子视图`UIScrollView`，其中所有内容都以编程方式完成。我在这里设置，

```
 scrollview.userInteractionEnabled=NO; 
```

当我设置这个**UISlider**也被禁用时，即我无法访问 UISlider，这里我只需要为我设置`userInteractionEnabled`为**NO**`scrollview`，对于我使用过的这个问题，

```
scrollview.exclusivetouch=NO; 
```

但我仍然无法访问 UISlider。请帮我

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-17T12:32:24.047

如果 UISlider 检测到触摸事件，请告诉您的 UIScrollview 将事件传递给 UISlider。

确保您已实现此属性。

```
scrollView.userInteractionEnabled = YES; 
```

scrollView.scrollEnabled = 否；

还有一件事，不要依赖模拟器的结果。

检查真实设备。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-17T12:32:24.197

试试这个：

```
scrollView.userInteractionEnabled = YES;
scrollView.scrollEnabled = NO; 
```

这样，触摸被处理，但滚动被禁用（除非您以`contentOffset`编程方式设置）。

# perl - Perl 可以将代码打印为纯文本吗？

> ID：13430501
> 
> 赞同：-3
> 
> 时间：2012-11-17T12:20:07.587
> 
> 标签：perl

我希望 Perl 打印以下字符串：

```
'<span><%= blah %></span>' 
```

但似乎 Perl 试图解析它，因为`%`and`>`

有没有办法避免这种情况？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-17T12:24:06.147

如果您使用单引号，Perl 不会尝试插入变量。如果您的字符串包含单引号，请使用[q](http://perldoc.perl.org/perlop.html#Quote-Like-Operators)：

```
print q{'<span><%= blah %></span>'}; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-17T12:24:14.517

所有的

```
'\'<span><%= blah %></span>\''

q{'<span><%= blah %></span>'}

"'<span><%= blah %></span>'" 
```

和许多其他人产生的字符串

```
'<span><%= blah %></span>' 
```

" `%`" 和 " `>`" 对于单引号运算符和双引号运算符都不是特殊的。由于没有字符是特殊的`print`，您可以使用以下任何一种来实际输出字符串：

```
print '\'<span><%= blah %></span>\'';

print q{'<span><%= blah %></span>'};

print "'<span><%= blah %></span>'"; 
```

# c# - 始终检查特定文件是否存在但始终显示消息框的 C# 代码行，这是为什么呢？

> ID：13430502
> 
> 赞同：2
> 
> 时间：2012-11-17T12:20:09.327
> 
> 标签：c#, timer

我的应用程序成功检测到我想要检测的特定文件，但消息框总是显示不仅一次而且很多次我不知道出了什么问题。

附带的问题是这是始终检查某个文件是否存在的好方法吗？还是有更好更准确的方法？如果有任何建议或链接将有很大帮助。谢谢！

这是我的代码：

```
private void Form1_Load(object sender, EventArgs e)
        {
            timer1.Start();
        }

        private void timer1_Tick(object sender, EventArgs e)
        {
            if (File.Exists(patch_to_checked))
            {
                MessageBox.Show("File Found!");
                timer1.Stop();
            }
        } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-17T12:23:15.957

您应该在进入该功能后立即停止计时器。否则，当用户将光标移动到按钮以关闭消息框时，计时器正在计时：

```
 private void timer1_Tick(object sender, EventArgs e)
    {
        timer1.Stop();

        if (File.Exists(patch_to_checked))
        {
            MessageBox.Show("File Found!");
        }
        else
        {
            timer1.Start();
        }
    } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-17T12:22:56.860

您需要在显示对话框之前停止计时器。

这样做的原因是，当对话框（模态）显示时，“定时器到达”（“Tick”）事件排队。然后，当对话框被关闭时，另一个这样的消息被传递到您的应用程序，导致代码再次执行，再次显示对话框。

您还可以通过以不阻塞导致显示消息的线程的方式显示消息来解决此问题，以便立即继续执行下一条语句。`Tick`但一般来说，如果您需要执行模态或长时间运行的操作，最好在处理事件时停止计时器。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-17T12:21:41.077

```
private void timer1_Tick(object sender, EventArgs e)
{
     timer1.Stop();
     if (File.Exists(patch_to_checked))
     {
          MessageBox.Show("File Found!");
     }
    else
     {
        timer1.Start();
     }
} 
```

重绘屏幕需要一些时间，由于计时器间隔短，它重绘但没有感觉

# kohana - Kohana 3.3 - Profiler/Debug 工具栏

> ID：13430503
> 
> 赞同：1
> 
> 时间：2012-11-17T12:20:26.300
> 
> 标签：kohana, kohana-3.3

是否有任何与 Kohana 3.3[这样](https://github.com/biakaveron/debug-toolbar)或[这样兼容的 Profiler/Debug 工具栏？](https://github.com/Alert/profilertoolbar)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-17T18:59:48.407

Kohana 调试工具栏有一个 3.3 分支：

[https://github.com/biakaveron/debug-toolbar/tree/3.3](https://github.com/biakaveron/debug-toolbar/tree/3.3)

# node.js - 套接字断开连接时是否必须删除事件侦听器？

> ID：13430505
> 
> 赞同：16
> 
> 时间：2012-11-17T12:20:44.713
> 
> 标签：node.js, socket.io

在 socket.io 中，当客户端与服务器断开连接时，`disconnect`会在服务器中为套接字触发事件。我必须`removeAllEventListeners()`从插座`$events`吗？或者当套接字死亡时它会自动发生吗？我听说如果我不这样做，内存泄漏可能会出现在服务器上......

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-11-28T04:41:57.910

After digging through the socket.io source, the socket object (which is the EventEmitter) is deleted when the client disconnects so it is not necessary to manually call removeAllListeners.

# android - 避免缩放壁纸

> ID：13430506
> 
> 赞同：1
> 
> 时间：2012-11-17T12:21:02.913
> 
> 标签：android, image, scaling, wallpaper, homescreen

谁能告诉我如何在不缩放的情况下在 android 上准确设置墙纸.. 目前无论我使用什么分辨率的图像，它只是将其缩放并设置为墙纸..这是我正在使用的代码

```
setWallpaper.setOnClickListener(new View.OnClickListener() {
            public void onClick(View view) {
                WallpaperManager wManager;
                try {                
                //  Bitmap bitmap = ((BitmapDrawable)imageView1.getDrawable()).getBitmap();
                    wManager = WallpaperManager.getInstance(getApplicationContext());
                    wManager.setBitmap(bitmaptwo);
                } catch (IOException e) {
                    e.printStackTrace();
                }
            } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-17T13:35:17.870

固定它..只是用这个代替

```
setWallpaper.setOnClickListener(new View.OnClickListener() {
            public void onClick(View view) {
                WallpaperManager wManager;

                try {

                //  Bitmap bitmap = ((BitmapDrawable)imageView1.getDrawable()).getBitmap();
                    wManager = WallpaperManager.getInstance(getApplicationContext());
                    fullWidth = wManager.getDesiredMinimumWidth();
                    fullHeight = wManager.getDesiredMinimumHeight(); 
                    Bitmap bitmapResized = Bitmap.createScaledBitmap(bitmaptwo, fullWidth, fullHeight,true);
                    wManager.setBitmap(bitmapResized);

                } catch (IOException e) {
                    e.printStackTrace();
                }
            }

        }); 
```

# jquery - 如何在 .NET 中使用 jQuery 将 Text 设置为 DropDownList

> ID：13430510
> 
> 赞同：0
> 
> 时间：2012-11-17T12:21:15.000
> 
> 标签：jquery, .net

包含“示例”之类的值的文本，我希望使用 jQuery 将此文本添加到空下拉列表中，并且应该禁用下拉列表。

这不起作用 -`$('#<%=ddlexm.ClientID %>').text("Example")`

任何人都可以帮助我

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-17T12:23:45.587

你可以这样做

```
$('#<%=ddlPO.ClientID %>').append($("<option></option>").val($('#<%=YourTextBoxId.ClientID %>').val()).html($('#<%=YourTextBoxId.ClientID %>').val()).prop('disabled', true); 
```

# asp.net - gridview 中上传文件的图标

> ID：13430514
> 
> 赞同：0
> 
> 时间：2012-11-17T12:21:27.960
> 
> 标签：asp.net, linq

我有一个网格视图，其中显示文件名、内容类型……上传的 Efile。如何在gridview中的文件名旁边显示上传文件的图标。

```
<asp:GridView ID="GridViewEfile" runat="server" AutoGenerateColumns="False" CellPadding="4"
                    ForeColor="Black"  
DataKeyNames="FileID" GridLines="None" ShowHeader="False" >
             <AlternatingRowStyle BackColor="Yellow" />
                    <Columns>
                     <asp:TemplateField>
                  <ItemTemplate>

<asp:LinkButton ID="LinkButton1" runat="server" OnCommand="LinkButton1_Command" CommandName="Download" CommandArgument='<%#Eval("FileID")%>'><%#Eval("FileName")%></asp:LinkButton>

                       </ItemTemplate>
              </asp:TemplateField>

                        <asp:BoundField DataField="ContentType" />

                     </Columns>
                     <EditRowStyle BackColor="#7C6F57" />
         <FooterStyle BackColor="#1C5E55" Font-Bold="True" ForeColor="White" />
        <HeaderStyle BackColor="Red" Font-Bold="True" ForeColor="White" />
        <PagerStyle BackColor="#666666" ForeColor="White" HorizontalAlign="Center" />
        <RowStyle BackColor="#E3EAEB" />
        <SelectedRowStyle BackColor="#C5BBAF" Font-Bold="True" ForeColor="#333333" />
                    </asp:GridView> 
```

gridview 的数据源代码如下：

```
var queryefile = from efile in _DataContext.tblFiles
                     where ((efile.DocId == _DocId) && (efile.TransId == _TransmittalId))
                     select efile;
    GridViewEfile.DataSource = queryefile;

    GridViewEfile.DataBind(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-17T13:18:14.593

您可以参考下面的代码来实现这一点

**。CS**

```
using System.Drawing;
using System.IO;

 public string GetIconFromFile()
{
   Icon ic = Icon.ExtractAssociatedIcon(Server.MapPath (".")+"/Files/Test.txt");
   string imagePath=Server.MapPath(".") + "/Images/Test.ico";
   if (ic != null)
   {
      using (FileStream stream = new FileStream(imagePath, FileMode.OpenOrCreate))
       {
           ic.Save(stream);
       }
   }
    return imagePath ;

}

protected void GridViewEfile_RowDataBound(object sender, GridViewRowEventArgs e)
{
    if (e.Row.RowType == DataControlRowType.DataRow)
    {
        System.Web.UI.WebControls.Image img = new System.Web.UI.WebControls.Image();
        img = (System.Web.UI.WebControls.Image)e.Row.FindControl("Image1");
        img.ImageUrl = GetIconFromFile();
    }
} 
```

**.aspx**

```
<Columns>
   <asp:TemplateField>
     <ItemTemplate>
        <asp:Image ID="Image1" runat="server" />
          <asp:LinkButton ID="LinkButton1" runat="server" OnCommand="LinkButton1_Command" CommandName="Download" CommandArgument='<%#Eval("FileID")%>'><%#Eval("FileName")%></asp:LinkButton>
      </ItemTemplate>
    </asp:TemplateField>
  <asp:BoundField DataField="ContentType" />
</Columns> 
```

# python - Python-Django：ifchanged 模板标签

> ID：13430520
> 
> 赞同：2
> 
> 时间：2012-11-17T12:21:57.420
> 
> 标签：python, django

在这里，我从数据库中获取具有持续时间的员工。具有 2 或 3 条记录的同一员工。所以获取员工持续时间并添加和显示，如果员工 ID 发生变化，那么它会再次计算员工持续时间并显示我需要查找每个员工 ID 有多少条记录，通过`{{ forloop.counter }}`单独

我的问题在这里...

1.  如果我的循环来`{% ifchanged eachSc.laEmpNum %}`了`{{ result.0 }}`。如果再然后`{{ result.1 }}`然后`{{ result.2 }}`等等...

2.  如果我的循环来了，`{% ifchanged eachSc.laEmpNum %}`那么我`{{ forloop.counter }}`应该再次从 0（零）开始。

`result = [5.5, 4.5, 1.3]`我从中得到的`view.py`

```
{% for eachSc in DBShots1 %}

<tr>
    {% ifchanged eachSc.laEmpNum %} 

    <td bgcolor="#FFFACD" width="1%">Tot={{ result }}</td>
    {% endifchanged %}

</tr>
    <td bgcolor="#FFFACD" width="1%">{{ forloop.counter }} </td> 

    <td bgcolor="#CCFACD" width="1%">{{ eachSc.sName }}</td>

    <td bgcolor="#CCF0F5" width="1%">{{ eachSc.duration }}</td>

    <td bgcolor="#CCFACD" width="1%">{{ eachSc.frames }}</td>

    <td bgcolor="#CCFACD" width="5%">{{ GetEmpDept }} - {{ getEmpName.emp_name }} - {{ eachSc.laEmpNum }}</td>
{% endfor %} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T12:34:32.910

我相信这里有几个问题需要处理。首先，我看到您要打印“结果”变量的一项，具体取决于 forloop 计数器的位置。这在 django 模板中是不可能的（出于各种合理的原因）。要在不重新组织视图中的数据的情况下快速解决此问题，您可以定义一个自定义过滤器，它只返回指定索引上的列表项。你可以把它放在你的 templatetags/myfilters.py 中：

```
from django import template
register = template.Library()

@register.filter
def getitem(mylist, index):
    return mylist[index] 
```

然后，要在“laEmpNum”更改时重置 forloop 计数器，您应该使用“regroup”django 模板标签，如下所示：

```
{% load myfilters %}
{% regroup DBShots1 by laEmpNum as eachScList %}
{% for eachScGrp in eachScList %}
    {% for eachSc in eachScGrp.list %}
    <tr>
      <td bgcolor="#FFFACD" width="1%">{{ forloop.counter }} </td> 
      <td bgcolor="#CCFACD" width="1%">{{ eachSc.sName }}</td>
      <td bgcolor="#CCF0F5" width="1%">{{ eachSc.duration }}</td>
      <td bgcolor="#CCFACD" width="1%">{{ eachSc.frames }}</td>
      <td bgcolor="#CCFACD" width="5%">{{ GetEmpDept }} - {{ getEmpName.emp_name }} - {{ eachSc.laEmpNum }}</td>
     </tr>
    {% endfor %}
    <tr>
        <td> </td><td> </td>
        <td bgcolor="#FFFACD" width="1%">Tot={{ result|getitem:forloop.counter0 }}</td>
    </tr>
{% endfor %} 
```

第一行加载我们的自定义过滤器库。最后一部分使用自定义过滤器根据对“laEmpNum”分组器的迭代来检索结果项。

# streaming - 连接失败应用程序拒绝连接jwplayer

> ID：13430537
> 
> 赞同：0
> 
> 时间：2012-11-17T12:24:18.303
> 
> 标签：streaming, video-streaming, embed, jwplayer, wowza

我正在使用我自己的 jwplayer 在我自己的服务器上嵌入其他服务器的 rtmp 流

它在我的一台服务器上运行良好，但在我的另一台服务器上出现同样的错误

请任何人向我解释错误在哪里，或者我无法在另一端使用我的播放器播放其他站点的流，相同的代码工作正常:(

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-12-03T19:09:23.577

也许视频源的域限制？

# assembly - 为什么在这个函数的代码的序言中从堆栈指针中减去 0x20？

> ID：13430540
> 
> 赞同：4
> 
> 时间：2012-11-17T12:25:02.037
> 
> 标签：assembly, x86, stack, stack-pointer

```
void main(){
    int c;
    c = function(1, 2);
}

int function(int a, int b){
      char buf[10];
      a = a+b;
      return a;
} 
```

汇编代码：

```
 main:
08048394:   push %ebp
08048395:   mov %esp,%ebp
08048397:   and $0xfffffff0,%esp
**0804839a:   sub $0x20,%esp   <-----------------------???????**
0804839d:   movl $0x2,0x4(%esp)
080483a5:   movl $0x1,(%esp)
080483ac:   call 0x80483b7 <function>
080483b1:   mov %eax,0x1c(%esp)
080483b5:   leave 
080483b6:   ret 
          function:
080483b7:   push %ebp
080483b8:   mov %esp,%ebp
080483ba:   sub $0x10,%esp
080483bd:   mov 0xc(%ebp),%eax
080483c0:   add %eax,0x8(%ebp)
080483c3:   mov 0x8(%ebp),%eax
080483c6:   leave 
080483c7:   ret 
```

我知道按 16 字节对齐，
但是在 main() 中，`int c(=4 byte) + 1(4byte) + 2(4byte) in function(1 ,2)`调用语句。

所以总和是12字节。但通过内存对齐，我认为是 16 字节。

```
(sub 0x10, %esp) 
```

为什么要分`0x20, %esp`？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-10-27T03:29:32.460

考虑这个函数：

```
void main(){
    int c, d, e, f;
    c = function(1, 2, 3, 4);
    d =1;
    e = 2;
    f = 3;
} 
```

这仍然会分配 0x20 空间。

但是如果再添加 1 个局部变量或函数参数，它会立即分配 0x30 空间。

现在考虑什么时候 main 函数中什么都没有，而只有一个语句：

```
int c = 1; 
```

那么在这种情况下，它将分配 0x10 空间。

你看到这里的模式了吗？系统首先为局部变量分配空间。然后它将为函数参数分配空间。分配的空间与 0x10 对齐。

这就是您看到 0x20 的原因。0x10 用于局部变量，另一个 0x10 用于函数参数。

# javascript - 将 li 附加到 ul 时出现问题

> ID：13430541
> 
> 赞同：2
> 
> 时间：2012-11-17T12:25:27.947
> 
> 标签：javascript, jquery, dom-manipulation

我正在使用 jquery函数创建`ul`并添加其中的数据。在这个函数内部，我正在调用另一个函数来解析更多 xml 数据并将其添加到. 但是这个功能只显示。而当我在函数内部时，它会显示正确的.`li``append``append``ul``[object Object]``console.log(li)``func()``li`

这是我的代码

```
container.append(
            '<ul>'
                + '<li>'
                    + '<h4 class="title stitle">' + from 
                        + '<section><span class="subtitle">' + routeTime + ' mins    ' + routeDist + ' km</span></section><br>'
                    + '</h4>'
                    + '<ul class="contents">'
                        + '<li>' + '<img src="' + walk + '" />' + '</li>'
                        + '<li>' + '<span class="">' + startTime + '   ' + distance + ' km</li>'
                        + func(lines) //<-- function call here
                    + '</ul>'
                + '</li>' +
            '</ul>'
            ); 
```

这是func功能代码

```
func = function (lines) {
    var li = $('<li></li>');

    lines.each(function () {
        var stopel          = $(this),
            busCode         = stopel.attr('code').slice(1,4),
            stops           = stopel.find('STOP');

        li.append('<img src="' + bus + '" />')
        .append('<span>' + busCode + '</span>')
        .append('<section class="clear"></section>');

        stops.each(function() {
            var el2         = $(this).find('NAME'),
                deptime     = $(this).find('DEPARTURE');
            li.append('<p class="stop">' + deptime.attr('time') + '   ' + el2.attr('val') + '</p>');
        });
        li.append('<p class="last"></p>');
    });
    console.log(li);
    return li;
} 
```

我在哪里犯错？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-17T12:29:49.733

问题是您的函数返回一个 jQuery 对象。当您`+`在此对象上使用运算符时，您将其用作字符串。因此尝试将其转换为字符串，结果为`[object Object]`.

jQuery 对象有一个名为的方法，该方法将 jQuery 对象[`.html()`](http://api.jquery.com/html/)的 HTML 内容作为字符串返回 - 您可以安全地在连接中使用它。不过，在您的情况下，您需要一个`.outerHtml()`jQuery 中不存在的方法，但您可以添加它（请参阅[此问题](https://stackoverflow.com/questions/2419749/get-selected-elements-outer-html)）。或者，您可以简单地使用 DOM（不是 jQuery）`.outerHTML`属性，Firefox 过去不支持它，但他们现在支持它（从版本 11 开始，如果我错了，请纠正我）。

您可以像这样在返回值上调用该方法`func`：

```
...
+ '<li>' + '<span class="">' + startTime + '   ' + distance + ' km</li>'
+ func(lines).outerHtml() //<-- function call here
+ '</ul>'
... 
```

或者如果你想要 DOM 方式：

```
+ func(lines).get(0).outerHtml //<-- function call here 
```

* * *

*快速建议：您应该使用像 Mustache（我的偏好）、Handlebars 等模板解决方案。通过在 Javascript 中连接字符串来创建 HTML 是丑陋的、难以维护的并且违反了[关注点分离](http://en.wikipedia.org/wiki/Separation_of_concerns)的规则。当您尝试其中一个库时，您会想知道没有它您将如何生活。*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-17T12:43:51.337

当您这样做时 `var li = $("<li></li>")`，您将传递对为 DOM 创建的列表对象实例的引用。您正在操作此对象，因此您将输出作为 [object Object]，而在控制台中您将看到该对象的 HTML。

您应该对 li 对象引用进行字符串化或在 $.html(li) 或 li.html() 中使用它；

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-17T12:29:06.360

您正在返回 jQuery 对象，但看起来您想要 HTML。

在函数结束时试试这个：

```
return li.outerHTML; 
```

# android - ActionBarSherlock：选项卡在横向模式下丢失自定义视图

> ID：13430542
> 
> 赞同：2
> 
> 时间：2012-11-17T12:25:45.633
> 
> 标签：android, android-actionbar, actionbarsherlock

我将 ActionBarSherlock 与`NAVIGATION_MODE_TABS`. 每个选项卡都包含一个自定义视图。虽然在纵向模式下看起来不错，但如果选项卡显示为下拉列表（由 Android 自动完成），横向模式下会有很多问题：

*   Android 4.x：所选选项卡未显示在操作栏中（见图，红色圆圈）。直接使用 Android SDK 中的内置操作栏时也会发生同样的情况。
*   Android 2.x：所选选项卡未显示在操作栏中。一旦我单击下拉菜单，整个下拉菜单就会消失，而我会得到空选项卡。

![操作栏未显示选定的选项卡](../Images/1d33f7613062721a6d422158d23ec75c.png)

如果我不使用自定义视图，一切正常。我在图像上创建 ActionBar 的代码（故意保持简单）：

```
getActionBar().setNavigationMode(ActionBar.NAVIGATION_MODE_TABS);
for (int i = 0; i < 7; i++) {
    ActionBar.Tab tab = getActionBar().newTab();
    TextView view = new TextView(this);
    view.setText("This is tab " + (i + 1));
    tab.setCustomView(view);
    tab.setTabListener(this);
    getActionBar().addTab(tab);
} 
```

难道我做错了什么？

**编辑**：为了澄清，`getSupportActionBar()`存在于原始代码中，ActionBarSherlock 的操作栏除了所描述的问题外工作正常。我使用上面的代码示例来说明使用内置操作栏时也存在第一个问题（操作栏中未显示所选选项卡）。对困惑感到抱歉。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T04:37:38.010

使用 ActionBarSherlock 您应该使用`getSupportActionBar()`它才能在 2.x 上工作

```
getSupportActionBar().setNavigationMode(ActionBar.NAVIGATION_MODE_TABS);
for (int i = 1; i <= 3; i++) {
    ActionBar.Tab tab = getSupportActionBar().newTab();
    tab.setText("Tab " + i);
    tab.setTabListener(this);
    getSupportActionBar().addTab(tab);
} 
```

文本颜色要么来自您应用到选项卡的自定义视图，要么来自您在活动级别应用的主题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-26T09:08:20.050

这种方法对我来说很好：

只需放置导航方法，添加添加选项卡后：

```
... // adding tabs
bar.setNavigationMode(ActionBar.Navigation_mode_tabs); 
```

祝你好运 ;）

# xampp - PHP 启动：无法加载动态库

> ID：13430544
> 
> 赞同：0
> 
> 时间：2012-11-17T12:25:55.523
> 
> 标签：xampp

我`xampp`找不到指定的模块。它显示来自 D 的错误，`drive\xampp\php\ext\php_sqlite.dll`并且在每个确定按钮上都会发生更改，此外，我的 xampp 安装在 E 驱动器中。现在做什么 ？有什么帮助吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-17T12:31:31.313

*   如果您在 Windows 7 或 8 中遇到问题，您可以尝试安装和更换 xampp。
*   如果另一个窗口你可以恢复品脱操作系统..

在此之前，尝试备份数据

# android - 如何从代码中调用android以及何时结束它回调到活动，从调用开始？

> ID：13430547
> 
> 赞同：1
> 
> 时间：2012-11-17T12:26:31.557
> 
> 标签：android

如何从代码中调用android以及何时结束调用从调用开始回调到活动？

# java - 在java中将字符串划分为子字符串

> ID：13430552
> 
> 赞同：4
> 
> 时间：2012-11-17T12:27:28.083
> 
> 标签：java, arrays, string, substring

我有一个字符串`1122333344555566778888` ，我需要对其进行子串化，结果得到`[11, 22, 3333, 44, 5555, 66, 77, 8888]` 是否可以以一种漂亮的方式完成它，或者我需要对其进行硬编码和八次使用`string.substring(beginning, ending)`函数，然后放入`array`？

**编辑：**字符串不仅可以包含重复的数字。`AB CG HERD KJ 98HQ 0K 1E OOQW`它也是例子！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-17T12:36:25.037

使用模式：`((\d)\2*)`

```
String input = "1122333344555566778888";
Pattern p = Pattern.compile("((\\d)\\2*)");
Matcher m = p.matcher(input);
while (m.find()) {
    System.out.println("Found " + m.group(1));
} 
```

产生：

```
11
22
3333
44
5555
66
77
8888 
```

编辑：如果它的数字以及空格和字母使用该模式`(([\d\w\s])\2*)`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-17T12:34:24.430

**您可以使用重复字符**的正则表达式：

```
String input = "1122333344555566778888";
String regex = "(\\w)\\1+";

Matcher m = Pattern.compile(regex).matcher(input);
String[] substrings = new String[input.length()];

int index = 0;

while (m.find())
    substrings[index++] = m.group();

for (int i = 0; i < index; i++)
    System.out.println(substrings[i]); 
```

**输出：**

```
11
22
3333
44
5555
66
77
8888 
```

**重要的提示：**

`substrings`数组包含空条目，因为它的长度等于输入字符串的长度。如果您的字符串包含不重复的连续字符，则此数组可能没有空条目。敬请关注`substrings`。`NullPointerException`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-17T12:34:48.300

此字符串中没有分隔符可以使用 .split()，如果您想要的子字符串之间有分隔符，例如 11-22-3333- ... 等，它将很容易使用

```
String[] splits = asseltClasses.split("-"); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-17T12:51:16.023

基于 BlueBullet 的...

```
import java.util.regex.*;
import java.util.*;
public class MyTest {

    public static void main(String[] args) {

        String input = "1122333344555566778888";
        String regex = "(\\w)\\1+";

        Matcher m = Pattern.compile(regex).matcher(input);

        List<String> l = new ArrayList<String>();
        while (m.find()) l.add(m.group());

        System.out.println(Arrays.toString(l.toArray()));
    }   
} 
```

输出：

```
[11, 22, 3333, 44, 5555, 66, 77, 8888] 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-17T13:25:36.657

这够美吗？这只是一条线...

```
String parts = input.replaceAll("(.)(?!\\1)", "$1\0").split("\0"); 
```

* * *

这是一个测试：

```
public static void main(String[] args) {
    String input = "1122333344555566778888";
    String[] parts = input.replaceAll("(.)(?!\\1)", "$1\0").split("\0");
    System.out.println(Arrays.toString(parts));
} 
```

输出：

```
[11, 22, 3333, 44, 5555, 66, 77, 8888] 
```

* * *

请注意，此解决方案有一个非常小的问题 -`$1`调用后的字符`replaceAll()`不能包含在输入中。我选择了空字符`'\0'`（即十六进制零）是*相当*安全的。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-17T13:30:58.093

这就是我要做的：给定一个未排序的字符串“ABCABCABC”，您可以通过将其转换为 Char[] 数组来对其进行排序，然后使用 Arrays.sort() 将其转换为 AAABBBCCC。

```
 public String[] sortThis(String inputData) {
    String input = "ABCABCABC"; //make this whatever you want (or set to inputData)
    String[] temp = new String[input.length()];
    for (int i = 0; i < input.length();i++) //initialize the array, or it prints "null"
        temp[i] = "";
    int index = 0;
    char[] info = input.toCharArray();
    Arrays.sort(info);

    for (int i = 0; i < input.length(); i++) { // fill the temp array
        temp[index] += info[i];
        if(i+1 < input.length())
            if(i < input.length() && info[i] != info[i+1])
                index++;
    }

    String[] answer = new String[index+1]; 
    for(int i = 0; i < index+1; i++) // shorten the array
        answer[i] = temp[i];

    return answer;
    } 
```

**输出：**

```
 [AAA, BBB, CCC] 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-11-17T14:27:37.150

**也许你想用这个：**

```
var str="1122333344555566778888"; //whatever
b=0;outpt="";
while(b<=18){
if(b==4|b==10|b==18){e=4;p=4}else{e=2;p=2}
outpt+=str.substr(b,e)+", ";b+=p;}
alert(outpt); 
```

**输出：**

```
11, 22, 3333, 44, 5555, 66, 77, 8888, 
```

# c# - C# XML XPATH 无法将数据分配给数组以在 ListView 中显示

> ID：13430558
> 
> 赞同：0
> 
> 时间：2012-11-17T12:28:14.813
> 
> 标签：c#, xml, arrays, xpath

我是 C# 和 XML 数据用法的新手。

我有以下 xml 数据。此 XML 文件似乎没有任何与之关联的样式信息。文档树如下所示。

```
<response>
  <auctions>
   <auction>
    <id>90436</id>
    <user>blabla</user>
    <title>title name</title>
    <value>10000.00</value>
    <period>36</period>
    <www/>
   </auction>
   <auction>
    <id>90436</id>
    <user>blabla</user>
    <title>title name</title>
    <value>10000.00</value>
    <period>36</period>
    <www/>
   </auction>
  </auctions>
 </response> 
```

我使用那个 C# 代码。（这是Form1使用的类）

```
 public IXmlNamespaceResolver ns { get; set; }    

public string[] user,id,title,value,period;
    public void XmlRead(string url)
    {
                // Create a new XmlDocument  
                XPathDocument doc = new XPathDocument(url);
                // Create navigator  
                XPathNavigator navigator = doc.CreateNavigator();
                // Get forecast with XPath  
                XPathNodeIterator nodes = navigator.Select("/response/auctions", ns);

                int i = 0;
                foreach (XPathNavigator oCurrentPerson in nodes)
                {   
                    userName[i] = oCurrentPerson.SelectSingleNode("user").Value;
                    userId[i] = int.Parse(oCurrentPerson.SelectSingleNode("id").Value);
                    title[i] = oCurrentPerson.SelectSingleNode("title").Value;
                    value[i] = oCurrentPerson.SelectSingleNode("value").Value;
                    period[i] = oCurrentPerson.SelectSingleNode("period").Value;
                    i++; }
    } 
```

我收到一个错误：对象引用未设置为对象的实例。

> userName[i] = oCurrentPerson.SelectSingleNode("user").Value;

当我使用单个字符串变量时，例如：userName、userId 没有 [] 一切正常。

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-17T12:32:01.600

```
navigator.Select("/response/auctions/auction", ns); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-17T12:54:18.987

.Net 是一个强类型的世界，所以使用它的好处。创建`Auction`类以保存 xml 中的数据：

```
class Auction
{
    public int Id { get; set; }
    public string User { get; set; }
    public string Title { get; set; }
    public decimal Value { get; set; }
    public int Period { get; set; }
    public string Url { get; set; }
} 
```

并使用 Linq to Xml 解析您的 xml：

```
XDocument xdoc = XDocument.Load(path_to_xml_file);
IEnumerable<Auction> auctions =
    from a in xdoc.Descendants("auction")
    select new Auction()
    {
        Id = (int)a.Element("id"),
        User = (string)a.Element("user"),
        Title = (string)a.Element("title"),
        Value = (decimal)a.Element("value"),
        Period = (int)a.Element("period"),
        Url = (string)a.Element("www")
    }; 
```

# java - 在 JAVA 中使用 cplex 时如何避免内存泄漏？

> ID：13430560
> 
> 赞同：2
> 
> 时间：2012-11-17T12:28:32.093
> 
> 标签：java, memory-leaks, cplex

我安装了最新版本的 cplex，并通过它的 JAVA API 使用它。为了避免构建 cplex 实例的开销，我使用 cplex.clearmodel 然后创建新模型。

但是当我用它做数千次线性规划时，内存泄漏问题非常严重。它消耗了超过 2GB 的 RAM。是否存在任何解决方案来缓解内存泄漏问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-17T12:50:31.650

我之前在运行线性程序时遇到过这个问题。您必须只创建一个对象并继续只使用对该对象的一个​​引用。

```
import ilog.concert.*; 
import ilog.cplex.*; 
static public class Application { 
    static public main(String[] args) { 
       try {
         IloCplex cplex = new IloCplex(); 
         // create model and solve it 
       } catch (IloException e) { 
          System.err.println("Concert exception caught: " + e); 
       }
     }
   } 
```

这个问题是

```
IloCplex cplex = new IloCplex(); 
```

在你的程序中只调用一次上面的行。如果 clearModel 方法不起作用，请清除所有约束、清除目标函数并单独清除切割，然后重置约束和目标函数，但不要创建新对象。这就是导致内存泄漏的原因。要解决您的新模型，请使用

```
cplex.solve() 
```

我想你的代码看起来像这样

```
import ilog.concert.*; 
import ilog.cplex.*; 
public class Example { 
public static void main(String[] args) { 
    try { 
      for(int i = 1;i <= 5;i++){ // Loop with indices that you may use to create your constraints and objective function.
      IloCplex cplex = new IloCplex(); // Cause of memory leak
      double[]    lb = {0.0, 0.0, 0.0}; 
      double[]    ub = {40.0, Double.MAX_VALUE, Double.MAX_VALUE}; 
      IloNumVar[] x  = cplex.numVarArray(3, lb, ub); 
      double[] objvals = {1.0, 2.0, 3.0}; 
       cplex.addMaximize(cplex.scalProd(x, objvals)); 
      cplex.addLe(cplex.sum(cplex.prod(-1.0, x[0]), 
                            cplex.prod( 1.0, x[1]), 
                            cplex.prod( 1.0, x[2])), 20.0); 
      cplex.addLe(cplex.sum(cplex.prod( 1.0, x[0]), 
                            cplex.prod(-3.0, x[1]), 
                            cplex.prod( 1.0, x[2])), 30.0); 
      if ( cplex.solve() ) { 
        cplex.out().println("Solution status = " + cplex.getStatus()); 
        cplex.out().println("Solution value  = " + cplex.getObjValue());
        double[] val = cplex.getValues(x); 
        int ncols = cplex.getNcols(); 
        for (int j = 0; j < ncols; ++j) 
           cplex.out().println("Column: " + j + " Value = " + val[j]); 
      }
      cplex.end(); 
    }
    }
    catch (IloException e) { 
System.err.println("Concert exception '" + e + "' caught"); 
    }
  }
} 
```

创建 IloCplex 对象的实例后，启动 for 或 while 循环。所以，与上面的代码相比，做

```
IloCplex cplex = new IloCplex(); // Cause of memory leak
for(int i = 1;i <= 5;i++){ // Loop with indices that you may use to create your constraints and objective function. 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-09-27T02:56:29.487

根据我对 CPLEX 12.7 的评估，您可以在 cplex.end() 之后调用 system.gc()，这样可以节省大量内存。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2021-09-08T16:23:15.013

对于 CPLEX 20.1，仅调用 IloCplex.end() 对我们来说是不够的。我们需要 IloCplex.endModel() 和 IloCplex.end() 的组合（按此顺序）。

通过 System.gc() 调用垃圾学院也有效，但会显着降低性能。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-17T12:41:04.870

有分析java的软件：

Jprofiler

[http://www.ej-technologies.com/products/jprofiler/overview.html](http://www.ej-technologies.com/products/jprofiler/overview.html)

你的套件

[http://www.yourkit.com/](http://www.yourkit.com/)

视觉虚拟机

[http://visualvm.java.net/index.html](http://visualvm.java.net/index.html)

# node.js - Node.js 和 Express 静态中间件路由视图

> ID：13430561
> 
> 赞同：1
> 
> 时间：2012-11-17T12:28:43.387
> 
> 标签：node.js, express, ejs

在我看来，这似乎是一个非常基本的问题，但我一直无法找到答案。

我正在使用 express`ejs`作为模板引擎和以下目录结构：

```
 |-static
 |---css
 |---img
 |---js
 |-views 
```

我为`static`文件夹定义了静态路由：

```
app.configure(function(){
        app.set('views', __dirname + '/views');
        app.set('view engine', 'ejs');
        app.use(express.bodyParser());
        app.use(partials());
        app.use(express.methodOverride());
        app.use(express.static(__dirname + '/static'));
        app.use(app.router);
        app.enable("jsonp callback");
    }); 
```

在`Views`文件夹中，我保留了我的所有`ejs`文件 - 一个`layout.ejs`和其余的是具有特定页面实际内容的文件。

我已经定义了以下路线：

```
app.get('/', function(req,res){
    locals.date = new Date().toLocaleDateString();
    res.render('home.ejs', locals);
});

app.get('/about', function(req,res){
    locals.date = new Date().toLocaleDateString();
    res.render('about.ejs', locals);
});
app.get('/contact', function(req,res){
    locals.date = new Date().toLocaleDateString();
    res.render('contact.ejs', locals);
}); 
```

它将`layout.ejs`它与页面一起呈现。

显然我不想每次添加新页面时都添加新路线，我希望它自动完成。

所以我猜它应该与定义另一个有关`app.use(express.static(__dirname + '/views'));`？我也不想显示网址`/about.ejs`而是显示`/about`

有人可以指出我正确的方向吗？

谢谢 ！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-17T12:55:12.740

您可以编写自己的路由逻辑，例如

```
function customRouter (req, res, next)
{
    var locals = {};
    var controllerName = req.params.controllerName;
    res.render(controllerName + '.ejs', locals);
}

app.get('/:controllerName', customRouter); 
```

这是一个简单的例子，但它应该给你诀窍。您可以根据自己的需要进行修改。

# css - CSS 变换比例以创建预览

> ID：13430564
> 
> 赞同：0
> 
> 时间：2012-11-17T12:29:38.260
> 
> 标签：css, transform, scale

我正在尝试缩放包含内容的 div 以适合 200x200 的框。基本上，我想通过在较小的 div 中显示其内容来对较大的 div 进行“预览”。

我将其缩小 40%。问题是当我将其缩小 40% 并将其放在重叠的 200x200 框中时。有没有办法说而不是按百分比缩小以将其缩小到特定大小？例如，我可以将其缩小到 200x200 吗？

我希望对几个宽度和高度不同的 div 执行此操作，并将它们全部放入 200x200 像素的盒子中。我不想使用溢出：隐藏或滚动。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-17T14:10:58.497

我认为您需要使用 javascript 来执行此操作。等待 div 的所有内容（包括图像）加载完毕，使其达到最终大小。然后，您需要使用 jquery 或 by `getBoundingClientRect`（如果您使用 css-transforms 比此方法应该可用）获取宽度和高度，并计算比例因子，您应该考虑检查是否使用宽度或div的高度，计算因子。这意味着您应该注意 div 的纵横比和它应该适合的所需大小。最后，您可以通过 javascript 将值设置为样式。

# php - file_get_contents 奇怪的问题

> ID：13430569
> 
> 赞同：1
> 
> 时间：2012-11-17T12:29:56.937
> 
> 标签：php, file-get-contents

我正在使用 simple_html_dom ( [http://simplehtmldom.sourceforge.net](http://simplehtmldom.sourceforge.net) ) 来解析 html 代码。我已经在我的本地 WAMP 服务器上构建了一个应用程序，当一切正常时，我将它上传到我的网站上，但是我的服务器崩溃了（与本地代码相同）。我将问题跟踪到图书馆的这一行： `$contents = file_get_contents($url, $use_include_path, $context, $offset);`

我试图制作一个测试文件：

```
<?php
$content=file_get_contents('http://mysite.net');
var_dump($content);
?> 
```

这工作正常，但是 `$content=file_get_contents('http://mysite.net/gaming/search.php?search_id=active_topics');`

或者干脆`$content=file_get_contents('http://mysite.net/gaming');`

返回`bool(false)`这意味着不正确的文件

在我的 WAMP 服务器上一切正常，但在我的 debian Apache 服务器上，我明白了。我想也许我的问题来自我的 php.ini 文件，但我不知道从哪里开始（allow_url_fopen 都打开）

谢谢你的帮助！

编辑：我尝试添加`ini_set('display_errors',1);` ，现在我明白了： `Warning: file_get_contents(http://mysite.net/gaming): failed to open stream: HTTP request failed! HTTP/1.1 404 Not Found in /web/*******` 可能是因为 URL 重写或其他原因吗？（即使它在本地服务器 x 上工作））

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-11-17T12:50:07.230

取决于您使用的 PHP 版本，测试以下代码并查看哪些语句有效。

```
<?php
// <= PHP 5
$file = file_get_contents('./people.txt', true);
// > PHP 5
$file = file_get_contents('./people.txt', FILE_USE_INCLUDE_PATH);
?> 
```

# html - html 中的特殊字符而不是 od utf 8 编码

> ID：13430570
> 
> 赞同：0
> 
> 时间：2012-11-17T12:30:11.117
> 
> 标签：html

我设计了一个 html 页面，其中代码如下所示

```
<!DOCTYPE   html    PUBLIC  "-//W3C//DTD XHTML 1.0 Transitional//EN"    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html   xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta   http-equiv="Content-Type"   content="text/html; charset=UTF-8"  />
<title>Title</title>
</head>
<body   style="margin:0;">
<div    id="alignment"  align="center">
<table  id="border" bgcolor="#e5e5e5"   border="0"  cellpadding="20"    cellspacing="0"         width="726">
<tr>
<td style="font-family: Arial,  Helvetica,  sans-serif; font-size:  19px;   color:  #FFF;background:#080808;" align="left">hi–boss</td>
</tr>   
</table>
</div>
</body>
</html> 
```

但在输出中，我得到的是 hi...boss 而不是 hi-boss。

任何人都可以说，我在这里想念什么。

提前谢谢了

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-17T14:00:27.480

您的文档实际上不是 UTF-8 编码的，但可能是 windows-1252。如果您手动使用浏览器的“查看”菜单并将编码设置为 windows-1252（例如，它可能出现在名称“西欧”（Windows）下），您将看到这一点。

因此，要么将其保存为在您的创作软件中编码的 UTF-8，要么将“UTF-8”更改为“windows-1252”。

如果服务器发送声明字符编码的 HTTP 标头，则可能会出现更多复杂情况。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-17T12:36:43.547

我确定您是`-`从非 utf8 字符集中复制的。您必须在元标记中指定这一点，使用“-”（键盘上的那个），或者如果您使用 php，例如 call `utf8_encode("text")`。

# javascript - 不能在 setInterval 中使用“this”

> ID：13430571
> 
> 赞同：4
> 
> 时间：2012-11-17T12:30:15.123
> 
> 标签：javascript, prototype

看来我不能在函数`this`内部使用`setInerval`。这是为什么？什么是优雅的解决方案？

```
<html>
<script>
var something = function(tMessage){
    this.message = tMessage;
};

something.prototype = {
    start : function(counter){
       document.getElementById('result').innerHTML += this.message + "+++<br />";
        var looper = setInterval(
            function(){
                // This is printing "undefined"
                document.getElementById('result').innerHTML += this.message + "<br />";
                if(!counter--)
                    clearInterval(looper);
            },
            20
        );
    }
};

window.onload = function(){
    var e = new something("hi");
    e.start(2);
}
</script>
<body>
<div id="result"></div>
</body>
</html> 
```

# 编辑

感谢您的回答！但是谁能解释发送参数和设置以及额外变量之间的区别？有内存问题吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-17T12:34:46.727

这里的问题是当你的函数被调用时`this`是指全局对象。要保留当前范围，您可以关闭：

```
 var looper = setInterval(
        (function(scope){
            return function(){
                // This will no longer be printing "undefined"
                document.getElementById('result').innerHTML += scope.message + "<br />";
                if(!counter--)
                    clearInterval(looper);
            };
         })(this),
        20
    ); 
```

而不是挥手并试图解释闭包（我仍在完全掌握的过程中），我将引导您找到这个出色的答案：[https ://stackoverflow.com/a/111200/1726343](https://stackoverflow.com/a/111200/1726343)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-17T12:32:46.663

您不能使用`this`，因为您在一个新的功能块中。我总是创建一个局部变量（我确信有更好的方法）：

```
var c = this;
setInterval(function(
   c.variable = 1;
), 100); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-20T08:10:26.447

因为问题被标记为 [prototypejs] 但没有一个答案使用 Prototype，所以我决定写一个真正使用 Prototype ( [jsfiddle](http://jsfiddle.net/YsbFz/) ) 的答案。

```
var Something = Class.create({
    initialize: function(tMessage) {
        this.message = tMessage;
    },

    start: function(counter) {
        this.counter = counter;
        $("result").innerHTML += this.message + "+++<br />";
        this.looper = setInterval(this.addMessage.bind(this), 20);
    },

    addMessage: function() {
        $("result").innerHTML += this.message + "<br />";
        if (!this.counter--) {
            clearInterval(this.looper);
        }
    }
});

document.observe("dom:loaded", function() {
    var e = new Something("hi");
    e.start(2);
}); 
```

1.  使用[Class.create()](http://api.prototypejs.org/language/Class/create/)创建更优雅的类。
2.  使用[$()](http://api.prototypejs.org/dom/dollar/)而不是`document.getElementById()`.
3.  使用[document.observe("dom:loaded")](http://api.prototypejs.org/dom/document/observe/)代替`window.onload`
4.  使用[bind(this)](http://api.prototypejs.org/language/Function/prototype/bind/)将函数绑定到上下文。

问题的关键在于函数的执行上下文。无论你在哪里使用`this`，它都只是指向当前的执行上下文。当您调用`someObject.someFunction()`then`someFunction()`时，在 的上下文中执行`someObject`，并且`this`在 的内部`someFunction()`将指向`someObject`.

但是你可以先赋值`someOtherObject.someFunction = someObject.someFunction`，然后在`someOtherObject.someFunction()` `this`会中指向`someOtherObject`。

您也可以将函数的引用传递给另一个函数，就像在 中所做的那样`setInterval()`，然后执行上下文将由`setInterval()`（实际上它将是全局上下文，即`this===window`）定义。

为了将执行上下文绑定到函数（预定义上下文，覆盖调用者的上下文），您需要使用`.bind()`method. 它返回新函数，无论运行时哪个上下文都将使用您所需的上下文调用您的原始函数。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-17T12:43:32.357

添加

```
var self = this; 
```

就在您调用 setInterval 之前，在 set*interval 中定义的函数中使用 self 而不是 this

# hibernate - 使用休眠将 EJB 添加到 Maven 项目中

> ID：13430573
> 
> 赞同：1
> 
> 时间：2012-11-17T12:30:56.230
> 
> 标签：hibernate, maven, ejb, persistence, persistence.xml

我将我的项目创建为“maven 项目”，并将 JSF 与 bean 一起使用（在 faces-config.xml 中定义）。现在我正在使用我的 bean 来访问与 DB 通信的 DAO 对象。我想在我的项目中添加 EJB，但我有点卡住了。在我的 POJO 中，我使用 JPA 注释。

我试图创建persistence.xml 文件，我基本上复制了我的hibernate.cfg 文件：（见附件url）

然后我创建了类 UserSessionBean 它应该代表用户的 EJB 并用 @LocalBean @Stateless 注释它：（见附件 url）

并使用注释 @EJB 将其添加到我的支持 bean（请参阅附加的 url）

示例： http: [//pastebin.com/kZm6m8n8](http://pastebin.com/kZm6m8n8)

当我尝试运行我的项目时，出现以下错误： http: [//pastebin.com/FTQb98Hh](http://pastebin.com/FTQb98Hh)

有人可以告诉我问题出在哪里吗？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T08:32:34.480

据我了解，您几乎没有依赖项，其中包括不同版本的公共日志记录 jar。您应该调查您的依赖关系并找到包含哪些公共日志记录 jar（您可以使用 Eclipse 中的 pom 的“依赖层次结构”选项卡来执行此操作）。然后，您应该只留下一个包含公共日志记录 jar 的依赖项。对于所有其他依赖项，您可以通过在其中添加排除标记来排除公共日志记录 jar：

```
<dependency>
      ...
      <exclusions>
           <exclusion>
                <groupId>commons-logging</groupId>
                <artifactId>commons-logging</artifactId>
           </exclusion>
      </exclusions>
</dependency> 
```

# objective-c - PhoneGap 2.2.0 自定义构建配置

> ID：13430574
> 
> 赞同：1
> 
> 时间：2012-11-17T12:30:58.663
> 
> 标签：objective-c, ios, cordova

如果我通过复制发布构建并将其命名为“发布测试”来进行自定义构建配置，则在尝试运行它时会出现以下错误：

```
Lexical or Preprocessor issue : 'Cordova/CVViewController.h' file not found
Lexical or Preprocessor issue : 'Cordova/CVViewController.h' file not found 
```

切换回默认的暂存和发布版本可以正常工作。

这是怎么回事 ：（

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-17T14:42:49.783

好的，我似乎找到了解决此问题的方法，我必须在 CordovaLib 项目设置中创建具有相同名称的相同构建配置。

# ios - 带有静态单元格的 iOS cellForRowAtIndexPath

> ID：13430576
> 
> 赞同：2
> 
> 时间：2012-11-17T12:31:05.483
> 
> 标签：ios, uitableview

我有一个奇怪的错误。我有一个带有静态单元格的分组 UITableView，我想在每个部分下添加一个白色阴影。我考虑这样做的方式是为部分中的每个最低单元格添加阴影。

所以在`viewDidAppear`（因为`viewDidLoad`它不起作用）我写道：

```
UITableViewCell *cell = [tableView cellForRowAtIndexPath:indexPath];
// change the cells shadow 
```

问题是在 viewDidLoad 我在文本字段上调用 ​​becomeFirstResponder 。调用 cellForRowAtIndexPath 时，文本字段失去焦点。

在调用 cellForRowAtIndexPath 之后，我尝试在 viewDidAppear 中使用 becomeFirstResponder ，但这无济于事，文本字段仍然失去焦点。

我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-17T12:36:23.740

我建议您使用`tableView:willDisplayCell:forRowAtIndexPath:`添加阴影的方法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-17T12:33:18.940

使用以下代码。

```
[textfield performSelector:@selector(becomeFirstResponder) withObject:nil afterDelay:0]; 
```

# wpf - 将图像添加到 wpf 工具栏按钮时出错

> ID：13430578
> 
> 赞同：0
> 
> 时间：2012-11-17T12:31:28.523
> 
> 标签：wpf, vb.net, toolbar

当我尝试添加代码以在 VB.net 的 wpf 应用程序中为按钮添加图像时，出现此错误：“值不在预期范围内”。我似乎不知道该怎么做或出了什么问题？这是给出错误的 XAML 代码：

```
<ToolBarTray Height="33" Name="ToolBarTray1" VerticalAlignment="Top">
                        <ToolBar Background="Cyan" Height="33" Band="1" BandIndex="1" ToolBarTray.IsLocked="True">
                            <Button><Image Source="new.bmp"/></Button>
                        </ToolBar> 
                    </ToolBarTray> 
```

显示错误的下划线部分是`<Image Source="new.bmp"/>`。有人告诉我什么是不对的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-18T20:27:36.333

我不确定您的项目是如何设置的，但请阅读此[http://msdn.microsoft.com/en-us/library/aa970069.aspx](http://msdn.microsoft.com/en-us/library/aa970069.aspx)

# android - 在 android 中使用 pulltorefresh listview 的 Asynctask

> ID：13430579
> 
> 赞同：0
> 
> 时间：2012-11-17T12:31:30.040
> 
> 标签：android

在我的应用程序中，我使用 pulltorefresh 和 ScrollListener 概念来显示 facebook 提要数据。正如我们在 Android facebook 应用程序中看到的那样。

这是拉动刷新的代码

```
listView.setOnRefreshListener(new OnRefreshListener() {

            public void onRefresh() {
                // Your code to refresh the list contents goes here
                scroll=true;
                pic.clear();
                id.clear();
                name.clear();
                msg.clear();
                img.clear();
                profimg.clear();
                objid.clear();
                comment.clear();
                 previousTotal = 0;
                  loading = true;               
                listView.setAdapter(null);

                j=0;
                webserv="https://graph.facebook.com/me/home?access_token="+accesstoken;
                 doInBack dob=new doInBack();
                 dob.execute();  
//               doback(webserv);
                    Log.e("hi","doback called");

                // Make sure you call listView.onRefreshComplete()
                // when the loading is done. This can be done from here or any
                // other place, like on a broadcast receive from your loading
                // service or the onPostExecute of your AsyncTask.

                // For the sake of this sample, the code will pause here to
                // force a delay when invoking the refresh

            }
        }); 
```

我的滚动监听类在这里

```
 listView.setOnScrollListener(new  OnScrollListener() {

            private int threshold = 0;
//          
            public void onScrollStateChanged(AbsListView view, int scrollState) {
//                  
                  if (scrollState != 0) {  
                    isScrolling = true; 
                }
                else {   
                   isScrolling = false;  
                  adapter.notifyDataSetChanged();

                }  

            }

          public void onScroll(AbsListView view, int firstVisibleItem,int visibleItemCount, int totalItemCount) 
          {     

//           public void onScrollStateChanged(AbsListView view , int scrollState)
//           {
//                  if (scrollState != 0) {  
//                      listView.getAdapter().isScrolling = true; 
//                  }
//                  else {   
//                      listView.getAdapter().isScrolling = false;  
//                      listView.getAdapter().notifyDataSetChanged();  
//                  }  
//              }  
              // TODO Auto-generated method stub

              if (loading) {
                  if (totalItemCount > previousTotal) {
                      System.out.println(totalItemCount);
                      loading = false;
                      previousTotal = totalItemCount;
                  }
              } 
//                   int lastInScreen = firstVisibleItem + visibleItemCount; 
//              if (!loading && (totalItemCount - visibleItemCount) ==(firstVisibleItem + threshold)){
                   if (!loading && (firstVisibleItem + visibleItemCount) >= totalItemCount){
//                    if(((firstVisibleItem + visibleItemCount) == totalItemCount)){
//                   if (!(loading)  &&(totalItemCount - visibleItemCount) ==(firstVisibleItem + threshold)) {
//                clearAllResources(); 
                  scroll=false;
//                  if (!(loading)  &&(totalItemCount - visibleItemCount) == (firstVisibleItem + threshold)) {
                       Log.v("in gridview loading more","grid load");
//                      
                       doInBack dob=new doInBack();
                       dob.execute();  
//                       doback(webserv);
                    loading = true;
                   }
              }

      }); 
```

我遇到的问题是，当我使用异步类从 facebookapi 加载数据时，当我拉动列表进行刷新时，scrollListener、totalItemcount 值变为 2。即使我清除了 pullrefresh 中的所有列表，我也不明白它是如何变为 2 的.

重要的是，当我使用普通方法而不是这个 Async 类时，我根本没有遇到这个问题。

```
 Here I am providing both my doback() and async class,I think there is something going wrong when I use Async class. 
```

这是我的异步课程

```
 class doInBack extends AsyncTask<URL, Integer, Long>
    {

        @Override
        protected Long doInBackground(URL... arg0) {

//          dialog=MyProgressDialog.show(Wall.this, null,null);

            Log.e("hi","doback parsing");
//          int count=0;

            currentweb= webserv;
            try
            {   
//              if(urlval>0){
                    wallres=UrltoValue.getValuefromUrl(webserv);
                    Log.e("wallrespages",wallres);
//              }
//              else{
//              wallres=UrltoValue.getValuefromUrl(web+accesstoken);
//              Log.e("wallreshome",wallres);
//              }
                JSONObject jobj1=new JSONObject(wallres);

                JSONObject jobj2=jobj1.getJSONObject("paging");
                webserv= jobj2.getString( "next");

                 jsonArray = jobj1.getJSONArray("data");

                 for(int i=0;i<jsonArray.length();i++){

                     jsonObject = jsonArray.getJSONObject(i);

                    if(jsonObject.has("message")||jsonObject.has("picture")) {

                        try{

//                        msg[j]=jsonObject.getString("message");
                            if(jsonObject.has("message"))
                            {

                                msg.add(jsonObject.getString("message"));   
                            }
                            else{
                                msg.add("");    
                            }
                        }
                        catch(Exception e){
                            e.printStackTrace();
                        }

                        try{

//                            msg[j]=jsonObject.getString("message");
                                if(jsonObject.has("picture"))
                                {
                                    String firstpicture=jsonObject.getString("picture");
                                    String secondpicture=firstpicture.replaceAll("_s.jpg", "_n.jpg");
                                     Log.e("picurl",secondpicture);
                                     pic.add(secondpicture);

                                }
                                else{
                                    pic.add("");
                                }
                            }
                            catch(Exception e){
                                e.printStackTrace();
                            }

                        objid.add(jsonObject.getString("id"));

                          JSONObject jobj=jsonObject.getJSONObject("from");
                           name.add(jobj.getString("name"));
                           id.add(jobj.getString("id"));
//                         Log.e("msg",msg);
//                            
//                         Log.e("name",name[j]);
//                         Log.e("id",id[j]);
                           profimg.add("http://graph.facebook.com/"+id.get(j)+"/picture?type=square");

                           JSONObject commentjobj=jsonObject.getJSONObject("comments");
                            comment.add(commentjobj.getString("count"));
                            weburl.add( currentweb);

                           Log.e("comment", comment.get(j));
//                         bitmap[j]= getBitmapFromURL(profimg[j]);
//                         profimg1.setImageBitmap(bitmap[j]);
//                         imageLoader.DisplayImage( profimg[j].replace(" ", "%20"), profimg1) ;
//                         System.out.println( bitmap[j]);
                           j++;
//                          f=j;
                    }
                    }

//                if(jsonObject.getString("message")!=""){
//                    msg[i]=jsonObject.getString("message");
//                     
//                    JSONObject jobj=jsonObject.getJSONObject("from");
//                     name[i]= jobj.getString("name");
//                     id[i]=jobj.getString("id");
//                     Log.e("msg",msg[i]);
//                     Log.e("name",name[i]);
//                     Log.e("id",id[i]);
//                     }
//                       
//                   }

            }

            catch(Exception e)
            {
                e.printStackTrace();
            }

            return null;
        }

        protected void onPostExecute(Long result) { 

            try
            {  
                System.out.println(scroll);
                if(scroll){
//                   listView.addFooterView(footerView);
                 adapter=new MySimpleArrayAdapter(Wall.this,R.layout.wall,pic,name,msg,id,profimg,bitmap,comment,objid,weburl);
                listView.setAdapter(adapter);

//              dialog.dismiss();
                listView.postDelayed(new Runnable() {

//                  @Override
                    public void run() {

                        listView.onRefreshComplete();
                    }
                }, 2000);

                }

         else{
//           adapter=new MySimpleArrayAdapter(Wall.this,R.layout.wall,pic,name,msg,id,profimg,bitmap,comment,objid,weburl);
             adapter.notifyDataSetChanged();
             listView.postDelayed(new Runnable() {

//                  @Override
                    public void run() {

                        listView.onRefreshComplete();
                    }
                }, 2000);

            }
            }

            catch(Exception e)
            {
                e.printStackTrace();
//              dialog.dismiss();
            }

    }

    } 
```

我的正常方法是

```
 public void doback(String url) 
        {

            currentweb=url;

//              dialog=MyProgressDialog.show(Wall.this, null,null);

                Log.e("hi","doback parsing");
//              int count=0;

                try
                {   
//                  if(urlval>0){
                        wallres=UrltoValue.getValuefromUrl(currentweb);
                        Log.e("wallrespages",wallres);
//                  }
//                  else{
//                  wallres=UrltoValue.getValuefromUrl(web+accesstoken);
//                  Log.e("wallreshome",wallres);
//                  }
                    JSONObject jobj1=new JSONObject(wallres);

                    JSONObject jobj2=jobj1.getJSONObject("paging");
                    webserv= jobj2.getString( "next");

                     jsonArray = jobj1.getJSONArray("data");
//                   
//                    for(int k=0;k<jsonArray.length();k++){
//                       
//                       jsonObject = jsonArray.getJSONObject(k);
//                       if(jsonObject.has("message")||jsonObject.has("picture")) {
//                              count++;
//                       }
//                    }
//                    jsonObject=null;

//                   msg=new String[count];
//                   name=new String[count];
//                   id=new String[count];
//                   profimg=new String[count];
//                   bitmap=new Bitmap[count];
//                   pic=new String[count];

                     for(int i=0;i<jsonArray.length();i++){

                         jsonObject = jsonArray.getJSONObject(i);

                        if(jsonObject.has("message")||jsonObject.has("picture")) {

                            try{

//                            msg[j]=jsonObject.getString("message");
                                if(jsonObject.has("message"))
                                {

                                    msg.add(jsonObject.getString("message"));   
                                }
                                else{
                                    msg.add("");    
                                }
                            }
                            catch(Exception e){
                                e.printStackTrace();
                            }

                            try{

//                                msg[j]=jsonObject.getString("message");
                                    if(jsonObject.has("picture"))
                                    {
                                        String firstpicture=jsonObject.getString("picture");
                                        String secondpicture=firstpicture.replaceAll("_s.jpg", "_n.jpg");
                                         Log.e("picurl",secondpicture);
                                         pic.add(secondpicture);

                                    }
                                    else{
                                        pic.add("");
                                    }
                                }
                                catch(Exception e){
                                    e.printStackTrace();
                                }

                            objid.add(jsonObject.getString("id"));

                              JSONObject jobj=jsonObject.getJSONObject("from");
                               name.add(jobj.getString("name"));
                               id.add(jobj.getString("id"));
//                             Log.e("msg",msg);
//                                
//                             Log.e("name",name[j]);
//                             Log.e("id",id[j]);
                               profimg.add("http://graph.facebook.com/"+id.get(j)+"/picture?type=square");

                               JSONObject commentjobj=jsonObject.getJSONObject("comments");
                                comment.add(commentjobj.getString("count"));
                                weburl.add(url);

                               Log.e("comment", comment.get(j));
//                             bitmap[j]= getBitmapFromURL(profimg[j]);
//                             profimg1.setImageBitmap(bitmap[j]);
//                             imageLoader.DisplayImage( profimg[j].replace(" ", "%20"), profimg1) ;
//                             System.out.println( bitmap[j]);
                               j++;
//                              f=j;
                        }
                        }

//                    if(jsonObject.getString("message")!=""){
//                        msg[i]=jsonObject.getString("message");
//                         
//                        JSONObject jobj=jsonObject.getJSONObject("from");
//                         name[i]= jobj.getString("name");
//                         id[i]=jobj.getString("id");
//                         Log.e("msg",msg[i]);
//                         Log.e("name",name[i]);
//                         Log.e("id",id[i]);
//                         }
//                           
//                       }

                }

                catch(Exception e)
                {
                    e.printStackTrace();
                }

                    try
                    {  
                        System.out.println(scroll);
                        if(scroll){

                         adapter=new MySimpleArrayAdapter(Wall.this,R.layout.wall,pic,name,msg,id,profimg,bitmap,comment,objid,weburl);
                        listView.setAdapter(adapter);
                          listView.postDelayed(new Runnable() {

//                              @Override
                                public void run() {

                                    listView.onRefreshComplete();
                                }
                            }, 2000);

                        dialog.dismiss();
                        }

                 else{
//                   adapter=new MySimpleArrayAdapter(Wall.this,R.layout.wall,pic,name,msg,id,profimg,bitmap,comment,objid,weburl);
                     adapter.notifyDataSetChanged();
                      listView.postDelayed(new Runnable() {

//                          @Override
                            public void run() {

                                listView.onRefreshComplete();
                            }
                        }, 2000);
                    }

                    }

                    catch(Exception e)
                    {
                        e.printStackTrace();
//                      dialog.dismiss();
                    }

            } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-17T14:33:38.573

我认为这里有几个因素。首先，我不确定您正在使用什么 Pull to refresh library 或 widget，但如果它包括页眉和页脚视图，您的计数可能会因页脚和页眉视图而减少。我认为这就是为什么你的滚动视图被 2 调用的原因。

我建议您在刷新操作完成之前清除您的适配器，这可能会使一切正常工作（因为不会为空列表调用滚动侦听器）。

# sql - 不匹配的查询

> ID：13430581
> 
> 赞同：0
> 
> 时间：2012-11-17T12:31:46.260
> 
> 标签：sql, ms-access-2010

我无法让不匹配的查询按我的意愿工作。我正在使用 Access 2010，它是一个 .accdb 应用程序。

我有两张桌子。第 1 天和第 2 天

他们都有栏目：position, artno, artdesc, qty

列位置是存储位置的完整列表，即使位置为空，也会列出位置。

我想做的是比较 Day1 和 Day2 并生成与前一天不完全相同的位置列表。IE 其他文章，不同数量的文章，即使文章存储在位置Day1，但不再存在于Day2。

如果您愿意，可以将其称为 0 库存。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-17T13:46:56.917

```
select *
from Day1
join Day2 on Day1.position = Day2.position
    and
    (
      (Day1.artno != Day2.artno 
        or (Day1.artno is null and Day2.artno is not null) 
        or (Day1.artno is not null and Day2.artno is null)
      )
      or
      (Day1.qty!= Day2.qty
        or (Day1.qty is null and Day2.qty is not null) 
        or (Day1.qty is not null and Day2.qty is null)
      )
   ) 
```

这迎合了“不存在”被存储为`null`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-17T12:36:51.837

`LEFT JOIN`像这样尝试：

```
SELECT *
FROM Day1 d1
LEFT JOIN Day2 ON d1.position = d2.position 
```

这将包括不匹配的行，即表中不再存在的行`Day2`。

# bash - 将变量传递给 bash 脚本

> ID：13430583
> 
> 赞同：0
> 
> 时间：2012-11-17T12:32:16.620
> 
> 标签：bash

我有一个 bash 脚本“test.sh”，我想使用的一个参数是 --no-email。

当我运行 test.sh --no-email 时，一切都按预期工作，我没有收到电子邮件状态报告。

然而，我真正想要运行的是“test.sh test.cnf”，其中 --no-email 参数与大量其他参数一起存储在 test.cnf 文件中。我这辈子都无法让它发挥作用。也许我完全愚蠢而不理解？

非常感谢

```
echo $*|grep -se '--no-email'&>/dev/null
SEND_MAIL=`echo $?`

echo -e "DEBUG: \$*=$*"

if [ ! "$SEND_MAIL" == "0" ]; then
  echo 'Mail would have been sent!'
else
  echo 'NO MAIL WOULD HAVE BEEN SENT!'
fi 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-17T12:38:02.593

如果您无法修改脚本`test.sh`以支持此功能，您仍然可以使用此语法从配置文件中获取参数：

```
test.sh $(<test.cnf) 
```

如果这个假设不成立，即您想修改`test.sh`自己以支持这一点，那么您必须更具体地了解内部发生的情况`test.sh`。

**编辑**：现在的内容`test.sh`已添加到问题中。从那里开始，最简单的事情是这样的：

```
grep -sqe '--no-email' "$*"
SEND_MAIL=$? 
```

但是您写道，您还有许多其他参数。为每个人做`grep`一个可能不方便。在这种情况下，您可以像这样遍历 cnf 文件的单词：

```
#!/bin/bash

while read line; do 
    for word in $line; do
        echo "examing $word"
        case "$word" in 
        --no-email) 
            SEND_MAIL=0
        ;;
        --no-foo)
            NO_FOO=0
        ;;
        *)
            echo 1>&2 "WARNING: Unknown parameter: $word"
        ;;
    esac
    done
done < "$1" 
```

# php - 使用 $_SERVER['HTTP_REFERER']

> ID：13430587
> 
> 赞同：0
> 
> 时间：2012-11-17T12:32:34.140
> 
> 标签：php

在注销页面中，我看到了使用

```
 $http_referer=$_SERVER['HTTP_REFERER'];
       header('Location :'.$http_referer); 
```

此标头将页面重定向到哪里以及 http_referrer 用于什么

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-17T12:37:19.507

一些客户端会发送一个[引用标头](http://en.wikipedia.org/wiki/HTTP_referer)，告诉您它们来自哪里。有问题的代码将客户端重定向到该页面。

请注意，并非所有客户端都发送标头。某些浏览器允许您禁用引用标头。它也很少通过 HTTPS 发送。如果标题为空，请确保您具有合理的默认行为。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-17T12:35:00.120

使用 Http-Referer，您可以查看用户之前在哪个页面上。如果用户例如打开`http://www.google.com`并单击指向您页面的链接，那么在引用者中将是`http://www.google.com`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-17T12:37:13.070

浏览器发送Referer 标头以指示用户来自的页面，例如通过单击指向您的站点的链接或提交表单。

它可能根本不存在或包含其他内容 - 例如，某些防火墙出于（相当可疑的）“隐私”原因删除了标头。浏览器也会在 HTTPS=>HTTP 转换期间删除它。

* * *

但是，在**您的**情况下，注销页面很可能只能从您自己的站点访问。因此，您可以简单地检查引用者是否存在，并在这种情况下使用它。如果它是空的，你会重定向到你的主页：

```
$redirect_to = !empty($_SERVER['HTTP_REFERER']) ? $_SERVER['HTTP_REFERER'] : 'index.php';
header('Location: ' . $redirect_to); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-17T12:40:23.383

Http Referer 显示页面的地址，用户从那里重定向到您的页面。

> 根据[php.net 手册](http://php.net/manual/en/reserved.variables.server.php)，HTTP_REFERER 是将用户代理引用到当前页面的页面地址（如果有）。这是由用户代理设置的。不是所有的用户代理都会设置这个，有些提供修改 HTTP_REFERER 作为一个特性的能力。简而言之，它不能真正被信任。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-17T12:47:12.797

推荐人有以下数据，如果您的网址如：www.xyz.com/abc/text.php 然后回显以下内容：

```
echo $http_referer=$_SERVER['HTTP_REFERER']; 
```

它有打印 www.xyz/abc

你已经去这个链接：[http ://www.electrictoolbox.com/php-http-referer-variable/](http://www.electrictoolbox.com/php-http-referer-variable/)

而已。

# c++ - 在现代 PC 上的 C++ 异常类中避免 std::wstring 数据成员是否有意义？

> ID：13430592
> 
> 赞同：9
> 
> 时间：2012-11-17T12:32:52.127
> 
> 标签：c++, string, exception, memory-management, boost

[在此“](http://www.boost.org/community/error_handling.html)[**错误和异常处理**](http://www.boost.org/community/error_handling.html)[”](http://www.boost.org/community/error_handling.html) Boost 网页中的“*我应该如何设计我的异常类？* ”段落中，内容如下：[](http://www.boost.org/community/error_handling.html)

 **> [...] 3.**不要嵌入 std::string 对象**或复制构造函数可能引发异常的任何其他数据成员或基类。

我必须定义一个异常类来表示文件访问时某种形式的运行时错误，所以我想从 派生它`std::runtime_error`，并添加一个`FileName()`属性来访问发生错误的文件名。

为简单起见，我的意图是添加一个`std::wstring`数据成员来存储文件名（以 Unicode 格式），但上述建议阻止了我。那么，**我应该使用一个简单的`wchar_t`缓冲区作为数据成员吗？**

在**现代桌面系统**（这是我这个项目的目标平台）上，关注文件名的动态字符串分配真的很重要吗？这种分配失败的可能性有多大？我可以理解 Boost 对嵌入式系统等*资源有限系统的建议，但它也适用于现代台式电脑吗？*

```
//
// Original design, using std::wstring.
//
class FileIOError : public std::runtime_error
{
public:
    FileIOError(HRESULT errorCode, const std::wstring& filename, const char* message)
        : std::runtime_error(message),
          m_errorCode(errorCode),
          m_filename(filename)
    {
    }

    HRESULT ErrorCode() const
    {
        return m_errorCode;
    } 

    const std::wstring& FileName() const
    {
        return m_filename;
    }

private:
    HRESULT m_errorCode; 
    std::wstring m_filename;
};

//
// Using raw wchar_t buffer, following Boost's guidelines.
//
class FileIOError : public std::runtime_error
{
public:
    FileIOError(HRESULT errorCode, const wchar_t* filename, const char* message)
        : std::runtime_error(message),
          m_errorCode(errorCode)
    {
        // Safe string copy
        // EDIT: use wcsncpy_s() with _TRUNCATE, as per Hans Passant's suggestion.
        wcsncpy_s(m_filename, filename, _TRUNCATE);
    }

    HRESULT ErrorCode() const
    {
        return m_errorCode;
    } 

    const wchar_t* FileName() const
    {
        return m_filename;
    }

private:
    HRESULT m_errorCode; 
    wchar_t m_filename[MAX_PATH]; // circa 260 wchar_t's
}; 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-17T12:43:24.457

> 这种分配失败的可能性有多大？

相当低。

通常出于代码正确性的目的，您只真正关心这种可能性是零还是非零。即使在一个内建`::operator new`不会因为过度提交而失败的系统上，考虑你的代码将被用于替换`::operator new`. 或者，操作系统可能会在外部限制进程允许分配的内存量，`ulimit -v`或者以其他方式。

接下来考虑它失败的后果。`terminate()`叫做。也许你可以忍受，特别是因为它不太可能真正发生。

基本上，您是否希望您的程序在无法分配内存的情况下甚至*尝试以合理的错误消息干净地退出？*如果是这样，请编写额外的代码并接受错误消息长度的限制。因为 Boost 是通用库代码，所以它不会代表其用户假设他们不想尝试。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-17T14:09:32.037

如果您使用的是 C++11，则可以使用移动语义和移动 std::wstring 的构造函数，即 noexcept。**

# .net - 从调试更改为发布版本时出现“找不到资源”异常

> ID：13430599
> 
> 赞同：0
> 
> 时间：2012-11-17T12:33:51.250
> 
> 标签：.net, wpf, application-resource

我有一个带有 wpf 应用程序和该应用程序所依赖的库的解决方案。应用程序调用库上的一个方法（具有程序集名称序列化），该方法又使用代码加载图像

```
const string adornerImageUri = "pack://application:,,,/Serialization;component/TimelinePanel/Images/BoundaryAdornerGlyph.gif";
adornerImage.UriSource = new Uri(adornerImageUri, UriKind.Absolute); 
```

BoundaryAdornerGlyph.gif 的构建操作设置为“资源”，复制到输出目录设置为“不复制”。当解决方案（因此应用程序和库）在发布模式下构建时，上面的代码给出“找不到资源”异常，而在调试模式下构建时没有异常。我正在使用 Visual Studio 2010。为什么会发生这种情况？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-17T16:28:31.967

通过清理和构建解决方案可以解决异常，但我仍然不知道是什么原因造成的。我无法通过先清理并依次在调试和发布模式下构建来重现它。我不会接受这个作为答案，因为问题是因为异常原因而询问的。

# php - 使用连接和满足条件进行查询

> ID：13430602
> 
> 赞同：2
> 
> 时间：2012-11-17T12:34:35.430
> 
> 标签：php, mysql

我有这个查询，我用它来匹配两个表，现在，我只按时间匹配表，所以，这意味着，零售商表中的时间字段比 imovo 表中的时间字段早 5 秒。我已经需要实现的是：

当我插入零售商行时，我会添加诸如零售商时间、零售商 epos_id 之类的信息 当我插入 imovo 行时，我会添加诸如 imovo 时间、imovo rpos_id 之类的信息 我还有一个表 rbpos_epos，它具有匹配的 rbpos_id 和 epos_id

```
table retailer:
time     |    epos_id
12:23:34   ea12

table imovo
time     |    rbpos_id
12:23:29      ra12

table rbpos_epos
id  | epos_id  |   rbpos_id
1       ea12         ra12 
```

当我将零售商与 imovo 匹配时，我还想检查它们各自的 rbpos_id 和 epos_id 是否在 rbpos_epos 表中匹配。我的意思是，如果它们是一对，它们是否具有相同的 id。

这是我目前使用的查询

```
SELECT retailer.date, retailer.time, retailer.location, retailer.user_id,imovo.mobile_number ".
 "FROM retailer LEFT JOIN imovo ".
    " ON addtime(retailer.time, '0:0:50')>imovo.time
AND retailer.time <imovo.time AND retailer.date=imovo.date
" 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-17T12:45:57.853

尝试加入所有三个表[SQL Fiddle](http://www.sqlfiddle.com/#!2/52ab3/1/0)

```
select r.`time`, r.`epos_id`,
       i.`time`, i.`rbpos_id`
from retailer r
join rbpos_epos re on r.epos_id = re.epos_id
join imovo i on i.rbpos_id = re.rbpos_id
             and addtime(r.`time`, '0:0:50') > i.`time`
             and r.`time` < i.`time`
             and r.`date` = i.`date`; 
```

根据需要在 select 中添加列。

# tidesdk - TideSDK 无法识别 Mountain Lion 上的 SDK

> ID：13430603
> 
> 赞同：1
> 
> 时间：2012-11-17T12:34:41.307
> 
> 标签：tidesdk

我尝试启动 hello world 示例，但出现此错误：

![在此处输入图像描述](../Images/7527994c12f5bd2cd503847dc27ad14d.png)

我已将 SDK 安装在入门指南推荐的位置（~/Library/Application Support/TideSDK）。我做错了什么，你能帮帮我吗？

谢谢！！！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-17T13:09:05.577

小心！您需要将下载的 SDK 存储在

```
~/Library/Application Support/TideSDK 
```

那是您的用户文件夹中的库文件夹，而不是全局库文件夹。

您可以在以下位置找到有关设置 TideSDK 和开始使用您的第一个应用程序的更多信息：[http ://tidesdk.multipart.net/docs/user-dev/generated/#!/guide/getting_started](http://tidesdk.multipart.net/docs/user-dev/generated/#!/guide/getting_started)

# sql - 连接中父类别的sql categorypath

> ID：13430611
> 
> 赞同：1
> 
> 时间：2012-11-17T12:35:06.947
> 
> 标签：sql, join, recursion, parent

我已经尝试并搜索了一段时间，我认为没有太多遗漏，但我需要帮助：

我只能通过添加（左）连接来修改查询，因为它是自动创建的查询所以它的开头是`SELECT * FROM question q LEFT JOIN ...`

现在是应该将每个问题（问题有一个类别 id (q.category)）与类别路径连接起来的部分（如果在 php 中选择）：

```
LEFT JOIN (
SELECT GROUP_CONCAT(cn.name SEPARATOR ' >> ') AS categorypath
FROM    (
        SELECT  _id AS id, parent,
                @cl := @cl + 1 AS level
        FROM    (
                SELECT  @r AS _id,
                        (
                        SELECT  @r := parent
                        FROM    categories
                        WHERE   id = _id
                        ) AS parent,
                        @l := @l + 1 AS level
                FROM    (
                        SELECT  @r := q.category,
                                @l := 0,
                                @cl := 0
                        ) vars,
                        categories qct
                WHERE   @r <> 0
                ORDER BY
                        level DESC
                ) qi
        ) cp
LEFT JOIN categories AS cn ON cp.id = cn.id
) ON q.category = ...(dont know) 
```

因此，如果我在查询中间为“q.category”填充一个值，那么这部分就没有第一个左连接工作。（例如@r := 8）但我需要它作为连接表的每个问题......

谢谢

编辑：使用的数据库将是 MySQL 数据库

# javascript - 在 html5 视频播放按钮上添加事件

> ID：13430612
> 
> 赞同：1
> 
> 时间：2012-11-17T12:35:13.947
> 
> 标签：javascript, jquery, html

所以我只想访问视频控件的播放按钮，按下轨迹栏或音量时没有任何动作。我想要这样的东西，但有 html5 视频[http://flash.flowplayer.org/demos/installation/multiple-players.html](http://flash.flowplayer.org/demos/installation/multiple-players.html)

```
jQuery(document).ready(function() {
    $('.vids').click(function(){
        $('.vids').each(function () {
            this.pause();
        });
    });
});

<video controls="controls" class="vids" id="1">
   <source src ....>
</video>
<video controls="controls" class="vids" id="2">
   <source src ....>
</video>
.... 
```

所以现在所有视频都停止了，除了我点击的那个，但是当我按下轨迹栏或音量时，它也停止了。没有自己控制或使用其他视频播放器的任何解决方案？我找到了不同的解决方案，但不是我想要的：S

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-17T12:56:10.083

我认为您必须针对您正在单击的当前项目，以便单击的目标获得要处理的命令来执行此操作，看看这是否适合您：

> ```
> $('.box').click(function(e){
>     $(e.target).pause();
> }); 
> ```

# git - 如何从另一个目录使用 git？

> ID：13430613
> 
> 赞同：4
> 
> 时间：2012-11-17T12:35:23.853
> 
> 标签：git

假设有如下文件夹结构：

```
repos
    /repo1  <-- here is git repository 
```

我愿意：

```
cd repos 
```

我现在如何在`/repo1`仍然在`repos`目录中使用存储库？我不想做

```
cd repo1
git status (...)
git commit (...)
... 
```

但类似：

```
git --git-dir=repo1 (...) 
```

或者

```
git --work-tree=repo1 (...) 
```

我想以这种风格执行*所有*git 命令， event `git init`。什么是正确的方法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-17T13:54:12.757

您可以设置环境变量`$GIT_DIR`。查一下。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2018-02-10T11:38:10.127

Git 具有将 Git的工作目录更改为然后在该目录中执行命令的`-C <path>`选项（如）。示例运行：`tar -C <path>``path`

```
$ mkdir gitrepo
$ git -C gitrepo init
Initialized empty Git repository in /home/foo/gitrepo/.git/ 
```

`man git`：

> `-C <path>`
> 
> 就像启动 git`<path>`而不是当前工作目录一样运行。当给出多个`-C`选项时，每个后续的 non-absolute`-C <path>`都相对于前面的`-C <path>`.
> 
> 此选项影响期望路径名的选项`--git-dir`，`--work-tree`因为它们对路径名的解释将相对于由该`-C`选项引起的工作目录。例如，以下调用是等效的：
> 
> ```
> git --git-dir=a.git --work-tree=b -C c status
> git --git-dir=c/a.git --work-tree=c/b status 
> ```

我的 Git 版本是 2.16.1。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-08-13T15:39:44.970

您可以组合`--git-dir`并`--work-tree`在当前目录之外的 repo 上进行操作：

```
git --git-dir=/some/other/dir/.git --work-tree=/some/other/dir status 
```

您也可以设置`GIT_DIR`为提到的@opqdonut，但您还必须设置`GIT_WORK_TREE`. 请注意，这是目标存储库中目录`GIT_DIR`的路径，并且是目标存储库本身。`.git``GIT_WORK_TREE`

这一切都非常方便，但这里有一个 shell 函数可以让你的生活更轻松：

```
function git-dir() {
    dir=$1
    shift
    git --git-dir="$dir/.git" --work-tree="$dir" $*
} 
```

这将适用于 Bash 或 Zsh（可能还有其他 Bourne 派生的 shell）。将它放在您的`~/.bashrc`或`~/.zshrc`适合您环境的任何地方。

然后你可以这样做：

```
git-dir /some/other/dir status 
```

`status`任何 Git 命令在哪里。它也适用于其他参数，这些参数直接传递给`git`命令：

```
git-dir /some/other/dir remote -v 
```

# ios - ShinobiCharts 选择一列

> ID：13430622
> 
> 赞同：3
> 
> 时间：2012-11-17T12:36:59.980
> 
> 标签：ios, graph, charts

我正在尝试使图表中的列可选择，并在单击时显示所选列的更多详细信息。每列由一个系列表示（您将在一秒钟内理解）。

这就是我构建每个系列的方式：

```
-(SChartSeries *)sChart:(ShinobiChart *)chart seriesAtIndex:(int)index {
    SChartColumnSeries *series = [SChartColumnSeries new];
    series.style.showAreaWithGradient = NO;
    series.stackIndex = [NSNumber numberWithInt:0];
    series.selectedStyle.showAreaWithGradient = NO;
    CHART_COLOR_TYPE dataType = [TestGraphDataManager getDataType:index];
    series.style.areaColor =    (dataType == ACCOUNT)?
                                    [UIColor colorWithRed:227.0f/255.0f green:179.0f/255.0f blue:0.0f/255.0f alpha:0.5f]:
                                    [UIColor colorWithRed:0.0f/255.0f green:172.0f/255.0f blue:235.0f/255.0f alpha:0.5f];

    series.selectedStyle.areaColor = [UIColor colorWithRed:129.0f/255.0f green:0.0f/255.0f blue:82.0f/255.0f alpha:0.5f];
    series.selectionMode = SChartSelectionSeries;

    series.style.lineColor = [UIColor clearColor];
    series.selectedStyle.lineColor = [UIColor clearColor];

    return series;
} 
```

我目前遇到的问题是只有第一个系列是可选的。我还让每个条形图都用不同的系列表示，这样我就可以轻松地切换它的颜色`series.selectionMode = SChartSelectionSeries`

最后我有这个委托事件，这样我就可以加载额外的数据，但它也只在第一个系列中被调用

```
- (void)sChart:(ShinobiChart *)chart toggledSelectionForSeries:(SChartSeries *)series nearPoint:(SChartDataPoint *)dataPoint atPixelCoordinate:(CGPoint)pixelPoint{
    NSLog(@"click event called");
    //Display data
} 
```

有谁知道为什么会这样？一整天都让我发疯。

谢谢您，提前提供任何帮助。

**编辑：** 我发现了主要问题，因为`series.stackIndex = [NSNumber numberWithInt:0];`它使所有条具有相同的名称堆栈（因为名称的名称重复在我看来这不是问题），我这样做是为了使所有条都相同与刻度标记的距离，因此条形不是很尖。但我相信 shinobi 为这些值设置了隐形条，并且它们高于另一个，因此只有第一个系列可供选择，因为它高于其他系列。如果我删除那条线，图形看起来很糟糕，但都是可点击的。关于如何绕过这个或避免这个问题的任何想法？

它应该看起来如何（使用堆叠索引），但它会破坏点击事件： ![带堆叠](../Images/b4d41c489ceefbdb196597b5c57a522e.png)

如果没有堆叠索引，所有条形图都是可点击的，但看起来不太好，而且我拥有的条形图越多，它只使用 4 个条形图就会变得更糟： ![无需堆叠](../Images/d88b0844c67581a88d4fdcf9867db7b0.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T17:36:33.643

从 Shinobi 那里抢过来 - 感谢您与我们联系！

这可以通过使用子类化来解决，并为列偏移返回零，如下所示：

```
@interface MyColumnSeries : SChartColumnSeries
@end

@implementation MyColumnSeries
- (double) offsetOfStackInChart:(ShinobiChart *)chart forDatapointIndex:(const int)pointIndex withPointSelector:(SEL)pointSelector
{
    return 0.0;
}
@end 
```

# android - 如何从动态生成的edittext中获取更新的数据并将其放入hashmap

> ID：13430623
> 
> 赞同：0
> 
> 时间：2012-11-17T12:37:03.250
> 
> 标签：android

我正在创建一个具有 TextView 和对应 Edittext 的动态布局。创建它没有问题。我正在使用这个：

```
while(it.hasNext())
{
tv = dynamicUiComponents.myTextView(context, new LayoutParams(LayoutParams.MATCH_PARENT, LayoutParams.WRAP_CONTENT), 1000+i, key);
ed = dynamicUiComponents.myRowEditText(context, new LayoutParams(LayoutParams.MATCH_PARENT, LayoutParams.WRAP_CONTENT),50+i,value);
ed.setTag(key);

ed.addTextChangedListener(new TextWatcher()
{
@Override
public void onTextChanged(CharSequence s, int start, int before, int count)
{
}
@Override
public void beforeTextChanged(CharSequence s, int start, int count,int after)
{
}
@Override
public void afterTextChanged(Editable s) {
update_columns.put(ed.getTag().toString(),s.toString());
}
});
} 
```

当我使用此语句时，上述语句无法识别更新的编辑文本： update_columns.put( **ed.getTag().toString()** ,s.toString());

上面的粗体语句始终具有最后添加的 EditText 标记值。我在哪里错了吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-17T14:24:42.713

那是因为`ed`你的 while 循环的每次迭代都会更新。`ed.getTag().toString()`保留对 TextWatcher 中的值的引用并引用它会更容易：

```
ed.addTextChangedListener(new TextWatcher() {
private String columnId = key; //Add this

@Override
public void onTextChanged(CharSequence s, int start, int before, int count){ }

@Override
public void beforeTextChanged(CharSequence s, int start, int count,int after) {    }

@Override
public void afterTextChanged(Editable s) {
  update_columns.put(this.columnId, s.toString());
}
}); 
```

这样每个 EditText 的 TextWatcher 将只更新相应的列。

# javascript - 全景加载 SpiderFier 停止工作后

> ID：13430624
> 
> 赞同：-1
> 
> 时间：2012-11-17T12:37:08.280
> 
> 标签：javascript, google-maps-api-3

我正在地图上绘制标记，并且对于相同的位置，我正在使用这个 Library [SpiderFy](https://github.com/jawj/OverlappingMarkerSpiderfier)。我想要的是在每个标记上单击标记全景时应在单独的容器中显示在地图下方。

一次全景加载后，SpiderFier 停止工作，然后标记不能再次 Spiderfy

当 Panorama 特定代码被注释时，它开始正常工作。

可能是什么问题 ？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T21:39:22.837

我通过创建另一个 Google Map 实例解决了这个问题。

```
/*Google Map instance for draw Google Map*/     
map = new google.maps.Map(document.getElementById("map_canvas"),
                mapOptions);

/*Google map instance  for StreetView*/
        streeviewMap = new google.maps.Map(document
                .getElementById("images_tab"), mapOptions); 
```

# web-services - Spring的Axis2客户端

> ID：13430626
> 
> 赞同：1
> 
> 时间：2012-11-17T12:37:15.580
> 
> 标签：web-services, spring, axis2, webservices-client

我有一个简单的`Axis2`客户。我`Spring`用作轻型容器。`axis2`我的问题是：客户端和之间是否有集成`spring`？我过去熟悉`org.springframework.remoting.jaxws.JaxWsPortProxyFactoryBean`Spring 中的课程，但不知道它是否有效`axis2`。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-11-24T05:14:03.137

此[链接](http://fazlansabar.blogspot.com.au/2012/04/ws-security-with-apache-rampart-part-13.html)可以让您大致了解您需要做什么

首先，您需要从axis2 端点生成存根代码。使用maven和axis2的maven插件是这样的：

```
<plugin>
                <groupId>org.apache.axis2</groupId>
                <artifactId>axis2-wsdl2code-maven-plugin</artifactId>

                <version>${axis.version}</version>
                <executions>
                    <execution>
                        <phase>generate-sources</phase>
                        <goals>
                            <goal>wsdl2code</goal>
                        </goals>
                        <configuration>
                            <wsdlFile>{axis2wsdl-url} or src/main/resources/wsdl/{downloaded wsdl file}</wsdlFile>
                            <packageName>com.cybersource.stub</packageName>
                            <databindingName>xmlbeans</databindingName>

                        </configuration>
                    </execution>
                </executions>               
            </plugin> 
```

接下来，您需要将生成的 jar 文件安装到 maven 存储库中。在你做任何事情之前，你需要去生成存根代码的地方并运行“ant”，它将生成所需的 jar 文件，你需要将它们安装到你的 repo 中。

如果您使用的是 Spring Boot，请添加以下两个 bean：

```
@Bean
    public ConfigurationContext getConfigurationContext() throws AxisFault {
        ConfigurationContext ctx = ConfigurationContextFactory
                .createConfigurationContextFromFileSystem(config.getAxisConfigLocation(), null);
        return ctx;
    }

    @Bean
    public Policy getOMElement() throws FileNotFoundException {
        String policyLocation = config.getAxisConfigLocation() + "/conf/policy.xml";
        InputStream in = new FileInputStream(policyLocation);
        OMXMLParserWrapper omxmlParserWrapper = OMXMLBuilderFactory.createOMBuilder(in);
        Policy policy = PolicyEngine.getPolicy(omxmlParserWrapper.getDocumentElement());
        return policy;
    } 
```

您应该将 config.getAxisConfigLocation() 设置到您复制 Axis 配置文件的位置，如下所示：

[![在此处输入图像描述](../Images/1d722e9ca685357315570abc5c76edc0.png)](https://i.stack.imgur.com/sfZDL.png)

在上述模式中，axis2.xml 对生成axis2 上下文很重要。policy.xml 和rampart-xxx.mar 文件用于身份验证，您需要知道服务器如何处理它。

在您的连接器部分，您需要注入 ctx 和/或策略 bean 并生成存根，如下所示：

```
@Autowired
    ConfigurationContext ctx;

    @Autowired
    Policy policy;

private TransactionProcessorStub generateStub() throws AxisFault {
        TransactionProcessorStub stub = new TransactionProcessorStub(ctx, config.getServerurl());
        ServiceClient client = stub._getServiceClient();
        Options clientOptions = client.getOptions();
        clientOptions.setProperty(WSHandlerConstants.USER, config.getMerchantid());

        clientOptions.setProperty(RampartMessageData.KEY_RAMPART_POLICY, policy);
        client.setOptions(clientOptions);
        client.engageModule("rampart");

        return stub;
    } 
```

# matlab - 在以下情况下如何使用 Matlab 的 princomp 函数？

> ID：13430628
> 
> 赞同：4
> 
> 时间：2012-11-17T12:37:18.587
> 
> 标签：matlab, image-processing, pca

我有 10 张图片（18x18）。我将这些图像保存在一个名为的数组`images[324][10]`中，其中数字 324 代表图像的像素数量，数字 10 代表我拥有的图像总数。

我想将这些图像用于神经元网络，但是 324 作为输入是一个很大的数字，因此我想减少这个数字但保留尽可能多的信息。

我听说你可以用`princomp`实现 PCA 的函数来做到这一点。

问题是我还没有找到任何关于如何使用这个功能的例子，特别是对于我来说。

如果我跑

```
[COEFF, SCORE, latent] = princomp(images); 
```

它运行良好，但我怎样才能得到数组`newimages[number_of_desired_features][10]`？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-20T22:23:55.000

PCA 在这里可能是一个正确的选择（但不是唯一的选择）。虽然，您应该知道 PCA 不会自动减少输入数据特征的数量。我建议您阅读本教程：[http](http://arxiv.org/pdf/1404.1100v1.pdf) ://arxiv.org/pdf/1404.1100v1.pdf - 这是我用来理解 PCA 的教程，它对初学者非常有用。

回到你的问题。图像是 324 维空间中的向量。在这个空间中，第一个基向量是一个在左上角有一个白色像素的基向量，下一个是下一个像素为白色的，其他的都是黑色的——依此类推。它可能不是表示该图像数据的最佳基向量集。PCA 计算新的基向量（COEFF 矩阵 - 表示为旧向量空间中的值的新向量）和新的图像向量值（SCORE 矩阵）。那时您根本没有丢失任何数据（没有减少功能数量）。但是，您可以停止使用一些新的基向量，因为它们可能与噪声有关，而不是与数据本身有关。这一切都在教程中详细描述。

```
images = rand(10,324);
[COEFF, SCORE] = princomp(images);
reconstructed_images = SCORE / COEFF + repmat(mean(images,1), 10, 1);
images - reconstructed_images
%as you see there are almost only zeros - the non-zero values are effects of small numerical errors
%its possible because you are only switching between the sets of base vectors used to represent the data
for i=100:324
    SCORE(:,i) = zeros(10,1);
end
%we remove the features 100 to 324, leaving only first 99
%obviously, you could take only the non-zero part of the matrix and use it
%somewhere else, like for your neural network
reconstructed_images_with_reduced_features = SCORE / COEFF + repmat(mean(images,1), 10, 1);
images - reconstructed_images_with_reduced_features
%there are less features, but reconstruction is still pretty good 
```

# wordpress - Wordpress Custom Walker li id to li class

> ID：13430629
> 
> 赞同：1
> 
> 时间：2012-11-17T12:37:23.303
> 
> 标签：wordpress, class, navigation

我目前正在使用 WordPress 自定义 Walker 来自定义我的导航。它当前生成此导航：

```
<nav class="nav-top clearfix">
<ul class="clearfix">
<li id="menu-item-69" class="current_page_item"><a href="#">test1</a></li>
<li id="menu-item-68"><a href="#">test2</a></li>
<li id="menu-item-67"><a href="#">test3</a></li>
<li id="menu-item-66"><a href="#">test4</a></li>
<li id="menu-item-65"><a href="#">test5</a></li>
<li id="menu-item-64"><a href="#">test6</a></li>
</ul>
</nav> 
```

当我单击 test2 时，它会将 current_page_item 类应用于它。

一切正常，但是我也想在页脚中使用相同的导航。如果我这样做，那么我会因为 li id 而出现验证错误。如何将 li id 更改为 li class ？

这是我的自定义沃克：

```
class My_Walker extends Walker_Nav_Menu {
  function start_el(&$output, $item, $depth, $args)
  {
       global $wp_query;
       $indent = ( $depth ) ? str_repeat( "\t", $depth ) : '';

       $class_names = $value = '';

       $classes = empty( $item->classes ) ? array() : (array) $item->classes;

       $current_indicators = array('current_page_item');

       $newClasses = array();

       foreach($classes as $el){
           //check if it's indicating the current page, otherwise we don't need the class
           if (in_array($el, $current_indicators)){ 
               array_push($newClasses, $el);
           }
       }

       $class_names = join( ' ', apply_filters( 'nav_menu_css_class', array_filter( $newClasses), $item ) );
       if($class_names!='') $class_names = ' class="'. esc_attr( $class_names ) . '"';

       $output .= $indent . '<li id="menu-item-'. $item->ID . '"' . $value . $class_names .'>';

       $attributes  = ! empty( $item->attr_title ) ? ' title="'  . esc_attr( $item->attr_title ) .'"' : '';
       $attributes .= ! empty( $item->target )     ? ' target="' . esc_attr( $item->target     ) .'"' : '';
       $attributes .= ! empty( $item->xfn )        ? ' rel="'    . esc_attr( $item->xfn        ) .'"' : '';
       $attributes .= ! empty( $item->url )        ? ' href="'   . esc_attr( $item->url        ) .'"' : '';

       if($depth != 0)
       {
           //children stuff, maybe you'd like to store the submenu's somewhere?
       }

       $item_output = $args->before;
       $item_output .= '<a'. $attributes .'>';
       $item_output .= $args->link_before .apply_filters( 'the_title', $item->title, $item->ID );
       $item_output .= '</a>';
       $item_output .= $args->after;

       $output .= apply_filters( 'walker_nav_menu_start_el', $item_output, $item, $depth, $args );
       }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T11:17:20.763

如果您还没有弄清楚，这就是您应该做的：

替换`$newClasses = array();`为：

```
$newClasses = array( 'menu-item-'. $item->ID ); 
```

然后替换以下行：

```
$output .= $indent . '<li id="menu-item-'. $item->ID . '"' . $value . $class_names .'>'; 
```

和：

```
$output .= $indent . '<li' . $value . $class_names .'>'; 
```

# javascript - 每次通过单击链接更改背景图像

> ID：13430633
> 
> 赞同：1
> 
> 时间：2012-11-17T12:37:59.207
> 
> 标签：javascript, image, background, hyperlink

```
<body>
<script language="JavaScript">
<!--

var backImage = new Array();
backImage[0] = "pics/img02.jpg";
backImage[1] = "pics/img03.jpg";
backImage[2] = "pics/img04.jpg";
backImage[3] = "pics/img05.jpg";

function changeBGImage(whichImage){
if (document.body){
document.body.background = backImage[whichImage];
backImage = backImage++;
}
}

//-->
</script>
<a href="javascript:changeBGImage(2)">Change</a>
</body> 
```

抱歉，我不明白我应该如何在此处正确集成代码 - 希望它仍然有效。我想在这里做什么：更改背景（有效）而不是在背景计数器上加一，以便下次单击链接时显示下一个背景（无效）。它应该很简单，但我还是想不通......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-17T12:44:11.163

使用从 0 计数到 3 的静态计数器。

```
var cnt = 0;

function changeBGImage(){
  if (document.body){
    document.body.background = backImage[cnt];
    cnt = (cnt+1) % 4; // mod 4
  }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-17T13:04:28.953

您的代码中有几个问题

`backImage = backImage++;`

不会`backImage`像您期望的那样增加。语法应该很简单`backImage++;`

此外，要设置您需要的背景图像`document.body.style.background`或`document.body.style.backgroundImage = url(...)`

*编辑*

除了通过点击处理程序在背景中循环之外，如果您还需要设置初始背景，请尝试以下类似的操作，初始背景设置为`window.onload`.

[jsFiddle在这里](http://jsfiddle.net/VAY4K/15/)

```
var backImage = [];
var whichImage = 0;

backImage[0] = "http://dummyimage.com/100x100/000000/000000.png";
backImage[1] = "http://dummyimage.com/100x100/FF0000/000000.png";
backImage[2] = "http://dummyimage.com/100x100/00FF00/000000.png";
backImage[3] = "http://dummyimage.com/100x100/0000FF/000000.png";

function changeBGImage(reseedWhichImage){
    // If caller has specified an exact index, then reseed to this
    if (reseedWhichImage != undefined)
    {
        whichImage = reseedWhichImage;
    }
    if (document.body){
        document.body.style.backgroundImage = "url(" + backImage[whichImage] + ")";
        whichImage++;
        if (whichImage >= 4){
            whichImage = 0;
        }
    }
}

// During global load, set the initial background
window.onload = changeBGImage(2);
​ 
```

# mysql - 我希望像 sum() 这样的函数在 mysql 中添加数据类型 time 列中的所有行

> ID：13430635
> 
> 赞同：0
> 
> 时间：2012-11-17T12:38:05.247
> 
> 标签：mysql

在我的数据库中有如下表

```
+----+-----------+----------+
| id | fk_id     | duration |
+----+-----------+----------+
|  1 |        23 | 00:00:31 |
|  2 |        23 | 00:00:36 |
|  3 |       677 | 00:00:36 |
|  4 |       678 | 00:00:36 |
+----+-----------+----------+ 
```

在上表中，列持续时间是数据类型 time 。

以下是该表的架构

```
Create Table: CREATE TABLE `durationof` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `fk_id` int(11) NOT NULL,
  `duration` time NOT NULL,
  PRIMARY KEY (`id`)) 
```

这里只是我想在查询的持续时间列中添加所有时间，我该怎么做？

就像 sum 函数一样，是否有任何函数可以添加所有 mysql time vales 。

我尝试从 durationof 中选择 addtime(diration);

但这行不通。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-17T12:42:11.807

如果要转换为秒来求和，我会很想以秒为单位存储时间。

特别是，您可以存储某种类型的整数（int、smallint、bigint 等），而不是存储 TIME。您将确定最小的度量单位并存储在其中。

例如，如果您关心精确到秒，则以秒为单位存储持续时间。例如，您可以存储`45`45 秒。如果您关心毫秒，您会将数据视为毫秒。换句话说，`45000`将存储 45 秒。

然后你又回到了正常的求和状态。

* * *

或者，如果您想坚持使用 TIME，请使用 eggyval 的答案。

您的具体情况可能会决定使用 TIME 还是整数更好。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-17T13:47:00.207

我完全不同意[@Corbin 的原始答案](https://stackoverflow.com/revisions/13430672/3)。如[The `TIME`Type](http://dev.mysql.com/doc/en/time.html)下所述：

> TIME 值的范围可以从`'-838:59:59'`到`'838:59:59'`。小时部分可能很大，因为该`TIME`类型不仅可以用于表示一天中的某个时间（必须小于 24 小时），还可以用于表示经过的时间或两个事件之间的时间间隔（可能远大于 24小时，甚至负数）。

取所有这些间隔的总和：[转换为 seconds](http://dev.mysql.com/doc/en/date-and-time-functions.html#function_time-to-sec)，[取总和](http://dev.mysql.com/doc/en/group-by-functions.html#function_sum)，然后再[转换回来](http://dev.mysql.com/doc/en/date-and-time-functions.html#function_sec-to-time)。

```
SELECT SEC_TO_TIME(SUM(TIME_TO_SEC(duration))) FROM durationof 
```

在[sqlfiddle](http://sqlfiddle.com/#!2/8cdf6/1/0)上查看。

# java - JAXB 生成的奇怪 XML 结构

> ID：13430639
> 
> 赞同：2
> 
> 时间：2012-11-17T12:38:25.823
> 
> 标签：java, jakarta-ee, jaxb

为什么我会得到这个结构？我会期望 quiz-->questions--> 和两个问题元素，而不是两个问题元素？

```
@XmlRootElement
public class Quiz {

    private List<Question> questions;

    public Quiz() {
        questions = new ArrayList<Question>();
    }

    public List<Question> getQuestions() {
        return questions;
    }

    public void setQuestions(List<Question> questions) {
        for (Question question : questions) {
            addQuestion(question);
        }
    }

    public void addQuestion(final Question question) {
        if (!(questions.contains(question))) {
            questions.add(question);
        }
    }

    public void removeQuestion(final Question question) {
        if (questions.contains(question)) {
            questions.remove(question);
        }
    }

    public int numberOfQuestions() {
        return questions.size();
    }
} 
```

问题：

```
@XmlRootElement
public class Question extends AbstractModel {

}

<quiz><questions></questions><questions></questions></quiz> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-17T13:02:27.313

默认情况下，JAXB (JSR-222) 实现不提供分组元素。你可以用`@XmlElementWrapper`得到一个。

```
@XmlElementWrapper
@XmlElement(name="question")
public List<Question> getQuestions() {
    return questions;
} 
```

**了解更多信息**

*   [http://blog.bdoughan.com/2010/09/jaxb-collection-properties.html](http://blog.bdoughan.com/2010/09/jaxb-collection-properties.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-17T12:56:17.843

我怀疑您的收藏（即“getQuestions”）没有很好地注释。
如果您打算拥有一个 Question 对象或扩展 Question 的对象列表（例如，
如果您有 StudentQuestion 和 LecturerQuestion 扩展 Question 并且您希望将这些对象添加到集合中），您应该考虑使用 XmlRefElement 如果
您想要将“问题”的“包装器”放在“问题”上，即 - 具有如下所示的 XML：

```
<Questions>
   <Question></Question>
   <Question></Questions>
</Question> 
```

您应该使用注释集合`@XmlElementWrapper(name="Questions")`

# jquery - 如何使用带有重力形式的花式框并在提交时关闭？

> ID：13430640
> 
> 赞同：1
> 
> 时间：2012-11-17T12:38:26.260
> 
> 标签：jquery, fancybox

我在 WordPress 中使用精美的盒子 iFrame 作为重力形式。是否可以在提交表单后而不是在 iFrame 中重定向，关闭花哨的框并在浏览器中重定向？如果表单验证失败，保持打开状态直到表单验证（通过 ajax）？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T08:39:14.380

问题是因为它在 iframe 中。尝试创建自己的模式（使用我在下面放置的代码）。

当这是竞争时，请执行以下操作：

在管理员的“表单设置 > 确认”选项卡中。如果 URL 在您的站点之外，请单击“重定向”单选按钮，或者单击“页面”单选按钮并选择驻留在您站点内部的内部页面。

# 下面的代码可用于使用相同模式包装器的单个或多个表单。

**模态 HTML/PHP GFORM（简码）：**

```
<div class="modal_wrapper ac">
<div class="modal_form">

    <div class="modal_contact">
        <h3 class="title al">Contact</h3>
        <p class="al mb20">Send us a message and we will respond as soon as possible.</p>
        <?php 
            echo do_shortcode('[gravityform id="1" title="false" description="false" ajax="true"]');
        ?>
    </div>

    <div class="modal_request">
        <h3 class="title al">Request</h3>
        <p class="al mb20">Make a request for custom personalized jewelry for someone special or for you.</p>
        <?php 
            echo do_shortcode('[gravityform id="2" title="false" description="false" ajax="true"]');
        ?>
    </div>

    <span class="close-btn"></span>
</div> 
```

**CSS：**

```
.al {
text-align:left;
}

.mb20 {
margin-bottom:20px;
}

.close-btn {
background:transparent url('../images/close_btn.png') no-repeat 0 0;
position:absolute;
width:26px;
height:26px;
top:-10px;
right:-10px;
cursor:pointer;
opacity:1.0;
-moz-opacity:1.0;
-webkit-opacity:1.0;
-o-opacity:1.0;
-khtml-opacity:1.0;
-ms-opacity:1.0;
outline:none;
text-indent:-9999px;
}

.close-btn:hover {
opacity:0.8;
-moz-opacity:0.8;
-webkit-opacity:0.8;
-o-opacity:0.8;
-khtml-opacity:0.8;
-ms-opacity:0.8;
}

.modal_wrapper {
background:transparent url('../images/bg_modal.png') !important;
position:fixed;
z-index:999;
left:0;
top:0;
filter:alpha(opacity=100) !important;
-moz-opacity:1.0 !important;
opacity:1.0 !important;
display:none;
}

.modal_form {
top:100px;
background:#fff;
position:relative;
border:3px solid #efddc1;
width:370px;
height:auto;
padding:10px 20px;
border-radius:3px; -moz-border-radius:3px; -webkit-border-radius:3px; -khtml-border-radius:3px; -ms-border-radius:3px; -o-border-radius:3px;
}

.modal_form .title {
font-size:26px;
color:#f76b4f;
margin:10px 0;
text-transform:uppercase;
} 
```

**jQuery：**

```
// Hides by default
$('.modal_wrapper').hide();

// Makes the wrapper the same Height & Width as the window
$('.modal_wrapper').css({
    'width': $(window).width() + 'px',
    'height': $(window).height() + 'px'
}); 

// Places the form grandparent in the center vertically & horizontally
$('.modal_form').css({
    'margin-left': '-' + ($('.modal_form').width()/2) + 'px',
    'left': '50%'
});

// Hides the forms parent
$('.modal_contact').hide();
$('.modal_request').hide();

// Makes sure that is stays vertically & horizontally centered when the window is resized
$(window).resize(function(){
    $('.modal_wrapper').css({
        'width': $(window).width() + 'px',
        'height': $(window).height() + 'px'
    });
    $('.modal_form').css({
        'margin-left': '-' + ($('.modal_form').width()/2) + 'px',
        'left': '50%'
    });
});

// Place this or these (contact_form, request_form) class on anything that you want to show the modal
// be sure to hide the other forms in the modal
$('.contact_form').click(function(){
    $('.modal_wrapper').fadeIn('fast');
    $('.modal_contact').show();
    $('.modal_request').hide();
});

$('.request_form').click(function(){
    $('.modal_wrapper').fadeIn('fast');
    $('.modal_contact').hide();
    $('.modal_request').show();
});

// Close the modal
$('.close-btn').click(function(){
    $(this).closest('.modal_wrapper').fadeOut('fast');
}); 
```

# python - django.core.exceptions.ImproperlyConfigured：站点 filebrowser.filebrowser 的目录“uploads/”不存在。

> ID：13430642
> 
> 赞同：1
> 
> 时间：2012-11-17T12:38:31.463
> 
> 标签：python

我正在尝试在我的项目中使用 FileBrowseFile，但是当我运行程序时，它显示 django.core.exceptions.ImproperlyConfigured: Directory 'uploads/' for the site filebrowser.filebrowser 不存在。

我的设置文件看起来像

```
MEDIA_ROOT = getattr(settings, "FILEBROWSER_MEDIA_ROOT", settings.MEDIA_ROOT)
MEDIA_URL = getattr(settings, "FILEBROWSER_MEDIA_URL", settings.MEDIA_URL)
DIRECTORY = getattr(settings, "FILEBROWSER_DIRECTORY", 'uploads/') 
```

我的models.py有

```
banner_url = FileBrowseField("Image",max_length=200,blank=True,null=True, extensions=['.jpg']) 
```

可以做些什么来摆脱这个错误？

# sql - 建模分层属性

> ID：13430643
> 
> 赞同：2
> 
> 时间：2012-11-17T12:38:38.973
> 
> 标签：sql, database, database-design, nosql, data-modeling

我正在尝试找出零售商的数据模型。

该零售商在全国有几家商店，它们使用以下层次结构建模：

```
Channel -> Zone -> City -> Store 
```

每个商店都包含几篇文章。每篇文章都有类似的属性

*   激活标志（这表明文章的存在）
*   价格
*   供应商
*   仓库

现在，零售商可以在层次结构中的任何级别设置这些属性。考虑以下情况：

*   在渠道级别为文章设置价格将应用于所有商店。
*   设置在更高级别的价格可以在任何其他级别被覆盖。例如，在城市级别仅针对城市中的商店或针对特定商店。
*   这适用于上面列出的所有属性。

到目前为止，他们已经使用 RDBMS 对其进行建模，方法是在层次结构的顶部定义全局规则并将异常单独调用为单独的行。比如说，价格表将在频道级别为文章设置价格，并且任何级别的任何更改都将单独指定。显然，这在获取存储级别的属性时效率不高。

**样本数据**

假设 Channel、Zone、City 和 Store 统称为实体。Channel 的 id 范围 >= 4000，Zone >= 3000，City >= 2000，stores 范围从 0 到 1000。

下面给出了层次关系数据的一个子集：

```
Channel   | Zone     | City    | Store |
----------+----------+------------------
4001      | 3001     | 2001    | 13    |
4001      | 3001     | 2001    | 14    |
4001      | 3001     | 2002    | 15    |
4001      | 3002     | 2003    | 16    |
4001      | 3003     | 2006    | 74    | 
```

价格表

```
ArticleID | EntityID | Price
----------+----------+----------
12345     | 4001     | 2.5
12345     | 2003     | 2.9
12345     | 74       | 3.0 
```

此处，将为所有商店中的商品设置频道 4001 的价格 2.5。接下来的两行设置了一些商店的价格例外。城市 2003 设置的第二个价格 2.9 将仅适用于商店 16 中的商品，按照上面提到的层级关系。并且第三行直接为商店 74 中的商品设置了 3.0 的价格。

希望这可以让您了解当前模型。那么，您能否建议一种更好的存储方式？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-17T23:49:18.577

在关系模型中表示树和层次结构的方法很少——搜索 SO 会返回很多答案。

该模型的主要思想是用闭包表和层次级别来表示层次结构。所以，**Level**表有`(1, Channel) , (2, Zone) , (3, City) , (4, Store)`.

闭包表暴露了每个节点和节点的所有后代。重要的是要注意每个节点也是它自己的后代。

![在此处输入图像描述](../Images/866e891b7a0079aecd80f862b4512cbf.png)

第一个 CTE 查询 (q_00) 选择一个节点的价格并将其分配给所有后代。LevelDiff列计算从后代节点**开始**有多少级别是价格指定节点。

因为可以在多个级别上指定价格，所以最终查询选择在具有最小**LevelDiff**的级别上指定的商店价格。

语法是`PostgeSQL`，但也应该很容易转换为其他语法。

```
with q_00 as (
    select
          a.ProductID
        , c.LocationID
        , c.LocationLevel
        , a.Price
        , t.DescendantLocationID
        , t.DescendantLevel
        , (t.DescendantLevel - c.LocationLevel ) as LevelDiff
    from ProductPrice as a
    join Product      as b on b.ProductId  = a.ProductID
    join Location     as c on c.LocationID = a.LocationID
    join TreeClosure  as t on t.LocationID = c.LocationID
)
select
      a.ProductID
    , DescendantLocationID
    , Price
from q_00  as a
join Level as w on w.LevelNo = a.DescendantLevel
where w.LevelName = 'Store'
  and a.Leveldiff = (select min(LevelDiff)
                       from q_00 as x 
                       where x.DescendantLocationID = a.DescendantLocationID 
                         and x.ProductID = a.ProductID )    ; 
```

总而言之，这是一个测试结果，定价定义为：

```
Channel=1,                        Product=1, Price = 11.0
Channel=1, City=111,              Product=1, Price = 11.5
Channel=1, City=111, Store =1112, Product=1, Price = 12.0 
```

查询返回（见下面的测试数据）

```
ProductID | DescendantLocationID | PriceID
-----------------------------------------
    1         1231                  11.00
    1         1232                  11.00
    1         1111                  11.50
    1         1112                  12.00 
```

这是 DDL (PosgreSQL)

```
CREATE TABLE Level ( 
    LevelNo              integer      NOT NULL ,
    LevelName            varchar(20)  NOT NULL 
);
ALTER TABLE Level ADD CONSTRAINT XPKLevel PRIMARY KEY (LevelNo) ;

CREATE TABLE Location ( 
    LocationID           integer  NOT NULL ,
    LocationLevel        integer  NOT NULL 
);
ALTER TABLE Location ADD CONSTRAINT XPKLocation  PRIMARY KEY (LocationID);
ALTER TABLE Location ADD CONSTRAINT XAK1Location UNIQUE      (LocationID, LocationLevel) ;

CREATE TABLE Product ( 
    ProductID            integer  NOT NULL 
);
ALTER TABLE Product ADD CONSTRAINT XPKProduct PRIMARY KEY (ProductID);

CREATE TABLE ProductPrice ( 
    ProductID            integer        NOT NULL ,
    LocationID           integer        NOT NULL ,
    Price                decimal(19,2)  NOT NULL 
);
ALTER TABLE ProductPrice ADD CONSTRAINT XPKProductPrice PRIMARY KEY (ProductID, LocationID);

CREATE TABLE ProductSupplier ( 
    ProductID            integer  NOT NULL ,
    LocationID           integer  NOT NULL ,
    SupplierID           integer  NOT NULL 
);
ALTER TABLE ProductSupplier ADD CONSTRAINT XPKProductSupplier PRIMARY KEY (ProductID, LocationID);

CREATE TABLE Supplier ( 
    SupplierID           integer  NOT NULL 
);
ALTER TABLE Supplier ADD CONSTRAINT XPKSupplier PRIMARY KEY (SupplierID) ;

CREATE TABLE TreeClosure ( 
    LocationID           integer  NOT NULL ,
    DescendantLocationID integer  NOT NULL ,
    DescendantLevel      integer  NOT NULL 
);
ALTER TABLE TreeClosure ADD CONSTRAINT XPKTreeClosure PRIMARY KEY (LocationID, DescendantLocationID);

ALTER TABLE Location
    ADD CONSTRAINT FK1_Location FOREIGN KEY (LocationLevel) REFERENCES Level(LevelNo);

ALTER TABLE ProductPrice
    ADD CONSTRAINT FK1_ProductPrice FOREIGN KEY (ProductID) REFERENCES Product(ProductID);

ALTER TABLE ProductPrice
    ADD CONSTRAINT FK2_ProductPrice FOREIGN KEY (LocationID) REFERENCES Location(LocationID);

ALTER TABLE ProductSupplier
    ADD CONSTRAINT FK1_PrdSup FOREIGN KEY (ProductID) REFERENCES Product(ProductID);

ALTER TABLE ProductSupplier
    ADD CONSTRAINT FK2_PrdSup FOREIGN KEY (SupplierID) REFERENCES Supplier(SupplierID);

ALTER TABLE ProductSupplier
    ADD CONSTRAINT FK3_PrdSup FOREIGN KEY (LocationID) REFERENCES Location(LocationID);

ALTER TABLE TreeClosure
    ADD CONSTRAINT FK1_TC FOREIGN KEY (LocationID) REFERENCES Location(LocationID);

ALTER TABLE TreeClosure
    ADD CONSTRAINT FK2_TC FOREIGN KEY (DescendantLocationID,DescendantLevel) REFERENCES Location(LocationID,LocationLevel); 
```

以及一些要测试的数据

```
insert into Level (LevelNo, LevelName)
values
  (1, 'Channel') 
, (2, 'Zone') 
, (3, 'City') 
, (4, 'Store')
;

insert into Product (ProductID)
values  (1) , (2) , (3) 
;

-- Locations
insert into Location (LocationID, LocationLevel)
values
  (1,    1) 
, (11,   2)
, (111,  3)
, (1111, 4)     
, (1112, 4)
, (12,   2)
, (123,  3)
, (1231, 4) 
, (1232, 4)     
;

-- Tree closure (hierarchy)

insert into TreeClosure (LocationID, DescendantLocationID, DescendantLevel)
values
  (1   , 1   , 1)
, (1   , 11  , 2)
, (1   , 111 , 3)
, (1   , 1111, 4)
, (1   , 1112, 4)
, (11  , 11  , 2)
, (11  , 111 , 3)
, (11  , 1111, 4)   
, (11  , 1112, 4)
, (111 , 111 , 3)
, (111 , 1111, 4)   
, (111 , 1112, 4)
, (1111, 1111, 4) 
, (1112, 1112, 4)

--  

, (1   , 12  , 2)
, (1   , 123 , 3)
, (1   , 1231, 4) 
, (1   , 1232, 4)
, (12  , 12  , 2)
, (12  , 123 , 3)
, (12  , 1231, 4) 
, (12  , 1232, 4)
, (123 , 123,  3)
, (123 , 1231, 4) 
, (123 , 1232, 4)   
, (1231, 1231, 4) 
, (1232, 1232, 4)
;

--  pricing
insert into ProductPrice (ProductID, LocationID, Price) values (1, 1   , 11.0);
insert into ProductPrice (ProductID, LocationID, Price) values (1, 111 , 11.5);
insert into ProductPrice (ProductID, LocationID, Price) values (1, 1112, 12.0); 
```

# c - 如何从C中的文件中读取复数？

> ID：13430646
> 
> 赞同：2
> 
> 时间：2012-11-17T12:39:02.767
> 
> 标签：c, file, matrix, readfile, complex-numbers

我有一个包含 64x64 矩阵值的文本文件，它们是复数。我想从文件中读取它们，但我遇到了困难。使用复杂的 C 库或为复数创建新的数据类型对我来说都可以，我只需要正确读取它们即可。

我的意思是，是否使用：

```
#include <complex.h>
int complex matrix[64][64]; 
```

或为其创建数据类型：

```
typedef struct {
    int real, imag;
} Complex;

Complex matrix[64][64]; 
```

只要它们被正确阅读，对我来说就可以了。

您可以在下面找到 2x3 矩阵，只是为了演示我的文件中的数字：

```
{{-32767, 12532 + 5341I, -3415 - 51331I}
 {32767I, 32609 + 3211I, 32137 + 6392I}} 
```

所以你可以看到有些部分既有实部又有虚部，有些只是虚部，有些只是实部，所有虚数的末尾都有大写的“i”字母。如果你能帮助我，我会很高兴。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-17T12:57:38.803

数字的组织方式无关紧要，如果它们在内存中对齐，您可以一次读取它们：

```
Complex matrix[64][64];
fread(matrix,sizeof(Complex),64*64, your_file_pointer); 
```

写法一样：

```
fwrite(matrix, sizeof(Complex), 64*64, your_file_pointer); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-17T12:58:21.177

两种常见的设计模式适用：
1)接受“语言”的[递归下降解析器](http://en.wikipedia.org/wiki/Recursive_descent_parser)
2)[状态机](http://en.wikipedia.org/wiki/State_machine)

这两种情况都可以从 read_char() 函数中受益，如果遇到除 '{', '}', 0-9, i, +, - 之外的任何内容并跳过所有空格 (ch<=32) .

状态机可以更加通用：如果在任何时候有“+”或“-”，则可以将下一个值（以“i”或非“i”结尾）添加或减去当前累积值. （然后状态机也能够计算 1+2-1+1i ，而它去......）

# javascript - 区分手持设备和台式机上的纵向模式

> ID：13430651
> 
> 赞同：16
> 
> 时间：2012-11-17T12:39:34.063
> 
> 标签：javascript, css, less, media-queries

我正在寻找一个可靠的媒体查询规则，即：

```
If desktop width < 720px AND devices in portrait mode {} 
```

（也就是说，随着桌面宽度的减小，媒体查询在 720 像素处开始。在手机上，这应该只在纵向模式下发生 - 横向不应该应用媒体查询）

* * *

**问题是：如何将设备与桌面分开定位。**

**存在问题的原因是：`@media handheld`不支持**

**附加`max-width`影响一切，因此不能与`max-device-width AND portrait`**

* * *

似乎我只能定位：

1.  所有设备都低于/在设定宽度之间
2.  只有设备（使用 JavaScript 垫片来修复媒体查询）低于/在设置宽度和方向之间。

不能单独对待设备和桌面。

是否有现有的 JavaScript 解决方案可以满足我的需求？

**注意**我在 LESS 中编码我的 CSS，媒体查询嵌套在其中。

* * *

**背景**

我正在处理的网站是响应式的并使用网格系统。在 720px 宽度（当前测试宽度）下，较小设备/分辨率的列使用会发生变化。然而，经过测试，该站点（720px 宽度的完整站点）在横向上可读性很好，即使在我的小屏幕 HTC Desire 上也是如此。当我删除网站的某些部分以便更好地使用媒体查询时，我想为什么不让该网站通常可以横向访问。

Bellow 720px 在桌面上没有修改元素列跨度看到一个相当破碎的网站。然而，由于移动设备的较小性质，它看起来并非如此。然而，随着列跨度的修改，当涉及到手机的横向时，特定元素（例如标题）完全不成比例（由于浏览器的高度大大降低）。

简而言之，仅根据浏览器宽度更改设计并不能平等地在所有设备上进行，正如我在其他网站上设法实现的那样。

我正在使用以下元标记：

```
<meta  name="viewport"  content="width=device-width, 
    initial-scale=1, 
    maximum-scale=1, 
    user-scalable=no" /> 
```

* * *

**尝试了什么**

方向与桌面无关。它根据用户窗口设置、分辨率等而变化。

我尝试了以下方法来定位手机/两者：

```
@media handheld and (orientation:portrait) { } 
```

似乎没有手机可以利用该`handheld`属性，至少 100% 没有 - 所以它毫无价值。

```
@media screen and (max-device-width:720px) and (orientation:portrait)  { } 
```

会很好用，但是 android 2.2 和 2.3（可能还有其他操作系统，更不用说其他操作系统了？）有`max-device-width`无法正常工作的问题。

```
@media screen and (max-width:720px) and (orientation:portrait)  { } 
```

适用于高分辨率显示器（因为随着窗口宽度的减小，高度迅速变为 > 宽度）和手机，但不适用于较小的显示器，因为窗口不会在 720 像素宽度时为纵向（站点不断压缩超过我想要的限制）。

```
@media screen and (max-width:720px), screen and (orientation:portrait)  { } 
```

会先做任何事。没用。

```
@media screen and (max-width:720px), screen and (max-width:500px) and (orientation:portrait) { } 
```

和

```
@media screen and (max-width:720px) { }
@media screen and (max-width:500px) and (orientation:portrait)  { } 
```

一切都只是使用较大的`max-width`.

我也有一个`min/max-height`没有成功的小提琴。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-12T01:55:36.627

我认为最好的方法是，根据 MDN（Mozilla 开发人员网络），使用[此处](https://developer.mozilla.org/en-US/docs/DOM/window.innerHeight)`window.innerHeight`的文档和[此处](https://developer.mozilla.org/en-US/docs/DOM/window.innerWidth)的文档，它测量*浏览器*的像素宽度和高度以确定方向。`window.innerWidth`

 *```
//Detect mobile platform

var isMobile = {
    Android: function() {
        return navigator.userAgent.match(/Android/i);
    },
    BlackBerry: function() {
        return navigator.userAgent.match(/BlackBerry/i);
    },
    iOS: function() {
        return navigator.userAgent.match(/iPhone|iPad|iPod/i);
    },
    Opera: function() {
        return navigator.userAgent.match(/Opera Mini/i);
    },
    Windows: function() {
        return navigator.userAgent.match(/IEMobile/i);
    },
    any: function() {
        return (isMobile.Android() || isMobile.BlackBerry() || isMobile.iOS() || isMobile.Opera() || isMobile.Windows());
    }
};

if ( isMobile.any() ) {

    if (window.innerHeight > window.innerWidth) {
       console.log("Orientation is in portrait");
       }
    else {
       console.log("Orientation is in landscape");
         }
    }
else {
   console.log("Mobile platform not detected.");
}; 
```

更多关于[移动](http://jquerymobile.com/demos/1.0a2/#docs/api/events.html)平台的文档。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T01:41:38.440

你应该看看[Modernizr](http://modernizr.com/)。它包括对几乎所有有用的现代浏览器功能的功能检测/推断，特别是通过对`Modernizr.touch`. 从那里，您可以通过比较 document.width 和 document.height 来避免测试纵向/横向，例如：

```
if(Modernizr.touch) {
    // is touch device

    if(document.height > document.width) {
        // is in portrait
    } else {
        // is in landscape
    }
} else {
    // not touch device
} 
```

请注意，正如您所发现的，触摸/桌面没有完美的测试，因此，如果您合并了 Modernizr 触摸测试（或自己动手），最好查阅此[页面，其中解释了哪些触摸测试是可靠的，当](http://modernizr.github.com/Modernizr/touch.html).

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-18T18:54:10.947

为了完整起见，这是解释如何使用 CSS 选择器来限定在嵌套 LESS 的上下文中使用媒体查询。

@enginefree 的回答和以下评论解释了如何检查移动设备、它的方向以及根据结果操作元素属性。

**以下代码说明了在未**检测到我们要查找的属性或类时如何使用 LESS`&`和 CSS3选择器来显示我们的媒体查询：`:not`

 **```
body {
    /* this has the possible class or data attribute of 'mobile' */
    /* this is not included in the nest as you can't climb at will */
    /* the class or attribute (via our JavaScript) could be applied
       to any element that sits above and outside of `#level-1` in 
       this example */

}

#level-1 { 

    #level-2 {

        #level-3 {

            #level-4 {

                body:not(.mobile) & {

                    /* produces the following CSS */
                    /* body:not(.mobile) #level-1 #level-2 #level-3 #level-4 { } */
                    /* rules in this block will only be executed if body does not have a mobile class */

                    @media screen and (max-width:) {

                    }
                }

                body:not([data-device=mobile]) & {

                    /* produces the following CSS */
                    /* body:not([data-device="mobile"]) #level-1 #level-2 #level-3 #level-4 { } */
                    /* rules in this block will only be executed if body does not have a mobile data-device attribute */

                    @media screen and (max-width:) {

                    }
                }

            }

        }

    }

} 
```

如果`body`元素是这个嵌套的一部分，你最终会得到下面的 CSS，这应该解释为什么元素必须存在于嵌套范围之外，以及它之上：

`body:not(.mobile) body #level-1 #level-2 #level-3 #level-4 { }`

[阅读有关`&`运营商的更多信息](http://lesscss.org/#-nested-rules)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-17T15:10:51.973

那么这三个规则涵盖了大多数移动设备

@media only screen and (min-width: 768px) and (max-width: 959px) @media only screen and (min-width: 480px) and (max-width: 767px) @media only screen and (max-width: 479 像素）

或者尝试使用骨架响应框架

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-11T11:38:16.630

一个很棒的 JavaScript 库是[css3-mediaqueries-js](http://code.google.com/p/css3-mediaqueries-js/)。***

# javascript - 通过鼠标点击进入场景模拟 2d js 画布上的物理 3d 球投掷

> ID：13430653
> 
> 赞同：0
> 
> 时间：2012-11-17T12:39:58.067
> 
> 标签：javascript, animation, canvas, physics

我想将一个球（带有图像）扔到一个二维场景中，并在它到达一定距离时检查它是否发生碰撞。但我不能让它正确地“飞”起来。似乎这个问题已经被问了一百万次了，但是我发现的越多，我就越困惑。现在我遵循[了这个答案](https://gamedev.stackexchange.com/questions/23592/throw-a-2d-ball-facing-the-target-to-simulate-a-3d-like-effect)，但看起来，球的行为与我预期的非常不同。事实上，它移动到我的画布的左上角并且变得太小太快了——当然我可以通过将 vz 设置为 0.01 或类似的值来调整它，但是我根本看不到球……

这是我的对象（简化）/链接到感兴趣的[完整来源](http://pastebin.com/eM2tvdaG)。重要的部分是 update() 和 render()

```
var ball = function(x,y) {

  this.x        = x;
  this.y        = y;
  this.z        = 0;
  this.r        = 0;
  this.src      = 'img/ball.png';
  this.gravity  = -0.097;

  this.scaleX   = 1;
  this.scaleY   = 1;

  this.vx       = 0;
  this.vy       = 3.0;
  this.vz       = 5.0;

  this.isLoaded = false;

  // update is called inside window.requestAnimationFrame game loop
  this.update = function() {
    if(this.isLoaded) {
      // ball should fly 'into' the scene
      this.x += this.vx;
      this.y += this.vy;
      this.z += this.vz;

      // do more stuff like removing it when hit the ground or check for collision
      //this.r += ?

      this.vz += this.gravity;
    }
  };

  // render is called inside window.requestAnimationFrame game loop after this.update()
  this.render = function() {
    if(this.isLoaded) {

      var x       = this.x / this.z;
      var y       = this.y / this.z;

      this.scaleX = this.scaleX / this.z;
      this.scaleY = this.scaleY / this.z;

      var width   = this.img.width * this.scaleX;
      var height  = this.img.height * this.scaleY;

      canvasContext.drawImage(this.img, x, y, width, height);

    }
  };

  // load image
  var self      = this;
  this.img      = new Image();
  this.img.onLoad = function() {
    self.isLoaded = true;
    // update offset to spawn the ball in the middle of the click
    self.x        = this.width/2;
    self.y        = this.height/2;
    // set radius for collision detection because the ball is round
    self.r        = this.x;
  };
  this.img.src = this.src;

} 
```

我还想知道，当使用 requestAnimationFrame 以约 60fps 的速度渲染画布时，哪些速度参数应该是合适的，以获得“自然”的飞行动画

如果有人能指出我正确的方向（当然还有解释逻辑的伪代码），我将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-17T14:45:30.613

我认为最好的方法是首先在公制中模拟情况。

```
speed = 30; // 30 meters per second or 108 km/hour -- quite fast ...
angle = 30 * pi/180;  // 30 degree angle, moved to radians.

speed_x = speed * cos(angle);
speed_y = speed * sin(angle);  // now you have initial direction vector

x_coord = 0;
y_coord = 0;  // assuming quadrant 1 of traditional cartesian coordinate system

time_step = 1.0/60.0;    // every frame...

// at most 100 meters and while not below ground
while (y_coord > 0 && x_coord < 100) {

   x_coord += speed_x * time_step;
   y_coord += speed_y * time_step;

   speed_y -= 9.81 * time_step;   // in one second the speed has changed 9.81m/s

   // Final stage: ball shape, mass and viscosity of air causes a counter force
   // that is proportional to the speed of the object. This is a funny part:
   // just multiply each speed component separately by a factor (< 1.0)
   // (You can calculate the actual factor by noticing that there is a limit for speed
   //  speed == (speed - 9.81 * time_step)*0.99, called _terminal velocity_
   // if you know or guesstimate that, you don't need to remember _rho_,
   // projected Area or any other terms for the counter force.

   speed_x *= 0.99; speed_y *=0.99;
} 
```

现在您将有一个时间/位置系列，从 0,0 开始（您可以使用 Excel 或 OpenOffice Calc 进行计算）

```
speed_x        speed_y       position_x     position_y    time 
25,9807687475  14,9999885096 0              0             0 
25,72096106    14,6881236245 0,4286826843   0,2448020604  1 / 60
25,4637514494  14,3793773883 0,8530785418   0,4844583502  2 / 60
25,2091139349  14,0737186144 1,2732304407   0,7190203271
...
5,9296028059   -9,0687933774 33,0844238036  0,0565651137  147 / 60
5,8703067779   -9,1399704437 33,1822622499 -0,0957677271  148 / 60 
```

从那张纸上，人们可以首先估算出球击地的距离和时间。它们是 33,08 米和 2.45 秒（或 148 帧）。通过继续在 excel 中进行模拟，人们还注意到终端速度将约为 58 公里/小时，这并不多。

确定 60 m/s 或 216 km/h 的终端速度是合适的，正确的衰减因子将是 0,9972824054451614。

现在剩下的唯一任务是确定屏幕的长度（以米为单位）并将 pos_x、pos_y 与正确的缩放因子相乘。如果 1024 像素的屏幕是 32 米，那么每个像素将对应 3.125 厘米。根据应用程序，人们可能希望“改善”现实并使球更大。

**编辑**：另一件事是如何在 3D 上投影。我建议您将前一种算法（或 excel）生成的路径作为可见对象（由线段组成），您可以对其进行旋转和平移。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-17T15:06:35.773

您所看到的不良行为的根源是您使用的投影，以 (0,0) 为中心，并且更普遍地太简单而看起来不太好。
你需要一个更完整的投影，中心，比例，......
我用那个来添加一点 3d ：

```
 projectOnScreen : function(wx,wy,wz) {
            var screenX =   ... real X size of your canvas here ... ;
            var screenY =  ... real Y size of your canvas here ... ;
            var scale   = ... the scale you use between world / screen coordinates ...;
            var ZOffset=3000; // the bigger, the less z has effet
            var k =ZOffset;  // coeficient to have projected point = point for z=0
            var zScale =2.0; // the bigger, the more a change in Z will have effect

            var worldCenterX=screenX/(2*scale);
            var worldCenterY=screenY/(2*scale);

            var sizeAt = ig.system.scale*k/(ZOffset+zScale*wz);
            return {
                     x: screenX/2  +  sizeAt * (wx-worldCenterX) ,
                     y: screenY/2  +  sizeAt * (wy-worldCenterY) ,
                     sizeAt : sizeAt
                  }
        } 
```

显然，您可以根据自己的游戏进行优化。例如，如果分辨率和比例不变，您可以从该函数中计算一些参数。
sizeAt 是您必须应用于图像的缩放因子 (canvas.scale)。

编辑：对于您的更新/渲染代码，正如 Aki Suihkonen 的帖子中所指出的，您需要使用“dt”，即两次更新之间的时间。因此，如果您稍后更改每秒帧数 (fps) 或者如果您在游戏中暂时减速，您可以更改 dt 并且一切仍然表现相同。
方程变为 x+=vx*dt / ... / vx+=gravity*dt；
您应该计算相对于屏幕高度的速度和重力，无论屏幕尺寸如何，都具有相同的行为。
我也会使用负 z 开头。首先要有一个更大的球。我也会分开关注：
- 单独处理图像的加载。您的游戏应该在所有必要的资源加载完毕后开始。一些免费的小型框架可以为您做很多事情。只是一个例子：crafty.js，但是有很多好的。
- 相对于点击位置和图像大小的调整应该在渲染中完成，x,y 只是鼠标坐标。

```
var currWidth = this.width *scaleAt, currHeight= this.height*scaleAt;
canvasContext.drawImage(this.img, x-currWidth/2, y-currHeight/2, currWidth, currHeight); 
```

或者，您可以使用画布进行缩放。好处是您可以通过这种方式轻松旋转：

```
 ctx.save();
 ctx.translate(x,y);
 ctx.scale(scaleAt, scaleAt);  // or scaleAt * worldToScreenScale if you have 
                               // a scaling factor
 // ctx.rotate(someAngle);   // if you want...
 ctx.drawImage(this.img, x-this.width/2, x-this.height/2);
 ctx.restore(); 
```

# git - R包开发中如何使用git？

> ID：13430655
> 
> 赞同：9
> 
> 时间：2012-11-17T12:40:00.653
> 
> 标签：git, r, cran

我是 R 新手，已经开始编写一个中型项目。尽管它将作为应用程序的一部分分发，但我决定将其制作成一个包以使组织更整洁。

当我使用版本控制时，如何处理说明文件需要版本和日期字段的事实？我不想在每次 git 提交时都更改该文件。

是否有一个标准的 Makefile 用于此？

此外，我并不完全清楚我将如何做到这一点并且仍然能够在开发时使用该包。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-17T15:58:53.177

如果您使用该`devtools`软件包，则不必在每次编辑后构建和安装您的软件包 - 只需使用`load_all()`并在您的工作会话中完成工作，因此您可以测试您的更改（最好使用`testthat`软件包）。

我写了一篇关于它的 RPub：[http ://www.rpubs.com/geospacedman/lazydevtools](http://www.rpubs.com/geospacedman/lazydevtools)

您仍然可以选择构建包源 tarball 以进行分发。

请注意，git 不会促进每次提交时自动更新文件位的机制，就像 SVN 中的 $id$ 一样。Linus 自己说这是“愚蠢的”和“愚蠢的”：

[http://www.gelato.unsw.edu.au/archives/git/0610/28891.html](http://www.gelato.unsw.edu.au/archives/git/0610/28891.html)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-17T13:55:23.123

如果您不熟悉 R，我建议您使用[RStudio](http://www.rstudio.com/ide/)，在我看来这是最先进的 R-IDE。它同时提供：[包构建](http://www.rstudio.com/ide/docs/packages/overview)和[版本控制](http://www.rstudio.com/ide/docs/version_control/overview)。

> 我不想在每次 git 提交时都更改该文件。...此外，我并不完全清楚我将如何做到这一点并且仍然能够在开发时使用该包。

通常情况下，您会安装一个用于使用的软件包和用于开发的本地 Git 存储库。当开发达到下一个软件包版本的状态时，您将更改`DESCRIPTION`文件中的日期和版本。在两个版本之间，您可以根据需要进行尽可能多的阶段、提交和推送到您的 GIT。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-17T17:16:46.320

我不会更改`DESCRIPTION`每次提交的时间，但我会更新 Date 并`YYYYMMDD`在每次实际构建包时将当前日期放在破折号后面的版本中。这是一种夜间构建，可以跟踪它是哪个晚上。

目前，我有一个软件包处于相当活跃的开发阶段，这是由几个不同同事的需求驱动的。小版本的日期很方便，因为我可以很容易地问同事“你使用的版本是什么日期？`sessionInfo ()`显示它。”

# css - 如何将 CSS 加载到 CodeIgniter

> ID：13430656
> 
> 赞同：2
> 
> 时间：2012-11-17T12:40:02.370
> 
> 标签：css, codeigniter

我是 CodeIgnitor 的新手。在控制器文件夹中，我创建了一个名为的文件，并在视图中`caller.php`创建了一个文件。`home.php`在视图中，我还创建了一个名为`css`并`style.css`在该文件夹中创建的`css`文件夹。在视图中我有一些图片。这些图片也是设计的一部分。现在我想使用`style.css`和图片。但我不能。

在 caller.php 我有：

```
class caller extends CI_Controller
{
    function index()
    {

        $this->load->view('home');  
        // What do I have to write here to load css?
    }
} 
```

在 home.php 我有：

```
<html>
<head>

***------what i have to write here to load css--------***

</head>

<body>

<div id="outer">
...
</div>

</body>

</html> 
```

如果需要其他配置，请提及。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-17T14:36:04.107

从 Oliver 所说的将样式表包含在以下内容中：

```
<link rel="stylesheet" type="text/css" href="<?php echo base_url();?>css/style.css"> 
```

如果您从 URL 中删除了 index.php，请确保在重写规则中包含您的 css 目录。

```
RewriteEngine on
RewriteCond $1 !^(index\.php|css)
RewriteRule ^(.*)$ /index.php/$1 [L] 
```

这是假设您的样式表位于`css`应用程序根目录下的一个文件夹中。

```
- index.php
+ system
+ application
+ css
   - style.css 
```

确保您已启用 URL 帮助程序以使用诸如[`base_url()`](http://codeigniter.com/user_guide/helpers/url_helper.html). 这可以[`config/autoload.php`](http://codeigniter.com/user_guide/general/autoloader.html)通过将 url 添加到 helper 数组来在全局内部完成。

```
$autoload['helper'] = array('url'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-17T12:45:25.313

添加

```
<link rel="stylesheet" type="text/css" href="<?php echo base_url();?>css/style.css"> 
```

`<head>`在和`</head>`标签之间进入 home.php

并确保 style.css 位于主目录的 css 文件夹中

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-06-11T20:53:42.373

非常感谢@玛拉基。`<link href="<?php echo base_url();?>assets/plugins/font-awesome/css/font-awesome.min.css" rel="stylesheet" type="text/css"/>`是我的文件路径& 不工作。

我用过

`RewriteEngine on RewriteCond $1 !^(index\.php|images|assets|robots\.txt) RewriteRule ^(.*)$ /index.php/$1 [L]`

在我的 .htaccess 文件上，它现在工作顺利。assets 是我的文件文件路径

# sql - 如何在多列之间强制执行类似集合的唯一性？

> ID：13430658
> 
> 赞同：1
> 
> 时间：2012-11-17T12:40:06.847
> 
> 标签：sql, postgresql, unique-constraint

我不确定我是否正确地表达了这个问题，所以我会尝试更长的解释。我有这种表：

```
CREATE TABLE x (a int, b int); 
```

我想认为 (a,b) 对与 (b,a) 相同，并且不允许插入重复项。如果 PostgreSQL 有`set`数据类型，我可以像这样声明表：

```
CREATE TABLE x (
    ab set,
    UNIQUE (ab)
); 
```

但事实并非如此，那么最好的方法是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-17T12:43:01.100

```
create unique index idx_unique_ab 
    on x (least(a,b), greatest(a,b)); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-17T12:43:42.450

我只是强制一对只能以一种方式存储，然后创建一个常规的唯一约束。

```
CREATE TABLE x
  (
     a INT,
     b INT,
     CHECK (a < b),
     UNIQUE(a, b)
  ); 
```

# iphone - 如何检测标签中的字母位置并放置箭头以显示它？

> ID：13430661
> 
> 赞同：-1
> 
> 时间：2012-11-17T12:40:36.677
> 
> 标签：iphone, objective-c, ios, xcode

我认为我有一个标签，我想在这个特定的字母下面放一个箭头。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-17T13:13:00.160

试试这个..这可能会对你有所帮助。我将另一个标签作为指针。

```
CGSize size_txt_overview1;
CGSize constraint = CGSizeMake(180, 20000.0f);
for (int i=0; i< [_Heading_lbl.text length]; i++) {
    if ([Lbl_Heading.text characterAtIndex:i] == '8') { // i have taken 8 as my target charecter
        NSString *str = [Lbl_Heading.text substringToIndex:i];
        size_txt_overview1 = [str sizeWithFont:[UIFont fontWithName:@"Arial Rounded MT Bold" size:17] constrainedToSize:constraint lineBreakMode:UILineBreakModeWordWrap];
        NSLog(@"%f",size_txt_overview1.width);
    }
}
Lbl_Arrow.frame = CGRectMake(SomeNum+size_txt_overview1.width, 140, 18, 21);//SomeNum is the X position of Your lable. 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-17T13:03:09.627

您可以使用[NSAttributedString](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSAttributedString_Class/Reference/Reference.html)来获取给定字体的字符串大小。

```
NSString* labelString = @"cheese toast";
// Say you want the first 't'
NSString* stringUpToLetterPosition = @"cheese t";

NSDictionary* attributes = [NSDictionary dictionaryWithObjectsAndKeys:
    @"** Name of Label's Font **", NSFontNameAttribute,
    [NSNumber numberWithFloat:aTextLayer.fontSize], NSFontSizeAttribute,
    nil];
NSAttributedString* attributedString = [[NSAttributedString alloc] initWithString:stringUpToLetterPosition attributes:attributes];
NSSize size = attributedString.size; 
```

从标签的边缘会有一个额外的偏移量，但这会根据标签边缘与标签文本开头的距离而有所不同。只需进行试验，直到找到正确的值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-17T13:13:55.110

UIKit 在 NSString 上有一个类别来获取具有指定字体的字符串的大小。获取完整字符串的大小，然后获取到感兴趣的字符的字符串，然后获取包含字符的字符串。

然后，您可以找到完整字符串的位置（左、右或居中）。x 位置将在其他两个部分字符串的值之间居中。

# php - PHP隐藏字段表单不提交到MySql数据库

> ID：13430663
> 
> 赞同：-1
> 
> 时间：2012-11-17T12:41:01.823
> 
> 标签：php, mysql

我想在我的表单上有一个隐藏字段，我将通过 php 提交到 MySql 数据库。

**形式**

```
 <form id="addCommentForm" method="post" action="">
 <dl>
 <dt><label class="formComment" for="body">Message *</label></dt>
 <dd><textarea class="inputbox" name="body" id="body"></textarea></dd>
 <dt><label class="formName" for="name">Name *</label></dt>
 <dd><input class="inputbox" type="text" name="name" id="name" /></dd>
 <input type="hidden" name="post_id" id="post_id" value="tree"/> 
 </dl>
 <input type="submit" class="button" id="submit" value="Submit" />
 </form> 
```

**提交.php**

```
mysql_query("   INSERT INTO comments(post_id,name,url,email,body)
                VALUES (
                    '".$arr['post_id']."',
                    '".$arr['name']."',
                    '".$arr['body']."'
                )");

$arr['dt'] = date('r',time());
$arr['id'] = mysql_insert_id(); 
```

当我将此提交给 MySql 时，只有名称和正文（消息）中的值出现在我的 MysQl 数据库中，但隐藏的值不会通过。

我的错误是什么？

另外我想将隐藏值作为页面的标题，它位于 h2 标签下。我尝试过这样的事情（我知道这很糟糕）。

```
 <input type="hidden" name="post_id" id="post_id" value="<?php echo <h2></h2> ?>"/> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-17T12:42:37.107

```
<input type="hidden" name="post_id" id="post_id" value="<?php echo "<h2></h2>" ?>"/> 
```

回声后你没有引号

为什么是`action=""`空的？

```
 <form id="addCommentForm" method="post" action="">
 <dl>
 <dt><label class="formComment" for="body">Message *</label></dt>
 <dd><textarea class="inputbox" name="body" id="body"></textarea></dd>
 <dt><label class="formName" for="name">Name *</label></dt>
 <dd><input class="inputbox" type="text" name="name" id="name" /></dd>
 <input type="hidden" name="post_id" id="post_id" value="tree"/> 
 </dl>
 <input type="submit" class="button" id="submit" value="Submit" />
 </form>  
  <input type="hidden" name="post_id" id="post_id" value="<?php echo "<h2></h2>" ?>"/> 
```

# java - 从 oracle db 执行 java 调出

> ID：13430665
> 
> 赞同：0
> 
> 时间：2012-11-17T12:41:14.547
> 
> 标签：java, sql, oracle

我已将我的 java 类文件上传到 oracle db（使用 loadjava），其中包含一个 main 和一个 public 方法。我如何在我的 java 类中调用 main 或方法并运行它。想象一下类文件中的方法添加两个数字或只是给出一个日志注释。我只想知道如何执行 java 标注。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T08:49:49.183

你需要将你的 main 函数包装在 pl/sql 函数中。检查 pl/sql 文档中的 CREATE FUNCTION 语法以获取更多详细信息。

# c++ - QComboBox 不调用委托方法

> ID：13430668
> 
> 赞同：4
> 
> 时间：2012-11-17T12:41:59.537
> 
> 标签：c++, qt, delegates, qcombobox, model-view

我想通过**模型**和**委托**`QComboBox`插入`QWidgets`（而不是字符串）来自定义 a ：

 ****```
QComboBox *cb = new QComboBox(this);

FeatureModel *featureModel = new FeatureModel(cb);
cb->setModel(featureModel);

ComboBoxItemDelegate *comboBoxItemDelegate = new ComboBoxItemDelegate(cb);
cb->setItemDelegate(comboBoxItemDelegate); 
```

FeatureModel 继承自 QAbstractListModel，ComboBoxItemDelegate 继承自 QStyledItemDelegate。

问题是从未调用过委托方法，因此没有插入我的自定义小部件（我只看到 的字符串`FeatureModel`）。但是，如果我使用 a`QTableView`而不是 a `QComboBox`，它可以正常工作。

有人知道错误在哪里吗？我错过了 QT**模型/视图**概念的一些重要方面吗？

**编辑：** 这是我的代表。除了构造函数（当然），没有调用以下方法（控制台上没有输出）。

```
ComboBoxItemDelegate::ComboBoxItemDelegate(QObject *parent) :
QStyledItemDelegate(parent)
{
    qDebug() << "Constructor ComboBoxItemDelegate";
}

ComboBoxItemDelegate::~ComboBoxItemDelegate()
{
}

QWidget* ComboBoxItemDelegate::createEditor( QWidget *parent, const QStyleOptionViewItem &option, const QModelIndex &index ) const
{
    qDebug() << "createEditor"; // never called
    QWidget *widget = new QWidget(parent);

    Ui::ComboBoxItem cbi;
    cbi.setupUi(widget);

    cbi.label->setText(index.data().toString());
    widget->show();

    return widget;
}

void ComboBoxItemDelegate::setEditorData ( QWidget *editor, const QModelIndex &index ) const
{
    qDebug() << "setEditorData"; // never called
}

void ComboBoxItemDelegate::setModelData ( QWidget *editor, QAbstractItemModel *model, const QModelIndex &index ) const
{
    qDebug() << "setModelData"; // never called
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-18T18:39:31.080

我想我找到了问题所在。

首先，确保`QComboBox`允许编辑中的视图：

```
cb->view()->setEditTriggers(QAbstractItemView::AllEditTriggers); 
```

我不确定这是否是一个好的做法，但这是我让它发挥作用的唯一方法。`editTriggers`默认值为`QAbstractItemView::NoEditTriggers`

其次，确保您的模型允许编辑：

```
Qt::ItemFlags MyModel::flags(const QModelIndex &index) const
{
    if (!index.isValid())
        return Qt::ItemIsEnabled;

    return QAbstractItemModel::flags(index) | Qt::ItemIsEditable;
}

bool MyModel::setData(const QModelIndex &index,
                           const QVariant &value, int role)
{
    if (index.isValid() && role == Qt::EditRole) {
        // Modify data..

        emit dataChanged(index, index);
        return true;
    }
    return false;
} 
```

不过，它有一个问题。第一次看到 时`ComboBox`，您可以更改当前项目文本，并且不会调用委托方法进行编辑。您必须选择一项，然后才能对其进行编辑。

无论如何，我发现将 a`QComboBox`用于可编辑项目是违反直觉的。你确定你需要一个`QComboBox`来完成这个任务吗？

希望能帮助到你****

# css - CSS 水平菜单在触控设备上不起作用

> ID：13430670
> 
> 赞同：2
> 
> 时间：2012-11-17T12:42:02.997
> 
> 标签：css, drop-down-menu, menu

我有一个水平菜单的纯 CSS 实现，可以在计算机上的浏览器上正常工作。该网站是 www.intercessionsp.org。但是，在触摸设备上（特别是，我在 iPad 和 iPhone 上尝试过 Safari），菜单不起作用。如果有子菜单（主菜单项工作正常），触摸它们根本不会引起任何响应。我尝试实现两种解决方案： 1\. 使用 onclick="return true"，基于 terraling 在 stackoverflow 上的“iPad/iPhone Touch Event on Hover CSS”问题中的解决方案。2\. 添加#ios ul { display: none; } 和 #ios li:hover ul { display: block; } 基于 Philip Renich 在 elfboy.com 上的一篇名为“让 CSS 下拉菜单在 iPhone 上工作”的帖子。都没有奏效。

这是我的css文件的相关部分：

```
/* horizontal menus */
#nav, .nav, #nav .nav li { 
    margin:0px; 
padding:0px; 
}
#nav li {
float:left; 
display:inline; 
cursor:pointer; 
list-style:none; 
padding:10px 30px 10px 30px; 
border:1px #000 solid;  
position:relative;
background: #990000;
}
#nav li ul.first {
left:-1px; 
top:100%;
}
li, li a {
color:#fff; 
text-decoration:none;
}
#nav .nav li { 
width:100%; 
text-indent:10px; 
line-height:30px; 
margin-right:10px; 
border-top:1px #000 solid; 
border-bottom:1px #000 solid;
border-left:none; 
border-right:none; 
background:#990000;
onclick="return true"
}
#nav li a {
display:block; 
width:inherit; 
height:inherit;
}
ul.nav { 
display:none; 
}
#nav li:hover > a, #nav li:hover { 
color:#990000; 
background:#fff; 
}
li:hover > .nav { 
display:block; 
position:absolute; 
width:200px; 
top:-2px; 
left:30%; 
z-index:1000; 
border:1px #000 solid; 
}
li:hover { 
position:relative; 
z-index:2000; 
}

#basic li {
color:#000;
} 
```

由于我的 li:hover > .nav 中已经有 display:block，我尝试将其添加到 #nav li:hover > a, #nav li:hover （不希望这个工作）和 li:hover，但两者都没有工作。我应该补充一点，我查看了 Renich 关于设置宽度值的评论，但由于我已经设置了宽度值，这似乎没有用。

我想继续使用纯 CSS 实现。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T07:34:25.637

您的菜单依赖于 css 选择器`:hover`来显示列表项。为了让那些显示在像 iphone 这样的移动设备上，用户必须能够点击。您可以尝试使用`<a>`标签将菜单上第一级的文本包装起来。例如：`<a href="#">About Us</a>`

在移动设备上查看：

[http://jsfiddle.net/tlaverdure/L42AE/](http://jsfiddle.net/tlaverdure/L42AE/)

# jquery - jQuery setTimeout 在第一次点击然后 clearTimeout 在第二次

> ID：13430671
> 
> 赞同：0
> 
> 时间：2012-11-17T12:42:05.100
> 
> 标签：jquery, animation, settimeout

用户第一次单击按钮时，我希望在 div 循环动画之前设置 3 秒超时。

如果用户在这 3 秒内再次单击，我希望清除超时并停止动画。

到目前为止，我可以让超时正常工作，但我无法清除它并让动画停止。

的HTML：

```
<a href="#" class="button">Button</a>
<div class="block"></div> 
```

CSS：

```
div.block {
  position: absolute;
  display: block;
  height: 100px;
  width: 100px;
  top: -10px;
  left: 50%;
  background-color: red; } 
```

jQuery：

```
$('a.button').toggle(function(){
    var blockTimer;
    blockTimer = setTimeout(function block(){
      $("div.block").animate({top: '400px'}, 4000, 'linear', function() { $(this).css('top', '-10px'); block(); });
        },3000);
}, function(){
clearTimeout(rainTimer);
    $('div.block').clearQueue().stop().fadeOut(500, function() { $(this).css('top', '-10px').show(); });
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-17T12:47:34.363

您需要在函数范围*之外*定义变量，以便稍后将其清除。此外，您正在清除`rainTimer`，但您将其定义为`blockTimer`.

```
var blockTimer;

$('a.button').toggle(function(){
    blockTimer = setTimeout(function block() {
        $("div.block").animate({top: '400px'}, 4000, 'linear', function() { $(this).css('top', '-10px'); block(); });
        }, 3000);
}, function() {
    clearTimeout(blockTimer);
    $('div.block').clearQueue().stop().fadeOut(500, function() { $(this).css('top', '-10px').show(); });
}); 
```

# bash - 我该如何构建程序？

> ID：13430673
> 
> 赞同：1
> 
> 时间：2012-11-17T12:42:35.803
> 
> 标签：bash

我想设置一个调用其他子 bash 脚本的主 bash 脚本

该脚本应按如下方式运行：./scriptname.sh 10001

10001：是定义要运行的脚本数量的参数（总共 5 个）。如果参数为 1，则启动子脚本，为 0 时不执行任何操作。

我创建了一个带有子脚本的表，例如：

`subscript1=source "${DOCROOT}/script1.sh"` `subscript2=source "${DOCROOT}/script1.sh" ....`
`array=(${subscript1} ${subscript2} ${subscript3});`

第一个问题是如何使用正则表达式或其他方法将每个位匹配为参数（删除参数之间的空格）。
第二个问题是我不知道如何将我的论点 (10001) 关联到 table subs 脚本。

在程序演变步骤的情况下， “*切换案例*”太长而无法实施和维护。

可以帮我构建主脚本吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-17T12:59:23.460

这是一种可能性：

```
#!/bin/bash

die() {
   echo >&2 "$@"
   exit 1
}

arg="$1"

# Check that argument is valid (only 0's and 1's)
[[ $arg =~ ^[01]+$ ]] || die "Wrong argument \`$1'"

nargs=${#arg}

for ((i=1;i<=nargs;++i)); do
   valuei=${arg:i-1:1}
   # If value is 0, continue loop
   ((valuei)) || continue
   # Execute script
   echo "Executing subscript $i"
done 
```

样本输出：

```
$ ./scriptname 10001
Executing script 1
Executing script 5 
```

**编辑。**当您询问如何执行下标时，这是一种（完全有效的）可能性：

```
#!/bin/bash

# Maximum number of subscripts
nsub=5

die() {
   echo >&2 "$@"
   exit 1
}

arg="$1"

# Check that we have argument of correct length
(( ${#arg}==nsub )) || die "Must give argument of length $nsub"

# Check that argument is valid (only 0's and 1's)
[[ $arg =~ ^[01]+$ ]] || die "Wrong argument \`$1'"

for ((i=1;i<=nsub;++i)); do
   # If value is 0, continue loop
   ((${arg:i-1:1})) || continue
   # Execute script
   source "${DOCROOT}/script$i.sh"
done 
```

# iphone - 发送许多 NSURLConnection 请求并在 connectionDidFinishLoading 中获得响应

> ID：13430683
> 
> 赞同：1
> 
> 时间：2012-11-17T12:43:54.003
> 
> 标签：iphone, json, ipad, nsurlconnection

我正在尝试向 php 文件发送许多异步请求，该文件将我的数据显示为 json 代码，并在响应中解析 json，因此我在 ViewDidload 中添加了以下内容：

```
NSURLRequest *aboutRequest = [self getDataFromServer:@"http://al-awal.com/Rashad/iPhonePhp/about.php"];
aboutConn = [[NSURLConnection alloc] initWithRequest:aboutRequest delegate:self];

NSURLRequest *wisdomRequest = [self getDataFromServer:@"http://al-awal.com/Rashad/iPhonePhp/wisdomtoday.php"];
wisdomConn = [[NSURLConnection alloc] initWithRequest:wisdomRequest delegate:self]; 
```

然后

```
-(NSURLRequest *) getDataFromServer:(NSString *)phpUrl{
responseData = [NSMutableData data];
NSURLRequest *request = [NSURLRequest requestWithURL:[NSURL URLWithString:phpUrl]];

return request;
} 
```

然后我补充说：

```
- (void)connectionDidFinishLoading:(NSURLConnection *)connection {

    sqlite3 *database;

    if(sqlite3_open([[rashadDB databasePath] UTF8String], &database) == SQLITE_OK) {

        if (connection == aboutConn) {
            NSLog(@"get from table about");
            SBJsonParser *parser = [[SBJsonParser alloc] init];

            NSString *json_string = [[NSString alloc] initWithData:responseData encoding:NSUTF8StringEncoding];

            NSArray *statuses = [parser objectWithString:json_string error:nil];

            for (NSDictionary *status in statuses)
            {

                NSString *sAboutID = [status objectForKey:@"ID"];
                NSString *sPhone1 = [status objectForKey:@"Phone1"];
                NSString *sPhone2 = [status objectForKey:@"Phone2"];
                NSString *sJawal = [status objectForKey:@"Jawal"];
                NSString *sFax = [status objectForKey:@"Fax"];
                NSString *sWebSite = [status objectForKey:@"WebSite"];
                NSString *sEmail = [status objectForKey:@"Email"];
                NSString *sAddress = [status objectForKey:@"Address"];

                int sAboutID2 = [sAboutID intValue];

                NSLog(@"in server, aboutID = %d, Phone1 = %@, Phone2 = %@, Jawal = %@, Fax = %@, WebSite = %@, Email  = %@, Address = %@",sAboutID2, sPhone1, sPhone2, sJawal, sFax, sWebSite, sEmail, sAddress);

                sqlite3_exec(database, [[NSString stringWithFormat:@"INSERT OR ABORT INTO About VALUES(%d, '%@', '%@', '%@', '%@', '%@', '%@', '%@')",sAboutID2, sPhone1, sPhone2, sJawal, sFax, sWebSite, sEmail, sAddress] UTF8String], NULL, NULL, NULL);

                sqlite3_exec(database, [[NSString stringWithFormat:@"UPDATE About set Phone1 = '%@', Phone2 = '%@', Jawal = '%@', Fax = '%@', WebSite = '%@', Email  = '%@', Address = '%@' Where aboutID = %d", sPhone1, sPhone2, sJawal, sFax, sWebSite, sEmail, sAddress, sAboutID2] UTF8String], NULL, NULL, NULL);

      }  

            } else if (connection == wisdomConn) {
                NSLog(@"get from table wisdoms");

                SBJsonParser *parser = [[SBJsonParser alloc] init];

                NSString *json_string = [[NSString alloc] initWithData:responseData encoding:NSUTF8StringEncoding];

                NSArray *statuses = [parser objectWithString:json_string error:nil];

                for (NSDictionary *status in statuses)
                {
                    NSString *sWisdomTodayID = [status objectForKey:@"ID"];
                    NSString *sContent = [status objectForKey:@"Content"];
                    NSString *sAuthorName = [status objectForKey:@"AuthorName"];
                    NSString *sDateCreate = [status objectForKey:@"DateCreate"];
                    NSString *sEnable = [status objectForKey:@"Enable"];

                    int sWisdomTodayID2 = [sWisdomTodayID intValue];
                    int sEnable2 = [sEnable intValue];

                    NSLog(@"wisdomTodayID = %@, Content = '%@', AuthorName = '%@', DateCreate = '%@', Enable = %@", sWisdomTodayID, sContent, sAuthorName, sDateCreate, sEnable);

                    sqlite3_exec(database, [[NSString stringWithFormat:@"INSERT OR ABORT INTO WisdomToday VALUES(%d, '%@', '%@', '%@', %d)",sWisdomTodayID2, sContent, sAuthorName, sDateCreate, sEnable2] UTF8String], NULL, NULL, NULL);

                    sqlite3_exec(database, [[NSString stringWithFormat:@"UPDATE WisdomToday set Content = '%@', AuthorName = '%@', DateCreate = '%@', Enable = %d  Where wisdomTodayID = %d", sContent, sAuthorName, sDateCreate, sEnable2, sWisdomTodayID2] UTF8String], NULL, NULL, NULL);

                }

            }

        } // sqlite3 open end

        sqlite3_close(database);

    } 
```

第一个 if 条件 --> if(connection == aboutConn) 对我来说没问题，我得到了我的输出，但另一个 if 条件 --> if (connection ==wiseConn) 只给了我这个输出 NSLog(@"get from table智慧”）；而不是抛出 for 循环。我的代码有什么问题吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-17T13:50:38.010

你没有正确关闭大括号......

在为 else - if 条件打开大括号之前，您应该为 if_condition 关闭大括号。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-17T13:58:33.180

您的一些相关代码丢失（`NSConnectionDataDelegate`方法）。但您似乎正在使用一个实例变量 ,`responseData`来构建两个返回值。这意味着有时您只会获得更快的响应数据；有时您会在同一个`NSMutableData`对象中获得混合数据。

# javascript - 在 JS 中的 'EQUAL' 中做 'OR'

> ID：13430684
> 
> 赞同：1
> 
> 时间：2012-11-17T12:44:01.693
> 
> 标签：javascript

是否可以像这样使“等于”

```
if(index==1|12|23|34|45|56){
    //do
} 
```

或者它实际上必须使用这个：

```
if(index==1|index==12|index==23|index==34|index==45|index==56){
    // do
} 
```

但是如果那里有很多索引呢？

请告诉我？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-17T12:46:42.323

另一种方法是使用数组和[`indexOf`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/indexOf)：

```
if ([1, 12, 23, 34, 45, 56].indexOf(index) != -1) {
  // do your thing
} 
```

如果您的浏览器不支持`indexOf`，上面的链接中有一个实现。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-17T12:46:52.947

不，这是不可能的，但是使用辅助函数，您可以做一些接近的事情：

```
if(inArray(index, [1, 12, 23, 34, 45, 56])) { ... } 
```

这是实现：

```
function inArray(needle, haystack) {
    var length = haystack.length;
    for(var i = 0; i < length; i++) {
        if(haystack[i] == needle) return true;
    }
    return false;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-17T12:52:27.100

如果您不想使用[Array.indexOf](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/indexOf)您可以在对象上进行测试（但这不适用于对象和类型）：

```
var obj = {1: 1, 12: 1, 23: 1, 34: 1, 45: 1, 56: 1};

if( obj[index] ) {
    // do
} 
```

或制作一个字符串：（再次仅适用于字符串/数字）

```
var s = "," + [1, 12, 23, 34, 45, 56].join(",") + ",";

if ( s.indexOf( "," + index + "," ) !== -1 ) {
    // do
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-17T13:02:32.833

将它们组合成一个字符串，indexOf 将自动强制类型！这也解决了一些旧浏览器缺乏 Array.indexOf 支持的问题！

```
if ("123456".indexOf(1)) {
// ...
} 
```

现在，你可能会问自己...

> “自我，如果我想组合更复杂的东西，就像美国所有的州一样？”*

那很容易！首先列出所有状态：

```
al ak az ar ca co ct de fl ga hi id il in ia ks ky 
la me md ma mi mn ms mo mt ne nv nh nj nm ny nc nd 
oh ok or pa ri sc sd tn tx ut vt va wa wv wi wy 
```

然后通过将一个单词的开头字母与另一个单词的结尾字母连接起来，组合单词组以减少代码大小。重复直到你不能再组合它们。

```
if ("fl gal morilar mnvtnmt minde msd me ma mdct ncokscaky ny nh nj ne ohia pa utx wva waz wid wy vi pr".indexOf("ny")) {
   alert("New York!");
} 
```

警告：这样做可能会让你被贴上疯子的标签。

# jquery - 如何将 jquery 动画添加到引导 ajax 选项卡

> ID：13430685
> 
> 赞同：1
> 
> 时间：2012-11-17T12:44:06.740
> 
> 标签：jquery, ajax, twitter-bootstrap, tabs

我有一组有效的 jQuery ajax 选项卡。我需要在显示器上放一点动画。我多次尝试为其添加动画。它似乎可以工作，但出现了一个问题 - 它不是唯一的选项卡。当我单击第二个选项卡时，内容不会加载到新选项卡中。但它会继续显示在当前内容下。这是我的代码：

**html**

```
<ul id="MainTabs" class="nav nav-tabs">
  <li><a data-target="#tab1" data-toggle="tab" href="inc/timetable_content_detail.php?id=1">Tab 1</a></li>
  <li><a data-target="#tab2" data-toggle="tab" href="inc/timetable_content_detail.php?id=2">Tab 2</a></li>
  <li><a data-target="#tab3" data-toggle="tab" href="inc/timetable_content_detail.php?id=3">Tab 3</a></li>
  <li><a data-target="#tab4" data-toggle="tab" href="inc/timetable_content_detail.php?id=4">Tab 4</a></li>
  <li><a data-target="#tab5" data-toggle="tab" href="inc/timetable_content_detail.php?id=5">Tab 5</a></li>
</ul>

<div class="tab-content" style="background:#ffffff">
  <div class="tab-pane" id="tab1"><?include "inc/timetable_content_detail.php";?></div>
  <div class="tab-pane" id="tab2"><img src="images/loading.gif" />Loading...</div>
  <div class="tab-pane" id="tab3"><img src="images/loading.gif" />Loading...</div>
  <div class="tab-pane" id="tab4"><img src="images/loading.gif" />Loading...</div>
  <div class="tab-pane" id="tab5"><img src="images/loading.gif" />Loading...</div>
</div> 
```

**Javascript**

```
$(function() {
  $("#MainTabs").tab();
  $("#MainTabs").bind("show", function(e) {    
    var contentID  = $(e.target).attr("data-target");
    var contentURL = $(e.target).attr("href");
    $(contentID).load(contentURL, function(){
      $("#MainTabs").tab().slideDown("slow");
    });
  });
  $('#MainTabs a:first').tab("show");
}); 
```

我试图在 tab() 之后添加 slideDown("slow") 但它似乎不太正确。请你们看看我的代码并提出建议。

问候，

# css - 根据 CSS 中的计数器值设置边距（缩进）

> ID：13430686
> 
> 赞同：11
> 
> 时间：2012-11-17T12:44:07.153
> 
> 标签：css

我想知道是否可以`margin-left`使用 CSS3 根据计数器的值设置元素。

换句话说，拥有这样的 HTML：

```
<section>A</section>
<section>B</section>
<section>C</section> 
```

第一个块带有 a `margin-left: 0em`，第二个带有 a ，`1em`依此类推。

到目前为止，我已经尝试了以下方法：

```
section
{
    counter-increment: sect-indent;
    margin-left: calc(counter(sect-indent) * 1em);
} 
```

但似乎`calc()`不支持获取计数器值。

使用 CSS3 可以实现这样的事情吗？我对涉及 ECMAScript 的解决方案不感兴趣。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2014-09-30T21:37:47.127

它只在`content`属性内部起作用，不像你想象的那样是一个变量。如果你在 DevTools 等中查看它，它不是整数。你仍然会`counter(myCounter)`在那里看到。

“在 CSS 2.1 中，计数器的值只能从 'content' 属性中引用。” [来源](http://www.w3.org/TR/CSS21/syndata.html#counter)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-17T16:06:52.263

## 小套装

如果您正在处理`section`彼此相邻的一小组元素（如您的示例所示），那么使用相邻的兄弟选择器（或者`nth-of-type`如果只需要 CSS3 支持）将[获得您想要的东西，而无需计算](http://jsfiddle.net/nNvv4/)。但是，可能远远超过五个元素，并且 css 可能会变得过于繁琐，因此如果您正在查看数百个元素，这是不切实际的。

```
section { margin-left: 0}
section + section {margin-left: 1em}
section + section + section {margin-left: 2em} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-09-30T22:45:28.850

对于单行（或其他相同高度）的项目，您可以使用以下技巧：

```
section::before {
  content: '';
  float: left;
  height: 1.5em; /* a bit more than line height */
  width: 1em;
}
```

```
<section>A</section>
<section>B</section>
<section>C</section>
<section>D</section>
<section>E</section>
```

# jboss - httpOnly cookie

> ID：13430690
> 
> 赞同：2
> 
> 时间：2012-11-17T12:44:38.327
> 
> 标签：jboss, security, httponly

我已经对部署在 jboss 5 中的应用程序（内置 struts 和休眠框架）进行了网络扫描，报告了“ `Set-cookie does not use HTTPOnly keyword. The web application does not utilize HTTPOnly cookies`”。这是什么意思。`boss/deploy/jbossweb.sar/context.xml`我找了一些帖子，只是在我的 j中添加了一行

```
<SessionCookie secure="true" useHttpOnly="true" > 
```

设置后，我在运行应用程序时遇到错误。
有没有我遗漏的配置？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-17T19:53:00.923

尝试这个：

```
<SessionCookie secure="true" httpOnly="true" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-18T02:45:06.013

> 这是什么意思

http 响应标头中的标志向浏览器指示不应允许`HttpOnly`客户端访问该或其他会话 cookie 类型标识符。`JSESSION_ID`这是为了防止通过[XSS](https://www.owasp.org/index.php/Cross-site_Scripting_%28XSS%29)中的客户端脚本恶意访问会话令牌（或其他涉及从客户端劫持会话的攻击）。目前几乎所有主流浏览器都支持这个标志（查看支持浏览器[列表](https://www.owasp.org/index.php/HTTPOnly#Browsers_Supporting_HTTPOnly)），但在不支持它的浏览器中它会被忽略。在[OWASP 网站上查看更多信息](https://www.owasp.org/index.php/HTTPOnly)

通过在上下文文件中包含以下内容，对 tomcat 及其分支（包括 Jboss）的设置类似：

```
<session-config>
    <cookie-config>
        <http-only>true</http-only>
    </cookie-config>
</session-config> 
```

或者

```
 <SessionCookie secure="true" httpOnly="true" /> 
```

# vb.net - 在 MDI 容器上显示对话框

> ID：13430692
> 
> 赞同：0
> 
> 时间：2012-11-17T12:44:57.127
> 
> 标签：vb.net, dialog, mdi

我有一个 MDI 容器作为启动表单，在 Private Sub frmMain_Load 函数中，我想将 frmLogin 作为对话框加载。我是作为*frmLogin.Show()*做的，但是 MDI 容器不在后台。当我以*frmLogin.ShowDialog()*执行此操作时，MDI 容器已加载，并且 frmLogin 也已加载但在后台。

有什么解决办法。我试过谷歌，但我没有运气。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-17T12:51:38.743

将 frmMain 的属性 mdiContainer 设置为 true。
`IsMdiContainer=true`
在你的
`frmLogin.MdiParent = Me`功能中

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-17T16:45:26.077

尝试改写 OnShown 方法：

```
Protected Overrides Sub OnShown(e As EventArgs)
  MyBase.OnShown(e)

  frmLogin.ShowDialog(Me)
End Sub 
```

# android - 需要帮助在 Eclipse 中制作客户端-服务器应用程序

> ID：13430695
> 
> 赞同：1
> 
> 时间：2012-11-17T12:45:04.563
> 
> 标签：android, client

1.  我需要一个客户端服务器示例和在 Eclipse 上创建它的步骤，
    1.  我正在使用 eclipse，我的 PC 中有 tomcat7.0 和 wamp 服务器，
    2.  我有一个设备（三​​星手机），我想用作服务器/客户端和模拟器（AVD）作为客户端/服务器，
    3.  如何在 Eclipse 中创建服务器端应用程序？请解释所有步骤，
    4.  如何测试/运行应用程序？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-17T13:09:09.400

客户端和服务器将如何通信？通过 Wifi/蓝牙/使用 http？我想到的唯一真正的客户端服务器模型是让我们说你要从你的 android 应用程序发送 HttpRequests（检查[这个](https://stackoverflow.com/questions/3505930/make-an-http-request-with-android)例子）的 php 页面，服务器将处理。在蓝牙 wifi 的情况下，您只需打开一个套接字并发送数据。必须注意的是，你的电脑和模拟器有不同的 IP 地址范围，因此在 TCP/IP 套接字的情况下，在你的安卓手机和安卓虚拟设备之间建立通信是非常棘手的（尽管我认为这是可能的）。我希望我没有误解什么。

# android - 如何在一些外部事件上启动应用程序？

> ID：13430696
> 
> 赞同：2
> 
> 时间：2012-11-17T12:45:11.493
> 
> 标签：android

我在我的手机中安装了一个应用程序说 xyz，我希望这个应用程序在电池状态低（如 10 或 15%）剩余时启动。

当一些外部事件或实习生时，我不知道如何启动应用程序。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-17T12:50:25.397

您必须有一个带有 BATTERY_LOW 意图过滤器的接收器。

```
 <receiver android:name=".my_receiver" android:enabled="true">
        <intent-filter>
            <action android:name="android.intent.action.BATTERY_LOW" />
        </intent-filter>
    </receiver> 
```

这是你的接收器

```
public class my_receiver extends BroadcastReceiver
{
    @Override
    public void onReceive(Context context, Intent intent)
    {
        int level = intent.getIntExtra( "level", 0 );
       //...your code to start an activity 
    }
} 
```

此外，从这篇[文章](https://stackoverflow.com/questions/5393651/action-battery-low-not-being-fired-from-manifest)中，在清单中注册 BATTERY_LOW 将不起作用。您必须按照它所说的方式以编程方式注册它。

# python - 如何在 PyGObject 中的 Gtk.Container 上调用 gtk_container_remove()？

> ID：13430700
> 
> 赞同：1
> 
> 时间：2012-11-17T12:45:43.597
> 
> 标签：python, gtk, pygobject

在 PyGObject 项目中，我正在尝试[`GtkStatusbar`](http://developer.gnome.org/gtk/unstable/GtkStatusbar.html)使用[`gtk_container_remove ()`](http://developer.gnome.org/gtk/unstable/GtkContainer.html#gtk-container-remove).

通常在使用 GObject Introspection Python 绑定时，方法名称与 C 函数名称相同，减去“类型前缀”并采用一个不太明确的参数。例如，我调用[`gtk_box_pack_end ()`](http://developer.gnome.org/gtk/unstable/GtkBox.html#gtk-box-pack-end)添加稍后要删除的小部件：

```
statusbar.pack_end(widget, False, True, 0) 
```

当我尝试通过 删除小部件时`statusbar.remove(widget)`，我看到：

```
...
  函数中的文件“/usr/lib/python2.7/dist-packages/gi/types.py”，第 43 行
    返回 info.invoke(*args, **kwargs)
TypeError：remove() 正好需要 3 个参数（给定 2 个）

```

其中一个论点是隐含`self`的，另外两个论点显然应该是数字。

这是该方法的 GIR：

```
<method name="remove" c:identifier="gtk_container_remove">
  <return-value transfer-ownership="none">
    <type name="none" c:type="void"/>
  </return-value>
  <parameters>
    <parameter name="widget" transfer-ownership="none">
      <type name="Widget" c:type="GtkWidget*"/>
    </parameter>
  </parameters>
</method> 
```

如何调用`gtk_container_remove ()`PyGObject 中的函数？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-17T16:20:19.380

`Gtk.Statusbar``remove`用另一个具有不同签名的函数覆盖该函数。您可以尝试销毁小部件，容器、状态栏将收到通知，并且它将删除小部件，希望您不再需要它。

否则你可以试试：`Gtk.Container.remove(statusbar, widget)`.

# python - PyInstaller 和 PySide，如何包含 imageformats 文件夹？

> ID：13430702
> 
> 赞同：3
> 
> 时间：2012-11-17T12:45:53.327
> 
> 标签：python, qt, pyside, pyinstaller

在一个小时内问两个问题我感觉很糟糕，但是哦，好吧。

我正在使用 Python 和 PySide 构建一个相当复杂的应用程序。终于发布的日子快到了，所以我想将此应用程序构建为 exe。我正在使用 PyInstaller 构建我的 exe 二进制文件。

此应用程序的一部分加载一些 JPEG 图像。我在将这些图像加载到我的应用程序时遇到了问题（它们只是不会出现），所以我必须这样做：

```
path = os.getcwd()
app.addLibraryPath(path) #app being QApplication() 
```

这使它工作（此路径包含包含和其他图像加载插件的`imageformats`文件夹）`qjpeg4.dll`

但是，现在我在使用 PyInstaller 打包时遇到了同样的问题。我必须使用该`--onefile`标志，但即使我不使用，我也可以看到 PyInstaller 没有包含该`imageformats`文件夹 - 无处可寻。

我知道这是问题所在，因为当我手动将 imageformats 文件夹复制/粘贴到 exe 所在的文件夹中时，应用程序按预期工作。

有没有办法*强制*PyInstaller 包含我指定的文件夹，特别是这个 imageformats 文件夹？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T04:36:31.380

使用 PyInstaller 时有一个选项`--additional-hooks-dir=HOOKSDIR`，它将附加目录到 pyinstaller 搜索路径。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-03-12T08:05:12.177

PyInstaller 的选项`--add-data <SRC;DEST or SRC:DEST>`

```
pyinstaller --add-data "\path\of\imageformats;imageformats" target.py 
```

# html - Facebook 喜欢和分享未在 woorank 上注册

> ID：13430706
> 
> 赞同：0
> 
> 时间：2012-11-17T12:46:09.417
> 
> 标签：html, facebook

我的客户网站 ( [http://www.luof.co.uk](http://www.luof.co.uk) ) 有问题。我试图让网站上的 Facebook 喜欢链接到 Facebook 粉丝页面 ( [http://www.facebook.com/londonusedofficefurniture](http://www.facebook.com/londonusedofficefurniture) )。但是，woorank.com 说根本没有点赞？下面是它显示的屏幕截图：

![woorank 上的社交媒体分析](../Images/5821b69a96bb9354a04e25fe908f1531.png)

我已经安装了 Insights，得到了一个likebox，并在页面底部得到了一个社交插件，但它仍然没有注册。显然不依赖 Woorank，但将 Facebook 链接到网站对于 SEO 很重要。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-17T12:55:09.010

点赞和分享将计入 URL [http://www.luof.co.uk/](http://www.luof.co.uk/)而不是 woorank.com 中的[http://www.facebook.com/londonusedofficefurniture](http://www.facebook.com/londonusedofficefurniture)。

# android - 适用于 Android v2（测试版）的 Google Analytics SDK setCustomVar()

> ID：13430707
> 
> 赞同：4
> 
> 时间：2012-11-17T12:46:19.023
> 
> 标签：android, google-analytics

[正如谷歌在开发者页面](https://developers.google.com/analytics/devguides/collection/android/v2/migration)中提到的那样：

> 版本 2 目前不支持自定义变量，应删除对**setCustomVar()的调用。**

所以我想知道在支持这种方法之前我必须做什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T09:11:43.433

SDK 2.0 中的 CustomVar 以及即将推出的 Universal Analytics正在取代 CustomVar [。](https://developers.google.com/analytics/devguides/collection/android/v2/customdimsmets?hl=en)现在，您可以在标准 GA 帐户中使用 20 个 CustomDimensions，而不是之前架构中的 5 个 Customvar。

# sas - SAS EG：在服务器上运行时包括本地文件

> ID：13430710
> 
> 赞同：1
> 
> 时间：2012-11-17T12:46:51.720
> 
> 标签：sas, enterprise-guide

当我连接到服务器时，如何使用 include 语句来引用本地文件？当我运行代码时，我收到一条错误消息，指出服务器上没有这样的文件。我如何告诉 EG 在本地查找文件？

我有办法解决这个问题，比如告诉代码在“本地”服务器上运行，然后我将结果复制过来。或者我只是将我需要的代码添加为 EG 中的代码节点。在处理大量使用包含的旧代码时，这两者都不是很实用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-18T23:06:33.383

在企业指南中，程序（代码节点）可以选择环境。为执行本地程序的 %INCLUDE 的程序选择 LOCAL。然后，您需要通过 SAS/CONNECT (RSUBMIT) 将生成的数据集移动到远程服务器并将它们放在永久位置。后续程序可以选择您的远程服务器作为环境，并且将能够对您之前在远程服务器上移动的数据进行操作。

如果这似乎合理......我可以扩大答案

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-24T14:56:03.823

如果您希望引用本地 SAS 数据集（sas7bdat 文件），您可以使用 Tasks->Data->Upload Data Files to Server 任务。这将捕获将数据集文件复制到 SAS 工作区的步骤，作为流程的一部分。

# android - 从三星手机的相机意图中获取 Uri Null 捕获照片

> ID：13430720
> 
> 赞同：2
> 
> 时间：2012-11-17T12:48:06.867
> 
> 标签：android, android-camera, android-camera-intent

在从相机拍摄照片时，我在三星手机的 contenturi 中变得无效，但其他手机的工作正常。

```
@Override 
    protected void onActivityResult(int requestCode, int resultCode, Intent data) {     
        super.onActivityResult(requestCode, resultCode, data);    
        try
        {
             if (requestCode == IMAGE_CAPTURE) {
                if (resultCode == RESULT_OK){

                    Uri contentUri = data.getData();
                    if(contentUri!=null)
                    {
                        String[] proj = { MediaStore.Images.Media.DATA };         
                        Cursor cursor = managedQuery(contentUri, proj, null, null, null);         
                        int column_index = cursor.getColumnIndexOrThrow(MediaStore.Images.Media.DATA);         
                        cursor.moveToFirst();         
                        imageUri = Uri.parse(cursor.getString(column_index));
                    }

                    tempBitmap = (Bitmap) data.getExtras().get("data"); 
                    mainImageView.setImageBitmap(tempBitmap);
                    isCaptureFromCamera = true;
                }
            } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-23T15:57:49.990

上面的代码适用于某些手机，但在我的情况下不适用于三星手机，所以我为所有设备实现了通用逻辑。

> 从相机拍摄照片后，我使用光标实现了一个逻辑并迭代光标以获取最后一张从相机拍摄的照片的路径。下面的代码在任何设备上都可以正常工作。

```
Cursor cursor = getContentResolver().query(Media.EXTERNAL_CONTENT_URI, new String[]{Media.DATA, Media.DATE_ADDED, MediaStore.Images.ImageColumns.ORIENTATION}, Media.DATE_ADDED, null, "date_added ASC");
if(cursor != null && cursor.moveToFirst())
{
    do {
        uri = Uri.parse(cursor.getString(cursor.getColumnIndex(Media.DATA)));
        photoPath = uri.toString();
    }while(cursor.moveToNext());
    cursor.close();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-05-28T20:13:37.900

嗨，我也面临这个问题，就像我正在检查 MOTO G 上的应用程序它不工作但在三星设备上它工作所以我做下面的编码请检查： -

Uri selectedImageUri = data.getData();

```
 try {
                    selectedImagePath = getPathBelowOs(selectedImageUri);
                } catch (Exception e) {
                    e.printStackTrace();
                }
                if (selectedImagePath == null) {
                    try {
                        selectedImagePath = getPathUpperOs(selectedImageUri);
                    } catch (Exception e) {
                        e.printStackTrace();
                    }
                }

public String getPathBelowOs(Uri uri) {
    String[] projection = { MediaStore.Images.Media.DATA };
    Cursor cursor = managedQuery(uri, projection, null, null, null);
    int column_index = cursor
            .getColumnIndexOrThrow(MediaStore.Images.Media.DATA);
    cursor.moveToFirst();
    return cursor.getString(column_index);
}

/**
 * Getting image from Uri
 * 
 * @param contentUri
 * @return
 */
public String getPathUpperOs(Uri contentUri) {// Will return "image:x*"
    String wholeID = DocumentsContract.getDocumentId(contentUri);

    // Split at colon, use second item in the array
    String id = wholeID.split(":")[1];

    String[] column = { MediaStore.Images.Media.DATA };

    // where id is equal to
    String sel = MediaStore.Images.Media._ID + "=?";

    Cursor cursor = getContentResolver().query(
            MediaStore.Images.Media.EXTERNAL_CONTENT_URI, column, sel,
            new String[] { id }, null);

    String filePath = "";

    int columnIndex = cursor.getColumnIndex(column[0]);

    if (cursor.moveToFirst()) {
        filePath = cursor.getString(columnIndex);
    }

    cursor.close();
    return filePath;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-06-12T15:53:12.047

当我们将在 Android 中从相机中捕获图像时，`Uri`或为`data.getdata()`空。我们有两种解决方案来解决这个问题。

1.  我们可以从 Bitmap Image 中得到 Uri 路径
2.  我们可以从光标处获取 Uri 路径。

我将在这里实现所有方法，请仔细观看并阅读这些：-

首先我将告诉如何从位图图像中获取 URI：完整的代码是：

首先，我们将通过 Intent 捕获图像，这两种方法都相同，所以这段代码我只在这里写一次：

```
 // Capture Image
        captureImg.setOnClickListener(new View.OnClickListener() {
            @Override
            public void onClick(View view) {
                Intent intent = new Intent(MediaStore.ACTION_IMAGE_CAPTURE);
                if (intent.resolveActivity(getPackageManager()) != null) {
                    startActivityForResult(intent, reqcode);
                }

            }
        }); 
```

现在我们将实现 OnActivityResult :- (这对于上述两种方法都是相同的):-

```
@Override
    protected void onActivityResult(int requestCode, int resultCode, Intent data) {
        super.onActivityResult(requestCode, resultCode, data);

        if(requestCode==reqcode && resultCode==RESULT_OK)
        {

Bitmap photo = (Bitmap) data.getExtras().get("data");
ImageView.setImageBitmap(photo);

            // CALL THIS METHOD TO GET THE URI FROM THE BITMAP
            Uri tempUri = getImageUri(getApplicationContext(), photo);

            \\ Show Uri path based on Image
            Toast.makeText(LiveImage.this,"Here "+ tempUri, Toast.LENGTH_LONG).show();

           \\ Show Uri path based on Cursor Content Resolver
            Toast.makeText(this, "Real path for URI : "+getRealPathFromURI(tempUri), Toast.LENGTH_SHORT).show();
}
        else
        {
            Toast.makeText(this, "Failed To Capture Image", Toast.LENGTH_SHORT).show();
        }
    } 
```

\现在我们将创建上述所有方法以通过类从 Image 和 Cursor 方法创建 Uri：

现在来自位图图像的 URI 路径

```
 private Uri getImageUri(Context applicationContext, Bitmap photo) {
        ByteArrayOutputStream bytes = new ByteArrayOutputStream();
        photo.compress(Bitmap.CompressFormat.JPEG, 100, bytes);
        String path = MediaStore.Images.Media.insertImage(LiveImage.this.getContentResolver(), photo, "Title", null);
        return Uri.parse(path);
    } 
```

\ Uri 来自保存图像的真实路径

```
 public String getRealPathFromURI(Uri uri) {
        Cursor cursor = getContentResolver().query(uri, null, null, null, null);
        cursor.moveToFirst();
        int idx = cursor.getColumnIndex(MediaStore.Images.ImageColumns.DATA);
        return cursor.getString(idx);
    } 
```

# dynamics-crm-2011 - Create in Post Operation 错误：实体 ID 不存在 CRM 2011 插件

> ID：13430721
> 
> 赞同：0
> 
> 时间：2012-11-17T12:48:10.737
> 
> 标签：dynamics-crm-2011

尝试在实体的创建步骤的后期操作上创建相关实体时遇到问题。

这是我的问题的描述。我的系统中有 3 个实体 A、B、C，其中 B 和 C 是 A 的相关实体（N:1）。在创建步骤中，在后操作中，对于实体 A，尝试为 B 创建记录和 C 通过为查找（关系）分配 A 的 ID（guid）。这引发了我必须指定实体 ID 的错误.....

奇怪的是`相同的插件，以相同的方式注册在我的 QA 环境中工作正常。

以下是产生的错误。Unhanded `Exception:System.ServiceModel.FaultException`1[[Microsoft.Xrm.Sdk.OrganizationServiceFault, Microsoft.Xrm.Sdk, Version=5.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35]]:` 必须为更新详细信息指定实体 ID：

真的需要帮助..提前谢谢..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-18T20:31:03.077

通过调试检查你有什么值。现在，在插件中附加调试并不好，但它比猜测或创建日志文件要好得多。实体在您更新之前是否有 id？

它可以帮助显示一些代码作为示例。

# java - 使用 Java 的 DES 系统中的密钥置换

> ID：13430722
> 
> 赞同：0
> 
> 时间：2012-11-17T12:48:15.853
> 
> 标签：java, permutation, des

假设我有一个 (8*8) 位块（64 位块）.. 我需要根据给定的 Permutation table 对其进行置换。Permutation table (8*7) 64 位块中每个位的位置要被排列。

```
 Example:
(64=bits)        Permutation Tbale (8*7)
0 0 1 0 ..       57 49 41 ...
0 1 1 0 ..  AND  1  58 50 ..
1 0 0 1 ..       10 2 59 ...
. . 
```

因此，从排列表中.. 数字 57 标识来自 64 位块的位 57 被放置为新 (8*7) 数组的第一位（排列表中的 57 位置）。有没有办法使用数字 57 来识别第 57 位的确切行和列？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-17T12:56:08.873

假设索引都从 0 开始`57 / 8 = 7`，所以行索引为 7（第 8 行）。`57 % 8 = 1`，所以索引为 1 的列（第 2 列）。

# jquery - 将链接动态插入到 Shadowbox 图像

> ID：13430726
> 
> 赞同：0
> 
> 时间：2012-11-17T12:48:42.230
> 
> 标签：jquery, shadowbox

我有一个加载图像和描述的 Wordpress Shadowbox。描述中有一些链接，我想把那个链接也放在图片上，所以当用户点击图片时，它会打开这个链接。

我尝试使用此脚本，但它肯定有一些缺陷：它仅在单击图像一次后才创建链接，并且不会解开“a”，因此新链接可用于其他动态加载的图像。

```
$("#sb-wrapper-inner").live("click", function(){
  var $link = $("#sb-title-inner a").attr("href");
$(this).wrap("<a></a>").parent("a").attr("href", $link).trigger('click');
}); 
```

请问有什么帮助吗？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-17T13:01:51.477

当链接单击重定向到 href url 时，您无法触发本机事件。显然是出于安全原因。但是您仍然可以重定向到 href 属性所针对的 url。

```
$(document).on("click","#sb-wrapper-inner", function(){ 
  var link = $("#sb-title-inner a").attr("href");
$(this).wrap("<a></a>").parent("a").attr("href", link);
     window.location​​​​​​​​​​​​​ = link;​ //or use window.location.replace(link) if you dont care about browser's history
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-18T09:44:04.620

谢谢，但是您的解决方案在控制台中给了我一些错误： **SyntaxError: Unexpected token ILLEGAL**

我改进并简化了我的方法，如下所示：

```
$("#sb-wrapper-inner").live("click", function(){
if ( $("#sb-title-inner a").length > 0 ) {
  var link = $("#sb-title-inner a").attr("href");
  window.location = link;
}
}); 
```

现在它工作正常，只是我没有将光标更改为指针。有什么建议我可以通过这个改进它吗？

# python-3.x - 创建不同音高但仍具有相同基频的 .wav 文件

> ID：13430727
> 
> 赞同：7
> 
> 时间：2012-11-17T12:49:00.563
> 
> 标签：python-3.x, pygame

我正在使用 pygame 播放 .wav 文件，并希望随着游戏的每个级别的进行更改特定 .wav 文件的音高。解释一下，我的游戏几乎是旧 Oric1 计算机 OricMunch Pacman 游戏的复制品，每个关卡要咀嚼几百颗药丸，每咀嚼一颗药丸都会播放一个短促的声音，音高为每吃一颗/嚼一颗药丸，声音都会略有增加。

**现在这是我尝试过的**：

1）我使用 pythons wave 模块创建了声音文件的多个副本，每个新创建的文件的音高略有增加（通过更改 params() 中的第三个参数帧速率，有时称为采样频率）每个for循环的循环。实现这一点后，我可以在循环中创建多个声音对象以添加到列表中，然后在列表中建立索引以在每个药丸被吃掉时播放声音。

问题是，即使我可以创建数百个文件（使用 wave 模块），在使用 windows 媒体播放器甚至 python 的 winsound 模块播放时，它们可以完美地播放它们自己独特的音高，pygame 似乎并没有解释音高的差异。

现在有趣的是，我已经下载了**[Power Sound Editor](http://www.free-sound-editor.com/download.html)**的免费试用版，它可以选择更改音高，因此我只创建了几个 .wav 文件进行测试，它们在 pygame 中播放时显然会使用不同的音高。

**观察**：通过在我的 for 循环中打印参数，我可以看到帧速率/频率正在按预期变化，因此显然这就是为什么声音通过 windows 媒体播放器和 winsound 按预期播放的原因。

在 pygame 中，我怀疑他们不使用不同音高演奏的原因是因为频率参数是固定的，无论是默认设置还是通过使用 pygame.mixer.pre_init，我确实已经尝试过。然后，我检查了 Power Sound Editor 创建的每个 .wav 文件的参数，并注意到即使音高发生了变化，频率也保持不变，这并不奇怪，因为您必须选择 3 个选项中的 1 个来保存文件，22050、44100 或 96000Hz

所以现在我想是时候检查一下音高和频率之间的差异，特别是与声音有关的差异，因为我认为它们是相同的。我发现声波似乎有两个主要方面：1）帧速率/频率和 2）基于该频率的多个波的变化幅度。现在我还没有清楚地理解这一点，但意识到 Power Sound Editor 必须通过操纵多个波的变化幅度来改变声音的形状/音高，上面的点 2)，而不是通过改变基频，上面的点 1) .

我是 python、pygame 和一般编程的初学者，并且努力寻找一种简单的方法来更改声音文件以在不改变帧速率/基本频率的情况下逐渐增加音高。如果我可以导入一个模块来帮助我通过操纵多波的不同幅度来改变音高（而不是改变通常为 22050 或 44100Hz 的帧速率/采样频率），那么它需要相对没有时间如果为了不减慢游戏速度而在飞行中完成。如果潜在的模块打开，更改然后保存声音文件，而不是即时更改它们，那么我想它是否很慢并不重要，因为我只会创建声音文件，这样我就可以从中创建声音对象pygame 玩。

现在，如果在 pygame 中实现不减速的唯一方法是像我已经完成的那样从声音文件创建声音对象，然后播放它们，那么我需要一种像 Power Sound Editor 那样操作声音文件的方法（我再次强调不是通过更改通常为 22050 或 44100 的帧速率/采样频率），然后保存更改的文件。

我想简而言之，如果我可以神奇地自动化 Power Sound Editor 以生成 3 到 400 个声音文件，而无需我每次都单击更改音高选项然后保存，这就像拥有我自己的 python 做事方式它。

**结论**：假设从声音文件创建声音对象是不减慢游戏速度的唯一方法（我怀疑它可能是这样），那么我需要以下内容：

相当于 python wave 模块，但它像 Power Sound Editor 那样改变音高，而不是像 wave 模块那样改变基频。

请有人可以帮助我，让我知道是否有办法。

我正在使用 python 3.2.3 和 pygame 1.9.2

另外我只是使用pythons IDLE，我不熟悉使用其他编辑器。

我也知道 Numpy 和各种声音模块，但绝对不知道如何使用它们。此外，任何潜在的模块都需要使用上述版本的 python 和 pygame。

先感谢您。

加里汤森。

**我对 Andbdrew 的第一个答案的回复如下：**

谢谢您的帮助。

听起来我需要做的是更改波形文件数据而不是波形文件参数。这里的参考是我用来创建多个文件的代码：

```
framerate = 44100 #Original .wav file framerate/sample frequency

for x in range(0, 25):    
   file = wave.open ('MunchEatPill3Amp.wav')   
   nFrames = file.getnframes()
   wdata = file.readframes(nFrames) 
   params = file.getparams()     
   file.close()

   n = list(params)   
   n[0] = 2 
   n[2] = framerate

   framerate += 500 

   params = tuple(n)    
   name = 'PillSound' + str(x) + '.wav'     

   file = wave.open(name, 'wb')
   file.setparams(params)
   print(params)
   file.writeframes(wdata)
   file.close() 
```

听起来编写不同的数据与 Power Sound Editor 更改音高的方式相同或相似。

所以请你告诉我你是否知道一种修改/操纵 wdata 以有效改变音高的方法，而不是改变 params() 中的采样率。这是否意味着从我的 .wav 文件中读取 wdata 后对它应用一些相对简单的操作。（我真的希望如此）我听说过使用 numpy 数组，但我不知道如何使用这些数组。

请注意，在上述代码中修改的任何 .wav 文件确实可以在 Python 中使用 winsound 或在 windows 媒体播放器中播放，音高增加听起来像预期的那样。只有在 Pygame 中他们没有。

正如我所提到的，似乎因为 Pygame 有一个设定频率（我猜这个频率也是采样率），这可能是音高听起来相同的原因，就好像它根本没有增加一样。而当使用 windows 媒体播放器播放时，采样率的变化确实会导致更高的音调。

我想我只需要通过更改文件数据而不是文件参数来实现相同的音高增加，所以如果你知道方法，请告诉我。

再次感谢您对此的帮助。

**总结一下我最初的问题，这里又是：**

如何通过使用 python 编程语言而不是某种单独的软件程序（例如 Power Sound Editor）来更改 .wav 文件的音高而不更改帧速率/采样频率？

再次感谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-01-22T06:41:07.280

如果您只想创建多个文件并且使用的是 linux，请尝试**SoX**。

```
#!/bin/bash
for i in `seq -20 10 20`; do
    sox 'input.wav' 'output_'$i'.wav' pitch $i;
done 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-18T08:52:06.140

您应该更改样本中波的频率，而不是更改采样率。似乎 python 正在以相同的采样率播放所有波形文件（这很好），因此您的更改不会反映。

采样率有点像声音文件的元信息。[在http://en.m.wikipedia.org/wiki/Sampling_rate#mw-mf-search](http://en.m.wikipedia.org/wiki/Sampling_rate#mw-mf-search)阅读它。

当您将连续波形转换为离散波形时，它会告诉您采样之间的时间量。尽管您（ab）使用它很酷，但最好通过以相同的采样率在不同文件中编码不同频率的声音来为您提供更好的服务。

我查看了 wave 模块的文档（[http://docs.python.org/3.3/library/wave.html](http://docs.python.org/3.3/library/wave.html)），看起来您应该在调用时将不同的数据写入音频文件

```
 Wave_write.writeframes(data) 
```

这是实际将音频数据写入音频文件的方法。

您描述的方法负责写入有关音频文件本身的信息，而不是音频数据的内容。

```
 Wave_write.setparams(tuple) 
```

“......元组应该在哪里（nchannels，sampwidth，framerate，nframes，comptype，compname），值对 set*() 方法有效。设置所有参数......“（也来自文档）

如果您发布代码，也许我们可以修复它。

# bash - bash 并期待互动

> ID：13430728
> 
> 赞同：0
> 
> 时间：2012-11-17T12:49:02.070
> 
> 标签：bash, expect

```
#!/bin/bash
# Bash commands go here

/usr/bin/expect - << EndMark
This is the expect script
expect commands go here
and here
until:
EndMark

# More bash commands go here.

exit 0 
```

这样的事情将允许我从 bash 中启动一个期望脚本。但是，当它到达更多 bash 命令部分时，它将停止期望进程（以及它产生的进程）是否有可能回到相同的期望脚本？

```
eg - Start expect script
   - At a certain point leave the expect to bash operations
   - return to the same expect script? 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-05T06:20:54.970

不必为了发出 shell 命令而离开期望进程 - 您可以`system`在期望脚本中使用该命令。

# c# - GetForegroundWindow 抛出 Win32Exception 拒绝访问

> ID：13430734
> 
> 赞同：2
> 
> 时间：2012-11-17T12:49:47.827
> 
> 标签：c#, window-handles, rundll32

```
public partial class Form1 : Form
{
    [DllImport("user32.dll", CharSet = CharSet.Auto, ExactSpelling = true)]
    private static extern IntPtr GetForegroundWindow();

    public Form1()
    {
        InitializeComponent();
        var proc = Process.GetProcesses().Single(x => x.Handle == GetForegroundWindow());
    }
} 
```

我试过以管理员身份运行该应用程序，不行。我在这里做错了什么，我得到了这个例外？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-17T14:28:02.077

事实证明，我正在做的整个循环也在遍历受保护的进程，导致访问被拒绝

# c# - 在模拟对象上获取方法以返回虚假数据时遇到问题

> ID：13430736
> 
> 赞同：3
> 
> 时间：2012-11-17T12:50:05.440
> 
> 标签：c#, unit-testing, moq

我正在尝试为“MethodToTest”编写测试，如下所示

```
Public Class UserService()
{
        private IRepository<User> _userRepo;

        public UserService(IRepository<User> userRepo = null)
        {
            _userRepo = userRepo ?? new UserRepository();
        }

        public List<string> MethodToTest(string userName)
        {
            var user = _userRepo.Find(u => u.Email == userName).First<User>();

            //Other stuff that eventually returns a List<string>
        }
} 
```

我的测试中有以下内容

```
 [Test]
    public void GetItemsByUserName_UserName_ListOfItems()
    {
        var userName = "AnyString";
        var fakeUserRepo = new Mock<IRepository<User>>();
        var fakeUserList = new List<User>()
        {
        new User()
        {
            Email = userName,
            Roles = new List<Role>()
            {
                new Role()
                {
                    Name="Role1"
                },
                new Role()
                {
                    Name="Role2"
                }
            }
        }
    };
        var fakeUserListQueryable = fakeUserList.AsQueryable<User>();
        var query = new Func<User, bool>(u => u.Email == userName);
        fakeUserRepo.Setup(u => u.Find(query)).Returns(fakeUserListQueryable);
        var userService = new UserService(fakeUserRepo.Object);
        var menu = userService.GetMenuByUserName(userName);

        //Assert Something
    } 
```

问题是我无法让 _userRepo 的 find 方法返回我的虚假用户列表。

运行测试时，执行时出现“序列不包含元素”

```
_userRepo.Find(u => u.Email == userName).First<User>(); 
```

在 MethodToTest 中。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-17T13:47:32.330

我认为您在`Func<User, bool>`. 如您所知，如果`query`等于您调用的代码中的实际 Func，Moq 将设置 fakeUserRepo。但是，您正在设置代码中创建一个`new Func<User, bool>`。因此，当 Moq 检查相等性时，它是在两种不同的引用类型之间进行检查，因此不会设置期望值。

我会尝试这样的事情：

```
fakeUserRepo.Setup(u => u.Find(It.IsAny<Func<User, bool>>())).Returns(fakeUserListQueryable); 
```

看看这是否有效，然后重新添加用户名。

# c# - 为什么打印预览不显示任何内容？

> ID：13430738
> 
> 赞同：1
> 
> 时间：2012-11-17T12:50:07.690
> 
> 标签：c#, winforms

我遇到了打印预览对话框的问题。当我单击打印预览时，它不显示任何我打印预览页面的内容。我创建了一种设置预览打印输出的方法。我不知道我错过了哪里！

下面是我的代码：

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Windows.Forms;

namespace movieList
{
    public partial class Form1 : Form
    {
        public Form1()
        {
            InitializeComponent();
        }

    private void printDocument1_PrintPage(object sender, System.Drawing.Printing.PrintPageEventArgs e)
    {
        // setup output
        Font printFont = new Font("Arial", 14);
        //print heading
        e.Graphics.DrawString("Select Name", printFont, Brushes.Black, 100, 100);

    }

    private void exitToolStripMenuItem_Click(object sender, EventArgs e)
    {
        // terminate application
        this.Close();
    }

    private void clearAllCategoriesToolStripMenuItem_Click(object sender, EventArgs e)
    {
        // clear all the list of the category 
        // first we use dialog box for confirmation request
        DialogResult confirmDialog = MessageBox.Show("Do you want to delete all category list ?","Clear Category List",MessageBoxButtons.YesNo,MessageBoxIcon.Question);
        if (confirmDialog == DialogResult.Yes) 
        {
            // clearing the comboBox list
            categoryComboBox.Items.Clear();
        }
    }

    private void displayTheMovieCategoryCountToolStripMenuItem_Click(object sender, EventArgs e)
    {
        // count the number of category list
        int listCountInteger = categoryComboBox.Items.Count;
        MessageBox.Show("There are " + listCountInteger + " categories in the list", "ComboBox Count", MessageBoxButtons.OK, MessageBoxIcon.Information);
    }

    private void removeACategoryToolStripMenuItem_Click(object sender, EventArgs e)
    {
        // remove a category name from list
        // first checking if a category has selected
        if (categoryComboBox.SelectedIndex == -1)
        {
            MessageBox.Show("Please Select a Category", "Wrong Selection", MessageBoxButtons.OK, MessageBoxIcon.Error);
        }
        else 
        {
            categoryComboBox.Items.RemoveAt(categoryComboBox.SelectedIndex);
        }
    }

    private void addACategoryToolStripMenuItem_Click(object sender, EventArgs e)
    {
        // add a category to list 
        // first checking for no duplicate name

        int indexNumberInteger=0;
        bool foundNameBoolean=false;

        if (categoryComboBox.Text == string.Empty)
        {
            //empty string has been entered
            MessageBox.Show("Please Enter the new category Name !", "Empty Name", MessageBoxButtons.OK, MessageBoxIcon.Error);
        }
        else
        { 
            while(indexNumberInteger<categoryComboBox.Items.Count && !foundNameBoolean)
            {
                if (categoryComboBox.Text.ToUpper() == categoryComboBox.Items[indexNumberInteger++].ToString().ToUpper())
                {
                    MessageBox.Show("This Category is already in the list, Please write a new one !", "Duplicate Data", MessageBoxButtons.OK, MessageBoxIcon.Error);
                    foundNameBoolean = true;
                }

            }

            if (!foundNameBoolean)
            { 
                // add new name to category
                categoryComboBox.Items.Add(categoryComboBox.Text);
                categoryComboBox.Text = string.Empty;
                MessageBox.Show("Category has been updated !");
            }
        }

    }

    private void printTheCategoryListToolStripMenuItem_Click(object sender, EventArgs e)
    {
       // print preview
        printPreviewDialog1.Document = printDocument1;
        printPreviewDialog1.ShowDialog();
    }
} 
```

}

并预览图片：

![在此处输入图像描述](../Images/056a47f76e40bba7fdb23baa994c05cb.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-17T13:20:21.837

确保您的 PrintPage 事件已连接。

```
public Form1() {
  InitializeComponent();
  printDocument1.PrintPage += new PrintPageEventHandler(printDocument1_PrintPage);
} 
```

# c++ - 假设类模板参数

> ID：13430741
> 
> 赞同：0
> 
> 时间：2012-11-17T12:50:26.377
> 
> 标签：c++, templates

我有一个 Kd-Tree 实现，它被模板化为接受任何大于 0 的维度和任何浮点类型（浮点、双精度等）。像这样的东西：

```
template <typename real, size_t dimensions> class KdTree
{
    // stuff
} 
```

而且我有一个附带的“点”类型，它具有完全相同的模板布局。然而，这种点类型*需要从 kd-tree 类外部访问*。现在，每次我需要在我的 kd-tree 代码中创建临时点时，我都需要显式地 go `KdPoint<real, dimensions>`，这很烦人，使我的行很长，并且对代码没有任何价值。

有什么办法可以告诉编译器隐式地假设任何值`real`并`dimensions`传递给点的类？以某种方式将两个模板列表链接在一起。这样我就可以输入`KdPoint`，编译器将根据类接收到的模板参数直接知道要放什么。

否则我需要使用宏将后者显式扩展为前者，这很糟糕。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-17T12:54:04.210

您可以在`KdTree`类中添加 typedef：

```
template <typename real, size_t dimensions> class KdTree
{
  typedef KdPoint<real, dimensions> KdPoint_;
  // stuff
}; 
```

并在`KdPoint_`内部使用。如果您希望点类型可从外部访问，请提供`typedef`公共访问权限，以及一个不以 结尾的名称`_`：

```
template <typename real, size_t dimensions> class KdTree
{
 public:
  typedef KdPoint<real, dimensions> KdPointType;
  // stuff
}; 
```

然后可以像这样访问它：

```
KdTree<float, 5>::KdPointType 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-17T12:54:26.517

```
template <typename real, size_t dimensions> class KdTree
{
    public:
    typedef KdPoint<real, dimensions> point_type;
} 
```

# java - SwipeyTabsSampleActivity 怎么没有产生编译错误？

> ID：13430744
> 
> 赞同：0
> 
> 时间：2012-11-17T12:50:48.060
> 
> 标签：java, android

我试图从[android-playground 项目中开发的 SwipeyTabsSampleActivity 制作另一个样本](http://code.google.com/p/android-playground/)

这是示例代码，我的问题是为什么在方法 getTab->view.setOnClickListener 中引用两个变量“mViewPager”和“position”时没有出现编译错误

这是完整的示例源代码。我首先尝试了示例代码，它编译并运行良好，当我尝试根据我的需要自定义示例时，我不知道如何。一切都很顺利（编译和运行），除了当我打算设置 onClickListener 并引用这两个变量时，我得到以下两个编译错误 1- 无法对非静态字段 mViewPager 进行静态引用 2- 无法引用非以不同方法定义的内部类中的最终变量位置

我认为这两个错误也应该出现在示例代码中，不仅是我的代码，而且我不知道为什么？

```
/*
 * Copyright 2011 Peter Kuterna
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */

package net.peterkuterna.android.apps.swipeytabs;

import android.content.Context;
import android.os.Bundle;
import android.support.v4.app.Fragment;
import android.support.v4.app.FragmentActivity;
import android.support.v4.app.FragmentManager;
import android.support.v4.app.FragmentPagerAdapter;
import android.support.v4.view.ViewPager;
import android.view.LayoutInflater;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.TextView;

public class SwipeyTabsSampleActivity extends FragmentActivity {

    private static final String [] TITLES = {
        "CATEGORIES",
        "FEATURED",
        "TOP PAID",
        "TOP FREE",
        "TOP GROSSING",
        "TOP NEW PAID",
        "TOP NEW FREE",
        "TRENDING",
    };

    private SwipeyTabs mTabs;
    private ViewPager mViewPager;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        setContentView(R.layout.activity_swipeytab);

        mViewPager = (ViewPager) findViewById(R.id.viewpager);
        mTabs = (SwipeyTabs) findViewById(R.id.swipeytabs);

        SwipeyTabsPagerAdapter adapter = new SwipeyTabsPagerAdapter(this,
                getSupportFragmentManager());
        mViewPager.setAdapter(adapter);
        mTabs.setAdapter(adapter);
        mViewPager.setOnPageChangeListener(mTabs);
        mViewPager.setCurrentItem(0);
    }

    private class SwipeyTabsPagerAdapter extends FragmentPagerAdapter implements
            SwipeyTabsAdapter {

        private final Context mContext;

        public SwipeyTabsPagerAdapter(Context context, FragmentManager fm) {
            super(fm);

            this.mContext = context;
        }

        @Override
        public Fragment getItem(int position) {
            return SwipeyTabFragment.newInstance(TITLES[position]);
        }

        @Override
        public int getCount() {
            return TITLES.length;
        }

        public TextView getTab(final int position, SwipeyTabs root) {
            TextView view = (TextView) LayoutInflater.from(mContext).inflate(
                    R.layout.swipey_tab_indicator, root, false);
            view.setText(TITLES[position]);
            view.setOnClickListener(new OnClickListener() {
                public void onClick(View v) {
                    mViewPager.setCurrentItem(position);
                }
            });

            return view;
        }

    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-17T14:01:36.367

`getTab()`是 的非静态内部类的实例方法`SwipeyTabsSampleActivity`，因此它具有对其外部类实例的隐式引用，并且可以访问此实例的所有字段和方法，因此可以访问`mViewPager`. 是的`OnclickListener`内部类的匿名内部类`SwipeyTabsSampleActivity`，因此也可以访问其两个外部类实例的所有字段和方法。

如果内部类是静态的，它将无法编译。如果`mViewPager`是方法的非最终局部变量`getTab()`，它也不会编译。

# java - 如何使用TaskExecutorService在java中丢弃重叠任务

> ID：13430751
> 
> 赞同：0
> 
> 时间：2012-11-17T12:52:03.563
> 
> 标签：java, multithreading, scheduled-tasks

我有一个运行 2 个独立的独立 java 轮询工具的场景，它将以 5 分钟的固定间隔运行一些特定的任务。

我的场景是（对于每个轮询服务）：

1）如果任务 T0 需要超过 5 分钟才能运行，同时 5 分钟后 T5 来并尝试执行，我会丢弃它，而不是等待或重新启动（丢弃重叠任务）

2) 下一个任务将在 T10 正常开始。

我的问题是使用 Quartz 会过分吗？如果我使用 TaskExecutorService，我如何检查时间 X，一旦任务在时间 X-5 开始，我应该丢弃它。

注意：1）我必须使用JDK <= 6.0

2）我没有在像spring这样的任何框架下使用。

3）它是一个桌面工具，所以我需要启动它并且它会运行..

任何代码片段或方向表示赞赏。

更新以下评论的答案：

是的，它在单个工具中运行的任务之间。工具不同，工具之间没有联系，它们将单独运行，没有关系。

单个工具以 5 分钟的间隔运行相同的任务（就像每个文件分钟一样，它会在目录中查找文件，如果找到，则解析这些文件并使用它们）。

例如，如果任务当前从第一分钟开始运行（可能需要任何时间），则在 5 分钟后，该工具再次启动该任务以查找新文件，但这次它不会解析/使用它，因为前一个任务已经在运行处理一些文件。所以新任务将不会执行，系统将转储它（没有队列/没有等待/没有顺序作业）。

另一个新任务将再次运行 5 倍时间，如果没有其他任务在运行，它将解析和处理这些文件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T20:10:50.243

在看到评论中问题的回复后，您可以使用[Executors](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/Executors.html)获取[ScheduledExecutorService](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/ScheduledExecutorService.html)。然后，您可以使用方法[scheduleWithFixedDelay](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/ScheduledExecutorService.html#scheduleWithFixedDelay%28java.lang.Runnable,%20long,%20long,%20java.util.concurrent.TimeUnit%29)来提交您的任务。此方法在运行之间有延迟重新运行任务。对您而言，好处是延迟计数在当前运行完成后开始。这将在不使用布尔变量或 ReentrantLock 的情况下为您提供所需的内容，因为您不会同时运行两个任务。您只需要小心捕获异常，因为异常会导致任务的后续运行被取消。

所以让我们假设你有一个 MyTask 实现 runnable

```
public class MyTask implements Runnable{

  public void run() {
     try {
           //your task code here
     } catch (...) {
        //deal with the exceptions here               
     }
  }

} 
```

假设您将从 main 方法运行，您现在可以使用该类来安排重复发生的任务：

```
public class TaskRunner{

private static final ScheduledExecutorService taskScheduler = Executors.newScheduledThreadPool(1);

  public static void main(String[] args) {
    taskScheduler.scheduleWithFixedDelay(new MyTask(),0,5,TimeUnit.MINUTES);  
  }

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-17T14:17:58.320

解决方案很简单：使用 ScheduledThreadPoolExecutor.scheduleAtFixedRate(task, 5, min)。声明一个通用的布尔变量`isRunning=false`。每个任务在开始时都会检查这个变量，如果已经设置，则退出，否则将其设置为 true 并运行。最后，将其设置为 false。检查和设置应在同步块中完成。

# ruby-on-rails - ruby on rails 手动卸载

> ID：13430752
> 
> 赞同：0
> 
> 时间：2012-11-17T12:52:08.103
> 
> 标签：ruby-on-rails, ruby, uninstallation

我在 ubunty 中卸载 ruby​​ 时遇到了很大的问题。我正在关注[https://stackoverflow.com/a/9618017/1796624](https://stackoverflow.com/a/9618017/1796624)当我尝试

```
aptitude purge <package name> 
```

我得到：

```
E: I wasn't able to locate a file for the ttf-mscorefonts-installer package. This might mean you need to manually fix this package.
E: I wasn't able to locate a file for the ttf-mscorefonts-installer package. This might mean you need to manually fix this package.
E: Internal error: couldn't generate list of packages to download 
```

如何完全删除 rails 和 ruby​​，我在哪里可以找到 ttf-mscorefonts-installer 包，现在手动修复它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-17T13:19:18.373

ttf-mscorefonts-installer - 是一个安装微软TrueType字体的包，这个包对rails没有影响。
您的 apt-get 实用程序存在问题。

# c# - EntityKey 属性只能在属性的当前值为 null 时设置

> ID：13430756
> 
> 赞同：0
> 
> 时间：2012-11-17T12:52:45.097
> 
> 标签：c#, .net, linq, entity-framework

我有以下情况，如何在不出现 System.InvalidOperationException 错误的情况下执行此操作。

SomeClass.cs：

```
using (var eo = new MyEntities())
{
   targetRole = (from p in eo.UserRoles 
                 where p.Code == 2 
                 select p).FirstOrDefault();
}

var user = new User
{
   UserName = userName,
   Password = txtPassword.Text.Trim(),
   UserRole = targetRole
};

AnotherClass.AddObject(user); 
```

另一个类.cs

```
public static void AddObject(object poco)
{
    using (var eo = new MyEntities())
    {
        eo.AddObject("Users", poco);
        eo.SaveChanges();  //<--- Exceptions Thrown.
    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-17T13:16:05.837

我自己找到了答案，我需要将 targetRole 对象附加到当前上下文：

另一个类.cs：

```
public static void AddObject(object poco)
{
   using (var eo = new MyEntities())
   {
       eo.UserRoles.Attach(targetRole); //<-- the magic
       eo.AddObject("Users", poco);
       eo.SaveChanges();  //<--- it works like a charm. Hoorah
   }
} 
```

# ruby - Ruby 语法 ":attr =>" 与 "attr:"？

> ID：13430762
> 
> 赞同：-3
> 
> 时间：2012-11-17T12:54:06.663
> 
> 标签：ruby, ruby-1.9

此代码是否等效

```
class Product < ActiveRecord::Base
  validates :legacy_code, :format => { :with => /\A[a-zA-Z]+\z/,
    :message => "Only letters allowed" }
end 
```

到这段代码：

```
class Product < ActiveRecord::Base
  validates :legacy_code, format: { with:/\A[a-zA-Z]+\z/,
    message:"Only letters allowed" }
end 
```

??

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-17T12:57:02.750

是的，这些代码在 ruby​​ 1.9 中是等效的。
`{:key => vales}`- 是 ruby​​ 1.8 中的哈希语法
`{key: value}`- 是新的哈希语法，它是在 ruby​​ 1.9 中添加的

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-17T13:01:26.623

是的。只要您不使用 Ruby 1.8，就可以使用`{a: 'b'}`语法。它完全`{:a => 'b'}`可以做，只是更短。

在 IRB 中运行时，两个示例显示相同的结果（在 Ruby 1.9 中）。

```
$ irb1.9
irb(main):001:0> {:a => 'b'}
=> {:a=>"b"}
irb(main):002:0> {a: 'b'}
=> {:a=>"b"}
irb(main):003:0> 
```

但是在 Ruby 1.8 中运行时，`{a: 'b'}`它不起作用。

```
$ irb1.8
irb(main):001:0> {:a => 'b'}
=> {:a=>"b"}
irb(main):002:0> {a: 'b'}
SyntaxError: compile error
(irb):2: odd number list for Hash
{a: 'b'}
   ^
(irb):2: syntax error, unexpected ':', expecting '}'
{a: 'b'}
   ^
(irb):2: syntax error, unexpected '}', expecting $end
        from (irb):2
irb(main):003:0> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-17T12:57:27.310

如果您使用的是 ruby​​ 1.9，那么它是有效的并且是等效的。

# android - 刷 achartengine 片段有点滞后

> ID：13430764
> 
> 赞同：1
> 
> 时间：2012-11-17T12:54:22.673
> 
> 标签：android, android-viewpager, fragment, achartengine

我在带有视图寻呼机的片段中使用 achartengine。它工作得很好，但是如果我在我的系列中投入很多价值（100~200），那么滑动会有点慢。这很奇怪，因为当我触摸页面标题时，片段变化非常快，我只有在慢刷时才会出现这个问题。我应该如何解决这个问题？

附加信息： - 只有一个系列的折线图 - y 值从 0 到 100 - x 值 currentTimeInMillis

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-17T13:05:59.187

我们最近实现的一个解决方案是使用图表引擎将视图保存为位图并显示位图，仅在值更改时重新计算图表。

显示位图比显示图表便宜得多，您的滑动不会滞后。

要做到这一点，只需按照[这个线程](https://stackoverflow.com/questions/3107527/android-save-view-to-jpg-or-png)。

# java - 与 Java 中复合语句的复制引用同步

> ID：13430765
> 
> 赞同：0
> 
> 时间：2012-11-17T12:54:22.573
> 
> 标签：java, synchronization, thread-safety

假设我们有一个对象，其方法/字段在“this”上同步。这个问题实际上是关于“这个”的，因为我认为“这个”参考意味着什么很难。

所以我们的对象是：

```
class A {
    private Field a;
    private Field b;

    public synchronized void doSomething() {
       //something with a
    }

    public synchronized void somethingElse() {
       //do something as with b
    }

} 
```

然后我们有另一个对象或方法，它接受 A 对象并通过 doSomething 和 somethingElse 方法在 a 和 b 上工作。所以我需要在处理 A 对象时保持状态一致，因此我同步。假设那些 A 对象是 Map 的值。然后我会迭代价值观并做我所做的事情。所以问题是，以下列方式执行它是否是线程安全的：

```
 for(A aObject : map.values()) {
     synchronized(aObject) {
          aObject.doSomething(); 
          aObject.somethingElse();
     }
 } 
```

如果“this”引用与 aObject 引用相同，我想我不应该遇到麻烦。但是，如果我这样做怎么办：

```
for(A aObject : map.values()) {
      A anotherReference = aObject;

      synchronized(anotherReference) {
         anotherReference.doSomething(); 
         anotherReference.somethingElse();
      }

} 
```

它仍然是线程安全的吗？我的意思是我可以在锁定引用的本地副本上同步吗？

注意：这是对我需要在代码中执行的操作的过度简化。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-17T13:25:14.087

同步监视器属于被引用的对象，而不是引用，所以你的两个`for`循环是等价的，它们都在同一个对象上同步。

现在是同步方法

```
public synchronized void foo() {
  // do stuff
} 
```

完全等同于

```
public void foo() {
  synchronized(this) {
    // do stuff
  }
} 
```

所以在循环中

```
for(A aObject : map.values()) {
    synchronized(aObject) {
         aObject.doSomething(); 
         aObject.somethingElse();
    }
} 
```

`doSomething()`同步块正在锁定与和`doSomethingElse()`方法使用自己的监视器相同的监视器。您从同步块中获得的好处是，没有其他线程可以在这两个调用之间潜入并在同一个 A 实例上调用这些方法中的任何一个。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-17T13:32:47.583

你似乎对参考是什么感到困惑，所以我会去阅读它们。当您使用同步块时，您不会在引用本身上进行同步，而是在引用所引用的对象实例上进行同步。

例如：

```
Object a = new Object();
Object b = a;

synchronized(a) { ... }
synchronized(b) { ... } 
```

这两个同步块在*同一个 Object 实例*上同步，因为`a`并`b`引用同一个 Object 实例。

此后，同步方法与在参考上同步相同`this`。

例如：

公共类 A { public synchronized void doStomething() { ... } public void doSomethingElse() { synchronized(this) { ... } } }

*这两种方法都在同一个 Object 实例*（当前实例）上同步，使用称为`this`. 您可以将任一示例重写为另一个示例，它们是等效的。

所以，回到你原来的例子，我希望你会明白，当你*通过引用在外部*同步一个 Object 实例时（作为我的第一个例子），它做的事情与一个在*内部*同步的 Object本身是一样的。

总而言之，您的最后一个示例是处理同步集合时的常见习惯用法，因为它使调用者能够确保相对于集合以原子方式执行 2 个操作。

例如：

```
// this will result in a List where all methods are internally synchronized
List<Object> syncList = Collections.synchronizedList(new ArrayList<Object>());

// i can safely perform an atomic operation on the List using this pattern
synchronized(syncList) {
  if(syncList.isEmpty()) { // <- synchronized method call
    syncList.add(...); // <- synchronized method call
  }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-17T13:07:02.520

在 Java 中，我们有两个基本的同步习惯用法：**同步方法**和**同步语句**。

当您使用第一个习语（同步方法）时，如下代码所示：

```
public class SynchronizedCounter {
    private int c = 0;

    public synchronized void increment() {
        c++;
    }

    public synchronized void decrement() {
        c--;
    }

    public synchronized int value() {
        return c;
    }
} 
```

你有两个主要影响：

1) 对同一对象的同步方法的两次调用不可能交错。当一个线程正在为一个对象执行同步方法时，所有其他为同一对象调用同步方法的线程都会阻塞（暂停执行），直到第一个线程处理完该对象。

2）当一个同步方法退出时，它会自动建立一个happens-before关系与任何后续对同一对象的同步方法的调用。这保证了对象状态的更改对所有线程都是可见的。

创建同步代码的另一种方法是使用**同步语句**。与同步方法不同，同步语句必须指定提供内在锁的对象：

```
public void addName(String name) {
    synchronized(this) {
        lastName = name;
        nameCount++;
    }
    nameList.add(name);
} 
```

在您的代码中，您同时使用了这两种习语。然后，您的第一个 for 循环不需要*synchronized(aObject)*，因为您的类方法已经是同步方法。

来源：[http ://docs.oracle.com/javase/tutorial/essential/concurrency/syncmeth.html](http://docs.oracle.com/javase/tutorial/essential/concurrency/syncmeth.html)

但是假设你的类方法没有同步。您的第二个代码示例：

```
for(A aObject : map.values()) {
      A anotherReference = aObject;

      synchronized(anotherReference) {
         anotherReference.doSomething(); 
         anotherReference.somethingElse();
      }

} 
```

仍然有效，因为在 Java 中，每个对象都有一个与之关联的内在锁。当您调用 synchronized(Object o) 时，您将获得与 Object: anotherReference 关联的锁，在您的情况下是 aObject。

让我们考虑两个线程：T1 和 T2。如果 T1 在 T2 之前调用这个 for 循环，它会获取与 aObject 关联的内在锁，并且 T2 将无法执行相同操作，直到 T1 结束这两个方法：doSomenthing() 和 somethinElse()。

# actionscript-3 - Actionscript 3 bitmapdata.draw 使用矩阵画笔

> ID：13430767
> 
> 赞同：1
> 
> 时间：2012-11-17T12:54:31.950
> 
> 标签：actionscript-3, actionscript, matrix, draw, bitmapdata

我正在编写一个使用形状画笔通过矩阵函数进行绘制的绘图程序。除了一点都不顺畅之外，一切都运行良好。如果鼠标高速移动，画中会有空隙。

我到处寻找，但找不到任何解决方案。

代码基本上是这样的：

```
 //Press mouse within container. Uses Matrix to draw instances of the brush.
    private function handleMouseDown_drawContainer(e:MouseEvent):void
    {   
            _matrix.identity();
            _matrix.translate(mouseX - 10, mouseY - 30);
            _layout.bitmapData.draw(_layout.brush, _matrix);

            _layout.drawContainer.addEventListener(MouseEvent.MOUSE_MOVE, handleMouseMove_drawContainer);
            _layout.drawContainer.addEventListener(MouseEvent.MOUSE_UP, handleMouseUp_drawContainer)

    }

    //Move mouse within container. Uses Matrix to draw instances of the brush.
    private function handleMouseMove_drawContainer(e:MouseEvent):void
    {
            _matrix.identity();
            _matrix.translate(mouseX - 10, mouseY - 30);
            _layout.bitmapData.draw(_layout.brush, _matrix);
    } 
```

如果有人能帮我弄清楚如何平滑绘图，我将永远感激不尽！=p

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-17T13:49:51.453

您可能需要在鼠标位置之间进行某种插值......当然有很多方法，我将描述一种非常容易实现但有点难以微调的方法。基本上不是在每个鼠标位置绘制，而是使用缓动方程跟随鼠标有一些延迟......这样描述的线会更平滑一些，并且会在每个鼠标位置之间绘制几次。
所以不要做（伪代码）：

```
onMouseMove {
  draw(mouseX, mouseY);
} 
```

你做这样的事情：

```
x = 0;
y = 0;
onEnterFrame {
  x += (mouseX - x) * 0.2;
  y += (mouseY - y) * 0.2;
  draw(x, y);
} 
```

尽管您可能真正需要的是一种限制点之间最大距离的方法，但是如果鼠标在一帧中移动更多，您可以在两个位置之间插入点并根据需要绘制尽可能多的次数。
或者，如果您正在寻找更平滑的线条（避免尖角），您可能还需要使用贝塞尔曲线来控制生成的线条。
无论如何，这完全取决于您要寻找的图纸类型。

# wso2 - WSO2 Carbon 4.x JNDI Tomcat

> ID：13430768
> 
> 赞同：2
> 
> 时间：2012-11-17T12:54:32.683
> 
> 标签：wso2, jndi, wso2carbon

基于 Carbon 4.x 平台的 WSO2 Registry 4.5.x 允许部署 WAR。对于资源配置，我想使用 JNDI。

如此处所述，我尝试配置 JNDI 资源： http: [//kishanthan.wordpress.com/2012/05/31/how-to-register-jndi-resources-for-webapps-in-wso2-application-server/](http://kishanthan.wordpress.com/2012/05/31/how-to-register-jndi-resources-for-webapps-in-wso2-application-server/)

1) WEB-INF/web.xml

```
<resource-ref>
    <res-ref-name>url/ZoneConfiguration</res-ref-name>
    <res-type>java.net.URL</res-type>
    <res-auth>Container</res-auth>
</resource-ref> 
```

2) META-INF/context.xml

```
<Context debug="5" reloadable="true" crossContext="true">
     <ResourceLink name="url/ZoneConfiguration" global="url/ZoneConfiguration" type="java.net.URL"/>    
</Context> 
```

3) $CARBON_HOME/repository/conf/tomcat/catalina-server.xml：

```
 <GlobalNamingResources>
     <Resource name="url/ZoneConfiguration" factory="org.jee.jndi.URLResourceFactory" 
        type="java.net.URL" url="file:///temp/local.zone.properties"/>      
  </GlobalNamingResources> 
```

（关于工厂：见这里[http://tomcat.apache.org/tomcat-7.0-doc/jndi-resources-howto.html#Adding_Custom_Resource_Factories](http://tomcat.apache.org/tomcat-7.0-doc/jndi-resources-howto.html#Adding_Custom_Resource_Factories)）带有 URLResourceFactory 的库部署在 $CARBON_HOME/lib/endorsed

此配置适用于 Tomcat 7.x，但不适用于 WSO2 Tomcat。我倾向于提出问题。还是我缺少 WSO2 特定的东西？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T10:13:37.207

WSO2 Registry 4.5.X 不支持开箱即用托管 webapps，除非您在 WSO2 Registry 之上安装了 webapp 管理功能。

您可以从这篇文章 [1] 中找到与 JNDI 资源配置相关的更多信息。该帖子中还包含一个示例，该示例演示了定义为具有自定义资源工厂实现的全局命名资源的配置和访问资源。

[1] [http://kishanthan.wordpress.com/2012/05/31/how-to-register-jndi-resources-for-webapps-in-wso2-application-server/](http://kishanthan.wordpress.com/2012/05/31/how-to-register-jndi-resources-for-webapps-in-wso2-application-server/)

# python - 获取 Github 个人文件贡献者

> ID：13430769
> 
> 赞同：12
> 
> 时间：2012-11-17T12:55:06.440
> 
> 标签：python, github, python-sphinx, github-api

我计划为 Sphinx 文档系统插件构建一个插件，该插件显示为文档页面做出贡献的人员的姓名和 Github 个人资料链接。

Github 内部有这个功能

![贡献者](../Images/ebf0e12985aeb5e2d7e8415a4f6c17ed.png)

*   是否可以通过 Github API 获取文件贡献者的 Github 个人资料链接？请注意，提交者的电子邮件是不够的，必须能够将它们映射到 Github 用户配置文件链接。另请注意，我不希望所有存储库贡献者 - 只是单个文件贡献者。

*   如果这不可能，那么您可以建议使用哪种替代方法（私有 API、抓取）从 Github 中提取此信息？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-10-05T16:57:01.787

首先，您可以[显示给定文件的提交](https://stackoverflow.com/questions/15831313/is-it-possible-to-get-commits-history-for-one-file-in-github-api)：

```
https://api.github.com/repos/:owner/:repo/commits?path=PATH_TO_FILE 
```

例如：

[https://api.github.com/repos/git/git/commits?path=README](https://api.github.com/repos/git/git/commits?path=README)

其次，在作者部分中，该 JSON 响应确实包含一个名为 ' ' 的 url 文件`html_url`到 GitHub 配置文件：

```
"author": {
      "login": "gitster",
      "id": 54884,
      "avatar_url": "https://0.gravatar.com/avatar/750680c9dcc7d0be3ca83464a0da49d8?d=https%3A%2F%2Fidenticons.github.com%2Ff8e73a1fe6b3a5565851969c2cb234a7.png",
      "gravatar_id": "750680c9dcc7d0be3ca83464a0da49d8",
      "url": "https://api.github.com/users/gitster",   
      "html_url": "https://github.com/gitster",       <==========
      "followers_url": "https://api.github.com/users/gitster/followers",
      "following_url": "https://api.github.com/users/gitster/following{/other_user}",
      "gists_url": "https://api.github.com/users/gitster/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/gitster/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/gitster/subscriptions",
      "organizations_url": "https://api.github.com/users/gitster/orgs",
      "repos_url": "https://api.github.com/users/gitster/repos",
      "events_url": "https://api.github.com/users/gitster/events{/privacy}",
      "received_events_url": "https://api.github.com/users/gitster/received_events",
      "type": "User"
    }, 
```

所以你不需要在这里抓取任何网页。

* * *

这是一个[非常粗略的 jsfiddle](http://jsfiddle.net/sHm3k/10/)来说明这一点，基于 javascript 提取：

```
var url = "https://api.github.com/repos/git/git/commits?path=" + filename
$.getJSON(url, function(data) {
    var twitterList = $("<ul />");
    $.each(data, function(index, item) {
        if(item.author) {
            $("<li />", {
                "text": item.author.html_url
            }).appendTo(twitterList);
        }
    }); 
```

![从 GiHub 文件中获取贡献者](../Images/0be61879a68086387f0905e55d0174bb.png)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2018-12-28T01:59:53.167

使用[GraphQL API v4](https://developer.github.com/v4/)，您可以使用：

```
{
  repository(owner: "torvalds", name: "linux") {
    object(expression: "master") {
      ... on Commit {
        history(first: 100, path: "MAINTAINERS") {
          nodes {
            author {
              email
              name
              user {
                email
                name
                avatarUrl
                login
                url
              }
            }
          }
        }
      }
    }
  }
} 
```

[在资源管理器中尝试](https://developer.github.com/v4/explorer/?query=%7B%0A%20%20repository(owner%3A%20%22torvalds%22%2C%20name%3A%20%22linux%22)%20%7B%0A%20%20%20%20object(expression%3A%20%22master%22)%20%7B%0A%20%20%20%20%20%20...%20on%20Commit%20%7B%0A%20%20%20%20%20%20%20%20history(first%3A%20100%2C%20path%3A%20%22MAINTAINERS%22)%20%7B%0A%20%20%20%20%20%20%20%20%20%20nodes%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20author%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20email%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20name%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20user%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20email%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20name%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20avatarUrl%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20login%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20url%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%20%20%7D%0A%7D%0A)

使用[curl](/questions/tagged/curl "显示标记为“卷曲”的问题") & [jq](/questions/tagged/jq "显示标记为“jq”的问题")获得此文件的前 100 个贡献者的列表，没有重复：

```
TOKEN=<YOUR_TOKEN>
OWNER=torvalds
REPO=linux
BRANCH=master
FILEPATH=MAINTAINERS
curl -s -H "Authorization: token $TOKEN" \
     -H  "Content-Type:application/json" \
     -d '{ 
          "query": "{repository(owner: \"'"$OWNER"'\", name: \"'"$REPO"'\") {object(expression: \"'"$BRANCH"'\") { ... on Commit { history(first: 100, path: \"'"$FILEPATH"'\") { nodes { author { email name user { email name avatarUrl login url}}}}}}}}"
      }' https://api.github.com/graphql | \
      jq '[.data.repository.object.history.nodes[].author| {name,email}]|unique' 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-17T13:13:35.453

为什么你需要为此使用 Github API？您可以克隆包并使用`git log`：

`git log --format=format:%an path/to/file ver1..ver2 |sort |uniq`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-01-30T02:54:18.357

除非不需要直接与 GITHUB API 交互，否则可以通过将 repo 克隆下来，然后进入克隆目录，然后使用 shortlog 命令从 github 日志文件中获取列表来获取贡献者列表

```
import os 
import commands 

cmd = "git shortlog -s -n"

os.chdir("C:\Users\DhruvOhri\Documents\COMP 6411\pygithub3-0.3")
os.system("git clone https://github.com/poise/python.git")
os.chdir("/home/d/d_ohri/Desktop/python")
output = commands.getoutput(cmd) 
print(output)
raw_input("press enter to continue") 
```

如果想要使用 GITHUB API，还有另一种列出贡献者的方法，我们可以使用 pytgithub3 包装器与 GITHUB API 交互并使用 list_contributors 获取贡献者列表，如下所示：

```
from pytgithub3.services.repo import Repo
r = Repo()
r.lis_contributors(user='userid/author',repo='repo name')
for page in r:
    for result in page:
          print result 
```

# iphone - 目标c中的rpn是什么意思？

> ID：13430773
> 
> 赞同：-1
> 
> 时间：2012-11-17T12:55:36.573
> 
> 标签：iphone, objective-c, ios

我需要在 iPhone 上开发一个科学计算器，我读过 RPN 很容易开发计算器。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-17T12:59:16.043

您正在寻找[Reverse Polish Notation](https://en.wikipedia.org/wiki/Reverse_polish_notation)。不过，这只是编写数学表达式的另一种方式 - 如果您还不知道自己在做什么，它不会神奇地让您能够开发计算器！

# haskell - Haskell中的Gmail TLS hanshake失败

> ID：13430780
> 
> 赞同：4
> 
> 时间：2012-11-17T12:56:26.263
> 
> 标签：haskell, gmail, ssl, handshake

我正在尝试编写一个小脚本来通过 gmail 发送电子邮件。
我可以连接到 gmail，但是当我尝试 hanshake 时它失败了。
有什么建议可以握手吗？

这是代码：

```
import Network.Socket
import Network
import Network.TLS
import Network.TLS.Extra

import Crypto.Random
import Data.CertificateStore -- to remove
import System.Certificate.X509 --to use I think

import System.IO
import Text.Printf

import Control.Monad (forever)
import qualified Data.ByteString.Char8 as B

main :: IO ()
main = emailGmail2

tListen :: Context -> IO ()
tListen ctx =
    forever $ recvData ctx >>= B.putStrLn

cWrite :: Handle -> String -> IO ()
cWrite h s  = do
    hPrintf h "%s\r\n" s
    printf    "> %s\n" s

cListen :: Handle -> IO () 
cListen h =
    forever $ hGetLine h >>= putStrLn

emailGmail2 = do
    let
        host = "smtp.gmail.com"
        port = 587
        params = defaultParamsClient
    g <- newGenIO :: IO SystemRandom
    h <- connectTo host (PortNumber (fromIntegral port))
    hSetBuffering h LineBuffering
    cWrite h "EHLO"
    cWrite h "STARTTLS"
    --cListen h
    con <- contextNewOnHandle h params g
    handshake con
    tListen con 
```

这是错误：

> HandshakeFailed (Error_Packet_Parsing "读取失败：无效标头类型：50\nFrom:\theader\n\n")

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-29T20:58:13.513

此错误部分与处理 SMTP 协议有关。查看 RFC for Secure SMTP over TLS [RFC 2487](https://www.rfc-editor.org/rfc/rfc2487)有一个示例客户端-服务器对话。

```
S: <waits for connection on TCP port 25>
C: <opens connection>
S: 220 mail.imc.org SMTP service ready
C: EHLO mail.ietf.org
S: 250-mail.imc.org offers a warm hug of welcome
S: 250 STARTTLS
C: STARTTLS
S: 220 Go ahead
C: <starts TLS negotiation>
C & S: <negotiate a TLS session>
C & S: <check result of negotiation>
C: <continues by sending an SMTP command>
. . . 
```

在您的代码中，您发送 EHLO 和 STARTTLS，然后立即开始握手协商。我相信正在发生的事情是服务器仍在发送上面的一些 250 和 220 代码，并且 TLS 库正试图将这些解释为导致问题的 TLS 消息。

事实上，如果我打开另一个终端并使用 netcat 监听端口 587 并更改程序以连接到本地主机，如果我回复“250 STARTTLS”，我会得到同样的错误

改变这个让程序为我工作：

```
import Network.Socket
import Network
import Network.TLS
import Network.TLS.Extra

import Crypto.Random
import qualified Crypto.Random.AESCtr as RNG
import System.IO
import Text.Printf

import Control.Monad (when)
import Data.List (isPrefixOf)

ciphers :: [Cipher]
ciphers =
        [ cipher_AES128_SHA1
        , cipher_AES256_SHA1
        , cipher_RC4_128_MD5
        , cipher_RC4_128_SHA1
        ]

main :: IO ()
main = emailGmail2

cWrite :: Handle -> String -> IO ()
cWrite h s  = do
    hPrintf h "%s\r\n" s
    printf    "> %s\n" s

cWaitFor :: Handle -> String -> IO ()
cWaitFor h str = do
    ln <- hGetLine h
    putStrLn ln
    when (not $ str `isPrefixOf` ln) (cWaitFor h str)

emailGmail2 = do
    let
        host = "smtp.gmail.com"
        port = 587
        params = defaultParamsClient{pCiphers = ciphers}
    g <- RNG.makeSystem
    h <- connectTo host (PortNumber (fromIntegral port))
    hSetBuffering h LineBuffering
    cWrite h "EHLO"
    cWaitFor h "250-STARTTLS"
    cWrite h "STARTTLS"
    cWaitFor h "220"
    con <- contextNewOnHandle h params g
    handshake con
    bye con 
```

另请注意，我需要添加一些密码，`Network.TLS.Extras`否则会出现非法参数错误。我找到了代码，并在 Github[页面](https://github.com/vincenthz/hs-tls/blob/master/debug/src/SimpleClient.hs)上添加了来自 Vincent 的测试的日志记录。

另一个注意事项：如果您遇到更多问题，我应该指出我使用命令行程序 gnutls-cli 和 ssldump 来调试上面提到的密码问题。

# javascript - node.js 在 res.writeHeads() 函数中使用变量

> ID：13430782
> 
> 赞同：1
> 
> 时间：2012-11-17T12:57:04.230
> 
> 标签：javascript, node.js, variables, object, hyperlink

嘿嘿。我有以下问题：

我用这个

```
res.writeHead(200, {
    "Content-Length": template["stylecss"].length,
    "Connection": "Close",
    "X-XSS-Protection": "1; mode=block",
    "Server": servername,
    "Content-Type": "text/css"
}); 
```

将响应标头写入客户端。

但是现在，我想更改上面的代码以提供预定义的标头。像这样的东西：

var defresheads = { "X-Frame-Options": "deny", "X-Powered-By": servername };

```
res.writeHead(200, {
    defresheads,
    "Content-Length": template["stylecss"].length,
    "Connection": "Close",
    "X-XSS-Protection": "1; mode=block",
    "Server": servername,
    "Content-Type": "text/css"
}); 
```

现在，当我运行脚本时，它会显示以下内容：

```
/home/dontrm/dontrm.js:47
            defresheads,
                       ^
SyntaxError: Unexpected token , 
```

还有另一种方法可以做到这一点吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-17T13:01:27.823

使用辅助函数来连接您的标头对象，例如

```
function jsonConcat(o1, o2) {
    for (var key in o2) {
        o1[key] = o2[key];
    }
    return o1;
} 
```

然后您可以按如下方式使用它：

```
var defresheads = { "X-Frame-Options": "deny", "X-Powered-By": servername };
res.writeHead(200, jsonConcat(defresheads, {
    "Content-Length": template["stylecss"].length,
    "Connection": "Close",
    "X-XSS-Protection": "1; mode=block",
    "Server": servername,
    "Content-Type": "text/css"
})); 
```

# android - 骰子游戏 FARKLE 的 AI

> ID：13430794
> 
> 赞同：0
> 
> 时间：2012-11-17T12:58:26.237
> 
> 标签：android, artificial-intelligence, dice

我希望有人能指出我正确的方向。我有一个名为 Farkle 的骰子游戏。该游戏作为两人游戏运行良好。现在我想为单人游戏实现人工智能。基本上我想要它，所以如果当前的骰子分数 >= 让我们说 300 将骰子传回给人类玩家。还有一些我希望它寻找的其他东西，例如是否所有的骰子都已用完并且所有 6 个骰子都可以再次滚动。

我是整个 Java/Android 世界的新手，所以真的不知道从哪里开始或寻找 Dice AI 示例的任何示例。我为扑克找到了一些，但我认为它们比我需要的要复杂得多，或者甚至可以理解。有任何想法吗？

顺便说一句...我愿意将游戏的源代码发送给任何愿意或能够提供帮助的人。

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T14:45:19.490

老实说，我不知道任何可以帮助您的 AI 库。此外，我必须实际阅读 farkle 规则才能理解这个概念以及如何将 AI 集成到其中。所以我想到了两个选项，但是你必须自己实现：
1.使用神经网络。[网络可能会使用反向传播](http://en.wikipedia.org/wiki/Backpropagation)进行训练。作为一个错误，您可能会使用 300 的 6 个骰子（可能由 6 个不同的输出神经元建模）总和的差异。如果您搜索一下，我不相信您会发现很难找到 java 库或源代码示例。
2.使用遗传算法。为此，实际上有一个相当不错的库[JGAP](http://jgap.sourceforge.net/)。染色体将是滚动所有 6 个骰子的结果，适应度函数将是它们的分数。
当然，上面提到的两条路线都非常通用，可能不是很准确。恐怕您必须熟悉某些 AI 概念/算法。farkle 游戏本身并没有那么流行，因为它本身有一个 AI 包（例如国际象棋），所以我相信你必须自己实现一些东西（也许使用一些库）。希望这可以帮助。

# python - 使用 python 在 .csv 文件的行中间添加一列

> ID：13430795
> 
> 赞同：1
> 
> 时间：2012-11-17T12:58:27.193
> 
> 标签：python, csv

您好，我有一个 python 脚本，它将 .csv 文件中的时间戳列从点表示法更改为“日期时间 TSQL”表示法：

在执行代码之前，一行如下所示：

```
send,2007.10.04.10.11.11.669,Server,Data,Client,TYPE=STP,Length=329,Cnt=11 
```

执行代码后是这样的：

```
send,2007-10-04 10:11:11.669,Server,Data,Client,TYPE=STP,Length=329,Cnt=11 
```

我想在第一次列之后以新格式附加相同的时间，它看起来像这样：

```
send,2007-10-04 10:11:11.669,2007-10-04 10:11:11.669,Server,Data,Client,TYPE=STP,Length=329,Cnt=11 
```

这是脚本：

```
import csv

cr = csv.reader(open("ActualTrace_01 - short2Times.csv", "rb"))
output = csv.writer(open("GermanygoalInputFormatActualTrace_01 - short.csv", "wb"))

for row in cr:    
    dateTimeContentsSend = row[1].split(".")
    finishSend = dateTimeContentsSend[0] + "-" + dateTimeContentsSend[1] + "-" + dateTimeContentsSend[2] + " " + dateTimeContentsSend[3] + ":" 
    finishSend+= dateTimeContentsSend[4] + ":" + dateTimeContentsSend[5] + "." + dateTimeContentsSend[6]

    row[1] = finishSend
    output.writerow(row) 
```

这里的所有线程都没有用，如果你只是说 row[1] = finishSend + "," + finishSend 它会在 row[1] 中加上这样的引号

```
send,"2007-10-04 10:11:11.669,2007-10-04 10:11:11.684",Server,Data,Client,TYPE=STP,Length=329,Cnt=11 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-17T13:01:20.197

你在（就在`row[1] = finishSend`）之后吗？

```
row.insert(2, row[1]) 
```

# gcc - Clang 的 ASM 输出与 GCC 的对比

> ID：13430797
> 
> 赞同：0
> 
> 时间：2012-11-17T12:58:42.593
> 
> 标签：gcc, assembly, llvm, clang

（我对汇编语言几乎一无所知）。

我正在尝试遵循[本](http://www.hokstad.com/writing-a-compiler-in-ruby-bottom-up-step-1.html)教程。

问题是他的编译器和我的测试设置（Linux 32 位上的 gcc）产生的输出完全不同，而且输出明显少于我的主要设置（OSX 64 位上的 clang）。

这是我的输出`int main() {}`

Linux 32 位上的 gcc

```
$ cat blank.c
int main() {}
$ gcc -S blank.c              
$ cat blank.s
    .file   "blank.c"
    .text
    .globl  main
    .type   main, @function
main:
.LFB0:
    .cfi_startproc
    pushl   %ebp
    .cfi_def_cfa_offset 8
    .cfi_offset 5, -8
    movl    %esp, %ebp
    .cfi_def_cfa_register 5
    popl    %ebp
    .cfi_def_cfa 4, 4
    .cfi_restore 5
    ret
    .cfi_endproc
.LFE0:
    .size   main, .-main
    .ident  "GCC: (Ubuntu/Linaro 4.6.3-1ubuntu5) 4.6.3"
    .section    .note.GNU-stack,"",@progbits 
```

在 Mac OSX 64 位上发出叮当声

```
$ cat blank.c
int main() {}
$ clang -S blank.c
$ cat blank.s
    .section    __TEXT,__text,regular,pure_instructions
    .globl  _main
    .align  4, 0x90
_main:                                  ## @main
Leh_func_begin0:
## BB#0:
    pushq   %rbp
Ltmp0:
    movq    %rsp, %rbp
Ltmp1:
    movl    $0, %eax
    popq    %rbp
    ret
Leh_func_end0:

    .section    __TEXT,__eh_frame,coalesced,no_toc+strip_static_syms+live_support
EH_frame0:
Lsection_eh_frame0:
Leh_frame_common0:
Lset0 = Leh_frame_common_end0-Leh_frame_common_begin0 ## Length of Common Information Entry
    .long   Lset0
Leh_frame_common_begin0:
    .long   0                       ## CIE Identifier Tag
    .byte   1                       ## DW_CIE_VERSION
    .asciz   "zR"                   ## CIE Augmentation
    .byte   1                       ## CIE Code Alignment Factor
    .byte   120                     ## CIE Data Alignment Factor
    .byte   16                      ## CIE Return Address Column
    .byte   1                       ## Augmentation Size
    .byte   16                      ## FDE Encoding = pcrel
    .byte   12                      ## DW_CFA_def_cfa
    .byte   7                       ## Register
    .byte   8                       ## Offset
    .byte   144                     ## DW_CFA_offset + Reg (16)
    .byte   1                       ## Offset
    .align  3
Leh_frame_common_end0:
    .globl  _main.eh
_main.eh:
Lset1 = Leh_frame_end0-Leh_frame_begin0 ## Length of Frame Information Entry
    .long   Lset1
Leh_frame_begin0:
Lset2 = Leh_frame_begin0-Leh_frame_common0 ## FDE CIE offset
    .long   Lset2
Ltmp2:                                  ## FDE initial location
Ltmp3 = Leh_func_begin0-Ltmp2
    .quad   Ltmp3
Lset3 = Leh_func_end0-Leh_func_begin0   ## FDE address range
    .quad   Lset3
    .byte   0                       ## Augmentation size
    .byte   4                       ## DW_CFA_advance_loc4
Lset4 = Ltmp0-Leh_func_begin0
    .long   Lset4
    .byte   14                      ## DW_CFA_def_cfa_offset
    .byte   16                      ## Offset
    .byte   134                     ## DW_CFA_offset + Reg (6)
    .byte   2                       ## Offset
    .byte   4                       ## DW_CFA_advance_loc4
Lset5 = Ltmp1-Ltmp0
    .long   Lset5
    .byte   13                      ## DW_CFA_def_cfa_register
    .byte   6                       ## Register
    .align  3
Leh_frame_end0:

.subsections_via_symbols 
```

是否可以在我的 Mac 上生成类似的程序集输出，以便我可以按照教程进行操作？或者这个汇编代码是特定于平台的？如果是，`clang`我可以使用哪些标志来生成更少冗长/样板（？）代码？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-17T15:25:03.343

确保您指示 clang 在 Mac OSX 64 位上生成 32 位代码，`clang -m32`您基本上不必担心其他差异。

`.cfi_XXX`gcc 输出中的指令和`.section __TEXT,__eh_frame`clang 输出中的后面的行都用于生成`.eh_frame`堆栈展开部分。详情见：[http ://blog.mozilla.org/respindola/2011/05/12/cfi-directives/](http://blog.mozilla.org/respindola/2011/05/12/cfi-directives/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-17T15:21:35.303

编译你的程序`gcc -fno-asynchronous-unwind-tables`。或者只是忽略各种`.cfi_XYZ`指令。对于这种`clang`情况，只是不要关注该`__eh_frame`部分。请记住，即使来自相同的源代码，两个不同的编译器也很少会生成相同的代码。

# node.js - mongodb node.js

> ID：13430799
> 
> 赞同：0
> 
> 时间：2012-11-17T12:59:08.437
> 
> 标签：node.js, mongodb

我对这个集合名称有疑问：

```
module.exports = function() {

    var mongoose = require('mongoose');
    var db = mongoose.createConnection('localhost', 'race');
    db.on('error', console.error.bind(console, 'connection error:'));
    db.once('open', function () {});

    var collection = 'test';
    var Schema = mongoose.Schema;
    var ObjectId = Schema.ObjectId;

    var schema = new Schema({
        author: ObjectId,
        name: String,
        date: Date
    });

    this.model = db.model(collection, schema);

    var silence = new this.model({ name: 'Silence' })
    console.log(silence.name);
    silence.save();

    this.model.find(function (err, log) {
        console.log(err)
        console.log(log)
    })

    return this;
}; 
```

我已经有一个测试集合，但是 console.log(log) 只是返回 Silence，

事实上，沉默是在“测试”集合中注册的，没有“测试”

你能解释一下为什么，我设置

```
var collection = 'test'; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-17T13:11:20.927

试试这个

```
var schema = new Schema({
        author: ObjectId,
        name: String,
        date: Date
    }, { collection: collection }); 
```

# date - 日期格式之间的转换

> ID：13430801
> 
> 赞同：0
> 
> 时间：2012-11-17T12:59:18.943
> 
> 标签：date, format, google-apps-script

我有一个电子表格，我们用它来记录我们的工作。我已将工作表中的日期列读入一个数组，以便我可以对它们执行操作/计算。这对我不起作用，因为我在调试器中注意到保存日期的数组具有不同格式的日期值。例如，有些显示为“16/11/2012”，有些显示为 ( `new Date(1355184000000)`)。

有人可以指出将它们全部转换为统一格式以便我可以使用它们的方法吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-17T13:55:34.003

您希望如何显示您的日期？您希望它们成为“日期对象”还是字符串？您在代码中显示的值（新日期（1355184000000））对应于`Mon Dec 10 16:00:00 PST 2012` 您可以使用`Logger.log(new Date(1355184000000))`

相反`"16/11/2012"`，很可能不是日期而是字符串... *（注意：奇怪的是，您使用“日/月/年”序列，因为我在您的个人资料中看到您在英国，我以为您会使用 mm/ dd/yyyy 代替）*。

既然您说您需要对这些项目进行一些计算，我想它们都应该转换为日期对象以便在您的脚本中使用它们。我建议您查看[有关日期对象的一些文档，](http://www.w3schools.com/jsref/jsref_obj_date.asp)以确切了解如何在不产生错误的情况下完成此操作。不要忘记 javascript 中的日期总是以 hh:mm:ss 和毫秒为单位的日期**和时间**。您看到的整数值是自 1970 年 1 月以来的毫秒数；-)
您还[可以在此论坛中搜索日期](https://stackoverflow.com/search?q=%5Bgoogle-apps-script%5Ddate)并找到很多有趣的信息。

这是一个小功能来说明：

```
function playWithTime(){
Logger.log('ref date = '+new Date(0))
var example = "june 30, 2013 23:59:00"
Logger.log(example+' = '+ new Date("june 30, 2013 23:59:00"))
Logger.log(example+' = '+ new Date("june 30, 2013 23:59:00").getTime()+' mS')
} 
```

它将在 Logger 中显示：

```
ref date = Thu Jan 01 1970 01:00:00 GMT+0100 (CET)
june 30, 2013 23:59:00 = Sun Jun 30 2013 23:59:00 GMT+0200 (CEST)
june 30, 2013 23:59:00 = 1372629540000 mS 
```

顺便说一句，请注意，记录器以不同的方式返回值，具体取决于您所在时区的夏令时......我在比利时，六月是“夏季”时间（CEST）。它也可以显示在 PDT 或 PST 中，这是 Google 服务器的时区。您不能依赖记录器保持不变（！！），但这是另一回事；-)

* * *

**编辑：**如果您的日期字符串采用 dd/mm/yyyy 的形式，那么您可能应该像以下代码一样重新排序：

```
function playWithTime2(){
Logger.log('original date string in UK format = 16/11/2012')
var d = "16/11/2012".split('/');
var d_ordered=d[1]+'/'+d[0]+'/'+d[2]
Logger.log('becomes '+d_ordered+' = '+new Date(d_ordered))
} 
```

哪个返回

```
original date string in UK format = 16/11/2012
becomes 11/16/2012 = Fri Nov 16 2012 00:00:00 GMT+0100 (CET) 
```

# ruby-on-rails - 在 Rails 中更改类别下拉菜单时呈现带有子类别的复选框

> ID：13430805
> 
> 赞同：1
> 
> 时间：2012-11-17T12:59:57.950
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

我这里有一个新手问题:)

我希望我的项目有一个主要类别（完成）和一个或多个子类别。我有两个模型 - 一个用于主要类别，一个用于子类别。创建新项目时，我希望能够动态更改子类别的复选框。

我几乎已经用 jQuery 和一个显示复选框的视图请求实现了我想要的。我现在唯一的问题是，当我尝试创建一个新项目并在我渲染“新”时提交无效表单时，已检查的子类别消失了。

以下是我的一些代码：

这是来自我的控制器：

```
def subcategories 
    @subcategories = Category.find(params[:id]).subcategories
    if !params[:item_id].nil?
        @item = Item.find(params[:item_id])
    else
        @item = Item.new
    end
    render :partial => "subcategories"
end 
```

这是我的看法：

```
<% if !@subcategories.blank? %>
  <% @subcategories.each do |subcat| %> 
    <%= label_tag dom_id(subcat), subcat.name, :class => "checkbox" do %>
        <%= check_box_tag "item[subcategory_ids][]", subcat.id, @item.subcategory_ids.include?(subcat.id) , id: dom_id(subcat) %> <%= subcat.name %>
    <% end %>
  <% end %>
<% end %> 
```

这是我的 new.html.erb：

```
<div id="subcategories_main">
    <%= label_tag "Subcategories" %>
    <div id="subcategories">
    </div>
  </div> 
```

我有这个小 JavaScript 来显示复选框：

```
$("#item_category_id").change(function() {
// make a POST call and replace the content
var category_id = $('select#item_category_id :selected').val();
if(category_id != "" || category_id != "0") 
{
  $.get('/categories/' + category_id + '/subcategories', function(data){
      $("#subcategories").html(data);
  })
}
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-18T14:53:57.050

表单提交会刷新页面，因此复选框肯定会被清除。

此时你可以做两件事：

1.  在客户端进行表单验证。因此，您永远不会提交无效的表格。
2.  或者在控制器中创建另一个全局列表，然后再 `render "new"`包含选中的子类别（来自参数）。就像是 ：

    ```
    @checked_subcategories = params[:sub_categories] 
    ```

    然后您可以在迭代时签入视图，例如`if @checked_subcategories.include?(name)`，将复选框标记为已选中。

# java - 状态设计模式

> ID：13430812
> 
> 赞同：-1
> 
> 时间：2012-11-17T13:00:25.313
> 
> 标签：java, design-patterns

我正在尝试实现状态模式，但问题是，我没有改变状态，当我使用测试类时，它使用的是与接口有关系的具体类。

例如，状态类中的 fire 和 move 方法不起作用并返回 Railgun 的结果。

这是代码：

```
public interface RailgunState 
{

    public String fire(Point p, int rounds);
    public String move(Point p);
}

public class Railgun 
{
    /**
     * @param ammo repersent the current ammonitions.
     */
     int ammo = 0;
     /**
     * @param MAX_AMMO repersent the maximum ammonitions.
     */
      public static int MAX_AMMO = 10;
    int test = 10;
    /**
     *@param position represent the possition of the state 
     */
    Point position;
    Point point;
    //ask mark
    int x = 0;
    int y = 0;
    int result = 6;
    /**
     * @param damagedState represent an object of DamagedState
     */
    RailgunState damagedState ;
    RailgunState needAmmoState ;
    RailgunState normalState ;
     /**
     * @param state represent the state of the RailGun
     */
    RailgunState state; 

    Railgun()
    {
        damagedState = new DamagedState();
        needAmmoState = new NeedAmmoState();
        normalState = new NormalState();
        state = normalState;
    }
    /** fire().
     * @param p is the coordinates of the target
     * @param rounds number of rounds HQ has requested
     * @return success/ partial success/ failure
     */
    public String fire(Point p, int rounds)
    {
         return "Fire order: Success 6/6";
    }

    /**  move(). success or failure only the string
     * @param p is the destination
     * @return success or failure when a railgun can move to the destination
     */
    public String move(Point p)
    {
        position = p;
        return  "Move order: Success" ; 
    }

    /**getPosition().
     * @return the possstion of the point 
     */
    public Point getPosition()
    {             
        return position ;
    }

    void setPosition(Point position)
    {
        this.position = position;
    }

     public RailgunState getState()
    {
        return state;
    }

    void setAmmo(int ammo) 
    {
        this.ammo = ammo;
    }

    public Point getPoint() {
        return point;
    }

    public RailgunState getDamagedState() {
        return damagedState;
    }

    public RailgunState getNeedAmmoState() {
        return needAmmoState;
    }

    public RailgunState getNormalState() {
        return normalState;
    }

    int getAmmo()
    {
        return MAX_AMMO;
    }

    void setState(RailgunState state)
    {
         this.state = state;
    }
    void setState(NeedAmmoState needAmmoState)
    {
        this.state = needAmmoState;
    }

    void setState(NormalState normal)
    {
        this.state = normalState;
    }
        void setState(DamagedState damagedState)
    {
        this.state = damagedState;
    }
}

public class NormalState implements RailgunState {

    Railgun railgun;    
    static int MAX_AMMO = 10;
    int result = 6;

    NormalState()
    {
    }
    @Override
    public String fire(Point p, int rounds) 
    {
        MAX_AMMO -= rounds;
        if((MAX_AMMO >= 0) && (rounds == result))
        {
            NeedAmmoState needAmmo = new NeedAmmoState();
            System.out.println("Seccuees: " + MAX_AMMO);
            NormalState state = new NormalState();
            railgun.setState(state);
            return "Fire order: Success 6/6";
        }
        else if((MAX_AMMO < 0) && (MAX_AMMO != -result))
        {
              System.out.println("Partial: " + MAX_AMMO);
              Railgun.MAX_AMMO = 0;
              System.out.println("Partial: " + MAX_AMMO);
              NeedAmmoState needAmmo = new NeedAmmoState();
              railgun.setState(needAmmo);
              return "Fire order: Partial success 4/6";
        }

        else 
        {
             System.out.println("Fail: " + MAX_AMMO);
             DamagedState damaged = new DamagedState();
             railgun.setState(damaged);
             return "Fire order: Failure 0/6";
        }
    }

    @Override
    public String move(Point p)
    {
        return p + "";
    }

    /**getPosition().
     * @return the possstion of the point 
     */
    public Point getPosition()
    {             
        return railgun.getPosition();
    }
}

public class NeedAmmoState implements RailgunState
{
    Point position;
    Railgun railgun;
    NeedAmmoState()
    {
    }

    @Override
    public String fire(Point p, int rounds)
    {
          return "Fire order: Failed 0/4";
    }

    @Override
    public String move(Point p)
    {
        railgun = new Railgun();
         railgun.move(p);
        position = p;
        return  "Move order: Success" ; 
    }

    void setPosition(Point position)
    {
        this.position = position;
    }
    int getAmmo()
    {
        return Railgun.MAX_AMMO;
    }

    /**getPosition().
     * @return the possstion of the point 
     */
    public Point getPosition()
    {             
        int x = 320;
        int y = 43;
        Point p = new Point(x,y);
        return p;
    }
}

public class NormalStateTest {

    /**
     * Test of fire method, of class NormalState.
     */
    @Test
    public void testFire() {
        final Railgun railgun = new Railgun();
        railgun.setState(new NormalState());
        final int numRounds = 6;
        final int x = 100;
        final int y = 340;

        // This fire mission should be completely successful
        String actualResult = railgun.fire(new Point(x, y), numRounds);
        String expectedResult = "Fire order: Success 6/6";
        //System.out.println(actualResult);
        assertEquals(expectedResult, actualResult);

        // This fire mission should be partially successful
        actualResult = railgun.fire(new Point(x, y), numRounds);
        //System.out.println(actualResult);
        expectedResult = "Fire order: Partial success 4/6";
        assertEquals(expectedResult, actualResult);

        // This fire mission should fail
        actualResult = railgun.fire(new Point(x, y), numRounds);
        //System.out.println(actualResult);
        expectedResult = "Fire order: Failure 0/6";
        assertEquals(expectedResult, actualResult);

        // Check state change to NeedAmmo state
        assertEquals(railgun.getState().getClass(), NeedAmmoState.class); 
    }

    /**
     * Test of move method, of class NormalState. Should always succeed.
     */
    @Test
    public void testMove() {
        final Railgun railgun = new Railgun();
        final int x = 129;
        final int y = 444;
        final String actualResult = railgun.move(new Point(x, y));
        final String expectedResult = "Move order: Success";
        System.out.println(actualResult);
        assertEquals(new Point(x, y), railgun.getPosition());
        assertEquals(expectedResult, actualResult);
    }
} 
```

所以问题是，例如在 NormalStateTest.java 中进行测试时，NormalState 和 NeedAmmoSate 等类的结果是在方法 fire 和 move 中从 Railgun 返回值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-17T13:38:53.893

如果您希望将`RailGun.fire()`方法委托给当前状态`fire()`方法，请执行此操作。在您的代码中，它返回一个硬编码字符串并且根本不使用该状态。

改变

```
public String fire(Point p, int rounds) {
     return "Fire order: Success 6/6";
} 
```

到

```
public String fire(Point p, int rounds) {
     return state.fire(p, rounds);
} 
```

# c# - umbraco 中的母版页

> ID：13430813
> 
> 赞同：4
> 
> 时间：2012-11-17T13:00:26.113
> 
> 标签：c#, asp.net, master-pages, umbraco, runtime-error

我正在使用 umbraco 在 asp.net 中编程，但母版页有问题。我制作了一个母版页，然后在我的默认页面中添加了一个链接的网络用户母版页。在 umbraco 的运行时项目中，当我单击链接时看到此错误：

> 找不到网页
> 
> 没有 umbraco 文档与 url 'http://localhost:20771/WebForm1.aspx' 匹配
> 
> umbraco 尝试使用此 xpath 查询来匹配它'/root/* [@urlName = "webform1"] | /root/ */* [@urlName = "webform1"]')
> 
> 通过在 /config/umbracoSettings.config 文件中添加 umbraco 文档的 id 以显示为 404 页面，可以将此页面替换为自定义 404 页面。只需将 id 添加到 '/settings/content/errors/error404' 元素。
> 
> 有关更多信息，请访问 umbraco 网站上有关自定义 404 的信息。
> 
> 这个页面是故意留下丑陋的;-)

我在网上搜索并没有找到任何解决方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-18T01:04:48.503

通过设置 > 模板检查您的母版页是否显示在管理区域中。然后，检查您的内容页面（在管理内容部分中）是否定义了模板（在“通用属性”下）。如果没有，并且不允许您选择模板，那么您需要允许该模板用于该特定节点类型。转到设置>文档类型，选择您的节点类型，然后在“允许的模板”下，选择您希望我们为页面使用的模板（您可以选择嵌套母版页，它应该仍然可以正常工作） - 还要确保下面的“默认允许模板”被选中到您选择的模板。点击“保存”后，返回“内容”部分中的节点，转到“通用属性”选项卡，然后选择所需的模板。

Umbraco 允许您使用任意数量的母版页来呈现内容节点。创建新节点时，然后选择要使用的模板（或使用默认模板，按照上述说明指定）。您还可以强制在运行时使用不同的模板，使用页面 URL 上的 ?altTemplate=MyTemplateName 查询字符串选项 - 对于移动站点、RSS 视图等非常方便。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T08:40:12.707

在 Master.master 页面（它是一般母版页。）你可以找到 asp:ContentPlaceHolder

请注意此代码。也许它对您有帮助。

> ```
>  <div style="vertical-align: top;">
>                 <umbraco:Macro ID="Macro1" Alias="NavigationControl" runat="server"></umbraco:Macro>
>             </div>
>             ***<div>
>                 <asp:ContentPlaceHolder ID="DefaultPageContent" runat="server">
>                 </asp:ContentPlaceHolder>
>             </div>***
>             <div>
>                 <asp:ContentPlaceHolder ID="TextPageContent" runat="server">
>                     <!-- Insert default "ContactUsContent" markup here -->
> 
>                 </asp:ContentPlaceHolder>
>             </div>
>             <div>
>                 <asp:ContentPlaceHolder ID="AtAGlanceContent" runat="server">
>                 </asp:ContentPlaceHolder>
>             </div>
>             <div id="footer">
>                 <uc6:FooterControl ID="FooterControl1" runat="server" />
>             </div>
>         </div>
> 
>     </form> 
> ```

# c# - 优化对函数的条件调用

> ID：13430814
> 
> 赞同：1
> 
> 时间：2012-11-17T13:00:33.653
> 
> 标签：c#, code-analysis

有没有更有效或更好的方法来重写这段代码？

```
if (condition 1 = true)
{
    // Call to function 1
}

if (condition 2 = true)
{
    // Call to function 2
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-17T13:08:46.977

我认为简短的回答是否定的。长答案取决于条件和功能。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-17T17:29:30.723

一般来说，没有。

如果被调用的函数重新评估条件，那么可能是的，方法是将重新评估条件的函数部分从函数中取出，因为已知条件为真。（这称为“部分评估”）。

如果 condition1 和 condition2 有关系，那么也许是的。想象条件1由几个项组成

```
 c1a and c1b and .. c1n 
```

并且 c2 由

```
 c2a and c2b and ... c2m 
```

如果 c1i 的某个子集暗示 c2j 的某个子集，那么您可以更有效地评估条件：

```
 if   (c1isubset)  {
         if  (c1irest)
            { // call to function 1
            }
         endif
         if (c2jrest)
            { // call to function2)
            }
    } 
```

当然，c2j 的一个子集可能意味着 c1i 的一个子集，然后你会交换测试的顺序。

# drupal - 如何通过 url 将选择列表的值传递给表单？

> ID：13430817
> 
> 赞同：0
> 
> 时间：2012-11-17T13:00:51.187
> 
> 标签：drupal, drupal-7, drupal-forms

我正在尝试使用带有以下 HTML 标记的表单 URL 发送选择列表的值。

```
<select class="form-select" name="field_with_contact[und]" id="edit-field-with-contact-und"><option value="_none">- None -</option><option value="26">Rawhi Pharmacy</option></select> 
```

表单 URL 是[http://www.example.com/node/add/deal](http://www.example.com/node/add/deal)。

如何将值 26 发送到表单？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T00:51:28.677

您可以使用专门为此目的而设计的[Prepopulate模块。](http://drupal.org/project/prepopulate)

如项目页面所示，一个 URL like`http://example.com/node/add/blog?edit[title]=this%20is%20the%20title`会预先填充标题，*这是 title*。

该模块可以用于任何形式，并且它有一个正式版本，用于[5004 个站点](http://drupal.org/project/usage/prepopulate)（2017 年 8 月 6 日） 。

2013 年 1 月 1 日之前，该模块的使用情况如下。

> [![截屏](../Images/721b640fc29ddfe2907d1cf005595c83.png)](https://i.stack.imgur.com/TrqEt.png)

截至 2017 年 8 月 18 日，Drupal 6 模块的使用量有所下降，因为 Drupal 6 不再受到官方支持，但由于在 Drupal 7 和 Drupal 8 站点中的使用，总使用量略有增加。

> [![截屏](../Images/6dfa7f6e3d2b9d06950ace8365f6bd85.png)](https://i.stack.imgur.com/tavcD.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-04-29T21:42:06.900

如果您转到“www.mysite.com/node/add/deal/26”，以下代码将打印 The number pass in url was: 26

这是代码：

```
function my_module_menu()
{
    $items = array();

    $items['node/add/deal/%'] = array(
        'title'           => 'Add deal',
        'page callback'   => 'drupal_get_form',
        'page arguments'  => array('node_add_deal_form', 3),
        'access callback' => array(TRUE),
        'type'            => MENU_CALLBACK,
    );

    return $items;
}

function node_add_deal_form($form, &$form_state, $number)
{
    $form = array();

    $form['number'] = array(
        '#markup' => '<p>The number passed in url was: '. $number. '</p>',
    );

    return $form;
} 
```

# jquery - 将图像插入 Elastislide jquery 图像查看器

> ID：13430818
> 
> 赞同：0
> 
> 时间：2012-11-17T13:01:02.333
> 
> 标签：jquery

谁能告诉我如何在下面再注入一个列表项？

```
 <ul id="carousel" class="elastislide-list">
    <li><a href="#"><img src="images/small/1.jpg" alt="image01" /></a></li>
    <li><a href="#"><img src="images/small/2.jpg" alt="image02" /></a></li>
    <li><a href="#"><img src="images/small/3.jpg" alt="image03" /></a></li>
    <li><a href="#"><img src="images/small/4.jpg" alt="image04" /></a></li>

 </ul> 
```

此 javascript 代码不起作用：

```
<script type="text/javascript">
$( '#carousel1' ).elastislide( {minItems : 2} );
$( '#carousel2' ).elastislide( {minItems : 2} );
$( '#carousel3' ).elastislide( {minItems : 2} );

  var $postlink  = $("./ajax/profile.html");
  var $imagelink  = $("./ajax/top_logo2.png");
  var $imagename  = $("iContact");
  var $items1  = $('<li><a href="' +$postlink+'"><img src="'+ $imagelink +'" alt="'+ $imagename +'" /></a></li>');

     $('#carousel1 ul').append($items1);
     $('#carousel1').elastislide( 'add', $items1 );
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-17T19:41:27.130

您的麻烦可能是在 jQuery 中对字符串进行了不必要的包装。试试这个：

```
var postlink = "./ajax/profile.html";
var imagelink = "./ajax/top_logo2.png";
var imagename = "iContact";
var $items1 = $('<li><a href="' + postlink + '"><img src="' 
    + imagelink + '" alt="' + imagename + '" /></a></li>'); 
```

仅`$()`在需要 jQuery 对象时使用。

# windows - Windows 系统文件哈希数据库

> ID：13430819
> 
> 赞同：2
> 
> 时间：2012-11-17T13:01:08.597
> 
> 标签：windows, hash, system

是否有 Windows xp/Vista/7/8 系统文件（如 csrss.exe 和 audiodg.exe）的数据库？我知道有一个默认程序可以检查系统文件是否损坏，但是是否有像 md5 或 crc 这样的哈希数据库？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T11:42:32.140

查看[NIST 国家软件参考库](http://www.nsrl.nist.gov/Diskprints.htm)。“Software Diskprints”可能对您有所帮助。

# matlab - MATLAB - 通过改变参数查找函数的所有最大值

> ID：13430820
> 
> 赞同：1
> 
> 时间：2012-11-17T13:01:10.727
> 
> 标签：matlab

我在 MATLAB 的两个变量中有一个函数。我想修复一个变量，获取结果函数的最大值，然后更改变量的值并再次获取最大值，依此类推。如何在一步或一个向量中获得所有结果最大值？第二个变量的变化是连续的，而不是离散的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-18T10:24:02.193

谢谢各位，不过搞定了 我只是在一个循环中改变变量并将各自的最大值存储在一个数组中。为我做了这项工作.. :)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-17T20:59:42.390

这项工作的一些变化对你有用吗？

```
function main 

clear all, close all
sizer = floor(rand(1) .* 10 + 1)
X = ceil(rand(sizer,1) .* 10)
Y = floor(rand(sizer,1) .* 10)
Z = Zmax(X, Y, sizer)

    function Z = Zmax(X, Y, sizer)

    Z = zeros(size(sizer));

    for i = 1:1:sizer
        Z(i) = max([X(i), Y(i)]);
    end

    Z = Z';

    end

end 
```

您可能必须将其添加到 Zmax，因为您的第二个变量具有连续变化： http: [//www.mathworks.com/help/curvefit/fnval.html](http://www.mathworks.com/help/curvefit/fnval.html)

# symfony - Twig模板内的stripslashes

> ID：13430826
> 
> 赞同：1
> 
> 时间：2012-11-17T13:01:38.720
> 
> 标签：symfony, twig

我想在 twig 模板中使用 php stripslashes 函数，但这个函数不是标准的 twig 函数，所以我必须将它作为扩展添加到 twig，我在控制器中尝试了这段代码，但它不起作用：

```
use Symfony\Bundle\FrameworkBundle\Controller\Controller;
use Symfony\Component\HttpFoundation\Response;
class XController extends Controller
{

public function YAction($page)
{
$twig=$this->get('twig');
$twig->addFunction('functionName', new Twig_Function_Function('someFunction'));
... 
```

我需要“Twig_Function_Function”类的使用声明吗？我做错了吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-17T13:19:00.317

如果你想在你的树枝模板中使用它，你不需要在你的控制器内进行任何添加或调用，阅读文档的[如何编写自定义树枝扩展](http://symfony.com/doc/2.0/cookbook/templating/twig_extension.html)部分。

基本上，您需要创建一个[扩展类](http://symfony.com/doc/2.0/cookbook/templating/twig_extension.html#create-the-extension-class)extends `\Twig_Extension`，然后您需要使用标签将[其注册](http://symfony.com/doc/2.0/cookbook/templating/twig_extension.html#register-an-extension-as-a-service)为服务。`twig.extension`最后，您需要实现该[`getFunctions()`](http://twig.sensiolabs.org/doc/advanced.html#id2)方法以添加自定义的树枝功能。

但在您的情况下，最好添加一个过滤器，使用相同的逻辑，您还可以[`getFilters()`](http://twig.sensiolabs.org/doc/advanced.html#id3)在扩展类中添加一个方法，以便您可以指定自定义过滤器。

此外，更深入地查看文档的[Extending Twig](http://twig.sensiolabs.org/doc/advanced.html)部分，以了解可以扩展 twig 的所有方式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-07-11T16:28:45.077

或者 `{{ function('stripslashes', "This\\'ll do") }}`

（或在构建 Twig 上下文时应用 stripslashes()）

但是，如果你在 php 中这样做：

```
add_filter('timber/twig', function(\Twig_Environment $twig) {
  $twig->addFunction(new Twig\TwigFunction('stripslashes', 'stripslashes'));
  return $twig;
}); 
```

然后这适用于树枝：

```
{{ stripslashes("This\'ll do...") }} 
```

# playframework - Play Framework 2.1：缺少 BodyParser 类文件

> ID：13430827
> 
> 赞同：9
> 
> 时间：2012-11-17T13:01:38.743
> 
> 标签：playframework, playframework-2.1

我下载了 Play Framework 2.1，之后`eclipsifying`我`errors`在控制器和目标文件夹中。

在控制器中，`Application.scala`我有以下错误：

```
Multiple markers at this line
    - class file needed by BodyParser is missing. reference type Either of object package refers to nonexisting 
     symbol. 
```

如果你们中的任何人遇到此错误，您是如何解决的？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-11-17T21:06:20.763

Play 2.1 使用 Scala 2.10。如果您刚刚下载了 Play 2.1 SNAPSHOT，您的问题很可能是由于仍然使用 2.9.X 的 Scala IDE。如果您使用编译项目`play compile`（因为 SBT 将使用正确的 Scala 库版本），该错误将不会显示，但它会显示在 IDE 中，直到您升级它。

要升级 Scala IDE，请按照[他们网站](http://scala-ide.org/download/milestone.html#scala_ide_21_milestone_2)上的说明进行操作。

顺便说一句，不要忘记该命令在 Play 2.1 中`eclipsify`被重命名为。`eclipse`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-18T17:16:10.253

解决方案的问题是最新的 eclipse (Juno) 不能与最新的 Scala IDE 插件一起使用，只是每晚构建：http: [//download.scala-ide.org/nightly-update-juno-master-29x /](http://download.scala-ide.org/nightly-update-juno-master-29x/) ...仅支持scala 2.9。

那么：有没有办法使用 Eclipse Juno 开发 Play 2.1 项目？

# javascript - 为视网膜显示器提供高分辨率图像

> ID：13430828
> 
> 赞同：12
> 
> 时间：2012-11-17T13:01:41.847
> 
> 标签：javascript, css, retina-display

如何以**跨浏览器兼容的方式**检测访问网页的设备的像素密度，以便可以提供标准或高分辨率图像，而不会强制将图像加倍到任何设备？

是否有任何 javascript 库可以自动执行此操作？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-11-17T13:32:28.200

### 为什么要设置 Retina

iPhone 4s、iPhone 5、iPad3、iPad4、Macbook 15"、Macbook 13" 均使用 Retina 显示屏。

Android 还支持高分辨率显示，以及@JamWaffles 提到的 Windows 8（Lumia 920）。

添加高分辨率支持有利于用户体验，但它肯定会增加开发人员的负载，以及移动设备的带宽。有人不建议这样做。（Peter-Paul Koch，见底部“进一步阅读”）

### 布雷芬

有两种方法可以实现此功能。一种是Javascript，另一种是CSS。当前的所有解决方案都适用于 Retina，但可以轻松扩展到 Android 高分辨率。

CSS 解决方案是关于媒体查询和`-webkit-min-device-pixel-ratio`或`-webkit-device-pixel-ratio`

*   使用简单。
*   适用于所有浏览器。
*   缺点：适合背景。`<img>`标签更难

Javascript 解决方案是关于`window.devicePixelRatio`属性的。

*   优点：Javascript 可以操纵图像源。因此，如果您要提供直接图像而不是背景，最好使用 Javascript
*   不能适用于所有浏览器，但目前的支持已经足够好了。请参阅下面的列表。
*   需要多一点设置。

### CSS 解决方案

对于普通图像，说一个图标

```
.sample-icon {
    background-image: url("../images/sample-icon.png");
    background-size: 36px 36px;
} 
```

对于 Retina，请添加以下内容

```
@media only screen and (-webkit-min-device-pixel-ratio: 2), /* Webkit */
    (min-resolution: 192dpi) /* Everyone else */ {
    .sample-icon {
        background-image: url("../images/sample-icon-highres.png");
        background-size: 18px 18px;
} 
```

你可以用`min-resolution: 2dppx`替换`min-resolution: 192dpi`，对于那些不想记住数字的人

注意区别：

1.  两个不同的图标，一个正常，一个高分辨率。高分辨率图标比普通图标大一倍。
2.  背景大小。后者是一半。但是您需要在实际使用中对其进行测试。

资源：+ [http://www.w3.org/blog/CSS/2012/06/14/unprefix-webkit-device-pixel-ratio/](http://www.w3.org/blog/CSS/2012/06/14/unprefix-webkit-device-pixel-ratio/) + [http://view.jquerymobile.com/master/demos/widgets/按钮/#CustomIcons](http://view.jquerymobile.com/master/demos/widgets/buttons/#CustomIcons)

### Javascript 解决方案

使用`window.devicePixelRatio`属性来检测分辨率。

```
if (window.devicePixelRatio >= 2) {
  alert("This is a Retina screen");
  //Do something to manipulate image url attribute
  //for example add `@2x-` before all image urls
} 
```

浏览器支持

Safari、Android WebKit、Chrome 22+ 和 Android、Opera Mobile、BlackBerry WebKit、QQ、Palm WebKit，参考：[http ://www.quirksmode.org/blog/archives/2012/06/devicepixelrati.html](http://www.quirksmode.org/blog/archives/2012/06/devicepixelrati.html)

### 安卓版

Android 设备使用 1.5 作为高分辨率，而不是 Retina 中的 2。 [http://developer.android.com/guide/webapps/targeting.html](http://developer.android.com/guide/webapps/targeting.html) --#Targeting Device Density with CSS, #Targeting Device Density with JavaScript

### 进一步的好读物

[http://www.quirksmode.org/blog/archives/2012/07/more_about_devi.html](http://www.quirksmode.org/blog/archives/2012/07/more_about_devi.html) “我不太喜欢提供特殊的视网膜图像，因为它会使网络过于繁重——尤其是通过移动连接。尽管如此人们会做的。” ——彼得-保罗·科赫

*更新 2013-04-18*更新 jQuery 移动链接

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-17T13:06:06.517

我找到了这个：

```
var retina = window.devicePixelRatio > 1; 
```

这应该使视网膜返回 true，您可以使用 if 函数来提供正确的图像。

资料来源：[http ://briancray.com/posts/detect-retina-displays-with-javascript](http://briancray.com/posts/detect-retina-displays-with-javascript)

-InfiniDaZa

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-07-23T08:44:55.630

您需要了解网络功能、响应式图像和资源加载。

到目前为止，javascript 解决方案并不安静，因为它们通常需要在图像交换之前下载两个资源（图像）。

你最好的选择是后台 css 媒体查询，除非你使用这样的完整解决方案： [http](http://adaptive-images.com) ://adaptive-images.com 在这里解释：[https ://vimeo.com/38947881](https://vimeo.com/38947881)

# c++ - 我应该返回一个右值引用（通过 std::move'ing）吗？

> ID：13430831
> 
> 赞同：17
> 
> 时间：2012-11-17T13:01:56.457
> 
> 标签：c++, return, rvalue-reference, stdmove

一篇[C++Next 博客文章](http://web.archive.org/web/20140110115411/http://cpp-next.com/archive/2009/09/making-your-next-move/)说

```
A compute(…)
{
    A v;
    …
    return v;
} 
```

如果`A`具有可访问的副本或移动构造函数，编译器可能会选择省略副本。否则，如果`A`有移动构造函数，`v`则被移动。否则，如果`A`有复制构造函数，`v`则被复制。否则，会发出编译时错误。

我认为我应该始终返回该值，`std::move` 因为编译器将能够为用户找出最佳选择。但在博客文章的另一个例子中

```
Matrix operator+(Matrix&& temp, Matrix&& y)
  { temp += y; return std::move(temp); } 
```

这里`std::move`是必要的，因为`y`必须在函数内被视为左值。

啊，看完这篇博文，我的头都快炸了。我尽力去理解其中的道理，但我研究得越多，我就越困惑。为什么我们要在 的帮助下返回值`std::move`？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-11-17T13:37:29.097

So, lets say you have:

```
A compute()
{
  A v;
  …
  return v;
} 
```

And you're doing:

```
A a = compute(); 
```

There are two transfers (copy or move) that are involved in this expression. First the object denoted by `v` in the function must be transferred to the result of the function, i.e. the value donated by the `compute()` expression. Let's call that Transfer 1\. Then, this temporary object is transferred to create the object denoted by `a` - Transfer 2.

In many cases, both Transfer 1 and 2 can be elided by the compiler - the object `v` is constructed directly in the location of `a` and no transferring is necessary. The compiler has to make use of Named Return Value Optimization for Transfer 1 in this example, because the object being returned is named. If we disable copy/move elision, however, each transfer involves a call to either A's copy constructor or its move constructor. In most modern compilers, the compiler will see that `v` is about to be destroyed and it will first move it into the return value. Then this temporary return value will be moved into `a`. If `A` does not have a move constructor, it will be copied for both transfers instead.

Now lets look at:

```
A compute(A&& v)
{
  return v;
} 
```

The value we're returning comes from the reference being passed into the function. The compiler doesn't just assume that `v` is a temporary and that it's okay to move from it¹. In this case, Transfer 1 will be a copy. Then Transfer 2 will be a move - that's okay because the returned value is still a temporary (we didn't return a reference). But since we *know* that we've taken an object that we can move from, because our parameter is an rvalue reference, we can explicitly tell the compiler to treat `v` as a temporary with `std::move`:

```
A compute(A&& v)
{
  return std::move(v);
} 
```

Now both Transfer 1 and Transfer 2 will be moves.

* * *

¹ The reason why the compiler doesn't automatically treat `v`, defined as `A&&`, as an rvalue is one of safety. It's not just too stupid to figure it out. Once an object has a name, it can be referred to multiple times throughout your code. Consider:

```
A compute(A&& a)
{
  doSomething(a);
  doSomethingElse(a);
} 
```

If `a` was automatically treated as an rvalue, `doSomething` would be free to rip its guts out, meaning that the `a` being passed to `doSomethingElse` may be invalid. Even if `doSomething` took its argument by value, the object would be moved from and therefore invalid in the next line. To avoid this problem, named rvalue references are lvalues. That means when `doSomething` is called, `a` will at worst be copied from, if not just taken by lvalue reference - it will still be valid in the next line.

It is up to the author of `compute` to say, "okay, now I allow this value to be moved from, because I know for certain that it's a temporary object". You do this by saying `std::move(a)`. For example, you could give `doSomething` a copy and then allow `doSomethingElse` to move from it:

```
A compute(A&& a)
{
  doSomething(a);
  doSomethingElse(std::move(a));
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-17T13:15:31.020

函数结果的隐式移动仅适用于自动对象。右值引用参数不表示自动对象，因此在这种情况下您必须明确请求移动。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-11-17T13:20:38.947

第一个利用了比移动更好的 NVRO。*没有*副本比便宜的更好。

The second cannot take advantage of NVRO. Assuming no elision, `return temp;` would call the copy constructor and `return std::move(temp);` would call the move constructor. Now, I believe either of these have equal potential to be elided and so you should go with the cheaper one if not elided, which is using `std::move`.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-07-10T20:22:39.887

### In C++17 and later

C++17 changed the definition of value categories so that the kind of copy elision you describe is *guaranteed* (see: [How does guaranteed copy elision work?](https://stackoverflow.com/questions/38043319/how-does-guaranteed-copy-elision-work)). Thus if you write your code in C++17 or later you should absolutely **not return by `std::move()`'ing** in this case.

# java - 为什么我的时间戳在时区中移动？

> ID：13430832
> 
> 赞同：2
> 
> 时间：2012-11-17T13:02:03.670
> 
> 标签：java, hibernate, postgresql, jpa, timestamp

`timestamp without time zone`我在 PostgreSQL 9.1 数据库的列中有这个日期：

`2012-11-17 13:00:00`

它是 UTC 格式的，我已经通过选择它作为 UNIX 时间戳 ( `EXTRACT epoch`) 进行了验证。

```
int epoch = 1353157200; // from database
Date date = new Date((long)epoch * 1000);
System.out.println(date.toGMTString()); // output 17 Nov 2012 13:00:00 GMT 
```

然而，当我使用 JPA/Hibernate 读取这个日期时，事情就出错了。这是我的映射：

```
@Column(nullable=true,updatable=true,name="startDate")
@Temporal(TemporalType.TIMESTAMP)
private Date start; 
```

然而`Date`，我得到的是：

`17 Nov 2012 12:00:00 GMT`

为什么会发生这种情况，更重要的是，我该如何阻止它？

请注意，我只想普遍地存储时间点（就像`java.util.Date`那样），我不太关心时区，除了我显然不希望它们破坏我的数据。

正如您可能推断的那样，连接到数据库的客户端应用程序位于 UTC+1（荷兰）。

此外，列类型的选择`timestamp without time zone`是由 Hibernate 在自动生成模式时做出的。应该是这样`timestamp with time zone`吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-17T14:44:15.407

如果数据库不提供时区信息，则 JDBC 驱动程序应将其视为位于 JVM 的本地时区（请参阅[PreparedStatement.setDate(int, Date)](http://docs.oracle.com/javase/7/docs/api/java/sql/PreparedStatement.html#setDate%28int,%20java.sql.Date%29)）：

> 使用运行应用程序的虚拟机的默认时区将指定参数设置为给定的 java.sql.Date 值。

Javadoc 和 JDBC 规范没有明确说明`ResultSet`etc，但为了保持一致，大多数驱动程序也会将该规则应用于从数据库中检索的日期。如果您想显式控制所使用的时区，您将需要使用各种`set/getDate/Time/Timestamp`方法来接受`Calendar`正确时区中的对象。

一些驱动程序还提供了一个连接属性，允许您在与数据库之间进行转换时指定要使用的时区。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-19T07:52:47.870

有几种解决方案可以解决这些问题：

1) 最简单的方法是在 JDBC 连接字符串中设置时区——只要数据库支持。

对于 MySQL，您可以使用`useGmtMillisForDatetimes=true`强制在数据库中使用 UTC。据我所知，Postgres 不支持这样的选项，但我可能错了，因为我不使用 Postgres。

2）在您的Java客户端程序中设置默认时区

```
TimeZone.setDefault(TimeZone.getTimeZone("UTC")); 
```

缺点：您还可以更改您不想要的时区，例如，如果您的程序有 UI 部分。

3) 仅对 Hibernate 使用具有特殊 getter 的映射：在您的映射文件中

```
<property name="myTimeWithTzConversion" type="timestamp" access="property">
  <column name="..." />
</property> 
```

并且在您的程序中，您`get/setMyTimeWithTzConversion()`只能通过休眠访问成员变量`Timestamp myTime`，并且在这个 getter/setter 中，您可以进行时区转换。

我们最终决定使用 3)（这需要更多的编程工作），因为我们不必更改现有的数据库，我们的数据库是 UTC+1（禁止 JDBC 连接字符串解决方案）并且没有干扰现有的 UI。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-17T13:32:24.387

我发现更改列类型以`timestamp with time zone`解决问题。然后，我还必须将所有其他时间戳列转换为该列。

由此我得出结论，Hibernate 不像`timestamp without time zone`UTC 那样读取列，而是像本地时区那样读取列。如果有办法将它们解释为 UTC，请告诉我。

# android - 检测安卓设备中的HDMI端口

> ID：13430835
> 
> 赞同：6
> 
> 时间：2012-11-17T13:02:31.933
> 
> 标签：android, hdmi

我正在开发一个需要检测 HDMI 端口的 Android 开发应用程序。有人可以指导我如何以编程方式检测andorid设备中的HDMI端口。

提前致谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-17T14:24:32.897

您可以尝试收听广播隐藏的android意图

```
"android.intent.action.HDMI_PLUGGED" 
```

如果您使用 android 4.0 或更高版本或使用 Sony 设备：

```
"com.sonyericsson.intent.action.HDMI_EVENT" 
```

查看本教程以获取更多信息：http: [//developer.sonymobile.com/2012/05/29/how-to-use-the-hidden-hdmi-api-tutorial/](http://developer.sonymobile.com/2012/05/29/how-to-use-the-hidden-hdmi-api-tutorial/)

还有像 KernelSwitchObserverLib [http://forum.xda-developers.com/showthread.php?t=1963785这样的第 3 方库](http://forum.xda-developers.com/showthread.php?t=1963785)

# winapi - “文件句柄中的文件名”编码错误

> ID：13430840
> 
> 赞同：0
> 
> 时间：2012-11-17T13:03:29.147
> 
> 标签：winapi, unicode

我在 msdn 中使用了这段代码（[从文件句柄获取文件名](http://msdn.microsoft.com/en-us/library/windows/desktop/aa366789%28v=vs.85%29.aspx)）来获取我从[findfirstchangenotification](http://msdn.microsoft.com/en-us/library/windows/desktop/aa365261%28v=vs.85%29.aspx)获得的文件句柄的文件名。

但现在的问题是生成的字符串的编码在某种程度上是错误的。我只看到一个字符而不是所有字符（通常是问号）。

所以我的代码调用`GetMappedFileName`，并得到问号。

```
 if (GetMappedFileName (GetCurrentProcess(), 
                         pMem, 
                         pszFilename,
                         MAX_PATH)) 
```

为什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-17T13:21:57.200

您正在调用 的“A”形式`GetMappedFileName`，它只能传递您当前 ACP 中的字符。您的文件名包含当前 ACP 中没有的字符，因此它们会变成问号。

如果文件名包含在当前 ACP 中没有表示的 Unicode 字符，您将得到问号。您应该调用 API 的“W”形式来获取文件名的 Unicode 形式，然后决定要如何处理它。

# python - Ti.API.fireEvent 的 Python 语法是什么？

> ID：13430843
> 
> 赞同：0
> 
> 时间：2012-11-17T13:03:56.940
> 
> 标签：python, titanium, tidesdk

具体来说，我需要与此等效的 Python：

```
Ti.API.fireEvent('custom_event', { row_id : 10; }); 
```

我试过这个：

```
Ti.API.fireEvent('custom_event', { 'row_id' : 10 }) 
```

但是，我无法在侦听器端检索参数值。它必须与 dict-KObject 转换有关，我无法弄清楚。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-24T22:00:53.613

我认为你可以这样做：

```
// listen:
Ti.API.addEventListener("sEventName",function(e){
    var sValue = Ti.API.get("keyName");
    Ti.API.info(sValue);
});

// fire:
Ti.API.set("keyName","value goes here");
Ti.API.fireEvent("sEventName"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-17T17:17:00.410

那应该是 Ti.App.fireEvent () 而不是 Ti.API.fireEvent()

# wpf - AppHarbor WPF ClickOnce

> ID：13430846
> 
> 赞同：0
> 
> 时间：2012-11-17T13:04:47.100
> 
> 标签：wpf, github, clickonce, appharbor

我在 GitHub 上托管了一个开源 WPF 应用程序：[https ://github.com/tomhunter-gh/SourceLog](https://github.com/tomhunter-gh/SourceLog)

我希望做的是添加 ClickOnce 部署并在 AppHarbor 上托管 ClickOnce 安装，以便在我将新提交推送到 GitHub 时自动升级用户。我正在寻找的是类似于 GitHub Windows 客户端的自动更新功能，我也希望找到一个免费托管 ClickOnce 安装位的地方。

我有几个问题：

*   AppHarbor 是如何工作的？据我所知，它需要一个包含单个 Web 应用程序项目的 Visual Studio 解决方案，然后它会构建并“部署”该项目。它具体要运行什么，它做了什么假设？例如，当您有非 Web 项目，或者您的解决方案不在根目录中时会发生什么？
*   有没有办法自定义构建和部署过程，例如使用自定义 MSBuild 脚本？
*   我将如何确保“发布”WPF 项目以便生成 ClickOnce 位？
*   有没有办法从 AppHarbor 构建过程中获取构建号？例如，四部分程序集版本 1.2.3.4 并将其写入生成的二进制文件/配置？
*   AppHarbor 有没有办法在成功构建后将 ClickOnce 位推送回 GitHub，以便我可以在 GitHub 上托管 ClickOnce 安装？

我应该采取完全不同的方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T15:43:43.660

事实证明这是完全可能的，步骤如下：

## 应用港

*   确保您使用的是 Web Worker 进程。
*   在 AppHarbor 中添加一个应用程序并将其连接到您的 GitHub 项目。

## 解决方案

*   将 Web 应用程序项目添加到解决方案
*   将 v7.0A Windows SDK 文件夹 (C:\Program Files (x86)\Microsoft SDKs\Windows\v7.0A) 复制到解决方案旁边的文件夹中

## WPF 项目

*   将Project 元素的*DefaultTargets属性设置为***Publish**。
*   将*PublishDir*属性设置为**$(OutDir)\_PublishedWebsites\{ClickOnceHostWeb}**
*   将*UpdateUrl*属性设置为**http://yourapp.apphb.com/**。
*   设置以下附加属性：

    ```
    <GenerateBootstrapperSdkPath>$(MSBuildProjectDirectory)\..\Lib\Microsoft SDKs\Windows\v7.0A\Bootstrapper</GenerateBootstrapperSdkPath>
    <SdkToolsPath>$(MSBuildProjectDirectory)\..\Lib\Microsoft SDKs\Windows\v7.0A\Bin</SdkToolsPath> 
    ```

更多详细信息可在我的[SourceLog 博客文章中找到，](http://www.unhandledexception.info/sourcelog/) [GitHub 上的 SourceLog 项目](https://github.com/tomhunter-gh/SourceLog)演示了一个完整示例。

# javascript - 在添加或编辑 Jqgrid 提交时重新加载页面

> ID：13430847
> 
> 赞同：0
> 
> 时间：2012-11-17T13:04:48.853
> 
> 标签：javascript, jquery, jqgrid

我的页面上有一个 jqgrid，用于添加数据。我使用对话框方法添加但是当用户提交时，我想刷新整个页面，而不仅仅是网格。

有谁知道我怎么能做到这一点？

```
$("#addSpecialItem").click(function () {
            jQuery("#specialItemGrid").jqGrid('editGridRow', "new",
                { height: 380,
                    addCaption: "Special Item",
                    bSubmit: "Add to Order",
                    closeAfterAdd: true,
                    afterRefresh: function () {
                        window.location.reload();
                    }
                });
        }); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T08:37:22.683

我使用 afterRefresh 而不是 afterSubmit，现在重新加载页面

```
afterSubmit: function () {
                        location.reload(true);
                    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-17T13:19:16.830

尝试`location.reload()`在您的回调中使用

（可选）您可以使用`location.reload(true)`确保从服务器而不是浏览器缓存重新加载页面

# c# - 根据 CheckBox 选中的弹出窗口

> ID：13430848
> 
> 赞同：0
> 
> 时间：2012-11-17T13:04:49.517
> 
> 标签：c#, asp.net

如果用户未选中，我想显示 asp:ModalPopupExtender 并从此表单获取数值。

我正在使用asp.net 向导控件。我不知道“完成”按钮 ID。有人可以帮助我吗？

![在此处输入图像描述](../Images/b3a076587f3ed010db5089841bd232a2.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T07:56:22.277

您应该将 的目标设置`ModalPopupExtender`为虚拟控件，即隐藏的`Button`, `LinkButton`,... 永远不会被用户单击。

该`Wizard`控件有一个名为`FinishButtonClick`. 在这里您必须检查 的状态`CheckBox`并显示或不显示调用 . 方法的弹出`Show()`窗口`ModalPopupExtender`。您还可以调用`Click()`隐藏控件的方法或使用 JavaScript`BehaviourID`使用`ModalPopupExtender`. 你的选择。

干杯!

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-17T14:47:58.503

要获得“完成”按钮 ID，只需在浏览器中打开页面并查看呈现的 html 代码**（右键单击 -> 查看源代码）**。从他们那里你可以得到完成按钮的 ID。

在获得“完成”按钮 ID 后，您可以轻松关联客户端事件来完成所需的工作。

# android - Lynx 无法呈现“按钮”标签

> ID：13430849
> 
> 赞同：0
> 
> 时间：2012-11-17T13:04:51.243
> 
> 标签：android, html, syntax-highlighting

我正在检查[Lnyx](http://www.delorie.com/web/lynxview.html)的教程，但遇到了一个奇怪的问题。

我为自己写了几个教程，都有从 Eclipse 复制的 xml 和 java 代码。我的第一个问题是Lnyx xml代码有问题，例如它可以看到

```
 android:id="@+id/btn_oneshot" 
```

但它看不到

```
&lt;Button android:id="@+id/btn_oneshot" 
```

意味着整个块是不可见的，比如

```
 &lt;Button android:id="@+id/btn_oneshot"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_marginTop="50dp"
        android:text="Start One Shot Alarm" /> 
```

我需要使用“<” 而不是“<”，因为我使用的是 SyntaxHighlighter。如果我使用“<”（但我不能）

猞猁会显示

```
 [BUTTON] main.xml: 
```

看起来这就是我的大部分页面代码被 Lynx 显示在巨大的灰色框中的原因，而不是简单的文本。我检查了我的一些教程，结果发现那些在 xml 中没有“<Button”的人工作正常，而那些在 xml 中没有“<Button”的人没有，这意味着我可以拥有代码中的<RatingBar 或<TextView 没有任何问题。

这是显示 NO xml 的 Lnyx 的打印屏幕：

![在此处输入图像描述](../Images/10bb67fd4c630bf33fdb3e37f0709e88.png)

当我将 XML 代码中的“& lt;Button”更改为“& lt;Buttons”时，xml 仍然不可见，但现在缺少灰色块：

![在此处输入图像描述](../Images/27dca09a9e254356a1baed109f2b3e8e.png)

**作为结论：**

1) xml 代码永远不可见

2) 当我在任何 xml 代码中使用“& lt;Button”时，其余代码位于灰色框中（没有可选文本）。

我不确定这一点，但据我所知，Lynx 看不到搜索蜘蛛看不到的东西，灰块也是如此。或者 Lynx 将 Button 渲染得很糟糕，并且内容对于蜘蛛仍然可见。你怎么看？

我检查了 Chrome、IE9 和 Firefox 14.0.1

# css - Scout 有像 Compass 这样的内置 mixin 吗？

> ID：13430850
> 
> 赞同：0
> 
> 时间：2012-11-17T13:04:52.680
> 
> 标签：css, frontend, compass-sass, scout-sass

[我正在使用Scout](http://mhs.github.com/scout-app/)做一些前端工作。

我知道[Compass](http://compass-style.org/)有一些我们可以导入的内置 mixin，例如：

```
@import "compass/css3/font-face";
@include font-face(
   'FontAwesome',
    font-files(
       "#{$fontAwesomePath}.woff", woff,
       "#{$fontAwesomePath}.ttf", truetype,
       "#{$fontAwesomePath}.svg#FontAwesomeRegular", svg),
       '#{$fontAwesomePath}.eot',
    normal,
    normal); 
```

[侦察兵](http://mhs.github.com/scout-app/)呢？有很多片段使用这些 @import 函数，我不确定[Scout](http://mhs.github.com/scout-app/)是否已经拥有它们，还是我应该自己编写它们？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-18T09:16:53.703

截至今天，Scout[允许访问](https://github.com/mhs/scout-app/blob/master/src/config/Gemfile)4 个库：

*   [指南针 960 插件](http://github.com/chriseppstein/compass-960-plugin)
*   [yui 指南针插件](http://github.com/chriseppstein/yui-compass-plugin)
*   [指南针-h5bp](http://rubygems.org/gems/compass-h5bp)
*   [禅格](http://zengrids.com/)

注意：Scout 是 Sass 和 Compass 的 GUI，不能与[Compass](http://compass-style.org/)或[Bourbon](http://bourbon.io/)等 Sass 框架进行比较。

# ruby-on-rails - 如何在我的 gemfile 中查看所有执行的查询以及类或方法？

> ID：13430851
> 
> 赞同：0
> 
> 时间：2012-11-17T13:04:56.643
> 
> 标签：ruby-on-rails, ruby-on-rails-3, gemfile, rails-console

我是 RoR 的新手，我想知道如何在 Rails 中做两件事（版本 2 和 3）：

1.  如何在服务器的控制台中查看生成到数据库的所有查询（保存、更新、查找等）？

2.  如何查看 Gemfile 中包含的所有 Gem 类和方法？

    例如我如何查看 CanCan、Devise 等的类和方法。

    ```
    gem "devise"
    gem "cancan"
    gem "rolify"
    gem "sass-rails" 
    ```

等等...

对不起我的英语，提前谢谢！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-17T15:04:39.243

在您的 rails 文件夹中将有一个 log 子文件夹。根据应用程序的运行位置和配置，您将能够在该文件夹中看到类似于 development.log、staging.log 或 production.log 文件的内容。

该`.to_sql`方法也可用于显示sql。例如

`User.where(:id => 29).to_sql`将产生以下结果：

```
"SELECT `users`.* FROM `users` WHERE `users`.`id` = 29" 
```

用于观赏宝石。在终端类型`bundle show devise`中，这将为您返回一条路径。去那条路。所有必要的代码都将出现在那里。

`/home/sohaib/.rvm/gems/ree-1.8.7-2011.03@moviepass/gems/devise-1.4.9`

# java - 在while循环中破坏else语句

> ID：13430852
> 
> 赞同：0
> 
> 时间：2012-11-17T13:04:58.677
> 
> 标签：java, csv

我目前正在开发一个程序来解析 CSV，然后根据 CSV 检查输入的电子邮件地址，如果它有效，则显示他们的人员信息。我遇到的问题是 else 声明说您的电子邮件无效。我当前的代码；

```
import java.io.*;
import java.util.*;

public class CSVReader123{

public static void main(String[] arg) throws Exception {

    BufferedReader CSVFile = new BufferedReader(new FileReader("testa453.csv"));
    String dataRow = CSVFile.readLine();
    //String email = "ojones@coldmail.net";
    //String password = "ocrabc";

    Scanner input = new Scanner(System.in);
    System.out.println("Please input an email adress");
    String email = input.nextLine();
    System.out.println("Please input you password");
    String password = input.nextLine();

    while (dataRow != null){

        String[] dataArray = dataRow.split(",");
        if ((dataArray[0].equals(email)) && (dataArray[1].equals(password))) {
            System.out.println("Your email is valid");
            System.out.println("Do you want to display you personel data?(Y or N)");
            String personeldata = input.nextLine();
            if ((personeldata.equals("yes")) || (personeldata.equals("Yes")) || (personeldata.equals("Y"))){
                System.out.println("You email is " +dataArray[0]+".");
                System.out.println("You password is " +dataArray[1]+".");
                System.out.println("You first name is " +dataArray[2]+".");
                System.out.println("You second name is " +dataArray[3]+".");
                System.out.println("You street name is " +dataArray[4]+".");
                System.out.println("You city name is " +dataArray[5]+".");
                System.out.println("You postcode is " +dataArray[6]+".");

            }
            else if ((personeldata.equals("no")) || (personeldata.equals("No")) || (personeldata.equals("N"))) {
                System.out.println("Shutting down.");
                break;
            }

        }
        else {
            System.out.println("BROKEN");
            break;
        }
        System.out.println();
        dataRow = CSVFile.readLine();
    }
    CSVFile.close();
    System.out.println();
}
} 
```

我遇到的问题是，如果我尝试输入有效或无效的电子邮件，它总是会打印出损坏并停止。虽然如果我删除所说的 if 语句，程序运行完美，其余部分正常工作。自从第一个 else 语句完美运行以来，我是否以某种方式在不正确的位置声明了它？任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-17T13:06:57.780

你不应该`break`从循环中。您必须使用`continue`，因为可能还有其他行将通过电子邮件检查。我的意思是，因为第一行没有通过检查，并不意味着第二行不会通过它。您必须检查所有行。

让它像这样：

```
else {
     System.out.println("BROKEN");
     dataRow = CSVFile.readLine();
     continue;
} 
```

或者像这样删除整个 else 部分：

```
}

//here was the else section

System.out.println();
dataRow = CSVFile.readLine(); 
```

# c# - 无法从派生类访问我的基类中的变量

> ID：13430855
> 
> 赞同：4
> 
> 时间：2012-11-17T13:05:14.203
> 
> 标签：c#, inheritance, xna

我正在为使用 XNA 的项目开发一个迷你游戏，并且我有一个名为“Sprite.cs”的基类，它包含一个位置向量 ( `public Vector2 m_vPosition;`)。然后我有一个名为“Player.cs”的派生类。我编写了一个用于碰撞检测的类，其中一个函数接收 2 个精灵对象（其中`gameObject`也派生自 Sprite.cs），并使用 intersect 函数返回真或假答案。

问题是当我单步执行代码时，一旦它跳转到碰撞检测功能，它就会显示我的播放器的位置是它在加载时设置的位置，并且即使在我在屏幕上移动播放器时也不会改变虽然在这个函数之外它表明位置向量工作正常。

我相信我的问题是当我将播放器对象传递给函数时，它无法访问基类（Sprite.cs）变量。以下是一些代码片段。

精灵.cs

```
public Vector2 m_vPosition;
public Rectangle m_rBoundingBox; 
```

...

```
m_rBoundingBox = new Rectangle(
    (int)m_vPosition.X, 
    (int)m_vPosition.Y, 
    (int)(m_fWidth * m_fScale),
    (int)(m_fHeight * m_fScale)); 
```

游戏1.cs

```
Player playerSprite;
playerSprite = new Player(); //where player is a child of sprite 
```

...

```
if ((Collision.BoxtoBoxCollision(playerSprite, gameObject)))
            {
                playerSprite.m_vPosition = new Vector2(100, 100);
               //just testing to see if collision works, not collision logic.
            } 
```

碰撞.cs

```
public bool BoxtoBoxCollision(Sprite objectOne, Sprite objectTwo)
    {
        if (objectOne.m_rBoundingBox.Intersects(objectTwo.m_rBoundingBox))
        {
            return true;
        }
        else
        {
            return false;
        }
    } 
```

所以我的问题是当我查看`playerSprite`传递给碰撞函数的位置向量时，它与第一次加载时相比没有改变。

如果您需要更多信息，我很乐意提供更多信息。

提前致谢。

# android - 在 Android 4.2 的 StateListDrawable 中使用默认的 ShapeDrawable

> ID：13430858
> 
> 赞同：8
> 
> 时间：2012-11-17T13:05:45.690
> 
> 标签：android, drawable, android-drawable, android-4.2-jelly-bean

其他人在使用android 4.2中的新功能`ShapeDrawable()`时遇到问题？`StateListDrawable`我曾经这样做：

```
ShapeDrawable bg = new ShapeDrawable();    //default Ctor
ShapeDrawable hl = new ShapeDrawable();
hl.getPaint().setColor(color1);
bg.getPaint().setColor(color2);

StateListDrawable s1 = new StateListDrawable();
s1.addState(new int[]{android.R.attr.state_pressed}, hl);
s1.addState(new int[]{}, bg); 
```

**但这在 Android 4.2**中不再起作用，抛出`nullpointerexception`：

```
java.lang.NullPointerException
at android.graphics.drawable.ShapeDrawable.mutate(ShapeDrawable.java:387)
at android.graphics.drawable.DrawableContainer.selectDrawable(DrawableContainer.java:315)
at android.graphics.drawable.StateListDrawable.onStateChange(StateListDrawable.java:106)
at android.graphics.drawable.StateListDrawable.addState(StateListDrawable.java:89) 
```

我通过更改我的构造函数解决了这个问题`ShapeDrawable`：

```
ShapeDrawable bg = new ShapeDrawable(new RectShape());
ShapeDrawable hl = new ShapeDrawable(new RectShape()); 
```

现在**这很好**用，但我想知道**为什么这不适用于默认构造函数**=)

感谢您的时间 ：）

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-21T09:27:45.407

Android 4.2 中的`DrawableContainer.selectDrawable()`实现发生了变化，并且`ShapeDrawable`必须使用带有 args 的构造。

如果您使用默认构造函数，当调用时`mutate()` `mShape`，`null`mShape.clone() 将抛出`CloneNotSupportedException`并返回`null`。所以你得到一个`NullPointerException`.

# python - 了解 Python 代码片段中的 FFT 运算

> ID：13430859
> 
> 赞同：2
> 
> 时间：2012-11-17T13:05:55.813
> 
> 标签：python, fft

我在一个对音频数据进行实时 FFT 图的程序中遇到了这段代码：

```
data=scipy.array(struct.unpack("%dB"%(bufferSize*2),data))
ffty=scipy.fftpack.fft(data)
ffty=abs(ffty[0:len(ffty)/2])/1000
ffty1=ffty[:len(ffty)/2]
ffty2=ffty[len(ffty)/2::]+2                
ffty2=ffty2[::-1]                
ffty=ffty1+ffty2                              
ffty=scipy.log(ffty)-2 
```

我不明白后面的部分背后的数学`abs()`。它的作用类似于添加幅度数组的前半部分，后半部分反转，然后添加 2。

这是某种标准化吗？

这是来源：

[http://www.swharden.com/blog/2010-03-05-realtime-fft-graph-of-audio-wav-file-or-microphone-input-with-python-scipy-and-wckgraph/](http://www.swharden.com/blog/2010-03-05-realtime-fft-graph-of-audio-wav-file-or-microphone-input-with-python-scipy-and-wckgraph/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-17T14:13:53.377

我不知道 Python，但它看起来只是将实数到复数 FFT 输出的两个镜像复共轭一半的幅度相加。你可以很容易地只取前半部分的大小并乘以 2。

最后它计算对数幅度，大概是为了得到（缩放的）dB值。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-17T13:55:48.617

我的猜测是音频声音以立体声文件格式出现，这是左/右通道的平均值。我这么说是因为这条线：`fftx=fftx[0:len(fftx)/4]`这是使用立体声信号时的常见操作。

但是我不知道为什么要修建运河。

# c# - 在 Action 中返回字符串值放入 img 标签的 Src

> ID：13430863
> 
> 赞同：0
> 
> 时间：2012-11-17T13:06:10.710
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-4, image

这是我的观点：

```
<img src="@{Html.RenderAction("GetUserProfileImage", "Home", new { area = "" });}" alt="" /> 
```

我的控制器：

```
 public ActionResult GetUserProfileImage() {

        string defaultresult = "http://MyProject.dev/Content/img/sample_user.png";
        if (Member.LogIn()) {

            DBFile file = GetMemberPicFromDB();
            return File(file.Content, file.ContentType);

        } else {
            return Content(defaultresult);
        }
    } 
```

因此，当我从 DB 获取文件时，一切正常，但是当我返回 URL(by `return Content`) 时，呈现的 html 中会出现一些不好的结果，如下所示：

```
<imghttp: myproject.dev="" content="" img="" sample_user.png="" src="" alt="">

    <div>
        some content from outside of img tag added here
    </div>
</imghttp:> 
```

我也将视图更改为：

```
<img src="http://myproject.dev/Content/img/sample_user.png" alt="" /> 
```

而且一切正常，

那么问题出在哪里？似乎返回内容无法将简单字符串返回到`src`属性，那么您对返回简单字符串有什么建议？

如果那不可能

我想从数据库返回时通过 URL( `http://myproject.dev/Content/img/sample_user.png`) 和`return File()`Like 获取 File，但是如何通过这个 URl( `http://myproject.dev/Content/img/sample_user.png`) 获取控制器中的文件？

如果你有任何其他建议？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-17T13:10:09.377

在这两种情况下，您都应该从控制器操作中返回一个文件，并在您的图像中引用此操作，如下所示：

```
<img src="@Url.Action("GetUserProfileImage", "Home", new { area = "" })" alt="" /> 
```

然后在您的控制器操作中，在两种情况下都返回 File 结果：

```
public ActionResult GetUserProfileImage() 
{
    if (Member.LogIn()) 
    {
        DBFile file = GetMemberPicFromDB();
        return File(file.Content, file.ContentType);
    }
    else 
    {
        string image = Server.MapPath("~/content/img/sample_user.png");
        return File(image, "image/png");
    }
} 
```

# c# - Server.MapPath 和 window.open()

> ID：13430869
> 
> 赞同：1
> 
> 时间：2012-11-17T13:07:02.923
> 
> 标签：c#, javascript, window.open, server.mappath

我实际上正在开发一个应用程序，该应用程序为用户提供了上传他们想要的文件的可能性。这些文件在上传后也应该是可视化的。

为了做到这一点，我试图用 Server.MapPath 和其他值的串联来获取文件路径。文件路径在 window.open javascript 函数中作为参数传递。

我的问题是我根本没有得到任何结果。没有打开任何窗口。

这是我的代码：

```
string completeUrl = Server.MapPath(ConfigurationManager.AppSettings["UsersImagesUploadFolder"] + CurrentUserLogin +
                               @"\\" + ((GridDataItem) e.Item)["Url"].Text);

string radWindowOpen = "<script type='text/javascript'>window.open('" + completeUrl + "')</" + "script>";
 Page.ClientScript.RegisterStartupScript(this.GetType(), "fileDisplay", radWindowOpen); 
```

我可能遗漏了一些明显的东西，但我不明白它是什么。

谢谢您的回答。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-17T13:18:42.867

正如 Damien 所指出的，`Server.MapPath`用于服务器端路径映射。客户需要看到您的网络应用程序下方的路径。

例如：

`Page.ResolveUrl("~/uploads/" + ConfigurationManager.AppSettings["UsersImagesUploadFolder"] ...`

将解决一个到`http://mydomain/vroot/uploads/...`等。

顺便说一句，还要注意这`@"\\"`会导致双反斜杠，我认为你不是故意的。

要么 要么`@"\"`将`"\\"`导致单个反斜杠。

# android - 如何在 Android 中创建列表

> ID：13430870
> 
> 赞同：-6
> 
> 时间：2012-11-17T13:07:24.223
> 
> 标签：android

我想在 android 中创建列表，如图所示。谁能帮帮我。

![在此处输入图像描述](../Images/e19ff2a12cb8e026c4dfc2a41ff7d07c.png)

问题是我不明白如何为嵌套项目创建这种类型的列表视图。就像在这个图中一样，石灰没有嵌套元素，因此它包含复选框，另一方面，甜瓜包含嵌套元素，因此它包含用于查看嵌套项目的箭头。

编辑：可以将消耗性 Listview 和普通 Listview 结合起来吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-17T13:14:07.007

要创建一个像图片中的列表，您必须使用[列表视图](http://developer.android.com/guide/topics/ui/layout/listview.html)

有很多教程，这里有几个：

*   [http://www.mkyong.com/android/android-listview-example/](http://www.mkyong.com/android/android-listview-example/)

*   [http://www.vogella.com/articles/AndroidListView/article.html](http://www.vogella.com/articles/AndroidListView/article.html)

# jquery - 自动结果搜索表单 jquery

> ID：13430871
> 
> 赞同：0
> 
> 时间：2012-11-17T13:07:35.260
> 
> 标签：jquery, search

我想要一个搜索表单（具有多个字段），当人们键入值时，它会显示可用的结果，从我的数据库中获取这些值。

做了一些研究，我发现了下面的代码，但正如你所看到的，它适用于手动预定义的单词，而不是像我想要的那样使用数据库来恢复值。

有没有办法可以更改此代码，也许是脚本，以达到我想要的结果？

```
<head>
<script>
$(function() {
    var availableTags = [
        "ActionScript",
        "AppleScript",
        "Asp",
        "BASIC",
        "C",
        "C++",
        "Clojure",
        "COBOL",
        "ColdFusion",
        "Erlang",
        "Fortran",
        "Groovy",
        "Haskell",
        "Java",
        "JavaScript",
        "Lisp",
        "Perl",
        "PHP",
        "Python",
        "Ruby",
        "Scala",
        "Scheme"
    ];
    $( "#tags" ).autocomplete({
        source: availableTags
    });
});
</script>
</head>

<body>
<div class="ui-widget">
<label for="tags">Tags: </label>
<input id="tags" />
</div>
</body> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-17T13:18:53.040

你可以看到这两个链接

[http://jqueryui.com/autocomplete/#remote-jsonp](http://jqueryui.com/autocomplete/#remote-jsonp)

[http://jqueryui.com/autocomplete/#remote](http://jqueryui.com/autocomplete/#remote)

如果你正在使用`php`

[http://www.simonbattersby.com/blog/jquery-ui-autocomplete-with-a-remote-database-and-php/](http://www.simonbattersby.com/blog/jquery-ui-autocomplete-with-a-remote-database-and-php/)

[http://burnmind.com/howto/how-to-feed-jquery-uis-autocomplete-with-a-database-generated-dataset](http://burnmind.com/howto/how-to-feed-jquery-uis-autocomplete-with-a-database-generated-dataset)

如果你正在使用`asp.net`

[http://www.dotnetcurry.com/ShowArticle.aspx?ID=515](http://www.dotnetcurry.com/ShowArticle.aspx?ID=515)

[http://www.aspsnippets.com/Articles/Using-jQuery-AutoComplete-Plugin-in-ASP.Net.aspx](http://www.aspsnippets.com/Articles/Using-jQuery-AutoComplete-Plugin-in-ASP.Net.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-17T13:16:03.787

您需要使用远程数据源

```
$( "#tags" ).autocomplete({
        source: "specify_url_to_your_server_here"
    }) 
```

[http://jqueryui.com/autocomplete/#remote](http://jqueryui.com/autocomplete/#remote)

当然，您需要一些服务器端来支持这一点。

# jquery - 如何在 zend Studio 中为 jquery 启用智能感知？

> ID：13430872
> 
> 赞同：0
> 
> 时间：2012-11-17T13:07:47.900
> 
> 标签：jquery, zend-framework, zend-studio

我目前正在开发一个基于 zend 框架的应用程序。我做过一些使用 dojo 的应用程序，zend studio intellisense 似乎很好地支持它。但是当我转移到使用 jquery 的应用程序时，缺少一些东西，它似乎来自 zend studio intellisense 的一部分。那么如何在 zend studio 上添加/改进对 jquery 的智能感知支持呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T11:07:42.763

您需要在 Zend Studio 欢迎页面上启用 jQuery，然后为特定项目启用它（使用项目上下文菜单 Configure->Enable jQuery support）。

之后，您应该在编辑 HTML 和 JS 文件时看到 jQuery 类型和方法的内容辅助。

# django - Django-registration - 如何从子类表单传递“extra_context”参数

> ID：13430873
> 
> 赞同：0
> 
> 时间：2012-11-17T13:07:52.380
> 
> 标签：django, django-registration

我正在使用 Django 注册（https://bitbucket.org/ubernostrum/django-registration/），我需要在用户注册中添加一些字段。

我已经创建了RegistrationForm 的子类。我的“forms.py”如下：

```
from django.contrib.auth.models import User
from myproject.apps.userprofile.models import Gender, UserProfile
from myproject.apps.location.models import Country, City
from django import forms
from registration.forms import RegistrationForm
from registration.models import RegistrationManager

class RegistrationFormExtend(RegistrationForm):
    """
    Subclass of ``RegistrationForm`` which adds the fiedls in the userprofile app
    """   
    gender              = forms.ModelChoiceField(queryset=Gender.objects.all(), empty_label="(Nothing)")
    country             = forms.ModelChoiceField(queryset=Country.objects.all(), empty_label="(Nothing)")
    city                = forms.ModelChoiceField(queryset=City.objects.all(), empty_label="(Nothing)")
    #profile_picture     = 
```

为了使它工作，我通过将“form_class”参数添加到“注册”视图来更改“urls.py”以显示“RegistrationFormExtend”表单：

```
from django.conf.urls.defaults import *
from django.views.generic.simple import direct_to_template

from registration.views import activate
from registration.views import register

from myproject.apps.registrationextend.forms import RegistrationFormExtend

urlpatterns = patterns('',
               ...
                   url(r'^registar/$',
                       register,
                       {'backend': 'registration.backends.default.DefaultBackend', 'form_class': RegistrationFormExtend,},
                       name='registration_register'),
                   ...
                   ) 
```

在那之后，我已经测试并且表格正在工作。用户注册成功，但“RegistrationFormExtend”中的所有额外字段（性别、国家、城市）均未**存储**在数据库中。

阅读文档[http://docs.b-list.org/django-registration/0.8/views.html#registration.views.register](http://docs.b-list.org/django-registration/0.8/views.html#registration.views.register)似乎我必须将参数“extra_context”传递给视图。

我的问题是如何将字典传递给“extra_context”参数。如何引用变量“性别”、“国家”和“城市”？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-17T19:00:44.783

您忘记了`save`扩展注册表中的方法。你必须做这样的事情：

```
class RegistrationFormExtend(RegistrationForm):
    """
    Subclass of ``RegistrationForm`` which adds the fiedls in the userprofile app
    """   
    gender = forms.ModelChoiceField(queryset=Gender.objects.all(), empty_label="(Nothing)")
    country = forms.ModelChoiceField(queryset=Country.objects.all(), empty_label="(Nothing)")
    city = forms.ModelChoiceField(queryset=City.objects.all(), empty_label="(Nothing)")
    #profile_picture

    def __init__(self, *args, **kw):
       super(RegistrationFormExtend, self).__init__(*args, **kw)

    def save(self):
        #first save the parent form
        profile = super(RegistrationFormExtend, self).save()
        #then save the custom fields
        #i am assuming that the parent form return a profile
        profile.gender = self.cleaned_data['gender']
        profile.country = self.cleaned_data['country']
        profile.city = self.cleaned_data['city']
        profile.save()
        return profile 
```

# mysql - 如何使用 MySQL Workbench 自动备份 MySQL

> ID：13430876
> 
> 赞同：6
> 
> 时间：2012-11-17T13:08:11.960
> 
> 标签：mysql, mysql-workbench

伙计们，我正在使用[MySQL Workbench](http://www.mysql.com/products/workbench/)。有没有办法用它来自动备份我的数据库？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2015-02-12T01:14:58.413

正确答案是MySQL Workbench 6.2 中**没有备份调度/自动化选项**。您可以在 6.x 版中通过单击管理下的数据导出来进行手动备份。见下文：

[MySQL WorkBench 数据导出导入](https://dev.mysql.com/doc/workbench/en/wb-admin-export-import.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-17T13:10:54.820

[http://community.discountasp.net/showthread.php?t=11972](http://community.discountasp.net/showthread.php?t=11972)

> 在 MySQL 工作台中进行备份是一项非常简单的任务，但第一次很难找到在哪里进行备份。通常，当您在 MySQL Workbench 中工作时，您将使用 SQL Development 部分。但要导出备份，您必须转到“服务器管理”部分。
> 
> 第一次通过你将不得不创建一个新的服务器实例。如果您已经在 SQL 开发部分设置了连接参数，则只需选择 Take Parameters from Existing Database Connection。
> 
> MySQL Workbench 然后将测试连接。
> 
> 在“远程管理类型”对话框中，选择不使用远程管理。
> 
> 创建实例配置文件只是询问您连接的名称。你可以在这里输入任何你想要的。
> 
> 当您在“服务器管理”部分建立连接时，您将看到远程管理已禁用的通知。但别担心，您仍然可以备份您的数据库。

```
Click the Data Dump tab to access the export utility.
Check the box for the database you want to back up
Choose Export to Self-Contained File and make sure the path is correct.
Hit the Start Export button. 
```

编辑：我正在使用具有计划选项的 mysql 管理员。也检查一下：

[http://www.davecolorado.com/index.php/scheduled-backup-with-mysql-administrator-on-windows/](http://www.davecolorado.com/index.php/scheduled-backup-with-mysql-administrator-on-windows/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-04-26T05:27:19.547

您可以使用 Create Event in`MySql workbench`创建自动备份。示例代码：

```
CREATE EVENT IF NOT EXISTS test_event_01
ON SCHEDULE AT CURRENT_TIMESTAMP
DO
  INSERT INTO messages(message,created_at)
  VALUES('Test MySQL Event 1',NOW()); 
```

检查此链接以获取更多详细信息： [http ://www.mysqltutorial.org/mysql-triggers/working-mysql-scheduled-event/](http://www.mysqltutorial.org/mysql-triggers/working-mysql-scheduled-event/)

# facebook-like - 用于 WordPress 插件开发的 Facebook 应用程序 ID

> ID：13430877
> 
> 赞同：0
> 
> 时间：2012-11-17T13:08:19.993
> 
> 标签：facebook-like, facebook-javascript-sdk, wordpress-theming, wordpress

我正在构建一个小型社交 WP 插件（更多用于学习目的），并且我正在尝试了解各种社交网络共享 api 等。

关于 Facebook 共享，似乎需要应用程序 ID。如果这是一次性的事情，在单个站点上，那就很容易了，但是在编写插件的情况下，我显然希望用户易于安装和设置，而不一定让每个用户都必须放入一个从选项面板。

从 FB.init 中删除它似乎可以工作，尽管我正在本地开发，并且在尝试使用 like 按钮时出现错误。

是否需要 100% 的 APP ID？如果是这样，我作为插件作者可以使用一个（认为这与网站 URL 配对，所以不确定它是否可能）或插件

有这方面经验的人有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-17T13:13:02.000

要使用提要对话框，您确实需要一个应用程序（带有 ID）。但是你可以——当然——只使用你自己的应用程序并将其放入插件中。App ID 并不是什么秘密，通过这种方式，您还可以使用 Facebook Insights 监控使用情况。

有一个选项没有提要对话框：sharer.php

在这里解释：[如何在 PHP 中使用 Facebook共享器](https://stackoverflow.com/questions/11186852/how-to-use-facebook-sharer-in-php)

请记住，它已被弃用（请参阅其他线程）。

# android - 在三星手机中拍摄照片旋转 90 度

> ID：13430895
> 
> 赞同：7
> 
> 时间：2012-11-17T13:10:44.690
> 
> 标签：android, android-camera, android-camera-intent

照片旋转 90 度，同时从三星手机其余其他手机（HTC）的相机捕捉它工作正常。请帮助我。

```
Intent cameraIntent = new Intent(android.provider.MediaStore.ACTION_IMAGE_CAPTURE);
startActivityForResult(cameraIntent, IMAGE_CAPTURE); 

@Override 
 protected void onActivityResult(int requestCode, int resultCode, Intent data) {     
    super.onActivityResult(requestCode, resultCode, data);    
      try
    {
    if (requestCode == IMAGE_CAPTURE) {
       if (resultCode == RESULT_OK){

       Uri contentUri = data.getData();
       if(contentUri!=null)
       {
        String[] proj = { MediaStore.Images.Media.DATA };         
            Cursor cursor = managedQuery(contentUri, proj, null, null, null);         
        int column_index = cursor.getColumnIndexOrThrow(MediaStore.Images.Media.DATA);         
        cursor.moveToFirst();         
        imageUri = Uri.parse(cursor.getString(column_index));
       }

       tempBitmap = (Bitmap) data.getExtras().get("data"); 
       mainImageView.setImageBitmap(tempBitmap);
       isCaptureFromCamera = true;
    }
 } 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-02T05:25:59.750

一些设备根据设备方向旋转图像。

在这里，我编写了一种常用方法来获取方向并以正确的比例获取图像

```
 public  Bitmap decodeFile(String path) {//you can provide file path here 
        int orientation;
        try {
            if (path == null) {
                return null;
            }
            // decode image size 
            BitmapFactory.Options o = new BitmapFactory.Options();
            o.inJustDecodeBounds = true;
            // Find the correct scale value. It should be the power of 2.
            final int REQUIRED_SIZE = 70;
            int width_tmp = o.outWidth, height_tmp = o.outHeight;
            int scale = 0;
            while (true) {
                if (width_tmp / 2 < REQUIRED_SIZE
                        || height_tmp / 2 < REQUIRED_SIZE)
                    break;
                width_tmp /= 2;
                height_tmp /= 2;
            scale++;
            }
            // decode with inSampleSize
            BitmapFactory.Options o2 = new BitmapFactory.Options();
            o2.inSampleSize = scale;
            Bitmap bm = BitmapFactory.decodeFile(path, o2);
            Bitmap bitmap = bm;

            ExifInterface exif = new ExifInterface(path);

            orientation = exif
                    .getAttributeInt(ExifInterface.TAG_ORIENTATION, 1);

            Log.e("ExifInteface .........", "rotation ="+orientation);

//          exif.setAttribute(ExifInterface.ORIENTATION_ROTATE_90, 90);

            Log.e("orientation", "" + orientation);
            Matrix m = new Matrix();

            if ((orientation == ExifInterface.ORIENTATION_ROTATE_180)) {
                m.postRotate(180);
//              m.postScale((float) bm.getWidth(), (float) bm.getHeight());
                // if(m.preRotate(90)){
                Log.e("in orientation", "" + orientation);
                bitmap = Bitmap.createBitmap(bm, 0, 0, bm.getWidth(),
                        bm.getHeight(), m, true);
                return bitmap;
            } else if (orientation == ExifInterface.ORIENTATION_ROTATE_90) {
                m.postRotate(90); 
                Log.e("in orientation", "" + orientation);
                bitmap = Bitmap.createBitmap(bm, 0, 0, bm.getWidth(),
                        bm.getHeight(), m, true);
                return bitmap;
            }
            else if (orientation == ExifInterface.ORIENTATION_ROTATE_270) {
                m.postRotate(270);
                Log.e("in orientation", "" + orientation);
                bitmap = Bitmap.createBitmap(bm, 0, 0, bm.getWidth(),
                        bm.getHeight(), m, true);
                return bitmap;
            } 
            return bitmap;
        } catch (Exception e) {
            return null;
        }

    } 
```

**编辑：**

这段代码没有优化，我只是展示了我的一个测试项目中的逻辑代码。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-04-30T17:45:31.533

您可以添加到上述解决方案的另一件事是`"samsung".contentEquals(Build.MANUFACTURER)`. 如果您知道您的问题仅与三星设备有关，您可以合理地确定您需要旋转返回的图像（仅）`if ("samsung".contentEquals(Build.MANUFACTURER) && getActivity().getRequestedOrientation() == ActivityInfo.SCREEN_ORIENTATION_SENSOR_PORTRAIT // && width > height//) // here you know you need to rotate`

你可以“合理地”相信轮换是有必要的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-15T18:46:07.447

```
public static Bitmap rotateBitmap(Bitmap b, float degrees) {
    Matrix m = new Matrix();
    if (degrees != 0) {
        // clockwise
        m.postRotate(degrees, (float) b.getWidth() / 2,
                (float) b.getHeight() / 2);
    }

    try {
        Bitmap b2 = Bitmap.createBitmap(b, 0, 0, b.getWidth(),
                b.getHeight(), m, true);
        if (b != b2) {
            b.recycle();
            b = b2;
        }
    } catch (OutOfMemoryError ex) {
        // We have no memory to rotate. Return the original bitmap.
    }
    return b;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-15T18:46:30.740

如果它真的是一个错误，那么您可能必须手动将其旋转回横向。位图数据始终具有宽度和高度，只需查看数字，如果宽度小于高度，则按照 alistair3408 的回答旋转图像。

# css - 如何覆盖移动 chrome 中的字体增强

> ID：13430897
> 
> 赞同：23
> 
> 时间：2012-11-17T13:11:01.843
> 
> 标签：css, google-chrome, font-size

是否可以覆盖移动 chrome 中的字体增强？我之前搜索过互联网~包括stackoverflow~。

我发现有些人说不可能，我还发现元标记有助于文本但也减少了文本的面积......这不好......

将感谢您的帮助..

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2013-05-08T04:31:47.037

将以下行添加到我的 reset.css 对我有用

```
 html * {max-height:1000000px;} 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-11-26T14:41:34.637

禁用字体增强没有真正的可能性。可能有一些技巧，但它们的目的是不同的，事实上，做一些不同的事情。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2019-09-05T05:03:16.503

尝试[`text-size-adjust`](https://caniuse.com/#feat=text-size-adjust&search=Text-si)：

```
html {
    text-size-adjust: none;
    -ms-text-size-adjust: none;
    -webkit-text-size-adjust: none;
    -moz-text-size-adjust: none;
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-11-23T21:56:25.837

看起来有一些人有办法让它发挥作用。

[添加一些 CSS](https://bugs.webkit.org/show_bug.cgi?id=84186#c16)规则或给[父元素 width 和 height](https://stackoverflow.com/a/11447526/561665)。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-02-04T17:04:11.767

Matt 和 Kundan Sankhe 的回答是目前最好的解决方案。

```
.element { max-height: 999999px; } 
```

如果问题仍然存在，请尝试在 head 标签内添加：-

```
<meta name="viewport" content="width=device-width, initial-scale=1"> 
```

但请记住，这可能会导致图像标签或图像背景大小标签出现问题。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-09-01T13:54:56.603

这是一个 webkit 官方错误。您可以在[Webkit官方网站上查看](https://bugs.webkit.org/show_bug.cgi?id=84186)

您必须仅针对必须覆盖字体增强的特定元素，而不是针对不需要的元素。IE

```
p {
   max-height: 999999px;
} 
```

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2015-09-30T08:19:22.943

Android Chrome 仅将字体增强应用于具有动态高度的元素。一旦您指定了**height**、**max-height**或**line-height**，就不会应用字体提升。但是你应该注意内联元素，例如`span`其高度或最大高度属性无效。在这种情况下，您可以将显示设置`inline-block`为以下代码或其他可以设置高度的框类型。
`span { font-size:12px; line-height:12px; display:inline-block; }`

* * *

## 回答 #8

> 赞同：-2
> 
> 时间：2015-10-12T21:00:16.943

对于台式机和可能的移动设备（尚未测试移动设备），您可以通过在 HTML 元素上设置基本字体大小来禁用 Chrome 和 FF 中的字体大小提升。例如：

```
html {
  font-size: 16px;
} 
```

这比最大高度要少。但是，从可访问性的角度来看仍然很脏。

如果需要，您也可以使用 jQuery 来设置它。

# c# - 如何使用我自己的调试器可视化器来编辑变量运行时？

> ID：13430900
> 
> 赞同：4
> 
> 时间：2012-11-17T13:11:11.330
> 
> 标签：c#, debuggervisualizer

我正在编写自己的调试器可视化器。所有这些都非常适合向可视化器展示数据。

现在我添加代码以更清晰：

```
public class MyVisualiserObjectSource : VisualizerObjectSource
{
    public override void GetData(object target, Stream outgoingData)
    {
        string data= target as string;
        var writer = new StreamWriter(outgoingData);
        writer.Write(data);
        writer.Flush();
    }    
}

public class MyVirtualizer : DialogDebuggerVisualizer
{
    protected override void Show(IDialogVisualizerService windowService, IVisualizerObjectProvider objectProvider)
    {
        var streamReader = new StreamReader(objectProvider.GetData());

        string data = streamReader.ReadToEnd();

        using (var form = new MyVirtualizerForm(data))
        {
            windowService.ShowDialog(form);

        }

    }
} 
```

这里的字符串被传递给可视化器并显示我自己的表单。有用。但现在我想将修改后的数据从表单传回给变量。

我怎么做？

**编辑：**

我发现我需要重写`TransferData`. `VisualizerObjectSource`但是在[MSDN](http://msdn.microsoft.com/en-us/library/microsoft.visualstudio.debuggervisualizers.visualizerobjectsource.transferdata%28v=vs.80%29.aspx)中没有关于我如何正确实现这一点的详细信息。

有人能帮助我吗？

**编辑2：**

我用 IL-Spy 看了什么`TransferData`方法。它抛出一个异常。所以我重写了这个方法。但它仍然无法正常工作。在 中`incomingData`是修改后的字符串`Form`。但我没有把这个值取回变量:(

```
public class StringVisualiserObjectSource : VisualizerObjectSource
    {
        public override void GetData(object target, Stream outgoingData)
        {
            var data = target as string;
            var writer = new StreamWriter(outgoingData);
            writer.Write(data);
            writer.Flush();

        }

        public override void TransferData(object target, Stream incomingData, Stream outgoingData)
        {
            incomingData.CopyTo(outgoingData);
        }

    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T21:51:14.347

您只需要在表单中添加一个公共属性，其中包含您希望“传回”的数据。例如，如果您的表单包含一个名为 MyDataTextBox 的文本框，您需要在表单上创建一个公共属性，例如：

```
public MyVirtualizerForm : System.Windows.Form
{
    public string MyData
    {
     get{ return MyDataTextBox.Text;}
    }
} 
```

然后，您可以通过执行以下操作在关闭表单时访问文本框的文本：

**已编辑 - 将数据传递回变量**

这假设您从表单返回的数据是一个字符串。

```
 using (var form = new MyVirtualizerForm(data))
  {
            windowService.ShowDialog(form);
            var formData = form.MyData;

            using (MemoryStream returnStream = 
               new MemoryStream(ASCIIEncoding.Default.GetBytes(formData)))
            {
               objectProvider.TransferData(returnStream);
            }
   } 
```

这是你想要达到的目标吗？此外，您可能会发现以下链接可用作参考：http: [//msdn.microsoft.com/en-us/library/microsoft.visualstudio.debuggervisualizers.ivisualizerobjectprovider.transferdata.aspx](http://msdn.microsoft.com/en-us/library/microsoft.visualstudio.debuggervisualizers.ivisualizerobjectprovider.transferdata.aspx)

# maven - jenkins maven多模块作业中的重复检查样式警告

> ID：13430904
> 
> 赞同：3
> 
> 时间：2012-11-17T13:11:48.857
> 
> 标签：maven, jenkins, checkstyle

我有一个 jenkins maven 工作，有一个聚合器 pom 和一堆子模块。当 jenkins 显示 checkstyle 警告时，它会这样做：

*   子模块 1：10 个警告
*   子模块 2：10 个警告
*   聚合器模块：20 个警告

*   总计：40 个警告

换句话说，聚合器（正确地？）聚合子模块中发现的警告，如果不是这样，这不会是一个大问题，因为*总数*会变成应有的两倍。

有谁知道问题是什么？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-17T20:52:17.517

这取决于您使用的是 Freestyle 项目类型还是[Evil Maven 项目类型](http://jenkins.361315.n4.nabble.com/plugins-disabled-when-using-m2-build-td367093.html)。

如果您使用的是自由式，您只需为`checkstyle.xml`结果设置模式以排除聚合器或排除子项目。

如果您使用的是 evil 兄弟，您可能需要调整“每个模块”配置以禁用子模块的报告。

这里的问题是聚合器模块正在从子项目复制警告以生成聚合报告。

当作业在 Jenkins 上运行时，您还可以禁用聚合。

这基本上是邪恶项目类型的自动嗅探“魔法”与 maven-checkstyle-plugin 实现聚合报告的方式之间的斗争。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-18T11:16:38.983

[你可以从这里](https://stackoverflow.com/questions/13430161/preventing-checkstyle-from-running-in-a-specific-maven-submodule/13434712#comment18366114_13434712)调整一些技巧

将以下内容添加到聚合器 pom：

```
<project>
  ...
  <profiles>
    ...
    <profile>
      <id>on-jenkins</id>
      <build>
        <plugins>
          <plugin>
            <artifactId>maven-checkstyle-plugin</artifactId>
            <inherited>false</inherited>
            <configuration>
              <skip>true</skip>
            </configuration>
          </plugin>
        </plugins>
      </build>
    </profile>
    ...
  </profiles>
  ...
</project> 
```

并在 Jenkins 工作中添加`-P+on-jenkins`到您的 Maven 目标。

# sql - 仅在第一次出现字符/分隔符时拆分字符串

> ID：13430905
> 
> 赞同：8
> 
> 时间：2012-11-17T13:11:53.367
> 
> 标签：sql, sql-server, string

我整个上午都在寻找这个。

我对 SQL Server 的了解并不出色，而且我没有答案。

具体例子是：`City-Of-Style`或`Part1-Part2`。

我需要将这些示例拆分为`City`and`Of-Style`和`Part1`and `Part2`。

我想出了这段代码，但如果字符串包含“-”，它会切换 part1 和 part2。

```
PARSENAME(REPLACE('sample-string', '-', '.'), 1)) 
```

非常感谢您对完成此操作的任何帮助（最好没有 200 行功能）。

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-11-17T13:19:55.197

如果我理解正确，这将完成这项工作；[单击此处获取小提琴](http://sqlfiddle.com/#!3/d41d8/6337)

```
DECLARE @s VARCHAR(50)= 'City-Of-Style'

SELECT SUBSTRING(@s,0,CHARINDEX('-',@s,0)) AS firstPart,
    SUBSTRING(@s,CHARINDEX('-',@s,0)+1,LEN(@s)) AS secondPart 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-02-21T16:03:01.837

如果字符串中没有破折号，则为空白。如果有破折号，则下面的代码段为您提供第一部分，否则为整个字符串。

```
DECLARE @TextIn VARCHAR(50)= 'City-Of-Style'
DECLARE @TextOut VARCHAR(500)
SELECT CASE WHEN CHARINDEX('-',@TextIn)>0 THEN SUBSTRING(@TextIn,0,CHARINDEX('-',@TextIn,0)) ELSE @TextIn END 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2018-08-13T13:33:17.833

在 SQL 中，您可以使用该`split_part`函数。

例如`cast(split_part(column,'-',1) as text) as new_column`

输入：king-adfad-adfadd
输出：king

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-09-16T17:37:40.123

基于先前的答案，我将其作为解决方案提供 - 它提供了第一个和最后一个元素。如果没有找到分隔符，则最后一个元素为空。

```
DECLARE 
@del varchar(1) = '-',
@TextIn nvarchar(20) = 'City-Of-Style'
SELECT CASE WHEN CHARINDEX(@del,@TextIn)>0 THEN SUBSTRING(@TextIn,0,CHARINDEX(@del,@TextIn,0)) ELSE @TextIn END AS firstPart,
 CASE WHEN CHARINDEX(@del,@TextIn)>0 THEN SUBSTRING(@TextIn,CHARINDEX(@del,@TextIn,0)+1,LEN(@TextIn)) ELSE '' END AS secondPart 
```

或者，如果您正在使用存储过程，则可以将结果分配给变量：

```
DECLARE 
@del nvarchar(1) = '-',
@firstPart nvarchar(100),
@lastPart nvarchar(100),
@TextIn nvarchar(20) = 'City-Of-Style'
SELECT @firstPart = (CASE WHEN CHARINDEX(@del,@TextIn)>0 THEN SUBSTRING(@TextIn,0,CHARINDEX(@del,@TextIn,0)) ELSE @TextIn END),
@lastPart = (CASE WHEN CHARINDEX(@del,@TextIn)>0 THEN SUBSTRING(@TextIn,CHARINDEX(@del,@TextIn,0)+1,LEN(@TextIn)) ELSE '' END)

select @firstPart, @lastPart 
```

# printing - 在 Monomac 中打印

> ID：13430923
> 
> 赞同：0
> 
> 时间：2012-11-17T13:15:04.887
> 
> 标签：printing, monomac

如何在 monomac 中打印？这是我所能得到的，但我似乎无法在 NSView 中获得对图形上下文的引用。如果我向 PrintDoc 添加一个控件，那很好，但我想绘制。

```
//Print Function
void Print(){
    PrintDoc NewDoc = new PrintDoc ();
    NewDoc.SetFrameSize(new SizeF(600,1000));
    NSPrintOperation P = NSPrintOperation.FromView (NewDoc);
    P.RunOperation ();
}

//NSView to be printed
class PrintDoc:NSView
{
    public PrintDoc ()
    {
    }
    public override void DrawRect (System.Drawing.RectangleF dirtyRect)
    {
        //NSPrintOperation.CurrentOperation.Context !! this is null
        //NSGraphicsContext.CurrentContext !! this hangs
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-17T17:54:20.683

我设法通过手动获取上下文而不是使用 NSGraphicsContext.CurrentContext 来使其工作：

[https://github.com/picoe/Eto/blob/feature/printing/Source/Eto.Platform.Mac/Forms/Printing/PrintDocumentHandler.cs#L39](https://github.com/picoe/Eto/blob/feature/printing/Source/Eto.Platform.Mac/Forms/Printing/PrintDocumentHandler.cs#L39)

片段：

```
static IntPtr selCurrentContext = Selector.GetHandle ("currentContext");
static IntPtr classNSGraphicsContext = Class.GetHandle ("NSGraphicsContext");

public override void DrawRect (System.Drawing.RectangleF dirtyRect)
{
    var operation = NSPrintOperation.CurrentOperation;

    var context = new NSGraphicsContext(Messaging.IntPtr_objc_msgSend (classNSGraphicsContext, selCurrentContext));
    // this causes monomac to hang for some reason:
    //var context = NSGraphicsContext.CurrentContext;
} 
```

# google-maps - 按元素 ID 更改地图设置

> ID：13430924
> 
> 赞同：-2
> 
> 时间：2012-11-17T13:15:05.390
> 
> 标签：google-maps, google-maps-api-3

有代码：

```
jQuery(function() {
  new google.maps.Map(document.getElementById('mymap'), {
    zoom: 14,
    center: new google.maps.LatLng(12, 34),
    streetViewControl: false,
    mapTypeId: google.maps.MapTypeId.ROADMAP
  });
}); 
```

无需更改此代码即可更改地图类型。

```
jQuery(function() {
  var map = ???
  map.setMapTypeId(google.maps.MapTypeId.TERRAIN);
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-17T15:52:23.687

您的函数结束后无法更改地图，因为它不再可访问。

唯一的方法是给它一个名称，以便您可以访问它（只能通过更改无法更改的代码来完成）：

```
var map = null;
jQuery(function() {
  map = new google.maps.Map(document.getElementById('mymap'), {
    zoom: 14,
    center: new google.maps.LatLng(12, 34),
    streetViewControl: false,
    mapTypeId: google.maps.MapTypeId.ROADMAP
  });
}); 
```

您的标题显示“按元素 id”，您不能使用 HTML id 修改 javascript 对象。

# c# - 持续检查服务器状态

> ID：13430926
> 
> 赞同：3
> 
> 时间：2012-11-17T13:15:21.320
> 
> 标签：c#, client-server

我有基于 C# 的客户端-服务器架构。客户端将连接到服务器并交换数据。

我需要不断检查服务器状态，如果服务器出现故障（从网络中删除或关闭），客户端需要指出这一点。

如果我`Ping`在客户端程序中使用实用程序，就性能而言，哪种方法是最好的方法，即通过单独的线程或通过后台类进行监控？

```
public static bool GetPingResponse(string IpAddress, int timeout = 3000)
{
    var ping = new Ping();
    var reply = ping.Send(IpAddress, timeout); 
    if (reply.Status == IPStatus.Success)
    {
        return true;
    }
    else
    {
        return false;
    }
} 
```

在性能和资源消耗方面，还有比 Ping 更好的选择吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-17T13:21:45.537

您需要确保您的电话代表“可用”。例如，如果它是一个 http 服务器，发出一个 ping 请求只是说它可以通过网络访问。Web 服务器可能已关闭，但网络堆栈已启动。如果是这种情况，请调用一些可以使用更多堆栈的东西，例如 http。如果有后端数据库，调用可以通过数据库服务器。这完全取决于您对“可用”的定义。如果重点是说应用程序可用，您应该查看一个调用，该调用在整个堆栈中执行路径。

它还取决于服务器可用的内容以及客户端和服务器之间通过防火墙打开的内容。

Ping 使用一些站点选择通过防火墙阻止的 ICMP。如果那是开放的，这是一个廉价的通话，开销很小。

如果它被阻止并且它是一个 web 服务器，例如通过 http，你可以在 web 服务器上有一个便宜的端点，你可以通过 C# 中的 http 客户端调用它。

您可能希望使用计时器在后台线程上进行轮询。查看[BackgroundWorker 类](http://msdn.microsoft.com/en-us/library/system.componentmodel.backgroundworker.aspx)或[ThreadPool.QueueUserWorkitem](http://msdn.microsoft.com/en-us/library/kbf0f1ct.aspx)。

最后，您可以研究一个监控解决方案 - 有很多可以监控服务器的多个方面。如果你走这条路，客户端可以简单地查询监控解决方案，这可能会更好，因为你不会有 n 个客户端轮询你的服务器——只有一个监控堆栈。

附带说明一下，最后一段代码可以简化为：

```
return reply.Status == IPStatus.Success; 
```

# delphi - FileSize，和这个程序有什么区别，有什么更好的用处？

> ID：13430927
> 
> 赞同：7
> 
> 时间：2012-11-17T13:15:24.627
> 
> 标签：delphi, delphi-xe2

关于获取文件的大小，我有这两个功能：

```
function GetFileSize1(const FileName: TFileName): Int64;
var
 iTmp: Int64;
 SearchRec: TSearchRec;
begin
  iTmp := -1;
  if FindFirst(FileName, faAnyFile, SearchRec) = 0 then
  begin
    iTmp := SearchRec.Size;
    System.SysUtils.FindClose(SearchRec);
  end;
  Result := iTmp;
end; 
```

和：

```
function GetFileSize2(const FileName: TFileName): Int64;
var
 FileStream: TFileStream;
begin
  FileStream := TFileStream.Create(FileName, fmOpenRead);
  try
    Result := FileStream.Size; 
  finally  
    FileStream.Free;
  end; 
end; 
```

在实践中，它有什么区别？当然，两者都返回相同的结果，但更实惠、更快速、更安全的是什么？或者更好的是，什么是首选用途？第一还是第二？非常感谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-17T13:43:33.560

嗯，明显的区别就是`GetFileSize2`打开文件，使用`CreateFile`API​​获取文件句柄。相反，`GetFileSize1`不会因为它从文件元数据中读取大小。

所以我希望`GetFileSize1`表现更好。虽然，对于许多应用程序而言，性能差异并不重要。更重要的是，在将成功`GetFileSize2`的情况下，可能会由于共享冲突而失败。`GetFileSize1`所以你真的不应该使用`GetFileSize2`.

另请注意，您提供的两个函数在发生错误时的行为不同：`GetFileSize1`返回 -1，并`GetFileSize2`引发异常。

我个人更喜欢这个版本：

```
function GetFileSize3(const FileName: string): Int64;
var
  fad: TWin32FileAttributeData;
begin
  if not GetFileAttributesEx(PChar(FileName), GetFileExInfoStandard, @fad) then
    RaiseLastOSError;
  Int64Rec(Result).Lo := fad.nFileSizeLow;
  Int64Rec(Result).Hi := fad.nFileSizeHigh;
end; 
```

或者，如果您希望在出现错误时返回 -1，您可以这样写：

```
function GetFileSize3(const FileName: string): Int64;
var
  fad: TWin32FileAttributeData;
begin
  if not GetFileAttributesEx(PChar(FileName), GetFileExInfoStandard, @fad) then
    exit(-1);
  Int64Rec(Result).Lo := fad.nFileSizeLow;
  Int64Rec(Result).Hi := fad.nFileSizeHigh;
end; 
```

有些感觉这比 call 更自然`FindFirstFile`，但这可能只是个人喜好。这种方法真的没有错`FindFirstFile`。虽然它不需要那个`iTmp`变量。你可以更清楚地写成这样：

```
function GetFileSize1(const FileName: TFileName): Int64;
var
 SearchRec: TSearchRec;
begin
  if FindFirst(FileName, faAnyFile, SearchRec) = 0 then
  begin
    Result := SearchRec.Size;
    System.SysUtils.FindClose(SearchRec);
  end
  else
    Result := -1;
end; 
```

**更新：** @CodeInChaos 很好地说明了不打开文件句柄的方法。这些方法可能会为硬链接文件提供不准确的结果。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-17T13:43:30.780

不同之处在于，GetFileSize1 读取文件的元信息（Windows-API-Call），而 GetFileSize2 直接接触文件（获取 FileHandle，遍历到最后计算大小）。

因此 GetFileSize1 消耗的性能/资源少于 GetFileSize2

更新

我忘了提一下，如果文件已经在使用中，你可能不允许使用 TFileStream 访问，但元信息将可用。

更新（只是大卫建议的另一个变体）

```
function GetFileSize1(const FileName: TFileName): Int64;
var
 SearchRec: TSearchRec;
begin
  if FindFirst( FileName, faAnyFile, SearchRec ) = 0 then
    try
      Exit( SearchRec.Size );
    finally
      System.SysUtils.FindClose(SearchRec);
    end;
  Result := -1;
end; 
```

# swing - 编辑在 JtextPane 中选择的文本

> ID：13430928
> 
> 赞同：0
> 
> 时间：2012-11-17T13:15:27.233
> 
> 标签：swing, edit, jtextpane

我有两个 Jtextpane 我想做的是从 1 个 Jtextpane 中选择文本，并且我希望它应该在选择菜单项 Edit 后出现在第二个 Jtextpane 中

我做过的

```
 popMenu[i].addActionListener(new ActionListener() {
                    @Override
                    public void actionPerformed(ActionEvent e) {
                        String str = e.getActionCommand();
                   .....
                        if (str.equalsIgnoreCase("edit")) {
                            taSecond.setBackground(new Color(0xFBFCDD));
                            taSecond.setText(taFirst.getSelectedText());
                            System.out.println("bounds====>"+taFirst.getBounds());
                            taFirst.getBounds().setBounds(taFirst.getBounds());
                            editedText = true;

                        }
                    }
                }); 
```

现在我不知道如何将编辑后的文本放回从我得到文本的位置选择的位置谁能告诉解决方案

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-17T13:31:26.603

谢谢

```
try {

                    doc.remove(start, end-start);
                    doc.insertString(start, str, normal);
                    editedText=false;
                } catch (BadLocationException ex) {
                    Logger.getLogger(ChatPane.class.getName()).log(Level.SEVERE, null, ex);
                } 
```

# c++ - connect() 似乎在信号前面加上了错误的命名空间

> ID：13430936
> 
> 赞同：0
> 
> 时间：2012-11-17T13:16:40.753
> 
> 标签：c++, qt, signals, slots

我正在尝试使用信号和插槽将信息从另一个线程传递给 GUI 线程，因为我无法从任何其他线程修改像素图。我遇到了运行时错误：

```
Object::connect: No such signal QThread::image_change(std::string) in visualiser.cpp:33 
```

从这个来看，虽然我可能错了，但看起来信号是在错误的命名空间中搜索的，因为它实际上是在`Visualiser::image_change()`.

我的代码如下：

可视化器.cpp：

```
 QFutureWatcher<void> watcher;
    connect(watcher.thread(), SIGNAL(image_change(std::string)), QCoreApplication::instance()->thread(), SLOT(update_image(std::string)), Qt::QueuedConnection);
    QFuture<void> update_thread = QtConcurrent::run(this, &Visualiser::update_state);
    watcher.setFuture(update_thread);

   ...

    emit(image_change(imageSrc));

   ...

    void Visualiser::update_image(std::string src)
{
    QImage image;
    image.load(src.c_str());
    ui->visualContainer->setPixmap(QPixmap::fromImage(image));
} 
```

可视化器.h：

```
 signals:
    void image_change(std::string src);

public slots:
    void update_image(std::string src); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-17T13:23:31.243

不要将线程指针`connect`传递给 - 将指针传递给事件的发送者和接收者（[像这样](https://qt-project.org/doc/qt-4.8/qobject.html#connect-3)）。因为您正在给它`QThread`指针，所以 Qt 正在寻找那些`QThread`不存在的信号和插槽。如果你给它`Visualizer`指针，Qt 会在 中寻找那些函数`Visualizer`，它们真正在哪里，一切都会正常工作。

希望有帮助！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-17T19:02:44.373

连接的源和目标是同一个对象，`this`所以`connect`调用应该是：

```
connect(this, SIGNAL(image_change(std::string)), this, SLOT(update_image(std::string))); 
```

由于信号将从另一个线程发出，而不是与其`Visualizer`有关联的线程（参见[QObject::moveToThread()](http://qt-project.org/doc/qobject.html#moveToThread)），与槽的连接将自动排队，并且槽将由正确的线程执行。

但是为了使排队连接工作，Qt 必须临时存储参数，直到它可以实际调用插槽，这是通过将其转换为`QVariant`，将其存储在某处，然后在接收线程准备好执行时将其重新转换为实际类型来完成的插槽。

因此，您需要注册`std::string`到 Qt 的元类型系统，[`Q_DECLARE_METATYPE`](http://qt-project.org/doc/qmetatype.html)或者将信号和槽参数类型更改为已经注册的类型（如`QString`或`QByteArray`）。

# storyboard - 根据设备型号（iPhone 5 和 iPhone 4S）在情节提要中加载第一个视图

> ID：13430939
> 
> 赞同：0
> 
> 时间：2012-11-17T13:17:15.657
> 
> 标签：storyboard, iphone-5, ios-universal-app

我正在开发一个需要在 iPhone 5、iPhone 4S、iPad、iPad Retina 和 iPad mini 上运行的通用应用程序。

一切都很好，除了一件事。我需要根据应用程序运行的设备（基于 iPhone 5 和 iPhone 4S）加载我的第一个视图。我为 iPhone 5 和 iPhone 4S 设计了单独的视图，并使用了故事板。

我知道如何检测设备，但我不知道如何根据设备型号加载第一个视图。

我在导航控制器中嵌入的第一个视图。

有人知道如何实现吗？

任何帮助，将不胜感激。预先感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T10:04:16.583

是时候回答我自己的问题了。我改变了我的逻辑，现在不是在情节提要中创建和加载两个不同的视图；现在我正在设置放置在视图上的控件的坐标。现在我可以成功检测到当前设备并适当地设置我的视图。

# share - Google+ 共享 - 将哈希值作为参数传递

> ID：13430940
> 
> 赞同：0
> 
> 时间：2012-11-17T13:17:16.010
> 
> 标签：share, google-plus, hashtag

在 twitter 中，您可以在按下推文按钮时告诉您要包​​含哪些主题标签，这是使用`hashtags`参数完成的。

分享到 Google+ 时是否有类似情况？我已经阅读了[Share 文档](https://developers.google.com/+/plugins/share/)，但没有发现类似的内容（我最关心 Share Link 的共享方法）。

你知道有什么方法可以做到吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T18:11:24.113

如果您的主要兴趣是能够通过主题标签搜索您的帖子，您可以将主题标签添加到片段描述中。主题标签的呈现方式不会与文本的其余部分不同，但也无法点击。

```
<html itemscope itemtype="http://schema.org/Organization">
  <head>
    <meta itemprop="name" content="Example">
    <meta itemprop="description" content="
        An #example of how to add #hashtags to the snippet description.">
    <meta itemprop="image" 
        content="https://www.google.com/images/srpr/logo3w.png">
  </head>
  <body>
    <div class="g-plus" data-action="share"></div>
    <script type="text/javascript">
      (function() {
        var po = document.createElement('script');
        po.type = 'text/javascript'; po.async = true;
        po.src = 'https://apis.google.com/js/plusone.js';
        var s = document.getElementsByTagName('script')[0];
        s.parentNode.insertBefore(po, s);
      })();
    </script>
  </body>
</html> 
```

# c# - 从 VBA 转换为 C#

> ID：13430942
> 
> 赞同：1
> 
> 时间：2012-11-17T13:17:52.560
> 
> 标签：c#, vba, solidworks

我想用 C# 语言转换这个 VBA 代码，但我收到了这个错误：'SolidWorks.Interop.sldworks.IFace2.Normal' 是一个'属性'，但用作'方法'

请帮助我如何解决此错误。

VBA：

```
Option Explicit On
Sub main()
    Dim swApp As SldWorks.SldWorks
    Dim swModel As SldWorks.ModelDoc2
    Dim swSelMgr As SldWorks.SelectionMgr
    Dim swFace As SldWorks.face2
    Dim vNorm As Object

    swApp = Application.SldWorks
    swModel = swApp.ActiveDoc
    swSelMgr = swModel.SelectionManager
    swFace = swSelMgr.GetSelectedObject5(1)

    vNorm = swFace.Normal
    Debug.Print("Normal = (" & vNorm(0) & ", " & vNorm(1) & ", " & vNorm(2) & ")")
End Sub 
```

C＃：

```
using SolidWorks.Interop.sldworks;
using SolidWorks.Interop.swconst;
using System.Runtime.InteropServices;
using System;
using System.Diagnostics;

namespace NORMAL.csproj
{
    public partial class SolidWorksMacro
    {
        public void Main()
        {

            SldWorks swApp = default(SldWorks); ModelDoc2 swModel = default(ModelDoc2); SelectionMgr swSelMgr = default(SelectionMgr); Face2 swFace = default(Face2);

            swModel = (ModelDoc2)swApp.ActiveDoc;
            swSelMgr = (SelectionMgr)swModel.SelectionManager;
            swFace = (Face2)swSelMgr.GetSelectedObject6(1, -1);

            Double[] vNorm = (Double[])swFace.Normal();
            Debug.Print("vNorm:  " + vNorm[0]);
        }
        /// <summary>
        ///  The SldWorks swApp variable is pre-assigned for you.
        /// </summary>
        public SldWorks swApp;
    }
} 
```

**我还有一个问题。我怎样才能转换这个：**

VBA：`

```
Set swXform = swDocExt.GetCoordinateSystemTransformByName(sAxisName)
Debug.Print "    Rotational sub-matrix 1   = (" & swXform.ArrayData(2) & ")" 
```

`

C#（不工作）`

```
swXform = swDocExt.GetCoordinateSystemTransformByName(sAxisName);
Debug.Print("    Rotational sub-matrix 1   = (" + swXform.ArrayData[2] + ") mm"); 
```

`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-17T13:20:43.520

更改此行

```
Double[] vNorm = (Double[])swFace.Normal(); 
```

到

```
Double[] vNorm = (Double[])swFace.Normal; 
```

# php - 在 php 中使用 javascript 对 rest 调用授权基本身份验证失败

> ID：13430943
> 
> 赞同：0
> 
> 时间：2012-11-17T13:17:56.917
> 
> 标签：php, javascript, rest, basic-authentication

来自 javascript 的 API 调用失败，而来自 PHP curl 他们很好。

用于检查身份验证的 PHP 脚本

* * *

```
 if (!isset($_SERVER['PHP_AUTH_USER'])) {
        header('WWW-Authenticate: Basic realm="Test auth"');
        header('HTTP/1.0 401 Unauthorized');
        echo '{"status":"401","message":"Unauthorized"}';
        exit;
    } else {
        $user= $_SERVER['PHP_AUTH_USER'];
        $pass =  $_SERVER['PHP_AUTH_PW'];
    } 
```

## Javascript // 失败

```
var xhr = new XMLHttpRequest();
var apiid = 'admin';
var apipassword = '123';
var requesturl = 'http://localhost/man/api/man/GetLanguages';
xhr.open('POST', requesturl, false, apiid, apipassword);
xhr.send('{}');
if(xhr.status == 200){
     alert(xhr.responseText);
} 
```

## PHP curl 调用

```
$ch = curl_init($url);                                                                
curl_setopt($ch, CURLOPT_CUSTOMREQUEST, POST");                                                                     
curl_setopt($ch, CURLOPT_POSTFIELDS, $data);                                                                  
curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);                                                                      
curl_setopt($ch, CURLOPT_HTTPHEADER, array('Content-Length: ' . strlen($data),'Authorization: Basic YWRtaW46MTIz'));     
echo $result = curl_exec($ch); 
```

# c++ - 默认初始化混淆

> ID：13430944
> 
> 赞同：3
> 
> 时间：2012-11-17T13:17:59.940
> 
> 标签：c++

在我的 C++ Primer，第 5 版中，他们在第 43 页上谈到了默认初始化（强调我的）：

> 未显式初始化的内置类型对象的值取决于它的定义位置。**在任何函数体之外定义的变量都被初始化为零。**

后来，在第 73 页，他们定义了一个新类，如下所示：

```
struct Sales_data {
  std::string bookNo;
  unsigned units_sold = 0;
  double revenue = 0.0;
}; 
```

这应该提供新标准的类内初始化程序的示例。在这种情况下，`units_sold`和`revenue`将被初始化为零。他们说，如果不是，变量将被默认初始化。

但这是我的问题：这种课堂初始化有什么意义？让他们只是默认初始化有什么问题？我问的原因是他们已经提到**在任何函数体之外定义的变量都被初始化为零**，在这种情况下，这些变量不在任何函数内部——它们在类定义中。所以默认初始化应该将这些变量初始化为零，不是吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-17T13:37:51.123

引用似乎在错误的上下文中。一个变量至少可以有 3 种状态：

1.  **默认初始化**：变量在构造函数内部根据参数或无参数进行初始化。*初始化的值*是这种类型的一个特例
2.  **In-class initialized**：您在代码中提供的 C++11 功能
3.  **未初始化**：变量的初始化没有在任何地方处理，它可以包含任何垃圾值。一些编译器可能会自动生成`0`或发出警告

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-17T13:36:54.107

关于“在任何函数体之外定义的变量”的第一个陈述是指具有静态链接的对象，即在命名空间中声明的变量：这些是零初始化的。无论它在哪里，get中的成员`struct`都会被初始化`struct`。如果它位于堆栈上或分配在堆上，则内置变量不会在没有赋值的情况下被初始化，例如，当像这样使用时：

```
void f() {
    Sales_data data;
} 
```

即使没有在声明中进行初始化，如果`struct`像这样使用它们，它们也会被初始化为零，但是：

```
Sales_data global; // <--- the "outside any function body" case
void f() {
    Sales_data data0 = {};
    Sales_data data1 = Sales_data();
    Sales_data data2{};
} 
```

但是，这些都需要用户的合作，`struct`并明确初始化它们以确保设置值。

# vb.net - VB.NET - 包含子/函数的方法参数

> ID：13430946
> 
> 赞同：1
> 
> 时间：2012-11-17T13:18:09.403
> 
> 标签：vb.net

请看下面的代码。

```
Dim results As IEnumerable(Of Customer) = ExecuteDataReader( _
               "SELECT * FROM Customer WHERE Sales> @MinSales", _
          Sub(p) p.Add("@MinSales", SqlDbType.Double).Value = 10000.0, _
          Function(r) New Customer() With {Name=r("Name"), Address=r("Address"), Sales=r("Sales") })

For Each c As Customer in results
   '...
Next 
```

在我发布的上一个问题中，回答者发布了此代码。我不明白代码的一部分`sub(p)`或`function(r)`部分。

不幸的是，我没有根据来寻找答案。因此，我在完成有限的研究后发布了这个问题。

`sub(p)`和是什么意思`function(r)`？

**更新 14:54**

请看下文。是什么意思：`(Of T)`和`ByVal castRow As Function(Of IDataRecord, T)`？

```
Public Iterator Function ExecuteDataReader(Of T)(ByVal sql As String,
ByVal addParams as Action(Of SqlParameterCollection), ByVal castRow As
Funnction(Of IDataRecord, T)) As IEnumerable(Of T) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-17T13:31:55.160

[Lambda 表达式](http://msdn.microsoft.com/en-us/library/bb531253.aspx)：

> lambda 表达式是一个没有名称的函数或子例程，可以在委托有效的任何地方使用。Lambda 表达式可以是函数或子例程，可以是单行或多行。您可以将值从当前范围传递到 lambda 表达式。

```
Dim increment1 = Function(x) x + 1
Dim increment2 = Function(x)
                     Return x + 2
                 End Function 
```

# php - PDO lastInsertId() 没有获得价值

> ID：13430951
> 
> 赞同：0
> 
> 时间：2012-11-17T13:18:58.570
> 
> 标签：php, mysql, pdo

我无法使用`$db->lastInsertId();`or获取 lastinsertid 值`$db->lastInsertId('fid');`

```
$stmt = $db->stmt_init();   

$sql = "INSERT INTO ch_files_details (name,extension,size,parent) VALUES (?,?,?,?)";

$stmt = $db->prepare($sql) or die($db->error());

$stmt->bind_param('ssii', $filename, $extension, $filesize, $parent);  

$stmt->execute();

$fid = $db->lastInsertId(); 
```

那里有什么遗漏或错误吗？

我能够插入到表中，但根本无法获得最后插入的 id。

```
Table Definition: 
`ch_files_details` (
`fid` bigint(20) NOT NULL AUTO_INCREMENT,
`name` text NOT NULL,
`extension` text NOT NULL,
`size` bigint(20) NOT NULL,
`parent` bigint(20) NOT NULL,
PRIMARY KEY (`fid`)
) ENGINE=InnoDB  DEFAULT CHARSET=latin1 AUTO_INCREMENT=26 ; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-17T14:00:14.757

`PDO::lastInsertId`在这里不起作用，因为*您没有使用 PDO*。您上面的代码是 MySQLi 代码，而不是 PDO。使用[`mysqli::$insert_id`.](http://php.net/manual/en/mysqli.insert-id.php)

```
// This is all MySQLi prepared statement code, not PDO!!!
// PDO uses bindParam(), not bind_param(), doesn't have stmt_init(), and doesn't use the 'ssii' type strings for binding
$stmt = $db->stmt_init();   
$sql = "INSERT INTO ch_files_details (name,extension,size,parent) VALUES (?,?,?,?)";
$stmt = $db->prepare($sql) or die($db->error());
$stmt->bind_param('ssii', $filename, $extension, $filesize, $parent);  
$stmt->execute();

// insert_id is a property of the connection MySQLi object
$fid = $db->insert_id; 
```

查看[MySQLi 手册](http://www.php.net/manual/en/class.mysqli.php)以获取完整的详细信息。在某些时候，您最终进入了错误的文档集。

# javascript - 如何从打字稿中方法类中的函数访问类成员

> ID：13430956
> 
> 赞同：22
> 
> 时间：2012-11-17T13:19:31.520
> 
> 标签：javascript, typescript

我有这个打字稿代码：

```
 module MyPage {

    export class MyVm {

        ToDo : string;

        Load() {
            //can access todo here by using this:
            this.ToDo = "test";

            $.get("GetUrl", function (servertodos) {
                //but how do I get to Todo here??
                this.ToDo(servertodos); //WRONG ToDo..
            });
        }
    }
} 
```

问题是，如何访问 $.get 回调中的 todo 成员字段？

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-11-17T15:30:23.650

TypeScript 还支持保留词法范围的箭头函数。箭头函数产生与 Jakub 示例类似的代码，但更简洁，因为您不需要自己创建变量和调整用法：

这是使用箭头函数的示例：

```
$.get("GetUrl", (todos) => {
    this.ToDo(todos);
}); 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-11-17T13:22:05.670

与您在 javascript 中执行此操作的方式相同

```
export class MyVm {
    ToDo : string;

    Load() {
        //can access todo here by using this:
        this.ToDo = "test";
        var me = this;

        $.get("GetUrl", function (todos) {
            //but how do I get to Todo here??
            me.ToDo(todos); //WRONG ToDo..
        });
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-02-04T21:49:12.370

芬顿是对的。

但你也可以这样做：

```
 mycallback(todos, self) { self.todo(todos)); }
 $.get('url', mycallback(todos, this)); 
```

# c++ - 提高不返回类型

> ID：13430965
> 
> 赞同：1
> 
> 时间：2012-11-17T13:20:39.490
> 
> 标签：c++, boost, template-meta-programming

我有以下无法编译的代码：

```
#include <iostream>
#include "boost/mpl/set.hpp"
#include "boost/mpl/at.hpp"
#include "boost/type_traits/is_same.hpp"

struct TypeSet {

    typedef boost::mpl::set<int, float> typeset;

    template<typename T>
    static bool hasType()
    {
        using namespace boost;
        using namespace boost::mpl;
        return is_same< at< typeset, T >::type, T >::value; // <-- ERROR IS HERE
    }  
};

int main(int argc, const char * argv[])
{
    bool hasInt = TypeSet::hasType<int>();
    std::cout << (hasInt ? "set contains int" : "set does not contain int") << std::endl;    
    return 0;
} 
```

代码正在使用 Apple LLVM clang 4.1 编译器和 boost 1.5.2 编译，错误是“类型参数的模板参数必须是类型” - 基本上编译器抱怨`boost::mpl::at`没有返回类型。有问题的代码几乎是从 boost 文档中逐字提取的，所以我不知道这有什么问题（据我所知`boost::mpl::at`，它确实返回了一个类型）。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-17T13:25:22.993

你需要

```
typename at< typeset, T >::type 
```

因为它取决于模板参数`T`。所以你必须告诉编译器`type`在这种情况下这是一个类型。

# java - 在 Java 和 PHP 中创建基于通用名称的 UUID 的方法

> ID：13430967
> 
> 赞同：1
> 
> 时间：2012-11-17T13:21:14.297
> 
> 标签：java, php, uuid

软队，

我需要为我的项目生成基于名称的 UUID。问题是 FE 使用 PHP 基于字符串生成标识符，而 BE 使用 Java 基于相同字符串创建这些 UUID。

PHP和Java中是否有一些基于字符串生成相同UUID的包。我尝试使用`UUID.nameUUIDFromBytes(name.getBytes()).toString()`from 的方法在 Java 中生成 UUID `java.util.UUID`。如果是 PHP，我会找到一个生成相同 UUID 的模块

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-17T13:48:08.657

Java 的[UUID.nameUUIDFromBytes](http://docs.oracle.com/javase/7/docs/api/java/util/UUID.html#nameUUIDFromBytes%28byte%5B%5D%29)返回[Variant 3 UUID](http://www.ietf.org/rfc/rfc4122.txt)，Ben Ramsey 的[Ramsey\Uuid](https://github.com/ramsey/uuid/blob/master/src/Uuid.php#L244) PHP 库可以生成这些。

# c - 程序存储器中的 Hitech C 数据缓冲区

> ID：13430970
> 
> 赞同：0
> 
> 时间：2012-11-17T13:21:34.920
> 
> 标签：c, variables, microcontroller, microchip, pic18

C18 编译器允许在带有 ROM 限定符的程序存储器中使用变量，但 Hi-Tech C 似乎不太愿意充分利用 Havard 架构。那么有没有办法使用 Hi-Tech C 编译器在程序存储器中创建数据缓冲区（我准备妥协访问速度）。

我已经看到了使用 psect 的可能性的迹象，但没有任何可行的实现。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-18T18:17:11.053

The HI-TECH PICC18 compiler places objects declared as `const` into program space by default. No special qualifiers like C18's `RAM`/`ROM` are needed:

> *3.5.3 Objects in Program Space*
> 
> `const` objects are usually placed in program space. On the PIC18 devices, the program space is byte-wide, the compiler stores one character per byte location and values are read using the table read instructions. All `const`-qualiﬁed data objects and string literals are placed in the `const` psect. The `const` psect is placed at an address above the upper limit of RAM since RAM and `const` pointers use this address to determine if an access to ROM or RAM is required.

Note that placing frequently updated data in the microcontroller's flash memory may not be such a good idea, as flash has a limited number of program/erase cycles.

`far` pointers can be used to dereference program memory:

> *3.4.12.2 Const and Far Pointers*
> 
> `const` and `far` pointers can either be 16 or 24 bits wide. Their size can be toggled with the `--CP=24` or `--CP=16` command line option. The code used to dereference them also changes with their size. The same pointer size must be used for all modules in a project. A pointer to `far` is identical to a pointer to `const`, except that pointers to `far` may be used to write to the address they hold. A pointer to `const` objects cannot be used to write as the `const` qualiﬁer imposes that the object is read-only. `const` and `far` pointers which are 16 bits wide can access all RAM areas and most of the program space. At runtime when dereferenced, the contents of the pointer are examined. For addresses above the upper limit of RAM the program space is accessed using table read or table write instructions. Addresses below the upper limit of RAM access the data space. Even if the address held by a pointer to `const` is in RAM, the RAM location may not be changed. The default linker options always place `const` data at addresses above the upper limit of the data space so that the correct memory space is accessed when dereferencing with pointers. If the target device selected has more than 64k bytes of program space memory, then only the lower 64k bytes may be accessed with 16-bit wide pointers. Provided that all program space objects that need to be dereferenced are in the lower 64k bytes, 16-bit pointers to `const` and `far` objects may still be used. The smaller pointer size results in less RAM required and less code produced and so should be used whenever possible. `const` and `far` pointers which are 24 bits wide can access all RAM areas and all of the program space. At runtime when dereferenced, the contents of the pointer are examined. If bit number 21 in the address is set, the address is assumed to be a RAM address. Bit number 21 of the address is then ignored. If Bit number 21 is clear, then the address is assumed to be of an object in the program space and the access is performed using table read or table write instructions. Again, no writes to objects are permitted using a pointer to `const`. Note that when dereferencing a 24-bit pointer, the most signiﬁcant implemented bit (bit number 21) of the `TBLPTRU` register may be overwritten. This bit may be used to enable access to the conﬁguration area of the PIC18 device. If loading the table pointer registers from hand-written assembler code, make no assumptions about the state of bit number 21 prior to executing table read or write instructions.

The quotes are from HI-TECH PICC18 v9.51 manual.

# java - Java 图标不会显示两次

> ID：13430976
> 
> 赞同：1
> 
> 时间：2012-11-17T13:22:24.853
> 
> 标签：java, image, swing

我正在制作一个小型 Java 应用程序，它必须在名为 picLabel 的 JLabel 中显示一些图像。

我有一个照片对象的 JList（包含从数据库读取的图像的 InputStream）。

下面是 JList ValueChanged 事件监听器的代码：

```
private void photoListValueChanged(javax.swing.event.ListSelectionEvent evt) {     
    if (evt.getValueIsAdjusting() == false && photoList.getSelectedIndex() != -1) {
        photo = (Photo) photoList.getSelectedValue();
        BufferedImage image = ImageIO.read(photo.getContent()) ;
        if(image != null) {
            picLabel.setIcon(new ImageIcon(image));
        }
} 
```

它在我第一次从列表中选择每个元素时完美运行。但是，如果我再次选择一个已经被选中的元素（并且图像已经显示），它根本不会显示图像，而让 JLabel 保持以前的状态。

我错过了什么吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-17T13:43:31.543

一旦您从输入流中读取了一次图像，该流就在其末尾，并且第二次读取将不会读取任何内容。Photo 类应该从流中读取并将读取的所有内容存储为字节数组，或者直接存储为 BufferedImage 或 ImageIcon。

# c# - 在操作过滤器中添加参数/查询字符串值。时间：2019-03-10 标签：c#mvc3

> ID：13430978
> 
> 赞同：9
> 
> 时间：2012-11-17T13:22:34.743
> 
> 标签：c#, asp.net-mvc

当我尝试将参数或查询字符串值添加到操作过滤器内的上下文时，会引发异常以说明该集合是只读的。

我想在创建“传出”网址时为其添加值。

```
filterContext.ActionParameters.Add("test", "test"); 
```

我需要将这些值传递给查询字符串或请求参数。谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-17T13:29:39.787

HttpContext.Request.Params 是只读的。它反映了传入的请求。

考虑使用[HttpContext.Items](http://msdn.microsoft.com/en-us/library/system.web.httpcontext.items.aspx)来保存我们自己的对象/值

```
filterContext.HttpContext.Items.Add("test","test") 
```

# django - Django 模板变量作为列表的键

> ID：13430979
> 
> 赞同：-1
> 
> 时间：2012-11-17T13:22:41.390
> 
> 标签：django, templates, django-templates

我来自这个问题[Use variable as dictionary key in Django template](https://stackoverflow.com/questions/2894365/use-variable-as-dictionary-key-in-django-template)

我在我的视图中创建了这个上下文：

```
{'cats': {'LIST1': ['a','b','c'], 'LIST2': ['aa','bb','cc','dd'], 'LIST3': ['f','g']}} 
```

我想要做的是打印列表标题，然后是所有项目，比如

```
LIST1:
- a
- b
- c 
```

对于所有列表，所以我在我的模板中这样做了

```
{% for  l_name, l in cats %}
    {{ l_name }}

    {%for lv in l %}
        {{ lv }}
    {% endfor %}
{% endfor %} 
```

这**仅**打印列表名称，而不打印列表。哪里错了？

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-17T13:36:05.320

如果要迭代键和值，可以使用：

```
{% for name, lst in cats.iteritems %}
.... 
{% endfor %} 
```

这只是调用`iteritems`字典的方法，该方法返回一个对 2 元组列表的迭代器。

[Django 的`{% for %}`标签文档](https://docs.djangoproject.com/en/1.4/ref/templates/builtins/#for)也有一些很好的例子。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-17T13:38:08.890

只是为了记录，问题是如何创建数据。所以而不是

```
{'cats': {'LIST1': ['a','b','c'], 'LIST2': ['aa','bb','cc','dd'], 'LIST3': ['f','g']}} 
```

我需要一个touple列表，所以：

```
{'cats': [('LIST1', ['a','b','c']), ('LIST2', ['aa','bb','cc','dd']), ('LIST3', ['f','g'])]} 
```

# bash - 我的 bash 脚本如何检测到 Tomcat 已完全停止？

> ID：13430980
> 
> 赞同：0
> 
> 时间：2012-11-17T13:23:11.170
> 
> 标签：bash, tomcat

我在我的计算机上下载了tomcat（未作为服务安装）。我正在编写一个脚本来升级在 tomcat 服务器上运行的 web 应用程序。脚本大致是这样工作的：

*   停止Tomcat
*   执行多个升级操作
*   启动tomcat

执行升级操作时，我需要知道tomcat 已完全停止。但是，如果我运行`$TOMCAT_HOME/bin/catalina.sh stop`，那么该脚本会在 Tomcat 实际停止之前退出，并且如果我在 Tomcat 仍在运行时执行升级操作，这可能会导致事情崩溃。此外，升级操作可能会很快完成，这会导致tomcat启动在关闭完成之前执行，从而导致tomcat崩溃。

现在我的解决方案是在启动关机后等待 5 秒钟，但我想知道是否有更优雅的解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-17T14:53:09.137

验证进程是否仍在运行的一种方法是使用其进程 ID。根据您的安装，您应该能够在以下位置找到您的 Tomcat 服务器的进程 ID：

```
/opt/tomcat/catalina.pid 
```

理论上，如果这个文件是空的，那么进程应该已经结束，尽管取决于实现和某些情况（tomcat 崩溃？）这可能不是真的。为了安全起见，您可以使用在该文件中找到的 pid 并检查该进程是否仍在运行。

```
ps -p <pid> 
```

如果进程仍然处于活动状态，上述命令将返回进程的 pid、时间和命令。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-17T17:18:21.177

另一种选择是检查是否可以绑定某个端口（Tomcat 使用的端口）。如果不能在这个端口上绑定，说明Tomcat还在运行。

无论如何，Felix的解决方案更合适，使用它可能会更好。我只是为了提供更多替代方案而写了我的建议，并不是所有`catalina.pid`的 Tomcat 安装都有（至少默认安装没有）。

# jsf-2 - Facelet 标签组件块触发 primefaces commandButton action 和 actionListener

> ID：13430981
> 
> 赞同：1
> 
> 时间：2012-11-17T13:23:14.737
> 
> 标签：jsf-2, primefaces, facelets, seam3

我创建了 facelet 标记组件，glue:input 和glue:group

输入.xhtml

```
<?xml version="1.0" encoding="UTF-8"?>

<ui:composition
    xmlns="http://www.w3.org/1999/xhtml"
    xmlns:c="http://java.sun.com/jsp/jstl/core"
    xmlns:f="http://java.sun.com/jsf/core"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:ui="http://java.sun.com/jsf/facelets"
    xmlns:p="http://primefaces.org/ui"
    xmlns:ocp="http://java.sun.com/jsf/composite/ocpcommon"
    >

    <c:set var="id" value="#{not empty id ? id : (not empty name ? name : action)}" />
    <c:set var="required" value="#{not empty required and required}" />
    <c:set var="render" value="#{not empty render ? 'panel-group-'.concat(render) : (not empty id ? 'panel-group-'.concat(id) : 'panel-group-'.concat(mame))}" />
    <c:set var="validator" value="#{not empty validator ? validator : 'safeTextValidator'}" />

    <h:panelGroup id="panel-group-#{id}" layout="block" class="clearfix">
        <label for="#{name}" class="#{(not empty required and required) ? 'required' : ''}">#{label}#{(not empty required and required) ? '*&#160;' : ''}</label>
        <div class="input">
            <c:choose>
                <c:when test="#{type == 'java.lang.String' or type == 'text'}">
                    <h:inputText value="#{value}" id="#{name}" styleClass="xLarge span4" required="#{required}" label="#{label}">
                        <f:validator validatorId="#{validator}"/>
                        <f:ajax execute="#{execute}" render="#{render}"  />
                    </h:inputText>
                </c:when>
                <c:when test="#{type == 'java.util.Date' or type == 'calendar'}">
                    <p:calendar value="#{a.value}" id="#{name}" navigator="true" label="#{label}">
                        <p:ajax event="dateSelect" listener="#{listener}" update="panel-group-#{id}" />  
                    </p:calendar>  
                </c:when>
                <c:when test="#{type == 'checkbox'}">
                    <h:selectBooleanCheckbox value="#{value}" id="#{name}" styleClass="xLarge" required="#{required}" label="#{label}">
                        <f:ajax execute="#{execute}" render="#{render}"  />
                    </h:selectBooleanCheckbox>
                    <span>#{inlinehelp}</span>
                </c:when>
                <c:when test="#{type == 'textarea'}">
                    <h:inputTextarea value="#{value}" id="#{name}" styleClass="xLarge span4" required="#{required}" label="#{label}" style="width: 400px; height: 100px;" >
                        <f:ajax execute="#{execute}" render="#{render}"  />
                    </h:inputTextarea>
                </c:when>
                <c:when test="#{type == 'org.eqaula.glue.model.Catalogue' or type == 'select'}">
                </c:when>
                <c:otherwise>
                    <h:inputText value="#{value}" id="#{name}" styleClass="xLarge span4" required="#{required}" label="#{label}">
                        <f:ajax execute="#{execute}" render="#{render}"  />
                    </h:inputText>
                </c:otherwise>
            </c:choose>
            <h:graphicImage value="#{resource['success.gif']}" rendered="#{value != null}"
                            styleClass="validation-status" />
            <span class="help-inline"><br/>#{inlinehelp} <ocp:message forId="#{name}" /></span>
        </div>
    </h:panelGroup>  
</ui:composition> 
```

组.xhtml

```
<ui:composition
    xmlns="http://www.w3.org/1999/xhtml"
    xmlns:c="http://java.sun.com/jsp/jstl/core"
    xmlns:f="http://java.sun.com/jsf/core"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:ui="http://java.sun.com/jsf/facelets"
    xmlns:p="http://primefaces.org/ui"
    xmlns:ocp="http://java.sun.com/jsf/composite/ocpcommon"
    >
    <c:set var="id" value="#{not empty id ? id : (not empty name ? name : action)}" />
    <c:set var="required" value="#{not empty required and required}" />
    <c:set var="group" value="#{not empty group ? group : null}" />

    <h:panelGroup id="panel-group-#{id}" layout="block" class="clearfix">
        <label for="#{name}" class="#{(not empty required and required) ? 'required' : ''}">#{label}#{(not empty required and required) ? '*&#160;' : ''}</label>
        <div class="input">
            <p:commandButton id="button-#{id}" action="#{controller[addAction]}" process="@this" 
                             value="#{messages['common.add']} #{label}" ajax="true"
                             icon="ui-icon-plus" update="group-data-table-#{id}"/>  
            <p:dataTable var="m" value="#{group.members}" id="group-data-table-#{id}" 
                         editable="true" rendered="#{not empty group.members}"
                         selection="#{controller[bussinesEntity]}" >  

                <f:facet name="header">  
                    #{group.attribute.label}
                </f:facet>  
                <!-- //TODO activar ajax
                <p:ajax event="rowEdit" listener="#{controller[editListener]}" update=":form:messages" />  
                <p:ajax event="rowEditCancel" listener="#{tableBean.onCancel}" update=":form:messages" />  
                -->
                <p:column headerText="#{messages['common.name']}" style="width:125px">  
                    <p:cellEditor>  
                        <f:facet name="output">  
                            <h:outputText value="#{m.name}" />  
                        </f:facet>  
                        <f:facet name="input">  
                            <p:inputText value="#{m.name}" style="width:100%"/>  
                        </f:facet>  
                    </p:cellEditor>  
                </p:column>  
                <p:column headerText="#{messages['common.options']}" style="width:50px">  
                    <p:rowEditor />  
                </p:column>  
            </p:dataTable>  
        </div>
        </h:panelGroup>
</ui:composition> 
```

输入和组标签在此页面中呈现良好，包含输入标签在保存按钮中工作正常：

```
<html xml:lang="en" lang="en" xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:fn="http://java.sun.com/jsp/jstl/functions"
      xmlns:p="http://primefaces.org/ui"
      xmlns:s="http://jboss.org/seam/faces"
      xmlns:c="http://java.sun.com/jsp/jstl/core"
      xmlns:glue="http://eqaula.org/jsf/facelets"
      xmlns:ocp="http://java.sun.com/jsf/composite/ocpcommon">
    <ui:composition  template="/WEB-INF/view/templates/glue.xhtml">
        <ui:define name="content">
            <f:metadata>
                <f:viewParam name="id" value="#{profileHome.profileId}" />
                <s:viewAction action="#{profileHome.load}" if="#{conversation.transient}"/>
            </f:metadata>
            <h2>#{messages['common.edit']} #{messages['Profile']}: #{profileHome.instance.fullName}</h2>
            <h:form id="profile">

                <div class="actions">
                    <h:commandButton id="save" action="#{profileHome.saveAjax()}" value="#{messages['common.save']}" styleClass="btn primary"/>
                    &nbsp;
                    <h:commandButton action="/pages/home.xhtml?faces-redirect=true"
                                     value="#{messages['common.cancel']}" styleClass="btn" immediate="true"/>
                </div>
                <!-- Attributos para usuario -->

                <glue:input id="fstn" name="firstname" type="text" label="#{messages['common.firstname']}" value="#{profileHome.instance.firstname}" required="true" inlinehelp="#{messages['common.firstname.inlinehelp']}" execute="@this save" render="fstn"/>

                <glue:input id="srn" name="surname" type="text" label="#{messages['common.surname']}" value="#{profileHome.instance.surname}" required="true" inlinehelp="#{messages['common.surname.inlinehelp']}" execute="@this save"/>

                <glue:input id="cod" name="code" type="text" label="#{messages['profile.dni']}" value="#{profileHome.instance.code}" required="false" inlinehelp="#{messages['profile.dni.inlinehelp']}" execute="@this save"/>

                <glue:input id="eml" name="text" type="email" label="#{messages['common.email']}" value="#{profileHome.instance.email}" required="true" validator="emailValidator" inlinehelp="#{messages['common.email.inlinehelp']}" execute="@this save"/>

                <glue:input id="emlSecret" name="emailSecret" type="checkbox" value="#{profileHome.instance.emailSecret}" required="true" inlinehelp="#{messages['common.keepemailsecret']}" execute="@this save"/>

                <glue:input id="bio" name="bio" type="textarea" label="#{messages['common.bio']}" value="#{profileHome.instance.bio}" required="false" inlinehelp="#{messages['common.bio.inlinehelp']}" execute="@this save"/>

                <!-- Atributos par administrador -->

                <!-- Attributos personalizados -->
                <c:forEach items="#{profileHome.instance.attributes}" var="a" >
                    <glue:input id="#{a.structureAttribute.id}" name="#{a.name}" type="#{a.type}" label="#{a.structureAttribute.label}" value="#{a.value}" required="#{a.structureAttribute.required}" inlinehelp="#{a.structureAttribute.helpInline}" execute="@this save" listener="#{account.saveAjax()}" render="#{a.structureAttribute.id} #{a.structureAttribute.render != null ? a.structureAttribute.render : ''}"/>
                </c:forEach>
                <!-- Atributos relación -->
                <glue:group id="#{profileHome.findGroup('spouse').id}" label="#{profileHome.findGroup('spouse').attribute.label}" group="#{profileHome.findGroup('spouse')}" inlinehelp="#{profileHome.findGroup('spouse').attribute.helpInline}"
                            controller="#{profileHome}"
                            addAction="addAction"
                            editListener="editListener">
                </glue:group>

            </h:form>
        </ui:define>
    </ui:composition>
</html> 
```

在 group.xhtml 中，p:commandButton 应该将 addAction 触发到 profileHome bean

```
@Named
@ViewScoped
public class ProfileHome

   ....

 public void addAction() {
            System.out.println("TODO rowAddAction");
        } 
```

按钮不起作用！我尝试隔离页面中的按钮，这在没有标签胶水：输入或胶水：组的情况下有效。

请给个建议。

PD。我使用 primefaces 4.3.1、jsf2、jboss AS7、seam3

# java - 递归方法的间歇性堆栈溢出

> ID：13430982
> 
> 赞同：6
> 
> 时间：2012-11-17T13:23:18.023
> 
> 标签：java, recursion, stack-overflow

我为课堂作业编写了一个简单的方法，该方法使用递归（是的，它必须使用递归）来计算分形图案中的三角形数量：

```
public static BigInteger triangleFract(int layer) {
    if(layer < 0) {
        throw new IllegalArgumentException("Input must be >= 0");
    } else if(layer == 0) {
        return new BigInteger("0");
    } else if (layer == 1) {
        return new BigInteger("1");
    } else {
        return triangleFract(layer - 1)
              .multiply(new BigInteger("3"))
              .add(new BigInteger("2"));
    }
} 
```

我一直在尝试做的是了解 int 层可以有多大，以限制用户输入。经过一些测试后，我在 6700+ 左右得到了堆栈溢出，这很好。

令我困扰的是，如果层数以千计，该方法通常会运行，但它仍然可以随机遇到一个`StackOverflowError`.

例如，我选择将层限制为 4444，它似乎几乎总是能够处理它，但每隔一段时间它似乎仍然会溢出。

为什么这样做？我能做些什么吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-17T14:46:50.917

也许 JVM 已经确定（通过逃逸分析）BigInteger 可以分配在堆栈上而不是堆上。根据实现此优化的时间，所需的堆栈大小会有所不同。

也就是说，可能还有许多其他原因，并且行为可能取决于您使用的 JVM。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-17T13:40:48.173

考虑转移到迭代版本。我认为，如果您开发递归算法，则*必须*控制级别深度或根本不使用递归。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-17T16:30:43.643

我无法重现您的“波动”效果。这是非常确定的代码，因此您每次都应该得到相同的结果（包括堆栈溢出错误）。

你是怎么测试的？您是否为 4444 测试的每次尝试都运行了一个新的 jvm？（或者它只是在循环中调用的 triangleFrac(4444); ？）。

你的操作系统是什么，java版本等...

我问是因为我真的不喜欢像这样未解决的问题 --- 这样的事情可能会在哪里（和何时）咬你；）。

哦...顺便说一句，无论如何，您应该使用 BigInteger 中的 ONE 和 ZERO 常量（并为 2 和 3 创建自己的常量。这应该可以为您节省相当多的内存（是的，我知道，这不是你的问题）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-17T20:05:50.877

对于那些无法重现这种波动的人。查找`layer`从哪个方法将可靠地抛出的值`StackOverflowError`。该值越接近实际阈值越好。现在从循环内部（在我的机器上`maxLayer = 11500`）调用此方法：

```
int i = 11500;
while (true) {
    System.out.println(i);
    triangleFract(i++);
} 
```

它会抛出`StackOverflowError`. 现在稍微降低这个值（看起来 5-10% 应该足够了）：

```
int i = 10500;
while (true) {
    System.out.println(i);
    triangleFract(i++);
} 
```

好吧，在我的机器上，这不会引发任何错误并成功跳过`11500`。实际上它工作正常，直到`16000`.

因此，无论它是什么，它都可能涉及 JVM 优化。我试图用 `-XX:+PrintCompilation`. 我看到了 JIT 在循环时是如何工作的：

> ```
> 117   1       java.lang.String::hashCode (64 bytes)
> 183   2       java.lang.String::charAt (33 bytes)
> 189   3       sun.nio.cs.UTF_8$Decoder::decodeArrayLoop (553 bytes)
> 201   4       java.math.BigInteger::mulAdd (81 bytes)
> 205   5       java.math.BigInteger::multiplyToLen (219 bytes)
> 211   6       java.math.BigInteger::addOne (77 bytes)
> 215   7       java.math.BigInteger::squareToLen (172 bytes)
> 219   8       java.math.BigInteger::primitiveLeftShift (79 bytes)
> 224   9       java.math.BigInteger::montReduce (99 bytes)
> 244  10       sun.security.provider.SHA::implCompress (491 bytes)
> 280  11       sun.nio.cs.UTF_8$Encoder::encodeArrayLoop (490 bytes)
> 282  12       java.lang.String::equals (88 bytes) 11400
> 289  13       java.lang.String::indexOf (151 bytes)
> 293  14       java.io.UnixFileSystem::normalize (75 bytes)
> 298  15       java.lang.Object::<init> (1 bytes)
> 298  16       java.util.jar.Manifest$FastInputStream::readLine (167 bytes)
> 299  17       java.lang.CharacterDataLatin1::getProperties (11 bytes)
> 300  18       NormalState::triangleFract (74 bytes)
> 308  19       java.math.BigInteger::add (178 bytes)
> 336  20       java.lang.String::lastIndexOf (151 bytes)
> 337  21       java.lang.Number::<init> (5 bytes)
> 338  22       java.lang.Character::digit (6 bytes)
> 340  23       java.lang.Character::digit (168 bytes)
> 342  24       java.lang.CharacterDataLatin1::digit (85 bytes)
> 343  25       java.math.BigInteger::trustedStripLeadingZeroInts (37 bytes)
> 357  26       java.lang.String::substring (83 bytes)
> 360  27       java.lang.String::lastIndexOf (10 bytes)
> 360  28       java.lang.String::lastIndexOf (29 bytes)
> 361  29       java.math.BigInteger::<init> (24 bytes)
> 361  30       java.lang.Integer::parseInt (269 bytes)
> 361  31       java.math.BigInteger::<init> (8 bytes)
> 362  32       java.math.BigInteger::<init> (347 bytes)
> 404  33       java.math.BigInteger::multiply (72 bytes)
> 404  34       java.math.BigInteger::add (123 bytes) 
> ```

可以编译吗？让我们尝试延迟编译，以便它尽可能晚地影响我们。我尝试使用`-XX:CompileThreshold`flag 并很快找到一个值 ( `-XX:CompileThreshold=1000000`)，它不会让我的循环跳过`11500`。

**更新**

我终于在没有调整编译阈值的情况下复制了它。对我来说，它看起来只有在我的 IDE（IntelliJ IDEA）中运行程序时才会发生。所以这可能与IDEA的启动器有关。我复制了它的命令行并在一个小脚本中使用它：

```
for I in `seq 1 100`; do 
        java ... com.intellij.rt.execution.application.AppMain \
        Triangle 2>&1| grep Stack; done | wc -l 
```

我发现它通常会打印出少于 100 (95-98) 的内容。这与我手动操作时看到的一致。当我跳过启动器时：

```
for I in `seq 1 100`; do 
        java \
        Triangle 2>&1| grep Stack; done | wc -l 
```

它总是打印出 100。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-17T15:12:50.940

实际上您可以做一些事情：增加最大堆栈大小。这是在 JVM 启动时使用如下选项完成的`-Xss`：

```
java -Xss40m MainClass 
```

注意不要设置过高的值。如果您必须超过 60M - 70M，则建议重新设计您的代码。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-17T13:56:47.533

允许递归到*那个*深度是一种设计味道。

试试这个迭代版本：

```
public static BigInteger triangleFract(int layer) {
    if (layer < 0) {
        throw new IllegalArgumentException("Input must be >= 0");
    }
    if (layer == 0) {
        return BigInteger.ZERO;
    }
    BigInteger result = BigInteger.ONE;
    BigInteger two = new BigInteger("2");
    BigInteger three = new BigInteger("3");
    for (int i = 1; i < layer; i++) {
        result = result.multiply(three).add(two);
    }
    return result;
} 
```

笔记：

*   使用`BigInteger.ZERO`and`BigInteger.ONE`而不是为这些值创建新实例
*   删除了多余的`else`-终止语句之后没有（*例如*）`else``return`
*   每次迭代都重用`new BigInteger("2")`而`new BigInteger("3")`不是创建新实例

# xml - xml 模式声明类型

> ID：13430985
> 
> 赞同：0
> 
> 时间：2012-11-17T13:23:34.987
> 
> 标签：xml, schema

我创建了一个 XML 模式，如下所示：

```
<xs:schema xmlns:xs="http://www.w3.org/2001/XMLSchema" elementFormDefault="qualified" attributeFormDefault="unqualified">
<xs:element name="fruitName" type="xs:string"/>
<xs:element name="fruitCategory" type="xs:string"/>
<xs:element name="fruitColor" type="xs:string"/>
<xs:element name="farm">
    <xs:complexType>
        <xs:sequence maxOccurs="unbounded">
            <xs:element ref="fruitName"/>
            <xs:element ref="fruitCategory"/>
            <xs:element ref="fruitColor"/>
        </xs:sequence>
        <xs:attribute name="farmLocation" type="xs:string" use="required"/>
        </xs:attribute>
        <xs:attribute name="farmAge" type="xs:Integer" use="required"/>
    </xs:complexType>
</xs:element> 
```

据我了解，我相信这是使用完全全局类型声明 XML 模式作为fruitName、fruitCategory 和fruitColor 的元素在全局声明并通过在复杂类型中使用 ref="" 调用。请告诉我是否创建了此模式完全使用全局声明类型，或者我误解了全局声明类型是什么。如果我错了，请告知我应该如何使用完全全局类型声明正确编码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-17T14:36:24.540

The schema seems fine except for the extra closing attribute tag:

```
</xs:attribute> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-18T00:28:50.007

我不认识“完全全局类型声明 XML 模式”这个术语，但我想它是指一种模式，其中所有类型声明都是全局的。您的架构显然不是这种情况，因为声明的唯一复杂类型是嵌入在元素声明中的匿名类型。但是，它是一个有效的模式。

# c - 为什么我看不到消息队列中的消息？

> ID：13430988
> 
> 赞同：0
> 
> 时间：2012-11-17T13:23:56.753
> 
> 标签：c, unix, queue, message-queue

我想了解 Unix 中的消息队列是如何工作的。我写了一个简单的代码，它向队列发送一条短消息，然后我可以读取该消息。但我的代码显示：

![在此处输入图像描述](../Images/20cb1255805a4c917327df0c3ac162ff.png)

而且我不知道为什么 - 我看不到我发送到队列的消息。这是我的代码：

```
#include <sys/types.h>
#include <sys/ipc.h>
#include <sys/msg.h>
#include <stdio.h>
#include <stdlib.h>
#include <unistd.h>
#include <string.h>
#include <fcntl.h>

struct mymsgbuf {
    long mtype;
    char mtext[1024];
}msg;

int send_message(int qid, struct mymsgbuf *buffer )
{
    int result = -1, length = 0;
    length = sizeof(struct mymsgbuf) - sizeof(long);
    if((result = msgsnd(qid, buffer, length, 0)) == -1)
        return -1;
    return result;
}

int read_message(int qid, long type, struct mymsgbuf *buffer)
{
    int result, length;
    length = sizeof(struct mymsgbuf) - sizeof(long);
    if((result = msgrcv(qid, buffer, length, type,  0)) == -1)
        return -1;
    printf("Type: %ld Text: %s\n", buffer->mtype, buffer->mtext);
    return result;
}

int main(int argc, char **argv)
{
    int buffsize = 1024;

    int qid = msgget(ftok(".", 0), IPC_CREAT | O_EXCL);
    if (qid == -1)
    {
        perror("msgget");
        exit(1);
    }

    msg.mtype = 1;
    strcpy(msg.mtext, "my simple msg");

    if((send_message(qid, &msg)) == -1)
    {
        perror("msgsnd");
        exit(1);
    }

    if((read_message(qid, 1, &msg) == -1))
    {
        perror("msgrcv");
        exit(1);
    }

    return 0;
} 
```

当我用 msgget 为此行更改一行时：

```
int qid = msgget(ftok(".", 0), IPC_CREAT | O_EXCL | 0600); 
```

表明：

![在此处输入图像描述](../Images/f002141b11b5d08dbf33c417eca27804.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-17T13:43:29.373

从文档中[`msgget`](http://pubs.opengroup.org/onlinepubs/9699919799/functions/msgget.html)：

> msg_perm.mode 的低 9 位应设置为等于 msgflg 的低 9 位。

您需要为队列添加一些权限，至少是读写权限。执行以下操作：

```
int qid = msgget(ftok(".", 0), IPC_CREAT | O_EXCL | 0600); 
```

# tomcat - Servlet 3.0 HTTP 404 - 请求的资源 () 不可用

> ID：13430990
> 
> 赞同：0
> 
> 时间：2012-11-17T13:24:37.880
> 
> 标签：tomcat, servlets, annotations, tomcat7, servlet-3.0

**环境：**

*   Ubuntu 12.04
*   Apache Tomcat 7.0.27
*   Eclipse 4.2 (朱诺)
*   小服务程序 3.0
*   开放JDK 7

尝试使用 Servlet 3.0 执行 FileCounter，我在 URL 上收到此错误

**http://localhost:8080/wtp.filecounter/**。

不必是**http://localhost:8080/wtp.filecounter/FileCounter**吗？

> Estado HTTP 404 -
> 
> **类型**Informe de estado
> 
> **门萨杰**
> 
> **描述**El recurso requerido () no está disponible。
> 
> Apache Tomcat/7.0.26

**结构**

```
wtp.filecounter
   dao
      FileDao.java
   servlets
      FileCounter.java 
```

**FileDao.java**读取和更新文件的访问者

```
package wtp.filecounter.dao;

import java.io.BufferedReader;
import java.io.File;
import java.io.FileReader;
import java.io.FileWriter;
import java.io.IOException;
import java.io.PrintWriter;

public class FileDao {

  public int getCount() {
    int count = 0;
    // Load the file with the counter
    FileReader fileReader = null;
    BufferedReader bufferedReader = null;
    PrintWriter writer = null ; 
    try {
      File f = new File("FileCounter.initial");
      if (!f.exists()) {
        f.createNewFile();
        writer = new PrintWriter(new FileWriter(f));
        writer.println(0);
      }
      if (writer !=null){
        writer.close();
      }

      fileReader = new FileReader(f);
      bufferedReader = new BufferedReader(fileReader);
      String initial = bufferedReader.readLine();
      count = Integer.parseInt(initial);
    } catch (Exception ex) {
      if (writer !=null){
        writer.close();
      }
    }
    if (bufferedReader != null) {
      try {
        bufferedReader.close();
      } catch (IOException e) {
        e.printStackTrace();
      }
    }
    return count;
  }

  public void save(int count) throws Exception {
    FileWriter fileWriter = null;
    PrintWriter printWriter = null;
    fileWriter = new FileWriter("FileCounter.initial");
    printWriter = new PrintWriter(fileWriter);
    printWriter.println(count);

    // Make sure to close the file
    if (printWriter != null) {
      printWriter.close();
    }
  }
} 
```

**FileCounter.java** servlet 读取计数器并以纯文本形式写入

```
package wtp.filecounter.servlets;
import java.io.IOException;
import java.io.PrintWriter;

import javax.servlet.ServletException;
import javax.servlet.annotation.WebServlet;
import javax.servlet.http.HttpServlet;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;
import javax.servlet.http.HttpSession;

import wtp.filecounter.dao.FileDao;

/**
 * Servlet implementation class FileCounter
 */
@WebServlet("/FileCounter")
public class FileCounter extends HttpServlet {
  private static final long serialVersionUID = 1L;

  int count;
  private FileDao dao;

  public void init() throws ServletException {
    dao = new FileDao();
    try {
      count = dao.getCount();
    } catch (Exception e) {
      getServletContext().log("An exception occurred in FileCounter", e);
      throw new ServletException("An exception occurred in FileCounter"
          + e.getMessage());
    }
  }

  protected void doGet(HttpServletRequest request,
      HttpServletResponse response) throws ServletException, IOException {
    // Set a cookie for the user, so that the counter does not increate
    // everytime the user press refresh
    HttpSession session = request.getSession(true);
    // Set the session valid for 5 secs
    session.setMaxInactiveInterval(5);
    response.setContentType("text/plain");
    PrintWriter out = response.getWriter();
    if (session.isNew()) {
      count++;
    }
    out.println("This site has been accessed " + count + " times.");
  }

  public void destroy() {
    super.destroy();
    try {
      dao.save(count);
    } catch (Exception e) {
      e.printStackTrace();
    }
  }
} 
```

**web.xml**

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns="http://java.sun.com/xml/ns/javaee" xmlns:web="http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd" xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd" version="3.0">
  <display-name>wtp.filecounter</display-name>
  <welcome-file-list>
    <welcome-file>index.html</welcome-file>
    <welcome-file>index.htm</welcome-file>
    <welcome-file>index.jsp</welcome-file>
    <welcome-file>default.html</welcome-file>
    <welcome-file>default.htm</welcome-file>
    <welcome-file>default.jsp</welcome-file>
  </welcome-file-list>
</web-app> 
```

知道出了什么问题吗？

当我在服务器上运行时，项目打开**''http://localhost:8080/wtp.filecounter/''**而不是**''http://localhost:8080/wtp.filecounter/FileCounter''**并且第二个 URL 有效

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-17T16:22:52.177

您的 servlet 被映射到`/FileCounter`（这就是`@WebServlet("/FileCounter")`注释的作用）。它是 webapp 的一部分，部署在某个上下文路径下（假设上下文路径是`/myFirstWebApp`）。所以调用 servlet 的 URL 是：

```
http://localhost:8080/myFirstWebApp/FileCounter 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-02T15:37:09.073

只需将**FileCounter**添加为 web.xml 中的“欢迎文件”之一

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-17T19:32:20.653

您的应用程序的名称是`wtp.filecounter`，并且您有一个带有映射的 servlet `"/FileCounder"`。这就是为什么如果您 `"http://localhost:8080/wtp.filecounter/FileCounter"`在浏览器中点击，将调用`doGet`带有映射的 servlet 的方法并获得响应。`"/FileCounter"`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-18T09:32:35.217

'http://localhost:8080/wtp.filecounter/FileCounter' 之所以有效，是因为在那里找到了 servlet。

“wtp.filecounter”部分是您的应用程序上下文。如果您想使用“http://localhost:8080/wtp.filecounter/”访问 servlet，那么您需要将欢迎文件更改为指向**FileCounter** servlet，而不是使用那些默认的欢迎文件。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-12-14T05:22:23.207

您所指的教程是使用动态 Web 模块 2.5 版，而您可能正在使用 3.0。仔细查看您的 web.xml，您会发现那里没有创建任何 servlet 映射。如果您不使用 eclipse 的默认 servlet 创建工具，可能会发生这种情况。这是我的 web.xml 的样子：

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns="http://java.sun.com/xml/ns/javaee"
    xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd"
    id="WebApp_ID" version="3.0">
    <display-name>com.vogella.web.filecounter</display-name>
    <welcome-file-list>
        <welcome-file>index.html</welcome-file>
        <welcome-file>index.htm</welcome-file>
        <welcome-file>index.jsp</welcome-file>
        <welcome-file>default.html</welcome-file>
        <welcome-file>default.htm</welcome-file>
        <welcome-file>default.jsp</welcome-file>
    </welcome-file-list>
    <servlet>
        <servlet-name>FileCounter</servlet-name>
        <servlet-class>com.vogella.web.filecounter.servlet.FileCounter</servlet-class> 
    </servlet>

    <servlet-mapping>
        <servlet-name>FileCounter</servlet-name>
        <url-pattern>/FileCounter</url-pattern>
    </servlet-mapping>
</web-app> 
```

# jquery - 事件无法使用 jquery

> ID：13430991
> 
> 赞同：2
> 
> 时间：2012-11-17T13:24:38.707
> 
> 标签：jquery, html

```
<div id="form">
<form action="">
<input type="button" id="sub"/>
</form>
</div> 
```

单击提交按钮时，将使用 jquery 更改内容。

jQuery代码：

```
$(document).ready(function() {
    $('#sub').live('click', function() {
        var reg = "<form action=''><input type='text' id='text'/><input type='button' is='sub2'/></form>";
        $('#form').replaceWith(reg);
    });
});
$(document).ready(function() {
    $('#sub2').live('click', function() {
        $('#text').text("Some content");
    });
}); 
```

但我的问题是内容没有写入输入框。我该怎么做？**另外如何使用id文本更改输入框的背景颜色？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-17T13:26:50.430

> 但我的问题是内容没有写入输入框。

您需要调用`val()`而不是`text()`因为 text() 没有为文本的输入类型定义。

```
$(document).ready(function(){
   $('#sub2').live('click', function () {
      $('#text').val("Some content");
   });
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-17T13:26:58.643

您的代码包含语法错误。您在`var reg = "...";`字符串 ( `action=""`) 中使用双引号，需要将其转义或写为`'`

您还需要使用`.val()`来获取/设置输入元素的值，而不是`.text()`

也没有理由使用两个文档准备功能 - 只需将所有内容放在同一个中即可。

最后但同样重要的是，`live()`已弃用；改为使用`on()`（有关如何正确使用它，请参阅 jQuery 文档）

# java - BoxLayout 的对齐问题

> ID：13430992
> 
> 赞同：1
> 
> 时间：2012-11-17T13:24:52.563
> 
> 标签：java, swing, alignment, boxlayout, preferredsize

我正在制作一个我正在使用的应用程序`BoxLayout`。如下图所示，当标题字符串很短时，它是完美的。但是随着字符串变长，`JLabel`越来越错位。 ![图片](../Images/3c50e36071336dd71e9cd9b56ea0a8ad.png) 这是一些与问题相关的代码：

```
JPanel centerPanel = new JPanel();
centerPanel.setLayout(new BoxLayout(centerPanel, BoxLayout.PAGE_AXIS));
frame.add(centerPanel, BorderLayout.CENTER);
//...
JLabel l = new JLabel(/*...*/);
l.setHorizontalAlignment(SwingConstants.CENTER); //I tried removing and adding
                                                 //this but nothing changed
centerPanel.add(l); 
```

我有什么明显的遗漏吗？谷歌对这个问题没有帮助。

如果它很重要，国家标签进度条的东西只是`JPanel`s 和`FlowLayout`s。

SSCCE：

```
import java.awt.BorderLayout;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;

import javax.swing.*;

public class SSCCE {

    public static void main(String[] args) {
        final JFrame f = new JFrame("SSCCE");
        JPanel p = new JPanel();
        p.setLayout(new BoxLayout(p, BoxLayout.PAGE_AXIS));
        final JLabel[] titles = new JLabel[5];
        JPanel[] smallPanels = new JPanel[titles.length];
        for (int i = 0; i < smallPanels.length; i ++) {
            titles[i] = new JLabel(Math.random() < 0.5 ? "foo" : "bar");
            p.add(titles[i]);
            smallPanels[i] = new JPanel();
            smallPanels[i].add(new JLabel("foobar"));
            smallPanels[i].add(new JProgressBar());
            p.add(smallPanels[i]);
        }
        f.add(p, BorderLayout.CENTER);
        final JTextField tf = new JTextField("foobar");
        tf.addActionListener(new ActionListener() {
            @Override
            public void actionPerformed(ActionEvent e) {
                titles[2].setText(tf.getText());
                f.repaint();
            }
        });
        f.add(tf, BorderLayout.NORTH);
        f.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        f.setSize(600, 600);
        f.setVisible(true);
    }

} 
```

要操作 SSCCE，请在文本字段中输入内容并按 Enter。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-17T14:11:37.123

这是带有 GridBagLayout 的 SSCCE 的更新版本。不确定当标签或框架大小发生变化时您希望组件如何调整大小，但管理起来应该不会太难。

```
import java.awt.BorderLayout;
import java.awt.GridBagConstraints;
import java.awt.GridBagLayout;
import java.awt.Insets;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.util.Random;

import javax.swing.JFrame;
import javax.swing.JLabel;
import javax.swing.JPanel;
import javax.swing.JProgressBar;
import javax.swing.JTextField;

public class SSCCE {

    public static void main(String[] args) {
        final JFrame f = new JFrame("SSCCE");
        JPanel p = new JPanel();
        p.setLayout(new GridBagLayout());
        Insets insets = new Insets(3, 3, 3, 3);
        GridBagConstraints gbc1 = new GridBagConstraints();
        gbc1.gridwidth = GridBagConstraints.REMAINDER;
        gbc1.anchor = GridBagConstraints.CENTER;
        gbc1.insets = insets;
        GridBagConstraints gbc2 = new GridBagConstraints();
        gbc2.anchor = GridBagConstraints.EAST;
        gbc2.insets = insets;
        GridBagConstraints gbc3 = new GridBagConstraints();
        gbc3.weightx = 1.0;
        gbc3.fill = GridBagConstraints.HORIZONTAL;
        gbc3.gridwidth = GridBagConstraints.REMAINDER;
        gbc3.insets = insets;
        final JLabel[] titles = new JLabel[5];
        Random random = new Random();
        for (int i = 0; i < titles.length; i++) {
            titles[i] = new JLabel(Math.random() < 0.5 ? "foo" : "bar");
            p.add(titles[i], gbc1);
            p.add(new JLabel("foobar"), gbc2);
            JProgressBar progress = new JProgressBar();
            progress.setStringPainted(true);
            progress.setString(String.valueOf(random.nextInt(100)));
            p.add(progress, gbc3);
        }
        f.add(p, BorderLayout.CENTER);
        final JTextField tf = new JTextField("foobar");
        tf.addActionListener(new ActionListener() {
            @Override
            public void actionPerformed(ActionEvent e) {
                titles[2].setText(tf.getText());
                f.repaint();
            }
        });
        f.add(tf, BorderLayout.NORTH);
        f.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        f.pack();
        f.setVisible(true);
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-17T14:01:14.263

*   [BoxLayout](http://docs.oracle.com/javase/tutorial/uiswing/layout/box.html)接受`Min`,`Max`和`PreferredSize`, 子元素可以从`Min`to调整大小`MaxSize`

*   [FlowLayou](http://docs.oracle.com/javase/tutorial/uiswing/layout/flow.html)只接受`PreferredSize`，rest ( `Min`, `MaxSize`) 被这个[LayoutManager](http://docs.oracle.com/javase/tutorial/uiswing/layout/visual.html)忽略，childs 不可调整大小

*   这些是从放入容器中的孩子`XxxSize`计算出来的（在这种情况下）`PreferredSize``JPanel`

*   （您的问题）为了获得更好的帮助，请尽快发布[SSCCE](http://sscce.org/)，简短，可运行，可编译，只是关于您的问题

# iphone - iOS App 快速录屏

> ID：13430993
> 
> 赞同：0
> 
> 时间：2012-11-17T13:24:52.837
> 
> 标签：iphone, ios, opengl-es, opengl-es-2.0, core-video

我是 OpenGL ES 的新手。我正在尝试为 iOS 应用程序（尤其是游戏）的屏幕录制编写代码。

我正在使用[此答案](https://stackoverflow.com/a/9704392/707773)中的代码描述的“渲染到纹理”方法来捕获屏幕并为 cocos2d 游戏编写视频。我所做的一项修改是，当我打电话时，`CVOpenGLESTextureCacheCreate`我正在使用 `[EAGLContext currentContext]` 而不是

`[[GPUImageOpenGLESContext sharedImageProcessingOpenGLESContext] context]`

它确实录制了视频，但有两个问题

(1)- 当它开始录制时，屏幕上的新绘图停止。我也希望应用程序继续在屏幕上绘图。由于我是 OpenGL ES 的新手，我对帧缓冲区对象等没有深入的了解，所以我很难弄清楚如何同时在屏幕上绘制和捕获屏幕。我会欣赏这方面的代码示例。

(2)- 录制的视频倒置。我怎样才能让它在正确的方向？

以前我也考虑`glReadPixels`过方法，但这有性能缺陷。

更新：我也想到了一些想法。根据我的一点了解，

我可以简单地将我的纹理绘制回屏幕，但不知道如何。

或者

我可以有一个辅助 FBO，我可以将纹理附加到它，即

```
glGenFramebuffersOES(1, &textureFrameBuffer);
glBindFramebufferOES(GL_FRAMEBUFFER_OES, textureFrameBuffer);

glFramebufferTexture2D(GL_FRAMEBUFFER, GL_COLOR_ATTACHMENT0, GL_TEXTURE_2D, CVOpenGLESTextureGetName(renderTexture), 0);
//Then I restore the screen FBO.
glBindFramebufferOES(GL_FRAMEBUFFER_OES, 1); 
```

但如果我这样做，那么我如何将屏幕绘图复制到我的辅助 FBO？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T07:59:21.853

有现成的解决方案，所以如果你不想重新发明轮子，你可以试试 Everyplay ( [https://everyplay.com/about](https://everyplay.com/about) )。

从 OpenGL 级别记录屏幕的文档可以在这里找到：[https ://developers.everyplay.com/doc/Everyplay-integration-to-iOS-game](https://developers.everyplay.com/doc/Everyplay-integration-to-iOS-game)

免责声明：我为制作 Everyplay 的公司工作

# objective-c - 单击 UINavigationBar 按钮时的光泽效果

> ID：13430998
> 
> 赞同：1
> 
> 时间：2012-11-17T13:25:17.763
> 
> 标签：objective-c, ios, uibutton, uinavigationbar

当我单击`UIButton`位于顶部的一个时，`UINavigationBar`我有这种光泽效果：

![光滑](../Images/a029f25c1b8593e05bc1c6da6216f7bb.png)

如何将此效果添加到位于 a`UINavigatonBar`但不作为左或右按钮项的另一个按钮？像这样：

```
UIButton * emptyButton = [UIButton buttonWithType:UIButtonTypeCustom];
[emptyButton setFrame:CGRectMake(119, 5, 82, 35)];
[emptyButton addTarget:self action:@selector(centerNavigationBarTitleClicked:) forControlEvents:UIControlEventTouchUpInside];
[emptyButton setBackgroundColor:[UIColor clearColor]];

[self.navigationController.navigationBar addSubview:emptyButton]; 
```

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-17T13:40:26.577

您只需设置`showsTouchWhenHighlighted`属性即可`YES`获得发光效果，即

```
emptyButton.showsTouchWhenHighlighted = YES; 
```

# java - 自然加入休眠

> ID：13430999
> 
> 赞同：1
> 
> 时间：2012-11-17T13:25:19.000
> 
> 标签：java, hibernate, oracle10g

如何`NATURAL JOIN`根据 Hibernate 3.2.5 中的所有匹配列连接两个表？

在更广泛的意义上，我可以在任何我想实现的地方设置限制`Natural Join`。我想对`NATURAL JOIN`两个表的所有匹配列执行一次又一次的写入限制。

**笔记：**

这只是为了减少 LOC 的代码重构。

这是否以更简单的方式可行？

请让我知道这件事。