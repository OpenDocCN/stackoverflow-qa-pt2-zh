# StackOverflow 问答 13178000-13178999

# java - 如何序列化 HttpHandler 类中的对象

> ID：13178004
> 
> 赞同：1
> 
> 时间：2012-11-01T13:21:17.683
> 
> 标签：java, serialization, response, httpserver

我必须序列化一个对象并从 httpserver 发送它我已经知道如何将字符串从服务器发送到客户端，但我不知道如何发送对象

所以我有这个代码：

```
public class Test {
public static void main(String[] args) throws Exception {
    HttpServer server = HttpServer.create(new InetSocketAddress(8000), 0);
    server.createContext("/test", new MyHandler());
    server.setExecutor(null); // creates a default executor
    server.start();
}
static class MyHandler implements HttpHandler {
    public void handle(HttpExchange t) throws IOException {
        String response = "This is the response";

        //this part here shows how to send a string
        //but i need to send an object here
        t.sendResponseHeaders(200, response.length());
        OutputStream os = t.getResponseBody();
        os.write(response.getBytes());
        os.close();
    }
}
} 
```

所以我试图搜索谷歌但没有结果，我试图以这种方式更改代码（机械地不知道我在做什么，因为我不习惯 Java 中的 HttpServer）：

```
SendResponse obj = new SendResponse();
                    ObjectOutputStream objOut = new ObjectOutputStream();
                    t.sendResponseHeaders(200, objOut);

                    objOut.writeObject(obj);
                    objOut.close(); 
```

但是 eclipse 向我显示了一个错误，它告诉我 ObjectOutputStream() 构造函数不可见并且 httpExchange 不适用于参数 (int,ObjectInputStream)

你知道我该如何解决这个问题吗？预先感谢您的帮助 ！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T13:35:56.353

您可以使用一个 OutputStream 作为参数来访问构造函数

```
ObjectOutputStream objOut = new ObjectOutputStream( the http or any other output stream here ); 
```

ObjectOutputStream 的构造函数发送一些头字节，而 ObjectInputStream 的构造函数需要这些头字节。您应该为每个对象创建一个新的 ObjectOutputStream 和一个新的 ObjectInputStream，或者为所有对象只创建一个 ObjectOutputStream 和 ObjectInputStream。

一个更简单的选择可能是[google gson](http://code.google.com/p/google-gson/)它很容易使用，它将一个 java 类转换为 json 字符串，反之亦然。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T14:15:56.677

经过几个小时尝试不同的事情后，您只需更换

`t.sendResponseHeaders(200, objOut);`

和

`t.sendResponseHeaders(200,0);`

正如用户***cyon*** [在这个问题上提到的](https://stackoverflow.com/questions/13194755/java-io-eofexception-error-on-object-serialization-with-httphandler)

# jquery - 每个 div 的单独加载动画

> ID：13178013
> 
> 赞同：1
> 
> 时间：2012-11-01T13:21:41.570
> 
> 标签：jquery, css

我正在寻找一种将单独的加载动画加载到一个页面中的方法。例如，我必须遵循以下概念：

*   1.  加载动画被显示（在屏幕中间，通过 css）。
*   页面准备就绪，显示出来；1.加载被隐藏。
*   页面上有几个分开的 div 中的 php 脚本（通过 ajax），它们获取 mysql 数据库的内容。
*   在加载 php 脚本时，我想在每个 div 中放置一个加载动画，以加载一个 php 脚本。

问题是：加载动画应该如何编写脚本，这样它们就不会相互干扰？我应该如何为此构建 html/css？

我猜它会是这样的：每个 div 都会有另一个 div，里面有加载动画。每个都有相同的 ID 但不同的类。Jquery 将通过 ajax 函数的回调隐藏/显示不同的类。这个可以吗？或者有没有更简单的方法？

# oracle - 会话是否存储在某处？

> ID：13178017
> 
> 赞同：1
> 
> 时间：2012-11-01T13:21:59.120
> 
> 标签：oracle, oracle11g

该`V$SESSION`视图包含当前登录的用户列表，但它们是否存储在日志表中的某个位置或其他什么地方？

我需要获取使用 pl/sql 登录的昨天用户的列表（例如）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-01T14:16:10.190

默认情况下，Oracle 不存储此类信息。你有几个选择：

*   启用系统事件的审核（在这种情况下为 longon\logoff）。
*   编写系统事件（在 longon 之后，注销之前）触发器以收集该信息。

以下是示例：

```
SQL> show parameter audit_trail

NAME                                 TYPE        VALUE                          
------------------------------------ ----------- ------------------------------ 
audit_trail                          string      DB, EXTENDED       

SQL> select sessionid
  2       , userid
  3       , decode(action#, 100, 'logon', 101, 'logoff') 
  4    from sys.aud$ 
  5    where action# in (100, 101);

no rows selected

SQL> audit connect;

Audit succeeded.

SQL> conn hr/hr
Connected.
SQL> select sessionid
  2       , userid
  3       , decode(action#, 100, 'logon', 101, 'logoff')
  4    from sys.aud$
  5   where action# in (100, 101);

 SESSIONID USERID                         DECODE                                
---------- ------------------------------ ------                                
   1000712 HR                             logon                                 

SQL> conn hr/hr
Connected.
SQL> select sessionid
  2       , userid
  3       , decode(action#, 100, 'logon', 101, 'logoff')
  4   from sys.aud$
  5  where action# in (100, 101);

 SESSIONID USERID                         DECODE                                
---------- ------------------------------ ------                                
   1000712 HR                             logon                                 
   1000712 HR                             logoff                                
   1000713 HR                             logon 
```

和触发器的例子：

```
SQL> create table Logon_history(
  2    sessionid  number,
  3    userid     varchar2(31),
  4    logon_date timestamp,
  5    logoff_date timestamp
  6  )
  7  ;

Table created

 SQL> create or replace trigger TR_LOGON_STAT after logon
  2  on database
  3  begin
  4    insert into Logon_history(Sessionid, Userid, Logon_Date, Logoff_Date)
  5      values(sys_context('userenv', 'sessionid'), user, systimestamp, null);
  6  end;
  7  /

Trigger created

SQL> create or replace trigger TR_LOGOFF_STAT before logoff
  2  on database
  3  begin
  4    insert into Logon_history(Sessionid, Userid, Logon_Date, Logoff_Date)
  5      values(sys_context('userenv', 'sessionid'), user, null,systimestamp);
  6  end;
  7  /

Trigger created

 SQL> select sessionid
  2       , userid
  3       , logon_date
  4       , logoff_date
  5  from Logon_history
  6  ;

  no rows selected

 SQL> conn hr/hr
 Connected.

 SQL> select sessionid
  2       , userid
  3       , logon_date
  4       , logoff_date
  5  from Logon_history
  6  ;

Sessionid   Userid   Logon_Date                       Logoff_Date 
-------------------------------------------------------------------------------- 
 2490674    HR       01-NOV-12 11.46.23.421000 PM   
 2490672    HR                                     01-NOV-12 11.46.23.343000 PM 
```

# android - addAccountExplicitly 抛出由 Securityexception 引起的 IllegalStateException

> ID：13178022
> 
> 赞同：4
> 
> 时间：2012-11-01T13:22:05.993
> 
> 标签：android, accountmanager, securityexception

使用此代码会引发该异常，并且不会将创建的帐户添加到帐户管理器中。

```
AccountManager am = AccountManager.get(activity);
Account acc = new Account(name,activity.getString(R.string.account_type));
am.addAccountExplicitly(acc,"Password",null); 
```

我遵循了这个 - [http://developer.android.com/training/id-auth/custom_auth.html](http://developer.android.com/training/id-auth/custom_auth.html)

知道为什么会这样吗？

//edit: Caused by: java.lang.SecurityException: caller uid 10035 is different than the authenticationator's uid

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-04T16:07:59.413

您是否尝试过在清单中设置权限，我怀疑您可能需要这个？

```
<uses-permission android:name="android.permission.AUTHENTICATE_ACCOUNTS"></uses-permission>
<uses-permission android:name="android.permission.GET_ACCOUNTS"></uses-permission>
<uses-permission android:name="android.permission.MANAGE_ACCOUNTS"></uses-permission>
<uses-permission android:name="android.permission.USE_CREDENTIALS"></uses-permission>
<uses-permission android:name="android.permission.INTERNET"></uses-permission> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-26T15:04:29.643

[AddAccountExplicitly](http://developer.android.com/reference/android/accounts/AccountManager.html#addAccountExplicitly%28android.accounts.Account,%20java.lang.String,%20android.os.Bundle%29)的文档说：

> 此方法要求调用者持有权限 AUTHENTICATE_ACCOUNTS 并具有与添加帐户的身份验证器相同的 UID。

抛出的 SecurityException 解释了问题，尝试添加帐户的应用程序的 UID 与身份验证器的 UID 不同。换句话说，它们是两个不同的应用程序。

如果您希望这两个是单独的应用程序，您可以确保在它们之间共享 UID。有关如何执行此操作的更多信息，请参阅[此页面的 android:sharedUserId 部分。](http://developer.android.com/guide/topics/manifest/manifest-element.html)

# jquery - 在 url 重写之后，asp.net $ 未定义，之前工作正常

> ID：13178023
> 
> 赞同：0
> 
> 时间：2012-11-01T13:22:11.750
> 
> 标签：jquery, asp.net, url-rewriting, undefined

我们已经开始实施 url 重写。但是它开始给出 $ 是未定义的错误。

最初没有任何重写逻辑，该项目工作得很好，没有错误。

我已经引用了 javascript 文件

```
<script src="~/JS/UI/jquery-1.6.2.min.js" type="text/javascript"></script> 
```

我错过了什么吗？我在网上和 SO 上阅读了很多类似问题的帖子，并尝试了各种类似 ResolveURL 和 ../ 的东西，但是没有一个有效

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T13:28:16.213

我不相信`~`脚本标签中的作品；它通常保留给 .net 控件/用户控件。

删除它并重试

```
<script src="/JS/UI/jquery-1.6.2.min.js" type="text/javascript"></script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T13:40:40.813

在我的项目中，我也在使用 url 重写并遇到了这个问题，我像这样解决了这个问题

在我的 master.cs 页面中，我创建了一个这样的函数

```
public static string PageResolveUrls(System.Web.UI.Page pPage)
    {
        string strSiteUrl =System.Configuration.ConfigurationSettings.AppSettings["WebName"];
        string Url = pPage.Request.Url.ToString();
        string ReturnUrl = "";

        ReturnUrl = strSiteUrl;

        return ReturnUrl;
    } 
```

我像这样在我的master.aspx页面中使用这个函数

```
 <base href="<%=PageResolveUrls(Page) %>">
    </base>
<script src="<%=PageResolveUrl(Page,"JS/jQuery/jquery.js") %>" type="text/javascript"></script> 
```

我想这会对你有所帮助....

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-03T10:48:54.063

您需要添加`../`而不是`~`符号。它将解决问题。刚开始你`src=`的`../`。

# ruby-on-rails - heroku db:pull = Taps Server Error: undefined method `database_url' for # *** LOCAL GEMS *** rails (3.2.8) heroku (2.33.0) heroku-api (0.3.6) taps (0.3.24) 尽管直到今天早上已经工作了几个月，heroku db:pul 问问题 问问题 2012-11-01T13:22:22.857 423 次 This question shows research effort; it is useful and clear 2 This question does not show any research effort; it is unclear or not useful Bookmark this question. Show activity on this post. *** LOCAL GEMS *** rails (3.2.8) heroku (2.33.0) heroku-api (0.3.6) taps (0.3.24) 尽管直到今天早上已经工作了几个月，heroku db:pull现在运行开始引入模式，但最终导致： Schema: 23% |========= | ETA: 00:02:17 Schema: 23% |========= | ETA: 00:02:15 Schema: 24% |========== | ETA: 00:02:13 Schema: 25% |========== | ETA: 00:02:11 Schema: 26% |========== | ETA: 00:02:09 Schema: 26% |========== | ETA: 00:02:08 Schema: 27% |=========== | ETA: 00:02:06 Schema: 28% |=========== | ETA: 00:02:04 Schema: 29% |============ | ETA: 00:02:02 Schema: 29% |============ | ETA: 00:02:00 Schema: 30% |============ | ETA: 00:02:01 Saving session to pull_201211010614.dat.. !!! Caught Server Exception HTTP CODE: 500 Taps Server Error: undefined method `database_url' for # <dbsession:0x00000002710b18>["/app/lib/taps/server.rb:149:in `block in <class:server>'", "/app/.bundle/gems/ruby/1.9.1/gems/sinatra-1.0/lib/sinatra/base.rb:865:in `call'", "/app/.bundle/gems/ruby/1.9.1/gems/sinatra-1.0/lib/sinatra/base.rb:865:in `block in route'", "/app/.bundle/gems/ruby/1.9.1/gems/sinatra-1.0/lib/sinatra/base.rb:521:in `instance_eval'", "/app/.bundle/gems/ruby/1.9.1/gems/sinatra-1.0/lib/sinatra/base.rb:521:in `route_eval'", "/app/.bundle/gems/ruby/1.9.1/gems/sinatra-1.0/lib/sinatra/base.rb:500:in `block (2 levels) in route!'", "/app/.bundle/gems/ruby/1.9.1/gems/sinatra-1.0/lib/sinatra/base.rb:497:in `catch'", "/app/.bundle/gems/ruby/1.9.1/gems/sinatra-1.0/lib/sinatra/base.rb:497:in `block in route!'", "/app/.bundle/gems/ruby/1.9.1/gems/sinatra-1.0/lib/sinatra/base.rb:476:in `each'", "/app/.bundle/gems/ruby/1.9.1/gems/sinatra-1.0/lib/sinatra/base.rb:476:in `route!'", "/app/.bundle/gems/ruby/1.9.1/gems/sinatra-1.0/lib/sinatra/base.rb:601:in `dispatch!'", "/app/.bundle/gems/ruby/1.9.1/gems/sinatra-1.0/lib/sinatra/base.rb:411:in `block in call!'", "/app/.bundle/gems/ruby/1.9.1/gems/sinatra-1.0/lib/sinatra/base.rb:566:in `instance_eval'", "/app/.bundle/gems/ruby/1.9.1/gems/sinatra-1.0/lib/sinatra/base.rb:566:in `block in invoke'", "/app/.bundle/gems/ruby/1.9.1/gems/sinatra-1.0/lib/sinatra/base.rb:566:in `catch'", "/app/.bundle/gems/ruby/1.9.1/gems/sinatra-1.0/lib/sinatra/base.rb:566:in `invoke'", "/app/.bundle/gems/ruby/1.9.1/gems/sinatra-1.0/lib/sinatra/base.rb:411:in `call!'", "/app/.bundle/gems/ruby/1.9.1/gems/sinatra-1.0/lib/sinatra/base.rb:399:in `call'", "/app/.bundle/gems/ruby/1.9.1/gems/sinatra-1.0/lib/sinatra/base.rb:979:in `block in call'", "/app/.bundle/gems/ruby/1.9.1/gems/sinatra-1.0/lib/sinatra/base.rb:1005:in `synchronize'", "/app/.bundle/gems/ruby/1.9.1/gems/sinatra-1.0/lib/sinatra/base.rb:979:in `call'", "/home/heroku_rack/lib/static_assets.rb:9:in `call'", "/home/heroku_rack/lib/last_access.rb:15:in `call'", "/app/.bundle/gems/ruby/1.9.1/gems/rack-1.2.1/lib/rack/urlmap.rb:47:in `block in call'", "/app/.bundle/gems/ruby/1.9.1/gems/rack-1.2.1/lib/rack/urlmap.rb:41:in `each'", "/app/.bundle/gems/ruby/1.9.1/gems/rack-1.2.1/lib/rack/urlmap.rb:41:in `call'", "/home/heroku_rack/lib/date_header.rb:14:in `call'", "/app/.bundle/gems/ruby/1.9.1/gems/rack-1.2.1/lib/rack/builder.rb:77:in `call'", "/app/.bundle/gems/ruby/1.9.1/gems/thin-1.2.7/lib/thin/connection.rb:76:in `block in pre_process'", "/app/.bundle/gems/ruby/1.9.1/gems/thin-1.2.7/lib/thin/connection.rb:74:in `catch'", "/app/.bundle/gems/ruby/1.9.1/gems/thin-1.2.7/lib/thin/connection.rb:74:in `pre_process'", "/app/.bundle/gems/ruby/1.9.1/gems/thin-1.2.7/lib/thin/connection.rb:57:in `process'", "/app/.bundle/gems/ruby/1.9.1/gems/thin-1.2.7/lib/thin/connection.rb:42:in `receive_data'", "/app/.bundle/gems/ruby/1.9.1/gems/eventmachine-0.12.10/lib/eventmachine.rb:256:in `run_machine'", "/app/.bundle/gems/ruby/1.9.1/gems/eventmachine-0.12.10/lib/eventmachine.rb:256:in `run'", "/app/.bundle/gems/ruby/1.9.1/gems/thin-1.2.7/lib/thin/backends/base.rb:57:in `start'", "/app/.bundle/gems/ruby/1.9.1/gems/thin-1.2.7/lib/thin/server.rb:156:in `start'", "/app/.bundle/gems/ruby/1.9.1/gems/thin-1.2.7/lib/thin/controllers/controller.rb:80:in `start'", "/app/.bundle/gems/ruby/1.9.1/gems/thin-1.2.7/lib/thin/runner.rb:177:in `run_command'", "/app/.bundle/gems/ruby/1.9.1/gems/thin-1.2.7/lib/thin/runner.rb:143:in `run!'", "/app/.bundle/gems/ruby/1.9.1/gems/thin-1.2.7/bin/thin:6:in `<top (required)="">'", "/app/.bundle/gems/ruby/1.9.1/bin/thin:19:in `load'", "/app/.bundle/gems/ruby/1.9.1/bin/thin:19:in `

<main>'"] 有人见过这个吗？ 我发现这对我今天的第三次或第四次尝试有效。问题是，db:pull 过程非常缓慢，以至于您应该寻找另一个选项。看看这个解决方案： https://stackoverflow.com/a/5675869/195530 ruby-on-railspostgresqlherokutaps 4 1 回答 1 This answer is useful 2 我发现这对我今天的第三次或第四次尝试有效。问题是，db:pull 过程非常缓慢，以至于您应该寻找另一个选项。看看这个解决方案： https://stackoverflow.com/a/5675869/195530 于 2012-11-01T16:10:57.943 回答 Related 3 html - 一个 div/table 中有 2 个背景图像？ 1 javascript - 单击的 html 元素不等于 jQuery $.each() 循环中的相同元素 1 iphone - - (CGRect)textRectForBounds:(CGRect)bounds limitedToNumberOfLines:(NSInteger)numberOfLines 1 .net - 随机化 Array 类型的内容的问题 1 heroku - git push heroku master 出现以下错误 1 regex - 匹配 GET 参数时 mod_rewrite 规则不起作用 1 memory - 内存是如何分配给内核的？ 5 python - 单行嵌套 For 循环 2 iphone - 为什么这段代码不能使用 MPMoviePlayerController 流式传输歌曲 1 c - Linux中的红黑树 Reference php × 1429865 c/c++ × 756500 nginx × 49975 mongodb × 159057 mybatis × 3233 anaconda × 13410 pycharm × 14671 python × 1902243 vscode × 56040 docker × 110988 github × 49000 flask × 49129 ffmpeg × 24037 jmeter × 16910 matplotlib × 63493 bootstrap × 54641</main></top></class:server></dbsession:0x00000002710b18> 

> ID：13178026
> 
> 赞同：2
> 
> 时间：
> 
> 标签：ruby-on-rails, postgresql, heroku, taps

```
*** LOCAL GEMS ***

rails (3.2.8)
heroku (2.33.0)
heroku-api (0.3.6)
taps (0.3.24) 
```

尽管直到今天早上已经工作了几个月，`heroku db:pull`现在运行开始引入模式，但最终导致：

```
Schema:         23% |=========                                 | ETA:  00:02:17
Schema:         23% |=========                                 | ETA:  00:02:15
Schema:         24% |==========                                | ETA:  00:02:13
Schema:         25% |==========                                | ETA:  00:02:11
Schema:         26% |==========                                | ETA:  00:02:09
Schema:         26% |==========                                | ETA:  00:02:08
Schema:         27% |===========                               | ETA:  00:02:06
Schema:         28% |===========                               | ETA:  00:02:04
Schema:         29% |============                              | ETA:  00:02:02
Schema:         29% |============                              | ETA:  00:02:00
Schema:         30% |============                              | ETA:  00:02:01
Saving session to pull_201211010614.dat..
!!! Caught Server Exception
HTTP CODE: 500
Taps Server Error: undefined method `database_url' for #<DbSession:0x00000002710b18>
["/app/lib/taps/server.rb:149:in `block in <class:Server>'", "/app/.bundle/gems/ruby/1.9.1/gems/sinatra-1.0/lib/sinatra/base.rb:865:in `call'", "/app/.bundle/gems/ruby/1.9.1/gems/sinatra-1.0/lib/sinatra/base.rb:865:in `block in route'", "/app/.bundle/gems/ruby/1.9.1/gems/sinatra-1.0/lib/sinatra/base.rb:521:in `instance_eval'", "/app/.bundle/gems/ruby/1.9.1/gems/sinatra-1.0/lib/sinatra/base.rb:521:in `route_eval'", "/app/.bundle/gems/ruby/1.9.1/gems/sinatra-1.0/lib/sinatra/base.rb:500:in `block (2 levels) in route!'", "/app/.bundle/gems/ruby/1.9.1/gems/sinatra-1.0/lib/sinatra/base.rb:497:in `catch'", "/app/.bundle/gems/ruby/1.9.1/gems/sinatra-1.0/lib/sinatra/base.rb:497:in `block in route!'", "/app/.bundle/gems/ruby/1.9.1/gems/sinatra-1.0/lib/sinatra/base.rb:476:in `each'", "/app/.bundle/gems/ruby/1.9.1/gems/sinatra-1.0/lib/sinatra/base.rb:476:in `route!'", "/app/.bundle/gems/ruby/1.9.1/gems/sinatra-1.0/lib/sinatra/base.rb:601:in `dispatch!'", "/app/.bundle/gems/ruby/1.9.1/gems/sinatra-1.0/lib/sinatra/base.rb:411:in `block in call!'", "/app/.bundle/gems/ruby/1.9.1/gems/sinatra-1.0/lib/sinatra/base.rb:566:in `instance_eval'", "/app/.bundle/gems/ruby/1.9.1/gems/sinatra-1.0/lib/sinatra/base.rb:566:in `block in invoke'", "/app/.bundle/gems/ruby/1.9.1/gems/sinatra-1.0/lib/sinatra/base.rb:566:in `catch'", "/app/.bundle/gems/ruby/1.9.1/gems/sinatra-1.0/lib/sinatra/base.rb:566:in `invoke'", "/app/.bundle/gems/ruby/1.9.1/gems/sinatra-1.0/lib/sinatra/base.rb:411:in `call!'", "/app/.bundle/gems/ruby/1.9.1/gems/sinatra-1.0/lib/sinatra/base.rb:399:in `call'", "/app/.bundle/gems/ruby/1.9.1/gems/sinatra-1.0/lib/sinatra/base.rb:979:in `block in call'", "/app/.bundle/gems/ruby/1.9.1/gems/sinatra-1.0/lib/sinatra/base.rb:1005:in `synchronize'", "/app/.bundle/gems/ruby/1.9.1/gems/sinatra-1.0/lib/sinatra/base.rb:979:in `call'", "/home/heroku_rack/lib/static_assets.rb:9:in `call'", "/home/heroku_rack/lib/last_access.rb:15:in `call'", "/app/.bundle/gems/ruby/1.9.1/gems/rack-1.2.1/lib/rack/urlmap.rb:47:in `block in call'", "/app/.bundle/gems/ruby/1.9.1/gems/rack-1.2.1/lib/rack/urlmap.rb:41:in `each'", "/app/.bundle/gems/ruby/1.9.1/gems/rack-1.2.1/lib/rack/urlmap.rb:41:in `call'", "/home/heroku_rack/lib/date_header.rb:14:in `call'", "/app/.bundle/gems/ruby/1.9.1/gems/rack-1.2.1/lib/rack/builder.rb:77:in `call'", "/app/.bundle/gems/ruby/1.9.1/gems/thin-1.2.7/lib/thin/connection.rb:76:in `block in pre_process'", "/app/.bundle/gems/ruby/1.9.1/gems/thin-1.2.7/lib/thin/connection.rb:74:in `catch'", "/app/.bundle/gems/ruby/1.9.1/gems/thin-1.2.7/lib/thin/connection.rb:74:in `pre_process'", "/app/.bundle/gems/ruby/1.9.1/gems/thin-1.2.7/lib/thin/connection.rb:57:in `process'", "/app/.bundle/gems/ruby/1.9.1/gems/thin-1.2.7/lib/thin/connection.rb:42:in `receive_data'", "/app/.bundle/gems/ruby/1.9.1/gems/eventmachine-0.12.10/lib/eventmachine.rb:256:in `run_machine'", "/app/.bundle/gems/ruby/1.9.1/gems/eventmachine-0.12.10/lib/eventmachine.rb:256:in `run'", "/app/.bundle/gems/ruby/1.9.1/gems/thin-1.2.7/lib/thin/backends/base.rb:57:in `start'", "/app/.bundle/gems/ruby/1.9.1/gems/thin-1.2.7/lib/thin/server.rb:156:in `start'", "/app/.bundle/gems/ruby/1.9.1/gems/thin-1.2.7/lib/thin/controllers/controller.rb:80:in `start'", "/app/.bundle/gems/ruby/1.9.1/gems/thin-1.2.7/lib/thin/runner.rb:177:in `run_command'", "/app/.bundle/gems/ruby/1.9.1/gems/thin-1.2.7/lib/thin/runner.rb:143:in `run!'", "/app/.bundle/gems/ruby/1.9.1/gems/thin-1.2.7/bin/thin:6:in `<top (required)>'", "/app/.bundle/gems/ruby/1.9.1/bin/thin:19:in `load'", "/app/.bundle/gems/ruby/1.9.1/bin/thin:19:in `<main>'"] 
```

有人见过这个吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T16:10:57.943

我发现这对我今天的第三次或第四次尝试有效。问题是，db:pull 过程非常缓慢，以至于您应该寻找另一个选项。看看这个解决方案：

[https://stackoverflow.com/a/5675869/195530](https://stackoverflow.com/a/5675869/195530)

# ios - Xcode 数据控制器问题

> ID：13178027
> 
> 赞同：0
> 
> 时间：2012-11-01T13:22:33.810
> 
> 标签：ios, objective-c, iphone, xcode, controller

我有一个包含以下部分的应用程序：

*   StoreDataController.h
*   StoreDataController.m
*   StoreTableViewController.h
*   StoreTableViewController.m

我在 StoreDataController 中创建了一个属性和方法，用于从 URL 检索数据并将其转换为 JSON。然后我将它存储在一个数组中。我试图让表控制器在表中显示数组，但它没有显示。我需要做什么才能让表格显示数组的内容？这是我的代码：

StoreDataController.h

```
@interface StoreDataController : NSObject
@property (nonatomic, retain) NSArray *storeNames;
-(void)addStoreNamesObject:(NSArray *)storeNames;
@end 
```

StoreDataController.m

```
#import "StoreDataController.h"
#import "SBJson.h"

@implementation StoreDataController

-(void)addStoreNamesObject:(NSArray *)storeNames
{
NSString *strURL = [NSString stringWithFormat:@"http://10.247.245.87/stores/dodge.php"];
NSData *dataURL = [NSData dataWithContentsOfURL:[NSURL URLWithString:strURL]];
NSString *strResult = [[NSString alloc] initWithData:dataURL encoding:NSUTF8StringEncoding];
storeNames = [strResult JSONValue];
}
@end 
```

StoreTableViewController.h

```
#import <UIKit/UIKit.h>
@class StoreDataController;

@interface StoreTableViewController : UITableViewController

@property (nonatomic, retain) StoreDataController *storeNameController;
@end 
```

StoreTableViewController.m

```
#import "StoreTableViewController.h"
#import "StoreDataController.h"

@interface StoreTableViewController ()

@end

@implementation StoreTableViewController

- (void)awakeFromNib
{
    [super awakeFromNib];
}

- (void)viewDidLoad
{
    [super viewDidLoad];
}

- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView
{
    return 1;
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
    return _storeNameController.storeNames.count;
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath      *)indexPath
{
    static NSString *CellIdentifier = @"Cell";
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier forIndexPath:indexPath];

    cell.textLabel.text = [_storeNameController.storeNames objectAtIndex:indexPath.row];
    return cell;
}

- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
 <#DetailViewController#> *detailViewController = [[<#DetailViewController#> alloc] initWithNibName:@"<#Nib name#>" bundle:nil];

 [self.navigationController pushViewController:detailViewController animated:YES];
 */
}
@end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T13:33:01.227

您至少需要`storeNameController`在您的内部设置属性，`StoreTableViewController`以便它引用`StoreDataController`正在执行构建数组工作的对象。

你如何做到这一点取决于创建对象的`StoreDataController`对象以及它与视图控制器的关系。

（旁白：通常，您应该使用`self.propertyName`而不是`_propertyName`。）

# javascript - 抢先 没有jQuery

> ID：13178028
> 
> 赞同：6
> 
> 时间：2012-11-01T13:22:47.723
> 
> 标签：javascript, css-selectors

这可能已经被问过了，但是滚动浏览大约 40 多个搜索结果只会显示 jQuery 解决方案。假设我想获取无序列表中的第一项并对其应用新的文本颜色，并且单独使用它。使用 jQuery 很简单。

标记->

```
<ul>
    <li>Item 1</li>
    <li>Item 2</li>
    <li>Item 3</li>
</ul> 
```

使用 jQuery ->

```
$("ul > li:first").css("color", "blue"); 
```

问题是，我如何在**没有**jQuery 的情况下实现这一点？

* * *

**解决方案：** 我发现此方法适用于所有浏览器（包括 IE7+）->

```
document
    .getElementsByTagName("ul")[0]
    .getElementsByTagName("li")[0]
    .style.color = "blue"; 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-11-01T13:23:56.233

您可以使用`querySelector` *（不支持 IE7 及更低版本）*：

```
document.querySelector("ul > li") 
```

* * *

或者`querySelectorAll`：

```
document.querySelectorAll("ul > li")[0] 
```

* * *

或者`getElementsByTagName`：

```
document.getElementsByTagName("ul")[0]
        .getElementsByTagName("li")[0] 
```

* * *

改变 IMO 风格的最好方法是设置一个类。您可以通过设置*（或扩展）*`.className`结果元素的属性来做到这一点。

否则，您可以使用该`.style`属性设置单个样式。

* * *

***更新***

正如[@Randy Hall](https://stackoverflow.com/users/1750282/randy-hall)指出的那样，也许您首先想要`li`的是`ul`元素。在这种情况下，我会这样使用`querySelectorAll`：

```
document.querySelectorAll("ul > li:first-child") 
```

然后迭代结果以设置样式。

* * *

要使用`getElementsByTagName`，您可以这样做：

```
var uls = document.getElementsByTagName("ul");

var lis = [].map.call(uls, function(ul) {
    return ul.children[0];
}); 
```

对于 IE8 及更低版本，您需要一个`Array.prototype.map()`shim。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-01T13:25:24.423

```
document
    .getElementsByTagName("ul")[0]
    .getElementsByTagName("li")[0]
    .style.color = "blue"; 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-01T13:34:13.890

如果您只需要更改样式，请使用 CSS :first-child

```
ul > li:first-child {
    color: blue;
} 
```

即使在 IE7 中也可以工作 [http://caniuse.com/#feat=css-sel2](http://caniuse.com/#feat=css-sel2)

[http://jsfiddle.net/Tymek/trxe3/](http://jsfiddle.net/Tymek/trxe3/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-01T13:28:56.900

由于`<ul>`is的唯一有效孩子`<li>`，您可以这样做：

```
var firstLI = document.getElementsByTagName('ul')[0].children[0]; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-01T13:26:24.097

还可以考虑[sizzle](http://sizzlejs.com/ "咝咝作响")，具体取决于您的需要。比 jQuery 小，但可以处理所有选择器规范化。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-01T13:27:50.100

使用基本的 DOM 操作：

```
var ul = document.getElementById('id of ul');
var child = ul.childNodes[0]; 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-05-13T03:18:08.700

在某些情况下，这就足够了：

```
document.querySelector("ul > li:first-child"); 
```

# google-visualization - How to add target line in google column chart?

> ID：13178030
> 
> 赞同：29
> 
> 时间：2012-11-01T13:22:50.110
> 
> 标签：google-visualization

How to add the target line in google column chart like this.

![google column chart](../Images/a11850a7922f896c59847d96849fc1a5.png)

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-12-06T03:04:06.183

If you'd like to combine the columnchart and linechart, use ComboChart. Documentation and examples are here : [https://developers.google.com/chart/interactive/docs/gallery/combochart](https://developers.google.com/chart/interactive/docs/gallery/combochart)

basically, have the data point for the line chart as one of the columns in the DataTable and specify this column to be the "series" = "line", whereas the other columns are visualized in a ColumnChart.

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-07-31T05:16:31.410

You can use a [Stepped Area](https://developers.google.com/chart/interactive/docs/gallery/steppedareachart) series to achieve this. It's a little awkward but works well.

```
var data = google.visualization.arrayToDataTable([
    ['Month', 'Bolivia', 'Ecuador', 'Madagascar', 'Papua New Guinea', 'Rwanda', ''],
    ['2004/05',  165,      938,         522,             998,           450,      250],
    ['2005/06',  135,      1120,        599,             1268,          288,      250],
    ['2006/07',  157,      1167,        587,             807,           397,      250],
    ['2007/08',  139,      1110,        615,             968,           215,      250],
    ['2008/09',  136,      691,         629,             1026,          366,      250]
]);

var options = {
    seriesType: "line",
    series: {5: {
      type: "steppedArea", 
      color: '#FF0000', 
      visibleInLegend: false, 
      areaOpacity: 0}
    }
};

var chart = new google.visualization.LineChart(document.getElementById('chart_div'));    
chart.draw(data, options); 
```

[![Horizontal target line on Google Chart](../Images/0d368a50fe92d495d641686ac06d9377.png)](https://i.stack.imgur.com/n3SYo.png)

## Example

[Stepped Area Google Chart Example](https://jsfiddle.net/8p6z4631/2/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-12-03T00:51:20.010

To make the steppedArea @Ryan suggested above a litte bit less awkward, you can setup a second (right) axis and set the base line to the value you want for the target line. The second axis will be setup for the seppedArea data. This avoids the uggly outline effect when you hover the pointer over the chart and under the line. Do something like this in the options:

```
var options = {
    seriesType: "line",
    series: {5: {
        type: "steppedArea", 
        color: '#FF0000', 
        visibleInLegend: false, 
        areaOpacity: 0,
        targetAxisIndex: 1 } //tell the series values to be shown in axe 1 bellow
    },
    vAxes: [  //each object in this array refers to one axe setup
        {},  //axe 0 without any special configurations
        {
            ticks: [250], //use this if you want to show the target value
            baseline: 250 //this shifts the base line to 250
        }
    ]
}; 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2016-12-07T18:00:33.733

To avoid the ugly outline, just use: `enableInteractivity: false`

# c# - 无法清除以前在 wpf 中单击单选按钮时显示的标签

> ID：13178034
> 
> 赞同：0
> 
> 时间：2012-11-01T13:23:15.740
> 
> 标签：c#, .net, wpf, mvvm

我正在基于单选按钮点击动态生成标签。好吧，我已经成功了，但是每次单击按钮时，它都会生成标签，但不会清除先前的状态。这是代码：

**XAML：**

```
<Grid Grid.Row="0">                     

        <ItemsControl ItemsSource="{Binding Children}">
            <ItemsControl.ItemTemplate>
                <DataTemplate>
                    <StackPanel Orientation="Vertical" >
                        <RadioButton Content="{Binding RadioBase}" Margin="0,10,0,0" IsChecked="{Binding BaseCheck}" GroupName="SlotGroup" />                            
                    </StackPanel>
                </DataTemplate>
            </ItemsControl.ItemTemplate>
        </ItemsControl>           
    </Grid>

<Grid Grid.Row="1">            

        <ItemsControl ItemsSource="{Binding Children}" Grid.Column="0">
            <ItemsControl.ItemTemplate>
                <DataTemplate>
                    <StackPanel>
                        <ItemsControl Visibility="{Binding IsRegisterItemsVisible, Converter={StaticResource BoolToVisibilityConv}}" ItemsSource="{Binding RegisterLabels}">
                            <ItemsControl.ItemTemplate>
                                <DataTemplate>
                                    <StackPanel HorizontalAlignment="Center" VerticalAlignment="Center" Margin="50,20,0,0">
                                        <TextBlock Text="{Binding}"/>
                                    </StackPanel>
                                </DataTemplate>
                            </ItemsControl.ItemTemplate>
                        </ItemsControl>
                    </StackPanel>
                </DataTemplate>
            </ItemsControl.ItemTemplate>
        </ItemsControl>            
    </Grid> 
```

**FPGARadioWidgetViewModel类：**这里设置这个类的DataContext

```
public ObservableCollection<FPGAViewModel> Children { get; set; }

    public FPGARadioWidgetViewModel()
    {
        Children = new ObservableCollection<FPGAViewModel>();
        Children.Add(new FPGAViewModel() { RadioBase = "Base 0x0", ID = 0 });
        Children.Add(new FPGAViewModel() { RadioBase = "Base 0x40", ID = 1 });
        Children.Add(new FPGAViewModel() { RadioBase = "Base 0x80", ID = 2 });
        Children.Add(new FPGAViewModel() { RadioBase = "Base 0xc0", ID = 3 });            
    } 
```

**FPGAViewModel 类：**

```
private bool sBaseCheck;
    public bool BaseCheck
    {
        get { return this.sBaseCheck; }
        set
        {
            this.sBaseCheck = value;
            Generatelabels(this, ID);
            this.OnPropertyChanged("BaseCheck");
        }
    }

    private static void Generatelabels(FPGAViewModel currentItem, int index)
    {
        int m_baseRegister = 0;

        if (index == 0)
        {                
            for (int i = 0; i < 0x40 / 8; i++)
            {
                int reg = (i * 8) + m_baseRegister;
                currentItem.RegisterLabels[i] = "Reg 0x" + reg.ToString("X");
                currentItem.IsRegisterItemsVisible = true;
            }
        }
        else if (index == 1)
        {
            m_baseRegister = 0x40 * index;
            for (int i = 0; i < 0x40 / 8; i++)
            {
                int reg = (i * 8) + m_baseRegister;
                currentItem.RegisterLabels[i] = "Reg 0x" + reg.ToString("X");
                currentItem.IsRegisterItemsVisible = true;
            }
        }
        // Similarly for Index 2 and Index = 3
    }

    private string[] registerLabels = new string[8];
    public string[] RegisterLabels { get { return registerLabels; } }

    private bool isRegisterItemsVisible = false;
    public bool IsRegisterItemsVisible
    {
        get { return isRegisterItemsVisible; }
        set
        {
            isRegisterItemsVisible = value;
            OnPropertyChanged("IsRegisterItemsVisible");
            OnPropertyChanged("RegisterLabels");
        }
    } 
```

单击单选按钮时，它会显示 8 个标签。当我单击第二个单选按钮时，它会显示另外 8 个并且不会清除前 8 个。基本上一次只必须显示所选单选按钮的 8 个标签。怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T14:00:39.190

我不确定，但 WPF 可能会因为你正在触发`PropertyChanged`而感到困惑`RegisterLabels`，当数组对象本身没有改变时，只有内容有。

通常，如果您有一个在 WPF 中具有更改内容的集合，则使用 an`ObservableCollection`相反，它支持`INofityCollectionChanged`在其包含的项目发生更改时告诉 WPF（就像您为 所做的那样`Children`）

要么，要么每次创建一个新数组`GenerateLabels`，然后在最后将其分配给您的`RegisterLabels`属性。

附言。为什么你的`GenerateLabels()`方法是静态的？如果它只是一个普通的实例方法会更干净，那么你就不必传入`currentItem`and `index`。

**编辑**：第二种方法的示例（替换数组）

```
public string[] RegisterLabels { get; private set; }

private void Generatelabels()
{
    string[] labels = new string[8];
    int baseRegister = 0x40 * ID;

    for (int i = 0; i < 8; i++)
    {
        int reg = (i * 8) + baseRegister;
        labels[i] = "Reg 0x" + reg.ToString("X");
    }

    RegisterLabels = labels;
    OnPropertyChanged("RegisterLabels");
} 
```

# struts2 - jquery网格页面如何实现struts2动作报错

> ID：13178035
> 
> 赞同：1
> 
> 时间：2012-11-01T13:23:16.173
> 
> 标签：struts2, struts2-jquery

我有一个带有struts2 jquery 网格的jsp 页面。我想在我的操作类的 jsp 页面中显示错误。为了显示错误，我正在使用添加错误消息

```
addActionError("You can not delete this  data"); 
```

我的动作类中的代码。并显示它我正在使用

```
<s:if test="hasActionErrors()">
   <div class="errors">
       <s:actionerror/>
    </div>
 </s:if> 
```

我的jsp页面中的代码。但不幸的是，我无法在我的 jsp 页面中显示错误。请分享您对这个问题的了解。

-谢谢阿舒托什

**完整代码：**

index.jsp：

```
.....
.....

    <body>  

    <s:if test="hasActionErrors()">
               <div class="errors">
                  <s:actionerror/>
               </div>
            </s:if>

        <div id="setpage"> <s:url id="editurl" action="nedit"/>
            <s:url id="editurl" action="nedit"/>
            <s:url  id="remoteurl" action="ntable"/>  

            <sjg:grid
               id="gridtable"
                caption="List of Subject Details"
                dataType="json"
                href="%{remoteurl}"
                pager="true"
                gridModel="gridModel"
                rowList="50,100,5000"
                rowNum="20"
 .....
 ...... 
```

我的动作.java

```
 .........
                  .........
                  else
               {
                   addActionMessage("Unable to delete row");
                      return ERROR;
               }  
               return SUCCESS;
                   .........
                   ......... 
```

struts.xml

```
 <package name="gridedition" extends="struts-default,json-default"> 
                            <action name="editionntableshow" class="v.esoft.actions.actionfile" >
                                <result name="success" type="json"/> 
                                                         <result name="error" type="json"/> 
                            </action>  

                       <action name="editionedit" class="v.esoft.actions.editiondetails.EditiondetailsEditAction"> 
                            <result name="success" type="json"></result>          
                        </action>
                 </package> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T09:09:11.160

这解决了我的问题...

```
<s:if test="hasActionErrors()">
  <div class="errors">
   <s:actionerror theme="jquery"/>
   </div>
 </s:if> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T01:51:30.033

`jqGrid`通过 提交删除行操作`ajax`，而这些`hasActionErrors`不是`ajax`操作，因此无法捕获。为了捕获这些操作错误/消息，不应该是 ajax/json 操作。

# c# - 在 couchbase 中使用 CAS 可以避免延迟吗？

> ID：13178037
> 
> 赞同：0
> 
> 时间：2012-11-01T13:23:17.443
> 
> 标签：c#, nosql, couchbase

我正在通过 检索一些数据`GetView`。但是在执行一些更新操作时，我得到了延迟。可以使用 CAS 来避免这种情况，还是有其他可用的选项。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T09:54:46.017

CAS 用于保持 get 和 set 操作之间的一致性。CAS 无法减少延迟。

# bash - 如何使用 bash 脚本在 txt 文件中添加文本

> ID：13178038
> 
> 赞同：1
> 
> 时间：2012-11-01T13:23:17.927
> 
> 标签：bash

我有个问题。我需要在 txt 文件中添加一个文本行。这是我的文件：

*   000
*   001 测试1
*   002 测试2
*   003 测试3
*   004
*   005测试4
*   006测试5
*   007测试6

我需要使用 bash 脚本在第 000 行和第 004 行添加文本。

我能怎么做？谢谢大家！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T13:34:29.603

您可以使用“sed”工具来实现您的目标。它对于操作文件非常强大。您可以使用如下命令：

```
sed -i /your/file.txt -e "s/000/000'\n'YOUR_NEW_LINE/"
sed -i /your/file.txt -e "s/004/004'\n'YOUR_NEW_LINE/" 
```

（如果我理解正确，文件第一行开头有“000”，第五行开头有“004”）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-01T13:27:45.327

这就是[`sed`](http://linux.die.net/man/1/sed)and[`ed`](http://linux.die.net/man/1/ed)实用程序的用途。它们使用相同的命令集，但有一些细微差别。主要区别在于`ed`编辑文件并在标准输入上`sed`接受命令，而在命令行上接受命令并将标准输入编辑到标准输出。

使用`sed`通常更方便，除非您遇到由于流式传输而无法执行的操作，例如移动文本。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-01T13:33:40.657

```
awk 'NR==1{print $0, "Foo"}NR==5{print $0, "Bar"}' 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-01T13:28:52.870

这可以通过 while/read 循环在本机 bash 中完成：

```
while read num cmt; do
  if [[ -z cmt ]] ; then
    printf '%s test%s\n' "$num" "$num"
  else
    echo "$num $num"
  fi
done <infile.txt >outfile.txt 
```

# jquery - DataTables 修复了与宽表中的列不对齐的标题

> ID：13178039
> 
> 赞同：58
> 
> 时间：2012-11-01T13:23:19.360
> 
> 标签：jquery, datatables

## 问题

当使用`sScrollX`,`sScrollXInner`和/或`sScrollY`实现其内部内容滚动的固定标题表时，该表的标题与 Chrome 和 IE 中的正文的其余部分不对齐。另一方面，Firefox 可以完美地显示它们。

据我所知，使用 1.9.4 版本时，仅当有大量数据的宽度波动，并且非常长/不可包装的单词与小单词组合在同一列中时，才会出现此问题。此外，有问题的表格需要相当宽。

所有这些因素都在这个[小提琴](http://jsfiddle.net/pratik136/etL73/embedded/result/)中得到了证明：

## 输出

**铬合金：**
[![铬截图](../Images/dabd5532c1abcefda55a9ce97de0463c.png)](https://i.stack.imgur.com/4530R.png)

**IE：**
[![IE9 截图](../Images/9623e59d70b3a6f3a5b3131ca5cd0436.png)](https://i.stack.imgur.com/6oCLs.png)

**火狐**
[![火狐截图](../Images/05823147ea40ab0f15c5c81bd6e2f7dd.png)](https://i.stack.imgur.com/1ONsv.png)

## 建议的解决方案

**这些解决方案之前已经提出过，但**对我的实施没有影响。由于这些建议中的一些，我设置了一个干净的普通香草演示，因为我想确保没有其他代码对这种效果做出贡献。

*   关闭/删除我所有的 CSS
*   `setTimeout( function () { oTable.fnAdjustColumnSizing(); }, 10 );`
*   呼叫`oTable.fnFilter( "x",0 )`并`oTable.fnFilter( "",0 )`按此顺序
*   `"sScrollXInner": "100%"`
*   摆脱所有宽度

我发现的未对齐标题的唯一解决方案是取出`sScrollX`and `sScrollY`，但这不能算作解决方案，因为您失去了固定的标题/内部内容滚动功能。可悲的是，这是一个临时的黑客攻击，而不是修复！

## 笔记

编辑/播放最新的[小提琴](http://jsfiddle.net/pratik136/etL73)。

我尝试了各种组合，可以通过使用链接`http://jsfiddle.net/pratik136/etL73/#REV#`在小提琴的修订历史中观察到`1 <= #REV# <= 12`

## 历史

**StackO**
之前有人问过这个问题：[jQuery Datatables Header Misaligned With Vertical Scrolling](https://stackoverflow.com/questions/8607290/jquery-datatables-header-misaligned-with-vertical-scrolling)
但重要的区别是该问题的 OP 提到如果删除了所有 CSS，他们能够解决问题，这在我的情况下是不正确的，我尝试了一些排列，因此认为值得重新发布的问题。

**外部**
此问题也已在 DataTables 论坛上标记：

*   [http://datatables.net/forums/discussion/7395/sscrolly-and-sscrollx-broken/p1](http://datatables.net/forums/discussion/7395/sscrolly-and-sscrollx-broken/p1)
*   [http://datatables.net/forums/discussion/7778/vertical-scrolling-messes-up-column-header-alignment#Item_1](http://datatables.net/forums/discussion/7778/vertical-scrolling-messes-up-column-header-alignment#Item_1)
*   [http://datatables.net/forums/discussion/3835/width-columns-problem-in-chrome-safari/p1](http://datatables.net/forums/discussion/3835/width-columns-problem-in-chrome-safari/p1)
*   我的错误报告：[http ://datatables.net/forums/discussion/12491/datatables-header-alignment-issue-refresh#Item_1](http://datatables.net/forums/discussion/12491/datatables-header-alignment-issue-refresh#Item_1)

这个问题把我逼疯了！请贡献你的想法！

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-08-07T15:47:08.540

编辑：查看带有“固定标题”的最新[小提琴：](http://jsfiddle.net/ruslans_uralovs/zDaGk/)

* * *

[小提琴](http://jsfiddle.net/hDgHs/)。_

一种解决方案是自己实现滚动，而不是让 DataTables 插件为您完成。

我以您的示例为例并注释掉了 sScrollX 选项。当此选项不存在时，DataTables 插件只会将您的表按原样放入容器 div 中。该表格将伸出屏幕，因此，为了解决这个问题，我们可以将其放入具有所需宽度和溢出属性集的 div 中 - 这正是最后一个 jQuery 语句所做的 - 它将现有表格包装到 300px 宽的 div 中。您可能根本不需要在包装 div 上设置宽度（本例中为 300px），我在这里设置了它，以便轻松看到剪辑效果。并且很好，不要忘记用一个类替换那个内联样式。

```
$(document).ready(function() {
var stdTable1 = $(".standard-grid1").dataTable({
    "iDisplayLength": -1,
    "bPaginate": true,
    "iCookieDuration": 60,
    "bStateSave": false,
    "bAutoWidth": false,
    //true
    "bScrollAutoCss": true,
    "bProcessing": true,
    "bRetrieve": true,
    "bJQueryUI": true,
    //"sDom": 't',
    "sDom": '<"H"CTrf>t<"F"lip>',
    "aLengthMenu": [[25, 50, 100, -1], [25, 50, 100, "All"]],
    //"sScrollY": "500px",
    //"sScrollX": "100%",
    "sScrollXInner": "110%",
    "fnInitComplete": function() {
        this.css("visibility", "visible");
    }
});

var tableId = 'PeopleIndexTable';
$('<div style="width: 300px; overflow: auto"></div>').append($('#' + tableId)).insertAfter($('#' + tableId + '_wrapper div').first())}); 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-11-08T13:26:40.873

下面是实现固定表头的一种方式，不知道是否满足你的目的。变化是：

1.  使用“bScrollCollapse”而不是“sScrollXInner”
2.  不要使用字段集来包装表格
3.  添加一个“div.box”css类

它似乎完全可以在我的本地机器上运行，但使用 Fiddle 并不能完全运行。似乎 Fiddle 添加了一个 css 文件（normalize.css），它在某种程度上破坏了插件 css（很确定我也可以在 Fiddle 中充分工作，添加一些 css 明确规则，但现在没有时间进一步调查）

我的工作代码片段如下。希望这能有所帮助。

```
<!DOCTYPE html>
<html>
<head>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">

  <script type='text/javascript' src='http://code.jquery.com/jquery-1.8.2.js'></script>
  <script type='text/javascript' src="http://datatables.net/release-datatables/media/js/jquery.dataTables.min.js"></script>

 <style type='text/css'>
       div.box {
       height: 100px;
       padding: 10px;
       overflow: auto;
       border: 1px solid #8080FF;
       background-color: #E5E5FF;
   }

  .standard-grid1, .standard-grid1 td, .standard-grid1 th {
    border: solid black thin;
   }
</style>

<script type='text/javascript'> 
$(window).load(function(){
$(document).ready(function() {
    var stdTable1 = $(".standard-grid1").dataTable({
        "iDisplayLength": -1,
        "bPaginate": true,
        "iCookieDuration": 60,
        "bStateSave": false,
        "bAutoWidth": false,
        //true
        "bScrollAutoCss": true,
        "bProcessing": true,
        "bRetrieve": true,
        "bJQueryUI": true,
        "sDom": '<"H"CTrf>t<"F"lip>',
        "aLengthMenu": [[25, 50, 100, -1], [25, 50, 100, "All"]],
        "sScrollX": "100%",
        //"sScrollXInner": "110%",
        "bScrollCollapse": true,
        "fnInitComplete": function() {
            this.css("visibility", "visible");
        }
    });
});
});

</script>

</head>
<body>
<div>
    <table class="standard-grid1 full-width content-scrollable" id="PeopleIndexTable">
        <thead>
          <!-- put your table header HTML here -->
       </thead>
       <tbody>
          <!-- put your table body HTML here -->
        </tbody>
    </table>
</div>
</body>
</html> 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2014-06-26T13:05:56.570

我在 IE9 上遇到了同样的问题。

在将 HTML 写入页面之前，我将只使用 RegExp 去除所有空格。

```
var Tables=$('##table_ID').html();
var expr = new RegExp('>[ \t\r\n\v\f]*<', 'g');
Tables= Tables.replace(expr, '><');
$('##table_ID').html(Tables);
oTable = $('##table_ID').dataTable( {
  "bPaginate": false,
  "bLengthChange": false,
  "bFilter": false,
  "bSort": true,
  "bInfo": true,
  "bAutoWidth": false,
  "sScrollY": ($(window).height() - 320),
  "sScrollX": "100%",
  "iDisplayLength":-1,
  "sDom": 'rt<"bottom"i flp>'
} ); 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2015-07-09T17:51:01.177

添加这两行为我解决了这个问题

```
"responsive": true,
"bAutoWidth": true 
```

现在有一个响应式插件可用：[https](https://datatables.net/extensions/responsive/) ://datatables.net/extensions/responsive/ 。但是，根据我的经验，我发现仍然存在一些错误。到目前为止，它仍然是我找到的最佳解决方案。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2017-07-28T18:19:48.153

For bootstrap users, this fixed it for me:

```
 $($.fn.dataTable.tables(true)).DataTable()
      .columns.adjust()
      .fixedColumns().relayout(); 
```

See article [here](https://www.gyrocode.com/articles/jquery-datatables-column-width-issues-with-bootstrap-tabs/)

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2013-06-24T11:26:25.937

下面的代码有效。至少更正了 IE 9.0 上的问题。希望这可以帮助

```
var oTable =  $('#tblList').dataTable({
    "sScrollY": "320px",
    "bScrollCollapse": true,
    });

    setTimeout(function(){
        oTable.fnAdjustColumnSizing();
    },10); 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2013-06-28T01:04:34.420

我有同样的问题，这段代码解决了它。我从这篇文章中得到了这个解决方案，但我必须调整间隔时间才能让它工作。

```
setTimeout(function(){
        oTable.fnAdjustColumnSizing();
},50); 
```

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2016-06-26T12:37:14.307

在初始化 DataTable 后触发 DataTable 搜索功能，其中包含一个空白字符串。它将自动调整`thead`与的错位`tbody`。

```
$( document ).ready(function()
{

    $('#monitor_data_voyage').DataTable( {
        scrollY:150,
        bSort:false,
        bPaginate:false,
        sScrollX: "100%",
        scrollX: true,
    } );

    setTimeout( function(){
       $('#monitor_data_voyage').DataTable().search( '' ).draw();
    }, 10 );

}); 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2016-05-30T04:07:42.923

试试这个，下面的代码解决了我的问题

```
table.dataTable tbody th,table.dataTable tbody td 
{
     white-space: nowrap;
} 
```

有关更多信息，请参阅[此处](https://datatables.net/manual/tech-notes/6)。

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2019-03-06T10:44:51.187

我将它用于根据列数据自动隐藏列，在这种情况下，有时是它的中断表结构。我用这个***$($.fn.dataTable.tables(true)).DataTable().columns.adjust();解决了这个问题*** 这个函数 ***$('#datatableId').on('draw.dt', function () { });*** 表数据加载后调用。

```
$('#datatableId').on('draw.dt', function () {
    $($.fn.dataTable.tables(true)).DataTable().columns.adjust();
}) 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2012-11-14T08:14:18.107

添加`table-layout: fixed`到表格的样式（css 或样式属性）。

浏览器将停止应用其自定义算法来解决大小限制。

在网上搜索有关在固定表格布局中处理列宽的信息（这里有 2 个简单的 SO 问题：[这里](https://stackoverflow.com/q/4185814/86072)和[这里](https://stackoverflow.com/q/6253963/86072)）

显然：缺点是您的列的宽度不会适应它们的内容。

* * *

[编辑] 当我使用 FixedHeader 插件时，我的回答有效，但是数据表论坛上的帖子似乎表明使用该`sScrollX`选项时会出现其他问题：

[设置 sScrollX 时忽略 bAutoWidth 和 sWidth (v1.7.5)](http://datatables.net/forums/discussion/4150/bautowidth-and-swidth-ignored-when-sscrollx-is-set-v1.7.5/p1)

我会尝试找到解决此问题的方法。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2014-08-07T22:15:19.367

尝试这个

这对我有用...我为我的解决方案添加了 css 并且它有效...虽然我没有更改数据表 css 中的任何内容，除了 {border-collapse:separate;}

```
.dataTables_scrollHeadInner {    /*for positioning header when scrolling is applied*/
padding:0% ! important
} 
```

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2017-09-06T17:58:20.877

如果你想使用 scrollY 使用：

$('.DataTables_sort_wrapper').trigger("点击");

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2019-05-27T15:47:47.997

在尝试了我所能做的一切之后，我只是添加了`"autoWidth": true`它，它对我有用。

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2017-09-15T06:52:26.967

我通过在 css 中添加以下代码解决了我的应用程序中的相同问题 -

```
.dataTables_scrollHeadInner
{
     width: 640px !important;
} 
```

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2017-11-13T06:13:49.623

我已经使用以下概念修复了列问题

```
$(".panel-title a").click(function(){
    setTimeout( function(){
           $('#tblSValidationFilerGrid').DataTable().search( '' ).draw();
        }, 10 );
}) 
```

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2017-08-04T09:19:59.140

我知道已经标记了一个答案，但是对于有类似问题的人来说，上述问题并不适用。我将它与引导主题结合使用。

dataTables.fixedHeader.js 文件中有一行可以更改。该函数的默认布局如下所示。

```
 _matchWidths: function (from, to) {
        var get = function (name) {
            return $(name, from)
                .map(function () {
                    return $(this).width();
                }).toArray();
        };

        var set = function (name, toWidths) {
            $(name, to).each(function (i) {
                $(this).css({
                    width: toWidths[i],
                    minWidth: toWidths[i]
                });
            });
        };

        var thWidths = get('th');
        var tdWidths = get('td');

        set('th', thWidths);
        set('td', tdWidths);
    }, 
```

改变

```
 return $(this).width(); 
```

至

```
 return $(this).outerWidth(); 
```

如果您使用的是较新版本的 jquery，则 outerWidth() 是包含在 jquery.dimensions.js 中的函数。IE。jquery-3.1.1.js

上述函数的作用是映射原始表的 th，然后将它们应用于“克隆”表（固定标题）。在我的情况下，当它们未对齐时，它们总是偏离大约 5px 到 8px。很可能不是最好的解决方案，但为解决方案中的所有其他表提供了解决方案，而无需为每个表声明指定它。到目前为止，它只在 Chrome 中进行了测试，但它应该在所有浏览器上提供裁决解决方案。

* * *

## 回答 #18

> 赞同：-1
> 
> 时间：2014-02-10T09:06:39.370

我只是想出了一种解决对齐问题的方法。更改包含静态标题的 div 的宽度将修复其对齐方式。我发现的最佳宽度是 98%。请参考代码。

自动生成的 div：

`<div class="dataTables_scrollHead" style="overflow: hidden; position: relative; border: 0px none; width: 100%;">`

此处的宽度为 100%，在初始化和重新加载数据表时将其更改为 98%。

```
jQuery('#dashboard').dataTable({
    "sEcho": "1",

    "aaSorting": [[aasortvalue, 'desc']],
    "bServerSide": true,
    "sAjaxSource": "NF.do?method=loadData&Table=dashboardReport",
    "bProcessing": true,
    "sPaginationType": "full_numbers",
    "sDom": "lrtip", // Add 'f' to add back in filtering
    "bJQueryUI": false,
    "sScrollX": "100%",
    "sScrollY": "450px",
    "iDisplayLength": '<%=recordCount%>',
    "bScrollCollapse": true,
    "bScrollAutoCss": true,
    "fnInitComplete": function () {
        jQuery('.dataTables_scrollHead').css('width', '98%'); //changing the width
    },
    "fnDrawCallback": function () {
        jQuery('.dataTables_scrollHead').css('width', '98%');//changing the width
    }
}); 
```

* * *

## 回答 #19

> 赞同：-1
> 
> 时间：2013-11-19T13:33:43.317

而是使用 sScrollX,sScrollY 使用单独的 div 样式

```
.scrollStyle
 {
  height:200px;overflow-x:auto;overflow-y:scroll;
 } 
```

在脚本中的数据表调用之后添加以下内容

```
 jQuery('.dataTable').wrap('<div class="scrollStyle" />'); 
```

经过多次尝试，它**工作**得很好。

* * *

## 回答 #20

> 赞同：-1
> 
> 时间：2013-08-06T11:08:44.143

最近遇到了同样的问题，当我在我的 css 上尝试一些东西时仍在寻找解决方案，检查是否添加到你的单元格（th 和 td）

```
-webkit-box-sizing: content-box; 
-moz-box-sizing: content-box;  
-sizing: content-box; 
```

将解决此问题；对我来说，我使用了一些 html/css 框架，它`border-box`在每个元素中添加了一个值。

* * *

## 回答 #21

> 赞同：-1
> 
> 时间：2013-11-22T16:54:17.333

我遇到了同样的问题，并且看到了许多似乎从未起作用的复杂答案。我确实通过简单地覆盖以下 CSS (site.css) 来解决它，并在 Chrome、IE 和 Firefox 中修复它：

```
table.display td {
padding: 0px 5px;
}
/* this is needed for IE and Firefox if using horizontal scroll*/
table{
    max-width: none;
    min-height: 0%;
} 
```

这会覆盖 datatable.jui.css 中的 CSS

# visual-studio-2012 - Visual Studio 2012 上的 Nuget

> ID：13178040
> 
> 赞同：0
> 
> 时间：2012-11-01T13:23:20.717
> 
> 标签：visual-studio-2012, nuget, nuget-package, asp.net-mvc-scaffolding

我使用 Visual Studio 2012 Ultimate，我正在尝试安装**mvcScaffolding**，但出现错误。我试图将**ExecutiongPolicy**设置为**Bypass**，但我仍然遇到错误。任何想法如何解决这一问题？

```
PM> Set-ExecutionPolicy Bypass -Scope Process
Execution Policy Change
The execution policy helps protect you from scripts that you do not trust. Changing the execution policy might expose you to the security risks described in the about_Execution_Policies help topic. Do you want to change the execution policy?
[Y] Yes  [N] No  [S] Suspend  [?] Help (default is "Y"):y

PM> install-package mvcScaffolding
Attempting to resolve dependency 'T4Scaffolding'.
Install-Package : '.', hexadecimal value 0x00, is an invalid character. Line 1, position 1.
At line:1 char:16
+ install-package <<<<  mvcScaffolding
    + CategoryInfo          : NotSpecified: (:) [Install-Package], XmlException
    + FullyQualifiedErrorId : NuGetCmdletUnhandledException,NuGet.PowerShell.Commands.InstallPackageCommand 
```

提前致谢！吉列尔莫。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T21:48:25.710

重新安装 VS2012、Nuget 等后，我找到了解决方案，删除 Packages 文件夹。谢谢。吉列尔莫。

# android - Android操作栏如何在前台设置图像

> ID：13178044
> 
> 赞同：0
> 
> 时间：2012-11-01T13:23:50.170
> 
> 标签：android, image, action

我正在 Android 4.0 上创建一个应用程序。

我想在前景的操作栏中显示图像以及应用程序图标和名称。

我用谷歌搜索了它，但找到了在后台设置图像的代码。

我希望图像出现在应用程序名称的右侧，并且可以横向和纵向工作。

任何帮助是极大的赞赏 。

问候皮尤什

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T13:54:55.960

您应该实现并添加自定义`ActionView`以显示图像。请参阅API Docs 的[这一部分](http://developer.android.com/guide/topics/ui/actionbar.html#ActionView)以了解如何执行此操作（实际上非​​常简单）。

# javascript - 带有空字符串的JS getElementById：无效的过程调用或参数

> ID：13178047
> 
> 赞同：1
> 
> 时间：2012-11-01T13:24:04.217
> 
> 标签：javascript, string, getelementbyid, invalid-argument

我有一个函数，它`sCellId`传入了一个参数。我正在尝试使用它来获取它的元素

```
var tdElement = document.getElementById(sCellId) 
```

现在我有一个空检查，我完全希望它`null`有时会，这很好（`if (tdElement)`）。但是，似乎当传入一个空字符串时，我得到了一个异常：

> 无效的过程调用或参数。

在手表中，如果我添加`document.getElementById("")`，它可以正常工作并给我`null`. 添加`sCellId`到手表我得到一个空字符串`""`，如果我添加`document.getElementById(sCellId)`到手表，它再次显示错误。

这是观察变量的快照：

![在此处输入图像描述](../Images/db277ec77c4688960fbcd78afba571ad.png)

我在这里缺少什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-11-10T20:18:19.060

我遇到了同样的问题，这似乎是 IE 中的一个错误，仅**在使用 IE7 或 IE8 标准的兼容模式下**才会出现。我能够使用下面的测试 HTML 页面在 IE 9 和 IE 11 中重现。如果我不启用兼容模式，则页面加载时不会出现任何错误。

```
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <title>Test</title>
    <script type="text/javascript">
        function runTest(ElementId) {
            document.getElementById(ElementId);
        }

        window.onload = function () {
            var fieldID = document.getElementById('TestHiddenField').value;

            //DEBUG OTUPUT: you can un-comment this for more detailed output
            //console.info("fieldId value: \"" + fieldID + "\""); //outputs: ""
            //console.info("typeof(fieldId): " + typeof (fieldID)); //shows correctly as string
            //console.info('fieldId.length: ' + fieldID.length); //0 length, so empty string.
            //if (fieldID == "") {
            //    console.info("fieldId value matches to empty string");
            //}

            runTest(fieldID); //SCRIPT5: Invalid procedure call or argument
        }
    </script>
</head>
<body>
    This is a test.
    <input type="hidden" value="" id="TestHiddenField" />
</body>
</html> 
```

尽管上面的所有调试输出都显示该变量`fieldID`在运行时设置为空字符串，但（兼容模式）修复涉及更改此行：

```
var fieldID = document.getElementById('TestHiddenField').value; 
```

将空字符串附加到隐藏字段值似乎可以修复错误：

```
var fieldID = document.getElementById('TestHiddenField').value + ''; 
```

奇怪的是，如果你把它改成使用这个`.toString()`函数，那么它就不起作用了，你仍然会得到错误：

```
var fieldID = document.getElementById('TestHiddenField').value.toString(); 
```

# javascript - 可拖放溢出问题

> ID：13178048
> 
> 赞同：1
> 
> 时间：2012-11-01T13:24:08.453
> 
> 标签：javascript, jquery, html, css

我对 .draggable 和 .droppable 有这个问题：我有两个部分，我可以在这两个部分上从左到右或从右到左拖动我的元素，但是在左侧部分我有一个溢出，如果我想从该部分拖动到右侧部分是不可能的：| 如果我从左侧删除溢出是完美的，但我需要溢出，那么我如何在左侧使用溢出自动来做到这一点。

溢出是这样的：

```
.grpupover{
   overflow-y:auto;
    overflow-x: hidden;
    height: 150px;
    width: 150px;

} 
```

这是一个小提琴示例：

[http://jsfiddle.net/CPA5Y/28/](http://jsfiddle.net/CPA5Y/28/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T13:31:51.337

你可以试试：

```
$(".draggable").draggable({
    revert: true,
    revertDuration: 0,
    helper: "clone"
}); 
```

[http://jsfiddle.net/CPA5Y/32/](http://jsfiddle.net/CPA5Y/32/)

# java - 使用 Prperties 文件获取错误数据库

> ID：13178051
> 
> 赞同：0
> 
> 时间：2012-11-01T13:24:16.580
> 
> 标签：java, properties, error-handling

我正在使用数据库的属性文件，这是我的代码：

我已将我的 database.prperties 文件设置在直接`src`文件夹中。

*这是我的代码（我在 jsp 页面中应用此代码）：*

```
Properties prop=new Properties();
InputStream inputStream=null;
try{
    inputStream = Thread.currentThread().getContextClassLoader().getResourceAsStream("database.properties");
    prop.load(inputStream);
}
finally{
    if (inputStream != null) try { inputStream.close(); } catch (IOException ignore) {}
}

String driver=prop.getProperty("driver");
if (driver != null)  
{  
    System.setProperty("driver", driver);  
}
String url = prop.getProperty("url");
String username= prop.getProperty("username");
String password = prop.getProperty("password");

Class.forName("com.mysql.jdbc.Driver");
Connection con = DriverManager.getConnection(url,username,password); // Getting error at this line.
Statement stmt = con.createStatement();
String sql = "select * from info;";
ResultSet rs = stmt.executeQuery(sql);
System.out.println(sql); 
```

*这是我的属性文件：*

```
driver=com.mysql.jdbc.Driver  
url=jdbc:mysql://localhost/abc
username=crips 
password=drift 
```

但是我`java.sql.SQLException: Access denied for user 'root '@'localhost' (using password: YES)`在线上遇到了这个错误`Connection con = DriverManager.getConnection(url,username,password);`

对此上下文的任何输入将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T13:41:41.407

```
java.sql.SQLException: Access denied for user 'crips'@'localhost' 
```

这意味着给定用户没有被授予访问您尝试连接的数据库的权限。您需要使用 MySQL 管理员权限发出以下 SQL 命令：

```
GRANT ALL ON abc.* TO 'crips'@'localhost' IDENTIFIED BY 'drift'; 
```

请注意，用户名和密码区分大小写。

另请注意，这毕竟与读取属性文件无关。将用户名/密码/数据库作为硬编码字符串变量提供时，您会遇到完全相同的问题。

# android - 从另一个活动中获取数据

> ID：13178056
> 
> 赞同：8
> 
> 时间：2012-11-01T13:24:45.313
> 
> 标签：android, android-intent

仍在努力提高我在 android 上的技能。

我的问题是我的数据库中有一个标签，其中包含一个微调器中的名称，当我单击标签时，会出现一个对话框并为您提供三个选择： 1\. 更新。2\. 删除。3.取消。我通过了第二个和第三个选择，但在更新中遇到了这个问题；我转到另一个具有editText和2个按钮的活动，保存并取消，我希望保存按钮从putExtra中的editText获取数据并将其发送回相同的先前活动并使用来自的数据更改旧标签编辑文本。

我很感激任何帮助。提前致谢。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-11-01T13:40:47.007

在您的第二个活动中，您可以使用该方法从第一个活动中获取数据`getIntent()`，然后`getStringExtra()`，`getIntExtra()`...

然后要返回您的第一个活动，您必须使用`setResult()`带有意图数据的方法作为参数返回。

要在第一个活动中从第二个活动中获取返回数据，只需覆盖该`onActivityResult()`方法并使用意图来获取数据。

第一个活动：

```
//In the method that is called when click on "update"
Intent intent = ... //Create the intent to go in the second activity
intent.putExtra("oldValue", "valueYouWantToChange");
startActivityForResult(intent, someIntValue); //I always put 0 for someIntValue

//In your class
@Override
protected void onActivityResult(int requestCode, int resultCode, Intent data) {
    super.onActivityResult(requestCode, resultCode, data);
    //Retrieve data in the intent
    String editTextValue = intent.getStringExtra("valueId");
} 
```

第二个活动：

```
//When activity is created
String value = intent.getStringExtra("oldValue");
//Then change the editText value

//After clicking on "save"
Intent intent = new Intent();
intent.putExtra("valueId", value); //value should be your string from the edittext
setResult(somePositiveInt, intent); //The data you want to send back
finish(); //That's when you onActivityResult() in the first activity will be called 
```

不要忘记使用该`startActivityForResult()`方法开始您的第二个活动。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-11-01T13:31:06.667

您必须将信息作为附加信息传递。

传递信息

```
Intent i = new Intent();
i.setClassName("com.example", "com.example.activity");
i.putExtra("identifier", VALUE);
startActivity(i); 
```

获取信息

```
Bundle extras = getIntent().getExtras();
String exampleString = extras.getString("identifier"); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-01T13:35:32.593

当您想开始第二个活动时，`startActivityForResult(your intent, request code);` 请在您的第一个活动中使用

```
protected void onActivityResult(int requestCode, int resultCode,
             Intent data) {
         if (requestCode == your_reques_code) {
             if (resultCode == RESULT_OK) {
                 // do your stuff           
             }
         }
} 
```

在完成第二个活动之前不要忘记这一点，

```
Intent data = new Intent();
data.putExtra("text", edtText.getText());
setResult(RESULT_OK, data); 
```

# lucene - 在弹性搜索中组合单独的查询

> ID：13178060
> 
> 赞同：0
> 
> 时间：2012-11-01T13:25:02.943
> 
> 标签：lucene, elasticsearch

我有两个搜索词“86746184549”和“3302093809”。我正在执行两个单独的术语查询来获取一个与每个 ID 匹配的文档。

```
"size":1,
"query":{
  "term":{
    "from_user_id": "86746184549"
  }

} 
```

和

```
"size":1,
"query":{
  "term":{
    "from_user_id": "3302093809"
  }

} 
```

有没有办法组合这两个查询，类似于我们在方面所做的事情。

```
 {
    "facets":{
      "facet_1":{

       },
      "facet_2":{

       },
      "facet_3":{

       }  
    }
 } 
```

我认为[术语查询](http://www.elasticsearch.org/guide/reference/query-dsl/terms-query.html)在这里不起作用，因为它不会返回包含不同`from_user_id`字段的文档。

我想合并查询的原因是，如果我有 100 个这样的术语，那么我将拨打 100 个电话！！到弹性搜索服务器。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T14:31:40.100

听起来您正在寻找[Field Collapsing/Combining](https://github.com/elasticsearch/elasticsearch/issues/256)，这是弹性搜索中非常受欢迎的功能，但尚未实现。同时，您可以使用[Multi Search](http://www.elasticsearch.org/guide/reference/api/multi-search.html)将多个术语请求合并为一个。

# winjs - 如何对 WinJS.UI.AppBarCommand 的标签进行数据绑定？

> ID：13178061
> 
> 赞同：0
> 
> 时间：2012-11-01T13:25:02.580
> 
> 标签：winjs

使用 Visual Studio 2012，我创建了一个 JavaScript 空白应用程序，在 js/default.js 中添加了一个全局变量：

```
var mylabel = "my label"; 
```

我打电话给

```
WinJS.Binding.processAll(); 
```

在 app.onactivate 的末尾。

然后我在 default.html 中添加了两个 AppBarCommands：

```
<button data-win-control="WinJS.UI.AppBarCommand"
    data-win-bind="label: mylabel">
</button>
<button data-win-control="WinJS.UI.AppBarCommand"
    data-win-bind="innerText: mylabel">
</button> 
```

第一个绑定什么都不做，第二个显示文本“我的标签”而不是按钮。如何对按钮标签进行数据绑定？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-01T15:52:08.460

您需要绑定应用栏命令控件实例的标签属性。这可以通过以下方式完成：

```
<button data-win-control="WinJS.UI.AppBarCommand"
    data-win-bind="winControl.label: mylabel">
</button> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T13:40:49.320

在我可以使用的[另一个问题](https://stackoverflow.com/questions/10097998/binding-multiple-html-properties-using-winjs)的答案中找到：

```
data-win-options="{label: mylabel}" 
```

但是，如果我有一个带有包含 AppBarCommand 的 itemtemplate 的 ListView，并且我想将数据绑定到一个 List，它就不起作用。

# php - 确保用户不会向“喜欢”按钮发送垃圾邮件

> ID：13178062
> 
> 赞同：2
> 
> 时间：2012-11-01T13:25:05.307
> 
> 标签：php

我和我的朋友正在创建一个请愿板，我正在向它添加一个喜欢/不喜欢的功能。我打算让它只有用户可以喜欢/不喜欢它。问题是，我不知道如何确保用户不会多次向按钮发送垃圾邮件以及如何注册哪个用户喜欢/不喜欢哪个主题。以下是我到目前为止的代码。

编辑：谢谢我现在正在创建喜欢/不喜欢表。但是现在我必须将用户与数据库进行比较，以查看他们之前是否喜欢过评论。我知道我必须使用 WHERE（检查喜欢和不喜欢的表），但我不确定如何将它与 IF 结合使用。

```
<?php
include connect.php

if (isset($_POST['like']) || isset($_POST['dislike'])) 
{
    if($_SESSION['signed_in']){
        if (isset($_POST['like'])) {
            $sql="UPDATE 
                    topics
                SET
                    likes=likes+1,
                WHERE
                    id=topic_id";

            echo "You liked it";
        }

        elseif (isset($_POST['dislike'])) {
            $sql="UPDATE 
                    topics
                SET
                    dislikes=dislikes+1,
                WHERE
                    id=topic_id";

            echo "You disliked it";
        }
    }
    else{
        echo 'Please log in.'
}

?> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-01T13:29:24.257

您应该有一个包含以下列的“喜欢”表。

"article_id", "user_id", 主键应该包含两列

用户每点赞一篇文章，INSERT INTO 就点赞 VALUES($article_id, $user_id); 如果有人喜欢两次，它将失败，这要归功于主键。

每次用户不喜欢时，删除喜欢 WHERE article_id = $article_id AND user_id = $user_id。如果他愿意，这将允许用户再次喜欢。

要获取文章的点赞数，请运行 SELECT COUNT(*) as nb_of_likes FROM likes WHERE article_id = $article_id，而不是将数字存储在文章表中。

说得通 ？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T13:37:41.530

以下解决方案是可能的，可以一起使用：

*   如果您使用注册/登录机制，那么您可以在内部设置一些计数机制，以便每个用户可以在每个请愿书上点赞一次（就像 Bgi 建议的那样）。
*   即使他创建了一个新用户，您也可以存储一个 cookie，阻止他进一步喜欢。
*   当然，人们可以删除 cookie 或使用其他浏览器，因此您可以使用例如 md5 对他们的 IP 进行哈希处理，并比较该哈希是否已在使用请求。
*   当然，多人可以共享同一个 IP，因此 IP 散列可能并不总是一个好的解决方案。或者，您可以使用 facebook API，并要求人们有一定数量的朋友或其他东西来验证他们的真实性。

您将永远无法完全摆脱垃圾邮件发送者，这取决于您的请愿书的具体程度。因此，您越想防止利用请愿书，它的匿名性就越低。

# java - 处理错误：无法识别的选项 `--request'

> ID：13178065
> 
> 赞同：0
> 
> 时间：2012-11-01T13:25:21.353
> 
> 标签：java, processing

`java_home: unrecognized option '--request'`当我尝试运行标准示例时出现此错误。有些仍在工作，但视频/捕获中的那些没有。

我认为这与Java有关？我在 Mac 上。

![错误](../Images/184e6d7143de85d97d09906696959965.png)

固定：从处理 2.0 降级到 1.5

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T14:07:44.277

固定：从处理 2.0 降级到 1.5

# javascript - 从给定的月份名称中获取月份编号

> ID：13178069
> 
> 赞同：7
> 
> 时间：2012-11-01T13:25:33.723
> 
> 标签：javascript

我正在尝试从给定的月份名称中找到相应的月份编号。实现这一目标的最简单方法是什么？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-11-01T13:29:38.377

在这种情况下，实际上不需要 jQuery。

这些方面的 JavaScript 可能会有所帮助：

```
var monthNumber = ["january", "february", "march"].indexOf(monthname.toLowerCase()) + 1; 
```

扩展所有月份的阵列以使其功能齐全。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-01T13:37:05.953

给出从 0（一月）到 11（十二月）的值的更简单方法：

```
var monthString = 'December';
var dat = new Date('1 ' + monthString + ' 1999');
alert(dat.getMonth()); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-01T13:37:23.393

一个替代方法`Array.prototype.indexOf`是一个对象：

```
var months = {jan: 0, feb:1, mar:2 ...};
var monthName = 'January';

var monthNum = months[monthName.substring(0,3).toLowerCase()]; 
```

优点是可以接受多种形式的月份名称，如Jan、jan、JAN、January、JANUARY等。

哦，上面假设您想​​要月份数作为 javascript Date 构造函数输入。要获取日历月数，只需将值增加 1。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-11-01T14:00:06.970

您不需要 JQuery，因为这可以通过 javascript 轻松解决。

使用如下键值对

```
var months = {jan:1, feb:2, mar:3, apr:4, may:5, jun:6}; 
```

您可以通过调用月份名称轻松获取月份编号，如下所示

```
months.jan  // will return 1 to the caller 
```

或者

```
alert(months.feb); //will shows 2 in message box; 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-01T13:34:21.070

我会这样做的方式是这样的

制作一个包含所有月份的数组；

```
var data=new Array("January","February","March","April","May","June","July","August","September","October","November","December")

//Lets say you get this back from your get month function. This should return january, because that is the first month..
var numberOfMonth = 1;

//An array starts with the index 0, so you could do minus 1 to get the correct one

alert data[numberOfMonth - 1]); 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-11-01T13:33:05.217

根据这些信息的来源，您可能对使用名为 DateJS 的库感兴趣：

*   [http://www.datejs.com/](http://www.datejs.com/)

它不使用 jquery，但擅长解析日期。如果您查看下载部分，如果您需要处理外语输入，它还包含 150 多个国际化库。

# mysql - 尝试导入失败后的 MySQL 错误 2013

> ID：13178070
> 
> 赞同：1
> 
> 时间：2012-11-01T13:25:41.957
> 
> 标签：mysql, mysql-error-2013

断电时，我正在 MySQL 服务器中导入一张表。在此事件之后，我尝试查询我正在导入的表，但仅在我查询此表时出现错误 2013（其他表工作正常）。

我可以物理访问服务器，尝试从那里执行任何查询（尝试 SELECT，甚至 DROP TABLE），但仍然遇到相同的错误。

有谁知道我可以只重新构建表的解决方案（无需从头开始构建整个架构？）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T18:29:48.773

I'm adding this as an answer rather than having lots of comments underneath. I must state in advance that I've not used MySQL but I have used SQL server a lot so I'm hoping that something I say may help.

You say the table is still there. Was it created as part of the operation you were doing or had it been there for a while?

What happens if someone else or a different account tries to access this table?

Is there anything on this page that is relevant to your problem? [http://dev.mysql.com/doc/refman/5.0/en/gone-away.html](http://dev.mysql.com/doc/refman/5.0/en/gone-away.html)

# windows-7 - cookie 或会话无法在 IIS Windows 7 Pro 上运行

> ID：13178073
> 
> 赞同：0
> 
> 时间：2012-11-01T13:25:52.330
> 
> 标签：windows-7, iis-7.5, session-cookies

我开发了一个 Asp.Net 应用程序并将其发布`IIS`在`Windows 7 Professional`.
突然，从 Internet 上查看我的 Web 应用程序的人开始遇到一个似乎阻止创建 cookie 或会话的问题。基本上，cookies 和 session 不能工作或不能立即创建或销毁。

我的应用程序一直在 iis 上的经典应用程序池上。
你对这个奇怪的问题有什么建议？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-11-01T14:02:22.690

我自己解决了我的问题。这个问题确实很傻。我的 Web 服务器被配置为使用 port `8080`。所以我不得不`localhost:8080`在我的浏览器上写地址。

我做了一些搜索，我意识到这`:`是一个导致问题的特殊字符。我读到一些在地址路径中使用特殊字符（如等）的人在上`_`面临同样的问题`IIS``Windows 7 Professional`

# asp.net-mvc-4 - 如何使用 MVC 4 WebApi 服务

> ID：13178074
> 
> 赞同：0
> 
> 时间：2012-11-01T13:25:59.150
> 
> 标签：asp.net-mvc-4, asp.net-web-api

我是 Web Api 世界的新手，我在新的 MVC 4 Web Api 中看到了很多潜力。我已经生成了 WCF Web 服务，但正计划了解 Web-API 及其 Web 服务功能。现在，MVC 4 Web-Api Service 更像是前端吗？我通过遵循 MVC 4 Web Api 中的一些在线示例编写了一个示例服务，但是我如何在一个基本的控制台应用程序中使用该服务？我已经想出使用它的唯一方法是使用 HttpClient 还有其他方法吗？我习惯于 ASP.NET Web 服务和 WCF Web 服务，因为您在引用中将其作为服务引用，然后您可以看到它的所有对象、属性以进行适当的调用。

例如，如果 web-api 为 post 方法请求对象“Task”会发生什么情况，我如何才能填充对象“Task”并将其发布回 web-api？与在 WCF 中一样，由于 WSDL，我能够看到“任务”对象及其属性，因此我能够填充它们并将其发送回服务，这是如何在 web-api 服务中完成的？

webservice 将在内部使用 拥有 web-api 服务是否值得？

非常感谢您帮助解决我对 web-api 服务的一些问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T14:33:47.577

---***根据评论编辑***---

此屏幕截图显示了您可以接近的可能结构。当然，您可以采用最适合您的应用的设计。

![示例 MVC 应用程序](../Images/95a947fecf37a0b73b0d98fb3730a3e9.png)

一个单独的类库项目也是如此`ControllerLib`，它作为一个带入主项目`Service Reference`（屏幕截图中没有显示，但应该在 SecondMVCApplication 项目的 References 文件夹中）。两个控制器文件（`HomeController.cs`和`LocationController.cs`是实现Controller类的控制器文件，和使用模板新建MVC4应用时的Controller文件一样）

因此，对于您关于是否存在 SVC 文件的问题。不。在 MVC 4 中，无论应用程序是一个项目还是多个项目的组合，都没有 SVC 文件之类的东西（除非我弄错了）。在 内部`SecondMVCApplication`，有一个名为的文件`RouteConfig.cs`，其中包含路由 URL，只要您添加服务引用并且存在控制器功能。代码将运行。此外，我展示的示例屏幕截图还包含一个`WebApiConfig.cs`文件。如果需要，您可以使用该文件为移动设备执行 API。因此，常规`RouteConfig.cs`处理网站请求和`WebApiConfig.cs`处理 API 请求。

***需要注意的是：***如果您将模型项目用作单独的项目（我知道您会这样做，因为它是一个**M** -VC 项目...... DUH !!）。确保将连接字符串放在 web.config 主项目中（在本例中为`SecondMVCApplication`）。我记得我被困在这个问题上 3 天（每次 8 小时）试图解决这个问题。希望你不要碰到它。

---***结束编辑***---

以下对您问题的回答主要基于我的知识，可能对所有用户都正确，也可能不正确。

*   MVC 4 Web-Api 服务更像是前端吗？

这取决于你如何看待它。通常，Web-API 服务更适合创建后端服务以向不同平台（如移动、桌面应用程序等）提供数据有效负载。但是，MVC4 Internet 应用程序将具有前端方面，即最终用户看到的视图。

*   如何仅在基本控制台应用程序中使用服务？

AFAIK，有两种方法可以做到这一点。如果将 API 作为服务参考使用。另一种是使用 HTTP 操作（我将在您关于 HTTP 客户端的问题中提到，并使用服务参考方法保留此答案）。

这取决于您的应用程序是如何完成的。就像我说的，如果它是一个网站，你的 MVC 模式不需要做任何事情，但是模型、视图和控制器都被设计为在不使用任何服务的情况下协同工作。

虽然，正如我在对问题的评论中提到的，如果它是一个大型应用程序，那么您需要将它们分解为不同的项目，以使应用程序模块化和灵活。所以你最终会创造出不同的`Service Library`. 如果您继续`Service Library`前进，那么您只需使用`Add Reference`选项将您的 API/Projects/Whatever-you-call-it 引入项目。（为此，我通常将所有项目放在一个解决方案中，并让 Visual Studio 管理构建顺序，因为我懒得编写构建脚本）。

同样，在控制台应用程序中使用 Web 服务时也可以应用相同的逻辑。

*   我已经想出使用它的唯一方法是使用 HttpClient 还有其他方法吗？

使用 Web API 的一种方法是使用 HTTP。您是否知道如何编写 http 请求标头和处理 http 响应。如果是这样，这是我提到的第二种方式。您通过它的 URL 调用 Web 服务，然后获取数据并执行任何工作。如果您在控制台应用程序中使用 http 的答案是**否定**的，请查看这篇文章：[使用 C# 控制台应用程序创建 HTTP 发布请求并接收响应](https://stackoverflow.com/questions/3892042/create-http-post-request-and-receive-response-using-c-sharp-console-application)

*   例如，如果 web-api 为 post 方法请求对象“Task”会发生什么情况，我如何才能填充对象“Task”并将其发布回 web-api？

我想我在您之前的回答中间接回答了这个问题（假设您要走 HTTP 之路）。如果没有，请发表评论，我会看看是否可以为您找到一些资源。

*   webservice 将在内部使用 拥有 web-api 服务是否值得？

我在对该问题的评论中回答了这个问题。询问您是否需要澄清。

希望这一切都有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-11-29T18:01:56.260

您可以创建自己的客户端服务类，为每个请求提供服务。

```
 public class ClientService
{
    #region async helper methods

    private static string m_mediaTypeHeaderValue= "application/json";
    static HttpClient client = new HttpClient();
    static HttpClient createHttpClientInstance()
    {          
        return client ?? new HttpClient();
    }

    // SELECT

    internal static async Task<T> Get<T>(string endpoint)
    {
                client= createHttpClientInstance();
               var response = await client.GetAsync(endpoint);
            string content = await response.Content.ReadAsStringAsync();
            return await Task.Run(() => JsonConvert.DeserializeObject<T>(content));
    }
    // INSERT

    static async Task<T> Post<T>(string endpoint, object data)
    {
        client = createHttpClientInstance();
        var httpContent = new StringContent(JsonConvert.SerializeObject(data));
            httpContent.Headers.ContentType = new MediaTypeHeaderValue(m_mediaTypeHeaderValue);
            var response = await client.PostAsync(endpoint, httpContent);
            string content = await response.Content.ReadAsStringAsync();
            return await Task.Run(() => JsonConvert.DeserializeObject<T>(content));
    }

    // UPDATE

    static async Task<T> Put<T>(string endpoint, object data)
    {
        client = createHttpClientInstance();
        var httpContent = new StringContent(JsonConvert.SerializeObject(data));
            httpContent.Headers.ContentType = new MediaTypeHeaderValue(m_mediaTypeHeaderValue);

            var response = await client.PutAsync(endpoint, httpContent);
            string content = await response.Content.ReadAsStringAsync();
            return await Task.Run(() => JsonConvert.DeserializeObject<T>(content));
    }

    // DELETE

    static async Task<T> Delete<T>(string endpoint)
    {
    client = createHttpClientInstance();
    var response = await client.DeleteAsync(endpoint);
            string content = await response.Content.ReadAsStringAsync();
            return await Task.Run(() => JsonConvert.DeserializeObject<T>(content));
    }

    #endregion
} 
```

# android - android中的广播接收器和结果接收器

> ID：13178075
> 
> 赞同：29
> 
> 时间：2012-11-01T13:26:00.753
> 
> 标签：android

android中的**BroadcastReceiver**和**ResultReceiver**有什么区别？

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2012-11-01T13:46:58.447

结果接收者：

```
Generic interface for receiving a callback result from someone. 
```

广播接收器：

```
Base class for code that will receive intents sent by sendBroadcast(). 
```

**编辑：**

背景：所有网络操作/长时间运行的操作都应该远离主线程。有两种方法可以做到这一点：

1.  异步任务 - 对于简单的网络，比如说检索图像/进行数据库处理
2.  服务 - 对于复杂的长时间运行的后台进程

如果您需要在主线程之外执行工作，但仅在用户与您的应用程序交互时执行，那么您可能应该创建一个新线程而不是服务。例如，如果您想播放一些音乐，但仅在您的活动正在运行时，您可能会创建一个异步线程。但是，如果您希望即使在用户退出应用程序（例如下载）后仍继续该过程，请使用服务

假设你选择 2。现在

1.  您的活动向您的服务发送网络请求

2.  您的服务使用说 DefaultHttpClient 执行该操作

3.  它将数据发送回您的活动。

    这里第三步接收数据可以通过两种方式完成

> 1.）广播接收器：多个接收器可以接收您的数据。如果您想跨应用程序发送数据/通知（例如，您还与 fb 和 twitter 交互，您的网络广播的多个接收器），则在您发送广播时使用它发送的系统范围。
> 
> 2.) 结果接收者：您的应用程序是数据的唯一接收者。它是您实现并通过 putExtra 将其传递给 intentService 的接口。IntentService 然后会获取这个对象并调用它的receiver.send 函数来发送任何东西（捆绑）到调用活动。如果您的所有通信都在您的应用程序内部，则结果接收器优先于广播接收器

编辑：我还应该提到这个警告

> **注意**：服务在其宿主进程的主线程中运行——服务不会创建自己的线程，也不会在单独的进程中运行（除非您另外指定）。这意味着，如果您的服务要执行任何 CPU 密集型工作或阻塞操作（例如 MP3 播放或网络），您应该在服务中创建一个新线程来完成这项工作。通过使用单独的线程，您将降低应用程序无响应 (ANR) 错误的风险，并且应用程序的主线程可以保持专用于用户与您的活动的交互。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-11-01T13:50:13.047

BroadcastReceiver 是接收广播的接收器。这些是由某人发送的，目的是可以有许多接收器接收它们（如无线电广播）。

另一方面，ResultReceiver 旨在接收来自某人的回调结果。因此，这可以与对讲机进行比较，您在其中呼叫某人，然后将从您呼叫的人那里收到答案（结果）。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-01T13:48:22.637

这两个类是**完全**不同的。*它实际上与Broadcast*和*Result*之间的区别完全相同。

*   它广播什么？简而言之，它是整个系统可见的一些消息，它可以被系统的每个部分（知道合约）使用，它不是由 smb reuest 发起的；
*   结果是什么？这是我们期望从系统的另一部分收到的东西。通常只有一个结果接收器，并且通常该接收器已请求处理以获得结果（感觉不同 - 对于广播，没有人需要做任何“请求”来让它产生）；

这是从逻辑角度的解释。从代码的角度来看，如果您比较 BroadcastReceiver 和 ResultReceiver 您可以观察到巨大的差异。基本上这两个类都是建立在 IPC 之上的，但是 BroadcastReceiver 复杂得多，因为它的性质不同（我在第一部分试图解释）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-01T13:53:35.253

**广播接收器**

广播接收器是响应系统范围的广播公告的组件。例如，广播宣布屏幕已关闭、电池电量低或已拍摄照片。应用程序还可以发起广播——例如，让其他应用程序知道某些数据已下载到设备并可供他们使用。尽管广播接收器不显示用户界面，但它们可以创建状态栏通知以在广播事件发生时提醒用户。更重要的是，广播接收器只是其他组件的“网关”，旨在完成非常少量的工作。例如，它可能会启动一项服务以根据事件执行某些工作。

**结果接收器**

如果您的服务将成为您应用程序的一部分，那么您将使其变得比需要的复杂得多。由于您有一个从 Restful Web 服务获取一些数据的简单用例，您应该研究[ResultReceiver](http://developer.android.com/reference/android/os/ResultReceiver.html)和[IntentService](http://developer.android.com/reference/android/app/IntentService.html)。

当您想要执行某些操作时，此 Service + ResultReceiver 模式通过使用 startService() 启动或绑定到服务来工作。您可以指定要执行的操作，并通过 Intent 中的 extras 传入您的 ResultReceiver（活动）。

# objective-c - 使视图控制器成为新的详细视图控制器时，我无法访问我的 IBOutlets

> ID：13178082
> 
> 赞同：0
> 
> 时间：2012-11-01T13:26:31.443
> 
> 标签：objective-c, ios, uisplitviewcontroller, iboutlet

我有一个 iPad 主细节，其中主要细节控制器是导航控制器，并且根据选择的表行（在主视图控制器中），我可能会或可能不会替换由细节导航控制器管理的视图控制器。

这似乎工作正常，只是在进行此操作时我无法访问新的详细视图控制器的 IBOutlets。

这是我切换导航控制器的视图控制器：

```
CustomerDetailViewController *subview = [[CustomerDetailViewController alloc] initWithNibName:@"CustomerDetailViewController" bundle:nil];            
[subview setTitle:@"Testing"];
AppDelegate *app = (AppDelegate *)[[UIApplication sharedApplication] delegate];
app.splitViewController.delegate = subview;
[app.detailNavigationController setViewControllers:[NSArray arrayWithObjects:subview, nil]];
[subview setData:[custData objectForKey:@"name"]]; 
```

custData 是一个包含我的视图信息的 NSDictionary。这是 setData 命令：

```
- (void)setData:(NSDictionary *)cust {

    NSLog(@"%@\n", [cust valueForKey:@"name"]);
    self.nameLabel.text = [cust valueForKey:@"name"];
    NSLog(@"%@\n", self.nameLabel.text);
} 
```

所以发生的事情是，子视图成为新的视图控制器，但标签没有改变 - 但是，这两个日志命令被执行。标签是使用 IB 合成和连接的，如果我将子视图推送为新的视图控制器而不是替换它，则该标签可以工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T13:29:51.247

我会说，视图尚未初始化。`viewDidLoad`在该方法中首先连接插座。尝试在 中添加一条日志语句`viewDidLoad`以找出首先调用哪个语句。

如果`viewDidLoad`在您的方法之后调用`setData`，您只能设置 的局部变量，`CustomerDetailViewController`然后读取`viewDidLoad`哪个相应地设置标签。

# javascript - 如何使用 dojo xhr 提交多个表单？

> ID：13178088
> 
> 赞同：0
> 
> 时间：2012-11-01T13:26:38.620
> 
> 标签：javascript, ajax, forms, dojo

我正在尝试找到一种方法，如何在使用 dojo 的一次 xhr.post 调用中使用 ajax 提交多个表单。[本页](http://dojotoolkit.org/reference-guide/1.7/dojo/_base/xhr.html#example-1-dojo-xhrget-and-form-submission)底部的文档说：

> 事实上，属性“form:”可以在每个节点上设置，而不仅仅是在表单节点上。如果您的页面包含多个表单，并且这些表单包含在 div- 或 span-tag 中，那么您可以提交所有这些表单，前提是您将“form:”设置为周围的 div-或 span-tag。

将包含多个表单的 div 的 id 指定为 xhr 调用中的“表单”属性不起作用：

```
xhr.post({
    form: "idOfDivThatSurroundsManyForms",
    ...
}); 
```

它在 domForm.formToObject 中失败，它确实需要一个包含元素属性的表单节点（或 id）。

文档的这一部分是错误的还是我错过了什么？

您是否有任何想法如何以其他方式轻松地将多种形式组合成一个 xhr 调用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-03T20:37:29.713

我认为文档是错误的，您的观察是正确的，`form`属性`formToObject`作为参数发送到..

这是一个解决方法：

```
require(["dojo/_base/xhr", "dojo/query", "dojo/_base/lang", "dojo/dom-form"], function (xhr, query, lang, domForm) {

  var mergedForms = {}
  query('form', 'idOfDivThatSurroundsManyForms').forEach( function(form) {
        lang.mixin(mergedForms, domForm.formToObject(form));
  } );
  xhr.post( {

    content: mergedForms
  } );

}); 
```

# objective-c - 核心图形剪辑不起作用

> ID：13178109
> 
> 赞同：0
> 
> 时间：2012-11-01T13:28:30.377
> 
> 标签：objective-c, ios, cocoa, core-graphics, cgcontext

我有这个代码来为内部和外部边界之间的区域着色。

```
CGContextSaveGState(context);
CGContextAddRect(context, self.bounds);
CGContextAddPath(context, inlinePath);
CGContextEOClip(context);
CGContextAddPath(context, outlinePath);
CGContextClip(context);
CGContextSetFillColorWithColor(context, _myColor.CGColor);
CGContextFillRect(context, self.bounds);
CGContextRestoreGState(context); 
```

这是当地例行公事的一部分`drawChartInContext:`。
当我生成这样的图像时效果很好：

```
UIGraphicsBeginImageContextWithOptions(self.frame.size, NO, 2.0);
[self drawChartInContext:UIGraphicsGetCurrentContext()]; 
UIImage* image = UIGraphicsGetImageFromCurrentImageContext();
UIGraphicsEndImageContext(); 
```

但是当我调用它时，`drawRect`我只会让整个`outlinePath`区域充满`_myColor`.

```
- (void)drawRect:(CGRect)rect
{
    CGContextRef context = UIGraphicsGetCurrentContext();
    [self drawChartInContext:context];
} 
```

有什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T13:35:28.147

刚刚想通了。这是两个疏忽的结合：

1.  `inlinePath`面积为零（有效的特殊情况）
2.  `myColor`有 1.0 alpha（配置错误）。

# c++ - 在 Eclipse 中调试混合的 Python/C++ 代码

> ID：13178116
> 
> 赞同：6
> 
> 时间：2012-11-01T13:29:11.233
> 
> 标签：c++, python, eclipse, cmake, swig

我有一个带有 SWIG 生成的 Python 前端的 C++ 项目，我使用 CMake 构建了它。我现在正试图找到一种方便的方法来调试我的混合 Python/C++ 代码。我可以使用 gdb 获得错误的堆栈跟踪，但我想要一些更奇特的功能，例如单步执行代码和设置断点的能力，例如使用 Eclipse。

使用 CMake 的 Eclipse 生成器，我可以生成一个可以导入 Eclipse 的项目。这工作正常，我也能够逐步完成纯 C++ 可执行文件。但问题开始了。

首先，我无法从 Eclipse 内部构建 Python 前端。从命令行我只是做“make python”，但在 Eclipse 项目中没有目标“python”。

其次，一旦我编译了 Python 前端，我不知道如何单步执行包含对我包装的 C++ 类的调用的 Python 脚本。Eclipse 对 Python 和 C++ 都进行了调试，但它们可以结合使用吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T14:14:29.180

> 一些更花哨的功能，例如单步执行代码和设置断点的能力，例如使用 Eclipse

这些功能如何“花哨”？您已经可以在 Python 的 pdb 或 C++ 的 gdb 中执行这些操作。

我建议使用 pdb 运行 python 代码（或`pdb.set_trace()`用于在有趣的点中断执行），并将 gdb 附加到单独终端中的进程。使用 pdb 在 Python 代码中设置断点并单步执行。使用 gdb 在 C++ 代码中设置断点并单步执行。当 pdb 跳过本机调用时，gdb 将接管。当 gdb`continue`允许 Python 执行恢复时，pdb 将接管。

这应该可以让您在 C++ 和 Python 断点之间跳转，而无需通过解释器进行跟踪。

* * *

免责声明：我在很大程度上认为 IDE 是垃圾膨胀软件，所以如果 Eclipse*确实*有一个很好的方法来集成它，我无论如何也不知道。

# bash - 这是非法语法吗

> ID：13178117
> 
> 赞同：1
> 
> 时间：2012-11-01T13:29:15.943
> 
> 标签：bash

我正在尝试编写一个脚本来生成一个随机数，然后创建一个名为该随机数的目录并复制到一个文本文件中。我已经尝试了所有我能想到的分配变量但每次我得到

```
RANDOM: command not found
RANDOM: command not found
bash: //small.txt: No such file or directory
bash: //small.txt: No such file or directory 
```

下面是我的代码

```
#!/bin/bash
one=$(RANDOM)
two=$(RANDOM)

mkdir -p $one
mkdir -p $two
echo “BIGGGGGONgrery54y457457yytewrterytyutytytyhtytryrtyrthrthtrhrtyhrthrhtrhrthrthrthrthE”| > $one/small.txt
echo “B”| > $two/small.txt
echo "finish -l test me "
done 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-01T13:31:04.037

这不是*非法*语法（它确实意味着什么），它只是你想要的错误语法。而不是`$(RANDOM)`你想要的`${RANDOM}`，甚至只是`$RANDOM`。

当您使用`$()`它时，它是命令替换，因此 bash 实际上是在尝试执行名为 的命令`RANDOM`，这就是为什么您找不到命令并且变量中没有任何内容的原因。

您的 I/O 重定向也看起来错误...写入您应该使用的文件：

```
echo "something" > file 
```

请注意，我删除了`|`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-01T13:34:52.747

FatalError 涵盖了语法问题，这里有一些相关的东西——如何在一个范围内生成一个随机数（在这个例子中，1-100）：

```
NUMBER=$(( ( $RANDOM % 100 )  + 1 )) 
```

另请参阅：[http](http://www.cyberciti.biz/faq/bash-shell-script-generating-random-numbers/) ://www.cyberciti.biz/faq/bash-shell-script-generating-random-numbers/了解有关 shell 中随机数生成的其他方法/信息

# django - Django - 提供一个 ical 文件

> ID：13178118
> 
> 赞同：1
> 
> 时间：2012-11-01T13:29:17.370
> 
> 标签：django, icalendar

我是通过 django_ical 提供一个 icalender 文件的服务器。问题是文件名为download.ics。我正在尝试将其更改为 MyCalender.ics。如果找到这个旧片段。我更喜欢使用 django_ical，因为它可以很好地与 django 联合。

```
cal = vobject.iCalendar()
cal.add('method').value = 'PUBLISH'  # IE/Outlook needs this
for event in event_list:
     vevent = cal.add('vevent')
icalstream = cal.serialize()
response = HttpResponse(icalstream, mimetype='text/calendar')
response['Filename'] = 'filename.ics'  # IE needs this
response['Content-Disposition'] = 'attachment; filename=filename.ics' 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-01T16:33:28.130

[`django_ical`](https://django-ics.readthedocs.org/en/latest/index.html)继承`ICalFeed`自_`django.contrib.syndication.views.Feed`

在您的应用程序中，您继承自`ICalFeed`to provide`items`以及`item_title`为 ics 文件生成数据的其他方法。

您可以覆盖该`__call__`方法。调用`super`将返回您`HttpResponse`，您将为其添加自定义标头。

代码将类似于：

```
class EventFeed(ICalFeed):
    """
    A simple event calender
    """
    product_id = '-//example.com//Example//EN'
    timezone = 'UTC'

    def items(self):
        return Event.objects.all().order_by('-start_datetime')

    # your other fields

    def __call__(self, request, *args, **kwargs):
        response = super(EventFeed, self).__call__(request, *args, **kwargs)
        if response.mimetype == 'text/calendar':
            response['Filename'] = 'filename.ics'  # IE needs this
            response['Content-Disposition'] = 'attachment; filename=filename.ics'
        return response 
```

此代码未经测试，因此可能存在一些拼写错误。此外，如果调用有错误，您还需要捕获`super`. 我这样做了，`response.mimetype == 'text/calendar'`但也许有更好的方法来做到这一点

# sql - SQLCLR：在 64 位 SQL SERVER 中运行 32 位 .Net dll

> ID：13178122
> 
> 赞同：0
> 
> 时间：2012-11-01T13:29:28.693
> 
> 标签：sql, sql-server-2005, stored-procedures, dll, 64-bit

我有一个从存储过程调用的 32 位 dll。它适用于 32 位 sql server 但现在当我从 64 位 sql server 2005 开发人员版调用该过程时，它给出了一个例外。

**如何使 32 位 dll 从 64 位 sql server 运行？**

请注意，我没有 dll 的源代码，因此无法重新编译。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T13:35:29.290

64 位 SQL Server 只能调用 64 位 DLL，但有一些调整。我从未尝试过。

我想[这篇文章](https://serverfault.com/questions/226709/32-bit-dll-on-sql-server-2008-x64)可能会对你有所帮助。

或者[这个](http://social.msdn.microsoft.com/Forums/en-US/sqlservermigration/thread/01370e7d-a427-4263-bf68-fefb15d02462)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-08T14:58:22.673

我遇到了同样的问题，这是我为克服这个问题所做的。

您不能使用 SQLCLR 函数在 SQL 64 位中加载 32 位 dll，它不起作用。您仍然可以按照以下方法使用 SQLCLR。

创建 64 位 DLL，它可以将传递的参数从 SQL 写入 txt 文件。

使用 filesystemwatcher 创建一个 32 位的 Windows 服务，并在 _changed 事件中获取 txt 文件，读取内容并从 32 位 dll 调用方法。

我希望这能解决你的问题。

# html - Sencha Touch 2 生产版本

> ID：13178127
> 
> 赞同：0
> 
> 时间：2012-11-01T13:29:43.447
> 
> 标签：html, webview, extjs, sencha-touch-2, production

我已经使用 Sencha Touch 2 开发了一个移动应用程序，但我遇到了这个问题：我可以通过将应用程序上传到服务器（或本地 wamp、节点等）以及使用

1 - 桌面上的 chrome，
2 - 适用于 android 的 chrome，或
3 - 三星 Galaxy S 或 HTC 中的 android 浏览器 一部或任何 Android 手机
4 - 在任何 iphone 浏览器或本机 webview 中，该应用程序也适用

但是，当我尝试在 Android（本机 APK）中使用 webview 访问相同的 URL 时，它不会隐藏启动画面。从浏览器访问时，启动画面会停留一两秒钟然后消失，并显示应用程序内的第一个屏幕，所以我确定在“webview 版本”中它被卡住了。

需要注意的重要事项：
1 - 尝试使用 autoMaximize:true 和 false - 不工作并不重要
2 - 我尝试访问的版本是使用“sencha app build production”
（PRODUCTION BUILD）构建的。所有其他版本都可以在任何地方访问并且功能齐全（测试构建、包构建等）。唯一让我头疼的版本是生产版本（但我必须将此版本用于生产，我不能给客户一个测试版本）。

这是我的 app.js

```
Ext.application({
    name: 'AR',
    viewport: {
        autoMaximize: true//( navigator.userAgent.search("Safari") != -1 && (!Ext.browser.is.Standalone && Ext.os.is.iOS && Ext.browser.version.isGreaterThan(3) ) ? true : false )
      },
    requires: [
        'Ext.MessageBox',
        'Ext.data.proxy.JsonP',
        'Ext.data.JsonP',
        'Ext.Ajax',
        'Ext.plugin.ListPaging',
        'Ext.*'
    ],

    views: ['Main','Loading','About','ItemDetail','ListByCategory','ListByGenres','HeaderPanel','Search','ItemsLoad','ScreensContainer','DataList','SearchResultsList','SearchResultBar','SearchPanel','SearchResults','BackBtn','HebrewList','CategoriesPanelContainer'],
    models: ['Category','Genre','Category','ItemsLoad','CategoriesPanel','ItemLoad','ResultsBar','HomePageContentLoad'],
    stores: ['Categories','Genres','Categories','ItemsLoad','CategoriesPanel','ItemLoad','FreeTextItemsLoad','ResultsBar','HomePageContentLoad'],
    controllers: ['ListController','MenuController','AppController','SearchController','ItemController'],

    icon: {
        '57': 'resources/icons/Icon.png',
        '72': 'resources/icons/Icon~ipad.png',
        '114': 'resources/icons/Icon@2x.png',
        '144': 'resources/icons/Icon~ipad@2x.png'
    },

    isIconPrecomposed: true,

    startupImage: {
        '320x460': 'resources/startup/320x460.jpg',
        '640x920': 'resources/startup/640x920.png',
        '768x1004': 'resources/startup/768x1004.png',
        '748x1024': 'resources/startup/748x1024.png',
        '1536x2008': 'resources/startup/1536x2008.png',
        '1496x2048': 'resources/startup/1496x2048.png'
    },

    launch: function() {
        // Destroy the splashscreen element
        Ext.fly('splashScreenClass').destroy();
        Ext.Viewport.add(Ext.create('AR.view.Main'));
    },

    // onUpdated: function() {
    //     Ext.Msg.confirm(
    //         "Application Update",
    //         "This application has just successfully been updated to the latest version. Reload now?",
    //         function(buttonId) {
    //             if (buttonId === 'yes') {
    //                 window.location.reload();
    //             }
    //         }
    //     );
    // },

    iconsDictionary: {
        'הכל' : 'everythingLogoClass',
        'כלים' : 'toolsLogoClass',
        'מאמרים' : 'docsLogoClass',
        'סרטונים' : 'videosLogoClass',
        'סיפורי מקרה' : 'storiesLogoClass'
    }

}); 
```

这是 index.html

```
<!DOCTYPE html>
<html manifest="" lang="en-US">
<head>
    <!-- <meta name="viewport" content="width=device-width, target-densityDpi=device-dpi"> -->
    <meta charset="UTF-8">
    <title>AR</title>
    <style type="text/css">

        html, body {
            height: 100%;
            /*background-color: #1985D0*/
        }

     .splashScreenLogo
        {
          background: url('resources/images/splashLogo.png') no-repeat;
          height: 136px;
          width: 204px;
          text-align: center;
          position: relative;
          top: 20%;
          padding-bottom: 15px;
        }
        #splashScreenClass
        {
          text-align: center;
          height: 100%;
          width: 100%;
          background: #ffffff; /* Old browsers */
        background: -moz-linear-gradient(top, #ffffff 1%, #e5f6f9 100%); /* FF3.6+ */
        background: -webkit-gradient(linear, left top, left bottom, color-stop(1%,#ffffff), color-stop(100%,#e5f6f9)); /* Chrome,Safari4+ */
        background: -webkit-linear-gradient(top, #ffffff 1%,#e5f6f9 100%); /* Chrome10+,Safari5.1+ */
        background: -o-linear-gradient(top, #ffffff 1%,#e5f6f9 100%); /* Opera 11.10+ */
        background: -ms-linear-gradient(top, #ffffff 1%,#e5f6f9 100%); /* IE10+ */
        background: linear-gradient(to bottom, #ffffff 1%,#e5f6f9 100%); /* W3C */
        filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#ffffff', endColorstr='#e5f6f9',GradientType=0 ); /* IE6-9 */ 
        }

        .splashScreenText
        {
          font-family: 'Eleganti';
          width: 100%;
          text-align: center;
          height: 55px;
          color:white;
          background: #ffffff; /* Old browsers */
        background: -moz-linear-gradient(top, #ffffff 0%, #0155a4 51%, #ffffff 100%); /* FF3.6+ */
        background: -webkit-gradient(linear, left top, left bottom, color-stop(0%,#ffffff), color-stop(51%,#0155a4), color-stop(100%,#ffffff)); /* Chrome,Safari4+ */
        background: -webkit-linear-gradient(top, #ffffff 0%,#0155a4 51%,#ffffff 100%); /* Chrome10+,Safari5.1+ */
        background: -o-linear-gradient(top, #ffffff 0%,#0155a4 51%,#ffffff 100%); /* Opera 11.10+ */
        background: -ms-linear-gradient(top, #ffffff 0%,#0155a4 51%,#ffffff 100%); /* IE10+ */
        background: linear-gradient(to bottom, #ffffff 0%,#0155a4 51%,#ffffff 100%); /* W3C */
        filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#ffffff', endColorstr='#ffffff',GradientType=0 ); /* IE6-9 */
        }

    </style>

</head>
<body>

    <div id="splashScreenClass">
        <div style="height:20%;width:100%;"></div>
        <center><div class="splashScreenLogo"></div></center>
        <div style="height:5%;width:100%;"></div>
        <div class="splashScreenText"><p style="top: 13px;font-size: 30px;position: relative;">מרכז הידע</p></div>
        <!-- <img src='resources/images/splash.jpg' /> -->
    </div>
    <!-- The line below must be kept intact for Sencha Command to build your application -->
    <script id="microloader" type="text/javascript" src="sdk/microloader/development.js"></script>
    <!--<script src="js/appservice.js"></script>-->
</body>
</html> 
```

如果有人知道发生了什么，我将非常感谢一些帮助。谢谢，

# wpf - 如何将工具提示的可见性绑定到文本块中的文本？

> ID：13178134
> 
> 赞同：0
> 
> 时间：2012-11-01T13:30:07.220
> 
> 标签：wpf, xaml, tooltip

```
<DataGrid x:Name="dgRecords1"
          CanUserAddRows="False" IsReadOnly="True"
          ColumnHeaderStyle="{DynamicResource DataGridColumnHeaderStyle1}"
          Style="{DynamicResource StyleDatagrid}"
          SelectionChanged="dgRecords1_SelectionChanged"
          Height="251" Width="569" Margin="41,173,168,0">
  <DataGrid.RowStyle>
    <Style TargetType="DataGridRow">
      <Setter Property="ToolTip">
        <Setter.Value>
          <Border Width="200" Height="80"
                  BorderBrush="Black" BorderThickness="1"
                  Background="AliceBlue">
            <StackPanel Orientation="Vertical">
              <StackPanel Height="30" Background="Black">
                <TextBlock Text="Email Sent To"
                           FontSize="14" FontWeight="Bold" Foreground="White"/>
              </StackPanel>
              <StackPanel>
                <TextBlock Text="{Binding SentToList}"
                           TextWrapping="Wrap" FontWeight="Bold"/>
              </StackPanel>
            </StackPanel>
          </Border>
        </Setter.Value>
      </Setter>
    </Style>
  </DataGrid.RowStyle> 
```

在上面的代码中，

```
 <TextBlock TextWrapping="Wrap" FontWeight="Bold" Text="{Binding SentToList}" /> 
```

我想检查这个文本块中是否有东西，如果没有，我需要使工具提示不可见。有没有使用触发器的方法？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-01T13:45:37.787

您可以用 ToolTip 控件包围您的 Border，并使用从字符串转换为 Visibility的[绑定转换器](http://msdn.microsoft.com/en-us/library/system.windows.data.binding.converter.aspx)`SentToList`将该控件的 Visibility 绑定到相同的属性。

```
<Style TargetType="DataGridRow">
    <Style.Resources>
        <local:StringToVisibilityConverter x:Key="StringToVisibilityConverter"/>
    </Style.Resources>
    <Setter Property="ToolTip">
        <Setter.Value>
            <ToolTip Visibility="{Binding SentToList, Converter={StaticResource StringToVisibilityConverter}}">
                <Border>
                    ...
                </Border>
             </ToolTip>
        </Setter.Value>
    </Setter>
</Style> 
```

转换器可能如下所示：

```
public class StringToVisibilityConverter : IValueConverter
{
    public object Convert(object value, Type targetType, object parameter, CultureInfo culture)
    {
        return string.IsNullOrWhiteSpace(value as string) ? Visibility.Collapsed : Visibility.Visible;
    }

    public object ConvertBack(object value, Type targetType, object parameter, CultureInfo culture)
    {
        throw new NotImplementedException();
    }
} 
```

# iphone - iPhone应用程序中的付款方式？

> ID：13178142
> 
> 赞同：0
> 
> 时间：2012-11-01T13:30:20.887
> 
> 标签：iphone, ios, uiwebview, browser, payment-processing

我有一个 iPhone 应用程序，其中列出了要出售的物品。为了支付这些物品，我在赞助商的服务器上有一个 Web 服务，需要通过发送某些参数（如金额、用户 ID、折扣券等）来使用它。所以我应该在应用程序内的 Web 视图中调用它还是应该调用它在网络浏览器中调用？赞助商希望在一切完成后在应用程序中显示支付成功或失败的消息。此信息来自服务器本身。但是，如果我调用浏览器，我将无法跟踪有关付款成功与否的信息？我应该怎么办？请在这件事上给予我帮助

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2012-11-01T13:32:42.253

这对于 iOS 来说特别有趣，因为它为应用程序开发人员提供了一种相当简单的方法来实现 App Store 的替代支付解决方案，如果所销售的商品是实体的而非数字的，这不会违反 Apple 的应用内购买政策. Adyen 的目标正是这种情况。

至于支付方式本身，它接受信用卡、PayPal 以及移动应用程序（本机应用程序）和移动网站内的一系列其他支付方式。当然，提供应用程序或服务的 HTML（基于浏览器）版本而不是专门的 iOS 应用程序是绕过 Apple 削减的另一种方式。

该公司表示，Adyen 支付平台的其他好处是商家和开发商可以利用“完全集成的服务，消除安全和 PCI 合规性的负担”。此外，应用程序开发人员可以“皮肤”移动支付和结帐流程，获得对外观和感觉的控制，据说这是提高转化率的重要驱动力。

已经使用新移动支付平台的商家包括通过其 iPhone 应用程序使用的欧洲最大的连锁电影院 Pathe 和在线贺卡零售商 Greetz。

# php - 如何分解由 group_concat[distinct] 合并的值？

> ID：13178143
> 
> 赞同：2
> 
> 时间：2012-11-01T13:30:21.713
> 
> 标签：php, mysql, join, explode, group-concat

我有两张桌子。每个产品可以有一个或多个文件。但是每个文件必须属于一个产品。

```
**PRODUCTS**
ID     PRODUCT_CODE     DESCRIPTION
1      a1               small
2      a2               big

**PRODUCT_FILES**
ID     PRODUCT_ID       FILE_PATH     FILE_NAME
1      1                x.pdf         x
2      1                y.pdf         y
3      2                z.pdf         z 
```

我想要一张桌子，其中包括

```
PRODUCT_ID, PRODUCT_CODE, DESCRIPTION, FILE_NAME(s), FILE PATH(s) 
```

我的查询是；

```
$query = $this->db->query
("
    SELECT products.*,product_files.file_name
    FROM products 
    INNER JOIN product_files 
    ON products.id = product_files.product_id
    GROUP BY products.id
");

$i = 0;

while($row = $query->fetch_assoc())
{           
$details[]  = array
(
    'code' => $row['code'], 
    'description' => $row['description'],
    'file_name' => $row['file_name'],
    'file_path' => $row['file_path']
);
}

return $details; 
```

我的php是；

```
<?php foreach($details  AS $product) { ?>
<tr>    
     <td><?php echo $product['code']; ?></td>
     <td><?php echo $product['description']; ?></td>
     <td><a href="files/<?php echo $product['file_path']; ?>">
     <?php echo $product['file_name']; ?></a></td>
</tr>
<?php } ?> 
```

但是使用此查询和 php，产品行会复制哪个产品具有多个文件，例如；

```
a1   small   x   x.pdf
a1   small   y   y.pdf
a2   big     z   z.pdf 
```

而不是我尝试使用相同的php代码进行另一个查询；

```
$query = $this->db->query
("
SELECT products.*,
GROUP_CONCAT(DISTINCT product_files.file_name SEPARATOR ',') 
AS file_name,product_files.file_path
FROM products 
INNER JOIN product_files 
ON products.id = product_files.product_id
GROUP BY product.id
"); 
```

结果是；

```
a1   small   x,y   x.pdf,y.pdf (linked with x.pdf's path)
a2   big     z     z.pdf 
```

我现在必须分解 product_files 单元格吗？如果是，请尝试用一段代码解释一下？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T15:51:43.393

看起来你快到了！

你也只需要`GROUP_CONCAT`在 file_path 上做一个；

```
SELECT products.*,
GROUP_CONCAT(DISTINCT product_files.file_name ORDER BY product_files.id SEPARATOR ',') AS file_name,
GROUP_CONCAT(DISTINCT product_files.file_path ORDER BY product_files.id SEPARATOR ',') AS file_path
FROM products 
INNER JOIN product_files 
ON products.id = product_files.product_id
GROUP BY products.id; 
```

并且，为了安全起见，订购 GROUP_CONCAT 编辑的文件名和文件路径，因此它们处于相应的顺序。

而不是你可以分解 file_name 或 file_path 并循环遍历每个数组 - 以获取文件路径对（它们将位于每个数组中的相同位置）。

# java - 坚持使用 SQLite 和 Group By 的 android SQL 设计

> ID：13178145
> 
> 赞同：5
> 
> 时间：2012-11-01T13:30:23.297
> 
> 标签：java, android, sql, sqlite

有以下问题： 试图从表中显示与会者列表。表 A 是通过将来自网络源（HTML 抓取）的数据“同步”到表 A 中生成的。

**表 A**
列：eventID、userID、userName
数据： 1、111
、Harry
2、222、Ben
3、534、Helen
2、534、Helen
2、545、James

**最终结果**
我试图在活动中显示如下：
社交 1：参加者：Harry
Social 2：参加者：Ben、Helen、James
Social 3：参加者：Helen

最好的方法是如何做到这一点？

**我的初始计划：**
1) 对表 A 中的 eventID 运行 SQL 选择 (Query1)
。2) 循环遍历步骤 1 的每个结果。
3) 对于查询 1 的每个结果结果，选择表 A 中当前的所有行eventID (称为查询 2)
4) 循环通过步骤 3 查询 2 的结果，对于每个结果，将用户名添加到字符串缓冲区。在 Query 2 结果的末尾，将 eventID 与生成的 StringBuffer 一起插入到一个新表中：

**Table B:**
columns: eventID, userName
Data:
1, "Harry"
2, "Ben, Helen, James"
3, "Helen "

然后使用表 B 中的数据与 SimpleCursorAdapter 一起使用数据填充标准 ListActivity，从而生成所有事件的列表和以逗号分隔的与会者列表。然后每次重新生成表 A 时，清除表 B 中的数据，然后重新填充它。

**问题：**
这是最好的方法/最整洁的方法吗？我真的不喜欢有一个临时表只是为了做到这一点的想法。

背景：我是 Android 开发新手，自从几年前在 uni 学习 Java 后，才再次接触 Java。我在编程方面的强项在于 HTML、PHP、MySQL。

额外信息：为表 A 收集数据的方式是抓取包含特定用户的所有事件的页面。然后我打算以相反的方式显示这一点，通过为每个事件显示所有参加的用户。

我将不胜感激有关如何完成此任务的一些帮助/意见。非常感谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-01T13:42:16.833

您不能尝试以下方法吗？

```
SELECT 
    eventID,
    userID, 
    GROUP_CONCAT(userName, ",") AS users
FROM table_a
GROUP BY eventID 
```

因此，您可以通过单个查询获取所有数据。

查看更多关于[`GROUP_CONCAT`](http://www.sqlite.org/lang_aggfunc.html).

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-01T13:46:35.447

你把这种方法弄得太复杂了。您只需要一个查询，而不需要辅助表。首先，放弃`SimpleCursorAdapter`并扩展`BaseAdapter`。我这么说的原因是因为`BaseAdapter`你不需要一个 active `Cursor`，所以你可以在 Java 中完成工作并且省去一个大麻烦，而不是尝试用 SQL 来操作数据。

*   运行您的第一个查询（按 eventID 分组）
*   遍历所有结果，将名称添加到字符串（逗号分隔）
*   当 eventId 改变时，将字符串转储到容器中并开始一个新的
*   将数据容器传递给您的`BaseAdapter`

您可能需要一个`Event`对象来将 id 和名称保持在一起。然后您可以将每个添加`Event`到 ArrayList 并将其传递给您的适配器。

# php - 数组到字符串的转换

> ID：13178161
> 
> 赞同：-5
> 
> 时间：2012-11-01T13:31:44.950
> 
> 标签：php, arrays, str-replace

```
$replacements = array(
    '{order_id}' => $order_id, 
    '{site_url}' => $settings["site_url"], 
    '{email}' => $user_email, 
    '{last_name}' => $last_name, 
    '{phone}' => $phone, 
    '{order_total}' => currency_format($order_total), 
);

    foreach($replacements as $param => $value){
    $sms = str_replace($param, $value, $db2->f('sms'));
    $user_to = str_replace($param, $value, $db2->f('user_to'));
    $user_from = str_replace($param, $value, $db2->f('user_from'));
    $user_subject = str_replace($param, $value, $db2->f('user_subject'));
    $user_body = str_replace($param, $value, $user_body);
    $admin_to = str_replace($param, $value, $db2->f('admin_to'));
    $admin_from = str_replace($param, $value, $db2->f('admin_from'));
    $admin_subject = str_replace($param, $value, $db2->f('admin_subject'));
    $admin_body = str_replace($param, $value, $db2->f('admin_body'));
} 
```

问题是什么？为什么不能工作？数组到字符串的转换......

谁能建议在这种情况下如何减少代码行数？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-18T17:46:06.083

```
$replacements = array(
    '{order_id}' => $order_id, 
    '{site_url}' => $settings["site_url"], 
    '{email}' => $user_email, 
    '{last_name}' => $last_name, 
    '{phone}' => $phone, 
    '{order_total}' => currency_format($order_total), 
);

$templates = array(
    'sms' => $db2->f('sms'), 
    'user_to' => $db2->f('user_to'), 
    'user_from' => $db2->f('user_from'), 
    'user_subject' => $db2->f('user_subject'), 
    'user_body' => $db2->f('user_body'), 
    'admin_to' => $db2->f('admin_to'), 
    'admin_from' => $db2->f('admin_from'), 
    'admin_subject' => $db2->f('admin_subject'), 
    'admin_body' => $db2->f('admin_body')
);

foreach($templates as $way => $tmp){
    $templates[$way] = strtr($tmp, $replacements);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-01T13:36:05.123

每次循环时，您都会覆盖 $user_body 。试试看：

```
$replacements = array(
    '{order_id}' => $order_id, 
    '{site_url}' => $settings["site_url"], 
    '{email}' => $user_email, 
    '{last_name}' => $last_name, 
    '{phone}' => $phone, 
    '{order_total}' => currency_format($order_total), 
);

$user_body = $db2->f('user_body');
foreach($replacements as $param => $value){
    $user_body = str_replace($param, $value, $user_body);
}

echo $user_body; 
```

# google-app-engine - 在 appengine ndb 中存储结构化数据的不同方式的优缺点是什么？

> ID：13178163
> 
> 赞同：1
> 
> 时间：2012-11-01T13:31:48.497
> 
> 标签：google-app-engine, google-cloud-datastore, app-engine-ndb

NDB 带有许多可用于存储结构化数据的属性类型：

**ndb.StructuredProperty** 我可以看到这对于存储其他模型实例可能很有用，以防在应用程序引擎中单独存储模型没有用处。但也有**LocalStructuredProperty**。该文档仅说明该值存储为一个不透明的值，但这有什么好处？

**JSONProperty 和 PickledProperty** 数据的人类可读性是将数据存储为 JSON 的唯一优势吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-01T13:43:13.493

LocalStructuredProperty 类的文档字符串：

> 序列化为不透明 blob 的子结构。
> 
> 这在 Python 端看起来像 StructuredProperty，但
> 在数据存储区中写得像 BlobProperty。它没有被索引，您不能查询子属性。另一方面，磁盘上的表示更有效，并且可以通过传递compressed=True 来提高效率，它使用gzip 压缩blob 数据。

Json 和 pickle 没有预定义的结构。

# php - 我需要获取锚标签的文本和锚标签的链接，即href。我需要在php中进行处理

> ID：13178166
> 
> 赞同：0
> 
> 时间：2012-11-01T13:31:52.570
> 
> 标签：php, html

> **可能重复：**
> [如何使用 PHP 解析和处理 HTML？](https://stackoverflow.com/questions/3577641/how-to-parse-and-process-html-with-php)

```
$strHTML = '<div>
<h2 class="entry-title">
<a rel="bookmark" title="Permalink to BSR Fuels Report; Rezidor Hotels to Reduce Energy; Germany Caps Subsidies &ndash; 3BL Media Energy Minute" href="http://www.caelusgreenroom.com/2012/10/17/bsr-fuels-report-rezidor-hotels-to-reduce-energy-germany-caps-subsidies-3bl-media-energy-minute/">BSR Fuels Report; Rezidor Hotels to Reduce Energy; Germany Caps Subsidies &ndash; 3BL Media Energy Minute</a>
</h2>

<h2 class="entry-title">
<a rel="bookmark" title="Permalink to Small Business Healthcare Costs to Decrease; EU Pharma Guidelines &ndash; 3BL Media" href="http://www.caelusgreenroom.com/2012/10/17/small-business-healthcare-costs-to-decrease-eu-pharma-guidelines-3bl-media/">Small Business Healthcare Costs to Decrease; EU Pharma Guidelines &ndash; 3BL Media</a>
</h2>
</div>'; 
```

如图所示，我将上述 html 作为 php 变量中的字符串。我需要获取锚标签的文本和锚标签的链接，即href。我需要在 php 中进行处理。有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T13:45:36.620

使用[DomDocument](http://php.net/manual/en/class.domdocument.php "文档")解析字符串，然后使用[getElementsByTagName](http://www.php.net/manual/en/domdocument.getelementsbytagname.php "getElementsByTagName")函数检索所有`a`元素。[然后你可以使用foreach](http://de1.php.net/manual/en/control-structures.foreach.php "PHP foreach")遍历它们并检索你想要的数据。查看[DomElement](http://de1.php.net/manual/en/class.domelement.php "DOM元素")以获取可能的属性和方法的列表。

# blackberry - 拨轮点击事件问题

> ID：13178168
> 
> 赞同：1
> 
> 时间：2012-11-01T13:32:01.923
> 
> 标签：blackberry, java-me

我正在处理用国家列表填充的[KeywordFilterField 。](http://www.blackberry.com/developers/docs/7.1.0api/net/rim/device/api/ui/component/KeywordFilterField.html)现在我面临的问题是，当我单击特定国家/地区时，它应该移动到下一个屏幕，因为我`trackwheelClick`在检查`_keywordFilterField`是否可聚焦后​​编写了 pushScreen 代码，但事实并非如此。`Menu`打开时在`trackwheelClick event`屏幕中央触发，而不是移动到下一个屏幕。任何人都可以知道为什么菜单对话框在 trackwheelclick 事件上打开而不是进入下一个屏幕。

看看我在拨轮点击事件上做了什么：

```
protected boolean trackwheelClick(int status, int time) {
        if (_keywordFilterField.isFocus()) {
            int index = _keywordFilterField.getSelectedIndex();
            ReadableList readableList = _keywordFilterField.getResultList();
            Object selectedCountry = readableList.getAt(index);
            String countryName=selectedCountry.toString();
            urlutf8Encoder=new URLUTF8Encoder();
            String newCountry=urlutf8Encoder.encode(countryName);
            pushToSearchResult(newCountry,countryName);//To Next SCreen
            return true;
        }
        return false;
    } 
```

但它看起来像：![在此处输入图像描述](../Images/8fcf0c4f19469301b943ff925b9a4208.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T00:01:53.263

trackwheelClick 事件返回一个布尔值，指示该事件是否已被使用。一旦一个事件被消费，它就会停止传播到其他 UI 元素。如果返回 true，菜单将停止出现。

# mysql - 缓慢的 INSERT INTO SELECT 语句——不可重复

> ID：13178172
> 
> 赞同：2
> 
> 时间：2012-11-01T13:32:32.160
> 
> 标签：mysql, full-text-search, insert-into

**精简版：**

INSERT INTO SELECT 插入到具有相同数据的全文索引的表中有时需要 25 秒，有时需要 2500 秒。我们不知道这个巨大的差距是从哪里来的。

**长版：**

我有一个 cronjob 的问题，它将新数据导入到导入表中，并通过 INSERT INTO SELECT 语句将这些数据复制到生产表中。我已经拆分了表，因为使用 mysql 全文索引进行更新需要时间 - 使用一个 INSERT INTO SELECT 将数据插入到该表中似乎比使用许多单个插入语句更快

导入新数据的 cron 每 5 分钟运行一次。有一个函数可以检查 cron 的实例是否正在运行以禁止脚本的并行运行。通常每次 cron 调用都会有大约 500 条新记录。晚上 1 点到 2 点有更多的新数据（大约 5.000 – 15.000 条新记录），并且 cron 运行的时间远远超过 5 分钟。

当 cron 在夜间长时间运行并跟踪这些查询的性能时，我检测到 INSERT INTO SELECT 语句的性能非常（！）慢。要复制大约 15.000 条新记录（文件大小约为 30 MB），查询需要超过 2.500 秒！

查询是：

```
INSERT IGNORE INTO mentiondata 
SELECT * FROM mentionimport 
WHERE id <= 1203780; 
```

我分析查询并得到以下结果：

```
2012-10-31 06:52:06 Queryprofile: {
"starting":"0.000036",
"checking permissions":"0.000003",
"Opening tables":"0.000132",
"System lock":"0.000003",
"Table lock":"0.000007",
"init":"0.000041",
"optimizing":"0.000007",
"statistics":"0.000023",
"preparing":"0.000005",
"executing":"0.000002",
"Sending data":"999.999999",
"end":"0.000017",
"query end":"0.000005",
"freeing items":"1.458159",
"logging slow query":"0.000050",
"cleaning up":"0.000007"} 
```

在进程列表中，发送数据超过 2.500 - 在配置文件中仅为 999.999999。也许这就是探查器限制——随便……</p>

真正奇怪的是：当我尝试通过从全文表中删除记录来重现问题时（删除来自提及数据 WHERE id >= 1203780;）并手动启动复制过程只需要大约 25 秒！！！

所以我不明白，我真的需要帮助！我不明白为什么同一个查询之间会有如此大的性能差异！我在 cron-copy-statement 运行时检查了 mysql-processlist——没有其他查询会锁定表或其他东西。进程列表中只有一个复制查询——以及超过 2.500 秒的“发送数据”。没有其他 cron 或任何其他任务会影响服务器运行的性能。似乎 mysql-server 每晚都会变慢，或者在插入语句发生之前很长时间打开连接时 sql-query 需要很长时间（将数据插入到复制导入表中）。

是否有任何状态变量我可以检查为什么 mysql 这么慢？是否有可能检查为什么这些查询如此缓慢？这里有一些服务器变量的信息：

```
bulk_insert_buffer_size: 268435456
key_buffer_size: 536870912
query_cache_size: 536870912 
```

谢谢你的帮助！

蒂莫

# iphone - 使用 NSDirectoryEnumerator 迭代时从目录中删除文件

> ID：13178179
> 
> 赞同：2
> 
> 时间：2012-11-01T13:33:05.673
> 
> 标签：iphone, objective-c

例如，如果我这样做：

```
NSDirectoryEnumerator *directoryEnumerator = [[NSFileManager defaultManager] enumeratorAtURL:cacheDirectory
                                                                  includingPropertiesForKeys:@[NSURLContentAccessDateKey]
                                                                                     options:NSDirectoryEnumerationSkipsHiddenFiles
                                                                                errorHandler:nil];

NSURL *fileURL;
while (fileURL = [directoryEnumerator nextObject])
{
    NSDate *fileDate;
    [fileURL getResourceValue:&fileDate forKey:NSURLContentAccessDateKey error:nil];

    if ([cacheDate compare:fileDate] == NSOrderedDescending) // Delete all files with access date older then cacheDate(defined elsewhere)
        [[NSFileManager defaultManager] removeItemAtURL:fileURL error:nil];
} 
```

目录枚举器是否会“损坏”，例如我会因为每个文件的索引更改而得到意外结果吗？

但是，我想使用该`enumeratorAtURL`方法，而不是`contentsOfDirectoryAtURL`因为我必须处理大量文件（超过 100,000 个）。所以`contentsOfDirectoryAtURL`会占用大量内存。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-01T13:47:31.607

在迭代容器时从容器中删除项目通常是一个坏主意。

`fileURL`您可以将要删除的所有 s 保存在数组中，然后遍历数组以删除文件。

像这样的东西：

```
NSMutableArray *urlsToDelete = [[NSMutableArray alloc] init];

NSDirectoryEnumerator *directoryEnumerator = [[NSFileManager defaultManager] enumeratorAtURL:cacheDirectory
                                                                  includingPropertiesForKeys:@[NSURLContentAccessDateKey]
                                                                                     options:NSDirectoryEnumerationSkipsHiddenFiles
                                                                                errorHandler:nil];

NSURL *fileURL;
while (fileURL = [directoryEnumerator nextObject])
{
    NSDate *fileDate;
    [fileURL getResourceValue:&fileDate forKey:NSURLContentAccessDateKey error:nil];

    if ([cacheDate compare:fileDate] == NSOrderedDescending) // Delete all files with access date older then cacheDate(defined elsewhere)
        [urlsToDelete addObject:fileURL];
}

for (NSURL *fileURL in urlsToDelete) {
     [[NSFileManager defaultManager] removeItemAtURL:fileURL error:nil];
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-01T13:50:12.913

根据[这个关于 Enumeration 的 Apple 文档](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/Collections/Articles/Enumerators.html)：

> 在枚举可变集合时删除、替换或添加到可变集合的元素是不安全的。如果您需要在枚举期间修改集合，您可以制作该集合的副本并使用该副本进行枚举，或者在枚举期间收集您需要的信息并在之后应用更改。

您可能希望将要删除的文件保存在另一个数组中，然后再执行删除。

# c++ - 查找输入数字以知道它应该在数组中的位置

> ID：13178180
> 
> 赞同：0
> 
> 时间：2012-11-01T13:33:14.843
> 
> 标签：c++, arrays, algorithm, search

我有一个小算法问题。例如，我有一个数组。

```
array[10] = {23,54,10,63,52,36,41,7,20,22}; 
```

现在给定一个输入数字，例如 189，我想知道它应该位于哪个插槽中。例如，此输入应位于数组中的 4 个索引中，因为

```
23+54+10+63 = 150 and if we add 52 then sum will be 202 which will cover the range where 189 should lie. so the answer should be 4\. 
```

我想找到一个摊销的常数时间算法，可能在第一步中我们对数组进行一些预处理，以便我们可以在常数时间内获得所有下一个查询。

输入数字将始终介于 1 和数组中所有条目的总和之间
谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T13:41:23.237

如果您确实需要恒定时间，请创建第二个数组，其大小是包含原始数组索引的最大总和值。所以 new_array[189] = 4;

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T13:37:09.457

自然的解决方案是首先使用累积和构建一个数组。这看起来像

```
sums[10] = {23,77,87,...} 
```

然后使用诸如lower_bound算法之类的二分查找来查找插入的位置。那将是`O(log(n))`。假设您的插槽数是恒定的，则此解决方案也是时间恒定的。但我猜你希望查找是`O(1)`根据插槽数。在这种情况下，您必须制作一个完整的查找表。由于这些数字的大小相对较小，这是完全可行的：

```
int lookup[N];
for(i=0,j=0;i<10;i++)
    for(k=0;k<sums[i];k++,j++)
        lookup[j]=i; 
```

使用它，插槽号很简单`lookup[number]`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-01T13:38:29.677

我认为你能得到的最好的方法是使用累积数组并通过使用二进制搜索以对数时间运行。我不确定是否存在具有恒定时间的解决方案。你确定有一个？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-01T13:42:58.650

如果您知道数字始终介于 1 和数组中所有项目的总和之间，那么平凡的常数时间算法是构建一个 [1..sum] 的数组，每个条目包含每个数字的正确槽。构建数组，你只需要做一次，是 O(N)。然后查找是 O(1)。

当然，这假设您有足够的内存用于数组。

除此之外，我认为你能做的最好的事情就是对总和使用二进制搜索 O(log(N)) 。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-01T13:45:00.843

假设

> 输入数字将始终介于 1 和数组中所有条目的总和之间

```
int total(0), i(0);
for(;total < inputValue; ++i)
{
    total += array[i];
}
//your answer is i-1 
```

# sql - 使用单个查询连接多个表

> ID：13178181
> 
> 赞同：0
> 
> 时间：2012-11-01T13:33:16.290
> 
> 标签：sql, oracle, jdbc, oracle11g

## 学生

```
student_id  FirstName   LastName
---------------------------------------------------
1           Joe         Bloggs
2           Alan        Day
3           David       Johnson 
```

## Student_Course

```
course_id   student_id  courseName
---------------------------------------------------             
1           1           Computer Science
2           1           David Beckham Studies
3           1           Geography   
1           3           Computer Science
3           3           Geography 
```

## 学生俱乐部

```
club_id student_id  club_name               club_count
---------------------------------------------------
1       1           Footbal                     10
2       1           Rugby                       10
3       1           Syncronized Swimming        10
4       3           Tennis                      15 
```

在上面的示例中，id = 1 的学生参加了 3 门课程并且是 3 个俱乐部的成员。
如果我要找出学生参与的课程或学生所属的俱乐部，我可以做到，但我需要运行两个查询。是否可以对上面列出的表运行单个查询，以便结果如下所示：

## 输出

```
student_id      FirstName       Student_associated_courses          Student_associated_clubs 
---------------------------------------------------------------------------
1               Joe             1,2,3                               Football, Rugby, Syncronized swimming
3               David           1,3                                 Tennis 
```

是否可以仅通过一个查询获得上述输出？我正在使用 JDBC 来获取数据，所以我想看看我是否可以避免多次旅行来获取必要的数据。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T13:35:52.083

`GROUP_CONCAT`与`DISTINCT`in一起使用`MySQL`

```
SELECT  a.student_ID, a.firstname,
        GROUP_CONCAT(DISTINCT b.course_ID),
        GROUP_CONCAT(DISTINCT  c.club_name)
FROM    student a
        INNER JOIN student_Course b
            ON a.student_id = b.student_ID
        INNER JOIN student_clubs c
            ON a.student_ID = c.student_ID
GROUP BY    a.student_ID, a.firstname 
```

*   [**请参阅 SQLFiddle 演示**](http://sqlfiddle.com/#!2/47f20/2)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-01T14:55:50.217

试试这样：

```
SELECT *
FROM Student s JOIN
(SELECT sc."student_id", listagg(sc."course_id", ',')within group(ORDER BY sc."course_id")
FROM Student_Course sc
GROUP BY sc."student_id") s_course ON s."student_id"=s_course."student_id"
JOIN (SELECT sl."student_id", listagg(sl."club_name", ',')within GROUP(ORDER BY sl."club_name")
     FROM Student_clubs sl
     GROUP BY sl."student_id") s_club ON s."student_id"=s_club."student_id" 
```

“catch”是 LISTAGG 不适用于 DISTINCT 关键字

[这](http://www.sqlfiddle.com/#!4/69e9b/19)是一个小提琴

# hive - 我在 hive 中创建了一个表，我想知道我的表是在哪个目录中创建的？

> ID：13178182
> 
> 赞同：70
> 
> 时间：2012-11-01T13:33:29.850
> 
> 标签：hive, hiveql

我在 hive 中创建了一个表，我想知道我的表是在哪个目录中创建的？我想知道路径...

* * *

## 回答 #1

> 赞同：90
> 
> 时间：2012-11-01T22:43:52.960

`DESCRIBE FORMATTED my_table;`

或者

`DESCRIBE FORMATTED my_table PARTITION (my_column='my_value');`

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2015-05-11T13:08:40.963

在 Hive 中有三种方式来描述表。

1) 要查看 Hive 表的表主信息，请使用**describe table_name；**命令

2) 要查看有关表的更多详细信息，请使用**describe extended table_name；**命令

3) 要以干净的方式查看代码，请使用**describe formatted table_name;** 命令查看所有信息。还以简洁的方式描述所有细节。

资源：[Hive 面试技巧](http://www.bigdataanalyst.in/hive-interview-questions/)

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2015-04-16T17:42:12.260

您可以使用以下命令。

```
show create table <table>;
desc formatted <table>;
describe formatted <table>; 
```

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2018-04-13T21:23:06.090

```
DESCRIBE FORMATTED <tablename> 
```

或者

```
DESCRIBE EXTENDED <tablename> 
```

我更喜欢格式化，因为它是更易于阅读的格式

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2017-03-17T06:52:44.540

要查看任何（内部或外部）表的结构和位置（目录），我们可以使用表的创建语句-

```
show create table table_name; 
```

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2012-11-01T15:42:24.970

在 hive 0.1 中，您可以使用它`SHOW CREATE TABLE`来查找 hive 存储数据的路径。

在其他版本中，没有好的方法可以做到这一点。

更新：

谢谢乔K

用于`DESCRIBE FORMATTED <table>`显示表信息。

ps：这里不支持database.tablename。

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2012-11-09T08:32:18.117

除了 pensz answer，您还可以使用以下方法获取更多信息：

```
DESCRIBE EXTENDED my_table; 
```

或者

```
DESCRIBE EXTENDED my_table PARTITION (my_column='my_value'); 
```

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2014-11-18T06:26:47.783

所有`HIVE`托管表都存储在以下`HDFS`位置。

```
hadoop fs -ls /user/hive/warehouse/databasename.db/tablename 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2013-07-18T06:01:46.473

如果您使用[Hue](http://gethue.com)，您可以在 Metastore 应用程序中浏览表，然后单击“查看文件位置”：这将在其目录中打开 HDFS 文件浏览器。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2015-04-16T17:09:10.310

如果您没有特别提到您的位置，请在“默认”目录中。

您可以使用 describe 和 describe extended 来了解表结构。

# firefox - “在 IE 1.4 中打开”插件停止工作

> ID：13178183
> 
> 赞同：0
> 
> 时间：2012-11-01T13:33:31.827
> 
> 标签：firefox, firefox-addon

每当我按*IE 中的打开*图标时，我都会在控制台中收到错误消息：错误：NS_ERROR_FILE_NOT_FOUND：组件返回失败代码：0x80520012 (NS_ERROR_FILE_NOT_FOUND) [nsIProcess.init] 源文件：chrome://openinie/content/openinie.js行：126（这发生在升级到 16.0 之后，我认为它可能与安全相关）

我发现该 js 文件**位于**某个“openinie@wittersworld.com.xpi”文件中（我巧妙地将其重命名为 zip），并看到了违规行：

 `````
 var iePath = openinie.getIEPath();

    // create an nsILocalFile for the executable
    var file = Components.classes["@mozilla.org/file/local;1"].createInstance(Components.interfaces.nsILocalFile);
    file.initWithPath(iePath);

    // create an nsIProcess
    var process = Components.classes["@mozilla.org/process/util;1"].createInstance(Components.interfaces.nsIProcess);
    process.init(file);  // <-line 126 
````  `1.  是否可以修复它并“重新编译”它压缩和重命名？（我认为这可能是安全的东西）。
2.  我可以使用例如警报框来调试它以显示变量的值吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T22:47:54.127

> 是否可以修复它并“重新编译”它压缩和重命名

是的，您可以简单地替换 ZIP 存档中的一个文件，大多数扩展都没有签名（如果是，您可以`META-INF`从 XPI 文件中删除该目录）。事实上，为了您的调试，最好解压缩`openinie@wittersworld.com.xpi`到同一个文件夹中命名`openinie@wittersworld.com`的目录并删除原始文件 - 这样您就不需要在每次更改时打包/解压缩。您还应该使用`-purgecaches`命令行参数启动 Firefox，否则您正在更改的文件可能会被缓存。

> 我可以使用例如警报框来调试它以显示变量的值吗？

是的。但是，我宁愿推荐在不打开模式对话框的情况下登录到错误控制台（按 Ctrl-Shift-J 打开它）的[`Components.utils.reportError()`方法。](https://developer.mozilla.org/en-US/docs/Components.utils.reportError)在这种特殊情况下，我会写：

```
Components.utils.reportError(iePath); 
```

这似乎指向一个不存在的文件，这意味着该`getIEPath()`功能有问题。

祝你好运！``

# c# - 如何使用 LibTiff.Net 拆分多页 Tiff

> ID：13178185
> 
> 赞同：5
> 
> 时间：2012-11-01T13:33:36.810
> 
> 标签：c#, libtiff.net

在 LibTiff.Net[文档](http://bitmiracle.com/libtiff/help/extract-a-page-from-a-multi-page-tiff-image.aspx)中，我发现可以获得 Tiff 文档的特定页面。

但是，**如果可以在不知道有多少页的情况下拆分多页 Tiff（使用 LibTiff.Net）？如何？**

使用[这个](http://bitmiracle.com/libtiff/help/convert-color-tiff-to-a-32-bit-system.drawing.bitmap.aspx)例子，它只返回第一页。

顺便说一句，主要问题是 Windows XP 无法处理不同的 tiff 图像，所以我想将其拆分为 jpeg 图像。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-01T14:09:08.073

```
//open tif file
var tif = Tiff.Open(@"file", "r");

//get number of pages
var num = tif.NumberOfDirectories();

for (short i = 0; i < num; i++)
{
    //set current page
    tif.SetDirectory(i); 

    Bitmap bmp = GetBitmapFormTiff(tif);
    bmp.Save(string.Format(@"newfile{0}.bmp", i));
} 
```

GetBitmapFormTiff 的代码来自[示例](http://bitmiracle.com/libtiff/help/convert-color-tiff-to-a-32-bit-system.drawing.bitmap.aspx)：

```
private static Bitmap GetBitmapFormTiff(Tiff tif)
        {
            FieldValue[] value = tif.GetField(TiffTag.IMAGEWIDTH);
            int width = value[0].ToInt();

            value = tif.GetField(TiffTag.IMAGELENGTH);
            int height = value[0].ToInt();

            //Read the image into the memory buffer
            var raster = new int[height * width];
            if (!tif.ReadRGBAImage(width, height, raster))
            {
                return null;
            }

            var bmp = new Bitmap(width, height, PixelFormat.Format32bppRgb);

            var rect = new Rectangle(0, 0, bmp.Width, bmp.Height);

            BitmapData bmpdata = bmp.LockBits(rect, ImageLockMode.ReadWrite, PixelFormat.Format32bppRgb);
            var bits = new byte[bmpdata.Stride * bmpdata.Height];

            for (int y = 0; y < bmp.Height; y++)
            {
                int rasterOffset = y * bmp.Width;
                int bitsOffset = (bmp.Height - y - 1) * bmpdata.Stride;

                for (int x = 0; x < bmp.Width; x++)
                {
                    int rgba = raster[rasterOffset++];
                    bits[bitsOffset++] = (byte)((rgba >> 16) & 0xff);
                    bits[bitsOffset++] = (byte)((rgba >> 8) & 0xff);
                    bits[bitsOffset++] = (byte)(rgba & 0xff);
                    bits[bitsOffset++] = (byte)((rgba >> 24) & 0xff);
                }
            }

            System.Runtime.InteropServices.Marshal.Copy(bits, 0, bmpdata.Scan0, bits.Length);
            bmp.UnlockBits(bmpdata);

            return bmp;
        } 
```

# ios - 如何检测 ipad mini 上的 dpi？

> ID：13178186
> 
> 赞同：7
> 
> 时间：2012-11-01T13:33:38.620
> 
> 标签：ios, ipad, ipad-mini

我有一个 ipad 应用程序，带有一些非常小的触摸点，在普通 ipad 的 10 英寸屏幕上几乎无法接受。我希望能够获得设备 dpi，这样我就可以扩大 mini 的小元素的大小以及将来发布的任何 mini 的大小。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-01T13:35:03.547

DPI 为每英寸 163 像素 (ppi)：

**[http://www.apple.com/ipad-mini/specs/](http://www.apple.com/ipad-mini/specs/)**

您无法以编程方式获取此信息，因此您需要在代码中存储为常量。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-31T15:10:56.433

您无法直接获得 dpi（或更准确地说是 ppi）值，因为您必须知道物理屏幕的毫米数（或英寸数）。
您首先必须检测它是否是 iPad mini，然后将每个（已知）设备的 dpi 值存储在您的应用程序中。

在撰写本文时，此代码检测 iPad mini：

```
#include <sys/utsname.h>
NSString *machineName()
{
    struct utsname systemInfo;
    if (uname(&systemInfo) < 0) {
        return nil;
    } else {
        return [NSString stringWithCString:systemInfo.machine
                              encoding:NSUTF8StringEncoding];
    }
}

// detects iPad mini by machine id
+ (BOOL) isIpadMini {

    NSString *machName = machineName();
    if (machName == nil) return NO;

    BOOL isMini = NO;
    if (    [machName isEqualToString:@"iPad2,5"]
         || [machName isEqualToString:@"iPad2,6"]
         || [machName isEqualToString:@"iPad2,7"])
    {
        isMini = YES;
    }
    return isMini;
} 
```

它不是面向未来的，因为以后可能会引入新的机器 ID，但没有面向未来的方法。
如果是 iPad mini，则使用 163 dpi，否则请使用评论中的上述链接来计算 iPhone 和 iPad 的 dpi。

# c# - 尝试将方法组作为参数传递

> ID：13178193
> 
> 赞同：0
> 
> 时间：2012-11-01T13:34:01.457
> 
> 标签：c#, generics, delegates, stub, microsoft-fakes

使用 Microsoft fakes 我在我的存根对象中有以下方法签名：

```
 public void GetAllOf1ExpressionOfFuncOfT0M0Int32Int32<T2>(FakesDelegates.Func<Expression<System.Func<T, T2>>, int, int, IList<T>> stub); 
```

这是这个真实的存根方法：

```
 IList<T> GetAll<T2>(Expression<Func<T, T2>> orderbyexpr, int nStartAt = -1, int NumToSel = -1); 
```

我想做的是通过使用此方法为存根方法分配自定义内容：

```
 public static RunReport StubMethod<T>(ref FakesDelegates.Func<T> func, T returnValue) 
    {
        var counter = new RunReport();

        func = () =>
                   {
                       Interlocked.Increment(ref counter.Count);
                           return returnValue;
                   };
        return counter;
    } 
```

我遇到的问题是我无法理解 StubMethod 的签名应该是什么，我该如何称呼它？

我尝试了几件事，导致我“无法分配方法组/无法转换方法组”。

顺便说一句 - 它与其他更简单的存根方法完美配合，如下所示：

```
 IList<T> IRepository<T>.GetAll(); 
```

所以它必须是定义问题......

这是我在代码中使用 GetAll 的地方......这应该重定向到我的自定义函数：

```
 public IList<EntityType> GetAllEntityTypesByName(string filter)
    {
        IList<EntityType> types = new List<EntityType>();
        try
        {
            using (IUnitOfWork uow = ctx.CreateUnitOfWork(true))
            {
                IRepository<EntityType> repType = uow.CreateRepository<EntityType>();
                if (string.IsNullOrEmpty(filter))
                {
                    types = repType.GetAll(o => o.Name);
                }
                else
                {
                    types = repType.Find(t => t.Name.ToLower().Contains(filter.ToLower()), o => o.Name);
                }
            }
        }
        catch (Exception e)
        {
            ResourceManager.Instance.Logger.LogException(e);
        }
        return types;
    } 
```

**另一种看待问题的方法是我想替换它：**

```
stubRepType.GetAllOf1ExpressionOfFuncOfT0M0Int32Int32<string>((a, b, c) => { return new List<EntityType>(); }); 
```

有了这个：

```
TestHelper.StubRepositoryMethod<IList<EntityType>>(ref stubRepType.GetAllOf1ExpressionOfFuncOfT0M0Int32Int32<string>, new List<EntityType>()); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T16:40:58.217

首先尝试使用具体类型。这是一个工作示例。

```
[TestMethod]
public void TestMethod1()
{
    var stub = new StubIRepository<DateTime>();
    stub.GetAllOf1ExpressionOfFuncOfT0M0Int32Int32<int>(this.StubGetAll);
    var target = (IRepository<DateTime>)stub;
    IList<DateTime> datesByMonth = target.GetAll(date => date.Month);
    Assert.AreEqual(2005, datesByMonth[0].Year);
}

IList<DateTime> StubGetAll(Expression<Func<DateTime, int>> orderByExpr, int startIndex = -1, int numberOfItems = -1)
{
    var allDates = new[] {
        new DateTime(2001, 12, 1),
        new DateTime(2002, 11, 1),
        new DateTime(2003, 10, 1),
        new DateTime(2004, 9, 1),
        new DateTime(2005, 8, 1)
    };

    Func<DateTime, int> orderByFunc = orderByExpr.Compile();

    return allDates.OrderBy(orderByFunc).ToList();
} 
```

# java - 找不到包

> ID：13178194
> 
> 赞同：-3
> 
> 时间：2012-11-01T13:34:04.370
> 
> 标签：java, tomcat, servlets

**包 javax.servlet 不存在**

**导入 javax.servlet.*；**

```
 import javax.servlet.*;

public class FirstServlet implements Servlet{

ServletConfig config;

public void init(ServletConfig config){
    this.config=config;
    System.out.println("we r in init() method");
}

public void service(ServletRequest request,ServletResponse response){
    System.out.println("we r in service() method");
}

public void destroy(){
    System.out.println("we r in destroy() method");
}

public ServletConfig getServletConfig(){
    return config;
}

public String getServletInfo(){
    return "FIRSTSERVLET";
}
} 
```

*由于我使用的是tomcat服务器，应该在哪里设置类路径*

**即使在包含 servlet-api.jar 之后，错误仍然存​​在**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T13:41:11.547

如果您查看 Tomcat 应用程序开发人员指南中针对您的 Tomcat 版本的示例“build.xml”文件（例如[http://tomcat.apache.org/tomcat-6.0-doc/appdev/](http://tomcat.apache.org/tomcat-6.0-doc/appdev/)），它将告诉您构建类路径需要做什么。（答案取决于您使用的是哪个版本的 Tomcat ...）

事实上，如果您是 Java 开发、Servlet 和/或 Tomcat 的新手，我建议您花时间阅读整个指南……从头到尾。

# vhdl - Active-HDL 仿真时钟交叉

> ID：13178195
> 
> 赞同：3
> 
> 时间：2012-11-01T13:34:10.223
> 
> 标签：vhdl, simulation, clock, active-hdl

我有 2 个模块使用相同的时钟但在不同的文件中，当我在模块 B 中对来自模块 A 的信号进行采样时，在波形模拟中，它不会像应该的那样在一个时钟周期后获得样本，它表明这是样本相同的上升沿（适合异步实例化的行为）。

有人告诉我这是因为 Active-HDL 由于组件不同而将其视为 2 个不同的时钟，这就是为什么它在相同的上升沿进行采样（因为信号从 A 到 B 的增量时间）。

我如何定义 Active-HDL 将理解它们都在同一区域使用相同的时钟？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-10-08T00:59:52.757

在您的芯片和仿真环境中处理时钟需要与您在进行电路板设计时所采取的相同类型的注意。特别是时钟偏差必须始终小于最小传播延迟。

在 RTL 仿真环境中，信号上的所有延迟都是根据增量周期来测量的（当您不使用 after 时，任何信号分配的默认延迟）。通过一个端口不会产生任何增量周期。但是，对信号的每次分配都会导致增量周期延迟。

确保数据传输成功的一种方法是确保设计中的所有时钟在使用时都是增量周期对齐的。确保发生这种情况的最简单方法是确保没有任何模块对其使用的时钟进行分配。因此，请勿执行以下任何操作：

```
LocalClk <= PortClk ;    -- each assignment causes a delta cycle of clock skew 
GatedClk <= Clk and Enable ;   -- clock gates are bad.  See alternative below 
```

通常我们很少使用时钟门——然后我们只在它是我们方法的批准部分时才使用它（通常不适用于 FPGA）。代替在您的设计中使用门控时钟，使用数据路径启用：

```
process (Clk) 
begin
  if rising_edge(Clk) then
    if Enable = '1' then 
      Q <= D ; 
    end if ; 
  end if ; 
end process ; 
```

还有其他方法可以解决这个问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-10-07T07:41:19.183

这与您的模拟器无关。我假设你正在做这样的事情：

```
 +----------+           +----------+
        |          |-- clk --->|          |
clk --->| Module A |           | Module B |
        |          |-- data -->|          |
        +----------+           +----------+ 
```

你应该在哪里做这样的事情：

```
 +----------+           +----------+
        |          |           |          |
clk -+->| Module A |-- data -->| Module B |
     |  |          |           |          |
     |  +----------+           |          | 
     |                         |          |
     +-----------------------> |          |
                               +----------+ 
```

第一种配置的问题在于，当您的时钟信号通过模块 A 时，它会延迟一个或多个增量周期。因此，它可能会在与数据信号相同或较晚的增量周期中切换。这是您在模拟器的波形视图中看不到的东西（除非它具有扩展增量周期的选项），但您可以查看列表视图以准确了解增量时间中发生的情况。

# email - 如何诊断和修复域托管电子邮件的路由问题

> ID：13178196
> 
> 赞同：1
> 
> 时间：2012-11-01T13:34:11.273
> 
> 标签：email, expressionengine, exchange-server

这不是一个 EE 问题，尽管客户确实有一个 EE 网站 :)。我只是这样标记它，让社区中的聪明人看到我的问题。

我有一个客户曾经将他们的电子邮件和网站分开托管。它们使用一台主机的 Exchange Server 服务和另一台主机的常规 linux 虚拟主机进行设置。他们最初设置的方式是将他们的域指向他们的网络主机，并将 MX 记录转发到他们的 Exchange 主机。他们从中获得 Exchange 服务的公司也提供虚拟主机，因此他们决定合并。该网站已移至新帐户 - 没问题。然后，我们将整个域（从注册商级别）指向之前仅托管其电子邮件的主机。这就是问题所在。

现在，有些电子邮件会通过，有些则不会——似乎没有任何特定的模式。您可以多次向同一个地址发送相同的电子邮件，有些会通过，有些会被退回。退回的那些提供了一些线索——他们提到邮件服务器为 mail.clientdomain.com——这是不对的，就像他们的 Exchange 托管一样，Exchange 有一个单独的专用域。

似乎在打开他们帐户的虚拟主机组件时，发生了两件事 - 首先，似乎已经进行了 mail.clientdomain.com 的设置，即使它不需要。其次，在托管架构内部，他们的 DNS 服务器有时通过 Exchange 服务器路由邮件，有时通过 mail.clientdomain.com 运行它（这当然不起作用，因为那里没有设置用户，结果在反弹中）。

我遇到的主要问题是告诉主人要解决什么问题。我向他们提供了我们正在经历的症状以及我认为可能发生的情况，但我并不精通服务器设置，因此我无法提供更多的指导。我希望那里的人能给我一些指导，告诉我如何运行一些测试以查看我客户域中的邮件被路由到哪里，从而为主机提供一些关于断点位置的特定方向 - 因为到目前为止，他们一直无法解决问题。

谢谢大家！

更新：这是最近返回的消息的样子：

你好。这是 plesk-vl4.ihost-web.com 上的 qmail-send 程序。恐怕我无法将您的邮件发送到以下地址。这是一个永久性错误; 我已经放弃了。很抱歉没有成功。

--- 此行下方是消息的副本。

Return-Path: Received: (qmail 1553 从网络调用); 2012 年 11 月 2 日 07:26:47 -0400 收到：来自 smtp137.ord.emailsrvr.com (173.203.6.137) 由 webmail.plesk-vl4.ihost-web.com 使用（DHE-RSA-AES256-SHA 加密）SMTP；2012 年 11 月 2 日 07:26:47 -0400 收到：来自 localhost (localhost.localdomain [127.0.0.1]) 的 smtp10.relay.ord1a.emailsrvr.com (SMTP 服务器)，ESMTP id 为 9803F370097；2012 年 11 月 2 日星期五 07:29:55 -0400 (EDT) X-Virus-Scanned: OK 接收: by smtp10.relay.ord1a.emailsrvr.com (Authenticated sender: jean-AT-qbmarketing.com) with ESMTPSA id 4BD76370091 ; 2012 年 11 月 2 日星期五 07:29:55 -0400 (EDT) 发件人：Jean St Amand 内容类型：多部分/替代；boundary="Apple-Mail=_25EBC7EF-43BA-46B6-94CE-143CA2B87CC2" 主题：11 月 2 日上午的另一封测试电子邮件 日期：2012 年 11 月 2 日星期五 08:32:20 -0300 消息 ID：<

* * *

主持人说系统设置正确，并且退回是我们邮件程序中“自动完成”的结果。但是自动完成只填写过去使用过的电子邮件地址，而不是用于到达该目的地的路由，不是吗？如果自动完成在路由中发挥作用，那么每个人每次更换网络主机时都会遇到麻烦吗？过去我在切换主机时从来没有遇到过任何问题，所以我很难相信问题出在发件人的邮件程序上——尤其是因为有时邮件会通过，但大多数情况下不会。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T13:47:11.560

域的 MX 记录是什么样的？只有一个“Mail.exchangeserver”还是多个？通常他们有一个分数，所以首先尝试分数最低的那个，如果那是无法到达/忙的，那么列表中的下一个会被使用。

要检查的另一件事是查看 Web 服务器是否正在运行某种形式的控制面板，这可能会妨碍邮件路由。我知道过去我一直被 cPanel 在本地寻找邮件所困扰，即使设置了远程 MX 也是如此。

如果您可以发布 MX / DNS 记录，我们可能会提供进一步的帮助。

# mysql - 记录测试结果的数据库设计

> ID：13178203
> 
> 赞同：1
> 
> 时间：2012-11-01T13:35:00.490
> 
> 标签：mysql, sql, database, database-design

我在一家制造工厂工作，我们在那里组装 10 种不同的产品。每个产品功能相似，但需要测试不同的参数。最初，我创建了一个 Access 数据库来存储我们构建的每个单元的测试结果。我通过为每个产品设置一个表来布置数据库。此表存储生产 ID 以及测试参数（压力、温度、通过/失败信息......等）方便数据输入。我的问题是，现在每当我需要添加新的测试参数时，我都必须更改表格设计和表格。

很快我将能够在 mySQL 中重新创建这个系统，我希望有更好的方法来存储这些测试结果。任何见解都会非常有用。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T13:54:03.107

查找“**数据库规范化**”。

在最极端的情况下，您可以将其拆分为 4 个表：

*   Product_Types：产品类型（VARCHAR/CHAR），id（INT）
*   Products：id/production id（INT），产品类型（INT，外键绑定到Product_Types.id）
*   Test_Parameters：类型（VARCHAR/CHAR - 压力、温度等）、id (INT)
*   Test_Scores：产品（INT，Products.id 的外键），测试（INT，Test_Parameters.id 的外键），分数（INT/任何看起来合适的），时间戳。

理论上，您可以不使用第一个和第三个表，而只需将名称保存在每条记录中（即产品条目：id = 12345，type = "chair"）。以这种方式检索会稍微快一点，但它对于人们拼写错误的东西也不是很健壮（即从 type="chair" 将丢失 type="chiar" 条目的产品中选择 *），并且占用更多存储空间，因为你'一遍又一遍地保存文本名称。

无论如何，这是多对一关系的基本模型，这就是您要寻找的：一个产品，许多测试（或者，对于所有四个表，多对多：许多产品，许多测试类型）。您需要将它们放在单独的表中，每个产品都有一个 id，然后是一个外键，用于将每个测试结果链接到它适用的产品。

现在，让我们谈谈**约束。**

我可能会考虑使用的一个是测试结果表上的唯一键，它同时索引产品 id*和*测试类型，然后确保使用“ON DUPLICATE KEY UPDATE”，以便旧值被新值覆盖那些。这样，您就可以确定每种产品的每次测试都只有一个结果。如果您还想保留旧记录，请忽略本段。

您肯定会失去的一件事是要求对给定产品进行所有测试的能力。必须在数据库之外完成很多工作。如果您想要求为每个产品填写所有列，那么您必须按照您一直在做的方式进行操作（在一个巨大的统一表中为每个测试使用一列，每个测试都有 NOT NULL 约束test 列），因为现在测试结果和对象 id 在功能上是相互依赖的（没有另一个就不能存在）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-01T15:49:36.773

我会（至少）使用下表：

**产品**

ID、名称、TestSchedule

**分析**，例如使用具有 1 开尔文容错的正常工作参数测量温度

ID、名称、描述、说明

**测试**例如产品 p 中的温度测量，预期结果为 300-360 开尔文。

Id、ProductId、AnalysisId、LowerLimit、UpperLimit

**TestResult**批次 X 的测试结果，例如*342 Kelvin，通过*

Id、BatchId、TestId、结果、状态（通过/失败）

既有`Analysis`表格又有`Test`表格的原因是标准化。是通用的`analysis`，指定一个方法。`test`指定对特定产品进行分析时的可接受限度。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-01T13:51:08.093

我认为您正在考虑使用多对多表。

因此，一个存储您的产品的表，一个存储每个唯一测试的表，然后是第三个 M2M 表，将产品 A 链接到它需要的许多测试。您的 M2M 还可以（通常）存储您的测试结果。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-01T13:39:58.333

创建具有唯一 ID/产品的产品表。然后创建一个具有唯一测试 ID 和适用产品列的测试表。加入这些以查找哪些测试适用于哪些产品。您可以随时添加新测试。

此外，如果您想存储测试历史、结果等，您可以有一个“测试版本”列。

# symfony - Doctrine 2.2 想要重新创建我所有的表

> ID：13178207
> 
> 赞同：0
> 
> 时间：2012-11-01T13:35:10.053
> 
> 标签：symfony, doctrine-orm

我在 symfony 2.0 项目上将教义从 2.1 更新到 2.2。

但是现在每次我尝试做`php app/console doctrine:schema:update`学说时都想重新创建我的所有模式，并且我有以下错误：重复表：7 ERREUR：关系帐户已经存在。

当我转储 sql 时，他显然是在重新创建所有数据库。

任何的想法？我不知道在哪里看。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-22T16:05:50.493

好的，我得到了答案……当从 2.1 升级到 2.2 学说时，现在尝试指定架构。

在学说 2.1 中：您不能指定模式学说将在公共模式中创建

在学说 2.2 中：如果未指定模式，则学说将写入用户模式，然后写入公共 shema。

所以我的表不在正确的模式中，我必须指定它。

# c++ - gcov/lcov：生成头文件覆盖的问题

> ID：13178209
> 
> 赞同：1
> 
> 时间：2012-11-01T13:35:15.313
> 
> 标签：c++, gcov, lcov

lcov 不会为使用相对于项目根目录的路径包含的头文件生成覆盖率数据。

我有以下简化的文件结构：./main/main.cpp：

```
#include "bar/bar.hpp"
int main()
{
    Bar bar;
} 
```

./bar/bar.hpp:

```
struct Bar
{
    Bar(){}
}; 
```

./生成文件：

```
cov: app
    ./app
    lcov -c -d . -b . -o cov.info
    genhtml cov.info --output-directory ./html/

GCOV_FLAGS = -g -fprofile-arcs -ftest-coverage

app : main/main.o
    g++ ${GCOV_FLAGS} main/main.o -o app

main/main.o : main/main.cpp
    g++ -I. ${GCOV_FLAGS} -c main/main.cpp -o main/main.o 
```

* * *

当我运行 make cov 时，我收到以下警告：

`geninfo: WARNING: no data found for /home/casserso/playground/gcov/./bar/bar.hpp`

并且没有为 bar.hpp 生成覆盖数据

如果我在 main.cpp 中将 #include "bar/bar.hpp" 更改为 #include "../bar/bar.hpp" 一切都很好。

有人可以帮我解决这个问题吗

谢谢克里斯蒂安

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T13:47:27.643

将 lcov 版本从 1.7 更新到 1.9 解决了这个问题。
感谢所有输入。

# r - 分箱十进制数据并绘制直方图

> ID：13178222
> 
> 赞同：0
> 
> 时间：2012-11-01T13:36:04.110
> 
> 标签：r, bash

我在文件中有一个数据集，如下所示：

```
0.0707526823
0.4859753978
0.0084166789
0.0694709558
0.0156410467
0.3783259831
0.8977261856
0.7981824881
0.2079852045
0.9498437264
0.9264972044
0.1878358734
0.0020816686
0.0024611297
0.4250464895
0.0725748666
0.0407962054
0.8282363221
0.8408343333
0.7129760016
0.2772250135
0.3677588953
0.4723908637
0.9452814318 
```

我想以 0.1 的间隔对这些数据进行分类并绘制直方图。

我确实尝试过使用R，

在这里我在做什么

```
x<-read.table("filex", header=T)
breaks=seq (min, max, step)
hist (x$col1, breaks) 
```

但这个命令在我的情况下不起作用:(

欢迎使用 awk 或 R 中的任何一个班轮

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-01T13:49:26.253

看起来您需要更好地指定`breaks`类似`min(x)`and的内容`max(x)`。

```
x <- read.table(textConnection("
    0.0707526823
    0.4859753978
    0.0084166789
    0.0694709558
    0.0156410467
    0.3783259831
    0.8977261856
    0.7981824881
    0.2079852045
    0.9498437264
    0.9264972044
    0.1878358734
    0.0020816686
    0.0024611297
    0.4250464895
    0.0725748666
    0.0407962054
    0.8282363221
    0.8408343333
    0.7129760016
    0.2772250135
    0.3677588953
    0.4723908637
    0.9452814318
"))

# extract vector of numeric from current data frame
x <- x$V1

# create breaks for frequency
# need to add a padding factor to make things equally spaced
step <- .1
pad <- step - ((max(x) - min(x)) %% step)/2
breaks <- seq(min(x) - pad, max(x) + pad,by=.1)

# alternative (only good for exact decimal increments):
# use floor and ceiling
breaks <- floor(min(x)*10):ceiling(max(x)*10)/10

# create histogram
# equally spaced breaks create frequency chart automatically
hist(x,breaks) 
```

# python - ImageMagick 的哪些功能可以提供 iChat “视频效果”之类的照片效果

> ID：13178225
> 
> 赞同：2
> 
> 时间：2012-11-01T13:36:10.000
> 
> 标签：python, imagemagick

![这是一个例子](../Images/e2a95265e20d9c226cd1a302fb31987e.png)我有一个 python 乘车共享谷歌应用程序，它在地图上放置大头针，以便参加活动或工作场所的小组成员可以识别拼车机会。我想在 pin 中添加快照功能，但也希望可以编辑快照，就像 iChat 中的“视频效果”一样，这样人们就更愿意提供非识别快照他们自己。

是否有可以添加到我的应用程序的现有应用程序或照片效果库（不涉及视频）？或者我正在寻找的库类型是否有一个通用名称。

实际上，在输入标签时，我注意到了 ImageMagick。看起来 ImageMagick 非常适合我的需求。我可以寻找 ImageMagick 的哪些功能？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-01T17:54:30.493

ImageMagick 可能是最有趣的方式。IM 具有跨操作系统的高度可移植性，并且许多编程语言都提供了与 IM 的 API 一起使用的库。对于 Python，您可以选择三个库：

*   [Python魔杖](http://www.assembla.com/wiki/show/pythonmagickwand)
*   [PythonMagick](http://www.imagemagick.org/download/python/)
*   [棍棒](http://dahlia.github.com/wand/)

ImageMagick 还支持[FX 表达式](http://www.imagemagick.org/script/fx.php)；您可以使用它来构建复杂的效果（例如您在 iChat 中看到的效果）。可以动态创建效果，或者您可以创建模板蒙版以应用于用户照片。

下面是使用 IM 的命令行界面生成蒙版和复合效果的一些示例。

```
# Create circle mask
convert -size 200x200 xc:white \
        -draw 'circle 100,100 60,60' \
        -blur 0x10 \
         circle.jpg
# Apply effect
composite circle.jpg me.jpg -displace 15x15 me_circle.jpg 
```

![圆圈](../Images/053bf7c9cabb257bf2bbb378848bc335.png) ![我的圈子](../Images/dcbcf23d6065367aa76b20930dffd503.png)

```
# Create mask with text
convert -size 200x200 \
        -font Helvetica -pointsize 52 \
        -background white \
        -fill black label:'Stack\nOverflow' \
        -distort Arc 360 \
         font.jpg
# Apply effect 
composite font.jpg me.jpg -displace 15x15 me_font.jpg 
```

![字体](../Images/c3b7c9f3349919d94d2117f6bc66d5ca.png) ![我的字体](../Images/1519f980af598b8365a338738f35b727.png)

# database-design - 使用 CakePHP 的表中的多个外键

> ID：13178231
> 
> 赞同：0
> 
> 时间：2012-11-01T13:36:36.070
> 
> 标签：database-design, cakephp-2.0, mode

我有一种情况，我想在一张桌子上取 3 个外键。并将该表与 3 个模型相关联。对于 CakePHP 来说，这是一个好习惯吗？

例如，我有用户、角色、多个模块：

现在用户拥有roles_users 的一个角色。用户有很多模块，模块中有很多角色，所以我想创建另一个表 modules_users_roles，它将与用户、模块和角色相关联。

请让我知道在一张表中添加 3 个外键是否正确？还是我需要刹车，

module_users with id, user_id, module_id module_user_roles with id module_user_is, role_id

但这会使从数据库中获取的关联和数据复杂化

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T14:28:48.360

好吧，一些上下文会更有帮助。

您可以在用户中拥有“角色”外键。

但是，如果情况确实需要拥有多个外键，那么您无能为力。

在进行查找时，请务必检查您的“递归”级别。

# javascript - Rails iOS 主屏幕网络应用程序 - 无法删除记录

> ID：13178232
> 
> 赞同：0
> 
> 时间：2012-11-01T13:36:42.860
> 
> 标签：javascript, ios, ruby-on-rails, ios6, iphone-standalone-web-app

我有一个可以在浏览器中完美运行的网络应用程序——无论是在桌面还是移动设备上。当我尝试通过添加来美化它时，问题就来了：

```
<meta name="apple-mobile-web-app-capable" content="yes" /> 
```

这也很好用——直到我需要删除应用程序中的记录为止。

我也在使用我发现的这个伟大的要点 - [https://gist.github.com/1042167](https://gist.github.com/1042167)来阻止应用程序切换到移动 safari：

```
<script type="text/javascript">
    (function(document,navigator,standalone) {
        // prevents links from apps from oppening in mobile safari
        // this javascript must be the first script in your <head>
        if ((standalone in navigator) && navigator[standalone]) {
            var curnode, location=document.location, stop=/^(a|html)$/i;
            document.addEventListener('click', function(e) {
                curnode=e.target;
                while (!(stop).test(curnode.nodeName)) {
                    curnode=curnode.parentNode;
                }
                // Conditions to do this only on links to your own app
                // if you want all links, use if('href' in curnode) instead.
                if(
                    'href' in curnode && // is a link
                    (chref=curnode.href).replace(location.href,'').indexOf('#') && // is not an anchor
                    (   !(/^[a-z\+\.\-]+:/i).test(chref) ||                       // either does not have a proper scheme (relative links)
                        chref.indexOf(location.protocol+'//'+location.host)===0 ) // or is in the same protocol and domain
                ) {
                    e.preventDefault();
                    location.href = curnode.href;
                }
            },false);
        }
    })(document,window.navigator,'standalone');
</script> 
```

我想知道这是否可以改变，所以 data-method="delete" 会很好玩吗？在那一刻——当我点击“删除”时——“你确定吗？” 确认框挂起一两秒钟，然后将我转回同一显示页面，没有发生删除...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T23:19:47.890

问题是`location.href = curnode.href;`将请求更改为`GET`请求，尽管我对`POST`和`PUT`请求的行为不一致。因此，当您有一些路线时，例如：

```
GET     /photos             index
POST    /photos             create
GET     /photos/new         new
GET     /photos/:id/edit    edit
GET     /photos/:id         show
PUT     /photos/:id         update
DELETE  /photos/:id         destroy 
```

和路线最终重新路由`update`到。我的 hacky（希望是临时的）解决方案是为那些被重新路由的请求创建自定义路由。所以你会添加：`destroy``show`

```
match "update" => "Photos#update", :as => :update_photo
match "destroy" => "Photos#destroy", :as => :destroy_photo 
```

我知道，我知道，这不是 Rails 约定，但它应该可以工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T15:22:57.510

*因此，我将根据您所写的内容假设您正在使用（捆绑）`jquery-ujs`为您处理删除链接，因为这听起来就像您提到的那样`data-method`*

处理程序删除链接的工作方式与`ujs`您可能期望的不同。[这是`jquery-ujs`来源](https://github.com/rails/jquery-ujs/blob/master/src/rails.js)的相关位：

```
// Handles  "data-method" on links such as:
// <a href="/users/5" data-method="delete" rel="nofollow" data-confirm="Are you sure?">Delete</a>
    handleMethod: function(link) {
      var href = rails.href(link),
        method = link.data('method'),
        target = link.attr('target'),
        csrf_token = $('meta[name=csrf-token]').attr('content'),
        csrf_param = $('meta[name=csrf-param]').attr('content'),
        form = $('<form method="post" action="' + href + '"></form>'),
        metadata_input = '<input name="_method" value="' + method + '" type="hidden" />';

      if (csrf_param !== undefined && csrf_token !== undefined) {
        metadata_input += '<input name="' + csrf_param + '" value="' + csrf_token + '" type="hidden" />';
      }

      if (target) { form.attr('target', target); }

      form.hide().append(metadata_input).appendTo('body');
      form.submit();
    }, 
```

因此，您可以看到实际发生的情况是动态创建表单（使用所需`csrf`数据）然后提交。

在这种情况下，您链接到的 gist 中的委托`click`处理程序方法将不起作用，因为 rails js 会`return: false`单击链接，该链接具有`data-method`阻止您的处理程序触发的属性。

最简单的做法可能是根据代码滚动您自己的（基于 ajax 的）删除处理程序`ujs`。为简洁起见，我使用出色的[jQuery 表单插件](http://www.malsup.com/jquery/form/)来处理实际提交：

```
function handleDeleteLink(endpoint){
  var confirmed = confirm("Are you sure you want to delete this record?"),
    csrf_token = $('meta[name=csrf-token]').attr('content'),
    csrf_param = $('meta[name=csrf-param]').attr('content'),
    form = $('<form method="post" action="' + endpoint + '"></form>'),
    metadata_input = '<input name="_method" value="delete" type="hidden" />',
    deleteOptions = {
      beforeSubmit: function(){
        //handle ajax start
      },
      success: function(el){
        //hand success
      },
      error: function(){

      }
    };
    if (csrf_param !== undefined && csrf_token !== undefined) {
      metadata_input += '<input name="' + csrf_param + '" value="' + csrf_token + '" type="hidden" />';
    }
    if (confirmed){
      form.hide()
          .append(metadata_input)
          .appendTo('body')
          .submit(function(e){
            e.preventDefault();
            $(this).ajaxSubmit(options);
          })
          .submit();
    }
} 
```

在您看来，只需将您的替换`data-method`为 say 类`delete-link`并通过事件委托进行绑定（或者如果您愿意，也可以使用不同的数据属性）：

$('body').on('click', '.delete-link', function(e){ e.preventDefault(); handleDeleteLink(e.target.href); }

# iphone - 在 iPhone 中使用 HTTP POST 的 for 循环向服务器发送数据

> ID：13178235
> 
> 赞同：0
> 
> 时间：2012-11-01T13:36:56.940
> 
> 标签：iphone, for-loop, asihttprequest, httpconnection, postdata

我想批量发送到服务器上的数据。我必须一次发送带有 25 个字符串的 nsmutablestring 数据，然后获得响应，如果响应成功，则再次发送下一批。我正在使用 HTTPConnection 类。我使用的代码如下：

```
 HttpConnectionClass * ht= [[HttpConnectionClass alloc] init];
ht.delegate=self;
ht.isNetworkIndicator = YES;
NSString *data = @"" ;
int i = 0;
self.dataforserver = [[NSMutableString alloc]init] ;
[self.dataforserver setString:@""]; 
for (i=0;i<= self.dataArray.count-1; i++) {  
    data =[NSString stringWithFormat:@"A%d%@",[[self.recordIDArray objectAtIndex:i]intValue], [self.dataArray objectAtIndex:i]];
     [self.dataforserver appendString:data];

    if ((i+1)%25 == 0 && i!=0 ) {

                 [ht makeHttpConnection:[NSString stringWithFormat:@"http://www.url.com?action=%d&subscriberid=%d&type=%@",2,56904,@"full"] withData:self.dataforserver];

        NSLog(@"in for loop dataforserver is %@",dataforserver);

       [dataforserver setString:@""];     
    }
      }
    if (dataforserver != @"" ) {
    NSLog(@"not in for loop dataforserver is %@",dataforserver);
    [ht makeHttpConnection:[NSString stringWithFormat:@"http://www.url.com?action=%d&subscriberid=%d&type=%@",2,56904,@"full"] withData:self.dataforserver];
     } 
```

我通过以下方法得到响应

```
 -(void)getHttpData:(NSObject*)data isError:(BOOL)isErr errorMsg:(NSString*)err{

    NSString *response=(NSString*)data;
     NSLog(@"response is %@",response);

    } 
```

只有当我得到响应“SUCCESS”时，我才想继续循环。任何人都可以建议如何实现它。我对iOS编程很陌生。请帮忙

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T10:00:54.073

我通过使用 github 上提供的 ASIHttpRequest 类解决了这个问题。如果有人遇到同样的问题，我将发布我使用的代码

```
{
NSString *data = @"" ;
int i = 0;
int batchCount =5;
NSString *type = @"full";

self.dataforserver = [[NSMutableString alloc]init] ;
[self.dataforserver setString:@""];

for (i=0;i< self.dataArray.count; i++) {

    NSURL *url = [NSURL URLWithString:[NSString stringWithFormat:@"http://www.myurl.com/gprsin?action=%d&//subscriberid=%d&type=%@",2,111,type]];

    data =[NSString stringWithFormat:@"A%d%@",[[self.recordIDArray objectAtIndex:i]intValue], [self.dataArray objectAtIndex:i]];
    [self.dataforserver appendString:data];

    if ((i+1)%batchCount == 0 && i!=0 ) {
        NSString *response = @"";
        int j = 0;

        while (response == @"" && j<3 ) {
        //Using while loop is not necessary,I am using this because it was required to try three times till getting response.    
            ASIHTTPRequest *request = [ASIHTTPRequest requestWithURL:url];
            [request setPostBody:[[NSMutableData alloc] initWithData:[dataforserver dataUsingEncoding:NSUTF8StringEncoding]]];
            [request setRequestMethod:@"POST"];                
            [request startSynchronous];
            NSError *error = [request error];
            if (!error) {
                response = [request responseString];
                NSLog(@"response is %@",response);                    
                [dataforserver setString:@""];
            }
            else
            {
                // unable to connect show alert
                NSLog(@"there is some error coming and the error is:%@",error);
                return;
            }

            if ([response isEqualToString:@"SUCCESS"]) {

                for (int k = i-batchCount+1; k<=i; k++) {

                    [self storeContactInDB:[self.dataArray objectAtIndex:k]:[[self.recordIDArray objectAtIndex:k]intValue]];//if you want to store contacts in database along only after successfully sending it to server

                }

                type = @"INCREMENT";

            }
            else if ([response isEqualToString:@"FAIL"])
            {
                //show alert 
                return;
            }
            j++;
        }
    }
    if (dataforserver != @"" && i== self.dataArray.count-(self.dataArray.count%batchCount)   )
    {
        NSString *response = @"";
        int j = 0;

        while (response == @""  && j<3 ) {

            ASIHTTPRequest *request = [ASIHTTPRequest requestWithURL:url];
            [request setPostBody:[[NSMutableData alloc] initWithData:[dataforserver dataUsingEncoding:NSUTF8StringEncoding]]];
            [request setRequestMethod:@"POST"];
            [request startSynchronous];
            NSError *error = [request error];
            if (!error) {
                response = [request responseString];
                NSLog(@"response is %@",response);
            }

            else
            {
                // unable to connect show alert
                NSLog(@"there is some error coming and the error is:%@",error);
                return;
            }
            if ([response isEqualToString:@"SUCCESS"]) {

                for (i = self.dataArray.count-(self.dataArray.count%batchCount); i<self.dataArray.count; i++) 
                {

                    [self storeContactInDB:[self.dataArray objectAtIndex:i]:[[self.recordIDArray objectAtIndex:i]intValue]];

                }

                type = @"INCREMENT";
            }
            else if ([response isEqualToString:@"FAIL"])
            {
                //show alert
                return;
            }
            j++;
        }
    }
} 
```

}

# javascript - 可通过继承观察到的淘汰赛

> ID：13178238
> 
> 赞同：1
> 
> 时间：2012-11-01T13:37:15.513
> 
> 标签：javascript, knockout.js, knockout-2.0, prototypal-inheritance

我的基类中的 observables 有问题。看看[这个](http://jsfiddle.net/p2tEp/17/)小提琴看看问题。

我将解释我想要做什么。

我有一个我继承的视图模型的基类。这个基类包含可观察的属性。

我创建了继承类的多个实例并将值分配给可观察对象，然后为所有实例注册的值是最后一次分配的值。

以下代码解释了我的意思。

```
var vm = function () {
    var test = ko.observable();
    return {
        test: test
    }
};

var subvm = function () {

};

subvm.prototype = new vm();
subvm.prototype.constructor = subvm;
subvm.prototype.parent = vm.prototype;    

var testvm1 = new subvm();
var testvm2 = new subvm();

ko.applyBindings(testvm1, $('#div1').get(0));
ko.applyBindings(testvm2, $('#div2').get(0));

testvm1.test('Value for object 1');
testvm2.test('Value for object 2'); 
```

​ 创建的视图模型绑定到以下 html ：

```
<div id="div1">
    <span data-bind="text: test">test1</span>
</div>
<div id="div2">
    <span data-bind="text: test">test2</span>
</div> 
```

​</p>

我做错了什么是淘汰赛不支持吗？

我会为此提供任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T14:05:02.143

你的继承模型是错误的。的两个实例`subvm`共享相同的实例`test`。

除非您确保每次实例化子类对象时实际调用超类构造函数，否则原型继承*不能生成在父“类”中看到的词法范围变量的唯一实例。*

# objective-c - 在一个客观的c协议中，我如何使用实现类作为返回值

> ID：13178244
> 
> 赞同：1
> 
> 时间：2012-11-01T13:37:24.873
> 
> 标签：objective-c, ios, xcode, protocols

假设我有一个协议，调用它`Protocol A`。我希望每个实现 A 的类都有一个自身返回值的方法。

例如，类`Implementor`应该有一个名为“GetAnother”的方法，其返回值为 Implementor。

这是否可以强制一个类与协议有关？因为据我所知，您必须创建具有特定返回值的方法。

我不想返回一个，`id`因为我希望人们能够依赖于某个类的返回值。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T13:39:13.983

您正在 Objective-C 中寻找模板类，但它不存在。例如见[这里](https://stackoverflow.com/questions/10043583/template-in-objective-c)。

# c++ - 使用整数作为外流文件名？

> ID：13178245
> 
> 赞同：0
> 
> 时间：2012-11-01T13:37:27.667
> 
> 标签：c++, file-io

我正在尝试编写一个 mpi 程序，其中每个节点都知道自己的`rank`，这是一个整数。

我这个程序我希望每个节点都创建一个`.txt`以它`rank`为文件名的文件。也就是说，我希望程序生成一个名为`rank.txt`where rank is an integer 的文件。

我知道如何将 an 转换`int`为`string`，但我很困惑如何将该字符串与该字符串组合`.txt`并将其放入文件名中。最简单的方法是什么？

提前致谢。

**编辑**

我已经将数字与它们结合起来`.txt`并将它们放入一个字符串`filename`中，但是当我输入时 `std::ofstream out_stream(filename)`，编译器告诉我

```
no matching constructor for initialization `std::outstream` 
```

如何将字符串放入文件名？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T13:55:52.930

问题是没有构造函数`std::ofstream`需要一个`std::string`. 你需要通过`const char*`，所以只需说：

```
std::ofstream out_stream(filename.c_str()); 
```

不过，随着最新的标准修订版，情况发生了变化，因此请查看您的编译器文档以了解如何启用 C++11。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-01T13:39:13.950

如果您已经将 转换`int`为`std::string`，比如说`rank_s`，那么`rank_s + ".txt"`就足够了。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-01T13:41:05.197

使用 fstream 和 << 运算符。对于字符串连接：

```
 std::stringstream vIndex; 
 vIndex << i;  
 std::string index = vIndex.str() + ".txt"; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-01T13:42:12.687

如果你可以使用提升：

```
std::string filename = boost::lexical_cast<std::string>(rank) + ".txt"; 
```

否则（例如）：

```
std::ostringstream s;
s << rank;
std::string filename = s.str() + ".txt"; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-01T13:46:18.050

```
std::string filename = std::to_string(i) + ".txt"; 
```

为此需要一个支持 c++11 的最新编译器

编辑回答问题： -

如果你有 c++11 就做

```
std::ofstream out_stream(std::to_string(i) + ".txt"); 
```

如果你不这样做，那么你最好看看其他答案

# windows - IO 完成端口是否在完成端口有要报告的内容之前或之后产生一个新线程？

> ID：13178248
> 
> 赞同：5
> 
> 时间：2012-11-01T13:37:42.810
> 
> 标签：windows, winapi, iocp

对于 IO 完成端口完成时实际发生的情况，我有点困惑。

我认为 Win API 允许访问 IOCP 队列，该队列能够以某种方式将具有特定句柄（假设是套接字）的回调引用排队（或堆叠）。当 Windows 收到来自 NIC 的中断时，它会在某个时候进入 NIC 的 IOCP 队列并在其*自己的*(IOCP) 线程池上执行回调。

我的问题是，线程池中的这个线程是在收到中断时产生的，还是实际上是在调用 Win API 时产生的，有效地使线程处于等待状态，直到它被 IOCP 唤醒队列？

**编辑：**
我发现这个： http: [//msmvps.com/blogs/luisabreu/archive/2009/06/04/multithreading-io-and-the-thread-pool.aspx](http://msmvps.com/blogs/luisabreu/archive/2009/06/04/multithreading-i-o-and-the-thread-pool.aspx) where is states：*“只要该操作完成，它将在该 I/O 完成端口上排队一个数据包。然后该端口将继续并使用线程池的线程之一来运行您指定的回调。*

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-01T21:27:30.300

将 I/O 完成端口简单地视为线程安全队列可能更容易，操作系统在重叠操作完成后将它们放入其中。

您创建 IOCP，然后创建一些线程，这些线程调用一个函数来从该队列中删除项目。通常这是[GetQueuedCompletionStatus()](http://msdn.microsoft.com/en-us/library/windows/desktop/aa364986%28v=vs.85%29.aspx)。这个函数本质上会阻塞你的线程，直到 IOCP（队列）中有东西，然后允许你的线程检索那个东西并运行。

您将文件句柄和套接字与 IOCP 关联，这仅意味着一旦关联它们的重叠完成将被放置在您的 IOCP（队列）中。

它比这更复杂，但这是你应该思考的方式。

# javascript - jQuery .change() only fires once

> ID：13178252
> 
> 赞同：0
> 
> 时间：2012-11-01T13:37:52.637
> 
> 标签：javascript, jquery, asp.net

I have a DropDownList called "ddlCaseFiles". I then have a script which I import that contains the jQuery .change() function to capture the event. Then I have 3 radio buttons which sorts the dropDownList. When the default radio button is loaded, then the event fires. But as soon as I select another radio button, then the event doesn't fire anymore.

Here is my DropDownList:

```
<asp:DropDownList runat="server" ID="ddlCaseFiles" DataSourceID="dsMyCaseFiles" 
DataTextField="Display" DataValueField="FileID" OnPreRender="ddl_PreRender" /> 
```

and here is my jQuery .change():

```
 $('#ddlCaseFiles').change(function () {
    debugger;
    $('#lblNextExhibitNumber').text('');
    var temp = $(this).val();
}); 
```

Here is a snipper of what the radio buttons do:

```
 protected void rbByFileName_CheckedChanged(object sender, EventArgs e)
{
    ddlCaseFiles.DataSourceID = "dsCaseFilesReverse";
    ddlCaseFiles.DataTextField = "Display";
    ddlCaseFiles.DataValueField = "FileID";
}

protected void rbByFileID_CheckedChanged(object sender, EventArgs e)
{
    ddlCaseFiles.DataSourceID = "dsCaseFiles";
    ddlCaseFiles.DataTextField = "Display";
    ddlCaseFiles.DataValueField = "FileID";
} 
```

I have never used the .change() before. So maybe I am missing something

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-01T14:03:27.607

Looks like your CheckedChanged events of the radio buttons don't trigger the dropdown change event. The JS change event fires when the selected value of a drop down changes. This doesn't necessarily happen when you change the `DataSourceID`, does it?

I'm not sure how to trigger this in ASP. Perhaps `ddlCaseFiles.SelectedIndexChanged()`?

Otherwise, you could add a click event handler to the radios:

```
$('input[type="radio"].someCssClass').click(function(){
   $('#ddlCaseFiles').trigger('change');
}); 
```

**EDIT:**

This is just a guess, but it looks like the `CheckedChanged` might be modifying the `<select>` element on the page. For example, is it reinserted every time `DataSourceID` changes?

Try changing your dropdown change event handler like this using the `.on()` function:

```
$('body').on('change', '#ddlCaseFiles', function () {
    debugger;
    $('#lblNextExhibitNumber').text('');
    var temp = $(this).val();
}); 
```

Note: for better performance change `$('body')` to some container closer to the dropdown.

The `.change()` function attaches the `change` handler to an element on a page. If ASP removes an element and re-adds it later then the handler is gone.

A handler attached using the `.on()` function persists even if the element is removed. [Read more here.](http://api.jquery.com/on/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-05-12T09:34:49.690

A more modern answer using jquery 3.6

```
 $(document).on('change', "#ddlCaseFiles", function (e) {
      debugger;
      $('#lblNextExhibitNumber').text('');
      var temp = $(this).val();
    }); 
```

# c# - 从网格视图中的模板字段重定向到 url

> ID：13178255
> 
> 赞同：-1
> 
> 时间：2012-11-01T13:38:06.343
> 
> 标签：c#, asp.net, .net

我的页面中有一个网格视图，我在其中添加了一个模板 feild.inserted 一个按钮，单击该按钮会将用户重定向到实际请求以进行编辑。我在项目模板中添加的按钮与数据绑定。下面是模板字段的代码

```
 <asp:TemplateField HeaderText="RequestId" SortExpression="roc_id">
     <EditItemTemplate>
          <asp:HyperLink ID="HyperLink1" runat="server" Text='<%# Bind("roc_id") %>'></asp:HyperLink>
      </EditItemTemplate>
      <ItemTemplate>
           <asp:Button ID="Button2" runat="server" onclick="Button2_Click" 
                         Text='<%# Bind("roc_id") %>' />
       </ItemTemplate>
 </asp:TemplateField> 
```

我如何从按钮单击中读取文本并将用户重定向到他们单击的请求。我在下面列出了 url，我需要阅读 url 末尾的 requestid

```
 protected void Button2_Click(object sender, EventArgs e)
    {
        Response.Redirect("http://xxxxxxxxxxxxxxxxxxxxxxxxxxx/Edit.asp?ROCID=
    } 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T14:03:49.307

您可以使用[GridView.RowCommand](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.gridview.rowcommand.aspx)来捕获`button click`事件。

此外，您需要在模板字段中的按钮中添加命令名称。

有一篇关于[在 GridView 控件中响应按钮事件](http://msdn.microsoft.com/en-us/library/bb907626%28v=vs.100%29.aspx)的好文章，它将帮助您

# tridion - 访问组件内组件内组件模板中的字段

> ID：13178260
> 
> 赞同：5
> 
> 时间：2012-11-01T13:38:15.120
> 
> 标签：tridion, tridion-2011

我这里有问题。我目前的结构是：

```
ComponentA
   FieldA1 - textField
   CombonentsB - componentLink (multi-value)
       FieldB1 - textField
       ComponentC - componentLink
           FieldC1 - textField 
```

现在我正在尝试将 ComponentA 与模板放在页面上。我正在使用 DWT 模板。我需要的是访问模板中的 FieldC1。

我已经在 TemplateA 中添加了“将链接组件添加到包”TBB。我认为它与这个相同： [http](http://sdltridionworld.com/community/extension_overview/addcompstopackage.aspx) : //sdltridionworld.com/community/extension_overview/addcompstopackage.aspx 我可以在我的模板中访问 FieldB1，但不能访问层次结构中更下方的字段。

我是否必须编写另一个包含整个层次结构的 TBB，或者它是否应该按预期工作而我的访问代码是错误的？

```
<!-- TemplateBeginRepeat name="ComponentsB" -->
@@ComponentC.Fields.FieldC1@@
<!-- TemplateEndRepeat --> 
```

我该怎么做才能让它发挥作用？除了编写新的 TBB 之外，还有其他解决方案吗？

=========== 解决方案 =============

在 Nickoli Roussakov 告诉我有关 DGX 的信息后，我设法正确实施了它。这里的代码：

```
<!-- TemplateBeginRepeat name="ComponentsB" -->
    @@Get("ComponentsB[${TemplateRepeatIndex}].Fields.ComponentC.Fields.FieldC1")@@
<!-- TemplateEndRepeat --> 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-01T14:06:49.900

GetLinkedComponents 仅适用于组件嵌套的第一级，因为您无法比使用 DWT 语法更深入。您的选择是编写一个自定义 tbb，从 componentB 渲染出所需的输出，或者尝试使用 Nuno 的 DGX 扩展（也在 sdltridionworld 上）而不是 GetLinkedComponents。

# php - MySQL EXISTS 返回 1 或 0

> ID：13178261
> 
> 赞同：2
> 
> 时间：2012-11-01T13:38:14.733
> 
> 标签：php, mysql, select

如何为我的选择查询返回 1 或 0 作为 true 和 false？我已经尝试了 fetch_assoc、数组等的每种组合。它通常返回为 null，这没有意义。

```
$querydetails = "select exists (select * from customer_det where id = $uid)";
$resultdetails = mysql_query($querydetails) or die(mysql_error());
while ($row = mysql_fetch_assoc($resultdetails)) {
    $resultdetails1 = $row[0];
} 
```

这是我查询的最新版本。我猜它不是一个数组，但是如果没有要命名的行，我不确定如何提取值？

这是我之前的帖子的一个帖子问题：[MySQL Update WHERE](https://stackoverflow.com/questions/13177364/mysql-update-where)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-01T13:40:38.803

```
SELECT IF(EXISTS(...),1,0) AS result 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-01T13:43:00.360

简单的使用`COUNT`和`IF`

```
SELECT IF(COUNT(*) = 0, 0, 1)
FROM table1
WHERE s = 2 
```

*   [**SQLFiddle 演示**](http://sqlfiddle.com/#!2/5a122/5)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2022-01-15T08:34:49.163

```
SELECT count(*) FROM (
 SELECT id FROM table WHERE condition LIMIT 1
) AS result; 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-11-01T13:43:48.753

我会做：

```
select * from customer_det where id = $uid LIMIT 1 
```

您将获得 1 行或零行。

# c - C的污点分析

> ID：13178263
> 
> 赞同：0
> 
> 时间：2012-11-01T13:38:21.087
> 
> 标签：c, static-analysis, lint, splint

我需要对我的 C 程序执行静态污点分析。我尝试使用夹板，没有运气。是否有任何其他开源或免费软件工具可用于执行污点分析？

如果是，您能否也提及使用它的方式或参考任何链接。感谢你的帮助。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T14:28:45.677

搜索 google 我发现以下支持 C 程序的污点分析：

1.  [http://code.google.com/p/tanalysis/](http://code.google.com/p/tanalysis/)
2.  [http://www.cs.umd.edu/~jfoster/cqual/](http://www.cs.umd.edu/~jfoster/cqual/) - 查看他们的 printf 格式字符串示例

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T13:41:58.597

我还没有尝试过，但[taintgrind](http://www.cl.cam.ac.uk/~wmk26/taintgrind/)（对于[Valgrind](http://valgrind.org/)）可能是我要开始的地方。它在[GitHub 上](https://github.com/CTSRD-SOAAP/taintgrind)，看起来相当“活跃”。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-08-27T21:03:49.163

您可以使用[SAINT：C 的静态污点分析工具对 C](https://github.com/xaviernoumbis/saint)程序执行静态污点分析。

该工具仍在开发中。

# ruby-on-rails - Rails Anemone 和 Postgres 只存储 URL

> ID：13178265
> 
> 赞同：2
> 
> 时间：2012-11-01T13:38:25.450
> 
> 标签：ruby-on-rails, ruby, postgresql, anemone

我想将 URL 保存`on_pages_like`为某个匹配项。Anemone 正在做它的事情，并且正在创建存储 URL 的记录，但是：

1.  我想使用类似的东西`find_or_create_by_url`而不是`create!`，所以我不是每次都复制记录。
2.  我想保存网址。目前 URL 正在被保存到数据库中，例如：

    --- !ruby/object:URI::HTTP 方案：http 用户：密码：主机：www.a4apps.com 端口：80 路径：/Websites/SampleCalendar/tabid/89/Default.aspx 查询：不透明：注册表：片段: 解析器:

我想要它像：

```
http://www.a4apps.com//Websites/SampleCalendar/tabid/89/Default.aspx 
```

我保存到 Postgres 表的原因是我想要另一个任务稍后使用每条记录的 URL 修改该表，而且，我对此有点陌生，并且对添加第二个数据库的想法有点不知所措建议在海葵网站上。

在过去的几天里，我尝试调整基本代码，但还没有找到解决方案。

这是我的耙子任务：

```
namespace :db do
  desc "Fetch a4apps urls"
  task :fetch_a4apps => :environment do
    require 'anemone'
    Anemone.crawl("http://www.a4apps.com/") do |anemone|
      anemone.on_pages_like(/\/SampleCalendar\/[^?]*$/) do |page|
        Calendarparts.create!(:url => page.url)
      end
    end
  end
end 
```

我的观点只是将数据输出到网页上：

```
<% @calendar.each do |part| %>
    <tr valign="top">...
             <td><%= part.url %>&nbsp;</td>...
    </tr>
<% end %> 
```

我的控制器：

```
class CalendarController < ApplicationController
  def cainventory
    @calendar = Calendarparts.all
  end
end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T17:49:41.687

好的，所以我想我想通了。不知道它是否是理想/正确的方式，但我将路径部分从 url 中拉出并将原始域附加到它的开头。

```
namespace :db do
  desc "Fetch a4apps urls"
  task :fetch_a4apps => :environment do
    require 'anemone'
    website = 'http://www.a4apps.com'
    Anemone.crawl(website) do |anemone|
      anemone.on_pages_like(/\/SampleCalendar\/[^?]*$/) do |page|
        Calendarparts.find_or_create_by_url(:url => website + page.url.path)
      end
    end
  end
end 
```

# eclipse - plugin.xml 中的可选扩展点

> ID：13178267
> 
> 赞同：1
> 
> 时间：2012-11-01T13:38:39.237
> 
> 标签：eclipse, eclipse-pde

我想在我的 plugin.xml 中定义一个在我的目标平台中不可用的扩展点。这对我来说很好，因为我只想在它可用的情况下利用它。

但是，当我添加它时，Eclipse 将其标记为错误

> 未知扩展点：'org.eclipse.ui.trace.traceComponents'

我可以以某种方式将此扩展点标记为可选吗？我知道我可以减少每个工作区或每个项目的*未解决扩展点*严重性，但我宁愿不要只因为一个错误而这样做。

完整的 plugin.xml 是

```
<?xml version="1.0" encoding="UTF-8"?>
<?eclipse version="3.4"?>
<plugin>

   <extension
         id="org.apache.sling.slingclipse.preferences"
         name="Slingclipse Preferences"
         point="org.eclipse.ui.preferencePages">
      <page
            name="Slingclipse"
            class="org.apache.sling.slingclipse.preferences.SlingclipsePreferencePage"
            id="org.apache.sling.slingclipse.preferences.defaultPreferences">
      </page>
   </extension>
   <extension
         point="org.eclipse.core.runtime.preferences">
      <initializer
            class="org.apache.sling.slingclipse.preferences.PreferenceInitializer">
      </initializer>
   </extension>
   <extension
         point="org.eclipse.ui.startup">
      <startup
            class="org.apache.sling.slingclipse.SlingclipseStrartup">
      </startup>
   </extension>
   <extension
         point="org.eclipse.ui.importWizards">
      <category
            id="org.apache.sling.slingclipse.ui.wizards.sampleCategory"
            name="Sling">
      </category>
      <wizard
            category="org.apache.sling.slingclipse.ui.wizards.sampleCategory"
            class="org.apache.sling.slingclipse.ui.wizards.ImportWizard"
            icon="icons/sample.gif"
            id="org.apache.sling.slingclipse.ui.wizards.ImportWizard"
            name="Import from Repository">
         <description>
            Import a file from the local file system into the workspace.
         </description>
      </wizard>
   </extension>
   <extension
         point="org.eclipse.ui.trace.traceComponents">
      <component
            id="org.eclipse.ui.trace.tracingPrefPage"
            label="Slingclipse">
         <bundle
               name="org.apache.sling.slingclipse"></bundle>
      </component>
   </extension>
</plugin> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T19:08:31.010

您在这里混合了两个概念：开发时间与运行时间。

扩展点是在开发时声明的依赖项。因此，您应该在开发时在目标平台中定义该扩展点的*插件*。但是您是对的，您通常可以编写清单 XML 来扩展该扩展点，而无需它可用。实际上，这并不能很好地工作，因为许多扩展点需要实现一个接口，该接口本身也在（不存在的）插件中定义。

为了使功能对用户来说是可选的（并且不强迫*他*拥有定义插件），您需要使插件的*安装*成为可选的。但这与清单和扩展点的使用完全无关。例如，您必须声明一个包含插件的功能，并使该功能依赖于包含定义扩展点的插件的功能。

# ruby-on-rails - 带有可选参数的 .yml 翻译

> ID：13178268
> 
> 赞同：36
> 
> 时间：2012-11-01T13:38:42.733
> 
> 标签：ruby-on-rails, internationalization, yaml

我想`my_translation`使用可选参数进行翻译。例如：

```
> I18n.t('my_translation')
=> "This is my translation"
> I18n.t('my_translation', parameter: 1)
=> "This is my translation with an optional parameter which value is 1" 
```

这可能吗？

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2012-11-01T13:43:16.523

当然是。您只需像这样编写翻译：

```
my_translation: This is my translation with an optional parameter which value is %{parameter} 
```

参数真的是可选的吗？在上述翻译中，您必须提供所有参数。

更新：对不起，我回答得太早了。我不认为这很容易做到。也许最简单的方法是这样的：

```
> I18n.t('my_translation1')
=> "This is my translation"
> I18n.t('my_translation2', parameter: 1)
=> "This is my translation with an optional parameter which value is 1" 
```

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2012-11-02T09:05:06.560

我会说这是可能的，但不推荐。根据您在@Yanhao 的回答中的评论，您有两个完全独立的字符串，我想说它们应该是您的 yaml 文件中的两个单独的条目：

```
report_name: My report
report_name_with_date: My report on %{date} 
```

由于 的存在`date`决定了要显示的字符串，您也许可以`params`在控制器方法的散列中测试它的存在，将标题分配给变量，然后在视图中使用它。也许是这样的：

```
report_date = params[:report_date]
if report_date && report_date.is_a?(Date)
  @report_name = I18n.t('report_name_with_date', date: report_date.to_s)
else
  @report_name = I18n.t('report_name')
end 
```

如果您想要完全按照您所描述的行为，那么无论如何您都需要两个 yaml 条目，*并且*您将有额外的卷积，*并且*您将通过将两个字符串连接在一起来创建一个字符串来执行 I18n no-no，假设一个固定的语法句子结构（更不用说这让翻译者望而却步）：

```
report_name_with_date: My report%{on_date}
on_date: on %{date} 
```

用这样的代码：

```
report_date = params[:report_date]
if report_date && report_date.is_a?(Date)
  on_date = I18n.t('on_date', date: report_date.to_s)
  @report_name = I18n.t('report_name_with_date', on_date: " #{on_date}")
else
  @report_name = I18n.t('report_name_with_date', on_date: nil)
end 
```

所以，总而言之，我会说两个单独的完整字符串，就像在第一个例子中一样。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-08-26T02:39:42.897

我就是这样做的！

1.  首先设置我的翻译

    ```
    I18n.t('my_translation', parameter: optional_parameter) 
    ```

2.  检查值是否为零

    ```
    optional_parameter = value.nil? "" : "with an optional parameter which value is #{value}"
    I18n.t('my_translation', parameter: optional_parameter) 
    ```

    *   如果值为 nil `=>"This is my translation"`
    *   如果值为 1`=> "This is my translation with an optional parameter which value is 1"`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2021-12-09T09:43:10.173

如果您使用 a`number`作为可选参数，请`Rails`提供更好的处理方式。

例如

```
 invoice:
    zero: "Great! You have no pending invoices."
    one: "You have only 1 pending invoice."
    other: "You have %{count} pending invoices."

  >> t("invoice", count: 0) 
  => Great! You have no pending invoices.

  >> t("invoice", count: 1)
  => You have only 1 pending invoice.

  >> t("invoice", count: 5) 
  => You have 5 pending invoices. 
```

# android - 安卓内存泄漏？位图超出 VM 预算错误并显示碎片

> ID：13178270
> 
> 赞同：0
> 
> 时间：2012-11-01T13:38:48.177
> 
> 标签：android, android-fragments, bitmap, out-of-memory

我的应用程序包含几个片段，因为我在两个选项卡中显示它们。很少有片段被归类到第一个选项卡中，很少有片段进入另一个类别，显示为第二个选项卡。它还有许多将从网络上获取的图像。我正在使用延迟加载图像概念，没有对位图的 WeakReference 或 SoftReference。应用程序工作得很好，没有任何问题。但是如果我操作很长时间，它就会崩溃。我跟踪了堆更新并找到了以下内容。

当我访问新片段时，堆大小正在增加，当从堆栈中删除它们时，堆大小并没有减少。如果我访问旧片段，那么堆内存没有大量增加，但内存增加量仍然很小。为什么从堆栈中删除碎片时堆内存不回收内存。我正在跟踪所有片段的日志，每个片段 onDestroy() 都被称为仍然没有回收内存。内存的后续增加最终导致 OutOfMemoryError 说 Bitmap 超出 VM 预算错误并且 VM 无法分配 n 字节大小。

所有片段将有 3 种高质量的背景图像，它们存储在资源中。我在每个片段的 onDestroy() 中执行 unbindDrawables。对于位图图像的使用，我将内存限制为堆内存的第 5 部分。仍然OOME来了，所有的门都为我关闭，无法找到解决方案。

下面是我将用于片段导航的示例代码

```
FragmentManager fm = getFragmentManager();
            if(fm!=null)
            {
                FragmentTransaction ft = fm.beginTransaction();
                ft.replace(R.id.llfirst, fragments1);//if second tab ft.replace(R.id.llsecond,fragments2);
                ft.addToBackStack(null);
                ft.commit();
            } 
```

最后，还有一个问题是应用程序中使用的片段数量是否有限制。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T14:08:29.733

我猜位图大小太大。它没有被正确释放，gc 无法回收内存。希望这可以帮助。

XML 布局

```
 <?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
 android:layout_width="fill_parent"
 android:layout_height="fill_parent"
 android:id="@+id/RootView"
 >

@Override
protected void onDestroy() {
super.onDestroy();

unbindDrawables(findViewById(R.id.RootView));
System.gc();
}

private void unbindDrawables(View view) {
    if (view.getBackground() != null) {
    view.getBackground().setCallback(null);
    }
    if (view instanceof ViewGroup) {
        for (int i = 0; i < ((ViewGroup) view).getChildCount(); i++) {
        unbindDrawables(((ViewGroup) view).getChildAt(i));
        }
    ((ViewGroup) view).removeAllViews();
    }
} 
```

# z3 - z3 上下文重置 API

> ID：13178273
> 
> 赞同：2
> 
> 时间：2012-11-01T13:39:03.750
> 
> 标签：z3

我想在 z3 中重置上下文，类似于我在 yices 中所做的：Z3`void yices_reset (yices_context ctx)` 是否有等效命令？目前我使用`Z3_del_context(ctx);`但我不确定这是最有效的方法。我应该使用推送/弹出上下文命令，还是有其他方法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-01T15:16:05.270

`Z3_del_context(ctx)`是一种选择。但是，在您的问题中，您提到了 push/pop。因此，您似乎实际上只想重置一组断言。如果是这样的话，我建议你开始使用`Z3_solver`对象。我们可以`Z3_solver`在一个对象中创建许多不同的`Z3_context`对象。主要优点是它们可以共享声明、公式、表达式等。顺便说一句，Z3 带有一个 C++ 包装器 ( `z3++.h`)，使用 C API 更容易。这是一个使用多个求解器对象的 C++ 示例。顺便说一句，您可以同时使用多个求解器对象。

```
context c;
expr x = c.int_const("x");
expr y = c.int_const("y");
{
   solver s(c);

   s.add(x >= 1);
   s.add(y < x + 3);
   std::cout << s.check() << "\n";

   model m = s.get_model();
   std::cout << m << "\n";
   // solver object c will be destroyed at this point
}
{
   // creating a new solver object
   solver s2(c);
   s2.add(x > y + 1);
   std::cout << s2.check() << "\n";
} 
```

***编辑***：求解器对象也有一个`reset`方法。它擦除在给定求解器中断言的所有断言。

# jquery - jquery ui datepicker 数据表

> ID：13178278
> 
> 赞同：0
> 
> 时间：2012-11-01T13:39:13.897
> 
> 标签：jquery, jquery-ui, datepicker, datatables

嗨，我正在使用数据表插件和日期范围过滤器。问题是日期我有这种**格式**：**dd / mm / yyyy H:i:s**在表中。当我给过滤掉**对话框数据选择**器但我把**H:i:s**有什么办法吗？

[http://jquery-datatables-column-filter.googlecode.com/svn/trunk/dateRange.html](http://jquery-datatables-column-filter.googlecode.com/svn/trunk/dateRange.html)

另一个问题是，我将单词 From: 和 To: 更改为以我的语言显示。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T16:58:23.763

在 jquery 时间选择器/日期选择器中使用与您的数据库匹配的格式。使用这些代码为 mysql 转换 datepicker

```
$.datepicker.regional[""].dateFormat = 'yy-mm-dd';
$.datepicker.setDefaults($.datepicker.regional['']); 
```

您将不得不为时间选择器使用类似的东西

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-13T08:20:05.343

你应该使用这样的东西：

```
var date = $('#datepicker').datepicker({ dateFormat: 'dd-mm-yy' }).val(); 
```

参考：[jQuery UI DatePicker - 更改日期格式](https://stackoverflow.com/questions/1328025/jquery-ui-datepicker-change-date-format?rq=1)

# objective-c - SBJsonParser 无法解析 NSArray

> ID：13178279
> 
> 赞同：0
> 
> 时间：2012-11-01T13:39:16.013
> 
> 标签：objective-c, ios, nsarray, sbjson

我正在尝试解析`NSArray`，`JSON`但出现以下错误：

> *** Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: '-[__NSArrayM JSONRepresentation]: unrecognized selector sent to instance 0xa93e460' *** First throw call stack: (0x21f1012 0x1feae7e 0x227c4bd 0x21e0bbc 0x21e094e 0x3445a 0x33ecc 0x26a453f 0x26b6014 0x26a72e8 0x26a7450 0x95e22e12 0x95e0acca) libc+ +abi.dylib: 终止调用抛出异常

我已经包含了**SBJson_3.1.1/Classes**目录中的所有类。
这是代码：

```
NSMutableArray* arr = ...get array
NSString* jsonArr = [arr JSONRepresentation]; // here I get error 
```

当我在简单字符串数组中执行此操作时，它可以工作：

```
 NSData *jsonData = [NSJSONSerialization arr
                                                       options:NSJSONWritingPrettyPrinted error:nil];
    NSString *jsonString = [[NSString alloc] initWithData:jsonData encoding:NSUTF8StringEncoding]; 
```

但我的数组包含对象列表（人）可能有问题。

我使用 Item 而不是 person 就像示例
Item.h

```
@interface Item : NSObject
{
    BOOL IsOpen;
    NSString* Description;
}

@property int ItemId;
@property int SequenceId;
@property BOOL IsOpen;
@property NSString* Description;

- (id) proxyForJson;

@end 
```

项目.m

```
@implementation Item
@synthesize ItemId;
@synthesize SequenceId;
@synthesize Description;
@synthesize IsOpen;

- (id) proxyForJson {

    return [NSDictionary dictionaryWithObjectsAndKeys:
            [NSString stringWithFormat:@"%i", ItemId], @"ItemId",
            SequenceId, @"SequenceId",
            Description, @"Description",
            IsScanned, @"IsOpen",
            nil ];
}
@end 
```

更新

学生示例
我尝试制作一个单独的项目。我从 sbjson 框架的 classes 目录中复制到新项目中。这是代码：

```
#import "SBJson.h" 

@interface Student : NSObject
{
    NSString *name;
    NSInteger sid;

    NSString *email;
}
@property NSString *name;
@property NSInteger sid;

@property NSString *email;

- (id) proxyForJson;

@end

@implementation Student
@synthesize name;
@synthesize sid;

@synthesize email;

- (id) proxyForJson{
    return [NSDictionary dictionaryWithObjectsAndKeys:
            name, @"student_name",
            [NSNumber numberWithInt:sid], @"student_id",
            email, @"email",
            nil ];
}

@end

NSMutableArray* studentArray = [[NSMutableArray alloc]init];

    Student* s1 = [[Student alloc]init];
    s1.name = @"student 1";
    s1.sid = 45;
    s1.email = @"test@test.com";

    Student* s2 = [[Student alloc]init];
    s2.name = @"student 2";
    s2.sid = 46;
    s2.email = @"plavi@test.com";

    [studentArray addObject:s1];
    [studentArray addObject:s2];

    NSString *jsonString = [studentArray JSONRepresentation];

    NSLog(@"%@", jsonString); 
```

我再次收到错误：

> 由于未捕获的异常“NSInvalidArgumentException”而终止应用程序，原因：“-[__NSArrayM JSONRepresentation]：无法识别的选择器发送到实例 0x741b100”

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T08:58:36.183

查看以下摘自[iOS 5 教程中使用 JSON 的](http://www.raywenderlich.com/5492/working-with-json-in-ios-5) 摘录 这主要用于生成 JSON。

```
//build an info object and convert to json
NSDictionary* info = [NSDictionary dictionaryWithObjectsAndKeys:
[loan objectForKey:@"name"], 
@"who",
[(NSDictionary*)[loan objectForKey:@"location"] 
objectForKey:@"country"], 
@"where",
[NSNumber numberWithFloat: outstandingAmount], 
@"what",nil];

//convert object to data
NSData* jsonData = [NSJSONSerialization dataWithJSONObject:info options:NSJSONWritingPrettyPrinted error:&error]; 
```

现在，区别在于使用 NSDictionary 并将其转换为 JSON *Data*。尝试按照上面给出的方式形成 JSON 并检查问题是否仍然存在。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-03T16:30:58.637

SBJson 不支持在没有帮助的情况下序列化用户定义的类。但是，如果您`-proxyForJson`在 Person 类中实现一个方法（例如[这里](https://github.com/stig/json-framework/blob/master/Tests/ProxyTest.m)），它应该可以工作。

如果您使用的是最近的 Xcode，则以下内容应该可以工作。标题：

```
@interface Item : NSObject
@property int ItemId;
@property int SequenceId;
@property BOOL IsOpen;
@property(copy) NSString* Description;
- (id) proxyForJson;
@end 
```

执行：

```
@implementation Item
- (id) proxyForJson {
    return @{ @"ItemId": @(self.ItemId),
              @"SequenceId": @(self.SequenceId),
              @"Description": self.Description,
              @"IsOpen": @(self.IsOpen)
              };
}
@end 
```

这应该让 SBJson 将 Item 对象序列化为 NSDictionaries。但是，SBJson 不*支持*将 JSON 解析为自定义对象。因此，您将始终以字典形式获取此信息。我不知道任何提供与自定义类型绑定的 Objective-C JSON 解析器。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-09T22:00:46.363

您是否正确链接了类别？对我来说，您似乎缺少一个类别

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-05T15:54:03.737

我建议阅读[该线程](https://stackoverflow.com/questions/5172471/json-error-on-iphone-app/5214540#5214540)的前两条评论。如果这些都没有帮助，那么您仍然很可能没有正确安装库。尝试从您的项目中删除 SBJSON 文件，然后读取它们，确保将它们添加到您的目标中。此外，请确保您将 SBJSON 标头导入到您的类中。

我建议您尝试在 NSString 对象数组上使用 JSONRepresentation。如果框架安装正确，这肯定可以工作。通过这种方式，您可以缩小是安装问题还是自定义类的问题。

# android - 为什么调整大小会使我的图像看起来很奇怪？

> ID：13178281
> 
> 赞同：1
> 
> 时间：2012-11-01T13:39:25.313
> 
> 标签：android, graphics, bitmap, android-canvas, rescale

我有一个相对布局，我在其上添加了一个视图。这是活动中的代码：

```
paint = (RelativeLayout) findViewById(R.id.paint);
    new Handler().postDelayed(new Runnable() {

        @Override
        public void run() {
            myView = new CustomImage(getBaseContext());
            paint.addView(myView);
            String imagePath = (String) getIntent().getExtras().get("selectedImagePath");
            LogService.log("PaintActivity", "Imagepath: " + imagePath);
            //                Drawable background = BitmapDrawable.createFromPath(imagePath);
            //                bitmap = ((BitmapDrawable) background).getBitmap();
            try {
                fis = new FileInputStream(imagePath);
            } catch (FileNotFoundException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
            try {
                mBitmap = loadBitmap(fis.getFD());
                bitmap = getResizedBitmap(mBitmap, 412*2, 1024*2);
            } catch (IOException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
            try {
                LogService.log("PaintActivity", "Bitmap = " + mBitmap);
                myView.setBitmap(bitmap);
            } catch (Exception e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
            mPaint = new Paint();
            mPaint.setAntiAlias(true);
            mPaint.setDither(true);
            mPaint.setColor(0xFF000000);
            mPaint.setStyle(Paint.Style.STROKE);
            mPaint.setStrokeJoin(Paint.Join.ROUND);
            mPaint.setStrokeCap(Paint.Cap.ROUND);
            mPaint.setStrokeWidth(50);
            myView.setPaint(mPaint);

        }
    }, 50); 
```

这是我的观点：

```
public class CustomImage extends View {

private boolean hasResized = false;

private Bitmap bitmap, bitmap2;

public Context context;

Paint paint;

private Canvas canvas;

public String text = null;

private Paint mBitmapPaint, paintText;

private Path mPath = new Path();

private float mX, mY, pX, pY, tX, tY;

private static final float TOUCH_TOLERANCE = 4;

private float screenDensity;

int height, width;

private Bitmap mBitmap;

private RandomAccessFile randomAccessFile;

private int bh;

private int bw;

public CustomImage(Context context, AttributeSet attrs, int defStyle) {
    super(context, attrs, defStyle);
    init(context);
}

public CustomImage(Context context, AttributeSet attrs) {
    super(context, attrs);
    init(context);
}

public CustomImage(Context context) {
    super(context);
    init(context);
}

private void init(Context context) {
    this.context = context;
    mBitmapPaint = new Paint(Paint.DITHER_FLAG);
  }

public void setImg(Context context, Canvas canvas, Bitmap bitmapw, int width, int height) {

    bw = bitmapw.getWidth();
    bh = bitmapw.getHeight();
    float scaleWidth = ((float) width)/ bw;
    float scaleHeight = ((float) height)/ bh;
    System.out.println("CustomImage.setImg()");
    bitmap = bitmapw;

}

public void setPaint(Paint paint) {
    this.paint = paint;
    LogService.log("in setPaint", "paint = " + paint);
}

public void setBitmap(Bitmap bitmap) throws Exception {
    File file = new File("/mnt/sdcard/sample/temp.txt");
    file.getParentFile().mkdirs();
    randomAccessFile = new RandomAccessFile(file, "rw");
    int bWidth = bitmap.getWidth();
    int bHeight = bitmap.getHeight();
    FileChannel channel = randomAccessFile.getChannel();
    MappedByteBuffer map = channel.map(MapMode.READ_WRITE, 0, bWidth*bHeight*4);
    bitmap.copyPixelsToBuffer(map);
    bitmap.recycle();
    this.bitmap = Bitmap.createBitmap(bWidth, bHeight, Config.ARGB_8888);
    map.position(0);
    this.bitmap.copyPixelsFromBuffer(map);
    channel.close();
    randomAccessFile.close();
    //        this.bitmap = bitmap;

    // canvas = new Canvas();
}

public void setBitmap2(Bitmap bitmap) {
    bitmap2 = bitmap;
    invalidate();
}

public void getText(String text) {
    this.text = text;
    paintText = new Paint();
    paintText.setColor(0xFFFFFFFF);
    paintText.setStrokeWidth(10);
    paintText.setTextSize(20);
    invalidate();
}

@Override
protected void onDraw(Canvas canvas) {
    super.onDraw(canvas);
    canvas.drawBitmap(bitmap, 0, 0, mBitmapPaint);
    if (PaintActivity.isPic == 1) {
        if (bitmap2 != null) {
            canvas.drawBitmap(bitmap2, mX, mY, mBitmapPaint);
            pX = mX;
            pY = mY;
        }
        if(text != null){
            canvas.drawText(text, tX, tY, paintText);
        }
    } else if (PaintActivity.isPic == 2) {
        if(text != null){
            canvas.drawText(text, mX, mY, paintText);
            tX = mX;
            tY = mY;
        }
        if (bitmap2 != null) {
            canvas.drawBitmap(bitmap2, pX, pY, mBitmapPaint);
        }
    }else{
        canvas.drawPath(mPath, paint);
        if (bitmap2 != null) {
            canvas.drawBitmap(bitmap2, pX, pY, mBitmapPaint);
        }
        if(text != null){
            canvas.drawText(text, tX, tY, paintText);
        }
    }
}

private void touch_start(float x, float y) {
    mPath.reset();
    mPath.moveTo(x, y);
    canvas.drawPoint(x, y, paint);
    mX = x;
    mY = y;

}
private void touch_move(float x, float y) {
    float dx = Math.abs(x - mX);
    float dy = Math.abs(y - mY);
    if ((dx >= TOUCH_TOLERANCE) || (dy >= TOUCH_TOLERANCE)) {
        mPath.quadTo(mX, mY, (x + mX) / 2, (y + mY) / 2);
        mX = x;
        mY = y;
    }
}

private void touch_up() {
    mPath.lineTo(mX, mY);
    mPath.moveTo(mX, mY);
    canvas.drawPath(mPath, paint);
    mPath.reset();
}

@Override
public boolean onTouchEvent(MotionEvent event) {
    float x = event.getX();
    float y = event.getY();
    switch (event.getAction()) {
    case MotionEvent.ACTION_DOWN:
        touch_start(x, y);

        invalidate();
        break;
    case MotionEvent.ACTION_MOVE:
        touch_move(x, y);
        invalidate();
        break;
    case MotionEvent.ACTION_UP:
        touch_up();
        invalidate();
        break;
    }
    return true;
}

@Override
protected void onSizeChanged(int w, int h, int oldw, int oldh) {
    System.out.println("CustomImage.onSizeChanged()");
    super.onSizeChanged(w, h, oldw, oldh);
    if ((w != 0) && (h != 0)) {
        if (!hasResized) {
            hasResized = true;
            renderImage();
        }
    }
}

public void renderImage() {
    System.out.println("======in renderimage=======w " + getMeasuredWidth() + "h " + getMeasuredHeight());
    width = getMeasuredWidth();
    height = getMeasuredHeight();
    canvas = new Canvas(bitmap);
    setImg(context, canvas, bitmap, width, height);
}
} 
```

如您所见，我在活动中有一个调整大小的功能：

```
 public Bitmap getResizedBitmap(Bitmap bm, int newHeight, int newWidth) {

    int width = bm.getWidth();

    int height = bm.getHeight();

    float scaleWidth = ((float) newWidth) / width;

    float scaleHeight = ((float) newHeight) / height;

    // create a matrix for the manipulation

    Matrix matrix = new Matrix();

    // resize the bit map

    matrix.postScale(scaleWidth, scaleHeight);

    // recreate the new Bitmap

    Bitmap resizedBitmap = Bitmap.createBitmap(bm, 0, 0, width, height, matrix, false);

    return resizedBitmap;

} 
```

现在，如果我从代码中注释掉这个函数，图像看起来很正常，但没有缩放。如果我把它留在那里，那么我会得到一个丑陋的图像，但它会被调整大小。示例：正常未调整大小：http: [//imgur.com/BD5Pp,YWDTi 已](http://imgur.com/BD5Pp,YWDTi) 更改但调整大小图片：http: [//imgur.com/BD5Pp,YWDTi#1](http://imgur.com/BD5Pp,YWDTi#1)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T08:46:38.220

正如 OP 在回答我的问题时所说的那样，位图被转换为`RGB_565`，这是`createBitmap()`- [#16211](http://code.google.com/p/android/issues/detail?id=16211)中的一个已知错误，已在 Android 3.0 中修复。它也有影响`createScaledBitmap()`。如果位图保持不变，它看起来不会变形`ARGB_8888`。

作为一种解决方法，您必须手动创建目标位图（这使您可以完全控制像素格式），然后创建附加到该位图的画布并在其上绘制原始位图的缩放版本。这是我的项目中的一个示例：

```
public class BitmapUtils {

    private static Matrix matrix = new Matrix();
    private static Paint paint = new Paint(Paint.FILTER_BITMAP_FLAG);

    public static final Bitmap resizeBitmap(Bitmap bitmap, float scale, Bitmap.Config targetConfig) {
            int srcWidth = bitmap.getWidth();
            int srcHeight = bitmap.getHeight();

            int newWidth = (int) (srcWidth * scale);
            int newHeight = (int) (srcHeight * scale);

            float sx = newWidth / (float) srcWidth;
            float sy = newHeight / (float) srcHeight;
            matrix.setScale(sx, sy);

            Bitmap target = Bitmap.createBitmap(newWidth, newHeight, targetConfig);
            Canvas c = new Canvas(target);
            c.drawBitmap(bitmap, matrix, paint);
            return target;
    }
} 
```

注意：由于全局`matrix`实例，此代码不可重入。此外，它以比例为参数，但根据您的需要调整它（新的宽度/高度作为参数）是微不足道的。

# macos - 在哪里可以找到有关沙盒 Mac 应用程序的“相关项目”功能的更多信息？

> ID：13178285
> 
> 赞同：2
> 
> 时间：2012-11-01T13:39:39.793
> 
> 标签：macos, sandbox

在哪里可以找到有关沙盒 Mac 应用程序的“相关项目”功能的更多信息？该功能在“<a href="http://developer.apple.com/itunes/?destination=adc.apple.com.16368287999" rel="nofollow">WWDC 2012 Session 700 的视频中进行了简要介绍： OS X App Sandbox”（时间索引 33:39-36:03 左右）。但我无法在 Apple 的开发人员文档中找到更详细地讨论该功能的位置。

根据我从视频的解释中了解到，该功能将允许沙盒应用程序声明，例如，“如果用户允许我读取名为 {X}.avi 的文件，沙盒也应该自动给出我允许读取同一目录中名称为 {X}.srt 的文件。” 这将允许应用程序读取与电影文件相关的字幕文件，而无需向用户呈现（其他）NSOpenPanel 以“打开”字幕文件。但是该视频没有解释如何实际声明这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-05T06:14:02.690

自从我发布了这个问题，Apple 似乎已经更新了它的文档。该功能现在在[“App Sandbox Design Guide”</a> 的](https://developer.apple.com/library/mac/documentation/security/conceptual/AppSandboxDesignGuide)[“Related Items”</a> 部分中进行了描述：](https://developer.apple.com/library/mac/documentation/security/conceptual/AppSandboxDesignGuide/AppSandboxInDepth/AppSandboxInDepth.html#//apple_ref/doc/uid/TP40011183-CH3-SW22)

[](https://developer.apple.com/library/mac/documentation/security/conceptual/AppSandboxDesignGuide/AppSandboxInDepth/AppSandboxInDepth.html#//apple_ref/doc/uid/TP40011183-CH3-SW22)

> [App Sandbox 的相关项目功能允许您的应用访问与用户选择的文件同名但扩展名不同的文件。此功能由两部分组成：应用程序的 Info.plist 文件中的相关扩展列表和告诉沙箱您在做什么的代码。
> 
> 有两种常见的情况是有意义的：
> 
> [...]
> 
> `Info.plist`在这两种情况下，您都必须对应用程序的文件进行少量更改。您的应用程序应该已经声明了一个 Document Types ( `CFBundleDocumentTypes`) 数组，该数组声明了您的应用程序可以打开的文件类型。
> 
> 对于该数组中的每个文件类型字典，如果该文件类型应被视为潜在相关类型以用于打开和保存目的，请添加`NSIsRelatedItemType`具有布尔值的键`YES`。](https://developer.apple.com/library/mac/documentation/security/conceptual/AppSandboxDesignGuide/AppSandboxInDepth/AppSandboxInDepth.html#//apple_ref/doc/uid/TP40011183-CH3-SW22) 
> 
> [要了解有关文件呈现器和文件协调器的更多信息，请阅读](https://developer.apple.com/library/mac/documentation/security/conceptual/AppSandboxDesignGuide/AppSandboxInDepth/AppSandboxInDepth.html#//apple_ref/doc/uid/TP40011183-CH3-SW22)[文件系统编程指南](https://developer.apple.com/library/mac/documentation/FileManagement/Conceptual/FileSystemProgrammingGuide/Introduction/Introduction.html#//apple_ref/doc/uid/TP40010672)。

# iphone - 下载数据以在另一个线程上填充 UITableViewCell 中的“占位符”以防止滞后

> ID：13178288
> 
> 赞同：0
> 
> 时间：2012-11-01T13:39:45.087
> 
> 标签：iphone, ios, multithreading, uitableview

我拥有的是一个带有 UITableViewController 的应用程序，它充满了自定义 UITableViewCells。我有一些数据可用于提供单元格，但是我需要下载一些额外的内容（图片等）。

所以我在 viewDidLoad 方法中做了什么，我初始化了一个 UITableViewCell 对象，用我已经可用的信息填充所有标签。然后我启动单元类的方法之一来下载数据。完成特定单元格后，我将其放入 NSMutableArray 并继续下一个单元格。

然后在 cellForRowAtIndexPath 方法中，我从可变数组返回特定​​索引处的单元格。

发生的情况是，直到所有数据都没有下载，我的 tableView 被卡住了......我不确定这是否是正确的方法，但我认为我必须启动下载然后填充额外内容的方法另一个线程上的单元格。我怎样才能做到这一点？

提前非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T14:00:32.070

正如 rckoenes 所建议的，使用 AFNetworking 有效！:) 我认为对于那些仍然没有 ARC 的人来说，替代方案是 ASIHTTPRequest。

这是我下载图像的代码：

```
-(void)getImageFromUrl:(NSURL *)url{
    NSURLRequest *request = [NSURLRequest requestWithURL:url];
    AFImageRequestOperation *op = [AFImageRequestOperation imageRequestOperationWithRequest:request imageProcessingBlock:nil success:^(NSURLRequest *request, NSHTTPURLResponse *response, UIImage *img) {
        [self.image setImage:img];

    } failure:^(NSURLRequest *request, NSHTTPURLResponse *response, NSError *error) {

    }];
    [op start];
} 
```

# dynamics-crm-2011 - 如何为实体特定（即本地）选项集文本值自动生成早期绑定属性？

> ID：13178290
> 
> 赞同：4
> 
> 时间：2012-11-01T13:39:46.347
> 
> 标签：dynamics-crm-2011, dynamics-crm

在使用`Microsoft.Xrm.Sdk`命名空间一年后，我昨天才发现该`Entity.FormattedValues`属性包含实体特定（即本地）选项集文本的文本值。

我之前没有发现它的原因是没有早期绑定的方法来获取价值。ie`entity.new_myOptionSet`是`OptionSetValue`只包含`int`值的类型。您必须调用 entity.FormattedValues["new_myoptionset"] 来`string`获取`OptionSetValue`.

因此，我想让 crmsrvcutil 为本地选项集自动生成一个文本属性。即随着`Entity.new_myOptionSet`它当前的生成，`Entity.new_myOptionSetText`也会生成。

我查看了[Microsoft.Crm.Services.Utility.ICodeGenerationService](http://technet.microsoft.com/en-us/library/hh560358.aspx)，但这看起来主要是为了指定`CodeGenerationType`应该是什么......

有没有一种方法支持使用 CrmServiceUtil 添加这些属性，或者我最好编写一个我可以运行的自定义应用程序，它可以将这些属性作为自动生成的部分类生成？

## 编辑 - 我想生成的代码示例

目前，每当我需要访问 OptionSetValue 的文本值时，我都会使用以下代码：

```
var textValue = OptionSetCache.GetText(service, entity, e => e.New_MyOptionSet); 
```

选项集缓存将使用`entity.LogicalName`, 和属性表达式来确定我要求的选项集的名称。然后，它将使用 , 查询 SDK `RetrieveAttriubteRequest`，以获取选项集 int 和文本值的列表，然后将其缓存，因此不必再次访问 CRM。然后它查找`New_MyOptionSet`实体的 int 值并将其与缓存列表交叉引用，以获取 OptionSet 的文本值。

而不是做所有这些，我可以这样做（假设实体已从服务器检索，而不仅仅是填充客户端）：

```
var textValue = entity.FormattedValues["new_myoptionset"]; 
```

但“new_myoptionset”不再是早期绑定。我希望生成的早期绑定实体类也为调用上述行的 OptionSetValue 属性生成一个额外的“文本”属性，因此我的实体会将其添加到其中：

```
public string New_MyOptionSetText {
    return this.GetFormattedAttributeValue("new_myoptionset"); // this is a protected method on the Entity class itself...
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T13:10:04.570

您能否利用将为您的 OptionSets 生成**枚举**的 CrmServiceUtil 扩展，然后将您的 new_myOptionSetText 属性添加到将 int 值与枚举进行比较并[返回枚举字符串的部分类中](http://www.dotnetperls.com/enum-tostring)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-03T16:57:00.183

同样，我认为专门针对这种情况，`CrmSvcUtil.exe`生成您想要的代码是一个好主意，但更一般地说，您可以使用类似于接受的答案[@workarounds for nameof() operator in C#通过反射访问属性名称: 类型安全的数据绑定](https://stackoverflow.com/questions/301809/workarounds-for-nameof-operator-in-c-typesafe-databinding "C# 中 nameof() 运算符的解决方法：类型安全数据绑定")。

```
var textValue = entity.FormattedValues["new_myoptionset"];
// becomes
var textValue = entity.FormattedValues
[
    // renamed the class from Nameof to NameOf
    NameOf(Xrm.MyEntity).Property(x => x.new_MyOptionSet).ToLower()
]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-04-25T17:44:43.623

最新版本的[CRM Early Bound Generator](https://github.com/daryllabar/DLaB.Xrm.XrmToolBoxTools/releases)包括一个`Fields`包含字段名称的结构。这允许访问 FormattedValues 就像这样简单：

```
var textValue = entity.FormattedValues[MyEntity.Fields.new_MyOptionSet]; 
```

您可以通过 CrmSvcUtil 的接口创建一个新属性，但是对于一个相当简单的调用来说，这需要做很多工作，而且我不认为它可以证明创建其他属性是合理的。

# vbscript - 需要操作系统名称，然后是版本

> ID：13178291
> 
> 赞同：0
> 
> 时间：2012-11-01T13:39:52.423
> 
> 标签：vbscript

我需要检索操作系统名称，例如“Windows 2003”，然后是操作系统版本，即“服务器标准版”。

我有这个脚本

```
Set colItems = objWMISrvc.ExecQuery("SELECT * FROM Win32_OperatingSystem"
For Each objOperatingSystem in colItems
   strOSName = objOperatingSystem.Caption
Next 
```

这使得 strOSName 成为“Windows 2003 Server Standard Edition”或在我正在开发的“Microsoft Windows 7 Professional”系统上。

有没有办法让我把这两个方面分开？如果这有意义...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T14:22:15.140

由于市场营销在版本控制方面有发言权，我怀疑您能否找到适用于所有 Windows 版本的普遍适用的策略。对于给出的示例，我将从 RegExp 开始：

```
Option Explicit

Function qq(s) : qq = """" & s & """" : End Function

Dim aVers : aVers = Array( _
    "Windows 2003 Server Standard Edition" _
  , "Microsoft Windows 7 Professional" _
)
Dim reVers : Set reVers = New RegExp
reVers.Pattern = "^(\D+\d+) (.*)$"
Dim sVers
For Each sVers In aVers
    Dim oMTS : Set oMTS = reVers.Execute(sVers)
    WScript.Echo Join(Array( _
       qq(sVers), qq(oMTS(0).SubMatches(0)), qq(oMTS(0).SubMatches(1)) _
    ), vbCrLf)
Next 
```

输出：

```
"Windows 2003 Server Standard Edition"
"Windows 2003"
"Server Standard Edition"
"Microsoft Windows 7 Professional"
"Microsoft Windows 7"
"Professional" 
```

为了应对例如“Microsoft Windows XP [版本 5.1.2600]”，您将不得不修改模式（但自定义 RegExp 模式比修改包含大量 InStr() 和 Mid() 调用的函数更好）。

**添加**/cf。评论）

模式 "^(\D+\d+) (.*)$" 寻找：

1.  ^ 字符串开头
2.  （开始第一次捕获/组
3.  \D+ 序列（1 个或多个）非数字
4.  \d+ 数字序列
5.  ) 结束第一次捕获/组
6.  <——看！一片空白！
7.  （开始第二次捕获/组
8.  .*（可能为空）字符序列，除了 vbLf
9.  ) 结束第二次捕获/组
10.  $ 字符串结尾

# python - matplotlib 删除看不见的形状

> ID：13178293
> 
> 赞同：2
> 
> 时间：2012-11-01T13:40:01.787
> 
> 标签：python, matplotlib, scatter-plot

我想知道是否可以删除任何被其他形状完全覆盖的形状？我经常生成粒子的散点图，其中一些粒子彼此靠近，并且由于粒子的数量很容易达到 100k，因此这些图变得非常庞大。

考虑以下简单示例：

```
 import matplotlib.pyplot as plt
    import numpy as np
    N = 10000
    x = np.random.randn(N)
    y = np.random.randn(N)
    plt.scatter(x,y)
    plt.savefig('unseen.pdf') 
```

当使用大于 10000 的 N 值时，大部分圆圈位于其他圆圈下方并且无法看到。然而，当打开生成的 pdf 文件时，所有圆圈都被绘制出来，并且打开文件的时间在增加，即使可见圆圈的数量几乎相同。

是时候在 pdf-viewer 中打开图形了（不管是哪个）：

N=10000 > 5s (2.4MB)

N=20000 > 10s (4.8MB)

N=40000 > 20s (9.5MB)

时间和文件大小的线性增加，正如增加圈数时所预期的那样。

有谁知道如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T13:49:24.700

我认为您应该将绘图保存为光栅图像，然后将其嵌入到 pdf 中（`cairo`模块效果很好）。

以我的经验，大多数人不会在 PDF 中放大太多，以便在矢量和图像之间产生差异。此外，您的矢量素材足够重，可以证明在不增加文件大小的情况下使用更高 DPI 图像是合理的。

此外，一个好的提示是使用`ms`(markersize) 和`mew`(marker edge width) 以及`alpha`关键字参数绘制没有边框的透明圆圈。视觉效果令人惊叹。代替

```
plt.scatter(x, y) 
```

你可以做

```
plt.plot(x, y, 'o', ms=3, mew=0, alpha=0.3) 
```

试试看！

希望这可以帮助！

# c# - Linq to SQL 数据的回发显示问题

> ID：13178295
> 
> 赞同：1
> 
> 时间：2012-11-01T13:40:05.403
> 
> 标签：c#, linq-to-sql, postback, hidden-field

我目前正在尝试做的事情有一些问题：

1.  收集客户记录的 Linq-to-SQL (DBML) 返回匿名类型？这使我无法调用一个方法，在该方法中我可以通过将查询结果作为参数传递来声明页面元素初始化一次。
2.  我正在尝试为页面提供下一个/上一个按钮，这将通过存储相关的 ID 字段来增加/减少当前记录。这然后回发并根据回发时按下的按钮显示下一个或上一个记录（我知道 Page_Load 将始终在按钮单击之前首先调用，只是不确定我将如何处理这个。）

到目前为止的后端代码：

```
DataClassesDataContext db;
string aspControlNotation = "ctl00$ContentPlaceHolder1$";

protected void Page_Load(object sender, EventArgs e)
{
    db = new DataClassesDataContext((string)Session["Conn"]);

    int nID = 0; //Initialise variable
    string hnIDPostedVal = "";

    #region If the user has not directly navigated to the page
    if (!IsPostBack)
    {
        var queryIDInitialise = (from r in db.tblQuoteLogs
                                 orderby r.LogDate descending
                                 select new
                                 {
                                     #region Selected Fields
                                     r.nID,
                                     r.LogDate
                                     #endregion
                                 }).First();

        hnID.Value = queryIDInitialise.nID.ToString();
        nID = Convert.ToInt32(hnID.Value);

        var query1 = (from r in db.tblQuoteLogs
                      where r.nID == nID
                      join emp in db.tblEmployees on r.QuotedBy equals emp.ID into r1
                      join cus in db.tblCustomers on r.luLocation equals cus.ID into r2
                      join qfr in db.tblQuoteFailReasons on r.ReasonForLost equals qfr.ID into r3
                      from x in r1.DefaultIfEmpty()
                      from y in r2.DefaultIfEmpty()
                      from z in r3.DefaultIfEmpty()
                      orderby r.LogDate descending
                      select new
                      {
                          nID = r.nID,
                          Quote_Reference = r.Quote_Reference,
                          Validity = r.Validity,
                          TMF = r.TMF,
                          QuotedBy = r.QuotedBy,
                          EnteredBy = r.EnteredBy,
                          LogDate = r.LogDate,
                          luCustomer = r.luCustomer,
                          luLocation = r.luLocation,
                          txtContact = r.txtContact,
                          txtTelephone = r.txtTelephone,
                          POO = r.POO,
                          POL = r.POL,
                          POD = r.POD,
                          FPOD = r.FPOD,
                          txtEquipmentType = r.txtEquipmentType,
                          txtCommodity = r.txtCommodity,
                          NamedAcct = r.NamedAcct,
                          Cross_Trade = r.Cross_Trade,
                          Haz = r.Haz,
                          Break_Bulk = r.Break_Bulk,
                          Reefer = r.Reefer,
                          txtTargetTEU = r.txtTargetTEU,
                          Frequency = r.Frequency,
                          FollowUpDueDate = r.FollowUpDueDate,
                          UKSalesComments = r.UKSalesComments,
                          Secured = r.Secured,
                          Lost = r.Lost,
                          txtLostQuoteReasons = z.txtLostQuoteReasons,
                          dateOfFollowUp = r.dateOfFollowUp,
                          txtSalesPerson = x.txtSalesPerson, //Gets ID from the QuotedBy column to get the particular sales person name
                          txtLocation = y.txtLocation //Gets ID from the luLocation column to get the particular location
                      }).First();

        //Initialise Page Elements (With Checks for null fields)
        txtQuoteRef.Text = (!String.IsNullOrEmpty(query1.Quote_Reference)) ? query1.Quote_Reference : "No Data";
        txtValidity.Text = (query1.Validity != null) ? query1.Validity.ToString() : "No Date";

        lblEnteredByVal.Text = (!String.IsNullOrEmpty(query1.EnteredBy)) ? query1.EnteredBy : "No Data";
        lblLogDateVal.Text = (query1.LogDate != null) ? query1.LogDate.ToString() : "No Date";

        txtCustomer.Text = (!String.IsNullOrEmpty(query1.luCustomer)) ? query1.luCustomer : "No Data";
        txtLocation.Text = (!String.IsNullOrEmpty(query1.txtLocation)) ? query1.txtLocation : "No Data"; //BUGGY DUE TO NULL ENTRIES

        txtContact.Text = (!String.IsNullOrEmpty(query1.txtContact)) ? query1.txtContact : "No Data";
        txtTelephone.Text = (!String.IsNullOrEmpty(query1.txtTelephone)) ? query1.txtTelephone : "No Data";
        txtPOO.Text = (!String.IsNullOrEmpty(query1.POO)) ? query1.POO : "No Data";
        txtPOL.Text = (!String.IsNullOrEmpty(query1.POL)) ? query1.POL : "No Data";
        txtPOD.Text = (!String.IsNullOrEmpty(query1.POD)) ? query1.POD : "No Data";
        txtFPOD.Text = (!String.IsNullOrEmpty(query1.FPOD)) ? query1.FPOD : "No Data";

        txtEquipmentType.Text = (!String.IsNullOrEmpty(query1.txtEquipmentType)) ? query1.txtEquipmentType : "No Data";
        txtCommodity.Text = (!String.IsNullOrEmpty(query1.txtCommodity)) ? query1.txtCommodity : "No Data";
        txtNamedAccount.Text = (!String.IsNullOrEmpty(query1.NamedAcct)) ? query1.NamedAcct : "No Data";

        chkCrossTrade.Checked = (query1.Cross_Trade != null) ? query1.Cross_Trade.Value : false;
        chkHaz.Checked = (query1.Haz != null) ? query1.Haz.Value : false;
        chkBreakBulk.Checked = (query1.Break_Bulk != null) ? query1.Break_Bulk.Value : false;
        chkReefer.Checked = (query1.Reefer != null) ? query1.Reefer.Value : false;

        txtTargetTEU.Text = (!String.IsNullOrEmpty(query1.txtTargetTEU)) ? query1.txtTargetTEU : "No Data";
        txtFrequency.Text = (!String.IsNullOrEmpty(query1.Frequency)) ? query1.Frequency : "No Data";

        txtFollowUpTarget.Text = (query1.FollowUpDueDate != null) ? query1.FollowUpDueDate.ToString() : "No Date";
        txtUKSalesComments.Text = (!String.IsNullOrEmpty(query1.UKSalesComments)) ? query1.UKSalesComments : "";
        chkSecured.Checked = (query1.Secured != null) ? query1.Secured.Value : false;
        chkLost.Checked = (query1.Lost != null) ? query1.Lost.Value : false;
        txtReasonForLost.Text = (!String.IsNullOrEmpty(query1.txtLostQuoteReasons)) ? query1.txtLostQuoteReasons : "";

        #region Get current users' login name and strip it down
        string loggedUName = WindowsIdentity.GetCurrent().Name.ToString();
        lblFollowedUpByVal.Text = loggedUName.Substring(loggedUName.IndexOf('\\') + 1);
        #endregion

        lblFollowedUpDateVal.Text = (query1.dateOfFollowUp != null) ? query1.dateOfFollowUp.ToString() : "No Date";
        #endregion

        #region Drop down box initilisations
        #region TMFddl
        string[] ddlTMFValues = new string[] { "", "Target", "Maintenance", "Fishing", "Unqualified", "NOT COMPLETE" };
        foreach (string val in ddlTMFValues)
        {
            ddlTMF.Items.Add(val);
        }

        ddlTMF.SelectedValue = query1.TMF.ToString();
        #endregion

        #region Quoted By ddl
        #region ddlQuotedByQuery
        var ddlQuotedByQuery = (from r in db.tblEmployees
                                where !r.txtSalesPerson.ToUpper().Contains("(")
                                select new
                                {
                                    r.ID,
                                    r.txtSalesPerson
                                }).Distinct().ToList();
        #endregion

        #region DDL Value Assignment
        ddlQuotedBy.DataSource = ddlQuotedByQuery;
        ddlQuotedBy.DataTextField = "txtSalesPerson";
        ddlQuotedBy.DataValueField = "ID";
        ddlQuotedBy.DataBind();
        ddlQuotedBy.SelectedValue = query1.QuotedBy.ToString();
        #endregion
        #endregion
        //ddlCustomer
        //ddlLocation
        #endregion
    }
    else
    {
        NameValueCollection nvc = Request.Form;
        hnIDPostedVal = nvc[aspControlNotation + "hnID"];
        nID = Convert.ToInt32(hnIDPostedVal);

        var query1 = (from r in db.tblQuoteLogs
                         where (r.nID == nID)
                         join emp in db.tblEmployees on r.QuotedBy equals emp.ID into r1
                         join cus in db.tblCustomers on r.luLocation equals cus.ID into r2
                         join qfr in db.tblQuoteFailReasons on r.ReasonForLost equals qfr.ID into r3
                         from x in r1.DefaultIfEmpty()
                         from y in r2.DefaultIfEmpty()
                         from z in r3.DefaultIfEmpty()
                         orderby r.LogDate descending
                         select new
                         {
                             #region Selected Fields
                             nID = r.nID,
                             Quote_Reference = r.Quote_Reference,
                             Validity = r.Validity,
                             TMF = r.TMF,
                             QuotedBy = r.QuotedBy,
                             EnteredBy = r.EnteredBy,
                             LogDate = r.LogDate,
                             luCustomer = r.luCustomer,
                             luLocation = r.luLocation,
                             txtContact = r.txtContact,
                             txtTelephone = r.txtTelephone,
                             POO = r.POO,
                             POL = r.POL,
                             POD = r.POD,
                             FPOD = r.FPOD,
                             txtEquipmentType = r.txtEquipmentType,
                             txtCommodity = r.txtCommodity,
                             NamedAcct = r.NamedAcct,
                             Cross_Trade = r.Cross_Trade,
                             Haz = r.Haz,
                             Break_Bulk = r.Break_Bulk,
                             Reefer = r.Reefer,
                             txtTargetTEU = r.txtTargetTEU,
                             Frequency = r.Frequency,
                             FollowUpDueDate = r.FollowUpDueDate,
                             UKSalesComments = r.UKSalesComments,
                             Secured = r.Secured,
                             Lost = r.Lost,
                             txtLostQuoteReasons = z.txtLostQuoteReasons,
                             dateOfFollowUp = r.dateOfFollowUp,
                             txtSalesPerson = x.txtSalesPerson, //Gets ID from the QuotedBy column to get the particular sales person name
                             txtLocation = y.txtLocation //Gets ID from the luLocation column to get the particular location
                             #endregion
                         }).First();
        //pageInitialisation(query1); //THIS IS WHERE I WAS GOING TO PASS THE QUERY FOR PAGE ELEMENT INITIALISATION BUT ANONYMOUS TYPE ERROR STOPS ME

        #region Initialise Page Elements (With Checks for null fields)
        txtQuoteRef.Text = (!String.IsNullOrEmpty(query1.Quote_Reference)) ? query1.Quote_Reference : "No Data";
        txtValidity.Text = (query1.Validity != null) ? query1.Validity.ToString() : "No Date";

        //txtTMF.Text = (!String.IsNullOrEmpty(query1.TMF)) ? query1.TMF: "No Data";
        //txtQuotedBy.Text = (!String.IsNullOrEmpty(query1.txtSalesPerson)) ? query1.txtSalesPerson : "No Data"; //BUGGY DUE TO NULL ENTRIES

        lblEnteredByVal.Text = (!String.IsNullOrEmpty(query1.EnteredBy)) ? query1.EnteredBy : "No Data";
        lblLogDateVal.Text = (query1.LogDate != null) ? query1.LogDate.ToString() : "No Date";

        txtCustomer.Text = (!String.IsNullOrEmpty(query1.luCustomer)) ? query1.luCustomer : "No Data";
        txtLocation.Text = (!String.IsNullOrEmpty(query1.txtLocation)) ? query1.txtLocation : "No Data"; //BUGGY DUE TO NULL ENTRIES

        txtContact.Text = (!String.IsNullOrEmpty(query1.txtContact)) ? query1.txtContact : "No Data";
        txtTelephone.Text = (!String.IsNullOrEmpty(query1.txtTelephone)) ? query1.txtTelephone : "No Data";
        txtPOO.Text = (!String.IsNullOrEmpty(query1.POO)) ? query1.POO : "No Data";
        txtPOL.Text = (!String.IsNullOrEmpty(query1.POL)) ? query1.POL : "No Data";
        txtPOD.Text = (!String.IsNullOrEmpty(query1.POD)) ? query1.POD : "No Data";
        txtFPOD.Text = (!String.IsNullOrEmpty(query1.FPOD)) ? query1.FPOD : "No Data";

        txtEquipmentType.Text = (!String.IsNullOrEmpty(query1.txtEquipmentType)) ? query1.txtEquipmentType : "No Data";
        txtCommodity.Text = (!String.IsNullOrEmpty(query1.txtCommodity)) ? query1.txtCommodity : "No Data";
        txtNamedAccount.Text = (!String.IsNullOrEmpty(query1.NamedAcct)) ? query1.NamedAcct : "No Data";

        chkCrossTrade.Checked = (query1.Cross_Trade != null) ? query1.Cross_Trade.Value : false;
        chkHaz.Checked = (query1.Haz != null) ? query1.Haz.Value : false;
        chkBreakBulk.Checked = (query1.Break_Bulk != null) ? query1.Break_Bulk.Value : false;
        chkReefer.Checked = (query1.Reefer != null) ? query1.Reefer.Value : false;

        txtTargetTEU.Text = (!String.IsNullOrEmpty(query1.txtTargetTEU)) ? query1.txtTargetTEU : "No Data";
        txtFrequency.Text = (!String.IsNullOrEmpty(query1.Frequency)) ? query1.Frequency : "No Data";

        txtFollowUpTarget.Text = (query1.FollowUpDueDate != null) ? query1.FollowUpDueDate.ToString() : "No Date";
        txtUKSalesComments.Text = (!String.IsNullOrEmpty(query1.UKSalesComments)) ? query1.UKSalesComments : "";
        chkSecured.Checked = (query1.Secured != null) ? query1.Secured.Value : false;
        chkLost.Checked = (query1.Lost != null) ? query1.Lost.Value : false;
        txtReasonForLost.Text = (!String.IsNullOrEmpty(query1.txtLostQuoteReasons)) ? query1.txtLostQuoteReasons : "";

        #region Get current users' login name and strip it down
        string loggedUName = WindowsIdentity.GetCurrent().Name.ToString();
        lblFollowedUpByVal.Text = loggedUName.Substring(loggedUName.IndexOf('\\') + 1);
        #endregion

        lblFollowedUpDateVal.Text = (query1.dateOfFollowUp != null) ? query1.dateOfFollowUp.ToString() : "No Date";
        #endregion

        #region Drop down box initilisations
        #region TMFddl
        string[] ddlTMFValues = new string[] { "", "Target", "Maintenance", "Fishing", "Unqualified", "NOT COMPLETE" };
        foreach (string val in ddlTMFValues)
        {
            ddlTMF.Items.Add(val);
        }

        ddlTMF.SelectedValue = query1.TMF.ToString();
        #endregion

        //ddlQuotedByQuery which populates drop down list
        var ddlQuotedByQuery = (from r in db.tblEmployees
                                where !r.txtSalesPerson.ToUpper().Contains("(")
                                select new
                                {
                                    r.ID,
                                    r.txtSalesPerson
                                }).Distinct().ToList();

        ddlQuotedBy.DataSource = ddlQuotedByQuery;
        ddlQuotedBy.DataTextField = "txtSalesPerson";
        ddlQuotedBy.DataValueField = "ID";
        ddlQuotedBy.DataBind();
        ddlQuotedBy.SelectedValue = query1.QuotedBy.ToString();
        #endregion
        #endregion
        //ddlCustomer
        //ddlLocation
        #endregion
    }
    #endregion
}

protected void btnNext_Click(object sender, EventArgs e)
{
    db = new DataClassesDataContext((string)Session["Conn"]);
    int nID = Convert.ToInt32(hnID.Value);

    //inverted to work correctly due to query ordering
    var queryNext = (from r in db.tblQuoteLogs
                     where r.nID < nID
                     orderby r.nID descending
                     select new
                     {
                         r.nID
                     });

    if (queryNext.Count() > 0)
    {
        hnID.Value = queryNext.Select(o => o.nID).First().ToString();
        Response.Redirect("~/QuoteInformation/Default.aspx");
    }
}

protected void btnPrevious_Click(object sender, EventArgs e)
{
    //db = new DataClassesDataContext((string)Session["Conn"]);
    //int nID = Convert.ToInt32(hnID.Value);

    ////inverted to work correctly due to query ordering
    //var queryPrevious = (from r in db.tblQuoteLogs
    //                     where r.nID > nID
    //                     orderby r.nID ascending
    //                     select new
    //                     {
    //                         r.nID
    //                     });

    //if (queryPrevious.Count() > 0)
    //{
    //    hnID.Value = queryPrevious.Select(o => o.nID).First().ToString();
    //    Response.Redirect("~/QuoteInformation/Default.aspx?nID=" + hnID.Value);
    //}
} 
```

很抱歉代码很不稳定：s，但我们将不胜感激:)。

# sql - linq 按多重聚合分组

> ID：13178298
> 
> 赞同：0
> 
> 时间：2012-11-01T13:40:19.403
> 
> 标签：sql, linq

我是 Linq 的新手，我确信我已经以一种复杂的方式解决了这个问题。我试图在 Linq 中做类似这样的 SQL：

`SELECT DISTINCT
   count(vendor) as vendorCount,
   reqDate,
   status,
   openDate,
   item,
   poDate,
   count(responseDate) as responseCount
FROM
   myTable
GROUP BY
   reqDate, status, openDate, item, poDate
HAVING
   reqDate > openDate`

这是我到目前为止所拥有的。

 `````
 var groupQuery = (from table in dt.AsEnumerable()
                         group table by new
                         {                                 
                             vendor = table["vendor"], reqdate = table.Field<DateTime>("ReqDate"), status = table["status"],
                             open = table["openDate"],  
                             item = table["item"), 
                             podate = table.Field<DateTime>("PODate"), responsedate =  table.Field<DateTime>("responseDate"), 
                         }
                             into groupedTable
                             where Having(groupedTable.Key.reqdate, groupedTable.Key.openDate) == 1
                             select new
                             {
                                 x = groupedTable.Key,  
                                 y = groupedTable.Count()
                             }).Distinct();

        foreach (var req in groupQuery)
        {
            Console.WriteLine("cols: {0} count: {1} ",
                req.x, req.y);
        } 
````  `Have() 是一个函数，它接受两个日期时间参数，如果 reqDate 大于 openDate，则返回 1。它编译并运行，但它显然没有给我想要的结果。这可能使用Linq吗？我想将此数据推送到 Excel 电子表格，因此我希望从此 linq 查询创建一个数据表。我最好从我的数据表中创建一个数据视图而不是弄乱 Linq 吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T15:06:12.790

SQL 代码仅按某些字段分组，而您的 LINQ 语句按所有字段分组，因此唯一可以分组的项目是重复项。如果您仅按 SQL 查询分组的字段进行分组，您应该得到正确的答案。你的`Having()`方法用词很好，但不是必需的，而且可读性较差。

```
var groupQuery = (from table in dt.AsEnumerable()
                 group table by new
                 {                                 
                     reqdate = table.Field<DateTime>("ReqDate"),
                     status = table["status"],
                     open = table["openDate"],  
                     item = table["item"), 
                     podate = table.Field<DateTime>("PODate")
                 }
                 into groupedTable
                 where groupedTable.Key.reqdate > groupedTable.Key.openDate
                 select new
                 {
                     x = groupedTable.Key,  
                     VenderCount = groupedTable.Select(t => t["vendor"])
                                               .Distinct()
                                               .Count(),
                     ResponseCount = groupedTable.Select(t => t.Field<DateTime>("responseDate"))
                                                 .Distinct()
                                                 .Count()
                 }).Distinct(); 
`````

# javascript - 预加载下一张图片 jQuery

> ID：13178306
> 
> 赞同：0
> 
> 时间：2012-11-01T13:40:44.533
> 
> 标签：javascript, jquery, slideshow, preloader

我正在使用嵌套的 li 创建幻灯片：

```
<ul id="ss_images_set">
                <li>
                    <img link="images/koala_1.jpg" />
                    <p class="img_caption">&#169;Copyright</p>
                    <p class="img_author">John Merriam</p>
                    <p class="img_href">http://www.twitter.com</p>
                    <p class="img_hashtag">JohnMerriam</p>
                </li> 
```

我每天都会将新图片上传到这个幻灯片中，所以集合中会有很多图片（数百张）。那里有太多的预加载器，以至于我对使用什么来仅加载下一个图像感到困惑。幻灯片有一个图像预加载器，但我认为它不能正常工作，因为下一个图像显然没有被缓存（幻灯片下面的内容在转到下一个图像时会上下跳跃）。

这是预加载器脚本：

```
function preload_images(){
var pre_image = curr_img - 1;
if(pre_image < 0) pre_image = (tot_elements-1);

var curr_obj = 0;

if(!$('#img_preloaded_'+pre_image).length > 0){
    curr_obj = slideshow[pre_image];
    $('body').append('<img src="'+curr_obj["img_url"]+'" id="img_preloaded_'+pre_image+'" class="preload_box" />');
}

var pre_image = curr_img + 1;
if(tot_elements==pre_image) pre_image = 0;
if(!$('#img_preloaded_'+pre_image).length > 0){
    curr_obj = slideshow[pre_image];
    $('body').append('<img src="'+curr_obj["img_url"]+'" id="img_preloaded_'+pre_image+'" class="preload_box" />');
} 
```

我不知道为什么它不缓存。是不是写错了？它在以下小提琴中的错误位置吗？

摆弄 JS：http: [//jsfiddle.net/doobada/9m9eq/](http://jsfiddle.net/doobada/9m9eq/)

当前前。幻灯片（下面的内容上下跳动）：[https ://www.assembla.com/code/cfrepo/subversion/node/blob/trunk/index.html#image=JohnMerriam](https://www.assembla.com/code/cfrepo/subversion/node/blob/trunk/index.html#image=JohnMerriam)

好的，jQuery 不是我的强项（现在正在学习 tuts+ 课程），但这不应该让我花 3 周的时间来弄清楚。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T13:45:46.987

```
var newImageUrl = 'someimage.png';

/* preload an image using jQuery: */
$('<img>').attr( {
    src: newImageUrl
} ).load(function() {
    /* image is loaded and could be used */
} ); 
```

# python - 使用 win32com.client.gencache.EnsureDispatch 时出现类型不匹配错误

> ID：13178308
> 
> 赞同：4
> 
> 时间：2012-11-01T13:40:44.650
> 
> 标签：python, com

我正在尝试使用 win32com 模块与专有应用程序的 COM 接口进行交互。我可以使用动态代理（win32com.client.Dispatch）连接到界面，这似乎可以工作。但是，如果我可以使用静态代理会很有用，尤其是因为它填充了 help() 页面。

我可以与动态代理正常交互：

```
>>> import win32com.client
>>> aqt = win32com.client.Dispatch("Aquator.Application")
>>> db = aqt.LoadDatabase(Folder=r"D:\Shared", Name="AquatorExcel.mdb")
>>> db.Name
u'D:\\Shared\\AquatorExcel.mdb'
>>> db.GetProjectList()
(1, (3,), (u'A simple model',)) 
```

但是当我使用使用 EnsureDispatch 或 makepy 脚本生成的静态代理时，我收到此错误：

```
>>> import win32com.client
>>> aqt = win32com.client.gencache.EnsureDispatch("Aquator.Application")
>>> db.Name
u'D:\\Shared\\AquatorExcel.mdb'
>>> db = aqt.LoadDatabase(Folder=r"D:\Shared", Name="AquatorExcel.mdb")
>>> db.GetProjectList()
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
  File "C:\Program Files\Pythonxy\Pythonxy 2.7\Python27\lib\site-packages\win32c
om\gen_py\AE9A7F2A-5DD7-4658-B55C-216CAD680889x0x4x3\_Database.py", line 70, in
GetProjectList
    , NameList)
  File "C:\Program Files\Pythonxy\Pythonxy 2.7\Python27\lib\site-packages\win32c
om\client\__init__.py", line 456, in _ApplyTypes_
    self._oleobj_.InvokeTypes(dispid, 0, wFlags, retType, argTypes, *args),
pywintypes.com_error: (-2147352571, 'Type mismatch.', None, 1) 
```

一般来说，我对 COM 还很陌生，所以我真的不知道从哪里开始。是什么导致了这个错误，我该如何避免它？

# php - PHP 无状态身份验证

> ID：13178316
> 
> 赞同：1
> 
> 时间：2012-11-01T13:41:07.337
> 
> 标签：php, security, authentication

我对 PHP 并不陌生，但对于身份验证，我一直使用会话。现在我想做无状态身份验证，所以我不能使用会话，因为可能有很多服务器实例，它们不会共享会话数据，所以我认为我的数据库上有一个会话表，然后做以下：

*   在客户端机器中存储一个带有令牌的 cookie
*   在会话表中有一个*令牌*列，类似于 GUID，因此客户端可以访问具有相同令牌的所有条目
*   还要存储客户端的ip，所以相同token不同IP的人是无法读取数据的

像这样的东西

```
id   | token        | ip         | key       | data
1    | a-guid       | 190.0.0.1  | username  | encrypted-data
2    | a-guid       | 190.0.0.1  | is_logged | more-encrypted-data 
3    | other-guid   | 190.2.2.2  | is_logged | some-more-data 
```

因此，具有令牌 a-guid 和 ip 190.0.0.1 的 cookie 的用户可以访问*用户名*和 *is_logged*

但我不确定安全性，如果有人能以某种方式从您的 cookie 和您的 ip 中获取您的令牌，并且他/她可以使用您的 cookie 令牌和您的 ip 发送请求，它将完全访问您的帐户。

我应该有一些特殊的考虑吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-01T14:56:10.137

您似乎对许多人的会话机制有同样的误解。尽管有一些 PHP 能够跟踪会话的机制，但最典型的会话跟踪方式已经与您提出的机制完全相同，即：使用带有一些唯一令牌的普通旧常规 cookie。

PHP会话使用cookie的方式与通常使用cookie的方式不同的是，会话[不会在cookie上设置任何到期日期](http://en.wikipedia.org/wiki/HTTP_cookie#Session_cookie)（因此导致浏览器通常在您关闭浏览器时丢弃它们），并且（这就是您提出的方法对应的地方）仅使用会话 ID（类似于您提出的令牌）作为其数据填充 cookie。

那么，这将把我们留在哪里？好吧，一方面...您的安全问题（拦截您提出的令牌）也与常规会话相关（拦截会话 ID）。如果您想避免这种安全问题，您必须开始使用安全传输（使用 SSL/TLS 的[HTTPS ）。](http://en.wikipedia.org/wiki/HTTPS)

就使用中央会话表而言，正如您所建议的那样……这确实是一条常见的路线。你知道什么？PHP 已经有一种机制可以通过常规会话“轻松”解决这个问题，即[`session_set_save_handler()`](http://php.net/manual/en/function.session-set-save-handler.php).

此函数允许您注册函数（或自 5.4 起具有 interface 的对象`SessionHandlerInterface`）读取和写入您认为合适的任何持久存储。这也可能意味着您的数据库中有一些会话表。请注意，尽管编写这些函数/方法可能很棘手。但是您可能可以在 Web 和/或 Stack Overflow 上找到很好的示例。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-01T13:51:50.403

如果您在他们进行身份验证时创建一个随机字符串，将其保存在会话的数据库中并使用它来加密上述信息怎么办？任何获得令牌的服务器都可以使用存储的秘密来解密会话，但它不能被第三方伪造。

您将保存在 cookie 中的所有内容都是加密数据加上一些用于查找机密的值。

# ruby - 无法使用 Ruby 发送终端命令

> ID：13178322
> 
> 赞同：1
> 
> 时间：2012-11-01T13:41:13.813
> 
> 标签：ruby, environment-variables, watir

我需要知道如何通过 Ruby 发送终端命令来执行另一个应用程序。我想在我的 Watir 脚本中的某个点调用 SIKULI 脚本来处理 Watir 无法处理的一些步骤。

我不知道该怎么做。我在 Stack Overflow 上阅读了一些文章，但无法让它发挥作用。

这些是手动执行它的步骤：

```
jfleck-mbp:~ joe.fleck$ SIKULI_HOME=/Applications/Sikuli-IDE.app/Contents/Resources/Java
jfleck-mbp:~ joe.fleck$ java -jar $SIKULI_HOME/sikuli-script.jar '/Users/joe.fleck/Desktop/Save_File_Button.sikuli' 
```

这些在我试图执行的 Ruby 文件中：

```
require 'rubygems'
system('SIKULI_HOME=/Applications/Sikuli-IDE.app/Contents/Resources/Java')
system ("java -jar $SIKULI_HOME/sikuli-script.jar '/Users/joe.fleck/Desktop/Save_File_Button.sikuli'") 
```

我得到的输出是：

```
Unable to access jarfile /sikuli-script.jar 
```

这告诉我脚本中的第一行没有执行允许访问。

任何建议，将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-01T13:48:24.743

我*认为*`system()`每个命令都会得到不同的外壳。

一种简单的验证方法和一种更易于维护的方法，恕我直言，将所有命令放在一个（bash/zsh/whatever）脚本中并*使用*`system()`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-01T13:53:12.780

像这样修复它：

```
ENV['SIKULI_HOME'] = '/Applications/Sikuli-IDE.app/Contents/Resources/Java'
system ("java -jar $SIKULI_HOME/sikuli-script.jar '/Users/joe.fleck/Desktop/Save_File_Button.sikuli'") 
```

问题是，当您调用 时`system`，您正在调用一个子进程。子进程从父进程（在本例中为您的 Ruby 脚本）继承环境。使用`system`设置环境变量仅为该子进程设置它，下一次调用系统是具有新环境的新子进程。

上面显示的解决方案在父进程中设置环境变量，因此它将为所有子进程设置。

# java - JSONSerializer 无法解析对象内的空值

> ID：13178325
> 
> 赞同：1
> 
> 时间：2012-11-01T13:41:18.903
> 
> 标签：java, json, jpa

我正在使用 net.sf.json 从对象列表中创建一个 json 字符串。

这是我的代码：

```
List<MyObject> results = em.createNamedQuery("MyObject.findAll").getResultList(); 
String gridRecords = JSONSerializer.toJSON(results).toString(); 
```

我的问题是当对象内的一个字段为空时（即使该字段允许为空）。我得到这个例外：

```
net.sf.json.JSONException: java.lang.reflect.InvocationTargetException 
```

我做错了吗？当这些对象中的某些字段为空时，如何从对象列表中获取 json 对象？

提前致谢。

# javascript - javascript表单验证没有做任何事情

> ID：13178326
> 
> 赞同：0
> 
> 时间：2012-11-01T13:41:21.407
> 
> 标签：javascript, html, forms, validation

我试图确保输入字段的内容在允许的字符数内，如果它没有在输入字段后打印出错误消息。波纹管js包含在外部js文件中。

```
 function validateForm()
    {
        var err_msg = getElementById('feedback_msg_first_name').value;
        var first_name = getElementById('first_name').value;
        if(first_name.length < 2)
        {
            err_msg.innerHTML = 'first name cannot contain less than 2 characters';
            return false;
        }
        if(first_name.length > 20)
        {
            err_msg.innerHTML = 'first name cannot contain more than 20 characters';
            err_msg.style.color = 'red';
        }
    } 
```

基本标记

```
<script type="text/javascript" language="javascript" src="client_form_val.js"></script>
</head>
<body>
<form id="register"  name="register" action="includes/register.inc.php" method="post" onsubmit ="return validateForm();">
    <label class="label">First Name:</label>        <input type="text" name="first_name" id="first_name" /><br />
    <span id="feedback_msg_first_name"></span> 
```

表单只是提交而没有任何事情发生。我哪里错了？任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T13:49:30.140

当 keyup 事件以形式触发时，您正在调用该函数。因此，当用户在输入单个字符后开始输入他/她的名字时，这将显示错误消息。

不要在触发 keyup 事件时调用该函数，而是在发生某些按钮单击时调用该函数（当输入整个名字时）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T13:49:57.733

您忘记执行 document.getElementById。Firebug 给出了错误

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-01T13:51:23.817

得到错误：

```
Uncaught ReferenceError: getElementById is not defined 
```

当你修复丢失的文件时，你会得到这个

```
Uncaught TypeError: Cannot set property 'innerHTML' of undefined 
```

第二个原因是这个

```
var err_msg = getElementById('feedback_msg_first_name').value;  <-- string
err_msg.innerHTML = 'first name cannot contain less than 2 characters';  <--performing innerHTML on string 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-01T13:52:03.807

试试这个

```
 function validateForm()
{
    var err_msg = document.getElementById('feedback_msg_first_name');
    var first_name = document.getElementById('first_name').value;
    if(first_name.length < 2)
    {
        err_msg.innerHTML = 'first name cannot contain less than 2 characters';
        return false;
    }
    if(first_name.length > 20)
    {
        err_msg.innerHTML = 'first name cannot contain more than 20 characters';
        err_msg.style.color = 'red';
    }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-01T13:52:05.267

看看下面的[http://jsfiddle.net/VL7dc/2/](http://jsfiddle.net/VL7dc/2/)

与其解释你哪里出了问题，不如认为你需要尝试并理解为什么这行得通，而你的行不通。

```
 function validateForm() {
        var err_msg = document.getElementById('feedback_msg_first_name');
        var first_name = document.getElementById('first_name').value;

        if(first_name.length < 2) {
            err_msg.innerHTML = 'first name cannot contain less than 2 characters';
            return false;
        } else {
            err_msg.innerHTML = '';
        }
        if(first_name.length > 20)
        {
            err_msg.innerHTML = 'first name cannot contain more than 20 characters';
            err_msg.style.color = 'red';
        }
    } 
```

# c# - 使用 sqldatareader 从另一个线程逐行填充 DataGridView

> ID：13178330
> 
> 赞同：0
> 
> 时间：2012-11-01T13:41:31.550
> 
> 标签：c#, sql-server

我正在尝试执行一些需要很长时间并返回很多行的 SQL 查询，这就是我使用 SqlDataReader 来返回行的原因。

我在单独的线程中执行查询，因此在返回行时 UI 将可用。

我还有一个数据表，我用SqlDataReader 填充，DataTable 绑定到BindingSource，BindingSource 绑定到DataGridView。

问题是DataGridView似乎无法将DataTable的列绑定到DataGridView中的Columns，网格中的所有单元格都显示为空白。即使使用 AutoGenerateColumns=true，也不会显示数据！

以下是与我的问题非常相似的示例代码：

```
public partial class Form2 : Form
{
    BindingSource binding;
    DataTable dt = new DataTable();
    DataGridView dgv;

    public Form2()
    {
        InitializeComponent();

        binding = new BindingSource();
        binding.DataSource = dt;

        dgv = new DataGridView();
        dgv.Columns.Add("Column1", "Column1");
        dgv.Columns[0].DataPropertyName = "Column1";
        dgv.AutoGenerateColumns = false;
        dgv.DataSource = binding;
        dgv.Click += new EventHandler(dgv_Click);
        this.Controls.Add(dgv);

        dostuff();  // ON FIRST TRY 5 ROWS SHOWN
    }

    void dgv_Click(object sender, EventArgs e)
    {
        dostuff();  // ON SECOND RUN EVERYTHING IS CLEARED!
    }

    void dostuff()
    {            
        dgv.DataSource = null;
        dt.Rows.Clear();
        dt.Columns.Clear();
        dgv.DataSource = binding;

        BackgroundWorker bgw = new BackgroundWorker();
        bgw.DoWork += new DoWorkEventHandler(bgw_DoWork);
        bgw.RunWorkerAsync();

    }

    void bgw_DoWork(object sender, DoWorkEventArgs e)
    {
        dt.Rows.Clear();
        dt.Columns.Clear();

        dt.Columns.Add("Column1");

        for (int i = 0; i < 5; i++)
        {
            DataRow r = dt.NewRow();
            r[0] = i;
            dt.Rows.Add(r);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T09:30:23.263

`DataGridView`方法结束时需要刷新，因为方法必须在UI线程上运行，所以`bgw_DoWork`需要使用。这是修改后的方法：`Invoke``Refresh``bgw_DoWork`

```
void bgw_DoWork(object sender, DoWorkEventArgs e)
{
    dt.Rows.Clear();
    dt.Columns.Clear();

    dt.Columns.Add("Column1");

    for (int i = 0; i < 5; i++)
    {
        DataRow r = dt.NewRow();
        r[0] = i;
        dt.Rows.Add(r);
    }

    dgv.Invoke((MethodInvoker) delegate() { dgv.Refresh(); });
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T13:53:56.650

您可以在 中创建列，`DataGridView`并将每个`DataGridViewColumn`'s设置`DataPropertyName`为 中相应列的名称`DataTable`。如此处所示：http: [//msdn.microsoft.com/en-us/library/system.windows.forms.datagridviewcolumn.datapropertyname.aspx](http://msdn.microsoft.com/en-us/library/system.windows.forms.datagridviewcolumn.datapropertyname.aspx)

# vb.net - 如何在 VB.NET 中管理多个表单

> ID：13178331
> 
> 赞同：0
> 
> 时间：2012-11-01T13:41:33.000
> 
> 标签：vb.net, forms

我在 vb.net 中有五种形式。

```
 1\. Welcome Form
  2\. Home Form
  3\. LogIn Form
  4\. Work1 Form
  5\. Work2 Form 
```

还有一个枚举：

```
 Public Enum OpenForm
      F_WORK1=1
      F_WORK2=2
  End Enum 
```

我在模块中声明了它的所有对象：

```
 Public frmHome As Home
  Public frmLogin As LogIn
  Public frmWork1 As Work1
  Public frmWork2 As Work2 
```

然后，当欢迎表单加载时：

```
 Me.Hide()
 frmHome = New Home
 frmHome.show() 
```

在 Home Form 中，有两个按钮。还有 Home Form，我没有关闭它。我一直打开它，直到应用程序关闭。

1.  第一个按钮，用于打开 Work1 表单。当用户点击它时，它将打开登录表单，用户必须输入用户名和密码：

    > frmLogin = 新登录（OpenForm.F_WORK1）
    > 
    > frmLogin.showDialog()

2.  第二个按钮，用于打开 Work2 表单。当用户点击它时，它将打开登录表单，用户必须输入用户名和密码：

    > frmLogin = 新登录（OpenForm.F_WORK2）
    > 
    > frmLogin.showDialog()

在登录表单中，有一个名为 btnLogin 的按钮。这是登录表单代码：

```
 Private frm As OpenForm 

 Public Sub New(f as OpenForm)
    InitailizeComponent()
    frm = f
 End Sub 
```

当用户单击 btnLogin 时：

```
 If frm=OpenForm.F_WORK1 Then
    frmWork1 = New Work1()
    frmWork1.showDialog(frmHome)
    frmLogin.Close()
 ElseIf frm=OpenForm.F_WORK2 Then
    frmWork2 = New Work2()
    frmWork2.showDialog(frmHome)
    frmLogin.Close()
 End If 
```

然后 Work1 或 Wor2 表单打开。但是登录表单没有关闭。

* * *

问题：

1.  我想在用户单击 btnLogin 后关闭登录表单并打开 Work1 或 Work2 表单。
2.  当用户最小化 Work1 或 Work2 表单时，我希望 Home Form 也最小化。当用户鼠标移动任务栏时，我希望它预览我打开的表单。
3.  每个表单（Home Form、Work1 Form 和 Work2 Form）都包含很多控件，这些控件使我的用户界面非常缓慢且不流畅。所以我希望它先加载它的包含，然后再看到表单。

感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T13:47:48.243

您的主页表单知道登录成功后打开的正确表单是什么。
让它决定打开哪个表格

在第一个按钮

```
frmLogin = New LogIn()
if DialogResult.OK = frmLogin.showDialog() then
    frmWork1 = New Work1()
    frmWork1.showDialog(frmHome)
end if 
```

在第二个按钮

```
frmLogin = New LogIn()
if DialogResult.OK = frmLogin.showDialog() then
    frmWork2 = New Work2()
    frmWork2.showDialog(frmHome)
end if 
```

您的实际代码不起作用，因为 ShowDialog 停止执行后续代码，直到 ShowDialog 打开的表单关闭。它被称为模态形式。

忘了说将 btnLogin 的 DialogResult 属性设置为 DialogResult.OK。
这将告诉框架在用户按下该按钮时自动关闭您的登录表单。
相反，如果用户验证失败，请将 frmLogin.DialogResult 属性设置为 DialogResult.None 以阻止自动关闭表单。

对于第二个问题，它应该已经以这种方式工作了。当您调用 ShowDialog 方法并传递所有者表单时，这两个表单被绑定在一起，最小化 fmrWork1/2 也应该最小化 frmHome。除非您将表单 ShowInTaskbar 属性设置为 false，否则任务栏中的可视化是自动的。

第三个问题很难回答。一种可能的解决方案是使用选项卡控件将输入控件划分为选项卡页。每个页面都应包含一个用户控件，该控件具有该页面的适当输入。除了第一个页面之外的每个页面都将留空，并且只有当用户更改所选页面时，您才会加载相应的用户控件。正如您所看到的，这是一个非常复杂的主题，如果您不进行一些研究，就无法完全解释。

# java - 编译和运行时类

> ID：13178334
> 
> 赞同：0
> 
> 时间：2012-11-01T13:41:41.593
> 
> 标签：java

让我们想象一下我有一个名为的类`Person`，它是另一个类的泛化`Man`。如果我要制作这个类的几个实例

```
Man man = new Man();
Person person = new Man(); 
```

现在，从变量引用的实例的编译时类`man`是`Man`，person 的编译时类是`Person`，而两个实例的运行时类是`Man`。到目前为止，我完全使用该术语，因为在运行时创建的实例都是 class `Man`。但是，如果我按如下方式将 man 实例投射到哪里

```
Person personMan = (Person) man; 
```

为什么运行时类型`personMan`仍然是Man？实例的运行时类是否仅在创建新实例时设置？另外，有没有办法在运行时实际获取变量的编译时间类，所以我可以查询 personMan 是什么类型的类（getClass 会返回`Man`）。

编辑：“类的编译时类”是一个错误（并且没有多大意义）。我的意思是可变的（因此他们质疑 personMan 是什么类型的类:)）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-01T13:45:30.297

在这里区分三个不同的概念很重要：

*   *变量*( `man`, `person`)
*   *引用*（变量的值）
*   *对象*（引用的内存块，嗯，引用）

对象的类型在创建后永远不会改变。将引用转换为不同类型*只会*影响该表达式的编译时类型。引用类型转换表达式的结果始终与原始引用相同 - 它仍然引用同一个对象，该对象仍然具有相同的类型。（这将拳击放在一边——当然演员可能在执行时失败，导致异常。）

> 另外，有没有办法在运行时实际获取类的编译时类

如果您的意思是变量的编译时类型-不是局部变量，而无需真正深入检查字节码。如果它是一个*领域*，您可以使用反射来获得它。你为什么想知道？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-01T13:48:02.657

运行时类型是新的类型。new Man() 始终是 Man，无论您存储它的变量的类型如何。

编译类型是声明变量的类型。

在你的例子中

```
Person personMan = (Person) man; 
```

您只能使用 personMan 的方法和属性进行编码。你也可以做

```
((Man)personMan).someManMethod(); 
```

但是如果 personMap 没有存储 Man 的实例，这可能会导致错误。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-01T13:48:12.590

在 Java 中，变量（除了原语）只是对对象的引用。对象本身存在于其他地方，永远无法直接访问。

在每种情况下，您都有一个`Man`对象位于某处，并且不同的引用只是提供对该`Man`对象功能的不同子集的访问。

# vim - 是否可以根据文件类型在 .vimrc 或其他地方指定 vim 服务器名？

> ID：13178335
> 
> 赞同：3
> 
> 时间：2012-11-01T13:41:41.910
> 
> 标签：vim, file-type, server-name

我必须输入

```
gvim --servername xdvi toto.tex 
```

启用从 xdvi 到 Latex 的反向搜索。

有没有办法将其封装在`.vimrc`：当 vim 检测到 .tex 文件时，autocmd 将 servername 设置为 vimrc ？一旦启动vim似乎为时已晚，或者？

如果不在`.vimrc`，在哪里？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-01T14:19:02.233

The special `v:servername` variable is read-only; you cannot change it from within Vim. If you need a certain servername, that has to be specified on startup via the `--servername` argument.

To avoid the additional typing, I would suggest a special shell alias (on Unix) or small batch wrapper (on Windows). Depending on how crucial this is, you could even add some scripting logic to check for `.tex` arguments, and only then set the servername.

The only way to achieve this from within Vim would be forking a new instance of Vim (via `system()`), passing all arguments plus the servername argument, and then closing the original Vim instance via `:quit`. But that's very cumbersome and not as simple to implement.

# php - 点击浏览器后退按钮时哪种解决方案最好

> ID：13178337
> 
> 赞同：3
> 
> 时间：2012-11-01T13:41:49.050
> 
> 标签：php, javascript, jquery, ajax, browser

我有一个应用程序，我遇到的问题是后退浏览器按钮，如果用户单击后退浏览器，那么它会在应用程序中搞砸。

所以我想做两件事：

解决方案 1：我找到了一个站点，其中显示了用于禁用所有浏览器上的后退按钮的 javascript 代码。显然，您需要启用 javascript 才能工作，但如果没有 javascript，我的应用程序将无法正常工作，所以这不会成为问题（我在应用程序的每个页面中都包含一个警告，说明必须启用 javascript 才能使用应用程序）

解决方案 2：如果用户在任何时候确实点击了后退按钮，那么它会将用户导航到 safety.php 页面，在该页面上它会通知用户他们不能使用浏览器的后退按钮，然后它将销毁所有会话，以便用户注销。如果他们想再次使用该应用程序，则必须再次登录并从头开始使用该应用程序。

我的问题是，在这两种解决方案中，哪一种更好用？我的应用程序是老师创建在线评估，创建评估详细信息（开始时间/持续时间等）并为每个评估创建问题和答案（可以是单个或多个评估）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T13:50:38.200

禁用后退按钮通常是较差的可用性实践。您最好的选择是操纵历史对象（如果您不熟悉这些方法，请搜索 pushState），以便点击后退按钮会将它们返回到您体验之外的页面，或者您正在完成“解决方案 2”，但是在他们实际离开页面之前警告他们他们将离开“登录”部分，以便他们可以选择留下，使用`confirm()`或自定义弹出窗口。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T14:03:31.607

首先使用 javascript 来防止将位置添加到历史列表中。捕获正确链接的**onclick**事件，并`document.location.replace("next_page.html");` 以这种方式使用，当用户单击后退按钮时，他会离开您的网站，而不是返回并弄乱您的应用程序。

另外：可以捕捉到用户按下返回键的页面的**卸载**事件，以便确认用户退出。

# asp.net-mvc-3 - 用 Knockout.js 中的按钮动态绑定数据？

> ID：13178340
> 
> 赞同：1
> 
> 时间：2012-11-01T13:41:54.107
> 
> 标签：asp.net-mvc-3, html, knockout.js

我将 MVC3 与 Knockout.js 一起使用，并希望在模板中使用 data-bind=addContribute 将一些数据从 api 附加到我的按钮。此按钮应打开一个弹出框，我需要该弹出框上的附加按钮数据。我怎样才能做到这一点？

我的模板：

```
<div>
        <ul data-bind="template: {name: 'membersTemplate', foreach: viewModel.membersList}">
        </ul>
</div>

<script id="membersTemplate" type="text/html">
    <li>
        <div class="fl width165">
            <img src=" ${ image } " width="33" height="34" />
            <span> ${ memberName } </span>
            ${ memberType }
        </div>
        <aside class="fr margint10">
            <label> ${ contributions } </label>
            <a href="#" class="sprite-add_img" id="openContribute" title="Add Contributes to Goals" data-bind="click: viewModel.addContribute" ></a>
        </aside>
    </li>
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T20:24:42.247

```
<script id="membersTemplate" type="text/html">
    <li>
        <div class="fl width165">
            <img data-bind="attr : {src : img}" width="33" height="34" />
            <span data-bind="text : memberName"></span>
            <span data-bind="text : memberType"></span>
        </div>
        <aside class="fr margint10">
            <label data-bind="text : contributions"></label>
            <a href="#" class="sprite-add_img" id="openContribute" title="Add Contributes to Goals" data-bind="click: addContribute" ></a>
        </aside>
    </li>
</script> 
```

`membersList`你代码中的变量应该是下一个

```
function SingleMember(img, name, type, contr)
{
   var self = this
   self.img = ko.observable(img)
   self.memberName = ko.observable(name)
   self.memberType = ko.observable(type)
   self.contributions = ko.observable(contr)  
   self.addContribute = function() {  
       //  
    }
 }

window.viewModel = new function()  
{  
   var self = this  
   self.membersList = ko.observableArray()  
   self.membersList.push(new SingleMember(/*.... params1*/))  
   self.membersList.push(new SingleMember(/*.... params2*/))
} 
```

# cakephp - 循环内的 JQuery Ajax

> ID：13178341
> 
> 赞同：1
> 
> 时间：2012-11-01T13:41:57.200
> 
> 标签：cakephp, jquery

我正在尝试在循环中执行 Ajax 函数，并且我希望我的循环仅在 ajax 调用完成时才转到下一条指令。我试图将 ajax 异步设置为 false，但我的加载消息没有出现，并且当循环的所有迭代完成时我的屏幕刷新。如果 async 设置为 true，它会同时执行。

这是我的代码：

```
function pingAll( url )
{
    var arrIDs = new Array();
    var pattern = /[0-9]+/g;

    $("input:checkbox[name=checkbox-router]:checked").each(function()
    {
        var strCheckboxID = $(this).attr( 'id' );
        var routerID = strCheckboxID.match( pattern );
        arrIDs.push( routerID );
    });

    for (var i in arrIDs)
    {
        pingRouter(url + arrIDs[i], arrIDs[i]);
    }
}

function pingRouter( url, shortID )
{
    $( '#ping-resp-' + shortID ).html( 'Loading...' );  
    var pingRequestTimeout = $( '#pingRequestTimeout' ).val();      
    url = url + "?timeout=" + pingRequestTimeout;

    $.ajax
    ({
        url: url,
        async: true,
        success: function( data )
        {
            var objData = $.parseJSON( data );
            var response =  objData.response.replace(/(\r\n|\n|\r)/gm,"")
            .
            .
            .
            var latency = parseFloat( objData.latency );
            $( '#ping-resp-' + shortID ).html( latency + ' ms' );
        }
    });
    return;   
} 
```

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T13:52:04.503

您可以按如下方式使用递归：

```
function pingRouter(baseurl, arrIDs , i) {
    if( i < 0 || i > arrIDs.length - 1) {
        return;
    }
    var url = baseurl + arrIDs[i];
    var shortID = arrIDs[i];

    $( '#ping-resp-' + shortID ).html( 'Loading...' );  
    var pingRequestTimeout = $( '#pingRequestTimeout' ).val();      
    url = url + "?timeout=" + pingRequestTimeout;

    $.ajax
    ({
        url: url,
        async: true,
        success: function( data )
        {
            var objData = $.parseJSON( data );
            var response =  objData.response.replace(/(\r\n|\n|\r)/gm,"")
            .
            .
            .
            var latency = parseFloat( objData.latency );
            $( '#ping-resp-' + shortID ).html( latency + ' ms' );

        }
    }).always(function() {
        if(i < arrIDs.length + 1) {
            pingRouter(baseurl, arrIDs , i + 1);
        }
    });
    return;   

} 
```

并将您的调用函数更改为：

```
pingRouter(url, arrIDs, 0); 
```

请参阅 API for [always](http://api.jquery.com/jQuery.ajax/)。

# linux - 无法使用 tshark 获取完整的 proto,colinfo,wlan_mgt.tag.interpretation,wlan_mgt.tag.interpretation 信息

> ID：13178348
> 
> 赞同：1
> 
> 时间：2012-11-01T13:42:46.070
> 
> 标签：linux, networking, wireless, wireshark, tshark

我正在编写一个脚本来获取周围存在的所有唯一 SSID 以及一些客户端信息。为此，我正在运行以下命令：

```
tshark -i mon0 -c 100 -z "proto,colinfo,wlan_mgt.tag.interpretation,wlan_mgt.tag.interpretation" 
```

这在 tethereal 上运行良好。显示了 SSID、当前频道的标签。但我只得到以下 tshark ：

```
......
wlan_mgt.tag.interpretation == "802.11n (Pre) OUI"
wlan_mgt.tag.interpretation == "802.11n (Pre) HT information"
wlan_mgt.tag.interpretation == "802.11n (Pre) OUI"
wlan_mgt.tag.interpretation == "HT additional information (802.11n D1.00)"
wlan_mgt.tag.interpretation == "Not interpreted"
wlan_mgt.tag.interpretation == "Not interpreted"
............. 
```

即使是存在其他标签（如 SSID 和当前频道）的信标，也会显示上述内容。

我对 SSID 和频道特别感兴趣。

我在 Backtrack 5 (R3) 上运行它

# java - Java 扫描仪阵列

> ID：13178354
> 
> 赞同：5
> 
> 时间：2012-11-01T13:43:13.600
> 
> 标签：java

我在使用 java 时遇到问题。我需要扫描数字（例如`1 3 4 2 5 6 7`：）并将它们放入数组中。问题是我不知道它会持续多久。有没有可以用来确定扫描仪中输入数字长度的命令？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-01T13:49:09.583

如果您不想使用 ArrayList，作为一种解决方法，我建议您阅读整行，然后拆分以获取长度和单个值：

```
 String line = scanner.nextLine();
   String[] values = line.split(" ");
   int[] intValues = new int[values.length];
   int indx = 0;
   for(String value:values){
     intValues[indx++] = Integer.parseInt(value);
   } 
```

**编辑**：第二种方法：

```
 List<Integer> numList = new ArrayList<Integer>();
   int number = 0;
   while (number != -1) {
      System.out.println("Enter a positive integer value (or -1 to stop): ");
      number = Integer.parseInt(in.nextLine());
      if (number != -1){
        numList.add(number);
      }
   }
   in.close();

   Integer[] numArray = numList.toArray(new Integer[numList.size()]); 
```

**EDIT2：** 处理同一行中的多个数字并在空行处终止

```
List<Integer> numList = new ArrayList<Integer>();
while(true) {
   System.out.println("Enter a positive integer value (or -1 to stop): ");
   String line = in.nextLine();
   if(line.length() <1){
      break;
   }
   String [] numbers = line.split(" ");
   for(String num: numbers){
          numList.add(Integer.parseInt(num));
   }
 }
 in.close();

 Integer[] numArray = numList.toArray(new Integer[numList.size()]); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-01T13:45:05.647

如果您想要一个可变大小的集合，请使用[**ArrayList 。**](http://docs.oracle.com/javase/6/docs/api/java/util/List.html)

```
ArrayList<Integer> lst = new ArrayList<Integer>();
lst.add(scanner.getInt()); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-01T13:49:59.467

您可以使用`ArrayList`. 只需将其填满，最后将其转换为整数数组。或者更好的是，保留列表并使用它。

```
Scanner in = new Scanner(System.in);

ArrayList<Integer> intList = new ArrayList<Integer>();
while (true) {
  System.out.println("Enter a positive integer value (or -1 to stop): ");
  int number = in.nextInt();
  if (number < 0) break;
  intList.add(number);
}
// just use this last line if you really want an array. Work with the list instead if possible.
Integer[] yourFinalArray = intList.toArray(new Integer[0]); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-01T14:10:18.157

如果您使用 google Guava 库 ( [https://code.google.com/p/guava-libraries/](https://code.google.com/p/guava-libraries/) )，您可以说：

```
String numbers="1 3 4 2 5 6 7";
Splitter.on(" ").split( numbers ); 
```

这给了你一个可迭代的。如果你坚持要得到一个字符串数组，你可以说：

```
Iterables.toArray(Splitter.on(" ").split( numbers ), String.class) 
```

# regex - 为 Flex 设置规则，警告：“规则无法匹配”

> ID：13178357
> 
> 赞同：0
> 
> 时间：2012-11-01T13:43:17.600
> 
> 标签：regex, lexical-analysis, flex-lexer

我有这些弹性规则：

```
^User-Agent: [^\n]*Firefox {useragent = TFIREFOX; }
^User-Agent: [^\n]*MSIE {useragent = TMSIE; }
^User-Agent: [^\n]*Opera {useragent = TOPERA; }
^User-Agent: [^\n]*Safari {guseragent = TSAFARI; }
... 
```

我收到警告：`rule cannot be matched`在第一条规则之后的所有行。我希望第一条规则只匹配行，其中包含“Firefox”，但我认为我错了。如何修复这些规则？我阅读了 flex 联机帮助页，但我仍然无助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T19:56:12.357

我认为这里的问题是 flex 使用空格来分隔标记以进行正则表达式匹配。因此，当它解析您的文件时，它会将“^User-Agent：”之后的所有内容视为操作的一部分。您可以通过转义空间来完成这项工作：

```
^User-Agent:\ [^\n]*Firefox
^User-Agent:\ [^\n]*MSIE
^User-Agent:\ [^\n]*Opera
^User-Agent:\ [^\n]*Safari 
```

我用 flex 2.5.35 测试过，会做你想做的事。

# batch-file - Findstr 不接受变量 CMD

> ID：13178359
> 
> 赞同：0
> 
> 时间：2012-11-01T13:43:21.223
> 
> 标签：batch-file, cmd

目的是扫描给定文件夹中的媒体文件并将 mediainfo 发送到 info.txt 但也为用户提供仅扫描具有特定文本字符串的文件的选项。我的bat文件：

```
@echo off
setLocal EnableDelayedExpansion
echo. >info.txt
set /P "folder=Enter folder path: "
set /P "_input=Search all files (y/n): "

if /I "%_input%" == "y" (
    dir %folder% /B /O:N | findstr /I ".wmv$ .mpg$ .mkv$ .mpeg$ .mp4$ .avi$" >filename.txt 
    for /f "tokens=* delims= " %%a in ('type filename.txt') do ( 
    set _in=%_in%%%a 
    mediainfo --Inform=file://template.txt "%folder%!_in!" >>info.txt 
    echo. >>info.txt 
    )
) else ( 
    set /P "_str=Enter file string: " 
    dir %folder% /B /O:N | findstr /I "%_str%" >filename.txt
    for /f "tokens=* delims= " %%a in ('type filename.txt') do ( 
    set in=%in%%%a 
    mediainfo --Inform=file://template.txt "%folder%!in!" >>info.txt 
    echo. >>info.txt 
    )
)

del filename.txt
cls
pause 
```

虽然 if 循环的第一部分工作正常，但 'else' 部分没有，但我无法得到错误，因为眨眼间它就消失了，我无法解决它

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T15:15:59.983

如果您让 ECHO ON 并移除 CLS 或在 CLS 之前暂停，您可以进行故障排除。

您的 ELSE 块失败，因为您在块内设置 _str 然后尝试通过正常扩展使用该值。您需要使用延迟扩展。

甚至您的第一个 IF 块看起来也是错误的，因为您的 SET 语句使用的是正常扩展。最终结果是每次迭代只是将当前文件名传递给 mediainfo，这实际上是有道理的。在我看来，您甚至不需要任何一个块中的 _in 变量。

您的代码比需要的要复杂得多：我相信以下内容会给出您正在寻找的结果：

```
@echo off
setlocal
echo. >info.txt
set /P "folder=Enter folder path: "
set /P "_input=Search all files (y/n): "
if /i "_input" == "y" (
    set "_mask=*.wmv *.mpg *.mkv *.mpeg *.mp4 *.avi"
) else (
    set /P "_mask=Enter file string: "
)
if /i "_input" neq "y" set "_mask=*%_mask%*"
pushd "%folder%"
set "popped="
for %%F in (%_mask%) do (
  if not defined popped popd
  set popped=1
  mediainfo --Inform=file://template.txt "%%F" >>info.txt
  echo. >>info.txt
)
pause 
```

我会更进一步，并希望用户在文件字符串中提供任何通配符。这会给用户更多的控制权，并会进一步简化代码。

```
@echo off
setlocal
echo. >info.txt
set /P "folder=Enter folder path: "
set /P "_input=Search all files (y/n): "
if /i "_input" == "y" (
    set "_mask=*.wmv *.mpg *.mkv *.mpeg *.mp4 *.avi"
) else (
    set /P "_mask=Enter file mask: "
)
pushd "%folder%"
set "popped="
for %%F in (%_mask%) do (
  if not defined popped popd
  set popped=1
  mediainfo --Inform=file://template.txt "%%F" >>info.txt
  echo. >>info.txt
)
pause 
```

# sql-server - vb.net中的SQL Server命令不起作用导致一句话

> ID：13178360
> 
> 赞同：2
> 
> 时间：2012-11-01T13:43:33.353
> 
> 标签：sql-server, vb.net, insert, sql-update

这可能是一个非常简单的问题。

但我无法修复它。如果@ID = column id，我尝试更新，否则全部插入。

如果我把它放在一个句子中，只有这个不起作用

```
Cmd.CommandText = "UPDATE Locatie SET (Longitude = @Longitude, Latitude = @Latitude, Timestamp = @Timestamp) WHERE ID=@ID IF @@ROWCOUNT=0 INSERT INTO Locatie VALUES (@ID, @Longitude, @Latitude, @Timestamp)" 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-01T13:54:02.680

这应该工作得很好

```
Cmd.CommandText = "IF EXISTS (SELECT 1 FROM Locatie WHERE Id = @Id) " & Environment.NewLine & _
                  "  BEGIN UPDATE Locatie SET Longitude = @Longitude, Latitude = @Latitude, Timestamp = @Timestamp WHERE ID=@Id END " & Environment.NewLine & _
                  "ELSE " & Environment.NewLine & _
                  "   BEGIN INSERT INTO Locatie VALUES (@ID, @Longitude, @Latitude, @Timestamp) END " 
```

尽管使用存储过程可能会更好（为了可维护性）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-01T13:53:44.920

试试下面的：

```
Cmd.CommandText = "UPDATE Locatie SET (Longitude = @Longitude, Latitude = @Latitude, Timestamp = @Timestamp) WHERE ID=@ID GO IF @@ROWCOUNT=0 begin INSERT INTO Locatie VALUES (@ID, @Longitude, @Latitude, @Timestamp) end Go" 
```

# paypal - Paypal Express Checkout 字段不返回值

> ID：13178361
> 
> 赞同：0
> 
> 时间：2012-11-01T13:43:38.893
> 
> 标签：paypal, paypal-sandbox

我在沙箱中运行了 paypal express checkout api，我能够成功地进行交易并捕获付款。现在我想在数据库中存储一些值。我可以从 resArray 中获取 transactionID、ordertime、payment 状态没问题。但是，当我尝试添加[https://cms.paypal.com](https://cms.paypal.com)网站的“DoExpressCheckoutPaymentAPI 操作”页面上列出的其他变量时，它们不会返回任何值

我通过 doExpresscheckout 正确发送以下值

```
PAYMENTREQUEST_0_SOFTDESCRIPTOR = 'My Company Name'
PAYMENTREQUEST_0_ALLOWEDPAYMENTMETHOD = 'Instant Payment Only' 
```

我需要获取这些值以及 PAYMENTINFO_0_SETTLEAMT

但是当我读取 DoExpressCheckout 返回的 resArray 时，这些字段是不存在的。

有没有办法获得这些值？- 只有在有货币转换时才返回结算，如果没有，它不在返回的数组中？

另外，是否有另一种只接受即时付款的方法？我可以没有其他东西，但我只需要设置即时付款。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T01:22:28.837

响应不会包含您传递给请求的所有内容。您传递给您已经拥有的请求的任何内容，因此如果您需要存储该数据，您只需要使用您传递给请求的相同值来执行此操作，无论是会话数据还是其他。

您可以参考[PayPal NVP 文档](https://cms.paypal.com/cms_content/US/en_US/files/developer/PP_NVPAPI_DeveloperGuide.pdf)的第 105 页，详细了解您应该在 DoExpressCheckout 响应中返回的确切内容。

# ios - UserLocation 图像不移动

> ID：13178362
> 
> 赞同：1
> 
> 时间：2012-11-01T13:43:40.640
> 
> 标签：ios, mkmapview, mapkit

我不明白为什么当我在其上设置服装图像时 userLocation 不移动。

如果我不设置图像，它会使用默认的蓝色引脚并且它可以工作；当位置改变时，我可以看到用户位置移动。

这是我从其他帖子中获取的 viewForAnnotation 。

```
- (MKAnnotationView *)mapView:(MKMapView *)mapView viewForAnnotation:(id <MKAnnotation>)annotation
{
    static NSString* AnnotationIdentifier = @"Annotation";
    MKPinAnnotationView *pinView = (MKPinAnnotationView *)[mk dequeueReusableAnnotationViewWithIdentifier:AnnotationIdentifier];
    if (!pinView)
    {
        pinView = [[[MKPinAnnotationView alloc] initWithAnnotation:annotation reuseIdentifier:AnnotationIdentifier] autorelease];
        pinView.animatesDrop = NO;
        pinView.canShowCallout = YES;
    }
    else
    {
        pinView.annotation = annotation;
    }

    if (annotation == mk.userLocation)
        pinView.image = [UIImage imageNamed:@"PositionPin.png"];
    else
        pinView.image = [UIImage imageNamed:@"PositionPin.png"];

    return pinView;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T15:33:06.843

```
- (MKAnnotationView *)mapView:(MKMapView *)mapView viewForAnnotation:(id <MKAnnotation>)annotation
{
    static NSString* AnnotationIdentifier = @"Annotation";
    MKPinAnnotationView *pinView = (MKPinAnnotationView *)[mk dequeueReusableAnnotationViewWithIdentifier:AnnotationIdentifier];
    if (!pinView)
    {
        pinView = [[[MKPinAnnotationView alloc] initWithAnnotation:annotation reuseIdentifier:AnnotationIdentifier] autorelease];
        pinView.animatesDrop = NO;
        pinView.canShowCallout = YES;
    }
        pinView.annotation = annotation;
        pinView.image = [UIImage imageNamed:@"PositionPin.png"];

    return pinView;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T15:58:18.267

这似乎是地图视图中的一个错误（仍然存在于 iOS 6 中），当使用自定义注释视图时，用户位置坐标不再更新（即使文档表明它会起作用）。

一种解决方法是使用 Core Location 获取用户位置更新并创建您自己的注释（而不是使用地图视图的`userLocation`），然后在`viewForAnnotation`.

有关更多详细信息和一些示例代码以实现解决方法，请参阅[用户位置不移动地图视图的自定义注释视图](https://stackoverflow.com/questions/11432746/custom-annotation-view-for-userlocation-not-moving-the-mapview/11435874#11435874)的答案。

此外，请注意，当您的注释视图使用自定义图像时，您应该使用`MKAnnotationView`而不是`MKPinAnnotationView`.
使用 时`MKPinAnnotationView`，它有时会显示其默认图钉图像而不是您的自定义图像。

# wpf - WPF Datagrid：将其他行复制到剪贴板

> ID：13178363
> 
> 赞同：5
> 
> 时间：2012-11-01T13:43:45.197
> 
> 标签：wpf, datagrid, clipboard

我正在使用 WPF Datagrid，并且正在尝试增强/更改复制和粘贴机制。

当用户选择一些单元格然后按 CTRL + C 时，底层控件能够捕获**CopyingRowClipboardContent**事件。

```
 this.mainDataGrid.CopyingRowClipboardContent 
              += this.DatagridOnCopyingRowClipboardContent; 
```

在这种方法中，一些单元格被添加到标题和行中，因此导致“更宽”的网格。

```
 private void DatagridOnCopyingRowClipboardContent(
        object sender, 
        DataGridRowClipboardEventArgs dataGridRowClipboardEventArgs)
    {
        // this is fired every time a row is copied
        var allContent = dataGridRowClipboardEventArgs.ClipboardRowContent;

        allContent.Insert(0, new DataGridClipboardCellContent(
                                            null, 
                                            this.mainDataGrid.Columns[0], 
                                            "new cell"));
    } 
```

此时我被卡住了，因为我试图在标题**之前添加额外的一行，在最后一行****之后添加两**行（见下图）。

有任何想法吗？建议？

请注意，我对这里的 MVVM 方式不感兴趣。

![在此处输入图像描述](../Images/e2f4e9b8d4be24f49440d8516df3b38b.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-01T14:23:52.297

这是一个可能对您有所帮助的代码片段。此代码段主要用于检索您选择的所有数据，包括标题（我删除了该`RowHeaders`部分，因为您显然不需要它）。如果您有任何问题，请告诉我。我留下了一些用大写字母写的注释：这是您应该添加自己的数据的地方 这种方法的好处是它直接与您`DataGrid`的 's`ItemsSource`而不是`DataGridCell`. 主要原因是：`DataGridCell`例如，如果您使用格式化的数字，您将不会获得实际值，而只会获得格式化的值（假设您的源是 14.49，而您的源`StringFormat`是 N0，如果您使用 "常规”方式）

```
 /// <summary>
    /// Handles DataGrid copying with headers
    /// </summary>
    /// <param name="sender"></param>
    /// <param name="e"></param>
    private void OnCopyingDataGrid(object sender, ExecutedRoutedEventArgs e)
    {
        // First step: getting the coordinates list of all cells selected
        IList<Tuple<int, int>> cellsCoordinatesList = new List<Tuple<int, int>>();
        HashSet<int> rowList = new HashSet<int>();
        HashSet<int> columnList = new HashSet<int>();
        foreach (System.Windows.Controls.DataGridCellInfo cell in this.SelectedCells)
        {
            int column = cell.Column.DisplayIndex;
            int row = this.Items.IndexOf(cell.Item);
            cellsCoordinatesList.Add(new Tuple<int, int>(row, column));
            if (!rowList.Contains(row))
            {
                rowList.Add(row);
            }
            if (!columnList.Contains(column))
            {
                columnList.Add(column);
            }
        }

        // Second step: Create the table to copy/paste
        object[,] arrayToBeCopied = new object[rowList.Count, columnList.Count + 1];
        IList<string> colHead = this.ColumnHeaders.Cast<object>().Select(h => h.ToString()).ToList();
        for (int row = 0; row < arrayToBeCopied.GetLength(0); row++)
        {
            for (int column = 0; column < arrayToBeCopied.GetLength(1); column++)
            {
                if (row == 0)
                {
                    arrayToBeCopied[row, column] = colHead[columnList.ElementAt(column - 1)];
                }
                else
                {
                    arrayToBeCopied[row, column] = // WHATEVER YOU WANT TO PUT IN THE CLIPBOARD SHOULD BE HERE. THIS SHOULD GET SOME PROPERTY IN YOUR ITEMSSOURCE

                }
            }
        }

        // Third step: Converting it into a string
        StringBuilder sb = new StringBuilder();

        // HERE, ADD YOUR FIRST ROW BEFORE STARTING TO PARSE THE COPIED DATA

        for (int row = 0; row < arrayToBeCopied.GetLength(0); row++)
        {
            for (int column = 0; column < arrayToBeCopied.GetLength(1); column++)
            {
                sb.Append(arrayToBeCopied[row, column]);
                if (column < arrayToBeCopied.GetLength(1) - 1)
                {
                    sb.Append("\t");
                }
            }
            sb.Append("\r\n");
        }

        // AND HERE, ADD YOUR LAST ROWS BEFORE SETTING THE DATA TO CLIPBOARD

        DataObject data = new DataObject();
        data.SetData(DataFormats.Text, sb.ToString());

        Clipboard.SetDataObject(data);
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-07T10:48:46.790

您是否要稍后将内容复制到 Excel 中？如果是这样，这就是我所做的：

```
/// <summary>
/// Copy the data from the data grid to the clipboard
/// </summary>
private void copyDataOfMyDataGridToClipboard(object sender, EventArgs e)
{
    // Save selection
    int selectedRow = this.myDataGrid.SelectedRows[0].Index;

    // Select data which you would like to copy
    this.myDataGrid.MultiSelect = true;
    this.myDataGrid.SelectAll();

    // Prepare data to be copied (that's the interesting part!)
    DataObject myGridDataObject = this.myDataGrid.GetClipboardContent();
    string firstRow = "FirstRowCommentCell1\t"+ this.someDataInCell2 +"..\r\n";
    string lastTwoRows = "\r\nBottomLine1\t" + yourvariables + "\r\nBottomLine2";
    string concatenatedData = firstRow + myGridDataObject.GetText() + lastTwoRows;

    // Copy into clipboard
    Clipboard.SetDataObject(concatenatedData);

    // Restore settings
    this.myDataGrid.ClearSelection();
    this.myDataGrid.MultiSelect = false;

    // Restore selection
    this.myDataGrid.Rows[selectedRow].Selected = true;
} 
```

就我而言，我有一些静态标题，可以很容易地与一些变量连接。重要的是`\t`要声明另一个单元格，`\r\n`声明下一行

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-02-14T15:49:36.863

我意识到这是一篇较旧的帖子，但为了完整起见，我发布了这个解决方案。我找不到关于将数据网格行复制到剪贴板的更新的问题。使用 Clipboard.SetData 掩盖了 ClipboardRowContent 的意图。

为了我的需要，我将我想要的行重新粘贴回 e.ClipboardRowContent 中。cell.Item 是我需要的每个选定行的所有信息。

提示：我没有做 e.ClipboardRowContent.Clear(); 使用 e.ClipboardRowContent 后。我之前正在清除并使用 DataGrid.SelectedItems 来构建行。

```
private void yourDataGrid_CopyingRowClipboardContent(object sender,    DataGridRowClipboardEventArgs e)
{
var dataGridClipboardCellContent = new List<DataGridClipboardCellContent>(); 

string prevCell = "";
string curCell = ""; 

foreach (DataGridClipboardCellContent cell in e.ClipboardRowContent)
{
    //Gives you access item.Item or item.Content here
    //if you are using your struct (data type) you can recast it here curItem = (yourdatatype)item.Item;        
    curItem = cell.Item.ToString(); 

    if (curCell != prevCell)
        dataGridClipboardCellContent.Add(new DataGridClipboardCellContent(item, item.Column, curCell)); 

    prevCell = curCell;  

}
e.ClipboardRowContent.Clear();

//Re-paste back into e.ClipboardRowContent, additionally if you have modified/formatted rows to your liking
e.ClipboardRowContent.AddRange(dataGridClipboardCellContent); 
```

}

# math - 哪些网站或服务允许人们输入数学方程式并生成该方程式的链接？

> ID：13178365
> 
> 赞同：0
> 
> 时间：2012-11-01T13:43:54.390
> 
> 标签：math, markdown, mathjax

我正在寻找人们可以创建数学方程式的网站或服务，然后它将创建一个指向该方程式的链接，因此我可以将该链接放入我的网站以显示该方程式。有人知道这样的事情吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T13:46:56.477

您可以使用 Latex 在线工具，查看此页面的链接： [http ://sixthform.info/steve/wordpress/?cat=2](http://sixthform.info/steve/wordpress/?cat=2)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-01T13:49:21.667

[http://webdemo.visionobjects.com/equation.html?locale=default](http://webdemo.visionobjects.com/equation.html?locale=default)

写出方程式，它将生成乳胶

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-01T13:50:09.920

[Wolfram Alpha](http://wolframalpha.com)对此非常有效。

例如：[http ://www.wolframalpha.com/share/clip?f=d41d8cd98f00b204e9800998ecf8427eretnlv159](http://www.wolframalpha.com/share/clip?f=d41d8cd98f00b204e9800998ecf8427euretnlv159)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-02T22:20:18.660

如果您真的需要图像，您可以从 WIRIS 的方程式编辑器演示中获取[PNG](http://www.wiris.net/demo/editor/demo/en/#image)。根据我的经验，图像的链接是稳定的。

如果您正在寻找图像之外的内容，那么还有类似 pastebin 的网站，例如[MathBin](http://mathbin.heroku.com/)（也提供嵌入代码）和[MathB.in](http://mathb.in/)，它们都由 MathJax 提供支持。

# c# - 数据库导出后无法插入 NULL 值

> ID：13178368
> 
> 赞同：0
> 
> 时间：2012-11-01T13:44:11.767
> 
> 标签：c#, razor, asp.net-mvc-4

这是我的问题。我更改了数据库位置，首先它在外部服务器上，然后我将其导出到我的本地位置 (./SQLEXPRESS) 现在我无法插入记录，因为它说该记录包含 NULL id 值。但它是正确的，因为它是一个自动增量，我通过“0”或 null 来告诉我的数据库插入一行（它是 db.mytable.add(myrow)，它是基本行为）。为什么现在它告诉我通过设置 id 的行？

这是简单的代码

```
db.Company.Add(company);
db.SaveChanges(); 
```

它在 SaveChanges 上给出错误

我认为这是一个数据库所有者问题

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T15:57:15.243

您应该再次检查您的数据库。也许代码正在查看错误的数据库，例如`dbo.YourDB`而不是`NinoEmma.YourDB`. 因为它找不到您的数据库，EF Code First 将创建一个并且该`id`列不再自动递增。

# c# - 从 C# 代码启动时隐藏 cmd.exe 窗口

> ID：13178374
> 
> 赞同：1
> 
> 时间：2012-11-01T13:44:59.280
> 
> 标签：c#, .net, cmd

我正在从 winforms 应用程序中运行 cmd.exe 进程。但是我似乎无法让控制台窗口在后台运行（即不显示在屏幕上）

这是我的代码

```
ProcessStartInfo si = new ProcessStartInfo("cmd.exe");
si.RedirectStandardInput = true;
si.RedirectStandardOutput = true;
si.UseShellExecute = false;
si.Arguments = "/c";
si.WindowStyle = ProcessWindowStyle.Hidden;
Process p = Process.Start(si); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-01T13:49:22.557

将 CreateNoWindow 设置为 true。

```
si.CreateNoWindow = true; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-01T13:49:57.517

```
si.CreateNoWindow = true;
si.WindowStyle = ProcessWindowStyle.Hidden; 
```

# winrar - WinRAR“总路径和文件名长度不得超过 260 个字符”

> ID：13178377
> 
> 赞同：17
> 
> 时间：2012-11-01T13:45:05.163
> 
> 标签：winrar

WinRAR 给我一个只有 216 个字符长的路径/文件名的 260 个字符限制错误。见下文。原因是提取目标是一个工具长的临时文件夹。有关此文件夹的详细信息，请参阅[https://superuser.com/questions/154969/where-winrar-extracts-files](https://superuser.com/questions/154969/where-winrar-extracts-files)。

```
!   C:\<path>\<filename.rar>: Cannot create <filename>
Total path and file name length must not exceed 260 characters 
```

我该如何修改？

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-11-01T13:45:05.163

您可以从 Winrar 的选项 > 设置 > 路径选项卡更改 Winrar 的默认临时目录。感谢[https://superuser.com/questions/154969/where-winrar-extracts-files](https://superuser.com/questions/154969/where-winrar-extracts-files)的解决方案。

对于可能的最短路径，将其设置为 c:/ 或其他驱动程序的根目录。注意它将创建（而不是删除）以“RAR ...”或“Rar ...”开头的临时文件夹。WinRAR 完成后，您可以删除它。

# c++ - 在长时间处理期间与 GUI 交互

> ID：13178379
> 
> 赞同：0
> 
> 时间：2012-11-01T13:45:14.307
> 
> 标签：c++, user-interface, mfc

我有一个班级层次结构：

```
类 BaseProcess
{
    公共虚拟无效执行（）= 0；  

};

类子进程：BaseProcess
{
    公共虚拟无效执行（）
    {
        //做点什么

        //这里需要回调GUI，可能是从文件选择器中获取文件路径

        //做其他事情

        //现在想用操作的进度更新GUI

        //更多处理   
    }
};

```

假设从 GUI 按钮事件处理程序创建和调用 SubProcess 对象...

我的问题是从 Execute() 函数中与 GUI 交互的最佳方式是什么？（还假设 Execute() 可能在不同的线程上运行）

我的想法是将回调传递给 SubProcess 对象，因为这将允许我将信息发送到 GUI，但是在文件选择器的情况下，将数据返回给 SubProcess 对象的最佳方法是什么? 我希望解决方案尽可能通用，以便我可以根据请求返回不同类型的数据。

注意：请忽略任何代码错误，我快速拼凑示例只是为了说明问题

更新：

很抱歉，这将在 Windows，MFC 上。我不确定这有多重要，因为我认为整体设计应该适用于大多数 GUI 框架？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T13:58:19.560

```
class SubProcess : BaseProcess
{
    public virtual void Execute()
    {
        //Do Something

        char file_name[MAX_PATH +1];
        myWindow->SendMessage(WM_GETFILE, max_path, (LPARAM)file_name); 

        //Do Something Else

        myWindow->SendMessage(WM_UPDATE, 50);

        //More processing   
    }
}; 
```

在窗口类中：

```
#define WM_GETFILE (WM_USER+1)
#define WM_UPDATE (WM_USER+2)

BEGIN_MESSAGE_MAP(CMyWindow, CWnd)
    ON_MESSAGE(WM_GETFILE, MyGetFileHandler)
    ON_MESSAGE(WM_UPDATE, MyUpdateHandler)
END_MESSAGE_MAP()

LRESULT CMyWindow::MyGetFileHandler(WPARAM wParam, LPARAM lParam)
{
}
LRESULT CMyWindow::MyUpdateHandler(WPARAM wParam, LPARAM lParam)
{
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-01T14:06:58.407

我前段时间使用的 MFC 技术是基于标准的[空闲循环](http://msdn.microsoft.com/en-us/library/3dy7kd92%28v=vs.80%29.aspx)处理。

这是一种简单的方法，因为在主线程中运行，您的工作人员可以直接作用于 GUI 对象。

如果您“足够频繁地”从工作进程调用消息循环，则 GUI 将保持平稳运行。

如果您可以承受开发周期中的一些复杂性，则可以改用线程，但根据我的经验，它更难。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-01T13:51:58.980

取决于图形用户界面。如果您在一个 GUI 允许您从不同线程控制它的系统上，那么您可以从 Execute() 中进行直接 GUI 调用。如果 GUI 不允许这样做，那么您可以通过消息与主线程通信，在那里进行 GUI 调用，并将结果返回给 Execute() 线程。

[Qt](http://qt-project.org)使用它的[信号和槽机制](http://qt-project.org/doc/qt-4.8/signalsandslots.html)，使得实现这一点相当直接的 GUI 框架。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-01T13:54:02.323

```
class GuiCallback
{
 public:
     string getFilePath () {/*show the dialog and return the path*/}
     void update (/*arguments with data*/) {}
};
class BaseProcess
{
    public virtual void Execute(GuiCallback*) = 0;  

};

class SubProcess : BaseProcess
{
    public virtual void Execute(GuiCallback* callback)
    {
        //Do Something

        string path = callback->getFilePath ();

        //Do Something Else

        callback->update (...);

        //More processing   
    }
}; 
```

实现`getFilePath`和`update`将取决于您使用的平台/gui 框架

# iphone - 在 iOS 6 中以编程方式获取通话记录

> ID：13178382
> 
> 赞同：1
> 
> 时间：2012-11-01T13:45:23.963
> 
> 标签：iphone, objective-c, ios, cocoa-touch

我正在使用 iOS 6 开发*iOS*应用程序。我需要以编程方式从 iOS 设备获取*通话记录。*我已经尽了最大努力并得到了解决方案，但它只适用于 iOS 5 以下。是否可以在 iOS 5 以上或 iOS 6 中使用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-25T08:58:52.037

在我的 ios5 设备中，通话记录位置是

> “/private/var/wireless/Library/CallHistory/call_history.db”

这是我检索通话记录的代码

```
- (void)getCallHistory
{  
    self.callHistories = [NSMutableArray array];

FMDatabase *db = [FMDatabase databaseWithPath:@"/private/var/wireless/Library/CallHistory/call_history.db"];

    NSLocale *usLocale = [[[NSLocale alloc] initWithLocaleIdentifier:@"en_US"] autorelease];

if([db open]) {
    FMResultSet *rs = [db executeQuery:@"select address, date, flags, duration from call order by date"];
    while ([rs next]) {
        int dateInt = [rs intForColumn:@"date"];
        NSDate *date = [NSDate dateWithTimeIntervalSince1970:dateInt];
        NSDateFormatter *df = [[NSDateFormatter alloc] init];
        [df setDateFormat:@"YYYY-MM-dd HH:mm"];
        NSString *dateString = [df stringFromDate:date];

        int flagsInt = [rs intForColumn:@"flags"];
        NSString *flags = @"?";
        switch (flagsInt) {
            case 4: flags = @"<-"; break;
            case 5: flags = @"->"; break;
            default: break;
        }

        int durationInt = [rs intForColumn:@"duration"];
        NSString *duration = [NSString stringWithFormat:@"%d:%02d", durationInt / 60, durationInt % 60];

        NSString *logLine = [NSString stringWithFormat:@"%@ %@ %@ (%@)", dateString, flags, [rs stringForColumn:@"address"], duration];
        [callHistories addObject:logLine];
    }
    [rs close];

    rs = [db executeQuery:@"select bytes_rcvd, bytes_sent from data where pdp_ip = 0"];
    while ([rs next]) {
        double bytes_sent = [rs doubleForColumn:@"bytes_sent"];
        double bytes_rcvd = [rs doubleForColumn:@"bytes_rcvd"];

        self.prettyBytesSent = [[NSNumber numberWithDouble:bytes_sent] prettyBytes];
        self.prettyBytesReceived = [[NSNumber numberWithDouble:bytes_rcvd] prettyBytes];
    }

    [rs close];

    [db close];
    }

} 
```

希望能帮助到你！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T13:18:13.293

你没有在 ios 5 call_history.db 中获取通话历史记录 bcoz 没有处于读取模式。所以你没有阅读这个 call_history.db 飞行。你只在越狱中阅读了这个数据库。

# apache - Apache 将逻辑否定 ¬ 重定向到波浪号 ~

> ID：13178387
> 
> 赞同：2
> 
> 时间：2012-11-01T13:45:50.023
> 
> 标签：apache, redirect, special-characters, tilde, negation

我有一个要重定向的 URL，但是我似乎无法将字符输入 vim。

字符是¬（逻辑否定），我想将它重定向到〜（波浪号）。

```
Redirect permanent /¬foo http://www.example.com/~foo 
```

Vim 不允许我将此字符复制到终端中，而我的键盘中没有它！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-01T14:01:40.047

那是一个非 ASCII 字符，因此如果用户请求，浏览器将发送到您的服务器的 URI`/¬foo`应该是`/%C2%ACfoo`（使用 ¬ 字符编码为 UTF-8 并且 UTF-8 的每个字节然后 URI 编码）或者可能只是`/%ACfoo`（如果浏览器不先进行 UTF-8 转换）。尝试为编码表单而不是原始表单配置重定向。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-01T14:06:59.660

**以下是有关您的狂野角色的更多信息：**

[http://www.theasciicode.com.ar/extended-ascii-code/logical-negation-symbol-ascii-code-170.html](http://www.theasciicode.com.ar/extended-ascii-code/logical-negation-symbol-ascii-code-170.html)

安装 yudit，它是一个 unicode 编辑器，你也许可以更容易地插入它。

在数学上讲，当且仅当 A 为假时，命题 ¬A 为真。

[http://en.wikipedia.org/wiki/Negation](http://en.wikipedia.org/wiki/Negation)

您可能必须在 vi 中设置您的编码首选项，如下所述：

[Vim 和 ASCII 扩展字符？](https://stackoverflow.com/questions/1921316/vim-and-ascii-extended-characters)

**如何将逻辑否定字符添加到 VI：**

在 VI 中，进入插入模式。在 INSERT 模式下按：

Ctrl-v 172

其中 172 是代表您想要的字符的字符代码。这假设您使用的是默认编码 ISO 8859-1。

**您可能想知道为什么逻辑 not`170`在扩展 ASCII 中但在 VI 中您必须键入`172`才能获得该字符？因为您使用的是 ISO 8859-1：**

[http://www.htmlhelp.com/reference/charset/iso160-191.html](http://www.htmlhelp.com/reference/charset/iso160-191.html)

**我高度怀疑 Apache 会做你想做的事**

你可能会比你已经做到的聪明得多。您的逻辑非字符将在客户端浏览器和 Apache 服务器之间重新编码。

[http://www.packetizer.com/labs/cs/characters.cgi?text=%C2%AC&submit=Submit](http://www.packetizer.com/labs/cs/characters.cgi?text=%C2%AC&submit=Submit)

# .net - 是否可以为 Moq（或任何其他模拟 API）提供默认实现？

> ID：13178388
> 
> 赞同：0
> 
> 时间：2012-11-01T13:45:49.873
> 
> 标签：.net, moq

这是场景：

```
interface IFather
{
    void A();
}

interface ISonA : IFather
{
    void B();
} 
```

我有一个默认的 IPather 实现

```
private class Father : IFather
{
    public void A()
    {
        //default behaviour
    }
} 
```

是否可以使用父亲提供的默认行为来模拟 ISoA（或任何其他实现 IFather 的 ISo）？我想做这样的事情：

```
 var mock = new Mock<ISonA>(typeof(Father));
    //with A nothing, use default behaviour
    //mock.Setup(x => x.A()).Callback(() =>  /*something*/);
    mock.Setup(x => x.B()).Callback(() =>  /*something*/); 
```

其中 typeof(Father) 是告诉 Mock 在内部实现 ISonA 扩展父亲的方式。目前实现这一目标的唯一方法是使用我自己的 SonA 类而不是模拟它

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T19:04:23.320

最后我得到了解决方案。上一个示例需要一些修复。最后显示了完整的代码。1º 方法 A() 必须在父类中标记为虚拟。2º mock 必须使用属性 CallBase = true 进行配置

```
public interface IFather
{
    int A();
}

public interface ISon : IFather
{
    int B();
}

public class Father : IFather
{
    public virtual int A()
    {
        return 1;
    }
} 
```

测试代码

```
var mock = new Mock<Father>().As<ISon>();
mock.CallBase = true; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T15:16:28.817

我找到了解决方案！模拟应该像这样创建：

```
var mock = new Mock<Father>().As<ISonA>(); 
```

这样我继承了Father的实现，同时得到了一个ISonA mock

# php - PHP图像未上传到网站

> ID：13178391
> 
> 赞同：0
> 
> 时间：2012-11-01T13:46:04.010
> 
> 标签：php

在我的网站上，我有 2 个不同的地方供用户上传图片。第一个完美运行。第二个没有。据我所知，它们完全相同。为了测试，我在两者上都使用了相同的图像，它适用于第一个，但不是第二个。这是非工作代码的代码：

```
<?php
include('cn.php');

$name = $_FILES['image']['name'];
$type = $_FILES['image']['type'];
$size = $_FILES['image']['size'];
$temp = $_FILES['image']['tmp_name'];
$error = $_FILES['image']['error'];

echo $name; //Doesnt echo anything

$rand_num = rand(1, 1000000000);

$name = $rand_num . "_" . $name;

echo $name; //Echos just the random number followed by _

if ($error > 0) { 
    die("Error uploading file! Go back to the <a href='gallery.php'>gallery</a> page and try again.");
} else {
    $sql = "INSERT INTO gallery (image) VALUES ('".$name."')"; //Inserts the random number to the database
    $query = mysql_query($sql) or die(mysql_error());
    echo $sql; 

    move_uploaded_file($temp, "gallery_pics/$name"); //Doesn't move the file.  gallery_pics exists, if that matters
    echo "Upload complete! Go back to the <a href='gallery.php'>album</a>.";
}

?> 
```

如果有人可以请在这里帮助我。我确信这很简单，但我还没有找到任何有帮助的东西。谢谢！

编辑：代码上方有两行无法正确显示。一个启动php，另一个打开数据库。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T14:22:33.273

在开发或尝试查找故障时启用错误报告，同时检查您的服务器错误日志。检查`$_FILES['image']['error']`错误代码并相应地显示错误。试试下面的代码。希望能帮助到你

```
<?php
//Enable error reporting
error_reporting(E_ALL);
ini_set('display_errors',1);

$error_types = array(
    0=>"There is no error, the file uploaded with success",
    1=>"The uploaded file exceeds the upload_max_filesize directive in php.ini",
    2=>"The uploaded file exceeds the MAX_FILE_SIZE directive that was specified in the HTML form",
    3=>"The uploaded file was only partially uploaded",
    4=>"No file was uploaded",
    6=>"Missing a temporary folder"
);

if($_FILES['image']['error']==0) {
    // process
    $name = $_FILES['image']['name'];
    $type = $_FILES['image']['type'];
    $size = $_FILES['image']['size'];
    $temp = $_FILES['image']['tmp_name'];

    //mt_rand() = 0-RAND_MAX and make filename safe.
    $name = mt_rand()."_".preg_replace('/[^a-zA-Z0-9.-]/s', '_', $name);

    //insert into db, swich to PDO
    ...

    //Move file upload
    if (move_uploaded_file($_FILES['image']['tmp_name'], "gallery_pics/$name")) {
        echo "Upload complete! Go back to the <a href='gallery.php'>album</a>.";
    } else {
        echo "Failed to move uploaded file, check server logs!\n";
    }
} else {
    // error
    $error_message = $error_types[$_FILES['userfile']['error']];
    die("Error uploading file! ($error_message)<br/>Go back to the <a href='gallery.php'>gallery</a> page and try again.");
}
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T14:11:20.367

两个脚本是否位于同一目录中？如果没有，请确保您指定正确的相对路径或完整路径，并在斜线前面，如下所示：

```
move_uploaded_file($temp, "/some_folder/gallery_pics/$name"); 
```

另外，你检查上传文件的扩展名吗？如果没有，例如，用户可以上传并执行一个 PHP 文件。顺便说一句，您的文件名这样看起来会更好：

```
$rand_num = rand(1111111111, 9999999999); 
```

# c# - MS图中点或系列的选择

> ID：13178393
> 
> 赞同：0
> 
> 时间：2012-11-01T13:46:08.677
> 
> 标签：c#, mschart

我正在查看 System.Windows.Forms.DataVisualization.Charting.Chart 类，但我无法弄清楚如何启用点或系列的选择（如在 Excel 图表中）。功能在那里，还是我必须自己实现？

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-23T08:31:54.540

对于将来遇到相同问题并希望快速回答​​/阅读的任何人，下面的代码片段可以解决问题：

```
ChartArea _chartarea;
Series _data;

private void Plot_MouseClick(object sender, System.Windows.Forms.MouseEventArgs e)
    HitTestResult result = _plot.HitTest(e.X, e.Y);

    if (result.ChartElementType == ChartElementType.DataPoint && result.ChartArea == _chartarea && result.Series == _data)
    {
        // A point is selected.
    }
} 
```

# classnotfoundexception - java.lang.NoClassDefFoundError: com/sun/faces/context/RequestParameterValuesMap

> ID：13178394
> 
> 赞同：0
> 
> 时间：2012-11-01T13:46:14.803
> 
> 标签：classnotfoundexception

我开发了一个在亚马逊云实例上运行的 JSF 2.0/Primefaces 3.2 Web 应用程序。我最近有很多“NoClassDefFoundError”，不知道从哪里开始挖掘。我最初认为它必须与类加载器有关，但在我们第二天重新部署应用程序后，异常消失了。

以下是我拥有的 jsf2.0 maven 依赖项列表：

```
<dependecy>
      <groupId>com.sun.faces</groupId> 
      <artifactId>jsf-api</artifactId> 
      <version>2.1.3</version>
</dependency>
<dependency>
            <groupId>com.sun.faces</groupId>
            <artifactId>jsf-impl</artifactId>
            <version>2.1.3</version>
 </dependency> 
 <dependency>
            <groupId>javax.el</groupId>
            <artifactId>el-api</artifactId>
            <version>2.2</version>
            <scope>provided</scope>
 </dependency> 
```

这是我最近得到的例外：

> java.lang.NoClassDefFoundError: com/sun/faces/context/RequestParameterValuesMap at
> com.sun.faces.context.ExternalContextImpl.getRequestParameterValuesMap(ExternalContextImpl.java:347) at org.primefaces.renderkit.SelectManyRenderer.decode(SelectManyRenderer.java:39 ) 在 javax.faces.component.UIComponentBase.decode(UIComponentBase.java:787) 在 javax.faces.component.UIInput.decode(UIInput.java:757) 在 javax.faces.component.UIComponentBase.processDecodes(UIComponentBase.java:第1181章）
> 在 javax.faces.component.UIComponentBase.processDecodes(UIComponentBase.java:1176) 在 javax.faces.component.UIComponentBase.processDecodes(UIComponentBase.java:1176) 在 javax.faces.component.UIComponentBase.processDecodes(UIComponentBase.java:1176) ) 在 javax.faces.component.UIComponentBase.processDecodes(UIComponentBase.java:1176) 在 javax.faces.component.UIForm.processDecodes(UIForm.java:225)
> 在 javax.faces.component.UIComponentBase.processDecodes(UIComponentBase.java:1176) 在 javax.faces.component.UIComponentBase.processDecodes(UIComponentBase.java:1176) 在 javax.faces.component.UIComponentBase.processDecodes(UIComponentBase.java:1176) ) 在 javax.faces.component.UIComponentBase.processDecodes(UIComponentBase.java:1176) 在 org.primefaces.component.layout.Layout.processDecodes(Layout.java:238) 在 javax.faces.component.UIComponentBase.processDecodes(UIComponentBase. java:1176) 在 javax.faces.component.UIComponentBase.processDecodes(UIComponentBase.java:1176) 在 org.primefaces.component.layout.Layout.processDecodes(Layout.java:238) 在 javax.faces.component.UIComponentBase.processDecodes (UIComponentBase.java:1176) 在 javax.faces.component.UIComponentBase。processDecodes(UIComponentBase.java:1176) 在 javax.faces.component.UIComponentBase.processDecodes(UIComponentBase.java:1176) 在 javax.faces.component.UIComponentBase.processDecodes(UIComponentBase.java:1176) 在 javax.faces.component.UIComponentBase .processDecodes(UIComponentBase.java:1176)

对此的任何帮助将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T16:40:36.390

经过一些研究，我认为这是 Primefaces 3.2 中的一个错误，但不确定。所以我升级到 3.3.1 并将我的 mojarra 升级到 2.1.14。我目前没有这个问题。

# c# - 测试一个常数的所有可能值

> ID：13178395
> 
> 赞同：0
> 
> 时间：2012-11-01T13:46:17.457
> 
> 标签：c#, unit-testing, constants, mstest

我的应用程序中有一个常量，它决定了程序其他部分的操作。我更改此常数以快速轻松地更改程序的操作。

在我的例子中，常数是 a`bool`所以它可以有两个值之一。

我想编写一个测试，以确保无论常量是否设置为 true，我的代码都能正常工作。

例如，假设我的方法是这样的：

```
public boolean IsEqual(float a, float b) {
    var epsilon = 0.0001;

    if (Constants.Exact) return (Math.Abs(a-b) < epsilon);
    else return (Math.Floor(a) == Math.Floor(b)); 
} 
```

`Constants`看起来像这样：

```
public static class Constants {
    /// <summary>
    /// Determines whether an exact comparison should be made, or whether fractional parts should be disregarded.
    /// </summary>
    public const bool Exact = true;
} 
```

并且测试方法是：

```
[TestMethod]
public void TestEquality() {
    var five = 5;
    var three = 3;

    Assert.True(Equals(five, three));
} 
```

我能想出的解决方案：

*   像常量不存在一样编写测试，将常量设置为`true`并运行测试，然后将其设置为 false 并运行测试。不好，因为如果我有 8 个这样的常量，我不想运行测试 256 次。
*   不要让它成为一个常数。在测试方法内部，首先将常量设置为true，断言，然后为false，再次断言。但是，我首先将其设为常量的原因是为了保证它不会在运行时更改。

我想我真正想要的是一种使其在适当的应用程序方面保持不变的方法，但就测试项目而言不是不变的。

那么我怎样才能使这样的情况起作用呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-01T13:52:08.333

创建函数的两个重载，一个带有附加`exact`参数，另一个使用`Exact`隐式常量

```
public bool IsEqual(float a, float b)
{
    return IsEqual(a, b, Constants.Exact);
}

public bool IsEqual(float a, float b, bool exact)
{
    if (exact)
        return a == b;
    else
        return Math.Floor(a) == Math.Floor(b);
} 
```

`excat`现在您可以在不依赖预定义常量的情况下测试任何值。

* * *

**更新**使用`IEquatable<float>`（见评论）

`IEquatable<T>.Equals`只有一个参数。因此我假设`Value`在这个例子中另一个值被定义为属性

```
public float Value { get; set; }

#region IEquatable<float> Members

public bool Equals(float other)
{
    return Equals(other, Constants.Exact);
}

#endregion

public bool Equals(float other, bool exact)
{
    if (exact)
        return Value == other;
    else
        return Math.Floor(Value) == Math.Floor(other);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-01T13:55:31.543

您可以在内部创建常量并通过属性表示它，所以您说

```
 private const bool _exact = false;

   public bool Exact 
   {  
     get { return _exact };
     set { throw new Exception("Don't set this, you crazy donkey") };
   } 
```

然后为了测试，您可以创建一个继承自常量类但覆盖该`Exact`属性的类。只要您在父类中通过它的面向公众的名称来调用它，那么您应该能够改变测试中的值并在您的常规实现中保持它不变。

编辑：事实上，如果您的常量都定义在一个类中，那么最好的工作方法是简单地从该类中提取接口，然后您可以在测试时切换实现（或者如果您使用的是 DI某种框架）或简单地使用模拟框架来模拟给定测试所需的任何部分。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-01T13:50:31.883

使用枚举而不是常量。这样您就可以防止它被更改为意外的东西，但它是可修改的并且可以扩展更多的值。

# java - 如何在java中删除文本文件的第一行

> ID：13178397
> 
> 赞同：5
> 
> 时间：2012-11-01T13:46:22.230
> 
> 标签：java

> **可能重复：**
> [替换 Java 中文本文件的第一行](https://stackoverflow.com/questions/202148/replace-first-line-of-a-text-file-in-java)
> [Java - 在文件中查找一行并删除](https://stackoverflow.com/questions/1377279/java-find-a-line-in-a-file-and-remove)

我正在尝试找到一种方法来使用 java 删除文本文件中的第一行文本。想用扫描仪来做...有没有不需要 tmp 文件的好方法？

谢谢。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-11-01T14:17:10.240

如果您的文件很大，您可以使用以下方法在原地执行删除，而无需使用临时文件或将所有内容加载到内存中。

```
public static void removeFirstLine(String fileName) throws IOException {  
    RandomAccessFile raf = new RandomAccessFile(fileName, "rw");          
     //Initial write position                                             
    long writePosition = raf.getFilePointer();                            
    raf.readLine();                                                       
    // Shift the next lines upwards.                                      
    long readPosition = raf.getFilePointer();                             

    byte[] buff = new byte[1024];                                         
    int n;                                                                
    while (-1 != (n = raf.read(buff))) {                                  
        raf.seek(writePosition);                                          
        raf.write(buff, 0, n);                                            
        readPosition += n;                                                
        writePosition += n;                                               
        raf.seek(readPosition);                                           
    }                                                                     
    raf.setLength(writePosition);                                         
    raf.close();                                                          
} 
```

请注意，如果您的程序在上述循环的中间终止，您可能会出现重复的行或损坏的文件。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-11-01T13:48:13.853

```
Scanner fileScanner = new Scanner(myFile);
fileScanner.nextLine(); 
```

这将从文件中返回第一行文本并将其丢弃，因为您不会将其存储在任何地方。

要覆盖现有文件：

```
FileWriter fileStream = new FileWriter("my/path/for/file.txt");
BufferedWriter out = new BufferedWriter(fileStream);
while(fileScanner.hasNextLine()) {
    String next = fileScanner.nextLine();
    if(next.equals("\n")) 
       out.newLine();
    else 
       out.write(next);
    out.newLine();   
}
out.close(); 
```

请注意，您必须以`IOException`这种方式捕获和处理一些 s。此外，该`if()... else()...`语句在`while()`循环中是必要的，以保持文本文件中存在的任何换行符。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-01T13:50:45.567

如果没有临时文件，您必须将所有内容保存在主内存中。其余的很简单：循环遍历这些行（忽略第一行）并将它们存储在一个集合中。然后将这些行写回磁盘：

```
File path = new File("/path/to/file.txt");
Scanner scanner = new Scanner(path);
ArrayList<String> coll = new ArrayList<String>();
scanner.nextLine();
while (scanner.hasNextLine()) {
    String line = scanner.nextLine();
    coll.add(line);
}

scanner.close();

FileWriter writer = new FileWriter(path);
for (String line : coll) {
    writer.write(line);
}

writer.close(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-01T13:50:13.230

如果文件不是太大，您可以将 is 读入一个字节数组，找到第一个换行符并将数组的其余部分从位置零开始写入文件。或者您可以使用内存映射文件来执行此操作。

# regex - 如何匹配忽略其属性的标签

> ID：13178399
> 
> 赞同：1
> 
> 时间：2012-11-01T13:46:28.377
> 
> 标签：regex

所以说我有一些看起来像下面的 HTML

```
<a href="#">This text</a>
<a href="#" target="">This Text</a>
<a href="#" oncick="" target="">This Text</a> 
```

什么正则表达式会抓住“这个文本”？我对正则表达式的概念真的很陌生，所以尝试了“（。*）”之类的东西，但并没有真正取得太大的成功。任何人都可以提供建议吗？:D

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-01T13:51:27.100

您可以使用以下正则表达式

```
<a\b[^>]*>(.*?)</a> 
```

[您可以在此](http://www.regular-expressions.info/examples.html)站点上找到更多示例

# git - git log --pretty to file with error

> ID：13178401
> 
> 赞同：0
> 
> 时间：2012-11-01T13:46:36.963
> 
> 标签：git, git-log

我这样做：

```
git log --all --format=format:'%C(bold blue)%h%C(reset) - %an%C(reset)%C(bold yellow)%d%C(reset) - %C(bold green)(%ad)%C(reset) %C(white)%s%C(reset) %C(bold white)' 
```

正确的结果：

```
2c6f8b9 - Matheus - (Thu Sep 20 14:06:51 2012) ++ import clientes, ++ now send email ok! 
102c911 - LIVE - (Thu Sep 20 13:25:24 2012) ++ db 
93bf163 - Matheus - (Wed Sep 19 17:31:18 2012) ++ import clientes 
8539cf4 - Matheus - (Wed Sep 19 16:41:56 2012) ++ import clientes, ++ now with defaultBilling and defaultShipping 
843509a - Matheus - (Wed Sep 19 16:36:19 2012) ++ import clientes, ++ now with defaultBilling and defaultShipping 
b8de06d - Matheus - (Wed Sep 19 15:48:05 2012) ++ import clients 
```

到我的文件：

```
git log --all --format=format:'%C(bold blue)%h%C(reset) - %an%C(reset)%C(bold yellow)%d%C(reset) - %C(bold green)(%ad)%C(reset) %C(white)%s%C(reset) %C(bold white)' > file 
```

保存在文件输出时的错误结果：

```
[1;34ma36b984[m - LIVE[m[1;33m[m - [1;32m(Thu Sep 20 16:16:57 2012 -0300)[m [37m++ import clientes, ok!![m [1;37m
[1;34m1794d80[m - Matheus[m[1;33m[m - [1;32m(Thu Sep 20 15:31:28 2012 -0300)[m [37mMerge remote-tracking branch 'live/master' into import-clientes[m [1;37m
[1;34me8a1735[m - LIVE[m[1;33m[m - [1;32m(Thu Sep 20 15:23:00 2012 -0300)[m [37m++ db[m [1;37m
[1;34m7c838ef[m - Matheus[m[1;33m[m - [1;32m(Thu Sep 20 15:00:52 2012 -0300)[m [37m++ import-clientes, external file[m [1;37m
[1;34m2c6f8b9[m - Matheus[m[1;33m[m - [1;32m(Thu Sep 20 14:06:51 2012 -0300)[m [37m++ import clientes, ++ now send email ok![m [1;37m
[1;34m102c911[m - LIVE[m[1;33m[m - [1;32m(Thu Sep 20 13:25:24 2012 -0300)[m [37m++ db[m [1;37m
[1;34m93bf163[m - Matheus[m[1;33m[m - [1;32m(Wed Sep 19 17:31:18 2012 -0300)[m [37m++ import clientes[m [1;37m 
```

我尝试没有漂亮的格式，完美地工作。后来我尝试了漂亮的格式，不工作！

我如何以漂亮的格式将其保存在文件中？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T13:53:51.790

存储在文件中的输出正是您向 git 询问的内容。

第一行 ,`[1;34ma36b984[m`映射到颜色代码以在您的 shell ( `[1;43m`) 中输出蓝色，然后是您的短提交哈希 ( `a36b984`)，然后是颜色重置。

如果您希望文件本身可读，请省略颜色代码。或者，cat 文件，你的 shell 应该为输出着色。

# django - 为 django modelform 外键字段设置动态默认值

> ID：13178402
> 
> 赞同：1
> 
> 时间：2012-11-01T13:46:42.680
> 
> 标签：django, django-forms

我想将模型外键的默认值设置为查询集中的第一项。

查询集在表单**init**方法中动态生成，并按顺序返回，以便 95% 的时间用户将选择第一项。

如何将默认值设置为查询集中的第一项？

我已经在表单 init 方法中尝试过这个，但它似乎不起作用：

```
self.fields['my_foreignkey_field'].initial = self.fields['my_foreignkey_field'].queryset[0] 
```

在视图中使用“set_trace”，我可以看到`my_form['my_foreignkey_field'].field.initial`确实设置为正确的值，但它没有填充模板中的选择字段。

以下是表单 init 方法的更多详细信息：

```
def __init__(self, *args, **kwargs):
    super(My_Form, self).__init__(*args,**kwargs) 
    if self.instance.some_fk_field.some_value > 0:
        self.fields['important_fk_field'].queryset = self.get_important_queryset()
        if self.instance.some_fk_field.some_value == 1:
            #set the default
            self.fields['important_fk_field'].initial = self.fields['important_fk_field'].queryset[0].pk
    else: #foreignkey should be null
        self.fields['important_fk_field'].queryset = FK_Model.objects.filter(pk=-1)  #Empty queryset 
```

# php - 如果不存在则重命名mysql表，如果不创建新表

> ID：13178410
> 
> 赞同：0
> 
> 时间：2012-11-01T13:47:15.467
> 
> 标签：php, mysql, mysqli

目前我正在尝试使用 mysqli 创建一个新表。如果表“默认”存在，则将其重命名为当前日期和时间，如果不存在，则创建一个名为 default 的新表。我从以前的 php 页面获取日期和时间，该页面包含纯文本中的当前日期和时间，没有 / ， - ， :. 我怎样才能使用 mysqli 做到这一点？

```
$bk_time=$_POST['system_clock']."backup";
$conn = new mysqli($db_hostname, $db_username, $db_password);
if (mysqli_connect_errno()) {
  exit('Connect failed: '. mysqli_connect_error());
}
//check default exist
$sql = "SHOW TABLES FROM `descript`.`default`;";
if ($conn->query($sql) === TRUE) {

  $sql. = 'RENAME TABLE `default` TO `$bk_time`';
  echo 'exist';
}
else {
 echo 'not exist ';
 $sql. = 'CREATE TABLE `descript`.`default`';
}
mysqli_autocommit($conn, false);
mysqli_query($conn, $sql); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T14:01:42.677

我建议使用存储过程：

1.  检查表是否存在
2.  重命名表

第一个将类似于以下内容

```
IF EXISTS (
(SELECT * FROM information_schema.TABLES
    WHERE TABLE_SCHEMA = DATABASE()
    AND TABLE_NAME = _tableName))
    THEN SET _result = 0;
ELSE
    SET _result = 1;
END IF; 
```

# ruby-on-rails - 在活动记录查询中使用和

> ID：13178412
> 
> 赞同：0
> 
> 时间：2012-11-01T13:47:18.083
> 
> 标签：ruby-on-rails, ruby-on-rails-3

是否允许在活动记录中使用 AND 条件？例如

```
Model.where(a>b AND c>d).all 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-01T13:48:45.823

AND 是连接条件的默认范围。或者更棘手。

`Model.where('a > b and c > d')`或`Model.where('a > b').where('c > d')`。

[http://guides.rubyonrails.org/active_record_querying.html](http://guides.rubyonrails.org/active_record_querying.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T13:51:25.523

当然。

Model.where("a > ? AND c > ?", @my_b_variable, params[:d])

...有效。

请参阅： http: [//guides.rubyonrails.org/active_record_querying.html#array-conditions](http://guides.rubyonrails.org/active_record_querying.html#array-conditions)

# javascript - 这个 JS 函数运行良好，但是当使用原型添加为新的 String 方法时，失败了......

> ID：13178413
> 
> 赞同：0
> 
> 时间：2012-11-01T13:47:24.197
> 
> 标签：javascript, prototype

我有这段代码，还有一点初学者的问题：

```
function findfruit (food){

var fruitvalues = ["apple", "orange", "banana", "mango", "kiwi", "watermelon"];
if (fruitsvalues.indexOf(food) != -1){
    return true;
    }
else {
    return false;
    }
    }

var food = prompt("Write down any food you like");
findfruit(food) // returns always the correct answer, true or false 
```

所以事情是这样的：这很好用，没有问题，但如果我这样做：

```
String.prototype.fruit = findfruit; 
```

然后我试着做

```
if (food.fruit != true) {
    alert("your food is not a fruit");
    }
else {
    alert("your food is a fruit"); 
```

它不起作用，并且总是导致“错误”。我怀疑我的问题是，当我调用时`food.fruit`，函数`findfruit`启动时没有使用我刚刚创建的字符串变量`food`，但我不明白为什么。我只是在阅读关于如何使用的教程`prototype`，我找不到任何错误（尽管我确定有什么问题）。

我将不胜感激任何帮助。我知道这一定很容易，但是我在这里找到的关于原型的其他问题无济于事。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T14:01:01.887

1) 写作`food.fruit`不是函数调用。它只会返回函数本身（显然不能等于 true）。

2）您可以访问从中调用函数的对象作为`this`。它不会作为参数传递给您的函数（这不是 Python）。正确的实现是

```
String.prototype.fruit = function() {
   var fruitvalues = ["apple", "orange", "banana"];
   return (fruitvalues.indexOf(this.toString()) != -1);
} 
```

3) 不鼓励将这样的函数添加到内置类型的原型中。这很诱人，但您必须问自己：“这是否足够通用，以至于我在程序中的任何地方都需要它？”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T14:06:19.850

如果您只是使用它来引用字符串，您实际上将被限定为该函数。this.valueOf 将查看父对象（字符串）。

```
String.prototype.fruit = function () {
var fruitvalues = ["apple", "orange", "banana", "mango", "kiwi", "watermelon"];
if (fruitvalues.indexOf(this.valueOf()) != -1){
    return true;
}
else {
    return false;
}
}

var food = 'apple';

if (food.fruit() != true) {
    console.log("your food is not a fruit");
}
else {
    console.log("your food is a fruit");
} 
```

# html - 菜单的伪下划线选择器

> ID：13178414
> 
> 赞同：0
> 
> 时间：2012-11-01T13:47:29.140
> 
> 标签：html, css

我有一个水平列表菜单，我想在其上使用伪选择器：当您将鼠标悬停在菜单项上时，它应该有一个粗色下划线。每个菜单项都有不同的宽度，其下划线效果应与该宽度相匹配

这是一个带有下划线菜单的示例网站：[http ://www.theblackswantheory.org/](http://www.theblackswantheory.org/)

这是我的清单：

```
<div id="other">
  <div id="otherTable">
    <ul id="ul1">
        <li>Web Design</li>
        <li>Graphic Design</li>
        <li>Google Search Optimization</li>              
    </ul>
  </div>
</div> 
```

CSS：

```
#otherTable{
    display: table;
    margin: 0 auto;
}
#otherTable ul{
    list-style: none;
}
#otherTable ul li{
    display: inline;
    margin: 10px;
}
ul#ul1{
    color: #fff;
} 
```

那么解决这个问题的最佳方法是什么？我尝试了几件事，但效果不佳（表格，下面的另一个带有下划线的列表等...）

如果可能的话，我希望它是纯 CSS 和没有 javascript ......我相信它是

谢谢你

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T13:51:05.847

```
ul#ul1 > li:hover{
    text-decoration:underline;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-01T14:00:55.267

使用底部边框来模拟下划线（参见[jsfiddle](http://jsfiddle.net/BsZKG/)）：

```
#otherTable ul li:hover {
  border-bottom: solid red 0.2em;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-01T14:14:19.313

[http://jsfiddle.net/Tymek/2P8UL/](http://jsfiddle.net/Tymek/2P8UL/)

HTML

```
<div id="menu">
    <ul>
        <li><a href="#">Web Design</a></li>
        <li><a href="#">Graphic Design</a></li>
        <li><a href="#">Google Search Optimization</a></li>              
    </ul>
</div>​ 
```

CSS

```
#menu ul,
#menu li,
#menu a {
    background: #111;
}    

ul#menu {
    list-style: none;
}

#menu li {
    display: block;
    float: left;
}

#menu a {
    display: block;
    margin: 0 0.5em;
    padding: 15px 0 7px;
    color: #ccc;
    text-decoration: none;
    text-transform: uppercase;
    font: 13px/18px Arial, Helvetica, sans-serif;
    font-weight: 300;    
}

#menu a:hover {
    color: #fff;
    padding-bottom: 4px;
    border-bottom: 3px solid #f00;
} 
```

**关键部分：**

```
#menu a {
    padding: 15px 0 7px;  
}

#menu a:hover {
    padding-bottom: 4px;
    border-bottom: 3px solid #f00;
} 
```

下次使用萤火虫，或其他东西来分析你的例子。​</p>

# php - 使用 PHP 钩子向联系表单 7 提交添加操作

> ID：13178416
> 
> 赞同：2
> 
> 时间：2012-11-01T13:47:39.163
> 
> 标签：php, jquery, ajax, wordpress, contact-form-7

我在 Wordpress 的 Contact Form 7 插件中实现一些自定义功能时遇到了一些麻烦。

我想做的很简单。有问题的联系表格是一个普通的联系查询表格，所以我需要保留通常的功能（邮寄数据）。但是，我在表单上还有一个复选框，允许发件人选择是否订阅客户的邮件列表以及邮寄联系查询。

客户使用 Bronto 进行群发邮件（类似于 CC 或 Mailchimp）。Bronto 有一个“直接添加”功能（[更多信息在这里](http://community.bronto.com/blog/how-to/adding-contacts-direct-add)），它允许您通过嵌入一个包含必要参数（电子邮件地址、要订阅的列表等）的图像来发送参数以将联系人添加到 Bronto 帐户。

我可以用联系表单参数构造图像 url 没有问题，但实际上发送图像请求是另一回事。我在这里对 PHP 和 JS 都束手无策，不知道该选什么课。

目前我正在使用`wpcf7_before_send_mail`CF7 中内置的 php 挂钩，这似乎允许我收集表单数据并构建 URL。但是，由于该插件使用 AJAX 并且实际上并没有在表单提交时重定向到另一个页面，因此我似乎无法成功使用任何类型的 php 输出（回声、警报甚至 error_log），大概是因为服务器不知道什么它应该写到。

在functions.php中：

```
add_action( 'wpcf7_before_send_mail', 'bronto_contact_add' );
function bronto_contact_add( $cf7 ) {
    $emailcf = $cf7->posted_data['email'];
    echo $emailcf;
} 
```

这只是一个测试，看看 echo 是否有效 - 它没有。相反，表单只是在提交时挂起，我永远看到旋转加载 gif。

我需要做的是使用来自 cf7 对象的参数构建图像 url（我可以做没有问题），然后以某种方式将该图像请求发送到 Bronto 服务器（这是我感到困惑的部分）。如果这是一个在提交时重定向到另一个 php 页面的普通表单，我这样做完全没有问题，但它使用我不太了解的 AJAX，所以我现在很迷茫。

任何人都可以帮助阐明实现这一目标的最佳方法可能是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-01T14:53:21.537

如果在您附加函数后提交挂起，至少您知道它有效果。我对 Contact Forms 7 不是很熟悉，但这可能不是回显的合适位置，我猜它挂起是因为您正在写入缓冲区，然后它正在尝试进行重定向（检查您的错误日志）。如果您想查看 的内容`$cf7`，更好的方法是：

```
// first option, using print_r()
error_log(print_r($cf7, true));

// second option, using var_dump() if you need the additional output
ob_start();                    // start buffer capture
var_dump($cf7);                // dump the values
$contents = ob_get_contents(); // put the buffer into a variable
ob_end_clean();                // end capture
error_log($contents);          // log contents of $cf7 
```

然后变量的内容`$cf7`将出现在您的 PHP 错误日志中，它将告诉您如何访问不同的组件。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-05T19:09:08.240

我在寻找 CF7 相同问题的类似解决方案时遇到了您的线程 - 在尝试将信息传递到我自己的 CRM 后端数据库时，提交时挂起。

我在网络上的任何地方都没有看到与 CF7 集成相关的这个问题的答案，所以我想我会在这里发布我发现的问题以及它是如何解决的。我不是专业人士，但该解决方案在测试中有效，如果有人有任何要添加到此解决方案的内容，请加入

基本上，如果您使用 Wordpress 并尝试将信息传递到 CRM 数据库，我将假设您的数据库表与您的 Wordpress 站点数据库不在同一个数据库中。然后您尝试做的是同时建立两个数据库连接，但在尝试连接到您的 CRM 时，您的 Wordpress 数据库正在重复使用参考 ID。我发现这是测试期间提交挂起的根本原因。

我使用了 PHP 4 中的一个已弃用的命令，该命令在 PHP 5 mysql_connect 中仍然有效：

```
mysql_connect('localhost', 'root', '', true); 
```

通过将“true”作为第四个参数传递，您可以将连接与为您的 Wordpress 站点运行的连接分开。这样做并且CF7提交没有挂起，它提交给CRM并同时作为电子邮件发送出去，没问题。

但也要注意，如果您的 CRM 数据提交语法有问题，即变量名称错误等。它也会挂起。如果传递 'true' 不起作用，请先检查您的代码以确保它是干净的。

如果有人阅读这篇文章有一个等效的解决方案，我有兴趣知道它的“mysqli”命令，我使用 mysqli 进行了尝试，但无法让它工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-12T20:11:18.230

有什么理由不能只为表名添加前缀并将它们添加到同一个数据库中吗？这似乎是一个更好的解决方案，并且可以与 mysqli 一起正常工作，而不是使用过时的、不安全的驱动程序.....

我想，我只是不明白在这种情况下使用两个数据库的意义......我会尝试使用一个。

# javascript - 仅对已修改的文件执行 jar 命令

> ID：13178422
> 
> 赞同：1
> 
> 时间：2012-11-01T13:47:54.867
> 
> 标签：javascript, ant, yui-compressor, ant-contrib

所以我使用 Yuicompressor 来缩小我的 ant 脚本上的 javascripts/css。这个过程对我的项目来说需要很长时间。我想知道是否有任何方法可以让它只在修改过的文件上执行。

```
<for param="file">
                        <path>
                            <fileset dir="${folder}">
                                <include name="*.js" />
                                <include name="*.css" />
                            </fileset>
                        </path>
                        <sequential>
                            <var name="file" value="@{file}"/>

                            <echo message="Minifying ${file}" /> 
                            <java jar="yuicompressor.jar" fork="true">
                                <arg value="${file}" />
                                <arg value="-o" />
                                <arg value="${outfile}" />
                            </java>
                        </sequential>
</for> 
```

此外，我正在做一些非常 hacky 的东西来生成 ${outfile} （使用大量的 propertyregex 标签）。我想以一种更优雅的方式将我所有的缩小文件放在一个 min 文件夹中。例如：

文件夹/source.js

去

最小/文件夹/source.js

和

文件夹/子文件夹/source.js

去

最小/文件夹/子文件夹/source.js

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T14:12:15.637

我看到您已经在脚本中使用了 antcontrib 任务。

因此，请查看`OutOfDate`同一库中的任务-> [http://ant-contrib.sourceforge.net/tasks/tasks/outofdate.html](http://ant-contrib.sourceforge.net/tasks/tasks/outofdate.html)

我认为它会帮助你实现你正在寻找的东西。

# sencha-touch-2 - Sencha 中选项卡项目点击的侦听器

> ID：13178423
> 
> 赞同：2
> 
> 时间：2012-11-01T13:47:59.117
> 
> 标签：sencha-touch-2, listener, tabpanel

在我的应用程序中，我使用了一个包含 5 个项目的选项卡面板。每个项目包含大约 6 个添加到卡片布局中的面板。当我在选项卡项内的最后一个面板时，我需要通过单击底部选项卡面板返回初始面板（有点类似于 iOS 中的普通选项卡视图控制器）。我遇到了[一些我在这里找到的解决方案](https://stackoverflow.com/questions/10519731/how-to-call-a-function-on-a-controller-when-tapping-on-tabpanel-sencha-touch-2)，但它似乎只有在我在选项卡之间切换时才有效。事实上，我想在同一个标​​签图标上收听点击事件。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-06T11:37:31.950

我已经解决了你的问题。我认为这正是你想要的。希望这可以帮助。如果不是这样，请发表评论。

1）。**查看 (MyTabPanel1.js)**

```
 Ext.define('MyApp.view.MyTabPanel1', {
    extend: 'Ext.tab.Panel',
    config: {

            scrollable: 'vertical',
             items:
            [
                {
                   xtype: 'panel',
                   id:'cardpanel1',
                   title: 'Tab1',              
                   layout: 'card',
                        items: [
                            {  
                                html: "First Item",
                                items:
                                [
                                {
                                    xtype: 'button',
                                    text: 'Forward',
                                    handler: function() {
                                    Ext.getCmp('cardpanel1').setActiveItem(1);
                                    console.log('Going to Second Item');
                                    }
                                }
                                ]
                            },
                            {
                                html: "Second Item",
                                items:
                                [
                                {
                                    xtype: 'button',
                                    ui: 'confirm',
                                    text: 'Go back',
                                    handler: function() {
                                    Ext.getCmp('cardpanel1').setActiveItem(0);
                                    console.log('Going to First Item');
                                    }
                                }
                                ]
                            }

                        ]               

                },

                {
                    xtype: 'panel',
                    title: 'Tab2',
                    scrollable: true,
                    items: [
                        {
                            xtype: 'button',
                            margin: 10,
                            ui: 'action',
                            text: 'Tab2'
                        }

                    ]
                },
                {
                    xtype: 'panel',
                    title: 'Tab3',
                    scrollable: true,
                    items: [
                        {
                            xtype: 'button',
                            margin: 10,
                            ui: 'action',
                            text: 'Tab3'
                        }
                    ]
                }

            ]
        }

    }); 
```

2）。**控制器（MainController.js）**

```
 Ext.define('MyApp.controller.MainController', {
        extend: 'Ext.app.Controller',
        config: {
            control: {

                "tabpanel #ext-tab-1":{  //ext-tab-1 is the id for the 1st tab generated by Sencha
                   tap: 'ontap'
                }            
            }
        },

        ontap: function (){
        console.log('inside controller');
        Ext.getCmp('cardpanel1').setActiveItem(0);
        }

    }); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-07T08:55:42.940

我会给出一个更简单的解决方案

这是我称为 Viewport 的视图，它是一个 TabPanel：

```
Ext.define('Sencha.view.iphone.Viewport',{
           extend: 'Ext.TabPanel',
           xtype: 'newviewport',
           alias: 'widget.newTabPanel', 
```

现在在我的控制器文件中：

```
 Ext.define('Sencha.controller.iphone.main', {
        extend: 'Ext.app.Controller',
        config:
        {
        refs: {
        theMainTabPanelTabbarTab: 'newTabPanel > tabbar > tab', //this the tab of the tabpanel, if we listen to it that way we will know of tab panel tap.
        },
        control: {
        theMainTabPanelTabbarTab:{
        tap: 'onTapMainTabPanel'
        }
} 
```

这是一个工作代码，工作正常。希望这会对您有所帮助。

# c# - RegEx 用于缺少一位数字的货币？

> ID：13178426
> 
> 赞同：2
> 
> 时间：2012-11-01T13:48:04.747
> 
> 标签：c#, javascript, asp.net, regex

我有以下正则表达式...

```
(\d*,?){1,5}\.?\d{2} 
```

...并且它将成功匹配此列表中除单个数字之外的**所有**内容...`9`

```
9
99
999
9,999
99,999
999,999
9,999,999
99,999,999
999,999,999

9.99
99.99
999.99
9,999.99
99,999.99
999,999.99
9,999,999.99
99,999,999.99
999,999,999.99

9
99
999
9999
99999
999999
9999999
99999999
999999999

9.99
99.99
999.99
9999.99
99999.99
999999.99
9999999.99
99999999.99
999999999.99 
```

......你能帮我匹配那些吗？也许整个 RegEx 都是错误的，而我只是走运了？

## 用法

我在客户端使用它`RegularExpressionValidator`。

## 技术

ASP.NET 网络表单 4.0

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-01T13:56:25.023

目前您正在寻找一些数字和/或逗号，后跟一个可选点，然后是两个（非可选）数字。您还允许例如`99,.99`.

尝试

```
\d+(,\d{3})*(\.\d{2})? 
```

这是至少一个数字，后跟零个或多个（逗号数字数字数字）组，然后是可选的（点数字数字）组。

# jquery - 渲染backbone.js时更改表格的背景颜色

> ID：13178431
> 
> 赞同：0
> 
> 时间：2012-11-01T13:48:15.320
> 
> 标签：jquery, css, backbone.js

我创建了一个主干视图，用于呈现表格行模板中的行。我希望能够在渲染时更改表格行的背景颜色。那就是 fetch 需要时间从服务器获取所有项目，所以我想知道在调用另一个更改表中某些行的背景的方法之前如何确保视图已完全呈现。我只使用一个视图来呈现整个集合。我正在使用一个使用 handlebars.js 的模板。有人可以帮我弄这个吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T14:28:13.330

我找到了解决方案。我使用了 Jquery 的 when 和 then 函数。我使用 then 函数来调用我的条件方法，并将 fetch 放在 when 下。它现在正在工作并更改 bg-clor。唯一的问题是该表具有 twitter bootsraps 的 css“table-bordered”类，因此 bg-color 仅显示在交替行中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T14:17:18.177

根据您的评论，听起来您有一个单独的视图来负责渲染所有行。假设您使用的是单个模板，您可以在其中添加一个条件语句。例如

```
<div id="rows-template" type="text/template">
<% _each(list, function(item) { %>
    <li <% if (item.something) { 'class="blue"' } %> ><%= item.name %></li>
<% }); %>
</div> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-01T13:59:58.607

我只是告诉您如何修改元素的背景颜色，因为您的问题不清楚。

```
 $(" element ").css("background-color", "required-color") 
```

或者

```
 $(" element ").addClass("background_class") 
```

并添加这样的样式：

```
 .background_class{
        background-color: color_name;
    } 
```

如果这不是您想要的，请尝试发布一些代码，我们将尝试回答。

# jquery - 如果 jquery 存在下一个元素，则删除上一个元素

> ID：13178433
> 
> 赞同：1
> 
> 时间：2012-11-01T13:48:21.340
> 
> 标签：jquery, html

我再次希望您的共同专业知识将有助于找到一个优雅的解决方案。我正在自动化报告以最大限度地减少人为输入（和错误）。报告的基础是一个网页，其中包含以下代码：

```
</p></li>

 <li>ARTICLE 1<br />
    <p>    
       <div class="list">
           Nothing found. 
       </div>
    </p>
 </li>
 <li>
    <p>ARTICLE 2</p>    
    <div class="list">
    <h4 class="sub-heading">ITEMS</h4>
     <ul>
        <li class="item">
           <span class="title"> 
```

p 元素是我创建的，而 div class="list" 是我无法触及的插件的输出。基本上，该插件使用特定查询扫描数据库，并生成为给定查询找到的项目列表或“未找到”字符串。然后操作员将其复制粘贴到某个地方并删除“ITEMS”标题和“Nothing found”。使报告更具可读性。到目前为止，我设法做的是使用这些 jquery：

```
$(".list .sub-heading").addClass("hidden");
$(".list:contains('Nothing found.')").addClass("hidden"); 
```

我想要实现的是添加一个 jquery，它不仅删除包含“Nothing found.”的 div，还删除前面的元素，即上面示例中包含“ARTICLE 1”的行。如果您能提出合理的解决方案，请提供帮助。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T13:54:04.460

您可以`closest`方法并隐藏`li`隐藏所有内容的元素：

```
$(".list:contains('Nothing found.')").closest('li').addClass("hidden"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T13:56:18.780

你应该能够做到这一点：

```
$(".list:contains('Nothing found.')").parent('li').addClass("hidden"); 
```

# php - 需要使用 php 5.2.9 和 xampp 1.8.1 组件

> ID：13178436
> 
> 赞同：0
> 
> 时间：2012-11-01T13:48:24.327
> 
> 标签：php, apache, xampp

我的网站使用的是 Xampp 版本 1.7.1，它包含 apache 2.2 和 php 5.2.9， **我收到了客户端的要求，将 apache 2.2 更改为 2.4**。

我们的应用程序是一个产品，它作为安装包提供给客户。我们在安装中使用 Xampp 独立版本

所以我使用了最新的 Xampp 1.8.1，它已经有了这个 apache 2.4。但是最新的 Xampp 版本使用了最新的 php 引擎（php 5.4）。所以我们的网站不能使用这个最新版本（之前是 php 5.2.9）。

为了解决这个问题，我用旧版本的 php 替换了最新 Xampp 中的 php 文件夹。并使用 Apache Lounge [ [https://www.apachelounge.com/download/](https://www.apachelounge.com/download/) ] - [https://www.apachelounge.com/download/win32/modules-2.4/php5apache2_4.dll-php-5.2-win32提供的补丁。压缩](https://www.apachelounge.com/download/win32/modules-2.4/php5apache2_4.dll-php-5.2-win32.zip)

现在一切正常，但是 mcrypt 扩展存在问题 我在 php.ini 中启用了 mcrypt 扩展。但这并没有启用。在 php 中使用 mcrypt_decrypt() 时出现错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T14:21:10.923

您需要[从 sourceforge.net 下载 mcrypt](http://mcrypt.sourceforge.net/)

您可以找到有关[要求](http://de.php.net/manual/en/mcrypt.requirements.php)和[安装](http://de.php.net/manual/en/mcrypt.installation.php)链接的其他详细信息

如果您使用的是 Windows，请确保该文件`php_mcrypt.dll`位于*xampp/php/ext/*目录`libmcrypt.dll`以及*xampp/apache/bin中。*

# java - 在java中实现埃及算法

> ID：13178438
> 
> 赞同：3
> 
> 时间：2012-11-01T13:48:27.067
> 
> 标签：java, algorithm, data-structures, recursion, multiplication

我想在Java中递归地找到两个数字的乘法，只使用加法、减法和比较。所以，我用谷歌搜索，发现`Egyptian Algorithm`符合问题要求。

但是，我不确定在达到`base case`.

例子：

```
13 x  30

1  -- 30

2  -- 60

4  -- 120

8  -- 240 //we stop here because the double of 8 is larger than 13 
```

为了找到结果，我们将`left column`等于 13的数字相加`1+4+8`，另一方面，我们将其相反的数字相加，`right column`即`30+120+240 = 390`结果。

但是现在如何以编程方式完成最后一部分？如何检查要添加的数字？我希望你们明白我的意思。只需要提示。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T14:32:23.693

这是解决问题的伪代码：

```
function egyptian(left, right)
  prod := 0
  while (left > 0)
    if (left is odd)
      prod := prod + right
    left := halve(left)
    right := double(right)
  return prod 
```

基本上，与其等到最后，不如在创建模板时检查模板的每一行并对其是否属于输出进行求和。[我在我的博客上](http://programmingpraxis.com/2010/01/15/three-binary-algorithms/)讨论了这个算法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T22:06:33.783

好的，我使用蛮力算法做到了。不过，这是一个 BigO-(n)。我确信有更有效的方法来实现它。目前。我正在解决这个问题。

多谢你们！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-01T13:55:34.570

*以相反的顺序*循环遍历创建的结果

 *每次，如果您的乘数余数（开始等于您的乘数）大于左列中的数字，则从您的乘数中减去左列并将右列添加到您的结果（从零开始）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-01T13:55:46.970

您可能已经找到了这篇 Wikipedia[文章](http://en.wikipedia.org/wiki/Ancient_Egyptian_multiplication)。

看一下“分解”部分的最后一部分。你会发现你必须实现的子算法。*

# sql - 部署到 apppot 时，Google Cloud SQL 不起作用

> ID：13178439
> 
> 赞同：1
> 
> 时间：2012-11-01T13:48:27.083
> 
> 标签：sql, google-app-engine, gwt, google-cloud-sql

我有一个 GWT 项目，使用 google sql 云数据库。在本地开发时一切正常（开发模式）。但是当我将它部署到 apppot 时，它无法连接到数据库。

没有人知道为什么会这样吗？我应该在某处更改权限吗？我几乎迷路了。

我必须说有另一个部署的项目使用这个数据库。

提前致谢 ：）

更新：

```
 2012-11-02 16:14:59.888
     Uncaught exception from servlet
     java.lang.UnsupportedClassVersionError: 
     com/layout/server/EntityServiceImpl :                
     Unsupported major.minor version 51.0 
```

我的 App Engine 日志给出了以下错误，这与数据库无关。我一直在使用看起来与 GAE 不兼容的 JRE 7。（appengine.google.com -> 日志）。

我现在正在尝试使用 JDK6，看看会发生什么:)

这就是问题，改为JDK 6，现在一切都解决了。与我的数据库无关。只是Java版本。

# javascript - 选择多个换行符正则表达式

> ID：13178440
> 
> 赞同：0
> 
> 时间：2012-11-01T13:48:39.463
> 
> 标签：javascript, regex

所以我想做的是用javascript中的br标签替换一个或多个换行符实例。到目前为止，我有：

```
description.replace(/\n/g, '<br />'); 
```

但是，如果存在连续 2/3 换行符的情况，我会得到 2/3 br 标签。正则表达式中有没有办法说给我一个或多个换行符的任何实例，并用一个 br 标签替换整个事情，这样即使我有：

```
\n\n\n\n\n\n\n\n\n 
```

这将被替换为：

```
<br > 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-01T13:50:00.047

您可以添加`+`量词以指示一个或多个匹配项。

```
description.replace(/\n+/g, '<br />'); 
```

PS：您需要阅读有关正则表达式的更多信息，这相当简单。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T13:51:06.087

```
description.replace(/\n+/g, '<br />'); 
```

快乐的家庭作业

# view - EmberJS：如何处理来自视图而不是路由/控制器的动作

> ID：13178441
> 
> 赞同：4
> 
> 时间：2012-11-01T13:48:40.490
> 
> 标签：view, ember.js, ember-router

今天我有了一个令人震惊的发现：在视图上引用的动作是由它们的路由处理的，而不是由引用它的视图处理的。前任：

```
<a href="#" {{action edit}}>Edit this</a> 
```

`edit`动作必须在 Route 中定义，而不是在 View 中。当我在 View 负责处理此类事件之前不使用路由器时，我对此感到非常高兴。

任何人都可以请：

1.  向我解释为什么 Route 必须处理事件，以及这样做的好处是什么
2.  告诉我如何在处理此类动作/事件时将控制权交还给视图？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-11-01T14:03:49.353

将目标设置为视图

```
<a href="#" {{action edit target="view"}}>Edit this</a> 
```

如果您的操作在控制器中，则使用

```
<a href="#" {{action edit}}>Edit this</a> 
```

默认目标是指视图的控制器

我建议您阅读此**参考：** [Ember Action Helper](http://emberjs.com/guides/templates/actions/)

根据上述参考资料，我想提一些关键点

*   在一个典型的 Ember.Router 支持的应用程序中，通过使用 {{outlet}} 帮助器管理视图，操作将被转发到当前控制器。*   如果控制器中未定义该操作，则以当前路由为目标。

# objective-c - 如何获取用户所在的当前 UITextField 的属性名称作为字符串？

> ID：13178442
> 
> 赞同：1
> 
> 时间：2012-11-01T13:48:41.230
> 
> 标签：objective-c, ios, ipad, nsstring, uitextfield

我正在使用以下方法：

```
- (BOOL)textField:(UITextField *)textField shouldChangeCharactersInRange:(NSRange)range
replacementString:(NSString *)string 
```

之前，为了找到我所在的当前文本字段，我可以这样写：

```
if (textField == self.textPlaceID)
{
    //Do something
} 
```

有没有办法将 my 的名称`textField`作为字符串获取？我不是要求获取用户输入的内容`textField`，我希望能够获取 if 的属性名称。我需要它然后将它与其他一些字符串连接起来。我正在做一个动态方法调用。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-01T14:03:12.573

`UITextField`s 没有“名称”。您可以给您的文本字段 a`tag`并使用它。

另外，请注意，仅当您引用相同的**对象**`(pointer == pointer)`时才会返回 true ，而不是等效值。

 **以下是如何使用标签：在 Interface Builder 中，给每个文本字段一个标签，或者如果您以编程方式创建文本字段，请设置`textField.tag = someInt;`我通常使用宏来使代码更具可读性：

```
#define kNameTextField 2
#define kAddressTextField 3

...

if (textField.tag == kNameTextField) ... 
```

有很多这样的字段，我更喜欢枚举：

```
typedef enum {
  kNameTextField = 2, 
  kAddressTextField, 
  kPhoneTextField // etc
} Fields; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-01T14:23:05.397

您可以使用以下代码获取属性名称（在您的情况下为 textField 属性）：

```
-(NSString *)propertyName:(id)property {  
    unsigned int numIvars = 0;
    NSString *key=nil;
    Ivar * ivars = class_copyIvarList([self class], &numIvars);
    for(int i = 0; i < numIvars; i++) {
    Ivar thisIvar = ivars[i];
    if ((object_getIvar(self, thisIvar) == property)) {
        key = [NSString stringWithUTF8String:ivar_getName(thisIvar)];
        break;
    }
} 
    free(ivars);
    return key;
} 
```

记得导入：

```
#import <objc/runtime.h> 
```

只需致电：

```
NSLog(@"name = %@", [self propertyName:self.textField]); 
```

[资源](https://stackoverflow.com/questions/2484778/anyway-to-get-string-from-variable-name)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-01T14:04:21.680

主要为每个 textFields 分配唯一标签（例如 1,2,3 .....）避免 textField 标签为 0

```
-(void)viewDidLoad{
NSDictionary *dictionary ; //declare it in .h interface

dictionary =  [NSDictionary dictionaryWithObjectsAndKeys:@"textPlaceID",[NSNumber numberWithInt:1], @"textPlaceID2",[NSNumber numberWithInt:2],nil]; // add textField as object and tag as keys
} 
```

更远..

```
- (BOOL)textField:(UITextField *)textField shouldChangeCharactersInRange:(NSRange)range
replacementString:(NSString *)string{

NSString *textFieldPropertyName = [dictionary objectForKey:[NSNumber numberWithInt:textField.tag]];

} 
```**

# c# - 文件上传值未保存在数据库中

> ID：13178443
> 
> 赞同：0
> 
> 时间：2012-11-01T13:48:42.423
> 
> 标签：c#, asp.net, sql-server-2008

```
 SqlConnection con = new SqlConnection();
    SqlCommand cmd = new SqlCommand("insert into Tbl_Videos(VideoName,VideoPath)values(@VideoName,@VideoPath)");

    string fileExt = System.IO.Path.GetExtension(FileUpload1.FileName);

    if (fileExt == ".avi")
    {
        try
        {
            FileUpload1.SaveAs(Server.MapPath("~/video/" +FileUpload1.FileName));
            Label1.Text = "File name: " +
            FileUpload1.PostedFile.FileName + "<br>" +
            FileUpload1.PostedFile.ContentLength + " kb<br>" +"Content type: "+FileUpload1.PostedFile.ContentType;
           cmd.Parameters.AddWithValue("@VideoName",FileUpload1.FileName);
            cmd.Parameters.AddWithValue("@VideoPath", FileUpload1.FileName);
            cmd.ExecuteNonQuery();
        }
        catch (Exception ex)
        {
            Label1.Text = "ERROR: " + ex.Message.ToString();
        }
    }
    else
    {
        Label1.Text = "Only .avi files allowed!";
    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T13:54:28.783

你在哪里提到你的 SQL 服务器连接字符串？

```
SqlConnection con = new SqlConnection(YOUR_CONNECTION_STRING_HERE); 
con.Open(); 
```

然后执行您的查询。

# c# - 如何从 checkboxlist 中获取选定的项目列表并将其传递给 MVC4 中的 Action

> ID：13178446
> 
> 赞同：1
> 
> 时间：2012-11-01T13:48:51.807
> 
> 标签：c#, asp.net, asp.net-mvc, asp.net-mvc-3, checkbox

我正在尝试在我的 MVC 应用程序中实现一个复选框列表。在这里，我需要将选定的复选框列表值传递给@html.ActionLink()。
我搜索了许多站点，包括 Stackoverflow，但没有数据库值的模型绑定，也没有获取选定的复选框值并传递给操作。
[例如：https://stackoverflow.com/questions/4872192/checkboxlist-in-mvc3-0](https://stackoverflow.com/questions/5284395/checkboxlist-in-mvc3-view-and-get-the-checked-items-passed-to-the-controller.)

我从这个链接尝试过。[CheckBoxList 多项选择：如何建模绑定并获取所有选择？](https://stackoverflow.com/questions/3369533/checkboxlist-multiple-selections-how-to-model-bind-back-and-get-all-selections)

如何从复选框列表中获取选定的 productid。任何例子.. ??

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-01T15:02:03.957

看法：

```
@foreach (var item in Model.Tags)
{ <label>
      <input type="checkbox" name="tag" value="@item.TagID" @if (item.Selected) { <text>checked="checked"</text> } />@item.Name
  </label>
} 
```

控制器：

```
 [HttpPost]
    public RedirectToRouteResult Edit(IEnumerable<Guid> tag)
    {
        using (var dc = new MyDataContext())
        {
            var existing = dc.Tag
                .Select(i => i.TagID)
                .ToList();

            // remove old
            foreach (var id in existing.Except(tags.EmptyIfNull()))
                dc.Tag.DeleteOnSubmit(dc.Tag.Single(k => k.TagID == id);

            // add new
            foreach (var id in tags.EmptyIfNull().Except(existing))
                dc.Tag.InsertOnSubmit(new Tag() { TagID = id, });

            dc.SubmitChanges();
        }

        return RedirectToAction("List");
    } 
```

# java - 以下错误是什么意思？

> ID：13178447
> 
> 赞同：4
> 
> 时间：2012-11-01T13:48:54.743
> 
> 标签：java, unsatisfiedlinkerror

我正在运行我的 java 程序，但在执行它时会出现以下错误。之前它运行良好，但现在它抛出以下错误。我检查了我的类路径，环境变量中的路径都正确。

```
Exception in thread "main" java.lang.UnsatisfiedLinkError: java.util.zip.ZipFile
.open(Ljava/lang/String;IJ)J
        at java.util.zip.ZipFile.open(Native Method)
        at java.util.zip.ZipFile.<init>(ZipFile.java:114)
        at java.util.jar.JarFile.<init>(JarFile.java:135)
        at java.util.jar.JarFile.<init>(JarFile.java:72)
        at sun.misc.URLClassPath$JarLoader.getJarFile(URLClassPath.java:646)
        at sun.misc.URLClassPath$JarLoader.access$600(URLClassPath.java:540)
        at sun.misc.URLClassPath$JarLoader$1.run(URLClassPath.java:607)
        at java.security.AccessController.doPrivileged(Native Method)
        at sun.misc.URLClassPath$JarLoader.ensureOpen(URLClassPath.java:599)
        at sun.misc.URLClassPath$JarLoader.<init>(URLClassPath.java:583)
        at sun.misc.URLClassPath$3.run(URLClassPath.java:333)
        at java.security.AccessController.doPrivileged(Native Method)
        at sun.misc.URLClassPath.getLoader(URLClassPath.java:322)
        at sun.misc.URLClassPath.getLoader(URLClassPath.java:299)
        at sun.misc.URLClassPath.getResource(URLClassPath.java:168)
        at java.net.URLClassLoader$1.run(URLClassLoader.java:194)
        at java.security.AccessController.doPrivileged(Native Method)
        at java.net.URLClassLoader.findClass(URLClassLoader.java:190)
        at java.lang.ClassLoader.loadClass(ClassLoader.java:307)
        at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:301)
        at java.lang.ClassLoader.loadClass(ClassLoader.java:248)
Could not find the main class: com.sun.tools.javac.Main.  Program will exit. 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T14:42:25.370

详细说明@Peter Lawrey的回答......

堆栈跟踪的开始是这样的：

```
Exception in thread "main" java.lang.UnsatisfiedLinkError: java.util.zip.ZipFile
.open(Ljava/lang/String;IJ)J
        at java.util.zip.ZipFile.open(Native Method)
        at java.util.zip.ZipFile.<init>(ZipFile.java:114)
        ... 
```

`UnsatisfiedLinkError`当您尝试调用`native`尚未解析为相应本机库中的方法的方法时，将引发 。消息的其余部分告诉我们出错的方法具有签名：

```
long java.util.zip.ZipFile.open(String, int, long) 
```

并且与堆栈跟踪的顶部框架相吻合……以及`ZipFile`众所周知，Java 的代码使用本机库来完成繁重的工作。

它已经走到这一步的事实意味着 JVM 已经找到了本地库并加载了它。但显然，负载并没有解决`native`open 方法的这种重载问题。这只能意味着一件事：`ZipFile`bootclasspath 上的类版本与本机库不匹配。

我们无法就这是 JDK 还是 JRE 做出任何明确的结论，但它似乎很可能是 JDK ......除非 OP 试图以一种奇怪的方式调用 Java 编译器。（“找不到主类：com.sun.tools.javac.Main”消息可能意味着 JVM 无法*加载*类......因为`UnsatisfiedLinkError`损坏。）

无论哪种方式，JDK 与 JRE 都不是直接的问题。真正的问题是 JVM 引导类路径上的“rt.jar”与本机库之间的不匹配。

* * *

问题问：

> 那怎么解决呢？

这取决于你究竟做了什么来得到这个错误。

*   你运行了什么命令？
*   命令行选项和参数是什么？
*   您是否一直在“搞乱”您的 JRE / JDK 安装？
*   您是否*尝试*在另一个安装中使用“rt.jar”文件？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-01T13:54:19.890

这意味着您`rt.jar`的 Java 版本与您的 JVM 不同。

我会确保您的引导类路径中没有 rt.jar 并且您的 JRE 安装正确。

> 找不到主类：com.sun.tools.javac.Main。程序将会退出。

当一个类由于一些低级错误而无法加载时，它会报告找不到该类。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-11-19T10:05:51.317

您的 JRE 路径指向 JDK 路径

解决方案 ：

第一步：右击服务器

第 2 步：单击运行时配置

第三步：给出JDK下的JRE路径。

解决方案已修复

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-01T14:13:29.440

错误消息中关于未找到的引用`com.sun.tools.javac.Main`使我相信这是一个需要与 JDK 一起运行的程序，而不仅仅是 JRE。

# c++ - DLL 项目不生成 .exp 和 .lib 文件

> ID：13178448
> 
> 赞同：7
> 
> 时间：2012-11-01T13:49:01.823
> 
> 标签：c++, visual-studio-2010, dll

所以，我有一个包含 3 个项目（2 个 DLL 和 1 个 .exe）的 c++ 解决方案。

这是基本的依赖关系表示：

应用程序 --> DLL2

应用程序 --> DLL1

DLL2 --> DLL1

我遇到的问题是 DLL2（在构建它时）确实生成了 .dll 但不生成 .lib 和 .exp 我需要在应用程序项目中正确引用 DLL2。但是，DLL1 确实生成了这些文件，我已经将 DLL1 的设置与 DLL2 的设置进行了比较，但我找不到可能有什么区别。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-01T13:59:04.520

对此的简单解释是您只是忘记导出任何内容。如果没有导出，链接器将不会创建 .lib/.exp 文件。`dumpbin.exe /exports`您可以通过在 DLL 上运行来验证这一点。期望你什么也看不见。

用于`__declspec(dllexport)`从 DLL 中导出符号。或 .def 文件。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-11-01T14:22:16.643

问题是 DLL2 只有 .h 文件，而任何关联的 .cpp 文件中都没有内容。所以 IDE 没有看到创建 .lib 文件的必要性。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-03-14T21:23:53.623

我刚刚发现了另一种导致同样事情发生的方法。我将一些我在另一个 DLL 中作为服务例程开发和测试的例程移到了它们自己的 DLL 中。由于这一举措是在我编写第一行代码之前计划好的，因此它们没有被标记为导出，因此使用了该项目的默认调用约定 __cdecl。当我构建库时，构建环境没有创建 .LIB 文件。经过一番调查，并受到本主题中提到的 __declspec(dllimport) 的启发，我意识到，虽然我将声明移到了新建项目向导生成的模板头文件中，但我忘记插入生成的调用约定的名称宏到原型中。

使用指定的调用约定，在包含实现的头文件和 CPP 文件中，我得到了预期的 .LIB 文件。

# mysql - 查找 CSV 列值匹配的记录

> ID：13178450
> 
> 赞同：0
> 
> 时间：2012-11-01T13:49:13.867
> 
> 标签：mysql

我正在做一个网站。在数据库中，我有一个看起来像这样的文章表：

```
id | name    | cats                           | etc.
------------------------------------------------------
1  | "alice" | "this, that, those, them"      | 
2  | "bob"   | "this, that, those"            |
3  | "carol" | "this, banana, cupcake"        |
4  | "dave"  | "other, unrelated, words"      |
5  | "errol" | "those, them, fishstick"       | 
```

在查看一篇文章时，我还想根据共同类别的数量显示一些最相关的文章。

例如，如果我正在查看 Alice 的文章，我想（按优先顺序）挑选 Bob（共有 3 只猫）、Errol(2)、Carol(1)。

我知道，如果数据被规范化（例如我可以这样做），这会更容易，[但](https://stackoverflow.com/questions/4717093/mysql-find-related-articles)不幸的是，这并不是一个真正的选择。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T11:51:03.113

我最终创建了几个额外的表，并在每次保存某些内容时用正确规范化的数据填充它们。它们与现有表一起运行，因此它不是最干净的解决方案，但它可以工作并且查询速度非常好。

# sql - 如何在 If else 语句中的 SQL 存储过程中设置和返回列值

> ID：13178457
> 
> 赞同：1
> 
> 时间：2012-11-01T13:49:26.730
> 
> 标签：sql, sql-server-2008, stored-procedures

参考我的[上一个问题](https://stackoverflow.com/questions/13176567/temporary-sql-datafield/13177257#13177257)，我不确定如何设置然后返回列数据值而不将其保存到表中。

```
if @datafield = 1
set ColumnA.table2=1
else if @datafield = 2 AND @datafield2 = 3
set ColumnA.table2= 0
else
return (SELECT ColumnA.table2 FROM table1 INNER JOIN table2 on table1.id and table2.id Where @datafield3 = 0) 
```

我不确定设置值后如何返回，我确实尝试了 begin 和 end ，但没有工作

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T13:52:51.603

你可以做的最简单的事情来返回值

```
Declare @returnvalue int

if @datafield = 1
   set @returnvalue=1
else if @datafield = 2 AND @datafield2 = 3
set @returnvalue= 0
else
     SELECT @returnvalue=ColumnA.table2 FROM table1
        INNER JOIN table2 on table1.id and table2.id 
        Where @datafield3 = 0

 select @returnvalue as ColumnA
 return @returnvalue 
```

# java - Objectify：对查询的结果进行排序（“找不到匹配的索引”错误）

> ID：13178460
> 
> 赞同：1
> 
> 时间：2012-11-01T13:49:33.383
> 
> 标签：java, gwt, google-cloud-datastore, requestfactory, objectify

我在执行下面的查询的浏览器上收到此错误，但没有 ".order("position") 它可以工作（但结果显然没有排序）。

```
Uncaught com.google.web.bindery.event.shared.UmbrellaException: Exception caught: Server Error: no matching index found.
The suggested index for this query is:
    <datastore-index kind="Box" ancestor="false" source="manual">
        <property name="diagram_id" direction="asc"/>
        <property name="position" direction="asc"/>
    </datastore-index> 
```

**BoxDao.java**

```
public List<Box> listFromDiagram(String diagramId)
{
    Objectify ofy = ObjectifyService.begin();
    // List of boxes of that diagram ordered by position asc
    Query<Box> q=ofy.query(Box.class).filter("diagram_id",diagramId).order("position");
    List<Box> results = q.list();

    return results;
} 
```

**盒子.java**

```
import com.googlecode.objectify.annotation.Entity;
import com.googlecode.objectify.annotation.Indexed;

@Entity
public class Box extends DatastoreObject{
    @Indexed private String boxId;
    @Indexed private String diagram_id;
    private String title;
    @Indexed private int position;
[...]
} 
```

文件“datastore-indexes.xml”是空的......有什么想法吗？谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-01T18:14:27.617

您需要一个多属性索引（您正在按一个属性过滤并按另一个属性排序）。错误消息告诉您需要在 datastore-indexes.xml 中放入什么。有关概念概述，请参阅：

[https://code.google.com/p/objectify-appengine/wiki/Concepts#Indexes](https://code.google.com/p/objectify-appengine/wiki/Concepts#Indexes)

我建议也按照链接进入 Google 文档。

# javascript - 如何将两个父对象继承给一个子对象，但第二个继承对象的参数是第一个继承对象

> ID：13178476
> 
> 赞同：0
> 
> 时间：2012-11-01T13:50:15.800
> 
> 标签：javascript, object, inheritance, arguments

在 Javascript 中，我正在寻找当构造函数有参数时如何继承对象。我找到了这个问题的答案。

现在我需要将两个父对象继承给一个子对象，但是第二个继承对象的参数是第一个继承对象。这个怎么做？

以困难的方式：

```
function ChildObj() { 
    this.Parent1 = new ParentObj1 ( arguments ); 
    this.Parent2 = new ParentObj2 ( this.Parent1);
} 
```

但是如何以这种方式做到这一点：

```
function ChildObj() { 
   Parent1Obj.call ( this, arguments ) ;
   Parent2Obj.call( this, <<-- how to indicate Parent1Obj as argument -->> ) ;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T14:12:33.763

首先请注意，在 JavaScript 的原型继承方式中，您不能从两个不同的原型对象继承。当然，您的问题中没有问到这一点，但是假设`ChildObj`s inherit from `Parent1.prototype`，您将无法使用*并且不再需要* `Parent2.prototype`。这意味着您可能希望`Parent2`从构造函数重构为向对象添加方法的普通函数——称为**Mixin 模式**。

> 如何判断`Parent2`它是在`Parent1`对象上调用的？

您不需要将其作为参数显式传递。`this`使用鸭子类型，可以知道当前实例 ( ) 是一个`Parent1`对象，因为它已经从`Parent1Obj.call(this, arguments)`. 假设您已正确设置原型链，`Parent2`则应用的对象也是`instanceof Parent1`.

当然，您也可以将`Parent1`构造函数作为附加参数传递给`this`. 但是，我不确定 mixin 事物的行为是否应该取决于传递对象的 [super] 构造函数。传递一些更具描述性的选项可能会更好，让`ChildObj`构造函数选择正确的选项而不是`Parent2`函数。

# perl - 如何在 Perl 中执行许多 (~15) bash 命令？

> ID：13178485
> 
> 赞同：0
> 
> 时间：2012-11-01T13:50:58.160
> 
> 标签：perl, bash

我知道`system()`and `qx()`，但我需要执行 ~15 bash 命令。例如

`mkdir`, `chown`, `edquota -p user1 -u user2`, `cp -r`, `su - username`, `git`, `rm`,`ln -s`

**问题**

有没有一种在 Perl 中执行许多 Bash 命令的有效方法？

在这种情况下，我不在乎输出。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-01T14:06:46.863

首先，我会尽可能多地对那些 bash 命令使用等效的 Perl 函数，这是您在帖子中包含的大部分命令。然后，对于其余部分，我将使用 system() 或 qx() 或反引号或 IPC:: 模块之一（例如 IPC::Run 或 IPC::Open3）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-01T14:03:13.333

对许多命令使用 bash 语法。`;`用或`&&`或任何你喜欢的东西将它们分开( `man bash`)。

```
$ perl -E 'system qq{date; date}' 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-01T14:04:08.970

在 Linux 中，我喜欢 POE 框架的[POE::Wheel::Run](http://search.cpan.org/~rcaputo/POE-1.354/lib/POE/Wheel/Run.pm)模块，用于异步运行系统命令（和代码块）。你说你不关心输出，但如果你将来需要它 POE::Wheel::Run 有一个优雅的界面允许我们与流程进行交互。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-01T15:12:56.230

```
my $s = <<END;
echo "1"
echo "2"

echo "3"
END

system("$s"); 
```

# operating-system - 多处理器是否共享同一组寄存器？

> ID：13178486
> 
> 赞同：0
> 
> 时间：2012-11-01T13:51:04.287
> 
> 标签：operating-system, cpu-registers

多处理器共享同一组寄存器还是每个处理器都有自己的一组寄存器？那么每个 cpu 而不是每个处理器呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T13:57:04.867

不。

考虑指令指针寄存器或堆栈指针寄存器。分享这些会很混乱！

# ios - 如何显示 youtube 视频

> ID：13178487
> 
> 赞同：0
> 
> 时间：2012-11-01T13:51:03.920
> 
> 标签：ios, xcode, youtube

我想知道应用程序如何：

[https://itunes.apple.com/us/app/freedi-player-for-youtube/id471259804?mt=8](https://itunes.apple.com/us/app/freedi-player-for-youtube/id471259804?mt=8)

将视频流式传输到他们的应用程序？有人可以给我一些示例代码吗？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T14:08:58.803

查看[有关 HTTP Live Streaming 的 Apple 文档](https://developer.apple.com/library/archive/documentation/NetworkingInternet/Conceptual/StreamingMediaGuide/Introduction/Introduction.html)。

# cloud9-ide - 如何通过 Https 运行 Cloud9？

> ID：13178490
> 
> 赞同：4
> 
> 时间：2012-11-01T13:51:06.597
> 
> 标签：cloud9-ide

如何通过安全连接 (HTTPS) 运行 Cloud9 的独立版本？

# javascript - 如果我把所有的脚本都放在```之后，我需要等待`domReady`吗？

> ID：13178493
> 
> 赞同：2
> 
> 时间：2012-11-01T13:51:13.400
> 
> 标签：javascript, domready

Jquery 有一个`ready`方法：

```
$(document).ready(function(){
   // my code
}) 
```

当 dom 准备好时，它将执行我的代码。

我有一个问题，如果我将所有脚本都放在 之后`</body>`，例如

```
<html>
    <body>
       // all kinds of html tags
    </body>
    <script src="/path/to/jquery.js"></script>
    <script src="/path/to/all-javascript-compressed-in-one-file.js"></script>
</html> 
```

我还需要写`$(document).ready()`吗？dom已经`ready`在后面了`</body>`吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-01T13:55:47.800

通常，脚本是*在 之前* `</body>`而不是之后添加的——否则 HTML 将不会验证；正如 Šime Vidas 在评论中所指出的，任何内容都不能出现在`<head>`或之外。`<body>`

话虽如此，从技术上讲，此时 DOM 还没有准备好（因为浏览器仍在解析`<body>`），但已经包含了正文中的所有元素。因此，跳过 是安全的`$(document).ready()`。

这样做会更早地执行您的初始化脚本，因为在`DOMContentLoaded`触发实际事件之前会有一些延迟。这意味着更快的页面加载和更好的用户体验。

您可能对有关强制 jQuery事件的[相关讨论感兴趣。](https://stackoverflow.com/q/12850622/825789)`ready`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-01T13:55:06.377

一句话，没有。当 dom 树可用时，dom 被认为是“准备好的”，如果您的 javascript 是页面上的最后一件事，那么它之前的所有内容都是“准备好的”，因为网页是从上到下“加载”的。

# javascript - 针对字符串/对象进行测试

> ID：13178496
> 
> 赞同：0
> 
> 时间：2012-11-01T13:51:19.690
> 
> 标签：javascript

我有一个 JSON 编码的 PHP 数组：

```
<script>
var registeredEmails = <?php echo(json_encode($emails)); ?>;
</script> 
```

为了检查这是否有效，我这样做：

```
console.log(registeredEmails);
// this outputs: ["john@domain.com", "mary@domain.com"] 
```

现在我想遍历那个 JSON 并针对它包含的所有字符串测试某个字符串。

```
for (var email in registeredEmails) {
    if (registeredEmails.hasOwnProperty(email)) {

        var duplicate = registeredEmails[email];

        console.log(duplicate + ' is typeof: ' + typeof(duplicate));
        // this outputs: john@domain.com is typeof: string

        //  $(this).val() is a string from somewhere else
        if (duplicate.test($(this).val())) {
            // we found a match
        };
    }
} 
```

据我了解，该`test()`方法测试字符串匹配。我已经测试以确保我的变量`duplicate`是一个字符串，但显然它仍然是一个对象。我收到以下 JS 错误：

```
Uncaught TypeError: Object john@domain.com has no method 'test' 
```

这是为什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-01T13:54:01.060

[`test()`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/RegExp/test)是 RegEx 对象的方法，而不是 String。

您最好的选择可能是[`String.search()`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/String/search)改用。[`String.indexOf()`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/String/indexOf)如果您不尝试使用正则表达式匹配，您也可以使用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-01T14:40:56.450

尽管您使用的是 json_encode，但您的控制台输出在我看来就像一个数组。如果是这种情况，那么也许您可以使用以下内容：

```
var found = find_match( registeredEmails, $(this).val() );

if( found ) {
   // found a match
}

function find_match(array, string) {

    for( var i = 0, len = array.length; i < len ; i++ ) {
        if( array[i].indexOf( string ) > -1 ) return true;
    }

    return false;
}​ 
```

[在这里](http://jsfiddle.net/bruno/3hbK6/1/)提琴

# testing - 电子邮件字段上的等价分区

> ID：13178497
> 
> 赞同：1
> 
> 时间：2012-11-01T13:51:21.087
> 
> 标签：testing, black-box, black-box-testing

有谁知道如何通过对电子邮件地址字段验证使用等价分区来派生测试用例？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-09-16T13:45:11.707

## **测试用例**

**1) 电子邮件长度**

电子邮件地址的格式是 local-part@domain ，其中本地部分最长为 64 个字符，域名最长为 255 个字符 - 但正向或反向路径的最大 256 个字符长度限制了整个电子邮件地址不超过 254 个字符

*因此，将测试用例分为两种情况：*

**i)**介于 0 到 254 个字符之间的电子邮件 ID

**ii)**电子邮件 ID 大于 254 个字符

* * *

**2) 字符和数字**

电子邮件接受大写和小写英文字母（a-z、A-Z）和数字 0 到 9

因此，检查带有大小写字母和数字的电子邮件地址，检查天气 loginid 接受以大写字母或数字或 spl 字符开头的用户名

**例如。**niceandsimple@example.com, niceand122simple123@example.com

* * *

* * *

**3) 特殊字符**

字符 !#$%&'*+-/=?^_ `{|}~ are been accepted. So, write two scenarios. 1) email id with Characters !#$%&'*+-/=?^_`{|}~ 应被接受 ii) 电子邮件 ID 包含字符 !#$%&'*+-/=?^_`{|}~ 以外的字符不应该被接受

**例如。** ---> !#$%&'*+-/=?^_`{}|~@example.org

---> " "@example.org

* * *

* * *

**4) 有限制的特殊字符**

特殊字符是允许的，但有限制。它们是：空格和“(),:;<>@[] 特殊字符的限制是它们只能在包含在引号之间时使用，并且它们中的两个（反斜杠\和引号”（ASCII： 92, 34)) 之前还必须有一个反斜杠 \（例如“\\””）。

*两种情况* 1) 双引号内的字符 "(),:;<>@[] ii) 不带双引号的字符 "(),:;<>@[]

**例如。** ----> "()<>[]:,;@\\"!#$%&'*+-/=?^_`{}| ~.a"@example.org

* * *

**5) 带点 (.) 的电子邮件**

i) 应接受带有单点的电子邮件 ID

a.little.longy.but.fine@dept.example.com

ii) 不接受带有多个连续点的电子邮件

a.little .....fine@dept.example.com

iii) 地址中的前导点是不允许的

.abc123@gmail.com

iv) 地址中的尾随点是不允许的

abc123.@gmail.com

v) 域部分中的多个点无效

abc123@gmail..com

* * *

**6) 域名**

i）相同的域名---->检查邮件是否可以是相同的域名，即gmail@gmail.com ii）域是有效的IP地址iii）IP地址周围的方括号被认为是有效的iv）域名中的破折号是有效的v) 缺少 @ 符号和域 vi) 垃圾 (#@%^%#$@#$@#.com) vii) 两个 @ 符号 viii) 域前面的前导破折号无效 ix) .web 不是有效的顶部级别域 x) 无效的 IP 格式

* * *

**7) 电子邮件中的文本**

1) 文本后跟电子邮件是不允许的

email@domain.com (乔·史密斯)

2) 允许电子邮件前的文本

（乔·史密斯）email@domain.com

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-26T13:33:49.070

获取规范中描述的每个输入条件并为其派生至少两个等价类。一类表示满足条件的一组情况（有效类），一类表示不满足条件的一组情况（无效类），示例如下：

--email字段数：0<21

• 1 类：任何小于 1 的值（无效输入）

•2级：1-20（有效输入）

• 3 类：任何大于 20 的值（无效输入）

•从每个类别中至少选择一个值作为测试数据，用于“电子邮件数量”字段的测试</p>

– 下面的值将用于测试“电子邮件数量”字段验证和验证

–-5, 5, 25

# linux - 在 64 位 ubuntu 上编译 32 位汇编器

> ID：13178501
> 
> 赞同：15
> 
> 时间：2012-11-01T13:51:27.520
> 
> 标签：linux, ubuntu, assembly, 64-bit, 32-bit

我有用 32 位汇编语言编写的程序……现在我无法在 64 位操作系统上编译它。在我们学校，它们是特定的，程序必须以 32 位版本编写。这是我的程序：

```
bits 32
extern _printf
global _start

section .data
    message db "Hello world!!", 10, 0

section .text

_start:
    pushad 
    push dword message
    call _printf 
    add esp, 4 
    popad 
    ret 
```

任何想法？我已经尝试了很多方法来编译它。编译后的错误输出：

```
nasm -f elf64 vaja4.asm
ld vaja4.o -o vaja4
./vaja4 
```

输出：

```
vaja4.o: In function `_start':
vaja4.asm:(.text+0x7): undefined reference to `_printf' 
```

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-11-01T14:26:30.433

首先将符号更改`_printf`为，然后用于链接目标文件，这将自动将其链接到，*您需要这样做，因为 AFAIK 没有*. 此外，您应该在汇编时使用 elf32 而不是 elf64，因为代码有 32 位指令：`printf``_start``main``gcc``libc`*`main`*

```
bits 32
extern printf
global main

section .data
    message db "Hello world!!", 10, 0

section .text

main:
    pushad 
    push dword message
    call printf 
    add esp, 4 
    popad 
    ret 
```

并建立：

```
nasm -f elf32 vaja4.asm
gcc -m32 vaja4.o -o vaja4
$./test 
$Hello world!! 
```

**编辑：**

由于您现在在 64 位系统上编译 32 位代码，因此您需要安装 32 位版本的库

```
apt-get install ia32-libs 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-04-17T01:23:41.140

在 Ubuntu 12.10 上，需要先安装开发包

```
sudo apt-get update
sudo apt-get install libc6-dev-i386 
```

为了

```
gcc -m32 vaja4.o -o vaja4 
```

去工作。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-11-01T13:58:16.253

我怀疑您看到的错误是因为 32/64 位问题。你看到的错误，即

```
vaja4.asm:(.text+0x7): undefined reference to `_printf' 
```

清楚地告诉你符号 _printf 是未定义的，这意味着 printf 函数的库没有被链接。

你的链接步骤，即

```
ld vaja4.o -o vaja4 
```

不包括任何库。您需要将程序与可以提供 printf 函数定义的库链接。我相信 ld 应该自己选择库而不用这些消息打扰你，但是因为它无法为这个函数找到合适的 C 库，我猜你没有所需的库，即缺少 32 位或 64 库。

无论如何，请尝试以下命令序列来组装和链接您的程序：

```
nasm -f elf vaja4.asm
ld -m elf_i386 vaja4.o vaja4
./vaja4 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-01T13:57:59.810

在我看来，您忘记链接 C 库，这是提供`printf`函数（和其他）的部分：

```
ld vaja4.o -o vaja4 -lc 
```

# magento - 为什么 Magento 中的高级日期仍然是 m/d/y 格式？

> ID：13178503
> 
> 赞同：0
> 
> 时间：2012-11-01T13:51:33.600
> 
> 标签：magento

我已经安装了荷兰语语言包，设置了荷兰商店，将语言环境选项设置为**W. Europe Standard Time (Berlin)**，将语言环境设置为荷兰语，将日期字段顺序设置为日/月/年，并在高级搜索日期时搜索它仍然需要在我喜欢 d/m/y 的 m/d/y 中输入日期值。

**我忘记了什么？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T14:05:26.903

您的 Magento 缓存是否已刷新？如果 block-html 输出被缓存，您可能看不到更改。

# mysql - 在一个 joomla 视图上将数据插入 3 个表

> ID：13178504
> 
> 赞同：0
> 
> 时间：2012-11-01T13:51:34.253
> 
> 标签：mysql, joomla

在一个视图中将数据插入 3 个不同表的最佳方法是什么，例如：

富视图：

添加卡片，添加玩家，目标。

1.  使用插入查询？
2.  使用 3 个不同的表类？
3.  或者你有更好的方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T14:33:54.130

您可以继续使用表类，因为您可以使用 joomla 内置函数执行存储和更新功能。[阅读更多](http://docs.joomla.org/Using_the_JTable_class)

```
function store()
    {  
       //Get post data 
       $this->_data = $this->getPostData();

       $row = &$this->getTable('model_name');

       if (!$row->bind($this->_data))
       {
          $this->setError($this->_db->getErrorMsg());          
          return false;
       } 

       if (!$row->check())
       {         
         $this->setError($this->_db->getErrorMsg());
         return false;
       } 

       if (!$row->store())
       {
         $this->setError($this->_db->getErrorMsg());
         return false;
       }      
       $new_id = $this->_db->insertId();

       if($new_id > 0)
            $this->_data->id = $new_id;

       return true;
    } 
```

设置帖子数据如下

```
function getPostData()
    {
        $this->_data->id        = JRequest::getVar('id', 0, 'POST');
        $this->_data->field1    = JRequest::getVar('field1', '', 'POST' );
        $this->_data->field2    = JRequest::getVar('field2', '', 'POST' );
        return $this->_data; 
    } 
```

如果您有任何疑问，请询问。

# ruby-on-rails - 如何在 Rails 模型中重构复杂的搜索逻辑

> ID：13178505
> 
> 赞同：3
> 
> 时间：2012-11-01T13:51:37.273
> 
> 标签：ruby-on-rails, ruby, refactoring, dry

我的搜索方法又臭又肿，我需要一些帮助来重构它。我是 Ruby 新手，我还没有弄清楚如何有效地利用它，这导致了像这样的臃肿方法：

```
 # discussion.rb
  def self.search(params)
    # If there is a search query, use Tire gem for fulltext search
    if params[:query].present?
      tire.search(load: true) do
        query { string params[:query] }
      end

    # Otherwise grab all discussions based on category and/or filter
    else

      # Grab all discussions and include the author
      discussions = self.includes(:author)

      # Filter by category if there is one specified
      discussions = discussions.where(category: params[:category]) if params[:category]

      # If params[:filter] is provided, user it
      if params[:filter]
        case params[:filter]
        when 'hot'
          discussions = discussions.open.order_by_hot
        when 'new'
          discussions = discussions.open.order_by_new
        when 'top'
          discussions = discussions.open.order_by_top
        else
          # If params[:filter] does not match the above three states, it's probably a status
          discussions = discussions.order_by_new.where(status: params[:filter])
        end
      else

        # If no filter is passed, just grab discussions by hot
        discussions = discussions.open.order_by_hot
      end
    end
  end

  STATUSES   = {
    question:   %w[answered],
    suggestion: %w[started completed declined],
    problem:    %w[solved]
  }

  scope :order_by_hot,  order('...') DESC, created_at DESC")
  scope :order_by_new,  order('created_at DESC')
  scope :order_by_top,  order('votes_count DESC, created_at DESC') 
```

这是一个可以按类别过滤（或不过滤）的讨论模型：`question`、`problem`、`suggestion`。

所有讨论或单个类别可以通过`hot`、`new`、`votes`或进一步过滤`status`。状态是模型中的一个哈希值，它有几个取决于类别的值（状态过滤器仅在 params[:category] ​​存在时出现）。

使事情复杂化的是使用轮胎的全文搜索功能

但我的控制器看起来又漂亮又整洁：

```
 def index
    @discussions = Discussion.search(params)
  end 
```

我可以把它干掉/重构一下，也许使用元编程或块？我设法将其从控制器中提取出来，但随后就没有想法了。我对 Ruby 的了解还不够深入，无法更进一步。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-01T14:29:32.987

对于初学者，“基于类别和/或过滤器获取所有讨论”可以是一种单独的方法。

`params[:filter]`重复了很多次，所以把它放在顶部：

```
filter = params[:filter] 
```

您可以使用

```
if [:hot, :new, :top].incude? filter
  discussions = discussions.open.send "order_by_#{filter}"
... 
```

此外，考虑 if then else if case else 语句。我更喜欢分解成单独的方法并尽早返回：

```
def do_something
  return 'foo' if ...
  return 'bar' if ...
  'baz'
end 
```

`discussions = discussions...`出现了很多次，但看起来很奇怪。可以`return discussions...`改用吗？

为什么常数`STATUSES`出现在最后？通常常量出现在模型的顶部。

请务必在重构之前编写所有测试。

要回复有关以下内容的评论`return 'foo' if ...`：

考虑：

```
def evaluate_something
  if a==1
    return 'foo'
  elsif b==2
    return 'bar'
  else
    return 'baz'
  end
end 
```

我建议将其重构为：

```
def evaluate_something
  return 'foo' if a==1
  return 'bar' if b==2
  'baz'
end 
```

也许您可以重构一些 if..then..else..if 语句。

推荐书籍：[清洁代码](https://rads.stackoverflow.com/amzn/click/com/0132350882)

# html - 显示电脑上未安装的字体

> ID：13178510
> 
> 赞同：0
> 
> 时间：2012-11-01T13:51:59.240
> 
> 标签：html, css, fonts

我一直在寻找像“Font Deck”和“Typekit”这样的服务——这些服务有没有免费的替代品？

我希望能够显示网络用户 PC 上未安装的字体（无需使用图像）

你能帮我吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-01T13:54:48.140

Google Web Fonts 是使用 CSS 向没有字体的用户提供字体的最佳选择。

或者您可以使用以下方法创建自己的网络字体：[http ://www.fontsquirrel.com/fontface/generator](http://www.fontsquirrel.com/fontface/generator)

但是，您必须了解与特定字体相关的许可问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-01T13:55:59.643

如果许可正确，您可以托管自己的字体并使用 css [@font-face](http://caniuse.com/#feat=fontface)将它们集成到您的网站中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-02T13:33:04.407

利用`@font-face`

字体生成器：[http ://www.fontsquirrel.com/fontface/generator](http://www.fontsquirrel.com/fontface/generator)

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-11-01T13:55:21.933

如果您的机器上安装了该字体并且该字体在他们的许可下可以免费使用，您可以使用**[Cufon](http://cufon.shoqolate.com/generate/)**。虽然它有点老派，但如果您出于某种原因不能使用 googlefonts，这是一种替代方法。

它使用javascript来替换字体。工作，看起来不错。不确定它对 SEO 的友好程度。

# iphone - UIImageView 缩放时离开屏幕

> ID：13178511
> 
> 赞同：0
> 
> 时间：2012-11-01T13:52:02.173
> 
> 标签：iphone, uiimageview, zooming, scale

我有放大 UIImageView 的当前代码：

```
- (void)handlePinch:(UIPinchGestureRecognizer *)pinchGestureRecognizer
{
    mCurrentScale += [pinchGestureRecognizer scale] - mLastScale;
    mLastScale = [pinchGestureRecognizer scale];

    if (pinchGestureRecognizer.state == UIGestureRecognizerStateEnded)
    {
        mLastScale = 1.0;

    }

    CGAffineTransform currentTransform = CGAffineTransformIdentity;
    CGAffineTransform newTransform = CGAffineTransformScale(currentTransform, mCurrentScale, mCurrentScale);
    thumbView.transform = newTransform;
} 
```

图像位于右上角，如果我将图像的一半放大到视图之外，我该如何放大图像以使其保持在右上角并正确显示？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T14:02:17.550

缩放时使用 CGAffineTransformTranslate 将其向左移动？

# c++ - 如何访问本机 IDataObject

> ID：13178517
> 
> 赞同：1
> 
> 时间：2012-11-01T13:52:10.347
> 
> 标签：c++, .net, visual-c++, com, c++-cli

我正在尝试将[System::Windows::Forms::IDataObject](http://msdn.microsoft.com/en-us/library/system.windows.forms.idataobject.aspx)转换为 ObjIdl.h 中定义的本机[IDataObject 。](http://msdn.microsoft.com/en-us/library/windows/desktop/ms688421%28v=vs.85%29.aspx)不幸的是，以下源代码不返回本机 IDataObject。

```
IntPtr pData = System::Runtime::InteropServices::Marshal::GetIUnknownForObject(e->Data);
::IDataObject* data = (::IDataObject*) pData.ToPointer(); 
```

如何在拖放期间在 Windows 窗体应用程序中获取本机 IDataObject？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T15:58:55.153

使用 C 样式强制转换来强制转换 COM 接口指针是不合法的。您必须使用 QueryInterface() 方法很好地询问。像这样：

```
 System::Windows::Forms::IDataObject^ obj = Clipboard::GetDataObject();
 ::IUnknown* punk = (::IUnknown*)System::Runtime::InteropServices::Marshal::GetIUnknownForObject(obj).ToPointer();
 ::IDataObject* pdata = nullptr;
 HRESULT hr = punk->QueryInterface(__uuidof(::IDataObject), (void**)&pdata);
 if (SUCCEEDED(hr)) {
     // etc..
 } 
```

# qt - Qt 中每边都有视频的 3D 立方体

> ID：13178522
> 
> 赞同：0
> 
> 时间：2012-11-01T13:52:59.093
> 
> 标签：qt

我有一个项目，我需要能够在立方体的所有六个侧面上显示视频，该立方体在三个维度上移动和旋转，使用 Qt。我知道这个问题很模糊，但我对图形完全陌生，所以对我应该看哪些类以及它们应该如何链接在一起的高级描述会有很大帮助。我应该使用 GLRenderer 还是普通的？Qt 甚至是适合这项工作的工具吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T13:58:08.377

你可以做的是使用 [QtOpenGL](http://harmattan-dev.nokia.com/docs/library/html/qt4/opengl-pbuffers-cube-cpp.html)来渲染立方体。然后你使用[视频纹理](https://stackoverflow.com/questions/5236785/opengl-video-texture)。

# javascript - Rails：通过ajax获取远程页面

> ID：13178523
> 
> 赞同：0
> 
> 时间：2012-11-01T13:53:04.083
> 
> 标签：javascript, ruby-on-rails, ajax, jquery

我使用 Rails3 并尝试通过 ajax 获取远程页面。（https://play.google.com/store/apps/details?id=）。

```
$.ajax({
      url: app_url,
      type: 'GET',
      data: "id=<id>",
      crossDomain : true,
      dataType: 'jsonp',
      success: function ( code ) {
        alert("Good.");
      }
    }); 
```

当我运行脚本时，我看到：“Uncaught SyntaxError: Unexpected token <”错误消息。

顺便说一句，我试着这样做：

```
$.ajax({
      url: app_url,
      type: 'GET',
      data: "id=<id>",
      crossDomain : true,
      dataType: 'jsonp',
      success: function ( code ) {
        alert("Good.");
      }
    }); 
```

但我看到“访问控制允许来源不允许来源[http://example.com:3000 。”](http://example.com:3000) 错误信息。

如何修复错误并获取页面？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T13:58:11.120

如果您尝试通过 AJAX 访问远程页面，该页面可能会阻止您的请求。错误消息会提示：[https ://developer.mozilla.org/en-US/docs/HTTP_access_control](https://developer.mozilla.org/en-US/docs/HTTP_access_control)

**编辑**

为清楚起见，`Access-Control-Allow-Origin`是允许从中检索“来源”的服务器设置。您可能会在服务器端获取此页面，并且根据 google 的安全级别，您可能不得不欺骗浏览器。想到 PHP CURL。然后，您将为您的服务器脚本设置一个 ajax 调用，您的服务器将为您获取页面，然后将其返回给您的 ajax 调用。

# asp.net - [NullReferenceException：对象引用未设置为对象的实例。]

> ID：13178528
> 
> 赞同：0
> 
> 时间：2012-11-01T13:53:16.210
> 
> 标签：asp.net, sharepoint, nullreferenceexception

```
[NullReferenceException: Object reference not set to an instance of an object.]
   Wictor.Office365.MsOnlineClaimsHelper.getCookieContainer() +128
   Wictor.Office365.MsOnlineClaimsHelper.clientContext_ExecutingWebRequest(Object sender, WebRequestEventArgs e) +33
   Microsoft.SharePoint.Client.ClientContext.EnsureFormDigest() +382
   Microsoft.SharePoint.Client.ClientContext.ExecuteQuery() +16
   Webapplicatie.Default.Page_Load(Object sender, EventArgs e) +334
   System.Web.UI.Control.LoadRecursive() +70
   System.Web.UI.Page.ProcessRequestMain(Boolean includeStagesBeforeAsyncPoint, Boolean includeStagesAfterAsyncPoint) +3177 
```

是我在线部署网站时收到的消息。

本地一切运行良好，即使我将所有项目文件复制到另一台计算机，一切都显示正常。

但是，当我将站点发布到 IIS 服务器时，它会显示如上所示的错误。

是否有我可能缺少的任何设置？我怀疑这是一个编码问题，因为一切都在`localhost`

Default.aspx.cs 中的代码：

```
 MsOnlineClaimsHelper claimsHelper = new MsOnlineClaimsHelper(sharepointsiteUrl, username, password);
            using (ClientContext context = new ClientContext(sharepointsiteUrl))
            {
                context.ExecutingWebRequest += claimsHelper.clientContext_ExecutingWebRequest;

                context.Load(context.Web);

                context.ExecuteQuery();

                Lebel.Text = "Succesfully logged in as " + username + " on " + context.Web.Title;
            }" 
```

MsOnlineClaimsHelper 的附加代码

```
// Method used to add cookies to CSOM
    public void clientContext_ExecutingWebRequest(object sender, WebRequestEventArgs e) {
        e.WebRequestExecutor.WebRequest.CookieContainer = getCookieContainer();
        //e.WebRequestExecutor.WebRequest.UserAgent = userAgent;
    }

    // Creates or loads cached cookie container
    CookieContainer getCookieContainer() {
        if (_cachedCookieContainer == null || DateTime.Now > _expires) {

            // Get the SAML tokens from SPO STS (via MSO STS) using fed auth passive approach
            MsoCookies cookies = getSamlToken();

            if (!string.IsNullOrEmpty(cookies.FedAuth)) {

                // Create cookie collection with the SAML token                    
                _expires = cookies.Expires;
                CookieContainer cc = new CookieContainer();

                // Set the FedAuth cookie
                Cookie samlAuth = new Cookie("FedAuth", cookies.FedAuth) {
                    Expires = cookies.Expires,
                    Path = "/",
                    Secure = cookies.Host.Scheme == "https",
                    HttpOnly = true,
                    Domain = cookies.Host.Host
                };
                cc.Add(samlAuth);

                if (_useRtfa) {
                    // Set the rtFA (sign-out) cookie, added march 2011
                    Cookie rtFa = new Cookie("rtFA", cookies.rtFa) {
                        Expires = cookies.Expires,
                        Path = "/",
                        Secure = cookies.Host.Scheme == "https",
                        HttpOnly = true,
                        Domain = cookies.Host.Host
                    };
                    cc.Add(rtFa);
                }
                _cachedCookieContainer = cc;
                return cc;
            }
            return null;
        }
        return _cachedCookieContainer;
    }

    public CookieContainer CookieContainer {
        get {
            if (_cachedCookieContainer == null || DateTime.Now > _expires) {
                return getCookieContainer();
            }
            return _cachedCookieContainer;
        }
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T14:42:26.347

Microsoft.EntityModel.dll 未在发布时添加到服务器上。我已经手动将此 .dll 放在服务器上，现在它可以工作了。

感谢您的帮助格兰特托马斯。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-12-23T09:10:27.830

它实际上是带有路径的 Microsoft.IdentityModel 参考：

> C:\Program Files\Reference Assemblies\Microsoft\Windows Identity Foundation\v3.5\Microsoft.IdentityModel.dll

如果你安装了 VS

# ajax - 我的 ajax 请求不起作用

> ID：13178533
> 
> 赞同：0
> 
> 时间：2012-11-01T13:53:30.350
> 
> 标签：ajax, jquery

我有一个`<ul id="keuze_lijst">`, 一个带有 id 的输入字段`#sykje`和一个带有 class 的按钮`.search`。

现在，当我按下按钮时，我想清除 UL 并用数据重新填充它，为此我目前得到了这个 .js 文件。

```
$(document).ready(function() {
    $(".search").click(function(){
        var searchValue = $("#sykje").val();
        $("#keuze_lijst").empty();

        $.ajax({
            url: 'http://www.autive.nl/frysk/simulator/sim.php?action=getSongs&search='+searchValue,
            data: "",
            dataType: 'json',
            success: function(rows) {
                for(var i in rows){
                    var row = rows[i];
                    var id = row[1];
                    var titel = row[2];
                    var artiest = row[9];

                    $("#keuze_lijst").append("<li class='mag_droppen'>"+
                                    "<div class='song_left'>"+
                                    "<div class='titel'>"+titel+"</div>"+
                                    "<div class='artiest'>"+artiest+"</div>"+
                                    "</div><!-- .song_left -->"+
                                    "</li>");
                }

            }
        });
    });
}); 
```

当我删除 ajax 命令并放置类似的东西时，`$("#keuze_lijst").html("hello");`它可以正常工作。但是 ajax 命令不起作用。虽然`var searchValue`他的工作。（ajax 使用正确的 url）。当我输入该网址时，页面会回显一个带有多行的精细 json。

但是在我的页面中，ajax 脚本没有添加`<li>`.

我究竟做错了什么？

**编辑：**添加了一个 jsfiddle -> [http://jsfiddle.net/TVvKb/1/](http://jsfiddle.net/TVvKb/1/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T13:55:00.383

`.html()`完全取代了 HTML。所以最后，你的`"#keuze_list`遗嘱包含`</li>`.

在将 html 构建为字符串 var 或其他内容后，只需执行一个 html() 命令即可。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T13:55:25.283

一眼看去，我可以说问题可能出在您对该`html()`功能的使用上。这实际上替换了整个 html 内容。

您可能想尝试使用[`append()`](http://api.jquery.com/append/)or [`prepend()`](http://api.jquery.com/prepend/)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-01T13:55:43.480

可能的问题：

您遇到了[同源问题](http://de.wikipedia.org/wiki/Same-Origin-Policy)。默认情况下，您只能向您自己的域发出 Ajax 请求。如果您需要进行跨域调用，请使用[JSONP](http://remysharp.com/2007/10/08/what-is-jsonp/)或[CORS](http://enable-cors.org/)。

只使用`html()`一次，并交出您的完整字符串，否则您将一直覆盖您以前的 html。

`success`由于错误（例如无效的 JSON），您没有登陆处理程序。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-01T14:14:31.730

不确定，但我认为如果您在`.append()`jQuery 和其他 jQuery 方法中插入一个字符串，它首先会解析为（有效的）HTML。这意味着未封闭的标签是封闭的，使您的 HTML 无效。

```
$('<div />'); // parses to <div></div> 
```

所以，我假设你的 DOM 最终是这样的：

```
$('ul').append('<li>').append('foo').append('</li>'); // <ul><li></li>foo</li></ul> 
```

请先格式化您的字符串。您不希望 jQuery 解析每个输入。

```
var str = '<li>';
str += 'foo';
str += '</li>';

$('ul').html(str); 
```

* * *

对于跨域 AJAX 请求（无 JSONP）：

**代理.php**

```
header('Content-Type: application/json');

if(empty($_GET['search'])) exit;

$url = 'http://www.autive.nl/frysk/simulator/sim.php?action=getSongs&search=' . $_GET['search'];

$ch = curl_init();
curl_setopt($ch, CURLOPT_URL, $url);
curl_exec($ch);
curl_close($ch); 
```

**Javascript**

```
$.getJSON({
    url: 'proxy.php&search='+searchValue,
    success: callback
}); 
```

# c# - 从容器中获取静态数据

> ID：13178546
> 
> 赞同：0
> 
> 时间：2012-11-01T13:54:04.413
> 
> 标签：c#, design-patterns, caching, inversion-of-control, ioc-container

我目前有一个作为单例实现的缓存对象（它是字典的包装器）。

我刚刚阅读了这篇关于单例模式的文章： [http ://ayende.com/blog/159426/design-patterns-in-the-test-of-time-singleton?key=e4eedc32-f43f-44e9-966d- 90a6ff792ddf](http://ayende.com/blog/159426/design-patterns-in-the-test-of-time-singleton?key=e4eedc32-f43f-44e9-966d-90a6ff792ddf)

这让我想到也许我应该利用我的 IoC 容器而不是单例。因为我发现很难测试访问 Singleton 的部分代码。

所以我的问题是：

Castle 中的 Singleton 生活方式（或任何 IoC 容器）是否与手卷 GoF Singleton 相同？

这造成了我有点奇怪的情况

1.  在容器中注册我的所有依赖项，
2.  然后解决某种填充缓存的引导程序，
3.  然后将缓存作为另一个注册添加到容器中

这是初始化容器的合法方式吗？没有同时完成所有注册似乎有点奇怪

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T13:58:27.997

单例是关于只有一个对象实例，在这种情况下是通过依赖注入框架实现的。单例与初始化时间无关。您可以创建单例并稍后对其进行初始化/修改。您可以随时将对您的单例的引用传递给其他对象。

# slickgrid - slickgrid resize 导致滚动条在底部附近出现间隙

> ID：13178547
> 
> 赞同：5
> 
> 时间：2012-11-01T13:54:11.420
> 
> 标签：slickgrid, jquery-layout

我有以下问题：我将 Slickgrid 与 jquery 布局结合使用。可以使用此插件调整窗格的大小。当我调整 Slickgrid 窗格的大小时，会出现一个水平滚动条，起初不存在，我无法一直滚动到底部。

我创建了一个 jsfiddle 来演示：http: [//jsfiddle.net/uNMRT/2/](http://jsfiddle.net/uNMRT/2/)

重现步骤：

1.  确保 slickgrid 窗格没有水平滚动条。
2.  一直滚动。（效果很好，你可以查看记录 119，最后一个）
3.  使用垂直拆分器调整 slickgrid 窗格的大小。确保将 slickgrid 区域缩小以显示水平滚动条。
4.  再次向下滚动。请注意，您无法完全向下滚动。现在看不到记录 119。

我已经在调整大小时做了一个 resizeCanvas：

```
center__onresize: function(pane, $pane, state, options) {
                myGrid.resizeCanvas();
            } 
```

这显然是不够的。有任何想法吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-04T17:40:37.480

我遇到了同样的问题，看起来光滑的网格没有正确设置“viewportHasHScroll”标志。我找到了以下两种解决方法来解决这个问题（SlickGrid v2.1）

1) 更新**updateCanvasWidth 函数（第 396 行）**并更改以下行

```
viewportHasHScroll = (canvasWidth > viewportW - scrollbarDimensions.width); 
```

到（注意“大于或等于”符号

```
viewportHasHScroll = (canvasWidth >= viewportW - scrollbarDimensions.width); 
```

2) 更新**handleScroll 函数（第 1920 行）**并更新 if 块

```
 //only scroll if they've moved at least one row
  if(vScrollDist && (vScrollDist > options.rowHeight)) {
      ....
  } 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-19T07:58:18.080

我面临同样的问题，但垂直滚动。如果容器被调整大小，垂直滚动条不会完全滚动。它在倒数第二个记录处停止。尽管栏有滚动空间，但它不能完全移动到底部。如果我将其拉下，网格会跳动，并且条形会再次移动到原始位置。永远无法查看最后一条记录。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-09T12:00:27.063

当我添加一行时，我也遇到了问题。这是因为您可能没有正确更新网格。你必须调用 grid.updateRowCount();

# java - elasticsearch - 返回字段的标记

> ID：13178550
> 
> 赞同：22
> 
> 时间：2012-11-01T13:54:27.593
> 
> 标签：java, search, lucene, token, elasticsearch

如何在结果中返回特定字段的标记

例如，一个 GET 请求

```
curl -XGET 'http://localhost:9200/twitter/tweet/1' 
```

返回

```
{
    "_index" : "twitter",
    "_type" : "tweet",
    "_id" : "1", 
    "_source" : {
        "user" : "kimchy",
        "postDate" : "2009-11-15T14:12:12",
        "message" : "trying out Elastic Search"
    } 
} 
```

我想在结果中包含“_source.message”字段的标记

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-11-01T17:03:18.727

还有另一种方法可以使用以下 script_fields 脚本：

```
curl -H 'Content-Type: application/json' -XPOST 'http://localhost:9200/test-idx/_search?pretty=true' -d '{
    "query" : {
        "match_all" : { }
    },
    "script_fields": {
        "terms" : {
            "script": "doc[field].values",
            "params": {
                "field": "message"
            }
        }

    }
}' 
```

重要的是要注意，虽然此脚本返回被索引的实际术语，但它还缓存所有字段值，并且在大型索引上可能会使用大量内存。因此，在大型索引上，从存储的字段或源中检索字段值并使用以下 MVEL 脚本即时重新解析它们可能更有用：

```
import org.apache.lucene.analysis.tokenattributes.CharTermAttribute;
import java.io.StringReader;

// Cache analyzer for further use
cachedAnalyzer=(isdef cachedAnalyzer)?cachedAnalyzer:doc.mapperService().documentMapper(doc._type.value).mappers().indexAnalyzer();

terms=[];
// Get value from Fields Lookup
//val=_fields[field].values;

// Get value from Source Lookup
val=_source[field];

if(val != null) {
  tokenStream=cachedAnalyzer.tokenStream(field, new StringReader(val)); 
  CharTermAttribute termAttribute = tokenStream.addAttribute(CharTermAttribute); 
  while(tokenStream.incrementToken()) { 
    terms.add(termAttribute.toString())
  }; 
  tokenStream.close(); 
} 
terms 
```

此 MVEL 脚本可以存储为`config/scripts/analyze.mvel`以下查询并与以下查询一起使用：

```
curl 'http://localhost:9200/test-idx/_search?pretty=true' -d '{
    "query" : {
        "match_all" : { }
    },
    "script_fields": {
        "terms" : {
            "script": "analyze",
            "params": {
                "field": "message"
            }
        }

    }
}' 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-11-01T14:47:46.020

如果您指的是已编入索引的标记，您可以在消息字段上创建[术语方面。](https://www.elastic.co/guide/en/app-search/current/facets.html)增加`size`值以获取更多条目，或设置为`0`以获取所有术语。

Lucene 提供了存储术语向量的能力，但目前还无法通过 elasticsearch 访问它（据我所知）。

你为什么需要那个？如果您只想检查要索引的内容，可以查看[analyze api](https://www.elastic.co/guide/en/elasticsearch/reference/current/indices-analyze.html)。

# android - 在自定义对象android上实现触摸事件

> ID：13178554
> 
> 赞同：0
> 
> 时间：2012-11-01T13:54:36.130
> 
> 标签：android

我正在尝试使用 Surface View 编写一个简单的程序。我有一个名为 ball 的对象，它在 Surface 上绘制并不断移动。我想在对象上启用触摸事件。目标是当我触摸它时停止球移动几秒钟。我不确定如何将 setOnTouchListener 添加到 Customer Object 球。

我能够在 Surface View 之上创建自定义视图。但是当我触摸自定义视图的球时，它没有响应触摸。我已经实现了 OnTouchListener 并设置了 setOnTouchListener。我很新，所以遇到了问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T14:22:20.453

扩展视图类。查看下面的链接，了解画布上的自定义组件和触摸事件。

[View.OnTouchListener](http://developer.android.com/reference/android/view/View.OnTouchListener.html)

[自定义组件](http://developer.android.com/guide/topics/ui/custom-components.html)

[触摸事件和画布可绘制对象的一些额外链接](https://www.google.com/search?q=Canvas%20drawable%20touch%20event)

# android - 录制安卓屏幕

> ID：13178556
> 
> 赞同：0
> 
> 时间：2012-11-01T13:54:43.850
> 
> 标签：android, recording

我想为Android写一个游戏。为了很好地呈现它，它必须在 Google Play 商店中有一部 YouTube 电影。

我怎样才能做到这一点？因为亚行只制作幻灯片，因为它很慢。那里有录音的应用程序吗？

PS：我只有 Tegra 设备（Galaxy Nexus 和 Nexus 7），所以[http://pkg.to/com.ms.screencast](http://pkg.to/com.ms.screencast)还不行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T14:03:25.160

您可能想尝试使用模拟器并使用 FRAPS 等常规视频录制程序进行录制。x86模拟器的性能有了很大的提升，还支持GPU模拟。

这是 Android 文档中的一个页面，概述了如何为模拟器启用硬件加速：

[http://developer.android.com/tools/devices/emulator.html#acceleration](http://developer.android.com/tools/devices/emulator.html#acceleration)

这种方法的缺点是多点触控手势不容易做到。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T14:00:28.483

新的 Android 4.2 具有无线显示功能，允许将屏幕内容发送到电视屏幕等。由于您拥有 Nexus 设备，我想您很快就会得到更新。我不知道技术细节，但我很确定有可能记录发送的信号。

看到这个公告：[http ://www.android.com/whatsnew/](http://www.android.com/whatsnew/)

# xml - 树视图 IsSelected 和 IsExpanded 不起作用

> ID：13178558
> 
> 赞同：1
> 
> 时间：2012-11-01T13:54:44.520
> 
> 标签：xml, c#-4.0

我在我的 ViewModel 中创建了 XMLDataPropety 并将它绑定到我的视图中的树视图。这工作正常，问题是 IsSeleted 和 IsExpanded 不起作用。每次用户单击树时，如何获取选定的节点？

# android - SCREEN_ORIENTATION_REVERSE_PORTRAIT 是否正确？

> ID：13178559
> 
> 赞同：8
> 
> 时间：2012-11-01T13:54:45.583
> 
> 标签：android, screen-orientation

好吧，我正在尝试添加一个锁定方向按钮，但是当我打电话时

```
setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_REVERSE_PORTRAIT); 
```

屏幕变为正常人像。我究竟做错了什么？

```
public void onSensorChanged(SensorEvent event) {

    x = event.values[0];
    y = event.values[1];
    z = event.values[2];

    orientation.setOnClickListener(new OnClickListener() {
        public void onClick(View v) {
            // TODO Auto-generated method stub
            if (x > 5){
                setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_LANDSCAPE);
            } else if (x < -5){
                setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_REVERSE_LANDSCAPE);
            } else if (y > 5){
                setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_PORTRAIT);
            } else if (y < -5){
                setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_REVERSE_PORTRAIT);
            }
        }
    });
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T20:52:08.207

好吧，我解决了它的变化

```
android:targetSdkVersion="15" 
```

对此

```
android:targetSdkVersion="11" 
```

在清单中，我真的不认为这是问题所在，但现在它正在工作。只是想发布它以防万一有人遇到问题。

# c++ - 如何在 C++ 中创建一个 D3DFORMAT 数组？

> ID：13178566
> 
> 赞同：1
> 
> 时间：2012-11-01T13:55:05.537
> 
> 标签：c++, arrays, visual-c++, direct3d, memset

D3DFORMAT *arr = NULL;

这是对应该保存 D3DFORMAT 类型值的数组的引用。如何为这个大小由变量定义的数组分配内存

```
unsigned int arrsize; 
```

我应该以字节为单位计算数组的大小**= sizeof(D3DFORMAT)*arrsize;**

而不是使用 memset().?

如果我错了，请纠正我。或者，如果 tere 是一种更清洁、更好的 C++ 方法来执行此操作。?

提前。谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-01T14:01:10.327

“更干净更好的 C++ 方法”是使用 std::vector

```
unsigned int arrsize = 10;
std::vector <D3DFORMAT> array (arrsize ); 
```

将其投射到`void*`

```
void* p = (void*)(&array[0]); 
```

您还希望您的值默认为 0，因此只需向构造函数添加一个参数

```
unsigned int arrsize = 10;
std::vector <D3DFORMAT> array (arrsize, 0); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-01T14:01:11.867

像这样

```
D3DFORMAT* arr = new D3DFORMAT[arrsize]; 
```

`memset`可能会起作用，或者它可能会使您的程序崩溃。这一切都取决于如何`D3DFORMAT`定义。你能发布 的定义`D3DFORMAT`吗？

刚刚注意到您要求更好的方法。更好的方法很可能是

```
std::vector<D3DFORMAT> arr(arrsize); 
```

但同样，它确实取决于如何`D3DFORMAT`定义。

# twitter-bootstrap - 从 github 克隆后编译 Twitter Bootstrap - 输出在哪里？

> ID：13178568
> 
> 赞同：3
> 
> 时间：2012-11-01T13:55:07.177
> 
> 标签：twitter-bootstrap, makefile

> **可能重复：**
> [twitter bootstrap make from source](https://stackoverflow.com/questions/9123112/twitter-bootstrap-make-from-source)

我正在尝试了解如何构建 Twitter Bootstrap。似乎有两种方法可以访问 Twitter Bootstrap。

首先是从[http://twitter.github.com/bootstrap/assets/bootstrap.zip](http://twitter.github.com/bootstrap/assets/bootstrap.zip)下载一个**，**然后解压，得到如下目录结构：`bootstrap.zip`

```
.
└── bootstrap/
    ├── css/
    │   ├── bootstrap-responsive.css
    │   ├── bootstrap-responsive.min.css
    │   ├── bootstrap.css
    │   └── bootstrap.min.css
    ├── img/
    │   ├── glyphicons-halflings-white.png
    │   └── glyphicons-halflings.png
    └── js/
        ├── bootstrap.js
        └── bootstrap.min.js

4 directories, 8 files 
```

如果我理解正确，我所要做的就是将`bootstrap`目录及其下面的所有文件放到我的项目目录中，然后在我的 HTML 文件中包含一个类似于以下内容的标记：`<link type="text/css" rel="stylesheet" href="location_of_my_twitter_bootstrap_file" />`

获取 Twitter Bootstrap的**第二种**`make`方法是克隆 github 项目，然后使用它来构建它。我已经安装`Node.js`并且我曾经`npm`安装过几个包，例如`less` `jshint` `recess` `uglify-js`和`connect`. 当我`make`从引导目录运行命令时，它似乎工作，我得到以下输出：

```
##################################################
Building Bootstrap...
##################################################

Running JSHint on javascript...             ✔ Done
Compiling LESS with Recess...               ✔ Done
Compiling documentation...                  ✔ Done
Compiling and minifying javascript...       ✔ Done

##################################################
Bootstrap successfully built at 09:36AM.
##################################################

Thanks for using Bootstrap,
<3 @mdo and @fat 
```

但是，我没有得到与解压缩 zip 文件给我的目录结构相同的引导目录。相反，更新了一堆文件`bootstrap/docs/assets`，它们似乎与我从 bootstrap.zip 获得的文件不对应（例如，它们还有很多）。

我的问题是：克隆 github 项目有什么优势，`make`我这样做的目的是什么，如何从可以从我的项目链接到的 Twitter Bootstrap 源文件中干净地生成 CSS 和 JS 文件？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T16:54:58.847

我想到了。问题是我只是在运行`make`命令。仔细观察后，`Makefile`我意识到我需要跑步`make bootstrap`。（`make`自行运行默认为`make build`。）一旦我运行`make bootstrap`，`bootstrap`就会创建一个包含预期文件的目录。

# sql - SQL Server 转换错误

> ID：13178569
> 
> 赞同：0
> 
> 时间：2012-11-01T13:55:08.580
> 
> 标签：sql, sql-server

我的问题是关于我[之前](https://stackoverflow.com/questions/13176788/ms-sql-2005-cant-compare-dates)的话题。

我遇到的问题是，当必须投射的日期是这样的： (25.09.2012) 抛出一个奇怪的错误：

> 将 char 数据类型转换为 datetime 数据类型会导致 datetime 值超出范围。

这里的代码是：

```
edited 
```

有没有办法转换它？例如，当我`20.09.2012`输入错误时，它正在运行，`10.09.2012`请帮我解决这个问题！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T13:57:56.377

您正在使用`GERMAN`（*dd.MM.yyyy*）格式，请尝试

```
convert(datetime, '20.09.2012', 104) 
```

*   **[CAST 和转换^([MSDN 文档])](http://msdn.microsoft.com/en-us/library/aa226054%28SQL.80%29.aspx)**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T13:57:43.150

试试这个：

```
...
AND CONVERT(VARCHAR(10), p11.pa_value, 121) >= 
    CONVERT(VARCHAR(10), '01.04.2012', 121) 
```

# codeigniter - 如何在codeigniter中保持会话不变？

> ID：13178573
> 
> 赞同：2
> 
> 时间：2012-11-01T13:55:25.097
> 
> 标签：codeigniter, shopping-cart, sessionid

我试图通过将购物车存储在数据库的表中来创建购物车，而不是使用内置的 CI 购物车类。我使用 sessionID 来区分一个访问者和另一个访问者。但是我发现sessionID在一段时间内发生了变化，即使访问者没有关闭浏览器。

这是 CI 在短时间内更新 sessionID 的正常行为吗？有没有办法让它保持不变，直到访问者关闭浏览器？

提前谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-02T00:35:42.497

另外，请确保在您的配置文件中设置了 cookie_prefix .. 见底部：[http ://ellislab.com/codeigniter/user_guide/libraries/sessions.html](http://ellislab.com/codeigniter/user_guide/libraries/sessions.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-21T17:23:10.237

如果您的会话不断被 CI 会话库重置，请确保 cookie 域设置为：

```
$config['cookie_domain']    = '.mysite.com'; // the . is for a wildcard subdomain 
```

# javascript - 来自 SQL 的动态 HTML

> ID：13178580
> 
> 赞同：0
> 
> 时间：2012-11-01T13:55:43.730
> 
> 标签：javascript, html, sql

我正在运行一个查询并将其存储为构建动态 HTML 的 Javascript 字符串。我如何在数据库中插入一些东西来创建一个 JS 字符串可以读取的换行符？

以下是构建字符串的方式：

```
final_string = '<br/><b>' + infoarray[b][3] + '&nbsp;' + convertDate(infoarray[b][1]) + '</b><br/>' + infoarray[b][0] + '<br/>'; 
```

2d infoarray 是从数据库中提取的数据。在上面的例子中，`infoarray[b][3]`是：

1.  致电 1-877-968-7762 开始您的退休生活。
2.  制作养老金选举/申报表。
3.  查看 Savings/401(k) 选项。
4.  查看医疗选项。5) 审查/确认受益人。

我想在每个数字之前换行，但我不知道该怎么做。有谁知道怎么做？

# excel - VBA 替代 For Each

> ID：13178581
> 
> 赞同：0
> 
> 时间：2012-11-01T13:55:45.090
> 
> 标签：excel, vba

我目前`For ... Each`在我的代码中使用了很多循环，这大大降低了它的速度，有没有更快的方法？

我听说我可以将范围复制到数组并编辑数组并将其粘贴回来，但我在编辑数组中的每个单元格时遇到了一些问题。

这是我正在使用的每个代码的电流 - 谢谢。

```
Dim cell As Range
    For Each cell In Sheets("sheet1").UsedRange
        cell.Value = cell.Value
Next cell 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-01T14:09:22.533

试试这个 - 更快更高效：

```
Sheets("sheet1").UsedRange.Value = Sheets("sheet1").UsedRange.Value 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-01T14:11:07.807

这些方面的东西：

```
Dim aCells As Variant
Dim x As Long
Dim y As Long

aCells = Sheets("Sheet1").UsedRange

' Now do something with the array;
' We'll debug.print the contents of each element
'   to verify that it matches the cells in the sheet
For x = 1 To UBound(aCells, 1)
  For y = 1 To UBound(aCells, 2)
    Debug.Print aCells(x, y)
  Next
Next 
```

# php - 选择菜单的联系表格 7 水印

> ID：13178585
> 
> 赞同：9
> 
> 时间：2012-11-01T13:55:49.967
> 
> 标签：php, wordpress, contact-form-7

我正在寻找一种在选定字段上放置水印的方法。

那不工作->

```
[select* c_type class:ic watermark "choose type" "a" "b" "c"] 
```

要放置一个验证失败的无效值，我必须输入`include_blank`

```
[select* c_type class:ic include_blank "a" "b" "c"] 
```

但问题是我有`---`水印，这就是我想要改变的..

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2015-07-01T20:21:12.713

最新版本的 Contact Form 7 允许使用 first_as_label 创建占位符文本，如果用户不进行选择，则该占位符文本不会作为条目进行验证。只需让您的占位符文本成为选项列表中的第一个标签。

```
[select* food-choice first_as_label "Preferred food?" "Cake" "Pizza" "Burger" "Salad" "Donut"] 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-11-01T13:55:49.967

经过艰苦的搜索，我发现这个脚本正在工作并在定位到该元素时替换了“---”，这个脚本正在改变所有的“---”

```
function my_wpcf7_form_elements($html) {
    $text = 'Please select...';
    $html = str_replace('<option value="">---</option>', '<option value="">' . $text . '</option>', $html);
    return $html;
}
add_filter('wpcf7_form_elements', 'my_wpcf7_form_elements'); 
```

此代码，替换为定位

```
function my_wpcf7_form_elements($html) {
    function ov3rfly_replace_include_blank($name, $text, &$html) {
        $matches = false;
        preg_match('/<select name="' . $name . '"[^>]*>(.*)<\/select>/iU', $html, $matches);
        if ($matches) {
            $select = str_replace('<option value="">---</option>', '<option value="">' . $text . '</option>', $matches[0]);
            $html = preg_replace('/<select name="' . $name . '"[^>]*>(.*)<\/select>/iU', $select, $html);
        }
    }
    ov3rfly_replace_include_blank('menu-569', 'Choose language', $html);
    ov3rfly_replace_include_blank('menu-614', 'Choose country', $html);
    return $html;
}
add_filter('wpcf7_form_elements', 'my_wpcf7_form_elements'); 
```

希望这会让你们中的一些人头疼（来源[在这里](http://wordpress.org/support/topic/plugin-contact-form-7-set-include_blank-value-diff-than-?replies=4)）

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2016-06-23T11:22:42.847

试试这个：

```
[select* menu-206 first_as_label "Select doctor" "David Mikaberidze" "Sophio Gelashvili" "Maya Dolidze"] 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-01-02T09:42:35.247

你可以用一行 jQuery 来完成。

> 要将 - - - 替换为我想要的占位符文本，我首先在 Contact Form 7 选项中为字段提供了一个 ID。在此之后，我在脚本标签之间的主题页脚中添加了以下内容。

```
$("#typeofinjury option:first:contains('---')").html('How Were You Injured?');//Replace --- 
```

> 该代码只是在下拉菜单中查找 ID 为“typeofinjury”的第一个选项。然后将其替换为文本“你是如何受伤的？”。

带有屏幕截图的此解决方案的博客文章在[这里](http://harrisonproject.co.uk/my-blog/adding-placeholderwatermark-in-contact-form-7-drop-down/)

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2017-05-03T11:08:47.590

如果你发现字符串替换效率低下，你可以简单地使用这个：

```
jQuery(function($) {
    $("select option:first").attr('disabled', 'disabled');// Disable the first value/label ---
  }); 
```

我还通过在 wcf7 的简码中添加“first_as_label”来确保第一个替代方案是我想要使用的“标签”，如下所示：

```
[select name first_as_label 'label' 'alt1' 'alt2' 'alt3'] 
```

通过禁用第一个选项，wcf7 在选择启用的替代选项之前不会确认表单。

# ios6 - 完成：在 presentModalViewController 上为零

> ID：13178588
> 
> 赞同：1
> 
> 时间：2012-11-01T13:55:55.583
> 
> 标签：ios6, deprecated

当我设置

```
[self presentModalViewController:Facebookcontroller animated:YES]; 
```

到

```
[self presentViewController:Facebookcontroller animated:YES completion:nil]; 
```

删除 presentModalViewController:animated is deprecated: first deprecated in iOS 6.0

弹出另一个警告：

找不到实例方法'-presentModalViewController:animated:completion:'（返回类型默认为'id'）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T14:01:24.267

1.  您确定`self`在这种情况下是 UIViewController 吗？您只能从另一个 UIViewController 调用此代码。

2.  确保首先初始化 Facebookcontroller 类，不能只传递该类。`Facebookcontroller *facebookController = Facebookcontroller alloc] init];`

对于 iOS 6 使用：

```
[self presentViewController:Facebookcontroller animated:YES completion:^{
    //Do whatever you want to do when the controller 'Facebookcontroller' is presented.
}]; 
```

或者

```
[self presentViewController:Facebookcontroller animated:YES completion:nil]; 
```

您可以在[此处](http://developer.apple.com/library/ios/documentation/uikit/reference/UIViewController_Class/Reference/Reference.html#//apple_ref/doc/uid/TP40006926-CH3-SW75)找到参考。

# vba - 错误 9 超出范围 .Sheets(i)

> ID：13178595
> 
> 赞同：0
> 
> 时间：2012-11-01T13:56:22.357
> 
> 标签：vba, ms-access, excel, ms-access-2007

大家好，我一直在努力寻找解决我的错误的方法，但我在网上找不到类似的例子来解决这个问题。我有一个变量（i）在进入循环时设置为 3，然后进入第一个 if 语句它运行良好，文件被复制并插入到工作表 3 但是一旦它增加到 4 并进入第二个 if 语句我得到一个错误 9

```
 Set wks4 = wkb.Sheets(i) 
```

这是下面完整代码的一部分，希望你们能帮助我。

```
Set Excel_App = New EXCEL.Application
Excel_App.Visible = False
Set wkb = EXCEL.Workbooks.Add
Set wks = wkb.Sheets(1) 'want first sheet

With wks
    ......
    'extra code involing input to sheet 1 
End With

    Dim wkb2 As EXCEL.Workbook
    Set wkb2 = EXCEL.Application.Workbooks.Open(strDir & "\DETAILS.xlsx")

        wkb2.ActiveSheet.Cells.Select
        Selection.Copy
        Set wks2 = wkb.Sheets(2)
        With wks2
            .Range("A1").PasteSpecial Paste:=xlPasteValues, Operation:=xlNone, SkipBlanks _
        End With
        wkb2.Close

i = 3
      Do While Not rstTypes.EOF

            If rstTypes![TYPE] Like "GROUPED" Then
                    DoCmd.OutputTo acOutputReport, "EXCEL_CBD_CAP_CR", acFormatXLS, strDir & "\SAMEDAY_NEXTDAY_FUTURE.xls", 0
                    Dim wkb3 As EXCEL.Workbook
                    Set wkb3 = EXCEL.Application.Workbooks.Open(strDir & "\SAMEDAY_NEXTDAY_FUTURE.xls")

                    wkb3.ActiveSheet.Cells.Select
                    Selection.Copy
                    Set wks3 = wkb.Sheets(i)
                    With wks3
                        .Range("A1").PasteSpecial Paste:=xlPasteValues, Operation:=xlNone, SkipBlanks _
                                :=False, Transpose:=False
                    End With
                    wkb3.Close                   
                    i = i + 1
            End If

            If rstTypes![TYPE] Like "GROUPED2" Then
                DoCmd.OutputTo acOutputReport, "EXCEL_ND/FUT_CAP_CR", acFormatXLS, strDir & "\NEXTDAY_FUTURE.xls", 0
                    Dim wkb4 As EXCEL.Workbook
                    Set wkb4 = EXCEL.Application.Workbooks.Open(strDir & "\NEXTDAY_FUTURE.xls")

                    wkb4.ActiveSheet.Cells.Select
                    Selection.Copy
                    Set wks4 = wkb.Sheets(i)
                    With wks4
                        .Range("A1").PasteSpecial Paste:=xlPasteValues, Operation:=xlNone, SkipBlanks _
                                :=False, Transpose:=False
                    End With
                    wkb4.Close
                    Kill (strDir & "\NEXTDAY_FUTURE.xls")

                    i = i + 1
            End If
            rstTypes.MoveNext
 Loop 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T14:03:33.767

这意味着第 i 个工作表不存在，每次您想与策略性放置的工作表交互时都检查一下：

`If i > ThisWorkbook.Worksheets.Count then Exit Do`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-01T14:06:09.273

您可能没有第四张工作表。根据您的代码，我假设您希望工作表存在，因此您需要在运行时添加工作表。您应该将 wks3 和 wks4 的两个工作表设置包装在如下逻辑中：

```
if wkb.Sheets.Count < i then
   Set wks3 = wkb.sheets.add
end if 
```

然后后来

```
if wkb.Sheets.Count < i then
   Set wks4 = wkb.sheets.add
end if 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-01T14:08:29.600

还请记住，与数组不同，**第一**张纸将是第一张纸。

# visual-studio-2010 - 在 Visual Studio 2010 上调试时 IIS 超时

> ID：13178600
> 
> 赞同：6
> 
> 时间：2012-11-01T13:56:33.743
> 
> 标签：visual-studio-2010, debugging, iis

在 Visual Studio 2010 中调试时遇到令人沮丧的错误。

我相当肯定它与 IIS 上的设置有关，但不知道它是什么！

这是错误：- '正在调试的 Web 服务器进程已被 IIS 终止。'

每次我在我们工作的各种工作区中调试时都会发生超时

调试器需要大约 90 秒不活动才能显示错误

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-01T14:20:11.603

我找到了解决方案

在 IIS 的高级应用程序池设置中，您可以更改进程模型上的最大 ping 响应时间以阻止调试器超时。

# javascript - 在移动设备上查看时显示的弹出窗口

> ID：13178609
> 
> 赞同：2
> 
> 时间：2012-11-01T13:57:36.363
> 
> 标签：javascript, redirect, mobile

我有一个需要将移动用户重定向到移动网站的网站，但是由于这些网站托管在不同的地方，我无法设置 cookie 来记住他们是否是从移动网站引导的。因此有一个连续的循环。

我现在要做的就是在用户在手机上查看时显示一个弹出窗口，为他们提供在手机上查看网站或取消查看完整网站的选项。

我知道这在 Javascript/jQuery 中是可能的，但我不确定如何去做。

有人可以帮我吗？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-01T13:59:44.533

试试这个...

```
// Check for mobile user agent
var mobile = (/iphone|ipad|ipod|android|blackberry|mini|windows\sce|palm/i.test(navigator.userAgent.toLowerCase()));
if (mobile) {
    //alert("MOBILE DEVICE DETECTED");              
} else {
    //alert("NO MOBILE DEVICE DETECTED");
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-01T14:02:11.233

您只需将弹出窗口添加到您的 HTML，默认隐藏它，如果它是使用 CSS 的移动设备，则显示它。

```
/* hidden on default */
div#popup { display: none; }

/* use a media query to filter small devices */
@media only screen and (max-device-width:480px) {
    /* show the popup */
    div#popup { display: block; }
} 
```

就性能而言，这是迄今为止最好的选择。所有现代手机都支持媒体查询，因此您也不会有任何问题。

只需添加两个链接，要求用户访问桌面站点或移动站点。如果他选择桌面站点，您可以使用服务器端语言将弹出窗口排除在外，或者使用 javascript 删除弹出窗口。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-01T14:02:46.007

您可以检查用户代理。[在这里](http://www.abeautifulsite.net/blog/2011/11/detecting-mobile-devices-with-javascript/)您可以获得详细信息。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-01T14:26:39.467

这是我过去用来检测移动设备的一些代码：

```
var ua=navigator.userAgent.toLowerCase();
var isMobile = 
   screen.width < 500 ||
   ua.indexOf('mobile')!=-1 ||
   ua.indexOf('iphone')!=-1 ||
   ua.indexOf('ipod')!=-1 ||
   ua.indexOf('blackberry')!=-1 ||
   ua.indexOf('windows phone')!=-1 ||
   ua.indexOf('zunewp7')!=-1) && 
   ua.indexOf('tablet')==-1 &&
   ua.indexOf('playbook')==-1 &&
   ua.indexOf('webos')==-1 &&
   ua.indexOf('ipad')==-1; 
```

这应该会检测到 iPhone、iPod、Blackberries、Windows Phone、ZuneWP7、大多数 android 手机和许多其他手机。对于大多数 android 平板电脑、Blackberry Playbooks、WebOS 设备、iPad 和许多其他平板电脑来说，这将是错误的。

# javascript - 用于 iPhone 的 JavaScript 从非默认 iOS 浏览器在 Safari 中打开

> ID：13178610
> 
> 赞同：10
> 
> 时间：2012-11-01T13:57:35.470
> 
> 标签：javascript, ios, safari

在移动版 Safari 中打开的“googlechrome://www.lego.com”会切换到 Google Chrome iOS 应用打开 URL。这允许像下面这样的脚本，它允许您在 Google Chrome iOS 应用程序中打开当前页面，从移动 Safari 切换：

```
(function()%7Bif(document.location.href.indexOf('http')===0)document.location.href=document.location.href.replace(/%5Ehttp/,'googlechrome');%7D)(); 
```

我的问题是，可以反过来吗？我试过“safari://www.lego.com”，它只是一个无效的 URL。您能否制作一个*从*Google Chrome切换*到*移动 Safari 以打开当前页面的脚本。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-28T04:12:55.870

答案是肯定的。礼貌或 MacStories ( [http://www.macstories.net/tutorials/chrome-for-ios-send-a-webpage-back-to-safari-via-bookmarklet/](http://www.macstories.net/tutorials/chrome-for-ios-send-a-webpage-back-to-safari-via-bookmarklet/) )，我找到了这段代码：

`window.location='googlechrome-x-callback://x-callback-url/open/?url='+encodeURIComponent(location.href)+'&x-source=Safari&x-success='+encodeURIComponent(location.href);`

执行该代码，转到您的主屏幕，重新打开 Chrome，然后有一个神奇的返回按钮可以返回 Safari。这可能不是您想要的，但它确实有效......扭结。

祝你好运！

**更新：** 这是一个截图：链接（对不起，我没有足够的声誉把它放在帖子里）：http: [//i.stack.imgur.com/OR175.jpg](http://i.stack.imgur.com/OR175.jpg)

**更新：**
似乎执行此操作的功能已损坏。谢谢！

# wcf-data-services - 如何从 WCF 数据服务返回文件？

> ID：13178612
> 
> 赞同：4
> 
> 时间：2012-11-01T13:57:49.773
> 
> 标签：wcf-data-services

有没有办法从 WCF 数据服务中的服务操作方法返回文件，即 pdf 或 excel？

例如，假设我有以下带有单个服务操作的 WCF 数据服务。为简单起见，服务操作可以直接或使用 ServiceProvider 从文件中读取 pdf。

```
public class TheService : DataService<ServiceProvider>
{
    public static void InitializeService(DataServiceConfiguration config)
    {
        config.SetServiceOperationAccessRule("GetPdf", ServiceOperationRights.All);
        config.DataServiceBehavior.MaxProtocolVersion = DataServiceProtocolVersion.V2;
    }

        [WebGet]
        public ? GetPdf(string fileName)
        {
             byte[] byteArray = System.IO.File.ReadAllBytes(fileName);
        }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-01T14:00:29.603

您将返回文件的字节，并且接收者应该知道如何处理数据（即，将其保存到具有适当扩展名的文件中，或保存在数据库中或其他任何东西中）给定您提供的元数据信息。数据可以是简单的字节数组，也可以使用流式传输和缓冲功能。

简短的回答是肯定的。

如果您可以向我们提供更多信息，甚至可能是您正在处理的一些问题并遇到特定问题，那么我们可以提供最具体的帮助——目前这只是要求一个简洁的答案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-03T01:16:43.470

除非您有使用服务操作的单独原因，否则您可以实现一个流提供程序，如下所述：[流提供程序（WCF 数据服务）](http://msdn.microsoft.com/en-us/library/ee960144.aspx)。然后获取您的文件就像访问实体上的属性一样。

# c# - ContextMenuStrip DropDownItem 的 SourceControl 返回 null

> ID：13178614
> 
> 赞同：4
> 
> 时间：2012-11-01T13:57:57.440
> 
> 标签：c#, winforms

我在 WinForm 项目中使用 ContextMenuStrip。我在设计时添加了两个项目 - 1）添加焦点和 2）删除焦点。在运行时，我在“添加焦点”项中添加了几个下拉项。问题是，我在尝试检索源代码控制名称时得到空值。

这是我的代码：

```
ToolStripDropDownItem dropDownItem = sender as ToolStripDropDownItem;
ToolStripMenuItem mainItem = dropDownItem.OwnerItem as ToolStripMenuItem;
ContextMenuStrip contextMenuStrip = mainItem.Owner as ContextMenuStrip;
Control control =contextMenuStrip.SourceControl; //getting null here 
```

这段代码有什么问题？我在这里错过了什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2017-01-23T13:41:13.237

上下文菜单条必须设置为用户控件或表单的 ContextMenuStrip 属性:)

来源：[https ://www.codeproject.com/Questions/487557/SourceControlplusofplusContextMenuStripplusDropDow](https://www.codeproject.com/Questions/487557/SourceControlplusofplusContextMenuStripplusDropDow)

# c - C 中 int 类型的 sqrt()

> ID：13178618
> 
> 赞同：5
> 
> 时间：2012-11-01T13:58:00.383
> 
> 标签：c, int, double, sqrt

我在 mac os x 上用 c 语言编程。我正在使用来自 math.h 的 sqrt，函数如下：

```
int start = Data -> start_number;
double localSum;

for (start; start <= end; start++) {
    localSum += sqrt(start);
} 
```

这行得通，但为什么呢？为什么我没有收到警告？在 sqrt 的手册页上，它需要一个 double 作为参数，但我给它一个 int - 它是如何工作的？

谢谢

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-01T13:59:14.987

**不会导致**精度损失的类型转换可能不会引发警告。它们是隐式转换的。

```
int --> double //no loss in precision (e.g 3 became 3.00)
double --> int //loss in precision (e.g. 3.01222 became 3) 
```

触发警告和不触发警告的因素在很大程度上取决于编译器和提供给它的标志，但是，大多数编译器（至少我使用过的那些）**不考虑**隐式类型转换`dangerous`足以保证警告，因为它是语言规范中的一个特性。

* * *

## 警告或不警告：

C99 Rationale 将其视为**指南**

> 探索这个（隐式转换）问题的重要成果之一是理解高质量的编译器可能会很好地寻找这些有问题的代码并提供（可选的）诊断，并且尽职尽责的讲师可能会很好地警告程序员这些问题隐式类型转换。

**[C99 基本原理（2003 年 4 月）：第 45 页](http://www.open-std.org/jtc1/sc22/wg14/www/C99RationaleV5.10.pdf)**

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-01T14:12:32.410

编译器知道 的原型`sqrt`，因此它可以并且将在调用函数之前生成将`int`参数转换为的代码。`double`

反之亦然，如果您将 a 传递`double`给带参数的函数（具有已知原型）`int`，编译器将生成所需的转换代码。

编译器是否警告此类转换取决于编译器和您在命令行上请求的警告级别。

对于`int -> double`通常（具有 32 位（或 16 位）`int`和 64 位`doubles`IEEE754 格式）是无损的转换，如果可能的话，获得该转换的警告可能很难。

对于`double -> int`使用 gcc 和 clang 的转换，您需要使用 专门询问此类警告`-Wconversion`，否则它们将默默地编译代码。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-01T13:59:59.623

Int 可以安全地自动向上转换为 double，因为没有数据丢失的风险。反过来是不正确的。要将 double 转换为 int，您必须显式转换它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-01T14:02:49.337

C 编译器使用 double 和 int 进行一些自动转换。您还可以执行以下操作：

```
int start = Data -> start_number;
int localSum;

for (start; start <= end; start++) {
   localSum += sqrt(start);
} 
```

即使 localSum 是一个 int 这仍然可以工作，但它总是会削减任何超出点的内容。
例如，如果 sqrt() 的返回值为 1.365，它将被存储为简单的 1。

# sqlite - 内存单元测试中的 NHibnernate SQL Lite 与物理数据库的工作方式不同

> ID：13178629
> 
> 赞同：1
> 
> 时间：2012-11-01T13:58:28.623
> 
> 标签：sqlite, unit-testing, fluent-nhibernate, automapping

我正在构建一个“了解 NHibernate 项目”。

我的单元测试 (nunit) 为存储库层提供与普通 mvc 站点相同的配置，但使用“SQLiteConfiguration.Standard.InMemory()”而不是“MsSqlConfiguration.MsSql2008”。我希望我可以以完全相同的方式使用流利的休眠和自动映射，但有一个用于测试的快速内存数据库和一个用于应用程序的真实数据库。

在存储库构造函数中，它为所有查询创建 Session 对象以供使用，并实现 IDisposable ，这将确保正确处理会话。例如，保存文章方法如下所示：

```
 public void SaveArticle(Article article)
    {            
        Session.SaveOrUpdate(article);      
        Session.Flush();
    } 
```

到目前为止，MVC 站点似乎一切正常，我的测试也通过了。我想我遇到了一个问题，这一定是我的设计问题。

到目前为止，我有两个对象：

```
class Article
{
    public virtual int Id {get; set; }
    public virtual IList<Tag> Tags {get; set; }
 }

 class Tag
 {
    public virtual int Id {get; set; }
    public virtual string Text {get; set; }
 } 
```

我只希望数据库存储每个标签的一个实例。如此多的文章可以使用相同的标签。所以我写了这个测试：

```
 [Test]
    public void TestDeletingTagWillNotDeleteOthersTagV2()
    {
        Article article = new Article();
        article.Tags.Add(new Tag { Text = "C#" });
        article.Tags.Add(new Tag { Text = "VB" });
        Service.SaveArticle(article);

        Article article2 = new Article();
        article2.Tags.Add(new Tag { Text = "C#" });
        Service.SaveArticle(article2);

        Guid article1Id = article.Id;
        Guid article2Id = article2.Id;

        article = null;
        article2 = null;

        Article article3 = Service.GetArticle(article1Id);
        Article article4 = Service.GetArticle(article2Id);

        Assert.AreEqual(2, article3.Tags.Count);
        Assert.AreEqual(1, article4.Tags.Count);

        Assert.AreEqual(2, Service.Tags.Count);

        article3.Tags.RemoveAt(0);
        Service.SaveArticle(article3);

        Article article5 = Service.GetArticle(article1Id);
        Article article6 = Service.GetArticle(article2Id);

        Assert.AreEqual(1, article5.Tags.Count);
        Assert.AreEqual(1, article6.Tags.Count);

        Assert.AreEqual(2, Service.Tags.Count);
    } 
```

这个测试通过了，但我相信它应该会失败。（当您运行 MVC 站点时，即第一篇文章只有一个标签，“VB”而不是“C#”和“VB”。

我相信它是因为会话仍然开放，所以休眠仍然保留所有内容并记住曾经发生过的事情。

我的主要问题是如何使用内存数据库进行测试？如何确保在保存和删除共享标签后，文章仍然具有应有的内容？

它创建的表结构是，（我觉得不对，应该有一个链接表）：

```
Article:
    Id (PK, uniqueid, not null)
     ...........

 Tag
    Id (PK, uniqueid, not null)
    Text (nvarchar, null)
    Article_id (FK, uniqueid, null) 
```

不知道如何使用流利的自动映射来设置链接表，以便一个标签可以跨多篇文章共享，一篇文章可以有多个标签

相信我找到了如何确保标签和文章有一个链接表：

```
 configuration.Mappings(m => m.AutoMappings.Add((AutoMap.AssemblyOf<Article>())
                            .Override<Article>(map => map.IgnoreProperty(x => x.IsPublished))
                            .Override<Article>(map => map.HasManyToMany(a => a.Tags).Cascade.All())
                            .Conventions.Add(DefaultCascade.All())) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T08:30:11.793

如果您只想要唯一标签（文本是唯一的），则使文本唯一并使用会话获取唯一实例。对于具有相同文本但不同 Id 的 NHibernate 标签是不同的。

```
// do
article.Tags.Add(session.Get<Tag>(cSharpId));
// or
article.Tags.Add(session.Query<Tag>().Where(t => t.Text == "C#"));
// instead of
article.Tags.Add(new Tag { Text = "C#" }); 
```

对会话进行微观管理（刷新）也会降低性能。您的测试方法已经进行了**9 - 13**次分贝调用（取决于延迟加载设置）。

而不是`Session.Flush();`在服务方法中至少引入一个`SaveChanges()`调用`Session.Flush();`，以便可以正确批处理插入/更新/删除。

# responsive-design - @media 查询奇怪地覆盖了另一个，但仅限于纵向

> ID：13178631
> 
> 赞同：1
> 
> 时间：2012-11-01T13:58:36.527
> 
> 标签：responsive-design, device-orientation

```
@media screen and (min-width: 320px)and (max-width:480px){
 css instructions
} 
```

正在覆盖非常不同的指令

```
@media screen and (min-width: 480px) and (max-width:640px) and (orientation:portrait){
 css instructions
} 
```

但不是

```
@media screen and (min-width: 480px) and (max-width:640px) and (orientation:landscape){
 css instructions
} 
```

我假设它与 480 有关，但我对设备宽度非常具体，所以不明白为什么会发生这种情况。还有另一个通用结构 css 文件，它包含所有设备的主要样式，但对于某些设备被覆盖的原因不是阅读这些而是阅读 320/480 规则。任何建议都会很好。

# php - Zend Framework 2：自动禁用 ajax 调用的布局

> ID：13178632
> 
> 赞同：17
> 
> 时间：2012-11-01T13:58:39.190
> 
> 标签：php, ajax, zend-framework2

对我的控制器操作之一的 AJAX 请求当前返回整页 HTML。

我只希望它返回该特定操作的 HTML（.phtml 内容）。

以下代码通过手动禁用特定操作的布局来很好地解决问题：

```
 $viewModel = new ViewModel();
    $viewModel->setTerminal(true);
    return $viewModel; 
```

当检测到 AJAX 请求时，如何让我的应用程序自动禁用布局？我需要为此编写自定义策略吗？任何关于如何做到这一点的建议都非常感谢。

此外，我在我的应用程序 Module.php 中尝试了以下代码 - 它正确检测 AJAX，但 setTerminal() 没有禁用布局。

```
public function onBootstrap(EventInterface $e)
{
    $application = $e->getApplication();
    $application->getEventManager()->attach('route', array($this, 'setLayout'), 100);

    $this->setApplication($application);

    $this->initPhpSettings($e);
    $this->initSession($e);
    $this->initTranslator($e);
    $this->initAppDi($e);
}

public function setLayout(EventInterface $e)
{
    $request = $e->getRequest();
    $server  = $request->getServer();

    if ($request->isXmlHttpRequest()) {
        $view_model = $e->getViewModel();
        $view_model->setTerminal(true);
    }
} 
```

想法？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-01T15:32:47.960

Indeed the best thing would be to write another Strategy. There is a JsonStrategy which can auto-detect the accept header to automatically return Json-Format, but as with Ajax-Calls for fullpages, there it's good that it doesn't automatically do things, because you MAY want to get a full page. Above mentioned solution you mentioned would be the quick way to go.

When going for full speed, you'd only have one additional line. It's a best practice to always return fully qualified ViewModels from within your controller. Like:

```
public function indexAction() 
{
    $request   = $this->getRequest();
    $viewModel = new ViewModel();
    $viewModel->setTemplate('module/controller/action');
    $viewModel->setTerminal($request->isXmlHttpRequest());

    return $viewModel->setVariables(array(
         //list of vars
    ));
} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-11-30T17:27:30.253

我认为问题在于您调用的是负责渲染*布局*`setTerminal()`的视图模型，而不是操作。您必须创建一个新的视图模型，调用并返回它。我使用专用的 ajax 控制器，因此无需确定操作是否为 ajax：`$e->getViewModel()`*`setTerminal(true)`*

 *```
use Zend\View\Model\ViewModel;
use Zend\Mvc\MvcEvent;
use Zend\Mvc\Controller\AbstractActionController;

class AjaxController extends AbstractActionController
{
    protected $viewModel;

    public function onDispatch(MvcEvent $mvcEvent)
    {
        $this->viewModel = new ViewModel; // Don't use $mvcEvent->getViewModel()!
        $this->viewModel->setTemplate('ajax/response');
        $this->viewModel->setTerminal(true); // Layout won't be rendered

        return parent::onDispatch($mvcEvent);
    }

    public function someAjaxAction()
    {
        $this->viewModel->setVariable('response', 'success');

        return $this->viewModel;
    }
} 
```

并在 ajax/response.phtml 中仅包含以下内容：

```
<?= $this->response ?> 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2014-02-14T02:16:16.080

这是最好的解决方案（以我的拙见）。我花了将近两天的时间才弄清楚。到目前为止，我认为没有人在互联网上发布过它。

```
public function onBootstrap(MvcEvent $e)
{
    $eventManager= $e->getApplication()->getEventManager();

    // The next two lines are from the Zend Skeleton Application found on git
    $moduleRouteListener = new ModuleRouteListener();
    $moduleRouteListener->attach($eventManager);

    // Hybrid view for ajax calls (disable layout for xmlHttpRequests)
    $eventManager->getSharedManager()->attach('Zend\Mvc\Controller\AbstractController', MvcEvent::EVENT_DISPATCH, function(MvcEvent $event){

        /**
         * @var Request $request
         */
        $request = $event->getRequest();
        $viewModel = $event->getResult();

        if($request->isXmlHttpRequest()) {
            $viewModel->setTerminal(true);
        }

        return $viewModel;
    }, -95);

} 
```

不过我还是不满意。我将创建一个插件作为侦听器，并通过配置文件而不是 onBootstrap 方法对其进行配置。但是下次我会让这个=P

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-02-13T22:33:19.980

最好的方法是使用 JsonModel 返回漂亮的 json 并为您禁用布局和视图。

```
public function ajaxCallAction()
    {
        return new JsonModel(
            [
                'success' => true
            ]
        );
    } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-12-19T17:14:16.157

Aimfeld 解决方案对我有用，但如果你们中的一些人尝试模板位置的问题，请尝试指定模块：

```
 $this->viewModel->setTemplate('application/ajax/response'); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-01T16:52:56.430

我回答了这个问题，似乎可能类似 - [Access ViewModel variables on dispatch event](https://stackoverflow.com/questions/12588278/access-viewmodel-variables-on-dispatch-event)

将事件回调附加到`dispatch`事件触发器。一旦此事件触发，它应该允许您通过调用获取操作方法的结果`$e->getResult()`。在返回 ViewModel 的操作的情况下，它应该允许您进行 setTerminal() 修改。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-07-13T14:26:38.857

我之前遇到过这个问题，这里有一个快速技巧来解决这个问题。

首先，在你的布局文件夹中创建一个空布局`module/YourModule/view/layout/empty.phtml`

您应该只以这种方式回显此布局中的视图内容`<?php echo $this->content; ?>`

现在，在您`Module.php`将控制器布局设置为 layout/empty 以进行 ajax 请求

```
namespace YourModule;
use Zend\Mvc\MvcEvent;

class Module {
    public function onBootstrap(MvcEvent $e) {
        $sharedEvents = $e->getApplication()->getEventManager()->getSharedManager();
        $sharedEvents->attach(__NAMESPACE__, 'dispatch', function($e) {
            if ($e->getRequest()->isXmlHttpRequest()) {
                $controller = $e->getTarget();
                $controller->layout('layout/empty');
            }
        });
    }
} 
```

* * *

## 回答 #8

> 赞同：-2
> 
> 时间：2014-06-17T02:38:24.377

```
public function myAjaxAction() 
{
    ....
    // View - stuff that you returning usually in a case of non-ajax requests
    View->setTerminal(true);
    return View;
} 
```*

# vb.net - 使用 VB 计算字符串中的数学表达式

> ID：13178637
> 
> 赞同：9
> 
> 时间：2012-11-01T13:58:57.990
> 
> 标签：vb.net, math

我想用VB从一个字符串计算一个算术表达式，有什么想法吗？

例如：文本框中的“x+2”，我想评估表达式

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2017-01-19T15:41:28.970

```
Dim equation As String = "2+6/2"
Dim result = New DataTable().Compute(equation, Nothing) 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-11-01T14:05:37.713

你可以用**[`NCalc`](http://ncalc.codeplex.com/)**这个。它还接受*x、y、z、...等参数*

```
Dim e As Expression = new Expression("2 + 3 * 5")
Msgbox(17 = e.Evaluate()) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-12-26T04:57:12.430

您可以为此目的使用 mxparser 库。通过单击 Microsoft Visual Studio 的添加引用按钮，在您的项目中引用 mxparser.dll。mxparser 库源代码或最新的 dll 文件可以来自 www.mathparser.org。mXparser 是适用于 Java、Android、C# .NET (CLS) 库的数学解析器。

```
Imports org.mariuszgromada.math.mxparser
Private Function evaluate(ByVal str As String) AS Double
Dim expr As Expression = New Expression(str)
DIM d1 As Double
d1=0
d1=expr.calculate()
return d1
End Function 
```

调用函数可以如下。

```
DIM str as String
str=""
str=((45^5)/45))*(5*6)

Dim d as Double
d=0
d=evaluate(str)
MsgBox(" The result of the expression is   " + d.ToString) 
```

# git - Git：从分支推送导致提交不需要的文件

> ID：13178640
> 
> 赞同：2
> 
> 时间：2012-11-01T13:59:05.720
> 
> 标签：git, branch, git-branch, git-push

我遇到了一个我似乎不明白的奇怪问题。我有两个本地 git 分支，它们都指向同一个遥控器。本地分支机构是**主人**和**租户，我在我的****.git**的 ws中有以下配置

```
[remote "origin"]
    fetch = +refs/heads/*:refs/remotes/origin/*
    url = git@egitrepo:project.git
[branch "master"]
    remote = origin
    merge = refs/heads/master
[branch "tenant"]
    remote = origin
    merge = refs/heads/master 
```

我这样做是为了在两个分支上轻松执行**git pull而无需在命令行上指定远程。**

我在**租户**分支上工作，而我的**主**分支没有更新和旧。我在**租户**分支中进行了更改，进行了**git pull**并尝试将更改**推**送到远程。

从**租户**分支执行**git push**给了我快进错误。

 **```
To git@egitrepo:milkyway.git
    ! [rejected]        master -> master (non-fast-forward)
  error: failed to push some refs to 'git@egitrepo:milkyway.git' 
```

此时，我环顾四周，发现这是由于**git push**试图将我所有的本地分支推送到远程，即我的**租户**和**主人**（未更新）。

我通过设置找到了解决此问题的方法

```
 git config --global push.default upstream 
```

它告诉 git 仅将当前分支推送到其匹配的上游分支。这解决了我的问题，我从**租户**分支的推送成功了。

现在出现了问题部分，当我使用 **git diff**查看提交历史记录时，我发现了许多其他文件，这些文件不应该是提交的一部分。我只添加了 8 个要提交的文件，并在提交之前非常仔细地查看了**git status ，它在要提交的****更改部分**下只显示了 8 个正确的文件。

所有其他文件是如何进入我的提交的？作为我尝试的第一次失败的**git push**的一部分，它们是从**master添加的吗？**我这样说是因为这些是我在**主**分支中更改的一些文件。为什么 git 没有在 git status 的正确部分向我显示它们。有人可以解释一下吗？另外我该如何恢复？

 ***** * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T01:55:19.273

您可以查看提交历史记录和 reflog 以确定发生了什么。

使用 git-reflog，我敢打赌你会看到从 master 到租户的合并。******

# arrays - Codeigniter：使用 set_value 重新填充下拉数组

> ID：13178641
> 
> 赞同：1
> 
> 时间：2012-11-01T13:59:08.000
> 
> 标签：arrays, codeigniter, drop-down-menu, populate

我有这段代码：

```
<?php for ( $i=1; $i<=9; $i++ ) : ?>
  <select name="codes[]">
    <?php foreach ( $errors as $error ) : ?>
    <option value="<?=$error->code?>" <?=set_select( 'codes', $error->code )?>><?=$error->fault?></option>
    <?php endforeach; ?>
  </select>
<?php endfor; ?> 
```

即使我在控制器中添加了验证规则， set_select 部分似乎也无法正常工作：

```
$this->form_validation->set_rules( 'codes', '', '' ); 
```

提交表单后，所有下拉列表都会获取最后一个下拉列表的选定值。

知道如何解决这个问题吗？用户指南未提供有关此特定情况的详细信息。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T14:47:33.897

抱歉累死了，我没有看到你设置规则，试着给它一个真正的规则，看看是否有效。因为它总是有一个值，所以应该可以正常工作。

```
$this->form_validation->set_rules('codes','codes','trim|required'); 
```

# php - 我们的新服务器上的 PHP FTP 登录过程太慢了

> ID：13178642
> 
> 赞同：2
> 
> 时间：2012-11-01T13:59:13.883
> 
> 标签：php, apache, ftp

我们正在迁移到新服务器。我们在具有非常相似设置的新旧服务器上使用相同版本的 php。我们的应用程序使用 php ftp 函数连接到远程 ftp 并将文件从我们的服务器上传到它。

我发现的问题是新服务器在上传文件时比旧服务器慢得多。我已经对多个大小文件进行了多次测试，并将其范围缩小到 ftp_connect 和 ftp_login php 函数（在两台服务器上传输文件的过程都非常快）。在旧服务器上，此登录过程只需要几分之一秒（约 0.2 秒），但在新服务器上大约需要 5 秒。

任何人都可以向我建议是否存在可能导致 ftp 登录时间更长的 php 设置或服务器设置？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T14:22:22.487

关键字可能是“反向查找”或“反向 DNS”。我不知道您使用的是哪个 FTP 服务器，但您应该禁用它。对于 proftpd 这将是

```
UseReverseDNS off
IdentLookups off 
```

在配置中。

# spring - 看不懂石英表的表达

> ID：13178645
> 
> 赞同：1
> 
> 时间：2012-11-01T13:59:29.033
> 
> 标签：spring, quartz-scheduler

春季石英时间表表达式

```
0 40 4-16 * * * 
```

Java Spring 调度器石英

我有 express schedule="0 40 4-16 * * *" 的旧代码我不明白这是什么意思？

即使在准备好以下文件后，也无法弄清楚上面的 Cron 表达式是做什么的。[http://en.wikipedia.org/wiki/Cron](http://en.wikipedia.org/wiki/Cron)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-01T14:05:39.673

它将在每天 4:40、5:40、6:40、... 16:40 运行。简单的测试代码：

```
import org.springframework.scheduling.support.CronSequenceGenerator;

CronSequenceGenerator cron = new CronSequenceGenerator("0 40 4-16 * * *", TimeZone.getDefault());
Date d = new Date();
for (int i = 0; i < 20; ++i) {
    d = cron.next(d);
    System.out.println(d);
} 
```

^(或者[这个](http://nurkiewicz.blogspot.no/2012/10/testing-quartz-cron-expressions.html)用于 Quartz API。)

# iframe - OBJECT 与 IFRAME 视频嵌入

> ID：13178646
> 
> 赞同：8
> 
> 时间：2012-11-01T13:59:31.077
> 
> 标签：iframe, youtube-api, html-object

关于是否应该使用 OBJECT 或 IFRAME 进行视频嵌入的问题已经被问到......

[我应该使用 <object> 还是 <iframe> 来加载视频？](https://stackoverflow.com/questions/12549252/should-i-use-object-or-iframe-for-loading-a-video)

但我的问题更进一步。如果专门嵌入 YouTube 视频，使用 OBJECT 方法是否有任何优势，除了上述帖子中已经提到的那些？

考虑到如果 Flash 对查看器不可用，IFRAME 将回退到 HTML5，为什么有人想再使用 OBJECT 方法呢？

大卫。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-01T14:19:06.303

The `<object>` embed has a few differences. If you're writing a flash application, you won't be able to embed an iframe. So using the swf will work for those environments. The API also only support IE8 and above due to be implemented with `postMessage`. If you are just embedding the video the `<iframe>` will work great, but if you want access to the API your users will have to have IE8 or above.

The `<iframe>` is the supported and preferred method to use by YouTube. In addition to what already mentioned about the ability to get HTML5 playback (which is the biggest advantage), the API is richer and consistent with our other embedable content.

# actionscript-3 - AS3 Box2D 玩家移动

> ID：13178647
> 
> 赞同：-1
> 
> 时间：2012-11-01T13:59:33.480
> 
> 标签：actionscript-3, box2d, game-physics, path-finding, game-development

当使用 AS3 和 Box2D 创建玩家时，我们可以让玩家移动，但是我们无法让玩家像使用 AS3 移动时那样移动，例如 x++；而不是 ApplyImpulse(new b2Vec2(1,0),GetWorldCenter())。我们怎样才能让玩家移动得更像闪光灯一样，我们也尝试了 ApplyForce 和 SetPosition，它们不能正常工作！播放器非常浮动或不会立即响应控制，任何建议将不胜感激！

如果有问题你会解释它而不是放下然后离开吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T12:51:19.020

您为什么不尝试使用 GetLinerVelocity 和 ApplyImpulse，它可以使用我使用此属性制作的功能，当然我之前使用确切的键制作了两个功能......我的意思是：

player_normal 只是处于静止状态的 Player（对象）。当然， player_max_speed 和 player_speed 只是我添加的其他属性，可以随心所欲地移动......

```
 player_speed = 2;
            player_max_speed = 4;
            player_normal = new b2Vec2(0, 0); 
```

这在函数 Main 中。您将它们设置为 Number var 的 speed 和 max_speed，正常情况下只是 b2Vec2。

这是按下然后向上键时的键功能：

```
private function apreto(e:KeyboardEvent):void
        {
            switch (e.keyCode)
            {
                case 37: 
                    left = true;
                    break;
} 

private function suelto(e:KeyboardEvent):void
        {
            switch (e.keyCode)
            {
                case 37: 
                    left = false;
                    break;
} 
```

当然，“左”是一个布尔值。我认为很容易......而且你必须对每个键（右，上，下）做同样的事情，这取决于你想要什么样的键。例如数字 37 = 键盘左侧的键。

然后是让玩家移动的代码（在更新中）：

```
if (player_normal.x >= 0)
            {
                if (left)
                {
                    if (player.GetLinearVelocity().x > -player_max_speed)
                    {
                        player.ApplyImpulse(new b2Vec2( -player_speed, 0), player.GetWorldCenter());
                    }
                }
            } 
```

我希望它可以帮助你......如果不让我知道，我有另一种更容易的方法。如果我能回答您的任何问题，我将不胜感激。

# php - 在php中引用类函数变量

> ID：13178650
> 
> 赞同：-2
> 
> 时间：2012-11-01T13:59:52.527
> 
> 标签：php, scope

我一直在查看 PHP 变量范围参考页面，但似乎找不到明确的答案。我正在使用这个基本模型，我想在其中调用一个类函数并使其所有变量都可以在类外部访问。我也想避免使用全局声明，并以最有效的方式做到这一点。

```
class my_class() {
    function my_class_function() {
        $my_class_function_variable = 'juice';
            return $my_class_function_variable;
    }
}
$class_instance = new my_class();

function display_juice() {
    $class_instance::my_class_function();
    $my_class_function_variable;
} 
```

我错过了什么有一个快速的答案吗？我没有得到任何输出或错误。

**编辑**

当我在类中但不在函数中声明以下内容时，出现语法错误。

```
public $current_user = wp_get_current_user(); 
```

> 解析错误：语法错误，意外的 '('，期待 ',' 或 ';'

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T14:21:25.350

如果它们是公共的，您可以访问类中所有设置的变量。如果它再次公开，您可以访问它的任何功能......这是示例。我有默认值'mydefault'。我使用它，然后我更改它并再次使用它..

```
class my_class {
    public $variable = "mydefault";

    public function change_variable($value) {
        $this->variable = $value;
    }
}

function display_juice() {
    $class = new my_class;
    echo $class->variable; // echo default value - 'mydefault'
    $class->change_variable('newvalue');    
    echo $class->variable; // echo default value - 'newvalue'
}

display_juice(); 
```

编辑..

```
class my_class {
    public $variable;

    public function __construct() {
        $this->variable = wp_get_current_user();
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T14:06:26.653

您目前不返回任何东西，您必须执行以下操作：

```
class my_class() {
    function my_class_function() {
        $my_class_function_variable = 'juice';
        return $my_class_function_variable;
    }
}

function display_juice() {
    $class_instance = new my_class(); //Needs to be inside the function
    $my_class_function_variable = $class_instance->my_class_function();
    echo $my_class_function_variable;
}
display_juice(); 
```

如果您想使用静态函数或变量，您可以这样做，这样就无需创建 my_class 的实例：

```
class my_class() {
    static function my_class_function() {
        return 'juice';
    }
}

function display_juice() {
    $my_class_function_variable = my_class::my_class_function();
    echo $my_class_function_variable;
}
display_juice(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-01T14:07:40.100

您需要将 my_class_function() 设为静态，您可以使用 my_class::my_class_function() 调用它

[http://php.net/manual/en/language.oop5.static.php](http://php.net/manual/en/language.oop5.static.php)

同样如下所述，您需要返回“果汁”。

```
return 'juice'; 
```

* * *

## 回答 #4

> 赞同：-3
> 
> 时间：2012-11-01T14:12:48.070

我会让你尝试访问公共成员的变量

```
class my_class {
   public $my_class_function_variable = 'juice';
   public function my_class_function() {

   }
}
$class_instance = new my_class();

function display_juice() {
     echo my_class->$my_class_function_variable;
}

display_juice(); 
```

# c++ - 正则表达式匹配数学表达式

> ID：13178651
> 
> 赞同：0
> 
> 时间：2012-11-01T13:59:55.287
> 
> 标签：c++, regex, visual-c++

我有一个正则表达式，我打算用它来“标记”一个数学表达式，比如：

```
a + b + 1 + 2

int main() {
    string rxstrIdentifier = "\\b[a-zA-Z]\\w*\\b";
    string rxstrConstant = "\\b\\d+\\b";
    string rxstrRef = "(" + rxstrIdentifier + ")|(" + rxstrConstant + ")"; // identifier or constant

    const regex rxExpr = regex("^(" + rxstrRef + ")(.*)$"); // {x} [{+} {y}]*
    //const regex rxSubExpr = regex("^\\s*([+])\\s*(" + rxstrRef + ")(.*)$"); // {+} {x} [...]

    string test = "b + a + 1";
    cmatch res;
    regex_search(test.c_str(), res, rxExpr);
    cout << "operand: " << res[1] << endl;
    cout << "res: " << res[2] << endl;

    system("pause");
    return 0;
} 
```

问题是操作数， res 在示例中只给出了 b 。我期望

```
operand: b
res: + a + 1 
```

曾经在另一个类似的正则表达式中工作...

```
const regex Parser::rxExpr = regex("^(\\w+)((\\s*([+])\\s*(\\w+))*)$"); // {x} [{+} {y}]*
const regex Parser::rxSubExpr = regex("^\\s*([+])\\s*(\\w+)(.*)$"); // {+} {x} [...] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T14:05:03.410

您的正则表达式似乎不允许字符串中的空格。`\b`匹配单词边界，但边界的宽度为零，因此不会占用标记之间的空格。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-01T14:09:50.207

使用 (?:pattern) 组：

```
string rxstrRef = "(?:" + rxstrIdentifier + ")|(?:" + rxstrConstant + ")"; // identifier or constant 
```

这消除了对搜索结果的影响

# c# - AppBarButtonStyle：从代码更改内容

> ID：13178656
> 
> 赞同：6
> 
> 时间：2012-11-01T14:00:11.483
> 
> 标签：c#

如何从代码隐藏中更改样式为 AppBarButtonStyle 的 Button 的内容？我想改变一个图标，我这样做：

```
private void ChangemyButtonIcon()
{
   myButton.SetValue(AutomationProperties.NameProperty, "new text");
   myButton.Content = "&#xE15D;"; // <--- works wrong
} 
```

但随后显示按钮文本内的标准图标。

你知道如何以正确的方式去做吗？提前感谢您的帮助 Maciek

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-07T20:33:12.313

你可以那样做

```
<Style x:Key="MusicOffButtonStyle" TargetType="Button" BasedOn="{StaticResource AppBarButtonStyle}">
<Setter Property="AutomationProperties.AutomationId" Value="MusicOffButton"/>
<Setter Property="AutomationProperties.Name" Value="Music OFF"/>
<Setter Property="Content" Value=""/>
</Style>
<Style x:Key="MusicOnButtonStyle" TargetType="Button" BasedOn="{StaticResource AppBarButtonStyle}">
<Setter Property="AutomationProperties.AutomationId" Value="MusicOnButton"/>
<Setter Property="AutomationProperties.Name" Value="Music ON"/>
<Setter Property="Content" Value=""/>
</Style>

private void SetMusicButtonIcon()
{
MusicButton.Style = (ifMuted) ? (this.Resources["MusicOffButtonStyle"] as Style) : (this.Resources["MusicOnButtonStyle"] as Style);

} 
```

# php - Zend 框架 1 和 xdebug url

> ID：13178658
> 
> 赞同：0
> 
> 时间：2012-11-01T14:00:21.023
> 
> 标签：php, zend-framework, xdebug

1) 当我想让 url Xdebug 在 Zend 框架 1 上运行时遇到问题：/ mySite/index/
index?XDEBUG_SESSION_START=sublime.xdebug

但是当我运行该代码时，zend路由器会将我的网址转换为：
/mySite/index/index/XDEBUG_SESSION_START/sublime.xdebug

我希望他们保留我的原始网址：/mySite/index/index?XDEBUG_SESSION_START=sublime.xdebug

2）我只是安装了SublimeXdebug，没关系，但是当我运行时，他们让firefox成为默认浏览器，我怎么能告诉他们运行chrome而不是firefox？（我记得他们在 python 上配置，但我不知道 python）？

我怎样才能解决这个问题？请帮我...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T13:49:29.680

我建议您使用 Firefox 或 Chrome 的浏览器扩展程序来启动您的调试会话。这样，您根本不必更改您的 URL。[您可以通过http://xdebug.org/docs/remote#browser-extensions](http://xdebug.org/docs/remote#browser-extensions)找到浏览器扩展

# google-app-engine - gwt 演示者小部件的动态数量

> ID：13178664
> 
> 赞同：0
> 
> 时间：2012-11-01T14:00:33.520
> 
> 标签：google-app-engine, gwt

有没有办法添加动态数量的演示者小部件？我可以添加单个演示者就好了，但我如何添加一个集合。我的 UiBinder XML 中有一个占位符

用户界面.xml

```
 <g:LayoutPanel ui:field="collection"/> 
```

看法

```
@Override
public void setInSlot(Object slot, Widget content) {
    if (slot == TicketPresenter.DYNAMIC_COLLECTION_SLOT) {
        collection.clear();
        collection.add(content);
    } 
} 
```

主持人

```
setInSlot(DYNAMIC_COLLECTION_SLOT, collectionPresenter); 
```

但我希望能够有一个列表演示者并将它们全部添加到集合面板中。这可能吗？我知道我可以创建一个复合来做到这一点，但我想使用演示者小部件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T19:07:32.023

```
public void addListOfWidgets(List<Widget> content) {
    collection.clear();
    for (Widget widget : content) {
        collection.add(widget);
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T21:27:21.137

通常在您的视图中，您不仅会覆盖

```
@Override
public void setInSlot(Object slot, Widget content) 
```

但是也

```
@Override
public void addToSlot(Object slot, Widget content) 
```

因此，您可以遍历 Widget 集合并为每个小部件调用 addToSlot。您的 addToSLot impl 看起来像

```
@Override
public void addToSlot(Object slot, Widget content) {
    if (slot == TicketPresenter.DYNAMIC_COLLECTION_SLOT) {
        collection.add(content);
    } 
} 
```

这意味着您不需要在添加操作时清除布局容器。

# c# - 使 Levenstein 的距离算法适合我的需求

> ID：13178671
> 
> 赞同：7
> 
> 时间：2012-11-01T14:01:00.883
> 
> 标签：c#, algorithm, levenshtein-distance

我在使用 Levenstein 距离算法时遇到了一些问题。

我正在使用 Levensteins 距离算法将产品名称与产品名称列表进行比较，以找到最接近的匹配项。但是，我需要稍微调整一下。我正在使用来自[dotnetperls.com](http://www.dotnetperls.com/levenshtein)的示例。

假设我有一个来自我自己的数据库的 2000 个产品名称的列表 A。我自己销售所有这些产品。

然后突然间，我从我的一个供应商那里得到了一份清单 B，上面有产品名称和每种产品的新价格。这可能每年发生不止一次，所以我想开发软件来手动完成这项工作。

问题是这家供应商不太擅长一致性。所以他时不时地对名称进行一些小改动，这意味着我无法进行简单的字符串比较。

我已经实现了距离算法，但它并不真正适合我的需求。- 然而！

在浏览我的供应商列表时，我遇到了一个名为

> American Crew 去屑洗发水 250 毫升

该产品与我自己的产品成功匹配，称为

> 美国船员去头屑 250 毫升。

距离为 10。

**问题**

我还遇到了一个产品，叫做

> American Crew 三合一洗发水 450 毫升。

哪个被错误地匹配

> American Crew 每日洗发水 450 毫升。

而不是我的

> American Crew 3 in 1 450 毫升。

我明白为什么！但我不确定我应该如何从这里更改算法。

有任何想法吗？

顺便说一句，我不太擅长算法，但我相信某种称重会对我有所帮助。

**编辑：**

计算时间并不是一个真正的问题。即使需要十个小时才能完成，它仍然比手动完成要好得多：P

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-01T14:59:40.397

一种方法是使用多种方法来搜索并对它们中的每一个应用权重。我假设你有一些`Item`至少有一个字符串`Name`属性的类：

```
double levWeight = 1.0;   // adjust these weights as you see fit
double matchWeight = 1.0;

// add whatever to here you'd like
var splitOn = new[] { ' ', '!', '"', '#', '$', '%', '&', '\'', '(', ')', '-' };
Func<string, string[]> split = 
    s => s.Split(splitOn, StringSplitOptions.RemoveEmptyEntries);

var matches =
    from xx in mine
    let xp = split(xx.Name)
    select new {
        Item = xx,
        Matches =
           (from yy in theirs
            let yp = split(yy.Name)

            /* found how many name components match */
            let mm = xp.Intersect(yp, StringComparer.OrdinalIgnoreCase).Count()

            /* find the Levenshtein distance of the two names */
            let ld = LevDist(xx, yy)

            /* weight our two criteria */
            let ww = (matchWeight * mm) + (levWeight / ld)

            /* should match on at least ONE name component */
            where mm > 0
            orderby ww descending
            select yy)
    }; 
```

当针对您拥有的数据语料库运行时，我会收到以下输出：

*   American Crew 去屑洗发水 250 毫升
    1.  American Crew 去屑 250 毫升
    2.  American Crew 每日洗发水 450 毫升
    3.  美国船员 3 合 1 450 毫升
*   American Crew 三合一洗发水 450 ml
    1.  美国船员 3 合 1 450 毫升
    2.  American Crew 每日洗发水 450 毫升
    3.  American Crew 去屑 250 毫升

如果您有更多标准，您只需将它们添加到查询中（与其他`let`子句内联）并对其结果应用一些权重。

其他可能的应用是*“以相同顺序命名组件”*：

```
let or = xp.Zip(yp, (a,b) => String.Compare(a, b, true))
           .TakeWhile(c => c == 0)
           .Count() 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-01T14:11:03.080

您可以将 Levensthein 与不带 -、空格、点的第二遍以及计算精确相似词的第三遍以及基于产品名称中第一个不同单词的第四遍结合起来吗？

也许你可以看看神经网络？创建培训数据库需要很长时间，但它也可能是一个答案（或答案的一部分）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-01T15:10:22.637

您需要插入一些关于数据的外部知识。例如，在您展示的案例中，“洗发水”一词并没有提供有关产品的信息（即，它没有添加关于两种产品是否相似的有用信息）。如果您从数据中删除了“洗发水”一词，则该方法会起作用。

因此，您可以做的一件事是通过计算搜索非常频繁（出现在许多单词中）的单词，然后从您的数据中删除，因为它们可能对您的问题没有信息。然后运行算法。

第二个小调整是使用您对字符“-”的了解。这个字符可以被认为类似于空格字符' '。因此，在运行您的算法之前，将任何 '-' 替换为 ' '。

通过这种方式，您不必更改算法，但仍然可以使用您对问题的了解（我知道您希望避免更改算法）。

最后，您可能需要考虑更剧烈的变化，例如不使用 Levenstein 距离或比较整个单词。您不显示您的数据集，但如果差异在少量字符（例如错字）中，您当前使用的形式中的 Levenstein 距离将是最好的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-01T14:19:29.407

该算法不会给你一个匹配，而是一个距离。因此，在您的问题场景中，您应该比较从两个不同句子中获得的距离，最低距离更好，但仍然没有确定的匹配。我想最好的解决方案是根据算法向用户展示您认为会匹配的不同产品名称。然后用户可以做出最终选择。但是，如果您不介意偶尔出现不匹配，那么您就走上了正确的道路。只需为您仍然认为匹配的距离选择一个数字，但这会给您带来很多误报。

# php - 如何使用业务对象在 Codeigniter 中包装逻辑？

> ID：13178682
> 
> 赞同：2
> 
> 时间：2012-11-01T14:01:44.627
> 
> 标签：php, codeigniter, activerecord, business-logic

我使用 Codeigniter 已经有一段时间了，我希望拥有处理逻辑的业务对象，如下所示：

```
$comment = new Comment($this->input->post());
$blog = new Blog();
$current_post = $blog->get_current_post();
$current_post->add_comment($comment);

$data['current_post'] = $current_post;
$this->load->view('post_view',$data); 
```

而不是这种方法：

```
$this->load->model('comment_model');
$this->load->model('blog_model');
$this->load->model('post_model');

$comment = $this->comment_model->create_from_array($this->input->post());
$blog = $this->blog_model->get_blog();
$current_post = $this->post_model->get_current_post($blog);
$this->post_model->add_comment($current_post,$comment);

$data['current_post'] = $current_post;
$this->load->view('post_view',$data); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T15:04:26.940

你想要的是改变 codeigniter 的工作方式，而不加载模型，它如何知道从哪里获取数据？如果你想按照你建议的方式去做，你将不得不扩展核心控制器类并对你的代码做出很多假设。例如，当您创建一个新实例 Comment() 时，它应该加载一个模型，并且传递给它的参数应该访问该模型中的某个方法。

您只需为已经存在的功能制作一个很好的包装器，这很好，但最终您的代码可能看起来更好，但它仍然可以正常工作。

# django - 模型表单中 ChoiceField 的默认值

> ID：13178683
> 
> 赞同：1
> 
> 时间：2012-11-01T14:01:47.917
> 
> 标签：django, django-forms

我对 django 有疑问：
models.py：

```
SUSPEND_TIME = (
    ('0', '0'),
    ('10', '10'),
    ('15', '15'),
    ('20', '20'),

class Order(models.Model):  
    user = models.ForeignKey(User)  
    city = models.CharField(max_length=20)  
    ...
    processed = models.BooleanField(default=False)
    suspend_time = models.CharField(max_length=2, choices=SUSPEND_TIME, default='0')  
    .. 
```

表格.py：

```
class OrderForm(forms.ModelForm):
    class Meta:
        model = Order
        fields = ('suspend_time', 'processed') 
```

视图.py：

```
 try:
            order = Order.objects.get(id=order_id)
        except Order.DoesNotExist:
            order = None
        else:
            form = OrderForm(request.POST, instance=order)
            if form.is_valid():
            form.save()
            .... 
```

然后我发送 ajax 请求以仅使用`"processed"`参数更新实例。如果我不发送 如果请求包含我
`form.is_valid`总是 不明白为什么？有默认值..和顺序。总是有一些或其他的选择。 为什么在is之后，其他字段 都有正常值。 `False``"suspend_time" !`
`{'suspend_time': 'some_value' ...}` `form.is_valid``True`
`suspend_time``suspend_time``value: default`
`form = OrderForm(request.POST, instance=order)` `form['suspend_time'].value()``None``(city, processed)`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T16:20:29.100

行为符合预期。表单应使用给定的数据进行验证。即在表单中定义的任何必填字段都应存在于数据字典中以对其进行实例化。它不会使用来自实例的数据来填充表单数据中未提供的字段。

[来自django 模型表单](https://docs.djangoproject.com/en/dev/topics/forms/modelforms/)的文本

*如果您正在构建一个数据库驱动的应用程序，那么您很可能拥有与 Django 模型紧密映射的表单。例如，您可能有一个 BlogComment 模型，并且您想创建一个允许人们提交评论的表单。在这种情况下，在表单中定义字段类型是多余的，因为您已经在模型中定义了字段。*

*出于这个原因，Django 提供了一个帮助类，让您可以从 Django 模型创建一个 Form 类。*

# mailchimp - 可以通过 MailChimp API 提供订阅者的语言吗？

> ID：13178685
> 
> 赞同：3
> 
> 时间：2012-11-01T14:01:55.043
> 
> 标签：mailchimp

目前，我在 PHP 页面上有一个注册表单，允许用户输入他们的姓名和电子邮件地址。

按下时，它会向服务器发送一个 AJAX POST，接收 postdata 的 PHP 脚本会使用它并使用 MailChimp PHP API 来注册用户（通过 listSubscribe()）。

这是一个多语言网站，问题在于 MailChimp 在通过 API 调用执行注册时不知道用户的语言是什么。这意味着用户会收到他们的 MailChimp 确认电子邮件（即“您是否真的注册了这个”等），无论他们的实际语言偏好如何。

我目前解决此问题的方法是为每种语言创建单独的列表，根据用户查看网站的语言为用户订阅适当的列表。这意味着您可以设置 MailChimp 表单的默认语言到列表的语言。

这对我来说感觉很hacky，有没有更好的方法？这样做意味着必须为每种语言等设置广告系列。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-01T14:36:53.457

MailChimp 中有一个“语言”字段，但我看不到通过合并标签访问它的方法。查看我个人认识每个订阅者的列表之一，MailChimp 的语言工具似乎并不那么可靠。

我会在 MailChimp 中创建一个表单字段或组，然后添加一个字段，允许用户通过下拉列表指定他们的首选语言（或根据他们正在查看的内容自动填充），并将其与合并标签一起使用在您的确认电子邮件中发送自定义内容。请参阅此处以[自定义确认过程](http://kb.mailchimp.com/article/how-do-i-customize-each-part-of-the-confirmation-process/)

例如，如果您使用`INTERESTED`合并标签发送英语、法语、德语或西班牙语的电子邮件，其中英语是您的默认语言：

```
*|INTERESTED:Language:FR,DE,ES|*
 *|INTERESTED:Language:FR|*
   French content here
 *|END:INTERESTED|*
 *|INTERESTED:Language:DE|*
   German content here
 *|END:INTERESTED|*
 *|INTERESTED:Language:ES|*
   Spanish content here
 *|END:INTERESTED|*
*|ELSE|*
  English content here for everyone else, even those with an undefined language.
*|END:INTERESTED|* 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-02-27T15:08:47.677

不幸的是，文档中没有很好地说明它。表单自动翻译的工作方式是检测浏览器的语言：

[http://kb.mailchimp.com/article/can-you-translate-my-signup-forms-response-emails#auto](http://kb.mailchimp.com/article/can-you-translate-my-signup-forms-response-emails#auto)

这意味着，例如，当您使用他们的表单提交进行订阅时，他们会检测浏览器语言，然后发送正确的确认电子邮件。他们不使用可以设置为表单选项或使用 api 的“语言”字段。我通过几次对话通过技术支持验证了这一点。

那么通过api订阅时如何设置语言呢？同样，在 api 调用的 http 标头中设置浏览器语言。这对我来说就像一个冠军。不能说你将如何在你的 php 应用程序中执行此操作，但在使用 Gibbon gem 的 Rails 中，你将传递 'headers' 选项中的值，它只是将其设置在 api 调用的 http 标头中：

```
gibbon_api.lists.subscribe(headers: {'Accept-Language' => request.env['HTTP_ACCEPT_LANGUAGE']}, all_other_params...) 
```

至少这种方法对我有用。希望这可以帮助...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-04-12T20:31:28.137

对于 ChimpKit3 (v3) (iOS - objective-c repo)，我添加了订阅者语言以支持[MailChimp](https://mailchimp.com/)中响应邮件的自动翻译选项。

因此，只需将“Accept-Language”字段添加到请求标头即可。

[https://github.com/mailchimp/ChimpKit3/pull/22](https://github.com/mailchimp/ChimpKit3/pull/22)

目标-C 示例：

```
NSDictionary *mailChimpParams = @{@"id": MAILCHIMP_LIST_ID,
                                  @"email": @{@"email": [NSString stringWithFormat:@"%@",emailAddress]},
                                  @"language": @"en",
                                  @"merge_vars": mergeVars}; 
```

* * *

```
[[ChimpKit sharedKit] callApiMethod:@"lists/subscribe"
                         withParams:mailChimpParams
               andCompletionHandler:^(NSURLResponse *response, NSData *data, NSError *error) { ... 
```

# macos - 使用似乎不存在的 SDK 进行编译：/Developer/SDKs/MacOSX10.6.sdk

> ID：13178686
> 
> 赞同：3
> 
> 时间：2012-11-01T14:01:56.643
> 
> 标签：macos, python-3.x, easy-install, rpy2

我正在尝试使用以下命令为 Python3 安装 rpy2：

```
easy_install-3.2 rpy2 
```

这会给出一些警告和错误：

```
warning: no previously-included files matching '*patch*' found anywhere in distribution
warning: no previously-included files matching '*diff*' found anywhere in distribution
warning: no previously-included files matching '.hg' found anywhere in distribution
no previously-included directories found matching 'dist'
gcc-4.2 not found, using clang instead
Compiling with an SDK that doesn't seem to exist: /Developer/SDKs/MacOSX10.6.sdk
Please check your Xcode installation
build/python3_rpy/rpy/rinterface/_rinterface.c:51:10: fatal error: 'signal.h' file not found
#include <signal.h>
         ^
1 error generated.
error: Setup script exited with error: command 'clang' failed with exit status 1 
```

即使我安装了 xcode 4.5.1，该文件`/Developer/SDKs/MacOSX10.6.sdk`似乎也丢失了。

`MacOSX10.6.sdk`Apple 主页上的“Downloads for Apple Developers”中没有调用文件。我该怎么办？

附言。如果我不指定 python3，这一切都很好。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-01T16:04:35.800

发生的事情是 python 是使用 4.3 之前的 Xcode 版本构建的，其中工具和 SDK 安装在`/Developer`. Xcode 4.3 不再是这种情况，其中工具和 SDK 是 Xcode.app 包的一部分。看起来python是使用gcc而不是clang编译的。

我建议转储您拥有的 python3 的安装并通过[macports](http://macports.org)安装它，它将使用最新的 Xcode 来构建其端口，因此能够编译其他 python 模块。

安装 macports 后，只需执行以下操作：

```
$ sudo port install python33 
```

也很有可能只需执行以下操作即可安装这些 python 模块：

```
$ sudo port install whizzopymod 
```

编辑：最后一部分作为 macports[没有 rpy2 用于 python3](http://www.macports.org/ports.php?by=name&substr=rpy2)。`easy_install`我猜你必须继续使用。

# javascript - IE8 点与括号表示法

> ID：13178689
> 
> 赞同：2
> 
> 时间：2012-11-01T14:02:16.660
> 
> 标签：javascript, jquery, internet-explorer, iframe, internet-explorer-8

我在 IE8 中遇到了一个奇怪的问题，我试图通过简单地做一些事情来抓住一些东西：

```
window.frames.frames[0].name; // get the name of the inner iFrame object 
```

没什么特别的，但是当脚本运行时，IE7-8 会这样解释它：

```
window.frames.frames.0.name;

// which in-turn gives the error
// 'window.frames.frames.0.name' is null or not an object (which is not true) 
```

**它为什么以及如何转换它，为什么它甚至不再工作了？**

`window.frames.frames[0].name;`如果我在 IE8 的控制台中键入第一个，它会抓取正确的 iFrame。但是输入IE8解释的（`window.frames.frames.0.name;`），根本不起作用......（奇怪的是，*“预期';'”*，这是零意义哈哈。

有人遇到过这样的问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T14:10:48.400

`window.frames`是一个数组，不是吗？你不应该索引第一帧吗？

```
window.frames[0].frames[0].name; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-01T14:11:11.257

错误消息中的点符号只是浏览器使用的字符串，浏览器开发人员的选择很糟糕。

```
The line `window.frames.frames[0].name` does not make sense. 
```

我希望

```
window.frames[0].name 
```

或者如果它是框架中的嵌套框架

```
window.frames[0].frames[0].name 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-01T14:13:21.527

如果你在调用周围加上括号，它会起作用吗？像这样：

```
(window.frames.frames[0]).name; // get the name of the inner iFrame object 
```

另外，您真的是指做参考`window.frames.frames[0]`而不是仅仅做参考`window.frames[0]`吗？

或者你的意思是：

```
window.frames[0].frames[0].name; // get the name of the inner iFrame object 
```

# python - python fabric如何保护ssh凭证？

> ID：13178691
> 
> 赞同：3
> 
> 时间：2012-11-01T14:02:16.403
> 
> 标签：python, security, api, password-protection, fabric

所以我最近偶然发现了 python fabric api，并且对它如何帮助我完成日常系统管理任务感到非常满意。我想开始在工作中使用它，但它是一个非常注重安全的环境。我想知道 Fabric 在运行任务时如何处理您提供给它的 ssh 密码？我假设它在内存中的某个地方突然出现并在需要登录到下一个主机时将其拉出`env.hosts`？它如何在内存中保护此密码？

我可以看到我会被问到很多关于这些方面的问题，所以我正在寻找一种很好的方式来向有安全意识的人解释面料是好的和友好的并且不会构成风险或至少没有比我们已经拥有的任何其他风险更大的风险:)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-01T14:50:43.863

我简要查看了引用的[源](https://github.com/fabric/fabric/blob/master/fabric/operations.py)@dm03514，我相信你是正确的，如果fabric需要交互式提示输入密码，它会将其读入内存并在fabric python过程中存储。解决您的问题的方法不是结构本身，而是确保您的 ssh 基础设施在适当的情况下使用密钥而不是密码短语和 ssh 代理转发。使用加密的 ssh 密钥和 ssh-agent 来解锁它们，fabric 将能够利用相同的机制，从而完全避免涉及 ssh 密码。对于 sudo 密码，您要么必须允许无密码 sudo，要么接受 Fabric 在工作时将 sudo 密码保存在内存中的风险。

# sass - 在 sublime text 2 中设置 sass 的良好分步教程

> ID：13178701
> 
> 赞同：1
> 
> 时间：2012-11-01T14:02:53.613
> 
> 标签：sass, sublimetext2

有没有关于在 Windows 上为 Sublime Text 2 设置 SASS 的好教程？我一直在寻找，我没有想出任何东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T14:20:36.953

你可以使用 Sass 构建插件（可[在此处](https://github.com/jaumefontal/SASS-Build-SublimeText2)获得），如果你想自己做，你可以阅读插件是如何做的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T15:06:22.453

我使用[Scout](http://mhs.github.com/scout-app/)来启动和运行。这个程序非常好，还提供压缩。

# jquery - jquery中的动态id名称

> ID：13178702
> 
> 赞同：1
> 
> 时间：2012-11-01T14:02:53.987
> 
> 标签：jquery

我有这段代码来添加类和删除属性，但问题是我有依赖于行 id 的动态 id 名称。我尝试`'#ee'+x`但不起作用。请帮忙，我如何在jQuery中设置动态值

```
$('#ee').change(function(){
    if ($(this).is(":checked")) {
        $('#we').addClass("hide");
        $('.re').removeAttr('checked');
    }
    else {
        $('#we').removeClass("hide");
    }
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T14:11:50.640

```
$('[id^=ee]').change(function(){
    if ($(this).is(":checked")) {
        $('#we').addClass("hide");
        $('.re').removeAttr('checked');
    }
    else {
        $('#we').removeClass("hide");
    }
}); 
```

你可以试试这个，它使用[css3 substring matching](http://www.w3.org/TR/selectors/#attribute-substrings)。

编辑：刚刚做了一个快速测试，css3 子字符串匹配似乎在 jQuery 1.8.2 中工作，如在这个 jsFiddle 中看到的：http: [//jsfiddle.net/Hm34g/](http://jsfiddle.net/Hm34g/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-01T14:15:43.803

我会改用一个类：

```
$('.someClass').change(function(){
    if ($(this).is(":checked")) {
        $('#we').addClass("hide");
        $('.re').removeAttr('checked');
    }
    else {
        $('#we').removeClass("hide");
    }
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-01T14:08:38.383

我认为您的要求是这样的：

如果我们想隐藏该行，则应选中该行中的复选框。如果是，那么，
您可以添加以下代码：

```
 $(this).parent().parent() // chain like this till you get the required row 
```

如果复选框存在于 tr 的 td 中，则上述工作。

# windows - 停止同步 windows 2008 r2 时钟

> ID：13178704
> 
> 赞同：2
> 
> 时间：2012-11-01T14:03:03.900
> 
> 标签：windows, time, windows-server-2008, sync, windows-server-2008-r2

我需要停止从 windows server 2008 r2 同步。已经停止windows时间服务，但它会在2秒内同步。如何将时钟延迟 1 天而不同步？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-02T10:06:57.863

为此，我必须停止这两项服务

*   Hyper-V 时间同步服务
*   视窗时间

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-01T14:31:08.797

暂时停止服务：`net stop w32time`

注销服务：`W32tm /unregister`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-05-05T05:33:39.610

[http://kb.vmware.com/selfservice/microsites/search.do?language=en_US&cmd=displayKC&externalId=1318](http://kb.vmware.com/selfservice/microsites/search.do?language=en_US&cmd=displayKC&externalId=1318)

如果运行 VM，请禁用时间同步：在客户机操作系统的 VMware Tools 工具箱 GUI 中取消选择虚拟机和主机操作系统之间的时间同步。

# ios - PLCrashReporter：iPhone 使用示例不适用于 iOS

> ID：13178705
> 
> 赞同：1
> 
> 时间：2012-11-01T14:03:04.680
> 
> 标签：ios, plcrashreporter

我刚刚实现了PLCrashReporter，人为地提出了一个crash，但是**handleCrashReport**方法没有被调用。你知道为什么吗？

> NSArray *a = [NSArray arrayWithObject:@"0"]; [a objectAtIndex:2];

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-03-27T16:41:56.950

我也认为这是问题，但是您需要做的就是完全崩溃，而不仅仅是应用程序停止。它说您需要在 XCode 调试器上单击**Continue**按钮，直到设备显示 SpringBoard。那么您需要再次启动应用程序。

祝你好运。

# python - 在 Redis for python 中写入多个数据库

> ID：13178706
> 
> 赞同：9
> 
> 时间：2012-11-01T14:03:05.220
> 
> 标签：python, database, redis, key-value-store

我想将一些值写入不同的数据库，这是我的代码：

```
import redis

r1 = redis.Redis(host='127.0.0.1', port=6379, db = 'db1')
r2 = redis.Redis(host='127.0.0.1', port=6379, db = 'db2')

numList = ['4', '3', '2', '1']

for num in numList:
   r1.lpush('a', num)
   r2.lpush('a', 'test')

print r1.lrange('a',start=0,end=-1)
print r2.lrange('a',start=0,end=-1) 
```

然后我得到了这个结果：

```
['test', '1', 'test', '2', 'test', '3', 'test', '4']
['test', '1', 'test', '2', 'test', '3', 'test', '4'] 
```

虽然我使用不同的数据库，但是对于相同的键，所有的值都被放入。谢谢。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-11-01T14:15:30.547

数据库应该是[从零开始的数字索引](http://redis.io/commands/select) ~~（显然限制是 15）~~。尝试使用

```
r1 = redis.Redis(host='127.0.0.1', port=6379, db = 0)
r2 = redis.Redis(host='127.0.0.1', port=6379, db = 1) 
```

# eclipse - 将 BIRT 报告导入 Maximo 时出现错误：bmxaa5457e

> ID：13178711
> 
> 赞同：1
> 
> 时间：2012-11-01T14:03:13.033
> 
> 标签：eclipse, report, birt, maximo

将 BIRT 报告导入 Maximo 时出现错误。

错误是

```
bmxaa5457e   -  The report import process failed. Verify the specified information is correct before proceeding again. 
```

请注意，报告是正确的，我在 Eclipse 中得到了正确的预览。没有像图像或其他与报告相关的属性。

[这](http://www.birt-exchange.org/org/forum/index.php/topic/24236-import-failed/)没有用。Java 2 安全复选框也[未选中](http://www.ibm.com/developerworks/forums/thread.jspa?threadID=226435)。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T21:58:02.340

您使用什么版本的 Eclipse BIRT 来设计报告以及您的 Maximo 支持什么版本的 BIRT？问题可能是您正在创建比 Maximo 支持的新版本的报告。

# git - 树包含重复的文件条目

> ID：13178720
> 
> 赞同：35
> 
> 时间：2012-11-01T14:03:39.140
> 
> 标签：git, object, duplicates

在我们的托管出现一些问题后，我们决定将我们的 Git 存储库移动到 GitHub。所以我克隆了存储库并尝试将其推送到 GitHub。但是，我偶然发现了一些我们以前从未遇到过的错误：

```
 C:\repositories\appName [master]> git push -u origin master
 Counting objects: 54483, done.
 Delta compression using up to 2 threads.
 Compressing objects: 100% (18430/18430), done.
 error: object 9eac1e639bbf890f4d1d52e04c32d72d5c29082e:contains duplicate file entries
 fatal: Error in object
 fatal: sha1 file '<stdout>' write error: Invalid arguments
 error: failed to push some refs to 'ssh://git@github.com/User/Project.git' 
```

当我运行时`fsck`：

```
C:\repositories\appName [master]> git fsck --full
Checking object directories: 100% (256/256), done.
error in tree 0db4b3eb0e0b9e3ee41842229cdc058f01cd9c32: contains duplicate file entries
error in tree 9eac1e639bbf890f4d1d52e04c32d72d5c29082e: contains duplicate file entries
error in tree 4ff6e424d9dd2e3a004d62c56f99e798ac27e7bf: contains duplicate file entries
Checking objects: 100% (54581/54581), done. 
```

当我`ls-tree`使用糟糕的 SHA1 运行时：

```
C:\repositories\appName [master]> git ls-tree 9eac1e639bbf890f4d1d52e04c32d72d5c29082e
160000 commit 5de114491070a2ccc58ae8c8ac4bef61522e0667  MenuBundle
040000 tree 9965718812098a5680e74d3abbfa26f527d4e1fb    MenuBundle 
```

我尝试了这个[StackOverflow question](https://stackoverflow.com/questions/10931954/git-tree-contains-duplicate-file-entries)上已经给出的所有答案，但没有任何成功。有什么办法可以防止这个存储库及其历史被毁灭吗？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2014-07-21T15:19:28.137

方法一。

做第`git fsck`一个。

```
$ git fsck --full
error in tree bb81a5af7e9203f36c3201f2736fca77ab7c8f29: contains duplicate file entries 
```

如果这不能解决问题，那你就有麻烦了。您可以忽略该问题，从备份中恢复存储库，或将文件移动到新存储库中。如果您在将 repo 推送到 github 时遇到问题，请尝试将存储库更改为其他存储库或检查：[Can't push to GitHub error: pack-objects dead of signal 13](https://stackoverflow.com/questions/18559015/cant-push-to-github-error-pack-objects-died-of-signal-13) and [Can't push new git repository to github](https://stackoverflow.com/questions/7792937/cant-push-new-git-repository-to-github)。

* * *

**以下方法仅适用于高级 git 用户**。请在开始前做好备份。以下步骤不能保证修复，它可能会使情况变得更糟，所以为了您自己的风险或教育目的而这样做。

* * *

方法2。

使用 git ls-tree 识别重复文件。

```
$ git read-tree bb81a5af7e9203f36c3201f2736fca77ab7c8f29 # Just a hint.
$ git ls-tree bb81a5af7e9203f36c3201f2736fca77ab7c8f29 # Try also with: --full-tree -rt -l
160000 commit def08273a99cc8d965a20a8946f02f8b247eaa66  commerce_coupon_per_user
100644 blob 89a5293b512e28ffbaac1d66dfa1428d5ae65ce0    commerce_coupon_per_user
100644 blob 2f527480ce0009dda7766647e36f5e71dc48213b    commerce_coupon_per_user
100644 blob dfdd2a0b740f8cd681a6e7aa0a65a0691d7e6059    commerce_coupon_per_user
100644 blob 45886c0eda2ef57f92f962670fad331e80658b16    commerce_coupon_per_user
100644 blob 9f81b5ca62ed86c1a2363a46e1e68da1c7b452ee    commerce_coupon_per_user 
```

**如您所见，它包含重复的文件条目（commerce_coupon_per_user）！**

```
$ git show bb81a5af7e9203f36c3201f2736fca77ab7c8f29
tree bb81a5af7e9203f36c3201f2736fca77ab7c8f29

commerce_coupon_per_user
commerce_coupon_per_user
commerce_coupon_per_user
commerce_coupon_per_user
commerce_coupon_per_user
commerce_coupon_per_user 
```

同样，您可以看到重复的文件条目 (commerce_coupon_per_user)！

您可以尝试使用`git show`每个列出的 blob 并检查每个文件的内容。

然后在你的不同 git 克隆中继续为那个无效的 ls-tree 对象运行 ls-tree，看看你是否可以跟踪有效的对象，或者是否所有对象都损坏了。

```
git ls-tree bb81a5af7e9203f36c3201f2736fca77ab7c8f29

If you found the valid object containing non-duplicated file entries, save it into the file and re-create by using `git mktree` and `git replace`, e.g.

remote$ git ls-tree bb81a5af7e9203f36c3201f2736fca77ab7c8f29 > working_tree.txt
$ cat working_tree.txt | git mktree
NEWTREEbb81a5af7e9203f36c3201f2736fca77ab7c8f29
$ git replace bb81a5af7e9203f36c3201f2736fca77ab7c8f29 NEWTREE4b825dc642cb6eb9a060e54bf8d69288fbee4904 
```

如果这没有帮助，您可以通过以下方式撤消更改：

```
$ git replace -d NEWTREE4b825dc642cb6eb9a060e54bf8d69288fbee4904 
```

* * *

方法3。

当您知道哪个文件/目录条目重复时，您可以尝试删除该文件并稍后重新创建它。例如：

```
$ find . -name commerce_coupon_per_user # Find the duplicate entry.
$ git rm --cached `find . -name commerce_coupon_per_user` # Add -r for the dir.
$ git commit -m'Removing invalid git entry for now.' -a
$ git gc --aggressive --prune # Deletes loose objects! Please do the backup before just in case. 
```

阅读更多：

*   [git gc：自己清理](http://gitfu.wordpress.com/2008/04/02/git-gc-cleaning-up-after-yourself/)

* * *

方法4。

检查您的提交是否有无效条目。

让我们再次检查我们的树。

```
$ git ls-tree bb81a5af7e9203f36c3201f2736fca77ab7c8f29 --full-tree -rt -l
160000 commit def08273a99cc8d965a20a8946f02f8b247eaa66  commerce_coupon_per_user
100644 blob 89a5293b512e28ffbaac1d66dfa1428d5ae65ce0     270    commerce_coupon_per_user
....
$ git show def08273a99cc8d965a20a8946f02f8b247eaa66
fatal: bad object def08273a99cc8d965a20a8946f02f8b247eaa66
$ git cat-file commit def08273a99cc8d965a20a8946f02f8b247eaa66
fatal: git cat-file def08273a99cc8d965a20a8946f02f8b247eaa66: bad file 
```

似乎上面的提交是无效的，让我们使用以下命令之一扫描我们的 git 日志以检查发生了什么：

```
$ git log -C3 --patch | less +/def08273a99cc8d965a20a8946f02f8b247eaa66
$ git log -C3 --patch | grep -C10 def08273a99cc8d965a20a8946f02f8b247eaa66

commit 505446e02c68fe306aec5b0dc2ccb75b274c75a9
Date:   Thu Jul 3 16:06:25 2014 +0100

    Added dir.

new file mode 160000
index 0000000..def0827
--- /dev/null
+++ b/sandbox/commerce_coupon_per_user
@@ -0,0 +1 @@
+Subproject commit def08273a99cc8d965a20a8946f02f8b247eaa66 
```

在这种特殊情况下，我们的提交指向了错误的对象，因为它是作为 git 子项目的一部分提交的，它不再存在（检查`git submodule status`）。

您可以通过以下方式从 ls-tree 中排除该无效对象并重新创建没有此坏对象的树：

```
$ git ls-tree bb81a5af7e9203f36c3201f2736fca77ab7c8f29 | grep -v def08273a99cc8d965a20a8946f02f8b247eaa66 | git mktree
b964946faf34468cb2ee8e2f24794ae1da1ebe20

$ git replace bb81a5af7e9203f36c3201f2736fca77ab7c8f29 b964946faf34468cb2ee8e2f24794ae1da1ebe20

$ git ls-tree bb81a5af7e9203f36c3201f2736fca77ab7c8f29 # Re-test.
$ git fsck -full 
```

注意：旧对象仍应抛出重复的文件条目，但如果您现在在新树中重复，则需要从该树中删除更多内容。所以：

```
$ git replace # List replace objects.
bb81a5af7e9203f36c3201f2736fca77ab7c8f29
$ git replace -d bb81a5af7e9203f36c3201f2736fca77ab7c8f29 # Remove previously replaced object. 
```

现在让我们尝试从该树中删除所有提交和 blob，并再次替换：

```
$ git ls-tree bb81a5af7e9203f36c3201f2736fca77ab7c8f29 | grep -ve commit -e blob | git mktree
4b825dc642cb6eb9a060e54bf8d69288fbee4904
$ git replace bb81a5af7e9203f36c3201f2736fca77ab7c8f29 4b825dc642cb6eb9a060e54bf8d69288fbee4904 
```

现在你有那个无效条目的空树。

```
$ git status # Check if everything is fine.
$ git show 4b825dc642cb6eb9a060e54bf8d69288fbee4904 # Re-check
$ git ls-tree 4b825dc642cb6eb9a060e54bf8d69288fbee4904 --full-tree # Re-check 
```

如果您对阶段有一些奇怪的更改，请通过以下方式重置您的存储库：

```
$ git reset HEAD --hard 
```

如果您将遇到以下错误：

```
HEAD is now at 5a4ed8e Some message at bb81a5af7e9203f36c3201f2736fca77ab7c8f29 
```

执行变基并删除该提交（通过更改`pick`为`edit`）：

```
$ git rebase -i
$ git commit -m'Fixed invalid commit.' -a
rebase in progress; onto 691f725
You are currently editing a commit while rebasing branch 'dev' on '691f725'.
$ git rebase --continue
$ git reset --hard
$ git reset HEAD --hard
$ git reset origin/master --hard 
```

* * *

方法5。

尝试删除和压缩包含无效对象的无效提交。

```
$ git rebase -i HEAD~100 # 100 commits behind HEAD, increase if required. 
```

阅读更多：[Git 工具 - 重写历史](http://git-scm.com/book/en/Git-Tools-Rewriting-History)以及[如何在跳过特定提交时重新设置基准？](https://stackoverflow.com/questions/12604824/how-do-i-rebase-while-skipping-a-particular-commit)

* * *

方法6。

通过以下方法识别无效的 git 对象进行手动删除：

*   对于未压缩的对象（*请删除前两个字符，因为 git 使用它作为目录名称）：

    ```
    $ find . -name 81a5af7e9203f36c3201f2736fca77ab7c8f29 
    ```

*   对于压缩对象

    ```
    $ find . -name \*.idx -exec cat {} \; | git show-index | grep bb81a5af7e9203f36c3201f2736fca77ab7c8f29
    # Then you need to find the file manually.
    $ git unpack-objects $FILE # Expand the particular file.
    $ git unpack-objects < .git/objects/pack/pack-*.pack # Expand all. 
    ```

请参阅：[如何解压缩 git 存储库的所有对象？](https://stackoverflow.com/questions/16972031/how-to-unpack-all-objects-of-a-git-repository)

* * *

有关的：

*   [Git 常见问题解答：如何修复损坏的存储库？](https://git.wiki.kernel.org/index.php/GitFaq#How_to_fix_a_broken_repository.3F)
*   [SA] [git 树包含重复的文件条目](https://stackoverflow.com/questions/10931954/git-tree-contains-duplicate-file-entries)
*   [SA][如何在 git 存储库中恢复损坏的对象（针对新手）？](https://stackoverflow.com/questions/3613682/how-do-you-restore-a-corrupted-object-in-a-git-repository-for-newbies)
*   [SA][如何在 Git 中手动从树中删除 blob 对象？](https://stackoverflow.com/questions/9790650/how-can-i-manually-remove-a-blob-object-from-a-tree-in-git)
*   [SA][如何恢复我的 Git 存储库的“丢失树”错误？](https://stackoverflow.com/questions/7236738/how-can-i-recover-my-git-repository-for-a-missing-tree-error)
*   [SA][如何在不使用 git 的情况下查看 git 对象和索引](https://stackoverflow.com/questions/1532405/how-to-view-git-objects-and-index-without-using-git)
*   [SA] [Git 恢复：“目标文件为空”。如何重建树木？](https://stackoverflow.com/questions/14797978/git-recovery-object-file-is-empty-how-to-recreate-trees)
*   [SA][树包含重复的文件条目](https://stackoverflow.com/questions/13178720/tree-contains-duplicate-file-entries)
*   [SA] [git 树（仍然）包含重复项和错误信号 13](https://stackoverflow.com/questions/23770069/git-tree-still-contains-duplicates-and-an-erroneous-signal-13)
*   [在 git 中撤消、修复或删除提交](http://sethrobertson.github.io/GitFixUm/fixup.html)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-08-03T19:59:57.377

注意：Git 2.1 将添加两个选项，[`git replace`](http://git-scm.com/docs/git-replace)在修改 git repo 中的损坏条目时会很有用：

*   [提交 4e4b125](https://github.com/git/git/commit/4e4b125c239a78f3a8fe82e47d1f89fef510980c)由[Christian Couder ( `chriscool`)](https://github.com/chriscool)

    ```
    --edit <object> 
    ```

> 以交互方式编辑对象的内容。的现有内容`<object>`被漂亮地打印到一个临时文件中，在该文件上启动一个编辑器，并解析结果以创建一个与`<object>`.
> 然后创建一个替换 ref 以替换`<object>`新创建的对象。有关如何选择编辑器的详细信息，
> [请参阅。`git-var`](https://github.com/git/git/blob/4e4b125c239a78f3a8fe82e47d1f89fef510980c/Documentation/git-var.txt)

并由[Jeff King (](https://github.com/peff) [)](https://github.com/peff)[提交](https://github.com/git/git/commit/2deda629c2ab7228790fb7561e66515a9bdcf7b6)2deda62 ：[`peff`](https://github.com/peff)

> ## `replace`: 添加`--raw`模式`--edit`

> “”的目的之一`git replace --edit`是帮助用户修复畸形或损坏的对象。
> 通常我们用“”漂亮地打印树`ls-tree`，这比原始二进制数据更容易使用。
> 
> 但是，某些形式的损坏会破坏 tree-walker，在这种情况下，我们的漂亮打印会失败，从而使“ `--edit`”对用户无用。
> 
> 此补丁引入了“ `--raw`”选项，可让您在这些实例中编辑二进制数据。

知道 Jeff 如何用于调试 Git（就像[在这种情况下](http://thread.gmane.org/gmane.comp.version-control.git/236238)），看到这个选项我并不感到惊讶。

* * *

请注意，在 Git 2.27（2020 年第二季度）之前，“ `git fsck`”确保记录在树对象中的路径已排序且没有重复，但它没有注意到 blob 后跟在具有相同名称的树之前排序的条目的情况。

> 这已得到纠正。

请参阅[René Scharfe ( ) 的](https://github.com/rscharfe)[提交 9068cfb](https://github.com/git/git/commit/9068cfb20f5699fd639a559af14affaefe43a812)（2020 年 5 月 10 日[）](https://github.com/rscharfe)。^(（由)^([Junio C Hamano 合并 --](https://github.com/gitster)) ^([--](https://github.com/gitster))^在^([提交 0498840](https://github.com/git/git/commit/0498840b3517b8dcc1376a05b92c10c9e5b2e4ad))^(中，2020 年 5 月 14 日）)[`rscharfe`](https://github.com/rscharfe)
^([`gitster`](https://github.com/gitster))

> ## [`fsck`](https://github.com/git/git/commit/9068cfb20f5699fd639a559af14affaefe43a812)：报告树中不连续的重复名称
> 
> ^(建议人：Brandon Williams)
> ^(原测试人：Brandon Williams)
> ^(签字人：René Scharfe)
> ^(审核人：Luke Diamand)
> 
> 树条目按路径顺序排序，这意味着目录名称会隐式附加斜杠 ('/')。
> 
> Git fsck 检查树是否包含连续重复，但由于这种排序，如果其中一个是目录而另一个不是，则也可能存在非连续重复。
> 
> 这样的树不能被完全检出。
> 
> 通过在堆栈上记录候选文件名来查找这些重复项，并根据该堆栈检查候选目录名称以查找匹配项。

* * *

使用 Git 2.30（2021 年第一季度），处理最终创建*相同*包文件的重新打包操作的逻辑已得到简化。

请参阅[Taylor Blau ( ) 的提交](https://github.com/ttaylorr)[2fcb03b](https://github.com/git/git/commit/2fcb03b52dffdd48a6aff4c682708c37d1f471f4) （ 2020 年 11 月 17 日）和[提交 704c4a5](https://github.com/git/git/commit/704c4a5c0720825bf79db428bfcbd10b642a5b57)（2020 年 11 月 16 日[）](https://github.com/ttaylorr)。 请参阅[Jeff King ( ) 的](https://github.com/peff)[提交 63f4d5c](https://github.com/git/git/commit/63f4d5cf571f4bec137d7e141bdd0f1d330371f4)（2020 年 11 月 16 日[）](https://github.com/peff)。^(（由)^([Junio C Hamano 合并 --](https://github.com/gitster)) ^([--](https://github.com/gitster))^在^([提交 39d38a5](https://github.com/git/git/commit/39d38a5c5f51ff2f4685bdc9f1af6f4cb0dcd33c))^(中，2020 年 12 月 3 日）)[`ttaylorr`](https://github.com/ttaylorr)
[`peff`](https://github.com/peff)
^([`gitster`](https://github.com/gitster))

> ## [`builtin/repack.c`](https://github.com/git/git/commit/2fcb03b52dffdd48a6aff4c682708c37d1f471f4)：不要将现有的包移开
> 
> ^(帮助者：Jeff King)
> ^(签字者：Taylor Blau)

> 当 ' [`git repack`](https://github.com/git/git/blob/2fcb03b52dffdd48a6aff4c682708c37d1f471f4/Documentation/git-repack.txt)' ^(( [man](https://git-scm.com/docs/git-repack) ))创建一个与任何现有包同名的包时，它会将现有包移动到 ' `old-pack-xxx.{pack,idx,...}`'，然后将新包重命名到位。
> 
> [`git repack`](https://github.com/git/git/blob/2fcb03b52dffdd48a6aff4c682708c37d1f471f4/Documentation/git-repack.txt)最终，如果让 ' ' ^(( [man](https://git-scm.com/docs/git-repack) ))允许在关键时间（在新包被写入/移动到位之后，但在旧包被删除之前）写入多包索引，那就太好了。猜测这个选项可能被称为 ' `--write-midx`'，这使得以下情况（重新打包在没有任何新对象的情况下背靠背发出）不可能：
> 
> ```
> $ git repack -adb
> $ git repack -adb --write-midx 
> ```
> 
> 在第二次重新打包中，现有包被逐字覆盖，使用相同的重命名为旧序列。此时，当前 MIDX 无效，因为它指的是现在丢失的包。因此，该代码希望在重新编写 MIDX 后运行。但是（在这个补丁之前）新的 MIDX 不能被写入，直到新的包被移动到位。所以，我们有一个循环依赖。
> 
> 这都是假设的，因为目前没有代码可以在 ' ^( ^([man](https://git-scm.com/docs/git-repack)) ^) ' 期间安全地编写 MIDX （' ' 这样做是不安全的）。抛开假设不谈：为什么我们需要重命名现有的包以添加前缀“old-”？[`git repack`](https://github.com/git/git/blob/2fcb03b52dffdd48a6aff4c682708c37d1f471f4/Documentation/git-repack.txt)`GIT_TEST_MULTI_PACK_INDEX`
> 
> 这种行为可以追溯到[2ad47d6](https://github.com/git/git/commit/2ad47d61b93e4027bd20f71963dcf1429dccc1fa)（“ `git-repack`：更新与现有包相同的包时要小心。”，2006-06-25，Git v1.4.1 -- [merge](https://github.com/git/git/commit/75dedd5a21246be03ae443e9fc6a9f75c6d2995b)）。[2ad47d6](https://github.com/git/git/commit/2ad47d61b93e4027bd20f71963dcf1429dccc1fa)主要关注新编写的包的结构与其索引不同的情况。当包名称是一组对象的哈希时，这曾经是可能的。在此命名方案下，存储同一组对象的两个包可能在增量选择、对象定位或两者方面有所不同。如果发生这种情况，那么在复制新包和新索引之间的瞬间，任何此类包都将不可读（即，索引或包将是陈旧的，具体取决于它们被复制的顺序）。
> 
> 但是自从[1190a1a](https://github.com/git/git/commit/1190a1acf800acdcfd7569f87ac1560e2d077414) (" `pack-objects`: name pack files after trail hash", 2013-12-05, Git v1.9-rc0 -- [merge](https://github.com/git/git/commit/53b2a5ff30cde96c5d62f60600996a0a95847842) ) 以来，这不再可能，因为包文件不是以其逻辑内容命名的（即，对象集），但通过它们内容的实际校验和。
> 因此，这种`old-`行为可以安全地进行，这使我们能够避免上面的循环依赖。
> 
> 除了避免循环依赖之外，这个补丁还让 ' [`git repack`](https://github.com/git/git/blob/2fcb03b52dffdd48a6aff4c682708c37d1f471f4/Documentation/git-repack.txt)' ^(( [man](https://git-scm.com/docs/git-repack) ))变得更加简单，因为我们不必处理在将现有包重命名为前缀为 ' `old-`' 时遇到的故障。
> 
> 此补丁主要限于删除处理“旧”前缀的代码路径，但在其自己的文件名中包含包名称的文件除外，如`.idx`、`.bitmap`和相关文件。例外是我们希望继续相信 pack-objects 写的内容。也就是说，我们并不是假装 pack-objects 没有写入与已经存在的文件相同的文件，而是我们尊重 pack-objects 所写的内容作为事实的来源。这削减了两种方式：
> 
> *   如果 pack-objects 生成的包与已经存在的带有位图的包相同，但没有生成位图，我们将删除已经存在的位图。（此行为已编入 t7700.14）。
> *   如果 pack-objects 生成了与已经存在的包相同的包，我们信任对应`.idx`的`.promisor`、 和其他文件的刚刚编写的版本，而不是已经存在的文件。这确保了我们使用这些文件的最新版本，即使在文件格式发生变化时也是安全的`.idx`（这不会反映在`.idx`文件名中）。

* * *

在重新使用现有文件重建多包索引文件时，我们过去常常盲目地信任现有文件，最终将损坏的数据携带到更新的文件中，这已在 Git 2.33（2021 年第三季度）中得到纠正。

请参阅[Taylor Blau ( ) 的](https://github.com/ttaylorr)[提交 f89ecf7](https://github.com/git/git/commit/f89ecf79888a48e0adf14d0e05c69ee09e853fd5)、[提交 ec1e28e](https://github.com/git/git/commit/ec1e28ef9c30468d2e76e41c88a1611e63047f61)、[提交 15316a4](https://github.com/git/git/commit/15316a4732eeb0dab27ba406cb80e8704cb9b46d)、[提交 f9221e2](https://github.com/git/git/commit/f9221e2cf5049805d9151b3db6a5eef07b1cc92e)（2021 年 6 月 23 日[）](https://github.com/ttaylorr)。^(（由)^([Junio C Hamano 合并 --](https://github.com/gitster)) ^([--](https://github.com/gitster))^在^([提交 3b57e72](https://github.com/git/git/commit/3b57e72c0c37b972240387cf7c4eb9d87f799c87))^(中，2021 年 7 月 16 日）)[`ttaylorr`](https://github.com/ttaylorr)
^([`gitster`](https://github.com/gitster))

> ## [`midx`](https://github.com/git/git/commit/f89ecf79888a48e0adf14d0e05c69ee09e853fd5)：在“验证”期间报告校验和不匹配
> 
> ^(建议人：Derrick Stolee)
> ^(签名人：Taylor Blau)

> ' [`git multi-pack-index verify`](https://github.com/git/git/blob/f89ecf79888a48e0adf14d0e05c69ee09e853fd5/Documentation/git-multi-pack-index.txt#L45)' ^(( [man](https://git-scm.com/docs/git-multi-pack-index#Documentation/git-multi-pack-index.txt-verify) ))通过检查记录的对象偏移是否正确等来检查现有 MIDX 中的数据是否正确。
> 
> 但它不会检查文件的尾随校验和是否与它记录的数据匹配。
> 因此，如果在最后几个字节中发生了磁盘损坏（并且所有其他数据都被正确记录），我们将：
> 
> *   从 ' ' 得到一个干净的结果`git multi-pack-index verify`，但是
> *   在编写新的 MIDX 时无法重用现有的 MIDX（因为我们现在在重用 MIDX 之前检查校验和不匹配）
> 
> 通过调用' `verify`' 子命令来识别校验和中的损坏`midx_checksum_valid()`。

* * *

在 Git 2.34（2021 年第四季度）中，“ [`git repack`](https://github.com/git/git/blob/0b69bb0fb1ebe1a9ab7a3f4bfde5cad82eb892e3/Documentation/git-repack.txt)” ^(（[man](https://git-scm.com/docs/git-repack)）)已被教导生成多包可达性位图。

请参阅[Jeff King ( ) 的](https://github.com/peff)[提交 e861b09](https://github.com/git/git/commit/e861b0963626dd2732f7efbf2a187a85b060d9cb)（2021 年 10 月 6 日[）](https://github.com/peff)。 请参阅[提交 324efc9](https://github.com/git/git/commit/324efc90d1b1a660388f8cabbb72e803160082d3)（2021 年 10 月 1 日）和[提交 6d08b9d](https://github.com/git/git/commit/6d08b9d4caa230441b7d9e2b4f23deaf9ff74c13)、[提交 1d89d88](https://github.com/git/git/commit/1d89d88d37d18cd3af37ef4742aa39282441ec14)、[提交 5f18e31](https://github.com/git/git/commit/5f18e31f4642f4daf398d0903e3fb3233b86f174)、[提交 a169166](https://github.com/git/git/commit/a169166d2bc855f7cc0bbf79039b48da91782d95)、[提交 90f838b](https://github.com/git/git/commit/90f838bc368d0a3495fb4164dd76e505bf761b29)、[提交 08944d1](https://github.com/git/git/commit/08944d1c221a7f4fe42a50c0f11f129769edc9b1)、[提交 6fb22ca](https://github.com/git/git/commit/6fb22ca463077a07f42675be52e68891f319b5c2)、[提交 56d863e](https://github.com/git/git/commit/56d863e9799c9d440eba3e61346662745a58ab21)（2021 年 9 月 28 日）由[Taylor Blau（](https://github.com/ttaylorr)[）](https://github.com/ttaylorr)。^(（由)^([Junio C Hamano 合并 --](https://github.com/gitster)) ^([--](https://github.com/gitster))^在^([0b69bb0 提交中](https://github.com/git/git/commit/0b69bb0fb1ebe1a9ab7a3f4bfde5cad82eb892e3))^(，2021 年 10 月 18 日）)[`peff`](https://github.com/peff)
[`ttaylorr`](https://github.com/ttaylorr)
^([`gitster`](https://github.com/gitster))

> ## [`builtin/repack.c`](https://github.com/git/git/commit/1d89d88d37d18cd3af37ef4742aa39282441ec14): 支持在重新打包时编写 MIDX
> 
> ^(签字人：Taylor Blau)

> 为希望在重新打包时将多包索引保留在其存储库中的调用者教^( ^([man](https://git-scm.com/docs/git-repack)) ^)一个新选项。[`git repack`](https://github.com/git/git/blob/1d89d88d37d18cd3af37ef4742aa39282441ec14/Documentation/git-repack.txt)`--write-midx`
> 
> 这个新标志有两个现有的替代方案，但它们不涵盖我们的特定用例。
> 这些替代方案是：
> 
> *   运行 ' ' 后调用 ' [`git multi-pack-index write`](https://github.com/git/git/blob/1d89d88d37d18cd3af37ef4742aa39282441ec14/Documentation/git-multi-pack-index.txt#L35)' ^(( [man](https://git-scm.com/docs/git-multi-pack-index#Documentation/git-multi-pack-index.txt-write) ))`git repack`，或
> *   `GIT_TEST_MULTI_PACK_INDEX=1`运行“ ”时在您的环境中设置“ `git repack`”。
> 
> 前者有效，但在重新打包和编写新 MIDX 之间引入了位图覆盖空白（因为重新打包可能已删除现有 MIDX 中包含的包，使其完全无效）。
> 
> 引入一个新选项，通过教导在关键点生成 MIDX 来消除这种竞争`git repack`：在新包被写入并移动到位之后，但在删除冗余包之前。
> 
> 此选项与`git repack`'--bitmap' 选项兼容（它将解释更改为：“在生成后写入与 MIDX 对应的位图”）。
> 
> MIDX 代码不处理此问题，因此请避免首先尝试生成覆盖零包的 MIDX。

`git repack`现在在其[手册页](https://github.com/git/git/blob/1d89d88d37d18cd3af37ef4742aa39282441ec14/Documentation/git-repack.txt#L133-L135)中包含：

> 如果创建了多个包文件，则此选项无效，除非写入 MIDX（在这种情况下会创建多包位图）。

现在仍然`git repack`包含在其[手册页](https://github.com/git/git/blob/1d89d88d37d18cd3af37ef4742aa39282441ec14/Documentation/git-repack.txt#L194-L198)中：

> ## `-m`
> 
> ## `--write-midx`
> 
> [`git multi-pack-index`](https://git-scm.com/docs/git-multi-pack-index)编写一个包含非冗余包的多包索引（请参阅参考资料）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-04-07T18:31:02.520

我遇到的唯一解决方案是使用 git-replace 和 git-mktree。它不是世界上最简单的解决方案，但它确实有效。

查看此链接以获取参考指南。

[git 树包含重复的文件条目](https://stackoverflow.com/questions/10931954/git-tree-contains-duplicate-file-entries)

# css - 对不可编辑的表单字段使用 span 或 input 元素

> ID：13178722
> 
> 赞同：2
> 
> 时间：2012-11-01T14:03:44.070
> 
> 标签：css, html, twitter-bootstrap

我刚开始使用[twitter bootstrap](http://twitter.github.com/bootstrap/base-css.html#forms)。

我想创建一个禁用的表单域。在文档中，我发现了这个片段：

```
<input type="text" placeholder="Disabled input here..." disabled> 
```

但在 IE9 中，占位符不起作用。当我使用该`value`属性设置它的工作内容时（并覆盖在其他浏览器（如 chrome）中工作的占位符文本）。

有一种不使用输入元素的替代方法：

```
<span class="uneditable-input">Some value here</span> 
```

这也适用于 IE9 和 chrome。哪个解决方案更好（与旧浏览器兼容，如 IE8、7（和 6）？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-01T14:49:39.403

我发现，当我想使用[twitter bootstrap](http://twitter.github.com/bootstrap/base-css.html#forms)`Prepended and appended inputs`时， 我必须使用 input 元素。它不适用于 span 元素。

例子：

```
<div class="input-prepend">
  <span class="add-on">@</span>
  <input class="span2" id="prependedInput" type="text" placeholder="Username">
</div>

<div class="input-append">
  <input class="span2" id="appendedInput" type="text">
  <span class="add-on">.00</span>
</div> 
```

![截屏](../Images/958716b420286eef8575a8a883ed8f81.png)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-01T14:11:18.290

IE 7/8/9 不支持 HTML5 占位符。最好的解决方案必须是使用提供功能的脚本/插件（*当它不存在时*）

见[https://github.com/miketaylr/jQuery-html5-placeholder](https://github.com/miketaylr/jQuery-html5-placeholder)

[我对http://jquery-watermark.googlecode.com/](http://jquery-watermark.googlecode.com/)也有很好的体验

如果 HTML5 可用，它们都使用 HTML5，如果不可用，则模拟它。

它们使用起来非常简单。例如，要使用水印，只需包含它并在您的 document.ready() 中添加一行

```
$("#my-input").watermark('default text'); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-01T14:33:20.957

```
<span class="uneditable-input">Some value here</span> 
```

更好恕我直言。。

原因-它将在新旧浏览器中按预期运行，并且不依赖于任何外部脚本，而仅依赖于 css 样式`uneditable-input`

当您可以简单地在`span`标签中回显您的值时，为什么要使用禁用的表单字段..??

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-11-01T14:09:45.070

该`placeholder`属性是 HTML5 并且在许多浏览器中不起作用，尤其是较旧的浏览器，这就是它在 IE9 中不起作用的原因。（即使在 IE9 中，微软也不遵循标准。）

如果您的问题是跨度是否比`placeholder`属性更兼容，那么是的。所有浏览器都应该支持跨度。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-01T14:11:40.333

您可以使用 javascript 替代方案...

```
<input type="text" placeholder="Disabled input here..." onfocus="this.blur()" /> 
```

# java - 具有多值查询的 Spring Cache 抽象

> ID：13178723
> 
> 赞同：2
> 
> 时间：2012-11-01T14:03:48.300
> 
> 标签：java, spring, caching

Spring Cache 抽象是否支持多值查询？

代替：

@Cacheable("books") public Book findBook(ISBN isbn) {...}

想象一下这样的查询：

@Cacheable("books") public List< Book > findBook(List< ISBN > isbns) {...}

这支持吗？它会单独缓存集合中返回的每本书吗？

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-02T12:15:05.160

Spring Cache 将整个结果存储在单个缓存键下，因此无法单独存储集合中返回的每个对象。如果缓存 JPA 查询的结果，您可以使用查询缓存。在其他情况下，如果您可以选择 memcached，您可以尝试[Simple Spring Memcached](http://code.google.com/p/simple-spring-memcached/)和 ReadThroughMultiCache 注释。它将集合的每个元素单独存储在专用缓存键下。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-01T14:24:39.950

**查询缓存**确实可以缓存每个查询输入的结果列表。请注意，只有返回实体的 ID 会保存在查询缓存中。如果您也希望缓存属性，则必须为返回的实体类型本身单独启用实体缓存**。**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-04-02T13:32:23.603

为我工作。这是我的答案的链接。 [https://stackoverflow.com/a/60992530/2891027](https://stackoverflow.com/a/60992530/2891027)

TL:博士

```
@Cacheable(cacheNames = "test", key = "#p0")
public List<String> getTestFunction(List<String> someIds) { 
```

我的示例是使用字符串而不是自定义对象。

希望它至少有一点帮助:)

# operating-system - xchg 指令可以确保内存排序吗？

> ID：13178727
> 
> 赞同：1
> 
> 时间：2012-11-01T14:04:05.123
> 
> 标签：operating-system, x86, cpu

一些操作系统内核使用`xchg`指令来实现`spinlock`. 在他们的获取锁功能实现中，他们通常在获取锁之前使用`xchg`指令禁用中断。那么，`xchg`指令可以确保内存排序吗？我的意思是`xchg`指令可以确保在它之后不会调用禁用中断吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T15:47:41.177

没有 XCHG 指令不能做到这一点。在 XCHG 指令执行时，处理器的 LOCK 信号自动置位，因此我们不需要额外的 LOCK 前缀来确保指令以原子方式执行。XCHG 始终以原子方式执行！并且不需要禁用中断。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-29T08:50:21.557

是的。XCHG 指令可以做到这一点。

[关于为什么 MemoryBarrier 可以实现为对 xchg 的调用，](https://stackoverflow.com/questions/19652824/why-can-memorybarrier-be-implemented-as-a-call-to-xchg)我得到了更好的答案？.

# c++ - 从基类执行重写的方法

> ID：13178731
> 
> 赞同：-3
> 
> 时间：2012-11-01T14:04:12.463
> 
> 标签：c++, inheritance, virtual

我有两个像下面这样的类（我尽量抽象示例）：

```
#include <iostream>
using namespace std;

class foo1
{
public:
    foo1() {};
    virtual ~foo1() {};
    void Method1()           { Method2(); }
    virtual void Method2()   { cout<<"parent";}
};

class foo2 : public foo1
{
public:
    virtual void Method2()  { cout<<"child";}
};

int main()
{
    foo2 a = foo2();
    a.Method1();
} 
```

我收到了“父母”的消息。所以执行。`Method1()`_`foo2``foo1::Method2()`

我需要使用什么来`foo2::Method1`调用他们的`foo2::Method2`?

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-01T14:07:21.313

不，你没有，你得到`"child"`。如果你这样做了，你会得到父母

```
foo1 a = foo2();   // My crystal ball tells me this is what you really have 
```

这将是由于对象切片。为了让它工作，你需要指针或引用：

```
foo2 f;
foo1& rf = f;
rf.Method1();   //child 
```

或者

```
foo1* a = new foo2();
a->Method1();   //child 
```

# css - 使用 CSS 变换在悬停时缩放 SVG 矩形

> ID：13178732
> 
> 赞同：1
> 
> 时间：2012-11-01T14:04:14.117
> 
> 标签：css, svg, hover, transform

似乎在悬停时对 HTML 或 SVG 元素应用相同的 CSS 变换不会产生相同的效果。正如您在下面的小提琴中看到的那样，`p`and`rect`在缩放时的行为方式不同，这正是我的问题。

[http://jsfiddle.net/rKD7T/2/](http://jsfiddle.net/rKD7T/2/)

我怎样才能使`rect`行为完全符合`p`并正确缩放？

我尝试`rect`使用矩阵缩放 - 考虑到原点 - 但它似乎也不起作用，或者我做错了。

我想在这里坚持使用 CSS 解决方案，但 JS 解决方案也可能是一种选择。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T14:31:45.750

这似乎是对的。

```
<div>
    <p></p>
    <p></p>
    <p></p>
    <p></p>
</div>

<svg>
    <g transform="translate(20, 40)">
    <rect x="-20" y="-40" width="50" height="100"/>
    <g transform="translate(55, 0)" >
    <rect x="-20" y="-40" width="50" height="100"/>
    </g>
    <g transform="translate(110, 0)" >
    <rect x="-20" y="-40" width="50" height="100"/>
    </g>
    <g transform="translate(165, 0)" >
    <rect x="-20" y="-40" width="50" height="100"/>
    </g>
    </g>
</svg> 
```

[它适用](http://jsfiddle.net/longsonr/kZ6sX/)于 Firefox[主干](http://nightly.mozilla.org/)，但似乎不适用于 Firefox 16。我尚未测试 Firefox [Beta](https://www.mozilla.org/en-US/firefox/beta/)或[Aurora](http://www.mozilla.org/en-US/firefox/aurora/)以确切了解它何时修复。

# java - 在 AnnotationProcessor 中访问 javac 选项

> ID：13178735
> 
> 赞同：2
> 
> 时间：2012-11-01T14:04:21.633
> 
> 标签：java, javac, annotation-processing

我正在编写自定义 AnnotationProcessor 并需要访问在执行期间设置为 javac 的选项：例如 -verbose、-s、-d

这样做的正确方法是什么。我不认为解析“sun.java.command”系统属性或访问 com.sun.tools.javac.util.Options 是这样做的好方法。

非常感谢。

PS：对于 -s 选项可能是这样的：

```
JavaCompiler compiler = ToolProvider.getSystemJavaCompiler();
StandardJavaFileManager fm = compiler.getStandardFileManager(null, null, null);
Iterable<? extends File> locations = fm.getLocation(StandardLocation.SOURCE_OUTPUT); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T10:47:30.607

没有公共 API 可以做到这一点**。**“-s”和“-d”选项的效果应该反映在文件管理器的行为中，而不是处理器需要直接检查的东西。

可以使用“-Afoo=bar”传递特定于处理器的选项，该选项可以从 getOptions 方法中查询。

# c# - 在c#中将base64转换为图像

> ID：13178737
> 
> 赞同：5
> 
> 时间：2012-11-01T14:04:32.117
> 
> 标签：c#, asp.net-mvc-3

我正在使用 MVC#。当我尝试将 base64 字符串转换为图像时，图像没有打开。我从 javascript 获取 base64 字符串并将其转换为控制器中的图像。这是我的代码。

```
var base64 = "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAABG4AAAH0CAYAAABsCGvoAAAgAElEQVR4Xuy9C5RV1Zmo++96P3ZVURSv4hEEFdQobYKtJESjJME+6WgTpPUQIrfpY8NRui/aKlcvY2hON0fN5TIUbh/6XDs9bgah0+1BY+gk2p2QFpIAgk9AiGBhlQgIokgVRQFVu3bd9S+c21WbXVV71157Pfb+loNh1ar5+Oc3Z/H46p9zRnqsR3ggAAEIQAACEIAABCAAAQhAAAIQgAAEAkcggrgJ3JwQEAQgAAEIQAACEIAABCAAAQhAAAIQsAkgblgIEIAABCAAAQhAAAIQgAAEIAABCEAgoAQQNwGdGMKCAAQgAAEIQAACEIAABCAAAQhAAAKIG9YABCAAAQhAAAIQgAAEIAABCEAAAhAIKAHETUAnhrAgAAEIQAACEIAABCAAAQhAAAIQgADihjUAAQhAAAIQgAAEIAABCEAAAhCAAAQCSgBxE9CJISwIQAACEIAABCAAAQhAAAIQgAAEIIC4YQ1AAAIQgAAEIAABCEAAAhCAAAQgAIGAEkDcBHRiCAsCEIAABCAAAQhAAAIQgAAEIAABCCBuWAMQgAAEIAABCEAAAhCAAAQgAAEIQCCgBBA3AZ0YwoIABCAAAQhAAAIQgAAEIAABCEAAAogb1gAEIAABCEAAAhCAAAQgAAEIQAACEAgoAcRNQCeGsCAAAQhAAAIQgAAEIAABCEAAAhCAAOKGNQABCEAAAhCAAAQgAAEIQAACEIAABAJKAHET0IkhLAhAAAIQgAAEIAABCEAAAhCAAAQggLhhDUAAAhCAAAQgAAEIQAACEIAABCAAgYASQNwEdGIICwIQgAAEIAABCEAAAhCAAAQgAAEIIG5YAxCAAAQgAAEIQAACEIAABCAAAQhAIKAEEDcBnRjCggAEIAABCEAAAhCAAAQgAAEIQAACiBvWAAQgAAEIQAACEIAABCAAA...AgkKCA4CbBouoSAQIECBAgQIAAAQIECBAgkIaA4CaNOuoFAQIECBAgQIAAAQIECBAgkKCA4CbBouoSAQIECBAgQIAAAQIECBAgkIaA4CaNOuoFAQIECBAgQIAAAQIECBAgkKCA4CbBouoSAQIECBAgQIAAAQIECBAgkIaA4CaNOuoFAQIECBAgQIAAAQIECBAgkKCA4CbBouoSAQIECBAgQIAAAQIECBAgkIaA4CaNOuoFAQIECBAgQIAAAQIECBAgkKCA4CbBourS9wLLy8vhypUrob+/Pxw8eBALAQIECBAgQIAAAQIECBAonIDgpnAlS7vBY2Nj4e7du6GpqSkMDg4KXNIut94RIECAAAECBAgQIECAQBkBwY0hUjcC09PT4enTp9kMmdIxOzsbhoeHw/z8fOjp6QlDQ0Ohubk5XL16NbS3t4epqakwMjIS2trafvTavXv3ws2bN1e+Pjo6GmZmZkJLS8ua13R0dNSNh4YQIECAAAECBAgQIECAAAHBjTFQNwLj4+Ph2LFjq86y+XzZU29vb4ghzPHjx0NfX1/W/vj11V6LAc+FCxdCDHG6urqy82NANDk5GS5evPija+oGQ0MIECBAgAABAgQIECBAgMAnAcGNYVA3AqsFN4uLi9mSqbm5uZXlUzG4KQUypRkyMbj50ms3btzIlmCVjiNHjmTBzQ+vqRsMDSFAgAABAgQIECBAgAABAoIbY6CeBCYmJrKlUgMDAyvNiq/FmTJHjx4Nly9fDpcuXQp5gpvPZ9yUbr5a2FNPHtpCgAABAgQIECBAgAABAgTMuDEG6kqgtDlxbNTp06fD4cOHw7Vr17J9aU6dOhWWlpbCmTNnvnrGTdwDp7THTWnj49UCoLrC0BgCBAgQIECAAAECBAgQaHgBwU3DDwEABAgQIECAAAECBAgQIECAQL0KCG7qtTLaRYAAAQIECBAgQIAAAQIECDS8wP8AN7hUDozwDE4AAAAASUVORK5CYII=";

byte[] str = System.Text.Encoding.Unicode.GetBytes(base64);
var buffer = Convert.FromBase64String(Convert.ToBase64String(str));
var file = Server.MapPath("~/Content/images/err.png");
System.IO.File.WriteAllBytes(file, buffer);
Image img = new Image();
img.ImageUrl = Server.MapPath("~/Content/images/err.png"); 
```

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-11-01T14:06:04.297

您的代码完全错误。

您需要通过删除第一个逗号之前的所有内容，从该字符串中解析出实际的 base64 数据。

然后，您可以调用`Convert.FromBase64String()`该数据。

```
string source = "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAABG4...YII=";
string base64 = source.Substring(source.IndexOf(',') + 1);
byte[] data = Convert.FromBase64String(base64); 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-11-02T11:10:39.733

我复制了那个base64字符串提示窗口。我使用 ajax 方法从客户端发布 base64 字符串，它对我有用

C＃

```
[HttpPost]
public void Base64ToImage(string source)
{
    string base64 = source.Substring(source.IndexOf(',') + 1);
    base64 = base64.Trim('\0');
    byte[] chartData = Convert.FromBase64String(base64);
} 
```

AJAX 方法

```
var picture = jqplotToImg($('#ChartContent'));
//prompt("", picture);

$.ajax({ type: 'POST',
    url: '../Report/Base64ToImage',
    async: false,
    data: { source: picture },
    success: function (data) {
        //alert(data);
    }
}); 
```

# xsd - XSD 中 element 和 complexType 之间的语义差异

> ID：13178739
> 
> 赞同：7
> 
> 时间：2012-11-01T14:04:44.113
> 
> 标签：xsd, jaxb

鉴于此 XSD：

```
<xsd:element name="ServiceList">
    <xsd:complexType>
        <xsd:sequence>
            ...
        </xsd:sequence>
    </xsd:complexType>
</xsd:element>

<xsd:complexType name="ServiceList">
    <xsd:sequence>
        ...
    </xsd:sequence>
</xsd:complexType> 
```

这两者之间的语义差异是什么？即命名`element`s 和`complexType`s 是 a 的直接子级`schema`。

我问的原因是我尝试在 XSD 中这样做：

```
<xsd:element name="AvailableServices" type="cm:ServiceList" />
<xsd:element name="ExistingServices" type="cm:ServiceList" />
<xsd:complexType name="ServiceList">
    <xsd:sequence>
        ...
    </xsd:sequence>
</xsd:complexType> 
```

但是当它使用 Maven JAXB 插件编译成 Java 类时，我只能创建一个`new ServiceList()`. `AvailableServices`并且`ExistingServices`似乎在生成的类中甚至不存在。那么，这里发生了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T14:47:51.433

**类对应复杂类型**

在[**JAXB (JSR-222)**](http://jcp.org/en/jsr/detail?id=222)中，Java 类对应于复杂类型。全局元素的命名复杂类型和匿名复杂类型对应于根级类。默认情况下，嵌套复杂类型生成为静态内部类。您可以更改此默认行为：

*   [https://stackoverflow.com/a/13175419/383861](https://stackoverflow.com/a/13175419/383861)

**全局元素**

如果全局元素与复杂类型（具有匿名复杂类型的全局元素）唯一关联，它将用 注释`@XmlRootElement`。对应于全局类型的全局元素将对应于类`@XmlElementDecl`中的注解`ObjectFactory`。

**了解更多信息**

*   [http://blog.bdoughan.com/2012/07/jaxb-and-root-elements.html](http://blog.bdoughan.com/2012/07/jaxb-and-root-elements.html)

# javascript - 内联显示图像的问题

> ID：13178745
> 
> 赞同：2
> 
> 时间：2012-11-01T14:05:04.703
> 
> 标签：javascript, html

我正在尝试在同一行上显示多个图像而不会结束。我已经尝试了我所知道的一切来完成这项工作，但没有运气！我正在尝试为幻灯片制作一个图像选择器，该选择器将使用 ajax / jQuery 加载到页面中，我不希望它占用大量的屏幕空间。理想情况下，我希望能够水平滚动并选择我的图像。

```
<script type="text/javascript">     
    $(document).ready(function () {
      test();
    });     

    function test(){
      for (var i=0; i < images.length; i++) {
        $("#test").append("<img src='"+images[i]+"' style='width:250px; height: 250px; margin:10px; display:inline'/>");
      };
    } 
</script>
<div id="test"></div> 
```

通常我对 HTML 有 0 个问题，所以我觉得问起来有点傻，我确信这是我犯的一个非常简单的错误。任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-01T14:16:56.533

尝试将 nowrap 应用于 div#test：

```
#test{ white-space:nowrap; } 
```

您可能还需要另一个 div#test 包装器，带有 overflow:auto; 那么如果你想要水平滚动。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T14:08:15.663

在图像中尝试 float:left 或尝试将图像包装在 div 中，然后尝试 float:left

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-01T14:15:45.877

尝试标签样式`float:left`。`<img>`如果没有帮助，请尝试更改`display:inline`为`display:inline-block`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-01T14:17:00.067

尝试`float:left`图像，我看到你没有声明图像数组（希望你在原始代码中有）

# android - android ListView onClick 获取 JSONObject

> ID：13178746
> 
> 赞同：0
> 
> 时间：2012-11-01T14:05:05.407
> 
> 标签：android, json, android-listview, onclicklistener

我有一个由 JSONObjects 膨胀的 ListView。它工作正常`list.setOnItemClickListener`。我使用 EditText 添加了搜索工具，并在运行时搜索 JSONArray 中的项目（包含 JSONObjects）。但是搜索后，当我单击 ListView 项时，它会显示 JSONArray 中的原始位置。例如，如果我有这些项目的 ListView。

```
Africa
Asia
Europe
North America
South America 
```

[ListView中item的位置为0-4，即非洲=0，南美=4]

现在，如果我使用 EditText 字段作为搜索栏，然后输入`America`它，它现在将向我显示包含 2 个项目的列表视图。

```
North America
South America 
```

现在ListView在运行时有两个项目，如果我点击`North America`它会告诉我JSONArray的位置[0]，原来是`Africa`，所以，而不是向我`North America`显示关于它的信息/数据，我点击了`Africa`

如何从 ListView Click 中获取 JSONObject 但 position-id ？

/* 填充 ListView onCreate() */

```
public void populateCityList() {
    List<CityRowItem> rowItems;
    rowItems = new ArrayList<CityRowItem>();
    try {
        jArray = readJSONFile();
        if (jArray != null) {

            for (int i = 0; i < jArray.length(); i++) {
                JSONObject j1 = jArray.getJSONObject(i);
                CityRowItem item = new CityRowItem(R.drawable.grain,
                        j1.getString("city_name_eng"),
                        j1.getString("city_name_alias"), R.drawable.city);
                rowItems.add(item);
            }

            CityListAdapter myadapter = new CityListAdapter(
                    GetCityManual.this, R.layout.list_item_city, rowItems);
            list.setAdapter(null);
            list.setAdapter(myadapter);
                    }
    }
    catch (JSONException) {
        ;
    }
} 
```

/* 这是 onClick 监听器 */

```
list.setOnItemClickListener(new OnItemClickListener() {
    public void onItemClick(AdapterView<?> parent, View view,
            int position, long id) {
        try {
            JSONObject j1 = jArray.getJSONObject(position);                 
            String CityName = jsonObj.getString("city_name_eng");
            Intent myIntent = new Intent(GetCityManual.this,
                    GetCategory.class);
            myIntent.putExtra("objCity", CityName);
        }
        catch (JSONException e)
        { 
            ;
        }
    }
} 
```

/* 这段代码反映了使用 EditText 进行搜索的功能 */

```
txtSearch.addTextChangedListener(new TextWatcher() {

    public void onTextChanged(CharSequence s, int start, int before,
            int count) {
        // TODO Auto-generated method stub

    }

    public void beforeTextChanged(CharSequence s, int start, int count,
            int after) {

    }

    public void afterTextChanged(Editable s) {
        List<CityRowItem> rowItems;
        rowItems = new ArrayList<CityRowItem>();
        if (jArray != null) {
            try {
                for (int i = 0; i < jArray.length(); i++) {
                    JSONObject j1 = jArray.getJSONObject(i);
                    if (j1.getString("city_name_eng").toLowerCase()
                            .contains(s.toString().toLowerCase())) {
                        CityRowItem item = new CityRowItem(
                                R.drawable.grain, j1
                                        .getString("city_name_eng"), j1
                                        .getString("city_name_alias"),R.drawable.city);
                        rowItems.add(item);
                    }
                    CityListAdapter myadapter = new CityListAdapter(
                            GetCityManual.this,
                            R.layout.list_item_city, rowItems);
                    list.setAdapter(null);
                    list.setAdapter(myadapter);
                }
            }
            } catch (Exception _e) {
                ;
            }
}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T14:36:47.517

LIst 从实际列表适配器中传递您选择的位置，您更改了列表适配器，因此您可以从那里获得数字。你应该在别处保留原始位置

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T14:50:29.737

您的 onItemClick 显示您单击的列表的当前位置。你可以`List<CityRowItem> CurrentRowItems;`在你的班级和 init 和 afterTextChanged 上保留对该列表的引用 `this.CurrentRowItems = rowItems;`。当点击事件发生时`CityRowItem city = this.CurrentRowItems.get(position);`。另外我建议只对 json 文件进行一次解码，然后处理该列表。

# javascript - 如何使用 HTML5 文件 API 读取预先指定的文件？

> ID：13178747
> 
> 赞同：1
> 
> 时间：2012-11-01T14:05:04.670
> 
> 标签：javascript, html

HTML5 文件 API 的所有教程都讨论了从文本框中获取 FileList。我已经有了文件的名称（例如 foo.json），我不知道如何读取给定文件名的文件。

这不适用于网络应用程序。我正在生成一些 JSON 格式的数据，我想使用 Javascript 对其进行格式化，本质上是生成一些交互式条形图。与 XML 可以使用 XSLT 格式化的方式很相似，我想分发一个 JSON 文件以及一些 JavaScript 代码，当有人单击 JavaScript 文件时，他们可以对数据进行简单的交互式探索。

所以我的第一个问题是从 Javascript 中读取 JSON 文件。请注意，不涉及网络服务器。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T14:43:46.427

简短的回答是“你不能”。这是一个安全问题；如果您找到方法，请向浏览器错误跟踪器提交错误报告。它甚至不可能用文件名预先填充对话框。

但是，对于您的特定用例；似乎根本不需要读取单独的文件。只需将数据作为文字包含在您的 JavaScript 代码中。

# ruby-on-rails - 活动管理员嵌套关联

> ID：13178749
> 
> 赞同：4
> 
> 时间：2012-11-01T14:05:22.973
> 
> 标签：ruby-on-rails, activeadmin

所以我的程序中有以下模型：

```
class User < ActiveRecord::Base
  has_many :group_members
  has_many :groups, through: :group_members 

class GroupMember < ActiveRecord::Base
  belongs_to :user
  belongs_to :group
end

class Group < ActiveRecord::Base
  has_many :group_members
  has_many :users, through: :group_members
end 
```

我正在使用 ActiveAdmin 来管理这些资源。我`groups.rb`在 admin 文件夹中的文件如下所示：

```
ActiveAdmin.register Group do
.
.
  belongs_to :user, :optional => true
.
.
end 
```

问题是，组本身就是一种资源——管理员可以通过转到`/admin/groups`路由来管理组——但它也是用户的资源，我可以通过访问`/admin/users/:user_id/groups`路由来查看用户组。但是，当我尝试通过访问`/admin/users/:user_id/groups/new`页面并填写表单来为该用户创建一个新组时，我收到一个错误：

```
ActiveRecord::RecordNotFound in Admin::GroupsController#show
Couldn't find Group with id=13 [WHERE `group_members`.`user_id` = 2] 
```

用户id对应我当前登录的用户，是正确的，而group id = 13对应的是新创建的组的id（正确保存在数据库中），但`group_members`没有创建表中的关联。实际上，这甚至不是我想要在这里实现的目标：理想的情况是检索组列表并将其显示在新页面中，以免`groups`在此页面中创建新的 - 仅`group_members`.

在这种情况下我该如何进行？提前致谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-07T10:45:41.470

您是否考虑过删除

```
belongs_to 
```

组寄存器块中的声明？这个aa dsl语句给你的接口嵌套，看起来不错，给你一个点击路径，但最终它只是对数据（模型）的装饰。在用户模型中使用过滤器和范围也可以。如果您真的需要 aa 的 belongs_to，您将不得不创建自定义编辑屏幕和自定义重定向。祝你好运。

# c# - 没有时间的当前日期

> ID：13178752
> 
> 赞同：34
> 
> 时间：2012-11-01T14:05:33.797
> 
> 标签：c#

如何获得当前日期但没有时间？我正在尝试将日期从“dd.mm.yyyy”格式转换为“yyyy-MM-dd”，因为也返回时间，当我尝试执行以下操作时`DateTime.Now`出现错误（ .）。`String was not recognized as a valid DateTime`

```
string test = DateTime.ParseExact(DateTime.Now.ToString(), "dd.MM.yyyy", CultureInfo.InvariantCulture).ToString("yyyy-MM-dd"); 
```

* * *

## 回答 #1

> 赞同：50
> 
> 时间：2012-11-01T14:09:12.157

使用[Date](http://msdn.microsoft.com/en-us/library/system.datetime.date.aspx)属性：获取此实例的日期组件。

```
var dateAndTime = DateTime.Now;
var date = dateAndTime.Date; 
```

变量`date`包含日期和时间部分将是 00:00:00。

或者

```
Console.WriteLine(DateTime.Now.ToString("dd/MM/yyyy")); 
```

或者

[DateTime.ToShortDateString 方法-](http://msdn.microsoft.com/en-us/library/system.datetime.toshortdatestring.aspx)

```
Console.WriteLine(DateTime.Now.ToShortDateString ()); 
```

* * *

## 回答 #2

> 赞同：41
> 
> 时间：2012-11-01T14:06:20.320

```
String test = DateTime.Now.ToString("dd.MM.yyy"); 
```

* * *

## 回答 #3

> 赞同：23
> 
> 时间：2012-11-01T14:08:33.290

你有没有尝试过

```
DateTime.Now.Date 
```

* * *

## 回答 #4

> 赞同：10
> 
> 时间：2012-11-01T14:10:09.383

```
String test = DateTime.Now.ToShortDateString(); 
```

* * *

## 回答 #5

> 赞同：8
> 
> 时间：2014-11-27T10:09:17.383

它应该很简单

```
DateTime.Today 
```

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2017-03-14T08:22:38.347

这应该有效：

```
string datetime = DateTime.Today.ToString(); 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2021-05-20T22:57:05.137

您可以在没有时间的情况下获取当前的 UTC 日期。

`string currentDate = DateTime.UtcNow.ToString("yyyy-MM-dd");`

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2015-10-07T10:53:11.057

正如已经给出的几个答案中所述，您可以使用`ToShorDateString()`：

```
DateTime.Now.ToShortDateString(); 
```

但是，如果您还想使用区域性作为参数，您可能会有点受阻。在这种情况下，您可以使用以下格式的`ToString()`方法：`"d"`

```
DateTime.Now.ToString("d", CultureInfo.GetCultureInfo("en-US")) 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2015-10-20T15:52:36.757

试试这个：

```
 var mydtn = DateTime.Today;
   var myDt = mydtn.Date;return myDt.ToString("d", CultureInfo.GetCultureInfo("en-US")); 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2012-11-01T14:10:22.830

如果您需要确切的示例，则应将格式添加到 ToString()

```
 string test = DateTime.ParseExact(DateTime.Now.ToString("dd.MM.yyyy"), "dd.MM.yyyy", CultureInfo.InvariantCulture).ToString("yyyy-MM-dd"); 
```

但最好使用直接格式：

```
 string test = DateTime.Now.ToString("yyyy-MM-dd") 
```

# sql - 如何将错误消息作为选择语句 SQL Server 2008 返回？

> ID：13178758
> 
> 赞同：1
> 
> 时间：2012-11-01T14:05:46.357
> 
> 标签：sql, sql-server, visual-studio-2010, visual-studio

在 SQL SERVER 2008 中，我如何将错误消息作为选择语句返回

*像*

```
SELECT ** FROM emp 
```

*将返回以下错误*

```
 Msg 102, Level 15, State 1, Line 1
    Incorrect syntax near '*'. 
```

我只需要将第二行作为`SELECT`语句返回

我试过@@ERROR，但看起来它只返回错误代码

我正在做的是从客户端验证 sql 语句，所以如果有一种方法可以在不访问服务器的情况下做到这一点，这也很好，我正在使用 VB

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-01T14:11:44.280

你确实看到了`Incorrect syntax near '*'.`，不是吗？这意味着**它被退回了**！

您可能想知道如何检索错误消息文本，答案是您只能捕获*执行*期间发生的错误（语法错误是编译，不能在同一批次中捕获）并且您必须使用 BEGIN ... TRY/ BEGIN ... CATCH 块。在 catch 块内，该[`ERROR_MESSAGE()`](http://msdn.microsoft.com/en-us/library/ms190358.aspx)函数将返回捕获的异常的文本。

因此，为了给您的案例提供一个示例，请将代码包装在 BEGIN TRY/BEGIN CATCH 中，并在不同的批次中使用不正确的语法：

```
begin try
    exec sp_executesql N'SELECT ** FROM emp';
    SELECT NULL;
end try
begin catch
    select ERROR_MESSAGE();
end catch 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-01T14:09:47.207

您可以使用`error_message()`

但你的错误看起来像编译错误，所以它不会帮助你。只有使用动态 SQL 才能捕获它 :) 只是为了测试它

```
begin try
    exec sp_executesql
        @stmt = N'SELECT ** FROM emp'
end try
begin catch
    select error_message()
end catch 
```

你也可以看看`error_procedure()`, `error_line()`,`error_state()`等等

**更新**如果您尝试在客户端处理服务器错误，我建议您阅读有关 VB 异常的更多信息。试试这个链接[http://msdn.microsoft.com/en-us/library/aa289505(v=vs.71).aspx](http://msdn.microsoft.com/en-us/library/aa289505(v=vs.71).aspx)

# shopify - 无法在 Shopify 中创建指向页面的链接

> ID：13178760
> 
> 赞同：5
> 
> 时间：2012-11-01T14:05:59.820
> 
> 标签：shopify, liquid

我正在尝试创建一个链接（在代码段内），该链接将链接到任何给定的页面，但我不知道该怎么做。我正在使用这个一般结构：

```
{{ 'Link Text' | link_to: X }} 
```

我不知道 x 的参数应该是什么才能访问我网站上的页面/产品。感谢任何帮助。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-11-01T14:10:27.947

来自：[http ://wiki.shopify.com/Link_to](http://wiki.shopify.com/Link_to)

```
{{ 'Typo' | link_to: 'http://typo.leetsoft.com' }} 
```

这应该会创建一个如下所示的链接：

```
<a href="http://typo.leetsoft.com">Typo</a> 
```

有关液体链接的更多信息：http: [//wiki.shopify.com/Link](http://wiki.shopify.com/Link)

**更新 1：** 您还应该能够使用相对链接：

```
{{ 'Typo' | link_to: 'pages/home' }} <!-- relative to current page -->
{{ 'Typo' | link_to: '/pages/home' }} <!-- relative to site root -->
{{ 'Typo' | link_to: '../pages/home' }} <!-- relative to parent dir --> 
```

**更新 2：** 更好的是，您可以参考页面的句柄：**{{ 'Title' | pages.pagehandle.url }}**

*   [http://wiki.shopify.com/Pages](http://wiki.shopify.com/Pages)
*   [http://wiki.shopify.com/Page](http://wiki.shopify.com/Page)

# sdk - tfs addWorkItemSaveListener 没有收到事件

> ID：13178765
> 
> 赞同：0
> 
> 时间：2012-11-01T14:06:18.850
> 
> 标签：sdk, tfs

我正在添加一个 TFS WorkItemSaveListener 但在保存工作项时没有收到任何事件。

```
public static void main(String[] args) {
        // Connecting to Project
        final TFSTeamProjectCollection collection = ConsoleSettings.connectToTFS();

        // Creating an object of listener
        WorkItemSaveListenerImpl listener = new WorkItemSaveListenerImpl();

        //Adding the listener
        collection.getWorkItemClient().getEventEngine().addWorkItemSaveListener(listener);

        for(;;) {
            // keeping the program alive
            try {

                Thread.sleep(10000);
            }
            catch (InterruptedException exception) {
                // TODO Auto-generated catch block
                exception.printStackTrace();
            }
        } 

    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T17:54:06.140

因为我不知道java sdk，所以只是在这里猜测。但是，addWorkItemSaveListener 事件是否可能仅针对由该特定工作项客户端更改的工作项触发？

你可能需要设置一个soap订阅，或者写一个服务器插件。

**C# 设置一个肥皂订阅**

对不起，这是错误的事件，但它可能足以给你一个想法。

```
TfsTeamProjectCollection tpc = TfsTeamProjectCollectionFactory.GetTeamProjectCollection(new Uri(txtServerUrl.Text));
tpc.EnsureAuthenticated();
IEventService eventSrv = tpc.GetService(typeof(IEventService)) as IEventService;
DeliveryPreference delPref = new DeliveryPreference();
delPref.Address = "http://" + System.Environment.MachineName + ":8001/CheckInNotify";
delPref.Schedule = DeliverySchedule.Immediate;
delPref.Type = DeliveryType.Soap;
subscriptionId = eventSrv.SubscribeEvent(System.Environment.UserDomainName + "\\" +     System.Environment.UserName, "CheckInNotify", "", delPref); 
```

# php - Seostats 脚本

> ID：13178769
> 
> 赞同：0
> 
> 时间：2012-11-01T14:06:25.637
> 
> 标签：php, scripting

```
 <?php include '../src/class.seostats.php';

try 
{
        $url = new SEOstats($_GET['url']);
        $url->print_array('Google','json');

} 
catch (SEOstatsException $e) 
{
        die($e->getMessage());
}
?> 
```

[http://code.google.com/p/seostats/](http://code.google.com/p/seostats/)

我想运行这个但是：

```
 $url = new SEOstats($_GET['url']); 
```

错误是例如**['url']** ['mywebpage.com'] 或 ["mywebpage.com"] 错误在两个版本中经常出现在第一行中，我有 'home/myuser/public_html/class.seostats.php'；有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-02T08:37:27.207

我是 SEOstats 包的作者，强烈建议**不要**使用 code.google.com 上的参考。如项目起始页所述，您应该改用 Github 页面。

我的第二个建议是您应该使用 dev 分支代码（实际上是稳定的 - 但尚未如此声明）：[https ://github.com/eyecatchup/SEOstats/tree/dev](https://github.com/eyecatchup/SEOstats/tree/dev)

最后：让我做对了：您是否尝试将 SEOstats 实例初始化为

`$url = new SEOstats($_GET['url']['mywebpage.com']);`?

这至少是你的问题所暗示的。如果是这种情况，您最好从这里开始：http: [//php.net/manual/en/reserved.variables.get.php](http://php.net/manual/en/reserved.variables.get.php)以了解 SEOstats 的示例代码。

# c# - 将用户控制按钮设为默认按 Enter 键

> ID：13178772
> 
> 赞同：0
> 
> 时间：2012-11-01T14:06:27.597
> 
> 标签：c#, asp.net, .net, user-controls

> **可能重复：**
> [无法在用户控件上设置 DefaultButton](https://stackoverflow.com/questions/7325024/cannot-set-a-defaultbutton-on-a-usercontrol)

我想在按 Enter 键时将用户控制按钮设为默认值。我有一个安装了用户控件的`Default.aspx`页面。`Login.ascx`在 Enter 键按下时，我希望按下提交按钮`Login.ascx`。

请帮忙

TIA

# vb.net - VB.net 字典循环

> ID：13178773
> 
> 赞同：1
> 
> 时间：2012-11-01T14:06:28.637
> 
> 标签：vb.net, dictionary

嘿，我需要一些帮助来遍历我的字典列表。为此，我似乎找不到正确的语法。

这是我的代码：

```
Dim all = New Dictionary(Of String, Object)()
Dim info = New Dictionary(Of String, Object)()
Dim theShows As String = String.Empty

info!Logo = channel.SelectSingleNode(".//img").Attributes("src").Value
info!Channel = .SelectSingleNode("channel.//span[@class='channel']").ChildNodes(1).ChildNodes(0).InnerText
info!Station = .SelectSingleNode("channel.//span[@class='channel']").ChildNodes(1).ChildNodes(2).InnerText
info!Shows = From tag In channel.SelectNodes(".//a[@class='thickbox']")
            Select New With {channel.Show = tag.Attributes("title").Value, channel.Link = tag.Attributes("href").Value}

all.Add(info!Station, info.Item("Shows"))

theShows = all.Item("Shows")  '<--Doesnt work... 
```

我只想从**所有**字典中**提取****“节目”**中的任何内容。

 **![在此处输入图像描述](../Images/eebc9c98c6e0c6419162224d74845f7a.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T14:30:16.323

你的代码，

```
all.Add(info!Station, info.Item("Shows"))

theShows = all.Item("Shows") 
```

的值`info!Station`被用作`all`字典中的 KEY 值。然后您尝试使用常量 string 访问该值`"Shows"`。我不确定你的意图是什么但是

```
theShows = all.Item(info!Station) 
```

应该返回`Shows`使用 Key 存储的值`info!Station`。

如果你想将节目列表作为一个字符串，你可以这样做，

```
Dim Shows as String = ""
For Each item in theShows
    Shows &= item.Show & vbNewLine
Next 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-02-17T07:23:43.290

你可以像这样循环

```
For Each pair As KeyValuePair(Of String, String) In dict

    MsgBox(pair.Key & "  -  " & pair.Value)
Next 
```

来源：[VB.Net 字典](http://vb.net-informations.com/collections/dictionary.htm)

温斯顿**

# eclipse - 在 Scala IDE 中运行 Scala 应用程序并出现编译错误

> ID：13178776
> 
> 赞同：7
> 
> 时间：2012-11-01T14:06:45.167
> 
> 标签：eclipse, scala, scala-ide

如果项目中有（不相关的！）编译错误，有没有办法在 Scala IDE 2.0.2 (Eclipse 3.7) 中运行 Scala 应用程序或单元测试？

在 Java 中，这没问题，但 Scala IDE 一直告诉我：

> 项目包含编译错误（因此，没有生成二进制文件）。

我想做的只是在主要重构过程中运行一个小测试，但我现在无法修复所有编译错误。而且我不想开始评论，因为那些编译错误很好地提醒了仍然需要完成的任务。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-01T14:50:21.703

目前 Scala IDE 不支持这种行为，但如果可以的话就更好了。

为了意识到这一点，我创建了[一张票](https://scala-ide-portfolio.assembla.com/spaces/scala-ide/tickets/1001305)：

> 尽管源代码中存在编译问题，JDT 仍允许执行 Java 代码。JDT 在内部用异常替换有缺陷的代码，如果相关代码被执行，则抛出异常。但是，如果在执行期间从未调用有缺陷的代码，则不会发生任何不良情况。如果 SDT 支持类似的行为，那就太好了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-01T14:17:16.660

如果您使用的是 Scala 2.10，一个不错的选择是使用新引入的`???`符号。这样，即使该功能尚未实现，您的代码也将编译。

当然有更好的方法，但这仍然比注释代码更好。

正如 Jesper 所建议的，`???`如果您使用的是以前版本的 Scala，您仍然可以实现：

```
def ??? : Nothing = throw new Error("Not implemented") 
```

# php - 同步播放两个嵌入的 youtube 视频

> ID：13178780
> 
> 赞同：1
> 
> 时间：2012-11-01T14:06:51.060
> 
> 标签：php, javascript, video, youtube

我想在网页上添加两个嵌入的 youtube 视频：一个带有歌曲剪辑（左），另一个带有歌词或翻译（右）。RIGHT 视频是我制作的，所以如果我在两个窗口中离线播放它们，歌词会与剪辑同步。然后将视频上传到 youtube。

问题是：我怎样才能在线“加入”这两个视频，所以用户只有一个播放/暂停按钮，如果他跳到例如 0:12 - 两个视频都跳到 0:12。那可能吗？

正如有人建议的那样，我不能制作一个同时包含剪辑和歌词的视频。带有歌词的 RIGHT 视频可以是不同的语言，而歌曲剪辑是相同的。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-04T11:59:27.920

**截至目前，答案不完整。在构建所描述的插件时完成。**

您可以使用[Acorn](https://acorn.athena.ai/)构建它，这是一个媒体混音 javascript 库。

执行此操作的功能（并排视频）还没有开箱即用（我已在[acorn-player存储库中添加](https://github.com/athenalabs/acorn-player)[了一个问题](https://github.com/athenalabs/acorn-player/issues/112)）。

所有需要做的就是构建一个`shell`（`acorn-player`插件）并排嵌入两个媒体，并让 acorn 完成 youtube api 播放同步繁重的工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T14:10:29.973

你可以用 xuggler 做到这一点。[http://www.xuggle.com/xuggler/](http://www.xuggle.com/xuggler/)

您将需要服务器上的一些位来完成工作并流式传输结果。

假设您在请求时拥有所有可用的视频，Xuggler 的速度非常快。如果您被迫从 YouTube 下载它们，然后将它们组合起来，它可能会变得更令人兴奋。

# java - spring mvc + tile 出现 404 错误，但没有控制台错误

> ID：13178781
> 
> 赞同：0
> 
> 时间：2012-11-01T14:06:51.567
> 
> 标签：java, spring-mvc, tiles

我是 Spring 新手，一直在关注[http://viralpatel.net](http://viralpatel.net)上的教程，目前[Spring 3 MVC 存在问题：Tiles Plugin Tutorial](http://viralpatel.net/blogs/spring-3-mvc-tiles-plugin-tutorial-example-eclipse/)

我已经在 google 和 stackoverflow 上搜索了一个解决方案，如果这是重复的，我找不到一个如此 appoligies 的解决方案。

当我尝试运行上述教程中的代码时，我基本上在浏览器中收到以下 404 错误

```
HTTP Status 404 - /Spring3MVC/WEB-INF/jsp/layout.jsp 
```

但我没有得到控制台错误：

```
 01-Nov-2012 13:37:32 org.apache.catalina.core.AprLifecycleListener init
INFO: The APR based Apache Tomcat Native library which allows optimal performance in production environments was not found on the java.library.path: C
:\Program Files\Java\jre1.6.0.33\bin;C:\Windows\Sun\Java\bin;C:\Windows\system32;C:\Windows;C:\oraclexe\app\oracle\product\11.2.0\server\bin;;C:\Windo
ws\system32;C:\Windows;C:\Windows\System32\Wbem;C:\Windows\System32\WindowsPowerShell\v1.0\;C:\Program Files\Intel\WiFi\bin\;C:\Program Files\Common F
iles\Intel\WirelessCommon\;c:\Program Files (x86)\Microsoft SQL Server\100\Tools\Binn\;c:\Program Files\Microsoft SQL Server\100\Tools\Binn\;c:\Progra
m Files\Microsoft SQL Server\100\DTS\Binn\;C:\Program Files (x86)\Enterprise Vault\EVClient\;C:\Program Files (x86)\Microsoft Office 2010\Office14;C:\
Program Files (x86)\QuickTime\QTSystem\;C:\Python27\;C:\Python27\Tools\Scripts\;C:\Program Files\Java\jre1.6.0.33\bin;C:\Program Files\maven-2.2.1\bin
;.
01-Nov-2012 13:37:32 org.apache.tomcat.util.digester.SetPropertiesRule begin
WARNING: [SetPropertiesRule]{Server/Service/Engine/Host/Context} Setting property 'source' to 'org.eclipse.jst.jee.server:Spring3MVC' did not find a m
atching property.
01-Nov-2012 13:37:32 org.apache.coyote.http11.Http11Protocol init
INFO: Initializing Coyote HTTP/1.1 on http-8080
01-Nov-2012 13:37:32 org.apache.catalina.startup.Catalina load
INFO: Initialization processed in 533 ms
01-Nov-2012 13:37:32 org.apache.catalina.core.StandardService start
INFO: Starting service Catalina
01-Nov-2012 13:37:32 org.apache.catalina.core.StandardEngine start
INFO: Starting Servlet Engine: Apache Tomcat/6.0.36
log4j:WARN No appenders could be found for logger (org.springframework.web.context.support.StandardServletEnvironment).
log4j:WARN Please initialize the log4j system properly.
log4j:WARN See http://logging.apache.org/log4j/1.2/faq.html#noconfig for more info.
01-Nov-2012 13:37:33 org.apache.catalina.core.ApplicationContext log
INFO: Initializing Spring FrameworkServlet 'spring'
01-Nov-2012 13:37:33 org.apache.coyote.http11.Http11Protocol start
INFO: Starting Coyote HTTP/1.1 on http-8080
01-Nov-2012 13:37:33 org.apache.jk.common.ChannelSocket init
INFO: JK: ajp13 listening on /0.0.0.0:8009
01-Nov-2012 13:37:33 org.apache.jk.server.JkMain start
INFO: Jk running ID=0 time=0/27  config=null
01-Nov-2012 13:37:33 org.apache.catalina.startup.Catalina start
INFO: Server startup in 1637 ms 
```

这是我的 web.xml 文件：

```
 <?xml version="1.0" encoding="UTF-8"?>
    <web-app xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
        xmlns="http://java.sun.com/xml/ns/javaee"
        xmlns:web="http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd"
        xsi:schemaLocation="http://java.sun.com/xml/ns/javaee 
http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd"
        id="WebApp_ID" version="2.5">
        <display-name>Spring3MVC</display-name>
        <welcome-file-list>
            <welcome-file>index.jsp</welcome-file>
        </welcome-file-list>

        <servlet>
            <servlet-name>spring</servlet-name>
            <servlet-class>
                org.springframework.web.servlet.DispatcherServlet
            </servlet-class>
            <load-on-startup>1</load-on-startup>
        </servlet>
        <servlet-mapping>
            <servlet-name>spring</servlet-name>
            <url-pattern>*.html</url-pattern>
        </servlet-mapping>
    </web-app> 
```

这是我的 spring-servlet.xml 文件：

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns:p="http://www.springframework.org/schema/p"
    xmlns:context="http://www.springframework.org/schema/context"
    xsi:schemaLocation="http://www.springframework.org/schema/beans
        http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
        http://www.springframework.org/schema/context
        http://www.springframework.org/schema/context/spring-context-3.0.xsd">

    <context:component-scan
        base-package="net.viralpatel.spring3.controller" />

    <bean id="viewResolver"
        class="org.springframework.web.servlet.view.UrlBasedViewResolver">
        <property name="viewClass">
            <value>
                org.springframework.web.servlet.view.tiles2.TilesView
            </value>
        </property>
    </bean>
    <bean id="tilesConfigurer"
        class="org.springframework.web.servlet.view.tiles2.TilesConfigurer">
        <property name="definitions">
            <list>
                <value>/WEB-INF/tiles.xml</value>
            </list>
        </property>
    </bean>
</beans> 
```

这是我的tiles.xml：

```
<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE tiles-definitions PUBLIC
       "-//Apache Software Foundation//DTD Tiles Configuration 2.0//EN"
       "http://tiles.apache.org/dtds/tiles-config_2_0.dtd">
<tiles-definitions>
    <definition name="base.definition"
        template="/WEB-INF/jsp/layout.jsp">
        <put-attribute name="title" value="" />
        <put-attribute name="header" value="/WEB-INF/jsp/header.jsp" />
        <put-attribute name="menu" value="/WEB-INF/jsp/menu.jsp" />
        <put-attribute name="body" value="" />
        <put-attribute name="footer" value="/WEB-INF/jsp/footer.jsp" />
    </definition>

    <definition name="contact" extends="base.definition">
        <put-attribute name="title" value="Contact Manager" />
        <put-attribute name="body" value="/WEB-INF/jsp/contact.jsp" />
    </definition>
</tiles-definitions> 
```

其余代码是上面教程的精确副本，它建立在[处理表单教程](http://viralpatel.net/blogs/spring-3-mvc-handling-forms/)的基础上，我似乎已经完美地工作了。下面是 Eclipse 中项目的屏幕截图，包括 jar，以防有人认为这可能是缺少或错误 jar 的问题

![日食项目](../Images/873431c00e3fa2e63ee27b1c8b58ebcd.png)

任何帮助/建议/指针将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T14:17:47.970

这可能是问题

在您的 tiles.xml 中，layout.jsp URL 是

```
/WEB-INF/jsp/layout.jsp 
```

你的jsp文件夹是

```
WebContent/jsp/ 
```

# delphi - 夏令时的 GetDateFileModified

> ID：13178785
> 
> 赞同：1
> 
> 时间：2012-11-01T14:07:07.817
> 
> 标签：delphi, delphi-2010

```
function DateTimeToFileTime(FileTime: TDateTime): TFileTime;
var
  LocalFileTime, Ft: TFileTime;
  SystemTime: TSystemTime;
begin
  Result.dwLowDateTime := 0;
  Result.dwHighDateTime := 0;
  DateTimeToSystemTime(FileTime, SystemTime);
  SystemTimeToFileTime(SystemTime, LocalFileTime);
  LocalFileTimeToFileTime(LocalFileTime, Ft);
  Result := Ft;
end;

function ExtractShortDate(ATimeIn: TDateTime): string;
// Convert DateTime to short date string
begin
  Result := FormatDateTime('mm/dd/yyyy', ATimeIn);
end;

function ExtractTime(ATimeIn: TDateTime): string;
// Convert DateTime to am/pm time string
begin
  Result := FormatDateTime('hh:mm AM/PM', ATimeIn);
end;

function GetDateFileModified(AFileName: string): string;
// Return the file modified date as a string in local time
var
  SR: TSearchRec;
  UTCTime: Windows.TFileTime;
  GMTST: Windows.TSystemTime;
  LocalST: Windows.TSystemTime;
  ModifyDT: TDateTime;
  TZ: Windows._TIME_ZONE_INFORMATION;
begin
  Result := '';
  if FindFirst(AFileName, faAnyFile, SR) = 0 then
  begin
    UTCTime := SR.FindData.ftLastWriteTime;
    if FileTimeToSystemTime(UTCTime, GMTST) then
    begin
       // Get Timezone Information
      if GetTimeZoneInformation(TZ) <> 0 then
        if SystemTimeToTzSpecificLocalTime(@TZ, GMTST, LocalST) then
        begin
          ModifyDT := SystemTimeToDateTime(LocalST);
          Result := ExtractShortDate(ModifyDT) + ' ' + ExtractTime(ModifyDT);
        end
        else
        begin
          TaskMessageDlg('Unable To Convert Time', 'Unable to convert SystemTime To LocalTime',
            mtInformation, [mbOk], 0);
          Result := '';
          exit;
        end;
    end
    else
    begin
      TaskMessageDlg('Unable To Convert Time', 'Unable to convert FileTime To SystemTime',
        mtInformation, [mbOk], 0);
      Result := '';
      exit;
    end;
  end
  else
    TaskMessageDlg('File Not Found', ExtractFileName(AFileName) + ' does not exist.',
      mtInformation, [mbOk], 0);
  FindClose(SR);
end; 
```

发布的原始代码没有返回正确的时间。原始代码已替换为工作代码，以便其他人可能会发现这很有用。

**更新**：感谢所有帮助，代码现在提供了正确的时间。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-01T16:07:13.863

FileTimeToLocalFileTime 的 MSDN 文档中突出显示了该问题：

> FileTimeToLocalFileTime 使用时区和夏令时的当前设置。因此，如果是夏令时，此功能将考虑夏令时，即使您转换的时间是标准时间。您可以使用以下函数序列作为替代方案。
> 
> FileTimeToSystemTime / SystemTimeToTzSpecificLocalTime / SystemTimeToFileTime

在更改之前创建的夏令时更改之后查看文件时，您需要使用指定的三个函数（但是当您和文件创建都在夏令时更改的同一侧时，此方法当然也适用）。

# java - 将 PNG 加载为字符串并保存会损坏它

> ID：13178787
> 
> 赞同：0
> 
> 时间：2012-11-01T14:07:18.463
> 
> 标签：java, load, png

我有一个程序，我必须将 PNG 作为字符串加载，然后再次保存，但保存后它变得不可读。如果我在编辑器中打开加载的 PNG 和保存的字符串，我可以看到 java 在整个文件中创建了换行符。如果这是问题所在，我该如何避免这种情况？

```
 public static void main(String[] args)
    {
        try
        {
            File file1 = new File("C://andim//testFile.png");
            StringBuffer content = new StringBuffer();
            BufferedReader reader = null;
            reader = new BufferedReader(new FileReader(file1));
            String s = null;         
            while ((s = reader.readLine()) != null) 
            {
                content.append(s).append(System.getProperty("line.separator"));                      
            }
            reader.close();
            String loaded=content.toString();
            File file2=new File("C://andim//testString.png");
            FileWriter filewriter = new FileWriter(file2);
            filewriter.write(loaded);           
            filewriter.flush();
            filewriter.close();
        }
        catch(Exception exception)
        {
            exception.printStackTrace();
        }

    } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-01T14:08:48.720

> 我有一个程序，我必须将 PNG 作为字符串加载，然后再次保存，但保存后它变得不可读。

是的，我并不感到惊讶。您将任意二进制数据视为文本数据（无论您的平台默认编码是什么，都可以启动）。它不是。不要那样做。在某些编码中，您可能会逃脱它 - 直到您开始尝试以剥离不可打印字符等的方式将字符串传递到其他地方。

如果*必须*将任意二进制数据转换为文本，请使用 base64 或 hex。如果可能，请避免首先转换为文本。如果您只想复制文件，请*使用*`InputStream`and `OutputStream`-not and . *`Reader``Writer`*

 *这是一个重要的普遍观点：尽可能长时间地将数据保持在其“本机”表示中。仅在绝对必要时将数据转换为不同的表示形式，并且要非常小心。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-01T14:08:48.430

不要使用基于文本的 API 来读取二进制文件。在这种情况下，您不想要 a `BufferedReader`，当然也不想要`readLine`，这可能不仅仅是将一件事视为行分隔符。使用[`InputStream`](http://docs.oracle.com/javase/7/docs/api/java/io/InputStream.html)（例如，[`FileInputStream`](http://docs.oracle.com/javase/7/docs/api/java/io/FileInputStream.html)）和[`OutputStream`](http://docs.oracle.com/javase/7/docs/api/java/io/OutputStream.html)（例如，[`FileOutputStream`](http://docs.oracle.com/javase/7/docs/api/java/io/FileOutputStream.html)），而不是读取器和写入器。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-01T14:09:08.447

## 不要那样做

PNG 不是文本数据。
如果您尝试将任意字节读入字符串，Java 会将这些字节转换为实际文本，从而破坏您读取的数据。

您需要使用`byte[]`sm 而不是`string`s。*

# php - php ftp_connect 失败，FTP 客户端连接

> ID：13178790
> 
> 赞同：0
> 
> 时间：2012-11-01T14:07:25.293
> 
> 标签：php, ftp

（这个问题可能不属于这里，但是关于ServerFault，我不知道问题到底出在哪里）

我正在尝试像这样连接到 FTP 服务器：

```
$con = ftp_connect( '86.xxx.xx.xxx', 21 ) or die("FTP connect error"); 
```

它总是向我抛出错误消息。

我可以像这样连接到其他 FTP 服务器，但不能连接到这个。我也可以通过 FTP 客户端连接到这个。

允许客户端连接但不允许 PHP 连接的哪些服务器设置可能是错误的？

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T17:27:00.377

我的主机似乎阻止了对其他服务器的远程 FTP 访问。奇怪的是，它允许我连接到该主机上的其他服务器。

# ios - UIDatePicker 类似于联系人应用程序中的一个，但没有年份日期选择

> ID：13178797
> 
> 赞同：3
> 
> 时间：2012-11-01T14:07:41.170
> 
> 标签：ios, uidatepicker

> **可能重复：**
> [有没有办法删除日期选择器的“年份”？](https://stackoverflow.com/questions/13169602/is-there-any-way-to-remove-the-year-of-the-date-picker)

我是 iOS 新手，想制作我的桌面生日应用程序的 iPhone 版本。要输入出生日期，用户有时只需要输入月份和日期，而不需要输入年份。联系人应用程序使用日期选择器执行此操作，该选择器的年份列在当前年份结束，然后用虚线输入没有年份的日期。我试过了：

```
datePicker.maximumDate = [NSDate date]; 
```

但这只是阻止用户输入超出当前日期的日期。我一直在查看日期选择器的许多示例，但没有办法做到这一点。我可以创建一个自定义`UIPickerView`并填充三列，`m/d/year`但不认为可以将其本地化为月份名称。

任何有关在日期选择器中选择“无年份”的建议将不胜感激。苹果是怎么做到的？

# javascript - 在 youtube 视频开始之前显示自定义图片

> ID：13178800
> 
> 赞同：7
> 
> 时间：2012-11-01T14:07:46.373
> 
> 标签：javascript, html, youtube-api, youtube-javascript-api

我正在尝试在“播放器” div 中显示图像，然后在访问者单击按钮后，将其替换为视频（将 div 替换为 iFrame）。这是我的代码：

```
<!DOCTYPE html> 
<head>
<style type="text/css">
html {
text-align: center;
}

#player {
display: inline-block;
width: 640px;
height: 360px;
background: url(http://placehold.it/640x360) no-repeat;
}
</style>
</head>
<html>
  <body>
    <!-- 1\. The <iframe> (and video player) will replace this <div> tag. -->
    <div id="player"></div>
    <p><button onclick="playMe()">Play</button></p>

    <script>
    function playMe() {
      // 2\. This code loads the IFrame Player API code asynchronously.
      var tag = document.createElement('script');
      tag.src = "https://www.youtube.com/iframe_api";
      var firstScriptTag = document.getElementsByTagName('script')[0];
      firstScriptTag.parentNode.insertBefore(tag, firstScriptTag);

      // 3\. This function creates an <iframe> (and YouTube player)
      //    after the API code downloads.
      var player;
      function onYouTubeIframeAPIReady() {
        player = new YT.Player('player', {
          height: '360',
          width: '640',
          videoId: 'JW5meKfy3fY',
          playerVars: { 'autoplay': 0, 'controls': 0, 'rel': 0, 'showinfo': 0 },
          events: {
            'onReady': onPlayerReady
          }
        });
      }

      // 4\. The API will call this function when the video player is ready.
      function onPlayerReady(event) {
        event.target.playVideo();
      }

    }

    </script>
  </body>
</html> 
```

但它不起作用。

它在“playMe”功能被删除时工作，但我需要在单击按钮/div/链接后开始播放视频。我尝试将图片和视频放在单独`div`的 s 中，图片在视频顶部，然后单击隐藏顶部 div 并开始播放视频，但这也不起作用。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-07T18:43:54.763

这是一个变量范围问题。

onYouTubeIframeAPIReady 函数需要是一个全局变量 - 就像 player 变量一样。

我相信这个示例应该作为您想要的基础（如果您在 api 下载之前单击按钮，则会出现竞争条件，但完整的实现可能是特定于应用程序的，所以我将把它留给读者）

```
 <!DOCTYPE html> 
<head>
<style type="text/css">
html {
text-align: center;
}

#player {
display: inline-block;
width: 640px;
height: 360px;
background: url(http://placehold.it/640x360) no-repeat;
}
</style>
</head>
<html>
  <body>
    <!-- 1\. The <iframe> (and video player) will replace this <div> tag. -->
    <div id="player"></div>
    <p><button onclick="playMe()">Play</button></p>

    <script>
    // 2\. This code loads the IFrame Player API code asynchronously.
    var tag = document.createElement('script');
    tag.src = "https://www.youtube.com/iframe_api";
    var firstScriptTag = document.getElementsByTagName('script')[0];
    firstScriptTag.parentNode.insertBefore(tag, firstScriptTag);

    // 3\. called after the API code downloads.
    var player;
    function onYouTubeIframeAPIReady() {
        // don't need anything here
    }

    // 4\. The API will call this function when the video player is ready.
    function onPlayerReady(event) {
        event.target.playVideo();
    }

    function playMe() {
        if (window.YT) {
            player = new YT.Player('player', {
                        height: '360',
                        width: '640',
                        videoId: 'JW5meKfy3fY',
                        playerVars: { 'autoplay': 0, 'controls': 0, 'rel': 0, 'showinfo': 0 },
                        events: {
                            'onReady': onPlayerReady
                        }
                    });
        }
    }
    </script>
  </body>
</html> 
```

# zurb-foundation - 使用 ZURB Foundation CSS 框架创建页脚

> ID：13178801
> 
> 赞同：17
> 
> 时间：2012-11-01T14:07:55.927
> 
> 标签：zurb-foundation

我正在使用 ZURB 基础 CSS 框架来设计一个网站。目前我正在尝试创建一个将留在页面底部的页脚。我有以下页脚代码，但它不会到底部，而是显示在中间。

你能告诉我如何创建一个将留在底部的页脚（使用 ZURB 基础框架）吗？

```
<div class="row">
    <div class="twelve columns" style="background-color:#000000; height:30px; bottom:0;"></div>
</div> 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-11-29T07:28:20.817

简单的！Zurb Foundation 本身是基于 Compass 的。所以你可以使用'Compass Sticky Footer' mixin。

[http://compass-style.org/reference/compass/layout/sticky_footer/](http://compass-style.org/reference/compass/layout/sticky_footer/)

这里有一个如何做到这一点的例子：http: [//compass-style.org/examples/compass/layout/sticky-footer/](http://compass-style.org/examples/compass/layout/sticky-footer/)

但你只是去：

```
<div class='example'>
  <div id='layout'>
    <div id='header'>
      <h1>Sticky Footer Example</h1>
    </div>
    <p>
      This is the main content area.
    </p>
    <p>
      In this example you should pretend that the red box
      is actually the browser window.
    </p>
    <p>
      Because, being a contrived example, it's not actually sticking
      to the bottom of the page.
    </p>
    <div id='layout_footer'></div>
  </div>
  <div id='footer'>
    This is the footer area.
  </div>
</div> 
```

在你的 SCSS

```
@import "compass/reset.scss";
@import "compass/layout.scss";

@include sticky-footer(72px, "#layout", "#layout_footer", "#footer");

#header {
  background: #999999;
  height: 72px; }

#footer {
  background: #cccccc; }

.example {
  height: 500px;
  border: 3px solid red;
  p {
    margin: 1em 0.5em; } } 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-11-04T01:01:24.913

我会创建两种不同的页脚——一种用于台式机和平板电脑——另一种用于手机。

使用 Zurb 的“*显示*和*隐藏*选项”很容易做到。您可以让两个页脚都使用任何图形，因此任何“下载损失”都很小。

要为您的网站创建粘性页脚，您必须向 Zurb 添加一些 CSS。（您可以将其添加到 app.css 文件中，该文件是 Zurb 的额外 CSS 存储库）

Brad Frost 的文章（由 Ed Charbeneau 发表）也是一本很棒的读物——我以前从未见过。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2014-01-16T07:42:11.367

**HTML：**

```
<div id="footer">
        My Awsome Footer 2014
</div> 
```

**CSS**

```
#footer{
    height: 50px;
    position: fixed;
    bottom: 0px;
    left: 0px;
    line-height: 50px;
    color: #aaa;
    text-align: center;
    width: 100%;
} 
```

工作小提琴：http: [//jsfiddle.net/AunmM/](http://jsfiddle.net/AunmM/)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-01-22T19:25:30.650

查看这个简单的粘性页脚作为基础，不需要#wrapper 或固定高度！也适用于移动设备。[http://tangerineindustries.com/download/sticky_footer/](http://tangerineindustries.com/download/sticky_footer/)

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-10-24T22:07:58.743

作为参考，以下是我使用 Foundation 4.0 完成此操作的方法。

给定一个`<footer>`标签。

```
footer {
  @include panel($panel-color, $panel-padding);
  width: 100%;
  margin: 0;
  position: fixed;
  bottom: 0;
} 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2016-01-03T02:48:27.757

使用**foundation 6**，指南针导入不可能开箱即用。并且很难找到解决方法。

良好的解决方案与基础可以成为这个小帮手： [http ://tangerineindustries.com/download/sticky_footer/](http://tangerineindustries.com/download/sticky_footer/)

**临：**

1.  开发人员创建它是为了与 ZF 6 一起使用。
2.  你只需要一个`<footer>`标签。
3.  适用于响应式页脚的灵活高度，即使调整窗口大小也是如此。
4.  您不需要任何额外的#wrapper、#pusher、#footer 任何html 元素。
5.  你不需要任何额外的 CSS。

**反对：**

1.  使用 JavaScript。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-11-02T12:59:07.417

您要做的是创建一个“粘滞页脚”或“固定位置页脚”。这是独立于 Foundation 的东西，通常是 CSS 的功能。

我建议阅读 Brad Frost 的这篇文章。它确定了创建固定位置元素所涉及的基本 CSS 以及由此产生的兼容性问题。 [http://bradfrostweb.com/blog/mobile/fixed-position/](http://bradfrostweb.com/blog/mobile/fixed-position/)

# iphone - MFMailComposeViewController - 将取消和发送按钮更改为图像

> ID：13178802
> 
> 赞同：2
> 
> 时间：2012-11-01T14:08:01.903
> 
> 标签：iphone, ios, button, mfmailcomposeviewcontroller

我想自定义 MFMailComposeViewController 使其具有我的自定义图像/按钮，而不是默认的“取消”和“发送”按钮。我尝试在谷歌上搜索答案，但找不到任何可以帮助我的东西。

非常感谢任何帮助。提前致谢..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T18:59:16.853

您不能更改 MFMailComposeViewController。引用[文档](http://developer.apple.com/library/ios/#documentation/MessageUI/Reference/MFMailComposeViewController_class/Reference/Reference.html)：

> **重要提示：**邮件撰写界面本身不可定制，并且不得由您的应用程序修改。

# iphone - 最好的地方在哪里... [iPhone]

> ID：13178803
> 
> 赞同：0
> 
> 时间：2012-11-01T14:08:14.460
> 
> 标签：iphone, objective-c, instantiation, viewdidload

在 UIViewControllers 我有几种方法，例如**viewDidLoad**、**viewWillAppear**、**viewDidAppear**等。问题是：“例如，设置视图的背景颜色、实例化和设置 UILabel 的背景颜色的最佳位置是什么，或实例化我在课堂上设置为@property 的对象之类的东西？”

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T14:12:44.163

一次问了这么多问题！

第一次加载视图时，`viewDidLoad`您已经可以访问所有易于初始化的 UI 元素，因此这是配置视图和设置类属性的好地方。

如果您在视图已加载的情况下返回该视图（例如，通过从导航控制器弹出视图或关闭模式视图控制器），`viewDidLoad`将不会被调用。因此，如果您想根据自视图控制器初始化后可能发生的事情来更改某些内容（背景、添加标签、更改标签的背景等），则必须使用`viewWillAppear`.

如果要对更改进行动画处理，则可以使用`viewDidAppear`，以便用户可以在视图已经可见后看到它。

编辑：这与您使用 IB 或情节提要有关。对于您在代码中创建视图的情况，请参阅 CitronEvanescent 的答案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T14:13:22.123

如果您正在以编程方式创建视图，则可以在此方法上设置属性，`- (void) loadView`该方法将在显示任何内容之前调用一次。

一般来说，我更喜欢在 中实例化 UI 元素`-(id) init`并在`loadView`.

更多详情：[查看施工参考](http://developer.apple.com/library/ios/#featuredarticles/ViewControllerPGforiPhoneOS/ViewLoadingandUnloading/ViewLoadingandUnloading.html#//apple_ref/doc/uid/TP40007457-CH10-SW1)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-01T14:15:01.527

可行的方法是`viewDidLoad`或类`-(id)init`的`-(id)initWithNibName` 构造函数。 `viewWillAppear`并且`viewDidAppear`应该避免，因为您不想一次又一次地实例化变量，因为每次视图出现时都会调用它们（来自 pop 或 tabSwitch）。如果您想在重新出现时更改某些变量值，这两种方法可能很有用

# java - 比较两个 REST 服务

> ID：13178810
> 
> 赞同：0
> 
> 时间：2012-11-01T14:08:34.217
> 
> 标签：java, unit-testing, rest, jersey, integration-testing

有没有人有任何关于编写比较两个 REST 服务的测试的技巧？我们这样做是作为回归测试的一种形式。

我希望按照以下方式做一些事情：

1.  向两个服务发送“/1”的 GET 并比较结果
2.  向两个服务发送 POST，并比较结果
3.  向两个服务发送 PUT，并比较结果

这个想法是：

*   每个操作都发送到两个服务
*   结果应该是相同的

REST 服务是用 Java/Jersey 编写的，因此使用它是理想的，但人们发现什么有用？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2018-11-06T08:55:04.447

由于这是一个与 java 没有严格关系的广泛的非编码问题，因此这里有一些相关链接：

*   twitter 开源 Diffy 服务器，比较主要、次要和候选端点：[https ://github.com/twitter/diffy](https://github.com/twitter/diffy)
*   一个类似的、更简单的 http 代理：[https ://github.com/xthexder/httptee](https://github.com/xthexder/httptee)
*   有人使用 JMeter 执行此操作： [https ://dzone.com/articles/the-easiest-way-to-compare-rest-api-responses-usin](https://dzone.com/articles/the-easiest-way-to-compare-rest-api-responses-usin)
*   使用 Postman 响应后挂钩比较请求的示例：[https ://documenter.getpostman.com/view/33232/difference-between-two-responses/2QsCkC](https://documenter.getpostman.com/view/33232/difference-between-two-responses/2QsCkC)
*   邮递员方法，但使用邮递员 CLI 客户端 newman：[https ://github.com/indeedeng-alpha/newman-reporter-diff](https://github.com/indeedeng-alpha/newman-reporter-diff)

任何人都可以随意编辑我的答案以添加更多替代方案来展示 API 响应比较

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-01T14:28:35.810

我将使用[jUnit](http://www.junit.org/)和 Jersey 源代码中的一些示例测试用例作为起点。在不知道具体如何确定“相同”响应的情况下，您可以向测试用例中的每个响应发出请求并遍历响应，将其转换为字符串并测试等。这是[来自 JAXB](http://java.net/projects/jersey/sources/svn/content/trunk/jersey/samples/json-from-jaxb/src/test/java/com/sun/jersey/samples/jsonfromjaxb/MainTest.java?rev=5805)`equals()`的 JSONP 示例[测试](http://java.net/projects/jersey/sources/svn/content/trunk/jersey/samples/json-from-jaxb/src/test/java/com/sun/jersey/samples/jsonfromjaxb/MainTest.java?rev=5805)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-01T14:34:32.580

编写 Junit 以从两个服务中获取响应对象。然后像往常一样在 Java 中对对象进行比较。

但是为什么你必须编写两个服务来做同样的事情并返回相同的结果呢？至少我假设响应对象架构在两个服务之间是不同的。

# java - Windows 调度程序与。Java 任务定时器

> ID：13178812
> 
> 赞同：0
> 
> 时间：2012-11-01T14:08:39.117
> 
> 标签：java, scheduled-tasks, scheduling

我在 Windows 机器中有一个 .bat 文件，它通过调用 Java 可执行文件（.Jar）的主类来启动我们的程序

现在我需要每 30 分钟运行一次。

我经历了几种方法，但无法决定哪种方法更好。

通过 Windows 调度程序或使用 Java 计时器进行调度。选择哪一个？我只想运行一个进程实例。如果前面的过程没有在 30 分钟内完成，我可以等待。

请根据我的用例告诉我要做什么。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T14:22:06.160

*TimerTask*不是一个调度系统，它是一个为应用内调度提供工具的库。似乎对于您的用例，您需要一个系统：无论您的应用程序是否正在运行，您需要报告等，您都需要它来运行。Windows 调度程序（或unix/linux 上的**cron**）更适合您的需求。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T14:21:27.630

您最好使用 Windows 调度程序。如果确实存在进程耗时过长的风险，您可以创建一个文件，或在进程运行时打开一个套接字，当另一个进程尝试启动时，它可以检测到并简单地退出。这将使它“错过” 30m 窗口（即，如果第一个作业在 12 点开始并在 12:35 完成，则下一个作业要到 1 点才会开始）。

但是这样一来，您就不必担心设置长时间运行的进程、启动和停止 java 服务等。Windows 调度程序只是让这样的事情变得更容易。

# vba - VBA 代码中的 Sql 查询 - 如何在 Sql 字符串后进行注释

> ID：13178817
> 
> 赞同：0
> 
> 时间：2012-11-01T14:08:51.473
> 
> 标签：vba, excel, worksheet

我在 VBA 代码中有一些 Sql 查询，这是一行代码的示例：

```
strQry = strQry & Worksheets("Data").Cells(9, 7) & """, " & _ 
```

我需要**在此行末尾**添加注释。像这样：

```
strQry = strQry & Worksheets("Data").Cells(9, 7) & """, " & _ 'comment hjjkk 
```

我通常使用撇号进行评论，但该行不接受该字符。请指教。另外，如果可能的话，我需要在该行的末尾添加评论。谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-01T14:14:21.033

这与 SQL 查询本身无关，您试图在续行后添加注释，这是不允许的。

来自[MSDN 文档的评论](http://msdn.microsoft.com/en-us/library/bx185bk6.aspx)：

> 注释不能跟在同一行的续行序列之后。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-01T14:15:30.593

使用换行符`_` ，您不能对该行进行评论，因为对于 VB，该行还没有停止（这是一项提高我们程序员可读性的功能）。习惯于在完整字符串之前或之后发表评论

或者，您可以分部分构建字符串，并在每个部分之后添加注释：

```
strQry = strQry & Worksheets("Data").Cells(9, 7) 'comment 1

strQry = strQry & ", " & <next part> 'comment2 
```

ETC...

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-01T14:15:11.807

行尾的下划线向 VB 表示代码在下一行继续。下划线后面不能放任何东西。如果您需要在行尾添加注释，则需要重组代码以结束该行，放置注释并在下一行继续字符串连接。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-11-01T14:15:01.440

如果您这样做`& _`，则意味着您在下一行获得了代码，并且该指令尚未完成。因此，如果您在之后`& _`立即输入评论，就像您在指令中间插入评论一样

例如：

```
 myVar = 3 + 5 & _ 'comment at the wrong place
          +2

   =

   myVar = 3 +5 'comment at the wrong place + 2 
```

所以你能做的就是

```
myVar = 3 + 5 'comment
myVar = myvar + 2 
```

或者在你的情况下它看起来像这样

```
strQry = strQry & Worksheets("Data").Cells(9, 7) & """, " 'Comment
strQry = styQry &... 
```

# c# - TimeSpan 将分钟添加到零小时

> ID：13178819
> 
> 赞同：-1
> 
> 时间：2012-11-01T14:09:05.827
> 
> 标签：c#, timespan

我在循环中添加时间跨度和间隔大小（假设一分钟），每当它到达 23:59 时，我正在尝试添加一分钟，它给我的结果是 1.00:00:00:00 类似这个。当它像 23:59:00 一样时，我怎样才能获得连续的添加间隔

```
00:00:00
00:01:00
00:02:00 
```

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-01T14:17:35.620

任何一个

*   显示时间跨度时，请忽略天数部分：

```
string toDisplay = yourTimeSpan.ToString("hh:mm:ss"); 
```

*   增加时间跨度后，如果是一天或更长时间，则减去一天：

```
if (yourTimeSpan.Days == 1)
  yourTimeSpan = yourTimeSpan.Subtract(TimeSpan.FromDays(1));

// or Wonko the Sane's improved version
if (yourTimeSpan.Days > 0) yourTimeSpan = new TimeSpan(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T14:22:36.573

每当您的 TimeSpan 超过一天时，它就会在 ToString() 中格式化自己，将这一天添加到返回的字符串中。您可以在累积一天后格式化 ToString() 或减去它。如果您希望 TimeSpan 不超过一天，请检查以下代码：

```
TimeSpan ts = new TimeSpan();
DateTime dt = new DateTime();
TimeSpan day = dt.AddDays(1) - dt;
TimeSpan minute = dt.AddMinutes(1) - dt;

for (int i = 0; i < 20000; i++)
{
     ts = ts.Add(minute);
     if (ts.TotalDays > 1)
     {
         ts = ts.Subtract(day);
     }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-01T14:16:07.430

我假设您仅使用标准 toString() 方法打印出 TimeSpan 的值？这将产生“人类格式化”时间表示的 TimeSpan，例如 25 小时将是 1 天 1 小时。

如果要获取总分钟数，例如使用[TimeSpan.TotalMinutes](http://msdn.microsoft.com/en-us/library/system.timespan.totalminutes.aspx)属性

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-01T14:16:27.067

您希望它在到达 23:59 后循环回到 00:00？

在您的循环中，或者您尝试实现此目的的任何地方，检查 Days 组件是否大于 0，如果是，则减去一天。

似乎太简单的回答是正确的......你真正在寻找什么？

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-01T14:17:06.353

在您`TimeSpan`到达超过一天后，您将获得该形式的输出。如果您仍想以小时形式显示它，请尝试类似

```
String.format({0}:{1}:{2}, span.Days*24 + span.Hours, span.Minutes, span.Seconds) 
```

# xml - 将 XML 解组为数组

> ID：13178824
> 
> 赞同：10
> 
> 时间：2012-11-01T14:09:12.300
> 
> 标签：xml, jaxb, unmarshalling

我想将 XML 文件解组为元素数组。

例子 ：

```
<root>
   <animal>
      <name>barack</name>
   </animal>
   <animal>
      <name>mitt</name>
   </animal>
</root> 
```

我想要一组 Animal 元素。

当我尝试

```
JAXBContext jaxb = JAXBContext.newInstance(Root.class);
Unmarshaller jaxbUnmarshaller = jaxb.createUnmarshaller();
Root r = (Root)jaxbUnmarshaller.unmarshal(is);
system.out.println(r.getAnimal.getName()); 
```

本次展示`mitt`，最后一个Animal。

我想这样做：

```
Animal[] a = ....
// OR
ArrayList<Animal> = ...; 
```

请问我该怎么办？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-11-01T15:01:19.177

您可以执行以下操作：

**根**

如果该字段更改为`List<Animal>`或，则此示例的工作方式相同`ArrayList<Animal>`。

```
package forum13178824;

import javax.xml.bind.annotation.*;

@XmlRootElement
@XmlAccessorType(XmlAccessType.FIELD)
public class Root {

    @XmlElement(name="animal")
    private Animal[] animals;

} 
```

**动物**

```
package forum13178824;

import javax.xml.bind.annotation.*;

@XmlAccessorType(XmlAccessType.FIELD)
public class Animal {

    private String name;

} 
```

**演示**

```
package forum13178824;

import java.io.File;
import javax.xml.bind.*;

public class Demo {

    public static void main(String[] args) throws Exception {
        JAXBContext jc = JAXBContext.newInstance(Root.class);

        Unmarshaller unmarshaller = jc.createUnmarshaller();
        File xml = new File("src/forum13178824/input.xml");
        Root root = (Root) unmarshaller.unmarshal(xml);

        Marshaller marshaller = jc.createMarshaller();
        marshaller.setProperty(Marshaller.JAXB_FORMATTED_OUTPUT, true);
        marshaller.marshal(root, System.out);
    }

} 
```

**输入.xml/输出**

```
<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<root>
    <animal>
        <name>barack</name>
    </animal>
    <animal>
        <name>mitt</name>
    </animal>
</root> 
```

**了解更多信息**

*   [http://blog.bdoughan.com/2010/09/jaxb-collection-properties.html](http://blog.bdoughan.com/2010/09/jaxb-collection-properties.html)
*   [http://blog.bdoughan.com/2011/06/using-jaxbs-xmlaccessortype-to.html](http://blog.bdoughan.com/2011/06/using-jaxbs-xmlaccessortype-to.html)

# python - Python App Engine后端适用于cron，但如果我直接点击url

> ID：13178828
> 
> 赞同：2
> 
> 时间：2012-11-01T14:09:24.460
> 
> 标签：python, google-app-engine, backend

我们有一个脚本需要一些时间来执行。我们已经安排了一个 cron 作业并使用后端来运行该作业。

这是 cron 的样子：
`url: /cron/my_job_name
target: mybackend
schedule: every 30 minutes from 06:00 to 12:00`

cron 作业按预期正确运行。但是当我点击网址时： [https](https://myappname.googleplex.com/cron/my_job_name) : //myappname.googleplex.com/cron/my_job_name 当作业运行超过 60 秒时，我会收到“DeadlineExceededError”。

我需要能够直接点击 url 以进行测试。我不想每次都更改 cron 计划进行测试。

有没有办法通过点击 url 来运行后端？

添加我的 app.yaml 和 backends.yaml

**应用程序.yaml**
`url: /cron/my_job_name
script: path/my_job_name.py
login: admin`

**后端.yaml**
`name: mybackend
class: B8
instances: 1
options: dynamic`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T14:19:24.743

It sounds like when you are hitting your URL, you are not actually invoking a backend instance to handle it.

From the [docs](https://developers.google.com/appengine/docs/python/backends/overview#Addressing_Backends):

> A backend instance can be targeted with HTTP requests to http://[instance].[backend_name].[your_app_id].appspot.com, or at your application's custom domain. If you target a backend without targeting an instance using http://[backend_name].[your_app_id].appspot.com, App Engine selects the first available instance of the backend.
> 
> The Backends API provides functions to retrieve the address of a backend or instance. This allows application versions to target backends with requests, for a backend to target another backend, or for one instance of a backend to target another instance. This works in both the development and production environments.
> 
> The BACKEND_ID and INSTANCE_ID environment variables contain the backend name and instance index of the instance handling the request.

Modify your url to include your backend name (from you backends.yaml) and you should be able to access it, provided other configs are correct.

More on that same topic:

> Backends share the handlers defined in app.yaml with the main application version. You can place your backends in a separate application root directory if you want to avoid sharing code or handlers, or simply mark the relevant handlers with login: admin.

It might be helpful if you posted your backends.yaml, app.yaml and handlers if you would like a more in depth answer.

# android - 如何从 android 内容提供程序 uri 中获取除片段（行号）之外的所有内容？

> ID：13178834
> 
> 赞同：1
> 
> 时间：2012-11-01T14:09:47.433
> 
> 标签：android, uri, android-contentprovider

我想检索带有附加 id 的 ContentURI 并能够删除 id。

换句话说，我有一个 Content URI，例如：

```
 org.mycontentproviderAuthority/path1/path2/3 
```

我想得到

```
 org.mycontentproviderAuthority/path1/path2/ 
```

是否可以最好使用 Uri 方法来做到这一点？我的意思是我想我可以使用字符串标记器来删除最后一个数字，但我假设一个 uri api 会更安全。

我尝试了 uri.getAuthority() + uri.getPath() 但这给了我整个 ContentUri。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T14:16:35.887

[这是从内容 URI http://appulearn.blogspot.com/2012/05/getting-android-id-from-uri-content.html](http://appulearn.blogspot.com/2012/05/getting-android-id-from-uri-content.html)解析 ID 的示例

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T15:01:50.887

您可能会使用以下内容：

```
static public Uri getUriWithoutLastNPathParts(final Uri uri, final int n) {
    final List<String> segments = uri.getPathSegments();
    final String[] newSegments = new String[segments.size() - n];

    final Uri.Builder builder = new Uri.Builder();
    builder.encodedAuthority(uri.getAuthority());
    builder.encodedPath(uri.getPath());
    builder.encodedQuery(uri.getQuery());

    // no "appendPath", it messes up the thing
    for (int i = 0; i < newSegments.length; i++) {
        newSegments[i] = segments.get(i);
    }
    builder.encodedPath(TextUtils.join("/", newSegments));

    return builder.build();
} 
```

用法：

```
Uri uri = Uri.parse("org.mycontentproviderAuthority/path1/path2/3");
Log.i("Segments", uri + " " + getUriWithoutLastNPathParts(uri, 1));

uri = Uri.parse("org.mycontentproviderAuthority/path1/path2/3?foo=bar");
Log.i("Segments", uri + " " + getUriWithoutLastNPathParts(uri, 2)); 
```

# internet-explorer - Excel 中的 IMDB 信息抓取器

> ID：13178836
> 
> 赞同：0
> 
> 时间：2012-11-01T14:09:53.100
> 
> 标签：internet-explorer, excel, vba

我一直试图从 IMDB 获取信息到 Excel 表，到目前为止，我在 excel 中找到了下面的 vba 代码。

```
Private Sub Worksheet_SelectionChange(ByVal Target As Range)
    If Target.Row = Range("A2").Row And _
    Target.Column = Range("A2").Column Then
        Dim IE As New InternetExplorer
        'IE.Visible = True
        IE.Navigate "http://www.imdb.com/title/tt" & Range("A2").Value
        Do
        DoEvents
        Loop Until IE.readyState = READYSTATE_COMPLETE
        Dim Doc As HTMLDocument
        Set Doc = IE.document
        Dim sDD As String
        sDD = Trim(Doc.getElementsByTagName("h1")(0).innerText)
        IE.Quit
        Dim aDD As Variant
        aDD = Split(sDD)
        Range("B2").Value = aDD(0)
    End If
End Sub 
```

现在我想要`Range("A2")`多个单元格或任何其他代码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-10-21T10:17:54.447

这可能是你想要的。它将获取您输入到 excel 列中的名称。然后使用谷歌搜索 IMDB，“我感觉很幸运”，然后抓住电影的“正确”标签，包括年份。

如果您想要 IMDB 参考，您可以使用地址栏或标签中的 tt#########。

```
'tools > references > Microsoft Internet Controls & Microsoft HTML Object Library need to be ticked

Private Sub Grab_IMDB_Data()
Dim rCurrent As Range
Dim IE As New InternetExplorer
Dim Doc As HTMLDocument
Dim aDD As Variant
Dim x As Integer
Dim y As Integer
Dim i As Integer
Dim NoM As Integer 'Number of Movies
Dim arraymovies() As String 'dynamic array
Dim searchTerm As String

NoM = 1
x = 1 'cell ref hoz
y = 2 'cell ref vert
i = 0

    While Worksheets(3).Cells(y + i, x) <> "" 'finds amount of movies in your list
        NoM = NoM + 1
        i = i + 1
    Wend

ReDim arraymovies(NoM) As String 'sets array to length of movie list

    For i = 1 To NoM 'adds list to array
        arraymovies(i) = Worksheets(3).Cells(i + 1, x).Value 'fills array with values in cells for quick reference
    Next

On Error Resume Next

    For i = 1 To NoM

        'IE.Visible = True
        IE.Navigate "http://google.com/search?btnI=1&q=imdb " & arraymovies(i) 'uses im feeling lucky IMDB
        Do
             DoEvents
        Loop Until IE.readyState = READYSTATE_COMPLETE

        Set Doc = IE.document

        sDD = Trim(Doc.getElementsByTagName("h1")(0).innerText)
        IE.Close
        arraymovies(i) = sDD
    Next

    For i = 1 To NoM 'overlays changes
        Worksheets(1).Cells(i + 1, x) = arraymovies(i)
    Next

End Sub 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-01T14:35:32.927

所以你可能有一列说 B:B 填充了这些 imdb 标签，那么你可以做的不是 if 是为每个循环使用一个，请注意我没有测试 InternetExplorer 交互部分：

```
Private Sub Grab_IMDB_Data
 Dim rCurrent as Range
 Dim IE As New InternetExplorer
 Dim Doc As HTMLDocument
 Dim aDD As Variant
 Dim sDD As String

 For each rCurrent in Range("B:B").Cells
      If rCurrent.Value <>"" Then
           'IE.Visible = True
           IE.Navigate "http://www.imdb.com/title/tt" & Range("A2").Value
           Do
                DoEvents
           Loop Until IE.readyState = READYSTATE_COMPLETE

           Set Doc = IE.document

           sDD = Trim(Doc.getElementsByTagName("h1")(0).innerText)
           IE.Quit

           aDD = Split(sDD)
           rCurrent.Offset(0 ,1).Value = aDD(0)
      End If
  Next rCurrent

End Sub 
```

需要考虑的一个注意事项：实际上从 imdb 网站获取所有这些可能是不合法的。

# download - XPages - xp:repeat 控件中的 xp:fileDownload 控件

> ID：13178839
> 
> 赞同：3
> 
> 时间：2012-11-01T14:10:09.993
> 
> 标签：download, xpages, repeat, xpages-ssjs

您知道如何在 xp:repeat 控件中使用 xp:fileDownload 控件吗？

我绑定了 xp:repeat 控件来查看。所以我可以每行获取 NotesViewEntry。

但是我没有在 xp:fileDownload 控件中使用 var 变量获取附件。

我将 xp:repeat 放在 xp:panel 中，并在面板对象中创建了数据文档。我在这个面板中放置了 fileDownload 控件。并将文档数据源绑定到fileDownload。

没用！

有想法吗？

我有 10 个文件，每个文件都有一个附件。我想使用文件下载控件显示这些文件。

```
<xp:this.data>
<xp:dominoView var="viewReviews" viewName="vwLookupGoruslerHepsi"></xp:dominoView>
</xp:this.data>

<xp:repeat id="repeat1" value="#{viewReviews}" var="viewEntry">
<xp:table style="width:100%;border:1px solid #ddd;margin-bottom:5px;"
    cellpadding="2">
    <xp:tr valign="top">
        <xp:td rowspan="5" style="width:250px">
            <xp:text id="computedField9" tagName="h4" escape="true">
                <xp:this.value><![CDATA[#{viewEntry["GorusBildirecek_CN"]}]]></xp:this.value>
            </xp:text>
        </xp:td>
    </xp:tr>
    <xp:tr valign="top">
        <xp:td>
            <xp:panel id="panelGorusEkler">
                <xp:this.data>
                    <xp:dominoDocument var="docGorus" formName="frmGorus"
                        action="openDocument" documentId="#{javascript:viewEntry.getNoteID()}">
                    </xp:dominoDocument>
                </xp:this.data>
                <xp:text escape="true" id="computedField1"
                    value="#{docGorus.GorusBildiren_OU1_NAME}">
                </xp:text>
                <xp:fileDownload rows="30" id="fileDownload3"
                    var="rowFile" indexVar="rowIndex" value="#{docGorus.Ekler}">
                </xp:fileDownload>
            </xp:panel>
        </xp:td>
    </xp:tr>
</xp:table>
</xp:repeat> 
```

谢谢

**替代解决方案 fileDownloadLinks in xp:repeat Control**

解决此需求的替代方法。

我添加了一个包含**@AttachmentNames**值的列。（列名：$Ekler）

```
<xp:tr valign="top">
<xp:this.rendered><![CDATA[#{!empty viewEntry["$Ekler"]}]]></xp:this.rendered>
<xp:td>
    <xp:repeat id="repeat2" value="#{viewEntry.$Ekler}" var="embeddedFile">
        <xp:link escape="true" id="link1" style="margin-right:10px">
            <xp:this.text><![CDATA[#{javascript:var aSizes:Array = ['bytes', 'KB', 'MB', 'GB', 'TB', 'PB'];
            var embedFile:NotesEmbeddedObject = viewEntry.getDocument().getAttachment(embeddedFile);
            var calcnr:Number = Math.floor(Math.log(embedFile.getFileSize())/Math.log(1024));
            var fSize = (embedFile.getFileSize()/Math.pow(1024, Math.floor(calcnr))).toFixed(2)+" "+ aSizes[calcnr];
            return embedFile.getName() + " (" + fSize + ")"}]]></xp:this.text>
            <xp:this.value><![CDATA[#{javascript:"/" + facesContext.getExternalContext().getRequestContextPath() + "/xsp/.ibmmodres/domino/OpenAttachment/" + facesContext.getExternalContext().getRequestContextPath() + "/" + viewEntry.getDocument().getUniversalID() + "/Ekler/" + embeddedFile;}]]></xp:this.value>
        </xp:link>
    </xp:repeat>
</xp:td> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T13:25:11.583

如果您使用的是 dominoDocument 数据源，我很确定您需要设置 ignoreRequestParam="true" 如果您正在传递一个 documentId。否则它会查看查询字符串参数。然后文件下载应该工作。

对于第二个选项，该列是否设置为将多个值显示为单独的条目？如果repeat 接收到逗号分隔的字符串值，它将不起作用：repeats 需要一个集合，而不是单个字符串。检查以确保 NotesViewEntry 的 columnValues() 属性是多值的。即使那样，如果只有一个附件，我预计它会失败。

不使用列值，而是传递直接从 viewEntry.getDocument() 检索到的 NotesEmbeddedObject 集合的重复。重复中的每个元素都将是一个 NotesEmbeddedObject。

# android - Android - 与 .NET WCF 服务的 Https 连接给出 SSLException：“无对等证书”

> ID：13178840
> 
> 赞同：6
> 
> 时间：2012-11-01T14:10:10.147
> 
> 标签：android, json, wcf, exception, ssl

**[已解决] - 见下文**

在 Android 2.2 通过 HTTPS 连接尝试从启用了 REST 的 WCF 服务中获取一些 JSON 数据时，我遇到了异常。然后我注意到发生了一些非常奇怪的事情。在我的手机上运行应用程序时，它运行良好，它会返回漂亮的 JSON 数据。但是，在我的模拟器上运行应用程序时，一旦执行“httpclient.execute(request)”，它就会崩溃，并给出 SLLException: no peer certificate。这特别奇怪，因为我的 WCF 服务有一个有效的 RapidSSL 签名证书 (CA)。另外，我确保在我的 IIS 中不需要客户端证书。（这个函数也没有在 UIThread 上运行！，它在一个单独的线程上运行。）

我的代码：

```
 public Object getJSON(String URL, HashMap<String, String> parameters, String METHOD, String TAG) {
    try {
        this.TAG = TAG;
        // Send GET request to <service>/METHOD?params
        //Target API(8) for AndroidHttpClient and Target API(5) for DefaultHttpClient
        AndroidHttpClient client = AndroidHttpClient.newInstance("Android");
        String params = "?";
        if(parameters != null){
            for (Entry<String, String> para : parameters.entrySet()) {
                params = params + (String)para.getKey() + "=" + (String)para.getValue() + "&";
            }
            params = params.substring(0, params.length() - 1);
            Log.i("U's n P's", params);//Username and password check
        }

        HttpGet request = new HttpGet(URL + METHOD + params);
        Log.i(TAG, request.getRequestLine().toString());
        request.setHeader("Accept", "application/json");
        request.setHeader("Content-type", "application/json");
        HttpResponse response = client.execute(request);//Crashes here
        HttpEntity responseEntity = response.getEntity();

        // Read response data into buffer
        char[] buffer = new char[(int)responseEntity.getContentLength()];
        InputStream stream = responseEntity.getContent();
        InputStreamReader reader = new InputStreamReader(stream);
        reader.read(buffer);
        stream.close(); 
```

现在我已经尝试寻找解决方案，但是基本上没有解决方案适合这种情况。

**[解决方案]**

自从我编辑主机文件以来，我的模拟器正在运行快照，因此我不需要在 DNS 中设置我的服务。现在问题来了，因为我每次都通过快照运行它。日期设置为 2012 年 10 月 24 日，模拟器中的时间为 18:48。然后我意识到我验证证书的日期是 2012 年 10 月 27 日，时间是 14:45。显然，“从互联网上获取时间”选项在模拟器上不起作用。这使我的 httpclient 抛出“无对等证书”异常，因为它在技术上在模拟器中没有经过验证的证书。可悲的是，当您使用关键字“android”或“https android wcf”搜索此异常的解决方案时，您只会得到与*自签名证书*有关的问题的人的结果。

**TL；DR：显然，将来经过验证的证书不会被接受。**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-12T19:56:35.340

正如 Arcshade 所说。

自从我编辑主机文件以来，我的模拟器正在运行快照，因此我不需要在 DNS 中设置我的服务。现在问题来了，因为我每次都通过快照运行它。日期设置为 2012 年 10 月 24 日，模拟器中的时间为 18:48。然后我意识到我验证证书的日期是 2012 年 10 月 27 日，时间是 14:45。显然，“从互联网上获取时间”选项在模拟器上不起作用。这使我的 httpclient 抛出“无对等证书”异常，因为它在技术上在模拟器中没有经过验证的证书。可悲的是，当您使用关键字“android”或“https android wcf”搜索此异常的解决方案时，您只会得到与自签名证书相关的问题的人的结果。

# php - 是否可以在 PHP 中创建一个非空字符串，它是 LDAP 中的空密码？

> ID：13178842
> 
> 赞同：2
> 
> 时间：2012-11-01T14:10:14.600
> 
> 标签：php, null, ldap, bind

LDAP 服务器、PHP，并且不允许使用空密码。

我的代码当前检查密码是否为 true（是的，我将排除一些可能是有效的非空 LDAP 密码的值，例如`"0"`）以避免允许使用 LDAP 进行空白密码登录。但这足够了吗？

是否可以创建一个 PHP 认为非空但会被 LDAP 视为空白密码的值？也许是一个带有`0x0`（空 C 字符串）的字符串或其他一些类似骇客的怪物？

使用[`ldap_bind()`](http://php.net/ldap_bind)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T17:11:36.550

LDAP 标准涵盖了关于简单 BIND 操作的三种可能性，以及标准未解决的一种可能性：

1.  空 DN 和空密码。不进行身份验证。这通常称为“匿名”，是连接的初始状态。
2.  DN 和空密码。不进行身份验证。
3.  DN 和密码。身份验证发生并且失败或成功。如果身份验证成功，则在 BIND 响应中返回零 (0) 结果代码。否则在 BIND 响应中返回非零结果代码。

最后，LDAP 标准没有解决：

1.  没有 DN 和非空密码。不进行身份验证。目录服务器应拒绝此 BIND 操作。

服务器对前两个所做的取决于服务器的配置，但由于没有进行身份验证，如果服务器配置正确，则应该拒绝 BIND 操作。

# powershell - RemoteSigned 可以运行在同一域上创建的脚本吗？

> ID：13178846
> 
> 赞同：0
> 
> 时间：2012-11-01T14:10:23.813
> 
> 标签：powershell

我正在创建和测试一些 powershell 脚本来进行一些基本的文件复制。我已将我的执行策略设置为 RemoteSigned。根据帮助，这应该允许我运行不是从互联网下载的脚本。但是，我的观察似乎表明这只会运行在本地机器上创建的脚本。

例如，如果我在我的开发机器上创建一个脚本并尝试复制到我的服务器（在我的同一个域上），该脚本将不会运行。但是，如果我在服务器上打开 Powershell ISE 并打开我的脚本，复制代码并将其粘贴到新的文件窗口中并将其保存到服务器，然后脚本就会运行。此外，如果我想创建一个自签名证书，它不会在其他计算机上运行（根据帮助）。

所以，这一切似乎有点麻烦，我必须在它们要运行的机器上开发我的脚本，或者通过上面提到的复制/粘贴例程让它们在我的服务器上运行。我只想知道我已经正确理解了所有这些，并且没有其他方法可以在同一域中创建脚本并在远程签名执行策略下运行它而无需支付证书费用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T14:27:32.027

这篇[文章](http://blogs.technet.com/b/heyscriptingguy/archive/2012/10/29/how-to-run-powershell-scripts-from-a-shared-directory.aspx)在这里提供了从共享文件夹执行脚本的方法。希望这可以帮助你:-)

# php - PHP：无法存储到 cookie

> ID：13178852
> 
> 赞同：1
> 
> 时间：2012-11-01T14:10:38.510
> 
> 标签：php, cookies

PHP新手在这里，我不明白我在这里做错了什么。我正在尝试实现一个陈词滥调的记住我的功能，但我无法让 cookie 工作。我已经有一段时间了。

所有这些都包含在密码检查功能中，我完全能够登录和回显我的会话。但我似乎无法设置我的 cookie。我正在使用 MAMP。

```
if($_POST['_remember'] == 'true') {
    $cookie = $_SESSION['user']['id']. '-' .$_SESSION['user']['password']. '-' .$_SESSION['user']['timestamp'];
    setcookie('remedy', $cookie, time() +60*60*24*7, '/', 'localhosttest');
  } else {
    //destroy any previously set cookie
    setcookie('remedy', '', time() -60*60*24*7, '/', 'localhosttest');
  }

echo $_COOKIE['remedy']; 
```

我真希望我能给你别的东西，但这就是我所拥有的。我是一名图形设计师和摄影师，这种逻辑甚至不在我的球场附近。我为模糊的标题道歉，如果我知道如何更具体，我会修复它。

另外，我的计划是在服务器上使用相同的值检查用户 ID、密码（散列和加盐）和时间戳。每当用户浏览网站时，时间戳值都会更新。这是好习惯吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T14:11:57.010

setcookie() 准备一个 cookie 与服务器响应一起发送给客户端。仅当客户端发送请求时才会填充 $_COOKIE 数组。

在您设置cookie() 之后，检查用户请求的下一页上的$_COOKIE 数组——您将看到您在前一页请求中创建的cookie。

请注意文档（http://php.net/manual/en/function.setcookie.php）中的“在下一页加载”：

> 一旦设置了 cookie，就可以在下一页加载时使用 $_COOKIE 或 $HTTP_COOKIE_VARS 数组访问它们。注意，像 $_COOKIE 这样的超全局变量在 PHP 4.1.0 中可用。Cookie 值也存在于 $_REQUEST 中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-01T14:17:29.690

您可以通过打开 crome 控制台 (F12) -> 资源 -> cookie -> yourSite 来检查您的 cookie 是否存在。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-01T14:14:39.583

您的域是[完全合格的域](http://en.wikipedia.org/wiki/Fully_qualified_domain_name)吗？域名通常需要有一个 . （点）在其中接受cookies。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-01T15:08:29.097

有关 cookie 的答案，请查看 Rays answer。

我强烈建议您永远不要在客户端存储密码，因为存在一些安全风险：

*   如果您使用 http 提供您的网页，您总是通过互联网发送未加密的密码
*   间谍软件或同一台计算机的其他用户可以轻松找到用户凭据

你不能以完全安全的方式做到这一点。我建议您在 cookie 中仅存储一个随机散列，该散列也与用户凭据一起存储在数据库中。

# php - PHP 和 MySQL 最小和最大可能日期

> ID：13178858
> 
> 赞同：9
> 
> 时间：2012-11-01T14:10:51.560
> 
> 标签：php, mysql, date

PHP 和 MySQL 识别的最大日期是多少？

我的意思是，我对不同的时间线有不同的值，我想将它们全部作为`BETWEEN`MySQL 中的选择，如下所示：

```
SELECT * FROM table WHERE date BETWEEN '2011-10-01' AND '2011-10-02';
SELECT * FROM table WHERE date BETWEEN '2011-10-03' AND '2011-10-10'; 
```

等等

为了获得所有选项，正在考虑这样的事情：

```
SELECT * FROM table WHERE date BETWEEN '0000-01-01' AND '2011-10-01';
SELECT * FROM table WHERE date BETWEEN '2011-10-02' AND '2011-10-10';
SELECT * FROM table WHERE date BETWEEN '2011-10-11' AND '9999-12-31'; 
```

这会一直有效吗？或者代码是否有可能在某个时候中断？

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-11-01T14:21:15.290

> DATE 类型用于具有日期部分但没有时间部分的值。MySQL 以 'YYYY-MM-DD' 格式检索和显示 DATE 值。支持的范围是“1000-01-01”到“9999-12-31”。

取自[http://dev.mysql.com/doc/refman/5.5/en/datetime.html](http://dev.mysql.com/doc/refman/5.5/en/datetime.html)

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-11-01T14:22:39.080

这是不同的日期范围，取决于您的列类型：

[根据文档](http://dev.mysql.com/doc/refman/5.6/en/datetime.html)

**DATE 类型**用于具有日期部分但没有时间部分的值。MySQL 以 'YYYY-MM-DD' 格式检索和显示 DATE 值。**支持的范围是“1000-01-01”到“9999-12-31”。**

**DATETIME 类型**用于同时包含日期和时间部分的值。MySQL 以 'YYYY-MM-DD HH:MM:SS' 格式检索和显示 DATETIME 值。**支持的范围是“1000-01-01 00:00:00”到“9999-12-31 23:59:59”。**

**TIMESTAMP 数据类型**用于同时包含日期和时间部分的值。TIMESTAMP 的范围为**'1970-01-01 00:00:01' UTC 到 '2038-01-19 03:14:07' UTC。**

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-01T14:23:04.490

MySQL 的`DATETIME`类型支持从“1000-01-01”到“9999-12-31”。这应该足够了。

PHP 也可以分析这些；他们不是两位数的年份，所以很好。我刚刚在 9999-01-01 上运行了 strtotime，它起作用了。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-01T14:15:22.577

你能这样做吗：

```
SELECT * FROM table WHERE date < '2011-10-01';
SELECT * FROM table WHERE date BETWEEN '2011-10-02' AND '2011-10-10';
SELECT * FROM table WHERE date > '2011-10-11' 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-01T14:22:40.787

日期只不过是整数。整数大小取决于系统；即32位、64位等。

在 php 中，整数大小可以使用常量 PHP_INT_SIZE 确定，最大值使用常量 PHP_INT_MAX

在 mysql 中，您可以执行以下操作： SELECT ~0 as max_bigint_unsigned

* * *

## 回答 #6

> 赞同：-2
> 
> 时间：2012-11-01T14:15:27.380

也许首先从您的表中获取最大值和最小值：

```
SELECT * FROM table WHERE date BETWEEN (SELECT MIN(date) FROM table) AND (SELECT MAX(date) FROM table) 
```

# bash - 计算每行的平均值并保存到数组中

> ID：13178859
> 
> 赞同：1
> 
> 时间：2012-11-01T14:10:54.280
> 
> 标签：bash, unix

我正在尝试创建程序来读取每一行并计算每一行的平均值并存储到数组中......例如，程序将读取第一行，将所有数字相加并除以 24 以计算将存储到的平均值平均列表[1]。当我尝试运行该程序时，我遇到以下错误，我不知道为什么它不起作用...有人可以识别问题吗？

代码：在 Ksh

```
 c=0
 while read -r line ; do
     v=$line
     set -- $v    ((g=($2+$3+$4+$5+$6+$7+$8+$9+$10+$11+$12+$13+$14+$15+$16+$17+$18+$19+$20+$21+$22+$23+$24+$25+$26)/24))
      echo $g
      Avg_list[${c}]=$g
      ((c=c+1))
  done < daily.txt 
```

每日.txt

```
CPU 55 54 54 54 54 54 54 54 54 54 54 54 54 54 54 55 54 54 55 56 57 54 57 54
CPEAK 56 56 57 55 58 56 56 56 57 55 60 56 55 56 55 56 58 55 57 56 63 56 72 57
RAM 97 97 97 97 97 96 96 96 96 96 96 93 91 89 86 84 90 90 95 97 97 97 97 97
RPEAK 97 97 97 97 97 97 96 96 96 96 96 96 92 90 91 81 94 89 97 97 97 97 97 97 
```

错误提示：

```
while read -r line ; do
        v=$line
        set -- $v
        ((g=($2+$3+$4+$5+$6+$7+$8+$9+$10+$11+$12+$13+$14+$15+$16+$17+$18+$19+$20+$21+$22+$23+$24+$25+$26)/24))
        echo $g
        Avg_list[${c}]=$g
        ((c=c+1))
done < daily.txt
+ 0< daily.txt
+ read -r line
+ v=CPU 54 54 54 54 54 54 54 54 54 54 54 54 54 54 55 54 54 55 56 57 54 57 54 54
+ set -- CPU 54 54 54 54 54 54 54 54 54 54 54 54 54 54 55 54 54 55 56 57 54 57 54 54
+ (( g=(54+54+54+54+54+54+54+54+CPU0+CPU1+CPU2+CPU3+CPU4+CPU5+CPU6+CPU7+CPU8+CPU9+540+541+542+543+544+545+546)/24 ))
PerformanceAM.sh[21]: g=(54+54+54+54+54+54+54+54+CPU0+CPU1+CPU2+CPU3+CPU4+CPU5+CPU6+CPU7+CPU8+CPU9+540+541+542+543+544+545+546)/24: 0403-009 The specified number is not valid for this command. 
```

编辑

```
 while read -r line ; do
    v=$line
    set -- $v
    ((g=${2}+${3}+${4}+${5}+${6}+${7}+${8}+${9}+${10}+${11}+${12}+${13}+${14}+${15}+${16}+${17}+${18}+${19}+${20}+${21}+${22}+${23}+${24}+${25}+${26})/24))
    echo $g
    Avg_list[${c}]=$g
    ((c=c+1))
done < daily.txt 
```

新错误：

同时读取 -r 行；做 v=$line set -- $v ((g=${2}+${3}+${4}+${5}+${6}+${7}+${8}+$ {9}+${10}+${11}+${12}+${13}+${14}+${15}+${16}+${17}+${18}+$ {19}+${20}+${21}+${22}+${23}+${24}+${25}+${26})/24)性能AM.sh[18]：0403 -057 第 21 行的语法错误: `/24' 不是预期的。

感谢您的建议！当我尝试使用过的支架时，我得到了这个错误......我现在更加困惑......它似乎根本没有收集数字......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T14:45:23.520

```
#!/bin/ksh

while read -r line ; do
    v=$line
    set -- $v
    ((g=(${2}+${3}+${4}+${5}+${6}+${7}+${8}+${9}+${10}+${11}+${12}+${13}+${14}+${15}+${16}+${17}+${18}+${19}+${20}+${21}+${22}+${23}+${24}+${25})/24))
    echo $g
    Avg_list[${c}]=$g
    ((c=c+1))
done < daily.txt 
```

你错过了一个`(`，`g=${2}`参数只到 ${25} 而不是 ${26}。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-01T15:58:04.250

给定一个数字列表，使用反向抛光符号进行计算会更简洁一些：

```
c=0
while read line; do
     set -- $line
     shift
     script="3 k $* + + + + + + + + + + + + + + + + + + + + + + + 24 / p"
     Avg_list[c++]=$( dc -e "$script" )
done < daily.txt 
```

然后

```
printf "%s\n" "${Avg_list[@]}" 
```

生产

```
54.458
57.250
94.333
94.875 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-01T15:01:54.470

这应该这样做：

```

`while read -r line; do

    sum=0
    total=0
    for x in $line; do
        # if x is numeric
        if echo "$x" | grep -E '^[0-9]*$' > /dev/null ; then
            ((sum=sum+x))
            ((total=total+1))
        else
            echo -n "$x "
        fi
    done

    if [ $total = 0 ]; then
        echo
    else
        echo $((sum/total))
    fi

done < daily.txt` 

这遵循了我的一般原则，即从不制作长长的 $1 $2 列表……这个解决方案适用于每行任意数量的整数，它还打印出行标签（如果你愿意，这个功能很容易删除）。

            回答 #4

赞同：1

时间：2012-11-01T15:03:57.517

仅供参考，以下是如何`awk`解决此问题的方法

```
array=( $(awk '{sum=0; for (i=2;i<=25; i++) sum=sum+$i; printf "%.0f ",sum/24 }' daily.txt ) ) 
```

```

# c# - oracleConnection.close() 不要在我的会话浏览器中关闭连接

> ID：13178866
> 
> 赞同：8
> 
> 时间：2012-11-01T14:11:11.190
> 
> 标签：c#, oracle

我运行测试连接，我希望看到清晰的会话浏览器，但在程序结束时，我在会话浏览器中看到超过 6 个会话

这是代码：

```
private void testConnection()        
{   
        string connectionString = "data source=(DESCRIPTION=(ADDRESS=(PROTOCOL=TCP)(HOST=1111)(PORT=1699))(CONNECT_DATA =(SERVER = DEDICATED)(SERVICE_NAME = abcd)));Min Pool Size=10; Connection Lifetime=120;";

        OracleConnection oraConn = new OracleConnection(connectionString);

        try
        {
            oraConn.Open();
        }

        catch (Exception e)
        {
        }

        finally
        {
            oraConn.Dispose();
            oraConn.Close();
        }

    } 
```

我需要一个解决方案来完全关闭会话。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2015-02-19T09:56:08.387

您应该清除池：

```
 finally
    {
        oraConn.Dispose();
        oraConn.Close();
        OracleConnection.ClearPool(oraConn);
    } 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-01T14:14:55.150

原因可能是连接池。来自 MSDN：

[OracleConnection.Close 方法](http://msdn.microsoft.com/en-us/library/system.data.oracleclient.oracleconnection.close.aspx)

> Close 方法回滚任何挂起的事务。然后它释放到连接池的连接，或者如果连接池被禁用，则关闭连接。

因此，您的连接实例将在 C# 中处理掉，但连接可能会在池中保持打开状态，以便在您下次请求时可以快速提供一个新的打开连接实例。

# android - 通过通货膨胀更新菜单

> ID：13178870
> 
> 赞同：1
> 
> 时间：2012-11-01T14:11:20.007
> 
> 标签：android, android-optionsmenu

在我的应用程序中，我管理选项菜单以反映我的应用程序所处的状态。三个菜单是可能的。

在`onCreateOptionsMenu`函数中，我从 XML 文件中扩充基本条目。

在该`onPrepareOptionsMenu`函数中，我清除了菜单，然后扩充了与我的应用程序当前状态相对应的 XML 文件。

这会导致意想不到的结果！！！

当我将菜单从状态 1 更改为状态 2 然后恢复到状态 1 时，“更多”条目在视觉上被我的菜单条目之一替换。但它的功能是正确的：如果我点击它，就会出现溢出菜单！

然后，如果我更改为状态 3，当我尝试打开它时不会出现菜单。如果我调试代码，我会看到菜单正确地填充了膨胀的结果（菜单的大小相应地发生了变化）。

我可以补充一点，该代码与 Android 2.3.3 完美配合。仅当我在 Android 4 上执行它时才会出现此问题（未经 Android 3 测试）。

任何想法？

根据要求，我已经简化了我的代码，让你看到问题。该应用程序的代码如下：

```
public class MainActivity extends Activity{
private boolean m2=false,m3=false;

/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState)
{
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    MenuInflater inflateur;

    inflateur = getMenuInflater();
    inflateur.inflate(R.menu.menu_1,menu);
    return (true);
}

@Override
public boolean onPrepareOptionsMenu(Menu menu) {
    MenuInflater inflateur;

    inflateur = getMenuInflater();
    menu.clear();

    if (m2){
        inflateur.inflate(R.menu.menu_2,menu);
    } else {
        if(m3) {
            inflateur.inflate(R.menu.menu_3, menu);
        } else {
            inflateur.inflate(R.menu.menu_1, menu);
        }
    }

    return (true);
}

@Override
public boolean onOptionsItemSelected(MenuItem entréeMenu) {
    switch (entréeMenu.getItemId()) {
        case R.menu.m1_4: {
            return true;
        }

        case R.menu.m1_5: {
            return true;
        }

        case R.menu.m1_7: {
            return true;
        }

        case R.menu.m1_8: {
            return true;
        }

        case R.menu.m1_10: {
            return true;
        }

        case R.menu.m1_12: {
            return (true);
        }

        case R.menu.m1_13: {
            return (true);
        }

        case R.menu.m1_1: {
            return true;
        }

        case R.menu.m1_11: {
            // change for menu_2
            m2=true;
            m3=false;
            return true;
        }

        case R.menu.m3_1: {
            return true;
        }

        case R.menu.m3_2: {
            return true;
        }

        case R.menu.m2_1: {
            // revert to menu_1
            m2=false;
            return true;
        }

        case R.menu.m2_2: {
            return true;
        }

        case R.menu.m1_2: {
            // change for menu_3
            m2=false;
            m3=true;
            return true;
        }

        case R.menu.m1_3: {
            return true;
        }

        case R.menu.m3_3: {
            // revert to menu_1
            m3=false;
            return true;
        }

        case R.menu.m2_5: {
            return true;
        }

        case R.menu.m2_3: {
            return true;
        }

        case R.menu.m2_4: {
            return true;
        }

        case R.menu.m1_6: {
            return (true);
        }

        case R.menu.Options: {
            return (true);
        }

        case R.menu.m1_14:{
            return(true);
        }

        default: {
            return super.onOptionsItemSelected(entréeMenu);
        }
    }
} 
```

}

只有四个菜单项处于活动状态：1.11 从 menu_1 更改为 menu_2，2.1 恢复为 menu_1；1.2 从 menu_1 更改为 menu_3，3.3 恢复为 menu_1。

目前遇到的问题： 1）点击1.11改成menu_2。打开菜单：仅显示 5 个菜单项。关闭菜单并重新打开：现在可以正确显示 6 个菜单项。2）点击2.1返回菜单1。在第六个位置可以看到“2.6”而不是“更多”。如果单击“2.6”，则该行为对应于单击“更多”。

现在，菜单的 XML 文件：menu_1：

```
<?xml version="1.0" encoding="UTF-8"?>
<menu xmlns:android="http://schemas.android.com/apk/res/android">

<item android:id="@+menu/m1_1"
      android:title="1.1">
</item>

<item android:id="@+menu/m1_2"
      android:title="1.2">
</item>

<item android:id="@+menu/m1_3"
      android:title="1.3">
</item>

<item android:id="@+menu/m1_4"
      android:title="1.4">
</item>

<item android:id="@+menu/m1_5"
      android:title="1.5"
      android:checkable="true">
</item>

<item android:id="@+menu/m1_6"
      android:title="1.6"
      android:checkable="true">
</item>

<item android:id="@+menu/m1_7"
      android:title="1.7"
      android:checkable="true">
</item>

<item android:id="@+menu/m1_8"
      android:title="1.8"
      android:checkable="true">
</item>

<item android:id="@+menu/m1_9"
      android:title="1.9"
      android:enabled="false"
      android:visible="false"
      android:checkable="true">
</item>

<item android:id="@+menu/m1_10"
      android:title="1.10">
</item>

<item android:id="@+menu/m1_11"
      android:title="1.11">
</item>

<item android:id="@+menu/m1_12"
      android:title="1.12">
</item>

<item android:id="@+menu/m1_13"
      android:title="1.13">
</item>

<item android:id="@+menu/m1_14"
    android:title="1.14">
</item>

<item android:id="@+menu/Options"
    android:title="1.15">
</item> 
```

菜单_2：

```
 <item android:id="@+menu/m2_2"
      android:title="2.2">
 </item>

 <item android:id="@+menu/m2_3"
      android:title="2.3">
 </item>

 <item android:id="@+menu/m2_4"
      android:title="2.4">
 </item>

 <item android:id="@+menu/m2_5"
      android:title="2.5">
 </item>

<item android:id="@+menu/Options"
    android:title="2.6">
</item>
</menu> 
```

和 menu_3 ：

```
<?xml version="1.0" encoding="UTF-8"?>
<menu xmlns:android="http://schemas.android.com/apk/res/android">
 <item android:id="@+menu/m3_1"
      android:title="3.1">
 </item>

 <item android:id="@+menu/m3_2"
      android:title="3.2">
 </item>

 <item android:id="@+menu/m3_3"
      android:title="3.3">
 </item>

<item android:id="@+menu/m1_4"
      android:title="3.4">
</item>

<item android:id="@+menu/Options"
    android:title="3.5">
</item>

</menu> 
```

# php - SimpleXML PHP 解析

> ID：13178873
> 
> 赞同：-1
> 
> 时间：2012-11-01T14:11:24.453
> 
> 标签：php, namespaces, simplexml

它是重复的，只是不适用于已关闭的问题。终于找到了答案，即使在这里也是如此。实际重复：[PHP SimpleXML 命名空间问题](https://stackoverflow.com/questions/6027398/php-simplexml-namespace-problem)

编辑：如果你仔细阅读这个问题，你会发现它不是[PHP 命名空间 simplexml 问题](https://stackoverflow.com/questions/2098170/php-namespace-simplexml-problems)的重复。“可能重复”的答案不是我问题的答案。

再说一遍：
我对`$value = $record->children('cap', true)->$title;`.（这是所有“可能重复”的答案）没有问题）
当带有冒号的标签内还有其他标签时，我遇到了问题。

```
<tag:something>hello</tag:something> //I parse out hello (this is the 'duplicate questions' answer that I don't need answered)

<tag:something>
 <stuff>hello</stuff> //I cannot grab this. Explanation below.
</tag:something> 
```

编辑结束。

原始问题：
我无法`<value>`在位于[http://alerts.weather.gov/cap/us.php?x=1](http://alerts.weather.gov/cap/us.php?x=1)的 XML 中的标签内获取数据（下面的 XML 示例）。

问题出在：

`$array[] = $record->children($tag_cap, true)->$tag_geocode->$tag_value;`

这是我唯一无法抓取的数据，我已经验证除了`$array[4]`抓取之外的所有其他数据。

当父标签在表单中时，从标签获取数据只是一个问题`<cap:something>`。例如：

我可以得到 100 当它喜欢`<cap:something>100</cap:something>`。但如果是这样的话，我不能得到 100 `<cap:something><value>100</value></cap:something>`。

XML的一部分：

```
<?xml version = '1.0' encoding = 'UTF-8' standalone = 'yes'?>

<feed
xmlns = 'http://www.w3.org/2005/Atom'
xmlns:cap = 'urn:oasis:names:tc:emergency:cap:1.1'
xmlns:ha = 'http://www.alerting.net/namespace/index_1.0'
>
<!-- http-date = Tue, 30 Oct 2012 06:34:00 GMT -->

<id>http://alerts.weather.gov/cap/us.atom</id>
<logo>http://alerts.weather.gov/images/xml_logo.gif</logo>
<generator>NWS CAP Server</generator>
<updated>2012-10-30T14:34:00-04:00</updated>
<author>
<name>w-nws.webmaster@noaa.gov</name>
</author>
<title>Current Watches, Warnings and Advisories for the United States Issued by the    National Weather Service</title>
<link href='http://alerts.weather.gov/cap/us.atom'/>

<entry>
<id>http://alerts.weather.gov/cap/wwacapget.php?x=AK124CCADA8120.BlizzardWarning.124CCAE7BFC0AK.AFGWSWNSB.d32adb45b5c82ec5e486c4cfb96d3fb6</id>
<updated>2012-10-30T05:20:00-08:00</updated>
<published>2012-10-30T05:20:00-08:00</published>
<author>
<name>w-nws.webmaster@noaa.gov</name>
</author>
<title>Blizzard Warning issued October 30 at 5:20AM AKDT until October 31 at 6:00AM AKDT by NWS</title>
<link href='http://alerts.weather.gov/cap/wwacapget.php?x=AK124CCADA8120.BlizzardWarning.124CCAE7BFC0AK.AFGWSWNSB.d32adb45b5c82ec5e486c4cfb96d3fb6'/>
<summary>...BLIZZARD WARNING IN EFFECT UNTIL 6 AM AKDT WEDNESDAY... THE NATIONAL WEATHER SERVICE IN FAIRBANKS HAS ISSUED A BLIZZARD WARNING...WHICH IS IN EFFECT UNTIL 6 AM AKDT WEDNESDAY. * VISIBILITY...NEAR ZERO IN SNOW AND BLOWING SNOW. * WINDS...WEST 35 MPH GUSTING TO 50 MPH. * SNOW...ACCUMULATION 3 INCHES THROUGH TONIGHT.</summary>
<cap:event>Blizzard Warning</cap:event>
<cap:effective>2012-10-30T05:20:00-08:00</cap:effective>
<cap:expires>2012-10-30T16:00:00-08:00</cap:expires>
<cap:status>Actual</cap:status>
<cap:msgType>Alert</cap:msgType>
<cap:category>Met</cap:category>
<cap:urgency>Expected</cap:urgency>
<cap:severity>Severe</cap:severity>
<cap:certainty>Likely</cap:certainty>
<cap:areaDesc>Eastern Beaufort Sea Coast</cap:areaDesc>
<cap:polygon></cap:polygon>
<cap:geocode>
<valueName>FIPS6</valueName>
<value>002185</value>
<valueName>UGC</valueName>
<value>AKZ204</value>
</cap:geocode>
<cap:parameter>
<valueName>VTEC</valueName>
<value>/X.NEW.PAFG.BZ.W.0013.121030T1320Z-121031T1400Z/</value>
</cap:parameter>
</entry>

...//rest of XML... 
```

PHP代码：

```
ini_set('display_errors','1');

$alert_url = 'http://alerts.weather.gov/cap/us.php?x=1';

$alert_string_xml = file_get_contents($alert_url);

$alert_simple_xml_object = simplexml_load_string($alert_string_xml);

$count = 0;

$tag_entry = 'entry';
$tag_summary = 'summary';
$tag_cap = 'cap';
$tag_event = 'event';
$tag_certainty = 'certainty';
$tag_areaDesc = 'areaDesc';
$tag_geocode = 'geocode';
$tag_value = 'value';

foreach ($alert_simple_xml_object->$tag_entry as $record)
{
    $count++;

    $array = array();
    $array[] = $record->$tag_summary;
    $array[] = $record->children($tag_cap, true)->$tag_event;
    $array[] = $record->children($tag_cap, true)->$tag_certainty;
    $array[] = $record->children($tag_cap, true)->$tag_areaDesc;
    $array[] = $record->children($tag_cap, true)->$tag_geocode->$tag_value;
    //$array[] = $record->children($tag_cap, true)->$tag_geocode->$tag_value[0]; //doesnt work either

    echo $array[4]; //nothing is echoed

} 
```

最新尝试：
我阅读了更多关于命名空间的内容并更好地理解它们。我什至尝试了我认为更好的解决方案：

```
//inside the above foreach loop
    $namespaces = $record->getNameSpaces(true);
    $caap = $record->children($namespaces['cap']);
    echo $caap->event; //works (but the first way works too)
    echo $caap->geocode->value; //(STILL does not work. Nothing is echoed) 
```

我不明白为什么我不能从具有包含命名空间的父标签的子标签中获取任何数据。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T14:32:45.703

如果您禁用了错误和警告，您面临的问题就不会那么明显：

> 命名空间错误：未定义东西的命名空间前缀上限

如果您启用错误，您将看到该消息。因为 simplexml 无法`cap`正确解析命名空间前缀，所以它将被删除。

因此，您可以直接访问它：

```
$xml->stuff->value[1] 
```

和类似的。考虑以下代码示例（[demo](http://codepad.org/OK0k049U)：

```
$xml = simplexml_load_string('<entry>
 <cap:stuff>
  <valueName>aaa</valueName>
  <value>000</value>
  <valueName>bbb</valueName>
  <value>111</value>
 </cap:stuff>
</entry>');

echo "\nResult:", $xml->stuff->value[1], "\n\n";
echo "XML:\n", $xml->asXML(); 
```

它通过输出它来演示错误消息以及`$xml`加载 XML 字符串后的内容：

```
Warning: simplexml_load_string(): namespace error : Namespace prefix cap on \ 
                                  stuff is not defined on line 10
Warning: simplexml_load_string():  <cap:stuff> on line 10
Warning: simplexml_load_string():            ^ on line 10

Result:111

XML:
<?xml version="1.0"?>
<entry>
 <stuff>
  <valueName>aaa</valueName>
  <value>000</value>
  <valueName>bbb</valueName>
  <value>111</value>
 </stuff>
</entry> 
```

如果你闻到某些东西应该有效但实际上没有用，那么总是需要仔细观察。一种选择是将字符串作为 XML 再次回显以查看 simplexml 已解析的内容，另一种是启用错误报告并查找警告和错误，它们通常包含更多信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T14:16:11.833

您可能正在寻找[此](http://www.php.net/manual/en/simplexmlelement.children.php)功能。有2个例子，应该足以解决你的问题

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-01T14:15:56.667

`cap:stuff`是根，因此您可以按以下方式访问元素：

```
$xml = simplexml_load_string($your_xml);
$value_name_0 = $xml->valueName[0];
$value_0 = $xml->value[0];
$value_name_1 = $xml->valueName[1];
$value_1 = $xml->value[1]; 
```

# vim - 如何在 Vim 中的命令模式和插入模式之间切换？

> ID：13178874
> 
> 赞同：91
> 
> 时间：2012-11-01T14:11:37.067
> 
> 标签：vim, insert, command

我刚开始使用 Vim 作为 IDE。我现在将它用作测试编辑器有一段时间了，所以我不必经常进入命令模式。但是，由于我用 Java 编程，我必须进入命令模式来制作文件，编译/运行它......等等。

问题是：我需要一种在两种模式之间切换的好方法。

我在网上查看，它说`<Esc>`密钥应该这样做，但这对我不起作用（也许它不适用于 gVim？我不知道为什么。）

`CTRL``O`我每次都必须按才能进入命令模式；转义键在该模式下工作......它让我回到插入模式。但是有没有更好或更简单的方式在命令模式和插入模式之间切换？

* * *

## 回答 #1

> 赞同：118
> 
> 时间：2012-11-01T14:17:20.860

按`ESC`退出从插入模式到正常模式，您可以`:`在其中输入命令。再次按`i`返回插入模式，您就可以开始了。

我不是 Vim 大师，所以其他人可以更有经验并给你其他选择。

* * *

## 回答 #2

> 赞同：54
> 
> 时间：2012-11-01T14:33:40.130

看起来你的 Vim 是以*简单模式*启动的。见`:help easy`。

当使用`-y`参数或 as调用 Vim 时会发生这种情况`evim`，或者您的配置`:set insertmode`中可能有某个位置。`.vimrc`找到源并禁用它；暂时这也可以通过`Ctrl`+来完成`O` `:set noim` `Enter`。

* * *

## 回答 #3

> 赞同：26
> 
> 时间：2016-03-29T02:53:37.600

这已在[其他问题](https://stackoverflow.com/a/4416543/3653165)中提到过，但在所有键盘上都`ctrl + [`等效。`ESC`

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2014-02-04T07:45:42.637

使用`jj`

就我而言，下面的 .vimrc （或在 gVim 中位于`_vimrc`）设置。

```
inoremap jj <Esc>   """ jj key is <Esc> setting 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2018-02-06T13:25:26.417

来自emacs，我发现我喜欢用`ctrl +`键来做事，而在vim中我发现两者`[ctrl + C]`都会`[alt + backspace]`从插入模式进入正常模式。您可以尝试看看是否有任何适合您。

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2018-10-19T07:46:44.423

对我来说，问题是我处于[录制模式](http://vimdoc.sourceforge.net/htmldoc/repeat.html#q)。要退出录制模式，请按`q`。然后`Esc`按预期为我工作。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-02-14T14:12:07.827

对于这种问题还有另一种解决方案，我认为这种情况相当罕见，如果您在 OS X Sierra 上使用 vim，您可能会遇到这种情况。实际上，这是 Esc 按钮的问题——不是 vim 的问题。例如，我无法使用 Esc 退出 youtube 上的全屏视频，但我忍受了几个月，直到我遇到了与 vim 相同的问题。

我找到[了这个](https://apple.stackexchange.com/a/252374)解决方案。如果您懒得关注外部链接，关闭 Siri 并在活动监视器中终止进程会有所帮助。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2018-07-08T05:55:59.820

您可以使用 Alt+H,J,K,L 在插入模式下移动光标。

# macos - Apple 的 JRE 1.6 在哪里存储小程序运行时参数？

> ID：13178875
> 
> 赞同：1
> 
> 时间：2012-11-01T14:11:39.593
> 
> 标签：macos, applet, java, jnlp

由于复制/粘贴回归，我们需要从 Oracle 的 JRE 1.7 回滚到 Apple 的 JRE 1.6。我们遵循了苹果的这些指示：

[http://support.apple.com/kb/HT5559](http://support.apple.com/kb/HT5559)

这大部分都奏效了，只是我们的 Java 首选项面板不见了。所以我们从 Time Machine 中恢复了它。这大部分都有效（例如，更改控制台是否弹出打开有效），但是，它拒绝保存对小程序运行时参数的更改（例如，-Xmx1024M）。没有错误，但是小程序看不到我们输入的内容，如果我们重新启动 Preferences 实用程序，我们设置的值就消失了。

我很乐意去编辑一些文本文件，但我不知道 Apple 将这些参数存储在哪里。有人知道吗？

到目前为止，这是我看过的地方：

*   我查看了另一台机器，并确认它们不再存储在其中`~/Library/Caches/Java/deployment.properties`。

*   `lsof`我也在新旧机器上做了很多搜索，但也找不到任何线索。

*   我使用 grep 和 find 搜索了旧机器（从未发生过 1.7 升级），结果也是空的，尽管这个搜索并不详尽。

# objective-c - Obj-C，试图为 UIDatePicker 设置可访问性（包括标签）？

> ID：13178877
> 
> 赞同：0
> 
> 时间：2012-11-01T14:11:42.580
> 
> 标签：objective-c, ios, xcode, ui-automation

我不知道从哪里开始以及我能走多远。

我想在日期选择器中为各个值添加标签。

但我不确定这是否可能以及如何做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T14:17:02.290

> 我不知道从哪里开始

始终从[文档](http://developer.apple.com/library/ios/#documentation/UIKit/Reference/UIDatePicker_Class/Reference/UIDatePicker.html)开始。

# ruby-on-rails - has_ma 用于投票应用

> ID：13178882
> 
> 赞同：0
> 
> 时间：2012-11-01T14:12:02.657
> 
> 标签：ruby-on-rails, ruby-on-rails-3.2

我是 Rails 新手，我正在尝试制作自己的简单投票应用程序。我有两个模型：

```
class Product < ActiveRecord::Base
  attr_accessible :description, :title, :photo
  has_many :votes

  has_attached_file :photo, :styles => { :medium => "300x300" }

  before_save { |product| product.title = title.titlecase }

  validates :title, presence: true, uniqueness: { case_sensitive: false }
  validates :photo, :attachment_presence => true

end

class Vote < ActiveRecord::Base
  belongs_to :product
  attr_accessible :user_id
end 
```

这是产品控制器

```
class ProductsController < ApplicationController

    http_basic_authenticate_with :name => "dhh", :password => "secret", :except => [:index]

    def index
        @products = Product.all
    end

    def indexprv
        @products = Product.all
    end

    def show
        @product = Product.find(params[:id])
    end

    def edit
        @product = Product.find(params[:id])
    end

    def new
        @product = Product.new
    end

    def create
        @product = Product.new(params[:product])
        if @product.save
            redirect_to @product
        else
            render 'new'
        end
    end

    def update
    @product = Product.find(params[:id])
    if @product.update_attributes(params[:product])
        flash[:success] = "Producto Actualizado"
        redirect_to root_path
    else
        render 'edit'
    end
  end

  def destroy
    Product.find(params[:id]).destroy
    flash[:success] = "Producto Eliminado."
    redirect_to root_path
  end

end 
```

我有很多问题。

如何在我的产品索引页面上显示每个产品的总票数？

如何在我的索引产品页面上创建一个按钮来为产品添加投票？

我不知道该怎么做，也找不到任何具有类似示例的教程或博客。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T14:53:27.550

您的索引视图可能已经循环遍历您拥有的每个产品（通过部分或循环）。在你的循环/部分做类似的事情：（假设变量产品有一个产品的实例）

```
product.votes.count 
```

获得票数。要获得添加投票的按钮，请执行以下操作：

```
link_to "Add Vote", new_product_vote_path(product), action: :new 
```

一个涵盖 Rails 很多方面的好教程是：[http ://ruby.railstutorial.org/chapters/beginning#top](http://ruby.railstutorial.org/chapters/beginning#top)

编辑：

您的控制器中的 index 方法为您提供了您拥有的每种产品的数组。因此，如果您在索引视图中执行此类操作（如果您使用 erb）：

```
<ul>
<% @products.each do |product| %>
 <li> 
  <%= product.title %>: <br />
  Votes: <%= product.votes.count %> <br />
  <%= link_to "Add Vote", new_product_vote_path(product), action: :new %>
 </li>
<% end %>
</ul> 
```

它应该做你想做的

# windows-services - 从 Windows 服务访问共享文件夹中的文件

> ID：13178892
> 
> 赞同：0
> 
> 时间：2012-11-01T14:12:55.293
> 
> 标签：windows-services

我在 .Net Framework 2.0 中的 XP OS 上有一个 Windows 服务，它访问文件夹并从中读取文件以将其加载到数据库中。
共享文件夹对“所有人”具有完全控制所有子文件夹的权限。并且服务在“本地系统帐户”上运行。并且当前系统使用管理员帐户运行。
堆栈跟踪是：

```
Message : Error while searching for files in : \\nw1\data\nov2012

Access to the path '\\nw1\data\nov2012' is denied.
   at System.IO.__Error.WinIOError(Int32 errorCode, String maybeFullPath)
   at System.IO.Directory.InternalGetFileDirectoryNames(String path, String userPathOriginal, String searchPattern, Boolean includeFiles, Boolean includeDirs, SearchOption searchOption)
   at System.IO.DirectoryInfo.GetFiles(String searchPattern, SearchOption searchOption)
   at System.IO.DirectoryInfo.GetFiles()
   at MyWinApp.Winservice1.SearchFiles(String imp, FileFolder objFile) 
```

**编辑：我在[MSDN](http://msdn.microsoft.com/en-us/library/windows/desktop/ms684190%28v=vs.85%29.aspx)上发现“LocalSystem 帐户在本地计算机上具有广泛的权限”，但不确定为什么它无法访问网络共享文件夹**

任何人都可以建议解决这个问题吗？
谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T04:52:35.403

我在互联网上搜索，但在任何地方我发现无论如何我必须提供用户名/密码才能为 Windows 服务提供访问网络共享文件夹的适当权限（直接到 Windows 服务属性或在 Windows 服务代码中，如[这里](https://stackoverflow.com/questions/659013/accessing-a-shared-file-unc-from-a-remote-non-trusted-domain-with-credentials)给出的，该线程中的代码在[这里](http://code.google.com/p/opennode2/source/browse/trunk/dotnet/common-windsor-net/windsor-commons-core/PInvokeWindowsNetworking.cs)）。
所以为了让它现在工作，我手动将用户名/密码设置为服务属性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-26T09:32:46.993

如果您使用本地帐户运行服务（我相信我们正在谈论的是 windows）并且该本地帐户不属于域或域。您始终可以在运行服务的计算机上创建本地帐户，并在共享文件夹的计算机上创建本地帐户。相同的帐户名，相同的密码。它会工作

# iphone - iOS UISearchBar 在第一次点击时不显示键盘

> ID：13178894
> 
> 赞同：1
> 
> 时间：2012-11-01T14:13:08.303
> 
> 标签：iphone, ios, ipad, keyboard, uisearchbar

我有一个顶部带有 UISearchBar 的视图控制器，在键盘出现之前需要轻按两三下。它在模拟器和设备上执行此操作。有谁知道这是什么原因造成的？我有时也遇到 UITextField 这个问题？

谢谢，

我正在为 iPad 开发并使用 Xcode 4.5 并为 iOS 5.0 和 + 进行部署

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T14:29:42.550

不确定您要搜索的是什么，但如果它在 UITableView 中，您可以使用 UISearchDisplayController - Sample [here](http://developer.apple.com/library/ios/#samplecode/TableSearch/Introduction/Intro.html#//apple_ref/doc/uid/DTS40007848) - 可以更轻松地处理表格搜索。

# gcc - 关于间接寻址，如 %segreg:disp(base,index,scale),foo

> ID：13178897
> 
> 赞同：0
> 
> 时间：2012-11-01T14:13:09.847
> 
> 标签：gcc, disassembly, addressing

movl $0x14,0x4(%rax,%rdx,1) 测量 %rax+%rdx*1+0x4 = $0x14（20）</p>

但是： mov 0x0(,%rax,8),%rax 是基段寄存器？这个指令是什么意思？</p>

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T14:49:16.313

`%rax`将地址从内存中的值加载到`%rax * 8`. `base + index * multiplier + offset`没有基址寄存器和没有偏移量只是意味着假定的那些部分是`0x0`.

# vb.net - 如何保存输入文件中的值以供以后在 Visual Basic 中使用？

> ID：13178899
> 
> 赞同：0
> 
> 时间：2012-11-01T14:13:13.983
> 
> 标签：vb.net, visual-studio-2010

这个 Visual Basic 程序的目标是存储来自文件的输入，然后将它们输出到标签中。它们应该一次显示一个值。我的想法是将值存储在索引中，但它很笨重，而且不起作用。

该程序有一个下一个和上一个按钮，用于增加和减少输出中索引的值。

这是我正在使用的代码。

```
 Public Sub FileModeButton_Click(sender As System.Object, e As System.EventArgs) Handles FileModeButton.Click

    Dim Result As DialogResult = OpenFileDialog.ShowDialog()

    If Result = DialogResult.Cancel Then
        Return
    End If

    FileOpen(1, OpenFileDialog.FileName, OpenMode.Input)

    Index = 1
    Do While Not EOF(1)
        'Need to keep more than one stored set of outputs.
        Input(1, FileOutput1)
        Input(1, FileOutput2)

        FileOut1(Index) = FileOutput1
        FileOut2(Index) = FileOutput2

        Index += 1
    Loop
    FileClose(1)

End Sub

     Private Sub ApplyButton_Click(sender As System.Object, e As System.EventArgs)         Handles ApplyButton.Click
    Index = 1

    If ModeComboBox.Text = "File" Then
        FileModeGroupBox.Enabled = True
        TextboxModeGroupBox.Enabled = False
        Output1Label.Text = FileOut1(Index)
        Output2Label.Text = FileOut2(Index)
    End If
    End Sub 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T14:31:08.403

您的文件阅读并不是最佳的。试试这个（导入 system.IO）：

```
Dim readText() As String = File.ReadAllLines(OpenFileDialog.FileName); 
```

然后你可以这样做（此时 readText 必须是一个全局变量，索引也是如此）：

```
Output1label.Text = readText(index)
Output2label.text = readText(index) 
```

在 Next 和 Prev 按钮上：

```
index = index+1 (on prev index-1)
Output1label.Text = readText(index)
Output2label.text = readText(index) 
```

另外不要忘记检查 readText.Length 以确保您不会超出数组大小。

# javascript - 如何在 url 参数中包含 url 参数（它将嵌套参数视为原始请求的参数）

> ID：13178902
> 
> 赞同：1
> 
> 时间：2012-11-01T14:13:19.437
> 
> 标签：javascript, html, url-parameters

我希望传递一个像这样的网址：

```
localhost:9090/admin/GroupInfo.action?message=redirect.jsp?sop=here&something=other 
```

我想接收“ `redirect.jsp?sop=here&something=other`”作为参数“ `message`”的值，但我只`redirect.jsp?sop=here`在服务器上得到“”。它可能将 sop 视为父 url 的另一个参数。如何避免这种情况？

`'&'`我尝试通过替换它来逃避第二个，`&amp;`但它没有用

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T14:18:32.700

使用[encoreURIComponent()](http://www.w3schools.com/jsref/jsref_encodeuricomponent.asp)

```
encodeURIComponent("redirect.jsp?sop=here&something=other"); 
```

# php - PHP解码ajax发送的变量错误

> ID：13178907
> 
> 赞同：0
> 
> 时间：2012-11-01T14:13:24.590
> 
> 标签：php, ajax, jquery, post

我尝试使用 jquery 和 ajax 将变量发送到 php 脚本。然后我想在创建文件名时使用该变量，但它失败了。文件名始终为“0”并且不在目录“redirect”中。

这是代码：

阿贾克斯：

```
 var pageName=$('#movie').val();

    $.ajax({
        type: "POST",
        url: "phpstuff.php",
        data: { pageName: 'pageName'},
        cache: false,
        success: function()
            {
                alert(pageName);
            }
    }); 
```

“pageName”变量从 id 为“movie”的输入框中获取值

php文件

```
function createPage ($newPage){

$file=fopen("redirect/"+$newPage+".php","w") or exit("Fail to create the page");
$data = "some text I want to be in a file";
fwrite ($file, $data);
fclose($file);
}

$newPage = $_POST["pageName"];
createPage($newPage); 
```

我已经在网上搜索了几个小时，但仍然无法解决问题。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-01T14:25:17.443

线

```
data: { pageName: 'pageName'}, 
```

应该

```
data: { pageName: pageName}, 
```

print_r( $_POST["pageName"] ) 将向您显示正在传递的内容，在第一个版本中 $_POST["pageName"] is 'pageName'

你也可以使用

```
data: 'pageName='+pageName, 
```

[http://api.jquery.com/jQuery.ajax/](http://api.jquery.com/jQuery.ajax/)上对 data 参数的描述不是很清楚，因为它谈论 GET 而没有提到 POST。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-01T14:16:42.437

字符串连接应该使用`.`：

```
"redirect/" . $newPage . ".php" 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-01T14:17:50.980

尝试更改此行：

```
$file=fopen("redirect/"+$newPage+".php","w") or exit("Fail to create the page"); 
```

到

```
$file=fopen("redirect/".$newPage.".php","w") or exit("Fail to create the page"); 
```

注意从`+`到的变化`.`。在 PHP`+`中用于添加，`.`用于字符串连接。

# javascript - 使用带有 Rails 范围的 JSON 对象

> ID：13178909
> 
> 赞同：-1
> 
> 时间：2012-11-01T14:13:32.470
> 
> 标签：javascript, ruby-on-rails, ajax, json, params

我希望发生以下事情：

当我选择一个选择框时，我希望它通过 AJAX 将 JSON 对象发送到我的控制器，如下所示：

```
 var encoded = $.param(data);            
        jQuery.ajax ({
            url: '/trips',
            type: 'GET',
            data: {'toSearch' : encoded},
            success: function (response) {
                //succes
                console.log(encoded);
            }
        }); 
```

并将这些用作我的查询的参数，如下所示

```
respond_to :json, :html

  def index
    @trips = Trip.scoped
    @trips.where("category_id = ?", params[:category_ids]) if params[:category_ids] # category_ids = array; select * from trips where category_id IN [1,3,4]

    respond_with @trips
  end 
```

我该怎么做呢？什么是序列化我的 JSON 对象的最佳方式？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T17:17:19.323

您可以执行以下操作：

```
def index
  @trips = Trip.scoped
  @trips.where("category_id = ?", params[:category_ids]) if params[:category_ids] # category_ids = array; select * from trips where category_id IN [1,3,4]

  respond_to do |format|
    format.html # index.html.erb
    format.xml  { render :xml => @trips }
    format.json { render :json => @trips }
  end
end 
```

然后你应该在 javascript 回调中做任何你想做的事情。

**编辑**

如果您只想要 json 格式，您可以执行以下操作：

```
render :json => @trips 
```

您还可以查看[Layouts and Rendering in Rails](http://guides.rubyonrails.org/layouts_and_rendering.html)指南。

# android - 如何从应用程序列表中隐藏我的应用程序中的其他应用程序android

> ID：13178910
> 
> 赞同：0
> 
> 时间：2012-11-01T14:13:34.007
> 
> 标签：android

任何人都可以帮我找到一种方法来隐藏我的应用程序中的其他应用程序。我正在检索使用复选框安装的应用程序列表，当我检查一些应用程序时，这些应用程序应该从模拟器的应用程序列表中隐藏。我已经在谷歌搜索但我找不到它。我正在等待帮助....谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T14:36:25.230

您可以创建一个自定义启动器，通过在您自己的启动器中创建应用程序列表来控制显示哪些应用程序（在您自己的启动器中）。

您将无法从一般系统中隐藏应用程序。Android 使用 Linux 的 Role\Group 安全模型，而您（在 Android 操作系统中运行的应用程序）将没有安全权限来在系统级别对用户隐藏应用程序 - 要拥有该访问权限，您需要成为根。

最重要的是，您不能创建一个应用程序来对 Android 系统（或用户）隐藏其他应用程序。这是由于安全限制（这是有道理的——恶意应用程序将能够对用户隐藏自己，这将是一件坏事）。

如果您想在模拟器中执行此操作 - 您实际上可以在 Android 的源代码中进行更改（您可以根据自己的喜好下载和修改）。这只能在模拟器中工作（如果没有黑客攻击或生根，您将无法将其安装在真实手机上）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T14:15:13.697

如果没有黑客平台（或生根），你就无法做到这一点。

# windows - 在 Windows 上强制执行互斥安装？

> ID：13178911
> 
> 赞同：2
> 
> 时间：2012-11-01T14:13:51.297
> 
> 标签：windows, wix, windows-installer, installshield

我们有产品 A 和产品 A'。它们几乎相同，很容易混淆。出于法律原因，有必要保持这些微妙的不同。由于技术原因，两者不可能共存并正确运行。因此，如果已经安装了产品 A'，我们希望阻止用户安装产品 A，反之亦然。

**是否有在 Windows 上强制执行此操作的最佳实践？**

我最初的想法是为产品 A 和 A' 使用不同的升级代码，并使用它来提示另一个已安装，但我确信还有其他方法和/或最佳实践。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-02T17:36:43.797

我相信 Windows Installer 程序包开发人员能够通过[Using Properties in Conditional Statements](http://msdn.microsoft.com/En-US/Library/Windows/Desktop/aee818aa-912d-4e59-b061-61cd35993593)来做到这一点，而无需借助自定义操作。

LaunchConditions[操作](http://msdn.microsoft.com/En-US/Library/Windows/Desktop/aa369751)查询[LaunchCondition 表](http://msdn.microsoft.com/En-US/Library/Windows/Desktop/aa369752)并评估其中记录的每个条件语句。如果这些条件语句中的任何一个失败，则会向用户显示一条错误消息并终止安装。

LaunchConditions 操作通常是序列中的第一个，但[AppSearch 操作](http://msdn.microsoft.com/en-us/Library/Windows/Desktop/aa367578%28v=vs.85%29.aspx)可能在 LaunchConditions 操作之前排序。

AppSearch 操作使用文件签名来搜索产品的现有版本。AppSearch 操作还可用于将属性设置为注册表或 .ini 文件条目的现有值。

安装程序第一次在建议的位置找到文件签名时，它会停止搜索此文件或目录，并在[AppSearch Table](http://msdn.microsoft.com/en-us/Library/Windows/Desktop/aa367579%28v=vs.85%29.aspx)中设置相应的属性。然后可以使用LaunchCondition 表中的[条件语句语法评估该属性。](http://msdn.microsoft.com/En-US/Library/Windows/Desktop/6f1657f9-063b-4d57-ad76-95e3dbe25786)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-01T15:41:04.470

您可以使用自定义操作来枚举已安装产品的列表。

```
//using using Microsoft.Deployment.WindowsInstaller;

IEnumerable<ProductInstallation> installedProducts = ProductInstallation.GetProducts(null, null, Microsoft.Deployment.WindowsInstaller.UserContexts.Machine);
foreach (ProductInstallation installedProduct in installedProducts)
    {
        if (installedProduct.ProductName == "Name of Product A'")
        {
            // set some property in your installer to indicate the product can't be installed
        }
    } 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-01T14:24:59.793

我以前没有这样做过，但一个解决方案是在安装（第一次）产品 A（或 A'）时在 Windows 注册表上存储一个键值。

每次 A（或 A'）的安装程序运行时，它都会检查该密钥是否存在，如果为真则中止安装，否则继续安装。请记住，如果用户卸载产品，那么也要删除注册表中的密钥。

有关 Windows 注册表的更多信息：[http ://en.wikipedia.org/wiki/Windows_Registry](http://en.wikipedia.org/wiki/Windows_Registry)

有关添加、编辑、删除密钥的信息：http: [//support.microsoft.com/kb/310516](http://support.microsoft.com/kb/310516)

# regex - 用于匹配某些数字的正则表达式

> ID：13178912
> 
> 赞同：34
> 
> 时间：2012-11-01T14:13:57.953
> 
> 标签：regex, validation

以下正则表达式将匹配 9-11 位数字：`/\d{9,11}/`

编写完全匹配 9位*或*11 位数字（不包括 10 位）的正则表达式的最佳方法是什么？

使用输入元素的模式属性，因此正则表达式应该匹配输入字段的整个值。我想接受任何包含 9 位或 11 位数字的数字。

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2012-11-01T14:17:29.443

好吧，您可以尝试以下方法：

```
^\d{9}(\d{2})?$ 
```

这完全匹配九位数字，后跟可选的额外两位数字（即 9 或 11 位数字）。

或者，

```
^(\d{9}|\d{11})$ 
```

也可以工作。

但请记住，并非*所有事情都*必须使用正则表达式来完成。`^\d*$`检查字符串匹配以及字符串长度本身是 9 还是 11可能同样容易（例如`strlen`，使用类似的东西）。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-01T14:17:09.040

这个正则表达式会做

```
^(\d{9}|\d{11})$ 
```

或者如果你不想完全匹配它

```
\D(\d{9}|\d{11})\D 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-01T14:16:29.017

```
/[^\d](\d{9}|\d{11})[^\d]/ 
```

根据您使用的工具，您可能需要转义*(*、*|*和*)*字符。

请注意，为了不匹配 8 或除 9 或 11 之外的任何其他数字，正则表达式必须以某些内容为界，以表明匹配被非数字字符包围。理想情况下，它将是某种字边界字符，但其语法会因工具而异。

```
/\b(\d{9}|\d{11})\b/ 
```

使用一些工具。你在做什么？

# php - 如何在 php 中添加自动递增到另一列的主键值？

> ID：13178913
> 
> 赞同：0
> 
> 时间：2012-11-01T14:14:09.203
> 
> 标签：php, sql

我有一棵树，我想我有一个表，它也有一个 id，我想通过添加到另一列来使用这个 id。

显然，我想将 id column'value 添加到 parent_root 列。

```
 sql = "INSERT INTO agac_menu (id,isim,aciklama,parent_id,parent_root,yetki,sira,tip,created)
        VALUES (NULL,'".$isim."','".$aciklama."','".$parent_id."','".$parent_root."','".$yetki."','".$sira."','".$tip."','".date('Y-m-d H:i:s')."')"; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T14:21:31.527

如果是 MySQL（是的，我知道它更通用），您可以使用触发器：[MySQL Triggers last_insert_id()](https://stackoverflow.com/questions/7715197/mysql-triggers-last-insert-id)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T14:16:02.707

您不能在同一个查询中执行此操作——在插入记录之前，自动递增的 id 不存在。在 php 中运行查询后，获取最后一个插入 id 并运行更新查询。

# c# - 使用队列从输入字符串中获取一些字符。返回值很奇怪

> ID：13178916
> 
> 赞同：1
> 
> 时间：2012-11-01T14:14:16.760
> 
> 标签：c#, queue

我在我的代码中找不到任何错误。
在这里，我试图从字符串中选择所有数字：（
只是为了简化示例，我想选择满足某些条件的数字）
我使用队列，因为我不想处理数组的索引。

```
 Console.Write("enter string: ");
        string s = Console.ReadLine();
        char[] array = s.ToCharArray();
        Queue<char> q = new Queue<char>();

        for (int i = 0; i < array.Length; i++)
        {
            q.Enqueue(array[i]);
        }

        char[] new_array = new char[q.Count];
        for (int i = 0; i < q.Count; i++)
        {
            new_array[i] = q.Dequeue();
        }

        Console.WriteLine(new String(new_array)); 
```

输入字符串：123456
输出有点奇怪：
123

另一个输入：123
输出：12

当然我犯了一些错误）但一切似乎都很好
提前谢谢你

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-01T14:17:47.443

问题是第二个循环：

```
 for (int i = 0; i < q.Count; i++)
    {
        new_array[i] = q.Dequeue();
    } 
```

随着`q.Count`每次循环迭代的递减和每次迭代的`i`增加，您只能获得一半的元素。

尝试类似：

```
 for (int i = 0; q.Count > 0; i++)
    {
        new_array[i] = q.Dequeue();
    } 
```

还要考虑：[Queue.toArray](http://msdn.microsoft.com/en-us/library/system.collections.queue.toarray%28v=vs.71%29.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-01T14:35:56.600

由于您的错误原因已经说明，您可以用两个语句替换两个循环

```
//A version of Queue constructor accepts IEnumerable object.
//you can directly pass the string to the queue constructor.
Queue<char> Que = new Queue<char>("123456");

//Copies the array and the position is preserved
var new_arr= Que.ToArray(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-01T14:32:20.770

我建议使用`List<char>`而不是`Queue<char>`and `char[]`。这里没有什么特别需要队列，它可以避免 Rudolf 指出的问题，并且 a`List`比数组更容易使用。您也可以使用`foreach`而不是`for`循环，并避免中间步骤。

```
 Console.Write("enter string: ");
    string s = Console.ReadLine();
    List<char> new_array = new List<char>();
    foreach(char c in s.ToCharArray())
    {
        new_array.Add(c);
    }

    Console.WriteLine(new String(new_array.ToArray())); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-01T15:12:47.697

当您使用 Dequeue() 时，q.Count 值在每次迭代中都会发生变化。所以不要在这个循环中使用 q.Count ；

```
 for (int i = 0; i < q.Count; i++) 
```

利用

```
 int queueSize = q.Count;
 for (int i = 0; i < queueSize; i++) 
```

这将使您的循环限制保持为常数，而不是在每次迭代中计算它以找到不同的值，因为使用了 Dequeue()。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-01T14:18:29.877

According to MSDN:

> Removes and returns the object at the beginning of the Queue.

# android - 软键盘覆盖编辑文本，滚动视图不起作用

> ID：13178917
> 
> 赞同：0
> 
> 时间：2012-11-01T14:14:18.147
> 
> 标签：android, scrollview, android-edittext

我在 ScrollView 中几乎没有 editText。如果有很多editText，并且超出了显示范围，则一切正常，但是如果没有，并且打开了软键盘，则我无法滚动它（键盘覆盖其中很少）。我的布局：

```
 <ScrollView 
   android:layout_width="match_parent"
   android:layout_height="match_parent"
    >
    <LinearLayout 
        android:layout_width="match_parent"
        android:layout_height="wrap_content" 
        android:orientation="vertical"   
    >
        <EditText 
            android:layout_width="200dp"
            android:layout_height="wrap_content"
            />
        <EditText 
            android:layout_width="200dp"
            android:layout_height="wrap_content"
            />
        <EditText 
            android:layout_width="200dp"
            android:layout_height="wrap_content"
            />
        <EditText 
            android:layout_width="200dp"
            android:layout_height="wrap_content"
            />
        <EditText 
            android:layout_width="200dp"
            android:layout_height="wrap_content"
            />
    </LinearLayout>
</ScrollView> 
```

有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-11-14T14:02:20.133

我在 ScrollView 标签中添加了这个字段：

```
android:isScrollContainer="false" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T14:23:21.500

您可以为您的活动使用 windowSoftInputMode 属性并将其设置为“adjustResize”。这将为您的软键盘腾出空间。

```
<activity android:windowSoftInputMode="adjustResize" /> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-01T14:23:54.167

您可能需要更改清单文件中活动的“windowSoftInputMode”：

```
android:windowSoftInputMode="adjustResize" 
```

我会试试的。

# javascript - 将字段传递给javascript并评估

> ID：13178921
> 
> 赞同：0
> 
> 时间：2012-11-01T14:14:25.697
> 
> 标签：javascript, asp.net

我有一个带有多个文本框的 Web 表单。我想评估文本框中的默认值，当用户单击该字段时，我想将其清除。这有助于减少表单上的空间。

下面给出错误消息“Microsoft JScript 运行时错误：需要对象。

Javascript：

```
function validateKeyword(f, flg, val) {
    switch (flg) {
        case 0: if (document.getElementById(f).value == val) { document.getElementById(f).value = ''; } break;
        case 1: if (document.getElementById(f).value == '') { document.getElementById(f).value = val; } break;
    }
} 
```

ASP.NET 文本框：

```
<asp:TextBox maxlength="150"  runat="server" name="First_Name" value="First Name" class="frmsel2" onfocus="javascript:validateKeyword('first_name',0,'First Name');" onblur="javascript: validateKeyword('first_name',1,'First Name');" alt="First Name" title="First Name" id="first_name"></asp:TextBox> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T14:42:14.700

如果您使用的是 HTML5，我认为您可以使用**placeholder**。

[http://www.w3schools.com/html5/att_input_placeholder.asp](http://www.w3schools.com/html5/att_input_placeholder.asp)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T14:22:53.510

通过使用在 javascript 中引用您的 ID

```
document.getElementById(<%= first_name.ClientID %>).value = '' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-01T16:01:40.020

我最终把它放在后面代码的 Page_Load 事件中。（进行编辑以使用常量值）。

```
public partial class _Default : System.Web.UI.Page
{
    private const string FormDefaFirstName = "First Name";
    private const string FormDefaLastName = "Last Name";

  protected void Page_Load(object sender, EventArgs e)
  {
        first_name.Attributes.Add("onfocus", "javascript: if(this.value=='" + FormDefaFirstName + "') this.value='';");
        first_name.Attributes.Add("onfocusout", "javascript: if(this.value=='') this.value='" + FormDefaFirstName + "';");
        last_name.Attributes.Add("onfocus", "javascript: if(this.value=='" + FormDefaLastName + "') this.value='';");
        last_name.Attributes.Add("onfocusout", "javascript: if(this.value=='') this.value='" + FormDefaLastName + "';");

    if (!Page.IsPostBack)
    {
        first_name.Text = "First Name";
        last_name.Text = "Last Name";
    }
 } 
```

# android - 需要在 Android 中使用复选框对数字求和的逻辑

> ID：13178925
> 
> 赞同：1
> 
> 时间：2012-11-01T14:14:34.477
> 
> 标签：android

谁能建议我使用Android中的复选框对数字求和的逻辑。例如，如果 checkbox1 的编号为 100，则 checkbox2 的编号为 200，复选框 3 的编号为 300，而 checkbox4 的编号为 400。

如果我选择 checkbox1 和 checkbox3 我应该得到一个显示总和的 Toast 消息，或者如果我选择复选框 1、2、3 那么我应该得到所有选中的复选框的总和。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T14:24:27.533

在这些复选框上放置一个点击事件。假设您在 xml 布局中使用 onclick="sumElm" 。然后在您的活动中：

```
private int sum=0;

public void sumElm(final View view) {
             CheckBox cb = (CheckBox)view;
             int n = Integer.getInteger(cb.getText());
             if(cb.isChecked())
                 this.sum+=n;
             else
                 this.sum-=n;

} 
```

假设您使用复选框中的文本。希望能帮助到你！:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T14:25:48.937

本[教程](http://www.mkyong.com/android/android-checkbox-example/)中给出的示例处理类似的内容。

对所有复选框使用类似的代码。

```
chkBox1.setOnClickListener(new OnClickListener() {

      @Override
      public void onClick(View v) {
                //is chkBox1 checked?
        if (((CheckBox) v).isChecked()) {
            sum += 100; // assuming the value of your first checkbox is 100
            Toast.makeText(MyAndroidAppActivity.this,
               "Sum = " + sum, Toast.LENGTH_LONG).show();
        }

      }
    }); 
```

# jquery - 如何在 jquery 中选择 textarea 的类或 id？

> ID：13178927
> 
> 赞同：1
> 
> 时间：2012-11-01T14:14:44.687
> 
> 标签：jquery, textarea

大家好，我正在研究 jquery 我有一个文本区域，我需要在 jquery 中选择隐藏函数的类，一旦加载，它将在我进入时显示，当我离开时它应该隐藏

这里我的代码如下：

```
 <script type="text/javascript">
     $(document).ready(function () {
      $('.select').mouseleave(function () {
        $('.select').hide();
      });
    });
   </script> 
```

这是我的html：

```
 <textarea  rows="10"  class="select"  id="editor1"> </textarea> 
```

在这里，我有我的 textarea 权限，我需要输入时不会触发任何功能，当我离开它应该隐藏的 textarea 时不会触发任何功能，因为我需要用类调用文本区域，所以我需要如何细化 textarea 类，任何帮助都会得到帮助，谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-01T14:17:48.087

```
 $('.select').mouseleave(function () {
    $(this).hide();
 }); 
```

尽管您可能想尝试：

```
 $('.select').blur(function () {
    $(this).hide();
 }); 
```

根据您在标题中的问题

```
$('.select') /* This will select every single element
    that has the class "select" */ 
```

然而

```
$('#editor1') /* This will select ONLY the first
    element that has the id "editor1" */ 
```

在元素上的任何事件或函数调用中，$(this) 表示被调用的元素：

```
$(".select").blur(function(e) {
    $(this) // represents the current element losing focus
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T14:20:29.297

你几乎是对的；虽然 mouseleave 是鼠标悬停在它上面然后离开（因此事件名称）。

对于文本输入，您最好使用 focusout；下面的例子。

```
 <script>
     $(document).ready(function () {
      $('.select').on("focusout",function () {
        $(this).hide();
      });
    });    
   </script> 
```

# ios - 在 UITableViewCell 上选择单元格后的标题

> ID：13178928
> 
> 赞同：0
> 
> 时间：2012-11-01T14:14:49.467
> 
> 标签：ios, uitableview, uinavigationbar, title

我创建了 tableview 和 detailviewcontroller，但是一旦我选择了单元格，例如：我选择行 Dog 它不是导航栏上的 writer Dog。怎么做？

我使用此代码

但这是一个警告，说“tableview”的本地声明隐藏了实例变量

DVC =DetailViewController

```
DVC.title = [[[self tableView:tableView cellForRowAtIndexPath:indexPath] textLabel] text]; 
```

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T15:16:09.530

您应该设置您的详细视图控制器的标题。您可以在 tableView 的委托方法中设置：didSelectRowAtIndexPath。

```
detailViewController.navigationController.title = @"Dog"; 
```

关于您的警告，这是因为您已经声明了一个名为 tableView 的变量，但是在您编写的方法中

```
DVC.title = [[[self tableView:tableView cellForRowAtIndexPath:indexPath] textLabel] text]; 
```

还有一个名为 tableView 的变量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T15:06:34.330

这不是 UITableView 的标准行为。如果您切换到另一个 ViewController，它只会更改标题。

您需要`didSelectRowAtIndexPath`在 ViewController 中实现该方法。在那里您可以手动更改导航栏的标题。

我不是 100% 确定，但我认为使用那行代码可以更改标题：

```
[viewController.navigationItem setTitle:@"Whatever you want"]; 
```

编辑：

警告只是说，您有一个名为的实例变量`tableview`，并且委托方法还在内部传递了一个名为`tableview`. 因此，只需更改引用 UITableView 的实例变量名称即可。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-01T15:09:07.663

你需要使用这个方法：[self setTitle:@"Dog"];

# python - 访问元组中的 Python 对象

> ID：13178933
> 
> 赞同：1
> 
> 时间：2012-11-01T14:15:07.243
> 
> 标签：python, python-2.7

我正在使用 easyzone 和 dnspython 从区域文件中提取 DNS 记录。提取 A 记录时，我会返回一个字符串和一个元组中的对象。我是来自 PHP 的 Python 新手，不太确定如何获取该对象以获取它的值？我在元组中获取字符串值没有问题。

在此代码片段中，我遍历 A 记录并将值写入 CSV：

```
 # Write all A records
    for a in z.names.items():
        c.writerow([domain, 'A', a.__getitem__(0), a]) 
```

a 包含以下内容：

```
('www.121dentalcare.com.', <easyzone.easyzone.Name object at 0x1012dd190>) 
```

我将如何在这个元组的第二半中访问这个对象？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-01T14:16:30.817

您可以使用索引从元组中获取项目：

```
sometuple[1] 
```

就像您可以使用列表和字符串一样（请参阅[序列类型](http://docs.python.org/2/library/stdtypes.html#sequence-types-str-unicode-list-tuple-bytearray-buffer-xrange)）。

的[文档`easyzone`](http://www.psychofx.com/easyzone/)有点薄，但从查看[源代码](https://bitbucket.org/chrismiles/easyzone/src)来看，`easyzone.easyzone.Name`对象具有`.name`,`.soa`和`.ttl`属性：

```
print sometuple[1].name 
```

该`.soa`属性是另一个自定义类，具有、`.mname`、`.rname`、`.serial`、`.refresh`和`.retry`属性。`.expire``.minttl`

# grails - 自定义 GORM 基本集合

> ID：13178934
> 
> 赞同：5
> 
> 时间：2012-11-01T14:15:09.090
> 
> 标签：grails, groovy, grails-orm

除了不同领域类之间的关联，GORM 还支持基本集合类型的映射。. 例如，以下类创建一个昵称关联，它是一组 String 实例

```
class Person {
    static hasMany = [nicknames:String]
} 
```

这会将昵称存储在单独的表中`person_nicknames`：

```
---------------------------------------------
| person_id         |     nickname          |
---------------------------------------------
|   1               |      Fred             |
--------------------------------------------- 
```

默认情况下，两列都可以为空，并且不存在索引。我想进行以下更改

*   使两列都不为空
*   将复合唯一索引放在`(person_id, nickname)`

显然我可以只运行一个 SQL 脚本来进行这些更改，但是我是否可以在域模型中表达这一点，以便 GORM 在创建和更新模式时做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-10-22T14:46:18.343

您可以使用 joinTable 和基本集合类型。

[http://grails.org/doc/2.4.3/ref/Database%20Mapping/joinTable.html](http://grails.org/doc/2.4.3/ref/Database%20Mapping/joinTable.html)

您可以使用列映射指定 SQL 行为：

[http://grails.org/doc/2.4.3/ref/Database%20Mapping/column.html](http://grails.org/doc/2.4.3/ref/Database%20Mapping/column.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T15:32:34.723

不，这目前是不可能的。您可以通过使 Nickname 成为显式域类来伪造它（Andre Steingress 在问题评论中给出了一个示例），但否则您必须编写迁移。

# overlay - 如何播放 EPUB 媒体叠加层 3.0

> ID：13178938
> 
> 赞同：2
> 
> 时间：2012-11-01T14:15:11.290
> 
> 标签：overlay, media, smil

在所有媒体叠加教程中都缺少它还是我缺少它？

为了制作 MediaOverlay，所有教程都说我们应该：

1.  在 xhtml 中包含文本；

    ```
    <header><h1><span class="audio" id="c001s0000">Chapter 1\. Loomings.</span></h1></header>
    <p>
    <span class="audio" id="c001s0001">Call me Ishmael.</span> 
    <span class="audio" id="c001s0002">Some years ago—never mind how long precisely—having little or no money in my purse, and nothing particular to interest me on shore, I thought I would sail about a little and see the watery part of the world.</span> 
    ```

    ...

2.  在相关的 .smil 中；

    ```
    <seq id="id1" epub:textref="chapter_001.xhtml" epub:type="bodymatter chapter">
    <par id="sentence0">
        <text src="chapter_001.xhtml#c001s0000"/>
        <audio src="audio/mobydick_001_002_melville.mp4" clipBegin="0:00:21" clipEnd="0:00:28"/>
    </par>
    <par id="sentence1">
        <text src="chapter_001.xhtml#c001s0001"/>
        <audio src="audio/mobydick_001_002_melville.mp4" clipBegin="0:00:28" clipEnd="0:00:30"/>
    </par>
    <par id="sentence2">
           <text src="chapter_001.xhtml#c001s0002"/>
        <audio src="audio/mobydick_001_002_melville.mp4" clipBegin="0:00:30" clipEnd="0:00:44"/>
    </par> 
    ```

3.  音频（.mp4）保存在应有的位置。（音频/mobydick_001_002_melville.mp4）

4/ .xhtml 和 .smil 之间的关联在 opf 文件中完成，部分：

```
<item id="xchapter_001" href="chapter_001.xhtml" media-type="application/xhtml+xml" media-overlay="chapter_001_overlay"/>
<item id="chapter_001_overlay" href="chapter_001_overlay.smil" media-type="application/smil+xml"/>
<item id="xchapter_002" href="chapter_002.xhtml" media-type="application/xhtml+xml" media-overlay="chapter_002_overlay"/>
<item id="chapter_002_overlay" href="chapter_002_overlay.smil" media-type="application/smil+xml"/> 
```

好的，我们已经完成了所有这些，但问题是如何播放媒体覆盖？如何启动音频文件并突出显示文本？iBooks 应用程序的“开始阅读”按钮有什么作用？ ![在此处输入图像描述](../Images/98265595bcc6754d944abe8314061d04.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-08-26T22:14:12.110

这是一个非常晚的回复，但对于其他人来说，“开始阅读”按钮将从 smil 文件中按顺序获取项目并对其进行处理。所以第一个动作是从 0:00:21 开始播放音频文件，并从文本中突出显示“Call me Ishmael”。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2016-11-16T04:37:47.820

请在您的 CSS（样式表）中添加样式：

```
    .-epub-media-overlay-active {
        颜色：#dc4c37；
    }

```

# powershell - FTP 复制失败取决于文件的数量和大小

> ID：13178940
> 
> 赞同：3
> 
> 时间：2012-11-01T14:15:19.823
> 
> 标签：powershell, ftp

我需要在几个 ftps 上复制几个文件。

我使用[这个](https://gist.github.com/3993539)Write-FTP 功能。它的各种版本在网络和 SO 上流传。

问题是复制失败取决于文件和其他语句的数量。这是测试代码：

```
. ".\Write-FTP.ps1"

$ftp = "ftp://10.35.3.66//var/www/html/"

$files=@()
@(1..151) | %{ $files += "File1.zip"}

ForEach( $file in $files) {
        $file
        Write-Ftp  $file $ftp @("user", "pass")
        #[System.GC]::Collect()
} 
```

在我的系统上，150 个文件可以工作，但第 151 个文件会出错。如果我取消注释 GC.Collect，它会在 3 个文件后失败。File1.zip 是空的 zip 文件。这是输出：

```
---------- PowerShell ----------
File1.zip
File1.zip
File1.zip
Exception calling "GetRequestStream" with "0" argument(s): "The remote server r
eturned an error: (500) Syntax error, command unrecognized."
At D:\Work\ISPPlus\_novi\Write-FTP.ps1:17 char:30
+         $rs = $ftp.GetRequestStream <<<< ()
    + CategoryInfo          : NotSpecified: (:) [], MethodInvocationException
    + FullyQualifiedErrorId : DotNetMethodException 
```

错误的发生取决于文件的大小和数量。它看起来像一些内存问题或其他东西，但我找不到什么问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T12:49:19.733

我找到了[答案](http://social.msdn.microsoft.com/Forums/en/netfxnetcom/thread/4acf763a-b788-4131-90d7-61b18546909b)。

在上述测试文件的特殊情况下，通过的是提前创建凭证对象：

```
$cr = New-Object System.Net.NetworkCredential("aplikacija", "aplikacija")
ForEach( $file in $files) {
        $file
        Write-Ftp $file $ftp $cr
} 
```

将 FtpWebRequest 的 KeepAlive 选项设置为 false 也有效。

# websocket - 在tomcat（或tomee）中部署jwebsocket服务器（20614）

> ID：13178945
> 
> 赞同：1
> 
> 时间：2012-11-01T14:15:34.513
> 
> 标签：websocket, apache-tomee

我已按照说明运行提供的演示。我还尝试创建一个简单的插件，看看我是否可以让它工作。我遇到了工厂无法实例化插件的问题，无论是我创建的插件还是其他插件（例如AdminPlugin）。

该异常表示缺少以 org.jwebsocket.api.PluginConfiguration 作为参数的构造函数。

有没有其他人遇到过这个问题？20614版本坏了吗？版本是否打包不正确？

任何帮助，将不胜感激。

# c# - 如何在 C# 中不提供全局/静态变量的情况下实现单例模式？

> ID：13178947
> 
> 赞同：2
> 
> 时间：2012-11-01T14:15:41.493
> 
> 标签：c#, .net, design-patterns

> **可能重复：**
> [如何在不使用静态/全局变量的情况下实现单例？可能的？](https://stackoverflow.com/questions/4103249/how-to-implement-singleton-without-using-static-global-variable-possible)

大多数人说 Singleton 是邪恶的原因之一是它提供了一个全局访问点，或者它变得像一个全局变量。是否可以在没有任何类型的全局变量（包括静态变量）的情况下实现单例。是否可以在 C#.NET 中执行此操作？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-01T14:18:43.713

The problem you are hinting at is that a Singleton becomes *like* a global var. What it uses is irrelevant.

And the answer would be No. You will always need a static somewhere, you can only defer it. And that kind of defeats the point.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-01T14:18:09.597

不，那不会是单身人士。

您可以使用 IoC 容器仅将事物作为单例注入。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-01T14:18:42.517

You could implement an interface and then use something like StructureMap. In SM you would build the class like this:

```
public class Foo : IFoo
{
} 
```

And then you would define, in your container, the following:

```
ObjectFactory.Initialize(x =>
{
    x.For<IFoo>.Singleton().Use<Foo>();
} 
```

Then you would inject this resource where you needed it:

```
public class Bar
{
    public Bar(IFoo foo)
    {
    }
} 
```

So, now there will only ever be one instance of the concrete created and then injected into an enumerable number of types that need it.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-01T14:19:56.333

我不相信。如果没有静态变量，您将实例存储在哪里？通常，当我想要一个类的单例时，我将所有构造函数设为私有，并提供一个静态方法或属性，如果它尚未创建，它将创建实例，并返回实例。实例本身存储为私有变量，因此访问它的唯一方法是通过提供的方法/属性 - 或反射。

# javascript - 将模型添加到集合中

> ID：13178950
> 
> 赞同：6
> 
> 时间：2012-11-01T14:15:46.630
> 
> 标签：javascript, backbone.js

我正在寻找一种优雅的方式在添加模型时将模型添加到集合中。在 Backbone 源代码中，有一种`unshift`方法可以做到这一点，但是`add`将模型添加到集合中的方法过于复杂，无法简单地扩展。我正在构建一个依赖于照片和推文的幻灯片放映，并且应该始终在顶部显示最新的，最后显示最旧的。简化我的问题：

初始化应用，API调用返回：

```
apple, banana, lemon 
```

所以，苹果是最新的幻灯片。该集合是建立的：

```
apple, banana, lemon 
```

间隔后，API调用检查是否有更新的水果，结果：

```
orange 
```

集合追加模型：

```
(apple, banana, lemon), orange 
```

那不是我想要的。橙子是最新的水果，苹果紧随其后。但是，在这种情况下，我可以在添加之前反转我的初始集合，并在绘制幻灯片时重新反转。现在，事情变得更复杂了（我添加了括号来澄清）：

API 调用检查更多水果：

```
pineapple, kiwi 
```

Collection 一一追加新模型：

```
((apple, banana, lemon), orange), pineapple, kiwi 
```

所以现在从新到旧，我的收藏是这样的：

```
((not so old, older, oldest), pretty new), brand new, new 
```

这绝对没有意义:)

当然，更改 API 响应可以让我的生活更轻松，但目前这不是一个选择；另外，这并不重要，因为响应中的项目顺序是新的-> 旧的，这对我来说很好。

我找不到一个开箱即用的解决方案，我不想通过将部分主干源克隆到`unshift`新模型来使事情变得过于复杂。建议？谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-01T14:19:45.007

如果模型具有与它们相关联的某种日期或时间，或者确实有任何其他类型的排序（如果需要，您可以手动添加一个），您可以通过在集合中实现`comparator`函数来对集合进行排序。看：

[http://backbonejs.org/#Collection-comparator](http://backbonejs.org/#Collection-comparator)

# firefox - 在 Firefox 上的卸载事件中执行 postBack 会导致始终保持在同一页面中

> ID：13178952
> 
> 赞同：1
> 
> 时间：2012-11-01T14:16:00.003
> 
> 标签：firefox, refresh, postback

使用 c# .net

嗨，我正在尝试对卸载事件进行回发，在谷歌浏览器中，当前脚本工作正常

```
window.onbeforeunload = function () {
            __doPostBack('<%= pararThread.ClientID.Replace("_", "$") %>');
        }

for internet explorer and other, I had to use Jquery
        $(window).unload(function () {
            __doPostBack('<%= pararThread.ClientID.Replace("_", "$") %>');
        }); 
```

到目前为止，一切都很好，但是，只有在 Firefox 中，页面正在回发，但它不再转到另一个页面，例如，**如果点击链接，它将触发事件 unLoad，它会回发，但页面会刷新，不会到达链接**。

**Ps：我正在做这个postBack，因为我需要停止一个在服务器上运行的线程。**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T22:07:22.680

只需在您的 .master 页面或标签之前的任何其他适当页面中添加此代码段`</body>`：

```
<script language="javascript" type="text/javascript">
<!--
function __doPostBack(eventTarget, eventArgument) {
var theform;
if (window.navigator.appName.toLowerCase().indexOf("microsoft") > -1) {
theform = document.aspnetForm;
}
else {
theform = document.forms["aspnetForm"];
}
theform.__EVENTTARGET.value = eventTarget.split("$").join(":");
theform.__EVENTARGUMENT.value = eventArgument;
theform.submit();
}
// -->
</script> 
```

用您自己的替换“aspnetForm”。

# wcf - 在 SOAP 消息中将复杂类型作为参数发送

> ID：13178958
> 
> 赞同：5
> 
> 时间：2012-11-01T14:16:09.400
> 
> 标签：wcf, soap, complextype

我有一个 WCF 服务，如下所示：

```
 public class Service1 : IService1
{
    public string GetData(Person person)
    {
        if (person != null)
        {
            return "OK";
        }
        return "Not OK!";
    } 
```

这是我的 Person 类：

```
 [DataContract]
public class Person
{
    [DataMember]
    public int Age { get; set; }

    [DataMember]
    public string Name { get; set; }
} 
```

我正在调用这样的服务：

```
 BasicHttpBinding binding = new BasicHttpBinding(BasicHttpSecurityMode.None);
        IChannelFactory<IRequestChannel> factory = binding.BuildChannelFactory<IRequestChannel>(new BindingParameterCollection());
        factory.Open();

        EndpointAddress address = new EndpointAddress(url);
        IRequestChannel irc = factory.CreateChannel(address);
        using (irc as IDisposable)
        {
            irc.Open();
            string soapMessage = "<GetData><person><Age>24</Age><Name>John</Name></person></GetData>";

            XmlReader reader = XmlReader.Create(new StringReader(soapMessage));
            Message m = Message.CreateMessage(MessageVersion.Soap11,"http://tempuri.org/IService1/GetData", reader);

            Message ret = irc.Request(m);
            reader.Close();
            return ret.ToString();
        } 
```

当我尝试将像 Person 这样的复杂类型作为参数发送到 GetData 方法时，person 对象将变为 null。但是当我发送整数、字符串等已知类型作为参数时，我没有问题。

如何设法将复杂类型作为参数发送到服务方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T16:22:25.577

我遇到了类似的情况，我们最终将服务的接口更改为相当于：

```
public string GetData(string person) 
```

我们在调用 Web 服务之前进行了自己的对象序列化。在 Web 服务方法中，我们将立即对其进行反序列化，并正常进行。

# sql-server - 如何在Sql中插入一些记录？

> ID：13178962
> 
> 赞同：2
> 
> 时间：2012-11-01T14:16:13.983
> 
> 标签：sql-server, stored-procedures, insert, record, insert-update

我想在 sql server 中插入一些记录。我尝试查询但插入所有记录和值重复。

**我不需要重复值并插入一些记录。**

**表格文件TA**

```
runNo   cDate           cIn         cOut    
00001   2012-10-09 00:00:00.000 2012-10-09 07:21:00.000 2012-10-09 20:34:00.000 
00005   2012-10-09 00:00:00.000 2012-10-09 07:36:00.000 2012-10-09 17:04:00.000 
00006   2012-10-09 00:00:00.000 2012-10-09 07:55:00.000 2012-10-09 20:34:00.000 
00007   2012-10-09 00:00:00.000 2012-10-09 07:50:00.000 2012-10-09 00:00:00.000 
00008   2012-10-09 00:00:00.000 2012-10-09 07:56:00.000 2012-10-09 20:35:00.000 
00009   2012-10-09 00:00:00.000 2012-10-09 07:57:00.000 2012-10-09 20:32:00.000 
00010   2012-10-09 00:00:00.000 2012-10-09 07:58:00.000 2012-10-09 19:03:00.000 
```

**此代码存储过程**

```
SELECT 
     em.empNo,
     ISNULL(tf.cDate, '2012-10-09'),
     tf.cIn,tf.cOut
FROM 
     filesTA tf Full Outer join 
     Emp em On tf.runNo = em.empNo AND tf.cDate = '2012-10-09' 
```

**代码存储过程的结果（在 Datagridview 显示上）**

```
empNo   cDate           cIn         cOut
00001   2012-10-09 00:00:00.000 2012-10-09 07:21:00.000 2012-10-09 20:34:00.000
00002   2012-10-09 00:00:00.000 NULL                    NULL
00003   2012-10-09 00:00:00.000 NULL                    NULL
00004   2012-10-09 00:00:00.000 NULL                    NULL
00005   2012-10-09 00:00:00.000 2012-10-09 07:36:00.000 2012-10-09 17:04:00.000
00006   2012-10-09 00:00:00.000 2012-10-09 07:55:00.000 2012-10-09 20:34:00.000
00007   2012-10-09 00:00:00.000 2012-10-09 07:50:00.000 2012-10-09 00:00:00.000
00008   2012-10-09 00:00:00.000 2012-10-09 07:56:00.000 2012-10-09 20:35:00.000
00009   2012-10-09 00:00:00.000 2012-10-09 07:57:00.000 2012-10-09 20:32:00.000
00010   2012-10-09 00:00:00.000 2012-10-09 07:58:00.000 2012-10-09 19:03:00.000 
```

结果来自代码存储过程。它不是插入到 sql 中。但在 datagridview 上显示显示。

下一步。我需要插入记录 '00002'、'00003'、'00003'**或 cIn 和 cOut = null** 但我尝试插入所有记录和重复值。

**这段代码是新的。**

```
 Insert INTO 
    filesTA (runNo,cDate,cIn,cOut)
    VALUES 
   (SELECT 
        em.empNo,
        ISNULL(tf.cDate, '2012-10-09'),
        tf.cIn,tf.cOut
    FROM 
        filesTA tf Full Outer join Emp em 
        On tf.runNo = em.empNo AND tf.cDate = '2012-10-09') 
```

我需要代码存储过程的结果（在 Datagridview 显示上）

谢谢你的时间。:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T23:54:37.553

您可能会因为 1)`full outer join`或因为您在`distinct`选择时没有使用（您有多行，所以会有多个值）而获得重复项。 `full outer join`不是你想要的，我不认为：你想要的`inner join`。

# c#-4.0 - 使用 linq to xml 在类似命名元素的属性上过滤 xml 文件

> ID：13178968
> 
> 赞同：2
> 
> 时间：2012-11-01T14:16:29.627
> 
> 标签：c#-4.0, attributes, linq-to-xml

我想解决方案很简单，但是尽管在互联网上进行了广泛搜索，但我还没有找到答案。请帮忙！问题是：如果所需的属性不在类似命名元素的第一个元素内，我的 xml 查询不会返回所需的结果。例如，此代码不返回任何内容：

```
XElement xelement = XElement.Load("~/Employees.xml"));
        var homePhone = from phoneno in xelement.Elements("Employee")
               where (string)phoneno.Element("Phone").Attribute("Type") == "Work"
        select phoneno;
foreach (XElement xEle in homePhone)
        TextBox1.Text= xEle + "/n"; 
```

但是，如果我用“家”代替“工作”，我会得到所需的结果。事实上，我应该得到与“工作”完全相同的结果。有人可以解释如何做到这一点吗？

xml模板是：

```
<?xml version="1.0" encoding="utf-8" ?>
<Employees>
  <Employee>
    <EmpId>1</EmpId>
    <Name>Sam</Name>
    <Sex>Male</Sex>
    <Phone Type="Home">423-555-0124</Phone>
    <Phone Type="Work">424-555-0545</Phone>
    <Address>
      <Street>7A Cox Street</Street>
      <City>Acampo</City>
      <State>CA</State>
      <Zip>95220</Zip>
      <Country>USA</Country>
    </Address>
  </Employee>
  <Employee>
    <EmpId>2</EmpId>
    <Name>Lucy</Name>
    <Sex>Female</Sex>
    <Phone Type="Other">143-555-0763</Phone>
    <Phone Type="Work">434-555-0567</Phone>
    <Address>
      <Street>Jess Bay</Street>
      <City>Alta</City>
      <State>CA</State>
      <Zip>95701</Zip>
      <Country>USA</Country>
    </Address>
  </Employee>
  <Employee>
    <EmpId>3</EmpId>
    <Name>Kate</Name>
    <Sex>Female</Sex>
    <Phone Type="Home">166-555-0231</Phone>
    <Phone Type="Other">233-555-0442</Phone>
    <Address>
      <Street>23 Boxen Street</Street>
      <City>Milford</City>
      <State>CA</State>
      <Zip>96121</Zip>
      <Country>USA</Country>
    </Address>
  </Employee>
  <Employee>
    <EmpId>4</EmpId>
    <Name>Chris</Name>
    <Sex>Male</Sex>
    <Phone Type="Work">564-555-0122</Phone>
    <Phone Type="Other">442-555-0154</Phone>
    <Address>
      <Street>124 Kutbay</Street>
      <City>Montara</City>
      <State>CA</State>
      <Zip>94037</Zip>
      <Country>USA</Country>
    </Address>
  </Employee>
</Employees> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T14:34:19.677

这一行：

```
where (string)phoneno.Element("Phone") 
```

确实只使用了第一个 Phone 元素，因为您只请求了一个。您需要使用该`Elements`方法，但您可以迭代所有电话而不是员工：

```
from phone in xelement.Descendants("Phone")
where (string)phone.Attribute("Type") == "Work"
select phone; 
```

如果您想确保此电话属于员工，请在以下位置添加此条件`where`：

```
phone.Parent.Name == "Employee" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T14:34:33.067

当存在多个时，XElement.Element("name") 将返回给定名称的第一个元素。你真的想要这个：

```
var employeesWithHomePhone = from e in xdocument.Root.Elements("Employee")
                             where e.Elements("Phone").Any( p => (string)p.Attribute("Type") == "Home") 
                             select e; 
```

只需将“家庭”更改为“工作”即可获得具有工作号码的人

# php - php 自动加载：类来自什么命名空间？

> ID：13178973
> 
> 赞同：0
> 
> 时间：2012-11-01T14:16:57.643
> 
> 标签：php, namespaces, autoload

我在一个`spl_autoload_register()`注册的函数里面。在这里我可以得到类名，但是如何确定它是哪个命名空间呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T15:42:49.300

试试这个例子。您可以定义一个处理您的呼叫的类

```
<?php
namespace Example;

#Define a classLoader object
class Loader{
/**
 * Construct and set the autoloader class handler
 */
public function __construct() {
    spl_autoload_register(array($this, 'loadClass'));
}

/**
 * This method is called when an object is loaded
 * 
 * @param string $args
 */
public function loadClass($args){
    var_dump($args);
    //REMOVE: this is only for killing the process
    die;
}
}

//Create your autoloader object
new Loader();

//Calling some class
new \Some\Name\Space\Example(); 
```

你应该得到一些这样的回应。

```
string(23) "Some\Name\Space\Example" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-01T14:36:53.520

如果你想要当前的命名空间：

```
namespace MyProject;

echo '"', __NAMESPACE__, '"'; // outputs "MyProject" 
```

否则你存储在配置文件中或（在应用程序结构的评论中说明）我想......

# jquery - 创建缓慢的信息提要

> ID：13178977
> 
> 赞同：1
> 
> 时间：2012-11-01T14:17:07.540
> 
> 标签：jquery, xml, ajax

我目前在我的网站上有一个 div，它每 6 秒左右使用不同的信息淡入和淡出。现在，以前我只是在单独的 div 中硬编码，然后让它们彼此淡入淡出。

但这似乎有点草率，特别是因为数据会不断更新，因此我制作了一个 XML 文档，我可以轻松地更新我喜欢的方式和时间。

我面临的问题是我不确定如何使用 jQuery 加载 XML 文档 -> 首先选择 -> 等待 6 秒 -> 加载第二项？

到目前为止，我有这个。

```
function load_news(){
    $(".news").html("");
    $.ajax({
        url:'news.xml',
        dataType: 'xml',
        success: function(data) {
            $(data).find('news item').each(function() {
                var news = $(this).find("body").text();
                var news_img = $(this).find("img").text();
                $(".news").append("<div class='news'><div class='wrap'><div class='glare'></div><img src='img/news/"+news_img+".jpg'/><div class='name'>"+news+"</div></div></div>");
            });
        },
        error: function(){
            alert("Did not Find XML file");
        }
    });
} 
```

但正如你所看到的，我被困在如何让它循环接收到的数据？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T14:20:32.853

将这两个过程分开。

制作一个要显示的项目队列。根据计时器，只显示下一项。如果 Queue 为空，只需在超时后重试即可。

创建另一个函数，通过获取新数据定期填满队列 - 每次都获取所有可用数据。

# mysql - 如何使用 MySQL 的自定义成员资格提供程序运行 ASP.NET MVC 4？

> ID：13178983
> 
> 赞同：1
> 
> 时间：2012-11-01T14:17:18.237
> 
> 标签：mysql, asp.net-mvc, asp.net-mvc-4

我已经运行了一些具有自定义成员资格的 mvc 3 应用程序，但是对于 ASP.NET MVC 4，我找不到任何示例如何使用 MySQL 进行自定义成员资格提供程序。

我找不到任何自定义会员资格的例子，有人知道吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T16:47:55.257

您的操作方式与 MVC 3 完全相同，但是您必须通过删除 RegisterModel 类上的 [InitializeSimpleMembership] 属性来禁用 SimpleMembership。

如果您生成了一个示例应用程序，您还必须从 AccountController 中删除所有使用 SimpleMembership 的样板。

# uiviewcontroller - 如何使用滑动手势加载第二个视图控制器？

> ID：13178987
> 
> 赞同：2
> 
> 时间：2012-11-01T14:17:31.503
> 
> 标签：uiviewcontroller, uigesturerecognizer

我有一个基于选项卡的应用程序，我想使用滑动手势在视图控制器中导航。我试过：

```
 - (IBAction)swipeLeftDetected:(UIGestureRecognizer *)sender {
UISecondViewController *second =[[UISecondViewController alloc] initWithNibName:@"UISecondViewController" bundle:nil];
second.modalTransitionStyle = UIModalTransitionStyleCrossDissolve;
[self presentModalViewController:second animated:YES];

} 
```

与此配对：

```
 - (void)viewDidLoad; {
UISwipeGestureRecognizer *swipeRecognizer = [[UISwipeGestureRecognizer alloc]    initWithTarget:self action:@selector(swipeLeftDetected:)];
swipeRecognizer.direction = UISwipeGestureRecognizerDirectionLeft;
[self.view addGestureRecognizer:swipeRecognizer];

} 
```

但它在滑动时崩溃。有什么帮助吗？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-24T09:42:24.717

您的代码在我的 Xcode 上运行良好。只改变了：

```
UISecondViewController *second =[[UISecondViewController alloc] initWithNibName:@"UISecondViewController" bundle:nil]; 
```

到：

```
SecondViewController *second =[[SecondViewController alloc] init]; 
```

因为我没有 UISecondViewController 类。只需验证您的项目中有 UISecondViewController.xib，否则它会崩溃。但我不确定这是你的问题。

# c# - C# 在未知对象中设置属性

> ID：13178988
> 
> 赞同：2
> 
> 时间：2012-11-01T14:17:33.357
> 
> 标签：c#, class, object, reflection, gettype

我必须在未知对象内设置一个属性。结构如下所示：

```
 ObjA.ObjB().ObjC.PropA = propValue; 
```

ObjA 来自一个引用的类。ObjB() 是 object 类型，因此 ObjC 是未知的。我考虑过使用反射，但不知道在这种情况下如何正确使用它。

```
 object objB = ObjA.ObjB();
        Type objBType = objB.GetType();
        System.Reflection.XXXInfo objCInfo = objBType.GetXXX("ObjC");

        Type objCType = objCInfo.GetType();
        System.Reflection.PropertyInfo PropAInfo = objCType.GetProperty("PropA");
        PropAInfo.SetValue(PropAInfo, propValue, null); 
```

答案（感谢 BigM）：

```
 dynamic objAB = ObjA.ObjB(); 
        objAB.ObjC.PropA = propValue; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T14:34:40.347

这可能对你有用。

```
object objB = ObjA.ObjB();
Type objBType = objB.GetType();
System.Reflection.PropertyInfo objCInfo = objBType.GetProperty("ObjC");
object val = objCInfo.GetValue(objB);

Type objCType = val.GetType();
System.Reflection.PropertyInfo PropAInfo = objCType.GetProperty("PropA");
PropAInfo.SetValue(val, propValue, null); 
```

但是，我认为可以在这里进行一些重新架构以使生活更轻松。例如，如果您对类型***一无所知***，那么您可能会考虑使用`dynamic`和返回`dynamic`类型，`ObjC`但`PropA`那里会影响性能。

另一方面，如果有任何方法可以使用泛型，那会让你的生活更轻松。例如，此处设置属性值的代码，如果该方法是通用的，它可能能够定义类型`ObjC`- 但我无法用当前代码段真正推断出这一点。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-01T14:35:43.487

以下是一些通用扩展方法，可帮助您按名称获取和设置“未知”属性：

```
public static class ReflectionHelpers
{
    public static bool TrySetProperty<TValue>(this object obj, string propertyName, TValue value)
    {
        var property = obj.GetType()
            .GetProperties()
            .Where(p => p.CanWrite && p.PropertyType == typeof(TValue))
            .FirstOrDefault(p => p.Name == propertyName);

        if (property == null)
        {
            return false;
        }

        property.SetValue(obj, value);
        return true;
    }

    public static bool TryGetPropertyValue<TProperty>(this object obj, string propertyName, out TProperty value)
    {
        var property = obj.GetType()
            .GetProperties()
            .Where(p => p.CanRead && p.PropertyType == typeof(TProperty))
            .FirstOrDefault(p => p.Name == propertyName);

        if (property == null)
        {
            value = default(TProperty);
            return false;
        }

        value = (TProperty) property.GetValue(obj);
        return true;
    }
} 
```

还有一个使用示例：

```
public class Program
{
    public static void Main()
    {
        var foo = new Foo
        {
            Bar = new Bar
            {
                HelloReflection = "Testing"
            }
        };

        string currentValue;
        if (foo.Bar.TryGetPropertyValue("HelloReflection", out currentValue))
        {
            Console.WriteLine(currentValue); // "Testing"
        }

        if (foo.Bar.TrySetProperty("HelloReflection", "123..."))
        {
            foo.Bar.TryGetPropertyValue("HelloReflection", out currentValue)

            Console.WriteLine(currentValue); // "123.."
        }
        else
        {
            Console.WriteLine("Failed to set value");
        }
    }
}

public class Foo
{
    public object Bar { get; set; }
}

public class Bar
{
    public string HelloReflection { get; set; }
} 
```

# git - 尝试创建 git 存储库并向其提交文件但没有运气

> ID：13178990
> 
> 赞同：2
> 
> 时间：2012-11-01T14:17:34.760
> 
> 标签：git, tortoisegit

我正在使用 TortoiseGIT。

这是我的过程：

> 1) 右键单击​​空文件夹，然后单击“Git 在此处创建存储库”
> 
> 2）在目录中创建一个裸存储库
> 
> 3）右键单击另一个空文件夹，然后单击“git clone”
> 
> 4) 从创建的存储库的 URL 克隆
> 
> 5）在克隆仓库中创建一个源文件（如source.cs）
> 
> 6) 右键单击​​ git clone 目录并按 'git commit -> master'
> 
> 7）添加source.cs文件并提交
> 
> 8) 创建一个指向原始仓库的不同 git clone 目录，尝试执行 git sync

结果什么也没发生，我没有得到我在另一个仓库中提交的源文件......

任何想法如何使这项工作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T14:23:01.573

您是否创建了另一个分支？如果您创建了另一个分支并将其推送到原始存储库，则您必须在克隆时切换到它，制作该分支的本地副本。

这将在 TG 中：

*   右键单击克隆存储库并转到 TortoiseGit 菜单；
*   选择“切换/结帐”；
*   选择`remote/origin/yourBranchNameHere`分支并注意“创建新分支”框被选中，并且它的文本框填充了分支的名称；
*   按“确定”。

另外，您还记得推动更改，对吗？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-01T14:29:46.330

GIT 是分布式的。我相信正在发生的事情是您正在提交到本地（在创建的文件夹中）存储库。您将需要在该存储库上运行同步以将其推回`ORIGIN`.

当我从 SVN 切换到 GIT 时，我遇到了类似的问题，因为它们在 COMMIT 的含义上非常不同。（我绝不是这里的专家，所以我也可以离开）

# ruby-on-rails - 处理设备注册错误

> ID：13178996
> 
> 赞同：1
> 
> 时间：2012-11-01T14:17:50.783
> 
> 标签：ruby-on-rails, devise

我将设计 RegistrationsController 子类化用于创建新用户，并在调用超类的“创建”方法之前添加了一些逻辑。所以，像：

> 类 RegistrationsController < 设计::RegistrationsController
> 
> 定义创建
> 
> 超级端

我可以通过检查 resource.errors.nil? 来判断超类是否遇到错误？但是，我想区分不同的错误。例如，如果错误是“电子邮件已被接收”而不是其他一些错误返回，我想做一些不同的事情。

我可以解析字符串，但这对我来说似乎很脆弱。如果 ActiveRecord 或 Devise 的某些未来升级更改了字符串怎么办？如果字符串 get 以某种我不期望的方式本地化了怎么办？

有没有人比字符串解析更优雅地处理设计中的错误处理？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T14:44:47.853

请注意，[`devise_error_messages`](https://github.com/plataformatec/devise/blob/master/app/helpers/devise_helper.rb#L11)帮助程序只是运行附加到您指定为`resource`对象的任何错误（无论您在哪个用户模型上运行安装生成器）。

现在，您不仅可以在帮助程序中打印出错误消息，还可以在控制器方法中访问它们的键：

```
 # in RegistrationsController
 def create
   build_resource
   unless resource.valid?
     if resource.errors.has_key?(:my_error_key)
       # do something
     end
   end
 end 
```

当然，这只是一个示例，但希望它能说明您可能采取的方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T14:24:33.557

您可以针对任何默认错误修改 devise.en.yml

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-11-14T14:14:26.167

对于 Rails 验证错误，魔鬼在@details 中。

存在的典型验证错误如下所示：

```
> @user.errors
#<ActiveModel::Errors:0x007fe7e8f01234 @base=#<User id: nil, 
email: "someone@else.mail", created_at: nil, updated_at: nil>,
@messages={:password=>["can't be blank"], :email=>[]},
@details={:password=>[{:error=>:blank}]}> 
```

如您所见，失败的验证在 ActiveModel 错误对象的@details 中准确描述。

在 Rails 中甚至有一个速记方法可以很容易地测试特定的验证错误：

```
@user.errors.added? :password, :blank 
```

如果密码留空，这将返回 true。

更多关于添加？在 Ruby on Rails API 中： http: [//api.rubyonrails.org/classes/ActiveModel/Errors.html#method-i-added-3F](http://api.rubyonrails.org/classes/ActiveModel/Errors.html#method-i-added-3F)

# c++ - 线性系统 Ax= b 当只有一个常数项改变时的有效解

> ID：13178997
> 
> 赞同：3
> 
> 时间：2012-11-01T14:17:52.403
> 
> 标签：c++, linear-algebra, blas, eigen, ublas

当只有少数常数项发生变化时，如何有效地求解大型线性方程组。例如：

我目前有系统 Ax=b。我计算 A 的逆一次，将其存储在矩阵中，并且每次 b 中的任何条目更新执行矩阵向量乘法 A^-1(b) 以重新计算 x。

这是低效的，因为只有几个条目会在 b 中更新。当 A-1 保持不变但 b 中特定的已知值发生变化时，是否有更有效的方法来解决这个系统？

我使用 uBlas 和 Eigen，但不知道可以解决这个选择性重新计算问题的解决方案。感谢您的任何指导。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-01T14:21:59.173

计算`A^-1`。如果`b_i`是 的第 i 个分量`b`，则检查`d/db_i A^-1 b`（A^-1 相对于 的第 i 个分量的导数`b`）——它等于`A^-1`（特别是第 i 个列）的列。并且线性函数的导数在其域上是常数。因此，如果您有`b`和`b'`，并且它们仅在第 i 个分量上有所不同，则`A^-1 b - A^-1 b' = [d/db_i A^-1] * (b-b')_i`. 对于多个组件，只需将它们相加（`A^-1`线性）。

或者，简而言之，您可以`A^-1 (b'-b)`对为零的输入组件进行一些优化（如果只有一些组件发生变化，则将是大部分组件）。 `A^-1 b' = A^-1 (b'-b) + A^-1 (b)`. 如果您知道只有某些组件会发生变化，您可以复制 的相应列`A^-1`，然后将其乘以 b 的该组件的变化。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-01T14:36:40.553

您可以利用问题的线性：

```
x0 = A_(-1)*b0 
x = A_(-1)*b = x0 + A_(-1)*db 
```

`b`其中 db 是和之间的差异矩阵`b0`，它应该用零填充：您可以将其压缩为稀疏矩阵。

[Eigen lib](http://eigen.tuxfamily.org/dox/TutorialSparse.html#TutorialSparseIntro)有很多很酷的稀疏矩阵函数（乘法，逆，...）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-01T14:45:22.360

首先，不要执行矩阵求逆，而是使用求解器库。其次，**将您的姓名首字母`x`作为第一个猜测传递给图书馆**。

该库将执行某种分解，如 LU，并使用它来计算`x`. 如果您选择一个迭代求解器，那么它已经在完成您描述的解决方案中的大部分内容；它会从一个更糟糕的猜测开始并产生一个更好的猜测，任何好的例程都需要一个初步的猜测来加速这个过程。在许多情况下，无论如何您都对结果有一个很好的了解，因此利用它是有意义的。

如果新`b`的接近旧的`b`，那么新的`x`应该接近旧的`x`，这将作为一个很好的初步猜测。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-01T14:35:17.310

首先，不要计算矩阵逆，而是使用 LU 分解或 QR 分解（比 LU 慢但更稳定）。这种分解在矩阵大小方面比反演性能更好，并且通常更稳定（尤其是 QR）。

如果 A 发生轻微变化（例如，通过一级矩阵），有一些方法可以更新 QR 分解，但是如果 B 发生变化，则必须用新的 b 再次求解——你无法逃避这一点，这是 O(n ^2)。

但是，如果右手边 B 只改变一个固定元素，即。B' = B + dB 预先知道 dB，您可以一劳永逸地解决 A dx = dB，现在 Ax' = B' 的解决方案 x' 是 x + dX。

如果预先不知道dB，但总是几个dB_i向量的线性组合，你可以解出A dx_i = dB_i，但是如果你有很多这样的dB_i，你最终会得到一个^2过程（这实际上相当于计算逆）...