# StackOverflow 问答 14030000-14030999

# jquery - Internet Explorer 7 中的固定位置

> ID：14030000
> 
> 赞同：0
> 
> 时间：2012-12-25T10:58:09.903
> 
> 标签：jquery, css, internet-explorer, position, internet-explorer-7

在 Internet Explorer 7 中 .. CSS 属性“位置：固定”不起作用。

我搜索了一个解决方案，发现要解决这个问题，我必须在 HTML 中指定 DOC 类型

```
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd"> 
```

我正在使用 jquery，但无法指定 DOC 类型。有解决办法吗？

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-25T11:07:00.190

DOCTYPE 与 jquery 无关。DOCTYPE 是一种告诉浏览器如何处理您的页面（使用哪些标准）的方法，指定 DOCTYPE 会将您的页面更改为严格呈现模式（与 Quirks 模式相反）。阅读此处了解更多详情：[http ://www.quirksmode.org/css/quirksmode.html](http://www.quirksmode.org/css/quirksmode.html)

为您提供的解决方案：只需在 HTML/ASPX 页面的开头指定 DOCTYPE 行。这就是它的使用方式。比 jquery 会在其只读属性中为您显示它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-25T11:06:47.403

您不能将 DOCTYPE 添加到当前文档（或修改它）。

来自[MDN-docs](https://developer.mozilla.org/en/document.doctype)： *doctype 是**只读属性**。*

# excel - EXCEL VBA 具有特殊列的多个范围

> ID：14030003
> 
> 赞同：0
> 
> 时间：2012-12-25T10:58:21.533
> 
> 标签：excel, vba

我习惯`Selection.Row = 1`了`Exit Sub`。

`Range("B1")`但是如果正在使用，我需要代码继续

知道怎么做吗？提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-25T11:07:45.203

理想情况下，您应该完全避免`Selection`。但是对于您提出的问题

1.  测试选择是否包含第 1 行。
2.  如果是，则运行第二个测试，测试是否`B1`包含在 中`Selection`，如果是，则代码退出，如果不是，则代码继续。

最好在代码范围内将两个必须满足的单独测试分解为单独的测试，首先测试最常见的早期测试退出。`And`如果第一个条件已经失败，这比运行和测试第二个条件更有效。

**代码**

```
Sub TestExit()
Dim rng1 As Range
If Not Intersect(Rows(1), Selection) Is Nothing Then
Set rng1 = Intersect(Selection, [b1])
If rng1 Is Nothing Then Exit Sub
End If
End Sub 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-25T12:55:00.207

`If Selection.row = 1 And Selection.Column <> 2 Then Exit Sub`

# ruby-on-rails - 管理员和工作人员的 TODO 列表

> ID：14030004
> 
> 赞同：0
> 
> 时间：2012-12-25T10:58:26.493
> 
> 标签：ruby-on-rails, devise

我想通过以下方式制作 TODO 列表：

1.  工作人员的管理界面（用于管理工作人员的 UI）
2.  允许工作人员登录/注销

实际上，我必须定义两种用户：Admin 和 Worker。

有人可以指导我吗？

我该如何使用这个“设计”？ [https://github.com/plataformatec/devise](https://github.com/plataformatec/devise)

我把它拉到我的图书馆了吗？下一步是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-25T11:02:27.777

据我了解，您的应用很简单，所以

您可以使用用户表中的布尔列来识别用户是工人还是管理员，根据角色，您可以拥有界面

您可以观看[railscasts](http://railscasts.com/episodes/209-introducing-devise)以了解基本的设计集成

# c++ - CPP中字符串的内存管理问题

> ID：14030011
> 
> 赞同：1
> 
> 时间：2012-12-25T10:59:51.163
> 
> 标签：c++, string, memory-management

我正在尝试分离用 ' ' 填充的字符串并将其存储在数组中。为此，我编写了代码，

```
string* componentsOfStringSeperatedBystring(string originalString, string stringCompare){

string *arryOfStrings=NULL;

string *tempArrayString = NULL;
for (int i=0; i<originalString.length(); i++) {

    size_t position = originalString.find(stringCompare);
    cout << "\nposition" <<position;

    if (position == originalString.npos) {

        break;
    }
    size_t subStringLength = originalString.length() - position;

    cout << "\nsubStringLength" <<subStringLength;
    string subString = originalString.substr(0,position);

    cout << "\nsubString" <<subString;

    tempArrayString = (string*)realloc(arryOfStrings, (i+1)*sizeof(string));

    cout << "\n i \t" <<i;
    if (tempArrayString != NULL) {

        arryOfStrings = tempArrayString;
        arryOfStrings[i] = subString;
    }

    cout << "\narryOfStrings" <<arryOfStrings;
    originalString = originalString.substr(position+1,subStringLength);
}

return arryOfStrings;
} 
```

我在“arryOfStrings[i] = subString;”行上崩溃了，如果我只是先分配足够的空间，然后不重新分配，我就不会崩溃。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-25T11:01:32.877

您需要使用`new`with `std::string`not c 内存分配函数。
他们不调用`std::string`类的构造函数，不像`new`. `std::string`并且需要调用类的构造函数以进行正确的初始化。

老实说，您根本不应该使用`std::string *`。这样一来，您就失去了`char *`从一开始就避免使用而获得的所有优势。只需使用：

```
std::vector<std::string> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-25T11:03:21.907

不要在 C++ 风格的对象上使用 C 风格的内存管理。要么完全采用 C 风格（使用以 null 结尾的`char*`字符串），要么完全采用 C++ 风格（使用`std::vector<std::string>`）。

# c# - 显示 ProgressDlg 时未调用自定义操作

> ID：14030014
> 
> 赞同：2
> 
> 时间：2012-12-25T11:00:16.917
> 
> 标签：c#, installation, wix, windows-installer

我正在尝试更新我的自定义 ProgressDlg 对话框上的进度条值，但是当 ProgressDlg 出现时**我的自定义操作没有被调用。**

产品.wxs

```
 <Product>
         <CustomAction Id="ShowTime" BinaryKey="myAction"  DllEntry="ShowTime" Execute="deferred" Return="check" />    
         <InstallUISequence>
              <!-- replace standart progress dialog with my custom -->
              <Show Dialog="DbProgressDlg" After="ProgressDlg" />      
         </InstallUISequence>    
         <InstallExecuteSequence>
              <!-- call? when? not clear -->
              <Custom Action="ShowTime" After="InstallInitialize"></Custom>
         </InstallExecuteSequence>
    </Product> 
```

我的自定义对话框 DbProgressDlg.wxs

```
<UI>
     <Dialog>
        <Control Id="InfoText" Type="Text" X="50" Y="130" Width="250"  Height="17">
          <Subscribe Event="ActionData" Attribute="Text" />
        </Control>
        <Control Id="MyProgressBar" Type="ProgressBar" X="50" Y="50"   Width="250" Height="20">
          <Subscribe Event="SetProgress" Attribute="Progress" />
        </Control>
     </Dialog>
     <ProgressText Action="ShowTime" Template="Doing Stuff: [1]" />
</UI> 
```

我的问题：

1.  如何调用我的自定义托管操作？
2.  可以使用 show standard ProgressDlg 但将进度分为两步（我的自定义文件和标准文件副本）吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-28T17:42:59.657

它看起来很有趣，但问题出在文件部分。

1.  直到您的包没有文件才调用该操作

2.  您可以使用标准 ProgressDlg 并通过几个步骤拆分进度。在自定义操作中，我们可以重置进度条值并使用我们的新值更新它

# oracle11g - oracle 上的自动增量（需要添加此语句吗？）

> ID：14030021
> 
> 赞同：0
> 
> 时间：2012-12-25T11:01:37.523
> 
> 标签：oracle11g, sequence, auto-increment

我们是否需要为主键添加自动增量语句？如果是这样，它是如何管理的？

我创建了一个类似的表：

```
CREATE TABLE STUDIO
(STUDIOID NOT NULL,
NAME VARCHAR2(20),
ADDRESS VARCHAR2(50),
PHONE NUMBER(11),
URL VARCHAR2(20),
CONSTRAINT STUDIO_STUDIOID_pk PRIMARY KEY(STUDIOID)); 
```

* * *

```
 CREATE SEQUENCE STUDIO_SEQ
  MINVALUE 1
  MAXVALUE 999999
  START WITH 1
  INCREMENT BY 1
  CACHE 10; 
```

我没有为 定义一个类型，`studioid`因为它将在我为这个表添加的 studio_seq 序列中被赋值。

我的问题是，我是否也应该在上表的任何地方写自动增量？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-25T11:35:06.963

你必须使用触发器

```
create or replace TRIGGER STUDIO_trg 
BEFORE INSERT
ON STUDIO 
REFERENCING NEW AS New OLD AS Old
FOR EACH ROW
DECLARE
   tmpvar   NUMBER;
BEGIN
   tmpvar := 0;
   SELECT SEQUENCE STUDIO_SEQ.NEXTVAL
     INTO tmpvar
     FROM DUAL;

   :NEW.STUDIOID := tmpvar;
END TRIGGER STUDIO_trg; 
```

# ruby-on-rails - rails memcached dalli 密钥的编组错误

> ID：14030025
> 
> 赞同：1
> 
> 时间：2012-12-25T11:02:06.973
> 
> 标签：ruby-on-rails, memcached, rails-engines, dalli

我的控制器中有这样的动作：

```
def my
  @user = Ads::User.find current_user.id
  @postings = Rails.cache.fetch("@user.postings.includes(:category)") do
    @postings = @user.postings.includes(:category)
  end
end 
```

我正在尝试缓存@postings 并得到这样的错误：

```
Marshalling error for key '@user.postings.includes(:category)': can't dump anonymous class #<Module:0x000000048f9040>
You are trying to cache a Ruby object which cannot be serialized to memcached. 
```

如果我尝试缓存 @postings 而不包含任何错误。无法弄清楚是什么问题。

您可以在底部找到相关型号：

```
module Ads
  class User < ::User
    has_many :postings, dependent: :destroy
  end
end

module Ads
  class Posting < ActiveRecord::Base
    belongs_to :user, counter_cache: true
    belongs_to :category
  end
end

module Ads
  class Category < ActiveRecord::Base
    has_many :postings, dependent: :destroy
  end
end 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-25T17:59:29.060

缓存获取代码都是错误的。**要获取**的参数是一个字符串，用于标识您想要的数据。您的代码试图为每个用户使用相同的字符串，因此他们都会看到相同的帖子，这些帖子将通过第一次调用此方法保存。

在下面的示例中，我使用了用户 ID 和字符串“postings”来指示特定用户的所有帖子。

在 fetch 块内分配**@postings**是不正确的，块的结果（查询结果）保存到**@postings**

最后，ActiveRecord 延迟进行实际的数据库调用，直到绝对必要。查询结束时的**.all**调用将返回数据，并且数据是您要缓存的数据，而不是用于创建查询的配置数据。

这是正确的代码：

```
@postings = Rails.cache.fetch("#{@user.id}:postings") do
    @user.postings.includes(:category).all
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-25T16:22:33.063

它可能会抱怨这个：

`class User < ::User`

你有什么理由不使用：

`class User < ActiveRecord::Base`

# php - 有效值上的未定义索引，但该值在 if 子句中已更改？

> ID：14030027
> 
> 赞同：0
> 
> 时间：2012-12-25T11:02:08.970
> 
> 标签：php, arrays, indexing, undefined, laravel

嗨，我正在上一个时间表课程，但我遇到了最奇怪的问题。通常我会很快弄清楚自己，但这次它完全是零意义

if 子句如下：

```
if($start < self::$aStoreHours[$day]['start']){ 
```

正如您在这里看到的那样，它给了我一个未定义的索引错误，这会告诉我数组键不存在所以我使用 var_dump 返回完整的数组，我得到：（我只剪掉了第一个相关部分）

```
array(6) { [2]=> array(2) { ["start"]=> string(3) "480" ["end"]=> string(4) "1300" } 
```

所以键 2 确实存在，现在我转储返回的 $day 变量

```
string(1) "2" 
```

好的，这给出了 2，这很奇怪，所以我认为它可能一定是一个 INT（以前从未遇到过这个问题，但在严格的语言中这很重要）所以我使用 intval 和 (int) 方法现在 PHP 在我所以这不是问题

现在对于最奇怪的部分，完整的错误是

```
Undefined index: 1 
```

所以它试图告诉我，它试图调用 self::$aStoreHours[1] 但 $day 变量肯定是 2 （是的，行号是正确的，如果我在 $day 变量返回 2 之前转储它）

所以突然 $day 变量要么被忽略，但它会给出一个 null 所以不是这样，据我所知 $day 变量被更改为 1 这是数组中不存在的键，但它不会改变

更奇怪的是，代码昨天运行没有问题（它使用时间戳，所以不太奇怪）

我希望这个问题已经得到充分解释，有人可以帮助我，因为这对我来说毫无意义

注意：使用 Laravel 框架

更新：是的，它在函数范围内运行，变量不能从外部更改更大的部分代码

```
private static function addTime($day,$start,$end,$title){

    echo $day.':'.$start.':'.$end.':'.$title.'<br>';

    //Check if start isnt lower then opening time, and that end isnt past closing time
    if($start < self::$aStoreHours[$day]['start']){
        $start = self::$aStoreHours[$day]['start'];
    }

    if($end > self::$aStoreHours[$day]['end']){
        $end = self::$aStoreHours[$day]['end'];
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-29T16:46:38.273

感谢有用的评论，我发现问题在第一次调用时没有出现，但在第 7 次调用时，我通过添加这部分代码发现了这一点

```
if(!array_key_exists($day, self::$aStoreHours)){
 die(var_dump($day));
} 
```

虽然在我在第一次通话时杀死它之前，但当时 $day 仍然正确 事实证明，选择的时间戳是从下周开始的星期一，这不是 SQL 查询，因为允许脚本获取过去和未来的时间戳，只要涉及今天的时间戳和收盘时一周的最后一天

但是我削减了比当前时间段更长或更短的时间戳，可悲的是我的结束时间戳，我用来削减一天到远的时间戳，给出下周星期一的时间戳。它试图将其解析为本周的星期一，但这是不允许的，因为它是星期二，星期一是无关紧要的。

长话短说，我必须多思考一下。

感谢大家的帮助！

# android - 在“\ n”上拆分结果行时，在android中返回索引超出范围时获取调用日志

> ID：14030028
> 
> 赞同：0
> 
> 时间：2012-12-25T11:02:10.147
> 
> 标签：android, calllog

在 android 中检索呼叫日志时，当我尝试根据索引 1 的投影在“\n”上拆分结果时，索引超出范围

```
 /* 
     * projection string that will contain the values retrieved 
     */
    String[] projection = new String[] { Calls.DATE, Calls.NUMBER, Calls.DURATION };

    /*
     * Cursor to loop on the results of the query
     */
    Cursor callLogCursor = getApplicationContext().getContentResolver().query(CallLog.Calls.CONTENT_URI, projection, null, null, CallLog.Calls.DEFAULT_SORT_ORDER); 

    callLogCursor.moveToFirst();

    /*
     * Loop through the call log and get the number needed or until 
     * we retrieved all call logs
     */ 
    String row;
    while (callLogCursor.isAfterLast() == false) {
        for (int i=0; i<callLogCursor.getColumnCount(); i++) {
            row = callLogCursor.getString(i);
            String[] parts = row.split("\n");
            showToast(callLogCursor.getString(i));
            callLogs += CommonUtils.formatDate(parts[0]) + "-" + parts[1] + "-" + parts[2] + "\n";
         }
          numberOfCallLogRetrieved++;
          callLogCursor.moveToNext();
    } 
```

不确定我是否在这里遗漏了什么。我真的很感激任何帮助。

吐司连续显示 3 个值

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-25T12:53:57.070

感谢@Martin Foot，我找到了答案

for 循环实际上仅获得单个结果，而不是所有结果。因此，当获取 callLogCusor.getString(i) 时，我得到的是特定列的值，而不是所有行。

代码现在看起来像

```
for (int i=0; i<callLogCursor.getColumnCount(); i++) {
            if(i == 0){
                String type = getLogType(callLogCursor.getString(i));
                callLogs += type;
            } else if (i == 1){
                callLogs += "-" + CommonUtils.formatDate(callLogCursor.getLong(i));
            } else if (i == 2){
                callLogs += "-" + callLogCursor.getString(i);
            } else if (i == 3){
                callLogs += "-" + CommonUtils.formatDuration(callLogCursor.getInt(i)) + "\n";

            }
         } 
```

# java - JPanel 数据在鼠标单击时发生变化

> ID：14030033
> 
> 赞同：-2
> 
> 时间：2012-12-25T11:02:29.820
> 
> 标签：java, swing, jbutton

我`JButton`在我的摇摆应用程序中使用了三个 s。当我点击每个按钮时，相应的数据（格式`JTable`为`JScrollPane`）将显示在`JPanel`.

问题：当我调整大小时`JFrame`，将`JPanel`替换为默认按钮（我首先单击的按钮）信息而不是当前`JButton`信息。

我的示例代码：

```
 jbutton1.addActionListener(this);
      jbutton2.addActionListener(this); 

    public void actioPerformed(ActionEvent e){
    if(e.getActionCommand.equals("button1"))
    JPanel.add(table1);
     }
    if(e.getActionCommand.equals("button2"))
     JPanel.add(table1);
      }....... 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-25T17:15:02.180

调整大小`JPanel`不会突然替换组件或将其他组件添加到面板。

我最好的猜测（由于问题中的信息有限，这是一个猜测）是你的按钮都没有真正起作用，只是显示了错误的信息。

您发布的代码仅包含一个`add`没有任何重新验证布局的代码。`Container#add`请参阅该方法的 javadoc 。调整大小时，布局会重新验证，您会看到`JPanel`.

可能的解决方案：

*   呼叫`invalidate`和`repaint`在您的面板上以及在您的`ActionListener`
*   使用 a`CardLayout`在不同组件之间切换

我个人更喜欢这个`CardLayout`选项，但这可能取决于具体情况。

请注意，在您发布的代码中，您添加`table1`了两个按钮。可能是复制粘贴问题，或者您的实际代码有问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-26T16:31:02.377

我无法清楚地表达问题。很抱歉给您带来不便。

**JPanel.removeAll()**方法解决了我的问题。

我在将任何新组件添加到 JPanel 之前添加了此方法。这修复了 JPanel 的意外行为。

# ruby-on-rails - 是否可以只显示属于所选国家的都道府县？

> ID：14030041
> 
> 赞同：0
> 
> 时间：2012-12-25T11:03:39.020
> 
> 标签：ruby-on-rails, ruby-on-rails-3, view

我想在单独的选择字段中显示**国家**和**地区。**
但是县将国名和表中的所有县一起显示。

如何将县的记录限制为属于国家的唯一县，这是在先前的字段选择中选择的？

在我的模型中，我有诸如

*   用户（此模型有一个 UserProfile）
*   UserProfile（此模型属于用户，有一个国家和一个地区）
*   国家（这个模型属于UserProfile，有很多州）
*   县（该模型属于 Country 和 UserProfile）

**_form.html.erb**

```
<%= f.fields_for :user_profile do |profile_form| %>

  <%= profile_form.label :country_id %><br />
  <%= profile_form.collection_select :country_id, Country.order(:name_en), :id, :name_en, include_blank: true %>

  <%= profile_form.label :prefecture_id, "State or Province" %><br />
  <%= profile_form.grouped_collection_select :prefecture_id,Country.order(:name_en),:prefectures, :name_en, :id, :name,include_blank: true %>

<% end %> 
```

**模型/国家.rb**

> has_many :都道府县

**模型/地区.rb**

> 归属地：国家

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-25T11:12:50.980

您必须在更改国家/地区时触发 ajax 请求，这将根据国家/地区获取地区列表

您可以参考 [博客文章](http://paramitech.com/2009/11/dynamically-udating-select-list-using-jquery-and-ajax/)，这将帮助您了解如何实现这一点。您也可以参考源代码。

# mfc - MFC 以毫秒为单位的测量功能

> ID：14030043
> 
> 赞同：6
> 
> 时间：2012-12-25T11:04:03.107
> 
> 标签：mfc, ctime

我如何计算某个函数（重复调用）所需的毫秒数？
我想：
`CTime::GetCurrentTM()`之前，
`CTime::GetCurrentTM()`之后，

然后将结果插入到`CTimeSpan diff = after - before`.
最后将该差异存储到对所有差异求和的全局成员，因为我想知道这个函数花费的总时间。

但它会在几秒钟内而不是几毫秒内给出答案。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-25T11:11:34.610

MFC 是 C++，对吧？

如果是这样，您可以使用`clock()`.

```
#include <ctime>

clock_t time1 = clock();
// do something heavy
clock_t time2 = clock();
clock_t timediff = time2 - time1;

float timediff_sec = ((float)timediff) / CLOCKS_PER_SEC; 
```

这通常会给你毫秒精度。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-03-25T23:51:12.943

如果您使用的是 MFC，最好的方法是使用 WIN API。而且由于您只是担心计算时差，因此以下功能可能非常适合您。

```
GetTickCount64() 
```

直接返回系统启动后[经过的毫秒数。](http://msdn.microsoft.com/en-us/library/windows/desktop/ms724411%28v=vs.85%29.aspx)

如果您不打算让您的系统长时间运行（精确地超过 49.7 天），稍微快一点的版本 - [GetTickCount()](http://msdn.microsoft.com/en-us/library/windows/desktop/ms724408%28v=vs.85%29.aspx)函数

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-05-04T17:56:07.747

众所周知，COleDateTime 在内部以毫秒为单位工作，因为它将时间戳存储在其 m_dt 变量上，该变量是 DATE 类型，因此具有用于预期目的的分辨率。

我可以建议你把你的时间基于

```
DATE now= (DATE) COleDateTime::GetCurrentTime(); 
```

然后进行相应的计算。

# web - Notepad++ 上传到 FTP 并保存文件

> ID：14030048
> 
> 赞同：1
> 
> 时间：2012-12-25T11:04:49.760
> 
> 标签：web, notepad++

因此，我的计算机上有一个域和一个目录，可以使用我的 ipadress 作为链接访问，我想要这样当我单击保存时，它会将更新的版本上传到 FTP 并更新我计算机上的文件，这样我的域网站和我的ipadress 网站会随着新的变化而更新，这可能吗？

如果文字难以理解，我很抱歉，有点难以解释......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-25T11:06:29.570

使用[Win-scp](http://winscp.net/eng/download.php)。

安装它，然后：

*   直接从服务器打开文件，保存时文件将被上传
*   单击[保持远程目录为最新](http://winscp.net/eng/docs/task_keep_up_to_date)，一旦您在本地保存文件，winscp 将为您上传。

要使用带有 winscp 的 Notepad++，您需要将[winscp 配置为使用 notepad++](http://elementdesignllc.com/2009/09/notepad-ftp-winscp/)。

# magento - 如何在 Magento 中为仅允许的 IP 地址启用自定义付款方式

> ID：14030054
> 
> 赞同：0
> 
> 时间：2012-12-25T11:06:19.610
> 
> 标签：magento

如何在 Magento 中为系统->配置->开发人员->开发人员客户端限制中记录的仅允许的 IP 地址启用自定义付款方式

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-25T17:20:11.423

看看[这篇](https://stackoverflow.com/questions/14011348/disable-payment-options-only-cash-on-delivery-for-particular-product-magento)文章，并把你的条件放在`toOptionArray()`方法中。

# objective-c - 寻找 NSOparation 派生下载器

> ID：14030055
> 
> 赞同：-1
> 
> 时间：2012-12-25T11:06:28.177
> 
> 标签：objective-c, ios5

有谁知道为基于 NSOperation 的 IOS6 编写异步下载器的好例子？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-25T11:28:57.070

基于操作的网络的一个很好的例子是[AFNetworking](https://github.com/AFNetworking/AFNetworking)

它是一个图书馆，所以他们没有解释它是如何完成的，但它是一个很好的例子，说明应该如何完成这种事情

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-25T11:19:35.047

假设你想下载一个 URL，我建议 QHTTPOperation。谷歌一下 - 它是一堆 Apple 代码示例的一部分。

# java - Java按日期保存对象

> ID：14030062
> 
> 赞同：0
> 
> 时间：2012-12-25T11:07:02.837
> 
> 标签：java, exception, object, file-io, io

我正在尝试将对象保存到具有以下类的文件中，但它给了我 java.io.NotSerializableException。

```
import java.io.FileOutputStream;
import java.io.ObjectOutputStream;
import java.util.ArrayList;
import java.util.Calendar;

class Saver {

  Calendar cal = Calendar.getInstance();

  public void save(ArrayList<Product> products) {
    for (int i = 0; i < products.size(); i++) {
      try { 
        FileOutputStream saveFile = new FileOutputStream(
        "/" + products.get(i) + ".product"
        );

        ObjectOutputStream oos = new ObjectOutputStream(saveFile);
        oos.writeObject(products.get(i));
      } catch(Exception ex) {
        System.out.println(ex); 
      }
    }
  }

} 
```

而类 Product 看起来像这样：

```
class Product {

  private String title;
  private int id;
  private double price;

  public Product(String title, int id, double price) {
    this.title = title;
    this.id = id;
    this.price = price;
  }

  public String getTitle() {
    return title;
  }

  public int getId() {
    return id;
  } 

  public double getPrice() {
    return price;
  }

  public void setTitle(String title) {
    this.title = title;
  }

  public void setId(int id) {
    this.id = id;
  }

  public void setPrice(double price) {
    this.price = price;
  }

} 
```

我在做什么错，然后如何将对象存储在文件中？提前致谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-25T11:08:59.430

您必须通过实现[`Serializable`](http://docs.oracle.com/javase/6/docs/api/java/io/Serializable.html)接口来序列化您的 Product 类，该接口是您要保存状态的类的标记接口。

```
class Product implements Serializable { 
```

[java中对象序列化的教程链接](http://docs.oracle.com/javase/tutorial/jndi/objects/serial.html)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-25T11:09:25.813

正如例外所说，类（`Product`在这种情况下）是不可序列化的。您*可能*可以摆脱这种变化：

```
class Product implements Serializable {
     // Code as before
} 
```

但是您还应该考虑为版本控制声明一个`serialVersionUID`字段。阅读文档[`Serializable`](http://docs.oracle.com/javase/7//docs/api/java/io/Serializable.html)和[序列化教程](http://docs.oracle.com/javase/tutorial/jndi/objects/serial.html)以获取*更多*详细信息。您不需要编写任何新成员 - 它只是一个标记接口 - 但您可以添加其他方法来更好地控制序列化和反序列化。

您还应该考虑替代序列化方法 - 我个人喜欢[Google Protocol Buffers](http://protobuf.googlecode.com)，但我有偏见 :) 考虑您需要什么版本控制以及任何跨平台支持。

此外：

*   您`Product.toString()`在文件名中隐式使用，但这不会给您任何有用的东西。您*希望*文件名基于什么？
*   你没有做任何事情`cal`- 你希望如何存储当前日期/时间？

# tridion - 在此触发器中从何处获取 URL 数据

> ID：14030064
> 
> 赞同：0
> 
> 时间：2012-12-25T11:07:07.200
> 
> 标签：tridion, tridion-2011

我有旧的 tridion 2009 触发器，这是代码：

```
CREATE TRIGGER My_TABLE ON [ITEMS]  
FOR INSERT  
AS  
    INSERT INTO My_TABLE(ACTION, PUBLICATION_ID, ITEM_REFERENCE_ID, ITEM_TYPE, LAST_PUBLISHED_DATE, URL, SCHEMA_ID)  
        SELECT 'ADD', PUBLICATION_ID, ITEM_REFERENCE_ID, ITEM_TYPE, LAST_PUBLISHED_DATE, URL, SCHEMA_ID  
        FROM inserted 
```

在 tridion 2009`URL`和`SCHEMA_ID`where`ITEMS`表中的一部分，但是当我们升级到 Tridion 2011 SP1 时，这些列不再存在于`ITEMS`表中。

`SCHEMA_ID`被移到`COMPONENT`表中，我有点好奇如何获取每种类型项目的 URL（页面、组件等。我们是否需要使用 link_info 表来获取 url）

让我知道哪个表将用于获取之前`URL`的`ITEMS`表

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-26T14:36:21.197

从未记录数据库详细信息是有原因的：SDL 不支持在此级别访问该数据。

您有一个非常丰富的 API 可以在需要时检索所需的数据，这允许 SDL 不断改进数据库层，而不必担心实现支持。

在你的情况下，如果你在这里解释一些事情可能会有所帮助......

1.  这是哪个数据库？阅读列名，它看起来像是一个内容交付数据库？
2.  为什么要存储发布的 URL？它已经在那里了。

如果还不清楚，您应该使用链接`classes`来获取 URL，而不是`LINK_INFO`表格。正确设置的环境将缓存这些值，因此您无需担心任何数据库影响。如果这还不够，并且您确实需要具有自定义值的自定义表，那么请考虑使用 Deployer Extension 来根据需要填充您的表。

# c++ - std::is_default_constructible 错误，如果构造函数是私有的

> ID：14030070
> 
> 赞同：8
> 
> 时间：2012-12-25T11:07:59.120
> 
> 标签：c++, c++11, typetraits

我有以下片段

```
#include <type_traits>
#include <boost/type_traits.hpp>

class C { C() { } };

int main()
{
   static_assert(!boost::has_trivial_default_constructor<C>::value, "Constructible");
   static_assert(!std::is_default_constructible<C>::value, "Constructible");
} 
```

条件不相等，但第一个条件工作正常，第二个构造给出错误，构造函数是私有的。编译器 gcc 4.7 ... 那么，这是 gcc 错误，还是由标准定义的？

[http://liveworkspace.org/code/NDQyMD](http://liveworkspace.org/code/NDQyMD) 5 美元

好的。由于这个条件真的不相等 - 我们可以使用这样的东西

```
#include <type_traits>
#include <boost/type_traits.hpp>

class C { private: C() noexcept(false) { } };

int main()
{
   static_assert(!boost::has_nothrow_constructor<C>::value, "Constructible");
   static_assert(!std::is_nothrow_constructible<C>::value, "Constructible");
} 
```

[http://liveworkspace.org/code/NDQyMD](http://liveworkspace.org/code/NDQyMD) 24 美元

无论如何，我知道，static_assert 不应该失败，因为类型实际上不是默认可构造的/不是 nothrow 可构造的。**问题是：为什么会出现编译错误，而不是我的静态断言？**

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-25T15:27:20.197

看起来像一个编译器错误。让我们看看下面的 SFINAE 示例（在`g++`'s `type_traits`header 中使用了类似的实现）

```
#include <type_traits>

class Private
{
    Private()
    {

    }
};

class Delete
{
    Delete() = delete;
};

struct is_default_constructible_impl
{
    template<typename T, typename = decltype(T())>
    static std::true_type test(int);

    template<typename>
    static std::false_type test(...);
};

template <class T>
struct is_default_constructible: decltype(is_default_constructible_impl::test<T>(0))
{

};

int main()
{
    static_assert(is_default_constructible<Private>::value, "Private is not constructible");
    static_assert(is_default_constructible<Delete>::value, "Delete is not constructible");
} 
```

第二个断言按预期工作，我们无法推断`Delete`类型，因为该类只有一个已删除的构造函数。但是当编译器尝试推断 的类型时`Private()`，它会给出错误：`Private::Private() is private`。因此，我们有两个具有私有构造函数的类，但其中一个给出错误，第二个 - 没有。我认为，这种行为是错误的，但我在标准中找不到确认。

PS所有关闭的代码都由clang编译，没有任何错误。

# objective-c - iPhone：访问常量值

> ID：14030071
> 
> 赞同：1
> 
> 时间：2012-12-25T11:07:59.603
> 
> 标签：objective-c, ios, cocoa-touch, constants

我已经定义了一些常量，比如

```
#define val_a @"A"
#define val_b @"B"
#define val_c @"C" 
```

现在我有一些与我定义的常量同名的键，我想打印常量的值（不使用**常量键**）。我试过了，

```
- (NSString *) actualValForKey:(NSString *)key 
 {
     return key; //It will return **key** parameter, but I want to return the **constant value** as defined
 } 
```

我可以像`NSLog(@"Value = %@", [self actualValForKey:keys]);`所有键都是动态的那样写，我不能这样写`NSLog(@"Value = %@", val_a);`。

在这里，`keys`将作为`NSString`。

PS 常数标识。

是否可以？备择方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-25T11:21:49.853

在 C++/ObjectiveC 中，您无法在运行时获取宏的名称。因为，**宏名被宏体的副本所取代**。

[您可以在此处](http://msdn.microsoft.com/en-us/library/503x3e3s%28v=vs.80%29.aspx)阅读文档

> #define 指令通常用于将有意义的标识符与常量、关键字和常用语句或表达式相关联。表示常数的标识符有时称为“符号常数”或“清单常数”。表示语句或表达式的标识符称为“宏”。在此预处理器文档中，仅使用术语“宏”。当宏的名称在程序源文本或某些其他预处理器命令的参数中被识别时，它被视为对该宏的调用。宏名称由宏主体的副本替换。如果宏接受参数，则宏名称后面的实际参数将替换宏体中的形式参数。

但是，如果你真的需要。您可以编写构建脚本，它解析`#define`文件中的所有指令并创建一个 NSDictionary。您可以在代码中使用它。

例如，我添加了一个文件。这显示了脚本的正确使用。

![在此处输入图像描述](../Images/2d9f45cbdcb37a91da48a0199459f9d3.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-25T11:25:13.517

这是预处理器，只要你写`keys=val_a` `val_a gets`替换为@"A"，那@"A" 就会被发送到方法中。

根据命名约定，所有的宏都应该用大写字母，这样你就不会在变量中使用相同的名称。

```
#define VAL_A @"A"
#define VAL_B @"B"
#define VAL_C @"C" 
```

或者，如果您需要做类似的事情，您可以创建一个包含所有键值集的字典。

编辑：

如果您使用此定义，那么它将您传递的值转换为字符串，您可以将其存储在键中。

```
#define RET_NAME(n) #n

NSString *key=[NSString stringWithFormat:@"%s", RET_NAME(val_a)]; 
```

现在`key`将存储`val_a`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-25T13:02:02.217

感谢您对此的关注，最后我以初学者的方式解决了它！;)

```
- (NSString *) actualValForKey:(NSString *)key 
 {
     NSString *str = @"";

     if([key isEqualToString:val_a])
     {
        str = @"A";
     }
     else if([key isEqualToString:val_b])
     {
        str = @"B";
     }
     .
     .
     return str;
 } 
```

PS 需要使用与**constant**`#define`相同的名称进行更新。

 *** * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-25T15:30:39.047

我通常使用以下方式将名称和值分开，使用 #defines 或 const 字符串来定义事物的名称，然后将实际值填充到字典中。原因是这将比普通的#define 更好地迁移到您的价值观的外部资源。此外，它还可以与 NSUserDefaults 等其他方法配合使用，例如（这是即兴表演）

```
#define kNameForThing
#define kNameForOtherThing

- (void) initValues {
   // _defaults is a NSDictionary
   _defaults = @{
        kNameForThing : @"A",
        KNameForOtherThing : @"B"
   };
}

- (void) useValue {
   NSString value = _defaults[kNameForThing];
   ....
} 
```

您可以进行各种一致性测试，检查值是否存在以及所有预期的键都存在等等，如果您从文件加载此信息，这将变得更加重要

从长远来看，为事物使用更具表现力的名称也会对您有所帮助。这是使用新的目标 c 文字语法来更轻松地创建和访问对象**

# android - 微调器 setOnItemSelectedListner 在创建活动时触发

> ID：14030072
> 
> 赞同：2
> 
> 时间：2012-12-25T11:08:07.730
> 
> 标签：android, spinner

创建活动后，将自动调用微调器**setOnItemSelectedListner()事件。**如何**停止**此自动呼叫。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-25T12:09:27.053

```
spinner.setOnItemSelectedListener(new OnItemSelectedListener() {
    int count=0;
    @Override
    public void onItemSelected(AdapterView<?> arg0, View arg1, int arg2, long arg3) {
        if(count >= 1){
        //do something
        }
        count++;
    }

    @Override
    public void onNothingSelected(AdapterView<?> arg0) {
    }
}); 
```

# windows - 批处理编程中的文件处理？

> ID：14030082
> 
> 赞同：0
> 
> 时间：2012-12-25T11:09:34.050
> 
> 标签：windows, batch-file

我有一个文本文件，每个新行都有一个数字，并且都按升序排列。

内容如下：

```
1
13
25
37
49
97
109
121 
```

我只想提取与前一个数字相差大于 12 的数字。我希望为此使用批处理程序....

我怎样才能做到这一点 ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-25T12:02:19.317

我很想看到你尝试，但无论如何我试了一下，这是我能得到的最接近的

```
c:\temp>type test.txt
1 line 1
10 line 1a
13 line 2
25 line 3
22 line 3a
37 line 4
49 line 5
97 line 6
109 line 7
121 line 8

c:\temp>test.bat
25 line 3
37 line 4
49 line 5
97 line 6
109 line 7
121 line 8

c:\temp> 
```

在 test.bat 中使用此代码：

```
@echo off

SETLOCAL ENABLEDELAYEDEXPANSION

set /a cur="0"
for /f "tokens=1,* delims= " %%a in ('type test.txt') do (

  set line=%%a %%b   

  set /a num="%%a"
  set /a dif="!num!-!cur!"

  if !dif! geq 12 @echo !line!

  set /a cur="%%a"
) 
```

# ruby-on-rails - 如何保持物品的顺序

> ID：14030084
> 
> 赞同：0
> 
> 时间：2012-12-25T11:09:36.470
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我已经为在线考试建立了一个表格，它显示问题和答案，用户可以选择答案，然后他们可以提交表格。这是我的表格代码：

```
<%= form_tag({ controller: 'exams', action: 'check_results' }, authenticity_token: true) do %>
  <ol class="questions">
    <% @questions.each do |question| %>
  <li class="content_question"><%= kramdown question.content %></li>

  <ol class="answers">
    <% question.answers.shuffle.each do |answer| %>
      <table class="answer_contents">
        <tbody>
      <tr>
        <% if question.question_type.shorcut == 'MC' %>
          <td><%= check_box_tag "user_answer_ids[#{question.id}][]", answer.id, false, id: "user_answer_ids_#{answer.id}" %></td>
          <td><li></li></td>
          <td><%= label_tag "user_answer_ids_#{answer.id}", kramdown(answer.content) %></td>
        <% else %>
          <td><%= radio_button_tag "user_answer_ids[#{question.id}][]", answer.id, false, id: "user_answer_ids_#{answer.id}" %></td>
          <td><li></li></td>
          <td><%= label_tag "user_answer_ids_#{answer.id}", kramdown(answer.content) %></td>
        <% end %>
      </tr>
       </tbody>
      </table>
    <% end %> <%# question.answers %>
  </ol> <%# ol.answers %>
  <br>
   <% end %> <%# @questions %>
   </ol> <%# ol.questions %>
  <%= submit_tag "Finish Exam", disable_with: "Checking results...", confirm: "Are you sure?", class: "btn btn-primary" %>
<% end %> <%# form_tag %> 
```

我希望答案的顺序是随机的，所以我使用：

```
<% question.answers.shuffle.each do |answer| %> 
```

但是使用此代码，每次刷新页面时答案都是随机的。我希望答案是随机的一次，所以我可以稍后查看考试，问题和答案的顺序正确，就像用户做的时候一样。任何人都可以给我一些想法或解决方案吗？非常感谢。

我有的一些模型：

*   问题有很多答案
*   答案属于问题
*   考试有很多exam_questions
*   考试有很多exam_answers

**ExamQuestion**模型用于存储考试问题的列表 id，它有一些列：`exam_id, question_id, topic_id, correct (boolean), sured (boolean)`.

**ExamAnswer**模型用于存储用户的列表答案 id，它有一些列：`exam_id, question_id, user_answer_id`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-25T16:10:09.983

如果你想永远随机一次：

我认为您有两种方法可以解决这些问题：

1) 向 ExamQuestion 添加新列：**answers_ids**包含答案的 id（随机序列）。类型：INT 数组。然后为 ExamQuestion 定义 :after_save 回调，以将问题的答案 ID 随机化为序列。然后为答案定义 :after_save 和 :after_destroy 回调（如果它被保存（创建）和/或销毁，则只是为了纠正与该答案存在的所有 ExamQuestions 的随机序列）。

2) 为 ExamQuestion 创建下一个维度关系。**ExamQuestionAnswer** belongs_to ExamQuestion、acts_as_list、:scope => :exam_question_id。然后更正您的关联逻辑。

在视图中你没有选择。迭代的不是 Questions 本身，而是 ExamQuestion 对象。并根据序列顺序迭代答案。

# javascript - Javascript 属性委托和原型

> ID：14030090
> 
> 赞同：0
> 
> 时间：2012-12-25T11:09:51.737
> 
> 标签：javascript

最近我想出了 Javascript 如何处理继承和共享属性，什么是属性委托？我知道如果我在一个函数之外创建一个函数，该属性将被分配给全局对象（窗口浏览器），并且该窗口对象是对象 Object 的一个属性……这是否意味着 Object 总是包含包含所有浏览器中的对象？感谢您的回答。

# c - 循环堆叠

> ID：14030093
> 
> 赞同：1
> 
> 时间：2012-12-25T11:10:23.643
> 
> 标签：c, arrays, loops, char

我有 C 语言程序。

假设老师聘请您作为软件顾问编写一个程序，该程序将帮助讲师加快他们对多项选择题的评分。对于这个程序，您需要使用 C 编程语言做原型程序来标记由 10 个多项选择题组成的试卷。

每个问题有 a、b、c 和 d 四个选项。要求讲师查看学生的答题纸，并逐一输入答案（a、b、c 和 d）。C 程序必须将答案与解决方案进行比较，`/`如果答案正确则输出 a，`x`如果不正确则输出 a，然后程序必须从总共 10 分中计算获得的分数。

**例子。**

```
question 1: a/
question 1: bx 
```

假设答案分别是 (a, b, c, d, a, b, c, d, a, b)，我必须要求用户`y`再次按下循环并`n`退出循环。

```
z='y','n';
while (z=='y')
{
    while ( count<10)
    {
        printf("\n question #%d:",count+1);
        r=getch();

        while(r!='a' && r!='b' && r!='c' && r!='d')  
        {
            r=getch();
        }
        putch(r);    

        if (r==answer[count])
        {
            putch('/');
            mark=mark+1;
        }
        else 
        {
            putch('x');
        }
        count++;
    }
}

printf("\n\n the mark is:  %d / 10", mark);

printf("\n\n continue? (y / n)");
z=getch();      
printf("\n\n ");
system("pause");
return(0); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-25T11:15:53.747

您必须将所有内容包含在另一个循环中，当用户输入时应该中断`'n'`。

就像是：

```
bool finished = false;
while (!finished) {
  // reset status of variables
  while (count < 10) {
    // your actual code
  }

  finished = /* users typed y or n */
} 
```

# javascript - javascript中的符号>>是什么意思

> ID：14030096
> 
> 赞同：1
> 
> 时间：2012-12-25T11:11:39.747
> 
> 标签：javascript

`>>`符号是什么意思？在[此页面上](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/Reduce)，有一行如下所示：

```
var i = 0, l = this.length >> 0, curr; 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-25T11:14:59.740

它是按位移动的。

让我们以数字 7 为例，它在二进制中是`0b00000111`

`7 << 1`将它向左移动一位，给你`0b00001110`14

同样，您可以向右移动：`7 >> 1`将切断最后一位，给您`0b00000011`3。

**[编辑]**
在 JavaScript 中，数字存储为*floats*。但是，在移位时需要整数值，因此对 JavaScript 值使用位移会将其从浮点数转换为整数。

**在 JavaScript 中，移动 0 位会将数字向下舍入*（整数舍入）** *（更好的措辞：它将值转换为整数）*

```
> a = 7.5;
7.5
> a >> 0
7 
```

*：除非数字是负数。

旁注：由于 JavaScript 的整数是 32 位的，因此除非您绝对确定不会使用大数，否则请避免使用按位移位。

**[编辑 2]**
`this.length >> 0`也将*复制*数字，而不是引用它。虽然我不知道为什么有人会想要那个。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-25T11:14:27.327

就像在许多其他语言中一样，`>>`运算符（在`<<`和之间`>>>`）是[按位移位](http://en.wikipedia.org/wiki/Bitwise_operation#Bit_shifts)。

# php - 如何在 htaccess 中定义应用程序启动文件

> ID：14030099
> 
> 赞同：0
> 
> 时间：2012-12-25T11:12:12.440
> 
> 标签：php, .htaccess

好的，这个问题可能看起来有点过度讨论，但不幸的是我找不到适合自己的答案。

如何为我的 Web 应用程序定义一个引导文件，该文件`.htaccess`将在每次向我的网站发出请求时运行？`ZF`用于`application/index.php`定义所有全局变量，如：`APPLICATION_ENV`等`include_path()`。`WordPress`这样做是为了加载必要的主题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-25T11:15:39.520

这是我的 .htaccess 文件中的内容：

```
RewriteEngine On

RewriteCond %{REQUEST_FILENAME} !-f
RewriteRule ^(.*)$ index.php/$1 [L] 
```

但我不确定这有多好：我认为可能存在不恰当的案例。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-25T11:17:32.657

假设您希望所有内容都通过 路由`/boot.php`，那么您将执行以下操作之一：

```
RewriteEngine On
RewriteCond %{REQUEST_URI} !^/boot\.php
RewriteRule ^(.*)$ /boot.php [L] 
```

或者

```
RewriteEngine On
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ /boot.php [L] 
```

您可以通过`_SERVER['REQUEST_URI']`变量或查询字符串将其他参数传递给 boot.php：

```
RewriteRule ^(.*)$ /boot.php?path=$1 [L] 
```

# ruby-on-rails - 为 RSS 生成的图片文件大小上传

> ID：14030100
> 
> 赞同：0
> 
> 时间：2012-12-25T11:12:19.183
> 
> 标签：ruby-on-rails, paperclip

我通过回形针（在导轨中）上传图片。这张图片将出现在 RSS 提要中。对于 RSS 提要，我需要填写告诉客户端我猜的文件长度的字段长度。

附件本身很容易，因为有一个列file_size，但是如果图片是后期处理的，我想包含这张图片，我如何获得文件大小？

代码：

图片.rb

```
class Pic < ActiveRecord::Base

  has_attached_file :image, 
                    :styles => { 
                      :mail => "780x540>", 
                      :medium => "260x180>", 
                      :thumb => "130x90>",
                    }, 
                    :storage => :s3
end 
```

rss.rb

```
xml.instruct! :xml, version: "1.0" 
xml.rss version: "2.0" do
  xml.channel do

    @ps.each do |p|
        xml.item do
        xml.title       p.title
        xml.description p.description.truncate(250)
        xml.pubDate     p.starts_at.to_s(:rfc822)
        xml.link        p.uri_name
        xml.guid        p.uri_name
        xml.enclosure   url: p.pic(:medium), type: "image/jpeg", length: ??
      end
    end
  end
end 
```

应该很容易，但是..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T15:11:56.937

找到了解决方案：

因为它存储在s3上，我可以通过http获取信息..

在图片.rb

```
 def content_length(size)
    parts = URI.parse image.url(size)
    Net::HTTP.start(parts.host, parts.port) do |http|
      response = http.request_head parts.path
      file_size = response['content-length']
    end
  end 
```

# c++ - 在两个 C++ 程序之间交换消息

> ID：14030108
> 
> 赞同：6
> 
> 时间：2012-12-25T11:13:20.253
> 
> 标签：c++, windows, ipc, messages

我是使用 C++ 创建 Windows 应用程序的新手。我的任务是编写两个 cpp 文件，其中一个将向另一个发送一个数字 (x)，另一个将评估 f(x) 并将其发送回第一个。我应该使用消息来实现它。无法在网上获得任何具体的信息，有人可以给我一个线索，从哪里开始？非常感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-25T11:20:04.130

你在谈论窗口消息吗？如果是这样，发送应用程序可以使用[SendMessage](http://msdn.microsoft.com/en-us/library/windows/desktop/ms644950%28v=vs.85%29.aspx)，这将导致接收应用程序执行其窗口过程。当然，这意味着接收应用程序需要创建一个窗口，其窗口句柄以某种方式可供发送应用程序使用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-25T12:33:06.500

您可以通过多种方式做到这一点。

*   使用[WM_COPYDATA 消息](http://msdn.microsoft.com/en-us/library/ms649011(VS.85).aspx)传递数据
*   [分配全局内存](http://msdn.microsoft.com/en-us/library/aa366574(VS.85).aspx)以传递数据并发送您自己的消息，以便第二个程序可以从内存中读取数据
*   [发送消息](http://msdn.microsoft.com/en-us/library/windows/desktop/ms644950(v=vs.85).aspx)（如果两个整数适合您传递数据的需要）
*   使用[命名管道](http://avid-insight.co.uk/joomla/component/k2/item/589-introduction-to-win32-named-pipes-cpp)
*   使用[TCP/IP 本地连接](http://msdn.microsoft.com/en-us/library/ms740673(VS.85).aspx)（点对点或通过服务器）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-25T13:45:25.343

查看 ZeroMQ（http://zeromq.org；跨平台，LGPL）。它是一个非常简单、轻量且功能强大的库。从最基本的层面上，您可以使用它来交换 UDP 样式的数据报，但要通过可靠的传输（TCP 或一些变体）。您还拥有取消支持、基于时间的轮询和高级网络方案（在您的情况下不需要）。我为类似的任务选择了它，它的表现非常好。

# php - PHP：调用 preg_match 的反向搜索顺序的解决方案

> ID：14030114
> 
> 赞同：1
> 
> 时间：2012-12-25T11:14:19.320
> 
> 标签：php, preg-match

我从[PHP 中获取了建议的解决方案： MVC routing function to parse requested views 的好解决方案？](https://stackoverflow.com/questions/13924352/php-good-solution-for-mvc-routing-function-to-parse-requested-views)并将其调整为我们的内部指南（再次感谢 Supericy）。

我现在有以下代码：

```
public function parseRequestedView($url) {

    $this->view_requested = explode('/', trim($url, '/'));

    // Format: [0] viewpoint, [1] child, [2] action (default: show), [3] reference
    $this->view_map = array(
        $this->parseViewMapArrayKey('device/:reference:/configurations') => array(0,  2, -1,  1),
        $this->parseViewMapArrayKey('device/:reference:')                => array(0, -1, -1,  1)
    );

    foreach ($this->view_map as $this->view_map_transitory => $this->view_map_indices) {

        if (preg_match($this->view_map_transitory, $url)) {

            foreach ($this->view_map_indices as $this->view_index) {

                $this->view_resources[] = $this->view_index > -1 ? $this->view_requested[$this->view_index] : null;

            }

            return $this->view_resources;

        }

    }

    return false;

}

public function parseViewMapArrayKey($key) {

    return '#'.str_replace([":reference:", ":string:"], ["\d+", ".+"], $key).'#';

} 
```

它工作正常，除了一个小“问题”：

当我切换键“device/:reference:”和“device/:reference:/configurations”然后调用 device/:reference:/configurations 的视图时，我只得到 device/:reference 的结果。

例如，[http](http://ww.foo.com/device/123456/configurations) ://ww.foo.com/device/123456/configurations将输出：

```
Array
(
    [0] => device
    [1] => 
    [2] => 
    [3] => 123456
) 
```

这是[http://ww.foo.com/device/123456](http://ww.foo.com/device/123456)的结果。当我将键改回原来的顺序时，一切都应该是这样的：

```
Array
(
    [0] => device
    [1] => configurations
    [2] => 
    [3] => 123456
) 
```

切换按键时如何反转搜索顺序或使功能输出正确的结果？

我找到了这个[PHP Reverse Preg_match](https://stackoverflow.com/questions/5704061/php-reverse-preg-match)。但据我所知，这是一个负的 preg_match 。还是我错了？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-25T12:13:52.363

好的，也许这是一个愚蠢的答案，但也许您可以确保您的正则表达式以 ? 开头`^`和结尾`$`？

例如

```
public function parseViewMapArrayKey($key) {

    return '#^'.str_replace([":reference:", ":string:"], ["\d+", ".+"], $key).'$#';

} 
```

# ms-access - Microsoft Access 2003 查询 - 计数记录并求和

> ID：14030117
> 
> 赞同：0
> 
> 时间：2012-12-25T11:14:32.270
> 
> 标签：ms-access, ms-access-2003

我正在使用 Microsoft Access 2003 创建查询，但遇到了问题。我是新来的！

我有2张桌子。第一个表，我有一个记录列表，其中包括**名称**、**属性名称**和**国家**/地区。第二张表，我有一个**财产名称**列表，财产中的**单位数量**和财产所在的**国家**/地区。

我想按状态计算第一个表中的记录数，同时总结该属性在该状态下的单元数。

我遇到的是，当我对单位数量求和时，单位重复！

举个例子；

***表格1：***

**姓名 | 状态 | 属性名称**

1 先生 | 状态 A | 建设 AAA

2 先生 | 状态 A | 建设 AAA

3 先生 | 状态 A | 建设 BBB

4 先生 | 状态 B | XXX 楼

5 先生 | 状态 B | XXX 楼

***表2：***

**物业名称 | 状态 | 单位数量**

建筑 AAA | 状态 A | 100

建筑 BBB | 状态 A | 50

XXX 楼 | 状态 B | 20

***我的结果：***

**状态 | 单位数量 | 记录数**

状态 A | 250 | 3

状态 B | 40 | 2

***我想要的结果：***

**状态 | 单位数量 | 记录数**

状态 A | 150 | 3

状态 B | 20 | 2

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-25T13:15:37.843

**扩大**

假设您使用的是 Access 查询构建器，您将需要构建三个 Select 查询：

1) Table1 将是第一个查询的源表。在查询中使用两次 State 字段，第一次作为 Group By 字段，第二次作为 Count 字段。（任何字段都可以用于计数，因为您只对记录数感兴趣。）保存查询以在第三个查询中使用。

![在此处输入图像描述](../Images/35c0ea2842aab68ac607cd306855781e.png)

2) Table2 将是第二个查询的源表。将 State 字段用作 Group By 字段，将 Units 字段用作 Sum 字段。也保存此查询。

![在此处输入图像描述](../Images/bf6a1a553c38e5ee5b63ff864159959d.png)

3）第三个查询将把信息放在一起。对于源，使用第一个和第二个查询，并在 State 字段中将它们连接起来。选择 State 字段（来自任一查询）作为 Group By Field，从第一个查询中选择 CountOfState 字段作为 Sum 字段，从第二个查询中选择 SumofUnits 字段作为 Sum 字段。

![在此处输入图像描述](../Images/f16d04a53508fcbb6412401433170181.png)

虽然 Access 在生成最终结果时所做的实际工作量不会改变，但可以通过编辑底层 SQL 将三个查询合并为一个查询。

新查询是通过将 Table1 和 Table2 查询插入到第三个最终结果查询中生成的，该查询位于 INNER JOIN 语句的两侧。新查询中的 T1 和 T1 是嵌入式查询的别名，可消除引用这些查询字段时的歧义。

无法使用查询构建器创建新查询（尽管最初的三个查询为其提供了原材料）。相反，必须在查询构建器的 SQL 视图中写入/粘贴/编辑 SQL。

```
 SELECT T1.State AS State,
           Sum(T1.CountOfState) AS Records, 
           Sum(T2.SumOfUnits) AS Units
    FROM 
          (SELECT Table1.State, 
                  Count(Table1.State) AS CountOfState
           FROM Table1
           GROUP BY Table1.State) T1
    INNER JOIN 
           (SELECT Table2.State, 
                   Sum(Table2.Units) AS SumOfUnits
            FROM Table2
            GROUP BY Table2.State) T2
    ON T1.State = T2.State
    GROUP BY T1.State; 
```

# java - 如何将 JLabels 动态添加到 JPanel？

> ID：14030124
> 
> 赞同：11
> 
> 时间：2012-12-25T11:16:04.357
> 
> 标签：java, swing, dynamic, jlabel, setbounds

我有这个问题。我有一个 JPanel，通常我会创建一个这样的 JLabel：

```
JLabel lblNewLabel = new JLabel("New label");
lblNewLabel.setBounds(0, 0, 135, 14);
panel.add(lblNewLabel); 
```

但我希望每次单击按钮时，在该面板中创建一个大小相同但高度位置不同的新 JLabel。我试过：

```
panel.add(new JLabel(stringName)); 
```

但这样我就无法设定它的界限。我从 JTextField 获得的字符串名称。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-12-25T11:19:09.303

首先，使用[布局](http://docs.oracle.com/javase/tutorial/uiswing/layout/visual.html)。正确完成布局将按照您的意愿放置组件。其次，当动态地将组件添加到布局时，您需要告诉布局进行更新。这是一个示例，每次按下按钮时都会添加一个标签：

```
public static void main(String[] args) {

    final JFrame frame = new JFrame("Test");
    frame.setLayout(new GridLayout(0, 1));

    frame.add(new JButton(new AbstractAction("Click to add") {
        @Override
        public void actionPerformed(ActionEvent e) {

            SwingUtilities.invokeLater(new Runnable() {
                @Override
                public void run() {
                    frame.add(new JLabel("Bla"));
                    frame.validate();
                    frame.repaint();
                }
            });
        }
    }));

    frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    frame.setSize(400, 300);
    SwingUtilities.invokeLater(new Runnable() {
        @Override public void run() {
            frame.setVisible(true);
        }
    });
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-25T15:23:37.117

正如@AndrewThompson 所说，使用正确的`LayoutManager`，你不应该搞乱`setBounds`等。

这是我制作的一个示例（只需`JLabel`在`JPanel`每次`JButton`单击时添加一个）：

![在此处输入图像描述](../Images/597b2269ddb858ac60c731b82df8fa6f.png)

```
import java.awt.BorderLayout;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import javax.swing.*;

public class Test {

    public Test() {
        createAndShowUI();
    }

    private void createAndShowUI() {
        JFrame frame = new JFrame("Test");
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

        initComponents(frame);

        frame.setResizable(false);
        frame.pack();
        frame.setVisible(true);
    }

    private void initComponents(final JFrame frame) {

        final JPanel panel = new JPanel();

        JButton button = new JButton("Add label");

        button.addActionListener(new ActionListener() {
            int count = 1;

            @Override
            public void actionPerformed(ActionEvent e) {
                JLabel _lbl = new JLabel("Label " + count);//make label and assign text in 1 line

                panel.add(_lbl);//add label we made

                panel.revalidate();
                panel.repaint();

                frame.pack();//so our frame resizes to compensate for new components

                count++;
            }
        });

        frame.add(panel, BorderLayout.CENTER);
        frame.add(button, BorderLayout.SOUTH);
    }

    public static void main(String[] args) {
        SwingUtilities.invokeLater(new Runnable() {
            @Override
            public void run() {
                new Test();
            }
        });
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-01T06:38:34.833

尝试交换命令的顺序，先添加面板，然后设置位置。

# javascript - app.get 无法正常工作 express.js

> ID：14030125
> 
> 赞同：0
> 
> 时间：2012-12-25T11:16:06.367
> 
> 标签：javascript, node.js, redirect, express

```
app.get('/:id', function (req, res){

   UserModel.find({ user: req.params.id}, function (err, user){

         if (err) throw err;

         console.log(user + '\n\n');

         res.render('profile.ejs', {

                username: user[0].user,
                avatar: user[0].avatar,
                followers: user[0].followers.length,
                following: user[0].following.length

         })

   });

}); 
```

我不知道为什么，例如，当我写作时，我会`<a href="/<%= username %>">...</a>`去。如果我尝试从静态目录渲染 png in ，这是一个问题吗？因为我认为是的！png 不渲染，但在其他没有以它结尾的页面中有效。`/randomuser/``/randomuser``/:id``/`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-25T16:41:57.923

不肯定我理解这个问题，但你应该能够通过改变来让它工作

> app.get('/:id', function (req, res){

至

> app.get('/:id/', function (req, res){

如果它不起作用，png应该呈现让我知道

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-25T17:16:25.790

根据 app.get 中的路由，您将被重定向到 /randomuser/ 或 /randomuser。据我所知，这没关系。如果您还有其他问题，请告诉我

# android - Android 可绘制 mdpi

> ID：14030127
> 
> 赞同：0
> 
> 时间：2012-12-25T11:16:32.233
> 
> 标签：android

我正在开发一个 Android 项目。

我将图像 (320*480) 放入 mdpi -文件夹。Android 开发者网站上有一些信息表明 480*800 平板电脑（7"）也从 mdpi- 文件夹中获取图像。当 7" 平板电脑从 mdpi- 文件夹中获取图像时，它会变小。只有一个 mdpi- 文件夹，所以我该如何管理它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-25T11:31:46.120

您也应该创建**ldpi、hdpi、xhpi**文件夹。并且您需要通过计算其比率来复制具有相同名称的图像。

```
ldpi - mdpi - hdpi - xhdpi 
 3      4      6      8 
```

> 四种主要密度之间的缩放比例为 3:4:6:8（忽略 tvdpi 密度）。因此，ldpi 中的 9x9 位图在 mdpi 中为 12x12，在 hdpi 中为 18x18，在 xhdpi 中为 24x24。
> 
> 如果您认为您的图像资源在电视或其他某些设备上看起来不够好并想尝试 tvdpi 资源，则缩放因子为 1.33*mdpi。例如，mdpi 屏幕的 100px x 100px 图像对于 tvdpi 应该是 133px x 133px。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-25T11:37:10.273

不要将屏幕尺寸与屏幕密度混为一谈。有与屏幕尺寸相关的限定符（例如小、正常、大……）和与密度相关的限定符（例如 ldpi、mdpi、……）。

您甚至可以组合这些限定符，例如，`drawable-normal-mdpi`您可以放置​​将在具有 mdpi 密度的普通屏幕（手机）的设备上使用的资源。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-25T11:21:56.657

您应该阅读有关[提供替代资源](http://developer.android.com/guide/topics/resources/providing-resources.html#AlternativeResources)的 Android 开发人员文档。

从我对这个[类似问题](https://stackoverflow.com/questions/14019637/unexpected-behaviour-while-setting-a-image-from-res-folder-to-an-image-view-in-a/14019668#14019668)的回答：

> ImageView 将以适合设备的正确分辨率呈现其中的图像。根据有关提供资源的文档，您必须确保以正确的 DPI 为每种分辨率类型提供资源。Android 会为您选择最佳的资源分辨率，但如果只存在一种资源，那么它会选择该资源并尝试以设备分辨率进行渲染。

因此，为您的设备找出正确的 DPI，并将图像（以正确的 DPI）添加到该文件夹​​中，它应该以正确的大小显示。如果图像放置在错误的文件夹中，那么它将显示不同的大小。另一个有用的链接是[密度独立](http://developer.android.com/guide/practices/screens_support.html#density-independence)文档。

注意：假设您的设备是 HDPI 设备。该`res/drawables/drawable-hdpi`文件夹可能不会在您的项目中退出，但您可以手动添加它。

# android - 带有复选框的 Android ListView

> ID：14030131
> 
> 赞同：1
> 
> 时间：2012-12-25T11:16:52.577
> 
> 标签：android, database, sqlite, listview, checkbox

我找到了一个关于从 android 的数据库中填充**listView**的示例，它运行良好，但是我想向这个应用程序添加一些功能，我想在我的**listview**中的每个项目旁边放置一个**复选框**，并且当用户检查每个项目时项目，他将能够通过按确认按钮删除该项目。我已经把这些行**启用了多项选择**，但**复选框**没有出现，我不知道如何删除选定的项目！

 ******```
ListView lstView = getListView();

            lstView.setChoiceMode(2);

    public void onListItemClick(
                    ListView parent, View v, int position, long id)
                    {
                    //---toggle the check displayed next to the item---
                    parent.setItemChecked(position, parent.isItemChecked(position));

                    } 
```

你能帮我解决我的问题吗？

这是我的代码：

```
package com.saigmn;

import java.util.ArrayList;

import android.app.ListActivity;
import android.database.Cursor;
import android.database.sqlite.SQLiteDatabase;
import android.database.sqlite.SQLiteException;
import android.os.Bundle;
import android.util.Log;
import android.view.View;
import android.widget.ArrayAdapter;
import android.widget.ListView;
import android.widget.TextView;

public class DataListView extends ListActivity {

    private ArrayList<String> results = new ArrayList<String>();
    private String tableName = DBHelper.tableName;
    private SQLiteDatabase newDB;
    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        openAndQueryDatabase();

        displayResultList();

    }
    private void displayResultList() {
        TextView tView = new TextView(this);
        tView.setText("This data is retrieved from the database and only 4 " +
                "of the results are displayed");
        getListView().addHeaderView(tView);

        setListAdapter(new ArrayAdapter<String>(this,
                android.R.layout.simple_list_item_1, results));
        getListView().setTextFilterEnabled(true);

        ////----------------------
        ListView lstView = getListView();
        //lstView.setChoiceMode(0); //CHOICE_MODE_NONE
        //lstView.setChoiceMode(1); //CHOICE_MODE_SINGLE
        lstView.setChoiceMode(2);

       // setListAdapter(new ArrayAdapter<String>(this,
               // android.R.layout.activity_list_item));
    }

    //--------------------------------

    public void onListItemClick(
            ListView parent, View v, int position, long id)
            {
            //---toggle the check displayed next to the item---
            parent.setItemChecked(position, parent.isItemChecked(position));

            }

    private void openAndQueryDatabase() {
        try {
            DBHelper dbHelper = new DBHelper(this.getApplicationContext());
            newDB = dbHelper.getWritableDatabase();
            Cursor c = newDB.rawQuery("SELECT FirstName, Age FROM " +
                    tableName +
                    " where Age > 10 LIMIT 4", null);

            if (c != null ) {
                if  (c.moveToFirst()) {
                    do {
                        String firstName = c.getString(c.getColumnIndex("FirstName"));
                        int age = c.getInt(c.getColumnIndex("Age"));
                        results.add("Name: " + firstName + ",Age: " + age);
                    }while (c.moveToNext());
                } 
            }           
        } catch (SQLiteException se ) {
            Log.e(getClass().getSimpleName(), "Could not create or Open the database");
        } finally {
            if (newDB != null) 
                newDB.execSQL("DELETE FROM " + tableName);
                newDB.close();
        }

    }

} 
```

这是[示例的链接](http://saigeethamn.blogspot.com/2011/02/listview-of-data-from-sqlitedatabase.html)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-25T11:34:42.310

`CustomAdapter`为`ListView`;创建 create `layout_row`，它代表你的行`ListView`，并具有结构 -`[text] [radio_button]`

```
public class CustomAdapter extends BaseAdapter {
    private LayoutInflater inflater;
    private Activity activity;
    private ArrayList<String> listItems;
    private RadioButton listRadioButton = null;

    // NOTE: not the best practice to use static fields
    public static int selectedIndex;

    public CustomerListAdapter(Activity activity) {
        this.activity = activity;
        inflater = (LayoutInflater)activity.getSystemService(Context.LAYOUT_INFLATER_SERVICE);

        listItems = new ArrayList<String>();
    }

    public void addItem(final String item) {
        listItems.add(item);
        notifyDataSetChanged();
    }

    @Override
    public View getView(final int position, View convertView, ViewGroup parent){
        ViewHolder holder;
        if (convertView == null) {
            convertView = inflater.inflate(R.layout.list_row, null);
            holder = new ViewHolder();
            holder.text = (TextView)convertView.findViewById(R.id.text);
            holder.radioButtonChooser = (RadioButton)convertView.findViewById(R.id.radioButtonChooser);
            convertView.setTag(holder);
        } else {
            holder = (ViewHolder)convertView.getTag();
        }

        holder.text.setText((listItems.get(position)).getText());

        holder.radioButtonChooser.setChecked(false);

        holder.radioButtonChooser.setOnClickListener(new View.OnClickListener() {
            @Override
            public void onClick(View v) {
                    // uncheck previous checked button. 
                    if (listRadioButton != null) 
                        listRadioButton.setChecked(false);

                    // assign to the variable the new one
                    listRadioButton = (RadioButton) v;

                    // find if the new one is checked or not, and save "selectedIndex"
                    if (listRadioButton.isChecked()) {
                       selectedIndex = position;

                            // pass this index in your delete function
                            // get item from your list by this index 
                            // and delete row from list
                    } else {
                                    // nothing is selected
                        listRadioButton = null;
                                    selectedIndex = -1;
                    }
            }
        });

        return convertView;
    }

    @Override
    public int getCount() {
        return listItems.size();
    }

    @Override
    public Object getItem(int position) {
        return listItems.get(position);
    }

    @Override
    public long getItemId(int position) {
        return position;
    }
} 

    /**
     * Represents list row structure
     */
public  class ViewHolder{
    public TextView text;
    public RadioButton radioButtonChooser;
} 
```

...

```
private void fillList(){
        CustomAdapter adapter = new CustomAdapter(activity);

        ArrayList<String> items = new ArrayList<String>();
                // fill "items" array with your list data

        for (String item : items) {
            adapter.addItem(item);
        }

        listView.setAdapter(adapter);
} 
```

...

`list_row Layout`包含 2 `Views`-`TextView (id = text), RadioButton (id = radioButtonChooser)`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-25T11:27:41.907

查看[Android Api 演示](http://developer.android.com/tools/samples/index.html)。也许最好的方法是使用[List11.java](http://code.google.com/p/android-lab/source/browse/trunk/android-lab/src/com/example/android/apis/view/List11.java)中的示例。如果您的行项目实现[Checkable](http://developer.android.com/reference/android/widget/Checkable.html)，`ListView`则将自行处理并保持选中的位置。并且不需要在您的`Adapter`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-25T11:25:57.800

您应该使用您的自定义适配器，并且您可以访问所有膨胀布局的控件及其 getView 方法。

[具有包含 CheckBoxes 的自定义适配器的 Listview](https://stackoverflow.com/questions/12647001/listview-with-custom-adapter-containing-checkboxes)

[http://www.ezzylearning.com/tutorial.aspx?tid=1763429](http://www.ezzylearning.com/tutorial.aspx?tid=1763429)******

# jsf - 更改请求范围 bean 中的初始值

> ID：14030132
> 
> 赞同：0
> 
> 时间：2012-12-25T11:17:02.583
> 
> 标签：jsf, jsf-1.2

在`PhaseListener`调用`initialize`方法中。

```
public class myBean implements Serializable
{
 private boolean myBoolean = "true";

 public void initialize()
  {
    if(someCondition)
        {
            this.setMyBoolean(true);
         }
     else
       {
          this.setMyBoolean(false);  // Lets assume myBoolean gets set to false here
       }
  }
} 
```

此方法执行后，`index.jsf`呈现给用户。

在`index.xhtml`页面中，下面的代码在那里..

```
<h:commandLink action="#{myBean.secondMethod}" value="someLink">
 </h:commandLink>

public String secondMethod()
{
  log.debug("Value of myBoolean variable is: " +this.isMyBoolean());
  return null;  
} 
```

当用户点击时`someLink`，上面的代码将打印`myBoolean`为`true`而不是`false`。

`myBean`是在`request`范围内。因为，这是一个新的要求，我不得不相信`myBoolean`它是新分配的`true`价值。

我该如何克服呢？我的意思是，当`secondMethod`被调用时，如果`myBoolean`是`false`，那么它也应该`false`在`secondMethod`。为什么`myBoolean`总是这样`true`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-26T10:33:06.710

你确定你的初始化方法被调用了吗？将*@PostConstruct*注解放在初始化方法中，以确保在生成bean 后调用它怎么样？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-26T13:41:04.737

我解决了我的问题。我的问题有两个部分。

`1.`我该如何克服呢？

`2.`为什么`myBoolean`总是如此？

下面的答案是为了点`1.`

```
<h:commandLink action="#{myBean.secondMethod}" value="someLink">
  <f:param name="newValue" value="#{myBean.myBoolean}"></f:param> // Use f:param to send the actual value   
 </h:commandLink>

public String secondMethod()
{
  String newValueIs = FacesContext.getCurrentInstance().getExternalContext().getRequestParameterMap().get("newValue");
  log.debug("Value of myBoolean variable is: " +newValueIs); //Prints false if it was false and true if it was true
  return null;  
} 
```

但是，我仍然没有得到`2.`我问题的答案。

# php - 带有滚动条的 DIV 不起作用

> ID：14030133
> 
> 赞同：-4
> 
> 时间：2012-12-25T11:17:08.447
> 
> 标签：php, mysql, html

我有一个带有 mysql 表内容的 DIV 的 php 文件。我在此页面上还有其他链接和信息。

我只希望 div 内容有一个滚动条，我使用了 overflow=scroll; 但滚动条不适用于 DIV。

需要帮忙 ！

这是我的代码：

```
<html>
<head>
<title></title>
<style type="text/css">
<!--
body {
    background-color: #D7F0FF;
    margin-left: 0px;
    margin-top: 0px;
    margin-right: 0px;
    margin-bottom: 0px;
}

.sty12 {
    font-family: Verdana, Arial, Helvetica, sans-serif;
    font-size: 10px;
    font-weight: normal;
    background-color: #FFFFFF;
    }

.sty1 {
    font-family: Verdana, Arial, Helvetica, sans-serif;
    font-size: 12px;
    font-weight: bold;
}

.style1 {
    font-family: Georgia, "Times New Roman", Times, serif;
    font-size: 24px;
    color: #FFFFFF;
    font-weight: bold;
}

#wrapper { MARGIN: 0px auto; VERTICAL-ALIGN: middle; TEXT-ALIGN: left }

.style3 {
    font-family: Arial, Helvetica, sans-serif;
    font-size: 12px;
    font-weight: bold;
    color: #333333;
    }

.style5 {
    font-family: Verdana, Arial, Helvetica, sans-serif;
    font-size: 10px;
    font-weight: bold;
    color: #ffffff;
}

.style7 {
    color: #026465;
    font-size: 9px;
}

.toprow {
    font-family: Verdana, Arial, Helvetica, sans-serif;
    font-size: 10px;
    font-weight: bold;
    background-color: #CCCCCC;
    }

-->
</style>

<script type="text/javascript">
function postData(someValueToEvalute)
                    {
                        switch(someValueToEvalute){

                            case "1":{
                                    document.forms[0].action = 'invoiceprint2.php'
                                    break;
                                }
                            case "2":{
                                    document.forms[0].action = 'invoiceprint3.php'
                                    break;
                                }
                            default: { alert('fail');}

                        }
                        document.forms[0].submit();
                    }
</script>
</head>
<body>
<table width="100%"  border="0" cellpadding="0" cellspacing="0" bgcolor="#026465">
  <tr>
    <td><div align="center"><span class="style1"> PACE LTD <br></span>
<center class="style5">INVOICE PRINTING</center>
<br><br>
<br>

</td>
  </tr>
</table>

<!--------------VALIDATIONS ------------------->

<br>
<br>

<form name="form1" method="post" action="" target="_blank">
<table width='40%' height='39'  border='0' cellpadding='2' cellspacing='0'>
<tr>
<td width=10>&nbsp;</td>
<td class='sty1'><div align='left'>Please select Invoice No. to PRINT: <br>
<br>
You can choose more than one invoice number from the options, by holding CTRL key on your keyboard and select the numbers.</div></td>
<td>
<?php

$dbservertype='mysql';
$servername='localhost';
$dbusername='itec';
$dbpassword='!@#';
$dbname='vga';

////////////////////////////////////////
////// DONOT EDIT BELOW  /////////
///////////////////////////////////////
connecttodb($servername,$dbname,$dbusername,$dbpassword);
function connecttodb($servername,$dbname,$dbuser,$dbpassword)
{
global $link;
$link=mysql_connect ("$servername","$dbuser","$dbpassword");
if(!$link){die("Could not connect to MySQL");}
mysql_select_db("$dbname",$link) or die ("could not open db".mysql_error());
}
//////// End of connecting to database ////////

    $result = mysql_query("SELECT Invno FROM INVHDR ORDER BY Invno DESC");
    echo "<select multiple='multiple' size='20' name='invnos[]'>";
    while($nt=mysql_fetch_assoc($result))
    {//Array or records stored in $nt
    echo "<option value=$nt[Invno]>$nt[Invno]</option>";
    /* Option values are added by looping through the array */
    }
    echo "</select>";// Closing of list box

echo "</td>";

?>
</tr>
</table><br>

<div id="Layer1" style="position:absolute; left:465px; top:115px; width:600px; height:600px; overflow:scroll; z-index:1; background-color: #D7F0FF; layer-background-color: #FFFFFF;"> 
<?php
    echo "<table width='540' border='1' cellspacing='0' cellpadding='5' align='left'>";
    echo "<tr>";
    echo "<td width='75' align='center' class='toprow'>Inv Date</td>";
    echo "<td width='75' align='center' class='toprow'>Inv No.</td>";
    echo "<td width='315' align='center' class='toprow'>Customer Name</td>";
    echo "<td width='75' align='center' class='toprow'>Amount</td>";
    echo "</tr>";
$recs=mysql_query("SELECT * FROM INVHDR ORDER BY Invno DESC");
while ($r2=mysql_fetch_assoc($recs))
{
        $invno=$r2['Invno'];    

        $invdat3=$r2['Invdate'];    
        $invdat2=date("Y-m-d", strtotime($invdat3));
        //$invdat2->format('Y-m-d');    
        $date_array = explode( "-", $invdat2 );
        $invdat = sprintf( '%02d/%02d/%4d', $date_array[2], $date_array[1], $date_array[0] );

        $acode=$r2['Ac_code'];
        $amt=$r2['Amount'];

            //--selecting customer name-----------------------------------
            $cus=mysql_query("SELECT Ac_desc FROM ACMAST WHERE Ac_code='$acode'");
            $cus2=mysql_fetch_assoc($cus);
            $acdesc=$cus2['Ac_desc'];

            echo "<tr>";

            echo "<td width='75' align='center' class='sty12'>$invdat</td>";
            echo "<td width='75' align='center' class='sty12'>$invno</td>";
            echo "<td width='315' align='center' class='sty12'>$acdesc</td>";
            echo "<td width='75' align='center' class='sty12'>$amt</td>";

            echo "</tr>";           

    }

    echo "</table><br></div>";
?>

<table width='500' border='0' cellspacing='0' cellpadding='0'>
<tr>
<td width=10>&nbsp;</td>

<td align='center'>
<input name="PRINT" type="button" value="PRINT Invoice to Laser Printer!"     onClick='postData("1");' /> &nbsp;&nbsp;&nbsp;  
<input name="PRINT2" type="button" value="PRINT Invoice to Dotmatrix Printer !" onClick='postData("2");'/>

</form>
<br><br><br><br>
<a href='frameinvoice.php' target='_parent'><input name='Add' type='button' value='Add'></a>  &nbsp;&nbsp;  &nbsp;&nbsp; <a href='invoice-edit.php' target='_parent'><input name='Edit' type='button' value='Edit !'></a> &nbsp;&nbsp; <a href='invoice-cancel.php' target='_parent'><input name='Edit' type='button' value='Cancel !'></a> &nbsp;&nbsp; <a href='index.htm' target='_parent'><input name='Close' type='button' value='CLOSE !'></a><br>
</td>

</tr>   
</table>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-25T11:25:16.863

嘿，伙计，您的代码运行良好。您没有足够的数据，因此滚动不起作用添加更多数据以查看滚动效果或降低 div 的高度，如下所示。

```
<div id="Layer1" style="position:absolute; left:465px; top:115px; width:600px; height:100px; overflow:scroll; z-index:1; background-color: #D7F0FF; layer-background-color: #FFFFFF;"> 
```

# iphone - 为合适的 iPhone 版本设置文本框宽度

> ID：14030138
> 
> 赞同：0
> 
> 时间：2012-12-25T11:17:36.920
> 
> 标签：iphone, textbox, resize

我编写了我的第一个 iOS 应用程序，并阅读了许多关于如何处理各种 iPhone 版本的不同屏幕尺寸的图片的教程。但是如何处理与背景图像相关的文本框的大小（宽度）（图像由相关 iPhone 版本的 izs 名称更改，但文本框宽度）？

我希望代码中的一堆 if 语句不是唯一的方法..

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-25T11:22:43.590

选择您正在处理的故事板或 xib 文件，然后取消选中“使用自动布局”复选框。如下所示。

![在此处输入图像描述](../Images/511b3177ac356f72b909e5153c8ddeb9.png)

之后，您可以通过选择文本字段来控制文本框的宽度，然后仔细检查此配置，如下图所示。

![在此处输入图像描述](../Images/18ff3cb6ab847601dd563d037a94d5e1.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-25T11:24:31.897

如果您在 Interface Builder 中设置文本框，请查看 Size helper（在右侧面板中，这是标有标尺图标的选项卡），并查看标有“autosizing”的图像。您将看到一个包含两个箭头（垂直和水平）的框，被四个括号（左侧、右侧、上方和下方）包围。箭头（“弹簧”）代表文本框本身的尺寸 - 如果它们是实心的，文本框将调整其大小以适应更大的屏幕。括号（“struts”）表示文本框周围的边距 - 如果它们是实心的，则文本框将保持其相对于相应屏幕边缘的位置。这些箭头和括号中的每一个都可以通过单击来打开和关闭。

有关更多信息，请[访问 http://developer.apple.com/library/ios/#recipes/xcode_help-interface_builder/articles/UnderstandingAutolayout.html](http://developer.apple.com/library/ios/#recipes/xcode_help-interface_builder/articles/UnderstandingAutolayout.html)。

# php - 在上传到服务器之前重命名文件

> ID：14030139
> 
> 赞同：0
> 
> 时间：2012-12-25T11:17:38.513
> 
> 标签：php, upload

嘿伙计们，我想知道如何在将文件上传到服务器文件夹之前专门重命名文件，以避免上传时文件名相同，并用它重写同名文件。我倾向于使用 school_id 作为图像的文件名。这是php代码

```
include_once('DBconnect.php');

session_start();
$school_id = $_SESSION['school_id'];

$name = $_FILES['file_path'] ['name'];
$size = $_FILES['file_path'] ['size'];
$type = $_FILES['file_path'] ['type'];

$extension = substr($name, strpos($name, '.')+1);

$max_size =3145728;

$temp_file = $_FILES['file_path'] ['tmp_name'];

if(isset($name)){

    if(!empty($name)){

        if(($extension == 'jpg' || $extension == 'jpeg') && ($type ==  'image/jpeg' || $type == 'image/jpg') && $size <= $max_size  ){

         if($school_id == 0){

            $location = 'uploads_images/super_admin/';

                                  move_uploaded_file($temp_file,$location.$name);

                     $insert_path = "INSERT INTO image_upload  (school_id,path_name) 
                                                     VALUES('$school_id','$name')";

                                $result2 = mysql_query($insert_path);
                                              if(@!$result2){
                                                    die('error header'.mysql_error());
                                                  }

                    echo "Success in uploading";

            }
            else{

                $location = 'uploads_images/schools/';

                                 move_uploaded_file($temp_file,$location.$name);

                     $insert_path = "INSERT INTO image_upload (school_id,path_name) 
                                        VALUES('$school_id','$name')";

                                        $result = mysql_query($insert_path);
                                          if(@!$result){
                                               die('error header'.mysql_error());
                                             }

                    echo "Success in uploading";

            }

        }
        else{

            echo "File type is too big or Incorrect file type";
        }

    }
    else{

            echo "Please Choose A JPEG File";
        }

}

?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-25T11:28:49.780

不要信任客户端文件名。

您可以将新文件名传递给`move_uploaded_file`函数。我建议你做这样的事情：

```
$name=uniqid($school_id, true).$extension;
move_uploaded_file($temp_file,$location.$name); 
```

`uniqid`内置php函数[http://php.net/manual/en/function.uniqid.php](http://php.net/manual/en/function.uniqid.php)

我希望这是有帮助的

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-25T11:21:00.977

您可以在移动之前使用 file_exists 确定是否存在潜在的命名冲突。 [http://php.net/manual/en/function.file-exists.php](http://php.net/manual/en/function.file-exists.php)

一种选择是将某种时间戳附加到文件名，以保证唯一性。

# c# - Linq和维度数组中的SelectMany？

> ID：14030140
> 
> 赞同：3
> 
> 时间：2012-12-25T11:18:03.020
> 
> 标签：c#, .net, arrays, linq, .net-4.0

为什么此代码编译：

```
byte[][] my2DArray =new  byte  [][]{  
                        new byte[] {1, 2},
                        new byte[] {3, 4},
                       };

  var r = my2DArray.SelectMany(f=> f); 
```

而这个不是：

```
byte[,] my2DArray =new byte [2,2]{  
                                   {1, 2},
                                   {3, 4},
                                 };

   var r = my2DArray.SelectMany(f=> f); 
```

不是`[][]`吗`[,]`？

# 编辑

为什么我需要那个？

我需要创建一个单维数组，以便将其发送到 `GetArraySum`

当然我可以创建超载，但我想将 mutli dim 转换为一个 dim。（`GetArraySum`也服务于纯维度数组）。

```
void Main()
{
    byte[][] my2DArray =new  byte  [][]{  
                                         new byte[] {1, 2},
                                         new byte[] {3, 4},
                                      };

      var sum = GetArraySum(my2DArray.SelectMany(f=> f).ToArray());

}

 int GetArraySum(byte [] ar)
 {
 return ar.Select(r=>(int)r).Sum();
 } 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-25T11:19:42.423

> 不是 [][] 是 [,]

不，A`byte[][]`是一个[*锯齿状数组*](http://msdn.microsoft.com/en-us/library/2s05feca.aspx)- 一个数组数组。“外部”数组的每个元素都是对法线`byte[]`的引用（当然也可以是空引用）。

A`byte[,]`是一个[*矩形阵列*](http://msdn.microsoft.com/en-us/library/s7e8s029.aspx)- 单个对象。

矩形数组不实现`IEnumerable<T>`，只有非泛型`IEnumerable`，但您可以使用`Cast`将每个项目转换为`byte`：

```
byte[,] rectangular = ...;
var doubled = rectangular.Cast<byte>().Select(x => (byte) x * 2); 
```

但这只会将矩形数组视为单个字节序列 - 它*不是*一个“子数组”序列，就像你使用锯齿状数组一样......你不能使用`Cast<byte[]>`例如。

就我个人而言，我很少使用任何一种多维数组——你想在这里实现什么？可能有更好的方法。

编辑：如果您只是想对矩形数组中的所有内容求和，这很容易：

```
int sum = array.Cast<byte>().Sum(x => (int) x); 
```

毕竟，您并不真正关心事物的布局 - 您只需要所有值的总和（假设我已经正确解释了您的问题）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-25T11:21:58.413

这不会编译，因为`[,]`它是多维数组并且`[][]`是数组数组（[msdn](http://msdn.microsoft.com/en-us/library/aa288453%28v=vs.71%29.aspx)）

因此，您的第一个示例将返回数组，而第二个示例则很复杂

# asp.net-mvc - 在 ActionLink 中返回查询字符串

> ID：14030141
> 
> 赞同：1
> 
> 时间：2012-12-25T11:18:40.723
> 
> 标签：asp.net-mvc, asp.net-mvc-3

嗨，我正在尝试将查询字符串传递给链接，我已经这样写了：

```
@Html.ActionLink(subcategory,"Index" , "Products" , new { category = subcategory}) 
```

我写它的方式我收到了这个，它似乎不识别actionName：

```
http://localhost:2100/?Length=8 
```

如果我删除 new { category = subcategory} 我得到这个：

```
http://localhost:2100/Products 
```

我希望 ActionLInk 做的是返回如下内容：

```
http://localhost:2100/Products/Index?substring=9 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-25T11:24:07.200

您使用了[错误](http://msdn.microsoft.com/en-us/library/dd492124%28v=vs.108%29.aspx)的`Html.ActionLink`. 这就是为什么第三个参数`"Products"`被解释为导致`?Length=8`url 的路由值。

作为旁注：`Length=8`来自`string`具有一个属性`Length`且`"Products"`字符串长度为 8 的类型。

所以你只需要使用[正确的重载之一](http://msdn.microsoft.com/en-us/library/dd504972%28v=vs.108%29.aspx)：

```
@Html.ActionLink(subcategory, //link text
                 "Index", //action name
                 "Products", //controller name
                 new { category = subcategory}, //route values
                 null // html attributes
                ) 
```

# java - perl 和 java 正则表达式功能有什么区别？

> ID：14030146
> 
> 赞同：19
> 
> 时间：2012-12-25T11:19:12.037
> 
> 标签：java, regex, perl, regex-lookarounds

perl 和 java 在支持哪些正则表达式术语方面有什么区别？

这个问题仅与正则表达式隔离，并且特别排除了*如何*使用正则表达式的差异 - 即使用正则表达式的可用函数/方法 - 以及语言之间的句法差异，例如 java 要求转义反斜杠等。

特别令人感兴趣的是 java 对可变长度后视的部分/偶尔支持。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-12-25T11:29:15.133

的“与 Perl 5 的比较”部分[`java.util.regex.Pattern`](http://docs.oracle.com/javase/7/docs/api/java/util/regex/Pattern.html#jcc)列出了许多不同之处。例如，Java 不支持[条件正则表达式](http://www.regular-expressions.info/conditional.html)。为此，您需要使用一些外部库，例如[JRegex](http://jregex.sourceforge.net/)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-25T11:29:04.693

java.util.regex.Pattern API 中有一段“**与 Perl 5 的比较**”。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-07-07T05:00:39.277

来自 Tom Christiansen 的 OSCON 演讲[Unicode Support Shootout: The Good, the Bad, & the (mostly)丑陋](http://dheeb.files.wordpress.com/2011/07/gbu.pdf)的幻灯片涵盖了 Perl 和 Java（以及其他语言）在支持正则表达式的 Unicode 技术建议方面的一些差异，它们区分Java 1.6 和 1.7 之间（显着提高了支持）。

# visual-studio - 工作项 0 无效，无法保存

> ID：14030147
> 
> 赞同：1
> 
> 时间：2012-12-25T11:19:22.880
> 
> 标签：visual-studio, automation, automated-tests, microsoft-test-manager, tcm

我正在尝试将自动化测试用例导入到 Microsoft 测试管理器（使用 TCM.exe）我之前已经这样做了，但是当我现在尝试这个时，它给了我这个错误：

> 工作项 0 无效，无法保存。例外：“F237124 工作项尚未准备好保存”。

我使用了命令：

```
tcm testcase /import /storage:"C:\Data\Banan\Projects\Bcc\TestProject\bin\Debug\TestProject.dll" /category:"XXXXX" /syncsuite:18888 
```

其中XXXXX为测试类别，其他字段在TCM的配置文件中指定。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-26T09:12:46.437

在导入中，我假设您正在从代码文件中导入（提供值）部分或全部属性。该错误表明您正在将一些强制性属性（我认为 workitemId 可能是其他东西）导入模板，并且未给出其值或为该属性提供了默认零值，这在保存时会出错。

对于导入的三个测试用例，请检查您是否提供了与其他（导入失败）不同的属性值。我认为这会将您引导到错误的根源。请让我知道它是否有效。

# url-rewriting - 将诸如 profile/foo 之类的 URL 重写为 profile.php?username=foo 时样式表中断

> ID：14030151
> 
> 赞同：1
> 
> 时间：2012-12-25T11:19:50.200
> 
> 标签：url-rewriting

我在一个`.htaccess`文件中有这个代码：

```
Options +FollowSymLinks
RewriteEngine On
RewriteCond %{SCRIPT_FILENAME} !-d
RewriteCond %{SCRIPT_FILENAME} !-f
RewriteRule ^([^\.]+)$ $1.php [NC,L]
RewriteRule ^profile/(.*)$ profile.php?username=$1 
```

我的 CSS 样式表适用于所有页面，但匹配最后一条规则的页面除外（用于配置文件）：

```
RewriteRule ^profile/(.*)$ profile.php?username=$1 
```

例如，当我键入 时`www.mydomain.com/register`，样式表正在工作。但是当我输入时`www.mydomain.com/profile/username`，样式表不起作用。

我的样式表和其他辅助文件位于不同的文件夹中：`css/`、`images/`、`js/`等。

我能做些什么？请帮忙 :D

* * *

编辑：我有一个像这样的页眉和页脚：`includes/header.php`, `includes/footer.php`. 文件`header.php`中是 PHP 代码：

```
<?php include 'head.php'; ?> 
```

这`head.php`是 CSS 的元标记：

```
<link rel="stylesheet" href="css/screen-site.css"> 
```

这是文件夹结构的截图： http: [//shrani.si/f/3z/13T/1OKC8ZJc/site.png](http://shrani.si/f/3z/13T/1OKC8ZJc/site.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-25T14:44:28.147

问题是这些都是*内部*重写。因此，即使您的网络服务器正在从 发送数据`/profile.php?username=whatever`，浏览器仍然认为它正在从 接收页面`http://www.mydomain.com/profile/whatever`。

因此，当它看到类似的相对 URL 时`css/screen-site.css`，会将其解析为`http://www.mydomain.com/profile/css/screen-site.css`不存在的 。

我能想到至少三种不同的方法来解决这个问题：

1.  最简单且可能是最好的解决方案是`/`在您的链接前添加 a ，使它们看起来像`/css/screen-site.css`. 斜杠使浏览器将 URL 路径视为相对于您站点的根目录，而不是（它认为是）当前目录。

2.  或者，您可以`base`在 HTML`head`部分中包含一个标签，如 slash197 建议的那样，例如`<base href="http://www.mydomain.com/">`. 这样，您 HTML 中的*所有*相对 URL 都将被解释为相对于您网站的根目录。

3.  您还*可以*使用更多重写规则来解决此问题，例如：

    ```
    RewriteRule ^profile/((css|images|js)/.*) $1 [L] 
    ```

    但是，这比前两个解决方案效率低，因为浏览器不会意识到不同的 URL 实际上引用了相同的样式表（即使您使用外部重写来告诉它它们这样做，它仍然需要查询服务器以找出答案）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-10-29T22:32:16.443

您还可以使用基本 url 在 config.php 文件中创建一个变量：

```
$base_url = "http://www.yourdomain.com/"; 
```

然后在你的头文件中：

```
<link href="<?php echo $base_url; ?>css/style.css" /> 
```

# android - 如何仅使屏幕的一部分变暗/模糊？

> ID：14030154
> 
> 赞同：8
> 
> 时间：2012-12-25T11:19:57.240
> 
> 标签：android, screen, android-view

我知道我们可以使屏幕变暗/模糊，如[本文](https://stackoverflow.com/questions/10372404/android-alternative-to-flag-blur-behind)所示。

我应该怎么做才能仅使其中的一部分变暗/模糊，使单个（或多个）视图没有任何效果，以便整个屏幕具有突出显示视图的效果？

另外，即使我在当前屏幕上创建一个对话框，它是否会起作用，这样对话框和突出显示的视图将保持没有任何效果？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-08-23T12:58:15.557

我认为 Showcase View 可能对您有所帮助。
ShowcaseView 库旨在通过独特且有吸引力的叠加层向用户突出和展示应用程序的特定部分。这个库非常适合指出用户的兴趣点、手势或晦涩但有用的项目。

该库基于 Ice-Cream Sandwich 和 Jelly Bean 的 Launcher 中的“Cling”视图，但经过扩展使其更易于使用。

[链接到 GitHub](https://github.com/amlcurran/ShowcaseView)

# mongodb - 在 EC2 上使用 MongoDB 存储分数 Twitter Firehose

> ID：14030155
> 
> 赞同：-4
> 
> 时间：2012-12-25T11:19:59.623
> 
> 标签：mongodb, amazon-web-services, amazon-ec2, bigdata, nosql

我希望满足以下要求：

1.  存储大量推文（比如每天 500 万条）和相关的用户资料。
2.  能够查询数据（获取在时间 X 和时间 Y 之间创建的所有推文）。
3.  随着数据大小的增加，能够将服务器添加到集群中。

我对 MongoDB 不熟悉。

A. 我可以用 MongoDB 满足上述要求吗？

B. 如果我要使用 EC2 执行上述操作，您会推荐什么规格的硬件：例如：从 2 个大型实例开始，每个实例附加 500GB 的 EBS。

谢谢。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-25T17:53:45.820

确实，您的问题缺乏任何真正的研究，因此您的目的还不清楚并且有点偏离主题，但是我会就该主题给出一些指示；也许他们会帮助你。

是的，MongoDB 就像 MySQL 或 MSSQL 或 Postgres SQL 一样可以处理这种工作负载。这个数据集对数据库来说并不是什么新鲜事。是的，我想如果您每秒存储 9,000 条推文，每天存储 5 亿条推文（[http://yearinreview.twitter.com/en/tps.html](http://yearinreview.twitter.com/en/tps.html)），您可能需要非常仔细地研究您选择的技术（就像 Twitter 所做的那样当他们选择走 NoSQL 路线时），但您存储的远比这要少得多。然而，即使在这种情况下，已经证明通过正确的设置（此处为 Facebook）MySQL 也可以处理这样的负载。

所以这不是一个问题：*这个数据库可以处理这个吗？*更多的是一个问题：*我的数据库如何处理这个问题？*

我要提到的第一件事是对如何在 MongoDB 中构建服务器集群进行更多研究，我可以肯定地说，如果您需要副本 ( [http://docs.mongodb.org/manual/replication/](http://docs.mongodb.org/manual/replication/) ) 和分片 ( [http:// /docs.mongodb.org/manual/sharding/](http://docs.mongodb.org/manual/sharding/)）您将需要两个以上的服务器。

如果您真的想要我对此的个人意见，我选择不使用资源较多的服务器，例如大型实例，而是决定使用数量更多的小型服务器。从长远来看，它们被证明更便宜，实际上更容易管理。

Now talking about how a database can handle this again. I have introduced sharding and replica sets. These two parts will be extremely important to you to keep your database scaling well into a cluster and to keep consistency and availability of your data but this is only one part. You must also have the right working set and the right indexes and the right schema (a lot of rights there, not an English mistake - intentional).

I can imagine you will have two collections for this, a `user` collection and a `tweet` collection with maybe indexes on `_id` for a user and `user_id` for `tweet`. You will probably make those into shard keys as well splitting the `tweet` collection on `user_id` so you can quickly range a users tweets across multiple computers by only querying one computer instead of doing a global scatter and gather operation. However considering you might have to do time operations too (get tweets between x and y date) you might want to look into some time based shard index instead, I am unsure; this is for your testing.

That should get you started on thinking and researching into MongoDB for your use case.

Hope it helps,

# java - 如何索引数组以从 1 而不是 0 开始？

> ID：14030157
> 
> 赞同：4
> 
> 时间：2012-12-25T11:20:35.053
> 
> 标签：java, arrays, indexing

在这种情况下，程序应该将所有数组加在一起。但是，如果我在 sum 方法参数中输入 1，它将从 7 开始计数，但如果我输入 0，它会输出 0。

```
public class sList {

   public static void main(String[]args) {
       int[] array = {10,7,11,5,13,8}; // How do I make it read the value 10 as 1 in the array?
       sum(array.length,array);
   }

   public static int sum(int n, int[] S) {
       int i;
       int result;

       result = 0;
       for(i=1;i<=n;i++)
           result = result + S[i];

       System.out.println(result);
       return result;
   }    
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-25T11:26:15.077

我不会传递长度，因为：

*   它是多余的 -`array.length`如果你想知道它会告诉你长度
*   无论如何你都不需要知道长度，因为有更好的方法来迭代数组

相反，只需使用[foreach 循环](http://docs.oracle.com/javase/1.5.0/docs/guide/language/foreach.html)遍历传入的整个数组：

```
public static int sum(int[] array) {
    int result = 0;
    for (int i : array)
        result += i;
    return result;
} 
```

这样做会减少很多代码，从而更容易阅读和理解。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-25T11:22:47.210

好吧，数组索引以 开头`zero`，我想到的唯一方法是在获取值的同时减少 i 的值。

```
int[] s = {10,7,11,5,13,8}; 

for(i=1;i<=n;i++){
    result = result + S[i-1];
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-25T11:28:23.293

想想看，它对 0 的影响（否则为 1）：

情况 0：（n = 长度 = 6）0、1、2、3、4、5、6

案例 1：（n = 6）1、2、3、4、5、6

数组中的字面填充位置：0、1、2、3、4、5

在任何一种情况下，元素 6 都不在数组中，因此存在错误。万一你“忘记”计算索引为 0 的第一个元素。

这就是为什么你必须写： for (i = 0; i <= n-1; i++)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-25T11:22:59.580

您应该更改 for 循环，而不是更改数组：

```
for(i=0;i<n;i++) 
```

但如果你不想这样做，你总是可以将第一个元素设为 0：

```
int[] array = {0, 10,7,11,5,13,8}; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-09-14T20:52:00.990

只需继续将 for 循环设置为加 1 值，以便 0 数组值准确反映相对索引！

```
for (int i = 0; i < helloArray.length; i++) {

            if (i == max) {
                System.out.println(helloArray[i]);
                System.out.println("=");
                System.out.println(i+1);
            } 
```

# c++ - std::map 的 make_pair - 仅在未列出密钥时如何制作一对（否则更新密钥）？

> ID：14030162
> 
> 赞同：4
> 
> 时间：2012-12-25T11:21:31.587
> 
> 标签：c++, map, iterator, containers

考虑以下代码：

```
std::map <string,string> myMap;
myMap.insert(std::make_pair("first_key" , "no_value" ));
myMap.insert(std::make_pair("first_key" , "first_value" ));
myMap.insert(std::make_pair("second_key" , "second_value" ));

typedef map<string, string>::const_iterator MapIterator;
for (MapIterator iter = myMap.begin(); iter != myMap.end(); iter++)
{
    cout << "Key: " << iter->first << endl << "Values:" << iter->second << endl;
} 
```

输出是：

```
Key: first_key
Values:no_value
Key: second_key
Values:second_value 
```

意思是第二个任务：

```
myMap.insert(std::make_pair("first_key" , "first_value" )); 
```

没有发生。

仅当密钥尚未列出并且已列出时，我如何才能配对 - 更改其值？

有 std::map 的通用方法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-25T11:26:46.367

如果找到键，则使用`operator []`，或使用`find`并更改值。将在映射中插入对，如果没有这样的键和更新值，如果键存在。

```
myMap["first_key"] = "first_value"; 
```

或这个：

```
auto pos = myMap.find("first_key");
if (pos != myMap.end())
{
   pos->second = "first_value";
}
else
{
   // insert here.
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-25T11:26:37.533

插入前添加条件

```
if (myMap.find("first_key") == myMap.end()) {
  myMap.insert(std::make_pair("first_key" , "first_value" ));
}
else {
  myMap["first_key"] = "first_value";
} 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2015-10-23T21:23:51.640

当值存在时避免第二次搜索地图更有效：

```
const iterator i = myMap.find("first_key");
if (i == myMap.end()) {
    myMap.insert(std::make_pair("first_key" , "first_value"));
} else {
    i->second = "first_value";
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-09-07T07:55:15.920

```
 #include <map>
//use of make_pair using map container

std::map< std::string, std::map<std::string, float> > student;
        std::map<std::string, float> data;
           data.insert(make_pair("rollno", 11));
        data.insert(make_pair("Physics", 55));
        data.insert(make_pair("Chemistry", 80));
        data.insert(make_pair("Math", 65));
        student.insert(make_pair("Milind Morey", data));

        data.insert(make_pair("rollno", 12));
        data.insert(make_pair("Physics", 40));
        data.insert(make_pair("Chemistry", 90));
        data.insert(make_pair("Math", 77));
        student.insert(make_pair("pankaj B", data));

        data.insert(make_pair("rollno", 12));
        data.insert(make_pair("Physics", 84));
        data.insert(make_pair("Chemistry", 59));
        data.insert(make_pair("Math", 76));
        student.insert(make_pair("Sachin D", data));

        for (auto s : student)
        {
            std::map<std::string, float> rmrk = s.second;
            cout <<endl<< s.first<<"   ";
            for (auto stddetails : s.second)
            {
                cout <<"   "<< stddetails.first << "   " << stddetails.second;
            }
        } 
```

# c# - DataGrid 和按钮：未调用单击的事件处理程序

> ID：14030163
> 
> 赞同：1
> 
> 时间：2012-12-25T11:21:34.990
> 
> 标签：c#, wpf, xaml, click, wpfdatagrid

我有一个`StackPanel`与 a`DataGrid`绑定的 a`DataSet`和一个`Grid`在`DataGrid`底部底部的a `StackPanel`。在`Grid`用户更改. `Button`_ `DataAdapter`_`DataSet``DataGrid`

这主要按预期工作，但并非总是如此。

我的期望是每当我单击按钮时都会调用事件处理程序。如果我更改数据网格中的现有行然后单击按钮，或者如果我在网格的最后（空）行中输入值，然后按 enter 最后单击按钮，这确实有效。如果我在网格的最后一行输入值并且不按回车键，则单击该按钮会在数据网格的底部产生一个新的（空）行，并且*不会*调用事件处理程序。仅通过再次单击它来调用事件处理程序。为什么是这样？我可以改变这个吗？

我的第一个怀疑是`DataSet`需要以某种方式通知新数据，但是如果我添加一个新行，按 Enter 并添加第二个新行，那么按钮单击也不会导致调用事件处理程序，这意味着我的怀疑并不能解释这种行为。

这是使用 Visual Studio Express 2012

这是`XAML`：

```
<Window x:Class="AppVer0._01.ProducerWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    Title="Producer" Height="300" Width="300">
  <StackPanel>
    <DataGrid ItemsSource="{Binding producer}"    
              AutoGenerateColumns="True"
              HorizontalAlignment="Left"
              Name="producerDataGrid"
              />
    <Grid>
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="100"/>
            <ColumnDefinition Width="100"/>
            <ColumnDefinition Width="100"/>
        </Grid.ColumnDefinitions>
        <Button Name="buttonUpdate" Click="buttonUpdate_Click_1">Aktualisieren</Button>
    </Grid>
  </StackPanel>
</Window> 
```

（我计划添加更多按钮，因此网格有更多列）后面的代码（用于`Window）定义绑定如下：

```
DataSet ds = new DataSet();
// ...
// load data from adapter into dataset
// 
this.DataContext = ds; 
```

当然，还有定义的事件处理程序。

**编辑：**如果重要，窗口被称为对话框。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-25T14:51:19.797

我认为您应该检查 DataGrid 是否处于编辑模式。

在您的数据网格中处理这两个事件：[BeginningEdit](http://msdn.microsoft.com/en-us/library/system.windows.controls.datagrid.beginningedit.aspx)和[CellEditEnding](http://msdn.microsoft.com/en-us/library/system.windows.controls.datagrid.celleditending.aspx)（或者在您的情况下可能是[RowEditEnding](http://msdn.microsoft.com/en-us/library/system.windows.controls.datagrid.roweditending.aspx)）

定义此属性`public bool IsInEditMode;`和：

```
void dg_BeginningEdit(object sender, BeginningEditEventArgs e)
{
    IsInEditMode=true;
}

void dg_CellEditEnding(object sender, CellEditEndingEventArgs e)
{
    IsInEditMode=false;
} 
```

现在您可以确定何时处于编辑模式，何时按下按钮：

```
 void buttonUpdate_Click_1(...)
 {
      if (IsInEditMode)
       {
           producerDataGrid.CommitEdit();
       }
  } 
```

请参阅[CommitEdit](http://msdn.microsoft.com/en-us/library/dd402940.aspx)方法。我们称之为结束编辑。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-25T16:19:07.473

[在此 MS 页面](http://msdn.microsoft.com/en-us/magazine/cc785480.aspx)上的一篇文章的帮助下，我想出了如何改变我所描述的行为。我向按钮的 MouseDownEvent 添加了一个处理程序，即使该`e.Handled`属性已设置为 true，该处理程序也会被调用，如下所示：

```
buttonUpdate.AddHandler(UIElement.MouseDownEvent,
        (RoutedEventHandler)buttonUpdate_ClickAlwaysCalled, true); 
```

最后`true`的伎俩，已经在 XAML 中分配的处理程序现在根本没有被调用（所以新的处理程序似乎首先被调用并且以某种方式神奇地设置`event.Handled`为`true`，但我不知道我是否可以依靠这个。由于两次调用更新函数没有害处，这对我来说很好）。我不确定这是否是这样做的好方法，但它确实有效。

[http://msdn.microsoft.com/en-us/magazine/cc785480.aspx](http://msdn.microsoft.com/en-us/magazine/cc785480.aspx)

# python - 在 sqlalchemy 中绑定关系时分配变量

> ID：14030169
> 
> 赞同：4
> 
> 时间：2012-12-25T11:22:04.857
> 
> 标签：python, properties, sqlalchemy, relationship, descriptor

我有以下两个课程：

```
class user(Base):
   ....
   id=Column(Integer, primary_key=True)
   address=relationship('Address',backref='user')

class Address(Base):
   ...
   IsItAssgined=False
   user_id=Column(Integer, ForeignKey('user.id')) 
```

让我们创建这些类的两个实例：

```
Addr=Address()
Tom=User() 
```

我想要以下行为：将 Addr 附加到用户后，地址中的 IsItAssigned 字段更新为 True，即

```
Tom.address.append(Addr)
print Addr.IsItAssigned 
-> to be True 
```

如果可能的话，我不知道如何在这里使用描述符。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-25T12:22:18.833

我会为此使用一个属性，一个测试`user_id`列是否不为 NULL 的属性。A[`column_property()`](http://docs.sqlalchemy.org/en/latest/orm/mapper_config.html#using-column-property-for-column-level-options)在这里似乎合适：

```
from sqlalchemy.orm import column_property

class Address(Base):
   ...
   user_id = Column(Integer, ForeignKey('user.id'))
   IsItAssigned = column_property(user_id != None) 
```

现在`IsItAssigned`将是`True`或`False`。或者，使用[混合属性](http://docs.sqlalchemy.org/en/latest/orm/mapper_config.html#using-a-hybrid)：

```
from sqlalchemy.ext.hybrid import hybrid_property

class Address(Base):
   ...
   user_id = Column(Integer, ForeignKey('user.id'))

   @hybrid_property
   def IsItAssigned(self):
       return self.user_id != None 
```

混合属性的优点是也可以在查询中使用。最后但同样重要的是，对于这种情况，也许普通属性也可以，但它只适用于已加载的实例：

```
class Address(Base):
   ...
   user_id = Column(Integer, ForeignKey('user.id'))

   @property
   def IsItAssigned(self):
       return self.user_id is not None 
```

不过，我会使用不同的名称。`assigned`可能会更好；[Python 风格指南 (PEP 8)](http://www.python.org/dev/peps/pep-0008/)提倡使用for`lower_case_with_underscores`方法和实例属性。

# windows - Ntcreatefile 分配大小

> ID：14030171
> 
> 赞同：1
> 
> 时间：2012-12-25T11:22:12.293
> 
> 标签：windows

`AllocationSize`函数中参数的目的是什么`Ntcreatefile`？

当使用非零值`AllocationSize`并用 关闭文件时`NtClose`，实际文件大小**不等于** `AllocationSize`。

**为什么 ？**

这个参数好像没什么用。

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-25T14:25:42.523

NtCreateFile() 对参数没有做任何特殊的事情，它只是将它传递给 MJ_CREATE 请求中的文件系统驱动程序。您将需要 WDK 来了解它是如何被使用的。一个值得一看的是 FAT 驱动程序，您会发现 src/filesys/fastfat/w2k/create.c 中使用的 AllocationSize。按照调用链进入 allocsup.c，FatAllocateDiskSpace()。

预先了解预期分配大小的机会比比皆是。它可以在磁盘驱动器磁头已经在正确位置更新文件分配表的情况下预先分配簇。当卷在使用每个可用集群之前空间不足时，它可能会导致创建调用失败。相反，让它不会失败将确保您可以写入文件而不会耗尽磁盘空间。只要您写的内容不超过您的要求。

当然，当您关闭文件时，文件大小将更新为实际写入的字节数。AllocationSize 只是一个提示。

# ruby - min_by Ruby（关联数组中的最小值）

> ID：14030174
> 
> 赞同：2
> 
> 时间：2012-12-25T11:22:31.213
> 
> 标签：ruby

我在模型类中有以下内容`User`：

```
 def thisUsersUserRole
    userRoles = []
    self.userRoles.each do |ur|
      userRoles << { "id" => ur.role_id, "name" => ur.roleName }
    end
    #line in question
    userRoles.values.min_by(&:first)
    # puts userRoles
  end 
```

显示`puts`如下：

```
{"id"=>1, "name"=>"admin"}
{"id"=>2, "name"=>"owner"}
{"id"=>3, "name"=>"manager"} 
```

我正在尝试搜索数组（总共不超过 10 个，但根据我的研究，这是最便宜的方法）并返回哈希/关联数组中`"name"`最小值的属性值。`"id"`

我如何使用`min_by`来完成此操作。该[文档](http://ruby-doc.org/core-1.9.3/Enumerable.html#method-i-min_by)没有任何意义......请帮助我理解语法，因为只是为我提供正确的行不会帮助我学习。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-25T12:24:44.627

鉴于现有代码和您对我的评论的回复，我认为这就是您想要的：

```
role_hash_with_smallest_id = userRoles.min_by {|role_hash| role_hash['id']}
role_hash_with_smallest_id['name'] 
```

但是，可能有一种更简单的方法：

```
role_with_smallest_id = self.userRoles.min_by {|role| role.id}
role_with_smallest_id.name 
```

可以简写为

```
role_with_smallest_id = self.userRoles.min_by(&:id)
role_with_smallest_id.name 
```

这是假设`self.userRoles`已经是一个`Enumerable`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-25T11:30:49.067

试试下面：

```
def thisUsersUserRole
  userRoles.min_by(&:role_id).roleName
end 
```

编辑：如果`userRoles`是散列数组，则尝试：

```
def thisUsersUserRole
  userRoles.min_by{ |ur| ur['id'] }['roleName']
end 
```

# node.js - 如何判断茉莉花中哪些测试花费的时间最多？

> ID：14030175
> 
> 赞同：6
> 
> 时间：2012-12-25T11:22:30.620
> 
> 标签：node.js, jasmine

我注意到整套 Jasmine 测试开始花费我想要的更多时间，但我不确定哪些实际上会导致延迟。有没有办法在不单独运行每个测试的情况下找到它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-25T16:41:23.413

基本`ConsoleReporter`只报告所有测试经过的时间，但是如果您查看它的[源代码](https://github.com/pivotal/jasmine/blob/master/src/console/ConsoleReporter.js)，您会发现很容易修改为每个规范添加经过的时间。基本上，您需要做的是记录调用函数`reportSpecStarting`（即在规范开始运行之前）时规范开始的时间，并在函数`reportSpecResults`（即在规范完成运行之后）输出差异。

因此，如果您对此进行了修改[`ConsoleReporter`](https://github.com/pivotal/jasmine/blob/master/src/console/ConsoleReporter.js)，它将向您输出每个规范的名称及其经过的时间：

```
this.reportSpecStarting = function() {
    this.specStartingTime = this.now();
};

this.reportSpecResults = function(spec) {
    var results = spec.results();

    print(results.description + " ");

    if (results.skipped) {
        yellowStar();
    } else if (results.passed()) {
        greenDot();
    } else {
        redF();
    }

    print(" (" + (this.now() - this.specStartingTime) + "ms)");
    newline();
}; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-25T11:27:29.687

使用 Jasmines HTMLReporter 怎么样？（向下） [http://pivotal.github.com/jasmine/](http://pivotal.github.com/jasmine/)

嗯..也许你可以循环它以便每个文件单独执行？（不是最好的答案：（） [http://elegantcode.com/2011/03/07/taking-baby-steps-with-node-js-bdd-style-unit-tests-with-jasmine-node-sprinkled-有一些应该/](http://elegantcode.com/2011/03/07/taking-baby-steps-with-node-js-bdd-style-unit-tests-with-jasmine-node-sprinkled-with-some-should/)

# c# - 使用实体框架在 Windows Azure 中播种成员资格

> ID：14030180
> 
> 赞同：3
> 
> 时间：2012-12-25T11:22:55.953
> 
> 标签：c#, asp.net-mvc-4, azure-sql-database, entity-framework-5

我正在尝试使用 ASP.NET MVC 4 和 Entity Framework 5 在我的 SQL Azure 数据库中创建成员角色。我可以让它在我的本地主机上正常工作，但它似乎没有创建帐户，也没有Azure 上的成员角色。请注意，我也在使用 Fluent NHibernate，但我相信这无关紧要。

在我的 Application_Start() 函数中，我初始化数据库以确保所有表都存在：

```
WebSecurity.InitializeDatabaseConnection("DefaultConnection", "UserProfile", "UserId", "UserName", autoCreateTables: true); 
```

我还创建了一个 SeedMembership() 函数（由 Migrations\Configuration.cs 中的 Seed() 函数调用），如下所示：

```
private void SeedMembership()
    {
        WebSecurity.InitializeDatabaseConnection("DefaultConnection", "UserProfile", "UserId", "UserName", autoCreateTables: true);

        var roles = (SimpleRoleProvider)Roles.Provider;
        var membership = (SimpleMembershipProvider)Membership.Provider;

        if (!roles.RoleExists("Administrator"))
        {
            roles.CreateRole("Administrator");
        }
        if (membership.GetUser("TestAccount", false) == null)
        {
            membership.CreateUserAndAccount("TestAccount", "testpwd");
        }
        if (!roles.GetRolesForUser("TestAccount").Contains("Administrator"))
        {
            roles.AddUsersToRoles(new[] { "TestAccount" }, new[] { "Administrator" });
        }
    } 
```

在包管理器控制台中使用 update-database 我可以看到正在调用 Seed 方法。我什至使用实际的 SQL Azure 连接字符串运行了这个命令：

```
PM> Update-Database -StartUpProjectName "MyProject" -ConnectionString "Data Source=tcp:myDB.database.windows.net,1433;Initial Catalog=myDB;User Id=myUser@myDB;Password=myPwd" -ConnectionProviderName "System.Data.SqlClient"
Specify the '-Verbose' flag to view the SQL statements being applied to the target database.
Applying code-based migrations: [201212251057032_Initial].
Applying code-based migration: 201212251057032_Initial.
Running Seed method.
PM> 
```

但即使这样，我的“管理员”帐户也没有创建。我知道是因为我在我的视图中添加了一个检查：

```
@if(User.IsInRole("Administrator"))
{
    <li>@Html.ActionLink("Admin", "Index", "Admin")</li>
} 
```

在 Azure 上尝试时，“管理员”链接永远不会出现，但在本地工作得很好。

有没有办法让我解决正在发生的事情？我是否正确地尝试了这个？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-26T12:14:28.870

经过几天的故障排除和拉扯，我得到了这个工作。我通过在 App_Start() 中添加来自 SeedMembership() 的检查来修复它。根据 Interweb 和 Visual Studio，在部署时会调用 Seed() 函数，但这不是我所看到的。

# mysql - SQL，如何计算范围内的行数

> ID：14030182
> 
> 赞同：3
> 
> 时间：2012-12-25T11:23:45.113
> 
> 标签：mysql, sql, select

我有两张桌子：

一个是`a_tbl(uid, login_ip, login_time);`

这里 ip 是一个 32 位整数，time 是 unix 时间戳。

另一个是`b_tbl(country, province, city, ip_from, ip_to)`

我想找出每个范围`b_tbl`在`a_tbl`.

请注意，`b_tbl`它有很多独特的行，并且`a_tbl`可能存在重复的 uid。

非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-25T11:33:34.407

要实现这一点，您可以使用 BETWEEN 作为其谓词编写一个 JOIN。这将发展范围；然后，只需计算每个范围内的项目。这样的事情应该让你开始：

```
SELECT b_tbl.ip_From, b_tbl.ip_to, COUNT(a_tbl.login_ip)
  FROM a_tbl
  JOIN b_tbl ON a_tbl.login_ip BETWEEN b_tbl.ipfrom AND b_tbl.ip_to
GROUP BY  b_tbl.ip_From, b_tbl.ip_to; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-25T11:37:21.177

尝试这个：

```
SELECT ip_from
    , ip_to
    , COUNT(distinct uid) as NumberOfUniqueUserId
FROM a_tbl
INNER JOIN b_tbl on login_ip BETWEEN ip_from AND ip_to
GROUP BY ip_from
    , ip_to 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-25T11:38:03.573

```
SELECT city, count(uid)
FROM (
  SELECT DISTINCT A.uid, B.city
  FROM a_tbl A 
       LEFT JOIN b_tbl B 
                 ON A.login_ip >= B.ip_from AND A.login_ip <= B.ip_to
)
GROUP BY city 
```

# eclipse - 是否可以使用 Eclipse IDE 和 GAE 插件通过 PlayFramework 开发和部署 Scala 应用程序？

> ID：14030186
> 
> 赞同：4
> 
> 时间：2012-12-25T11:24:39.267
> 
> 标签：eclipse, google-app-engine, scala, playframework-2.0

是否可以使用 Eclipse IDE 和 GAE 插件通过 PlayFramework v2.0 开发和部署 Scala 应用程序？PlayFramework v1.0 还有一些过时的 GAE 模块。任何说明或链接？还是只能手动部署（例如[https://developers.google.com/appengine/docs/java/tools/uploadinganapp](https://developers.google.com/appengine/docs/java/tools/uploadinganapp)）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-25T14:29:07.120

你看过[ScalaGWT](https://github.com/scalagwt/scalagwt-scala)吗？它工作得很好，也可以在 Eclipse 中轻松调试。GitHub 上也托管了一些示例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-26T09:50:34.433

在我写这篇文章的时候，似乎没有在 GAE 上运行 Playframework 2.0 应用程序的解决方案。不用说，任何工具都不起作用。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-12-25T11:38:44.213

我想是的，**使用 play console 制作一个 play 应用程序**，通过向其添加**gae 模块来****添加 gae 支持**，然后将其**eclipsify**。在写这篇文章时，我假设您已经阅读了 play v1.0 文档。如果不是，我建议先通过 playframework.org。

# youtube-api - 如何在 YouTube 上的一个请求中从评论提要中获取用户缩略图？

> ID：14030187
> 
> 赞同：0
> 
> 时间：2012-12-25T11:24:43.533
> 
> 标签：youtube-api, youtube-javascript-api

我收到了来自 YouTube 的评论提要。有一个带有 uri 参数的作者属性。如何在不多次请求获取每个作者的缩略图的情况下获取作者缩略图？我可以使用类似的东西（我的意思是“字段”参数）： [http](http://gdata.youtube.com/feeds/api/videos/j9-xvIK3WNM/comments?alt=json&fields=entry(published,content,author(uri) ://gdata.youtube.com/feeds/api/videos/j9-xvIK3WNM/comments?alt=json&fields=entry(published,content,author(uri ))

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-28T17:26:33.767

您可以使用批处理在 API 的 v2 中执行此操作：[https ://developers.google.com/youtube/2.0/developers_guide_protocol_batch_processing](https://developers.google.com/youtube/2.0/developers_guide_protocol_batch_processing)

上一个问题有一个获取频道配置文件信息的示例批处理请求：[Youtube API Batch Request BUG?](https://stackoverflow.com/questions/12052959/youtube-api-batch-request-bug)

**但是**，您需要能够执行 HTTP `POST`，并且由于您似乎正在使用 JavaScript，因此对于不支持[CORS](http://en.wikipedia.org/wiki/Cross-origin_resource_sharing)的浏览器来说这是一个问题。

# html - 如何使用 c 在 Atheros 板上维护会话以访问网页

> ID：14030188
> 
> 赞同：1
> 
> 时间：2012-12-25T11:24:59.637
> 
> 标签：html, c, ajax, linux

我正在使用**Atheros 开发板**。堆栈是**LSDK-9.2.0_U10.5.13**。**Linux**版本是**mips-linux-2.6.31**。我有**c 文件、html、js 和 css 文件**。我**没有**使用**cgi**库或**任何脚本语言**（如 php）。

现在我的问题是，我想使用 c 将用户会话（如 php）存储到我的系统中。在我的系统中，我首先打开了 login.html 页面，并希望使用 ajax 对其进行身份验证。这部分完成了，但问题是如何使用C维护会话。

对于我的开发板的 Web 访问，我想添加登录/注销功能。如何使用 C 语言在此功能中使用会话？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T04:45:27.050

这是我的问题的解决方案。

我使用了 jquery.cookie.js 并使用此 js 生成了 cookie，浏览器将此 cookie 与其他标头一起发送到服务器。我的 C 文件获取标题并读取 cookie 并将其存储。下次当它获取 cookie 时，它​​会检查现有的 cookie。如果 cookie 是新的，它会将用户重定向到登录页面，否则它将重定向到请求的页面。

特别感谢 eicto 的帮助。

# php - 生成所有可能的二进制组合

> ID：14030192
> 
> 赞同：2
> 
> 时间：2012-12-25T11:25:28.830
> 
> 标签：php, recursion

我想指定一些位，然后在 PHP 中获取一个包含这些位的所有可能组合的数组。

例子：

```
number: 3
000
001
010
011
etc... 
```

我尝试过最初为字符串设计的递归算法，所以算法太慢了。

最有效的方法是什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-25T11:28:02.217

关于位的好处是你可以用它们做一些非常简单的事情。如果你想要 3 位，你将有 7 个数字，恰好是 8-1。如果你想要 4 位，你将有 15 个数字，恰好是 16-1。使用这个很好的事实来简化您的代码。

```
$bits = 4;
$max = (1 << $bits);

for ($i = 0; i < $max; $i++) {
    // Use $i
    // echo str_pad(decbin($i), $bits, '0', STR_PAD_LEFT);
} 
```

# sql - 出现错误：INSERT 语句与 FOREIGN KEY 约束冲突

> ID：14030204
> 
> 赞同：1
> 
> 时间：2012-12-25T11:27:14.553
> 
> 标签：sql, sql-server, sql-server-2008

我正在研究产品组合的集成部分，我在 SQL Server 2008 中预装了数据库。我无法直接插入或更新数据库，我可以通过该产品开发人员提供的 API 来执行此操作。

每当我通过 API 插入特定交易类型时，我都会收到错误消息 -

> *数据库“usp_Financial_KernelComponents_Index_Insert_Batch_5”命令失败。INSERT 语句与 FOREIGN KEY 约束“FK_Fixings_id_Index_fixingsId”冲突。冲突发生在数据库“Portfolio_new”、表“dbo.Financial_Shared_Fixings”、列“id”中。*

我该如何解决这个错误或者这个错误的可能原因是什么。请建议

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-25T11:31:57.820

您正试图在外键列中插入一条外键列中不存在的值的记录。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-25T11:36:01.633

外键约束意味着一列或一组列的值必须存在于另一个表的一行中，通常作为其主键。这是一个例子：

```
create table country (id int not null, name varchar(100))
create table city(id int not null, country_id int, name varchar(100)) 
```

如果您设置一个外键约束，`city`要求它`country_id`存在于`country`表中，尝试插入`city`无效`country_id`的 a 将导致外键约束违规。

在您的情况下，API 可能采用一组值，其中一个必须是`ID`某种类型的值（或可以通过其检索 ID 的辅助键）。当您将无效值传递`ID`给此类 API 时，将触发外键约束违规。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-10-19T12:18:48.447

当您尝试在外键列中插入一个值时会发生此错误，该值在其父表中不存在。例如，您尝试将值 X 插入 Order 表中的 CustomerId 中，该值在 Customer 表中不存在。发生此错误是因为我们需要有一个好的参照完整性策略。因此，您唯一需要做的就是检查您的新值（您要将它们插入到表中）以找出是否有任何值会损害此规则。

请检查以下问题，您可能会在其中找到有关此错误 [外键约束失败和插入值时的错误消息的相同信息](https://stackoverflow.com/questions/33213347/foreign-key-constraint-failure-and-error-mesage-when-inserting-values/33213983#33213983)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-25T11:37:59.680

用最简单的术语来说，您是在插入父行*之前插入“子”行。*

在您插入子行的那一刻，违反了子父（即外键）约束 - 子父似乎不存在。

要解决此问题，请将插入顺序颠倒为父级，然后是子级（ren）。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-12-25T11:51:14.703

在子表中插入记录之前，您需要在父表中插入（即）引用列被引用的表

# objective-c - 如何为 Reminders.app 生成头文件

> ID：14030208
> 
> 赞同：2
> 
> 时间：2012-12-25T11:27:45.960
> 
> 标签：objective-c, cocoa, scripting-bridge

我对 Scripting Bridge 有点熟悉，并用它来控制 iTunes 中的播放/暂停/后退/下一个功能。通过`sdef`并且`sdp`我能够创建一个 iTunes.h 文件，我可以用它来声明一个`iTunesApplication`对象。

当我尝试对内置的 Reminders.app 做同样的事情时，我收到一个错误消息

> sdp：错误：类“list”继承自未定义的类“item”。
> 
> sdp：错误：类“提醒”继承自未定义的类“项目”。

谁能帮我创建一个 Reminders.h 文件？

# ruby - Ruby 中的“python -i”等价物

> ID：14030209
> 
> 赞同：3
> 
> 时间：2012-12-25T11:27:54.570
> 
> 标签：ruby

我读了这个问题，但这并没有回答。[是否有相当于“python -i”的红宝石？](https://stackoverflow.com/questions/2437582/is-there-a-ruby-equivalent-of-python-i)

如果我的脚本是，

```
#!/usr/bin/ruby

hello = "Hello World" 
```

如果我使用`irb -r main.rb`，我得到，

```
1.8.7 :001 > puts hello
NameError: undefined local variable or method `hello' for #<Object:0x7fb1486f4298>
        from (irb):1
1.8.7 :002 > 
```

仅当我将 hello 定义为全局时才有效。所以，它实际上不是“python -i”的等价物。

那么，确切的等价物是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-25T11:55:10.140

根据[Kernel#load 文档，](http://www.ruby-doc.org/core-1.9.3/Kernel.html#method-i-load)

> 在任何情况下，加载文件中的任何局部变量都不会传播到加载环境。

如果您不喜欢全局变量或常量，一种方法是将数据包装在模块中，例如：`main.rb:`

```
module Wtf
  @hello= "world"
  def self.hello; @hello end
end 
```

> $ irb -r main.rb
> 
> > wtf.你好
> 
> > “世界”

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-07-19T05:24:25.330

所以事实证明实际上有一种邪恶的黑客方式来做到这一点：

```
ruby -rpry <(echo "$(cat main.rb)\nbinding.pry") 
```

（需要[`pry`](https://github.com/pry/pry/)宝石）

### 解释：

`<(`...`)`是一个 Bash[进程替换](https://en.wikipedia.org/wiki/Process_substitution)，它有效地创建了一个管道，其中包含计算括号中的表达式的结果，然后 Ruby 可以对其进行计算。

输出文件的`echo "$(cat main.rb)\nbinding.pry"`内容，在本例中名为`main.rb`，并添加换行符和 Ruby 代码`binding.pry`，当与`require`ing `pry`with结合使用时，`-rpry`可以启用 Pry 的[运行时调用](https://github.com/pry/pry/#runtime-invocation)，将整个程序的状态公开给交互式调试器。

### 例子：

`main.rb`（从上面使用你的）

```
$ ruby -rpry <(echo "$(cat main.rb)\nbinding.pry")

From: /proc/self/fd/11 @ line 4 :

[1] pry(main)> puts hello
Hello World
=> nil
[2] pry(main)> 
```

### 注意事项：

如果您的程序中的逻辑依赖于访问任何变量，例如`_file_`特定于以正确方式运行文件的命令行参数，那么它将不起作用。话虽如此，`Dir.pwd`而且`require`ing 似乎可以正常工作，只要您从与文件相同的目录中执行命令。

# ruby - unimidi 的 FFi 空指针错误

> ID：14030213
> 
> 赞同：1
> 
> 时间：2012-12-25T11:28:32.077
> 
> 标签：ruby, osx-mountain-lion, midi, coremidi

我一直在尝试使用 unimidi gem，但没有成功......我已经在 unimidi github 的存储库上发布了我的问题，但有一段时间没有答案

我在 OS X.8.2 上使用 rvm，ruby 1.9.3-p327

安装unimidi时一切似乎都很好：

```
new-host:~ pierrebaille$ gem install unimidi
Building native extensions.  This could take a while...
Fetching: alsa-rawmidi-0.2.14.gem (100%)
Fetching: ffi-coremidi-0.1.8.gem (100%)
Fetching: midi-jruby-0.0.12.gem (100%)
Fetching: midi-winmm-0.1.10.gem (100%)
Fetching: unimidi-0.3.3.gem (100%)
Successfully installed ffi-1.2.0
Successfully installed alsa-rawmidi-0.2.14
Successfully installed ffi-coremidi-0.1.8
Successfully installed midi-jruby-0.0.12
Successfully installed midi-winmm-0.1.10
Successfully installed unimidi-0.3.3
6 gems installed
Installing ri documentation for ffi-1.2.0...
Installing RDoc documentation for alsa-rawmidi-0.2.14...
Installing RDoc documentation for ffi-coremidi-0.1.8...
Installing RDoc documentation for midi-jruby-0.0.12...
Installing RDoc documentation for midi-winmm-0.1.10...
Installing RDoc documentation for unimidi-0.3.3... 
```

当我尝试使用它时：

```
new-host:~ pierrebaille$ unimidi list
input:
/Users/pierrebaille/.rvm/gems/ruby-1.9.3-p327@first_gemset/gems/ffi-      1.2.0/lib/ffi/pointer.rb:42:in `get_string': invalid memory read at address=0x00000000000000 (FFI::NullPointerError)
from /Users/pierrebaille/.rvm/gems/ruby-1.9.3-p327@first_gemset/gems/ffi-1.2.0/lib/ffi/pointer.rb:42:in `read_string'
from /Users/pierrebaille/.rvm/gems/ruby-1.9.3-p327@first_gemset/gems/ffi-coremidi-0.1.8/lib/coremidi/device.rb:23:in `initialize'
from /Users/pierrebaille/.rvm/gems/ruby-1.9.3-p327@first_gemset/gems/ffi-coremidi-0.1.8/lib/coremidi/device.rb:41:in `new'
from /Users/pierrebaille/.rvm/gems/ruby-1.9.3-p327@first_gemset/gems/ffi-coremidi-0.1.8/lib/coremidi/device.rb:41:in `all'
from /Users/pierrebaille/.rvm/gems/ruby-1.9.3-p327@first_gemset/gems/ffi-coremidi-0.1.8/lib/coremidi/endpoint.rb:52:in `all_by_type'
from /Users/pierrebaille/.rvm/gems/ruby-1.9.3-p327@first_gemset/gems/unimidi-0.3.3/lib/unimidi/adapter/ffi-coremidi.rb:28:in `populate'
from /Users/pierrebaille/.rvm/gems/ruby-1.9.3-p327@first_gemset/gems/unimidi-0.3.3/lib/unimidi/congruous_api_adapter.rb:143:in `ensure_initialized'
from /Users/pierrebaille/.rvm/gems/ruby-1.9.3-p327@first_gemset/gems/unimidi-0.3.3/lib/unimidi/congruous_api_adapter.rb:110:in `all_by_type'
from /Users/pierrebaille/.rvm/gems/ruby-1.9.3-p327@first_gemset/gems/unimidi-0.3.3/lib/unimidi/congruous_api_adapter.rb:249:in `all'
from /Users/pierrebaille/.rvm/gems/ruby-1.9.3-p327@first_gemset/gems/unimidi-0.3.3/lib/unimidi/congruous_api_adapter.rb:55:in `list'
from /Users/pierrebaille/.rvm/gems/ruby-1.9.3-p327@first_gemset/gems/unimidi-0.3.3/lib/unimidi.rb:26:in `command'
from /Users/pierrebaille/.rvm/gems/ruby-1.9.3-p327@first_gemset/gems/unimidi-0.3.3/bin/unimidi:10:in `<top (required)>'
from /Users/pierrebaille/.rvm/gems/ruby-1.9.3-p327@first_gemset/bin/unimidi:19:in `load'
from /Users/pierrebaille/.rvm/gems/ruby-1.9.3-p327@first_gemset/bin/unimidi:19:in `<main>'
from /Users/pierrebaille/.rvm/gems/ruby-1.9.3-p327@first_gemset/bin/ruby_noexec_wrapper:14:in `eval'
from /Users/pierrebaille/.rvm/gems/ruby-1.9.3-p327@first_gemset/bin/ruby_noexec_wrapper:14:in `<main>' 
```

任何帮助都应该非常感激......

圣诞节快乐！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-26T02:39:49.800

我认为这是 ffi-coremidi 中的一个错误，它没有正确处理从 CFStringGetCStringPtr() 返回的 NULL（请参阅[https://stackoverflow.com/a/9166500/186057](https://stackoverflow.com/a/9166500/186057)）。

例如，它应该一直在做：

```
name_ptr = FFI::MemoryPointer.new(:pointer)
Map::MIDIObjectGetStringProperty(@resource, prop, name_ptr)
name = name_ptr.read_pointer
len = Map::CF.CFStringGetMaximumSizeForEncoding(Map::CF.CFStringGetLength(name), :kCFStringEncodingUTF8)
bytes = FFI::MemoryPointer.new(len + 1)
raise RuntimeError.new("CFStringGetCString") unless Map::CF.CFStringGetCString(name, bytes, len, :kCFStringEncodingUTF8)
@name = bytes.read_string 
```

如果您想自己应用修复程序，请应用[https://github.com/arirusso/ffi-coremidi/pull/2](https://github.com/arirusso/ffi-coremidi/pull/2)并重建 ffi-coremidi gem。

# php - php : 在电子邮件中获取资源 id #6

> ID：14030218
> 
> 赞同：0
> 
> 时间：2012-12-25T11:29:06.337
> 
> 标签：php, email

我已经测试了此代码以使用本地服务器工具发送电子邮件，它工作正常，但在“发件人”部分我没有收到发件人电子邮件，因为它应该在那里打印到 $email ，而不是我得到这个输出“来自：资源 id #6”，究竟是什么问题，因为查询看起来很好并且工作？

这部分代码

```
$Load=$_SESSION['login_user'];
$smail= "Select email from teacher where TID = $Load ";

$errors = '';
  $email= mysql_query($smail);  
if( 
   empty($_POST['email']) || 
   empty($_POST['message']))
{
    $errors .= "\n Error: all fields are required";
}

$email_address = $_POST['email']; 
$message = $_POST['message']; 

if (!preg_match("/^[_a-z0-9-]+(\.[_a-z0-9-]+)*@[a-z0-9-]+(\.[a-z0-9-]+)*(\.[a-z]{2,3})$/i", $email_address))
{
    $errors .= "\n Error: Invalid email address";
}

if( empty($errors))
{
    $to = $email_address; 
    $email_subject = "New mail from admin";
    $email_body = "You have received a new message. ".
    " Here are the details:\n From: $email \n Message \n $message"; 

    $headers = "From: $email\n"; 
    $headers .= "Reply-To: $email_address";

    $sent = mail($to,$email_subject,$email_body,$headers);      
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-25T11:32:06.387

执行查询后您没有获取记录，试试这个

```
$result = mysql_fetch_assoc(mysql_query($smail));  
$email = $result['email'] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-25T11:35:25.637

使用 mysql_fetch_assoc

```
 $result = mysql_fetch_assoc(mysql_query($email));  
 $email = $result['email'] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-25T11:32:53.967

您必须先获取结果。

```
$result= mysql_query($email);  
$row=mysql_fetch_object($result);
$email=$row->email; 
```

# excel - 在 VBScript 代码中反复出现“类型不匹配”错误

> ID：14030221
> 
> 赞同：0
> 
> 时间：2012-12-25T11:29:19.383
> 
> 标签：excel, vbscript, vba

你能告诉我下面的代码有什么问题吗？反复收到错误，如`Type Mismatch`下面的代码：

```
 TotalRows=objExcel1.Application.WorksheetFunction.CountA(ob4.Columns(1))
'MsgBox(TotalRows)
ReDim ArrParent(TotalRows - 2)
ArrParent=ob4.Range("A2:" & "A" & TotalRows).Value 'here i am getting an error as said above
'Call to the subroutine
ParentPIDNumber ArrParent,ob3,ob2,ob4 
```

**代码**

```
 Sub FileredOpenProcessToDel(ob3,ob2,ob4)

        Dim ColumnToFilter,TotalRows
        Dim rngFilter,cel,str,rangesToRemove,x 
        Dim strToRemove : strToRemove = ""
        Dim ArrParent

        objExcel1.ScreenUpdating = False
        objExcel1.Calculation = -4135  'xlCalculationManual
        ColumnToFilter=objExcel1.Application.WorksheetFunction.CountA(ob4.Rows(1)) - 1
        ob4.Range(ob4.Cells(1,ColumnToFilter),ob4.Cells(1,ColumnToFilter)).AutoFilter ColumnToFilter, "Open",,,True 

        'Dim rngFilter as Range
        Set rngFilter = objExcel1.Application.Intersect(ob4.UsedRange,ob4.UsedRange.Offset(1),ob4.Columns(1)).SpecialCells(12)'xlCellTypeVisible
           'MsgBox(rngFilter.Rows.Count)
           REM Do While 1=1
            REM 'Msgbox
           REM Loop
        'msgbox "Filtered range has " & rngFilter.Rows.Count & " rows."
            str=""
            For each cel in rngFilter

              str = str & (cel.row) & ":" & (cel.row) & "," 

            Next

                    rangesToRemove = Split(str,",")

                    For x = UBOUND(rangesToRemove)-1 To LBOUND(rangesToRemove) Step -1

                         strToRemove = strToRemove & rangesToRemove(x)

                            If Len(strToRemove) > 200 then

                                ob4.Range(strToRemove).delete'str & rangesToRemove(x) & ":" & rangesToRemove(x) & ","
                                strToRemove = ""

                            Else

                                strToRemove = strToRemove & ","

                            End If

                    Next
                    If len(strToRemove) > 0 then

                        strToRemove = Mid(strToRemove, 1, Len(strToRemove) - 1)
                        'strToRemove = Left(strToRemove, Len(strToRemove) -1)
                        ob4.Range(strToRemove).delete

                    End If

        ob4.AutoFilterMode = False
        objExcel1.ScreenUpdating = True
        objExcel1.Calculation = -4105   'xlCalculationAutomatic

        TotalRows=objExcel1.Application.WorksheetFunction.CountA(ob4.Columns(1))
        MsgBox(TotalRows)
        'ReDim ArrParent(TotalRows - 2)
        ArrParent=ob4.Range("A2:A" & TotalRows).value2
        'MsgBox(ArrParent(1,0))
        'Call to the subroutine
        ParentPIDNumber ArrParent,ob3,ob2,ob4

    End Sub 
```

![屏幕](../Images/bf9ff0094f88cf526bc0595f787900ff.png)

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-25T17:20:31.027

尝试使用 Application.Transpose 将值存储到一维数组 ||

```
ArrParent=Application.Transpose(ob4.Range("A2:A" & TotalRows).value) 
```

***编辑***

我相信范围数组始终是二维数组。转置用于将数据转换为一维数组。

您最初将 ArrParent 分配给 array(0, 968) 而不是您想要的 array(968)。

我认为我的解释是正确的。如果我不是，请有人纠正我。

# java - 获取设备使用 USB 大容量存储或 USB 媒体设备连接到台式机时出现的文件夹名称

> ID：14030223
> 
> 赞同：1
> 
> 时间：2012-12-25T11:29:26.150
> 
> 标签：java, android, kotlin

当设备连接到计算机时，名称显示为设备文件夹（例如 SAMSUNG_Android） 我怎样才能获得该名称？

**编辑：** 我想我们不能得到这个名字。对于某些设备，它会显示，例如三星 Galaxy S3，但对于其他设备则不会。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-25T11:31:20.993

以下方法将帮助您：

```
public String getDeviceName() {
  String manufacturer = Build.MANUFACTURER;
  String model = Build.MODEL;
  if (model.startsWith(manufacturer)) {
    return model;
  } else {
    return manufacturer + " " + model;
  }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-09T04:26:44.123

IIRC 将 Android 作为磁盘连接时出现的名称是 SD 卡卷标，至少在具有真实（非模拟）SD 卡的设备上。连接到 Linux 时可以通过 dosfslabel 更改它。没有可靠的方法来阅读它。我认为最好的办法是默认使用 Build.MODEL 并允许用户在您的应用程序中手动更改它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-25T11:36:47.417

我认为您指的是如何获取设备的构建属性

[http://developer.android.com/reference/android/os/Build.html](http://developer.android.com/reference/android/os/Build.html)

`Build.PRODUCT`可能是您正在寻找的。通常，当您连接计算机时，它会显示在计算机上。

它给出了完整的产品名称

# php - 如何转储 SoapClient 请求以进行调试？

> ID：14030228
> 
> 赞同：60
> 
> 时间：2012-12-25T11:30:49.893
> 
> 标签：php, soap

我需要调试一些使用肥皂客户端的代码。我在 php.net 中找到了 getLast* 方法，但是当我尝试获取最后一个调试请求时，它返回 NULL

```
<?php

    $client = new SoapClient("http://www.webservicex.net/ConverPower.asmx?WSDL");

    $response = $client->ChangePowerUnit(array(
        "PowerValue" => 100,
        "fromPowerUnit" => "horsepower",
        "toPowerUnit" => "megawatts"
    ));

    echo "====== REQUEST HEADERS =====" . PHP_EOL;
    var_dump($client->__getLastRequestHeaders());
    echo "========= REQUEST ==========" . PHP_EOL;
    var_dump($client->__getLastRequest());
    echo "========= RESPONSE =========" . PHP_EOL;
    var_dump($response);

?> 
```

代码执行结果：

```
$php soap_test.php 

====== REQUEST HEADERS =====
NULL
========= REQUEST ==========
NULL
========= RESPONSE =========
object(stdClass)#2 (1) {
  ["ChangePowerUnitResult"]=>
  float(0.0746)
} 
```

如何获取最后一个 SoapClient 请求的正文和标头的内容？

* * *

## 回答 #1

> 赞同：58
> 
> 时间：2012-12-25T11:33:41.630

**[这些函数](http://php.net/manual/en/soapclient.getlastrequestheaders.php)**仅在创建 SoapClient 对象**且跟踪选项设置为 TRUE**时才有效。

尝试：

```
$client = new SoapClient("http://www.webservicex.net/ConverPower.asmx?WSDL", array('trace' => 1)); 
```

* * *

## 回答 #2

> 赞同：34
> 
> 时间：2018-06-14T00:11:30.583

### 调试 SOAP 请求

1.  **使用 SOAP 扩展**

调试 SOAP 请求的最简单和最好的^*方法确实是创建一个[SOAP 扩展，使用](http://us3.php.net/manual/en/soapclient.dorequest.php)[SoapClient](http://php.net/manual/en/soapclient.soapclient.php)类的以下函数记录来自 Web 服务或 Web 服务客户端的原始 SOAP 请求和原始 SOAP 响应：

*   [SoapClient::__getLastRequestHeaders](http://www.php.net/manual/en/soapclient.getlastrequestheaders.php)
*   [SoapClient::__getLastRequest](http://www.php.net/manual/en/soapclient.getlastrequest.php)
*   [SoapClient::__getLastResponseHeaders](http://www.php.net/manual/en/soapclient.getlastresponseheaders.php)
*   [SoapClient::__getLastResponse](http://www.php.net/manual/en/soapclient.getlastresponse.php)

要使其工作，您必须在打开跟踪选项的情况下创建 SoapClient 对象，如 xdazz 所述：

```
$client = new MySoapClient($wsdlUrl, array('trace' => 1)); 
```

然后运行包装在 try-catch 块中的 SOAP 调用：

```
try{
   $result = $client->__SoapCall('routeCase', $params);
}catch (\Exception $e){
   throw new \Exception("Soup request failed! Response: ".$client->__getLastResponse());
} 
```

在 PHP 中开发 SOAP 解决方案时，最好在 WSDL 合同更改时清理 PHP tmp 文件夹（请参阅中的`tmp`文件夹路径`phpinfo()`）以强制 PHP SoapClient 再次下载 WSDL 和 XSD 文件而不是使用缓存文件（直到它们过期）。

`exceptions`此外，在开发过程中设置和`cache_wsdl`和`soap_version`版本等选项很有用：

```
$options = array( 
    'soap_version'=>SOAP_1_2, 
    'exceptions'=>false, 
    'trace'=>1, 
    'cache_wsdl'=>WSDL_CACHE_NONE 
); 
```

^*[使用 SOAP 扩展进行调试的缺点是证书错误发生在实际请求或其他内容之前。因此，当出现某种连接失败时，无法使用 getLastRequest() 或 getLastResponse()。]

2.  **使用 Xdebug**

调试 SoapClient 的另一个有趣选项是为 Xdebug 和您最喜欢的 IDE 设置调试会话 cookie

```
$client = new SoapClient(
    'http://example.loc/index.php/api/v2_soap/?wsdl'
);
$client->__setCookie('XDEBUG_SESSION', 'NETBEANS'); 
```

3.  **使用专门的 SOAP Tracer & Debugger**

专门的 SOAP Trace & Debug 应用程序也非常有用：除了像[SoapUI](https://www.soapui.org/)这样的常见嫌疑人之外，还有像 Charles 这样的中间跟踪代理，如此[处](http://artur.ejsmont.org/blog/content/more-efficient-ways-of-debugging-soap-based-web-services-from-php)所述。这种方法的缺点是添加了更多的层，因此可能会引入新的问题，例如握手问题。

还有一些物有所值的商业 SOAP 调试器，例如[XML Spy SOAP Debugger](https://www.altova.com/xmlspy/soap-debugger.html)或[SOAPSonar](http://www.crosschecknet.com/) ，它们可以进行验证和调用。无论如何，SoapUI 总是一个很好的伴侣。

如果您怀疑网络协议级别存在问题，请尝试[Wireshark](http://www.wireshark.org/)，这是一个适用于 Unix 和 Windows 的网络协议分析器。

### 日志，日志，日志

基本错误信息也可以在 PHP 日志和 Web 服务器日志中找到。确保您已打开完整的错误日志记录。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-07-02T06:58:04.027

我只是把它包装起来采取行动：

```
$client = new \SoapClient("http://127.0.0.1/services/wsdl2",array('trace' => 1,));
try{
   $result = $client->__SoapCall('routeCase', $params);
}catch (\Exception $e){
   throw new \Exception("Soup Request Failed! Response:\n".$client->__getLastResponse());
} 
```

# php - 如何从 PHP 以 root 权限运行 shell 脚本？

> ID：14030230
> 
> 赞同：2
> 
> 时间：2012-12-25T11:31:06.200
> 
> 标签：php, shell, centos, exec, sudo

我正在尝试使用 vpopmail`vadddomain`添加新的虚拟域。由于`apache`用户无法访问 vpopmail 的二进制文件，我不能`exec('../bin/vadddomain...')`直接从 PHP 访问。

我做了一个shell脚本（`adddomain.sh`）如下：

```
#!/bin/bash
 cd /home/lxadmin/mail/bin
 ./vadddomain $1 postmaster_password 
```

并将这一行附加到`/etc/sudoers`使用`visudo`（暂时忘记安全性）：

```
ALL ALL=NOPASSWD: /home/lxadmin/mail/bin/adddomain.sh 
```

我的 PHP 脚本中有这样的内容：

```
exec('sudo /home/lxadmin/mail/bin/adddomain.sh example.com', $output); 
```

但这根本不起作用（域`example.com`不会添加到 vpopmail）。但是当我通过 SSH 和 root 用户运行这个命令时，它可以工作。

谁能告诉我这里有什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-25T11:49:52.500

这应该可以通过将`webmaster`-user 添加到`/etc/sudoers`文件中并简单地接受该用户使用您愿意使用的命令来实现。我不建议直接在您的 php 中使用 sudo 命令，因为您可能必须将密码存储在某个地方，这当然是您不想要的！您不想在某个地方或其他您不想对您的代码拥有 root 权限的开发人员意外地发布您的密码。

简单地使用 root 命令的另一个大缺点是，当您的代码中存在安全漏洞时，我可以通过例如表单运行 sudo 命令。对特权要非常小心。

*   赋予普通用户root权限： http: [//www.debian-administration.org/articles/33](http://www.debian-administration.org/articles/33)

附言。我是 SSH 新手，并且还设置了用户权限，所以如果我错了，请纠正我。但这就是我所知道的。

# javascript - 如何在网页上显示浏览器已经下载了多少千字节以显示此页面？

> ID：14030233
> 
> 赞同：0
> 
> 时间：2012-12-25T11:31:26.850
> 
> 标签：javascript

如何在网页上显示浏览器已经下载了多少千字节，以便使用例如带有运行数字的 javascript 循环进度条来显示该页面？例如，我有一个包含大型 Silverlight 应用程序的页面。Silverlight 默认初始屏幕进度条以某种方式持续显示 0%，但之后应用程序正常工作。但是，我事先知道，我的网站是 5MB，包括 Silverlight 应用程序，我想以“从 5MB 加载 2.7MB”的形式向用户显示进度。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-25T11:32:58.793

这是无法做到的：您无权访问页面加载信息。

# youtube-api - 在网站上嵌入 YouTube 的“喜欢”按钮

> ID：14030242
> 
> 赞同：2
> 
> 时间：2012-12-25T11:32:42.673
> 
> 标签：youtube-api

即使用户未登录，是否可以在我的网站上显示 YouTube 的喜欢/不喜欢按钮和订阅频道功能？我发现我可以使用 iframe 和 css 从 YouTube 上的视频页面中裁剪出点赞按钮，并将其显示在我网页上的无边框 iframe 中，但我不需要这种方式。我也检查了这个播放器演示[https://developers.google.com/youtube/youtube_player_demo](https://developers.google.com/youtube/youtube_player_demo) 但控件需要登录才能出现。我正在使用这个库[https://developers.google.com/youtube/articles/codeigniter_library](https://developers.google.com/youtube/articles/codeigniter_library)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2020-07-31T07:47:35.733

对于喜欢/不喜欢按钮，请参阅 YouTube 视频`rate`API：[https ://developers.google.com/youtube/v3/docs/videos/rate](https://developers.google.com/youtube/v3/docs/videos/rate)

获取[https://www.googleapis.com/youtube/v3/videos/getRating](https://www.googleapis.com/youtube/v3/videos/getRating)

您的访问者不需要“登录”，但您的应用程序必须。截至 2020 年 7 月，该调用的配额影响为 1。

# c# - C#获取响应的内容类型而不加载整个内容

> ID：14030245
> 
> 赞同：3
> 
> 时间：2012-12-25T11:33:15.997
> 
> 标签：c#, types, request, response

我想确保那些知道以下代码行是否只会获取请求的响应类型而不加载完整内容的人，因为我必须在我的应用程序中对响应类型有一些条件，我不想浪费时间对于那些应该被忽略的资源。

```
request = (HttpWebRequest)System.Net.HttpWebRequest.Create(url);
response = (HttpWebResponse)request.GetResponse();
var responseType = response.ContentType; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-25T11:36:14.580

[`Method`将属性](http://msdn.microsoft.com/en-us/library/system.net.httpwebrequest.method.aspx)设置为可能是最简单的`"HEAD"`- 这样您就不会获得实际内容，而只会获得标题。

另一方面，这确实意味着当您*确实*想要内容时需要提出两个请求......

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-25T12:11:25.090

```
Please use below code to get the data in response string
HttpWebRequest request = (HttpWebRequest)WebRequest.Create(URL);
    request.Method = "GET";
    request.ContentType = "application/json";
    try
    {
        WebResponse webResponse = request.GetResponse();
        using (Stream webStream = webResponse.GetResponseStream())
        {
            if (webStream != null)
            {
                using (StreamReader responseReader = new StreamReader(webStream))
                {
                    string response = responseReader.ReadToEnd();
                    JObject objjson = JObject.Parse(response);

                    var obj= (from p in objjson["YourobjectList"].Children()
                                      select p).ToList();

                }
            }
        }
    }
    catch (Exception ex)
    {
    } 
```

# objective-c - 以这种方式对 NSMutableArray 进行排序

> ID：14030251
> 
> 赞同：0
> 
> 时间：2012-12-25T11:34:14.313
> 
> 标签：objective-c, nsmutablearray

> **可能重复：**
> [如何对 NSArray 进行自然排序？](https://stackoverflow.com/questions/2846301/how-to-do-a-natural-sort-on-an-nsarray)

我有一个看起来像这样的数组：4.value、8.value、1.value、3.value、5.value 等，有无限的对象。

有没有办法将此数组从 1 排序到最后一个数字？所以：

1.价值，2.价值，3.价值......

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-25T13:15:57.127

我不清楚数组中对象的类型是什么，因此您需要更改以下代码以适合您的类型，但这通常是您对数组进行排序的方式：

```
 NSMutableArray* array = [[NSMutableArray alloc] init];
    [array addObject:@"3.value"];
    [array addObject:@"1.value"];       
    [array addObject:@"4.value"];
    [array addObject:@"2.value"];               
    NSArray* sortedArray = [array sortedArrayUsingComparator: ^(id obj1, id obj2) {
        // Write whatever comparison code is appropriate for your objects here
        // The following will only work for simple strings
        return [obj1 caseInsensitiveCompare:obj2];
    }];     
    NSLog(@"%@", sortedArray); 
```

**编辑：** 如果您使用字符串并且字符串总是被格式化，以便它们采用以下形式：“Integer.String”，您应该使用以下代码对数组进行排序：

```
 NSArray* sortedArray = [array sortedArrayUsingComparator: ^(id obj1, id obj2) {
        NSInteger left = [obj1 integerValue];
        NSInteger right = [obj2 integerValue];

        if (left > right) {
            return NSOrderedDescending;
        }   

        if (left < right) {
           return NSOrderedAscending;
        }

        return NSOrderedSame;
    }]; 
```

如果您只是比较字符串，它们将按第一个字符排序，因此 @"123.value" 将排在 "9.value" 之前

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-25T13:52:22.670

```
NSArray *sortedarray = [[YourArray allObjects]
sortedArrayUsingSelector:@selector(localizedCaseInsensitiveCompare:)];
NSLog(@"%@",sortedarray); 
```

# sql - 影响“标签”在 ruby on rails 中组合框的选定项的值

> ID：14030252
> 
> 赞同：-1
> 
> 时间：2012-12-25T11:34:24.953
> 
> 标签：sql, ruby-on-rails

如何让标签接收到选中项的值`select`

我的组合框：

```
<%= select("Cities", "destination", @city.map {|u| [u.name, u.code]}) %> 
```

该`@city`变量具有 SQL 查询的结果，在该查询中我得到了所有我`cities[]` 想要将所选项目的值写入`"label" (<%= label("Cities", "name" %>`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-25T11:59:43.343

根据我对更改或选择的理解，您必须在 UI 上设置标签。要实现这一点，您必须使用 javascript，

设置标签假设 id 是`id`并设置一些标签 id 假设 'country_label'`select``country`

```
$("#country").change(function(){   

 var optionText = $("#country option:selected").text();  
 $("#country_label").text(optionText) // or val(optionText) check what is appropriate 

}); 
```

或者您之前已经选择了组合框，那么您已经知道可以直接添加到的城市名称的值是什么`<%=f.label :city,elected city name %>`

# matlab - 将元素分配到矩阵的下三角形部分

> ID：14030254
> 
> 赞同：4
> 
> 时间：2012-12-25T11:34:28.323
> 
> 标签：matlab, matrix, assign, diagonal

我正在使用 MATLAB 在 MATLAB 中创建一个对角矩阵`eye(3)`。如何仅将数字“2”分配给主对角线下的元素？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-25T11:39:52.230

该命令`tril`有一个额外的参数，用于控制准确使用哪个下三角。

```
A = eye(3) + 2*tril(ones(3), -1); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-25T11:37:11.913

如果您有兴趣*将*元素分配到已经存在的矩阵中，您可以使用[`tril`](http://www.mathworks.com/help/matlab/ref/tril.html)与 Shai 的答案类似的方式，并将其与逻辑索引相结合。例如：

```
A = eye(3);
idx = tril(true(size(A)), -1); % # Lower triangular half
A(idx) = 2 
```

这应该会产生预期的结果：

```
A =

     1     0     0
     2     1     0
     2     2     1 
```

如果您正处于创建这样一个矩阵的阶段，那么您应该像 Shai 建议的那样生成它。

# xml - XQuery - 分组和计数

> ID：14030255
> 
> 赞同：8
> 
> 时间：2012-12-25T11:34:37.373
> 
> 标签：xml, xquery

这是我的 XML 文件的结构 -

```
<A>
  <Name t="Mr.">James Bond</Name>
  <Name t="Mr.">Allen Bond</Name>
  <Name t="Mr." p="X">James Bond</Name>
  <Name t="Mr." p="X">James Bond</Name>
  <Name t="Mr.">James Bond</Name>
  <Name t="Mrs.">James Bond</Name>
  <Name t="Mrs.">James Bond</Name>
  <Name t="Mr.">James Bond</Name>
  <Name t="Mrs." p="Y">James Bond</Name>
  <Name t="Mrs." p="Y">James Bond</Name>
</A> 
```

我期待的输出是 -

```
<A>
  <N>Allen Bond Mr - 1</N>
  <N>James Bond Mr - 3</N>
  <N>James Bond Mr, X - 2</N>
  <N>James Bond Mrs - 2</N>  
  <N>James Bond Mrs, Y - 2</N>
</A> 
```

我能够获得不同的名称，但无法添加计数...

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-25T12:02:16.947

XQuery 3.0 解决方案[`group by`](http://www.w3.org/TR/xquery-30/#id-group-by)：

```
<A>{
  for $name in //Name
  let $full :=
    if(not($name/@p)) then concat($name, ' ', $name/@t)
    else concat($name, ' ', $name/@t, ', ', $name/@p)
  group by $full
  return <N>{$full, '-', count($name)}</N>
}</A> 
```

XQuery 1.0 解决方案[`distinct-values($arg)`](http://www.w3.org/TR/xpath-functions/#func-distinct-values)：

```
<A>{
  let $names :=
    for $name in //Name
    return if(not($name/@p)) then concat($name, ' ', $name/@t)
    else concat($name, ' ', $name/@t, ', ', $name/@p)
  for $name in distinct-values($names)
  return <N>{$name, '-', count($names[. eq $name])}</N>
}</A> 
```

# jquery - jQuery 数据和对象

> ID：14030272
> 
> 赞同：1
> 
> 时间：2012-12-25T11:36:25.453
> 
> 标签：jquery, jquery-data

我正在尝试编写类似这样的代码：

```
$('[id^=myitem_]').data(
    'powq',
     $([
         '<p><b>Description:</b></br>'+$(this).find("input[name=description]").val()+'</p>',
         '<p>Some other data:</p>'
     ].join(''))
); 
```

正如您在“价值”内部看到的那样，我想在里面捕捉对象`[id^=myitem_]`，但我不能。在这种情况下，每次我得到整个文档中的第一个对象。我认为在这里，在“价值”内部，`$(this)`是指窗口或整个文档。

任何的想法..？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-25T11:41:41.043

`this`所指的内容取决于您执行该代码的上下文。很可能它指的是`window`虽然。

如果您希望它引用每个`[id^=myitem_]`元素，那么您必须使用[`.each` *^([docs])*](http://api.jquery.com/each/)来遍历所有选定的元素：

```
$('[id^=myitem_]').each(function() {

    $(this).data(
        'powq',
         $([
             '<p><b>Description:</b></br>'+$(this).find("input[name=description]").val()+'</p>',
             '<p>Some other data:</p>'
         ].join(''))
    );
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-25T11:39:50.677

使用 ID 访问 div 元素`myitem`：

```
$("#myitem") 
```

不过，我可能完全误解了你的问题。

# c++ - atexit() 函数仿生与 glibc

> ID：14030273
> 
> 赞同：4
> 
> 时间：2012-12-25T11:36:26.313
> 
> 标签：c++, g++, glibc, bionic

我发现了一个有趣的时刻：`atexit()`函数对`bionic`和的工作方式不同`glibc`。这是一个例子：

```
#include <cstdlib>
#include <cstdio>
extern "C" {
    void one(){
    printf("one\n");
    }
    void two() {
    printf("two\n");
    atexit(one);
    }
}
int main() {
    atexit(two);
} 
```

**结果`bionic`：**

```
two 
```

**结果`glibc`：**

```
two
one 
```

为什么结果不同？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-25T11:40:25.373

> 未指定在调用`atexit`函数之前未发生的`exit`函数调用是否会成功。

ISO C 标准，§7.22.4.2。所以这两种行为都是合规的；您无法使用`atexit`while`exit`已在运行其`atexit`处理程序来可靠地注册函数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-25T11:40:17.900

此行为未指定。您可以定义要多次调用的多个函数`atexit()`，但是一旦您已经退出程序（即，一旦您离开`main()`）就不能使用它。

# spring - 通过 Spring Auditing 获取更改的字段

> ID：14030274
> 
> 赞同：3
> 
> 时间：2012-12-25T11:36:43.687
> 
> 标签：spring, spring-orm

我可以以某种方式使用spring Auditing来获取实体的列表更改字段及其旧值，新值吗？

我试图获取实体的更新字段列表及其日志的旧值和新值。我在更新之前使用 getDeclaredFields 比较旧实体和新实体，它可以工作。但仍然想知道是否有一些标准和更简单的解决方案。我正在使用 spring 和 hibernate 来管理我的实体。经过研究，我发现可以通过在更新事件上添加侦听器并使用事件中的 getDirtyProperties 来为我的目的使用休眠会话。但据我了解，它需要休眠事务管理器，我已经在使用 JpaTransactionManager 并且无法更改它。

然后我被告知这个春季审计功能 [http://static.springsource.org/spring-data/data-jpa/docs/current/reference/html/#jpa.auditing](http://static.springsource.org/spring-data/data-jpa/docs/current/reference/html/#jpa.auditing) 问题是它是否可以提供类似 getDirtyProperties 的东西? 或者也许还有其他解决方法？因为不需要创建新表，如果我做对了，spring 审计需要在数据库中存储审计数据。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-28T02:38:10.723

Spring 的[Auditable](http://static.springsource.org/spring-data/data-commons/docs/1.1.0.RELEASE/api/org/springframework/data/domain/Auditable.html)中实际上没有任何内容需要将其存储在数据库中，但它也不包括您正在寻找的详细信息级别，即哪些字段已更改。[Hibernate Envers](http://docs.jboss.org/hibernate/envers/3.6/reference/en-US/html/)可以做到这一点，但我相信它只能将审计记录存储在数据库中。不过，您也许可以将其用作起点。

# jquery - 如何使用滚动鼠标通过一个动作制作滚动视差

> ID：14030280
> 
> 赞同：0
> 
> 时间：2012-12-25T11:37:10.413
> 
> 标签：jquery, scroll, mouse, parallax

我有个问题。我需要像这样[http://community.saucony.com/kinvara3/](http://community.saucony.com/kinvara3/)制作视差。我知道如何制作视差，但不是只用鼠标滚动一次。

卷轴的一个动作，卷轴直线运行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-25T11:52:31.627

触发滚动时，您应该临时禁用滚动。

```
function disable_scroll() {
  if (window.addEventListener) {
      window.addEventListener('DOMMouseScroll', wheel, false);
  }
  window.onmousewheel = document.onmousewheel = wheel;
  document.onkeydown = keydown;
}

function enable_scroll() {
    if (window.removeEventListener) {
        window.removeEventListener('DOMMouseScroll', wheel, false);
    }
    window.onmousewheel = document.onmousewheel = document.onkeydown = null;  
} 
```

# r - 使用 R 将数据框中的一列重塑为多列

> ID：14030283
> 
> 赞同：0
> 
> 时间：2012-12-25T11:37:22.863
> 
> 标签：r, datetime, reshape

我有一个看起来像这样的数据库：

> ```
> start<-as.POSIXct("2012-01-15")
> interval<-60
> end<-start+as.difftime(31,units="days")
> date<-seq(from=start,by=interval*60, to=end) # date/time information
> l<-length(date)
> 
> stations<-as.factor(rep(1:3,len=l)) # stations
> df<-data.frame(date,stations) # data frame 
> ```

我想要的是将此数据帧中的站列重塑为几列（在本例中为 3 列），并计算每个站在每个日期/时间行中记录的时间数。但是，我想保留数据库中的原始日期/时间列。如果一个电台没有记录在一个特定的日期/时间，那么我想分配一个零值。

理想情况下，我想要这样的输出：

> ```
> date              1   2   3
> 2012-01-15 0:00   1   0   0
> 2012-01-15 1:00   0   1   0
> 2012-01-15 2:00   0   0   1
> 2012-01-15 3:00   1   0   0
> 2012-01-15 4:00   0   1   0
> 2012-01-15 5:00   0   0   1
> 2012-01-15 6:00   1   0   0
> 2012-01-15 7:00   0   1   0
> 2012-01-15 8:00   0   0   1
> 2012-01-15 9:00   1   0   0
> 2012-01-15 10:00  0   1   0 
> ```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-25T11:44:00.620

您可以尝试使用`dcast()`库中的函数`reshape2`。

```
library(reshape2)
dcast(df,date~stations,length)
                   date 1 2 3
1   2012-01-15 00:00:00 1 0 0
2   2012-01-15 01:00:00 0 1 0
3   2012-01-15 02:00:00 0 0 1
4   2012-01-15 03:00:00 1 0 0 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-25T12:09:11.893

您可以使用该功能`xtabs`：

```
xtabs( ~ date + stations, df) 
```

# c# - 使用将文件添加到我的 ListView

> ID：14030284
> 
> 赞同：0
> 
> 时间：2012-12-25T11:37:23.903
> 
> 标签：c#, winforms

我想将选项添加到我的应用程序中，以将包含目录中所有文件的目录添加到我的目录中`ListView`，因为我在添加到我之前检查每个文件`ListView`（我的文件是 Wiresahrk 文件，所以我正在检查文件扩展名，如果不是 pcap 格式，我转换文件然后添加），我想用单独的线程来做，所以我正在使用`BackgroundWorker`，我需要一些关于如何做的帮助：

```
private void btnAddDir_Click(object sender, EventArgs e)
{
    ListViewItem lv = new ListViewItem();
    string fileToAdd = string.Empty;
    List<string> filesList = new List<string>();
    BackgroundWorker backgroundWorker = null;
    DialogResult dialog = folderBrowserDialog1.ShowDialog();
    if (dialog == DialogResult.OK)
    {
        Editcap editcap = new Editcap();

        foreach (string file in SafeFileEnumerator.EnumerateFiles(folderBrowserDialog1.SelectedPath, "*.*", SearchOption.AllDirectories))
        {
            if (editcap.isWiresharkFormat(file))
            {
                filesList.Add(file);
            }
        }

        backgroundWorker = new BackgroundWorker();
        backgroundWorker.WorkerReportsProgress = true;
        backgroundWorker.DoWork +=
            (s1, e1) =>
            {
                foreach (string fileName in filesList)
                {
                    if (editcap.isWiresharkFormat(fileName))
                    {
                        if (editcap.isLibpcapFormat(fileName))
                        {
                            lv.Text = fileName;
                            lv.SubItems.Add(fileName);
                            lv.SubItems.Add("Waiting");

                            this.Invoke((MethodInvoker)delegate
                            {
                                lvFiles.Items.Add(lv);
                            });

                            lvFiles.Refresh();
                        }
                    }
                }
            };

        backgroundWorker.RunWorkerCompleted += new RunWorkerCompletedEventHandler(
        (s1, e1) =>
        {

        });

        backgroundWorker.RunWorkerAsync();
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-25T11:45:51.260

`backgroundWorker.ProgressChanged`不要在事件中添加项目，而是在`DoWork`.

否则会报错`Cross-thread operation not valid: Control ___ accessed from a thread other than the thread it was created on.`

改变

```
backgroundWorker.ReportProgress(0, fileToAdd); 
```

至

```
lv.SubItems.Add(fileToAdd); 
```

此外，您不需要处理`ProgressChanged`和`RunWorkerCompleted`事件。

# css - 使用 ASP MVC4、VS2012 和 Web Essentials 时，如何将 mixins.less 文件与我的其他 less 文件集成？

> ID：14030285
> 
> 赞同：2
> 
> 时间：2012-12-25T11:37:50.700
> 
> 标签：css, visual-studio, visual-studio-2012, less

到目前为止，我已经设置了多个 .less 文件，当我保存它们时，这些文件被编译为 .css 文件。当我发布时，所有的 css 都放在一个包中。

但现在我想开始使用 mixins 文件。如何集成它并使其可用于所有 .less 文件？这可能与 Web Essentials 和 ASP MVC4 吗？最重要的是，我想确保所有的捆绑和模仿仍然有效。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-04T10:45:24.443

将你的 mixins 放在一个单独的文件中并使用 @import 引用它

```
@import url('mixins.less'); 
```

# android - 从字节缓冲区到字符串时出现异常

> ID：14030289
> 
> 赞同：0
> 
> 时间：2012-12-25T11:38:31.830
> 
> 标签：android, string, debugging, exception

我有这个功能：

```
public static String read(Context context) {
    FileInputStream fis;
    try {
        fis = context.openFileInput(INFO_FILE_NAME);
        int bufferSize = 2 * 1024 * 1024; // 2 MiB
        byte[] buffer = new byte[bufferSize];
        fis.read(buffer);
        return new String(buffer);
    } catch (Exception e) {
        Log.d(TAG, 
                "Exception while reading General Information File:"
                + e.getMessage());
        return null;
    }
} 
```

该函数返回空值。这意味着有一个例外。但是，没有任何内容记录到 LogCat。

我试过用 Eclipse 调试它。一切正常，直到“return new String(buffer);” 线。当我尝试执行它时，调试器直接跳转到“return null;” 行，无需通过“Log.d”。另外，当我在“return null;”时 行，我在调试器中看不到变量“e”。这怎么可能发生？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T06:54:31.980

从字节转换为字符串时要考虑的要点是转换中使用的编码。

您已经正确编码了 ricintech 提到的一些有用的东西，但重点是遵循我们上面在评论中讨论的标准。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-25T11:43:53.177

用这个：

```
byte[] buffer = new byte[4096];
receivedData=new String(buffer); 
```

# ios - 生成 ipa 文件时出错 + IOS 应用程序开发

> ID：14030302
> 
> 赞同：0
> 
> 时间：2012-12-25T11:40:27.823
> 
> 标签：ios, xcode, ios5, ios6

> **可能重复：**
> [存档时“命令 /usr/sbin/chown 失败，退出代码为 1”](https://stackoverflow.com/questions/7018783/command-usr-sbin-chown-failed-with-exit-code-1-when-archiving)

我正在尝试使用具有 IOS 5.1 的设备在 xcode 4.5.2 中生成 ipa 文件（适用于 IOS 6 或更低版本）。当我做产品/存档时，我收到一个致命错误：

```
Command /usr/sbin/chown failed with exit code 1 
```

那么，我是否有必要将我的设备操作系统升级到 6.0 以生成适用于 IOS 6 或更低版本的 ipa 文件。任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-25T11:46:50.553

这很奇怪。您使用的是最新的 XCode 版本吗？

您可以尝试重新启动，给您的存档一个自定义存档名称，如果 Xcode 项目与您打开 Xcode 项目的用户匹配，请在终端中检查，在构建设置中检查安装所有者或尝试项目清理.. ..

# javascript - 如何从 Chrome Js 控制台递归更改 img src？

> ID：14030303
> 
> 赞同：-1
> 
> 时间：2012-12-25T11:40:28.133
> 
> 标签：javascript, google-chrome, google-chrome-devtools

在完全加载的页面上，我如何从 chrome js 控制台更改（递归）img src（甚至是基本文本）？我需要实时看到效果！所以肯定需要将给定的 srcA 更改为 srcB ：D

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-25T13:42:41.663

这有效（在SO上测试）：

```
var a = document.getElementsByTagName('img'); for(var i in a) if(a[i].src != undefined && a[i].src.indexOf("static") != -1) a[i].src="."; 
```

将点替换为所需的新 URL，“static”是旧 URL 片段的占位符。

# python - Django 模型：聚合过滤器

> ID：14030305
> 
> 赞同：0
> 
> 时间：2012-12-25T11:40:41.183
> 
> 标签：python, django, django-models

在我看来，我得到了 points_total，但是它返回的所有点与 points_list 不同，它由当前用户过滤。

**问题：**

1) 我如何像在“points_list”中一样按用户过滤“def points_total”

**模型.py**

```
class PointsManager(models.Manager):

    def points_list(self,thisUser):
        list = Points.objects.filter(user=thisUser)
        return list

    def points_total(self,thisUser):
        return Points.objects.aggregate(models.Sum('points'))

class Points (models.Model):

    statusOptions = (
        (0, 'Pending'),
        (1, 'Added'),
        (2, 'Deducted'),
        (3, 'Processing'),
        )

    user = models.ForeignKey(User)
    points = models.IntegerField(verbose_name=("Points"), default=0)
    created = models.DateTimeField(("Created at"), auto_now_add=True)
    updated = models.DateTimeField(verbose_name=("Updated at"), auto_now=True)
    status = models.IntegerField(default=0, choices=statusOptions)

    objects = PointsManager()

    class Meta:
      verbose_name = ('Point')
      verbose_name_plural = ('Points') 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-25T12:07:06.417

首先，我认为您的两个功能都不需要管理器，您可以通过查询自己的模型来直接实现。

`point_list`功能的替代品

```
points_list = Points.objects.filter(user=request.user) 
```

`points_total`功能的替代品

```
points = Points.objects.filter(user=request.user) \
                       .aggregate(total_points=models.Sum('points')) 
```

# glibc - /lib/ld-linux.so.2：错误的 ELF 解释器：没有这样的文件或目录

> ID：14030306
> 
> 赞同：48
> 
> 时间：2012-12-25T11:40:58.530
> 
> 标签：glibc, yum

当我执行命令安装应用程序时，出现以下错误：/lib/ld-linux.so.2: bad ELF interpreter: No such file or directory

我不知道如何解决这个问题，为了找出解决方案，我在网上搜索了解决方案并找到了以下解决方案：

```
yum install glibc.i686 or yum install glibc.i386 
```

但不幸的是，这根本没有奏效。它抛出以下错误：

```
Loaded plugins: fastestmirror, refresh-packagekit, security
Loading mirror speeds from cached hostfile
Setting up Install Process
No package glibc.i686 available.
Error: Nothing to do 
```

我再次尝试解决这个问题并从网上得到了一些解决方案；

```
Download glibc rpm packge for centos 6 and install them. 
```

我下载了以下包：

```
glibc-2.12-1.80.el6.i686.rpm
glibc-common-2.12-1.80.el6.i686.rpm
glibc-devel-2.12-1.80.el6.i686.rpm
glibc-headers-2.12-1.80.el6.i686.rpm
glibc-static-2.12-1.80.el6.i686.rpm
glibc-utils-2.12-1.80.el6.i686.rpm 
```

并尝试使用以下命令进行安装：

```
yum install glibc.i686
rpm -U glibc-2.12-1.80.el6.i686.rpm
rpm -ivh glibc-2.12-1.80.el6.i686.rpm 
```

他们都没有工作。收到以下消息：

```
[root@demo tmp_glibc]# rpm -ivh glibc-2.12-1.80.el6.i686.rpm
    error: Failed dependencies:
    glibc-common = 2.12-1.80.el6 is needed by glibc-2.12-1.80.el6.i686
    libfreebl3.so is needed by glibc-2.12-1.80.el6.i686
    libfreebl3.so(NSSRAWHASH_3.12.3) is needed by glibc-2.12-1.80.el6.i686 
```

为了解决依赖问题，尝试安装“glibc-common-2.12-1.80.el6.i686.rpm”，但运气不好再次运行并给出错误：

```
[root@demo tmp_glibc]# rpm -ivh glibc-common-2.12-1.80.el6.i686.rpm
error: Failed dependencies:
    glibc = 2.12-1.80.el6 is needed by glibc-common-2.12-1.80.el6.i686
    libc.so.6 is needed by glibc-common-2.12-1.80.el6.i686
    libc.so.6(GLIBC_2.0) is needed by glibc-common-2.12-1.80.el6.i686
    libc.so.6(GLIBC_2.1) is needed by glibc-common-2.12-1.80.el6.i686
    libc.so.6(GLIBC_2.1.1) is needed by glibc-common-2.12-1.80.el6.i686
    libc.so.6(GLIBC_2.1.3) is needed by glibc-common-2.12-1.80.el6.i686
    libc.so.6(GLIBC_2.10) is needed by glibc-common-2.12-1.80.el6.i686
    libc.so.6(GLIBC_2.2) is needed by glibc-common-2.12-1.80.el6.i686
    libc.so.6(GLIBC_2.3) is needed by glibc-common-2.12-1.80.el6.i686
    libcap.so.2 is needed by glibc-common-2.12-1.80.el6.i686
    libdl.so.2 is needed by glibc-common-2.12-1.80.el6.i686
    libdl.so.2(GLIBC_2.0) is needed by glibc-common-2.12-1.80.el6.i686
    libdl.so.2(GLIBC_2.1) is needed by glibc-common-2.12-1.80.el6.i686 
```

谁能帮我弄清楚如何解决这个问题？

更多详情： 操作系统：centos 6.3 Yum 安装包列表：

```
[root@demo tmp_glibc]# yum list installed glibc
Loaded plugins: fastestmirror, refresh-packagekit, security
Loading mirror speeds from cached hostfile
Installed Packages
glibc.x86_64 
```

* * *

## 回答 #1

> 赞同：69
> 
> 时间：2014-08-12T16:03:47.663

```
yum install glibc.i686 
```

安装这个。

* * *

## 回答 #2

> 赞同：28
> 
> 时间：2013-01-03T00:06:17.370

你没有提到你试图运行的命令是什么产生了错误消息。但是，底线问题是您试图在 64 位 (x86_64) 系统上运行和/或安装 32 位 (i686) 软件包，这不是一个好主意。例如，如果您尝试在 64 位系统上运行 32 位版本的 Perl，结果将类似于

> perl：/lib/ld-linux.so.2：错误的 ELF 解释器：没有这样的文件或目录

如果你仍然想使用 rpm 命令在你的系统上安装 32 位版本的 glibc 和 glibc-common，那么你需要知道你必须同时安装这两个包并且作为一个命令，因为它们是彼此的依赖。在您的情况下运行的命令是：

> rpm -Uvh glibc-2.12-1.80.el6.i686.rpm glibc-common-2.12-1.80.el6.i686.rpm

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2013-12-09T21:34:08.220

```
Missing prerequisites. IBM has the solution below:

yum install gtk2.i686
yum install libXtst.i686

If you received the the missing libstdc++ message above, 
install the libstdc++ library: 
yum install compat-libstdc++

https://www-304.ibm.com/support/docview.wss?uid=swg21459143 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2019-06-20T03:53:10.463

正如@borayeris 所说，

> 百胜安装 glibc.i686

但如果您找不到**glibc.i686**或**libstdc++**包，请尝试 -

> sudo yum 搜索 glibc
> sudo yum 搜索 libstd

接着，

> 须藤百胜安装{包}

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2015-06-03T19:05:13.237

在我看来 yum install glibc.i686 应该可以工作。除非彼得不是根。他安装了 64 位 glib，他正在安装一个 32 位软件包，该软件包需要 32 位 glib，即用于英特尔处理器的 glib.i686。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2015-05-04T02:04:14.387

我有同样的问题，以下命令可以解决：

```
sudo yum install  glibc-common glibc  (mutual dependency)
sudo yum install  glibc.i686  (the missing version) 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2015-09-24T06:49:37.453

这些是我必须运行才能使其在 Fedora 22 上运行的安装：-

> glibc-2.21-7.fc22.i686
> 
> alsa-lib-1.0.29-1.fc22.i686
> 
> qt3-3.3.8b-64.fc22.i686
> 
> libusb-1:0.1.5-5.fc22.i686

# html - HTML5 中的 h2-h6 标题有什么用途吗？

> ID：14030310
> 
> 赞同：3
> 
> 时间：2012-12-25T11:41:17.157
> 
> 标签：html, html-heading

我对使用`h1-h6`标题和`section`html5 感到困惑。这两个例子哪个是正确的？

```
<body>
  <article>
    <header>
      <h1>Article heading</h1>
      <p><time>0/0/00</time></p>
      <div id="article-tags"></div>
    </header>
    <section>
      <h2>Introduction</h2>
      <p> ... text ... </p>
    </section>
    <section>
      <h2>The problem itself</h2>
      <p> ... text ... </p>
    </section>
  </article>
</body> 
```

这对我来说似乎很自然，将文章分成几个部分并根据整篇文章的标题层次给它们标题，但是

```
<body>
  <article>
    <header>
      <h1>Article heading</h1>
      <p><time>0/0/00</time></p>
      <div id="article-tags"></div>
    </header>
    <section>
      <h1>Introduction</h1>
      <p> ... text ... </p>
    </section>
    <section>
      <h1>The problem itself</h1>
      <p> ... text ... </p>
    </section>
  </article>
</body> 
```

我已经看到这使用了很多时间，并且读到每个部分都应该有自己的标题层次结构。

如果第二个例子是正确的，那么标题 from `h2`to的目的是什么`h6`？如果每个`h2`都可以在 new 中分开，`section`并且应该有自己的标题层次结构`h1`，那么是否应该使用低于以下的标题`h1`（因为它们都可以有自己的标题部分）？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-25T12:05:03.567

HTML 5 规范说：

> 节可以包含任何级别的标题，但强烈建议作者要么仅使用 h1 元素，要么使用适当级别的元素作为节的嵌套级别。
> 
> 还鼓励作者在分节内容的元素中显式包装节，而不是依赖在分节内容的一个元素中具有多个标题所生成的隐式节。

[http://www.w3.org/TR/2011/WD-html5-author-20110809/headings-and-sections.html#headings-and-sections](http://www.w3.org/TR/2011/WD-html5-author-20110809/headings-and-sections.html#headings-and-sections)

所以我认为你的两个例子都很好：

*   在您的第一个示例中，每个标题`<section>`都有一个`<h2>`标签，这是适当的，因为每个部分都嵌套在文章的第二层。
*   在您的第二个示例中，每个都`<section>`使用一个`<h1>`标签，因为该`<section>`标签正在[分割 content](http://www.w3.org/html/wg/drafts/html/CR/dom.html#sectioning-content-0)。

在这两种情况下，您都已将文章部分显式包装在`<section>`标签中。

我认为`<h2>`-`<h6>`保留向后兼容性和灵活性。`<h2>`使用-允许 HTML4 样式的分段`<h6>`意味着不必更改现有的 HTML4 内容以适应 HTML5 的分段规则。这也意味着，如果出于某种原因，在给定的情况下使用旧式切片更为最佳，那么作者可以。

HTML 旨在供全球通用使用。一点灵活性确实对此有所帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-25T12:01:59.367

根据 Paul D. Waite 评论与[规范链接](http://www.w3.org/TR/2011/WD-html5-author-20110809/headings-and-sections.html#headings-and-sections)，

**两个版本都是正确**的，第二个例子只有在你经常移动你的部分时更容易维护，所以你不需要编辑标题。

# vaadin - 如何在vaadin中接受xml文件

> ID：14030312
> 
> 赞同：0
> 
> 时间：2012-12-25T11:41:19.927
> 
> 标签：vaadin

您好，我是 vaadin 的新手，我需要帮助来接受 vaadin 应用程序中的 xml 文件。更详细的规范是这样的：android 手机发送 xml 文件，该文件必须在 vaadin 应用程序中检索。我不知道如何在 vaadin 应用程序中接受 xml 文件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T11:25:58.240

查找 Vaadin Upload 组件：[http ://demo.vaadin.com/sampler#Uploads](http://demo.vaadin.com/sampler#Uploads)

对于这种情况，BasicUpload 组件示例就足够了。使用上传组件时，您需要提供自己的上传构造函数所需的接收器定义。在该类的 receiveUpload 方法中，您可以将 XML 文件写入内存或数据库。

# java - 如何在 EST 中获取日期

> ID：14030313
> 
> 赞同：5
> 
> 时间：2012-12-25T11:41:27.670
> 
> 标签：java, date

请建议一种在 EST 中打印日期的方法。

```
public Date convertToEST(Date date)
{
     // some code here
} 
```

如果我在 IST 中传入一个日期，该方法应该在 EST 中返回该日期。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-25T12:03:33.140

你需要以下

```
Date date = new Date();  

DateFormat formatter = new SimpleDateFormat("dd MMM yyyy HH:mm:ss z");

// Set the formatter to use a different timezone  
formatter.setTimeZone(TimeZone.getTimeZone("EST"));  

// Prints the date in the EST timezone  
System.out.println(formatter.format(date)); 
```

要将方法返回一个`Date`对象，您需要如下所示

```
public static Date convertToEST(Date date) throws ParseException {
    DateFormat formatter = new SimpleDateFormat("dd MMM yyyy HH:mm:ss z");
    formatter.setTimeZone(TimeZone.getTimeZone("EST"));
    return formatter.parse((formatter.format(date)));
} 
```

Javadoc- [`DateFormat.format`](http://docs.oracle.com/javase/1.4.2/docs/api/java/text/DateFormat.html#format%28java.util.Date%29),[`DateFormat.parse`](http://docs.oracle.com/javase/1.4.2/docs/api/java/text/DateFormat.html#parse%28java.lang.String%29)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-25T11:50:20.850

“该方法应在 EST 中返回该日期”的想法是错误的。自 1970 年 1 月 1 日格林威治标准时间 00:00:00 以来，日期只是毫秒的持有者。它与时区无关。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2018-02-13T17:56:19.357

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-12-26T04:53:50.400

在java中更改时区

```
public class TimeZoneSample {
    public static void main(String[] args) throws ParseException {

        // I am in IST time Zone (Its ID is Asia/Calcutta or ITS)
        System.out.println(TimeZone.getDefault());
        // I get Indian Time printed
        System.out.println(new Date());
        System.out.println("-------------------");
        // I am setting the time zone to China
        TimeZone.setDefault(TimeZone.getTimeZone("CTT"));
        // Now my default time zone is in China
        System.out.println(TimeZone.getDefault());
        // I get Chian Time printed
        System.out.println(new Date());
        System.out.println("-------------------");
        // I am setting the time zone to EST
        TimeZone.setDefault(TimeZone.getTimeZone("EST"));
        // Now my default time zone is in EST
        System.out.println(TimeZone.getDefault());
        // I get Eastern Time printed
        System.out.println(new Date());

    }

} 
```

控制台输出

```
sun.util.calendar.ZoneInfo[id="Asia/Calcutta",offset=19800000,dstSavings=0,useDaylight=false,transitions=6,lastRule=null]
Wed Dec 26 10:22:25 IST 2012
-------------------
sun.util.calendar.ZoneInfo[id="CTT",offset=28800000,dstSavings=0,useDaylight=false,transitions=19,lastRule=null]
Wed Dec 26 12:52:25 CST 2012
-------------------
sun.util.calendar.ZoneInfo[id="EST",offset=-18000000,dstSavings=0,useDaylight=false,transitions=0,lastRule=null]
Tue Dec 25 23:52:25 EST 2012 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2018-02-13T11:28:42.127

```
DateFormat requiredDateFormat = new SimpleDateFormat("hh:mm a zzz, EEE MMMM dd,yyyy");
requiredDateFormat.setTimeZone(TimeZone.getTimeZone("US/Eastern"));
String date = requiredDateFormat.format(new Date());
System.out.println(date); 
```

控制台输出：美国东部标准时间上午 06:25，2018 年 2 月 13 日星期二

# c++ - HLSL ID3D11DeviceContext::UpdateSubresource 错误

> ID：14030314
> 
> 赞同：0
> 
> 时间：2012-12-25T11:41:31.963
> 
> 标签：c++, directx, buffer, constants, hlsl

好的，

所以我有一个需要两个常量缓冲区的着色器，但是当我使用

```
ID3D11DeviceContext::UpdateSubresource 
```

我将 SubResource 设置为 1（第二个缓冲区），然后我被警告（错误...）：

```
D3D11: ERROR: ID3D11DeviceContext::UpdateSubresource: DstSubresource index (1) out of range, must be less than 1\. [ RESOURCE_MANIPULATION ERROR #287: UPDATESUBRESOURCE_INVALIDDESTINATIONSUBRESOURCE ] 
```

我理解错误，但不知道为什么会出现，即为什么会发生？

谢谢你

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-19T20:09:11.267

SubResource 是为 TextureArrays/Mipmaps 设计的，因此您可以例如读/写特定的 mip 切片。在缓冲区的情况下，子资源始终为零（因为它或多或少是原始数据）。

[您可以在此处](http://msdn.microsoft.com/en-us/library/windows/desktop/ff476081%28v=vs.85%29.aspx)找到有关子资源的一些信息

因此，您可以使用 0 更新每个常量缓冲区，然后您需要使用 PSSetConstantBuffers 将每个常量缓冲区分配给着色器插槽（以及需要它的每个阶段），然后相应地选择起始位置（应该与寄存器匹配着色器中的数字）。

# java - 带有枚举的 nullPointerException

> ID：14030316
> 
> 赞同：0
> 
> 时间：2012-12-25T11:41:47.267
> 
> 标签：java

我正在编写一个游戏，玩家必须在对话框字段中输入一些内容，而 java 必须将其解释为一个动作。我有一个名为 GameEngine 的类，我在其中使用开关：

```
public void interpretCommand(final String commandLine) 
{
    Command command = parser.getCommand(commandLine);
    CommandWord commandWord = command.getCommandWord();
    switch ( commandWord ) {
      case UNKNOWN: 
         gui.println("Unknown command...");
         return;
      case LOAD: 
         load(); 
         break;
    } 
} 
```

此处使用的枚举位于 enumclass 中：

```
public enum CommandWord
{
    LOAD("charger"),UNKNOWN("?");
    private String commandWord;
 } 
```

最后是 CommandWords 类：

```
public class CommandWords
{
    // a HashMap that holds all valid command words
   private HashMap<String, CommandWord> validCommands; 

   public CommandWords()
   {
      validCommands = new HashMap<String, CommandWord>();
      for(CommandWord command : CommandWord.values()) {
          if(command != CommandWord.UNKNOWN){
              validCommands.put(command.toString(), command);
          }
      }
   }

   /**
     * @param commandWord the command word to look for in the valid commands
     * @return the commandWord associated with the word typed
     */
    public CommandWord getCommandWord(final String commandWord)
    {
        CommandWord command =validCommands.get(commandWord);
        if(command !=null) {
           return command;
        }
        else {
           return CommandWord.UNKNOWN;
        }
    } 
```

命令类：

```
public class Command
{
    private CommandWord commandWord;

    /**
     * @param commandWord from enum class
     */
    public Command(CommandWord commandWord)
    {
        this.commandWord = commandWord;
    }

    public CommandWord getCommandWord()
    {
        return commandWord;
    }
} 
```

我的问题很简单：当我输入充电器时，它可以工作，但是当我输入一个随机单词而不是在列表中时，我`NullPointerException`在该行得到一个 in 终端

```
 switch ( commandWord ) 
```

在解释命令中。

我看不出我的代码有什么问题。如果有人可以提供帮助，谢谢。请不要怪我，我是新手，几个月前才开始！

解决方案：在命令中修改/添加这些行

```
 public boolean isUnknown()
{
    return (commandWord == null);
}

    public CommandWord getCommandWord()
{
    if(!isUnknown()){

    return commandWord;

}
 else return CommandWord.UNKNOWN;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-25T11:57:39.630

在这一行只有一件事可以为空，那就是`commandWord`. 所以你的方法调用`command.getCommandWord()`返回null。

编辑：根据您现在提供的信息，这意味着解析器返回一个`Command`没有设置 commandWord 的对象。

# c# - 继承后无法返回新的类类型

> ID：14030318
> 
> 赞同：0
> 
> 时间：2012-12-25T11:42:29.547
> 
> 标签：c#, abstract, base

```
public class abstract animal
{
     // many fields
     public string Name {get;set;}
     public int id {get; set;}
     // method, return self
     public abstract animal getAnimalByID( int _id)
     {
         // databse connection
         //get data from database and return an animal type

         return animal; <-- cannot work, "return this" can work
     }

} 

public class dog : animal
{
     public override dog getAnimalByID( int _id)
     {
          return (dog )base.getAnimalByID( _id);
     }
} 
```

我有一个抽象基类并从数据库中获取数据。狗比动物有更多的字段和功能，我想从数据库中返回狗的数据类型。

问题1：

**返回（狗）base.getAnimalByID（_id）；**返回访问基类错误

问题2：

**(dog)**也返回错误

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-25T11:44:20.690

如果我想在第二类使用**基**类，第一类的方法不能声明为**抽象。**

 **在我拿走**摘要**后，其余的工作正常。**

# php - 来自网站的响应不正确

> ID：14030319
> 
> 赞同：0
> 
> 时间：2012-12-25T11:42:30.493
> 
> 标签：php, objective-c, login, ios6

我是 iPhone 应用程序的新手。我已按照[**本教程**](http://www.edumobile.org/iphone/iphone-programming-tutorials/how-to-receive-data-from-the-server-in-iphone/)从 iPhone 登录。

我有如下的php文件。

* * *

# 代码

* * *

## 索引.php

```
<!DOCTYPE html>
<html>
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
        <title></title>
    </head>
    <body>
        <?php
        $user = $_POST['uname'];

        if ($user == 'user') {
            echo "Welcome to my site...";
        } else {
            echo "Invalid User";
        }
        ?>
    </body>
</html> 
```

当我运行应用程序并输入用户名作为**用户**名和密码作为一些文本时，我在 iPhone 中得到如下输出

* * *

## 输出

```
<!DOCTYPE html>
<html>
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
        <title></title>
    </head>
    <body>
            Welcome to my site...
    </body>
</html> 
```

我期待的输出只是文本**Welcome to my site...**，但是我得到了完整的 HTML 代码。

知道为什么我会这样吗？我需要在 PHP 文件中进行哪些更改？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-25T11:46:44.297

根据 iphone 应用程序开发教程，他们使用标准 sdk 来创建按钮和文本框，它不是 html，如果您想在 iphone 中使用 html 创建登录表单，请使用 webView，因为您正在打印完整的 html 代码，它显示了您的仅，仅将以下代码放入您的 index.php 文件中

```
<?php
  $user = $_POST['uname'];
  if ($user == 'user') {
       echo "Welcome to my site...";
  } else {
      echo "Invalid User";
  }
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-25T11:50:32.403

您的 php 服务器按原样打印任何内容，只要它不在 php 块中

```
<?php
  //this is interpreted php code 
?> 
```

所以它会打印出文件中的所有 html，直到它到达一个 php 代码块。它解释 php 块中的内容，并在文件的该位置插入您回显的内容。当 php 块结束时，它只会再次吐出后面的所有内容-在您的情况下为 html 。

如果您只想要简单的文本输出，则必须省略 HTML（这不是使 php 工作所必需的）。

另一方面，如果您也需要 HTML 来通过 Web 浏览器访问该站点，则最好将评估 php 放在一个单独的 php 文件中，并将您的 iPhone 应用程序指向这个 php 文件。在您的 HTML 文件中，您通过 php require 函数包含此文件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-25T11:56:36.287

您的 php 脚本将输出您在文件中写入的所有文本。

在 PHP 标记之前和之后，您编写了一个 HTML Header，Body。尝试删除这个：

```
 <?php
    $user = $_POST['uname'];

    if ($user == 'user') {
        echo "Welcome to my site...";
    } else {
        echo "Invalid User";
    }
    ?> 
```

但是，如果您尝试登录用户，然后稍后与服务器交互，而不总是传递用户，然后像您一样将用户名发送到服务器，创建一个会话，保存用户并将唯一的会话 ID 传递回苹果手机。然后当你下次连接到 API 时，你已经知道了用户，如果他登录了，你不必重新验证。

# c - 为什么我们只能直接访问一个PCI物理地址中的640k-1MB区域？

> ID：14030320
> 
> 赞同：2
> 
> 时间：2012-12-25T11:42:46.463
> 
> 标签：c, linux, linux-kernel, kernel, ioremap

[http://www.mjmwired.net/kernel/Documentation/IO-mapping.txt](http://www.mjmwired.net/kernel/Documentation/IO-mapping.txt)

```
153  - remapping and writing:
154     /*
155      * remap framebuffer PCI memory area at 0xFC000000,
156      * size 1MB, so that we can access it: We can directly
157      * access only the 640k-1MB area, so anything else
158      * has to be remapped.
159      */
160     void __iomem *baseptr = ioremap(0xFC000000, 1024*1024);
161 
162     /* write a 'A' to the offset 10 of the area */
163     writeb('A',baseptr+10);
164 
165     /* unmap when we unload the driver */
166     iounmap(baseptr);
167 
```

有人可以解释为什么会这样`We can directly access only the 640k-1MB area`吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-25T12:32:13.230

简短的回答：因为 Linus 决定这样做。

长答案：实际上，您甚至应该能够在没有司机注册的情况下访问该区域是错误的。但别介意。

在过去，在 1990 年代的某个时候，PCI 并不存在，显卡、网卡等都在使用称为 ISA 总线的东西。它没有花哨的功能，允许您从卡中请求信息，或者在卡上配置它认为应该是硬件地址的位置。所有的 ISA 内存都在 A0000 (640K) 和 FFFFF (1MB-1) 之间。所以，在 Linux 的早期，这是图形和类似东西存在的地方，内核无法真正知道这些东西在哪里。无论哪种方式，由于更好的硬件的发展，这些天我们没有这些硬件。甩掉包袱！

出于兼容性原因，这个内存空间在引导过程中仍然被使用，因为在你加载驱动程序和设置 PCI 硬件之前，它以“传统模式”运行，所以你仍然可以在机器上运行非常旧的 DOS 和其他旧软件，而无需它表现得很奇怪。

但是，例如，一旦配置了您的显卡，它将设置 BAR（总线地址范围），以告诉世界它在总线地址空间（物理地址）中的位置。ioremap 会将物理地址映射到您可以在内核中使用的虚拟地址——在本例中为 baseptr。[我可以更详细地介绍 ioremap，因为我最近一直在处理一些从该代码派生的代码]。

正如另一个答案所说，您需要询问设备它的 BAR 是什么（这是 PCI 配置空间的一部分），然后将其内存映射到虚拟地址。你可以看到东西在哪里使用`lspci -v|grep Memory`（当然，使用只是`lspci -v`会给你更多的信息，包括哪个设备有什么内存）。这些地址是物理地址。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-25T12:19:03.563

据我所知，您正在查看的评论是错误的，应该是“0x000A0000 到 0x000BFFFF”（或“640 KiB 到 768 KiB”）。

这对应于 80x86 PC 系统上的传统 VGA 显示内存区域（您必须通过 2 个小的 64 KiB 窗口和库切换之一访问可能大量的视频显示内存），它已被“线性帧缓冲区”技术取代这使您可以直接访问整个视频显示内存。

除了评论错误之外，我还假设代码被误导了，参数 0xFC000000 （“内存的总线地址”）只是某人编造的随机数。

本质上我在这里说的是这个例子是一个使用 IO 映射的例子；并且不打算用于确定在任何情况下任何设备的任何特定架构下哪些（物理、虚拟或总线）地址是有效的。

# facebook-graph-api - 为什么graph api之类的count丢失

> ID：14030324
> 
> 赞同：4
> 
> 时间：2012-12-25T11:43:44.267
> 
> 标签：facebook-graph-api, count, facebook-like

Graph API 不再报告喜欢（分享）的数量，或者至少是不稳定的：

这里缺少喜欢： [http ://graph.facebook.com/?id=http://www.huffingtonpost.com/2012/12/25/pope-christmas-eve-mass-god_n_2361399.html](http://graph.facebook.com/?id=http://www.huffingtonpost.com/2012/12/25/pope-christmas-eve-mass-god_n_2361399.html)

但出现在 IMDB 上： [https ://graph.facebook.com/?id=http://www.imdb.com/title/tt1853728/](https://graph.facebook.com/?id=http://www.imdb.com/title/tt1853728/)

对于较旧的网页，还可以找到带有共享和评论数量的旧输出。

这是推出的问题还是这是一个错误？据我所知，输出在 20 日左右开始发生变化。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T06:44:41.947

试试这个

[http://graph.facebook.com/fql?q=select%20comment_count%2C%20share_count%2C%20like_count%20from%20link_stat%20where%20url%20%3D%20%22http%3A%2F%2Fmashable.com% 2F2013%2F01%2F30%2Ffacebook-twitter-blackberry-10%2F%22](http://graph.facebook.com/fql?q=select%20comment_count%2C%20share_count%2C%20like_count%20from%20link_stat%20where%20url%20%3D%20%22http%3A%2F%2Fmashable.com%2F2013%2F01%2F30%2Ffacebook-twitter-blackberry-10%2F%22)

这将产生类似的结果

```
{
   "data": [
      {
         "comment_count": 3,
         "share_count": 91,
         "like_count": 5
      }
   ]
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T21:25:48.913

对我来说似乎是一个错误。FQL 查询是一种仍然有效的替代方法。这是一个例子：

```
select comment_count, share_count, like_count from link_stat where url = "http://techcrunch.com/2011/04/12/facebook-comments-now-on-over-50k-sites-get-more-social-with-latest-upgrade/" 
```

在此处尝试 API Explorer：http: [//developers.facebook.com/tools/explorer/ ?fql=select%20comment_count%2C%20share_count%2C%20like_count%20from%20link_stat%20where%20url%20%3D%20%22http %3A%2F%2Ftechcrunch.com%2F2011%2F04%2F12%2Ffacebook-comments-now-on-over-50k-sites-get-more-social-with-latest-upgrade%2F%22](http://developers.facebook.com/tools/explorer/?fql=select%20comment_count%2C%20share_count%2C%20like_count%20from%20link_stat%20where%20url%20%3D%20%22http%3A%2F%2Ftechcrunch.com%2F2011%2F04%2F12%2Ffacebook-comments-now-on-over-50k-sites-get-more-social-with-latest-upgrade%2F%22)

但是，如果他们更改 Graph API 以再次返回共享计数和评论计数，我会很高兴。

这个官方的 Facebook 文档 (developers.facebook.com/docs/reference/plugins/comments/) 仍然建议使用 Graph API 来计算评论数，但是它似乎不适用于像这样的新页面：[https://graph。 facebook.com/?ids=http://techcrunch.com/2012/12/27/the-last-imac-question-mark/](https://graph.facebook.com/?ids=http://techcrunch.com/2012/12/27/the-last-imac-question-mark/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-28T14:37:22.647

几天前它已被接受为错误，

[http://developers.facebook.com/bugs/180781098727185?browse=search_50dda74e1870c8d60275326](http://developers.facebook.com/bugs/180781098727185?browse=search_50dda74e1870c8d60275326)

希望他们在不久的将来解决这个问题

# javascript - ExtJs 4：以一种形式使用相同组件的两个副本

> ID：14030326
> 
> 赞同：1
> 
> 时间：2012-12-25T11:43:52.770
> 
> 标签：javascript, inheritance, extjs4

想请您帮忙理解 ExtJs4 如何扩展组件并解决以下问题。

我`ItemSelector`通过扩展创建了自定义组件`Ext.data.Grid`，它具有`_aSelectedItems`属性。

```
Ext.define("Ext.ux.ItemSelector", {
    extend: "Ext.grid.Panel",

    // @type {Array}
    _aSelectedItems: [],
    ...
    getSelectedItems: function() {
        return this._aSelectedItems;
    },
}); 
```

**组件**

之后，我创建了两个使用`ItemSelector`小部件作为项目的组件：

```
Ext.define("components.Devices", {
    extend: "Ext.form.FieldContainer",
    _oDevicesSelector: null,
    ...
    _getSelector: function(oConfig) {
        if (!this._oDevicesSelector) {
            this._oDevicesSelector = new Ext.ux.ItemSelector({
                id: oConfig.id,
                name: oConfig.name,
                flex: 1,
                storeUrl: oConfig.storeUrl
            });
        }
        return this._oDevicesSelector;
    },

    getValue: function() {
        return this._getSelector().getSelectedItems();
    }
}); 
```

和

```
Ext.define("components.Firmwares", {
    extend: "Ext.form.FieldContainer",
    _oFirmwaresSelector: null,
    ...
    _getFirmwareSelector: function(oConfig) {
        if (!this._oFirmwaresSelector) {
            this._oFirmwaresSelector = new Ext.ux.ItemSelector({
                id: oConfig.id,
                name: oConfig.name,
                flex: 1,
                storeUrl: oConfig.storeUrl
            });
        }
        return this._oFirmwaresSelector;
    },

    getValue: function() {
        return this._getFirmwareSelector().getSelectedItems();
    }
}); 
```

`ItemSelector`在上面的每个组件中，我创建了through的新实例`new`。

**形式**

我创建了一个表格，然后推`components.Firmwares`入`components.Devices`其中。一切正常，项目加载正确。

**问题**

当我选择一些项目`components.Devices`并打电话时，`getValue()`我会得到下一个结果：

```
console.log( this.getDevicesSelector().getValue() );
// ["7885"] - it's OK

console.log( this.getFirmwaresSelector().getValue() );
// ["7885"] - but this array should be empty, 
// 'cause I didn't select any items in components.Firmwares selector 
```

谁能帮助我理解这种行为以及如何解决它？

真的提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-25T17:24:31.813

扩展组件/类时，非原始类型（如您的`_aSelectedItems`数组）在所有类实例之间共享。

关于为什么会发生这种奇怪的事情的完整解释可以在[这篇 Skirtle's Den 文章](http://skirtlesden.com/articles/config-objects-on-the-prototype)中找到。您可能还想看看[这个 SO question](https://stackoverflow.com/questions/6871594/best-practices-concerning-initcomponent-in-ext-define)，并注意我对 Molecular Man 的回答的评论。

如果你把你的数组放在`initComponent`你的问题里应该没有了。

# java - 根据周数从MYSQL中检索数据

> ID：14030329
> 
> 赞同：0
> 
> 时间：2012-12-25T11:44:08.697
> 
> 标签：java, mysql, sql, date, select

我在 MYSQL 中有一个如下表：

```
proj_id|hoursWorked|Date. 
```

日期字段的类型为`Date`; 我想根据我的基于 Java 的 Web 应用程序中项目的给定周数从表中检索所有条目。请帮助我实现这一目标。

我无法编写允许我这样做的单个查询。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-25T11:55:07.780

不要**使用**类似的东西`WHERE WEEK(column)=something`- 这是一个性能杀手：它会计算所有行的周数，即使它们不匹配。除此之外，它将无法在此列上使用索引。

而是根据您的数据类型计算绝对开始和结束日期或时间点，然后使用`BETWEEN`. 这将不对不匹配的行进行计算，并允许使用索引。

经验法则：如果您可以在常数计算和字段计算之间进行选择，请使用前者。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-25T11:45:43.640

使用[周](http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_week)

```
select * from your_table
where week(`Date`) = week('2012-12-01') 
```

如果您只想获取本周的记录，您可以这样做

```
select * from your_table
where week(`Date`) = week(curdate()) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-25T11:46:31.957

使用 MySQL`WEEK()`函数。

```
SELECT WEEK(dateColumn)
FROM...
WHERE WEEK(dateColumn) = 1 
```

*   [星期（）](http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_week)

来自 MySQL 文档

> 此函数返回日期的周数。WEEK() 的两个参数形式使您可以指定星期是从星期日还是星期一开始，以及返回值应在 0 到 53 或 1 到 53 的范围内。

# iphone - 应用因在 UIWebview 上加载 HTML 而被拒绝

> ID：14030332
> 
> 赞同：2
> 
> 时间：2012-12-25T11:44:37.867
> 
> 标签：iphone, ios, ipad

我的 iPhone 应用程序被拒绝说我试图在`UIWebView`XML 的帮助下加载大量 HTML。他们让我使用原生 UI 视图。谁能让我知道如何将 HTML 标签转换为 native `UIView`？

![在此处输入图像描述](../Images/c2d1f89e13399d60e58a254634c0aace.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-25T11:50:21.583

没有直接的方法可以做到这一点。这意味着将您的 Web 视图转换为标准的 UIView。

您可以考虑使用`UITextView`iOS 6 中提供的富文本功能来呈现从 XML 解析的数据。

为了保留与原始 Web 视图相同的格式，您应该使用 a `NSAttributedString`（查看此[问题](https://stackoverflow.com/questions/3482346/how-do-you-use-nsattributedstring)以获取有关它的更多信息）。

为了插入图像，您可以使用[此处](https://stackoverflow.com/questions/8255229/add-image-to-uitextview-and-post-it)描述的方法，但是如果您需要交错图像，恐怕您无法在单个`UITextView`.

对于项目符号列表，您可以使用[此处](https://stackoverflow.com/questions/7685221/bullet-list-and-numbered-list-in-uitextview)描述的方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-25T11:46:49.117

他们可能意味着，你解析你的 XML 并在像 UITableview 这样的原生视图中以某种格式显示你的数据......

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-25T11:58:42.307

> 谁能告诉我如何将 HTML 标签转换为原生 UI 视图？

那是不可能的。也许使用 a`UITableView`来显示可能的文章，然后单击一个显示`UIView`详细内容的新文章。

*也许您应该添加一些有关应用程序的详细信息以及您想要达到某些功能的方式？*

* * *

> 他们让我使用 native `UIView`。

这可能意味着您实际上正在创建一个与“真实”应用程序不同的 Web 应用程序。他们可能认为你只是用 HTML/CSS/Javascript 做的太多了

* * *

也许阅读[iOS人机界面指南](http://developer.apple.com/library/ios/#documentation/UserExperience/Conceptual/MobileHIG/Introduction/Introduction.html "iOS 人机界面指南")......例如“后退”按钮位于“错误”一侧。（应该留下。）Apple 希望看到每个 iOS 应用程序都具有相同的外观和感觉，这更容易理解。

* * *

**更新：**您可以将 a`UIView`与 native`UINavigationBar`和 native一起使用，并**仅**`UIToolBar`显示a 中的内容。**`UIWebView`**

# iphone - 在 iPhone 中将日期格式更改为特殊格式

> ID：14030335
> 
> 赞同：0
> 
> 时间：2012-12-25T11:45:21.720
> 
> 标签：iphone, ios, xcode, parsing, date

我在我的应用程序中使用 AFFeedParser 来解析来自不同 HTML 页面的文章。

通过解析，我得到了书面`article DATE like`

`"Thu, 06 Dec 2012 17:44:22 +0000\n\t\t"`作为一个字符串。

我怎样才能把它转换成日期`Thursday,December 06,2012`呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-25T12:22:22.123

```
NSString *dateStr=@"Thu, 06 Dec 2012 17:44:22 +0000\n\t\t";
NSString *getDate=[[dateStr componentsSeparatedByString:@"\\"]objectAtIndex:0]; 
```

**在这里，您应该注意日期和时间的本地表示，因此您应该使用。**

```
NSDateFormatter dateFormat = [NSDateFormatter dateFormatFromTemplate:@"yMMMMd" options:0 locale:[NSLocale systemLocale]];

NSDate *date=[dateFormat dateFromString:getDate];

NSLog(@"dateString = %@", [dateFormat stringFromDate:date]); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-25T11:51:03.777

也看日志，我明白了...

```
 NSString *yourStringDate = @"Thu, 06 Dec 2012 17:44:22 +0000\n\t\t";
    NSString *str =[yourStringDate stringByReplacingOccurrencesOfString:@"\n" withString:@""];

    str =[str stringByReplacingOccurrencesOfString:@"\t" withString:@""];
    [str retain];

    NSDateFormatter *dateFormatter = [[[NSDateFormatter alloc] init] autorelease];
    [dateFormatter setDateFormat:@"EEE, dd MMM yyyy HH:mm:ss z"];

    NSDate *date = [dateFormatter dateFromString: str];

    dateFormatter = [[[NSDateFormatter alloc] init] autorelease];
    [dateFormatter setDateFormat:@"EEEE,LLLL dd,yyyy"];

    NSString *convertedString = [dateFormatter stringFromDate:date];
    NSLog(@"Converted String : %@",convertedString); 
```

**输出是：转换后的字符串：2012 年 12 月 6 日，星期四**

另请参阅我的另一个从字符串获取 NSDate 的答案，但您只需像上面那样设置格式，只需从该格式更改格式... [convert-string-to-nsdate-with-custom-format](https://stackoverflow.com/questions/13251633/convert-string-to-nsdate-with-custom-format/13251656#13251656)

我希望这对你有帮助....

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-25T12:00:38.070

找到答案：

```
NSString *inputDate=@"Thu, 06 Dec 2012 17:44:22 +0000\n\t\t";
NSString *trimDate=[[inputDate componentsSeparatedByString:@"+"]objectAtIndex:0];

NSDateFormatter *dateFormatter = [[NSDateFormatter alloc] init] ;
[dateFormatter setDateFormat:@"EEE, dd MMM yyyy HH:mm:ss"];

NSDate *date = [dateFormatter dateFromString:trimDate];

[dateFormatter setDateFormat:@"EEEE, MMMM dd,yyyy"];
NSString *dateString = [dateFormatter stringFromDate:date];

NSLog(@"dateString = %@", dateString); 
```

输出：

```
dateString = Thursday,December 06,2012 
```

# java - Void 和无参数有什么区别？

> ID：14030337
> 
> 赞同：63
> 
> 时间：2012-12-25T11:45:42.563
> 
> 标签：java, void

我有一个定义两个重载方法的类

```
public void handle(Void e) 

protected void handle() 
```

显然它们是不同的，尤其`handle(Void e)`是`public`。

这两者有什么区别？

如何调用第一种方法？我正在使用`handle(null)`- 这是正确的吗？

* * *

## 回答 #1

> 赞同：69
> 
> 时间：2012-12-25T11:48:05.077

`Void`是一个通常仅用于反射的特殊类 - 它的主要用途是表示 void 方法的返回类型。从[javadoc 为`Void`](http://docs.oracle.com/javase/6/docs/api/java/lang/Void.html)：

> Void 类是一个不可实例化的占位符类，用于保存对表示 Java 关键字 void 的 Class 对象的引用。

因为`Void`无法实例化该类，所以您可以传递给具有`Void`类型参数的方法的唯一值，例如`handle(Void e)`，是`null`。

那是事件的官方版本，但是对于那些感兴趣的人，尽管在 的 javadoc 中声称相反`Void`，您实际上*可以*实例化 的实例`Void`：

```
Constructor<Void> c = Void.class.getDeclaredConstructor();
c.setAccessible(true);
Void v = c.newInstance(); // Hello sailor! 
```

也就是说，`Void`当您想指示该类型被“忽略”时，我已经看到“有用”用作泛型参数类型，例如：

```
Callable<Void> ignoreResult = new Callable<Void> () {
    public Void call() throws Exception {
        // do something
        return null; // only possible value for a Void type
    }
} 
```

`Callable`的泛型参数是返回类型，所以当这样`Void`使用时，它向代码的读者清楚地表明返回值并不重要，即使`Callable`需要使用接口，例如如果使用`Executor`框架。

* * *

## 回答 #2

> 赞同：46
> 
> 时间：2012-12-25T11:48:57.570

第一个函数是单个参数的函数，必须提供并且只能有效地取值`null`。null 以外的任何值都不会编译。第二个函数不接受任何参数并且传递`null`给它不会编译。

* * *

## 回答 #3

> 赞同：15
> 
> 时间：2012-12-25T12:10:28.507

考虑`AsyncTask<T1, T2, T3>`来自[Android 系统](http://developer.android.com/reference/android/os/AsyncTask.html)的 API ，它提供了三个钩子：

```
class AsyncTask<S, T, V> {
  void doInBackground(S...);
  void onProgressUpdate(T...);
  void onPostExecute(V);
} 
```

当您扩展泛型类型时`AsyncTask<T1, T2, T3>`，您可能对将参数用于*进度*和*结果*挂钩不感兴趣，因此您的实现将如下所示：

```
class HTTPDownloader extends AsyncTask<URL, Void, Void> {
  void doInBackground(URL... urls) {}
  void onProgressUpdate(Void... unused) {}
  void onPostExecute(Void unused) {}
} 
```

您可以使用参数调用这些方法`null`，因为`Void`无法实例化。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2012-12-25T12:08:47.413

如果`Void`实际上不是类型参数的实例化（这显然是有意义的），那么声明一个`handle(Void)`如果您的`handle`方法受制于语言外契约的意义也很有意义，该契约说想要参与某个协议的对象必须实现单**参数句柄方法**，无论实际参数类型如何。现在，可能有一个特殊情况的实现不能处理任何事情，但是为这样的实现`null`声明是有意义`handle(Void)`的。

# jquery - 在滑块的帮助下放大和缩小图像

> ID：14030348
> 
> 赞同：0
> 
> 时间：2012-12-25T11:47:00.813
> 
> 标签：jquery

我想制作一个放大或缩小图像的滑块：- [http://test.dpetroff.ru/jquery.iviewer/test/](http://test.dpetroff.ru/jquery.iviewer/test/) 或 [http://www.zkoss.org/zkdemo/input/slider](http://www.zkoss.org/zkdemo/input/slider)

请帮我

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-25T12:22:43.830

试试[**jQuery Gzoom Plugin**](http://lab.gianiaz.com/jquery/gzoom/)

这是一个优秀的 jQuery 图片缩放插件，具有非常有用的功能，例如点击加号和减号进行缩放，拖动滑块进行缩放 使用鼠标滚轮进行缩放 悬停图像，移动鼠标悬停图像更改平移，单击图像以灯箱样式和其他方式显示。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-25T11:52:57.320

有一个非常不错的 jQuery 插件[T Squares Image Zoom](http://tsquares.net/index.html)。它肯定会帮助您解决问题。

**编辑**

使用插件时，您可以指定许多参数，例如

*   鼠标滚轮启用/禁用放大/缩小
*   轮步
*   按钮步骤
*   缩放光标等等。

# java - JMS 教程 j2eeadmin 和 j2ee 命令

> ID：14030349
> 
> 赞同：1
> 
> 时间：2012-12-25T11:47:04.933
> 
> 标签：java, jakarta-ee, jms

我正在尝试遵循“Java 消息传递服务 API 教程”，我已经安装了“java_ee_sdk_6u4”，但该教程是关于旧的 java ee SDK 1.3.1。

本教程要求通过输入以下命令来启动 J2EE 服务器：

```
j2ee -verbose 
```

后来它要求使用以下命令创建一个名为 MyQueue 的队列：

```
j2eeadmin -addJmsDestination MyQueue queue 
```

我在 src 文件中找不到这两个命令：

```
$ ls glassfish3/bin
$ ls glassfish3/glassfish/bin 
```

不要列出其中任何一个，这些命令是更新还是我需要安装其他东西？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-25T14:18:39.993

您下载的 Java EE SDK 与 glassfish 捆绑在一起，它是一个开源应用程序服务器。您可以在[http://glassfish.java.net/docs/index.html](http://glassfish.java.net/docs/index.html)上找到有关使用 glassfish 的文档。您使用的文档可能很旧，但 glassfish 有很好的文档和一个很好的管理控制台，用于创建 JMS 管理对象。

# android - 如何使用 WebView 以电子书阅读器的方式显示 html 页面？

> ID：14030353
> 
> 赞同：5
> 
> 时间：2012-12-25T11:47:48.670
> 
> 标签：android, webview, android-webview

我的 android 设备上有一组 html 文件。我需要以一种特殊的方式在我的应用程序中显示它们：我想将长页面分成几个较小的部分，以便它们适合设备高度。我不确定是否有可能通过内置设施实现这一目标。这个问题我该怎么办？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-25T12:02:29.197

您可能不应该在这里使用 webview。

尝试以下方法：

您可以使用[Canvas](http://developer.android.com/reference/android/graphics/Canvas.html)来绘制每一页。画布会给你它的高度和宽度。使用它，您可以使用[Drawtext](http://developer.android.com/reference/android/graphics/Canvas.html#drawText%28java.lang.String,%20int,%20int,%20float,%20float,%20android.graphics.Paint%29)基于可用的宽度和高度在画布上绘制每一行。

因此，您基本上会计算一行中可以容纳多少个字母，占用那么多单词，注意不要拆分任何单词并继续绘制文本。您也可以使用不同的工作线程来处理不同的段落以加快渲染速度。

希望这可以帮助！！！！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-25T11:53:20.800

```
 String summary = "<html><body>You scored <b>192</b> points.</body></html>";
 webview.loadData(summary, "text/html", null); 
```

或者

```
String yourhtmlpage = "<html><body>You scored <b>hello world</b> points.</body></html>";
 webview.loadDataWithBaseURL(null, yourhtmlpage, "text/html", "UTF-8", null); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-14T14:03:30.143

除了构建自己的 HTML 解析阅读器之外，除了使用 CSS 和 JavaScript 将内容拆分为页面之外，我想不出任何其他方法。

您可以使用的一个库示例是[Monocle](http://monocle.inventivelabs.com.au/)。我自己没用过，但是主页说可以用它来渲染...

> ...XHTML 文件具有定义的线性进程，以及可选的部分或章节的嵌套层次结构——这是受支持的。全彩。

# c++ - 此类中的变量未命名类型 C++

> ID：14030359
> 
> 赞同：1
> 
> 时间：2012-12-25T11:48:48.263
> 
> 标签：c++

我正在尝试在我的程序（*nix 机器 - Ubuntu 12.10，代码块）中使用 log4cpp 在程序的各个实例中创建日志。

**LoggerMain.h**

```
#include "log4cpp/Category.hh"
#include "log4cpp/Appender.hh"
#include "log4cpp/FileAppender.hh"
#include "log4cpp/OstreamAppender.hh"
#include "log4cpp/Layout.hh"
#include "log4cpp/BasicLayout.hh"
#include "log4cpp/Priority.hh" 
```

**主程序.h**

```
#include "LoggerMain.h"

MainProgram{
public:
log4cpp::Appender *appender;
}; 
```

**主程序.cpp**

```
appender = new log4cpp::FileAppender("default","program.log"); //getting error here
appender->setLayout(new log4cpp::BasicLayout());
log4cpp::Category& root = log4cpp::Category::getRoot();

main{
//will use root here for loggin
} 
```

错误： **src/MainProgram.cpp|21|错误：'class MainProgram'中的'appender'没有命名类型|**

怎么了？我基本上在做与 log4cpp 简单示例文档中相同的[事情](http://log4cpp.sourceforge.net/#simpleexample)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-25T11:58:09.780

您不能在函数之外进行操作，请将以下代码放入 MainProgram 构造中，

```
MainProgram::MainProgram(){
  appender = new log4cpp::FileAppender("default","program.log"); //getting error here
  appender->setLayout(new log4cpp::BasicLayout());
  log4cpp::Category& root = log4cpp::Category::getRoot();
} 
```

您可以对 MainProgram 使用单例模式

```
MainProgram{
public:
   MainProgram* instance(){
     if (!instance){
        instance = new MainProgram();
        return instance;
     } 
   }
   MainProgram()
   {
      appender = new new log4cpp::FileAppender("default","program.log"); //getting error here
      appender->setLayout(new log4cpp::BasicLayout());
   }
private:
   log4cpp::Appender *appender;
   MainProgram* instance;
};

int main(int argc, char* argv[])
{
   MainProgram::Instance();
} 
```

注意，C++ 支持两种形式的 main 函数，您需要将 main 函数更改为以下形式之一：

```
int main() { /* ... */ } 
```

和

```
int main(int argc, char* argv[]) { /* ... */ } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-25T11:55:15.770

您不能在函数之外有代码语句。这可能应该在类构造函数中？

编译器期待一个声明，它以一个类型开始。它说那`appender`不是一种类型。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-25T11:55:57.257

您似乎没有创建`MainProgram`. 尝试以下方式：

```
MainProgram mp;
mp.appender = new log4cpp::FileAppender("default","program.log"); 
```

# oracle - Oracle Deref 函数：参数的数量或类型错误

> ID：14030364
> 
> 赞同：4
> 
> 时间：2012-12-25T11:49:42.580
> 
> 标签：oracle, plsql

我正在尝试在 Oracle 中创建一个对象方法，如下所示：

```
CREATE OR REPLACE TYPE BODY TheType AS
    MEMBER FUNCTION getAtt RETURN VARCHAR2 IS
    BEGIN
        RETURN DEREF(SELF.Att).Att2;
    END;
END;
/ 
```

但我收到以下错误：

```
PLS-00306: wrong number or types of arguments in call to 'DEREF' 
```

TheType 类型也是这样声明的：

```
CREATE OR REPLACE TYPE TheType UNDER SuperType ();
/

...

ALTER TYPE TheType ADD ATTRIBUTE ( Att REF TheType ) CASCADE;

...

ALTER TYPE TheType 
    ADD MEMBER FUNCTION getAtt RETURN VARCHAR2
CASCADE; 
```

以及 Supertype 的定义：

```
CREATE OR REPLACE TYPE SuperType AS OBJECT ( Att2 VARCHAR2(50) )
NOT FINAL NOT INSTANTIABLE;
/ 
```

我给 DEREF 函数一个类型正确的 var，为什么会出现这个错误？

如果我信任[Oracle 文档，它应该可以工作](http://docs.oracle.com/cd/E11882_01/server.112/e26088/functions054.htm#SQLRF00634)

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-26T17:30:48.137

将 DEREF 转换为 SQL。例如

```
SQL> create or replace type supertype as object ( att2 varchar2(50) )
  2  not final not instantiable;
  3  /

Type created.

SQL> create or replace type thetype under supertype (
  2  att ref thetype,
  3  member function getatt return varchar2);
  4  /

Type created.

SQL> show errors type thetype
No errors.
SQL> create or replace type body thetype as
  2    member function getatt return varchar2 is
  3      v_t thetype;
  4    begin
  5             select deref(self.att) into v_t from dual;
  6             return v_t.att2;
  7    end;
  8  end;
  9  /

Type body created.

SQL> show errors type body thetype
No errors.
SQL> create table thetypes of thetype;

Table created.

SQL> insert into thetypes values ('hi there', null);

1 row created.

SQL> set serverout on
SQL> declare
  2    v_t thetype;
  3  begin
  4    select thetype(null, ref(a)) into v_t from thetypes a;
  5    dbms_output.put_line(v_t.getatt);
  6  end;
  7  /
hi there

PL/SQL procedure successfully completed.

SQL> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-26T09:58:37.300

尝试缩小问题范围的一些想法：

1.  `DEREF`将 the与 the分开`.Att2`并测试以查看它不喜欢脚本的哪个部分；**还**
2.  `att`使用独立的 pl/sql尝试该类型，看看它是否返回任何内容。
3.  如果它确实看到它是否`DEREF`有效，那么; **还**
4.  查看是否`REF(TheType.Att2)`在独立的 pl/sql 中创建类型之外的工作。

我同意你的看法，虽然一开始似乎没有问题。

祝你好运。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-26T10:14:31.890

我们可以将 REF 声明为变量、参数、字段或属性。

```
DECLARE
  emp         employee_typ;
  emp_ref REF employee_typ;  -- creating one more type with REF
BEGIN
  SELECT REF(e) INTO emp_ref FROM employee_tab e WHERE e.employee_id = 370;
  UPDATE employee_tab e 
    SET e.address = address_typ('NIZAM', 'Hyd', 'AP', '465876')
    WHERE REF(e) = emp_ref;
END; 
```

我在创建对象类型时不思考`REF`和工作。`DEREF`它用于返回对象的实例值。

# excel - 我的 VBScript 代码“下标超出范围”出现错误

> ID：14030365
> 
> 赞同：-1
> 
> 时间：2012-12-25T11:49:50.683
> 
> 标签：excel, vbscript, vba

你能告诉我为什么我得到错误`Subscript out of range- ArrParent`吗？当我使用时`MsgBox(Lbound(ArrParent))`- 它给我 1 并且当我使用时`MsgBox(Ubound(ArrParent))`- 它给我 960。所以在下面的行中我遇到了这样的`out of range`错误。`Dic(ArrParent(Count))=Count+2`在下面找到完整的代码：

**代码**

```
 Sub ParentPIDNumber(ArrParent,ob3,ob2,ob4)

        Dim Dic,DicItems,Dickeys
        Dim Count

        Set Dic = CreateObject("Scripting.Dictionary")

        Count=LBound(ArrParent)
        'MsgBox(ArrParent(Count))
        Do Until Count > UBound(ArrParent) - 1

           Dic(ArrParent(Count))=Count+2 'here Dictionary keys are holding the row numbers as their Items

        Count=Count+1
        Loop

        ParentChildBinding Dic,ob3,ob2,ob4

    End Sub
   Sub FileredOpenProcessToDel(ob3,ob2,ob4)

        Dim ColumnToFilter,TotalRows
        Dim rngFilter,cel,str,rangesToRemove,x 
        Dim strToRemove : strToRemove = ""
        Dim ArrParent

        objExcel1.ScreenUpdating = False
        objExcel1.Calculation = -4135  'xlCalculationManual
        ColumnToFilter=objExcel1.Application.WorksheetFunction.CountA(ob4.Rows(1)) - 1
        ob4.Range(ob4.Cells(1,ColumnToFilter),ob4.Cells(1,ColumnToFilter)).AutoFilter ColumnToFilter, "Open",,,True 

        'Dim rngFilter as Range
        Set rngFilter = objExcel1.Application.Intersect(ob4.UsedRange,ob4.UsedRange.Offset(1),ob4.Columns(1)).SpecialCells(12)'xlCellTypeVisible
           'MsgBox(rngFilter.Rows.Count)
           REM Do While 1=1
            REM 'Msgbox
           REM Loop
        'msgbox "Filtered range has " & rngFilter.Rows.Count & " rows."
            str=""
            For each cel in rngFilter

              str = str & (cel.row) & ":" & (cel.row) & "," 

            Next

                    rangesToRemove = Split(str,",")

                    For x = UBOUND(rangesToRemove)-1 To LBOUND(rangesToRemove) Step -1

                         strToRemove = strToRemove & rangesToRemove(x)

                            If Len(strToRemove) > 200 then

                                ob4.Range(strToRemove).delete'str & rangesToRemove(x) & ":" & rangesToRemove(x) & ","
                                strToRemove = ""

                            Else

                                strToRemove = strToRemove & ","

                            End If

                    Next
                    If len(strToRemove) > 0 then

                        strToRemove = Mid(strToRemove, 1, Len(strToRemove) - 1)
                        'strToRemove = Left(strToRemove, Len(strToRemove) -1)
                        ob4.Range(strToRemove).delete

                    End If

        ob4.AutoFilterMode = False
        objExcel1.ScreenUpdating = True
        objExcel1.Calculation = -4105   'xlCalculationAutomatic

        TotalRows=objExcel1.Application.WorksheetFunction.CountA(ob4.Columns(1))
        'MsgBox(TotalRows)
        ReDim ArrParent(TotalRows - 2)
        ArrParent=ob4.Range("A2:" & "A" & TotalRows).Value
        'Call to the subroutine
        ParentPIDNumber ArrParent,ob3,ob2,ob4

    End Sub 
```

请在这里帮助我！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-25T17:28:58.810

在这种情况下，您可以做的最好的事情是在单独的脚本中提取错误代码并在那里进行试验，直到找到错误为止。

在您的情况下，我找不到错误，以下脚本没有给出错误，但它跳过了数组的最后一个元素

```
ArrParent = Array(10, 20, 30)
Count=LBound(ArrParent)
Set Dic = CreateObject("Scripting.Dictionary")
Do Until Count > UBound(ArrParent) - 1
  Dic(ArrParent(Count))=Count+2
  Count=Count+1
Loop
for each key in Dic 
  wscript.echo key & ":" & Dic(key)
next

'10:2
'20:3 
```

我没有你的 sourcearray 可以试验，但你可以这样尝试，为了不出现索引超出范围错误，你可以使用“for each”，如果你不需要 count 变量，它甚至会是迭代数组的最佳方法。

```
Count = 1
Set Dic = CreateObject("Scripting.Dictionary")
for each element in ArrParent
  Dic(element)=Count+2
  Count = Count+1
next

for each key in Dic 
  wscript.echo key & ":" & Dic(key)
next
'10:3
'20:4
'30:5 
```

# c# - 如何检查Shift键是否在C#中被按住？

> ID：14030371
> 
> 赞同：0
> 
> 时间：2012-12-25T11:50:23.440
> 
> 标签：c#, virtual, keycode, uppercase, lowercase

我正在编写一个方法，它应该通过接收虚拟代码来处理小写/大写字母（正如您所知，虚拟代码总是返回一个代码并且不能自己呈现大写或小写字母）。如果有人感兴趣，我通过使用`Control.IsKeyLocked`and`Control.ModifierKeys`类找到了解决方案：

```
bool isCapsLockOn = Control.IsKeyLocked(Keys.CapsLock);
bool isShiftOn = Control.ModifierKeys == Keys.Shift; 
```

我尝试实施的第一个解决方案是使用 Control.IsKeyLocked() 处理 shift 键，不久后我发现 IsKeyLocked 应该仅用于实际上可以锁定的键，如 numlock、capslock 等。以下代码不工作：

```
bool isLShiftOn = Control.IsKeyLocked(Keys.LShiftKey);
bool isRShiftOn = Control.IsKeyLocked(Keys.RShiftKey); 
```

好的，我实际上通过处理大写锁定是否打开/关闭以及是否使用 Control.IsKeyLocked 和 Control.ModifierKeys 结合 if 语句（在大写锁定打开/移位时处理小写）来实际按下移位来解决我的问题当大写锁定关闭/按下移位等时，按下和大写，反之亦然）。我现在很好奇为什么上面的代码不起作用，实际上甚至下面的代码也没有执行。为什么编译器没有抛出错误？我想这会以某种方式使应用程序处于“等待”状态，等待 shift 键被锁定，这是不可能发生的。

# facebook - Facebook Like & Share 按钮不显示图片内容

> ID：14030372
> 
> 赞同：0
> 
> 时间：2012-12-25T11:50:27.420
> 
> 标签：facebook, facebook-like, facebook-sharer

我正在使用 facebook like 按钮，按下 like 按钮后会显示一个共享内容的窗口。我的内容有图像，我想在 facebook 时间线上显示那个（或只是网站徽标）的拇指。我怎样才能做到这一点？

这是我的按钮配置

```
<div id="fb-root"></div>
<script>(function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0];
  if (d.getElementById(id)) return;
  js = d.createElement(s); js.id = id;
  js.src = "//connect.facebook.net/tr_TR/all.js#xfbml=1&appId=<APP_ID>";
  fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));</script> 
```

这是按钮

```
 <div class="fb-like" data-send="false" data-width="450" data-show-faces="true"></div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-25T14:22:30.770

您只需要在您的页面上使用 Open Graph Tags，请参见此处： http: [//ogp.me/](http://ogp.me/)

对于图像：“og：图像”。确保也使用 og:title 和 og:description。

# css - 在所有元素上覆盖图案

> ID：14030373
> 
> 赞同：0
> 
> 时间：2012-12-25T11:50:30.690
> 
> 标签：css

是否可以将图像（图案）放在 2 个或更多元素（具有不同背景）上？（类似于 Adob​​e Photoshop 中的图案填充）

这是一个屏幕截图： ![在此处输入图像描述](../Images/66a923ac75058fd9f729bb71f1002544.png)

注意：元素内容应该由用户选择。我不想要一个覆盖其他元素的 div。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-25T12:28:04.673

制作一个 .png 文件（或 .gif，如果您愿意的话），然后简单地将其覆盖在`div`您想要此模式的文件上。

> 您需要使用相对位置设置父元素，然后在要定位的元素上使用绝对位置。因此，如果您希望它基于表格定位，您需要添加 position: relative to the table （这不会做任何事情，因为它已经相对定位）和 position: absolute 叠加。绝对定位将元素从文档流中取出，而相对定位将其留在文档流中，这就是为什么要移动内容的原因。其原因是基于 CSS 的工作原理：[http ://www.w3schools.com/css/pr_class_position.asp](http://www.w3schools.com/css/pr_class_position.asp)
> 
> relative 元素是相对于它的正常位置定位的，所以 "left:20" 在元素的 LEFT 位置上增加了 20 个像素
> 
> absolute 元素相对于它的第一个定位（非静态）祖先元素定位
> 
> *来源：[位置叠加 div](https://stackoverflow.com/questions/6145903/position-overlay-div/6146021#6146021)*

代码示例：

```
<div class="overlay">
    <div class="overlay-content">
    </div>
    Content goes here
</div> 
```

对于CSS：

```
div.overlay{
    position: relative;
}

div.overlay-content{
    position: absolute;
    top: 0;
    left :0;
    width: 100%;
    height: 100%;
    background: url(path/to/image.png) repeat top left;
    pointer-events:none; /* To be able to click through */
} 
```

关于点击槽，看看这个答案：[点击一个DIV到底层元素](https://stackoverflow.com/questions/3680429/click-through-a-div-to-underlying-elements)

# transactions - 工作流基础、事务和书签

> ID：14030375
> 
> 赞同：4
> 
> 时间：2012-12-25T11:50:44.907
> 
> 标签：transactions, workflow, workflow-foundation

我们正在使用 Workflow Foundation 4 开发一个应用程序。我们希望使用多个活动，每个活动都在事务中进行数据库更新。我们还想暂停和恢复工作流程。停顿可能会持续很长时间。为了确保**一致性**，我们希望确保在提交事务之前创建了一个关于在哪里恢复工作流的书签。这是可能吗？或者关于如何很好地实施这一点的任何其他建议？

问候

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T15:25:58.660

WF4 有一个`TransactionScope`活动，您可以使用它来执行数据库调用。但是，它不支持在`TransactionScope`序列中创建书签。一种解决方法是使用临时表来临时存储长时间运行的进程的正在进行的数据，工作流在恢复时可以从中读取。一切就绪后，您就可以将暂存表中的数据写入您的真实存储。

# java - 用循环处理棋盘游戏领域？

> ID：14030384
> 
> 赞同：1
> 
> 时间：2012-12-25T11:52:16.530
> 
> 标签：java, android

这是我在这里的第一个问题。我正在 Android 上写一个简单的游戏（我的第一个）。这是一个有 64 个字段的棋盘游戏。现在，每次单击一个字段时，都需要做一些事情。我想出了一种方法来做到这一点：

```
switch(v.getId()) {
case R.id.field1:
...
...
...
} 
```

它正在工作，但对于 64 个字段来说有点烦人。我可以以某种方式检索字段 ID 并循环执行吗？

```
findViewById(R.id.field+i).doSomething(); 
```

我知道不能这样做，我只是想说明我的想法。以下将在 Javascipt 中使用，但如何在 Java 中执行？可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-25T14:23:37.890

AFAIK 无法使用 Eclipse 中的 Android 布局编辑器来执行此操作。最简单的方法是以编程方式创建视图并将它们存储在集合或数组中：

```
TextView[] fields = new TextView[64];
for (int i = 0; i < 64; i++) {
    TextView textView = new TextView(context);
    textView.setText("Programmatic TextView");
    parentLayout.addView(textView, new LayoutParams(LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT));
    fields[i] = textView;
} 
```

您可以在布局编辑器中创建 parentLayout 视图。

# c# - IDE删除了乘除运算符周围的空格，如何保留它们？

> ID：14030385
> 
> 赞同：9
> 
> 时间：2012-12-25T11:52:24.893
> 
> 标签：c#, visual-studio-2012, resharper, resharper-7.0

我正在使用带有 ReSharper 的 Visual Studio，每当我写类似的东西时

```
a * b 
```

它变成了

```
a*b 
```

它是 Visual Studio 设置还是 ReSharper 设置？我究竟应该改变什么？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-12-25T11:52:24.893

转到 ReSharper -> 选项 -> 代码编辑 -> C# -> 格式化样式 -> 空格。

在“周围运算符”部分中，选中“乘法运算符 (*,/,%)”旁边的框。

# android - FrameLayout 孩子自动移动

> ID：14030391
> 
> 赞同：0
> 
> 时间：2012-12-25T11:52:58.773
> 
> 标签：android, android-framelayout

我有一个布局，其父级是 FrameLayout，有 2 个子级。第一个孩子是 ListView，第二个孩子也是 ListView。众所周知，第二个孩子涵盖了第一个孩子。我以编程方式移动第二个孩子以显示部分第一个孩子。同时我更新了listview（需要在看到它时更新listview）第二个孩子自动移动到它的默认位置（左上角-0,0）。

实际上，第二个孩子应该在我移动的地方，不应该回到默认位置。而且，要更改列表视图内容，我正在设置适配器（我也使用了 notifyDataSetChanged，但结果相同）。

有谁知道怎么让二胎不动？？？

这是xml：

```
<FrameLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:id="@+id/ms_complete"
    android:layout_width="wrap_content"
    android:layout_height="match_parent"
    android:background="@color/message_background" >

<!-- first child -->
<ListView
            android:id="@+id/options"
            android:layout_width="match_parent"
            android:layout_height="match_parent"
            android:focusableInTouchMode="false"
            android:scrollbars="none"
            android:smoothScrollbar="true" >
</ListView>

<!-- second child -->

<ListView
                android:id="@+id/msgs"
                android:layout_width="match_parent"
                android:layout_height="match_parent"
                android:background="@color/message_background"
                android:focusableInTouchMode="false"
                android:smoothScrollbar="true" >
</ListView>

</FrameLayout> 
```

# android - Droid2600（Android Atari 2600 模拟器）运行时错误

> ID：14030397
> 
> 赞同：1
> 
> 时间：2012-12-25T11:53:23.687
> 
> 标签：android, emulation, sdl

在我编译[源代码](http://code.google.com/p/droid2600/)、启动应用程序并尝试启动游戏 (ROM) 后，应用程序崩溃了。如果我安装[apk](http://code.google.com/p/droid2600/downloads/list)而不是自己编译一个，并尝试运行相同的 ROM，一切正常。我可能会做错什么？这是我得到的错误：

```
12-25 13:19:52.170: E/AndroidRuntime(7878): FATAL EXCEPTION: main
12-25 13:19:52.170: E/AndroidRuntime(7878): java.lang.UnsatisfiedLinkError: Library sdl not found
12-25 13:19:52.170: E/AndroidRuntime(7878):     at java.lang.Runtime.loadLibrary(Runtime.java:461)
12-25 13:19:52.170: E/AndroidRuntime(7878):     at java.lang.System.loadLibrary(System.java:557)
12-25 13:19:52.170: E/AndroidRuntime(7878):     at com.droid2600.LoadLibrary.<init>(Globals.java:41)
12-25 13:19:52.170: E/AndroidRuntime(7878):     at com.droid2600.MainActivity.onCreate(MainActivity.java:38)
12-25 13:19:52.170: E/AndroidRuntime(7878):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
12-25 13:19:52.170: E/AndroidRuntime(7878):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2627)
12-25 13:19:52.170: E/AndroidRuntime(7878):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2679)
12-25 13:19:52.170: E/AndroidRuntime(7878):     at android.app.ActivityThread.access$2300(ActivityThread.java:125)
12-25 13:19:52.170: E/AndroidRuntime(7878):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2033)
12-25 13:19:52.170: E/AndroidRuntime(7878):     at android.os.Handler.dispatchMessage(Handler.java:99)
12-25 13:19:52.170: E/AndroidRuntime(7878):     at android.os.Looper.loop(Looper.java:123)
12-25 13:19:52.170: E/AndroidRuntime(7878):     at android.app.ActivityThread.main(ActivityThread.java:4627)
12-25 13:19:52.170: E/AndroidRuntime(7878):     at java.lang.reflect.Method.invokeNative(Native Method)
12-25 13:19:52.170: E/AndroidRuntime(7878):     at java.lang.reflect.Method.invoke(Method.java:521)
12-25 13:19:52.170: E/AndroidRuntime(7878):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:860)
12-25 13:19:52.170: E/AndroidRuntime(7878):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:618)
12-25 13:19:52.170: E/AndroidRuntime(7878):     at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T10:07:12.000

感谢 Dave 和 Chris 的提示，你们都是对的，我完全忘记了 NDK。如果有人偶然发现了这个确切的问题：从现有的 .apk 中获取 .so 文件比编译那些 Stella 源要容易得多，相信我。

# web - CMS的SEO标准

> ID：14030398
> 
> 赞同：0
> 
> 时间：2012-12-25T11:53:42.647
> 
> 标签：web, seo

我是一名网络程序员，我的朋友是一名 SEO 优化师。他说：您手工制作的 CMS 可能不利于 SEO 优化；我只信任大型 CMS，因为它们是在考虑 SEO 的情况下创建的。但他不知道“成为一个有利于 SEO 优化的系统”的标准。有他们的清单吗？也许一些CMS的证书？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T07:01:53.300

我部分同意你的朋友，因为如果你遵循下面列出的基本 SEO 标准，创建手工 CMS 没有害处：

你应该能够：

*   在每个页面中添加唯一的标题元（如果页面数量很大，您应该能够通过替换产品名称、类别等来动态添加它们）
*   添加不带查询字符串的唯一页面名称（有意义的名称）
*   将内容添加到相应的页面
*   它允许用户生成 sitemap.xml、谷歌分析和其他跟踪脚本插入，如果需要，您还可以生成谷歌 FEED（电子商务网站）。

这些是一些基本和重要的要求。如果您认为可以处理这些问题，请使用定制的 CMS。

# php - 没有在 Wordpress 3.4 中获取登录用户 ID

> ID：14030401
> 
> 赞同：1
> 
> 时间：2012-12-25T11:54:03.707
> 
> 标签：php, wordpress

我正在使用 Paypal 插件并根据我的要求对其进行修改。为此，我想在 payment.php 页面上获取当前用户的用户 ID；我尝试了各种功能，例如`wp_get_current_user()`，等`is_logged_in()`，`get_current_user_id()`但我没有在付款页面中获取用户 ID。

我在其他页面上获取用户 ID。

下面是支付页面的代码

```
public static function insert_payment( $data, $transaction_id = 0 ) {
        global $wpdb;

        $sql = "SELECT transaction_id
                FROM " . $wpdb->prefix . "wpuf_transaction
                WHERE transaction_id = '" . $wpdb->escape( wpuf_clean_tags( $transaction_id ) ) . "' LIMIT 1";

        $result = $wpdb->get_row( $sql );
        $tran = $wpdb->escape( wpuf_clean_tags( $transaction_id ) );
    if($tran !="")
    {

        if ( !$result ) 
        {
                $log_user_id=get_current_user_id(); // Not Getting user id here
                $log_user_id = $data['user_id'];
                $find_user_id = $wpdb->get_row("SELECT user_id FROM " . $wpdb->prefix . "wpuf_transaction WHERE user_id=".$log_user_id);                
                $find_user_id123 =  $find_user_id->user_id;
                if($find_user_id123=='')
                {
                    $wpdb->insert( $wpdb->prefix . 'wpuf_transaction', $data );
                    do_action( 'wpuf_payment_received', $data );
                }
                else
                {
                     $wpdb->update( $wpdb->prefix . 'wpuf_transaction', $data, array('user_id' => $log_user_id) );
                }
        }

}
} 
```

任何帮助将不胜感激; 提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-25T11:58:14.920

试试这个，

```
global $current_user;
get_currentuserinfo();
$log_user_id = $current_user->ID; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-25T13:20:03.680

您可以使用 like ，有时我们会遇到一些语法错误拼写错误：

[参考](http://codex.wordpress.org/Function_Reference/get_currentuserinfo)

# java - 〜在java代码中是什么意思？

> ID：14030406
> 
> 赞同：-1
> 
> 时间：2012-12-25T11:54:57.897
> 
> 标签：java

> **可能重复：**
> [这个波浪号是什么意思？](https://stackoverflow.com/questions/4887876/what-does-this-tilde-mean)

我正在使用 IntelliJ，发现它可以重构我的以下代码

```
Handle<String> handle = new Handler<String>() {} 
```

至`Handler<String> handler = new Handler<~>() {}`

上面的~是什么意思？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-25T12:04:38.437

这是 IntelliJ IDEA 使用的类型参数的折叠。它是一种方便您观看的简写语法，而不是有效的 Java 语法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-25T11:56:48.560

在 Java`Handler handler = new Handler<~>() {}`中意味着语法错误，仅此而已

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-25T11:59:50.880

```
Handler<String> handler = new Handler<~>() {}; 
```

不会编译它没有任何意义（除了醒目的效果）。

`~`是一元运算符，表示二进制补码运算符，它具有“翻转”位的效果。(~A ) 将给出 -60 即 1100 0011

**编辑**

根据@Jan Dvorak 的说法，这个问题在说明 IDE 建议将其作为重构时是不正确的。

# iphone - iphone中具有相对位置的搜索按钮

> ID：14030409
> 
> 赞同：0
> 
> 时间：2012-12-25T11:55:05.840
> 
> 标签：iphone, html, css

我的 iPhone 和搜索框有问题。搜索框的按钮是双倍的。您可以在这里查看： http: [//213927.allegros.web.hosting-test.net](http://213927.allegros.web.hosting-test.net)（没有回收或垃圾邮件）。

我不明白为什么会这样，我不知道如何解决它。

如果您有 iPhone 并且没有此问题，请发送屏幕截图和您的版本。

如果您知道为什么会这样以及如何解决它，请告诉我原因。

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-25T13:31:53.780

如果您以编程方式设置图像大小，这里有一个链接显示如何缩放图像以使其正常工作[http://www.icab.de/blog/2010/10/01/scaling-images-and-creating-来自uiviews的缩略图/](http://www.icab.de/blog/2010/10/01/scaling-images-and-creating-thumbnails-from-uiviews/)

您可以尝试将图像缩小一半，然后尝试以这种方式实现它，看看它是否仍被缩放为想要的大小。

# c# - VS2010如何在安装程序中打包DB文件

> ID：14030411
> 
> 赞同：2
> 
> 时间：2012-12-25T11:55:08.193
> 
> 标签：c#, sql-server, visual-studio-2010, visual-studio, c#-4.0

问题：

我正在开发 Visual Studio 2010 Premium，我知道不可能添加本地数据库。出于这个原因，数据库是通过服务器资源管理器 > 添加连接添加的。

我的数据库文件保存在：C:\Program Files\Micrisoft SQL Server\MSSQL10.SQLEXPRESS\MSSQL\DATA\ContactDB.mdf

当需要制作应用程序的安装程序时它将如何编译。如果 VS 在 1 个包中编译全部 - 源代码和 DB 文件？制作应用程序安装程序时的最佳实践 - 如果通过服务器资源管理器 > 添加连接添加数据库。

带着敬意！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T15:00:44.617

好吧，据我所知，mdf 文件已添加到您的项目中。如果未添加，请检查 mdf 文件属性`Copy to output Directory`。这需要设置`Copy Always`以确保您的 mdf 文件被复制到输出文件夹。

这是使用数据库部署应用程序的另一种方法。

[部署您的应用程序和数据库](http://www.codeproject.com/Articles/16231/Deploy-your-Application-and-Database)

您还可以在部署应用程序时使用脚本从头开始创建数据库。检查这篇 msdn 文章

[指定部署前或部署后脚本](http://msdn.microsoft.com/en-us/library/aa833410.aspx)

# c# - Random.NextDouble 方法能否返回“1.0”？

> ID：14030414
> 
> 赞同：3
> 
> 时间：2012-12-25T11:55:17.167
> 
> 标签：c#, random, numbers

在[文档](http://msdn.microsoft.com/en-us/library/system.random.nextdouble.aspx) `Random.NextDouble`中写道

**返回一个介于 0.0 和 1.0 之间的随机数。**

我想问一下，它是否有可能`1`在任何情况下都会返回？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-12-25T11:56:36.537

否 - 根据文档，零包含在内，但 1 不是：

> 大于或等于 0.0 且小于 1.0 的双精度浮点数。

[MSDN](http://msdn.microsoft.com/en-us/library/system.random.nextdouble.aspx)

# php - 在 PHP 中发布信息并取回响应

> ID：14030416
> 
> 赞同：-1
> 
> 时间：2012-12-25T11:55:42.540
> 
> 标签：php, curl

> **可能重复：**
> [不使用表单将文件上传到服务器？](https://stackoverflow.com/questions/6036799/upload-a-file-to-server-without-using-a-form)
> [通过 PHP curl 发布文件](https://stackoverflow.com/questions/6048144/posting-a-file-via-php-curl)

我有一个大小为 10 KB 的 xml 文件。如何使用 http post 方法将此 xml 文件的内容发送到其他域的其他页面？我在带有 XAMPP 的 Windows 中使用 PHP 5.3，我可以使用 CURL 扩展。我无法使用放置 php_http.dll 后可以使用的 Http_Request 方法。有人可以帮助使用本机 PHP 或 CURL 扩展的任何替代方案，以便我可以使用 http 和 http 请求将此 xml 内容发布到某个地方。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-25T12:08:26.323

```
<?php
$ch = curl_init('http://url.com/post.php');
curl_setopt($ch, CURLOPT_POST, true);
curl_setopt($ch, CURLOPT_POSTFIELDS, 'xml=' . file_get_contents('xml.xml'));
curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
$data = curl_exec($ch);
echo $data;
?> 
```

我相信这就是你想要的？除非你的意思是文件上传。

# jquery - 动画之间有暂停的图像幻灯片

> ID：14030417
> 
> 赞同：0
> 
> 时间：2012-12-25T11:55:46.110
> 
> 标签：jquery, queue

我们尝试使用 fxqueue js 来模拟图像幻灯片的暂停效果。

但是 fxqueue js 只支持 jquery 1.3.2。

我们能够管理该 jquery 版本中的暂停行为。但它不适用于当前的 jquery 版本。

[http://archive.plugins.jquery.com/project/fxqueues](http://archive.plugins.jquery.com/project/fxqueues)

是否有任何其他方法/插件可以模仿暂停行为并在播放按钮后从该点继续该动画。

**更新：请检查下面的 jsfiddle。它适用于硬编码的 ID。但我们需要处理动态 ID 的队列。**

jsfiddle.net/4wSmP/3/

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-25T13:43:06.077

`callback`如果适合您的要求，您可以尝试效果功能。

当效果完成时，它会调用`callback`（*您可以在其中放置延迟*）并以这种方式链接效果。

例如：

> **[.show( 持续时间 [, 回调] )](http://api.jquery.com/show/)**
> 
> 持续时间一个字符串或数字，确定动画将运行多长时间。
> 
> 回调动画完成后调用的函数。

# ios - Google Maps SDK for iOS 尝试在 iOS 4.3 上运行

> ID：14030418
> 
> 赞同：5
> 
> 时间：2012-12-25T11:55:48.763
> 
> 标签：ios, google-maps-sdk-ios

我成功地将它`sdk`与我的应用程序集成。我的应用程序旨在与4.3 和 5.x一起运行`Google Maps sdk for iOS6`，并与 Apple`UIMapKit`一起运行。`iOS`由于我添加了`google maps`框架，ios 4.3 将不再运行。我将`GLKit.framework`and更改`GoogleMaps.framework`为“可选”，`dyld: Symbol not found: _NSFileProtectionCompleteUntilFirstUserAuthentication`甚至在应用程序启动之前就得到了。需要你的帮助 ：-）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-28T05:12:31.020

我的应用程序在 iOS 4.3 上运行良好，`GLKit.framework`并且`GoogleMaps.framework`设置为可选，如果我删除了对 Google API 的所有调用。

引用`NSFileProtectionCompleteUntilFirstUserAuthentication`可能是由您的其他代码或其他框架引起的吗？

**更新：**

其实上面的说法是错误的。我忘记在[说明](https://developers.google.com/maps/documentation/ios/start#adding_the_google_maps_sdk_for_ios_to_your_project)`-ObjC`的第 7 步中包含链接器标志。没有该应用程序能够在 iOS 4.3 上正常运行。如果没有iOS 6 上的标志，调用会成功，但调用会静默失败（返回 nil），所以这不是一个选项。`-ObjC``-ObjC``[GMSServices provideAPIKey]``[GMSMapView mapWithFrame:camera:]`

设置好`-ObjC`标志后，在 iOS 4.3 上，我收到关于`_NSFileProtectionCompleteUntilFirstUserAuthentication`.

我尝试更改`-ObjC`为`-force_load $(PROJECT_DIR)/GoogleMaps.framework/GoogleMaps`, 仅强制加载 Google Maps API 而不是其他库，但它在 iOS 4.3 上仍然失败。

我认为`-ObjC`or`-force_load`正在覆盖设置以使其成为`GoogleMaps.framework`可选。

此外，在 iOS 5.0 上，我收到关于`_NSURLIsExcludedFromBackupKey`. 不过，我假设它可以在 iOS 5.1 上运行。@tomeron11，您测试的是哪个版本的 5.x？

**更新 2：**

这感觉像是一个可怕的 hack，但是将以下内容添加到项目中的一个 .m 文件中可以使其在 iOS 5.0 上运行：

```
NSString* const NSURLIsExcludedFromBackupKey = @"NSURLIsExcludedFromBackupKey"; 
```

这似乎不会*在*iOS 6.0 上引起问题，即使该符号将被定义两次，尽管我不确定它是否可以信任。

对于 iOS 4.3，我尝试通过添加：

```
NSString* const NSFileProtectionCompleteUntilFirstUserAuthentication = 
    @"NSFileProtectionCompleteUntilFirstUserAuthentication"; 
```

这将停止关于 的错误`_NSFileProtectionCompleteUntilFirstUserAuthentication`，但随后我收到以下错误：

```
dyld: Symbol not found: _OBJC_CLASS_$_NSMutableOrderedSet 
```

我不确定是否有办法让链接器在 iOS 4.3 上看到 NSMutableOrderedSet 的虚拟版本。

**更新 3：**

SDK 文档说[支持的最低平台是 iOS 5.1](https://developers.google.com/maps/documentation/ios/intro#supported_platforms)。

Google 已将[错误报告作为 WontFix 关闭](http://code.google.com/p/gmaps-api-issues/issues/detail?id=4750#c1)，因此似乎无法让它在 5.0 或更低版本上运行。

**更新 4：**

谷歌已经[重新打开了这个错误作为一个增强](http://code.google.com/p/gmaps-api-issues/issues/detail?id=4750#c4)。

**更新 5：**

SDK 的最新版本 1.1.0 现在不再在 iOS 5.0 上启动时崩溃。

但是，[Google 不会修复 iOS 4.x 上的崩溃问题](http://code.google.com/p/gmaps-api-issues/issues/detail?id=4750#c6)。

由于 SDK 仅正式支持 iOS 5.1+，虽然它在 iOS 5.0 上不再在启动时崩溃，但如果您尝试创建一个`GMSMapView`然后它会崩溃并显示错误消息：

> 适用于 iOS 的 Google Maps SDK 仅支持 iOS 5.1+

如果您使用 hack 使其在 5.0 启动时不会崩溃，即：

```
NSString* const NSURLIsExcludedFromBackupKey = @"NSURLIsExcludedFromBackupKey"; 
```

然后 SDK 将在 iOS 5.0 上运行。它似乎有效，但这可能不是一个好主意，因为它没有得到谷歌的官方支持。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-27T10:54:18.460

我 Foundation.framework 和 UIKit.framework（UIActivityViewController 在 1.5 GMSdk 中也崩溃了.....）设置为“选项”模式（在组合框中看不到弱点）。NSMutableOrdererSet 和 NSURLIsExcludedFromBackupKey 位于这个框架组件中。我不检查这个解决方案在 ios less 5.0 上是如何工作的，但是从 5.0 到 6.0 没有崩溃，或者请不要使用从 5 到 6 的 Google Map SDK 而不是这个 MKMapView！

PS对不起我的英语不好！

# php - codeigniter中的json中还有其他字符

> ID：14030419
> 
> 赞同：-1
> 
> 时间：2012-12-25T11:55:48.787
> 
> 标签：php, json, codeigniter, jquery

我想在 codeigniter 上使用 ajax 和 json 将数据输入数据库后显示信息。ut 从 json 返回的数据包含**双引号字符 ("")**，以下控制器和在 codeigniter me 中查看 ajax。

控制器：

```
public function simpanMenuMakanan() {
    $nama_makanan = $this->input->post('nama-menu-makanan');
    $harga_makanan = str_replace(".", "", $this->input->post('harga-makanan'));
    $jenis_makanan = $this->input->post('jenis-makanan');
    $data = array(
        'nama_makanan' => $nama_makanan,
        'harga_makanan' => $harga_makanan,
        'id_jenis_makanan' => $jenis_makanan
    );
    $simpan = $this->makanan_model->tambahMenuMakanan($data);
    if ($simpan) {
        $result = $nama_makanan . ' berhasil ditambah ke list menu makanan';
        echo json_encode($result);
    }
} 
```

查看javascript ajax：

```
 $.ajax({
            type: 'POST',
            url: "<?php echo base_url(); ?>makanan/simpanmenumakanan",                        
            data: $(this).serialize(),               
            success: function(html){
                // other statement                   
                $('#result').text(html);
                // other statement
            }
        }); 
```

我提交后会出现 info **"xxx berhasil ditambah ke list menu makanan"**，但问题是有一个双引号字符，我想在没有任何双引号的情况下调出这样的信息**xxx 成功添加到食物菜单列表**.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-25T12:04:39.863

如果`$nama_makanan`不是数组并且你想从php返回字符串，那么你不需要使用`json_encode()`，只需尝试这样做：

```
//in your function
$result = $nama_makanan . ' berhasil ditambah ke list menu makanan';
echo $result; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-25T12:12:11.173

改变

```
 echo json_encode($result); 
```

到

```
 echo $result;
 return false; 
```

json_encode 用于数组，特别是多维关联数组。对于字符串或任何字符或二进制字符，它没有必要......

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-25T12:07:05.153

做

```
$('#result').text(JSON.parse(html)); 
```

在ajax成功回调中达到你想要的结果？

但是，看起来您并没有真正返回 JSON（我不熟悉 CodeIgniter，所以我可能读错了），因此您可以只返回原始字符串，然后就不需要**JSON.parse**了。

# objective-c - 如何以编程方式存储 Facebook AppID 密钥

> ID：14030420
> 
> 赞同：3
> 
> 时间：2012-12-25T11:55:54.477
> 
> 标签：objective-c, ios, facebook-ios-sdk

正如我们所知，对于 Facebook SDK，我们应该在 App Plist 中提供**URL 类型**和**FacebookAppID键。**

我的问题是如何以编程方式存储它们而无需在 plist 中手动输入它们，就像在`UIApplicationDelegate`方法中一样`didFinishLaunchingWithOptions`。

我尝试使用它来设置它，`NSUserDefaults`但它一直给出这个错误：

```
No AppID provided; either pass an AppID to init, or add a string valued key with the appropriate id named FacebookAppID to the bundle *.plist' 
```

我不知道为什么，但我猜 Xcode 使用`NSUserDefaults`默认应用程序 Plist 将密钥存储在其他地方。

有谁知道如何解决这一问题？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-06-14T00:10:53.570

这似乎对我有用，可以设置 App ID：

```
[FBSettings setDefaultAppID: @"123456789"]; 
```

我不知道 URL 类型是否有类似的东西。但是，我可以想象注册 URL 类型是 iOS 在安装应用程序时所做的事情，因此如果是这种情况，它可能需要在 plist 文件中而不是在代码中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-25T13:20:58.777

由于某种原因，它不安全。获取您的应用 plist 文件并阅读所有信息非常**容易。**您应该确保您的应用程序私钥安全。但如果你真的想这样做，你可以从你的 plist 文件中解析数据：

```
NSString *path = [[NSBundle mainBundle] pathForResource:@"yourPlistFileName" ofType:@"plist"];

NSDictionary *dict = [[NSDictionary alloc]initWithContentsOfFile:path];

NSLog(@"You app key is %@",[dict objectForKey:@"yourKeyFromPlist"]); 
```

在所有应用程序中存储共享内容的最简单方法是使用 NSUserDefaults。但不要忘记在进行任何更改后调用**同步。**[这是 NSUserDefaults 文档。](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSUserDefaults_Class/Reference/Reference.html "在这里你可以看到文档")我认为这不是将任何数据写入您的 plist 的好解决方案，但如果您真的想要，这里有一个代码：

```
NSString* plistPath = nil;
NSFileManager* manager = [NSFileManager defaultManager];
if ((plistPath = [[[NSBundle mainBundle] bundlePath] stringByAppendingPathComponent:@"yourPlistFileName.plist"])) 
{
    if ([manager isWritableFileAtPath:plistPath]) 
    {
        NSMutableDictionary* infoDict = [NSMutableDictionary dictionaryWithContentsOfFile:plistPath];
        [infoDict setObject:@"your key value" forKey:@"Your Key"];
        [infoDict writeToFile:plistPath atomically:NO];
        [manager setAttributes:[NSDictionary dictionaryWithObject:[NSDate date] forKey:NSFileModificationDate] ofItemAtPath:[[NSBundle mainBundle] bundlePath] error:nil];
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-09-02T11:30:46.363

以下是我在 Swift 中为 Facebook SDK 解决的方法：

```
var appid: NSMutableDictionary = ["FacebookAppID": "123456789"]
var plistPath = NSBundle.mainBundle().pathForResource("Info", ofType: "plist")
appid.writeToFile(plistPath!, atomically: true)

var appName: NSMutableDictionary = ["FacebookDisplayName": "AppName-Test"]
appName.writeToFile(plistPath!, atomically: true)

var urlStuff = NSMutableDictionary(contentsOfFile: plistPath!)
var urlType = NSDictionary(objectsAndKeys: "com.appprefix.AppName", "CFBundleURLName", NSArray(object: "fb123456789"), "CFBundleURLSchemes")
urlStuff?.setObject(NSArray(object: urlType), forKey: "CFBundleURLTypes")
urlStuff?.writeToFile(plistPath!, atomically: true) 
```

您应该使用您自己的 FB 内容更改我输入的占位符值。

# actionscript-3 - 如何使用类属性（外部代码.as）使用 nextScene.gotoandplay 链接

> ID：14030428
> 
> 赞同：1
> 
> 时间：2012-12-25T11:56:38.327
> 
> 标签：actionscript-3, flash, flash-cs5

我尝试这段代码，但我得到了错误

```
package  {

                        import flash.display.SimpleButton;
                        import flash.display.MovieClip;
                        import flash.events.MouseEvent;

                        public class np extends SimpleButton {

                        public function np() {
                                                this.addEventListener(MouseEvent.CLICK, clickF);
                                                }
                                                private function clickF(e:MouseEvent):void{
                                                MovieClip(this.root).nextScene(),gotoAndStop(1);

                        }
            }

} 
```

调用可能未定义的方法 gotoanStop

注意：只是我想去下一个场景

# php - Codeiginter : 未定义的属性类::$load

> ID：14030431
> 
> 赞同：0
> 
> 时间：2012-12-25T11:56:58.353
> 
> 标签：php, codeigniter

我正在使用 codeigniter MVC 开发一个项目，并在创建控制器并尝试在其构造函数中加载模型时遇到一个奇怪的问题

```
require_once("secure_area.php");
class posstatics extends Secure_area{
    function __construct(){
        $this->load->model('sale'); //at this i am getting the error saying undefined prop
    }
} 
```

secure_area.php 文件扩展了 CI_Controller，同样适用于应用程序的其他部分，但是这个类给我带来了麻烦:(

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-25T12:00:05.170

首先，您不需要手动要求，codeigniter 会自动处理。

假设 Secure_area 扩展了 CI_Controller，则需要调用 super 方法。

```
class posstatics extends Secure_area{
    function __construct(){
        parent::__construct();
        $this->load->model('sale'); //at this i am getting the error saying undefined prop
    }
} 
```

# asp.net - ASP.Net httpmodule 私有属性表现为静态？

> ID：14030439
> 
> 赞同：0
> 
> 时间：2012-12-25T11:57:47.413
> 
> 标签：asp.net, properties, static, httpmodule

我以这种方式在附加到 PostAuthenticateRequest 的 httpmodule 中声明了一个私有属性：

```
Private Property roles as New List(Of Integer) 
```

然后在模块的各种方法中，我以这种方式向 List 添加了一个角色：

```
roles.Add(AppSettings.AnonymousRoleId) 
```

但我遇到了一个奇怪的行为......每次我刷新页面时，角色列表都会变长，总是添加相同的角色，就像在每次页面刷新时记住私有财产角色一样。就像应用程序静态变量一样。这个属性不应该是模块私有的吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-25T12:49:47.907

PostAuthenticateRequest 事件可能在每页被调用多次。看这里[PostAuthenticateRequest 触发几次](https://stackoverflow.com/questions/3195972/postauthenticaterequest-fires-several-times)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-25T19:19:14.687

好的，我对此进行了一些其他测试，但我遇到了一个非常奇怪的行为....

如果模块至少被读取一次，我尝试实现一个标志来跳过模块中的处理。我这样做只是以这种方式在 HttpContext.Current.Items 中放置一个标志变量：

```
 Private Sub Application_PostAuthenticateRequest(ByVal source As Object, ByVal e As EventArgs)
        ' A flag to prevent multiple execution on each request for static files like images, css, js
        If HttpContext.Current.Items("UserCheck") Is Nothing AndAlso _
        DirectCast(HttpContext.Current.Items("UserCheck"), String) <> "1" Then
            GlobalAppSettings.debug += 1 
```

GlobalAppSettings.Debug 是我用于调试 httpmodules 目的的静态（vb 共享）属性。现在有了这段代码，每次页面刷新时调试变量应该是+1（我在 Default.aspx 后面的代码中使用简单的 Response.Write(GlobalAppSettings.debug) 进行检查。这是因为在 Application_PostAuthenticateRequest 的末尾方法我设置 HttpContext.Current.Items("UserCheck") = "1"

那么为什么在每个页面上刷新 GlobalAppSettings.debug 变量以 3 或 5 步递增？快把我逼疯了

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-25T21:58:23.133

好的，我想我找到了所有问题的答案。对 HttpContext.Current.Items("UserCheck") 的检查不起作用，因为对 jpg、css、js 的每个请求都会触发它自己的 HttpContext，因此这种方式没有使用全局标志。

经过一番搜索，我找到了一个更干净、更传统的解决方案。如果您不希望您的模块在 stati 内容请求中被触发（其中包括页面中的静态资源），您必须在以下部分的 web 配置中进行设置：

```
 <modules runAllManagedModulesForAllRequests="false"> 
```

您还必须向模块添加属性：precondition="managedHandler"。例子：

```
 <add name="ReadUserSettings" type="namespace.to.type" preCondition="managedHandler" /> 
```

出于某种原因，我的 web.config 中没有这些设置。现在我遇到了另一个小问题，但现在我对发生的事情有了更好的了解，我想我应该就这个主题打开一个更具体的话题，那就是如何排除 .axd 处理程序（或只是 WebResources.axd 处理程序会做）从触发我的自定义模块，因为 .axd 处理程序受到威胁具有托管代码，因为它具有 preCondition="integratedMode,runtimeVersionv4.0" ，这就是它应该的样子。我只是不希望我的模块被它或其他 .axd 触发。

# ios - 如何使用 Xcode For iOS 应用程序创建自定义框架

> ID：14030442
> 
> 赞同：0
> 
> 时间：2012-12-25T11:58:07.853
> 
> 标签：ios, xcode, frameworks

如何使用 Xcode 创建自定义框架并将其与 iOS 应用程序一起使用？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-12-25T13:55:47.753

这可能会有所帮助：[通用框架 iPhone iOS](http://db-in.com/blog/2011/07/universal-framework-iphone-ios-2-0/)

# sitecore - 带有 Sitecore 的 Glass 中的图像列表

> ID：14030444
> 
> 赞同：5
> 
> 时间：2012-12-25T11:58:09.880
> 
> 标签：sitecore, sitecore6, glass-mapper

我正在使用[Glass 库](http://www.glass.lu)作为 Sitecore 的 ORM。我有一个包含图像列表的图像字段。因为我想从我的 .NET 代码中访问它，所以我编写了一个部分类，其中包含如下字段图像：

```
[SitecoreField]
public virtual IEnumerable<Glass.Sitecore.Mapper.FieldTypes.Image> Images { get; set;} 
```

但是在加载这个时我得到了错误。

```
The method or operation is not implemented. 
```

我可以通过 Glass 访问单个图像，而无需编写任何额外的代码。

任何人都可以建议解决这个问题吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-28T06:27:20.977

我们的架构师在 Glass 库创建者的帮助下解决了这个问题。解决方案是这样的..

```
 [SitecoreField]
    public virtual IEnumerable<MediaImage> Images { get; set;} 
```

Media Image 是这样的类：

```
 [SitecoreClass]
public class MediaImage
{
    [SitecoreField("Attachment")]
    public virtual Stream Image { get; set; }

    [SitecoreInfo(SitecoreInfoType.MediaUrl)]
    public virtual string Url { get; set; }

    [SitecoreField("Alt")]
    public virtual string Alt { get; set; }
} 
```

这已经解决了这个问题，我现在正在获取图像列表。

# php - FOSRestBundle 和 Mongodb 游标对象到 json

> ID：14030447
> 
> 赞同：0
> 
> 时间：2012-12-25T11:58:32.177
> 
> 标签：php, mongodb, rest, symfony

我目前正在使用带有 FOSRestBundle 的 Symfony2 开发 RESTful API。

我喜欢 Mongodb，所以我已经实现了，这是我的用户控制器的片段。

```
 /**
   * @return View view instance
   * @View()
   */
  public function allAction() {
    $users = $this->get('doctrine_mongodb')
      ->getRepository('FantasytdUserBundle:User')
      ->findByUsername('Elvar');

    return $users;
  } 
```

所以我在数据库中找到了一个用户，这会产生一个结果。如果使用 mysql 数据库完成此操作，则此代码段将起作用。但是对于 mongodb，get 方法会返回一个 Cursor 对象，当它返回时，你会得到类似这样的东西。

```
[{"message":"[Semantical Error] Annotation @Secure is not allowed to be declared on class JMS\\SecurityExtraBundle\\Annotation\\Secure. You may only use this annotation on these code elements: METHOD.","class":"Doctrine\\Common\\Annotations\\AnnotationException","trace":[{"namespace":"","short_class":"","class":"","type":"","function":"","file":"\/Users\/Elvar\/Projects\/fantasytd\/backend\/vendor\/doctrine\/common\/lib\/Doctrine\/Common\/Annotations\/AnnotationException.php","line":52,"args":[]}, 
```

它还在继续。

我应该如何处理这些光标对象？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-25T12:26:49.840

显然，如果结果只产生一个结果，它就可以工作，因此使用 FindOneByUsername() 可以解决问题。

如果您需要多个结果，我通过循环解决了它。

```
 public function allAction() {
    $usersQ = $this->get('doctrine_mongodb')
      ->getRepository('FantasytdUserBundle:User')
      ->findByUsername('Elvar');

    foreach ($usersQ as $user) {
      $users[] = $user;
    }

    return $users;
  } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-08-05T18:21:47.480

我们没有使用 foreach 循环遍历列表，而是在 Cursor 对象上使用“->toArray()”——它更简单一些。我相信 iterator_to_array() 也应该做到这一点。

# java - 得到一个object_x，只有object_x的第一条记录用hibernate设置

> ID：14030452
> 
> 赞同：0
> 
> 时间：2012-12-25T11:59:13.720
> 
> 标签：java, hibernate

我正在开发一个`Java EE`应用程序。在我的对象结构中，我有`Person`一个具有一组对象的`Address`对象。在我的一个查询中，我应该检索一个只有每个人的第一个地址的人员列表`hibernate`。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-25T12:10:35.230

我认为在 JPA 中是不可能的，或者作为一个人的 ORM 将他的所有地址行都映射到它。因此，您必须手动完成，遍历 Person 对象并获取地址列表并删除除第一个之外的所有元素。

虽然不是一个好的或有效的方式。

# sql-server-2008 - 从视图及其所有相关表中删除记录

> ID：14030457
> 
> 赞同：3
> 
> 时间：2012-12-25T11:59:48.803
> 
> 标签：sql-server-2008, view, delete-row

我正在使用 SQL Server Management Studio 2008。

我想从一个视图中删除一条记录，该视图显示该记录中所有列的空值。

我不知道，我从哪个表中得到了这个空记录。

我检查了所有为视图连接的表，但没有一个表包含空记录。

谁能帮我从我的视图和所有相关表中删除这条空记录..？

因为我在许多其他页面中使用此视图，它会在每个页面中创建具有空值的错误。

当我尝试从视图中删除此记录时，它显示错误，例如

```
"Msg 4405, Level 16, State 1, Line 1
View or function 'viewGetProgressOverview' is not updatable because the modification affects multiple base tables." 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-25T12:23:09.347

> 如果您在 SQL 中创建了基于单个表的视图 - 您对视图执行的 DML 操作会自动传播到基表。
> 
> 但是，**当您连接多个表以创建视图时，如果您对视图执行 DML 语句，您将遇到以下错误**：

```
Msg 4405, Level 16, State 1, Line 1
View or function 'ViewName' is not updatable because the modification affects
multiple base tables. 
```

**更新连接视图的规则如下：**

> 对连接视图的任何 INSERT、UPDATE 或 DELETE 操作一次只能修改一个基础基表。
> 
> **更新规则**
> 
> 连接视图的所有可更新列都必须映射到保留键的表的列。有关键保留表的讨论，请参见“键保留表”。如果视图是使用 WITH CHECK OPTION 子句定义的，则所有连接列和重复表的所有列都是不可更新的。
> 
> **删除规则**
> 
> 只要连接中只有一个保留键的表，就可以删除连接视图中的行。如果视图是使用 WITH CHECK OPTION 子句定义的，并且键保留表被重复，则无法从视图中删除行。
> 
> **插入规则**
> 
> INSERT 语句不得显式或隐式引用非键保留表的列。如果使用 WITH CHECK OPTION 子句定义连接视图，则不允许使用 INSERT 语句。

参考 ： -

[插入视图 – 代替触发器 – SQL Server](http://sqlandme.com/2011/05/02/inserting-to-a-view-instead-of-trigger-sql-server/)

[带有连接表的 Sql 可更新视图](https://stackoverflow.com/questions/7281054/sql-updatable-view-with-joined-tables)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-25T12:08:04.463

你不能从视图的结果中隐藏记录吗？例如

```
where subscriptionID IS NOT NULL 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-26T05:49:29.680

我需要采取的最后一步是用我最后一次备份重新创建洞数据库，并重新创建我在备份之后创建的表。现在它也解决了我的问题。谢谢大家的回复和帮助。。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-25T12:15:35.860

如果您的视图定义包含外连接，则 dbms 可能正在*制造*这些空值。如果您的视图*需要*外部连接，那么实际上没有任何方法可以绕过这些空值。如果你保留它们，那么你会看到空值。如果你隐藏它们，那么你就违背了外部连接的目的。

删除它们与所需外部连接一致的唯一方法是从保留的表中删除一行。（其键导致 dbms 制造空值的行。）

唯一可以阻止您识别保留表中的麻烦行的是视图不包含该表的任何候选键。从每个表中添加一个候选键，一次一个，直到找到正确的键。您无需更改视图定义即可执行此操作；只需将视图的 SELECT 语句复制到 SQL 窗口即可。

# c++ - 空的大括号初始化列表会发出有关缺少字段初始值设定项的警告

> ID：14030467
> 
> 赞同：9
> 
> 时间：2012-12-25T12:00:40.473
> 
> 标签：c++, c++11

目标：能够对对象进行列表初始化，并使默认初始化将所有 POD 初始化为 0/ `false`，并尽可能少地使用样板代码 (C++11)。

假设我有几个带有几个 POD 的类（想想文件格式解析）。为了不处理未定义的值，我希望将默认构造对象的值初始化为 0。例如，提供我自己的默认 c'tor`memset()`在`this`这种情况下可以正常工作，就像显式命名所有成员一样。

但是，这是样板文件。更重要的是，提供我自己的无参数默认构造函数会阻止我使用列表初始化语法进行成员初始化：

```
class Fails1 {
public:
  int a, b;
  Fails1() { memset(this, 0, sizeof(*this)); }
};

Fails1 this_works;
Fails1 this_fails{ 42, 54 }; // compiler error 
```

我也可以为 the 添加构造函数`initializer_list`，但这更像是样板文件。我想避免所有这些样板。

因此，我查看了当没有用户提供的默认构造函数时编译器提供的默认构造函数以及如何初始化它们的各种方法。这是我完全困惑的地方：

```
class A {
public:
  int a, b;
}; 
```

有了这个类，我可以同时使用空初始化列表和带有值的初始化列表，而无需自己提供这两个构造函数；这是我想要的一部分。

```
// Example 1: default initialization
A a1; 
```

第一个例子使用初始化；成员`a`并且`b`之后未定义（不是我想要的，我希望它们被值初始化）。

```
// Example 2: Value-initialization, so this works, I guess:
A a2 = A(); 
```

示例 2 使用值初始化，之后不复制。这就是我想要的，但是，我也认为空的大括号初始化列表会做同样的事情；请参见以下示例：

```
// Example 3: list-initialization with empty brace-init-list
A a3{}; 
```

示例 3 是我认为可以解决问题的方法。8.5.4“列表初始化”中描述了使用空大括号初始化列表的列表初始化：；特别是 8.5.4.3 说：“如果初始化列表没有元素并且 T 是具有默认构造函数的类类型，则 objectvalue-initialized”。但是，这会在 g++ 4.7.2 中发出警告`-Wextra`：

```
missing initializer for member ‘A::a’ [-Wmissing-field-initializers]
missing initializer for member ‘A::b’ [-Wmissing-field-initializers] 
```

但是，clang++ 3.1 没有警告，所以它也可能是 g++ 中的一个错误。

所以回到我原来的问题。如何在不必提供我自己的样板默认构造函数的情况下对对象进行值初始化——同时保留对其成员使用列表初始化而不必提供我自己的`initializer_list`构造函数的能力？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-25T14:37:05.630

一个简单的结构，如

```
struct A { int a,b; }; 
```

显然是一个聚合，并且`A a {};`显然是聚合初始化并暗示值初始化（即零初始化），如您已经引用的 §8.5.4/3 所述。（特别注意下一段中给出的示例，这实际上与您的情况相同。）

GCC 警告非常具有误导性。

在搜索现有的错误报告时，我发现[了这个](http://gcc.gnu.org/bugzilla/show_bug.cgi?id=55805)，这是您自己提交的。我认为这是正确的做法。

由于您已经制定了相关的标准部分，并且其他各种人在评论中做出了贡献，我将把它作为社区 Wiki 答案。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-25T14:49:35.133

gcc 关于缺少初始化程序的警告比其他任何事情都更有害：如果有初始化程序列表，则从列表中填充值，其余字段初始化为零。因此，对于一个空的初始化列表，所有的值都是零初始化的。警告一个未提及所有成员的非空初始化器列表可能是合理的：我看到程序员为数组的第一个元素提供非零初始化器并假设初始化器将重复的错误所有剩余的值。

关于默认创建初始化同时还允许初始化列表，我会为基本类型使用初始化模板：

```
template <typename T>
struct init
{
    init(): value_() {}
    template <typename S> init(S&& value): value_(std::forward<S>(value)) {}
    T value_;
};

struct foo
{
    init<int>    i_;
    init<double> d_;
    std::string  s_;
};

int main()
{
    foo f0;
    foo f1 = { 1, 3.14, "foo" };
    foo f2 = { };
} 
```

这种方法保证成员的初始化独立于类对象的使用方式，同时还支持使用初始化列表。不过，gcc 仍然错误地警告缺少初始化程序。

# php - PHP - 将时间与当前时间相加，最佳实践

> ID：14030468
> 
> 赞同：3
> 
> 时间：2012-12-25T12:00:55.387
> 
> 标签：php, datetime, time, sum

嗨，我正在尝试将时间与当前日期时间相加，此代码似乎有效：

```
$now = time();
$_day = strtotime('+1day',$now);
$_week = strtotime('+7day',$now);
$_month = strtotime('+1month',$now);
$_year = strtotime('+1year',$now); 
```

我想知道是否有任何其他方法，也许是更好的方法......谁能告诉我新的方法以及我应该转向另一种语法的原因？我想尽可能准确地做到这一点，所以如果我能反映这个脚本，那就太好了！

谢谢

编辑：

为了清楚起见，我需要使用 unix 时间戳我不需要格式化的日期/日期时间

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-25T12:11:17.137

如果您使用的 PHP 版本允许（PHP 5 >= 5.3.0）您使用[DateTime](http://php.net/manual/en/class.datetime.php)和[DateInterval](http://php.net/manual/en/class.dateinterval.php)类，您可以使用它们。

例子：

```
$dateTime=new DateTime();
$plusDay=new DateInterval('P1D');
var_dump($dateTime->add($plusDay));

$dateTime=new DateTime();
$plusWeek=new DateInterval('P1W');
var_dump($dateTime->add($plusWeek));

$dateTime=new DateTime();
$plusMonth=new DateInterval('P1M');
var_dump($dateTime->add($plusMonth)); 
```

我希望这是有帮助的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-25T12:09:49.333

我相信这[`strtotime()`](http://php.net/manual/en/function.strtotime.php)就像您将要使用 PHP 一样简单。[这个 SO 问题](https://stackoverflow.com/questions/8235896/date-arithmetic-in-php)的所有 3 个答案都选择使用该语法，我在网上看到的所有各种教程都使用它。`strtotime()`比其他方法更容易考虑日期算术。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-25T12:11:19.930

试试这个解决方案：

```
date("Y-m-d", strtotime("+1 day"));
date("Y-m-d", strtotime("+7 days"));
date("Y-m-d", strtotime("+1 month"));
date("Y-m-d", strtotime("+1 year")); 
```

# javascript - 使用 JsHtmlSanitizer 删除每个 html 标记

> ID：14030472
> 
> 赞同：2
> 
> 时间：2012-12-25T12:01:41.100
> 
> 标签：javascript

我最终让[JsHtmlSanitizer](http://code.google.com/p/google-caja/wiki/JsHtmlSanitizer)作为独立的客户端脚本工作。现在我想从字符串中删除所有 HTML 标记，而不仅仅是脚本标记和链接。这个例子

```
html_sanitize('<b>hello</b><img src="http://google.com"><a href="javascript:alert(0)"><script src="http://www.google.com"><\/script>'); 
```

返回“**你好**”，但我想删除所有标签。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-28T07:54:26.880

为什么不使用正则表达式在清理后删除所有 HTML 标签？

```
var input = '<b>hello</b><img src="http://google.com"><a href="javascript:alert(0)"><script src="http://www.google.com"></script>';
var output = null;
output = html_sanitize(input);
output = output.replace(/<[^>]+>/g, ''); 
```

*这应该在清理后去除所有*html 标记的输入字符串。

如果您只想进行基本清理（删除脚本和样式标签及其内容和所有 html 标签），您可以在正则表达式中实现整个事情。我在下面演示了一个示例。

```
var input = '<b>hello</b><img src="http://google.com"><a href="javascript:alert(0)"><script src="http://www.google.com"></script>';
input += '<script> if (1 < 2) { alert("This script should be removed!"); } </script><style type="text/css">.cssSelectorShouldBeRemoved > .includingThis { background-color: #FF0000; } </style>';

var output = null;
output = input.replace(/(?:<(?:script|style)[^>]*>[\s\S]+?<\/(?:script|style)[^>]*>)|<[^>]+>/ig, ''); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-28T10:56:43.733

使用下面的这个 javascript 函数从您从**html_sanitize()**获得的字符串中删除所有 html 标记。

```
var output = html_sanitize('<b>hello</b><img src="http://google.com"><a href="javascript:alert(0)"><script src="http://www.google.com"><\/script>');

output = output.replace(/(<.*?>)/ig,""); 
```

希望能帮助到你 ：）

# symfony - 左加入Pagerfanta Doctrine

> ID：14030475
> 
> 赞同：1
> 
> 时间：2012-12-25T12:02:01.750
> 
> 标签：symfony, doctrine

我想显示两个表的结果，但我有这个例外：“无法计算选择两个 FROM 组件的查询，无法区分”。

我的查询是：

```
 $queryBuilder = $em->createQueryBuilder()
     ->select('e, e.id AS id, e.f14010101 AS f14010101, e.f14010105 AS f14010105')
     ->from('T140101Bundle\Entity\T140101', 'e')
     ->leftJoin('T140102Bundle\Entity\T140102', 'c', 'WITH', 'c.f14010201= e.id')
     ->groupBy('e.id'); 
```

你能帮助我吗？

# android - 为什么编辑文本宽度不减小？

> ID：14030480
> 
> 赞同：1
> 
> 时间：2012-12-25T12:02:26.450
> 
> 标签：android, android-layout

我想连续放置 3 个编辑文本框，第一个保留在 Wrap_content 中，其他 2 个正在减小到特定大小。为什么会这样，任何帮助将不胜感激。在我的 xml 代码中提前致谢

```
 <TableRow
            android:id="@+id/tableRow6"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content" >

              <EditText
                  android:id="@+id/editText6"
                  android:layout_width="80dp"
                  android:layout_height="wrap_content"
                  android:ems="10" /> 

              <EditText
                  android:id="@+id/editText7"
                  android:layout_width="0dp"
                  android:layout_height="wrap_content"
                  android:layout_weight="1"
                  android:ems="10" />

               <EditText
                  android:id="@+id/editText8"
                  android:layout_width="80dp"
                  android:layout_height="wrap_content"
                  android:ems="10" />

        </TableRow> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-25T12:08:55.640

**已编辑**

尝试为每个 EditText 赋予相同的权重并将宽度设置为 0dp。

```
android:layout_width="0dp"
android:layout_weight="1" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-25T12:09:21.487

```
 <TableRow
        android:id="@+id/tableRow6"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content" >

          <EditText
              android:id="@+id/editText6"
              android:layout_width="80dp"
              android:layout_weight="2"
              android:layout_height="wrap_content"
              android:ems="10" /> 

          <EditText
              android:id="@+id/editText7"
              android:layout_width="0dp"
              android:layout_height="wrap_content"
              android:layout_weight="1"
              android:ems="10" />

           <EditText
              android:id="@+id/editText8"
              android:layout_width="80dp"
              android:layout_height="wrap_content"
              android:layout_weight="2"
              android:ems="10" />

    </TableRow> 
```

# java - ActionBar：导航栏按钮上的中心文本

> ID：14030481
> 
> 赞同：3
> 
> 时间：2012-12-25T12:02:27.103
> 
> 标签：java, android, android-actionbar, actionbarsherlock

**简单的目标：**

让我的导航栏中的默认按钮`ActionBar`与文本中心对齐。我只是想使用默认的简单方法：

```
ActionBar.Tab myTab = Actionbar.newTab()
myTab.setText("my tab's text"); 
```

**有什么问题**

我找不到任何简单的方法来做到这一点。您无法访问视图（因为它是默认视图，所以`ActionBar.Tab.getCustomView()`总是返回）。`null`我无法在`ActionBar`、`ActionBar.Tab`等中看到获取当前视图、获取或修改`LayoutParams`（尤其是`Gravity`）的方法。问题的可视化如下（一行似乎工作正常，但双线导航按钮肯定看起来左对齐）： ![在此处输入图像描述](../Images/8a63f4830d40bb6eb13dd431cd698668.png)

**不理想的解决方案**

我是否正确地认为实现这一点的唯一方法是对我的所有选项卡使用自定义视图，以某种方式猜测/尝试复制选项卡的默认格式（因为我无论如何都找不到访问这些视图）和假设/希望`ActionBar.Tab`文本的默认格式/字体/样式不会很快改变？

肯定有更好的方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-25T12:11:29.197

AFAIK，您无法访问`Views`in `ActionBar`。使用自定义布局似乎是唯一的解决方案。但是，Android 不会自动将文本居中对齐吗？它显然在我所有的应用程序中都是如此。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-25T13:14:08.313

请下载以下示例。它会帮助你。我相信我会从这个演示中得到帮助。 [https://github.com/JakeWharton/ActionBarSherlock](https://github.com/JakeWharton/ActionBarSherlock)

# javascript - 谷歌广告中的错误

> ID：14030484
> 
> 赞同：1
> 
> 时间：2012-12-25T12:02:53.890
> 
> 标签：javascript, internet-explorer-9

使用 Firebug 分析我的网站后，我收到以下错误：

```
TypeError: a is null
[Break On This Error]   

...right,",pt:",f.top,",pb:",f.bottom,",vl:",b.left,",vr:",b.right,",vt:",b.top,",v...

osd.js (line 25)

TypeError: a is null
[Break On This Error]   

...getComputedStyle&&(c=c.defaultView.getComputedStyle(a,k))?c[b]||c.getPropertyVal...

show_ads_impl.js (line 42) 
```

任何人都可以帮助我如何解决它们。

我不是开发人员，我只是有一个带有谷歌广告的简单网站。

当我尝试在 IE9 中关闭兼容性视图打开站点时，它会冻结显示我的页面上运行了很长的脚本，当我在兼容性视图上时它工作正常。我网站的所有访问者在查看我的网站时都会遇到问题吗？

先感谢您。

# php - 在 php 中将融合图表导出为图像/PDF

> ID：14030488
> 
> 赞同：0
> 
> 时间：2012-12-25T12:03:44.637
> 
> 标签：php, xml, graph, fusioncharts

这是工作融合图演示代码：

```
<?php

include("FusionCharts/FusionCharts.php");
?>
<HTML>
<HEAD>
    <TITLE>
    FusionCharts - Array Example using Single Series Column 3D Chart
    </TITLE>    
    <SCRIPT LANGUAGE="Javascript" SRC="FusionCharts/FusionCharts.js"></SCRIPT>
    <script type="text/javascript" language="JavaScript" src="FusionCharts/FusionChartsExportComponent.js"></script>
<script type="text/javascript" LANGUAGE="Javascript" SRC="FusionCharts/jquery.min.js"></script>
<script type="text/javascript" LANGUAGE="Javascript" SRC="FusionCharts/lib.js"></script>
<link href="FusionCharts/style.css" rel="stylesheet" type="text/css" />
<script type="text/javascript">
        function ExportMyChart() {
            var chartObject = getChartFromId('Results');
            if( chartObject.hasRendered() ) chartObject.exportChart();
     }
    </script>
    <style type="text/css">
    <!--
    body {
        font-family: Arial, Helvetica, sans-serif;
        font-size: 12px;
    }
    -->
    </style>
</HEAD>
<BODY>

<CENTER>
<h2>FusionCharts Examples</h2>
<h4>Plotting single series chart from data contained in Array.</h4>
<?php
include("db_connect.php");
    //In this example, we plot a single series chart from data contained
    //in an array. The array will have two columns - first one for data label
    //and the next one for data values.

    //Let's store the sales data for 6 products in our array). We also store
    //the name of products. 
    //Store Name of grades for x axis
    $arrData[0][1] = "A";
    //send + char to xml file////
    $arrData[1][2] = str_replace('+', '%2B', 'A+');
    $arrData[2][3] = "A-";
    $arrData[3][4] = "B";
    $arrData[4][5] = str_replace('+', '%2B', 'B+');
    $arrData[5][6] = "B-";
    $arrData[6][7] = "C";
    $arrData[7][8] = str_replace('+', '%2B', 'C+');
    $arrData[8][9] = "C-";
    $arrData[9][10] = "D";
    $arrData[10][11] = str_replace('+', '%2B', 'D+');
    $arrData[11][12] = "E";
    $arrData[12][13] = "AB";
    $arrData[13][14] = "NE";
    $arrData[14][15] = "MC";

    //Store db data
    // Fetch all  records
    $sql = "SELECT grade, COUNT(*) 'No_Of_grades' FROM std_results WHERE course_code ='CSC1113' GROUP BY grade ORDER BY grade ASC";
    $result = mysql_query($sql) or die(mysql_error());
    while($ors = mysql_fetch_array($result)) {
    $grd=$ors['grade'];
    switch ($grd)
{
case "A":
  $arrData[0][16]=$ors['No_Of_grades'];
  break;
case "A+":
  $arrData[1][17]=$ors['No_Of_grades'];
  break;
case "A-":
  $arrData[2][18]=$ors['No_Of_grades'];
  break;
  case "B":
  $arrData[3][19]=$ors['No_Of_grades'];
  break;
  case "B+":
  $arrData[4][20]=$ors['No_Of_grades'];
  break;
  case "B-":
  $arrData[5][21]=$ors['No_Of_grades'];
  break;
 case "C":
  $arrData[6][22]=$ors['No_Of_grades'];
  break;
  case "C+":
  $arrData[7][23]=$ors['No_Of_grades'];
  break;
  case "C-":
  $arrData[8][24]=$ors['No_Of_grades'];
  break;
  case "D":
  $arrData[9][25]=$ors['No_Of_grades'];
  break;
  case "D+":
  $arrData[10][26]=$ors['No_Of_grades'];
  break;
  case "E":
  $arrData[11][27]=$ors['No_Of_grades'];
  break;
  case "AB":
  $arrData[12][28]=$ors['No_Of_grades'];
  break;
  case "NE":
  $arrData[13][29]=$ors['No_Of_grades'];
  break;
default:
  $arrData[14][30]=$ors['No_Of_grades'];
}

    }

    //set vlaue zero for othe grades..
    for($i=0;$i<15;$i++){
        if(!isset($arrData[$i][31])){
            $arrData[$i][32]=0;
            }
        }
    //Now, we need to convert this data into XML. We convert using string concatenation.
    //Initialize <chart> element
    $strXML = "<chart caption='Exam result for CSC113A ' numberPrefix='' formatNumberScale='10' xAxisName='Grades' yAxisName='No Of Students' bgColor='995699,FEEFFF' exportEnabled='1' exportAtClient='0' exportAction='download' exportTargetWindow='_blank' exportHandler='http://www.fusioncharts.com/ExportHandlers/PHP/FCExporter.php' id='myChart'>";
    //Convert data to XML and append
    foreach ($arrData as $arSubData)
        $strXML .= "<set label='" . $arSubData[1] . "' value='" . $arSubData[2] . "' />";

    //Close <chart> element
    $strXML .= "</chart>";

    //Create the chart - Column 3D Chart with data contained in strXML
    echo renderChart("FusionCharts/Column3D.swf", "", $strXML, "Results", 600, 300, false, false);
?>
<BR><BR>
<input type="button" value="Export My Chart" onclick="ExportMyChart()" />
</CENTER>
</BODY>
</HTML> 
```

这段代码的输出是：！![在此处输入图像描述](../Images/f9ac34378018806aacef270f002b6a15.png)

然后我尝试编辑上面的代码以添加下载按钮以将这些图表导出为 imges/PDF 格式..但是这个下载按钮仍然没有显示给我。需要的下载按钮是：![在此处输入图像描述](../Images/2e27c08f4e7864e0214d31773e6e027b.png)

然后我需要像这样得到最终输出：![在此处输入图像描述](../Images/927b346fd19e3725d90ace7823ca5cd9.png)

***我想将此下载按钮添加到我的图表中...我该怎么做???请帮助我...***

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-25T15:25:15.460

图表上的这个下载按钮仅在 JavaScript 图表中可用，并且您可能正在渲染 Flash 图表。

有很多方法：

1.  传递 JavaScript 图表[别名](http://docs.fusioncharts.com/charts/?Introduction/ChartList.html)而不是 SWF 名称作为 的第一个参数`renderChart`：

    ```
    renderChart("Column3D" ... 
    ```

2.  `renderChart`您可以在函数调用之前在 PHP 中添加此代码：

    ```
     FC_SetRenderer( "javascript" ); 
    ```

3.  在页面顶部添加一小行 JavaScript（包含后`FusionCharts.js`）

    ```
    FusionCharts.setCurrentRenderer('javascript'); 
    ```

此外，您可以右键单击 Flash 图表以获取菜单。

# redis - redis如何存储数据

> ID：14030489
> 
> 赞同：2
> 
> 时间：2012-12-25T12:03:45.860
> 
> 标签：redis

如果 redis 将数据作为键值对存储在内存中，那么 redis 最初创建的用于存储键值对的哈希表的大小是多少？它是否会在配置文件中创建一个大小与 maxmemory 参数相等的表？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-25T20:09:45.177

不，主字典的哈希表的大小是动态的。

初始大小为 4 个条目。然后它会按照 2 的幂次增长以适应数据。增长是动态的，因此重新散列是在后台增量执行的。昂贵的重新散列操作无法阻止简单的设置命令。

# mono - 单声道中的 ShowDialog()

> ID：14030490
> 
> 赞同：1
> 
> 时间：2012-12-25T12:03:57.777
> 
> 标签：mono, gtk#, showdialog

我在 Mono 中有 2 个表单。在 Form1 中按钮的 OnClickEvent 中，我想显示对话框 Form2 并从 Form2 中获取答案。在 C# 中我有这个代码

```
Form2 F=new Form2();
F.ShowDialog();
int MyAnswer=F.Answer; 
```

## 但在 Mono ShowDialog() 函数中不存在。

这个问题的意思是：我想显示 Form2 但 Form1 等待 Form2 的结果

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-25T12:39:00.483

您可以使用 Gtk.Dialog 并使用此代码，而不是使用 Gtk.Window。

```
ResponseType response = ResponseType.None;
using (var dlg = new YesNoDialog ("Title", "Question", "Yes Button", "No Button"))
    response = (ResponseType) dialog.Run ();

if (response == ResponseType.Yes)
        OverwriteFile (); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-25T12:42:21.997

看起来您正试图`System.Windows.Forms.Form.ShowDialog()`在 Gtk# 应用程序中使用。

调用了等效的 Gtk# 函数`Gtk.Dialog.Run`，请参阅[Is there a Form.Showdialog equivalent for Gtk# Windows?](https://stackoverflow.com/questions/990640/is-there-a-form-showdialog-equivalent-for-gtk-windows)

您还需要创建一个对话框，而不是一个表单 - 即。在 MonoDevelop 中添加新类时，选择“Gtk / Dialog”，而不是“Gtk / Widget”。

# c# - .NET 多线程：锁定对象与日志锁定很长时间

> ID：14030491
> 
> 赞同：2
> 
> 时间：2012-12-25T12:03:58.170
> 
> 标签：c#, .net, multithreading, locking

在系统中，我们有通过特定参数锁定对象的方法。作为实现，我们有 LockManager 和 Enter 方法，它接收一个锁的键，检查锁对象是否存在于内部字典中，如果不存在，它创建它然后锁定。

我想要做的是为特定锁定设置“X 预期时间”，如果一个对象被锁定超过 X 时间，我想在我们的日志中写一条消息。

下面是我的锁管理器的源代码：

```
public class MyLockManager<T>
{
    protected Dictionary<T, object> LockDictionary { get; private set; }

    public MyLockManager()
    {
        LockDictionary = new Dictionary<T, object>();
    }

    /// <summary>
    /// Enters a lock on the key.
    /// </summary>
    /// <param name="key">The key to lock.</param>
    public virtual void Enter(T key)
    {
        if (!LockDictionary.ContainsKey(key))
        {
            lock (LockDictionary)
            {
                if (!LockDictionary.ContainsKey(key))
                {
                    LockDictionary.Add(key, new object());
                }
            }
        }

        object lockObj = LockDictionary[key];
        Monitor.Enter(lockObj);
    }

    /// <summary>
    /// Releases the lock on the key.
    /// </summary>
    /// <param name="key">The key to release.</param>
    public virtual void Exit(T key)
    {
        if (LockDictionary.ContainsKey(key))
        {
            Monitor.Exit(LockDictionary[key]);
        }
    }
} 
```

现在我想添加一个额外的方法，比如说 LockTimoutHandler(T key)，如果特定键的对象被锁定超过 X 时间，它将被调用。

为了做到这一点，我想为“Enter”和“Exit”方法添加一些逻辑。当 Enter 被调用时，***某些东西会以某种方式注册***以在 X 时间内运行 LockTimoutHandler，而当“Exit”被调用时，***某些东西会以某种方式被 unregistered***。

我的问题是我可以用什么来代替那个***东西***？我如何安排该方法在 X 时间运行以及之前是否发生过退出，因此请删除该计划。它必须非常快，因为在我们的案例中性能非常重要。我知道 Timer 对象...它可以延迟执行方法，但它的性能是否足够好？我必须有哪些额外的选择才能实现这一目标？

**注意**：为了清楚起见，我不是在谈论**TryEnter**。当对象无法锁定特定时间量时，我不想捕获这种情况，我想捕获已经锁定时间过长的对象。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-25T12:15:23.103

我们有类似的要求并以这种方式解决了它：

*   锁定时，将计时器设置为超时，向其传递一个状态对象，其中包含您想要的任何内容的密钥和委托：记录、强制解锁……您的用例所需的任何内容
*   当计时器触发时，检查密钥，如果条目存在调用委托
*   **重要提示：**回收计时器（线程安全队列中的 eq），不要**让它**超出范围。
*   当您下次需要一个计时器时，从回收队列中取出一个并操作状态对象 - 仅在需要时创建一个新的。

这将根据需要保留尽可能多的计时器，但不会更多，并且只会产生一次分配/解除分配的成本。由于您无法更改计时器的状态对象，因此您需要更改其内容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-25T13:09:09.570

我认为你可以做得更简单。计时器是重量很轻的物体，我不会试图限制它们的数量。所有计时器都在线程池的一个特殊线程中运行，它们非常便宜。

只需创建一个计时器字典（如果它将在不同的线程中使用，您可能需要将其更改为`ConcurrentDictionary`：

```
var timers = new Dictionary<T, Timer>(); 
```

将项目添加到列表时，使用此代码设置超时：

```
var timer = new Timer(o => LogMessage("key {0} is being held too long", key));
timer.Change(timeout, Timeout.Infinite);
timers.Add(key, timer); 
```

请注意，计时器只会在指定的超时后执行一次。当项目被释放时，只需从字典中删除计时器：

```
Timer timer;
if (timers.TryGetValue(key, out timer))
{
    timer.Dispose();
    timers.Remove(key);
} 
```

# c - strtok 没有按预期工作

> ID：14030492
> 
> 赞同：-5
> 
> 时间：2012-12-25T12:04:10.373
> 
> 标签：c, strtok

我尝试编写一个函数，该函数获取指向 char 数组的指针，从用户读取一个字符串并删除字符串开头的所有空格，直到出现第一个不是字符串的字符。最后返回开头没有空格的字符串副本。

例如，

对于输入`abcd`，函数应该返回指向字符串的指针`abcd`。

对于输入`123 123`，函数应返回指向 string 的指针`123 123`。

功能如下图，

```
void read_RemoveSpace(char * str)/**read the rest of string**/
{
    char tempRead[30];
    fgets(tempRead,30,stdin);
    char *ptr = strtok(tempRead, " "); /**remove spaces between command and other data**/
    strcpy(str,ptr); /**copy the new string without the spaces.**/
} 
```

但由于某种原因，该功能`strtok()`无法按预期工作。

在输入的情况下：

```
 123 456 
```

该函数只返回没有空格的第一部分，但不返回字符串的其余部分，即它指向

```
123 
```

有什么建议么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-25T12:15:08.700

`strtok`完全按预期工作。它将输入分成字符串`123`和`456`.

```
strtok (tempRead, " "); /* Returns 123 */
strtok (NULL, " "); /* Returns 456 */ 
```

我认为您可以使用更简单的解决方案：

```
int i = 0;
char tempRead[30];
...
while (tempRead[i] == ' ' && tempRead[i])
  i++;
strcpy(str,tempRead+i); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-25T12:15:16.633

它完全按预期工作。

第一次调用 strtok 将返回令牌的第一次出现；只要您将第一个参数提供为 NULL，后续调用将一次返回其余令牌；并且 strtok 将在令牌用完时返回 NULL。

编辑：
有些事情可能会导致奇怪的错误，所以我在这里引用手册页提到的内容以及使用时应始终牢记的内容`strtok`：

> 使用这些功能时要小心。如果您确实使用它们，请注意：
> 
> *   这些函数修改它们的第一个参数。
>     
>     
> *   这些函数不能用于常量字符串。
>     
>     
> *   定界字符的标识丢失。
>     
>     
> *   该`strtok()`函数在解析时使用静态缓冲区，因此它不是线程安全的。`strtok_r()`如果这对您很重要，请使用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-25T12:35:22.073

使用`strtok()`并不是显而易见的方法。

```
void read_RemoveSpace(char *str)
{
    char *dst = str;
    char tempRead[30];
    if (fgets(tempRead, sizeof(tempRead), stdin) != 0)
    {
        char *src = tempRead;
        char c;
        while ((c = *src++) != '\0')
        {
            if (c != ' ')
                *dst++ = c;
        }
    }
    *dst = '\0';
} 
```

这会将非空格复制`tempRead`到中`str`，包括换行符；如果您愿意，可以使用`isspace()`or `isblank()`from `#include <ctype.h>`。我不相信 30 对于本地字符串来说是一个很好的长度，但这就是您在问题中所遇到的。可以说，您应该指定接口中提供的字符串大小：`void *read_RemoveSpace(char *buffer, size_t buflen)`. 您还可以让函数返回指向字符串末尾的 null 的指针（从而间接给出字符串的长度减去空格）。

```
void read_RemoveSpace(char *buffer, size_t buflen)
{
    char *dst = buffer;
    char tempRead[buflen];
    if (fgets(tempRead, sizeof(tempRead), stdin) != 0)
    {
        char *src = tempRead;
        char c;
        while ((c = *src++) != '\0')
        {
            if (!isspace((unsigned char)c))
                *dst++ = c;
        }
    }
    *dst = '\0';
    return dst;
} 
```

没有太大的不同，但更安全。它使用本地 VLA（可变长度数组），它是 C99 的一部分。可以放弃 VLA 并直接复制到目标缓冲区：

```
void read_RemoveSpace(char *buffer, size_t buflen)
{
    char *dst = buffer;
    if (fgets(buffer, buflen, stdin) != 0)
    {
        char *src = buffer;
        char c;
        while ((c = *src++) != '\0')
        {
            if (!isspace((unsigned char)c))
                *dst++ = c;
        }
    }
    *dst = '\0';
    return dst;
} 
```

直到第一个空格，这个复制都是无操作的；此后，它将字符复制到它们的最终位置。

# javascript - 带有鼠标事件的 ActionLink 图像悬停按钮效果

> ID：14030493
> 
> 赞同：1
> 
> 时间：2012-12-25T12:04:15.800
> 
> 标签：javascript, asp.net-mvc, jquery-ui, css, html.actionlink

我想使用 jQuery 创建按钮效果，即 mouse_over、mouse_leave 和 mouse_click。我有使用visual studio 2012在mvc 4中用ActionLink编写的链接。所以我想用稍微大一点的图像来改变图像，当鼠标离开时，它会回到原始图像并在点击链接时产生某种效果......

```
@Html.ActionLink(" ", "index1", "Home","index1", new {id="a1", @class="dashboard_function_icons"})

@Html.ActionLink(" ", "index2", "Home","index2", new {id="a2", @class = "dashboard_function_icons"})

@Html.ActionLink(" ", "index3", "Home","index3", new {id="a3", @class = "dashboard_function_icons"})

CSS CODE
---------
.dashboard_function_icons {

   display:block;
   height: 15px;
   width: 20px;
   padding-left: 80px;
   padding-bottom: 80px;
   margin-top:10px;
   margin-left:10px;
   float:left;
}

  #a1 {
    background: url("../Images/people.png") no-repeat;
  }

  #a2 {
    background: url("../Images/ball.png") no-repeat;
  }

  #a3 {
    background: url("../Images/save.png") no-repeat;
    }

 jQuery
 -------
 $(".dashboard_function_icons").hover(
        function () { $(this).},
        function () { $(this).;}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-28T18:53:01.650

您可以使用带有 :hover 伪类和精灵图像的 CSS 来实现这一点，并且只需使用 css 在背景中移动精灵图像。看[这篇文章](http://css-tricks.com/css-sprites/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-25T12:38:02.857

您可以在悬停回调中使用[`.addClass`](http://api.jquery.com/addClass/)and函数。[`.removeClass`](http://api.jquery.com/removeClass/)

# sql-server - SQL Server 如何在 NVARCHAR(max) 中存储超过 4000 个字符？

> ID：14030498
> 
> 赞同：10
> 
> 时间：2012-12-25T12:04:43.890
> 
> 标签：sql-server, stored-procedures, nvarchar

我已经定义了一个具有类型参数的存储过程，并`NVARCHAR(max)`在我的`stored procedure`. 我知道最大值`nvarchar`是 4000。但是我已经将一个包含 5700 个字符的字符串传递给我的 sp，没有任何错误。可能吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-12-25T12:11:31.547

**是的，这是可能的**- 根据[MSDN 文档](http://msdn.microsoft.com/en-us/library/ms186939.aspx)：

> **nvarchar [ ( n | max ) ]**
> 
> *可变长度的 Unicode 字符串数据。n 定义字符串长度，可以是 1 到 4,000 之间的值。**max 表示最大存储大小为 2^31-1 字节（2 GB）。**存储大小（以字节为单位）是输入数据实际长度的两倍 + 2 个字节。nvarchar 的 ISO 同义词是国家字符变化和国家字符变化。*

因此，如果您指定`nvarchar(max)`，您最多可以存储**10 亿**个 2 字节 Unicode 字符。那是列夫·托尔斯泰 (Leo Tolstoj) 的《*战争与和平》*的一百多倍……

SQL Server 在内部将这些*最大*列存储到特殊结构中，这使得绕过 SQL Server 页面的 8K 限制成为可能。它可以工作——但它比仅仅在一个页面上存储几百个字节更费力，所以这个存储系统确实对 SQL Server 造成了更大的压力——小心使用它，只在你**真正**需要的时候使用它（而且绝对不要把你所有的专栏都写出来`(n)varchar(max)`，只是因为你很懒！）

看看这篇关于 Simple Talk 的非常好的文章：[再使用 VARCHAR(n) 有什么意义？](http://www.simple-talk.com/sql/database-administration/whats-the-point-of-using-varchar%28n%29-anymore/)- 它很好地解释了`(max)`数据类型如何不同并且不太适合较小的字符串 - 仅在真正需要时使用！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-08-24T10:18:25.527

你可以试试

```
Declare @SQL as nvarchar(Max)
    ,@SQL2 as nvarchar(Max)

-- Just Sample
-- each variable max 4000 character, so be wise in splitting your syntax

Set @SQL  = 'Select * '
Set @SQL2 = 'From table A'

EXEC (@SQL+@SQL2) 
```

请注意，如果您的动态字符串长度超过 > 8000 个字符，则应拆分为 3 个变量

这应该可行，因为我有同样的问题

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-06-13T11:54:05.017

如果你正在连接你的字符串，那么你必须像下面这样连接它。

```
DECLARE @qry NVARCHAR(MAX);

SET @qry = N'SELECT * FROM Table1 t1';
SET @qry = @qry + N'INNER JOIN Table2 t2 ON t1.Col1 = t2.Col2'
SET @qry = @qry + N'INNER JOIN Table3 t3 ON t1.Col1 = t2.Col3'

EXEC sp_executeSQL @qry 
```

在上面的示例中，即使连接字符串的字符超过 4000 个字符，也会将其添加到变量中，并且限制为 2GB。

# php - document.referrer 提供重音字母

> ID：14030499
> 
> 赞同：7
> 
> 时间：2012-12-25T12:05:02.150
> 
> 标签：php, mysql

我正在使用 document.referrer 获取当前页面的先前 URL 并将其发送到 curl 文件，该 curl 文件再次将此变量发送到 PHP 文件以将其保存到数据库中。问题是，在保存到数据库中时，我将 URL 值作为重音字母，例如

```
†Ûiÿû®û(~×(›û®û(~×â•ïðŠwhÂÏÚžØ¦j­î 
```

我`base64`在我的 php 文件中使用了编码方案。MySQL 列的排序规则是`latin1_swedish_ci`.

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-25T12:21:27.333

正如评论者所建议的那样，我认为这只是一个问题，即 URL 的编码与数据库的编码不同。在您的数据库表上使用`utf-8`将解决您的大部分（如果不是全部）问题。这是一篇由两部分组成的文章（[第 1](http://www.borngeek.com/2008/07/25/unicode-and-the-web-part-1/)部分和[第 2 部分](http://www.borngeek.com/2008/08/18/unicode-and-the-web-part-2/)），讨论了如何`utf-8`在 PHP 和 MySQL 中使用。

# 3d - 导入3D扫描工具

> ID：14030505
> 
> 赞同：1
> 
> 时间：2012-12-25T12:05:48.730
> 
> 标签：3d, webgl, blender

> **可能重复：**
> [当前哪个 WebGL 库支持大多数 3d 模型格式（以及哪些）？](https://stackoverflow.com/questions/10528917/which-current-webgl-library-supports-most-3d-model-formats-and-which-ones)

我需要执行以下操作：

1.  导入 3d 扫描
2.  将其导出为 webGL 可读的内容

使用 3D 工具，例如 Blender。

有谁知道最好的工具是什么？我知道 Maya、3D Max、Blender、Cinema 4D。还有其他人吗？

我需要一个能够以最简单的方式执行上述操作的人。

# javascript - 编写 Parent 的 > iFrame 的 > iFrame 内容

> ID：14030506
> 
> 赞同：1
> 
> 时间：2012-12-25T12:05:50.467
> 
> 标签：javascript, iframe

我有与此类似的 Html 布局：

**父页面 > iFrame**

我想编写动态 iframe 和内容，因此布局应该类似于：

**Parent > iFrame > 编写新的 iFrame 及其内容**

我可以使用此代码为子 iframe 编写 html 内容

**父页面 > iFrame > Hello World！**

```
var ifrm = document.getElementById('myIframe');
ifrm = (ifrm.contentWindow) ? ifrm.contentWindow : (ifrm.contentDocument.document) ? ifrm.contentDocument.document : ifrm.contentDocument;
ifrm.document.open();
ifrm.document.write('Hello World!');
ifrm.document.close(); 
```

但是我怎样才能在里面写相同的内容：

**父页面 > iFrame > iFrame > Hello World ?**

所有 iFrame 都在同一个域上。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-25T12:27:11.213

```
var ifrm = document.getElementById('myIframe');
ifrm = (ifrm.contentWindow) ? ifrm.contentWindow : (ifrm.contentDocument.document) ? ifrm.contentDocument.document : ifrm.contentDocument;
var childfrm = ifrm.document.createElement('iframe');
childfrm.id = 'myChildIframe'; // repeat for any other properties you need
ifrm.document.body.appendChild(childfrm); // or use insertBefore to add it somewhere specific within the DOM
var childwin = (childfrm.contentWindow) ? childfrm.contentWindow : (childfrm.contentDocument.document) ? childfrm.contentDocument.document : childfrm.contentDocument;
childwin.document.open();
childwin.document.write('Hello World!');
childwin.document.close(); 
```

（这是未经测试的，但我认为它会工作）

# android - 从 ListView 获取 EditText 值

> ID：14030516
> 
> 赞同：3
> 
> 时间：2012-12-25T12:07:53.980
> 
> 标签：android, listview, android-edittext, android-arrayadapter

我正在尝试从 ListView 中的 EditTexts 获取值，但它不起作用。在 afterTextChanged 方法中设置为我的“列表”数组的值显然丢失了。我是android编程新手，有人可以帮助我吗？（抱歉英语不好）这是我的适配器中 getView 的代码：

```
@Override
public View getView(int position, View convertView, ViewGroup parent) {
    ViewHolder holder;

    final int posicao = position;

    if (convertView == null) {
        LayoutInflater inflater = contexto.getLayoutInflater();
        convertView = inflater.inflate(R.layout.produtos, null);
        holder = new ViewHolder();
        holder.texto = (TextView) convertView.findViewById(R.id.txtDescricao);
        holder.checkbox = (CheckBox) convertView.findViewById(R.id.chkProduto);
        holder.edit = (EditText) convertView.findViewById(R.id.txtValor);
        convertView.setTag(holder);
    } else {
        holder = (ViewHolder) convertView.getTag();
    }
    holder.texto.setText(getItem(position).getTexto());     

    holder.edit.setText("0");
    holder.edit.setTag(new LinhaItemTag(getItem(position), position));  

//here a get an exception just setting the focus on edit
holder.edit.setOnFocusChangeListener(new OnFocusChangeListener() {
        public void onFocusChange(View v, boolean hasFocus) {
            int posicao = v.getId();
            EditText e = ((EditText) v);
            if (!e.getText().toString().equals("")) {
                if (hasFocus) {
                    if(e.getText().toString().length() != 0)
                        lista.get(posicao).setValor(Double.parseDouble(e.getText().toString()));
                }
            }

        }
    });

    holder.edit.addTextChangedListener( new TextWatcher() {             

        public void afterTextChanged(Editable s)
        {           

            if(s.length() != 0) 
            {
                lista.get(posicao).setValor(Double.parseDouble(s.toString()));              
            }

        }

        @Override
        public void beforeTextChanged(CharSequence s, int start, int count,
                int after) {
            // TODO Auto-generated method stub

        }

        @Override
        public void onTextChanged(CharSequence s, int start, int before,
                int count) {
            // TODO Auto-generated method stub

        }
    }); 

    holder.checkbox.setOnCheckedChangeListener(null);
    holder.checkbox.setChecked(getItem(position).Selecionado());
    holder.checkbox.setTag(new LinhaItemTag(getItem(position), position));

    holder.checkbox.setOnCheckedChangeListener(new CompoundButton.OnCheckedChangeListener() {

        @Override
        public void onCheckedChanged(CompoundButton buttonView, boolean isChecked) {
            LinhaItemTag elemento = (LinhaItemTag) buttonView.getTag();
            elemento.item.setSelecionado(isChecked);

            if (isChecked) {
                pegos[elemento.position] = true;                
            } else {
                pegos[elemento.position] = false;
            }
            boolean checados = true;
            for (int i = 0; i < lista.size(); i++) {
                if (!pegos[i]) {
                    checados = false;
                    break;
                }
            }
            if (checados) {
                for(int i = 0; i < lista.size(); i++)
                {                   
                    total += lista.get(i).getValor();
                }
                Toast.makeText(contexto, "Compra finalizada - Valor Total: " + total, Toast.LENGTH_LONG).show();
            }
        }
    });

    return convertView;
}

} 
```

我设法从 EditTexts 中获取值查看这篇文章：[如何从 ListView](https://stackoverflow.com/questions/7495202/how-to-retrieve-value-from-all-edittext-in-listview) Bu 中的所有 EditText 中检索值，我面临其他问题：当我向下滚动列表时，来自 EditTexts 的值丢失了。这就像我的代码现在的样子：

```
public class MeuAdapter extends ArrayAdapter<LinhaItem> {

private final List<LinhaItem> lista;
private final Activity contexto;
private final boolean[] pegos;
private final double[] valores;
double total;

public MeuAdapter(Activity contexto, List<LinhaItem> lista) {
    super(contexto, 0, lista);
    this.contexto = contexto;
    this.lista = lista;
    pegos = new boolean[lista.size()];
    valores = new double[lista.size()];
    for (int i = 0; i < lista.size(); i++) {
        pegos[i] = false;
        valores[i] = 0;
    }
    total = 0;
}

public class ViewHolder
{
    protected TextView texto;
    protected CheckBox checkbox;
    protected EditText edit;
}

public class LinhaItemTag {

    LinhaItem item;
    int position;

    LinhaItemTag(LinhaItem item, int position) {
        this.item = item;
        this.position = position;
    }
}

private class MeuTextWatcher implements TextWatcher {

    private View v; 

    public MeuTextWatcher(View v)
    {
        this.v = v;     
    }

    @Override
    public void afterTextChanged(Editable e) {
        String s = e.toString();
        LinhaItemTag lTag = (LinhaItemTag) v.getTag();      
        if(s.length() != 0)
        {           
            valores[lTag.position] = Double.parseDouble(s);         
        }
    }

    @Override
    public void beforeTextChanged(CharSequence s, int start, int count,
            int after) {
        // TODO Auto-generated method stub

    }

    @Override
    public void onTextChanged(CharSequence s, int start, int before,
            int count) {
        // TODO Auto-generated method stub

    }

}

@Override
public View getView(int position, View convertView, ViewGroup parent) {
    ViewHolder holder;  

    if (convertView == null) {
        LayoutInflater inflater = contexto.getLayoutInflater();
        convertView = inflater.inflate(R.layout.produtos, null);
        holder = new ViewHolder();
        holder.texto = (TextView) convertView.findViewById(R.id.txtDescricao);
        holder.checkbox = (CheckBox) convertView.findViewById(R.id.chkProduto);
        holder.edit = (EditText) convertView.findViewById(R.id.txtValor);
        convertView.setTag(holder);
    } else {
        holder = (ViewHolder) convertView.getTag();
    }
    holder.texto.setText(getItem(position).getTexto()); 

    holder.edit.setText("");
    holder.edit.setTag(new LinhaItemTag(getItem(position), position));      

    holder.edit.addTextChangedListener(new MeuTextWatcher(holder.edit));    

    holder.checkbox.setOnCheckedChangeListener(null);
    holder.checkbox.setChecked(getItem(position).Selecionado());
    holder.checkbox.setTag(new LinhaItemTag(getItem(position), position));

    holder.checkbox.setOnCheckedChangeListener(new CompoundButton.OnCheckedChangeListener() {

        @Override
        public void onCheckedChanged(CompoundButton buttonView, boolean isChecked) {
            LinhaItemTag elemento = (LinhaItemTag) buttonView.getTag();
            elemento.item.setSelecionado(isChecked);

            if (isChecked) {
                pegos[elemento.position] = true;                
            } else {
                pegos[elemento.position] = false;
            }
            boolean checados = true;
            for (int i = 0; i < lista.size(); i++) {
                if (!pegos[i]) {
                    checados = false;
                    break;
                }
            }
            String vlrs = "";
            if (checados) {
                for(int i = 0; i < lista.size(); i++)
                {                   
                    total += valores[i];                    
                }
                Toast.makeText(contexto, "Total da compra: " + total, Toast.LENGTH_LONG).show();
            }
        }
    });

    return convertView;
}

} 
```

我换行：

```
holder.edit.setText(""); 
```

至：

```
//the valores array is where i store the values in the afterTextChanged method in the TextWatcher class implementation.
holder.edit.setText(**Double.toString(valores[position])**); 
```

但这并不像我预期的那样工作，例如，如果我为 ListView 第一行的 EditText 设置一个值，则在我向下滚动列表后，该值被设置为列表第三行中的 EditText。 .

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-12-25T17:27:06.860

要从`EditText`您的 中获取值`ListView`，您可以在您的活动中执行此操作。您必须需要某些视图单击或其他内容的值。因此，每当发生这种情况时，只需编写以下代码

```
View view=listView.getChildAt(position);
EditText editText=view.findViewById(R.id.editText);
String string=editText.getText().toString(); 
```

在这里，上面的代码将为您`EditText`提供位于`position`您的`ListView`. 当所有的检查都被检查时，您似乎需要 EditTexts 的值的总和？你可以使用这样的东西

```
for(int i=0;i<items.size();i++){
    View view=listView.getChildAt(i);
    EditText editText=view.findViewById(R.id.editText);
    String string=editText.getText().toString();
    if(!string.equals(""))
         total+=Double.parseDouble(string);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-07-22T04:53:16.297

适配器类 getView() 方法的变化看起来像。

```
 @Override
public View getView(final int position, View view, ViewGroup parent) {

    TextView txt_id, txt_courny_symbol, txt_member_view;
    EditText edit_member_amount;

    final int posicao = position;
    Log.v("ConvertView", String.valueOf(posicao));

    inflater = (LayoutInflater) mContext.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
    view = inflater.inflate(R.layout.list_member_layout, null);
    txt_id = (TextView) view.findViewById(R.id.txt_id);
    txt_courny_symbol = (TextView) view.findViewById(R.id.txt_courny_symbol);
    edit_member_amount = (EditText) view.findViewById(R.id.edit_member_amount);

    edit_member_amount.setTag(new LinhaItemTag(getItem(posicao), posicao));
    edit_member_amount.addTextChangedListener(new MeuTextWatcher(edit_member_amount));

    if (al_contact.size() != 0) {
        MemberClass memberClass = al_contact.get(position);
        txt_id.setText(memberClass.getName());
        txt_courny_symbol.setText(sym);
    }

    return view;

} 
```

> 擦除我们的 ViewHolder 类

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-25T13:04:49.217

您好，您可以使用下面的代码来执行此操作，listview 无法将控制器状态保存在行上，因此您需要使用控件的 settag 和 gettag。

来源：[https ://dl.dropbox.com/u/68130108/ListViewEditItem.rar](https://dl.dropbox.com/u/68130108/ListViewEditItem.rar)

![http://i.stack.imgur.com/DqKv3.png](../Images/a789c2cd9cd37f3d1bc7ab92d9083781.png)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-08-02T10:25:49.530

到目前为止，从 EditTexts 中丢失值可能会很烦人。我在工作时找到了这个解决方案。

在您的 android 清单中，选择您的列表视图所在的活动。然后将这个代码块放在那里。

```
android:windowSoftInputMode="adjustPan" 
```

然后转到您的`ListView`, 并导航到 xml 布局并将此块放在那里。

```
android:descendantFocusability="beforeDescendants" 
```

# java - android：当用户长按网页视图时如何禁用动作模式？

> ID：14030525
> 
> 赞同：4
> 
> 时间：2012-12-25T12:09:18.867
> 
> 标签：java, android, webview, android-actionbar, android-webview

如何禁用操作模式。换句话说，我想防止当用户长按包含文本的 Web 视图时出现操作模式。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-12-25T12:36:58.330

一般来说，我没有做很多工作`WebViews`，但我认为其中一个应该可以工作。我还没有测试过这些。

1：

`WebView`在 XML 中设置属性：`android:longClickable="false"`

或 2：

在 Java 而不是 XML 中设置上述属性：

```
your_webview.setLongClickable(false); 
```

或者 3：在方法中覆盖你的`WebView`and`return true``setOnLongClickListener`

```
your_webview.setOnLongClickListener(new OnLongClickListener() {
    @Override
    public boolean onLongClick(View v) {
        return true;
    }
}); 
```

# c# - 彩票方法

> ID：14030529
> 
> 赞同：2
> 
> 时间：2012-12-25T12:09:39.380
> 
> 标签：c#, sql, linq-to-sql

我有大约 100 万条记录，女巫用于在 24 天内（每天一条）回答问题。

我想要完成的是全天收集所有正确答案，然后进行**彩票选择**，例如，*如果订阅者正确回答了所有 24 个答案，那么他/她被选中的概率比只回答正确一个的订阅者高回答*。

我正在使用**Linq-to-Sql**，因为我更喜欢使用它，而不是纯 T-SQL，即使这将是 T-SQL 的移植，但[LinqPad](http://www.linqpad.net/)帮助我，所以这就是我的到目前为止：

```
// all correct answers id's
var correct = from a in JK_ChallengeAnswers
              where a.correct
              select a.challenge_answer_id;

// all correct answers 
var query = from cr in JK_ChallengeResponses
            where correct.Contains(cr.challenge_answer_id)
            select cr;

query.Count().Dump(); // 978144

var random = new Random();
int pos = random.Next(query.Count()); // random select

query.Skip(pos).Take(1).Dump(); // get one... 
```

这是直截了当的......而且它是线性的，没有“票证”方法，这里一个人回答了 1 个问题，作为回答所有 24 个问题的人的确切获胜百分比......

**我将如何去尝试彩票方法**，下一步应该是什么？

无需向我展示代码，我可以得到，只有步骤，因为我没有以某种方式得到它们。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-25T12:14:21.103

1.  创建一张彩票表。
2.  对于每个订阅者，对于他们正确的每个问题，将他们的条目放在表中一次。
3.  从该表中随机选择一条记录。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-25T12:12:10.990

用所有正确回答的人的名字创建一个视图。然后，您可以使用随机数生成器来选择 id 与随机数匹配的人。如果您需要更多帮助，请询问我。

# 编辑

对我来说，彩票方法已经对你有用，因为每个人都可以在 24 天内每天猜出一个答案。这意味着他们在您的表中有 24 个答案，外键指向正确答案。通过这样做，如果我将 24 个条目提交到数据库中，我就有更好的机会获得正确的答案。这将使我的方法奏效。

如果您对它的工作方式有不同的想法，请告诉我。

# android - arrayAdapter 中的 getItem() 是如何工作的？

> ID：14030530
> 
> 赞同：5
> 
> 时间：2012-12-25T12:09:45.563
> 
> 标签：android, listview

我从我的手册和互联网上阅读了很多解释 getView 方法的教程，但我不明白他们为什么使用它。谁能用一些例子或片段向我解释一下？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-12-25T12:13:44.610

`getItem()`返回项目的数据对象。它为您提供了一种访问适配器中数据的方法。例如，您的数组适配器保存字符串元素，`getItem()`返回一个字符串对象。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-12-25T12:16:49.067

getView() 用于构造或重用 AdapterView 的子项。AdapterView 是一个包含多个项目的视图。例如，ListView 包含一些具有相同（或可能不同）结构的项目。getView() 用于在某个位置构建视图并用数据填充它。

getItem() 用于获取为指定 View 项提供数据的项。例如，如果您有一个包含文本项的 ListView，则 getItem() 必须返回一个 String 或 CharSequence。这是为了方便起见，例如在您的 onItemClickListener

```
@Override
public void onItemClick(AdapterView<?> av, View view, int pos,
    long arg3) {

    String selectedText = (String) av.getItemAtPosition(pos);
    // or av.getAdapter().getItem(pos);
} 
```

# android - Looper 如何知道将消息发送给 Handler？

> ID：14030534
> 
> 赞同：5
> 
> 时间：2012-12-25T12:10:32.240
> 
> 标签：android, android-handler

问题是，我在哪里告诉我的线程将**mHandler**用于**Looper**？

谢谢你。我正在使用以下代码：

```
class LooperThread extends Thread {
    public Handler mHandler;
    public void run() {
      Looper.prepare();

      mHandler = new Handler() {
          public void handleMessage(Message msg) {
              // process incoming messages here
          }
      };

      Looper.loop();
    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-25T13:02:16.420

为了更好地理解，创建一个法线`Thread`并尝试`Handler`在`run()`该线程的方法中创建一个。你会得到`RuntimeException`一句话：

> 无法在尚未调用的线程内创建处理程序 `Looper.prepare()`

`run()`现在在创建 a 之前在方法中调用 Looper.prepare()将创建一个*与调用线程关联*`Handler`的新`Looper`对象。您感到困惑的根源是 Looper.prepare() 没有作为参数。它不需要，因为它是一个静态方法，它在内部获取当前正在运行的线程的。最多可以有一个与任何关联。*`Thread``ThreadLocal``Looper``Thread`*

 *现在，调用将通过内部调用`new Handler()`将新`Handler`对象与`Looper`当前对象相关联。您可以在同一个线程中创建多个具有自己的回调。所有 Handler 都会从相同的消息队列中获取消息。`Thread``Looper.myLooper()``Handler``Looper`

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-25T13:39:53.100

> 问题是，我在哪里告诉我的线程将 mHandler 用于 Looper？

您不需要明确地告诉它，因为系统（框架）会为您完成。当你实例化 时`Handler`，它会自动获得对你当前消息队列的访问权`Thread`。引用您的评论：

> 系统如何知道将消息发送到`mHandler` `Handler`？

我将在下面详细说明。

这是`android.os.Handler`Android中的构造函数：

```
 mLooper = Looper.myLooper();
    if (mLooper == null) {
        throw new RuntimeException(
            "Can't create handler inside thread that has not called Looper.prepare()");
    }
    mQueue = mLooper.mQueue; 
```

如您所见，首先它获取`Looper`您当前的`Thread`. 的源代码`Looper.myLooper()`如下：

```
public static final Looper myLooper() {
    return (Looper)sThreadLocal.get();
} 
```

它从线程本地存储中获取它。`Message`稍后，当您使用 this发送 a时`Handler`，`Handler`实际将自己设置为 的接收者**：**`Message`这就是当它到达时`Looper`将知道将其发送到哪里的方式。`Message`详细说明：

当您调用时`mHandler.sendMessage()`，最终会运行此代码（在许多其他代码行中）：

```
 MessageQueue queue = mQueue;
    boolean sent = false;
    if (queue != null) {
        msg.target = this; // msg is your Message instance
        sent = queue.enqueueMessage(msg, uptimeMillis);
    } 
```

如您所见，它将`Handler`实例设置为`Message`. 因此，稍后，当`Message`调度 时，它将包含`Handler`作为其目标的 。这就是`Looper`遗嘱如何知道`Handler`应该将其分派给哪个人的方式。具体来说，当您调用 时，队列中的`Looper.loop()`每个实例都会发生以下情况：`Message`

```
msg.target.dispatchMessage(msg); 
```

`dispatchMessage()`代码如下：

```
public void dispatchMessage(Message msg) {
    if (msg.callback != null) {
        handleCallback(msg);
    } else {
        if (mCallback != null) {
            if (mCallback.handleMessage(msg)) {
                return;
            }
        }
        handleMessage(msg);
    }
} 
```

注意**最后一次** `handleMessage(msg)`调用——这正是你的`handleMessage(msg)`覆盖！

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-25T12:22:38.800

你什么都不说。从[`Handler`](http://developer.android.com/reference/android/os/Handler.html)文档中：

> 每个 Handler 实例都与单个线程和该线程的消息队列相关联。当您创建一个新的 Handler 时，它会绑定到创建它的线程的线程/消息队列 - 从那时起，它会将消息和可运行对象传递到该消息队列并在它们从消息队列中出来时执行它们.

处理程序自动绑定到线程的消息队列。您只需实现回调，**系统**将处理所有事情，即调度和处理消息。实际上我同意，使用两个静态方法，比如`Looper.prepare()`和`Looper.loop()`自动推断事物，让模式感觉像黑魔法:)*

# mod-rewrite - 这个 mod_rewrite for apache 是否正确删除斜杠？

> ID：14030538
> 
> 赞同：0
> 
> 时间：2012-12-25T12:10:55.760
> 
> 标签：mod-rewrite

经过大量阅读和搜索后，我正在开发的网站。它似乎适用于我的测试，但我想知道它是否正确/足够有效以及我应该寻找的任何东西。

目标是：

*   当访问者访问它时，`domain.com/username` 它会在内部被转发到`domain.com/view-profile.php?uid=username`

*   当访问者访问它时，`domain.com/username/`它会删除最后一个“/”

这是代码：

```
Options +FollowSymLinks
RewriteEngine On

RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_FILENAME} !-f
RewriteRule ^([a-zA-Z0-9][a-zA-Z0-9_-]{5,49})$ view-profile.php?uid=$1 [L]

RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_FILENAME} !-f
RewriteRule ^([a-zA-Z0-9][a-zA-Z0-9_-]{5,49})/$ /$1 [R=301,L] 
```

* * *

我还需要斜线`/view-profile.php?uid=$1 [L]` 吗？有人介意让我快速查看 mod rewrite 如何为每个请求从上到下处理这个吗？

# ios - 将 Xcode 升级到 4.5.2 和 OpenCV 升级到 2.4.3 后的链接器错误

> ID：14030546
> 
> 赞同：5
> 
> 时间：2012-12-25T12:11:32.997
> 
> 标签：ios, xcode, opencv, linker-errors

我的项目一直运行良好，直到今天早上。我使用的是 xcode 4.3 和旧版本的 OpenCV（我不确定确切的版本）。OSX 已经是 10.7.x，但不是 10.7.5

今天，在将 OSX 升级到 10.7.5、xcode 到 4.5.2 并下载 OpenCV 2.4.3 后，我在尝试构建项目时收到以下链接器错误：

> 架构 armv7 的未定义符号：
> “_OBJC_CLASS_$_ALAssetsLibrary”，引用自：
> opencv2 中的 objc-class-ref(cap_ios_video_camera.o)
> “cv::FeatureDetector::create(std::string const&)”，引用自：
> -[ImageAnalyzer ImageAnalyzer.o 中的detectBlobs:]
> "cv::FeatureDetector::detect(cv::Mat const&, std::vector >&, cv::Mat const&) const"，引用自： ImageAnalyzer 中的
> -[ImageAnalyzer detectBlobs:]。 o
> ld：未找到架构 armv7 的符号
> clang：错误：链接器命令失败，退出代码为 1（使用 -v 查看调用）

为了使用新的 opencv 框架，我删除了对旧框架的引用，并将项目引用到从[这里](http://sourceforge.net/projects/opencvlibrary/files/opencv-ios/2.4.3/opencv2.framework.zip/download)下载的官方 prebuilt opencv2.framework 。
我还删除了对**libz.dylib**的引用，并添加了对**libc++.dylib**的引用。
最后一步是将前缀文件更新为新框架。前缀文件中的相关部分现在如下所示：

```
#ifdef __cplusplus
#import <opencv2/opencv.hpp>
#endif 
```

这一切都缩小到我似乎无法摆脱的这 4 个链接器错误。我尝试使用**libstdc++.dylib**，但我遇到了更多错误。我也尝试按照[此处](http://docs.opencv.org/trunk/doc/tutorials/introduction/ios_install/ios_install.html#ios-installation)的说明自行构建 OpenCV ，但我仍然遇到与预构建框架相同的错误。

我错过了什么？我的项目还有什么需要改变的吗？

更新：如此[处](http://code.opencv.org/issues/2500)
所示，将“C++ 标准库”设置为“libc++（支持 C++ 11 的 LLVM C++ 标准库”仅产生一个错误：

> clang：错误：-stdlib=libc++ 的部署目标无效（需要 iOS 5.0 或更高版本）

将部署目标更改为 iOS 5 终于让我的项目再次运行。
这是否意味着 OpenCV 2.4.3 不适用于 5 之前的 iOS 版本？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-27T15:37:57.757

使用 cmake 2.8.10 和 xcode 4.6.1 在 mac os x lion 10.7.5 上编译和运行 c++ opencv 2.4.4 的步骤

**拥有合适的工具**

1.  [从http://sourceforge.net/projects/opencvlibrary/files/](http://sourceforge.net/projects/opencvlibrary/files/)下载 opencv-unix并在任何地方解压
2.  [从http://www.cmake.org/cmake/resources/software.html](http://www.cmake.org/cmake/resources/software.html)下载 cmake .dmg并安装
3.  我假设您在 os x lion 上安装了 xcode 4.6，其中包括 ios sdk 6.1
4.  转到 xcode 首选项以下载并安装命令行工具，以便您拥有 g++ 等。

**使用cmake编译opencv**

1.  转到提取的opencv文件夹
2.  创建构建目录

    ```
    mkdir build
    cd build
    cmake -D WITH_TBB=OFF -D BUILD_NEW_PYTHON_SUPPORT=OFF -D BUILD_FAT_JAVA_LIB=OFF -D BUILD_TBB=OFF -D BUILD_EXAMPLES=ON -D CMAKE_CXX_COMPILER=g++ CMAKE_CC_COMPILER=gcc -D CMAKE_OSX_ARCHITECTURES=x86_64 -D BUILD_opencv_java=OFF -G "Unix Makefiles" ..
    make -j8
    sudo make install 
    ```

3.  从构建文件夹中，转到 bin/ 并运行其中一项测试

    ```
    ./opencv_test_stitching 
    ```

**创建自己的 c++ opencv xcode 项目**

1.  启动 xcode 并创建一个新的 xcode 项目
2.  os x下项目类型选择Command Line Tool
3.  打开项目的构建设置
4.  在架构下，将架构设置为 64 位英特尔。还将有效架构设置为 x86_64
5.  在 Build Options 下，将 Compiler for C/C++ 设置为 Default Compiler
6.  在 Search Paths 下，将 Header Search Paths 设置为 /usr/local/include
7.  同样在搜索路径下，将库搜索路径设置为 /usr/local/lib
8.  在 Apple LLVM 编译器 4.2 - Language set C++ Standard Library to libstd++（对于 OpenCV 2.4.6、Xcode 5、LLVM 5.0 和 10.8.5，将语言方言和 std 库设置为“编译器默认值”而不是“libstd++”）

**将编译好的 opencv 库添加到你的项目中**

1.  转到您所在的“构建设置”选项卡旁边的“构建阶段”选项卡
2.  在 Link Binary With Libraries 中，单击 + 号并选择 Add Other
3.  点击键盘上的前斜杠 / 并输入 /usr/local/lib
4.  点击回车并选择要在项目中使用的库
5.  确保您始终选择 libopencv_core.2.4.4.dylib
6.  点击回车，您将在项目下看到选定的 dylib

**写一些代码**

1.  首先让我们组织文件，右键单击您的项目蓝图图标并选择新建组
2.  将新组命名为 opencv 或其他
3.  将 dylib 拖放到该组中
4.  打开 main.cpp
5.  从 opencv 附带的任何示例测试中复制代码并将其粘贴到此处
6.  确保添加了所有必需的dylib，例如，如果将opencv_test_stitching.cpp 代码复制到main.cpp 中，则需要在前面的步骤libopencv_core.2.4.4.dylib libopencv_highgui.2.4.4 中添加以下库。 dylib libopencv_stitching.2.4.4.dylib

干杯。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-25T12:41:14.930

您的项目似乎缺少框架*AssetsLibrary*。

1.  在项目导航器中选择顶部节点。（出现构建设置的项目和目标页面。）

2.  选择目标。

3.  选择*摘要*。

4.  向下滚动到*Linked Frameworks and Libraries*。

5.  单击表末尾的*加号图标并选择**AssetsLibrary.framework*。

6.  单击*添加*。

然后尝试再次构建它。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-12-27T11:39:21.047

由于我似乎无法获得有关版本的答案（无论是在此处还是在 OpenCV Q&A 网站上），我将把它作为答案发布，因为它至少解决了这个问题。这在[此处](http://code.opencv.org/issues/2500)进行了描述。

在项目的**Build Settings**中，转到**Apple LLVM compiler 4.1-Language**部分。
那里：
Set **C++ Language Dialect** to **Compiler Default**
Set **C++ Standard Libray** to **libc++ (LLVM C++ standard libray with C++ 11 support**

完成上述操作后，我不再收到那些链接器错误，而是只收到一个错误，它表明只有 iOS 5 和以上是支持的。更改**部署目标**到项目summery中的5.0就可以了。

最后一点，关于 OpenCV 2.4.3 与低于 5 的 iOS 版本的兼容性，我仍然不确定这意味着什么。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-25T10:36:37.527

clang: error: invalid deployment target for -stdlib=libc++（需要 iOS 5.0 或更高版本）来消除此错误。

> 转到构建设置。将 c++ 标准库设置为编译器默认值。该错误肯定会被删除。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-05-11T19:33:50.120

只是为了把这个放到某个地方的帖子中，以防其他人遇到同样的事情。如果您遵循有关设置正确的 c++ 库以链接构建 iOS 应用程序的所有重要建议，但仍然会出现未定义符号的链接错误，请确保您的代码文件设置为编译为 c++！那就是将您的 .m 重命名为 .mm 并将 .h 重命名为 .hpp。都是些小事...

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-01-13T07:18:57.203

不要使用官网 opencv 安装指南中给出的终端命令，而是使用以下命令从终端构建 opencv。为我工作。

cd OpenCV-2.3.1

mkdir 构建

光盘构建

cmake -G "Unix Makefiles" ..

制作

须藤使安装

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-06-07T09:33:49.387

1.  Go Xcode/通用/链接框架和库
2.  按“+”按钮
3.  类型：资产库
4.  选择“AssetsLibrary.framework”并导入

**完毕**

***祝你好运！***

# php - 将赞按钮/推文按钮与单个帖子相关联

> ID：14030554
> 
> 赞同：0
> 
> 时间：2012-12-25T12:13:11.447
> 
> 标签：php, javascript, jquery, html

我创建了一个自己编写的 PHP 博客。在主页上，显示所有最近的帖子。

我在每个帖子的标题下添加了 Facebook Like 和 Tweet 的代码，但按钮适用于主页，而不是每个单独的帖子。所有按钮都包含相同的值。

当显示为具有自己 URL 的单个页面时，这些按钮对于每个单独的帖子都可以正常工作。

我如何使“赞”按钮适用于主页上的单个帖子。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-25T15:23:01.427

在 Like 按钮代码中使用单个博客条目的 URL。例如，如果使用 HTML5 版本的 Like 按钮，则类似于：

```
<div class="fb-like" data-href="http://www.example.com/blog/1" data-send="false" data-width="450" data-show-faces="false"></div>
<div class="fb-like" data-href="http://www.example.com/blog/2" data-send="false" data-width="450" data-show-faces="false"></div> 
```

或者如果使用 XFMBL 版本，则：

```
<fb:like href="http://www.example.com/blog/1" send="false" width="450" show_faces="false"></fb:like>
<fb:like href="http://www.example.com/blog/2" send="false" width="450" show_faces="false"></fb:like> 
```

# php - 使用 jquery 验证最初隐藏的表单

> ID：14030558
> 
> 赞同：0
> 
> 时间：2012-12-25T12:14:01.680
> 
> 标签：php, jquery, ajax

我正在使用 jquery 验证最初隐藏的表单，但即使字段为空，表单也会提交

```
$(document).ready(function () {

    jQuery("#name").validate({
        expression: "if (VAL) return true; else return false;",
        message: "* Please enter name"
    });

}); 
```

我这样做是为了表单的 ajax 提交。

```
 $("#send").click(function (e) {
        e.preventDefault();
       var name = $('#name').val();
    $.ajax({

        // ajax submition 
       )};
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-25T12:29:58.533

试试这个......并使用`<form>`id 代替验证功能。

```
$(document).ready(function () {
    jQuery("#formid").validate({
        ignore:'',
        rules:{
            name:{
                required:true
            }
        },
        messages:{
            name:{
                required:'* Please enter name'
            }
        }
    });
}); 
```

我认为您使用的是较新版本的 jQuery 验证器插件，默认情况下会忽略隐藏元素。

在回复您**更新**的问题时，您可以这样做

```
$("#send").click(function (e) {
    e.preventDefault();
    var name = $('#name').val();

   if(name.length > 0){ //if length is greater than 0 then only fire ajax else show the error
       $.ajax({

        // ajax submition 
       )};
   }else
       //show error
       alert('Name not found');
   }
} 
```

# android - 将 xml 用于第二个活动的问题（R.id 问题）

> ID：14030559
> 
> 赞同：1
> 
> 时间：2012-12-25T12:14:03.400
> 
> 标签：android, android-layout

嘿伙计们，我对 Android 编程有点陌生，我有一个问题需要帮助。

所以我将使用官方 android 网站用于培训的第一个应用程序 (http://developer.android.com/training/basics/firstapp/starting-activity.html)

我对创建第二个活动部分感到困惑。因此，在他们通过意图后，他们使用 java 代码（而不是 XML）创建了一个新的 TextView，所以我尝试使用 xml 创建该 TextView。我在 xml 中为第二个活动创建了一个新的 TextView，并给它一个这样的 id：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    tools:context=".DisplayMessageActivity" >

    <TextView
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="@string/hello_world" 
        android:id="@+id/new_Text"/>

</LinearLayout> 
```

这是第二个活动的java代码：

```
package com.example.myfirstapp;

import android.os.Bundle;
import android.app.Activity;
import android.content.Intent;
import android.view.MenuItem;
import android.widget.TextView;
import android.support.v4.app.NavUtils;

    public class DisplayMessageActivity extends Activity {

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        // Get the message from the intent
        Intent intent = getIntent();
        String message = intent.getStringExtra(MainActivity.EXTRA_MESSAGE);

        // Create the text view
        TextView textView = (TextView) findViewById(R.id.new_Text);
        textView.setTextSize(40);
        textView.setText(message);

        // Set the text view as the activity layout
        setContentView(textView);

        // Show the Up button in the action bar.
        // getActionBar().setDisplayHomeAsUpEnabled(true);
    }

    @Override
    public boolean onOptionsItemSelected(MenuItem item) {
        switch (item.getItemId()) {
        case android.R.id.home:
            NavUtils.navigateUpFromSameTask(this);
            return true;
        }
        return super.onOptionsItemSelected(item);
    }

} 
```

在我更改之前，所有代码都运行良好。我变了

```
TextView textView = new TextView(this); 
```

到：

```
TextView textView = (TextView) findViewById(R.id.new_Text); 
```

但由于某种原因，它找不到 new_Text 并且 Eclipse 只建议来自我的 main.xml 的 id。为什么会这样？是因为 R.id.blabla 只从 main.xml 获取 id 吗？那么，如果它们不是来自 main.xml，我是否被迫使用 java 代码进行布局？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-25T12:43:03.637

这篇文章中有很多混乱，但对于初学者来说：

您打算最终对用户可见的每个活动都有自己的 XML 布局。如果您启动一个新的 Android 项目，默认情况下它将为您提供 1 个位于 res>layout 文件夹中的 XML 布局和 1 个活动，默认情况下将作为您面向用户的可视活动。

出于您的目的，一些简单的方法可以确定一个活动是否是一个“视觉”活动，包括：

*它扩展了活动或其他一些 android 超类 *它有一个“onCreate 方法（通常位于类的顶部）*在该 onCreate 方法内有一行名为 setContentView 的代码，看起来像这样。

> 设置内容视图（R.layout.httpex）；

setContentView 方法很重要，因为它有点像您的活动和 xml 布局之间的粘合剂。在 R.layout 之后。***_* __**是您想要使用的 XML 布局的名称。

只有在您将内容视图设置为适当的视图后，您才能使用您创建的 id 将您的 xml 布局中的元素或“视图”链接到您的活动。像这样

> TextView textView = (TextView) findViewById(R.id.new_Text);

如果将内容视图设置为 httpex.xml ，则只能链接到 httpex.xml 内的视图等...

我为newbs bc ik 有一个spft 点，这群人因为他们的无知而对新鲜血液来说是多么愚蠢，他们忘记了开始有多么困难，并开始觉得所有这些东西都是常识和显而易见的，但如果我是你，我会前往 thenewboston[dot]com 并观看整个系列，然后在这里发布许多类似的问题，以免被激怒。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-25T12:32:18.467

只有在将视图设置为活动的特定 XML 后，才能调用小部件。例如，如果您有一个活动调用 Main，您将使用一个 XML 作为该特定活动的 UI，因此您可以调用在该特定 XML 中创建的小部件。由于您没有发布代码，我只能猜测您正在尝试使用 TextView 生成第二个 XML，然后调用它。在活动开始时，当您设置 XML 布局时，您可以从中调用小部件，除非您膨胀视图以调用第二个 XML，我认为这不是您的情况。

我希望我正确理解了你的问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-25T12:44:36.007

**在findViewById()**方法之前添加**setContentView(** )方法。

# ruby-on-rails - zeus rspec 无法包含所需的文件，但仅 rspec 就可以了

> ID：14030561
> 
> 赞同：9
> 
> 时间：2012-12-25T12:14:15.740
> 
> 标签：ruby-on-rails, rspec, zeus

这是一个奇怪的问题，宙斯开始顺利运行。

rspec spec/ 它的工作完美无缺。

```
My spec_helper config is 
# encoding: UTF-8
require 'rubygems'

# This file is copied to spec/ when you run 'rails generate rspec:install'
ENV["RAILS_ENV"] ||= 'test'
require File.expand_path("../../config/environment", __FILE__)
require 'rspec/rails'
require 'email_spec'
require 'rspec/autorun'
require 'capybara/rspec'
require 'shoulda-matchers'
require 'shoulda/matchers/integrations/rspec'

Dir["./spec/support/**/*.rb"].sort.each {|f| require f}

RSpec.configure do |config|

  config.include FactoryGirl::Syntax::Methods
  config.include Devise::TestHelpers, type: :controller
  config.include Capybara::DSL, type: :request

  config.treat_symbols_as_metadata_keys_with_true_values = true
  config.mock_with :rspec
  config.use_transactional_fixtures = true
end 
```

我在 spec/support/shared_contexts.rb 中共享了上下文（通常包括在内）。`rspec spec/`通过所有测试，然后`zeus rspec spec/`通过所有测试并抛出这样的包含错误

`find_and_eval_shared'：找不到共享上下文“与签名用户”（ArgumentError）

它尝试通过`zeus rspec spec/models`，然后在正常工作时抛出“factory_girl”包含错误`rspec spec/models`。

看起来像这个问题[https://github.com/burke/zeus/issues/175](https://github.com/burke/zeus/issues/175)

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-01-02T19:24:36.127

我发现这种行为是由

```
 require 'rspec/autotest' 
```

在 spec_helper.rb

# matlab - 加速度计信号的无损压缩

> ID：14030573
> 
> 赞同：0
> 
> 时间：2012-12-25T12:15:51.157
> 
> 标签：matlab, compression, signal-processing, accelerometer, sensors

我正在寻找在 MATLAB 中压缩手机（Android）生成的加速度信号的最佳方法。我所说的“最佳”首先是指减少体积，但也包括计算复杂性，因为我将在未来的某个时候尝试在手机上实现它。我倾向于小波压缩：[http](http://www.mathworks.de/de/help/wavelet/ref/mswcmp.html) ://www.mathworks.de/de/help/wavelet/ref/mswcmp.html ，因为它已用于具有相似特征的心电图信号。我还发现了一些一般传感器的资源[http://compsens.eecs.umich.edu/sensing_tutorial.php](http://compsens.eecs.umich.edu/sensing_tutorial.php) 任何想法 StackOverflow？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2021-11-24T20:37:32.407

[这篇文章](https://blog.timescale.com/blog/time-series-compression-algorithms-explained/)有一个很好的概述。对于您的情况，Simple-8b 可能是一个很好的解决方案，但我还没有找到 Matlab 实现。

# openssl - 支持 FIPS 的 OpenSSL 和“依赖”

> ID：14030575
> 
> 赞同：3
> 
> 时间：2012-12-25T12:16:11.900
> 
> 标签：openssl, makefile, fips

我正在尝试为 iDevice 构建支持 FIPS 的 OpenSSL。我正在使用 FIPS 2.0 设备和 1.0.1 源。第 1 步是 OpenSSL FIPS 对象模块，进展顺利。第 2 步是支持 FIPS 的 OpenSSL。

要配置支持 FIPS 的 OpenSSL，我们执行：

```
./config -no-dtls --with-fiplibdir=/usr/local/ssl/iphoneos/lib 
```

`-no-dtls`是必需的，因为 Apple 省略了 STCP 和朋友。我不想让 STCP 和 DTLS 在这个过程中成为依赖项，所以这`-no-dtls`是显而易见的选择。此外，[第三方 STCP](http://lists.apple.com/archives/macnetworkprog/2008/May/msg00048.html)肯定会缺乏 Xcode 和交叉编译支持。

但是，`-no-dtls`我们运行的要求是`make depend`. `make depend`导致我：

```
openssl-1.0.1c jwalton$ make depend
making depend in crypto...
../util/domd: line 30: makedepend: command not found
mv: Makefile.new: No such file or directory
make[1]: *** [depend] Error 127
make: *** [depend] Error 1 
```

我尝试`makedepend`在这个系统上找到（2012 MBP，Xcode 4.5），但它的 MIA：

```
$ find /Applications/Xcode.app/ -name makedepend 2>/dev/null
$ find /usr/ -name makedepend 2>/dev/null
$ find /bin/ -name makedepend 2>/dev/null
$ 
```

`make depend`在这里是必不可少的。当我尝试在没有它的情况下继续时，我遇到了 STCP 问题。因此要求：

```
/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/usr/bin/llvm-gcc -I.. -I../.. -I../modes -I../asn1 -I../evp -I../../include  -DOPENSSL_THREADS -D_REENTRANT -DDSO_DLFCN -DHAVE_DLFCN_H -arch armv7 -O3 -isysroot /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS6.0.sdk -fomit-frame-pointer -fno-common   -c -o bss_dgram.o bss_dgram.c
bss_dgram.c:74:26: error: netinet/sctp.h: No such file or directory
bss_dgram.c: In function ‘BIO_new_dgram_sctp’:
bss_dgram.c:843: error: storage size of ‘auth’ isn’t known
bss_dgram.c:860: error: ‘SCTP_AUTH_CHUNK’ undeclared (first use in this function)
bss_dgram.c:860: error: (Each undeclared identifier is reported only once
bss_dgram.c:860: error: for each function it appears in.)
bss_dgram.c:860: error: invalid application of ‘sizeof’ to incomplete type ‘struct sctp_authchunk’ 
```

我去 X.org 取了包裹。由于缺少依赖项，该包不会从源构建。我看到这种情况正在无限期地进行（我以前一直在走这条路）。

我在这里有什么选择？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-12-02T05:15:07.063

> 要配置支持 FIPS 的 OpenSSL，我们执行：
> 
> ```
> ./config -no-dtls --with-fiplibdir=/usr/local/ssl/iphoneos/lib 
> ```

呵呵……应该是`./config fips -no-dtls`……

# ruby-on-rails - Custrom 404 错误，路由错误停止应用程序

> ID：14030576
> 
> 赞同：0
> 
> 时间：2012-12-25T12:16:26.830
> 
> 标签：ruby-on-rails, ruby-on-rails-3.1

在 ApplicationController 我添加了：

```
class ApplicationController < ActionController::Base

# This code never reached when routing error occurs
unless Rails.application.config.consider_all_requests_local
  rescue_from ActionController::RoutingError, with: :render_404
  rescue_from ActionController::UnknownController, with: :render_404
  rescue_from ActionController::UnknownAction, with: :render_404
  rescue_from ActiveRecord::RecordNotFound, with: :render_404
end 
```

当我试图捕获未找到页面的异常时，我注意到当触发路由错误时，上面的代码从未到达，因此，`render_404`从未调用

`Rails.application.config.consider_all_requests_local`是假的，有什么想法吗？

这是我得到的：

```
ActionController::RoutingError (No route matches [GET] "/not_there_route"):
  actionpack (3.2.5) lib/action_dispatch/middleware/debug_exceptions.rb:21:in `call'
  actionpack (3.2.5) lib/action_dispatch/middleware/show_exceptions.rb:56:in `call'
  railties (3.2.5) lib/rails/rack/logger.rb:26:in `call_app'
  railties (3.2.5) lib/rails/rack/logger.rb:16:in `call'
  actionpack (3.2.5) lib/action_dispatch/middleware/request_id.rb:22:in `call'
  rack (1.4.1) lib/rack/methodoverride.rb:21:in `call'
  rack (1.4.1) lib/rack/runtime.rb:17:in `call'
  activesupport (3.2.5) lib/active_support/cache/strategy/local_cache.rb:72:in `call'
  rack (1.4.1) lib/rack/lock.rb:15:in `call'
  actionpack (3.2.5) lib/action_dispatch/middleware/static.rb:62:in `call'
  railties (3.2.5) lib/rails/engine.rb:479:in `call'
  railties (3.2.5) lib/rails/application.rb:220:in `call'
  railties (3.2.5) lib/rails/railtie/configurable.rb:30:in `method_missing'
  rack (1.4.1) lib/rack/deflater.rb:13:in `call'
  rack (1.4.1) lib/rack/content_length.rb:14:in `call'
  railties (3.2.5) lib/rails/rack/log_tailer.rb:17:in `call'
  thin (1.3.1) lib/thin/connection.rb:80:in `block in pre_process'
  thin (1.3.1) lib/thin/connection.rb:78:in `catch'
  thin (1.3.1) lib/thin/connection.rb:78:in `pre_process'
  thin (1.3.1) lib/thin/connection.rb:53:in `process'
  thin (1.3.1) lib/thin/connection.rb:38:in `receive_data'
  eventmachine (0.12.10) lib/eventmachine.rb:256:in `run_machine'
  eventmachine (0.12.10) lib/eventmachine.rb:256:in `run'
  thin (1.3.1) lib/thin/backends/base.rb:61:in `start'
  thin (1.3.1) lib/thin/server.rb:159:in `start'
  rack (1.4.1) lib/rack/handler/thin.rb:13:in `run'
  rack (1.4.1) lib/rack/server.rb:265:in `start'
  railties (3.2.5) lib/rails/commands/server.rb:70:in `start'
  railties (3.2.5) lib/rails/commands.rb:55:in `block in <top (required)>'
  railties (3.2.5) lib/rails/commands.rb:50:in `tap'
  railties (3.2.5) lib/rails/commands.rb:50:in `<top (required)>' 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-25T19:57:40.923

您应该添加捕获所有路线，如下所示：

```
match "*path", :to => "application#routing_error" 
```

更详细的这里[http://www.bdunagan.com/2012/04/27/rescue_from-routingerror-in-rails-3/](http://www.bdunagan.com/2012/04/27/rescue_from-routingerror-in-rails-3/)

# android - startActivity 的致命异常

> ID：14030577
> 
> 赞同：0
> 
> 时间：2012-12-25T12:16:40.477
> 
> 标签：android

我有两个 Activiti（Smena 和 Sdacha） 我按下 Smena 上的按钮并打开 Sdacha。我需要将字符串从 textView Sdacha 发送到 Smena。当我按下 Sdacha 上的按钮时，出现错误

```
public class Sdacha extends Activity 
{
    @Override
    protected void onCreate(Bundle savedInstanceState) 
    {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.sdacha);    

        Button but10=(Button) findViewById(R.id.button10);
        but10.setOnClickListener(
                new OnClickListener() 
                {
                    @Override
                    public void onClick(View arg0) 
                    {
                        Intent intent1=new Intent(Sdacha.this,Smena.class);

                             startActivity(intent1);
                    }
            });

    }
} 
```

>

```
 12-25 18:05:40.130: WARN/dalvikvm(378): threadid=1: thread exiting
> with uncaught exception (group=0x40014760) 12-25 18:05:40.151:
> ERROR/AndroidRuntime(378): FATAL EXCEPTION: main 12-25 18:05:40.151:
> ERROR/AndroidRuntime(378): java.lang.RuntimeException: Unable to start
> activity ComponentInfo{com.example.master/com.example.master.Smena}:
> java.lang.NullPointerException 12-25 18:05:40.151:
> ERROR/AndroidRuntime(378):     at
> android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1815)
> 12-25 18:05:40.151: ERROR/AndroidRuntime(378):     at
> android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1831)
> 12-25 18:05:40.151: ERROR/AndroidRuntime(378):     at
> android.app.ActivityThread.access$500(ActivityThread.java:122) 12-25
> 18:05:40.151: ERROR/AndroidRuntime(378):     at
> android.app.ActivityThread$H.handleMessage(ActivityThread.java:1024)
> 12-25 18:05:40.151: ERROR/AndroidRuntime(378):     at
> android.os.Handler.dispatchMessage(Handler.java:99) 12-25
> 18:05:40.151: ERROR/AndroidRuntime(378):     at
> android.os.Looper.loop(Looper.java:132) 12-25 18:05:40.151:
> ERROR/AndroidRuntime(378):     at
> android.app.ActivityThread.main(ActivityThread.java:4123) 12-25
> 18:05:40.151: ERROR/AndroidRuntime(378):     at
> java.lang.reflect.Method.invokeNative(Native Method) 12-25
> 18:05:40.151: ERROR/AndroidRuntime(378):     at
> java.lang.reflect.Method.invoke(Method.java:491) 12-25 18:05:40.151:
> ERROR/AndroidRuntime(378):     at
> com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:841)
> 12-25 18:05:40.151: ERROR/AndroidRuntime(378):     at
> com.android.internal.os.ZygoteInit.main(ZygoteInit.java:599) 12-25
> 18:05:40.151: ERROR/AndroidRuntime(378):     at
> dalvik.system.NativeStart.main(Native Method) 12-25 18:05:40.151:
> ERROR/AndroidRuntime(378): Caused by: java.lang.NullPointerException
> 12-25 18:05:40.151: ERROR/AndroidRuntime(378):     at
> com.example.hotdog_master.Smena.onCreate(Smena.java:42) 12-25
> 18:05:40.151: ERROR/AndroidRuntime(378):     at
> android.app.Activity.performCreate(Activity.java:4397) 12-25
> 18:05:40.151: ERROR/AndroidRuntime(378):     at
> android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1048)
> 12-25 18:05:40.151: ERROR/AndroidRuntime(378):     at
> android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1779)
> 12-25 18:05:40.151: ERROR/AndroidRuntime(378):     ... 11 more 
```

Smena Activiti 这是收银员 Smena 活动代码的活动：

```
public class Smena extends Activity 
{
    public Nomenklatura Asortiment=new Nomenklatura(100);
    public static final String DEBUG_TAG = "myLogs";
    ArrayList<String> data =new ArrayList<String> ();
    ArrayList<String> data2 =new ArrayList<String> (4);
    GridView gvMain;
    GridView gvMain2;
    ArrayAdapter<String> adapter;
    ArrayAdapter<String> adapter2;
    double Sum=0;

    @Override
    protected void onCreate(Bundle savedInstanceState) 
    {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.smena); 
        Asortiment=(Nomenklatura) getIntent().getExtras().getSerializable("Nomenklatura");

        data2.add("СУММА");
        data2.add("0");
        data2.add("СДАЧА");
        data2.add("0");

        adapter = new ArrayAdapter<String>(this, R.layout.item, R.id.tvText, data);
        gvMain = (GridView) findViewById(R.id.gridView1);
        gvMain.setAdapter(adapter);

        adapter2 = new ArrayAdapter<String>(this, R.layout.item2, R.id.tvText, data2);
        gvMain2 = (GridView) findViewById(R.id.gridView2);
        gvMain2.setAdapter(adapter2);

        Button but1=(Button) findViewById(R.id.button1);
        but1.setOnClickListener(
                new OnClickListener() 
                {
                    @Override
                    public void onClick(View arg0) 
                    {
                        ButtonOn (1);
                    }
            });
        Button but21=(Button) findViewById(R.id.button21);
        but21.setOnClickListener(
                new OnClickListener() 
                {
                    @Override
                    public void onClick(View arg0) 
                    {
                        ButtonDel();
                    }
            });

        Button but22=(Button) findViewById(R.id.button22);
        but22.setOnClickListener(
                new OnClickListener() 
                {
                    @Override
                    public void onClick(View arg0) 
                    {
                        data.clear();
                        adapter.clear();

                    }
            });

        Button but23=(Button) findViewById(R.id.button23);
        but23.setOnClickListener(
                new OnClickListener() 
                {
                    @Override
                    public void onClick(View arg0) 
                    {
                        Intent intent1=new Intent(Smena.this,Login.class);
                        // intent1.putExtra("Sdacha", Asortiment);
                         startActivity(intent1);

                    }
            });
    }
    private void ButtonDel()
    {
        int cnt=    data.size();
        data.remove(cnt-1);
        data.remove(cnt-2);
        adapter = new ArrayAdapter<String>(this, R.layout.item, R.id.tvText, data);
        gvMain.setAdapter(adapter);
    }

    private void ButtonOn (int Art)
    {
        String name=    Asortiment.name.get(1);
        String price=   Asortiment.price.get(1).toString();
        data.add(name);
        data.add(price);
        adapter = new ArrayAdapter<String>(this, R.layout.item, R.id.tvText, data);
        gvMain.setAdapter(adapter); 
    }
    private void CheckSum()
    {
        Sum=0;
        for(int k=1;k<data.size();k=k+2)
        {
            Sum=Sum+Double.parseDouble(data.get(k));
        }
    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-25T12:21:43.477

请尝试这样

```
 startActivity(new Intent(this,Smena.class)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-25T12:53:15.507

如果定义和声明正确，请检查以下内容：

1) 如果根据相应的 XML 的所有 id 都是正确的。

2) 活动在 Manifest 文件中定义。

3) 检查 Smena Activity 中的第 42 行是否有错误。

试试看，让我知道。如果可能，包括这些文件的代码以供进一步探索。

# python - 在python中停止定时线程

> ID：14030578
> 
> 赞同：1
> 
> 时间：2012-12-25T12:16:47.203
> 
> 标签：python, multithreading

当主脚本被杀死时，我试图停止 python 中的线程。但是由于线程每小时启动一次，我如何立即停止线程？

```
def interval():
    ###the actual work being done here###
    try:
        threading.Timer(3600, interval).start()
    except (KeyboardInterrupt, SystemExit):
        print "Exiting"
        cleanup_stop_interval();
        sys.exit()
interval() 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-25T12:24:07.890

像这样杀死一个线程是个坏主意，因为它可能

*   持有资源
*   成为其他线程的父级

处理这个问题的正确方法是有一个 exit_request 标志，每个线程都会定期检查它是否是他退出的时间，并等待它通过使用退出`join()`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-25T13:36:08.863

您可以考虑使用`sched.scheduler`而不是`threading.Timer`此处。有一些区别需要注意：

*   `sched.scheduler`在主进程中运行所有内容，而不是在线程中。
*   如果当前进程花费的时间超过`delay`几秒，则计划的事件将在当前调用完成*后*`interval`开始 。`threading.Timer`工作方式不同——如果完成的工作 `interval`超过一个小时，就会有多个线程 `interval`同时运行。

我猜你真的不希望多个`interval`同时运行，所以`sched.scheduler`在这里可能比`threading.Timer`.

* * *

```
import timeit
import sched
import time
import logging
import sys

logger = logging.getLogger(__name__)
logging.basicConfig(level = logging.DEBUG,
                    format = '%(threadName)s: %(asctime)s: %(message)s',
                    datefmt = '%H:%M:%S')
schedule = sched.scheduler(timeit.default_timer, time.sleep)
delay = 5 # change to 3600 to schedule event in 1 hour

def interval():
    logger.info('All work and no play makes Jack a dull boy.')
    schedule.enter(delay = delay, priority = 1, action = interval, argument = ())
    # Uncomment this to see how scheduled events are delayed if interval takes a
    # long time. 
    # time.sleep(10) 

schedule.enter(delay = 0, priority = 1, action = interval, argument = ())
try:
    schedule.run()
except (KeyboardInterrupt, SystemExit):
    print('Exiting')
    sys.exit() 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-25T12:18:20.603

你不能从另一个线程中停止一个线程。您可能想要的是使线程成为守护线程，这意味着即使线程仍然处于活动状态，进程也会退出：

[http://docs.python.org/2/library/threading.html#threading.Thread.daemon](http://docs.python.org/2/library/threading.html#threading.Thread.daemon)

> 守护进程
> 
> 一个布尔值，指示此线程是否为守护线程 (True) 或不是 (False)。这必须在调用 start() 之前设置，否则会引发 RuntimeError。它的初始值继承自创建线程；主线程不是守护线程，因此在主线程中创建的所有线程默认为 daemon = False。
> 
> 当没有活着的非守护线程时，整个 Python 程序退出。

请注意，如果进程在该线程执行其工作的中间结束，您仍然可能会遇到问题。如果你想防止这种情况发生，那么让线程经常唤醒以检查它是否应该干净地退出。

# android - 在实现 SlidingDrawer 时，handle 属性必须引用现有的子元素

> ID：14030581
> 
> 赞同：2
> 
> 时间：2012-12-25T12:17:34.083
> 
> 标签：android, slidingdrawer

我正在尝试实施`SlidingDrawer`. 我的应用程序崩溃了。

**文件**

```
<?xml version="1.0" encoding="UTF-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

    <SlidingDrawer
        android:id="@+id/drawer"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:content="@+id/content"
        android:handle="@+id/handle" >
    </SlidingDrawer>

    <LinearLayout
        android:id="@+id/contentLayout"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:background="#C0C0C0"
        android:gravity="center|top"
        android:orientation="vertical"
        android:padding="10dip" >

        <include
            android:id="@+id/include1"
            android:layout_width="fill_parent"
            android:layout_height="60dp"
            layout="@layout/header_history" >
        </include>

        <ListView
            android:id="@android:id/list"
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            android:cacheColorHint="#00000000"
            android:divider="@android:color/black"
            android:dividerHeight="1.0sp"
            android:textColor="#000000" />
    </LinearLayout>

</LinearLayout> 
```

**日志猫**

```
12-25 17:40:33.582: E/AndroidRuntime(454): FATAL EXCEPTION: main
12-25 17:40:33.582: E/AndroidRuntime(454): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.example.demohistory/com.example.demohistory.History}: java.lang.IllegalArgumentException: The handle attribute is must refer to an existing child.
12-25 17:40:33.582: E/AndroidRuntime(454):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2663)
12-25 17:40:33.582: E/AndroidRuntime(454):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2679)
12-25 17:40:33.582: E/AndroidRuntime(454):  at android.app.ActivityThread.access$2300(ActivityThread.java:125)
12-25 17:40:33.582: E/AndroidRuntime(454):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2033)
12-25 17:40:33.582: E/AndroidRuntime(454):  at android.os.Handler.dispatchMessage(Handler.java:99)
12-25 17:40:33.582: E/AndroidRuntime(454):  at android.os.Looper.loop(Looper.java:123)
12-25 17:40:33.582: E/AndroidRuntime(454):  at android.app.ActivityThread.main(ActivityThread.java:4627)
12-25 17:40:33.582: E/AndroidRuntime(454):  at java.lang.reflect.Method.invokeNative(Native Method)
12-25 17:40:33.582: E/AndroidRuntime(454):  at java.lang.reflect.Method.invoke(Method.java:521)
12-25 17:40:33.582: E/AndroidRuntime(454):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
12-25 17:40:33.582: E/AndroidRuntime(454):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
12-25 17:40:33.582: E/AndroidRuntime(454):  at dalvik.system.NativeStart.main(Native Method)
12-25 17:40:33.582: E/AndroidRuntime(454): Caused by: java.lang.IllegalArgumentException: The handle attribute is must refer to an existing child.
12-25 17:40:33.582: E/AndroidRuntime(454):  at android.widget.SlidingDrawer.onFinishInflate(SlidingDrawer.java:239)
12-25 17:40:33.582: E/AndroidRuntime(454):  at android.view.LayoutInflater.rInflate(LayoutInflater.java:626)
12-25 17:40:33.582: E/AndroidRuntime(454):  at android.view.LayoutInflater.rInflate(LayoutInflater.java:621)
12-25 17:40:33.582: E/AndroidRuntime(454):  at android.view.LayoutInflater.inflate(LayoutInflater.java:407)
12-25 17:40:33.582: E/AndroidRuntime(454):  at android.view.LayoutInflater.inflate(LayoutInflater.java:320)
12-25 17:40:33.582: E/AndroidRuntime(454):  at android.view.LayoutInflater.inflate(LayoutInflater.java:276)
12-25 17:40:33.582: E/AndroidRuntime(454):  at com.android.internal.policy.impl.PhoneWindow.setContentView(PhoneWindow.java:198)
12-25 17:40:33.582: E/AndroidRuntime(454):  at android.app.Activity.setContentView(Activity.java:1647)
12-25 17:40:33.582: E/AndroidRuntime(454):  at com.example.demohistory.History.onCreate(History.java:59)
12-25 17:40:33.582: E/AndroidRuntime(454):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
12-25 17:40:33.582: E/AndroidRuntime(454):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2627)
12-25 17:40:33.582: E/AndroidRuntime(454):  ... 11 more 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-26T05:45:36.830

```
Caused by: java.lang.IllegalArgumentException: The handle attribute is must refer to an existing child. 
```

如您指定的那样发生此错误

```
android:handle="@+id/handle" 
```

在 SlidingDrawer 的属性中。但是您没有任何现有的 ID 为“句柄”的滑动抽屉的子项。

检查句柄属性的[文档：](http://developer.android.com/reference/android/widget/SlidingDrawer.html)

> 代表抽屉把手的子项标识符。
> 
> 必须是对另一个资源的引用，格式为“@[+][package:]type:name”或格式为“?[package:][type:]name”的主题属性。

因此，您必须将 xml 文件修改为：

```
<SlidingDrawer
        android:id="@+id/drawer"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:content="@+id/content"
        android:handle="@+id/handle" >

    <ImageView
             android:id="@id/handle"
             android:layout_width="88dip"
             android:layout_height="44dip" />

</SlidingDrawer> 
```

希望能帮助到你。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-06T07:49:02.530

从 SDK 复制 SlidingDrawer 代码并将其导入我的项目时，我遇到了类似的问题。我的问题是布局文件的命名空间。

我通过正确识别我所指的属性来解决问题，如下所示：

```
<FrameLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:dd="http://schemas.android.com/apk/res/com.example.actionbarslider"
android:layout_width="match_parent"
android:layout_height="match_parent">

<com.example.actionbarslider.MySlidingDrawer
    android:id="@+id/drawer"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    dd:content="@+id/mycontent"
    dd:handle="@+id/handle"
    dd:orientation="0" >

    <ImageView
        android:id="@id/handle"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:background="@drawable/exit_light" />

     <LinearLayout
        android:id="@id/mycontent"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:orientation="vertical" >

        <TextView
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:padding="20dp"
            android:text="Hello"
            android:textSize="20sp" />

        <TextView
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:padding="20dp"
            android:text="World"
            android:textSize="20sp" />
    </LinearLayout>       

</com.example.actionbarslider.MySlidingDrawer>

<LinearLayout 
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >

    <TextView 
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Top Drawer"/>
</LinearLayout> 
```

注意：我创建了自己的命名空间来引用样式属性，匹配标准的“android”命名空间。"xmlns:dd="...."。

我对 attrs.xml 文件做了同样的事情，如下所示：

```
<?xml version="1.0" encoding="utf-8"?> 
```

```
<declare-styleable name="MySlidingDrawer">

    <!-- Identifier for the child that represents the drawer's handle. -->
    <attr name="handle" format="reference" />

    <!-- Identifier for the child that represents the drawer's content. -->
    <attr name="content" format="reference" />

    <!-- Orientation of the SlidingDrawer. -->
    <attr name="orientation" format="integer"/>

    <!-- Extra offset for the handle at the bottom of the SlidingDrawer. -->
    <attr name="bottomOffset" format="dimension"  />

    <!-- Extra offset for the handle at the top of the SlidingDrawer. -->
    <attr name="topOffset" format="dimension"  />

    <!-- Indicates whether the drawer can be opened/closed by a single tap
         on the handle.  (If false, the user must drag or fling, or click
         using the trackball, to open/close the drawer.)  Default is true. -->
    <attr name="allowSingleTap" format="boolean" />

    <!-- Indicates whether the drawer should be opened/closed with an animation when the user clicks the handle. Default is true. -->
    <attr name="animateOnClick" format="boolean" />
</declare-styleable> 
```

现在都在工作。

# php - 用插入逗号的php创建csv文件

> ID：14030586
> 
> 赞同：1
> 
> 时间：2012-12-25T12:18:29.473
> 
> 标签：php, csv

> **可能重复：**
> [使用 PHP 在 CSV 文件中写入逗号](https://stackoverflow.com/questions/7545733/write-a-comma-in-a-csv-file-with-php)

我正在使用 php 使用以下简单代码创建一个 csv 文件：

```
 header('Expires: 0');
    header('Cache-control: private');
    header('Cache-Control: must-revalidate, post-check=0, pre-check=0');
    header('Content-Description: File Transfer');
    header('Content-Type: application/vnd.ms-excel');
    header('Content-disposition: attachment; filename="positionsCountryReport.csv"');
    header('Content-Transfer-Encoding: binary');

    apache_setenv('no-gzip', 0);
    @ini_set('zlib.output_compression', 1);
    @ini_set('implicit_flush', 1);
    for ($i = 0; $i < ob_get_level(); $i++) { @ob_end_flush(); }
    ob_implicit_flush(1); 
```

而不是将数据放入单元格中，我只需使用“回声”和我想要放置的数据。为了移动到 nexr 单元格，我正在呼应“，”一个逗号。

我现在需要在我的单元格中放置逗号，但是当我这样做时......它会显示到下一个单元格而不是逗号。

# html - 我需要使用 css 隐藏树中的最后一个节点

> ID：14030589
> 
> 赞同：0
> 
> 时间：2012-12-25T12:18:39.320
> 
> 标签：html, css

我有使用 html、css 构建的树我需要隐藏树中的最后一个节点我的 css 代码是：

`div ul li ul li ul li ul.treeview{ display: none; }`

但没有工作，有什么问题？

标记：

```
<div id="field-term-parent-value-wrapper" class="form-item form-item-labeled">
    <div id="field-term-parent-value" class="tm-processed">
<ul class="treeview">
<li class="collapsable">
<ul class="treeview" style="display: block;">
<li class="collapsable">
<ul class="treeview" style="display: block;">
  data 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-25T13:05:47.410

尝试：

```
div ul li ul li ul li ul.treeview { display: none !important; } 
```

因为您在元素中的内联样式会覆盖您为此元素定义的其他样式。

PS 我假设你知道你的标记并在 CSS 声明中输入正确的数字`ul`和。`li`您粘贴的内容表明那里只有三个`ul`和两个`li`，所以这会起作用：

```
div ul li ul li ul.treeview { display: none !important; } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-25T13:17:42.223

我发现在这些情况下有效的是切换类名而不是直接设置“显示：块”。这可以防止需要疯狂的选择器或使用 !important。

```
/* the default is display:block, so all we need
   is this one class */

.closed {
    display: none;
} 
```

* * *

```
<li class="collapsable">
<ul class="treeview">
<li class="collapsable">
<ul class="treeview" class="closed"> 
```

# c++ - Visual Studio 2012 中的 getline() 函数工作方式不同，直接跳到最后一行

> ID：14030590
> 
> 赞同：3
> 
> 时间：2012-12-25T12:18:44.473
> 
> 标签：c++, csv, getline, sstream, import-from-csv

这是我第一次使用 getline()，我认为它有问题！这是我的代码：

```
ifstream file ("new2.csv");
string val;
while (file.good())
{
    getline (file,val);
}
cout<<val; 
```

并且输出始终是 csv 文件的最后一行，无论我在 csv 文件中有多少行。

我的 csv 文件是一个简单的分隔文件。喜欢：

```
cat,dog,a,b,c,hello,world
monkey,flower,text,word 
```

我认为 getline 应该读取 csv 文件的第一行，但在这种情况下，我的输出将是：`monkey,flower,text,word`

这发生在 csv 文件中的任意数量的行中。我无法找出可能是什么原因。请帮我。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-25T12:22:26.990

当然，它只会打印从文件中读取的最后一行，因为 cout 在循环外打印，并且在读取完所有行后打印最后一行。

你应该这样写：

```
ifstream file ("new2.csv");
string val;
while (file.good())
{
    getline (file,val);
    cout<< val << endl;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-25T12:20:47.957

```
while (file.good())
{
    getline (file,val);
}
cout<<val; 
```

你`cout`在循环之外，所以你只会打印最后一行。

# php - php ob_get_contents 失败

> ID：14030594
> 
> 赞同：0
> 
> 时间：2012-12-25T12:19:06.913
> 
> 标签：php, output-buffering, ob-get-contents

我正在使用 ob_get_contents() 从 php 文件创建一个 html 文件。在开发机器上有时它可以工作，但在测试机器上它不起作用。

```
<html>
<body>
    <div>
       //some html content
    </div>
</body>
</html>

<?php
    ob_start();
    file_put_contents('./pdfreportresult.html', ob_get_contents());

    require_once (APP_DIR . 'assessment/wkhtmltopdf/snappy-master/src/autoload.php');

    use Knp\Snappy\Pdf;

    $snappy = new Pdf(APP_DIR . 'assessment/wkhtmltopdf/wkhtmltopdf.exe');

    header('Content-Type: application/pdf');
    header('Content-Disposition: attachment; filename="report.pdf"');
    echo $snappy->getOutput(APP_DIR . 'assessment/pdfreportresult.html');
    ob_end_clean();
?> 
```

我检查了测试机的 php.ini 中的 output_buffering，它就像在开发机器上一样“打开”。当我检查我创建的 html 文件“pdfreportresult.html”时，它为空或存在一半内容。

也许问题可能与缓冲区大小有关，我尝试使用 ob_clean() 而不是 ob_end_clean() 仍然无法正常工作。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-25T12:21:00.843

在开始输出内容*之前*启动缓冲区。此外，完成后清洁缓冲区。

```
<?php
ob_start();
?>
<html>
<body>
    <div>
       //some html content
    </div>
</body>
</html>

<?php
file_put_contents('./pdfreportresult.html', ob_get_contents());
ob_end_clean();
... 
```

# java - 一个“finalize”调用如何破坏 GC/JVM？

> ID：14030599
> 
> 赞同：12
> 
> 时间：2012-12-25T12:20:12.153
> 
> 标签：java

在调查[为什么 ThreadPoolExecutor 在 Eclipse 和命令行中运行 Java 程序时表现不同？](https://stackoverflow.com/questions/13548809/why-threadpoolexecutor-behaves-differently-when-running-java-program-in-eclipse)我写了一个测试，抛出一个非常奇怪的 OutOfMemoryError (max mem = 256 Mb)

```
class A {
    byte[] buf = new byte[150_000_000];

    protected void finalize() {
        int i = 1;
    }
}

A a1 = new A();
a1 = null;
A a2 = new A(); 
```

注释掉`int i = 1`并且测试有效。据我了解，什么时候`finalize`是空的 HotSpot 只是忽略它。但是一个实际上是空的`finalize`调用怎么会破坏 GC/JVM 呢？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-25T12:27:01.380

> 但是一个空的 finalize 调用怎么会破坏 GC/JVM 呢？

当有终结器时，对象会比其他情况下多存活一轮垃圾收集（因为对象本身必须保持活动状态，直到它被终结）。因此，如果您有一个带有终结器的大对象，那自然会导致`OutOfMemoryError`在没有终结器的情况下发生。

在这段代码中：

```
A a1 = new A();
a1 = null;
A a2 = new A(); 
```

... GC 将在最后一行触发，以尝试找到足够的内存来分配第二行`A`。不幸的是，它不能垃圾收集第一个`A`（以及它引用的数组），因为终结器还没有运行。它*不会*等到终结器完成，然后再次尝试垃圾收集 - 它只是抛出`OutOfMemoryError`.

# php - 使用 AJAX 从 MySQL 获取数据

> ID：14030600
> 
> 赞同：1
> 
> 时间：2012-12-25T12:20:13.060
> 
> 标签：php, javascript, jquery, ajax

我需要从 php 文件中的表单中获取输入（日期），并使用 date 变量从 mysql 数据库中选择数据并在同一个 php 文件中返回一个数组而不刷新页面。现在，我有 3 个文件：`index.php`、`global.js`和`date.php`

`index.php`接受输入（在这种情况下为日期）

```
Date: <input type="text" id="date">
  <input type="submit" id="date-submit" value="Submit">
  <div id="date-data"></div>
  <script src="http://code.jquery.com/jquery-1.8.3.min.js"></script>
    <script src="js/global.js"></script> 
```

`global.js`监听提交按钮的点击并将输入（日期）发布到`date.php`

```
$('input#date-submit').on('click', function() {
    var date = $('input#date').val();
    $.post('../ajax/date.php', {date: date}, function(data) {
        $('div#date-data').html(data);
        alert(data);
    });

}); 
```

`date.php`获取日期并查询 mysql 数据库以返回一个数组。这个数组需要传回，`index.php`但我不知道该怎么做。

```
<?php 

$con = mysql_connect('localhost', 'root', 'pass');
mysql_select_db('gymflow', $con);
  $date = $_POST['date'];
  $query = mysql_query("SELECT * FROM table WHERE `date` = $date");
    $values = array();

  while ($row = mysql_fetch_array($query))
  {
    $values[] = $row['utilization'];
  }
echo json_encode($values);

?> 
```

理想情况下，我需要能够将`$values`变量从`date.php`传递到`$values`变量`index.php`

必须有一个更简单的方法来做到这一点......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-25T12:32:58.770

您的 AJAX 调用的目的是不刷新`index.php`，而是将结果`data.php`直接传递到第一页。您可以通过 javascript 回调修改 DOM，并且应该在`data.php`. `index.php`让我们知道 的输出没有任何意义`data.php`，因为当进行 Javascript 调用时，您的第一个页面已经被处理并发送到客户端，并且可能已经在浏览器窗口中呈现。

如果您需要知道后续请求中的输入值，`index.php`您可以将值存储在用户会话中。

# php - 简单的 DELETE 查询不起作用

> ID：14030602
> 
> 赞同：0
> 
> 时间：2012-12-25T12:20:35.773
> 
> 标签：php, sql, sql-delete

这是我应该能够做的事情，但我在过去的一个小时里一直试图在这里看到这个问题，但我做不到。这是一个简单的删除功能，通过使用 ID 标签来删除条目。它正在通过`delete_category.php`. 如果它有助于我的 sql 表被调用`blog_categories`。

它不会引发错误。尝试在其上使用 echo mysql_error() 但没有。它只是充当死链接并刷新页面。

任何帮助将不胜感激。

**博客.php：**

```
 function delete($table, $id) {
        $table = mysql_real_escape_string($table);
        $id = (int) $id;

        mysql_query("DELETE FROM {$table} WHERE id = {$id}");
    } 
```

**通过以下方式链接删除功能：**

```
<a href="delete_category.php?id=<?php echo $category['id']; ?>">Delete</a> 
```

**删除_category.php**

```
<?php
include("../script/dbconnect.php");
include("../script/blog.php");

if ( ! isset($_GET['id']) ) {
header('location: cms.php');
die();
}

delete('blog_categories', $_GET['id']);

header('location:category_list.php');
die();
?> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-25T22:26:48.827

因此，这不是一个完整的*答案*，但评论字段太短了，无法为您指出正确的故障排除方向。

您的代码已损坏，但并非您所期望的那样。

1.  GET 请求[*必须*](http://www.w3.org/Protocols/rfc2616/rfc2616-sec9.html)是[幂等](http://en.wikipedia.org/wiki/Idempotence)的。也就是说，除了提供内容之外，它们不会产生副作用。通过将删除功能绑定到 GET 请求，您会产生副作用。这有一些相当严重的后果。例如，一些浏览器和缓存机制可以预取链接。还要考虑一下如果搜索蜘蛛抓取该页面最终会做什么。

    把那个 GET 变成一个 POST。也许改用表单和按钮？

2.  你用的真棒[`mysql_real_escape_string`](http://php.net/mysql_real_escape_string)，但你在这里的使用是不正确的。 `mres`旨在将字符数据编码为字符串的一部分。*您在标识符*上使用它——一个表名。标识符不共享与字符串相同的转义语义，尤其是在引号之外使用时。

    只要`delete`函数的第一个参数从不来自用户，你就可以跳过`mres`这里。

3.  您没有检查[`mysql_query`](http://php.net/mysql_query). 手册上说：

    > 对于其他类型的 SQL 语句，`INSERT`, `UPDATE`, `DELETE`,`DROP`等，mysql_query()`TRUE`在成功或`FALSE`错误时返回。

    你把结果扔掉了。您应该检查它*是否不是* `false`，然后调用[`mysql_affected_rows`](http://php.net/mysql_affected_rows)以确保仅删除了一行。如果`mysql_query` *是* `false`，那么您可以检查`mysql_error`。

进行这些更改后，您需要更改您的 delete_category.php 脚本以帮助进行故障排除：

1.  将以下两行添加到最顶部：

    ```
      错误报告（-1）；
      ini_set('display_errors', true);

    ```

2.  将所有`header`s 更改为`echo`s。立即重定向将掩盖任何错误。
3.  使用`exit`而不是`die`. 虽然他们做同样的事情，但使用`die`经常专门用于“出现问题以至于我现在必须退出”的上下文中，而`exit`，这只是，嗯，呃......退出。

任何实际出错的事情都应该非常明显。

如果您仍然没有看到任何不正确的事情发生，并且行仍然没有被删除，请尝试`SELECT COUNT(*) FROM ...`在删除之前和之后添加一个，使用相同的表名和`WHERE`子句。这将有助于我们进一步排除故障。

从长远来看，您真的想从`mysql_` [PDO](http://php.net/book.pdo)或[mysqli](http://php.net/book.mysqli)开始切换。PHP 的下一个主要版本 5.5 版将*弃用*该`mysql_`函数系列。

# objective-c - NetBeans 无法识别 Makefile.am

> ID：14030605
> 
> 赞同：0
> 
> 时间：2012-12-25T12:20:50.483
> 
> 标签：objective-c, ios, c, netbeans, compilation

我来自 Objective-C/Xcode 背景。

我习惯于使用已经导入 XCode 的 C 项目，但现在我想分析一个我有兴趣与我的项目集成的[算法的现有](http://www.jwz.org/doc/threading.html)[实现。](http://web.mit.edu/ghudson/dev/nsanch/balsa-1.2.pre2/src/balsa-index-threading.c)

只是这个项目完全用 C 编写，与 Objective-C/Xcode 等无关。

我不确定在 Mac 上查看纯[C 项目](http://balsa.gnome.org/git-help.html)的最佳方式是什么，因此我为 C/C++ 安装了 NetBeans。

问题是当我尝试在 NetBeans 上创建一个**新项目**`C/C++ Project with Existing Sources`并选择它时会抱怨

```
no make files or configure scripts were found 
```

在根目录中.. 虽然它显然有一个 Makefile.am

我知道 Balsa 项目是为 linux 编写的，但我对构建二进制文件不感兴趣，我只想以 IDE 的方式查看源代码（即我可以单击函数调用并查看它的实现位置等ETC）。

所以简而言之，**我的问题是**为什么 NetBeans 不能识别我的`Makefile.am`?

这里的内容仅供参考`Makefile.am`

```
#intl dir needed for tarball --disable-nls build.
DISTCHECK_CONFIGURE_FLAGS=--disable-extra-mimeicons --without-gnome --without-html-widget
SUBDIRS = po sounds images doc libbalsa libinit_balsa src
# set tar in case it is not set by automake or make

man_MANS=balsa.1

pixmapdir = $(datadir)/pixmaps
pixmap_DATA = gnome-balsa2.png

desktopdir = $(datadir)/applications
desktop_in_files = balsa.desktop.in balsa-mailto-handler.desktop.in
desktop_DATA = balsa.desktop balsa-mailto-handler.desktop
@INTLTOOL_DESKTOP_RULE@

balsa_extra_dist =      \
    GNOME_Balsa.server.in   \
    HACKING         \
    balsa-mail-style.xml    \
    balsa-mail.lang     \
    balsa.1.in      \
    balsa.spec.in       \
    bootstrap.sh        \
    docs/mh-mail-HOWTO  \
    docs/pine2vcard     \
    docs/vconvert.awk   \
    $(desktop_in_files) \
    gnome-balsa2.png    \
    intltool-extract.in \
    intltool-merge.in   \
    intltool-update.in  \
    mkinstalldirs

if BUILD_WITH_G_D_U
balsa_g_d_u_extra_dist = gnome-doc-utils.make
endif

if !BUILD_WITH_UNIQUE
serverdir               = $(libdir)/bonobo/servers
server_in_files         = GNOME_Balsa.server
server_DATA             = $(server_in_files:.server.in=.server)

$(server_in_files): $(server_in_files).in
    sed -e "s|\@bindir\@|$(bindir)|" $< > $@

endif

EXTRA_DIST =            \
    $(balsa_extra_dist)     \
    $(balsa_g_d_u_extra_dist)

if BUILD_WITH_GTKSOURCEVIEW2
gtksourceviewdir = $(BALSA_DATA_PREFIX)/gtksourceview-2.0
gtksourceview_DATA = balsa-mail.lang        \
    balsa-mail-style.xml
endif

DISTCLEANFILES = $(desktop_DATA) $(server_DATA) \
    intltool-extract intltool-merge intltool-update \
    gnome-doc-utils.make

dist-hook: balsa.spec
    cp balsa.spec $(distdir)

@MAINT@RPM: balsa.spec
@MAINT@ rm -f *.rpm
@MAINT@ $(MAKE) distdir="$(PACKAGE)-@BALSA_VERSION@" dist
@MAINT@ cp $(top_srcdir)/rpm-po.patch $(top_builddir)/rpm-po.patch
@MAINT@ rpm -ta "./$(PACKAGE)-@BALSA_VERSION@.tar.gz"
@MAINT@ rm $(top_builddir)/rpm-po.patch
@MAINT@ -test -f "/usr/src/redhat/SRPMS/$(PACKAGE)-@VERSION@-@BALSA_RELEASE@.src.rpm" \
@MAINT@     && cp -f "/usr/src/redhat/SRPMS/$(PACKAGE)-@VERSION@-@BALSA_RELEASE@.src.rpm" .
@MAINT@ -for ping in /usr/src/redhat/RPMS/* ; do \
@MAINT@     if test -d $$ping ; then \
@MAINT@         arch=`echo $$ping |sed -e 's,/.*/\([^/][^/]*\),\1,'` ; \
@MAINT@         f="$$ping/$(PACKAGE)-@VERSION@-@BALSA_RELEASE@.$$arch.rpm" ; \
@MAINT@         test -f $$f && cp -f $$f . ; \
@MAINT@     fi ; \
@MAINT@ done

@MAINT@snapshot:
@MAINT@ $(MAKE) distdir=$(PACKAGE)-`date +"%y%m%d"` dist

@MAINT@balsa-dcheck:
@MAINT@ $(MAKE) BALSA_DISTCHECK_HACK=yes distcheck

## to automatically rebuild aclocal.m4 if any of the macros in
## `macros/' change
bzdist: distdir
    @test -n "$(AMTAR)" || { echo "AMTAR undefined. Run make bzdist AMTAR=gtar"; false; }
    -chmod -R a+r $(distdir)
    $(AMTAR) chojf $(distdir).tar.bz2 $(distdir)
    -rm -rf $(distdir)

# macros are not used any more by current configure.in, see also
# post by Ildar Mulyukov to balsa-list, 2006.06.27
# ACLOCAL_AMFLAGS = -I macros 
```

* * *

## 更新

我试过[这个](https://stackoverflow.com/a/14030969/766570)答案..但我得到了以下信息：

```
autoreconf --install
configure.in:250: warning: macro `AM_GLIB_GNU_GETTEXT' not found in library
glibtoolize: putting auxiliary files in `.'.
glibtoolize: copying file `./ltmain.sh'
glibtoolize: putting macros in AC_CONFIG_MACRO_DIR, `m4'.
glibtoolize: copying file `m4/libtool.m4'
glibtoolize: copying file `m4/ltoptions.m4'
glibtoolize: copying file `m4/ltsugar.m4'
glibtoolize: copying file `m4/ltversion.m4'
glibtoolize: copying file `m4/lt~obsolete.m4'
glibtoolize: Remember to add `LT_INIT' to configure.in.
glibtoolize: Consider adding `-I m4' to ACLOCAL_AMFLAGS in Makefile.am.
glibtoolize: `AC_PROG_RANLIB' is rendered obsolete by `LT_INIT'
configure.in:250: warning: macro `AM_GLIB_GNU_GETTEXT' not found in library
configure.in:249: error: possibly undefined macro: AC_PROG_INTLTOOL
      If this token and others are legitimate, please use m4_pattern_allow.
      See the Autoconf documentation.
configure.in:250: error: possibly undefined macro: AM_GLIB_GNU_GETTEXT
configure.in:301: error: possibly undefined macro: AC_MSG_ERROR
autoreconf: /usr/bin/autoconf failed with exit status: 1 
```

我正在考虑使用输出中的建议..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-25T13:14:44.537

有趣的。我刚刚尝试下载“balsa”并注意到他们分发了 Makefile.am 和 configure.in 文件，而不是准备运行的配置脚本。你可以让包维护者知道他们没有通过不预编译他们自己的自动工具源代码来帮助任何人。

Makefile.am 不是真正的 Makefile。它是生成 Makefile.in 的东西，而 Makefile.in 又被配置脚本翻译成真正的 Makefile。

尝试以下步骤：

将源代码下载到 balsa 再次清理。然后从命令提示符键入以下内容：

```
autoreconf --install 
```

（如果您没有 autoreconf，您可能需要安装 autotools 软件包 - 呃……）

那应该生成配置脚本。然后输入：

```
./configure 
```

它抱怨缺少一些 GMime 依赖项，所以我没有看到它实际上生成了 Makefile。一旦到达生成 Makefile 的位置，您应该能够将 Netbeans 指向“从现有源打开项目”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-26T07:54:50.443

应阿布德的要求...

Netbeans is not very good for C development. One approach would be to build an XCode project around the source base. The maintainers of the project may even accept the XCode project as a contribution.

# ios - 在 iOS 中识别手势

> ID：14030607
> 
> 赞同：0
> 
> 时间：2012-12-25T12:20:58.277
> 
> 标签：ios

谁知道下面的手势是什么：想象一下我在某个区域（比如一个按钮）内单击，我按住手指，不松开它，然后将手指移到该区域之外？有什么手势吗？

我有一个以选中/突出显示状态启动的按钮，但是如果用户单击它（使用手指），没有松开他/她的手指，将他/她的手指移到按钮区域之外，我的按钮会被取消选择- 这是我不想要的。有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-25T12:36:42.383

您需要处理“Touch Up Outside”按钮事件。

==编辑==

你可以重写`UIControl`的`*TrackingWithTouch:withEvent:`方法来获得你想要的行为：

```
@interface CustomButton : UIButton

@end 
```

执行

```
@interface CustomButton()

// Auxiliary property
@property(nonatomic, assign) BOOL isHighlightedBeforeTouch;

@end

@implementation CustomButton

-(BOOL)beginTrackingWithTouch:(UITouch *)touch withEvent:(UIEvent *)event
{
  self.isHighlightedBeforeTouch = self.highlighted;
  return [super beginTrackingWithTouch:touch withEvent:event];
}

-(BOOL)continueTrackingWithTouch:(UITouch *)touch withEvent:(UIEvent *)event
{
  BOOL result = [super continueTrackingWithTouch:touch withEvent:event];
  if( self.isHighlightedBeforeTouch && !CGRectContainsPoint(self.bounds, [touch locationInView:self]) ) {
    dispatch_async(dispatch_get_main_queue(), ^{
      self.highlighted = self.isHighlightedBeforeTouch;
    });
  }
  return result;
}

-(void)endTrackingWithTouch:(UITouch *)touch withEvent:(UIEvent *)event
{
  dispatch_async(dispatch_get_main_queue(), ^{
    self.highlighted = self.isHighlightedBeforeTouch;
  });
  [super endTrackingWithTouch:touch withEvent:event];
}

@end 
```

更改突出显示的属性，例如按下按钮时：

```
-(IBAction)buttonPressed:(UIButton*)sender
{
  dispatch_async(dispatch_get_main_queue(), ^{
    [sender setHighlighted:![sender isHighlighted]];
  });
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-25T14:07:31.670

你需要使用，UIGesuture 识别器：UIPanGestureRecognizer。

# codeigniter - Codeigniter 中的自动加载库

> ID：14030612
> 
> 赞同：0
> 
> 时间：2012-12-25T12:21:40.170
> 
> 标签：codeigniter, autoload

我是 Codeigniter 的新手。我在自动加载中有 3 个库`config.php`。

但在我的一个控制器中，我不想加载库。这可能吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-25T16:30:56.140

如果您在整个应用程序中需要任何库，您可以在配置文件中加载它，它将自动加载。但是，如果您只需要特定控制器中的库，则可以将其加载到需要它的控制器中。

```
Class test Extends CI_Controller{

    function index()
    {
        $this->load->library('mylibrary');
        $this->mylibrary->somemethod();    
    }

} 
```

或者，如果您需要通过控制器的库，您可以在构造函数中加载它。

```
Class test Extends CI_Controller{

    function __construct()
    {
       parent::__construct();
         $this->load->library('mylibrary');
    }

    function index(){
         $this->mylibrary->somemethod();    
    }
    function test(){
         $this->mylibrary->someothermethod();    
    }

} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-05-08T15:13:10.747

**在您的库中扩展 CI_Controller。**

**像这样的东西：**

```
class MyLibrary extends CI_Controller {
    var $ci;

    function __construct() {

      $this->ci = &get_instance();
      $route = $this->ci->router->fetch_class();

      if( $route == strtolower('YourController') ) return false;
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-25T16:12:00.637

您可以从自动加载文件中删除库。那么它们将不会在框架中激活。如果你想使用它们，如果你想在类中使用它们，你可以在构造函数中调用它们。如果你想在方法中使用它们，你在方法中加载它们。

# c# - 如何使用服务器端编辑网格视图

> ID：14030622
> 
> 赞同：0
> 
> 时间：2012-12-25T12:23:05.247
> 
> 标签：c#, c#-4.0, data-binding, gridview, datasource

我正在使用网格视图在搜索后显示一个特殊的列。该程序强制用户选择下拉列表中的选项之一。我的服务器端是这个

```
 string searchText = TextBox.Text.Trim();
    int index = DropDownList.SelectedIndex;

    CustomersTableAdapter cta = new CustomersTableAdapter();

    if (index == 0)
    {
        gvResults.DataSource = cta.GetCustomerByFirstName(searchText);
        gvResults.DataBind();
    }
    else if (index == 1)
    {
        gvResults.DataSource = cta.GetCustomerByLastName(searchText);
        gvResults.DataBind();
    } 
```

这样程序显示所有列。但我需要删除一些列。我不允许触摸客户端，因为下拉列表将无法工作。

我正在使用表适配器，它从我的数据库中获取所需的数据。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-25T12:32:30.033

您可以根据需要隐藏某些列。

```
gvResults.Columns[0].Visible = false; //hides the first column of the gridview 
```

您可以根据下拉列表选择决定隐藏哪些列。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-26T07:25:13.070

我知道答案。您应该首先将 放在`AutoGenerateColumns="False"`客户端。然后手动添加边界字段。之后，您应该`gvResults.Columns[0].Visible = false;`在服务器端写入。

谢谢

# apache - 将 .php 重定向到无扩展名并制作没有 .php 的 url

> ID：14030626
> 
> 赞同：4
> 
> 时间：2012-12-25T12:23:41.643
> 
> 标签：apache, .htaccess, mod-rewrite, apache2

我对 apache 中的 Rewrite 不太了解，但我的 .htaccess 文件有问题。

原来的 .htaccess 是

```
Options +FollowSymLinks

RewriteEngine on

RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^([a-zA-Z0-9-_.]*)$ /profile.php?id=$1 [L]

RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_FILENAME}\.php -f
RewriteRule ^(.*)$ $1.php

# Redirect non-www to www:
RewriteCond %{HTTP_HOST} !^www\. [NC]
RewriteRule ^(.*)$ http://www.%{HTTP_HOST}/$1 [R=301,L]

# Unless directory, remove trailing slash
RewriteEngine On
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^([^/]+)/$ http://www.domain.com/$1 [R=301,L]

# Redirect external .php requests to extensionless url
RewriteCond %{THE_REQUEST} ^(.+)\.php([#?][^\ ]*)?\ HTTP/
RewriteRule ^(.+)\.php$ http://www.domain.com/$1 [R=301,L]

# Resolve .php file for extensionless php urls
RewriteRule ^([^/.]+)$ $1.php [L]

ErrorDocument 404 /404.html 
```

第一次重写是针对虚 url，另一个是将非 www 重定向到 www，然后将 .php 重定向到扩展名 less 并将 .php 文件重定向到扩展名 less，

我面临的问题是，如果我请求 www.domain.com/ttt.php 并且如果 ttt 不存在，那么它会将我重定向到[http://www.domain.com/profile?id=ttt.php](http://www.domain.com/profile?id=ttt.php) 另外，我希望重写用于 php 文件而不是其他类型，假设我有 ttt.png 文件并且我打开 www.domain.com/ttt 它会打开图像而不是显示 404 错误。

其他类型的文件也会发生类似的情况。如果名称很常见，它会首先打开 .txt 文件。

感谢您对此进行的任何更改，我真的不想弄乱我的网站。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-25T12:39:49.110

这条规则：

```
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^([a-zA-Z0-9-_.]*)$ /profile.php?id=$1 [L] 
```

必须在最后。

而这条规则：

```
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_FILENAME}\.php -f
RewriteRule ^(.*)$ $1.php 
```

需要`[L]`标志，需要更换`RewriteRule ^([^/.]+)$ $1.php [L]`。然后，您可以复制这个并替换`.php`为`.png`，以及`.txt`您想要处理的所有其他扩展，按优先顺序：

```
Options +FollowSymLinks -Multiviews

RewriteEngine on

# Redirect non-www to www:
RewriteCond %{HTTP_HOST} !^www\. [NC]
RewriteRule ^(.*)$ http://www.%{HTTP_HOST}/$1 [R=301,L]

# Unless directory, remove trailing slash
RewriteEngine On
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^([^/]+)/$ http://www.domain.com/$1 [R=301,L]

# Redirect external .php requests to extensionless url
RewriteCond %{THE_REQUEST} ^(.+)\.php([#?][^\ ]*)?\ HTTP/
RewriteRule ^(.+)\.php$ http://www.domain.com/$1 [R=301,L]

# add extension if the php file exists:
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_FILENAME}\.php -f
RewriteRule ^(.*)$ $1.php [L]

# add extension if the png file exists:
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_FILENAME}\.png -f
RewriteRule ^(.*)$ $1.png [L]

# add extension if the txt file exists:
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_FILENAME}\.txt -f
RewriteRule ^(.*)$ $1.txt [L]

# add extension if the html file exists:
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_FILENAME}\.html -f
RewriteRule ^(.*)$ $1.html [L]

# etc.

# finally, route to profile.php if all else fails
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^([a-zA-Z0-9-_.]*)$ /profile.php?id=$1 [L]

ErrorDocument 404 /404.html 
```

由于您要`profile.php`在脚本中路由到 ，因此如果参数不存在，则`profile.php`需要重定向到（意味着路由的 URI 必须是 404）。`/404.html``id`

# android - 谷歌地图 -> MapView -> 创建构造函数 -> RuntimeException

> ID：14030628
> 
> 赞同：0
> 
> 时间：2012-12-25T12:24:08.063
> 
> 标签：android, google-maps, android-mapview

我尝试为 Google 地图编写一个应用程序。

告诉我，我的错误是什么？

如果你这样写，所有的作品，卡都加载了。

```
public class TravelMapActivity extends MapActivity {
  private MapView mapView;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.travel_map_activity);
        mapView = (MapView)findViewById(R.id.travelMapView);
    }
} 
```

如果你创建一个构造函数，我会在这里得到这些错误。

```
 @Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.travel_map_activity);
    mapView = new MapView(this, getResources().getString(R.string.google_maps_api_key));
}

 java.lang.RuntimeException: Unable to start activity ComponentInfo{de.ai.mi.maptrack/de.ai.mi.maptrack.activities.TravelMapActivity}: java.lang.IllegalStateException: You are only allowed to have a single MapView in a MapActivity

 Caused by: java.lang.IllegalStateException: You are only allowed to
 have a single MapView in a MapActivity 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-25T12:28:59.093

使用*v1 google maps android api*，您一次只允许一个 MapView。我猜你在你的 XML travel_map_activity 中实例化了一个 MapView，所以当你尝试用

```
mapView = new MapView(this, getResources().getString(R.string.google_maps_api_key)); 
```

你得到了例外。尝试从 XML 中删除 MapView 来解决这个问题。

# php - jqgrid dosnt 显示数据，它在 localhost 中可以正常工作，但在我的服务器中却不行

> ID：14030631
> 
> 赞同：0
> 
> 时间：2012-12-25T12:25:18.870
> 
> 标签：php, javascript, jquery, json, jqgrid

我在 php 中遇到了 jqgrid 的问题，首先我应该说，我的 localhost 中的每件事都正常，一切正常，但是在我的服务器中它没有 jqgrid 不显示数据，我检查了 php 文件和 js 文件，js 发送数据到php，然后php选择我需要的数据正确，但是发生了一些事情，php文件没有错误，并正确填写$response，然后echo json_encode($response);.....我猜问题出在这里，当php文件想要将数据发送到脚本时......我真的不知道......请帮助我......js文件有代码：

```
 <script type='text/javascript'>
        jQuery('document').ready(function() {
            var id = $userId;
            jQuery('#users').jqGrid({
                url:'../includes/ProductHistory/process.php?id='+id,
                datatype: 'json',
                mtype: 'GET',
                direction:'rtl',
                height: 'auto',
                width: '530',
                colNames:['pic ','pname','pdate', 'price'],
                colModel:[
                 {name:'file_url',index:'file_url', width:40 , sortable:false , search:false , edittype: 'image', formatter: imageFormatter},
                 {name:'product_name',index:'product_name', width:65},
                 {name:'created_on',index:'created_on', width:70 ,search:false},
                 {name:'product_final_price',index:'product_final_price', width:60 , sorttype:'number'}
                ],
                rowNum:10,
                rowTotal: 2000,
                rowList : [10,20,30,50],
                rownumbers: true,
                rownumWidth: 15,
                gridview: true,
                pager: '#usersPage',
                sortname: 'created_on',
                viewrecords: true,
                sortorder: 'desc',
                caption: 'products'   
            });

            jQuery('#users').jqGrid('navGrid','#usersPage',
                {
                    edit:false,add:false,del:false,search:false,refresh:true
                },
                {}, // edit options
                {}, // add options
                {}, //del options
                {} // search options
                );
            jQuery('#users').jqGrid('filterToolbar',{stringResult: true,searchOnEnter : false});

        });
        function imageFormatter(cellvalue, options, rowObject) {

        return '<img src= ../' + cellvalue + ' height=80 width=80 />';

        };

    </script> 
```

这是php文件：

```
while($row = mysql_fetch_array($result, MYSQL_ASSOC)) {
$response->rows[$i]['product_name']   = $row['product_name'];   
$response->rows[$i]['cell'] = array($row['file_url'],$row['product_name'],$row['created_on'],$row['product_final_price']);
$i++;}
 echo json_encode($response); 
```

我检查了 sql 查询，我用 fwrite 复制到一个 txt 文件中，它工作正常......但我不知道为什么 jqgrid 不显示任何内容，它显示列和名称，但它不支持单元格...... .......请帮助我......我真的不知道我应该做什么......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-26T22:19:21.983

我几乎可以肯定这是 url 值不正确。url 通过 Ajax 调用返回 JSON 数据。过去调试并不容易......直到有Firebug。

在 Firefox 中使用 Firebug（按 F12）并单击“控制台”选项卡，然后刷新您的页面。查看 Console 中返回的数据。如果它不是有效的 JSON 或 404 错误，那么您知道下一步该做什么。

我只知道如何在 Firefox 中执行此操作，在 Google Chrome 或 IE Developer Toolbar 中找不到等价物。希望这可以帮助。

# javascript - 如何将整个表单作为字符串获取

> ID：14030635
> 
> 赞同：0
> 
> 时间：2012-12-25T12:25:34.790
> 
> 标签：javascript, jquery

我正在尝试使用 javascript 和 php 构建自己的表单构建器，但在获取整个表单时遇到问题，因为我想在其他页面上显示相同的表单。我想生成一个包含整个表单链接的字符串。单击该链接后，将生成相同的表单

javascript代码是

```
 $('document').ready(function(){
            var flag=0;
            $(".divname").draggable({
                helper : "clone"
            });

            $( ".drop_class" ).droppable({

                drop: function( event, ui ) {

                    switch(ui.helper.context.id){
                        case "heading_id":
                            $( this ).append( "<div class='default_css' id='header'>Write Heading Here<input id='head_id' name='hello' class='common' type='text'/></div>" );
                            break;
                        case "textbox_id":
                            $( this ).append( "<div class='default_css'>Write Text Here<input id='text_id' class='common'type='text'/></br></div>" );
                            break;
                        case "textarea_id":
                            $( this ).append( "<div class='default_css'>Enter Information<textarea id='tarea_id' class='common'rows=5 cols=70></textarea></div>" );
                            break;    
                        case "radio_id":
                            $( this ).append( "<div class='default_css'>Gender</br><input type='radio' value='male' name='sex'>Male<br><input type='radio' value='female' name='sex'>Female" );
                            break;
                        case "fullname_id":
                            $( this ).append( "<div class='default_css'>First Name<input id='fname_id' class='common' type='text'/>Last Name<input type='text'id='lname_id'/></br></div>" );
                            break;
                        case "mobile_id":
                            $( this ).append( "<div class='default_css'>Enter Mobile Number<input id='mob_id' class='common' type='text'/></div>");
                            break;   
                        }
                        if(flag==0){
                            $( this ).append("<div class='default_css'><input type='button' id='submit_button' style='position:absolute;right:330px;bottom:0;'value='submit'/></div><div id='generate_id'><input type='button' style='position:absolute;right:100px;bottom:0;' value='Generate URL'/>");
                        }
                        flag = 1;   
                    }    
                });

            }); 
```

我如何获得完整的表格

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-25T12:31:10.743

考虑

```
$formHTML = $("#idOfForm").html(); 
```

# ravendb - 查询所有集合名称

> ID：14030639
> 
> 赞同：1
> 
> 时间：2012-12-25T12:26:08.763
> 
> 标签：ravendb

有没有办法查询所有集合名称？我认为必须有一种相对直接的方式，因为 Raven Studio 已经在这样做了？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-25T12:52:26.717

您可以使用`GetTermsAsync`.

使用示例：

```
DatabaseCommands.GetTermsAsync("Raven/DocumentsByEntityName", "Tag", "", 100) 
```

# git - 需要为 Java EE 应用程序设置版本控制

> ID：14030641
> 
> 赞同：0
> 
> 时间：2012-12-25T12:26:12.053
> 
> 标签：git, jakarta-ee, unix, cvs

我被要求为托管 Java EE 应用程序的 unix 服务器设置版本控制系统。

我没有为任何此类系统设置版本控制的经验。

通常我们假设为 unix 服务器的全部内容或仅应用程序的 Java EE 部分（如 JSP、Servlet 等）设置版本控制（如 CVS 或 GIT）。

通常在创建版本控制时应该考虑哪些文件。

在我的情况下，CVS 或 GIT 中哪个更适合版本控制系统。

哪一个是两者中更好的选择，哪一个更容易设置，因为我对它们中的任何一个都没有经验，并且学习它们中的任何一个来设置相同的学习曲线。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-25T12:52:53.620

将二进制文件或“服务器的内容”存储到 VCS 中是不常见的。它们通常用于存储源文件，然后可用于构建和部署应用程序。

应用程序的每个源文件都应该在 VCS 中。对于源文件，我还指资源（如图像、脚本文件、CSS 文件等）、配置文件、构建脚本等，但不是构建生成的工件，如 jar 或 war 文件。

询问 CVS 和 Git 之间哪个是最好的系统就像询问福特 T 和新甲壳虫之间哪个是最好的。没有人再使用 CVS，因为自 CVS 以来，VCS 已经取得了很大进展。现在已经过时了。您可能会考虑 Mercurial 或 Subversion，但绝对不是 CVS。

# objective-c - 如何创建自定义 UIStoryBoard

> ID：14030647
> 
> 赞同：8
> 
> 时间：2012-12-25T12:26:58.170
> 
> 标签：objective-c, uistoryboard

我想创建自己的 UIStoryBoard 并强制系统使用它（受[Jody 的回答](https://stackoverflow.com/questions/11969452/viewdidload-is-in-fact-called-every-time-there-is-a-segue-transition)启发）。

我该怎么做？

`@interface MyStoryboard : UIStoryboard`未调用创建类。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-27T19:01:11.807

你在正确的路径子类化`UIStoryboard`：你现在需要做的就是将它插入你的应用程序。最简单的方法是在您的应用程序委托的`application:didFinishLaunchingWithOptions:`方法中：

我的故事板.h

```
@interface MyStoryboard : UIStoryboard
-(id)instantiateViewControllerWithIdentifier:(NSString *)identifier;
@end 
```

我的故事板.m

```
@implementation MyStoryboard

-(id)instantiateViewControllerWithIdentifier:(NSString *)identifier {
    NSLog(@"Instantiating: %@", identifier);
    return [super instantiateViewControllerWithIdentifier:identifier];
}

@end 
```

MyAppDelegate.m

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions {
    self.window = [[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]];
    self.window.backgroundColor = [UIColor whiteColor];
    UIStoryboard *storyboard = [MyStoryboard storyboardWithName:@"<identifier-of-your-storyboard>" bundle:nil];
    self.window.rootViewController = [storyboard instantiateInitialViewController];
    [self.window makeKeyAndVisible];
    return YES;
} 
```

使用此代码，您将看到`NSLog`每次调用该`instantiateViewControllerWithIdentifier:`方法时的调用。

# python - 在 python 中导入 cv 模块时出错

> ID：14030650
> 
> 赞同：0
> 
> 时间：2012-12-25T12:27:50.673
> 
> 标签：python, computer-vision

我尝试`cv`在 python 中导入，但出现此错误：

```
undefined symbol: _ZN2cv17phaseCorrelateResERKNS_11_InputArrayES2_S2_Pd 
```

我首先执行了这个命令：

```
export PYTHONPATH="/usr/local/lib/python2.7/site-packages/:$PYTHONPATH" 
```

然后：

```
import cv 
```

完整的追溯：

```
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
  File "/usr/local/lib/python2.7/site-packages/cv.py", line 1, in <module>
    from cv2.cv import *
ImportError: /usr/local/lib/python2.7/site-packages/cv2.so: undefined symbol: _ZN2cv17phaseCorrelateResERKNS_11_InputArrayES2_S2_Pd 
```

如果我执行：

```
import cv2.cv
segmentation fault (core dumped) 
```

# php - 保存在 Cakephp 中获取的多个图像

> ID：14030652
> 
> 赞同：0
> 
> 时间：2012-12-25T12:28:12.790
> 
> 标签：php, javascript, cakephp, jqplot

我正在尝试在服务器上保存多个图像。让我们从头开始：

```
//I use this function for testing
function testSave(){
    $this->_renderChart(156);
}

//This function takes chart_id as a parameter to render a proper chart.
function _renderChart($chart_id = null){
    if(!$chart_id)
        return false;
    $chartFilterList = $this->getChartFilterListFromId($chart_id);
    $this->loadChartFromId($chart_id, $chartFilterList);
    $this->layout = 'analytics\chart_one.ctp';
} 
```

上述函数的视图包含渲染图表所需的所有脚本。这是将渲染图表转换为 base64string 并保存的部分：

```
//../views/layouts/analytics/chart_one.ctp
<script type="text/javascript">
    $(document).ready(function(){
        saveChartAsImage('#chart1');
    });
</script> 
```

以及上述函数的主体：

```
function saveChartAsImage(div){
    var base64string = $(div).jqplotToImageStr();
    $.ajax({
        url: 'saveImage',
        type: "POST",
        dataType: "html",
        data:"data=" + base64string
    });
} 
```

}

这甚至还没有接近工作。我在这里做错了吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-26T16:46:42.110

我建议创建一个行为，并添加操作**beforeValidate()**；
之后，为调用特定操作（在您的问题中列出）设置必要的条件。

例子：

```
app/Model/Behavior/ChartBehavior.php
class ChartBehavior extends ModelBehavior {

// if necessary, create a setup action
public function setup(Model $Model, $settings = array()) {  }

public function upload(Model $Model) {
    // use the $Model->data to see all information from your form
    debug($Mode->data);

    // now call your functions below to upload
}

public function line_chart($chart_id = null){
    //magic...
}

public function bar_chart($chart_id = null){
    //magic...
}

public function pie_chart($chart_id = null){
    //magic...
} 
```

我希望它对你有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-25T12:39:23.023

如果这些函数是控制器动作，您可以`$this->response->body()`在控制器的`afterFilter()`回调中使用来获取响应内容并将其保存到文件中。如果这些是辅助函数，您可以使用辅助函数获取内容`afterLayout()`或`afterRender()`回调`$this->_View->Blocks->get('content');`

# sql - 在 Oracle 中将时差转换为给定格式

> ID：14030654
> 
> 赞同：8
> 
> 时间：2012-12-25T12:28:24.377
> 
> 标签：sql, oracle, formatting

如何将`EVENT_DATE_B - EVENT_DATE_A`天数转换为带`HH:MM`格式的字符串？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-25T13:54:49.977

另一种方法（一个查询可以在不同的日子）：

```
with tt as (
   select numToDsinterval((EVENT_DATE_B - EVENT_DATE_A ), 'DAY') dsint 
     from t)
select (extract(day from dsint)*24)+extract(hour from dsint) || 
       ':' ||extract(minute from dsint)
from tt 
```

[这是一个 sqlfiddle 演示](http://sqlfiddle.com/#!4/09281/1)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-25T13:34:46.810

如果日期仅在时间部分不同，您可以使用间隔日到秒。例如：

```
SQL> select (to_date('25.12.12 15:37:32', 'DD.MM.YY HH24:MI:SS')
  2        - to_date('25.12.12 12:45:45', 'DD.MM.YY HH24:MI:SS')) day(0) to second(0) as Time
  3    from dual
  4  ;

TIME
-------------
+0 02:51:47 
```

但显然情况并非总是如此。所以你可以写一个长查询来计算不同的时间部分，但我想我会用这个简单的函数：

```
SQL> create or replace function DaysToTime(p_val in number)
  2  return varchar2
  3  is
  4    l_hours    number;
  5    l_minutes  number;
  6    l_seconds  number;
  7  begin
  8    l_Hours := 24 * p_val;
  9    l_minutes := (l_hours - trunc(l_hours)) * 60;
 10    l_seconds := (l_minutes - trunc(l_minutes)) * 60;
 11    return to_char(trunc(l_hours), 'fm09')  ||':'||
 12           to_char(trunc(l_minutes), 'fm09')||':'||
 13           to_char(trunc(l_seconds), 'fm09');
 14  end;
 15  /

Function created 
```

现在查询将是：

```
SQL> select DaysToTime(to_date('25.12.12 15:37:32', 'DD.MM.YY HH24:MI:SS')
  2        - to_date('25.12.12 12:45:45', 'DD.MM.YY HH24:MI:SS')) as Time
  3    from dual
  4  ;

TIME
----------
02:51:47 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-25T12:31:22.460

```
select 24 * (EVENT_DATE_B - EVENT_DATE_A) || ':' || '00'
from your_table 
```

[SQLFiddle 演示](http://sqlfiddle.com/#!4/d41d8/5415)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-26T20:55:04.823

我认为您需要找出 date1 和 date2 之间的天数，然后从 date2 中减去此差异并将最终日期转换为您的格式。复制/粘贴并查看输出：

```
Select date2, days_between, to_char(date2-days_between, 'mm-dd-yyyy hh24:mi:ss') end_date
From
(
Select sysdate date2 
     , trunc(sysdate)-to_date('20-DEC-2012') days_between  --'20-DEC' is start_date
From dual
)
/ 
```

# grails - Groovy Closures：Grails url 映射的定义是如何工作的

> ID：14030656
> 
> 赞同：4
> 
> 时间：2012-12-25T12:28:44.133
> 
> 标签：grails, reflection, groovy, closures

请注意，这个问题与 Grails 中的 url 映射没有直接关系。它是关于如何定义 url 映射的方式。

在查看时，`UrlMappings.groovy`我们会看到如下内容：

```
class UrlMappings {     
    static mappings = {         
        "/foo" (controller: "foo", action: "myaction")
        "/bar" (controller: "bar", action: "myaction")
        "404" (controller: 'error')
    }
} 
```

括号表示有一个函数/方法调用。据我了解，这条线

```
"/foo" (controller: "foo", action: "myaction") 
```

执行名为的`/foo`函数`UrlMappings`。如果`UrlMappings`不包含调用`/foo`的函数，它将查看闭包委托。

我的问题是你可以在里面使用的字符串`mappings = { .. }`没有限制。您可以添加任何类型的定义。例如：

```
"!%&/()" (controller: "foo") 
```

所以必须有某种动态的方式来定义这些函数。我想不出在`UrlMappings`类中定义这些函数的解决方案。所以我试图想出一个使用闭包委托的解决方案。

使用一个简单的 groovy 脚本，我尝试了以下对我来说效果很好的方法：

```
def mappings = {
    "/foo" (controller: "foo", action: "myaction")
    "/bar" (controller: "bar", action: "myaction")
    "404" (controller: 'error')
    "!%&/()" (controller: "foo")
}

class MyMap extends LinkedHashMap {
    @Override
    public Object get(Object key) {
        if (!this.containsKey(key)) {
            this.put(key, { Map map -> println "$key called: $map" })
        }
        return super.get(key);
    }
}

mappings.delegate = new MyMap()
mappings() 
```

因此，当`/foo`应该在`mappings`闭包内执行时，groovy 将查找`/foo`在我的委托映射中命名的键。因此使用 的`get()`方法`MyMap`。如果不存在具有此名称的键，则将创建一个新键。键的值始终是一个以映射为参数的闭包。

执行脚本时，我得到：

```
/foo called: [controller:foo, action:myaction]
/bar called: [controller:bar, action:myaction]
404 called: [controller:error]
!%&/() called: [controller:foo] 
```

所以它奏效了。但是我不知道这是否是 grails 使用的方式。也许有一个更简单的解决方案？

所以我的第一个问题是：**还有另一种（可能更简单）的方法吗？/ Grails 如何解决这些函数调用？**

当我作为代表尝试使用 Maps 时，出现了另一个问题。

让我们看看这个：

```
def closure = {
    "foo" (arg: "foo")
}

closure.delegate = ["foo": { Map map -> println "called: $map" }]
closure() // error 
```

我希望这段代码应该打印字符串`called: [arg:foo]`。但是我得到：

> groovy.lang.MissingMethodException：没有方法签名：Test.foo() 适用于参数类型：(java.util.LinkedHashMap) 值：[[arg:foo]]

然后我尝试了以下结果（如预期的那样）在相同的异常中：

```
def delegate = new LinkedHashMap()
delegate["foo"] = { Map map -> println "called: $map" }
closure.delegate = delegate 
closure() // error 
```

但是，如果我这样做：

```
class MyLinkedHashMap extends LinkedHashMap { }
def delegate = new MyLinkedHashMap()
delegate["foo"] = { Map map -> println "called: $map" }
closure.delegate = delegate 
closure() // prints "called: [arg:foo]" 
```

有用。

所以我的第二个问题是：**为什么这不适用于简单`LinkedHashMap`但适用`MyLinkedHashMap`（不修改任何内容）？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-25T21:19:44.547

你读过methodMissing吗？

一个例子在这里： http: [//groovy.codehaus.org/Using+methodMissing+and+propertyMissing](http://groovy.codehaus.org/Using+methodMissing+and+propertyMissing)

另一个在这里：[http ://blog.vladimirvivien.com/2008/02/25/creating-a-simple-builder-with-groovys-methodmissing/](http://blog.vladimirvivien.com/2008/02/25/creating-a-simple-builder-with-groovys-methodmissing/)

grails 通过将此闭包列表传递给[此构建器](https://github.com/grails/grails-core/blob/master/grails-plugin-url-mappings/src/main/groovy/org/codehaus/groovy/grails/web/mapping/DefaultUrlMappingEvaluator.java#L209)来完成此操作，该构建器将覆盖 invokeMethod 来完成工作，[如此处所述](http://groovy.codehaus.org/Using+invokeMethod+and+getProperty)

# matlab - matlab中光波叠加的可视化

> ID：14030658
> 
> 赞同：2
> 
> 时间：2012-12-25T12:29:16.613
> 
> 标签：matlab, visualization, light, wavefront

我写了一些快速代码，用于可视化空间中具有不同幅度的两个波的叠加，点源几何。这适用于 khanacademy CS 平台。[http://www.khanacademy.org/cs/superposition/1245709541](http://www.khanacademy.org/cs/superposition/1245709541)但我无法在 matlab 中重现确切的现象。我得到的只是一个嘈杂的图像。这与随机数生成的差异有关吗？我不知道 random(0,1)(in JS) 和 rand(in matlab) 有什么不同。

这是matlab代码

图像平面上点 x,y 的波叠加函数

```
function S = Super(refamp,objamp,x,y,a,lambda)
    r1 = sqrt(a*a+x*x+y*y); %a is in z-axis
    S = refamp+(objamp*cos(2*pi*r1/(lambda/(10^6)))); 
```

测试脚本

```
close all;
clear all;
clc;

a=10;       %distance from source to image plane

width = 1024;
height =1024;

im = zeros(width); % the image
x=1;
y=1;
A0 = 3; % amplitude of reference wave
A1 = 1; % amplitude of object wave  A0>>A1: A0/A1>=3
lambda = 632; % wavelength in nanometers
% generate the superposition in space width*height at a along z-axis
for y=1:height
    for x=1:width
        s = Super(A0,A1,x-(width/2),y-(height/2),a, lambda);
        r=rand;
        if(r<(s/(A0+A1)))
            im(x,y) = 1;
    end
end

%display the image
figure
imshow(im,[])
title('test image') 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-25T14:56:05.760

主要问题是您的秤已关闭，因此您看不到干涉图案。如果你玩弄一切有多大/多远，它会正常工作，你可以看到模式。

第二个问题是您的代码将真正受益于矢量化。我在下面展示了这个 - 这样做会大大加快执行速度。

```
function Interference
a=1000 * 10^-9;       #% distance from source to image plane
width = 10000 * 10^-9;
height= 10000 * 10^-9;
size = 700;
A0 = 3; %# amplitude of reference wave
A1 = 1; %# amplitude of object wave  A0>>A1: A0/A1>=3
lambda = 632 * 10^-9; #% wavelength in nanometers

x=linspace(0,width,size); #% vector from 0 to width
y=linspace(0,height,size); #% vector from 0 to height
[X,Y]=meshgrid(x,y); #% matrices of x and y values at each position

s=Super(A0, A1, X-(width/2), Y-(height/2), a, lambda); #% size-by-size (700x700) 
r=rand(size); #% 700x700 matrix of random values on [0 1]

im = zeros(size);
im(r<(s/(A0+A1))) = 1; %# do this all at once instead of pixel-by-pixel

#% display the image
figure
imshow(im,[])
title('test image')
end #% end of function Interference

#% Super is now vectorized, so you can give it a matrix of values for x and y
function S = Super(refamp,objamp,x,y,a,lambda)
    r1 = sqrt(a.*a+x.*x+y.*y); #% dot notation: multiply element-wise
    S = refamp+(objamp*cos(2*pi*r1/(lambda)));
end #% end of function Super 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T01:07:46.523

```
function i = Interference(width, height, sizeh,sizev,z)
% parameters explained
% width: is the horizontal pixel pitch in microns
% height: is the vertical pixel pitch in microns
% size is the width=height of the CCD in number of pixels
% z is distance from source to image plane
A0 = 3; %# amplitude of reference wave
A1 = 1; %# amplitude of object wave  A0>>A1: A0/A1>=3
lambda = 635 * 10^-9; % wavelength in nanometers

%the linspace was wrong
x=linspace(0,width*sizeh,sizeh); % vector from 0 to width of size 'size'
y=linspace(0,height*sizev,sizev); % vector from 0 to height of size 'size'
[X,Y]=meshgrid(x,y); % matrices of x and y values at each position

s=Super(A0, A1, X-((width*sizeh)/2), Y-((height*sizev)/2), z, lambda); % size-by-size (1024x1024) 
r=rand(size); % 1024x1024 matrix of random values on [0 1]
%i=s;
im = zeros(size);
im(r<(s/(A0+A1))) = 1; %# do this all at once instead of pixel-by-pixel
i=im;
end % end of function Interference

% Super is now vectorized, so you can give it a matrix of values for x and y
function S = Super(refamp,objamp,x,y,a,lambda)
    r1 = sqrt(a.*a+x.*x+y.*y); % dot notation: multiply element-wise
    S = refamp+(objamp*cos(2*pi*r1/(lambda)));
end % end of function Super 
```

函数的使用

```
width = 2.8 * 10^-6;
height= 2.8 * 10^-6; %pixel size
%  sizeh = 16; %image size in pixels
%  sizev = 16;
 sizeh = 1600; %image size in pixels
 sizev = 1200;
  int_z = 100*10^-3; % z dist in m
%  xes1 = 100;
 %xes2 = ;
 int_im = Interference(width,height,sizeh, sizev,int_z);
 int_im = int_im/max(max(int_im)); % normalize
 int_im = (int_im-0.5)*2; % enhance visualy

% display the image
figure
imshow(int_im,[]) 
```

# android - 虚拟设备即模拟器无法启动安卓应用？

> ID：14030662
> 
> 赞同：0
> 
> 时间：2012-12-25T12:30:18.520
> 
> 标签：android, android-intent, android-emulator

我已经`adt-bundle-windows-x86`在我的机器上成功下载并安装

但是当我尝试运行和执行任何安卓应用程序时，

`NewDevice`即`emulator`不会显示任何内容，它会卡在加载阶段，为什么会这样？

我也试过以下：

```
Right click the root of your Android Project, go to "Run As" then go to "Run Configurations..." locate the "Android Application" node in the tree at the left, then select your project and go to the "Target" tab on the right side of the window look down for the "Additional Emulator Command Line Options" field (sometimes you'll need to make the window larger) and finally paste "-partition-size 1024" there. Click Apply and then Run to use your emulator. 
```

也设置偏好。 ![在此处输入图像描述](../Images/659269ed24ca7a2493638386c093fa50.png) 请指导我。

谢谢

# c#-4.0 - 如何从 Gmail 中获取电子邮件

> ID：14030663
> 
> 赞同：3
> 
> 时间：2012-12-25T12:30:23.157
> 
> 标签：c#-4.0, tcp, pop3

我构建了以下代码，它打开了一个 tcp 连接并能够通过 tcp 将消息发送到远程 gmail 服务器。

```
TextWriter writerlog = new StreamWriter(AppDomain.CurrentDomain.BaseDirectory + "service.txt");
            writerlog.WriteLine("Initializing service");
            TcpClient tcpclient = new TcpClient(); // create an instance of TcpClient
            try
            {
                writerlog.WriteLine("Starting Tcp Client");

                writerlog.WriteLine("Connecting Tcp Client");

                tcpclient.Connect("pop.gmail.com", 995); // HOST NAME POP SERVER and gmail uses port number 995 for POP 

                writerlog.WriteLine("Getting stream from client");

                System.Net.Security.SslStream sslstream = new SslStream(tcpclient.GetStream()); // This is Secure Stream // opened the connection between client and POP Server

                sslstream.AuthenticateAsClient("pop.gmail.com"); // authenticate as client 

                writerlog.WriteLine("Creating stream writer and stream reader");

                StreamWriter sw = new StreamWriter(sslstream); // Asssigned the writer to stream

                StreamReader reader = new StreamReader(sslstream); // Assigned reader to stream

                writerlog.WriteLine("Init Authentication");

                writerlog.WriteLine("Sending user");

                SendCommand("USER xxxxxxxx@gmail.com", sw, reader); // refer POP rfc command, there very few around 6-9 command 

                writerlog.WriteLine("Sending password");

                SendCommand("PASS yyyyyyyyy", sw, reader); // Sending password 

                writerlog.WriteLine("Retrieving last email");

                writerlog.WriteLine("Email contents:" + SendCommand("RETR 1", sw, reader)); // this will retrive your first email

                writerlog.WriteLine("Closing connection");

                SendCommand("Quit", sw, reader);// close the connection
            }
            catch (Exception ex)
            {
                writerlog.WriteLine("Exception: " + ex.Message);
                writerlog.WriteLine("StackTrace: " + ex.StackTrace);
                writerlog.WriteLine("InnerExceptiion: " + ex.StackTrace);
            }
            finally 
            {
                writerlog.WriteLine("Ending service");
                tcpclient.Close();
                writerlog.Close();
            } 
```

发送tcp消息的方法：

```
protected string SendCommand(string cmdtext, StreamWriter writer, StreamReader reader)
        {
            writer.WriteLine(cmdtext);
            writer.Flush();
            return reader.ReadLine();
        } 
```

我有以下 Pop3 命令列表，我使用 RETR 来获取使用此行的电子邮件内容：

**writerlog.WriteLine("邮件内容：" + SendCommand("RETR 1", sw, reader));**

但在我的日志文件中，我得到以下信息：

邮件内容：+OK 发送PASS

```
 USER - Takes one argument i.e., the email address of the user trying to connect to his/her mailbox. Example usage: 
        USER youremail@xyz.com
    PASS - Takes one argument i.e., the password of the user. Example usage: 
        PASS yourpassword
    STAT - Returns the number of emails in the mailbox and the number of bytes all the emails are taking on the server. Example usage: 
        STAT
    TOP - Takes two arguments i.e., the sort number of the email on the server and the number of lines of text to retrieve from the body of the email. Example usage: 
        TOP 1 10
    RETR - Takes one argument i.e., the sort number of the email on the server and returns all the headers and lines from the body of the email. Example usage: 
        RETR 1
    DELE - Takes one argument i.e., the sort number of the email on the server and deletes it. Example usage: 
        DELE 1
    RSET - Resets any DELE commands given above. The emails marked to be deleted by DELE command are unmarked. Example usage: 
        RSET
    QUIT - Closes the user session with the server. Example usage: 
        QUIT 
```

你能告诉我我缺少什么来获取电子邮件内容吗？

提前致谢。

亲切的问候。

何塞。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-09-19T05:43:32.363

您可以使用 Imap 阅读 gmail ：

```
ImapClient ic = new ImapClient("imap.gmail.com", "xxxxx@gmail.com", "xxxxxx",
            ImapClient.AuthMethods.Login, 993, true);           
        ic.SelectMailbox("INBOX");          
        int n = ic.GetMessageCount();
        textBox1.Text = n.ToString();
        MailMessage mail = ic.GetMessage(n-1);
        ic.Dispose();
        string sub = mail.Subject;
        string msgbody = mail.Raw; 
```

或以下 pop3 方法：

```
 string result = "";
        string str = string.Empty;
        string strTemp = string.Empty;

        try
        {                
            TcpClient tcpclient = new TcpClient();
            tcpclient.Connect("pop3.gmail.com", 995);
            System.Net.Security.SslStream sslstream = new SslStream(tcpclient.GetStream());
            sslstream.AuthenticateAsClient("pop3.gmail.com");
            System.IO.StreamWriter sw = new StreamWriter(sslstream);
            System.IO.StreamReader reader = new StreamReader(sslstream);
            strTemp = reader.ReadLine();
            sw.WriteLine("USER" + " " + username);
            sw.Flush();
            strTemp = reader.ReadLine();
            sw.WriteLine("PASS" + " " + password);
            sw.Flush();
            strTemp = reader.ReadLine();                
                string[] numbers = Regex.Split(strTemp, @"\D+");
                int a = 0;
                foreach (string value in numbers)
                {
                    if (!string.IsNullOrEmpty(value))
                    {

                        int i = int.Parse(value);
                        numbers[a] = i.ToString();
                        a++;
                    }
                }                                    
            sw.WriteLine("RETR "+numbers[0]);
            sw.Flush();
            strTemp = reader.ReadLine();
            textBox4.Text = strTemp;
            while ((strTemp = reader.ReadLine()) != null)
            {
                if (strTemp == ".")
                {
                    break;
                }
                if (strTemp.IndexOf("-ERR") != -1)
                {
                    break;
                }
                str += strTemp;
            }
            sw.WriteLine("Quit ");
            sw.Flush();                                
            this.sourceHTML = str;
         }
        catch () {} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T19:56:09.713

这篇文章（[如何在 c# 中使用 pop3 从 gmail 中读取邮件检索中的邮件正文？](https://stackoverflow.com/questions/13119653/how-to-read-the-body-of-the-message-in-the-mail-retrieve-from-gmail-by-using-pop)）解释了一种更好的方法来做你想做的事情。我使用的是 TCP 方式.. 但是使用 Pop 客户端要容易得多！

此致，

颜。

# c# - WinRT 中的动态加载程序集

> ID：14030669
> 
> 赞同：0
> 
> 时间：2012-12-25T12:31:27.483
> 
> 标签：c#, windows-runtime

我创建了一个程序来使用以下代码加载动态程序集：

```
using System;
using System.Collections.Generic;
using System.Reflection;
using System.Threading.Tasks;

namespace BarcodeReader
{
   public class Parsing
   {
      private static string _FolderName = "BarcodeReaders";
      private static bool _Initialized = false;
      private static IEnumerable<IBarcodeReader> _Objs;

      /// Parse the picture
      /// <returns>The value from the picture</returns>
      public static async Task<string> ParsePicture()
      {
         // Check if this class has not been initialized, and if it hasn't initialize it
         if (!_Initialized)
         {
            await InitializeAsync();
         }

         foreach (var Obj in _Objs)
         {
            if (Obj.IsType())
            {
               return Obj.GetValue();
            }
         }

         return null;
      }

      private static async Task InitializeAsync()
      {
         // Get the folder
         var Folder = await GetFolder();

         // Get the Files in the Folder
         var Files = await Folder.GetFilesAsync();

         // Initialize the objects and set them
         _Objs = InitializeObjects(Files);

         // Set it as initialized
         _Initialized = true;
      }

      private static IEnumerable<IBarcodeReader> InitializeObjects(IEnumerable<Windows.Storage.StorageFile> Files)
      {
         foreach (var File in Files)
         {
            string Name = File.Path;
            var Assembly = System.Reflection.Assembly.Load(new AssemblyName(Name));
            foreach (var Typ in Assembly.ExportedTypes)
            {
               var TypInfo = Typ.GetTypeInfo();
               foreach (var Interf in TypInfo.ImplementedInterfaces)
               {
                  if (Interf.Name.Equals("IBarcodeReader"))
                  {
                     yield return (IBarcodeReader)Activator.CreateInstance(Typ);
                  }
               }
            }
         }
      }

      private static async Task<bool> BarcodeFolderExist(Windows.Storage.StorageFolder Folder)
      {
         // Get all folders
         var Folders = await Folder.GetFoldersAsync();

         // For each folder, check if it is the Folder we are searching and if it is return true
         foreach (var Foldr in Folders)
         {
            if (Foldr.Name.Equals(_FolderName))
            {
               return true;
            }
         }

         // Return false as the folder was not found
         return false;
      }

      private static async Task<Windows.Storage.StorageFolder> GetFolder()
      {
         // Get the local-folder
         var Folder = Windows.Storage.ApplicationData.Current.LocalFolder;

         // Check if the folder does not exist, and if it does not create it
         if (!await BarcodeFolderExist(Folder))
         {
            await Folder.CreateFolderAsync(_FolderName);
         }

         return await Folder.GetFolderAsync(_FolderName);
      }
   }
} 
```

我要加载的项目是这些文件

```
namespace QRReader
{
   public sealed class QRReader : IBarcodeReader
   {
      public bool IsType()
      {
         return true;
      }

      public string GetValue()
      {
         return "HEJ";
      }
   }

   public interface IBarcodeReader
   {
      bool IsType();
      string GetValue();
   }
} 
```

但我得到这个错误

```
FileLoadException was unhandled by user code
The assembly name or code base was illegal. (Exception HRESULT: 0x80131047) 
```

-`name`变量设置为 `C:\Users\Lasse\AppData\Local\Packages\93e3b2c9-7ef8-4537-be39-d0f3e93ca100_e85ydygyad1dy\LocalState\BarcodeReaders\QRReader.winmd`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-02-14T21:57:24.413

我在 Internet 上读到的所有内容都表明，Microsoft 已将其作为运行时环境（WinRT 和 UWP）的一项经过深思熟虑的安全功能，无法在运行时加载程序集。这是 UWP 中的一个显示停止限制功能。它或多或少地使平台变得无用，因为如果有针对给定客户的定制，应用程序供应商将不得不拆分应用程序并将其部署到商店的每个客户的版本。

请花时间对允许在运行时动态加载程序集的功能请求进行投票： [https ://wpdev.uservoice.com/forums/110705-universal-windows-platform/suggestions/18145291-dynamically-load-assembly](https://wpdev.uservoice.com/forums/110705-universal-windows-platform/suggestions/18145291-dynamically-load-assembly)

# sql - SQL Server Compact 查询分析器：如何更改表中字符串值的一部分？

> ID：14030672
> 
> 赞同：4
> 
> 时间：2012-12-25T12:32:14.077
> 
> 标签：sql

我有一个具有`.sdf`扩展名的 SQL Server Compact Edition 4.0 数据库文件。该数据库由图书编目应用程序创建。数据库有许多表，其中有一个名为的表，`Book`其中包含数据库中每本书的一行。该表有很多列，其中一个名为的列`FrontCover`包含一个字符串值，该值有两个部分：`path part`和`file name part`一本书封面的图像文件，例如：

```
Documents and Settings\Boson\My Documents\Books\Covers\0596003978.jpg 
```

在此示例中，路径部分是：

```
'Documents and Settings\Boson\My Documents\Books\Covers' 
```

而文件部分是：

```
'0596003978.jpg' 
```

有些书籍不包含任何列值，`FrontCover`因为封面不可用。对于此类书籍，列`FrontCover`是空的。但是，如果一本书有封面图像文件，则字符串值具有相同的路径部分但不同的文件部分。例如对于另一本书的列`FrontCover`有这个值：

```
'Documents and Settings\Boson\My Documents\Books\Covers\1590596633.jpg' 
```

我们可以看到路径部分与第一个示例相同，即：

```
'Documents and Settings\Boson\My Documents\Books\Covers' 
```

但文件部分不同：

```
'1590596633.jpg' 
```

**问题**：

我想更改整个表`Book`，以便为表中的每本书修改列`FrontCover`的字符串值，使文件部分保持不变，但路径部分从以下位置更改：

```
'Documents and Settings\Boson\My Documents\Books\Covers' 
```

至

```
'Books\AEM database\Covers' 
```

因此，第一个示例中 book列的字符串值`FrontCover`将从：

```
'Documents and Settings\Boson\My Documents\Books\Covers\0596003978.jpg' 
```

至

```
'Books\AEM database\Covers\0596003978.jpg' 
```

文件部分相同，但路径部分已更改。我想更改整个`Book`表，以便列的字符串值的文件部分`FrontCover`保持不变，但路径部分按上面指定的方式更改。

拥有`.sdf`数据库文件的图书编目应用程序很愚蠢，无法完成这项工作。因此，我安装了一个名为 SQL Compact Query Analyzer (http://sqlcequery.codeplex.com/) 的简单开源 SQL 查看/编辑应用程序。SQL Compact 查询分析器可以打开`.sdf`数据库文件并接受 SQL 命令以修改`.sdf`数据库文件。

你能帮我用可以完成这项工作的 SQL 命令吗？

非常感谢您的帮助。

此致

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-26T07:30:50.833

```
UPDATE Book SET FrontCover = REPLACE(
    CAST(FrontCover AS NVARCHAR(300)),
    'Documents and Settings\Boson\My Documents\Books\Covers',
    'Books\AEM database\Covers')
WHERE FrontCover like
    'Documents and Settings%' 
```

注意：where 子句可能不是必需的，但它确保您只替换以“文档和设置...”开头的字符串

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-26T14:17:07.567

Paul Brown 发布的答案是可以的，但是它产生了以下错误代码：

错误代码：-2147467259 [SQL Server Compact ADO.NET 数据提供程序] HResult：-2147217900，NativeError：25922 错误消息：函数的指定参数值无效。[ 参数 # = 1，函数名称（如果已知）= REPLACE ]

原因是 FrontCover 列的日期类型是 NTEXT（我忘了在我的问题中指定）并且函数 REPLACE 不允许 NTEXT 变量。所以我们必须在将 FrontCover 变量传递给 REPLACE 之前使用以下命令对其进行转换：

CAST（封面为 NVARCHAR（100））

因此我的问题的答案是：

UPDATE Book SET FrontCover = REPLACE (CAST(FrontCover AS NVARCHAR(100)), 'Documents and Settings\Boson\My Documents\Books\Covers\', 'Books\AEM database\Covers\')

# workflow - 如何将工作流程移动到解决方案中？

> ID：14030675
> 
> 赞同：0
> 
> 时间：2012-12-25T12:32:25.023
> 
> 标签：workflow, dynamics-crm-2011

我设计了很多很多步骤的工作流程。它工作得很好，我很满意。问题在于，当我创建它时，我没有专注于并将其作为定制（*new_wroom*）而不是我的解决方案的一部分（*godlike_wroom*）。

一种选择是通过简单地将我之前所做的相同步骤添加到一个新的步骤来重新创建它，这是在*上帝般*的解决方案范围内创建的。那让我伤心...

有没有办法将工作流程移动到解决方案（或其他解决方案）的范围内？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-25T20:43:20.390

如果我在您问题的字里行间阅读，我可能会解释您希望在将工作流添加到解决方案之前更改其架构名称。没有支持的方法来执行此操作，但是您可以： 创建一个仅包含工作流的新临时解决方案；导出为非托管；提取拉链；编辑customization.xml 文件并搜索/替换旧模式名称；将其重新打包为 zip。从 CRM 中删除旧的工作流程，然后导入修改后的 zip。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-25T20:35:22.967

如果您只需要能够完全“按原样”导出您的工作流程作为解决方案的一部分，那么：

转到自定义 > 解决方案 > [打开您的解决方案] > 组件 > 流程

在“添加新”按钮旁边有一个“添加现有”按钮，允许您从默认解决方案中选择组件。

请注意，这不会更改工作流的架构名称。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-11T21:12:44.250

停用工作流。

将其类型更改为 Process **Template**发布。如果您认为它对您有帮助，请同时更改它的名称。

重新激活为模板。

打开您的至高无上的解决方案，并根据模板在其中为同一实体创建一个新的工作流。

您现在有一个可以激活的克隆。

如果您认为不再需要它，请停用模板并将其删除。

# extjs - padding 和 bodyPadding 有什么区别

> ID：14030679
> 
> 赞同：1
> 
> 时间：2012-12-25T12:32:43.787
> 
> 标签：extjs

`Ext.panel.AbstractPanelView`类具有`padding`和`bodyPadding`属性。

似乎两者的行为相同。

有什么不同？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-25T12:59:35.507

根据文档：[http ://docs.sencha.com/ext-js/4-0/#!/api/Ext.panel.Panel-cfg-bodyPadding](http://docs.sencha.com/ext-js/4-0/#!/api/Ext.panel.Panel-cfg-bodyPadding)

```
padding : Number/String
Specifies the padding for this component. The padding can be a single numeric value to apply     to all sides or it can be a CSS style specification for each style, for example: '10 5 3 10'.

bodyPadding : Number/String
A shortcut for setting a padding style on the body element. The value can either be a number to be applied to all sides, or a normal css string describing padding. 
```

所以区别在于将应用什么元素填充。

# javascript - Firefox 17 location.constructor 异常

> ID：14030680
> 
> 赞同：1
> 
> 时间：2012-12-25T12:32:47.473
> 
> 标签：javascript, firefox, typeof

尝试`location.constructor`在 firefox 17 (Ubuntu) 中访问会引发错误`InternalError: too much recursion`( [bugzilla](https://bugzilla.mozilla.org/show_bug.cgi?id=814622) )。

我正在遍历 window 的所有自己的属性（即全局变量）并想要过滤掉系统对象`location`，例如`localStorage`等。我检查，该属性的构造函数不等于`Date`,`Array`或`Object`。

问题是：有人可以建议另一种技术在不访问`constructor`属性的情况下做同样的事情吗？在 Chrome/FF 中工作就足够了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-29T07:35:04.420

检查 Object.getPrototypeOf(whatever) 是否为 Object.prototype、Array.prototype 或 Date.prototype 可能会起作用。

# scala - 两种启动 scala 脚本的方法，哪个更可取？

> ID：14030684
> 
> 赞同：8
> 
> 时间：2012-12-25T12:33:27.520
> 
> 标签：scala, unix

我从*Programming in Scala*一书中了解到，我可以通过编写以下内容来启动 scala 脚本：

```
#!/bin/sh
exec scala "$0" "$@"
!#
println("hello world") 
```

没关系，但我也尝试过这种风格：

```
#!/usr/bin/env scala
!#
println("hello world") 
```

并发现这个也运行正常。
所以我不知道两者之间有什么区别。
而且，如果两者都可以，为什么本书选择前一个来演示，看起来有点长？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-25T13:24:51.493

它们是等价的。不同之处在于后者运行一个shell进程来启动Scala解释器，而前者使用`env`程序，它比shell更轻量级，并且显然不需要将shell代码和Scala混合在一个文件中（这可能会扰乱您的编辑器和其他工具）。

# wix - 在目录名称中使用隐含属性

> ID：14030685
> 
> 赞同：0
> 
> 时间：2012-12-25T12:33:43.560
> 
> 标签：wix, wix3.5

这是我正在尝试做的一个例子：

```
<Wix xmlns="http://schemas.microsoft.com/wix/2006/wi">
<Product Id="*" Name="SetupProject1" Language="1033" Version="1.0.0.0" Manufacturer="MySoftware" UpgradeCode="d2192e52-f4f6-461c-9d8e-eb66067df09a">
    <Package InstallerVersion="200" Compressed="yes" InstallScope="perMachine" />

    <MajorUpgrade DowngradeErrorMessage="A newer version of [ProductName] is already installed." />
    <MediaTemplate />

    <Feature Id="ProductFeature" Title="SetupProject1" Level="1">
        <ComponentGroupRef Id="ProductComponents" />
    </Feature>
</Product>

<Fragment>
    <Directory Id="TARGETDIR" Name="SourceDir">
        <Directory Id="ProgramFilesFolder">
            <Directory Id="INSTALLFOLDER" Name="[Manufacturer] SetupProject1" />
        </Directory>
    </Directory>
</Fragment>

<Fragment>
    <ComponentGroup Id="ProductComponents" Directory="INSTALLFOLDER">
        <!-- TODO: Remove the comments around this Component element and the ComponentRef below in order to add resources to this installer. -->
        <!-- <Component Id="ProductComponent"> -->
            <!-- TODO: Insert files, registry keys, and other resources here. -->
        <!-- </Component> -->
  <Component Id="CMP_NEW">
    <File Id="FILE_NEW" Source="New Text Document.txt" KeyPath="yes" />
  </Component>
    </ComponentGroup>
</Fragment> 
```

在 ProgramFiles 中创建的文件夹是`[Manufacturer] SetupProject1`而不是`MySoftware SetupProject1`. 我做对了吗？如果没有，请问我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-25T13:01:36.387

创建一个变量 $(var.Manufacturer) 并像这样使用它：

像这样定义：`<?define Manufacturer = "MySoftware"?>`

```
<Product Id="*" Name="SetupProject1" Language="1033" Version="1.0.0.0" Manufacturer="$(var.Manufacturer)" UpgradeCode="d2192e52-f4f6-461c-9d8e-eb66067df09a">

<Directory Id="INSTALLFOLDER" Name="$(var.Manufacturer) SetupProject1" /> 
```

那可行..：）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-07T19:11:27.217

我遇到的问题是您无法将预处理器变量设置为安装期间定义的值，例如在 UI 中。我正在尝试将目录名称设置为用户提供的属性。

So far the key way I've seen to get around this is to use a custom action to change the Directory datatable to the value of the property you would otherwise reference. Just make sure you time the custom action so that it doesn't happen before the directory is normally set, otherwise it might be overwritten.

I'm still looking for something a little prettier however.

# servicestack - OrmLite 实体的复合聚集索引

> ID：14030689
> 
> 赞同：3
> 
> 时间：2012-12-25T12:34:31.220
> 
> 标签：servicestack, ormlite-servicestack

是否可以在 ServiceStack.OrmLite 中创建具有多列的聚集索引？

# c - gcc 宏定义选项不适用于字符串

> ID：14030690
> 
> 赞同：2
> 
> 时间：2012-12-25T12:34:33.340
> 
> 标签：c, linux, gcc

示例代码：

```
main()
{
    printf("%d\n", MARCO);  
//  printf("%s\n", MARCO);
} 
```

当我尝试使用`gcc` `-D`选项时，我发现以下命令有效：

```
gcc -D MARCO=12345 test.c 
```

但是当我将 12345 更改为字符串时：

```
gcc -D MARCO=abcde test.c 
```

发生错误：

```
error: ‘abcde’ undeclared (first use in this function) 
```

我试过了`-DMARCO=abcde`，，，`-DMARCO="abcde"`；`-D MARCO="abcde"`一切都因该错误而失败。

这个`-D`选项是否只支持整数？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-12-25T12:37:45.240

问题是双引号被shell识别并删除，除非你通过转义双引号（带反斜杠）或将它们括在单引号中（这是我会使用的）来防止shell这样做：

```
gcc -DMARCO='"abcde"' test.c 
```

单引号被 shell 剥离，但这意味着 C 预处理器可以看到双引号。当然，您需要使用`%s`格式。

通过更改宏，您可以在命令行上对未加引号的名称进行字符串化：

```
#include <stdio.h>
#define STRINGIFY(x) #x
#define MACRO(x)     STRINGIFY(x)
int main(void)
{
    printf("%s\n", MACRO(MARCO));
    return(0);
} 
```

编译它，`gcc -o testprog -DMARCO=abcde test.c`你会发现它产生了正确的答案。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-25T12:37:29.263

宏`MARCO`实际上被您输入的字符串替换，然后才编译代码。由于字符串周围没有引号（其中两个示例中的双引号被 shell 解释为分隔符），因此`abcde`不会将其解释为字符串，而是作为标识符。由于未定义，因此代码无法编译。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-25T12:37:30.873

你也可以这样使用...

`-DMACRO="\"abcde\""`

**参考：** [如何在 cmd.exe 中将带有 -D 的带引号的字符串传递给 gcc？](https://stackoverflow.com/questions/9928595/how-do-i-pass-a-quoted-string-with-d-to-gcc-in-cmd-exe)

# css - IE9/8/7 css sprite 位置滑动问题

> ID：14030693
> 
> 赞同：16
> 
> 时间：2012-12-25T12:35:13.500
> 
> 标签：css, internet-explorer-8, internet-explorer-9, internet-explorer-7, css-sprites

我想css sprite（精灵图像总宽度：45px 和总高度：15px 由三个图像组成）但是在 IE9/8/7 中存在问题。链接和悬停工作，但是当单击按钮（活动）时，精灵图像向左滑动 1px。仅适用于 IE 9/8/7 的问题。如何解决此问题？

**CSS：**

```
body{
    margin:0;
    padding:0;
}

.button{
    background:url(sprite-image.png) no-repeat 0 0;
    width:15px;
    height:15px;
    cursor:pointer;
}

.button:hover{
    background:url(sprite-image.png) no-repeat -15px 0;
}

.button:active{
    background:url(sprite-image.png) no-repeat -30px 0;
}

.cont{
    width:200px;
    height:200px;
    float:left;
    margin:50px 0 0 100px;
} 
```

**HTML：**

```
 <body>
  <div class="cont">
     <div class="button">&nbsp;</div>
  </div>
 </body> 
```

“链接”和“悬停”和“活动” FF,Chrome,Safari,Opera 像这样；

![在此处输入图像描述](../Images/f8fd6cdb5210266606bbfc036a4d720d.png)

但是 IE 9/8/7 active 看起来像这样；

![在此处输入图像描述](../Images/54f2e5709e6f37848f00fe4d47daf07f.png)

我将上面的图像具体化以使其看起来更好。我的精灵图像；

![在此处输入图像描述](../Images/b9a65c2c50e3da43f8443d6b66283a8b.png)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-28T22:36:09.837

为什么不使用 IE 条件注释；

```
 <!doctype html>
<!-- paulirish.com/2008/conditional-stylesheets-vs-css-hacks-answer-neither/ -->
<!--[if lt IE 7]> <html class="no-js lt-ie9 lt-ie8 lt-ie7" lang="en"> <![endif]-->
<!--[if IE 7]>    <html class="no-js lt-ie9 lt-ie8" lang="en"> <![endif]-->
<!--[if IE 8]>    <html class="no-js lt-ie9" lang="en"> <![endif]-->
<!-- Consider adding a manifest.appcache: h5bp.com/d/Offline -->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en"> <!--<![endif]--> 
```

然后编写例如 CSS 规则，如 . `lt-ie9 .someclass{}`以 IE 版本为目标。我用它们来修复一些特定于 IE 的 css-stuff。没有肮脏的黑客，没有麻烦，只有 css。您是否检查过例如 Firebug Lite 会发生什么？！大纲：0 没有？

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-25T12:58:32.850

将 Internet Explorer 特定样式表添加到该`<head></head>`部分。

```
<!--[if lt IE 9]>
<link rel="stylesheet type="text/css" href="/css/ie.css" />
<![endif]--> 
```

并`ie.css`执行以下操作：

```
.button:active{
    background:url(sprite-image.png) no-repeat -29px 0 !important;
} 
```

（ie总是有问题，唷！）

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-28T02:15:09.473

我使用您的图形创建了一个假精灵，以查看您所看到的内容，但在所有 IE 7-9 中看起来都不错（请注意，我只是更改了定位并使其具有显着性（更少）：

[http://jsfiddle.net/Riskbreaker/Rr8p2/](http://jsfiddle.net/Riskbreaker/Rr8p2/)

```
body{
    margin:0;
    padding:0;
}

.button{
    background:url(images/sprite.png) no-repeat 0 0;
    width:14px;
    height:15px;
    cursor:pointer;
}

.button:hover{
    background-position:0px -27px;
}

.button:active{
    background-position:0px -27px;
}

.cont{
    width:200px;
    height:200px;
    float:left;
    margin:50px 0 0 100px;
} 
```

记住我制定的定位，以便您进行调整。我以前从未遇到过活动的 IE 问题...但是让我知道您所看到的...如果问题仍然存在并且您不想要另一个文件，请执行以下操作：

IE7：（`*.button:active{background-position:0px -28px;}`或任何正确的位置）......

IE8：`.button:active{background-position:0px -28px\9;}`…………

IE9 ....不确定您的最新版本，但应该没有任何问题（最新版本）

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-01-01T06:17:28.347

我以前在 IE8 上遇到过类似的问题，但 IE9 在我的情况下运行良好（不确定 IE7，但它必须像 IE8 一样）。

**它可以通过以下两种方法之一解决/改进：**

1）修改图像（可能是分辨率，颜色组合等）并尝试它是否有效。为什么这可能有效？因为在您的示例中，IE 似乎试图“智能”地进行一些图像处理，不幸的是有时会出错（特别是对于小图像/像素完美的情况），您只能希望它不会对您的新图像造成严重失败。

**2) 使用**0.5px**单位的背景位置精度。**

    请注意以下代码中的“ **background-position: -15.5px 0;** ”。此解决方案将至少减少 50% 的挫败感 :-) 恐怕**您可能需要**为此解决方案提供 IE 特定的 CSS 但这应该没问题...您可以使用 JavaScript 或在标签上添加浏览器标识符类名称使用@ [http://paulirish.com/2008/conditional-stylesheets-vs-css-hacks-answer-neither/](http://paulirish.com/2008/conditional-stylesheets-vs-css-hacks-answer-neither/)提到的技术，然后在编写浏览器特定的 CSS 时使用这些类名。

**解决方案：**

```
.button {
    background:url(images/sprite.png) no-repeat 0 0;
    width: 15px;
    height: 15px;
    cursor:pointer;
}

.button:hover {
    background-position: -15.5px 0;
}

.button:active {
    background-position: -30px 0;
}

.cont {
    width: 200px;
    height: 200px;
    float: left;
    margin: 50px 0 0 100px;
} 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2013-01-03T05:18:55.727

## 您可以使用以下技巧，这将有助于提供手动价值

对于 IE7（值前的下划线）

```
.button:hover {
    background-position: _-15.5px 0; 
} 
```

或 IE-7 & IE-8(需加\9)

```
.button:hover {
    background-position: -15.5px\9; 
} 
```

* * *

仅适用于 IE8 (\0/)

```
*+.button:hover {
    background-position: -15.5px\0/;
} 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-12-27T15:05:13.017

尝试在 css 中进行此更改：

```
.button{
    background: url(sprite-image.png) no-repeat left 0;
    width: 15px;
    height: 15px;
    cursor: pointer;
}
.button:hover{
    background: url(sprite-image.png) no-repeat center 0;
}
.button:active{
    background: url(sprite-image.png) no-repeat right 0;
} 
```

# javascript - d3 有向图边

> ID：14030694
> 
> 赞同：1
> 
> 时间：2012-12-25T12:35:20.407
> 
> 标签：javascript, graph, d3.js

我不知道如何用 d3.js 绘制定向 esges。我需要有不同高度的矩形。像图像。我不需要这些矩形可移动或强制布局。但我需要在边缘顶部的文本跟随边缘路径，这可能是贝塞尔曲线。但我没有看到 d3 中的任何函数需要两个节点并在它们之间绘制一条边。
![](../Images/4f50d47b6c70791e623611d43431dd9d.png)

# r - 在 R 中，两列之间的相关性检验，对于第三列中的每个组

> ID：14030697
> 
> 赞同：0
> 
> 时间：2012-12-25T12:36:03.790
> 
> 标签：r

我的数据框 (g) 包含 2 列带有连续数据的列和其他带有分类数据的列。我想测试由第三列定义的不同组中的 2 个连续变量之间的相关性。
g (157X3000) 看起来像：

```
 Geno          GDW         GN        M1     M2      M3
1 SB002XSB012 -17.1597630   52.31961    G/G    C/C     T/T
3 SB002XSB044  -3.6537657   53.81305    G/G    C/G     G/G
4 SB002XSB051  -7.8411596   58.05924    A/G    C/C     G/T
5 SB002XSB067   2.8412103   30.85074    A/G    G/G     G/T
6 SB002XSB073 -16.0789550  -10.09913    A/A    C/G     G/G
7 SB002XSB095   0.1759709   10.28837    A/A    G/G     T/T 
```

我正在寻找每个 M 定义的每个组中 GDW 和 GN 之间的相关性。我尝试过：

```
q<- function (x) {

spl<-split(g[,2:3],x)

r<-function(x) { if ((nrow(x[[1]][1]))>2)

cor.test(x[[1]][1],x[[1]][2],use="pairwise.complete.obs")[3:4] else Na
}

cor<- sapply(spl,r)

}

all.cor<- apply(g[,4:ncol(g)],2,q) 
```

并得到：

```
Error in if ((nrow(x[[1]][1])) > 2) cor.test(x[[1]][1], x[[1]][2], use = "pairwise.complete.obs")[3:4] else Na : 
  argument is of length zero 
```

并没有解决它

有任何想法吗

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-25T13:22:51.223

如果我理解正确，您想为 M1 列中的每个值计算 GDW 和 GN 之间的相关性（即，通过在 M1 的每个唯一值处进行拆分）。

使用 Hadley 的[plyr](http://plyr.had.co.nz/)

```
require(plyr)
# assuming the data.frame is df (Note: factor M1 if necessary)
daply(df, .(M1), function(y) cor(y$GDW, y$GN)) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-25T14:43:06.207

我想你想要这个函数内部`r`：

```
if ((length(x[[1]]))>2)
    cor.test(x[[1]],x[[2]],use="pairwise.complete.obs")[3:4] else NA 
```

`x[[1]]`是一个向量，而`x[[1]][1]`是该向量的单个元素。您显然需要向量`cor.test`而不是单个元素。

此外，一个向量有一个`length`但`nrow`不合适。

您得到的错误是评估的结果`nrow(x[[1]][1])`，`NULL`因此`nrow(x[[1]][1]) > 2`评估为`logical(0)`。的参数`if`应该是`logical`长度为 1 的 a。

# spring - InternalResourceViewResolver 不从子文件夹加载页面

> ID：14030719
> 
> 赞同：0
> 
> 时间：2012-12-25T12:38:13.153
> 
> 标签：spring, spring-mvc

在我的应用程序的 webapp 文件夹下，我有一个名为 meetingroom 的文件夹**，在该文件夹中我有一个名为****viewrooms.jsp** 的 jsp 页面

 ****- DispatcherServlet**配置如下：

```
<listener>
  <listener-class>org.springframework.web.context.ContextLoaderListener</listener-class>
</listener>

<context-param>
    <param-name>contextConfigLocation</param-name>
        <param-value>
         classpath:spring/config/applicationContext.xml
    </param-value>
</context-param>

<servlet>  
    <servlet-name>spring</servlet-name>  
    <servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>    
    <init-param>
        <param-name>contextConfigLocation</param-name>
        <param-value>classpath:spring/config/applicationContext.xml</param-value>
   </init-param>
<load-on-startup>1</load-on-startup>
</servlet>

<servlet-mapping>  
    <servlet-name>spring</servlet-name>  
    <url-pattern>/meetingroom/*</url-pattern>  
</servlet-mapping> 
```

**- InternalResourceViewResolver** bean：

```
<bean class="org.springframework.web.servlet.view.InternalResourceViewResolver">
    <property name="prefix" value="/"/>
    <property name="suffix" value=".jsp"/>
</bean> 
```

**- 控制器：**

```
@Controller
@RequestMapping("/viewrooms.jsp")
public class ViewRooms {

    @RequestMapping(method = RequestMethod.GET)
    public String get() {
        log.debug("######## GET METHOD FOR VIEW ROOMS ########");
        return "meetingroom/viewrooms";
    }
} 
```

*   我如何访问该页面：`http://localhost:8081/MyAPP/meetingroom/viewrooms.jsp`

**ISSUE：**在无限循环中调用控制器 get 方法并且页面未呈现。

请告知为什么它不起作用，谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-25T13:33:34.703

恕我直言 @RequestMapping("/viewrooms.jsp") 指向 /MyAPP/viewrooms.jsp 将 @RequestMapping 更改为 "/meetingroom/viewrooms.jsp" 将是我解决问题的下一个猜测

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-25T12:48:33.667

更改页面文件夹名称后问题已修复，可能与 servlet url 映射冲突。**

# dynamics-crm-2011 - 如何规避工作流中的最大超时次数？

> ID：14030722
> 
> 赞同：0
> 
> 时间：2012-12-25T12:38:51.107
> 
> 标签：dynamics-crm-2011, workflow-foundation, dynamics-crm-online

当我使用内置 GUI 设计工作流时，我注意到在第五次超时深度之后（*超时直到 x 分钟，然后执行...*）我不能再添加更多步骤。在垂直方向上，我可以输入许多行，但在深度方面（即向右），它似乎给了我一个禁止，我不能添加第六个*等到，然后执行...*子句。

是否有可能并且我在没有意识到的情况下遇到了其他问题，或者这是设计上的限制？可以解决吗？我的目标是本地安装和在线安装。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-28T17:07:00.430

您可以将这些步骤放在相同的深度（假设您正在做一些**除了**延迟之外的事情） - 所以它们是横向对齐的。这样，您可以输入任意多个等待语句（即 12 个，因为这是我测试过的）。

至于五个层次的深度，我从来没有在需要的时候遇到过情况。如果您想了解更多信息，我建议您发布赏金。但是你可能想在新年前夜之后这样做。现在人们忙于*生活*中的事情，而不是关注生活中的唯一目的（例如登录到 Stack Overflow）。

# objective-c - 如何在 iPhone 应用程序中显示实时网站数据

> ID：14030724
> 
> 赞同：0
> 
> 时间：2012-12-25T12:39:04.900
> 
> 标签：objective-c, ios6, live-update

我是 iPhone 应用程序的新手，我想根据网站客户端创建 iPhone 应用程序。我想做的是**`Upcoming Courses`**从[**这个网站上**](http://smart-kw.com/)展示。知道怎么做吗？

请注意，部分中的表格`Upcoming Courses`是静态数据，并且该站点是使用 Joomla 创建的。网络开发人员`Upcoming Courses`根据课程每周对部分进行更改。

谁能建议我正确的道路需要做什么？

我也尝试在 google 上搜索，发现需要为该部分创建 RSS。所以我相信如果我需要创建 RSS，那么我必须将这些数据存储在数据库中。不是吗？这只是处理它的一种方法吗？

**我的客户说，如果他们在网站上进行更新，它也应该在 iPhone 应用程序中得到纠正**。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-25T12:42:28.877

看看这里的例子：

[https://github.com/greenisus/cocoa-rss](https://github.com/greenisus/cocoa-rss)

如果您使用 Joomla，那么您当然已经拥有一个数据库。我很确定有一些不错的 RSS 模块，您可以使用它们。

然后你只需要在你的应用程序中解析它们。

RSS中没有**推送**之类的东西，您必须不断检查和更新您的内容。

# tableview - javafx在tableview中准确显示单元格的文本

> ID：14030726
> 
> 赞同：5
> 
> 时间：2012-12-25T12:39:24.360
> 
> 标签：tableview, javafx

这似乎是一个简单的问题，但我只能得到单元格的真实值，而不是显示文本，因为我使用 tableColumn.setCellFactory 来更改单元格的显示文本（使用一种方法将真实值转换为我不想要的文本），所以单元格将有 2 个值：显示文本和实际值。我可以重新转换，但这是一个愚蠢的解决方案:(

```
cell = t.getColumns().get(col).getCellData(row); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-02-16T02:24:39.093

您无法直接访问渲染器。其中一个原因是您必须访问包含显示节点的 VirtualFlow。但是，我给你一个答案，你发布的详细信息：

> 为了实现不可知的导出功能（到 CSV、XLS 等），从表格视图请求单元格文本而不是数据会非常方便。那可能吗？

对于任何类型的导出，请使用转换器。

你永远不知道你的用户有什么目标格式。您的用户在 JavaFX 应用程序中的数字格式设置可能与他们在 Excel 中的不同。使用 Excel，您需要获取 JavaFX 模型数据并设置 Excel 的模型数据。不要使用视图数据导出并期望在 Excel 视图中导入会起作用，你会遇到问题。

CSV 也一样。例如，如果您使用德语本地化，那么在您的表中，2 位小数将看起来像 123,45 而不是 123.45。因此，当您导出表格的视图数据时，您将破坏 CSV 格式。

您将无法通过适当的转换器导出模型数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-31T11:10:37.137

您可以使用 getItems() 方法来访问 Table 的模型。根据行 ID，您可以获得该行的 DataModel。

```
tblSampleTable.getItems().get(rowId); 
```

所以你有对 DataModel 的引用，这意味着你可以访问所有数据（实际数据）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-02-18T02:27:33.710

如果您需要获取 TableView 的显示文本，您可以这样做：

```
public void showAllText(TableView<?> tv){
     for (Node r: tv.lookupAll(".table-row-cell")) {
          for (Node c: r.lookupAll(".table-cell")) {
              TableCell<?, ?> tc=(TableCell<?, ?>) c;
              System.out.print(tc.getText()+" \t ");                                      
          }
          System.out.println("");
     } 
```

}

祝你好运。

# image - mPDF 不显示路径中带有空格的图像

> ID：14030727
> 
> 赞同：1
> 
> 时间：2012-12-25T12:39:46.670
> 
> 标签：image, spaces, mpdf

我正在使用 MODX。
例如，带有路径的图像`assets/modules/ZipUpload/Jemchug/mini_820094.jpg`可以正确显示，但`assets/modules/ZipUpload/Duplicate of Kulonyi, Podvesyi/mini_820022.jpg`不能正确显示。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-08-14T18:23:58.413

In the `AdjustHTML` function of the `mpdf.php` file there is a line that causes this problem with images:

```
$html = preg_replace("/[ ]+/",' ',$html); 
```

# asp.net-mvc-2 - 如何将枚举转换为 IEnumerable

> ID：14030729
> 
> 赞同：1
> 
> 时间：2012-12-25T12:39:59.313
> 
> 标签：asp.net-mvc-2, html-helper

**更新 1**

我想填充一个`listboxfor`mvc 助手以在 View 中呈现列表项。我不知道如何将第二个参数传递给接受`IENumerableSelectListItem` `SelectionList`.

```
 Html.ListBoxFor(model => model.SelectedDate, Model.DateList, new { }) 
```

我的模型类中有一个属性，

```
public IEnumerableSelectListItem  DateList { get; set; } 
```

并且不知何故，我需要从我的控制器操作方法中填充**DateList**，该方法填充所有其他模型属性并将其传递给我有助手的局部视图。DateList 应该从 Enum DateListEnum 获取值

关于如何去做这件事的任何想法。还让我知道如何确保一次选择一个列表项......我对所有这些都很陌生......而且我已经有很长一段时间了......但到目前为止没有任何结果……

我的控制器操作方法中有以下代码，

```
model.DateList = getDateList(); 
```

调用此方法，

```
public IEnumerableSelectListItem getDateList()

{

IEnumerableSelectListItem  values = Enum.GetValues(typeof(DateListEnum));

 //this one doesn't work because of casting issues and this is where i want to convert Enum Values to  IEnumerableSelectListItem

return values; 

 } 
```

**更新 2**

我根据以下代码使列表框正常工作并在 UI 中显示

```
` IEnumerable<SelectListItem> values = Enum.GetNames(typeof(ColumnFormattingDateFormats)).Cast<ColumnFormattingDateFormats>().Select(p => new SelectListItem()
            {
                Text = p.ToString(),
                Value = ((int)p).ToString()
            }).ToList();` 
```

但现在我几乎没有其他问题，

我正在使用的枚举是

```
`public enum ColumnFormattingDateFormats : int 
{ 
[StringValue("Wednesday, March 14, 2001")]
 FULLDATE = 0, 
[StringValue("3/14")]
 MMDDWSLASH = 1,
 [StringValue("3/14/01")]
 MMDDYYWSLASH = 2,
 [StringValue("03/14/01")]
 MMDDYYWMMZEROPREFIXWSLASH = 3 
}` 
```

我的助手看起来像这样，

`Html.ListBoxFor(model => model.SelectedDate, Model.DateList, new { })`

**1> 我如何将选定的项目传递给帮助者的列表框？** 有没有办法通过 `[DataMember] public ColumnFormattingDateFormats SelectedDate{ get; set; }` 我的模型类中的属性将所选项目传递给助手？首先，我将传递 `this.SelectedDate= ColumnFormattingDateFormats.FULLDATE;` 给我的模型类中的默认构造函数......但由于某种原因，第一个参数`model => model.SelectedDate`有一些问题......抛出空异常......

**2> 我如何确保`[StringValue]`Enum 显示在 UI 列表框元素中，而不是前的 Enum Text 中。不应该显示 FULLDATE，而是应该显示“2001 年 3 月 14 日，星期三”？**

**3> 如何确保在不使用 livequery 的情况下选择单个项目？**

我的大脑现在都炸了....任何方向有人吗？？？？？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-25T12:55:40.480

怎么样：

```
Enum.GetValues(typeof(MyEnum))
.Cast<MyEnum>()
.Select(p => new SelectListItem()
                    {
                        Text = p.ToString(),
                        Value = ((int) p).ToString()
                    })
                .ToList(); 
```

# c# - GridView 左边距（Windows 8 C#/XAML）

> ID：14030731
> 
> 赞同：0
> 
> 时间：2012-12-25T12:40:28.713
> 
> 标签：c#, xaml, gridview, windows-8

我想添加`GridView`到我的页面，以便第一组有`120px`左边距。如果我在它上设置左边距属性，`GridView`它确实给了我右边距，但是当我滚动组时，这些组被剪裁到该边距的左侧。有没有办法在`GridView`不剪裁的情况下设置边距？我现在所做的是添加一个空的假组。但是现在当我去快照视图时，我很难让这个组不占用空间，即使我在这个假组中使用的项目模板只是

```
<Grid></Grid> 
```

我想我可以尝试编辑 GroupStyle 并使组之间的间距为 0（我也会接受这个作为答案），尽管这看起来很丑陋。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-26T15:16:18.647

VS2012 的 Windows 应用商店“Grid App”的参考实现通过使用 GridView 上的 Padding 属性来实现这一点：

```
 <GridView
        x:Name="itemGridView"
        AutomationProperties.AutomationId="ItemGridView"
        AutomationProperties.Name="Grouped Items"
        Grid.RowSpan="2"
        Padding="116,137,40,46"
        ItemsSource="{Binding Source={StaticResource groupedItemsViewSource}}"
        ItemTemplate="{StaticResource Standard250x250ItemTemplate}"
        SelectionMode="None"
        IsSwipeEnabled="false"
        IsItemClickEnabled="True"
        ItemClick="ItemView_ItemClick"> 
```

捕捉到的 VisualState 可用于将 Padding 值更改为适当的值：

```
 <ObjectAnimationUsingKeyFrames Storyboard.TargetName="itemGridView" Storyboard.TargetProperty="Padding">
        <DiscreteObjectKeyFrame KeyTime="0" Value="0,0,0,0"/>
    </ObjectAnimationUsingKeyFrames> 
```

# model-view-controller - 如何在网格单元格中显示另一个商店的值？

> ID：14030733
> 
> 赞同：1
> 
> 时间：2012-12-25T12:41:04.773
> 
> 标签：model-view-controller, extjs, extjs4

我有显示我所有汽车的汽车网格。它绑定到 Cars 商店（绑定到 Car 模型）。

汽车模型具有`brand_id`指向特定汽车品牌的字段。

所以在网格`brand_id`中我的品牌列中有数字。

我有一个商店：

```
Ext.define('1.store.Brands', {

    extend: 'Ext.data.Store',
    fields: ['id', 'title'],
    data : [
        {'id':1, 'title':'AUDI'},
        {'id':2, 'title':'BMW'},
        {'id':3, 'title':'FIAT'}
    ]

}); 
```

如何显示真实的品牌名称，而不是`ID`自动从品牌商店中拉出来？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-25T13:13:18.453

您可以在网格列渲染器中使用您的品牌商店。 [http://docs.sencha.com/ext-js/4-1/#!/api/Ext.grid.column.Column-cfg-renderer](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.grid.column.Column-cfg-renderer)

```
{
    renderer: function(value){
        var rec = brandStore.findRecord('id', value);
        return rec.get("title");    
    }
} 
```

# java - Java 句柄（mutex ？）被泄露而不被释放（不是文件句柄）

> ID：14030739
> 
> 赞同：4
> 
> 时间：2012-12-25T12:42:08.753
> 
> 标签：java, mutex, memory-leaks, handles

我有一个运行很长时间的复杂 Java 应用程序。该应用程序一遍又一遍地执行相同的操作，几乎没有细微差别。我的问题是 Windows 任务管理器显示了很多 Java 进程的泄漏句柄（不是文件句柄）。

在压力下运行应用程序一段时间后，我遇到了奇怪的故障，例如应用程序卡住、消失，或者在尝试打开文件时出现 FileNotFoundException（“系统资源不足，无法完成请求的服务”）。

我使用 Windows 任务管理器查看问题所在，发现对于 java.exe 进程 - 句柄数量增加得非常快。线程数没有增加，使用的RAM量也没有增加。

然后我使用 SysInternal 的 Process Explorer 来了解这些句柄是什么。我看到它们不是文件句柄，而是数千个“突变”类型的句柄，名称为 \BaseNamedObjects\??????n。根据网络上的一些网站，Mutant in Process explorer 的意思是 Mutex。我的 Java 应用程序不会故意创建任何互斥锁。

下一步是使用分析工具来缩小泄漏源。我使用了“J Optimizer”和“Java VirtualVM”。对于这两个应用程序，我无法检测到泄漏的句柄。他们有内存泄漏检测器，但我找不到检测泄漏句柄的方法。

我的问题是：如何调试这个问题？如何发现导致手柄泄漏的原因？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-25T14:25:21.960

如果您对如何分配泄漏的引用感到好奇，请参阅：[How to view memory allocation stacktrace in Java VisualVM](https://stackoverflow.com/questions/12017529/how-to-view-memory-allocation-stacktrace-in-java-visualvm)

我不确定您如何跟踪引用如何未能解除分配。

# objective-c - 如何在 Mac OS 中执行特定（外部）应用程序的菜单项？

> ID：14030742
> 
> 赞同：2
> 
> 时间：2012-12-25T12:42:28.663
> 
> 标签：objective-c, macos, cocoa

如何在 Mac OS 中执行特定（外部）应用程序的菜单项（或获取菜单项列表），例如“应用程序快捷方式”（在“系统偏好设置 -> 键盘 -> 键盘快捷方式”中）？

我的意思是让外部应用程序通过指向其中一个菜单项来完成工作，就像“应用程序快捷方式”一样。我打算编写一个可以完成这项工作的程序。任何人都可以帮助我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-25T12:46:06.180

在 Xcode 中，您可以在`NSMenu`in 中设置快捷方式`MainMenu.xib`。

只需添加一个新的，在**Attributes Inspector**`NSMenuItem`中设置 Key Equivalent，然后最后使用[Target-Action](https://developer.apple.com/library/mac/#documentation/General/Conceptual/Devpedia-CocoaApp/TargetAction.html)连接它。

 *** * *

抱歉刚刚看到您编写了外部应用程序。

应用程序必须支持这一点。大多数苹果应用程序都支持 AppleScript。

您可以在此处使用它来设置全局热键：

[https://github.com/davedelong/DDHotKey](https://github.com/davedelong/DDHotKey)**

# asp.net - Json在返回json格式时添加\字符

> ID：14030744
> 
> 赞同：1
> 
> 时间：2012-12-25T12:42:59.130
> 
> 标签：asp.net, json

我正在创建一个需要返回 JSON 格式的 API/Web 服务。我还需要将 Web 服务创建为 POST 请求 下面的示例代码，请在本文末尾查看更多源代码片段。

```
Meta meta = new Meta(); 
meta.recipes = new List<Recipe>(); 
JavaScriptSerializer js = new JavaScriptSerializer(); 
string strJSON = js.Serialize(meta); 
return strJSON; 
```

问题：当我在几个 REST 控制台（尝试过的控制台列表）和 ASP.NET 客户端中尝试响应时，我得到的这种格式在每个“之前都有一个额外的“d”和额外的 \。请参见下面的返回输出：

```
{"d":"{\"count\":\"0\",\"status\":\"500\",\"recipes\":[]}"} 
```

当我尝试删除序列化时，我得到以下格式：

```
<Meta xmlns:xsi="w3.org/2001/XMLSchema-instance"; xmlns:xsd="w3.org/2001/XMLSchema"; xmlns="tempuri.org/">; <count>1</count> <status>200</status> <recipes> <Recipe> <recipeID>1</recipeID> <recipeName>Apple Pie</recipeName> <imageURL>service/it.jpg</imageURL> <rating/> </Recipe> </recipes> </Meta> 
```

但我希望它采用以下格式：

```
{"count":"0","status":"500","recipes":[]}

[WebMethod(Description = "Return all Recipe...")] 
[ScriptMethod( ResponseFormat = ResponseFormat.Json)] 
public Meta RecipeList(string ingredientId, string cuisineId, string dishTypeId, string courseId) 
```

即使我返回元对象并且不添加序列化，这仍然返回 XML

问题：

1.  我认为正确的 JSON 格式应该没有这个“d”和 . 这是真的还是输出的正确 JSON 格式实际上带有“d”和 \？
2.  如果应该没有，那么您建议在服务器端还是客户端进行更正？
3.  我应该如何在服务器端纠正这个问题？
4.  如何在客户端纠正这种情况？

    ```
    [WebMethod(Description = "Return all Recipe...")]
    [ScriptMethod( ResponseFormat = ResponseFormat.Json)]
    public string RecipeList(string ingredientId, string cuisineId, string dishTypeId, string courseId,
            string occasionId, string considerationId, string recipeType, string readyTime, string favouritebyUserId, string bookmarkbyUserId)
    {
        DataSet ds = new DataSet();
        int rTime = 0;
        if (readyTime == "") rTime = 0;
        else rTime = Convert.ToInt32(readyTime);
        ds = RecipeBLL.SearchRecipe(ingredientId, cuisineId, dishTypeId, courseId, occasionId, considerationId, recipeType, rTime);
        // Create a multidimensional jagged array
        string[][] JaggedArray = new string[ds.Tables[0].Rows.Count][];
        int i = 0;    

        Meta meta = new Meta();

        int count = 0;
        meta.recipes = new List<Recipe>();
        foreach (DataRow rs in ds.Tables[0].Rows)
        {
            Recipe recipe = new Recipe {
                recipeID = rs["RecipeId"].ToString(),
                recipeName = rs["RecipeTitle"].ToString(),
                 imageURL = rs["Photo"].ToString(),
                rating  = rs["Rating"].ToString()
            };
            meta.recipes.Add(recipe);
            //mlist.Add(recipe);
            count++;
        }

        if (count != 0)
            meta.status = "200";
        else
            meta.status = "500";
        meta.count = count.ToString();
        JavaScriptSerializer js = new JavaScriptSerializer();
        string strJSON1 = js.Serialize(meta);
        return strJSON1;
    } 
    ```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-25T12:45:55.230

听起来问题在于*您*从代码中的某个地方返回了一个字符串 - 然后它被其他东西编码为 JSON。所以你返回的字符串是：

```
{"count":"0","status":"500","recipes":[]} 
```

...但是无论您从哪里返回都认为您正在*尝试*返回一个字符串，而不是一个带有计数的对象等。

您没有显示任何代码，但我怀疑答案将是删除一个显式序列化调用。

# objective-c - iOS AVFoundation：如何从 mp3 文件中获取艺术作品？

> ID：14030746
> 
> 赞同：16
> 
> 时间：2012-12-25T12:43:18.333
> 
> 标签：objective-c, ios, avfoundation

我的代码：

```
- (void)metadata {
AVURLAsset *asset = [AVURLAsset URLAssetWithURL:self.fileURL options:nil];

NSArray *artworks = [AVMetadataItem metadataItemsFromArray:asset.commonMetadata withKey:AVMetadataCommonKeyArtwork keySpace:AVMetadataKeySpaceCommon];
NSArray *titles = [AVMetadataItem metadataItemsFromArray:asset.commonMetadata withKey:AVMetadataCommonKeyTitle keySpace:AVMetadataKeySpaceCommon];
NSArray *artists = [AVMetadataItem metadataItemsFromArray:asset.commonMetadata withKey:AVMetadataCommonKeyArtist keySpace:AVMetadataKeySpaceCommon];
NSArray *albumNames = [AVMetadataItem metadataItemsFromArray:asset.commonMetadata withKey:AVMetadataCommonKeyAlbumName keySpace:AVMetadataKeySpaceCommon];

AVMetadataItem *artwork = [artworks objectAtIndex:0];
AVMetadataItem *title = [titles objectAtIndex:0];
AVMetadataItem *artist = [artists objectAtIndex:0];
AVMetadataItem *albumName = [albumNames objectAtIndex:0];

if ([artwork.keySpace isEqualToString:AVMetadataKeySpaceID3]) {
    NSDictionary *dictionary = [artwork.value copyWithZone:nil];
    self.currentSongArtwork = [UIImage imageWithData:[dictionary objectForKey:@"data"]];
}
else if ([artwork.keySpace isEqualToString:AVMetadataKeySpaceiTunes]) {
    self.currentSongArtwork = [UIImage imageWithData:[artwork.value copyWithZone:nil]];
}

self.currentSongTitle = [title.value copyWithZone:nil];
self.currentSongArtist = [artist.value copyWithZone:nil];
self.currentSongAlbumName = [albumName.value copyWithZone:nil];
self.currentSongDuration = self.audioPlayer.duration;
} 
```

这适用于从 m4a 文件中获取艺术作品，但不适用于 mp3 文件。如果`asset`指向 mp3 文件，`artworks`则为空。我做错了什么，我该如何解决？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-12-27T11:50:38.890

我发现艺术品是异步加载的，而图像是同步设置的。我是这样解决的：

```
- (void)metadata {
AVURLAsset *asset = [AVURLAsset URLAssetWithURL:self.fileURL options:nil];

NSArray *titles = [AVMetadataItem metadataItemsFromArray:asset.commonMetadata withKey:AVMetadataCommonKeyTitle keySpace:AVMetadataKeySpaceCommon];
NSArray *artists = [AVMetadataItem metadataItemsFromArray:asset.commonMetadata withKey:AVMetadataCommonKeyArtist keySpace:AVMetadataKeySpaceCommon];
NSArray *albumNames = [AVMetadataItem metadataItemsFromArray:asset.commonMetadata withKey:AVMetadataCommonKeyAlbumName keySpace:AVMetadataKeySpaceCommon];

AVMetadataItem *title = [titles objectAtIndex:0];
AVMetadataItem *artist = [artists objectAtIndex:0];
AVMetadataItem *albumName = [albumNames objectAtIndex:0];

NSArray *keys = [NSArray arrayWithObjects:@"commonMetadata", nil];
[asset loadValuesAsynchronouslyForKeys:keys completionHandler:^{
    NSArray *artworks = [AVMetadataItem metadataItemsFromArray:asset.commonMetadata
                                                       withKey:AVMetadataCommonKeyArtwork
                                                      keySpace:AVMetadataKeySpaceCommon];

    for (AVMetadataItem *item in artworks) {
        if ([item.keySpace isEqualToString:AVMetadataKeySpaceID3]) {
            NSDictionary *d = [item.value copyWithZone:nil];
            self.currentSongArtwork = [UIImage imageWithData:[d objectForKey:@"data"]];
        } else if ([item.keySpace isEqualToString:AVMetadataKeySpaceiTunes]) {
            self.currentSongArtwork = [UIImage imageWithData:[item.value copyWithZone:nil]];
        }
    }
}];

self.currentSongTitle = [title.value copyWithZone:nil];
self.currentSongArtist = [artist.value copyWithZone:nil];
self.currentSongAlbumName = [albumName.value copyWithZone:nil];
self.currentSongDuration = self.audioPlayer.duration;
} 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-12-26T21:29:35.090

我刚刚在这里找到了答案：[如何在 ios 开发中从 mp3 文件中提取元数据，](https://stackoverflow.com/questions/12884067/how-can-i-extract-metadata-from-mp3-file-in-ios-development)现在正在寻找为什么该代码不适用于 m4a 文件。我从您的代码中提取了一些内容，并提供了以下似乎适用于 m4a 和 mp3 的内容。请注意，我将适用于 mp3 的代码保留为没有限定符的开放 else 子句 - 如果有人在这方面获得更多经验，欢迎他们改进！

```
 - (void)getMetaDataForSong:(MusicItem *)musicItem {
   AVAsset *assest;

   // filePath looks something like this: /var/mobile/Applications/741647B1-1341-4203-8CFA-9D0C555D670A/Library/Caches/All Summer Long.m4a

    NSURL *fileURL = [NSURL fileURLWithPath:musicItem.filePath];
    NSLog(@"%@", fileURL);
    assest = [AVURLAsset URLAssetWithURL:fileURL    options:nil];
    NSLog(@"%@", assest);

    for (NSString *format in [assest availableMetadataFormats]) {
      for (AVMetadataItem *item in [assest metadataForFormat:format]) {
        if ([[item commonKey] isEqualToString:@"title"]) {
            musicItem.strSongTitle = (NSString *)[item value];
        } 
        if ([[item commonKey] isEqualToString:@"artist"]) {
            musicItem.strArtistName = (NSString *)[item value];
        }
        if ([[item commonKey] isEqualToString:@"albumName"]) {
          musicItem.strAlbumName = (NSString *)[item value];
        }
        if ([[item commonKey] isEqualToString:@"artwork"]) {
          UIImage *img = nil;
          if ([item.keySpace isEqualToString:AVMetadataKeySpaceiTunes]) {
            img = [UIImage imageWithData:[item.value copyWithZone:nil]];
          }
          else { // if ([item.keySpace isEqualToString:AVMetadataKeySpaceID3]) {
            NSData *data = [(NSDictionary *)[item value] objectForKey:@"data"];
            img = [UIImage imageWithData:data]  ;
          }
          musicItem.imgArtwork = img;
        }
     }
  }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-01-18T13:30:41.043

正如 Ryan Heitner 在对 Andy Weinstein 的评论中指出的那样，`AVMetadataKeySpaceID3`从 IOS7 到 IOS8 检索二进制艺术品数据的方式已经发生了变化。在ID3的情况下，一味地铸造`item`会`NSDictionary`崩溃。要使代码防弹，只需检查 dataValue，否则检查 Classes。事实上今天是`item.value`指`item.dataValue`有`NSData`课。

```
- (UIImage*)imageFromItem:(AVMetadataItem*)item
{
  NSData* data=nil;
  if (item.dataValue!=nil) {
    data=item.dataValue;
  } else if ([item.value isKindOfClass:NSData.class]) { //never arrive here nowadays
    data=(NSData*)item.value;
  } else if ([item.value isKindOfClass:NSDictionary.class]) { //never arrive here nowadays...
    NSDictionary* dict=(NSDictionary*)item.value;
    data=dict[@"data"];
  }
  if (data==nil) {
    return nil;
  }
  return [UIImage imageWithData:data];
} 
```

# c# - 在 asp.net 中，MySql 更新查询不起作用

> ID：14030747
> 
> 赞同：2
> 
> 时间：2012-12-25T12:43:31.390
> 
> 标签：c#, asp.net, mysql, sql

我提交查询，它没有抛出异常，它确实写入数据库，但不是我想要的。由于某种原因，除了我告诉查询的第一件事之外，它不会触及任何东西，并将其设置为 0。

这是我的代码：

```
 public static int UpdateTagDefinition(Dictionary<string, object> sqlQueryParams)
    {
        MySqlCommand query = new MySqlCommand();
        query.CommandText = "UPDATE `windows_dev` SET `name` = @name AND `desc_short` = @desc_short AND `desc_long` = @desc_long AND `tags` = @tags AND `image_title` = @image_title AND `images` = @images AND `release_date` = @release_date AND `update_date` = @update_date AND `is_on_sourcecontrol` = @is_on_sourcecontrol AND `sourcecontrol_type` = @sourcecontrol_type AND `sourcecontrol_uri` = @sourcecontrol_uri AND `download_uri` = @download_uri AND `project_uri` = @project_uri AND `source_uri` = @source_uri AND `is_public` = @is_public WHERE `DID` = @did;";
        query.Parameters.Clear();
        foreach(var sqlParam in sqlQueryParams)
        {
            query.Parameters.AddWithValue("@" + sqlParam.Key.ToString(), sqlParam.Value);
        }

        return Connector.RunSQLUpdateQuery(query);
    }

    public static int RunSQLUpdateQuery(MySqlCommand query)
    {
        try
        {
            MySqlConnection cnx = new MySqlConnection(ConfigurationManager.ConnectionStrings["******"].ConnectionString);

            // Connect to News Database and get recent article
            query.Connection = cnx;
            cnx.Open();
            MySqlDataReader Reader;
            Reader = query.ExecuteReader();
            cnx.Close();

            return 1;
        }
        catch
        {
            return 2;
        }
    } 
```

还有我设置 SQL 参数的地方；

```
 Dictionary<string, object> sqlQueryParams = new Dictionary<string, object>();
            sqlQueryParams.Add("name", Request.Form["name"]);
            sqlQueryParams.Add("desc_short", Request.Form["desc_short"]);
            sqlQueryParams.Add("desc_long", Request.Form["desc_long"]);
            sqlQueryParams.Add("tags", TagDefinitions.TagDefinitionsToSQL(TagDefinitions.GetTagDefinitionIdentsFromList((List<string>)JsonConvert.DeserializeObject(Request.Form["tags"], typeof(List<string>)))));
            sqlQueryParams.Add("image_title", Request.Form["image_title"]);
            sqlQueryParams.Add("images", Request.Form["images"]);
            sqlQueryParams.Add("release_date", Request.Form["release_date"]);
            sqlQueryParams.Add("update_date", Request.Form["update_date"]);
            sqlQueryParams.Add("is_on_sourcecontrol", Request.Form["is_on_sourcecontrol"]);
            sqlQueryParams.Add("sourcecontrol_type", Request.Form["sourcecontrol_type"]);
            sqlQueryParams.Add("sourcecontrol_uri", Request.Form["sourcecontrol_uri"]);
            sqlQueryParams.Add("download_uri", Request.Form["download_uri"]);
            sqlQueryParams.Add("project_uri", Request.Form["project_uri"]);
            sqlQueryParams.Add("source_uri", Request.Form["source_uri"]);
            sqlQueryParams.Add("is_public", Request.Form["is_public"]);
            sqlQueryParams.Add("did", int.Parse(Request.Form["did"])); 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-25T12:46:36.363

当您要更新多个列时，请使用`COMMA`而不是`AND`

```
query.CommandText = @"UPDATE `windows_dev` 
                      SET    `name` = @name, 
                             `desc_short` = @desc_short, 
                             ... other columns .....
                             `is_public` = @is_public 
                      WHERE `DID` = @did"; 
```

# algorithm - 找到 30 维向量的 10 个最接近的匹配项，什么数据结构？

> ID：14030750
> 
> 赞同：0
> 
> 时间：2012-12-25T12:43:49.313
> 
> 标签：algorithm, data-structures, tree, nearest-neighbor

我有一个 30 维的向量，我想在我的数据库中找到 10 个最接近的匹配项。我的数据库中有大约 3000 个向量，我必须与之进行比较。有些尺寸比其他尺寸更重要，所以我想给它们单独的权重。

30 个维度由 10 倍的 RGB 值组成。我将一张图片分成 9 个图块。所以 9 * 3 (RGB) 27。最后三个值是图片平均颜色的 RGB。

我的问题是：如果可以，这是否可能。使此过程尽可能快速和高效的最佳方法是什么？我自己，我在考虑某种树，但是树太多了，我不知道哪一种最适合我的问题。

编辑：

我想我并不完全清楚我想要实现的目标。我有一个随机向量，我想将这个向量与我的数据库中的向量进行比较，以找到 10 个已关闭的向量。我有一个包含所有向量的数据库。我已将它们存储在 MySQL DB 中，每一行都是一个向量。见下文

![D B](../Images/8f9cc0f86d8384541bef87df3a5211a7.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-25T15:52:41.890

这个问题类似于当你有太多的参考点时找到离参考点最近的 n 个点的问题。

假设您知道如何比较两个向量以找到它们之间的“距离”，您可以为此使用最大堆。使用与随机向量的距离作为比较来自 db 的两个向量的关键。那是，

1.  找出随机向量与数据库中前 10 个向量的距离，并将它们存储在大小为 10 的最大堆中。因此，根将是迄今为止离随机向量最远的向量。
2.  一一比较并找到从随机向量到所有其他向量的距离。
3.  对于每次比较，如果找到的距离小于最大堆的根，则从堆中提取最大元素，并在堆中插入最新的向量。
4.  最后，您的堆中将有 10 个最接近的向量。

也就是说，您的问题空间似乎很小。因此，您可以按照评论中的建议使用蛮力。

# ruby - 无法加载这样的文件——Qt4

> ID：14030752
> 
> 赞同：1
> 
> 时间：2012-12-25T12:44:13.437
> 
> 标签：ruby, qt4

我想开始使用 Ruby+Qt4。我已经下载了

```
$yum list qt* | less

Installed Packages
QtDMM.x86_64                         0.8.12-4.fc17          @fedora             
qt.i686                              1:4.8.4-1.fc17         @updates            
qt.x86_64                            1:4.8.4-1.fc17         @updates            
qt-assistant.x86_64                  1:4.8.4-1.fc17         @updates            
qt-creator.x86_64                    2.4.1-2.fc17           @fedora             
qt-demos.x86_64                      1:4.8.4-1.fc17         @updates            
qt-devel.x86_64                      1:4.8.4-1.fc17         @updates            
qt-doc.noarch                        1:4.8.4-1.fc17         @updates            
qt-examples.x86_64                   1:4.8.4-1.fc17         @updates            
qt-mobility.i686                     1.2.0-10.20110922.fc17 @fedora             
qt-mobility.x86_64                   1.2.0-10.20110922.fc17 @fedora             
qt-settings.noarch                   4.8-22.fc17            @updates            
qt-x11.i686                          1:4.8.4-1.fc17         @updates            
qt-x11.x86_64                        1:4.8.4-1.fc17         @updates            
qt3.x86_64                           3.3.8b-41.fc17         @fedora             
qt4-theme-quarticurve.x86_64         0.0-0.17.beta8.fc17    @fedora             
qtscriptbindings.x86_64              0.2.0-3.fc17           @updates            
qtsoap.x86_64                        2.7-3.fc17             @fedora             
qtwebkit.i686                        2.2.2-1.fc17           @updates            
qtwebkit.x86_64                      2.2.2-1.fc17           @updates            
qtwebkit-devel.x86_64                2.2.2-1.fc17           @updates 
```

然后我创建了新的 qt 项目并将其转换为 ruby​​ 代码

```
$rbuic4 -x example.ui -o example.rb 
```

然后我尝试编译`example.rb` `$ruby example.rb` 并出现以下错误：

```
/home/n/.rvm/rubies/ruby-1.9.3-p327/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:36:in `require': cannot load such file -- Qt4 (LoadError)
    from /home/n/.rvm/rubies/ruby-1.9.3-p327/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:36:in `require'
    from example.rb:10:in `<main>' 
```

我怎么解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-01-10T09:46:43.243

您正在寻找的包裹是`ruby-qt`. `$yum list qt* | less`找不到`ruby-qt`。无论如何，所有 ruby​​-qt 二进制包都已过时。`sudo gem install qtbindings`按照卡尔的建议去做。它将从维护的 ruby​​-qt 源存储库编译。qtbindings 主页位于[https://github.com/ryanmelt/qtbindings/](https://github.com/ryanmelt/qtbindings/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T21:22:13.977

尝试`gem install qtbindings`

并在 example.rb`require 'Qt'`

# javascript - 未捕获的 TypeError：无法使用延迟处理程序读取 null 的属性“操作”

> ID：14030754
> 
> 赞同：0
> 
> 时间：2012-12-25T12:44:19.017
> 
> 标签：javascript, jsf, richfaces

我有以下问题：

这是我的 xhtml 部分。

```
 <h:panelGroup id="#{id}suggestionPanel" rendered="#{rendered}">
     <a4j:jsFunction name="autocompleteHandler"
            action="#{autocompleteBean.prepareAction(suggestionAction)}">
         <a4j:actionparam name="param1" assignTo="#{searchString}"/>
     </a4j:jsFunction>
 ...
 <h:inputText value="#{searchString}"
              rendered="#{validationId == null}"
              id="#{id}search"
              onkeyup="delayedHandler(300, this)"/> 
```

此处给出了处理此问题的 javascript 方法：

```
var _timer = 0;
function delayedHandler(ms, thisElement)
{
    if (_timer) window.clearTimeout(_timer);
    _timer = window.setTimeout(function()
    {
        autocompleteHanlder(thisElement.value)
    }, ms);
} 
```

那么我有什么问题呢？

执行此代码时出现此错误：

```
Uncaught TypeError: Cannot read property 'action' of null framework.pack.js.xhtml:2791
A4J.Query framework.pack.js.xhtml:2791
A4J.AJAX.PrepareQuery framework.pack.js.xhtml:2562
A4J.AJAX.Submit framework.pack.js.xhtml:2592
autocompleteHandler 
```

很酷的事情是，如果我的 javascript 没有像这样以延迟方式调用处理程序

```
function delayedHandler(ms, thisElement)
{            
    autocompleteHanlder(thisElement.value);            
} 
```

javascript 函数的延迟部分没有问题，因为我已经用一些警报对其进行了测试。

不知何故，由于这种延迟，它无法读取`<a4j:jsFunction`.

任何人都知道如何解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-25T13:58:45.140

我实际上解决了这个问题。您不需要任何 JavaScript 调用来延迟执行。a4j:jsfunction 有一个名为“requestDelay”的属性，可以处理所有需要的超时。所以基本上代码看起来像

```
<a4j:jsFunction name="autocompleteHandler"
                action="#{suggestionTestBean.prepareAction(suggestionAction)}"
                requestDelay="1200">
</a4j:jsFunction> 
```

延迟 1.2 秒，然后你会这样调用你的延迟执行：

```
<h:inputText value="#{searchString}"
             rendered="#{validationId == null}"
             id="#{id}search"
             onkeyup="autocompleteHandler()"/> 
```

# jsf-2 - 包括数据表中的 selectOneMenu

> ID：14030758
> 
> 赞同：0
> 
> 时间：2012-12-25T12:44:55.930
> 
> 标签：jsf-2, datatable, tomahawk

每当我更改第二个 selectOneMenu 的第一个 selectOneMenu 值时，我已经创建了包含四个 selectOneMenu 的数据表，需要在同一行上填充，然后再次选择第二个 selectOneMenu 第三个需要填充我已经通过将行号值传递给每个来完成此操作selectOneMenu （有意特定的 selectOneMenu 用户必须点击）但是每当我使用 f:param 传递值时，我都会在控制器上获得空值，但同样可以在数据表上使用 outputText 打印

请指导

```
<t:dataTable id="insertTaskDataTable" border="1"
                value="#{insertTask.taskList}" var="taskInfo" rowIndexVar="row"  
                iterationStatusVar="it">
                <t:column>
                <h:inputHidden  id="id" value="#{row}"/>
                </t:column>                 
            <t:column>
                <f:facet name="header">#{bundle['GROUP_HEADER']}</f:facet>
                <h:selectOneMenu id="taskGroup" value="#{taskInfo.groupList.comboValue}" onchange="document.getElementById('addTask:filterButton').click();">
                    <f:param  name="idTaskGroup" value="#{row}"/>
                    <t:outputText  name="id" value="#{row}"/>
                     <f:selectItems value="#{taskInfo.groupList.comboValues}" />
                </h:selectOneMenu>

            </t:column>
            <t:column>
                <f:facet  name="header">#{bundle['ACTIVITY_HEADER']}</f:facet>
                <h:selectOneMenu id="taskActivity" value="#{taskInfo.activityList.comboValue}">
                <f:ajax  render="taskSubActivity" listener="#{insertTask.handleActivityChange}"></f:ajax>   
                <f:selectItems value="#{taskInfo.activityList.comboValues}" />
                </h:selectOneMenu>

            </t:column>
            <t:column>
                <f:facet name="header">#{bundle['SUBACTIVITY_HEADER']}</f:facet>
                <h:selectOneMenu id="taskSubActivity" value="#{taskInfo.subActivityList.comboValue}">
                    <f:selectItems value="#{taskInfo.subActivityList.comboValues}" />
                </h:selectOneMenu>

            </t:column>
            <t:column>
                <f:facet name="header">#{bundle['COMPLEXTIY_HEADER']}</f:facet>
                <h:selectOneMenu id="taskComplexity" value="#{taskInfo.complexityList.comboValue}">
                    <f:selectItems value="#{taskInfo.complexityList.comboValues}" />
                </h:selectOneMenu>

            </t:column>

            <t:column>
                <f:facet name="header">#{bundle['BENCHMARK_EFFORT_HEADER']}</f:facet>
                <t:inputText  value="#{taskInfo.benchMarkHrs}" />
                <t:outputLabel value="hrs"/>
                <t:inputText  value="#{taskInfo.benchMarkMin}" />
                <t:outputLabel value="min"/>

            </t:column>

            <t:column>
                <f:facet name="header">#{bundle['DESCRIPTION_HEADER']}</f:facet>
                <t:inputText value="#{taskInfo.taskdescription}" />
            </t:column>

        </t:dataTable>
    </t:div>

            <a4j:commandButton id="filterButton" style="visibility:hidden;display:none" action="#{insertTask.handleGroupChange}" render="insertTaskDataTable" /> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T12:44:43.390

嗨，伙计们，我得到了解决方案

这里是，

```
 <t:dataTable id="insertTaskDataTable" border="1"
                value="#{insertTask.taskList}" var="taskInfo" rowIndexVar="row"  
                iterationStatusVar="it" rendered="#{insertTask.taskList[0] != null}" >

            <t:column>
                <f:facet name="header">#{bundle['GROUP_HEADER']}</f:facet>
                <h:selectOneMenu id="taskGroup" value="#{taskInfo.groupList.comboValue}"  onchange="document.getElementById('addTask:insertTaskDataTable:#{row}:groupButton').click();">

                     <f:selectItems value="#{taskInfo.groupList.comboValues}" />
                </h:selectOneMenu>

            </t:column>
            <t:column>
                <f:facet name="header">#{bundle['CATEGORY_HEADER']}</f:facet>
                <h:selectOneMenu id="taskCategory" value="#{taskInfo.categoryList.comboValue}"  onchange="document.getElementById('addTask:insertTaskDataTable:#{row}:categoryButton').click();">
                     <f:selectItems value="#{taskInfo.categoryList.comboValues}" />
                </h:selectOneMenu>

            </t:column>
            <t:column>
                <f:facet  name="header">#{bundle['ACTIVITY_HEADER']}</f:facet>
                <h:selectOneMenu id="taskActivity" value="#{taskInfo.activityList.comboValue}"  onchange="document.getElementById('addTask:insertTaskDataTable:#{row}:activityButton').click();">

                <f:selectItems value="#{taskInfo.activityList.comboValues}" />
                </h:selectOneMenu>

            </t:column>
            <t:column>
                <f:facet name="header">#{bundle['SUBACTIVITY_HEADER']}</f:facet>
                <h:selectOneMenu id="taskSubActivity" value="#{taskInfo.subActivityList.comboValue}" onchange="document.getElementById('addTask:insertTaskDataTable:#{row}:subActivityButton').click();">
                    <f:selectItems value="#{taskInfo.subActivityList.comboValues}" />
                </h:selectOneMenu>

            </t:column>
            <t:column>
                <f:facet name="header">#{bundle['COMPLEXTIY_HEADER']}</f:facet>
                <h:selectOneMenu id="taskComplexity" value="#{taskInfo.complexityList.comboValue}">
                    <f:selectItems value="#{taskInfo.complexityList.comboValues}" />
                </h:selectOneMenu>

            </t:column>

            <t:column>
                <f:facet name="header">#{bundle['BENCHMARK_EFFORT_HEADER']}</f:facet>
                <t:outputText  value="#{taskInfo.benchMarkHrs}" style="height: 10px; width: 50px;" />
                <t:outputLabel value=" hrs"/>
                <t:outputText value="#{taskInfo.benchMarkMin}" style="height: 10px; width: 50px;" />
                <t:outputLabel value="min"/>

            </t:column>

            <t:column>
                <f:facet name="header">#{bundle['DESCRIPTION_HEADER']}</f:facet>
                <t:inputText value="#{taskInfo.taskdescription}" />
                <h:commandButton id="groupButton" style="visibility:hidden;display:none" actionListener="#{insertTask.handleGroupChange}">
                    <f:attribute name="groupid" value="#{row}" />
                </h:commandButton>
                <h:commandButton id="categoryButton" style="visibility:hidden;display:none" actionListener="#{insertTask.handleCategoryChange}">
                    <f:attribute name="categoryid" value="#{row}" />
                </h:commandButton>
                <h:commandButton id="activityButton" style="visibility:hidden;display:none" actionListener="#{insertTask.handleActivityChange}">
                <f:attribute name="activityid" value="#{row}" />
                </h:commandButton>
                <h:commandButton id="subActivityButton" style="visibility:hidden;display:none" actionListener="#{insertTask.handleSubActivityChange}">
                <f:attribute name="subactivityid" value="#{row}" />
                </h:commandButton>
            </t:column>

        </t:dataTable> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-11-12T11:55:52.820

最好的解决方案是来自**[tomahawk 库的“](https://myfaces.apache.org/tomahawk/download.html)** ***t:selectOneRow ”***

**Java 端**

```
private Long selectedRowIndex = -1L; //Along with it's getters and setters 
```

**JSP 端**

```
<t:dataTable var="var" value="#{bean.beanList}"
style="border: 1px solid black;">

<t:column>
    <t:selectOneRow value="#{bean.selectedRowIndex}" groupName="selection"
        id="selectBtn">
    </t:selectOneRow>
</t:column>

<t:column>
    <f:facet name="header">
        <h:outputLabel value="Names" />
    </f:facet>
    <t:outputText value="#{var.names}" />
</t:column>

<t:column>
    <f:facet name="header">
        <h:outputLabel value="Address" />
    </f:facet>
    <t:outputText value="#{var.address}" />
</t:column> 
```

当“ ***selectedRowIndex*** ”为 -1L 时，这意味着该行中没有任何内容被选中。每当您需要将页面设置为未选择单选时，请将此值设置为 -1L。

结果应该是这样的......

![选择一行在行动](../Images/ba6d1fc8640ae62b3fb44f28d6aa3f3a.png)

# c# - C# 的 Internet 连接共享 api

> ID：14030760
> 
> 赞同：3
> 
> 时间：2012-12-25T12:45:11.813
> 
> 标签：c#, wpf

我对 C# 和 Windows 应用程序开发完全陌生。我想使用 Windows 应用程序启用 Internet 连接共享。但是当我搜索 API 时，我发现它仅适用于 C、C++。我想将它们用于我的 C# 应用程序，因为我已经用 C# 编写了大部分代码。

如果可能，请提出任何解决方法。

API 链接： http: [//msdn.microsoft.com/en-us/library/windows/desktop/aa364733 (v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/aa364733%28v=vs.85%29.aspx)

* * *

## 回答 #1

> 赞同：-5
> 
> 时间：2012-12-25T12:51:01.193

您需要找到 ICS 的注册表项并使用 C# 直接写入：

[搜索一下](https://www.google.co.in/search?q=find%20registry%20key%20of%20ICS&rlz=1C1GGGE___IN509IN509&oq=find%20registry%20key%20of%20ICS&aqs=chrome.0.57j62.5298&sugexp=chrome,mod=17&sourceid=chrome&ie=UTF-8)

# c++ - MSVC2012 Qt 应该包含一个目录吗？

> ID：14030761
> 
> 赞同：1
> 
> 时间：2012-12-25T12:45:16.947
> 
> 标签：c++, qt, include, qtwidgets, qapplication

我使用 BlueGo 为 msvc2012 构建了一个自定义 Qt5。

我正在阅读示例，它们显示了这一点：

```
#include <QtGui>

 int main(int argc, char *argv[])
 {
     QApplication app(argc, argv);
     QWidget window;
     window.resize(320, 240);
     window.show();
     window.setWindowTitle(
         QApplication::translate("toplevel", "Top-level widget"));
     return app.exec();
 } 
```

问题是，QtGui 对我来说实际上是一个目录而不是一个文件，所以它不能被包含在内。我正在使用 /qtbase/include/ 下的包含文件。难道我做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-25T12:55:22.120

QtGui 头文件实际上是存在的，它只是包含了来自 QtGui 模块的所有头文件。您可以在 QtGui 目录中找到*它*。编译器能够找到它，因为在包含路径中指定了 QtGui 目录。换句话说，它与以下内容相同：

```
#include <QtGui/QtGui> 
```

不过，包含 QtGui 标头是一种糟糕的做法。您应该只包含您实际使用的内容，否则编译时间将无缘无故地增加。但是，对于快速测试等，它非常方便。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-09-14T12:58:35.527

我知道现在有点晚了，但你可以这样做：

添加`gui`模块并`widgets`在 pro 文件中：

```
QT += widgets core  gui 
```

通过替换包含文件，

代替

```
#include <QtGui/QWidget>
#include <QtGui/QApplication> 
```

和

```
#include <QWidget>
#include <QApplication> 
```

编译器应该识别它。

# php - 如何隐藏攻击性爬虫？

> ID：14030762
> 
> 赞同：2
> 
> 时间：2012-12-25T12:45:22.607
> 
> 标签：php, web-crawler

我打算抓取一个特定的网站。我有 3000 个特定页面，我想每隔几个月抓取一次。我创建了一个爬虫，但我不想被禁止访问该网站。

有没有办法减少爬虫的攻击性或以某种方式隐藏它，以免被“注意到”或导致我正在爬取的提供商/网站出现问题？

延迟是可能的，但如果我将其设置为每页随机 10-30 秒延迟，那么它将永远持续下去。

制作可接受的爬虫的任何提示或指南？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-25T13:52:52.507

*另一种解决方案*是使用**代理服务器提供商**（*例如[这个](http://seo-proxies.com)**）并在每个X*请求时轮换 IP 地址。这个特定的提供者有一个*API*可以即时检索 IP。如果谈到*PHP ，* *cURL*可以很容易地用于此目的。

 *这种技术在大多数情况下都有效，但它需要更多的计划和调整。无论如何，您将面临一些限制。它可以是时间问题，也可以是每个时期的请求数量，这与时间问题几乎相同。或者您将需要更多代理服务器来满足您的时间要求。

并仔细阅读提供商的服务*条款*。该特定提供商不允许您被 Google 和其他一些网站禁止。否则您的帐户也将被禁止。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-25T12:48:05.703

“可接受”是一个相对术语。一些网站所有者拥有足够的处理能力和带宽，他们认为每小时扫描 3000 页并不是“激进的”。一些网站所有者为带宽或处理能力而苦苦挣扎，无法跟上每天 3000 次的页面阅读量。

如果您想阅读页面并获取当前内容，那么您必须阅读这些页面。没有捷径可走。*

# java - 宁静的服务和消息传递

> ID：14030772
> 
> 赞同：-1
> 
> 时间：2012-12-25T12:47:15.880
> 
> 标签：java, rest, messaging

我们计划设计一个系统，其中数据来自 Web 服务，数据将被异步处理，我被分配选择 Java 开源技术来做这件事，对于 Web 服务，我们决定使用 Restful 服务，我从未使用过消息传递技术，任何人都可以建议哪种是市场上可用的异步数据处理的最佳开源技术

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-25T14:02:52.810

试试 Apache CXF - 查看文档

我猜它有你想要的一切

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-25T14:23:52.087

您的用例是异步处理数据。这通常发生在以下步骤中：

1.  接收数据并将其存储在某处（内存中或持久位置）
2.  立即返回*Acknowledged/Received*响应。
3.  要么立即启动一个线程来处理数据，要么让某个调度线程扫描接收到的数据并进行处理。
4.  如果这样的接口可用，则可以选择向发送应用程序发送确认。

Java 中没有标准库或框架来执行此操作。有一些单独的部分可以解决标准问题，将它们组合起来将是一种选择。

1.  [生产者消费者模式](http://cs.gmu.edu/cne/modules/ipc/aqua/producer.html)是一种典型的模式，可以满足您的需求。
2.  您可以使用 Java 的并发 API 构建生产者-消费者模式（[这是一个示例](http://java.dzone.com/articles/concurrency-pattern-producer)）
3.  这个生产者消费者部分可以被包装在一个 Servlet（或其他一些处理请求的服务器端类）后面。
4.  所有传入请求将由生产者放入共享队列并返回。
5.  消费者将从队列中选择它并异步处理它。
6.  另一种选择是[在 Servlet3.0 中使用异步处理](http://www.javaworld.com/javaworld/jw-02-2009/jw-02-servlet3.html?page=2)。

# php - PHP 产品从 PHP 5.2 迁移到 PHP 5.4 的工具或方法

> ID：14030775
> 
> 赞同：3
> 
> 时间：2012-12-25T12:48:09.053
> 
> 标签：php, migration, version

以核心 PHP 开发的现有产品是在 PHP 5.2 中构建的，现在我们希望将产品迁移到 PHP 5.4。

CodeSniffer 可以检测版本的兼容性并生成带有警告和错误的报告。

当前的方法可能是：

*   扫描整个产品并从 CodeSniffer 获取报告

*   准备修复每种类型的警告或错误的计划，例如`ereg_replace`用`preg_replace`函数替换并在第一个参数中添加分隔符

*   例子：

    ```
    Original: $new = ereg_replace(“oldstring“, “newstring“, $old);
    Replace:  $new = preg_replace(“/oldstring/“, “newstring“, $old); 
    ```

*   制作一个PHP脚本来实现这个计划

*   运行脚本，再次使用 CodeSniffer 进行测试，然后再次对整个产品进行测试

有没有更好的工具或方法将 PHP 5.2 迁移到 PHP 5.4？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-25T13:06:26.813

我会收集有关这些*警告*或*错误*的信息，并将它们解析为发生“失败”的文件名和字符串编号，并在手动模式下（*最简单的方法*）纠正所有这些问题。

即使项目太大，我认为这样的情况也不会太多，否则最好考虑重构而不是纠正兼容性问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-25T13:49:09.517

我的项目有 PHPUnit 测试。测试还记录所有警告和通知。使用 PHP5.2，我确保没有警告或通知。然后我升级到 PHP 5.4，收到了很多警告和通知，还有很多测试失败了。然后只需将它们全部修复即可。我遇到的最常见问题：分配未初始化对象的属性。

# php - 如何在php中获取受保护的消息

> ID：14030778
> 
> 赞同：0
> 
> 时间：2012-12-25T12:48:33.660
> 
> 标签：php, oop, function, protected

我在课堂上有这样的功能

```
public function browseNodeLookup($nodeId)
  {
    return $this->returnData(
      $this->performSoapRequest("BrowseNodeLookup", $params)
    );
  } 
```

我正在这样使用它

```
$response = $amazonEcs->browseNodeLookup($node);
var_dump($response); 
```

现在对象 var_dump 看起来像这样

```
object(SoapFault)#279 (10) {
  ["message":protected]=>
  string(178) "The request signature we calculated does not match the signature you provided. Check your AWS Secret Access Key and signing method. Consult the service documentation for details."
  } 
```

我想回应那条信息。有人能告诉我怎么做吗？

我试过这样

```
echo $response->message; 
```

但我收到错误，因为它受到保护。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-25T12:52:57.143

使用 `$response->getMessage()`而不是`$response->message`因为消息是受保护的属性:)

# android - 使用 onClick 时禁用 onTouch

> ID：14030779
> 
> 赞同：2
> 
> 时间：2012-12-25T12:48:39.210
> 
> 标签：android, text-to-speech, blind

我正在为视障人士创建一个 Android 应用程序，并且正在使用按钮菜单。当用户在屏幕上滑动手指时，应用程序会读取按钮的标题。这是使用 onTouch 事件完成的。当用户单击按钮时，会发生一个动作（更改活动或任何其他动作），并伴有语音反馈。这是使用 onClick 事件完成的。

问题是，当单击一个按钮时，两个事件都会触发（onTouch 和 onClick）并且 TTS 开始读取 onTouch 消息，半秒后停止并启动在 onClick 事件中声明的新消息。如何在调用 onClick 时禁用 onTouch 的触发。我理解这个问题，因为 onTouch 总是先于 onClick，但我不知道解决方案。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-25T13:00:18.273

简单的回答亲爱的避免点击事件应用点击事件。

我也面临同样的问题，所以我知道如何解决这个问题。

只需使用此代码。

首先创建手势类。

```
class MyGestureDetector extends SimpleOnGestureListener 
{
    @Override
    public boolean onFling(MotionEvent e1, MotionEvent e2, float velocityX, float velocityY)
    {
        return false;
    }
    @Override
    public boolean onDoubleTap(MotionEvent e) 
    {
        return true;
    }
    @Override
    public boolean onSingleTapUp(MotionEvent e) 
    {
        return true;
    }
} 
```

然后创建 **GestureDetector 手势检测器；**
对象和。

```
gestureDetector=new GestureDetector(myContext, new MyGestureDetector()); 
```

然后注册触摸事件。

```
view.setOnTouchListener(this); 
```

像这样覆盖 onTouch 方法。

```
@Override
    public boolean onTouch(View view, MotionEvent event) 
    {
        Button b=(Button) view;
        gestureDetector.onTouchEvent(event);
        return true;
    } 
```

在这里做一些关于 onSingal tp 和 Double Tap 的任务。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-25T12:51:35.503

```
 public final OnTouchListener mOnTouchListener = new OnTouchListener() {
    @Override
    public boolean onTouch(View v, MotionEvent rawEvent) {
        return false;
    }
}; 
```

或者

目的`.setOnTouchListener(null);`

# outlook - Outlook 插件 - Outlook 2013 中的 CommandBar 问题

> ID：14030780
> 
> 赞同：1
> 
> 时间：2012-12-25T12:48:49.887
> 
> 标签：outlook, add-in, commandbar

我有在 Visual Studio 2003 中开发的 Outlook 插件。它使用 CommandBar 为我的插件添加插件选项卡和菜单。它在 Outlook 2010 之前可以正常工作，但由于 CommandBar 问题，它不能在 Outlook 2013 中运行。

我已经使用 Outlook 2013 调试了插件。CommandBarControls 在 Outlook 2013 中不起作用。

当我的插件达到以下语句时，outlook 2013 会抛出异常atlcomcil.h - 调试断言错误。

SpCmdCtrl = spCmdBar-> FindControl(vMenuEmpty, vMenuID); SpCmdCtrl 正在获取 {0x00000000}。

我想知道为什么 findControl() 没有返回一些东西。该语句在早期版本的 Outlook 中运行良好。

任何帮助都深表感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-25T15:40:18.540

Outlook 2013 不允许您使用命令栏。请参阅[http://msdn.microsoft.com/en-us/library/office/jj229903.aspx](http://msdn.microsoft.com/en-us/library/office/jj229903.aspx)

问候，维克多

# sql - 如何在 PL/SQL 中解析 XML

> ID：14030782
> 
> 赞同：1
> 
> 时间：2012-12-25T12:49:36.717
> 
> 标签：sql, xml, oracle, xpath, plsql

我在 pl/sql 中有以下 xml 结构：

```
<struct>
  <member>
    <name>CODE</name>
    <value>
      <integer>0</integer>
    </value>
  </member>
  <member>
    <name>MSG</name>
    <value>
      <string>Some message</string>
    </value>
  </member>
</struct> 
```

如何使用名称标签中的文本提取路径 /member/value/some_type 中的值？我的意思是这样的：

```
extract('//member/value/*[filter name tag = CODE]').getStringValue 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-25T12:53:50.813

您可以使用`local-name()`

XPath 应该是，

```
//member/value/*[local-name()='CODE'] 
```

## 例子：

1.  `//member/value/*[local-name()='integer']`
2.  `//member/value/*[local-name()='string']`

## 结果：

1.  0
2.  一些讯息

# 更新：

在这种情况下，您的 XPath 应该是

```
//member[*='CODE']/*/*
//member[*='MSG']/*/* 
```

## 结果：

1.  0
2.  一些讯息

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-25T12:55:59.037

简短的回答是您不会将数据库视为 ETL（提取、转换、加载）工具。您要做的是将此 XML 文件传递​​给使用 XPath 的单独程序并以这种方式处理它。数据库只应该存储数据。事实上，在过去的 5 个月里，我一直在删除像这样的“异国情调”代码，这些代码使得 Oracle 数据库需要 72 多个小时才能插入 400k 行。所以再次将此偏移到xpath

该查询看起来与您上面的命令几乎相同

# android - Galaxy S 和 Galaxy S2 的最小宽度

> ID：14030789
> 
> 赞同：7
> 
> 时间：2012-12-25T12:50:47.480
> 
> 标签：android, android-widget, galaxy, screen-size

我正在开发一个 Android 小部件，需要区分**Galaxy S**和**Galaxy S2**。我几乎阅读了所有关于屏幕尺寸和密度的文章。当然，我需要将新的限定符与新的限定符**Smallest Width**一起使用。我的问题是，sw320dp 预选赛匹配 Galaxy S 和 Galaxy S2。但我需要 Galaxy S2 的另一种布局，但找不到合适的限定符。

Galaxy S的定义**，密度 233**

屏幕尺寸（像素）：480 像素 x 800 像素

以 dp 为单位的屏幕尺寸：329dp x 549dp（因为 1dp = 1 像素/（密度/160）

> -> 所以限定符**sw320dp**必须在这里匹配。是的

Galaxy S II的定义**，密度 218**

屏幕尺寸（像素）：480 像素 x 800 像素

屏幕尺寸（以 dp 为单位）：352dp x 587dp（因为 1dp = 1 像素/（密度/160）

> -> 所以限定符**sw340dp**必须在这里匹配，但不，**它不匹配**
> 
> （在模拟器和真实设备上测试）

drawables 不是问题，但我的布局，特别是这些设备上的高度和文本大小不同，所以我真的需要为它们提供特定的布局。

有人对此有想法或更多经验吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-04T21:40:54.397

参考材料定义的屏幕密度为：

> 屏幕物理区域内的像素数量；通常称为 dpi（每英寸点数）。例如，与“正常”或“高”密度屏幕相比，“低”密度屏幕在给定物理区域内的像素较少。 **为简单起见，Android 将所有实际屏幕密度分为四种广义密度：低、中、高和超高。**

低 = 120dpi 中 = 160dpi 高 = 240dpi xhi = 320dpi

因此，实际密度为 218 的 Galaxy SII*在 dp 计算中*被分配了 240 的“高”密度。因此 dp 中的屏幕宽度为 480/240*160 = 320。

这很糟糕，我同意。但这就是它的工作原理。

[http://developer.android.com/guide/practices/screens_support.html](http://developer.android.com/guide/practices/screens_support.html)

# java - 没有 Java EE 6 的休眠

> ID：14030790
> 
> 赞同：2
> 
> 时间：2012-12-25T12:50:48.017
> 
> 标签：java, hibernate, tomcat, websphere, java-ee-6

我有 Websphere 7 服务器，它不支持 JPA 2.0。所以我不能在 WAS 7 JPA 2.0 应用程序上运行。

但我想知道 Spring 用户如何在 Tomcat 或 Jetty 上运行 Hibernate？这个 servlet 容器（如 WAS 7）也不支持 Java EE 6。

*所以这意味着我可以在 WAS 7 上运行 Hibernate 并获得与在 Tomcat 或 Jetty 上相同的结果？*.

如果是，为 JPA 使用应用服务器有什么好处？为什么所有开发人员都不使用 servlet-containers 而不是 app-servers？

我还听说过“容器管理”的东西，它允许一些额外的特性和功能。所以这意味着许多开发人员（在 Jetty 和 Tomcat 上使用 Spring）没有从使用应用服务器的容器管理功能中获益？

PS 我知道`Feature Pack`用于支持 JPA 2.0 的 WAS 7 的可用补丁，但不要质疑它。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-25T13:04:27.487

您可以通过在您的 WEB-INF/lib 文件夹中包含适当的 jar 来引入很多功能，但是 servlet 容器无法以任何方式帮助您实现这些功能，而且它很可能实际上无法很好地与功能集成由容器提供。一个典型的例子是引入您自己的 JSF 2.0 库。

在容器中使用实现的真正优势在于，容器可以帮助跨多个主机进行集群，提供 JDBC 连接池等。

因此，在包含例如 Hibernate 时，您需要更加小心，并在您自己的部署中进行所有配置，但可以这样做。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-25T13:05:28.840

您也可以问一个完全相反的问题：“为什么在 JPA 2 中使用裸 servlet 容器，因为它包含在所有 Java EE 6 服务器中？”。

基本上它归结为：

*   有一个轻量级的容器，然后有一个繁重的应用程序（Spring 方式），
*   有一个轻量级的应用程序，然后是一个重的容器（Java EE 6 方式）。

经过多年的发展，使用 Spring 和 Java EE 6 构建应用程序的模型已经趋于一致，有时您无法仅通过查看一个类来判断它是 Spring 还是 CDI bean。所以真正的区别主要在于配置。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-25T15:04:34.040

应用程序服务器提供一组“开箱即用”的服务，因此*如果提供的服务是您需要的服务*，它们会更容易使用。你只需打包和部署你的应用程序，事情就可以工作了。此外，大多数技术都是由应用程序服务器实例化的，因此可以避免很多类加载器问题。

应用服务器的问题在于，有时（实际上经常如此），您需要挑选与应用服务器提供的不兼容的特定框架、服务等的特定版本。在这些情况下，您通常需要摆弄应用程序服务器，并且在某些情况下，您想要做的事情甚至可能无法使用您的应用程序服务器。

例如，Weblogic 10.x 是一个 Java EE 5 应用服务器，所以它默认提供 JSF 1.2 和 JPA 1。如果你想使用更新的东西，你需要手动部署一些额外的库（JSF 2.0），或者补丁服务器（JPA 2.0）。

另一个例子：在 Glassfish 3.1 中，我无法使用 Tomcat EL 而不是 Glassfish EL。Tomcat EL 支持可变参数方法调用，而 Glassfish EL 不支持。

Java EE 应用程序服务器的刚性使得很多人更喜欢为独立的 servlet 容器（如 Tomcat 或 Jetty）开发，在这些容器中除了 Servlet 和 JSP API 之外*没有任何*开箱即用的东西，但您可以手动将*所有内容*放入其中。您还可以将其与您的应用程序一起打包，这样在开发时会更舒服，但如果您为每个容器部署多个应用程序，则会给您带来问题（资源浪费、类加载问题、类加载器泄漏……）

**更新：**

与在 Java EE 容器中使用 JPA 相比，在 SE 环境（例如 Tomcat）中使用 JPA存在*一些差异。*基本上：

*   您必须手动管理`EntityManagerFactory`和`EntityManager`实例。
*   Tomcat 不进行注入，因此`@PersistenceContext`注解和类似的注解不起作用。

请注意，某些容器（例如 Spring）可以配置为隐藏这些细节，因此您可以像在 Java EE 容器中一样工作。

阅读[JPA 规范](http://jcp.org/aboutJava/communityprocess/final/jsr317/index.html)，了解在 SE 环境而不是 EE 环境中运行的详细信息。

关于其他库，通常您会发现一些细微差别。例如，JAX-WS 需要为您的 web 应用程序注册一个 servlet 和一个侦听器，但其他任何东西都应该相同。通常，您可以搜索文档以获取有关如何在独立 servlet 容器中运行事物的说明。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-25T23:47:08.030

WAS 7.0 有一个 JPA 2.0 功能包，它可能会对您有所帮助。

# javascript - 使用 jQuery 更改 html 目录属性

> ID：14030792
> 
> 赞同：1
> 
> 时间：2012-12-25T12:51:10.370
> 
> 标签：javascript, jquery, jquery-ui, jquery-events, right-to-left

我想`dir`在页面加载后更改 HTML 属性；我怎样才能做到这一点？我需要使用该`.ready()`功能吗？目前它看起来像：

```
jQuery("html[lang=ar]").attr("dir", "rtl")
            .find("body").addClass("right-to-left"); 
```

我如何在脚本中编写它；我需要写`.ready()`函数还是`.load()`？

```
<div class="header">
<script src="http://code.jquery.com/jquery-latest.js"></script>
<script>
jQuery("html").attr("dir", "rtl")?
</script> 
```

代码如下所示：

这是我的 CSS

```
body.right-to-left li {
    float:right;
    direction: rtl;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-25T13:01:44.680

尽可能简单...

将您的代码放入... [document.ready()](http://api.jquery.com/ready/)

```
<script>
$(document).ready(function(){
     $("html[lang=ar]").attr("dir", "rtl")
        .find("body").addClass("right-to-left");
});
</script> 
```

和一个解释`ready()`和`load()`功能的链接..

[http://4loc.wordpress.com/2009/04/28/documentready-vs-windowload/](http://4loc.wordpress.com/2009/04/28/documentready-vs-windowload/)

# android - 手机关机时存储目标文件，手机重启时检索文件

> ID：14030793
> 
> 赞同：0
> 
> 时间：2012-12-25T12:51:27.843
> 
> 标签：android, android-file

我在应用程序的文件中保存了一个类的对象，当手机关机时，该文件会发生什么情况？我想，文件丢失了。因为重新启动手机后，我从文件中获取空值（保存在类对象的一些变量中）。我怎样才能确保，如果手机关机，文件不会丢失。可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-25T13:03:13.077

你可以试试这段代码：

```
String filename = "filename.txt";
File file = new File(Environment.getExternalStorageDirectory(), filename);
FileOutputStream fos;
byte[] data = new String("data to write to file").getBytes();
try {
    fos = new FileOutputStream(file);
    fos.write(data);
    fos.flush();
    fos.close();
} catch (FileNotFoundException e) {
    // handle exception
} catch (IOException e) {
    // handle exception
} 
```

并确保您已在清单文件中声明了权限

```
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE"/> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-26T02:16:01.757

你最好使用首选项。写入外部存储通常是个坏主意。使用 SharedPreferences 保存对象的状态并使用您保存的数据再次实例化该对象。

[共享偏好 API](http://developer.android.com/reference/android/content/SharedPreferences.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-07T22:10:14.087

首先我序列化我的类，如：

```
public class MyStore implements Serializable {
    //this serialVersionUID will automatically generate
    private static final long serialVersionUID = 3487640153579137276L;
......
......
} 
```

然后我将对象保存在内部存储器中，如下所示：

```
File path = new File(getActivity().getFilesDir(), foldar_name);
path.mkdirs();
File file = new File(path,file_name);
file.createNewFile();

MyStore myStore = new MyStore();                            
myStore.setData(my_data);

FileOutputStream fout = new FileOutputStream(file);
ObjectOutputStream os = new ObjectOutputStream(fout);
os.writeObject(myStore);
os.flush();
os.close(); 
```

# installation - rpmbuild 警告“文件列出两次”实际上是什么意思？

> ID：14030797
> 
> 赞同：17
> 
> 时间：2012-12-25T12:52:19.873
> 
> 标签：installation, rpm, rhel, rpmbuild, software-packaging

我需要为包中的一个主要目录指定公共属性，并为其中的一些子目录指定特殊权限。例如

```
%files
%attr(-, myuser, mygroup) /opt/myapp 
%attr(750, myuser, mygroup) /opt/myapp/bin  # no exec permission to other
/etc  # this is the reason I can't use %defattr(-, myuser, mygroup) 
```

我自然会在 /opt/myapp/bin 下的每个文件上收到“文件列出两次”警告。我的问题是，它实际上是什么意思？rpmbuild 用它做什么？我在任何地方都找不到答案。我可以忽略它吗？什么优先，第一次或最后一次出现？

我不想`myapp`明确列出所有内容来解决这个问题。还有其他方法吗？谢谢

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2015-01-06T23:25:48.803

我在这里发帖以防万一有人遇到同样的问题并找到这个老问题。

最近（最近多久取决于发行版）宏 %exclude 已添加到 rpmbuild。

```
%files
%attr(-, myuser, mygroup) /opt/myapp
%exclude /opt/myapp/bin
%attr(750, myuser, mygroup) /opt/myapp/bin  # no exec permission to other 
```

这里的优势并不像排除一组文件或文件夹那样明显：

```
%files
%attr(-, myuser, mygroup) /opt/myapp
%exclude /opt/myapp/[bin|data|whatever]
%attr(750, myuser, mygroup) /opt/myapp/bin  # no exec permission to other
%attr(777, myuser, myothergroup) /opt/myapp/data
%attr(640, myuser, myothergroup) /opt/myapp/whatever 
```

奇怪的是 [a|b] 语法适用于 %exclude 但不适用于 %files 中的其他指令（例如，我可以使用正则表达式排除但不包含，doh）

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2014-02-11T14:40:26.427

将其更改为：

```
%files
%dir %attr(-, myuser, mygroup) /opt/myapp
%attr(750, myuser, mygroup) /opt/myapp/bin 
```

注意`%dir`目录。那应该摆脱列出两次警告的文件。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-12-25T22:07:05.050

这意味着——它被列出了两次。;) 我从来没有遇到过问题，但我不知道哪个会赢。

作为旁注，您可能不应该单独列出`/etc`，因为您不想拥有它。

# java - Tomcat JNDI 返回 null 而不是 bean

> ID：14030800
> 
> 赞同：0
> 
> 时间：2012-12-25T12:52:51.823
> 
> 标签：java, tomcat, nullpointerexception, jndi

我正在尝试使用 GlobalNamingResources 创建一个将由 2 个不同的 webapps 使用的全局 bean（当然在同一个 tomcat 上）。

我的问题是，当我尝试为从 JNDI 获得的类设置新数据时，我得到了 NullPointerException。

我点击了以下链接，但我仍然不确定我做错了什么：http: [//tomcat.apache.org/tomcat-7.0-doc/config/globalresources.html](http://tomcat.apache.org/tomcat-7.0-doc/config/globalresources.html)

这是使我的 servlet 崩溃的行：

```
single.setText("TEXT"); 
```

这是我的测试 servlet：

```
 @WebServlet("/JNDIServlet")
     public class JNDIServlet extends HttpServlet {

     /**
      * @see HttpServlet#doGet(HttpServletRequest request, HttpServletResponse response)
      */
     protected void doGet(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
         try {

              Thread.sleep(4000);
              Context initCtx = new InitialContext();
              Context envCtx = (Context) initCtx.lookup("java:comp/env");
              SingletonClass single = (SingletonClass) envCtx.lookup("TestMe");
              single.setText("TEXT");
              initCtx.rebind("TestMe", single);
              response.getWriter().println(envCtx.lookup("TestMe").toString());
         } catch (NamingException e) {
              e.printStackTrace();
         } catch (InterruptedException e) {
        e.printStackTrace();
         }
     } 
```

我的“SingletonClass”只是一个pojo：

```
package com.jndi.test;

public class SingletonClass {

    private String text;

    public String getText() {
        return text;
    }

    public void setText(String text) {
        this.text = text;
    }

    public SingletonClass() {
    }

} 
```

这是我的 web.xml 文件：

```
<web-app xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns="http://java.sun.com/xml/ns/javaee" xmlns:web="http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd" xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd" version="3.0">
  <display-name>JNDIServletTest</display-name>

  <resource-ref>
<res-ref-name>TestMe</res-ref-name>
<res-type>com.jndi.test.SingletonClass</res-type>
<res-auth>Container</res-auth>
  </resource-ref>
</web-app> 
```

最后，来自 tomcat 的 server.xml 文件中的相关部分：

```
<GlobalNamingResources>

    <Resource name="TestMe" auth="Container"
                    type="com.jndi.test.SingletonClass"
                    factory="org.apache.naming.factory.BeanFactory"/>

<!-- Editable user database that can also be used by
     UserDatabaseRealm to authenticate users
-->
<Resource auth="Container" description="User database that can be updated and saved" factory="org.apache.catalina.users.MemoryUserDatabaseFactory" name="UserDatabase" pathname="conf/tomcat-users.xml" type="org.apache.catalina.UserDatabase"/>
</GlobalNamingResources> 
```

另外，我在我的 tomcat 的 context.xml 中添加了所需的资源链接：

```
<ResourceLink name="TestMe" global="TestMe" type="com.jndi.test.SingletonClass"/> 
```

谁能给我一些关于我做错了什么的见解？

非常感谢 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-04-06T03:33:57.003

*[解决了]*

**第 1 部分：**
         *在`ResourceLink`webapp's`context.xml`中，使用与`name`用于`global` `name`定义的 for `Resource`in不同的`server.xml`*

**第 2 部分：** ***从 webapp's-lib****中删除资源 bean 的*
         *重复实现**JAR/类**，并保留放在 tomcat lib 中的那些。*

 **第 2 部分解释：
就我而言，我在一个单独的包中创建了一个工厂，并将其打包为一个 JAR。我在 webapp 的 lib 和 tomcat lib 中都使用了 JAR。
这导致了一个`ClassCastException`（因为资源是使用tomcat的版本类创建的 - 然后应用程序尝试将其从它自己的lib中转换为类[如果有兴趣，请阅读更多关于tomcat中的ClassLoaders，这将使事情变得很多更清晰])。

参考：[JNDI ClassCastException](https://stackoverflow.com/questions/4719276/jndi-classcastexception)**

# xml - vbscript 将 wmi 保存到 xml

> ID：14030809
> 
> 赞同：1
> 
> 时间：2012-12-25T12:53:43.120
> 
> 标签：xml, vbscript, wmi

请需要帮助。我的脚本是

```
 Set objService = GetObject("winmgmts:\\.\Root\CIMV2") 
    Set colListOfServices = objService.ExecQuery _ 
    ("Select * from Win32_Service Where StartMode = 'Auto' 
    AND Started = false")

    For Each objService in colListOfServices 
    WScript.Echo Date & " " & Time & objService.Caption

    Set xmlDoc = _
      CreateObject("Microsoft.XMLDOM")  
    XMLDoc.async = False

    Set objRoot = _
      xmlDoc.createElement("ServerCheck")  
    xmlDoc.appendChild objRoot

    Set objRecord = _
      xmlDoc.createElement("Services") 
    objRoot.appendChild objRecord 

    For Each objName in colListOfServices 
    Set objName = _
      xmlDoc.createElement("Name")  
    objName.Text = objService.Caption
    objRecord.appendChild objName
    Next

    Set objDate = _
      xmlDoc.createElement("Date")  
    objDate.Text = Date & Time 
    objRecord.appendChild objDate  

    Set objIntro = _
      xmlDoc.createProcessingInstruction _
      ("xml","version='1.0'")  
    xmlDoc.insertBefore _
      objIntro,xmlDoc.childNodes(0)  

    xmlDoc.Save "C:\Users\111\Desktop\Audits.xml"
    Next 
```

还有我的 XML

```
Services><Name>Windows install</Name><Name>Windows install</Name>
<Name>Windows install</Name><Date>25.12.201215:51:19</Date> 
```

WScript.Echo(to test) 给我 3 个不同的停止服务。但在我的 XML 中，仅将一项服务保存为 3 个副本。如何将所有停止的服务保存在 XML 中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-25T14:55:06.253

> 我希望我的脚本以 XML 编写所有在自动启动模式下停止的服务。

您的问题是您在循环中创建并编写了一个新的*XML*`For Each`文件。您一次又一次地覆盖同一个文件，最终得到一个仅包含上次停止服务的文件。

在循环之外创建并保存 XML。

```
Option Explicit

Dim objWmi, wql, objService, xmlDoc, objRoot, objRecord

Set objWmi = GetObject("winmgmts:\\.\Root\CIMV2")
wql = "SELECT * FROM Win32_Service WHERE StartMode = 'Auto' AND Started = false"

Set xmlDoc = CreateObject("MSXML2.DOMDocument")
xmlDoc.async = False

Set objRoot = NewElement(xmlDoc, "ServerCheck", "")

For Each objService in objWmi.ExecQuery(wql)
    WScript.Echo Date & " " & Time & objService.Caption

    Set objRecord = NewElement(objRoot, "Services", "")

    NewElement objRecord, "Name", objService.Caption
    NewElement objRecord, "Date", Date & " " & Time
Next

xmlDoc.Save "C:\Users\111\Desktop\Audits.xml"

' --------------------------------------------------------------------
Function NewElement(parent, name, text)
    Set NewElement = parent.ownerDocument.createElement(name)
    If text <> "" Then NewElement.Text = text
    parent.appendChild NewElement
End Function 
```

我也做了一些其他的改进。

# java - System.out 字符编码

> ID：14030811
> 
> 赞同：18
> 
> 时间：2012-12-25T12:53:56.417
> 
> 标签：java, windows-7, character-encoding

我正在从命令行（Windows 7）运行我的 Java 程序。为了简化问题，我只描述相关部分。

```
public static void main(String[] args) {
    System.out.println("Árpád");
} 
```

我的输出是垃圾。这显然是一个字符编码问题，Á 和 á 的匈牙利字符显示不正确。我尝试了以下方法：

```
public static void main(String[] args) {
    PrintStream ps = new PrintStream(System.out, true, "UTF-8");
    ps.println("Árpád");
} 
```

但是我的输出仍然是垃圾。如何使用 Windows 7 命令行解决此字符编码问题？谢谢

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-12-25T13:06:23.160

我通过从命令行找到正确的编码，然后*使用*`PrintStream`具有该编码的版本，*或者*通过在命令行上指定它并仅使用`System.out.println`.

要在命令行上查找编码，请运行`chcp`. 这是我得到的输出：

```
Active code page: 850 
```

这对应于“IBM850”的 Java 字符集名称。因此，这会在命令行上创建正确的输出：

```
java -Dfile.encoding=IBM850 Test 
```

# php - 在 PHP 中处理/服务 SOAP 请求

> ID：14030813
> 
> 赞同：0
> 
> 时间：2012-12-25T12:54:00.593
> 
> 标签：php, xml, web-services, api, soap

我是 SOAP 新手（以为我从事 RESTful 服务已经有一段时间了）。我正在构建一个基于 SOAP 的 API。尽管 SOAP 是独立于实现的，但我发现很难理解如何处理/服务使用 PHP 发送到我的服务器的 SOAP 请求。如果我没记错的话，终点将是一个 PHP 文件，它将为 SOAP 请求提供服务。我没有得到的是，从语法上讲，我如何为到达该端点的 SOAP 请求提供服务！

欢迎任何指针/代码示例！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-25T13:00:14.490

看看这个答案 -[用于英国邮件 webservice api 的 php soap 客户端？](https://stackoverflow.com/questions/10511478/php-soap-client-for-uk-mail-webservice-api/10554645#10554645)

以及以下链接：

*   [http://devzone.zend.com/article/689](http://devzone.zend.com/article/689)
*   [http://www.codewalkers.com/c/a/Miscellaneous/Using-SOAP-with-PHP/](http://www.codewalkers.com/c/a/Miscellaneous/Using-SOAP-with-PHP/)
*   [http://www.packtpub.com/article/soap-and-php-5](http://www.packtpub.com/article/soap-and-php-5)

您可以在这个问题中找到更多信息：[PHP SOAP 教程？](https://stackoverflow.com/questions/3759987/php-soap-tutorial)

# delphi - 模块“GUI.exe”中地址 00822135 的访问冲突。读取地址 00000040

> ID：14030815
> 
> 赞同：-1
> 
> 时间：2012-12-25T12:54:12.890
> 
> 标签：delphi, delphi-xe2, runtime-error, access-violation

有一个 sqlite 数据库 - 一个描述符，包含表列表、域列表、字段列表、限制列表（主键和外键）、索引列表。我在内置组件的帮助下从 Delphi XE3 连接到这个基础。有一个单独的模块，其中描述了 TTableSpec、TFieldSpec、TConstraintSpec、TConstraintDetSpec、TDomainSpec 类。这些类对应于上述基础sqlite的记录。在 TTableSpec 类中有这样的 FFields 字段： TComponent 成为对象的所有者，如 TFieldSpec 也已从基础卸载（例如，DBSchema 也包含 FTables 字段，作为所有表的所有者），并且在类 TFieldSpec 中有一个 FDomainSpec 字段：TDomainSpec。实际上我给出了一个连接到错误的类代码

```
type
TDataTypeId = (DataTypeId_String, DataTypeId_SmallInt, DataTypeId_Integer, DataTypeId_Word,
               DataTypeId_Boolean, DataTypeId_Float, DataTypeId_Currency,
               DataTypeId_BCD, DataTypeId_FmtBCD, DataTypeId_Date,
               DataTypeId_Time, DataTypeId_DateTime, DataTypeId_TimeStamp,
               DataTypeId_Bytes, DataTypeId_VarBytes, DataTypeId_Blob,
               DataTypeId_Memo, DataTypeId_Graphic, DataTypeId_fmtMemo,
               DataTypeId_FixedChar, DataTypeId_WideChar, DataTypeId_LargeInt,
               DataTypeId_Array, DataTypeId_FixedWideChar, DataTypeId_WideMemo, DataTypeId_Default);
TDBSchemaSpec=class(Tcomponent)
  private
    FDomains: TComponent;
    FTables : TComponent;
  public
    procedure Setup();
    destructor Destroy; override;
    property Domains: TComponent read FDomains;
    property Tables : TComponent read FTables;
end;
TDomainSpec = class(TComponent)
  private
    FName: string;
    FDescription: String;
    FDataTypeId: TDataTypeId;
    FLength: Cardinal;
    FCharLength: Cardinal;
    FPrecision: Cardinal;
    FScale: Cardinal;
    FWidth: Word;
    FAlign: TAlignSpec;
    FShowNull: Boolean;
    FShowLeadNulls: Boolean;
    FThousandsSeparator: Boolean;
  public
    procedure Setup(FName: string; FDescription: String; FDataTypeId: TDataTypeId;
    FLength: Cardinal;FCharLength: Cardinal;FPrecision: Cardinal;FScale: Cardinal;
    FWidth: Word;FAlign: TAlignSpec;FShowNull: Boolean;FShowLeadNulls: Boolean;
    FThousandsSeparator: Boolean);
    destructor Destroy; override;
    property Name: String read FName;
    property Description: String read FDescription;
    property DataTypeId: TDataTypeId read FDataTypeId;
    property Length: Cardinal read FLength;
    property CharLength: Cardinal read FCharLength;
    property Precision: Cardinal read FPrecision;
    property Scale: Cardinal read FScale;
    property Width: Word read FWidth;
    property Align: TAlignSpec read FAlign;
    property ShowNull: Boolean read FShowNull;
    property ShowLeadNulls: Boolean read FShowLeadNulls;
    property ThousandsSeparator: Boolean read FThousandsSeparator;
  end;

TTableSpec= class(TComponent)
  private
    FFields : TComponent;
    FIndices: TComponent;
    FConstraints : TComponent;
    FName : string;
    FDescription: string;
    FCanAdd:  boolean;
    FCanEdit: boolean;
    FCanDelete: boolean;
  public
    procedure Setup(FName : string; FDescription:string;
    FCanAdd:  boolean; FCanEdit: boolean; FCanDelete: boolean);
    destructor Destroy; override;
    property Description : string read FDescription;
    property Name : string read FName;
    property CanAdd:  boolean read FCanAdd;
    property CanEdit: boolean read FCanEdit;
    property CanDelete: boolean read FCanDelete;
    property Fields : TComponent read FFields;
    property Indices: TComponent read FIndices;
    property Constraints : TComponent read FConstraints;
  end;

TFieldSpec = class(TComponent)
  private
    FDomainSpec: TDomainSpec;
    FPosition: integer;
    FFieldName: string;
    FDescription: string;
    FCanInput: boolean;
    FCanEdit: boolean;
    FShowInGrid: boolean;
    FShowInDetails: boolean;
    FIsMean: boolean;
    FAutoCalculated: boolean;
    FRequired: boolean;
  public
    procedure Setup(FDomainSpec: TDomainSpec; FPosition: integer; FFieldName: string; FDescription: string; FCanInput: boolean; FCanEdit: boolean;
    FShowInGrid: boolean; FShowInDetails: boolean; FIsMean: boolean;FAutoCalculated: boolean;
    FRequired: boolean);
    destructor Destroy; override;
    property DomainSpec: TDomainSpec read FDomainSpec;
    property Position: integer read FPosition;
    property FieldName: string read FFieldName;
    property Description: string read FDescription;
    property CanInput: boolean read FCanInput;
    property CanEdit: boolean read FCanEdit;
    property ShowInGrid: boolean read FShowInGrid;
    property ShowInDetails: boolean read FShowInDetails;
    property IsMean: boolean read FIsMean;
    property AutoCalculated: boolean read FAutoCalculated;
    property Required: boolean read FRequired;
 end; 
```

在应用程序中有一个 fmListOfTables 表格，在 CheckListBox 中选择表格名称，该表格的数据将在其他窗口的 DBGrid 中显示。错误

```
Access violation at address 00822135 in module 'GUI.exe'.Read of address 00000040.(When debugging Project GUI.exe raised exception class $C0000005 with message 'access violation at 0x00822135:  read of address 0x00000040'.  ) 
```

在线上出现

```
if ((TTableSpec(MainForm.DBSchema.Tables.FindComponent(ListBox1.Items.Strings[ListBox1.ItemIndex])).Fields.Components[i] is TFieldSpec) and (TDomainSpec(TFieldSpec(TTableSpec(MainForm.DBSchema.Tables.FindComponent(ListBox1.Items.Strings[ListBox1.ItemIndex])).Fields.Components[i]).DomainSpec).DataTypeId<>DataTypeId_Blob) and (TDomainSpec(TFieldSpec(TTableSpec(MainForm.DBSchema.Tables.FindComponent(ListBox1.Items.Strings[ListBox1.ItemIndex])).Fields.Components[i]).DomainSpec).DataTypeId<>DataTypeId_WideMemo)) then 
```

在选择表的过程中

```
procedure TfmListOfTables.ListBox1DblClick(Sender: TObject);
var  fmShowData : TfmTableData;
      i : integer;
      querystr : string;
begin
  MainWindow.IBDatabase1.DatabaseName:=MainWindow.dbname;
  MainWindow.IBDatabase1.Connected:=true;
  fmShowData:=TfmTableData.Create(MainWindow);
  fmShowData.Caption:=ListBox1.Items.Strings[ListBox1.ItemIndex];
  fmShowData.tname:=ListBox1.Items.Strings[ListBox1.ItemIndex];
  DisplayTable:=ListBox1.Items.Strings[ListBox1.ItemIndex];
  querystr:='select ';
  for i:= 0 to TTableSpec(DBSchema.Tables.FindComponent(ListBox1.Items.Strings[ListBox1.ItemIndex])).Fields.ComponentCount-1 do
     begin
     if ((TTableSpec(MainForm.DBSchema.Tables.FindComponent(ListBox1.Items.Strings[ListBox1.ItemIndex])).Fields.Components[i] is TFieldSpec) and (TDomainSpec(TFieldSpec(TTableSpec(MainForm.DBSchema.Tables.FindComponent(ListBox1.Items.Strings[ListBox1.ItemIndex])).Fields.Components[i]).DomainSpec).DataTypeId<>DataTypeId_Blob) and (TDomainSpec(TFieldSpec(TTableSpec(MainForm.DBSchema.Tables.FindComponent(ListBox1.Items.Strings[ListBox1.ItemIndex])).Fields.Components[i]).DomainSpec).DataTypeId<>DataTypeId_WideMemo)) then
        querystr:=querystr+TFieldSpec(TTableSpec(MainForm.DBSchema.Tables.FindComponent(ListBox1.Items.Strings[ListBox1.ItemIndex])).Fields.Components[i]).FieldName+', ';
     end;
  Delete(querystr, Length(querystr)-1, 1);
  querystr:=querystr+'from '+fmShowData.tname;
  fmShowData.IBQuery1.SQL.Clear;
  fmShowData.IBQuery1.SQL.Add(querystr);
  fmShowData.IBQuery1.Open;
  fmShowData.DBGrid1.DataSource:=fmShowData.DataSource1;
  for I := 0 to fmShowData.DBGrid1.Columns.Count-1 do
    fmShowData.DBGrid1.Columns[i].Width:=90;
  fmShowData.DragKind:=dkDock;
  fmShowData.DragMode:=dmAutomatic;
  fmShowData.tname:=ListBox1.Items.Strings[ListBox1.ItemIndex];
  TfmTableData(fmShowData).databasetable:=ListBox1.Items.Strings[ListBox1.ItemIndex];
  fmShowData.Show;
end; 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-25T13:29:17.147

让我们看一下导致问题的代码行：

```
if ((TTableSpec(MainForm.DBSchema.Tables.FindComponent(
  ListBox1.Items.Strings[ListBox1.ItemIndex])).Fields.Components[i] is TFieldSpec) 
  and (TDomainSpec(TFieldSpec(TTableSpec(MainForm.DBSchema.Tables.FindComponent(
  ListBox1.Items.Strings[ListBox1.ItemIndex])).Fields.Components[i]).DomainSpec)
  .DataTypeId<>DataTypeId_Blob) and (TDomainSpec(TFieldSpec(TTableSpec(MainForm.
  DBSchema.Tables.FindComponent(ListBox1.Items.
  Strings[ListBox1.ItemIndex])).Fields.Components[i]).DomainSpec).
  DataTypeId<>DataTypeId_WideMemo)) then 
```

很难找到关于那行代码的任何内容。纯粹而简单，这是一个彻头彻尾的讽刺。

首先要做的是使用一些局部变量。例如：

```
ComponentName := ListBox1.Items.Strings[ListBox1.ItemIndex]; 
```

然后我们可以这样写：

```
Component1 := MainForm.DBSchema.Tables.FindComponent(ComponentName); 
```

继续这一脉络，我们有：

```
Component2 := TTableSpec(Component1).Fields.Components[i]; 
```

然后代码可以如下所示：

```
if (Component2 is TFieldSpec) 
and (TDomainSpec(TFieldSpec(Component2).DomainSpec).DataTypeId<>DataTypeId_Blob) 
and (TDomainSpec(TFieldSpec(Component2).DomainSpec).DataTypeId<>DataTypeId_WideMemo)) then 
```

您的首要任务是按照我建议的方式以理智的方式重新编写代码。

然后是实际的错误。你有一个读取地址的访问冲突`$00000040`。这是尝试取消引用空指针的标志。很明显这里的东西是`nil`。我说不出来。但是你的调试器会告诉你。确保将其配置为在引发异常时中断。这是 IDE 调试器选项中的设置。

很可能其中一个`FindComponent`调用返回`nil`。或者也许`DomainSpec`是`nil`。您可能需要将该单个`if`语句分解为多个`if`语句以使其更易于调试。

我的最后一点是重申我最初的建议。这段代码是行不通的。立即将其重构为理智的形式。

# image-processing - OpenCV中的形态学运算有什么替代方法吗？

> ID：14030817
> 
> 赞同：0
> 
> 时间：2012-12-25T12:54:23.747
> 
> 标签：image-processing, opencv, filter, image-segmentation, post-processing

对于视频序列中的人体检测，我使用opencv基于边缘检测来提取前景，然后是一些后处理方法。然后我发现人体被分成了一些部分，例如头部和其他部分没有连接。为此，我使用形态学运算来关闭它们。但是，我发现它效率不高，因为我需要几个形态学操作来填充它。所以我正在寻找一些替代方法。有人可以建议我吗？我搜索了论文，找到了一些，但我现在没有足够的时间来实现一个新算法。提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-25T16:45:21.060

OpenCV 中的 HOG 人检测器非常易于实现，并且当您的人是直立的、大小合理且完全没有遮挡时，它的性能相当可接受。如果您只是在寻找简单的东西，那绝对值得一看。还有一个可用的[GPU 实现](http://docs.opencv.org/modules/gpu/doc/object_detection.html)非常快。

`peopledetect`OpenCV 附带的示例中有 CPU 版本的示例代码。

另一种传统方法是使用一种 Viola-Jones 级联，OpenCV 带有许多经过训练供您使用的级联，其中一个是上身检测器，另一个是全身检测器。[在此处](http://docs.opencv.org/doc/tutorials/objdetect/cascade_classifier/cascade_classifier.html)的 OpenCV 教程中有一个使用这些的示例。

# ios - 将 ios 中 Safari 中打开的链接共享到我的应用程序？

> ID：14030823
> 
> 赞同：2
> 
> 时间：2012-12-25T12:55:54.090
> 
> 标签：ios, url, safari, share

我需要有关此问题的帮助。

我的应用程序中有一个功能可以与其他用户共享链接，我需要做的是：

1.  在 Safari 浏览器中打开任何链接
2.  直接在 Safari 浏览器上执行一些操作以在我的应用程序中共享该链接。

这是否可以在 iOS 中直接共享从浏览器到应用程序的链接。

需要这方面的帮助。

问候。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2016-06-26T09:31:45.393

从 iOS 8 开始使用 Share [App Extension](https://developer.apple.com/library/ios/documentation/General/Conceptual/ExtensibilityPG/index.html#//apple_ref/doc/uid/TP40014214-CH20-SW1)可以实现这个任务

我设法通过创建一个共享扩展应用程序来做到这一点（文件->新建->目标->应用程序扩展）

[![在此处输入图像描述](../Images/98fb130d14e565ab9c5aa5714c92e901.png)](https://i.stack.imgur.com/ktAEu.png)

然后从 Targets->Info 我指定了对 Web URL 的支持

[![在此处输入图像描述](../Images/769b4bbe5283851e1aff1435ca11cb79.png)](https://i.stack.imgur.com/XpUfQ.png)

然后我花时间寻找在应用程序扩展中使用原始应用程序文件的方法，这篇文章帮助了我很多[在原始 iOS 应用程序和应用程序扩展之间共享代码](https://stackoverflow.com/questions/28797242/sharing-code-between-original-ios-app-and-app-extension)

如果您使用的是 cocoapods，这也可以帮助您[https://stackoverflow.com/a/31989172/3033056](https://stackoverflow.com/a/31989172/3033056)但请注意，并非所有 pod 都允许在应用程序扩展中使用

这是一个教程链接[http://www.appcoda.com/ios8-share-extension-swift/](http://www.appcoda.com/ios8-share-extension-swift/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-25T12:57:53.120

这确实可以使用 URL 方案 [http://mobile.tutsplus.com/tutorials/iphone/ios-sdk-working-with-url-schemes/](http://mobile.tutsplus.com/tutorials/iphone/ios-sdk-working-with-url-schemes/)

1.  查看发件人示例
2.  查看接收器示例

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-04-26T06:36:08.187

iOS 自定义 url 方案：

html 示例：

```
<p>Run the app<a href='BundleURLSchemes://BundleURLName?param=1'>iPhone/iPad</a></p> 
```

`CFBundleURLSchemes`- 包含 URL 方案名称的字符串数组，例如 http、mailto、tel 和 sms。

`BundleURLName`- 包含 URL 方案的抽象名称的字符串。为确保唯一性，建议您指定反向 DNS 样式的标识符，例如 com.acme.myscheme。您指定的字符串也用作应用程序的 InfoPlist.strings 文件中的键。键的值是人类可读的方案名称。

通过 Apple 的文档：Implementing Custom URL Schemes

如果您的应用可以接收特殊格式的 URL，则应向系统注册相应的 URL 方案。customURL 方案是一种机制，第三方应用程序可以通过该机制相互通信。应用程序经常使用自定义 URLschemes 向其他应用程序提供服务。例如，地图应用程序支持用于显示特定地图位置的 URL。

注册自定义 URL 方案

要为您的应用注册 URL 类型，请将`CFBundleURLTypes`密钥包含在您的应用`Info.plist`文件中。该`CFBundleURLTypes`键包含一个字典数组，每个字典都定义了应用程序支持的 URL 方案。

在您的 AppDelegate 中：

```
- (BOOL)application:(UIApplication *)application
            openURL:(NSURL *)url
  sourceApplication:(NSString *)sourceApplication
         annotation:(id)annotation {

    NSString *query = [url query];

//    NSLog(@"query->%@",query);//param=1
//    NSLog(@"host->%@",host);//BundleURLName
//    NSLog(@"resourceSpecifier->%@",resourceSpecifier);//BundleURLName?param=1

    if(![[url scheme] isEqualToString:@"BundleURLSchemes"])
        return NO;
    else{
        NSArray* paramsData =[query componentsSeparatedByString:@"="];

        NSLog(@"param->%@", paramsData[1]);
    }

     return YES;

} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-04-25T09:43:02.020

您可以通过在应用程序 URL 中的查询轻松地将数据从 safari 传递到您的应用程序。即您的应用程序 URL 是`scheme://host/path?Query`查询是您可以自定义和解析的数据的地方。此 URL 被传递给`application:handleOpenURL`. 在此处查看更多信息[http://www.idev101.com/code/Objective-C/custom_url_schemes.html](http://www.idev101.com/code/Objective-C/custom_url_schemes.html)

# c# - 通过 White 访问 LinkLabel

> ID：14030827
> 
> 赞同：0
> 
> 时间：2012-12-25T12:56:32.103
> 
> 标签：c#, winforms, ui-automation

我有一个 Windows 窗体应用程序。我已经创建了 UI 自动化脚本，但我无法单击表单上的 LinkLabel。有谁知道我们如何使用 White UI Library 获取 LinkLabel 的对象

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-25T13:31:29.570

我已经解决了我的查询，但使用了超链接。LinkLabel 对象可以使用白色进行搜索。它将被视为超链接。

谢谢-Amit Gajjar

# python - 使用 python-gps 从 gpsd/gpsfake 读取

> ID：14030828
> 
> 赞同：4
> 
> 时间：2012-12-25T12:57:05.647
> 
> 标签：python, gps

在过去的几天里，我一直在努力让 gpsfake 与 python-gps 一起工作。我使用在互联网上找到的以下例句执行 gpsfake：

```
gpsfake test_data.log 
```

test_data.log：

```
$PMGNST,05.40,2,T,961,08.3,+04583,00*4C
$GPGLL,5036.9881,N,00707.9142,E,125412.480,A*3F
$GPGGA,125412.48,5036.9881,N,00707.9142,E,2,04,20.5,00269,M,,,,*17
$GPRMC,125412.48,A,5036.9881,N,00707.9142,E,00.0,000.0,230506,00,E*4F
$GPGSA,A,2,27,04,08,24,,,,,,,,,20.5,20.5,*12
$GPGSV,3,1,10,13,81,052,,04,58,240,39,23,44,064,,24,43,188,36*75
$GPGSV,3,2,10,02,42,295,,27,34,177,40,20,21,113,,16,12,058,*7F
$GPGSV,3,3,10,08,07,189,38,10,05,293,,131,11,117,,120,28,209,*76 
```

一旦它运行，我执行一个在[这里](http://blog.perrygeo.net/2007/05/27/python-gpsd-bindings/)找到的 Python 脚本：

```
import gps
import os
import time

if __name__ == '__main__':
    session = gps.gps(verbose=1)

while 1:
    os.system('clear')
    session.next() 
    # a = altitude, d = date/time, m=mode,  
    # o=postion/fix, s=status, y=satellites

    print
    print ' GPS reading'
    print '----------------------------------------'
    print 'latitude    ' , session.fix.latitude
    print 'longitude   ' , session.fix.longitude
    print time.strftime("%H:%M:%S")

    print
    print ' Satellites (total of', len(session.satellites) , ' in view)'
    for i in session.satellites:
        print '\t', i

    time.sleep(3) 
```

我得到了一个连接，但随后它被锁定在第 80 行的 gpscommon 类方法 read() 中：

```
frag = self.sock.recv(4096) 
```

这告诉我没有收到甚至发送任何数据。

当我尝试通过终端连接时

```
connect 127.0.0.1 2947 
```

唯一的回应是

```
{"class":"VERSION","release":"3.4","rev":"3.4","proto_major":3,"proto_minor":6} 
```

没有别的了。

有谁知道如何获得正确的数据？我尝试了各种 NMEA 日志文件，所以我认为这不是原因。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-04-30T21:58:27.557

要获取位置报告，您必须开始“观看”gpsd/gpsfake 正在监控的设备，尝试发送：

```
?WATCH={"enable":true,"json":true}; 
```

这将以 JSON 格式启用所有设备的更新。

要停止更新：

```
?WATCH={"enable":false}; 
```

启用观看后，您将收到包含位置数据的“TPV”响应和包含卫星数据的“SKY”响应。

有关客户端的更多信息：http: [//www.catb.org/gpsd/client-howto.html](http://www.catb.org/gpsd/client-howto.html)

GPSd JSON 格式： http: [//www.catb.org/gpsd/gpsd_json.html](http://www.catb.org/gpsd/gpsd_json.html)

# ios - TableViewCell 高度自动调整为屏幕大小

> ID：14030829
> 
> 赞同：1
> 
> 时间：2012-12-25T12:57:22.423
> 
> 标签：ios, uitableview

我已经用我需要的内容实现了一个 tableView。只有 5 个单元格要显示。我现在无法实现的是：

我希望五个单元格均匀分布在 tableview 的高度上，取决于使用的 iphone。所以从逻辑上讲，iPhone 5 的高度应该比 iphone 4 高。此外，如果有视网膜或没有视网膜，则细胞的分布应该是正确的。

我必须为此提供不同的背景图片吗？什么是最好的方法：

表格视图如下所示：

[标题] [A - 文本 1] [B - 文本 2] [C - 文本 3] [D - 文本 4] [E - 文本 5]

一天结束时应该不可能滚动。只是自动均匀分布细胞。

我很高兴在这方面得到帮助......

谢谢你

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-25T13:48:34.977

首先，如果您可以使用 UITableViewDelegate 方法[tableView:heightForRowAtIndexPath:](http://developer.apple.com/library/ios/#documentation/uikit/reference/UITableViewDelegate_Protocol/Reference/Reference.html)简单地返回表格高度除以 5，这将使每个单元格成为表格高度的五分之一：

```
- (CGFloat)tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath *)indexPath
{
    return [tableView bounds].size.height / (CGFloat)[myDataSourceArray count];
} 
```

这适用于 iPhone 5 和 iPhone 4，前提是您已将表格配置为屏幕大小。此外，考虑到在为 iOS 编程时，您以点而不是像素为单位指定屏幕尺寸，这允许 iOS 自动处理缩放，因此您无需为视网膜/非视网膜设置单元格。

然后关于背景图像，根据您想要的最终结果，有几种不同的方法可以做到这一点。例如，如果您只想用图案图像填充单元格并让默认的表格视图分隔符将它们分开，您可以制作实现图案所需的最小尺寸的图像。（可以是 2x2px 和 4x4 @2x）然后简单地使用：

```
[[cell contentView] setBackgroundColor:[UIColor colorWithPatternImage:[UIImage imageNamed:@"myPatternImage"]]]; 
```

或者，如果您希望在单元格周围显示带有某种边框的图像，您可以使用带有[帽子插图](http://www.raywenderlich.com/4344/user-interface-customization-in-ios-5)的可调整大小的图像在边框周围绘制，然后用图案填充单元格内部，这是一个截图帮助解释它是如何工作的：

![在此处输入图像描述](../Images/1e12e6e2a7a4d8a874ae824b36980ab9.png)

然后当然你可以添加一个 UIImageView 作为单元格的子视图并将完整的图像添加到其中，这并不是完全*错误*的，但我不推荐它，因为我建议的其他两种方法更有效。希望这可以帮助！

# css - 字体在 chrome 中的 HTML5 验证中得到更改

> ID：14030830
> 
> 赞同：3
> 
> 时间：2012-12-25T12:57:23.797
> 
> 标签：css, html

我在 HTML5 验证方面遇到了一个奇怪的问题。

看到这个小提琴[Fiddle](http://jsfiddle.net/VNDBq/1/)

当我在不选择任何选项的情况下提交此表单时，它会导致验证错误（这是预期的行为），但是下拉列表的字体会更改（注意`g`在晚上）。

此行为仅在 Google chrome 中可见，在 Mozilla 中运行良好。

我希望它们在验证后也相同。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T13:41:40.920

我在浏览器详细信息中找到了解决方案。那是 Chrome 的默认行为。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-13T16:41:29.157

你是如何定义你的字体的？chrome 中有一个错误，它无法正确解析字体系列，除非在“引号”中定义了主要字体，即：font-family: 'Source Sans Pro', sans-serif;

# mobile - 带有推送通知的 Azure 网站

> ID：14030831
> 
> 赞同：3
> 
> 时间：2012-12-25T12:57:23.203
> 
> 标签：mobile, azure

我正在尝试开发一个 Windows Phone 8 应用程序。我在 Windows Azure 帐户中创建了一个网站，该帐户是一个带有 REST 端点的 MVC 4 项目。我在 Azure 中有一个 SQL 数据库来存储来自 Azure 网站的数据。偶尔，我希望我的应用程序向手机发送 PUSH 通知。因此，我创建了一个移动服务并将 SQL 数据库与移动服务的数据库链接起来，以便为网页和服务获得相同的数据。

我认为当我向网站发送 HTTP POST 时，来自 Azure 移动服务的数据库中的脚本将被启动，但它看起来不是真的。不是吗？因此，我会在 HTTP POST 端点的控制器中编写将数据发送到移动服务端点的代码，以便启动 Javascript 代码来发送推送通知。

这是实现我目标的正确方法吗？有什么方法可以从 Azure 网站发送推送通知，还是只允许从移动服务发送？

我的最后一个问题：您知道任何有关 Windows Azure 开发的书籍或博客吗？互联网上有很多文档，但主要是入门教程。我读过一些书，但那些书真的很复杂，很无聊，而且不是很实用。

真的提前感谢那些庆祝它的人，祝你圣诞快乐。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-25T23:45:37.417

由于您的网站基于 MVC4 并且使用 SQL 数据库作为后端在 Windows Azure 上运行，我猜它是基于 ASP.NET 的，我将基于此编写我的建议。

现在关于您的问题“*有什么方法可以从 Azure 网站发送推送通知，还是只允许从移动服务发送？* ”我想说，Azure 移动 Web 服务的设计目的与在 Windows Azure 上运行的任何服务相同在多个平台上发送推送通知。应用程序开发人员可以选择使用移动服务来加速他们的开发，也可以选择多个应用程序使用单一服务来实现这一目标。

但是，正如您提到的“有什么方法可以从 Azure 网站发送推送通知”，这不取决于“Azure 网站”，而是取决于您在 Windows Azure 应用程序中使用的开发技术。例如，在 ASP.NET 中，如果您的应用程序基于 Java、PHP、Python、Node、js 等，您可以使用[SignalR](http://www.asp.net/signalr)实现，那么您可以找到其他一些特定于运行时的实时实现。如果你四处寻找 websockets，你会发现几乎所有流行语言的实现，或者在这方面寻找彗星编程。不仅如此，您还可以为此目的使用一些流行的 3rd 方应用程序。即[推杆](http://pusher.com/)或任何其他。

虽然 Windows Azure 移动服务将在 Windows Azure 平台上为您提供最佳结果，因为它旨在为在其上运行的应用程序提供此类特定功能。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-05T23:36:48.463

最近发布：Azure 通知中心 [http://msdn.microsoft.com/en-us/library/windowsazure/jj927170.aspx](http://msdn.microsoft.com/en-us/library/windowsazure/jj927170.aspx)

# mysql - MySql中的升序或降序索引

> ID：14030836
> 
> 赞同：4
> 
> 时间：2012-12-25T12:58:21.347
> 
> 标签：mysql, indexing

这个 Q 是关于 MySql - 要阅读 MS SQL 中的升序或降序索引，您可以在这里查看： [SQL Server 索引 - 升序或降序，它有什么区别？](https://stackoverflow.com/questions/743858/sql-server-indexes-ascending-or-descending-what-difference-does-it-make)它指的是不同的数据库并且有不同的答案。

在*MySql*中指定`Asc`或索引是否会加速对位于索引边缘的项目的查询？`Desc`

 *如果我有一个包含整数列和该列上的索引的表，并且我知道我对该字段的大多数查询都会查找高值，如果将索引定义为降序会有所帮助吗？

它会导致首先找到更新的值吗？

@AndreKR 指出这实际上还不支持。我是否还应该将这样的索引标记为`Desc`，希望在将来的某个版本中它会变得重要？或者我应该忽略这个选项，直到它有一些真正的意义？*

# javascript - WinRT中的Javascript暂停动画

> ID：14030848
> 
> 赞同：3
> 
> 时间：2012-12-25T12:59:40.313
> 
> 标签：javascript, windows-8, windows-runtime

我想在 javascript 中暂停执行，以便我可以为屏幕上的文本外观设置动画。我的代码目前是这样的：

```
function AnimateWord(word) {
    for (var i = 0; i <= word.length; i++) {
        myTest.textContent += word.charAt(i);
        // need to pause here and then continue
    }
} 
```

我已经进行了一些研究，并且在 javascript 中执行此操作的首选方法似乎`setTimeout`是我）。

有没有办法解决这个问题，还是我坚持使用`setTimeout`递归循环？

编辑：

基于一些额外的测试，我尝试使用`Promise.timeout`：

```
for (var i = 0; i <= word.length; i++) {
    WinJS.Promise.timeout(1000).then(TypeLetter(word.charAt(i)));
}

function TypeLetter(letter) {
    myTest.textContent += letter;
} 
```

但这似乎并没有真正暂停。事实上，它似乎完全忽略了超时。我也试过：

```
setTimeout(TypeLetter(word.charAt(i)), 1000); 
```

结果基本相同。 [这个页面](http://msdn.microsoft.com/en-gb/library/windows/apps/br229729.aspx)似乎暗示它应该等待然后执行任务。我对 WinJS 很陌生，但我将 promise 等同`await`于 C# 中的关键字。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-25T18:36:17.970

setTimeout/setIngerval/requestAnimationFrame 几乎是您唯一的选择。我不会称它们为递归本身-而您确实一遍又一遍地调用相同的函数。呼叫策略是完全独立的。

你真正想创作什么样的动画？在使用 CSS 动画时，最好为每个字符创建一个跨度，将它们隐藏，然后淡入淡出/翻译它们。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-28T15:45:33.157

这是否符合您的要求：

```
var array1 = [];
function AnimateWord(word) {
    var test = $('#test');            
    for (var i = 0; i <= word.length; i++) {
        array1.push(word.charAt(i));
        test.delay(100).queue(function() {
            this.innerHTML += array1[0];
            array1.splice(0, 1);
            $(this).dequeue();
        });
    }
} 
```

请同时查看小提琴链接：http: [//jsfiddle.net/7Ea9u/](http://jsfiddle.net/7Ea9u/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-28T16:08:55.617

```
var i = 0;
var str = "plz send teh codez";
var intervalId = setInterval(function(){
    myTest.textContent += str.charAt(i);
    if (++i >= str.length)
        clearInterval(intervalId);
}, 1000); 
```

### 演示[http://jsfiddle.net/qxfVu/1/](http://jsfiddle.net/qxfVu/1/)

# .net - 需要像 getelementbyid 和 getelementsbytagname 这样的函数来处理任何字符串

> ID：14030850
> 
> 赞同：0
> 
> 时间：2012-12-25T12:59:56.393
> 
> 标签：.net, vb.net, httpwebrequest, webbrowser-control

我很抱歉我的英语很差。

我需要`webbrowsercontrol.document.getelementsbytagname`从`webbrowsercontrol.document.getelementbyid`. `httpwebrequest`出于某种原因，我不想使用`webbrowsercontrol.documenttext`或根本不想`webbrowsercontrol`实现该目标。

简而言之，我想要一些函数/方法/例程/模块，例如`getelementbyid`和`getelementsbytagname`处理任何字符串。我写了一些类和方法，但它们非常慢并且错误太多。

有没有什么简单的方法或任何课程或任何免费、简单和开源的项目可以推荐给我？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-25T14:06:03.970

我认为[Html Agility Pack](http://htmlagilitypack.codeplex.com/)是您正在寻找的 :)

# php - Joomla！管理面板内的自定义模块字段数据

> ID：14030853
> 
> 赞同：2
> 
> 时间：2012-12-25T13:00:22.790
> 
> 标签：php, joomla, module

我想知道如何从后端面板调用 PHP 文件。一切都应该在 mod_.xml 文件中完成

```
<fields name="params">
    <fieldset name="basic">
       <field
          name="myname"
          type="mycalledfile"
          label="mylabel"
          extension="mod_mymodule"
          description=""
       />
    </fieldset>
 </fields> 
```

我在互联网上发现该`extension`属性会调用`administrator/components/mod_mymodule/models/fields/mycalledfile.php`，但那是错误的，我希望能够从中调用文件，`modules/`因为这是一个模块。我的意思是从某个文件或数据库调用中获取数据。无论哪种方式，这都必须通过 .xml 文件以某种方式完成，因此可以通过模块的后端管理面板获得。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T05:55:46.273

您可以在字段集中使用 addfieldpath。

```
<fieldset name="basic"  addfieldpath="/administrator/components/mod_xml/models/fields"> 
```

# php - 消除数组范围内的时间戳

> ID：14030854
> 
> 赞同：0
> 
> 时间：2012-12-25T13:00:25.390
> 
> 标签：php, arrays, timestamp

这是我的时间戳数组。我想消除彼此 30 秒内的值，只有在 30 秒内没有另一个值时才保留该值。任何帮助将不胜感激！

```
Array
(
[99999] => Array
    (
        [0] => 1356399000
        [1] => 1356398971
        [2] => 1356399005
        [3] => 1356413406
    )

[99997] => Array
    (
        [0] => 1356399002
        [1] => 1356399007
        [2] => 1356398871
        [3] => 1356398876
    )

[99996] => Array
    (
        [0] => 1356399003
        [1] => 1356399004
        [2] => 1356399008
    )

[99995] => Array
    (
        [0] => 1356399009
    )

) 
```

我的预期输出：

```
Array
(
[99999] => Array
    (
        [0] => 1356399000
        [1] => 1356398971
        [2] => 1356413406 
    )

[99997] => Array
    (
        [0] => 1356399002
        [1] => 1356398871
    )

[99996] => Array
    (
        [0] => 1356399003
    )

[99995] => Array
    (
        [0] => 1356399009
    )

) 
```

任何解决方案/建议将不胜感激！谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-25T13:43:49.057

你的输出是错误的..因为`1356398971 + 30 = 1356399001`这比`1356399000`我清楚地理解你这应该是什么样子更重要

```
$data = array(
  99999 => array(
    0 => 1356399000,
    1 => 1356398971,
    2 => 1356399005,
    3 => 1356413406,
  ),
  99997 => array(
    0 => 1356399002,
    1 => 1356399007,
    2 => 1356398871,
    3 => 1356398876,
  ),
  99996 => array(
    0 => 1356399003,
    1 => 1356399004,
    2 => 1356399008,
  ),
  99995 => array(
    0 => 1356399009,
  ),
);

echo "<pre>";

$data = array_map(function ($values) {
    rsort($values);
    $ci = new CachingIterator(new ArrayIterator($values));
    $values = array();
    foreach ( $ci as $ts ) {
        if ($ci->hasNext()) {
            abs($ci->current() - $ci->getInnerIterator()->current()) > 30 and $values[] = $ts;
        } else {
            $values[] = $ts;
        }
    }
    sort($values);
    return $values;
}, $data);

print_r($data); 
```

输出

```
Array
(
    [99999] => Array
        (
            [0] => 1356398971
            [1] => 1356413406
        )

    [99997] => Array
        (
            [0] => 1356398871
            [1] => 1356399002
        )

    [99996] => Array
        (
            [0] => 1356399003
        )

    [99995] => Array
        (
            [0] => 1356399009
        )

) 
```

# c# - 在 CompositeDataBoundControl 中跟踪 ViewState

> ID：14030856
> 
> 赞同：1
> 
> 时间：2012-12-25T13:00:39.563
> 
> 标签：c#, asp.net, custom-controls

我创建了一个`CustomDataBoundControl`. 我实现`CreateChildControls()`了，但我没有积极地做任何事情来支持视图状态，因此，我在回发后丢失了数据。我正在查看这篇文章：http: [//msdn.microsoft.com/en-us/library/aa479016.aspx](http://msdn.microsoft.com/en-us/library/aa479016.aspx)

我的问题是示例与 ViewState 一起使用的方式是使用一个`Pair`对象，该对象包含键值对并在`IStateManager 实现的项目集合中重新创建已知数据类型。`

 `我的控制更通用。我不知道进入`datasource`属性的对象的类型，我通过对对象的反射创建子控件`datasource`。我创建一个`Table`控件并用`TableRow`控件填充它，我用`TableCell`控件填充它。

我似乎无法弥合 Dino 的示例和我的实际实现之间的差距。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T04:22:02.783

当涉及到数据源控件时，您不会使用 ViewState 来保留数据。只要你构建了一个控件树，.NET框架就会重新加载控件状态下的控件的viewstate。您只需要存储控件核心属性的视图状态，以及呈现的项目数。这样，您可以重新渲染相同的控制树。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T15:54:33.543

在初始化时创建控件树以维护 ViewState，您无需在控件中填充数据，只需创建控件即可。根据页面流，为在 OnInit 中创建的控件启用了 ViewState。希望这可以帮助。`

# eclipse - 在 Eclipse 中运行时未显示 Tomcat 主页

> ID：14030857
> 
> 赞同：8
> 
> 时间：2012-12-25T13:00:53.010
> 
> 标签：eclipse, tomcat, servlets

我在 Eclipse 中运行 Tomcat。我想查看 Tomcat 主页，但是它没有显示出来。当我浏览`http://localhost:8080`时，我收到 HTTP 404 Page Not Found 错误。

这是如何引起的，我该如何解决？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-12-25T15:51:08.433

Eclipse 默认不使用独立的 Tomcat。相反，它取代了它唯一的服务器引擎，并使用工作空间作为部署空间，而不是 Tomcat 自己的`/webapps`文件夹。它还像`server.xml`在*服务器*项目中一样创建配置文件的副本。它不会影响 Tomcat 安装。它不会触及 Tomcat 默认主页（和管理器）。它不涉及现有的部署。

由于 Tomcat 主页不是 Eclipse 项目之一（也不会成为其中之一），因此从 Eclipse 内部启动 Tomcat 时您不会看到它。您只会看到通过*Add/Remove projects*部署到服务器的 Eclipse 项目。我不确定您为什么需要查看 Tomcat 主页，因为它在开发 Java EE Web 项目时没有绝对价值。但是如果你真的因为一些不清楚的原因而死心塌地看到它，那么你需要告诉 Eclipse 不仅要超越它的引擎，而且要完全使用独立安装。

*要对其进行配置，请在Servers*视图中双击 Tomcat 的条目以打开其配置，然后在*Server Locations*部分中，选择*Use Tomcat installation*选项。

![在此处输入图像描述](../Images/99080c0c525656bff082fb879fdb83ef.png)

您现在可以看到 Tomcat 的主页。

同样，好处是非常值得怀疑的。请注意，Eclipse 将通过这种方式修改 Tomcat 安装。因此，Tomcat 安装可能无法在其他 IDE/工作区中重复使用。您需要创建一个全新的 Tomcat 安装。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-07-31T07:42:01.453

在eclipse中，右键单击服务器视图中的tomcat服务器。tomcate->properties.click 切换位置。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-25T14:12:42.603

尝试以下步骤一次：

1.从webapps文件夹中删除schoolManagementsystem文件夹和war文件

2.任务管理器-->结束所有java进程

3.现在在命令提示符下执行`catalina.bat run` 命令。

希望这会帮助你 。

# php - 简单的 HTML 表单和 PHP 抛出错误

> ID：14030861
> 
> 赞同：1
> 
> 时间：2012-12-25T13:01:32.963
> 
> 标签：php, encoding

我只是通过 HTML 表单调用一个简单的 PHP 脚本。

每次都会抛出错误： *“未声明 HTML 文档的字符编码。如果文档包含 US-ASCII 范围之外的字符，则在某些浏览器配置中，文档将呈现乱码。页面的字符编码必须为在文档或传输协议中声明”*

我已经将 PHP 和 HTML 中的编码都定义为 UTF-8（请参阅下面的代码）。尽管搜索了整个网络，但我无法解决这个问题。

## HTML 代码：

```
<head>
    <meta http-equiv="Content-type" content="text/html; charset=UTF-8">
    <meta content="UTF-8" http-equiv="encoding"/>
    <title>Test</title>
</head>

<body>
    <div align="center">
    <form action= "google1.php" method="get" accept-charset="UTF-8" >
             Enter Your Name:
            <INPUT TYPE = "text" NAME = "student"> <BR>
            <!--input name="q" type="text"-->
            <br/ > 
            <input name="btnG" type="submit"  value ="test">
        </form>
    </div>
</body> 
```

## PHP 代码

```
header("Content-type: text/html; charset=UTF-8");
print "<pre>";
print_r($_GET);
print "</pre>"; 
```

* * *

提交按钮后的结果（连同错误）是：

## **"; print_r($_GET); 打印 ""; ?>**

我正在使用 XAMPP。我尝试按照互联网上的一些解决方案中的建议编辑**.htaccess**（添加：AddType 'text/html; charset=UTF-8' html），但这也无济于事。

我找到了一个站点，其中有一个简单的表单，它再次调用 PHP 脚本。[http://www.tjhsst.edu/~dhyatt/superap/form1.html](http://www.tjhsst.edu/~dhyatt/superap/form1.html)。当我尝试在表单中提交值时，我得到了同样的错误。

所以我想，这可能是浏览器问题，我将浏览器的默认编码更改为 UTF-8。但这也无济于事。

我是网络编程的新手并正在努力学习。感谢任何人可以提供帮助。

谢谢，阿舒托什

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-25T13:05:40.493

看起来您在打开/关闭标签方面遇到了一些问题。

确保您的 php 代码包含在您的（一些详细信息： http: [//php.net/manual/en/language.basic-syntax.phpmode.php](http://php.net/manual/en/language.basic-syntax.phpmode.php)`<?php` ）中，如下所示：`?>``process1.php3`

```
<?php
   header("Content-type: text/html; charset=UTF-8");
   print "<pre>";
   print_r($_GET);
   print "</pre>";
?> 
```

**升级版：**

经过长时间的提问/回答后，最终出现 OP 正在使用[`file://`](http://msdn.microsoft.com/en-us/library/aa767731%28v=vs.85%29.aspx)协议打开带有表单的文件。Like`file:///C:/xampp/htdocs/example/form.html`和 form 被提交到`file:///C:/xampp/htdocs/example/google1.php?...`由于 apache 只使用 HTTP 协议，PHP 并没有实际执行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-25T13:34:08.073

您的代码：
`<meta http-equiv="Content-type" content="text/html; charset=UTF-8">`

正确代码：
`<meta http-equiv="Content-type" content="text/html;charset=UTF-8" />`

您忘记在元标记的末尾加上斜线。您尚未关闭元标记。
虽然，它不是很重要，因为你已经尝试了一切。也试试这个。它可能对你有用。

# java-me - 大约可以存储多少数据 RMS？

> ID：14030863
> 
> 赞同：1
> 
> 时间：2012-12-25T13:01:44.360
> 
> 标签：java-me, midp, rms, recordstore

我想使用 RMS 来存储大量数据。我已经检查到一定的限制。我只是想确保 RMS 能够存储它吗？

我在 RMS 中存储了大约 1,35,000 个字符，我还可以从 RMS 中获取它们。使用 RMS 可以存储多少数据？

我想在 Live Application 中实现它。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-25T14:05:18.823

RMS 存储容量没有这样的固定限制。这完全取决于设备上有多少可用内存。

在您的应用程序中尝试以下代码片段以查找设备上的内存状态。

```
Runtime rt = Runtime.getRuntime();
long totalMemory = rt.totalMemory();
long freeMemory = rt.freeMemory();

// if rs is an instance of your App's RMS
// then, try
RecordStore rs = RecordStore.openRecordStore( "App_Db_Name_Here", true );
int sizeAvailable = rs.getSizeAvailable();
// it returns the amount of additional room (in bytes) available
// for this record store to grow. 
```

比较上述三个值并在您的应用程序中进行相应的处理。

但 RMS IO 操作会随着大小的增长而变慢，因此此类本地数据库不用于存储大数据。同样，这因设备而异。在跨设备移植应用程序时，您应该做出实施决策。

**请参阅**：***[RecordStore](http://docs.oracle.com/javame/config/cldc/ref-impl/midp2.0/jsr118/javax/microedition/rms/RecordStore.html)***和***[getSizeAvailable()](http://docs.oracle.com/javame/config/cldc/ref-impl/midp2.0/jsr118/javax/microedition/rms/RecordStore.html#getSizeAvailable%28%29)***文档以获取完整说明。

# c# - 在c#中将.csv文件（Excel类型文件）数据写入.csv文件（Excel类型文件）

> ID：14030866
> 
> 赞同：2
> 
> 时间：2012-12-25T13:01:58.243
> 
> 标签：c#, asp.net

我有一个 excel`.csv`文件，在单元格中包含以下格式的一些数据：

```
NAME Address Contact
Shoeb   Lko 675567
Rajesh  Banaras 7687678 
```

.csv 文件不是仅具有 .csv 扩展名的文本文件。它是使用 Microsoft Excel 文件制作的 csv 文件...对于测试，您还可以制作 .csv 文件...为此 (1) 创建一个 excel 文件 (2) 打开此 excel 文件 (3) 转到文件菜单并单击“另存为”（4）在另存为类型中选择 CSV（逗号分隔）选项：---- 现在这是 .csv 文件，我将从该文件中读取内容并将内容写入 .csv 文件

我正在尝试使用 C# 以`.csv`相同的格式编写另一个 Excel 文件。

***我正在使用的代码写在下面：*** 

```
//Below line is reading file from system drive
    StreamReader rd = new StreamReader("D:\FilesUploadedToTablet\drivers.csv", true);
//Below line is writing data to file existing in our site folder
    StreamWriter wr = new StreamWriter(Server.MapPath(".") + "\filename\CSVFile.csv");
    wr.Write(rd.ReadToEnd());
    rd.Close();
    wr.Close(); 
```

这`StreamReader`是读取`drivers.csv`文件，但`StreamWriter`没有将该内容写入`CSVFile.csv`文件。如果我使用任何文本文件代替 .csv 文件，则内容写入成功。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-25T13:18:01.013

您可以尝试使用 BinaryReader() 而不是 StreamReader()。还可以尝试如下打开 StreamReader：

```
 StreamReader("D:\FilesUploadedToTablet\drivers.csv", false); 
```

看起来您只是在复制文件，而不是对其进行过滤或执行任何处理。为什么不直接使用 File.Copy：

```
 File.Copy("D:\FilesUploadedToTablet\drivers.csv", Server.MapPath(".") + "\filename\CSVFile.csv"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-28T11:32:42.517

谢谢大家对我的建议......
我得到了它的解决方案 - 我得到的解决方案写在下面：

```
string csvContent = string.Empty; 
if (File.Exists("SourceFilePath")) 
{ 
    StreamReader rd = new StreamReader("SourceFilePath", true); 
    csvContent = rd.ReadToEnd(); 
    rd.Close(); 
    var DestPath = HttpContext.Current.Server.MapPath("~/CSV Files/")+"MyFile.csv";     
    StreamWriter wr = new StreamWriter(DestPath, true); 
    StringBuilder sb = new StringBuilder(csvContent); 
    wr.WriteLine(sb.ToString()); 
    sb.Clear(); 
    wr.Close(); 
```

# javascript - 如何从其父函数外部调用嵌套函数？

> ID：14030868
> 
> 赞同：2
> 
> 时间：2012-12-25T13:02:07.613
> 
> 标签：javascript, html, function

我正在处理一个带有 JavaScript 的 HTML 文件。

这是 JavaScript 代码：

```
var dImage = new Image();

var drawing = (function () {

    .
    .
    .
    .

    redrawing = function () {
        context.drawImage(dImage, dX, dY, dWidth, dHeight);
    },

    init = function () {
        dImage.src = "images/d.png";
        redrawing();
    };

    return {
        init: init
    };

}());

function updateImage(dSrc){
    dImage.src = dSrc;
    // Call redrawing here
} 
```

在我调用的 HTML 中

```
drawing.init(); 
```

它工作正常。我也可以通过调用更改图像源

```
updateImage("images/d2.png"); 
```

它正在改变来源。

但是我需要调用刷新图像`redrawing()`的方法。`updateImage()`

我尝试以多种方式调用它（例如，`drawing.redrawing();`），但没有来自 的响应`redrawing()`。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-25T13:07:55.147

如果您希望能够`redrawing`从定义它的函数外部调用该函数，则需要从该函数返回它，就像您已经完成的那样`init`：

```
var drawing = (function () {

    .
    .
    .
    .

    return {
        init: init,
        redrawing: redrawing
    };
}()); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-25T13:05:12.337

`redrawing`公开：

```
return {
    init: init,
    redrawing: redrawing
}; 
```

# powershell - Get-ChildItem 文件/文件夹

> ID：14030871
> 
> 赞同：1
> 
> 时间：2012-12-25T13:02:19.050
> 
> 标签：powershell

我试图让[Get-ChildItem](http://technet.microsoft.com/en-us/library/hh849800.aspx)检索文件夹的内容，并显示文件夹中每个对象的大小、对象的名称和类型（文件/目录）。但是，我无法仅使这三列起作用。

名称和长度相当简单，但如何显示文件和文件夹之间的差异？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-25T13:20:49.543

检查[PSIContainer](https://technet.microsoft.com/en-us/library/ff730953.aspx)属性。对于文件夹，它设置为 $true，对于文件，它设置为 $false。这是一个例子：

```
Get-ChildItem | Foreach-Object{
    New-Object PSObject -Property @{
        Name = $_.Name
        SizeMB = if($_.PSIsContainer) { (Get-ChildItem $_.FullName -Recurse | Measure-Object Length -Sum).Sum/1mb  } else {$_.Length}
        Type = if($_.PSIsContainer) {'Directory'} else {'File'}
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-08-22T15:06:19.637

我相信通过获取“模式”信息可以做到这一点。[（在这里](https://stackoverflow.com/questions/4939802/what-are-the-possible-mode-values-returned-by-powershells-get-childitem-cmdle)看到这个答案）

`Get-ChildItem`那么，基本上， “模式”以“”开头的命令列出的任何内容`d`。

这是“模式”中 6 个可能值的实际含义，如果您不想转到[@Joey](https://stackoverflow.com/users/73070/joey)的答案：

> 无论如何，完整列表是：
> 
> ```
> d - Directory
> a - Archive
> r - Read-only
> h - Hidden
> s - System
> l - Reparse point, symlink, etc. 
> ```

所以我用它来输出一个 CSV，然后我将在 excel、我的 Flow 或 SharePoint 中标记文件夹。我使用的命令是：

```
Get-ChildItem -Recurse | Select-Object DirectoryName, BaseName, Extension, Mode | Export-Csv -Path INSERTPATH\listings.csv -Encoding ascii -NoTypeInformation 
```

希望这对遇到它的人有所帮助。

* * *

*警告，这是我第一次以完整的回答意图回答。我相信即使这是 6 年的历史，人们在尝试实现相同的目标时仍然会发现它很有用。*

# regex - 正则表达式数字和连字符

> ID：14030873
> 
> 赞同：6
> 
> 时间：2012-12-25T13:02:54.377
> 
> 标签：regex

我正在尝试将数字与正则表达式匹配，例如：

```
34-7878-3523-4233 
```

有了这个：

```
^[0-9][0-9-]*-[0-9-]*[0-9]$ 
```

但表达式也允许

34--34--------88

那么如何在数字之间只允许一个连字符呢？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-12-25T13:05:22.603

## 你的正则表达式：

在行动中看到它：**[Regexr.com](http://regexr.com?3382c)**

```
^[0-9]+(-[0-9]+)+$ 
```

## 火柴：

```
1-2
1-2-3 
```

## 不匹配：

```
1
1-
1-2-
1-2----3
1---3 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-12-25T13:04:41.343

那是因为，您已在字符类的允许字符中包含连字符。你应该把它放在外面。

你可以尝试这样的事情： -

```
^([0-9]+-)*[0-9]+$ 
```

现在这将匹配*一些数字的 0 次或多次重复，后跟连字符*。然后在最后一位或多位数字。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-25T13:05:58.180

使用`normal*(special normal*)*`模式：

```
^[0-9]+(-[0-9]+)+$ 
```

在哪里和`normal`是`[0-9]``special``-`

# javascript - 触发CSS3转换的JavaScript函数不起作用

> ID：14030874
> 
> 赞同：3
> 
> 时间：2012-12-25T13:03:01.880
> 
> 标签：javascript, jquery, css, html, transition

嗨，我的一个问题`transition`在按下按钮时被调用。我感到困惑的原因是因为它以前有效，但后来我把它移到了另一个地方`div`，现在它不是？当我的意思是它不工作时，我的意思是该函数工作（因为它确实做某事）然后运行回调，但是当它切换类时它不会“动画”它。`div`只是停留在那里直到动画时间结束，然后运行隐藏它的回调。

所以基本上它只是隐藏它，但没有动画它应该做的滑出效果。

`switchClass`即使是使页面滑回的功能，其余功能也可以正常工作。

无法正常运行的代码：

```
function hidepage() {
        $( ".PageShow" ).switchClass("PageShow", "PageHide", loadpanel);
// Alternative $( "PageContainer" ).switchClass("PageShow", "PageHide", loadpanel);
    }; 
```

以及随之而来的其余代码......

CSS：

```
#PageContainer {
   margin-top:120px;
   width:100%;
}

.PageShow {
   position:fixed;
   -webkit-transform:translate(0px,0px);
   -moz-transform:translate(0px,0px);
   -ms-transform:translate(0px,0px);
   -o-transform:translate(0px,0px);
   transform:translate(0px,0px);
   transition-duration: 0.3s;
   -moz-transition-duration: 0.3s;
   -webkit-transition-duration: 0.3s;
   transition-delay: 0.1s;
   -moz-transition-delay: 0.1s;
   -webkit-transition-delay: 0.1s;
   -o-transition-delay: 0.1s;
   transition-timing-function: ease-out;
   -moz-transition-timing-function: ease-out;
   -webkit-transition-timing-function: ease-out;
   -o-transition-timing-function: ease-out;
}

.PageHide {
   position:fixed;
   -webkit-transform:translate(-100%,0px);
   -moz-transform:translate(-100%,0px);
   -ms-transform:translate(-100%,0px);
   -o-transform:translate(-100%,0px);
   transform:translate(-100%,0px);
   transition-duration: 0.5s;
   -moz-transition-duration: 0.5s;
   -webkit-transition-duration: 0.5s;
   transition-timing-function: ease-out;
   -moz-transition-timing-function: ease-out;
   -webkit-transition-timing-function: ease-out;
   -o-transition-timing-function: ease-out;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-25T13:16:17.490

如果您将方法更改`.switchClass()`为`.removeClass()`，`.addClass()`它将起作用。看看这个[jsFiddle](http://jsfiddle.net/ldaniell14260/QyY9N/)。有两个函数，第一个被调用`.hidepage()`，第一个函数使用`.removeClass`and `.addClass`，第二个函数`.hidepagetwo()`使用`.switchClass()`

真正的错误是：最后有一个`});`缺失，至少在 jsFiddle 中你的代码在添加后可以工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-25T13:12:06.473

看起来您使用 switchClass 不正确。这是 API 文档：

[http://api.jqueryui.com/switchClass/](http://api.jqueryui.com/switchClass/)

请注意，该方法需要 2 个强制参数和 3 个可选参数。您不能将加载面板（如果那是您的回调函数）填充到第三个参数中，因为它属于第五个。在这种情况下，您需要指定第 3 和第 4 的值，以便您的回调函数最终到达预期的位置。

另外，你有很多 CSS 过渡的东西，但我的理解是 switchClass 在你的两个类之间做一个 javascript 动画。查看上面链接中的示例。您只需要在一个类中指定前样式，在另一个类中指定后样式。switchClass 将插入中间并在没有所有 CSS 转换的情况下执行动画。

由于您在类上都有所有这些 CSS 动画，另一种方法是尝试 jQuery 的 toggleClass，它只是打开/关闭类：[http ://api.jquery.com/toggleClass/](http://api.jquery.com/toggleClass/)

# winapi - 需要 Win32 API 拦截项目的指导

> ID：14030875
> 
> 赞同：2
> 
> 时间：2012-12-25T13:03:10.030
> 
> 标签：winapi, hook, driver, interceptor, rootkit

好的，首先有一点背景。我已经开始在我的大学从事一个项目，其中一个目标是开发一个模块，该模块将在进程尝试执行以下操作时进行记录：

-创建、删除或修改文件（基本上是文件系统活动） -创建、检测或修改注册表 ID/值

实际上，我们将为此模块指定一个要监视的进程，并且每当该进程尝试执行上面列出的任何活动时，它都会被记录下来。

现在，我正在研究驱动程序开发的基础知识，以及我的 DS 建议的过滤驱动程序。这是我的问题，

实现这一目标的最佳方法是什么，是通过编写某种过滤器驱动程序吗？如果是，那么究竟是什么过滤器驱动程序、文件系统过滤器驱动程序或微过滤器驱动程序或其他什么？或者不知道其他一些技术？

我只需要一点方向，这样我就可以有针对性的研究和实施，因为我没有太多时间做这个项目！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-26T12:41:45.333

[文件系统微过滤器驱动程序](http://msdn.microsoft.com/en-us/library/windows/hardware/ff540402%28v=vs.85%29.aspx)是执行此操作的方法。

但棘手的部分是如何指定要监控的进程。如果您正在考虑 PID，那么它非常简单，但是如果您正在考虑使用诸如*notepad.exe*之类的进程/可执行文件名称，那么这就变得有点复杂了。

只是为了给您提示，您可以在迷你过滤器中获取操作的 PID，但不能获取进程名称。因此，您必须在微过滤驱动程序中维护一个 PID 映射来处理名称。您想使用[PsSetCreateProcessNotifyRoutineEx](http://msdn.microsoft.com/en-us/library/windows/hardware/ff559953%28v=vs.85%29.aspx)和[PsSetLoadImageNotifyRoutine](http://msdn.microsoft.com/en-us/library/windows/hardware/ff559957%28v=vs.85%29.aspx)。

# .htaccess - 是否可以在 htaccess 中嵌套重写条件？

> ID：14030878
> 
> 赞同：1
> 
> 时间：2012-12-25T13:03:40.993
> 
> 标签：.htaccess

我有以下情况，我想嵌套重写条件，我遇到了一种情况，我无法看到相同的正确文档。

```
RewriteCond %{REQUEST_URI} ^(robots.txt|favicon|ico)$ [NC]
RewriteRule . - [S=3]
# Nested ReWrite Condition 
RewriteCond %{HTTP_HOST} ^www
    RewriteRule .* http://%{SERVER_NAME}%{REQUEST_URI} [R=301,L]

RewriteRule .* http://%{SERVER_NAME}%{REQUEST_URI_1} [R=301,L]
RewriteRule .* http://%{SERVER_NAME}%{REQUEST_URI_2} [R=301,L] # and so on 
```

因此，问题来了，跳过规则的数量是否会包含嵌套的重写条件，即在这种情况下，跳过的重写规则的数量应该是4个还是5个（如果包括重写条件）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-25T13:12:36.503

```
RewriteCond %{REQUEST_URI} ^(robots.txt|favicon|ico)$ [NC]
RewriteCond %{HTTP_HOST} !^www
RewriteRule .* - [S=3]

# the following rules are run only if the first 2 conditions don't match
RewriteRule .* http://%{SERVER_NAME}%{REQUEST_URI} [R=301,L]
RewriteRule .* http://%{SERVER_NAME}%{REQUEST_URI_1} [R=301,L]
RewriteRule .* http://%{SERVER_NAME}%{REQUEST_URI_2} [R=301,L] 
```

注意`!`第二个 cond
[文档](http://httpd.apache.org/docs/2.2/rewrite/flags.html#flag_s)中的否定：

> 这种技术很有用，因为 RewriteCond 仅适用于紧随其后的 RewriteRule。因此，如果您想让 RewriteCond 应用于多个 RewriteRule，一种可能的技术是否定这些条件并添加带有 [Skip] 标志的 RewriteRule。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-25T13:38:41.087

好的，因为您只发布了一个示例，我将向您展示一个示例，它是如何工作的。[它带有评论，但如果你仍然觉得它说得不够多，这里](http://httpd.apache.org/docs/current/rewrite/flags.html#flag_s)有更多的解释。

```
# Does the file exist?
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
# Create an if-then-else construct by skipping 3 lines if we meant to 
# go to the "else" stanza.
RewriteRule .? - [S=3]

# IF the file exists, then:
    RewriteRule (.*\.gif) images.php?$1
    RewriteRule (.*\.html) docs.php?$1
    # Skip past the "else" stanza.
    RewriteRule .? - [S=1]
# ELSE...
    Rewri 
```

这应该可以解决您的问题。如果没有，请在问题中更新您的示例，以便清楚您缺少什么。

是的，它跳过了*Rules*而不是*Conditions*。

# android - 为什么这个 CSS 不适用于 Android 上的 Chrome，但适用于其他任何地方？

> ID：14030880
> 
> 赞同：9
> 
> 时间：2012-12-25T13:03:48.980
> 
> 标签：android, css, ruby-on-rails-3, google-chrome, twitter-bootstrap

这真的让我很困惑。我想让 pic.jpg 在背景中保持静态（滚动时不移动）并且它不会拉伸。

它适用于除 Android 上的 Chrome 之外的所有浏览器（即 Chrome、Safari、Firefox）（它甚至适用于 Android 原始浏览器）

```
body{
        background-color: transparent !important;
        background-image: url(<%= asset_path "pic.jpg" %>);

        background-position: center center;
        background-repeat: no-repeat;
        background-attachment: fixed;
        -webkit-background-size: cover;
        -moz-background-size: cover;
        -o-background-size: cover;
        background-size: cover;
    } 
```

适用于 Android 的 Chrome 将其呈现为 pic.jpg 在屏幕的中间位置，而不是在整个页面上，并且在滚动时不会保持静止。.

我无法在 jsfiddle 上重现它，我也尝试用我的 Android 手机对其进行调试，但似乎没有任何帮助。

这不是创建背景图像的方法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-03-26T19:37:38.707

我有类似的问题..我用这个解决它

```
html{
 height:100%;
 min-height:100%;
}
body{
 min-height:100%;
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-21T18:34:51.020

我不想残忍，但这个问题大约在 4 年前被报道过

[http://code.google.com/p/android/issues/detail?id=3301](http://code.google.com/p/android/issues/detail?id=3301)

最近的回复可以帮助我猜：

> 在我对 Android 的实验中，我注意到身体内的所有其他 DIV 行为正确，包括居中，所以我将图像移动到另一个 DIV 并且它工作。

有趣的一个。

最好的

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-17T22:24:22.217

我找到了一种解决方法，可以在 Android 版 Chrome 上正确显示背景：在 html 标记中定义背景，而不是正文。这是新的CSS：

```
html{
    background-color: transparent !important;
    background-image: url(<%= asset_path "pic.jpg" %>);

    background-position: center center;
    background-repeat: no-repeat;
    background-attachment: fixed;
    -webkit-background-size: cover;
    -moz-background-size: cover;
    -o-background-size: cover;
    background-size: cover;
} 
```

[是的，这是有效的标记](https://stackoverflow.com/questions/6739601/what-is-the-difference-between-applying-css-rules-to-html-tag-compared-to-body-t)。以我的经验，背景在所有其他浏览器中仍然可以正常工作。

# android - 如何在 AndEngine 中制作计时器？

> ID：14030881
> 
> 赞同：3
> 
> 时间：2012-12-25T13:03:50.860
> 
> 标签：android, andengine, chronometer

我正在制作一个 Race Game，现在我想实现一个显示您的时间的时钟/计时器。

我想在 ChangeableText 中显示实际时间，在另一个 ChangeableText 中显示最佳单圈时间。

我如何每秒或每 0.1 秒更新时间？

我如何检测一圈何时结束，例如在终点线（确定 x 和 y 位置）？

谢谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-26T18:23:30.197

尝试这个：

```
int count=60;
youScene.registerUpdateHandler(new TimerHandler(1f, true, new ITimerCallback() {
        @Override
        public void onTimePassed(TimerHandler pTimerHandler) {
                count--;
                youchangeabletext.setText(String.valueof(count));  
                if(count==0){
                 youScene.unregisterUpdateHandler(pTimerHandler);
                 //GameOver();
                 }        
               pTimerHandler.reset();

        }
})); 
```

在这种情况下，参数“1f”是运行该方法的时间 1f = 1 秒，现在每秒运行该方法，当计数为“0”时，该方法将从游戏中删除。

现在为了检测一圈结束，您可以扩展您汽车的 Sprite 类：

```
public class Car extends AnimatedSprite {
            public Car(final float pX, final float pY, final TiledTextureRegion pTextureRegion, final VertexBufferObjectManager pVertexBufferObjectManager) {
                super(pX, pY, pTextureRegion, pVertexBufferObjectManager);
            }
//the method onManagedUpdate run in milliseconds
            @Override
            protected void onManagedUpdate(final float pSecondsElapsed) {
                 //for example when car is in the position 100 in x
                if(this.getX()>=100){
                          //lap finish
                }
                super.onManagedUpdate(pSecondsElapsed);
            }
        } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-21T06:26:54.060

```
int time=110;

timerText = new Text(700, 440, resourcesManager.font, "10", new TextOptions(HorizontalAlign.RIGHT), vbom);

TimerHandler mTime = new TimerHandler(0.1f,true, new ITimerCallback(){

     @Override

     public void onTimePassed(TimerHandler pTimerHandler) {

          // TODO Auto-generated method stub

          time--;

          timerText.setText(""+(time/10));

          if(time==0){

             //Do something

          }

    }

 }); 
```

# c++ - 有没有使用 C++ 编写控制台/终端应用程序的书？

> ID：14030883
> 
> 赞同：0
> 
> 时间：2012-12-25T13:04:18.583
> 
> 标签：c++, linux, unix

我有兴趣在 unix/linux 上使用 C++ 编写 wget、mutt 等终端应用程序。你能推荐一本关于这个主题的好书吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-25T13:07:55.497

也许这可以帮助你：

[进阶linux编程](http://www.advancedlinuxprogramming.com/alp-folder/alp-ch08-linux-system-calls.pdf)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-25T13:08:53.563

Linux 系统编程以及进程间通信、线程、共享内存和套接字在这本名为[Advanced Linux Programming 的免费在线书籍中进行了解释。](http://www.advancedlinuxprogramming.com/) 这是另一本书[An Introduction to GCC](http://www.network-theory.co.uk/gcc/intro/)，它解释了编译器和链接器以及简单的 C 和 C++ 示例。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-25T13:21:58.250

我想指出，例如，`wget`这不是我所说的“终端程序”。它更像是一个网络程序。网络编程本身就是一门艺术！

我同意提供的链接非常好。但是当我看到控制台/终端程序这个术语时，我更多地想到了一些可以移动光标的东西，比如 emacs、vi、linux 的 menuconfigu 等。在这种情况下，如果你想要一个轻松的生活，`ncurses`这是一个很好的图书馆，可以添加到你的“你理解的东西”的收藏中。

# mysql - #1062 - 键 'username_clean' 的重复条目 '0'

> ID：14030885
> 
> 赞同：2
> 
> 时间：2012-12-25T13:04:38.527
> 
> 标签：mysql, sql, sql-update

为什么在我的 MySQL 表中

```
CREATE TABLE IF NOT EXISTS `phpbb_users_copy` (
  `username` varchar(255) COLLATE utf8_bin NOT NULL DEFAULT '',
  `username_clean` varchar(255) COLLATE utf8_bin NOT NULL DEFAULT '',
  `user_password` varchar(40) COLLATE utf8_bin NOT NULL DEFAULT '',
  `user_email` varchar(100) COLLATE utf8_bin NOT NULL DEFAULT ''
) ENGINE=MyISAM DEFAULT CHARSET=utf8 COLLATE=utf8_bin; 
```

当我进行查询时

```
UPDATE  phpbb_users 
SET     username_clean ='username' AND 
        user_password ='$H$76MZf0m0LJ5T1Tkz/' AND 
        user_email ='2mlrfc4b.wmk@email.com' AND 
        username ='Username' 
WHERE username_clean ='username' 
```

我收到一个错误：

```
#1062 - Duplicate entry '0' for key 'username_clean' 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-25T13:06:53.090

使用`UPDATE`语句时，需要将要更新的列分隔为 a`COMMA`而不是`AND`

```
UPDATE  phpbb_users 
SET     username_clean ='username' ,
        user_password ='$H$76MZf0m0LJ5T1Tkz/' , 
        user_email ='2mlrfc4b.wmk@email.com' ,
        username ='Username' 
WHERE   username_clean ='username' 
```

*   [更新语法](http://dev.mysql.com/doc/refman/5.0/en//update.html)

**更新**

请注意，您正在更新 table`phpbb_users`而不是`phpbb_users_copy`.

# r - 一个 Winbugs 脚本中的两个模型

> ID：14030887
> 
> 赞同：2
> 
> 时间：2012-12-25T13:04:43.200
> 
> 标签：r, winbugs

我正在使用 R 中的 Winbugs 进行贝叶斯分析。我需要将两个 Winbugs 脚本合并为一个：但是，我收到一条错误消息 ( `Variable x2 is not defined in model or in data set`)。这是winbugs代码：

```
model{
# Model’s likelihood
 for (i in 1:n) {
    tto[i] ~ dnorm( mu[i], tau ) # stochastic componenent
    b[i] ~ dnorm(0.0, tau2)
    # link and linear predictor
    mu[i] <- 1 - (beta.concern2*concern2[i] + beta.concern3*concern3[i] + b[i])
 }

 for (i in 1:1002) {
    # Linear regression on logit
    logit(p[i]) <- beta.concern2*x2[i,1] + beta.concern2*x2[i,2]

    # Likelihood function for each data point
    y2[i] ~ dbern(p[i])
 }

  s2<-1/tau
  s <-sqrt(s2)

  a2<-1/tau2
  a <-sqrt(a2)

  } 
```

其中`x2`是 1002*2 矩阵并且`y`是向量

这是定义数据的 R 代码：

```
 combined.data <- list(n=n,tto=tto,concern2=concern2,
                       concern3=concern3,y2=y2, x2=x2) 
```

有谁知道出了什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T22:42:22.990

我将在这里做很多假设......

也许您可以添加一个图表来说明变量之间的关系，这些关系是确定性的还是随机的。在 BUGS 中制作模型时，我发现这很有帮助。`n`此外，了解所有数据的维度、含义，也许还有一些关于您正在建模的内容和您感兴趣的节点的上下文或细节，这将很有帮助。

我猜这是一个长度为 1002的二进制( 0,1 )向量，并且有对应的`y`值`x2[,1]``x2[,2]``x1``x2``concern2``concern3``c2``c3``tto`

```
nrow(x2) == 1002 
```

以下是一些与 of 一起使用的示例数据`nrow==10`：

```
y <- sample(x=c(0,1), size=10, replace=TRUE, prob=c(0.5,0.5))
x2 <- matrix(rnorm(20), nrow=10, ncol=2)
c2 <- rnorm(10)
c3 <- rnorm(10)
tto <- rnorm(10) 
```

您似乎正在尝试为logit 中的两个值确定`beta.concern2`(herein `b2`) 的值。`x2`不知道为什么要为两个不同的预测变量使用相同的参数。如果这是我给出的错字`b2`，`b3`而是作为参数。我希望您能够根据自己的需要进行调整。

`b2`, `b3`（随机）和`c2`, （给定）的这些值的乘积`c3`用于生成变量`mu`，该变量也具有误差项。（我假设`b[i]`（这里`b1[i]`）是一个正态分布的误差项。）然后`tto`是一个正态分布的变量，它取决于 的值`mu`，并且它本身有一个误差项。我已将两种情况下的误差项的精度设置为相等。

所以对于这样的模型：

```
require(rjags)

### The data
dataList <- list(
    x1 = x2[,1],
    x2 = x2[,2],
    y = y,
    c2 = c2,
    c3 = c3,
    tto = tto,
    nRowX = nrow(x2)
    )

### make sure logistic model can be fitted
f1 <- stats::glm(dataList$y ~ dataList$x1 + dataList$x2 -1, family=binomial(logit))
show(f1)

### set some approximate initial values
b1Init <- 0.1 # arbitrary
b2Init <- f1$coef[2]
b3Init <- f1$coef[3]

initsList <-  list(
 b1 = b1Init,
 b2 = b2Init,
 b3 = b3Init)

### Model: varying parameters (b2, b3) per observation; 2x error terms
modelstring <- "
    model {
        for(i in 1:nRowX){
            tto[i] ~ dnorm(mu[i], prec)
            mu[i] <- 1 - (b1 + b2*c2[i] + b3*c3[i])
            y[i] ~ dbern(L[i]) # L for logit
            L[i] <- 1/(1+exp(- ( b2*x1[i] + b3*x2[i]) ))
        }
        b1 ~ dnorm(0, prec) # precision
        prec <- 1/sqrt(SD) # convert to Std Deviation
        SD <- 0.5
        b2 ~ dnorm(0, 1.4) # arbitrary
        b3 ~ dnorm(0, 1.4)
    }
"

writeLines(modelstring,con="model.txt")

parameters <- c("b1","b2","b3") # to monitor
adaptSteps <- 1e4 # "tune in" samplers
burnInSteps <- 2e4 # "burn in" samplers
nChains <- 3
numSavedSteps <-2e3
thinSteps <- 1 # Steps to "thin" (1=keep every step).
nPerChain <- ceiling(( numSavedSteps * thinSteps ) / nChains) # Steps per chain

rm(jagsModel) # in case already present

jagsModel <- rjags::jags.model(
 "model.txt", data=dataList,
 inits=initsList, n.chains=nChains,
 n.adapt=adaptSteps)

stats::update(jagsModel, n.iter=burnInSteps)

### MCMC chain
MCMC1 <- as.matrix(rjags::coda.samples(
 jagsModel, variable.names=parameters,
 n.iter=nPerChain, thin=thinSteps))

### Extract chain values
b2Sample <- as.vector(MCMC1[,grep("b2",colnames(MCMC1))]) 
```

# ruby-on-rails - Rails：@font-face 可以在 Heroku 上工作，但不能在 localhost 上工作

> ID：14030888
> 
> 赞同：0
> 
> 时间：2012-12-25T13:04:47.507
> 
> 标签：ruby-on-rails, ruby, fonts, osx-lion, font-face

在 CSS 中：

```
@font-face {
  font-family: 'some_name';
  src: url('font_name.eot');
} 
```

在`application.rb`：

```
config.assets.paths << "#{Rails.root}/app/assets/fonts" 
```

在 Heroku 上，此设置运行良好，但在 localhost 上却不行。我是否缺少在 localhost 上正确显示非标准字体的内容？我在山狮上奔跑。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-25T16:46:46.280

这个解决方案对我有用：

```
@font-face {
  font-family: 'some_name';
  src: url('/assets/font_name.eot');
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-25T13:20:57.710

字体的`scr`路径规范是相对的。

在生产环境中，所有资产都被编译，不同类型的资产被放置在一个文件夹中，可以在`/assets/asset-name`. 这意味着字体和 css 文件都将在同一个文件夹中，并且可以使用相对路径。然而，在开发环境中，资产没有被编译，也没有组合在一起，这意味着它们是在`/assets/ASSET-TYPE/asset-name`. 因此字体不会与样式表位于同一文件夹中，并且相对路径无助于查找实际的字体文件。

Rails 有一个[`asset-url`](http://guides.rubyonrails.org/asset_pipeline.html#coding-links-to-assets)CSS 帮助器，它可以在两个环境中工作，它会在编译到`url(path-to-asset)`.

```
@font-face {
  font-family: 'The Font';
  src: asset-url('the_font.eof', font);
} 
```

# android - 如何将本地html页面加载到android

> ID：14030890
> 
> 赞同：4
> 
> 时间：2012-12-25T13:04:53.243
> 
> 标签：android

我想将本地 HTML 页面加载到 WebView 中。我知道如何在 iPhone 中做到这一点。谁能告诉我如何在android中做到这一点。

如何在android中执行以下页面？

![在此处输入图像描述](../Images/e4b920aac588bdc5c19d5aa466479583.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-25T13:06:13.947

将您的文件放到资产文件夹中，而不是使用下面的代码

```
 WebView webview = (WebView) findViewById(R.id.yourwebview);
  webview .loadUrl("file:///android_asset/UI/mylocalhtmlfile.htm"); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-25T13:08:59.620

用这个。

```
yourWebView.loadUrl("file:///android_asset/yourfileName.html"); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-25T13:06:39.080

最简单的方法可能是将您的网络资源放入资产文件夹然后调用

```
webView.loadUrl("file:///android_asset/filename.html"); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-25T13:26:59.283

创建一个 TextView textArea 并使用 html 字符串设置它的文本 您可以使用 html 标签将字符串定义为 strings.xml 文件的一部分，并确保调用 getText(T.string.your_html_string) 来获取基于 html 的文本

```
 <string name="your_html_text">"Press <font fgcolor="#ffffffff"><b>Menu</b></font> and touch:\n
    \n<li><font fgcolor="#ffffffff"><b>Create </b></font> to create\n</li>
    \n<li><font fgcolor="#ffffffff"><b>Delete All</b></font> to delete all\n</li>
    </string> 
```

和 setText 一样

textArea.setText(getText(R.string.your_html_text));

# asp.net - 子域 url 重定向到主 url

> ID：14030896
> 
> 赞同：3
> 
> 时间：2012-12-25T13:05:30.330
> 
> 标签：asp.net, c#-4.0, subdomain

我在 asp.net 中开发了一个网站并托管在 Windows 服务器上，它没有为我提供子域名的通配符条目。我怎样才能写我的网址，例如 [http://subdomainName.DomainName.org](http://subdomainName.DomainName.org)？

我想将带有子域的 url 重定向到主域；所以url“subdomainName.DomainName.org”应该重定向到“DomainName.org”，我的子域名不固定。子域将分配给每个用户。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-25T13:34:57.760

它`subdomain`是 DNS 服务器的一部分，与 IIS 设置一起工作。

因此，您不能从 asp.net 更改 DNS 设置，也不能更改 IIS 设置。当提供商允许您添加额外的子域时，实际上所做的是在 DNS 条目上创建新条目，然后将映射添加到 IIS，以便子域查看您的站点。如果您的提供商没有为您提供添加子域的工具，您也可以编辑 DNS 条目，然后您不能从 asp.net 添加它们。

`Application_BeginRequest`如果您可以添加子域，那么您可以使用`redirect`或 重写路径来操作您要在服务器上显示的内容并在 global.asax 上显示。例如：

```
protected void Application_BeginRequest(Object sender, EventArgs e)
{   
    var SubDomain = GetSubDomain(HttpContext.Current.Request.Url.Host);

    if(!String.IsNullOrEmpty(SubDomain) && SubDomain != "www")
    {
       Response.Redirect("www.yourdomain.com", true);
       return;
    }
}

// from : http://madskristensen.net/post/Retrieve-the-subdomain-from-a-URL-in-C.aspx
private static string GetSubDomain(Uri url)
{
  string host = url.Host;
  if (host.Split('.').Length > 1)
  {
    int index = host.IndexOf(".");
    return host.Substring(0, index);
  }

  return null;
} 
```

类似的帖子：
[如何将所有对特定域的请求重新映射到 ASP.NET 中的子目录](https://stackoverflow.com/questions/11491454/how-to-remap-all-the-request-to-a-specific-domain-to-subdirectory-in-asp-net/11492451#11492451)
[将网页请求重定向到默认子文件夹](https://stackoverflow.com/questions/11393441/redirect-web-page-requests-to-a-default-sub-folder/11393756#11393756)
[如何在不硬编码其名称的情况下引用主域？](https://stackoverflow.com/questions/9961996/how-to-refer-to-main-domain-without-hard-coding-its-name)
[从 C# 中的 URL 检索子域](http://madskristensen.net/post/Retrieve-the-subdomain-from-a-URL-in-C.aspx)

# xcode - xcode，在退出序列时重新加载表视图

> ID：14030901
> 
> 赞同：1
> 
> 时间：2012-12-25T13:06:10.217
> 
> 标签：xcode, tableview, segue

我试图在退出序列后重新加载表视图的值。过程是：我从配置文件选择视图手动执行序列，添加一个新的配置文件名称，返回到配置文件选择视图。然后我想重新加载表格视图添加新的配置文件名称。它运行代码正常（与场景中的原始条目相同的代码），但我似乎无法获得***numberOfRowsInSection***和***numberOfRowsInSection***的本机方法来重新填充表视图。实际上，在新的配置文件名称更新之前，我必须离开屏幕并重新输入它。有什么想法吗？

* * *

//** 手动执行序列

```
-(IBAction)buttonAddNewProfile:(id)sender
{
    // creating object for profile selection screen
    UIStoryboard *ProfileSelectionStoryboard=[UIStoryboard storyboardWithName:@"MainStoryboard" bundle:nil];

    // creating object for add new profile storyboard
    AddNewProfileViewController *addnewprofileVC=[ProfileSelectionStoryboard instantiateViewControllerWithIdentifier:@"Add New Profile"];

    // setting the transition style
    addnewprofileVC.modalTransitionStyle=UIModalTransitionStylePartialCurl;

    // performing the segue
    [self presentViewController:addnewprofileVC animated:YES completion:nil];

    // performing new table view load on return from new profile
    [self loadUsers];
} 
```

//** 加载新配置文件名称的函数。

```
-(void)loadUsers
{
    // retreiving the users from the database
    SQLiteFunctions *sql = [[SQLiteFunctions alloc] init];

    // testing for successful open
    if([sql openDatabase:@"users"])
    {
        // setting query statement
        const char *query = "SELECT * FROM  users;";

        // testing for that profile name existing already
        if([sql getUserRecords:query] > 0)
        {
            // initializing array
            NSMutableArray *names = [[NSMutableArray alloc] init];

            // loop through object compling an array of user names
            for(Users *ProfileUser in sql.returnData)
            {
                // adding user name to the listview array
                [names addObject:ProfileUser.user_name];
            }

            // setting table view array to local array
            tableData = names;
        }
    }
} 
```

//** 重新加载表格视图的方法

```
- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section;
{
    // returning the number of rows in the table
    return [tableData count];
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath;
{
    // setting up the table view cells for data population
    UITableViewCell *cell = nil;
    cell = [tableView dequeueReusableCellWithIdentifier:@"MyCell"];

    // testing for cell parameters
    if (cell == nil)
    {
        // setting up cloned cell parameters
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:@"MyCell"];
    }

    // setting cell values to the array row value
    cell.textLabel.text = [tableData objectAtIndex:indexPath.row];

    // returning the current row label value
    return cell;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-28T18:52:41.117

您在这里有几个不同的选择：

1）最简单的方法是在每次视图控制器即将显示其视图时简单地重新加载表：

```
- (void)viewWillAppear:(BOOL)animated {
    [super viewWillAppear:animated];
    [self.tableView reloadData];
} 
```

但不利的一面是，**每次**显示视图时都会执行此操作，即使您不一定需要重新加载数据。

2）如果您使用故事板并针对 iOS 6+，那么当您从添加配置文件视图控制器返回时，您可以使用展开 segue 来调用视图控制器上的特定方法。有关更多信息，请参阅此 SO 问题/答案：[有人知道使用 Xcode 4.5 编辑情节提要时使用新的退出图标是什么吗？](https://stackoverflow.com/questions/12569316/does-anyone-know-what-the-new-exit-icon-is-used-for-when-editing-storyboards-usi)

3) 如果您针对的是旧版本的 iOS 或不使用情节提要，那么您可以创建一个协议，其中包含一个在添加新配置文件时应该调用的方法，并且您可以在调用该方法时重新加载数据。这里有很多关于如何做到这一点的问题（比如[dismissModalViewController AND pass data back](https://stackoverflow.com/questions/6203799/dismissmodalviewcontroller-and-pass-data-back)，它显示了如何传递数据，但你可以做同样的事情来调用一个方法）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-29T02:56:24.410

这是 lnafzinger 在上述评论中的实际答案。再次感谢。

```
- (void)viewWillAppear:(BOOL)animated
{
    [super viewWillAppear:animated];
    [self.tableView reloadData];
} 
```

> 我花了一点时间才弄清楚这一点，但这是因为您使用的是 UIModalTransitionStylePartialCurl modalTransitionStyle。我猜他们不会调用它，因为它并没有完全离开屏幕。如果您使用不同的样式（如默认样式），那么它将调用 viewWillAppear。如果您想坚持下去，那么您可能应该使用其他方法之一。– 尔纳夫齐格

# linux - 如何在 Linux 手册页数据库中添加条目

> ID：14030904
> 
> 赞同：16
> 
> 时间：2012-12-25T13:06:18.287
> 
> 标签：linux, manpage

由于执行 make 和 make install 命令在我的 ubuntu 12.04 上安装 mongoose Web 服务器，我有一个名为 mongoose.1 的 mongoose Web 服务器手册页。但是，手册页条目不在手册页数据库中。

当我这样做时在我的命令行上输出：“man mongoose”

```
akshay@akshay-Inspiron-N5010:~/mongoose$ man mongoose
  No manual entry for mongoose
  See 'man 7 undocumented' for help when manual pages are not available. 
```

我知道存储它们的所有手册页的路径是：-

```
/usr/local/share/man/ 
```

我提前感谢您的回答。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-12-25T13:19:50.793

安装手册页的目录应该列在环境变量中`/etc/manpath.config`或`MANPATH`环境变量中。例如，如果手册页是

```
/opt/mongoose/share/man/man1/mongoose.1 
```

然后你可以使用

```
MANPATH=/opt/mongoose/share/man man mongoose 
```

（或更改`MANPATH`您`.bashrc`或类似的外壳启动文件）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-25T13:55:22.300

找到了一个解决方案：我们只需将 mongoose.1 （这是一个 man 文件）复制到文件夹 /usr/share/man/man1/

akshay@akshay-Inspiron-N5010:~/mongoose$ sudo cp mongoose.1 /usr/share/man/man1/

在 /usr/share/man/ 中有从 man1 到 man8 的文件夹。我只是猜测我的 mongoose.1 手册页扩展名是“1”，所以我将其复制到 man1 文件夹中。我说得对吗？

完成此步骤后， man mongoose 会成功显示手册页条目。

# javascript - 如何在路径上定位图像

> ID：14030910
> 
> 赞同：0
> 
> 时间：2012-12-25T13:06:31.200
> 
> 标签：javascript, html, svg

对于文本，我可以使用 textpath，但是如何将图像定位在路径上或特定的不规则形状（例如三角形/圆形）中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-25T13:23:01.290

我建议使用`getPointAtLength(length)`which 返回一个表示位置的对象。

这是 API 文档：[SVG getPointAtLength 文档](http://www.w3.org/TR/SVG/paths.html#__svg__SVGPathElement__getPointAtLength)

有了这个，您将能够创建您想要的任何路径形状。然后执行一个 for 循环，在其中计算沿路径的点，以便在每次迭代中增加长度。

```
 var pos;
  for (var i = 0, len = 0; i < 10; i++, len+=10){
    pos = yourPath.getPointAtLength(len);
    //Now set your items position to pos.x, pos.y
  } 
```

# phpmyadmin - 新添加的列不可见

> ID：14030915
> 
> 赞同：4
> 
> 时间：2012-12-25T13:06:56.220
> 
> 标签：phpmyadmin, xampp

我在本地主机上使用 xampp。我创建了一个表，然后对其进行了更改，一段时间后又添加了一列。新添加的列在我浏览表格数据的时候是不可见的，但是当我看到表格结构的时候是这样的。为什么我在表格数据中看不到？

我正在使用 xampp 的便携包。此外，有关该列的查询运行良好。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-05-08T01:27:30.537

我有办法：

*   导出浏览时未显示特定列的表
*   放下桌子
*   导入它

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-05T22:41:23.077

我有一个类似的问题。我转到“操作”选项卡并将表复制到另一个数据库，然后我可以删除原始表并复制回来，或者只是切换代码。我将我的数据库连接全部设置为一个变量，因此更改代码对我个人来说非常容易。希望能帮助到你！（再次发布此内容，以防其他人遇到此问题，因为这对我来说确实很麻烦。）

# ruby-on-rails - 为什么我的表单无法正确提交？

> ID：14030916
> 
> 赞同：0
> 
> 时间：2012-12-25T13:06:57.833
> 
> 标签：ruby-on-rails, ruby-on-rails-3, routing

我有用户模型和评论模型使用**acts_as_commentable_with_threading**
我试图将评论功能放在每个用户的显示页面上。
但是当我尝试提交表单时，它显示路由错误。
为什么是这样？

**错误**

```
Routing Error
No route matches [POST] "/user/john/add_comment" 
```

**模型/用户.rb**

```
acts_as_commentable 
```

**意见/用户/show.html.erb**

```
<%= render 'comment', :user => @user %> 
```

**意见/用户/_comment.html.erb**

```
<table>
  <tr>
    <th>ID</th>
    <th>Title</th>
    <th>Body</th>
    <th>Subject</th>
    <th>Posted by</th>
    <th>Delete</th>
  </tr>

<% @user.comment_threads.each do |comment| %>
  <tr>
    <td><%= comment.id %></td>
    <td><%= comment.title %></td>
    <td><%= comment.body %></td>
    <td><%= comment.subject %></td>
    <td><%= comment.user.user_profile.nickname if comment.user.user_profile %></td>
    <td><%= button_to 'destroy', comment, confirm: 'Are you sure?', :disable_with => 'deleting...', method: :delete %></td>
    </tr>
<% end %>
</table>

<%= form_for @user, :html => { :class => 'form-horizontal' } do |f| %>

    <div class="field">
      <%= f.label :body %><br />
      <%= f.text_field :body %>
    </div> 

  <div class="actions">
    <%= f.submit %>
  </div>

<% end %> 
```

**路线.rb**

```
get "user/:id/add_comment" => 'users#add_comment', :as => :add_comment_user
get "user/:id/delete_comment" => 'users#delete_comment', :as => :delete_comment_user 
```

**users_controller.rb**

```
def add_comment
    @user = User.find_by_username(params[:id])
    @user_who_commented = current_user
    @comment = Comment.build_from( @user, @user_who_commented.id, params[:users][:body] )
    @comment.save
    redirect_to :controller => 'users', :action => 'show', :id => params[:users][:id]
    flash[:notice] = "comment added!"
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-25T13:33:39.217

因为您的路线是 GET，而表单是 POST。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-25T13:53:11.243

它需要是一个帖子路线。此外，您要发布到 user/:name/add_comment，您应该发布用户 ID。您可以使用该名称，但这需要在所有用户中都是唯一的。

这条线也是错误的。

```
@user = User.find_by_username(params[:id]) 
```

您可以`params[:username]`通过`find_by_id`

# jquery - IE 9 中的宽度问题，而它在 chrome、IE 7 和 8 中运行良好

> ID：14030917
> 
> 赞同：2
> 
> 时间：2012-12-25T13:06:58.830
> 
> 标签：jquery, html, css, internet-explorer, width

JSFIddle 在这里[http://jsfiddle.net/cGadk/](http://jsfiddle.net/cGadk/)

在**Chrome**和**IE 7 & 8中**

![铬视图](../Images/22cbfbd54d2fff8583d38a3e1d3f63df.png)

在**IE9中**

![IE9 视图](../Images/6286fb72b67afd0d5ae712276d3f729b.png)

**HTML**

```
<div class="container">
<div class="column">
    <a href="#">1</a>
    <a href="#">2</a>
    <a href="#">3</a>
    <a href="#">4</a>
</div>
<div class="column">
    <a href="#">5</a>
    <a href="#">6</a>
    <a href="#">7</a>
    <a href="#">8</a>
</div>
<div class="column">
    <a href="#">9</a>
    <a href="#">10</a>
    <a href="#">11</a>
    <a href="#">12</a>
</div>
<div class="column">
    <a href="#">13</a>
    <a href="#">14</a>
    <a href="#">15</a>
    <a href="#">16</a>
</div>
<div class="column">
    <a href="#">13</a>
    <a href="#">14</a>
    <a href="#">15</a>
    <a href="#">16</a>
</div>

<div class="column">
    <a href="#">17</a>
    <a href="#">18</a>
    <a href="#">19</a>
    <a href="#">10</a>
</div> 
```

​</p>

**CSS**

```
a{
font-size:13px;
font-family : arial;
display : block;
border:1px solid black;
padding : 5px;
}

.column{
    float:left;
} 
```

**JS**

```
(function($) {
   var width = 0;

   $('.column').each(function(i, el){
    width += $(el).width();
   });

    $('.container').width(width);
})(jQuery); 
```

​</p>

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-25T13:18:46.987

这是`.container`div的问题。它对于 IE9 来说太小了。

如果您将 JS 代码从 更改`$('.container').width(width);`为`$('.container').width(width+10);`，它将看起来正确。

**编辑**

我在 IE9 中找到了对这个问题的很好解释和一些潜在的修复，它以[不同于 Chrome](https://stackoverflow.com/a/7997432/1916110)问题的方式呈现 CSS 表。

# monitoring - 监控进程的消息队列

> ID：14030922
> 
> 赞同：1
> 
> 时间：2012-12-25T13:07:40.450
> 
> 标签：monitoring, message-queue

有人知道一个好的免费程序可以帮助我监控进程消息队列中排队的 Windows 消息吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-25T16:12:07.473

WindowDetective 似乎可以胜任！
[http://sourceforge.net/projects/windowdetective/](http://sourceforge.net/projects/windowdetective/)

# vb.net - InvalidArgument=“5”的值对“索引”无效。

> ID：14030926
> 
> 赞同：1
> 
> 时间：2012-12-25T13:07:57.490
> 
> 标签：vb.net

嗯，祝大家圣诞快乐！

在编写聊天室程序时，我遇到了以下问题。我正在向列表视图添加一个项目，但是当我尝试向最后一个子项目添加文本时，我收到错误 InvalidArgument=Value of '5' is not valid for 'index'。

我做了以下事情：

```
msgbox(listview1.subitems.count()) 
```

并且返回 5，所以我假设这意味着我总共有 6 列（计数从 0 - 5 开始，而不是 1 - 5。

可能是什么问题呢？其余的代码是：

```
Sub AddClient(ByVal client As connection, ByVal strings() As String)
    Dim l As New ListViewItem(strings)
    l.ImageIndex = GetFlag(strings(1).ToLower)
    l.Tag = client
    numcon1.Text += 1
    l.SubItems(5).Text = "test phrase"
    l.SubItems(4).Text = strings(7)
    addtoconsole(strings(3) & " ~ " & strings(1) & " Has Connected.")
    ListView1.Items.Add(l)
    If audiocon = "True" Then
        My.Computer.Audio.Play("newuser.wav", AudioPlayMode.Background)
    Else
    End If
    If notifcon = "True" Then
        NotifyIcon1.ShowBalloonTip(3000, "A friend is online!", strings(3) & " ~ " & strings(1), ToolTipIcon.Info)
    End If
End Sub 
```

非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-25T13:09:23.697

> 返回 5，所以我假设这意味着我总共有 6 列（计数从 0 - 5 开始，而不是 1 - 5。

不，这意味着总共 5 列。从索引 0 开始，以索引 4 结束。

# sql - SQL 查找和插入

> ID：14030927
> 
> 赞同：0
> 
> 时间：2012-12-25T13:08:04.403
> 
> 标签：sql, sql-server, stored-procedures

我有客户的名字和医生的名字。我想从数据库中获取 ID 并将 ID 插入表中。

```
CREATE PROCEDURE AddMedicalCard
@Client nchar,
@Doctor nchar
AS
BEGIN
    SELECT Clients.[ClientCode] AS [Code]
    Into #NewClientCode
    FROM Clients
    WHERE Clients.[ClientName]=@Client

    SELECT Personal.[DoctorCode] AS [Code]
    Into #NewDoctorCode
    FROM Personal
    WHERE Personal.[DoctorName]=@Doctor

    INSERT INTO MedicalCard 
        VALUES (#NewClientCode.[Code].First, #NewDoctorCode.[Code].First)

    DROP TABLE #NewClientCode
    DROP TABLE #NewDoctorCode
END
GO 
```

错误：

> *无法绑定多部分标识符“#NewDoctorCode.Code.First”。
> 无法绑定多部分标识符“#NewClientCode.Code.First”。列名或提供的值的数量与表定义不匹配。*

医疗卡表设计：

```
RecordingCode(Key), ClientCode, DoctorCode 
```

和其他 5 个可为空的列。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-25T13:14:25.213

错误信息说明了一切。没有这样的事情`#NewDoctorCode.Code.First`。您的工作可以轻松干净地完成，如下所示。

**注意：**通过名称获取客户代码和医生代码不是很正确，因为可能有超过 1 个同名的客户和医生。

```
--declare two variables 
declare @clientCode varchar(50), @doctorCode varchar(50)

--assign clientCode
SELECT TOP 1   @clientCode = Clients.[ClientCode]
FROM Clients
WHERE Clients.[ClientName]=@Client

--assign doctorCode
SELECT TOP 1  @doctorCode = Personal.[DoctorCode]
FROM Personal
WHERE Personal.[DoctorName]=@Doctor

--finally insert them to MedicalCard table
INSERT INTO MedicalCard (clientCodeColumn,doctorCodeColumn) --Column Names
VALUES (@clientCode,@doctorCode) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-25T13:14:12.763

做这样的事情

```
DECLARE @i INT;
SELECT @i = id FROM youtable;
BEGIN
    Insert into tablename(column1) values(@i)
END 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-25T13:15:07.407

试试这个，你应该使用变量而不是表。如果你使用表，那么你应该使用`insert into table select col`

```
DECLARE @NewClientCode int
DECLARE @NewDoctorCode int

SELECT @NewClientCode = Clients.[ClientCode]
FROM Clients
WHERE Clients.[ClientName]=@Client

SELECT @NewDoctorCode = Personal.[DoctorCode]
FROM Personal
WHERE Personal.[DoctorName]=@Doctor

INSERT INTO MedicalCard 
    VALUES (@NewClientCode, @NewDoctorCode) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-25T13:16:46.160

尝试使用此 SP：

```
CREATE PROCEDURE AddMedicalCard
@Client nchar,
@Doctor nchar
AS
BEGIN

    INSERT INTO MedicalCard 
        VALUES (
                SELECT TOP 1 Clients.[ClientCode]
                FROM Clients
                WHERE Clients.[ClientName]=@Client,

                SELECT TOP 1 Personal.[DoctorCode]
               FROM Personal
               WHERE Personal.[DoctorName]=@Doctor
              )

END
GO 
```

# opengl - 如何在openGL中实现关节和骨骼？

> ID：14030929
> 
> 赞同：9
> 
> 时间：2012-12-25T13:08:24.123
> 
> 标签：opengl

我正在推出自己的openGL框架，并且知道如何绘制3d对象......等等......

但是您如何定义可能具有关节的 3d 对象之间的关系？或者您如何将 3d 对象定义为“骨骼”？有什么好的资源吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-25T13:27:41.450

由于 OpenGL 只是一个图形库而不是 3D 建模框架，因此定义和使用“骨骼”的任务就落在了您身上。

实际实现它有不同的方法，但总体思路是：

您将模型的每个部分都视为骨骼（例如头部、躯干、小腿、大腿等）。
每个骨骼都有一个与之相连的父节点（例如，左下腿的父节点是左上腿）。
因此，每根骨头都有许多孩子。

![在此处输入图像描述](../Images/a2cc68c19e691dd070f7868343298dc0.png)

现在您将每个骨骼的位置定义为与父骨骼的相对位置。显示骨骼时，您现在将其相对位置与父骨骼的相对位置相乘以获得绝对位置。

形象化：
把它想象成一个洋娃娃。当你抓住娃娃的手臂并移动它时，手的相对位置（和旋转）不会改变。它的绝对位置会改变，因为你已经移动了它的父母之一。

当尝试骨骼动画时，我从这个链接中学到了大部分内容：http://content.gpwiki.org/index.php/OpenGL:Tutorials: [Basic_Bones_System](http://content.gpwiki.org/index.php/OpenGL:Tutorials:Basic_Bones_System)

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-12-25T13:23:47.363

> 但是您如何定义可能具有关节的 3d 对象之间的关系？

OpenGL 不关心这些事情。我不是纯绘图 API。因此，您可以发挥自己的创造力并自己定义此类结构。骨骼动画的常用方法是使用骨骼/绑定系统，其中每个骨骼都有一个方向（由四元数或 3×3 矩阵表示）和一个长度以及进一步附加到它的骨骼列表，即某种树。

我将这个结构定义为

```
typedef float quaternion[4];

struct Bone {
    quaternion orientation;
          float length;

            int  n_subbones;
           Bone *subbones;
}; 
```

除此之外，您还需要从钻机开始的位置进行支点。我会这样做

```
typedef float vec3[3];

struct GeomObjectBase {
           vec3 position;
    quaternion orientation;
};

struct BoneRig {
    struct GeomObjectBase gob;

    struct Bone pivot_bone;
} 
```

接下来，您需要一些函数迭代此结构，从中生成矩阵调色板，以便将其应用于模型网格。

> 注意：我正在使用 freeglut

完全无关

# c++ - 如何在启动时运行 Qt 应用程序？

> ID：14030932
> 
> 赞同：1
> 
> 时间：2012-12-25T13:08:49.980
> 
> 标签：c++, qt, startup, qsettings

> **可能重复：**
> [在启动时运行 qt 应用程序](https://stackoverflow.com/questions/4144222/running-a-qt-application-at-startup)

如何在启动时运行 qt 程序，以便用户根本看不到桌面？我正在 linux 中构建我的程序，我想将它分发给 linux 用户。我想将该代码添加到我的应用程序中，因为客户对 linux 没有任何了解。我发现`QSettings`可以做到这一点，是真的吗？怎么样`QService`？我们可以使用这样的简单代码吗？

```
QSettings  a;
A.setpath(IniFormat,SystemScope,/etc/xdg) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-25T16:55:10.090

QSettings 与此零相关，QService 适用于 Symbian 设备。其实你的问题与Qt无关。

您需要做的是在用户的启动文件夹中放置一个 *.desktop 快捷方式或指向应用程序的链接。看：

[http://standards.freedesktop.org/autostart-spec/autostart-spec-latest.html](http://standards.freedesktop.org/autostart-spec/autostart-spec-latest.html)。

例如，如果我想`/opt/myapp/myapp_executable`在登录时启动应用程序，我将创建一个`myapp.desktop`包含以下内容的文件：

```
[桌面入口]
Exec=/opt/myapp/myapp_executable

```

并将其放在我的 ~/.config/autostart 目录中。

如果您希望在登录时为每个用户执行它，那么您可以将它放在 /etc/xdg/autostart/. 但同样，请检查 XDG 站点，因为如果设置了覆盖默认值的 XDG 环境变量，则目录可能会有所不同。

您的问题确实属于[http://superuser.com](http://superuser.com)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-25T16:55:22.310

如果您使用的是 linux，请使用`cron`启动程序，添加如下内容`crontab`：

```
@reboot /path/to/program 
```

或在用户登录时启动它，附加`/path/to/program`到`~/.bashrc`或`~/.bash_profile`

# python - 为什么一个目录是python系统路径中另一个目录的子目录？

> ID：14030935
> 
> 赞同：1
> 
> 时间：2012-12-25T13:09:07.720
> 
> 标签：python, recursion, import, path, sys

我的 sys.path 如下所示：

```
/homel/ychao/python/python_lib
/usr/lib64/python27.zip
/usr/lib64/python2.7
/usr/lib64/python2.7/plat-linux2
/usr/lib64/python2.7/lib-tk
/usr/lib64/python2.7/lib-old
/usr/lib64/python2.7/lib-dynload
/usr/lib64/python2.7/site-packages
/usr/lib64/python2.7/site-packages/PIL
/usr/lib64/python2.7/site-packages/gst-0.10
/usr/lib64/python2.7/site-packages/gtk-2.0
/usr/lib64/python2.7/site-packages/wx-2.8-gtk2-unicode
/usr/lib/python2.7/site-packages
/usr/lib/python2.7/site-packages/setuptools-0.6c11-py2.7.egg-info
/usr/lib/python2.7/site-packages/IPython/extensions 
```

我注意到有一些目录都是子目录/usr/lib64/python2.7，怎么会这样？当我删除所有子目录并使 sys.path 像这样：

```
/homel/ychao/python/python_lib
/usr/lib64/python2.7
/usr/lib/python2.7/site-packages 
```

我之前可以导入的一些包在修改后会失败。所以这意味着“导入”不知道递归地找到合适的包？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-25T13:13:00.963

> 所以这意味着“导入”不知道递归地找到合适的包？

这是正确的。[文档在`sys.path`](http://docs.python.org/2/library/sys.html#sys.path)任何地方都没有提到递归。

事实上，如果模块解析是递归的，你会得到令人困惑的行为。假设`/usr/lib/python2.7/site-packages/ham`在搜索路径上，并且您有文件

```
/usr/lib/python2.7/site-packages/ham
/usr/lib/python2.7/site-packages/ham/ham/util.py 
```

你会做`import util`的。如果没有`util.py`或`util/__init__.py`直接在搜索路径上找到，则递归处理将导致`ham.util`以错误的名称导入，从而破坏 Python 的包/模块名称空间。

# playframework-2.0 - ebean和play框架中的复合键

> ID：14030937
> 
> 赞同：4
> 
> 时间：2012-12-25T13:09:08.373
> 
> 标签：playframework-2.0, ebean

我刚刚开始使用 Play Framework。完成教程（涵盖基本功能）后，我尝试在数据库和游戏之间建立连接。我的一个关系有模式：

```
CREATE  TABLE IF NOT EXISTS `shop`.`CatPath` (
  `parentC` INT NOT NULL ,
  `childC` INT NOT NULL ,
  `depth` INT NOT NULL ,
  PRIMARY KEY (`parentC`, `childC`) 
  ) 
```

所以我建立了模型的类：

```
@Entity
public class CatPath extends Model {

@EmbeddedId 
public CatPathKey key;
public Long depth;

public class CatPathKey {

        public Long parentC;
        public Long childC;
}   

public static Finder<CatPathKey, CatPath> find = new Finder<CatPathKey, CatPath>(CatPathKey.class, CatPath.class); 
```

编译后我得到异常：

```
PersistenceException: Could not find BeanDescriptor for class models.CatPath$KatPathKey. Perhaps the EmbeddedId class is not registered? 
```

我不知道问题出在哪里，当我按照教程进行操作时，一切正常。我的代码和教程的唯一区别是关键：我有复合键，在教程中只有一列是关键。为什么在教程中不需要“注册课程”？我想，它是自动注册的，但为什么现在用复合键，它不是？

我试图找到一些信息，我发现：[http](http://wiki.eclipse.org/EclipseLink/UserGuide/JPA/Basic_JPA_Development/Entities/Ids/EmbeddedId) ://wiki.eclipse.org/EclipseLink/UserGuide/JPA/Basic_JPA_Development/Entities/Ids/EmbeddedId 这个xml代码是'类注册'？在 Play 框架教程和详细主题中没有提到 xml，我没有对模型的类做任何事情，一切正常。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-25T13:33:42.610

您必须在您的班级`@Embeddable`下添加注释：`CatPathKey`

```
@Embeddable
public class CatPathKey {

        public Long parentC;
        public Long childC;
} 
```

# sql - 在多用户 sql 数据库中保存用户所做更改的跟踪

> ID：14030940
> 
> 赞同：2
> 
> 时间：2012-12-25T13:09:34.210
> 
> 标签：sql, database, tsql, database-design

我正在设计一个关系数据库。它有几个表，并且在应用程序级别有多个用户。我需要知道对某个表的某条记录进行了更改，由哪个用户、哪个时间以及实际更改了什么。有一个用于保存用户信息的表，该表也包含在此行为中。

我应该如何在 SQL 数据库设计中做到这一点，以便让用户看到他们中的哪一个进行了这些更改？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-25T18:43:15.297

您想要的是类似 Wiki 的版本控制。基本上，对于您要保留版本的每个表，您至少需要创建该表的副本，其中包含您提到的添加的字段（用户 ID，添加时）。只要您只需要跟踪*更改*，这可能就是它的全部内容。然后，在进行编辑时，您只需在该复制表中创建当前行的备份，并将新行放入实际表中。通过这种方式，您可以（希望）添加版本控制，而无需触及现有的演示代码。

如果您需要记录其他操作，例如创建新行和删除，它会变得更加棘手。

如果您需要代码示例，只需查看一些 Wiki 的引擎盖，例如[https://mediawiki.org/](https://mediawiki.org/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-26T00:04:30.063

For starters you can look at sql server version tracking mechanisms (row versioning or row changes). After that you can look at sql server audit features. I think sql server audit would be the best for your needs.

On the other hand, if you want to make ad-hok versioning then YOU MUST NOT go to triggers. Imagine, you must create triggers for all tables for inserts, updates and deletes. This IS bad practice.

I think ad-hoc versioning should be avoided (degradation in performance and difficult to support) but in case it cannot be avoided, I would surely use CONTEXT_INFO in order to track current user and then I would try to create something that would read the schema of the table, I would get changes by using sql server change tracking mechanisms and store that in a tablename, changeduser, changedtime, column, prevValue, newValue style. I would not replicate each and every table for the changes.

# iphone - 从 Detailview 中删除 Tableview 的行

> ID：14030944
> 
> 赞同：1
> 
> 时间：2012-12-25T13:10:22.383
> 
> 标签：iphone, ios, uitableview

我在我的详细视图中的应用程序中使用了故事板，因为`UITableView`我将 tableview 传递给详细视图，以便能够根据某些操作删除此行，但给我以下错误

```
*** Terminating app due to uncaught exception 'NSInternalInconsistencyException', 
reason: 'Invalid update: invalid number of rows in section 0\.  
The number of rows contained in an existing section after the update (4) must be equal to the  
number of rows contained in that section before the update (4),
plus or minus the number of rows inserted or deleted from that section (0 inserted, 1 deleted) 
and plus or minus the number of rows moved into or out of that section (0 moved in, 0 moved out).' 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-25T13:28:14.387

如果删除表中的最后一行，UITableView 代码预计剩余 0 行。它调用您的`UITableViewDataSource`方法来确定还剩下多少。由于您有一个“无数据”单元格，它返回 1，而不是 0。因此，当您删除表中的最后一行时，请尝试调用`-insertRowsAtIndexPaths:withRowAnimation:`以插入您的“无数据”行。

**你需要做的是：**

```
// tell the table view you're going to make an update
[tableView beginUpdates];
// update the data object that is supplying data for this table
// ( the object used by tableView:numberOfRowsInSection: )
[dataArray removeObjectAtIndex:indexPath.row];
// tell the table view to delete the row
[tableView deleteRowsAtIndexPaths:indexPath 
           withRowAnimation:UITableViewRowAnimationRight];
// tell the table view that you're done
[tableView endUpdates]; 
```

（根据这个[链接](http://timroadley.com/2012/02/14/core-data-basics-part-3-editing-and-deleting/)，你应该避免`NSInternalInconsistencyException`。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-25T13:27:19.847

添加或删除行时，您必须更新数据源以保持一致性。删除该行后，您的数据源似乎没有更新。为了帮助您，您的数据源方法和用于删除行的代码将很有用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-25T14:05:04.070

您的日志意味着**4-1 = 3，而不是 4**。

返回计数时，您必须考虑已删除的行

```
- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section; 
```

你应该有一个包含你的行数的变量或数组，例如

```
- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section {
    return self.cellsCount;
}

// somewhere else

[tableView beginUpdates];
self.cellsCount--; // here is an important line of code
[tableView deleteRowsAtIndexPaths:indexPath withRowAnimation:UITableViewRowAnimationAutomatic];
[tableView endUpdates]; 
```

# java - android 2.2 中的 String.replace 性能问题

> ID：14030945
> 
> 赞同：1
> 
> 时间：2012-12-25T13:10:46.447
> 
> 标签：java, android

我正在编写一个加载 HTML 页面并从中获取特定数据的 android 应用程序。我已经使用 android 4.0 对其进行了测试，一切都很好。今天我尝试在 android 2.2 (froyo) 上运行它，却意外地遇到了严重的性能泄漏。我的代码如下：

```
 ArrayList<News> news = new ArrayList<News>();
    HttpPost httpPost = new HttpPost(BASE_URL
            + "news_view.php");
    List<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>(1);
    nameValuePairs.add(new BasicNameValuePair("start", String
            .valueOf(start)));
    httpPost.setEntity(new UrlEncodedFormEntity(nameValuePairs, HTTP.UTF_8));
    HttpResponse response = getHttpClientInstance().execute(httpPost);
    HtmlCleaner cleaner = new HtmlCleaner();
    String s = EntityUtils.toString(response.getEntity(), HTTP.UTF_8);
    TagNode root = cleaner.clean(s);
    TagNode[] list = root.getAllElements(false)[1].getAllElements(false);
    if (list.length == 0)
        throw new ParsingException();
    for (int i = 0; i < list.length; i++) {
        String header = list[i].getElementsByName("h3", true)[0].getText()
                .toString();
        TagNode footer = list[i].getElementsByName("h3", true)[1];

        String date = footer.getElementsByName("span", true)[0].getText()
                .toString();
        String author = footer.getElementsByName("a", true)[0].getText()
                .toString();
        String target = footer.getElementsByName("a", true)[1]
                .getAttributeByName("href");
(!)     String text = list[i].getText().toString().replace(header, "")
                .replace(footer.getText().toString(), "")
                .replace('\n', ' ').replace("&nbsp;", " ").trim();
        header = header.replace("&nbsp;", " ").trim();
        date = date.replace("&nbsp;", " ").trim();
        text += "\n" + date;
        News n = new News(header, text, target, author, date,
                News.NEWS_PROJECT);
        news.add(n);
    } 
```

我的应用程序在标记为的线上冻结`(!)`并且不会继续。是的，我知道 String.replace 是邪恶的，但我没想到我的应用程序会如此糟糕，因为 android ICS 没有滞后。谁能解释我发生了什么？

**编辑。**`(!)`我已经用以下代码 替换了标记的行：

```
String text0 = list[i].getText().toString();
String text1 = text0.replace(header, "");
String text2 = text1.replace(footer.getText().toString(), "");
String text3 = text2.replace('\n', ' ');
String text4 = text3.replace("&nbsp;", " ");
String text5 = text4.trim(); 
```

没有改变。我的应用程序停留在第一次替换 (text1) 处。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T15:39:26.650

Android 2.2 中 String.replace() 的实现似乎存在错误。我找不到 Android 2.2 的确切源代码，但我设法找到了 Android 2.1 的源代码。replace方法的实现是：

```
public String replace(CharSequence target, CharSequence replacement) {
    if (target == null) {
        throw new NullPointerException("target should not be null");
    }
    if (replacement == null) {
        throw new NullPointerException("replacement should not be null");
    }
    String ts = target.toString();
    int index = indexOf(ts, 0);

    if (index == -1)
        return this;

    String rs = replacement.toString();
    StringBuilder buffer = new StringBuilder(count);
    int tl = target.length();
    int tail = 0;
    do {
        buffer.append(value, offset + tail, index - tail);
        buffer.append(rs);
        tail = index + tl;
    } while ((index = indexOf(ts, tail)) != -1);
    //append trailing chars
    buffer.append(value, offset + tail, count - tail);

    return buffer.toString();
} 
```

`target`如果和`replacement`都是空字符串，则 do-while 循环不会终止。两者`index`和`tail`都初始化为零。`indexOf(ts, tail)`返回 的值`tail`，该值为零。`tail = index + tl`不会增加`tail`，因为`index`和`tl`都为零。

这解释了观察到的行为。我假设由于 user1256821 在 Android 2.2 中观察到相同的行为，所以这个错误仍然存​​在于 Android 2.2 中。

# solr - Solr：文档提升 - 可以在查询时禁用吗？

> ID：14030950
> 
> 赞同：2
> 
> 时间：2012-12-25T13:11:20.457
> 
> 标签：solr, lucene

如果我在索引时为文档提供了提升值，我可以使用查询参数禁用/忽略该提升值吗？

我有一种类型的查询，我明确地想忽略文档提升值，但其余的应该使用它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-25T17:09:34.380

您可以定义具有不同提升的多个请求处理程序，并根据查询调用相同的请求处理程序。
在查询 Solr 之前，需要在客户端完成此处理。

# java - Bootstrap 配置是否必须在 Eclipse 中运行动态项目？

> ID：14030958
> 
> 赞同：0
> 
> 时间：2012-12-25T13:13:06.277
> 
> 标签：java, eclipse, jakarta-ee

为了在**eclipse**中运行动态项目，我已经在项目类路径中添加了所需的 jars，一些 jars 路径是从其他打开的项目中引用的。即使它是 throw **class not found**错误。当我把这些罐子放在引导条目中时，它工作正常。

所以我的问题是：

1) Bootstrap 配置是否必须运行动​​态项目？

2）为什么在运行服务器时找不到类路径？

3) 如何在不配置 Bootstrap 条目的情况下运行我的项目？

![在此处输入图像描述](../Images/7771d7b7295357b3e6b09706e1972caa.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-25T13:20:40.700

它不能放在构建类路径中，既不能放在*User entries*下，也不能放在*Bootstrap entries*下。

它必须放在`WebContent/WEB-INF/lib`您的 webapp 项目的目录中。Eclipse 会检测到它们，自动将它们添加到构建路径中，并自动将它们包含到已*部署*`WEB-INF/lib`的 web 应用程序的目录中，因为 Java EE 容器会在那里查找 Java EE web 应用程序所需的库。

# ruby-on-rails - Facebook 登录后重定向到设备用户表单

> ID：14030961
> 
> 赞同：1
> 
> 时间：2012-12-25T13:13:54.217
> 
> 标签：ruby-on-rails, ruby-on-rails-3, ruby-on-rails-3.2

我有一个用户注册表。我在其中有 facebook 登录按钮。我想从 facebook 获取信息并在用户注册表单中显示该信息。我怎样才能做到这一点？我使用`omniauth_facebook`并成功登录，但我不想登录。我想在我的用户注册表单字段中显示该 Facebook 信息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-25T13:36:15.683

您可以在下面找到一个 rails cast 帮助您管理项目中的 OpenID、twitter 和 facebook 身份验证服务：

[http://railscasts.com/episodes?utf8=%E2%9C%93&search=omniauth](http://railscasts.com/episodes?utf8=%E2%9C%93&search=omniauth)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-25T21:33:06.430

你可以使用像[koala](https://github.com/arsduo/koala)或[fb_graph](https://github.com/nov/fb_graph)这样的 gem来获取用户信息，因为你有他们的访问令牌，然后用他们的信息填写表格：

使用 fb_graph：

```
user = FbGraph::User.me(ACCESS_TOKEN).fetch 
```

然后以您的形式：

```
<form>
   <input type="text" id="first_name" value="<%= user.first_name %>">
   <input type="text" id="last_name" value="<%= user.last_name %>">
   ....
</form> 
```

这将使用用户信息填充表单，但是为什么不在使用 Facebook 登录时在回调函数中创建用户，因为无论如何您都必须登录才能获取令牌？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-26T12:44:52.590

@JasonTruluck 和 @stsd 感谢您的支持。

我这样做了，我正在使用[OmniAuth](https://github.com/plataformatec/devise)。

[https://github.com/plataformatec/devise/wiki/OmniAuth:-概述](https://github.com/plataformatec/devise/wiki/OmniAuth:-Overview)

在我的控制器中，我定义了这个

```
private

  def authentication_sign_in
    omniauth = request.env["omniauth.auth"]
    user = User.new
    user.apply_omniauth(omniauth)
    session[:omniauth] = {:firstname => user.firstname, :lastname => user.lastname, :email => user.email }
    session[:provider] = omniauth['provider']
    session[:uid] = omniauth['uid']
    redirect_to new_member_registration_url
  end 
```

**在我的注册控制器中**

```
def new
  if session[:omniauth]
    resource = build_resource(session[:omniauth])
  else
    resource = build_resource({})
  end
  respond_with resource
end 
```

# sql-server - SQL Server INSERT 时间戳插入其他内容

> ID：14030962
> 
> 赞同：2
> 
> 时间：2012-12-25T13:13:56.063
> 
> 标签：sql-server, timestamp

> **可能重复：**
> [如何从 TIMESTAMP 列中获取日期/时间信息？](https://stackoverflow.com/questions/7154742/how-do-i-get-date-time-information-from-a-timestamp-column)
> [如何将 SQL Server 的时间戳列转换为日期时间格式](https://stackoverflow.com/questions/8119386/how-to-convert-sql-servers-timestamp-column-to-datetime-format)

我正在尝试执行一个插入时间戳的简单查询。查询运行没有问题，但这是插入列而不是当前时间的内容：

```
0x00000000000007D2 
```

这是查询：

```
 INSERT INTO auctions (title, description, finish_date) 
 VALUES ('Some title', 'Some description', '05/03/2003 11:15:45') 
```

从我所读到的内容`Timestamp`已被称为的东西弃用，`Rowversion`但我在管理工作室中找不到这样的数据类型。

拍卖表：

*   `auction_id - bigint`
*   `title - nvarchar(MAX)`
*   `description - nvarchar(MAX)`
*   `start_date - timestamp`
*   `finish_date - datetime`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-25T13:15:47.937

您不能使用 Timestamp 类型来存储日期。

时间戳基本上是在单个数据库中完成的插入和更新操作的计数器，因此它对于给定数据库是本地的并且没有实时值。

为了符合您的插入语句，您应该使用 DateTime 代替 - 用于您的`start_date`和您的`finish_date`.

请参阅此链接： http: [//msdn.microsoft.com/en-us/library/ms182776 (v=sql.90).aspx](http://msdn.microsoft.com/en-us/library/ms182776(v=sql.90).aspx)

# backbone.js - 为什么backbone.js where 函数返回一个模型数组？

> ID：14030978
> 
> 赞同：3
> 
> 时间：2012-12-25T13:16:07.143
> 
> 标签：backbone.js, backbone.js-collections

当我使用该`Backbone.Collection.where`函数过滤集合时，我得到一个模型数组作为返回值，而不是其他过滤的集合对象。所以我不能使用其他收集功能。

这种行为的目的是什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-25T14:58:04.360

`where`不是唯一返回`Array`. `where`返回一个新的`Array`，因为你绝对不希望它`Collection`自动改变你现有的。此外，很多时候您可能想要`Array`形式的结果。

无论出于何种原因，BB 开发人员决定返回一个新的`Array`而不是一个新的更好`Collection`。一个想法可能是，返回的数据可能会用于不同类型的`Collection`. 另一个原因可能是您始终知道其中一种方法返回的内容。2+ 类型的集合将始终`Arrays`从这些类型的方法返回，而不必尝试检查 via`instanceof`或其他不太可靠的方法。

**编辑**

此外，您可以使您的集合以您返回 new 的方式运行`Collections`。创建一个基本集合来执行以下操作：

```
// Override the following methods
var override = ["where","find",...];
var collectionProto = Backbone.Collection.prototype;
BaseCollection = Backbone.Collection.extend({});
for (var key in collectionProto) {
    if (collectionProto.hasOwnProperty(key) && override.indexOf(key) > -1) {
        BaseCollection.prototype[key] = function () {
            return new this.constructor(collectionProto[key].apply(this, arguments);
        };
    }
} 
```

而是过度扩展 Backbone.Collection，扩展 BaseCollection。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-26T14:02:35.317

请注意，您仍然可以在数组上使用大多数下划线实用程序。这是在 filter() 之后使用 each() 的方法

_.each(MyCollection.filter(filter_fn() {}), each_fn() {})

# vim - Vim：在终端中，我怎样才能有更好的光标？

> ID：14030979
> 
> 赞同：6
> 
> 时间：2012-12-25T13:16:11.413
> 
> 标签：vim, macvim, text-cursor

当我使用终端时，我注意到光标与我配置的不同。

换句话说，在 GUI 中它看起来很完美，就是光标，但在终端中更新需要时间，看起来不像我配置的等等。

这是我对光标的设置：

```
set guicursor=n-v-c:block-Cursor-blinkon0
set guicursor+=ve:ver35-Cursor
set guicursor+=o:hor50-Cursor-blinkwait175-blinkoff150-blinkon175
set guicursor+=i-ci:ver20-Cursor
set guicursor+=r-cr:hor20-Cursor
set guicursor+=sm:block-Cursor-blinkwait175-blinkoff150-blinkon175 
```

我确实注意到它被称为`guicursor`设置，但是在终端中，其中一些确实生效，它们只是没有完全生效。

此外，光标似乎没有得到很多更新。例如，如果我进入插入模式，则会放置正确的光标，但如果我退出，则会使用相同的光标，直到我移动或其他东西，然后它会更新为正常模式光标。

你对此有什么建议吗？还是我只能忍受？

**编辑：**

我的操作系统是安装了 Mountain Lion 的 Mac Mini。我使用 iTerm2`xterm-color256`作为终端。

重新措辞问题：如何使光标在终端中更快地重绘以及如何使其采用我上面放置的设置？我已经尝试过`ttyfast`和`lazyredraw`。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-25T13:58:03.877

您的设置适用于 GUI Vim。你*不能*指望它们在 CLI Vim 中工作。如果您不喜欢 CLI Vim 的工作方式，请使用 MacVim。

我在我的`~/.vimrc`:

```
" changes the cursor shape/color
" in the terminal depending on the mode
" see http://code.google.com/p/iterm2/issues/detail?id=710&q=cursor
function! SetCursorStyle()
  if &term =~ "xterm\\|rxvt"
    " use a | cursor in insert mode
    let &t_SI = "\<Esc>]50;CursorShape=1\x7"

    " use a rectangle cursor otherwise
    let &t_EI = "\<Esc>]50;CursorShape=0\x7"

    " reset cursor when vim exits
    autocmd VimLeave * silent !echo -ne "\<Esc>]50;CursorShape=0\x7"

  endif
endfunction 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-02-25T06:35:15.497

我使用 Cygwin，我使用上述设置，但 Cygwin 的 xterm 可能无法识别**"\]50;CursorShape=1\x7"**

所以我试试这个，它工作

```
if &term =~ "xterm\\|rxvt"
  " use a | cursor in insert mode
  let &t_SI = "\<Esc>[5 q"

  " use a rectangle cursor otherwise
  let &t_EI = "\<Esc>[1 q"
endif 
```

然后，我将其添加到 .bashrc 以将术语 cursor 更改为 block，这对我来说非常完美。

```
# change cursor to blinking block
echo -ne "\x1b[1 q" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-25T13:30:57.483

你试过这个吗？

```
:help 'ttyfast' 
```

如果光标有延迟，试试这个（启用`ttyfast`：

```
:set ttyfast 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-12-18T16:26:14.683

# 使用[`terminfo`](https://en.wikipedia.org/wiki/Terminfo)

如果在您的机器上出现，您可以使用`echo $TERM`为Vim 定义光标。`linux``terminfo`

我们可以通过在 terminfo 数据库中更改光标来设置光标：

```
infocmp -A /usr/share/terminfo linux > linux_terminfo 
```

然后`linux_terminfo`用你最喜欢的编辑器进行编辑；该`cnorm`条目是普通光标的条目。这会将光标设置为不闪烁的绿色矩形：

```
clear=\E[H\E[J, cnorm=\E[?25h\E[?48;0;32c, cr=^M, 
```

将更改写回`terminfo`数据库：

```
tic linux_terminfo 
```

然后，一旦你用 Vim 打开一个文件，你就会看到新的光标。

## `terminfo`的颜色

`c`（例如）之前的数字`32c`定义了光标的颜色。光标背景颜色以 16 为增量变化。要突出显示光标下的字符，请将数字加 8。例如： 16 给出一个蓝色光标，但不突出光标下的字符。要激活突出显示，请在数字上加 8：24

初步颜色列表：

```
0  → gray
16 → blue
32 → green
48 → cyan
64 → red
80 → magenta
96 → brown
112 → gray
128 → ivory
144 → light blue
160 → lime
176 → light cyan
194 → pale red
212 → pink
228 → yellow
... 
```

# `terminfo`和重击

要使`terminfo`普通光标的配置在 Bash 中启动时生效，请将其放入您的`.bash_profile`：

```
tput cnorm 
```

这样，您在 Vim 和 Bash 中就有相同的光标。

# android - 如何在 Overlay 类的 onTap 方法中使用另一个类？

> ID：14030986
> 
> 赞同：0
> 
> 时间：2012-12-25T13:17:46.097
> 
> 标签：android, google-maps, itemizedoverlay

1-2天前我问了一个问题，它得到了回答。我的代码在那里。这是[我的问题的文本链接](https://stackoverflow.com/questions/13988744/how-can-add-overlay-to-map-on-android/)

我在地图上添加了叠加层，当我单击任何叠加层时，我可以获得它的 ID，但是有一个问题。我想获取覆盖的 id，我想将它发送到另一个类，但不是通过 bundle。

我正在使用片段。

这是我的 onTap 功能。

```
@Override
    public boolean onTap(int index) {
        OverlayItem item = mapOverlays.get(index);
        int id = Integer.valueOf(item.getSnippet());        
        Toast.makeText(context, "Ilan ID : " + id, Toast.LENGTH_LONG).show();

        MainActivity ma= new MainActivity();
        Param param = null;     
        param.setAdvertID(String.valueOf(id));

        // change page      
        ma.onTabChanged(TabEnum.ANASAYFA.toString());

       //Log.e("Tap", "Tap Performed"+id);
       return true;
    } 
```

我想将 id 参数从 ItemizedOverlay 类-onTap 函数-发送到另一个类。我该怎么做？

编辑：这些不起作用！，我做不到。:(

```
 MainActivity ma= new MainActivity();
    Param param = null;     
    param.setAdvertID(String.valueOf(id));
    ma.onTabChanged(TabEnum.ANASAYFA.toString()); 
```

感谢大家。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-25T13:27:42.980

如果您正在使用片段，您可以在您的活动中提供一个 getter 和 setter，在一个片段中设置数据（到您的活动）并使用活动 getter 获取目标片段中的数据。

您可以提供一个静态方法来从另一个活动（片段中的先前设置）获取数据。

我想这就是你想要的。

此外，您可以在带有接口的活动内的片段之间执行此操作，请参阅[此](https://stackoverflow.com/questions/13911261/how-to-get-a-fragment-added-in-an-xml-layout/13911659#13911659)内容。

希望有所帮助

# user-interface - Tmux 和 Vim 的 GUI？

> ID：14030988
> 
> 赞同：3
> 
> 时间：2012-12-25T13:18:12.977
> 
> 标签：user-interface, vim, tmux

只是想知道，是否有可用的通用 GUI？

就像 MacVim 对于 Mac 的 Vim 一样，是否有一个 GUI 终端，上面的一切看起来都不错，尤其是 Tmux？

我想知道是否有同时支持 Vim 和 Tmux 的 GUI。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-25T13:50:58.963

除了支持数千种颜色之外，GUI Vim 没有提供 CLI Vim 中没有的任何有用的东西：窗口分隔符、标志、折叠等仍然是用字符绘制的，你甚至没有圆角……嗯，制表符，好的. 例如，它在某些方面甚至更没用，因为它没有内置适当的终端仿真器！

如果您想要“物理”窗格分隔符和带有斜角的选项卡，Terminator 或 iTerm 会提供这些。iTerm 甚至提供了某种程度的 tmux 集成。

# jquery - 放开键时删除了JQuery keydown事件更改

> ID：14030995
> 
> 赞同：0
> 
> 时间：2012-12-25T13:19:08.937
> 
> 标签：jquery, events, time, keydown, short

我正在尝试创建一个自动建议框。当用户开始在#tagSelection 输入字段中输入内容时，JQuery 通过 Ajax 从数据库中获取建议，并将这些建议显示在显示在 #tagSelection 字段正下方的#suggestBox div 中。

现在我想让用户使用向下箭头键来选择其中一个建议。我已经开始通过处理 keydown() 事件并在此事件期间为第一个条目分配一个类来构建它。我面临的问题是，当我放开向下箭头键时，该类又被删除了。当我放开钥匙时，我需要它保持分配状态。那可能吗？

的HTML

```
<div class="form-entry">
    <input id="tagSelection" name="tags" type="text" value="" size="40">

    <div id="suggestBox" style="">
        <a href="#" id="1">design</a>
        <a href="#" id="3">debit card</a>
        <a href="#" id="4">deer</a>
    &nbsp;
    <a href="#" id="addTag">Add word</a>

    <div id="selectedTags"></div>

</div> 
```

jQuery

```
(function() {
    $('#tagSelection').keydown(downArrowKeyHandler);
})();

function downArrowKeyHandler(event) {
    if (event.keyCode == 40) {
        if ($('#suggestBox').length > 0) {
            if ($('[tagSelected = 1]').length == 0) {
                // the tagSelected class gives the entry a colored background
                $('#suggestBox').children().filter(':first').addClass('tagSelected');
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-25T13:35:03.297

如果我说对了，在这种情况下，Jquery 自动完成就足够了。试试这个[演示](http://jsfiddle.net/rdworth/AgpaN/)

```
<div class="ui-widget">
    <label for="tags">Tags: </label>
    <input class="ui-widget ui-widget-content ui-corner-all" id="tags">
</div>

$( "#tags" ).autocomplete({
    source: [ "c++", "java", "php", "coldfusion", "javascript", "asp", "ruby", "python", "c", "scala", "groovy", "haskell", "perl" ],
    delay: 0
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-25T13:45:19.360

**JS代码：**

```
$("input").keypress( function() {
var s = $(this).val();
$.ajax({
other params
success: function(data) { // here data contains all the suggest echoed with comma seprated (see below)
var s = data.split(",");
$(this).autocomplete({
    source: s,
    delay: 0
});
});
}); 
```

**In PHP It should be echoed like this**

```
siren,sam,sami,salman 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-25T13:45:21.413

I found the exact same problem here:

[How to make a permanent change to an element after using jQuery's .keydown()?](https://stackoverflow.com/questions/9648683/how-to-make-a-permanent-change-to-an-element-after-using-jquerys-keydown?rq=1)

It seems I indeed had some other JQuery code that was interfering with my event handler. Whenever someone releases a key when in the #tagSelection field a JQuery method fires that retrieves the suggestions from the db. The already present keyup() event was interfering with my new keydown() event.

```
(function() {
    $('#tagSelection').keyup(tagboxTypingHandler)
})();

function tagboxTypingHandler(event) {
    if (event.keyCode != 40) {
        var substring = $('#tagSelection').val();
        if (substring.length > 1) {
            $.get("http://localhost:8080/tag/search/" + substring, returnedTagsHandler);
        }
    }
} 
```

I just added the event.keyCode != 40 condition and now the class remains on the suggestion and it works :-)

# javascript - 使用javascript函数参数影响不同的变量

> ID：14030996
> 
> 赞同：0
> 
> 时间：2012-12-25T13:19:18.750
> 
> 标签：javascript, html, forms

我正在尝试制作使用一些 html 复选框表单对象的小型应用程序。Whenever any of those checkboxes are checked on or off, it runs a function which then changes the value of a variable unique to each checkbox. 我将如何去做，以便使用函数的参数 - 或其他方式 - 每当单击其中一个复选框时，我都能够定位相应的变量？目前这是我正在尝试完成的。

HTML：

```
 <form action="" method="get" name="orderForm">
<input name="Test" type="checkbox" value="test" onchange="checkClick('1','5.00')" />Test 1<br />
<input name="Test" type="checkbox" value="test2" onchange="checkBoxClick('2','3.00')" />Test 2 <br />
<input name="Test" type="checkbox" value="test3" onchange="checkBoxClick('3','4.00')" />Test 3 <br /> 
```

和 Javascript：

```
//set global vars
var check1 = 0.00;
var check2 = 0.00;
var check3 = 0.00;

function checkClick(num,cost) {
    if (check+num == 0.00) {
        check+num = cost;
    }
    else {
        check+num = 0.00;
    }
    checkBoxClick();
}

function checkBoxClick() {
    document.getElementById("otherContainer").innerHTML = "<p>" + check1 + "<br />" + check2 + "<br />" + check3 + "<br />" + check4 + "</p>";
} 
```

目前这只是一个粗略的测试，但我想做的是让它，所以我只需要一个函数来处理每个不同的复选框及其变量，而不必为每个复选框创建不同的函数。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-25T13:23:46.757

我明白你想做什么。将变量`check`改为数组：

```
var check = [ 0.00, 0.00, 0.00 ]; 
```

另外，将参数作为数字传递：

```
checkClick(1, 5.00) 
```

但是由于数组是 0 索引的，所以从 0 而不是 1 开始：

```
checkClick(0, 5.00) 
```

以及你在哪里`check+num`用`check[num]`.

结果如下：

```
var check = [ 0.00, 0.00, 0.00 ];

function checkClick(num, cost) {
    if (check[num] == 0.00) {
        check[num] = cost;
    } else {
        check[num] = 0.00;
    }
    checkBoxClick();
}

function checkBoxClick() {
    document.getElementById("otherContainer").innerHTML = "<p>" + check[1] + "<br />" + check[2] + "<br />" + check[3] + "<br />" + check[4] + "</p>";
} 
```

*顺便说一句，`check4`当您从未创建`check4`变量时，您正在使用...*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-25T14:37:58.717

英文 HTML:

```
<input name="Test" type="checkbox" value="test" onchange="checkClick(this,'5.00')" />Test 1<br />
<input name="Test" type="checkbox" value="test2" onchange="checkClick(this,'3.00')" />Test 2 <br />
<input name="Test" type="checkbox" value="test3" onchange="checkClick(this,'4.00')" />Test 3 <br /> 
```

恩 Javascript：

```
function checkClick(element,cost) {
   switch (element.value) {
      case 'test':
         check1 = (element.checked) ? cost : 0;  
         break;
      case 'test2':
         check2 = (element.checked) ? cost : 0;  
         break;
      case 'test3':
         check3 = (element.checked) ? cost : 0;
         break;
      }
      checkBoxClick();
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-25T14:43:34.677

使用数组而不是三个单独的变量。然后根据您传递给函数的数字修改数组元素。

更好的是，尝试使用带有键的 java 对象作为复选框的 id。