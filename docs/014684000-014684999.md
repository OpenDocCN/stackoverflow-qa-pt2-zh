# StackOverflow 问答 14684000-14684999

# c# - 使用正则表达式将数据文件转换为 xml

> ID：14684001
> 
> 赞同：0
> 
> 时间：2013-02-04T09:42:54.963
> 
> 标签：c#, regex

我希望使用正则表达式将文本数据文件转换为 xml。

这是我将使用的一些示例数据：

```
^JOB DMR344JAL -C01 -Z"PRT16"
^PAGE 01
^GLOBAL PAGELBL
Pag.
^$PAGE 01
^GLOBAL CMPADDR
COMPANY
Somestreet 1
10000 Somecity
^GLOBAL TELEPHONELBL
Telephone
^GLOBAL TELEPHONE
0000 0/000.00.00
^GLOBAL TELEFAXLBL
Fax
^GLOBAL TELEFAX
0000 0/000.00.00
^GLOBAL ORGNOLBL
Orig.nr.
^GLOBAL ORGNO
^GLOBAL WEBSITE
http://www.internet.com
^GLOBAL EMAIL
e-mail account@internet.com
^GLOBAL SEAT1LBL
Maatschappelijke zetel
^GLOBAL SEAT2LBL
Someaddress
^GLOBAL HANDREG
RPR
^GLOBAL HANDREGNR
Somecity
^GLOBAL TITLE
^GLOBAL TITLE1
FACTUUR
^GLOBAL INVNOLBL 
```

到目前为止，我得到的正则表达式如下所示：

```
\^((?:GLOBAL|FIELD)\s(?:[A-Z0-9]+))\r 
```

替换正则表达式如下所示：

```
<$1>$2</$1> 
```

这给了我以下结果：

```
^JOB DMR344JAL -C01 -Z"PRT16"
^PAGE 01
<GLOBAL PAGELBL>$2</GLOBAL PAGELBL>
Pag.
^$PAGE 01
<GLOBAL CMPADDR>$2</GLOBAL CMPADDR>
COMPANY
Somestreet 1
10000 Somecity
<GLOBAL TELEPHONELBL>$2</GLOBAL TELEPHONELBL>
Telephone
<GLOBAL TELEPHONE>$2</GLOBAL TELEPHONE>
0000 0/000.00.00
<GLOBAL TELEFAXLBL>$2</GLOBAL TELEFAXLBL>
Fax
<GLOBAL TELEFAX>$2</GLOBAL TELEFAX>
0000 0/000.00.00
<GLOBAL ORGNOLBL>$2</GLOBAL ORGNOLBL>
Orig.nr.
<GLOBAL ORGNO>$2</GLOBAL ORGNO>
<GLOBAL WEBSITE>$2</GLOBAL WEBSITE>
http://www.internet.com
<GLOBAL EMAIL>$2</GLOBAL EMAIL>
e-mail account@internet.com
<GLOBAL SEAT1LBL>$2</GLOBAL SEAT1LBL>
Maatschappelijke zetel
<GLOBAL SEAT2LBL>$2</GLOBAL SEAT2LBL>
Someaddress
<GLOBAL HANDREG>$2</GLOBAL HANDREG>
RPR
<GLOBAL HANDREGNR>$2</GLOBAL HANDREGNR>
Somecity
<GLOBAL TITLE>$2</GLOBAL TITLE>
<GLOBAL TITLE1>$2</GLOBAL TITLE1>
FACTUUR
^GLOBAL INVNOLBL 
```

我到底如何获得**1 美元**之间的价值？？？？

*   每个字段都有 ^ 作为指示符。
*   该字段后面的行将用于**$2**。
*   不要介意前 2 行和 $PAGE 01 行。（我将在应用正则表达式之前拆分文件）

一段时间以来，我一直在为此烦恼，如果有更多正则表达式经验的人可以帮助我或为我指明正确的方向，我将不胜感激！

亲切的问候，

斯坦尼

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T11:05:58.003

如果我说得对..这就是你要找的

正则表达式：`"\\^(GLOBAL.*?)(?=[\n\r]+)(.*?)(?=\\^|$)"`

为了更笼统，您可以使用`"\\^(.*?)(?=[\n\r]+)(.*?)(?=\\^|$)"`

代替：`<$1><$2></$1>`

与**单行**选项一起使用

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-04T09:49:54.583

您需要`^`在正则表达式中转义以匹配 a`^`因为它表示正则表达式中字符串的开头。

我认为所需的正则表达式`\^(GLOBAL|FIELD)\s([A-Z0-9]+)`匹配**GLOBAL**或**FIELD**后跟空格，后跟任意长度（至少一个）的大写字母或数字序列。将匹配替换为`<$1>$2</$1>`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-04T11:57:14.087

I think I found the answer:

```
((GLOBAL|FIELD)\s([A-Z0-9]+))(.+?)(?=\^)\^ 
```

Replace:

```
<$2_$3>$4</$2_$3> 
```

..this gives me almost exactly what I need.

Greetings

# c# - 如何绑定html选择选项中的值？

> ID：14684005
> 
> 赞同：0
> 
> 时间：2013-02-04T09:43:17.100
> 
> 标签：c#, html, asp.net-mvc-4

我需要绑定 html 选择选项中的值，并且我在 C# 模型中有值。我该怎么做呢？我的html代码：

```
 <div class="Div"><span class="label2">values:</span>
    <select id="Binding_values" onchange="values()></select></div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T09:48:37.600

假设您有一个视图模型：

```
public class MyViewModel
{
    public string SelectedValue { get; set; }
    public IEnumerable<SelectListItem> Items { get; set; }
} 
```

和一个控制器动作，它将填充这个视图模型并将其传递给视图：

```
public ActionResult Index()
{
    var model = new MyViewModel();
    model.Items = new[]
    {
        // TODO: those values could come from a database for example
        new SelectListItem { Value = "1", Text = "item 1" },
        new SelectListItem { Value = "2", Text = "item 2" },
        new SelectListItem { Value = "3", Text = "item 3" },
    };
    return View(model);
} 
```

在相应的强类型视图中，您可以使用`DropDownListFor`帮助器：

```
@model MyViewModel
...
@using (Html.BeginForm())
{
    @Html.DropDownListFor(x => x.SelectedValue, Model.Items)
    <button type="submit">OK</button>
} 
```

如果此下拉列表位于用于回发到控制器的 HTML 中，则您可以执行一个操作来从模型中检索选定的值：

```
[HttpPost]
public ActionResult Index(MyViewModel model)
{
    // model.SelectedValue will contain the selected value from the dropdown list here
    ...
} 
```

假设您想在更改下拉列表中的选择后立即将选定的值发送到服务器而不单击表单提交按钮，您可以为此 DropDownList 提供一个唯一的 id：

```
@Html.DropDownListFor(x => x.SelectedValue, Model.Items, new { id = "myDdl" }) 
```

然后`.change()`使用 jQuery 订阅此下拉列表的事件并提交包含表单：

```
$(function() {
    $('#myDdl').change(function() {
        $(this).closest('form').submit();
    });
}); 
```

# winapi - 使用 data-win-res 属性动态绑定资源

> ID：14684006
> 
> 赞同：0
> 
> 时间：2013-02-04T09:43:17.987
> 
> 标签：winapi, windows-8, windows-store-apps, winjs

我有一个对象，其中包含要加载的资源的 id，并希望将其绑定到模板本身中。通常资源可以这样绑定：

```
<div class="description" data-win-res="{textContent:'taxCalDescription'}" ></div>
<div class="name" data-win-bind="textContent:'TaxCal'" ></div> 
```

`resid`字符串资源的 id 在哪里。但是，我没有直接获得 id，而是有一个对象，其中一个元素是资源 id。说我有一个对象，

```
var tool = {
    name: "TaxCal",
    descriptionResId : "taxCalDescription"
} 
```

我试着像这样绑定它，

```
<div class="description" data-win-res="{textContent: tool.descriptionResId}" ></div>
<div class="name" data-win-bind="textContent:tool.name" ></div> 
```

虽然`data-win-bind`可以访问`tool`对象，`data-win-res`但不能。它抛出一个错误，指出`'cannot find descriptionResId of undefined'`

那么，如何将动态资源 ID 绑定到模板？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T16:37:42.980

我相信在这种情况下，您需要直接更改对资源 API 的使用。

您可以通过以下两种方式之一执行此操作：

1.  *使您的数据提供本地化字符串*：当您加载本地化名称时，您可以`WinJS.Resources.getString`使用资源 ID调用

2.  用于`WinJS.Binding.converter`根据传入的值动态加载它。例如

例子：

```
WinJS.Namespace.define("YourNamespace", {
    loadToolName: WinJS.Binding.converter(function(input) {
        switch(input) {
            case "notlocalizedname":
                return WinJS.Resources.getString("MyID");
            default:
                return "Unknown";
        }
    }),
}); 
```

然后，在您的标记中，您的绑定将如下所示：

```
<div class="description"
     data-win-bind="textContent: tool.descriptionResId YourNamespace.loadToolName">
</div> 
```

# phpmyadmin - WAMP - 如何限制对专用 IP 地址的 phpMyAdmin 的访问？

> ID：14684010
> 
> 赞同：0
> 
> 时间：2013-02-04T09:43:21.627
> 
> 标签：phpmyadmin, wamp, ip-address, restrict

[也许这个](https://stackoverflow.com/questions/3687940/how-to-restrict-access-to-phpmyadmin)或[这个](https://stackoverflow.com/questions/2631269/how-to-secure-phpmyadmin)重复，
但我没有得到我的答案。我想限制对专用 IP 地址的访问（如 192.168.120.138）

我新安装了 wamp server 2.0c (apache 2.2.8 & php 5.2.6 & phpmyadmin 2.11.6)
它一直说

> **Forbidden**
> 您无权访问此服务器上的 /phpmyadmin。

当我尝试加载“localhost/phpmyadmin”时

这是我的 http.conf

```
Include "c:/wamp/alias/phpmyadmin.conf"
Include "c:/wamp/alias/*" 
```

这是我的 phpmyadmin.conf

```
<Directory "C:/wamp/apps/phpmyadmin2.11.6">
    AllowOverride all
    Order Deny,Allow
    Deny from all
    Allow from 127.0.0.1 192.168.120.138
</Directory> 
```

但我仍然看到禁止的消息。请帮我！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-06-04T11:02:05.360

您应该重新启动您的 wamp 服务器，以使更改生效的所有服务。

```
<Directory "C:/wamp/apps/phpmyadmin2.11.6">
    AllowOverride all
    Order Allow,Deny
    Allow from 127.0.0.1 192.168.120
    Deny from all
</Directory> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T17:55:00.193

如果你暂时把你的 phpmyadmin.conf 改成 Allow All，你能进去吗？更改这些文件后不要忘记**重新启动 Apache以查看结果。**

# android - 我怎样才能实现条形图

> ID：14684011
> 
> 赞同：1
> 
> 时间：2013-02-04T09:43:28.407
> 
> 标签：android, charts, bar-chart, achartengine

我想使用一些合适的免费图表引擎在 android 应用程序中显示条形图。这就是我期望图表的方式：

我正在尝试使用以下功能。

将 onclick 添加到每个栏（红色、蓝色、绿色）。

在顶部而不是底部显示图例。

在 Y 轴上，它显示我想要显示的值 1 - 200。

并且 onlick 在每个条形图的顶部显示值。

![在此处输入图像描述](../Images/1da374ad31f3f7ee7947609ec6732acf.png)

我已经调查过了`Achart engine`，但它没有这样的条形图。

请帮助我。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-04T09:54:07.313

参考这个。我想这会对你有所帮助。 [http://wptrafficanalyzer.in/blog/android-drawing-bar-chart-using-achartengine/](http://wptrafficanalyzer.in/blog/android-drawing-bar-chart-using-achartengine/)

[`Bar Chart in Android With out any Built in jars`](http://rakhi577.wordpress.com/2012/10/11/bar-chart-in-android-with-out-any-built-in-jars/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-01-22T07:24:21.897

我用[MPAndroiChart](https://github.com/PhilJay/MPAndroidChart)做到了这一点。完整的解决方案请参考我在 Github 中的[MPAndroidChart-barchart](https://github.com/shuwnyuantee/MPAndroidChart-barchart)项目。

结果如下：

[![在此处输入图像描述](../Images/a8f339ee49124b73c1ca133db7463783.png)](https://i.stack.imgur.com/BO45E.png)

**这是条形图**的一些代码片段：

```
mChart = (BarChart) findViewById(R.id.chart);

final ArrayList<BarEntry> bar1List = new ArrayList<>();
final ArrayList<BarEntry> bar2List = new ArrayList<>();
final ArrayList<BarEntry> bar3List = new ArrayList<>();
final ArrayList<String> xLabels = new ArrayList<>();

for (int i = 0; i < 3; i++) {
    bar1List.add(new BarEntry(i, (float) randInt()));
    bar2List.add(new BarEntry(i, (float) randInt()));
    bar3List.add(new BarEntry(i, (float) randInt()));

    xLabels.add("entry " + i);
}

BarDataSet bar1Set = new BarDataSet(bar1List, "Bar 1");
bar1Set.setColor(bar1Color);
bar1Set.setAxisDependency(YAxis.AxisDependency.LEFT);
bar1Set.setDrawValues(false);

BarDataSet bar2Set = new BarDataSet(bar2List, "Bar 2");
bar2Set.setColor(bar2Color);
bar2Set.setAxisDependency(YAxis.AxisDependency.LEFT);
bar2Set.setDrawValues(false);

BarDataSet bar3Set = new BarDataSet(bar3List, "Bar 3");
bar3Set.setColor(bar3Color);
bar3Set.setAxisDependency(YAxis.AxisDependency.LEFT);
bar3Set.setDrawValues(false);

// (0.20 + 0.05) * 3 + 0.25 = 1.00 -> interval per "group"
final float groupSpace = 0.25f;
final float barSpace = 0.05f;
final float barWidth = 0.2f;

BarData barData = new BarData(bar1Set, bar2Set, bar3Set);
barData.setBarWidth(barWidth);

// make this BarData object grouped
barData.groupBars(0, groupSpace, barSpace); // start at x = 0

mChart.setData(barData);

mChart.getDescription().setEnabled(false);
mChart.setBackgroundColor(backgroundColor);
mChart.setDrawGridBackground(false);
mChart.setDrawBarShadow(false);
mChart.setDoubleTapToZoomEnabled(false);
mChart.setPinchZoom(false);
mChart.setScaleEnabled(false);

// show legend on Top Left
Legend legend = mChart.getLegend();
legend.setEnabled(true);
legend.setOrientation(Legend.LegendOrientation.HORIZONTAL);
legend.setHorizontalAlignment(Legend.LegendHorizontalAlignment.LEFT);
legend.setVerticalAlignment(Legend.LegendVerticalAlignment.TOP);

YAxis leftAxis = mChart.getAxisLeft();
leftAxis.setDrawGridLines(false);
leftAxis.setDrawAxisLine(false);
leftAxis.setDrawLabels(true);
leftAxis.setPosition(YAxis.YAxisLabelPosition.OUTSIDE_CHART);
leftAxis.setValueFormatter(new LargeValueFormatter());
// show range: 0 -> 200
leftAxis.setAxisMaximum(200);

XAxis xAxis = mChart.getXAxis();
xAxis.setPosition(XAxis.XAxisPosition.BOTTOM);
xAxis.setDrawGridLines(false);
xAxis.setDrawAxisLine(false);
xAxis.setCenterAxisLabels(true);
xAxis.setAxisMinimum(0);
xAxis.setGranularity(1f);
xAxis.setTextSize(12);
xAxis.setAxisMaximum(barData.getXMax() + 1);
xAxis.setLabelRotationAngle(-40f);

IAxisValueFormatter xAxisFormatter = new IAxisValueFormatter() {
    @Override
    public String getFormattedValue(float value, AxisBase axis) {
        if (value >= 0 && value <= xLabels.size() - 1) {
            return xLabels.get((int) value);
        }

        // to avoid IndexOutOfBoundsException on xLabels, if (value < 0 || value > xLabels.size() - 1)
        return "";
    }
};

xAxis.setValueFormatter(xAxisFormatter);

// display value during highlight
YMarkerView mv = new YMarkerView(this);
mv.setChartView(mChart);    // For bounds control
mChart.setMarker(mv);       // Set the marker to the chart

mChart.invalidate(); 
```

为了**在单击栏时显示值**，我实现**了自定义 MarkerView**：

```
package com.example.shuwnyuan.barchart;

import android.content.Context;
import android.widget.TextView;

import com.github.mikephil.charting.components.MarkerView;
import com.github.mikephil.charting.data.Entry;
import com.github.mikephil.charting.highlight.Highlight;
import com.github.mikephil.charting.utils.MPPointF;

/**
 * Custom implementation of the MarkerView.
 *
 * @author Shuwn Yuan Tee
 */
public class YMarkerView extends MarkerView {
    private TextView tvContent;

    public YMarkerView(Context context) {
        super(context, R.layout.custom_marker_view);
        tvContent = findViewById(R.id.tvContent);
    }

    // callbacks everytime the MarkerView is redrawn, can be used to update the
    // content (user-interface)
    @Override
    public void refreshContent(Entry e, Highlight highlight) {
        tvContent.setText("" + (int)e.getY());

        super.refreshContent(e, highlight);
    }

    @Override
    public MPPointF getOffset() {
        return new MPPointF(-(getWidth() / 2), -getHeight());
    }
} 
```

希望这有帮助。

# android - 调用另一个类失败。我的数据库没有显示它的数据

> ID：14684015
> 
> 赞同：0
> 
> 时间：2013-02-04T09:43:37.117
> 
> 标签：android, database, sqlite

我被卡住了，我不知道这是什么问题。我的数据库没有显示它的数据。请帮忙找出问题。

```
import android.content.ContentValues;
import android.content.Context;
import android.database.Cursor;
import android.database.SQLException;
import android.database.sqlite.SQLiteDatabase;
import android.database.sqlite.SQLiteOpenHelper;

public class highscore {
     private static final String DATABASE_NAME = "topscoredb";
     private static final String DATABASE_TABLE = "tablescore";
     private static final int DATABASE_VERSION = 1;
     public static final String KEY_ROWID = "_id";
     public static final String KEY_SCORE = "score";
     public static final String KEY_NAME = "players_name";

     private DbHelper ourHelper;
     private final Context ourContext;
     private SQLiteDatabase ourDatabase;

     private static class DbHelper extends SQLiteOpenHelper{
        public DbHelper(Context context) {
        super(context, DATABASE_NAME, null, DATABASE_VERSION);
        // TODO Auto-generated constructor stub
    }

            @Override
            public void onCreate(SQLiteDatabase db) {
                // TODO Auto-generated method stub

            db.execSQL("CREATE TABLE " + DATABASE_TABLE + " (" +
                         KEY_ROWID + "INTEGER PRIMARY INCREMENT, " +
                         KEY_NAME + "TEXT NOT TO NULL, " +
                         KEY_SCORE + "TEXT NOT TO NULL);"

                    );

            }

            @Override
            public void onUpgrade(SQLiteDatabase db, int oldVersion,
                    int newVersion) {
                // TODO Auto-generated method stub
                db.execSQL("DROP TABLE IF EXIST" + DATABASE_TABLE);
                onCreate(db);

            }
          }

         public highscore(Context c){
      ourContext = c;
         }

           public highscore open() throws SQLException{
     ourHelper = new DbHelper(ourContext);
     ourDatabase = ourHelper.getWritableDatabase();

      return this;

                     }

                   public void close(){
       ourHelper.close();

            }

              public long createEntry(String name, String tscore) {
          // TODO Auto-generated method stub

                   ContentValues cv = new ContentValues();
                   cv.put(KEY_NAME, name);
                   cv.put(KEY_SCORE, tscore);
              return  ourDatabase .insert(DATABASE_TABLE, null, cv);
       }

              public String getData() {
          String[] columns = new String[]{ KEY_ROWID, KEY_NAME, KEY_SCORE};
    Cursor c = ourDatabase.query(DATABASE_TABLE, columns, null, null, null,null,null);
    String result = "";

    int irow = c.getColumnIndex(KEY_ROWID);
    int iname = c.getColumnIndex(KEY_NAME);
    int iscore = c.getColumnIndex(KEY_SCORE);

    for(c.moveToFirst(); !c.isAfterLast(); c.moveToNext()){
        result = result + c.getString(irow)+ "   " + c.getString(iname) +
                 "   "+ c.getString(iscore) + "\n";
    }

    return result;
        }

       }

heres some code

         public class Viewhs extends Activity {

    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        requestWindowFeature(Window.FEATURE_NO_TITLE);
        getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN,
                WindowManager.LayoutParams.FLAG_FULLSCREEN);
        setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_LANDSCAPE);
        setContentView(R.layout.topscores);

        TextView tv = (TextView) findViewById(R.id.highscoredata);
        highscore info = new highscore(this);
        info.open();
        String data = info.getData();
        info.close();
        tv.setText(data);

    }

}

this my method to insert data to database. my scored is an integer and my dataname is already a string

            public void getdata(){

            try {
            String name = dataname;
            String tscore = scored.getText().toString();

            highscore entry = new highscore(Playing.this);
            entry.open();
            entry.createEntry(name, tscore);
            entry.close();
            }catch (Exception e) {

            }   

               } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T09:53:45.607

你必须按照这个例子创建表

```
 private final String SQL = " CREATE TABLE IF NOT EXISTS " + "table name" + " (" 
          + "_id" + " INTEGER PRIMARY KEY AUTOINCREMENT, " 
          + "name" + " TEXT NOT NULL," 
          + "age" + " INTEGER NOT NULL);"; 
```

# python - 将向量 (float4) kernell 参数传递给 OpenCL (Python)

> ID：14684020
> 
> 赞同：1
> 
> 时间：2013-02-04T09:43:57.523
> 
> 标签：python, numpy, parameter-passing, opencl, pyopencl

有没有简单的方法可以将 float4 或任何其他向量参数传递给 OpenCL 内核？对于标量参数（int，float），您可以在调用内核时直接传递它。对于数组参数，您必须先使用 cl.Buffer() 将其复制到 GPU，然后再传递指针。当然有可能以与数组相同的方式传递 float4。但我问是否有任何更简单，更清晰的方法。（尤其是使用 Python、numpy、pyOpenCL）

我尝试将大小为 4*float32 的 numpy 数组作为 float4 传递，但它不起作用。是否有可能以其他方式做到这一点？

例如： **内核：**

```
__kernel void myKernel( __global float  * myArray, float myFloat, float4 myFloat4 ) 
```

**Python：**

```
myFloat4   = numpy.array  ( [1.0 ,2.0 ,3.0], dtype=np.float32 ) 
myArray    = cl.Buffer(ctx, mf.READ_ONLY | mf.COPY_HOST_PTR, hostbuf=myArray_host)
kernelargs = ( myArray , numpy.float32(myFloat) , myFloat4) 
prg.myKernel(queue, cl_myArray.shape() , None, *(kernelargs) ) 
```

**我得到错误：**

```
pyopencl.LogicError: when processing argument #2 (1-based): clSetKernelArg failed: invalid arg size 
```

另一种可能性是将它作为标量 int 或 float 的集合传递 - 例如：

```
__kernel void myKernel( __global float  * myArray, float myFloat, float myFloat4_x, float myFloat4_y, float myFloat4_z  )

kernelargs = ( myArray , numpy.float32(myFloat) ,numpy.float32(myFloat4_x),numpy.float32(myFloat4_y),numpy.float32(myFloat4_z)) 
```

但这也不是很方便——如果你想将 4x float4 和 5x int3 传递给 kernell，你很容易迷失在许多变量名中。

我认为传递 int 和 float 的向量 (2,3,4) 在 OpenCL 中一定很常见 - 例如 3D 数据网格的大小。所以我想知道是否真的有必要使用 cl.Buffer() 作为指针来传递它。

我猜常量参数 float4 也比 *float 快（因为它可以被所有工作项共享为常量）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-05-04T22:31:44.073

我发现这是在 python 中创建 float4 的好方法：

```
import numpy as np
import pyopencl as cl
import pyopencl.array as cl_array

data= np.zeros(N, dtype=cl_array.vec.float4) 
```

**编辑：**还要给出 MWE：

```
import numpy as np
import pyopencl as cl
import pyopencl.array as cl_array

deviceID = 0
platformID = 0
workGroup=(1,1)

N = 10
testData = np.zeros(N, dtype=cl_array.vec.float4)

dev = cl.get_platforms()[platformID].get_devices()[deviceID]

ctx = cl.Context([dev])
queue = cl.CommandQueue(ctx)
mf = cl.mem_flags
Data_In = cl.Buffer(ctx, mf.READ_WRITE, testData.nbytes)

prg = cl.Program(ctx, """

__kernel void   Pack_Cmplx( __global float4* Data_In, int  N)
{
  int gid = get_global_id(0);

  Data_In[gid] = 1;
}
 """).build()

prg.Pack_Cmplx(queue, (N,1), workGroup, Data_In, np.int32(N))
cl.enqueue_copy(queue, testData, Data_In)

print testData 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-01-20T15:04:27.043

问题在这里：

```
myFloat4   = numpy.array  ( [1.0 ,2.0 ,3.0], dtype=numpy.float32 ) 
```

但 myFloat4.size 等于 3

只需输入：

```
myFloat4   = numpy.array  ( [1.0 ,2.0 ,3.0, 4.0], dtype=numpy.float32 ) 
```

其余代码没问题

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-03-21T15:02:47.463

我注意到三件事：

1.  查看错误消息，第二个内核参数似乎存在问题，即`myFloat`. 如果你`const`在内核签名中声明它是一个参数会发生什么？如果你这样做会发生什么

    ```
    myFloat = myFloat.astype(np.float32)
    kernelArgs = (..., myFloat, ...)
    prg.myKernel(...) 
    ```

2.  您想定义一个四元素向量`myFloat4`，但`[1.0, 2.0, 3.0]`只给出三个值。还可以尝试`const float4 myFloat4`在内核签名中进行设置。

3.  `kernelargs`在实际内核调用中，元组不需要额外的括号：

    ```
    prg.myKernel(queue, cl_myArray.shape() , None, *kernelargs) 
    ```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-08-23T09:52:28.767

对我来说，当我运行 opencl 内核时，创建一个形状为 (SIZE,4) 和 dtype float32 的 numpy 数组效果很好。确保第二维与您想要的 floatN 匹配，如果它们不匹配，它不会抛出任何错误，但在我的情况下，它会导致显卡驱动程序崩溃。

我初始化数组的方式：`np.zeros((SIZE,4), dtype=np.float32)`

希望这可以帮助任何想知道的人。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-10-08T23:48:45.343

我不知道 Python 中的 OpenCl，但我确实将`double`, `int`,`double8`或任何 OpenCl 类型传递给内核。
假设 N 是整数，alpha 是 double，vect 是 double8。
我所做的是

```
clSetKernelArg(kernel, 0, sizeof(int),  &N);
clSetKernelArg(kernel, 18, sizeof(double), &alpha);
clSetKernelArg(kernel, 11, sizeof(cl_double8), &vect); 
```

希望能帮助到你。埃里克。

# php - 检测字符编码并相应显示

> ID：14684021
> 
> 赞同：0
> 
> 时间：2013-02-04T09:43:58.753
> 
> 标签：php, wordpress, character-encoding

我继承了一个 wordpress 博客，该博客在某些时候更改了默认字符编码。这意味着新的博客文章可以正常显示，但旧的博客文章包含各种损坏的字符（它们也出现在管理区域中）。

有什么办法可以在不手动修复这些字符的情况下解决这个问题，因为自从更改以来已经有大约 1000 个帖子和之前的 3500 个帖子。

我尝试了几种不同的方法来通过 mysqldump 转换数据，并通过 iconv 转换数据库，但到目前为止没有运气。

# java - 获取在控制台上输入的值的数量

> ID：14684023
> 
> 赞同：0
> 
> 时间：2013-02-04T09:44:10.483
> 
> 标签：java, collections

在下面的代码中，我`i<3`在第一个 for 循环中采用了三组值 ()。我能够使用不同的整数计算相同的数据，`i<5`例如`i<6`. 请提出一种方法，让我可以获取在控制台上输入的值的数量，然后将它们用作`<(number of values entered/2)`.

```
public static void main(String[] args) {

  Scanner s = new Scanner(System.in);
  System.out.println("please enter 3 birth - death pairs");
  List<Dinosaur> dinoList = new ArrayList<Dinosaur>();
  // int dinoStrength=s.nextInt();

  for (int i = 0; i <3; i++) 
  {
    int num1 = s.nextInt();
    int num2 = s.nextInt();
    Dinosaur d = new Dinosaur(num1, num2);
    dinoList.add(d);

  }
  //System.out.println(dinoList);

  Collections.sort(dinoList);

  //System.out.println(dinoList);
  int maxCount = 0;
  List<String> ls=new ArrayList<String>();

  for (Dinosaur dino : dinoList) 
  {
    // System.out.println("start date" + dino.getStartDate());
    // System.out.println("end date"+ dino.getEndDate());
    int count = 0;
    for (Dinosaur dino2 : dinoList) {

      if (dino2.getStartDate() <= dino.getEndDate()
          && dino2.getEndDate() >= dino.getStartDate())
        count++;

    }
    //System.out.println(count);

    if (maxCount < count) {
      maxCount = count;
      ls.clear();
      ls.add(dino.getStartDate()+"-"+dino.getEndDate());
    }

    else if(maxCount==count)

    {
      ls.add(dino.getStartDate()+"-"+dino.getEndDate());
    }
  }
  //System.out.println(maxCount);

  //System.out.println(ls);

  System.out.println("Max no of Dinos alive at the same time :"+maxCount);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T10:05:08.510

```
Scanner s = new Scanner(System.in);
System.out.println("please enter 3 birth - death pairs");
List<Dinosaur> dinoList = new ArrayList<Dinosaur>();
// int dinoStrength=s.nextInt();

while(s.hasNextInt())
{

int num1 = s.nextInt();
int num2 = s.nextInt();
if(num2 ==num1)//Your condition(Here I assume date of birth should not be equal to death date.)
break;
Dinosaur d = new Dinosaur(num1, num2);
dinoList.add(d);

} 
```

你可以试试这样的。

# c# - 使用 DataContract 集合反序列化 到派生类

> ID：14684026
> 
> 赞同：0
> 
> 时间：2013-02-04T09:44:32.697
> 
> 标签：c#, serialization, collections, datacontract

标题有点混乱，希望有人知道这个标题更适合我的问题。

我正在尝试创建一个派生自的类，`Collection<Classname>`以实现一种简单的方法来保存和加载配置文件。写入文件没问题，但我无法实现反序列化功能。我不确定如何将反序列化的内容分配回我的实例。

目前的做法：

```
[DataContract(Name = "Configurations", Namespace = "")]
public class Configurations : Collection<Configuration>
{
    internal void SerializeToBinaryFile(string path)
    {
        Helper.DumpObjectToBinaryFile(this, path);
    }

    internal void DeserializeFromBinaryFile(string path)
    {
       // Getting Error:
       // This expression can not be used as an assignment target
       this = Helper.GetObjectFromBinaryFile<Collection<Configuration>>(path);
    }
} 
```

我很熟悉，`this.Add([Configuration])`但这只是提供了插入**一项**的机会。我考虑过使用 a`foreach(Configuration c in temporaryObject`并一个一个地添加它们，但这不是最好的解决方案。

感谢您的任何提示！

编辑1：

我添加了 foreach 迭代以添加配置

```
 internal void DeserializeFromBinaryFile(string path)
    {
        foreach (var c in Helper.GetObjectFromBinaryFile<Collection<Configuration>>(path))
        {
            Add(c);
        }
    } 
```

这似乎工作正常。有人知道更好的模式吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T10:40:12.743

无论您是否进行反序列化或其他操作，都不能将类的新实例分配给“this”。下面的代码只使用了新的构造函数，也不起作用。基本上，此时您在内存中确实有不同的 2 个类实例。

```
public class Point
{
    public int X { get; set; }
    public int Y { get; set; }

    public void CreatePoint(int x, int y)
    {
        // Doesn't work either
        this = new Point();
    }
} 
```

您必须在类的主体之外执行此操作，因此请使用静态反序列化方法：

```
[DataContract(Name = "Configurations", Namespace = "")]
public class Configurations : Collection<Configuration>
{
    internal void SerializeToBinaryFile(string path)
    {
        Helper.DumpObjectToBinaryFile(this, path);
    }

    internal static Configurations DeserializeFromBinaryFile(string path)
    {
        return Helper.GetObjectFromBinaryFile<Collection<Configuration>>(path);
    }
} 
```

# postgresql - postgreSQL中字符编码的改变方法

> ID：14684029
> 
> 赞同：0
> 
> 时间：2013-02-04T09:44:49.713
> 
> 标签：postgresql, encoding

我的数据库记录中包含波兰字符，如：`ś`、、、、。`ć``ż``ź`

当我尝试执行某些`SELECT`语句时，这对我来说恰好是一个问题..

因为我得到了我的文字，但我得到的不是我上面写的字符：`<c4><85>`。

我敢打赌，有一种方法可以更改编码，例如`utf-8`，但是对于像这样的简单查询，我该如何做到这一点`select * from table`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T10:06:13.000

正如您在控制台上指出的那样，您必须在启动 psql 之前首先检查您的控制台编码。

请参阅[Windows 命令行中的 Unicode 字符 - 如何？](https://stackoverflow.com/questions/388490/unicode-characters-in-windows-command-line-how)有关如何在 Windows 中执行此操作的详细信息。

必须这样做，因为即使您确实可以`psql`用 UTF8 读/写，您的控制台也不一定能理解这些字符，也不会正确显示它们。

一旦你确认你的控制台可以接受 UTF-8 编码，然后确保 psql 已经选择了这个编码：

```
show client_encoding;
 client_encoding
-----------------
 UTF8
(1 row) 
```

如果那不显示 UTF-8，那么您可以使用：

```
set client_encoding = UTF8; 
```

作为基本规则; 如果您的程序期望使用 UTF8，那么盲目地设置客户端编码（不检查它是从什么开始的）是没有害处的。

[http://www.postgresql.org/docs/current/static/multibyte.html](http://www.postgresql.org/docs/current/static/multibyte.html)

**注意：** 以上链接适用于当前版本。由于 OP 要求 8.0 版，这里是 8.0 手册的链接：

见[http://www.postgresql.org/docs/8.0/static/multibyte.html](http://www.postgresql.org/docs/8.0/static/multibyte.html)

# mobile - 移动应用安全测试

> ID：14684034
> 
> 赞同：-2
> 
> 时间：2013-02-04T09:44:58.960
> 
> 标签：mobile, android-testing, security-testing

我是移动领域的新手。测试移动应用程序安全漏洞的最佳方法应该是什么。请分享信息，如果有人知道任何可用于实现相同目的的工具。

我正在寻找android和iOS平台。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T06:07:56.420

测试 Web 应用程序或移动应用程序的唯一最佳方法是遵循 OWASP 指南。如果您对 Web 应用程序的安全性略知一二，那么您肯定会了解 OWASP。与 Web 应用程序类似，OWASP 也为移动设备提供了前 10 大风险。请参阅 OWASP 网站了解更多详情。

# javascript - javascript和django

> ID：14684043
> 
> 赞同：2
> 
> 时间：2013-02-04T09:45:25.373
> 
> 标签：javascript, jquery, django

我正在从 PHP 转换为 Django，这证明是一场真正的斗争。我想做一个内联编辑（用 PHP 和 Ajax 轻而易举），但我真的，真的卡住了。对不起，提前，对于下面的大量代码。

我已经渲染了 2 个 div，其中包含许多字段，都一样。一个显示，另一个隐藏。当您单击编辑按钮时，将显示要更新的 div，并且数据位于输入框和选择下拉列表中，以便用户进行更改。HTML 如下”

```
<div id="display1">
    <span style="width:50px;">
      <button class="edit" onclick="javascript:toggle('1')">EDIT</button>
    </span>
    <span>
        <a href="/recruit/1/">Blair Leighton</a>
    </span>
    <span>
        Intertrust Private Partners 
    </span>
    <span>
        Japan 
    </span>
    <span>
        hands off 
    </span>
    <span>
        not connected 
    </span>
    <span>
        notes 
    </span>
</div>
<div class="noshow" id="edit1">
    <span style="width:100px;"><button class="update" id="1">update</button></span>
    <span>
        Blair Leighton
    </span>
    <span style="width:220px;">
        <input type="textfield" style="width:210px;" id="new_company" value="Intertrust Private Partners" />
    </span>
    <span>
        <input type="text" id="new_country" value="Japan" />
    </span>
    <span>
        <select id="new_status">
            <option value="no contact">no contact</option>
            <option value="no contact">hands off</option>
            <option value="no contact">ongoing</option>
            <option value="no contact">sent email</option>
            <option value="no contact">waiting</option>
            <option value="no contact">trash</option>
        </select>
    </span>
    <span>
        <input type="text" id="new_connection" value="not connected" />
    </span>
    <span style="width:220px;">
        <input type="textfield" style="width:210px;" id="new_notes" value="notes" />
    </span>
</div> 
```

事实上，还有许多其他 div 具有顺序 ID display2、edit2 等。

通过单击切换按钮显示编辑 div 后，我想从每个字段（在 jquery 数组中）收集数据，然后将其传递给 django 视图以更新数据库。

然后，保持在刷新以显示更新值的同一页面上。

我怎样才能做到这一点？

模型.py 是：

从 django.db 导入模型

```
class recruit(models.Model):
    first_name = models.CharField(max_length=25)
    last_name = models.CharField(max_length=35)
    position = models.CharField(max_length=55)
    company = models.CharField(max_length=55)
    country = models.CharField(max_length=125)
    connection = models.CharField(max_length=55)
    status = models.CharField(max_length=55)
    phone = models.CharField(max_length=55)
    placed = models.CharField(max_length=55)
    placed_with = models.CharField(max_length=55)
    skype = models.CharField(max_length=55)
    notes = models.TextField()
    company_url = models.CharField(max_length=125) 
```

非常感谢所有帮助。谢谢你。

理查德

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T14:45:30.587

有 django 应用程序可以为你完成这项工作，尽管我从未使用过它们。

快速谷歌搜索给了我这个： http: [//pypi.python.org/pypi/django-inplaceedit](http://pypi.python.org/pypi/django-inplaceedit)，也许有更多甚至更好的解决方案。

如果您真的想自己编写代码，我建议您使用[django-ModelForm](https://docs.djangoproject.com/en/dev/topics/forms/modelforms/#modelform) 而不是手动将所有字段放在一起。

然后你可以用一些javascript挂钩你的表单提交，让它用AJAX提交。我正在使用[jQuery](http://jquery.com/)来完成这样的任务，但任何其他 js 库（原型、dojo、mootools ......）也可以完成这项工作。

在 django 中，只需保护[ModelForm](https://docs.djangoproject.com/en/dev/topics/forms/modelforms/#modelform)文档中描述的数据，并将其传递回在响应中呈现的数据。你的 AJAX 调用的 onSuccess 用你的响应文本更新页面，你就完成了。

对于视图，您还可以使用 django 的[通用更新视图](https://docs.djangoproject.com/en/1.2/ref/generic-views/#django-views-generic-create-update-update-object)

您可能对此也感兴趣：[https ://stackoverflow.com/questions/708801/whats-the-best-edit-in-place-plugin-for-jquery](https://stackoverflow.com/questions/708801/whats-the-best-edit-in-place-plugin-for-jquery)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T01:52:27.470

我看不出这在 Django 和 PHP 中有什么不同。原理完全相同：JS 收集数据，通过 Ajax 发布数据，并使用响应更新 HTML。服务器端代码只是简单地保存并返回 Ajax 的结果：可以是 JSON，也可以是预渲染的 HTML 片段。

# javascript - 在没有查询字符串的情况下将参数传递给 iframe - ASP.NET

> ID：14684044
> 
> 赞同：0
> 
> 时间：2013-02-04T09:45:34.990
> 
> 标签：javascript, asp.net, iframe, query-string

在我的 ASP.NET 应用程序中，有一个 main.aspx，其中包含大量网格数据。为了在 main.aspx 中显示 Google 地图，我制作了一个 map.aspx 页面，该页面在 main.aspx 中作为框架参考给出。

现在，我想将坐标和一些描述从 main.aspx 传递到 map.aspx。查询字符串的长度超过 5000 个字符，因此在 javascipt 中设置帧的“src”会因为这个长度而失败。

如何在不使用查询字符串的情况下将数据从 main.aspx 发送到 map.aspx？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T13:18:13.897

好吧，我可以看到两种选择：

1.  将要传递给 iframe 页面的值存储在`Session`变量中，然后在*map.aspx*`Page_Load`事件中检索它。

**   在 Javascript 中使用全局变量：* 

 *在 main.aspx 中定义变量。`ScriptManager.RegisterStartupScript`如果需要在服务器端定义它们，可以使用 设置这些变量：

```
 <script type="text/javascript">
      var globalVar = 'Value 1';
      var otherGlobalVar = 'Value 2';
    </script> 
```

然后你可以在 map.aspx 中阅读它们：

```
 <script type="text/javascript">
       var parameter1 = parent.globalVar;
       var parameter2 = parent.otherGlobalVar;
    </script> 
```

我已经在 IE 7+、Firefox、Safari、Opera 和 Google Chrome 中测试了第二种解决方案。*

# excel - 根据其他列的数据子集从列中提取数据

> ID：14684046
> 
> 赞同：0
> 
> 时间：2013-02-04T09:45:42.043
> 
> 标签：excel

这就是我的数据的样子：

```
C1  C2  C3
1   1   a
2   2   a
3   3   a
4   4   a
7   5   a
8   6   a
9   7   a
10  8   a
    9   a
    10  b 
```

您会看到 C1 是 C2 列的子集。我现在只想从 C2 中提取与 C1 匹配的数据 - 以及来自 C3 的相应值。提取的数据只需复制到另一列

有人可以帮我一把吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T09:56:23.080

假设您在 C1 中的数据从 A2 开始，请执行以下操作：

1.  输入单元格 D2（C4 列）：`=IFERROR(VLOOKUP($A2,$B:$C,1,0),"")`
2.  输入单元格 E2（C5 列）：`=IFERROR(VLOOKUP($A2,$B:$C,2,0),"")`
3.  自动填充两个公式。

这会给你你想要的，缺失的值将显示为空白。如果您想连接 out 的两个部分 - 只需将聚合公式放入`=ISERROR(...)&ISERROR(...)`您喜欢的任何列第 2 行。

示例文件：[https ://www.dropbox.com/s/qglyxmu3tkfxy7g/DataExtract2Cols.xlsx](https://www.dropbox.com/s/qglyxmu3tkfxy7g/DataExtract2Cols.xlsx)

# c# - 使用 linq 转换日期时间格式

> ID：14684047
> 
> 赞同：0
> 
> 时间：2013-02-04T09:45:42.057
> 
> 标签：c#, asp.net, linq

我正在将 ASP.NET3.5 与 C# 2008 一起使用，我是新手`LINQ`。我有一个`dataset`要获取的表数据，其中包含一个类型为 的列`datetime`。现在，我想将此日期转换为 24 小时格式，仅包含日期和小时、分钟和秒。存储的日期时间为 12 小时格式。我努力了

```
ds.Tables[0].AsEnumerable().ToList().ForEach(i => i["CreatedDate"] = Convert.ToDateTime(i["CreatedDate"].ToString()).ToString("MM/dd/yyyy HH:mm:ss")); 
```

然后我将`dataset`to`gridview`作为`datasource`.

它没有给出任何例外，但它没有将日期转换为 24 小时格式。

任何人都可以帮忙吗？等待您的宝贵回复..

谢谢你，开发

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T09:58:05.390

*“存储的日期时间为 12 小时格式”*不，代表 a 的字符串`DateTime`已格式化，a`DateTime`永远没有格式。`DateTime`存储 a时使用`DateTime`a ，`string`仅在要显示时使用 a 。如果它已经`DateTime`在您的 a 中`DataSet`，则无需将其转换为 a`string`并转换回`DateTime`via `Convert.ToDateTime(i["CreatedDate"].ToString())`。

这段代码很乱，抱歉：

```
ds.Tables[0].AsEnumerable().ToList().ForEach(i => i["CreatedDate"] = Convert.ToDateTime(i["CreatedDate"].ToString()).ToString("MM/dd/yyyy HH:mm:ss")); 
```

为什么？

*   您正在将 a 转换`DataTable`为 a`List<DataRow>`尽管 a`DataTable`已经是内存中的对象。那是没有意义和低效的
*   您将 a 存储`DateTime`为字符串，您可以将 a 用作 a中的`DateTime`类型，当您想要显示值时，在最后阶段将其转换为字符串`DataColumn``DataTable`
*   您正在将“字符串日期”转换为日期时间，用于`ToString`将其格式化为字符串，然后再次将其转换为日期时间。这将使用默认值`ToString`（使用您的当前文化）来显示它，这就是您没有获得所需格式的原因

因此，假设这确实是一个字符串并且您不想/可以将其更改为`DataTime`，这可能会起作用：

```
var query = ds.Tables[0].AsEnumerable()
    .Select(r => Date.Parse(r.Field<String>("CreatedDate")).ToString("MM/dd/yyyy HH:mm:ss"));
gridView1.DataSource = query;
gridView1.DataBind(); 
```

请注意，您还可以使用[`DataFormatString`](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.boundfield.dataformatstring.aspx)GridView 的属性`BoundField`：

```
<asp:GridView ID="GridView1" runat="server" 
        AutoGenerateColumns="False" >
        <Columns>
            <asp:BoundField DataField="CreatedDate" 
                HeaderText="Created-Date" 
                SortExpression="CreatedDate" 
                DataFormatString="MM/dd/yyyy HH:mm:ss" /> 
```

但是随后您需要将其存储为/将其转换为`DateTime`表中的 a 并将其用作`DataSource`.

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-04T09:57:12.280

我希望它会起作用。你可以试试这个。

```
 ds.Tables[0].AsEnumerable().ToList().ForEach(i => i["CreatedDate"] =    Convert.ToDateTime(i["CreatedDate"].ToString()).ToString("HH:mm:ss")); 
```

# api - 尼泊尔语-英语语言翻译器api

> ID：14684049
> 
> 赞同：1
> 
> 时间：2013-02-04T09:45:45.530
> 
> 标签：api, localization, language-translation

我正在为我的项目寻找语言翻译 A​​PI。我不想使用 Google Translate API。

谁能推荐另一个？一个开源翻译器会更好。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-10T16:08:52.327

您可以使用 Bing (Microsoft) 机器翻译引擎。但它与 translate.google.com 几乎相同 或者，您可以制作自己的英语-尼泊尔语机器翻译系统（引擎），例如： [http://www.statmt .org/moses/](http://www.statmt.org/moses/) 但是，这将花费你大量的精力和时间（问题是它是否值得）。以下是一些讨论，如果您正在寻找一些不常用语言的语言翻译器，您有哪些选择： [http ://www.linkedin.com/groupItem?view=&gid=4370115&type=member&item=201871372&qid=3588ce96-f0c1-4789 -a72d-b00a124127ee&trk=group_most_popular-0-b-ttl&goback=.gmp_4370115](http://www.linkedin.com/groupItem?view=&gid=4370115&type=member&item=201871372&qid=3588ce96-f0c1-4789-a72d-b00a124127ee&trk=group_most_popular-0-b-ttl&goback=.gmp_4370115)

（希望你能展示出来）

# makefile - X-Loader Makefile 解释

> ID：14684050
> 
> 赞同：1
> 
> 时间：2013-02-04T09:45:50.727
> 
> 标签：makefile, cross-compiling, embedded-linux

我正在浏览起重机板的 X-Loader 的 Makefile。我们必须为 ARM 交叉编译它。我被困在下面的代码中，无法继续。请指导我已经完成的工作。

```
x-load: $(OBJS) $(LIBS) $(LDSCRIPT)
        UNDEF_SYM=`$(OBJDUMP) -x $(LIBS) |sed  -n -e 's/.*\(__u_boot_cmd_.*\)/-u\1/p'|sort|uniq`;\
        $(LD) $(LDFLAGS) $$UNDEF_SYM $(OBJS) \
            --start-group $(LIBS) --end-group $(PLATFORM_LIBS) \
            -Map x-load.map -o x-load

System.map: x-load
        @$(NM) $< | \
        grep -v '\(compiled\)\|\(\.o$$\)\|\( [aUw] \)\|\(\.\.ng$$\)\|\(LASH[RL]DI\)' | \
        sort > System.map

oneboot:    x-load.bin
        scripts/mkoneboot.sh 
```

在哪里，

```
OBJS  = cpu/$(CPU)/start.o

LIBS is a set of library archives

PLATFORM_LIBS is GCC Library

LD  = $(CROSS_COMPILE)ld

LDFLAGS are the corresponding flags 
```

还有，需要什么`oneboot`？`mkoneboot.sh`转换`x-load.bin.ift`为`x-load-signed.ift`. _ 在什么情况下，将使用 this 而不是通常的`x-load.bin.ift`？

`System.map`用于调试目的。需要什么`x-load.map`？

# mysql - 为什么 ibdata1 文件消耗的空间比 .frm + .MYD + .MYI 文件少？

> ID：14684051
> 
> 赞同：1
> 
> 时间：2013-02-04T09:45:57.810
> 
> 标签：mysql, innodb

我正在寻找 ibdata1 文件大小，但看到它只有 11MB，我感到很奇怪。还有另一个名称`manu`与数据库名称相同的文件夹，大小为 15GB。（在我的本地机器上）

我查看了实时服务器，他们的情况完全相反！

ibdata1 文件为 128 GB，具有 .frm + .MYD +.MYI 文件大小的文件夹较小。

如果我查找统计信息（本地机器）-

```
manu DB is 15GB
ibdata1 is 11MB 
```

除此之外，在“manu”文件夹中，每个表格都有 3 个文件 - （仅作为示例：表格`NEWS`）。

```
NEWS.frm
NEWS.MYD
NEWS.MYI 
```

很多次我已经从'manu'（在我的本地）中删除了所有表格并重新创建了表格。

我的问题是-为什么实时数据库在 ibdata 中包含所有内容（我假设 ibdata1 将包含我们在 mysql 表中看到的所有数据）以及为什么实时 ibdata1 非常少并且与它们相关的文件很大。它不是将所有数据存储在我本地的 ibdata1 中吗？

可能是什么问题。

实际上我想重建数据库并设置 innodb_file_per_table 因为许多已删除的表还没有释放空间并且数据库大小越来越大。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-04T13:48:02.287

这是因为您的本地服务器使用的表引擎与您的实时服务器不同。

当表属于引擎 InnoDB 时，它们的数据存储在 ibdata1 中，当它们存储在 .MY* 文件中时，它们属于引擎 MyISAM。

在数据库中，甚至可以混合使用不同引擎的表。

主要区别在于，InnoDB 能够处理事务。这意味着当任何失败时语句可以恢复，而这在 MyISAM 中是不可能的。

创建数据库时可以为新创建的表指定默认引擎。我猜你的情况就是这样。`CREATE TABLE`您可以简单地转储您的表，并在创建的备份脚本中，您可以在每个语句的末尾替换引擎。然后再次插入数据就可以了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-11-05T21:03:12.443

我知道这是一个有点老的问题，但要补充的重要一点是 ibdata 通过两种方式存储 InnoDB 表中的数据：

1- 如果没有启用 my.cnf (my.ini) innodb_file_per_table，InnoDB 表中的所有数据都存储到 ibdata 文件中，如果它有些损坏，恭喜，你失去了一切！

2-启用 my.cnf (my.ini) innodb_file_per_table 后，每个表 (.frm) 将有自己的数据文件 (.ibd)，并且 ibdata1 将用作“缓存”/“工作文件”，如果您损坏了 mysql您可以使用 .ibd 文件恢复数据。

恢复表以进行转储的一些方法（在操作后表变得无用）如下： [http://www.chriscalender.com/recovering-an-innodb-table-from-only-an-ibd-file/](http://www.chriscalender.com/recovering-an-innodb-table-from-only-an-ibd-file/) [http ://dev.mysql.com/doc/refman/5.0/en/forcing-innodb-recovery.html](http://dev.mysql.com/doc/refman/5.0/en/forcing-innodb-recovery.html) [http://www.quora.com/Jordan-Ryan/Web-Dev/How-to-Recover-innoDB- MySQL-files-using-MAMP-on-a-Mac](http://www.quora.com/Jordan-Ryan/Web-Dev/How-to-Recover-innoDB-MySQL-files-using-MAMP-on-a-Mac)

如果您丢失数据，永远不要在备份文件之前使用“innodb_force_recovery”，因为这会破坏您的 ibdata 文件，即使值为 1、2 和 3，也存在风险，值为 4、5 和 6，其肯定会造成损害，因为它们是强制 mysql 读取数据以进行转储的更具侵略性的方式。（详情：[http](http://dev.mysql.com/doc/refman/5.6/en/innodb-parameters.html#sysvar_innodb_force_recovery) ://dev.mysql.com/doc/refman/5.6/en/innodb-parameters.html#sysvar_innodb_force_recovery ）

最后但同样重要的是，为避免获取损坏的 ibdata 文件并丢失数据，在 my.cnf (my.ini) 文件中始终明确声明 innodb_fast_shutdown=0，如果您不声明它，它的默认值是“ 1"，快速关机会忽略一些安全操作，很容易损坏你的ibdata文件。详细信息： http: [//dev.mysql.com/doc/refman/5.6/en/innodb-parameters.html#sysvar_innodb_fast_shutdown](http://dev.mysql.com/doc/refman/5.6/en/innodb-parameters.html#sysvar_innodb_fast_shutdown)

更多 InnoDB 参数： [http ://dev.mysql.com/doc/refman/5.6/en/innodb-parameters.html](http://dev.mysql.com/doc/refman/5.6/en/innodb-parameters.html)

# php - 这个正则表达式的否定断言是什么？

> ID：14684060
> 
> 赞同：0
> 
> 时间：2013-02-04T09:46:26.080
> 
> 标签：php, regex

我正在尝试匹配以下内容：

*   这：

    ```
    HIGH SCHOOL WRESTLING NOTEBOOK: A surge at Delaware Valley, team rankings shakeup and more. 
    ```

*   有了这个 ：

    ```
    <pre>
      <div class="sum">
        <div class="photo_gutter">
          <div class="photo">
            <a href="http://media.lehighvalleylive.com/brad-wilson/photo/jaryd-flank-b30e919c41bc86b2.jpg">
              <img src="http://media.lehighvalleylive.com/brad-wilson/photo/jaryd-flank-b30e919c41bc86b2.jpg" alt="" title="" width="200" border="0"/>
            </a>
          </div>
        </div>
      </div>
      HIGH SCHOOL WRESTLING NOTEBOOK: A surge at Delaware Valley, team rankings shakeup and more.
    </pre> 
    ```

到目前为止我所拥有的是`/<.*>\s/i`，但我需要相反的。有人能帮我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T09:51:25.373

不要使用正则表达式来解析 HTML，而是使用[PHP Domdocument](http://php.net/manual/en/class.domdocument.php)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T12:09:08.760

不建议使用正则表达式来解析 HTML，但因为它是一项简单的任务（并且可能意味着学习正则表达式）：

你有这个：`/<.*>\s/i`

1-`i`修饰符在这里什么都不做，因为您没有在正则表达式中使用任何可能区分大小写的字符。即：`/apple/i`有道理，因为你想找到`Apple`. `/\w+/i`什么都不做，因为`\w`包括小写和大写字符。

2-如果您正在解析 HTML，最好不要假设或使用任何`\s`内容，除非您在标签内。

3-如果要将正则表达式的一部分捕获到变量中，则必须使用`(`and `)`。即：`/(\w+) Apple/`解析`Red Apple`会给你或`Red`在函数`$1`的匹配数组中`preg_match()`。

现在我该怎么做：

首先，我会从输入字符串中删除任何`\r\n`or 。`\n`正则表达式仅使用 1 行文本效果更好。你可以这样做`str_replace()`

如果你想得到任何不在里面的东西`<>`：

`/>(.*?)</`

如果您想获取某个标签内的文本，例如`<div>this one</div>`：

`/<div>(.*?)<\/div>/`

The `?` character makes the `.*` match to be non-greedy, so It will get the least number of characters that match the pattern.

Hope it helped.

# mapreduce - 将 Map-Reduce 与 Oozie 集成时出错

> ID：14684061
> 
> 赞同：0
> 
> 时间：2013-02-04T09:46:27.167
> 
> 标签：mapreduce, oozie

当我尝试使用 oozie 在 mapreduce 中运行字数统计 prg 时。它只是读取输入记录并显示它。我猜它甚至没有调用我的映射器和减速器类。因为我使用的是新的 API，所以在 workflow.xml 中也包含了 new-api 属性标签。

Map-reduce 片段：

```
public class WordCount {

  public static class Map extends Mapper<LongWritable, Text, Text, IntWritable> {
     private final static IntWritable one = new IntWritable(1);
     private Text word = new Text();

     public void map(LongWritable key, Text value, Context context) throws IOException, InterruptedException {
         String line = value.toString();
         StringTokenizer tokenizer = new StringTokenizer(line);
         while (tokenizer.hasMoreTokens()) {
             word.set(tokenizer.nextToken());
             context.write(word, one);
         }
 } 
```

}

```
 public static class Reduce extends Reducer<Text,IntWritable,Text,IntWritable> {

     public void reduce(Text key, Iterable<IntWritable> values, Context context) 
       throws IOException, InterruptedException {
         int sum = 0;
         for (IntWritable val : values) {
             sum += val.get();
         }
             context.write(key, new IntWritable(sum));
     } 
```

}

我的工作流.xml：

```
 <?xml version="1.0" encoding="UTF-8"?>
    <workflow-app xmlns='uri:oozie:workflow:0.1' name="wordcount">
    <start to="wc-node" />
    <action name="wc-node">
    <map-reduce>
        <job-tracker>${jobTracker}</job-tracker>
        <name-node>${nameNode}</name-node>
        <prepare>
            <delete path="${nameNode}/user/${wf:user()}/${wordcountRoot}/output-    data/${outputDir}"/>
        </prepare>

        <configuration>

            <property>
                <name>mapred.mapper.new-api</name>
                <value>true</value>
            </property>

            <property>
                <name>mapred.reducer.new-api</name>
                <value>true</value>
                 </property>

            <property>
                <name>mapreduce.map.class</name>
                <value>WordCount.Map</value>
            </property>

            <property>
                <name>mapreduce.reduce.class</name>
                <value>WordCount.Reduce</value>
            </property>

            <property>
              <name>mapred.output.key.class</name>
              <value>org.apache.hadoop.io.Text</value>
            </property>

            <property>
               <name>mapred.output.value.class</name>
               <value>org.apache.hadoop.io.IntWritable</value>
            </property>

            <property>
                <name>mapred.map.tasks</name>
                <value>1</value>
            </property>

            <property>
                <name>mapred.input.dir</name>
                <value>/user/${wf:user()}/${wordcountRoot}/input-data</value>
            </property>
            <property>
                <name>mapred.output.dir</name>
                <value>/user/${wf:user()}/${wordcountRoot}/output-data/${outputDir}</value>
            </property>

            <property>
                <name>mapred.job.queue.name</name>
                <value>${queueName}</value>
            </property>

            <property>
             <name>mapreduce.job.acl-view-job</name>
             <value>*</value>
            </property>

            <property>
               <name>oozie.launcher.mapreduce.job.acl-view-job</name>
               <value>*</value>
            </property>

         </configuration>

    </map-reduce>

    <ok to="end" />
    <error to="fail" />
</action>

<kill name="fail">
    <message>Map/Reduce failed</message>
</kill>
<end name="end" /> 
```

我提到了这个链接[https://cwiki.apache.org/OOZIE/map-reduce-cookbook.html](https://cwiki.apache.org/OOZIE/map-reduce-cookbook.html)但仍然没有运气。如果any1遇到了这个问题，请指导我哪里出错了。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-04T07:42:49.563

问题已解决......在使用新的 mapreduce API 时..我们需要在映射器和减速器类名前加上“$”符号：

```
<property>
 <name>mapreduce.map.class</name>
 <value>oozie.WordCount$Map</value>
</property> 
<property> 
 <name>mapreduce.reduce.class</name>
 <value>oozie.WordCount$Reduce</value>
</property> 
```

# mysql - mysql：源错误 2？

> ID：14684063
> 
> 赞同：81
> 
> 时间：2013-02-04T09:46:28.797
> 
> 标签：mysql

当我尝试获取特定的 .sql 文件时，即`'metropolises.sql'`我之前从数据库创建并保存的文件，会显示以下错误：

> 无法打开文件“metropolises.sql”，错误：2

知道出了什么问题吗？

* * *

## 回答 #1

> 赞同：103
> 
> 时间：2013-02-04T09:59:10.540

假设您的意思是您尝试使用[该`source`命令](http://dev.mysql.com/doc/refman/5.0/en/batch-commands.html)从文本文件执行 SQL 语句，则给出的错误号似乎是从 POSIX 层传递的。

因此，使用[这个资源](http://www.barricane.com/c-error-codes-include-errno)，我们可以推断出错误值 2 表示“没有这样的文件或目录”。

**简而言之，你走错了路。**

尝试提供一个*绝对路径*，因为不清楚*当前工作目录*在 MySQL 服务器的上下文中是什么。您可能会假设它是您的 shell 的工作目录，但我们不应该期望这是真的。

* * *

## 回答 #2

> 赞同：38
> 
> 时间：2013-06-06T07:19:07.540

只需使用文件的**绝对路径**，然后使用**正**斜杠而不是使用反斜杠。

**例子：**

带**反斜杠**：源 C:\folder1\metropolises.sql
带**正斜杠**：源 C:/folder1/metropolises.sql

* * *

## 回答 #3

> 赞同：18
> 
> 时间：2020-06-19T07:20:06.890

> # 如果您在 Docker 内部使用 MYSQL

请注意，如果您在 docker 中运行 MySQL，那么您必须首先将转储复制到您的 MySQL docker 环境中。为此，请按照以下步骤操作

1.  首先，通过以下方式检查并复制 MySQL docker 的容器 ID：

    `sudo docker ps`

2.  使用以下命令将 SQL 转储文件复制到您的容器中：

    `sudo docker cp /path/to/sql/file.sql MysqlDockerID:/`

    如果您想将文件复制到 docker 内的任何其他目录/路径中，这会将转储文件复制到 docker 根文件夹中，将“MysqlDockerID：”之后的“/”替换为您想要的适当路径。

3.  现在要在正在运行的容器中与 MySQL 交互，请运行以下命令：

    `sudo docker exec -it MysqlDockerID bin/bash`

4.  现在通过以下方式使用终端连接到 MySQL：

    `mysql -u yourUserName -p`

    这将要求您输入密码。输入正确的密码以继续。

5.  列出可用的数据库：

    `show Databases;`

    这将列出可用的数据库

6.  假设您要将转储导入到的数据库名称是“MyDatabase”。切换到使用：

    `use MyDatabase`

7.  现在您可以通过键入以下内容来导入文件：

    `source file.sql`

    如果您已将文件复制到根文件夹（使用步骤 2），请记住上述命令有效。如果您已将其复制到任何其他路径，请确保使用相同的路径

* * *

## 回答 #4

> 赞同：14
> 
> 时间：2014-02-02T08:40:40.917

相关问题 我在运行源命令时遇到错误 2：即使文件名或文件路径中包含空格，文件名也不能用引号引起来。

* * *

## 回答 #5

> 赞同：14
> 
> 时间：2017-04-13T05:33:32.087

它可能是您文件的文件路径。如果您不知道要使用的文件的确切位置，请尝试在 Finder 中找到您的文件，然后将文件拖到终端窗口中

```
mysql> SOURCE dragfilePathHere 
```

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2014-02-04T10:48:44.393

我首先到达文件

```
c:\windows>cd c:\akura\Db Scripts

c:\akura\Db Scripts>mysql -u root -p root

mysql>\. EXECUTER_NEW_USER.sql

here EXECUTER_NEW_USER.sql my file name 
```

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2014-06-12T16:47:26.737

我在 Windows 上遇到了同样的错误。我用（在cmd：mysql -u root之后）解决了它：

```
mysql> SOURCE C:/users/xxx/xxxx/metropolises.sql; 
```

确保键入正确的文件路径

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2017-08-05T21:42:25.883

如果您使用 vagrant，请确保该文件位于服务器上，然后使用该文件的路径。例如，如果文件存储在公用文件夹中，您将拥有

```
sql> source /var/www/public/xxx.sql 
```

其中 xxx 是文件名

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2015-11-25T05:22:35.873

在我的 windows 8.1 和 mysql 5.7.9 MySQL Community Server (GPL) 上，我必须删除`;`文件路径后面的。

这失败了：来源`E:/jokoni/db/Banking/createTables.sql;`

这有效：源`E:/jokoni/db/Banking/createTables.sql` （没有终止，并且在路径中使用正斜杠而不是 Windows 的反斜杠）

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2015-06-29T08:58:46.470

我在使用此查询的 mysql 命令行中收到此错误：

```
source `db.sql`; 
```

我将上面的内容更改为以下内容以使其工作：

```
source db.sql; 
```

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2020-07-22T17:14:30.690

我遇到了这个问题，事实证明，如果您使用 wamp 服务器运行 mysql，则必须使用 wamp64 文件夹中的文件路径。所以当绝对路径是：`C:/wamp64/www/foldername/filename.sql` 你必须使用的路径是： `www/foldername/filename.sql`

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2019-01-14T03:57:40.750

在我的 Mac 上，这是唯一对我有用的解决方案。

[https://stackoverflow.com/a/45530305/5414448](https://stackoverflow.com/a/45530305/5414448)

```
 1 - Download the .sql file and remember it's location.

2 - Open your mysql from command prompt or terminal.

3 - Create a database with the same name as that of the database present in the .sql file (create database your_database_name)

4 - Now exit out from the mysql command line client

5 - Now try and execute this command =>

mysql -u your_username -p your_database_name < your_sql_file_with_complete_location

example -  mysql -u root -p trial < /home/abc/Desktop/trial.sql

here my .sql file is named trial and is present in the desktop, the database is also name trial

6 - You should now have your sql file imported to the corresponding mysql database. 
```

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2013-02-04T10:00:46.013

可能是您使用的文件名或路径可能不正确

在我的系统中，我在 c:\ 创建了文件 abcd.sql

并使用命令`mysql> source c:\abcd.sql` 然后我得到了结果

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2018-11-24T06:26:44.267

对于 Mac 用户，您可以将路径指定为，

```
source /Users/YOUR_USER_NAME/Desktop/metropolises.sql; 
```

*我假设您需要的文件`source`在您`desktop`的文件中，文件名是`metropolises.sql`

* * *

如果你键入，

```
source metropolises.sql 
```

然后文件将在默认位置查找，

```
/Users/YOUR_USER_NAME/metropolises.sql; 
```

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2020-07-20T10:04:28.767

传递完整路径不会出错，但如果文件夹有 MySQL 空格，则它无法识别 .sql 文件。我在 OS UNIX 上有 MySQL 8.0.21。

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2017-12-07T20:48:41.393

对我来说，这是因为该文件位于共享驱动器上，并且由于某种原因无法访问该路径。我剪切了文件并将其放在我的本地驱动器上的一个没有空格的路径中，它得到了解决。

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2019-09-19T01:50:03.890

解决方案 - 1）确保您位于`root`应用程序的文件夹中。例如 app/db/schema.sql。

解决方案 - 2) 打开/显示窗口上的文件夹，然后在 keywork ( *space*`&&` ) 文件源旁边的命令行中拖放。例如源用户/myMAC/app/db/schema.sql`source`

 ** * *

## 回答 #18

> 赞同：0
> 
> 时间：2018-01-24T06:41:28.400

当我使用命令源并通过拖放它给出sql文件路径时，我得到了同样的错误。

然后我只需要删除默认情况下通过拖放出现的那些单引号，文件扩展名之前的一个空格，它就可以工作了。

解决方案：

source /home/xyz/file .sql ;（路径和文件扩展名前的空格）

* * *

## 回答 #19

> 赞同：0
> 
> 时间：2019-01-13T10:44:50.673

我的解决方案是 Windows 中的文件权限。只需将文件的完全控制权交给所有用户，它就会起作用。导入后，将权限恢复到之前的状态。

* * *

## 回答 #20

> 赞同：0
> 
> 时间：2019-04-18T20:05:31.953

我的 Mac 出现问题，因为路径中的一个文件夹（目录）名称中有一个空格。顺便说一句，空间被 \ 转义了，但 mySQL 不理解

* * *

## 回答 #21

> 赞同：0
> 
> 时间：2016-05-11T15:33:30.343

如果您正在运行 dockerized MySQL 容器，例如来自此官方 Docker 镜像注册表的容器：[https](https://hub.docker.com/_/mysql/) ://hub.docker.com/_/mysql/您也可能会遇到[此问题](https://github.com/docker-library/mysql/issues/166)。

* * *

## 回答 #22

> 赞同：0
> 
> 时间：2016-03-31T23:10:38.083

如果您使用的是 Debian 8 (Jessie) Linux，请尝试`cd`进入`'metropolises.sql'`. 运行`mysql`并执行`SOURCE ./metropolises.sql;`

基本上，尝试*相对路径*。我试过这个并且它有效。

* * *

## 回答 #23

> 赞同：0
> 
> 时间：2020-01-23T09:41:18.710

我在我的 Xubuntu 桌面上遇到了这个问题。我通过重命名所有文件和文件夹来修复它，因此文件路径中没有空格。

* * *

## 回答 #24

> 赞同：-1
> 
> 时间：2015-03-10T09:16:32.367

删除路径文件夹名称中的空格，它适用于我的 mac 路径。

> （例如：将文件夹名称 MySQL Server 5.1 更改为 MySQLServer5.1）

* * *

## 回答 #25

> 赞同：-1
> 
> 时间：2016-09-12T05:40:42.290

当我从 MySQL 控制台尝试时，我也收到了同样的消息。但是，当我打开命令提示符并执行相同的步骤时，它会起作用。

```
C:\Users\SubhenduD>cd ../
C:\Users>cd ../
C:\>cd \xampp\mysql\bin

C:\xampp\mysql\bin>mysql -u -root

Welcome to the MySQL monitor.  Commands end with ; or \g.
Your MySQL connection id is 68
Server version: 5.6.16 MySQL Community Server (GPL)
Copyright (c) 2000, 2014, Oracle and/or its affiliates. All rights reserved. 
Oracle is a registered trademark of Oracle Corporation and/or its
affiliates. Other names may be trademarks of their respective
owners.

Type 'help;' or '\h' for help. Type '\c' to clear the current input statement.

mysql> use balticktravels;

mysql> source balticktravels.sql; 
```*

# python - 如何从这个输入框中获取数据？

> ID：14684064
> 
> 赞同：0
> 
> 时间：2013-02-04T09:46:30.507
> 
> 标签：python, django, web

我有一个输入类型定义为：

```
<input type="text" name="username" value="{{ username}}" /> 
```

如何从这个输入框中获取数据？是否有从输入框中获取这些文本的 get 方法？我知道这是一个简单的问题，但我正在努力学习它们。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-04T09:53:51.307

在您看来，这取决于`request.method`：

```
if request.method == 'POST':
    username = request.POST.get('username')
else:
    username = request.GET.get('username') 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-04T09:55:35.263

假设输入元素是用户将提交的表单，您可以在视图函数中捕获提交的值：

```
def submit(request):
    if request.method == 'POST':
        username = request.POST.get('username')
        do_something_with(username) 
```

另请参阅[Django 文档](https://docs.djangoproject.com/en/dev/ref/request-response/)。

# apache - JBoss 7 多根上下文 Web 应用程序

> ID：14684069
> 
> 赞同：3
> 
> 时间：2013-02-04T09:46:39.447
> 
> 标签：apache, jboss, jboss7.x, war

我需要在我的 Apache2+ JBoss7.1 环境中配置两个网站：www.foo.com 和 www.bar.net。

Apache 站点配置示例（它们彼此相似，除了站点名称）：

```
<VirtualHost *:80>
        ServerAdmin     foo@bar.com
        ServerName      www.foo.com

        DocumentRoot /var/www/foo
        <Directory />
                Options FollowSymLinks
                AllowOverride None
        </Directory>
        <Directory /var/www/foo>
                Options Indexes FollowSymLinks MultiViews
                AllowOverride None
                Order allow,deny
                allow from all
        </Directory>

        ScriptAlias /cgi-bin/ /usr/lib/cgi-bin/
        <Directory "/usr/lib/cgi-bin">
                AllowOverride None
                Options +ExecCGI -MultiViews +SymLinksIfOwnerMatch
                Order allow,deny
                Allow from all
        </Directory>

        ErrorLog ${APACHE_LOG_DIR}/error.log
        LogLevel warn
        CustomLog ${APACHE_LOG_DIR}/access.log combined

        SetEnvIf Request_URI "/photos/*" no-jk
        JkMount / ajp13
        JkMount /* ajp13

</VirtualHost> 
```

在 JBoss Standalone.xml 我有：

```
<subsystem xmlns="urn:jboss:domain:web:1.1" default-virtual-server="default-host" native="false">
            <connector name="http" protocol="HTTP/1.1" scheme="http" socket-binding="http"/>
            <connector name="ajp" protocol="AJP/1.3" scheme="http" socket-binding="ajp"/>
            <virtual-server name="default-host" enable-welcome-root="false" default-web-module="bar">
                <alias name="localhost"/>
                <alias name="www.bar.net"/>
            </virtual-server>
            <virtual-server name="foo" enable-welcome-root="false" default-web-module="foo">
                <alias name="www.foo.com"/>
            </virtual-server>
        </subsystem> 
```

虽然两个应用程序都有 jboss-web.xml：

```
<?xml version="1.0" encoding="UTF-8"?>
<jboss-web>
    <security-domain>java:/jaas/foo</security-domain>
    <context-root>/</context-root>
</jboss-web> 
```

部署 foo.war 会导致：

安装：无法处理部署“foo.war”的安装阶段

> 引起：org.jboss.msc.service.DuplicateServiceException：服务 jboss.web.deployment.default-host./.realm 已注册

什么是正确的配置？错误在哪里？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T11:26:30.567

我认为问题在于您为两个应用程序定义了相同的上下文根。您不能同时拥有两个具有相同上下文根的应用程序。一种可能的解决方案是为每个应用程序定义不同的上下文（分别为 /foo 和 /bar），并在每个 Apache 虚拟主机中使用 ProxyPass 指令。

```
<VirtualHost *:80>
        ServerAdmin     foo@bar.com
        ServerName      www.foo.com
        ...
        ProxyPass         /     http://yourjbossserver:port/foo/
        ProxyPassReverse  /     http://yourjbossserver:port/foo/
</VirtualHost *:80>

<VirtualHost *:80>
        ServerAdmin     foo@bar.com
        ServerName      www.bar.com
        ...
        ProxyPass         /     http://yourjbossserver:port/bar/
        ProxyPassReverse  /     http://yourjbossserver:port/bar/
</VirtualHost *:80> 
```

这样您就可以直接通过以下地址访问您的应用程序：www.bar.com 和 www.foo.com。（请注意，如果您有一个 Apache 作为代理，并使用它自己的虚拟主机，则无需定义 JBoss 虚拟主机）。

一个简单但完整的例子是（在这种情况下，我已经配置了 jboss jmx-console，与 apache 在同一台机器上运行，可以从 www.foo.com 访问）：

```
<VirtualHost *:80>
    ServerName www.foo.com
    ProxyPass         /     http://localhost:8080/jmx-console/
    ProxyPassReverse  /     http://localhost:8080/jmx-console/
</VirtualHost> 
```

请注意，您需要在地址末尾添加反斜杠。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T08:21:40.913

将 foo 添加到我的配置中就足够了，现在可以很好地与 mod_jk 一起使用。我写了一篇博客：http: [//fabiobozzo.wordpress.com/2013/02/25/multiple-web-applications-with-jboss-and-apache/](http://fabiobozzo.wordpress.com/2013/02/25/multiple-web-applications-with-jboss-and-apache/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-29T12:39:29.697

实际上他的方式很好。如果他不想，就不需要使用代理。原始配置中缺少的部分是他从未在 jboss-web.xml 中提及该别名。

```
<jboss-web>
   <security-domain>java:/jaas/foo</security-domain>
   <context-root>/</context-root>
   <virtual-host>www.foo.com</virtual-host>
</jboss-web> 
```

在第二个应用程序中

```
<jboss-web>
   <security-domain>java:/jaas/foo</security-domain>
   <context-root>/</context-root>
   <virtual-host>www.bar.net</virtual-host>
</jboss-web> 
```

并摆脱那个 default-web-module 标签。你正在用那个烂摊子制造一个悖论。你要么去一个或另一个.. 不是两个。那是在您没有映射别名时使用的。

# ruby - 大虾：创建具有标题横幅和重复标题表的 PDF

> ID：14684072
> 
> 赞同：2
> 
> 时间：2013-02-04T09:46:45.000
> 
> 标签：ruby, pdf, prawn

目标是：创建具有标题横幅和重复标题表
的 PDF 问题是：如果表格开始新页面，pdf.move_down 不起作用

```
CODE:
# repeat drawing in every page
pdf.repeat(:all, :dynamic => true) do
    pdf.font("#{Rails.root}/vendor/pdffonts/ThonburiBold.ttf") do
    pdf.font_size = 8 

    pdf.float { pdf.text "Time: #{tt}", :align => :left }
    pdf.float { pdf.text "Page #{pdf.page_number}", :align => :right }
    pdf.float { pdf.text "Inquiry Name: #{page_title}", :align => :center }

    pdf.move_down 15

    pdf.float { pdf.text "AS OF #{Time.now.to_date}", :align => :center }

    pdf.move_down 40      ## move down to draw the following table
    pdf.stroke_horizontal_rule
end

## ... building big_data_array for table ...

table_config = {
    :header => true,
    :row_colors => ["FFFFFF", "F0F0F0"],
    :cell_style => { :padding => 1 }
}

# draw a long table
pdf.table(big_data_array, table_config) do |t|
    t.before_rendering_page do |c|
      pdf.move_down 40    ## try to add margin-top before render the table in every page
    end
    t.row(0).background_color = "DADADA"
    # style rows and cells ...
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T06:45:24.467

我决定修改`Prawn::Table`方法`draw`来接受我的偏移值

```
module Prawn
  class Table
    def set_before_render_offset(y = 0)
    @user_offset = y
  end

  def draw
    ...
    # start a new page or column
    @pdf.bounds.move_past_bottom
    if cell.row > 0 && @header
      header_height = add_header(cells_this_page, @pdf.cursor - @user_offset, cell.row-1)
    else
      header_height = 0
    end
    offset = @pdf.y - cell.y - header_height - @user_offset
    started_new_page_at_row = cell.row
    ...
  end
end 
```

# java - VLCJ 中的 AWT 按钮不可点击

> ID：14684073
> 
> 赞同：0
> 
> 时间：2013-02-04T09:46:48.803
> 
> 标签：java, swing, awt, mixing, vlcj

我创建了一个简单的 VLCJ 项目，它由一个简单的嵌入式播放器和一个退出按钮组成。

代码如下：

```
package test;

import java.awt.BorderLayout;
import java.awt.Button;
import java.awt.Color;
import java.awt.Frame;
import java.awt.Panel;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;

import javax.swing.JFrame;
import javax.swing.JPanel;
import javax.swing.SwingUtilities;

import uk.co.caprica.vlcj.binding.LibVlc;
import uk.co.caprica.vlcj.component.EmbeddedMediaPlayerComponent;
import uk.co.caprica.vlcj.runtime.RuntimeUtil;

import com.sun.jna.Native;
import com.sun.jna.NativeLibrary;

public class Demo {

private final JFrame frame; 
private final EmbeddedMediaPlayerComponent mediaPlayerComponent;
private JPanel videoPane;
private JPanel buttonPane;
private Button exitButton;
private ActionListener a;

private static String vlc_location = "C:\\Program Files\\VideoLAN\\VLC";

public static void main(String[] args) {

    NativeLibrary.addSearchPath(RuntimeUtil.getLibVlcLibraryName(), vlc_location);
    Native.loadLibrary(RuntimeUtil.getLibVlcLibraryName(), LibVlc.class);

    SwingUtilities.invokeLater(new Runnable() {
        @Override
        public void run() {
            new Demo().run();
        }
    });
}

public Demo() { 

    mediaPlayerComponent = new EmbeddedMediaPlayerComponent();

    a = new MyActionListener();
    exitButton = new Button("Exit");
    exitButton.setActionCommand("Exit app");        
    exitButton.addActionListener(a);

    buttonPane = new JPanel();
    buttonPane.setLayout(new BorderLayout());
    buttonPane.setBackground(Color.black);
    buttonPane.add(exitButton, BorderLayout.CENTER);

    videoPane = new JPanel();
    videoPane.setLayout(new BorderLayout());
    videoPane.setBackground(Color.black);
    videoPane.add(mediaPlayerComponent, BorderLayout.CENTER);
    videoPane.add(buttonPane, BorderLayout.PAGE_END);

    frame = new JFrame("vlcj demo");        
    frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    frame.setLocation(100, 100);
    frame.setSize(1200, 800);       
    frame.setContentPane(videoPane);        
    frame.setVisible(true);
}

public void run() {         
    mediaPlayerComponent.getMediaPlayer().playMedia(video_file);
}

class MyActionListener implements ActionListener {

    @Override
    public void actionPerformed(ActionEvent arg0) {
        String s = arg0.getActionCommand();

        if (s.equals("Exit")) {
            System.exit(0);
        }

    }

}

} 
```

问题是该按钮确实显示但无法单击。当我删除 videoPane 时，它​​又回到了可点击状态！如果我遗漏了什么，有什么想法吗？

我正在为 vlcj 使用 2.1.0 版本。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T03:20:16.473

感谢 MadProgrammer 的建议。我继续考虑它并尝试在 run() 中注释掉这行代码。JButton 回来了！

但是，当我取消注释 run() 中的代码时，JButton 消失了。我在想可能是 Swing 可运行文件导致 JButton 的创建出现问题。

因此，我所做的是注释掉整个 Swing 可运行文件并使用：

```
final Demo demo = new Demo();
demo.run(); 
```

演示现在可以播放视频并显示退出按钮，谢谢！

# batch-file - 批处理文件打印出带有@echo off 的命令

> ID：14684074
> 
> 赞同：2
> 
> 时间：2013-02-04T09:46:54.177
> 
> 标签：batch-file, echo, windows-scripting

我正在搜索某些 XML 文件，然后对它们执行命令 ( `mvn`)，该命令将输出写入`tree.out`文件。如果这个文件是空的，那么我知道没有输出（来自`mvn`），所以我不打印它。

然而，在循环执行的第一部分之后，它会打印出来`set size`，然后简单地打印出下一个循环迭代的命令。

```
setlocal enabledelayedexpansion
set pomFiles=dir /s/b pom.xml
@echo off

for /f %%f in ('%pomFiles%') do (
    findstr "<packaging>pom</packaging>" %%f > nul
    if errorlevel 0 if not errorlevel 1 (
        cd "%%~dpf"
        mvn -q dependency:tree -Dincludes^=%dependency% -DoutputFile^="%%~dpftree.out"
        for /f %%i in ("%%~dpftree.out") do set size=%%~zi
        if !size! gtr 0 (
            type "%%~dpftree.out"
        )
        del "%%~dpftree.out"        
    )
) 
```

我认为我的代码中存在导致语句打印的错误，但我自己看不到问题所在。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T09:57:17.337

`for /f`for 文件的语法是

```
FOR /F ["options"] %variable IN (file-set) DO command [command-parameters] 
```

但在您的代码中，文件集是`("%%~dpftree.out")`用于字符串的。

要使用双引号，我认为您必须使用 usebackq 选项：

```
for /f "usebackq" %%i in ('%%~dpftree.out') do set size=%%~zi 
```

希望这可以帮助

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-25T10:28:00.827

问题是我正在运行命令

`mvn -q dependency:tree -Dincludes^=%dependency% -DoutputFile^="%%~dpftree.out"`

没有在它之前使用关键字**调用**。

使用

`call mvn -q dependency:tree -Dincludes^=%dependency% -DoutputFile^="%%~dpftree.out"`

停止正在打印的命令。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-10-26T15:17:59.630

我知道这是一个旧线程，但我花了几个小时寻找一个对我不起作用的答案，这是这个问题最受欢迎的答案之一，我会在这里发布。

我注意到使用`(`或`)`正在使用的 sintax 非常严格。`)`因此，使用 Sublime 或 Notepad++ 之类的编辑器，我在一个 500 行的批处理中发现了一个空格字符，它抛出了该`@echo off`语句。

换句话说（ * 用于直观地表示行尾的空格）：

```
IF %randomvar% EQU 1 (*
    goto DO 
) ELSE (
    goto DOELSE
)** 
```

* 或 ** 都会弄乱`@echo off`，并将每一行代码输出到控制台。

只要确保行尾没有任何不必要的字符即可。

干杯

# tcl - Tcl: cd 回到上一个目录

> ID：14684075
> 
> 赞同：2
> 
> 时间：2013-02-04T09:46:56.840
> 
> 标签：tcl

在 Unix 上，`cd -`可以切换回上一个目录。我想知道 tcl 解释器中是否有类似的命令可以做同样的事情？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-04T10:17:11.620

Tcl 默认不维护目录历史/堆栈；你必须添加一个。你可以在纯 Tcl 中做到这一点：

```
rename cd real_cd
variable old_dir [pwd]
proc cd {directory} {
    variable old_dir
    if {$directory eq "-"} {
        set directory $old_dir
    }
    set old_dir [pwd]
    real_cd $directory
} 
```

这是一个非常简单的版本，它只记住最后一个位置，但其他所有内容都可以以相同的方式构建在上面。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-04T09:58:17.150

不，在 Tcl 中没有目录堆栈，并且以前的目录在任何地方都不会被记住。

[TclX](http://tclx.sourceforge.net/)为目录堆栈提供`pushd`和`popd`命令，但它不会修改`cd`命令以将任何内容放在那里。它可以通过命令包装和重命名来完成，但我不推荐它用于可以在脚本中使用的东西（至少不要覆盖 的语义`cd -`）。

# php - 优化 PHP/mysql 算法

> ID：14684076
> 
> 赞同：1
> 
> 时间：2013-02-04T09:47:01.053
> 
> 标签：php, mysql, algorithm, optimization

我必须为我的应用程序做一些统计，所以我需要一个性能尽可能好的算法。我有几个问题。

我在mysql数据库中有这样的数据结构：

```
user_id    group_id     date
1          5            2012-11-20
1          2            2012-11-01
1          4            2012-11-01
1          3            2012-10-15
1          9            2013-01-18
... 
```

所以我需要在特定日期找到某个用户的组。例如，用户 1 在日期 2012-11-15（2012 年 11 月 15 日）的组应返回最近的组，即 2012-11-01 日期的 2 和 4（同时有多个组）（最接近和更小的日期）。

通常，我可以执行 Select where date <= selected date order by date desc 等...但这不是重点，因为如果我有 1000 个用户，则需要 1000 个请求才能获得所有结果。

所以这里有一些问题：

1.  我已经使用php的方法循环数组以避免大量的mysql请求，但是仍然不好，因为数组大小可能是10000+。使用 foreach（或 for？）非常昂贵。所以我的问题是，如果给定一个按日期（desc 或 asc）排序的数组，找到包含小于（或大于）给定日期的日期的元素的最近索引的最快方法是什么？除了使用 for 或 foreach 循环来遍历每个元素。
2.  如果第一个问题没有解决方案，那么对于这类问题你会建议什么样的数据结构。

注意：日期为mysql格式，存储在数组中时不转换为时间戳

**编辑：这是一个 sql fiddle [http://sqlfiddle.com/#!2/dc28d/1](http://sqlfiddle.com/#!2/dc28d/1)** 对于**dos_id = 6, t="2012-11-01"**它应该只返回**2 和 5**在日期**“2010-12- 10 13:16:58"**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T10:20:24.500

不知道为什么要在 php.ini 中执行此操作。这里有一些 SQL 使用连接来获取给定日期的所有用户的最新组。确保您有日期和用户 ID 的索引。

```
SELECT *
FROM test t1
LEFT JOIN test t2
ON t1.userid = t2.userid AND t2.thedate <= '2012-11-15' AND t2.thedate > t1.thedate
WHERE t1.thedate <= '2012-11-15' AND t2.userid IS NULL; 
```

[SQLfiddle](http://sqlfiddle.com/#!2/10289/6/0)

或者使用你的 SQLFiddle

```
SELECT t1.*
FROM dossier_dans_groupe t1
LEFT JOIN dossier_dans_groupe t2
ON t1.dos_id = t2.dos_id AND t2.updated_at <= '2012-11-01' 
   AND t2.updated_at > t1.updated_at
WHERE t1.updated_at <= '2012-11-01' AND t2.dos_id IS NULL; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-04T10:00:35.217

这将为您提供所有用户及其组的列表（每组 1 行），其最新日期小于您指定的日期（以下 2012 年 11 月 15 日）。

```
SELECT user_id, group_id, date FROM table WHERE date <= '2012-11-15' AND NOT EXISTS (SELECT 1 FROM table test WHERE test.user_id = table.user_id AND test.date > table.date and test.date <= '2012-11-15') 
```

# php - 从 php 字符串中删除所有 html 标签

> ID：14684077
> 
> 赞同：90
> 
> 时间：2013-02-04T09:47:03.937
> 
> 标签：php

我想显示数据库条目的前 110 个字符。到目前为止很容易：

```
<?php echo substr($row_get_Business['business_description'],0,110) . "..."; ?> 
```

但是上面的条目中包含客户端输入的 html 代码。所以它显示：

```
<p class="Body1"><strong><span style="text-decoration: underline;">Ref no:</span></strong> 30001<strong></stro... 
```

显然不好。

我只想删除所有 html 代码，所以我需要从 db 条目中删除 < 和 > 之间的所有内容，然后显示前 100 个字符。

有什么想法吗？

* * *

## 回答 #1

> 赞同：160
> 
> 时间：2013-02-04T09:48:55.017

利用`strip_tags`

```
$text = '<p>Test paragraph.</p><!-- Comment --> <a href="#fragment">Other text</a>';
echo strip_tags($text);   //output Test paragraph. Other text

<?php echo substr(strip_tags($row_get_Business['business_description']),0,110) . "..."; ?> 
```

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2013-02-04T09:48:40.600

使用 PHP 的[strip_tags() 函数](http://www.php.net/manual/en/function.strip-tags.php)。

**例如：**

```
$businessDesc = strip_tags($row_get_Business['business_description']);
$businessDesc = substr($businessDesc, 0, 110);

print($businessDesc); 
```

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2016-09-04T18:26:36.357

# 从带有内容的 PHP 字符串中删除所有 HTML 标记！

假设您的字符串包含锚标记，并且您想删除带有内容的此标记，那么此方法将很有帮助。

```
$srting = '<a title="" href="/index.html"><b>Some Text</b></a>
Lorem Ipsum is simply dummy text of the printing and typesetting industry.';

echo strip_tags_content($srting);

function strip_tags_content($text) {

    return preg_replace('@<(\w+)\b.*?>.*?</\1>@si', '', $text);

 } 
```

输出：

> Lorem Ipsum 只是印刷和排版行业的虚拟文本。

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2013-02-04T09:50:44.530

使用这个正则表达式：`/<[^<]+?>/g`

```
$val = preg_replace('/<[^<]+?>/g', ' ', $row_get_Business['business_description']);

$businessDesc = substr(val,0,110); 
```

从你的例子应该留下：`Ref no: 30001`

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2019-08-07T08:08:57.653

对我来说这是最好的解决方案。

```
function strip_tags_content($string) { 
    // ----- remove HTML TAGs ----- 
    $string = preg_replace ('/<[^>]*>/', ' ', $string); 
    // ----- remove control characters ----- 
    $string = str_replace("\r", '', $string);
    $string = str_replace("\n", ' ', $string);
    $string = str_replace("\t", ' ', $string);
    // ----- remove multiple spaces ----- 
    $string = trim(preg_replace('/ {2,}/', ' ', $string));
    return $string; 

} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-04-18T09:53:24.540

从 HTML 标签中去除字符串：

```
<?php
echo strip_tags("Hello <b>world!</b>");
?> 
```

从 HTML 标签中去除字符串，但允许使用标签：

```
<?php
         echo strip_tags("Hello <b><i>world!</i></b>","<i>");
?> 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-09-29T09:39:34.040

`<?php $data = "<div><p>Welcome to my PHP class, we are glad you are here</p></div>"; echo strip_tags($data); ?>`

或者，如果您有来自数据库的内容；

`<?php $data = strip_tags($get_row['description']); ?>` `<?=substr($data, 0, 100) ?><?php if(strlen($data) > 100) { ?>...<?php } ?>`

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2018-12-10T17:18:32.023

In laravel you can use following syntax

```
 @php
   $description='<p>Rolling coverage</p><ul><li><a href="http://xys.com">Brexit deal: May admits she would have </a><br></li></ul></p>'
 @endphp
 {{  strip_tags($description)}} 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2020-12-05T12:28:49.940

```
$string = <p>Awesome</p><b> Website</b><i> by Narayan</i>. Thanks for visiting enter code here;
$tags = array("p", "i");

echo preg_replace('#<(' . implode( '|', $tags) . ')(?:[^>]+)?>.*?</\1>#s', '', $string); 
```

尝试这个

# css - Css 网格和列。不确定

> ID：14684080
> 
> 赞同：1
> 
> 时间：2013-02-04T09:47:18.540
> 
> 标签：css, grid, 960.gs

有人可以解释 12、16 和 24 列网格之间的区别吗？

我一直只是将网站设计为固定宽度，从不打扰列，但对于我的生活，我无法理解为什么会有这些列以及如何区分我需要哪种类型的列布局。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T15:17:05.527

您是否阅读了 960.gs 网站上的文档？他们解释了 12、16 和 24 网格列之间的区别，如下所示：

12 列网格分为 60 像素宽的部分。16 列网格由 40 个像素增量组成。每列的左侧和右侧都有 10 像素的边距，这会在列之间创建 20 像素宽的边距。

# android - Eclipse android DDMS 如何实现“截屏”

> ID：14684081
> 
> 赞同：-2
> 
> 时间：2013-02-04T09:47:21.570
> 
> 标签：android, eclipse

有谁知道eclipse android DDMS是如何实现“截屏”的？

**更新：**

因为我想捕获使用 android google map v2 运行应用程序的整个 android 设备屏幕。如果应用程序使用 android google map v1，则可以捕获屏幕截图。但如果使用 android goole map v2，它会返回黑屏。

[你可以从黑屏](https://stackoverflow.com/questions/13773658/capture-screen-shot-of-googlemap-android-api-v2/14725103#14725103)看到问题

但我可以从 DDMS 捕获屏幕截图（甚至是 android google map v2）。这就是为什么我想知道 DDMS 如何捕获屏幕截图的原因。

看起来像 DDMS 通过`/system/bin/screencap`or获取屏幕截图`/system/bin/screenshot`，但它似乎需要“root”权限。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T13:27:42.167

`com.android.ddmuilib.ScreenShotDialog`我想你可以在代码中找到你的答案。

首先，获取源代码：

```
git clone https://android.googlesource.com/platform/sdk 
```

DDMS 来源：`sdk/ddms`

ScreenShotDialog 在：`sdk/ddms/libs/ddmuilib/ ...`

（或直接[在这里](http://www.netmite.com/android/mydroid/cupcake/development/tools/ddms/libs/ddmuilib/src/com/android/ddmuilib/ScreenShotDialog.java)）

# maven - 我在哪里可以获得 Maven 的最新版本的 org.eclipse.jdt？

> ID：14684082
> 
> 赞同：1
> 
> 时间：2013-02-04T09:47:23.933
> 
> 标签：maven, eclipse-jdt

我想使用 Eclipse AST 来生成源代码。我的项目由 Maven 管理，我想简单地为编译器添加依赖项。不幸的是，我在中央找到的最新版本是`3.3.0-v_771`. [Tycho](http://eclipse.org/tycho/)项目提供更新的版本。但是，我发现 pom 没有指定依赖项，我不想自己这样做。我花了很长时间在谷歌上搜索其他来源，但这是我能想到的最好的。

有谁知道在 Maven 中获取 JDT 的更好的、符合 maven 的方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T10:00:09.813

您可以使用[Maven-Eclipse-Plugin](http://maven.apache.org/plugins/maven-eclipse-plugin/to-maven-mojo.html)自行将 Eclipse 包部署到 Maven，然后使用它们。一个示例命令是：

```
mvn eclipse:to-maven -DdeployTo=internal-nexus::default::http://myNexus/content/repositories/eclipse -DeclipseDir=C:/Eclipse 
```

或者，您可以购买[Nexus Pro](http://www.sonatype.com/Nexus)的许可证并提供 Eclipse p2-Repositories 作为 Maven 存储库。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-01-11T06:25:17.570

现在有另一种方式。[一些 Eclipse Neon.2 jars 作为普通的 maven 工件发布](https://objectteams.wordpress.com/2017/01/09/eclipse-neon-2-is-on-maven-central/)（pom 文件是用户友好的，maven 的标准依赖管理将起作用）。

如果你想`jdt-core`在你的项目中使用，你只需要添加这个：

```
<dependency>
  <groupId>org.eclipse.jdt</groupId>
  <artifactId>org.eclipse.jdt.core</artifactId>
  <version>3.12.2</version>
</dependency> 
```

...你让 maven 为你做剩下的事情。我已经发布了一个简单的示例[，如何在一个简单的 Java 应用程序中使用来自 Eclipse 的 Java 代码格式化程序](http://%20%20[1]:%20https://objectteams.wordpress.com/2017/01/09/eclipse-neon-2-is-on-maven-central/)。

# javascript - jQuery UI 可拖动：使用助手时访问拖动的元素：克隆

> ID：14684085
> 
> 赞同：0
> 
> 时间：2013-02-04T09:47:31.370
> 
> 标签：javascript, jquery-ui

我有一组通过`helper: 'clone'`. 在`receive`可拖动的情况下，我想访问刚刚放入列表的元素，但似乎没有任何方法可以做到这一点。

我的代码与此类似：

```
$('#drag li').draggable({
    helper: 'clone',
    revert: 'invalid',
    connectToSortable: '#sort'
});

$('#sort').sortable({
    receive: function(evt, ui) {
        ui.item.css('color', 'green');
        ui.helper.css('color', 'green');
    }
}); 
```

`ui.item`指的是原始的可拖动，预克隆，而`ui.helper`在项目被删除后似乎不存在于文档中的任何位置。

有关示例，请参见此 jsfiddle：http: [//jsfiddle.net/KSuPX/](http://jsfiddle.net/KSuPX/)

更新：对不起，如果我的实际问题有点不清楚。总结：

当可排序列表收到一个新元素时，我如何访问该元素？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T12:15:16.990

可排序和可拖动是 2 个不同的小部件，如果没有解决方案，您可能需要编辑 .js 文件。不幸的是，jQuery UI 没有提供这些函数如何工作的详细示例。您可以尝试使用此处提到的接收下的“发件人”选项 - [http://api.jqueryui.com/sortable/#event-receive](http://api.jqueryui.com/sortable/#event-receive)

# php - 从 wordpress 小部件中删除包含 LI

> ID：14684087
> 
> 赞同：1
> 
> 时间：2013-02-04T09:47:34.127
> 
> 标签：php, html, wordpress

我需要`li`从使用 wordpress 拉入的小部件中删除周围环境，例如：

```
<li id="dp-twitter-widget-2" class="widget-container widget-twitter"> 
```

那是我需要删除的那个，但是它必须是服务器端的，因为一旦提供了 javascript 就会对其进行操作，所以我会想象一个带有 PHP 的 preg_replace 但我无法拦截它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T09:52:01.940

测试一下

```
 $strwithoutli=preg_replace_callback("~<li(.*)>(.*)</li>~si",function($m){print_r($m);return $m[2];}," ".$str." "); 
```

对于旧的 php 版本

```
function replace($m){
print_r($m);
return $m[2];
}
$strwithoutli=preg_replace_callback("~<li(.*)>(.*)</li>~si","replace"," ".$str." "); 
```

在 wordpress 小部件中，您不需要执行此工作。您可以对小部件类进行更改这是第 546-555 行之间的类链接您可以看到小部件输出结构并对此进行更改您可以从输出 中删除**li**

[http://core.trac.wordpress.org/browser/tags/3.5.1/wp-includes/widgets.php#L0](http://core.trac.wordpress.org/browser/tags/3.5.1/wp-includes/widgets.php#L0)

# javascript - 删除当前的 css 类并使用 jquery 添加新类

> ID：14684089
> 
> 赞同：0
> 
> 时间：2013-02-04T09:47:37.497
> 
> 标签：javascript, jquery, css, if-statement

如何删除当前添加到 div 的类并根据条件集添加新类？

我的 CSS 包含 3 个不同的类：

```
.red   { background:red }

.blue  { background:blue }

.green { background:green } 
```

当时我只想`#box`根据 jquery 变量设置的条件向 div id 添加一个类`my_color`。`my_color`有3个值的血，花园，天空当时只有一套。

jQuery：

```
<script type="text/javascript">  
 (document).ready(function() {

      if(my_color == "blood")
             { /*help me to remove  current class and add .red */}
      else if(my_color == "garden")
             {/*help me to remove  current class and add .green */ }
      else if(my_color == "sky")
             {/*help me to remove  current class and add .blue */ }

 });
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T09:50:22.783

```
$('#box').attr('class', '').addClass(my_color ); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-04T09:49:23.207

这将框上的类替换为红色/绿色/蓝色

```
 if(my_color == "blood")
           {  $('#box').attr('class','red');}
      else if(my_color == "garden")
            { $('#box').attr('class','green');}
      else if(my_color == "sky")
         {   $('#box').attr('class','blue');} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-04T09:49:38.790

您可以在分配新课程之前删除所有课程：

```
 (document).ready(function () {
     $(element).removeClass("red blue green");
     if (my_color == "blood") {
         $(element).addClass("red");
     }
     if (my_color == "garden") {
         $(element).addClass("green");
     }
     if (my_color == "sky") {
         $(element).addClass("blue");
     }
 }); 
```

使用`.attr('class', '')`而不是`removeClass`也可以，但它也会删除您的元素可能具有的任何其他类。

您还可以使用映射对象来稍微清理一下代码：

```
 (document).ready(function () {
     $(element).removeClass("red blue green");
     var colorDictionary = {
         "blood": "red",
         "garden": "green",
         "sky": "blue"
     };
     $(element).addClass(colorDictionary[my_color]);
 }); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-04T09:50:09.523

```
$('#selectorId').removeClass('red');
$('#selectorId').addClass('green'); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-04T09:51:11.020

你可以用[`$.removeAttr()`](http://api.jquery.com/removeAttr/)and来做到这一点[`$.addClass()`](http://api.jquery.com/addClass/)。

首先删除所有设置为 的类`#div`，然后只应用需要的`class`. 更具体地说，您只能删除不需要的类[`$.removeClass()`](http://api.jquery.com/removeClass/)

```
 (document).ready(function() {

   $("#box").removeAttr("class");

      if(my_color == "blood")
         { 
            $("#box").addClass("red"); 
         }
      else if(my_color == "garden")
         { 
            $("#box").addClass("green"); 
         }
      else if(my_color == "sky")
         { 
            $("#box").addClass("blue"); 
         }

 }); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-04T09:51:38.093

```
<script type="text/javascript">  
  (document).ready(function() {

  if(my_color == "blood")
         {$("#select_element").removeClass("blue").addClass("red");}
  else if(my_color == "garden")
         { $("#select_element").removeClass("red").addClass("green"); }
  else if(my_color == "sky")
         { $("#select_element").removeClass("green").addClass("blue"); }

  });
 </script> 
```

# linux - 如何正确配置memcached？

> ID：14684093
> 
> 赞同：0
> 
> 时间：2013-02-04T09:48:09.633
> 
> 标签：linux, cakephp

我已经在 linux 上配置了 memcached。在`core.php`我这样编码

```
 Cache::config('default',array('engine'=>'Memcache'));
 Cache::config('default', array('engine'=>'Memcache','duration'=> 3600, //[optional]'probability'=> 100, //[optional] 'prefix' => Inflector::slug(APP_DIR) . '_','servers'=>array('127.0.0.1:11211'),'compress'=>false,));` 
```

但它说`Warning: Cache not configured properly. Please check Cache::config(); in APP/config/core.php`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T10:00:02.190

您不能将两个缓存配置称为相同的名称。

# android - 滑动列表视图布局 Android

> ID：14684094
> 
> 赞同：1
> 
> 时间：2013-02-04T09:48:12.693
> 
> 标签：android, android-layout, listview, layout

我正在创建一个应用程序，其中包含一个带有右侧按钮的标题，当我单击它时应该向左滑动列表视图（类似于 Facebook 中的聊天列表）

![在此处输入图像描述](../Images/b07c244ddf9781d8b803f479acf8725f.png) **-->** ![在此处输入图像描述](../Images/a9e3d2bd1f4ab399d4482bbe798cb6e9.png)

当我包含此标题而不将列表视图放入其中时，它工作正常。但是现在我将这个列表视图插入`.xml`到标题的文件中（因为标题始终为用户显示，他可以在为他显示的任何布局中单击此列表视图按钮）。我想将此标题包含在所有其他布局中而不更改它们的外观并在每次单击按钮时显示此列表的问题。我搜索并找到了很多答案，但每个解决方案都与我在每个页面中之前的屏幕截图中所做的相同，这对于多个页面来说并不是一个乐观的解决方案。

*我正在使用 API 级别 10 并希望在不使用`Actionbar`.

如果更多信息有帮助，请告诉我，任何帮助将不胜感激。提前致谢。

**更新我的 xml 文件：**

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
                android:id="@+id/GeneralRelativeLayout"
                android:layout_width="fill_parent"
                android:layout_height="fill_parent"
                android:orientation="vertical">
    <RelativeLayout android:id="@+id/rel_layout"
                    android:layout_width="200dp"
                    android:layout_height="fill_parent"
                    android:background="@android:color/white" android:layout_alignParentRight="true">
        <LinearLayout android:id="@+id/fake_layout"
                      android:layout_width="wrap_content"
                      android:layout_height="wrap_content"
                      android:orientation="vertical"
                      android:visibility="gone"></LinearLayout>
        <ListView android:id="@+id/list_view"
                  android:layout_width="match_parent"
                  android:layout_height="wrap_content"
                  android:layout_gravity="right"
                  android:background="@android:color/background_dark"
                ></ListView>
    </RelativeLayout>
    <RelativeLayout android:id="@+id/rel_layout_second"
                    android:layout_width="match_parent"
                    android:layout_height="match_parent"
                    android:background="@android:color/black">
        <LinearLayout android:id="@+id/lin_layout"
                      android:layout_width="fill_parent"
                      android:layout_height="wrap_content"
                      android:background="@android:color/background_light"
                      android:orientation="vertical"
                      android:layout_centerHorizontal="true" android:layout_alignParentTop="true">
            <Button android:id="@+id/button"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:text="slide"
                    android:layout_gravity="right|center"></Button>
        </LinearLayout>
    </RelativeLayout>
</RelativeLayout> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T14:31:50.700

尝试`RelativeLayout`在另一个. `ListView`_`android:visibility="gone"``RelativeLayout`

然后在菜单打开或关闭时更改其可见性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-04T11:41:09.837

猜猜这应该是一种方法：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout
        xmlns:android="http://schemas.android.com/apk/res/android"
        android:orientation="vertical"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent" android:clickable="false">
    <LinearLayout
            android:id="@+id/thisistopbar"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:layout_alignParentTop="true"
            android:paddingLeft="3dp"/>
    <include here listview etc../>
</LinearLayout> 
```

您还可以使顶部栏通用并将其包含在每个屏幕中。但基本思路和上面的xml一样，把按钮放在顶栏上。

# javascript - 在 asp-classic 中启用 javascript

> ID：14684105
> 
> 赞同：2
> 
> 时间：2013-02-04T09:48:53.440
> 
> 标签：javascript, asp.net, asp-classic

我可以检测浏览器的状态是否被禁用。我可以更改用户浏览器的 Javascript 状态吗？这意味着如果它被禁用，我想通过经典asp的服务器端代码启用它。任何其他服务器端语言都可以。但这可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T10:02:22.207

不，不可能通过任何类型的服务器端代码在用户浏览器中启用 JavaScript。如果您的应用程序依赖于 JavaScript，您可以使用`<noscript>`标签通知用户他们需要启用 JavaScript。

[http://www.w3.org/TR/html-markup/noscript.html](http://www.w3.org/TR/html-markup/noscript.html)

# javascript - jquery空方法

> ID：14684107
> 
> 赞同：0
> 
> 时间：2013-02-04T09:49:00.033
> 
> 标签：javascript, jquery

检查下面的代码：

```
<script>
 var cls = ['', 'a', 'a b', 'a b c'];
var divs = $('div.wrap').children(); 
```

请注意，children() 执行破坏性操作，即它构造一个新的 jquery 对象

```
var appendClass = function() {
 divs.append(function() {
return '<div>' + (this.className || 'none') + '</div>';
});
};

appendClass();

$('button').bind('click', function() {
var tc = this.className || undefined;
divs.toggleClass(tc);
appendClass();
});

$('a').bind('click', function(event) {
event.preventDefault();

//(children is a destructive method which have constructed new jquery object so what is the use of using empty method on the upcoming statement) 
divs.empty().each(function(i) {
this.className = cls[i];
});
 appendClass();
}); 
```

*那么在div*变量上使用空方法有什么用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T09:49:58.230

[Empty()](http://api.jquery.com/empty/)方法：

> 此方法不仅删除子（和其他后代）元素，还删除匹配元素集中的任何文本。这是因为，根据 DOM 规范，元素中的任何文本字符串都被视为该元素的子节点。

用例

1.  您要清除所有现有数据并附加新数据。
2.  对于您操作数据的模板很有用。

    ```
     divs.empty().each(function(i) {
    this.className = cls[i];
    }); 
    ```

上面的代码是无用的，因为 div 被清空，之后如果你循环也不会找到任何元素。我不知道你有什么标记，但上面的代码不会有用。

# java - 将扩展的 ASCII 字符串转换为印地语文本

> ID：14684108
> 
> 赞同：1
> 
> 时间：2013-02-04T09:49:04.377
> 
> 标签：java, conventions, extended-ascii

我正在通过 android 中的 USB 通信以扩展 ASCII 字符的形式接收字符串文本，例如

```
String receivedText = "5286T11É¬ ªË ¦¿¯¾ ¯¾ É¬ ¨¬°:A011605286 ª¿ª ¾®:12:45 ¸Í®°:(9619441121)ª¿ª:-, ®¹¿¦Í°¾ ¡ ®¹¿¦Í°¾ ª¨À, ¾¦¿µ²À ¸Í, ¾¦¿µ²À ªÂ°Íµ °¿®¾°ÍÍ¸:- ¡Í°Éª:-, ¬¾¹°, ¸¾¤¾Í°Â¼ ªÂ°Íµ~"; 
```

现在这些字符在印地语中代表一个字符串。

我不知道如何将此接收到的字符串转换为印地语等效文本。任何人都知道如何使用 java 将其转换为等效的印地语文本

以下是我用来将字节数组转换为字节字符串的一段代码

```
public String byteArrayToByteString(byte[] arayValue, int size) {
        byte ch = 0x00;
        int i = 0;

        if (arayValue == null || arayValue.length <= 0)
            return null;

        String pseudo[] = { "0", "1", "2", "3", "4", "5", "6", "7", "8", "9",
                "A", "B", "C", "D", "E", "F" };
        StringBuffer out = new StringBuffer();

        while (i < size) {

            ch = (byte) (arayValue[i] & 0xF0); // Strip off high nibble
            ch = (byte) (ch >>> 4); // shift the bits down
            ch = (byte) (ch & 0x0F); // must do this is high order bit is on!
            out.append(pseudo[(int) ch]); // convert the nibble to a String
            // Character
            ch = (byte) (arayValue[i] & 0x0F); // Strip off low nibble
            out.append(pseudo[(int) ch]); // convert the nibble to a String
            // Character
            i++;
        }
        String rslt = new String(out);

        return rslt;
    } 
```

让我知道这是否有助于找到解决方案

**编辑：**

它是 UTF-16 编码，receivedText 字符串中的字符是印地语字符的扩展 ASCII 形式

**新编辑**

我有新角色

```
String value = "?®Á?Ç¶ ¡??°¿¯¾"; 
```

印地语中的मुकेश和印地语中的dangaria。谷歌翻译器不会翻译印地语的 dangaria，所以我无法为您提供印地语版本。

我与正在编码的人交谈，他说他在编码之前从输入中删除了 2 位，即如果 \u0905 在印地语中表示 अ，那么他从输入中删除 \u09 并将剩余的 05 转换为扩展的十六进制形式。

因此，我提供给您的新输入字符串以上述解释的形式进行了解码。即 \u09 被删除，其余被转换为扩展 ascii，然后使用 USB 发送到设备。

让我知道这个解释是否可以帮助您找到解决方案

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-25T17:48:18.487

我一直在玩这个，并且知道你可能需要做什么。看起来`receivedText`您在帖子中拥有的值`windows-1252`由于某种原因被编码。可能是从粘贴到这篇文章中的。提供原始字节值会更好地避免任何编码错误。无论如何，我能够将其`String`转换为以下 Unicode 梵文字符：

```
5286T11फए ऋभ इडऒठ ऒठ फए उएओ:A011605286 ऋडऋ ठऍ:12:45 चयऍओ:(9619441121)ऋडऋ:-, ऍछडइयओठ ँ ऍछडइयओठ ऋउढ, ठइडगऑढ चय, ठइडगऑढ ऋतओयग ओडऍठओययच:- ँयओफऋ:-, एठछओ, चठअठयओतञ ऋतओयग~ 
```

使用以下代码：

```
final String receivedText = "5286T11É¬ ªË ¦¿¯¾ ¯¾ É¬ ¨¬°:A011605286 ª¿ª ¾®:12:45 ¸Í®°:(9619441121)ª¿ª:-, ®¹¿¦Í°¾ ¡ ®¹¿¦Í°¾ ª¨À, ¾¦¿µ²À ¸Í, ¾¦¿µ²À ªÂ°Íµ °¿®¾°ÍÍ¸:- ¡Í°Éª:-, ¬¾¹°, ¸¾¤¾Í°Â¼ ªÂ°Íµ~";

final Charset fromCharset = Charset.forName("x-ISCII91");
final CharBuffer decoded = fromCharset.decode(ByteBuffer.wrap(receivedText.getBytes("windows-1252")));

final Charset toCharset = Charset.forName("UTF-16");
final byte[] encoded = toCharset.encode(decoded).array();
System.out.println(new String(encoded, toCharset.displayName())); 
```

这些是否是预期的字符是你需要告诉我的:)

另外，我不确定`x-ISCII91`字符编码是否在 Android 中可用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-04T10:23:26.107

```
hindi = new String(receivedText.getBytes(), "UTF-16"); 
```

但这看起来不像印地语……你确定它被编码为 UTF-16 吗？

**编辑：**

```
String charset = "UTF-8";
hindi = new String(hindi.getBytes(Charset.forName(charset)), "UTF-16"); 
```

用导致您的 loooong 字符串的实际字符替换 UTF-8。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-22T13:54:29.287

通常，对于您知道是**字符串值**的字节数组，您可以使用以下内容。

假设`byte[] someBytes`：

```
String stringFromBytes = new String(someBytes, "UTF-16"); 
```

您可以将“UTF-16”替换为适当的字符集，经过一些实验可以找到。这个详细说明java支持的字符编码的[链接可能会有所帮助。](http://docs.oracle.com/javase/6/docs/technotes/guides/intl/encoding.doc.html)

根据您提供的详细信息，我建议考虑以下事项：

*   如果您正在从 USB 驱动器读取文件，android 可能有现有的框架可以帮助您以更标准的方式执行此操作。
*   如果您确实需要直接从 USB 端口读取和操作字节，请确保您熟悉正在读取的数据的 API/协议。可能某些字节是控制消息或无法转换为字符串的类似内容，您需要准确识别字符串在字节流中的开始（和结束）位置。

# android - AChartEengine 是否支持类似示波器的条形图来显示数字输入/输出？

> ID：14684112
> 
> 赞同：1
> 
> 时间：2013-02-04T09:49:28.517
> 
> 标签：android, achartengine, oscilloscope

显示数字输入或输出信号图表。它应该看起来像没有间隙的步骤

```
 ___      ______
_|   |____| 
```

问题是 y 值在收到下一个 y 值之前应该是相同的，现在它只是在两个值之间画线，它看起来像：

```
 /\/\/\/\/\/\ 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T10:01:02.687

[您可以在此处](https://repository-achartengine.forge.cloudbees.com/snapshot/org/achartengine/achartengine/1.1.0/)下载 AChartEngine 的 1.1.0 nightly build 并重试。如果它仍然不起作用，请发布一些代码。

在标题中，您提到了条形图。那你为什么要画折线图呢？

# jquery - 成功函数在 post 语句之前运行

> ID：14684115
> 
> 赞同：0
> 
> 时间：2013-02-04T09:49:42.737
> 
> 标签：jquery, coffeescript

我在下面用咖啡脚本编写了一个帖子功能。代码的目的是发布数据以更新事件，然后通过 fetchEvents 函数呈现视图。但是，它倾向于在执行更新之前先刷新视图。我正在查看该问题的帖子的响应时间。任何帮助将不胜感激。谢谢！

```
 $.get '/artists/' + user_id + '/fetch_events', { event_type: action }, ((event_data) ->
    if $.isEmptyObject(event_data)  
      $.ajax
        url: "/events/" + event_id      
        type: "post"
        success: fetchEvents(event_date)
        data: "_method": "put", "event" :
          "date": event_date              
          "time": event_time              
        dataType: "json" 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T12:10:34.370

只是头顶，可能是，

```
success: -> fetchEvents(event_date) 
```

代替

```
success: fetchEvents(event_date) 
```

希望这可以帮助。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-04T09:57:43.953

使用您的 ajax 部分，如下所示

```
$.ajax({
type: "POST",
url: url,
data: data,
success: success,
dataType: dataType
}); 
```

有关详细信息，可以从[http://api.jquery.com/jQuery.post/获取帮助](http://api.jquery.com/jQuery.post/)

# reporting-services - 将 QueryString 参数传递给 Reporting Services 2008 R2

> ID：14684122
> 
> 赞同：1
> 
> 时间：2013-02-04T09:49:54.830
> 
> 标签：reporting-services, ssrs-2008

我有一个接受参数的报告服务报告。我正在尝试按如下方式传递参数：

```
http://localhost/ReportsServer/Pages/Report.aspx?ItemPath=%2fSalesReports%2fReport1&CustomerID=3 
```

以上似乎不起作用。任何的想法？

问候，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T10:46:52.600

尝试直接指向服务器：

`http://localhost/ReportsServer?%2fSalesReports%2fReport1&CustomerID=3`

# android - 三星 Galaxy S III 上的 CSS @media 查询

> ID：14684123
> 
> 赞同：0
> 
> 时间：2013-02-04T09:49:57.653
> 
> 标签：android, css, media-queries

我正在开发一个具有响应式设计和移动优化的网站。
我在针对三星 Galaxy S III 默认浏览器时遇到问题，因为它 **不能**缩放字体大小。

有趣的是，在同一台设备上使用适用于 Android 的 Google Chrome 一切正常，所以我认为我的 @media 查询没有问题。当然，我已经对它们进行了三次检查，我确信 Galaxy S III 显示器适合它们。除字体大小外，所有其他条件样式均适用。

一切都在其他基于 Android 的设备上运行良好，例如三星 Galaxy Nexus 的默认浏览器。

针对 Galaxy S III 默认浏览器，我应该做些什么？它是否以某种有趣的方式解释字体大小？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T10:28:29.273

要回答您的一个问题，是的，它确实以一种奇怪的方式解释了字体大小。三星 GS3 默认浏览器在这方面非常糟糕。我不确定是否有解决方法。无论如何，我无法想象有太多人在使用默认浏览器。

# javascript - 为什么当我已经设置对象属性时它们是未定义的

> ID：14684125
> 
> 赞同：1
> 
> 时间：2013-02-04T09:49:59.103
> 
> 标签：javascript, oop, object, prototype

```
function detail(){
  this.html = this.name;
}

var detail1 = new detail();
detail1.name = 'xyz';
console.log(detail1.html); 
```

上面的代码`undefined`作为输出给出。但我已经将名称设置为“xyz”；我是**面向对象的 JavaScript**新手。请帮忙。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-04T09:52:45.170

那是因为`name`当`undefined`您`html`通过复制来初始化属性时。

一个解决方案是在构造函数中传递它：

```
function detail(name){
  this.name = name;
  this.html = this.name;
}

var detail1 = new detail();
console.log(detail1.html); 
```

另一种解决方案是使 html 成为一个函数：

```
function detail(){
}
detail.prototype.html = function(){
   return this.name;
}
var detail1 = new detail();
detail1.name = 'xyz';
console.log(detail1.html()); // <- notice the parenthesis here : html is a function 
```

第三个是`html`在您更改时进行更改`name`：

```
function detail(){
}
detail.prototype.setName = function(name){
   this.html = name;
}
var detail1 = new detail();
'xyz';
detail1.setName('xyz');
console.log(detail1.html); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T09:53:19.570

将名称作为参数传递给函数。当前，当创建详细对象的新实例时，其 name 属性未定义。它是在调用构造函数之后设置的，这为时已晚。

```
function detail(name){
  this.html = "<li><a href='#'>"+name+"</a><a>"+"<li>";
}

var detail1 = new detail('xyz');
console.log(detail1.html); 
```

# restlet - [restlet]截断块异常：

> ID：14684128
> 
> 赞同：1
> 
> 时间：2013-02-04T09:50:01.150
> 
> 标签：restlet

对于我的项目（[http://snooze.inria.fr/](http://snooze.inria.fr/)），我依赖于 java 库 restlet。

如果我在客户端上可视化层次结构时将依赖项设置为restlet 2.2-SNAPSHOT a TruncatedChunkException（这是从系统接收到的大json）如果我将依赖项设置为restlet 2.1-SNAPSHOT，我没有错误，一切看起来都很好。

你知道为什么吗 ？

此致，

马特

ps：这里是堆栈跟踪：

```
org.restlet - Unable to convert a [application/json] representation into an object of class org.inria.myriads.snoozecommon.communication.groupmanager.repository.GroupLeaderRepositoryInformation
org.apache.http.TruncatedChunkException: Truncated chunk ( expected size: 2085; actual size: 1997)
at org.apache.http.impl.io.ChunkedInputStream.read(ChunkedInputStream.java:182)
at org.apache.http.conn.EofSensorInputStream.read(EofSensorInputStream.java:138)
at java.io.FilterInputStream.read(FilterInputStream.java:133)
at java.io.FilterInputStream.read(FilterInputStream.java:133)
at java.io.PushbackInputStream.read(PushbackInputStream.java:186)
[...] 
```

这是 json 的示例：（它基本上是托管 vm 及其属性的主机列表）

```
groupManagerDescriptions":[{"id":"4d415a3b-579d-4fcd-8700-f2d4a2242401","listenSettings":{"controlDataAddress":{"address":"127.0.0.1","port":6001},"monitoringDataAddress":{"address":"127.0.0.1","port":7000}},"localControllers":{"52a3e5b1-2354-4d67-ab52-c6b38efd20c5":{"id":"52a3e5b1-2354-4d67-ab52-c6b38efd20c5","controlDataAddress":{"address":"127.0.0.1","port":6003},"status":"ACTIVE","hypervisorSettings":{"port":16509,"driver":"qemu","transport":"tcp","migration":{"method":"forceunsafe","timeout":60}},"totalCapacity":[4.0,3958916.0,131072.0,131072.0],"wakeupSettings":{"driver":"IPMI","options":"-I lanplus -H BMC_IP -U user -P password"},"hostname":"mafalda","virtualMachineMetaData":{"debian1":{"status":"RUNNING","virtualMachineLocation":{"virtualMachineId":"debian1","localControllerControlDataAddress":{"address":"127.0.0.1","port":6003},"localControllerId":"52a3e5b1-2354-4d67-ab52-c6b38efd20c5"},"usedCapacity":{},"requestedCapacity":[1.0,512000.0,12800.0,12800.0],"ipAddress":"192.168.122.2","errorCode":"UNKNOWN","groupManagerControlDataAddress":{"address":"127.0.0.1","port":6001},"xmlRepresentation":"<?xml version=\"1.0\" encoding=\"UTF-8\" standalone=\"no\"?><domain type=\"kvm\">  <name>debian1</name>  <memory>512000</memory>  <vcpu>1</vcpu>  <os>    <type arch=\"x86_64\" machine=\"pc-0.12\">hvm</type>    <boot dev=\"hd\"/>  </os>  <features>    <acpi/>    <apic/>    <pae/>  </features>  <clock offset=\"utc\"/>  <on_poweroff>destroy</on_poweroff>  <on_reboot>restart</on_reboot>  <on_crash>restart</on_crash>  <devices>    <emulator>/usr/bin/kvm</emulator>    <disk device=\"disk\" type=\"file\">      <driver name=\"qemu\" type=\"qcow2\"/>      <source file=\"/home/msimonin/Images-VM/Snooze-images/imgs/debian1.qcow2\"/>      <target bus=\"virtio\" dev=\"vda\"/>      <address bus=\"0x00\" domain=\"0x0000\" function=\"0x0\" slot=\"0x05\" type=\"pci\"/>    </disk>    <controller index=\"0\" type=\"ide\">      <address bus=\"0x00\" domain=\"0x0000\" function=\"0x1\" slot=\"0x01\" type=\"pci\"/>    </controller>    <interface type=\"bridge\">      <mac address=\"54:56:c0:a8:7a:2\"/>      <source bridge=\"virbr0\"/>    </interface>    <serial type=\"pty\">      <target port=\"0\"/>    </serial>    <console type=\"pty\">      <target port=\"0\" type=\"serial\"/>    </console>    <graphics autoport=\"yes\" listen=\"0.0.0.0\" port=\"-1\" type=\"vnc\"/>    <input bus=\"usb\" type=\"tablet\"/>    <input bus=\"ps2\" type=\"mouse\"/>    <memballoon model=\"virtio\">      <address bus=\"0x00\" domain=\"0x0000\" function=\"0x0\" slot=\"0x06\" type=\"pci\"/>    </memballoon>  </devices></domain>"},"debian3":{"status":"RUNNING","virtualMachineLocation":{"virtualMachineId":"debian3","localControllerControlDataAddress":{"address":"127.0.0.1","port":6003},"localControllerId":"52a3e5b1-2354-4d67-ab52-c6b38efd20c5"},"usedCapacity":{},"requestedCapacity":[1.0,128000.0,12800.0,12800.0],"ipAddress":"192.168.122.4","errorCode":"UNKNOWN","groupManagerControlDataAddress":{"address":"127.0.0.1","port":6001},"xmlRepresentation":"<?xml version=\"1.0\" encoding=\"UTF-8\" standalone=\"no\"?><domain type=\"kvm\">  <name>debian3</name>  <memory>128000</memory>  <vcpu>1</vcpu>  <os>    <type arch=\"x86_64\" machine=\"pc-0.12\">hvm</type>    <boot dev=\"hd\"/>  </os>  <features>    <acpi/>    <apic/>    <pae/>  </features>  <clock offset=\"utc\"/>  <on_poweroff>destroy</on_poweroff>  <on_reboot>restart</on_reboot>  <on_crash>restart</on_crash>  <devices>    <emulator>/usr/bin/kvm</emulator>    <disk device=\"disk\" type=\"file\">      <driver name=\"qemu\" type=\"qcow2\"/>      <source file=\"/home/msimonin/Images-VM/Snooze-images/imgs/debian3.qcow2\"/>      <target bus=\"virtio\" dev=\"vda\"/>      <address bus=\"0x00\" domain=\"0x0000\" function=\"0x0\" slot=\"0x05\" type=\"pci\"/>    </disk>    <controller index=\"0\" type=\"ide\">      <address bus=\"0x00\" domain=\"0x0000\" function=\"0x1\" slot=\"0x01\" type=\"pci\"/>    </controller>    <interface type=\"b"
[DEBUG] |févr. 04 10:44:20| [Thread-1] http.wire  - << "ridge\">      <mac address=\"54:56:c0:a8:7a:4\"/>      <source bridge=\"virbr0\"/>    </interface>    <serial type=\"pty\">      <target port=\"0\"/>    </serial>    <console type=\"pty\">      <target port=\"0\" type=\"serial\"/>    </console>    <graphics autoport=\"yes\" listen=\"0.0.0.0\" port=\"-1\" type=\"vnc\"/>    <input bus=\"usb\" type=\"tablet\"/>    <input bus=\"ps2\" type=\"mouse\"/>    <memballoon model=\"virtio\">      <address bus=\"0x00\" domain=\"0x0000\" function=\"0x0\" slot=\"0x06\" type=\"pci\"/>    </memballoon>  </devices></domain>"}},"assignedVirtualMachines":[]},"c56846f6-fd61-47d5-9f68-0fd2772aac4d":{"id":"c56846f6-fd61-47d5-9f68-0fd2772aac4d","controlDataAddress":{"address":"127.0.0.1","port":6004},"status":"ACTIVE","hypervisorSettings":{"port":16510,"driver":"qemu","transport":"tcp","migration":{"method":"forceunsafe","timeout":60}},"totalCapacity":[4.0,3958916.0,131072.0,131072.0],"wakeupSettings":{"driver":"IPMI","options":"-I lanplus -H BMC_IP -U user -P password"},"hostname":"mafalda","virtualMachineMetaData":{"debian2":{"status":"RUNNING","virtualMachineLocation":{"virtualMachineId":"debian2","localControllerControlDataAddress":{"address":"127.0.0.1","port":6004},"localControllerId":"c56846f6-fd61-47d5-9f68-0fd2772aac4d"},"usedCapacity":{},"requestedCapacity":[2.0,123456.0,12800.0,12800.0],"ipAddress":"192.168.122.3","errorCode":"UNKNOWN","groupManagerControlDataAddress":{"address":"127.0.0.1","port":6001},"xmlRepresentation":"<?xml version=\"1.0\" encoding=\"UTF-8\" standalone=\"no\"?><domain type=\"kvm\">  <name>debian2</name>  <uuid>0f476e56-67ea-11e1-858e-00216a972a37</uuid>  <memory>123456</memory>  <vcpu>2</vcpu>  <os>    <type arch=\"x86_64\" machine=\"pc-0.12\">hvm</type>    <boot dev=\"hd\"/>  </os>  <features>    <acpi/>    <apic/>    <pae/>  </features>  <clock offset=\"utc\"/>  <on_poweroff>destroy</on_poweroff>  <on_reboot>restart</on_reboot>  <on_crash>restart</on_crash>  <devices>    <emulator>/usr/bin/kvm</emulator>    <disk device=\"disk\" type=\"file\">      <driver name=\"qemu\" type=\"qcow2\"/>      <source file=\"/home/msimonin/Images-VM/Snooze-images/imgs/debian2.qcow2\"/>      <target bus=\"virtio\" dev=\"vda\"/>      <address bus=\"0x00\" domain=\"0x0000\" function=\"0x0\" slot=\"0x05\" type=\"pci\"/>    </disk>    <controller index=\"0\" type=\"ide\">      <address bus=\"0x00\" domain=\"0x0000\" function=\"0x1\" slot=\"0x01\" type=\"pci\"/>    </controller>    <interface type=\"bridge\">      <mac address=\"54:56:c0:a8:7a:3\"/>      <source bridge=\"virbr0\"/>    </interface>    <serial type=\"pty\">      <target port=\"0\"/>    </serial>    <console type=\"pty\">      <target port=\"0\" type=\"serial\"/>    </console>    <graphics autoport=\"yes\" listen=\"0.0.0.0\" port=\"-1\" type=\"vnc\"/>    <input bus=\"usb\" type=\"tablet\"/>    <input bus=\"ps2\" type=\"mouse\"/>    <memballoon model=\"virtio\">      <address bus=\"0x00\" domain=\"0x0000\" function=\"0x0\" slot=\"0x06\" type=\"pci\"/>    </memballoon>  </devices></domain>"}},"assignedVirtualMachines":[]}},"heartbeatAddress":{"address":"225.4.5.6","port":10000},"hostname":"mafalda","summaryInformation":{"1359971059986":{"timeStamp":1359971059986,"usedCapacity":[4.0,763456.0,38400.0,38400.0],"requestedCapacity":[4.0,763456.0,38400.0,38400.0],"activeCapacity":[8.0,7917832.0,262144.0,262144.0],"passiveCapacity":[0.0,0.0,0.0,0.0],"legacyIpAddresses":[]},"1359971056979":{"timeStamp":1359971056979,"usedCapacity":[4.0,763456.0,38400.0,38400.0],"requestedCapacity":[4.0,763456.0,38400.0,38400.0],"activeCapacity":[8.0,7917832.0,262144.0,262144.0],"passiveCapacity":[0.0,0.0,0.0,0.0],"legacyIpAddresses":[]},"1359971053975":{"timeStamp":1359971053975,"usedCapacity":[3.0,635456.0,25600.0,25600.0],"requestedCapacity":[3.0,635456.0,25600.0,25600.0],"activeCapacity":[8.0,7917832.0,262144.0,262144.0],"passiveCapacity":[0.0,0.0,0.0,0.0],"legacyIpAddresses":[]},"" 
```

[...]

# android - 在 Android 中加密数据

> ID：14684130
> 
> 赞同：4
> 
> 时间：2013-02-04T09:50:15.013
> 
> 标签：android, encryption

我想在我的 Android 应用程序中加密数据。我对当前的加密状态几乎没有经验，无论是针对 Android 还是一般而言。我记得几年前，美国有法律禁止软件公司出口强加密技术。考虑到 Android 是开源代码，我不确定今天是否适用。

我想要完成的是允许用户仅使用密码来加密数据。我更喜欢避免使用私钥/公钥，因为这可能需要用户输入这两个密钥。在我的应用程序中，用户应该能够使用密码加密/解密数据。他们的数据将从一台移动设备发送到另一台移动设备，在不知道密码的情况下，不可能在接收端解密他们的数据。我在发送数据时确实使用了 SSL，但这还不够好，因为数据需要在服务器上保持加密状态，然后才能中继到接收设备。如果黑客可以访问我的服务器，他们可能会读取数据。出于这个原因，我想在发送设备上加密它，只在接收设备上解密。

我需要解决的一些问题：

1.  是否有一个加密 API 可以让我只使用密码进行加密，但如果没有，那么我会考虑使用私钥/公钥。
2.  我可以使用的当前加密算法有哪些？它们在国际上是否可用，或者美国是否对使用它们有一些限制？
3.  我会不会更好地创建自己的自定义加密算法并不时修改它以防止黑客轻易破解它？或者你会劝阻吗？如果是这样，为什么？如果我定期更改算法，我需要在数据中包含一个算法 ID，以便解密代码识别它是否可以解密该算法的当前版本。

我不是在寻找任何“极难破解”的算法，而是应该足够的东西。存储的数据类型是图像、视频、音频和 GPS 数据。如果该解决方案适用于 Android 2.2 及更高版本，那就太好了。我不明白为什么任何算法都不应该在这些版本上工作，因为算法应该独立于操作系统。不过，也许 Android 确实只对某些版本使用了内置算法？

编辑：

我现在在我的应用程序中用于一些基本内部加密的代码如下所示，但我怀疑它是否足够：

```
import java.security.SecureRandom;
import javax.crypto.Cipher;
import javax.crypto.KeyGenerator;
import javax.crypto.SecretKey;
import javax.crypto.spec.SecretKeySpec;

SecretKeySpec skeySpec = new SecretKeySpec(raw, "AES");
Cipher cipher = Cipher.getInstance("AES");
cipher.init(Cipher.ENCRYPT_MODE, skeySpec);
byte[] encrypted = cipher.doFinal(clear); 
```

最初，上面的行是：

```
SecureRandom.getInstance("SHA1PRNG") 
```

但谷歌在 4.0 中改变了这一点，这导致我的代码中断。任何用我之前的代码加密的东西都不能再用 4.0 的默认 API 解密。我个人发现谷歌的一个主要问题是因为它们破坏了兼容性。是什么阻止他们在未来再次重蹈覆辙？我的加密/解密不能依赖于 Google 选择破坏兼容性。

我还被迫使用 128 位加密，因为显然并非所有设备都支持 192 位和 256 位，这可能是由于当地政府的法律。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-05T09:28:09.780

> 是否有一个加密 API 可以让我只使用密码进行加密，但如果没有，那么我会考虑使用私钥/公钥。

我编写了一个开源 Java 库，它使用 256 位 AES 使用密码加密数据。你可以在 GitHub 上找到这个：[JNCryptor](https://github.com/RNCryptor/JNCryptor)。这与iOS的[RNCryptor](https://github.com/RNCryptor/RNCryptor)项目兼容。

这可能适用于您在 Android 上，或者至少您可以看到代码是如何工作的并根据需要进行调整。（如果您发现它没有按您的意愿工作，请随时提出问题，我会调整库）。

> 我可以使用的当前加密算法有哪些？它们在国际上是否可用，或者美国是否对使用它们有一些限制？

有无数可用的算法，但如果你坚持一些非常标准的东西，比如 AES，你会没事的。

据我所知，美国仍然禁止出口使用 256 位 AES 密钥大小的软件。其他国家也可能有其他限制。但我不是律师。

> 我会不会更好地创建自己的自定义加密算法并不时修改它以防止黑客轻易破解它？或者你会劝阻吗？

不要这样做。始终使用经过广泛同行评审的知名算法。无需定期更改您对算法的选择，除非已知它已受到损害。

# iphone - 按钮的随机顺序

> ID：14684131
> 
> 赞同：1
> 
> 时间：2013-02-04T09:50:17.910
> 
> 标签：iphone, xcode, uibutton, plist

我创建了一个测验，它从 plist 中提取问题到一个数组中，并在 uilabel 中显示问题，在 uibuttons 中显示三个可能的答案。我的问题是如何为按钮创建随机顺序，以便三个答案不会总是以相同的顺序显示？

非常感激任何的帮助。

杰米

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-04T13:25:31.470

配合@Abizern 的回答。使用固定按钮并随机排列数组会更有效。你可以这样做：

```
//NSMutableArray *questions = [[NSMutableArray alloc] initWithObjects:@"1", @"2", @"3", @"4", nil];

NSMutableArray *unorderedQuestions = [[NSMutableArray alloc] init];
for (int i=0; i < [questions count]; i++) {
    int lowerBound = 0;
    int upperBound = 100;
    int rndValue = lowerBound + arc4random() % (upperBound - lowerBound);
    [unorderedQuestions addObject:[[NSArray alloc] initWithObjects:[questions objectAtIndex:i], [NSString stringWithFormat:@"%i", rndValue], nil]];
}

NSArray* sortedArray = [unorderedQuestions sortedArrayUsingFunction:order context:NULL];
//or
// questions = [unorderedQuestions sortedArrayUsingFunction:order context:NULL];
NSLog(@"%@", sortedArray); 
```

并将此功能放在某处：

```
static NSInteger order (id a, id b, void* context) {
    NSString* catA = [a lastObject];
    NSString* catB = [b lastObject];
    return [catA caseInsensitiveCompare:catB];
} 
```

这基本上为每个问题分配了一个随机数（介于 0 和 100 之间）并按该数字对其进行排序。然后，您可以只制作`sortedArray`全局（或者可能只是覆盖您的`questions`数组）并按顺序显示对象，它们将被打乱。

`[btnA setTitle:[[[questions objectAtIndex:r] objectAtIndex:0] objectForKey:@"A"] forState:UIControlStateNormal];`

从您的代码来看，您*可能*需要修改几行：（但您也可以在上面的代码之前创建一个`currentQuestionsArray`并将其分配给）`[questions objectAtIndex:r]`

```
for (int i=0; i < [questions count]; i++) {
//to
for (int i=0; i < [[questions objectAtIndex:r] count]; i++) {` 
```

和

```
[unorderedQuestions addObject:[[NSArray alloc] initWithObjects:[questions objectAtIndex:i], [NSString stringWithFormat:@"%i", rndValue], nil]];
//to
[unorderedQuestions addObject:[[NSArray alloc] initWithObjects:[[questions objectAtIndex:r] objectAtIndex:i], [NSString stringWithFormat:@"%i", rndValue], nil]];` 
```

我认为这是最强大的解决方案，因为将来您可能对特定问题有不同数量的答案，并且不需要编辑它来这样做！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-04T10:06:28.050

与其重新创建按钮并定位它们，只需将三个按钮放在固定位置并随机分配答案。

你如何随机分配它们？您可以以随机顺序从数组中取出元素并分配它们，或者，您可以只是随机排列数组，但始终让索引 0 处的对象出现在第一个按钮上，而索引 2 处的对象出现在第二个按钮上等等，我认为这更容易。

[您可以在这个问题What's the Best Way to Shuffle an NSMutableArray?](https://stackoverflow.com/q/56648/41116)中看到数组改组的实现？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-04T10:16:45.220

您可以将按钮放置在任何地方，例如通过使用 设置它们的中心属性`firstButton.center = newCenter;`。
我假设您已经在 Interface Builder 中创建了按钮。因此，您已经拥有了 3 个只需要随机排列的中心。使用我称之为 1、2 和 3 的 3 个按钮，您有以下 6 种可能性：(123)、(132)、(213)、(231)、(312) 和 (321)。因此，您必须随机选择 6 种可能性中的 1 种。该函数`arc4random()`生成一个随机整数。要获得介于 0 和 x 之间的一个，必须调用`arc4random() % (x+1)`. 您可以使用结果来选择正确的排列，例如在以下代码示例中：

首先存储 3 个中心：

```
CGPoint center1 = myButton1.center;
CGPoint center2 = myButton2.center;
CGPoint center3 = myButton3.center; 
```

并稍后生成新位置：

```
int permutation = arc4random() % 6;
switch (permutation) {
    case 0:
        myButton1.center = center1;
        myButton2.center = center2;
        myButton3.center = center3;
        break;
    case 1:
        myButton1.center = center1;
        myButton2.center = center3;
        myButton3.center = center2;
        break;
    case 2:
        myButton1.center = center2;
        myButton2.center = center1;
        myButton3.center = center3;
        break;
    case 3:
        myButton1.center = center2;
        myButton2.center = center3;
        myButton3.center = center1;
        break;
    case 4:
        myButton1.center = center3;
        myButton2.center = center1;
        myButton3.center = center2;
        break;
    case 5:
        myButton1.center = center3;
        myButton2.center = center2;
        myButton3.center = center1;
        break;
    default:
        break;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-04T09:58:46.577

首先，您需要计算所有 UIButtons 意味着您需要在那里使用多少个按钮，然后使用 for 循环以随机顺序创建 uibutton 并使用标签对每个按钮执行操作。`

```
-(void)button:(id)sender {
int btnn = 0;
int spacex = 10;
int spacey=20;
int k=0;
saveBtn = [[NSMutableArray alloc] init];
for (int i=0; i<96; i++) {
    if (btnn>14) {
            spacey=spacey+32;
            spacex = 10;
            btnn = 0;
            }
        else {
            btnn++ ;
            k++;
            UIButton *btn = [UIButton buttonWithType:UIButtonTypeCustom];
            btn.frame = CGRectMake(spacex, spacey, 30.0, 32.0);
            [btn setShowsTouchWhenHighlighted:YES];
            int idx;
            idx = arc4random()%[arr count];
            NSString* titre1 = [arr objectAtIndex:idx];
            [btn setTitle: titre1 forState: UIControlStateNormal];
            [btn setBackgroundImage:[UIImage imageNamed:@"Orange.png"] forState:UIControlStateNormal];
            [btn setTitleColor: [UIColor blackColor] forState: UIControlStateNormal];
            [btn.titleLabel setFont:[UIFont fontWithName:@"TimesNewRomanPS-BoldMT" size:21.0]];
            spacex = spacex + 30;
            btn.tag=k;
            [btn addTarget:self action:@selector(aMethod:)forControlEvents:UIControlEventTouchUpInside];
            [saveBtn addObject:btn];
            [self.view addSubview:btn];
            }
    } 
```

使用上述方法，我希望它对你有用。如果你有任何疑问，请告诉我。谢谢

# vba - 从过滤的单元格中选择一个选项

> ID：14684135
> 
> 赞同：0
> 
> 时间：2013-02-04T09:50:40.787
> 
> 标签：vba, excel

我是 VBA 的新手，所以我无法做到这一点。

我的工作簿中有 21 张纸。我想在第三张表中选择一个单元格（其中包含一个数据透视表），我可以这样做。这个单元格 B3 包含一个过滤器，我可以从过滤后的下拉菜单中选择如何对我的数据进行排序。它包含我是否要按名字或姓氏或全部过滤。

我通常的例程是首先按名字选择，然后复制过滤后的数据并将其粘贴到另一张纸上。然后回到同一张表并按姓氏过滤，然后复制过滤后的数据并将其粘贴到我粘贴早期数据的工作表上。

我需要帮助的是以下内容：

1.  如果选中任何或所有复选框，则取消选中它们。
2.  选择过滤器下拉列表中的 first_name 复选框
3.  取消选择 first_name 框并选择 last_name 框
4.  最后取消选择last_name，然后选择所有复选框

我使用了以下代码

```
Public Sub Open_Sheet3()
Workbooks("MASTER.xlsx").Activate
ActiveWorkbook.Sheets("Sheet3").Activate
ActiveSheet.PivotTables("PivotTable1").PivotFields("Technology").CurrentPage = _
    "(All)"
With ActiveSheet.PivotTables("PivotTable1").PivotFields("Technology")
.PivotItems("Mobility").Visible = False
.PivotItems("(blank)").Visible = False
.PivotItems("Enterprise Messaging Tech").Visible = False
End With
End Sub 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T13:38:16.913

这段代码应该做你想做的事。只需替换工作表/数据透视表/数据透视字段的名称并填写`copyStuff`子。

```
Private Sub YourProcedure()
    SelectItem "first_name"
    CopyStuff

    SelectItem "last_name"
    CopyStuff

    SelectItem "all" 'in case you have an element called "all"
    CopyStuff

    SelectAll 'In case you mean the "(All)" 'element', i.e. include everything
    CopyStuff

End Sub

Private Sub SelectItem(strItemName As String)
    Dim i As Integer

    'Change to your worksheet/pivot talbe/pivot field name!
    With Worksheets("Sheet 1").PivotTables("PivotTable1").PivotFields("a")

        .PivotItems(1).Visible = True 'at least one item always needs to be visible
        For i = 2 To .PivotItems.Count
            .PivotItems(i).Visible = False
        Next
        .PivotItems(strItemName).Visible = True
        If .PivotItems(1).Name <> strItemName Then .PivotItems(1).Visible = False

    End With
End Sub

Private Sub SelectAll()
    Dim i As Integer

    'Change to your worksheet/pivot talbe/pivot field name!
    With Worksheets("Sheet 1").PivotTables("PivotTable1").PivotFields("a")
        For i = 1 To .PivotItems.Count
            .PivotItems(i).Visible = True
        Next
    End With
End Sub

Private Sub CopyStuff()
    'Your code goes here
End Sub 
```

一些解释：

如果要取消选择数据透视字段的项目，则需要确保在任何时候至少有一个项目被选中。因此，您不能取消全选然后选择您想要的项目 - 而是选择第一个项目，取消选择所有其他项目，选择您的项目并取消选择第一个项目，除非它是您的项目。这就是`SelectItem`正在做的事情

# c++ - 如何在 C++ 中查找构成翻译单元的所有文件？

> ID：14684143
> 
> 赞同：5
> 
> 时间：2013-02-04T09:51:25.960
> 
> 标签：c++

我正在使用仅标头库，并且只想包含我实际使用的库的一部分。

如果我包含库的标题之一，我如何找到该库包含的所有其他标题？或者更笼统地说：我怎样才能找到构成 C++ 翻译单元的所有文件？（我在 Linux 上使用 g++。）

# 编辑：使用 gcc 的可能方法（答案摘要）

*   gcc -H 产生以下形式的输出：

    ```
    ... /usr/include/c++/4.6/cmath
    .... /usr/include/math.h
    ..... /usr/include/x86_64-linux-gnu/bits/huge_val.h
    ..... /usr/include/x86_64-linux-gnu/bits/huge_valf.h 
    ```

    但是，您必须手动过滤掉系统标头。

*   gcc -E 为您提供原始预处理器输出：

    ```
    # 390 "/usr/include/features.h" 2 3 4
    # 38 "/usr/include/assert.h" 2 3 4
    # 68 "/usr/include/assert.h" 3 4
    extern "C" {    
    extern void __assert_fail (__const char *__assertion, __const char *__file,
          unsigned int __line, __const char *__function)
          throw () __attribute__ ((__noreturn__)); 
    ```

    您必须手动解析线标记。见： http: [//gcc.gnu.org/onlinedocs/cpp/Preprocessor-Output.html](http://gcc.gnu.org/onlinedocs/cpp/Preprocessor-Output.html)

*   gcc -M 为给定的源文件生成一个 Make 文件。输出如下所示：

    ```
    object.o: mylibrary/object.h /usr/include/c++/4.6/map \
     /usr/include/c++/4.6/bits/stl_tree.h \
     /usr/include/c++/4.6/bits/stl_algobase.h \
     /usr/include/c++/4.6/x86_64-linux-gnu/./bits/c++config.h \ 
    ```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-04T10:16:37.120

我相信您正在寻找[gcc -H](http://gcc.gnu.org/onlinedocs/gcc-4.6.0/gcc/Preprocessor-Options.html#index-H-957)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-04T10:19:47.303

`g++ -M somefile`获取一个 makefile，其中包含所有文件 somefile 作为 somefile.o 的依赖项。

`g++ -MM somefile`相同，但不列出系统标题（例如`/usr/include`or中的任何内容`/usr/local/include`）。

What do you need this for? If it's for dependency tracking, the above should suffice. If you, on the other hand, want to do some crazy thing like "I include this header and that header includes this header, so I don't need to include it again" - don't. No, seriously. Don't.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-04T09:54:01.940

您可以使用 GCC 的`-E`标志获取预处理的源代码，然后将其 grep 用于`#include`. 我不知道有任何其他方式可以让源文件找到进入翻译单元的方式，所以这应该可以完成工作。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-02-04T10:14:33.993

使用 g++（以及大多数 Unix 编译器，我认为），您可以使用`-M`. 对于其他编译器，您需要`-E`or `/E`，将输出捕获到文件中，并使用您喜欢的脚本语言对文件进行后处理。（我在我的 makefile 中这样做，以构建依赖项。）

# c# - Java TCP 客户端和 C# 服务器；客户端仅在服务器关闭后接收消息

> ID：14684147
> 
> 赞同：0
> 
> 时间：2013-02-04T09:51:44.053
> 
> 标签：c#, java, client-server

我用 C# 编写了一个异步服务器，用 Java 编写了一个 TCP 客户端，用于一个 Android 应用程序。客户端可以很好地向服务器发送消息，并且在发送时会收到它们。但是，当我从服务器向客户端发送消息时，客户端仅在服务器关闭后（即套接字关闭时）显示消息。奇怪的是，我也用 C# 编写了一个客户端，并在消息发送后立即接收。

C# 服务器和客户端都使用异步 begin* 和 end* 方法，Java 客户端使用流读取器/写入器。

任何人都可以建议为什么 Java 客户端会以这种方式运行以及如何解决这个问题？

谢谢。

客户代码：

```
 public void run() {

    mRun = true;

    try {
        //here you must put your computer's IP address.
        InetAddress serverAddr = InetAddress.getByName(SERVERIP);

        Log.e("TCP Client", "C: Connecting...");

        //create a socket to make the connection with the server
        socket = new Socket(serverAddr, SERVERPORT);

        try {
            if (out != null)
            {
                //send the message to the server
                out = new PrintWriter(new BufferedWriter(new OutputStreamWriter(socket.getOutputStream())), true);

                Log.e("TCP Client", "C: Sent.");

                Log.e("TCP Client", "C: Done.");
            }

            //receive the message which the server sends back
            in = new BufferedReader(new InputStreamReader(socket.getInputStream()));

            //in this while the client listens for the messages sent by the server
            while (mRun) {
                serverMessage = in.readLine();

                if (serverMessage != null && mMessageListener != null) {
                    //call the method messageReceived from MyActivity class
                    mMessageListener.messageReceived(serverMessage);

                    serverMessage = null;
                }
            }

            Log.e("RESPONSE FROM SERVER", "S: Received Message: '" + serverMessage + "'");

        } catch (Exception e) {

            Log.e("TCP", "S: Error", e);

        } finally {
            //the socket must be closed. It is not possible to reconnect to this socket
            // after it is closed, which means a new socket instance has to be created.
            socket.close();
        }

    } catch (Exception e) {

        Log.e("TCP", "C: Error", e);

    }

} 
```

服务器代码：

```
public void Send(String data)
    {
        // Convert the string data to byte data using ASCII encoding.
        byte[] byteData = Encoding.ASCII.GetBytes(data);

        // Begin sending the data to the remote device.
        socket.BeginSend(byteData, 0, byteData.Length, 0, new AsyncCallback(SendCallback), socket);
    }

    private static void SendCallback(IAsyncResult ar)
    {
        try
        {
            //Retrieve the socket from the state object.
            Socket clientSocket = (Socket)ar.AsyncState;

            //send the data
            int bytesSent = clientSocket.EndSend(ar);
        }
        catch (Exception e)
        {
            Console.WriteLine(e.ToString());
        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T10:14:41.407

我的猜测是您从服务器发送的数据不会以 EOL 序列（`\n`或`\r\n`）结尾。所以`readLine()`客户端的方法永远不会返回，因为它只能在确定线路终止时返回（即当接收到 EOL 序列时，或连接关闭时）。

# javascript - 浏览器不加载带有“Access-Control-Allow-Origin: *”的 CSS

> ID：14684149
> 
> 赞同：3
> 
> 时间：2013-02-04T09:51:48.987
> 
> 标签：javascript, css, cross-domain

我正在尝试从跨源加载 CSS 和 Javascript 文件。我还在 `Access-Control-Allow-Origin: *`响应中设置了标题，但浏览器不加载文件，我使用下面给出的代码加载 CSS：

```
var fileref = document.createElement("link");
fileref.setAttribute("rel", "stylesheet");
fileref.setAttribute("type", "text/css");
fileref.setAttribute("href", filename);
document.getElementsByTagName("head")[0].appendChild(fileref); 
```

我想使用 http 连接加载 css 和 js，这将在 https:// [site] 中加载

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T10:09:14.490

确保`filename`变量包含正确的路径`http://`。示例：`http://localhost:8080/css/style.css` 或 `http://localhost:8080/project_folder/css/style.css`

# postgresql - pgbouncer 端口与 db 端口

> ID：14684150
> 
> 赞同：2
> 
> 时间：2013-02-04T09:51:54.870
> 
> 标签：postgresql, pgbouncer

我将 PostgreSQL 与 php 一起使用。过了一会儿，客户端连接变大了，所以我尝试使用 pgbouncer 设置最大连接等。我的数据库端口是 5432，我所有的 php 都使用该端口连接到我的数据库。我的问题是，如果我使用相同的端口 5432 并设置为 pgbouncer 监听端口怎么办？所以我的数据库和 pgbouncer 使用相同的端口，所以我不必更改客户端代码。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T16:12:55.937

您不能在同一个端口上运行两个不同的应用程序，但您可以在 pgbouncer 上使用 5432 并为您的数据库使用不同的端口（例如 6432）。

要更改 postgresql 上的端口，请编辑您的*postgresql.conf*：

```
#------------------------------------------------------------------------------
# CONNECTIONS AND AUTHENTICATION
#------------------------------------------------------------------------------

# - Connection Settings -
(...)
port = 6432                             # (change requires restart) 
```

# android-layout - Facebook 提要内容的布局代码

> ID：14684155
> 
> 赞同：2
> 
> 时间：2013-02-04T09:52:11.207
> 
> 标签：android-layout, facebook-android-sdk

我想使用 Facebook 样式显示 Facebook Feed 的 Graph API 输出，因为它出现在 Web 和移动应用程序上。是否有可用的参考代码/布局？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T04:24:58.683

好的。如果您的要求是关于 Facebook sdk/ 应用程序中的布局和设计，那么您必须为您的设计进行此类设计。

没有什么比开发这种类型的布局更好的了。是的，有一些 Demo 示例可用于开发此类 UI 集成。

所以希望你明白了。

对于任何查询评论在这里。

享受编码。:)

# java - Java正则表达式在非注释中查找特殊字符

> ID：14684156
> 
> 赞同：0
> 
> 时间：2013-02-04T09:52:13.497
> 
> 标签：java, regex, eclipse, replace

在我将工作区编码切换为 UTF-8 并返回（Windows-ISO）后，我所有的（德语）变音符号都转换为 ï¿½。

我想用静态引用替换 Eclipse Find/Replace 中的所有 ï¿½。

```
public interface StringConstants {
    public static final String ae = "\u00E4";
    public static final String oe = "\u00F6";
    public static final String ue = "\u00FC";
    public static final String AE = "\u00C4";
    public static final String OE = "\u00D6";
    public static final String UE = "\u00DC";
    public static final String ss = "\u00DF";
} 
```

我不想替换所有的评论，因为没有人关心它们......

到目前为止，我可以做到这一点

```
Find: ^[^//](.*?)(ï¿½)+

Replacement: $1" + StringConstants.ue + " 
```

它将省略 CVS 注释

```
// ï¿½ber 
```

但它不适用于前面有空格或代码的注释以及块注释。例如：

```
doSomething(); // blabla ï¿½ber // <-- should be omitted
/** 
 * ï¿½ber // <-- should be omitted
 */
\t// ï¿½ber // <-- should be omitted
log.debug("ï¿½ber"); // <-- should be replaced 
```

我试图编写一个正则表达式，它应该省略 // 之前带有任何字符的注释，但它没有用。

（背景：该代码的任何文档中都没有定义的字符集，甚至在 VCS 中也没有。我是这个工具的最后一个开发人员，所有其他开发人员都走了。代码是在 Windows 下为 Linux 上的 tomcat 开发的 - AppUsers 有窗户也是）

有人能帮我吗？

干杯，马丁

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-13T12:40:52.053

这个如何：

```
^(?:(?!//|(?:\*\s)).)*(ï¿½)+.* 
```

在这里，您需要将 gourp 1 （唯一的组）替换为您想要的文本。正则表达式搜索带有“ï¿½”的行，前面没有'//'或'*\s'

# android - 使用 epub 文件在 android 屏幕上不显示任何内容

> ID：14684159
> 
> 赞同：3
> 
> 时间：2013-02-04T09:52:28.067
> 
> 标签：android, epub

我正在使用这个[epub 文件](https://code.google.com/p/epub-samples/downloads/detail?name=widget-figure-gallery-20121022.epub&can=2&q=)，我正在使用的代码是

```
public class MainActivity extends Activity {
  /** Called when the activity is first created. */
  @Override
  public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    AssetManager assetManager = getAssets();

    try {
      // find InputStream for book
      InputStream epubInputStream = assetManager.open("widget.epub");
      System.err.println("epubInputStream>>"+epubInputStream);
      // Load Book from inputStream
      Book book = (new EpubReader()).readEpub(epubInputStream);

      // Log the book's authors
      Log.i("epublib", "author(s): " + book.getMetadata().getAuthors());

      // Log the book's title
      Log.i("epublib", "title: " + book.getTitle());

      // Log the book's coverimage property
      Bitmap coverImage = BitmapFactory.decodeStream(book.getCoverImage().getInputStream());
     Log.i("epublib", "Coverimage is " + coverImage.getWidth() + " by " + coverImage.getHeight() + " pixels");

      // Log the tale of contents
      logTableOfContents(book.getTableOfContents().getTocReferences(), 0);
    } catch (IOException e) {
      Log.e("epublib", e.getMessage());
    }
  }

private void logTableOfContents(List<TOCReference> tocReferences, int depth) {
    if (tocReferences == null) {
      return;
    }
    for (TOCReference tocReference : tocReferences) {
      StringBuilder tocString = new StringBuilder();
      for (int i = 0; i < depth; i++) {
        tocString.append("\t");
      }
      tocString.append(tocReference.getTitle());
      Log.i("epublib", tocString.toString());

      logTableOfContents(tocReference.getChildren(), depth + 1);
    }
  } 
```

}

我的xml是::

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="match_parent"
android:layout_height="match_parent"
tools:context=".MainActivity" >

<TextView
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_centerHorizontal="true"
    android:layout_centerVertical="true"
    android:text="@string/hello_world" />
</RelativeLayout> 
```

我的 Logcat 显示每个日志，没有任何错误

```
02-04 15:12:46.839: D/dalvikvm(26799): WAIT_FOR_CONCURRENT_GC blocked 6ms
02-04 15:12:46.849: I/epublib(26799): author(s): [Starr, E.L.]
02-04 15:12:46.849: I/epublib(26799): title: EPUB Widgets: Figure Gallery
02-04 15:12:46.879: D/dalvikvm(26799): GC_FOR_ALLOC freed 152K, 7% free 8209K/8788K, paused 24ms, total 24ms
02-04 15:12:46.889: I/dalvikvm-heap(26799): Grow heap (frag case) to 11.828MB for 3813392-byte allocation
02-04 15:12:46.919: D/dalvikvm(26799): GC_FOR_ALLOC freed <1K, 5% free 11933K/12516K, paused 24ms, total 24ms
02-04 15:12:46.929: D/dalvikvm(26799): GC_CONCURRENT freed <1K, 5% free 11932K/12516K, paused 3ms+2ms, total 18ms
02-04 15:12:46.979: I/epublib(26799): Coverimage is 1024 by 931 pixels
02-04 15:12:46.979: I/epublib(26799): Phases of the Moon
02-04 15:12:47.019: D/libEGL(26799): loaded /system/lib/egl/libEGL_tegra.so
02-04 15:12:47.059: D/libEGL(26799): loaded /system/lib/egl/libGLESv1_CM_tegra.so
02-04 15:12:47.059: D/libEGL(26799): loaded /system/lib/egl/libGLESv2_tegra.so
02-04 15:12:47.079: D/OpenGLRenderer(26799): Enabling debug mode 0 
```

我只能`HelloWorld`在屏幕上显示而不是在 epub 内容上显示！！如何显示 epub 内容？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T06:12:48.477

更改 logtableofcontents 方法

```
 private void logTableOfContents(List<TOCReference> tocReferences, int depth) {
    if (tocReferences == null) {

        return;
    }

    for (TOCReference tocReference : tocReferences) {
        StringBuilder tocString = new StringBuilder();
         for (int i = 0; i < depth; i++) {
         tocString.append("\t");
         }
         tocString.append(tocReference.getTitle());
         Log.i("TOC", tocString.toString());

        try {
            InputStream is = tocReference.getResource().getInputStream();
            BufferedReader r = new BufferedReader(new InputStreamReader(is));

            while ((line = r.readLine()) != null) {
                // line1 = Html.fromHtml(line).toString();
                Log.v("line" + i, Html.fromHtml(line).toString());
                // line1 = (tocString.append(Html.fromHtml(line).toString()+
                // "\n")).toString();
                line1 = line1.concat(Html.fromHtml(line).toString());
            }
            finalstr = finalstr.concat("\n").concat(line1);
            // Log.v("Content " + i, finalstr);
            i++;
        } catch (IOException e) {

        }

        logTableOfContents(tocReference.getChildren(), depth + 1);
    }

    webview.loadDataWithBaseURL("", finalstr, "text/html", "UTF-8", "");
} 
```

# android - 如何将 SimpleAdapter 设置为 AutoCompletetextview？

> ID：14684161
> 
> 赞同：2
> 
> 时间：2013-02-04T09:52:28.683
> 
> 标签：android, autocompletetextview

在我的应用程序中，我需要向项目显示 AutoCompletetextview 的更多信息。如何将 SimpleAdapter 设置为 AutoCompletetextview 而不是 ArrayAdapter？

# android - Android：由于 ImageView 导致的内存错误？

> ID：14684165
> 
> 赞同：2
> 
> 时间：2013-02-04T09:52:39.663
> 
> 标签：android, eclipse, memory-leaks, imageview

我有 2 个活动 Activity A = GameActivity 使用 PhotoTask.class 的一个实例，它扩展了 AsyncTask 并用于拍摄和保存图片。图片保存后，我启动 Activity B = ShareActivity。

当我拍照并且不改变方向时，会调用 Activity B 并且一切正常。然而，如果我改变屏幕的方向来拍照（我从纵向转到横向），我在拍照时会出错（活动 B 没有启动）。

我什至在我的代码中注释了我的位图图像，但仍然有位图错误！奇怪的是，如果我在我的代码中注释**ImageView5**（它没有做任何特别的事情）并保留我的位图，我没有错误。问题似乎来自这个 ImageView 但我无法解释

我在清单中添加了 configChanges:orientation，回收了我的 bnitmap，使用了活动的 WeakReference 而不是活动本身作为 PhotoTask 中的变量，尝试使用 Eclipse 内存分析器查看内存泄漏（[Android：使用 Eclipse 内存分析器检测泄漏](https://stackoverflow.com/questions/14646029/android-detecting-leaks-with-eclipse-memory-analyzer)）但不明白为什么我有这些错误

我真的搜索了很多，我变得非常绝望，所以如果你能帮助我，那就太好了

```
02-04 10:03:04.353: E/AndroidRuntime(17427): FATAL EXCEPTION: main
02-04 10:03:04.353: E/AndroidRuntime(17427): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.example.kersplatt/com.example.kersplatt.ShareActivity}: android.view.InflateException: Binary XML file line #23: Error inflating class <unknown>
02-04 10:03:04.353: E/AndroidRuntime(17427):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1647)
02-04 10:03:04.353: E/AndroidRuntime(17427):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1663)
02-04 10:03:04.353: E/AndroidRuntime(17427):    at android.app.ActivityThread.access$1500(ActivityThread.java:117)
02-04 10:03:04.353: E/AndroidRuntime(17427):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:931)
02-04 10:03:04.353: E/AndroidRuntime(17427):    at android.os.Handler.dispatchMessage(Handler.java:99)
02-04 10:03:04.353: E/AndroidRuntime(17427):    at android.os.Looper.loop(Looper.java:130)
02-04 10:03:04.353: E/AndroidRuntime(17427):    at android.app.ActivityThread.main(ActivityThread.java:3683)
02-04 10:03:04.353: E/AndroidRuntime(17427):    at java.lang.reflect.Method.invokeNative(Native Method)
02-04 10:03:04.353: E/AndroidRuntime(17427):    at java.lang.reflect.Method.invoke(Method.java:507)
02-04 10:03:04.353: E/AndroidRuntime(17427):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:875)
02-04 10:03:04.353: E/AndroidRuntime(17427):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:633)
02-04 10:03:04.353: E/AndroidRuntime(17427):    at dalvik.system.NativeStart.main(Native Method)
02-04 10:03:04.353: E/AndroidRuntime(17427): Caused by: android.view.InflateException: Binary XML file line #23: Error inflating class <unknown>
02-04 10:03:04.353: E/AndroidRuntime(17427):    at android.view.LayoutInflater.createView(LayoutInflater.java:518)
02-04 10:03:04.353: E/AndroidRuntime(17427):    at com.android.internal.policy.impl.PhoneLayoutInflater.onCreateView(PhoneLayoutInflater.java:56)
02-04 10:03:04.353: E/AndroidRuntime(17427):    at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:568)
02-04 10:03:04.353: E/AndroidRuntime(17427):    at android.view.LayoutInflater.rInflate(LayoutInflater.java:623)
02-04 10:03:04.353: E/AndroidRuntime(17427):    at android.view.LayoutInflater.rInflate(LayoutInflater.java:626)
02-04 10:03:04.353: E/AndroidRuntime(17427):    at android.view.LayoutInflater.inflate(LayoutInflater.java:408)
02-04 10:03:04.353: E/AndroidRuntime(17427):    at android.view.LayoutInflater.inflate(LayoutInflater.java:320)
02-04 10:03:04.353: E/AndroidRuntime(17427):    at android.view.LayoutInflater.inflate(LayoutInflater.java:276)
02-04 10:03:04.353: E/AndroidRuntime(17427):    at com.android.internal.policy.impl.PhoneWindow.setContentView(PhoneWindow.java:209)
02-04 10:03:04.353: E/AndroidRuntime(17427):    at android.app.Activity.setContentView(Activity.java:1657)
02-04 10:03:04.353: E/AndroidRuntime(17427):    at com.example.kersplatt.ShareActivity.onCreate(ShareActivity.java:64)
02-04 10:03:04.353: E/AndroidRuntime(17427):    at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
02-04 10:03:04.353: E/AndroidRuntime(17427):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1611)
02-04 10:03:04.353: E/AndroidRuntime(17427):    ... 11 more
02-04 10:03:04.353: E/AndroidRuntime(17427): Caused by: java.lang.reflect.InvocationTargetException
02-04 10:03:04.353: E/AndroidRuntime(17427):    at java.lang.reflect.Constructor.constructNative(Native Method)
02-04 10:03:04.353: E/AndroidRuntime(17427):    at java.lang.reflect.Constructor.newInstance(Constructor.java:415)
02-04 10:03:04.353: E/AndroidRuntime(17427):    at android.view.LayoutInflater.createView(LayoutInflater.java:505)
02-04 10:03:04.353: E/AndroidRuntime(17427):    ... 23 more
02-04 10:03:04.353: E/AndroidRuntime(17427): Caused by: java.lang.OutOfMemoryError: bitmap size exceeds VM budget
02-04 10:03:04.353: E/AndroidRuntime(17427):    at android.graphics.BitmapFactory.nativeDecodeAsset(Native Method)
02-04 10:03:04.353: E/AndroidRuntime(17427):    at android.graphics.BitmapFactory.decodeStream(BitmapFactory.java:460)
02-04 10:03:04.353: E/AndroidRuntime(17427):    at android.graphics.BitmapFactory.decodeResourceStream(BitmapFactory.java:336)
02-04 10:03:04.353: E/AndroidRuntime(17427):    at android.graphics.drawable.Drawable.createFromResourceStream(Drawable.java:697)
02-04 10:03:04.353: E/AndroidRuntime(17427):    at android.content.res.Resources.loadDrawable(Resources.java:1709)
02-04 10:03:04.353: E/AndroidRuntime(17427):    at android.content.res.TypedArray.getDrawable(TypedArray.java:601)
02-04 10:03:04.353: E/AndroidRuntime(17427):    at android.widget.ImageView.<init>(ImageView.java:118)
02-04 10:03:04.353: E/AndroidRuntime(17427):    at android.widget.ImageView.<init>(ImageView.java:108)
02-04 10:03:04.353: E/AndroidRuntime(17427):    ... 26 more 
```

供您参考，我的代码片段

```
public class ShareActivity extends Activity implements OnClickListener{
    public static final String APP_ID = "**********";
    Facebook facebook = new Facebook(APP_ID);
    AsyncFacebookRunner mAsyncRunner = new AsyncFacebookRunner(facebook);
    String FILENAME = "AndroidSSO_data";
    SharedPreferences mPrefs;
    Handler mHandler;
    File file;
    byte[] bytes;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        Log.w("SHAREACTIVITY","SECOND");
        super.onCreate(savedInstanceState);
        setContentView(R.layout.share);
        file = (File) this.getIntent().getExtras().get("PICTURE_TAKEN");
        Bitmap bitmap = BitmapFactory.decodeFile(file.getAbsolutePath());
        Bitmap mutableBitmap = bitmap.copy(Bitmap.Config.ARGB_8888, true);
        **ImageView image5 = (ImageView) findViewById(R.id.imageView5);**
        **image5.setImageBitmap(mutableBitmap);**
        bitmap.recycle();
        mutableBitmap.recycle();

    } 
```

课堂摄影

```
public class PhotoTask extends AsyncTask<Boolean, Void, Void> {
    private Camera camera;
    private SurfaceView surfaceCamera;
    private boolean isPreview=false;
    private SurfaceHolder holder;
    private WeakReference<GameActivity> weakgameactivity;
    GameActivity gameactivity;
    private File output;

    public PhotoTask(Camera camera, SurfaceView surfaceCamera,boolean isPreview, SurfaceHolder holder, GameActivity gameactivity) {
        super();
        this.camera = camera;
        this.surfaceCamera = surfaceCamera;
        this.isPreview = isPreview;
        this.holder = holder;
        this.weakgameactivity = new WeakReference<GameActivity>(gameactivity);
        this.gameactivity=this.weakgameactivity.get();
    }

    PictureCallback myPictureCallback_JPG = new PictureCallback(){

        @Override
        public void onPictureTaken(byte[] data, Camera camera) {
            Log.w("GAMEACTIVITY","FIRST");
//          ImageView image5 = (ImageView) gameactivity.findViewById(R.id.imageView6);
            File imagesFolder = new File(Environment.getExternalStorageDirectory(), "/KersplattFolder");

            imagesFolder.mkdirs(); 
            SimpleDateFormat dateFormat = new SimpleDateFormat("yyyymmddhhmmss");
            String date = dateFormat.format(new Date());
            String fileName = "Kersplatt_" + date + ".jpg";
            output = new File(imagesFolder, fileName);
            ImageView view = (ImageView) gameactivity.findViewById(R.id.imageView6);
            view.setDrawingCacheEnabled(true);
            Bitmap b = view.getDrawingCache();
            FileOutputStream fos = null;
            try {
                fos = new FileOutputStream(output);
            } catch (FileNotFoundException e1) {
                // TODO Auto-generated catch block
                e1.printStackTrace();
            }
            b.compress(CompressFormat.JPEG, 95, fos);
            try {
            fos.write(data);
            fos.close();
            } catch (FileNotFoundException e) {
                    e.printStackTrace();
            }
              catch (IOException e) {
                    e.printStackTrace();
            }
              camera.stopPreview();
              Log.w("GAMEACTIVITY","INTENT");
              b.recycle();
              Intent intent = new Intent(gameactivity.getApplicationContext(),ShareActivity.class);
              // Sending the picture taken to ShareActivity
              intent.putExtra("PICTURE_TAKEN", output);
              gameactivity.startActivity(intent);
        }

    };

    @Override
    protected Void doInBackground(Boolean... params) {
         camera.takePicture(null,null, myPictureCallback_JPG);
            Log.w("GAMEACTIVITY","TAKEPICTURE");
            return null;
    }

} 
```

我的 imageview5

```
 <ImageView
         android:id="@+id/imageView5"
         android:layout_width="85dp"
         android:layout_height="100dp"
         android:layout_marginLeft="8dp"
         android:layout_marginTop="20dp"
         android:adjustViewBounds="true"
         android:src="@drawable/diviseur" /> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T08:42:38.003

正如 Usman Kurd 所说，您将（完整）图像加载到内存中，并在内存中创建该图像的副本。这会占用大量内存。他提到的文件指出：

```
BitmapFactory.Options options = new BitmapFactory.Options();
options.inJustDecodeBounds = true;
BitmapFactory.decodeResource(getResources(), R.id.myimage, options);
int imageHeight = options.outHeight;
int imageWidth = options.outWidth;
String imageType = options.outMimeType; 
```

您的内存不足发生在这些行中的任何一条上，而不是在图像视图中设置图像时

```
Bitmap bitmap = BitmapFactory.decodeFile(file.getAbsolutePath());
Bitmap mutableBitmap = bitmap.copy(Bitmap.Config.ARGB_8888, true); 
```

如果您使用这个 android 不会将整个位图加载到内存中，而是按比例缩小版本。阅读文档，您的错误肯定会消失。

上面的代码只会解码边界。[文档](http://developer.android.com/training/displaying-bitmaps/load-bitmap.html "文件")解释了如何使用它。请参阅名为“将按比例缩小的版本加载到内存中”的章节如何正确实现这一点

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T10:09:09.937

拍照后，您需要使用 Image resize 来调整图像大小，将其传递给 Image 以及您想要的新宽度和高度。如果在 clcik DDMS 上跟踪堆，然后在设备列表上的 evice 并调试代码，您将看到图像的大小增加额外的普通查看从官方文档[有效地加载大位图](http://developer.android.com/training/displaying-bitmaps/load-bitmap.html)

阅读后您可以尝试以下代码，您的问题将得到解决

```
 /** getResizedBitmap method is used to Resized the Image according to custom width and height 
  * @param image
  * @param newHeight (new desired height)
  * @param newWidth (new desired Width)
  * @return image (new resized image)
  * */
public static Bitmap getResizedBitmap(Bitmap image, int newHeight, int newWidth) {
    int width = image.getWidth();
    int height = image.getHeight();
    float scaleWidth = ((float) newWidth) / width;
    float scaleHeight = ((float) newHeight) / height;
    // create a matrix for the manipulation
    Matrix matrix = new Matrix();
    // resize the bit map
    matrix.postScale(scaleWidth, scaleHeight);
    // recreate the new Bitmap
    Bitmap resizedBitmap = Bitmap.createBitmap(image, 0, 0, width, height,
            matrix, false);
    return resizedBitmap;
} 
```

# android - Android 应用程序 - 'Active Installs by Country' 显示应用程序不可用的国家/地区

> ID：14684170
> 
> 赞同：3
> 
> 时间：2013-02-04T09:52:54.327
> 
> 标签：android

我有一个免费的 Android 应用程序，目前仅在欧盟国家可用（通过开发者控制台完成）。但是，当我查看应用程序的“按国家/地区的活动设备安装量”统计信息时，它显示该应用程序安装在我尚未提供的国家/地区 - 例如印度。为什么会这样？

# facebook-opengraph - 所有自定义 Open Graph 操作是否会在 2 月 6 日停止工作？

> ID：14684173
> 
> 赞同：2
> 
> 时间：2013-02-04T09:53:13.657
> 
> 标签：facebook-opengraph, custom-action

我仍然不是 100% 清楚 2 月 6 日更改的后果是什么。Facebook[在他们的路线图更新中](https://developers.facebook.com/roadmap/#february-2013)*明确*表示：

> 我们将不再显示仅由用户消费内容发布的自定义 Open Graph 操作。如果您拥有其中一项操作并且之前已获得批准，您将收到我们的电子邮件。开发人员应停止发布这些操作，因为这样做会从 2 月 6 日开始返回错误。可以在用户简单地消费内容时发布的唯一操作是内置操作。有关详细信息，请参阅此博客文章。

很明显，通过 Open Graph*自动且无提示地发布*到用户墙上的自定义操作必须使用内置操作类型：Like、Follow、Listen、Read、Watch。但这是关于*用户消费内容*的。那么所有其他自定义操作呢？即我的应用程序正在发布关于用户学习英语语言内容单元的信息。这些是否会继续有效，因为它们不是关于“消费内容”的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T12:17:20.873

您可能需要查看[此指南](https://developers.facebook.com/docs/submission-process/opengraph/guidelines/#criteria)。
它为您提供了一些关于什么是*内容消费*的详细信息/场景。
我假设您使用 Open Graph Action（发布关于用户学习英语内容单元的帖子）不是内容消费的一部分，并且仍然被允许。当然，这也取决于您发布的方式和时间。

# jquery - 如何使用 JQuery 更新另一个元素的内容

> ID：14684177
> 
> 赞同：4
> 
> 时间：2013-02-04T09:53:24.287
> 
> 标签：jquery, function, hover

好的，所以我有一个大约 5 个链接的列表，一个接一个。当我将鼠标悬停在其中一个链接上时，我需要它扩大尺寸（以将其与其他链接区分开来）。当我单击其中一个链接时，我希望它更新不同元素中的图像。我已经想出了如何使用 JQuery 和 CSS 为单个链接执行此操作，但我想知道是否需要创建 4 个额外的（用于 4 个其他链接）的 JQuery 函数集，或者是否有一种方法可以节省代码空间使用带有各种计数器的 for 循环。我的逻辑问题（仅使用一个包罗万象的函数）源于这样一个事实，即一旦链接悬停，我不知道如何区分链接。这让我觉得我需要为每个链接设置不同的功能。真诚感谢任何和所有建议。

这是我的 HTML 代码：

```
 <div class="interestsMarquee">

  <img src="sportsInterest.png" class="trigger" id="interest1" alt="sports" />
  <img src="sportsInterest.png" class="trigger" id="interest2" alt="music"  />
  <img src="sportsInterest.png" class="trigger" id="interest3" alt="hunting" />
  <img src="sportsInterest.png" class="trigger" id="interest4" alt="exercise" />
  <img src="sportsInterest.png" class="trigger" id="interest5" alt="shopping" />
  </div> 
```

这是我的 JQuery 代码：

```
 <script>
    $(function() {
var i = '1';

    $("#interest"+i).hover(function()
   {
     $("#interest"+i).css("width","115%")
               .css("height","70px")
               .css("margin-left","-10px");
    },function()
{
    $("#interest"+i).css("width","95%")
               .css("height","56px")
               .css("margin-left","3px");
        }); 

     $('.trigger').css('cursor', 'pointer')
         .click({id: 'myImage'}, changeImage);

function changeImage(e)
    {
var element=document.getElementById(e.data.id)
if (element.src.match("images/Cowboys.jpg")) 
{
    element.src="images/Countryside_bg.jpg";
    }
   else
   {
   element.src="images/Cowboys.jpg";
     }

    }

   });
     </script> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T10:07:53.383

在这种情况下，您不需要使用循环或其他`JQuery`功能，使用一个选择器可以匹配您需要的所有元素。如果你不需要的话，你也不应该将 jQuery 与纯 Javascript 代码合并。我重写了你的代码，现在全部在 jQuery 中：

### 的HTML：

```
<div class="interestsMarquee">
  <img src="sportsInterest.png" class="trigger" data-index="1" id="interest1" />
  <img src="sportsInterest.png" class="trigger" data-index="1" id="interest2" />
  <img src="sportsInterest.png" class="trigger" data-index="1" id="interest3" />
  <img src="sportsInterest.png" class="trigger" data-index="1" id="interest4" />
  <img src="sportsInterest.png" class="trigger" data-index="1" id="interest5" />
</div> 
```

### jQuery：

```
$(".interestsMarquee img").hover(function(){
    $(this).css(
          "width":"115%",
          "height":"70px",
          "margin-left":"-10px"
        );
    },function(){
    $(this).css(
         "width":"95%",
         "height":"56px",
         "margin-left":"3px");
}).click(function(){
    //Lets get the index of the img
    var index = ($(this).data('index');
    var src = "images/default_img.jpg";
    //Switch index to update src
    switch (index ) {
       case (1): src = 'images/image1.jpg';
                 break;
       case (2): src = 'images/image2.jpg';
                 break;
       case (3): src = 'images/image3.jpg';
                 break;
       case (4): src = 'images/image4.jpg';
                 break;
       case (5): src = 'images/image5.jpg';
                 break;
     }
     //adding the new src to the #myImage div
     $('#myImage').attr('src', src);
 }); 
```

### 变化：

*   就像您使用的一样，您可以在匹配相同的选择器之后`.css`推送`click()`事件`hover`
*   `$(this)`在事件函数中使用
*   可以`attr('src')`用来获取`src`属性。
*   一次性更改多个 CSS 属性

### 小提琴：http: [//jsfiddle.net/sHxR3/](http://jsfiddle.net/sHxR3/)

**更新：**我已经更新了我的代码以`src`根据单击的 img 更改外部 div img。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-04T10:10:57.103

我将通过展示如何改进 jQuery 代码以及如何一次性解决您的问题来尝试回答您的问题！:)

首先，您可以通过将`.css()`调用重构为一个调用来简化代码。这将使整个代码运行得更快，因为您不会在每次调用`.css()`.

所以那段代码将从

```
$("#interest"+i).hover(function() {
  $("#interest"+i).css("width","115%")
         .css("height","70px")
         .css("margin-left","-10px");
},function() {
  $("#interest"+i).css("width","95%")
         .css("height","56px")
         .css("margin-left","3px");
}); 
```

到

```
$("#interest"+i).hover(function() {
  $("#interest"+i).css({
    "width":"115%",
    "height":"70px",
    "margin-left":"-10px"
  });
},function() {
  $("#interest"+i).css({
    "width":"95%",
    "height":"56px",
    "margin-left":"3px"
  });
}); 
```

最后，Adil 打败了我，你可以将悬停事件绑定到一个类。并且遵循他对选择器的建议也非常好！:)

希望这会有所帮助！:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-04T10:02:57.640

看看[这里的 JQuery .each() 函数](http://api.jquery.com/jQuery.each/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-04T10:32:31.187

这应该有效：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<script type="text/javascript" src="js/jquery.js"></script>
<script>
    $(function(){
        $(".interestsMarquee img").hover(function(){
            $(this).css({"width":"115%", "height":"70px", "margin-left":"-10px"});
        },function(){
            $(this).css({"width":"95%", "height":"56px", "margin-left":"3px"});
        }).click(function(){
            src = $("#myImage").attr("src");
            if(src == "images/Cowboys.jpg"){
                $("#myImage").attr("src", "images/Countryside_bg.jpg");
            }else{
                $("#myImage").attr("src", "images/Cowboys.jpg");
            }
        });
    });
</script>
<title>Untitled Document</title>
</head>

<body>

<div class="interestsMarquee">
    <img src="sportsInterest.png" style="cursor:pointer;" alt="sports" />
    <img src="sportsInterest.png" style="cursor:pointer;" alt="music"  />
    <img src="sportsInterest.png" style="cursor:pointer;" alt="hunting" />
    <img src="sportsInterest.png" style="cursor:pointer;" alt="exercise" />
    <img src="sportsInterest.png" style="cursor:pointer;" alt="shopping" />
</div>

<img id="myImage" src="images/Cowboys.jpg" />

</body>
</html> 
```

希望能帮助到你！

# c# - 通过移动应用程序与打印机的 TCP 连接

> ID：14684184
> 
> 赞同：0
> 
> 时间：2013-02-04T09:53:38.710
> 
> 标签：c#, sockets, mobile, printing, tcp

我想通过移动应用程序将代码发送到移动标签打印机。我必须通过 TCP 连接来做到这一点。虽然 Windows 桌面应用程序的 tcp 连接和打印都可以，但它对移动应用程序没有任何作用。单击连接按钮后，它会连接到打印机并毫无问题地发送文本，但打印机没有响应！

感谢任何建议

这是代码

```
private static NetworkStream stream;
private static TcpClient client;
if (client == null)
{
    client = new TcpClient();
    int port = int.Parse(strPort);
    client.Connect(server, port);
}
stream = client.GetStream();
StreamWriter writer = new StreamWriter(stream, Encoding.GetEncoding("Windows-1251")); 
writer.AutoFlush = false;
writer.Write(Encoding.GetEncoding("Windows-1251").GetBytes(message).Length); 
writer.Write(message);
writer.Flush(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T10:22:14.953

第一个想法：
打印机是否可能需要消息之间的分隔符？打印机如何知道预期长度的结束位置和实际消息的开始位置？

例如，如果要打印的字符串是`12345`，打印机如何从 TCP 消息中`512345`知道是期望 5 个字符还是 51 或 512 等？

另外我认为，如果不在编码中，则可能会`Encoding.GetEncoding("Windows-1251").GetBytes(message).Length`提供与其中的字符数不同的数字。`message``message``Windows-1251`

你需要做的是：

1.  转换`message`为字节数组
2.  从中确定长度并发送字节数组

样本：

```
// Convert message to byte array in Windows 1251 encoding
// Get a byte array that contains the length of messageBytes as string
byte[] messageBytes = Encoding.GetEncoding("Windows-1251").GetBytes(message);
byte[] messageBytesLengthBuffer = Encoding.UTF8.GetBytes(messageBytes.Length.ToString());

stream = client.GetStream();
stream.Write(messageBytesLengthBuffer, 0, messageBytesLengthBuffer.Length);
stream.Write(messageBytes, 0, messageBytes.Length); 
```

最后（！），您应该真正考虑关闭您打开的资源！

# java - 通过网络传输图像

> ID：14684185
> 
> 赞同：-1
> 
> 时间：2013-02-04T09:53:40.597
> 
> 标签：java, html

我有一台服务器，它会定期拍摄图像。我想通过网络传输这些图像。现在我正在使用本机应用程序并每秒使用计时器设置此图像。我如何在网络中实现这一点，通过连续流式传输图像而没有性能延迟和页面刷新。我现在正在使用 Java 技术。

请就此提出一些解决方案。

太感谢了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T10:13:09.293

如果您正在寻找一个允许像[http://Twitch.tv](http://twitch.tv)这样的视频流的网站，那么您将需要创建一个 RMTP 服务器，它基本上会为您完成所有艰苦的工作。您可以在这里查看更多信息：http: [//www.flashrealtime.com/list-of-available-rtmp-servers/](http://www.flashrealtime.com/list-of-available-rtmp-servers/)

现在，如果您正在寻找流媒体，那么您可以使用**Xsplit** ( [http://xsplit.com](http://xsplit.com) )，您还需要在 Twitch.Tv 或 JustinTV 或任何允许您这样做的网站上的帐户。

问候，

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T10:06:05.840

您可以简单地使用 JavaScript 每秒刷新一次图像 URL（在此处使用 jQuery）：

```
var counter = 0;
var refreshImage = function() {
    counter++;
    $('#imageToRefresh').attr('src', 'urlOfTheImage?' + counter);
}
window.setInterval(refreshImage, 1000); 
```

此处的计数器用于确保 URL 始终不同，并且浏览器不会简单地从其缓存中获取图像。

未经测试，但应该可以工作。

# php - 无法将 mysqli 连接传递给类

> ID：14684190
> 
> 赞同：0
> 
> 时间：2013-02-04T09:53:51.683
> 
> 标签：php, mysqli, connection

我正在尝试将 mysqli 连接传递给一个类，以便它使用准备好的语句。但是，我遗漏了一些东西并且它不起作用。艾做错了什么？

以下代码输出“否”

**索引.php**

```
$db_host = 'localhost';
$db_name = 'my_database';
$db_user = 'my_user';
$db_password = 'my_password';

$con = new mysqli($db_host,$db_user,$db_password,$db_name);
if (mysqli_connect_errno())
{
    die(mysqli_connect_error()); 
}

$obj = new Obj( $con ); 
```

**对象文件**

```
Class Obj
{
    public function __construct( mysqli $con )
    {
        $sql = "SELECT * FOM myTable";
        if($con->prepare( $sql ))
        {
            echo "yes";
        }
        else
        {
            echo "no";
        }        
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T09:57:44.540

```
Class Obj {
  public function __construct( mysqli $con ) {
    $sql = "SELECT * FROM myTable";
    if($con->prepare( $sql ))       //here, u pass $slq before
    {
        echo "yes";
    }
    else {
        echo "no";
    }
  }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T10:00:46.793

如果您未能将 mysqli 连接传递给您的班级，您将在此行收到致命错误：

```
public function __construct( mysqli $con )
                             ^^^^^^ 
```

但不仅构造函数开始运行良好，您甚至可以访问类方法：

```
if($con->prepare( $sql )) 
```

总而言之，所有发生的事情都是因为准备 SQL 语句时出错而`mysqli::prepare()`返回。`false`我对 mysql 不熟悉，但您可以使用[mysqli::$error_list](http://www.php.net/manual/en/mysqli.error-list.php)或[mysqli::$error](http://www.php.net/manual/en/mysqli.error.php)获得确切的错误消息：

```
 if($con->prepare( $slq ))
    {
        echo "yes";
    }
    else
    {
        echo "no: " . $con->error;
    } 
```

If `SELECT * FOM myTable` is the actual query, I suppose it's a simple syntax error since you've misspelt `FROM`.

# sql-server - 从另一个大表中查找的 sql server set 命令

> ID：14684192
> 
> 赞同：0
> 
> 时间：2013-02-04T09:53:53.857
> 
> 标签：sql-server, set

这可能是一个简单的问题，但我对此很陌生。我正在尝试使用以下命令在 sql server 中设置列​​：

```
update myTable 
set myCol = a.col 
from table2 as a 
where a.col_1 = col_1 and a.col_2 = col_2; 
```

myTable 大约有 1.5 亿行。和 table2 大约 300,000 行。我已正确索引 table2，因此查找速度很快。我分别在一百万行上尝试了这个，大约花了 20 秒。但是整张桌子花了很长时间，现在两天多了，还没有完成。我想知道是否有更好的解决方案。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T10:00:22.567

我认为`UPDATE`语句的语法应该是

```
UPDATE  b 
SET     b.myCol = a.col 
FROM    myTable b
        INNER JOIN table2 a
            ON  a.col_1 = b.col_1 AND
                a.col_2 = b.col_2 
```

并且您需要`INDEX`在两个表上的 (col_1, col_2) 上提供化合物。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T10:09:52.633

试试这个：

```
update myTable 
set myTable.myCol = (select a.col from table2 as a 
                     where a.col_1 = myTable.col_1 and 
                     a.col_2 = myTable.col_2
                    ) 
```

或者如果这不起作用，可能是因为您的加入标准的真正唯一性存在问题。

改为尝试：（这应该是快速的鞭打鲷鱼......但证明您的数据很可能处于不一致的状态。）

```
update myTable 
set myTable.myCol = (select top 1 a.col from table2 as a 
                     where a.col_1 = myTable.col_1 and 
                     a.col_2 = myTable.col_2
                    ) 
```

# jquery - 无法隐藏/显示 div

> ID：14684193
> 
> 赞同：0
> 
> 时间：2013-02-04T09:53:55.713
> 
> 标签：jquery

我需要隐藏一个 div 并显示一个 div。我是 Jquery 的新手，但我尝试了几种我能找到的方法。它仍然不起作用，我不知道。有人有什么想法吗？非常感谢您的帮助。

```
<div id="div1" runat="server">
<asp:Button ID="btnCalculate" runat="server" Text="Calculate Claim" OnClientClick="cfrm();"/>
    </div>
    <div id="div2" runat="server" visible="false">

        <script language="javascript" type="text/javascript">
            function cfrm() {
                var fee = $('[id$=lblTotalProcedureFee]').text();
                if (fee > 500) {
                    if (confirm('You are making a claim exceeding $500\. Are you sure to do this operation?')) {
                        $('#div1').hide('fast');
                        $('#div2').show();
                    }
                }
            }
    </script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T09:56:27.660

尝试这个：

您必须最初隐藏另一个 div

```
$('div').click(function(){
    $(this).hide();
    $(this).siblings().show();
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T10:00:23.307

对于您的特定代码...您的最后一行应该调用 jQuery 的[`show`](http://api.jquery.com/show)方法

```
function cfrm() {
    //...
            $('#div1').hide('fast');
            $('#div2').show();
} 
```

* * *

通常，您可以使用 jQuery[`toggle`](http://api.jquery.com/toggle)在两个项目之间交替显示

CSS

```
.hidden { display: none; } 
```

HTML

```
<div id='d1' class='alternate'>Blah1</div>
<div id='d2' class='alternate hidden'>Blah2</div>
<button id='hideBtn'>Hide/Show</button> 
```

JS

```
$(function() {
    $('#hideBtn').click( function() {
        $('.alternate').toggle();
    });
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-04T09:57:11.313

使用[show()](http://api.jquery.com/show/)显示和[hide()](http://api.jquery.com/hide/)隐藏

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-04T10:01:13.183

添加jquery库文件

[例子在这里](http://jsfiddle.net/u6fn6/3/)

HTML

```
<span class="tab">Click Here to See / Hide Hidden Output</span>
<div class="output">This is our Hidden output</div> 
```

CSS

```
.output{  display:none;  }
.tab{ bordar:1px solid;   background:#d0d0d0; cursor:pointer; padding:5px; } 
```

Javascript

```
$(document).ready(function(){
    $('.tab').click(function(){
      $('.output').toggle();
    });
}); 
```

# c# - Windows 服务中的计时器在一天或两天后停止触发，GC 或逻辑错误？

> ID：14684198
> 
> 赞同：2
> 
> 时间：2013-02-04T09:54:00.170
> 
> 标签：c#, timer, windows-services, garbage-collection

我有一个小的 Windows 服务，它应该在用户设置的固定时间间隔内每天将一些数据写入 Web 服务。

例如。从 8:00 到 22:00 每 20 分钟一班

但是在触发回调 10 次左右后，计时器停止，事件日志中没有任何内容，服务工作正常，这意味着没有异常使他崩溃。

代码很简单：

```
private Dictionary<string, Timer> m_timers = new Dictionary<string, Timer>();

protected override void OnStart(string[] args)
{
      // load settings

      foreach(var settings in userSettings)
      {
         SetUpTimer(settings);
      }
}

private void Callback(Settings settings)
{
    try
    {
       //Write some data to web service
       //Write to event log that web service write suceeded
    }
    catch(Exception ex)
    {
       //Write to event log
    }

    SetUpTimer(settings);
}

private void SetUpTimer(Settings settings)
{
    Timer timer;

    if (m_timers.ContainsKey(settings.Name))
    {
        timer = m_timers.Where(x => x.Key == settings.Name).Select(x => x.Value).FirstOrDefault();
        // Dispose timer (there is rumor that it can slide after few days), just to be sure.

        if (timer != null)
            timer.Dispose();
    }

    TimeSpan timeToFirstRun = settings.TimeFrom - DateTime.Now.TimeOfDay;

    while (timeToFirstRun.TotalHours < 0 || timeToFirstRun > settings.TimeTo)
    {
        timeToFirstRun += TimeSpan.FromMinutes(settings.EveryHowMuch);
    }

    if (timeToFirstRun > settings.TimeTo)
        timeToFirstRun = settings.TimeFrom - DateTime.Now.TimeOfDay + TimeSpan.FromDays(1.0);

    timer = new Timer(Callback, settings, timeToFirstRun, new TimeSpan(-1));

    if (!m_timers.ContainsKey(settings.Name))
    {
        m_timers.Add(settings.Name, timer);
    }

    // Write to event log that it sucessfully set up for next callback
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-04T10:00:25.893

好吧，你这里有一个很大的缺陷：

您处置了一个计时器，但您没有将其从`m_timers`. 新创建的具有此名称的计时器将永远不会添加到字典中，因此会在某个时候被 GC 收集。

此外，您应该使用`TryGetValue`而不是`ContainsKey`与 LINQ 查询结合使用。

您的方法的顶部应如下所示：

```
Timer timer;
if(m_timers.TryGetValue(settings.Name, out timer))
{
    timer.Dispose();
    m_timers.Remove(settings.Name);
} 
```

# windows-8 - 如何在 Win Phone8 的应用程序栏中添加用户控件（LongListSelector）？

> ID：14684202
> 
> 赞同：1
> 
> 时间：2013-02-04T09:54:03.767
> 
> 标签：windows-8, windows-phone-8

我有一种情况，我需要在应用程序栏中添加一个 UserControl（“LongListSelector”）。我似乎没有找到一种方法来实现它。甚至可能吗？

使用 C# +XAML + Win Phone 8

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T10:14:07.983

不，那是不可能的。

以下是 ApplicationBar 的正确用法：http: [//www.jeffblankenburg.com/2010/10/06/31-days-of-windows-phone-day-6-application-bar/](http://www.jeffblankenburg.com/2010/10/06/31-days-of-windows-phone-day-6-application-bar/)

# c# - Windows Metro 获取文件扩展名的默认应用程序图标

> ID：14684211
> 
> 赞同：0
> 
> 时间：2013-02-04T09:54:34.687
> 
> 标签：c#, microsoft-metro

是否可以在 Windows 应用商店应用程序中动态获取特定文件类型的默认应用程序的图标/图像？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T10:53:12.613

在表示文件的 StorageFile 上调用 GetThumbnailAsync()。

# ruby-on-rails - 反映用户在 Ruby 应用程序中的时间戳上选择的时区

> ID：14684216
> 
> 赞同：0
> 
> 时间：2013-02-04T09:54:50.167
> 
> 标签：ruby-on-rails, timezone, timestamp

我想根据用户选择的时区在我的 ruby​​ 应用程序上制作每个时间戳。我是 Rails 中的 ruby​​ 新手，所以不知道该怎么做。

我制作了下拉列表供用户选择时区

```
<%= time_zone_select( "user", 'time_zone', ActiveSupport::TimeZone.all, :default => "Beijing")%> 
```

如何使时区的选择反映在所有使用的时间戳上。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T09:56:32.823

使用`before_filter`in`application_controller.rb`确保每个请求都调用此方法。每个请求的默认时区都是由设置的，`config.time_zone`因此您必须更新`Time.zone`每个请求。看看[http://api.rubyonrails.org/classes/Time.html](http://api.rubyonrails.org/classes/Time.html)

```
before_filter :set_user_timezone

def set_user_timezone
  if current_user && current_user.time_zone.present?
    Time.zone = current_user.time_zone
  end
end 
```

要使用特定时区评估表达式，请使用`Time.use_zone`

```
Time.use_zone('Singapore') do
  Time.zone.parse(...) # returns a time in Singapore
end 
```

更新：`session`用于保存时区

```
# application_controller.rb
before_filter :set_user_timezone

def set_user_timezone
  Time.zone = session[:timezone] || 'Default timezone here'
end

# time_zone_controller.rb
def save_time_zone
  session[:timezone] = params[:timezone]
end

# routes
match 'save_time_zone' => 'time_zone#save_time_zone'

# js
$('#user_time_zone').change(function() {
  $.ajax({
    url: '/save_time_zone',
    data: { time_zone: $(this).val() }
  })
}) 
```

# android - Android：取消AlertDialog时做一些事情

> ID：14684219
> 
> 赞同：1
> 
> 时间：2013-02-04T09:55:03.297
> 
> 标签：android, android-alertdialog

我有一个`AlertDialog`可以取消的（通过后退按钮或在对话框外单击）。如果对话框被取消，我需要撤消一些更改，所以我需要控制它何时被取消。

我试图创建自己的子类`AlertDialog`来覆盖一些函数（我想我应该覆盖`onContextMenuClosed`，我想做一些测试来找到正确的函数）。

我创建了自己的 Builder 扩展`AlertDialog.Builder`来创建我的对话框，并且我想覆盖该`create()`功能。我检查了`AlertDialog.Builder->create()`代码，它使用变量`AlertController.AlertParams`P 来获取一些需要的数据，但该变量是私有的，我无法从我的构建器访问它，所以我无法创建我的对话框。

`AlertDialog`如果取消，我该如何控制？使用`setCancellable(false)`不是一个选项，我希望用户能够取消它。

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-04T09:57:11.380

尝试设置`setOnCancelListener`：

```
 dialog.setOnCancelListener(new DialogInterface.OnCancelListener() {    //close the dialog      
        @Override
        public void onCancel(DialogInterface dialog) {
            //do something
        }
    }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-04T09:58:38.723

您必须以这种方式设置 onCancelListener：

```
alertDialog.setOnCancelListener(new OnCancelListener() {

        @Override
        public void onCancel(DialogInterface dialog) {
            // YOUR CODE HERE

        }
    }); 
```

# python - 如何从 django HttpResponse 获取 JSON？

> ID：14684222
> 
> 赞同：0
> 
> 时间：2013-02-04T09:55:21.163
> 
> 标签：python, django, json, httpresponse

我正在尝试从 django HttpResponse 获取 json 对象。实际上访问'form_validation'值。但我不能。有什么建议吗？

这是我的 HttpResponse

```
return HttpResponse(simplejson.dumps({'response_data':response_data, 'form_validation':form_validation, 'guest': guest, 'error_list':error_array}), mimetype="application/json") 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T10:03:05.423

您需要`success`为您的 ajax 调用定义函数，该函数将具有 json 响应对象：

```
$.ajax({
        type: 'POST',
        url: url,
        data: {'csrfmiddlewaretoken': '{{csrf_token}}'},
        dataType: "text",
        success: function(response) {
            var response_data = response.response_data;
            var form_validation = response.form_validation;
            // access other fields
        },
        error: function(rs, e) {
            alert(rs.responseText);
        }
}); 
```

# cakephp - 记录当前文件名

> ID：14684224
> 
> 赞同：0
> 
> 时间：2013-02-04T09:55:32.513
> 
> 标签：cakephp

有没有办法记录文件名/类名/函数和/或行号，在哪里`$this->log`被调用？

`$this->log`我在or的文档中找不到这个`CakeLog::write ()`。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-04T10:58:01.927

是的，您可以为此使用默认的 PHP 常量。例如：

```
CakeLog::write('debug', 'Oops, something went wrong in ' .
    __FILE__ . ' on line' . __LINE__ . ' within the class ' . get_class()
); 
```

这应该为您提供所需的所有信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T17:30:39.323

或者更方便，只需记录跟踪：

```
$e = new Exception; $this->log($e->getTraceAsString()); 
```

将使用导致该特定 log() 语句的文件和行号记录您的调用。

# c++ - Qt/C++ -- 从另一个类更新 UI

> ID：14684228
> 
> 赞同：1
> 
> 时间：2013-02-04T09:55:35.040
> 
> 标签：c++, qt

我有一个使用 Qt 和 C++ 的项目要做。首先，我需要创建一个示例客户端-服务器程序。使用 Qt Creator，我设计了 Ui 并编写了一些用于连接和读取消息等的代码。

但是，我无法从服务器类更新程序的 UI。

我应该怎么做才能使它正确？

## 主窗口.h

```
#ifndef MAINWINDOW_H
#define MAINWINDOW_H

#include <QMainWindow>
#include <QtGui>
#include "serverwin.h"
#include <QtNetwork>

namespace Ui {
class MainWindow;
}

class MainWindow : public QMainWindow
{
    Q_OBJECT

public:
    explicit MainWindow(QWidget *parent = 0);
    ~MainWindow();

public slots:
    void connectClicked();
    void disconnectClicked();

private:
    Ui::MainWindow *ui;

};

#endif // MAINWINDOW_H 
```

## 服务器win.h

```
#ifndef SERVERWIN_H
#define SERVERWIN_H

#include <mainwindow.h>
#include <QtNetwork/QTcpServer>
#include <QtNetwork/QTcpSocket>

namespace server{
class MainWindow;
}

class ServerWin : public QTcpServer
{
    Q_OBJECT

    public:
        ServerWin(QObject* parent);

    protected:
        void incomingConnection(int socketfd);

    private slots:
        void readyRead();
        void disconnected();

    private:
        QSet<QTcpSocket*> clients;
};

#endif // SERVERWIN_H 
```

## 主文件

```
#include <QApplication>
#include "mainwindow.h"
#include "serverwin.h"

int main(int argc, char *argv[])
{
    QApplication a(argc, argv);

    MainWindow *uiwindow = new MainWindow();

    uiwindow->show();

    return a.exec();
} 
```

## 主窗口.cpp

```
#include "mainwindow.h"
#include "ui_server.h"
#include "serverwin.h"
#include "QtNetwork/QTcpSocket"

MainWindow::MainWindow(QWidget *parent) :
    QMainWindow(parent),
    ui(new Ui::MainWindow)
{            
    ui->setupUi(this);

    ui->disconnectButton->setEnabled(false);
}

void MainWindow::connectClicked()
{
    ui->connectButton->setEnabled(false);

    ui->disconnectButton->setEnabled(true);

    bool success = serv->listen(QHostAddress::Any, 4200);

    if(!success)
    {
        ui->plainTextEdit->appendPlainText("Could not connect to port 4200, check your firewall settings.");
    }
    else
    {
        ui->plainTextEdit->appendPlainText("Connected");
    }
}

//close server request by user

void MainWindow::disconnectClicked()
{
    ui->disconnectButton->setEnabled(false);

    ui->connectButton->setEnabled(true);

    ui->plainTextEdit->appendPlainText("doesn't work, code to be added");
    //disconnect server
}

MainWindow::~MainWindow()
{
    delete ui;
} 
```

## 服务器win.cpp

```
#include "serverwin.h"

ServerWin::ServerWin(QObject *parent)
{
}

void ServerWin::incomingConnection(int socketfd)
{
    QTcpSocket *client = new QTcpSocket(this);

    client->setSocketDescriptor(socketfd);

    clients.insert(client);

    qDebug() << "Client " + client->peerAddress().toString() + " is connected.";

    connect(client, SIGNAL(readyRead()), this, SLOT(readyRead()));

    connect(client, SIGNAL(disconnected()), this, SLOT(disconnected()));
}

void ServerWin::readyRead()
{
    QTcpSocket *client = (QTcpSocket*)sender();

    while (client->canReadLine())
    {
        QString msg = "Client " + client->peerAddress().toString() + " says: "  + QString::fromUtf8(client->readLine()).trimmed();

        foreach (QTcpSocket *otherClient, clients)
            otherClient->write(QString(msg + "\n").toUtf8());

        qDebug() << msg;
    }
}

// when a client is disconnected

void ServerWin::disconnected()
{
    QTcpSocket *client = (QTcpSocket*)sender();

    clients.remove(client);

    QString notification = "Client " + client->peerAddress().toString() + " has Left.";

    foreach (QTcpSocket *otherClient, clients)
        otherClient->write(QString(notification + "\n").toUtf8());

    qDebug() << notification;
} 
```

调试行需要在我有一个文本框 (plaintextedit) 的 GUI 中更新。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-04T10:35:17.867

您需要在窗口类中创建成员函数，该函数将负责输出您的文本。例如，

```
class MainWindow : public QMainWindow
{
<...>
public slots:
    <...>
    void displayMessage( const QString & message );
} 
```

现在，在这个函数中，您可以访问 UI，例如：

```
void MainWindow::displayMessage( const QString & message )
{
    ui->plainTextEdit->appendPlainText( message );
} 
```

现在，您只需从服务器调用此函数并将消息传递给它即可。由于该函数属于`MainWindow`该类，因此显示消息不会有任何问题。您可以显式调用它，也可以将信号连接到它。

# php - Joomla 中意外删除的文件

> ID：14684230
> 
> 赞同：1
> 
> 时间：2013-02-04T09:55:40.540
> 
> 标签：php, joomla, hosting, cpanel

我试图在 joomla 2.5 站点上安装投票扩展程序并且收到 http 500 错误。我愚蠢地决定使用 cPanel 文件管理器从服务器中删除扩展文件......我不小心删除了 simplepie，认为它是扩展的一部分，并且它不会导致我的 Joom Gallery 扩展出现 http 500 错误。

有人对如何恢复我删除的系统文件有任何建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T08:27:16.430

安装Joomla的本地副本+你删除的扩展，然后使用ftp将它们恢复到服务器；将来，尝试使用 Joomla 扩展管理器来安装/卸载扩展。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T13:35:48.333

据我所知，cPanel 文件管理器中已删除的文件不会进入任何垃圾文件夹。您应该定期对您的网站进行完整备份，以防万一发生这种情况。您还可以与您的主机交谈，谁应该有您删除的文件夹的备份。但是，他们可能会要求您为此服务支付少量费用，具体取决于主机。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-04T23:21:35.693

如果您刚刚删除了 simplepie，请获取 joomla 安装的 zip 文件并从那里获取。

# html - 出现在 div 下的一侧框阴影

> ID：14684239
> 
> 赞同：0
> 
> 时间：2013-02-04T09:56:07.573
> 
> 标签：html, css

请先看看[这个](http://jsfiddle.net/isuru_nan/M2KkX/)小提琴。如您所见，第二部分的顶部边框上有一个轻微的阴影。我试图让这个阴影到底部边框。我像这样更改了潜水的 CSS `box-shadow:0 8px 12px -6px #000;`。阴影出现在正确的位置，但问题是如果我`display:none;`从棕色部分删除，阴影[根本不可见](http://jsfiddle.net/isuru_nan/t9UAx/)。它[被](http://jsfiddle.net/isuru_nan/TDUrb/)棕色部分覆盖。

我希望阴影出现在棕色部分上方。给人一种棕色部分在米色下面的感觉。我怎样才能做到这一点？

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T10:00:41.530

将此添加到下面您想要的部分

z-索引：-1；

和上面你想要的部分

z-索引：1；

# android - android如何处理字体文件？

> ID：14684242
> 
> 赞同：2
> 
> 时间：2013-02-04T09:56:23.067
> 
> 标签：android, android-fonts

在 Android 中使用 .ttf 或 .otf 字体文件背后的技术流程是什么？系统如何处理这些文件？众所周知，android 不喜欢某些字体，我们得到一个`native font cannot be made`错误。我想使用一些工具创建自己的 .ttf 字体并在我的应用程序中使用该字体。但我不确定android是否会接受那些自制字体，所以我会感谢上面提出的问题的任何答案。

**更新**

伙计们，我知道如何在Android中使用字体，谢谢:)我在询问系统解码和处理字体文件的技术过程。因为有时android不喜欢其他程序接受的.ttf文件

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T10:01:25.793

是的，如果您创建了正确的 TTF 字体文件，则可以加载它以在您的应用程序中使用它。

只需将字体文件复制到资产文件夹（如果不存在，请在项目的根目录中创建它）并运行以下代码来加载它：

```
TypeFace font = Typeface.createFromAsset(getAssets(), "myCustomFont.ttf"); 
```

然后，您可以在任何视图中使用它：

```
TextView text = (TextView)findViewById(R.id.text);
text.setTypeFace(font); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T10:01:33.570

如果要在项目中添加 ttf 文件，只需将其添加到项目的**assets**文件夹中。然后您可以在您的活动中使用该字体：-

```
Typeface font2=Typeface.createFromAsset(getAssets(), "FUTURALC.TTF");
    tv.setTypeface(font2); 
```

而且我认为只要扩展正确，android 对于自制字体就不会有任何问题。

# android - 从服务器下载的应用程序内更新无法正常工作。服务提供商错误？

> ID：14684246
> 
> 赞同：0
> 
> 时间：2013-02-04T09:56:36.213
> 
> 标签：android, download, apk, auto-update

我正在开发一个独立于 Android Play 商店更新的应用程序。在启动时，它会检查更新的版本并在需要时从服务器下载新的 .apk 文件。

问题是由 HTTP 请求执行的 .apk 文件下载 url 被重定向到要求更改移动互联网设置的 Vodafone 登录页面。应用程序下载的 .apk 文件实际上就是这个 html 网页。

![在此处输入图像描述](../Images/8c50f3e92561f680715c068d6dd86fad.png)

通过 android 互联网浏览器访问任何网站都不会被重定向到此页面。我在托管服务器上的 MIME 设置已正确设置。我在另一个项目上使用相同的代码、托管服务提供商和移动运营商没有任何问题，尽管该项目在 OS 3.2 上运行东芝平板电脑，而这个项目是在 OS 4.1 上运行的三星平板电脑。

我可以测试或更改什么以使其正常工作，还是与运营商或平板电脑/操作系统相关的问题？任何帮助，将不胜感激。如果有人想检查它，相关代码包含在下面，但如前所述，我在另一个项目上没有问题。

```
private class UpdateDownloadTask extends AsyncTask<Void, Void, String> {

HttpClient httpclient;
HttpGet httpget;
HttpResponse response;
HttpEntity httpentity;
OutputStream outputStream;

protected void onPreExecute () {

    //do not lock screen or drop connection to server on login
    activity.getWindow().addFlags(LayoutParams.FLAG_KEEP_SCREEN_ON);                  
    //initiate progress dialogue to block user input during initial data retrieval
    ProcessingDialog = ProgressDialog.show(context, "Please Wait", "Downloading Updates", true,false);
}

@Override
protected String doInBackground(Void... nothing) {

    try {
        //set timeouts for httpclient
        HttpParams httpParameters = new BasicHttpParams();
        HttpConnectionParams.setConnectionTimeout(httpParameters, 5000);
        HttpConnectionParams.setSoTimeout(httpParameters, 5000);

        //setup http get
        httpclient = new DefaultHttpClient(httpParameters);             
        httpget = new HttpGet(uriApk);

        // Execute HTTP Get Request
        response = httpclient.execute(httpget);
        httpentity = response.getEntity();

        //create location to store apk file
        String path = Environment.getExternalStorageDirectory() + "/download/";
        File file = new File(path);
        file.mkdirs();  //if download folder not already exist
        File outputFile = new File(file, apkName);

        //write downloaded file to location
        outputStream = new FileOutputStream(outputFile, false);
        httpentity.writeTo(outputStream);
        outputStream.flush();
        outputStream.close();

        return "success";
    }

    catch (Exception e) {
        return "error: " + e.toString();
    }

}

@Override
protected void onPostExecute(String result) {

    //check if result null or empty
    if (result.length() == 0 || result == null) {

        Toast.makeText(context, "Could Not Download Updates, Please Try Again. Closing Application.", Toast.LENGTH_LONG).show();
        activity.finish();
    }           
    //update downloaded
    if (result.equals("success"))   {
        //install downloaded .apk file
        Intent intent = new Intent(Intent.ACTION_VIEW);
        intent.setDataAndType(Uri.fromFile(new File(Environment.getExternalStorageDirectory() + "/download/" + apkName)), "application/vnd.android.package-archive");
        activity.startActivity(intent);               
        //activity.finish();
    }
    //update not downloaded
    else {
        Toast.makeText(context, "Could Not Download Updates, Please Try Again. Closing Application.", Toast.LENGTH_LONG).show();                
        activity.finish();
    }           

    //close update dialog
    try {
        ProcessingDialog.dismiss();
    } catch (Exception e) {
        // nothing
    }
    //release screen lock
    activity.getWindow().clearFlags(LayoutParams.FLAG_KEEP_SCREEN_ON);
}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T13:20:30.560

我必须通过 Android 互联网浏览器将运营商设置设置为“不调整任何网站”。之后，我添加了以下代码以使其正常工作。

```
httpget.setHeader("Accept", "application/vnd.android.package-archive");
httpget.setHeader("Content-Type", "application/vnd.android.package-archive");
String userAgent = "Mozilla/5.0 (Linux; U; Android 2.2; en-us; SCH-I800 Build/FROYO) AppleWebKit/533.1 (KHTML, like Gecko) Version/4.0 Mobile Safari/533.1";
httpget.setHeader("User-Agent", userAgent); 
```

希望这可以帮助其他有同样问题的人。

# maven - mvn 发布插件不更新包含的 pom 文件

> ID：14684247
> 
> 赞同：0
> 
> 时间：2013-02-04T09:56:44.657
> 
> 标签：maven, release

maven 发布插件不会更新其中包含的 pom 文件：

```
<plugin>
  <artifactId>maven-invoker-plugin</artifactId>
  <version>1.6</version>
  <executions>
    <execution>
....
....
<configuration>
<projectsDirectory>.</projectsDirectory>
<streamLogs>true</streamLogs>
<pomIncludes>
  <pomInclude>pomDisContainer.xml</pomInclude>
</pomIncludes> 
```

如何强制发布插件更新我的所有 pom.xml 文件？

问候

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T10:27:41.080

也许你从错误的方向看这个。更好的解决方案是让[Maven Invoker Plugin`pom.xml`每次都更新调用的文件](http://maven.apache.org/plugins/maven-invoker-plugin/run-mojo.html#filterProperties)吗？

Invoker 插件将自动替换 pom 中的属性，前提是它们使用替代语法：

```
@project.version@ 
```

将被*调用*项目的版本替换。

# php - 查找 IMG 标签并从 RSS 提要节点中获取它的“src”

> ID：14684248
> 
> 赞同：0
> 
> 时间：2013-02-04T09:57:01.677
> 
> 标签：php, xml, simplexml

这可能是一个非常基本的问题。所以请原谅我的菜鸟。我试图让自己熟悉 xml 遍历。假设我有这个节点

```
[content]
 <img src="some url" />
 <a href="some link">Some link</a>
 Some text after the link.
[/content] 
```

如您所见，该节点包含文本和标签的混合。所以我想知道我是否可以定位该`img`节点内的标签并获取它的`src`属性？

我`simplexml`用来读取 xml 文件。

如果我只是这样做`$xml->content`，浏览器将显示图像、链接和文本。所以我希望有一些选项可以在节点`<img>`内“找到”标签。`content`

### 更新

好的。我想我可能使用了错误的技术术语。RSS 提要是否与 XML 相同？我正在从此[URL获取 XML 提要](https://itunes.apple.com/us/rss/topfreeapplications/limit=2/genre=6014/xml)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-04T10:39:48.180

我自己弄明白了。我所做的是获取`[content]`节点的全部内容，然后用于`preg_match`从中查找`<img>`标签。

```
$content = $xml->content;
preg_match('/(<img[^>]+>)/i', $content, $matches);
echo $matches[0]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T10:03:03.193

目前内容不是 XML 节点。它应该是这样形成的；

```
<content></content> 
```

要获取图像源，只需执行；

```
$xml->content->img['src'] 
```

Simplexml 使节点可以通过“->”访问。节点属性可通过数组表示法'[“attr name”]'访问

希望这可以帮助你

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-04T10:07:50.260

这应该可以帮助您：

```
<?php

    $html = '
        <body>
            <img src="some url" />
            <a href="some link">Some link</a>
            Some text after the link.
        </body>
    ';

    $xml = simplexml_load_string($html);
    foreach($xml->children() as $child)
    {
        if ($child->getName() === 'img')
        {
            $attributes = $child->attributes();
            $img_source = $attributes['src'];
            echo $img_source;
        }
    }
?> 
```

# c# - MVC4 解决方案添加新项目

> ID：14684251
> 
> 赞同：0
> 
> 时间：2013-02-04T09:57:10.643
> 
> 标签：c#, asp.net-mvc-4

我有一个`MVC4`项目将成为一个大型系统，我想将数据库管理拆分为自己的项目，所以在我的解决方案中我将拥有`MyMVC4`和`MyMVC4_Data`

我将添加`MyMVC4_Data`作为对主`MyMVC4`项目的参考。我相信未来会有多个项目，所以拆分数据是有意义的。

我的问题是，什么样的项目模板足以满足数据库的需求，它所拥有的只是`Linq`每个表的管理器类以插入删除等。我认为没有必要包含一个新的 MVC4 项目作为开销对于需要的东西来说太大了。该项目必须可被主项目引用

任何建议，将不胜感激

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T09:58:21.303

我会使用一个[类库](http://msdn.microsoft.com/en-us/library/3e6w3tyx%28v=vs.71%29.aspx)项目。从文档：

> 您可以使用类库模板快速创建可与其他项目共享的可重用类和组件。

# makefile - 未定义的引用静态库 makefile

> ID：14684256
> 
> 赞同：2
> 
> 时间：2013-02-04T09:57:16.713
> 
> 标签：makefile, undefined-reference

我正在尝试在使用下面的makefile创建我的程序可执行文件时链接一个静态库。

```
IDIR =../inc
CC=g++ -g
CFLAGS=-I$(IDIR)
WFLAGS=-Wall -W
OFLAGS=-O3
DLINUX=-D_LINUX

ODIR=obj
LDIR =../lib
LIBS=-lm

_OBJ = testclient.o 
OBJ = $(patsubst %,$(ODIR)/%,$(_OBJ))

$(ODIR)/testclient.o: testclient.c
    $(CC) -c $< $(CFLAGS) -o $@
$(ODIR)/file2.o: file2.c
    $(CC) -c $< $(CFLAGS) -o $@

testclient: $(OBJ)
    $(CC) -o $@ $^ $(LIBS) -lccn -pthread 

.PHONY: clean

clean:
    rm -f $(ODIR)/*.o *~ core $(INCDIR)/*~ 
```

我已经尝试了所有可用的方法，从更改“ `-lccn`”参数的顺序到检查函数是否存在于库中（在其中`nm libccn.a`提供所需的函数`ccn_create()`）。返回的错误是：

```
obj/testclient.o: In function `main':
/root/testClient/src/testclient.c:91: undefined reference to `ccn_create()' 
```

图书馆`libccn.a`在`/usr/local/lib`. 我还尝试更改目录路径，然后使用`-L`标志查看该位置。也不行。:( ..关于如何使它工作的任何想法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-04T10:09:42.923

我的猜测是这是一个 C 库，并且您使用的头文件并非设计为由 C++ 编译器导入（函数定义周围`libccn.a`没有块）。`extern "C" { }`

C++ 通过修改函数名来支持函数重载。当您将函数放入`extern "C" { }`块中时，C++ 会禁用名称修改（从而禁用重载）。在这里，在您的错误消息中，提到的功能是`ccn_create()`. 注意`()`，这意味着函数类型是已知的，因此查找的命名是一个错位的名称。

当你`nm libccn.a`看到真名时，它是`ccn_create`。这不是一个错位的名字。因此，要解决此问题，您需要将函数定义包含在一个`export "C" { }`块中。最简单的方法是将 包围`#include`在这样的块中。

顺便说一句，您可以通过这样做来重现错误。

```
$ echo 'void ccn_create();' > ccn.h
$ echo '#include "ccn.h"
void ccn_create() { }' > ccn.c
$ echo '#include "ccn.h"
int main () {
  ccn_create();
  return 0;
}' > main.cc
$ gcc -o ccn.o -c ccn.c
$ g++ -o main main.cc ccn.o
Undefined symbols for architecture x86_64:
  "ccn_create()", referenced from:
      _main in cc8XnYRq.o
ld: symbol(s) not found for architecture x86_64
$ echo 'extern "C" {
#include "ccn.h"
}
int main () {
  ccn_create();
  return 0;
}' > main.cc
$ g++ -o main main.cc ccn.o 
```

# wsdl - 如何在 GreenHat Tester 中添加 WS-Security Header？

> ID：14684258
> 
> 赞同：0
> 
> 时间：2013-02-04T09:57:17.553
> 
> 标签：wsdl, soapui

我正在尝试使用 发送`SOAP SONAR`请求`GreenHat Tester`，但最终出现以下错误：

```
<faultstring>WSDoAllReceiver: Incoming message does not contain required Security header</faultstring> 
```

但相同的请求给出了正确和预期的结果`SOAP UI`。

任何人都可以帮我添加`WS-Security`标题`GreenHat Tester`吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T16:17:03.793

您需要打开请求消息并右键单击文本（字符串）等...节点。选择**属性**，然后选择**WS-Security**。**启用**它，然后添加您需要添加的字段。

**您可以通过点击WS-Security**选项卡中的**Preview**按钮来查看整个消息的外观（原始 XML） 。

# android - AChartEngine是否支持实时值添加和x-scrolling

> ID：14684259
> 
> 赞同：0
> 
> 时间：2013-02-04T09:57:19.187
> 
> 标签：android, charts, achartengine

为了像示波器一样显示实时数字输入/输出值

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T16:17:50.467

没有方法可以进行 x 滚动，但您可以创建自己的方法来执行此操作。这是一个例子。

```
 for (int i = values.getItemCount() - 2; i >= 0; i--) {
        values.add(i + 1, value.getY(i));
    }
    values.add(0, y); 
```

“值”是一个时间序列。

基本上我将倒数第二个值交换为最后一个值，依此类推。最后，我在位置 0 中添加新值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-20T06:00:38.907

```
mSeries.add(++xCounter, aData);
        if (mChartView != null) {
            if (mSeries.getItemCount() >= 200) {
                mSeries.remove(0);
            }
            mhartView.repaint();
        } 
```

可以在这里帮助绘制动态视图。200 是您的视图缓冲区大小，因此一旦它被填满，它就会开始从顶部删除并在尾部添加新值。

# emacs - 如何组织模式图像导出html的绝对路径？

> ID：14684263
> 
> 赞同：9
> 
> 时间：2013-02-04T09:57:47.370
> 
> 标签：emacs, elisp, org-mode

我需要在 emacs org-mode 文件中的 html 中导出绝对图像 url：

当我编写以下代码时：

```
[[file:/images/a.jgp]] 
```

html代码的导出是：

```
<img src="file:///images/a.jpg" > 
```

但我需要的是：

```
<img src="/images/a.jgp"> 
```

那么我怎样才能导出我想要的东西，而不是使用`#+BEGIN_HTML`标签？

ps：我的emacs配置：

```
 16 ;; org-mode project define
 17 (setq org-publish-project-alist
 18       '(
 19         ("org-blog-content"
 20          ;; Path to your org files.
 21          :base-directory "~/ChinaXing.org/org/"
 22          :base-extension "org"
 23 
 24          ;; Path to your jekyll project.
 25          :publishing-directory "~/ChinaXing.org/jekyll/"
 26          :recursive t
 27          :publishing-function org-publish-org-to-html
 28          :headline-levels 4
 29          :html-extension "html"
 30          :table-of-contents t
 31          :body-only t ;; Only export section between <body></body>
 32          )
 33 
 34         ("org-blog-static"
 35          :base-directory "~/ChinaXing.org/org/"
 36          :base-extension "css\\|js\\|png\\|jpg\\|gif\\|pdf\\|mp3\\|ogg\\|swf\\|php\\|svg"
 37          :publishing-directory "~/ChinaXing.org/jekyll/"
 38          :recursive t
 39          :publishing-function org-publish-attachment)
 40         ("blog" :components ("org-blog-content" "org-blog-static"))
 41         )) 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-12T20:52:57.593

这样做的方法是在 org-mode 中注册一种新的链接，使用`org-add-link-type`. 这使您可以提供自定义导出格式。

`org-add-link-type`需要一个前缀，即“单击链接时会发生什么？” 函数和导出函数。

我使用前缀`img`，所以我的链接看起来像`[[img:logo.png][Logo]]`。我的图像文件位于`../images/`（相对于 .org 文件），并且来自网络服务器，它们显示在`/images/`. 因此，对于这些设置，将其放入`.emacs`提供了解决方案：

```
(defun org-custom-link-img-follow (path)
  (org-open-file-with-emacs
   (format "../images/%s" path)))

(defun org-custom-link-img-export (path desc format)
  (cond
   ((eq format 'html)
    (format "<img src=\"/images/%s\" alt=\"%s\"/>" path desc))))

(org-add-link-type "img" 'org-custom-link-img-follow 'org-custom-link-img-export) 
```

您可能需要修改设置的路径，但这就是秘诀。如您所料，`C-h``f``org-add-link-type`将为您提供完整的血腥细节。

哦，对于它的价值，这是我用于帖子间链接的代码（如`[[post:otherfile.org][Other File]]`）。输出格式中有一点 Jekyll 魔法，所以请注意 double-%s。

```
(defun org-custom-link-post-follow (path)
  (org-open-file-with-emacs path))

(defun org-custom-link-post-export (path desc format)
  (cond
   ((eq format 'html)
    (format "<a href=\"{%% post_url %s %%}\">%s</a>" path desc))))

(org-add-link-type "post" 'org-custom-link-post-follow 'org-custom-link-post-export) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2021-01-24T22:02:01.800

另一个答案是利用`#+ATTR_HTML`，请参见以下内容：

```
#+ATTR_HTML: :src /images/a.png
[[file:./images/a.png]] 
```

有了它，您将能够使用内联图像并以您想要的方式导出。

# php - Phalcon\Mvc\Model 和复合主键

> ID：14684264
> 
> 赞同：1
> 
> 时间：2013-02-04T09:57:54.933
> 
> 标签：php, composite-primary-key, phalcon

我对项目中的所有实体使用 Phalcon\Mvc\Model（以保持标准化）。今天我不得不在我的 mysql 数据库中导入 maxmind geoip 数据库来实现一些实体和 maxmind 位置（和块）之间的本地关系。

Maxmind数据库默认以csv形式交付，那么如何在mysql中进行组织——是每个开发者都需要根据自己的需求来解决的问题。Maxmind 数据库包含 2 个文件：

1.  GeoLiteCity-Blocks.csv（存储 ip 范围）
2.  GeoLiteCity-Location.csv（存储有关位置的信息）

大多数教程建议使用以下表定义来存储具有 ip 范围的表：

```
CREATE TABLE IF NOT EXISTS `GeoLiteCity_Blocks` (
  `startIpNum` int(10) unsigned NOT NULL,
  `endIpNum` int(10) unsigned NOT NULL,
  `locId` int(10) unsigned NOT NULL,
  PRIMARY KEY (`startIpNum`,`endIpNum`)
) ENGINE=InnoDB; 
```

如您所见，有复合主键。在 Phalcon\Mvc\Model 中使用这样的键可以吗？我想有一些限制（从逻辑上讲，它们应该存在，例如，我无法预测 Phalcon\Mvc\Model::findFirst($key) 方法的行为）

真的，我不在乎磁盘大小，这个表将使用，对我来说只有一件事很重要 - 性能。此外，我想保持所有模型标准化，而不是记住每个实体/表的大量小方面。

所以，我的问题是：是否可以使用 Phalcon\Mvc\Model 和复合键，或者最好多制作一个`id`列，这将是主键并添加索引`startIpNum`并使`endIpNum`选择更快？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-04T18:26:28.927

Phalcon\Mvc\Model 可用于具有复合主键的表。但是，findFirst 快捷方式不可用，您可以执行以下操作：

```
GeoLiteBlocks::findFirst(array(
   'startipnum = ?0 AND endipnum = ?1',
   'bind' => array($start, $end)
)); 
```

此外，可以在模型中添加一种方法来减少编码：

```
class GeoLiteBlocks extends Phalcon\Mvc\Model
{
    public function static findBlock($start, $end)
    {
        return self::findFirst(array(
           'startipnum = ?0 AND endipnum = ?1',
           'bind' => array($start, $end)
        ));
    }
} 
```

# java - 如何使用 Java 访问不同机器（Windows、Linux 等）上的主机文件

> ID：14684265
> 
> 赞同：0
> 
> 时间：2013-02-04T09:57:57.217
> 
> 标签：java

您好我正在尝试解析保存在不同机器上不同位置的主机文件。假设我可以拥有所有类型的机器（Windows、linux、mac 等），请帮助我访问主机文件。我想要一个完整的java方法来解析主机文件，而不考虑底层系统。

直到现在我还在 Windows 中硬编码主机文件的位置：

```
private final String mHostFileLocation =
                    "C:\\WINDOWS\\system32\\drivers\\etc\\hosts"; 
```

但我认为这是一个坏主意。请让我知道如何解析任何系统上的主机文件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T10:04:04.030

恐怕没有标准的平台中立方式来做到这一点。您要么只需要拥有所有有效位置的列表：

```
String [] hostsLocations = {"C:\\WINDOWS\\system32\\drivers\\etc\\hosts", "/etc/hosts"}; 
```

并尝试每一个，直到您找到一个存在的文件或从系统属性中进行一些操作系统嗅探以找出您使用的操作系统并使用正确的位置，请注意实际上并没有那么多不同的位置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T10:04:42.690

没有统一的方法来定位 hosts 文件。如果机器设置为仅运行 DNS，甚至可能没有。

也就是说，在 Mac 上，该文件位于 /private/etc/hosts 中，在 Linux 上通常位于 /etc/hosts 中。

# java - “错误：变量键盘已在方法 main(String []) 中定义”

> ID：14684267
> 
> 赞同：0
> 
> 时间：2013-02-04T09:58:10.673
> 
> 标签：java, string, variables, keyboard

当我尝试运行我的程序时，我收到了几条错误消息，困扰我的主要消息是“错误：变量键盘已在方法 main(String []) 中定义”

我应该在我的程序中不止一次地使用 main(String []) 吗，或者只是在我拥有它的开始时？这里还有什么问题？

这是我的程序的开头：

```
public static void main(String[]args)
{
    String firstName, lastName;
    int moviesDownloaded, stateResidency;
    double movieCost, netPayment, tax, discount, totalCharge, payment, taxRate;

    System.out.println("Enter your first name:");
    Scanner keyboard = new Scanner(System.in);
    firstName = keyboard.nextString();

    System.out.println("Enter your last name:");
    Scanner keyboard = new Scanner(System.in);
    lastName = keyboard.nextString();

    System.out.println("Enter the number of movies downloaded:");
    Scanner keyboard = new Scanner(System.in);
    moviesDownloaded = keyboard.nextInt();

    System.out.println("Enter the cost per movie:");
    Scanner keyboard = new Scanner(System.in);
    movieCost = keyboard.nextDouble();

    System.out.println("Indicate your state of residency. Enter 1 for Mississippi or 2 for any other state.");
    Scanner keyboard = new Scanner(System.in);
    stateResidency = keyboard.nextInt(); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-04T09:59:39.480

您应该只声​​明和初始化一次键盘，然后使用它。所以删除所有类型的行：`Scanner keyboard = new Scanner(System.in);`除了第一行。否则，您会尝试多次声明同一个变量，从而导致 java 抱怨。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-08-04T20:05:26.213

我猜这个问题早就解决了，但我遇到了它，我真的很喜欢关闭，因为没有选择 Ivaylo Strandjev 的答案。也以防其他人偶然发现这一点。

错误是说您已经在此范围内定义了变量键盘，并且您正在尝试再次定义它。就像 Ivaylo Strandjev 说的那样。您可以尝试以下方法：

1 删除声明部分

```
public static void main(String[]args) {
String firstName, lastName;
int moviesDownloaded, stateResidency;
double movieCost, netPayment, tax, discount, totalCharge, payment, taxRate;

System.out.println("Enter your first name:");
Scanner keyboard = new Scanner(System.in);
firstName = keyboard.nextString();

System.out.println("Enter your last name:");
keyboard = new Scanner(System.in); //-----changed
lastName = keyboard.nextString();

System.out.println("Enter the number of movies downloaded:");
keyboard = new Scanner(System.in); //-----changed
moviesDownloaded = keyboard.nextInt();

System.out.println("Enter the cost per movie:");
keyboard = new Scanner(System.in);//-----changed
movieCost = keyboard.nextDouble();

System.out.println("Indicate your state of residency. Enter 1 for Mississippi or 2 for any other state.");
keyboard = new Scanner(System.in);//-----changed
stateResidency = keyboard.nextInt();` 
```

或者这个，改变新的变量名

```
public static void main(String[]args){
String firstName, lastName;
int moviesDownloaded, stateResidency;
double movieCost, netPayment, tax, discount, totalCharge, payment, taxRate;

System.out.println("Enter your first name:");
Scanner keyboard1 = new Scanner(System.in);
firstName = keyboard1.nextString();

System.out.println("Enter your last name:");
Scanner keyboard2 = new Scanner(System.in);//-----changed
lastName = keyboard2.nextString();

System.out.println("Enter the number of movies downloaded:");
Scanner keyboard3 = new Scanner(System.in);//-----changed
moviesDownloaded = keyboard3.nextInt();

System.out.println("Enter the cost per movie:");
Scanner keyboard4 = new Scanner(System.in);//-----changed
movieCost = keyboard4.nextDouble();

System.out.println("Indicate your state of residency. Enter 1 for Mississippi or 2 for any other state.");
Scanner keyboard5 = new Scanner(System.in);//-----changed
stateResidency = keyboard5.nextInt();` 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-04T10:02:58.990

您无需在每次使用键盘时都初始化它。你可以在程序的顶部声明一次，每次你想从中获取一些东西时只需调用keyboard.next()。

# html - HTML 边框“宽度”缩小尺寸

> ID：14684268
> 
> 赞同：2
> 
> 时间：2013-02-04T09:58:11.510
> 
> 标签：html, css, html-table

请参阅以下文档：

```
<table>
  <tr>
    <td>
      <p>foo bar baz</p>
    </td>
  </tr>
</table> 
```

还有这个：

```
td {
  padding: 10px;
  border-bottom: 1pt solid gray;
} 
```

这会导致类似

![html片段的结果](../Images/2d049129e3f86801ec5ae90782ecdaba.png)

规则始终是表格单元格的宽度。是否有任何 CSS/HTML 方法可以使规则更小（水平占用更少的空间）？

我需要规则是某个小于单元格宽度的指定大小。这就是它的样子（我希望你明白这一点 - 当然，双破折号很容易）：

```
 123.44
  2312.49
 --------
    12.12
  1231.44
 ========
  1234.33 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-04T10:05:09.460

你的意思是底部边框应该比宽度短`td`吗？在这种情况下，这是不可能的，但是您可以添加一个代表您的边框的元素，并为该元素提供小于 100% 的宽度。从技术上讲，我会建议一个`hr`但`div`可以做同样的事情，也许更容易理解。

**HTML**

```
<table>
  <tr>
    <td>
      <p>foo bar baz</p>
      <div style="width:75%;border-bottom:1px solid #000;"> </div>
    </td>
  </tr>
</table> 
```

**现场演示**
[http://jsfiddle.net/Zs9dG/](http://jsfiddle.net/Zs9dG/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-04T10:03:14.800

如果您要在每个表格单元格中放置一个段落，为什么不在上面加上边框呢？

```
td > p {
    display: inline;
    border-bottom: 1pt solid gray;
} 
```

设置`<p>`to`display: inline`意味着边框与其中的内容一样宽。然后，您可以为表格单元格提供更多水平填充，最终应该得到您想要的效果。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-04T10:05:02.793

你可以用html代码管理它，否则使用ul和li更方便。

```
 <table>
      <tr>
        <td>
          <p>123.44</p>
        </td>
      </tr>
      <tr>
        <td>
          <p>12312.49</p>
        </td>
      </tr>
      <tr>
        <td>
          <p> -------- </p>
        </td>
      </tr>
      <tr>
        <td>
          <p>12.12</p>
        </td>
      </tr>
      <tr>
        <td>
          <p>1231.44</p>
        </td>
      </tr>
      <tr>
        <td>
          <p> ======== </p>
        </td>
      </tr>
      <tr>
        <td>
          <p> 1234.33 </p>
        </td>
      </tr>
    </table> 
```

# ruby-on-rails-3 - 在新的 rails 3.2 应用程序中捆绑了 rspec 和 cucumber gems 版本

> ID：14684270
> 
> 赞同：0
> 
> 时间：2013-02-04T09:58:17.703
> 
> 标签：ruby-on-rails-3, rspec, cucumber, bundler

我在使用 rails 应用程序中捆绑的 cucumber 和 rspec gem 时遇到问题。

这是我`Gemfile`在添加了 RSpec 支持的新 Rails 3.2.11 应用程序中的样子：

```
source 'https://rubygems.org'
gem 'rails', '3.2.11'
gem 'sqlite3'
gem 'jquery-rails'

group :assets do
  gem 'sass-rails',   '~> 3.2.3'
  gem 'coffee-rails', '~> 3.2.1'
  gem 'uglifier', '>= 1.0.3'
end

group :test do
  gem 'rspec-rails'
end 
```

运行后`bundle`，`Gemfile.lock`报告`rspec 2.12.2`正在使用（截至撰写本文时 gem 的最新版本）。

但我也想用黄瓜，所以我`bundle update`修改后运行`Gemfile`如下：

```
group :test do
  gem 'rspec-rails'
  gem 'cucumber-rails'
end 
```

**令我惊讶的是，捆绑的 rspec 现在是 version `2.0.1`，绝对不酷。**

事实上，这在运行规范时会导致各种错误，我花了一段时间才弄清楚它们是旧的 rspec 错误，很久以前就修复了。

我可以强制捆绑器使用最新的 gem：

```
group :test do
  gem 'rspec-rails', '>= 2.12.0'
  gem 'cucumber-rails'
end 
```

但我不高兴，因为我不明白：

1.  如果我一开始做错了什么
2.  如果我应用的修复程序会导致其他问题
3.  如果有办法预测这种行为

有什么见解吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T15:22:33.880

根据[https://github.com/cucumber/cucumber-rails/blob/master/cucumber-rails.gemspec#L22](https://github.com/cucumber/cucumber-rails/blob/master/cucumber-rails.gemspec#L22)， cucumber-rails 依赖于 'rspec-rails', '~> 2.10.1' （这意味着 > = 2.10.1 和 < 2.11)。如果任何其他上游依赖项依赖于 rspec < 2.10.1 或 >= 2.11 的版本，bundler 应该会引发错误，所以我不明白这是怎么发生的。

`:development`顺便说一句，您应该在和`:test`组中包含 rspec-rails （根据[https://github.com/rspec/rspec-rails#configure](https://github.com/rspec/rspec-rails#configure)）。

# c# - 如何使用sql server 2005在asp.net c#中的webite中显示长内容

> ID：14684275
> 
> 赞同：1
> 
> 时间：2013-02-04T09:59:02.507
> 
> 标签：c#, asp.net, sql-server

我想制作一个演示 Web 应用程序...类似于 wikipedia 之类的东西，我希望当用户单击一个单词或图像时，该单词的相关内容应该显示在其他页面中。

内容可以是长文本或图像所以我想知道如何将内容存储在数据库中

我使用了以下链接中的代码：

*   [使用 Asp.net 从 SQL Server 2005 检索文件](http://csharp-guide.blogspot.in/2012/06/retrieve-files-from-sql-server-2005.html)

但我想在我的网站上显示文件内容...请提出建议...如何在数据库中存储内容（内容的数据类型）

我可以为此使用wordpress吗？...但我不知道工作新闻

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-04T10:07:04.583

根据描述，您希望在数据库中存储大量文本数据。我会建议你以下

> VARCHAR(MAX) 如果一切都将是基于 ascii 的，比如带有英文内容的文本
> 
> NVARCHAR(MAX) 如果文本可以包含任何特殊字符（例如日语、阿拉伯语等）
> 
> NVARCHAR 将使您的存储使用量翻倍，因为它使用的空间量是 VARCHAR 的两倍。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-04T11:31:37.617

使用**VARCHAR(MAX)**将大数据存储在数据库中，因为它可以存储**2,147,483,647**个字符..为了显示，您可以使用 asp.net 中的 div 和表格...如果您有图像，请将它们存储在您的物理文件夹中（您的文件夹应用程序）并将图像路径存储在**您**的数据库中。

# windows-8 - 开发应用商店应用的 Windows 8 要求

> ID：14684276
> 
> 赞同：0
> 
> 时间：2013-02-04T09:59:08.317
> 
> 标签：windows-8, windows-store-apps

我是新的 Windows 商店开发。我可以使用 Windows 8 企业评估版 32 位 (x86) 版本或仅使用 64 位版本的任何限制 等待您的宝贵答复。先感谢您...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T10:28:34.997

支持 x86 和 x64（32 位和 64 位）操作系统。只有 32 位版本的 Visual Studio 2012 可用，它可以安装在 64 位 Windows 上。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T10:29:38.033

我自己使用的是 32 位版本的 Windows 8，它运行良好。Win Phone 8 应用程序有这样的限制，但对于 Win 8，你可以在 x86 上使用。

# asp.net - 如何在.aspx 代码的查询中传递会话值？

> ID：14684279
> 
> 赞同：0
> 
> 时间：2013-02-04T09:59:12.610
> 
> 标签：asp.net, sql, linq

我想从 .aspx 代码中传递会话值，即 web 的源代码

```
<asp:SqlDataSource ID="SqlDataSource1" runat="server" 
        ConnectionString="<%$ ConnectionStrings:ConnectionString %>" 
        SelectCommand="SELECT Album.AlbumID, Album.DefaultPhotID, Album.AlbumName, PhotAlbum.Photo FROM Album INNER JOIN PhotAlbum ON Album.DefaultPhotID = PhotAlbum.PhotoID where userid=<%  Session["UserId"] %>">
    </asp:SqlDataSource> 
```

我怀疑这段代码是否有效。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T10:02:35.460

使用`SessionParameter`with`SelectParameters`传递`Session`值

**[MSDN 文档](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.sessionparameter.aspx)**

```
<asp:SqlDataSource ID="SqlDataSource1" runat="server" 
    ConnectionString="<%$ ConnectionStrings:ConnectionString %>" 
    SelectCommand="SELECT Album.AlbumID, Album.DefaultPhotID, Album.AlbumName, PhotAlbum.Photo FROM Album INNER JOIN PhotAlbum ON Album.DefaultPhotID = PhotAlbum.PhotoID where userid=@userid">
<SelectParameters>
         <asp:SessionParameter Name="userid" Type="String"  SessionField="UserId" />
</SelectParameters>
   </asp:SqlDataSource> 
```

# jquery - 如何循环div的背景图片？

> ID：14684282
> 
> 赞同：0
> 
> 时间：2013-02-04T09:59:30.367
> 
> 标签：jquery, html, css, wordpress

这是我能找到的最佳解决方案的链接作为起点： [jQuery.cycle change div background image](https://stackoverflow.com/questions/4948395/jquery-cycle-change-div-background-image) which point to -> [http://www.magneticwebworks.com/jquery-rotating-page-background/](http://www.magneticwebworks.com/jquery-rotating-page-background/)

这是我希望成品看起来像的链接（但具有旋转背景）wordpress.danielatwork.com/pilotfish

这是我目前正在处理的页面的链接，并在代码方面停留在：te​​st.beeptech.com

我觉得好像我当然很接近......图像定位正确，大小有点偏，但这是一个问题，我只是无法让原始 div/文本保持在背景之上。

非常感谢您的帮助。我真的很享受建立一个网站以某种方式的外观和感觉的挑战，现在我意识到微调过程是多么困难。

-担

附言。我不得不让一些链接“干”，因为我目前的状态不允许每个问题超过两个活动超链接。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T10:53:21.193

[http://nivo.dev7studios.com/support/jquery-plugin-usage/](http://nivo.dev7studios.com/support/jquery-plugin-usage/)通过对 css 的一些编辑，您应该能够实现您正在寻找的内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T11:38:04.180

看起来有问题`z-index`。刚刚查看了您的参考链接： http: [//www.magneticwebworks.com/demo/](http://www.magneticwebworks.com/demo/)。他们`z-index:999`用于他们的**Text-Container**。

你应该为你的文本容器使用一个比你的图像容器更大的值。玩z-index，就解决了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-04T11:43:37.070

你的 div.bg1-3 有一个位置：absolute; 阻止它们正确显示的值。

# javascript - 水平/垂直（锚）页面内容在链接点击时滚动

> ID：14684285
> 
> 赞同：0
> 
> 时间：2013-02-04T09:59:37.527
> 
> 标签：javascript, jquery, html, css, horizontal-scrolling

类似的问题，如果不是这样的确切问题，但不是经常被问到，而我试图改变的答案却没有任何运气。

基本上，我希望能够使我的页面的内容部分（因此标题保留在每个页面上）发生变化，我不确定这是否与仅使用一个 html 页面的锚点有关，或者它是否是多个 html 页面或真的如何它已经完成了。一直在寻找超过 5 个小时，但无济于事。

我在这个网站上寻找答案，它正是我正在寻找的东西[http://www.aivahthemes.com/themes/gracious/index.html](http://www.aivahthemes.com/themes/gracious/index.html)

我到处寻找，发现它做类似事情的网站，但如果你往前走两页，然后回到原来的页面，你会在回来的路上看到中间的页面。上面的那个网站没有这样做，实际上以某种方式隐藏了链接之间的页面，这太棒了。

这有点含糊，因为我没有发布任何代码，但实际上我尝试的所有代码都只是来自以前的问题，只是我试图将一半的答案改编成我想要的。

非常感谢任何帮助，我很难过！

编辑：*看起来更详细一点，看起来确实像一个完整的 HTML 页面。如果它是一个完整的页面，为什么加载这么快？认为那将是一个漫长的过程。

Edit2：*是否也可以通过垂直实现这种“风格”？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T10:05:09.173

您列出的网站在 URL 中使用哈希。您可以使用 javascript 或仅使用普通锚点动态添加它们。url 中的哈希会将其保存在浏览器历史记录中，并且后退/前进按钮可以正常工作。唯一棘手的部分是读取哈希，这非常简单`window.location.hash`- 它返回“#”符号之后的所有内容。

动画/获取页面的脚本会稍微复杂一些，但正如我所见，这一切都是基于获取 right `<div id="HASH_FROM_URL">`，将其移动到 'left: -9999px' 然后动画到主容器的`offsetLeft`.

# sql - 默认值应在插入时存储

> ID：14684291
> 
> 赞同：0
> 
> 时间：2013-02-04T09:59:56.823
> 
> 标签：sql

我有一个问题，我在一次采访中被问到。我的问题是：

我创建了一个名为 " " 的表，其中`EMPLOYEE`包含字段`emplno`,`emplname`和约束。在这里，当我将员工详细信息插入为. （我错误地插入了 2014 而不是 2013）。所以现在应该插入“”（当前年份）值而不是“ ”。`joiningdate``NOT NULL``'101','suresh','2014'``2013``2014`

对于这个问题，我无法回答。你能帮我理解它应该是什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T10:11:04.000

你可以只更新表格，

```
UPDATE employee
SET joiningdate = '2013'
WHERE emplno = 101
AND emplname = 'suresh';

COMMIT; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T11:52:31.143

在 SQLServer 中，您还可以使用计算列创建表

```
CREATE TABLE dbo.EMPLOYEE
 (
  emplno int,
  emplname nvarchar(10),
  joiningdate AS YEAR(GETDATE())
  ) 
```

然后 INSERT 语句将是

```
INSERT dbo.EMPLOYEE
VALUES ('101', 'suresh') 
```

具有 DEFAULT 约束的 OR 表

```
CREATE TABLE dbo.EMPLOYEE
 (
  emplno int,
  emplname nvarchar(10),
  joiningdate nvarchar(10) NOT NULL DEFAULT YEAR(GETDATE())
  ) 

INSERT dbo.EMPLOYEE
VALUES ('101', 'suresh', DEFAULT) 
```

[**SQLFiddle**](http://sqlfiddle.com/#!3/9709a/2)上的演示[](http://sqlfiddle.com/#!3/9709a/2)

# php - 如何在 symfony2 中删除控制台命令

> ID：14684292
> 
> 赞同：0
> 
> 时间：2013-02-04T09:59:59.953
> 
> 标签：php, symfony

我已经注册了 EkinoNewRelic 捆绑包并且它都可以正常工作，但是它还注册了名为`newrelic:notify-deployment`.

如何在`app/console`不更改原始代码的情况下删除此命令？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T13:21:27.657

我认为你不能禁用它。相反，您应该覆盖它，以便它只打印类似“Command disabled, use acme:notify-deployment”之类的内容。并返回。

# javascript - jsTree：如何逐步加载子项（无 ajax）

> ID：14684295
> 
> 赞同：0
> 
> 时间：2013-02-04T10:00:05.170
> 
> 标签：javascript, jstree

如何在不使用 ajax 而是使用私有函数的情况下逐步加载节点的子节点？

在 json_data 的文档中，它说`json_data.data`可以是一个函数：

> 您还可以将其设置为一个函数 - 它将在树的范围内为需要加载的每个节点执行，该函数将接收两个参数 - 正在加载的节点和一个函数，一旦处理完成，就会调用数据.

但是怎么用呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T10:00:05.170

此解决方案基于 CheeseWizzz 的[帖子](https://github.com/vakata/jstree/issues/140)。

```
"json_data" : {
    "data" : function(n, b){
        b(custom_function(n));
    },
    "progressive_render" : true
}, 
```

这是`custom_function`必须返回有效 json 数据的示例：

```
function custom_function(n){
    if (n == -1) // root node
        return ParentNodes();
    else
        var eltID = n.attr('elt');
        return ChildrenOf(eltID);
    }
    return nodes;
} 
```

# c++ - OpenCV WarpPerspective 问题

> ID：14684298
> 
> 赞同：2
> 
> 时间：2013-02-04T10:00:09.917
> 
> 标签：c++, image, image-processing, opencv, image-stitching

我目前正在尝试在 Eclipse 中实现基本的图像拼接 C++ (OpenCV) 代码。特征检测部分显示了 SURF 特征的出色结果。但是，当我尝试将 2 张图像扭曲在一起时，我只得到一半的图像作为输出。我试图到处寻找解决方案，但无济于事。我什至试图抵消单应矩阵，就像在这个答案[OpenCV warpperspective](https://stackoverflow.com/questions/6087241/opencv-warpperspective)中一样。到目前为止没有任何帮助。

由于我没有足够的声誉点，我将在评论中附上输出图像。

对于特征检测和单应性，我使用了这里的确切代码 [http://docs.opencv.org/doc/tutorials/features2d/feature_homography/feature_homography.html](http://docs.opencv.org/doc/tutorials/features2d/feature_homography/feature_homography.html)

然后我在给定代码之后添加了以下代码，

```
Mat result;
warpPerspective(img_object,result,H, Size(2*img_object.cols,img_object.rows));
Mat half(result,Rect(0,0,img_scene.cols,img_scene.rows));
img_scene.copyTo(half);

imshow( "Warped Image", result); 
```

我对此很陌生，只是想把这些碎片放在一起。因此，如果有一些基本错误，我深表歉意。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T11:19:20.463

如果你只是想把这些碎片放在一起，你可以试试内置的 OpenCV 图像拼接器类：[http ://docs.opencv.org/modules/stitching/doc/high_level.html#stitcher](http://docs.opencv.org/modules/stitching/doc/high_level.html#stitcher)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T07:04:36.007

我在这里找到了一个相关的问题[Stitching 2 images in opencv](https://stackoverflow.com/questions/8205835/stitching-2-images-in-opencv?rq=1)并实现了给出的附加代码。有效！

作为参考，我编写的编辑代码是

```
Mat result;
warpPerspective(img_scene, result, H, Size(img_scene.cols*2, img_scene.rows*2), INTER_CUBIC);
Mat final(Size(img_scene.cols + img_object.cols, img_scene.rows*2),CV_8UC3);
Mat roi1(final, Rect(0, 0,  img_object.cols, img_object.rows));
Mat roi2(final, Rect(0, 0, result.cols, result.rows));
result.copyTo(roi2);
img_object.copyTo(roi1); 
```

# xamarin.ios - Techart 应用程序在 iphone 中崩溃

> ID：14684302
> 
> 赞同：0
> 
> 时间：2013-02-04T10:00:22.697
> 
> 标签：xamarin.ios, teechart

使用 steema Teechart 时，它在模拟器中运行良好，但在 iphone 中使用时应用程序崩溃，

它显示以下错误

System.NullReferenceException：对象引用未设置为 Steema.TeeChart.TChart.ApplyScroll () [0x00000] in :0 at Steema.TeeChart.TChart.m__0 (System.Object sender, System.EventArgs e) [ MonoTouch.UIKit.UIScrollView+_UIScrollViewDelegate.Scrolled (MonoTouch.UIKit.UIScrollView scrollView) [0x0000d] 在 MonoTouch.UIKit.UIScrollView+_UIScrollViewDelegate.ScrollView 的 0x00000] [0x0000d] 在 MonoTouch 的 /Developer/MonoTouch/Source/monotouch/src/UIKit/UIScrollView.g.cs:991 中。 UIKit.UIScrollView.SetContentOffset (PointF contentOffset, Boolean animated) [0x00010] in /Developer/MonoTouch/Source/monotouch/src/UIKit/UIScrollView.g.cs:208 at Steema.TeeChart.TChart.Draw (RectangleF rect) [0x00000 ] in :0 在 MonoTouch.UIKit.UIApplication.Main (System.String[] args, System.String principalClassName, System.String delegateClassName) [0x0004c] in /Developer/MonoTouch/Source/monotouch/src/UIKit/UIApplication.cs:38 at CropManageriPhone.Application.Main (System.String[] args) [0x00000] in /Users/vss1/VSS Projects /CP Live/CropManageriPhone04022013/CropManageriPhone/Main.cs:17

我们正在使用 monotouch 版本 6.0.4

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T10:40:53.470

我找到了解决方案，

我为图表控件设置了 ZoomScrollStyle，

_controller.chart.Aspect.ZoomScrollStyle=Steema.TeeChart.Drawing.Aspect.ZoomScrollStyles.Manual;

# html - z-index 无法正常工作

> ID：14684311
> 
> 赞同：0
> 
> 时间：2013-02-04T10:00:59.433
> 
> 标签：html, css, z-index

出于某种原因，我的 z 索引不起作用。

```
¬ .levelThree pos:ab
      ¬ .internalMenu > ul > li pos:rel
           ¬ .levelFive pos:ab 
```

.levelFive 应该在所有其他元素的前面。

[Js小提琴在这里](http://jsfiddle.net/dCYdw/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T10:06:00.357

**将z-index**赋予您的**li.active**。像这样写：

```
.internalMenu > ul > li, .levelThree > ul > li.active{
    z-index:10;
} 
```

检查这个[http://jsfiddle.net/dCYdw/10/](http://jsfiddle.net/dCYdw/10/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T10:07:31.090

如果您希望第 5 级出现在所有其他元素的前面，您甚至不需要设置 z-indicies，因为自然堆叠顺序将使子级位于父级之上。

不过，作为记录，我确实看到了这个（缩短的），这是错误的：

```
.levelFive { z-index: 2; }
.levelThree li { z-index: 3; } 
```

这明确表示 .levelThree 中的所有 li（包括 .levelFive 的父级）的 z-index 比 levelFive 中的任何内容都高。

因此，您的标题不正确，z-index 确实可以正常工作，但是您没有正确编码。

# python - 通过从 csv 复制数据在 Python 中创建“xlsx”的问题

> ID：14684312
> 
> 赞同：0
> 
> 时间：2013-02-04T10:01:01.570
> 
> 标签：python, csv, for-loop, python-2.7, openpyxl

我正在尝试使用 python 将 csv 中的所有数据复制到 excel“xlsx”文件中。我正在使用以下代码来执行此操作：

```
from openpyxl import load_workbook
import csv
#Open an xlsx for reading
wb = load_workbook(filename = "empty_book.xlsx")
#Get the current Active Sheet
ws = wb.get_active_sheet()
#You can also select a particular sheet
#based on sheet name
#ws = wb.get_sheet_by_name("Sheet1")
#Open the csv file
with open("Pricing_Updated.csv",'rb') as fin:
    #read the csv
    reader = csv.reader(fin)
    #get the row index for the xlsx
    #enumerate the rows, so that you can
    for index,row in enumerate(reader):

        i=0
        for row[i] in row:
            ws.cell(row=index,column=i).value = row[i]
            i = i+1
#save the excel file
wb.save("empty_book.xlsx") 
```

**我在SO**本身上找到了这段代码并对其进行了修改以使其可用于我的案例。但是这段代码会抛出`UnicodeDecodeError: 'ascii' codec can't decode byte 0xa3 in position 0: ordinal not in range(128)`错误`ws.cell(row=index,column=i).value = row[i]`。

请帮我解决这个问题。

**更新**：我也尝试使用以下代码来解决问题，但再次遇到`UnicodeDecode`错误`ws.cell(row=rowx,column=colx).value = row[colx]`：

```
for rowx,row in enumerate(reader):
    for colx, value in enumerate(row):

        ws.cell(row=rowx,column=colx).value = row[colx] 
```

**更新2**：我也尝试使用`xlwt`模块将csv复制到xls（因为它不支持xlxs）并且再次遇到`UnicodeDecode`错误，我使用的代码是：

```
import glob, csv, xlwt, os
wb = xlwt.Workbook()
for filename in glob.glob("Pricing_Updated.csv"):
    (f_path, f_name) = os.path.split(filename)
    (f_short_name, f_extension) = os.path.splitext(f_name)
    ws = wb.add_sheet(f_short_name)
    spamReader = csv.reader(open(filename, 'rb'))
    for rowx, row in enumerate(spamReader):
        for colx, value in enumerate(row):
            ws.write(rowx, colx, value)
wb.save("exceltest7.xls") 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T10:32:20.217

该错误表明单元格对象正在尝试将值转换为 Unicode，但该值包含非 ASCII 字符。你的 csv 文件是什么编码的？您必须发现这一点，尽管在 Windows 上一个很好的猜测是“mbcs”编码，Python 将其定义为与 Windows“ANSI”代码页相同。试试这个：

```
for rowx,row in enumerate(reader):
    for colx, value in enumerate(row):
        ws.cell(row=rowx,column=colx).value = unicode(value, "mbcs") 
```

# android - setmargin 在 android 的相对布局中不起作用

> ID：14684318
> 
> 赞同：4
> 
> 时间：2013-02-04T10:01:15.377
> 
> 标签：android, margin, android-relativelayout

我以编程方式在相对布局中创建了 2 个按钮。我希望按钮之间没有边距空间，并试图通过使用“setmargin”来实现这一点，但失败了。下面是代码。

```
//creating the relative layout
  RelativeLayout relativeLayout = new RelativeLayout(this);
  RelativeLayout.LayoutParams rlp = new RelativeLayout.LayoutParams(
            RelativeLayout.LayoutParams.MATCH_PARENT,
            RelativeLayout.LayoutParams.MATCH_PARENT);   
//creating buttons
    Button button1 = new Button(this);
    button1.setId(R.id.button1);
    RelativeLayout.LayoutParams params1 = new RelativeLayout.LayoutParams(
            SCR_W/2,
            RelativeLayout.LayoutParams.WRAP_CONTENT);//SCR_W is the device screenwidth
    params1.addRule(RelativeLayout.ALIGN_PARENT_LEFT);
    params1.addRule(RelativeLayout.ALIGN_PARENT_TOP);
    params1.setMargins(0, 0, 0, 0);
    button1.setLayoutParams(params1);
    relativeLayout.addView(button1);  

    Button button2 = new Button(this);
    button2.setId(R.id.button2);
    RelativeLayout.LayoutParams params2 = new RelativeLayout.LayoutParams(
            SCR_W/2,
            RelativeLayout.LayoutParams.WRAP_CONTENT);
    params2.addRule(RelativeLayout.ALIGN_PARENT_LEFT);
    params2.addRule(RelativeLayout.BELOW, button1.getId());
    params2.setMargins(0, 0, 0, 0);
    button2.setLayoutParams(params2);
    relativeLayout.addView(button2);

//setting the relative layout as the contentview
     setContentView(relativeLayout, rlp); 
```

提前致谢..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T10:12:26.833

我试过你的代码，对我来说还可以，

两个按钮的距离为 0。要检查它，只需为每个按钮设置不同的颜色，您就会看到它们是在一起的。

```
button1.setBackgroundColor(Color.BLUE);
button2.setBackgroundColor(Color.RED); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T10:06:00.380

尝试将相对布局的高度设置为`wrap_content`..

```
 RelativeLayout.LayoutParams rlp = new RelativeLayout.LayoutParams(
        RelativeLayout.LayoutParams.MATCH_PARENT,
        RelativeLayout.LayoutParams.WRAP_CONTENT); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-04T10:25:07.180

只需尝试这样的事情，它就会起作用 - ：

```
 params1.setMargins(0, 0, 0, -5);
 params2.setMargins(0, -5, 0, 0); 
```

# zsh - 将当前命令行传递给 zsh 自动完成功能

> ID：14684322
> 
> 赞同：2
> 
> 时间：2013-02-04T10:01:28.380
> 
> 标签：zsh, zsh-completion

我跟踪我的计费时间。每个项目都有一个描述和多个标签，用于不同的客户、项目等。

最近我为这些标签添加了 zsh 补全。这就是我现在的 zsh 自动完成文件中的内容：

```
_arguments "*:tags:( $(cat timetrackingdata | extract_tags.py ) )" 
```

python 脚本`extract_tags.py`提取我的 timetrackingdata 文件中的所有标签并将它们返回给 zsh。

我希望能够限制命令行上已经存在的标签返回的标签

因此，如果我已经将标签`client1` 放在命令行上，我想将此标签传递给它，`extract_tags.py`以便它可以过滤它的输出，并且只返回出现在也有标签的项目上的标签`client1`。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-09T16:08:08.740

我认为您正在寻找的是`$words`变量。这是在命令行上指定的所有单词的数组，这些单词神奇地存在于完成函数中。

这是在哪里记录的？`man zshcompsys`如果我不是专门寻找它们，我会错过一些传递参考。[但是，我发现在这个网站](http://askql.wordpress.com/2011/01/11/zsh-writing-own-completion/)上更清楚地突出了它。

# c++ - 如何在 c++ 数组的末尾添加一些东西？

> ID：14684328
> 
> 赞同：5
> 
> 时间：2013-02-04T10:01:53.670
> 
> 标签：c++, arrays

我有一个数组，但我想在最后添加一些东西而不覆盖它已经存在的任何数据。它必须是一个数组而不是一个向量，因为它是一个赋值。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-02-04T10:24:18.073

从评论中，听起来您不想添加到数组的末尾，而是部分填充数组并跟踪您写入的数据量。您只需要一个变量来跟踪它：

```
char array[10];
size_t size = 0;

// Add characters:
array[size++] = 'H';
array[size++] = 'e';
array[size++] = 'l';
array[size++] = 'l';
array[size++] = 'o'; 
```

您需要确保永远不要超出数组的末尾，否则会损坏其他内存。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-04T10:04:25.493

C++ 数组不可扩展。您要么需要使原始数组更大并在单独的变量中保留有效元素的数量，要么创建一个新的（更大的）数组并复制旧内容，然后是要添加的元素。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-04T10:04:16.787

您可以创建一个大于第一个的数组并复制所有元素，然后在数组末尾添加新元素。

或者，您可以将数组转换为向量，添加一个元素，然后将向量转换回数组。看一下： [如何在 C++ 中将向量转换为数组](https://stackoverflow.com/questions/2923272/how-to-convert-vector-to-array-c)，[将数组转换为向量的最简单方法是什么？](https://stackoverflow.com/questions/8777603/what-is-the-simplest-way-to-convert-array-to-vector)

# iphone - iPhone Cocos2d 中的 SwipeGesture

> ID：14684329
> 
> 赞同：0
> 
> 时间：2013-02-04T10:01:55.337
> 
> 标签：iphone, ios, objective-c, xcode, uiswipegesturerecognizer

我正在使用 UISwipeGestureRecognizer 在 iPhone 中获取滑动手势。我想在滑动触摸开始和滑动触摸结束时获得 2 个位置点。我已经实现了如下滑动触摸方法

```
- (void)handleSwipeFrom:(UISwipeGestureRecognizer *)recognizer {

    CGPoint touchLocation = [recognizer locationInView:recognizer.view];
    touchLocation = [[CCDirector sharedDirector] convertToGL:touchLocation];
    touchLocation = [self convertToNodeSpace:touchLocation];

    CCLOG(@"Hello %@ - %d",NSStringFromCGPoint(touchLocation),recognizer.state);

    if (recognizer.state == UIGestureRecognizerStateBegan) {

        CGPoint touchLocation = [recognizer locationInView:recognizer.view];
        touchLocation = [[CCDirector sharedDirector] convertToGL:touchLocation];
        touchLocation = [self convertToNodeSpace:touchLocation];

        CCLOG(@"UIGestureRecognizerStateBegan %@",NSStringFromCGPoint(touchLocation));

    } else if (recognizer.state == UIGestureRecognizerStateChanged) {    

        CCLOG(@"UIGestureRecognizerStateChanged");

    } else if (recognizer.state == UIGestureRecognizerStateEnded) {
        CGPoint touchLocationEnd = [recognizer locationInView:recognizer.view];
        touchLocationEnd = [[CCDirector sharedDirector] convertToGL:touchLocationEnd];
        touchLocationEnd = [self convertToNodeSpace:touchLocationEnd];
        CCLOG(@"UIGestureRecognizerStateEnded %@",NSStringFromCGPoint(touchLocationEnd));
        }        

    //}
} 
```

我的滑动触摸工作正常。但它只显示 UIGestureRecognizerStateEnded。即使我在屏幕上滑动并且我的触摸还没有结束但 StateEnded 被调用。我如何调用 StateBegin 并获取位置，然后调用 StateEnd。现在只有 StateEnded 正在工作，其他两个 Begin 和 Changing 都不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T11:21:47.880

**更新：** 我找到原因：

> 滑动是一个离散的手势，因此每个手势只发送一次相关的动作消息。

而这张图片： ![在此处输入图像描述](../Images/d141760d9fc7108cf04a76ab8090ff77.png)

所以只有三种状态`UISwipeGestureRecognizer`：可能，识别和结束。但我仍然不知道为什么不调用可能。

* * *

我试过你的代码并得到相同的结果。我也不知道为什么会这样。如果你找不到这个问题的解决方案，我建议你使用 for touch 方法自己分析触摸。这肯定可以处理事件，但比使用手势识别器要复杂一些。

```
- (void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event;
- (void)touchesMoved:(NSSet *)touches withEvent:(UIEvent *)event;
- (void)touchesEnded:(NSSet *)touches withEvent:(UIEvent *)event;
- (void)touchesCancelled:(NSSet *)touches withEvent:(UIEvent *)event; 
```

# php - 从 PHP 创建 XML 文件但获得 HTML 文件

> ID：14684332
> 
> 赞同：0
> 
> 时间：2013-02-04T10:02:05.570
> 
> 标签：php, mysql, xml

我正在使用此代码从 PHP 文件创建一个 XML 文件（未归档）。这是代码：

```
<?php
include_once ('conf.php');
$conn =  mysql_connect($host, $user, $password);    
if (!$conn) {
    die('No hay conexion a la BBDD');
}
$bd = mysql_select_db($name, $conn);
if (!$bd) {
    die ('Error en la BBDD');
}
$query = "select * from usuarios where activo = 0 order by puntuacion desc limit 0, 10";
$res = mysql_query($query, $conn);
$salida = '<?xml version="1.0" encoding="utf-8" standalone="yes" ?>'."\n";
$salida .= '<score>'."\n";
$i = 1;
while ($row = mysql_fetch_array($res))
{
    $salida.= '<posicion num="' . $i . '">'."\n";
    $salida .= '<id>'.$row['id'].'</id>'."\n";
    $salida .= '<puntuacion>'.$row['puntuacion'].'</puntuacion>'."\n";
    $salida .= '</posicion>'."\n";
    $i++;
}
$salida .= '</score>';
mysql_free_result($res);
mysql_close($conn);
echo $salida;
?> 
```

当我调用这个文件时，我获得（使用 Chrome Inspector）嵌入在 HTML 文件中的 XML 文件及其 html、head 和 body 标签。我希望这个 php 文件被 ajax 的 get 函数读取。

关于什么是错的任何想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T10:23:50.383

阅读有关[XML 操作](http://www.php.net/manual/en/refs.xml.php)的 PHP 手册。

您将在那里找到用于获取、操作和创建 XML 文档的多汁工具。

此外，在进行任何输出之前，`header ("Content-type: text/xml");`请在脚本中添加一行，为客户端实体指定您要发送 XML 并且应该将其解析为 XML。[header — 发送原始 HTTP 标头](http://www.php.net/manual/en/function.header.php)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-04T10:08:34.000

添加一个标头，指定您正在输出 XML。`header('Content-Type: text/xml')`就在你回声之前。

# c# - 带有 concat 和 max 的 NHibernate QueryOver 子查询

> ID：14684333
> 
> 赞同：2
> 
> 时间：2013-02-04T10:02:15.457
> 
> 标签：c#, nhibernate, queryover

我是 NHibernate 3 和 QueryOver 的新手，我正在尝试将此 Oracle SQL 转换为 NHibernate QueryOver 表达式：

```
 SELECT *  
  FROM MYTABLE T1  
  WHERE T1.ID= 'ID'  
  AND T1.TYPE= 'TYPE'  
  AND T1.DATADATE= '20130101'  
  AND (T1.GENERATIONDATE || T1.GENERATIONHOUR) =  
    (SELECT MAX (T2.GENERATIONDATE || T2.GENERATIONHOUR) 
    FROM MYTABLE T2  
    WHERE T1.ID= T2.ID
    AND T1.TYPE= T2.TYPE
    AND T1.DATADATE= T2.DATADATE) 
```

所有五列都是表主键的一部分，我想要的只是过滤选择连接 GENERATIONDATE（'yyyyMMdd' 格式的 NVARCHAR2（8）日期）和 GENERATIONHOUR（'HH'格式的 NVARCHAR2（2）小时的最新行) 字段。

我有一个静态类作为我的类的 QueryOver 提供程序，所以对于一个简单的查询，我正在做：

```
class MyTableQueryOver
{
    static QueryOver<MyTable, MyTable> ByIDAndTypeAndDate(string id, string type, string date)
    {
         return QueryOver.Of<MyTable>()
             .Where(x => x.Id == id 
                 && x.Type == type 
                 && x.Date == date);
    }
} 
```

欢迎任何建议。

提前致谢。

# django - 在 Django admin 中更新父值

> ID：14684334
> 
> 赞同：0
> 
> 时间：2013-02-04T10:02:16.203
> 
> 标签：django, django-admin, formsets

我有两个模型：

```
class Tickets(models.Model):
   ticketnumber = models.IntegerField()
   total_amount = models.DecimalField()

class TicketItems(models.Model):
   name = models.Charfield(max_length=30)
   ticket = models.ForeignKey(Tickets)
   price = models.DecimalField()
   amount = models.IntergerField() 
```

我有一个内联管理页面，用户可以添加 TicketItems。如何在保存时更新所有 TicketItems 的模型票的总金额（价格 * 金额）？

Django 文档告诉我在 admin.py 中添加这个：

```
class TicketAdmin(admin.ModelAdmin):
    def save_formset(self, request, form, formset, change):
        instances = formset.save(commit=False)
        for instance in instances:
            instance.user = request.user
            instance.save()
        formset.save_m2m() 
```

我尝试了很多东西，但我无法更新总金额。这是我的 admin.py：

```
class TicketitemsInline(admin.TabularInline):
    model = Ticketitems

class TicketsAdmin(admin.ModelAdmin):
    inlines = [
        TicketitemsInline,
    ]

    def save_formset(self, request, form, formset, change):
        instances = formset.save(commit=False)
        for instance in instances:
            instance.user = request.user
            instance.save()
            instance.update_total_amount()
        formset.save_m2m()
admin.site.register(Tickets, TicketsAdmin) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T07:11:07.727

Pankaj Singh 在 Django 邮件列表中回答了这个问题

这是解决方案：我测试了以下代码并且它有效。

模型.py

```
from django.db import models

class Ticket(models.Model):
    ticketnumber = models.IntegerField()
    total_amount = models.DecimalField(max_digits=7, decimal_places=2,
blank=True)

    def update_total_amount(self):
        total = 0
        for ti in self.ticketitem_set.all():
            total += ti.price * ti.amount
        self.total_amount = total
        self.save()

class TicketItem(models.Model):
    name = models.CharField(max_length=30)
    ticket = models.ForeignKey(Ticket)
    price = models.DecimalField(max_digits=7, decimal_places=2)
    amount = models.IntegerField()

#### admin.py
from django.contrib import admin
from tickets.models import Ticket, TicketItem

class TicketItemInline(admin.TabularInline):
    model = TicketItem

class TicketAdmin(admin.ModelAdmin):
    inlines = [TicketItemInline,]

    def save_formset(self, request, form, formset, change):
        instances = formset.save(commit=False)
        for instance in instances:
            instance.save()
        formset.save_m2m()
        instance.ticket.update_total_amount()

admin.site.register(Ticket, TicketAdmin) 
```

# html - 显示什么字体？

> ID：14684336
> 
> 赞同：0
> 
> 时间：2013-02-04T10:02:21.457
> 
> 标签：html, firefox, css, browser, fonts

> **可能重复：**
> [如何确定浏览器实际使用什么字体来呈现某些文本？](https://stackoverflow.com/questions/884177/how-can-i-determine-what-font-a-browser-is-actually-using-to-render-some-text)

我的 CSS 样式为“font-family: helvetica, arial, sans-serif;” 对于整个页面。看起来某些部分正在使用 Verdana。我需要以某种方式验证这一点。

我尝试从浏览器复制粘贴到 MS Word，但字体不是保存器。

是否有一些工具可以确定实际为页面或文本部分呈现哪种字体？

Firebug 给了我上面的字体列表，但我看不到确定正在使用哪种字体的方法。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-02-04T10:08:10.210

基本上，一个元素被设置为使用特定的字体。如果为元素设置的字体不存在，则采用父元素的字体。所以，他们所做的是测量渲染字符串的宽度。如果它与他们对所需字体的期望相匹配，而不是派生字体，那么它就存在。

这是我看到的地方：[Javascript/CSS 字体检测器（ajaxian.com；2007 年 3 月 12 日）](https://addons.mozilla.org/en-US/firefox/addon/4415/ "字体查找器")

此外，Firefox 的[FontFinder](https://addons.mozilla.org/en-US/firefox/addon/4415/ "字体查找器")插件完全符合您的要求。安装后，突出显示一个文本块，右键单击并转到 FontFinder -> 分析选择。它会告诉你实际使用的字体以及字体系列、间距、颜色等其他信息。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-02-04T10:04:09.113

是的，当然！您可以在 firefox 和 chrome 中使用 firebug 内置工具。

[http://getfirebug.com/enable](http://getfirebug.com/enable)

# php - 我可以合并名称保留为变量的数组吗？

> ID：14684344
> 
> 赞同：0
> 
> 时间：2013-02-04T10:02:58.910
> 
> 标签：php, arrays, merge

我有一个包含数组名称的数组

```
$names_array[] = ('$array1', '$array2', $array3'....) 
```

`$names_array[]`是动态更新的，因此它可能包含 2 个或更多不同的名称。

执行脚本时，`$names_array[]`需要合并列出的数组的值。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T10:08:00.950

我认为在合并的情况下这不是问题

你可以合并 $result = array_merge($array1, $array2);

[http://php.net/manual/en/function.array-merge.php](http://php.net/manual/en/function.array-merge.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T10:10:48.857

```
$names_array = array ('array1', 'array2', 'array3');

$array1 = array ('a','b','c');
$array2 = array ('d','e','f');
$array3 = array ('g','h','i');

$result = array ();
foreach ($names_array as $x) {
    $result = array_merge ($result, $$x);
}

print_r ($result); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-04T11:11:13.853

感谢您的帮助...我已经解决了这个问题：如果有人需要合并动态生成的数组，就我而言，我有六个存在或不存在的数组，所以我需要合并现有的数组。我所做的是：

```
if(!is_array($array1[$i])) $array1[$i]=array();
if(!is_array($array2[$i])) $array2[$i]=array();
if(!is_array($array3[$i])) $array3[$i]=array();
if(!is_array($array4[$i])) $array4[$i]=array();
if(!is_array($array5[$i])) $array5[$i]=array();
if(!is_array($array6[$i])) $array5[$i]=array();

$combineddata[$i]=array_merge($array1[$i], $array2[$i],$array3[$i],$array4[$i], $array5[$i], $array6[$i]); 
```

如果 'array_x[$i]' 不存在，array_merge 不会破坏脚本，只会合并空数组。

谢谢

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-04T10:11:29.060

我认为它可以用可变变量来完成。

```
$arraymerge = array();
foreach ($names_array as $arrayname)
    {
    $arraymerge = array_merge($arraymerge, ${$arrayname});
    } 
```

# php - 将具有 PHP 语法的文件放入变量中

> ID：14684353
> 
> 赞同：1
> 
> 时间：2013-02-04T10:03:35.917
> 
> 标签：php, file, variables

我搜索了一段时间，发现了如何使用以下方法将文件放入变量中：

```
file_get_contents() 
```

我将它用于电子邮件目的。但是当我看到这封电子邮件时，所有的`<php>`标签、函数和语法也都写成字符串。

如何解决这个问题？有没有一种方法可以将包含 php 语法的文件放入文件中，就像使用 codeigniter 一样`$this->load->view("[filename]", true)`？

**- 更新 -**

为了更清楚，我将添加我的代码。我将下面的代码放在名为 preview.php 的文件中，并使用 file_get_contents() 将其放入变量中，然后将其发送到电子邮件。

```
<tr>
        <td><span class="section-title">1\. </span></td>
        <td colspan="2"><span class="section-title">Course Chosen: <?php echo "Level ".$_POST['radioCourse'];?></span></td>
    </tr>
    <tr>
        <td>&nbsp;</td>
        <td colspan="2">
        <?php 
            if ($_POST['radioCourse'] == "1")
                echo $course[$_POST['dropLvl1Course']];
            else if ($_POST['radioCourse'] == "2")
                echo $course[$_POST['dropLvl2Course']];
            else if ($_POST['radioCourse'] == "3")
                echo $course[$_POST['dropLvl3Course']];
        ?>
        </td>
    </tr>
    <tr>
        <td><span class="section-title">2\. </span></td>
        <td colspan="2"><span class="section-title">Preferred Start Date and Time</span></td>
    </tr>
    <tr>
        <td>&nbsp;</td>
        <td width="200px">1st Choice:</td>
        <td><?php echo $_POST['date1stChoice']." ".$_POST['textTime1stChoice'];?></td>
    </tr>
    <tr>
        <td>&nbsp;</td>
        <td>2nd Choice:</td>
        <td><?php echo $_POST['date2ndChoice']." ".$_POST['textTime2ndChoice'];?></td>
    </tr> 
```

这是我电子邮件中的结果：

```
1\.  Course Chosen:
    if ($_POST['radioCourse'] == "1")
    echo $course[$_POST['dropLvl1Course']];
    else if ($_POST['radioCourse'] == "2")
    echo $course[$_POST['dropLvl2Course']];
    else if ($_POST['radioCourse'] == "3")
    echo $course[$_POST['dropLvl3Course']];
?>
2\.  Preferred Start Date and Time
    1st Choice:     
    2nd Choice: 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T10:06:22.637

尝试这个：

```
ob_start();
include 'filename.php';
$filename = ob_get_clean(); 
```

如果您的脚本中已经有与输出缓冲相关的代码，它可能不起作用。

# java - 如何为 Hibernate 返回两个实体编写 jstl 代码

> ID：14684358
> 
> 赞同：0
> 
> 时间：2013-02-04T10:04:08.707
> 
> 标签：java, spring, hibernate, jstl, hibernate-mapping

我有一个如下所示的休眠代码，它返回单个实体类：

```
SQLQuery query = 
                session.createSQLQuery("select * from Employee");
            query.addEntity(Employee.class);
                       List<Employee> emplist= query.list(); 
```

对于上面的代码，我的 Jstl 工作代码是：

```
<c:choose>
<c:when test="${requestScope.size!=0}">
<table border="1">
<tr>
<th>
EmployeeName
</th>
<th>EmployeeDepartment</th>

</tr>
<c:forEach items="${requestScope.absentlist}" var="emps">
<tr>
<td><c:out value="${emps.empno}"/></td>
<td><c:out value="${emps.empname}"/></td>

</tr>

</c:forEach> 
```

**但我的要求是为返回两个实体的休眠编写一个 jstl 代码**

这是我的休眠代码：

```
SQLQuery query = session
                    .createSQLQuery("CALL AbsentReportproc(:_fromdate,:_todate)");
            query.addEntity(Master.class);
            query.addEntity(DateRange.class);
            query.setParameter("_fromdate", "2012-12-03");
            query.setParameter("_todate", "2012-12-04");

            List<RecordSet> obj = query.list();     
            Iterator it=obj.iterator();

             while(it.hasNext())
                {
                    Object[] obj1 = (Object[]) it.next();
                    for (int i = 0; i < obj1.length; i++) {

                        RecordSet set=(RecordSet)obj1[i];
                        if(set instanceof Master){
                         System.out.println("Employee Code"+((Master) set).getEmpcode());
                         System.out.println("Employee Dept"+((Master) set).getDept());
                         System.out.println("Employee Name"+((Master) set).getEmpname());                   
                        }
                        if(set instanceof DateRange){
                         System.out.println("AbsentDate"+((DateRange) set).getDdate());
                        }
                    }
                } 
```

任何人都可以提供 JSTL 代码来在 jsp 页面上显示上述结果吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T10:33:34.783

所以你实际上有一个`List<Object[]>`, 并且`Object[]`列表中的每个都包含一个 Master 的实例作为它的第一个元素，以及一个 DateRange 的实例作为它的第二个元素。

首先编写一个包含这两个对象的类，这将使您的代码更易于阅读：

```
public class MasterAndDateRange {
    private Master master;
    private DateRange dateRange;
    // constructor and getters omitted for brevity
} 
```

然后遍历你的`List<Object[]>`并创建一个`List<MasterAndDateRange>`.

然后将此列表存储在请求属性中（`"listOfMasterAndDateRange"`例如）。

然后，在 JSP 中，使用 JSTL 迭代这个列表：

```
<c:forEach var="masterAndDateRange" items="listOfMasterAndDateRange">
   ...
   <c:out value="${masterAndDateRange.master.foo}"/>
   ...
   <c:out value="${masterAndDateRange.dateRange.bar}"/>
   ...
</c:forEach> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T12:17:35.663

根据您的代码，您正在调用存储过程，而不仅仅是单表查询。因此休眠将只返回对象列表。

您需要迭代循环并填充所需的对象。

@JB Nizet 建议的其他选项。

# django - 在日期时间范围内查找对象

> ID：14684360
> 
> 赞同：0
> 
> 时间：2013-02-04T10:04:12.890
> 
> 标签：django, django-models

假设我有modelL；

```
class MyModel(...):
    start = models.DateTimeField()
    stop = models.DateTimeField(null=True, blank=True) 
```

我还有两条记录：

> 1.  开始=2012-01-01 7:00:00 停止=2012-01-01 14:00:00
> 2.  开始=2012-01-01 7:00:03 停止=2012-01-01 23:59:59

现在我想找到第二个查询，所以开始日期时间应该在开始和停止之间，停止时间应该是 23:59:59。如何进行这样的查询？

更多信息：

我认为这需要 F 对象。我想查找开始 -> 时间在另一个开始 -> 时间和停止 -> 时间之间的所有记录，并且停止 -> 时间是 23:59:59，并且日期与开始中的相同

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T10:20:31.350

你可以使用[range](https://docs.djangoproject.com/en/dev/ref/models/querysets/#range)和[extra](https://docs.djangoproject.com/en/dev/ref/models/querysets/#extra)：

```
from django.db.models import Q
q1 = Q( start__range=(start_date_1, end_date_1) ) 
q1 = Q( start__range=(start_date_2, end_date_2) )
query = (''' EXTRACT(hour from end_date) = %i 
         and EXTRACT(minute from end_date) = %i 
         and EXTRACT(second from end_date) = %i''' % 
         (23, 59,59)
        )

MyModel.objects.filter( q1 | q2).extra(where=[query]) 
```

注意：在硬回答要求更改“时间为 23:59:59，日期与开始时相同”之前发布

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T10:13:02.570

执行查询：“开始日期时间应该在开始和停止之间”

```
MyModel.objects.filter(start__gte=obj1.start, start__lte=obj1.stop) 
```

不过，我不太明白你的第二个条件。您是否希望它仅匹配时间为 23:59:59 的对象，但匹配任何一天？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-04T10:16:22.603

```
dt = '2012-01-01 8:00:00'
stop_hour = '23'
stop_minute = '59'
stop_sec = '59'

where = 'HOUR(stop) = %(hour)s AND MINUTE(stop) = %(minute)s AND SECOND(stop) = %(second)s' \
        % {'hour': stop_hour, 'minute': stop_minute, 'seconds': stop_ec}

objects = MyModel.objects.filter(start__gte=dt, stop__lte=dt) \
                         .extra(where=[where]) 
```

# c++ - 负 RGB 值

> ID：14684362
> 
> 赞同：1
> 
> 时间：2013-02-04T10:04:16.913
> 
> 标签：c++, opencv

如何可视化负 RGB 值？
根据 OpenCV 文档：
CV_8S - 8 位有符号整数（-128..127）
是否意味着 -128 表示 0 和 127 表示 255？
如果是，那么为什么我们需要
CV_8U - 8 位无符号整数（ 0..255 ）？
如果我的问题微不足道，我很抱歉。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-04T10:06:09.170

-1 与 255 相同，-2 与 254 相同，-3 与 253 等 -128 与 128 相同。正数相同 - 有符号无符号。

您应该阅读有[符号和无符号整数](http://en.wikipedia.org/wiki/Integer_%28computer_science%29)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T10:22:18.770

8 位有符号值用于像素计算的一个可能原因是需要在 YUV、YCrCb 或其他具有色度的模式中表示 RGB 颜色。色度通道被编码为绿色-蓝色和绿色-红色或绿色-黄色、红色-蓝色等的差异，以简化答案。这个范围也有负值。

# java - 打印数组中的最小数字（Java）

> ID：14684369
> 
> 赞同：-2
> 
> 时间：2013-02-04T10:04:33.870
> 
> 标签：java, arrays

虽然我看到了一些关于同一主题的问题，但它们对我的情况还不够具体。

```
import java.util.*;
public class Kap3Oppg5 {
public static void main(String[] args) {
    int x = 0;
    int tabell[] = new int[10];
    int heltall;
    Scanner in = new Scanner(System.in);
    int minstetall = tabell[0];

    while (x < 10) {
        System.out.println("Tast inn neste tall:");
        heltall = in.nextInt();
        tabell[x] = heltall;
        x = x + 1;
    }

    for (int i=0;i<tabell.length;i++) {
        if (tabell[i] < tabell[0])
            minstetall = tabell[i];

    }
    System.out.print(minstetall);
}

} 
```

为什么这不是打印最低数字？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-04T10:06:29.483

if 中的测试总是针对数组中的第一个元素进行测试。您可能希望根据迄今为止找到的最低数字对其进行测试：

```
if (tabell[i] < minstetall) { ... 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-04T10:06:39.243

因为每次您都在与数组的第一个元素进行比较。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-04T10:07:01.620

您的比较`if (tabell[i] < tabell[0])`是错误的，应该是：

```
if (tabell[i] < minstetall) 
```

您正在与第一个元素进行比较。**目前，如果您的数组的第一个元素偶然包含最小值，那么您将获得正确的结果**，否则当前代码将失败。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-02-04T10:07:05.163

这是因为在这一行中，您正在比较错误的东西：

```
if (tabell[i] < tabell[0]) 
```

应该

```
if (tabell[i] < minstetall) 
```

# javascript - 在 jQuery 中确定 :input 类型

> ID：14684374
> 
> 赞同：2
> 
> 时间：2013-02-04T10:04:47.293
> 
> 标签：javascript, jquery

我在所有表单元素上运行 .each() 循环。我找不到确定输入类型的方法（无论是复选框、文本、选择、文本区域等......）。

有任何想法吗？

```
 // When submitting
$("input[name='event_form_submit']").click(function() {
    $("form[name='tepg_form_processor'] :input").each(function() {
        console.log($(this).attr("type"));
       // Determine whether this is a select, input etc?
    });
    return false;
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T10:20:26.543

```
$("form[name='test'] :input").each(function() {
    if(this.tagName == "INPUT") {
        console.log(this.tagName + ": " + this.type);
    }
    else 
        console.log(this.tagName);
}); 
```

小提琴：http: [//jsfiddle.net/samliew/YSsvp/8/](http://jsfiddle.net/samliew/YSsvp/8/)

[可用的输入元素类型](https://developer.mozilla.org/en-US/docs/HTML/Element/Input)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-04T10:24:34.747

我建议：

```
$("form[name='test'] :input").each(function() {
    /* gets the type of the element ('checkbox','text','radio', etc
       if there's no 'type' then it retrieves the tagName of the
       element instead 'select','textarea', etc */
    var inputType = this.type || this.tagName.toLowerCase();
    console.log(inputType);
    /* then does uses a switch to do something depending
       on what you want to do */
    switch (inputType) {
        case 'text':
            // do something with text-inputs
            break;
        case 'radio':
            // do something with radio-inputs
            break;
        case 'select':
            // do something with select-elements
            break;
        // ...etc...
        default:
            // do something with other elements, element-types
            break;
    }
}); 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/qpY34/)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-04T10:35:00.803

[试试这个（jsfiddle）：](http://jsfiddle.net/zaheerahmed/YSsvp/9/)

```
$("form[name='test'] :input").each(function() {
    alert(this.type);
}); 
```

# python-2.7 - LZ77压缩

> ID：14684387
> 
> 赞同：0
> 
> 时间：2013-02-04T10:05:17.690
> 
> 标签：python-2.7, compression

> **可能重复：**
> [LZ77 压缩划痕](https://stackoverflow.com/questions/14685118/lz77-compression-scratch)

我正在构建 LZ77 压缩。我已将整个文件作为单个字符串读取并尝试对其进行压缩。还有其他方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T10:16:06.220

假设“放气”是“lz77”的意思，是的，有。您可以创建`Compress`对象，然后`compress`在其上调用多次方法。更多在这里（搜索`Compress.compress(string)`）：

[http://docs.python.org/2/library/zlib.html](http://docs.python.org/2/library/zlib.html)

# vba - 添加序列号而不考虑行删除或插入

> ID：14684388
> 
> 赞同：1
> 
> 时间：2013-02-04T10:05:29.867
> 
> 标签：vba, excel

我请求您帮助解决我在以下代码中的一个小改动的问题。我有插入行的代码，同时插入行我还想添加序列号，就像 1,1.1,1.2 和 1.3....

添加序列号的工具中已经提到了下面的代码，有人可以告诉我如何调整代码以实现 1,1.1,1.2 格式的序列号，如果删除或插入行，则应添加序列号基于先前序列号的 0.1 值

```
dim m as integer
m = 0
Application.WorksheetFunction.Max(.Columns(columnidCol))
.Cells(r, columnidCol).Value = m + 1 
```

上面的代码将值设为 1，当我插入行时，“columnidcol”派生自公开声明的常量，如下所示

```
Public Const numberoneCol As Integer = 2
Public Const columnidCol As Integer = numberoneCol 
```

请帮我修改上面的代码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T10:14:44.877

您可以将序列号存储在`ThisWorkbook.CustomDocumentProperties`：

```
ThisWorkbook.CustomDocumentProperties.Add Name:="SerialNumber", Type:=msoPropertyTypeString
....
ThisWorkbook.CustomDocumentProperties("SerialNumber").Value = ThisWorkbook.CustomDocumentProperties("SerialNumber").Value + 1
....
dim m as integer
m = ThisWorkbook.CustomDocumentProperties("SerialNumber").Value
.Cells(r, columnidCol).Value = m + 1 
```

# ssas - 检查数据库中是否存在某个键

> ID：14684389
> 
> 赞同：1
> 
> 时间：2013-02-04T10:05:31.343
> 
> 标签：ssas, ssas-2008, adomd.net

我保存了某些 MDX 查询并使用 ADOMD.NET 运行它们。我得到了 CellSet 并将其转换为数据集。所有这一切都很好。现在数据库团队已经改变了立方体结构。他们更新了 DimesnionName、属性名称等。一些维度被重命名，一些被删除。因此，我无法运行我保存的查询。我想创建一个控制台应用程序，它将获取键列表（[DimensionName].[AttributeName] 或 [DimensionName].[AttributeName].[MemeberName] 格式），它会告诉我以下键不存在。

请让我知道这是否可以通过编程方式实现。我不想手动检查它。

请分享一个链接或代码，这将帮助我实现这一目标。

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T17:17:07.470

如果您已经在使用 ADOMD，这应该没问题，只需使用元数据查询：

[http://msdn.microsoft.com/en-us/library/ms123485.aspx](http://msdn.microsoft.com/en-us/library/ms123485.aspx)

或者，AMO 很好[http://msdn.microsoft.com/en-us/library/microsoft.analysisservices.aspx](http://msdn.microsoft.com/en-us/library/microsoft.analysisservices.aspx)

我在 SSIS 中使用它进行处理，您可以在 .Net 中轻松使用它来测试元素的存在：

```
using Microsoft.AnalysisServices;

...

Server server = new Server();
server.Connect(cubeConnectionString);
Database database = server.Databases.FindByName(databaseName);
Cube cube = database.Cubes.FindByName(cubeName);

foreach (MeasureGroup measureGroup in cube.MeasureGroups)           
{
  foreach (Partition partition in measureGroup.Partitions)
  {
  ...
  }
}

foreach (CubeDimension cubeDimension in cube.Dimensions)
{
  Dimension dimension = cubeDimension.Dimension;
  var dimName = dimension.Name;
  ...
} 
```

为您需要的所有元素提前找到名称可能是困难的部分（并保持所有最新）。

在多维数据集上触发所有查询并尝试捕获“没有这样的事情”响应不是更容易吗？

# mysql - INNODB 的 Mysql 性能问题

> ID：14684390
> 
> 赞同：0
> 
> 时间：2013-02-04T10:05:33.900
> 
> 标签：mysql, linux, performance

我的 linux 网络服务器上的一些数据库有一个非常奇怪的性能问题。第一的：

*   问题出现在不同的 INNODB 表中
*   表中只有 10 - 15000 个条目
*   正确索引
*   一天只发生一次或两次

以下查询非常慢（只是不时）：

```
UPDATE t_contentlocks 
SET  lastaccess = NOW(),  has_write_access = '1'  
WHERE id = '10' 
```

字段“id”是主要的（整数），表有大约 20 个条目。如何处理这样的查询需要 30 秒？此时没有其他查询。看起来/感觉 mysql 服务器进入了某种休眠模式，现在需要时间再次唤醒。通常这个查询需要不到 0.00001 秒。

有人有同样的问题/有什么解决办法吗？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T10:12:15.643

你做查询`id = '10'`，id是一个int。每次运行查询时，id 都将转换为 varchar，并且 indez 将不是用户。所以这样做会快得多：

```
WHERE id = 10 
```

现在索引将是用户，我不确定它是否会解决您的 30 秒问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T10:15:23.037

除了对等答案之外，您还可以检查对查询的分析，然后通过查看查询执行需要更多时间的位置来做出正确的决定。

```
 SET PROFILING=1;
UPDATE t_contentlocks 
SET  lastaccess = NOW(),  has_write_access = '1'  
WHERE id = '10';
show profile for QUERY 1; 
```

# javascript - 有没有办法获得任何 CSS 颜色的十六进制值？

> ID：14684393
> 
> 赞同：4
> 
> 时间：2013-02-04T10:05:49.687
> 
> 标签：javascript, css

## 真正的问题

编写一个函数，从任何 CSS 颜色或类定义的颜色返回颜色值

## 初始配方

我想知道传递给我的函数的参数中的字符串是否是一种颜色 - 只回答已经很好了 - 然后知道它的十六进制值。

所以我定义了一个正则表达式来确定字符串是否类似于`#fff`or `rgb(0,0,0)`，但它不捕获 CSS 标准颜色，例如`black`and `white`。我应该测试每种颜色名称还是有任何方法或预先存在的功能可以做到这一点？谢谢。

## 个人使用的解决方案

*   如果您想要以点开头的类名，例如“.myClass”

```
function getColor(classOrColor) {
    if(classOrColor[0] === '.') {
      var temp = $('<div id="temp" style="display:none;" class="'+ classOrColor.split('.').join(' ') + '"/>').appendTo('body');
      var color = temp.css('color');
      temp.remove();
      return color;
    } else {
      return classOrColor;
    }
  } 
```

使用示例：

```
getColor('yellow')
getColor('#abc')
getColor('rgb(1,2,3)')
getColor('.myClass .myOtherClass') 
```

## 基于mplungjan的答案的解决方案

*   如果您想要简单的类名，例如“myClass”

使用此答案搜索是否存在具有此名称的类：[https://stackoverflow.com/questions/983586/...](https://stackoverflow.com/questions/983586/how-can-you-determine-if-a-css-class-exists-with-javascript)

然后调用相同的函数（稍作修改）

```
function getColor(classOrColor) {
    if(classExists(classOrColor)) {
      var temp = $('<div id="temp" style="display:none;" class="'+ classOrColor + '"/>').appendTo('body');
      var color = temp.css('color');
      temp.remove();
      return color;
    } else {
      return classOrColor;
    }
  } 
```

使用示例：

```
getColor('#abc')
getColor('myClass') 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-04T10:10:37.240

您可以使用 [getComputedStyle](https://developer.mozilla.org/en-US/docs/DOM/window.getComputedStyle) - 这不适用于 IE8 及以下版本。

请参阅[Javascript 函数的答案，以将颜色名称转换为十六进制代码](https://stackoverflow.com/questions/1573053/javascript-function-to-convert-color-names-to-hex-codes)，以获得比我更好的覆盖范围（在我写完后看到）

[演示](http://jsfiddle.net/mplungjan/t7xQj/)

```
function getRGB(str){
    var elem = document.createElement("div");
    elem.style.display="none";
    elem.style.color=str;
    document.body.appendChild(elem);
    return  window.getComputedStyle(elem,null).getPropertyValue("color");
  }
alert(getRGB("red")); 
```

# c# - 混合 C# + WPF / C++ 应用程序中的资源管理

> ID：14684394
> 
> 赞同：1
> 
> 时间：2013-02-04T10:05:49.687
> 
> 标签：c#, .net, wpf, resources, resourcedictionary

我正在使用 C# 和 WPF 开发一个 Windows 应用程序。该应用程序具有数字运算组件和一个 C++ 编写的渲染组件，并使用 C++/CLI 进行互操作，因此大部分应用程序逻辑都在 C# 部分。

现在我想知道如何处理资源管理。各种组件需要资源，WPF gui 需要它的 XAML 图标等，渲染器需要纹理，数字运算库也需要一些特定的数据。

[WPF 使用 XAML 和ResourceDictionary](http://msdn.microsoft.com/en-us/library/system.windows.resourcedictionary.aspx)提供了一种特定的资源管理方式。由于所有 C++ 代码都包装在 C++/CLI 中，据我所知，这可以从包装器中访问。

我想在我的应用程序中进行统一的资源管理，所有组件都使用相同的代码来加载其数据。

**使用 WPF ResourceDictionary 进行应用程序范围的资源管理时有哪些优点和缺点？**

**我必须有哪些替代方案才能获得统一的资源处理（可从 WPF 使用）**

# android - 如何连接到在 android 模拟器中运行的 http 服务器？

> ID：14684411
> 
> 赞同：6
> 
> 时间：2013-02-04T10:06:40.307
> 
> 标签：android, android-emulator

我有一个 HTTP 服务器在我的 android 模拟器上工作，监听端口 8080。如何从同一台 PC 的浏览器连接到它？我试过 127.0.0.1 但它无法连接。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-02-04T10:10:09.897

您必须在 中启用端口转发`adb`。例如：

```
adb forward tcp:8080 tcp:8080 
```

这会将传入到*localhost* TCP/8080 的连接转发到模拟器 TCP/8080。

[这](http://developer.android.com/tools/help/adb.html)是参考。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-04T10:09:05.483

您可以使用 10.0.2.2 访问您的实际机器，它是为帮助开发而设置的别名。

# c# - 编写时如何压缩xml文件

> ID：14684412
> 
> 赞同：0
> 
> 时间：2013-02-04T10:06:43.007
> 
> 标签：c#, asp.net, xml

我正在编写一个大小超过 1GB 的 XML 文件，但在撰写本文时，我想压缩该文件，以便减小 xml 文件的大小，以便`xmlDoc.Load(fileName)`在最短的时间内加载文件。我编写 XML 文件的代码是

```
 using (FileStream fileStream = new FileStream(_logFilePath, FileMode.OpenOrCreate, FileAccess.ReadWrite, FileShare.ReadWrite))
                {
                    xmlDoc.Load(fileStream);
                    int byteLenght = fileStream.ReadByte();
                    byte[] intBytes = BitConverter.GetBytes(byteLenght);
                    intBytes = Compress(intBytes);
                    xmlDoc.DocumentElement.AppendChild(newelement);
                    fileStream.SetLength(0);
                    xmlDoc.Save(fileStream);
                } 
```

也用于压缩

```
private static byte[] Compress(byte[] data)
        {
            byte[] retVal;
            using (MemoryStream compressedMemoryStream = new MemoryStream())
            {
                DeflateStream compressStream = new DeflateStream(compressedMemoryStream, CompressionMode.Compress, true);
                compressStream.Write(data, 0, data.Length);
                compressStream.Close();
                retVal = new byte[compressedMemoryStream.Length];
                compressedMemoryStream.Position = 0L;
                compressedMemoryStream.Read(retVal, 0, retVal.Length);
                compressedMemoryStream.Close();
                compressStream.Close();
            }
            return retVal;
        } 
```

但它不适用于压缩文件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T16:34:44.920

压缩磁盘上的文件不会大大改善加载文档所花费的时间，因为大部分时间用于为 XmlDocument 构建对象图。它太慢了，以至于它可能需要与从磁盘读取未压缩的 XML 一样长（或更长）的时间。虽然压缩在这里可以节省时间，但如果使用像内部硬盘这样的快速媒体，它只是一个很小的收获。

如果您想提高处理大型 XML 文件的性能，您需要使用像 XmlReader 这样的东西来流式传输文件，而不是一次加载所有文件。

# svn - 将未版本化的外部内容抓取到 svn check-out

> ID：14684414
> 
> 赞同：0
> 
> 时间：2013-02-04T10:06:48.180
> 
> 标签：svn, tortoisesvn, svn-externals

我希望这个问题能说得通。我通常使用 svn externals 从另一个 svn 签入中获取版本化项目。这不是我所追求的。我们有许多 .dll 和许多来自第三方提供商的源文件，我们不想签入到我们的 svn。

所以我的问题是，当我们从 svn 签出时，有没有办法自动抓取这些文件？最好只第一次？有没有办法附加一个脚本在乌龟上执行以获取未版本控制的文件等？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T11:20:40.020

对于 TortoiseSVN，您可以编写和使用客户端钩子（可以执行任何操作，与 Subversion、存储库和工作副本直接无关）

更新后挂钩可能是不错的选择

# tomcat - 端口 80 中的 Tomcat SSL

> ID：14684416
> 
> 赞同：0
> 
> 时间：2013-02-04T10:06:57.587
> 
> 标签：tomcat, ssl

我已经在端口 443 的 tomcat 中配置了 SSL，并且自动将 URL 重定向从 80 端口到 443。我也在 web.xml 中做了必要的配置。它工作正常。但是我必须在端口 80 本身中使用 SSL，我必须避免端口 443 显示在看起来很奇怪的 URL 中。

我的应用程序应该是这样的...... [https://sub.example.com/myapp](https://sub.example.com/myapp)而不是[https://sub.example.com:443/myapp](https://sub.example.com:443/myapp)

帮助表示赞赏！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T10:08:16.520

你犯了一个错误。我认为使用默认的 HTTPS 端口并专注于更改 URL 显示是一个更好的主意。否则，您可能会遇到更喜欢标准规则的防火墙问题。

[谷歌搜索](http://www.google.com/search?q=hiding%20port%20number%20in%20URL%20java&rlz=1C1CHFX_enUS464US464&oq=hiding%20port%20number%20in%20URL%20java&sourceid=chrome&ie=UTF-8)“在 URL java 中隐藏端口号”带来了很多结果，包括这个：

[http://www.coderanch.com/t/496635/Tomcat/Hiding-port-number-URL](http://www.coderanch.com/t/496635/Tomcat/Hiding-port-number-URL)

# php - PHP“未选择数据库”

> ID：14684417
> 
> 赞同：1
> 
> 时间：2013-02-04T10:06:59.330
> 
> 标签：php, html, mysql

我最近开始用 PHP 创建一个网站。我的大部分代码都在工作，但是我发现了一个我无法纠正的问题。

我有一个页面，其中有很多对数据库的调用。在我的页面顶部，我正在连接并使用 SELECT 来获取有关相关产品的一些信息。

在页面底部，我再次连接以获得对相关产品的评论。

我的代码很长，所以我很难在这里展示，但这段代码的基础如下：

```
PHP CODE
  SELECT's
  UPDATE's

HTML
  TABLE's
  IMAGE's
  ect...

PHP
  SELECT's 
```

当我第一次加载页面时，我的代码成功运行了我的所有代码，但是当我单击按钮更新表格（在代码的顶部）时，更新被处理，但是页面底部的注释部分带回以下错误：

> “没有选择数据库。”

页面顶部和底部的选择都连接到同一个数据库和同一个表。在我单击更新按钮之前，带回错误的评论部分也可以正常工作。

我的代码说发生错误的代码是：

```
$commResult = mysql_query("SELECT u.id, u.USERNAME, c.COMMENT, c.DATE_ADDED, c.ACTIVE FROM USERS u, COMMENTS c WHERE c.box_id = $boxId ORDER BY c.DATE_ADDED DESC") or die (mysql_error());;

while ($row = mysql_fetch_array($commResult))
{
     //Do processing here.
} 
```

我的数据库连接代码。这是在一个单独的文件中，我使用 require_once(config.php); 在我的代码需要连接到数据库的每个页面的顶部调用它。

```
$username = "user";
$password = "password";
$hostname = "localhost"; 

//connection to the database
$dbhandle = mysql_connect($hostname, $username, $password) 
or die("Unable to connect to MySQL");

//select a database to work with
$selected = mysql_select_db("databasename",$dbhandle) 
or die("Could not select databasename"); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-04T10:09:08.080

我相信您可能会在脚本顶部打开一个 MySQL 连接，关闭它并重新打开它，而不会忘记选择数据库。

如果您使用的是旧的 mysql_ 函数（您不应该再将其用于新代码，请查看[MySQLi](http://www.php.net/manual/en/book.mysqli.php)和[PDO](http://www.php.net/manual/en/book.pdo.php)），那么您可能已经忘记了这行代码：

```
mysql_select_db("databaseName"); 
```

或者，如果您使用的是“原始查询”，您可能会错过这一行：

```
mysql_query("USE databaseName"); 
```

尽管在同一个脚本上可能不值得关闭数据库连接，但在整个脚本中保持打开状态可能是一个更好的主意。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-04T10:10:45.497

你打电话`mysql_select_db("Your Database Name")`还是`mysql_query("Your Database Name", "Query")`？

是的，你最好不要使用mysql，而是使用mysqli。

# c++ - 关于 c++ 中的结构填充

> ID：14684422
> 
> 赞同：1
> 
> 时间：2013-02-04T10:07:15.177
> 
> 标签：c++, visual-studio-2008

我在我的项目中使用数据结构，并且在特定结构的上下文中，我对结构填充有疑问。首先看下面给出的结构。我使用 Visual Studio 2008 编译器。

```
typedef struct tagDATA_PACK
{
   DWORD dDataLength;
   BYTE bFlags;
   BYTE bAttrib;
   BYTE bOffset;
}DATA_PACK; 
```

问题1：上述结构的尺寸是多少？它显示 8 个字节。它是正确的。但，

考虑下面给出的修改结构？

```
typedef struct tagDATA_PACK
{
   DWORD dDataLength;
   BYTE bFlags;
}DATA_PACK; 
```

这里的大小与上面的 8byte 结构相同。我的疑问是，编译器会在哪里添加额外的 3 个字节？它是在 BYTE bFlags 之后还是之前？

非常感谢您的所有回答。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-04T10:10:06.270

标准未指定结构和类的对齐和填充。这完全取决于编译器。但是，所有健全的编译器都遵循底层平台 ABI。在您的情况下，平台是 Windows，并且遵循 Windows 平台 ABI。

在这种情况下，两个结构的填充都在最后一个成员之后。第一个结构有一个额外的填充字节，第二个结构有三个额外的填充字节。

结构中最大的类型大小为 4。这意味着总大小将是 4 的倍数。对于这两个结构，容纳该结构的 4 的最小倍数是 8。

每种数据类型都有一个对齐属性。4 字节数据类型的对齐方式为 4。2 字节数据类型的对齐方式为 2。对齐方式为 4 的类型在放置在距离结构开头的 4 字节偏移处时对齐。对齐为 2 的类型在放置在距离结构开头 2 字节偏移处时对齐。等等。

成员被放置在尊重成员声明顺序和成员对齐属性的最小偏移量处。

对于结构内部具有填充的示例，请考虑此结构

```
struct MyStruct
{
   char c;
   int i;
}; 
```

的对齐方式`c`是1， 的对齐方式`i`是4。所以，`c`放在1 字节的边界上，`i`必须放在4 字节的边界上。这意味着`c`它将具有偏移量 0，然后将有 3 个填充字节，然后`i`将在偏移量 4 处布局。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-04T10:10:58.803

编译器想要的任何地方。如果它很重要，那么无论如何你都在做一些不可移植的事情，那为什么重要呢？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-04T10:48:49.290

虽然所有关于编译器的答案都是正确的，因为这取决于编译*器*，语言规范对布局设置了一些限制。这些限制适用于 C 中的所有结构、C++03 中的“普通旧数据”（基本上意味着仅使用 C 中的功能）和 C++11 中的“标准布局”结构（允许具有构造函数和析构函数）。限制是：

*   （重新解释-）将指向结构的指针转换为第一个成员的类型会产生指向第一个成员的有效指针（C++11 §9.2/20）。这意味着在第一个成员之前不能有填充。
*   如果联合中的两个结构具有相同的初始部分（相同类型的成员以相同的顺序）并且联合通过其中一个初始化，则可以通过另一个访问这些初始成员（C++11 §9.2/19 ）。这意味着成员偏移量可能只取决于在它之前声明的成员。

对标准布局的限制很重要。对于具有基类或虚拟成员的类也不成立。

现在，当结合不浪费内存的愿望时，这实际上只剩下一种实用的算法，因此所有编译器都使用它。这并不意味着所有编译器都会为相同的输入生成相同的布局，因为各种原始类型的大小和对齐要求因平台而异。算法是：

*   在偏移量 0 处布置第一个成员。
*   Lay out each following member at first available offset divisible by it's required alignment.
*   Round the size of the structure up to the next multiple of largest alignment of any member.
*   Alignment requirement of the structure is the largest alignment of any member.

(I am almost certain MSDN for MSVC++ describes this somewhere, but couldn't quickly find it)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-04T10:39:51.683

看看这个：

```
typedef struct myTagDATA_PACK3
{
    char c;
    double d;
    int i;
}DATA_PACK3; 
```

* * *

它显示 24 个字节。即：双：8字节。int：4 字节 +（4 字节填充）= 8 字节。字符：1 字节 +（7 字节填充）= 8 字节。

* * *

总计：24 字节。

# php - 无法在商品描述编辑器中编写 javascript、php 和 css

> ID：14684425
> 
> 赞同：0
> 
> 时间：2013-02-04T10:07:28.613
> 
> 标签：php, joomla1.5, virtuemart

在商品描述编辑器中不能编写任何脚本和 php 代码。我已经尝试使用 sourcerer 和 DirectPHP 插件，但两者都不适合我。我使用的是Joomla1.5.23 版本，而德德玛特版本是1.1.8。. 请尽快给出解决方案。

# facebook - 未登录 Facebook 的用户未显示粉丝页面的外部赞按钮

> ID：14684426
> 
> 赞同：1
> 
> 时间：2013-02-04T10:07:30.080
> 
> 标签：facebook, facebook-like

我试图在我们的主网站上添加 FB Like，但链接（并因此显示喜欢）到我们在 FB 上的粉丝页面。起初一切看起来都还不错，但几天后奇迹开始发生。按钮开始时不时地消失......（产品页面上的其他喜欢一直都很好）。

我挖了网。看起来很多人都有这个问题。首先，我发现我错过了按钮生成器中神秘的“第 2 步”（开发 FB UX 中的明显缺陷 - 就像 ATM 首先给钱，然后是你的卡）。将 og 的元数据添加到我的网站。依然没有。

我仔细检查了一切。一切似乎都很好。最终，我稍微确定了这个问题。当我登录 FB 时，FB Like 总是出现，但只有在我退出时才会消失（但并非总是如此）。但是今天甚至 FB Like Generator 也停止显示我的粉丝页面的按钮。我可以输入 Internet 上任何页面的 URL，这没问题，但是当我输入我的粉丝页面的 URL 时 - 按钮就消失了……太令人沮丧了。

我放弃了，开始写这个问题给你，然后它给了我！找到了解决方案！有时总结所有事实很好：] 我把这个问题留给其他 FB OG 的流浪者。

只是为了好玩-请在我发布解决方案之前发布您的答案。我想知道是只有我一个人，还是对你们大多数人来说是个谜：]

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T15:13:21.927

问题在于粉丝页面国家限制设置。由于垃圾邮件机器人占用了广告预算，管理员将此粉丝页面限制为仅对某些国家/地区可见。我的国家（波兰）包含在该列表中，所以当我登录时，FB 知道我来自波兰并显示按钮。当我注销时，FB 选择了最近的服务器位置或其他不在受限国家列表中的默认位置，并过滤掉了 Like 按钮。呃……

最糟糕的是，FB 没有提供任何控制台输出说“您无权查看此页面”。

啊。解决方案 - 删除国家限制。使用黑名单而不是白名单；]

# php - 通过 PHP 以 mysql BLOB 类型存储的图像，需要一些帮助来显示图像

> ID：14684432
> 
> 赞同：0
> 
> 时间：2013-02-04T10:07:37.220
> 
> 标签：php, mysql, blob

php

```
include("connect_to_database.php");

if( !isset($_FILES["image"]) ){

echo "upload the file";

}else{
$image = mysql_query("SELECT * FROM upload WHERE id=1");
$image = mysql_fetch_assoc($image);
$image = $image["image"]; 
echo $image;
} 
```

html

```
<form action="newindex.php" method="POST" enctype="multipart/form-data">
<input type="file" name="image" />
<input type="submit" value="Upload" >
</form> 
```

上面的代码显示了已经以 BLOB 格式上传到 mysql 中的相应 id 的图像。

现在，我需要显示最后 6 个 id 的图像或数据库中的所有图像。我已经尝试了下面的代码，但它不起作用，而是显示 1 张图像。

php

```
include("connect_to_database.php");<br>

$query = mysql_query("SELECT * FROM upload ORDER BY id DESC");

while( $rows = mysql_fetch_array($query) ){
$image = $rows["image"]; 
header("Content-type: image/jpeg");
echo $image."<br/>";
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T10:14:10.620

您不应该将多个图像输出到相同的响应中。网络浏览器不会期望/理解第一个图像之后的另一个图像，就像将两个 jpg 文件复制到同一个文件中一样在桌面上不起作用。

相反，创建另一个（动态）页面，其中包含指向图像的所有链接 ( `<img src="img.php?id=3">`)。然后，Web 浏览器将一次请求一个图像。

```
$id = (int)$_REQUEST['id'];
$query = mysql_query("SELECT * FROM upload WHERE id=$id"); 
```

（请注意，与上面类似的代码确实不安全，永远不要在任何公共环境中的 SQL 查询中直接使用输入值。我还建议使用 PDO 代替执行查询）。

# python - Openerp 调度程序方法：IndexError：列表索引超出范围

> ID：14684433
> 
> 赞同：0
> 
> 时间：2013-02-04T10:07:40.323
> 
> 标签：python, openerp

我在 Openerp 中创建了一个模块，它有以下文件： [http ://pastebin.com/91RLuTQh](http://pastebin.com/91RLuTQh)

它可以工作，我将 _start_syncro 方法放入了调度程序中，但是每当我尝试运行它时都会出现一个奇怪的错误：

```
2013-02-04 10:01:40,658 6788 ERROR nagel_test openerp.addons.base.ir.ir_cron: Call of self.pool.get('res.partner')._start_syncro(cr, uid, *()) failed in Job 6
Traceback (most recent call last):
  File "/opt/openerp/server/openerp/addons/base/ir/ir_cron.py", line 132, in _callback
    method(cr, uid, *args)
  File "/opt/openerp/server/openerp/addons/panda_partner/partner.py", line 57, in _start_syncro
    csvrow[4] = csvrow[4].decode("utf-8")
IndexError: list index out of range 
```

无论我做什么，它总是会在第 57 行准确地抛出一个错误！我不知道为什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T07:19:39.793

发现我的错误：似乎只是在 Openerp 中升级我的模块是不够的。我需要完全重启，所以我的实际修改才能工作......

# ruby-on-rails - 发布到提要时出错：“用户尚未授权应用程序执行此操作”

> ID：14684434
> 
> 赞同：0
> 
> 时间：2013-02-04T10:07:43.023
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, facebook-graph-api, fb-graph

从 url 在我的 facebook 上发布提要时出现错误：

```
(#200) The user hasn't authorized the application to perform this action 
```

我正在使用

`https://graph.facebook.com/me/feed?name=hello&message=hello_from_url&access_token=access_token`

作为我的网址。我正在创建一个我需要范围参数的 rails 应用程序，以便我可以从 rails 应用程序在我的时间轴上发布，但我无法找到确切的解决方案。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-04T10:27:39.570

首先，`scope`向此发布 URL 添加参数是没有用的，权限是在首次使用应用程序时设置的，具体取决于`scope`on auth 对话框中定义的权限。

您的应用程序需要`publish_actions`获得发布提要的权限。如果您将此权限添加到配置中，您必须再次对您的应用进行身份验证才能接受新权限。

使用[Graph API Explorer](https://developers.facebook.com/tools/explorer/)检查是否一切正常。从右上角的下拉列表中选择您的应用程序，将方法更改为`POST`并粘贴`me/feed?name=hello&message=hello_from_url`。然后运行它并检查您是否有此异常。单击`Get Access Token`以检查您授予应用程序的权限。

顺便说一句，如果您不使用它，您可以使用[fb_graph发布提要：](https://github.com/nov/fb_graph)

```
me = FbGraph::User.me(access_token)
 me.feed!(
    :message => '',
    :link => '',
    :name => '',
    :description => ''
  ) 
```

# r - 设置种子时的整数是什么意思？

> ID：14684437
> 
> 赞同：18
> 
> 时间：2013-02-04T10:07:50.203
> 
> 标签：r, random, random-sample, seeding

我想使用**R**`sample()`中的函数从我的数据集中随机选择 n 行。我每次都得到不同的输出，因此使用函数来获得相同的输出。我知道 中的每个整数都会给我一个唯一的输出，如果设置相同的种子，输出将是相同的。但是我无法弄清楚作为参数传递给函数的整数的含义。它只是进入随机生成器算法的一个索引，还是意味着您开始采样的部分数据？例如，in是什么意思？**`set.seed()``set.seed()``set.seed()``2``set.seed(2)`**

 *** * *

## 回答 #1

> 赞同：28
> 
> 时间：2013-02-04T19:39:19.720

在过去，有些书包含[随机数字的页面和页面](http://books.google.com/books?id=XvwX1fxryIgC&dq=million+random+digits&hl=en&sa=X&ei=pA0QUf7YEse6iwLsmYHADA&ved=0CDAQ6AEwAA)（当然是随机顺序）。

我喜欢把它想象成告诉计算机从一本巨大的随机数书中的`set.seed(x)`页面开始读取随机数。与数据无关，而是选择随机数的算法应该如何开始。`x``x`

这可能有点简单，但我喜欢这个类比。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-02-04T10:22:09.800

> 随机种子（或种子状态，或只是种子）是用于初始化伪随机数生成器的数字（或向量）。
> 
> 对于要在伪随机数生成器中使用的种子，它不需要是随机的。由于数字生成算法的性质，只要忽略原始种子，算法生成的其余值将以伪随机方式遵循概率分布。

——[维基百科](http://en.wikipedia.org/wiki/Random_seed)

所以，随机函数可以这样实现：

```
int rand_r(unsigned int *seed)
{
    *seed = *seed * 1103515245 + 12345;
    return (*seed % ((unsigned int)RAND_MAX + 1));
} 
```

（样本取自 glibc）

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-02-04T10:11:06.067

它只是一个用于为随机数生成器设置种子的数字。它与您的数据无关。如果您没有明确提供种子，则会从当前时间创建一个新种子。

有关它的大量详细信息，请参阅`?set.seed`帮助页面。**

# jpa - 枚举不工作

> ID：14684439
> 
> 赞同：1
> 
> 时间：2013-02-04T10:07:54.973
> 
> 标签：jpa, enums

我有一个带有枚举字段的实体类。我正在从实体动态创建数据库，我使用`orm.xml`如下。

```
<basic name="relationshipType">
       <column name="Type"/>
       <enumerated>STRING</enumerated>
</basic> 
```

在我的数据库中，该列`Type`被创建为`int(11)`而不是`varchar`. 但是当我尝试使用注释 as 时`@Enumerated(EnumType.STRING)`，我得到了一个带有`varchar`字段的表。

orm.xml 中有什么我遗漏的东西吗？我正在使用 jpa 2.0 和休眠 3.27。请帮忙。

# xaml - 按钮离开按下

> ID：14684441
> 
> 赞同：0
> 
> 时间：2013-02-04T10:07:58.983
> 
> 标签：xaml

我需要一些有关 XAML 的帮助。这应该很容易，但不幸的是我无法弄清楚。我里面有边框和定义的按钮。问题是当按下按钮时它会保持焦点（周围的蓝色方块）。但是最好使按钮未按下（未聚焦）与 ToolBar 控件相同。下面是 XAML 的一部分：

```
<Border DockPanel.Dock="Top" Height="75" Style="{StaticResource GradientToolBarBorder}">
 <StackPanel Orientation="Horizontal">
   <c:ToolBarImageButton Image="Resources/connect.png" Text="Connect"/>
 </StackPanel>
</Border> 
```

工具栏图像按钮：

```
<Button Style="{StaticResource {x:Static ToolBar.ButtonStyleKey}}" Margin="5">
 <StackPanel Orientation="Vertical">
  <Image Source="{Binding ElementName=ToolBarImgButton, Path=Image}" Stretch="None"  RenderOptions.BitmapScalingMode="NearestNeighbor" />
  <TextBlock Text="{Binding ElementName=ToolBarImgButton, Path=Text}" Margin="0,2,0,0"/>
 </StackPanel>
</Button> 
```

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T10:55:22.373

由于没有 OOTB 支持失去焦点，因此最简单的解决方案将是添加隐藏控件并在每次需要时为其设置焦点。

只读文本框将是这里最安全的选择。

```
<TextBox Height="0" Name="hidden" Width="0" IsReadOnly="True" /> 
```

如果事件处理程序用于按钮，那么只需调用`hidden.Focus()`其中的方法。

但是，在命令（MVVM 模式）的情况下，您将需要使用[此处描述的附加属性](https://stackoverflow.com/questions/1356045/set-focus-on-textbox-in-wpf-from-view-model-c-wpf)

# puppet - 木偶执行顺序

> ID：14684445
> 
> 赞同：1
> 
> 时间：2013-02-04T10:08:04.880
> 
> 标签：puppet

我想通过puppet在机器上安装tomcat和opencms，但是当我这样做时，有时会部署opencms然后部署tomcat，这会导致失败。在另一种情况下，我想创建一个用户并将公钥复制到他的主目录，有时会发生这种情况，它首先尝试复制公钥然后创建用户.....这也是失败的。我想知道如果执行的话我是否可以有一个序列.....有什么办法吗？还有一件事，我怎么知道我的服务器上安装的版本是否是开源的？？如果它不是开源的，将在不久的将来到期，让我无法访问？？

任何帮助:) ？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-04T13:01:00.383

您将要在您的 opencms 声明中使用“require”或在您的 tomcat 中使用“before”。

```
package { 'tomcat':
      ensure => present,
      before => Package['opencms'],
} 
```

--和/或--

```
package { 'opencms':
      ensure => present,
      require => Package['tomcat'],
} 
```

查看 puppet labs 关于资源排序的文档：

[http://docs.puppetlabs.com/learning/ordering.html](http://docs.puppetlabs.com/learning/ordering.html)

# iphone - 使用缩放时 UIScrollView 中的 png 或 jpg 质量松散

> ID：14684447
> 
> 赞同：0
> 
> 时间：2013-02-04T10:08:09.680
> 
> 标签：iphone, xcode

关于在 UIScrollView 中使用缩放时如何保持 png 或 jpg 质量的任何建议？当我放大我的图像时，它们都失去了焦点......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T10:11:13.707

在中使用以下代码`scrollViewDidEndZooming`：

```
- (UIImage *)resizeImage:(UIImage*)image newSize:(CGSize)newSize {
        CGRect newRect = CGRectIntegral(CGRectMake(0, 0, newSize.width, newSize.height));
        CGImageRef imageRef = image.CGImage;

        UIGraphicsBeginImageContextWithOptions(newSize, NO, 0);
        CGContextRef context = UIGraphicsGetCurrentContext();

        // Set the quality level to use when rescaling
        CGContextSetInterpolationQuality(context, kCGInterpolationHigh);
        CGAffineTransform flipVertical = CGAffineTransformMake(1, 0, 0, -1, 0, newSize.height);

        CGContextConcatCTM(context, flipVertical);  
        // Draw into the context; this scales the image
        CGContextDrawImage(context, newRect, imageRef);

        // Get the resized image from the context and a UIImage
        CGImageRef newImageRef = CGBitmapContextCreateImage(context);
        UIImage *newImage = [UIImage imageWithCGImage:newImageRef];

        CGImageRelease(newImageRef);
        UIGraphicsEndImageContext();    

        return newImage;
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T10:15:05.340

```
- (void)scrollViewDidEndZooming:(UIScrollView *)scrollView withView:(UIView *)view atScale:(float)scale {
    CGSize nowSize = view.frame.size;
    if (nowSize.height >= self.myScrollView.frame.size.height)
        self.myScrollView.contentInset = UIEdgeInsetsZero;
    else {
        CGFloat delta = self.myScrollView.frame.size.height/2 - view.frame.size.height/2;
        self.myScrollView.contentInset = UIEdgeInsetsMake(delta, 0, delta, 0);
    }
} 
```

# symfony - Doctrine2 更新和级联

> ID：14684452
> 
> 赞同：0
> 
> 时间：2013-02-04T10:08:32.193
> 
> 标签：symfony, doctrine-orm

使用教义 2.2

当我持久化该对象时，它正在数据库中创建一个新条目，当它具有存储在数据库中的 id 时。

所以我从持久更改为合并，现在能够更新条目。但我也有级联实体要更新。现在级联实体没有得到更新。

我在父实体中有级联，因为

```
@ORM\OneToMany(targetEntity="Pay_Det", mappedBy="pay", cascade={"persist", "remove"})) 
```

当我将其更改为级联“合并”时，它会给出一些奇怪的错误并尝试访问一些受保护的变量。

是的，我的两个实体都有一个名称相同的字段。（尝试更改名称，没有帮助）有人遇到过类似的问题吗？有什么解决办法吗？

* * *

更新

我发现我的实体正在脱离。即使在合并之后也不会由 ORM 管理。它正在分离，因为我在更新之前使用非 ORm 来加载它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-09T19:09:08.147

我发现我的实体正在脱离。即使在合并之后也不会由 ORM 管理。它正在分离，因为我在更新之前使用非 ORm 来加载它。

# ruby-on-rails - 使用 Rails 远程设计 ajax 登录/注册：true

> ID：14684454
> 
> 赞同：2
> 
> 时间：2013-02-04T10:08:52.837
> 
> 标签：ruby-on-rails, devise

没有`remote: true`我的表格，登录就可以了。但是，当使用`remote: true`并尝试通过 ajax 登录时，我收到此错误：

```
You need to sign in or sign up before continuing. 
```

请求都是邮寄的。有人可以启发我吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-04T11:04:48.100

您需要遵循一些步骤：

**1）检查发出的请求是否是javascript。**

要验证您是否应该检查请求标头以查看 Accept 参数是什么。如果它说，`application/javascript`那么一切都很好。使用 firebug 等工具轻松检查请求标头。

**2) 包含哪些 javascript 文件？**

其次，开始尝试时一个非常常见的问题`:remote => true`是所需的**javascript 库**未包含在您的代码中。所以我的猜测是您的布局中缺少以下代码：

```
<%= javascript_include_tag :defaults %>
<%= csrf_meta_tag %> 
```

如果是这种情况，只需将其包含在 html 标头中。

**3) 检查控制器：它是否有一个 respond_to 块？**

如果您使用 生成您的应用程序`rails generate scaffold`，它将具有类似的内容

```
 respond_to do |format|
      format.html
      format.xml  { .... }
    end 
```

将上面的代码替换为：

```
respond_to :html, :js 
```

**或者**

```
respond_to do |format|
      format.html
      format.js
      format.xml  { .... }
    end 
```

**4) 在你的 application.js 中设置 CSRF Token**

```
$(function(){
  $.ajaxSetup({
    beforeSend: function( xhr ) {
      var token = $('meta[name="csrf-token"]').attr('content');
      if (token) xhr.setRequestHeader('X-CSRF-Token', token);
    }
  });
}); 
```

**5) 发布您的登录信息**

```
$.ajax({
  url: '/users/sign_in.json',
  type: 'POST',
  dataType: 'json',
  data: {user: {email: 'email@example.com', password: 'password'}},
  success: function(data, textStatus, xhr) {
    //called when successful
  }
}); 
```

# jquery - 限制 select2 结果

> ID：14684455
> 
> 赞同：5
> 
> 时间：2013-02-04T10:08:58.407
> 
> 标签：jquery, jquery-select2

我正在使用出色的[select2](http://ivaynberg.github.com/select2/) jquery 插件来选择标签。

我无法找到限制结果的方法（仅限于前 5 个）。

我的代码：

```
var tags = []; // this array is filled with user's tags
$("#tags").select2({
    minimumInputLength: 2,
    placeholder: 'tags',
    tags: tags,
    tokenSeparators: [",", " "],
    closeOnSelect: false
}); 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-11T00:58:48.640

查看`maximumSelectionSize`选项，如果您想限制可以选择的结果数量

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-04T10:17:46.633

怎么样

```
tags = tags.slice(0, 5); 
```

与您的上下文相关的任何地方。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-05-14T14:52:22.810

如果您通过数据库调用获得结果，那么您可以编辑 SQL 查询中的 LIMIT 语句。例如，这只会返回前 10 个结果：

```
SELECT id,categories FROM wikitags WHERE categories LIKE :term ORDER BY 
categories ASC LIMIT 0,10 
```

如果是远程呼叫，那么该解决方案会更加棘手。

# ios - 通过按钮重新加载 Tableview

> ID：14684456
> 
> 赞同：0
> 
> 时间：2013-02-04T10:09:00.777
> 
> 标签：ios, objective-c, uitableview

我想通过单击按钮重新加载我的 TableView，我读了很多东西，但我发现我必须编写`[tableView reloadData]`问题是，在我自己的函数中我没有 tableView 我将我 `ÌBoutlet UITableView *myTable`的表与表链接并编写函数`[myTable reloadData]` 但是什么都没发生。

在部分视图中，我可以添加和删除项目。如果我用表格更改视图，它们不会更新（也许轮询更新程序会更好，但它是一样的）现在我想刷新我的表格视图以显示新单元格

你对我有什么好主意吗？谢谢

编辑：

我写在.h

`IBOutlet UITableView *myTable;`

`@property UITableView *myTable;`

米

`@synthesize myTable`

```
- (IBAction)test:(id)sender
 {
   [self.myTableView reloadData];
 } 
```

但如果我按下按钮，什么也不会发生。我设置了一个`NSLog`, 来检查函数中的功能

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
- (UITableViewCell *) tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
- (NSInteger) tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T10:19:22.147

首先放入并正确连接到插座并在 .h 文件和 .m 文件中创建`UITableView`，然后使用以下代码 ( )。`xib``@property``@synthesize``self.tableView`

```
-(IBAction)btnPressed:(UIButton *) Sender
{
  [self.tableView reloadData];
} 
```

可能对你有帮助:)

谢谢 ：）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-04T10:25:43.063

首先，您检查到该变量的链接是否仍然存在。如果链接正常，则只需致电

```
[self.tableview reladData]; 
```

如果链接断开，则首先将变量链接到`UITableView`来自 xib 的变量，然后尝试调用与上面相同的方法。

希望这会帮助你。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-04T10:32:35.267

当您将 tableView 链接到 .h 文件时，您可能正在使用不需要在 .m 文件中 @synthesize 的新版本的 Xcode，就像您在 @property 方面所做的那样。

这是在 .h 文件中定义 @property 时发生的情况：

1.  你像这样使用合成：

    @synthesize myTable;

所以像这样使用 reloadData ：

```
[myTable reloadData]; 
```

2.  你像这样使用合成：

    @synthesize myTable=_myTable;

所以使用 reloadData 像其中之一：

```
either [_myTable reloadData]; or [self.myTable reloadData]; 
```

3.  或者你没有使用任何@synthesize：

在您的情况下（没有任何@synthesize 的新版Xcode），如果您不使用@synthesize，您只需要编写其中之一

> [_myTable 重载数据];

或者

```
[self.myTable reloadData]; 
```

希望它有帮助。我没有解释如何创建 IBAction 或使用委托，因为我看到你做得对。

祝你好运

Update1：​​Xcode 4.4 及更高版本中 Auto @synthesize 功能的一些资源：

[http://useyourloaf.com/blog/2012/08/01/property-synthesis-with-xcode-4-dot-4.html](http://useyourloaf.com/blog/2012/08/01/property-synthesis-with-xcode-4-dot-4.html)

[XCode 4.4 Auto @Synthesize 在 XCode 4.3 项目上失败](https://stackoverflow.com/questions/11709210/xcode-4-4-auto-synthesize-failing-on-an-xcode-4-3-project)

更新2：我刚刚看到你说最好通过拉刷新系统来做到这一点。最好提供一些有关您正在构建的应用程序的详细信息，例如 iOS 版本。如果是 6.0 或更高版本，您可以使用本机拉取刷新方法，如下所示：

[http://www.lextech.com/2012/10/ios-6-pull-to-refresh-tutorial/](http://www.lextech.com/2012/10/ios-6-pull-to-refresh-tutorial/)

或者，如果它不是 iOS 6.0，您始终可以使用 EGOTableViewPullRefresh，我已经使用过它，即使在 iOS 6.0 及更高版本上也能正常工作。

[https://github.com/enormego/EGOTableViewPullRefresh](https://github.com/enormego/EGOTableViewPullRefresh)

# wget - 通过 wetransfer.com 通过终端/cmdline 下载文件

> ID：14684459
> 
> 赞同：66
> 
> 时间：2013-02-04T10:09:06.020
> 
> 标签：wget

人们越来越多地通过 wetransfer 向我发送大 zip 文件，这很好，因为它可以工作，我不需要设置 ftp 或自己上传。但我需要将这些数据发送到我的 ubuntu 服务器，该服务器位于服务器场中的快速连接上。

我试图获取wetransfer通过邮件发送的链接，但我只获得了在wetransfer通过http发送文件之前显示的html信息页面

我尝试了一个 txt 浏览器（lynx，elinks），但 wetrasnfer 一直在抱怨“过时的浏览器”，它不知何故不起作用

我最终下载到我的笔记本电脑并通过节流 DSL 上传到服务器，这需要一整夜......

有人从linux终端下载wetransfer链接成功吗？

thnx 集市

* * *

## 回答 #1

> 赞同：132
> 
> 时间：2013-04-27T18:02:19.903

1.  首先，获取真实的下载链接。
2.  使用您的浏览器（我使用的是 Firefox）点击 WeTransfer 下载页面上的“下载链接”。
3.  下载开始后，右键单击正在下载的文件并选择“复制下载链接”。
4.  找出您的浏览器的用户代理。您可以使用 whatsmyuseragent.com 来获取它。
5.  准备 wget 命令并下载文件。

例子：

```
wget --user-agent Mozilla/4.0 '[your big address here]' -O dest_file_name 
```

不要忘记引号。

**【你这里的大地址】**必须是文件的直接链接，而不是转发的html页面。您可以通过在任何机器上开始下载来获取大地址，然后从下载管理器中复制链接（例如 firefox、chrome）

* * *

## 回答 #2

> 赞同：29
> 
> 时间：2017-05-05T21:00:02.473

我无法让它与 wget 一起工作，所以这里有一个使用 curl 的替代方法：

```
curl '{pretty_long_appendix_here}' --location --output {file_name_on_my_disk} 
```

代替

> {pretty_long_appendix_here}

使用实际开始下载时获得的实际下载 url [以[https://download.wetransfer.com/ 开头]](https://download.wetransfer.com/])。

例如在 chrome 中开始下载并转到

> 窗口 > 下载

停止正在运行的下载并通过右键单击它来复制下载 URL。

代替

> {file_name_on_my_disk}

使用您希望文件存储在磁盘上的实际名称。

* * *

## 回答 #3

> 赞同：15
> 
> 时间：2013-04-17T16:28:02.697

Alejandro Alonso wrote a Python script [py-wetransfer](https://github.com/superalex/py-wetransfer) for downloading wetransfer files in command line mode.

With a we transfer address similar to [https://www.wetransfer.com/downloads/XXXX/YYYY/ZZZZ](https://www.wetransfer.com/downloads/XXXX/YYYY/ZZZZ) you can execute this command to download the file:

```
python wetransfer.py -u https://www.wetransfer.com/downloads/XXXX/YYYY/ZZZZ 
```

It requires Python and Requests.

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2020-04-21T04:43:44.837

WeTransfer 确实提供了通过终端上传/下载文件的选项

[![在此处输入图像描述](../Images/1294434adfc2fd2b732e7bc9e73a00a1.png)](https://i.stack.imgur.com/DgEaE.jpg) [来源：[https](https://wetransfer.com/products) ://wetransfer.com/products ]

您必须从[此处](https://nerds.wetransfer.com/downloads/0b63000458bbf916a69ffdd7d21e7d7b20190412145718/10718e)下载适用于 Win、Mac 和 Linux 的**WTClient 。**

[![在此处输入图像描述](../Images/58d3c913d03ac73e8d6dba276393b47e.png)](https://i.stack.imgur.com/22AAO.jpg)

即使它具有有用的选项，例如“调试模式”

[![在此处输入图像描述](../Images/e435b7b890da1d26372f2e22dfc6c6dc.png)](https://i.stack.imgur.com/lfcm1.jpg)

只能使用 Plus 帐户下载。

[![在此处输入图像描述](../Images/9e196756e32ca274ec223554fdd23f97.png)](https://i.stack.imgur.com/72fGM.jpg)

真可惜！

* * *

自述文件

[![在此处输入图像描述](../Images/868666cc8c2d27e0de95a67a74ed95b9.png)](https://i.stack.imgur.com/FgIJQ.jpg)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2020-09-15T22:31:03.687

我已经分叉并更新了[Marcos](https://github.com/MarcosBL/py-wetransfer)对 Alejandro Alonso 的[py-wetransfer](https://github.com/superalex/py-wetransfer)脚本的分叉。

它现在可以在 Python 2.x 或 3.x 上运行，并且可以处理缩短的链接。你可以在这里找到它：[https ://github.com/GaryWatsonUK/py-wetransfer/blob/master/wetransfer.py](https://github.com/GaryWatsonUK/py-wetransfer/blob/master/wetransfer.py)

（感谢您分享您的工作，伙计们！我从中学到了很多东西。）

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2021-10-14T07:50:30.227

解决方案于 2021 年 10 月运行。只需要 wget 和浏览器：

1.  在任何现代浏览器中访问您的 wetransfer 链接 ( [https://wetransfer.com/downloads/](https://wetransfer.com/downloads/) <>)

2.  打开开发者控制台/面板并前往网络选项卡

[![网络选项卡](../Images/0507db588c8983c8dd0e9c04a4c1b657.png)](https://i.stack.imgur.com/XiVLY.png)

3.  将网络速度设置为 3G（在 chrome 中，或浏览器上的最低速度）*

[![此选项卡的网络速度较低](../Images/064815c90e81a40757954075d1ab79f6.png)](https://i.stack.imgur.com/8Id3s.png)

4.  点击下载

5.  在网络选项卡中，找到单击下载后立即创建的请求并检查它

[![查找请求](../Images/2ce5fe7bd7afc0ea8dbffb56ddb78224.png)](https://i.stack.imgur.com/DucFi.png)

6.  在请求预览上，复制`direct_link`内容

[![在此处输入图像描述](../Images/6ec22d13241590653f05ea717e5a53e9.png)](https://i.stack.imgur.com/KJy5d.png)

7.  现在就做`wget -o myfile 'your direct link'`

8.  您可以很好地取消浏览器上仍在进行的下载，这样您就不会从 wetransfer 消耗那么多带宽

*您应该降低标签速度，因为每个标签都`direct_link`附有一个令牌。下载完成后，此令牌将过期。因此，您要确保浏览器上的下载时间比终端上的下载时间长。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2015-03-20T12:56:14.447

如果您没有终端访问权限，这里有一个可以下载 WeTransfer 链接[的 PHP 脚本。](https://github.com/pseux/php-wetransfer)

当我不得不将文件下载到我的计算机上，然后将它们上传到服务器时，我用它来节省时间。

# c# - SQL中的标准差命令

> ID：14684462
> 
> 赞同：0
> 
> 时间：2013-02-04T10:09:10.930
> 
> 标签：c#, mysql, sql

从 C# 中的数据库检索数据后，我必须实现标准偏差。

`income`我必须从性别为`male`或的字段名称中检索一组值`female`

有没有直接计算标准差的SQL命令？还是我应该使用 C# 单独计算它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T10:09:55.373

尝试[`STDEV`](http://msdn.microsoft.com/en-us/library/ms190474.aspx)聚合函数：

```
select  gender
,       avg(value)
,       STDEV(value)
from    YourTable
group by
        gender 
```

# apache - 花括号（{ 和 }）从 Apache 到 Nginx 重写规则。

> ID：14684463
> 
> 赞同：14
> 
> 时间：2013-02-04T10:09:13.070
> 
> 标签：apache, url-rewriting, nginx, rewrite

我有这个成功地在 apache 上工作但返回错误或 nginx 的规则：

```
rewrite ^/saison-([0-9]{1})$ /pages.php?cat_page=saison-$1&season=$1 last;
rewrite ^/saison-([0-9]{1})/([a-z0-9-]+)$ /evenements.php?season=$1&title=$2 last;
rewrite ^/saison-([0-9]{1})/([a-z0-9-]+)/([a-z0-9-]+)/([a-z0-9-]+)$ /evenements.php?season=$1&title=$2&place=$3&date=$4 last;
rewrite ^/saison-([0-9]{1})/([a-z0-9-]+)/([a-z0-9-]+)/([a-z0-9-]+)/([a-z]+)$ /evenements.php?season=$1&title=$2&place=$3&date=$4&view=$5 last; 
```

我得到了：
***重新启动 nginx：[emerg]：指令“rewrite”没有被“;”终止 在 /path/rwrules.nginx:1**

如果我从重写规则中删除这 4 行，它会起作用。有什么问题 ？

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2013-02-04T12:33:45.193

阅读本[文档](http://wiki.nginx.org/HttpRewriteModule#rewrite)。尤其：

> 注意：对于花括号（ { 和 } ），因为它们在正则表达式和块控制中都使用，为避免冲突，带有花括号的正则表达式用双引号（或单引号）括起来。

因此，例如该行：

```
rewrite ^/saison-([0-9]{1})$ /pages.php?cat_page=saison-$1&season=$1 last; 
```

应该：

```
rewrite "^/saison-([0-9]{1})$" /pages.php?cat_page=saison-$1&season=$1 last; 
```

这应该删除“;” 语法错误（对于我没有检查它们是否有效的规则）。

# actionscript-3 - 我在使用 AS3 中的 gotoAndPlay 功能时遇到问题

> ID：14684465
> 
> 赞同：0
> 
> 时间：2013-02-04T10:09:17.467
> 
> 标签：actionscript-3, flash

我正在做一个项目，当我单击一个按钮时，我一直在使用 gotoAndPlay 转到一个特定的框架。当我单击按钮时，它会将我带到框架，但如果我再次单击它，它会进入下一框架，它会为我的所有按钮执行此操作 (4)

```
activities.addEventListener(MouseEvent.CLICK, gotoActivities);
function gotoActivities (event):void{
gotoAndPlay(255);
} 
```

我是否需要在进入页面时禁用事件侦听器并在我离开时再次启用它，还是有其他方法可以做到这一点？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T11:15:00.683

您可以从处理程序本身中删除它。

```
activities.addEventListener(MouseEvent.CLICK, gotoActivities);

function gotoActivities (event:MouseEvent):void{

  activities.removeEventListener(MouseEvent.CLICK, gotoActivities);

  gotoAndPlay(255);

} 
```

或检查[currentFrame](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/display/MovieClip.html#currentFrame)

```
activities.addEventListener(MouseEvent.CLICK, gotoActivities);

function gotoActivities (event:MouseEvent):void{

  if(this.currentFrame!=255) gotoAndPlay(255);

} 
```

# javascript - JavaScript 流程

> ID：14684468
> 
> 赞同：0
> 
> 时间：2013-02-04T10:09:22.627
> 
> 标签：javascript, debugging

我们如何测试 JavaScript 文件的流程..？

我们如何逐步完成应用程序流程 - 在 - JavaScript 文件中，包括其事件侦听器......？

谢谢斯内哈
_

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T10:12:29.577

大多数 Javascript 调试器都支持断点。您可以通过单击代码左侧的行号来添加它们。

Chrome 也有事件监听器断点。Firebug 似乎有时会[出现。](http://getfirebug.com/doc/breakpoints/demo.html#event)

![在此处输入图像描述](../Images/c3662841cfcd6b56491aee02f75df3be.png)

# java - 如何将 jms 消息从 java 应用程序发送到码头 webapp

> ID：14684470
> 
> 赞同：3
> 
> 时间：2013-02-04T10:09:26.107
> 
> 标签：java, web-applications, jms, jetty, activemq

我正在运行 Jetty hightide 8.1.8.v20121106，并使用 jquery/javascript 部署了一个小型 webapp 来监听 JMS 主题，当收到消息时，它将显示在页面上。我有一个 Java 应用程序，它将连接到 JMS 主题并发布消息，我希望 Java 应用程序发布的这些消息被 Jetty 上的 webapp 使用。

当 javascript webapp 发布消息或侦听消息时，Jetty 未连接到 tcp://localhost:61616。日志显示 Jetty 一直连接到 vm://localhost。有什么方法可以让 Jetty 使用我的 ActiveMQ 服务器而不是它自己的嵌入式服务器？帮助表示赞赏。

配置文件如下：

**码头加.xml**

```
<New id="cf" class="org.eclipse.jetty.plus.jndi.Resource">
    <Arg>jms/connectionFactory</Arg>
    <Arg>
          <New class="org.apache.activemq.ActiveMQConnectionFactory">
                <Arg>tcp://localhost:61616</Arg>
          </New>
    </Arg>
</New>

<New id="interestingTopic"  class="org.eclipse.jetty.plus.jndi.Resource">
    <Arg>jms/interestingTopic</Arg>
    <Arg>
          <New class="org.apache.activemq.command.ActiveMQTopic">
                <Arg>my.test</Arg>
          </New>
    </Arg>
</New> 
```

**webapp 的**web.xml****

 **```
<web-app>
    <context-param>
        <param-name>org.apache.activemq.brokerURL</param-name>
        <param-value>tcp://localhost:61616</param-value>
        <description>The URL of the Message Broker to connect to</description>
    </context-param>

    <context-param>
        <param-name>org.apache.activemq.embeddedBroker</param-name>
        <param-value>true</param-value>
        <description>Whether we should include an embedded broker or not</description>
    </context-param>

    <filter>
        <filter-name>session</filter-name>
        <filter-class>org.apache.activemq.web.SessionFilter</filter-class>
        <!-- <filter-class>org.eclipse.jetty.continuation.ContinuationFilter</filter-class> -->
    </filter>

    <filter-mapping>
        <filter-name>session</filter-name>
        <url-pattern>/*</url-pattern>
    </filter-mapping>

    <listener>
                <listener-class>org.apache.activemq.web.SessionListener</listener-class>
        </listener>

    <servlet>
        <servlet-name>AjaxServlet</servlet-name>
        <servlet-class>org.apache.activemq.web.AjaxServlet</servlet-class>
        <load-on-startup>1</load-on-startup>
    </servlet>

    <servlet>
        <servlet-name>MessageServlet</servlet-name>
        <servlet-class>org.apache.activemq.web.MessageServlet</servlet-class>
        <load-on-startup>1</load-on-startup>
    </servlet>

    <servlet-mapping>
        <servlet-name>AjaxServlet</servlet-name>
        <url-pattern>/amq/*</url-pattern>
    </servlet-mapping>

    <servlet-mapping>
        <servlet-name>MessageServlet</servlet-name>
        <url-pattern>/message/*</url-pattern>
    </servlet-mapping>

    <!-- Default page to serve -->
    <welcome-file-list>
        <welcome-file>index.html</welcome-file>
    </welcome-file-list>

    <resource-env-ref>
                <resource-env-ref-name>jms/interestingTopic</resource-env-ref-name>
                <resource-env-ref-type>javax.jms.Topic</resource-env-ref-type>
        </resource-env-ref>

    <resource-ref>
            <description>Connection Factory</description>
        <res-ref-name>jms/connectionFactory</res-ref-name>
        <res-type>javax.jms.ConnectionFactory</res-type>
        <res-auth>Container</res-auth>
    </resource-ref>
</web-app> 
```

**我用于收听该主题的 Java 脚本代码**

```
window.onload = function() {
    org.activemq.Amq.init({ uri: 'amq', logging: true, timeout: 45, clientId:('geo_1') });
};

var amq = org.activemq.Amq;
var msgTopic = 'topic://my.test';
var clientId = 'geo_1';

function addTopicListener() {
    var myHandler = { 
            rcvMessage: function(message) {
                //<message type="zmg">test test</message>
                var type = message.getAttribute('type');

                switch (type) {
                    case 'zmsg':
                    {
                        var text = message.childNodes[0].data;
                        document.getElementById('zmsg_container').innerHTML += ' | '+text;
                        break;
                    }
                }
            }
    };

    amq.addListener('myHandler', msgTopic, myHandler.rcvMessage);
};

function delTopicListener() {
    amq.removeListener('myHandler', msgTopic);
} 
```

**最后是我的 Java 应用程序中用于发布的代码**

```
private void init() throws NamingException {
        Properties props = new Properties();
        props.setProperty(Context.INITIAL_CONTEXT_FACTORY,"org.apache.activemq.jndi.ActiveMQInitialContextFactory");
        props.setProperty(Context.PROVIDER_URL,"tcp://localhost:61616");
        props.setProperty("topic.test", "my.test");
        ctx = new InitialContext(props);

        System.out.println("JMS Context Initialized");
    }

    private void connect() throws NamingException, JMSException {
        connectionFactory = (TopicConnectionFactory)ctx.lookup("ConnectionFactory");
        conn = connectionFactory.createTopicConnection();
        myTopic = (Topic)ctx.lookup("test");
        session = conn.createTopicSession(false, TopicSession.AUTO_ACKNOWLEDGE);
        publisher = session.createPublisher(myTopic);

        System.out.println("JMS Connection started");
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T18:26:14.603

在网上搜索并浏览了许多有关配置 Jetty 和 ActiveMQ 的网站之后；我终于遇到了一个网站，该网站讨论了使用 activemq 对码头进行集群，并让码头使用了 activemq 的 web 控制台（[http://java.dzone.com/articles/activemq-configuring-multiple](http://java.dzone.com/articles/activemq-configuring-multiple)）。那个网站真的很有帮助。

所以我只是在 Jetty 中缺少了一个额外的 XML 配置部分。使用上面的 XML 配置，我必须附加以下内容：

```
<New id="url" class="org.eclipse.jetty.plus.jndi.Resource">
        <Arg>jmx/url</Arg>
        <Arg>
            <New class="java.lang.String">
                <Arg>service:jmx:rmi:///jndi/rmi://localhost:1099/jmxrmi,service:jmx:rmi:///jndi/rmi://localhost:1299/jmxrmi</Arg>
            </New>
        </Arg>
</New> 
```

之后，我启动了 Jetty 和 ActiveMQ，并且确定 jetty 连接到 ActiveMQ 并且没有像以前默认创建自己的 vm://localhost 连接。

感谢那些提供帮助的人，这让我能够专注于我的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T17:44:01.077

您的 java 代码中的这一行将导致在本地 VM 中创建一个 ActiveMQ 代理实例（这有点像一把双刃剑......）：

```
props.setProperty(Context.PROVIDER_URL,"vm://localhost?broker.persistent=false"); 
```

如果您在**myamqhost**上运行了另一个 ActiveMQ 代理，则将该行修改为如下所示（假设代理正在侦听端口 61616）：

```
props.setProperty(Context.PROVIDER_URL,"tcp://myamqhost:61616"); 
```

请参阅[ActiveMQ JNDI 支持](http://activemq.apache.org/jndi-support.html)。

您可能还想查看[ActiveMQ Ajax Client](http://activemq.apache.org/ajax.html)。**

# php - 将包路径添加到 codeigniter 自动加载

> ID：14684471
> 
> 赞同：2
> 
> 时间：2013-02-04T10:09:26.357
> 
> 标签：php, codeigniter, autoload

我在一个项目中有多个（两个）Codeigniter 应用程序。目录结构如下所示：

```
applications
--application
--oglasnik 
```

我想在 oglasnik 中使用应用程序中的助手。

```
$this->load->add_package_path(APPPATH."../application");
$this->load->helper("string_helper");
$this->load->remove_package_path(); 
```

这很好用，但是我在应用程序中非常需要这个帮助程序，所以可以在自动加载中从另一个应用程序设置一个帮助程序。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T11:31:05.237

`oglasnik/helpers`在named`string_helper.php`中创建一个指向 的相对软符号链接`../../../application/helpers/string_helper.php`。这样你就可以使用正常的加载方法，因为 PHP 会认为该文件存在于常规帮助路径中，但它实际上是指向原始文件的符号链接。

请参阅[this](http://www.cyberciti.biz/faq/unix-creating-symbolic-link-ln-command/)了解如何创建符号链接。

*（在 中运行`oglasnik/helpers`）*
示例命令：

```
ln -s ../../../application/helpers/string_helper.php string_helper.php 
```

要测试该链接是否正确创建，打开`string_helper.php`创建的符号链接`oglasnik/helpers`应该打开`string_helper.php`位于`application/helpers`

# android - OpenCV 初始化异常

> ID：14684482
> 
> 赞同：1
> 
> 时间：2013-02-04T10:09:57.590
> 
> 标签：android, opencv

我在我的 android 项目上使用 OpenCV 库。在模拟器上，当我手动安装 opencv 管理器时，一切正常，但我在设备上遇到问题（使用 Android 2.3.6 的三星 Galaxy S Advance）。当我调用 initAsync 函数时，我得到 NullPointerException，但我想我应该收到一条消息，指出找不到 OpenCV 管理器包，并且可以从 google play 安装它。

我在 LogCat 中看到：

```
java.lang.RuntimeException: Unable to resume activity java.lang.NullPointerException
at android.app.ActivityThread.performResumeActivity(ActivityThread.java:2124)
at android.app.ActivityThread.handleResumeActivity(ActivityThread.java:2139)
at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1672)
at android.app.ActivityThread.access$1500(ActivityThread.java:117)
at android.app.ActivityThread$H.handleMessage(ActivityThread.java:935)
at android.os.Handler.dispatchMessage(Handler.java:99
at android.os.Looper.loop(Looper.java:130)
at android.app.ActivityThread.main(ActivityThread.java:3691)
at java.lang.reflect.Method.invokeNative(Native Method)
at java.lang.reflect.Method.invoke(Method.java:507)
at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:912)
at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:670)
at dalvik.system.NativeStart.main(Native Method)
Caused by: java.lang.NullPointerException
at com.android.internal.app.AlertController$AlertParams.<init>(AlertController.java:798)
at android.app.AlertDialog$Builder.<init>(AlertDialog.java:287)
at org.opencv.android.BaseLoaderCallback.onPackageInstall(BaseLoaderCallback.java:90)
at org.opencv.android.AsyncServiceHelper.InstallService(AsyncServiceHelper.java:116)
at org.opencv.android.AsyncServiceHelper.initOpenCV(AsyncServiceHelper.java:31)
at org.opencv.android.OpenCVLoader.initAsync(OpenCVLoader.java:39)
at com.myapp.utils.OpenCV.init(OpenCV.java:51)
at com.myapp.ProcessImageActivity.onResume(ProcessImageActivity.java:199)
at android.app.Instrumentation.callActivityOnResume(Instrumentation.java:1153)
at android.app.Activity.performResume(Activity.java:3858)
at android.app.ActivityThread.performResumeActivity(ActivityThread.java:2114) 
```

哪里可能有问题？

这是我的 ProcessImageActivity 的一部分：

```
public class ProcessImageActivity extends SherlockActivity {
private static final String TAG = "ProcessImageActivity";
public static final String EXTRA_IMAGE = "image";
private ImageView mPhotoView;
private OpenCV mOpenCV;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    int theme = R.style.Theme_Sherlock_Light_ForceOverflow;
    setTheme(theme);

    setContentView(R.layout.processimage);

    mOpenCV = new OpenCV(this);

    Bundle extras = getIntent().getExtras();

    if (extras != null) {
        if (extras.containsKey(EXTRA_IMAGE)) {
            mPhotoPath = extras.getString(EXTRA_IMAGE);
        }
    }

    mPhotoView = (ImageView)findViewById(R.id.photo_view);
}

    @Override
protected void onResume() {
    super.onResume();

    mOpenCV.init();
}
} 
```

和 OpenCV 类中的 init 函数：

```
public void init() {
    if (!OpenCVLoader.initAsync(OpenCVLoader.OPENCV_VERSION_2_4_3, mContext, mOpenCVLoaderCallback)) {
        Log.e(TAG, "Cannot connect to OpenCV Manager");
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T16:43:13.173

另外我不确定到底出了什么问题，但是我将初始化移到了我的主要活动中并且它可以工作。

# javascript - 不要让弹出来使用后退按钮

> ID：14684490
> 
> 赞同：2
> 
> 时间：2013-02-04T10:10:27.473
> 
> 标签：javascript, asp.net, popup

我在我的网站中使用了弹出窗口。问题是，当我打开一个弹出窗口并转到另一个页面然后返回上一页时，弹出窗口将刷新并再次打开！没有任何压力！我该如何解决？我希望通过返回该页面不会再次出现此弹出窗口。

这是我的弹出代码：

```
.......
  <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.5.3/jquery-ui.min.js" ></script>  
<script type='text/javascript' src='jquery-1.2.3.min.js'></script>
<script type='text/javascript' src='menu.js'></script>

  <script type="text/javascript">
      function pop_up(url) {
          newwindow = window.open(url, 'name', 'height=517,width=885,scrollbars=yes,toolbar=no,menubar=no,resizable=yes,location=no,directories=no,status=no,titlebar=no,left=400,top=120');
          if (window.focus) { newwindow.focus() }
          return false;
      }
    </script>

<link href="style.css" rel="stylesheet" type="text/css" />

    <style type="text/css">
        .style2
        {
....... 
```

和后面的代码：

```
Page.ClientScript.RegisterStartupScript(GetType(), "popup", "pop_up('" + "PopUpEmailing.aspx" + "');", true); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T10:40:22.970

一种解决方案是使用该`window.name`属性。我知道如果另一个库也尝试使用此解决方案，则此解决方案可能会导致冲突。但我更喜欢这个，而不是使用 cookie。（您也可以考虑使用本地存储）

```
function displayPopUp() {
    if( window.name != "popup-displayed" ) {
        window.name = "popup-displayed";
        ... popup code ...
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T11:57:58.470

而不是使用`Page.ClientScript.RegisterStartupScript` 尝试以下。

```
<asp:Button runat="server" ID="btnTest" Text="My Button" OnClientClick="pop_up('" + "PopUpEmailing.aspx" + "')"><asp:Button> 
```

上面将创建一个按钮，当单击该按钮时，将调用客户端事件，它将运行您的 pop_up javascript 代码。

# c# - 在 Windows XP 和 .Net 3.5 上使用 NamedPipes 时出现 InvalidOperationException

> ID：14684492
> 
> 赞同：1
> 
> 时间：2013-02-04T10:10:38.313
> 
> 标签：c#, .net, named-pipes

我正在使用命名管道在使用 .Net 3.5 的两个进程之间进行通信。这在 Windows 7 上运行良好，但不知何故在 Windows XP 下无法运行。

我在那里得到一个 InvalidOperationException 。这是我翻译德语消息的尝试：“管道句柄尚未设置。您的 PipeStream 实现是否调用了 InitializeHandle？”

我为此创建了一个测试项目：http: [//www.chinery.de/dateien/NamedPipeTest.zip](http://www.chinery.de/dateien/NamedPipeTest.zip)

在应用程序中，您可以点击“连接”并看到管道的名称。在右侧，您可以输入一条消息，如果一切顺利，该消息将通过管道发送。

正如我所说，这个问题只出现在我的 Windows XP 上。

有人对此有任何线索吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2019-04-11T18:48:29.363

我最近自己遇到了这个问题。我的解决方案是设置`NamedPipeClientStream.ReadMode` *after* call `NamedPipeClientStream.Connect()`。否则我会得到`Pipe handle has not been set. Did your PipeStream implementation call InitializeHandle?`上面提到的异常。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-07T14:07:06.173

我终于自己找到了解决方案。这是管道客户端的创建：

```
NamedPipeClientStream pipeClient = new NamedPipeClientStream("localhost", PipeName, PipeDirection.InOut) 
```

我不得不将其更改为： NamedPipeClientStream pipeClient = new NamedPipeClientStream(".", PipeName, PipeDirection.InOut)

（将服务器名称从“localhost”更改为“.”）

这在某种程度上适用于 Windows 7，但不适用于 XP。现在它终于可以在两个系统上运行了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-03-01T11:36:40.720

它可能有权限问题：因此，需要提供所需的访问权限。

```
PipeSecurity _pipeSecurity = new PipeSecurity();
PipeAccessRule psEveryone = new PipeAccessRule("Everyone", PipeAccessRights.FullControl,
    System.Security.AccessControl.AccessControlType.Allow);

_pipeSecurity.AddAccessRule(psEveryone);

NamedPipeServerStream pipeServer = new NamedPipeServerStream(PipeName, PipeDirection.In,
    1, PipeTransmissionMode.Message, PipeOptions.Asynchronous, 4, 4, _pipeSecurity); 
```

要克服只听一次的问题，请按照以下步骤操作：右键单击相应的服务 > 属性 > 登录 > 登录为：本地系统帐户并勾选允许服务与桌面交互。或转到 ServiceProcessInstaller 属性并将帐户设置为 LocalSystem。

# php - 我将如何将此自定义字符串解析/拆分为数组？

> ID：14684493
> 
> 赞同：0
> 
> 时间：2013-02-04T10:10:40.723
> 
> 标签：php, string

提前感谢您提供的任何帮助。

我有一个这样的字符串：

```
[{"title":"Image One","description":"Image One\r\nDescription","image":{"attachment_id":"111"}},{"title":"Image Two","description":"Image Two Description","image":{"attachment_id":"222"}},{"title":"Image Three","description":"Image Three\r\nDescription","image":{"attachment_id":"333"}}] 
```

我不确定如何将它放入一个数组中以便我可以使用所有附件 ID？

就像是：

```
echo $attachment_id[0];
echo $attachment_id[1]; 
```

等等

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T10:13:04.113

那是JSON。

PHP 有一个内置的[JSON 解析器](http://php.net/manual/en/book.json.php)，您可以使用：

```
$attachments = json_decode($data, true);
foreach ($attachments as $att) {
    echo $att["title"] . "\n";
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-04T10:15:37.013

你拥有的那个“字符串”是 JSON 格式的，PHP 有一些内置的函数可以使用它！

[您可以使用json_decode](http://php.net/json_decode)将其转换为对象或数组

这是一个将其转换为 PHP 数组的示例：

```
<?php

    $json = '[{"title":"Image One","description":"Image One\r\nDescription","image":{"attachment_id":"111"}},{"title":"Image Two","description":"Image Two Description","image":{"attachment_id":"222"}},{"title":"Image Three","description":"Image Three\r\nDescription","image":{"attachment_id":"333"}}]';
    $data = json_decode($json, true);
    print_r($data); 
```

其输出为：

```
Array
(
    [0] => Array
        (
            [title] => Image One
            [description] => Image One
Description
            [image] => Array
                (
                    [attachment_id] => 111
                )

        )

    [1] => Array
        (
            [title] => Image Two
            [description] => Image Two Description
            [image] => Array
                (
                    [attachment_id] => 222
                )

        )

    [2] => Array
        (
            [title] => Image Three
            [description] => Image Three
Description
            [image] => Array
                (
                    [attachment_id] => 333
                )

        )

) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-04T10:13:41.593

`$encoded-variable = [{"title":"Image One","description":"Image One\r\nDescription","image":{"attachment_id":"111"}},{"title":"Image Two","description":"Image Two Description","image":{"attachment_id":"222"}},{"title":"Image Three","description":"Image Three\r\nDescription","image":{"attachment_id":"333"}}]`

```
 use     `$result = json_decode($encoded_varaible,true);' 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-04T10:18:35.297

这不是一个字符串。把它放在引号里，那么它就是一个字符串，更准确地说是[JSON](http://www.json.org/)。您可以使用[json_decode](http://php.net/manual/en/function.json-decode.php)将其解析为数组。

```
$myString = '[{"title":"Image One","description":"Image One\r\nDescription","image":
   {"attachment_id":"111"}},{"title":"Image Two","description":"Image Two 
   Description","image":{"attachment_id":"222"}},{"title":"Image 
   Three","description":"Image Three\r\nDescription","image":{"attachment_id":"333"}}]';

$myArray = json_decode($myString, true);
var_dump($myArray[0]['image']['attachment_id']; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-04T10:38:51.033

这是一个 JSON 编码的字符串。只需使用 json_decode [http://php.net/manual/en/function.json-decode.php](http://php.net/manual/en/function.json-decode.php)将其解码为数组并获得所需的内容。

```
<?php
$string = 'the string above';

$array = json_decode($string, true);
$attachments = array_map(function($e) {
    return $e['image']['attachment_id']; 
}, $array);
print_r($attachments); // prints Array (114, 222, 333) 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2013-02-04T10:15:36.553

使用 json_decode() 如下所示。你会得到一个数组结果。 `json_decode([{"title":"Image One","description":"Image One\r\nDescription","image":{"attachment_id":"111"}},{"title":"Image Two","description":"Image Two Description","image":{"attachment_id":"222"}},{"title":"Image Three","description":"Image Three\r\nDescription","image":{"attachment_id":"333"}}])`

# c# - 从包含 NULL 值的 SQL Server 数据库中获取浮点字段

> ID：14684498
> 
> 赞同：1
> 
> 时间：2013-02-04T10:10:49.920
> 
> 标签：c#, sql-server-2008, c#-3.0

我想从 sql server 数据库 2008 R2 中获取浮点数据。

在数据库中有两个字段`estimated_amount`和`actual_amount`.

起初只`estimated-amount`填充包含值，并且该`actual_amount`字段包含`NULL`.

问题是当我获取数据并解析它显示错误的值时：

> System.FormatException 未被用户代码处理 Message=输入字符串的格式不正确。源=mscorlib

我的代码是：

```
CRM_Doctor_RequestObj.Actual_Amount = float.Parse(Convert.ToString(row["Actual_Amount"])); 
```

请建议我能做什么..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T10:16:40.167

从数据库中选择 actual_amount 之类的

```
SELECT ISNULL((actual_amount),'0.00') FROM TableName 
```

如果 actual_amount 为空，则为 0.00

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-04T10:20:36.510

少写代码，避免翻译成字符串。您将不得不单独处理 null - 根据`row`具体情况，它可能支持[`IsNull`](http://msdn.microsoft.com/en-us/library/3fwatee0.aspx)/`IsDBNull`方法，因此它更像：

```
if(row.IsNull("Actual_Amount"))
   CRM_Doctor_RequestObj.Actual_Amount = null;
else
   CRM_Doctor_RequestObj.Actual_Amount = (float)row["Actual_Amount"]; 
```

# android - 把活动放在前面？

> ID：14684503
> 
> 赞同：0
> 
> 时间：2013-02-04T10:10:59.140
> 
> 标签：android, android-intent

我有两个活动 MainActivity 和 StopAlarm 并且在移动设备上我想启动 StopAlarm 活动。但是当我的 MainActivity 处于最小化模式（背景）并且我摇动手机时，StopAlarm 活动也以最小化状态启动。我想在最大化开始时启动 StopAlarm 活动。（活动应该在屏幕上）

```
 import android.app.Activity;
    import android.app.Application;
    import android.content.Context;
    import android.content.Intent;
    import android.hardware.Sensor;
    import android.hardware.SensorEvent;
    import android.hardware.SensorEventListener;
    import android.hardware.SensorManager;
    import android.os.Bundle;
    import android.view.View;
    import android.view.View.OnClickListener;
    import android.widget.ArrayAdapter;
    import android.widget.Button;
    import android.widget.Spinner;
    import android.widget.Toast;

public class MainActivity extends Activity {

    Intent in;
    private Button activate;
    private SensorManager mSensorManager;
    private float mAccel; 
    private float mAccelCurrent; 
    private float mAccelLast; 
    Spinner sspinner, tspinner;
    String selectedTone, selectedTime;
    String ab;
    public int settime;
    public static int i;
    int act = 0;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        String[] sdata = { "Beep", "Police Siren", "Dog Bark" };
        String[] tdata = { "05 sec", "10 sec", "15 sec" };
    //  final activate activteprocess = new activate();

        sspinner = (Spinner) findViewById(R.id.soundspinner);
        sspinner.setAdapter(new ArrayAdapter<String>(this,
                R.layout.customspinner, R.id.textView1, sdata));

        tspinner = (Spinner) findViewById(R.id.timespinner);
        tspinner.setAdapter(new ArrayAdapter<String>(this,
                R.layout.customspinner, R.id.textView1, tdata));
        // ///////////////////////////////////////////////////////////////////////////////////////
        mSensorManager = (SensorManager) getSystemService(Context.SENSOR_SERVICE);
        mSensorManager.registerListener(mSensorListener,
                mSensorManager.getDefaultSensor(Sensor.TYPE_ACCELEROMETER),
                SensorManager.SENSOR_DELAY_NORMAL);
        mAccelCurrent = SensorManager.GRAVITY_EARTH;
        mAccelLast = SensorManager.GRAVITY_EARTH;
        activate = (Button) findViewById(R.id.button1);
        activate.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v) {

                selectedTime = tspinner.getSelectedItem().toString();
                ab = selectedTime.substring(0, 2).trim();
                settime = Integer.parseInt(ab);
                Toast.makeText(getApplicationContext(), "" + settime, 1500)
                        .show();
                selectedTone = sspinner.getSelectedItem().toString();
                act = 1;
            //  activteprocess.start();

            }
        });
        // /////////////////////////////////////////////////////////////////////////////////////////////////////////

    }

    public final SensorEventListener mSensorListener = new SensorEventListener() {

        public void onSensorChanged(SensorEvent se) {

            float x = se.values[0];
            float y = se.values[1];
            float z = se.values[2];
            mAccelLast = mAccelCurrent;
            mAccelCurrent = (float) Math.sqrt((double) (x * x + y * y + z * z));
            float delta = mAccelCurrent - mAccelLast;

            if (delta > 2 && act == 1) {
                mAccel = mAccel * 0.9f + delta;
                if (i == 0) {
                    i++;
                    in = new Intent(getApplicationContext(),
                            StopAlarm.class);
                    in.putExtra("tone", selectedTone);
                //   
                        startActivity(in);
                    //finish();
                }
            }
        }

        public void onAccuracyChanged(Sensor sensor, int accuracy) {
        }
    }; 
```

停止警报.java

```
public class StopAlarm extends Activity {

    String tonetoplay;
    MediaPlayer mp;
    int[] ab = { R.raw.dog, R.raw.police_siren, R.raw.thief_alarm };
    Button stp;
    int done = 0;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.stopalarm);
        Intent abc = getIntent();
        tonetoplay = abc.getStringExtra("tone");

        startPlaying();
        stp = (Button) findViewById(R.id.stopalaram);
        stp.setOnClickListener(new OnClickListener() {
            @Override
            public void onClick(View v) {
                mp.stop();
            }
        });

    }

    private void startPlaying() {

        if (tonetoplay.equals("Beep"))
            mp = MediaPlayer.create(getApplicationContext(), ab[2]);
        if (tonetoplay.equals("Police Siren"))
            mp = MediaPlayer.create(getApplicationContext(), ab[1]);
        if (tonetoplay.equals("Dog Bark"))
            mp = MediaPlayer.create(getApplicationContext(), ab[0]);
        mp.setLooping(true);
        mp.start();
    }

    @Override
    protected void onResume() {
        Toast.makeText(getApplicationContext(), "" + tonetoplay,Toast.LENGTH_SHORT).show();
        super.onResume();
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T10:37:23.250

您可以取消注册 SensorEventListener 在

```
@Override
protected void onPause() {
 //Unregister the SensorEventListener
} 
```

和

你可以再次注册

```
@Override
protected void onResume() {
  mSensorManager.registerListener(
        mSensorListener,
        mSensorManager.getDefaultSensor(Sensor.TYPE_ACCELEROMETER),
        SensorManager.SENSOR_DELAY_NORMAL);
  super.onResume(); 
```

}

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T10:48:17.920

试试这个： in = new Intent(getApplicationContext(), StopAlarm.class); in.putExtra("音调", selectedTone); in.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK); in.setAction(Intent.ACTION_VIEW); context.startActivity(in);

# android - 我想在 android 应用程序中使用 MusicXml 绘制乐谱

> ID：14684507
> 
> 赞同：7
> 
> 时间：2013-02-04T10:11:13.687
> 
> 标签：android, jfugue, musicxml

我尝试了各种方法来做到这一点。

1.  使用 proxymusic-2.0.jar 库 => 在 Java 对象和 Xml 文件之间进行编组和解组，但我没有找到一种方法从 Android 应用程序（活动、视图等）上的 Xml 文件中解组它

2.  使用 JFugue-4.0.3-with-musicxml.jar 库 => 由于 MusicXmlParser、MusicXmlRenderer 和 ParserListener 类，我认为这个库非常有用。然而，Android 上 Midi 支持的现状令人沮丧。他们删除了 javax.sound.midi，因此所有依赖于此的库都无法正常工作。（例如 JFugue 之类的东西，OMG）。

我只想在 android 上将 musicXml 文件显示为乐谱！！！请向我推荐参考站点，或者让我知道解决此问题的简单示例代码 url。

非常感谢您。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T21:53:14.160

试试[https://www.neoScores.com](https://www.neoscores.com) ...它还不完美，但我们正在努力在 HTML5 中完成这项工作。

它是一个用 javascript 自定义编写的 musicXML 渲染器。没有可用的 api (YET) 但在维也纳的#classicalhackdays 上，我们与music21 合作做了一个小技巧，它应该允许人们在后变量中使用musicXML 发出http 请求......
只需将您的分数发送到(post)var 称为“xmlin”到[https://www.neoscores.com/post](https://www.neoscores.com/post) ...我们没有达到彻底测试的目的，但是...希望它对您有用...

无论哪种方式，您应该能够在 neoScores 中创建一个帐户，并在此 web 应用程序中使用 DropBox 来访问您自己的工作表。

注释将在几周内发布...

我们正在测试 neoScores 跨平台。对于 Android，我们在 Samsung Galaxy Notes & Tabs 10.1 和 Android 4.0.4 到 4.3 上进行测试。如果您可以对您正在使用的设备提供一些反馈，那对我们来说将是一个很大的帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-11-11T11:51:12.927

您可能想试试这个[http://musicxml-viewer.com/](http://musicxml-viewer.com/) 我没有在 Android 浏览器上测试过，但它适用于 iOS 浏览器，从这个角度来看（不支持 Java 或 Flash）它们处于同一水平 - 所以希望它会做的

问候

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-01-03T22:30:54.323

现在 GitHub 上有一个[Android JFugue](https://github.com/kshoji/JFugue-for-Android)端口。

[另请查看适用于 Android](http://www.seescore.co.uk/developers/)的商业SeeScore SDK 。

# ios - 谷歌地图路线作为 iPhone 上的地图

> ID：14684512
> 
> 赞同：4
> 
> 时间：2013-02-04T10:11:47.967
> 
> 标签：ios, google-maps, url, uiwebview, directions

我正在开发一个 iPhone 应用程序，该应用程序需要在加载带有相关参数的 Google 地图 URL 的 UIWebView 中显示从点 A 到另一点 B 的步行路线。

我正在加载的 URL 示例：

```
[self.myWebView loadRequest:[NSURLRequest requestWithURL:[NSURL URLWithString:@"http://maps.google.com/maps?saddr=55.720923,12.513428&daddr=55.745666,12.546387"]]]; 
```

我需要 UIWebView 将方向显示**为地图**（如地图上的线条），如下面的链接中所示：

[我希望如何显示路线（路线作为地图）](http://i49.tinypic.com/2a4tp8x.png)

但是，当这个 URL 加载到 iPhone 上时，路线会显示**为一个列表**（参见下面的链接）。

[如何显示路线（路线作为列表）](http://i48.tinypic.com/34dhkq9.png)

用户需要按下顶部栏中的地图按钮才能将方向作为地图查看。

如何设置 Google 地图 URL 参数，以便在我的 iPhone 应用程序中**直接将路线显示为地图（而不是列表！） ？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T10:21:58.963

如果您使用来自 github 的MKMapView.check [nvpolyline项目，这会容易得多。](https://github.com/wlach/nvpolyline)它将帮助您在 a 点到 b 点之间创建线，从而解决您的第一个问题。

对于第二个问题，在您的项目中添加此代码

```
NSString* apiUrlStr = [NSString stringWithFormat:@"http://maps.googleapis.com/maps/api/directions/json?origin=%@&destination=%@&sensor=false", saddr, daddr];
    //&alternatives=true

    NSURL* apiUrl = [NSURL URLWithString:apiUrlStr];

    NSString *apiResponse = [NSString stringWithContentsOfURL:apiUrl];

    SBJsonParser *jsonParser = [SBJsonParser new];
    NSDictionary *jsonData = (NSDictionary *) [jsonParser objectWithString:apiResponse error:nil];

    NSLog(@"apiResponse is : %@",jsonData);

    //to display route in drop down

    NSArray *routeArray = [[NSArray alloc]init];
    routeArray= [jsonData objectForKey:@"routes"];

    for(int i=0;i<[routeArray count];i++)
    {
        NSDictionary *tempDictionary = [routeArray objectAtIndex:i];
        if([tempDictionary objectForKey:@"overview_polyline"]!=nil)
        {
            NSDictionary *secTempDictionary = [tempDictionary objectForKey:@"overview_polyline"];
            if([secTempDictionary objectForKey:@"points"]!=nil)
            {
                NSString * routePoint =[secTempDictionary objectForKey:@"points"];

                [routeSetAry addObject:routePoint];

                encodedPoints = [secTempDictionary objectForKey:@"points"];
            }
            // NSLog(@"secTempDictionary is: %@", secTempDictionary);
        } 
        if([tempDictionary objectForKey:@"legs"]!=nil)
        {
            NSArray *lagArray = [[NSArray alloc]init];
            lagArray= [tempDictionary objectForKey:@"legs"];

            for(int i=0;i<[lagArray count];i++)
            {
                NSDictionary *thirdTempDictionary = [lagArray objectAtIndex:i];
                if([thirdTempDictionary objectForKey:@"steps"]!=nil)
                {
                    NSArray *stepsArray = [[NSArray alloc]init];
                    stepsArray= [thirdTempDictionary objectForKey:@"steps"];

                    for(int i=0;i<[stepsArray count];i++)
                    {
                        NSDictionary *forthTempDictionary = [stepsArray objectAtIndex:i];

                        if([forthTempDictionary objectForKey:@"html_instructions"]!=nil)
                        {
                            NSString * directionStr =[forthTempDictionary objectForKey:@"html_instructions"];

                            NSRange range;
                            while ((range = [directionStr rangeOfString:@"<[^>]+>" options:NSRegularExpressionSearch]).location != NSNotFound){
                                directionStr=[directionStr stringByReplacingCharactersInRange:range withString:@""];
                            }
                            [directionStrAry addObject:directionStr];
                        }

                        NSDictionary *fifthTempDictionary = [forthTempDictionary objectForKey:@"polyline"];
                        if([fifthTempDictionary objectForKey:@"points"]!=nil)
                        {
                            NSString * routePoint =[fifthTempDictionary objectForKey:@"points"];

                            [polylineSetAry addObject:routePoint];

                           // encodedPoints = [fifthTempDictionary objectForKey:@"points"];
                        }
                        NSDictionary *sixthTempDictionary =[forthTempDictionary objectForKey:@"distance"];
                        if([sixthTempDictionary objectForKey:@"text"]!=nil)
                        {
                            NSString * distanceStr =[sixthTempDictionary objectForKey:@"text"];

                            [distanceStrAry addObject:distanceStr];

                            // encodedPoints = [fifthTempDictionary objectForKey:@"points"];
                        } 
                    }
                }
            }
        }  
    }

    NSLog(@"routeSetAry is :%@",routeSetAry);
 NSLog(@"polylineSetAry is : %i",polylineSetAry.count); 
```

这将为您提供方向字符串数组，您可以使用此字符串在项目中的任何位置显示。

在我的项目中，我创建了一个显示在地图顶部的小视图，在该视图中，我一一显示方向。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-01T05:58:48.837

我不确定，但你应该参考[这个](https://developers.google.com/maps/documentation/ios/urlscheme)链接谷歌已经很好地解释了它**“谷歌地图 URL 方案”**

您可以使用

> "comgooglemaps://?saddr=Google+Inc,+8th+Avenue,+New+York,+NY&daddr=John+F.+Kennedy+International+Airport,+Van+Wyck+Expressway,+Jamaica,+New+York&directionsmode =过境”

它具有不同的参数，例如 **saddr**、**daddr**、**方向模式**

希望这可以帮助！

# python - datetime.strptime 在 PyQt4 QtGui.QWidget 继承类中不起作用

> ID：14684513
> 
> 赞同：2
> 
> 时间：2013-02-04T10:11:57.833
> 
> 标签：python, pyqt4, strptime

例如我有这个简单的类：

```
from PyQt4 import QtGui, QtCore
import sys
from datetime import datetime

print datetime.strptime('Wed, 06-Feb-2014 12:05:12', '%a, %d-%b-%Y %H:%M:%S')

class Application(QtGui.QWidget):

    def __init__(self):
      super(Application, self).__init__()
      print datetime.strptime('Wed, 06-Feb-2014 12:05:12', '%a, %d-%b-%Y %H:%M:%S')

def main():

    app = QtGui.QApplication(sys.argv)
    ex = Application()
    sys.exit(app.exec_())

if __name__ == '__main__':
    main() 
```

当我运行它时，我有以下输出：

```
2014-02-06 12:05:12
Traceback (most recent call last):
  File "vkPlayListSync.py", line 23, in <module>
    main()    
  File "vkPlayListSync.py", line 18, in main
    ex = Application()
  File "vkPlayListSync.py", line 12, in __init__
    print datetime.strptime('Wed, 06-Feb-2014 12:05:12', '%a, %d-%b-%Y %H:%M:%S')
  File "/usr/lib/python2.7/_strptime.py", line 325, in _strptime
    (data_string, format))
ValueError: time data 'Wed, 06-Feb-2014 12:05:12' does not match format '%a, %d-%b-%Y %H:%M:%S' 
```

所以第一行带有`strptime`，但第二个调用形式的类`__init()__`方法会引发错误。我在 Python 和 PyQt 方面没有足够的经验，所以无法理解如何解决这个问题。而且我还没有在 stackoverflow 或谷歌上找到答案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T12:18:23.667

`QApplication`启动正在更改您的区域设置，从而`'Wed, 06-Feb-2014 12:05:12'`不再是有效的日期（即工作日和月份名称是另一种语言）。尝试使用`LC_ALL="C"`.

# android - 读取mifare classic 1k的UID

> ID：14684514
> 
> 赞同：1
> 
> 时间：2013-02-04T10:12:09.457
> 
> 标签：android, nfc, mifare

以最简单的形式，是否有任何示例或代码片段显示了我如何在我的 android 手机上读取 mifare 卡的 UID？

我不需要在任何扇区中读/写任何东西，我只需要 4 或 7 字节的 UID

我试过谷歌搜索，但并没有真正遇到任何具体的事情

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T11:47:54.713

使用命令**FF CA 00 00 00**从 mifare 1k 卡获取 UID。

# java - 在 IE 中提交后的奇怪行为字符（在 FF 中不会发生）

> ID：14684519
> 
> 赞同：1
> 
> 时间：2013-02-04T10:12:22.610
> 
> 标签：java, jsp, struts2

我正在扩展基于 Struts2 的现有代码（和 Struts2-jquery 插件，但我认为这不是问题的原因）。

我在 Internet Explorer 9 中发现了一个奇怪的行为（我不知道以前版本的 IE 是否也存在同样的问题），它没有出现在 FireFox 中。

我有一个带有一些输入字段的页面和一个用于在服务器上上传文件的上传功能。当用户上传文件时，通过表单提交将其发送到服务器，然后 Action 返回同一页面（重新加载页面）。如果我使用重音字母填充输入框，则在提交表单后重新加载页面时，会出现“正方形”而不是重音字母（它是`&#65533;`）。这只发生在 IE 中，而不是在 FireFox 中（我在提交之前的字符保持不变）。

在`web.xml`and`struts.xml`文件中，没有 JSP 的编码配置。

```
<%@ taglib prefix="s" uri="/struts-tags"%>
<%@ taglib prefix="sj" uri="/struts-jquery-tags"%>
<s:form id="actionForm" name="actionForm"
    theme="simple" cssClass="yform"
    action="changeAction" acceptcharset="UTF-8">
    <table>
        <tr>
            <td>field1</td>
            <td>
                <s:textfield id="field1" name="field1" maxlength="2048" value="%{field1}" disabled="false" size="98" required="true" />
            </td>
        </tr>
        <tr>
            <td><s:file name="docFacFileUploaded" size="50" /></td>
            <td>
                <sj:submit targets="main_section" id="uploadFileButton" value="File upload" button="true" indicator="indLoad" />
                <img id="indLoad" src="indicator.gif" alt="Loading..." style="display:none" />
            </td>
        <tr>
        </tr>
            <td>field2</td>
            <td>
                <s:textfield id="field2" name="field2" maxlength="2048" value="%{field2}" disabled="false" size="98" required="true" />
            </td>
        </tr>
        <tr>
            <td>
                <sj:submit targets="main_section" id="salvaButton" value="Salva" button="true" indicator="ind" />
                <img id="ind" src="indicator.gif" alt="Loading..." style="display:none" />
            </td>
        </tr>
    </table>
</s:form> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T10:25:38.587

可能您使用的字符编码与浏览器设置的字符编码不同。例如，UTF-8 unicode 与 ISO-8859-1 有一些区别。外国网站更糟糕。通常浏览器可以自动检测到它，但它似乎并不总是有效。

转到视图**菜单>字符编码**并尝试那里的选项，直到找到正确显示的选项。

```
<%page contentType="text/html" pageEncoding="UTF-8"%> 
```

或者

```
header('Content-Type: text/html; charset=UTF-8'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T11:43:19.927

我在 URL [https://forums.oracle.com/forums/thread.jspa?messageID=3151892的 OTN 论坛中找到了解决方案](https://forums.oracle.com/forums/thread.jspa?messageID=3151892)

如建议的那样，我已将其添加到`web.xml`

```
<jsp-config>  
    <jsp-property-group>
        <url-pattern>*.jsp</url-pattern>
        <page-encoding>utf-8</page-encoding>
    </jsp-property-group> 
</jsp-config> 
```

这是我的 JSP 页面

```
<jsp:directive.page contentType="text/html;charset=utf-8"/> 
```

所以它在 IE 和 FF 中是正确的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-04T13:14:04.320

您需要`character set`在 Web 应用程序的整个操作链中保留相同的内容，从从客户端发送请求并从服务器接收请求，到从服务器发送响应并从客户端接收响应。

使用web.xml 中的编码，除了服务器接收方法的请求（您需要配置应用程序服务器连接器以供它们使用）`UTF-8`之外，您将可以执行每个步骤；`GET``UTF-8`

请注意，您的数据库也应该是`UTF-8`，而不是（正如我在意大利的许多情况下看到的那样）`WE81ISO8859P1`，也不`P15`...

UTF-8 有你需要的一切，只要在**任何地方**使用它，你就会没事的。

作为重要说明，请记住始终指定字符集

*   创造新`Strings`的`Byte Arrays`

    代替`new String(myByteArray);`

    采用`new String(myByteArray,"UTF-8");`

*   当从 获得`Byte Arrays`时`Strings`：

    代替`myString.getBytes();`

    采用`myString.getBytes("UTF-8");`

# windows - SVN权限管理工具使用Windows认证方式

> ID：14684522
> 
> 赞同：2
> 
> 时间：2013-02-04T10:12:27.400
> 
> 标签：windows, svn, windows-authentication, visualsvn-server, authz

我们在 Windows 中使用 VisualSVN 服务器作为 SVN 服务器。但它管理权限的能力非常有限。我们也不能使用 svn_access_file 因为我们的用户将使用 Windows 身份验证方法进行身份验证。

是否有任何工具来管理使用/支持 Windows 身份验证的权限？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-04T11:50:11.983

**2015 年 3 月 9 日更新：**

现在可以通过 PowerShell 管理 Subversion 存储库的基于路径的授权规则。检查[VisualSVN 服务器 | 脚本和自动化](https://www.visualsvn.com/server/features/powershell/)页面。

VisualSVN Server 3.4 和更新版本为服务器和 Subversion 存储库管理提供 PowerShell cmdlet。因此，要管理访问规则并自动执行此类任务，您可以使用以下 cmdlet：

*   [`Add-SvnAccessRule`](https://www.visualsvn.com/support/topic/00088/#Add-SvnAccessRule)
*   [`Get-SvnAccessRule`](https://www.visualsvn.com/support/topic/00088/#Get-SvnAccessRule)
*   [`Remove-SvnAccessRule`](https://www.visualsvn.com/support/topic/00088/#Remove-SvnAccessRule)
*   [`Select-SvnAccessRule`](https://www.visualsvn.com/support/topic/00088/#Select-SvnAccessRule)
*   [`Set-SvnAccessRule`](https://www.visualsvn.com/support/topic/00088/#Set-SvnAccessRule)

> VisualSVN Server 3.4 中引入了许多其他 PowerShell cmdlet。有关 PowerShell cmdlet 和使用示例的完整列表，请阅读文章[VisualSVN 服务器 PowerShell Cmdlet 参考](https://www.visualsvn.com/support/topic/00088/)。

* * *

查看[SVNBook](https://www.visualsvn.com/support/svnbook/serverconfig/pathbasedauthz/)和[VisualSVN 知识库文章](https://www.visualsvn.com/support/topic/00033/)了解基于路径的授权的描述。这不是 Windows 访问控制，它是基于路径的授权，您应该了解区别以便正确有效地配置和管理访问规则。

事实上，我对这个问题感到困惑。VisualSVN Server 有一个很好的 GUI 实现为 MMC 管理单元，允许您通过熟悉的 GUI 管理 svn 用户/组和访问权限。当您使用 Windows 身份验证时，您可以通过标准 Windows / Active Directory 工具管理用户和组。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-04T11:26:17.457

> 它管理权利的能力非常有限

它具有Subversion 本身具有的**所有功能。**

> 我们不能使用 svn_access_file

您可以而且必须确实，因为 Windows 身份验证只定义身份验证方法，svn_access_file 是**授权**文件，可以引用和使用在身份验证阶段获得的用户名。

# java - 在 Netbeans 7.2 中添加 SwingX Pallete

> ID：14684523
> 
> 赞同：4
> 
> 时间：2013-02-04T10:12:27.017
> 
> 标签：java, swing, netbeans, swingx

我正在使用 netbeans 7.2 并想安装 swingX。我已经安装了 swingX 1.6.2 但它不工作。感谢您。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-04T10:44:23.823

The following steps are from [here](http://web.archive.org/web/20120121042921/http://wiki.java.net/bin/view/Javadesktop/SwingXIDE):

**Adding SwingX library to NetBeans:**

1.  Open NetBeans, go to menu Tools > Library Manager and click "New Library...";
2.  Type a name (could be "SwingX") and click Ok;
3.  Select the Library that you created and, in the Classpath box (on the right), click "Add JAR/Folder...";
4.  Then go to the folder where you downloaded swingx.jar file, select it and click "Add JAR/Folder" in this window.

Now the SwingX components are already available to you use in NetBeans. But, to use them in a project, do the following steps:

**Adding SwingX library to the Project Libraries:**

1.  Right click on your project that you want to use the SwingX components and select Properties;
2.  Select "Libraries" in the left box;
3.  Click "Add Library..." and select the library that you created in Adding SwingX library to NetBeans ("SwingX", as I suggested);
4.  Click "Add Library" and then Ok.

Now your project can use the SwingX components, but we already need to set the NetBeans's Palette to show the SwingX components.

**Adding the SwingX components to the NetBeans's Palette:**

1.  Create (or open) a Java GUI Class Form. The Palette will appear;
2.  Right click on the palette and select "Palette Manager...";
3.  Click "New Category...", type a name (could be "SwingX" again) and click Ok;
4.  Select the category that you created in the box and click "Add from Library...";
5.  Select the library that you created in Add SwingX library to NetBeans ("SwingX", as I suggested) and click "Next >";
6.  On the next screen, click in the box and type Ctrl+A (to select all items) and click "Next >" again;
7.  Finally select the category that you created on the third step of this topic ("SwingX", as I suggested);
8.  Click Finish and then Close.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-08-28T18:27:58.123

由于另一个答案有点过时，这是我在 NetBeans 7.3.1 上遵循的步骤

**将 SwingX 库添加到 NetBeans（如果您使用 Maven，则不需要）**

1) 转到`Tools->Ant Libraries`并单击`Add JAR/Folder`以将 SwingX jar 文件添加到 NetBeans 类路径

**使 SwingX 组件在调色板视图中可用**

1）使用打开调色板菜单`Window->Palette`

2）点击该窗口底部的空白区域（您可能需要折叠子窗口）并选择`Palette Manager`

3) 单击`New Category`并创建一个 SwingX 文件夹

4 non-maven) 如果您**不**使用 Maven，请单击`Add from Library`并从上方添加 SwingX jar。

**4 maven**）如果您使用的是 Maven，请单击`Add from JAR`并从 maven 类路径中选择 SwingX jar。您可以在以下位置找到下载的 jar maven`HOME_DIR\.m2\repository\org\swinglabs\swingx\1.6.x\`

4) 选择所有可用的控件，单击下一步，然后从类别中选择 SwingX，然后单击完成

# charts - 带有动态存储的 Extjs3 图表

> ID：14684525
> 
> 赞同：0
> 
> 时间：2013-02-04T10:12:38.343
> 
> 标签：charts, store, extjs3

我正在使用这个 ExtJS 3.4 图表示例：http: [//extjs.cachefly.net/ext-3.4.0/examples/chart/charts.html](http://extjs.cachefly.net/ext-3.4.0/examples/chart/charts.html)（第三个）我想使用一个从 php 返回值而不是像这个例子中的静态商店。我希望我的问题很清楚，感谢您帮助我

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T15:45:26.177

你太不精确了。你想使用什么 PHP 框架？你从哪里加载数据？

根据您的框架，您将需要使用不同的解决方案。对于纯 PHP，Sencha 提供了一些示例。对于 CakePHP 你想看看[http://banchaproject.org](http://banchaproject.org)，对于 Symfony 有[http://www.symfony-project.org/plugins/dsExtDirectPlugin](http://www.symfony-project.org/plugins/dsExtDirectPlugin) , ....

也使用 ExtJS 4！

# java - 如何将 BIRT 框架连接到我的 JPA 项目

> ID：14684528
> 
> 赞同：1
> 
> 时间：2013-02-04T10:12:58.957
> 
> 标签：java, eclipse, jpa, birt

我是 BIRT 框架的初学者。请任何人告诉我我的 JPA 项目 Persistence.xml 与 BIRT 应用程序报告数据源之间的连接所涉及的步骤。有没有人能解决这个问题。。。。。。

# c# - 如何使用 .net 1.1 更改文件访问权限？

> ID：14684529
> 
> 赞同：0
> 
> 时间：2013-02-04T10:12:59.873
> 
> 标签：c#, .net, winapi, .net-1.1

我想使用 .net 1.1 更改远程文件访问权限。我知道在.net 2.0 以后我们可以使用`

> **文件系统访问规则**

`but i want to achieve this in .net 1.1\. For managing remote file access permissions i am mapping network drive using win32 API`**

> **WNetAddConnection2**

远程文件意味着它在同一个域中但在其他机器上。我想删除文件存在的远程机器的本地用户的一些权限。我发现一些链接表明 `.net 1.1 不包括管理 ACE，所以我需要使用 win32 API。如果有一些用于管理访问权限的 API，那么我如何在 C# 中使用它。一些链接会有所帮助。

# oracle11g - SYS.DBMS_AQ 授予导致 ORA-00990

> ID：14684530
> 
> 赞同：0
> 
> 时间：2013-02-04T10:13:00.930
> 
> 标签：oracle11g, oracle11gr2

当试图将 SYS.DBMS_AQ 授予用户时，Oracle 声称该包丢失或无效。ORA-00990。知道为什么 Oracle DB 没有这个包吗？11.2.0.1 是 OracleDB 的版本。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T10:24:39.203

`ORA-00990`表示授权 DDL 不正确，而不是包无效。请检查您使用的 DDL 语法。它应该是以下形式：

```
grant execute on dbms_aq to SCHEMANAME; 
```

代替`SCHEMANAME`您的真实用户。

# android - 成功doinbackground调用的Android禁用按钮

> ID：14684531
> 
> 赞同：0
> 
> 时间：2013-02-04T10:13:01.673
> 
> 标签：android, asynchronous, fatal-error

下面的代码给出了 Fatal Exception Async Task #2 就行了`v1.setEnabled(false)`。

这意味着在成功调用时禁用按钮。之前的`v.setEnabled(false);`后台任务工作正常。请帮忙 ：（

```
public void onClick(View v) {
    Intent intent = new Intent(DISPLAY_MESSAGE_ACTION);
    //this one would work
    //v.setEnabled(false);

    final View v1=v;
    mRegisterTask1 = new AsyncTask<Void, Void, Void>() {

    @Override
    protected Void doInBackground(Void... params) {
        boolean success = 
            ServerUtilities.receipt (((String)v1.getTag()).substring(3),"acknowledged");

        if (success) {
            //this one causes Async Task exception
            v1.setEnabled(false);
        } 
        else {
        }
        return null;
    }

    @Override
    protected void onPostExecute(Void result) {
        mRegisterTask1 = null;
    } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-04T10:16:52.753

您不能从后台线程更改 UI 状态。在主线程中调用的
AsyncTask`onPreExecute()`和方法。 看一看 ：`onPostExecute()`

```
public void onClick(View v) {
    Intent intent = new Intent(DISPLAY_MESSAGE_ACTION);
    //this one would work
    //v.setEnabled(false);

    final View v1=v;
    mRegisterTask1 = new AsyncTask<Void, Void, Boolean>() {

        @Override
        protected Boolean doInBackground(Void... params) {
            boolean success =
                    ServerUtilities.receipt (((String)v1.getTag()).substring(3),"acknowledged");

            return success;
        }

        @Override
        protected void onPostExecute(Bolean result) {

        if (result) {
                //this one causes Async Task exception
                v1.setEnabled(false);
            } else {

            }

            mRegisterTask1 = null;
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T10:18:42.583

您需要从 UI 线程更改小部件。方法`onProgressUpdate`和`OnPostExecute`在 UI therad 中执行。因此，您可以考虑将代码移至后者。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-04T10:16:01.160

将ui修改移至`onPostExecute`

```
boolean success = false;

protected Void doInBackground(Void... params) {
      success = ServerUtilities.receipt (((String)v1.getTag()).substring(3),"acknowledged");

        if (success) {
               //this one causes Async Task exception
                 v1.setEnabled(false);
          } else {

           }
                    return null;
             }
@Override
 protected void onPostExecute(Void result) {
      if (success) {
         //this one causes Async Task exception
            v1.setEnabled(false);
        } else {

        }
       mRegisterTask1 = null;
  } 
```

# java - 适用于 Android 的 Gzip

> ID：14684534
> 
> 赞同：2
> 
> 时间：2013-02-04T10:13:04.607
> 
> 标签：java, android, android-layout, android-intent, android-emulator

我的代码中有以下两种方法。现在，我可以根据以下代码从 URL 读取 JSON。但是，我应该如何修改代码以便获得 gzip 文件，然后将其解码为 JSON？

```
private static String readAll(Reader rd) throws IOException {
    StringBuilder sb = new StringBuilder();
    int cp;
    while ((cp = rd.read()) != -1) {
      sb.append((char) cp);
    }
    return sb.toString();
}

public static JSONObject readJsonFromUrl(String url) throws IOException, JSONException {

    InputStream is = new URL(url).openStream();
    try {
      BufferedReader rd = new BufferedReader(new InputStreamReader(is, Charset.forName("UTF-8")));
      String jsonText = readAll(rd);
      Log.e("size of text", jsonText.length()+"");

      JSONObject json;
      if (jsonText.contains("</div>")) {
          json = new JSONObject(jsonText.split("</div>")[1]);
      } else {
          json = new JSONObject(jsonText);
      }
      return json;
    } finally {
      is.close();
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-04T11:07:00.437

```
public static JSONObject readJsonFromUrl(String url) throws IOException, JSONException {

    HttpUriRequest request = new HttpGet(url);
    request.addHeader("Accept-Encoding", "gzip");
    HttpClient httpClient = new DefaultHttpClient();
    HttpResponse response = httpClient.execute(request);

    InputStream instream = response.getEntity().getContent();
    org.apache.http.Header contentEncoding = response.getFirstHeader("Content-Encoding");

    JSONObject json = null;
    if (contentEncoding != null && contentEncoding.getValue().equalsIgnoreCase("gzip")) {
        BufferedReader rd = new BufferedReader(new InputStreamReader(new GZIPInputStream(instream)));
        String jsonText = readAll(rd);
          if (jsonText.contains("</div>")) {
              json = new JSONObject(jsonText.split("</div>")[1]);
          } else {
              json = new JSONObject(jsonText);
          }
    }
    return json;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-04T10:17:03.550

该代码可以使用 a`GZIPInputStream`来读取 GZipped JSON 数据。

```
public static JSONObject readJsonFromUrl(String url) throws IOException, JSONException {

    InputStream is = new URL(url).openStream();
    try {
      //GZIP InputStream
      BufferedReader rd = new BufferedReader(new InputStreamReader(new GZIPInputStream(is), Charset.forName("UTF-8")));
      //Rest of code...
    } finally {
      is.close();
    }
} 
```

[文档](http://docs.oracle.com/javase/7/docs/api/java/util/zip/GZIPInputStream.html)

为了更有效地迭代，`InputStream`您可以一次读取整行。

```
private static String readAll(BufferedReader rd) throws IOException {
    StringBuilder sb = new StringBuilder();
    String inputLine;

    while ((inputLine = rd.readLine()) != null){
       sb.append(inputLine);
    }

    return sb.toString();
} 
```

* * *

## 完整示例（已测试）

```
public class StackExample {

    /**
     * @param args
     */
    public static void main(String[] args) {
        try {
            readJsonFromUrl("https://api.stackexchange.com/2.1/answers?order=desc&sort=activity&site=stackoverflow");
        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }

    }

    private static String readAll(BufferedReader rd) throws IOException {
           StringBuilder sb = new StringBuilder();
            String inputLine;

            while ((inputLine = rd.readLine()) != null){
               sb.append(inputLine);
            }

            return sb.toString();
    }

    public static void readJsonFromUrl(String url) throws IOException{

        InputStream is = new URL(url).openStream();
        try {
          BufferedReader rd = new BufferedReader(new InputStreamReader(new GZIPInputStream(is), Charset.forName("UTF-8")));
          String jsonText = readAll(rd);
          System.out.println(jsonText);
        } finally {
          is.close();
        }
    }

} 
```

# php - 尝试发送带附件的电子邮件

> ID：14684538
> 
> 赞同：0
> 
> 时间：2013-02-04T10:13:21.837
> 
> 标签：php, email

我似乎无法弄清楚我在发送带有文本文件附件的电子邮件时做错了什么。我没有收到电子邮件，没有看到任何错误。这一切都是新手，现在已经看了几个小时的示例和教程，而我所缺少的并不是突出。感谢您对此的任何帮助。

```
//core/email_cfg.php

function mail_attachment($git_messages, $file) 
{
    $filename = basename($file);
    //define the receiver of the email
    $to = 'whoever@domain.com';

    //define the subject of the email
    $subject = 'Change to Config File '.$filename;

    //message
    $username = isset($_SESSION["username"]) ? $_SESSION["username"] : 'Unknown User';
    $message = 'Notification: The config file named '.$filename. ' was changed by USER='.$username.', GIT Results: '. $git_messages;

    //from:
    $from = "SomeUserEmail@domain.com"; 

    //how do we fit this in?
    //\r\nReply-To: no_reply@domain.com\r\n

    // $file should include path and filename
    $file_size = filesize($file);
    $content = chunk_split(base64_encode(file_get_contents($file))); 
    $uid = md5(uniqid(time()));
    $from = str_replace(array("\r", "\n"), '', $from); // to prevent email injection
    $header = "From: ".$from."\r\n"
          ."MIME-Version: 1.0\r\n"
          ."Content-Type: multipart/mixed; boundary=\"".$uid."\"\r\n\r\n"
          ."This is a multi-part message in MIME format.\r\n" 
          ."--".$uid."\r\n"
          ."Content-type:text/plain; charset=iso-8859-1\r\n"
          ."Content-Transfer-Encoding: 7bit\r\n\r\n"
          .$message."\r\n\r\n"
          ."--".$uid."\r\n"
          ."Content-Type: text/html; charset=iso-8859-1\r\n"
          ."Content-Transfer-Encoding: 7bit\r\n\r\n"
          .$message."\r\n\r\n"
          ."--".$uid."\r\n"               
          ."Content-Type: text/plain; name=\"".$filename."\"\r\n"
          ."Content-Transfer-Encoding: base64\r\n"
          ."Content-Disposition: attachment; filename=\"".$filename."\"\r\n\r\n"
          .$content."\r\n\r\n"
          ."--".$uid."--"; 
    return mail($to, $subject, "", $header);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T10:21:17.930

就个人而言，如果您尝试发送附件，那么考虑使用库可能是一个好主意，因为直接在 PHP 中执行此操作可能会相当棘手。

例如我使用[PHPMailer](https://code.google.com/a/apache-extras.org/p/phpmailer/)。

您可以通过以下方式轻松发送附件：

```
$mail = new PHPMailer();

$mail->IsSMTP();  // telling the class to use SMTP
$mail->Host     = "smtp.example.com"; // SMTP server

$mail->From     = "from@example.com";
$mail->AddAddress("myfriend@example.net");

$mail->Subject  = "First PHPMailer Message";
$mail->Body     = "Hi! \n\n This is my first e-mail sent through PHPMailer.";
$mail->WordWrap = 50;

$mail->AddAttachment("fileNameToAttach");

if(!$mail->Send()) {
  echo 'Message was not sent.';
  echo 'Mailer error: ' . $mail->ErrorInfo;
} else {
  echo 'Message has been sent.';
}
?> 
```

# r - 最大样本

> ID：14684539
> 
> 赞同：5
> 
> 时间：2013-02-04T10:13:22.750
> 
> 标签：r, sampling

如果我想对数字进行采样以创建一个向量，我会这样做：

```
set.seed(123)
x <- sample(1:100,200, replace = TRUE)
sum(x)
# [1] 10228 
```

如果我想采样 20 个总和为 100 的随机数，然后是 30 个数字，但总和仍为 100。我想这将比看起来更具挑战性。`?sample`并且搜索谷歌并没有为我提供线索。如果我猜想的总和不够接近（例如在 5 以内），那么一个循环采样然后拒绝可能需要一些时间。

有没有更好的方法来实现这一目标？

一个例子是：

```
foo(10,100) # ten random numbers that sum to 100\. (not including zeros)
# 10,10,20,7,8,9,4,10,2,20 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-04T10:23:02.950

**使用 R 的尝试**

```
# Config
n <- 20L
target <- 100L
vec <- seq(100)
set.seed(123)

# R repeat loop
sumto_repeat <- function(vec,n,target) {
  res <- integer()
  repeat {
    cat("begin:",sum(res),length(res),"\n")
    res <- c( res, sample(vec,1) )
    if( sum(res)<target & length(res)==(n-1) ) {
      res[length(res)+1] <- target - sum(res)
    }
    # cat("mid:",sum(res),length(res),"\n")
    if(sum(res)>target) res <- res[-length(res)]
    if( length(res)>n | length(res)<n & sum(res)==target ) {
      res <- res[-sample(seq(length(res)),1)]
    }
    # cat("end:",sum(res),length(res),"\n")
    # cat(dput(res),"\n")
    if( sum(res)==target & length(res)==n ) break
  }
  res
}

test <- sumto_repeat(vec=vec,n=n,target=target)
> sum(test)
[1] 100
> length(test)
[1] 20 
```

另外，我会考虑一下您希望从中提取的分布。我*认为*有几种不同的方法可以使其`target`与`n`元素精确相加（例如，您可以使最后一个元素始终为`target - sum(res)`），这些元素可能具有或不具有不同的分布含义。

**Rcpp 中一个非常相似的算法，用于 speeeeed！**

```
cpp_src <- '
Rcpp::IntegerVector xa = clone(x); // Vector to be sampled
Rcpp::IntegerVector na(n); // Number of elements in solution
Rcpp::IntegerVector sa(s); // Sum of solution

int nsampled;
int currentSum;
int dropRandomIndex;
int numZeroes;
Rcpp::IntegerVector remainingQuantity(1);
int maxAttempts = 100;

// Create container for our results
Rcpp::IntegerVector res(maxAttempts);
std::fill( res.begin(), res.end(), NA_INTEGER );

// Calculate min/max so that we can draw random integers from within range
Rcpp::IntegerVector::iterator mn = std::min_element(xa.begin(), xa.end()) ;
Rcpp::IntegerVector::iterator mx = std::max_element(xa.begin(), xa.end()) ;
std::cout << "mx = " << *mx << std::endl;

// Now draw repeatedly
nsampled = 0;
for( int i = 0; i < maxAttempts; i++ ) {
  std::cout << "\\n" << i;
  int r = *mn + (rand() % (int)(*mx - *mn + 1));
  res[i] = xa[r+1];
  // Calculate n and s for current loop iteration
  numZeroes = 0;
  for( int j = 0; j < maxAttempts; j++) 
    if(res[j]==0) numZeroes++;
  std::cout << " nz= " << numZeroes ;
  nsampled = maxAttempts - sum( is_na(res) ) - numZeroes - 1;
  currentSum = std::accumulate(res.begin(),res.begin()+i,0); // Cant just use Rcpp sugar sum() here because it freaks at the NAs
  std::cout << " nsamp= " << nsampled << " sum= " << currentSum;
  if(nsampled == na[0]-1) {  
    std::cout << " One element away. ";
    remainingQuantity[0] = sa[0] - currentSum;
    std::cout << "remainingQuantity = " << remainingQuantity[0];
    if( (remainingQuantity[0] > 0) && (remainingQuantity[0]) < *mx ) {
      std::cout << "Within range.  Prepare the secret (cheating) weapon!\\n";
      std::cout << sa[0] << " ";
      std::cout << currentSum << " ";
      std::cout << remainingQuantity[0] << std::endl;
      if( i != maxAttempts ) {
        std::cout << "Safe to add one last element on the end.  Doing so.\\n";
        res[i] = remainingQuantity[0];
      }
      currentSum = sa[0];
      nsampled++;
      if(nsampled == na[0] && currentSum == sa[0]) std::cout << "It should end after this...nsamp= " << nsampled << " and currentSum= " << currentSum << std::endl;
      break;
    } else {
      std::cout << "Out of striking distance.  Dropping random element\\n";
      dropRandomIndex = 0 + (rand() % (int)(i - 0 + 1));
      res[dropRandomIndex] = 0;
    }
  }
  if(nsampled == na[0] && currentSum == sa[0]) {
      std::cout << "Success!\\n";
      for(int l = 0; l <= i+1; l++) 
        std::cout << res[l] << " " ;
      break;
  }
  if(nsampled == na[0] && currentSum != sa[0]) {
    std::cout << "Reached number of elements but sum is ";
    if(currentSum > sa[0]) {
      std::cout << "Too high. Blitz everything and start over!\\n";
      for(int k = 0; k < res.size(); k++) {
        res[k] = NA_INTEGER;
      }
    } else {
      std::cout << "Too low.  \\n";

    }
  }
  if( nsampled < na[0] && currentSum >= sa[0] ) {
    std::cout << "Too few elements but at or above the sum cutoff.  Dropping a random element and trying again.\\n";
    dropRandomIndex = 0 + (rand() % (int)(i - 0 + 1));
    res[dropRandomIndex] = 0;
  }
}
return res;
'

sumto <- cxxfunction( signature(x="integer", n="integer", s="integer"), body=cpp_src, plugin="Rcpp", verbose=TRUE )

testresult <- sumto(x=x, n=20L, s=1000L)
testresult <- testresult[!is.na(testresult)]
testresult <- testresult[testresult!=0]
testresult
cumsum(testresult)
length(testresult) 
```

尝试了几个不同的值，并产生有效的答案，除非它跑掉。这里有一个警告，如果它与所需的元素数量相距一个并且在“惊人的距离”内，它就会作弊 - 例如，如果该数字有效，它会计算它而不是仅仅绘制最后一个值。

**基准**

有关比较代码，请参见[要点](https://gist.github.com/gsk3/4740012)。

![基准](../Images/c42e138f10ea983cd152a85ec04701c1.png)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-04T12:53:29.193

这是另一个尝试。它不使用`sample`，但使用`runif`. 我在显示总和的输出中添加了一个可选的“消息”，可以使用`showSum`参数触发。还有一个`Tolerance`参数指定需要多接近目标。

```
SampleToSum <- function(Target = 100, VecLen = 10, 
                        InRange = 1:100, Tolerance = 2, 
                        showSum = TRUE) {
  Res <- vector()
  while ( TRUE ) {
    Res <- round(diff(c(0, sort(runif(VecLen - 1)), 1)) * Target)
    if ( all(Res > 0)  & 
         all(Res >= min(InRange)) &
         all(Res <= max(InRange)) &
         abs((sum(Res) - Target)) <= Tolerance ) { break }
  }
  if (isTRUE(showSum)) cat("Total = ", sum(Res), "\n")
  Res
} 
```

这里有些例子。

注意默认设置和设置之间的区别`Tolerance = 0`

```
set.seed(1)
SampleToSum()
# Total =  101 
#  [1] 20  6 11 20  6  3 24  1  4  6
SampleToSum(Tolerance=0)
# Total =  100 
#  [1] 19 15  4 10  1 11  7 16  4 13 
```

您可以使用 来验证此行为`replicate`。这是设置`Tolerance = 0`和运行函数 5 次的结果。

```
system.time(output <- replicate(5, SampleToSum(
  Target = 1376,
  VecLen = 13,
  InRange = 10:200,
  Tolerance = 0)))
# Total =  1376 
# Total =  1376 
# Total =  1376 
# Total =  1376 
# Total =  1376 
#    user  system elapsed 
#   0.144   0.000   0.145
output
#       [,1] [,2] [,3] [,4] [,5]
#  [1,]   29   46   11   43  171
#  [2,]  103  161  113  195  197
#  [3,]  145  134   91  131  147
#  [4,]  154  173  138   19   17
#  [5,]  197   62  173   11   87
#  [6,]  101  142   87  173   99
#  [7,]  168   61   97   40  121
#  [8,]  140  121   99  135  117
#  [9,]   46   78   31  200   79
# [10,]  140  168  146   17   56
# [11,]   21  146  117  182   85
# [12,]   63   30  180  179   78
# [13,]   69   54   93   51  122 
```

设置`Tolerance = 5`和运行该功能5次也是如此。

```
system.time(output <- replicate(5, SampleToSum(
  Target = 1376,
  VecLen = 13,
  InRange = 10:200,
  Tolerance = 5)))
# Total =  1375 
# Total =  1376 
# Total =  1374 
# Total =  1374 
# Total =  1376 
#    user  system elapsed 
#   0.060   0.000   0.058 
output
#       [,1] [,2] [,3] [,4] [,5]
#  [1,]   65  190  103   15   47
#  [2,]  160   95   98  196  183
#  [3,]  178  169  134   15   26
#  [4,]   49   53  186   48   41
#  [5,]  104   81  161  171  180
#  [6,]   54  126   67  130  182
#  [7,]   34  131   49  113   76
#  [8,]   17   21  107   62   95
#  [9,]  151  136  132  195  169
# [10,]  194  187   91  163   22
# [11,]   23   69   54   97   30
# [12,]  190   14  134   43  150
# [13,]  156  104   58  126  175 
```

毫不奇怪，将容差设置为 0 会使函数变慢。

* * *

## 速度（或缺乏）

请注意，由于这是一个“随机”过程，因此很难猜测找到正确的数字组合需要多长时间。例如，使用`set.seed(123)`，我连续运行了 3 次以下测试：

```
system.time(SampleToSum(Target = 1163,
                        VecLen = 15,
                        InRange = 50:150)) 
```

第一次运行只用了 9 秒多一点。第二次只用了 7.5 秒多一点。第三个用时……不到 381 秒！这是很多变化！

出于好奇，我在函数中添加了一个计数器，第一次运行尝试了**55026**次，以达到满足我们所有条件的向量！（我没有费心尝试第二次和第三次尝试。）

在函数中添加一些错误或健全性检查以确保输入是合理的可能会很好。例如，一个人不应该能够输入`SampleToSum(Target = 100, VecLen = 10, InRange = 15:50)`，因为在 15 到 50 的范围内，没有办法达到 100 并且向量中有 10 个值。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-04T21:34:55.907

假设您想要整数（如果不是，请查看 Dirichlet 分布），那么这可以被认为是一个球和瓮问题（对数字之间的关系没有进一步的限制）。

如果你想要 20 个数字，那么可以用 20 个瓮来表示。您希望数字总和为 100，即 100 个球。由于您需要正好 20 个数字（如果您想要最多 20 个数字，请跳过此步骤，但可能会更少）您首先在每个瓮中放置 1 个球，然后在瓮之间随机分配剩余的球。数一数每个瓮中的球数，您将得到 20 个数字，总和为 100。

作为R代码：

```
as.vector(table( c( 1:20, sample(1:20, 80, replace=TRUE) ) )) 
```

`as.vector`只是剥离了表格类和标签。

快速、简单、精确、无循环、递归等。

对于其他总数或值的数量，只需更改上面的相应部分。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-02-04T10:32:52.950

另一种方法，但使用浮点数，所以不完全是您正在寻找的，抱歉：

```
randomsum <- function(nb, sum) {
  tmp <- sort(runif(nb-1))
  tmp <- c(min(tmp), diff(tmp), 1-max(tmp))
  as.vector(quantile(0:sum, probs=tmp))
} 
```

例如：

```
R> result <- randomsum(10, 1000)
R> result
 [1]  35.282191  66.537308  17.263761 182.837409 120.064363 210.752735
 [7] 143.201079   6.164731  34.936359 182.960064
R> sum(result)
[1] 1000 
```

您可以使用`round`结果来获取整数，但当然总和可能与您想要的结果略有不同。一个快速而肮脏的解决方法可以是更改其中一个随机值以使您的向量总和为您想要的数字：

```
randomsumint <- function(nb, sum) {
  tmp <- sort(runif(nb-1))
  tmp <- c(min(tmp), diff(tmp), 1-max(tmp))
  res <- as.vector(quantile(0:sum, probs=tmp))
  res <- round(res)
  res[length(res)] <- res[length(res)]+(sum-sum(res))
  res
} 
```

这会给：

```
R> result <- randomsumint(10,1000)
R> result
 [1]  42 152   0  11  74 138   9 138 172 264
R> sum(result)
[1] 1000 
```

并不是说这远非完美，因为在极少数情况下，您的结果可能会出现负值。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-02-04T22:28:00.290

我想到了组合数学中的[星形、条形](https://en.wikipedia.org/wiki/Stars_and_bars_%28combinatorics%29)和分区：

```
foo <- function(n,total) {
  while(!exists("x",inherits=FALSE) || 1 %in% diff(x)) {
    x <- sort(c(0,sample.int(n+total,n-1,replace=FALSE),n+total))
  }
  print(x)
  sort(diff(x)-1)
} 
```

另一种方法是使用[分区包](http://cran.r-project.org/web/packages/partitions/partitions.pdf)。这更适合枚举所有分区，但现在还可以。只要您的总数很小，它就可以工作。

```
require(partitions)
foo <- function(n,total) { 
  x <- restrictedparts(total,n,include.zero=FALSE)
  return(x[,sample.int(ncol(x),1)])
} 
```

# asp.net - System.FormatException 与 ScriptManager

> ID：14684540
> 
> 赞同：0
> 
> 时间：2013-02-04T10:13:27.903
> 
> 标签：asp.net, ajax, scriptmanager

我`ScriptManager`在 ASP.NET 页面中使用：

```
<asp:ScriptManager ID="ScriptManager1" runat="server"></asp:ScriptManager> 
```

从那时起，每次我重建我的页面（加载程序集）时都会发生错误：

```
[FormatException: String was not recognized as a valid DateTime.]
   System.DateTimeParse.Parse(String s, DateTimeFormatInfo dtfi, DateTimeStyles styles) +3624418
   System.Windows.Forms.TypeLibraryTimeStampAttribute..ctor(String timestamp) +49
   System.Reflection.CustomAttribute._CreateCaObject(RuntimeModule pModule, IRuntimeMethodInfo pCtor, Byte** ppBlob, Byte* pEndBlob, Int32* pcNamedArgs) +0
   System.Reflection.CustomAttribute.CreateCaObject(RuntimeModule module, IRuntimeMethodInfo ctor, IntPtr& blob, IntPtr blobEnd, Int32& namedArgs) +46
   System.Reflection.CustomAttribute.GetCustomAttributes(RuntimeModule decoratedModule, Int32 decoratedMetadataToken, Int32 pcaCount, RuntimeType attributeFilterType, Boolean mustBeInheritable, IList derivedAttributes, Boolean isDecoratedTargetSecurityTransparent) +529
   System.Reflection.CustomAttribute.GetCustomAttributes(RuntimeAssembly assembly, RuntimeType caType) +103
   System.Reflection.RuntimeAssembly.GetCustomAttributes(Boolean inherit) +33
   System.Web.UI.AssemblyCache.GetAjaxFrameworkAssemblyAttribute(Assembly assembly) +76
   System.Web.UI.ScriptManager.get_DefaultAjaxFrameworkAssembly() +399
   System.Web.UI.ScriptManager..ctor() +26
   ASP.usercontrols_asyncprocessingmonitor_ascx.__BuildControlScriptManager1() in d:\Developpement\Projects\CyberClasse\LNMManager\ManagementConsole\UserControls\AsyncProcessingMonitor.ascx:5
   ASP.usercontrols_asyncprocessingmonitor_ascx.__BuildControlTree(usercontrols_asyncprocessingmonitor_ascx __ctrl) in d:\Developpement\Projects\CyberClasse\LNMManager\ManagementConsole\UserControls\AsyncProcessingMonitor.ascx:1
   ASP.usercontrols_asyncprocessingmonitor_ascx.FrameworkInitialize() in d:\Developpement\Projects\CyberClasse\LNMManager\ManagementConsole\UserControls\AsyncProcessingMonitor.ascx.cs:912307
   System.Web.UI.UserControl.InitializeAsUserControlInternal() +35
   System.Web.UI.UserControl.InitializeAsUserControl(Page page) +14
   ASP.provisioning_default_aspx.__BuildControlasyncProcessingMonitor1() in d:\Developpement\Projects\CyberClasse\LNMManager\ManagementConsole\Provisioning\default.aspx:124
   ASP.provisioning_default_aspx.__BuildControlpnlProcessMonitor() in d:\Developpement\Projects\CyberClasse\LNMManager\ManagementConsole\Provisioning\default.aspx:123
   ASP.provisioning_default_aspx.__BuildControlForm1() in d:\Developpement\Projects\CyberClasse\LNMManager\ManagementConsole\Provisioning\default.aspx:51
   ASP.provisioning_default_aspx.__BuildControlTree(provisioning_default_aspx __ctrl) in d:\Developpement\Projects\CyberClasse\LNMManager\ManagementConsole\Provisioning\default.aspx:1
   ASP.provisioning_default_aspx.FrameworkInitialize() in d:\Developpement\Projects\CyberClasse\LNMManager\ManagementConsole\Provisioning\default.aspx.cs:912308
   System.Web.UI.Page.ProcessRequest(Boolean includeStagesBeforeAsyncPoint, Boolean includeStagesAfterAsyncPoint) +54
   System.Web.UI.Page.ProcessRequest() +78
   System.Web.UI.Page.ProcessRequestWithNoAssert(HttpContext context) +21
   System.Web.UI.Page.ProcessRequest(HttpContext context) +49
   ASP.provisioning_default_aspx.ProcessRequest(HttpContext context) in c:\Users\nba\AppData\Local\Temp\Temporary ASP.NET Files\managementconsole\6fc95b25\3fc34eab\App_Web_pm33amsb.2.cs:0
   System.Web.CallHandlerExecutionStep.System.Web.HttpApplication.IExecutionStep.Execute() +100
   System.Web.HttpApplication.ExecuteStep(IExecutionStep step, Boolean& completedSynchronously) +75 
```

刷新页面后，错误就会消失。我不明白这个错误。在许多论坛中，将`System.Windows.Forms`程序集视为此错误的根源。这个程序集在我的网站项目中被引用，但我删除了它，错误仍然出现。

### 编辑

[例如，在此处](http://forums.asp.net/p/1581204/4142689.aspx)和[此处](http://www.telerik.com/community/forums/aspnet-ajax/scriptmanager-and-stylesheetmanager/the-string-was-not-recognized-as-a-valid-datetime.aspx)（但关于自定义脚本管理器）报告了此问题。

### 编辑 2

出色地。这是插入到asp.net页面中的用户控件的一些代码。

```
<asp:UpdatePanel ID="UpdatePanel1" runat="server" style="width:70%;" >
    <ContentTemplate>
        <asp:HiddenField ID="HiddenFieldProcessID" runat="server" />
        <asp:HiddenField ID="HiddenFieldRedirectURL" runat="server" Value="" />
        <asp:HiddenField ID="HiddenFieldRedirect" runat="server" Value="false" />
        <asp:Timer ID="TimerStatusUpdate" runat="server" Interval="1000" OnTick="TimerStatusUpdateTick"></asp:Timer>
        <br/><br/>
        <div align="center"><asp:Image ID="ImageProgressGif" runat="server" ImageUrl="https://cms.unov.org/FullTextSearch/Common/Images/progress.gif" /></div>
        <br/>
        <table>
            <tr>
                <td style="width: 30%;">Label Text :
                </td>
                <td>
                    <b>
                        <asp:Label ID="LabelCurrent" runat="server"></asp:Label> / <asp:Label ID="LabelTotal" runat="server"></asp:Label>
                    </b>
                    <input id="inputpercentage" name="inputpercentage" type="text" runat="server" hidden="true"/>
                    <input type="hidden" runat='server' id="completed" value="" />
                    <br/>
                </td>
            </tr>
        </table>
        <table>
            <tr>
                <td>
                    <asp:label id="LabelExportInfo" runat="server" Width="100%" Visible="true" Font-Size="Small" ForeColor="#6666FF"></asp:label>
                    <asp:linkbutton id="LinkExportInfo" runat="server" Width="100%" Visible="true" OnClick="DownloadFile" Font-Size="Small"></asp:linkbutton>
                </td>
            </tr>
            <tr>
                <td>
                    <asp:Label ID="LabelPasswordChanged" runat="server" Font-Size="Small" ForeColor="Red"></asp:Label>
                </td>
            </tr>
        </table>
    </ContentTemplate>
</asp:UpdatePanel> 
```

但是，正如我所说，堆栈跟踪和提供的主题显示的报告问题来自程序集（其“TypeLibraryTimeStampAttribute”属性更具体）。但是，我的观点是，我怎么知道它是关于哪个程序集的？

此外，按照主题中的建议，我已经删除了项目中对 System.Windows.Form 的引用，但没有结果。

### 编辑 3

一位同事在他的计算机上打开了该项目，构建并运行它，没有任何错误。他的一切都很好。所以，明确地说，这个问题在代码外部。我就像他岛上的约翰洛克：迷路了。

有什么线索吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T13:00:17.803

在花了几个小时解决这个问题后，我找到了原因。

它是一个程序集，我在我的项目中需要 AxAcroPDFLib.dll（需要 AcroPDFLib.dll 并生成 AxAcroPDFLib.dll 的 Migradoc）。它有一个日期格式错误的属性。 [这家伙](http://forums.asp.net/t/1678544.aspx/1?Error%20in%20ScriptManager%20constructor)和我有同样的问题。

但是我不能取消使用 Migradoc，所以我的问题仍然存在，但是现在，我知道错误到底是什么，以及为什么会发生。

## 编辑：问题已解决

部分解决了问题。我清理了我的项目需要的程序集。两个 PDFSharp dll 没用，所以我删除了引用，删除了所有 bin 文件夹，并重建了我的解决方案。和 TADAAAA。AxAcroPDFLib.dll 已消失，错误不再出现。

# .net-4.0 - 为什么 Windows Server 2012 不支持 .NET Framework 4.0？

> ID：14684541
> 
> 赞同：6
> 
> 时间：2013-02-04T10:13:30.823
> 
> 标签：.net-4.0, windows-server-2012

我曾尝试将基于 .NET Framework 4.0 构建的应用程序与 Windows Server 2012 一起使用，但它不起作用，根据 MSDN，.NET Framework 4.0 不支持 Server 2012。这是为什么？在不将我的应用程序转换为 Framework 4.5 的情况下如何解决这个问题？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-04T10:32:40.220

.NET v4.5 是一种用新的更新 .NET v4.0 的运行时，当您安装 .NET v4.5 时，您的 .NET v4.0 程序集会`\Windows\.NET Framework\V4.0.30319`被一组新的程序集覆盖。您最终会得到覆盖的程序集以及一堆新的程序集（`System.Net.Http`例如新程序集）。

请参阅这些文章：

[.NET 4.5 是 .NET 4.0 的就地替代品](http://www.west-wind.com/weblog/posts/2012/Mar/13/NET-45-is-an-inplace-replacement-for-NET-40)

[宣布发布 .NET Framework 4.5 RTM](http://blogs.msdn.com/b/dotnet/archive/2012/08/15/announcing-the-release-of-net-framework-4-5-rtm-product-and-source-code.aspx)

[.Net 框架 4.5 的新功能](http://msdn.microsoft.com/en-us/library/ms171868.aspx)

[.NET Framework 4.5 中的应用程序兼容性](http://msdn.microsoft.com/en-us/library/hh367887%28v=VS.110%29.aspx)

[.NET Framework 4.5 中的新增功能](http://www.drdobbs.com/windows/whats-new-in-net-framework-45/240008327)

[Windows Server 2012 阻止 Framework 4.0](http://support.microsoft.com/kb/2765375)

[http://coolthingoftheday.blogspot.de/2012/03/net-45-is-what-to-net-40-replacement-or.html](http://coolthingoftheday.blogspot.de/2012/03/net-45-is-what-to-net-40-replacement-or.html)

# php - php mysql table2的总和并按表的字段分组

> ID：14684542
> 
> 赞同：0
> 
> 时间：2013-02-04T10:13:39.840
> 
> 标签：php, mysql

我想从销售表中汇总金额并希望按品牌对其进行分组，谁能帮我正确查询 php mysql。

```
--- product ---

id  pcode   pname   brand
1   123     Dalda   1
2   124     Habib   1
3   125     Sufi    2
4   126     Toyota  3

--- sale ---
id  pcode   pname   amount
1   123     Dalda   1020
2   123     Dalda   1020
3   124     Habib   1030
4   124     Habib   1030
5   125     Sufi    1040
6   125     Sufi    1040
7   126     Toyota  1050 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T10:16:35.747

```
SELECT
  p.pname,
  IFNULL(SUM(amount), 0) AS TotalAmount
FROM product p
LEFT JOIN sale s ON p.pcode = s.pcode
GROUP BY p.pname; 
```

## [SQL 小提琴演示](http://www.sqlfiddle.com/#!2/eb67a/1)

这会给你：

```
|  PNAME | TOTALAMOUNT |
------------------------
|  Dalda |        2040 |
|  Habib |        2060 |
|   Sufi |        2080 |
| Toyota |        1050 | 
```

**请注意：**不需要将 存储`pname`在第二个表中`Sale`。删除它，因为它已经存储在第一个表中`Product`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-04T10:16:46.217

```
select p.brand, sum(s.amount)
FROM product p
INNER JOIN sale s on s.pcode = p.pcode
GROUP BY p.brand 
```

您将仅获得在销售表中有条目的品牌。

如果您想要所有品牌，即使在销售表中没有条目，也可以使用 a`LEFT JOIN`和

```
COALESCE(SUM(amount, 0)) 
```

顺便说一句，正如 Mahmoud Gamal 所指出的，您不需要表 Sale 中的 pname。我也不会使用 pcode 作为“关系列”，而是使用产品 ID。例如，您可以删除 pcode 和 pname 并使用新列 p_id。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-04T10:19:45.237

```
select pr.pcode,pr.pname,pr.brand,sum(s.amount)
from product pr
left join sale s
on pr.pcode=s.pcode
group by pr.pcode,pr.pname,pr.brand 
```

# localization - WiX：如何创建包含多种语言安装向导的单个 MSI 文件？

> ID：14684544
> 
> 赞同：3
> 
> 时间：2013-02-04T10:13:41.730
> 
> 标签：localization, wix, windows-installer

我想将我的应用程序作为单个 MSI 文件分发。
安装向导必须显示在用户的区域设置中，例如法语或日语。

**问题：**如何使用 WiX 实现这一目标？

*笔记：*

*   *[light -culture](http://wix.tramontana.co.hu/tutorial/user-interface/do-you-speak-english)为每种文化生成一个 MSI，而不是我想要的。*
*   *我的应用程序的其余本地化工作，单个 MSI。只有安装程序拒绝本地化。*
*   *我宁愿避免[使用未记录的 MSI 功能](http://www.installsite.org/pages/en/msi/articles/embeddedlang/index.htm)，因为 WiX[会警告它](http://windows-installer-xml-wix-toolset.687559.n2.nabble.com/Localization-issue-One-msi-file-for-several-languages-td5260178.html)。*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T13:39:19.327

Windows Installer 不支持其 UI 具有一种以上语言的一个 .msi 包。-cultures 开关告诉 WiX 生成四个 .msi 包，每种文化一个。

# asp.net - Ajax 工具包中的日历扩展器在 ASP.NET 内容页面中无法正常工作

> ID：14684545
> 
> 赞同：3
> 
> 时间：2013-02-04T10:13:43.577
> 
> 标签：asp.net, ajax, calendar

我正在 asp.net 中实现一个项目，我正在使用 Ajax 工具包的日历扩展器。
日历扩展器用于内容页面。但它没有正确显示日历。日历从拥有日历扩展器的“文本框”中放错了位置。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-04T06:50:24.820

您只需在单独的 CSS 类中编写日历扩展器的样式，

然后将其分配给日历扩展器。

```
<asp:CalendarExtender   ID="CalendarExtender1"  runat="server"  TargetControlID="TextBox1"    CssClass="CalendarCSS"/> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-04T11:08:11.297

试试这个 ..

```
<asp:TextBox   ID="TextBox1"  runat="server"/>

<asp:CalendarExtender   ID="CalendarExtender1"  runat="server"  TargetControlID="TextBox1"    CssClass="CalendarCSS"/> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-04T14:22:01.527

确保 Calendar Extender 的**TargetControlID**等于 TextBoxID，然后包含**PopupPosition**属性。

例如：

```
<asp:TextBox ID="TextBox1" runat="server"></asp:TextBox>
<cc1:CalendarExtender ID="CalendarExtender1" runat="server" TargetControlID="TextBox1" PopupPosition="Right"></cc1:CalendarExtender> 
```

我希望它对你有帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-05-14T06:43:40.377

解决此问题的最佳方法是在页面顶部添加一个 ajax 程序集：

```
<%@ Register assembly="AjaxControlToolkit" namespace="AjaxControlToolkit" tagprefix="ajaxToolkit" %> 
```

并且不要忘记将日历扩展器上的标记前缀添加为“ajaxToolkit”。

前任：

```
<ajaxToolkit:CalendarExtender ID="txtPostingDate_CalendarExtender"
runat="server" Enabled="True" TargetControlID="txtPostingDate"
Format="MM/dd/yyyy">
                                            </ajaxToolkit:CalendarExtender> 
```

# .net - Twitter Bootstrap 语法错误

> ID：14684546
> 
> 赞同：1
> 
> 时间：2013-02-04T10:13:50.900
> 
> 标签：.net, asp.net-mvc-3, visual-studio-2010, css, twitter-bootstrap

我已经配置`Twitter Bootstrap`了我的`Asp.net MVC 3`应用程序。但是当我看到`bootstrap.css`它有很多语法问题时，如下所示。

我正在使用`Visual studio 2010 with CSS 3 enabled`.

**错误列表 1：**

![在此处输入图像描述](../Images/feb2f7a4b416d567ad179c3a32bd1fbb.png)

**错误列表 2：**

![在此处输入图像描述](../Images/79cfc337b928144e5cb5e6af40b3f749.png)

**错误列表 3：**

![在此处输入图像描述](../Images/49e5b2528550ac6b490e75b9938b1f4d.png)

**更新**

将 Bootstrap 添加到我的 MVC 项目后的文件夹结构如下。

![在此处输入图像描述](../Images/6d4e55c89ff8898535510a7213b3bde5.png)

如何摆脱上述问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T14:29:44.763

您遇到的问题源于 VS2010 有错误的 CSS 智能感知。在 VS2012 中查看 bootstrap.css 文件有很大改进，报告的解析错误要少得多。这两个解析器都不一定表明 CSS 无效。在目标浏览器和平台上决定并测试特定于引导程序的样式规则是这些样式规则有效性的更强有力的指标。如果您担心它是否有效，您应该通过外部验证器运行您的 CSS，例如 @kolin 提到的。最终的测试始终是它如何跨浏览器呈现。

# iphone - #define 宏中的代码是否添加到构建中？

> ID：14684547
> 
> 赞同：1
> 
> 时间：2013-02-04T10:13:57.867
> 
> 标签：iphone, ios, objective-c, cocoa-touch

我在宏中有某些代码行

```
//#define EnablePushNotification

#ifdef EnablePushNotification
[[UIApplication sharedApplication] registerForRemoteNotificationTypes:(UIRemoteNotificationTypeBadge | UIRemoteNotificationTypeSound|UIRemoteNotificationTypeAlert)];
#endif 
```

我的问题是“如果“EnablePushNotification”被注释掉，生成的 .ipa 文件是否会包含“EnablePushNotification”中的代码？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T10:18:41.220

注释是在预处理器启动[之前](http://en.wikipedia.org/wiki/C_preprocessor#Phases)处理的，所以不会。

# ios - Xcode 中的单元测试给出了一个 Shell 脚本调用警告

> ID：14684550
> 
> 赞同：0
> 
> 时间：2013-02-04T10:14:12.633
> 
> 标签：ios, xcode, unit-testing

当我在 Xcode GUI 中运行单元测试时，我收到此警告

```
Skipping tests; the iPhoneSimulator platform does not currently support application-hosted tests (TEST_HOST set). 
```

![在此处输入图像描述](../Images/8941227248bd193f3ed0b4cb250f87b1.png)

Xcode 不执行我的单元测试，但我收到测试成功的消息。看起来它只是跳过了我的测试。

PS 我知道很多人在从命令行运行单元测试时会遇到这个错误，但这发生在 Xcode GUI 中

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T10:47:23.503

Xcode 无法运行应用程序托管的单元测试。

开发人员站点有解决方法：http: [//developer.apple.com/library/ios/#documentation/developertools/Conceptual/UnitTesting/02-Setting_Up_Unit_Tests_in_a_Project/setting_up.html](http://developer.apple.com/library/ios/#documentation/developertools/Conceptual/UnitTesting/02-Setting_Up_Unit_Tests_in_a_Project/setting_up.html)

# heroku - 向 heroku 实例添加只读部署密钥

> ID：14684552
> 
> 赞同：0
> 
> 时间：2013-02-04T10:14:17.230
> 
> 标签：heroku

我正在部署一个 Go 项目，但它的`go get ./...`阶段失败了，因为存储库是私有的，并且 heroku 实例没有有效的私钥来提取它。

是否可以将私有只读部署密钥（例如 bitbucket）添加到 heroku 实例？

如果我将它添加到 buildpack 本身，它将向所有人公开，因为 buildpacks 是公共存储库。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T05:06:34.040

[Heroku Labs](https://devcenter.heroku.com/articles/labs)有一个名为的功能[`user-env-compile`](https://devcenter.heroku.com/articles/labs-user-env-compile)，它允许您的应用程序的配置变量在编译时可用。如果你启用了这个，你可以添加你的部署密钥，`heroku config:add KEY=VALUE`然后让你的 buildpack 从环境中读取编译时的值。由于您的应用程序的所有配置都将可用，因此请确保您使用的是可信赖的构建包。有关此功能的更多信息，请参阅开发中心文章：

[https://devcenter.heroku.com/articles/labs-user-env-compile](https://devcenter.heroku.com/articles/labs-user-env-compile)

# android - 将 Edittexts 提示文本样式设置为斜体

> ID：14684559
> 
> 赞同：33
> 
> 时间：2013-02-04T10:14:46.657
> 
> 标签：android, android-edittext, italic

我需要将 EditText 的提示设置为斜体样式，但我找不到任何地方可以做到这一点。

这里有人知道该怎么做，还是我必须接受这是不可能的？

* * *

## 回答 #1

> 赞同：86
> 
> 时间：2013-02-04T10:24:13.890

里面的strings.xml

```
 <string name="hint1"><i>Your hint here</i></string> 
```

在您的 .xml 文件中

```
 <EditText android:hint="@string/hint1" /> 
```

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2013-02-04T10:21:20.647

在 Strings.xml 中添加一个字符串值，`<i>your hint here</i>`并尝试在 xml 中的 EditText 中设置它

解决方案2：

```
if(youredittext.getText().toString().length()==0)
{
    youredittext.setTypeface(null,Typeface.ITALIC);
}
else
{
youredittext.setTypeface(null,Typeface.NORMAL);
} 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-02-04T10:24:22.003

尝试如下：

> ```
> edittext.setHint(Html.fromHtml("<small><i>" + "Text Hint Here" + "</i></small>")); 
> ```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-01-05T12:48:11.460

在您的 xml 中，您可以设置 TextStyle。此 TextStyle 适用于您的文本和提示。

```
<EditText
android:id="@+id/editText"
android:layout_width="wrap_content"
android:layout_height="wrap_content"
android:hint="@Your text here"
android:textStyle="italic"/> 
```

# android - Sax 解析...输出未完成

> ID：14684560
> 
> 赞同：0
> 
> 时间：2013-02-04T10:14:51.960
> 
> 标签：android, parsing, sax

在解析这个时，我无法获得所有属性。我只是得到名字，任何人都可以帮助我。我没有错在哪里…………

```
 public class Xmlfile extends Activity {
// For Single Data
private List<String> item = new ArrayList<String>();
public ArrayList<Gettersandsetters> data = new ArrayList<Gettersandsetters>();

Xmlfile x;

private boolean in_name;
private boolean in_formatted_address;
private boolean in_lat;
private boolean in_lng;
Gettersandsetters d;

/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    x = this;
    new StudentTask().execute();
}

public class StudentTask extends AsyncTask<Void, Void, Void> {
    ProgressDialog pd;

    @Override
    protected void onPreExecute() {
        // TODO Auto-generated method stub
        super.onPreExecute();
        pd = ProgressDialog.show(x, "Please Wait", "Loading Data");

        pd.setCancelable(true);
    }

    @Override
    protected Void doInBackground(Void... params) {
        // TODO Auto-generated method stub

        try {

            URL u = new URL(
                    "https://maps.googleapis.com/maps/api/place/textsearch/xml?query=restaurants+eF5s");
            InputSource i = new InputSource(u.openStream());

            SAXParserFactory sx = SAXParserFactory.newInstance();
            SAXParser msx = sx.newSAXParser();

            XMLReader reader = msx.getXMLReader();

            MyXmlHandler myRSSHandler = new MyXmlHandler();

            reader.setContentHandler(myRSSHandler);
            // Reading xml file from raw folder.
            // InputStream istream = null;
            // istream =
            // getApplicationContext().getResources().openRawResource(R.raw.studentdetails);

            // InputSource myInputSource = new
            // InputSource(rssUrl.openStream());

            // myXMLReader.parse(myInputSource);
            reader.parse(new InputSource(u.openStream()));

        } catch (Exception e) {
            // TODO: handle exception
            e.printStackTrace();
        }
        return null;
    }

    protected void onPostExecute(Void result) {
        // TODO Auto-generated method stub
        super.onPostExecute(result);

        // setListAdapter(new
        // ArrayAdapter<String>(x,android.R.layout.simple_list_item_1,
        // item));
        // StudentDetails d = new StudentDetails();
        // data.add(d);
        ListView l = (ListView) findViewById(R.id.list);
        Demo demo = new Demo();
        l.setAdapter(demo);
        l.setOnItemClickListener(new OnItemClickListener() {

            @Override
            public void onItemClick(AdapterView<?> arg0, View v,
                    int position, long arg3) {
                // TODO Auto-generated method stub
                if (data.get(position) != null) {
                    Intent in = new Intent(Xmlfile.this, Mapview.class);
                    startActivity(in);

                }
            }
        });

        l.setOnItemLongClickListener(new OnItemLongClickListener() {

            @Override
            public boolean onItemLongClick(AdapterView<?> arg0, View v,
                    int position, long arg3) {
                // TODO Auto-generated method stub
                if (data.get(position) != null) {
                    AlertDialog ab = new AlertDialog.Builder(
                            Xmlfile.this).create();

                    ab.setTitle("Restaurent Dtails");

                    //TextView name1 = (TextView) v.findViewById(R.id.name);
                    //name1.setText(data.get(position).getName());
                    ab.setMessage(data.get(position).getName()+""+data.get(position).getFormatted_address());

                    ab.setButton("OK", new DialogInterface.OnClickListener() {
                        public void onClick(DialogInterface dialog, int which) {
                        // Write your code here to execute after dialog closed
                        Toast.makeText(getApplicationContext(), "You clicked on OK", Toast.LENGTH_SHORT).show();
                        }
                });

                    ab.show();
                }

                return true;
            }
        });
        pd.dismiss();
    }

}

// 1)Implementing Handler to get data from xml file
public class MyXmlHandler extends DefaultHandler {
    private boolean in_name = false;
    private boolean in_formatted_address = false;
    private boolean in_lat = false;
    private boolean in_lng = false;
    private boolean in_result = false;

    // private boolean in_clas = false;
    // private boolean in_phno = false;
    // private boolean in_email = false;

    String name;
    String formatted_address;
    String lat, lng;

    @Override
    public void startDocument() throws SAXException {
        // TODO Auto-generated method stub
    }

    @Override
    public void endDocument() throws SAXException {
        // TODO Auto-generated method stub
    }

    @Override
    public void startElement(String uri, String localName, String qName,
            Attributes attributes) throws SAXException {

        if (localName.equalsIgnoreCase("result")) {
            d = new Gettersandsetters();

            this.in_result = true;
        } else if (localName.equalsIgnoreCase("name")) {

            this.in_name = true;
        } else if (localName.equalsIgnoreCase("formatted_address")) {

            this.in_formatted_address = true;

        } else if (localName.equalsIgnoreCase("lat")) {

            this.in_lat = true;
        }

        else if (localName.equalsIgnoreCase("lng")) {

            this.in_lng = true;
        }
    }

    @Override
    public void characters(char[] ch, int start, int length)
            throws SAXException {
        if (this.in_name) {

            name = new String(ch, start, length);
            d.setName(name);
             Log.v("name========", name + data.size());

        }

        else if (this.in_formatted_address) {

            formatted_address = new String(ch, start, length);
            d.setFormatted_address(formatted_address);
            Log.v("name========", formatted_address + data.size());
        } else if (this.in_lat) {

            lat = new String(ch, start, length);

            d.setLat(lat);

        }

        else if (this.in_lng) {

            lng = new String(ch, start, length);
            d.setLng(lng);

        }

    }

    public void endElement(String uri, String localName, String qName)
            throws SAXException {
        // TODO Auto-generated method stub
        if (localName.equals("name")) {

            this.in_name = false;

        } else if (localName.equals("formatted_address")) {
            this.in_formatted_address = false;

        }

        else if (localName.equals("lat")) {
            this.in_lat = false;

        } else if (localName.equals("lng")) {
            this.in_lng = false;

        } else if (localName.equals("result")) {
            this.in_result = false;
            data.add(d);
        }

    }
}

public class Demo extends BaseAdapter

{
    Activity context;
    private List<String> s;

    public Demo() {
        super();
        this.context = context;
        this.s = s;
    }

    @Override
    public int getCount() {
        // TODO Auto-generated method stub
        // return LISTITEMS.size();
        return data.size();
    }

    @Override
    public Object getItem(int position) {
        // TODO Auto-generated method stub
        return data.get(position);
    }

    @Override
    public long getItemId(int position) {
        // TODO Auto-generated method stub
        return position;
    }

    @Override
    public View getView(int position, View convertView, ViewGroup parent) {

        View v = convertView;

        if (v == null) {
            LayoutInflater vi = LayoutInflater.from(parent.getContext());
            v = vi.inflate(R.layout.activitymain, null);
        }

        final Gettersandsetters studentdetails = data.get(position);

        TextView name = (TextView) v.findViewById(R.id.name);
        TextView formatted_address = (TextView) v
                .findViewById(R.id.formatted_address);
        TextView lat = (TextView) v.findViewById(R.id.lat);
        TextView lng = (TextView) v.findViewById(R.id.lng);

        // c.moveToPosition(position);

        // img.setImageResource(Integer.parseInt(c.getString(0)));

        name.setText(data.get(position).getName());
        formatted_address
                .setText(data.get(position).getFormatted_address());
        Log.v("rformated address", ""+formatted_address);
        lat.setText(data.get(position).getLat());
        lng.setText(data.get(position).getLng());

        return v;
    }

} 
```

Gettera 和二传手

包 com.sudheer.webservices；

公共类 Gettersandsetters {

```
public String name,formatted_address,lat,lng;

public Gettersandsetters(String n,String f,String la,String ln)
{
    this.name=n;
    this.formatted_address=f;
    this.lat=la;
    this.lng=ln;

} 
```

公共Gettersandsetters(){

}

```
public String getName() {
    return name;
}
public void setName(String name) {
       this.name = name;
   }

public String getFormatted_address() {
    return formatted_address;
}

public void setFormatted_address(String Formatted_address) {
       this.formatted_address = formatted_address;
   }
public String getLat() {
    return lat;
}
public void setLat(String Lat) {
       this.lat = lat;
   }

public String getLng() {
    return lng;
}

public void setLng(String Lng) {
       this.lng = lng;
   } 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-09T01:31:13.420

你有一个正常的

> 请求被拒绝

当您到达您提供的网址时（[https://maps.googleapis.com/maps/api/place/textsearch/xml?query=restaurants+eF5s](https://maps.googleapis.com/maps/api/place/textsearch/xml?query=restaurants+eF5s)）？

这可能是一个好的开始

# windows - 模拟用户交互

> ID：14684561
> 
> 赞同：5
> 
> 时间：2013-02-04T10:14:53.070
> 
> 标签：windows

是否可以模拟用户输入？我怎么能意识到这一点？

我需要自动化用户与 Windows 应用程序的交互。问题是，这个应用程序没有为我需要调用的一个特殊函数提供 API。但此功能可通过标准鼠标输入在应用程序窗口中访问。

我不依赖任何编程语言。我只需要编写一个执行相同操作的应用程序，就像我使用计算机鼠标输入一样。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-04T10:34:41.640

我自己没有使用过它，但[AutoIt](http://www.autoitscript.com/site/autoit/)似乎是您正在寻找的东西。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-02-26T18:00:39.517

您可以使用 Telerik Test Studio - [http://www.telerik.com/teststudio/，Sikuli](http://www.telerik.com/teststudio/) - [http://www.sikuli.org/，Microsoft](http://www.sikuli.org/) Visual Studio 和 UI 自动化 - [http://msdn.microsoft.com/ en-us/library/aa348551(v=vs.110).aspx](http://msdn.microsoft.com/en-us/library/aa348551(v=vs.110).aspx)或 AutoIt - [http://www.autoitscript.com/site/autoit/](http://www.autoitscript.com/site/autoit/)

Telerik Test studio 提供了非常不错的记录器，它可以让您在不编写任何代码的情况下记录您的测试。

# perl - 在多个 HTML 文件中打印

> ID：14684563
> 
> 赞同：0
> 
> 时间：2013-02-04T10:14:59.683
> 
> 标签：perl, html-parsing, lwp

我对 Perl 比较陌生。我有一个 URL 列表，我只想从中提取文本并将其打印在不同的文件中。这是我的代码示例：

```
#!/usr/bin/perl -w

use strict;
use locale;
use warnings;
#use diagnostics;
use utf8;

binmode(STDIN, "encoding(utf8)");
binmode(STDOUT, "encoding(utf8)");
binmode(STDERR, "encoding(utf8)");

use LWP::Simple;
use HTML::Parse;

open (CLEANURL, '<:utf8', "clean_keyword_url_5.3.txt")  || die ("Cannot open File\n");
open(STORECODE, '>:utf8', "Bstored_keyword_url_5.3.txt")  || die ("Cannot open File\n");

my $url2parse;
my @arg = <CLEANURL>;
close (CLEANURL);

foreach my $arg(@arg) {
    $url2parse = parse_html(get($arg))->format;
    print STORECODE $url2parse;
}

close (STORECODE); 
```

在`clean_keyword_url_5.3.txt`我有如下链接：

[http://www.ladepeche.fr/article/2013/01/31/1548850-aulon-l-activite-est-paralysee.html#xtor=RSS-6](http://www.ladepeche.fr/article/2013/01/31/1548850-aulon-l-activite-est-paralysee.html#xtor=RSS-6)

[http://tdg.ch/monde/faits-divers/Deux-alpinistes-meurent-dans-une-avalanche-en-Isere/story/10446351](http://tdg.ch/monde/faits-divers/Deux-alpinistes-meurent-dans-une-avalanche-en-Isere/story/10446351)

所以主要是法国或瑞士当地报纸。我想将每个链接打印在一个单独的文件夹中，我尝试使用一组文件句柄并使用 的“getstore”方法来执行此操作`LWP::Simple`，但是我无法在所有链接上进行循环。它会创建所有文件，但每个文件中只打印一个 URL 的内容。我找不到任何关于`LWP::Simple`在阵列上运行的信息，似乎每个人都使用这个模块，只有一个或两个 URL。

我也有一个看起来像这样的哈希的想法：

```
#!/usr/bin/perl -w

use strict;
use locale;
use warnings;
#use diagnostics;
use utf8;

binmode(STDIN, "encoding(utf8)");
binmode(STDOUT, "encoding(utf8)");
binmode(STDERR, "encoding(utf8)");

use LWP::Simple;
use HTML::Parse;

open (CLEANURL, '<:utf8', "clean_keyword_url_5.3.txt") || die ("Cannot open File\n");
#open(STORECODE, '>:utf8', "Bstored_keyword_url_5.3.html")  || die ("Cannot open File\n");

my $url2parse;
my @arg = <CLEANURL>;
close (CLEANURL);

my @filehandles;
my $i;

for ($i = 0; $i<@arg; $i++){
    local *FILE;
    open (FILE, '>:utf8', "Bstored_keyword_url_5.3.$i.html")|| die;
    push (@filehandles, *FILE);
}

foreach my $arg(@arg) {
    $url2parse = parse_html(get($arg))->format;
    foreach my $file(@filehandles){
       my %hash = {key => $file};
       $hash{key} .= $val;
       print $file "$hash{key}";    
    }
}

#close (STORECODE); 
```

您可能会注意到此代码不起作用。问题是我无法完全理解它。

因此，如果您有任何想法，那将非常有帮助。谢谢 ！！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T08:11:40.807

感谢 amon，这是更新后的代码：

```
#!/usr/bin/perl -w

use strict;
use locale;
use warnings;
#use diagnostics;
use utf8;

binmode(STDIN, "encoding(utf8)");
binmode(STDOUT, "encoding(utf8)");
binmode(STDERR, "encoding(utf8)");

use LWP::Simple;
use HTML::Parse;

open (CLEANURL, '<:utf8', "clean_keyword_url_5.3.txt")  || die ("Cannot open File\n");
open (STORECODE, '>:utf8', "all_articles.txt")  || die ("Cannot open File\n");

my $counter = 0;

while(my $link = <CLEANURL>){
    chomp ($link);
    my $filename = "cstored_keyword_url_5.3.$counter.txt";
    open (my $fh, ">:utf8", $filename) || die "Couldn't open $filename: $!";
    my $content = get($link);
    unless (defined $link){
        warn "WARNING: Failed to fetch $link";
    }
    $content = parse_html($content) || die "Couldn't parse $content";
    my $text = $content->format;
    if (defined $text){
       print $fh $text;
       print STORECODE $text;
    }else{
       warn "WARNING: Failed to fetch $link";
    }
    $counter++; 
}

close (CLEANURL);
close (STORECODE); 
```

正如我在原始帖子中已经说过的，“clean_keyword_url_5.3.txt”包含新闻文章的 URL。它必须是一行一行的 URL 才能使用 LWP::Simple 中的 get 方法。再次感谢 ！！！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T15:52:07.653

（见最后更新1）

### 普通的留言：

很高兴看到您在编写 Perl 时尝试使用最佳实践（严格、警告和显式编码）。如果使用`locale`是好的可以辩论...... 您可以做得更好的三件事：

1.  在其最内部的可能范围内声明变量。
2.  使用词法文件句柄
3.  检查错误

### 你的第一个脚本

*   将文件句柄打开到词法变量中被认为是最佳实践：`open my $fh, "<", $filename or die $!`或其他东西。包含失败的`$!`原因。将其包含在您的输出中，因为它包含您打开失败的*实际*原因的宝贵提示（缺少权限、没有这样的路径等）。
*   从您的文件中读取时，网址仍然有一个尾随换行符。`chomp @arg`删除它们，或删除`s/\s+$// for @arg;`任何尾随空格字符。
*   `LWP::Simple`可能会失败。你应该检查你是否真的得到了回应：

    ```
    my $content = get $url;
    die "Didn't receive anything from $url" unless defined $content; 
    ```

    我更喜欢使用`LWP::UserAgent`，因为这样可以进行更多的错误检查：

    ```
    my $ua = LWP::UserAgent->new;
    ...;
    my $response = $ua->get($url);

    die "Request for $url failed: " . $response->status_line unless $response->is_sucess

    my $content = $response->decoded_content; 
    ```

*   解析 HTML 也是如此。查找您的模块文档，并检查错误。

### 第二个脚本

第二个脚本的相同点。此外：

*   在您的 C 风格的 for 循环中，您迭代从 o 到`@arg`. 另外，这个变量`$i`只在循环内部使用，所以我们在这里声明它：

    ```
    for my $i (0 .. $#arg) { ... } 
    ```

    `$#`印记给出了数组的最高索引。`..`是列表上下文中的范围运算符。即使您不想使用范围，您也可以将您的 var 声明为`for(my $i = 0; $i < @arg; $i++) { ... }`.

*   该`local`函数采用全局变量的名称，将其备份到一个特殊的堆栈上，并允许您临时为该名称分配一个新值。一旦离开当前范围（范围大致由花括号分隔），旧变量就会恢复。不要使用它，除非你真的被迫（阅读“应对范围界定”）。请注意，barewords、typeglob、对 typeglob 的引用和文件句柄不是一回事。只需将文件句柄打开到词法变量中，不要涉足 typeglob，一些错误可能会消失。

    ```
    my @filehandles;
    for my $i (0 .. $#arg) {
      my $filename = "Bstored_keyword_url_5.3.$i.html";
      open my $fh, "<:utf8", $filename or die "Can't open $filename: $!";
      push @filehandles, $fh;
      # lexical filehandles are automatically closed once their reference count hits zero.
    } 
    ```

    或者，稍微高级一点，我们可以看到整数和文件句柄之间存在直接映射，并将数组表示为这种映射。完全等同于上述：

    ```
    # how map works: OUTPUT = map { BLOCK } INPUT-LIST
    my @filehandles = map {
      # current value is in $_
      my $filename = "Bstored_keyword_url_5.3.$_.html";
      open my $fh, "<:utf8", $filename or die "Can't open $filename: $!";
      $fh; # last statement determines what is put into the array.
    } 0 .. $#arg; 
    ```

*   哈希很好。请注意，哈希是作为偶数列表构造的。构造`{}`一个*匿名哈希引用*，就像构造一个*匿名数组引用*`[]`而不是一个数组一样。引用始终保存在标量中：

     *```
    my $hashref = { foo => 1, bar => 3 };
    say $hashref->{foo}; # dereference arrow needed 
    ```

    或者

    ```
    my %hash = ( foo => 1, bar => 3 );
    say $hash{foo}; 
    ```

    括号仅用于排序优先级，它们不会“创建”列表或数组。* 
**   正如我刚刚使用的那样：该`say`功能在 perl 5.10 或更高版本中可用。您可以使用`use feature 'say'`或`use 5.010`（或任何更高版本号）激活它。它的工作原理与 完全一样`print`，但将输出分隔符`$\`（通常是换行符）附加到输出。

    *   在最后一个循环中，您使用变量`$val`. 那是从哪里来的？此外，不要将字符串附加到文件句柄。这对文件句柄进行了字符串化，这 (a) 使其不可用，并且 (b) 提供了一个相当无用的字符串（也许`IO::File=GLOB(0xdeadbeef)`）。此外，如果您只将哈希用于一个 (!) 键，则不要使用它。* 

 *### 链接

1.  [LWP::简单文档](https://metacpan.org/module/LWP%3a%3aSimple)
2.  [LWP::UserAgent 文档](https://metacpan.org/module/LWP%3a%3aUserAgent)
3.  [HTML::Parse](https://metacpan.org/module/HTML%3a%3aParse)说它已被弃用。请参阅[HTML::Parser](https://metacpan.org/module/HTML%3a%3aParser)或[HTML::TreeBuilder](https://metacpan.org/module/HTML%3a%3aTreeBuilder)。
4.  [处理范围](http://perl.plover.com/FAQs/Namespaces.html)：为什么你永远不应该使用全局变量或“局部”变量。

## 更新 1

您的新代码也相当不错（我希望*看到*更多人`strict`从一开始就使用......）。除了你忘记把任何东西放进去`$url2parse`，而且你发现循环有一些创造性的用途;-)

使用`getstore`or`mirror`或现在所谓的东西是个好主意。这意味着我们不必手动打开文件句柄。

这可以编码：

```
...;
# ↓ lexical filehandles 'n stuff
open my $CLEANURL, "<:utf8", ... or die ...;
my $counter = 0;
while(my $link = <$CLEANURL>) {
  chomp $link; # remove evil newlines
  my $status = mirror($link => "Cstored_keyword_url_5.3.$counter.txt");
  200 == $status or warn "WARNING: fetching $link failed with status $status";
  $counter++;
} 
```

那只是一个循环而不是三个循环。当我使用`mirror`来自`LWP::Simple`(的函数`getstore`也可以) 时，我只需要传递一个文件名，而不关心文件句柄。

在`while (my $line = <$filehandle>) { ... }`Perl 中通常用于逐行读取文件。在像这样的小程序上，这无关紧要，但是当您的数据扩展时，这是一个好习惯……</p>

在手动代码中，上面的内容可能如下所示：

```
...;
my $counter = 0;
while (my $link = <$CLEANURL>) {
  chomp $link;
  my $filename = "Cstored_keyword_url_5.3.$counter.txt";
  open my $fh, ">:utf8", $filename or die "Couldn't open $filename: $!";
  my $content = get $link;
  if (defined $content) { print $fh $content }
  else                  { warn "WARNING: failed to fetch $link" }
  # $fh autocloses here
  $counter++;
} 
```

我仍然赞成使用`LWP::UserAgent`，因为这样可以更深入地了解失败。

一旦您可以正确获取和处理您的 URL，并行性可能是加快处理速度的下一步。*

# ruby - 传递给 rake 任务的 X 个参数

> ID：14684564
> 
> 赞同：1
> 
> 时间：2013-02-04T10:15:01.237
> 
> 标签：ruby, rake

我只是想知道如何将动态（X）个参数传递给 rake 任务。例如我想实现这个：

> 耙任务：测试[arg1,arg2,arg3,...]

所以这里参数的数量不是固定的，它可能是`arg1..arg10`或者`arg1..arg20`可能更少/更多。

任何想法？

PS：我不想为此任务浪费太多内存，因此我正在寻找最佳解决方案。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T10:46:26.333

您可以预先定义最大数量的参数，但您不需要全部使用：

```
require 'rake'
myargs = 'p1'.upto('p20').map{ |x| x.to_sym }

task :test, myargs do |t, args|
  puts "#{t}: #{args.inspect}"
end

Rake.application[:test].invoke(1,2,3,4,5,6,7,8) 
```

结果：

```
test: {:p1=>1, :p2=>2, :p3=>3, :p4=>4, :p5=>5, :p6=>6, :p7=>7, :p8=>8} 
```

如果需要默认值，可以定义它们：

```
task :test, myargs do |t, args|
  args.with_defaults(:p19 => 'default1')
  puts "#{t}: #{args.inspect}"
end 
```

结果：

```
test: {:p19=>"default1", :p1=>1, :p2=>2, :p3=>3, :p4=>4, :p5=>5, :p6=>6, :p7=>7, :p8=>8} 
```

使用默认值定义参数的另一种方法：

```
myargs = Hash.new{|hash,key| hash[key] = "Default #{key}"}
20.times{|i| myargs[:"p#{i}"] }

task :test, myargs.keys do |t, args|
  args.with_defaults(myargs)
  puts "#{t}: #{args.inspect}"
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-27T09:48:53.510

我不知道你是否还需要这个，但这是我的解决方案：

```
task :test, [:arg] do |t,args|
   arguments = Array.new
   arguments << args.arg
   args.extras.each{|a| arguments << a}
   puts arguments
end 
```

结果：

```
rake test[arg1,arg2,arg3,arg4,...]
arg1
arg2
arg3
arg4
... 
```

# jquery - 悬停文本首先出现，如果我悬停在第二个 li 甚至

> ID：14684566
> 
> 赞同：0
> 
> 时间：2013-02-04T10:15:17.970
> 
> 标签：jquery

如果我将鼠标悬停在第一个 li 上，它即将到来的 bt 如果我将鼠标悬停在第 2 个 li 上，它只会首先出现。这是html

```
<div class="airPortFiltr">
<div class="sameAirport">
<input type="checkbox" />
<label>Depart/Return, same airport</label>
</div>
<h4>Departing From</h4>
<div class="airportdetails">

<ul>
<li><input type="checkbox" /></li>
<li id="valuenw" style="width:132px">LGA - LaGuardia
<a href="#" style="display:none">only</a>
</li>
<li>$ 238</li>
</ul>

</div>
<div class="airportdetails">

<ul>
<li><input type="checkbox" /></li>
<li style="width:132px">LGA - LaGuardia</li>
<a href="#" style="display:none">only</a>
<li>$ 238</li>
</ul>

</div>

</div> 
```

这是小提琴 [http://jsfiddle.net/VRE9n/](http://jsfiddle.net/VRE9n/)

这是js

```
$(document).ready(function () {
     $(".airportdetails").mouseover(function() {
$(".airportdetails li a").show();
}).mouseout(function(){
$(".airportdetails li a").hide();
});

    }) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T10:18:20.143

只需使用`$("li a", this).show();`而不是`$(".airportdetails li a").show();`.

`this`是`div.airportdetails`位于鼠标光标下方的元素。

# php - 301 将旧域重定向到新域

> ID：14684567
> 
> 赞同：0
> 
> 时间：2013-02-04T10:15:21.560
> 
> 标签：php, redirect

我正在为我的网站寻找移动域。

url 的第一部分将更改，即 www.olddomain.co.uk 到 www.newdomain.co.uk。但是域的第二部分将保持不变。

我是否将我的 htaccess 与重定向放在我的旧服务器或新服务器上？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T10:28:54.543

我假设“第二部分”是指域之后的 URL 部分，即对于[http://www.somedomain.co.uk/index.php](http://www.somedomain.co.uk/index.php)，第一部分是[http://www.somedomain。 co.uk/](http://www.somedomain.co.uk/)第二个是*index.php*。

您可以**在旧域**的 .htaccess 中使用 mod_rewrite 规则来重定向它（假设您有权这样做并且安装了 mod_rewrite）。这样的事情应该可以解决问题：

```
RewriteEngine on
RewriteRule   ^/(.+)$  http://www.newdomain.co.uk/$1  [R=301,L] 
```

如果您没有 mod_rewrite，您也可以使用 RedirectMatch（由 mod_alias 提供）：

```
RedirectMatch ^/(.*) http://www.newdomain.co.uk/$1 
```

这应该为您提供有关 mod_rewrite 重新映射的更多信息：[http ://httpd.apache.org/docs/2.4/rewrite/remapping.html](http://httpd.apache.org/docs/2.4/rewrite/remapping.html)

# java - 变换HashMap

> ID：14684570
> 
> 赞同：0
> 
> 时间：2013-02-04T10:15:26.690
> 
> 标签：java

我有一个`Map<String, Map<String, Double>>`变量。
例如：

```
{user0, {Item1, 2.5, Item2, 3.5}}  
{user1, {Item1, 3.0, Item2, 2.0}} 
```

我想得到以下输出：

```
{Item1, {user0, 2.5, user1, 3.0}}  
{Item2, {user0, 3.5, user2, 2.0}} 
```

我编写了以下代码来做到这一点：

```
for(Map.Entry<String, Map<String, Double>> entry : usersMap.entrySet()){
    for(Map.Entry<String, Double> ent : entry.getValue().entrySet()){
        people.put(entry.getKey(), ent.getValue());
        transform.put(ent.getKey(), people);
    }
} 
```

但我采取以下措施：

```
{Item1, {user0, 3.0, user1, 2.0}}  
{Item2, {user0, 3.0, user2, 2.0}} 
```

你能给我一些帮助吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-04T10:21:27.753

您必须为每个项目创建一个新地图

```
for(Map.Entry<String, Map<String, Double>> entry : usersMap.entrySet()){
    for(Map.Entry<String, Double> ent : entry.getValue().entrySet()){
        Map<String, Double> people = transform.get(ent.getKey());
        if (people == null) {
            people = new HashMap<>();
            transform.put(ent.getKey(), people);
        }
        people.put(entry.getKey(), ent.getValue());
    }
} 
```

否则，所有值都`transform`包含完全相同的映射。

此外，您可能需要重新考虑变量名称，例如：

```
entry     --> userItemValues
ent       --> itemValue
people    --> userValues
transform --> itemsMap 
```

*说真的，由于名称令人困惑，我花了几次尝试才能正确编写代码。但现在应该是正确的*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T10:20:27.800

尝试`transform.get(ent.getKey()).put(entry.getKey(), ent.getValue())`

你也需要处理`NullPointerException`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-04T10:20:34.493

在我看来，您只为您的人员地图添加了 1 个值。尝试这个：

```
for(Map.Entry<String, Map<String, Double>> entry : usersMap.entrySet()){
    for(Map.Entry<String, Double> ent : entry.getValue().entrySet()){
        people.put(entry.getKey(), ent.getValue());
    }
    transform.put(ent.getKey(), people);
} 
```

# matlab - MATLAB如何获取鼠标点击坐标

> ID：14684577
> 
> 赞同：6
> 
> 时间：2013-02-04T10:15:43.070
> 
> 标签：matlab, user-interface, axes

我已经使用 GUIDE 制作了我的 GUI。我有一个轴（tag=axes1）。图像显示在轴中。当我单击图像（内轴）时，我需要获取坐标。当图像没有添加到轴时，我得到了坐标值。但是图像显示在轴上没有获得轴。如何获取坐标？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-02-04T11:00:49.373

假设您使用以下句柄绘制了图像`imageHandle`：

```
imageHandle = imshow(imageObj); 
```

您应该将 分配`ButtonDownFcn`给图像句柄而不是轴句柄：

```
set(imageHandle,'ButtonDownFcn',@ImageClickCallback); 
```

并从此函数中获取鼠标坐标，如下所示：

```
function ImageClickCallback ( objectHandle , eventData )
   axesHandle  = get(objectHandle,'Parent');
   coordinates = get(axesHandle,'CurrentPoint'); 
   coordinates = coordinates(1,1:2);
   %// then here you can use coordinates as you want ...
end 
```

你可以试试这个小**演示**来检查我的答案：

```
function demoOnImageClick
clc;clear;
imObj = rand(500,500);
figure;
hAxes = axes();
imageHandle = imshow(imObj);
set(imageHandle,'ButtonDownFcn',@ImageClickCallback);

function ImageClickCallback ( objectHandle , eventData )
axesHandle  = get(objectHandle,'Parent');
coordinates = get(axesHandle,'CurrentPoint'); 
coordinates = coordinates(1,1:2);
message     = sprintf('x: %.1f , y: %.1f',coordinates (1) ,coordinates (2));
helpdlg(message);
end

end 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-04T10:25:45.247

您可以通过以下方式从图像句柄中获取轴句柄

```
ah = get( imageHandle, 'Parent' ); 
```

然后你可以通过

```
p = get( ah, 'CurrentPoint' ); 
```

# c++ - 类方法作为函数参数

> ID：14684580
> 
> 赞同：4
> 
> 时间：2013-02-04T10:15:48.460
> 
> 标签：c++, c++11

我正在尝试将某些类方法传递给某个函数并出现“函数调用缺少参数列表；使用 '& ' 创建指向成员的指针”错误。

```
//There is some class
class A {
  int someField;
  void Add(int someAdd) {
    someField += someAdd;
  }
}

//And function
void someFunc(std::function<void(int x)> handler) {
  //Some code
  handler(234);
}

//Class method pass to function
void main() {
  A* instanceA = new A();
  someFunc(instanceA->Add); //Error 19  error C3867: 'A::Add': function call missing argument list; use '&A::Add' to create a pointer to member
} 
```

怎么了？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-04T10:18:38.693

C++ 没有绑定方法作为语言结构。写：

```
someFunc(std::bind(&A::Add, instanceA, std::placeholders::_1)); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-04T10:22:34.000

稍后传入参数时，您需要将[std::bind](http://en.cppreference.com/w/cpp/utility/functional/bind)与占位符一起使用：

```
#include <functional>
someFunc(std::bind(&A::Add, instanceA, std::placeholders::_1)); 
```

另请注意，您需要`A::Add`公开

```
class A {    
  int someField;

public:
  void Add(int someAdd) {
    someField += someAdd;
  }
}; 
```

另请注意，在 C++ 标准中没有`void main`

```
int main() 
{
    someFunc(std::bind(&A::Add, instanceA, std::placeholders::_1));
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-04T13:47:38.523

`std::bind`我想建议使用 lambda，而不是其他答案中的东西，因为这些在 imo 上更具可读性：

```
int main() {
  A* instanceA = new A();
  someFunc([=](int a1, int a2)
  {
    instanceA->Add(a1, a2);
  }); 
} 
```

我知道，如果 Add 需要四个、五个、...“BigN”参数，它会变得很长，因为你必须在 lambda 的参数列表中重复它们，但当然你知道如何编写干净的代码并且不提供`Add`带有“BigN”参数;-)

# c# - 在 asp.net 中选中复选框时弹出窗口

> ID：14684583
> 
> 赞同：0
> 
> 时间：2013-02-04T10:16:00.260
> 
> 标签：c#, javascript, asp.net

当`confirmation Box`用户检查`CheckBox`.

所以我有一个`GridView`并且有一个列`CheckBoxes`。
因此，每当用户选中`CheckBox`我想显示一个确认框时，当用户单击该框上的取消时，我想取消选中它`CheckBox`。
当用户按 OK 时，我想启动一个标准的 asp.net `CheckBox_CheckedChanged`，我正在那里做一些数据库工作。
我不知道如何在`javascript`or中做到这一点`Jquery`。
我在谷歌上找到了它，那里只有一个`CheckBox`，你可以使用`ID`和使用`Jquery`你可以显示弹出窗口。
但是我有一个 GridView 并且每一行都有很多`CheckBoxes`。

请建议我一些工作示例或代码。

谢谢

****** *** ******编辑******* *** ** *** *** 这是我目前得到的代码。*****

 *****```
$('#gvOrders').click(function () {
        var checked = $(this).is(':checked');
        if (checked) {
            document.getElementById("confirm_value").value = "Yes";
            if (!confirm('Are you sure you want to mark this order as received?')) {
                $(this).removeAttr('checked');
            }
        }
        else {
            document.getElementById("confirm_value").value = "No";
            if (!confirm('Are you sure you want to mark this order as  not received?')) {
                $(this).removeAttr('checked');
        }
    }); 
```

到目前为止，这在`CheckBox`检查时不起作用。我不确定我在这里做错了什么。

***********网格视图的 HTML******* *** ***********

 *****```
 <asp:GridView ID="gvOrders" runat="server" AutoGenerateColumns="false" CssClass="gvClickCollectOrders"
    DataKeyNames="ac_OrderId" OnRowDataBound="gvOrders_RowDataBound" AllowPaging="true">
    <Columns>
        <asp:BoundField DataField="ac_OrderId" Visible="false" />
        <asp:BoundField DataField="ac_OrderNumber" HeaderText="Order No" DataFormatString="WWW{0}" />
         <asp:TemplateField HeaderText="Order Date">
            <ItemTemplate>
                <%# GetOrderDate(AlwaysConvert.ToInt(Eval("ac_OrderId"))) %>
            </ItemTemplate>
        </asp:TemplateField>
        <asp:TemplateField HeaderText="Customer Name">
            <ItemTemplate>
                <%# Eval("CustomerFirstName") %>&nbsp;<%# Eval("CustomerLastName") %>
            </ItemTemplate>
        </asp:TemplateField>
        <asp:TemplateField HeaderText="Received In Store">
            <ItemTemplate>
                <asp:CheckBox ID="cbIsReceived" runat="server" AutoPostBack="true" Checked='<%# Eval("IsReceived") %>'
                    OnCheckedChanged="cbIsReceived_CheckedChanged"/>
                    <asp:Label ID="receivedDateText" Text="" runat="server"></asp:Label>
            </ItemTemplate>
        </asp:TemplateField>
        <asp:TemplateField HeaderText="Collected By Customer">
            <ItemTemplate>
                <asp:CheckBox ID="cbIsCollected" runat="server" AutoPostBack="true" Checked='<%# Eval("IsCollected") %>'
                    OnCheckedChanged="cbIsCollected_CheckedChanged" />
                    <asp:Label ID="collectedDateText" Text="" runat="server"></asp:Label>
            </ItemTemplate>
        </asp:TemplateField>
    </Columns>
    <EmptyDataTemplate>
        <asp:Label ID="emptyGrid" runat="server" Text="there are no Click and Collect orders placed for the selected store."
            CssClass="emptyGridMessage"></asp:Label>
    </EmptyDataTemplate>
</asp:GridView> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-04T10:23:27.817

*使用 jQuery*

将某个类分配给您的 gridview 复选框并将事件绑定到该类。

```
<asp:CheckBox id="chkChoice" runat="server" class="some-class" ></asp:CheckBox>    

$('.some-class').click(function () {
    var checked = $(this).is(':checked');
    if (checked) {
        document.getElementById("confirm_value").value = "Yes";
        if (!confirm('Are you sure you want to mark this order as received?')) {
            $(this).removeAttr('checked');
        }
    }
    else {
        document.getElementById("confirm_value").value = "No";
        if (!confirm('Are you sure you want to mark this order as  not received?')) {
            $(this).removeAttr('checked');

        }
    }
    //return someVariableHoldTrueOrFalseForPostBack
    //return true of false from here.
}); 
```

*使用 javascript*

您可以在复选框上绑定javascript事件，它将自动应用于每行网格的所有生成的复选框。

```
<asp:CheckBox id="chkChoice" runat="server" OnClientClick="return yourFunction(this)" ></asp:CheckBox>

function yourFunction(source)
{
     return confirm("your message"); 
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-04T10:25:40.627

使用以下代码

```
$(document).ready(function() {
 $("#gvOrders input:checkbox").click(function(e) {
    if ($(this).is(":checked")) {
        var m= confirm("your message");
        if(m !=true)
          {
              $(this).removeAttr('checked');
              e.preventDefault(); 
           }     
       });
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-04T10:38:35.523

选中复选框以显示弹出窗口

```
1.Create a div and design a popup as per your wish in your aspx page.
2.check if the checkbox is checked or not.
3.If it is checked then call the div as popup using its id. 
```

**c#代码：**

```
if(checkedbox.checked==true)
{
Page.ClientScript.RegisterStartupScript(this.GetType(), "Call my function", "showpopup();", true); 
} 
```

**脚本：**

```
 function showpopup() {
    $("#popup").fadeIn('slow');
    } 
```

其中 #popup 是您创建的弹出 div 的 ID。**********

# liferay - Liferay 社区版中的用户跟踪

> ID：14684585
> 
> 赞同：2
> 
> 时间：2013-02-04T10:16:05.110
> 
> 标签：liferay, liferay-6

就像我们在 liferay 中有一个用户跟踪内置设施一样，我们在社区版中是否有任何具有此类功能的东西。

您能否推荐任何具有用户跟踪功能的第三方开源工具或插件。

帮我解决这个问题。

非常感谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-07T10:23:28.690

我最终实现了自己的代码。而不是使用 liferay 内置功能。1.这是我的文件的Jsp代码。

```
 //Page Imports & taglibs
    <%@page import="com.liferay.portal.service.persistence.UserTrackerPathUtil"%>
    <%@page import="com.liferay.portal.service.UserLocalServiceUtil"%>
    <%@page import="com.liferay.portal.service.UserTrackerPathLocalServiceUtil"%>
    <%@page import="com.liferay.portal.service.UserTrackerLocalServiceUtil"%>
    <%@page import="com.liferay.counter.service.CounterLocalServiceUtil" %>
    <%@page import="com.liferay.portal.util.PortalUtil" %>
    <%@page import="java.util.ArrayList"%>
    <%@page import="com.liferay.portal.model.UserTracker" %>
    <%@page import="com.liferay.portal.model.UserTrackerPath" %>
    <%@ taglib uri="http://liferay.com/tld/theme" prefix="theme"%>
    <%-- <%@include file="/html/demo/one.jsp" %> --%>

    <theme:defineObjects/>
    // Define theme object to get user and other basic information
    <%
    HttpSession http_session = request.getSession();
    //Get the current session variable.

     String id = http_session.getId();
    //Getting id of session
         String path = themeDisplay.getLayout().getFriendlyURL();
    //Getting path that will be stored in path field of UserTrackerPath table.
        System.out.println("***==> Current Url => "+ themeDisplay.getURLCurrent());
    //path = path.substring(path.lastIndexOf("/"));
    String localhostname = java.net.InetAddress.getLocalHost().getHostName();
        //Getting the localhost name of machine from which user is acccessing site
    String ipAddress  = java.net.InetAddress.getLocalHost().getHostAddress();
        //Getting ip address of machine, In case of if user is using an proxy env you may need some other efforts to get exact ip. 
       if(ipAddress == null)  
       {  
          ipAddress = request.getRemoteAddr();  
       }  
    try {
            UserTracker user_tracker =     (UserTracker)http_session.getAttribute("user_tracker");
    //Now when user session creates for first time then you need to add an entry in UserTracker table and all the rest entries for path traversal are need to be added at UserTrackerPath with new userTrackerPathId and userTrackerId as foreignkey.
            if(user_tracker == null) 
            {
                    UserTracker tracker = null;
                    ArrayList<UserTrackerPath> userTrackerPath = new ArrayList<UserTrackerPath>();
    //Create an Array List of UserTrackerPath needs to be added in method of addUserTracker by UserTrackerLocalServiceUtil
                    UserTrackerPath utp= null;
                    utp = UserTrackerPathLocalServiceUtil.createUserTrackerPath(CounterLocalServiceUtil.increment());

                    utp.setPath(path);
                    utp.setPathDate(new java.util.Date());
                    userTrackerPath.add(utp);
    //Add an entry to array list                
            tracker = UserTrackerLocalServiceUtil.addUserTracker(themeDisplay.getCompanyId(),
                            themeDisplay.getUserId(),
                            new java.util.Date(),
                            id,
                            ipAddress,
                            localhostname,
                            userAgent,
                            userTrackerPath);
    //UserTracker will be added to database
                    http_session.setAttribute("user_tracker",tracker);
       //Adds value to session to check that next time session is null or not, so that it can decide whether to execute code of if or else.
            }
            else
            {
    //If session is not null then you already have an entry in UserTracker and you need to keep path track in UserTarckerPath Table
                UserTrackerPath utp  = UserTrackerPathLocalServiceUtil.createUserTrackerPath(CounterLocalServiceUtil.increment());
                utp.setUserTrackerId(user_tracker.getUserTrackerId());
                utp.setPath(path);
                utp.setPathDate(new java.util.Date());
                utp =     UserTrackerPathLocalServiceUtil.updateUserTrackerPath(utp, true);
    //Update path 
            }

    }
    catch(Exception e)
    {
        e.printStackTrace();
    }

    %> 
```

2.  所以现在去你的`portal-ext.properties`并添加以下属性

    ```
    session.tracker.persistence.enabled=true

    live.users.enabled=false

    session.tracker.ignore.paths=\/portal/render_portlet,\/document_library/get_file 
    ```

3.  完成后将 Jsp 包含到您的主题`portal-normal.vm`中，以便它在每个地方都可以访问。查看 [添加全局 Jsp 以包含在 Liferay tomcat-6 中](https://stackoverflow.com/questions/14728100/add-a-global-jsp-to-include-in-liferay-tomcat-6) ，它将成功地将跟踪数据添加到表中。:)

注意：如果在 CE 中有任何替代方案，将很高兴收到您对此的建议。谢谢 ：）

# jquery - 用于自定义数据呈现问题的 jQuery ui 自动完成

> ID：14684589
> 
> 赞同：0
> 
> 时间：2013-02-04T10:16:29.347
> 
> 标签：jquery, jquery-ui

实际上，我尝试对项目类别进行 jquery 自动完成。我有一个这样的代码块，并试图获取作为`id`附加保证跨度属性的选定项目的 。那么`id`当我从列表中选择一个类别时，我怎样才能得到。

***JS代码***

```
$.widget("custom.catcomplete", $.ui.autocomplete, {
    _renderMenu: function (ul, items) {
        var that = this;
        $.each(items, function (index, item) {
            var li = that._renderItemData(ul, item);
            li.append('\
                <span style="font-size:10px; padding:2px;" class="guaranter" id="' + item.id + '">Guaranter:' + item.guaranter + '</span><br>\
                <span style="font-size:10px; padding:2px;">Father\'s Name:' + item.father_name + '</span><br>\
                <span style="font-size:10px; padding:2px;">District:' + item.district + '</span><br>\
                <span style="font-size:10px; padding:2px;"> National ID:' + item.national_info + '</span><br>\
                <span style="font-size:10px; padding:2px;">Contact:' + item.contact_number_personal + '</span>');
        });
    }
}); 
```

有谁能够帮我？提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T10:27:06.650

选择你的 li 使用这样的。

```
$(this).find('.guaranter').attr('id'); //here this is current selected li, you need to handle the event in select method. 
```

# speech-recognition - 语音识别算法如何识别同音字？

> ID：14684594
> 
> 赞同：1
> 
> 时间：2013-02-04T10:16:41.527
> 
> 标签：speech-recognition, voice-recognition

我之前也在思考这个问题。现代算法（特别是那些将语音转换为文本的算法）使用什么线索来确定说哪个同音字（例如，to，to，to，too，还是两个？）

他们是否使用上下文线索？句子的结构？也许每个单词通常的发音方式略有不同（例如，我通常将 o 音在*两个*中的保持时间比在*to*中的时间长）。前两者的组合似乎最合理。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-05T03:37:42.483

> 他们是否使用上下文线索？

是的，ASR 系统使用填字游戏上下文。例如，如果前一个单词是“going”，那么下一个单词可能是“to”而不是“two”。ASR 系统考虑概率并选择最佳可能的解码变体。

> 句子的结构？

是的，ASR 系统还使用更高级的语言模型来预测给定上下文的可能单词。

> 也许每个单词通常的发音方式略有不同（例如，我通常将 o 音在两个中的保持时间比在 to 中的时间长）。

那个也是。实际上，“too”和“to”的发音完全不同。“to”通常简化为 shwa。

如果您对语音识别算法感兴趣，阅读 ASR 书籍或查看在线课程可能会很有意义。详情见

[https://sourceforge.net/p/cmusphinx/discussion/speech-recognition/thread/3ea89abf/](https://sourceforge.net/p/cmusphinx/discussion/speech-recognition/thread/3ea89abf/)

# javascript - innrhtml.indexof(FieldName) 不能正常工作，只能读取4到5个字母的字段名

> ID：14684595
> 
> 赞同：0
> 
> 时间：2013-02-04T10:16:41.277
> 
> 标签：javascript, html, search, tags, innerhtml

```
function findacontrol(FieldName) {

var arr = document.getElementsByTagName("!");
// get all comments
for (var i=0;i < arr.length; i++ )
{
 // now match the field name
 if (arr[i].innerHTML.indexOf(FieldName) > 0)
  {         
   return arr[i];
  }
}
} 
```

如果有两个列 DepartmentName 和 Department，并且如果我们尝试匹配 Department 列，则此函数返回 DepartmentName 而不是 Department，它不匹配完​​整的列名。可能是什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T11:29:49.000

这是因为在列名*DepartmentName*`indexOf`中找到单词*Department*，您应该使用operator 来精确匹配两个字符串：*`==`*

 *```
/* Leading and trailing white-space regular expressions */
var ls = /^\s*/;
var ts = /\s*$/;

function findControl(FieldName) {
    // Get all columns
    var cols = document.getElementsByTagName("th");

    for (var i = 0; i < cols.length; i++){
        // Trim column name before matching
        if (cols[i].innerHTML.replace(ls, "").replace(ts, "") == FieldName){         
            return cols[i];
        }
    }
} 
```*

# cakephp - 我应该从哪里调用 CakeResponse::disableCache()？

> ID：14684599
> 
> 赞同：0
> 
> 时间：2013-02-04T10:16:48.093
> 
> 标签：cakephp

我一直幸福地`CakeResponse::disableCache();`从`beforeFilter()`of调用`AppController.php`禁用浏览器缓存，据我所知，它运行良好。

但是，自从升级到 PHP5.4 后，我收到了以下严格警告：

```
Strict (2048): Non-static method CakeResponse::disableCache() 
should not be called statically, assuming $this from incompatible 
context [APP/Controller/AppController.php, line 53] 
```

该功能似乎仍然有效，但错误告诉我我误解了一些非常基本的东西，并且可能有一种不同的（和更好的）方法来做到这一点。

所以，如果我需要在应用程序范围内禁用浏览器缓存（即：`no-store, no-cache, must-revalidate`等），那么在 Cake 2.3 中执行此操作的最佳方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T10:57:30.720

为什么不访问 CakeResponse 对象，它打算如何在 OOP 上下文中使用？作为控制器的一部分：

```
$this->response 
```

所以在你的情况下：

```
$this->response->disableCache(); 
```

文档中也有很多例子——比如[http://book.cakephp.org/2.0/en/controllers/request-response.html#interacting-with-browser-caching](http://book.cakephp.org/2.0/en/controllers/request-response.html#interacting-with-browser-caching)

问问题之前你读过这本书吗？

# regex - 使用 REGEX 切割字符串

> ID：14684604
> 
> 赞同：-1
> 
> 时间：2013-02-04T10:17:03.487
> 
> 标签：regex, string, word

我正在编写一个 Makefile 来编译 Java 程序。它看起来像这样：

```
#!/bin/bash

LANG=en

CURRENT_EX = hello.java
RUN_CURRENT_EX = for i in `ls *.class`; do java *$\.class ; done

RM  = rm -f 
TRASH = *~ *.class          

ALL = $(RM) $(THRASH)    && \
      javac    $(CURRENT_EX)    

all:    
    $(ALL)                   && \
    $(RUN_CURRENT_EX) 
```

当我编译一个 Java 程序（假设它的名称是“hello.java”）时，它的工作方式是这样的。首先，我在 Linux 终端中输入：

```
$ javac hello.java 
```

它产生一个名为“Hello.class”的文件，为了执行它，我把

```
$ java Hello 
```

问题是我想通过 Makefile 自动执行此任务，但我遇到了以下问题：

```
RUN_CURRENT_EX = for i in `ls *.class`; do java *$\.class ; done 
```

上面写着“java *$.class”。我想要做的是只从“Hello.class”文件名中获取字符串“Hello”，但我的正则表达式不起作用：

```
$ make all
Error: Could not find or load main class Hello.class
make: *** [all] Error 1 
```

我怎样才能从“Hello.class”中删除字符串“.class”？

提前致谢 ：-）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T10:22:32.127

您应该真正了解 Makefile 语法。而不是自己做事，`make`实际上有很多功能可以帮助你。

作为初学者，还要`#!/bin/bash`从你的 Makefile 中删除不正确的...

然后了解`$(wildcard)`匹配文件，

模式替换`$(patsubst %.class,%,$(CLASSES))`以`.class`去除后缀，

和模式规则，例如

```
%.class: %.java
    javac $< 
```

# networking - 无法使用 b 类网络 ping 类 c 的 ip..？

> ID：14684609
> 
> 赞同：1
> 
> 时间：2013-02-04T10:17:17.697
> 
> 标签：networking

无法使用 b 类网络 ping c 类的 ip..?? 我把我的 ip 放在 172.16.1.50 和另一边 192.168.1.50

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T23:25:23.690

主机 1 (172.16.1.50) --- (192.168.1.50) 主机 2

如果以上是您所拥有的，那么这只是一个无效的配置。

主机 1 (172.16.1.50) --- (172.16.0.0/24) 路由器 (192.168.1.0/24) --- (192.168.1.50) 主机 2

如果您在两台主机上正确设置了路由，这样它们就知道需要将数据包发送到路由器才能到达另一端，那么它将起作用。

# javascript - Facebook 分享按钮在 IE8 上不起作用

> ID：14684612
> 
> 赞同：0
> 
> 时间：2013-02-04T10:17:23.177
> 
> 标签：javascript, jquery, facebook, internet-explorer, google-chrome

我目前使用sharer php 方法在IE8 中实现分享按钮。问题是即使代码相同，但在 IE8 或其他浏览器中生成的链接却不同

**代码是**：

```
 // Change the information in FaceBook share
    function fbs_click() {
        u=location.href;
        t=document.title;
        window.open("http://www.facebook.com/sharer.php?s=100&p[url]=" + u + "&p[images][0]=http://www.hkheadline.com/image/logo_140.gif&p[title]=" + t + "&p[summary]= share message",'sharer','toolbar=0,status=0,width=626,height=436');

        return false;
    }  

IE 8 :
http://www.facebook.com/issue/20121220/page/69&p[images][0]=http://www.hkheadline.com/image/logo_140.gif&p[title]=FlipBook%20demo&p[summary]=share message

Chrome / Fx :
http://www.facebook.com/sharer/sharer.php?s=100&p%5Burl%5D=http%3A%2F%2F203.80.1.28%2FFlippingBook%2FDev%2FFrontend%2FflipV5.html%3Fissue%3D20121220&p%5Bimages%5D%5B0%5D=http%3A%2F%2Fwww.hkheadline.com%2Fimage%2Flogo_140.gif&p%5Btitle%5D=FlipBook+Demo&p%5Bsummary%5D=%E9%A0%AD%E6%A2%9D%E6%97%A5%E5%A0%B1%E5%88%86%E4%BA%AB&page=1 
```

为什么不同的浏览器表现不同以及如何解决？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T02:35:36.727

使用 %20 表示 # ，仅此而已。

# silverlight - Windows Phone 7.1 开发 - 用户登录模式

> ID：14684613
> 
> 赞同：2
> 
> 时间：2013-02-04T10:17:35.330
> 
> 标签：silverlight, windows-phone-7, login, windows-mobile, silverlight-5.0

非常感谢任何可以抽出时间和精力帮助我解决此问题的人。

我目前正在开发一个 Windows Phone 应用程序（针对 Mango）。我对这种类型的开发非常陌生。作为此应用程序的一部分，我需要实现与此非常相似的用户登录模式：

[http://windowsphonepatterns.net/uap_pattern/login](http://windowsphonepatterns.net/uap_pattern/login)

一般过程是用户输入他们的凭据（典型的登录屏幕），他们按下提交/登录，然后他们的凭据通过 xml web 服务进行身份验证 - 而应用程序显示一个带有不确定进度指示器的新屏幕，直到 web 服务出现返回（验证是/否）或超时。磨坊里的东西很漂亮（或者我是这么想的）。

到目前为止，我已经开发了一个登录屏幕和使用 xml web 服务的代码。我正在努力的部分是将一个带有不确定性能进度指示器的新页面链接到使用 Web 服务的活动（使用 silverlight WebClient）。登录 Last.FM 应用程序等功能。

我已经在网上搜索尝试找到如何做到这一点的好例子，但到目前为止还没有任何运气。

是否有人拥有/知道任何可以演示如何执行此操作的代码。一些实现上述模式的代码将是一个很棒的帮助。

再次，非常感谢提前。

克里斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T10:31:21.670

一种方法是将登录控件和进度指示器保持在同一页面上，但在两个不同的画布上。
所以最初在页面加载时隐藏包含进度指示器的画布，只显示登录控件。
当用户输入凭据并点击批准按钮时，只需隐藏其画布并显示进度指示器画布即可隐藏登录控件。如果凭据正确，您可以在 xml 网络服务的回调方法中导航新页面。

# css - CSS3动画弹跳效果：百分比和像素的结合

> ID：14684618
> 
> 赞同：0
> 
> 时间：2013-02-04T10:17:49.740
> 
> 标签：css, animation

如果我将“from”值作为百分比和“to”值以像素为单位，则“反弹动画”无法按预期工作。

请在此处查看代码：http: [//jsfiddle.net/xJ4xy/](http://jsfiddle.net/xJ4xy/)

有什么解决办法？（我尽量不使用javascript afap）

```
 <style type="text/css">
        @-webkit-keyframes A123 {
            0% {
              top:190px; /* from 190px to 20% doesn't work */
              top: 90%;/* this works */
            }
            100% {
                top:20%;
            }
        }
    </style> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T10:23:28.803

给出**位置：相**对于你的`page-1`班级。然后两者工作相同。像这样写：

> .page-1{ 位置：相对；}

检查这个[http://jsfiddle.net/xJ4xy/1/](http://jsfiddle.net/xJ4xy/1/)

# vba - PowerPoint VBA：确定旋转时形状的XY位置和WH

> ID：14684619
> 
> 赞同：1
> 
> 时间：2013-02-04T10:18:00.963
> 
> 标签：vba, position, ms-office, shape

我正在努力使用 powerpoint (2010) VBA。我试图将两个形状从上到上对齐，这意味着在 y 轴上，第一个形状的最高点/边应该与第二个形状的最高点/边对齐。

以下代码对我有用，但仅当两个形状都没有转动时，因为 shp.top 返回形状的未旋转 y 位置，而不是旋转后的 y 位置：

```
' ==================================

Sub align_top()

ActiveWindow.Selection.ShapeRange(1).Top = ActiveWindow.Selection.ShapeRange(2).Top

End Sub

' ================================== 
```

有人知道我怎样才能找回旋转的 xywh 吗？

# php - 使用 php GD 库将透明渐变与图像混合

> ID：14684622
> 
> 赞同：2
> 
> 时间：2013-02-04T10:18:11.313
> 
> 标签：php, image, gd, gradient

我尝试在需要从全色到透明的图像上渲染渐变，这是我的代码。我得到黑色图像，如果我开始超过 0，我得到白色渐变但没有图像。输出图像为 338x100 像素，但如果图像较窄，则输入图像需要右对齐。

```
function hex2rgb($hex) {
    $rgb[0] = hexdec(substr($hex, 0, 2));
    $rgb[1] = hexdec(substr($hex, 2, 2));
    $rgb[2] = hexdec(substr($hex, 4, 2));
    return $rgb;
}

function int2rgb($color) {
    $result[] = ($color >> 16) & 0xFF;
    $result[] = ($color >> 8) & 0xFF;
    $result[] = $color & 0xFF;
    return $result;
}

if (isset($_GET['start']) && isset($_GET['stop']) && isset($_GET['color'])) {
    $input = imagecreatefrompng('file.png');
    $width = imagesx($input);
    $output = imagecreatetruecolor(338, 100);
    $color = hex2rgb($_GET['color']);
    $fill = imagecolorallocate($output, $color[0], $color[1], $color[2]);

    for ($x=0; $x<$_GET['start']; ++$x) {
        for ($y=0; $y<100; ++$y) {
            imagesetpixel($output, $x, $y, $fill);
        }
    }
    $range = $_GET['stop']-$_GET['start'];
    for ($x=$_GET['start']; $x<$_GET['stop']; ++$x) {
        $alpha = round(255-($x*255/$range));
        $correct_x = $width < 338 ? $x+$width-338 : $x;
        for ($y=0; $y<100; ++$y) {
            $input_color = int2rgb(imagecolorat($input, $correct_x, $y));

            $new_color = imagecolorallocate($output,
                                            (($color[0]-$alpha)*$input_color[0])/255,
                                            (($color[1]-$alpha)*$input_color[1])/255,
                                            (($color[2]-$alpha)*$input_color[2])/255);
            imagesetpixel($output, $x, $y, $new_color);
        }
    }
    if ($_GET['stop']<338) {
        $stop = $width < 338 ? $_GET['stop']+$width-338 : $_GET['stop'];
        imagecopy($input, $output, $stop, 0, $_GET['stop'], 0, 338-$stop, 100);
        header('Content-Type: image/png');
        imagepng($output);
    }
} 
```

我运行脚本`gradient.php?start=20&stop=200&color=ff0000`并得到它而不是红色渐变。

![在此处输入图像描述](../Images/518db41cb9dee3ebd3c05ee2daf8f4a4.png) ![在此处输入图像描述](../Images/645b67f316c7adb2e58534836a3e91d9.png)

如何使渐变红色从全彩色变为全透明？所以它看起来像这样：

![在此处输入图像描述](../Images/29bc30c4a08d88107e92feea30e23a44.png)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-08T15:18:25.763

[如果您使用imagecreatetruecolor](http://php.net/imagecreatetruecolor)创建图像，它将获得黑色背景。使用[imagefill](http://php.net/imagefill)，您可以轻松更改图像的背景。[imagecolorallocatealpha](http://php.net/imagecolorallocatealpha)函数让您创建包含透明度的颜色。127 表示完全透明，0 表示不透明。

它现在可以工作了，我稍微简化了你的代码：

```
function hex2rgb($hex) {
    $rgb[0] = hexdec(substr($hex, 0, 2));
    $rgb[1] = hexdec(substr($hex, 2, 2));
    $rgb[2] = hexdec(substr($hex, 4, 2));
    return $rgb;
}

if (isset($_GET['start']) && isset($_GET['stop']) && isset($_GET['color'])) {
    $color = hex2rgb($_GET['color']);
    $range = $_GET['stop']-$_GET['start'];

    // create input image
    $input = imagecreatefrompng('file.png');

    // create output image
    $height = imagesy($input);
    $width = imagesx($input);
    $output = imagecreatetruecolor($width, $height);

    // put a transparent background on it
    $trans_colour = imagecolorallocatealpha($output, 0, 0, 0, 127);
    imagefill($output, 0, 0, $trans_colour);

    // create the gradient
    for ($x=0; $x < $width; ++$x) {
        $alpha = $x <= $_GET['start'] ? 0 : round(min(($x - $_GET['start'])/$range, 1)*127);
        $new_color = imagecolorallocatealpha($output, $color[0], $color[1], $color[2], $alpha);
        imageline($output, $x, $height, $x, 0, $new_color);
    }

    // copy the gradient onto the input image
    imagecopyresampled($input, $output, 0, 0, 0, 0, $width, $height, $width, $height);

    // output the result
    header('Content-Type: image/png');
    imagepng($input);
} 
```

# php - 在 Zend 框架中使用缓存

> ID：14684623
> 
> 赞同：2
> 
> 时间：2013-02-04T10:18:15.527
> 
> 标签：php, zend-framework, caching

谁能简要告诉我在 Zend Framework 1.x 中添加缓存/启用缓存？即易于理解且易于实施的解决方案。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-26T14:36:42.560

Zend Cache 提供了一种非常简单的方式来将数据存储在缓存中并提高速度。Zend 使用前端和后端来缓存。前端对于访问或操作缓存很有用。后端对于将数据存储在 File、Memcache、Sqlite 等中很有用。

首先通过在引导文件中创建函数来初始化引导文件中的前端和后端。

受保护的函数 _initCache(){

```
 $frontend= array(
        'lifetime' => 7200,
        'automatic_serialization' => true
    );

    $backend= array(
        'cache_dir' => '../application/tmp/',
    );

    $cache = Zend_Cache::factory('core',
            'File',
            $frontend,
            $backend
    );
    Zend_Registry::set('cache',$cache);
} 
```

然后使用zend缓存工厂来定义缓存对象。参数core定义了泛型类型的zend缓存核心方式文件参数是定义缓存存储方式存储缓存记录的位置然后第二个和第四个是用于前端和后端。

现在使用 zend 注册表注册该缓存数组，以便您可以在任何控制器、模型等中使用它。

在要使用数据缓存的任何控制器或任何模型中定义以下代码。

```
 $result1 =””;
    $cache = Zend_Registry::get('cache');

if(!$result1 = $cache->load('mydata')) {
        echo 'caching the data…..';
    $data=array(1,2,3);
    $cache->save($data, 'mydata');
} else {
    echo 'retrieving cache data…….';
    Zend_Debug::dump($result1);
} 
```

首先在上面的代码中我们得到了缓存数组。现在，如果未设置结果一，则缓存完成意味着文件是在您在后端数组中定义的路径处生成的

对于下一次页面加载，该数据将从缓存数据存储的文件中检索。

您可以根据定义的路径检查文件。

在该文件中，数据为 json 格式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-07T11:44:01.737

设置缓存：

```
$frontend= array(
    'lifetime' => 60,
    'automatic_serialization' => true
);

$backend= array(
    'cache_dir' => 'D:\cache',
);

$cache = Zend_Cache::factory('core', 'File', $frontend, $backend );
Zend_Registry::set('cache',$cache); 
```

使用它来设置：

```
private function setCached($key, $data)
{
    $cache = Zend_Registry::get('cache');
    $cache->save($data, $key);
} 
```

使用它来获取：

```
private function getCached($key)
{
    $cache = Zend_Registry::get('cache');
    if(!$result = $cache->load($key)) 
    {
        return false;
    } 
    else 
    {
        return $result;
    }
} 
```

# java - Java中的运算符优先级变得混乱

> ID：14684626
> 
> 赞同：0
> 
> 时间：2013-02-04T10:18:21.143
> 
> 标签：java, operators

几周前我提出了一个类似的[问题，但我仍然无法消除对](https://stackoverflow.com/questions/14058617/java-operators-precedence)[java 运算符优先级](http://docs.oracle.com/javase/tutorial/java/nutsandbolts/operators.html)的歧义和混淆。这次我有这段代码：

```
int mask = 0;
int count = 0;
if( ((5<7) || (++count < 10)) | mask++ < 10 )   
    mask = mask + 1;
System.out.println(mask + " " + count); 
```

结果是（出乎我意料）：2 0。

此外，编译器提供了一个警告，仅在表达式 (++count<10) 下划线：死代码。

但是，我认为代码的执行可以通过以下方式之一：

1) | 具有比 || 更高的优先级，因此它被认为是表达式 ( (++count<10) | mask++ <10) 周围有括号。这样，编译器应该已经执行了这两个部分，并且 count 应该设置为 1 (++count<10)。

2) 如果编译器首先查看 (5<7) 并且在评估它为 false 之后跳过整个第二个表达式，那么掩码不应该增加，我们将在输出中等待值 1。

我误解了什么并且无法解释编译器的行为以及输出？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-04T10:20:36.520

`||`是一个`OR`仅在左侧表达式为假时才计算其右侧表达式的运算符。在你的情况下，`5 < 7`是真实的并且`++count < 10`不被评估。

另一方面，`|`总是计算两个表达式：即使`((5<7) || (++count < 10))`为真，`mask++ < 10`也会被计算。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T23:37:30.837

> | 具有比 || 更高的优先级，因此它被认为是表达式 ((++count<10) | mask++ <10) 周围有括号。

您的代码中没有这样的表达式。再看一遍。整个表达式是`( ((5<7) || (++count < 10)) | mask++ < 10 )`。将`||`常量测试`5<7`与相关联`++count < 10`，因为常量测试始终为假，因此永远无法执行，并且将`|`所有这些与 相关联`mask++ < 10`。

实际上这里根本没有运算符优先级问题，只是您自己对括号放在哪里的误解。

# jquery - 如何切换特定的班级集

> ID：14684627
> 
> 赞同：0
> 
> 时间：2013-02-04T10:18:23.177
> 
> 标签：jquery, class, toggle, range

我有一系列课程：

*   A类
*   B类
*   C类

我有一个`<span class='fixedClass'>`需要根据特定条件在这些类之一之间切换的。你可能会说使用[jQuery toggleClass](http://api.jquery.com/toggleClass/)

但是，我的跨度已经附加了其他类，需要始终保留。

jQuery 中最快和最短的代码是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T10:27:43.127

此示例可能会对您有所帮助：http: [//jsfiddle.net/e9bj5/](http://jsfiddle.net/e9bj5/)

```
$(function(){

 $('.fixedClass').on("click", function() {

    var box = $(this);

    if ( box.hasClass('red') ) {
        box.removeClass('red').addClass('green');
    }
    else if ( box.hasClass('green') ) {
        box.removeClass('green').addClass('blue');
    }
    else if ( box.hasClass('blue') ) {
        box.removeClass('blue').addClass('red');
    }

 });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T11:20:20.800

你不能只是去改变你的跨度的属性**“类”**，`.attr()` 检查下面的代码

```
function(newClassName){
$('.fixedClass').attr('class',newClassName +' fixedClass');
} 
```

# wpf - WPF：在故事板开始时使 UIElement 可见的正确方法是什么

> ID：14684629
> 
> 赞同：0
> 
> 时间：2013-02-04T10:18:34.987
> 
> 标签：wpf, animation, wpf-controls, storyboard, uielement

我正在尝试一个简单的图片滑动动画，问题是，我不知道何时设置滑入的新图片的可见性。我不想在顶部显示图片直到动画开始。顺序是这样的，屏幕上一张拉伸的图片，然后另一张相同尺寸的图片滑入前一张图片的顶部。与旧图片相比，新图片将具有更高的 Z-index。我已经设置了一个故事板，并将新图片的可见性隐藏起来。那么什么时候让新图片可见呢？是不是在打电话之前`StoryBoard.Begin(MyNewPicture)`？所以它变成

```
 //create picture object 
    //...
    MyNewPicture.Visibility = Visiblity.Hidden;
    //do some intialisation, and create StoryBoard
    //...
    MyNewPicture.Visibility = Visibility.Visible;
    MyStoryBoard.Begin(MyNewPicture);` 
```

这适用于我的快速计算机，但我想知道，如果我在慢速计算机上运行它，并且如果有某种性能减慢/屏幕延迟等，它是否会使新图片看起来覆盖它下面的图片变得可见，就在动画开始之前？这将在屏幕上产生不可取的闪烁。

或者我应该把可见性作为动画的一部分？请看一下其他人对先前稍微相似的问题的[回答。](https://stackoverflow.com/a/5495505)我应该在 Xaml 中改用 ObjectAnimationUsingKeyFrames 吗？请注意，一旦动画开始，新图片应该（永远）可见，在我的情况下不需要切换可见性。我只想在动画开始时而不是在动画之前看到新图片（否则它将阻止前一张图片）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T10:44:18.433

If you want to change the `Visibility` by Animation, you have to use `ObjectAnimationUsingKeyFrames`:

```
 <Storyboard x:Key="StartPicture">
        <ObjectAnimationUsingKeyFrames Duration="0:0:0.1" Storyboard.TargetProperty="Visibility">
            <ObjectKeyFrameCollection>
                <DiscreteObjectKeyFrame Value="{x:Static Visibility.Visible}" KeyTime="0:0:0"></DiscreteObjectKeyFrame>
            </ObjectKeyFrameCollection>
        </ObjectAnimationUsingKeyFrames>
        <DoubleAnimation BeginTime="00:00:00.1" Storyboard.TargetProperty="Property" To="Value" />
    </Storyboard> 
```

You could also animate the Opacity from 0 to 100 to make the picture visible:

```
 <Storyboard 
        <DoubleAnimation Storyboard.TargetProperty="Opacity" To="100" Duration="0:0:0.1"  />
        <DoubleAnimation BeginTime="0:0:0.1" Storyboard.TargetProperty="PropertyToAnimate" To="Value"  />
    </Storyboard> 
```

This way you first animate the Opacity-property to 100 (in 100ms) and after this (with `BeginTime="0:0:0.1"`) comes the rest.

# javascript - 同时更改两个标签

> ID：14684632
> 
> 赞同：1
> 
> 时间：2013-02-04T10:18:38.163
> 
> 标签：javascript, jquery, html

[http://jsfiddle.net/6yjRL/](http://jsfiddle.net/6yjRL/)

HTML

```
<html>
    <body>
        <label id="num1label"/>
        +
        <label id="num2label" />
    </body>
</html> 
```

JS

```
var num1 = Math.floor((Math.random() * 10) + 1);
var num2 = Math.floor((Math.random() * 10) + 1);

$(function () {
    $("#num1label").text(num1);            
    $("#num2label").text(num2);
}); 
```

例如，我想要的结果是显示“5 + 2”的文本。但是只有一个标签改变了值，并且“+”由于某种原因被删除。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-04T10:21:40.410

错误的元素，错误的标记。采用：

```
<html>
    <body>
        <span id="num1label"></span>
        +
        <span id="num2label"></span>
    </body>
</html> 
```

您的代码失败，因为`<label>`标签不是自动关闭的；宽容的浏览器认为它们应该嵌套并且您忘记了结束标签，因此它以这种方式呈现它们。

However, the [`<label>`](https://developer.mozilla.org/en-US/docs/HTML/Element/label) tag is used for providing an annotation for an input element. Correctly used, it must be associated with a `<form>` element, either as a descendant or through the `form` attribute (HTML5). For in-line text you can (*and should*) use the `<span>` element.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-04T10:21:02.853

您不能省略`label`元素的结束标记。生成的标记不是您想的那样。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-04T10:20:59.507

将您的 html 更改为此

```
<body>
        <label id="num1label"></label>
        +
        <label id="num2label"></label>
    </body> 
```

# cuda - CUDA 编程作业

> ID：14684635
> 
> 赞同：0
> 
> 时间：2013-02-04T10:18:41.970
> 
> 标签：cuda, gpu, gpgpu

我试图仅将数组的第一个元素设置为 5.0（比如说）。即，只有一个线程应该设置一个值，而其他线程的其余部分不做任何事情。

这是我的完整代码

```
#include <stdio.h>
#include <cuda.h>

#define GPUERRCHK(ans) { gpuAssert((ans), __FILE__, __LINE__); }
inline void gpuAssert(cudaError_t code, char *file, int line, bool abort=true)
{
   if (code != cudaSuccess)
   {
      fprintf(stderr,"GPUassert: %s %s %d\n", cudaGetErrorString(code), file, line);
      if (abort) exit(code);
   }
}

void writeBuf( char * fName, float * out_frame, int dim )
{
    FILE * fp = fopen( fName, "w+" );
    int baseIndx = 0;
    for( int i=0 ; i<dim ; i++ )
    {
        for( int j=0 ; j<dim ; j++ )
        {
            fprintf( fp, "%f ", out_frame[ dim + j ] );
        }
        baseIndx += dim;
        fprintf( fp, "\n" );
    }
    fclose( fp );

}

__global__ void kernel( float * s1, float * s2, int dim, int * hx, int *hy, float *hT, int nHeaters )
{
    int x = threadIdx.x + blockIdx.x*blockDim.x;
    int y = threadIdx.y + blockIdx.y*blockDim.y;
    int offset = x + y*blockDim.x*gridDim.x;

    if( offset < 1 )
    {
    s2[0] = 1.0;
    }

    __syncthreads();

}

int main()
{
    srand48( time(NULL) );
    int dim = 1024;

    float *dev_s1, *dev_s2;
    GPUERRCHK( cudaMalloc( (void**)&dev_s1, dim*dim * sizeof(float) ));
    GPUERRCHK( cudaMalloc( (void**)&dev_s2, dim*dim * sizeof(float) ));
    GPUERRCHK( cudaMemset( dev_s1, 0x00, dim*dim * sizeof(float) ));
    GPUERRCHK( cudaMemset( dev_s2, 0x00, dim*dim * sizeof(float) ));

    //heaters
    int *dev_hx, *dev_hy;
    float *dev_hT;
    int nHeaters = 20;
    GPUERRCHK( cudaMalloc( (void**)&dev_hx, nHeaters * sizeof(int) ));
    GPUERRCHK( cudaMalloc( (void**)&dev_hy, nHeaters * sizeof(int) ));
    GPUERRCHK( cudaMalloc( (void**)&dev_hT, nHeaters * sizeof(float) ));

    //init heaters on cpu
    int * hx, *hy;
    float * hT;
    hx = (int*) malloc( nHeaters * sizeof(int) );
    hy = (int*) malloc( nHeaters * sizeof(int) );
    hT = (float*) malloc( nHeaters * sizeof(float) );
    for( int i=0 ; i<nHeaters ; i++ )
    {
    hx[i] = (int) ((float)drand48() * (float)dim) + 5;
    hy[i] = (int) (drand48() * dim) + 5;
    hT[i] = (float) (drand48() * 100) + 50;
    }

    //transfer hx, hy, hT to GPU
    GPUERRCHK( cudaMemcpy( dev_hx, hx, nHeaters * sizeof(int), cudaMemcpyHostToDevice ));
    GPUERRCHK( cudaMemcpy( dev_hy, hy, nHeaters * sizeof(int), cudaMemcpyHostToDevice ));
    GPUERRCHK( cudaMemcpy( dev_hT, hT, nHeaters * sizeof(float), cudaMemcpyHostToDevice ));

    float *out_frame = (float *) malloc( dim*dim*sizeof(float) );

    // run kernel
    int nThreadsPerBlock = 16;
    int nBlockX = (dim+nThreadsPerBlock-1)/nThreadsPerBlock;
    int nBlockY = (dim+nThreadsPerBlock-1)/nThreadsPerBlock;
    kernel<<< dim3(nBlockX, nBlockY), dim3(nThreadsPerBlock, nThreadsPerBlock) >>>( dev_s1, dev_s2, dim, dev_hx, dev_hy, dev_hT, nHeaters );
    GPUERRCHK( cudaPeekAtLastError() );
    GPUERRCHK( cudaDeviceSynchronize() );

    // collect result
    GPUERRCHK( cudaMemcpy( out_frame, dev_s2, dim*dim * sizeof(float), cudaMemcpyDeviceToHost ) );

    int f=1;
    char fName[100];
    snprintf( fName, 100, "out/file_%04d.data", f );
    writeBuf( fName, out_frame, dim );

    cudaFree( dev_s1 );
    cudaFree( dev_s2 );

    free( out_frame );
} 
```

当我运行它时，该文件包含所有零。我如何实现我计划实现的目标？可能是什么问题呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T11:27:38.853

您的问题出在 writeBuf(..) @line 中：

```
fprintf( fp, "%f ", out_frame[ dim + j ] ); 
```

dim 是 1024 并且您正在访问从 1024 到 1024+dim-1 的元素，这就是为什么您永远看不到第一个元素的原因。
正确的行应该是：

```
fprintf( fp, "%f ", out_frame[ baseIndx + j ] ); 
```

# events - 使用纬度和经度将事件发布到页面，并插入地图链接

> ID：14684641
> 
> 赞同：1
> 
> 时间：2013-02-04T10:19:05.230
> 
> 标签：events, facebook-graph-api, map, latitude-longitude

我的要求很简单，我知道之前提过，没有真正的解决方案！我有一个每晚自动运行的应用程序，并将几个事件发布到 Facebook 页面。效果很好；但是我希望为事件添加纬度/经度值，然后让 Facebook 根据这些纬度/经度值准确显示迷你地图。我知道如果我手动编辑帖子，Facebook 将尝试从地址进行地理编码，并显示迷你地图，但这没有用。

主页：

[http://www.facebook.com/pages/DanceWeb/316030661254](http://www.facebook.com/pages/DanceWeb/316030661254)

# nsis - 单击nsis中的删除按钮时如何创建进度条？

> ID：14684652
> 
> 赞同：0
> 
> 时间：2013-02-04T10:20:03.190
> 
> 标签：nsis

我使用 nsis 脚本创建了 exe 文件。在我的脚本中，我包含了修复删除功能。

如果用户选择删除选项，它将删除应用程序。它正在工作。我使用以下代码进行删除

```
 Function nsDialogpage
    ${If} $Remove == 1
      call Removed
     ${EndIf}
    FunctionEnd

Function Removed
nsExec::Exec '"$INSTDIR\uninstall.exe" /S _?=$INSTDIR'
FunctionEnd 
```

安装应用程序后单击 uninstal.exe 它显示进度条和文件列表。最后它从系统中删除了应用程序。我想在单击删除按钮时运行该场景。但在上面的代码中仅删除应用程序。它不显示任何详细信息。

如何做到这一点？

![在此处输入图像描述](../Images/678fa920ac2c645c76dcfecbff9ffab8.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T17:10:53.617

卸载输出列表由`ShowUninstDetails`（编译时间）和`SetDetailsView`（运行时间）控制。

# android - 我应该如何在 Honeycomb 下为 Android 设备实现 Home 按钮？

> ID：14684654
> 
> 赞同：0
> 
> 时间：2013-02-04T10:20:18.057
> 
> 标签：android, navigation, android-2.2-froyo, android-2.3-gingerbread

我正在开发一个应该支持的应用程序：

*   没有操作栏的设备 (< Android 3.0)
*   带有操作栏的设备

现在，我的层次结构允许用户下降一级，例如：

> *   主屏幕
>     *   子菜单 1
>     *   子菜单 2
>     *   子菜单 3（启动 WebView）
> 
> [在 Web 视图中，*后退*按钮被重载用于 Web 导航，所以我需要一个单独的主页按钮）]

使用 Android 3.0 及更高版本，我可以轻松地将应用程序的图标用作 Home 按钮，前提是我已`android:parentActivityName`在 Manifest 中声明了 。这将使主页按钮显示为“返回”，并且即使您在某些 Web 视图层次结构中很深，也会提供一种进入主屏幕的方法。

但是，对于 3.0 以下的设备，没有操作栏，因此也没有 Home 按钮。现在的问题是：按照默认的设计指南，**我应该如何让用户立即回到我的主屏幕？**

对于 3.0 以下的版本，Android[导航指南](http://developer.android.com/design/patterns/navigation.html)没有提及与此相关的任何内容。我正在考虑添加一个经典的菜单项（按下菜单按钮时会出现），但是我必须使它对任何具有操作栏的设备都不可用。这是要走的路吗？

# php - 在 .htaccess 中，网址长度随着我浏览而增加

> ID：14684672
> 
> 赞同：0
> 
> 时间：2013-02-04T10:21:06.627
> 
> 标签：php, apache, .htaccess

我的 .htaccess 文件包含以下代码。当我浏览以下链接时，url 会发生变化，但不会完全被替换，而是附加到上一页 ur 中，例如。如果我的 url 显示 home 然后我点击一个链接将我带到donordashboard.php 之后 url 将更改为 home/dashboard/donar 如果我点击另一个链接将我带到donor_profile.php url 将更改为 home/dashboard /个人资料编辑/捐助者。这样长度不断增加。请帮忙 。

```
RewriteEngine On

RewriteRule home home.php
RewriteRule add/blood_bank add_blood_bank.php
RewriteRule add/blood/donar add_as_a_blood_donar.php

RewriteRule dashboard/donor donordashboard.php
RewriteRule profileedit/donor donor_profile.php
RewriteRule add/last/donated/blood add_last_donated_blood.php
RewriteRule change/pwd/donor blood_change_pwd.php
RewriteRule logout common/logout.php

RewriteRule login_bd bdlogin.php
RewriteRule blood_donor_login blood_donor_login.php 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T10:23:54.923

这里的这条线可能一直在重定向，对吧？

```
RewriteRule logout common/logout.php 
```

你应该把绝对网址改为

```
RewriteRule /logout /common/logout.php 
```

您可以尝试添加 [R=301,L]

```
RewriteRule /logout /common/logout.php [R=301,L] 
```

--

并添加**完整的绝对网址**，因此您的代码将是：

```
RewriteEngine On

RewriteRule /home /home.php
RewriteRule /add/blood_bank /add_blood_bank.php
RewriteRule /add/blood/donar /add_as_a_blood_donar.php

RewriteRule /dashboard/donor /donordashboard.php
RewriteRule /profileedit/donor /donor_profile.php
RewriteRule /add/last/donated/blood /add_last_donated_blood.php
RewriteRule /change/pwd/donor /blood_change_pwd.php
RewriteRule /logout /common/logout.php

RewriteRule /login_bd /bdlogin.php
RewriteRule /blood_donor_login /blood_donor_login.php 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T11:37:35.627

```
Options +FollowSymLinks
RewriteEngine On
RewriteBase /facebook_login/ 
```

`RewriteBase`如果文件在根目录中，请尝试添加，只需添加 / 或文件夹路径

# c - 使用 gcry_malloc_secure 时 C 中的内存管理

> ID：14684673
> 
> 赞同：1
> 
> 时间：2013-02-04T10:21:10.937
> 
> 标签：c, memory-management, libgcrypt

我正在使用 GNU/Linux 下的 libgcrypt 1.5.0 开发一个小型的 aes256-cbc 文件加密软件。

我对交换到磁盘的安全内存和数据有疑问。

假设我有这个代码：

```
char *crypto_key;
crypto_key = gcry_malloc_secure(256); 
```

这两件事也做有用和必要吗？

1）*不允许该内存被分页：* `mlock(crypto_key, size)`

2）*为了防止信息被写入核心转储：*

```
struct rlimit limit;
limit.rlim_cur = 0;
limit.rlim_max = 0;
if (setrlimit(RLIMIT_CORE, &limit) != 0) {
    /* Handle error */
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T10:53:42.487

在不阻止将内存区域写入页面文件（或代码转储）的情况下，敏感数据（密钥）可能会留在磁盘上，并被不打算查看/拥有数据的人发现。是否必要/有用取决于应用程序。不这样做可能会在笔记本电脑的硬盘驱动器上留下密钥或未加密的数据很长时间，然后有人可以通过窃取笔记本电脑从中获取密钥/数据。对于物理安全计算机上的私人使用，可能没有必要（但仍然是一种很好的做法，因为最好为任何事情做好准备）。

您不需要自己锁定内存（分配的 crypto_key），libgcrypt 会为您完成（假设您正确初始化了库）。一旦释放，它还应该清除/覆盖内存。

防止核心转储可能是矫枉过正，因为原始的未加密文件很可能在机器上仍然可用，连同密钥。取决于您尝试实现的安全级别。如果您没有转储文件，您也不会忘记删除它。

通常，机器的用户/管理员应该将机器配置为不进行核心转储，工具程序不是应该更改设置的程序（如果没有提升的权限，甚至可能无法做到）。

# database - 我的第一个 PostgreSQL 架构 - 如何处理多笔付款

> ID：14684677
> 
> 赞同：0
> 
> 时间：2013-02-04T10:21:26.183
> 
> 标签：database, postgresql, database-design

我一直在设计我的第一个数据库模式，但我有点卡住了。我将提供在初始付款后通过额外付款“扩展”过帐的项目的功能，但我的架构不允许将多个付款 ID 链接到单个项目。

我想知道是否有人可以就如何重新排列此架构以处理单个项目的多个付款给我任何建议。如果可能的话，我宁愿不必将全部包裹在这样的东西中：

```
ID
Item
Payment 
```

这是我目前拥有的：

```
-- Company Table
CREATE TABLE company (
    id SERIAL PRIMARY KEY,
    name VARCHAR(60) NOT NULL
);

-- Country Table
CREATE TABLE country (
    id SERIAL PRIMARY KEY,
    iso VARCHAR(2) NOT NULL,
    name VARCHAR(100) NOT NULL
);

-- Location Table
CREATE TABLE location (
    id SERIAL PRIMARY KEY,
    name VARCHAR(250) NOT NULL,
    city VARCHAR(100),
    country_id INTEGER NOT NULL REFERENCES country (id),
    coordinate VARCHAR(50) NOT NULL
);

-- Source Table
CREATE TABLE source (
    id SERIAL PRIMARY KEY,
    name VARCHAR(100) NOT NULL
);

-- Item Table
CREATE TABLE item (
    id SERIAL PRIMARY KEY,
    solrid VARCHAR(25),
    title VARCHAR(200) NOT NULL,
    truncated_description VARCHAR(250) NOT NULL,
    keyword_description VARCHAR(1000) NOT NULL,
    page_url VARCHAR(150) NOT NULL,
    create_date TIMESTAMP NOT NULL,
    company_id INTEGER NOT NULL REFERENCES company (id),
    source_id INTEGER NOT NULL REFERENCES source (id),
    location_id INTEGER NOT NULL REFERENCES location (id)
); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T10:28:56.230

如果只为单个项目付款，那么您*应该*执行以下操作：

```
CREATE TABLE payment (
  id SERIAL,
  itemid INTEGER REFERENCES item(id),
  amount DECIMAL(10, 2) NOT NULL
) 
```

还有其他可能性，例如数组，但考虑到您的要求，它们不值得。不要与数据库作斗争。

# python - MongoEngine - 从 ListField 中提取引用，按 id

> ID：14684687
> 
> 赞同：4
> 
> 时间：2013-02-04T10:22:14.973
> 
> 标签：python, mongodb, mongoengine

我想从 a 中删除一些引用`ListField(ReferenceField)`，仅基于它们的值。

我将有关图像的信息存储在以下模型中：

```
class ImageUrl(Document):
    src = UrlField()
    counter = IntField()
    deleted = BooleanField() 
```

我们将`id`页面上遇到的图像的 s存储在`EmbeddedDocument`被调用的`Webpage`：

```
class Webpage(EmbeddedDocument):
    image_list = ListField(ReferenceField(ImageUrl))
    ... 
```

最后将`Website`模型嵌入到`RawData`模型中：

```
class RawData(Document):
    ...
    webpage = EmbeddedDocumentField(Webpage) 
```

我想`ImageUrl`从`RawData`记录中删除对记录的引用，基于它们的一些属性（例如：计数器值超过 1），然后将`deleted`这些`ImageUrl`记录的属性设置为`True`.

我正在做：

```
images = ImageUrl.objects((Q(deleted=False) & Q(counter__gt=1)).all()
for image in images:
    # all RadData records containing the image in their image list
    for rdata in RawData.objects(webpage__image_list__in=[image.id]:
        # remove image from the image_list
        RawData.objects(id=rdata.id).update_one(pull__webpage__image_list=image.id)
    # set 'deleted=True' on the ImageUrl record
    ImageUrl.objects(id=image.id).update_one(set__deleted=True) 
```

该`pull`操作引发以下错误： `OperationError: Update failed [Cannot apply $pull/$pullAll modifier to non-array]`。

正如我从[http://docs.mongodb.org/manual/reference/operator/pull/#_S_pull](http://docs.mongodb.org/manual/reference/operator/pull/#_S_pull)或[How to remove a item from a list(ListField) by id in MongoEngine?](https://stackoverflow.com/questions/7846109/how-to-remove-a-item-from-a-listlistfield-by-id-in-mongoengine?rq=1) ，我需要指定要从中删除值的数组的键。但是，就我而言，我想从列表中删除一个值......我应该怎么做？

非常感谢您的宝贵时间！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-08T11:40:19.897

位置运算符的工作方式是它允许您查询列表中的值，然后对该值的第一个实例执行操作，通常是更新。 `$pull`将从列表中删除所有实例，这就是您想要的。

在带有引用的 mongoengine 中，您可以只传递实例对象，例如：

```
for rdata in RawData.objects(webpage__image_list=image):
    # remove image from the image_list
    rdata.update_one(pull__webpage__image_list=image) 
```

我清理了代码，删除了重复的查询——因为您已经`rdata`不需要重新查找该文档了！

`OperationError: Update failed [Cannot apply $pull/$pullAll modifier to non-array]`这意味着您正在尝试提取需要数组的数据，并且有一个文档`image_list`实际上不是数组。这可能是因为在磁盘上您有一个`image_list`实际上不是列表的文档。如果您尝试除块之外，您可以查看无法查看是否是这种情况的文档，如果是这种情况，则需要手动迁移。

# haskell - 使用八进制转义序列解码文本输入

> ID：14684694
> 
> 赞同：3
> 
> 时间：2013-02-04T10:22:41.647
> 
> 标签：haskell, utf-8, character-encoding

我有一个输入，其中“Divinités”（9 个字符）将表示为“Divinit\303\251s”（16 个字符长的实际文本数据），如何将其转换为 Haskell 的正确编码`Text`（或`ByteString`，或`String`）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T11:27:02.323

首先，您需要将每个转义序列转换为一个`Char`. 然后使用`utf8-string`包将结果解码为实际的 utf8 字符串。

```
import Data.Char
import Codec.Binary.UTF8.String (decodeString)

input :: String
input = "Divinit\\303\\251s"

main = maybe (return ()) putStrLn $ convertString input

convertString :: [Char] -> Maybe [Char]
convertString = fmap decodeString . unescape

unescape :: [Char] -> Maybe [Char]
unescape [] = Just []
unescape ('\\' : tail) = do
  headResult <- fmap toEnum . octalDigitsToInt . take 3 $ tail
  tailResult <- unescape . drop 3 $ tail
  return $ headResult : tailResult
unescape (head : tail) = fmap (head :) . unescape $ tail

octalDigitsToInt :: [Char] -> Maybe Int
octalDigitsToInt = 
  fmap sum . sequence .
    map (\(i, c) -> fmap (8^i*) $ octalDigitToInt c) .
      zip [0..] . reverse

octalDigitToInt :: Char -> Maybe Int
octalDigitToInt c | isOctDigit c = Just $ digitToInt c
octalDigitToInt _ = Nothing 
```

# regex - 记事本++ v4.2.2。正则表达式匹配和替换两个标签之间的所有文本

> ID：14684697
> 
> 赞同：3
> 
> 时间：2013-02-04T10:22:43.750
> 
> 标签：regex, notepad++

我有一个大文件，里面有很多`<h1></h1>`标签，中间有各种文本。我正在寻找一种方法来删除这些标签之间的所有文本，其中可能还包括换行符。

任何帮助，将不胜感激。

更新：试过这个，但不起作用......（当然光标在文件的开头）

![在此处输入图像描述](../Images/85c11f811753724c6fbc3153234efc34.png)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-04T10:25:39.023

选择`. matches new line`和`regular expression`选项

找什么：`<h1>.*?</h1>`

用。。。来代替：`<h1></h1>`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-04T10:26:55.497

寻找：

```
<h1>.*?</h1> 
```

用。。。来代替：

```
<h1></h1> 
```

# php - 在php中的日期范围内获取所有星期的开始日期和结束日期

> ID：14684700
> 
> 赞同：0
> 
> 时间：2013-02-04T10:23:00.873
> 
> 标签：php

如何在 PHP 的日期范围内获取所有星期的开始日期和结束日期？

周开始 = 周日，周末 = 周六

输入

> $start_date='2013-02-01'
> $end_date = '2013-02-28'

输出

> 开始日期='2013-02-01' 结束日期='2013-02-02'
> 开始日期='2013-02-03' 结束日期='2013-02-09'
> 开始日期='2013-02-10'结束日期 ='2013-02-16'
> 开始日期 ='2013-02-17' 结束日期 ='2013-02-23'
> 开始日期 ='2013-02-24' 结束日期 ='2013-02-28'

下面的代码返回给定日期的星期开始和结束

```
 function getWeekDates($date)
{
    $week =  date('W', strtotime($date));
    $year =  date('Y', strtotime($date));
    $from = date("Y-m-d", strtotime("{$year}-W{$week}-1")); //Returns the date of monday in week
    $to = date("Y-m-d", strtotime("{$year}-W{$week}-7"));   //Returns the date of sunday in week
    echo "Start Date-->".$from."End Date -->".$to;//Output : Start Date-->2012-09-03 End Date-->2012-09-09
} 
```

我怎样才能得到上面的结果？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-04T12:28:58.417

试试这个...

```
$start_date = date('Y-m-d', strtotime('2013-02-01'));
$end_date = date('Y-m-d', strtotime('2013-02-28'));
$end_date1 = date('Y-m-d', strtotime('2013-02-28 + 6 days'));

for($date = $start_date; $date <= $end_date1; $date = date('Y-m-d', strtotime($date. ' + 7 days')))
{
    echo getWeekDates($date, $start_date, $end_date);
    echo "\n";
}

function getWeekDates($date, $start_date, $end_date)
{
    $week =  date('W', strtotime($date));
    $year =  date('Y', strtotime($date));
    $from = date("Y-m-d", strtotime("{$year}-W{$week}+1")); //Returns the date of monday in week
    if($from < $start_date) $from = $start_date;
    $to = date("Y-m-d", strtotime("{$year}-W{$week}-6"));   //Returns the date of sunday in week
    if($to > $end_date) $to = $end_date;
    echo "Start Date-->".$from."End Date -->".$to;//Output : Start Date-->2012-09-03 End Date-->2012-09-09
} 
```

请参阅**[键盘](http://codepad.org/COk9lEeU)**。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-04T11:08:20.767

我的答案。

```
$start_date = '2013-02-01';
$end_date = '2013-02-28';

getWeekDates($start_date, $end_date);

function getWeekDates($date, $enddate) {
$week = date('W', strtotime($date));
$year = date('Y', strtotime($date));
$from = date("Y-m-d", strtotime("{$year}-W{$week}-1")); //Returns the date of monday in week
$to = date("Y-m-d", strtotime("{$year}-W{$week}-7"));   //Returns the date of sunday in week
$Edate = strtotime($enddate);
$Sdate = strtotime($to);
if ($Edate <= $Sdate) {
    echo "<br>Start Date-->" . $from . "End Date -->" . $enddate; //Output : Start Date-->2012-09-03 End Date-->2012-09-09

} else {
    echo "<br>Start Date-->" . $from . "End Date -->" . $to; //Output : Start Date-->2012-09-03 End Date-->2012-09-09
    $to = date("Y-m-d", strtotime("$to +1days")); //Returns the date of monday in week
    getWeekDates($to, $enddate);
}
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-04T10:32:06.527

我希望我能正确回答你的问题。

你需要做的是用开始日期调用你的函数，然后在开始日期加上 7 天，然后再次调用你的函数......你必须这样做，直到你到达结束日期。

这是一些未经测试的代码：

```
$current_date = strtotime($start_date);
$end_date_as_date = strtotime($end_date);

while($current_date < $end_date_as_date){
getWeekDates($current_date);
$current_date= strtotime("+7 day", $current_date);
} 
```

希望这可以帮助。如果您需要任何进一步的信息，请发表评论。

# asp.net - 回发时丢失的回调事件创建的数据列表

> ID：14684705
> 
> 赞同：0
> 
> 时间：2013-02-04T10:23:14.907
> 
> 标签：asp.net

我在回调事件上绑定数据列表。单击数据列表中的按钮需要回发以获取另一个数据列表的数据。但回发后，页面上看不到数据列表。我不知道回发时发生了什么。请帮助我找到解决方案....

```
 If IsPostBack = False Then
        callback = ClientScript.GetCallbackEventReference(Me, "message", "processMyResult", "context")
        Dim script As String = "function CallBack(message,context){" + callback + ";}"
        ClientScript.RegisterClientScriptBlock(Me.GetType(), "CB", script:=script, addScriptTags:=True)

        callbackhotelsearch = ClientScript.GetCallbackEventReference(Me, "message", "processhotelsearchResult", "context")
        Dim scriptsearch As String = "function callbackhotelsearch(message,context){" + callback + ";}"
        ClientScript.RegisterClientScriptBlock(Me.GetType(), "CB", script:=scriptsearch, addScriptTags:=True)

        SearchTextBox.Attributes.Add("onkeyup", "javascrpt:LookUpStock()")
        SearchTextBox.Attributes.Add("onfocus", "javascript:SetCursorToTextEnd()")
    End If

 Public Sub RaiseCallbackEvent(ByVal eventArgument As String) Implements System.Web.UI.ICallbackEventHandler.RaiseCallbackEvent

    If (eventArgument) Is Nothing Then

        returnValue = "-1"

    Else

        binddata(eventArgument)
    End If

    Dim sb As System.Text.StringBuilder = New System.Text.StringBuilder()
    Dim sw As System.IO.StringWriter = New System.IO.StringWriter(sb)
    Dim hw As HtmlTextWriter = New HtmlTextWriter(sw)
    dataListPackages.RenderControl(hw)
    returnValue = sb.ToString()

End Sub

Public Function GetCallbackResult() _
As String Implements _
System.Web.UI.ICallbackEventHandler.GetCallbackResult

    Return returnValue

End Function

Public Function binddata(ByVal eventArgument As String) As Nullable
    Dim adp As New dsRegistrationTableAdapters.searchPackagesTableAdapter()
    Dim dt As New dsRegistration.searchPackagesDataTable()
    dt = adp.GetData(eventArgument, StartDateTextBox.Text, EndDateTextBox.Text)
    'StartDateTextBox.Text = "11-12-2012"

    dataListPackages.DataSource = dt
    dataListPackages.DataBind()
    SearchTextBox.Focus()
    Return Nothing
End Function 
```

谢谢你

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T10:38:50.620

初始加载后无法访问数据源项。它们仅在数据绑定上可用。

在您的情况下，您可以使用 HiddenField 在发布期间存储 Id，然后通过该 ID 而不是 dataitem 获取数据，因为回发后 dataitem 将不可用。

# sql - SQL Server 中的日期时间？

> ID：14684709
> 
> 赞同：-9
> 
> 时间：2013-02-04T10:23:27.603
> 
> 标签：sql, sql-server-2008, tsql, datetime

我想在 SQL 存储过程中获取 DateTime.now 吗？

这可以用 T-SQL 完成还是我必须用参数传递日期？

```
--Set Last download date

        SET @DateAndTime = ????????;

    UPDATE
        Valuation
    SET
        LastDownloadDate = @DateAndTime
    WHERE
        FormMobiValuationId = @FormMobiValuatoinId 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-04T10:24:14.383

使用[`getdate()`](http://msdn.microsoft.com/en-gb/library/ms188383.aspx). 还有一个[`getutcdate()`](http://msdn.microsoft.com/en-gb/library/ms178635.aspx)功能。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-04T10:30:39.830

除了使用`GETDATE()`，您还可以使用[SYSDATETIME()](http://msdn.microsoft.com/en-us/library/bb630353.aspx) [建议在 sql server 2008 及更高版本中使用精度]....

它们之间唯一的区别是，在`GETDATE(`) 中，精度达到`millisecond`而`SYSDATETIME()`精度达到`nanosecond`。

正如您已将问题标记为 sql server -2008，我建议使用`SYSDATETIME()`..

注意：`SYSDATETIME()`在 中不可用`sql server 2005`。

# hibernate - Hibernate 适合小型 Web 应用程序吗？

> ID：14684712
> 
> 赞同：0
> 
> 时间：2013-02-04T10:23:34.097
> 
> 标签：hibernate, jakarta-ee, orm

我正在设计一个小型 JavaEE Web 应用程序...我有一个包含近 10 个表的 PostgreSQL 数据库......我有 Activiti 处理工作流......

我认为 Spring MVC 和 hibernate 非常适合我的要求。

但是有人问，**Hibernate 是否适合我的用例？是不是太重了**？如何选择对 Web 应用程序可行的 ORM？

随意也建议更好的解决方案:)谢谢

- - 更新 - - - - -

1.  应用程序当然会增长并在未来添加更多表格。
2.  我不会使用 DDD。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-04T10:45:05.963

简而言之： **没有**

但也许也...

如果它是一个没有数据库模式的新项目，Hibernate 很有用。它允许将数据库抽象出来并根据对象进行思考。让你快速上手。但是，您的项目似乎已经启动并运行，因此这些好处是无效的。

当项目增长时，尤其是模式增长时，Hibernate 主要是阻碍。如果您打算使用 DDD 和繁重的域对象，Hibernate 没有帮助，因为 Hibernate 更喜欢哑 pojo 域模型。

如果您已经知道您将继续使用 PostgreSQL，那么 ORM 与数据库提供者无关的好处是毫无意义的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-04T10:39:01.117

它有助于减少代码行数，使系统更易于理解。您可以更多地专注于业务逻辑而不是持久性工作（SQL）。更重要的是，代码更少的系统更容易重构。

```
Of course, the application will grow and add more tables in the future. 
```

那么它就不会成为一个小应用程序。

[小规模应用支撑框架](https://stackoverflow.com/questions/9386286/small-scale-application-supporting-framework)

# java - Java调用bash脚本：权限被拒绝错误

> ID：14684713
> 
> 赞同：2
> 
> 时间：2013-02-04T10:23:40.570
> 
> 标签：java, linux, unix

我正在尝试从 java 类调用 bash 脚本。

这是我的java程序

```
import java.io.File;

public class RunBuild {
    public static void main(String[] args) {
        File wd = new File("/home/sai/Jan5WS/ATCore/bin/");
        System.out.println("Working Directory: " + wd);
        Process proc = null;
        try {
            proc = Runtime.getRuntime().exec(" . Ram.sh", null, wd);
            System.out.println(proc.getInputStream());
        } catch (Exception e) {
            e.printStackTrace();
        }
    }
} 
```

我已获得该脚本的所有权限，请参见下文 sai@sai-Aspire-4720Z:~/Jan5WS/ATCore/bin$ chmod 7777 Ram.sh

```
-rwxrwxrwx 1 sai sai    77 Feb  3 20:53 Ram.sh~
-rwxrwxrwx 1 sai sai    79 Feb  3 20:53 Ram.sh
sai@sai-Aspire-4720Z:~/Jan5WS/ATCore/bin$ 
```

它在下面抛出这个异常

```
Working Directory: /home/sai/Jan5WS/ATCore/bin
java.io.IOException: Cannot run program "." (in directory
"/home/sai/Jan5WS/ATCore/bin"): error=13, Permission denied
    at java.lang.ProcessBuilder.start(Unknown Source)
    at java.lang.Runtime.exec(Unknown Source)
    at java.lang.Runtime.exec(Unknown Source)
    at RunBuild.main(RunBuild.java:12)
Caused by: java.io.IOException: error=13, Permission denied
    at java.lang.UNIXProcess.forkAndExec(Native Method)
    at java.lang.UNIXProcess.<init>(Unknown Source)
    at java.lang.ProcessImpl.start(Unknown Source)
    ... 4 more 
```

我正在使用 Ubuntu 请让我知道可能是什么问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-04T10:26:17.807

查看您的错误输出 - 您正在尝试执行`"."`哪个目录，而不是您的 shell 脚本：

```
java.io.IOException: Cannot run program "." 
```

`" . "`将`exec()`调用中的替换为`"./"`以指示当前目录，确保您的脚本具有正确的 shebang 行，例如`#!/bin/bash`，并且它是可执行的（您已经这样做了）：

```
proc = Runtime.getRuntime().exec("./Ram.sh", null, wd); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T10:27:44.687

虽然我不知道`exec`函数调用在 Java 中是如何工作的，但我真的怀疑它会运行 shell 并接受 shell 命令。您要执行的命令是`.`该命令的内部 BASH 别名`source`。

您必须改为显式调用 shell：

```
proc = Runtime.getRuntime().exec("/bin/bash -c Ram.sh", null, wd); 
```

# jquery-mobile - jQuery 移动 CSS。换颜色

> ID：14684715
> 
> 赞同：0
> 
> 时间：2013-02-04T10:23:45.730
> 
> 标签：jquery-mobile

我使用 jquery mobile。当我将它与禁用选项一起放置时，我想更改 textarea html 元素的文本颜色。

```
<textarea rows='6'  disabled  cols='60' id='"+results.rows.item(i).IdTypeCommentaire+"'  name='"+results.rows.item(i).LibelleTypeCommentaire+"'> </textarea> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T10:27:29.240

只需使用 CSS 并使用`disabled`选择器：

```
textarea:disabled
{
color:#dddddd;
} 
```

编辑：只需将它添加到您的 CSS 或头部部分，如下所示：

```
<style type="text/css">
  textarea:disabled
   {
   color:#dddddd;
   } 
</style> 
```

# bash - 在 vim cwindow 中运行编译（并且 vim 不会被“冻结”）

> ID：14684717
> 
> 赞同：1
> 
> 时间：2013-02-04T10:23:50.837
> 
> 标签：bash, vim, compilation

我使用 vim 作为我的 IDE，我也使用它进行编译。当您在其中运行（终端）命令时，我不喜欢 vim 被“冻结”的事实。

所以我想做的是在一个征服词中运行我的编译[并将](http://code.google.com/p/conque/)它输出到一个文件（in `/tmp/`）中，然后用`cwindow`. 我同意这有点牵强，但想法就在这里。

现在我正在使用这个命令（绑定到`<F8>`），但它需要我的 vim，我在编译时无法编辑任何东西......

```
command -nargs=* BuildThat make -C /my_build_dir -j <args> | botright cwindow 3 
```

那么你们 vimers 是如何做到这一点的呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-04T10:34:27.570

Vim 默认不能运行异步任务。有很多脚本可以解决这个限制：

*   [壳同步](http://www.vim.org/scripts/script.php?script_id=4182)
*   [vim 插件异步](http://www.vim.org/scripts/script.php?script_id=3307)
*   [异步命令](http://www.vim.org/scripts/script.php?script_id=3431)

# c++ - 如何将结构内的所有内容设置为0？

> ID：14684720
> 
> 赞同：1
> 
> 时间：2013-02-04T10:24:12.237
> 
> 标签：c++, database, struct

我有一个结构，其中包含 3 种不同类型的值（char、float、int）......我需要在程序开始时将所有内容设置为 0。我怎么做？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-04T10:34:02.003

常用的方法有两种：

```
A a = A(); 
```

或者

```
A a = {}; 
```

第一个的优点是，如果您稍后提供构造函数，它仍然可以工作（只要您提供默认构造函数）。

关于使用`memset`:的建议，`memset`仅保证适用于整数类型。我无法想象它不适用于 a `float`，但正式地说，它不能保证。当然，如果您稍后修改`struct`，它可能会停止工作。这是一个避免的解决方案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-04T10:25:34.657

```
 struct A
 {
   int a;
   char b;
   float c;
 }; 
```

`struct A`是一个聚合的内置类型，初始化为`0`. 您可以通过两种方式初始化为 A：

```
//Class method pass to function
int main() 
{
  A a = {};      // initialize single A to 0
  A b = A();     // same effort
  A c[10] = {};  // initialize array to 0

  return 0;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-04T10:27:44.280

有几种方法：

1.  使用初始化器`mystruct x = { '\0', 0.0f, 0 };`
2.  采用`mystruct x; memset(&x, 0, sizeof(x));`
3.  编写一个将每个值设置为零的函数（或在 C++ 中为构造函数）。

一般来说，第一个是最明显的，但如果你有大量的结构，那么你可能会发现选项 2 或 3 更合适。

注意：使用`memset`仅在仅包含数据的数据结构上是安全的。在 C++ 中， a`struct`和 a`class`几乎相同，并且 a`struct`具有成员函数，具有其他`struct`or`class`成员或从另一个`class`or继承`struct`，绝对不能安全使用`memset`。当然，如果您从纯数据开始`struct`，然后将功能添加到`struct`“破坏”“唯一数据”承诺的功能中，这将特别危险。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-04T10:29:37.553

您可以使用[构造函数](http://en.wikipedia.org/wiki/Constructor_%28object-oriented_programming%29#C.2B.2B)来初始化所有元素。因此，您不仅可以使用 0 也可以使用其他值。

```
 struct A
 {
   int a;
   char b;
   float c;
   A(int _a=0,char _b=0,float _c=0.0) : a(_a), b(_b), c(_c) {}
 };

int main() 
{
  A a;
  // work with a
  return 0;
} 
```

# android - 如何在获取 XML 文件中实现 AsyncTask 以在 Google Maps Android API v2 中显示自定义标记？

> ID：14684725
> 
> 赞同：1
> 
> 时间：2013-02-04T10:24:24.190
> 
> 标签：android, google-maps, google-maps-markers, google-maps-android-api-2, google-maps-mobile

我目前正在开发一个使用 Google Maps API v2 的 Android 应用程序。我正在显示来自外部 XML 文件的自定义标记：http: [//dds.orgfree.com/DDS/landmarks_genxmlv2.php](http://dds.orgfree.com/DDS/landmarks_genxmlv2.php)，它将在地图中显示一些地标。

正如您在下面的代码中看到的那样，在实际手机中测试此应用程序时，我使用 StrictMode 来避免 NetworkOnMainThreadException。我知道不建议使用这种方法。它应该在单独的线程中通过 AsyncTask 在后台完成。我尝试在这个应用程序中实现 AsyncTask，但我没有运气。谁能帮我提供我的代码或提供一些好的建议来帮助我解决这个问题？提前非常感谢。

```
public class MapViewActivity extends android.support.v4.app.FragmentActivity {

    static final LatLng CITYHALL = new LatLng(07.0644444, 125.6077778);
    private GoogleMap mMap;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.layout_mapview);

        setUpMapIfNeeded();
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        MenuInflater inflater = getMenuInflater();
        inflater.inflate(R.menu.mapview_options_menu, menu);
        return true;
    }

    @Override
    public boolean onOptionsItemSelected(MenuItem item) {
        if (item.getItemId() == R.id.normal_mapstyle) {
            mMap.setMapType(MAP_TYPE_NORMAL);
        } else if (item.getItemId() == R.id.hybrid_mapstyle) {
            mMap.setMapType(MAP_TYPE_HYBRID);
        } else if (item.getItemId() == R.id.satellite_mapstyle) {
            mMap.setMapType(MAP_TYPE_SATELLITE);
        } else if (item.getItemId() == R.id.terrain_mapstyle) {
            mMap.setMapType(MAP_TYPE_TERRAIN);
        }

        return super.onOptionsItemSelected(item);
    }

    @Override
    protected void onResume() {
        super.onResume();
        setUpMapIfNeeded();
    }

    private void setUpMapIfNeeded() {

        if (mMap == null) {
            // Try to obtain the map from the SupportMapFragment.
            mMap = ((SupportMapFragment) getSupportFragmentManager()
                    .findFragmentById(R.id.map)).getMap();
            // Check if we were successful in obtaining the map.
            if (mMap != null) {
                setUpMap();
            }
        }
    }

    private void setUpMap() {

        Document doc = null;
        try {
            DocumentBuilderFactory factory = DocumentBuilderFactory
                    .newInstance();
            DocumentBuilder builder = factory.newDocumentBuilder();
            doc = builder
                    .parse("http://dds.orgfree.com/DDS/landmarks_genxmlv2.php");
        } catch (ParserConfigurationException e) {
            e.printStackTrace();
        } catch (SAXException e) {
            e.printStackTrace();
        } catch (IOException e) {
            e.printStackTrace();
        }

        NodeList markers = doc.getElementsByTagName("marker");

        try {
            for (int i = 0; i < markers.getLength(); i++) {
                Element item = (Element) markers.item(i);
                String name = item.getAttribute("name");
                String address = item.getAttribute("address");
                String stringLat = item.getAttribute("lat");
                String stringLng = item.getAttribute("lng");
                String icon = item.getAttribute("icon");
                Double lat = Double.valueOf(stringLat);
                Double lng = Double.valueOf(stringLng);

                mMap = ((SupportMapFragment) getSupportFragmentManager()
                        .findFragmentById(R.id.map)).getMap();

                mMap.addMarker(new MarkerOptions()
                        .position(new LatLng(lat, lng))
                        .title(name)
                        .snippet(address)
                        .icon(BitmapDescriptorFactory.fromAsset(new String(icon
                                + ".png"))));

                // Move the camera instantly to City Hall with a zoom of 15.
                mMap.moveCamera(CameraUpdateFactory.newLatLngZoom(CITYHALL, 15));
            }
        } catch (NumberFormatException e) {
            e.printStackTrace();
        }
    }
} 
```

这是我尝试过的。

```
public class MapViewActivity extends android.support.v4.app.FragmentActivity {

    static final LatLng CITYHALL = new LatLng(07.0644444, 125.6077778);
    private GoogleMap mMap;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.layout_mapview);
        StrictMode.ThreadPolicy policy = new StrictMode.ThreadPolicy.Builder()
                .permitAll().build();

        StrictMode.setThreadPolicy(policy);
        setUpMapIfNeeded();
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        MenuInflater inflater = getMenuInflater();
        inflater.inflate(R.menu.mapview_options_menu, menu);
        return true;
    }

    @Override
    public boolean onOptionsItemSelected(MenuItem item) {
        if (item.getItemId() == R.id.map_menu_showlegend) {
            Log.d("MENU", "Show Legend was CLICKED!");
        } else if (item.getItemId() == R.id.map_menu_maptype) {
            Log.d("MENU", "Map Type was CLICKED!");
        } else if (item.getItemId() == R.id.normal_mapstyle) {
            Log.d("MENU", "MAP_TYPE_NORMAL was CLICKED!");
            mMap.setMapType(MAP_TYPE_NORMAL);
        } else if (item.getItemId() == R.id.hybrid_mapstyle) {
            Log.d("MENU", "MAP_TYPE_HYBRID was CLICKED!");
            mMap.setMapType(MAP_TYPE_HYBRID);
        } else if (item.getItemId() == R.id.satellite_mapstyle) {
            Log.d("MENU", "MAP_TYPE_SATELLITE was CLICKED!");
            mMap.setMapType(MAP_TYPE_SATELLITE);
        } else if (item.getItemId() == R.id.terrain_mapstyle) {
            Log.d("MENU", "MAP_TYPE_TERRAIN was CLICKED!");
            mMap.setMapType(MAP_TYPE_TERRAIN);
        }

        return super.onOptionsItemSelected(item);
    }

    @Override
    protected void onResume() {
        super.onResume();
        setUpMapIfNeeded();
    }

    private void setUpMapIfNeeded() {
        // Do a null check to confirm that we have not already instantiated the
        // map.
        if (mMap == null) {
            // Try to obtain the map from the SupportMapFragment.
            mMap = ((SupportMapFragment) getSupportFragmentManager()
                    .findFragmentById(R.id.map)).getMap();
            // Check if we were successful in obtaining the map.
            if (mMap != null) {
                setUpMap();
            }
        }
    }

    private Boolean isOnline() {
        ConnectivityManager cm = (ConnectivityManager) getSystemService(Context.CONNECTIVITY_SERVICE);
        NetworkInfo ni = cm.getActiveNetworkInfo();
        if (ni != null && ni.isConnected())
            return true;

        return false;
    }

    private void setUpMap() {
        new ParseXML().execute();
    }

    private class ParseXML extends AsyncTask<Void, Void, Document> {
        Document doc = null;

        @Override
        protected Document doInBackground(Void... params) {

            try {
                Thread.sleep(2000);
            } catch (InterruptedException e1) {
                e1.printStackTrace();
            }

            if (isOnline()) {

                try {
                    DocumentBuilderFactory factory = DocumentBuilderFactory
                            .newInstance();
                    DocumentBuilder builder = factory.newDocumentBuilder();
                    doc = builder
                            .parse("http://dds.orgfree.com/DDS/landmarks_genxmlv2.php");
                } catch (ParserConfigurationException e) {
                    e.printStackTrace();
                } catch (SAXException e) {
                    e.printStackTrace();
                } catch (IOException e) {
                    e.printStackTrace();
                }

                NodeList markers = doc.getElementsByTagName("marker");

                try {
                    for (int i = 0; i < markers.getLength(); i++) {
                        Element item = (Element) markers.item(i);
                        String name = item.getAttribute("name");
                        String address = item.getAttribute("address");
                        String stringLat = item.getAttribute("lat");
                        String stringLng = item.getAttribute("lng");
                        String icon = item.getAttribute("icon");
                        Double lat = Double.valueOf(stringLat);
                        Double lng = Double.valueOf(stringLng);

                        mMap = ((SupportMapFragment) getSupportFragmentManager()
                                .findFragmentById(R.id.map)).getMap();

                        mMap.addMarker(new MarkerOptions()
                                .position(new LatLng(lat, lng))
                                .title(name)
                                .snippet(address)
                                .icon(BitmapDescriptorFactory
                                        .fromAsset(new String(icon + ".png"))));

                        // Move the camera instantly to City Hall with a zoom of
                        // 15.
                        mMap.moveCamera(CameraUpdateFactory.newLatLngZoom(
                                CITYHALL, 15));
                    }
                } catch (NumberFormatException e) {
                    e.printStackTrace();
                }
            } else {
                Toast.makeText(MapViewActivity.this, "No connection..",
                        Toast.LENGTH_LONG).show();
            }

            return doc;
        }

        @Override
        protected void onPostExecute(Document doc) {
            super.onPostExecute(doc);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T11:05:57.177

您不能从后台线程更改 UI。
因此，将所有改变 UI 的东西移到`onPostExecute()`方法上。
我今天已经用代码示例回答了同样的问题：[Android disable button on successful doinbackground call](https://stackoverflow.com/questions/14684531/android-disable-button-on-successful-doinbackground-call/14684601#14684601)

# reporting-services - SSRS Datepicker 控件未在 Chrome 和 safari 中显示

> ID：14684727
> 
> 赞同：7
> 
> 时间：2013-02-04T10:24:35.220
> 
> 标签：reporting-services, datepicker, ssrs-2008

我在 asp.net 应用程序中使用 SSRS 报告。SSRS Datepicker 控件未在 Chrome 和 safari 中显示。它只是显示文本框。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T12:01:29.193

你必须使用IE

我总是使用默认值，以便用户知道如何正确输入日期

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T11:56:17.780

我很遗憾听到这个消息。除了变通方法之外，您可以做的事情是有限的，因为这适用于 Microsoft。:(

我的是忘记日期参数类型并使用自由文本字段。这绝不是理想的！

或使用 Internet Explorer。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-11-20T23:21:15.053

每当我访问报告服务报告时，我都会使用 ietab chrome 扩展。它与报告服务完美配合。 [关联](https://chrome.google.com/webstore/detail/ie-tab/hehijbfgiekmjfkfjpbkbammjbdenadd?hl=en)

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2015-03-06T23:42:52.917

**Chrome**的解决方案：如果参数提示中包含“日期”一词，Chrome 将显示日历控件。

*（注意：对于任何参数都是如此，无论参数的实际数据类型如何）*

# jquery - 如何使用 jQuery 移动表格行

> ID：14684728
> 
> 赞同：1
> 
> 时间：2013-02-04T10:24:34.710
> 
> 标签：jquery, html

我有这个代码

```
<tr class="parentRow">
    <td colspan="2">parentTd 01 </td>
</tr>

<tr class="childRow">
        <td> childTd 01 </td>

</tr>
<tr class="childRow">
        <td> childTd 02 </td>
</tr>

<tr class="parentRow">
    <td colspan="2">parentTd 02 </td>
</tr>

<tr class="childRow">
        <td> childTd 03 </td>
</tr>

<tr class="childRow">
        <td> childTd 04 </td>
</tr> 
```

通过使用 jQuery，我想创建一个函数，该函数将仅在**parentRow**内移动**childRow**以获得由此代码设计的结果

```
<tr class="parentRow">
    <td colspan="2">parentTd 01 </td>
</tr>

<tr class="childRow">
        <td> childTd 02 </td>
</tr>
<tr class="childRow">
        <td> childTd 01 </td>
</tr>

<tr class="parentRow">
    <td colspan="2">parentTd 02 </td>
</tr>

<tr class="childRow">
        <td> childTd 04 </td>
</tr>

<tr class="childRow">
        <td> childTd 03 </td>
</tr> 
```

任何想法？抱歉，如果您发现我的问题可能不够清楚！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T10:37:02.597

`.sortable()`您可以为此尝试jquery ui ..

***[现场演示](http://jsfiddle.net/HpE2X/)***

# php - 循环内无法使用数据库连接

> ID：14684729
> 
> 赞同：0
> 
> 时间：2013-02-04T10:24:36.427
> 
> 标签：php, loops, mysqli, connection

我在使用 mysqli 时遇到问题。我正在尝试为所有符合某个类别的人搜索数据库。在遍历结果时，我想创建一个“Person”类的实例，将数据库连接传递给该类。这就是问题开始的地方。这是我的代码。

```
$con = new mysqli($db_host,$db_user,$db_password,$db_name);
if (mysqli_connect_errno())
{
    die(mysqli_connect_error()); //There was an error. Print it out and die
}

$sql = "SELECT id FROM users";
$stmt = $con->prepare( $sql );
if ($stmt)
{
    $stmt->execute();
    $stmt->bind_result($id);

    while($stmt->fetch())
    {
        $person = new Person( $con );
    }
    $stmt->close();
} 
```

如果我将 移动`$person = new Person( $con );`到 while 循环之后，它会成功地创建最后一个人的对象。它在循环内时不起作用。这是什么原因？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T11:00:42.070

根据显示的错误，在使用先前的结果集之前，您不能使用相同的连接。为了使其工作，您可以执行以下操作：

```
 $personIDs = array();
    while($stmt->fetch())
    {
        $personIDs[] = $id;
    }
    $stmt->close(); 
```

而不仅仅是遍历缓冲到数组中的所有 id：

```
foreach($personIDs as $id) {
    $person = new Person( $con );
} 
```

或者，您可以使用[store_results](http://php.net/manual/en/mysqli-stmt.store-result.php)

```
if ($stmt)
{
    $stmt->execute();
    $stmt->bind_result($id);
    $stmt->store_results();

    while($stmt->fetch())
    {
        $person = new Person( $con );
    }
    $stmt->free_result();
    $stmt->close();
} 
```

# java - 将 5000 万条数据上传到 Google App Engine 数据存储

> ID：14684732
> 
> 赞同：-1
> 
> 时间：2013-02-04T10:24:48.697
> 
> 标签：java, google-app-engine

我正在尝试找到将大量数据传输到谷歌应用引擎数据存储的最佳方法。我们是 Java 开发人员，如果您能提出有关 Google App Engine Java 的解决方案，那就太好了。

我见过很少的解决方案，如 google app engine pipeline、map reduce 并尝试过，但没有任何效果。有没有真正有效的解决方案？

谢谢， Ramesh.V

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T09:37:32.463

我做了什么，将它们分成最大 32MB 的文件？将它们与后端源代码一起上传，并在后端编写一个程序以将数据提取到数据存储记录中......请注意，每条记录的最大大小为 1MB。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T09:42:49.360

为什么不试试 Google BigQuery？

[https://cloud.google.com/products/big-query](https://cloud.google.com/products/big-query)

[这是数据传输的方法](https://developers.google.com/bigquery/articles/ingestioncookbook#cloudstorageordirectupload)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-04T11:14:56.990

我不知道最好的方法，但你看过 GAE/J 的 Java 远程 API 吗？

# java - Java中的最终类不应该是最终的，反之亦然？

> ID：14684733
> 
> 赞同：27
> 
> 时间：2013-02-04T10:24:56.513
> 
> 标签：java, class, final

最近在一次采访中被问到这个问题：

> 你能命名 Java API 中任何不应该是 final 的类，或者一个不是而且应该是的类吗？

我什么都想不出来。这个问题意味着我应该知道所有的 API 类，就像我的手背一样，我个人不希望任何 Java 开发人员知道。

如果有人知道任何此类课程，请提供示例。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-02-04T10:30:19.613

`java.awt.Dimension`不是最终的或不可变的，应该是。任何返回 Dimension（例如 Window 对象）的东西都需要制作防御性副本以防止调用者做讨厌的事情。

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2013-02-04T10:30:10.823

想到的第一个例子是一些非最终的 Number 子类，例如[`BigDecimal`](http://docs.oracle.com/javase/7/docs/api/java/math/BigDecimal.html)and [`BigInteger`](http://docs.oracle.com/javase/7/docs/api/java/math/BigInteger.html)，它可能应该是 final 的。

特别是，它们的所有方法都可以被覆盖。这使您能够创建一个损坏`BigDecimal`的 ，例如：

```
public class BrokenBigDecimal extends BigDecimal {
    public BigDecimal add(BigDecimal augend) {
        return BigDecimal.ZERO;
    }
} 
```

例如，如果您从不受信任的代码中收到 BigDecimal，这可能会产生重大问题。

套用有效的Java：

*   设计和文件继承或禁止它
*   类应该是不可变的，除非有充分的理由使它们可变

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-04T10:30:34.450

在我看来，你的回答应该是，哪些课程应该是最终的，哪些不应该是最终的，这是**一个品味问题。**

有充分的理由`Integer`，`Double`而且`String`所有`final`。

有充分的理由抱怨这一点。

然后是可以制作`BitSet`的等等。`BitInteger``final`

在很多情况下类不是`final`，但它们也不能合理地扩展，所以它们可能应该是 final 的。

选择一个特定的类：`BitSet`。不是`final`，但您不能扩展它来添加位`shift`操作。他们可能已经做到了`final`，或者允许我们添加这样的功能。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-06T12:47:30.210

`Date`班级跳了出来。它是一个可变的简单值类（本质上是 a 的包装器`long`），但一个很好的启发是简单值类应该是不可变的。还要注意它的许多不推荐使用的方法：更多的证据表明设计是拙劣的。的可变性`Date`是[错误的来源，需要有纪律的防御性复制](https://stackoverflow.com/q/7932489/545127)。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-06T13:39:36.383

*一个不是而且应该是*

Java 中的大多数 final 类都是出于安全考虑而设计的，总体而言，final 类相对较少。例如`java.util.String`，出于这个原因，它是最终的。许多其他人也是如此。一些带有私有 c-tor 的类被声明为 final (Math, StrictMath)，但在这种情况下并不重要。

基本上除非涉及安全问题，否则我不在乎该类是否是最终的，但是您始终可以使用带有某些工厂的非公共 c-tor，从而有效地限制了子类化的能力。通常这是我的首选方式，因为它允许包私有子类化。

简而言之：我想不出一个不应该的最终课程，但是有一些可能是。例如`java.lang.Thread`，最终可能不需要保护与恶意`clone()`。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-11-21T07:56:51.763

我相信`java.util.Arrays`并且`java.util.Collections`应该被宣布为最终的。

原因如下：

1.  它们只包含静态成员*和私有构造函数*。
2.  私有构造函数防止这些类被扩展。

因此，这些类无法扩展，但这一事实在其公共接口中不可见。宣布它们`final`将暴露它并澄清意图。

此外，`java.lang.Math`（另一个所谓的*实用程序类*）具有相同的结构，并且它也被声明`final`。

* * *

## 回答 #7

> 赞同：-2
> 
> 时间：2013-02-04T10:27:17.493

检查 String 类，它是最终的，可能应该是你在面试中的答案。

检查文档。

[http://docs.oracle.com/javase/7/docs/api/java/lang/String.html](http://docs.oracle.com/javase/7/docs/api/java/lang/String.html)

# php - SQL join 与其他表并添加案例

> ID：14684734
> 
> 赞同：0
> 
> 时间：2013-02-04T10:24:58.757
> 
> 标签：php, mysql

以下查询告诉我同一天有多少销售额。还有多少新用户和积分。

这是我的工作查询（效果很好！）：

```
SELECT Substring(purchase.`date`,1,10)                       AS `DayDate`, 
                   Sum(Cast(Substring(purchase.`item`, 12) AS UNSIGNED))     AS `Credit`,
                   Count(1)                                                  AS `Sales`,
                   (SELECT Count(*) FROM enswitch_mobile_users WHERE Date(purchase.`date`) = Substring(enswitch_mobile_users.`creation_date`,1,10))  AS `New_users`
                        FROM   (SELECT item, date 
                                    FROM enswitch_new_iphone_purchases WHERE `status`=1
                                    UNION 
                                    SELECT item, date 
                                    FROM enswitch_new_android_purchases WHERE `status`=1) AS `purchase` 
                        WHERE purchase.`date` >= :from_date AND purchase.`date` <= :to_date
                GROUP  BY `DayDate` 
                ORDER  BY `DayDate` DESC 
```

我在这里搜索 3 个表。 `enswitch_new_android_purchases` `enswitch_new_iphone_purchase` 它们都有 item、user_id、status 和 date 列。一个条目的示例：

`date`: `2012-08-01 16:24:30` `item`: `xsalnx.sip.70` `user_id`: `1337` `status`:`1`

还从 (id, creation_date, mobile id, ...) 中提取 mobile_users 数量`enswitch_mobile_users`并按特定日期分组。

如果购买的用户或新用户是测试人员，我想要做的是添加测试。如果是这样，我想在我的查询中忽略这些数据。

我将测试人员保存在名为： `enswitch_testing_devices`(id, name, mobile_id) 的表上。

我可以使用`enswitch_mobile_users`（mobile_id 列）加入数据。

到目前为止，我试图让它工作但没有运气.. 我该怎么做这个查询？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T10:36:50.207

试试下面 - 当你得到用户时添加一个子句 - 得到除测试之外的所有用户。现在，一个示例数据和结构表会有所帮助。（我认为您可以重新编写查询。）

```
SELECT Substring(purchase.`date`,1,10)                       AS `DayDate`, 
                   Sum(Cast(Substring(purchase.`item`, 12) AS UNSIGNED))     AS `Credit`,
                   Count(1)                                                  AS `Sales`,
                   (
                        SELECT Count(*) 
                        FROM enswitch_mobile_users 
                        WHERE 
                            Date(purchase.`date`) = Substring(enswitch_mobile_users.`creation_date`,1,10) 
                            AND enswitch_mobile_users.mobile_id NOT IN ( select mobile_id from enswitch_testing_devices WHERE 'is tester')
                    )  AS `New_users`
                        FROM   (SELECT item, date 
                                    FROM enswitch_new_iphone_purchases WHERE `status`=1
                                    UNION 
                                    SELECT item, date 
                                    FROM enswitch_new_android_purchases WHERE `status`=1) AS `purchase` 
                        WHERE purchase.`date` >= :from_date AND purchase.`date` <= :to_date
                GROUP  BY `DayDate` 
                ORDER  BY `DayDate` DESC 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T13:39:11.630

我设法解决了这个问题。

如果有人想知道。

```
function search_daily_sales($from_date, $to_date ,$show_testers)
{
        // If not showing the testers
    if ($show_testers === false) 
    {
        $sql = "SELECT Substring(purchase.`date`,1,10)                            AS `DayDate`,
                        Sum(CASE WHEN td.mobile_id IS NULL 
                            THEN Cast(Substring(purchase.`item`, 12) AS UNSIGNED) 
                            ELSE '0' END)                                         AS `Credit`,
                        Sum(CASE WHEN td.mobile_id IS NULL THEN '1' ELSE '0' END) AS `Sales`,
                        (SELECT Count(*) FROM enswitch_mobile_users 
                            WHERE 
                                Date(purchase.`date`) = Substring(enswitch_mobile_users.`creation_date`,1,10)
                            AND enswitch_mobile_users.`mobile_id` NOT IN (SELECT mobile_id FROM enswitch_testing_devices))  AS `New_users`,
                    MIN(CASE WHEN td.mobile_id IS NULL THEN '0' ELSE '1' END)    AS `tester`

                    FROM   (SELECT item, date, user_id
                                FROM enswitch_new_iphone_purchases WHERE `status`=1
                                UNION 
                                SELECT item, date, user_id
                                FROM enswitch_new_android_purchases WHERE `status`=1) AS `purchase` 

                    LEFT JOIN enswitch_mobile_users mu ON mu.id = purchase.user_id
                    LEFT JOIN enswitch_testing_devices td ON td.mobile_id = mu.mobile_id

                    WHERE purchase.`date` >= :from_date AND purchase.`date` <= :to_date
            GROUP  BY `DayDate` 
            ORDER  BY `DayDate` DESC";
    }
    else 
    {
        $sql = "SELECT Substring(purchase.`date`,1,10)                       AS `DayDate`, 
               Sum(Cast(Substring(purchase.`item`, 12) AS UNSIGNED))     AS `Credit`,
               Count(1)                                                  AS `Sales`,
               (SELECT Count(*) FROM enswitch_mobile_users WHERE Date(purchase.`date`) = Substring(enswitch_mobile_users.`creation_date`,1,10))  AS `New_users`
                    FROM   (SELECT item, date 
                                FROM enswitch_new_iphone_purchases WHERE `status`=1
                                UNION 
                                SELECT item, date 
                                FROM enswitch_new_android_purchases WHERE `status`=1) AS `purchase` 
                    WHERE purchase.`date` >= :from_date AND purchase.`date` <= :to_date
            GROUP  BY `DayDate` 
            ORDER  BY `DayDate` DESC";
    }

    $result = DB::query(Database::SELECT, $sql)->bind(':from_date', $from_date)->
                                                bind(':to_date', $to_date)->execute();

return $result;
} 
```

# ios - 按父子排序数组

> ID：14684738
> 
> 赞同：0
> 
> 时间：2013-02-04T10:25:10.570
> 
> 标签：ios, nsarray, sorting

我有一组自定义对象。这些对象表示二进制文件中的段。该属性`loc`保存对象在文件中自己的位置，其中`prev`保存“上一个”对象的位置。在这种情况下，“上一个”和“下一个”并不一定意味着对象在文件中相继出现。第一个对象有`prev = 0`。最后一个对象没有以下对象将其位置保持为`prev`。

我如何实现这种排序？对象的数量最初是未知的。

```
//My custom object
@interface MyObject : NSObject

@property (nonatomic, assign) NSInteger loc, prev;

@end

//In the implementation of some other class
NSMutableArray *array = [NSMutableArray new];

{// order should be 6
    MyObject *obj = [MyObject new];
    obj.loc = 3000;
    obj.prev = 111;
    [array addObject:obj];
}
{// order should be 2
    MyObject *obj = [MyObject new];
    obj.loc = 2000;
    obj.prev = 222;
    [array addObject:obj];
}
{// order should be 4
    MyObject *obj = [MyObject new];
    obj.loc = 333;
    obj.prev = 4000;
    [array addObject:obj];
}
{//  order should be 1
    MyObject *obj = [MyObject new];
    obj.loc = 222;
    obj.prev = 5000;
    [array addObject:obj];
}
{//  order should be 5
    MyObject *obj = [MyObject new];
    obj.loc = 111;
    obj.prev = 333;
    [array addObject:obj];
}
{// order should be 3
    MyObject *obj = [MyObject new];
    obj.loc = 4000;
    obj.prev = 2000;
    [array addObject:obj];
}
{// order should be 0
    MyObject *obj = [MyObject new];
    obj.loc = 5000;
    obj.prev = 0;
    [array addObject:obj];
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T11:57:04.783

Try using lexicographical sorting:

```
NSArray *sorted = [array sortedArayUsingComparator:^(id obj1, id obj2) {
    if ([obj1 parentID] < [obj2 parentID] {
        return NSOrderedAscending;
    } else if ([obj1 parentID] > [obj2 parentID] {
        return NSOrderedDescending;
    } else if ([obj1 ID] < [obj2 ID] {
        return NSOrderedAscending;
    } else if ([obj1 ID] > [obj2 ID] {
        return NSOrderedDescending;
    } else {
        return NSOrderedSame;
    }
}]; 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-05T18:37:49.010

没关系，我明白了。

```
NSMutableArray *unordered = [[NSMutableArray alloc] initWithArray:array];
NSMutableArray *ordered = [NSMutableArray new];

for(MyObject *myObj in array)
{
    if(!myObj.prev)
    {
        [orderedTables addObject:myObj];
        [unorderedTables removeObject:myObj];
        break;
    }
}

int counter = 0;
while(unordered.count && counter < ordered.count)
{
    MyObject *obj1 = [ordered objectAtIndex:counter++];

    for(int i = 0; i < unordered.count; ++i)
    {
        MyObj *obj2 = [unordered objectAtIndex:i];

        if(obj2.prev == obj1.loc)
        {
            [ordered addObject:obj2];
            [unordered removeObject:obj2];
            break;
        }
    }
} 
```

# c - GArray 元素的可用内存

> ID：14684739
> 
> 赞同：1
> 
> 时间：2013-02-04T10:25:10.537
> 
> 标签：c, linux, free, glib

我在我的函数中创建`drvm *drv`结构。此结构本身包含包含`malloc()-ed`字段 ( `uint32_t *buffer`) 的字段。执行此操作的代码类似于：

```
...
size_t elm_size = sizeof(model*);
uint32_t length = *(uint32_t*)len;

GArray *models = g_array_sized_new(FALSE, FALSE, elm_size, length);

model *mod;
for (int i = 0; i < length; ++i) {
    mod = create_model(...);
    g_array_append_val(models, mod);
} 
```

这段代码不包含错误并且经过高度测试。在程序开始时，我注册了函数`free_all()`(by `atexit()`)，该函数在执行时应该清理所有资源（尤其是内存）`exit()`。

在这个函数中，我正在尝试为自己释放`elements of GArray*`(`model *`结构)**和**内存的内存`GArray *`：

```
GArray *models;
g_array_set_clear_func(models, clean_model);
if(!g_array_free(models, FALSE)) { //OK } 
```

问题是当`clean_model(void *data)`在库中调用时，`glib`我建议它包含指向一个`model *`元素的指针。但是地址是错误的，它似乎没有指向任何正确的值。既不`GArray*`，也不`model*`。

此外`GArray *models`，`free_all()`功能是正确的（与我创建它时相同）并且当我通过以下方式遍历所有`GArray *`元素`free_all()`时

```
for (int i = 0; i < len; ++i) {
    mod = g_array_index(models, model*, i); // Here I get correct pointer to model*
    clean_model(mod);
} 
```

我得到预期值。

**问：**怎么了？`GArray *`如果这些元素包含内存，我应该如何释放元素的`malloc()-ed`内存？

**部分标题：**

```
struct _info {
    uint32_t *buffer;
    uint32_t len;
};

typedef struct _info info;

struct _prod {
    uint32_t *buffer;
    uint32_t len;
};

typedef struct _prod prod;

struct _model {
    uint32_t name;
    prod product;
    info inform;
};

typedef struct _model model;

struct _drvm {
    GArray *models;
    GArray *strings;
};

typedef struct _drvm drvm; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-05-14T23:54:19.033

基本上问题是你的`clean_model`函数被传递`model**`而不是`model*`你所期望的。

请记住，这`GArray`意味着存储完整的结构，而不仅仅是指向结构的指针。为了做到这一点，它需要将结构的全部内容*复制*到内部`data`数组中，因此任何后续指向结构的指针（传递给`clean_model`）都将指向内部的某个地方`data`（即`clean_model((elt_type*)&models->data[index * sizeof(elt_type)])`- 在你的情况下`elt_type`是哪里`model*`）

为了解决这种情况，我想到了几个选项，按照（主观）偏好的顺序：

1.  改为使用`GPtrArray`；鉴于您的元素已经动态分配，内存管理/指针处理/类型转换（或缺少）将不会那么混乱
2.  将`clean_model`参数更改为`model**`
3.  用于`GArray`存储`model`结构而不是指针，但只有当您可以将分配与填充模型内容分开时才有意义，例如`g_array_new(FALSE, FALSE, sizeof(model))`和`fill_model(&g_array_index(models, model, i))`

在所有情况下，你也应该传递`TRUE`给，`g_array_free`因为你似乎没有在`GArray.data`之后使用任何东西（这并不是说无论如何你都在释放所有有用的数据。）

# symfony - 在 Entity 中获取 entityManager

> ID：14684745
> 
> 赞同：22
> 
> 时间：2013-02-04T10:25:26.480
> 
> 标签：symfony, doctrine

我想使用，例如：

```
$em = $this->getEntityManager(); 
```

在实体内部。

**我知道我应该将其作为一项服务**来执行，但出于某些测试目的，我想从实体访问它。

有可能实现吗？

我试图：

```
$em = $this->getEntityManager();
$profile_avatar = $em->getRepository('bundle:Perfils')->findOneByUser($this-getId()); 
```

但不工作。

> **致命错误：在第****449**行 的**/opt/lampp/htdocs/web/src/Pct/bundle/Entity/User.php**中调用未定义的方法 Proxies\webBundleEntityUserProxy::getEntityManager()

 **为什么我要这样做？

我有 3 种用户：Facebook、Twitter 和 MyOwnWebsite 用户。他们每个人都有不同的头像，链接 facebook 的个人资料、twitter 或其他，如果它的 myownwebsite 用户，我从数据库中的 URL 检索头像。现在，我不想创建服务，因为我只是想让它工作，测试它，而不是创建最终部署。所以这就是我尝试从实体调用实体管理器的原因。我现在不想修改配置文件，只是这个实体。

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2013-02-04T10:42:02.207

正如评论者（再次）指出的那样，实体内部的实体管理器是代码异味。对于 OP 的特定情况，他希望以最少的麻烦获得实体管理器，简单的 setter 注入将是最可靠的（与我通过构造函数注入的原始示例相反）。

对于最终在这里寻找相同问题的卓越解决方案的任何其他人，有两种方法可以实现这一目标：

1.  [按照https://stackoverflow.com/a/24766285/1349295](https://stackoverflow.com/a/24766285/1349295)的建议实现`ObjectManagerAware`接口

    ```
    use Doctrine\Common\Persistence\ObjectManagerAware;
    use Doctrine\Common\Persistence\ObjectManager;
    use Doctrine\Common\Persistence\Mapping\ClassMetadata;
    use Doctrine\ORM\Mapping as ORM;

    /**
     * @ORM\Entity
     */
    class Entity implements ObjectManagerAware
    {
        public function injectObjectManager(
            ObjectManager $objectManager,
            ClassMetadata $classMetadata
        ) {
            $this->em = $objectManager;
        }
    } 
    ```

2.  或者，使用`@postLoad`/`@postPersist`生命周期回调并使用[https://stackoverflow.com/a/23793897/1349295](https://stackoverflow.com/a/23793897/1349295)`LifecycleEventArgs`建议的参数获取实体管理器

    ```
    use Doctrine\Common\Persistence\Event\LifecycleEventArgs;
    use Doctrine\ORM\Mapping as ORM;

    /**
     * @ORM\Entity
     * @ORM\HasLifecycleCallbacks()
     */
    class Entity
    {
        /**
         * @ORM\PostLoad
         * @ORM\PostPersist
         */
        public function fetchEntityManager(LifecycleEventArgs $args)
        {
            $this->setEntityManager($args->getEntityManager());
        }
    } 
    ```

## 原始答案

`EntityManager`在一个内部使用一个`Entity`是非常糟糕的做法。这样做违背了将查询和持久化操作与实体本身分离的目的。

但是，如果你真的，真的，真的需要一个实体中的实体管理器并且不能这样做，那么将它注入到实体中。

```
class Entity
{
    private $em;

    public function __contruct($em)
    {
        $this->em = $em;
    }
} 
```

然后调用 as `new Entity($em)`。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2014-05-21T21:13:33.800

最好的方法是使用生命周期：`@ORM\HasLifecycleCallbacks`

您可以根据需要使用适当的事件来获得结果：

```
@postLoad
@postPersist
... 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-02-04T10:29:22.640

从实体内部调用实体管理器是一种不好的做法！您应该使您的实体尽可能简单。

出于什么目的，您需要从实体调用实体管理器？

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2016-11-06T17:21:13.403

我认为您应该做的是，而不是在您的实体中使用实体管理器，而是为您的实体创建一个自定义存储库。

在您的实体 ORM 文件中，添加如下条目（如果不使用 YML，则在您的实体类注释中）：

```
App\Bundle\Profils: 
# Replace the above as appropiate
    type: entity
    table: (your table)
    ....
    repositoryClass: App\Bundle\CustomRepos\ProfilsRepository
    # Replace the above as appropiate. 
    # I always put my custom repos in a common folder, 
    # such as CustomRepos 
```

现在，创建一个具有上述命名空间的新 PHP 类：

```
//Your ProfilsRepository.php
<?php
namespace App\Bundle\CustomRepos;

use Doctrine\ORM\EntityRepository;

class ProfilsRepository extends EntityRepository
{
    /**
     * Will return the user url avatar given the user ID
     * @param integer $userID The user id.
       @return string The avatar url
     */
    public function getUserProfile($userId)
    {
       $em = $this->getEntityManager();
       $qb = $em->createQueryBuilder();
       $qb->select... (your logic to retrieve the profil object);

       $query = $qb->getQuery();
       $result = $query->getResult();

       return $result;
    }
} 
```

最后，在您的控制器中：

```
// Your controller
<?php
   namespace <class namespace>;
   ...
   use App\Bundle\CustomRepos\ProfilsRepository;
   use Symfony\Bundle\FrameworkBundle\Controller\Controller;
   ...
   class YourClassNameController extends Controller
   {
      public function yourAction()
      {
         $userId = <get the user ID>;
         // Pass the name of your entity manager to the 
         // getManager function if you have more than one and
         // didn't define any default
         $em = $this->getDoctrine()->getManager();
         $repo = $em->getRepository('Profils');
         $avatar = $repo->getUserProfile($userId);
         ...

      }
   } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-02-18T09:38:28.753

您需要将 services.yml 设置为：

```
services:
    your_service_name:
        class: AppBundle\Controller\ServiceController
        arguments: [ @doctrine.orm.entity_manager ] 
```

您还需要使用以下构造函数设置控制器：

```
public function __construct(\Doctrine\ORM\EntityManager $em)
{
    $this->em = $em;
} 
```

并 `$this->em`在控制器中使用（例如`$connection = $this->em->getConnection();`）**

# c++ - 如何使用自定义结构初始化 boost::array？

> ID：14684746
> 
> 赞同：1
> 
> 时间：2013-02-04T10:25:27.167
> 
> 标签：c++, boost, c++11, struct, aggregate-initialization

我正在寻找一个不错的解决方案是如何`boost::array`使用自定义用户结构和数据初始化静态。我的例子，我所期望的`boost::array`，如下：

```
 struct Foo
 {
      std::string a;
      std::string b;
 };
 static boost::array< Foo, 2 > foo =
 {
      { "111", "222" },
      { "333", "444" },
 }; 
```

但是这段代码不起作用，

```
error C2078: too many initializers 
```

我错过了什么？

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-04T22:04:40.050

这是由大括号省略的工作方式引起的。从 N3485，8.5.1.11：

> 可以在*初始化列表*中省略大括号，如下所示。如果*初始化器列表*以左大括号开头，则后续的*初始化器子句的逗号分隔列表初始化*子聚合的成员；*初始化子句*比成员多是错误的。但是，如果子聚合的*初始化器列表*不以左大括号开头，则仅从列表中获取足够的*初始化器子句*来初始化子聚合的成员；任何剩余的*初始化子句*都被留下来初始化当前子聚合是其成员的聚合的下一个成员。

换句话说，如果接下来是一个初始化列表，我们可以假设没有发生大括号省略。大括号插入在最内层，所以虽然我们想要以下

```
{{"a", "b"}, {"c", "d"}}  -> {{{"a", "b"}, {"c", "d"}}} 
```

我们反而得到

```
{{"a", "b"}, {"c", "d"}} -> {{{"a", "b"}}, {"c", "d"}} 
```

现在关于为什么我们可以省略更多的大括号并编写`{"a", "b", "c", "d"}`：一旦我们点击`"a"`，我们知道大括号省略已经发生，因为我们期望数组成员使用初始化列表进行初始化。因此，我们开始使用尽可能多的初始化子句来初始化成员数组。同样，我们点击了`"a"`而不是初始化器列表，因此我们开始使用尽可能多的初始化器子句来初始化第一个`Foo`。我们第二次重复这个`Foo`，消耗所有子句，最后得到

```
{"a", "b", "c", "d"} -> {{{"a", "b"}, {"c", "d"}}} 
```

如预期的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-04T19:47:26.257

添加一组额外的大括号对我有用。

```
 static boost::array< Foo, 2 > foo =
 {{
    { "111", "222" },
    { "333", "444" },
 }}; 
```

更多，因为我弄清楚为什么。我认为这里的关键是“括号省略”（感谢 jesyspa 指向我那里）

这也有效：

```
 static boost::array< Foo, 2 > foo =
 {
    "111", "222",
    "333", "444",
 }; 
```

# sql - 在多对多关系中搜索最后一条评论

> ID：14684747
> 
> 赞同：1
> 
> 时间：2013-02-04T10:25:30.130
> 
> 标签：sql, doctrine-orm, many-to-many, max

我有 3 张桌子：

发布、发布评论和评论。

这是一个多对多的关系。

我想为每个帖子选择最后一条评论。所以像 (select * from comment order by create_at DESC limit 1) 这样的东西在这里不起作用。

我想要类似的东西：

```
select *
  from post as p
    left join post_comment as pc on (pc.post_id = p.id)
    left joint comment as c on (c.id = pc.comment_id)
    left joint comment as c2 on (c2.id = pc.comment_id and c2.id > c.id)
  where c2.id is null 
```

它适用于一对多关系，但对于多对多，我无法驾驭它。

注意：我重命名了我的表。在我的代码中，我不使用评论和发布。我确实需要一个多对多的关系。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T10:49:40.510

您查询的主表应该是 postcomment，您可以按 postid 分组并获取 max(postcomment)，假设它是一个 autoincrementid。

然后您只需将结果与其他表连接起来即可获取其余数据。由于您可能需要来自其他表的大量数据，并且为了避免将所有这些数据添加到 group by，我将使用 CTE：

（CTE 是一种 sql server 语法，如果您不使用 sql server，则必须使用另一种机制来存储此临时数据）

```
with my_cte as
(
    select idpost, max(idcomment)  as last_comment_id
    from postcomment pc 
    group by idpost
)
select *
from my_cte 
     join post p on p.idpost=my_cte.idpost
     join comment c on c.idcomment=my_cte.last_comment_id 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T11:00:37.193

我做了类似的事情：

```
select *
  from post as p
    left join post_comment as pc on (pc.post_id = p.id)
    left join comment as c on (c.id = pc.comment_id)
    left outer join
            (post_comment as pc2
                inner join comment as c2 on (c2.id = pc2.comment_id)
            ) on (bc2.post_id = p.id and c1.created_at < c2.created_at)
  where c2.id is null 
```

# r - R 编程无法在 SpatialPointsDataFrame 上运行 head()

> ID：14684748
> 
> 赞同：2
> 
> 时间：2013-02-04T10:25:31.487
> 
> 标签：r

我需要将 R data.frame 对象转换为 SpatialPointsDataFrame 对象，以便对数据运行空间统计功能。但是，由于某种原因，将 data.frame 对象转换为 SpatialPointsDataFrame 在转换后的对象上运行特定函数时会出现意外行为。

在此示例中，我尝试在生成的 SpatialPointsDataFrame 上运行 head() 函数 为什么函数 head() 在某些 SpatialPointsDataFrame 对象上失败？

这是重现该行为的代码。

示例1，没有错误：

```
#beginning of r code
#load S Classes and Methods for Spatial Data package "sp"
library(sp)
#Load an example dataset that contain geographic ccoordinates
data(meuse)
#check the structure of the data, it is a data.frame
str(meuse)
#>'data.frame':  155 obs. of  14 variables: ...
#with coordinates x,y
#Convert the data into a SpatialPointsDataFrame, by function coordinates()
coordinates(meuse) <- c("x", "y")
#check structure, seems ok
str(meuse)
#Check first rows of the data
head(meuse)
#It worked!
#Now create a small own dataset
testgeo <- as.data.frame(cbind(1:10,1:10,1:10))
#set colnames
colnames(testgeo) <- c("x", "y", "myvariable")
#convert to SpatialPointsDataFrame
coordinates(testgeo) <- c("x", "y")
#Seems ok
str(testgeo)
#But try running for instance head()
head(testgeo)
#Resulting output: Error in `[.data.frame`(x@data, i, j, ..., drop = FALSE) : 
#undefined columns selected
#end of example code 
```

我不理解的两个示例数据集之间存在一些差异。函数 str() 不显示区别？

为什么函数 head() 在数据集 testgeo 上失败？

为什么添加更多列时 head() 起作用，10 似乎是限制：

```
testgeo <- as.data.frame(cbind(1:10,1:10,1:10,1:10,1:10,1:10,1:10,1:10))
coordinates(testgeo) <- c("V1", "V2")
head(testgeo) 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-04T10:58:45.167

没有特定`head`的方法`SpatialPoints/PolygonsDataFrames`，所以当你调用`head(testgeo)`或`head(meuse)`它落入默认方法时：

```
> getAnywhere("head.default")
A single object matching ‘head.default’ was found
It was found in the following places
  registered S3 method for head from namespace utils
  namespace:utils
with value

function (x, n = 6L, ...) 
{
    stopifnot(length(n) == 1L)
    n <- if (n < 0L) 
        max(length(x) + n, 0L)
    else min(n, length(x))
    x[seq_len(n)]
}
<bytecode: 0x97dee18>
<environment: namespace:utils> 
```

然后返回`x[1:n]`，但是对于那些空间类，像这样的方括号索引需要列：

```
> meuse[1]
        coordinates cadmium
1  (181072, 333611)    11.7
2  (181025, 333558)     8.6
3  (181165, 333537)     6.5
4  (181298, 333484)     2.6
5  (181307, 333330)     2.8
6  (181390, 333260)     3.0
7  (181165, 333370)     3.2
8  (181027, 333363)     2.8
9  (181060, 333231)     2.4
10 (181232, 333168)     1.6
> meuse[2]
        coordinates copper
1  (181072, 333611)     85
2  (181025, 333558)     81
3  (181165, 333537)     68
4  (181298, 333484)     81
5  (181307, 333330)     48
6  (181390, 333260)     61
7  (181165, 333370)     31
8  (181027, 333363)     29
9  (181060, 333231)     37
10 (181232, 333168)     24 
```

因此，当您这样做时，`head(meuse)`它会尝试到达`meuse[1]`，`meuse[6]`因为`meuse`有很多列而存在。

但`testgeo`没有。所以它失败了。

真正的解决办法可能是写一个`head.SpatialPointsDataFrame`这样的：

```
> head.SpatialPointsDataFrame = function(x,n=6,...){x[1:n,]} 
```

以便：

```
> head(meuse)
       coordinates cadmium copper lead zinc  elev       dist   om ffreq soil
1 (181072, 333611)    11.7     85  299 1022 7.909 0.00135803 13.6     1    1
2 (181025, 333558)     8.6     81  277 1141 6.983 0.01222430 14.0     1    1
3 (181165, 333537)     6.5     68  199  640 7.800 0.10302900 13.0     1    1
4 (181298, 333484)     2.6     81  116  257 7.655 0.19009400  8.0     1    2
5 (181307, 333330)     2.8     48  117  269 7.480 0.27709000  8.7     1    2
6 (181390, 333260)     3.0     61  137  281 7.791 0.36406700  7.8     1    2
  lime landuse dist.m
1    1      Ah     50
2    1      Ah     30
3    1      Ah    150
4    0      Ga    270
5    0      Ah    380
6    0      Ga    470
> head(testgeo)
  coordinates myvariable
1      (1, 1)          1
2      (2, 2)          2
3      (3, 3)          3
4      (4, 4)          4
5      (5, 5)          5
6      (6, 6)          6 
```

这里真正的问题是空间类不继承自`data.frame`，因此它们的行为不像它们。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-04T10:38:10.733

`head(meuse)`没有给你数据集的前几行，`meuse`而是它的前几列（6 + 坐标列）。
您的数据集`testgeo`只有 1 列，因此`head(testgeo)`失败。但是`head(testgeo,1)`有效。

```
head(testgeo,1)
   coordinates myvariable
1       (1, 1)          1
2       (2, 2)          2
3       (3, 3)          3
4       (4, 4)          4
5       (5, 5)          5
6       (6, 6)          6
7       (7, 7)          7
8       (8, 8)          8
9       (9, 9)          9
10    (10, 10)         10 
```

我不知道选择列而不是行的原因，但是如果您想查看前几行，`testgeo`可以使用更传统的：

```
testgeo[1:5, ]
  coordinates myvariable
1      (1, 1)          1
2      (2, 2)          2
3      (3, 3)          3
4      (4, 4)          4
5      (5, 5)          5 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-06-26T06:29:08.487

sp 现在有一个`head`适用于所有`Spatial`对象的方法，实现为

```
> sp:::head.Spatial
function (x, n = 6L, ...) 
{
    ix <- sign(n) * seq(abs(n))
    x[ix, , drop = FALSE]
} 
```

请注意，它还可以处理负面`n`

# c# - INotifyPropertyChanged 与单格顿类

> ID：14684750
> 
> 赞同：1
> 
> 时间：2013-02-04T10:25:34.763
> 
> 标签：c#, wpf

我正在尝试在单格顿类中实现 INotifyPropertyChanged。

这是我的代码：

> 公共类PLC：INotifyPropertyChanged {
> 
> ```
>  private static plc instance;
>     public plc()
>     {
>     }
> 
>     public static plc Instance
>     {
>         get
>         {
>             if (instance == null)
>             {
>                 instance = new plc();
>             }
>             return instance;
>         }
>         set
>         {
>             instance = value;
>         }
>     }
> 
>     private static string _plcIp{get; set;}
>     public string plcIp
>     {
>         get
>         {
>             return _plcIp;
>             OnPropertyChanged();
>         }
>         set
>         {
>             _plcIp = value;
>         }
> 
>     }
> 
>     public event PropertyChangedEventHandler PropertyChanged;
> 
>     private void OnPropertyChanged([CallerMemberName]string propertyName = null)
>     {
>         if (PropertyChanged != null)
>         {
>             PropertyChanged(this, new PropertyChangedEventArgs(propertyName));
>         }
>     } 
> ```

我收到错误无法访问的代码被删除，当然 NotifyPropertyChange 不起作用

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-04T10:26:53.613

这是因为你在呼唤`OnPropertyChanged();`你`return _plcIp;`。

设置值后应该调用它。IE：

```
public string plcIp
{
    get
    {
        return _plcIp;
    }
    set
    {
        if (value != _plcIp)
        {
            _plcIp = value;
            OnPropertyChanged();
        }
    }
} 
```

在引发事件之前，您还应该检查 setter 中的值是否实际发生变化。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-04T10:34:11.577

您的代码中有几个问题：

*   如果你正在实现单例，那么类的构造函数应该是私有的
*   使用字段而不是私有属性
*   属性不应该是静态的（您使用的是单例）
*   在引发 OnPropertyChanged 事件之前验证属性值是否真的改变了
*   在返回属性值之前引发事件
*   使用 PascalNames 作为类名和属性名
*   从 setter 而不是 getter 引发事件

代码：

```
public class Plc : INotifyPropertyChanged {

    private static Plc _instance;

    private Plc() { } // constructor should be private

    public static Plc Instance
    {
        get
        {
            if (_instance == null)                
                _instance = new Plc();

            return _instance;
        } // you don't need setter
    }  

    private string _plcIp; // instance field instead of static property

    public string PlcIp
    {
        get { return _plcIp; }
        set
        {
            if (_plcIp == value)
                return; // check if value changed

            _plcIp = value; // change value
            OnPropertyChanged(); // raise event               
        }    
    }    
    // ...
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-04T10:28:50.707

这包含错误：

```
public string plcIp
    {
        get
        {
            return _plcIp;
            OnPropertyChanged(); //This row..
        }
        set { _plcIp = value; }    
    } 
```

您希望在 UI 中更新 Set 方法，而不是在获取值时。像这样的东西：

```
public string plcIp
{
    get { return _plcIp; }
    set { _plcIp = value; OnPropertyChanged(); }    
} 
```

# c++ - Tcl_Eval 出错时返回调用堆栈

> ID：14684761
> 
> 赞同：0
> 
> 时间：2013-02-04T10:25:57.523
> 
> 标签：c++, tcl, tcl-api

当使用 Tcl C++ API **Tcl_Eval**时，如果它返回**TCL_ERROR**，则可以从`Tcl_GetStringResult(interp)`. 但是，当执行一堆 tcl 脚本时，错误消息并没有指出脚本失败的那一行。

例如：

```
can't find package foobar
    while executing
"package require foobar"
    (file "./test.tn" line 5) 
```

`Tcl_GetStringResult(interp)`不提供此信息：`(file "./test.tn" line 5)`。有没有办法像在 tcl 解释器中一样打印出调用堆栈，以便我知道脚本在哪一行失败？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T11:22:51.347

我使用以下代码拉回并报告可从解释器获得的错误信息。

```
Tcl_Obj *top_interpInfoName ;
Tcl_Obj *top_interpInfo ;

top_interpInfoName = Tcl_NewStringObj("errorInfo", -1) ;
    Tcl_IncrRefCount(top_interpInfoName) ;
    top_interpInfo =  Tcl_ObjGetVar2(tcl_interp,
                                     top_interpInfoName,
                                     NULL,
                                     TCL_LEAVE_ERR_MSG) ;
    Tcl_IncrRefCount(top_interpInfo) ;
    ERR_REP2("ERROR: %s", Tcl_GetString(top_interpInfo)) ;
    Tcl_DecrRefCount(top_interpInfoName) ;
    Tcl_DecrRefCount(top_interpInfo) ; 
```

ERR_REP2 是我的错误报告宏，你需要用你自己的替换它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-04T12:12:54.287

您正在查找的信息，即错误信息（即堆栈跟踪），位于全局`errorInfo`变量中。该信息可以通过[`Tcl_GetVar`](http://www.tcl.tk/man/tcl8.6/TclLib/SetVar.htm)其相关功能或其相关功能之一来检索。最好的选择之一是`Tcl_GetVar2Ex`高效的（名称是缓慢发展的 API 的产物）：

```
Tcl_Obj *infoObj = Tcl_GetVar2Ex(interp, "errorInfo", NULL, TCL_GLOBAL_ONLY); 
```

然后，您使用`Tcl_GetString`将人类可读的部分提取为`char *`（视为`const`）。

# php - PHP字符串控制台参数到数组

> ID：14684764
> 
> 赞同：17
> 
> 时间：2013-02-04T10:26:01.783
> 
> 标签：php, regex, arrays, preg-match, explode

我想知道如何将给定的字符串转换为指定的数组：

**细绳**

```
all ("hi there \(option\)", (this, that), other) another 
```

**想要的结果（数组）**

```
[0] => all,
[1] => Array(
    [0] => "hi there \(option\)",
    [1] => Array(
        [0] => this,
        [1] => that
    ),
    [2] => other
),
[2] => another 
```

这用于我在 PHP 上制作的一种控制台。我尝试使用`preg_match_all`但是，我不知道如何在括号内找到括号以“在数组中创建数组”。

**编辑**

示例中未指定的所有其他字符应视为`String`.

**编辑 2**

我忘了提到括号外的所有参数都应该被`space`字符检测到。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-02-04T10:55:57.730

## 10,000 英尺概述

您需要使用小型自定义解析器来完成此操作：代码获取此表单的输入并将其转换为您想要的表单。

在实践中，我发现根据它们的复杂性将这样的解析问题分组到三个类别之一是很有用的：

1.  **琐碎：**可以通过几个循环和人性化的正则表达式解决的问题。这个类别很诱人：如果您甚至有点不确定问题是否可以通过这种方式解决，一个好的经验法则是确定它不能。
2.  **简单：**需要自己构建一个小型解析器的问题，但仍然足够简单，以至于拿出大炮没有什么意义。如果您需要编写超过 100 行代码，请考虑升级到下一个类别。
3.  **涉及**的问题：正式化并使用已经存在的、经过验证的解析器生成器¹是有意义的问题。

我将此特定问题归类为第二类，这意味着您可以像这样处理它：

## 编写一个小型解析器

### 定义语法

为此，您必须首先定义——至少是非正式的，用一些简短的注释——你想要解析的*语法。*请记住，大多数语法都是在某些时候递归定义的。所以假设我们的语法是：

*   输入是一个*序列*
*   *序列*是一系列零个或多个*令牌*
*   标记可以是*单词*、*字符串*或*数组*
*   标记由一个或多个空格字符分隔
*   *单词*是一系列字母字符 (az )
*   字符串是用双引号括起来的任意字符*序列*
*   *数组*是由*逗号分隔*的一系列一个或多个*标记*

 *你可以看到我们在一个地方有递归：一个序列可以包含数组，一个数组也是根据一个序列定义的（所以它可以包含更多的数组等）。

像上面那样非正式地处理这件事作为介绍更容易，但如果你[正式](http://en.wikipedia.org/wiki/Formal_grammar)地进行语法推理，则更容易。

### 构建词法分析器

掌握了语法，您就知道需要将输入分解为标记，以便对其进行处理。接受用户输入并将其转换为语法定义的各个部分的组件称为*[词法分析器](http://en.wikipedia.org/wiki/Lexical_analysis)*。词法分析器是愚蠢的；他们只关心输入的“外观”，并不试图检查它是否真的有意义。

这是我为解析上述语法而编写的一个简单的词法分析器（不要将它用于任何重要的事情；可能包含错误）：

```
$input = 'all ("hi there", (this, that) , other) another';

$tokens = array();
$input = trim($input);
while($input) {
    switch (substr($input, 0, 1)) {
        case '"':
            if (!preg_match('/^"([^"]*)"(.*)$/', $input, $matches)) {
                die; // TODO: error: unterminated string
            }

            $tokens[] = array('string', $matches[1]);
            $input = $matches[2];
            break;
        case '(':
            $tokens[] = array('open', null);
            $input = substr($input, 1);
            break;
        case ')':
            $tokens[] = array('close', null);
            $input = substr($input, 1);
            break;
        case ',':
            $tokens[] = array('comma', null);
            $input = substr($input, 1);
            break;
        default:
            list($word, $input) = array_pad(
                preg_split('/(?=[^a-zA-Z])/', $input, 2),
                2,
                null);
            $tokens[] = array('word', $word);
            break;
    }
    $input = trim($input);
}

print_r($tokens); 
```

### 构建解析器

完成此操作后，下一步是构建*[解析器](http://en.wikipedia.org/wiki/Parser)*：检查词法输入并将其转换为所需格式的组件。解析器很聪明；在转换输入的过程中，它还确保输入符合语法规则。

解析器通常被实现为[状态机](http://en.wikipedia.org/wiki/Finite-state_machine)（也称为有限状态机或有限自动机），并像这样工作：

*   解析器有一个*状态*；这通常是一个适当范围内的数字，但每个状态也用更人性化的名称来描述。
*   有一个循环，一次读取一个 lexed 标记。根据当前状态和令牌的值，解析器可以决定执行以下一项或多项操作：
    1.  采取一些影响其输出的行动
    2.  将其状态更改为其他值
    3.  确定输入格式错误并产生错误

* * *

¹ 解析器生成器是输入是形式语法并且输出是词法分析器和解析器的程序，您可以“只是加水”到：只需扩展代码以执行“采取一些行动”，具体取决于令牌的类型；其他一切都已经处理好了。对这个主题的快速搜索给出了导致[PHP Lexer 和 Parser Generator?](https://stackoverflow.com/questions/8002617/php-lexer-and-parser-generator)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-04T11:08:14.540

毫无疑问，如果您正在构建语法树，您应该编写解析器。但是如果你只需要解析*这个*示例输入`regex`仍然可能是一个工具：

```
<?php
$str = 'all, ("hi there", (these, that) , other), another';

$str = preg_replace('/\, /', ',', $str); //get rid off extra spaces
/*
 * get rid off undefined constants with surrounding them with quotes
*/
$str = preg_replace('/(\w+),/', '\'$1\',', $str);
$str = preg_replace('/(\w+)\)/', '\'$1\')', $str);
$str = preg_replace('/,(\w+)/', ',\'$1\'', $str);

$str = str_replace('(', 'array(', $str);

$str = 'array('.$str.');';

echo '<pre>';
eval('$res = '.$str); //eval is evil.
print_r($res); //print the result 
```

[演示](http://codepad.viper-7.com/XKojyG)。

**注意：**如果输入格式错误，正则表达式肯定会失败。我正在编写此解决方案，以防您需要快速脚本。编写词法分析器和解析器是一项耗时的工作，需要大量研究。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-04T11:07:14.480

据我所知，***括号问题***是乔姆斯基语言*类 2*，而正则表达式相当于乔姆斯基语言*类 3*，所以应该没有正则表达式，这就解决了这个问题。

但是不久前我读到了一些东西：

> 此 PCRE 模式解决了括号问题（假设设置了 PCRE_EXTENDED 选项以便忽略空白）：`\( ( (?>[^()]+) | (?R) )* \)`

带分隔符且不带空格：`/\(((?>[^()]+)|(?R))*\)/`.

这是来自[递归模式 (PCRE) - PHP 手册](http://php.net/manual/en/regexp.reference.recursive.php)。

该手册上有一个示例，它解决了您指定的几乎相同的问题！您或其他人可能会找到它并继续这个想法。

我认为最好的解决方案是用`preg_match_all`. 可悲的是，我没有能力做这种疯狂的事！

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-02-04T12:34:31.723

首先，我要感谢所有帮助我的人。

不幸的是，我不能接受多个答案，因为如果可以的话，我会给你们所有人，因为所有答案对于这个问题的不同类型都是正确的。

就我而言，我只需要一些简单而肮脏的东西，并且按照@palindrom 和@PLB 的答案，我有以下工作适合我：

```
$str=transformEnd(transformStart($string));
$str = preg_replace('/([^\\\])\(/', '$1array(', $str);
$str = 'array('.$str.');';
eval('$res = '.$str);
print_r($res); //print the result

function transformStart($str){
    $match=preg_match('/(^\(|[^\\\]\()/', $str, $positions, PREG_OFFSET_CAPTURE);
    if (count($positions[0]))
        $first=($positions[0][1]+1);
    if ($first>1){
        $start=substr($str, 0,$first);
        preg_match_all("/(?:(?:\"(?:\\\\\"|[^\"])+\")|(?:'(?:\\\'|[^'])+')|(?:(?:[^\s^\,^\"^\']+)))/is",$start,$results);
        if (count($results[0])){
            $start=implode(",", $results[0]).",";
        } else {
            $start="";
        }
        $temp=substr($str, $first);
        $str=$start.$temp;
    }
    return $str;
}

function transformEnd($str){
    $match=preg_match('/(^\)|[^\\\]\))/', $str, $positions, PREG_OFFSET_CAPTURE);
    if (($total=count($positions)) && count($positions[$total-1]))
        $last=($positions[$total-1][1]+1);
    if ($last==null)
        $last=-1;
    if ($last<strlen($str)-1){
        $end=substr($str,$last+1);
        preg_match_all("/(?:(?:\"(?:\\\\\"|[^\"])+\")|(?:'(?:\\\'|[^'])+')|(?:(?:[^\s^\,^\"^\']+)))/is",$end,$results);
        if (count($results[0])){
            $end=",".implode(",", $results[0]);
        } else {
            $end="";
        }
        $temp=substr($str, 0,$last+1);
        $str=$temp.$end;
    }
    if ($last==-1){
        $str=substr($str, 1);
    }
    return $str;
} 
```

其他答案对于正在寻找更好方法的人也很有帮助。

再次感谢大家=D。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-02-04T10:32:34.637

我想知道这是否有效：

1.  替换`(`为`Array(`
2.  使用正则表达式在不带逗号的单词或括号后放置逗号

    `preg_replace( '/[^,]\s+/', ',', $string )`

3.  `eval( "\$result = Array( $string )" )`

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2013-02-04T10:52:05.133

我将放置用于实现这一点的算法或伪代码。希望你能弄清楚如何在 PHP 中实现它：

```
function Parser([receives] input:string) returns Array

define Array returnValue;

for each integer i from 0 to length of input string do
    charachter = ith character from input string.

    if character is '('
        returnValue.Add(Parser(substring of input after i)); // recursive call

    else if character is '"'
        returnValue.Add(substring of input from i to the next '"')

    else if character is whitespace
        continue

    else
        returnValue.Add(substring of input from i to the next space or end of input)

   increment i to the index actually consumed

return returnValue 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2013-02-04T11:10:19.063

如果字符串值是固定的，可以这样做

```
$ar = explode('("', $st);

$ar[1] = explode('",', $ar[1]);

$ar[1][1] = explode(',', $ar[1][1]);

$ar[1][2] = explode(')',$ar[1][1][2]);

unset($ar[1][1][2]);

$ar[2] =$ar[1][2][1];

unset($ar[1][2][1]); 
```*

# java - 在 Java 中更改 Jasper 报告的页面方向

> ID：14684766
> 
> 赞同：0
> 
> 时间：2013-02-04T10:26:11.130
> 
> 标签：java, jasper-reports

我在 Java 程序中使用由 iReport 生成的 *.jasper 报告。我需要以编程方式更改报告方向。这是我的代码：

```
final File template = new File("report.jasper");
final JasperReport jasperReport = (JasperReport) JRLoader.loadObject(template);
//connection is defined previously
final JasperPrint print = JasperFillManager.fillReport(jasperReport, metadata, connection);
//reprot.jasper is defined with LANDSCAPE orientation
print.setOrientation(OrientationEnum.PORTRAIT); 
```

最后一行对生成的 pdf 或屏幕组件都没有影响。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T13:10:01.057

更改 JasperPrint 对象的方向不会更改生成页面的宽度或高度。我认为您需要在填写报告之前更改页面方向。

更多[细节](http://community.jaspersoft.com/questions/527518/setting-page-orientation-runtime)

# jquery - 具有动态内容的 jquery .on 函数在 ie9 中不起作用

> ID：14684767
> 
> 赞同：1
> 
> 时间：2013-02-04T10:26:10.940
> 
> 标签：jquery, events, internet-explorer-9, handler

我在 php 生成的页面中有一个选择列表，我在显示页面期间多次加载动态内容。这些选项行中的每一个都应充当链接；因此，我将选择元素上的“单击”处理程序与过滤器连接以选择其选项元素。首先，这是我正在使用的 html：

```
<select name="suggestions" id="suggestions" size="3">';
</select>'; 
```

之后我填写一些选项如下：

```
<option value="NextPage.php?id=1">Doe, John</option> 
```

随附的javascript如下：

```
$(document).ready( function() {
...
$("#suggestions").on('click', 'option', selectItem);
});

// receiving the list of options
function receiveList(data) {
  $('#suggestions').html(data);
  $('#suggestions').css('display', 'inline');
}

// The click handler for the options
function selectItem(e) {
  var txt = this.value;
  alert('Selected ' + txt);
  window.open(txt);  // or window.location.href = txt;
} 
```

这个 javascript 在 Firefox 和 Opera 中完美运行；在 IE9 中，当点击选择器中的一行时，被选中的行变成蓝色但不执行任何操作，并且不弹出警告（即不执行 selectItem）。

我使用的是jquery-1.8.2.min.js，页面的第一行是“！doctype html”

任何建议如何规避这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T10:29:53.293

您应该使用 的`change`事件，而`select`不是`click`。`option`尝试这个：

```
$("#suggestions").on('change', selectItem); 
```

# ios - iOS平台如何画线

> ID：14684770
> 
> 赞同：0
> 
> 时间：2013-02-04T10:26:33.140
> 
> 标签：ios

我用的是竹书、纸之类的app，在iPad上，体验真的很好，效果如何？在屏幕上绘制直线或曲线时使用了哪种技术？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T10:33:29.403

```
- (void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event {

    mouseSwiped = NO;
    UITouch *touch = [touches anyObject];

    if ([touch tapCount] == 2) {
        //self.imageView.image = nil;
        return;
    }

    lastPoint = [touch locationInView:self.view];
    lastPoint.y -= 20;

}

- (void)touchesMoved:(NSSet *)touches withEvent:(UIEvent *)event {
    mouseSwiped = YES;

    UITouch *touch = [touches anyObject];
    CGPoint currentPoint = [touch locationInView:self.view];
    currentPoint.y -= 20;

    CGFloat components[3];
    [self getRGBComponents:components forColor:self.colorView.backgroundColor];
    NSLog(@"%f %f %f", components[0], components[1], components[2]);

    UIGraphicsBeginImageContext(self.view.frame.size);
    [self.imageView.image drawInRect:CGRectMake(0, 0, self.view.frame.size.width, self.view.frame.size.height)];
    CGContextSetLineCap(UIGraphicsGetCurrentContext(), kCGLineCapRound);
    CGContextSetLineWidth(UIGraphicsGetCurrentContext(), 10.0);
    CGContextSetRGBStrokeColor(UIGraphicsGetCurrentContext(), components[0], components[1], components[2],5.0);
    CGContextBeginPath(UIGraphicsGetCurrentContext());
    CGContextMoveToPoint(UIGraphicsGetCurrentContext(), lastPoint.x, lastPoint.y);
    CGContextAddLineToPoint(UIGraphicsGetCurrentContext(), currentPoint.x, currentPoint.y);

        CGContextSetBlendMode(UIGraphicsGetCurrentContext(), kCGBlendModeNormal);

    CGContextStrokePath(UIGraphicsGetCurrentContext());
    self.imageView.image = UIGraphicsGetImageFromCurrentImageContext();
    UIGraphicsEndImageContext();

    lastPoint = currentPoint;

    mouseMoved++;

    if (mouseMoved == 10) {
        mouseMoved = 0;
    }

}

- (void)touchesEnded:(NSSet *)touches withEvent:(UIEvent *)event {

    UITouch *touch = [touches anyObject];

    if ([touch tapCount] == 2) {
        //self.imageView.image = nil;
        return;
    }

    if(!mouseSwiped) {

        CGFloat components[3];
        [self getRGBComponents:components forColor:self.colorView.backgroundColor];
        NSLog(@"%f %f %f", components[0], components[1], components[2]);

        UIGraphicsBeginImageContext(self.view.frame.size);
        [self.imageView.image drawInRect:CGRectMake(0, 0, self.view.frame.size.width, self.view.frame.size.height)];
        CGContextSetLineCap(UIGraphicsGetCurrentContext(), kCGLineCapRound);
        CGContextSetLineWidth(UIGraphicsGetCurrentContext(), 5.0);
        CGContextSetRGBStrokeColor(UIGraphicsGetCurrentContext(), components[0], components[1], components[2], 5.0);
        CGContextMoveToPoint(UIGraphicsGetCurrentContext(), lastPoint.x, lastPoint.y);
        CGContextAddLineToPoint(UIGraphicsGetCurrentContext(), lastPoint.x, lastPoint.y);
        CGContextStrokePath(UIGraphicsGetCurrentContext());
        CGContextFlush(UIGraphicsGetCurrentContext());
        self.imageView.image = UIGraphicsGetImageFromCurrentImageContext();
        UIGraphicsEndImageContext();
    }
} 
```

另请检查以下链接

[http://www.techotopia.com/index.php/An_iOS_4_iPhone_Graphics_Drawing_Tutorial_using_Quartz_2D](http://www.techotopia.com/index.php/An_iOS_4_iPhone_Graphics_Drawing_Tutorial_using_Quartz_2D)

[https://stackoverflow.com/questions/6449661/drawing-2d-images-on-iphone-tutorials](https://stackoverflow.com/questions/6449661/drawing-2d-images-on-iphone-tutorials)

[http://mobile.tutsplus.com/tutorials/iphone/ios-sdk_freehand-drawing/](http://mobile.tutsplus.com/tutorials/iphone/ios-sdk_freehand-drawing/)

[http://www.raywenderlich.com/18840/how-to-make-a-simple-drawing-app-with-uikit](http://www.raywenderlich.com/18840/how-to-make-a-simple-drawing-app-with-uikit)

# cryptography - C# HMACSHA1 哈希不正确

> ID：14684772
> 
> 赞同：2
> 
> 时间：2013-02-04T10:26:39.943
> 
> 标签：cryptography

我正在尝试解密文件。前 2 个步骤：

> 将文件的前 16 个字节复制到缓冲区。这是使用上述密钥之一制作的文件的 HMAC-SHA1 哈希。
> 
> 在该缓冲区上使用 HMAC-SHA1 和上面的密钥来创建 RC4 密钥，即 0x10 字节。

我的代码是：

```
OpenFileDialog ofd = new OpenFileDialog();
        ofd.ShowDialog();
        BinaryReader binread = new BinaryReader(File.Open(ofd.FileName, FileMode.Open));
        byte[] RetailKey = { 0xE1, 0xBC, 0x15, 0x9C, 0x73, 0xB1, 0xEA, 0xE9, 0xAB, 0x31, 0x70, 0xF3, 0xAD, 0x47, 0xEB, 0xF3 };
        HMACSHA1 SHA = new HMACSHA1(RetailKey); //Initalize HMAC w/ retail or development key
        byte[] buffer = binread.ReadBytes(16);
        buffer = SHA.ComputeHash(buffer);
        MessageBox.Show(buffer.Length.ToString()); 
```

如您所见，它说缓冲区必须是 10 个字节，但消息框说它是 20 个字节。我的错误在哪里？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T11:18:49.310

SHA-1 和 HMAC-SHA-1 输出 20 个字节。

您只需要其中的 16 个（0x10），因此您需要截断。例如与`byte[] key = hmacSha1.ComputeHash(input).Take(16).ToArray()`.

`0x`in是一个前缀，表示 c（和派生语言）中的`0x10`十六进制数字。所以`0x10`意味着 16 而不是 10。

# java - 如何去掉这些数字之间的任何数组的一部分？

> ID：14684784
> 
> 赞同：-4
> 
> 时间：2013-02-04T10:27:18.087
> 
> 标签：java

我的问题是，给定两个数字，如何去掉任何数组中这些数字之间的数组扇区。

例如，给定这些数组：{3,2,5,4,8,7,9}, {1,3,2,7,8,4} 哪个方法会去掉两个数组中 2 到 8 之间的所有数字数组？

非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T10:34:01.780

您可以尝试以下方法：

```
int[] array1 = {3,2,5,4,8,7,9};
int[] array2 = {1,3,2,7,8,4};
ArrayList newArray1 = new ArrayList();

for (int i = 0; i < array1.size(); i++)
{
    if (array1[i] > 2 && array1[i] < 8)
    {
        newArray1.add(array1[i]);
    }
} 
```

您可以对另一个数组执行相同的操作。另外，您可以将数字添加回整数数组，因为您现在知道整数数组的大小。

```
int[] array1new = new int[newArray1.size()];
for (int j = 0; j < newArray1.size(); j++)
{
    array1new[j] = newArray1.get(j);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T10:29:41.830

Java API 中没有内置方法。您将不得不编写一个或找到一个从原始库中提取子数组的第三方库。

您找到第一个值的索引，然后找到第二个值的索引，然后您可以使用`Arrays.copyOfRange(array, from to);`

# jquery - 弹出 Div 隐藏在 jscrollpane 中

> ID：14684788
> 
> 赞同：0
> 
> 时间：2013-02-04T10:27:34.717
> 
> 标签：jquery, html, css, jscrollpane

我想显示隐藏 div 的简单 css，但我的最后一个 popdiv 在我的 jscrollpane 容器中不可见。

将鼠标悬停在最后一个共享链接上，popdiv 不可见

```
<div class=" scroll-pane">
       <table width="100%" border="0" cellspacing="0" cellpadding="0" class="product_resulttable">
          <tbody>
          <tr>
               <td>03 Oct,2012</td>
            <td>25,500</td>
            <td>xxx</td>
          </tr>
          <tr>

            <td>03 Oct,2012</td>
            <td>25,500</td>
            <td>sdjdhdjh</td>
          </tr>
          <tr>

            <td>03 Oct,2012</td>
            <td>25,500</td>
            <td><div class="actionlist">
            <ul class="dott">
            <li>
              <a href="#">Download</a>
               <div class="popup_div"><em></em>
             <ul>
             <li><a href="#">ddssdfsdffds</a></li>
              <li><a href="#">ddssdfsdffds</a></li>

             </ul>

            </div>
            </li>
              <li><a href="#">Add to Basket</a>

               <div class="popup_div"><em></em>

             <ul>
             <li><a href="#">ddssdfsdffds</a></li>
              <li><a href="#">ddssdfsdffds</a></li>

             </ul>

              </div>

              </li>
                <li><a href="#">Share</a>

                <div class="popup_div"><em></em>
             <ul>
             <li><a href="#">ddssdfsdffds</a></li>
              <li><a href="#">ddssdfsdffds</a></li>
               <li><a href="#">ddssdfsdffds</a></li>
                <li><a href="#">ddssdfsdffds</a></li>
                 <li><a href="#">ddssdfsdffds</a></li>

             </ul>
                           </div>

                </li>
            </ul>
            </div></td>
          </tr>
           </tbody>
                   </table>
    </div> 
```

CSS：

```
.scroll-pane { width: 444px; height: 100px; overflow: auto; padding:20px 0 !important;}
.product_resulttable { margin:0px 0; padding:0px; border:1px solid #000;  font-size:12px; color:#606060 }
.actionlist { background:#e6eaf6; border:1px solid #d9e0f4; border-radius:5px; width:132px; padding:8px 0 }
.dott { list-style:none;}
.dott li{ height:20px; position:relative}
.dott li a { padding:2px 9px; color:#454545; font-size:11px; }
div.actionlist ul li:hover > div.popup_div { display:block; }
.popup_div{position:absolute; z-index:9999; background:#f5f6fb; width:140px; border:1px solid #c2d0eb; min-height:140px; left:-5px; display:none } 
```

我的 jsfiddle 链接：http: [//jsfiddle.net/sharma_pooja/CmmYj/7/](http://jsfiddle.net/sharma_pooja/CmmYj/7/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T10:37:08.287

您的容器`.scroll-pane`的高度为 100 像素。

您尝试弹出的 div 没有向下增长的空间，因为它被容器的高度阻止了。

我将容器的高度更改为 250 像素。

`.scroll-pane { width: 444px; height: 250px; overflow: auto; padding:20px 0 !important;}`

[http://jsfiddle.net/CmmYj/9/](http://jsfiddle.net/CmmYj/9/)

# android - 通过代码改变imageview的image属性

> ID：14684790
> 
> 赞同：0
> 
> 时间：2013-02-04T10:27:38.223
> 
> 标签：android, imageview

我想在android UI中更改imageview的图像（源代码）..无法使用我的代码来做到这一点我的代码如下：

```
protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);
    setContentView(R.layout.view);

    iv=(ImageView) findViewById(R.id.imageView11);

    Timer Tim=new Timer();
    Tim.schedule(new TimerTask() 
    {   @Override
        public void run() 
        {    runthread();   }
    },1000,1000);
}
public void runthread () {
    int x=0;
    if(x==0)
    {   iv.setImageResource(R.drawable.lcd);    }
    if(x==1)
    {   iv.setImageResource(R.drawable.lcd1);   }
    if(x==2)
    {   iv.setImageResource(R.drawable.lcd22);  }
    if(x==3)
    {   iv.setImageResource(R.drawable.lcd3);   }
    if(x==4)
    {   iv.setImageResource(R.drawable.lcd4);   }
    if(x==5)
    {   iv.setImageResource(R.drawable.lcd5);   }
    if(x==6)
    {   iv.setImageResource(R.drawable.lcd6);   }
    if(x==7)
    {   iv.setImageResource(R.drawable.lcd7);   }
    if(x==8)
    {   iv.setImageResource(R.drawable.lcd8);   }
    if(x==9)
    {   iv.setImageResource(R.drawable.lcd9);   }
    x=x+1;
    if(x==10){x=1;}

} 
```

我想在我的 UI 中继续从 0 计数到 10，但是这段代码不能正常工作，谁能告诉我这个问题，以便我可以修改它以便我可以继续。提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T10:36:01.097

将您的`x`变量初始化为全局含义在您的方法之外对其进行初始化，不要继续在您的`runthread()`方法中对其进行初始化，您将始终得到 x=0 。

在你的最后一个条件下，把它改成这个

`if(x==10){x=0;}`

并且

将您的计时器放在 onWindowsFocusChanged() 覆盖该方法

```
@Override
public void onWindowFocusChanged(boolean hasFocus) {
super.onWindowFocusChanged(hasFocus);
   Timer Tim=new Timer();
   Tim.schedule(new TimerTask() 
   {   @Override
       public void run() 
       {    runthread();   }
    },1000,1000);
} 
```

因为 onWindowsFocusChanged() 表示您的布局已正确加载，这就是您可以操作 Imageview 的时间。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T10:42:06.580

您的代码中缺少的东西，如下

```
myImgView.setImageDrawable(getResources().getDrawable(R.drawable.Image)); 
```

所以

```
 public void runthread () {
    int x=0;
    if(x==0)
    {   iv.setImageDrawable(getResources().getDrawable(R.drawable.Image));   }
    if(x==1)
    {   iv.setImageDrawable(getResources().getDrawable(R.drawable.Image)); }
    if(x==2)
    {  iv.setImageDrawable(getResources().getDrawable(R.drawable.Image));  }
    if(x==3)
    {    iv.setImageDrawable(getResources().getDrawable(R.drawable.Image));   }
    if(x==4)
    {    iv.setImageDrawable(getResources().getDrawable(R.drawable.Image));  }
    if(x==5)
    {   iv.setImageDrawable(getResources().getDrawable(R.drawable.Image));  }
    if(x==6)
    {   iv.setImageDrawable(getResources().getDrawable(R.drawable.Image));   }
    if(x==7)
    {   iv.setImageDrawable(getResources().getDrawable(R.drawable.Image));   }
    if(x==8)
    {   iv.setImageDrawable(getResources().getDrawable(R.drawable.Image));   }
    if(x==9)
    {   iv.setImageDrawable(getResources().getDrawable(R.drawable.Image));   }
    x=x+1;
    if(x==10){x=1;} 
```

更改图像名称并运行代码它将正常工作

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-04T10:48:53.217

1）不要使用这么多的“if语句”，它的脏代码

2) 你的 x 变量必须是全局的

3）使用这个

```
private int mX=0;

public void runthread () {
    switch(mX){
        case 0: iv.setImageResource(R.drawable.lcd); break;
        case 1: iv.setImageResource(R.drawable.lcd1); break;
        case 2: iv.setImageResource(R.drawable.lcd2); break;
        case 3: iv.setImageResource(R.drawable.lcd3); break;
        case 4: iv.setImageResource(R.drawable.lcd4); break;
        case 5: iv.setImageResource(R.drawable.lcd5); break;
        case 6: iv.setImageResource(R.drawable.lcd6); break;
        case 7: iv.setImageResource(R.drawable.lcd7); break;
        case 8: iv.setImageResource(R.drawable.lcd8); break;
        case 9: iv.setImageResource(R.drawable.lcd9); break;
    }
    mX = (mX+1) %10;
} 
```

更新：

4) 也不要在另一个线程上更改 UI（正如 Simon 注意到的那样）。可以使用这个：

```
 Tim.schedule(new TimerTask(){
        public void run(){    
            runOnUiThread(new Runnable() { public void run() { runthread(); } });
        }
    },1000,1000); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-04T12:03:29.280

根据 Corbella 提供的代码，这适用于不喜欢便捷方法的人，因为`runOnUiThread (Runnable action)`. 详情在底部。

```
public class MainActivity extends Activity {
    private int mX;
    private Handler mHandler;
    private ImageView mImageView;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        mHandler = new Handler();
        mImageView = (ImageView) findViewById(R.id.image_view);

        updateImageContinuouslyWithTimer();
    }

    private void updateImageContinuouslyWithTimer() {
        Timer timer = new Timer();

        timer.schedule(new TimerTask() {
            @Override
            public void run() {
                mHandler.post(new Runnable() {

                    @Override
                    public void run() {
                        runthread();
                    }
                });
            }
        }, 1000, 1000);
    }

    public void runthread() {
        switch (mX) {
        case 0:
            mImageView.setImageResource(R.drawable.lcd);
            break;
        case 1:
            mImageView.setImageResource(R.drawable.lcd1);
            break;
        case 2:
            mImageView.setImageResource(R.drawable.lcd2);
            break;
        case 3:
            mImageView.setImageResource(R.drawable.lcd3);
            break;
        case 4:
            mImageView.setImageResource(R.drawable.lcd4);
            break;
        case 5:
            mImageView.setImageResource(R.drawable.lcd5);
            break;
        case 6:
            mImageView.setImageResource(R.drawable.lcd6);
            break;
        case 7:
            mImageView.setImageResource(R.drawable.lcd7);
            break;
        case 8:
            mImageView.setImageResource(R.drawable.lcd8);
            break;
        case 9:
            mImageView.setImageResource(R.drawable.lcd9);
            break;
        }

        mX = (mX + 1) % 10;
    }
} 
```

对于 XML 名称和代码的全长名称，它使用小写和下划线正确命名。当您编写代码时，您应该以可读性为目标，因为不遵循约定不仅会在未来让您感到困惑，还会让其他开发人员感到困惑。还要在成员变量前面加上 m。这就是我建议你以后做的事情。

# javascript - jQuery 无法在 iframe 中找到 .find() 元素

> ID：14684797
> 
> 赞同：1
> 
> 时间：2013-02-04T10:28:07.727
> 
> 标签：javascript, jquery

我已经在我的 HTML 页面中嵌入了 jQuery 移动页面，但是当我尝试使用 jQuery 访问其内部 div 标签时，find 方法没有返回任何内容。

带有 jQ​​uery 的 HTML

```
<iframe id="myframe" src="../codiqa/mobile.htm" 
    style="width: 500px; height: 520px; 
    border: 1px solid #ccc; margin-top:20px;">
</iframe> 
```

这里

```
$("#myframe").load(function(){
    alert($(this).contents().find('#mobilebutton').html());     
}); 
```

iframe 中的移动代码

```
<div id="mobilebutton" data-role="button">Mobile Button</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T10:41:37.077

使用`window.load`而不是`$("#myframe").load`. frame 的元素将在 $(window).load 事件上准备好，您将能够访问它们。

```
$(window).load(function(){
    alert($("#myframe").contents().find('#mobilebutton').html());     
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T10:49:29.183

根据 jquery API 指南： .html() “获取匹配元素集中第一个元素的 HTML 内容”

这样，您需要在其前面添加 .parent 以获取定向元素。在这种情况下：

```
$("#myframe").load(function(){
alert($(this).contents().find('#mobilebutton').parent.html()); }); 
```

如果您想获取按钮的 html

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-04T11:04:24.323

如果@Adil 解决方案不起作用，您可以尝试使用此函数动态添加 iframe 以附加加载事件：

```
function callIframe(url, callback) {
    $(document.body).append('<iframe id="myframe" 
                             style="width: 500px; height: 520px; 
                             border: 1px solid #ccc; margin-top:20px;">
                            </iframe> ');
    $('myframe').attr('src', url);
    $('myframe').load(function() 
    {
        alert($(this).contents().find('#mobilebutton').html())
    });
} 
```

### 如何使用它？

```
$('document').load(callIframe('../codiqa/mobile.htm')); 
```

### 更远：

*   [iframe、onload 和 document.domain](http://www.nczonline.net/blog/2009/09/15/iframes-onload-and-documentdomain/)
*   [IFRAME 完成加载时的 Javascript 回调？](https://stackoverflow.com/questions/164085/javascript-callback-when-iframe-is-finished-loading)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-14T11:48:45.647

它在 IE 上运行良好。

尝试一下

```
alert($(this).contents().find('#mobilebutton').html()); 
```

# paypal - Paypal : 在 Paypal 沙盒上更改公司名称

> ID：14684798
> 
> 赞同：2
> 
> 时间：2013-02-04T10:28:09.553
> 
> 标签：paypal

在这张图片中，我必须更改我的公司名称，该名称预计将显示在“您的订单摘要”之上

![在这张图片中，我必须更改我的公司名称，该名称预计将显示在](../Images/e4f4010ee47d5a8b9c4acec879869424.png)

哪位大神给个解决办法，先谢谢了。。。。。。

在我登录到沙盒帐户后，我得到了一个屏幕，

![登录后的画面](../Images/26386451dd8ceadd79b631f88885bd56.png)

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-04T18:32:43.810

您是在谈论沙盒还是实时站点？每个人的程序都会略有不同。

对于沙盒：

1.  转到[https://www.sandbox.paypal.com](https://www.sandbox.paypal.com)并登录该帐户。
2.  单击**配置文件**。（点击个人资料——不要选择弹出菜单中的任何项目。）
3.  单击**业务信息**。（它在“**帐户信息**”列中。）
4.  单击**更改名称**。（它位于商务联系人姓名旁边。）
5.  单击**Business Name Change（企业名称）**，然后单击**Continue**。
6.  在**新企业名称**框中输入新企业名称，然后单击**继续**。
7.  你完成了。

对于实时站点：

1.  转到[https://www.paypal.com](https://www.paypal.com)并登录该帐户。
2.  在**个人资料**下，单击**我的业务信息**。
3.  **在名称**旁边，单击**更改**。
4.  跳转到上述过程中的第 5 项。

# c# - 按 Enter 键移动到下一个单元格

> ID：14684807
> 
> 赞同：1
> 
> 时间：2013-02-04T10:28:46.010
> 
> 标签：c#, winforms, datagridview, cell, enter

我需要更改`Enter`datagridview 中的关键功能，我想阻止它进入新行我需要它移动到下一个单元格我尝试了很多逻辑来做到这一点但没有成功最后一个是

```
if (e.KeyData == Keys.Enter)
    {
        int col = dgvPayments.CurrentCell.ColumnIndex;
        int row = dgvPayments.CurrentCell.RowIndex;

        if (col < dgvPayments.ColumnCount - 1)
        {
            col++;
        }
        else
        {
            col = 0;
            row++;
        }

        if (row == dgvPayments.RowCount)
            dgvPayments.Rows.Add();

        dgvPayments.CurrentCell = dgvPayments[col, row];
        e.Handled = true;
    } 
```

当只`Enter`在编辑单元格后按 not 时效果很好，如果我输入一个单元格并对其进行编辑并按下`Enter`它在我进入后进入下一行和列的键。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T11:32:26.837

尝试这个

```
 private void dataGridView1_KeyDown(object sender, KeyEventArgs e)
    {
        if (e.KeyCode == Keys.Enter)
        {                
            e.SuppressKeyPress=true;
            int iColumn = dataGridView1.CurrentCell.ColumnIndex;
            int iRow = dataGridView1.CurrentCell.RowIndex;
            if (iColumn == dataGridView1.Columns.Count-1)
                dataGridView1.CurrentCell = dataGridView1[0, iRow + 1];
            else
                dataGridView1.CurrentCell = dataGridView1[iColumn + 1, iRow];

        }
    } 
```

# android - ExpandableListView IndexOutOfBoundException

> ID：14684823
> 
> 赞同：0
> 
> 时间：2013-02-04T10:30:01.767
> 
> 标签：android, arraylist, expandablelistview, indexoutofboundsexception, expandablelistadapter

我在 android 中使用 ExpandableListView 时遇到问题。我正在尝试使用安装在系统上的包名称作为组来构建一个带有复选框的简单可扩展列表，并将活动作为子项公开。

在我尝试在 85 之后扩展元素之前，这一切都很好。这是代码：

```
 public class ResultCheckbox extends ExpandableListActivity {
    CheckBoxAdapter mAdapter;
    ExpandableListView list;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        setContentView(R.layout.check_list_layout);

        ArrayList<ArrayList<CheckBoxes>> cbs = new ArrayList<ArrayList<CheckBoxes>>(); 

        ArrayList<String> groupNames = new ArrayList<String>();
        List<PackageInfo> pInfos = getPackageManager().getInstalledPackages(PackageManager.GET_ACTIVITIES);
        for (PackageInfo pInfo : pInfos) {
          groupNames.add(pInfo.packageName);
          ActivityInfo[] aInfos = pInfo.activities;
          ArrayList<CheckBoxes> cb = new ArrayList<CheckBoxes>();
          if (aInfos != null) {
                for (ActivityInfo activityInfo : aInfos) {
                    String name = activityInfo.name;
                    String str[] = name.split("\\.");
                    cb.add( new CheckBoxes( str[str.length-1], false ) ); 

                }
                cbs.add( cb );
          }
        }

        mAdapter = new CheckBoxAdapter( this,groupNames, cbs );
        setListAdapter( mAdapter );

    }

} 
```

**适配器 ：**

```
public class CheckBoxAdapter extends BaseExpandableListAdapter {
    private ArrayList<String> packageName;
    private ArrayList<ArrayList<CheckBoxes>> activityName;
    private LayoutInflater inflater;

    public CheckBoxAdapter(Context context, 
                        ArrayList<String> packageName,
                        ArrayList<ArrayList<CheckBoxes>> activityName ) { 
        this.packageName = packageName;
        this.activityName = activityName;
        inflater = LayoutInflater.from( context );
    }

    public Object getChild(int groupPosition, int childPosition) {
        return activityName.get( groupPosition ).get( childPosition );
    }

    public long getChildId(int groupPosition, int childPosition) {
        return (long)( groupPosition*1024+childPosition );  // Max 1024 children per group
    }

    public View getChildView(int groupPosition, int childPosition, boolean isLastChild, View convertView, ViewGroup parent) {
        View v = null;
        if( convertView != null )
            v = convertView;
        else
            v = inflater.inflate(R.layout.child_row, parent, false); 
        CheckBoxes c = (CheckBoxes)getChild( groupPosition, childPosition );
        TextView rgb = (TextView)v.findViewById( R.id.checkBox );
        if( rgb != null )
            rgb.setText( c.getActivityName() );
        CheckBox cb = (CheckBox)v.findViewById( R.id.check1 );
        cb.setChecked( c.getState() );
        return v;
    }

    public int getChildrenCount(int childPosition) {
        return activityName.get( childPosition).size();
    }

    public Object getGroup(int groupPosition) {
        return packageName.get( groupPosition );        
    }

    public int getGroupCount() {
        return packageName.size();
    }

    public long getGroupId(int groupPosition) {
        return (long)( groupPosition*1024 );  // To be consistent with getChildId
    } 

    public View getGroupView(int groupPosition, boolean isExpanded, View convertView, ViewGroup parent) {
        View v = null;
        if( convertView != null )
            v = convertView;
        else
            v = inflater.inflate(R.layout.group_row, parent, false); 
        String gt = (String)getGroup( groupPosition );
        TextView pkgGroup = (TextView)v.findViewById( R.id.childname );
        if( gt != null )
            pkgGroup.setText( gt );
        return v;
    }

    public boolean hasStableIds() {
        return true;
    }

    public boolean isChildSelectable(int groupPosition, int childPosition) {
        return true;
    } 

    public void onGroupCollapsed (int groupPosition) {} 
    public void onGroupExpanded(int groupPosition) {}

    } 
```

**日志猫：**

```
 02-04 11:17:00.379: E/AndroidRuntime(4514): FATAL EXCEPTION: main
02-04 11:17:00.379: E/AndroidRuntime(4514): java.lang.IndexOutOfBoundsException: Invalid index 91, size is 85
02-04 11:17:00.379: E/AndroidRuntime(4514):     at java.util.ArrayList.throwIndexOutOfBoundsException(ArrayList.java:251)
02-04 11:17:00.379: E/AndroidRuntime(4514):     at java.util.ArrayList.get(ArrayList.java:304)
02-04 11:17:00.379: E/AndroidRuntime(4514):     at com.blast.makeyournotification.adapter.CheckBoxAdapter.getChildrenCount(CheckBoxAdapter.java:53)
02-04 11:17:00.379: E/AndroidRuntime(4514):     at android.widget.ExpandableListConnector.refreshExpGroupMetadataList(ExpandableListConnector.java:563)
02-04 11:17:00.379: E/AndroidRuntime(4514):     at android.widget.ExpandableListConnector.expandGroup(ExpandableListConnector.java:688)
02-04 11:17:00.379: E/AndroidRuntime(4514):     at android.widget.ExpandableListView.handleItemClick(ExpandableListView.java:562)
02-04 11:17:00.379: E/AndroidRuntime(4514):     at android.widget.ExpandableListView.performItemClick(ExpandableListView.java:522)
02-04 11:17:00.379: E/AndroidRuntime(4514):     at android.widget.AbsListView$PerformClick.run(AbsListView.java:2749)
02-04 11:17:00.379: E/AndroidRuntime(4514):     at android.widget.AbsListView$1.run(AbsListView.java:3423)
02-04 11:17:00.379: E/AndroidRuntime(4514):     at android.os.Handler.handleCallback(Handler.java:725)
02-04 11:17:00.379: E/AndroidRuntime(4514):     at android.os.Handler.dispatchMessage(Handler.java:92)
02-04 11:17:00.379: E/AndroidRuntime(4514):     at android.os.Looper.loop(Looper.java:137)
02-04 11:17:00.379: E/AndroidRuntime(4514):     at android.app.ActivityThread.main(ActivityThread.java:5191)
02-04 11:17:00.379: E/AndroidRuntime(4514):     at java.lang.reflect.Method.invokeNative(Native Method)
02-04 11:17:00.379: E/AndroidRuntime(4514):     at java.lang.reflect.Method.invoke(Method.java:511)
02-04 11:17:00.379: E/AndroidRuntime(4514):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:795)
02-04 11:17:00.379: E/AndroidRuntime(4514):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:562)
02-04 11:17:00.379: E/AndroidRuntime(4514):     at dalvik.system.NativeStart.main(Native Method) 
```

我有点菜鸟:(我真的不明白为什么方法 getChildrenCount 让我超出了界限。在此先感谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-04T10:37:37.237

您可能在以下代码中使用了`int`大于`ArrayList`变量大小的值：`activity`

```
public int getChildrenCount(int childPosition) {
    return activityName.get( childPosition).size();
} 
```

因此，当您调用`get`并且值`childPosition`大于您得到的大小时`IndexOutOfBoundException`，请确保您调用 get 时的`int`值较小。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-04T10:47:02.773

如果 aInfos == null 怎么办？您最终将添加 pInfo.packageName 而不是复选框。这可能会导致 packageName 和活动列表之间的大小不同。

```
        对于（PackageInfo pInfo：pInfos）{
          groupNames.add(pInfo.packageName);
          ActivityInfo[] aInfos = pInfo.activities;
          ArrayList cb = new ArrayList();
          如果（aInfos！= null）{
                对于（活动信息活动信息：aInfos）{
                    字符串名称 = activityInfo.name;
                    字符串 str[] = name.split("\\.");
                    cb.add(new CheckBoxes(str[str.length-1], false));

                }
                cbs.add(cb);
          }
        }

```

# css - 子元素的css z-index问题

> ID：14684829
> 
> 赞同：0
> 
> 时间：2013-02-04T10:30:21.050
> 
> 标签：css, z-index

我几乎和这个问题一样：

但我不能使用他的解决方案。我必须设置所有可见的东西。假设我有这个代码：

```
<body>
    some information
    <div style="position:fixed;width:100%;height:100%;background-color:green;z-index: 2;opacity: 0.7"></div>
    <div style='z-index:1;background-color:white;position:fixed'>
        test1
        <div style='z-index:3;background-color:red'>
            test2
        </div>

    </div>      
</body> 
```

我的观点是面具 div 在身体上，而父 div 。父 div 在身体上方。在父 div 中有一个子 div，它在面具和他的父母，当然还有身体。mask、parent 和 child 都是 position:fixed，body 是相对的。好吧，无论我更改它们的位置类型或 z-index，我都无法设置它们。仅当我没有设置父级的 z-index 时，孩子才会正确地覆盖面罩，但如果没有，它们都在面罩后面。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T10:33:13.760

为了`z-index`生效，必须定位元素。还要降低掩码的 z-index 并增加`z-index`test1 的 z-index。我也建议不要内联样式，但是我怀疑这可能是示例。

```
<div style="position:fixed;width:100%;height:100%;background-color:green;z-index: 1;opacity: 0.7"></div>
<div style='z-index:2;background-color:white;position:fixed'>
    test1
    <div style='z-index:3;background-color:red; position:relative;'>
        test2
    </div>

</div> 
```

工作示例：http: [//jsfiddle.net/vQz6P/](http://jsfiddle.net/vQz6P/)

# compilation - 使用 gc 和 gccgo 编译的静态链接二进制文件的奇怪行为

> ID：14684830
> 
> 赞同：0
> 
> 时间：2013-02-04T10:30:29.347
> 
> 标签：compilation, go, static-libraries, static-linking

这是 Go 中的*Hello 世界*：

```
package main                                                                                                                                               

import (                                                                      
  "fmt"                                                                    
  )                                                                         

func main() {                                                                 
        fmt.Println("Go is great!")                                           
} 
```

将其放入`hello.go`并编译：

*   `go build -o hello_go_build hello.go`
*   `go build -o hello_go_build_gccgo --compiler gccgo hello.go`
*   `gccgo -o hello_gccgo_shared hello.go`
*   `gccgo -static -o hello_gccgo_static hello.go`

首先，我注意到`hello_go_build_gccgo`并且`hello_gccgo_shared`大小不一样。我在互联网上寻找信息没有成功。有谁知道这是为什么？或者更好的是，有人能告诉我如何解决这个问题吗？我试图保留带有`-work`标志的临时文件，但我找不到相关信息。

然后，您可能会注意到，两个静态链接的二进制文件的大小也不相同。实际上，使用`go build`( `hello_go_build`) 命令编译的那个不仅适用于我的系统，而且适用于具有其他 Linux 发行版的其他系统，而`hello_go_build_gccgo`在我的系统以及其他出现错误的系统上失败：

```
panic: runtime error: invalid memory address or nil pointer dereference 
```

这是一个即将解决的错误：[https ://groups.google.com/forum/?fromgroups=#!topic/golang-nuts/y2RIy0XLJ24](https://groups.google.com/forum/?fromgroups=#!topic/golang-nuts/y2RIy0XLJ24)

最后，即使现在，大小不再重要，我很好奇：是否有任何 go 编译器可以选择进行函数级链接（而不是静态链接一个包作为一个整体，只链接所需的函数及其依赖项)?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T11:08:28.143

> 首先，我注意到 hello_go_build_gccgo 和 hello_gccgo_shared 的大小不同。我在互联网上寻找信息没有成功。有谁知道这是为什么？

如果它们的尺寸相同，我*会*觉得很奇怪。一个是静态链接的，另一个使用共享库，那么为什么它们应该是相同的大小呢？

> 然后，您可能会注意到，两个静态链接的二进制文件的大小也不相同。

如果它们的尺寸相同，我*会*觉得很奇怪。一个由 编译`gc`，另一个由`gccgo`两个完全不同的编译器编译。为什么应该期望它们产生相同大小的二进制文件？

> 最后，即使现在，大小不再重要，我很好奇：是否有任何 go 编译器可以选择进行函数级链接（而不是静态链接一个包作为一个整体，只链接所需的函数及其依赖项)?

没有“将包作为一个整体静态链接”之类的东西`gc`。二进制文件中不存在未使用的函数（也许不仅仅是函数）。而且，IIRC，从第一天开始就是这种情况（从公开发布开始计算）。不确定前面是否也适用`gccgo`，但我希望它在这方面做得同样好。

# shell - 运行 shell 脚本时未找到错误

> ID：14684831
> 
> 赞同：0
> 
> 时间：2013-02-04T10:30:29.517
> 
> 标签：shell

我写了一个下面给出的shell脚本

```
unicorn_cnt=$(ps -ef | grep -v grep | grep -c unicorn)
if (( $unicorn_cnt == 0 )); then
 echo "Unicorn Stopped" | mail -s "Alert - Unicorn" someone@somedomin.com
fi
delayed_job_cnt=$(ps -ef | grep -v grep | grep -c delayed_job)
if (( $delayed_job_cnt == 0 )); then
 echo "Delayed Job Stopped" | mail -s "Alert - Unicorn" someone@somedomin.com
fi
rake_cnt=$(ps -ef | grep -v grep | grep -c rake)
if (( $rake_cnt == 0 )); then
  echo "Convertion Stopped" | mail -s "Alert - Unicorn" someone@somedomin.com
fi 
```

这是用于检查进程是否正在运行，如果没有发送警报邮件。我对shell脚本不太熟悉。运行时显示以下错误。

```
process.sh: 3: process.sh: 2: not found
process.sh: 7: process.sh: 0: not found
process.sh: 11: process.sh: 0: not found 
```

从我部分理解的一些研究中，这是因为创建变量时的空间问题。没有把握。我尝试使用一些解决方案，例如**sed**和**read**。但它仍然显示错误。谁能帮我。

感谢和问候

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T10:31:55.407

使用括号：

```
if [ "$unicorn_cnt" == 0 ]; then 
```

或者最好这样写：

```
if ! ps -ef | grep -q [u]nicorn; then
 echo "Unicorn Stopped" | mail -s "Alert - Unicorn" someone@somedomin.com
fi 
```

这意味着“检查 ps -ef 是否有独角兽，如果找不到，请执行此操作”

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T10:49:33.067

对于数字比较，您应该使用`eq`not `==`。用于`[[`条件表达式。使用[here 字符串](http://linux.die.net/abs-guide/x15683.html)而不是`echo`在您的邮件命令中。

尝试这个：

```
if [[ $unicorn_cnt -eq 0 ]]; then
    mail -s "Alert - Unicorn" someone@somedomin.com <<< "Unicorn Stopped"
fi 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-04T10:56:47.453

从上面的提示中，我找到了答案。

```
unicorn_cnt=$(ps -ef | grep -v grep | grep -c unicorn)
if [ $unicorn_cnt -eq 0 ]; 
then
  echo "Unicorn Stopped" | mail -s "Alert - Unicorn" someone@somedomin.com
fi
delayed_job_cnt=$(ps -ef | grep -v grep | grep -c delayed_job)
if [ $delayed_job_cnt -eq 0 ]; 
then
  echo "Delayed Job Stopped" | mail -s "Alert - Delayed Job" someone@somedomin.com
fi
rake_cnt=$(ps -ef | grep -v grep | grep -c rake)
if [ $rake_cnt -eq 0 ]; 
then
  echo "Convertion Stopped" | mail -s "Alert - Convertion" someone@somedomin.com
fi 
```

它现在工作正常，我们也可以将它与 cronjob 集成。

# python - 自定义 django-admin 命令模块的 handle 方法中的单元测试功能

> ID：14684836
> 
> 赞同：1
> 
> 时间：2013-02-04T10:30:51.820
> 
> 标签：python, django, unit-testing

我正在使用自定义管理命令来运行 +500 行代码并包含多个函数定义（并执行数据库查询）。

**管理/命令/talk.py**

```
from django.core.management.base import BaseCommand

class Command(BaseCommand):
    def handle(self):
        def hello():
            print "Hello!"
        def my_god():
            print "OMG!"
        def main():
            hello()
            my_god() 
```

我无法单独访问句柄方法中的函数（例如通过`Command().handle.hello()`do ）以对它们进行单元测试，还是我错过了一种方法？

我对此的解决方案是将所有代码放在`handle`方法 in下`management/handle_command.py`，然后只导入该代码并在in`main`下运行。然后我可以对来自.`handle``management/commands/talk.py``management/handle_command.py`

**提议的管理/命令/talk.py 示例**

```
import my_project.my_app.management.handle_command
from django.core.management.base import BaseCommand

class Command(BaseCommand):
    def handle(self):
        my_project.my_app.management.handle_command.main() 
```

我应该如何最好地处理`handle`自定义 django-admin 命令模块方法中的测试功能？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T10:47:50.337

第一部分：

### 管理/命令/talk.py

您将需要使用`self`

```
class Command(BaseCommand):
    def hello(self):
        print "Hello!"
    def my_god(self):
        print "OMG!"

    def handle(self):
        # this was def main():
        self.hello()
        self.my_god() 
```

第二部分：

`Command`如果您想在其他地方使用这些方法/将它们添加到`unittest`. 如果您只在`Command`课堂上使用过它们（测试除外），那么您建议的测试方法似乎是最明智的。

# ruby - 解释 Ruby 中“max”的行为

> ID：14684839
> 
> 赞同：-2
> 
> 时间：2013-02-04T10:31:17.437
> 
> 标签：ruby

我是 Ruby 新手，想了解以下代码。

当我有一个带有字符串的数组，并使用 max 函数对其进行操作时：

```
names = ["aa", "bb", "cc"]
names.max = "cc" 
```

如果我在这里有一个哈希，

```
calendar["January", :cold, "February", :colder] 
calendar.max = ["January", :cold] 
```

我无法理解它是最长的单词大小还是正在显示的索引大小最大的成员。谁能解释这种行为？我错过了一些非常基本的东西吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-04T10:33:25.580

数组通过比较对应位置的元素进行排序。字符串按字典顺序排序。`"J"`是“大于” `"F"`，因此，`["January", :cold]`大于`["February", :colder]`，不管字符串长度和剩余的数组元素。

```
months = %w[january february march april may june july august september october november december]

months.sort.join(', ') # => "april, august, december, february, january, july, june, march, may, november, october, september" 
```

# iphone - 在应用程序购买 iOS

> ID：14684843
> 
> 赞同：0
> 
> 时间：2013-02-04T10:31:52.597
> 
> 标签：iphone, ios, xcode, in-app-purchase

我通过 [本教程使用 IAP 制作了我的第一个应用程序](http://troybrant.net/blog/2010/01/in-app-purchases-a-full-walkthrough/)

我为 InAppPurchaseManager 制作了一个单例，增加了 3 次购买，为他们添加了方法，一切都很好。问题是我的应用程序是一个画廊，其中用户有 9 件免费物品，之后有 18 件物品付费。我如何`ViewController`在系统显示时检查我的购买是否成功`UIAletrView`？或者也许我可以在我的`ViewController`?

对于我正在使用的画廊`UICollectionView`，如果购买完成，我需要重新加载它

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T10:45:39.410

You can check the status of the transaction by using this delegate method..

```
- (void)paymentQueue:(SKPaymentQueue *)queue updatedTransactions:(NSArray *)transactions
{

    for (SKPaymentTransaction *transaction in transactions)
    {
        NSLog(@"%i",[transaction transactionState]);
        switch (transaction.transactionState)
        {
            case SKPaymentTransactionStatePurchased:
                // [self completeTransaction:transaction];
                break;
            case SKPaymentTransactionStateFailed:
                // [self failedTransaction:transaction];
                break;
            case SKPaymentTransactionStateRestored:
                // [self restoreTransaction:transaction];
            case SKPaymentTransactionStatePurchasing: {
                // if([self.delegate respondsToSelector:@selector(inProcessPurchasingTransaction)])
                // [self.delegate inProcessPurchasingTransaction];
                }
            default:
                break;
        }
    }
} 
```

And the following delegate method will fire when the transaction success :

```
 - (void) completeTransaction: (SKPaymentTransaction *)transaction 
```

And in case of fail :

```
- (void) failedTransaction:(SKPaymentTransaction *)transaction 
```

And for a testing purpose you need to create test user accounts. After you program the app, you might want to test the app. You can use these accounts to login to the App Store. The purchases will be processed as if it were real but no financial transactions will take place.

# matrix - 在 Inkscape 中展平 SVG 矩阵变换

> ID：14684846
> 
> 赞同：43
> 
> 时间：2013-02-04T10:31:58.390
> 
> 标签：matrix, svg, transform, inkscape

我有一个最初在 Inkscape 中创建的免费剪贴画 SVG 文件，我正在对其进行修改以用于 Windows 8 JavaScript 游戏。它包含许多在周围组上应用矩阵变换的路径实例，如下所示：

```
<g transform="matrix(0.443,0.896,-0.896,0.443,589.739,-373.223)">
    <path d="M486,313s27-9,43-29l26,4,1,23-22,5s-25-6-48-3z" />
</g> 
```

我想通过提前将其应用到 Inkscape 中的路径来展平该变换，以减少动画期间的浏览器工作。但是，当我将 6 个矩阵值插入 Inkscape 中的 ABCDEF 参数并应用它时，它会为路径提供与 IE10 引擎完全不同的旋转和缩放。

我已经检查了很多次，我已经正确映射了 6 个值。我究竟做错了什么？

编辑：好的，这里是 IE10 和 Inkscape 之前和之后的屏幕截图。对于 IE10 案例，SVG 直接位于一个空的 HTML 文档的正文中（在 Firefox 中呈现完全相同）。在 Inkscape 中，我只是打开了仅包含路径元素的“之前”SVG 文件，选择了路径，并将 6 个矩阵变换值插入到 Object > Transform > Matrix 中。我对矩阵知之甚少，我只是希望能够以与浏览器相同的方式预先应用这些转换，并且理想地了解为什么 Inkscape 会有所不同。谢谢。

![仅 IE10 路径](../Images/3af4b8433c093cc3b95592f54aaaa002.png) ![带有变换的 IE10 路径](../Images/55dd8e2b470aa4b0ed322c65d2d19d59.png) ![仅 Inkscape 路径](../Images/45b6fa01eb3eca133d36910c92b87191.png) ![带有变换的 Inkscape 路径](../Images/921a7ef96df6845bc9115f0a7f318aef.png)

* * *

## 回答 #1

> 赞同：59
> 
> 时间：2013-02-27T13:50:21.783

## 简短的回答

在 Inkscape 中键入变换矩阵参数时，请确保选中“编辑当前矩阵”，因为如果将新的变换矩阵应用于对象，实际上是将这个新矩阵与对象的现有变换矩阵相乘，所以确保改为编辑它。
![在此处输入图像描述](../Images/76ec576afd6ff36eece5d6fdc830849e.png)

## 长答案

如何自己重新计算一切。

首先让我们试着理解一下变换矩阵。变换矩阵是一种快速而巧妙的工具，用于将仿射变换（保留直线的变换）应用于向量。
因此，如果您有一个向量（例如，2d 坐标）和一个变换矩阵，并将两者相乘，您将得到变换后的坐标，并应用变换矩阵中定义的变换。
![变换矩阵](../Images/2cd12c868973ba568e86fa1785fbfddf.png)
计算`x'`和`y'`是这样完成的：

```
x' = a*x + c*y + e 
y' = b*x + d*y + f 
```

接下来，我们需要稍微了解一下svg格式。
根据[w3c svg 规范](http://www.w3.org/TR/SVG/expanded-toc.html "w3c svg 规范")，`matrix`转换恰好将这 6 个参数 (a,b,c,d,e,f) 作为参数。
因此，从您的示例中，

```
<g transform="matrix(0.443,0.896,-0.896,0.443,589.739,-373.223)"> 
```

我们有以下变换矩阵参数：

```
a=0.443
b=0.896
c=-0.896
d=0.443
e=589.739
f=-373.223 
```

现在，如果我们有以下示例坐标：`x=27, y=-9`，我们可以使用之前定义的转换矩阵来转换它，如下所示：

```
x' = a*x + c*y + e 
x' = 0.443*27 + -0.896*-9 + 589.739
x' = 609.764

y' = b*x + d*y + f
y' = 0.896*27 + 0.443*-9 -373.223
y' = −353.018 
```

整齐吧？[你可以在这里](http://www.w3.org/TR/SVG/coords.html#TransformMatrixDefined)获得更多信息

但这还不是全部。我们还需要了解 svg 路径数据。
根据[w3c svg path dspecification](http://www.w3.org/TR/SVG/paths.html#PathDataGeneralInformation)，路径数据中的每个字母代表一条指令。指令后面的每个数字对代表一个坐标值。

从您的示例中，我们有以下路径：

```
<path d="M486,313s27-9,43-29l26,4,1,23-22,5s-25-6-48-3z" /> 
```

在这里我们看到这个路径对象使用一个绝对`moveto`指令（大写**M**）、一个相对`smooth curveto`三次贝塞尔曲线（小写**s**）、一个相对`lineto`指令（小写**l**）和另一个相对`smooth curveto`三次贝塞尔曲线指令，然后是一个`closepath`指令（小写**z**） .

`M486,313`转换为*绝对 moveto x=486, y=313*
`s27-9,43-29`读起来有点复杂，因为省略了一些逗号，因为如果负数为负数则不需要它们，因此减号充当昏迷 - 无论如何，它翻译到*相对平滑的贝塞尔曲线到 x=27, y=-9, x=43, y=-29*（一个目标点和一个控制点）
等等。

那么，我们如何从您的 svg 组中应用和删除转换矩阵？像这样：

```
// we read the transformation matrix params
// <g transform="matrix(0.443,0.896,-0.896,0.443,589.739,-373.223)">
a=0.443
b=0.896
c=-0.896
d=0.443
e=589.739
f=-373.223

// we read the path data, and transform each instruction    
// <path d="M486,313s27-9,43-29l26,4,1,23-22,5s-25-6-48-3z" /> 
```

**M486,313**绝对移动到

```
x' = a*x + c*y + e = a*486 + c*313 + e = 524.589
y' = b*x + d*y + f = b*486 + d*313 + f = 200.892 
```

移至指令现在是**M524.589,200.892**

**S27-9,43-29** - 平滑曲线，对每个坐标重复相同的过程，但将`e`and `f`（平移参数）设置为 0，因为它是相对指令而不是绝对指令。
现在是
**s20.025,20.205,45.033,25.680999999999997**

**l26,4,1,23-22,5**
将变为
**l7.934000000000001,25.067999999999998,-20.165,11.085,-14.226,-17.497**

**s-25-6-48-3**
将变为
**s-5.698999999999999,-25.058000000000003,-18.576,-44.337**

z**将**保持**z**

 **所以得到的转换路径将是：

```
<path d="M524.589,200.892s20.025,20.205,45.033,25.680999999999997l7.934000000000001,25.067999999999998,-20.165,11.085,-14.226,-17.497s-5.698999999999999,-25.058000000000003,-18.576,-44.337z" /> 
```

我希望这对你有意义。

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2014-03-05T17:35:22.803

您可以选择路径然后使用路径 -> 联合 (CTRL++) 烘焙坐标。希望这可以帮助

* * *

## 回答 #3

> 赞同：21
> 
> 时间：2014-03-25T08:41:02.103

**就地粘贴**可以帮助您：

1.  **双击**Inkscape 中的组，进入它。
2.  **按 Ctrl+A**选择组的所有**内容，然后使用 Ctrl+C**复制它们。****
***   **在群组外双击**退出群组。*   编辑 >**就地粘贴**(Ctrl+Alt+V) *– 此时，组转换将应用于您粘贴的对象。**   **再次对对象进行分组**(Ctrl+G)*   将新组移动到与原始组相同的深度，并**删除原始组**。（使用 XML 编辑器 Ctrl+Shift+X 可能更容易。）**

 *** * *

## 回答 #4

> 赞同：14
> 
> 时间：2015-05-11T20:37:52.020

按照@andraaspar 的回答，您还可以尝试取消分组（Ctrl-U）并再次分组（Ctrl-G）。它对我有用。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-04-21T13:13:38.927

感谢 ArtBIT 提供的所有信息！我在 PHP 应用程序上遇到了一些问题，并编写了一个库来操作字体数据（来自 SVG 文件）并对其进行任何类型的转换。任何其他感兴趣的人都可以从 GitHub 尝试一下：

[https://github.com/kartsims/easysvg](https://github.com/kartsims/easysvg)

用法示例：

```
require 'easySVG.php';
$svg = new EasySVG();
$svg->setFont("paris-bold-webfont.svg", 100, "#000000");
$svg->addText("Simple text display");
$svg->addAttribute("width", "800px");
$svg->addAttribute("height", "100px");
echo $svg->asXML(); 
```

SVG 数据操作示例：

```
$def = 'YOUR SVG DEFINITION HERE';
$easySVG = new EasySVG();
// rotate by 40°
$rotated_def = $easySVG->defRotate($def, 40)
// rotate by 40° with center at (200,100)
$rotated_def2 = $easySVG->defRotate($def, 40, 200, 100)
// scale transform : width*4
$scaled_def = $easySVG->defScale($def, 4) 
```****

# java - 同步访问 REST Web 服务

> ID：14684849
> 
> 赞同：4
> 
> 时间：2013-02-04T10:32:11.993
> 
> 标签：java, rest, jpa, persistence, jersey

我在使用以下代码的简单 REST 服务时遇到了麻烦：

```
@GET
@Path("next/{uuid}")
@Produces({"application/xml", "application/json"})
public synchronized Links nextLink(@PathParam("uuid") String uuid) {
    Links link = null;
    try {
        link = super.next();
        if (link != null) {
            link.setStatusCode(5);
            link.setProcessUUID(uuid);
            getEntityManager().flush(); 
            Logger.getLogger("Glassfish Rest Service").log(Level.INFO, "Process {0} request url : {1} #id  {2} at {3} #", new Object[]{uuid, link.getLinkTxt(), link.getLinkID(), Calendar.getInstance().getTimeInMillis()});
        }
    } catch (NoResultException ex) {
    } catch (IllegalArgumentException ex) {
    }
    return link;
} 
```

这应该提供一个链接对象，并将其标记为已使用 (setStatusCode(5)) 以防止下一次访问服务以发送相同的对象。问题是，当有很多快速客户端访问 Web 服务时，这会为不同的客户端提供 2 或 3 倍的相同链接对象。我该如何解决这个问题？

这是使用 to 的请求：@NamedQuery(name = "Links.getNext", query = "SELECT l FROM Links l WHERE l.statusCode = 2")

和 super.next() 方法：

```
public T next() {

    javax.persistence.Query q = getEntityManager().createNamedQuery("Links.getNext");
    q.setMaxResults(1);
    T res = (T) q.getSingleResult();
    return res;
} 
```

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-05T17:42:43.397

（根）JAX-RS 资源的生命周期是*每个请求*的，因此方法上的（否则正确的）`synchronized`关键字`nextLink`很遗憾无效。

您需要的是同步访问/更新的方法。这可以通过多种方式完成：

I）您可以在由框架注入的外部对象上进行同步（例如：CDI 注入 @ApplicationScoped），如下所示：

```
@ApplicationScoped
public class SyncLink{
    private ReentrantLock lock = new ReentrantLock();
    public Lock getLock(){
       return lock;
    }
}
....
public class MyResource{
  @Inject SyncLink sync;

  @GET
  @Path("next/{uuid}")
  @Produces({"application/xml", "application/json"})
  public Links nextLink(@PathParam("uuid") String uuid) {
    sync.getLock().lock();
    try{
      Links link = null;
      try {
        link = super.next();
        if (link != null) {
            link.setStatusCode(5);
            link.setProcessUUID(uuid);
            getEntityManager().flush(); 
            Logger.getLogger("Glassfish Rest Service").log(Level.INFO, "Process {0} request url : {1} #id  {2} at {3} #", new Object[]{uuid, link.getLinkTxt(), link.getLinkID(), Calendar.getInstance().getTimeInMillis()});
        }
      } catch (NoResultException ex) {
      } catch (IllegalArgumentException ex) {
      }
      return link;
    }finally{
       sync.getLock().unlock();
    }
  }
} 
```

II）你可能很懒惰并在课堂上同步

```
public class MyResource{
  @Inject SyncLink sync;

  @GET
  @Path("next/{uuid}")
  @Produces({"application/xml", "application/json"})
  public Links nextLink(@PathParam("uuid") String uuid) {
     Links link = null;
    synchronized(MyResource.class){
      try {
        link = super.next();
        if (link != null) {
            link.setStatusCode(5);
            link.setProcessUUID(uuid);
            getEntityManager().flush(); 
            Logger.getLogger("Glassfish Rest Service").log(Level.INFO, "Process {0} request url : {1} #id  {2} at {3} #", new Object[]{uuid, link.getLinkTxt(), link.getLinkID(), Calendar.getInstance().getTimeInMillis()});
        }
      } catch (NoResultException ex) {
      } catch (IllegalArgumentException ex) {
      }

    }
    return link;
  }
} 
```

III）您可以使用数据库进行同步。在这种情况下，您将研究JPA2 中可用的*悲观锁定。*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T06:33:21.187

根据您认为创建新的争用的频率，`Links`您应该选择使用`@Version`属性的乐观锁定或悲观锁定。

我的猜测是乐观锁定会更适合你。在任何情况下，让您的 Resource 类充当服务外观并将与模型相关的代码放入无状态会话 Bean EJB 并通过简单的重试来处理任何 OptimisticLockExceptions。

我注意到您提到您在捕获与锁定相关的异常时遇到了麻烦，而且看起来您正在使用 Eclipselink。在这种情况下，你可以尝试这样的事情：

```
@Stateless
public class LinksBean {

  @PersistenceContext(unitName = "MY_JTA_PU")
  private EntityManager em;

  @Resource
  private SessionContext sctx;

  public Links createUniqueLink(String uuid) {
    Links myLink = null;
    shouldRetry = false;
    do {
      try
        myLink = sctx.getBusinessObject(LinksBean.class).createUniqueLinkInNewTX(uuid);
      }catch(OptimisticLockException olex) {
        //Retry
        shouldRetry = true;
      }catch(Exception ex) {
       //Something else bad happened so maybe we don't want to retry 
       log.error("Something bad happened", ex);
       shouldRetry = false;   
    } while(shouldRetry);
    return myLink;
  }

  @TransactionAttribute(TransactionAttributeType.REQUIRES_NEW)
  public Links createUniqueLinkInNewTX(uuid) {
      TypedQuery<Links> q = em.createNamedQuery("Links.getNext", Links.class);
      q.setMaxResults(1);
      try {
        myLink = q.getSingleResult();
      }catch(NoResultException) {
        //No more Links that match my criteria
        myLink = null;
      }
      if (myLink != null) {
        myLink.setProcessUUID(uuid);
        //If you change your getNext NamedQuery to add 'AND l.uuid IS NULL' you 
        //could probably obviate the need for changing the status code to 5 but if you 
        //really need the status code in addition to the UUID then:
        myLink.setStatusCode(5);
      }
      //When this method returns the transaction will automatically be committed 
      //by the container and the entitymanager will flush. This is the point that any 
      //optimistic lock exception will be thrown by the container. Additionally you 
      //don't need an explicit merge because myLink is managed as the result of the 
      //getSingleResult() call and as such simply using its setters will be enough for 
      //eclipselink to automatically merge it back when it commits the TX
      return myLink; 
  }  
}

Your JAX-RS/Jersey Resource class should then look like so:

@Path("/links")
@RequestScoped
public class MyResource{
  @EJB LinkBean linkBean;

  @GET
  @Path("/next/{uuid}")
  @Produces({"application/xml", "application/json"})
  public Links nextLink(@PathParam("uuid") String uuid) {
     Links link = null;
     if (uuid != null) {
         link = linkBean.createUniqueLink(uuid);
         Logger.getLogger("Glassfish Rest Service").log(Level.INFO, "Process {0} request url : {1} #id  {2} at {3} #", new Object[]{uuid, link.getLinkTxt(), link.getLinkID(), Calendar.getInstance().getTimeInMillis()});
      }
    return link;
  }
} 
```

这是给这只猫剥皮的一种方法的半成品示例，这里有很多事情要做。如果您有任何问题，请告诉我。

此外，从 REST 的角度来看，您可能会考虑对该资源使用 @PUT 而不是 @GET，因为您的端点具有更新（UUID 和/或 statusCode）资源状态的副作用，而不仅仅是获取它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-04T14:37:04.210

您需要使用某种形式的锁定，很可能是乐观版本锁定。这将确保只有一个事务成功，另一个将失败。

见， [http ://en.wikibooks.org/wiki/Java_Persistence/Locking](http://en.wikibooks.org/wiki/Java_Persistence/Locking)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-09-22T12:02:17.240

在使用 Java EE 特性 JAX-RS 时，据我了解，您不应像使用`synchronized`块一样以 Java SE 样式管理线程。

在 Java EE 中，您可以使用单例 EJB 提供对方法的同步访问：

```
@Path("")
@Singleton
public class LinksResource {

    @GET
    @Path("next/{uuid}")
    @Produces({"application/xml", "application/json"})
    public Links nextLink(@PathParam("uuid") String uuid) { 
```

默认情况下，这将使用`@Lock(WRITE)`一次只允许一个请求到您的方法。

# android - 从android中的电话簿中选择联系人

> ID：14684850
> 
> 赞同：2
> 
> 时间：2013-02-04T10:32:14.153
> 
> 标签：android, return-value, android-contacts

我想从 android 的电话簿中选择一个联系人。我按下一个按钮，然后它会显示联系人列表。当我单击时，我想选择在我的活动中显示的单击联系人的号码，但在我的情况下它返回 null。这是我的代码：

```
 import android.app.Activity;
    import android.content.Intent;
    import android.database.Cursor;
    import android.net.Uri;
    import android.os.Bundle;
    import android.provider.Contacts.People;
    import android.provider.ContactsContract.Contacts;
    import android.provider.ContactsContract.PhoneLookup;
    import android.view.Menu;
    import android.view.View;
    import android.view.View.OnClickListener;
    import android.widget.Button;
    import android.widget.TextView;

    public class Main extends Activity {
    Button b;
    TextView tv;
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        tv = (TextView) findViewById(R.id.textView1);
        b = (Button) findViewById(R.id.button1);
        b.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View arg0) {
                // TODO Auto-generated method stub
                Intent intent = new Intent(Intent.ACTION_PICK,People.CONTENT_URI);
                startActivityForResult(intent, 100);
            }
        });
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        // Inflate the menu; this adds items to the action bar if it is present.
        getMenuInflater().inflate(R.menu.activity_main, menu);
        return true;
    }
    @Override
    protected void onActivityResult(int requestCode, int resultCode, Intent data) {
        super.onActivityResult(requestCode, resultCode, data);
        Uri contact = data.getData();
        Cursor c = managedQuery(contact, null, null, null, null);
        c.moveToFirst();
        tv.setText(c.getString(c.getColumnIndex(People.NUMBER))+" Added");
    }

} 
```

为什么会这样？提前致谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-04T11:08:53.997

而不是使用 People.CONTENT_URI 使用 ContactsContract.Contacts.CONTENT_URI
代替

```
 Intent intent = new Intent(Intent.ACTION_PICK,People.CONTENT_URI); 
```

利用

```
 Intent intent = new Intent(Intent.ACTION_PICK,ContactsContract.Contacts.CONTENT_URI); 
```

示例：[获取联系电话号码](https://stackoverflow.com/questions/5112392/getting-contact-phone-number)

你的积极性结果：

```
 Uri contact = data.getData();
      ContentResolver cr = getContentResolver();

    Cursor c = managedQuery(contact, null, null, null, null);
    //      c.moveToFirst();

    while(c.moveToNext()){
        String id = c.getString(c.getColumnIndex(ContactsContract.Contacts._ID));

        String name = c.getString(c.getColumnIndex(ContactsContract.Contacts.DISPLAY_NAME));
        if (Integer.parseInt(c.getString(c.getColumnIndex(ContactsContract.Contacts.HAS_PHONE_NUMBER))) > 0) {
            Cursor pCur = cr.query(Phone.CONTENT_URI,null,Phone.CONTACT_ID +" = ?", new String[]{id}, null);

            while(pCur.moveToNext()){
                String phone = pCur.getString(pCur.getColumnIndex(Phone.NUMBER));
                tv.setText(name+" Added " + phone);
            }
        }

    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T11:10:22.107

您是否尝试选择不同的联系人？这可能很愚蠢，但也许那个联系人没有号码？

# wpf - WPF Grid 不会拉伸其高度

> ID：14684858
> 
> 赞同：0
> 
> 时间：2013-02-04T10:32:51.860
> 
> 标签：wpf

我想拉伸这个窗口的 Groupbox（高度）。我无法让它工作。我究竟做错了什么？我想要的是组框延伸到窗口的高度，但第一列没有延伸。

```
 <!-- PLAYER A -->
    <Border Grid.Row="0" Grid.Column="0" x:Name="PlayerA" Height="145" VerticalAlignment="Center">
        <Grid Height="145" VerticalAlignment="Top">
            <GroupBox x:Name="grpPlayerA" Header="Player A" Margin="10,14,0,0" RenderTransformOrigin="0.035,-0.717" Height="127" VerticalAlignment="Top">
                <Grid HorizontalAlignment="Center" VerticalAlignment="Center">
                    <Label x:Name="lblArtistA" Content="VENGABOYS" HorizontalAlignment="Left" Margin="3,3,0,0" VerticalAlignment="Top"/>
                    <Label x:Name="lblTitleA" Content="TO BRAZIL" HorizontalAlignment="Left" Margin="3,27,0,0" VerticalAlignment="Top"/>
                    <ProgressBar x:Name="prgPlayerA" HorizontalAlignment="Left" Height="15" Margin="5,53,0,0" VerticalAlignment="Top" Width="212"/>
                    <Image x:Name="imgPlayerA" HorizontalAlignment="Left" Height="62" Margin="220,6,0,0" VerticalAlignment="Top" Width="81"/>
                    <Button x:Name="btnPlayerAPlay" Content="Play" HorizontalAlignment="Left" Margin="5,79,0,0" VerticalAlignment="Top" Width="75"/>
                    <Button x:Name="btnPlayerAPauze" Content="Pauze" HorizontalAlignment="Left" Margin="92,79,0,0" VerticalAlignment="Top" Width="74"/>
                    <Button x:Name="btnPlayerAStop" Content="Stop" HorizontalAlignment="Left" Margin="178,79,0,0" VerticalAlignment="Top" Width="76"/>

                </Grid>
            </GroupBox>

        </Grid>
    </Border>

    <!-- PLAYER B-->
    <Border Grid.Row="0" Grid.Column="1" x:Name="PlayerB">
        <GroupBox x:Name="grpPlayerB" Header="Player B" Margin="0,14,16,0" Height="127" VerticalAlignment="Top">
            <Grid HorizontalAlignment="Center" VerticalAlignment="Center">
                <Label x:Name="lblArtistB" Content="VENGABOYS" HorizontalAlignment="Left" Margin="3,3,0,0" VerticalAlignment="Top"/>
                <Label x:Name="lblTitleB" Content="TO BRAZIL" HorizontalAlignment="Left" Margin="3,27,0,0" VerticalAlignment="Top"/>
                <ProgressBar x:Name="prgPlayerB" HorizontalAlignment="Left" Height="15" Margin="5,53,0,0" VerticalAlignment="Top" Width="212"/>
                <Image x:Name="imgPlayerB" HorizontalAlignment="Left" Height="62" Margin="220,6,0,0" VerticalAlignment="Top" Width="81"/>
                <Button x:Name="btnPlayerBPlay" Content="Play" HorizontalAlignment="Left" Margin="5,79,0,0" VerticalAlignment="Top" Width="75"/>
                <Button x:Name="btnPlayerBPauze" Content="Pauze" HorizontalAlignment="Left" Margin="92,79,0,0" VerticalAlignment="Top" Width="74"/>
                <Button x:Name="btnPlayerBStop" Content="Stop" HorizontalAlignment="Left" Margin="178,79,0,0" VerticalAlignment="Top" Width="76"/>

            </Grid>
        </GroupBox>
    </Border>

    <!-- HITLIJST -->
    <Border Grid.Row="1" Grid.Column="0" x:Name="Hitlijst" VerticalAlignment="Top" Margin="0,0,0,28">
        <Grid VerticalAlignment="Top">
            <Grid.RowDefinitions>
                <RowDefinition Height="0*"/>
                <RowDefinition/>
            </Grid.RowDefinitions>
            <GroupBox x:Name="grpPlaylist" Header="Hitlijst" Margin="10,0" Grid.RowSpan="2" Height="275">
                <Grid VerticalAlignment="Top">
                    <ListBox x:Name="lbxHitlijst" Height="242" Margin="10,10,10,0" VerticalAlignment="Top">
                        <ListBoxItem Background="#FFF55F19" Content="1\. Vengaboys - To Brazil (3:19)"/>
                        <ListBoxItem Background="#FFF91A1A" Content="2\. Total Touch - Doo Be La Dee (3:60)"/>
                        <ListBoxItem Content="3\. ATB - 9 PM Till I Come (3:33)"/>
                    </ListBox>

                </Grid>
            </GroupBox>

        </Grid>
    </Border>

    <Border Grid.Row="1" Grid.Column="1" x:Name="Info">
        <Grid>
            <GroupBox x:Name="grpInfo" Header="Info" HorizontalAlignment="Left" Margin="10,0,0,0" VerticalAlignment="Top" Height="282" Width="324">
                <Grid>
                    <TextBlock x:Name="txtLyrics" HorizontalAlignment="Left" Margin="10,10,0,0" TextWrapping="Wrap" Text="Lyrics" VerticalAlignment="Top" Height="119" Width="292"/>
                    <GroupBox x:Name="grpInfoInfo" Header="Gegevens" HorizontalAlignment="Left" Margin="10,134,0,0" VerticalAlignment="Top" Height="116" Width="292">
                        <Grid>
                            <Label x:Name="lblAlbum" Content="ALBUM: Hitzone 1" HorizontalAlignment="Left" Margin="10,10,0,0" VerticalAlignment="Top" RenderTransformOrigin="-0.149,0.231"/>
                            <Label x:Name="lblYear" Content="JAAR: 1992" HorizontalAlignment="Left" Margin="10,36,0,0" VerticalAlignment="Top" RenderTransformOrigin="0,0.269"/>
                            <Label x:Name="lblArtists" Content="ARTIEST(EN): Vengaboys" HorizontalAlignment="Left" Margin="10,62,0,0" VerticalAlignment="Top"/>

                        </Grid>
                    </GroupBox>

                </Grid>
            </GroupBox>

        </Grid>
    </Border>
    <GroupBox x:Name="grpHitlijst" Header="Hitlijst --" Grid.ColumnSpan="2" Grid.RowSpan="2" Margin="0,0,10,10"/>
</Grid> 
```

让它工作会很棒，在此先感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T10:36:00.223

如果您希望 GroupBox 伸展高度，为什么是您的`VerticalAlignment` `Top`? 切换到`Stretch`它应该可以工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-17T20:44:03.473

请参考此注： [WPF Groupbox 高度需要动态改变？](https://stackoverflow.com/questions/5722234/wpf-groupbox-height-needs-to-change-dynamically)

底线 - 将宽度和高度设置为“自动”（删除它们拥有的值），如果您也需要将垂直对齐/水平设置为“拉伸”

# iphone - iOS 6 UITextView 无法删除相等约束

> ID：14684862
> 
> 赞同：2
> 
> 时间：2013-02-04T10:32:56.067
> 
> 标签：iphone, ios, objective-c

我的`UITextView`. `Textview`结束了`UiView`。我`view`在故事板中的宽度相等，但高度必须调整大小以支持 iPhone 5。

问题是总是有一个高度相等的约束，我无法删除。如果我将其更改为“大于或小于”并更改值，我的`textview`. 我只能从`textview`.

如果我将约束更改为“提升到用户约束”，我可以将其删除，但会立即出现一个新的约束来固定高度。

将优先级更改为 1 并不能解决问题。

所以视图的高度不会自动调整大小。

在另一个视图中，我的 tableview 的大小调整工作正常，只有 textview 在这里出现问题。

如何删除相等约束，以便只有大于的约束处于活动状态？

编辑：这是来自视图的源代码，包括约束。

```
 <view contentMode="scaleToFill" translatesAutoresizingMaskIntoConstraints="NO" id="PNS-qQ-Qo3">
                            <subviews>
                                <textView clipsSubviews="YES" multipleTouchEnabled="YES" contentMode="scaleToFill" translatesAutoresizingMaskIntoConstraints="NO" id="RdG-Gf-pbO">
                                    <color key="backgroundColor" red="1" green="1" blue="1" alpha="1" colorSpace="calibratedRGB"/>
                                    <constraints>
                                        <constraint firstAttribute="height" priority="1" constant="158" type="user" id="h7G-zb-nwt"/>
                                        <constraint firstAttribute="height" relation="greaterThanOrEqual" constant="158" type="user" id="oh5-nf-nRk"/>
                                    </constraints>
                                    <string key="text">Lorem ipsum dolor sit er elit lamet, consectetaur cillium adipisicing pecu, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum. Nam liber te conscient to factor tum poen legum odioque civiuda.</string>
                                    <fontDescription key="fontDescription" type="system" pointSize="14"/>
                                    <textInputTraits key="textInputTraits" autocapitalizationType="sentences"/>
                                </textView>
                            </subviews>
                            <color key="backgroundColor" white="1" alpha="1" colorSpace="custom" customColorSpace="calibratedWhite"/>
                            <constraints>
                                <constraint firstItem="RdG-Gf-pbO" firstAttribute="leading" secondItem="PNS-qQ-Qo3" secondAttribute="leading" type="default" id="6vI-dT-4NX"/>
                                <constraint firstItem="RdG-Gf-pbO" firstAttribute="trailing" secondItem="PNS-qQ-Qo3" secondAttribute="trailing" type="default" id="Jkf-Hd-9rp"/>
                                <constraint firstItem="RdG-Gf-pbO" firstAttribute="top" secondItem="PNS-qQ-Qo3" secondAttribute="top" constant="20" symbolic="YES" type="default" id="v4W-JC-W0R"/>
                            </constraints>
                        </view> 
```

编辑 2：这是在超级视图中进行更改的源代码：

```
 <view contentMode="scaleToFill" translatesAutoresizingMaskIntoConstraints="NO" id="PNS-qQ-Qo3">
                            <subviews>
                                <textView clipsSubviews="YES" multipleTouchEnabled="YES" contentMode="scaleToFill" translatesAutoresizingMaskIntoConstraints="NO" id="RdG-Gf-pbO">
                                    <color key="backgroundColor" red="1" green="1" blue="1" alpha="1" colorSpace="calibratedRGB"/>
                                    <constraints>
                                        <constraint firstAttribute="height" constant="158" id="0fk-CS-M1r"/>
                                        <constraint firstAttribute="height" relation="greaterThanOrEqual" constant="158" type="user" id="Mjt-GD-N8k"/>
                                    </constraints>
                                    <string key="text">Lorem ipsum dolor sit er elit lamet, consectetaur cillium adipisicing pecu, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum. Nam liber te conscient to factor tum poen legum odioque civiuda.</string>
                                    <fontDescription key="fontDescription" type="system" pointSize="14"/>
                                    <textInputTraits key="textInputTraits" autocapitalizationType="sentences"/>
                                </textView>
                            </subviews>
                            <color key="backgroundColor" white="1" alpha="1" colorSpace="custom" customColorSpace="calibratedWhite"/>
                            <constraints>
                                <constraint firstItem="RdG-Gf-pbO" firstAttribute="trailing" secondItem="PNS-qQ-Qo3" secondAttribute="trailing" type="user" id="7gP-1C-I3d"/>
                                <constraint firstAttribute="bottom" relation="lessThanOrEqual" secondItem="RdG-Gf-pbO" secondAttribute="bottom" constant="85" type="user" id="MlS-gF-VZh"/>
                                <constraint firstAttribute="width" constant="300" type="user" id="NTZ-bO-H1C"/>
                                <constraint firstItem="RdG-Gf-pbO" firstAttribute="leading" secondItem="PNS-qQ-Qo3" secondAttribute="leading" type="user" id="PsM-KW-5oX"/>
                                <constraint firstItem="RdG-Gf-pbO" firstAttribute="top" relation="lessThanOrEqual" secondItem="PNS-qQ-Qo3" secondAttribute="top" constant="58" type="user" id="Ugg-3p-tLX"/>
                                <constraint firstAttribute="centerX" secondItem="RdG-Gf-pbO" secondAttribute="centerX" type="user" id="Z5B-5s-oK9"/>
                                <constraint firstAttribute="height" relation="lessThanOrEqual" constant="273" type="user" id="cCP-z5-3jO"/>
                                <constraint firstItem="RdG-Gf-pbO" firstAttribute="top" secondItem="PNS-qQ-Qo3" secondAttribute="top" constant="21" type="user" id="xnR-aM-hzt"/>
                            </constraints>
                        </view> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T12:11:45.647

只要现有约束不足以在两个维度中定位视图（或任何其他相关视图），界面构建器将自动重新添加约束。

一般来说，这样的问题意味着要么你忽略了一些明显的依赖关系（我一直这样做），要么在自动布局链的下游有另一个视图（因为没有更好的术语）需要约束存在。它不一定是您正在查看的视图。

如果没有看到实际的布局，很难确定，但在我看来，等高约束另一端的视图可能没有在没有约束的情况下定义其布局。

看看那个视图，特别是看看添加一个约束，比如到超级视图的垂直距离（从而固定高度）是否可以解决这个问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-25T06:07:34.440

将约束作为出口放入“.h”文件并使用以下代码：

```
[self.yourview removeConstraint:self.yourconstraint]; 
```

# mdx - 在不考虑层级的孙辈的情况下计算子辈的价值

> ID：14684863
> 
> 赞同：0
> 
> 时间：2013-02-04T10:33:01.830
> 
> 标签：mdx

我在我的 OLAP 多维数据集中设置了层次结构，我想计算来自特定节点的子值，而不考虑孩子的孩子。

```
SELECT 
    [Colset]
   ,[RowSet] ON 1
  FROM [Hierarchy].[Tree].&[24089].Children 
```

如果我执行这个查询，我会得到整个层次结构中每个孩子的总和。（在 99% 的情况下，这当然是你想要的）。相反，我想在*没有*孙子的情况下获得孩子的价值观。

我喜欢做的是这样的（伪代码）

```
SELECT 
    [Colset]
   ,[RowSet] ON 1
  FROM Except( [Hierarchy].[Tree].&[24089].Children, [Hierarchy].[Tree].&[24089].GrandChildren) 
```

这是可能的，如果，如何？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T14:04:43.053

假设您的度量的 SUM 聚合，应该这样做：

```
with member val as sum( [Hierarchy].[Tree].&[24089], [Measures].currentMember )
    - sum( descendants( [Hierarchy].[Tree].&[24089], 1, SELF ), [Measures].currentMember )

select ... where val 
```

# php - php - 不能使用 stdClass 类型的对象作为数组

> ID：14684864
> 
> 赞同：0
> 
> 时间：2013-02-04T10:33:06.747
> 
> 标签：php, arrays

我的 twitter 插件不断收到此错误：

致命错误：不能使用 stdClass 类型的对象作为 C:.... 中的数组，第 72 行

它有时只显示，但是我的推特计数器在相当长的一段时间内都没有改变。请问你能帮忙吗？代码如下，关于行在中间： update_option('pyre_twitter_followers', $json[0]->user->followers_count);

```
<?php if(get_option('pyre_twitter_id')): ?>
<div class="social-box">
  <a href='http://twitter.com/<?php echo get_option('pyre_twitter_id'); ?>'>
  <img src="<?php echo get_template_directory_uri(); ?>/images/twitter.png" alt="Follow us on Twitter" width="48" height="48" /></a>
  <?php
  $interval = 3600;

  if($_SERVER['REQUEST_TIME'] > get_option('pyre_twitter_cache_time')) {
    @$api = wp_remote_get('http://twitter.com/statuses/user_timeline/' . get_option('pyre_twitter_id') . '.json');
    @$json = json_decode($api['body']);

    if(@$api['headers']['x-ratelimit-remaining'] >= 1) {
      update_option('pyre_twitter_cache_time', $_SERVER['REQUEST_TIME'] + $interval);
      update_option('pyre_twitter_followers', $json[0]->user->followers_count);
    }
  }
  ?>
  <div class="social-box-text">
    <span class="social-arrow"></span>
    <span class="social-box-descrip"><?php _e('Follow us on Twitter', 'pyre'); ?></span>
    <span class="social-box-count"><?php echo get_option('pyre_twitter_followers'); ?> <?php _e('Followers', 'pyre'); ?></span>
  </div>
</div>
<?php endif; ?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T10:43:49.630

Arrays and objects have different syntaxes:

```
$array = array(
    'foo' => 'bar',
);
$object = (object)$array;

var_dump($array['foo'], $object->foo); 
```

A *Cannot use object of type stdClass as array* error message on this line refers to the array syntax (square brackets):

```
update_option('pyre_twitter_followers', $json[0]->user->followers_count);
                                             ^^^ 
```

If it works some times, then there're cases where `$json` is an object and cases when it's an array. The variable comes from here:

```
$json = json_decode($api['body']); 
```

The [docs for `json_decode()`](http://php.net/json_decode) inform us that second parameter decides whether to generate an object or an array:

> `mixed json_decode ( string $json [, bool $assoc = false [, int $depth = 512 [, int $options = 0 ]]] )`
> 
> **assoc** When `TRUE`, returned objects will be converted into associative arrays.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T10:43:58.477

The `json_decode()` function takes two parameters. If you want an array representation, you need to pass `true` as the second parameter value. Otherwise it generates an object representation by default.

[http://php.net/json_decode](http://php.net/json_decode)

# c++ - 如何自定义阴影

> ID：14684865
> 
> 赞同：1
> 
> 时间：2013-02-04T10:33:08.273
> 
> 标签：c++, qt, qt5

我想改变`QCompleter`弹出窗口的外观。我试过`QGraphicsDropShadowEffect`了，但它不起作用，因为那个窗口有系统阴影。如果我结合`DropShadowEffect`平台相关的`WinApi`代码来禁用系统影子小部件，它根本不会出现。

禁用系统影子示例：

```
<!-- language: lang-cpp -->
HWND hWnd = reinterpret_cast<HWND>(popup()->winId());  
DWORD windowStyle = GetClassLongW(hWnd, GCL_STYLE);          
if(windowStyle & CS_DROPSHADOW)                              
{                                                            
    windowStyle ^= CS_DROPSHADOW;                            
    SetClassLongW(hWnd, GCL_STYLE, windowStyle);             
} 
```

Qt 5.0.1
gcc 4.7.2
Windows 7 x64

# excel - Excel (VBA)：禁用除粗体以外的单元格格式

> ID：14684870
> 
> 赞同：2
> 
> 时间：2013-02-04T10:33:13.283
> 
> 标签：excel, vba, formatting, cell

我想禁用更改单元格的格式，除了使字体加粗。有没有办法做到这一点？

显然， `.Protect AllowFormattingCells:=True`启用所有可能的格式更改。

我认为也许在功能区上制作自定义按钮可以为此服务（即取消保护工作表，使内容变粗并再次保护），但我想知道是否有一些更方便的方法来解决这个问题。

我在[http://www.excelforum.com/excel-programming-vba-macros/676299-use-vba-to-lock-all-cell-formatting-except-background-color.html](http://www.excelforum.com/excel-programming-vba-macros/676299-use-vba-to-lock-all-cell-formatting-except-background-color.html)遇到过类似的问题-但它也仍未解决。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T15:19:16.073

不是一个完美的解决方案，而是一个可能的解决方法。在 ThisWorkbook 模块中，粘贴以下事件：

```
Private Sub Workbook_Activate()
Application.OnKey "^b", "MakeBold"
End Sub

Private Sub Workbook_Deactivate()
Application.OnKey "^b"
End Sub 
```

然后，在常规模块中：

```
Sub MakeBold()
ActiveSheet.Unprotect
On Error Resume Next
Selection.Font.Bold = Not (Selection.Font.Bold)
On Error GoTo 0
ActiveSheet.Protect
End Sub 
```

限制是它仅适用于键盘快捷键，而不适用于功能区按钮。我想您可以创建一个自定义按钮并将其“伪装”为粗体按钮，但这仍然是一个不完美的解决方法。

# angularjs - Angular - 提交后清除表单输入

> ID：14684877
> 
> 赞同：23
> 
> 时间：2013-02-04T10:33:45.243
> 
> 标签：angularjs

我有一个像这样的简单表格：

```
<form name="add-form" data-ng-submit="addToDo()">
    <label for="todo-name">Add a new item:</label>
    <input type="text" data-ng-model="toDoName" id="todo-name" name="todo-name" required>
    <button type="submit">Add</button>
</form> 
```

我的控制器如下：

```
$scope.addToDo = function() {
    if ($scope.toDoName !== "") {
        $scope.toDos.push(createToDo($scope.toDoName));
    }
} 
```

我想做的是在提交后清除文本输入，所以我只需清除模型值：

```
$scope.addToDo = function() {
    if ($scope.toDoName !== "") {
        $scope.toDos.push(createToDo($scope.toDoName));
        $scope.toDoName = "";
    }
} 
```

除了现在，因为表单输入是“必需的”，所以表单输入周围有一个红色边框。这是正确的行为，但不是我在这种情况下想要的......所以我想清除输入然后模糊输入元素。这导致我：

```
$scope.addToDo = function() {
    if ($scope.toDoName !== "") {
        $scope.toDos.push(createToDo($scope.toDoName));
        $scope.toDoName = "";
        $window.document.getElementById('todo-name').blur();
    }
} 
```

现在，我知道像这样从控制器修改 DOM 在 Angular 文档中是不受欢迎的——但是有没有更 Angular 的方式来做到这一点？

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2013-02-04T11:21:10.470

当您为表单命名时，它会自动添加到`$scope`.

因此，如果您将表单名称更改为“ `addForm`”（因为我认为这不是`add-from`angular 的有效名称，不知道为什么），您将参考`$scope.addForm`.

如果您使用 angular 1.1.1 或更高版本，您将[`$setPristine()`](https://github.com/angular/angular.js/commit/733a97adf87bf8f7ec6be22b37c4676cf7b5fc2b)在`$scope.addForm`. 它应该递归地负责重置您的表单。或者如果您不想使用 1.1.x 版本，您可以[查看源代码](https://github.com/angular/angular.js/commit/733a97adf87bf8f7ec6be22b37c4676cf7b5fc2b)并进行仿真。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-04T16:37:13.173

对于那些还没有切换到 1.1.1 的人，这里有一个指令，当 $scope 属性发生变化时会变得模糊：

```
app.directive('blur', function () {
  return function (scope, element, attrs) {
    scope.$watch(attrs.blur, function () {
        element[0].blur();
    });
  };
}); 
```

控制器现在必须在提交发生时更改属性。但至少我们没有在控制器中进行 DOM 操作，也不必通过 ID 查找元素：

```
function MainCtrl($scope) {
    $scope.toDos = [];
    $scope.submitToggle = true;
    $scope.addToDo = function () {
        if ($scope.toDoName !== "") {
            $scope.toDos.push($scope.toDoName);
            $scope.toDoName = "";
            $scope.submitToggle = !$scope.submitToggle;
        }
    };
} 
```

HTML：

```
<input type="text" data-ng-model="toDoName" name="todo-name" required 
  blur="submitToggle"> 
```

[PLNKR](http://plnkr.co/edit/BzjztTLvOfzfLHz5XKKk?p=preview)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-12-12T12:50:03.070

我已经让它像下面的代码一样工作。

**HTML部分**

```
<td ng-show="a">
 <input type="text" ng-model="e.FirstName" />
</td> 
```

**控制器部分**

> e.FirstName='';

# sas - 如何向 SAS 中已创建的数据集添加新观察？

> ID：14684885
> 
> 赞同：3
> 
> 时间：2013-02-04T10:34:33.497
> 
> 标签：sas

如何向 SAS 中已创建的数据集添加新观察？例如，如果我有带有变量“x”和“y”的数据集“dataX”，并且我想添加新的观测值，该观测值乘以观测数 n 的 2，我该怎么做？

数据X：
xy
1 1
1 21
2 3

我想创建：

数据X：
xy
1 1
1 21
2 3
10 210

其中第 4 个观察值是第 2 个观察值乘以 10。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-06-05T12:46:39.813

```
data X;
input x y;
datalines;
1 1
1 21
2 3 
;
run;

data X ;
set X end=eof;
if eof then do;
output;
x=10 ;y=210;
end;
output;
run; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-04T14:03:59.510

这是执行此操作的一种方法：

```
data dataX;
   input x y;
   datalines;
1 1
1 21
2 3
run;

/* Create a new observation into temp data set */
data _addRec;
  set dataX(firstobs=2); /* Get observation 2 */
   x = x * 10;  /* Multiply each by 10 */
   y = y * 10;
   output;      /* Output new observation */
   stop;
run;

/* Add new obs to original data set */
proc append base=dataX data=_addRec;
run;

/* Delete the temp data set (to be safe) */
proc delete data=_addRec;
run; 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-10-09T20:20:21.943

```
data a ;
 do kk=1 to 5 ;
    output ;
 end ;
run;

data a2 ;
    kk=999 ;
    output ;
run;

data a; set a a2 ;run ;

proc print data=a ;run ; 
```

结果：SAS 系统 1

```
 OBS     kk

                               1       1
                               2       2
                               3       3
                               4       4
                               5       5
                               6     999 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-04T12:44:09.450

您可以使用宏来获得您想要的结果：

1.  编写一个宏，它将首先读取`DataSet`，何时`_n_=2`将 x 和 y 乘以 10。

2.  之后创建另一个`DataSet`只保留你的乘法价值的说`x'=10x`and `y'=10y`。

3.  传入`DataSet`另一个宏，它将设置原始数据集和新创建的数据集。

逻辑是您必须创建另一个具有值的数据集，`10x`然后再使用`10y`先前的数据集进行设置。

我希望这个能帮上忙 ！

# android - 某些视频无法从 sdcard 播放，但来自 http 的相同视频播放良好

> ID：14684888
> 
> 赞同：2
> 
> 时间：2013-02-04T10:34:37.770
> 
> 标签：android, android-mediaplayer

我有一些视频，可以从 http 播放，但不能从 sdcard 播放。视频完全一样。日志猫是：

```
02-04 11:17:21.139: E/PlayerDriver(24273): Creating Non-Tunnel mode playback - uncompressed MIO
02-04 11:17:21.219: E/QCvdec(24273): get_parameter: unknown param 0ff7a347
02-04 11:17:21.219: W/MediaPlayer(15066): info/warning (1, 26)
02-04 11:17:21.229: I/MediaPlayer(15066): Info (1,26)
02-04 11:17:21.229: W/QCvdec(24273): ======================================================================
02-04 11:17:21.229: W/QCvdec(24273):                    Open Max Statistics                                
02-04 11:17:21.229: W/QCvdec(24273): ======================================================================
02-04 11:17:21.229: W/QCvdec(24273): empty this buffer rate = NaN
02-04 11:17:21.229: W/QCvdec(24273): empty this buffer total time = 0
02-04 11:17:21.229: W/QCvdec(24273): empty this buffer count = 0
02-04 11:17:21.229: W/QCvdec(24273): ======================================================================
02-04 11:17:21.229: E/PlayerDriver(24273): Command PLAYER_PREPARE completed with an error or info PVMFErrNoResources
02-04 11:17:21.229: E/MediaPlayer(15066): error (1, -15)
02-04 11:17:21.239: E/MediaPlayer(15066): Error (1,-15)
02-04 11:17:21.239: D/VideoView(15066): Error: 1,-15
02-04 11:17:21.239: W/PlayerDriver(24273): PVMFInfoErrorHandlingComplete 
```

但我认为这并不完全是日志，因为在 Android 源代码中我发现：

```
 DEBUG_PRINT_LOW("\n get_parameter returning Height %d , Width %d \n",
              m_height, m_width); 
```

我没有找到，如何启用低日志。

在其他设备（如三星 Galaxy S3、Android 4.1.3）上，视频从 http 和 sdcard 播放。我试图将视频转换成更小的尺寸，所以 720x480 是播放的最大尺寸。视频大小可能有问题吗？

我还检查了，如果视频不能从 VideoView 播放，它也不能使用默认的 android 媒体播放器应用程序播放。

我的手机是三星 Galaxy ace (android 2.3.5)

也许有人有同样的错误并建立了解决方案？或者有人可以告诉下一步如何更深入地调试这个问题？

# arrays - bash 数组 - 访问元素

> ID：14684891
> 
> 赞同：0
> 
> 时间：2013-02-04T10:34:46.593
> 
> 标签：arrays, bash, parsing

我需要从 bash 中的 json 字符串中提取一些信息。json字符串就像

```
{"ok":true,"id":"af1aa5cef5dc0c86fd734ff3d42a8188","rev":"1-f28941b049d7d356ae113fa061ddfe1f"} 
```

（来自 couchdb 插入的输出）

我只想抓住 id，所以我试图

```
$IFS=;,\" 
json=tail -n1 output
echo $json 
\\ { ok  true  id   af1aa5cef5dc0c86fd734ff3d42a8188   rev   1-f28941b049d7d356ae113fa061ddfe1f } 
```

所以，到目前为止，一切看起来都很好而且很花哨，但是，如果我尝试访问一个元素，${json[0]} 会返回整个字符串，而所有其他 ${json[n]} 都是空的。

另一方面，

```
for i in $json;
 do echo $i
done 
```

适用于 $json 的每个元素...

我一定是做错了什么，但是什么？

（是的，我确实知道这种对 json 字符串的“解析”会让我遇到稍微复杂一点的问题——但对于这些字符串，它应该可以正常工作——我想）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T10:39:39.400

要分配给数组，您必须使用括号。顺便说一句，您捕获输出的行`tail`也是无效的。

```
json=( $(tail -n1 output) )
echo "${json[2]}" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-04T10:38:21.643

您可以使用 awk：

```
$ echo '"ok":true,"id":"af1aa5cef5dc0c86fd734ff3d42a8188","rev":"1-f28941b049d7d356ae113fa061ddfe1f"}' | awk -F, '{ print $2 }'
"id":"af1aa5cef5dc0c86fd734ff3d42a8188" 
```

您也可以使用两个分隔符`awk`

```
 $ awk -F'[,:]' '{ print $4 }' your_json_file.json
"af1aa5cef5dc0c86fd734ff3d42a8188" 
```

# php - 为什么我的价值观没有更新？

> ID：14684893
> 
> 赞同：0
> 
> 时间：2013-02-04T10:34:57.790
> 
> 标签：php, mysql, set, sql-update, where

我有一个简单的、不安全的本地数据库，我正在学习（是的，现在仍在使用 MySQL）我可以在表中查看我的数据库行并单击一个编辑按钮，然后该按钮会显示在每列中选择的单个记录文本框更新和保存。这是我的编辑页面。

```
<?php
$id = $_GET['id'];
$connect = mysql_connect("localhost", "XXXXXX", "XXXXXXX") or
die ("Check your connection.");
mysql_select_db("toner");
$quey1="select * from inventory where id ='".$id."'";
$result=mysql_query($quey1) or die(mysql_error());
?>
<html>
<form action="updateinfo.php" method="post">
<table>
<?php
while ($row=mysql_fetch_array($result))
{
?>
<tr>
  <td align="right">Partnumber:</td>
  <td align="left"><input type="text" name="partnumber" value="<?php echo $row['partnumber'];?>"/></td>
</tr> 
<tr>
  <td align="right">Description:</td>
  <td align="left"><input type="text" name="description" value="<?php echo $row['description'];?>"/></td>
</tr> 
<tr>
  <td align="right">Vendor:</td>
  <td align="left"><input type="text" name="vendor" value="<?php echo $row['vendor'];?>"/></td>
</tr> 
<tr>
  <td align="right">Price:</td>
  <td align="left"><input type="text" name="price" value="<?php echo $row['price'];?>"/></td>
</tr> 
<tr>
  <td align="right">Quantity:</td>
  <td align="left"><input type="text" name="quantity" value="<?php echo $row['quantity'];?>"/></td>
</tr> 
</table>
<br>
<input type="hidden" name="id" value="<?php echo $row['id'];?>"/>
<input type="submit" value="Edit/Update Toner">
<?php
 }
?> 
</form>
</html> 
```

这是我更新的更新信息

```
<?php
mysql_connect("localhost","XXXXX","XXXXX") or die("Error: ".mysql_error()); 
mysql_select_db("toner");
$id =$_POST['id'];
$partnumber = $_POST['partnumber'];
$description = $_POST['description'];
$vendor = $_POST['vendor'];
$price = $_POST['price'];
$quantity = $_POST['quantity'];
$sql = "UPDATE inventory SET partnumber ='".$partnumber."',description ='".$description."',vendor ='".$vendor."',price ='".$price."',quantity ='".$quantity."' WHERE id ='".$id."'";
mysql_query($sql) or die ("Error: ".mysql_error());
echo "Updated successfully";
header( "refresh:10;url=toner.php" );
?> 
```

添加主键后，我可以更新数据库但是 $id = $_POST['id']; 仍然给出错误，任何帮助表示赞赏。谢谢。是的，我知道它容易被注入，我应该使用 PDO 或 MySQLi，但我仍然是初学者，这是我选择开始学习的地方。谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T10:39:42.780

问题是因为`partnumber`，在这里您再次重置`partnumber`但新的不存在于您的数据库中，并且由于该查询不会更新新值。

```
$sql = "UPDATE inventory SET description ='".$description."',vendor ='".$vendor."',price ='".$price."',quantity ='".$quantity."' WHERE partnumber = '".$partnumber."'"; 
```

**解决方案**

不要再次设置`partnumber`仅在 where 子句中使用它。

# php - 限制目录访问直接在浏览器中输入

> ID：14684894
> 
> 赞同：0
> 
> 时间：2013-02-04T10:34:58.477
> 
> 标签：php, .htaccess

我想通过在 php 中直接在浏览器中输入 url 来限制对我网站的直接访问。实际上我搜索了更多，所有人都在说使用 .htaccess 文件，但我只想限制那些直接在浏览器中输入该 url 的用户

例子：

我的网站有用于付款过程的目录“付款”。当任何用户购物时，我的网站将自动转到该目录进行付款，但如果有人在浏览器中输入相同的 url，我想限制它并将其重定向到主页

请帮帮我谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T10:41:10.427

您必须使用变量来表示您的用户有权进入您网站的一部分。

例如 ：`$_SESSION['access_page']['payment'] = true;`

然后，您在用户加载页面时检查此变量，并在必要时重定向他（或 403）。

# sql - 用 where 子句中的计算字符串在 Linq 中表达 IN sql 语句

> ID：14684896
> 
> 赞同：1
> 
> 时间：2013-02-04T10:35:05.133
> 
> 标签：sql, linq, entity-framework

我正在尝试为以下 sql 查询构建一个 linq 查询：

```
SELECT *
FROM [QryFiles2]
WHERE (left(Demande,6) IN (select NoBVR from tblRequest)) 
```

知道 QryFiles2 是一个实体和 tblRequest 太我已经来到这样的事情：

```
from f in db.QryFiles2
where  f.Demande.Substring(0,6) /* in (select NoBVR from tblRequest) */
select f 
```

问题是我不知道如何使用 linq 来表达 in sql 语句。你知道不使用原始 sql 查询我怎么能​​做到这一点吗？

注意：我尝试使用 .contains 方法，但无法使用计算出的子字符串来解决。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T12:43:39.073

最后，我使用这样的连接语句完成了此操作：

```
from f in db.QryFiles2
join r in db.tblRequest on f.Demande.Substring(0,6) equals r.NoBVR 
```

超级干净超级快速不需要子查询之前应该考虑过:-)

# java - java中的字符串操作以获取另一个字符串

> ID：14684902
> 
> 赞同：0
> 
> 时间：2013-02-04T10:35:36.383
> 
> 标签：java, android

我有`content://com.android.contact/data/5032`一个变量中的字符串`Str1`。我想进行操作`Str1`，以便获得`5032`另一个字符串变量。

任何人都可以提出答案吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-04T10:38:35.407

```
String str1 = "content://com.android.contact/data/5032"
String val = str1.substring(str1.lastIndexOf("//")+1); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-04T10:39:04.340

如果你想从给定的字符串中获取数字，试试这个：

```
String str = "content://com.android.contact/data/5032";
String str2 = str.replaceAll("\\D+","");
System.out.println(str2); 
```

输出：

```
5032 
```

如果你想拆分试试这个：

```
String[] string = str.split("//|/");
System.out.println(string[string.length -1 ]); 
```

输出：

```
5032 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-04T10:46:22.397

```
String str1 = "content://com.android.contact/data/5032";
String str2 = str1.substring(str1.lastIndexOf("/")+1, str1.length()); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-04T10:40:36.777

如果你只想要最后 4 个字符，你可以做这样的事情

```
String s = "this is a string";
String ss = s.substring(s.length()-4, s.length()); 
```

但如果您需要从随机位置提取数字，则必须使用正则表达式。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-04T10:40:56.323

请写出以小写字母开头的变量名称。您可以使用该`split`方法来执行此操作。您可能会发现这个相关问题很有趣：[如何在 Java 中拆分字符串](https://stackoverflow.com/questions/3481828/string-split-in-java)。

# jquery - jQuery 动画：如何在 JavaScript 中定义 Beizer 曲线（从图形到代码）？

> ID：14684904
> 
> 赞同：0
> 
> 时间：2013-02-04T10:35:42.497
> 
> 标签：jquery, jquery-animate, bezier

有没有什么图形工具可以将贝泽曲线从图形转换为代码？

我想创建我的 Beizer 曲线，但我只知道如何定义起点和终点。如果我在 Adob​​e Illustrator 中只有一条曲线，如何定义控制点？

信息：这个[问题的答案](https://stackoverflow.com/questions/5936953/how-to-calculate-control-points-in-cubic-beizer-curve)说明了如何定义控制点，但没有提到如何找出这些点。

我有一个来自示例的 Beizer 曲线：

```
 var bezier_params = {
        start: { 
          x: 185, 
          y: 385, 
          angle: 50
        },  
        end: { 
          x:540,
          y:110, 
          angle: -10, 
          length: 0.25
        }
      } 
```

但是我很难在没有视觉效果的情况下修改这些值。

注意：我正在使用[jQuery Path Plugin](https://github.com/weepy/jquery.path)。

# javascript - 通过索引访问数组

> ID：14684905
> 
> 赞同：1
> 
> 时间：2013-02-04T10:35:44.140
> 
> 标签：javascript, mongodb, meteor

我尝试通过阅读 Todo-List 示例中如何处理标签以及如何在各方示例中处理 RSVPS 来弄清楚这一点，但我无法找到实现目标的一般方法。我有一个计划集合，其中包含名称 ownerid 和 excerciselist

> Plans.insert({name: names[i], ownerId: 1, excerciselist: excercises});

现在在这个 Excerciselist 中，我想按 ID 添加一个未定义的 Excercises 数量。我有一个 Excercisecollection 包含以下内容：

> Excercises.insert({name：names[i]，muscle：muscle[i]，device：devices[i]，description：descriptions[i]})；

现在所有这些练习默认都有一个唯一的 _id 元素。向 excerciselist 添加东西没问题，我可以通过 Push 做到这一点。但我不知道的是，我如何只能通过它的索引访问 excerciselist 中的某些 ID。

我只能通过 HTML 访问整个 Stringarray 和输出

> {{#each planarray}} {{excerciselist}} {{/each}} 但不可能像 {{ excerciselist }}

我也试过只返回 excerciselist 到 planarray，但问题是因为它只是索引而不是映射它不能被 LiveHTML 访问。

有谁知道如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T11:50:12.270

为什么不将唯一 id 字段添加到 Excersies 插入？

```
Excercises.insert({ uniqueID: [i], name: names[i], muscle: muscles[i], device: devices[i], description: descriptions[i]}); 
```

这样，您就可以根据 uniqueID 字段获得所需的练习。

哦，您可能应该将“uniqueID”称为更有意义的东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T14:20:57.957

我发现了一个小解决方法，这与我的想法不完全一样，但它可以完成工作。

```
 Template.editplan.excercises = function() {
    var names = [];
    var add = [];
    var adder = null;
    for(var i = 0; i < this.excerciselist.length; i++)
    {
      add[i] = [];
      adder = Excercises.find({_id: this.excerciselist[i]});
      add[i]['_id'] = this.excerciselist[i];
      add[i]['location'] = i;
      adder.forEach(function (obj) {
        add[i]['name'] = obj.name;
      });
      names.push(add[i]);
    }
    return names;
  }; 
```

基本上我创建了一个新数组，在其中放置了我想要的数据，以便我可以在 LiveHTML 中读取它，请参见下面的示例

```
{{#each planarray}}
        <h1>{{name}}</h1>
        {{#each excercises}}
        {{name}}
        {{/each}}
        <select name="selectedexcercise{{_id}}" id="selectedexcercise{{_id}}">
            {{> excerciseoption}}
        </select>
        <input type="button" class="addtoplan" value="Eine Übung hinzfügen">
    {{/each}} 
```

但是必须有更有效或更好的方法....至少我希望如此！

# android - EditText 值在 android 的 listView 中自动更改

> ID：14684906
> 
> 赞同：0
> 
> 时间：2013-02-04T10:35:48.167
> 
> 标签：android, listview, android-edittext

我有一个 ListView，每一行都包含一个 EditText。当我尝试更改 EditText 中的行上的值时，其他一些行的 editText 值会自动更改。

下面是listView和EditText的代码。

```
 <ListView
            android:id="@+id/ListView"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:background="#ffffff"
            android:cacheColorHint="#ffffff"
            android:layout_above="@+id/includeID"
            android:layout_below="@+id/linearlayoutforSubTotal"
            android:visibility="invisible" >
        </ListView>

        <EditText
            android:id="@+id/editTex"
            android:layout_width="60dip"
            android:layout_height="30dip"
            android:textColor="#000000"
            android:textSize="12dip"
            android:inputType="number"
            android:editable="true" >
        </EditText> 
```

下面是我试图获取 EditText 更改值的代码。

```
item.quantity.setId(position);

item.quantity.setOnFocusChangeListener(new OnFocusChangeListener() {

@Override
public void onFocusChange(View v, boolean hasFocus) {
    if (!hasFocus){

        final int position = v.getId();

        final EditText Caption = (EditText) v;

        ShoppingCartHelper.cartItems.get(position).qty =  Integer.parseInt(Caption.getText().toString());

         }                          
    }
}); 
```

请帮我找到这个问题的解决方案

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T13:08:20.933

尝试这样的事情：

```
editText.addTextChangedListener(new TextWatcher() {
  public void afterTextChanged(Editable s) {
    // Set the value of the field to s.toString();
  }

  public void onTextChanged(CharSequence s, int start, int before, int count) {
    // Do nothing.
  }

  public void beforeTextChanged(CharSequence s, int start, int count, int after) {
    // Do nothing.
  }
}); 
```

# xml - 如何从 BaseX 内部查询？

> ID：14684907
> 
> 赞同：1
> 
> 时间：2013-02-04T10:35:57.177
> 
> 标签：xml, xquery, basex

我已将我的 Maven 配置导入`BaseX`但找不到查询它的方法。

我想查询 id="thirdparty-releases" 的存储库

以下都不起作用：

```
/settings/profiles/profile/repositories/repository[id="thirdparty-releases"]

db:open("settings","settings.xml")/settings/profiles/profile/repositories/repository[id="thirdparty-releases"] 
```

我的配置如下：

```
<settings xmlns="http://maven.apache.org/SETTINGS/1.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://maven.apache.org/SETTINGS/1.0.0 http://maven.apache.org/xsd/settings-1.0.0.xsd">
  <localRepository>D:\Users\Dims\Design\!Lib\!m2\repository</localRepository>

  <pluginGroups>

  </pluginGroups>
  <proxies>
  </proxies>
  <servers>
  </servers>
  <mirrors>
  </mirrors>
  <profiles>
    <profile>
      <id>env-dev</id>
      <activation>
        <activeByDefault>true</activeByDefault>
      </activation>
      <repositories>
        <repository>
          <id>jboss-public-repository-group</id>
          <name>JBoss Public Repository Group</name>
          <url>http://repository.jboss.org/nexus/content/groups/public/</url>
          <layout>default</layout>
          <releases>
            <enabled>true</enabled>
            <updatePolicy>never</updatePolicy>
          </releases>
          <snapshots>
            <enabled>true</enabled>
            <updatePolicy>never</updatePolicy>
          </snapshots>
        </repository>
        <repository>
          <id>thirdparty-releases</id>
          <name>JBoss Thirdparty Releases</name>
          <url>https://repository.jboss.org/nexus/content/repositories/thirdparty-releases</url>
        </repository>
        <repository>
          <id>maven2-repository.dev.java.net</id>
          <name>Java.net Repository for Maven</name>
          <url>http://download.java.net/maven/2/</url>
        </repository>
      </repositories>
    </profile>
  </profiles>
</settings> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-04T11:37:26.550

您的数据具有不同的命名空间（请参阅`<settings />`节点中的 xmlns）。您要么必须更改查询中的命名空间，要么也可以使用通配符选择器进行查询，例如`/*:settings/*:profiles/...`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-02-04T06:32:17.840

你是什​​么意思：

> 我想查询 id="thirdparty-releases" 的存储库

因为这对我来说更像是一个专家级的问题......？

* * *

我相信您知道 BaseX 本身是一个独立的数据库。如果您只需要查询现有数据，则甚至不需要使用 a `JDK`，尽管作为`BaseX`Java 应用程序，您将需要一个`JVM`-- 所以 maven 并没有真正进入图片。

它有一个 GUI，很容易上手。

如果您**还想从 Java 程序运行命令，那么您可以**[随时](http://docs.basex.org/javadoc/org/basex/core/cmd/package-summary.html)查看 github[示例](https://github.com/BaseXdb/basex/tree/master/basex-examples)或参考`Javadoc`可用命令。

当然，`BaseX`stackoverflow 上有很多问题，目前超过三百个，对于 [basex] [java] 我看到了近五十个结果。有一个出色的邮件列表，主要开发人员以及列表中的其他所有人都非常有空且乐于助人。

诚然，我不明白你的问题。为什么要将 maven 配置导入`BaseX`？

如果您只是想在数据库上运行`xpath`或运行`xquery`，我的建议是使用 GUI。

# ruby - 捆绑nokogiri

> ID：14684910
> 
> 赞同：1
> 
> 时间：2013-02-04T10:36:09.100
> 
> 标签：ruby, bundler, nokogiri

我正在设置一台通过 rbenv 运行 Mac OS 10.8 和 Ruby 1.9.3 的新机器。

经过多次试探性的开始，并阅读了许多 Stack Overflow 的答案，我能够使用以下方法安装 Nokogiri：

```
sudo gem install nokogiri -- --with-xml2-include=/usr/local/Cellar/libxml2/2.8.0/include/libxml2 --with-xml2-lib=/usr/local/Cellar/libxml2/2.8.0/lib --with-xslt-dir=/usr/local/Cellar/libxslt/1.1.28 --with-iconv-include=/usr/local/Cellar/libiconv/1.13.1/include --with-iconv-lib=/usr/local/Cellar/libiconv/1.13.1/lib
Building native extensions.  This could take a while...
Successfully installed nokogiri-1.5.6
1 gem installed 
```

现在我正在尝试捆绑一个 Rails 应用程序，但我无法安装 Nokogiri。我总是收到缺少 libxml2 的错误。

我尝试的最后一个命令是：

```
bundle config build.nokogiri -- --with-xml2-include=/usr/local/Cellar/libxml2/2.8.0/include/libxml2 --with-xml2-lib=/usr/local/Cellar/libxml2/2.8.0/lib --with-xslt-dir=/usr/local/Cellar/libxslt/1.1.28 --with-iconv-include=/usr/local/Cellar/libiconv/1.13.1/include --with-iconv-lib=/usr/local/Cellar/libiconv/1.13.1/lib
bundle install 
```

有谁知道如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-05-30T21:07:08.917

您不需要 -- 在您的配置命令中。请参阅[捆绑配置](http://bundler.io/v1.6/bundle_config.html)页面。我知道这个问题很老，但也许其他人可以受益。

```
bundle config build.nokogiri --with-xml2-include=/usr/local/Cellar/libxml2/2.8.0/include/libxml2 --with-xml2-lib=/usr/local/Cellar/libxml2/2.8.0/lib --with-xslt-dir=/usr/local/Cellar/libxslt/1.1.28 --with-iconv-include=/usr/local/Cellar/libiconv/1.13.1/include --with-iconv-lib=/usr/local/Cellar/libiconv/1.13.1/lib
bundle install 
```

您可以检查您的 ~/.bundle/config 文件以查看配置是否被正确记录。

我也刚刚将此[错误](https://github.com/bundler/bundler/issues/3053)提交给捆绑器。如果你有一段`Syntax error: Unterminated quoted string`时间建造，看看它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T02:34:15.330

您是否尝试过[Homebrew 的更新安装说明](http://nokogiri.org/tutorials/installing_nokogiri.html)？FWIW，我从来没有遇到过 MacPorts 的问题

# android - 将片段与 httpconnection 一起使用的最佳方式是什么？

> ID：14684912
> 
> 赞同：0
> 
> 时间：2013-02-04T10:36:21.613
> 
> 标签：android, android-fragments, httpconnection, android-fragmentactivity

我正在重构一个使用 AsyncTask 对 Web 服务进行 HTTP 调用的应用程序。

现在使用一个简单的 Activity，此时我需要以这种方式使用 AsyncTask 调用服务：

```
 private class MyAsyncTask extends AsyncTask {<String, Void, Boolean>
    private ProgressDialog progressDialog;

    private xmlHandler handler;

    @ Override
    protected void OnPreExecute () {
    progressDialog = new ProgressDialog (home.This);
    progressDialog
    . SetMessage (getString (R.string.home_loadinfo_attendere));
    progressDialog.setCancelable (false);
    progressDialog.show ();
    }

    @ Override
    protected Boolean doInBackground (String... params) {
    try {
    xmlHandler handler = new XmlHandler();
    return Service
    . GetInstance ()
    . CallService (
    ServiceType.GETINFO,
    Home.This, handler, null);
    } Catch (Exception e) {
    e.printStackTrace ();
    return false;
    }
    }

    @ Override
    protected void OnPostExecute (Boolean success) {
    progressDialog.dismiss ();

    String message = null;
    if (success | | (handler == null))
    message = getString (R.string.server_result_msg500);
    else {
    switch (handler.getStatusCode ()) {
    case 200:
    doStuffWithHandler(handler);
    return;
    case 500:
    message = getString (R.string.server_result_msg500);
    break;
    case 520:
    message = getString (R.string.server_result_msg520);
    break;
    default:
    message = getString (R.string.server_result_msg500);
    break;

    }
    }

    if (message! = null) {

    AlertDialog.Builder builder = new AlertDialog.Builder (home.This);
    builder.setTitle (R.string.home_loadinfo_error_title)
    . SetMessage (message)
    . SetCancelable (true)
    . SetNegativeButton (R.string.close_title,
    new DialogInterface.OnClickListener () {
    @ Override
    public void onClick (DialogInterface dialog,
    int id) {
    dialog.cancel ();

    }
    });
    AlertDialog alert = builder.create ();
    Alert.show ();
    }
    }
    }

 doStuffWithHandler(handler){

// populate interface with data from service

 } 
```

我想做同样的事情，但使用 Android 兼容性库和 FragmentActivity。我读了一些关于 loader 的内容，但我不明白如何以同样的方式使用它们，你能否告诉我这是否是正确的方式（FragmentActivity、Fragment 和 Loader）以及如何实现它也解决了给我的例子？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T19:07:47.007

您可以像在 Activity 中一样在 Fragment 中使用 Asynctask，几乎没有什么变化，例如：

```
 progressDialog = new ProgressDialog (home.This); 
```

**改成：**

```
progressDialog = new ProgressDialog (getApplication());

 return Service
    . GetInstance ()
    . CallService (
    ServiceType.GETINFO,
    Home.This, handler, null); 
```

**改成：**

```
return Service
. GetInstance ()
. CallService (
ServiceType.GETINFO,
getApplication(), handler, null); 
```

在 Fragment 中实现 Asynctask 的任何特殊功能。我认为您需要阅读有关 Fragment 本身的更多信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T19:52:51.510

您可以创建一个加载器，如下所示：

```
public abstract class MyLoader extends AsyncTaskLoader<String> {
public MyLoader(Context context) {
    super(context);
}

private String result;
protected String error;

@Override
public final String loadInBackground() {
    try {
        error = null;
        // Load your data from the server using HTTP
        ...
        result = ...
        ...
        return result;
    }
    catch (Exception e) {
        Logger.e("ResourceLoader", "Loading resource failed.", e);
        error = e.getMessage();
    }
    return null;
}

@Override
protected void onStartLoading() {
    if (!TextUtils.isEmpty(error)) {
        deliverResult(result);
    }

    if (takeContentChanged()) {
        forceLoad();
    }
}

@Override
public void deliverResult(String data) {
    if (isReset()) {
        return;
    }

    result = data;

    if (isStarted()) {
        try {
            super.deliverResult(data);
        }
        catch(Exception e) { 
            Log.e("ResourceLoader", "Caught exception while delivering result.", e);
        }
    }
}

public String getError() {
    return error;
}
} 
```

在你的片段中，你可以初始化这个加载器：

```
public class MyLoaderFragment extends Fragment implements LoaderCallbacks<String> {
....
....
String message;

    @Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    setRetainInstance(true);
        ....
}

@Override
public void onActivityCreated(Bundle savedInstanceState) {
    super.onActivityCreated(savedInstanceState);
    getLoaderManager().initLoader(0, getArguments(), this);
}

@Override
public Loader<String> onCreateLoader(int id, Bundle args) {
    return new MyLoader(getActivity());
}

@Override
public void onLoadFinished(Loader<String> loader, String result) {
    // Here you have the result in 'result'.
    message = result;
    ...
}
....
} 
```

您可以返回任何您喜欢的对象，而不是只返回一个简单的“字符串”结果。只需相应地调整 MyLoader 和 LoaderCallbacks 实现。

# android - 在 ViewPager 中禁用动画

> ID：14684913
> 
> 赞同：67
> 
> 时间：2013-02-04T10:36:25.337
> 
> 标签：android, animation, android-viewpager

我想在我的 custom 中禁用所有过渡动画`ViewPager`。这个视图分页器包含四个标签 - 每个标签加载一个`Fragment`- 视图分页器所做的是切换标签：例如第一个标签是索引，第二个是地图，等等。

问题是，如果作为选择的第一个选项卡，我单击第四个选项卡，我可以看到它如何`ViewPager`通过第二个和第三个选项卡并在第四个选项卡上停止，我不希望这种情况发生。

`ViewPager`每次用户选择`setAnimation`要显示的新选项卡时，我都尝试禁用所有动画`null`，但它仍然不起作用。

请问有什么想法可以实现吗？提前非常感谢！

编辑：我也尝试覆盖`onCreateAnimation`每个`Fragment`但仍然无法正常工作

* * *

## 回答 #1

> 赞同：178
> 
> 时间：2013-02-04T11:11:11.990

终于发现：只要`mViewPager.setCurrentItem(position)`用额外的参数调用 就可以解决这个问题`false`，也就是 . 的平滑滚动`ViewPager`。在此之后，滚动将在没有任何平滑的情况下完成，因此将看不到动画。

* * *

## 回答 #2

> 赞同：52
> 
> 时间：2016-02-16T22:38:34.680

这是另一个解决方案：

*   子类化**ViewPager**（您的自定义**ViewPager**）
*   覆盖两个**setCurrentItem**方法

代码片段：

```
@Override
public void setCurrentItem(int item, boolean smoothScroll) {
    super.setCurrentItem(item, false);
}

@Override
public void setCurrentItem(int item) {
    super.setCurrentItem(item, false);
} 
```

通过将**smoothScroll**设置为**false**，您将禁用滚动动画。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-01-31T10:37:55.023

我正在寻找禁用滑动动画甚至用户滑动这里是我的实现

1-覆盖`Viewpager`方法`onInterceptTouchEvent`和`onTouchEvent`

2-创建自己的`GestureDetector`

3-检测滑动手势并使用`setCurrentItem(item, false)`

**浏览器**

```
public class ViewPagerNoSwipe extends ViewPager {
    private final GestureDetector gestureDetector;
    private OnSwipeListener mOnSwipeListener;

    public void setOnSwipeListener(OnSwipeListener onSwipeListener) {
        mOnSwipeListener = onSwipeListener;
    }

    public ViewPagerNoSwipe(@NonNull Context context) {
        super(context);
        gestureDetector = new GestureDetector(context, new GestureListener());

    }

    public ViewPagerNoSwipe(@NonNull Context context, @Nullable AttributeSet attrs) {
        super(context, attrs);
        gestureDetector = new GestureDetector(context, new GestureListener());

    }

    @Override
    public boolean onTouchEvent(MotionEvent ev) {
        return true;
    }

    @Override
    public boolean onInterceptTouchEvent(MotionEvent ev) {
        gestureDetector.onTouchEvent(ev);
        return false;
    }

    public class GestureListener extends GestureDetector.SimpleOnGestureListener {

        private static final int SWIPE_THRESHOLD = 100;
        private static final int SWIPE_VELOCITY_THRESHOLD = 100;

        @Override
        public boolean onDown(MotionEvent e) {
            return true;
        }

        @Override
        public boolean onFling(MotionEvent e1, MotionEvent e2, float velocityX, float velocityY) {
            boolean result = false;
            try {
                float diffY = e2.getY() - e1.getY();
                float diffX = e2.getX() - e1.getX();
                if (Math.abs(diffX) > Math.abs(diffY)) {
                    if (Math.abs(diffX) > SWIPE_THRESHOLD && Math.abs(velocityX) > SWIPE_VELOCITY_THRESHOLD) {
                        if (diffX > 0) {
                            if(mOnSwipeListener!=null)
                            mOnSwipeListener.onSwipeRight();
                        } else {
                            if(mOnSwipeListener!=null)
                                mOnSwipeListener.onSwipeLeft();
                        }
                        result = true;
                    }
                } else if (Math.abs(diffY) > SWIPE_THRESHOLD && Math.abs(velocityY) > SWIPE_VELOCITY_THRESHOLD) {
                    if (diffY > 0) {
                        if(mOnSwipeListener!=null)
                            mOnSwipeListener.onSwipeBottom();
                    } else {
                        if(mOnSwipeListener!=null)
                            mOnSwipeListener.onSwipeTop();
                    }
                    result = true;
                }
            } catch (Exception exception) {
                exception.printStackTrace();
            }
            return result;
        }
    }

    public interface OnSwipeListener {

         void onSwipeRight();

        void onSwipeLeft();

        void onSwipeTop();

        void onSwipeBottom();
    }
} 
```

当你设置 ViewPager 设置 swipeListener

```
postsPager.setOnSwipeListener(new ViewPagerNoSwipe.OnSwipeListener() {
            @Override
            public void onSwipeRight() {

              postsPager.setCurrentItem(postsPager.getCurrentItem() + 1,false);

            }

            @Override
            public void onSwipeLeft() {

            postsPager.setCurrentItem(postsPager.getCurrentItem() - 1, false);

            }
             ...
           } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-08-15T19:23:16.407

在 tabselected 监听器中，只需将 setCurrentItem 的第二个参数设置为 false 即可禁用平滑滚动。

```
mBottomNavigation.setOnTabSelectedListener((position, wasSelected) -> {

       switch (position) {
            case 0:
                viewPager.setCurrentItem(0, false);

                return true;
            case 1:
                viewPager.setCurrentItem(1, false);

                return true;
            case 2:
                viewPager.setCurrentItem(2, false);

                return true;
        }
        return false;
    }); 
```

# sql - NodeJS JSON 数组过滤

> ID：14684914
> 
> 赞同：3
> 
> 时间：2013-02-04T10:36:26.367
> 
> 标签：sql, arrays, json, node.js, filter

我已经使用 Node 从 SQL 中检索一组结果，它们是这样返回的；

```
[
   {
   "event_id": 111111,
   "date_time": "2012-11-16T01:59:07.000Z",
   "agent_addr": "127.0.0.1",
   "priority": 6,
   "message": "aaaaaaaaa",
   "up_time": 9015040,
   "hostname": "bbbbbbb",
   "context": "ccccccc"
},
   {
   "event_id": 111112,
   "date_time": "2012-11-16T01:59:07.000Z",
   "agent_addr": "127.0.0.1",
   "priority": 6,
   "message": "aaaaaaaaa",
   "up_time": 9015040,
   "hostname": "bbbbbbb",
   "context": "ddddddd"
},
] 
```

数组中通常有很多条目，我需要有效地过滤数组以仅显示具有“ccccccc”上下文的条目。我尝试了一个 for 循环，但速度非常慢。

有什么建议吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-05T10:47:28.650

如果您想在节点中执行此操作并且不想使用 sql，那么有一种非常简单的方法可以使用 javascript 内置的 Array.filter 函数。

```
var output = arr.filter(function(x){return x.context=="ccccccc"}); //arr here is you result array 
```

输出数组将仅包含具有上下文“ccccccc”的对象。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2020-10-08T16:36:04.123

Khurrum 所说的另一种方法是使用箭头功能。它具有相同的结果，但有些人更喜欢这种表示法。

```
var output = arr.filter(x => x.context == "ccccccc" ); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-04T10:48:19.757

1.  正如马特所建议的，为什么不包括`WHERE context = "ccccccc"`在你的 SQL 查询中？

2.  否则，如果您必须全部保留，则可以使用以下方法之一来过滤结果

    ```
    // Place all "ccccccc" context row in an array

    var ccccccc = [];

    for (var i = results.length - 1; i >= 0; i--) {
      if(results[i] == 'ccccccc')
        ccccccc.push(results[i]);
    };

    // Place any context in an named array within an object

    var contexts = {};
    for (var i = results.length - 1; i >= 0; i--) {

      if(contexts[results[i]] == 'undefined')
        contexts[results[i]]

        contexts[results[i]].push(results[i]);
    }; 
    ```

    或使用[下划线](http://underscorejs.org/)（或类似）[过滤器](http://underscorejs.org/#filter)功能。

# android - Android，传感器方向不会改变

> ID：14684916
> 
> 赞同：2
> 
> 时间：2013-02-04T10:36:43.703
> 
> 标签：android, android-sensors

我的应用程序有问题，我不知道原因在哪里。我正在开发一个应用程序，它通过 Wi-Fi 与 PC 连接，并在手机屏幕方向上显示。所有关于发送的工作都很完美，但与方向传感器无关。奇怪的事实是，当我只使用传感器部分进行应用程序时，它可以工作。也许线程发生了变化。

在创建

```
 txtView = (TextView) findViewById(R.id.txtView);
        txtView2 = (TextView) findViewById(R.id.txtView2);
        txtView3 = (TextView) findViewById(R.id.txtView3);
        SensorManager mSensorManager = (SensorManager) getSystemService(Context.SENSOR_SERVICE);
        Sensor mOrientation = mSensorManager.getDefaultSensor(Sensor.TYPE_ORIENTATION); 
```

在传感器变化

```
 @Override
  public void onSensorChanged(SensorEvent event) {
      azimuth_angle = event.values[0];
      pitch_angle = event.values[1];
      roll_angle = event.values[2];
      txtView.setText(azimuth_angle+"  ");
      txtView2.setText(pitch_angle+"  ");
      txtView3.setText(roll_angle+"  ");
      Log.e("kacper", azimuth_angle+"  "+pitch_angle+"  "+roll_angle); 
```

我检查了 onSensorChanged 没有被调用。为什么它在新的空活动中不起作用并且经常刷新。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T10:51:32.613

你注册了听众吗？

```
 mSensormanager.registerListener(this, mOrientation ,
            SensorManager.SENSOR_DELAY_FASTEST); 
```

# c# - 安装 Windows 商店应用程序时自动启动或执行任何代码？

> ID：14684918
> 
> 赞同：1
> 
> 时间：2013-02-04T10:36:55.743
> 
> 标签：c#, visual-studio-2012, windows-store-apps

我非常简单的 Windows Store App (c#) 仅在其磁贴上显示一些数据。目前，要初始化它，应用程序必须由用户启动，这是不切实际的。

是否有可能自动启动应用程序或在安装时执行任何代码？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T05:53:53.107

AFAIK 没有实际启动应用程序就无法执行任何代码。这意味着用户将需要启动应用程序来初始化磁贴及其数据。然后，您有多种设置数据的选项：

*   您可以直接从应用程序创建固定磁贴。
*   您可以从那里注册触发器并刷新磁贴。
*   您可以设置推送通知以刷新磁贴。

考虑到这一点，我建议您尽量充分利用需要运行的应用程序。例如，您可以显示磁贴的预览，并添加一些用于配置它的选项，如果这对您有意义的话。

# java - SASS 到 CSS 编译库

> ID：14684920
> 
> 赞同：0
> 
> 时间：2013-02-04T10:37:01.063
> 
> 标签：java, css, sass

是否有用于将 SASS 文件即时编译为 CSS 文件的 Java 库？请注意，构建工具插件不适用于我们的用例。谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-04T10:40:40.957

这似乎可以完成工作[https://github.com/darrinholst/sass-java](https://github.com/darrinholst/sass-java)。否则，github 搜索通常会找到一些好的东西。

# windows - Cassandra 作为 Windows 服务

> ID：14684922
> 
> 赞同：3
> 
> 时间：2013-02-04T10:37:06.113
> 
> 标签：windows, service, cassandra

我刚刚在 Windows Server 2012（它是一个虚拟机）上安装了[Apache Casandra 1.2.1 。](http://cassandra.apache.org/download/)我双击 cassandra.bat 并且它没有错误地工作。

如何将 Cassandra.bat 作为 Windows 服务运行，以便从 cumputer 注销？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-04T10:57:58.927

cassandra.bat 文件还可以帮助您将 Cassandra 作为 Windows 服务运行。您只需要**Commons Daemon Service Runner** Windows 二进制文件。

您需要在**bin**目录下创建一个名为**daemon**的文件夹，并将正确版本（32/64 位）的 prusrv.exe 解压缩到该目录（**bin\daemon**）。

 ****运行命令提示符并将目录更改为 bin。类型;

*cassandra.bat 安装*

然后运行 ​​services.msc 命令将*cassandra*（是的，小写的）视为 Windows 服务。

你也可以下载

[Datastax 社区版](http://www.datastax.com/products/community)

或者

[卡桑德罗](http://kimola.com/products/cassandrows)

它可以轻松安装、配置和运行 Apache Cassandra 作为 Windows 服务。****

# java - 从java程序访问Fusiontable的公共表

> ID：14684933
> 
> 赞同：1
> 
> 时间：2013-02-04T10:37:55.053
> 
> 标签：java, oauth-2.0, google-fusion-tables, google-api-java-client

我正在尝试从 google FusionTable 访问公共表。所以我只需要一个简单的 API 密钥。如果我以正确的方式制作 Fusiontables 对象，请告诉我。

* * *

fusiontables = new Fusiontables.Builder(HTTP_TRANSPORT, JSON_FACTORY, null).setApplicationName(APPLICATION_NAME).setGoogleClientRequestInitializer(new FusiontablesRequestInitializer(ClientCredentials.API_KEY)).build();

我在创建 Fusiontables 对象时遗漏了什么。请指导我，谢谢

# c++ - C++ 参数类型转换

> ID：14684936
> 
> 赞同：1
> 
> 时间：2013-02-04T10:38:03.613
> 
> 标签：c++, visual-c++, overloading, visual-c++-6

我有一个问题，我们有许多重载函数，但是当第二个参数使用不同类型调用它们时，它们总是调用`CString`版本而不是适当的重载。

函数的想法是作为一种基于键从缓存中获取和存储值的方法，但问题是编译器选择调用错误的函数。

函数定义如下：

```
bool GetProcessDataItem(LPCTSTR lpszName, CString& strValue, int iIndex = 0, bool bLeveled = false);
bool GetProcessDataItem(LPCTSTR lpszName, int& iValue, int iIndex = 0, bool bLeveled = false);
bool GetProcessDataItem(LPCTSTR lpszName, long& lValue, int iIndex = 0, bool bLeveled = false);
bool GetProcessDataItem(LPCTSTR lpszName, double& dValue,int iIndex = 0, bool bLeveled = false);
bool GetProcessDataItem(LPCTSTR lpszName, ATime& tmValue,int iIndex = 0, bool bLeveled = false);

void SetProcessDataItem(LPCTSTR lpszName, const CString& strValue, int iIndex = 0, bool bLeveled = false);
void SetProcessDataItem(LPCTSTR lpszName, int& iValue, int iIndex = 0, bool bLeveled = false);
void SetProcessDataItem(LPCTSTR lpszName, long& lValue, int iIndex = 0, bool bLeveled = false);
void SetProcessDataItem(LPCTSTR lpszName, double& dValue, int iIndex = 0, bool bLeveled = false);
void SetProcessDataItem(LPCTSTR lpszName, ATime& tmValue, int iIndex = 0, bool bLeveled = false); 
```

所以以下工作正常：

```
const CString aString = "blah"
SetProcessDataItem("FOO", aString));

CString tmpString;  //to be populated by the Get() call below
GetProcessDataItem("FOO", tmpString);  //tmpString == "blah" 
```

但这不会：

```
const double aDouble = 123;
SetProcessDataItem("FOO", aDouble));  //Calls the CString overloaded function (which doesn't convert double -> CString properly, so we get jibberish!)

double tmpDouble = 0;
GetProcessDataItem("FOO", tmpDouble);  //Calls the CString overloaded function and gets the gibberish that was originally passed in above 
```

我们在 Windows XP 和 7 上使用 Visual Studio 6 作为我们的编译器（不，升级不是我希望的那样）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T10:46:17.997

我认为这是因为 CString 可以从任何其他类型产生。您可能会发现您需要使 CString 版本成为不同的签名 - 可能添加另一个整数或类似的。

但也许更好的解决方案是为 CString 提供一个包装器，这样即使其他版本合适，编译器也不会自动选择 CString 版本。

例如，

```
class CStringWrapper 
{
     CStringWrapper(CString &x) : wrapped(x) {} explicit;
  private:
     CString&  wrapped;
}; 
```

现在，编译器不会`CStringWrapper`自动转换为 a 。当然，这意味着您必须使用`CStringWrapper(mystring)`来调用带有 a 的函数`CString`，但我想这比 evyerthing 是 a 更糟糕`CString`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T11:52:20.343

好吧，我认为这毕竟是一个 VS6 问题，因为解决方案是将声明更改为：

```
bool GetProcessDataItem(LPCTSTR lpszName, int& iValue, int iIndex = 0, bool bLeveled = false);
bool GetProcessDataItem(LPCTSTR lpszName, long& lValue, int iIndex = 0, bool bLeveled = false);
bool GetProcessDataItem(LPCTSTR lpszName, double& dValue,int iIndex = 0, bool bLeveled = false);
bool GetProcessDataItem(LPCTSTR lpszName, ATime& tmValue,int iIndex = 0, bool bLeveled = false);
bool GetProcessDataItem(LPCTSTR lpszName, CString& strValue, int iIndex = 0, bool bLeveled = false);

void SetProcessDataItem(LPCTSTR lpszName, const int iValue, int iIndex = 0, bool bLeveled = false);
void SetProcessDataItem(LPCTSTR lpszName, const long lValue, int iIndex = 0, bool bLeveled = false);
void SetProcessDataItem(LPCTSTR lpszName, const double dValue, int iIndex = 0, bool bLeveled = false);
void SetProcessDataItem(LPCTSTR lpszName, const ATime& tmValue, int iIndex = 0, bool bLeveled = false);
void SetProcessDataItem(LPCTSTR lpszName, const CString& strValue, int iIndex = 0, bool bLeveled = false); 
```

看到不同？

是的，几乎没有。我`CString`在标题中最后声明了函数的版本，从 set 函数中删除了引用`int`,`long`和`double`values 并且还使 set 函数中的参数为 const。

我认为 VS6 编译器只是找到第一个可以执行的函数重载并使用它，即使它不是最合适的。

# java - Java Runtime.exec() 挂起

> ID：14684937
> 
> 赞同：0
> 
> 时间：2013-02-04T10:38:05.473
> 
> 标签：java, runtimeexception

每当执行以下代码时，我都会进入 Defunct 僵尸进程。有人可以帮我解决这个问题。

```
 private static boolean executeCommand(String command)
        throws ClientException, IOException, InterruptedException {

    int exitVal = 1; // 0 is success, so we default to a nonzero.
    Process proc = null;
    try{
    Runtime rt = Runtime.getRuntime();
    proc = rt.exec(command);

    //Below lines are required to flush out the streams. else the process will hang.
    ReadStream s1 = new ReadStream("stdin", proc.getInputStream ());
    ReadStream s2 = new ReadStream("stderr", proc.getErrorStream ());
    s1.start ();
    s2.start ();        

    exitVal = proc.waitFor();

    if (exitVal == 0) {
        return true;
    } else {
        throw new ClientException("103", "" + command + " failed.");
    }
    }finally{
        if(proc  != null){
            proc.destroy();
        }
    }

} 
```

我正在清除单独线程中的所有流。

这是我的 ReadStream 课程

```
 public class ReadStream implements Runnable {

private static Logger logger = Logger.getLogger(ReadStream.class);

String name;
InputStream is;
Thread thread;

public ReadStream(String name, InputStream is) {
    this.name = name;
    this.is = is;
}

public void start() {
    thread = new Thread(this);
    thread.start();
}

public void run() {
    try {
        InputStreamReader isr = new InputStreamReader(is);
        BufferedReader br = new BufferedReader(isr);
        while (true) {
            String s = br.readLine();
            if (s == null)
                break;
            logger.info("[" + name + "] " + s);
        }
        is.close();
    } catch (Exception ex) {
        logger.error("Problem reading stream " + name + "... :" + ex);

    }
} 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T12:25:10.877

我不认为这是问题，但尝试将运行方法更改为：

```
try {
        InputStreamReader isr = new InputStreamReader(is);
        BufferedReader br = new BufferedReader(isr);
        do {
            String s = br.readLine();
            if (s != null)
              logger.info("[" + name + "] " + s);
        } while (s != null);
        is.close();
    } catch (Exception ex) {
        logger.error("Problem reading stream " + name + "... :" + ex);

    } 
```

# google-plugin-eclipse - GPE 不会更新 Drive API v2 超过 1.12.0-beta

> ID：14684940
> 
> 赞同：0
> 
> 时间：2013-02-04T10:38:12.427
> 
> 标签：google-plugin-eclipse

我最近开始在我的 Android 项目中使用 Drive API，但没过多久我就遇到了这个问题： [Google Drive InputStreamContent requires length to be set](https://stackoverflow.com/questions/12063164/google-drive-inputstreamcontent-requires-length-to-be-set)

基本上，我想即时压缩文件，这是不可能的，因为 API 需要预设长度。根据这个问题，这个问题应该在 1.13.0 版本中得到修复： [https ://code.google.com/p/google-api-java-client/issues/detail?id=591](https://code.google.com/p/google-api-java-client/issues/detail?id=591)

但是，GPE 不会将我的 Drive API 更新到这个版本。这是预期的行为吗？如果是，如何手动更新到 1.13.0 以便开始使用 Drive？

谢谢，昆特。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T14:56:24.670

问题已解决，Drive API 现在可以通过 Google 插件更新到 1.13 之后。

# c - C：如何检查特定变量是否已作为参数传递

> ID：14684941
> 
> 赞同：0
> 
> 时间：2013-02-04T10:38:21.060
> 
> 标签：c, function

我有以下代码：

```
typedef struct{
int A; 
char* B;
}MYTYPE;

MYTYPE sample;
int nCount; 

void doSomething(int A, MYTYPE* B)
{
//doing something inside this function.
}

doSomething(nCount, &sample); 
```

我的函数 doSomething() 中有没有办法检查传递的第二个参数是否准确`sample`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-04T10:39:26.973

是的，您可以简单地比较地址。

请记住，指向某事物的指针实际上是该事物的地址。所以你可以这样做：

```
void doSomething(int A, MYTYPE* B)
{
    if (B == &sample)
    {
        printf("B is sample\n";
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T10:39:33.080

是的：

```
if(B == &sample)
{
  printf("Get your own, don't use sample!\n");
} 
```

请注意，您的电话是错误的，您需要：

```
doSomething(nCount, &sample);
                    ^
                    |
               IMPORTANT! 
```

由于该函数需要一个地址。正如问题中所写，它不会构建。

# php - doc，docx使用php转换为pdf

> ID：14684943
> 
> 赞同：1
> 
> 时间：2013-02-04T10:38:25.943
> 
> 标签：php, pdf-generation, docx, doc

我一直在寻找相当长的时间来将 word 文档（.doc 和 .docx）转换为 pdf .....我的应用程序是关于从客户那里获取 word 文档而不是将它们转换为 pdf 并添加更改（例如页眉，页脚）到原始文档。欢迎任何建议。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-08-04T17:25:52.350

这已经有一年了，但是对于仍在寻找的人，我找到了一个相当不错的 api 的链接，您可以查看它是否适合您的需求。

[https://cloudconvert.org/page/api#overview](https://cloudconvert.org/page/api#overview)

本质上，您在注册帐户时使用他们的 api 和他们提供的密钥。将所有用于转换的数据发送到他们的服务器，然后获得回报。然后，您可以将其存储在您自己的计算机、用户计算机或您选择的服务器上。有一些最小的设置和注册过程，他们的 Github 帐户可以很容易地引导您完成。

检查一下，希望这是一个不错的选择。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T10:40:31.613

查看[http://www.phplivedocx.org/](http://www.phplivedocx.org/)将 DOC 转换为 PDF。

带有 nusoap 的示例代码，[http: //www.phplivedocx.org/articles/using-livedocx-with-nusoap/](http://www.phplivedocx.org/articles/using-livedocx-with-nusoap/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-20T11:56:34.080

您可以使用 http post 或 curl 命令从 PHP调用[Docmosis 云服务。](http://www.docmosis.com)它支持 doc 和 docx 导入和 pdf 输出。它更倾向于执行文档操作而不是转换，但也许这更适合您。请注意，我为创建 Docmosis 的公司工作。

希望有帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-12-13T06:55:03.220

我们需要在服务器上安装以下库以将 DOC 文件格式转换为 PDF 文件格式：

（自由办公室或开放办公室）和 Unoconv 图书馆

# c - 你可以为条件编译定义一个函数风格的宏吗？

> ID：14684946
> 
> 赞同：0
> 
> 时间：2013-02-04T10:38:38.737
> 
> 标签：c, macros, c-preprocessor

是否可以定义一个调用`IPHONE_ONLY`条件编译的宏，如下所示：

```
IPHONE_ONLY -(void)myMethod {
    //method body
} 
```

或者

```
IPHONE_ONLY( -(void)myMethod {
    //method body
}) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-04T10:44:01.137

尽管通常你会用 包围函数`#ifdef`，但我用 gcc 进行了测试，实际上以下内容也有效。不知道是不是标准：

```
#ifdef IPHONE
# define IPHONE_ONLY(...) __VA_ARGS__
#else
# define IPHONE_ONLY(...)
#endif

IPHONE_ONLY(int func(void)
{
    return 12;
}) 
```

不过，我从未见过任何人编写这样的代码。编写这样的函数是很常见的：

```
#ifdef IPHONE
int func(void)
{
    return 12;
}
#endif 
```

您的编辑器也会对此更满意，因为它理解函数，但不理解用作宏参数的函数体！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-04T11:09:14.773

当然可以，但我认为这不会使您的代码更具可读性

```
#if on_iphone
# define IPHONE_ONLY(...) __VA_ARGS__
#else
# define IPHONE_ONLY(...) 
#endif 
```

然后你可以在你的问题中以第二种方式使用宏。

但这真的很丑陋，与任何习惯阅读正确 C 的人的视觉预期背道而驰。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-04T10:41:48.707

我想你正在寻找[`ifdef`](http://gcc.gnu.org/onlinedocs/cpp/Ifdef.html)：

```
#ifdef IPHONE_ONLY
void myMethod(){
    //method body
)
#endif 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-04T10:44:23.697

```
#ifdef IPHONE_ONLY
# define MY_METHOD() myMethod();
 void myMethod() {

    ......

 }
#else
# define MY_METHOD()
#endif 
```

在项目的 c 代码中，您调用`MY_METHOD()`.

这将避免您`myMethod()`每次在代码中需要它时都以这种方式调用

```
 for(i=0; i<10; i++) {
        // some thing to do here
#ifdef IPHONE_ONLY
        myMethod();
#endif
        // other thing to do here
    } 
```

使用上面的定义，您将以 `myMethod();`这种方式调用您的

```
 for(i=0; i<10; i++) {
        // some thing to do here
        MY_METHOD();
        // other thing to do here
    } 
```

如果`IPHONE_ONLY`定义了，那么前驱将`MY_METHOD()`通过调用函数来改变宏`myMethod();`

如果`IPHONE_ONLY`未定义，则预处理器将`MY_METHOD()`一无所获。就像`MY_METHOD()`您的代码中不存在宏调用一样。并且函数`void myMethod()`不会被定义

# android - flex mobile android 权限 - 完全网络访问

> ID：14684948
> 
> 赞同：0
> 
> 时间：2013-02-04T10:38:47.960
> 
> 标签：android, apache-flex, mobile, air, permissions

有什么办法可以取消安卓系统上“完全网络访问”的权限？删除此权限

```
uses-permission android:name="android.permission.INTERNET 
```

不做任何改变。我的应用程序不需要任何网络连接，所以它不在乎。

# jquery - jqGrid - 调整最后一列的大小

> ID：14684952
> 
> 赞同：2
> 
> 时间：2013-02-04T10:38:52.317
> 
> 标签：jquery, jqgrid

我正在使用 jqGRid 4.4.1。

这是示例代码

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <title>SubGrid Real Data</title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />

<link rel="stylesheet" type="text/css" href="http://ajax.googleapis.com/ajax/libs/jqueryui/1.9.2/themes/redmond/jquery-ui.css" />
<link rel="stylesheet" type="text/css" href="http://www.ok-soft-gmbh.com/jqGrid/jquery.jqGrid-4.3.2/css/ui.jqgrid.css" />
<style>
    .groupColumn {
            background-color: #E3E3D7 !important;
            border: 1px solid #F4F4e5;
            font-weight: bold; !important;
    }
    .lockedColumn {
            background-color: #E3E3D7 !important;
            border: 1px solid #F4F4e5;
    }

    .ui-jqgrid .ui-jqgrid-bdiv {
        position: relative; 
        margin: 0em; 
        padding:0; 
        /*overflow: auto;*/ 
        overflow-x:hidden; 
        overflow-y:auto; 
        text-align:left;
    }

    .ui-jqgrid .ui-subgrid td.subgrid-data {
        border-top: 0 none !important;
        border-right: 0 none !important;
        border-bottom: 0 none !important;
    }
    .ui-jqgrid .ui-subgrid span.ui-icon ui-icon-carat-1-sw {
                background-color: #FFFFFF !important; 
                background-image: none !important;
                border: 0px 0px 1px 1px;
    }
</style>
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.9.2/jquery-ui.min.js"></script>
<script type="text/javascript" src="http://www.ok-soft-gmbh.com/jqGrid/jquery.jqGrid-4.4.1/js/i18n/grid.locale-en.js"></script>
<script type="text/javascript">
    $.jgrid.no_legacy_api = true;
    $.jgrid.useJSON = true;
</script>
<script type="text/javascript" src="http://www.ok-soft-gmbh.com/jqGrid/jquery.jqGrid-4.4.1/js/jquery.jqGrid.src.js"></script>

<script type="text/javascript">
//<![CDATA[
    /*global $ */
    /*jslint browser: true, eqeq: true, plusplus: true */
    $(function () {

        "use strict";
        var colModelData =[{"classes":"groupColumn","name":"itemName","editable":false},
                {"width":"100","name":"24394","editable":false},
                {"width":"100","name":"24390","editable":false},
                {"width":"100","name":"24387","editable":false},
                {"width":"100","name":"24386","editable":false},
                {"width":"100","name":"24385","editable":false},
                {"width":"100","name":"24383","editable":false},
                {"width":"100","name":"24369","editable":false},
                {"width":"100","name":"24306","editable":false}],
            subColModelData =[
            {"classes":"groupColumn","name":"itemName","editable":false},
                {"width":"99","name":"24394","editable":false},
                {"width":"100","name":"24390","editable":false},
                {"width":"100","name":"24387","editable":false},
                {"width":"100","name":"24386","editable":false},
                {"width":"100","name":"24385","editable":false},
                {"width":"100","name":"24383","editable":false},
                {"width":"100","name":"24369","editable":false},
                {"width":"98","name":"24306","editable":false}],
            colNamesArray = ["Name","12/21/2012","12/10/2012","12/03/2012","11/27/2012","11/15/2012","11/12/2012","11/09/2012","10/15/2012"],
        myData = [{"id":"group1","itemName":"Miscellaneous",
            "subGridData":[
            {"id":0,"itemName":"NNNNNN","24369":"","24387":"","24394":"","24306":"","24390":"","24385":"","24386":"","24383":""},
            {"id":1,"itemName":"EEEEEEE","24369":"","24387":"","24394":"","24306":"","24390":"","24385":"","24386":"","24383":""},
            {"id":2,"itemName":"7777777","24369":"","24387":"","24394":"","24306":"6.3","24390":"","24385":"","24386":"","24383":""},
            {"id":3,"itemName":"KKKKKK","24369":"","24387":"","24394":"","24306":"68","24390":"","24385":"","24386":"","24383":""},
            {"id":4,"itemName":"JJJJJ","24369":"","24387":"","24394":"","24306":"160","24390":"","24385":"","24386":"","24383":""},
            {"id":5,"itemName":"TTTTT","24369":"","24387":"","24394":"","24306":"77","24390":"","24385":"","24386":"","24383":""},{"id":6,"itemName":"LLLLLL","24369":"","24387":"","24394":"","24306":"88","24390":"","24385":"","24386":"","24383":""},{"id":7,"itemName":"RRRRR","24369":"","24387":"","24394":"","24306":"2:!","24390":"","24385":"","24386":"","24383":""},{"id":8,"itemName":"AAAAAA","24369":"","24387":"","24394":"","24306":"","24390":"","24385":"","24386":"","24383":""},{"id":9,"itemName":"CCCCC","24369":"","24387":"","24394":"","24306":"","24390":"","24385":"","24386":"","24383":""},{"id":10,"itemName":"HHHHH","24369":"","24387":"","24394":"","24306":"","24390":"","24385":"","24386":"","24383":""},{"id":11,"itemName":"OOOO","24369":"","24387":"","24394":"","24306":"","24390":"","24385":"","24386":"","24383":""},{"id":12,"itemName":"PPPP","24369":"","24387":"","24394":"","24306":"","24390":"","24385":"","24386":"","24383":""},{"id":13,"itemName":"DDDDD","24369":"","24387":"","24394":"","24306":"","24390":"","24385":"","24386":"","24383":""},{"id":14,"itemName":"GGGG","24369":"","24387":"","24394":"","24306":"","24390":"","24385":"","24386":"","24383":""},{"id":15,"itemName":"UBBBBB","24369":"","24387":"","24394":"","24306":"","24390":"","24385":"","24386":"","24383":""},{"id":16,"itemName":"UUUUU","24369":"","24387":"","24394":"","24306":"","24390":"","24385":"","24386":"","24383":""},{"id":17,"itemName":"NNNN","24369":"","24387":"","24394":"","24306":"","24390":"","24385":"","24386":"","24383":""},{"id":18,"itemName":"CCCC","24369":"","24387":"","24394":"","24306":"","24390":"","24385":"","24386":"","24383":""},{"id":19,"itemName":"SSSSS","24369":"","24387":"","24394":"","24306":"","24390":"","24385":"","24386":"","24383":""},{"id":20,"itemName":"FFFF","24369":"","24387":"","24394":"","24306":"","24390":"","24385":"","24386":"","24383":""},{"id":21,"itemName":" ","24369":"","24387":"","24394":"","24306":"","24390":"","24385":"","24386":"","24383":""},{"id":22,"itemName":"zzzzzz","24369":"","24387":"","24394":"","24306":"","24390":"","24385":"","24386":"","24383":""},
            {"id":23,"itemName":"NLNLNLNL","24369":"XXXX","24387":"","24394":"","24306":"I want to see this data","24390":"","24385":"","24386":"","24383":""}]}];
        $("#list").jqGrid({
            datatype: "local",
            data: myData,
            colNames: colNamesArray,
            colModel: colModelData,
            gridview: true,
            autoWidth:true,
            //height: "100%",
            height:"350px",
            width: "100%",
            caption: "Create subgrid from local data",
            subGrid: true,
            subGridOptions: {
                    reloadOnExpand: false
            },
            subGridRowExpanded: function (subgridDivId, parentRowId) {
                    var $subgrid = $("<table id='" + subgridDivId + "_t'></table>");
                    $subgrid.appendTo("#" + $.jgrid.jqID(subgridDivId));
                    var data = $(this).jqGrid("getLocalRow", parentRowId);
                    $subgrid.jqGrid({
                            datatype: "local",
                            data: $(this).jqGrid("getLocalRow", parentRowId).subGridData,
                            colModel:subColModelData,
                            autoWidth:true,
                            width: "100%",
                            height: "100%",
                            autoencode: true,
                            gridview: true,
                            rowNum: 200

                    });
            $subgrid.closest("div.ui-jqgrid-view")
                    .children("div.ui-jqgrid-hdiv").hide();
            },
            resizeStop: function (newWidth, index) {
                // grid.dragEnd()
                var widthChange = this.newWidth - this.width,
                    $theGrid = $(this.bDiv).find(">div>.ui-jqgrid-btable"),
                    $subgrids = $theGrid.find(">tbody>.ui-subgrid>.subgrid-data>.tablediv>.ui-jqgrid>.ui-jqgrid-view>.ui-jqgrid-bdiv>div>.ui-jqgrid-btable");
                $subgrids.each(function () {
                    var grid = this.grid;
                    // we have subgrids which have no internal subgrids
                    // it reduce the number of columns to 1
                    // we have rownumbers: true in the main grid, but not in subgrids
                    // it reduce the number of columns to additional 1
                    // so we should use (index - 2) as the column index in the subgrids
                    grid.resizing = { idx: (index - 1) };
                    grid.headers[index - 1].newWidth = (index - 1 === 0) || (index === grid.headers.length) ? newWidth - 2 : newWidth;
                    grid.newWidth = grid.width + widthChange;
                    grid.dragEnd.call(grid);
                    $(this).jqGrid("setGridWidth", grid.newWidth, false);
                });
                $theGrid.jqGrid("setGridWidth", this.newWidth, false);
            }   

        });

        //$("#list").jqGrid("toggleSubGridRow", 'm1');
        //$("#list").jqGrid("toggleSubGridRow", 'm3');
    });

//]]>
</script> 
```

我在网格下方有几个按钮，如 Next、Previous、Print、Export 等。我已经给 jqGrid 一个固定高度。所以，我可以得到垂直滚动条。

我正在使用这里提到的解决方案。: [jqGrid 水平滚动条](https://stackoverflow.com/questions/3091200/jqgrid-horizontal-scrollbar/4934612#4934612)

![在此处输入图像描述](../Images/f6716e4809efda5236456c8419058d22.png)

但是，我无法调整最后一列的大小。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-05T12:05:23.340

我个人觉得你的问题很有趣，我之前看过之后就投了赞成票。问题是问题的解决并不简单。一将不得不修改源代码。我目前没有时间进行这种实施。托尼可能会实施这一点。您可以将相应的功能请求发布到[trirand](http://www.trirand.com/blog/?page_id=393/feature-request/)。

我唯一可以向您推荐的是[答案](https://stackoverflow.com/a/9599685/315935)中描述的技巧。和你需要的不一样，但是在某些场景下可以提升用户体验。我个人在为客户制作的最高效的网格中使用它。

不过，我可以建议您一种解决方法。取决于您使用的其他设置，您描述的问题可能不像看起来那么难。如果您使用[gridResize](http://www.trirand.com/jqgridwiki/doku.php?id=wiki:jquery_ui_methods#resizable_grid)，用户将能够**调整网格**的大小。增加网格的大小后，用户将能够增加最后一列的宽度。如果您使用`shrinkToFit: false`或使用

```
$("#gridId").jqGrid("gridResize", { shrinkToFit: false }); 
```

那么用户将能够通过两个步骤调整网格的最后一列：1）调整网格的大小 2）调整网格的最后一列的大小。

**更新：**从 4.9 版开始的[免费 jqGrid](https://github.com/free-jqgrid/jqGrid)中根本不存在调整最后一列大小的问题（请参阅[自述](https://github.com/free-jqgrid/jqGrid/blob/master/README49.md#the-following-main-new-features-are-implemented-in-the-version-49)文件）。因此，升级到当前版本的免费 jqGrid（4.10.0 或更高版本）可以解决调整网格最后一列大小的问题。

# php - 如何检测一个块在magento中是否可用

> ID：14684957
> 
> 赞同：0
> 
> 时间：2013-02-04T10:39:10.680
> 
> 标签：php, magento

我正在编写一个模块，如果它可用，我想在其中包含另一个块，但如果未安装包含该块的模块，则包含另一个块。像这样的东西：

```
if(block_exists($blockname)$this->getLayout()->createBlock($blockname);
else $this->getLayout()->createBlock($otherblock); 
```

那么，如何检测是否安装了特定的块或模块？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T10:39:10.680

答案在 mage/core/model/layout.php 中找到，其中 _getBlockInstance 检测块是否存在并且可以使用。对你来说，你的 block_exists 函数是这样的：

```
function block_exists($block){
    if(
        class_exists($block, false) || mageFindClassFile($block) ||
        ($block = Mage::getConfig()->getBlockClassName($block) &&
            (class_exists($block, false) || mageFindClassFile($block))
        )
    ) return true;
    return false;
} 
```

# java - 如何访问数据输入流？

> ID：14684961
> 
> 赞同：2
> 
> 时间：2013-02-04T10:39:19.727
> 
> 标签：java, android, sockets, byte, inputstream

在我之前的问题中，我提到过，我`OutputStream`会做一些奇怪的事情。现在已经过去了，但突然出现了一个更严重的问题。我不知道，我怎样才能读出我的`InputStream`. 到目前为止，我可以逐字节阅读，但这不是我想要的。我想要一个可变长度读取，我的意思是如果发送 3 个字节我只想读取 3 个字节，如果发送 9 个字节我想读取 9 个字节。

*这是我的代码：*

```
package com.example.wettkampftimerbt;

import java.io.DataInputStream;
import java.io.DataOutputStream;
import java.io.IOException;
import java.io.OutputStream;
import java.net.InetSocketAddress;
import java.net.Socket;
import java.net.SocketAddress;
import java.net.URL;

import android.content.Context;
import android.os.AsyncTask;
import android.os.StrictMode;
import android.util.Log;

public class network extends AsyncTask<URL, String, String> {

    private final String PREFS_NAME = "prefs", W2 = "w2", W3 = "w3", W4 = "w4",
            W5 = "w5", W6 = "w6", SENDBEG = "sendbeg", SENDEND = "sendend";
    int w1, w2, w3, w4, w5, w6, w7, w8, sendend, sendbeg, diny1, diny2, diny3,
            diny4, diny5, diny6, diny7, diny8, dinymin, dinysek, w90, w91, w92,
            w93, w94, w95, w96, w97, netpru, y, retries, length, btw1 = 0,
            btw2 = 0, btw3 = 0, btw4 = 0, btw5 = 0, btw6 = 0, btw7 = 0,
            btw8 = 0, btw9 = 0, btw10 = 0;
    boolean visi1, visi2, visi3, visi4, visi5, visi6, visi7, visi8, login1,
            login2, login3, login4, login5, login6, login7, login8, data;
    Context context;
    private final String LFDNR1 = "lfdnr1";
    private final String LFDNR2 = "lfdnr2";
    private final String LFDNR3 = "lfdnr3";
    private final String LFDNR4 = "lfdnr4";
    private final String LFDNR5 = "lfdnr5";
    private final String LFDNR6 = "lfdnr6";
    private final String LFDNR7 = "lfdnr7";
    private final String LFDNR8 = "lfdnr8", COMMAND = "command", LANE = "lane",
            DINYMIN = "dinymin", DINYSEK = "dinysek";
    Socket sock;
    byte[] btw;
    byte[] bta;

    protected String doInBackground(URL... params) {
        retries = 1;
        try {
            getPrefs(context);
            btw1 = sendbeg;
            btw2 = w2;// to
            btw3 = w3;// from
            btw4 = w4;// lfdnr
            btw5 = w5;// command
            visi(context, false);
            SocketAddress sockaddr = new InetSocketAddress("192.168.0.7", 2001);
            sock = new Socket();
            int timeout = 1000; // 1000 millis = 1 second
            sock.connect(sockaddr, timeout);
            sock.setReuseAddress(true);
            System.out.println(sock);

                        //from here

        if (sock.isConnected()) {
            DataOutputStream dos = new DataOutputStream(
                    (OutputStream) sock.getOutputStream());
            DataInputStream dis = new DataInputStream(sock.getInputStream());
            BufferedReader rdr = new BufferedReader(new InputStreamReader(dis));
            getByte((byte) btw1, (byte) btw2, (byte) btw3, (byte) btw4,
                    (byte) btw5, (byte) btw6, (byte) btw7, (byte) btw8,
                    (byte) btw9, (byte) btw10);
            dos.write(btw, 0, length); 
            int in = rdr.read();
            dos.flush();
            dos.close();
            dis.close();

                                 //to here edited

                System.out.printf("dis: ", btw);
                visi(context, true);
                if (diny5 != 32)
                    System.out.println("ungleich");
                reccom();
                sock.close();
            }
        } catch (Exception e) {
            e.printStackTrace();

            System.out.println("IO error " + e + " lulu");
        }

        return "Done";
    }

    private byte[] getByte(byte byte1, byte byte2, byte byte3, byte byte4,
            byte byte5, byte byte6, byte byte7, byte byte8, byte byte9,
            byte byte10) {
        if (byte10 > 0) {
            btw = new byte[] { byte1, byte2, byte3, byte4, byte5, byte6, byte7,
                    byte8, byte9, byte10 };
            length = 10;
        } else if (byte9 > 0 && byte10 == 0) {
            btw = new byte[] { byte1, byte2, byte3, byte4, byte5, byte6, byte7,
                    byte8, byte9 };
            length = 9;
        } else if (byte8 > 0 && byte9 == 0 && byte10 == 0) {
            btw = new byte[] { byte1, byte2, byte3, byte4, byte5, byte6, byte7,
                    byte8 };
            length = 8;
        } else if (byte7 > 0 && byte8 == 0 && byte9 == 0 && byte10 == 0) {
            btw = new byte[] { byte1, byte2, byte3, byte4, byte5, byte6, byte7 };
            length = 7;
        } else if (byte6 > 0 && byte7 == 0 && byte8 == 0 && byte9 == 0
                && byte10 == 0) {
            btw = new byte[] { byte1, byte2, byte3, byte4, byte5, byte6 };
            length = 6;
        } else if (byte5 > 0 && byte6 == 0 && byte7 == 0 && byte8 == 0
                && byte9 == 0 && byte10 == 0) {
            btw = new byte[] { byte1, byte2, byte3, byte4, byte5 };
            length = 5;
        } else if (byte4 > 0 && byte5 == 0 && byte6 == 0 && byte7 == 0
                && byte8 == 0 && byte9 == 0 && byte10 == 0) {
            btw = new byte[] { byte1, byte2, byte3, byte4 };
            length = 4;
        } else if (byte3 > 0 && byte4 == 0 && byte5 == 0 && byte6 == 0
                && byte7 == 0 && byte8 == 0 && byte9 == 0 && byte10 == 0) {
            btw = new byte[] { byte1, byte2, byte3 };
            length = 3;
        } else if (byte2 > 0 && byte3 == 0 && byte4 == 0 && byte5 == 0
                && byte6 == 0 && byte7 == 0 && byte8 == 0 && byte9 == 0
                && byte10 == 0) {
            btw = new byte[] { byte1, byte2 };
            length = 2;
        } else if (byte1 > 0 && byte2 == 0 && byte3 == 0 && byte4 == 0
                && byte5 == 0 && byte6 == 0 && byte7 == 0 && byte8 == 0
                && byte9 == 0 && byte10 == 0) {
            btw = new byte[] { byte1 };
            length = 1;
        } else if (byte1 == 0 && byte2 == 0 && byte3 == 0 && byte4 == 0
                && byte5 == 0 && byte6 == 0 && byte7 == 0 && byte8 == 0
                && byte9 == 0 && byte10 == 0) {
            btw = new byte[] {};
            length = 0;
        }
        return btw;
    }

    public void onPreExecute(Context context) {
        System.out.println("network_onPreExecute");
        getPrefs(context);
    }

    public void getPrefs(Context context) {
        w2 = 0;
        w3 = 0;
        w4 = 0;
        w5 = 0;
        w6 = 0;
        System.out.println("network_getPrefs");
        System.out.println(context);
        w2 = Integer.valueOf(context.getSharedPreferences(PREFS_NAME,
                Context.MODE_PRIVATE).getString(W2, "03"));
        context.getSharedPreferences(PREFS_NAME, Context.MODE_PRIVATE).edit().remove(W2).commit();
        w3 = Integer.valueOf(context.getSharedPreferences(PREFS_NAME,
                Context.MODE_PRIVATE).getString(W3, "00"));
        context.getSharedPreferences(PREFS_NAME, Context.MODE_PRIVATE).edit().remove(W3).commit();
        w4 = Integer.valueOf(context.getSharedPreferences(PREFS_NAME,
                Context.MODE_PRIVATE).getString(W4, "00"));
        context.getSharedPreferences(PREFS_NAME, Context.MODE_PRIVATE).edit().remove(W4).commit();;
        w5 = Integer.valueOf(context.getSharedPreferences(PREFS_NAME,
                Context.MODE_PRIVATE).getString(W5, "49"));
        context.getSharedPreferences(PREFS_NAME, Context.MODE_PRIVATE).edit().remove(W5).commit();
        w6 = Integer.valueOf(context.getSharedPreferences(PREFS_NAME,
                Context.MODE_PRIVATE).getString(W6, "00"));
        context.getSharedPreferences(PREFS_NAME, Context.MODE_PRIVATE).edit().remove(W6).commit();
        sendbeg = Integer.valueOf(context.getSharedPreferences(PREFS_NAME,
                Context.MODE_PRIVATE).getString(SENDBEG, "00"));
        context.getSharedPreferences(PREFS_NAME, Context.MODE_PRIVATE).edit().remove(SENDBEG).commit();
        sendend = Integer.valueOf(context.getSharedPreferences(PREFS_NAME,
                Context.MODE_PRIVATE).getString(SENDEND, "00"));
        context.getSharedPreferences(PREFS_NAME, Context.MODE_PRIVATE).edit().remove(SENDEND).commit();
    }

    public network(Context context) {
        System.out.println("network_Context");
        onPreExecute(context);
        this.context = context;
        StrictMode.ThreadPolicy policy = new StrictMode.ThreadPolicy.Builder()
                .permitAll().build();
        StrictMode.setThreadPolicy(policy);
    }
} 
```

我什至感谢代码优化提示。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T10:43:35.043

```
try(FileInputStream in = new FileInputStream(accountFile);
    BufferedReader rdr = new BufferedReader(new InputStreamReader(in))
   )
{
    String in = rdr.readLine();
} 
```

这是我的项目的一部分，它正在做你想要的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-04T11:44:02.313

您正在寻找的方法是`DataInputStream.readFully().`

# matlab - 在 MATLAB 中生成随机加权邻接矩阵

> ID：14684966
> 
> 赞同：2
> 
> 时间：2013-02-04T10:39:39.543
> 
> 标签：matlab, random, sparse-matrix, adjacency-matrix

我想在 MATLAB 中创建一个随机邻接矩阵，使得权重的总和等于边数。最后找到拉普拉斯矩阵使用

```
L = diag(sum(A)) - A 
```

然后绘制它。有什么办法吗？提前致谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-07T06:08:15.217

无向图的邻接矩阵只是一个对称方阵。
如果您仅在权重上对节点的度数没有限制，那么我会建议类似

```
n ; % number of nodes in the graph
density = 1e-3; % a rough estimate of the amount of edges       
A = sprand( n, n, density ); % generate adjacency matrix at random
% normalize weights to sum to num of edges
A = tril( A, -1 );    
A = spfun( @(x) x./nnz(A), A );    
% make it symmetric (for undirected graph)
A = A + A.'; 
```

我在这段代码中使用过：

*   [`sprand`](http://www.mathworks.com/help/matlab/ref/sprand.html)生成随机稀疏矩阵。
*   [`spfun`](http://www.mathworks.com/help/matlab/ref/spfun.html)帮助标准化边缘权重。
*   [`tril`](http://www.mathworks.com/help/matlab/ref/tril.html)只提取一半的矩阵。

# python - 如何导出虚拟环境？

> ID：14684968
> 
> 赞同：69
> 
> 时间：2013-02-04T10:39:43.197
> 
> 标签：python, django, virtualenv

我是 virtualenv 的新手，但我正在编写 django 应用程序，最后我必须以某种方式部署它。

因此，假设我的应用程序在我安装了所有必需库的本地 virtualenv 上运行。我现在想做的是运行某种脚本，它将使用我的 virtualenv，检查里面安装了什么并生成一个脚本，将所有这些库安装在其他机器上的新 virtualenv 上。如何做到这一点？请帮忙。

* * *

## 回答 #1

> 赞同：133
> 
> 时间：2013-02-04T10:43:09.593

你不要复制粘贴你的 virtualenv。您导出所有已安装软件包的列表，例如 -

```
pip freeze > requirements.txt 
```

然后将`requirements.txt`文件推送到您想要部署代码的任何地方，然后执行您在开发机器上所做的操作 -

```
$ virtualenv <env_name>
$ source <env_name>/bin/activate
(<env_name>)$ pip install -r path/to/requirements.txt 
```

在那里，您已经安装了具有确切版本的所有软件包。

您还可以查看[Fabric](http://docs.fabfile.org/en/1.5/)以自动执行此任务，其功能如下 -

```
def pip_install():
    with cd(env.path):
        with prefix('source venv/bin/activate'):
            run('pip install -r requirements.txt') 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2017-10-20T21:26:25.733

您可以安装 virtualenvwrapper 并尝试[cpvirtualenv](https://virtualenvwrapper.readthedocs.io/en/latest/command_ref.html#cpvirtualenv)，但开发人员在这里建议谨慎：

> 警告
> 
> 不很好地支持复制虚拟环境。每个 virtualenv 都有硬编码到其中的路径信息，并且可能存在复制代码不知道它需要更新特定文件的情况。谨慎使用。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2016-04-19T11:06:11.850

如果它将在同一路径上，您可以将其 tar 并在另一台机器上解压。如果目标机器上所有相同的依赖项、库等都可用，它将起作用。

# emacs - 无法打开加载文件：/yasnippet

> ID：14684971
> 
> 赞同：2
> 
> 时间：2013-02-04T10:39:51.817
> 
> 标签：emacs, yasnippet

每次启动 emacs 时都会收到此消息

```
Emacs 24.2
Win7 64 and Ubuntu 12.10
yasnippet 0.8.0 installed with package-list 
```

如果有办法解决它？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-11-17T19:11:45.800

使用 elpa 安装时，yasnippet 不会自动初始化，我觉得这是非常规的。您仍然需要将 yasnippet 目录添加到您的加载路径中。

这是我在 .emacs 中的设置

```
;; yasnippet
(add-to-list 'load-path "~/.emacs.d/elpa/yasnippet-0.8.0")
(require 'yasnippet)
(setq yas-snippet-dirs '("~/.emacs.d/elpa/yasnippet-0.8.0/snippets" "~/Dropbox/Applications/Customise/emacs/myyassnipets"))
(yas-global-mode 1) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-04T11:36:19.820

`load`如果您正在调用或`load-file`在您的 init.el 中使用错误的路径，我希望看到这种消息。寻找这些功能的任何用途，并在可能的情况下更正路径。

如果这是在您控制的代码中，您可能希望调用`(require 'yasnippet)`而不是直接加载文件。

# jquery - asp.net 从静态函数访问控件

> ID：14684974
> 
> 赞同：3
> 
> 时间：2013-02-04T10:40:04.803
> 
> 标签：jquery, asp.net, static-methods

我有一个网络表单，在该网络表单中，我试图从静态方法访问 Panel 对象，但无法访问它如何从静态方法访问 Panel 对象。为什么我要尝试从静态访问对象？因为我使用的是只接受静态方法的 JQUERY。

我试图将 Panel 存储在 Page_Load() 的会话中并从静态方法中检索它，但它不起作用。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-10-08T18:19:24.097

```
public static void DoSomething()
{
    if (HttpContext.Current != null)
    {
        Page page = (Page)HttpContext.Current.Handler;
        TextBox TextBox1 = (TextBox)page.FindControl("TextBox1");

        TextBox TextBox2 = (TextBox)page.FindControl("TextBox2");
    }
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-04T10:47:19.547

您可能在 aspx 页面中使用*web 方法*从 jQuery 调用它`ajax()`。您无法访问 Web 方法中的控件，而是通过`ajax`调用将信息传递给您的 Web 方法并将信息从`web method`jQuery ajax返回`callback`并在 javascript jQuery 回调函数中的面板上执行操作。

# c# - 跟踪我的 linq2sql 数据模型中的更改，而无需将实体映射到数据库表

> ID：14684990
> 
> 赞同：1
> 
> 时间：2013-02-04T10:40:52.837
> 
> 标签：c#, linq-to-sql

我正在尝试使用 linq-to-sql，这对我来说都是全新的。

我正在我的数据库中创建不会转换为实际表的对象。本质上，我有一些对象，它们从 3 个不同的表中获取值，然后我使用存储过程选择它们。它工作得很好。

但是，当我需要提交我的更改时，我认为`SubmitChanges()`不会工作，我需要制作自己的保存功能。

但是我如何看到实际发生了哪些变化？如果我调用`GetChangeSet()`我的数据上下文，它说没有任何改变，即使模型已经改变。

我需要手动跟踪更改吗？如果是这样，我可以使用任何技巧或做法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T14:38:51.530

LinQ to Sql 通过自动生成的代码跟踪更改。您可以通过在 linq-to-sql 生成的对象类型上按 F12 来查看它。

此外，您可以研究它并使您的对象以生成器的方式保存数据上下文（这也是一个工作单元）中的更改。

# java - android问题连接到WiFi上的socket成功但在3g中不成功

> ID：14684993
> 
> 赞同：1
> 
> 时间：2013-02-04T10:40:58.007
> 
> 标签：java, android, sockets, url, httpurlconnection

我正在制作一个 android 应用程序，通过 ip 和端口检查与 PC 的连接。

我有一堂课，我通过了 ip 和端口。然后我有一个方法可以返回一个布尔值，如果连接正常与否。

问题来了 wifi 工作正常，但使用 3g 方法总是返回 true

像这样的方法：

```
 public boolean PingWithPort(){

    int[] AResult = new int[2];
    int countResOk = 0;
    boolean result = false;
    if(!hostName.equals("")){

        for(int positionResult = 0; positionResult < 1; positionResult ++){     
            try {
                    try{

                        Socket echoSocket = null;
                        echoSocket = new Socket(hostName, puerto);
                        echoSocket.setSoTimeout(1000);

                        if(echoSocket.isConnected()){
                            AResult[positionResult] = 1;
                        }else{
                            AResult[positionResult] = 0;                            
                        }
                        echoSocket.close();

                    }catch(IOException e){
                        AResult[positionResult] = 0;
                    }catch(Exception e){
                        AResult[positionResult] = 0;
                    }
            } catch (Exception e) {
                AResult[positionResult] = 0;
                e.printStackTrace();
            } 
        }

            for(int controlResult = 0; controlResult < AResult.length-1; controlResult++){
                if(AResult[controlResult] == 1){
                    countResOk++;
                }
            }
            if(countResOk >= 1){
                result = true;
            }else{
                result = false;
            }
    }else{
        result = false;
    }
    return result;
} 
```

那么如何解决这个问题呢？

非常感谢。我花了几天时间寻找解决方案。

我找到的解决方案是这样的：

```
public boolean PingWithPort(){
    int[] AResult = new int[2];
    int countResOk = 0;
    boolean result = false;

    if(!hostName.equals("")){
        for(int positionResult = 0; positionResult < 1; positionResult ++){ 
            try {
                    try{

                        URL url = new URL("http://"+hostName+":"+puerto);
                        HttpURLConnection urlc = (HttpURLConnection) url.openConnection();

                        urlc.setConnectTimeout(3000);
                        urlc.setReadTimeout(3000);

                        urlc.connect();
                        if (urlc.getResponseCode() >= -1) {
                            AResult[positionResult] = 1; 
                        }else{
                            AResult[positionResult] = 0;
                        }
                    }catch(Exception e){
                        AResult[positionResult] = 0;
                    }

            } catch (Exception e) {
                AResult[positionResult] = 0;
                e.printStackTrace();
            } 
        } 
```

打开一个 HTTP 连接并检查您是否可以打开。

# javascript - 拆分字符串并进行加法、乘法等

> ID：14684997
> 
> 赞同：1
> 
> 时间：2013-02-04T10:41:20.230
> 
> 标签：javascript, ajax

我有一个像`10+20*30-40/2`. 是否可以拆分此字符串并`+`进行加法或`*`乘法等计算？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-04T10:43:05.420

您可以使用该`eval`功能非常轻松地做到这一点......

```
var answer = eval("10+20*30-40/2");
alert(answer); 
```

[这是一个工作示例](http://jsfiddle.net/m42qQ/)

但是你应该小心，因为如果你接受用户输入这个字符串，那么它可能是恶意的。