# StackOverflow 问答 13103000-13103999

# php - PHP处理API不超过其限制？

> ID：13103003
> 
> 赞同：1
> 
> 时间：2012-10-27T18:34:58.953
> 
> 标签：php, api, function, caching, oauth

我想知道我该怎么做才能不对 API 进行多次调用？例如，如果我尝试使用 yelp 的 api，他们会在超出之前限制调用次数（一旦超出该数量，他们就会停止向您提供信息）。

我能做些什么？现在，我在从他们的网站获取信息所需的每个页面中都有这个（来自他们的 API PHP 示例）：

```
// For example, request business with id 'the-waterboy-sacramento'
//$unsigned_url = "http://api.yelp.com/v2/business/the-waterboy-sacramento";

// For examaple, search for 'tacos' in 'sf'
//$unsigned_url = "http://api.yelp.com/v2/search?term=tacos&location=sf";

// My own code
$unsigned_url = "http://api.yelp.com/v2/search?term=".$term."";
// $term is coming from searching

// Set your keys here
$consumer_key = "some_id";
$consumer_secret = "some_id";
$token = "some_id";
$token_secret = "some_id";

// Token object built using the OAuth library
$token = new OAuthToken($token, $token_secret);

// Consumer object built using the OAuth library
$consumer = new OAuthConsumer($consumer_key, $consumer_secret);

// Yelp uses HMAC SHA1 encoding
$signature_method = new OAuthSignatureMethod_HMAC_SHA1();

// Build OAuth Request using the OAuth PHP library. Uses the consumer and token object created above.
$oauthrequest = OAuthRequest::from_consumer_and_token($consumer, $token, 'GET', $unsigned_url);

// Sign the request
$oauthrequest->sign_request($signature_method, $consumer, $token);

// Get the signed URL
$signed_url = $oauthrequest->to_url();

// Send Yelp API Call
$ch = curl_init($signed_url);
curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
curl_setopt($ch, CURLOPT_HEADER, 0);
$data = curl_exec($ch); // Yelp response
curl_close($ch); 
```

当我想打电话给某个企业时，在每一页都这样做似乎有点过分。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-27T18:42:04.733

我不使用它，但作为一般答案，**考虑将数据缓存在数据库中以减少 API 调用**。它还将提高您网站的性能，尤其是在需要来自 API 的相同数据的同一页面多次加载时。

**这是一个基于文件的通用实现**

```
/**
* Cache friendly function call stub.
* 
* @param callback $Callback
* @param array $Arguments
* @param integer $Expiration
* @return mixed
*/
function CallFunctionAndCacheResult($Callback, array $Arguments, $Expiration = 3600){
    // Validate $Callback
    if(!is_callable($Callback)){
        trigger_error('$Callback must be a callback.', E_USER_WARNING);
        return false;
    }
    // Validate $Arguments (we need some to hash)
    if(empty($Arguments)){
        trigger_error('$Arguments cannot be empty.', E_USER_WARNING);
        return false;
    }
    // Empty $Expiration means live calls
    if(empty($Expiration)){
        return call_user_func_array($Callback, $Arguments);
    }
    // Validate $Expiration (we need some to hash)
    if(!is_numeric($Expiration) or (($Expiration = intval($Expiration)) < 1)){
        trigger_error('$Expiration has to be a positive integer.', E_USER_WARNING);
        return false;
    }
    // Hash the Arguments (Unique Call ID)
    $Hash = md5(serialize($Arguments));
    // Check if Cache file exists
    if(is_file($Cache = dirname(__FILE__)."/{$Hash}.serial")){
        // Test if file expired
        if(($MTime = filemtime($Cache)) >= (time() - $Expiration)){
            // Attempt to load data, assume it's corrupted
            if(($Data = unserialize(file_get_contents($Cache))) !== false){
                return $Data;
            }
        }
    }
    // Now regenerate the data if you got here
    $Data = call_user_func_array($Callback, $Arguments);
    // Store it, with  LOCK_EX enabled to prevent collisions
    file_put_contents($Cache, serialize($Data), LOCK_EX);
    // Return the data
    return $Data;
}

// Test case (store current time for 10 seconds, keep refreshing)
var_dump($Data = CallFunctionAndCacheResult(function(){
    // Return some data to be cached
    return array_merge(func_get_args(), array(
        'cached'    => gmstrftime('%A, %d %B %Y %H:%M:%S'),
    ));
}, array(
    'Username',
    'Password',
    // ...
), 10)); 
```

**希望这是有道理的。**只需对其进行测试，弄清楚并使用数据库引擎来获得相同的结果。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-27T19:47:26.440

缓存是你的朋友。当您认为您一遍又一遍地执行不需要的 API 查询时，您应该将信息缓存到 cookie（如果它是次要/非关键的），或者缓存到数据库。

就像，如果用户希望刷新我运行查询以获取他的名字的页面，我不想超出限制。你可以得到他的名字一次，把它存储到一个 cookie 中，然后使用它而不是每次都查询。就像另一个答案所说，更快，更高效。

# mysql - MySQL 逻辑操作 SELECT 查询

> ID：13103004
> 
> 赞同：3
> 
> 时间：2012-10-27T18:35:04.023
> 
> 标签：mysql, select

我有以下查询。

```
SELECT 
    f.id, f.food_name, tm.resource_id, tm.tag_id, t.name
FROM 
    tag as t, tagmap as tm
JOIN 
    item as f 
    ON 
    (
    f.id = tm.resource_id AND tm.tag_id = 
        (
        SELECT 
            t.tag_id 
        FROM 
            tag as t 
        WHERE 
            t.name LIKE '%meat%' OR t.name LIKE '%vegan%'
        ) 
    )
GROUP by f.id 
```

我相信错误是一致的

```
f.id = tm.resource_id AND tm.tag_id = 
```

它正在寻找单个 tag_id 并收到许多错误：*执行 SQL 语句时出错*

接收 tag_id 数组的过程是什么？我知道此语句适用于单个 ID，因为如果我删除第二个 WHERE 条件，则查询有效。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-27T18:37:28.943

使用`IN`关键字：

```
...
AND tm.tag_id IN -- Changed  = to IN here
    (
    SELECT 
        t.tag_id 
    FROM 
        tag as t 
    WHERE 
        t.name LIKE '%meat%' OR t.name LIKE '%vegan%'
    ) 
... 
```

您遇到的基本问题是 select 会返回多行，当它返回时，语句会爆炸，因为`=`只能处理一个值。

# c# - 提交后如何保持模式对话框？

> ID：13103006
> 
> 赞同：0
> 
> 时间：2012-10-27T18:35:08.823
> 
> 标签：c#, javascript, jquery, asp.net-mvc-4, modal-dialog

我正在尝试创建一种方法，以便在单击提交按钮或链接时进行提交并保持在相同的模式对话框中。我的程序在同一个对话框中有两个表单，一个在提交第一个表单之前不显示，我希望在同一个对话框中提交第一个表单加载。

对于加载对话框，我有以下代码：

```
function loadDialog(tag, event, target) {
        event.preventDefault();
        var $loading = $('<img src="../../Content/assets/images/nivo-loader.gif" alt="loading" class="ui-loading-icon">');
        var $url = $(tag).attr('href');
        var $title = $(tag).attr('title');
        var $dialog = $('<div></div>');
        $dialog.empty();
        $dialog
        .append($loading)
        .load($url)
        .dialog({
            autoOpen: false
            , title: $title
            , width: 600
            , modal: true
            , minHeight: 200
            , show: 'fade'
            , hide: 'fade'
        });
}); 
```

然后在 Create.cshtml 中：

```
@model Mvcproject.Models.MyModel
<script language="javascript" type="text/javascript">
$(function () {
    $("input[type=submit]")
        .button(
        );
    $('a.modalDlg2').live("click", function (event) { loadDialog('#modalDlg', event, '#Receipt Create'); });

    /*$('input.Submit').live("click", function (event) {
        e.preventDefault();
        loadDialog('#modalDlg', event, '#Receipt Create');
    });*/

    $(".demo button").button({
        icons:
    {
        primary: 'ui-icon-plusthick'
    }
    });
});
</script>
<h2>
Add line</h2>
@using (Html.BeginForm())
{
@Html.ValidationSummary(true)

<fieldset class="createReceipt">
    <legend>User login</legend>
    @if (ViewBag.Created)
    {
        <table class="createTable">
            <tr>
                <td rowspan="4">
                    <img src="../../Images/no_image.jpg" width="100" height="100" />
                </td>
                <th colspan="1">
                    @Html.LabelFor(model => model.User.Name)
                </th>
                <td colspan="5">
                    @Html.EditorFor(model => model.User.Name)
                    @Html.ValidationMessageFor(model => model.User.Name)
                </td>
            </tr>
            <tr>
                <th colspan="1">
                    @Html.LabelFor(model => model.User.Email)
                </th>
                <td colspan="5">
                    @Html.EditorFor(model => model.User.Email)
                    @Html.ValidationMessageFor(model => model.User.Email)
                </td>
            </tr>
            <tr>
                <th colspan="1">
                    @Html.LabelFor(model => model.User.Password)
                </th>
                <td colspan="5">
                    @Html.EditorFor(model => model.User.Password)
                    @Html.ValidationMessageFor(model => model.User.Password)
                </td>
            </tr>
            <!--User picture-->
            <tr>
                <td>
                    <input type="file" value="browse" name="Browse" accept="image/gif, image/jpeg, image/jpg" />
                </td>
            </tr>
        </table>
        <p>
            <input type="submit" class="Submit" value="Create" />
            <buttonreceipt style="width: 150px; text-align: left">@Html.ActionLink("Create", "Create")</buttonreceipt>
        </p>
    }
    else
    { 
        <!-- This will be displayed when user data is submited and inserted into database-->
        <table class="createTable">
            <tr>
                <th colspan="1">
                    @Html.LabelFor(model => model.User.Name)
                </th>
                <td colspan="5">
                    @Html.DisplayFor(model => model.User.Name)
                </td>
            </tr>
            <tr>
                <th colspan="1">
                    @Html.LabelFor(model => model.User.Email)
                </th>
                <td colspan="5">
                    @Html.DisplayFor(model => model.User.Email)
                </td>
            </tr>
            <tr>
                <td colspan="1">
                    <img src="@Model.User.Picture"/>
                </td>
            </tr>
        </table>
    }
</fieldset>        

}
@if (!ViewBag.Created)
{
    @Html.Partial("_AddUserInformation");
} 
```

ViewBag.Created 是 false 还是 true，具体取决于用户数据是否已成功插入数据库以及该功能是否已完成。
_AddUserInformation.cshtml 为尝试注册的用户提供了其他信息，例如地址和国家/地区……
希望这能更好地解释我的问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-27T18:45:57.227

您可以使用 jQuery post() 函数将数据发送到地址。您需要使用 jQuery 选择器手动从字段中挑选数据（应该不难），并配置一个函数来接收和处理数据。帖子上的此链接应该为您提供入门所需的内容。[http://api.jquery.com/jQuery.post/](http://api.jquery.com/jQuery.post/)

# cobol - Cobol 不是数字名称

> ID：13103007
> 
> 赞同：0
> 
> 时间：2012-10-27T18:35:10.920
> 
> 标签：cobol, gnucobol

我在使用一些 cobol 代码时遇到了一些麻烦。在下面的代码中，它会导致这两个错误。当我尝试添加时，编译器不喜欢。

> ```
> CH7PPB.CBL:158: Error: 'NEW-DUES' is not numeric name
> CH7PPB.CBL:161: Error: 'NEW-INSURANCE' is not numeric name 
> ```

```
 MOVE UNION-DUES TO OLD-DUES
   MULTIPLY UNION-DUES BY .04 GIVING NEW-DUES
   ADD UNION-DUES TO NEW-DUES
   MOVE INSURANCE TO OLD-INSURANCE
   MULTIPLY INSURANCE BY .03 GIVING NEW-INSURANCE
   ADD INSURANCE TO NEW-INSURANCE 
```

NEW-DUES 和 NEW-INSURANCE 定义如下。

```
 05   NEW-DUES                       PIC Z9(4).99.
       05   NEW-INSURANCE                  PIC Z9(4).99. 
```

感谢您的任何帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-27T19:15:58.100

我很高兴你已经解决了这个问题。

仅作记录，您不能在计算中使用已编辑的格式。两个变量的字符串中的字符“Z”`PICTURE`将变量转换为编译器不认为是数字的。

您确实必须声明一个完整的数字变量（无格式）并将其结果值移动到之后的格式化变量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-27T18:49:05.770

通过使用两个临时变量解决了这个问题，不确定这是否是这样做的方法，但它确实有效。

```
 MOVE ANNUAL-SALARY TO OLD-SALARY
           MULTIPLY ANNUAL-SALARY BY .07 GIVING TEMP
           ADD ANNUAL-SALARY,TEMP TO TEMP2
           MOVE TEMP2 TO NEW-SALARY
           MOVE ZEROS TO TEMP, TEMP2
           MOVE UNION-DUES TO OLD-DUES
           MULTIPLY UNION-DUES BY .04 GIVING TEMP
           ADD UNION-DUES,TEMP TO TEMP2
           MOVE TEMP2 TO NEW-DUES
           MOVE ZEROS TO TEMP, TEMP2
           MOVE INSURANCE TO OLD-INSURANCE
           MULTIPLY INSURANCE BY .03 GIVING TEMP
           ADD INSURANCE,TEMP TO TEMP2
           MOVE TEMP2 TO NEW-INSURANCE
           MOVE ZEROS TO TEMP, TEMP2 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-20T00:55:09.203

除了 NealB 建议的 COMPUTE 之外：

```
 MOVE ANNUAL-SALARY TO OLD-SALARY
       MULTIPLY ANNUAL-SALARY BY 1.07 GIVING NEW-SALARY
       MOVE UNION-DUES TO OLD-DUES
       MULTIPLY UNION-DUES BY 1.04 GIVING NEW-DUES
       MOVE INSURANCE TO OLD-INSURANCE
       MULTIPLY INSURANCE BY 1.03 GIVING NEW-INSURANCE 
```

在所示代码中使用 TEMP2 特别糟糕。它首先依赖于它的初始值（可能是一个 VALUE 子句），第二次依赖于块末尾的“MOVE ZEROS TO TEMP, TEMP2”。这是一个不好的方法。TEMP 的重复初始化毫无意义，因为 TEMP 始终是 GIVING 的“目标”，因此它在 MULTIPLY 时的值是无关紧要的。

# java - Android：我如何在文本字段中实现警告

> ID：13103008
> 
> 赞同：2
> 
> 时间：2012-10-27T18:35:18.707
> 
> 标签：java, android, text, field

如何在 android 中这样的文本字段中实现警告：

![](../Images/f1f62d1bd3ddf7ea9f5ce08a4c824945.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-27T20:58:42.263

只需使用 TextView.setError 方法。

```
textView.setError("Field can't be blank"); 
```

这将显示错误消息，如图所示，带有默认错误图标。您甚至可以使用 setError 方法的第二个变体来更改图标。

```
public void setError (CharSequence error, Drawable icon) 
```

要清除错误，只需将 null 作为方法参数传递。

```
textView.setError(null); 
```

更多细节检查： http: [//developer.android.com/reference/android/widget/TextView.html#setError(java.lang.CharSequence)](http://developer.android.com/reference/android/widget/TextView.html#setError(java.lang.CharSequence))

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-27T18:45:58.470

除了使用 Toast 之外，您还可以随时使用新的 Crouton 库：

[http://www.grokkingandroid.com/useful-android-libraries-crouton/](http://www.grokkingandroid.com/useful-android-libraries-crouton/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-27T18:40:48.787

**-**你可以用它`Toast`来做到这一点。

**请参阅此链接：**

[http://www.mkyong.com/android/android-toast-example/](http://www.mkyong.com/android/android-toast-example/)

**-**您也可以使用它`AlertDialog`来执行此操作。

[http://www.mkyong.com/android/android-alert-dialog-example/](http://www.mkyong.com/android/android-alert-dialog-example/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-27T18:42:53.377

使用`Toast.makeText()`如下：

```
 try{
    .....
    ....
  }catch(NullPointerException ex){ //<--Exception when you want to show the message
      Toast.makeText(getApplicationContext(), ex.getMessage(), 100).show(); 
  } 
```

对于验证消息：

```
 if(textFieldValue == null || "".equals(textFieldValue)){
     Toast.makeText(getApplicationContext(), "Field can't be blank", 100).show(); 
  } 
```

# java - FileStat 行为在 1.7.3 中更改

> ID：13103015
> 
> 赞同：2
> 
> 时间：2012-10-27T18:36:06.190
> 
> 标签：java, google-app-engine

升级到 GAE (Java) 1.7.3 时，此测试开始针对本地 GAE 实例失败：

```
@Test
public void testStats() throws Exception {
   AppEngineFile file = service.createNewBlobFile("text/plain", "records123.txt");
   writeToFileAndFinalize(file, "This is content.");
   FileStat stat = service.stat(file);
   Assert.assertNotNull(stat);
   Assert.assertTrue(stat.isFinalized());
   Assert.assertEquals("records123.txt", stat.getFilename());
   Assert.assertTrue(stat.getLength() > 0);
} 
```

失败的测试：testStats(org.jboss.test.capedwarf.files.test.FilesTestCase)：预期：<[records123.txt]> 但是是：<[/blobstore/writable:R45VqzenfR-tGfHPVFWa-A]>

错误或功能？

# macos - 在 Mac 上删除 Qt 库

> ID：13103017
> 
> 赞同：7
> 
> 时间：2012-10-27T18:36:44.130
> 
> 标签：macos, qt4, libraries, uninstallation

我想删除已安装的 Qt 4.8 库并在我的 Mac 上安装 Qt 4.6 库。

但是当我尝试安装它们时，我得到：

> “无法在此磁盘上安装 Qt 库。此磁盘上已存在此软件的较新版本”

我*`/usr/local/Qt4.8.x`*从磁盘中删除了该文件夹，但消息仍然存在。

如何删除旧库？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-10-28T05:56:28.123

除非没有其他选项，否则不应手动删除文件夹。您应该先尝试运行卸载脚本：

```
sudo python /Developer/Tools/uninstall-qt.py 
```

如果您运行的是最新的 Xcode 应用程序包而不是默认的 Snow Leopard/Lion Xcode，则此脚本的路径会有所不同。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2020-04-06T07:23:51.040

我通过自制软件安装了 qt。要删除，我只是在终端中写了以下内容：`brew uninstall qt@4`

# cmake - 如何将 ${CMAKE_CURRENT_SOURCE_DIR} 添加到变量中的所有文件？

> ID：13103018
> 
> 赞同：2
> 
> 时间：2012-10-27T18:36:46.050
> 
> 标签：cmake

我有带有子目录的项目，我想将每个目录的源列表分开。

我有：

```
SET( SUBDIR_SOURCES
  ${CMAKE_CURRENT_SOURCE_DIR}/a.cpp
  ${CMAKE_CURRENT_SOURCE_DIR}/b.cpp
  ${CMAKE_CURRENT_SOURCE_DIR}/c.cpp
  PARENT_SCOPE
) 
```

我想要：

```
SET( SUBDIR_SOURCES
  a.cpp
  b.cpp
  c.cpp
  PARENT_SCOPE
)
some_magic_fuction( SUBDIR_SOURCES ${CMAKE_CURRENT_SOURCE_DIR} ) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-28T11:03:26.097

要`some_magic_function`传递源列表，首先您需要避免设置它们，`PARENT_SCOPE`因为它们在子目录的 CMakeList 范围内不可用。

您也不需要将 传递`${CMAKE_CURRENT_SOURCE_DIR}`给函数，因为无论函数本身在哪里定义，它都可以在函数内部使用。

因此，您可以执行以下操作：

```
SET( SUBDIR_SOURCES a.cpp b.cpp c.cpp )
some_magic_function( SUBDIR_SOURCES )
SET( SUBDIR_SOURCES ${SUBDIR_SOURCES} PARENT_SCOPE ) 
```

功能可能是：

```
FUNCTION( some_magic_function SOURCE_FILES )
  FOREACH( SOURCE_FILE ${${SOURCE_FILES}} )
    SET( MODIFIED ${MODIFIED} ${CMAKE_CURRENT_SOURCE_DIR}/${SOURCE_FILE} )
  ENDFOREACH()
  SET( ${SOURCE_FILES} ${MODIFIED} PARENT_SCOPE )
ENDFUNCTION() 
```

在函数内部，`${SOURCE_FILES}`是`SUBDIR_SOURCES`，所以我们需要使用`${${SOURCE_FILES}}`来获取实际的文件列表。

函数有自己的作用域，所以由于我们要替换`SUBDIR_SOURCES`函数外作用域内的值，所以需要`PARENT_SCOPE`在调用时使用`SET( ${SOURCE_FILES}...`

有关这些命令的更多信息，请运行：

```
cmake --help-command set
cmake --help-command function 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-27T20:49:05.930

我通常`CMakeLists.txt`为每个子目录编写一个小目录，它将该目录中的所有文件编译到一个库中。

在父目录中`CMakeLists.txt`，我将每个子目录添加到`add_subdirectory( blah )`.

如果您*必须*有一个指定的变量，以下应该可以工作（注意，我还没有实际测试过）：

```
MACRO( prepend_path _srcs _path )
    unset( _tmp )
    foreach( src ${_srcs} )
        list( append _tmp ${_path}/${src} )
    endforeach( src ${_srcs} )
    set( _srcs ${_tmp} )
ENDMACRO( prepend_path _srcs ) 
```

这样称呼它：

```
prepend_path( SUBDIR_SOURCES ${CMAKE_CURRENT_SOURCE_DIR} ) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-06-03T19:41:40.903

我通常也更喜欢具有自己的局部变量范围的函数，但在您的情况下，我建议您编写自己的宏命令。

因此，采用 Fraser 的代码如下所示：

```
macro( set_subdir_sources )
    foreach( SOURCE_FILE ${ARGN} )
        set( SUBDIR_SOURCES ${SUBDIR_SOURCES} ${CMAKE_CURRENT_SOURCE_DIR}/${SOURCE_FILE} )
    endforeach()
    set( SUBDIR_SOURCES ${SUBDIR_SOURCES} PARENT_SCOPE )
endmacro() 
```

或使用相对路径：

```
macro( set_subdir_sources )
    get_directory_property( _PARENTDIR PARENT_DIRECTORY )
    file( RELATIVE_PATH _SUBDIR ${_PARENTDIR} ${CMAKE_CURRENT_SOURCE_DIR} )
    foreach( SOURCE_FILE ${ARGN} )
        set( SUBDIR_SOURCES ${SUBDIR_SOURCES} ${_SUBDIR}/${SOURCE_FILE} )
    endforeach()
    set( SUBDIR_SOURCES ${SUBDIR_SOURCES} PARENT_SCOPE )
endmacro() 
```

只需致电：

```
set_subdir_sources( a.cpp b.cpp c.cpp ) 
```

无论如何，您的父母`CMakeLists.txt`都必须知道该`SUBDIR_SOURCES`变量。这还有一个优点，您可以在子目录的`CMakeLists.txt`.

但是你真的需要一个`CMakeLists.txt`一开始就没有定义自己的目标的子目录吗？我只是将源添加到您的父目录`CMakeLists.txt`：

```
set( 
  SUBDIR_SOURCES
  SubDir/a.cpp
  SubDir/b.cpp
  SubDir/c.cpp
) 
```

另请参阅[多个库和可执行文件的 CMakeLists.txt 文件](https://stackoverflow.com/questions/9673326/cmakelists-txt-files-for-multiple-libraries-and-executables)

# matlab - 测量谷宽2d，matlab

> ID：13103020
> 
> 赞同：3
> 
> 时间：2012-10-27T18:37:06.523
> 
> 标签：matlab, optimization, image-processing

我有一个 2d 图像，我有局部最小值出现的位置。我想测量“导致”这些最小值的山谷的宽度。我需要适合这些山谷的圆或椭圆的半径。附在这里的一个例子，山峰轮廓上的深红色线条是我希望找到的。谢谢。

![峰宽示例](../Images/80f626bc2ed621111f8fa6fb4dbe4baf.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-27T18:48:48.757

我建议制作一个点列表来描述椭圆边缘的值，也许是通过找到它跨越阈值的所有点。

```
above = data > threshold 
```

应用一个简单的边缘检测器

```
edges = EdgeDetector(above) 
```

找到边的坐标

```
[row,col] = find(edges) 
```

然后应用这个椭圆拟合器[http://www.mathworks.com/matlabcentral/fileexchange/3215-fitellipse](http://www.mathworks.com/matlabcentral/fileexchange/3215-fitellipse)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-27T19:22:21.650

我正在部分扩展@Lucas 的答案。

给定一个阈值`t`，我会考虑`P_m`低于`t`和接近某个`m`最小值的点`f`（给定一个特征尺度长度`r`）。

（你说你的数据是嘈杂的；要区分最小值和谈论井，你需要估计这样`r`的。在你的例子中，它可以是例如`r=4`，即最小值之间距离的一半）。

然后你必须为每个*井区* `P_m`考虑一个指标，例如

```
 metric(P_m) = .5 * mean{ maximum vertical diameter of P_m ,  
                     maximum horizontal diameter of P_m}. 
```

在你`metric(P_m) = 2`的两个井的照片中。

* * *

总的来说，就伪代码而言，您可以考虑

```
 M := set of local minima of f

 for_each(minimum m in M){

      P_m += {p : d(p,m) < r and f(r)<t}  % say that += is the push operation in a Stack

 }

 radius_of_region_around(m) = metric(P_m);  % 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-28T10:22:49.883

我在这里假设您可以访问`x`,`y`和`z`数据，并且没有处理给定的 JPG（或左右）图像。然后，您可以使用该功能`contourc`来发挥自己的优势：

```
% plot some example function
figure(1), clf, hold on    
[x,y,z] = peaks;
surf(x,y,z+10,'edgecolor', 'none')
grid on, view(44,24)

% generate contour matrix. The last entry is a 2-element vector, the last
% element of which is to ensure the right algorithm gets called (so leave 
% it untouched), and the first element is your threshold.
C = contourc(x(1,:), y(:,1), z, [-4 max(z(:))+1]);

% plot the selected points
plot(C(1,2:end), C(2,2:end), 'r.') 
```

然后使用[这个超快椭圆拟合工具](http://www.mathworks.com/matlabcentral/fileexchange/22684-ellipse-fit-direct-method)通过这些点拟合一个椭圆，并找到你想要的椭圆的所有参数。

我建议您阅读`help contourc`并`doc contourc`找出上述内容的原因，以及您可以将其用于什么其他用途。

# opengl-es - 将 OpenGL ES 1.1 渲染引擎与 QCAR 一起使用？

> ID：13103022
> 
> 赞同：2
> 
> 时间：2012-10-27T18:37:23.073
> 
> 标签：opengl-es, qcar-sdk

我想使用带有 QCAR (vuforia) 的渲染引擎来构建 AR 应用程序。是否可以合并使用 OpenGL ES 1.1 和 QCAR 的渲染引擎？

我 QCAR 正在使用 opengl 2.0 进行示例应用程序。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-27T19:13:21.873

QCAR 支持 1.x 和 2.0，但默认启用 2.0。如果您的渲染引擎仅支持 1.x，您可以通过更改以下内容轻松调整 QCAR 以使用 1.x：

```
USE_OPENGL_ES_1_1 := false 
```

在位于 JNI 文件夹下的 Android.mk 文件中设置为 TRUE。我假设您在 Android 上使用 QCAR，但对于 iOS，步骤几乎相同。

# python - 如何使用 python suds 为工厂创建的 simpletype 对象赋值？

> ID：13103023
> 
> 赞同：4
> 
> 时间：2012-10-27T18:37:22.323
> 
> 标签：python, suds

我正在使用 python suds 使用 Cisco AXL 库。我正在尝试调用一个需要使用 simpleType 的函数，它是具有名称限制的字符串的特殊实例。

成功解析 WSDL 后，我使用工厂创建对象：

```
 uuid = client.factory.create('ns0:XUUID') 
```

这是以下 XUUID 对象的一个​​实例，该对象在 WSDL 随附的 XSD 中定义如下：

```
 <xsd:simpleType name="XUUID">
 <xsd:restriction base="xsd:string">
 <xsd:pattern value="\{........-....-....-....-............\}"/>
 </xsd:restriction>
 </xsd:simpleType> 
```

我现在想设置我的 uuid 对象的值，我尝试了以下所有方法但没有成功：

```
 uuid.setText('{900AAAAC-E454-0B7E-07FD-FD67D48FF50E}')
 uuid.set('{900AAAAC-E454-0B7E-07FD-FD67D48FF50E}') 
```

很明显，如果这是一个带有子元素的 complexType，我将能够设置它们，例如 suds 文档中的 Person.name。我不知道如何设置这个对象的值。

对象的打印目录（uuid）表明我可能会以错误的方式处理这个问题。

```
 ['__contains__', '__delattr__', '__doc__', '__getitem__', '__init__', '__iter__', '__keylist__', '__len__', '__metadata__', '__module__', '__printer__', '__repr__', '__setattr__', '__setitem__', '__str__', '__unicode__'] 
```

如果我遗漏了一些基本的东西或使用完全错误的泡沫，我将在下面解释更多的上下文。

我正在尝试从 WSDL 调用以下函数：

```
 <operation name="getDevicePool">
   <input message="s0:getDevicePoolIn"/>
   <output message="s0:getDevicePoolOut"/>
 </operation>
 <message name="getDevicePoolIn">
   <part element="xsd1:getDevicePool" name="axlParams"/>
 </message> 
```

它又引用以下 XSD 元素：

```
 <xsd:element name='getDevicePool' type='axlapi:GetDevicePoolReq'></xsd:element>

 <xsd:complexType name='GetDevicePoolReq'>
 <xsd:sequence>
 <xsd:choice>
 <xsd:element name='name' type='axlapi:String100'></xsd:element>
 <xsd:element name='uuid' type='axlapi:XUUID'></xsd:element></xsd:choice>
 <xsd:element name='returnedTags' type='axlapi:RDevicePool' minOccurs='0'></xsd:element></xsd:sequence><xsd:attribute use='optional' name='sequence' type='xsd:unsignedLong'></xsd:attribute></xsd:complexType> 
```

我尝试了一种与 WSDL 中的另一个函数配合良好的方法：

```
 searchCriteria = {
         'callManagerGroupName':'Default'
 }
 devicePools = client.service.listDevicePool(searchCriteria) 
```

但它在这里不起作用，我相信这是因为我需要我的 UUID 搜索字符串是 XUUID 类型。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T01:56:25.310

工厂创建的对象通过对象属性分配值。以我自己的代码为例：

```
>>> api = gcs.provider.get_api()
>>> client = api.get_client(api.API_DOMAIN)
>>> ident = client.factory.create('ns0:Identification')
>>> ident
(Identification){
   token = None
   user = None
   userPasswd = None
   oper = None
   operPasswd = None
   language = None
 }
>>> ident.user = 'Jeremy'
>>> ident
(Identification){
   token = None
   user = "Jeremy"
   userPasswd = None
   oper = None
   operPasswd = None
   language = None
 }
>>> setattr(ident, 'user', 'Lewis')
>>> ident
(Identification){
   token = None
   user = "Lewis"
   userPasswd = None
   oper = None
   operPasswd = None
   language = None
 } 
```

您应该能够打印 uuid 对象以查看调用的属性，然后简单地分配值。

# r - 尝试从具有 R 条件的表中提取行时出错

> ID：13103035
> 
> 赞同：2
> 
> 时间：2012-10-27T18:38:15.413
> 
> 标签：r, memory-management, row, extract, conditional-statements

我正在尝试选择具有**相同 gene_id**但具有**起始坐标最小值的行：href_pos$start。**为什么我会收到此错误，即使我的内存限制为 ~ 16Gb？或者我做错了什么？我有以下代码：

> 头（href_pos，5）

```
 chr      region    start      end strand nu   gene_id
1  chr1 start_codon 67000042 67000044      +  . NM_032291
2  chr1         CDS 67000042 67000051      +  0 NM_032291
3  chr1        exon 66999825 67000051      +  . NM_032291
4  chr1         CDS 67091530 67091593      +  2 NM_032291
5  chr1        exon 67091530 67091593      +  . NM_032291 
```

> d1 <- ddply(as.data.frame(href_pos), "gene_id", function(href_pos) href_pos[which.min(href_pos$start), ])
> 错误：无法分配大小为 283 Kb 的向量另外：警告消息：
> 1：在 lapply(dfs, function(df) levels(df[[var]])) 中：达到 16383Mb 的总分配：请参阅帮助（memory.size）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-27T19:35:04.173

证明你的语法很好：

```
#Create a minimal, reproducible example
gene_id <- gl(3, 3, 9, labels <- letters[1:3])
start <- rep(1:3, 3)
href_pos <- data.frame(gene_id=gene_id, start=start)

d1 <- ddply(as.data.frame(href_pos), "gene_id", function(href_pos) href_pos[which.min(href_pos$start), ])
 gene_id  start
1      a      1
2      b      1
3      c      1 
```

正如`data.table`大通建议的那样，这应该有效：

```
require(data.table)
HREF_POS <- data.table(href_pos)
setkey(HREF_POS, gene_id)
MINS <- HREF_POS[HREF_POS[,start] %in% HREF_POS[ ,min(start), by=gene_id]$V1,] 
```

# http - 哪个 URL 应该用于子资源的 GET、PUT 和 DELETE？

> ID：13103040
> 
> 赞同：4
> 
> 时间：2012-10-27T18:38:39.863
> 
> 标签：http, rest, asp.net-web-api, url-routing

假设我有一个`parent`代表一组数据的资源。像这样的宁静 URL 结构应该非常简单：

*   GET /api/parents - 返回所有父母的集合
*   GET /api/parents/1 - 返回 id = 1 的父级
*   POST /api/parents - 向集合添加新的父级
*   PUT /api/parents/1 - 更新 id = 1 的父项中的数据
*   DELETE /api/parents/1 - 删除 id = 1 的父级

现在说每个`parent`都是由`child`资源的集合组成的。子资源 id 是否应该被视为具有全局或本地范围？我相信给出了以下 2 个 URL：

*   GET /api/parents/1/children - 返回父 1 的孩子的集合
*   POST /api/parents/1/children - 将新子添加到父 1 的集合

但是 GET、PUT 和 DELETE 呢？以下哪项是合适的？

*   获取、放置或删除 /api/parents/44/children/6
*   获取、放置或删除 /api/parents/children/6

似乎它归结为`child`资源 ID 的唯一性范围。ID 是否仅在父聚合中唯一？还是在所有父母的所有孩子中都是独一无二的？一个比另一个更正确，还是取决于相关资源的 id 唯一性范围？

如果示例 1 比示例 2 更合适，并且 id = 44 的父级没有 id = 6 的子级（例如子级 id = 6 属于 id = 9 的父级），应该返回什么 HTTP 响应？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-27T18:47:09.813

@danludwig

我认为它实际上并不重要，因为 URI 只是资源标识符，所有这些用户友好的层次结构只对人类很重要......但无论哪种情况，我都会问关于这个“/api/parents/children/”的问题6"，让我们分解一下：

*   GET to "/api/parents/children/6" 为我们提供子资源
*   **获取到“/api/parents/children”这里会发生什么？404？**
*   GET到“/api/parents”给了我们所有的父母
*   GET 到“/api”，希望是主页（或索引）文档，其中包含指向其他从属资源的链接。

我认为在构建分层 URI 时这是一个很好的测试。只需确保每个段都绑定到特定资源并且不返回 404。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-29T08:01:07.733

> Is the ID unique only within the parent aggregate? Or is it unique among all children of all parents?

This would depend on the possibility of a child being the cild of *one and only one* parent. If this is the case, then locally scoped IDs are possible.

If, on the other hand, a child can be child of *more than one parent*, gloabally scope IDs would be necessary.

Of course one can ask if a child which has a global ID can only exist 'below' a parent, or if such a child can be addressed with an URL that does not contain a parent.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-27T19:17:31.383

URL在`GET, PUT or DELETE /api/parents/44/children/6`我看来是因为它指示了父资源和子资源之间的关系。

唯一的问题是您需要知道父 ID 才能使用子资源。

一种替代方法是一起删除 URL 的“父”部分：`GET, PUT or DELETE /api/children/6`并在子资源中拥有一个“链接”属性或元素，为其父资源提供 URL。

```
<child>
   <id>6</id>
   <link rel="parent" href="/api/parents/1" />
   ...
</child> 
```

# apache - Apache mod_rewrite RewriteCond 以避免循环

> ID：13103047
> 
> 赞同：1
> 
> 时间：2012-10-27T18:39:19.783
> 
> 标签：apache, mod-rewrite

有什么区别：

```
RewriteCond %{ENV:REDIRECT_STATUS} 200
RewriteRule ^ - [L] 
```

和这个：

```
RewriteCond %{ENV:REDIRECT_STATUS} ^.
RewriteRule ^ - [L] 
```

碰巧这最后一个过去很长一段时间都可以正常工作，直到突然停止工作，导致 Apache 显示目录列表！第一个解决了这个问题。那么第二个有什么问题呢？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-27T18:45:46.067

```
RewriteCond %{ENV:REDIRECT_STATUS} 200 
```

检查 REDIRECT_STATUS 环境变量是否等于 200（实际上，该模式将匹配任何包含 200 的字符串）。

```
RewriteCond %{ENV:REDIRECT_STATUS} ^. 
```

检查 REDIRECT_STATUS 环境变量是否至少有一个字符长。

第二个应该可以工作，因为 200 应该匹配`^.`。也许问题出在其他地方。

# regex - 将 bash 翻译为 tcsh，如果有模式

> ID：13103048
> 
> 赞同：1
> 
> 时间：2012-10-27T18:39:24.793
> 
> 标签：regex, bash, if-statement, tcsh

我在 bash 中有以下代码：

```
if  [[ $a =~ ^[+-]?([0-9]+\.?[0-9]*|[0-9]*\.?[0-9]+)([DdEeQ][+-]?[0-9]+)?$ ]]; then 
```

我怎样才能在 tcsh 中做到这一点？我试过了：

```
if  ( $a =~ {^[+-]?{[0-9]+\.?[0-9]*\|[0-9]*\.?[0-9]+}{[DdEeQ][+-]?[0-9]+}?\$} ) then 
```

它不起作用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-28T12:46:07.503

bash 本身支持正则表达式，显然不是 tcsh。可以使用 expr 命令代替；以下测试表明 | ( ) ? 和 + 必须被转义才能不被字面理解（例如与 perl 相反）。

去测试 ：

```
expr a : '\(a\|b\)'
expr b : 'a\?b'
expr aab : 'a\+b' 
```

和

```
expr "$a" : '^[+-]\?\([0-9]\+\.\?[0-9]*\|[0-9]*\.\?[0-9]\+\)\([DdEeQ][+-]\?[0-9]\+\)\?$' 
```

或者

```
pattern='^[+-]\?\([0-9]\+\.\?[0-9]*\|[0-9]*\.\?[0-9]\+\)\([DdEeQ][+-]\?[0-9]\+\)\?$'
if expr "$a" : "$pattern" >/dev/null; then
    ..
fi 
```

# python - 如何以最少的阻塞在 Tornado 中散列密码？

> ID：13103049
> 
> 赞同：3
> 
> 时间：2012-10-27T18:39:33.217
> 
> 标签：python, asynchronous, tornado, bcrypt, pbkdf2

我正在使用[PBKDF2](http://en.wikipedia.org/wiki/PBKDF2)，但这同样适用于 BCrypt。

使用合理的迭代次数对密码进行哈希处理可以轻松阻塞 0.5 秒。什么是一种轻量级的方法来消除这个过程？我不愿意为这个操作设置像 Celery 或 Gearman 这样的东西。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-28T11:37:37.333

你可以使用线程。这不会阻止龙卷风。假设您有一个对密码进行哈希处理的处理程序。那么这两个相关的方法可能如下所示：

```
import threading

def on_message(self, message):
    # pull out user and password from message somehow
    thread = threading.Thread(target=self.hash_password, args=(user, password))
    thread.start()

def hash_password(self, user, password):
    # do the hash and save to db or check against hashed password 
```

您可以在方法中等待线程完成`on_message`然后编写响应，或者如果您不需要发送响应，则让它完成并将结果保存在`hash_password`方法中。

如果您确实等待线程完成，则必须小心操作方式。`time.sleep`将阻塞，因此您将要使用龙卷风的非阻塞等待。

# javascript - AngularJS客户端数据绑定和服务器端模板

> ID：13103050
> 
> 赞同：27
> 
> 时间：2012-10-27T18:39:36.550
> 
> 标签：javascript, data-binding, angularjs, template-engine

AngularJS 使用双向客户端数据绑定（[*来自 AngularJS 开发人员指南*](http://docs.angularjs.org/guide/compiler)）： ![双向数据绑定](../Images/fbf4fdb7edd153801104efe3594af71b.png)

有没有人考虑将**服务器端模板引擎**与**AngularJS 双向客户端数据绑定结合**使用。像这样的东西： ![混合数据绑定](../Images/357f8da3209f498a5997337fa786d8fb.png)

我正在考虑仅将 AngularJS 用于页面的部分（组件）？这是个好主意吗？

我想听听您是否已经有过类似方法的经验，以及有哪些缺点和优点......

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-28T20:27:38.963

Angular 是一个完整的 UI 渲染客户端框架。您可以将数据输入其中，它会呈现正确的 html。**就其本身而言，Angular 是一个完全与任何服务器解耦的模板解决方案**。

**您正在尝试做的是将您的 Angular 应用程序重新耦合到您的服务器。**这将是更多的工作，很少有好处，并且您将失去切换服务器技术的能力，但保持您的 Angular 应用程序不受影响。

从本质上讲，你不想这样做的原因与你不想让你的服务器为你渲染 JavaScript 的原因是一样的……它只是不那么明显，因为多年来我们一直在渲染我们所有的 HTML在服务器上。

最后的结果才是最重要的。UI 工作正常且应用程序易于维护。如果您发现您的解决方案更易于维护，那么您应该这样做。我很难想象使用只托管 JSON 的服务器比直接使用 HTML 和 JavaScript 更容易维护。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-05-17T07:56:32.340

我和你有同样的困境，我来自使用 SMARTY 作为服务器端模板引擎的背景，我们最近开始使用 AngularJS。

我认为混合这两种解决方案在完全分离的本质上是合适的。即不要将页面的一部分与这两种技术混合使用，而是分别使用这两种技术。

例如，如果您有一个用户根本不会与之交互的列表页面，您可以完美地使用服务器端模板。

但是，如果在这种情况下页面涉及大量操作和用户端交互，那么您应该使用 Angular。

如果您使用的是 SPA（单页应用程序），则根本不要使用服务器端模板。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-07-25T21:28:08.350

在我们最近制作的一个科尔多瓦应用程序中，我们使用了一种混合。修复我们以角度方式执行的表单、列表、标题和菜单等内容，某些部分（例如来自 RTE 的内容）或经常更改我们使用指令[ngBindHtml](https://docs.angularjs.org/api/ng/directive/ngBindHtml)添加的模板。如果客户想要更改布局或想要将当前未知的内容放入其中，则其背后的想法是在应用程序的内容页面中保持灵活。但我建议：如果您可以轻松维护应用程序（无需长时间的部署/批准过程），您应该以有角度的方式进行（但不要考虑 SEO；）。

# android - Android - 资源$NotFoundException

> ID：13103058
> 
> 赞同：6
> 
> 时间：2012-10-27T18:40:34.383
> 
> 标签：android, xml, textview, drawable, filenotfoundexception

我有一个拥有超过 100.000 个用户的应用程序。但在某些设备（~50）上，我遇到了一个奇怪的异常。堆栈跟踪说，没有找到可绘制对象。
这是堆栈跟踪：

```
java.lang.RuntimeException: Unable to start activity ComponentInfo{mindmApp.the.big.bang.theory.quiz/mindmApp.the.big.bang.theory.quiz.GameNormalActivity}: android.view.InflateException: Binary XML file line #237: Error inflating class 
...
Caused by: android.view.InflateException: Binary XML file line #237: Error inflating class 
at android.view.LayoutInflater.createView(LayoutInflater.java:606)
at com.android.internal.policy.impl.PhoneLayoutInflater.onCreateView(PhoneLayoutInflater.java:56)
at android.view.LayoutInflater.onCreateView(LayoutInflater.java:653)
at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:678)
...
Caused by: java.lang.reflect.InvocationTargetException
at java.lang.reflect.Constructor.constructNative(Native Method)
at java.lang.reflect.Constructor.newInstance(Constructor.java:417)
at android.view.LayoutInflater.createView(LayoutInflater.java:586)
... 28 more
Caused by: android.content.res.Resources$NotFoundException: File res/drawable/textviewxml_joker.xml from drawable resource ID #0x7f02003d
at android.content.res.Resources.loadDrawable(Resources.java:1956)
at android.content.res.TypedArray.getDrawable(TypedArray.java:601)
at android.view.View.(View.java:2841)
at android.widget.TextView.(TextView.java:580)
at android.widget.TextView.(TextView.java:573) 
```

我不知道为什么找不到这个drawable（它是一个xml文件）。
二进制 XML 文件第 237 行是：

```
<TextView
                    android:id="@+id/textViewSkip"
                    android:layout_width="0px"
                    android:layout_height="wrap_content"
                    android:layout_marginLeft="4dp"
                    android:layout_weight="1"
                    android:background="@drawable/textviewxml_joker"
                    android:gravity="center"
                    android:text="@string/tvSkip"
                    android:textAppearance="?android:attr/textAppearanceMedium"
                    android:textColor="@color/color_textview"
                    android:textSize="22sp" /> 
```

这是 textviewxml_joker.xml 文件：

```
<?xml version="1.0" encoding="utf-8"?>
<selector xmlns:android="http://schemas.android.com/apk/res/android">
<item
    android:drawable="@drawable/textview_joker_pressed"
    android:state_pressed="true"/>
<item android:drawable="@drawable/textview_joker"/>
</selector> 
```

有没有人有想法解决这个问题？

此致！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-27T18:51:13.730

如果您的`textviewxml_joker.xml`文件不在文件夹中`drawable`，而是在`drawable-*`文件夹中，那么出现错误的少数设备可能不符合使用`drawable-*`文件夹的条件。

把它`drawable`也放进去，它应该修复它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-04-15T09:08:34.040

如果您引用的资源（我们称之为 ResA）反过来又引用了一个丢失的资源（我们称之为 ResB），这也可能发生。即使真正缺少的是 ResB，Android 也会为 ResA 引发 ResourceNotFoundException。这就是生活！

就我而言，ResB 是在 values-swxxxdp 中定义的，但不是在 values 中定义的。因此，我在手机上遇到了这个例外，但在平板电脑上却没有。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-27T18:52:44.380

如果您有多个资源文件夹，请确保 Android 为每个可能的限定符组合（[提供资源](http://developer.android.com/guide/topics/resources/providing-resources.html)）找到您的可绘制 xml。查看有此错误的设备类型可能会提示您在哪里查看。

# android - 需要有关“由适配器支持的 TableLayout”的建议，例如 View

> ID：13103061
> 
> 赞同：0
> 
> 时间：2012-10-27T18:40:51.823
> 
> 标签：android, android-layout, android-adapter, android-tablelayout, android-adapterview

我想要一个由永远不会滚动的适配器支持的 7x4 表格，而是适合占用其可用空间，以统一的方式调整每个单元格的大小。我希望它由适配器支持，因为它具有处理数据集更改和回收视图的内置功能。以下是我考虑过的几件事：

*   自己扩展`AbsListView`和实现它
*   扩展`TableLayout`并为其提供字段以传入适配器

两者看起来都很麻烦。我想知道人们是否可以看到隧道尽头的曙光，或者知道任何已经拥有我正在寻找的东西的第三方图书馆。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-27T19:40:55.543

尝试使用 GridView。

```
<GridView android:id="@+id/yourgridview"
    android:alwaysDrawnWithCache="true"
    android:drawSelectorOnTop="false"
    android:columnWidth="78dp"
    android:numColumns="7"
    android:stretchMode="spacingWidth"
    android:layout_height="match_parent"
    android:layout_width="match_parent"
    android:stackFromBottom="false" /> 
```

然后使用java将适配器设置为GridView。希望我有所帮助。

# c# - 如何在 Windows 8 c# 中将图像 url 保存到本地文件

> ID：13103064
> 
> 赞同：2
> 
> 时间：2012-10-27T18:40:59.223
> 
> 标签：c#, xaml, windows-8, windows-runtime, winrt-xaml

基本上，该应用程序显示图像，我希望用户能够选择要下载的图像并将其存储在本地。

我有 URL，但我不知道如何将该 URL 与文件选择器结合使用。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-28T12:08:16.433

您可以使用以下方法将文件从给定的 Uri 下载到使用文件选择器选择的文件中：

```
private async Task<StorageFile> SaveUriToFile(string uri)
{
    var picker = new FileSavePicker();

    // set appropriate file types
    picker.FileTypeChoices.Add(".jpg Image", new List<string> { ".jpg" });
    picker.DefaultFileExtension = ".jpg";

    var file = await picker.PickSaveFileAsync();
    using (var fileStream = await file.OpenStreamForWriteAsync())
    {
        var client = new HttpClient();
        var httpStream = await client.GetStreamAsync(uri);
        await httpStream.CopyToAsync(fileStream);
        fileStream.Dispose();
    }
    return file;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-27T19:29:07.077

我认为您始终可以将文件作为流读取并一点一点地保存在本地计算机上。但是我需要说我在 JAVA 中已经做过很多次了，我从来不需要在 C# 中检查这个:)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-10-27T18:43:30.470

```
SaveFileDialog myFilePicker = new SaveFileDialog();

//put options here like filters or whatever

if (myFilePicker.ShowDialog() == DialogResult.OK)
{
    WebClient webClient = new WebClient();
    webClient.DownloadFile("http://example.com/picture.jpg", myFilePicker.SelectedFile);
} 
```

# c++ - 在 C++ 中，作为类成员的引用应该是 const 或 non-const

> ID：13103065
> 
> 赞同：3
> 
> 时间：2012-10-27T18:41:15.313
> 
> 标签：c++, reference, constants, const-cast

考虑以下最小示例。

```
#include <vector>

class Data
{
    std::vector<int>& v;
public:
    Data(std::vector<int>& _v) : v(_v) {}
    Data(const std::vector<int>& _v) : v(_v) {} // error!
};

int main()
{
    std::vector<int> v;
    const std::vector<int> c_v;
    Data d(v);
    Data const_d(c_v);

    return 0;
} 
```

这不编译。下面的整个输出`g++ -Wall`。

```
const.cpp: In constructor ‘Data::Data(const std::vector<int>&)’:
const.cpp:8:41: error: invalid initialization of reference of type ‘std::vector<int>&’ from expression of type ‘const std::vector<int>’ 
```

原因对我来说很清楚： const 关键字对我在第 8 行中的演员表感到不安。问题：我确实有时需要 Data 类`std::vector`，但有时需要`const std::vector`。就像有两门课：一门用于阅读`Data`，另一门用于阅读`Data`。但是，我不喜欢编写两个具有几乎冗余功能的 Data 类。我的问题：

*   你能给出一个很好的解决方案来说明我如何实现我尝试做的事情`main()`吗？C++11 解决方案也很受欢迎:)
*   这是`iterator`和的原因`const_iterator`吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-27T18:49:08.297

`const`需要在编译时知道数据成员的特性。如果您“有时”需要对`const`向量的引用，有时需要对向量的引用`const`，那么您应该使用包含通用功能的基本抽象类创建一个类层次结构，并在两个`Data`类中继承它：`Data`和`ConstData`. 将`Data`包含一个非`const`向量，并且`ConstData`将包含一个`const`向量。这样你就不会重复任何逻辑，而两个单独的类将包含两个不同的引用`const`。

这是一个例子：

```
class AbstractData {
public:
    // Common functions use vect() and const_vect()
    void common_function1();
    void common_function2();
protected:
    virtual vector<int>& vect() const = 0;
    virtual const vector<int>& const_vect() const = 0;
};

class Data : public AbstractData {
    vector<int>& v;
public:
    Data(vector<int>& _v) : v(_v) {}
protected:
    vector<int>& vect() const {
        return v;
    }
    const vector<int>& const_vect() const {
        return v;
    }
};

class ConstData : public AbstractData {
    const vector<int>& v;
    vector<int> temp;
public:
    ConstData(const vector<int>& _v) : v(_v) {}
protected:
    vector<int>& vect() const {
        return temp; // You can choose to throw an exception instead
    }
    const vector<int>& const_vect() const {
        return v;
    }
}; 
```

请注意，此类层次结构可能需要析构函数和各种复制构造函数，具体取决于用法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-27T18:45:18.533

你得到的错误是：

```
foo.cpp: In constructor ‘Data::Data(const std::vector<int>&)’:
foo.cpp:8:44: error: invalid initialization of reference of type ‘std::vector<int>&’ from expression of type ‘const std::vector<int>’ 
```

...因为您正在尝试创建对您 ( `Data`) 承诺您的调用者将被视为的数据的非常量引用`const`。

这是一个将`const`引用声明为`Data`成员的解决方案：

```
#include <vector>

class Data
{
    const std::vector<int> &v;
public:
    Data(std::vector<int>& _v) : v(_v) {}
    Data(const std::vector<int>& _v) : v(_v) {} // error!
};

int main()
{
    std::vector<int> v;
    std::vector<int> c_v;
    Data d(v);
    Data const_d(c_v);

    return 0;
} 
```

另一种选择是使用非引用成员：

```
#include <vector>

class Data
{
    std::vector<int> v;
public:
    Data(std::vector<int>& _v) : v(_v) {}
    Data(const std::vector<int>& _v) : v(_v) {} // error!
}; 
```

# java - 在 Java JDBC 中查找行数的正确方法

> ID：13103067
> 
> 赞同：9
> 
> 时间：2012-10-27T18:41:59.827
> 
> 标签：java, jdbc

我尝试了不同的方法来获取 java JDBC 中的行数，但似乎没有一个给出正确的结果。我做错了什么吗？

即使客户表是空的并且我应该将行数设为 0，但我不明白为什么我会得到一个非零行数值。

方法1 -

```
query = "SELECT * FROM customer WHERE username ='"+username+"'";
rs = stmt.executeQuery(query);
ResultSetMetaData metaData = rs.getMetaData();
rowcount = metaData.getColumnCount(); 
```

方法2 -

```
query = "SELECT * FROM customer WHERE username ='"+username+"'";
rs = stmt.executeQuery(query);
rowcount = rs.last() ? rs.getRow() : 0; 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-10-27T18:45:22.140

**请看这段代码：**

```
import java.io.*;
import java.sql.*;

public class CountRows{
    public static void main(String[] args) {
        System.out.println("Count number of rows in a specific table!");
        Connection con = null;
        int count = 0;
        try {
            Class.forName("com.mysql.jdbc.Driver");
            con = DriverManager.getConnection("jdbc:mysql://localhost:3306/jdbctutorial","root","root");
            try {
                Statement st = con.createStatement();
                BufferedReader bf = new BufferedReader(new InputStreamReader(System.in));
                System.out.println("Enter table name:");
                String table = bf.readLine();
                ResultSet res = st.executeQuery("SELECT COUNT(*) FROM "+table);
                while (res.next()){
                    count = res.getInt(1);
                }
                System.out.println("Number of row:"+count);
            }
            catch (SQLException s){
                System.out.println("SQL statement is not executed!");
            }
        }
        catch (Exception e){
            e.printStackTrace();
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-01-29T05:18:36.417

当您使用不支持的 JDBC 时，请`TYPE_FORWARD_ONLY`使用此方法获取行数。

```
Statement s = cd.createStatement();
ResultSet r = s.executeQuery("SELECT COUNT(*) AS rowcount FROM TableName");
r.next();
int count = r.getInt("rowcount");
r.close();
System.out.println("MyTable has " + count + " row(s)."); 
```

您可以使用上述方法获取行数。

谢谢..

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2016-07-13T23:11:46.490

这是我用来在 Java 中获取行数的方式：

```
String query = "SELECT * FROM yourtable";

Statement st = sql.createStatement( ResultSet.TYPE_SCROLL_INSENSITIVE, ResultSet.CONCUR_READ_ONLY );
ResultSet = st.executeQuery(query);

int rows = 0
rs.last();
rows = rs.getRow();
rs.beforeFirst();

System.out.println("Your query have " + rows + " rows."; 
```

我希望这对你有帮助。

问候。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-05-20T08:38:22.227

在 Android 中，没有结果会返回错误。*因此，在while(resultset.next())*中增加计数之前检查这种情况

 *```
if(resultset!=null)
{
//proceed with incrementing row count function
}
else
{
// No resultset found
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-10-22T07:14:59.123

> 只需迭代和计数

```
ResultSet result = sta.executeQuery("SELECT * from A3");
            int k=0;
            while(result.next())
                k++;

            System.out.print(k); //k is the no of row 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2015-10-01T08:08:43.940

正如方法名称所指定`metaData.getColumnCount()`的，将返回结果集中的总列数，但不返回总行数（计数）。*

# android - setDisplayOrientation 示例代码是否正确？

> ID：13103070
> 
> 赞同：17
> 
> 时间：2012-10-27T18:42:35.380
> 
> 标签：android, android-camera, screen-orientation

Camera.setDisplayOrientation的[文档页面](http://developer.android.com/reference/android/hardware/Camera.html#setDisplayOrientation%28int%29)包含以下代码示例，说明使用它将“使相机图像以与显示器相同的方向显示”：

```
 public static void setCameraDisplayOrientation(Activity activity,
         int cameraId, android.hardware.Camera camera) {
     android.hardware.Camera.CameraInfo info =
             new android.hardware.Camera.CameraInfo();
     android.hardware.Camera.getCameraInfo(cameraId, info);
     int rotation = activity.getWindowManager().getDefaultDisplay()
             .getRotation();
     int degrees = 0;
     switch (rotation) {
         case Surface.ROTATION_0: degrees = 0; break;
         case Surface.ROTATION_90: degrees = 90; break;
         case Surface.ROTATION_180: degrees = 180; break;
         case Surface.ROTATION_270: degrees = 270; break;
     }

     int result;
     if (info.facing == Camera.CameraInfo.CAMERA_FACING_FRONT) {
         result = (info.orientation + degrees) % 360;
         result = (360 - result) % 360;  // compensate the mirror
     } else {  // back-facing
         result = (info.orientation - degrees + 360) % 360;
     }
     camera.setDisplayOrientation(result);
 } 
```

但是，我在使用它时遇到了问题，有时图像会上下颠倒。经过反复试验，我发现正确的代码是（替换方法的最后 8 行）：

```
 int result = (360 + info.orientation - degrees) % 360;
    camera.setDisplayOrientation(result); 
```

（这意味着后置摄像头的计算对于前置摄像头也是正确的。）“补偿镜子”评论有点奇怪，因为镜像不能通过旋转来撤消，该操作只能交换 90° 和 270° 旋转，这不会'对我来说真的没有意义。

**所以问题是：样本确实是错误的还是我遗漏了什么？** *我在多个设备上尝试过，包括后置和前置摄像头以及所有支持的方向，所以我知道我的代码正在运行。一个可能值得一提的小细节：我所有的设备都返回 90° 为`info.orientation`.*

**编辑：** [这](http://pastebin.com/2KPuBy2q)是我的相机相关代码，我已经在 Nexus One 和三星 Galaxy S Plus 上对其进行了测试。它用于[我的头部跟踪 3D 应用程序](https://play.google.com/store/apps/details?id=hu.molnarm.outsidethebox)，预览显示在左下角，并且应该始终具有正确的方向。

**解决方案（有点）：**看起来代码是正确的，但我的测试手机（三星 Galaxy S Plus）返回的前置摄像头的 CameraInfo.orientation 值不正确。有许多关于在此模型上颠倒显示的预览的相关讨论（[此处](http://support.tango.me/entries/20699798-android-my-outgoing-video-is-upside-down-or-rotated-what-can-i-do)和[此处](http://community.skype.com/t5/Android/Support-for-Samsung-Galaxy-S-plus/td-p/265588)的示例）。一种解决方法是包含一个手动旋转图像的选项。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-11-01T11:58:27.037

您引用的片段，我在我的项目中使用和应用，在我的情况下没有问题。

对于我用于测试的所有设备（Galaxy Note、Galaxy S III、Galaxy Nexus、Galaxy Ace II、Nexus S），`info.Orientation`前置摄像头均返回 270，后置摄像头返回 90。

与提问者讨论了几次后，我发现我误解了问题，所以我将答案分为两部分。

对于相机预览中的错误方向，请参考此解决方案：

## 相机预览方向错误的解决方法：

首先请确保`info.Orientation`前置摄像头返回 270，后置摄像头返回 90。然后请尝试将您的相机预览活动（或处理预览的类似类）方向设置为横向。

因此，当您浏览代码时，您会发现：

`degree = 90`用于屏幕方向，`info.Orientation = 270`用于前置摄像头。然后你会得到`result = (270 - 90 + 360) % 360`, `result = 180`，这意味着它将为你的前置摄像头视图顺时针旋转 180 度，这将纠正前置摄像头倒置的问题。

## 相机照片结果方向错误的解决方法：

如果这`info.Orientation`适用于您，那么问题可能是：

1.  对于某些三星（或其他）设备（如 Galaxy Note、Galaxy SIII），相机只会写入方向标签，而不是旋转真实像素。
2.  如果您使用前置摄像头并使用上面的代码，它将以正确的方向显示预览，但如果您拍摄，则会显示“倒置”图片。

解决方案：

```
/**
 *
 * Get the orientation from EXIF
 * @param filepath
 * @return orientation
 */
public int getExifOrientation(String filepath) {
    int degree = 0;
    ExifInterface exif = null;
    try {
        exif = new ExifInterface(filepath);
    } catch (IOException ex) {
        Log.e("EXIF info", "cannot read exif", ex);
    }
    if (exif != null) {
        int orientation = exif.getAttributeInt(ExifInterface.TAG_ORIENTATION, -1);
        if (orientation != -1) {
            // We only recognize a subset of orientation tag values.
            switch(orientation) {
            case ExifInterface.ORIENTATION_ROTATE_90:
                degree = 90;
                break;
            case ExifInterface.ORIENTATION_ROTATE_180:
                degree = 180;
                break;
            case ExifInterface.ORIENTATION_ROTATE_270:
                degree = 270;
                break;
            }
        }
    } else {
        degree = 1;
    }
    Log.i("EXIF info", "Orientation degrees: " + degree);
    return degree;
} 
```

然后

```
if (isFromCamera) {

    if (fromFrontCam) {
        // try change here if the orientation still wrong, -90 means rotate counter-clockwise 90 degrees.
        matrix.preRotate(-90);
     } else {
        matrix.preRotate(90);
     }
} else {
    // read EXIF data
    getExifOrientation(path)
    // don't forget to handle the situation that some devices won't write exif data
    matrix.preRotate(degree);
} 
```

# wxpython - 是否可以在 wxPython 中构建一个无边界的 GUI 捕捉到桌面边缘？

> ID：13103072
> 
> 赞同：0
> 
> 时间：2012-10-27T18:42:45.910
> 
> 标签：wxpython, pyqt, pyqt4

我想制作一个桌面应用程序，我们可以在其上存储指向 PyQt 或 wxPython 中的应用程序的链接，就像底部的 mac 栏或 Alienware 侧边栏...

任何开始的参考将不胜感激......：|

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-02-09T22:12:46.130

甚至我也在寻找相同的东西。我想分享我的发现

```
style=wx.FRAME_NO_TASKBAR | wx.NO_BORDER 
```

在创建 WX.FRAME 时使用它，这将有助于创建无边界 GUI :)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-27T22:01:19.010

您可以使用 Qt.WindowType 和 Qt.WindowFlags [http://www.riverbankcomputing.co.uk/static/Docs/PyQt4/html/qt.html](http://www.riverbankcomputing.co.uk/static/Docs/PyQt4/html/qt.html)搜索 Qt.WindowType ，您会看到`Qt.WStyle_NoBorder FramelessWindowHint Use Qt.FramelessWindowHint instead.` 您可以使用 m 进行设置`y_window..setWindowFlags(my_window.windowFlags() | QtCore.Qt.FramelessWindowHint)`希望这个帮助

# python - 在Django的几个视图中执行一个函数

> ID：13103075
> 
> 赞同：0
> 
> 时间：2012-10-27T18:43:04.367
> 
> 标签：python, django, django-views

所以我仍然是 Django 的新手，我想听听你关于这一点的建议：

我的应用程序中有一个从 userena 扩展的用户系统：

```
class FindUrGeekUserProfile(UserenaBaseProfile):
user         = models.OneToOneField( User, unique = True, verbose_name    ='userData', related_name='myProfile',db_index = True)
type         = models.CharField(max_length = 2, choices = USER_TYPE, blank = True, null = True, db_index = True)

def __unicode__(self):
    return 'Name: ' + self.user.username + ' Type: ' + self.type 
```

当用户在我的网站上注册时，他会填写登录、密码和电子邮件字段。

用户第一次通过我的网站连接时，他会看到一个页面询问他的用户类型：Type1 或 Type2...

我想在每个 login_registered 视图中验证用户是否定义了他的类型。到目前为止，我创建了一个在每个注册视图中使用的函数：

```
def checkUserType(user):
    if(user.type != None)
        return True
    else:
        retur False

@login_registered
def myView(request):
    if (checkUserType(request.user)):
        Continue....
    else:
        return redirect('setUserType')  # Page where the user will set his type 
```

在Django中有更好的方法吗？使用一些内置功能？

谢谢您的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-27T19:30:37.157

至少有一个更好的方法：

```
@login_registered
def myView(request):
    if not checkUserType(request.user):
        return redirect('setUserType')  # Page where the user will set his type

    # user has the type, continue 
```

此外，您可以[编写自定义中间件](https://docs.djangoproject.com/en/dev/topics/http/middleware/?from=olddocs#writing-your-own-middleware)，并在`process_request()`. 它可能看起来像：

```
from django import http
from django.core.urlresolvers import reverse

class SetUserTypeMiddleware(object):
    urls = ['/some/path/that/requires/user/type/',]

    def process_request(self, request):
        if not request.user.is_authenticated():
            return

        for url in urls: # customize url matching to your taste
            if url in request.path_info:
                return http.HttpResponseRedirect(reverse('setUserType')) 
```

中间件是一个很酷的功能，它简单而强大。只是不要忘记将它们注册到`settings.MIDDLEWARE_CLASSES`.

# javascript - 捕获 CORS 错误

> ID：13103076
> 
> 赞同：3
> 
> 时间：2012-10-27T18:43:13.947
> 
> 标签：javascript, cors

我正在尝试加载禁用 CORS 的图像，并得到错误：

```
Cross-origin image load denied by Cross-Origin Resource Sharing policy. 
```

我尝试[按如下方式](http://jsfiddle.net/wLyWZ/)捕获错误，但这显然行不通。

设置图像属性后如何捕获 CORS 错误`.src`？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-27T18:50:15.027

[使用`onError`事件](http://jsfiddle.net/2xBvB/)。

```
if(image.addEventListener) {
    image.addEventListener('error', function (e) {
        e.preventDefault(); // Prevent error from getting thrown
        // Handle error here
    });
} else {
    // Old IE uses .attachEvent instead
    image.attachEvent('onerror', function (e) {
        // Handle error here
        return false; // Prevent propagation
    });
} 
```

代码可能应该被合并，这样您就不必编写两次代码，但希望您已经明白了。

# git - 如何使用不同的用户名推送到 GitHub？

> ID：13103083
> 
> 赞同：222
> 
> 时间：2012-10-27T18:44:41.680
> 
> 标签：git, github

一个朋友和我正在共享我的电脑。我已经在 Windows 7 上使用 git bash shell 推送到 GitHub。现在我们在该计算机上的另一个项目中，我需要她推送到她的帐户。但它一直试图使用我的用户名并说我无权访问她的存储库：

```
$ git push her_github_repository our_branch
ERROR: Permission to her_username/repository.git denied to my_username.
fatal: The remote end hung up unexpectedly 
```

* * *

## 回答 #1

> 赞同：327
> 
> 时间：2018-02-25T05:37:36.710

这对我有用，它会提示输入用户名和密码

```
git config --local credential.helper ""
git push origin master 
```

* * *

## 回答 #2

> 赞同：121
> 
> 时间：2012-10-27T18:51:30.073

如果您使用不同的 windows 用户，您的 SSH 密钥和 git 设置将是独立的。

如果这不适合您，那么您的朋友应该将您的 SSH 密钥添加到她的 Github 帐户。

虽然，以前的解决方案会让你像自己一样推动，但它会让你推动她的回购。如果您不希望这样做并在同一台电脑上的不同文件夹中工作，您可以通过删除`-g`config 命令的标志在 git 文件夹内本地设置用户名和电子邮件：

```
git config user.name her_username
git config user.email her_email 
```

或者，如果您通过`https`协议推送，Github 每次都会提示输入用户名/密码（除非您使用密码管理器）。

* * *

## 回答 #3

> 赞同：101
> 
> 时间：2017-09-21T06:48:39.280

您可以使用不同的帐户推送。例如，如果您的帐户是**A**，它存储在 .gitconfig 中，并且您想使用帐户**B**，它是您要推送的 repo 的所有者。

Account **B** : B_user_name, B_password
SSH链接示例：[https ://github.com/B_user_name/project.git](https://github.com/B_user_name/project.git)

**B**账号的推送是：

```
$ git push https://'B_user_name':'B_password'@github.com/B_user_name/project.git 
```

在 .gitconfig 中查看账户

1.  `$git config --global --list`
2.  `$git config --global -e` （也可以更改帐户）

* * *

## 回答 #4

> 赞同：29
> 
> 时间：2014-10-20T06:00:25.460

我使用自定义设置了一个 ssh 别名`IdentityFile`，并重写了源以使用我的自定义`me-github`主机名。

```
#when prompted enter `id_rsa_user1` as filename
ssh-keygen -t rsa

# ~/.ssh/config
Host user1-github
HostName github.com
Port 22
User git
IdentityFile ~/.ssh/id_rsa_user1

#check original remote origin url
git remote -v
origin git@github.com:user1/my-repo.git

#change it to use your custom `user1-github` hostname
git remote rm origin
git remote add origin git@user1-github:user1/my-repo.git 
```

* * *

## 回答 #5

> 赞同：25
> 
> 时间：2020-07-28T00:41:23.463

请按照以下步骤操作：

1.  你必须明白，你在提交之前定义了作者！ [提交已经被冻结：它们的作者和提交者设置了任何名称，并且无法更改。](https://stackoverflow.com/a/54647639/13576637)

```
# you can check what's currently:
git config user.name
git config user.email

git config user.name "your_github_username"
git config user.email "your_github_email"

# Again check what's currently:
git config user.name
git config user.email 
```

2.  检查您的提交被标记给谁？

```
git log
# once you're confirmed that it's tagged to you, then you should move to step 3 
```

> 万一作者错了，那么您可以轻松[撤消上次提交而不会丢失更改](https://stackoverflow.com/a/19859644/13576637)

> 此外，在进行第 3 步之前，不要忘记按照第 1 步进行完整性检查。！

3.  提示自己输入 github_username 和 github_password

```
git config --local credential.helper ""
git push
# it will ask you to enter your github_username and github_password 
```

* * *

## 回答 #6

> 赞同：22
> 
> 时间：2016-02-12T18:44:12.783

如果您使用 SSH URL ( ) 而不是 HTTPS URL，则可以使用环境变量`git@github.com:username/projectname.git`临时指定不同的 SSH 密钥：`$GIT_SSH_COMMAND`

```
$ GIT_SSH_COMMAND="ssh -i different_private_key" git push 
```

据我所知，对于 SSH URL，GitHub 不关心用户名，只关心密钥：如果用户帐户有权访问存储库，并且该帐户具有 SSH 密钥（请参阅帐户中的SSH[密钥页面](https://github.com/settings/ssh)设置），那么如果您使用该 SSH 密钥推送到该存储库，则推送将被视为来自该用户。

* * *

## 回答 #7

> 赞同：16
> 
> 时间：2013-11-12T05:21:26.517

如果在运行`git push`Git 后要求输入密码`user`，但您想推送为`new_user`，您可能需要使用`git config remote.origin.url`：

```
$ git push
user@my.host.com:either/branch/or/path's password: 
```

此时使用`^C`退出`git push`并使用以下推送作为`new_user`。

```
$ git config remote.origin.url
user@my.host.com:either/branch/or/path

$ git config remote.origin.url new_user@my.host.com:either/branch/or/path

$ git push
new_user@my.host.com:either/branch/or/path's password: 
```

* * *

## 回答 #8

> 赞同：15
> 
> 时间：2017-09-04T11:39:54.830

克隆时很简单，请使用您的用户名获取 git URL。提交时会询问您的新用户密码。

例如：

git clone [https://username@github.com/username/reponame.git](https://username@github.com/username/reponame.git)

git clone [https://username@bitbucket.org/username/reponame.git](https://username@bitbucket.org/username/reponame.git)

* * *

## 回答 #9

> 赞同：10
> 
> 时间：2017-09-13T13:57:29.040

如果这是你的问题

```
remote: Permission to username1/repo.git denied to username2.
fatal: unable to access 'https://github.com/username1/repo.git/':
The requested URL returned error: 403 
```

除了使用 git config 从终端更改用户名和电子邮件之外：

```
$ git config --global user.name "Bob"
$ git config --global user.email "bob@example.com" 
```

您需要从钥匙串中删除授权信息。这个解决方案花了我几个小时才弄清楚。我发现我的钥匙串中也有证书。

打开钥匙串访问，单击所有项目并搜索 git。删除所有钥匙串

* * *

## 回答 #10

> 赞同：9
> 
> 时间：2017-02-17T22:21:23.570

如前所述，您可以使用

```
git config user.name her_username
git config user.email her_email 
```

为单个 repo 手动设置用户名和电子邮件，但您必须添加此命令：

```
git commit --amend --reset-author 
```

如果您在更改之前已经尝试推送。否则更改不会出现在配置文件中。

* * *

## 回答 #11

> 赞同：9
> 
> 时间：2019-01-20T12:00:08.180

我一直在使用一台机器将代码推送到具有不同用户名的两个不同的 GitHub 帐户。假设您已经设置了一个帐户并想添加一个新帐户：

1.  生成新的 SSH 密钥`ssh-keygen -t rsa -C "myaddress@example.com"`
2.  保存它，但记住不要覆盖现有的`id_rsa`。给它一个不同的名字，例如`id_rsa_another`
3.  将密钥的内容复制到您的 GitHub 帐户：

> 设置 -> SSH 和 GPG 密钥 -> 新建 SSH 密钥 ->*提供标签并粘贴密钥*-> 添加 SSH 密钥

4.  将密钥添加到 ssh 代理：`ssh-add ~/.ssh/id_rsa_another`
5.  设置 GitHub 主机：创建一个配置文件，`touch ~/.ssh/config`并通过为您的帐户提供配置来编辑该文件：

```
#first account
Host github.com-first
    HostName github.com
    User git
    IdentityFile ~/.ssh/id_rsa

#another account
Host github.com-another
    HostName github.com
    User git
    IdentityFile ~/.ssh/id_rsa_another 
```

现在您应该能够根据您添加到 ssh 代理的密钥从不同的帐户推送，即使用您的第一个帐户，执行 `ssh-add ~/.ssh/id_rsa`.

您可能还想更改您的用户电子邮件：

`git config --global user.email "myaddress@example.com"`

或在将代码输入其中一个帐户时清除 ssh 密钥以防出现权限错误：

`ssh-add -D`

* * *

## 回答 #12

> 赞同：6
> 
> 时间：2017-04-27T10:34:15.430

转至凭据管理器 转至 Windows 凭据 删除通用凭据下的条目 再次尝试连接。

* * *

## 回答 #13

> 赞同：6
> 
> 时间：2020-05-20T05:05:34.890

我不知道如何在一台机器上拥有第二个 github 身份（这些答案都不适合我），但我确实想出了如何能够像我自己一样推送到多个不同的 github 帐户。

# 以相同的用户名推送，但推送到不同的 github 帐户

1.  为您的第二个 github 帐户设置第二个 SSH 密钥（[像这样）](https://help.github.com/en/github/authenticating-to-github/generating-a-new-ssh-key-and-adding-it-to-the-ssh-agent)

2.  因此帐户之间的更改：

**使用我新的第二个 github 帐户推送**

```
ssh-add -D
ssh-add ~/.ssh/ssh_key_for_my_2nd_account
git push 
```

**用我的主账号推送**

```
ssh-add -D
ssh-add ~/.ssh/id_rsa   
git push 
```

* * *

## 回答 #14

> 赞同：5
> 
> 时间：2021-01-03T08:42:07.843

```
git add .
git commit -m "initial commit"
git config --local credential.helper ""
git push https://github.com/youraccount/repo.git --all 
```

在此推送命令之后，将打开用户名密码提示。

* * *

## 回答 #15

> 赞同：5
> 
> 时间：2018-10-15T12:14:46.260

您可以使用为另一个用户名添加新的远程 URL`git remote add origin-username https://username@github.expedia.biz/repository_name.git`

在此之后，如果您使用 推送`git push -u origin-username master`，这将提示您输入密码。

* * *

## 回答 #16

> 赞同：4
> 
> 时间：2021-08-19T16:28:17.867

我最喜欢这样做。

```
git push https://username@github.com/username/repo 
```

这将提示输入密码，因此您不必在 shell 中以纯文本形式编写它。

* * *

## 回答 #17

> 赞同：2
> 
> 时间：2017-08-31T18:13:30.753

git config user.name 只更改我提交的名称。我还是推不动。这就是我解决它的方法，我认为这对我来说是一种简单的方法。

1.  在您将使用的计算机上以您要推送的用户名生成 SSH 密钥 [https://help.github.com/articles/connecting-to-github-with-ssh/](https://help.github.com/articles/connecting-to-github-with-ssh/)

2.  将此密钥添加到您要推送到 [https://help.github.com/articles/adding-a-new-ssh-key-to-your-github-account/的 github 用户帐户](https://help.github.com/articles/adding-a-new-ssh-key-to-your-github-account/)

3.  选择使用 SSH 克隆

您现在可以作为该用户推送到该存储库。

* * *

## 回答 #18

> 赞同：2
> 
> 时间：2018-01-07T10:54:40.993

如果在 Windows 和用户 Git for Windows 和`manager`管理凭据（又名`Git-Credential-Manager-for-Windows` [Link](https://github.com/Microsoft/Git-Credential-Manager-for-Windows)`https` ）下，问题是在使用`OAuth`令牌推送到 GitHub 时没有简单的方法在用户之间切换。

原因是令牌存储为：

*   网址：`git:https://github.com`
*   用户名：`Personal Access Token`
*   密码：`OAuth_Token`

中的 URL 变体`Internet Address`不起作用，例如：

*   `git:https://username@github.com`
*   `git:https://github.com/username`
*   ...

解决方案：*命名空间*。这可以在以下配置的详细信息中找到`Git-Credential-Manager-for-Windows`：

*   [https://github.com/Microsoft/Git-Credential-Manager-for-Windows/blob/master/Docs/Configuration.md](https://github.com/Microsoft/Git-Credential-Manager-for-Windows/blob/master/Docs/Configuration.md)

引用它：

> ### 命名空间
> 
> 为存储的凭据设置命名空间。
> 
> 默认情况下，GCM 为所有存储的凭据使用“git”命名空间，设置此配置值允许控制全局或每个主机使用的命名空间。
> 
> ```
> git config --global credential.namespace name 
> ```

现在，将您的凭据存储在 Windows 凭据管理器中：

*   网址：`git.username:https://github.com`
*   用户名：`Personal Access Token`
*   密码：`OAuth_Token`

请注意，我们已更改：`git`-> `git.username`（您更改`username`为您的实际用户名或为了它，更改为您可能想要的任何唯一标识符）

现在，在要使用特定条目的存储库中，执行：

```
git config credential.namespace git.username 
```

（再次......替换`username`为您想要的值）

您的`.git/config`遗嘱现在包含：

```
[credential]
    namespace = git.username 
```

瞧！将从 Windows Credential Store 中提取正确的凭据。

当然，这不会改变正在推送的用户/电子邮件。为此，您必须配置通常的`user.name`和`user.email`

* * *

## 回答 #19

> 赞同：1
> 
> 时间：2020-10-06T12:45:26.713

这个，应该工作： `git push origin local-name:remote-name`

更好的是，对于 GitLab，我使用**第二个“ `origin`”**，比如“ `origin2`”：

`git remote add origin2 ...`
然后

`git push origin2 master`

常规（短）`git push`应该像第一个“ `origin`”一样隐式工作

* * *

## 回答 #20

> 赞同：1
> 
> 时间：2017-08-18T23:42:31.113

如果您有[https://desktop.github.com/](https://desktop.github.com/)
，则可以转到[首选项（或选项）](https://help.github.com/desktop/guides/getting-started-with-github-desktop/configuring-basic-settings/) -> 帐户
，然后注销并登录。

* * *

## 回答 #21

> 赞同：1
> 
> 时间：2021-08-22T17:52:01.430

修改`config`位于`.git`项目根文件夹中的目录中的文件名：`[PROJECT_PATH]/.git/config`

我在这个文件的末尾添加了以下部分。之后，我可以用我的新名字推送到遥控器。

```
[user]
    name = Your Name
    email = MyEmailAddress@company.com 
```

* * *

## 回答 #22

> 赞同：0
> 
> 时间：2021-03-27T22:08:28.140

我有一个类似的问题。我有一个工作用的 github 帐户和一个私人帐户。在我的 Mac 上，我主要使用我的工作 github。我无法说服 git 通过终端推送到我的私人仓库。但是当我使用 github 桌面时它起作用了。

（我知道一定有不同的方法，但上述答案都没有帮助，所以这是阻力最小的方法。）

* * *

## 回答 #23

> 赞同：0
> 
> 时间：2019-01-23T16:08:42.023

提交发生的用户 ID 存储在配置文件中。

转到存储库的顶部 vi .git/config

将 "[remote "origin"] 之后列出的 url 行更改为具有适当的用户 ID

* * *

## 回答 #24

> 赞同：0
> 
> 时间：2021-02-18T12:14:30.507

我刚刚在以下位置添加了其他用户：

*   回购设置，
*   管理访问，
*   邀请合作者

它对我有用。

* * *

## 回答 #25

> 赞同：0
> 
> 时间：2020-04-28T14:29:33.750

如果您使用 ssh 并获取

> 拒绝 **Alice_username对 some_username/repository.git 的权限**

虽然您不想以 Alice_username 的身份推送，但请确保 Alice_username 没有将您计算机的 ssh 密钥添加到其 github 帐户中。

我从 alice 的 github 帐户中删除了我的 ssh 密钥，并且推送成功了。

# registry - Windows 8 中的 Sublime Text 2 上下文菜单

> ID：13103084
> 
> 赞同：4
> 
> 时间：2012-10-27T18:44:54.760
> 
> 标签：registry, editor, contextmenu

如您所知，Windows 8 昨天问世。我已经升级了，一切似乎都运行良好，但是当我为我的代码编辑器安装 Sublime Text 2 时，上下文菜单中曾经显示“使用 Sublime Text 2 编辑”的按钮不再存在。我尝试使用自定义注册表脚本，它添加了按钮，但 Windows 8*仍然*询问我要使用什么程序打开它。这是我使用的脚本：

（另存为 add_context_menu.reg）

```
Windows Registry Editor Version 5.00

[HKEY_CLASSES_ROOT\*\shell\Open with Sublime Text 2]

@="Open with S&ublime Text 2"

[HKEY_CLASSES_ROOT\*\shell\Open with Sublime Text 2\command]

@="C:\Program Files\Sublime Text 2\sublime_text.exe \"%1\"" 
```

有什么帮助吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-28T00:45:00.343

我正在使用`Sublime Text 2`in`Windows 8`并且按钮没有问题`Open with Sublime Text 2`，实际上我使用它打开了 .reg :)

```
Windows Registry Editor Version 5.00

[HKEY_CLASSES_ROOT\*\shell\Open with Sublime Text 2]

[HKEY_CLASSES_ROOT\*\shell\Open with Sublime Text 2\command]
@="C:\\Program Files\\Sublime Text 2\\sublime_text.exe \"%1\"" 
```

我想你没有逃避反斜杠的事实可能是问题所在

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-08-15T19:16:06.600

在这里，您可以找到两个用于 Windows 上下文菜单的非常详细且注释良好的 .reg 文件。一个用于版本 2，另一个用于 Sublime Text 的版本 3。

[https://github.com/cbmeeks/sublime-text-2-context-menu-windows](https://github.com/cbmeeks/sublime-text-2-context-menu-windows)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-08-04T06:14:21.837

在 Windows 8 上，以下代码对我有用

`C:\Program Files\Sublime Text 2\sublime_text.exe "%1"`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-06-24T11:55:25.127

这是一个更好的命令。只需将其保存到 app 目录中的 bat 文件并以管理员身份运行即可。

您可以将此命令用于其他应用程序，例如 Atom、VSCode、... 只需更改 App* 行

```
@echo off
SET AppKey=SublimeText3
SET AppTitle=Open with Sublime Text 3
SET AppPath=%~dp0sublime_text.exe
SET AppIcon=%AppPath%,0

REG ADD "HKEY_CLASSES_ROOT\*\shell\%AppKey%" /ve /f /d "%AppTitle%"
REG ADD "HKEY_CLASSES_ROOT\*\shell\%AppKey%" /v "Icon" /f /d "%AppIcon%"
REG ADD "HKEY_CLASSES_ROOT\*\shell\%AppKey%\command" /ve /f /d "%AppPath% \"%%1\""

REG ADD "HKEY_CLASSES_ROOT\Folder\shell\%AppKey%" /ve /f /d "%AppTitle%"
REG ADD "HKEY_CLASSES_ROOT\Folder\shell\%AppKey%" /v "Icon" /f /d "%AppIcon%"
REG ADD "HKEY_CLASSES_ROOT\Folder\shell\%AppKey%\command" /ve /f /d "%AppPath% \"%%v\""

REG ADD "HKEY_CLASSES_ROOT\Directory\Background\shell\%AppKey%" /ve /f /d "%AppTitle%"
REG ADD "HKEY_CLASSES_ROOT\Directory\Background\shell\%AppKey%" /v "Icon" /f /d "%AppIcon%"
REG ADD "HKEY_CLASSES_ROOT\Directory\Background\shell\%AppKey%\command" /ve /f /d "%AppPath% \"%%v\"" 
```

# mysqli - 获取准备好的语句时准备好的语句

> ID：13103085
> 
> 赞同：0
> 
> 时间：2012-10-27T18:45:13.210
> 
> 标签：mysqli, prepared-statement

我想用一个 INSERT 查询为从前一个查询中提取的每一行使用准备好的语句创建一个循环。以更直观的方式：

**MAKE QUERY**
  *While Fetching*
    - 进行新查询

我无法关闭我的语句，因为我需要它继续工作......问题是当我们使用准备好的语句时，我们必须在执行新的 prepare() 之前获取所有数据。那么，我该怎么做呢？也许没有陈述，但这不是一个好的解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-27T18:50:00.330

如果您尝试这样做，您将杀死您的 DB（如果您有 DBA，您的 DBA 会杀死您）。问题是您想要做的是每行向数据库发送一个插入请求。您必须为每一行数据一遍又一遍地创建和处理所有这些命令。那是*昂贵的*。

如果您很难做到这一点，那么没有什么可以阻止您在从第一个读取的循环中创建第二个准备好的语句（当然名称不同），但我强烈建议不要这样做。至少，缓冲传入的数据并一次插入几百行。

# android - 在opengl es中有没有办法知道你的纹理何时加载？

> ID：13103089
> 
> 赞同：1
> 
> 时间：2012-10-27T18:45:45.583
> 
> 标签：android, button, opengl-es, textures

我在一些 xml 按钮下面有一个 Glsurfaceview。当我启动我的应用程序时，glsurfaceview 显示黑屏几秒钟，大概是因为它正在加载纹理。问题是按钮首先加载，所以我会在黑屏上显示一个可见按钮，直到纹理加载，然后它不再是黑屏。有没有办法同时加载表面视图和按钮，这样做的正确方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-28T14:30:58.567

完成 glTexImage2D 调用后会加载纹理

只需在添加按钮时使其不可见

然后在完成所有 glTexImage2D 调用后，使该按钮可见

仅供参考，除非您有意异步加载图像，否则当您看到黑色表面视图时，UI 线程实际上并没有移动

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-27T18:54:12.280

添加 GLSurface 视图后添加按钮布局。

```
 addContentView(mGlView, new LayoutParams(
                        LayoutParams.FILL_PARENT,
                        LayoutParams.FILL_PARENT));

 // Camera Control
 cameraLayoutInflater = LayoutInflater.from(getBaseContext());
 View cameraControl = cameraLayoutInflater.inflate(R.layout.camera_control, null);
 addContentView(cameraControl, new LayoutParams(
                        LayoutParams.FILL_PARENT,
                        LayoutParams.FILL_PARENT)); 
```

我就是这样做的，Button 的布局总是在最前面。您也可以查看此链接： [http ://android-er.blogspot.se/2010/12/add-overlay-on-camera-preview.html](http://android-er.blogspot.se/2010/12/add-overlay-on-camera-preview.html)

# coronasdk - Corona SDK - 将按钮拖离屏幕/离开网格时，触摸不会结束

> ID：13103091
> 
> 赞同：0
> 
> 时间：2012-10-27T18:45:55.333
> 
> 标签：coronasdk

我设置了一个网格，其中用户触摸一个并在网格中移动。

问题是当触摸超出网格或超出屏幕时，触摸并没有结束。

请注意，网格由单个方形“按钮”组成，当用户将手指拖过它们时会改变颜色。

如何解决此问题，以便触摸在离开屏幕或离开网格时结束？

谢谢您的帮助！

问候，

约翰

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-28T14:14:44.630

这似乎已经在这里得到了回答：

[如何在 Corona SDK 中检测到 TouchOut 事件？](https://stackoverflow.com/questions/7215880/how-do-i-detect-a-touchout-event-in-corona-sdk)

和这里：

[使用 Corona sdk 的 Sprite 网格（2D 数组）的 touchEvent](https://stackoverflow.com/questions/12318503/touchevent-for-grid2d-arrayof-sprites-using-corona-sdk)

如果您需要更多帮助，请发布您的代码，以便更轻松地为您提供帮助。

# ruby-on-rails - Rails 使用日期时间进行高级搜索

> ID：13103095
> 
> 赞同：0
> 
> 时间：2012-10-27T18:46:47.960
> 
> 标签：ruby-on-rails, search, datetime, advanced-search

我正在开发一个应用程序，它允许用户搜索我们在数据库中的任何记录，这些记录由三个值组织：代理（姓名）、电话和日期。日期被记录为日期时间值。我想提供高级搜索功能，允许用户按照本指南选择时间范围：

年：输入文本字段 月：输入文本字段 日：输入文本字段 小时：表示范围上限和下限的两个选择列表 分钟：表示范围上限和下限的两个选择列表

我观看了[这个 Railscast](http://railscasts.com/episodes/111-advanced-search-form)以寻求有关如何开始使用搜索逻辑的帮助，但我很担心，因为我不知道如何将 dateparts 传递到 Rails 查询中。通常你会运行类似`select date_part(hh, date) as date_hour from table_name`得到小时值的东西，但是你会如何在 Rails 中做到这一点，或者按照 Ryan Bates 在他的 Railscast 中建议的方式？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-27T21:00:14.967

您可以连接控制器中的值访问它们，`params`然后解析为日期时间

然后[DateTime.strptime](http://ruby-doc.org/stdlib/libdoc/date/rdoc/classes/DateTime.html#M000214)允许您指定格式并将 String 转换为 DateTime。

# sql - PostgreSQL 各州人口最多的 5 个县

> ID：13103096
> 
> 赞同：2
> 
> 时间：2012-10-27T18:46:50.907
> 
> 标签：sql, database, postgresql, rank

我的数据库类有一个我无法弄清楚的问题。

我有一张名为**counties**的表，如下所示：

```
state_code | name | population
           |      |
           |      | 
```

（每个 state_code 中有多个县）

还有一个叫做**states**的表，它只是

```
state_code | name 
           |
           | 
```

无论如何，我需要一个返回方案（state_name，county_name，county_population）的查询，它按州名的顺序列出每个州中人口最多的五个县名（按人口降序排列）以及这些县的人口。

我有一个生成正确方案的查询，但它显示的结果太多，而不仅仅是前 5 个：

```
SELECT state.name AS state_name, county.name AS county_name, county.population 
FROM state JOIN county ON state.code = county.state_code 
GROUP BY state.name, county.name, county.population
ORDER BY state.name, county.population DESC 
```

我尝试了涉及排名的更复杂的解决方案，但是我们学校只有 PostgreSQL 版本 8.3，它没有 PARTITION OVER 或 RANK()，这让事情变得非常困难。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-27T19:18:55.240

```
select state_name, county_name, population
from (
    select
        s.name state_name,
        c.name county_name,
        c.population,
        row_number() over(partition by s.state_code order by population desc) rn
    from
        states s
        inner join
        counties c on s.state_code = c.state_code
) s
where rn <= 5
order by state_name, population desc 
```

row_number 窗口函数对每个状态内的行进行编号。在外部查询中，我将行号限制为 5 或更少。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-27T19:17:48.033

这个解决方案非常缓慢和痛苦，但我相信它应该给你你想要的。我很想知道是否有人能想出一个更优雅的解决方案。

```
 SELECT state.name AS state_name, county.name AS county_name, county.population
 FROM state JOIN county ON state.code = county.state_code
 WHERE  county.name IN (SELECT county.name, COUNT(*) FROM county
          INNER JOIN county AS second_county ON (county.name = second_county.name) AND 
          (county.state_code = second_county.state_code) AND (county.population < state.population) GROUP BY county.name HAVING COUNT(*) <=5)
GROUP BY state.name, county.name, county.population
ORDER BY state.name, county.population DESC 
```

# r - 在 r 函数 scatter3d 中保存可旋转图

> ID：13103099
> 
> 赞同：1
> 
> 时间：2012-10-27T18:47:44.543
> 
> 标签：r, 3d, scatter-plot

我一直在使用 r 函数 scatter3d() 创建图表并将它们保存为快照以用于发布目的，但想知道是否有一种方法可以保存交互式图表以用于演示目的。

谢谢

# c - GCC C 认为我将函数声明为静态的？

> ID：13103107
> 
> 赞同：0
> 
> 时间：2012-10-27T18:49:08.483
> 
> 标签：c, gcc, static, function-pointers, non-static

所以我在程序的开头有一个头文件和 2 个 .c 文件。我去编译，我收到错误消息（一遍又一遍）

```
command_parser.c:74:6: error: static declaration of ‘read_args_file’ follows non-static     declaration
command_parser.h:9:6: note: previous declaration of ‘read_args_file’ was here 
```

现在我不在我的程序中使用静态关键字 ANYWHERE ......那么为什么 GCC 会认为我已经声明了一个静态函数？

以下是 .h 和 .c 文件中 read_args_file 声明的相关代码：

```
void read_args_file(char* file_name, char* out_file_name, int (*command_read)(char* command, FILE* out));

void read_args_file(char* file_name, char* out_file_name, int (*command_read)(char* command, FILE* out)) {
.....
} 
```

编辑：

整个 .h 文件是：

```
#ifndef COMMAND_PARSER_H_
#define COMMAND_PARSER_H_

#include <stdio.h>
#include <string.h>
#include <stdlib.h>

/* line 8 follows: */
void switch_parsing(int argc, char* argv[], int (*command_read)(char* command, FILE* out), char* (*pr    int_usage)()) {
void read_args_file(char* file_name, char* out_file_name, int (*command_read)(char* command,     FILE* ou    t));
void read_args_input(int (*command_read)(char* command, FILE* out));

#endif 
```

command_parser.c 文件直到函数定义为：

```
void switch_parsing(int argc, char* argv[], int (*command_read)(char* command, FILE* out), char* (*print_usage)()) {

    char* arg;
    char* return_string;
    char* wrong_string = "Please enter either -i, -h, or -f as a switch. Use -h for help.\n";
    char* invalid_f_args = "You entered an invalid number of arguments for the -f switch! Only two are permitted, <commands_file> and <output_file>.\n";
    int str_len = 0;

    char cur;

    if (argc > 1) {
        arg = argv[1];
    }
    else {
        arg = "\0";
    }

    str_len = strlen(arg);
    if (str_len == 2) {
        if (arg[0] == '-') {
            cur = arg[1];
            if (cur == 'i') {
                read_args_input(command_read);
                return_string = "";
            }
            else if (cur == 'f') {
                if (argc == 4) {
                    read_args_file(argv[2], argv[3], (*command_read));
                    return_string = "";
                }
                else {
                    return_string = invalid_f_args;
                }
            }
            else if (cur == 'h') {
                return_string = print_usage();
            }
            else {
                return_string = "The switch ";
                return_string = strcat(return_string, &cur);
                return_string = strcat(return_string, " is an invalid switch.\n");
            }
        }
    }
    else if (str_len == 1) {
        return_string = wrong_string;
    }
    else if (str_len > 2) {
        return_string = wrong_string;
    }
    else if (str_len == 0) {
        return_string = print_usage();
    }
    else {
        return_string = wrong_string;
    }
}

/**
 * Reads arguments from a passed in file name, and writes the output from the commands
 * in the file to the out_file_name. Arguments are run through command_read function
 * passed in to be executed.
 */
/* line 74 follows: */
void read_args_file(char* file_name, char* out_file_name, int (*command_read)(char* command, FILE* out)) { 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-27T19:28:38.387

.h 文件第 8 行中有一个大括号打开：`void switch_parsing(int argc, ..... ){`

后面的行被编译器当作一个大的函数体，编译器找不到匹配的'}'后会发现最终的错误。很多行（和文件）之后。OP 很幸运：编译器首先发现了另一个（语义）错误。

# c++ - 为什么 g++ 找不到 iostream.h？

> ID：13103108
> 
> 赞同：22
> 
> 时间：2012-10-27T18:49:12.737
> 
> 标签：c++, g++

我试图了解如何在 Ubuntu 上使用 g++ 和（最终）Clang 从命令行编译 C++ 程序。

我找到了一个解释 MakeFiles 的网页，我正在按照他们的指示进行操作。[http://mrbook.org/tutorials/make/](http://mrbook.org/tutorials/make/)

我将四个示例文件下载到它们自己的目录中。

*   主文件
*   你好.cpp
*   阶乘.cpp
*   函数.h

然后我继续运行他们的示例，说明如何在没有 MakeFile 的情况下手动编译。

```
g++ main.cpp hello.cpp factorial.cpp -o hello 
```

当我从上面运行命令时，我从 g++ 收到以下错误：

```
main.cpp:1:22: fatal error: iostream.h: No such file or directory
compilation terminated.
hello.cpp:1:22: fatal error: iostream.h: No such file or directory
compilation terminated. 
```

我编写 c++ 的唯一经验是使用 IDE，例如 VS C++ Express 或 CodeBlocks。编译器不应该知道 iostream.h 是什么以及在哪里可以找到它吗？

我如何摆脱这个错误，以便程序可以编译？

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2012-10-27T18:51:24.527

在 C++ 语言被 ISO 标准化之前，头文件被命名为`<iostream.h>`，但是当 C++98 标准发布时，它被重命名为 just `<iostream>`（不带`.h`）。更改要使用的代码`#include <iostream>`，它应该可以编译。

您还需要向`using namespace std;`每个源文件添加一条语句（或在每个对 iostream 函数/对象的引用前加上`std::`说明符），因为在预标准化的 C++ 中不存在命名空间。C++98 将标准库函数和对象放在`std`命名空间内。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-10-27T19:06:43.633

`<iostream.h>`从来都不是标准的 C++ 头文件，因为它没有成为 C++ 标准。

相反，我们`<iostream>`在 1998 年得到了 ,。

避免使用非标准材料（例如`<iostream.h>`或）的教材`void main`。

但是，作为您当前预标准代码的实用解决方案，您可以尝试替换

```
#include <iostream.h> 
```

和

```
#include <iostream>
using namespace std; 
```

不能保证它会起作用，但很有可能它会起作用。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-11-06T06:41:41.697

此处未提及的另一个相关问题（因此我将其包括在内以供任何人将来参考）是，编译器需要从命令行更新环境路径变量以查找 c++ 头文件的位置。在 Windows 中，您可以使用“高级系统属性”GUI 更新路径环境并添加 c++ 包含文件的位置。这将在重新启动 shell 时自动更新 Windows cmd 和 Cygwin 中的 PATH 环境变量。

要从 Linux 或 Cygwin shell 类型更新 PATH... PATH=$PATH:/your_path_here 示例：PATH=$PATH:/cygdrive/c/cygwin/lib/gcc/i686-pc-mingw32/4.7.3/include /c++ 同样添加包含目录也是一个好主意：PATH=$PATH:/cygdrive/c/cygwin/lib/gcc/i686-pc-mingw32/4.7.3/include/ ...或检查正确的安装的包含文件所在位置的目录，我建议安装 mingw 以与 Cygwin 一起使用，它是由 g++ 调用的。

要在 Cygwin 中安装其他所需的软件包，请重新运行 Cygwin 安装实用程序并检查从 Internet 安装以从 Web 存储库添加软件包并添加 mingw-gcc-g++ 和 mingw-binutils。编译： g++ hello.cpp -o hello

如果使用 gcc 实用程序而不是使用以下命令编译： gcc hello.cpp -o hello -lstdc++ ... 以获取您的可执行文件。

只要您安装了 gcc 或 mingw 并且 c++ 包含文件的路径在您的路径环境变量中，这些命令就可以工作。

# c - 我怎么知道要重新分配多少内存？

> ID：13103110
> 
> 赞同：4
> 
> 时间：2012-10-27T18:49:28.513
> 
> 标签：c, memory, alloc

我有一个关于我的应用程序设计的问题。这是伪代码：

```
char* buffer_to_be_filled = (char*) malloc(somesize);
fill_the_buffer(buffer_to_be_filled);
free(buffer_to_be_filled); 
```

问题是我不知道需要多少尺寸`fill_the_buffer`。

我在考虑`fill_the_buffer`函数内部的解决方案。我也许可以在需要时重新分配内部空间；问题是，有没有办法找出我有多少可用空间？

这通常是如何解决的？我认为分配缓冲区的人也应该重新分配缓冲区，对吗？

注意：我正在使用`fread`函数填充缓冲区，所以我不知道我需要多少空间。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-27T18:58:20.620

您的函数不能`realloc`传递给它的指针，因为`realloc`不能保证返回它传递的相同指针（新缓冲区可能太大而无法就地扩展）。典型的解决方案是让函数接受指定缓冲区大小的第二个参数，如果缓冲区太小则返回错误代码。理想情况下，错误代码会告诉用户缓冲区需要多大，这样他们就可以自己重新分配它并调用函数。例如，从`snprintf`（有这个问题）的手册页：

> 函数 snprintf() 和 vsnprintf() 写入的字节数不超过 size 字节（包括终止的空字节 ('\0')）。如果输出由于此限制而被截断，则返回值是字符数（不包括终止的空字节），如果有足够的可用空间，这些字符将被写入最终字符串。因此，大小或更大的返回值意味着输出被截断。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-27T18:53:30.890

您必须将缓冲区大小传递给`fill_the_buffer`函数。如果缓冲区不够大，您的函数必须返回错误值 (f/e -1)。如果成功，您的函数可以返回写入字节数。这种方法是 C 语言的常见做法。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-27T18:56:24.393

似乎该`fill_the_buffer()`函数处于更好的位置来了解...
- 如何最初确定缓冲区的尺寸和/或
- 何时重新分配缓冲区以及分配多少。

因此，更改 API 可能是合适的：

`char * fill_the_buffer()`
或者可能
`char * fill_the_buffer(size_t max_amount_caller_wants)`

fill_the_buffer() 的调用者仍将负责处理函数返回的缓冲区，但分配和维度将留给函数的逻辑。

这种方法通常遵循将实现细节留给较低级别​​的想法，使较高级别更具可读性。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-27T19:06:59.330

如果您在分配空闲内存方面没有问题，我有一个建议：
在程序开始时使用 , 分配一个初始大小`malloc`（尝试对此初始分配做出一个好的猜测），然后`fill_the_buffer`您可能需要分配更多内存或者您可能不需要所有分配的内存。在第一种情况下，您可以在某些步骤中分配适量的内存（取决于您的应用程序和可用的内存）（例如每次泄漏 10MB）然后继续填充缓冲区直到您需要更多内存并在缓冲区填充时重复此操作. 在第二种情况下，您可以简单`realloc`地减少缓冲区分配内存的大小。
但要注意使用`realloc`特别是当你想增加缓冲区的大小时，因为它通常会导致很大的开销（它必须找到足够大的空闲内存部分，然后将所有旧数据复制到新部分并释放旧部分）。

# php - 如何获取用于 php 消费的 smarty 字符串

> ID：13103111
> 
> 赞同：2
> 
> 时间：2012-10-27T18:49:29.217
> 
> 标签：php, variables, smarty

我知道我们应该避免在任何模板引擎中使用 {php} 标记，不过，让我们假设它是这种情况下的唯一方法。

考虑到这一点，我想请求一些帮助，以获取用于 php 消费的 smarty 字符串。

在这种情况下，我想在 srtstr php 函数中访问 $video.yt_id。

我究竟做错了什么？

如何获取 smarty 字符串 {$video.yt_id} 用于 php 消费？

```
{php}
$youtube    = new YouTube( 'I-WANT-THE-YOUTUBE-ID-HERE' );

$meta       = $youtube->get_meta();
$author     = $youtube->get_author();
$comments   = $youtube->get_comments();
{/php}

<p>
Duration: {php} echo sprintf( "%0.2f", $meta['duration'] / 60 ); {/php}mins | 
Rated: {php} echo $meta['rating']; {/php} out of 5 | 
Posted by {php} echo $author['username']; {/php} ( {php} echo $author['age']; {/php} y/o from {php} echo $author['location']; {/php} )
{php} echo nl2br( $meta['description'] ); {/php}
</p> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-27T18:59:32.913

这应该有帮助

```
{php}
    $video = $this->get_template_vars( 'video' );

    $youtube    = new YouTube( $video[ 'yt_id' ] );

    $meta       = $youtube->get_meta();
    $author     = $youtube->get_author();
    $comments   = $youtube->get_comments();

    $this->assign( 'meta', $meta );
    $this->assign( 'author', $author );
    $this->assign( 'comments', $comments );
{/php}

<p>
{assign var="format" value="%0.2f"}
{assign var="meta_duration60" value=$meta.duration/60}
Duration: {$format|sprintf:$duration}mins | 
Rated: {$meta.rating} out of 5 | 
Posted by {$author.username} ( {$author.age} y/o from {$author.location} )
{$meta.description|nl2br}
</p> 
```

`{php}`您可以使用标签访问 smarty 变量`$this->get_template_vars( $varname )`，并使变量从`{php}`模板的其余部分可用`$this->assign( 'varname', $varname )`

对输出的更改未经测试，我希望它会起作用

# authentication - 实现自定义登录处理程序

> ID：13103113
> 
> 赞同：1
> 
> 时间：2012-10-27T18:50:05.137
> 
> 标签：authentication, login, meteor, account

我正在尝试使用 SmartPackage [accounts-anonymous](https://github.com/tmeasday/meteor-accounts-anonymous)，它使用的是看起来像旧 API 的东西：

```
Meteor.accounts.registerLoginHandler(...) 
```

对于较新的（在[dougnukem/meteor-accounts-anonymous](https://github.com/dougnukem/meteor-accounts-anonymous)分叉）：

```
Accounts.registerLoginHandler(...) 
```

但是当使用标准的 accounts-ui 包时，它只是说：

> 未配置登录服务

然后当我连接一个按钮来强制匿名登录时：

```
 Template.hello.events({
    'click input' : function () {
      // LOGIN ANONYMOUSLY
      Meteor.loginAnonymously();
      // template data, if any, is available in 'this'
      if (typeof console !== 'undefined') {
        console.log("You pressed the button");
        console.log("LOGGED IN ANONYMOUSLY AS: " + Meteor.userId());
      }
    }
  }); 
```

我收到一个错误：

```
Exception while invoking method 'login' TypeError: Object #<Object> has no method 'onCreateUserHook'
    at app/packages/accounts-anonymous/anonymous_server.js:10:25
    at tryAllLoginHandlers (app/packages/accounts-base/accounts_server.js:33:25)
    at _.find._.detect (app/packages/underscore/underscore.js:142:20)
    at Array.some (native)
    at _.some._.any (app/packages/underscore/underscore.js:193:59)
    at Function._.find._.detect (app/packages/underscore/underscore.js:141:5)
    at tryAllLoginHandlers (app/packages/accounts-base/accounts_server.js:31:7)
    at Meteor.methods.login (app/packages/accounts-base/accounts_server.js:12:20)
    at app/packages/livedata/livedata_server.js:298:30
    at _.extend.withValue (app/packages/meteor/dynamics_nodejs.js:31:19) 
```

# sql - T:SQL：从行中选择值作为列

> ID：13103114
> 
> 赞同：8
> 
> 时间：2012-10-27T18:50:11.047
> 
> 标签：sql, sql-server, tsql, pivot

我有一个配置文件表，以行样式存储配置文件属性值，例如：

```
[ProfileID]     [PropertyDefinitionID]      [PropertyValue]
1               6                           Jone
1               7                           Smith
1               8                           Mr
1               3                           50000 
```

和另一个属性定义表：

```
[PropertyDefinitionID]  [PropertyName]
6                       FirstName
7                       LastName
8                       Prefix
3                       Salary 
```

如何使用`PIVOT`或任何其他方式以这种方式显示它：

```
[ProfileID] [FirstName] [LastName]  [Salary]
1           Jone        Smith       5000 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-10-27T18:56:57.203

不用关键字很容易做到这一点`PIVOT`，只需分组

```
select
    P.ProfileID,
    min(case when PD.PropertyName = 'FirstName' then P.PropertyValue else null end) as FirstName,
    min(case when PD.PropertyName = 'LastName' then P.PropertyValue else null end) as LastName,
    min(case when PD.PropertyName = 'Salary' then P.PropertyValue else null end) as Salary
from Profiles as P
    left outer join PropertyDefinitions as PD on PD.PropertyDefinitionID = P.PropertyDefinitionID
group by P.ProfileID 
```

您也可以使用`PIVOT`关键字执行此操作

```
select
    *
from
(
    select P.ProfileID, P.PropertyValue, PD.PropertyName
    from Profiles as P
        left outer join PropertyDefinitions as PD on PD.PropertyDefinitionID = P.PropertyDefinitionID
) as P
    pivot
    (
        min(P.PropertyValue)
        for P.PropertyName in ([FirstName], [LastName], [Salary])
    ) as PIV 
```

**更新**：对于属性的动态数量 - 查看[SQL SELECT 语句中的增量值](https://stackoverflow.com/questions/13055295/increment-value-in-sql-select-statement/13055403#13055403)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-10-28T13:23:21.713

看起来您可能需要将未知数量的数据`PropertyName's`转换为列。如果是这种情况，那么您可以使用动态 sql 来生成结果：

```
DECLARE @cols AS NVARCHAR(MAX),
    @query  AS NVARCHAR(MAX)

select @cols = STUFF((SELECT distinct ',' + QUOTENAME(PropertyName) 
                    from propertydefinitions
            FOR XML PATH(''), TYPE
            ).value('.', 'NVARCHAR(MAX)') 
        ,1,1,'')

set @query = 'SELECT profileid, ' + @cols + ' from 
             (
                select p.profileid,
                  p.propertyvalue,
                  d.propertyname
                from profiles p
                left join propertydefinitions d
                  on p.PropertyDefinitionID = d.PropertyDefinitionID
            ) x
            pivot 
            (
                max(propertyvalue)
                for propertyname in (' + @cols + ')
            ) p '

execute(@query) 
```

请参阅[SQL Fiddle with Demo](http://sqlfiddle.com/#!3/210df/2)。

# mysql - 在大型数据库中使用正则表达式搜索文本

> ID：13103117
> 
> 赞同：0
> 
> 时间：2012-10-27T18:51:00.573
> 
> 标签：mysql, regex, text

我正在尝试使用此查询脚本来搜索 mysql 数据库 [http://www.ar-php.org/Examples/ArQuery.php](http://www.ar-php.org/Examples/ArQuery.php)

我只在表中搜索一列..但每一行在该列中有大约 3000 个字符长的文本..我现在只添加了 100 行，但它已经放慢了..

如果我有这样的一百万行，这个脚本会不可用吗？

我应该采取什么路线才能使用此脚本并拥有数百万行长文本..

我的查询如下所示：

SELECT * FROM `articles`WHERE ( REPLACE(text, 'ـ', '') 正则表达式 '(كَ|كِ|كُ|كً|كٍ|كٌ|كْ|كّ|كَّ|كِّ|كُّ|كًّ|كٍّ|كٌّ|ك)( يَ|يِ|يُ|يً|يٍ|يٌ|يْ|يّ|يَّ|يِّ|يُّ|يًّ|يٍّ|يٌّ|ي)(فَ|فِ|فُ|فً|فٍ|فٌ|فْ|فّ|فَّ|فِّ |فُّ|فًّ|فٍّ|فٌّ|ف)')

SELECT * FROM `articles`WHERE ( REPLACE(text, 'ـ', '') 正则表达式 'hell(ö|o|ô|Ö|O|Ô)')

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-27T18:55:33.740

@ali haydar

我绝对建议使用[全文](http://dev.mysql.com/doc/refman/5.0/en/fulltext-search.html)索引和相关的 MySql 函数。正则表达式对于相对较小的文本非常有效，但不适用于在数据库中搜索。全文索引就是为此目的而设计的，它使用极其高效的数据结构来最小化磁盘 I/O 并在大数据中快速搜索。

希望这可以帮助。

# plone - plone 4 带有“and”运算符的新样式集合过滤

> ID：13103124
> 
> 赞同：2
> 
> 时间：2012-10-27T18:51:50.393
> 
> 标签：plone

我一直在尝试使用 plone 4.2.1 中的新集合来过滤一组文档。我不能使用“和”运算符来获得我需要的结果。

例如，我有以下文件：

*   文档1，标记“黄色”
*   document2，标签“黄色”，“红色”
*   文档3，标记“红色”

如何过滤集合以仅显示文档 2？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-28T08:19:36.567

由于缺少和/或运算符，新样式集合是不可能的。:(

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T09:35:13.137

这是不可能的（你想要的方式），但我在collective.ptg.quicksand中做了一个（非常丑陋的）hack（它也有一些小错误（基本上如果标签包含空格）

1）标签作为（css）类添加到内容中

2）一个javascript（或css文件）隐藏那些没有正确类的。

这意味着 document1 有 'div class"yellow"' 而 document2 有 div class="yellow red"。然后你用css（或javascript）隐藏所有div并显示document2

.red.yellow {display: block} 或类似的。

您可以在这里看到这个想法：http://products.medialog.no/galleries/quicksand（虽然这里我没有制作任何包含（红色和黄色）的标签，但这应该只是为了删除“拆分”中的初始化 py 文件，第 82 行：

init.py"> https://github.com/collective/collective.ptg.quicksand/blob/master/collective/ptg/quicksand/init **.py**

# javascript - 预编译 jsrender 模板

> ID：13103131
> 
> 赞同：1
> 
> 时间：2012-10-27T18:52:26.727
> 
> 标签：javascript, jquery, jsrender

我有几个用于所有页面的 jsRender 模板。我宁愿预编译它们并将生成的函数放在外部 js 文件中，而不是使用脚本标记方法。

我看到了一个[先前的问题](https://stackoverflow.com/questions/8888998/jsrender-template-embeddable-in-jquery-plugin)，但所描述的方法似乎不再起作用，或者我做错了什么。

我从控制台调用了 $.templates("#myTemplate")，msanjay 建议并复制/重命名了匿名函数并得到类似这样的东西（这对我未经训练的眼睛来说看起来有点奇怪）：

```
function myTemplate(data, view, j, b, u) {
    var j = j || jQuery.views, h = j.converters.html, ret; try {

        return "<div...";

    } catch (e) { return j._err(e); }
} 
```

如果我然后尝试通过调用 var html = $.render(data, myTemplate); 来使用这个模板 我收到一个错误：

**未捕获的类型错误：对象函数 (a,b){return new p.fn.init(a,b,c)} 的属性“渲染”不是函数**

不确定 jsRender 是否已更改并且不再可能，或者我做错了什么，但任何指导都将受到高度赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-27T19:33:06.927

上次更新有很多 API 更改。看起来`$.render`现在只是`empty object`。

看这个页面[提供预编译模板的工具](https://github.com/BorisMoore/jsrender/issues/30)，你会发现这个演示：[JsRender: Variants and Details](http://borismoore.github.com/jsrender/demos/variants/variants.html)

例如你可以试试这个：

```
var movies = [
    { name: "The Red Violin", releaseYear: "1998" },
    { name: "Eyes Wide Shut", releaseYear: "1999" },
    { name: "The Inheritance", releaseYear: "1976" }
];

var myTemplate = $.templates( "<div>{{:#index+1}}: <b>{{>name}}</b> ({{>releaseYear}})</div>" );
$("#movieList").html(myTemplate.render( movies)); 
```

演示：http: [//jsfiddle.net/76nMC/](http://jsfiddle.net/76nMC/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-27T19:42:22.660

[通过从 strings 编译模板，](http://borismoore.github.com/jsrender/demos/step-by-step/02_compiling-named-templates-from-strings.html)您可能会得到您想要的。简而言之，它看起来像这样：

```
$.templates({
    myTemplateName: " blah blah {{>something}} blah "
});

var tempHtml = $.render.myTemplateName(myData); 
```

我意识到你可能会停留在预编译模板的概念上，因为它会为你节省一些执行时间，但根据我的经验，jsrender 太快了，我从来没有注意到它。

# facebook - Facebook fql location_post 距离奇怪的行为

> ID：13103134
> 
> 赞同：1
> 
> 时间：2012-10-27T18:52:45.273
> 
> 标签：facebook, facebook-fql, distance

我在 FB-FQL 中执行以下查询：

```
SELECT id, tagged_uids, type, coords FROM location_post WHERE distance(latitude, longitude, '37.785834', '-122.406417') < 1000 AND app_id=364316083653078 LIMIT 0, 100 
```

这将返回一个包含两个条目的结果。

但是当我增加距离时，我得到的结果更少？？？（只有1个）

```
SELECT id, tagged_uids, type, coords FROM location_post WHERE distance(latitude, longitude, '37.785834', '-122.406417') < 10000 AND app_id=364316083653078 LIMIT 0, 100 
```

据我了解，第一个查询应该给我 1000 米范围内的帖子，第二个查询应该给我 10'000 米范围内的帖子。所以我应该通过第二个查询获得更多结果？

有任何想法吗？

# windows - 窗户上的 Netbeans + glassfish

> ID：13103136
> 
> 赞同：0
> 
> 时间：2012-10-27T18:53:13.557
> 
> 标签：windows, netbeans, glassfish

我为 Windows 下载了 netbeans+glassfish。并为 glassfish 添加此设置：

```
-Djava.awt.headless=true
-XX:NewRatio=2
-Xmx1400m
-Xss128k
-XX:PermSize=256m
-XX:MaxPermSize=1024m
-Xms1400m
-XX:+UnlockDiagnosticVMOptions
-XX:+AggressiveHeap
-server 
```

但即使是部署一个简单的 Java EE 应用程序也需要超过 5 分钟。在 ubuntu 上需要一分钟，但现在我不能使用 linux。那么，我做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T17:11:22.990

您是否尝试过使用开箱即用的 GlassFish，即没有任何设置？

GlassFish 通常应该在大约 2-3 秒内启动，并且应用程序部署应该相当简单明了。

# django - 尝试直接在 Django 中加载静态 URL 时收到 404 错误

> ID：13103138
> 
> 赞同：1
> 
> 时间：2012-10-27T18:53:36.847
> 
> 标签：django, django-templates, django-staticfiles

当我访问我的静态文件 (http://127.0.0.1:8000/site_media/static/css/site_base.css) 的 url 时，我收到 404 错误消息。

**来自日志的 404**

```
[27/Oct/2012 14:14:54] "GET /site_media/static/js/libs/modernizr-2.5.2.min.js HTTP/1.1" 404 1716
[27/Oct/2012 14:34:20] "GET /site_media/static/css/site_base.css HTTP/1.1" 404 1677 
```

**目录结构**

```
mysite
    |-- manage.py
    |-- mysite
         |-- settings
             |-- base.py
             |-- dev.py
             |-- prod.py
    |-- site_media
       |-- static
           |-- css
               |-- site_base.css 
```

**site_base.html**

```
<link rel="stylesheet" href="{{ STATIC_URL }}css/site_base.css" /> 
```

**设置**

```
TEMPLATE_CONTEXT_PROCESSORS = [
"django.contrib.auth.context_processors.auth",
"django.core.context_processors.debug",
"django.core.context_processors.i18n",
"django.core.context_processors.media",
"django.core.context_processors.request",
"django.contrib.messages.context_processors.messages",
"django.core.context_processors.static",
]

STATICFILES_FINDERS = [
'django.contrib.staticfiles.finders.FileSystemFinder',
'django.contrib.staticfiles.finders.AppDirectoriesFinder',
'django.contrib.staticfiles.finders.DefaultStorageFinder',
]

STATIC_URL = "/site_media/static/"
STATIC_ROOT = os.path.join(PROJECT_ROOT, "site_media", "static") 
```

更新：

**网址.py**

```
from django.conf import settings
from django.conf.urls.defaults import *
from django.views.generic.simple import direct_to_template

from django.contrib.staticfiles.urls import staticfiles_urlpatterns

from django.contrib import admin
admin.autodiscover()

urlpatterns = patterns('',
    url(r"^$", direct_to_template, {'template' : 'home.html' }, name="home"),
    url(r'^admin/doc/', include('django.contrib.admindocs.urls')),
    url(r'^admin/', include(admin.site.urls)),
    url(r'^grappelli/', include('grappelli.urls')),
    url(r'^profile/', include('profiles.urls')),
)

urlpatterns += staticfiles_urlpatterns() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-27T19:49:03.847

**简短的回答**

Django**不在**STATIC_URL 上提供 STATIC_ROOT，除非你也[告诉它](https://docs.djangoproject.com/en/dev/howto/static-files/#serving-static-files-in-development)。

**长答案**

这应该是一个常见问题解答，这是一篇关于[正确使用 django.contrib.staticfiles](http://blog.yourlabs.org/post/30382323418/surviving-django-contrib-staticfiles-or-how-to-manage)的文章（免责声明：由我撰写，感谢反馈）。它就像文档，但试图更短更实用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-05-30T02:06:53.610

使用`<link rel="stylesheet" href="{{ STATIC_URL }}css/site_base.css" />`而不是

`<link href="{%static 'css/style.css'%}" rel="stylesheet">` 并确保您的值 `STATIC_URL = '/static/'`在 settings.py

# css - 固定页面中间按钮的固定位置

> ID：13103145
> 
> 赞同：0
> 
> 时间：2012-10-27T18:54:22.413
> 
> 标签：css, position, margin, fixed

我的页面有一个固定宽度的大 div，如下所示：

```
#index_body{
  width: 1010px;
  background-image: url('images/main_bg_dark.png'); 
  margin: auto;
  overflow: hidden;
  min-height: 50px;
  padding-bottom: 10px;
  border-radius: 7px;
  -moz-box-shadow: 0 5px 15px #000000;
  -webkit-box-shadow: 0 5px 15px #000000;
  box-shadow: 0 5px 15px #000000;
} 
```

我想在页面右侧（垂直中间）添加按钮（20x20px） - 仍然在 index_body 旁边。

所以按钮有代码，如下所示：

```
#butt {
  width:20px;
  height:20px;
  background: url('images/scrollUp.png');
  position:fixed;
  top:50%;
  left:WHAT SHOULD BE HERE??
} 
```

因为这取决于实际分辨率。我的 index_body 始终居中。如果我更改分辨率，我的按钮将移动到左右...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-27T20:03:13.393

不要设置`left`or`right`位置，而是确保按钮元素位于索引元素内，然后使用边距。

`margin: 0px 0px 0px 1010px;`

这是带有您的代码的经过测试和工作的版本 - [http://lukewakeford.co.uk/testsite/blackbutton/](http://lukewakeford.co.uk/testsite/blackbutton/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-27T18:58:49.543

```
#butt {
  width:20px;
  height:20px;
  background: url('images/scrollUp.png');
  position:fixed;
  top:50%;

  right: 10%;
} 
```

10% 是一个示例，更改为看起来不错的百分比，它应该响应屏幕分辨率。

另一方面，为什么要在固定容器内使用固定元素？只需将其设为绝对并将其浮动到右侧并留有余量即可。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-27T19:46:20.320

好的，应该是这样的：

```
#butt {
  width:20px;
  height:20px;
  background: url('images/scrollUp.png');
  position:fixed;
  top:50%;
  margin-left: 1010px;
} 
```

# javascript - 电子邮件验证

> ID：13103146
> 
> 赞同：0
> 
> 时间：2012-10-27T18:54:29.263
> 
> 标签：javascript, jquery, validation

我该如何做与以下代码相反的事情。我需要首先检查它是否是错误的，而不是它是否正确。

```
var a = $("#phone").val();
var filter = /^[0-9]{8}$/;

if(filter.test(a)) {

} else {

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-27T18:57:44.300

改变

```
if(filter.test(a)) 
```

到

```
if(!filter.test(a)) 
```

这 ！将否定布尔值

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-27T18:58:19.127

放！之前`filter.test(a)`或使用`filter.test(a) == false`

```
var a = $("#phone").val();
var filter = /^[0-9]{8}$/;

if(!filter.test(a)) { // or if(filter.test(a) == false)

} else {

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-27T18:58:29.190

如果您需要运行 2 个版本的代码，您已经有一种使用该`if`语句的方法

```
if(filter.test(a)) {
  /* run code if true*/
} else {
  /* run code if false*/
} 
```

要反转`if`测试，只需添加感叹号

```
if( !filter.test(a)) {
 /* run code if false*/
} 
```

# python - Python程序如何计算字母c出现的次数

> ID：13103148
> 
> 赞同：1
> 
> 时间：2012-10-27T18:54:36.083
> 
> 标签：python, count, char

**任务：**

返回`c`string中字符的出现次数`s`，忽略大小写。使用循环。不要使用内置的字符串方法`count`，它会做类似的事情。这个想法是学习编写循环。`s`比较with的字符时应忽略大小写`c`。

**我的尝试：**

```
 def countletter(s, c): #BAD
     count = 0
     for c in s:
        if c == c:
        count += 1
        return count 
```

我在正确的轨道上吗？当我在主要测试它时，我似乎得到了一些断言错误......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-27T18:57:50.820

你`return`在错误的地方。因此，您的函数实际上仅在一次迭代后才返回。

此外，您不应`c`在 for 循环中使用变量名，而应使用一些不同的变量，因为它将`c`函数调用中收到的值替换为`for-loop`.

```
def countletter(s, c): #BAD
    count = 0
    for x in s:
        if x.lower() == c.lower():
            count += 1
    return count

print countletter("abcdefFf","F") #prints 3
print countletter("a","A")        #prints 1 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-27T19:01:23.037

除了上面的答案之外，Python 中还有一个内置的方法计数。你可以在你的项目中使用它，如果这个功能不是家庭作业等。（哦，我现在看到了，这是一个家庭作业。但是额外的信息是无害的。:)）

```
"baris".count("b") 
```

返回 1

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-27T18:58:44.190

如果你比较你`c`定义的变量，`for c in s:`你总是会得到真实的。因此，您的比较应该看起来像`c == 'c'`（您可以弄清楚如何进行不区分大小写的检查）并且您的退货缩进不正确

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-27T19:01:56.937

return 语句的位置是错误的。删除四个空格（或您使用的选项卡）

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-27T20:38:15.900

就像在内置`count()`方法之外执行此操作的另一个示例一样，可以使用生成器表达式和`sum()`内置方法：

```
>>> def countletter(s, c):
...     return sum(x.lower() == c.lower() for x in s)
... 
>>> countletter("abcdefFf", "F")
3
>>> countletter("a", "A")
1 
```

我们所做的是生成一个`True`和`False`s 的生成器（`True`字符匹配的地方）。`sum()`然后会给我们计数，就像`True`在`1`Python 中一样，并且`False`是`0`：

```
>>> True == 1
True
>>> False == 0
True 
```

# c# - 通过通知确定何时启动 Windows 8 应用程序

> ID：13103149
> 
> 赞同：5
> 
> 时间：2012-10-27T18:54:40.167
> 
> 标签：c#, windows-8, microsoft-metro

我的应用程序有通知，当用户单击通知或活动磁贴（当前显示的项目）时，我希望能够将用户带到我的应用程序中的该页面。

当您的应用程序从动态磁贴或 Toast 通知启动时，有没有办法确定磁贴数据是什么？

此外，用户可以右键单击动态磁贴并将其关闭。有没有办法检测到，所以我可以关闭向它们发送动态图块或 WNS 处理？

谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-27T20:00:03.380

当用户通过磁贴启动应用程序时，Windows 不提供确定磁贴内容的方法。根据从以下各项启动的 UX 指南，应具有相应的行为：

*   **主磁贴**：应用程序应启动到用户离开应用程序或应用程序主页的最后位置。
*   **辅助磁贴**：应用程序应启动到应用程序中的特定内容。
*   **Toast**：像辅助磁贴一样，应用程序应该启动到应用程序中的特定内容。

所有三种类型的激活都将导致`OnActivated`事件被触发，[`IActivatedEventArgs.Kind`](http://msdn.microsoft.com/en-us/library/windows/apps/windows.applicationmodel.activation.activationkind)参数设置为`ActivationKind.Launch`。

[对于辅助磁贴和 toast 激活，应用程序可以在LaunchActivatedEventArgs.Argument](http://msdn.microsoft.com/en-us/library/windows/apps/windows.applicationmodel.activation.launchactivatedeventargs.arguments.aspx)参数中提供额外的上下文。

对于辅助磁贴，可以在创建磁贴时通过[`SecondaryTile.Arguments`](http://msdn.microsoft.com/en-us/library/windows/apps/windows.ui.startscreen.secondarytile.arguments.aspx)属性设置启动参数参数。

对于 toast 通知，启动参数参数设置为 toast 通知 XML 中的属性：

```
<toast launch="myLaunchContext">
    ...
</toast> 
```

最后，应用程序不需要检查磁贴是否已被用户打开或关闭。Windows 和 WNS 将确定是否需要交付。用户可以在应用未运行时打开/关闭磁贴，因此应用保存的状态可能与设置不同步。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-27T19:03:09.153

你可以检测到应用程序午餐`App.xaml.cs`

```
 protected override void OnActivated(IActivatedEventArgs args)
    {
        base.OnActivated(args);

        if(args.Kind == ActivationKind.Launch)
        {

        }
    } 
```

[这](http://msdn.microsoft.com/en-us/library/windows/apps/xaml/Hh868212%28v=win.10%29.aspx)是有关如何处理`ToastNotification`单击事件的信息。

# python - 使用 rauth 连接到 LinkedIn API

> ID：13103154
> 
> 赞同：3
> 
> 时间：2012-10-27T18:55:20.883
> 
> 标签：python, api, oauth, linkedin, rauth

我正在尝试让一个网站连接到 LinkedIn，我知道我必须使用 OAuth 令牌来连接它，并且我已经在 LinkedIn 开发人员网站上看到了示例，但是，它们都使用 OAuth2 库和网站我正在使用 rauth 库，它似乎跳过了一些步骤。它已经集成了 Twitter，所以我将包含下面的代码，以防有人不太明白我的意思。

### 推特.py：

```
import json

from django.http import HttpResponse
from django.conf import settings
from rauth.service import OAuth1Service

def twitter(request, username):
    twitter = OAuth1Service(
    name='twitter',
    consumer_key=settings.TWITTER_CONSUMER_KEY,
    consumer_secret=settings.TWITTER_CONSUMER_SECRET,
    request_token_url=settings.TWITTER_API_URL + 'oauth/request_token',
    access_token_url=settings.TWITTER_API_URL + 'oauth/access_token',
    authorize_url=settings.TWITTER_API_URL + 'oauth/authorize',
    header_auth=True)

url = '{0}1/statuses/user_timeline.json?include_rts=false' \
    '&exclude_replies=true&count=50&screen_name={1}'.format(
        settings.TWITTER_API_URL, username)

r = twitter.request('GET', url, access_token=settings.TWITTER_USER_KEY,
                    access_token_secret=settings.TWITTER_USER_SECRET)

return HttpResponse(content=json.dumps(r.response.json),
                    status=r.response.status_code,
                    content_type=r.response.headers['content-type']) 
```

由于没有评论，我认为它向`url`发送时返回用户时间线的请求发出请求，但为什么没有请求令牌创建**或**访问令牌创建？它有`TWITTER_USER_KEY`and `TWITTER_USER_SECRET`，但 rauth 文档说你应该调用显式方法来获取令牌。我在这里想念什么？

**编辑：**我很想只使用 rauth 库，而不是干涉其他库。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-15T16:48:56.947

```
r = twitter.request('GET', url, access_token=settings.TWITTER_USER_KEY,
                access_token_secret=settings.TWITTER_USER_SECRET) 
```

函数**twitter**创建一个 OAuth1Service 并返回该对象。上面的代码请求用户时间线，似乎访问令牌和秘密存在于设置对象中。可能是用于获取访问令牌和机密的身份验证例程在其他地方。

一个典型的库使用示例（直接取自 rauth 文档[http://packages.python.org/rauth/](http://packages.python.org/rauth/)）

```
service = OAuth1Service(
           name='example',
           consumer_key='123',
           consumer_secret='456',
           request_token_url='http://example.com/request_token',
           access_token_url='http://example.com/access_token',
           authorize_url='http://example.com/authorize')

request_token, request_token_secret = service.get_request_token()
authorize_url = service.get_authorize_url(request_token) 
```

授权 URL 被传递给浏览器，以便它将用户重定向到 oAuth 提供者的网站，他可以授予应用程序的权限，然后重定向到客户端，并且可以发送以下请求以获取访问令牌，使用该请求访问可以获取数据。

```
response = service.get_access_token(method='GET'
                             request_token=request_token,
                             request_token_secret=request_token_secret)
request_token, request_token_secret = service.get_request_token() 
```

快乐编码:)

# bitbucket - 批准按钮对 bitbucket.org 上的变更集有什么作用？

> ID：13103155
> 
> 赞同：89
> 
> 时间：2012-10-27T18:55:24.477
> 
> 标签：bitbucket, changeset

使用 Bitbucket 进行源代码控制时，提交页面的右上角会出现一个“批准”按钮：

![Bitbucket 批准按钮](../Images/e1832633a757ad8373a2384cb0c32b6c.png)

它似乎在存储库概述页面中生成了一条活动消息：

![在此处输入图像描述](../Images/5d3f353f24fde0d8eb69f8fb783b0cb1.png)

这就是它的全部吗？该按钮的预期用途是什么？它只是一个社交功能吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2016-04-28T05:10:24.150

一个用例是当拉取请求获得一定数量的批准时，它会自动或手动合并。

因此，过滤所有准备合并的拉取请求变得很容易。

这是代码审查工具中相当常见的功能。我发现它也几乎相同`GitLab`。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2021-01-05T03:25:52.070

问题是关于提交，而不是请求请求。我刚刚从已批准的提交中创建了一个新的拉取请求，并且批准该提交的同一审阅者对拉取请求没有自动批准。确实是社交功能。

# c# - 自定义属性以确定方法是否可以处理

> ID：13103158
> 
> 赞同：0
> 
> 时间：2012-10-27T18:56:08.060
> 
> 标签：c#, winforms, .net-4.0, attributes

我试图找出是否可以设置自定义属性来确定方法调用是否可以处理。我想要的类似于`[Authorize()]`我在 MVC3 应用程序中使用的属性。

基本上，我有一个正在与之交互的 COM 对象（第 3 方 DMS 软件），我想确保用户在处理方法的内容之前没有关闭程序。我可以将调用包装在 a 中，`try/catch`或者我可以包装一个检查 的方法`application.running`，但我喜欢属性功能和简单的标记（如果需要）。

到目前为止，我发现的所有教程/文档都是如何使用属性标记方法/类（它们通常在教程中使用字符串），然后稍后在代码中访问这些字符串值。

* * *

如果可能的话，这不是我想做的事情。同样，在 MVC3/4 中，您可以这样做...

```
[Authorize()]
public class ControllerClass : Controller {
   public ActionResult Index(){ return View(); }
   ....etc....
} 
```

在此示例中，索引始终必须由通过的人调用`Authorize`。我不确定是否需要实例化类或调用方法。

所以毕竟我的问题很简单。`Authorize()`可以为 C# WinForms 库实现类似的东西吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-27T19:00:16.727

是的，您可以通过[PostSharp之类的](http://www.sharpcrafters.com/)[AOP](http://en.wikipedia.org/wiki/Aspect-oriented_programming)框架来实现它。样本：

```
[Serializable]
public class LogAttribute : OnMethodBoundaryAspect
{
    public override void OnEntry(MethodExecutionArgs args)
    {
        if (!application.running)
            throw new Exception(String.Format("Method {0} is not allowed to call when application is not running.", args.Method.Name));
    }
} 
```

# ruby-on-rails - Ruby on rails 邀请/注册

> ID：13103160
> 
> 赞同：0
> 
> 时间：2012-10-27T18:56:27.057
> 
> 标签：ruby-on-rails, ruby, invitation

我目前正在构建一个应用程序，其中一部分是邀请/注册系统。目前系统中有“课程”和“教室”。因此，“课程”是一些课程，“教室”是课程的特定实例。前任 可能有 1 门课程，但该课程的 3 个课堂实例，具有不同的开始/结束日期、略有不同/更新的材料等。现在，可以邀请“员工”参加“课程”，但“员工” ” 他们自己，必须选择一个特定的“教室”来注册。因此，员工会转到他/她的个人资料页面，其中会显示邀请。现在员工单击邀请，然后可以选择要注册的特定教室。这显然应该创建一个注册。但，它也应该摆脱邀请，因为它已被“接受”。目前我已经设置好，以便“员工”通过“注册”拥有许多“教室”。此外，“员工”通过“邀请”有许多“课程”。但这似乎不对，因为当员工单击某个邀请时，他们将被带到一个注册页面（注册控制器），在那里将创建一个注册。创建注册后，应删除邀请。所以现在我猜注册控制器应该能够创建注册和删除邀请。这似乎是糟糕的设计。我对教室和员工之间的关系很满意，但员工和邀请之间的关系似乎很糟糕。你会怎么做？因为它已被“接受”。目前我已经设置好，以便“员工”通过“注册”拥有许多“教室”。此外，“员工”通过“邀请”有许多“课程”。但这似乎不对，因为当员工单击某个邀请时，他们将被带到一个注册页面（注册控制器），在那里将创建一个注册。创建注册后，应删除邀请。所以现在我猜注册控制器应该能够创建注册和删除邀请。这似乎是糟糕的设计。我对教室和员工之间的关系很满意，但员工和邀请之间的关系似乎很糟糕。你会怎么做？因为它已被“接受”。目前我已经设置好，以便“员工”通过“注册”拥有许多“教室”。此外，“员工”通过“邀请”有许多“课程”。但这似乎不对，因为当员工单击某个邀请时，他们将被带到一个注册页面（注册控制器），在那里将创建一个注册。创建注册后，应删除邀请。所以现在我猜注册控制器应该能够创建注册和删除邀请。这似乎是糟糕的设计。我对教室和员工之间的关系很满意，但员工和邀请之间的关系似乎很糟糕。你会怎么做？通过“邀请”。但这似乎不对，因为当员工单击某个邀请时，他们将被带到一个注册页面（注册控制器），在那里将创建一个注册。创建注册后，应删除邀请。所以现在我猜注册控制器应该能够创建注册和删除邀请。这似乎是糟糕的设计。我对教室和员工之间的关系很满意，但员工和邀请之间的关系似乎很糟糕。你会怎么做？通过“邀请”。但这似乎不对，因为当员工单击某个邀请时，他们将被带到一个注册页面（注册控制器），在那里将创建一个注册。创建注册后，应删除邀请。所以现在我猜注册控制器应该能够创建注册和删除邀请。这似乎是糟糕的设计。我对教室和员工之间的关系很满意，但员工和邀请之间的关系似乎很糟糕。你会怎么做？邀请应该被删除。所以现在我猜注册控制器应该能够创建注册和删除邀请。这似乎是糟糕的设计。我对教室和员工之间的关系很满意，但员工和邀请之间的关系似乎很糟糕。你会怎么做？邀请应该被删除。所以现在我猜注册控制器应该能够创建注册和删除邀请。这似乎是糟糕的设计。我对教室和员工之间的关系很满意，但员工和邀请之间的关系似乎很糟糕。你会怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-27T20:20:33.940

为什么不简单地使用`status`模型中的属性来管理邀请过程？

我将使用以下模型：

1.  `Employee`，应用程序的用户；
2.  `Course`，要遵循的过程；
3.  `Classroom`，属于a `Course`（一个有很多的课程`classrooms`）。
4.  `Participation`，在员工、课程和教室之间建立联系。该模型的状态取决于参与课程的演变：`invited`员工被邀请`enrolled`的时间、员工选择教室的时间等。

该模型的骨架`Participation`将是：

```
 class Participation < ActiveRecord::Base
   attr_accessible :status

   belongs_to :employee
   belongs_to :course
   belongs_to :classroom
   #...

   validates_uniqueness_of :employee_id, :scope => [course_id, :classroom_id]
 end 
```

对给定课程和教室的员工有独特性要求。并且可能只针对课程本身，而不考虑课堂，具体取决于您的选择。

我将在`Participations`表上添加一个唯一索引：

```
 add_index :participation, [employee_id, course_id, classroom_id], unique => true 
```

应邀请，将创建参与实例（状态`invited`），其中对应`employee_id`的 和`course_id`，`classroom_id`留空。在注册时，将使用`classroom_id`和 状态更新参与`enrolled`。

它符合您的需求吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-27T20:24:52.047

一个简单的解决方案是`accepted`在邀请模型中添加一个布尔字段。选择课堂/课程后，设置`accepted`为 true。然后在个人资料页面上，仅显示`accepted`虚假邀请。

# iphone - 使用 iPhone 加速度计计算步数时过滤不良数据

> ID：13103165
> 
> 赞同：1
> 
> 时间：2012-10-27T18:57:17.407
> 
> 标签：iphone, objective-c, ios

我发现此代码用于计算用户的脚步，但它无法正常工作。它没有显示确切的结果。

```
- (void)accelerometer:(UIAccelerometer *)accelerometer didAccelerate:(UIAcceleration *)acceleration {
    const float violence = 1.2;
    static BOOL beenhere;
    BOOL shake = FALSE;
    if (beenhere) return;
    beenhere = TRUE;
    if (acceleration.x > violence || acceleration.x < (-1* violence))
       shake = TRUE;
    if (acceleration.y > violence || acceleration.y < (-1* violence))
       shake = TRUE;
    if (acceleration.z > violence || acceleration.z < (-1* violence))
       shake = TRUE;
    if (shake) {
       steps=steps+1;
     }
  beenhere = false;
} 
```

它也在检测错误的步骤。如何通过应用过滤器删除错误步骤？

几天来我一直在寻找信息，并在这里找到了一些信息：[http](http://www.analog.com/library/analogDialogue/archives/41-03/pedometer.html) ://www.analog.com/library/analogDialogue/archives/41-03/pedometer.html ，但我无法应用它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-28T00:15:11.013

它可能有助于获得加速度矢量的大小，而不是测试 x、y 或 z。你为什么不绘制数据，看看哪里出错了？例如，保留一组加速度矢量幅度，并标记它们触发步骤的位置。像这样的东西：

```
typedef struct accelData {
    float mag;
    BOOL causedStep;
} accelData;
accelData gAcceleration[kMaxDataPoints];
int i = 0;
-(void)accelerometer:(UIAccelerometer *)accelerometer didAccelerate:(UIAcceleration *)acceleration {
    const float violence = 1.2;
    float magnitudeOfAcceleration = sqrt (acceleration.x*acceleration.x + acceleration.y * acceleration.y + acceleration.z * acceleration.z);
    BOOL shake = magnitudeOfAcceleration > violence;
    gAcceleration[i].mag = magnitudeOfAcceleration;
    if (shake)
    {
        steps++;
        gAcceleration[i].causedStep = YES;
    }
    else
    {
        gAcceleration[i].causedStep = NO;
    }
} 
```

一旦你有了这些数据，你就可以分析它，看看是什么导致了错误的步骤记录。也许您需要对数据进行低通滤波以减少噪声或类似的东西。

# visual-c++ - MSVC/VS2012 中的冲突运行时库

> ID：13103166
> 
> 赞同：2
> 
> 时间：2012-10-27T18:57:18.030
> 
> 标签：visual-c++, linker, msvcrt, glew

我知道：[这已经解决了](https://stackoverflow.com/questions/3007312/resolving-lnk4098-defaultlib-msvcrt-conflicts-with)，但是在阅读了尽可能多的内容之后，我仍然无法弄清楚为什么我无法修复它，或者甚至要修复*什么*。

你看，根据[这个](http://msdn.microsoft.com/en-us/library/abx4dbyh%28v=vs.80%29.aspx)，如果你的项目同时使用两个不同的标准运行时库进行编译，就会出现问题。其中最常见的似乎是**libcmt.lib**和**msvcrt.lib**，以及它们的调试等效项。

显然，我的项目同时使用**了这两种**方法，因此同时出现以下警告：

```
1>LINK : warning LNK4098: defaultlib 'LIBCMT' conflicts with use of other libs; use /NODEFAULTLIB:library
1>LINK : warning LNK4098: defaultlib 'MSVCRT' conflicts with use of other libs; use /NODEFAULTLIB:library
1>glew32s.lib(glew.obj) : warning LNK4099: PDB 'vc100.pdb' was not found with 'glew32s.lib(glew.obj)' or at 'C:\Programming\VS\Play_VS\Debug\vc100.pdb'; linking object as if no debug info 
```

如您所见，我为此使用了 glew 。代码编译时没有任何错误，但我使用的唯一外部库是**GLEW/GLFW/GLU/GLM**这一事实让我想知道我当前的构建中是否存在任何配置问题。除了本机 STL 实现之外，我没有使用 MFC 或 ATL 或任何其他 Visual C++ 库。

首先，我会说我已经尝试将项目的属性设置为`Multi-Threaded [Debug] DLL`to `Multi-Threaded [Debug]`，这似乎通过产生以下输出使事情变得更糟：

```
1>MSVCRT.lib(MSVCR110.dll) : error LNK2005: _free already defined in LIBCMTD.lib(dbgfree.obj)
1>MSVCRT.lib(MSVCR110.dll) : error LNK2005: _malloc already defined in LIBCMTD.lib(dbgmalloc.obj)
1>MSVCRT.lib(MSVCR110.dll) : error LNK2005: _fprintf already defined in LIBCMTD.lib(fprintf.obj)
1>MSVCRT.lib(MSVCR110.dll) : error LNK2005: ___iob_func already defined in LIBCMTD.lib(_file.obj)
1>MSVCRT.lib(MSVCR110.dll) : error LNK2005: _strchr already defined in LIBCMTD.lib(strchr.obj)
1>MSVCRT.lib(ti_inst.obj) : error LNK2005: "private: __thiscall type_info::type_info(class type_info const &)" (??0type_info@@AAE@ABV0@@Z) already defined in LIBCMTD.lib(typinfo.obj)
1>MSVCRT.lib(ti_inst.obj) : error LNK2005: "private: class type_info & __thiscall type_info::operator=(class type_info const &)" (??4type_info@@AAEAAV0@ABV0@@Z) already defined in LIBCMTD.lib(typinfo.obj)
1>LINK : warning LNK4098: defaultlib 'LIBCMT' conflicts with use of other libs; use /NODEFAULTLIB:library
1>LINK : warning LNK4098: defaultlib 'MSVCRT' conflicts with use of other libs; use /NODEFAULTLIB:library
1>C:\Programming\VS\Play_VS\Debug\Play_VS.exe : fatal error LNK1169: one or more multiply defined symbols found 
```

同样，查看我的 Debug 和 Release 版本的编译标志告诉我`/MT`(libcmt.lib) 在任何一个命令生成输入中都不存在。据我所知，大多数在 Windows 中编写原生 C++ 应用程序的人都`/MD`使用`msvcrt.lib`.

**调试构建输入**

```
/GS /analyze- /W3 /Zc:wchar_t /ZI /Gm /Od /Fd"Debug\vc110.pdb" /fp:precise /D "GLEW_STATIC" /D "_CRT_SECURE_NO_WARNINGS" /D "_MBCS" /errorReport:prompt /WX- /Zc:forScope /RTC1 /GR /Gd /Oy- /MDd /Fa"Debug\" /EHsc /nologo /Fo"Debug\" /Fp"Debug\Play_VS.pch" 
```

**发布构建输入**

```
/GS /GL /analyze- /W3 /Gy /Zc:wchar_t /Zi /Gm- /O2 /Fd"Release\vc110.pdb" /fp:precise /D "_CRT_SECURE_NO_WARNINGS" /D "_MBCS" /errorReport:prompt /WX- /Zc:forScope /Gd /Oy- /Oi /MD /Fa"Release\" /EHsc /nologo /Fo"Release\" /Fp"Release\Play_VS.pch" 
```

我怎样才能解决这个问题？我很感激帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-03-13T15:44:34.043

您正在混合使用 /MD（使用 CRT 的 DLL 版本）编译的代码与使用 /MT（使用静态 CRT 库）编译的代码。那行不通，必须使用相同的设置编译所有源代码文件。鉴于您使用使用 /MD 预编译的库，几乎总是正确的设置，您也必须使用此设置编译您自己的代码。

项目 + 属性、C/C++、代码生成、运行时库。

请注意，这些库可能是使用早期版本的 CRT 编译的，msvcr100.dll 是相当新的。不确定这是否会引起麻烦，您可能必须阻止链接器生成清单。您还必须确保将所需的 DLL 部署到目标计算机，包括 msvcr100.dll

有同样的问题： [error LNK2005: xxx already defined in MSVCRT.lib(MSVCR100.dll) C:\something\LIBCMT.lib(setlocal.obj)](https://stackoverflow.com/questions/2728649/error-lnk2005-xxx-already-defined-in-msvcrt-libmsvcr100-dllc-something-libc)

# python - 在 Tkinter python 2.7 中绑定

> ID：13103167
> 
> 赞同：0
> 
> 时间：2012-10-27T18:57:19.137
> 
> 标签：python, binding, tkinter

我希望我的按钮在两个字符串之间交替按下它。例如，第一次我希望按钮将标签更改为“Hi”，然后第二次按下按钮时它会说“再见”，然后第三次它会返回“Hi”。最好的解决方案是使用计数器吗？或绑定？（我听说过，我不确定它是如何工作的）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-27T20:07:19.673

我会用[`itertools.cycle`](http://docs.python.org/library/itertools.html#itertools.cycle)这个：

```
>>> import itertools
>>> texts = itertools.cycle(['Hi', 'Bye'])
>>> print next(texts)
Hi
>>> print next(texts)
Bye
>>> print next(texts)
Hi
>>> print next(texts)
Bye 
```

**编辑**

一个简单的例子：

```
import itertools
from Tkinter import *

class App:

    def __init__(self, master):

        frame = Frame(master)
        frame.pack()

        self.texts = itertools.cycle(['Hi', 'Bye'])

        self.var = StringVar()
        self.label = Label(frame, textvariable=self.var)
        self.label.pack(side=LEFT)

        self.button = Button(frame, text="Set Text", command=self.change_text)
        self.button.pack(side=LEFT)

    def change_text(self):
        self.var.set(next(self.texts))

root = Tk()
app = App(root)
root.mainloop() 
```

# android - Android - 在我自己的设备上测试时应用启动时出错

> ID：13103168
> 
> 赞同：2
> 
> 时间：2012-10-27T18:57:27.570
> 
> 标签：android

我有一个免费的 Android 应用程序，我正在尝试创建一个付费版本。我正在尝试在我的设备上对其进行测试，当我第一次在手机上打开应用程序时，我不断收到此崩溃日志：

```
10-25 12:33:26.325: E/AndroidRuntime(18061): java.lang.Error: Unresolved compilation problems: 
10-25 12:33:26.325: E/AndroidRuntime(18061):    The import android.app cannot be resolved
10-25 12:33:26.325: E/AndroidRuntime(18061):    Application cannot be resolved to a type
10-25 12:33:26.325: E/AndroidRuntime(18061):    Override cannot be resolved to a type
10-25 12:33:26.325: E/AndroidRuntime(18061):    The type android.app.Application cannot be resolved. It is indirectly referenced from required .class files
10-25 12:33:26.325: E/AndroidRuntime(18061):    The method init(Application) from the type ACRA refers to the missing type Application
10-25 12:33:26.325: E/AndroidRuntime(18061):    Application cannot be resolved to a type
10-25 12:33:26.325: E/AndroidRuntime(18061):    at business.premium.MyApplication.<init>(MyApplication.java:3)
10-25 12:33:26.325: E/AndroidRuntime(18061):    at java.lang.Class.newInstanceImpl(Native Method)
10-25 12:33:26.325: E/AndroidRuntime(18061):    at java.lang.Class.newInstance(Class.java:1409)
10-25 12:33:26.325: E/AndroidRuntime(18061):    at android.app.Instrumentation.newApplication(Instrumentation.java:966) 
```

有谁知道为什么会发生这种情况以及如何解决它？

谢谢！！

编辑：

这是我的整个 MyApplication.java

```
package business.premium;

import android.app.Application;

import org.acra.*;
import org.acra.annotation.*;

@ReportsCrashes(formKey = "my_key")
public class MyApplication extends Application
{   
    @Override
    public void onCreate() 
    {
        // The following line triggers the initialization of ACRA
        ACRA.init(this);
        super.onCreate();    

    }   
} 
```

# r - R在错误时抛出NA

> ID：13103172
> 
> 赞同：0
> 
> 时间：2012-10-27T18:58:06.487
> 
> 标签：r

假设我想把字符“6000”变成一个整数。我可以做到

```
as.integer(6000) 
```

但是，假设用户输入是“6***”。这给了我一个错误。我如何转换

```
as.integer(6***) 
```

进入北美。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-27T19:08:50.340

你永远不会写`as.integer(6000)`或`as.integer(6***)`。

相反，你会写

```
as.integer("6***") 
```

甚至更有可能

```
as.integer(str) 
```

`str`用户输入提供的一些文本在哪里。也许从文件中读取等等。

在这种情况下

```
as.integer(str) 
```

如果`NA`是`str`包含`6***`.

```
> str = "6***"
> as.integer(str)
[1] 不适用
警告信息：
强制引入的 NA

```

# c# - 组件 c# 中的 UUID 格式不正确

> ID：13103173
> 
> 赞同：2
> 
> 时间：2012-10-27T18:58:07.637
> 
> 标签：c#

我需要下一个代码的帮助，该代码会引发异常 Error emitting 'System.Runtime.InteropServices.GuidAttribute' attribute -- 'Incorrect UUID format.'

```
[GuidAttribute(Discover.CLASS_DiscoverPlugin)]
public class Discover : TCustomDiscoverPlugin
{

    public const string CLASS_TenderDialogePlugin = "{CB19D13D-C194-49f1-B1A0-75B49283CFC8}";
    public const string CLASS_DiscoverPlugin = "{6111098C-B821-432d-9EC3-146BF5D1C276}";

    public override Object PluginGUIDs()
    {
        string[] classIDs = new string[1];
        classIDs[1] = CLASS_TenderDialogePlugin;
        return classIDs;
    }
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-27T19:00:13.613

摆脱大括号 - 这编译没有问题：

```
[GuidAttribute("CB19D13D-C194-49f1-B1A0-75B49283CFC8")] 
```

遗憾的是，没有记录接受的格式，请注意:(

# emacs - nrepl.el：如何将 clojure 缓冲区形式评估为 nrepl 缓冲区而不是回显区域？

> ID：13103177
> 
> 赞同：12
> 
> 时间：2012-10-27T18:58:21.900
> 
> 标签：emacs, clojure

我正在使用来自 git 的 nrepl.el（0.1.6-preview，通过 el-get 配方），我希望 clojure buffer evals: Cx Ce, CMx, Cc Cr 分别用于表单、顶级表单和区域，以将自己发送到 nrepl 缓冲区并在那里进行评估，而不是在屏幕外评估并将结果返回到回显区域的默认行为。

有什么方法可以做到这一点，或者是否有另一组用于此目的的键绑定，我无法通过他们的描述来识别？

谢谢。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-28T03:20:58.467

nrepl.el 目前不支持您描述的行为。

但好消息是您在 emacs 领域，因此应该可以编写自己的自定义处理程序以将输出定向到 nrepl 缓冲区并根据需要调整键绑定。

例如，这相当于 Cx Ce，但将评估结果发送到 repl 缓冲区而不是 minibuffer：

```
(defun my-interactive-eval-to-repl (form)
  (let ((buffer nrepl-nrepl-buffer))
  (nrepl-send-string form (nrepl-handler buffer) nrepl-buffer-ns)))

(defun my-eval-last-expression-to-repl ()
  (interactive)
  (my-interactive-eval-to-repl (nrepl-last-expression))) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-10-03T17:52:29.067

这是一个也将错误发送到正确窗口的版本：

```
(defun my-nrepl-handler (buffer)
  "Make an interactive eval handler for buffer, but emit the value or out to the repl, not the minibuffer."
  (nrepl-make-response-handler buffer
                               (lambda (buffer value)
                                 (progn
                                   (nrepl-emit-result (nrepl-current-repl-buffer) value t)
                                   (nrepl-emit-prompt (nrepl-current-repl-buffer))))
                               (lambda (buffer out)
                                 (nrepl-emit-interactive-output out)
                                 (nrepl-emit-prompt (nrepl-current-repl-buffer)))
                               (lambda (buffer err)
                                 (message "%s" err)
                                 (nrepl-highlight-compilation-errors buffer err))
                               (lambda (buffer)
                                 (nrepl-emit-prompt buffer))))

(defun my-interactive-eval-to-repl (form)
  "Evaluate the given FORM and print value in the repl."
  (remove-overlays (point-min) (point-max) 'nrepl-note-p t)
  (let ((buffer (current-buffer)))
    (nrepl-send-string form (my-nrepl-handler buffer) (nrepl-current-ns))))

(defun my-eval-last-expression-to-repl ()
  (interactive)
  (my-interactive-eval-to-repl (nrepl-last-expression)))

(eval-after-load 'nrepl
  '(progn 
     (define-key nrepl-interaction-mode-map (kbd "C-x C-e") 'my-eval-last-expression-to-repl))) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-26T17:19:05.347

由于此处提供的解决方案均不适用于我拥有的版本，因此我提出了自己的实现：

```
(defun eval-in-nrepl ()
  (interactive)
  (let ((exp (nrepl-last-expression)))
    (with-current-buffer (nrepl-current-repl-buffer)
      (nrepl-replace-input exp)
      (nrepl-return))))

(eval-after-load 'nrepl
  '(define-key nrepl-interaction-mode-map
     (kbd "C-x C-.")
     'eval-in-nrepl)) 
```

它结合 Cx C-。到所需的行为。

# solr - 数据文件夹 solr 中的哪些子文件夹会复制？

> ID：13103185
> 
> 赞同：0
> 
> 时间：2012-10-27T18:59:49.107
> 
> 标签：solr, lucene, indexing

我想向 solr 数据文件夹添加其他数据，不知道如何强制 solr 复制它。似乎默认情况下 solr 只复制索引/拼写检查文件夹。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-28T10:10:23.127

除了索引之外，[conf 文件中的配置文件也会被复制](http://wiki.apache.org/solr/SolrReplication#How_are_configuration_files_replicated.3F)。
您可以添加文件并提及它们以进行复制。

# silverlight - 广告没有出现在模拟器中

> ID：13103186
> 
> 赞同：2
> 
> 时间：2012-10-27T18:59:56.007
> 
> 标签：silverlight, windows-phone-7

我在我的 WP7 应用程序中使用以下代码来显示 Windows 市场的测试广告。当我运行模拟器时，没有显示广告。有什么事 ？

```
 <my:AdControl AdUnitId="Image480_80" ApplicationId="test_client" Grid.ColumnSpan="3" Height="80" HorizontalAlignment="Left" Margin="0,550,0,0" Name="adControl1" VerticalAlignment="Top" Width="480" /> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T05:49:02.870

这是标准行为。该广告未显示在您的模拟器中。这是一张图片来说明我的观点 -

[图片 http://gowthams.in/etc/wp7.PNG](http://gowthams.in/etc/wp7.PNG)

话虽如此，请确保正确指定宽度、高度、广告单元 ID 和应用程序 ID。

# jquery - 将 jquery mobile 全局设置为 mini

> ID：13103187
> 
> 赞同：2
> 
> 时间：2012-10-27T19:00:00.243
> 
> 标签：jquery, mobile, jquery-mobile

我想全局设置我的 jquery 移动应用程序中支持 data-mini 使用它的每个元素。是否有一种全局方法可以做到这一点，而不必将 data-mini='true' 添加到 html 每个元素？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-15T21:44:34.763

今天我遇到了类似的问题。我的要求是能够作为屏幕分辨率检测的一部分即时更改为迷你版本。无论如何，​<code>$('form *')​​​​​​​​.data('mini', true); 也对我不起作用，但我确实有一个解决方法，但它很烦人。我需要“mini-fy”三个元素。一个按钮、一个文本输入（嗯，实际上是一个电子邮件输入）和一个文本区域。

对于我能够使用的按钮，我`$('button').buttonMarkup({mini: true});`使用开发人员 JS 控制台验证它确实有效。从那里我还在`$('textinput').textinput({mini: true})`jquerymobile 文档中找到了，但这对我不起作用。

最后，在研究了 DOM 之后，我尝试简单地将“ui-mini”类添加到文本输入和文本区域，它似乎可以工作。

所以总结一下：

```
$('button').buttonMarkup({mini: true});
$('input').addClass('ui-mini');
$('textarea').addClass('ui-mini'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-27T19:39:51.223

这是一个已注册的[功能请求](https://github.com/jquery/jquery-mobile/wiki/Feature-Requests)，请参阅[默认情况下或在整个容器上使用 data-mini 的能力](https://github.com/jquery/jquery-mobile/issues/4166#issuecomment-5273131)。

这意味着，您可以使用当前版本做的最好的事情就是您所说的，为所有表单元素添加属性。

假设移动页面不会有很多元素，我不会说这是一个问题：

```
​$('form *')​​​​​​​​.data('mini', true); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-10-30T08:56:02.183

我正在使用 jQuery Mobile 1.4.5，下面是最简单的答案：

```
var $widgets = $.mobile.widgets;

$.each($widgets, function(widget) {
    $widgets[widget].prototype.options.mini = true;
}); 
```

* * *

一切都很好，但是...... **listview** 没有改变。

* * *

所以我必须添加：

```
$('ul[data-role=listview]').find('a').addClass('ui-mini'); 
```

* * *

上面添加的代码太丑了，我不得不用这个代替它：

```
<ul data-role="listview">
    <li>
        <a class="ui-mini">Hello World</a>
    </li>
</ul> 
```

手动添加***ui-mini***类就好了，还不错，更帅^o^

# jquery - 在 Textarea 中按 Enter 时提交表单

> ID：13103191
> 
> 赞同：6
> 
> 时间：2012-10-27T19:00:21.233
> 
> 标签：jquery, forms

我一直在尝试各种方法来获取在按下回车键时提交的表单。我知道它适用于输入字段，但因为这将是一个评论，它需要是一个文本区域。

这是我目前使用按钮提交的表单。

```
$('.messageSubmit').live('click', function(){
    var name = $(this).siblings('.messageTextarea').val();
    var theid = $(this).attr('data-the_id');
    var dataString = name;

    $.ajax({
        dataType: 'json',
        url: "https://api.instagram.com/v1/media/"+$(this).attr('data-the_id')+"/comments?"+hash,
        type: "POST",
        data: "text="+dataString,
        success: function(data) {
            // finish load
            console.log(data, dataString, 'fail');
        },
        error: function(data) {
            var username = JSON.parse(localStorage.getItem('iguser'));
            var profilepic = JSON.parse(localStorage.getItem('iguserimg'));
            //console.log(data, dataString, 'succ');

            $('.box[data-the_id="' + theid + '"]').children('.postMessage').children('.messageComments').append('<li><img class="commentUserImg" src="' + profilepic + '"><div class="commentUser">' + username + '</div><div class="commentText">' + dataString + '</div></li>');

            $('.messageTextarea').val(''); // Remove comment from TextArea
        }
    });
    return false;
}); 
```

它像它应该的那样工作。我想删除提交按钮，并在用户按下回车键时提交表单。我知道有些人不建议这样做，但该网站上的用户将习惯于从 Facebook 等点击进入。

我已经尝试过这样的方法，但它似乎没有奏效。

```
$('.messageTextarea').keydown(function() {
    if (event.keyCode == 13) {
        this.form.submit();
        return false;
     }
}); 
```

这是我的表单代码

```
<form>
   <textarea class="messageTextarea" onfocus="if(this.value==this.defaultValue)this.value=\'\';" onblur="if(this.value==\'\')this.value=this.defaultValue;">Write your comment here...</textarea>
    <input type="submit" data-the_id="' + theid + '" name="submit" class="messageSubmit" id="submit_btn" value="Submit your comment">
 </form> 
```

任何帮助都会很棒。此外，如果有人知道如何添加一个 if 函数来阻止表单以 Textarea 中的当前默认值提交，那就太好了。目前，随着文本区域的设置，如果您只是点击提交，它将提交*在这里写下您的评论...*

谢谢

**编辑：解决方法可以...有一个按钮可以提交，就像平常一样，但是隐藏它，当你按下回车键时它会触发对该按钮的调用？但是然后......我会遇到同样的问题，即在 textarea 中输入除了换行之外什么都不做......**

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-10-27T19:04:44.893

我认为您还希望让用户能够使用 shift 转到新行。

```
$('.messageTextarea').on('keyup', function(e) {
    if (e.which == 13 && ! e.shiftKey) {
        // your AJAX call
    }
}); 
```

看到这个：http: [//jsfiddle.net/almirsarajcic/Gd8PQ/](http://jsfiddle.net/almirsarajcic/Gd8PQ/)

它对我有用。

此外，您需要删除当前拥有的提交按钮。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-10-27T19:04:16.827

试试这个[jsfiddle](http://jsfiddle.net/g6vXf/6/)

HTML：

```
<form>
   <textarea class="messageTextarea">Write your comment here...</textarea>

 </form>​ 
```

JS：

```
 $('.messageTextarea').keydown(function(event) {
    if (event.keyCode == 13) {
        $(this.form).submit()
        return false;
     }
}).focus(function(){
    if(this.value == "Write your comment here..."){
         this.value = "";
    }

}).blur(function(){
    if(this.value==""){
         this.value = "Write your comment here...";
    }
});

$("form").submit(function(){
       var name = $(this).siblings('.messageTextarea').val();
    var theid = $(this).attr('data-the_id');
    var dataString = name;

    $.ajax({
        dataType: 'json',
        url: "https://api.instagram.com/v1/media/"+$(this).attr('data-the_id')+"/comments?",
        type: "POST",
        data: "text="+dataString,
        success: function(data) {
            // finish load
            console.log(data, dataString, 'fail');
        },
        error: function(data) {
            var username = JSON.parse(localStorage.getItem('iguser'));
            var profilepic = JSON.parse(localStorage.getItem('iguserimg'));
            //console.log(data, dataString, 'succ');

            $('.box[data-the_id="' + theid + '"]').children('.postMessage').children('.messageComments').append('<li><img class="commentUserImg" src="' + profilepic + '"><div class="commentUser">' + username + '</div><div class="commentText">' + dataString + '</div></li>');

            $('.messageTextarea').val(''); // Remove comment from TextArea
        }
    });

    return false;
});
​
​ 
```

​</p>

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-27T19:01:54.020

试试这种方式

```
<form method="post" action="">
    <textarea></textarea>
</form>

<script type="text/javascript" src="./lib/js/jquery/jquery-1.8.1.min.js"></script>

<script type="text/javascript">
    jQuery('textarea').keydown(function(event) {
        if (event.keyCode == 13) {

            this.form.submit();
            return false;
         }
    });
</script> 
```

我测试了它，它工作

我只将参数添加`event`到函数头

# iphone - iPhone SDK 电子邮件视频

> ID：13103193
> 
> 赞同：2
> 
> 时间：2012-10-27T19:00:35.203
> 
> 标签：iphone, uiimagepickercontroller, mfmailcomposeviewcontroller

> **可能重复：**
> [无法在 iPhone 上发送带有视频/音频附件的电子邮件！](https://stackoverflow.com/questions/1921691/cant-send-email-with-video-audio-attachment-on-iphone)

所以在过去的几天里，我一直在尝试通过电子邮件发送视频。我成功地选择了视频，但我不知道如何将其放入电子邮件中。谢谢。

```
- (void)imagePickerController:(UIImagePickerController *)picker didFinishPickingMediaWithInfo:(NSDictionary *)info {
    [picker dismissViewControllerAnimated:NO completion:NULL];
    NSURL *mediaUrl = [info objectForKey:UIImagePickerControllerMediaURL];

    MFMailComposeViewController *mailcomposer = [[MFMailComposeViewController alloc]init];
    mailcomposer.mailComposeDelegate = self;

    if ([MFMailComposeViewController canSendMail]){

        [mailcomposer setToRecipients:[NSArray arrayWithObjects:@"random@random.com", nil]];
        [mailcomposer setSubject:@""];
        [mailcomposer setMessageBody:@"" isHTML:NO];
        [mailcomposer addAttachmentData:mediaUrl mimeType:@"video/mp4" fileName:@"Video"];
        [self presentViewController:mailcomposer animated:YES completion:NULL];

    }

} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-27T19:06:19.513

您正在将 URL 添加为附件，您需要通过将该 URL 转换为这样的数据来附加 NSData

```
NSData *videoData = [NSData dataWithContentsOfURL:mediaUrl]; 
```

接着

```
[mailcomposer addAttachmentData:videoData mimeType:@"video/mp4" fileName:@"Video"]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-27T19:07:43.917

```
[mailcomposer addAttachmentData:mediaUrl mimeType:@"video/mp4" fileName:@"Video"]; 
```

严重地？您没有阅读 的文档[吗](http://developer.apple.com/library/ios/documentation/MessageUI/Reference/MFMailComposeViewController_class/Reference/Reference.html#//apple_ref/doc/uid/TP40008200-CH1-SW2)`MFMailComposerViewController`？`addAttachmentData:`需要一个`NSData`而**不是**一个 URL。您必须将文件读入内存（使用 NSData）并将该数据添加到邮件编写器控制器。

但是你可能不应该这样做。大型视频文件会占用大量内存。

# python - 使用 beautifulsoup 解析带有一些文本的标签

> ID：13103195
> 
> 赞同：2
> 
> 时间：2012-10-27T19:00:53.933
> 
> 标签：python, web-scraping, beautifulsoup

一些 html 代码包含一些`dt`标签，如下所示：

```
<dt>PLZ:</dt>
<dd>
8047
</dd> 
```

我想在带有 text 的`dd`标签后面的`dt`标签中找到文本`PLZ:`。根据文档，我正在尝试以下操作：

```
number = BeautifulSoup(text).find("dt",text="PLZ:").findNextSiblings("dd") 
```

使用`text`上面的字符串，但我得到的只是一个空列表，而不是我正在寻找的数字（当然是字符串）。也许我误解了文档？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-27T19:20:47.137

所以试试：

```
from BeautifulSoup import BeautifulSoup

text = """
<dt>PLZ:</dt>
<dd>
8047
</dd>"""

number = BeautifulSoup(text).find("dt",text="PLZ:").parent.findNextSiblings("dd")
print BeautifulSoup(''.join(number[0])) 
```

或者如果您使用 findNext 找到，请尝试：

```
number = BeautifulSoup(text).find("dt",text="PLZ:").parent.findNext("dd").contents[0] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-27T19:21:10.120

这对我有用：

```
from BeautifulSoup import BeautifulSoup

text = '''<dt>PLZ:</dt>
<dd>
8047
</dd>'''

BeautifulSoup(text).find("dt",text="PLZ:").parent.findNextSiblings('dd') 
```

# android - AppWidgetHostView 不能处理任何触摸/点击事件？

> ID：13103196
> 
> 赞同：3
> 
> 时间：2012-10-27T19:00:56.873
> 
> 标签：android, android-appwidget

我是新的 stackoverflow 注册用户，但已经使用了很长时间。切入正题：我正在创建一个 android 启动器并希望实现 appWidgets。为了进行测试，我正在使用`com.android.quicksearchbox`小部件并将其添加到屏幕顶部。问题是，我正在使用 AppWidgetHostView，它似乎没有注意到用户所做的任何点击或触摸事件。谁能告诉我为什么？这是我所有的 appWidgets 代码（在`onCreate(Bundle)`函数中）：

```
 android.appwidget.AppWidgetManager appWidgetManager = android.appwidget.AppWidgetManager.getInstance(this);
    android.appwidget.AppWidgetHost appWidgetHost = new android.appwidget.AppWidgetHost(this, 0);
    android.appwidget.AppWidgetProviderInfo newAppWidgetProviderInfo = new android.appwidget.AppWidgetProviderInfo();

    int appWidgetId = appWidgetHost.allocateAppWidgetId();

    List<android.appwidget.AppWidgetProviderInfo> appWidgetInfos = new ArrayList<android.appwidget.AppWidgetProviderInfo>();
    appWidgetInfos = appWidgetManager.getInstalledProviders();

    for(int j = 0; j < appWidgetInfos.size(); j++)
    {
        if (appWidgetInfos.get(j).provider.getPackageName().equals("com.android.quicksearchbox"))
        {

            newAppWidgetProviderInfo = appWidgetInfos.get(j);
            break;
        }
     }

    android.appwidget.AppWidgetHostView hostView = appWidgetHost.createView(this, appWidgetId, newAppWidgetProviderInfo);
    hostView.setAppWidget(appWidgetId, newAppWidgetProviderInfo);

    android.widget.LinearLayout ll = (android.widget.LinearLayout) findViewById(R.id.loll);
    ll.addView(hostView, 0); 
```

大声笑是我的线性布局。

所以有人知道我怎样才能启用事件吗？或者，如果有另一种将应用程序小部件添加到我的启动器的方法？

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2022-01-20T09:19:19.997

使用 FrameLayout 然后添加一个简单的 View 作为重叠来处理点击事件

布局：

```
<layout>
    <FrameLayout xmlns:android="http://schemas.android.com/apk/res/android"
        android:layout_width="match_parent"
        android:id="@+id/container"
        android:layout_height="wrap_content"
        android:layout_marginBottom="8dp"
        android:gravity="center">

        <View
            android:id="@+id/overlap"
            android:layout_width="match_parent"
            android:layout_height="match_parent"
            android:clickable="true"
            android:focusable="true" />
    </FrameLayout>
</layout> 
```

代码：

```
// make sure AppWidgetHostView in bottom layer
AppWidgetHostView.z = -1f
binding.container.addView(AppWidgetHostView, width,height)
binding.overlap.tag = item
binding.overlap.setOnClickListener {
                val widget = it.tag as Widget
                val intent = Intent(context, widget.getConfigActivity())
                intent.putExtra(AppWidgetManager.EXTRA_APPWIDGET_ID, widget.id.toInt())
                context.startActivity(intent)
            } 
```

# android - @style/Theme.Translucent 给出错误

> ID：13103200
> 
> 赞同：4
> 
> 时间：2012-10-27T19:01:38.733
> 
> 标签：android

我正在尝试为我的 android 应用程序使用透明背景，如此处所述：

[http://developer.android.com/training/basics/supporting-devices/platforms.html#style-themes](http://developer.android.com/training/basics/supporting-devices/platforms.html#style-themes)

但我得到这个错误：

> 错误：错误：找不到与给定名称匹配的资源（在“主题”处，值为“@style/Theme.Translucent”）。AndroidManifest.xml /MyFirstApp 第 23 行 Android AAPT 问题

我的设备使用的是 Android 4.1。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-27T19:06:08.717

它是

```
@android:style/Theme.Translucent 
```

不是

```
@style/Theme.Translucent 
```

实际上，`Theme.Translucent`是**android平台资源风格**的一部分。

`@style/Theme.Translucent`当您通过它在本地资源目录中的查找来引用它时。并且没有您声明的任何样式。

# ruby-on-rails-3 - 使用 rspec 测试 rails 引擎助手

> ID：13103206
> 
> 赞同：3
> 
> 时间：2012-10-27T19:02:05.493
> 
> 标签：ruby-on-rails-3, rspec

我搜索了一下，但我找不到一个很好的解释，所以这是我的问题。

我正在编写一个只添加助手的 Rails 引擎。

结构是这样的（重要部分）：

```
my_engine/
  -- app/
     -- helpers/
        -- my_engine/
           -- my_engine_helper.rb
  -- spec/
     -- dummy/
     -- spec_helper.rb 
```

我`spec_helper.rb`的如下：

```
# Configure Rails Envinronment
ENV['RAILS_ENV'] = 'test'
require File.expand_path('../dummy/config/environment.rb',  __FILE__)

require 'rspec/rails'

ENGINE_RAILS_ROOT = File.join(File.dirname(__FILE__), '../')

# Requires supporting ruby files with custom matchers and macros, etc,
# in spec/support/ and its subdirectories.
Dir[File.join(ENGINE_RAILS_ROOT, 'spec/support/**/*.rb')].each { |f| require f }

RSpec.configure do |config|
  config.use_transactional_fixtures = true
end 
```

到目前为止一切顺利，但我不确定如何测试我的助手。我想知道什么是最好的方法：

*   组织测试文件
*   测试虚拟应用程序是否可以使用帮助程序
*   测试助手本身

现在我在运行规范时收到以下错误：

```
undefined local variable or method `helper' for #<RSpec::Core::ExampleGroup::Nested_1::Nested_1:0x007fcee8b0f4a0> 
```

通过以下测试：

```
require 'spec_helper'

module MyEngine
  describe MyEngineHelper do
    describe '#something' do
      it "does something" do
        helper.something.should be_true
      end
    end
  end
end 
```

谢谢 ！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-28T22:29:33.673

将其移至`spec/helpers/my_engine_helper_spec.rb`. 有`rspec-rails`一个钩子`spec/helpers`可以添加`helper`方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-29T15:41:17.233

我会看看 activeadmin 是如何做到这一点的

[https://github.com/gregbell/active_admin/blob/master/spec/unit/helpers/settings_spec.rb](https://github.com/gregbell/active_admin/blob/master/spec/unit/helpers/settings_spec.rb)

这是一个带有非常高质量测试套件的 Rails 引擎（我为它做出了贡献）

# java - 在返回类/对象名称的抽象类中实现方法

> ID：13103207
> 
> 赞同：2
> 
> 时间：2012-10-27T19:02:05.690
> 
> 标签：java, polymorphism

所以我有这个结构 - 一个名为`Animal`：

```
public interface Animal {

    public String move ();

    public String makeSound();

    public String getType();

} 
```

然后是一个抽象类`AbstractBird`，它实现了`Anima`：

```
public abstract class AbstractBird implements Animal {
    public String birdType;
    public String getType() {
        return birdType;
    }
    @Override
    public String move() {
        return "Fly";
    }
} 
```

然后是一些以相同结构扩展`AbstractBird`并称为 like `Dove`,`Hawk`等的类`Eagle`。看起来像这样：

```
public class Eagle extends AbstractBird {
    public Eagle() {
        birdType = "Eagle";
    }

    @Override
    public String makeSound() {
        return "Noone knows";
    }
} 
```

然后是我的类`AnimalSound`，它有`main`方法：

```
public class AnimalSound {
    public static void main(String[] args) {
        Eagle e = new Eagle();
        Dove d = new Dove();
        Hawk h = new Hawk();
        play(e);
        play(d);
        play(h);
    }
    public static void play(Animal a) {
        System.out.println("````````````");
        System.out.println(a.getType());
        System.out.println(a.makeSound());
        System.out.println(a.move());

    }
} 
```

如您所见，我有这个方法`getType()`返回`birdtype`. 方法本身是在抽象类中实现的，这没问题，但为了得到正确的结果，`birType`我需要为每个可以初始化的类编写构造函数，`birdType`这是我不太喜欢的部分。所以我的问题是如何`getType()`在抽象类中实现该方法，以便它返回类的名称和/或对象的名称。我不确定在我的示例中哪个会更好，类具有鸟类的名称，但考虑到它，我认为返回对象名称可能更有意义。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-27T19:06:15.637

@Leron

这是一个例子：

```
class Untitled {
  private static abstract class Animal {
    public String getType() {
      return this.getClass().getSimpleName();
    }
  }

  private static class Bird extends Animal {

  }

  private static class Dog extends Animal {

  }

  public static void main(String[] args) {
    Animal bird = new Bird();
    System.out.println(bird.getType()); // prints Bird

    Animal dog = new Dog();
    System.out.println(dog.getType()); // prints Dog
  }
} 
```

结果，您将获得正确的类型名称，并且您不需要在每个派生类型中实现构造函数。后期绑定将为您解决这个问题。

# c# - C# datarow getchildrow 不返回任何行

> ID：13103208
> 
> 赞同：0
> 
> 时间：2012-10-27T19:02:06.687
> 
> 标签：c#, database, datatable, dataset, foreign-keys

在我的数据库中，有三个表 R(id,num) RT(Rid,Tid) T(id,hour) 并且（R 和 RT）和（T 和 RT）之间存在一对多的关系。我正在使用数据集来访问我的数据库。

现在我使用下面的代码来检索数据并返回空列表：

```
foreach (mDataSet.RTRow rtRow in rRow.GetRTRows())
      console.writeln(rtRow.Tid);//never reaches this line 
```

插入值的代码：

```
rTableAdapter.insert(r.id,num);
tTableAdapter.insert(t.id,hour);
rtTableAdapter.insert(r.id,t.id); 
```

有谁知道我现在遇到的问题是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-04T08:11:16.297

首先是明显`mDataSet`的问题：表中是否包含数据`RT`？在您的评论中，您声明数据库不是空的，但数据集也不是空的吗？

其次，当我遇到这个问题时，它最终不得不对设计器中定义的关系做一些事情。当您双击两个表之间的线`R`和`RT`（一侧带有钥匙符号和另一侧带有无穷大符号的线）时，您可以检查属性。只需确保两个表中的正确列都参与了外键关系。

顺便说一句：你真的为你的表和变量名使用了这么短的名字还是只是为了提供一个例子？

# mysql - 将字段值设置为 ID 值

> ID：13103209
> 
> 赞同：-1
> 
> 时间：2012-10-27T19:02:17.733
> 
> 标签：mysql, insert

我正在规范我的数据库，我正在尝试将字段的值设置为与该行的 ID 相同，以便我可以连接表。

我尝试使用`LAST_INSERT_ID()`，但它不起作用。我没有收到错误，但我只得到零。

```
INSERT INTO `eleves` (`user_id`, 
`first_name`, `last_name`, 
`username`, `groupe`, 
`password`, `courriel`, 
`active`, `auteur`, 
`citations`, `absurde`, 
`vocabulaire`,  `analyse`, 
`themes`, `personnages`) 
VALUES (NULL, 
'Jane', 'Doe', 
'janedoe', '400', 
'password', 'jane@doe.com', 
'1', LAST_INSERT_ID(), 
LAST_INSERT_ID(), LAST_INSERT_ID(), 
LAST_INSERT_ID(), LAST_INSERT_ID(), 
LAST_INSERT_ID(), LAST_INSERT_ID()); 
```

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-27T19:03:28.760

删除它们周围的单引号

```
INSERT INTO `eleves`(`user_id`, `username`, `auteur`, `citations`, `absurde`) 
VALUES (NULL,'janedoe',LAST_INSERT_ID(),LAST_INSERT_ID(),LAST_INSERT_ID()); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-27T19:53:37.377

看来，在您的 MySQL 会话期间，没有插入自动生成的 id。因此，对于您要填写的字段，`last_insert_id()`必须是 a`zero`而不是`empty`（NULL？，SPACE？）。

尝试在您的表中定义一个具有自动增量的主键并让您生成一条新记录。看看会发生什么！

请参见以下示例：

```
$ mysql -u ravi -p test
Enter password: ********
Welcome to the MySQL monitor.  Commands end with ; or \g.
Your MySQL connection id is 2 to server version: 5.0.22-community-nt

Type 'help;' or '\h' for help. Type '\c' to clear the buffer.

mysql> select last_insert_id();
+------------------+
| last_insert_id() |
+------------------+
|                0 |
+------------------+
1 row in set (0.00 sec)

mysql> create table eleves( user_id int not null auto_increment primary key, username varchar(10), auteur int, citations int, absurde int );
Query OK, 0 rows affected (0.06 sec)

mysql> insert into eleves( username, auteur, citations, absurde )
    -> values( 'janedoe1', last_insert_id(), last_insert_id(), last_insert_id() );
Query OK, 1 row affected (0.03 sec)

mysql> select * from eleves;
+---------+----------+--------+-----------+---------+
| user_id | username | auteur | citations | absurde |
+---------+----------+--------+-----------+---------+
|       1 | janedoe1 |      0 |         0 |       0 |
+---------+----------+--------+-----------+---------+
1 row in set (0.00 sec)

mysql> select last_insert_id();
+------------------+
| last_insert_id() |
+------------------+
|                1 |
+------------------+
1 row in set (0.00 sec)

mysql> insert into eleves( username, auteur, citations, absurde )
    -> values( 'janedoe2', last_insert_id(), last_insert_id(), last_insert_id() );
Query OK, 1 row affected (0.01 sec)

mysql> select * from eleves;
+---------+----------+--------+-----------+---------+
| user_id | username | auteur | citations | absurde |
+---------+----------+--------+-----------+---------+
|       1 | janedoe1 |      0 |         0 |       0 |
|       2 | janedoe2 |      1 |         1 |       1 |
+---------+----------+--------+-----------+---------+
2 rows in set (0.00 sec)

mysql> select last_insert_id();
+------------------+
| last_insert_id() |
+------------------+
|                2 |
+------------------+
1 row in set (0.00 sec)

mysql> 
```

# r - R中稀疏组套索（SGL）中lambda的默认值？

> ID：13103211
> 
> 赞同：4
> 
> 时间：2012-10-27T19:02:40.287
> 
> 标签：r

如果留空，SGL 包如何选择 lambda？我指的是pdf手册中的以下评论。

> “用于拟合的用户指定的 lambda 值序列。我们建议保留此 NULL 并让 SGL 自行选择值。”

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2016-06-09T08:05:59.273

默认情况下，它会创建一系列 lambda 值，其中最大 lambda 是可能的最大 lambda 值（有关详细信息，请参阅 grplasso 包和 lambda.max 函数），最小 lambda 是 lambda max 的百分比。

# mapreduce - 使用 CouchDB 或 RDBMS 标记查找最高度相关的帖子会更好吗？

> ID：13103213
> 
> 赞同：0
> 
> 时间：2012-10-27T19:03:07.237
> 
> 标签：mapreduce, tags, couchdb, rdbms, intersection

我想通过查找与相关帖子共有标签数量最多的帖子来查找相关帖子。我可以在 SQL 查询中执行此操作，但由于我将有成千上万的帖子，每个帖子都有几十个标签，我想知道 CouchDB 是否会是一个更好的选择？如果是这样，它将如何在 CouchDB 中工作？

相关地考虑这个问题，这里是结构：

```
post: id, (other post data)
tag: id, (other tag data)
post_tag: post_id, tag_id 
```

SQL 查找帖子#X 的前 10 个最相关的帖子：

```
select r.post_id
from post_tag p join post_tag r on p.tag_id = r.tag_id
where p.post_id = X and r.post_id != X
group by r.post_id
order by count(*) desc
limit 10 
```

此查询提供与帖子 X 相同标签最多的前 10 个帖子。

我可以更有效地从 CouchDB 获得相同的结果吗？如何？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T13:20:03.613

> 此查询提供与帖子 X 相同标签最多的前 10 个帖子。

使用 Map/Reduce 计算这种查询非常糟糕，因为对于每个文档，您必须为每个标签组合生成一个键。此外，您将需要几个链式 map/reduce 才能有效地实现这一目标。所以 CouchDB 绝对不是一个简单的方法。

正如 Marcin 所写，您可以“作弊”并在 CouchDB 上使用搜索服务器，但您的 SQL 查询似乎更优雅。

# javascript - 使用导航 html5 查询 javascript 隐藏显示 div

> ID：13103217
> 
> 赞同：0
> 
> 时间：2012-10-27T19:03:35.760
> 
> 标签：javascript, jquery, html, css, navigation

我一直在阅读很多其他的帖子，毫无疑问是我对 jQuery 的缺乏经验给我带来了麻烦，但是有很多事情接近我想要完成的事情。

我有一个 div，其中有一组垂直导航按钮。

在里面，我想要根据用户单击的导航按钮显示或隐藏的其他 div（子 div）。

我希望所有这些 div 都位于屏幕上的同一位置......所以，基本上就像一个选项卡式表单，但具有垂直导航。

我真的不知道如何最好地实现每个 div 的隐藏和显示，当它的按钮被点击时，另一个 div 的按钮。

这是我拥有的导航 html

```
<div id="lowerDetail">
    <div id="lowersectionmenu">
          <ul>
        <li><a href="#Notes" title="Notes">Notes</a></li>
        <li><a href="#People" title="People">People</a></li>
        <li><a href="#NextTab" title="Next Tab">Next Tab</a></li>
        <li><a href="#LastTab" title="LastTab">Last Tab/a></li>
          </ul>
    </div>

    <div id="Notes">
        <form>
        <input type="text" name="noteEntry" id="noteEntry" class="noteEntryField" placeholder="Note Entry" size="100" />
        <button type="submit" class="noteEntryButton" id="sendNote" value="Submit" class="buttonAddNote">Submit Note</button>

        </form>

    </div>

    <div id="People">
        <form>
        <input type="text" name="addName" id="addName" placeholder="Name" size="35" />
        <input type="text" name="addPhone" id="addPhone" placeholde="XXX-XXX-XXXX" size="15" />

        </form>

    </div>

<div id="NextTab">Next Tab </div>
<div id="LastTab">Last Tab </div>

    </div> 
```

我知道这是非常基本的，但这里也是 CSS。

```
 #lowersectionmenu {
    float:left;
    width: 120px;
    border-style: solid solid none solid;
    border-color: #94AA74;
    border-size: 1px;
    border-width: 1px;
    margin: 10px;
}

#lowersectionmenu li a {
    height: 32px;
    voice-family: "\"}\""; 
    voice-family: inherit;
    height: 24px;
    text-decoration: none;
}   

#lowersectionmenu li a:link, #lowersectionmenu li a:visited {
    color: #5E7830;
    display: block;
    background: url(images/menu1.png);
    padding: 8px 0 0 10px;
}

#lowersectionmenu li a:hover {
    color: #26370A;
    background: url(images/menu1.png) 0 -32px;
    padding: 8px 0 0 10px;
}

#lowersectionmenu li a:active {
    color: #26370A;
    background: url(images/menu1.png) 0 -64px;
    padding: 8px 0 0 10px;
}
#lowersectionmenu ul {
    list-style: none;
    margin: 0;
    padding: 0;
}

.noteEntryField {
    position:relative;
    top:20px;
    }

    .noteEntryButton {
        position:relative;
        top:20px;
        height:27px;
        outline:none;
        text-align:center;
        background: #66ff33;
        background: -webkit-gradient(linear, left top, left bottom, from(#66cc33), to(#669933));
        background: -moz-linear-gradient(top,  #66cc33,  #669933);
        font-size:14px;
        border-radius:4px;
        color:#606060;
        text-shadow:2px 2px 2px #f0f0f0;
        } 
```

现在我只需要一些适当的 jQuery 代码来实现魔法。

我感谢任何和所有的帮助。

我正在添加作为答案给出的 jQuery，但仍然没有运气。也许有人可以告诉我出了什么问题。所有 div 都是可见的，并且表单字段是堆叠的……不管我做什么。

```
<script type="text/javascript" src="jquery.js"></script>
        <script type="text/javascript">
        $('#lowersectionmenu a').click(function() {

            /* hide any previous active nav and remove activeClass, fails quietly if none found*/    
            $('.navActive').hide().removeClass('navActive');

            /* create ID selector from this link */
            var id = $(this).attr('href') /* or using native script   this.href*/
            /* will return string "#Notes" which is exactly the same as ID selector string for jQuery*/

            /* show proper item and add active class used to find open element above*/
            $(id).show().addClass('navActive');

            return false; /* prevent browser default events for anchor tag */   

        });
        </script> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-27T19:16:33.307

以下应该工作

```
$('#lowersectionmenu a').click(function() {

    /* hide any previous active nav and remove activeClass, fails quietly if none found*/    
    $('.navActive').hide().removeClass('navActive');

    /* create ID selector from this link */
    var id = $(this).attr('href') /* or using native script   this.href*/
    /* will return string "#Notes" which is exactly the same as ID selector string for jQuery*/

    /* show proper item and add active class used to find open element above*/
    $(id).show().addClass('navActive');

    return false; /* prevent browser default events for anchor tag */   

}); 
```

**演示：http:** [//jsfiddle.net/LzmuB/1/](http://jsfiddle.net/LzmuB/1/)

活动类的切换是一种非常常见的方法，因此可以快速找到和停用当前活动的项目

# c# - 如何使用“QueryExpression”对象从 CRM 中获取所有填充的列？

> ID：13103218
> 
> 赞同：-1
> 
> 时间：2012-10-27T19:03:43.490
> 
> 标签：c#, dynamics-crm-2011

我之前在[这里](https://stackoverflow.com/questions/13077691/not-all-columns-retrieved-on-new-columnsettrue-in-a-plug-in)问过一个类似的问题，答案解决了我的问题。但是，现在我遇到了和以前一样的问题，**但是**由于条件的变化，答案不再起作用。

这是我正在运行的查询。我已经检查了它`someField`是否设置为某些东西（它是一个由 guid 引用其他实体的查找字段）。我没有得到任何条目`result`（除非我将条件切换为“不等于”）。这可能是由于没有引入该领域。

当我对执行进行断点并检查`Attributes`时，我看到总共 30 个字段中有 21 个字段（其中一些可能是空的，当然，但是**这个**`someField`，即**不是**）但是我感兴趣的那个不存在！

```
QueryExpression query = new QueryExpression
{
  EntityName = "entity",
  ColumnSet = new ColumnSet{ AllColumns = true },
  // Here I tried the code addition #1 below
  Criteria =
  {
    Filters =
    {
      new FilterExpression
      {
        Conditions =
        {
          new ConditionExpression("someField", ConditionOperator.Equal, guid)
        }
      }
    }
  }
};
// Here I tried the code addition #2 below
EntityCollection result = Service.RetrieveMultiple(query); 
```

我错过了什么，我该如何解决？

我尝试使用[此博客](http://crmdream.wordpress.com/2012/03/07/crm-2011-working-with-associatedeassociate-plugin/)`LinkEntities`中讨论的方法，但并没有真正奏效。我什至不确定这是否是一种有意义的方法。它看起来如下。

```
 LinkEntities =
  {
    new LinkEntity
    {
      Columns = new ColumnSet { AllColumns = true },
      LinkFromEntityName = "entity",
      LinkFromAttributeName = "otherEntityId",
      LinkToEntityName = "entity2",
      LinkToAttributeName = "entity2Id"
    }
  }, 
```

我还尝试采用[MSDN 上建议的解决方案](http://msdn.microsoft.com/en-us/library/gg328149.aspx)。同样的结果。

```
request.LinkEntities.Add(
  new LinkEntity(
    "entity", "entity2", "otherEntityId", "entity2Id", JoinOperator.Inner));
request.LinkEntities[0].Columns.AddColumns("entity2Id");
request.LinkEntities[0].EntityAlias = "blobb"; 
```

*再一次 - @JamesWood 提供的解决方案不再起作用，因为我拥有管理员访问权限**并且**相关字段不为空。*

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-28T19:37:32.533

查询表达式只为您提供具有值的列，因为空值不会添加到属性字典中，因此不会传输到客户端。这就是为什么在访问属性（或 user ）之前总是必须检查 Contains 的原因`GetAttributeValue<T>(String)`。

如果您总是想知道实体上存在哪些字段，则必须使用`RetrieveEntityRequest`. 请参阅[MSDN](http://msdn.microsoft.com/en-us/library/microsoft.xrm.sdk.messages.retrieveentityrequest.aspx)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-28T22:47:50.177

我相信这里的问题在于您`FilterExpression`和/或实际数据本身。

从你在这里所说的：

> 结果中没有条目（除非我将条件切换为“不等于”）

当您将过滤器设置为“相等”时，没有任何东西等于该 Guid，因此您不会得到任何结果。

当您将过滤器设置为“不等于”时，一切都不等于该条件，因此您开始获得一些结果。当您确实获得结果时，不包括查找，因为它为空记录（因此为什么“相等”过滤器不起作用）。

由于我不确定确切的问题，我建议采取以下步骤：

1.  对于该记录类型，删除所有记录。
2.  制作一条新记录，填充查找字段。
3.  编写一个查询，返回该实体（例如`AllColumns = true`）中的所有字段，**而不**指定`FilterExpression`.
4.  这个查询应该给你一个结果，检查属性集合以确保查找已填充（检查所有属性以确保你没有得到错误的名称）。
5.  然后扩展查询以具有`FilterExpression`.

[这里](http://msdn.microsoft.com/en-us/library/gg334208.aspx)有一个使用查找进行过滤的示例。

作为旁注；您实际上不必在`ColumnSet`要用于过滤的列中指定。

例如在 SQL 中你可以这样做：

```
SELECT firstname FROM contact WHERE lastname = 'wood' 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-29T13:22:49.863

这是一种搜索并返回您的第一个实体的方法`SELECT * FROM entity WHERE someField = "1234"`。

```
private static Entity GetEntityByGuid(
  IOrganizationService service, 
  String entityLogicalName, 
  String fieldToConstrainOn, 
  Guid valuetoConstrainTo)
{
  var qe = new QueryExpression(entityLogicalName)
  {
    ColumnSet = new ColumnSet(true)
  };

  qe.Criteria.AddCondition(
    fieldToConstrainOn, ConditionOperator.Equal, valuetoConstrainTo);

  return service.RetrieveMultiple(qe).Entities.FirstOrDefault();
} 
```

您可以这样称呼它（假设这`new_entity`是您的自定义实体的逻辑名称，并且`new_somefield`是 id 为“ed5081c1-f77b-4f58-a8bf-a8fbe3fe27be”的其他实体的外键）：

```
var entity = GetEntityByGuid(
  service, "new_entity", "new_somefield", 
  new Guid("ed5081c1-f77b-4f58-a8bf-a8fbe3fe27be")); 
```

并访问`new_somefield`的名称：

```
String name = entity.GetAttributeValue<EntityReference>("new_somefield").Name; 
```

# c++ - 在使用它的类的构造函数中初始化 std::array 的大小

> ID：13103219
> 
> 赞同：5
> 
> 时间：2012-10-27T19:03:58.247
> 
> 标签：c++, arrays, templates, c++11, std

是否可以将`std::array<class T, std::size_t N>`用作类的私有属性但**在类的构造函数中初始化其大小**？

```
class Router{
    std::array<Port,???> ports; //I dont know how much ports do will this have
public:
    Switch(int numberOfPortsOnRouter){
        ports=std::array<Port,numberOfPortsOnRouter> ports; //now I know it has "numberOfPortsOnRouter" ports, but howto tell the "ports" variable?
    }
} 
```

我可能会使用一个指针，但是没有它可以做到吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-27T19:08:03.750

您必须使您的课程`Router`成为模板课程

```
template<std::size_t N> 
class Router{
    std::array<Port,N> ports; 

...
} 
```

如果您希望能够指定`ports`at `Router` *level*的大小。顺便说一句，`N`必须是从编译时已知的常量。

否则你需要`std::vector`.

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-27T19:07:37.727

不，大小必须在编译时知道。改为使用`std::vector`。

```
class Router{
    std::vector<Port> ports;
public:
    Switch(int numberOfPortsOnRouter) : ports(numberOfPortsOnRouter) {
    }
}; 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-27T19:12:27.370

an 的大小`std::array<T, N>`是编译时常量，在运行时无法更改。如果您想要一个具有灵活边界的数组，您可以使用`std::vector<T>`. 如果你的数组的大小没有改变，并且你从它的上下文中知道了大小，你可以考虑使用`std::unique_ptr<T[]>`. 它更轻巧，但也无助于复制或调整大小。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-10-27T19:08:17.013

`std::array`是一个**固定**长度的数组。因此，长度必须在编译时知道。如果你需要一个动态长度的数组，你想`std::vector`改用：

```
class Router{
    std::vector<Port> ports;
public:
    Switch(int numberOfPortsOnRouter):ports(numberOfPortsOnRouter){}
}; 
```

# ajax - Jquery ajax 保存按钮和保存退出按钮

> ID：13103220
> 
> 赞同：0
> 
> 时间：2012-10-27T19:04:05.393
> 
> 标签：ajax, jquery

jquery 新手。我怎样才能有一个带有保存按钮和保存退出按钮的简单表单？

我现在拥有的东西在某种程度上是“起作用的”。但是当我发布然后单击保存退出。然后返回 /messages。使用表单并单击保存退出它发布并停留在页面上。但是，如果我重复，那么它将发布并退出。

查询

```
var BASE = 'http://localhost/sym/messages';

$('#xhrSave').submit(function() {

    event.preventDefault();

    $('[name="save_continue"]').click(function() {
        window.location = '#';
    });

    $('[name="save_exit"]').click(function() {
        window.location = BASE;
    });

    var url = $(this).attr('action');
    var data = $(this).serialize();

    $.ajax({
        type: 'post',
        url: url,
        dataType: 'json',
        data: data,
        success: function(data) {

            $('#message_list').append('<div>' + data.message + '<a class="delete" rel="'+ data.id +'" href="#">Delete</a></div>');

        }

    });

    // clear textbox
    $('#form_message').val('');

}); 
```

HTML

```
<form action="<?=URL::to('messages/xhrSave')?>" method="post" id="xhrSave">

<input type="text" name="message" value="" id="form_message" />

<button type="submit" name="save_continue" class="save_form">Save</button>
<button type="submit" name="save_exit" class="save_form">Save-Exit</button> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-27T19:14:52.993

做这件事有很多方法，没有一个可以说是最好的，只是把我一般使用的方法。

将您的 html 更改为：

```
<input type="text" name="message" value="" id="form_message" />

<button type="submit" name="save_continue" class="save_continue save_form">Save</button>
<button type="submit" name="save_exit" class="save_exit save_form">Save-Exit</button> 
```

和js：

```
function myajaxcall(type){
                     var url = $(this).attr('action');
        var data = $(this).serialize();

        $.ajax({
            type: 'post',
            url: url,
            dataType: 'json',
            data: data,
            success: function(data) {

                $('#message_list').append('<div>' + data.message + '<a class="delete" rel="'+ data.id +'" href="#">Delete</a></div>');
                //one way to redirect
               if(type=="exit")
               window.location = "thepageyouwanttogo.php"

            }

        });
}
$('.save_continue').click(function() {
        myajaxcall("continue")
});
$('.save_exit').click(function() {
        myajaxcall("exit")
}); 
```

注意：我没有在 ajax 中检查你的 js，只是复制了它的问题

# javascript - 正则表达式 - 不被识别为单词字符的特殊元音

> ID：13103222
> 
> 赞同：2
> 
> 时间：2012-10-27T19:04:24.230
> 
> 标签：javascript, regex, character-encoding

我遇到了 RegExp 无法将特殊字符识别为单词字符的问题（或更糟 - 计为`\b`）：

```
"wäww, xöxx  yüyy zßzz".replace(/\b\w/g,function(m){return m.toUpperCase();}) 
```

应该返回

```
"Wäww, Xöxx  Yüyy Zßzz" 
```

但不幸的是返回：

```
"WäWw, XöXx  YüYy ZßZz" 
```

我玩了几种编码，但这没有帮助......

如何让它识别字符或以其他方式解决该问题？

^(有一个问题与[类似的问题](https://stackoverflow.com/questions/8260161/special-character-not-recognized)没有令人满意的答案。) 

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-27T19:36:08.933

## 欺骗

不要试图解决 unicode 和 js 的细微差别，只需使用空格作为替换/大写逻辑的标记：

```
> "wäww, xöxx  yüyy zßzz".replace(/( |^)[^ ]/g,function(m){return m.toUpperCase();});
"Wäww, Xöxx  Yüyy Zßzz" 
```

或者

```
> "wäww, xöxx  yüyy zßzz".replace(/(\s|^)[^ ]/g,function(m){return m.toUpperCase();});
"Wäww, Xöxx  Yüyy Zßzz" 
```

或者

```
> "wäww, xöxx  yüyy zßzz".replace(/([\s\.,:;]|^)[^ ]/g,function(m){return m.toUpperCase();});
"Wäww, Xöxx  Yüyy Zßzz" 
```

这种技术将正确地大写重音字符：

```
> "wäww, öhyes".replace(/( |^)[^ ]/g,function(m){return m.toUpperCase();})
"Wäww, Öhyes" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-27T19:39:09.963

我选择从不同的角度来攻克这个问题：我怎样才能得到每个单词的第一个字母？

这是我想出的：

```
"wäww, xöxx  yüyy zßzz".replace(/(?:^| )[^ ]/g,function(m){return m.toUpperCase();}); 
```

回报：

```
"Wäww, Xöxx  Yüyy Zßzz" 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-27T19:40:17.407

如果你只需要它来展示而不需要 Javascript 计算，设置 CSS 样式

```
text-transform: capitalize; 
```

在元素上会起作用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-27T19:26:27.800

JavaScript 正则表达式`\w`仅将匹配的 Ascii 字母、常用数字和下划线字符视为匹配。一般来说，JavaScript 正则表达式在 Ascii 世界中发挥作用。

如果您有少量“特殊”字符需要处理，您可以单独对其进行编码，但一般来说，您应该寻找可以更一般地处理这种情况的库，正如对提到的问题[Javascript + Unicode regexes](https://stackoverflow.com/questions/280712/javascript-unicode)的回答中所建议的那样@Pumbaa80 在评论中。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-27T19:23:28.420

搜索`[^a-zA-Z ,]|[a-zA-z]`并替换为`x`

你可以在这里看到这个[工作](http://goo.gl/qCE3y)。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-27T19:09:57.070

您必须修改您的正则表达式：

```
"wäww, xöxx  yüyy zßzz".replace(/[\wäüßö]/g,"x") 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-10-27T19:14:19.433

简单的方法是，反转您的表达式并手动定义所有非单词字符（不好但有用）

`/[^\s,\.;+\- and much more]/g`

如果您知道所有可能的单词字符，您可以这样做

`/[\wäöüßÄÖÜ and much more]/g`

# php - php从根目录读取文件

> ID：13103223
> 
> 赞同：0
> 
> 时间：2012-10-27T19:04:24.987
> 
> 标签：php

我想读取放置在根目录中的文件。让文件在这个地方`/root/folder/file.txt` 这是我的代码：

我将此代码放在一个文件中，该文件`/var/www/html/test.php`是我的公共 html 文件夹。

现在，当我从浏览器打开此文件时，屏幕上什么也没有（那是因为错误报告已关闭），但是当我通过 ssh 在 CLI 模式下打开放置在同一目录中的同一文件时，它给了我正确的输出（即包含文件内容的数组）。

如何解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-27T19:08:45.033

根文件夹（通常）用于对外部用户没有读取权限的根用户。因此，您正在由 apache 用户运行的脚本将无法访问它来读取它。

# iphone - iPhone App本地化——让用户选择语言

> ID：13103224
> 
> 赞同：1
> 
> 时间：2012-10-27T19:04:28.513
> 
> 标签：iphone, ios, xcode, localization, nslocalizedstring

我了解如何本地化应用程序，并且显示的语言基于用户在手机设置中选择的语言/地区。

我的问题是，如果我想让用户在应用程序本身中选择语言，而不是默认设置中的设置（例如，有一个用户选择语言的屏幕），该怎么办。

我可以采用这种方法吗？我可以以某种方式使用现有的本地化过程（即有一个带有字符串的 plist 并使用 NSLocalised 字符串吗？）？

谢谢 ！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-27T19:12:13.323

你当然可以这样做。您可以制作一个屏幕，一种设置屏幕，用户可以在其中选择语言。然后，您将选择的语言存储在 NSUserDefaults 中。

然后，您可以创建一个静态方法，该方法将字符串键作为参数，并根据所选语言从您的语言文件之一返回适当的值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T16:26:21.383

请参阅我对以下内容的回答：[iOS - 我可以在运行时更改 localizable.strings 内容吗？](https://stackoverflow.com/questions/13625008/ios-could-i-change-the-localizable-strings-content-during-runtime/13629800#13629800)

它描述了如何执行此操作并包含代码片段。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-27T19:17:28.597

认为您的问题没有简单的是或否的答案，我只是在回应我所做的事情。

首先，最好在当前环境设置上开始本地化。有时允许进一步自定义是好的和可取的，因为并非本地化的所有方面都由系统设置处理。

我遇到了数字格式和权重的问题，这些问题在某些地区可能会有所不同。所以我的建议是从给定的本地化开始并允许用户自定义它。您可以使用完整的语言环境系统来确定字符串，并根据本地化布局部分。

这是你想知道的吗？

# php - 在 php 脚本中使用 array_key_exists() 方法时解析错误

> ID：13103226
> 
> 赞同：-1
> 
> 时间：2012-10-27T19:04:41.850
> 
> 标签：php, array-key-exists

我是 PHP 的新手。我敢打赌我在这里做了一些愚蠢的事情，因此在调用`array_key_exists()`函数的行上出现解析错误。但是由于我是 php 的新手，并且由于解释器抛出的错误是如此抽象，所以我无法弄清楚我的错误。请查看这段代码并帮助我：

```
/* Adding elements into array using [] notations (numbered index) */
$hobbies[] = 'Guitar';
$hobbies[] = 'Reading';
$hobbies[] = 'Singing';
$hobbies[] = 'Travelling';
$hobbyPeople = array(   $hobbies[0] => $names[1],
            $hobbies[1] => $names[3],
            $hobbies[2] => $nickname['shivaraj'],
            $hobbies[3] => $nickname['guru']);
if ($_POST['hobbyName'])
{
    $searchHobby = $_POST['hobbyName'];
    if (array_key_exists($searchHobby, $hobbyPeople)
        print "Yes we have people with hobby you are searching for! And that is: $hobbyPeople[$searchHobby]";
    else
        print "Sorry, we don't have guys with hobby you are searching for!";
}
else
{
print <<<_hobbyTest_
<form method=POST action="$_SERVER[PHP_SELF]">
Enter a hobby you are searching for: <input type="text" name="hobbyName">
<input type="submit" value="Search">
</form>
_hobbyTest_;
} 
```

谢谢，拉吉

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-27T19:06:54.447

你忘了一个 ) 字符

```
if (array_key_exists($searchHobby, $hobbyPeople)) 
```

# javascript - WebGL 纹理：第二次加载大小错误

> ID：13103228
> 
> 赞同：1
> 
> 时间：2012-10-27T19:04:49.607
> 
> 标签：javascript, webgl

我有一个 WebGL `canvas`，我在其中加载两个图像作为纹理。对于每个纹理加载，我首先将画布调整为图像大小，以使图像不失真。

尽管调整了大小，第二个纹理还是被扭曲了。请看[这个小提琴](http://jsfiddle.net/fK96j/)。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-27T19:13:30.557

弄清楚了。需要使用该`gl.viewport`功能。

# performance - 并行化一个大循环

> ID：13103229
> 
> 赞同：1
> 
> 时间：2012-10-27T19:04:53.380
> 
> 标签：performance, matlab, for-loop, parallel-processing

我有一个大循环，我试图计算 DEM (4800x6000) 中每个像素的某些属性。我正在调用一个函数 demPHV，在该函数中我对所有输出结构的计算进行了矢量化处理，该结构具有 26 个字段。我有 4 个内核，但也可以访问多核集群。我想加快运行它所需的几周时间。

Z 是此示例的 dem。R 是 spatialref 对象（例如，一个向量）。latlim 和 lonlim 是美国西部海岸线的 lat 和 long 的向量（在示例中成对）。例如：

```
Z=rand(48,60);
R=makerefmat(120,40,.5,.5)
latlim=[40:60]';
lonlim=[136:(143-136)/(length(latlim)-1):143]'; 
```

然后我原来的循环：

```
for col=11:size(Z,2)-11
    for row=11:size(Z,1)-11
        dpv=demPHV(Z,R,row,col,latlim,lonlim)

    fn=fieldnames(dpv);
    for k=1:length(fieldnames(dpv))
        DEM_PHV.(fn{k}).{row,col}=dpv.(fn{k});
    end
end 
```

用于并行化的循环：

选项1：

```
[rows, cols] = meshgrid(12:(size(Z,1)-12), 12:(size(Z,2)-12));
inds = sub2ind(size(Z), rows, cols);
inds = inds(:)';
parfor i=inds(1):inds(end)
       dpv=demPHV(Z,R,i,latlim,lonlim)
end 
```

这包括`[r,c]=ind2sub(size(Z),i)`在函数 demPHV 中使用的函数。

选项2：

```
parfor col=11:size(Z,2)-11
    for row=11:size(Z,1)-11
         dpv=demPHV(Z,R,row,col,latlim,lonlim)
    end
end 
```

parfor 需要连续的整数，因此需要进行一些更改。我必须排除边界的 11 行和列，因为我的函数使用周围的像素来计算一些属性。

所以，我的问题：

1.  您是否希望这两个选项中的任何一个比另一个更快？
2.  parfor 不允许我包含原始循环的第二部分：

    `fn=fieldnames(dpv);`

    `for k=1:length(fieldnames(dpv))`

    `DEM_PHV.(fn{k}).{row,col}=dpv.(fn{k});`

    `end`

在此期间，我将输出结构分配给另一个变量。最终目标是让变量 DEM_PHV 具有我需要的每个属性的字段，并且每个字段都是矩阵大小（Z），其中每个单元格都是该属性的相应值。我试图让我的函数在矩阵的正确单元格中输出值，但随后我得到一个矩阵大小（Z），`[]`除了 location 的值之外的所有地方`row,col`。这似乎是一种非常低效的内存使用......有更好的建议吗？我希望我涵盖了所有内容。感谢您的关注！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-28T21:14:48.907

我得到了以下代码来工作并将每个函数结果存储到一个结构数组中。不过可能有更好的方法，因为现在我需要从结构中的每个字段中提取每个值到它自己的矩阵中。

有没有人建议创建类似的东西：`DEM_PHV = struct('field1',[dPHV{:}.field1],'field2',[dPHV{:}.field2])`每个字段中的每个矩阵在哪里`size(Z)`。矩阵中的单元格将包含单个值或一对值，例如 [lat, long]。

```
dPHV=cell(110,110);
parfor col=11:110%size(Z,2)-11
    for row = 11:110%size(Z,1)-11
       pixel_attributes=demPHV(Z,R,row,col,latlim,lonlim); %function produces structure of variables, each iteration is another pixel
       dPHV{row,col}=structfun(@(x) x,pixel_attributes,'UniformOutput',false)   
    end
end 
```

编辑：尽管这可能很笨拙，但以下内容可用于重新分配变量。我很乐意接受更流畅的“MATLAB”方式的建议。

```
% find all field names and get size of output
fn=fieldnames(dPHV{11,11});
[I, J]=size(dPHV);

%initialize final output
for f=1:numel(fn)
    DEM_PHV.(fn{f})=cell(size(dPHV));
end
% loops through datastructure to populate new fields
for i=11:I-11
    for j=11:J-11
        for f=1:numel(fn)
            DEM_PHV.(fn{f}){i,j}=dPHV{i,j}.(fn{f});
        end
    end
end 
```

# jquery - 自定义 jQuery 插件，但无法找出自定义方法

> ID：13103230
> 
> 赞同：-1
> 
> 时间：2012-10-27T19:05:19.483
> 
> 标签：jquery, jquery-plugins, methods

`method` [我正在重写一个插件，以便根据这个问题](https://stackoverflow.com/a/5891553/594235)和[jQuery 文档](http://docs.jquery.com/Plugins/Authoring)将每个主要部分变成一个，到目前为止，整个事情仍然有效。

插件初始化为：

```
$('#mySelector').myPlugin({
    // want to keep initial options
    option1: true,
    option2: 'right'
    // etc.
}); 
```

然后稍后，我想使用一个`refresh`方法：

```
$('#mySelector').myPlugin('refresh'); 
```

基本上，我需要“刷新”来完成这个插件中的所有事情，*除了*重新应用 HTML DOM 修改（同时保留所有原始初始化选项）。

我似乎无法弄清楚。我不能只使用`methods.binders(var1, var2);`，因为我也需要获取变量。但是，`init()`需要`methods.html()`在它第一次初始化时。当我做我的时，我怎么能跳过那一部分`refresh`？

也许这很简单，但我现在很头疼。

```
(function ($) {

    var methods = {
        defaults : {
            option1: false,
            option2: 'left'
                    // etc.
        },
        settings : {},
        init : function(options) {
            methods.settings = $.extend({}, methods.defaults, options);

            $(this).each(function() {
                if ($(this).is('[type=radio]')) {
                    var var1 = $(this);
                    var var2 = $('.somethingelse');
                    // etc.
                    methods.html(var1, var2);
                    methods.binders(var1, var2);
                };
            });

        },
        refresh : function () {
            // no idea??
        },
        html : function(var1, var2) {
            // various HTML DOM manipulations
        },
        binders : function(var1, var2) {
            // binding various events, hover, click, etc.
            // assigns classes
        }
    };

    $.fn.myPlugin = function(method) {
        if ( methods[method] ) {
            return methods[ method ].apply( this, Array.prototype.slice.call( arguments, 1 ));
        } else if ( typeof method === 'object' || ! method ) {
            return methods.init.apply( this, arguments );
        } else {
            $.error( 'Method ' +  method + ' does not exist on jQuery.myPlugin' );
        }
    };

})(jQuery); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-27T19:43:55.707

以下将大部分代码从`methods.init`一个函数移到一个函数，该函数`doInit()`可以在两者中调用，`methods.init`并`methods.refresh`带有参数 for`initType`和内部条件以调用某些代码`init`但不`refresh`

```
(function($) {    

    var methods = {     
        /* see answer edit about moving this out of here*/        
        defaults: {
            option1: false,
            option2: 'left'
            // etc.
        },
        settings: {},
        init: function(options) {  
           /* see answer edit about moving this out of here*/
            methods.settings = $.extend({}, methods.defaults, options);
            doInit(this, 'init', methods);

        },
        refresh: function() {
            doInit(this, 'refresh', methods);
        },
        html: function(var1, var2) {
            // various HTML DOM manipulations
        },
        binders: function(var1, var2) {
            // binding various events, hover, click, etc.
            // assigns classes
        }
    };

    function doInit(el, initType, methods) {
        $(el).each(function() {
            if ($(this).is('[type=radio]')) {
                var var1 = $(this);
                var var2 = $('.somethingelse');
                // etc.
                methods.html(var1, var2);
                if (initType == 'init') {
                    methods.binders(var1, var2);
                }
            };
        });
    }

    $.fn.myPlugin = function(method) {
        if (methods[method]) {
            return methods[method].apply(this, Array.prototype.slice.call(arguments, 1));
        } else if (typeof method === 'object' || !method) {
            return methods.init.apply(this, arguments);
        } else {
            $.error('Method ' + method + ' does not exist on jQuery.myPlugin');
        }
    };

})(jQuery); 
```

可能不是没有错误，但想法应该让你继续

编辑：意识到我忘了让设置更全球化。一种方法是删除默认值`methods`并创建

```
 var defaults={  /* ..... */};
 $.fn.myPlugin.defaults=$.extend({},defaults, options); 
```

现在，您可以在刷新时访问用户定义的设置。另一个非常有用的补充是将设置存储在 jQuery DOM 数据中，例如：

```
 $(this).data('myPlugin.settings', {/* extended settings object*/}); 
```

# java - 无法在 [http://0.0.0.0:8080/SpringDemo-Server/remoting/NotifierService] 访问 hessian 远程服务

> ID：13103232
> 
> 赞同：3
> 
> 时间：2012-10-27T19:05:29.860
> 
> 标签：java, spring

有人可以帮我解决我的问题吗？

我有以下错误：

测试错误：

```
 testCreateNewCustomer(eu.ibacz.swsc.spring.di.testdependencyinjection.BankServiceTest): Cannot connect to Hessian remote service at [http://0.0.0.0:8080/SpringDemo-Server/remoting/NotifierService]; nested exception is com.caucho.hessian.client.HessianConnectionException: HessianProxy cannot connect to 'http://0.0.0.0:8080/SpringDemo-Server/remoting/NotifierService

   testGetAllCustomers(eu.ibacz.swsc.spring.di.testdependencyinjection.BankServiceTest): Cannot connect to Hessian remote service at [http://0.0.0.0:8080/SpringDemo-Server/remoting/NotifierService]; nested exception is com.caucho.hessian.client.HessianConnectionException: HessianProxy cannot connect to 'http://0.0.0.0:8080/SpringDemo-Server/remoting/NotifierService 
```

我不知道哪里有问题。

这是我的 applicationContext.xml

```
 <?xml version="1.0" encoding="UTF-8"?>
   <beans xmlns="http://www.springframework.org/schema/beans"
   xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
   xmlns:aop="http://www.springframework.org/schema/aop"
   xsi:schemaLocation="http://www.springframework.org/schema/beans                                                                                               
   http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
   http://www.springframework.org/schema/aop http://www.springframework.org/schema/aop/spring-                                             
   aop-3.0.xsd">``

  <import resource="spring-db-config.xml"/>
  <aop:aspectj-autoproxy/>
  <bean 
   class="org.springframework.beans.factory.annotation.RequiredAnnotationBeanPostProcessor"/>

  <bean id="jdbcTemplateDatasource" class="org.springframework.jdbc.core.JdbcTemplate">
    <property name="dataSource" ref="dataSource"/>
  </bean>

  <bean id="springJdbcCustomerDao"    
   class="eu.ibacz.swsc.spring.di.testdependencyinjection.dao.impl.JdbcTemplateCustomerDaoImpl">
    <property name="jdbcTemplate" ref="jdbcTemplateDatasource"/>
  </bean>

  <bean id="bankService" 
   class="eu.ibacz.swsc.spring.di.testdependencyinjection.service.impl.BankServiceImpl">
    <property name="customerDao" ref="springJdbcCustomerDao"/>
  </bean>

  <bean id="notifier" class="eu.ibacz.swsc.spring.commons.springdemocommons.SysOutNotifier" /> 

  <bean  
   class="eu.ibacz.swsc.spring.di.testdependencyinjection.aspect.BankServiceLoggingAspect">
    <property name="notifier" ref="remoteNotifier"/>
  </bean>  

  <bean id="remoteNotifier" class="org.springframework.remoting.caucho.HessianProxyFactoryBean">
    <property name="serviceUrl" value="${url.adress}" />
    <property name="serviceInterface"   
     value="eu.ibacz.swsc.spring.commons.springdemocommons.Notifier"/>
  </bean>

  <bean class="org.springframework.beans.factory.config.PropertyPlaceholderConfigurer">
    <property name="location">
        <value>urlconfig.properties</value>
    </property>
  </bean> 
```

urlconfing.properties 看起来是这样的：

```
 url.adress=http://0.0.0.0:8080/SpringDemo-Server/remoting/NotifierService 
```

我已经使用命令提示符启动了 Jetty Server。

谢谢帮助

# javascript - 基于键比较添加 JSON 值

> ID：13103233
> 
> 赞同：1
> 
> 时间：2012-10-27T19:05:31.353
> 
> 标签：javascript, json, for-loop

我想在附加到对象之前比较 JSON 对象中键的值，如果它们相同，则添加值而不是附加。

我有：

```
 {"carset": {
          "location1": [
                      {"car": "volvo", "count": 5},
                      {"car": "mazda", "count": 7},
                      {"car": "toyota", "count": 10},
                     ]
             }
  } 
```

当我在我的 for 循环中点击它时：

```
newcar = 'volvo';
newcount = 6;
cars[i] = ({car: newcar, count: newcount}); 
```

我想注意到 volvo 已经在 json 对象中，只需将 newcount 添加到现有计数中即可。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-27T19:09:53.983

您需要与`location1`数组中的所有项目进行比较，或者您可以重组 JSON 以使比较更容易

```
json = {
 'carset' : {
    'location-cars' : {
      'volvo'  : 5,
      'mazda'  : 7,
      'toyota' : 10
    }
  }
}

function addCar(cars, car) {
  var theCar = cars[car];
   if ( theCar == undefined ) {
      cars[car] = 1;
   } else {
      cars[car] = theCar + 1;
   }
   return cars[car];
}

addCar(json.carset['location-cars'], 'volvo'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-27T19:14:45.820

```
function checkExists(carName) {
    for (var k in a.carset.location1) {
        if (a.carset.location1[k].car == carName) {
            return true;
        }
    }

    return false;
} 
```

# javascript - 避免 JavaScript 中变量的长查找路径

> ID：13103236
> 
> 赞同：1
> 
> 时间：2012-10-27T19:05:37.893
> 
> 标签：javascript, optimization

> **可能重复：**
> [取消引用变量的闭包有用吗？](https://stackoverflow.com/questions/8288664/is-a-closure-for-dereferencing-variables-useful)

我遇到了一个信息，由于变量查找在 JavaScript 中的工作方式，如果我复制变量，我可以在某些情况下获得性能提升，否则我必须在作用域链中查找局部变量进一步访问。有没有这方面的一般指导方针？创建变量的成本也很高。有没有办法对访问时间进行基准测试？

我对性能并不那么偏执，但我喜欢保持对这些事情的了解。

# android - Android - 罕见的运行时异常，不指向它开始的任何类

> ID：13103237
> 
> 赞同：4
> 
> 时间：2012-10-27T19:05:56.420
> 
> 标签：android

我在应用程序上每隔一千多个会话就会收到一次此运行时异常，因此这种情况很少见，我无法重现它。

```
java.lang.IllegalArgumentException: View not attached to window manager
        at android.view.WindowManagerImpl.findViewLocked(WindowManagerImpl.java:381)
        at android.view.WindowManagerImpl.removeView(WindowManagerImpl.java:226)
        at android.view.Window$LocalWindowManager.removeView(Window.java:432)
        at android.app.Dialog.dismissDialog(Dialog.java:278)
        at android.app.Dialog.access$000(Dialog.java:71)
        at android.app.Dialog$1.run(Dialog.java:111)
        at android.os.Handler.handleCallback(Handler.java:587)
        at android.os.Handler.dispatchMessage(Handler.java:92)
        at android.os.Looper.loop(Looper.java:130)
        at android.app.ActivityThread.main(ActivityThread.java:3691)
        at java.lang.reflect.Method.invokeNative(Native Method)
        at java.lang.reflect.Method.invoke(Method.java:507)
        at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:912)
        at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:670)
        at dalvik.system.NativeStart.main(Native Method) 
```

有谁知道如何重现它，或者它为什么会发生？或者更好的是，如何解决它？:)

谢谢！

编辑：

我添加了 Raghav 提出的建议以添加以下内容：

```
<activity android:label="@string/app_name" 
        android:configChanges="orientation|keyboardHidden" 
        android:name="ActivityName"> 
```

但这并没有解决崩溃问题，并且崩溃仍在发生。

编辑：

这是我使用的一些典型代码：

```
public class ProblemActivity extends BaseListActivity
{
    Dialog dialog;

        ....

@Override
public void onCreate(Bundle savedInstanceState) 
{
    super.onCreate(savedInstanceState);

    ...

    // After some action
    dialog.show();
}

public class GetSolutionTopicsTask extends AsyncTask<String, Void, String> 
{
    @Override
    protected String doInBackground(String... theParams) 
    {
        String myUrl = theParams[0];
        String problem_id = theParams[1];

        String charset = "UTF-8";           
        String response = null;

        try 
        {               
            String query = String.format("problem_id=%s", 
                     URLEncoder.encode(problem_id, charset));

            final URL url = new URL( myUrl + "?" + query );

            final HttpURLConnection conn = (HttpURLConnection) url.openConnection();

            conn.setDoOutput(true); 
            conn.setRequestMethod("POST");

            conn.setDoOutput(true);
            conn.setUseCaches(false);

            conn.connect();

            final InputStream is = conn.getInputStream();
            final byte[] buffer = new byte[8196];
            int readCount;
            final StringBuilder builder = new StringBuilder();
            while ((readCount = is.read(buffer)) > -1) 
            {
                builder.append(new String(buffer, 0, readCount));
            }

            response = builder.toString();      
        } 
        catch (Exception e) 
        {

        }

        return response;
    }

    @Override
    protected void onPostExecute(String result) 
    {           
        if ( result == null  )
        {
            try 
            {
                dialog.dismiss();
            } catch (Exception e) {
                // nothing
            }

        }
        else
        {
            try 
            {
                    dialog.dismiss();
                } 
            catch (Exception e) 
            {
                // nothing
                }    
         }  // End of else

}        
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-07T06:18:59.130

ConfigChanges 不会导致此问题。

从上面的日志看来，活动中显示的对话框在活动不再可见后被关闭。

如果您共享了代码或至少给出了导致崩溃的步骤，我可以建议修复。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-09T10:09:12.500

在某些设备和某些情况下，活动在对话框成功关闭或异步任务在后台运行之前完成，因此当您调用对话框关闭它会导致

`java.lang.IllegalArgumentException: View not attached to window manager`

因为主 ui 线程已被解除。

为了解决这个问题，您可以跟踪活动是否完成，因此在活动的 onStop 中使对话框为空，然后在 onPostExecute 检查对话框的状态；代码会像

```
@Override
public void onStop() {
    super.onStop();
    dialog = null;
} 
```

并在 onpostexecute

```
if (dialog != null) { 
        dialog.dismiss();
   } 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-27T19:14:13.587

当您切换方向时，Android 将创建一个新视图。您可能会崩溃，因为您的后台线程正在尝试更改旧线程的状态。（它也可能有问题，因为您的后台线程不在 UI 线程上）

在您的特定情况下，您似乎正试图在对话框发生时关闭它，可能来自 AsyncTask 或后台线程。

要修复它，请尝试以下操作：

```
<activity android:label="@string/app_name" 
        android:configChanges="orientation|keyboardHidden" 
        android:name="ActivityName"> 
```

问题是当配置发生变化时系统会破坏活动。请参阅[配置更改](http://developer.android.com/reference/android/app/Activity.html#ConfigurationChanges)。

所以把它放在配置文件中可以避免系统破坏你的活动。相反，它调用 onConfigurationChanged(Configuration) 方法。

这里还有一个类似的更老的问题[，](https://stackoverflow.com/q/1111980/1069068)有更多的解决方案。我目前的答案是那里的两个答案的混合。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-11-07T01:23:13.703

您是否使用`AsyncTask`可以在活动被破坏后完成的？[未附加到窗口管理器的 android View](https://stackoverflow.com/questions/2224676/android-view-not-attached-to-window-manager)有一些答案。

此外，如果您的应用程序[以 API 13 或更高版本为目标](http://developer.android.com/guide/topics/resources/runtime-changes.html#HandlingTheChange)，您应该在清单中使用它而不是 Raghav 的建议（屏幕尺寸随着新 API 中的方向而变化）：

```
 <activity android:label="@string/app_name" 
    android:configChanges="orientation|keyboardHidden|screenSize" 
    android:name="ActivityName"> 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-11-07T06:11:50.440

```
private class LongOperation extends AsyncTask<String, Void, String> {

  @Override
  protected String doInBackground(String... params) {
     String response = "";

     for(int i=0;i<5;i++) {
         try {
             response =i;
             Thread.sleep(1000);
         } catch (InterruptedException e) {
             e.printStackTrace();
         }
     }

     return response;
  }      

  @Override
  protected void onPostExecute(String result) { 
     TextView txt = (TextView) findViewById(R.id.output);
     txt.setText(result); 
  }

  @Override
  protected void onPreExecute() {

  }

  @Override
  protected void onProgressUpdate(Void... values) {

  } 
```

}

用你的代码改变它。是版本问题。在第三版之后，我们不在主线程中设置视图，所以我们必须使用异步任务......

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-11-08T06:22:15.200

在活动的 onStop 中关闭对话框。另外在调用解除检查之前

`dialog.isShowing()`是真是假。

`if(dialog.isShowing())dialog.dismiss();`

从源代码

```
private int  findViewLocked(View view, boolean required){       
    synchronized (this){        
        final int count = mViews != null ? mViews.length : 0;
        for (int i=0; i<count; i++) {               
            if (mViews[i] == view) { 
                return i;               
            }
        }           
        if (required) {             
            throw new IllegalArgumentException( "View not attached to window manager");         
        } 
        return -1;      
    }   
} 
```

由于您收到此异常，这意味着调用关闭时未找到该视图。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2012-11-11T08:49:16.227

正如 Chinmoy Debnath 指出的那样，我很确定是 Dialog 导致了这个问题。

# objective-c - 核心图：主要 x 区间数

> ID：13103247
> 
> 赞同：1
> 
> 时间：2012-10-27T19:06:39.920
> 
> 标签：objective-c, ios, macos, core-plot

使用核心情节框架，我有一个`XYScatter Plot`. 一切正常，但我的 x 轴有 3 个主要刻度线。满刻度是 10，所以这使我的主要刻度出现在 1/3。很奇怪。我尝试了以下不同的组合：

```
CPTXYAxisSet *axisSet               = (CPTXYAxisSet *)plot.axisSet;
CPTXYAxis *x                        = axisSet.xAxis;

x.preferredNumberOfMajorTicks       = 4;
x.majorIntervalLength               = [[NSNumber numberWithFloat:35.0] decimalValue];
x.labelingPolicy                    = CPTAxisLabelingPolicyAutomatic; 
```

...但似乎无法得到我想要的 - 一个主要刻度可被 2 或 5 整除的情节。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-03T00:33:27.273

尝试`preferredNumberOfMajorTicks`使用默认值零 (0)。如果绘图范围的长度为 10，这应该让您每隔两个单位打勾。该`majorIntervalLength`属性对自动标记策略没有影响。

# ubuntu - phppgadmin 登录失败

> ID：13103251
> 
> 赞同：0
> 
> 时间：2012-10-27T19:06:45.180
> 
> 标签：ubuntu, login, phppgadmin

我在各种帖子和文档上尝试了多种方法，但我认为我遗漏了一些东西......我只是无法使用我的浏览器登录到 phppgadmin。我什至从终端创建了一个数据库，但我似乎无法使用 phppgadmin 登录。它说登录失败。

有没有其他人有同样的问题或至少有解决方案？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T07:39:46.393

您的用户名将是：postgres 和密码，无论您在创建用户角色和数据库时在终端中输入什么

# c# - 如何将变量传递给 WPF 绑定？

> ID：13103261
> 
> 赞同：1
> 
> 时间：2012-10-27T19:07:27.923
> 
> 标签：c#, wpf, binding

我正在编写一个显示某个耗时任务状态的 WPF 应用程序。

我有一个 TextBlock 绑定到任务的开始时间，我还有另一个 TextBlock 用于显示在所述任务上花费的时间量。

使用与转换器的简单绑定，我能够让第二个 TextBlock 正确显示 TimeSpan，但我对这个解决方案并不太着迷。我希望第二个 TextBlock 随着时间的推移更新 TimeSpan。

例如，当用户加载应用程序时，第二个 TextBlock 会说“5 分钟”，但 15 分钟后，它仍然会说“5 分钟”，这是一种误导。

我能够找到这个解决方案（[绑定到 DateTime.Now。更新值](https://stackoverflow.com/questions/3354793/binding-to-datetime-now-update-the-value)），这与我想要的非常接近，但并不完全在那里。

有什么办法可以将任务的开始时间传递给这个 Ticker 类并让文本自行更新？

编辑：这是我到目前为止所拥有的：
C#:
public class Ticker : INotifyPropertyChanged { public static DateTime StartTime { get; 放; }

```
 public Ticker()
    {
        Timer timer = new Timer();
        timer.Interval = 1000;
        timer.Elapsed += timer_Elapsed;
        timer.Start();
    }

    public string TimeDifference
    {
        get
        {
            string timetaken = "";
            try
            {
                TimeSpan ts = DateTime.Now - StartTime;
                timetaken = (StartTime == default(DateTime)) ? "StartTime not set!" : ((ts.Days * 24) + ts.Hours).ToString("N0") + " hours, " + ts.Minutes + " minutes, " + ts.Seconds + " seconds";
            }
            catch (Exception) { }

            return timetaken;
        }
    }

    private void timer_Elapsed(object sender, ElapsedEventArgs e)
    {
        if (PropertyChanged != null)
            PropertyChanged(this, new PropertyChangedEventArgs("TimeDifference"));
    }

    public event PropertyChangedEventHandler PropertyChanged;
} 
```

XAML：
`<StackPanel Grid.Row="2" Grid.Column="0" Orientation="Horizontal">
<TextBlock Text="Dataset started on:"/>
<TextBlock Name="starttimeLabel" Text="10/23/2012 4:42:26 PM"/>
</StackPanel>
<StackPanel Grid.Row="2" Grid.Column="1" Orientation="Horizontal">
<TextBlock Text="Time taken:"/>
<TextBlock Name="timespanLabel" Text="{Binding Source={StaticResource ticker}, Path=TimeDifference, Mode=OneWay}"/>
</StackPanel>`

最后，在我的 StatusPanel 的 Loaded 事件中，我有以下内容：
Ticker.StartTime = Convert.ToDateTime(starttimeLabel.Text);

我为糟糕的格式道歉，但我尝试按照说明无济于事（为代码块插入 4 个空格，然后尝试使用`<code></code>`等）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-28T00:21:22.817

尝试使用 DispatcherTimer "as" CountDown：

XAML：

```
<Window x:Class="CountDown.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="MainWindow" Height="350" Width="525">
    <Grid>
    <TextBlock x:Name="initialTime" Width="50" Height="20" Margin="165,66,288,224"></TextBlock>
    <TextBlock x:Name="txtCountDown" Width="50" Height="20" Margin="236,66,217,225"></TextBlock>
    </Grid>
</Window> 
```

C＃：

```
 namespace CountDown
    {
        /// <summary>
        /// Interaction logic for MainWindow.xaml
        /// </summary>
        public partial class MainWindow : Window
        {
            private DispatcherTimer cDown;

            public MainWindow()
            {
                InitializeComponent();
                initialTime.Text = DateTime.Now.ToString("HH:mm:ss");
                TimeSpan timeToDie = new TimeSpan(0, 0, 10); //Set the time "when the users load"
                txtCountDown.Text = timeToDie.ToString();

                cDown = new DispatcherTimer();
                cDown.Tick += new EventHandler(cDown_Tick);
                cDown.Interval = new TimeSpan(0, 0, 1);
                cDown.Start();
            }

            private void cDown_Tick(object sender, EventArgs e)
            {
                TimeSpan? dt = null;
                try
                {
                    dt = TimeSpan.Parse(txtCountDown.Text);
                    if (dt != null && dt.Value.TotalSeconds > 0  )
                    {
                        txtCountDown.Text = dt.Value.Add(new TimeSpan(0,0,-1)).ToString();
                    }
                    else 
                    {
                        cDown.Stop();
                    }
                }
                catch (Exception ex)
                {
                     cDown.Stop();
                     Console.WriteLine(ex.Message);
                }

            }

        }
    } 
```

# ios - 带圆边的空按钮

> ID：13103263
> 
> 赞同：0
> 
> 时间：2012-10-27T19:07:41.350
> 
> 标签：ios, cocoa-touch, uibutton, uikit

我想知道我是否可以在 Xcode 中制作一个按钮，它只是一个圆角矩形，里面什么都没有，所以背景图像会显示在按钮中，但我需要圆角矩形线吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-27T19:09:42.523

您可以使用不带文本的默认样式，也可以使用自定义样式。在这种情况下，您必须自己提供所有图形，包括任何圆角或边框。

# sql-server - TSQL：查找变量的声明长度

> ID：13103264
> 
> 赞同：2
> 
> 时间：2012-10-27T19:07:41.743
> 
> 标签：sql-server, tsql, variables

> **可能重复：**
> [sql中变量的数据类型大小](https://stackoverflow.com/questions/9686525/data-type-size-of-variable-in-sql)

你能找到声明的变量的最大长度`T-SQL`吗？

例如：

```
DECLARE @myVar varchar(123) 
```

`@myVar`-- 我怎样才能找到123的最大长度？

# javascript - 仅预加载选定的图像

> ID：13103267
> 
> 赞同：0
> 
> 时间：2012-10-27T19:07:52.727
> 
> 标签：javascript

我正在寻求解决以下问题的帮助：我有一个带有 2 个滑块和可调整大小内容的网站，我需要在以下情况下在网站上加载该照片： - 当它在滑块中或在网站上可见时，它应该随网站一起加载 - 当它不可见它应该是预加载的

重要笔记：

*   我无法更改页面 html（所有图像都有 src 属性） - 无法设置为 css。
*   我不能使用 jQuery，因为我不能等待 document.ready
*   所有这些都以互联网连接速度非常慢的用户不会注意到的方式完成。

任何线索如何做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-27T19:13:41.763

将正文标签设置为可见性：在 html 中隐藏并在后台加载...一旦您加载页面上的所有内容（包括幻灯片和照片），然后将其设置为可见性：可见。这可以帮助您进行设计。

# c# - 使用 ServiceStack.Text 解析 JSON 的问题

> ID：13103270
> 
> 赞同：2
> 
> 时间：2012-10-27T19:08:05.217
> 
> 标签：c#, .net, json, servicestack

我正在使用 ServiceStack.Text 来解析[WorldWeatherOnline 的 Marine Api](http://www.worldweatheronline.com/premium-weather.aspx?menu=marine)。

反序列化 JSON 时，库会错误地解析 JSON，如下图的第二列所示

![在此处输入图像描述](../Images/4d7aa144850aad949167df397fc45ccb.png)

这是 JSON 的一部分（为简洁起见）

```
{
"data":{
  "nearest_area":[
     {
        "distance_miles":"36.8",
        "latitude":"53.965",
        "longitude":"0.456"
     }
   ]
 }
} 
```

这是我试图反序列化的类

```
 public class Weather
{
    public NearestArea NearestArea { get; set; }

}

public class NearestArea
{
    public double? RetLatitude { get; set; }
    public double? RetLongitude { get; set; }
    public double? MilesFromReq { get; set; }
} 
```

这是进行反序列化的代码

```
Weather result = JsonObject.Parse(content).Object("data").ConvertTo(x=> new Weather{

                        NearestArea = x.Object("nearest_area").ConvertTo(n => new NearestArea{

                            MilesFromReq = Convert.ToDouble(n.Get("distance_miles")),
                            RetLatitude = Convert.ToDouble(n.Get ("latitude")),
                            RetLongitude = Convert.ToDouble(n.Get ("longitude"))

                        }) 
```

谁能发现问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-27T19:43:34.453

下面的代码应该工作......

```
var weather = ServiceStack.Text.JsonSerializer.DeserializeFromString<RootWeather>(content);

public class RootWeather
{
    public Weather data { get; set; }

}

public class Weather
{
    public List<NearestArea> nearest_area { get; set; }

}

public class NearestArea
{
    public string latitude { get; set; }
    public string longitude { get; set; }
    public string distance_miles { get; set; }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-27T19:11:00.307

您可能还会查看[DataContractJsonSerializer](http://msdn.microsoft.com/en-us/library/system.runtime.serialization.json.datacontractjsonserializer.aspx)。这个序列化器是为这样的工作而设计的。

基本上你只需要定义一个具有一些数据成员属性的类，其余的都是自动完成的。[请参阅DataContractSerializer](http://msdn.microsoft.com/en-us/library/system.runtime.serialization.datacontractserializer.aspx)的 MSDN 上的示例，该示例仅使用 xml 完成相同的工作。

# jquery - 使图像链接到下一页jquery mobile

> ID：13103271
> 
> 赞同：3
> 
> 时间：2012-10-27T19:08:07.000
> 
> 标签：jquery, image, mobile

我正在开发我的第一个 jquery 移动应用程序。所以..我使用数据角色将每一页都放在一个 HTML 文件中。现在，我的问题是将图像链接到下一页。当我添加一个标准按钮时，它将链接到我用#somepage 引用的页面。但是现在我添加了一张图片，我希望当有人点击它时，我希望该图片链接到下一页。有人可以告诉我为什么它不起作用吗？

```
<div data-role="page id="home">
    <div data-role="header" id="header" data-position="fixed">
    </div>

    <div data-role="content" id="content">

    <a href="#calculator" > <img src="images/taximeter.png" id="taximeter"> </a>

    </div>

   <div data-role="footer" data-position-"fixed">

       <div data-role="navbar">
    <ul>
        <li><a href="#home" class="ui-bar-a"> Home </a></li>
            <li><a href="#instellingen" class="ui-bar-a"> Instellingen </a></li>
            <li><a href="#contact" class="ui-bar-a"> Contact </a></li>
            </ul>
       </div>
</div> 
```

```
<!---Calculator page -->

<div data-role="page" id="calculator">
     <div data-role="header" >
        <h1> Calculator</h1>
     </div>

     <div data-role="content">
     </div>

     <div data-role="footer">
     </div>
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T07:08:27.023

当你想加载另一个页面时，你必须在 href 中指定文件名

```
<a href="calculator.html">link</a> 
```

如果页面在同一个 html 文件中，则可以使用 href=#calculator

```
<div data-role=page id=current_page>
<a href="#calculator">link</a>
</div>

<div data-role=page id=calculator>
//page content
</div> 
```

# javascript - 使用 PrimePush 时 FF 错误控制台中的“格式不正确”错误

> ID：13103276
> 
> 赞同：1
> 
> 时间：2012-10-27T19:08:49.357
> 
> 标签：javascript, primefaces, firebug

我正在使用：

Linux
PrimeFaces 3.4.1
Glassfish 3.1.2.2 (build 5)
FireFox 10.0.7

我有一个消息驱动的 bean，当它被触发时，我想通过 PrimePush 发送数据，这些数据将使用咆哮出现在浏览器中。这就是 MDB 的 onMessage() 中的内容。这部分似乎工作正常，因为浏览器正在接收一些东西。

```
pushContext = PushContextFactory.getDefault().getPushContext();
pushContext.push("/notifications",
    new FacesMessage("Test Summary", "Test Detail")); 
```

当这个 MDB 触发时，我从 firefox 错误控制台中得到以下信息。

```
Error: not well-formed
Source File: http://localhost:8080/test/primepush/notifications?X-Atmospheretracking-id=0&X-Atmosphere-Framework=1.0&X-Atmosphere-Transport=long-polling&X-Cache-Date=0&_=1351363941008
Line: 1, Column: 1
Source Code:
{"data":{"summary":"Test Summary","detail":"Test Detail","severity":"INFO 0","rendered":false}}

Error: growl is not defined
Source File: http://localhost:8080/test/test.xhtml
Line: 25 
```

这是 text.xhtml 中的代码。

```
<h:form id="test_form">

    <p:growl id="growl" for="items" showDetail="true"/>

    <p:socket onMessage="handleMessage" channel="/notifications"/>

    <script type="text/javascript">
        function handleMessage(data) {
            data.severity = 'info';
            growl.show([data]);
        }
    </script>

</h:form> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T18:04:03.457

尝试

```
<p:growl widgetVar="growl" showDetail="true" /> 
```

在表格之外

看看： http: [//www.primefaces.org/showcase/push/facesmessage.jsf](http://www.primefaces.org/showcase/push/facesmessage.jsf)

# java - 关闭客户端后通过 SocketChannel 向客户端发送数据

> ID：13103286
> 
> 赞同：0
> 
> 时间：2012-10-27T19:10:28.717
> 
> 标签：java, client-server, socketchannel, disconnection

我有一个客户端和一个服务器应用程序，其中客户端发送一个数据字节，表示用户已关闭客户端窗口并终止了客户端程序。问题是服务器可能会在丢弃该客户端之前向该客户端发送最后一个通知。如果服务器在阻塞模式下使用 SocketChannel 的 write 方法，它会无限期地阻塞还是被忽略？我应该让客户端在断开连接之前等待“断开连接确认”吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-27T22:12:53.257

“是”对你的最后一个问题。您应该设计并实现一个告别协议，其中包括客户端不再发送或读取任何应用程序级数据的状态，但仍在等待关闭时的最终确认。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-28T00:36:38.850

它不会永远阻塞，也不会被忽略。如果套接字发送缓冲区中有空间用于数据，它很可能根本不会阻塞。如果它确实阻塞，它可能会引发 IOException: 'connection reset by peer'，或者它可能只是解除阻塞并正常返回。没有人能预测到这一点。这种情况是不正确的，不应允许发生。您可以通过关闭两个套接字以进行输出然后读取直到获得 EOS 来达到商定的相互关闭点；那么双方都在同一点并且可能会关闭。

# directx-11 - 辐照度体积与平铺延迟着色

> ID：13103294
> 
> 赞同：2
> 
> 时间：2012-10-27T19:11:57.390
> 
> 标签：directx-11, compute-shader, deferred-rendering

我在 DirectX 11 中有一个渲染器，它在计算着色器上使用延迟着色和平铺光剔除。我可以以 30-35 FPS 的稳定帧速率运行 1024-2048 个点光源。然而，我没有全局照明。辐照度体积（在孤岛危机3中使用）是更好的解决方案吗？你能在场景中有 2000 个辐照量并有 30 FPS 吗？还是我应该坚持我目前的方法而忘记全局照明？

# ssl-certificate - Bouncy Castle - 此证书的数字签名无效

> ID：13103295
> 
> 赞同：2
> 
> 时间：2012-10-27T19:11:57.933
> 
> 标签：ssl-certificate, bouncycastle

我一直在使用 bouncy castle 生成自签名证书，并且在更新计算机 A 上运行的 win7 操作系统之前一切顺利。更新后，使用 CERTMGR 查看证书时出现以下错误：此证书的数字无效签名。

同一证书不会在未收到 Microsoft 安全更新的另一台计算机 (B) 上出现错误。然后我在 B 上生成了一个没有错误的新证书，然后将其安装在 A 上，并且发生了同样的错误。（此证书的数字签名无效。）

我回到充气城堡并运行 Org.BouncyCastle.Pkcs.Examples Pkcs12Example 中提供的示例中的代码，我得到不同的相同结果，具体取决于 A 上的计算机，它在 B 上失败，没关系。

有没有人遇到过同样的问题，可以做些什么来解决这个错误？我不想回滚计算机 A 以删除引入此错误的 Microsoft 更新。如果可能的话，我正在寻找一个永久性的修复方法

```
 namespace Org.BouncyCastle.Pkcs.Examples
{
    /**
    * Example of how to set up a certificate chain and a PKCS 12 store for
    * a private individual - obviously you'll need to generate your own keys,
    * and you may need to add a NetscapeCertType extension or add a key
    * usage extension depending on your application, but you should get the
    * idea! As always this is just an example...
    */
    public class Pkcs12Example
    {
        private static readonly char[] passwd = "hello world".ToCharArray();

        private static readonly X509V1CertificateGenerator v1CertGen = new X509V1CertificateGenerator();
        private static readonly X509V3CertificateGenerator v3CertGen = new X509V3CertificateGenerator();

        /**
        * we generate the CA's certificate
        */
        public static X509CertificateEntry CreateMasterCert(
            AsymmetricKeyParameter  pubKey,
            AsymmetricKeyParameter  privKey)
        {
            //
            // signers name
            //
            string issuer = "C=AU, O=The Legion of the Bouncy Castle, OU=Bouncy Primary Certificate";

            //
            // subjects name - the same as we are self signed.
            //
            string subject = "C=AU, O=The Legion of the Bouncy Castle, OU=Bouncy Primary Certificate";

            //
            // create the certificate - version 1
            //

            v1CertGen.SetSerialNumber(BigInteger.One);
            v1CertGen.SetIssuerDN(new X509Name(issuer));
            v1CertGen.SetNotBefore(DateTime.UtcNow.AddMonths(-1));
            v1CertGen.SetNotAfter(DateTime.UtcNow.AddMonths(1));
            v1CertGen.SetSubjectDN(new X509Name(subject));
            v1CertGen.SetPublicKey(pubKey);
            v1CertGen.SetSignatureAlgorithm("SHA1WithRSAEncryption");

            X509Certificate cert = v1CertGen.Generate(privKey);

            cert.CheckValidity(DateTime.UtcNow);

            cert.Verify(pubKey);

//          PKCS12BagAttributeCarrier   bagAttr = (PKCS12BagAttributeCarrier)cert;
            IDictionary bagAttr = new Hashtable();

            //
            // this is actually optional - but if you want to have control
            // over setting the friendly name this is the way to do it...
            //
//          bagAttr.setBagAttribute(
//              PKCSObjectIdentifiers.pkcs_9_at_friendlyName,
//              new DERBMPString("Bouncy Primary Certificate"));
            bagAttr.Add(PkcsObjectIdentifiers.Pkcs9AtFriendlyName.Id,
                new DerBmpString("Bouncy Primary Certificate"));

            return new X509CertificateEntry(cert, bagAttr);
        }

        /**
        * we generate an intermediate certificate signed by our CA
        */
        public static X509CertificateEntry CreateIntermediateCert(
            AsymmetricKeyParameter  pubKey,
            AsymmetricKeyParameter  caPrivKey,
            X509Certificate         caCert)
        {
            //
            // subject name table.
            //
            IDictionary attrs = new Hashtable();
            IList order = new ArrayList();

            attrs.Add(X509Name.C, "AU");
            attrs.Add(X509Name.O, "The Legion of the Bouncy Castle");
            attrs.Add(X509Name.OU, "Bouncy Intermediate Certificate");
            attrs.Add(X509Name.EmailAddress, "feedback-crypto@bouncycastle.org");

            order.Add(X509Name.C);
            order.Add(X509Name.O);
            order.Add(X509Name.OU);
            order.Add(X509Name.EmailAddress);

            //
            // create the certificate - version 3
            //
            v3CertGen.Reset();

            v3CertGen.SetSerialNumber(BigInteger.Two);
            v3CertGen.SetIssuerDN(PrincipalUtilities.GetSubjectX509Principal(caCert));
            v3CertGen.SetNotBefore(DateTime.UtcNow.AddMonths(-1));
            v3CertGen.SetNotAfter(DateTime.UtcNow.AddMonths(1));
            v3CertGen.SetSubjectDN(new X509Name(order, attrs));
            v3CertGen.SetPublicKey(pubKey);
            v3CertGen.SetSignatureAlgorithm("SHA1WithRSAEncryption");

            //
            // extensions
            //
            v3CertGen.AddExtension(
                X509Extensions.SubjectKeyIdentifier,
                false,
                new SubjectKeyIdentifierStructure(pubKey));

            v3CertGen.AddExtension(
                X509Extensions.AuthorityKeyIdentifier,
                false,
                new AuthorityKeyIdentifierStructure(caCert));

            v3CertGen.AddExtension(
                X509Extensions.BasicConstraints,
                true,
                new BasicConstraints(0));

            X509Certificate cert = v3CertGen.Generate(caPrivKey);

            cert.CheckValidity(DateTime.UtcNow);

            cert.Verify(caCert.GetPublicKey());

            IDictionary bagAttr = new Hashtable();

            bagAttr.Add(PkcsObjectIdentifiers.Pkcs9AtFriendlyName.Id,
                new DerBmpString("Bouncy Intermediate Certificate"));

            return new X509CertificateEntry(cert, bagAttr);
        }

        /**
        * we generate a certificate signed by our CA's intermediate certificate
        */
        public static X509CertificateEntry CreateCert(
            AsymmetricKeyParameter  pubKey,
            AsymmetricKeyParameter  caPrivKey,
            AsymmetricKeyParameter  caPubKey)
        {
            //
            // signers name table.
            //
            IDictionary sAttrs = new Hashtable();
            IList sOrder = new ArrayList();

            sAttrs.Add(X509Name.C, "AU");
            sAttrs.Add(X509Name.O, "The Legion of the Bouncy Castle");
            sAttrs.Add(X509Name.OU, "Bouncy Intermediate Certificate");
            sAttrs.Add(X509Name.EmailAddress, "feedback-crypto@bouncycastle.org");

            sOrder.Add(X509Name.C);
            sOrder.Add(X509Name.O);
            sOrder.Add(X509Name.OU);
            sOrder.Add(X509Name.EmailAddress);

            //
            // subjects name table.
            //
            IDictionary attrs = new Hashtable();
            IList order = new ArrayList();

            attrs.Add(X509Name.C, "AU");
            attrs.Add(X509Name.O, "The Legion of the Bouncy Castle");
            attrs.Add(X509Name.L, "Melbourne");
            attrs.Add(X509Name.CN, "Eric H. Echidna");
            attrs.Add(X509Name.EmailAddress, "feedback-crypto@bouncycastle.org");

            order.Add(X509Name.C);
            order.Add(X509Name.O);
            order.Add(X509Name.L);
            order.Add(X509Name.CN);
            order.Add(X509Name.EmailAddress);

            //
            // create the certificate - version 3
            //
            v3CertGen.Reset();

            v3CertGen.SetSerialNumber(BigInteger.Three);
            v3CertGen.SetIssuerDN(new X509Name(sOrder, sAttrs));
            v3CertGen.SetNotBefore(DateTime.UtcNow.AddMonths(-1));
            v3CertGen.SetNotAfter(DateTime.UtcNow.AddMonths(1));
            v3CertGen.SetSubjectDN(new X509Name(order, attrs));
            v3CertGen.SetPublicKey(pubKey);
            v3CertGen.SetSignatureAlgorithm("SHA1WithRSAEncryption");

            //
            // add the extensions
            //
            v3CertGen.AddExtension(
                X509Extensions.SubjectKeyIdentifier,
                false,
                new SubjectKeyIdentifierStructure(pubKey));

            v3CertGen.AddExtension(
                X509Extensions.AuthorityKeyIdentifier,
                false,
                new AuthorityKeyIdentifierStructure(caPubKey));

            X509Certificate cert = v3CertGen.Generate(caPrivKey);

            cert.CheckValidity(DateTime.UtcNow);

            cert.Verify(caPubKey);

            IDictionary bagAttr = new Hashtable();

            bagAttr.Add(PkcsObjectIdentifiers.Pkcs9AtFriendlyName.Id,
                new DerBmpString("Eric's Key"));
            bagAttr.Add(PkcsObjectIdentifiers.Pkcs9AtLocalKeyID.Id,
                new SubjectKeyIdentifierStructure(pubKey));

            return new X509CertificateEntry(cert, bagAttr);
        }

        public static void Main(
            string[] args)
        {
//          Security.addProvider(new BouncyCastleProvider());

            //
            // personal keys
            //
//          RSAPublicKeySpec pubKeySpec = new RSAPublicKeySpec(
            RsaKeyParameters pubKey = new RsaKeyParameters(false,
                new BigInteger("b4a7e46170574f16a97082b22be58b6a2a629798419be12872a4bdba626cfae9900f76abfb12139dce5de56564fab2b6543165a040c606887420e33d91ed7ed7", 16),
                new BigInteger("11", 16));

//          RSAPrivateCrtKeySpec privKeySpec = new RSAPrivateCrtKeySpec(
            RsaPrivateCrtKeyParameters privKey = new RsaPrivateCrtKeyParameters(
                new BigInteger("b4a7e46170574f16a97082b22be58b6a2a629798419be12872a4bdba626cfae9900f76abfb12139dce5de56564fab2b6543165a040c606887420e33d91ed7ed7", 16),
                new BigInteger("11", 16),
                new BigInteger("9f66f6b05410cd503b2709e88115d55daced94d1a34d4e32bf824d0dde6028ae79c5f07b580f5dce240d7111f7ddb130a7945cd7d957d1920994da389f490c89", 16),
                new BigInteger("c0a0758cdf14256f78d4708c86becdead1b50ad4ad6c5c703e2168fbf37884cb", 16),
                new BigInteger("f01734d7960ea60070f1b06f2bb81bfac48ff192ae18451d5e56c734a5aab8a5", 16),
                new BigInteger("b54bb9edff22051d9ee60f9351a48591b6500a319429c069a3e335a1d6171391", 16),
                new BigInteger("d3d83daf2a0cecd3367ae6f8ae1aeb82e9ac2f816c6fc483533d8297dd7884cd", 16),
                new BigInteger("b8f52fc6f38593dabb661d3f50f8897f8106eee68b1bce78a95b132b4e5b5d19", 16));

            //
            // intermediate keys.
            //
//          RSAPublicKeySpec intPubKeySpec = new RSAPublicKeySpec(
            RsaKeyParameters intPubKey = new RsaKeyParameters(false,
                new BigInteger("8de0d113c5e736969c8d2b047a243f8fe18edad64cde9e842d3669230ca486f7cfdde1f8eec54d1905fff04acc85e61093e180cadc6cea407f193d44bb0e9449b8dbb49784cd9e36260c39e06a947299978c6ed8300724e887198cfede20f3fbde658fa2bd078be946a392bd349f2b49c486e20c405588e306706c9017308e69", 16),
                new BigInteger("ffff", 16));

//          RSAPrivateCrtKeySpec intPrivKeySpec = new RSAPrivateCrtKeySpec(
            RsaPrivateCrtKeyParameters intPrivKey = new RsaPrivateCrtKeyParameters(
                new BigInteger("8de0d113c5e736969c8d2b047a243f8fe18edad64cde9e842d3669230ca486f7cfdde1f8eec54d1905fff04acc85e61093e180cadc6cea407f193d44bb0e9449b8dbb49784cd9e36260c39e06a947299978c6ed8300724e887198cfede20f3fbde658fa2bd078be946a392bd349f2b49c486e20c405588e306706c9017308e69", 16),
                new BigInteger("ffff", 16),
                new BigInteger("7deb1b194a85bcfd29cf871411468adbc987650903e3bacc8338c449ca7b32efd39ffc33bc84412fcd7df18d23ce9d7c25ea910b1ae9985373e0273b4dca7f2e0db3b7314056ac67fd277f8f89cf2fd73c34c6ca69f9ba477143d2b0e2445548aa0b4a8473095182631da46844c356f5e5c7522eb54b5a33f11d730ead9c0cff", 16),
                new BigInteger("ef4cede573cea47f83699b814de4302edb60eefe426c52e17bd7870ec7c6b7a24fe55282ebb73775f369157726fcfb988def2b40350bdca9e5b418340288f649", 16),
                new BigInteger("97c7737d1b9a0088c3c7b528539247fd2a1593e7e01cef18848755be82f4a45aa093276cb0cbf118cb41117540a78f3fc471ba5d69f0042274defc9161265721", 16),
                new BigInteger("6c641094e24d172728b8da3c2777e69adfd0839085be7e38c7c4a2dd00b1ae969f2ec9d23e7e37090fcd449a40af0ed463fe1c612d6810d6b4f58b7bfa31eb5f", 16),
                new BigInteger("70b7123e8e69dfa76feb1236d0a686144b00e9232ed52b73847e74ef3af71fb45ccb24261f40d27f98101e230cf27b977a5d5f1f15f6cf48d5cb1da2a3a3b87f", 16),
                new BigInteger("e38f5750d97e270996a286df2e653fd26c242106436f5bab0f4c7a9e654ce02665d5a281f2c412456f2d1fa26586ef04a9adac9004ca7f913162cb28e13bf40d", 16));

            //
            // ca keys
            //
//          RSAPublicKeySpec caPubKeySpec = new RSAPublicKeySpec(
            RsaKeyParameters caPubKey = new RsaKeyParameters(false,
                new BigInteger("b259d2d6e627a768c94be36164c2d9fc79d97aab9253140e5bf17751197731d6f7540d2509e7b9ffee0a70a6e26d56e92d2edd7f85aba85600b69089f35f6bdbf3c298e05842535d9f064e6b0391cb7d306e0a2d20c4dfb4e7b49a9640bdea26c10ad69c3f05007ce2513cee44cfe01998e62b6c3637d3fc0391079b26ee36d5", 16),
                new BigInteger("11", 16));

//          RSAPrivateCrtKeySpec   caPrivKeySpec = new RSAPrivateCrtKeySpec(
            RsaPrivateCrtKeyParameters caPrivKey = new RsaPrivateCrtKeyParameters(
                new BigInteger("b259d2d6e627a768c94be36164c2d9fc79d97aab9253140e5bf17751197731d6f7540d2509e7b9ffee0a70a6e26d56e92d2edd7f85aba85600b69089f35f6bdbf3c298e05842535d9f064e6b0391cb7d306e0a2d20c4dfb4e7b49a9640bdea26c10ad69c3f05007ce2513cee44cfe01998e62b6c3637d3fc0391079b26ee36d5", 16),
                new BigInteger("11", 16),
                new BigInteger("92e08f83cc9920746989ca5034dcb384a094fb9c5a6288fcc4304424ab8f56388f72652d8fafc65a4b9020896f2cde297080f2a540e7b7ce5af0b3446e1258d1dd7f245cf54124b4c6e17da21b90a0ebd22605e6f45c9f136d7a13eaac1c0f7487de8bd6d924972408ebb58af71e76fd7b012a8d0e165f3ae2e5077a8648e619", 16),
                new BigInteger("f75e80839b9b9379f1cf1128f321639757dba514642c206bbbd99f9a4846208b3e93fbbe5e0527cc59b1d4b929d9555853004c7c8b30ee6a213c3d1bb7415d03", 16),
                new BigInteger("b892d9ebdbfc37e397256dd8a5d3123534d1f03726284743ddc6be3a709edb696fc40c7d902ed804c6eee730eee3d5b20bf6bd8d87a296813c87d3b3cc9d7947", 16),
                new BigInteger("1d1a2d3ca8e52068b3094d501c9a842fec37f54db16e9a67070a8b3f53cc03d4257ad252a1a640eadd603724d7bf3737914b544ae332eedf4f34436cac25ceb5", 16),
                new BigInteger("6c929e4e81672fef49d9c825163fec97c4b7ba7acb26c0824638ac22605d7201c94625770984f78a56e6e25904fe7db407099cad9b14588841b94f5ab498dded", 16),
                new BigInteger("dae7651ee69ad1d081ec5e7188ae126f6004ff39556bde90e0b870962fa7b926d070686d8244fe5a9aa709a95686a104614834b0ada4b10f53197a5cb4c97339", 16));

            //
            // set up the keys
            //
//          KeyFactory          fact = KeyFactory.getInstance("RSA", "BC");
//          PrivateKey          caPrivKey = fact.generatePrivate(caPrivKeySpec);
//          PublicKey           caPubKey = fact.generatePublic(caPubKeySpec);
//          PrivateKey          intPrivKey = fact.generatePrivate(intPrivKeySpec);
//          PublicKey           intPubKey = fact.generatePublic(intPubKeySpec);
//          PrivateKey          privKey = fact.generatePrivate(privKeySpec);
//          PublicKey           pubKey = fact.generatePublic(pubKeySpec);

            X509CertificateEntry[] chain = new X509CertificateEntry[3];

            chain[2] = CreateMasterCert(caPubKey, caPrivKey);
            chain[1] = CreateIntermediateCert(intPubKey, caPrivKey, chain[2].Certificate);
            chain[0] = CreateCert(pubKey, intPrivKey, intPubKey);

            IDictionary bagAttr = new Hashtable();
            bagAttr.Add(PkcsObjectIdentifiers.Pkcs9AtFriendlyName.Id,
                new DerBmpString("Eric's Key"));
            bagAttr.Add(PkcsObjectIdentifiers.Pkcs9AtLocalKeyID.Id,
                new SubjectKeyIdentifierStructure(pubKey));

            //
            // store the key and the certificate chain
            //
//          KeyStore store = KeyStore.getInstance("PKCS12", "BC");
//          store.load(null, null);
            Pkcs12Store store = new Pkcs12StoreBuilder().Build();

            //
            // if you haven't set the friendly name and local key id above
            // the name below will be the name of the key
            //
            store.SetKeyEntry("Eric's Key", new AsymmetricKeyEntry(privKey, bagAttr), chain);

//          FileOutputStream fOut = new FileOutputStream("id.p12");
//
//          store.store(fOut, passwd);
            FileStream fOut = File.Create("id.p12");
            store.Save(fOut, passwd, new SecureRandom());
            fOut.Close();

            X509Certificate cert2 = chain[2].Certificate;
            // convert to "Microsoft" x509cert.
            System.Security.Cryptography.X509Certificates.X509Certificate newcert2 = Org.BouncyCastle.Security.DotNetUtilities.ToX509Certificate(cert2);
            //convert to Microsoft X509Certificate to Microsoft X509Certificate2 
            System.Security.Cryptography.X509Certificates.X509Certificate2 netcert2 = new System.Security.Cryptography.X509Certificates.X509Certificate2(newcert2);
            netcert2.FriendlyName = "AAAA root certificate";
            PutCertificateInstore(netcert2);

            X509Certificate cert1 = chain[1].Certificate;
            // convert to "Microsoft" x509cert.
            System.Security.Cryptography.X509Certificates.X509Certificate newcert1 = Org.BouncyCastle.Security.DotNetUtilities.ToX509Certificate(cert1);
            //convert to Microsoft X509Certificate to Microsoft X509Certificate2 
            System.Security.Cryptography.X509Certificates.X509Certificate2 netcert1 = new System.Security.Cryptography.X509Certificates.X509Certificate2(newcert1);
            netcert1.FriendlyName = "AAAA Intermediate Certificate";
            PutCertificateInstore(netcert1);

            X509Certificate cert0 = chain[0].Certificate;
            // convert to "Microsoft" x509cert.
            System.Security.Cryptography.X509Certificates.X509Certificate newcert0 = Org.BouncyCastle.Security.DotNetUtilities.ToX509Certificate(cert0);
            //convert to Microsoft X509Certificate to Microsoft X509Certificate2 
            System.Security.Cryptography.X509Certificates.X509Certificate2 netcert0 = new System.Security.Cryptography.X509Certificates.X509Certificate2(newcert0);
            netcert0.FriendlyName = "AAAA key for hostName: " ;
            PutCertificateInstore(netcert0);

        }

        public static void PutCertificateInstore(System.Security.Cryptography.X509Certificates.X509Certificate2 ServerCertificate)
        {
            System.Security.Cryptography.X509Certificates.X509Store store = new System.Security.Cryptography.X509Certificates.X509Store(System.Security.Cryptography.X509Certificates.StoreName.AuthRoot, System.Security.Cryptography.X509Certificates.StoreLocation.LocalMachine);
            store.Open(System.Security.Cryptography.X509Certificates.OpenFlags.ReadWrite);
            store.Add(ServerCertificate);
            store.Close();

        }

        private static void CreateCertNew(out System.Security.Cryptography.RSACryptoServiceProvider rcsp, out System.Security.Cryptography.X509Certificates.X509Certificate2 importcert)
        {
            X509Name x2 = new X509Name("CN=Some Root CA, C=NL, OU=BleedingEdge, ST=Somewhere, L=Somelane");
            RsaKeyPairGenerator rkpg = new RsaKeyPairGenerator();
            rkpg.Init(new KeyGenerationParameters(new SecureRandom(), 2048));
            AsymmetricCipherKeyPair ackp = rkpg.GenerateKeyPair();

            RsaPrivateCrtKeyParameters rsaprivkey = ((RsaPrivateCrtKeyParameters)ackp.Private);

            ArrayList us = new ArrayList
                                    {
                                        KeyPurposeID.IdKPCodeSigning,
                                        KeyPurposeID.IdKPEmailProtection,
                                        KeyPurposeID.IdKPIpsecEndSystem,
                                        KeyPurposeID.IdKPIpsecTunnel,
                                        KeyPurposeID.IdKPServerAuth,
                                        KeyPurposeID.IdKPTimeStamping,
                                        KeyPurposeID.IdKPOcspSigning,
                                        KeyPurposeID.IdKPClientAuth,
                                        KeyPurposeID.IdKPIpsecUser
                                    };

            X509V3CertificateGenerator certgen = new X509V3CertificateGenerator();
            certgen.SetIssuerDN(x2);
            certgen.SetSubjectDN(x2);
            certgen.SetPublicKey(ackp.Public);
            certgen.SetSerialNumber(new BigInteger("1"));
            certgen.SetSignatureAlgorithm("SHA1WITHRSA");
            certgen.SetNotAfter(DateTime.Today.AddYears(10));
            certgen.SetNotBefore(DateTime.Today);
            certgen.AddExtension(X509Extensions.ExtendedKeyUsage, false, new ExtendedKeyUsage(us));
            certgen.AddExtension(X509Extensions.KeyUsage, true,
                                    new KeyUsage(KeyUsage.CrlSign | KeyUsage.KeyCertSign));
            certgen.AddExtension(X509Extensions.BasicConstraints, true, new BasicConstraints(true));
            X509Certificate cert = certgen.Generate(ackp.Private);

            System.Security.Cryptography.CspParameters cparms = new System.Security.Cryptography.CspParameters
            {
                CryptoKeySecurity = new System.Security.AccessControl.CryptoKeySecurity(),
                Flags = System.Security.Cryptography.CspProviderFlags.UseMachineKeyStore,
            };

            rcsp = new System.Security.Cryptography.RSACryptoServiceProvider(cparms);

            System.Security.Cryptography.RSAParameters parms = new System.Security.Cryptography.RSAParameters
            {
                Modulus = rsaprivkey.Modulus.ToByteArrayUnsigned(),
                P = rsaprivkey.P.ToByteArrayUnsigned(),
                Q = rsaprivkey.Q.ToByteArrayUnsigned(),
                DP = rsaprivkey.DP.ToByteArrayUnsigned(),
                DQ = rsaprivkey.DQ.ToByteArrayUnsigned(),
                InverseQ = rsaprivkey.QInv.ToByteArrayUnsigned(),
                D = rsaprivkey.Exponent.ToByteArrayUnsigned(),
                Exponent = rsaprivkey.PublicExponent.ToByteArrayUnsigned()
            };

            rcsp.ImportParameters(parms);

            importcert = new System.Security.Cryptography.X509Certificates.X509Certificate2(DotNetUtilities.ToX509Certificate(cert));
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T15:35:05.577

我自己用 PKCS12-Certificates 做一些测试，我可能对你/我的问题有所了解。

如果根本没有注册的根证书或注册的根证书与当前证书链（旧版本）中的一个不匹配，我会收到有关任何最终证书的无效签名的上述错误。

如果没有注册的根证书，它只会声明它无法验证签名。

如果确实存在匹配的根证书，它将声明签名有效。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-05-07T21:40:27.140

我认为问题是由您的个人证书中的 512 位密钥大小引起的。在您开始观察问题的时间非常接近时，Microsoft 发布了一个安全[补丁](http://blogs.technet.com/b/rmilne/archive/2012/09/03/important-upcoming-certificate-changes.aspx)(KB2661254)，该补丁可以阻止 RSA 密钥长度小于 1024 位。

尝试使用 1024 位或更高的密钥长度创建您的个人证书，看看问题是否消失。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-11-05T14:46:15.053

我遇到了这个问题，因为我使用了*错误的* **Private Key**，而不是与 CA 证书对应的那个。从技术上讲，我正在生成一个新的，我不知道为什么。这是一个愚蠢的错误，但值得一提，因为我几天来一直试图找到错误。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-09-13T12:26:41.250

在签署中间 CA 的 CSR 时，我也遇到了类似的问题。我犯的错误是在扩展中使用中间**CA*****的公钥***作为**AuthorityKeyIdentifier 。**我将其更改为***CA 的公钥***，并将**subjectKeyIdentifier**作为解决无效数字签名的***中间 CA 的公钥。***

# c++ - 在 C++ 中逐行读取文件（每行有一个字符串和几个 int 值）？

> ID：13103296
> 
> 赞同：2
> 
> 时间：2012-10-27T19:12:02.427
> 
> 标签：c++, ifstream

（每行整数个数相同，但未知）

所以我可能有这样的文件：

```
标题1 34 98
标题2 15 9
标题3 45 15

```

或者

```
标题1 34 98 76 97
标题2 15 9 43 8
标题3 45 15 34 7

```

或者 ...

```
struct elem
{
  char d[50];
  int v[50];
}; 
```

我试过这个，它编译但不起作用

```
char ch;
elem col[10];
int num,z=0;

//z-nr of lines, num -nr of int values in the line

ifstream myfile("t2.txt");
if (myfile.is_open())
{
    while (myfile.good())
{
      myfile>>col[z].d;
  num=0;
  myfile.get(ch);
  while(ch!='\n')
  {
        myfile>>col[z].v[num];
    myfile.get(ch);
    num++;
      }
  z++;
}
  myfile.close();
} 
```

程序“挂起”（无响应状态）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-27T20:32:24.347

你可以试试这个：

```
string line;
ifstream myfile("t2.txt");

if (myfile.is_open()) {
    while (getline(myfile, line)) {
        istringstream iss(line);

        iss >> col[z].d;

        int x;
        num = 0;
        while (iss >> x) {
            col[z].v[num] = x;
            num++; 
        }

        z++;
    }
} 
```

# vb.net - 关于“写入文件”和用户权限

> ID：13103299
> 
> 赞同：0
> 
> 时间：2012-10-27T19:12:21.653
> 
> 标签：vb.net

我正在开发一个需要将文本文件写入最终用户计算机的 VB.NET (2010) 项目。我在网上读到，由于某些用户的安全设置，最安全的文件写入位置是 Application Data 文件夹。

但我想做的（如果可能的话）是允许用户通过 SaveToFile 对话框选择他们想要写入文件的位置（我正在使用 SaveFileDialog 和 My.Computer.FileSystem.WriteAllText）。

所以我的问题是......如果我使用 SaveFileDialog（而不是在不使用对话框的情况下保存文件），这是否意味着我的文件将始终写入用户选择的任何位置？

或者用户是否有可能选择一个位置（即他们的“桌面”），并且由于他们的安全设置，它不会在那里写入文件？（UAC、防火墙等）。

如果后者是可能的，有什么我可以向用户建议他们可以做的事情，使我的程序能够将文件写入他们选择的任何地方，并且它会 100% 的工作？

可能……如果他们右键单击我的程序的 exe 文件并转到“属性”>“安全性”，并确保允许“写入”权限，那能解决问题吗？或者还有更多的东西吗？

无论他们是否以“管理员”身份登录到他们的计算机，这有什么区别吗？

我已经在网上阅读了很多关于这一切的相互矛盾的东西，所以我只是想更好地理解这一切，以便我知道如何继续。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-27T19:14:22.997

[另存为] 对话框只会让用户选择一个他们有读写权限的文件夹，这是由操作系统为您完成的。所以这是我的最佳选择

# callback - ZMQ 在订阅时通知

> ID：13103303
> 
> 赞同：3
> 
> 时间：2012-10-27T19:13:06.507
> 
> 标签：callback, notifications, publish-subscribe, zeromq

我正在使用 ZMQ PUB 套接字来分发有关不同主题的新闻。但是其中一些消息的计算成本很高。有没有办法让 on_subscribe 回调，所以我可以只计算实际需要什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T19:27:06.673

只是为了记录我找到的解决方案

我可以创建一个 XPUB 套接字并侦听该套接字上的传入消息。订阅将生成一条以 b'\x01' 开头的消息，后跟主题。当客户端取消订阅时，消息将是 b'\x00' 后跟主题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-10T05:20:18.413

XPUB 和 XSUB 套接字的行为记录在[zmq_socket 手册页](http://api.zeromq.org/3-2%3azmq-socket#toc11)中。

指南中还有一个示例，它使用这样的 XPUB 来进行[最后一个值缓存](http://zguide.zeromq.org/page%3aall#Last-Value-Caching)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-02T18:01:45.917

创建 on_subscribe 回调的方式是在发布者和任何连接的订阅者之间建立另一个 req/rep 连接。订阅者会将它想要的消息发送给发布者，让发布者知道它应该为发布准备哪些消息。这样，只有感兴趣的消息将通过 PUB/SUB 连接发布。它是一种“注册”您想要的消息，而不是爆破所有消息。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-28T09:16:02.813

在 zmq 2.x 中，订阅不会发送给发布者。zmq 3.x 有订阅转发，但是发布者站点没有这样的回调。

# c++ - std::numeric_limits ::digits10 = 小数点右侧或左侧的位数？

> ID：13103304
> 
> 赞同：-2
> 
> 时间：2012-10-27T19:13:07.363
> 
> 标签：c++, double

[http://en.wikipedia.org/wiki/Double-precision_floating-point_format](http://en.wikipedia.org/wiki/Double-precision_floating-point_format)说 double 可以处理数字右侧的 16 位精度，digits10 显示这个数字吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-27T19:28:57.017

`std::numeric_limits<T>::digit10`是将具有十进制值的字符串转换为字符串并再次转换回字符串时可以返回的小数位数`T`。计数从最重要的非零数字开始，与小数点所在的位置无关（当然，只要您不与 的范围限制冲突`T`）。也就是说，前导零和尾随零无关紧要。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-27T19:24:09.370

实际上它只是有意义的数字的数量。观点。您可以拥有`12345678901234.5`或`0.0000123456789012345`。

# android - 代码有问题吗？

> ID：13103308
> 
> 赞同：0
> 
> 时间：2012-10-27T19:13:28.067
> 
> 标签：android, dialog, android-edittext

我正在尝试制作一个对话框，基本上要求用户提供歌曲的流派。因此，我有两个按钮和一个 EditText。当我点击“保存”按钮并将其保存到数据库时，我想从 EditText 获取字符串。但问题是 EditText 正在返回和空字符串，这可能是因为我无法将 Edittext 与布局中的那个相关联。代码片段：

```
class AskGenreDialog {
        private String songTitle = "";
        private int id;
        EditText AskGenre;
        View view;
        public void setSongTitle(String songTitle){
            this.songTitle = songTitle;
        }

        public void setId(int id){
            this.id = id;
        }
        public void onCreateDialog(){

            AlertDialog.Builder builder = new AlertDialog.Builder(MusicPlayerActivity.this);
            LayoutInflater inflator = (LayoutInflater)MusicPlayerActivity.this.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
            builder.setView(inflator.inflate(R.layout.ask_genre, null));
            builder.setTitle("Genre Not Found").setMessage(songTitle);
            view = inflator.inflate(R.layout.ask_genre, null);
            AskGenre = (EditText) view.findViewById(R.id.genre);

            builder.setPositiveButton("Save", new OnClickListener(){

                @Override
                public void onClick(DialogInterface arg0, int arg1) {
                    // TODO Auto-generated method stub
                    String genre =AskGenre.getText().toString();
                    handler.setGenreForId(genre,id);
                    Log.d("Ans:", genre);
                }

            });
            builder.setNegativeButton("Don't Know", new OnClickListener(){

                @Override
                public void onClick(DialogInterface dialog, int which) {
                    // TODO Auto-generated method stub

                }

            });

            // create alert dialog
            AlertDialog alertDialog = builder.create();

            // show it
            alertDialog.show();
        }

    } 
```

谁能告诉我这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-27T19:19:15.710

在 view= 行中，您创建了另一个实例，而不是对话框中使用的实例。

改为这样做

```
view = inflator.inflate(R.layout.ask_genre, null);
builder.setView(view); 
```

# c++ - 对库用户隐藏库依赖项

> ID：13103311
> 
> 赞同：4
> 
> 时间：2012-10-27T19:13:37.043
> 
> 标签：c++, dependencies, static-libraries, pimpl-idiom

考虑我正在编写一个静态库。让它有一个类`Foo`

```
// mylib.h
#include <dependency_header_from_other_static_library.h>

class Foo {
    // ...
private:
    type_from_dependent_library x;
} 
```

如您所见，这个库（让我们称之为`mylib`）依赖于另一个库。它编译得很好。但是当用户编译它的代码（使用`Foo`和包含`mylib.h`）并与我的库链接时，编译失败，因为用户还需要有`dependency_header_from_other_static_library.h`头文件来编译代码。

我想对用户隐藏这种依赖关系。如何做到这一点？想到的一件事是`PIMPL`成语。喜欢：

```
// mylib.h
#include <dependency_header_from_other_static_library.h>

class Foo {
    // ...
private:
    class FooImpl;
    boost::shared_ptr<FooImpl> impl_;
}

// mylib_priv.h
class FooImpl {
    // ...
private:
    type_from_dependent_library x;
} 
```

但这需要我`Foo`在`FooImpl`. 而且，`PIMPL`在我的情况下使用它是否有点矫枉过正？

谢谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-27T23:42:16.183

将标头与其他标头分离时，您可以使用以下几种方法：

1.  如果使用的库对如何声明其类型做出承诺，您可以在标头中转发声明所需的类型。当然，这仍然意味着您只能将这些类型称为指针或标头中的函数签名，但这可能已经足够了。例如，如果使用的库承诺有一个`class LibraryType`你需要使用的，你可以这样做：

    ```
    // Foo.h
    class LibraryType;
    class Foo {
        // ...
        LibraryType* data;
    }; 
    ```

    这可能会减少您使用该类型所需的时间，而无需包含其标题，也无需跳过 PImpl 方法。

2.  如果库没有就它如何声明它的类型做出承诺，您可以使用它`void*`来引用相应的类型。当然，这意味着无论何时访问实现中的数据，都需要将`void*`转换为适当的类型。由于类型是静态已知的，因此使用`static_cast<LibraryType*>`非常好，也就是说，没有任何由于强制转换而产生的开销，但这样做仍然相对痛苦。

3.  当然，另一种选择是使用 PImpl 成语。如果你的类型提供了任何合理的服务，它可能会改变接口相当多，它不应该在类本身和私有声明的类型之间复制接口。另外，请注意，私有类型只是一个数据容器，也就是说，将其设置为 a`struct`并且对其访问没有保护是合理的。唯一真正的问题是您需要确保类型的定义在调用析构函数时可见。使用`std::shared_ptr<T>(new T(/*...*))`为此安排。

实际上，所有三种方法都做同样的事情，尽管技术略有不同：它们为您提供了一个不透明的句柄，以便在头文件中使用，其定义只有实现才知道。这样库的客户端就不需要包含相应的头文件了。但是，除非在构建库时解析符号，否则客户端仍然需要访问使用的库。

# iphone - iAd 横幅不起作用

> ID：13103315
> 
> 赞同：0
> 
> 时间：2012-10-27T19:13:57.813
> 
> 标签：iphone, objective-c, xcode, iad, adbannerview

所以我使用教程在屏幕底部创建了一个 iAd 横幅并将其动画化进出窗口，但是该应用程序是基于选项卡的，我不太清楚正确的偏移量，所以你可以告诉我我会很感激，但主要问题是广告横幅并不总是出现，有时它只是一个白框。这是我的代码。在我的 .h

```
@interface section3 <ADBannerViewDelegate>{
    ADBannerView *adView;
    BOOL bannerIsVisible;
}
@property (nonatomic, assign) BOOL bannerIsVisible;
//in the .m     in the view did load

adView  = [[ADBannerView alloc] initWithFrame:CGRectZero];
adView.frame = CGRectOffset(adView.frame, 0.0, 410.0f);
adView.requiredContentSizeIdentifiers = [NSSet setWithObject:ADBannerContentSizeIdentifierPortrait];
adView.currentContentSizeIdentifier = ADBannerContentSizeIdentifierPortrait;
[self.view addSubview:adView];
adView.delegate = self;
self.bannerIsVisible = NO; 
-(void)bannerViewDidLoadAd:(ADBannerView *)banner{

    if (!self.bannerIsVisible) {
        [UIView beginAnimations:@"animateAdBannerOn" context:NULL];
        banner.frame = CGRectOffset(banner.frame, 0.0, -50.0f);
        [UIView commitAnimations];
        self.bannerIsVisible = YES;

    }
}

-(void)bannerView:(ADBannerView *)banner didFailToReceiveAdWithError:(NSError *)error{

    if (self.bannerIsVisible) {
        [UIView beginAnimations:@"animateAdBannerOff" context:NULL];
        banner.frame = CGRectOffset(banner.frame, 0.0, 50.0f);
        [UIView commitAnimations];
        self.bannerIsVisible = NO;

    }

} 
```

我正在使用 Xcode 4.2.1 非常感谢，任何帮助将不胜感激:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-27T21:01:48.817

标签栏的高度为 44 像素，因此您必须添加到“50”44 之一并将 410 设置为 3.5 英寸的全屏尺寸，这意味着默认为 480。那应该是解决方案。

# android - 在保持原始大小写的同时突出显示 ListView 中的搜索词

> ID：13103316
> 
> 赞同：1
> 
> 时间：2012-10-27T19:14:02.160
> 
> 标签：android, regex

我有一个 ListView 和一个 search_term。我想突出显示（通过涂成红色）ListView 中 search_term 的所有实例。这很有效并且很容易。

```
text = text.replaceAll(search_term, "<font color='red'>$1</font>"); 
```

我现在正试图让它在不区分大小写的庄园中工作。我认为以下是正确的，但它不起作用。

```
text = text.replaceAll("(?i)" + search_term, "<font color='red'>$1</font>"); 
```

所以基本上我想将 search_term 的所有实例都涂成红色，我想在匹配时忽略大小写，但在着色时不忽略。

这里有3个例子。search_term 是“apple”，粗体表示红色。

“苹果是红色的” -> “**苹果**是红色的”

“苹果是红色的”->“**苹果**是红色的”

“苹果是红色的”->“**苹果**是红色的”

亲切的问候， Cathal

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-27T19:24:05.533

search_term 应该在圆括号中，就像`()`描述一个`group`..

所以对于苹果来说，你的 search_term 应该是

```
search_term="(apple)"; 
```

这将被捕获`$1`

**或者**

您可以简单地使用`$0`而不使用`()`

**笔记**

`$0`-> 是完全匹配

`$1`->第一`()`组

`$2`->第二`()`组

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-27T19:25:42.847

我认为不适`(?i)`用于`String.replaceAll`. 如果您使用[Pattern](http://developer.android.com/reference/java/util/regex/Pattern.html)和[Matcher](http://developer.android.com/reference/java/util/regex/Matcher.html) ，它应该可以工作。

```
Pattern pattern = Pattern.compile( search_term, Pattern.CASE_INSENSITIVE );
Matcher matcher = pattern.matcher( text );
text = matcher.replaceAll( "\0" ); 
```

我不是 100% 确定我的字符串是`replaceAll`正确的，但这是一般的想法。

# haskell - 在这种情况下如何使用地图

> ID：13103323
> 
> 赞同：0
> 
> 时间：2012-10-27T19:14:36.500
> 
> 标签：haskell

我有创建 Data.Map 的代码：

```
import qualified Data.Map as Map

shift_string :: [Char] -> Int -> [Char]
shift_string s num = (drop num s) ++ (take num s)

ascii :: [Char]
ascii = ['a' .. 'z']

shifted_ascii :: Int -> [Char]
shifted_ascii n = shift_string ascii n

trans_table :: Int -> Map.Map Char Char
trans_table n = Map.fromList(zip ascii $ shifted_ascii n) 
```

'trans_table' 函数返回一个字符映射到另一个映射的映射。我可以创建函数来获取一个 Char 并基于此 Map 返回另一个 Char：

```
translate_char :: Char -> Int -> Maybe Char
translate_char c n = Map.lookup c $ trans_table n 
```

现在我想“翻译”地图中的每个符号。像这样的东西：

```
encode message key = map translate_char message 
```

此代码不起作用，因为 translate_function 必须只有一个参数。我需要像全局变量这样的东西来将地图存储在其中，并在我的地图函数中从中查找值。但我不知道如何重写我的代码。

ps 我想我可以在字符串中的每个字符中添加“键”，但我正在寻找通用解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-27T19:26:23.627

我不知道您的编码功能中的关键是什么，但您可以使用类似的东西

```
translate_char :: Int -> Char -> Maybe Char
translate_char n c = Map.lookup c $ trans_table n

encode :: Int -> String -> String
encode n s = catMaybes $ map (translate_char n) s 
```

这里 n 确定您正在旋转的字符数。我切换了参数的顺序以避免使用`flip`.

# registry - ExcludeFromKnownDlls - 强制重新读取

> ID：13103330
> 
> 赞同：2
> 
> 时间：2012-10-27T19:15:05.930
> 
> 标签：registry

我正在编写一些用于实时取证环境的软件。我想带上我自己的二进制文件在机器上运行，包括我自己的库 (DLL)，因为机器上的那些可能不受信任。重新启动时会读取此值的任何更改，但我不想重新启动机器。关于如何强制会话管理器在不重新启动机器的情况下重新读取它的任何想法？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T01:36:30.230

我没有找到这个问题的答案，但如果你有类似的问题，你可以使用 DLL 重定向。DLL 重定向要求您在应用程序所在的目录中创建一个名为“appname.local”的文件夹。所以对于 myapp.exe，我创建了一个文件夹“myapp.exe.local”。这将强制在使用标准搜索路径之前从应用程序所在的目录加载 DLL。请注意，某些 DLL（例如 ntdll）无法重定向。

# php - Facebook 注册不起作用“（错误：'client_id' 无效。）”

> ID：13103337
> 
> 赞同：1
> 
> 时间：2012-10-27T19:17:02.850
> 
> 标签：php, html, facebook, iframe, registration

我在我的网站上使用 FB 注册 iFrame 代码。我已经关注了[http://developers.facebook.com/docs/plugins/registration/](http://developers.facebook.com/docs/plugins/registration/)上的所有文档，但我不明白为什么会出现这个错误。我唯一能看到的是一个红色框，上面写着`"Unable to load the registration form for . You may have previously blocked this app on Facebook. Go to your Facebook privacy settings to unblock this app. (Error: Invalid 'client_id'.)"`我调查过的关于应用程序被阻止的内容，但事实并非如此。该应用程序未被阻止。我什至尝试使用多个 FB 帐户查看该页面。始终显示此错误。我查看了我的应用程序设置，看看那里是否有任何问题。有人报告说必须禁用“沙盒模式”，否则您会收到此错误，但我的已禁用。一直都是。我尝试一起删除整个应用程序并重新开始。这样做之后，我得到了相同的结果。

值得一提的是，我的应用在应用中心被列为“未列出”。许多人因 FB 无法解释的原因而遇到此问题。

> 应用详细信息页面状态：实时 您的应用详细信息页面现已上线，并将显示在搜索中。
> 
> 应用中心列表状态：未列出您的应用未列出，因为它没有足够高的评分和用户参与度，无法在此时在应用中心列出。请参阅您应用的洞察页面以查看您的应用的用户评分和参与度指标，并查看我们的应用中心指南以了解更多信息。

还有一件事可能值得一提，我目前在网站的根目录上进行了登录和注册设置。我正在尝试在其中放置新的 FB 登录和注册的子目录中构建一个全新的站点。这会以某种方式引起冲突吗？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-27T19:37:49.213

这与您应用的应用中心状态无关。

在嵌入注册表单 iframe 的文档代码中，它看起来像这样：

```
<iframe src="https://www.facebook.com/plugins/registration?<br />
             client_id=113869198637480&<br />
             redirect_uri=https%3A%2F%2Fdevelopers.facebook.com%2Ftools%2Fecho%2F&<br />
             fields=name,birthday,gender,location,email" <br="">
        scrolling="auto"&lt;br />
        frameborder="no"&lt;br />
        style="border:none"&lt;br />
        allowTransparency="true"&lt;br />
        width="100%"&lt;br />
        height="330">&lt;br />
</iframe> 
```

– 当然，使用此代码插件无法正确加载，因为`src`您为 iframe 地址提供的 URL 无效，因此 Facebook 无法获得插件所需的参数。

删除其中的换行符，删除标签`<br>`中没有业务的元素。`<iframe>`（我想您可能用于页面的 CMS 可能会导致这种情况，如果它将您输入的代码解释为必须格式化的文本。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-27T19:30:10.860

看看这个[类似的帖子](https://stackoverflow.com/questions/4845721/facebook-apis-fbregistration-returning-invalid-client-id-when-not-connecte)，它可能会对你有所帮助。您可能想尝试`Remove the #appId={YOUR_APP_ID}&xfbml=1`使用外部脚本标签的解决方案。希望能帮助到你。顺便说一句，这也是一个[报告的错误](http://developers.facebook.com/bugs/257493511023158?browse=search_5087a30b0b0045258312491)

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-11-06T11:14:51.897

你应该创建一个 facebook 应用程序

获取app ID并替换为注册页面中的Client_id

> client_id=YOUR_APP_ID&
> redirect_uri=https%3A%2F%2Fdevelopers.facebook.com%2Ftools%2Fecho%2F& fields=name,birthday,gender,location,email" scrolling="auto"<br /> frameborder="no"<br /> style="border:none"<br /> allowTransparency="true"<br /> width="100%"<br /> height="330"><br />

# ruby - MacRuby中的FSEvents：执行错误的回调

> ID：13103341
> 
> 赞同：4
> 
> 时间：2012-10-27T19:17:25.007
> 
> 标签：ruby, macos, macruby, fsevents

我正在 MacRuby 中开发 GUI 应用程序，我需要使用 FSEvents。我正在为不同的目录注册几个流。这些目录中的任何一个更改都会导致运行回调，但有一个大问题：无论哪个目录更改，都会执行最后一次注册的回调。

下面是独立的测试脚本：

```
framework 'Cocoa'
framework 'CoreServices'

class Monitor
  def initialize(dir)
    @dir = dir
  end

  def start(&block)
    callback = Proc.new do |stream, context, count, paths, flags, ids|
      p @dir
      block.call
    end

    flags = KFSEventStreamCreateFlagUseCFTypes

    @stream = FSEventStreamCreate(KCFAllocatorDefault, callback, nil, [@dir], KFSEventStreamEventIdSinceNow, 0.0, flags)
    FSEventStreamScheduleWithRunLoop(@stream, CFRunLoopGetCurrent(), KCFRunLoopDefaultMode)
    FSEventStreamStart(@stream)
  end
end

Monitor.new(Dir.pwd + "/dir1").start { p "dir1" }
Monitor.new(Dir.pwd + "/dir2").start { p "dir2" }
Monitor.new(Dir.pwd + "/dir3").start { p "dir3" }

app = NSApplication.sharedApplication
app.run 
```

当我运行它并开始修改这些目录时：

```
~/tmp/fsevents $ touch dir1/test
~/tmp/fsevents $ touch dir2/test
~/tmp/fsevents $ touch dir3/test 
```

输出是：

```
"/Users/janek/tmp/fsevents/dir3"
"dir3"
"/Users/janek/tmp/fsevents/dir3"
"dir3"
"/Users/janek/tmp/fsevents/dir3"
"dir3" 
```

我更希望的是：

```
"/Users/janek/tmp/fsevents/dir1"
"dir1"
"/Users/janek/tmp/fsevents/dir2"
"dir2"
"/Users/janek/tmp/fsevents/dir3"
"dir3" 
```

也许我可以通过上下文参数提供我需要的数据来解决这个问题（因为检查`paths`回调内部会显示实际更改的目录），但是，当前的行为对我来说是完全出乎意料的。

我正在使用 OS X 10.8.2 (12C60) 和 MacRuby 0.12 (ruby 1.9.2) [universal-darwin10.0, x86_64]。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-18T12:46:34.227

是的，这真的很奇怪。我也有这种行为。似乎总是调用最新注册的回调。但从好的方面来说，可以从回调的第四个参数获取到实际调用的目录的路径。我不得不使用这样的构造。

我不是一个 ruby​​ist，但这段代码对我有用。

```
framework 'Cocoa'
framework 'CoreServices'

class Monitor
  @@registry = {}
  def self.register(dir, other_data)
    @@registry[dir] = other_data
  end

  def initialize(dir, other_data)
      @dir = dir

      self.class.register(dir, other_data)
      callback = Proc.new do |stream, context, count, paths, flags, ids|
          paths.cast!('*')

          p "the callback that triggered has closure variable @dir=#{@dir}"
          p "but the actual callback said the dir was #{paths[0]}"
          p "the metadata that I stored associated with that directory is #{@@registry[paths[0]]}"
      end

      @stream = FSEventStreamCreate(KCFAllocatorDefault, callback, nil, [@dir], KFSEventStreamEventIdSinceNow, 0.0, 0)
      FSEventStreamScheduleWithRunLoop(@stream, CFRunLoopGetCurrent(), KCFRunLoopDefaultMode)
      FSEventStreamStart(@stream)
  end
end

Monitor.new(Dir.pwd + "/dir1/", 'dir1 data')
Monitor.new(Dir.pwd + "/dir2/", 'dir2 data')
Monitor.new(Dir.pwd + "/dir3/", 'dir3 data')

app = NSApplication.sharedApplication
app.run 
```

这是我看到的输出：

```
rmcgibbo@Roberts-MacBook-Pro-2 ~/local/fsync
$ macruby fsevents.rb &
[1] 14638

rmcgibbo@Roberts-MacBook-Pro-2 ~/local/fsync
$ touch dir1/mao

rmcgibbo@Roberts-MacBook-Pro-2 ~/local/fsync
$ "the callback that triggered has closure variable @dir=/Users/rmcgibbo/local/fsync/dir3/"
"but the actual callback said the dir was /Users/rmcgibbo/local/fsync/dir1/"
"the metadata that I stored associated with that directory is dir1 data" 
```

# objective-c - Objective C 中的 if 语句

> ID：13103348
> 
> 赞同：0
> 
> 时间：2012-10-27T19:17:58.160
> 
> 标签：objective-c, if-statement, boolean, self

我确定这非常简单，但我刚开始使用 Objective C，我正在尝试将响应与对象的答案进行比较，以查看响应是否正确，但我不断收到编译器错误。我对“自我”以及如何获得存储在问题对象中的答案有点困惑。谢谢。

```
- (BOOL) verifyAnswer:(Answer *)response
{
    if (response isEqual:[self.answer])
       return YES;
    else
       return NO;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-27T19:19:36.583

你会得到一个错误，因为那不是有效的 Objective-C 语法。在 Obj-C 中，使用方括号语法调用方法，如下所示：

```
[object method]; 
```

或带参数：

```
[object methodWithArgument:arg1 otherArgument:arg2]; 
```

在您的情况下，您正在尝试调用类的方法`isEqual:`（`NSObject`大多数 Cocoa 类的根类）。您可以在任何对象上调用此方法并将其作为参数传递给其他对象以进行比较。所以正确的语法是这样的：

```
if ([response isEqual:self.answer]) 
```

**请仔细阅读[Objective-C 编程语言](http://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/ObjectiveC/Introduction/introObjectiveC.html)。**

# sql-server - 如何使用新生成的数据库添加新的代码优先迁移？

> ID：13103349
> 
> 赞同：2
> 
> 时间：2012-10-27T19:17:58.423
> 
> 标签：sql-server, entity-framework, ef-code-first, data-migration, entity-framework-migrations

我已经在我的实体框架项目上启用了代码优先迁移，并添加了几个迁移来执行重命名表等操作。但是，我现在已经删除了数据库并导致实体框架根据我最新的数据模型生成一个全新的数据库。如果我尝试运行：

```
PM> Add-Migration TestMigration 
```

...它告诉我我需要先应用现有的迁移。所以我跑：

```
PM> Update-Database 
```

...但问题是它正在尝试更新不需要更新的数据库；它已经基于最新的数据模型。因此，当它尝试重命名现在不存在的表时出现错误。

有什么方法可以向数据迁移表明我的数据库是最新的并且不需要在其上运行任何迁移？我该怎么办？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-28T10:59:59.507

我找到了一种方法来表明我的数据库是最新的，并且它（不出所料）基于修改`__MigrationHistory`表，代码优先迁移用于确定在运行时将哪些迁移应用于数据库`Update-Database`。

顺便说一句，在研究这个答案时，我发现了一个非常好的代码优先迁移命令参考，可以在以下位置找到：[http ://dotnet.dzone.com/articles/ef-migrations-command](http://dotnet.dzone.com/articles/ef-migrations-command)

当 EF 自动从头开始创建数据库时，它将始终将单个条目放入`__MigrationHistory`表中，并且该条目将具有 MigrationId `(currentDateTime)_InitialCreate`。这表示 EF 刚刚执行的数据库的初始创建。但是，您的迁移历史不会以该 MigrationId 开始，因为您将从其他内容开始。

要“愚弄”代码优先迁移以为您正在进行最新迁移，您需要从新创建的数据库`(currentDateTime)_InitialCreate`的表中删除该条目`__MigrationHistory`，并插入如果您仍然拥有旧数据库的内容已经应用了迁移。

因此，首先从新生成的数据库`__MigrationHistory`表中删除所有内容。然后，进入包管理器控制台并运行：

```
PM> Update-Database -Script 
```

从生成的 SQL 脚本中，拉出所有以以下开头的行：

```
INSERT INTO [__MigrationHistory]... 
```

然后，`INSERT`在新创建的数据库的上下文中运行这些语句。检查这些行中的每一行现在是否存在于您的`__MigrationHistory`表中。下次运行时：

```
PM> Update-Database 
```

...您应该会收到一条消息“没有待处理的基于代码的迁移”。恭喜 - 您已经欺骗了代码优先迁移，认为您现在正在进行最新迁移，您可以从此处继续添加新迁移。

我确实认为应该有一些自动化的方式来做这个内置到 EF 代码优先，虽然......也许他们应该添加类似的东西：

```
PM> Update-Database -MigrationsTableOnly 
```

...它会破坏迁移表中的现有条目，并将新条目插入到项目中定义的每个迁移的迁移历史记录中，而不是实际尝试运行迁移。呃，好吧。

**更新**
我找到了一种很好的自动化方法，使用自定义初始化程序的 Seed 方法。基本上 Seed 方法会在创建数据库时删除现有的迁移历史数据，并插入您的迁移历史。在我的数据库上下文构造函数中，我像这样注册自定义初始化程序：

```
public class MyDatabaseContext : DbContext {
    public MyDatabaseContext() : base() {
        Database.SetInitializer(new MyDatabaseContextMigrationHistoryInitializer());
    } 
```

自定义初始化程序本身如下所示：

```
/// <summary>
/// This initializer clears the __MigrationHistory table contents created by EF code-first when it first
/// generates the database, and inserts all the migration history entries for migrations that have been
/// created in this project, indicating to EF code-first data migrations that the database is
/// "up-to-date" and that no migrations need to be run when "Update-Database" is run, because we're
/// already at the latest schema by virtue of the fact that the database has just been created from
/// scratch using the latest schema.
/// 
/// The Seed method needs to be updated each time a new migration is added with "Add-Migration".  In
/// the package manager console, run "Update-Database -Script", and in the SQL script which is generated,
/// find the INSERT statement that inserts the row for that new migration into the __MigrationHistory
/// table.  Add that INSERT statement as a new "ExecuteSqlCommand" to the end of the Seed method.
/// </summary>
public class MyDatabaseContextMigrationHistoryInitializer : CreateDatabaseIfNotExists<MyDatabaseContext> {
    /// <summary>
    /// Sets up this context's migration history with the entries for all migrations that have been created in this project.
    /// </summary>
    /// <param name="context">The context of the database in which the seed code is to be executed.</param>
    protected override void Seed(MyDatabaseContext context) {
        // Delete existing content from migration history table, and insert our project's migrations
        context.Database.ExecuteSqlCommand("DELETE FROM __MigrationHistory");
        context.Database.ExecuteSqlCommand("INSERT INTO __MigrationHistory (MigrationId, Model, ProductVersion) VALUES ('201210091606260_InitialCreate', 0x1F8B0800000000000400ECBD07601C499625262F6DCA7B7F4AF54AD7E074A..., '5.0.0.net40')");
        context.Database.ExecuteSqlCommand("INSERT INTO __MigrationHistory (MigrationId, Model, ProductVersion) VALUES ('201210102218467_MakeConceptUserIdNullable', 0x1F8B0800000000000400ECBD07601C499625262F6DCA7B7F4..., '5.0.0.net40')");
        context.Database.ExecuteSqlCommand("INSERT INTO __MigrationHistory (MigrationId, Model, ProductVersion) VALUES ('201210231418163_ChangeDateTimesToDateTimeOffsets', 0x1F8B0800000000000400ECBD07601C499625262F6D..., '5.0.0.net40')");
        context.Database.ExecuteSqlCommand("INSERT INTO __MigrationHistory (MigrationId, Model, ProductVersion) VALUES ('201210251833252_AddConfigSettings', 0x1F8B0800000000000400ECBD07601C499625262F6DCA7B7F4AF54AD7E..., '5.0.0.net40')");
        context.Database.ExecuteSqlCommand("INSERT INTO __MigrationHistory (MigrationId, Model, ProductVersion) VALUES ('201210260822485_RenamingOfSomeEntities', 0x1F8B0800000000000400ECBD07601C499625262F6DCA7B7F4AF5..., '5.0.0.net40')");
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-28T09:29:36.367

转到`MigrationHistory`sql server 中的表（在`system`文件夹下），它有你的迁移行和 db 哈希，其中必须与迁移文件中的一个相同，只需将其从 db 复制到文件。

换句话说，您需要将`MigrationHistory`表与实际迁移同步。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-24T11:25:14.493

此实现不需要手动维护要插入的记录`__MigrationHistory`。迁移是根据指定的程序集确定的。

也许这有帮助。

我感谢@Jez 的初步想法。

```
/// <summary>
/// An implementation of IDatabaseInitializer that will:
/// 1\. recreate database only if the database does not exist 
/// 2\. actualize __MigrationHistory to match current model state (i.e. latest migration)
/// </summary>
/// <typeparam name="TContext">The type of the context.</typeparam>
public class CreateDatabaseIfNotExistsAndMigrateToLatest<TContext> : CreateDatabaseIfNotExists<TContext>
    where TContext : DbContext
{
    private readonly Assembly migrationsAssembly;

    /// <summary>
    /// Gets the migration metadata for types retrieved from <paramref name="assembly"/>. Types must implement <see cref="IMigrationMetadata"/>.
    /// </summary>
    /// <param name="assembly">The assembly.</param>
    /// <returns></returns>
    private static IEnumerable<IMigrationMetadata> GetMigrationMetadata(Assembly assembly)
    {
        var types = assembly.GetTypes().Where(t => typeof(IMigrationMetadata).IsAssignableFrom(t));
        var migrationMetadata = new List<IMigrationMetadata>();
        foreach (var type in types)
        {
            migrationMetadata.Add(
                (IMigrationMetadata)Activator.CreateInstance(type));
        }

        return migrationMetadata.OrderBy(m => m.Id);
    }

    /// <summary>
    /// Gets the provider manifest token.
    /// </summary>
    /// <param name="db">The db.</param>
    /// <returns></returns>
    private static string GetProviderManifestToken(TContext db)
    {
        var connection = db.Database.Connection;
        var token = DbProviderServices.GetProviderServices(connection).GetProviderManifestToken(connection);

        return token;
    }

    /// <summary>
    /// Gets the migration SQL generator. Currently it is <see cref="SqlServerMigrationSqlGenerator"/>.
    /// </summary>
    /// <returns></returns>
    private static MigrationSqlGenerator GetMigrationSqlGenerator()
    {
        return new SqlServerMigrationSqlGenerator();
    }

    /// <summary>
    /// Creates the operation for inserting into migration history. Operation is created for one <paramref name="migrationMetadatum"/>.
    /// </summary>
    /// <param name="migrationMetadatum">The migration metadatum.</param>
    /// <returns></returns>
    private static InsertHistoryOperation CreateInsertHistoryOperation(IMigrationMetadata migrationMetadatum)
    {
        var model = Convert.FromBase64String(migrationMetadatum.Target);

        var op = new InsertHistoryOperation(
            "__MigrationHistory",
            migrationMetadatum.Id,
            model,
            null);

        return op;
    }

    /// <summary>
    /// Generates the SQL statements for inserting migration into history table.
    /// </summary>
    /// <param name="generator">The generator.</param>
    /// <param name="op">The operation.</param>
    /// <param name="token">The token.</param>
    /// <returns></returns>
    private static IEnumerable<MigrationStatement> GenerateInsertHistoryStatements(
        MigrationSqlGenerator generator,
        InsertHistoryOperation op,
        string token)
    {
        return generator.Generate(new[] { op }, token);
    }

    /// <summary>
    /// Runs the SQL statements on database specified by <paramref name="db"/> (<see cref="DbContext.Database"/>).
    /// </summary>
    /// <param name="statements">The statements.</param>
    /// <param name="db">The db.</param>
    private static void RunSqlStatements(IEnumerable<MigrationStatement> statements, TContext db)
    {
        foreach (var statement in statements)
        {
            db.Database.ExecuteSqlCommand(statement.Sql);
        }
    }

    /// <summary>
    /// Initializes a new instance of the <see cref="CreateDatabaseIfNotExistsAndMigrateToLatest{TContext}"/> class.
    /// </summary>
    /// <param name="migrationsAssembly">The migrations assembly.</param>
    public CreateDatabaseIfNotExistsAndMigrateToLatest(Assembly migrationsAssembly)
    {
        this.migrationsAssembly = migrationsAssembly;
    }

    protected override void Seed(TContext context)
    {
        base.Seed(context);

        // Get migration metadata for migrationAssembly
        var migrationMetadata = GetMigrationMetadata(migrationsAssembly);

        // Crate DbContext
        var db = Activator.CreateInstance<TContext>();
        // Remove newly created record in __MigrationHistory
        db.Database.ExecuteSqlCommand("DELETE FROM __MigrationHistory");

        // Get provider manifest token
        var token = GetProviderManifestToken(db);
        // Get sql generator
        var generator = GetMigrationSqlGenerator();

        foreach (var migrationMetadatum in migrationMetadata)
        {
            // Create history operation
            var op = CreateInsertHistoryOperation(migrationMetadatum);
            // Generate history insert statements
            var statements = GenerateInsertHistoryStatements(generator, op, token);
            // Run statements (SQL) over database (db)
            RunSqlStatements(statements, db);
        }
    }
} 
```

# java - 在不同的服务器上运行 Web 应用程序和核心逻辑

> ID：13103350
> 
> 赞同：0
> 
> 时间：2012-10-27T19:18:07.113
> 
> 标签：java, networking

我有一个 Web 应用程序，它由一个 jar 组成，它是我的 Web 应用程序的业务逻辑，现在我想问我是否有可能在一台服务器机器上运行我的 Web 应用程序，而我的 jar 在另一台服务器上运行，我的应用程序连接到我的 jar使用一些网络协议。因此，如果我必须更改我的业务逻辑，我不必重新启动我的应用程序。我在 jar 中只调用了一个函数，它将一个参数作为一个对象，它向我输出一个对象，即我只有一个与 jar 的接触点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-27T19:29:49.807

您可以通过像 Spring Remoting 之类的技术（比 EJB/RMI 更好的选择）公开您的服务，但是有一个非常重要的区别，这通常意味着重大的返工：您当前拥有它的方式，所有引用类型的参数都被传递引用。一旦你去远程，从每个参数可访问的**整个对象图都将被序列化。**这是破坏透明分布物体梦想的关键时刻。

# sql-server - 如何在 SQL Server 2008 R2 中创建可为空的记录？

> ID：13103353
> 
> 赞同：1
> 
> 时间：2012-10-27T19:18:31.617
> 
> 标签：sql-server, sql-server-2008-r2, sql-function

`Inline table function`我在 SQL Server 2008 R2 中创建了一个，我意识到一些查询返回任何记录。所以我想当这种情况发生时，返回一个包含所有空列的记录。

举例：

```
Col1   Col2   Col3
NULL   NULL   NULL 
```

更新：这是功能

```
ALTER FUNCTION [dbo].[GetWorksheetSummaryByObjective](@objectiveId [smallint], @testTemplateId [smallint])
RETURNS @resultTable TABLE (
    [AnsweredWorksheetId] [smallint] NOT NULL,
    [LastDate] [date] NULL,
    [BestScore] [smallint] NULL,
    [ShouldBeMakeUp] [tinyint] NOT NULL
)
AS 
BEGIN

    INSERT @resultTable
    SELECT TOP 1 B.Id AS AnsweredWorksheetId, A.Date, CONVERT(smallint, B.Score * 100),
        CASE
        WHEN B.Score >= 0.7 THEN 0
        ELSE 1
        END AS ShouldBeMakeUp
    FROM AnsweredTest AS A
    RIGHT JOIN AnsweredWorksheet AS B ON (A.Id = B.AnsweredTestId)
    WHERE B.ObjectiveId = @objectiveId AND A.ExamTemplateId = @testTemplateId
    ORDER BY B.Score DESC

    RETURN
END 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-27T19:59:04.093

您发布的功能**不是**内联 TVF。

鉴于基础查询最多返回 1 行，因为`TOP 1`没有`SELECT MAX()`a`GROUP BY`或`HAVING`总是返回单行，您可以将其作为内联 TVF 执行，但如下所示。

```
CREATE FUNCTION [dbo].[Getworksheetsummarybyobjective](@objectiveId    [SMALLINT],
                                                       @testTemplateId [SMALLINT])
RETURNS TABLE
AS
    RETURN
      (SELECT Max(AnsweredWorksheetId) AS AnsweredWorksheetId,
              Max([LastDate])          AS [LastDate],
              Max([BestScore])         AS [BestScore],
              Max(ShouldBeMakeUp)      AS ShouldBeMakeUp
       FROM   (SELECT TOP 1 B.Id                             AS AnsweredWorksheetId,
                            A.Date                           AS [LastDate],
                            CONVERT(SMALLINT, B.Score * 100) AS [BestScore],
                            CASE
                              WHEN B.Score >= 0.7 THEN 0
                              ELSE 1
                            END                              AS ShouldBeMakeUp
               FROM   AnsweredTest AS A
                      RIGHT JOIN AnsweredWorksheet AS B
                        ON ( A.Id = B.AnsweredTestId )
               WHERE  B.ObjectiveId = @objectiveId
                      AND A.ExamTemplateId = @testTemplateId
               ORDER  BY B.Score DESC) T) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-27T19:21:44.320

像这样的东西会起作用吗？

```
declare @tbl table
(
  Col1 int, Col2 int, Col3 int
)

insert @tbl (Col1, Col2, Col3)
     select Col1, Col2, Col3 from SomeTable where blah = blah

if exists (select 1 from @tbl)
begin
    select Col1, Col2, Col3 from @tbl
end
else
begin
    select null Col1, null Col2, null Col3
end 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-27T19:50:55.727

好的，跳过我的其他答案 - 没有意识到表函数有多么严格。我有另一个想法 - 这个应该可以工作，但这意味着必须在函数中运行 WHERE 两次，因此将资源加倍来进行调用：

```
CREATE FUNCTION dbo.SomeTest
    ( @i int ) 
RETURNS TABLE
as
RETURN 
    select Col1, Col2 from SomeTable
    where Whatever = Whatever

    union all

    select null Col1, null Col2
    where not exists (select 1 from SomeTable where Whatever = Whatever)
go 
```

编辑：想到另一种方法来做到这一点，而无需双重浸渍：

```
create function dbo.SomeTest
    ( @i int )
returns table
as
return
select t.Col1, t.Col2 from 
(
    select Col1, Col2
    from SomeTable
    where Whatever = Whatever
) t
right join
(
    select 1 testcol
) x on c.Col1 is not null
go 
```

这假定 Col1 是一个非空列。

# php - 将php包含在一个文件中

> ID：13103354
> 
> 赞同：0
> 
> 时间：2012-10-27T19:18:37.083
> 
> 标签：php, include

我的问题是关于 php 函数`include();`

是否可以包含一个主要的 php 文件来存储所有变量、函数、查询等。并且可以在 html 中，为所需的函数和变量在 php 中添加标签和标签？

我觉得这会让我的 html 看起来仍然很漂亮，但我不确定它的效率。

配置文件

```
<?php
$username = 'foo';
function getPoints(){};
mysqli_query(,); 
```

所以基本上 index.php 将是

```
<?php include('config.php') ?>
<hmtl>
<head></head>
<div id="ui"><? echo $variable?></div>
<body></body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-27T19:20:24.430

我不确定我是否正确理解了您要实现的目标，但是由于应用程序看起来很简单（并且您不需要复杂的解决方案），因此将实际业务逻辑与演示文稿（HTML 代码）分开是完全可以的。

所以实际上你可能有两个这样的文件：

*   `index.php`（您的“HTML”），
*   `library.php`（您的业务逻辑），

在这种情况下，它应该非常有效。当然，除非您会破坏某些东西，但这与结构本身无关；）

PHP 的本质允许它嵌入到 HTML 中，但不要过度。使您的逻辑尽可能与表示分离 - 最好在 中定义每个函数/类/变量`library.php`，并且仅在显示时使用结果`index.php`。

同样保持这种结构，将代码放在一个地方可以避免自动加载（查找文件，确定在哪里找到特定类等）可能引入的过载。有些人甚至通过将所有代码放在一个地方（“编译”）来优化他们的代码。

在学习过程的后期，您可能需要学习一些框架，这将采用不同的方法。但是您可能不需要立即使用它；）

# asp.net - 我可以将母版页 div 标签包裹在我的 asp.net 网站页面中的现有 div 标签周围吗？

> ID：13103357
> 
> 赞同：1
> 
> 时间：2012-10-27T19:18:55.990
> 
> 标签：asp.net, html

我正在将所有 schema.org 微数据合并到我的网站中。我的网站有 47 页，但是，有 5 个母版页。

我的 .resx 资源文件（10 种不同的语言）中的大部分代码已经包含 div 标签。但是，例如，我可以采取懒惰的方式，在母版页的顶部放置一个开始的 div 标记，在母版页的底部放置一个结束的 div 标记吗？

例如，这是微数据的正常语法：

```
<div itemscope itemtype="http://schema.org/Person">
<span itemprop="name">Jason Weber</span> has a background in economics, and brings his 
experience to <span itemprop="company">USS Vision</span>.
</div> 
```

但是我的页面中已经有很多 div 标签。那么我可以直接转到母版页，然后在母版页的顶部输入：

```
<div itemscope itemtype="http://schema.org/company"> (top of master page)
--------- below is the individual page ---------
This is where each page will differ.  There is much text in here, as well as pictures, 
and other things.  Much of this already has div tags in it.  So if I don't want to 
print something, I already <div class="noprint"><span class="tablestyle3">have div 
classes in there</span></div>.
--------- above is the individual page ---------
</div> (bottom of master page) 
```

这是我在想一个懒惰的、简单的出路，但这不就是 asp.net 和母版页的用途吗？所以如果你能按照我的想法，这样合适吗？ **我可以用母版页 div 标签包围 div 标签**吗？还是我真的需要深入研究所有 47 个页面并在每个页面中放置单独的 div 标签？即使到了那个地步，我还是会这样做；我在 schema.org 微数据上出售。感谢您提供任何指导！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-27T19:21:51.833

> 但是，例如，我可以采取懒惰的方式，在母版页的顶部放置一个开始的 div 标记，在母版页的底部放置一个结束的 div 标记吗？

你绝对可以做到这一点。唯一真正要关心的是，一旦页面被渲染，标记是否有效（或至少有效到足以适合您）。

即只要您呈现的 HTML 没有损坏，那么您组织母版页的方式就不是什么大问题了。

# entity-framework - 如何在实体框架中编写动态 where 'like' 查询？

> ID：13103358
> 
> 赞同：1
> 
> 时间：2012-10-27T19:19:09.060
> 
> 标签：entity-framework, entity-framework-4, linq-to-entities

这是我的代码：

```
//order my baselist is context.Entity 
public static GridData Getdata<T>(ObjectSet<T> baseList,
    int currentPage,
    int rowsPerPage,
    string sortcolumn,
    string sortord,
    string searchQuery,
    string searchColumns)where T: class{
var query = baseList.OrderBy("it." + sortcolumn + " " + sortord);
        string strPredicate = string.Empty;
        if (!string.IsNullOrEmpty(searchColumns))
        {
            strPredicate = "it." + searchColumns + " LIKE   @" + searchColumns + "  ";

            query = baseList.Where(strPredicate, new ObjectParameter(searchColumns, searchQuery)).OrderBy("it." + sortcolumn + " " + sortord);
        }
} 
```

我的问题是我试图在实体框架中写下或形成类似的查询，但似乎它不支持它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-27T19:55:13.753

您可以使用[.Contains](https://stackoverflow.com/a/1033024/337294)，它是`LIKE`实体框架中等效的运算符。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-29T05:51:05.653

你可以用这个

```
 query = baseList.Where(baseli=>baseli.Contains(searchColumns )).OrderBy("it." + sortcolumn + " " + sortord); 
```

:)

# c# - 如何在 C# .NET 中编写程序，在 Linux/Wine/Mono 上运行它们？

> ID：13103360
> 
> 赞同：22
> 
> 时间：2012-10-27T19:19:19.470
> 
> 标签：c#, .net, linux, mono, wine

**在这种特殊情况下，我需要为 Linux 运行 .complicated NET 应用程序。**复杂我的意思是——那个项目已经开发了 3 年，我不想用 java 或其他东西再次编写它，并在以后开发和支持 .NET 和 Java 版本。

应用程序正在生成鼠标和键盘事件（通过 winapi/dll 导入）并使用串行端口。我也有很少的延迟计时器 - 用于串行端口通信（10-20ms，我在这里不需要很大的精度）。

剩下的只是很多简单的代码，没什么特别的，没有奇怪的控件，没有 Directx 等。

我应该期待什么？这行得通吗？

如果代码的某些部分会失败 - 我可以稍微改变它，在 .net 应用程序和 linux 上的迷你应用程序之间建立网络连接，我可以编写用于发送鼠标和键盘事件或 RS232 通信。

**另外我想问一下 Wine 和 .NET 的一般情况：**

如何编写应该在 Linux/Wine/Mono 上运行的 .NET 应用程序？

*   哪个版本的框架？（1.x、2.0 还是我可以使用 3.5？）
*   我应该避免什么（从 Windows dll 导入？计时器？）

**编辑/从评论中移动：**

几年前我看过单声道，但很糟糕。现在我看到它长大了，支持 LINQ、Threading 和其他复杂的功能。另外现在帮助看起来真的很严重。我还没有接受答案，因为我看到人们仍然发布非常有用的链接。如果这个问题得到很多+1，我会重写它，也许这会对其他人有所帮助。

我希望这里有人在这里有一些使用 .NET 在 linux 上的实践经验......

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-10-27T19:25:13.737

您是否在[http://www.mono-project.com](http://www.mono-project.com)上阅读过有关 Mono.NET 的信息？

它允许您为 Linux 编写 .NET 应用程序，与 Microsoft 实现略有不同。我不认为wine 可以处理任何.NET 组件。

只需阅读之前的文档，您就可以尝试了。

PS：这也为您提供了单声道和 .NET 之间的兼容性列表。[http://www.mono-project.com/Compatibility](http://www.mono-project.com/Compatibility)和[MoMA（mono 迁移分析器）](http://www.mono-project.com/MoMA)是一个工具，可以扫描任何已经创建的 .NET 应用程序，看看它是否兼容部署在 linux 上。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-10-28T03:43:30.200

在这篇文章中，我缩短并结合了我在这个线程中从其他人那里学到的所有信息。

1.  .NET for Linux 的开源实现称为**Mono**。

2.  兼容性有据可查（请参阅下面的链接）。Mono 支持 LINQ、线程和其他一些复杂的特性。

3.  它甚至支持 InteropServices。例如，可以在 linux 库（！）上使用**DllImport**`libc.so`。

4.  Mono 可以支持**Android 和 iOS**（它们是基于 Linux 的，对吧？）

5.  有一个**用于 Mono 兼容性分析的工具，**称为 MoMA（Mono Migration Analyzer）

> Mono Migration Analyzer (MoMA) 工具可帮助您识别在将 .Net 应用程序移植到 Mono 时可能遇到的问题。它有助于查明特定于平台的调用 (P/Invoke) 和 Mono 项目尚不支持的区域。

**有用的链接：**

[单声道 - 主页](http://www.mono-project.com/Main_Page)

[带有文档的单页](http://www.mono-project.com/Start)

[Mono - 兼容性页面](http://www.mono-project.com/Compatibility)

[MoMA - Mono 迁移分析页面](http://www.mono-project.com/MoMA)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-04-21T14:48:29.327

我们有几个使用 Mono 在 Windows 或 Linux 上运行的 .net 应用程序。

如果需要，可以在 VisualStudio 中进行开发，无需使用 Mono 开发环境。为了在 Linux 上运行 .net 应用程序，只需要运行时单声道库。

我们使用 net 2.0 目标在 VisualStudio 中编译这些应用程序，因为 mono 与 .net 2.0 几乎 100% 兼容。Mono 还实现了后来 .net 版本的 APIS，但不是全部，也不是那么完整。如果您使用 2.0 之后的新版本功能，您应该检查这些功能是否受支持或使用 Mono 兼容性分析工具。您也可以使用 Mono 开发而不是 Visual Studio，我的前任就是这样做的；结果几乎相同，我更喜欢使用 Visual Studio。

我们没有发现什么大问题，而且应用程序相对复杂，多线程，异步 I/O，WinForms，套接字，串口等。

一些应用程序使用了 MS .net 中不可用的 .net 库，但所有这些都可以安装在 Windows 上，因此在 Windows 中运行这些应用程序没有问题。

希望有帮助，

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2017-10-05T16:00:21.477

您可以使用 .NET Core 在 linux 上开发 C# 应用程序：[https ://www.microsoft.com/net/core](https://www.microsoft.com/net/core)

安装后，在终端中键入`dotnet new`以获取可以生成的应用程序模板列表供您启动。

从今天的 .NET Core 2.0 开始，列表如下：

```
Templates                                         Short Name       Language          Tags               
--------------------------------------------------------------------------------------------------------
Console Application                               console          [C#], F#, VB      Common/Console     
Class library                                     classlib         [C#], F#, VB      Common/Library     
Unit Test Project                                 mstest           [C#], F#, VB      Test/MSTest        
xUnit Test Project                                xunit            [C#], F#, VB      Test/xUnit         
ASP.NET Core Empty                                web              [C#], F#          Web/Empty          
ASP.NET Core Web App (Model-View-Controller)      mvc              [C#], F#          Web/MVC            
ASP.NET Core Web App                              razor            [C#]              Web/MVC/Razor Pages
ASP.NET Core with Angular                         angular          [C#]              Web/MVC/SPA        
ASP.NET Core with React.js                        react            [C#]              Web/MVC/SPA        
ASP.NET Core with React.js and Redux              reactredux       [C#]              Web/MVC/SPA        
ASP.NET Core Web API                              webapi           [C#], F#          Web/WebAPI         
global.json file                                  globaljson                         Config             
Nuget Config                                      nugetconfig                        Config             
Web Config                                        webconfig                          Config             
Solution File                                     sln                                Solution           
Razor Page                                        page                               Web/ASP.NET        
MVC ViewImports                                   viewimports                        Web/ASP.NET        
MVC ViewStart                                     viewstart                          Web/ASP.NET 
```

当前最新版本为 2.0。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-06-15T16:45:09.583

您可以使用 winetricks 在 wine 中安装完整的 .Net Framework 4.x，然后运行您的应用程序。

Wine 支持串口，所以我看不出有什么不便。

我制作了一个视频来展示这一点：

[https://www.youtube.com/watch?v=60yyWBLXv1k](https://www.youtube.com/watch?v=60yyWBLXv1k)

在视频中，您可以看到 windows 任务栏。别担心。这是因为它在 WSL2 中运行。但这些步骤在 Linux 中完美运行。

问候

# templates - 需要帮助设置编辑模板

> ID：13103361
> 
> 赞同：1
> 
> 时间：2012-10-27T19:19:24.797
> 
> 标签：templates, mediawiki, editing

我刚刚开始在一个 wiki 上工作，我希望注册用户能够在其中发布内容。我想在网站上有一个链接，上面写着“ `Create new Entry`”的内容，点击后会将用户带到编辑模板。当用户完成填写他的信息并单击保存按钮时，我希望将该信息保存在自己的页面中。我的问题：实现这样的目标的方法是什么？

```
tag:MediaWiki   1.19.2
PHP 5.3.14 (apache2handler)
MySQL   5.1.63-0+squeeze1-log 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-27T19:56:42.520

有很多[用于编辑页面的 URL 参数](http://www.mediawiki.org/wiki/Manual%3aParameters_to_index.php#Edit_and_submit)可以做你想做的事情，尤其是[影响编辑表单](http://www.mediawiki.org/wiki/Manual%3aParameters_to_index.php#Options_affecting_the_edit_form)。还有一个[关于创建带有预加载文本的页面的明确手册](http://www.mediawiki.org/wiki/Manual%3aCreating_pages_with_preloaded_text)，其中包括执行此类任务的有用扩展列表。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T10:29:58.857

我为此使用[了 MultiBoilerplate](http://www.mediawiki.org/wiki/Extension%3aMultiBoilerplate)。这个扩展非常有用，因为用户可以从模板的下拉列表中选择各种页面，这些页面可以包含用户自己定义的默认文本。

提示：如果您使用该选项：

```
$wgMultiBoilerplateOptions = false; 
```

*然后管理员可以通过 wiki*`LocalSettings.php`添加新模板（因此无需更改 php 中的任何配置）。

# prolog - 如何在 Prolog 中实现 Dijkstra 算法返回边列表？

> ID：13103365
> 
> 赞同：1
> 
> 时间：2012-10-27T19:19:44.257
> 
> 标签：prolog, shortest-path, dijkstra, edges

我一直在尝试在 JIProlog 中实现 Dijkstra 最短路径算法。网上有一些可用的实现，例如[here](http://colin.barker.pagesperso-orange.fr/lpa/dijkstra.htm)和[here](http://kti.mff.cuni.cz/~bartak/prolog/graphs.html#dijkstra)，但它们都将路径作为节点列表返回。这对我的实现来说是有问题的，因为我在技术上使用的是多重图，其中顶点可以通过多条边连接。因此，我需要一个返回边列表而不是节点列表的算法。

我一直在尝试调整我提到的第一个实现来跟踪边缘，但我迷失在`dijkstra_l/3`规则中。有人可以帮助我吗？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-27T22:42:21.613

我前段时间[回答了一个类似的问题，并提供了一个实现。](https://stackoverflow.com/questions/11787719/best-structure-graph-to-implement-dijkstra-in-prolog/11791840#11791840)唉，该代码不适用于 lastes SWI-Prlog，我已经调试并发现 ord_memberchk（用于提高效率）已经改变了行为。我已经用 memberchk 替换了，现在正在工作......

我建议将算法的输出与从节点恢复边缘的简单后处理通道一起使用，选择较小的值。我已经实现了 dijkstra_edges/3

```
/*  File:    dijkstra_av.pl
    Author:  Carlo,,,
    Created: Aug  3 2012
    Modified:Oct 28 2012
    Purpose: learn graph programming with attribute variables
*/

:- module(dijkstra_av, [dijkstra_av/3,
            dijkstra_edges/3]).

dijkstra_av(Graph, Start, Solution) :-
    setof(X, Y^D^(member(d(X,Y,D), Graph) ; member(d(Y,X,D), Graph)), Xs),
    length(Xs, L),
    length(Vs, L),
    aggregate_all(sum(D), member(d(_, _, D), Graph), Infinity),
    catch((algo(Graph, Infinity, Xs, Vs, Start, Solution),
           throw(sol(Solution))
          ), sol(Solution), true).

dijkstra_edges(Graph, Start, Edges) :-
    dijkstra_av(Graph, Start, Solution),
    maplist(nodes_to_edges(Graph), Solution, Edges).

nodes_to_edges(Graph, s(Node, Dist, Nodes), s(Node, Dist, Edges)) :-
    join_nodes(Graph, Nodes, Edges).

join_nodes(_Graph, [_Last], []).
join_nodes(Graph, [N,M|Ns], [e(N,M,D)|Es]) :-
    aggregate_all(min(X), member(d(N, M, X), Graph), D),
    join_nodes(Graph, [M|Ns], Es).

algo(Graph, Infinity, Xs, Vs, Start, Solution) :-
    pairs_keys_values(Ps, Xs, Vs),
    maplist(init_adjs(Ps), Graph),
    maplist(init_dist(Infinity), Ps),
    %ord_memberchk(Start-Sv, Ps),
    memberchk(Start-Sv, Ps),
    put_attr(Sv, dist, 0),
    time(main_loop(Vs)),
    maplist(solution(Start), Vs, Solution).

solution(Start, V, s(N, D, [Start|P])) :-
    get_attr(V, name, N),
    get_attr(V, dist, D),
    rpath(V, [], P).

rpath(V, X, P) :-
    get_attr(V, name, N),
    (   get_attr(V, previous, Q)
    ->  rpath(Q, [N|X], P)
    ;   P = X
    ).

init_dist(Infinity, N-V) :-
    put_attr(V, name, N),
    put_attr(V, dist, Infinity).

init_adjs(Ps, d(X, Y, D)) :-
    %ord_memberchk(X-Xv, Ps),
    %ord_memberchk(Y-Yv, Ps),
    memberchk(X-Xv, Ps),
    memberchk(Y-Yv, Ps),
    adj_add(Xv, Yv, D),
    adj_add(Yv, Xv, D).

adj_add(X, Y, D) :-
    (   get_attr(X, adjs, L)
    ->  put_attr(X, adjs, [Y-D|L])
    ;   put_attr(X, adjs, [Y-D])
    ).

main_loop([]).
main_loop([Q|Qs]) :-
    smallest_distance(Qs, Q, U, Qn),
    put_attr(U, assigned, true),
    get_attr(U, adjs, As),
    update_neighbours(As, U),
    main_loop(Qn).

smallest_distance([A|Qs], C, M, [T|Qn]) :-
    get_attr(A, dist, Av),
    get_attr(C, dist, Cv),
    (   Av < Cv
    ->  (N,T) = (A,C)
    ;   (N,T) = (C,A)
    ),
    !, smallest_distance(Qs, N, M, Qn).
smallest_distance([], U, U, []).

update_neighbours([V-Duv|Vs], U) :-
    (   get_attr(V, assigned, true)
    ->  true
    ;   get_attr(U, dist, Du),
        get_attr(V, dist, Dv),
        Alt is Du + Duv,
        (   Alt < Dv
        ->  put_attr(V, dist, Alt),
        put_attr(V, previous, U)
        ;   true
        )
    ),
    update_neighbours(Vs, U).
update_neighbours([], _).

:- begin_tests(dijkstra_av).

small([d(a,b,2),d(a,b,1),d(b,c,1),d(c,d,1),d(a,d,3),d(a,d,2)]).

test(1) :-
    nl,
    small(S),
    time(dijkstra_av(S, a, L)),
    maplist(writeln, L).

test(2) :-
    open('salesman.pl', read, F),
    readf(F, L),
    close(F),
    nl,
    dijkstra_av(L, penzance, R),
    maplist(writeln, R).

readf(F, [d(X,Y,D)|R]) :-
    read(F, dist(X,Y,D)), !, readf(F, R).
readf(_, []).

test(3) :-
    nl, small(S),
    time(dijkstra_edges(S, a, Es)),
    maplist(writeln, Es).

:- end_tests(dijkstra_av). 
```

test(3) 显示了实现，我添加了一些具有更高值的边缘来验证，输出显示这些被正确丢弃：

```
s(a,0,[])
s(b,1,[e(a,b,1)])
s(c,2,[e(a,b,1),e(b,c,1)])
s(d,2,[e(a,d,2)]) 
```

# php - 我正在开发 PHP，但我的浏览器坚持要我下载文件？

> ID：13103366
> 
> 赞同：0
> 
> 时间：2012-10-27T19:19:45.227
> 
> 标签：php, html

我正在处理一个包含 HTML 的 PHP 文件，但由于某种原因，当我在最新版本的 Chromium for Ubuntu 12.10 中导航到该文件时，它试图让我下载该文件。

有谁知道我可以如何改变这个？

谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-27T19:23:31.137

你不应该打开`file://`，但是`http://localhost`。

你启动服务器了吗？

# jsp - 在java servlet中添加会话的正确方法

> ID：13103367
> 
> 赞同：0
> 
> 时间：2012-10-27T19:19:48.440
> 
> 标签：jsp, session, servlets, session-cookies, jsessionid

我是这个领域的新手。我想知道是否仅`request.getSession(true)`在 java servlet 中调用“”就足以启动会话跟踪。在将响应重定向到下一个 jsp 之前添加`JsessionID`cookie c、设置 c 的路径和步骤怎么样？`response.addCookie(c)`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-27T19:29:45.140

Servlet 容器将为您完成所有这些工作。只需调用`getSession(true)`并将 JSESSIONID cookie 添加到下一个响应中（前提是尚未发送响应标头）。实际上，servlet 容器试图将您从实现细节中抽象出来，只提供 HTTP 会话抽象。

此外，默认情况下，每个 JSP 文件在访问后都会创建会话。当服务器不支持 cookie 时必须格外小心，渲染 URL 时必须考虑 URL 重写。

# 也可以看看

*   [为什么启用 cookie 时 jsessionid 会出现在 Wicket URL 中？](https://stackoverflow.com/questions/6808331)

# jquery - jQuery UI Draggable：更新拖动事件的包含

> ID：13103368
> 
> 赞同：1
> 
> 时间：2012-10-27T19:19:52.220
> 
> 标签：jquery, jquery-ui, jquery-ui-draggable

这可能吗：创建一个可拖动元素，以便当它被拖动到特定的可放置元素上时，可拖动元素的包含选项设置为可放置元素？这会产生一种效果，在可放置元素上拖动某些东西会导致可拖动元素被锁定/卡在可放置元素的范围内。

以下是我的代码的摘录，尽管它无法实现上述效果。

```
var droppable_position = $('#droppable').position();
$('#draggable').draggable({
    helper: 'clone',
    drag: function (event, ui) {
        if (ui.position.left > droppable_position.left && ui.position.top > droppable_position.top)
        {
            $('#draggable').draggable('option', 'containment', '#droppable');
        }
    }
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-27T22:31:52.993

您可以覆盖被拖动元素的位置。

这里不是“准备就绪”的代码，而是允许自己开发的代码。这个想法是在可放置元素的情况下设置包含位置变量，并在拖动元素`hover`的情况下使用当前拖动位置测试它们`drag`。

这个小提琴是位置覆盖的一个例子：http: [//jsfiddle.net/QvRjL/74/](http://jsfiddle.net/QvRjL/74/)

这个小提琴是一个例子，你可以如何检查拖动的元素是否靠近容器的边框：http: [//jsfiddle.net/pPn3v/22/](http://jsfiddle.net/pPn3v/22/)

位置覆盖示例：

```
$(document).mousemove(function(e){
   window.mouseXPos = e.pageX;
   window.mouseYPos = e.pageY;
}); 

$('[id^="drag-"]').each(function() {
    $(this).draggable({
        opacity: 0.7,
        cursorAt: { top: 15, left: 50 },        
        scroll: true,
        stop: function(){},  
        drag : function(e,ui){            
            //Force the helper position
            ui.position.left = window.mouseXPos - $(this).draggable('option','cursorAt').left;
            ui.position.top = window.mouseYPos- $(this).draggable('option','cursorAt').top; 
        });
}); 
```

# javascript - 添加一个内容 单击按钮到文本框

> ID：13103373
> 
> 赞同：0
> 
> 时间：2012-10-27T19:20:27.167
> 
> 标签：javascript, html, forms

首先，我`<div>....</div>`使用 javascript 函数创建了一个隐藏在页面加载中的内容。然后我使用表单创建了一个空文本框。现在，当任何人单击按钮时，隐藏的全部内容`<div>....</div>`应加载到表单的文本框中。这应该是什么代码？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-27T19:24:33.347

也许这样

```
<div id="hiddendiv"><strong>some</strong> content</div>
<button onclick="copyfunction();">click me</button>
<textarea id="textarea"></textarea>

<script>
    function copyfunction() {
        var textarea = document.getElementById('textarea');
        var hiddendiv = document.getElementById('hiddendiv');
        textarea.value = hiddendiv.innerText;
    }
</script> 
```

经测试，有效

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-27T19:23:07.597

```
$("#textbox_id").val($("#div_id").html()); 
```

# scala - 格式化一个简单的字符串，但 `java.lang.NoSuchMethodError`

> ID：13103374
> 
> 赞同：8
> 
> 时间：2012-10-27T19:20:30.653
> 
> 标签：scala, string-formatting

我正在使用 Scala 2.9.2。

运行 Scala 并测试一个简单的代码，这段代码是…… OK：

```
...
val title = "Hashing file (%s)..." format sizeToStr(file.length) 
```

但是我不明白什么是什么，当我将该代码放入一个简单的应用程序中时，编译OK，在运行时它会抛出这个：

```
java.lang.NoSuchMethodError: scala.Predef$.augmentString(Ljava/lang/String;)Lscala/collection/immutable/StringOps;
        at group.pals.penguin.app.shasher.Shasher$.calcHash(shasher.scala:119)
        at group.pals.penguin.app.shasher.Shasher$.main(shasher.scala:76)
        at group.pals.penguin.app.shasher.Shasher.main(shasher.scala)
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
        at java.lang.reflect.Method.invoke(Method.java:601)
        at scala.tools.nsc.util.ScalaClassLoader$$anonfun$run$1.apply(ScalaClassLoader.scala:71)
        at scala.tools.nsc.util.ScalaClassLoader$class.asContext(ScalaClassLoader.scala:31)
        at scala.tools.nsc.util.ScalaClassLoader$URLClassLoader.asContext(ScalaClassLoader.scala:139)
        at scala.tools.nsc.util.ScalaClassLoader$class.run(ScalaClassLoader.scala:71)
        at scala.tools.nsc.util.ScalaClassLoader$URLClassLoader.run(ScalaClassLoader.scala:139)
        at scala.tools.nsc.CommonRunner$class.run(ObjectRunner.scala:28)
        at scala.tools.nsc.JarRunner$.run(MainGenericRunner.scala:16)
        at scala.tools.nsc.CommonRunner$class.runAndCatch(ObjectRunner.scala:35)
        at scala.tools.nsc.JarRunner$.runAndCatch(MainGenericRunner.scala:16)
        at scala.tools.nsc.JarRunner$.runJar(MainGenericRunner.scala:28)
        at scala.tools.nsc.MainGenericRunner.runTarget$1(MainGenericRunner.scala:78)
        at scala.tools.nsc.MainGenericRunner.process(MainGenericRunner.scala:96)
        at scala.tools.nsc.MainGenericRunner$.main(MainGenericRunner.scala:105)
        at scala.tools.nsc.MainGenericRunner.main(MainGenericRunner.scala) 
```

你能帮帮我吗？谢谢。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-10-27T19:36:31.570

似乎您正在编译的标准库版本与运行时使用的标准库版本不同。

# php - 解码JSON后如何遍历数组

> ID：13103375
> 
> 赞同：0
> 
> 时间：2012-10-27T19:20:41.693
> 
> 标签：php, mysql, json

> **可能重复：**
> [PHP JSON 解码 - stdClass](https://stackoverflow.com/questions/4080755/php-json-decode-stdclass)

我有一个结构如下的**JSON**文件：

```
[{"key_mappings": "",
  "screen2_thumb": "http://games.mochiads.com/c/g/siegius-arena/screen2_thumb.png",
  "video_url": "http://www.youtube.com/watch?v=S7MDxObgJxw",
  "rating": "Teen",
  "screen1_thumb": "http://games.mochiads.com/c/g/siegius-arena/screen1_thumb.png",
  "metascore": 43.63,
  "height": 500,
  "screen3_thumb": "http://games.mochiads.com/c/g/siegius-arena/screen3_thumb.jpg",
  "stage3d": false,
  "screen3_url": "http://games.mochiads.com/c/g/siegius-arena/screen3.jpg", 
  "recommendation": 5,
  "coins_revshare_enabled": null,
  "category": "Fighting",
  "screen4_thumb": "http://games.mochiads.com/c/g/siegius-arena/screen4_thumb.png",
  "uuid": "6789c7e3-fd27-345e-85d9-e6a58165ae57",
  "author": "Juice-Tin",
  "thumbnail_large_url": "http://games.mochiads.com/c/g/siegius-arena/_thumb_200x200.png",
  "author_link": "https://www.mochimedia.com/community/profile/Juice-Tin",
  "controls":
    [["C", "Item"],
     ["V", "Spell"],
     ["X", "Heavy Attack"],
     ["Z", "Fast Attack"],
     ["fire", "na"],
     ["jump", "na"],
     ["movement", "arrow"]],
  "languages": ["en"],
  "swf_url": "http://games.mochiads.com/c/g/siegius-arena/Siegius%20Arena_.swf",
  "recommended": true,
  "game_tag": "e0e05c5c5fd1a61b",
  "achievements_enabled": false,
  "zip_url": "http://games.mochiads.com/c/g/siegius-arena.zip",
  "screen1_url": "http://games.mochiads.com/c/g/siegius-arena/screen1.png",
  "updated": "2012-10-25T15:47:01.953336-08:00",
  "description": "Fight in arena battles and upgrade your gladiator in this Action-RPG about betrayal and revenge.",
  "tags": ["siegius", "arena", "gladiator", "rome", "battle", "fight", "upgrade", "rpg", "fans", "en"],
  "swf_file_size": 10142842,
  "leaderboard_enabled": false,
  "game_url": "http://www.mochimedia.com/games/siegius-arena",
  "screen2_url": "http://games.mochiads.com/c/g/siegius-arena/screen2.png",
  "slug": "siegius-arena",
  "categories": ["Action", "Fighting"],
  "instructions": "", 
  "name": "Siegius Arena",
  "created": "2012-10-25T12:47:55.080005-08:00",
  "control_scheme": "{\"C\": \"Item\", \"fire\": \"na\", \"jump\": \"na\", \"V\": \"Spell\", \"X\": \"Heavy Attack\", \"Z\": \"Fast Attack\", \"movement\": \"arrow\"}", 
  "popularity": 0,
  "feed_approval_created": "2012-10-25T13:30:53.505710-08:00",
  "coins_enabled": null,
  "thumbnail_url": "http://games.mochiads.com/c/g/siegius-arena/_thumb_100x100.png",
  "screen4_url": "http://games.mochiads.com/c/g/siegius-arena/screen4.png", 
  "alternate_url": "",
  "resolution": "800x500",
  "width": 800}] 
```

然后，我有一个 foreach 语句，它将数据添加到 MYSQL 数据库：

```
foreach($result as $key => $value) {
    if($value) { 
    mysql_query("INSERT INTO `games_db`.`Games` (`title`, `description`, `image`, `category`, `page`, `rating`, `width`, `height`, `tags`) VALUES ('$value->name', '$value->description', '/images/$pageid.jpg', '$category', '$pageid', '$value->rating', '$value->width', '$value->height', '$value->tags')")  
} 
```

我的问题是，我必须做什么才能显示和插入 JSON 文件中的标签？目前，当我运行此页面时，“标签”列的数据只是显示“数组”。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-27T19:28:00.337

您可以这样使用[json_decode()](http://php.net/manual/en/function.json-decode.php)：

```
$jsonString = '[{"key_mappings": "", "screen2_thumb": "http://games.mochiads.com/c/g/siegius-arena/screen2_thumb.png", "video_url": "http://www.youtube.com/watch?v=S7MDxObgJxw", "rating": "Teen", "screen1_thumb": "http://games.mochiads.com/c/g/siegius-arena/screen1_thumb.png", "metascore": 43.63, "height": 500, "screen3_thumb": "http://games.mochiads.com/c/g/siegius-arena/screen3_thumb.jpg", "stage3d": false, "screen3_url": "http://games.mochiads.com/c/g/siegius-arena/screen3.jpg", "recommendation": 5, "coins_revshare_enabled": null, "category": "Fighting", "screen4_thumb": "http://games.mochiads.com/c/g/siegius-arena/screen4_thumb.png", "uuid": "6789c7e3-fd27-345e-85d9-e6a58165ae57", "author": "Juice-Tin", "thumbnail_large_url": "http://games.mochiads.com/c/g/siegius-arena/_thumb_200x200.png", "author_link": "https://www.mochimedia.com/community/profile/Juice-Tin", "controls": [["C", "Item"], ["V", "Spell"], ["X", "Heavy Attack"], ["Z", "Fast Attack"], ["fire", "na"], ["jump", "na"], ["movement", "arrow"]], "languages": ["en"], "swf_url": "http://games.mochiads.com/c/g/siegius-arena/Siegius%20Arena_.swf", "recommended": true, "game_tag": "e0e05c5c5fd1a61b", "achievements_enabled": false, "zip_url": "http://games.mochiads.com/c/g/siegius-arena.zip", "screen1_url": "http://games.mochiads.com/c/g/siegius-arena/screen1.png", "updated": "2012-10-25T15:47:01.953336-08:00", "description": "Fight in arena battles and upgrade your gladiator in this Action-RPG about betrayal and revenge.", "tags": ["siegius", "arena", "gladiator", "rome", "battle", "fight", "upgrade", "rpg", "fans", "en"], "swf_file_size": 10142842, "leaderboard_enabled": false, "game_url": "http://www.mochimedia.com/games/siegius-arena", "screen2_url": "http://games.mochiads.com/c/g/siegius-arena/screen2.png", "slug": "siegius-arena", "categories": ["Action", "Fighting"], "instructions": "", "name": "Siegius Arena", "created": "2012-10-25T12:47:55.080005-08:00", "control_scheme": "{\"C\": \"Item\", \"fire\": \"na\", \"jump\": \"na\", \"V\": \"Spell\", \"X\": \"Heavy Attack\", \"Z\": \"Fast Attack\", \"movement\": \"arrow\"}", "popularity": 0, "feed_approval_created": "2012-10-25T13:30:53.505710-08:00", "coins_enabled": null, "thumbnail_url": "http://games.mochiads.com/c/g/siegius-arena/_thumb_100x100.png", "screen4_url": "http://games.mochiads.com/c/g/siegius-arena/screen4.png", "alternate_url": "", "resolution": "800x500", "width": 800}]';
$jsonObject = json_decode($jsonString);
foreach ($jsonObject->tags as $tag) {
    echo $tag . PHP_EOL;
    //Do something
} 
```

如果你使用低于 PHP 5.2.0，你可以使用[JSON PECL Extension](http://pecl.php.net/package/json)

我还应该补充一点，您**不应该再**使用这些`mysql`功能 - 它们已被弃用。请参阅：[为什么我不应该在 PHP 中使用 mysql_* 函数？](https://stackoverflow.com/questions/12859942/why-shouldnt-i-use-mysql-function-in-php)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-27T19:23:16.363

使用[json_decode()](http://php.net/manual/en/function.json-decode.php)：

> json_decode — 解码 JSON 字符串

```
$jsonObject = json_decode($string);   // returns an object 
```

或者：

```
$jsonArray = json_decode($string, true);  // if second argument is true, returned object will be converted to an associative array 
```

编辑：

正如@nickhar 所建议的那样：注意：您需要 PHP 5.2.0 或更高版本才能使用 json_decode()

或者[漂浮的仿真之一](http://include-once.org/p/upgradephp)- @mario

# c++ - 我的 Qt 课程中缺少一些功能

> ID：13103376
> 
> 赞同：-2
> 
> 时间：2012-10-27T19:20:43.600
> 
> 标签：c++, qt

我开始将 Qt 用于 GUI，但是由于缺少一些功能，所以我在标头/库方面遇到了一些问题。

其中两个是：

```
<obj_name>.setModal(true);
<obj_name>.exec(); 
```

它们应该可以正常工作，就像[我正在关注的视频](http://www.youtube.com/watch?v=wUH_gu2HdQE&feature=relmfu)中一样（6:30）。

因为我做了他们所做的，所以我的线索是他的版本和我的不一样。

我想知道我应该包含哪个标题。

这是我的代码：

```
void MainWindow::on_actionNew_Window_triggered()
{
    MyDialog mDialog;
    mDialog.setModal(true);
    mDialog.exec();

} 
```

即使：

```
#include <QDialog> 
```

还是不行。它说：

> C:\QtSDK\teste-build-desktop-Qt_4_8_1_for_Desktop_- *MinGW* _Qt_SDK__Debug..\teste\mainwindow.cpp:22：错误：'class MyDialog'没有名为'setModal'的成员。

`mydialog.h`代码：

```
#ifndef MYDIALOG_H
#define MYDIALOG_H

#include <QMainWindow>
#include <QDialog>

namespace Ui {
class MyDialog;
}

class MyDialog : public QMainWindow
{
    Q_OBJECT

public:
    explicit MyDialog(QWidget *parent = 0);
    ~MyDialog();

private:
    Ui::MyDialog *ui;
};

#endif // MYDIALOG_H 
```

它包含在`mainwindow.cpp`and中`mydialog.cpp`（标题只是类）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-27T20:23:01.753

`MyDialog` is no `QDialog`. You created it as a "main window" which is no dialog.

To hot-fix this (without recreating the dialog using QtCreator), just rewrite the inheritance in `mydialog.h` from:

```
class MyDialog : public QMainWindow 
```

to:

```
class MyDialog : public QDialog 
```

In your `mydialog.cpp` you find the implementation of the constructor of `MyDialog` which calls the superclass constructor. Since we just changed the superclass, we also have to change this call from:

```
MyDialog::MyDialog(QWidget *parent) :
    QMainWindow(parent)
... 
```

to

```
MyDialog::MyDialog(QWidget *parent) :
    QDialog(parent)
... 
```

~~You also have to fix your .ui file to morph the whole widget from a main window to a dialog. I'll add how to do so in a few minutes (have to find it out)~~ You don't need to touch the .ui file.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-28T00:36:37.613

您试图从 MyDialog 类调用 setModal()，但它继承自 QMainWindow，它没有 setModal 方法。您必须改为从 QDialog 继承。

# matlab - 如何在 MATLAB 中随机选择？

> ID：13103380
> 
> 赞同：0
> 
> 时间：2012-10-27T19:20:54.290
> 
> 标签：matlab

我想在 -1 和 1 之间随机选择 1 x 6 个矩阵元素。

例如，`[-1 1 -1 1 1 1]`

怎么选？？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-27T19:26:37.953

创建一个可能值的向量，并用于`randi`生成该向量的随机索引。

```
Choices = [-1 1];
Index = randi(length(Choices), 1, 6);
Choices(Index)
ans =

     1     1     1    -1     1    -1 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-28T05:48:18.860

Just for the sake of completeness:

```
randVec = 2*randi([0 1], 1,6) - 1; 
```

# ruby-on-rails - 如何在 mongoid 中显示嵌入的文档？

> ID：13103381
> 
> 赞同：0
> 
> 时间：2012-10-27T19:20:54.317
> 
> 标签：ruby-on-rails, ruby, mongoid

新手问题在这里。我在嵌套表单中使用 mongoid、rails 3.2 和 nested_form。

我有一个`Profile`模型`embeds_many :services`。我正在使用嵌套表单，并且能够成功地将其保存到我的数据库中。但是，我无法弄清楚如何在我的页面上显示嵌入的文档。这似乎是最简单的难题。下面是我的数据库的样子：

```
{ "_id" : ObjectId( "507d6fc757299e4a0c000002" ),
  "biz_name" : "Shop Co",
  "services" : [ 
    { "_id" : ObjectId( "508c066a57299ef138000008" ),
      "s_and_p_service_description" : "what a great pie",
      "s_and_p_service_title" : "Pie" }, 
    { "_id" : ObjectId( "508c079357299ef138000009" ),
      "s_and_p_service_title" : "Fruit",
      "s_and_p_service_description" : "what a great fruit" } ],
  "updated_at" : Date( 1351354259379 ),
  "user_id" : ObjectId( "507d6fc757299e4a0c000001" ) 
} 
```

我认为这样的事情会在：

```
<% @profile.services.each do |service| %>                           
    <%= @profile.services.s_and_p_service_title %>
<% end %> 
```

但我收到以下错误：

```
undefined method `s_and_p_service_title' for #<Array:0x007fa22a643c18> 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-27T19:22:44.350

我认为您在那里复制/粘贴的内容太多了。试试这个：

```
<% @profile.services.each do |service| %>                           
    <%= service.s_and_p_service_title %>
<% end %> 
```

# android - Android AVD 无法识别设备，但 ADB 可以

> ID：13103383
> 
> 赞同：3
> 
> 时间：2012-10-27T19:21:05.623
> 
> 标签：android, sdk, adb, android-4.0-ice-cream-sandwich

我正在尝试让我的设备调试我的软件，但它不会出现在 AVD 列表中。ADB 可以看到它，Eclipse 设备管理器也可以看到。我可以使用 adb 等获得交互式 shell。

```
C:\Program Files (x86)\Android\android-sdk\platform-tools>adb devices
List of devices attached
BX9038ZRUV      device 
```

![高级经理](../Images/d515db11022c1edde7484c98fa874f4d.png)

![Eclipse 设备](../Images/84976f729cb00014e0ebd5f99aa6dee7.png) 有谁知道发生了什么以及我应该如何解决它？我正在运行 Windows 7，我的手机是运行 Android 4.0.4 的索尼爱立信 Xperia S。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-27T19:24:57.970

avd 仅适用于虚拟设备。您要做的是：
运行配置>更改为“每次运行应用程序时询问”，或您的真实设备。![在此处输入图像描述](../Images/338e53c49881a80dc6f17c735c55f884.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-27T19:25:45.487

AVD 代表 Android Virtual Device，您的手机是真实的。当您运行或调试应用程序时，它应该显示在选择目标列表中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-27T19:30:04.620

AVD 仅列出虚拟设备（模拟器）。[在运行配置](http://i.stack.imgur.com/M00tT.png)中选择“始终提示选择设备” ！

# php - Facebook Open Graph 电影无法在 Feed 中播放

> ID：13103386
> 
> 赞同：0
> 
> 时间：2012-10-27T19:21:42.410
> 
> 标签：php, facebook, facebook-opengraph

我真的无法弄清楚我在这里做错了什么。我的开放图形代码，我认为它是正确的，但它不会像我期望的那样内联播放视频：

查看源：http://recordmob.com/dev/?{%22track_id%22:%2284%22}

我把它放到 facebook 上的 linter 里，它又回来了？

[https://developers.facebook.com/tools/debug/og/object?q=http%3A%2F%2Frecordmob.com%2Fs%2FS](https://developers.facebook.com/tools/debug/og/object?q=http%3A%2F%2Frecordmob.com%2Fs%2FS)

为什么这不应该像它应该的那样内联播放？我拉我的头发小时。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-27T19:58:33.397

视频源 URL 仅为 HTTP - 您是否在启用 HTTPS 的情况下浏览 Facebook？Facebook 不会嵌入会导致混合内容的内容——要么包括视频的安全 URL，要么在你的 Facebook 帐户上禁用 HTTPS——我推荐前者

# mysql - 根据时间戳按小时聚合数据

> ID：13103388
> 
> 赞同：6
> 
> 时间：2012-10-27T19:21:50.837
> 
> 标签：mysql

这一定是一件很常见的事情，但我被困住了。

我有一些可以像这样简化的数据：

```
id    user    unixtime
-----------------------
1     dave    1335312057
2     dave    1335312058
3     steve   1335312128 
```

等等

到目前为止，我只需要按天汇总，所以我一直在使用：

```
SELECT
 UNIX_TIMESTAMP(DATE(FROM_UNIXTIME(unixtime))) AS time,
 count(c.user) AS count
FROM core c
GROUP BY DATE(FROM_UNIXTIME(unixtime)) 
```

我尝试过将 CONCAT 与 DATE 和 HOUR 一起使用，但不能完全按预期工作——有什么想法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-27T19:33:25.380

```
SELECT
 DATE(FROM_UNIXTIME(unixtime)) as date,
 HOUR(FROM_UNIXTIME(unixtime)) AS hour,
 count(c.user) AS count
FROM core c
GROUP BY 1,2 
```

如果要将小时作为 unix 时间戳，请包装此查询以获取它：

```
SELECT UNIX_TIMESTAMP(DATE_ADD(the_date, INTERVAL the_hour HOUR)), the_count
from (select
    DATE(FROM_UNIXTIME(unixtime)) as the_date,
    HOUR(FROM_UNIXTIME(unixtime)) as the_hour,
    count(c.user) AS the_count
    FROM core c
    GROUP BY 1,2 
) x 
```

注意：`the_`在列名上使用前缀以避免保留字的问题

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-27T19:43:36.043

尝试使用

```
SELECT
     UNIX_TIMESTAMP(DATE_ADD(DATE(FROM_UNIXTIME(unixtime)), INTERVAL HOUR(FROM_UNIXTIME(unixtime)) HOUR)) AS TIME,
     COUNT(c.user) AS COUNT
    FROM core c
    GROUP BY DATE(FROM_UNIXTIME(unixtime)), HOUR(FROM_UNIXTIME(unixtime)); 
```

希望这可以帮助...

# asp.net - 通过网络服务访问数据库

> ID：13103390
> 
> 赞同：0
> 
> 时间：2012-10-27T19:21:57.647
> 
> 标签：asp.net, .net, web-services, windows-phone-7

使用 Web 服务访问数据库对象是否有效？

我正在开发一个 win 手机应用程序和一个网络应用程序。他们都将使用相同的数据库。我应该为两个应用程序创建一个 Web 服务吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-27T20:35:15.540

共享网络服务绝对是正确的方法。这就是服务的真正意义，能够从多个地方访问相同的业务和数据逻辑（当然，假设两个地方都在做同样的事情）。它还充当您的应用程序和数据库之间的天然安全缓冲区 - 因此您的数据库只需要接受来自服务的连接，而不是多个客户端应用程序。

就技术而言，由于您的两个客户端都是 Microsoft，因此您可以使用 WCF 作为您的服务，而不是传统的 SOAP 服务。或者你可以使用更普遍接受的东西，比如带有 JSON 的 WebAPI。那里有很多选择。

# php - 在单个 EC2 实例上安装 Tomcat 和 PHP 服务器是一种好习惯吗

> ID：13103391
> 
> 赞同：0
> 
> 时间：2012-10-27T19:22:07.247
> 
> 标签：php, tomcat, amazon-ec2

我希望在单个 Amazon EC2 实例上安装一个网站 PHP 和一个 Tomcat 应用程序，主要是为了节省成本。这样做是否可取？

这样做有什么缺点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-27T19:35:46.483

取决于实例类型、您期望的负载和网络服务器。一般没有明显的缺点。尝试只运行一个网络服务器（这甚至可以为您节省一些资源）。在共享主机上，这一直是这样做的，通常，tomcat/php 只在有东西要处理时才使用资源，所以你可以把它想象成“tomcat 通常使用的资源加上 php 通常使用的资源”。

继续尝试吧。

# c++ - C++11：g++-4.7 内部编译器错误

> ID：13103396
> 
> 赞同：11
> 
> 时间：2012-10-27T19:23:03.830
> 
> 标签：c++, linux, gcc, c++11, g++

以下代码：

```
#include <iostream>
#include <array>
using namespace std;

constexpr int N = 1000000;
constexpr int f(int x) { return x*2; }

typedef array<int, N> A;

template<int... i> struct F { static constexpr A f() { return A{{ ::f(i)... }}; } };

template<class A, class B> struct C {};
template<int... i, int... j> struct C<F<i...>, F<j...>> : F<i..., (sizeof...(i)+j)...>
{
        using T = F<i..., (sizeof...(i)+j)...>;
};

template<int n> struct S : C<typename S<n/2>::T, typename S<n-n/2>::T> {};
template<> struct S<1> : F<0> { using T = F<0>; };

constexpr auto X = S<N>::f();

int main()
{
        cout << X[3] << endl;
} 
```

`-std=gnu++11`在 GCC 4.7模式下产生内部编译器错误。

```
$ g++ -std=gnu++11 test.cpp
g++-4.7.real: internal compiler error: Killed (program cc1plus) 
```

出了什么问题？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-27T21:13:07.557

您的程序似乎需要不合理的内存量（可能是因为模板扩展太多）。

使用最近的`g++-trunk`：

```
gcc version 4.8.0 20121026 (experimental) [trunk revision 192860] (GCC) 
```

具有以下 zsh 限制：

```
 % limit          
   cputime         unlimited
   filesize        unlimited
   datasize        15000MB
   stacksize       8MB
   coredumpsize    400MB
   memoryuse       15000MB
   maxproc         128166
   descriptors     1024
   memorylocked    64kB
   addressspace    16000MB
   maxfilelocks    unlimited
   sigpending      128166
   msgqueue        819200
   nice            0
   rt_priority     0
   rt_time         unlimited 
```

（这在 Debian/Sid/AMD64 上，带有 i3770K 英特尔处理器和 16Gb RAM）

我正进入（状态：

```
 % time g++-trunk -std=gnu++11 andrew.cc -o andrew
  virtual memory exhausted: Cannot allocate memory
  g++-trunk -std=gnu++11 andrew.cc -o andrew :
  108.25s user 3.28s system 89% cpu 2:03.98 total 
```

所以看起来模板扩展需要这么多内存，你编程是不合理的。

我不确定这是否会被接受为 GCC 错误。众所周知，C++ 模板的宏扩展是图灵完备的，而您只是碰壁了。并且 GCC 中继确实报告了一个致命但可以理解的错误。

这个故事的寓意可能是适当地设置[setrlimit(2)](http://www.kernel.org/doc/man-pages/online/pages/man2/setrlimit.2.html)（具有与您的系统和硬件兼容的限制），可能使用`limit`zsh 内置或`ulimit`bash 内置。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-27T19:30:22.417

内部错误意味着您遇到了编译器错误。

# android - Android External Storage BufferedWriter 不接受 NewLine

> ID：13103400
> 
> 赞同：1
> 
> 时间：2012-10-27T19:23:16.703
> 
> 标签：android, file

我有文件写入问题。我想创建按钮的 OnClick 方法，该方法将行添加到 sdcard 上的文件，但它会删除前一行并将所有内容放在当前行的位置。结果我只得到了我在最后一次点击按钮时输入的文本，这是我的代码：

```
if (txtFile.createNewFile() || txtFile.isFile()) {
                        FileOutputStream fOut = null;
                        try {
                            fOut = new FileOutputStream(txtFile);
                        } catch (FileNotFoundException e) {
                            // TODO Auto-generated catch block
                            e.printStackTrace();
                        }
                        OutputStreamWriter myOutWriter = new OutputStreamWriter(fOut);
                        BufferedWriter bwriter = new BufferedWriter(myOutWriter);
                        EditText desc__ = (EditText)findViewById(R.id.descriptionEditTExt);
                        try {
                            bwriter.newLine();
                            bwriter.write(lat+"|"+lng+"|"+desc__.getText().toString()+"|"+f+"|"+position);

                            bwriter.close();
                            myOutWriter.close();
                            fOut.close();
                        } catch (IOException e) {
                            // TODO Auto-generated catch block
                            e.printStackTrace();
                        }
                    } else {
                        /* handle directory here */
                    }
                } catch (IOException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-27T19:31:59.640

请将您的**FileOutputStream**构造函数重写为

```
FileOutputStream fos = new FileOutputStream(file, true); 
```

这里建议您的文件将以附加模式打开，这将解决您的第一个问题..

其次，如果您想在文件中添加新行，请使用**`"\r\n"`**字符串

```
e.g. fos.write("\r\n".getBytes()); 
```

希望这可以帮助..

# php - 发送多封电子邮件php，但只是到达第一个收件人

> ID：13103404
> 
> 赞同：0
> 
> 时间：2012-10-27T19:24:02.337
> 
> 标签：php, email, notifications, sendmail

基本上我需要通知某些用户应用程序中发生的事情。我从数据库中获取用户，一切正常，但是当我发送电子邮件时，只有列表中的第一个收到它，我尝试切换他们带来的顺序，但仍然与特定的邮件客户端无关。

我尝试一个一个发送，现在一起发送，似乎都不起作用。

以前有过这种情况吗？我正在使用一些带有 linux 的亚马逊服务器，但它是客户端的客户端服务器，所以我不能真正把头放在整个配置上。

```
$ul = $this->q2ar("SELECT * FROM usr WHERE role_id in(1,7)");
//get admins from db
$ntf = '';
foreach($ul as $usr){
    $headers  = 'MIME-Version: 1.0 '." \r\n";
    $headers .= 'Content-type: text/html; charset=iso-8859-1' . " \r\n";
    $headers .= 'From: Centinelas <centinelas@serviciochevrolet.com.ec>' . "  \r\n";
    $body = "mail content";
    $ntf .= "'".$usr['email']."'".', ';
}
$ntf = substr_replace($ntf ,"",-2);
$ml = mail($ntf,'Nuevo Caso en Centinelas Chevrolet',$body,$headers,'- fcentinelas@serviciochevrolet.com.ec');
return('email where sent to :<br/>'.$ntf); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-27T19:34:04.077

尝试将电子邮件发送给一个人，例如您自己或发件人，然后使用抄送发送给其他人。

```
$ul = $this->q2ar("SELECT * FROM usr WHERE role_id in(1,7)");
foreach($ul as $usr){
    $ntf[] = $usr['email'];
}

$headers  = 'MIME-Version: 1.0 '." \r\n";
$headers .= 'Content-type: text/html; charset=iso-8859-1' . " \r\n";
$headers .= 'From: Centinelas <centinelas@serviciochevrolet.com.ec>' . "  \r\n";
$headers .= 'Cc: '.join($nft,",") . "  \r\n";
$body = "mail content";

$ml = mail('centinelas@serviciochevrolet.com.ec','Nuevo Caso en Centinelas Chevrolet',$body,$headers,'- fcentinelas@serviciochevrolet.com.ec');
return('email where sent to :<br/>'.join($nft,",")); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-27T19:52:22.690

整个使用 Cc: 字符串。

```
foreach($ul as $usr){
    $ntf .= (($ntf=="")?"":", ")."'".$usr['email']."'";
}

$headers = 'MIME-Version: 1.0' . "\r\n";
$headers .= 'Content-type: text/html; charset=iso-8859-1' . "\r\n";

// Additional headers
$headers .= 'To: Centinelas <centinelas@serviciochevrolet.com.ec>' . "\r\n";
$headers .= 'From: Centinelas <centinelas@serviciochevrolet.com.ec>' . "\r\n";
$headers .= 'Cc: '.$ntf.'' . "\r\n"; 
```

you have to add $ntf "CC:" to the HEADERS (for clarity it is often ok to send the mail to the sender)

# ruby-on-rails - rails 回形针 - 错误处理缩略图

> ID：13103407
> 
> 赞同：3
> 
> 时间：2012-10-27T19:24:18.403
> 
> 标签：ruby-on-rails, ruby, windows, paperclip

我在 Windows 7 机器上运行带有 Paperclip 3.3.0 的 Rails 3.2.8。当我尝试上传名为“2012-10-26_17.49.13.png”的图像时出现以下错误：`Image There was an error processing the thumbnail for 2012-10-26_17.49.1320121027-1196-l5ejgs`

文件名可能并不重要，但我想指出的是，我发现的大多数与此相关的问题都是这样说的`error processing the thumbnail for stream`。我的错误没有“流”。每次我尝试上传时，文件名的结尾都会随机更改（Paperclip 做了一些我假设的避免碰撞）。

图像字段在模型中设置如下：

```
has_attached_file :image, :path => ":rails_root/public/images/:hash_:style.:extension", :url => "/images/:hash_:style.:extension", :hash_secret => "sometext", :default_url => "", :styles => { :thumb => "100x100#" }
validates_attachment_content_type :image, :content_type => ['image/jpeg','image/jpg','image/pjpeg','image/png','image/x-png','image/gif'] 
```

目前`has_attached_file`正在使用`:hash`，但我也尝试过使用`:basefilename`它或其他任何东西，但这并不影响结果。这种`:thumb`风格也试过了`"100x100>"`。

该字段是这样的`_form.html.erb`：

```
<div class="field">
  <%= f.label :image %><br />
  <%= f.file_field :image %>
</div> 
```

控制器并没有什么特别之处，`:image`因为 Paperclip 似乎为我处理了一切。至少，这是我通过查看示例代码收集到的。

我认为这可能是 ImageMagick 的问题。我为这个错误找到的一些解决方案涉及 ImageMagick 的安装位置。我将我的移动到 C:/ImageMagick6，更新了我的系统路径，并将以下几行添加到 development.rb：

```
Paperclip.options[:command_path] = "C:/ImageMagick6"
Paperclip.options[:swallow_stderr] = false
Paperclip.options[:whiny_thumbnails] = true 
```

我不完全确定是否需要后两者，但我看到了它们的建议。没有注意到包含它们的任何变化。如果我打开命令提示符，我可以访问 ImageMagick 命令，所以路径应该是正确的。

我还尝试在`:styles`已删除的情况下运行它，这使我可以上传原始图像文件。不过，我真的很想要我的网站的缩略图。

那么，我错过了什么使它无法正常工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-05T05:40:08.573

尽管已添加`Paperclip.options[:command_path] = 'C:/progra~2/imagem~1.0-q'`到我的 config/environments/development.rb 文件中，但我`C:/progra~2/imagem~1.0-q`之前必须`%SystemRoot%\system32`在环境路径中添加。

我通过来回修改环境路径确认了这一点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-27T20:17:30.073

您可以尝试通过命令行直接使用 ImageMagick 来操作图像。至少，这应该确认您的 ImageMagick 安装是否存在问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-27T20:08:18.807

要使用 Paperclip，您需要安装 ImageMagick 库。

[ImageMagick提供了](http://www.imagemagick.org/script/index.php)*Paperclip*所需的两个可执行文件：`identify`识别图像格式和处理原始图像并生成所需格式。*`convert`*

 *现在，ImageMagick 默认不随 Windows 提供，因此您需要手动安装它。

稍后，您将需要告诉 Paperclip 在哪里可以找到 ImageMagick 可执行文件，所有这些都记录在[Paperclip README中](https://github.com/thoughtbot/paperclip#image-processor)

请注意，如果您没有设置`Paperclip.options[:command_path]`安装 ImageMagick 的 PATH，Paperclip 将错误地尝试使用 Windows 的`convert`可执行文件，这是一个文件系统转换实用程序，并不用于处理图像。

我相信这是您目前收到的关于生成缩略图的错误。

希望有帮助。*

# c++ - 类间内存分配巧合

> ID：13103409
> 
> 赞同：1
> 
> 时间：2012-10-27T19:24:21.697
> 
> 标签：c++, visual-studio-2010, visual-c++

我正在计算通过管道的边界层流动的属性。我有一个 CChannel 类，它存储管道的几何形状，CFlow 保存流体的全局属性，CNode 存储边界层的局部参数。当我以当前形式执行程序时，CChannel 内的 GridPoints 向量（变量“alpha”）的第一个元素被分配了与 Uinf 相同的内存位置，Uinf 是 CFlow 类的私有成员。当我更改后一个类以使其包含的字段不再是指针而是常规变量时，问题就消失了。我还尝试在类构造函数中为 GridPoints 向量保留内存空间，但没有任何效果。当我在寻找答案时，我发现这可能是由内置代码优化器引起的，但没有设法学习其他任何东西。（如果是这样，我怎样才能在不损失效率的情况下解决这个问题？）我猜测问题的出现是因为两种不同的内存分配模式（堆与堆栈）之间的差异。我仍然想知道为什么会发生这种情况，这样我就可以将全局流参数存储为指针，并在将来避免这个问题。

**程序.cpp**

```
#include <iostream>

#include "Channel.h"    // stores the channel geometry
#include "Flow.h"   // stores the fluid properties and free stream data
#include "Node.h"       // holds the local BL flow properties, e.g. BL thickness, lambda, etc.

using namespace std;

int main(void)
{
    int NoNodes=21;
    CChannel MyChan(4, 1.2, .8);    // L, h1, h2
    MyChan.MeshUniform(NoNodes);

    CFlow Flow1(.5,1.529e-5,1.19);  // Uinf, niu, ro

    for (int i=0;i<NoNodes;i++)
    {
        MyChan.GridPoints->at(i).GetAlpha();
    }
    return(0);
} 
```

**节点.h**

```
#pragma once
class CNode
{
public:
    double *alpha, *x, *lambda; // properties dependent on the Pollhausen velocity profile

    CNode(void);
    ~CNode(void);

    void GetAlpha(void);    // calculates alpha

}; 
```

**节点.cpp**

```
#include "Node.h"
#include <iostream>

CNode::CNode(void)
{
    alpha=new double;

    lambda=new double;
    *lambda=0;
}

CNode::~CNode(void)
{
    delete alpha, x, lambda;
}

void CNode::GetAlpha(void)
{
    *alpha=(.3-*lambda/120.);
} 
```

**流.h**

```
#pragma once
class CFlow
{
private:
    double *Uinf, *niu, *ro;
public:
    CFlow(double, double, double);
    ~CFlow(void);
}; 
```

**流.cpp**

```
#include "Flow.h"

CFlow::CFlow(double u, double visc, double den)
{
    Uinf=new double;
    niu=new double;
    ro=new double;
    *Uinf=u;    // free stream velocity (assumes the inflow is parallel to the channel's CL) [m/s]
    *niu=visc;  // kinematic viscosity of the fluid [m^2/s]
    *ro=den;    // density of the fluid [kg/m^3]
}

CFlow::~CFlow(void)
{} 
```

**频道.h**

```
#pragma once
#include <vector>

#include "Node.h"

class CChannel
{
public:
    double *L, *h1, *h2;    // h1 & h2 defined from the CL => make use of the problem assumed to be symmetric
    std::vector<CNode> *GridPoints; // stores data for each individual grid point

    CChannel(double, double, double);
    ~CChannel(void);

    void MeshUniform(int);  // creates a uniform distribution of nodes along the length of the channel
}; 
```

**频道.cpp**

```
#include "Channel.h"

CChannel::CChannel(double length,double height1,double height2)
{
    L=new double;   // allocate memory
    h1=new double;
    h2=new double;
    GridPoints = new std::vector<CNode>;

    *L=length;      // assign input values
    *h1=height1;
    *h2=height2;
}

CChannel::~CChannel(void)
{
    delete L, h1, h2, GridPoints; // delete all the members of the class
}

void CChannel::MeshUniform(int NoNodes)
{
    GridPoints->resize(NoNodes);    // resize the vector
    double dx=*L/(NoNodes-1);   // increment of length between each pair of nodes
    for (int i=0; i<NoNodes; i++)
        *GridPoints->at(i).x=0.+i*dx;   // assign the location to each node
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-27T19:48:51.747

如前所述，您不需要所有这些指针 - 将它们更改为原始变量。

如果有一天您遇到需要指针的情况，请记住三法则：三[法则是什么？](https://stackoverflow.com/questions/4172722/what-is-the-rule-of-three).

您没有在类中定义复制构造函数和赋值运算符，就违反了这条规则，就像在这个特定的类中一样：

```
class CNode
{
public:
    double *alpha, *lambda; // properties dependent on the Pollhausen velocity profile

    CNode(void);
    ~CNode(void);

    void GetAlpha(void);    // calculates alpha

}; 
```

您正在使用它`CNode`-`std::vector<CNode>`因此您正在遭受该`CNode`对象的错误复制。

因此，您需要添加复制构造函数和赋值运算符 - 即使您仍将使用指针，您的问题也应该消失，就像在这个简单的示例类中一样：

```
class Example {
public:
  Example() : p(new int()) {}
  ~Example() { delete p; }
  Example(const Example& e) p(new int(e.p?*e.p:0)) {}
  Example& operator = (Example e)
  {
      std::swap(e.p, p);
      return *this;
  }
private:
  int* p;  
}; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-27T19:52:56.253

这很复杂，但解释是在您的指针代码中您没有编写可以复制的对象（正如 Piotr 所说您没有遵循三规则）。由于这个错误，正在发生的事情是内存开始分配，内存被释放然后再次分配。巧合的*是*，当您再次分配内存时，它会重用刚刚释放的相同地址。这就是为什么您会看到相同的指针值。

`MyChan.GridPoints->at(0).alpha`是一个指针，但它指向的内存已被释放。然后你分配更多的内存，它会重用指向`Flow1.Uinf`的相同的释放内存。`MyChan.GridPoints->at(0).alpha`所以你得到两个指针的相同值。

你还有另一个误解

```
delete L, h1, h2, GridPoints; // delete all the members of the class 
```

不会删除类的所有成员。仅有的

```
delete L; // delete all the members of the class
delete h1;
delete h2;
delete GridPoints; 
```

这样做。您写的内容仅删除了 GridPoints。您可能需要查找 C++ 逗号运算符以了解原因。

# c++ - _r 后缀是什么意思？

> ID：13103410
> 
> 赞同：5
> 
> 时间：2012-10-27T19:24:21.963
> 
> 标签：c++, c, typing

我知道 `_r`后缀用于表示线程安全的东西。例如`strtok`和`strtok_r`或`libmysql.so`和`libmysql_r.so`。但是我在任何地方都找不到这实际上意味着什么？例如，`_t`表示“类型”，`_r`后缀是什么意思？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-27T19:28:45.240

[请参阅http://pubs.opengroup.org/onlinepubs/000095399/xrat/xbd_chap04.html](http://pubs.opengroup.org/onlinepubs/000095399/xrat/xbd_chap04.html)`A.4.16 Thread-Safety`中的章节：

> 后缀“_r”是历史的，其中“r”代表“可重入”。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-27T19:26:45.770

`_r`后缀代表可重入。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-27T19:28:04.933

`_r`表示可重入，即使这些函数可能不是真正可重入的。这些功能只是保证不使用静态存储。

# c++ - 两个 c/c++ 程序的交互

> ID：13103411
> 
> 赞同：4
> 
> 时间：2012-10-27T19:24:27.083
> 
> 标签：c++, c, messaging

我对此完全不了解。也许这对于堆栈来说太宽泛了，但是在这里：

假设我有两个程序（用 C/C++ 编写）同时运行，比如 A 和 B，具有不同的 PID。

有哪些选项可以进行然后相互交互。例如，我如何将信息从一个传递到另一个，例如让一个能够等待另一个信号，并做出相应的响应。

我知道 MPI，但 MPI 通常适用于使用相同源编译的程序（因此，它更适用于并行计算，而不仅仅是来自完全不同的程序的交互，这些程序是为了相互交互而构建的）。

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-27T19:31:02.650

您必须注意“IPC”（进程间通信）。有几种类型：

*   管道
*   信号
*   共享内存
*   消息队列
*   信号量
*   文件（根据@JonathanLeffler 的建议 :-)
*   RPC（由@sftrabbit 建议）
    通常更适合客户端/服务器
    *   科尔巴
    *   D-总线

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-27T19:29:16.530

您使用许多进程间通信机制中的一种，例如管道（一个应用程序将字节写入管道，另一个从管道读取。想象一下 stdin/stdout。）或共享内存（内存区域映射到两个程序的虚拟地址空间和他们可以通过它进行交流）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-27T19:32:56.677

相同的来源无关紧要——一旦你的程序被编译，系统就不会知道或关心它们来自哪里。

它们之间有不同的通信方式，具体取决于数据量、速度、单向或双向、可预测的速率等......

最简单的可能只是使用网络 - 请注意，如果您在同一台机器上，网络堆栈将自动使用一些更高性能的系统来实际发送数据（即共享内存）

# objective-c - Foundation 调用 mkdir(...)，它没有返回 0，并且 errno 被设置为 2

> ID：13103413
> 
> 赞同：0
> 
> 时间：2012-10-27T19:24:34.817
> 
> 标签：objective-c, ios, core-data

我正在关注*Creating iOS 5 Apps Develop and Design*一书中的教程。我尽可能完美地遵循指示，但我不断收到此错误。

> 2012-10-27 14:40:14.384 Health Beat[10608:1c0f] Foundation called mkdir("/Users/dblock/Library/Application Support/iPhone Simulator/6.0/Applications/5B498D88-3062-4F89-90E2-4B3155C1E325/Library /Documentation/(A Document Being Saved By Health Beat)")，它没有返回 0，并且 errno 被设置为 2。

我开始了这个项目，然后在它中间更新到 xcode 4.5.1。我不知道是否有一些设置可能会使这不起作用。

[文件链接：](https://dl.dropbox.com/u/81707637/Health%20Beat.zip)

OSX 10.8.2
Xcode 4.5.1 (4G1004)
MBP 15"

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-27T19:53:33.530

问题是您使用了常量`NSDocumentationDirectory`而不是常量`NSDocumentDirectory`。可能您键入`NSDoc`然后接受了自动完成，而 Xcode 自动完成了错误的常量。

要找到它，请选择“编辑”>“查找”>“在工作区中查找”，或按 Command-Shift-F，然后搜索`NSDocumentationDirectory`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-27T19:47:54.003

要么重置你的模拟器，清理 xcode 构建并尝试运行它。或者转到 `/Users/dblock/Library/Application Support/iPhone Simulator/6.0/Applications`并删除该文件夹`5B498D88-3062-4F89-90E2-4B3155C1E325`并再次运行。这可能是这里的问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-27T19:32:24.407

的`errno`值`2`对应于`ENOENT`。您确定最后一个之前的所有路径组件都存在吗？`mkdir()`不是递归的。

# prolog - 从序言中的列表列表中删除元素（x，y）？

> ID：13103415
> 
> 赞同：2
> 
> 时间：2012-10-27T19:24:58.860
> 
> 标签：prolog

我需要一个给出列表列表（矩阵）的谓词

```
removeElementM(Line,Column,List,NewList) 
```

删除 (Line,Column) 元素。

例如给定列表（L）：

```
 ([a,b,c,d],
     [e,r,t,y],
     [u,i,o,t])

removeElementM(2,2,L,X) would return

X = [[a,b,c,d],[e,r,t,y],[u,i,t]] 
```

我已经有了停止谓词

```
removeElementM(0,0,[[_|T1]|T],[T1|T]). 
```

但无法为另一个想出解决方案......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-27T20:26:52.903

类似的东西：

```
removeElementM(Line,Column,[List | Rest],[List |NewList]) :-
    Line > 0,
    Line1 is Line - 1,
    removeElementM(Line1, Column, Rest, NewList).

removeElementM(0, Column,[List | Rest],[List1 |Rest]) :-
    removeElementL(Column, List, List1).

removeElementL(Column, [H | T], [H | T1]) :-
    Column > 0,
    Column1 is Column - 1,
    removeElementL(Column1, T, T1).

removeElementL(0, [_H | T], T). 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-27T23:07:57.023

[在 SWI-Prolog 中实现的nth0](http://www.swi-prolog.org/pldoc/doc_for?object=nth0/4) /4 相当强大。您需要用已删除元素的另一行替换一行。然后

```
removeElementM(R, C, Mat, Upd) :-
    nth0(R, Mat, OldRow, RestRows),   % get the row and the rest
    nth0(C, OldRow, _Val, NewRow),    % we don't care the _Val deleted
    nth0(R, Upd, NewRow, RestRows).   % insert updated row in rest, get Upd matrix

test :-
    L = [[a,b,c,d],
         [e,r,t,y],
         [u,i,o,t]],
    removeElementM(2,2,L,X),
    writeln(X).

?- test.
[[a,b,c,d],[e,r,t,y],[u,i,t]] 
```

如果您正在学习 Prolog，最好验证 @joel76 的答案，它是基本的 Prolog，没有 SWI-Prolog 特定功能。

# r - 在 R 中绘制饼图

> ID：13103416
> 
> 赞同：3
> 
> 时间：2012-10-27T19:25:01.497
> 
> 标签：r, pie-chart

```
totalReads=10000
mappedReads=8000
mappedTargetReads=6000
unmappedReads=totalReads-mappedReads
offtargetmappedReads=mappedReads-mappedTargetReads
data<-c(mappedReads,unmappedReads,mappedTargetReads,offtargetmappedReads)
round(data[1]/totalReads*100)->a
round(data[2]/totalReads*100)->b
round(data[3]/mappedReads*100)->c
round(data[4]/mappedReads*100)->d
pct<-c(a,b,c,d)
labels<-c("MappedReads","UnmappedReads","On-exon","Off-exon")
labels<-paste(labels,pct)
labels<-paste(labels,"%", sep="")
pie(c(mappedReads,unmappedReads,mappedTargetReads,offtargetmappedReads),labels=labels) 
```

它基本上独立地绘制了所有四个切片。但是在这里`mappedTargetReads`，`offtargetmappedReads`是根据映射读取计算的，因此，我想细分`mappedReads`切片并表示`mappedTargetReads`，`offtargetmappedReads`在 内`mappedReads`。

或者是否可以在一个 Rplot 中绘制两个不同的饼图？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-28T10:05:57.643

这会产生一个带有两个饼图的图：

```
par(mfrow = c(1,2))
pie(c(mappedReads,unmappedReads),labels=labels[1:2], main = "Global")
pie(c(mappedTargetReads,offtargetmappedReads),labels=labels[3:4],
    main = "MappedReads") 
```

![在此处输入图像描述](../Images/f0465d527caec88e511b0be6c78d58d8.png)

# php - 使用 mysqli_select_db 和 mysqli_connect 时出错

> ID：13103419
> 
> 赞同：0
> 
> 时间：2012-10-27T19:25:25.913
> 
> 标签：php, mysqli

我正在切换到 mysqli，因为`mysql_*`不再支持函数。当我尝试连接到我的数据库时，出现错误。这是我的代码。

```
<?php

//ob
//ob_start();

//session
session_start();

//connect to database
$error = "Could not connect to database";
mysqli_connect('','************','**********') or die($error);
mysqli_select_db('********************') or die($error);

$session_username = $_SESSION['username'];
$session_coin = $_SESSION['coins'];

?> 
```

错误：

> 无法连接到数据库

尝试使用mysqli时正确吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2020-03-29T20:10:29.297

不，这不是使用 mysqli 连接的正确方法。

正确的做法是这样的：

```
mysqli_report(MYSQLI_REPORT_ERROR | MYSQLI_REPORT_STRICT);
$mysqli = new mysqli('localhost', 'username', 'password', 'test_db');
$mysqli->set_charset('utf8mb4'); // always set the charset 
```

三个步骤：

1.  启用错误报告。
2.  创建 mysqli 类的实例。
3.  设置正确的字符集。

# java - 使用 Apache POI 将 .docx 转换为 html 并且没有文本

> ID：13103421
> 
> 赞同：2
> 
> 时间：2012-10-27T19:25:28.673
> 
> 标签：java, ms-word, apache-poi

我目前有一些将 .doc 文档转换为 html 的代码，但不幸的是，我用于将 .docx 转换为文本的代码没有获取文本并将其转换。下面是我的代码。

```
private void convertWordDocXtoHTML(File file) throws ParserConfigurationException, TransformerConfigurationException, TransformerException, IOException {
    XWPFDocument wordDocument = null;
    try {
        wordDocument = new XWPFDocument(new FileInputStream(file));
    } catch (IOException ex) {
        Exceptions.printStackTrace(ex);
    }

    WordToHtmlConverter wordToHtmlConverter = new WordToHtmlConverter(DocumentBuilderFactory.newInstance().newDocumentBuilder().newDocument());
    org.w3c.dom.Document htmlDocument = wordToHtmlConverter.getDocument();
    ByteArrayOutputStream out = new ByteArrayOutputStream();
    DOMSource domSource = new DOMSource(htmlDocument);
    StreamResult streamResult = new StreamResult(out);

    TransformerFactory tf = TransformerFactory.newInstance();
    Transformer serializer = tf.newTransformer();
    serializer.setOutputProperty(OutputKeys.ENCODING, "UTF-8");
    serializer.setOutputProperty(OutputKeys.INDENT, "yes");
    serializer.setOutputProperty(OutputKeys.METHOD, "html");
    serializer.transform(domSource, streamResult);
    out.close();

    String result = new String(out.toByteArray());
    acDocTextArea.setText(newDocText);
    String htmlText = result;

} 
```

任何关于为什么这不起作用的想法将不胜感激。ByteArrayOutput 应该返回整个 html，但它是空的并且没有文本。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-28T13:56:28.380

马克，您正在使用**仅支持`.doc`格式**的 HWPF 包，请参阅[此说明](http://poi.apache.org/#Mission+Statement)。`.docx`该文档还提到了通过**XWPF 包**为文件提供接口的尝试。然而，他们似乎缺乏人力资源，鼓励用户提交扩展。但是应该提供有限的功能，提取文本必须是其中之一。

您还应该看到这个问题：[How to Extract docx (word 2007 above) using apache POI](https://stackoverflow.com/q/3604799/772981)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-16T01:46:00.963

在这一点上我也很震惊。
现在我知道有一个 3rd 方 API 可以将 docx 转换为 html
工作正常
[https://code.google.com/p/xdocreport/wiki/XWPFConverterXHTML](https://code.google.com/p/xdocreport/wiki/XWPFConverterXHTML)

# php - 混淆正在传递的 php 变量

> ID：13103423
> 
> 赞同：1
> 
> 时间：2012-10-27T19:25:39.327
> 
> 标签：php, variables, obfuscation

我有一个通过 javascript 函数传递的 var，我希望在发送给用户之前对 var 进行混淆，然后在通过 php 返回时还原。

```
$data = "111:222:333:444"; 
```

正在生成 $data 并将其放入视图中（javascript 函数）

```
<img src="button.jpg" alt="" onclick="newfunc(111:222:333:444)" /> 
```

然后将其发送回服务器进行处理

反正有没有散列这个数字所以它看起来像

111:222:333:444 的“8f8fu8vu8fu8fhguf99fu8fu8fu8fu”？

是否有任何类似于 md5 的 php 函数可以让您恢复对 var 进行去混淆处理？

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-27T19:31:04.597

使用 javascript 对任何内容进行安全加密（真正混淆）是不可能的。

例如，有一个[用于 javascript 的 bluefish 加密库](http://dren.ch/js_blowfish/)，但由于相关的 javascript 函数需要知道私钥。进行加密的客户端/浏览器必须知道密钥，因此它不能，按照设计，安全。

您可以做的是信任“通过默默无闻的安全性”（但同样，客户端安全性永远无法工作）并对字符串进行 base64 编码以“混淆它”..

每个知道自己在做什么的人都将能够恢复您在混淆字符串方面所做的任何尝试......

但！您可以将字符串发送到您的服务器（通过 ajax 调用），让它异步加密明文并返回真正混淆的文本.. 然后服务器可以解密（再次通过 ajax 调用）。

希望有帮助....

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-27T19:31:35.100

好吧，如果您使用 base64，您可以将其解码回来，其他人也可以。（您希望对其保密的用户。）

因此，我建议您制作一些随机模式并附加/混合数据，并在您取回数据后对其进行清理。

# firefox - css3 中的 Firefox 列

> ID：13103433
> 
> 赞同：1
> 
> 时间：2012-10-27T19:26:47.300
> 
> 标签：firefox, css

这是我正在构建的网站的链接：

[http://joshrcook.com/test](http://joshrcook.com/test)

在不弄乱 Firefox 的列的情况下，我无法让图片触及顶部和底部。我可以将图像向左浮动，但这似乎破坏了-moz-column-count。有任何想法吗？

这是图片的html：

```
<div id="img-wrapper">
    <?php for($i = 1; $i <=25; $i++) { ?>
    <div class="photo">
        <a href="#"><img src="img/arrow_up_alt1_32x32.png" class="overlay overlay1" /></a>
        <a href="#"><img src="img/fullscreen_32x32.png" class="overlay overlay2" /></a>
        <a href="#"><img src="img/heart_fill_32x38.png" class="overlay overlay3" /></a>
        <?php echo '<img src="img/tumblr_img_' . $i . '.jpg" class="main_photo" />'; ?>
    </div>
    <?php } ?>

</div> 
```

这是CSS：

```
 #img-wrapper {
  width: 960px;
  -moz-column-count: 3;
  -webkit-column-count: 3;
  column-count: 3;
}

.photo {
  width: auto;
  position: relative;
  width: 320px;

}

.photo a img.overlay {
  position: absolute;
  z-index: 10;
  top: 0;
  left: 0;
}

.photo a img.overlay1 {
  left: 25%;
}

.photo a img.overlay2 {
  left: 45%;
}

.photo a img.overlay3 {
  left: 65%;
}

.photo img.main_photo {
  width: 320px;
  border-radius: 10px;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-27T23:40:11.927

```
.photo {
  width: auto;
  position: relative;
  width: 320px;
  margin-bottom: -5pt;
} 
```

以上似乎在 Chrome（发行版）和 IE9 中运行良好。我没有其他浏览器可以在这台机器上测试，但我会从那里开始。

也可能是因为浏览器如何解释您的空格（边距/填充看起来都设置为 0，所以问题*不*应该存在。尝试消除每个空格中的空格`<div class="photo"></div>`，看看有什么作用。

# jsoup - 未处理的内容类型错误

> ID：13103443
> 
> 赞同：0
> 
> 时间：2012-10-27T19:28:52.803
> 
> 标签：jsoup, gson

获取 Gson 字符串的代码：

```
String data = Jsoup.connect("http://localhost:9000/GetJson").get().data(); 
```

来自 host:9000/GetJson 的“HTML”内容：

```
{"Backend":"{\"onlineGames\":{},\"games\":{}}"} 
```

我去这个错误信息：

```
Unhandled content type. Must be text/*, application/xml, or application/xhtml+xml 
```

有人可以告诉我我错在哪里:(
非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-28T22:30:44.600

Jsoup 不支持 Gson/Json，仅支持 Html、Xhtml 和 Xml。
如果要使用 jsoup，则必须将 gson 字符串包装到 html 中。但是你想做什么？也许我们可以在那里帮助你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-07-07T06:40:44.967

```
 Document doc = Jsoup.connect(url).ignoreContentType(true).get(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-03-02T04:45:50.563

使用**ignoreContentType(true)**：

```
String data = Jsoup.connect("http://localhost:9000/GetJson").get().ignoreContentType(true).data( 
```

# .net - 在 .Net 中为 64 位机器创建快捷方式 - 仅编译为 64 位应用程序

> ID：13103445
> 
> 赞同：0
> 
> 时间：2012-10-27T19:28:58.783
> 
> 标签：.net, visual-studio, 64-bit, desktop-shortcut

> **可能重复：**
> [在目录中创建应用程序快捷方式](https://stackoverflow.com/questions/234231/creating-application-shortcut-in-a-directory)

有很多代码显示如何在 .Net 中创建快捷方式，但它仅在编译为 32 位应用程序时才有效。您不能在 64 位应用程序中使用 IWshRuntimeLibrary.WshShell。

有谁知道如何在 64 位应用程序中创建快捷方式？

请注意，我也不是在寻找安装时的方法。这是为了安装后的目的。

而且我知道关于 SO 的这篇文章（[在 Windows 7 框（64 位）上从 vb.net 创建快捷方式](https://stackoverflow.com/questions/3037294/create-shortcut-from-vb-net-on-windows-7-box-64-bit)），但这不是问题的正确答案。这个问题是 64 位的，这个人给出了 32 位的答案并说“只编译 32 位”。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-27T20:04:38.380

您不需要使用特殊的库来创建快捷方式，您可以直接从 C# 或 VB.NET 程序中使用 Shell32 自动化对象。开始使用 Project + Add Reference，Browse 选项卡，选择 c:\windows\system32\shell32.dll

然后编写这样的代码来创建 .lnk 文件：

```
 // Creating a link named "test" on the desktop
    string lnkDir = Environment.GetFolderPath(Environment.SpecialFolder.DesktopDirectory);
    string lnkName = "test";

    // Create an empty .lnk file so we can create an object for it
    string lnkPath = System.IO.Path.Combine(lnkDir, lnkName) + ".lnk";
    System.IO.File.WriteAllBytes(lnkPath, new byte[] { });

    // Initialize a ShellLinkObject for that .lnk file
    Shell32.Shell shl = new Shell32.ShellClass();
    Shell32.Folder dir = shl.NameSpace(lnkDir);
    Shell32.FolderItem itm = dir.Items().Item(lnkName + ".lnk");
    Shell32.ShellLinkObject lnk = (Shell32.ShellLinkObject)itm.GetLink;

    // We'll just dummy a link to notepad
    lnk.Path = Environment.GetFolderPath(Environment.SpecialFolder.System) + @"\notepad.exe";
    lnk.Description = "Anything goes here";
    lnk.Arguments = @"c:\sample.txt";
    lnk.WorkingDirectory = @"c:\";

    // And dummy an icon (it will the one used by cmd.exe)
    lnk.SetIconLocation(Environment.GetFolderPath(Environment.SpecialFolder.System) + "cmd.exe", 1);

    // Done, save it
    lnk.Save(lnkPath); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-27T19:54:34.847

我建议您使用 COM 而不是 WScript 来创建快捷方式。
看看这个教程：[创建和修改快捷方式](http://www.vbaccelerator.com/home/NET/Code/Libraries/Shell_Projects/Creating_and_Modifying_Shortcuts/article.asp)
您会发现`ShellLink`.NET 类可以让您操作快捷方式。

# xaml - WinRT中如何实现容器间的平滑过渡？

> ID：13103450
> 
> 赞同：2
> 
> 时间：2012-10-27T19:29:30.767
> 
> 标签：xaml, windows-8, windows-runtime, expression-blend, winrt-xaml

我有一个正在尝试移植到 WinRT 的 Silverlight 4 游戏。它大量使用 Blend 的 FluidMoveBehavior 来动画容器之间的项目过渡（项目从一个容器浮动到另一个容器）。WinRT 似乎缺少此功能，我一直无法找到替代品。

在 Silverlight 中，这个 XAML 完成了所有工作：

```
<ItemsPanelTemplate x:Key="TransitioningPanelTemplate">
    <StackPanel Orientation="Horizontal" Margin="0" Background="Transparent">
        <i:Interaction.Behaviors>
            <il:FluidMoveBehavior AppliesTo="Children" Duration="0:0:0.400" Tag="DataContext">
                <il:FluidMoveBehavior.EaseY>
                    <BackEase EasingMode="EaseInOut" Amplitude="0.35" />
                </il:FluidMoveBehavior.EaseY>
                <il:FluidMoveBehavior.EaseX>
                    <BackEase EasingMode="EaseInOut" Amplitude="0.35" />
                </il:FluidMoveBehavior.EaseX>
            </il:FluidMoveBehavior>
        </i:Interaction.Behaviors>
    </StackPanel>
</ItemsPanelTemplate> 
```

[我按照这篇文章](https://stackoverflow.com/questions/12998837/is-fluidmovebehavior-available)中的建议查看了转换，但这似乎只能在单个容器中工作。

是否有一些使用允许这种行为的转换？如果没有，是否有人知道可能的替代方案？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T08:44:32.927

尝试这个

```
<ItemsPanelTemplate x:Key="TransitioningPanelTemplate">
<StackPanel Orientation="Horizontal" Margin="0" Background="Transparent">
     <StackPanel.ChildrenTransitions>
      <TransitionCollection>
<Your Transitions />
</TransitionCollection>
</StackPanel.ChildrenTransitions>
    <i:Interaction.Behaviors>
        <il:FluidMoveBehavior AppliesTo="Children" Duration="0:0:0.400" Tag="DataContext">
            <il:FluidMoveBehavior.EaseY>
                <BackEase EasingMode="EaseInOut" Amplitude="0.35" />
            </il:FluidMoveBehavior.EaseY>
            <il:FluidMoveBehavior.EaseX>
                <BackEase EasingMode="EaseInOut" Amplitude="0.35" />
            </il:FluidMoveBehavior.EaseX>
        </il:FluidMoveBehavior>
    </i:Interaction.Behaviors>
</StackPanel> 
```

# mysql - 多对多关系中的Mysql数据库设计

> ID：13103461
> 
> 赞同：1
> 
> 时间：2012-10-27T19:31:11.740
> 
> 标签：mysql, database, database-design

我正在设计一个数据库，它将产品和携带它们的商店联系起来。

许多商店将销售相同的产品。同样，显然，每家商店将有许多类型的产品。

我试图对制作表格的最佳方法进行一些研究，但我在网上阅读的所有资源在技术上都非常耗费精力并且在逻辑上形式化，以至于无法直观地理解他们在说什么。

我一直听到人们说你应该使用连接表，但我不明白这将如何适用于我的情况。

我想做的是为“商店”类别创建一行，然后有单独的行“product_1”、“product_2”、“product_x”等。我会在其中列出商店销售的每种产品，但我不确定如果这是好的形式。

此外，一些商店可能有 50 种产品，这意味着我需要 50 行。我不确定是否有办法解决这个问题。

最后，我的问题是，按照标准约定，这种关系的理想数据库结构是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-27T19:35:29.000

我会有三张桌子。一个用于商店 [name, id & info]。一个用于项目 [名称、ID 和信息]。一个链接两个 [relation id, store id & item id]。

这将使您能够更改商店和商品数据，而无需更新您的关系表。

因此，如果您想要商店中的商品，您可以在关系表中搜索与商店 ID 匹配的商品。反之亦然，如果您想要拥有商品的商店，则在关系表中搜索商品 id 并返回带有该商品的商店 id。

基本必需品示例：

```
STORE:
*********************
storeID    storeName
*********************
1          store1
2          store2
3          store3

ITEMS:
*********************
itemID    itemName
*********************
1          item1
2          item2
3          item3

RELATIONS:
*********************
storeID    itemID
*********************
1          1
1          2
2          1
2          3
3          2
3          3 
```

因此，要查找 store1 有哪些项目，您将获得 storeID 为 1，然后搜索关系表以查找哪些行的 store ID = 1，这将返回第一行和第二行，这告诉您 store1 有项目 1 和 2 . 类似地，要查找哪些商店 cary item2，您将获得 item2 的 ID，即 2，在关系表中搜索 itemID = 2，这将返回第 2 行和第 5 行，这告诉您商店 1 和 3 有 item2。

# c++ - 使用类绑定功能调用成员函数

> ID：13103462
> 
> 赞同：1
> 
> 时间：2012-10-27T19:31:20.217
> 
> 标签：c++

如何实现一个非常简单的 boost::bind 版本，它不绑定参数，但提供了一种在 c++ 类中调用成员函数的方法。

这是我的第一次尝试：

```
#include <iostream>

struct Foo {
    void x(int i) { std::cout << "Foo " << i << std::endl; }
};

struct Bar {
    void y(int i) { std::cout << "Bar " << i << std::endl; }
};

template<typename A1, typename I, typename M>
struct Binder {
    Binder(I i, M m) : i_(i), m_(m) { }
    void operator()(A1 a1) {
        (i_->*m_)(a1);
    }

    I i_;
    M m_;
};

template<typename A1, typename I, typename M>
Binder<A1, I, M> my_bind(I i, M m) {
    return Binder<A1, I, M>(i, m);
}

int main(int argc, const char *argv[])
{
    Foo foo;
    Bar bar;

    Binder<int, Foo*, void (Foo::*)(int)> b1 = my_bind<int>(&foo, &Foo::x);
    Binder<int, Bar*, void (Bar::*)(int)> b2 = my_bind<int>(&bar, &Bar::y);

    b1(1);
    b2(2);

    return 0;
} 
```

上面的实现确实有效，并将打印：

```
Foo 1
Bar 2 
```

问题是 my_bind 的两次调用返回了不同类型的对象。如何更改程序，以便 my_bind 将返回仅取决于 A1 的类型。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-27T20:14:46.570

> 问题是 my_bind 的两次调用返回了不同类型的对象。如何更改程序，以便 my_bind 将返回仅取决于 A1 的类型。

可以使用[类型擦除](http://www.artima.com/cppsource/type_erasure.html)。

简而言之：

1.  使用您喜欢的接口创建**抽象**类。它可能有一些模板参数。（下面代码中的AbstractBinder）
2.  创建实现此接口的**具体类。**具体类可能比接口有更多的模板参数。（下面的Binder类）
3.  使用模板构造函数创建**Holder类 - 它创建****具体**类，但仅存储指向它的基本**抽象**类的指针。因此，**Holder**类只有 Abstract 接口所需的模板参数，而其构造函数具有**Concrete**类所需的所有其余模板参数。（下面的BinderHolder类）

[现场演示](http://ideone.com/JLpAkj)

用法：

```
int main()
{
    Foo foo;
    Bar bar;

    BinderHolder<int> b1 = my_bind<int>(&foo, &Foo::x);
    BinderHolder<int> b2 = my_bind<int>(&bar, &Bar::y);

    b1(1);
    b2(2);
} 
```

完整代码：

```
template<typename A1>
struct AbstractBinder
{
    virtual void call(A1 a1)=0;
    virtual AbstractBinder<A1> *clone()=0;
    virtual ~AbstractBinder(){}
};

template<typename A1, typename I, typename M>
struct Binder : AbstractBinder<A1>
{
    Binder(I i, M m) : i_(i), m_(m) { }
    void call(A1 a1)
    {
        (i_->*m_)(a1);
    }
    virtual AbstractBinder<A1> *clone()
    {
        return new Binder(*this);
    }
    I i_;
    M m_;
};

template<typename A1>
class BinderHolder
{
    AbstractBinder<A1> *ptr;
    BinderHolder &operator=(const BinderHolder&);
public:
    template<typename I, typename M>
    BinderHolder(I i, M m)
        : ptr(new Binder<A1,I,M>(i,m))
    {
    }
    BinderHolder(const BinderHolder &rhs)
        : ptr(rhs.ptr->clone())
    {
    }
    ~BinderHolder()
    {
        delete ptr;
    }
    void operator()(A1 a1)
    {
        ptr->call(a1);
    }
};

template<typename A1, typename I, typename M>
BinderHolder<A1> my_bind(I i, M m) {
    return BinderHolder<A1>(i, m);
}

#include <iostream>

struct Foo {
    void x(int i) { std::cout << "Foo " << i << std::endl; }
};

struct Bar {
    void y(int i) { std::cout << "Bar " << i << std::endl; }
};

int main()
{
    Foo foo;
    Bar bar;

    BinderHolder<int> b1 = my_bind<int>(&foo, &Foo::x);
    BinderHolder<int> b2 = my_bind<int>(&bar, &Bar::y);

    b1(1);
    b2(2);
} 
```

PS如果您确定所有**具体**类的大小相同，那么您可以将堆分配替换为固定大小缓冲区内的新放置，并添加 static_assert 以确保安全。

# c# - 如何使用 WPF 将相关对象属性绑定到 DataGridTemplateColumn 中的 TextBlock

> ID：13103463
> 
> 赞同：0
> 
> 时间：2012-10-27T19:31:19.663
> 
> 标签：c#, wpf, binding

我有两个对象练习和目标，每个练习都有一个目标。在后面的代码中，我设置了练习 DataGrid 的 ItemsSource

```
 dgExercicios.ItemsSource = Repositorio<Exercicio>.GetAll(); 
```

在我的 XAML 中。

```
 <DataGrid Name="dgExercicios" CellStyle="{StaticResource CellStyle}" CanUserSortColumns="True" CanUserResizeColumns="True" AutoGenerateColumns="False">
         <DataGrid.Columns>
             <!--This bind works (Exercice.Nome)-->
             <DataGridTextColumn Header="Nome" Binding="{Binding Nome}" Width="200"   />
             <!--This bind DONT works (I Trying to bind to Exercise.Objective.Descricao)-->                     
             <DataGridTemplateColumn Header="Objetivo"  Width="80" >
                     <DataGridTemplateColumn.CellTemplate>
                         <DataTemplate  >
                             <StackPanel>
                                 <TextBlock Text="{Binding Path=Objective.Descricao}" T />
                              </StackPanel>
                          </DataTemplate>
                     </DataGridTemplateColumn.CellTemplate>
                 </DataGridTemplateColumn>
          </DataGrid.Columns>
      </DataGrid> 
```

我想要做的是将属性Exercice.Objective.Descricao 绑定到Exercice.Nome 上的TextBlock

另一个问题，在这种情况下是否需要 DataGridTemplateColumn ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-27T20:22:39.607

如果Exercise 类有一个名为Objective 的属性，并且Objective 类有一个名为Descricao 的属性，那么它将起作用。

```
public class Exercicio
{
    public string Nome { get; set; }
    public Objective Objective { get; set; }

    public Exercicio(string nome, Objective objective)
    {
        this.Nome = nome;
        this.Objective = objective;
    }
}

public class Objective
{
    public string Descricao { get; set; }

    public Objective(string d)
    {
        this.Descricao = d;
    }
}

public MainWindow()
{
    InitializeComponent();

    var items = new ObservableCollection<Exercicio>(new[] {
        new Exercicio("Exercicio1", new Objective("Objective1")),
        new Exercicio("Exercicio2", new Objective("Objective2")),
        new Exercicio("Exercicio3", new Objective("Objective3"))
    });

    dgExercicios.ItemsSource = items;
} 
```

如果您只想显示一个字符串，则不需要 DataGridTemplateColumn：

```
<!-- Works now (also in a normal text column) -->
<DataGridTextColumn Binding="{Binding Path=Objective.Descricao}" Header="Objetivo" Width="80" /> 
```

# java - 在java中将数组数组写入文本文件？

> ID：13103466
> 
> 赞同：-1
> 
> 时间：2012-10-27T19:31:55.630
> 
> 标签：java, file, save

我创建了一个包含 statsArray 类的 10 个实例的数组，并且在每个实例中我都有另一个包含数据的数组。我想将其写入文本文件以保存数据，但它一直给我一个错误。numbersarray 是一个字符串数组，我试图将 statsArray 中的数字复制到

```
private void saveData(){
    try{

    for(int i = 0;i < statsArray.length;i++){
        numbersArray[i] = "";
        for(int j = 0;j < statsArray[i].getValues()[j];j++){
        numbersArray[i] += statsArray[i].getValues()[j];
        }   

    }
    BufferedWriter bw = new BufferedWriter(new FileWriter("SavedData.txt"));
    for(int i = 0;i < numbersArray.length;i++){
       // for(int j = 0; j < statsArray[i].getValues()[j];j++) { 
        bw.write(numbersArray[i] + " ");
        bw.newLine();
        //}
    }
    bw.close(); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-27T19:38:55.280

这种方法会更好吗？

循环遍历 statsArray 中的每个 MyObject 实例，然后循环遍历实例的 numberArray 中的每个字符串，并将其附加到缓冲写入器。

```
BufferedWriter bw = new BufferedWriter(new FileWriter("SavedData.txt"));
for (MyObject mo : statsArray)
{
    for (String value : mo.getValues()) 
    {
        bw.write(value + " ");
        bw.newLine();
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-27T19:44:38.650

```
for(int j = 0;j < statsArray[i].getValues()[j];j++){
    numbersArray[i] += statsArray[i].getValues()[j];
} 
```

`statsArray[i].getValues()[j]`可能超出范围。

你应该写如下；

```
int[] values = statsArray[i].getValues();
for(int j=0; j<values.length; j++) { 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-27T19:44:07.777

你在哪里分配 numbersArray？你必须做

```
numbersArray= new String[statsArray.length] 
```

在第一个 for 循环之前。

# hadoop - Windows 服务器上的 Hadoop：Windows 服务器的 HDInsight 是否支持在域控制器上运行？

> ID：13103467
> 
> 赞同：0
> 
> 时间：2012-10-27T19:31:57.607
> 
> 标签：hadoop, windows-server-2008-r2, bigdata, azure-hdinsight

在我的演示机上：我有 Windows Server 2008 R2，它也是域控制器。我通过 Web 平台安装程序为 Windows 服务器安装了 HDInsight，但在 IIS 下没有看到可以管理集群的站点。所以只是想知道域控制器是否不支持 HDInsight？或者我应该检查任何其他配置。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-28T00:05:37.427

已回复（但我需要至少 30 个字符才能在此处提交内容，否则 Stack Overflow 会提示我的回复太短）：[http ://social.msdn.microsoft.com/Forums/en-US/hdinsight/thread/ 71ba4f1b-af9c-40d7-85e6-db3fbcaa7508](http://social.msdn.microsoft.com/Forums/en-US/hdinsight/thread/71ba4f1b-af9c-40d7-85e6-db3fbcaa7508)

2012 年 10 月 31 日更新：非正式地，Microsoft 同意不支持在安装了 AD 的服务器上安装 HDInsight。现在，我想确认一个域*成员*会没事的，但这只会在几天后。

# pdf - 为什么从 PDF 转换为 GIF 的 Imagemagick 在固定到 Pinterest 时会出现“下雪”？

> ID：13103474
> 
> 赞同：0
> 
> 时间：2012-10-27T19:32:52.103
> 
> 标签：pdf, imagemagick, pinterest, imagemagick-convert

我正在使用 Imagemagick 将单页 PDF 转换为 GIF 图像。这是我从 PHP 运行的 exec 命令：

```
exec("convert -density 600x600 -background white ".$filenamePDF."[0] -scale 700x989 ".$filenameJPG."[0]"); 
```

源 PDF：[http ://www.buzzbuzzbingo.com/images/pdf/185/InternetSafety-4185.pdf](http://www.buzzbuzzbingo.com/images/pdf/185/InternetSafety-4185.pdf)

生成的 GIF：[http ://www.buzzbuzzbingo.com/images/pdf/screenshot/185/InternetSafety-4185.gif](http://www.buzzbuzzbingo.com/images/pdf/screenshot/185/InternetSafety-4185.gif)

一切正常，但是当我将这张图片固定到 Pinterest 时，它看起来像一台坏掉的旧黑白电视一样“下雪”。

这是固定页面上的“下雪”图像：http: [//pinterest.com/pin/559783428652943247/](http://pinterest.com/pin/559783428652943247/)

这是我如何转换 PDF 的问题还是源 PDF 的问题？或者这可能是 Pinterest 如何生成他们的版本的问题？

我应该补充一点，在固定时，它看起来像缩略图一样好，但它在固定页面上显得“下雪”，点击查看完整尺寸看起来很完美。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-12-15T18:51:33.893

我通过将其转换为 JPG 而不是 GIF 来解决我的问题。

Pinterest 回复了我的错误报告：

> “看起来这个问题与您如何使用 Imagemagick 转换此图像有关。不幸的是，我们不提供有关使用此程序的支持，因此您需要在 Imagemagick 中闲逛，看看您是否可以创建一个有效的文件。 "

我可以确认，通过改用 JPG，Pinterest 不再存在下雪图像问题。

# php - 如何在 Linux 上使用 PHP 连接到远程 MSSQL 数据库？

> ID：13103480
> 
> 赞同：1
> 
> 时间：2012-10-27T19:33:26.043
> 
> 标签：php, sql-server, database, linux

我有一个问题，似乎没有一个严格的解决方案。

我正在使用 PHP 运行 Linux 服务器，并且需要连接到远程服务器上的 MSSQL 数据库（我无法控制此服务器）。与我的主人交谈时，他们说不可能在 linux 机器上安装 MSSQL 扩展，因为它们仅在 Windows 服务器上可用。所以，我想看看我还有什么其他选择。

有什么想法可以在 linux 机器上做到这一点吗？！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-27T19:39:59.167

> 在 linux 机器上安装 MSSQL 扩展是不可能的

他们撒谎了。这是可能的，但它需要`FreeTDS`编译。

其他解决方案是使用其他主机（带有 windows）作为 MSSQL 服务器的代理，并通过 SOAP/REST 与其通信

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-27T19:43:53.567

你必须通过 ODBC 连接.. odbc_connect() 等等.. 微软有这个[http://www.microsoft.com/en-gb/download/details.aspx?id=28160](http://www.microsoft.com/en-gb/download/details.aspx?id=28160)的驱动程序.. （编辑) 我在没有发布任何问题的情况下做到了这一点……odbc_connect 的 php.net 网站甚至在手册[http://php.net/manual/en/function.odbc-connect.php中提供了 mSSQL 示例](http://php.net/manual/en/function.odbc-connect.php)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-27T19:37:59.257

也许这有帮助，将其发送到您的服务器主机：

[http://pointbeing.net/weblog/2010/05/successful-microsoft-sql-server-support-for-php-on-linux.html](http://pointbeing.net/weblog/2010/05/successful-microsoft-sql-server-support-for-php-on-linux.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-27T19:38:13.703

通常会安装一个数据库模块，但在您的情况下，您可以尝试使用 REST-API 与 MSSQL 数据库通信。但这必须安装在第二台服务器上，例如数据库服务器本身。

# prolog - 带有列表的 Prolog 列表

> ID：13103482
> 
> 赞同：1
> 
> 时间：2012-10-27T19:33:35.047
> 
> 标签：prolog

我是 Prolog 的新手 我有这段代码（如果它不是很容易阅读，我很抱歉）

```
AdjOfAll(State,[FreeSpace],[Result]):-
     Adj(State,FreeSpace,Result).
AdjOfAll(State,[Space|NextSpace],[X|Xs]):-
     AdjOfAll(State,NextSpace,Xs),
     Adj(State,Space,X). 
```

我的问题是 Adj 返回`[ (element_1), ... , (element_n) ]`

我对 AdjOfAll 的目标是获得，

```
[ ( element_1), ..., (element_n), (element_1_from 2nd adj), ... ] 
```

但我明白了

```
[ [ ( element_1), ... ,(element_n)] , [ (element_1_from 2nd adj) ], ... ] 
```

我希望它可以理解我想说的话，抱歉英语不好

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-28T07:31:20.070

看看[flatten](http://www.swi-prolog.org/pldoc/doc_for?object=flatten/2) /2 是否可以帮助您获得正确的输出。将它放在对 AdjOfAll/3 的顶级调用之后。

```
...
AdjOfAll(State, NextSpace, ResultNested),
flatten(ResultNested, Result),
... 
```

顺便说一句，您确定您的谓词命名正确吗？通常它们是*小写*的。

# android - 如何在按钮上设置位图？

> ID：13103484
> 
> 赞同：2
> 
> 时间：2012-10-27T19:33:45.817
> 
> 标签：android, image, image-processing, bitmap

我只有一个简单的问题。如何在按钮上设置位图？我用方法

```
.setBackgroundResource(int resid) 
```

当我有可绘制资源时。但是我可以为位图做什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-27T19:39:18.263

使用`ImageButton`, 和调用`setImageBitmap()`来设置前景图像。`setBackgroundResource()`是用于按钮背景的，需要是 a`StateListDrawable`才能生效。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-27T19:40:34.390

呼叫`setImageBitmap`您的按钮。

```
 myButton.setImageBitmap(myBitmap); 
```

# jquery-ui - Rails 上 jQuery UI Bootstrap 单选按钮的问题

> ID：13103486
> 
> 赞同：0
> 
> 时间：2012-10-27T19:33:56.190
> 
> 标签：jquery-ui, twitter-bootstrap, ruby-on-rails-3.2

由于[这个 gem](https://github.com/kristianmandrup/jquery-ui-bootstrap-rails) ，我相信我已经成功地将[jQuery UI Bootstrap](https://github.com/addyosmani/jquery-ui-bootstrap/)与 Rails 集成，因为 datepicker 似乎工作正常。

我正在尝试生成一个单选按钮集，并且在 jQuery UI 功能和 Bootstrap 样式方面遇到了一些问题。

我有以下erb：

```
<div class="ui-buttonset">
  <%= f.radio_button :available, true, checked: true, class: 'ui-helper-hidden-accessible' %>
  <%= label :available, 'Available', value: true, class: 'ui-button ui-widget ui-corner-left' %>
  <%= f.radio_button :available, false, class: 'ui-helper-hidden-accessible' %>
  <%= label :available, 'Unavailable', value: false, class: 'ui-button ui-widget ui-corner-right' %>
</div> 
```

使用 javascript`$('.ui-buttonset').buttonset();`和`$('button').button();`，但当我悬停、单击等时没有任何反应。据我所知，UI 元素、选中的属性或其他任何内容都没有变化。我是否需要为此功能手写 javascript，还是缺少某些东西？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T02:51:46.460

该问题似乎是[Bootstrap 和 jQuery UI Bootstrap 之间的冲突](https://github.com/addyosmani/jquery-ui-bootstrap/issues/71)。也许最好手动将javascript直接添加到我的`vendor`目录而不是依赖gem。

# objective-c - iOS 6重新显示视图后错误定位TableViews

> ID：13103487
> 
> 赞同：0
> 
> 时间：2012-10-27T19:33:57.687
> 
> 标签：objective-c, ios6, autolayout

我的表格视图有问题。

有 3 个表格视图，其水平位置通过 UISegmentControl 进行更改。现在，如果我打开它上面的另一个视图（通过 presentViewController）并再次关闭它，则表视图位置会被设置回来，但其他一切都是以前的样子。

viewDidAppear/viewDidDisappear 方法中没有代码。

任何想法如何解决这一问题？也许自动布局有问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T03:44:50.717

尝试从文件检查器中取消选中控件的“使用自动布局”属性，并使用大小检查器调整控件的位置

# vb.net - 确定在调整大小时是否更改了宽度或高度或两者？

> ID：13103490
> 
> 赞同：0
> 
> 时间：2012-10-27T19:34:43.680
> 
> 标签：vb.net, resize

我正在尝试为我的表单按比例调整大小，所以我需要知道每次调整大小，究竟是什么调整了 - 宽度、高度或两者兼而有之。如何从`System.EventArgs`参数中获取该信息？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-27T19:51:24.157

要按比例调整窗体上的子控件的大小，最好使用名为[TableLayoutPanel](http://msdn.microsoft.com/en-us/library/system.windows.forms.tablelayoutpanel.aspx)的本机 .NET 控件- 这样可以避免大量手动编码。否则，您可以使用[`Me.Size`](http://msdn.microsoft.com/en-us/library/system.windows.forms.form.size%28v=vs.90%29.aspx)并编写如下内容：

```
Dim _oldSize As Size
Dim _allowScaling As Boolean = False

Private Sub Form1_Load(sender As Object, e As System.EventArgs) Handles Me.Load
  '[...] perform initial setup of your controls
  _oldSize = Me.Size
  _allowScaling = True
End Sub

Private Sub Form1_Resize(sender As Object, e As System.EventArgs) Handles Me.Resize
  If Not _allowScaling Then Exit Sub

  Dim deltaSize As Size = Me.Size - _oldSize
  Dim deltaWidth As Integer = Math.Abs(deltaSize.Width)
  Dim deltaHeight As Integer = Math.Abs(deltaSize.Height)

  If deltaWidth > 0 And deltaHeight > 0 Then
    'both width and height have changed
  ElseIf deltaWidth > 0 Then
    'width has changed
  ElseIf deltaHeight > 0 Then
    'height has changed
  End If

  _oldSize = Me.Size
End Sub 
```

# .net - 为什么 IIS 工作进程会占用 Windows Server 2008 上的内存（与 Windows Server 2003 相比）

> ID：13103493
> 
> 赞同：0
> 
> 时间：2012-10-27T19:35:08.107
> 
> 标签：.net, windows, windows-server-2008

我的 .Net 4 Web 应用程序在 windows server 2003 38 位上运行。

我刚刚升级到带有 windows server 2008 64 位的新服务器。

我仍然让两台服务器运行相同的网络应用程序，

在 windows server 2003 上，应用程序占用 55k RAM

在 windows server 2008 上它需要 285K RAM

相同的应用程序，没有改变任何东西，新服务器上仍然没有用户。

我错过了什么？同一个应用程序可以在 Windows 2008 上占用更多内存吗？

谢谢

拉斐尔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-27T19:46:37.627

当应用程序启动时，它会保留内存。如果有更多内存可用，它将保留更多。

此外，64 位应用程序比 32 位应用程序使用更多空间。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-27T19:44:08.180

您可能会说“Windows Server 需要 5 倍的 RAM。天哪！！！！”

我更喜欢说“Windows Server 只使用了 200K 以上的初始空间。谁在乎呢？”

重要的是看看应用程序在负载下如何扩展。

我怀疑几个并发用户的差异会相对较小。我猜测，最终，Server 2008 会*更好地*扩展。

但唯一可以确定的方法是对其进行*测试*。

恕我直言...

# javascript - 当函数在 document.ready 中时执行函数 onclick

> ID：13103499
> 
> 赞同：2
> 
> 时间：2012-10-27T19:36:00.960
> 
> 标签：javascript, function, canvas

我对 Javascript 还很陌生，所以我希望能得到一些帮助。我一直在使用画布和 javascript 为图形制作动画。我有它，这样当页面加载时，它将把图表填充到预定的百分比。

我也有一些按钮，它们具有 onclick，目的是单击这些按钮以再次执行动画功能，但百分比不同。然而，点击它们并不是那么一回事。

你能给我的任何帮助都会很棒。

代码：

```
 window.onload = function(){
    //canvas initialization
    var canvas = document.getElementById("canvas");
    var ctx = canvas.getContext("2d");
    //dimensions
    var W = canvas.width;
    var H = canvas.height;
    //Variables
    var degrees = 0;
    var new_degrees = 0;
    var difference = 0;
    var color = "#c70505"; //green looks better to me
    var bgcolor = "#222";
    var text;
    var animation_loop, redraw_loop;

    function init()
    {
        //Clear the canvas everytime a chart is drawn
        ctx.clearRect(0, 0, W, H);

        //Background 360 degree arc
        ctx.beginPath();
        ctx.strokeStyle = bgcolor;
        ctx.lineWidth = 30;
        ctx.arc(W/2, H/2, 100, 0, Math.PI*2, false); //you can see the arc now
        ctx.stroke();

        //gauge will be a simple arc
        //Angle in radians = angle in degrees * PI / 180
        var radians = degrees * Math.PI / 180;
        ctx.beginPath();
        ctx.strokeStyle = color;
        ctx.lineWidth = 30;
        //The arc starts from the rightmost end. If we deduct 90 degrees from the angles
        //the arc will start from the topmost end
        ctx.arc(W/2, H/2, 100, 0 - 90*Math.PI/180, radians - 90*Math.PI/180, false); 
        //you can see the arc now
        ctx.stroke();

        //Lets add the text
        ctx.fillStyle = color;
        ctx.font = "50px bebas";
        text = Math.floor(degrees/360*100) + "%";
        //Lets center the text
        //deducting half of text width from position x
        text_width = ctx.measureText(text).width;
        //adding manual value to position y since the height of the text cannot
        //be measured easily. There are hacks but we will keep it manual for now.
        ctx.fillText(text, W/2 - text_width/2, H/2 + 15);
    }

    function draw(percent)
    {
        //Cancel any movement animation if a new chart is requested
        if(typeof animation_loop != undefined) clearInterval(animation_loop);

        //random degree from 0 to 360
        new_degrees = percent
        difference = new_degrees - degrees;
        //This will animate the gauge to new positions
        //The animation will take 1 second
        //time for each frame is 1sec / difference in degrees
        animation_loop = setInterval(animate_to, 1000/difference);
    }

    //function to make the chart move to new degrees
    function animate_to()
    {
        //clear animation loop if degrees reaches to new_degrees
        if(degrees == new_degrees) 
            clearInterval(animation_loop);

        if(degrees < new_degrees)
            degrees++;
        else
            degrees--;

        init();
    }

        draw(100);

}

<canvas id="canvas" width="300" height="300"></canvas>

<button onclick="draw(360)">100%</button>
<button onclick="draw(270)">75%</button> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-27T20:00:00.757

`draw`一旦您分配给的匿名函数`window.onload`完成执行，该函数就会超出范围。如果您改为在全局范围内声明函数，则可以在任何地方调用它们。这是一个工作[小提琴](http://jsfiddle.net/ne9Bq/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-27T20:03:05.917

试试我的更新：

```
<script>
//canvas initialization
var canvas = document.getElementById("canvas");
var ctx = canvas.getContext("2d");
//dimensions
var W = canvas.width;
var H = canvas.height;
//Variables
var degrees = 0;
var new_degrees = 0;
var difference = 0;
var color = "#c70505"; //green looks better to me
var bgcolor = "#222";
var text;
var animation_loop, redraw_loop;

function init()
{
    //Clear the canvas everytime a chart is drawn
    ctx.clearRect(0, 0, W, H);

    //Background 360 degree arc
    ctx.beginPath();
    ctx.strokeStyle = bgcolor;
    ctx.lineWidth = 30;
    ctx.arc(W/2, H/2, 100, 0, Math.PI*2, false); //you can see the arc now
    ctx.stroke();

    //gauge will be a simple arc
    //Angle in radians = angle in degrees * PI / 180
    var radians = degrees * Math.PI / 180;
    ctx.beginPath();
    ctx.strokeStyle = color;
    ctx.lineWidth = 30;
    //The arc starts from the rightmost end. If we deduct 90 degrees from the angles
    //the arc will start from the topmost end
    ctx.arc(W/2, H/2, 100, 0 - 90*Math.PI/180, radians - 90*Math.PI/180, false); 
    //you can see the arc now
    ctx.stroke();

    //Lets add the text
    ctx.fillStyle = color;
    ctx.font = "50px bebas";
    text = Math.floor(degrees/360*100) + "%";
    //Lets center the text
    //deducting half of text width from position x
    text_width = ctx.measureText(text).width;
    //adding manual value to position y since the height of the text cannot
    //be measured easily. There are hacks but we will keep it manual for now.
    ctx.fillText(text, W/2 - text_width/2, H/2 + 15);
}

function draw(percent)
{
    //Cancel any movement animation if a new chart is requested
    if(typeof animation_loop != undefined) clearInterval(animation_loop);

    //random degree from 0 to 360
    new_degrees = percent
    difference = new_degrees - degrees;
    //This will animate the gauge to new positions
    //The animation will take 1 second
    //time for each frame is 1sec / difference in degrees
    animation_loop = setInterval(animate_to, 1000/difference);
}

//function to make the chart move to new degrees
function animate_to()
{
    //clear animation loop if degrees reaches to new_degrees
    if(degrees == new_degrees) 
        clearInterval(animation_loop);

    if(degrees < new_degrees)
        degrees++;
    else
        degrees--;

    init();
}
draw(100);
</script>

<canvas id="canvas" width="300" height="300"></canvas>
<button onclick="draw(360)">100%</button>
<button onclick="draw(270)">75%</button> 
```

# iphone - 连续触摸 ccMenuItem

> ID：13103501
> 
> 赞同：0
> 
> 时间：2012-10-27T19:36:18.730
> 
> 标签：iphone, objective-c, ios, cocos2d-iphone

我正在使用 cocos2d 创建一个程序，其中我有 2 个 ccMenuItems 每个链接到一个图像：在这种情况下，一个是左箭头，另一个是右箭头。我的视图中心还有一个图像，它将根据按下的箭头旋转。

当我将手指放在左侧或右侧的两个菜单项之一上时，只要我的手指放在按钮上，我就希望中心图像旋转。那是我迷路的地方。我尝试使用以下代码：

```
- (BOOL)ccTouchBegan:(UITouch *)touch withEvent:(UIEvent *)event {

    CGPoint p = [touch locationInView:[touch view]];

    if (CGRectContainsPoint(leftArrow, p) || CGRectContainsPoint(rightArrow, p)) {
        return YES;
    }
    return NO;
}

- (void)ccTouchMoved:(UITouch *)touch withEvent:(UIEvent *)event {

    CGPoint p = [touch locationInView:[touch view]];

    if (CGRectContainsPoint(leftArrow, p)) {
        [gun runAction:[CCRepeatForever actionWithAction:[CCRotateTo actionWithDuration:0.2 angle:180]]];
    }
    if (CGRectContainsPoint(rightArrow, p)) {
        [gun runAction:[CCRepeatForever actionWithAction:[CCRotateTo actionWithDuration:0.2 angle:0]]];

    }

} 
```

使用此代码，当我按下两个菜单项之一时，甚至不会调用 ccTouchBegan 方法。仅当我触摸其他地方时才调用该方法。

按住 ccMenuItem 时如何处理连续动作。

感谢您的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-27T20:36:06.153

您必须继承 CCMenuItem 才能获得此类行为：

```
////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////

@interface RepeatMenuItem : CCMenuItemSprite 
{
    CGFloat speed;
}

@end 
```

和实施：

```
////////////////////////////////////////////////////////////////////
// RepeatMenuItem
////////////////////////////////////////////////////////////////////
#pragma mark -
#pragma mark RepeatMenuItem

@implementation RepeatMenuItem

-(void) selected
{
    [super selected];
    block_(self);
    speed = 0.8;
    [self schedule:@selector(repeatEvent:) interval:speed];
}

-(void) unselected
{
    [self unschedule:@selector(repeatEvent:)];
    [super unselected];
}

-(void) activate
{
}

-(void) repeatEvent:(id)sender
{
    CGFloat minSpeed = 0.05;

    if (speed > minSpeed)
        speed = speed/3;
    if (speed < minSpeed)
        speed = minSpeed;

    [self unschedule:@selector(repeatEvent:)];
    block_(self);
    [self schedule:@selector(repeatEvent:) interval:speed];
}

@end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-27T20:34:14.407

据我了解，您发布的两种方法在您的 CCLayer 的子类中。

首先，如果你想自己处理触摸，你必须删除菜单项。CCMenu 有更多的触摸优先级，如果它处理触摸击中任何菜单项，它会吞下它。这就是为什么只有当触摸在菜单项之外时才会收到触摸。

第二个，什么是`leftArrow`和`rightArrow`？你的箭头的矩形？

至于我，在这种情况下，我可以建议您运行更新方法并`rotation`在每次滴答时更改其中的中心图像的属性。我的意思是，如果没有一个箭头被触摸，旋转值将为 0，并且由于您触摸的箭头而具有正值或负值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-27T20:34:48.993

您可以扩展用于这些菜单项的 CCMenuItemWhatever 类，并覆盖“selected”和“unselected”方法。菜单抓取触摸（即 IT 在其自己的 ccTouchBegan 函数上回答“是”，因此触摸调度程序不会将其传播给您）。

```
-(void) selected{
    [super selected];
    // start your animation here
}

-(void) unselected {
    [super unselected];
    // stop your animation here.
} 
```

# grails - GSP 中的 Cookie 检索不起作用

> ID：13103502
> 
> 赞同：0
> 
> 时间：2012-10-27T19:36:25.770
> 
> 标签：grails, cookies, gsp

圣杯 2.1.1

在我的控制器中：

```
def someAction() {
   def projectVersionInstance = ProjectVersion.get(params.id)
   Cookie cookie = new Cookie("lastProjectVersion","${projectVersionInstance.id}")
   response.addCookie(cookie)
   .....
} 
```

在我的普惠制中：

```
<g:if test="${cookie(name: 'lastProjectVersion')}">
   ....
</g:if> 
```

`g:if`标签内的内容没有显示出来。我什至只是尝试了以下方法：

```
<g:cookie name="lastProjectVersion" /> 
```

我什么也得不到。我可以在控制器中显示它，我可以在浏览器 cookie 管理中看到它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T22:29:42.183

我也遇到了问题，它来自控制器中方法末尾的重定向。

当我使用它时，我丢失了我设置的所有 cookie，但没有 JSESSIONID 一个。

谷歌搜索后，我找到了这些帮助（http://www.zugiart.com/2011/04/http-redirect-and-cookies/）。

定义 cookie 时，将路径设置为 '/' ：cookie.path = '/'。

现在，您也可以重定向。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T08:20:39.870

我认为在下一次 http 调用之前，cookie 方法“cookie()”无法使用 cookie。为什么不简单地将 cookie 值从控制器传递给带有模型 var 的 gsp？

# jquery - JQuery Mobile 导航.. 左侧导航真的不可折叠吗？

> ID：13103506
> 
> 赞同：1
> 
> 时间：2012-10-27T19:36:41.443
> 
> 标签：jquery, css, html, mobile, navigation

只是一个快速的问题，看看是否有人考虑过这个问题......

如果您访问[http://jquerymobile.com/test/docs/lists/lists-collapsible.html](http://jquerymobile.com/test/docs/lists/lists-collapsible.html)并查看可折叠导航（滚动到最后一个示例，在底部又名“content-primary”），它看起来很可爱。 . 但是当声明为“内容辅助”时，似乎不可能在左导航中实现这种子菜单的“机制”

所以我的问题是.. 为什么不呢？一定有办法吗？

# python - 如何遍历字典中的每对项目

> ID：13103510
> 
> 赞同：3
> 
> 时间：2012-10-27T19:37:17.230
> 
> 标签：python, arrays, dictionary

我正在制作一个重力模拟器，我需要计算作用在每个物体上的合力。

为了做到这一点，我需要遍历字典中的每一对物体`(id: instance of Body class)`并获得这两个物体之间的引力。然后，我将所有的力相加并得到结果。

但是，如何在 Python 中只对字典中的每对项目进行一次迭代？如果将天体保存在一个列表中，那就很简单了：

```
for i in range(len(bodies)):
    for j in range(len(bodies) - i - 1):
        k = j - i + 1
        b1 = bodies[i]
        b2 = bodies[k] 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-27T19:41:59.807

[`values()`](http://docs.python.org/library/stdtypes.html#dict.values)和`itertools`'[`combinations`](http://docs.python.org/library/itertools.html#itertools.combinations)非常适合这个用例。

```
from itertools import combinations
for a, b in combinations(bodies.values(), 2):
    print a, b 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-27T19:40:33.983

您正在寻找`itertools.combinations()`：

一个例子：

```
In [76]: lis=['a','b','c','d']  #consider these as your dictionary items

In [77]: [x for x in combinations(lis,2)]
Out[77]: [('a', 'b'), ('a', 'c'), ('a', 'd'), ('b', 'c'), ('b', 'd'), ('c', 'd')] 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-27T19:42:46.150

该[`itertools`](http://docs.python.org/library/itertools.html#itertools.combinations)模块提供了一个很好的`combinations`方法，您可以使用：

```
from itertools import combinations

bodies = {}
# add bodies

for a,b in combinations(bodies.values(), 2):
    # a and b are a pair of bodies. do stuff
    pass 
```

顺便说一句，即使您使用列表，这仍然有效：

```
from itertools import combinations

bodies = []
# add bodies

for a,b in combinations(bodies, 2):
    pass 
```

# javascript - jQuery 根据文本输入的值填充选择列表

> ID：13103511
> 
> 赞同：5
> 
> 时间：2012-10-27T19:37:27.213
> 
> 标签：javascript, jquery, html, selection

我正在尝试编写允许根据文本框的输入值填充选择列表的代码。

例如：
如果用户在文本框中输入牛奶，选择列表将包含`"full fat", "Skimmed", "1% Milk"`

我一直在线并且找不到任何有关如何执行此操作的信息。我已经设法根据使用 jquery 的前一个选择来自动填充一个选择列表。但是，我找不到使用文本框时的解决方案。
感谢您查看我的问题！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-27T19:43:33.200

创建一个包含选项数组的对象：

```
selectOptions = {
   milk: ["full fat", "Skimmed", "1% Milk"]
} 
```

基于此，您可以将`<option>`标签附加到`<select>`触发`onchange`事件的时间`<textarea>`：

```
$('textarea').change(function() {
   if(selectOptions[$(this).val()]) { // does the selectOptions object have an entry for the value of the textarea?
       $.each(selectOptions[$(this).val()], function() { // for each array item do
           $('select').append('<option>' + this + '</option>'); // append an option tag for the array item
       });
   }
}); 
```

# mysql - 单行单列的 MySQL SUM

> ID：13103512
> 
> 赞同：1
> 
> 时间：2012-10-27T19:37:47.043
> 
> 标签：mysql, text, sum, row

这个问题是关于 MySQL 的。

我想知道我是否可以对单行中的一列求和，例如，我有一列写着“5 21 10”，而不是每个值一列（一个代表 5，一个代表 21，一个代表 10 )，我想在此列中以某种方式使用 SUM，它应该返回 36。

这是可能的 ？如果是，如何？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-27T19:39:38.913

如果您知道列名，则只需选择它们的总和。

```
SELECT col1 + col2 + col3 FROM MyTable; 
```

# ios - 设置 UITableViewCell NIB 和标签

> ID：13103514
> 
> 赞同：0
> 
> 时间：2012-10-27T19:37:58.917
> 
> 标签：ios, uitableview, uilabel

我正在尝试在我的笔尖中为 TableViewCell 设置一个标签。我收到一个错误，它在stackoverflow上出现了一点。

错误是

```
Crash: [<NSObject 0x941f4a0> setValue:forUndefinedKey:]: this class is not key value coding-compliant for the key displayName. 
```

问题是我不确定是否应该将表格视图单元（对象）连接到文件的所有者。如果我是，我不确定这应该是哪个出口？

![当前设置](../Images/23893f4e1e24d1260ebb1cc891f4cd58.png)

![将视图连接到文件所有者选项](../Images/3b4f14b7703d11f02dedf1a1f6108100.png)

![在此处输入图像描述](../Images/638ca2ba35b346d998bef0a028adf443.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-27T19:45:30.067

**成功的一些步骤**

1.  为表格视图单元格设置您自己的自定义单元格类
2.  不要使用文件的所有者
3.  将所有出口连接到表格视图单元，而不是文件的 ow
4.  不要忘记设置重用单元格标识符

# c# - 在 C# windows 应用程序中替换 Excel 单元格值时出现警告消息

> ID：13103516
> 
> 赞同：2
> 
> 时间：2012-10-27T19:38:01.217
> 
> 标签：c#, .net, vb.net, excel, replace

我用以下代码替换 C# 中的 excel 单元格值，但如果找不到特定字段，则显示以下警告对话框。

代码是这样的：

```
xlWorkSheet.Cells.Replace(
     "CustomerName", 
     "John", 
     missingValue, 
     missingValue, 
     missingValue, 
     missingValue, 
     missingValue, 
     missingValue); 
```

因此，如果任何 Excel 单元格中都不存在“CustomerName”，则会显示以下消息：

> **微软Office Excel**
> 
> Microsoft Office Excel 找不到任何要替换的数据。检查您的搜索格式和条件是否定义正确。如果您确定此工作簿中存在匹配的数据，则它可能位于受保护的工作表上。Excel 无法替换受保护工作表上的数据。

我需要停止弹出这个对话框，因为我有很多可以有字段或没有字段的单元格。

有什么答案吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-12-21T17:35:35.533

Application.DisplayAlerts = False

然后重新打开：

应用程序.DisplayAlerts = true

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-27T19:51:19.117

您可以先在工作表中检查“CustomerName”值吗？

快速谷歌搜索发现： http: [//msdn.microsoft.com/en-us/library/e4x1k99a (v=vs.80).aspx](http://msdn.microsoft.com/en-us/library/e4x1k99a(v=vs.80).aspx)

如果您在同一个工作表中有一个值，请调用替换代码并且不显示任何对话框。

# xaml - 从 Windows Store App 中的 FlipView 控件中删除键盘焦点矩形

> ID：13103520
> 
> 赞同：1
> 
> 时间：2012-10-27T19:38:15.623
> 
> 标签：xaml, microsoft-metro, windows-runtime, windows-store-apps

当您使用光标键左右导航时，有谁知道如何删除出现在 FlipView 控件中的键盘焦点矩形？

我以为我可以将 FocusVisualStyle 设置为 null，但这似乎不是 WinRT 中支持的属性。

肯定有什么方法可以隐藏那个烦人的虚线轮廓吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-02T23:39:54.830

我最终通过使用 Blend 创建以下样式并删除设置 FocusVisual 元素的情节提要来解决如何删除焦点矩形。我在下面包含了完整的样式，以防其他人使用。

```
<Style x:Key="NoFocusFlipViewStyle" TargetType="FlipView">
    <Setter Property="Background" Value="Transparent"/>
    <Setter Property="BorderThickness" Value="0"/>
    <Setter Property="TabNavigation" Value="Once"/>
    <Setter Property="IsTabStop" Value="False"/>
    <Setter Property="ScrollViewer.HorizontalScrollBarVisibility" Value="Hidden"/>
    <Setter Property="ScrollViewer.VerticalScrollBarVisibility" Value="Hidden"/>
    <Setter Property="ScrollViewer.IsHorizontalRailEnabled" Value="False"/>
    <Setter Property="ScrollViewer.IsVerticalRailEnabled" Value="False"/>
    <Setter Property="ScrollViewer.IsHorizontalScrollChainingEnabled" Value="True"/>
    <Setter Property="ScrollViewer.IsVerticalScrollChainingEnabled" Value="True"/>
    <Setter Property="ScrollViewer.IsDeferredScrollingEnabled" Value="False"/>
    <Setter Property="ScrollViewer.BringIntoViewOnFocusChange" Value="True"/>
    <Setter Property="ItemsPanel">
        <Setter.Value>
            <ItemsPanelTemplate>
                <VirtualizingStackPanel AreScrollSnapPointsRegular="True" Orientation="Horizontal"/>
            </ItemsPanelTemplate>
        </Setter.Value>
    </Setter>
    <Setter Property="Template">
        <Setter.Value>
            <ControlTemplate TargetType="FlipView">
                <Grid>
                    <VisualStateManager.VisualStateGroups>
                        <VisualStateGroup x:Name="FocusStates">
                            <VisualState x:Name="Focused">
                            </VisualState>
                            <VisualState x:Name="Unfocused"/>
                            <VisualState x:Name="PointerFocused"/>
                        </VisualStateGroup>
                    </VisualStateManager.VisualStateGroups>
                    <Border BorderBrush="{TemplateBinding BorderBrush}" BorderThickness="{TemplateBinding BorderThickness}" Background="{TemplateBinding Background}" Margin="3">
                        <Border.Resources>
                            <ControlTemplate x:Key="HorizontalNextTemplate" TargetType="Button">
                                <Border x:Name="Root" BorderBrush="{StaticResource FlipViewButtonBorderThemeBrush}" BorderThickness="{StaticResource FlipViewButtonBorderThemeThickness}" Background="{StaticResource FlipViewButtonBackgroundThemeBrush}">
                                    <VisualStateManager.VisualStateGroups>
                                        <VisualStateGroup x:Name="CommonStates">
                                            <VisualState x:Name="Normal"/>
                                            <VisualState x:Name="PointerOver">
                                                <Storyboard>
                                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetProperty="Background" Storyboard.TargetName="Root">
                                                        <DiscreteObjectKeyFrame KeyTime="0" Value="{StaticResource FlipViewButtonPointerOverBackgroundThemeBrush}"/>
                                                    </ObjectAnimationUsingKeyFrames>
                                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetProperty="BorderBrush" Storyboard.TargetName="Root">
                                                        <DiscreteObjectKeyFrame KeyTime="0" Value="{StaticResource FlipViewButtonPointerOverBorderThemeBrush}"/>
                                                    </ObjectAnimationUsingKeyFrames>
                                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetProperty="Fill" Storyboard.TargetName="Arrow">
                                                        <DiscreteObjectKeyFrame KeyTime="0" Value="{StaticResource FlipViewButtonPointerOverForegroundThemeBrush}"/>
                                                    </ObjectAnimationUsingKeyFrames>
                                                </Storyboard>
                                            </VisualState>
                                            <VisualState x:Name="Pressed">
                                                <Storyboard>
                                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetProperty="Background" Storyboard.TargetName="Root">
                                                        <DiscreteObjectKeyFrame KeyTime="0" Value="{StaticResource FlipViewButtonPressedBackgroundThemeBrush}"/>
                                                    </ObjectAnimationUsingKeyFrames>
                                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetProperty="BorderBrush" Storyboard.TargetName="Root">
                                                        <DiscreteObjectKeyFrame KeyTime="0" Value="{StaticResource FlipViewButtonPressedBorderThemeBrush}"/>
                                                    </ObjectAnimationUsingKeyFrames>
                                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetProperty="Fill" Storyboard.TargetName="Arrow">
                                                        <DiscreteObjectKeyFrame KeyTime="0" Value="{StaticResource FlipViewButtonPressedForegroundThemeBrush}"/>
                                                    </ObjectAnimationUsingKeyFrames>
                                                </Storyboard>
                                            </VisualState>
                                        </VisualStateGroup>
                                    </VisualStateManager.VisualStateGroups>
                                    <Path x:Name="Arrow" Data="M4.12,0 L9.67,5.47 L4.12,10.94 L0,10.88 L5.56,5.47 L0,0.06 z" Fill="{StaticResource FlipViewButtonForegroundThemeBrush}" HorizontalAlignment="Center" Height="10.94" Stretch="Fill" UseLayoutRounding="False" VerticalAlignment="Center" Width="9.67"/>
                                </Border>
                            </ControlTemplate>
                            <ControlTemplate x:Key="HorizontalPreviousTemplate" TargetType="Button">
                                <Border x:Name="Root" BorderBrush="{StaticResource FlipViewButtonBorderThemeBrush}" BorderThickness="{StaticResource FlipViewButtonBorderThemeThickness}" Background="{StaticResource FlipViewButtonBackgroundThemeBrush}">
                                    <VisualStateManager.VisualStateGroups>
                                        <VisualStateGroup x:Name="CommonStates">
                                            <VisualState x:Name="Normal"/>
                                            <VisualState x:Name="PointerOver">
                                                <Storyboard>
                                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetProperty="Background" Storyboard.TargetName="Root">
                                                        <DiscreteObjectKeyFrame KeyTime="0" Value="{StaticResource FlipViewButtonPointerOverBackgroundThemeBrush}"/>
                                                    </ObjectAnimationUsingKeyFrames>
                                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetProperty="BorderBrush" Storyboard.TargetName="Root">
                                                        <DiscreteObjectKeyFrame KeyTime="0" Value="{StaticResource FlipViewButtonPointerOverBorderThemeBrush}"/>
                                                    </ObjectAnimationUsingKeyFrames>
                                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetProperty="Fill" Storyboard.TargetName="Arrow">
                                                        <DiscreteObjectKeyFrame KeyTime="0" Value="{StaticResource FlipViewButtonPointerOverForegroundThemeBrush}"/>
                                                    </ObjectAnimationUsingKeyFrames>
                                                </Storyboard>
                                            </VisualState>
                                            <VisualState x:Name="Pressed">
                                                <Storyboard>
                                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetProperty="Background" Storyboard.TargetName="Root">
                                                        <DiscreteObjectKeyFrame KeyTime="0" Value="{StaticResource FlipViewButtonPressedBackgroundThemeBrush}"/>
                                                    </ObjectAnimationUsingKeyFrames>
                                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetProperty="BorderBrush" Storyboard.TargetName="Root">
                                                        <DiscreteObjectKeyFrame KeyTime="0" Value="{StaticResource FlipViewButtonPressedBorderThemeBrush}"/>
                                                    </ObjectAnimationUsingKeyFrames>
                                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetProperty="Fill" Storyboard.TargetName="Arrow">
                                                        <DiscreteObjectKeyFrame KeyTime="0" Value="{StaticResource FlipViewButtonPressedForegroundThemeBrush}"/>
                                                    </ObjectAnimationUsingKeyFrames>
                                                </Storyboard>
                                            </VisualState>
                                        </VisualStateGroup>
                                    </VisualStateManager.VisualStateGroups>
                                    <Path x:Name="Arrow" Data="M5.55,0 L9.67,0.06 L4.12,5.47 L9.67,10.88 L5.55,10.94 L0,5.48 z" Fill="{StaticResource FlipViewButtonForegroundThemeBrush}" HorizontalAlignment="Center" Height="10.94" Stretch="Fill" UseLayoutRounding="False" VerticalAlignment="Center" Width="9.67"/>
                                </Border>
                            </ControlTemplate>
                            <ControlTemplate x:Key="VerticalNextTemplate" TargetType="Button">
                                <Border x:Name="Root" BorderBrush="{StaticResource FlipViewButtonBorderThemeBrush}" BorderThickness="{StaticResource FlipViewButtonBorderThemeThickness}" Background="{StaticResource FlipViewButtonBackgroundThemeBrush}">
                                    <VisualStateManager.VisualStateGroups>
                                        <VisualStateGroup x:Name="CommonStates">
                                            <VisualState x:Name="Normal"/>
                                            <VisualState x:Name="PointerOver">
                                                <Storyboard>
                                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetProperty="Background" Storyboard.TargetName="Root">
                                                        <DiscreteObjectKeyFrame KeyTime="0" Value="{StaticResource FlipViewButtonPointerOverBackgroundThemeBrush}"/>
                                                    </ObjectAnimationUsingKeyFrames>
                                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetProperty="BorderBrush" Storyboard.TargetName="Root">
                                                        <DiscreteObjectKeyFrame KeyTime="0" Value="{StaticResource FlipViewButtonPointerOverBorderThemeBrush}"/>
                                                    </ObjectAnimationUsingKeyFrames>
                                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetProperty="Fill" Storyboard.TargetName="Arrow">
                                                        <DiscreteObjectKeyFrame KeyTime="0" Value="{StaticResource FlipViewButtonPointerOverForegroundThemeBrush}"/>
                                                    </ObjectAnimationUsingKeyFrames>
                                                </Storyboard>
                                            </VisualState>
                                            <VisualState x:Name="Pressed">
                                                <Storyboard>
                                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetProperty="Background" Storyboard.TargetName="Root">
                                                        <DiscreteObjectKeyFrame KeyTime="0" Value="{StaticResource FlipViewButtonPressedBackgroundThemeBrush}"/>
                                                    </ObjectAnimationUsingKeyFrames>
                                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetProperty="BorderBrush" Storyboard.TargetName="Root">
                                                        <DiscreteObjectKeyFrame KeyTime="0" Value="{StaticResource FlipViewButtonPressedBorderThemeBrush}"/>
                                                    </ObjectAnimationUsingKeyFrames>
                                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetProperty="Fill" Storyboard.TargetName="Arrow">
                                                        <DiscreteObjectKeyFrame KeyTime="0" Value="{StaticResource FlipViewButtonPressedForegroundThemeBrush}"/>
                                                    </ObjectAnimationUsingKeyFrames>
                                                </Storyboard>
                                            </VisualState>
                                        </VisualStateGroup>
                                    </VisualStateManager.VisualStateGroups>
                                    <Path x:Name="Arrow" Data="M0.06,0 L5.47,5.56 L10.88,0 L10.94,4.12 L5.48,9.67 L0,4.12 z" Fill="{StaticResource FlipViewButtonForegroundThemeBrush}" HorizontalAlignment="Center" Height="9.67" Stretch="Fill" UseLayoutRounding="False" VerticalAlignment="Center" Width="10.94"/>
                                </Border>
                            </ControlTemplate>
                            <ControlTemplate x:Key="VerticalPreviousTemplate" TargetType="Button">
                                <Border x:Name="Root" BorderBrush="{StaticResource FlipViewButtonBorderThemeBrush}" BorderThickness="{StaticResource FlipViewButtonBorderThemeThickness}" Background="{StaticResource FlipViewButtonBackgroundThemeBrush}">
                                    <VisualStateManager.VisualStateGroups>
                                        <VisualStateGroup x:Name="CommonStates">
                                            <VisualState x:Name="Normal"/>
                                            <VisualState x:Name="PointerOver">
                                                <Storyboard>
                                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetProperty="Background" Storyboard.TargetName="Root">
                                                        <DiscreteObjectKeyFrame KeyTime="0" Value="{StaticResource FlipViewButtonPointerOverBackgroundThemeBrush}"/>
                                                    </ObjectAnimationUsingKeyFrames>
                                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetProperty="BorderBrush" Storyboard.TargetName="Root">
                                                        <DiscreteObjectKeyFrame KeyTime="0" Value="{StaticResource FlipViewButtonPointerOverBorderThemeBrush}"/>
                                                    </ObjectAnimationUsingKeyFrames>
                                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetProperty="Fill" Storyboard.TargetName="Arrow">
                                                        <DiscreteObjectKeyFrame KeyTime="0" Value="{StaticResource FlipViewButtonPointerOverForegroundThemeBrush}"/>
                                                    </ObjectAnimationUsingKeyFrames>
                                                </Storyboard>
                                            </VisualState>
                                            <VisualState x:Name="Pressed">
                                                <Storyboard>
                                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetProperty="Background" Storyboard.TargetName="Root">
                                                        <DiscreteObjectKeyFrame KeyTime="0" Value="{StaticResource FlipViewButtonPressedBackgroundThemeBrush}"/>
                                                    </ObjectAnimationUsingKeyFrames>
                                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetProperty="BorderBrush" Storyboard.TargetName="Root">
                                                        <DiscreteObjectKeyFrame KeyTime="0" Value="{StaticResource FlipViewButtonPressedBorderThemeBrush}"/>
                                                    </ObjectAnimationUsingKeyFrames>
                                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetProperty="Fill" Storyboard.TargetName="Arrow">
                                                        <DiscreteObjectKeyFrame KeyTime="0" Value="{StaticResource FlipViewButtonPressedForegroundThemeBrush}"/>
                                                    </ObjectAnimationUsingKeyFrames>
                                                </Storyboard>
                                            </VisualState>
                                        </VisualStateGroup>
                                    </VisualStateManager.VisualStateGroups>
                                    <Path x:Name="Arrow" Data="M5.63,0 L11.11,5.55 L11.05,9.67 L5.64,4.12 L0.23,9.67 L0.17,5.55 z" Fill="{StaticResource FlipViewButtonForegroundThemeBrush}" HorizontalAlignment="Center" Height="9.67" Stretch="Fill" UseLayoutRounding="False" VerticalAlignment="Center" Width="10.94"/>
                                </Border>
                            </ControlTemplate>
                        </Border.Resources>
                        <Grid>
                            <ScrollViewer x:Name="ScrollingHost" BringIntoViewOnFocusChange="{TemplateBinding ScrollViewer.BringIntoViewOnFocusChange}" HorizontalScrollMode="{TemplateBinding ScrollViewer.HorizontalScrollMode}" HorizontalSnapPointsType="MandatorySingle" HorizontalScrollBarVisibility="{TemplateBinding ScrollViewer.HorizontalScrollBarVisibility}" IsTabStop="False" IsHorizontalRailEnabled="{TemplateBinding ScrollViewer.IsHorizontalRailEnabled}" IsHorizontalScrollChainingEnabled="{TemplateBinding ScrollViewer.IsHorizontalScrollChainingEnabled}" IsVerticalScrollChainingEnabled="{TemplateBinding ScrollViewer.IsVerticalScrollChainingEnabled}" IsVerticalRailEnabled="{TemplateBinding ScrollViewer.IsVerticalRailEnabled}" IsDeferredScrollingEnabled="{TemplateBinding ScrollViewer.IsDeferredScrollingEnabled}" Padding="{TemplateBinding Padding}" TabNavigation="{TemplateBinding TabNavigation}" VerticalSnapPointsType="MandatorySingle" VerticalScrollBarVisibility="{TemplateBinding ScrollViewer.VerticalScrollBarVisibility}" VerticalScrollMode="{TemplateBinding ScrollViewer.VerticalScrollMode}" ZoomMode="Disabled">
                                <ItemsPresenter/>
                            </ScrollViewer>
                            <Button x:Name="PreviousButtonHorizontal" HorizontalAlignment="Left" Height="40" IsTabStop="False" Template="{StaticResource HorizontalPreviousTemplate}" VerticalAlignment="Center" Width="70"/>
                            <Button x:Name="NextButtonHorizontal" HorizontalAlignment="Right" Height="40" IsTabStop="False" Template="{StaticResource HorizontalNextTemplate}" VerticalAlignment="Center" Width="70"/>
                            <Button x:Name="PreviousButtonVertical" HorizontalAlignment="Center" Height="40" IsTabStop="False" Template="{StaticResource VerticalPreviousTemplate}" VerticalAlignment="Top" Width="70"/>
                            <Button x:Name="NextButtonVertical" HorizontalAlignment="Center" Height="40" IsTabStop="False" Template="{StaticResource VerticalNextTemplate}" VerticalAlignment="Bottom" Width="70"/>
                        </Grid>
                    </Border>
                    <Rectangle x:Name="FocusVisualWhite" IsHitTestVisible="False" Opacity="0" StrokeDashOffset="1.5" StrokeEndLineCap="Square" Stroke="{StaticResource FocusVisualWhiteStrokeThemeBrush}" StrokeDashArray="1,1"/>
                    <Rectangle x:Name="FocusVisualBlack" IsHitTestVisible="False" Opacity="0" StrokeDashOffset="0.5" StrokeEndLineCap="Square" Stroke="{StaticResource FocusVisualBlackStrokeThemeBrush}" StrokeDashArray="1,1"/>
                </Grid>
            </ControlTemplate>
        </Setter.Value>
    </Setter>
</Style> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-27T20:29:54.810

那个烦人的虚线轮廓必须精确地在那里，这样你就可以用键盘导航。您可以通过编辑 FlipView 控件的模板和其中的按钮来重新设置或删除它。

# html - CSS 标题图像（调整大小问题）

> ID：13103522
> 
> 赞同：2
> 
> 时间：2012-10-27T19:38:30.153
> 
> 标签：html, css, image, header, resize

我被以下 HTML 链接的 CSS 卡住了，想扩展`height`标题图像，这样我就可以用它调整得更大了，但是当我使用`.header`&`.logo`类的 CSS 时，它也会扩展导航栏，我真的需要展开`height`标题图像以在其中包含更大高度的徽标。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-27T20:37:58.090

查看您的 html 源代码似乎可以有不同的解决方案。问题出在你的 html 上……你有

```
 <div class="navigation"> 
```

里面

```
 <div class="container"> 
```

Ans：从容器 div 中获取导航 div。然后更改的高度`container div`将是最好的，并且不会影响链接的高度。

**为什么您会遇到问题：**您的标题 div 包含其中的链接。这就是为什么改变标题的高度不好（它只是改变了这个div的整体高度）。

**更新：**回复您对我的回答的第一条评论

```
 <div class="inner">
     <div class="container">
            <!-- Logo Start -->
            <div class="five columns left">
                <a href="index.html" class="logo"><img src="images/logo.png" alt="" /></a>
            </div>
            <!-- Logo End -->
            <div class="eleven columns right">
                <!-- Top Links Start -->
                <ul class="top-links">
                    <li>
                        <h4 class="colr">Search Music</h4>
                        <div id="search-box">
                            <input name="" value="Enter any keyword"
                            onfocus="if(this.value=='Enter any keyword') {this.value='';}"
                            onblur="if(this.value=='') {this.value='Enter any keyword';}" type="text" class="bar" />
                            <button>Search</button>
                        </div>
                    </li>
                    <li>
                        <a href="javascript:animatedcollapse.toggle('login-box')" class="colr">LOG IN</a>
                        <div id="login-box">
                            <h4 class="white backcolr">User Login <a href="javascript:animatedcollapse.hide('login-box')" class="closeit">&nbsp;</a></h4>
                            <ul>
                                <li>
                                    <input name="" value="yourname@email.com"
                                    onfocus="if(this.value=='yourname@email.com') {this.value='';}"
                                    onblur="if(this.value=='') {this.value='yourname@email.com';}"   type="text" class="bar" />
                                </li>
                                <li>
                                    <input name="" value="password"
                                    onfocus="if(this.value=='password') {this.value='';}"
                                    onblur="if(this.value=='') {this.value='password';}"   type="password" class="bar" />
                                </li>
                                <li>
                                    <input type="checkbox" class="left" />
                                    <p>Remember me</p>
                                    <a href="#" class="right">Forget Password?</a>
                                </li>
                                <li>
                                    <button class="backcolrhover">Login</button>
                                </li>
                            </ul>
                            <div class="clear"></div>
                        </div>
                    </li>
                </ul>
                <!-- Top Links End -->
            </div>

            <div class="clear"></div>
        </div>
        <!-- Container End -->

        <!-- Navigation Start -->
            <div class="navigation">
                <div id="smoothmenu1" class="ddsmoothmenu">
                    <ul id="nav">
                        <li class="current-menu-item"><a href="index.html">Home</a></li>
                        <li><a href="news.html">NEWS</a></li>
                        <li><a href="#">Albums</a>
                            <ul>
                                <li><a href="albums.html">Albums</a></li>
                                <li><a href="album-detail.html">Album Detail</a></li>
                            </ul>
                        </li>
                        <li><a href="#">Blog</a>
                            <ul>
                                <li><a href="blog.html">Blog</a></li>
                                <li><a href="blog-detail.html">Blog Detail</a></li>
                            </ul>
                        </li>
                        <li><a href="#">Gallery</a>
                            <ul>
                                <li><a href="gallery-two-column.html">Gallery - Two Column</a></li>
                                <li><a href="gallery-three-column.html">Gallery - Three Column</a></li>
                                <li><a href="gallery-four-column.html">Gallery - Four Column</a></li>
                                <li><a href="gallery-slideshow.html">Gallery - Slide Show</a></li>
                            </ul>
                        </li>
                        <li><a href="about-us.html">About Us</a></li>
                        <li><a href="contact-us.html">Contact Us</a></li>
                        <li><a href="#">BUY THIS THEME</a></li>
                    </ul>
                    <div class="clear"></div>
                </div>
            </div>
            <!-- Navigation End -->
        </div> 
```

然后更改您的CSS并查看结果

```
.container {
    width:100%;
    height:100px; /* I have changed it 50px to 100px*/
    float:left;
    margin-top:2px;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-27T19:41:04.100

在此处更改标题高度：

```
#header {
    width:100%;
    height:148px;  <-----------Here
    float:left;
    position:relative;
    z-index:2;
    margin-bottom:15px;
    box-shadow:0px 2px 2px #000;
    background:url(../images/header.gif) repeat-x;
} 
```

编辑：我刚刚检查了萤火虫，你正在使用多个类并且你已经嵌套了 div，你的徽标 div 就在这里

`five columns left`

我猜你已经选择了这个模板并且你正在尝试编辑它，对吗？

# queue - 队列发送者如何知道消费者崩溃了？

> ID：13103524
> 
> 赞同：3
> 
> 时间：2012-10-27T19:38:57.953
> 
> 标签：queue, rabbitmq, node-amqp

我正在使用节点-amqp。对于每个队列，有一个发送者和一个消费者。在发送方，我需要维护一个活跃消费者列表。问题是当消费者计算机崩溃时，我将如何获得通知并将其从发送方的列表中删除？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-28T07:06:15.343

我认为您可能没有正确使用 MQ 概念。关键是要断开消费者与生产者的联系。总的来说，生产者的工作不是了解消费者的任何信息，除了他们将消费的消息类型。如果消费者崩溃并且消息将继续在它正在读取的队列中建立，那么生产者将继续生产。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-24T09:11:04.887

有一种方法可以通过使用 RabbitMQ 的 HTTP API（位于 http:// *server-name* :55672/api/ ）来获取连接列表，但是对于频繁查询来说太残酷了。理论上另一种方法是使用备用交换来检测未传递的消息，但我还没有尝试过这种方式。此外，可以通过使用死信交换来检测意外的消费者断开连接，如下所述：[http ://www.rabbitmq.com/dlx.html](http://www.rabbitmq.com/dlx.html)

# sql - UPDATE based on count

> ID：13103529
> 
> 赞同：3
> 
> 时间：2012-10-27T19:39:18.983
> 
> 标签：sql, ruby-on-rails-3, postgresql, count, sql-update

I want to update the number_of_votes in the users table based on the poll_records table. In rails, it looks like

```
User.all.each do |user|
  user.number_of_votes = user.poll_records.where("poll_record_type = 3").size
  user.save
end 
```

I am new to PostgreSQL. How can I update users this way?

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-27T19:52:07.807

Could be like this:

```
UPDATE users u
SET    number_of_votes = p.ct
FROM  (
   SELECT users_id, count(*) AS ct
   FROM   poll_records
   WHERE  poll_record_type = 3
   GROUP  BY users_id
   ) p
WHERE    u.users_id = p.users_id
AND      u.number_of_votes IS DISTINCT FROM p.ct;  -- to avoid empty updates 
```

I wouldn't use `"User"` (reserved word) or mixed case identifiers as table name. It forces double quoting.

# jquery - jQuery模板访问数组对象成员

> ID：13103539
> 
> 赞同：1
> 
> 时间：2012-10-27T19:40:40.113
> 
> 标签：jquery, arrays, json, templates

我正在寻找如何从看起来像这样的 JSON 结果访问 jQuery 模板项。

```
[
 {"appLayerId":"6002",
  "name":"US",
  "description":"test",
  "dataSource":"POINT",
  "status":{
      "status":"Success",
      "reason":"None",
      "otherInfo":null
      }
  }
 ] 
```

我认为在模板内部它只是，`${appLayerId}`但这似乎不起作用。

- 更新

如果它可以帮助某人帮助我，我正在尝试在 jsFiddle 上遵循此代码。[http://jsfiddle.net/iainjmitchell/kRRXC/](http://jsfiddle.net/iainjmitchell/kRRXC/) 与该示例的不同之处在于我在 jquery 模板部分中获取 JSON 和我的姓名的 URL。正如我在原帖中提到的那样，我的 json 在上面。就像我说的，我可以在 firebug 中看到 json 响应，并且没有页面错误，但我没有在模板中看到页面上的任何文本。希望这可以帮助有人帮助我。谢谢你。

-- 更新 2

我显然在这里遗漏了一些简单的东西。您要求查看代码。就像我说的，它和那个例子完全一样。这是不同的地方。

twitterUrl: "http://localhost/Services.Administration/Maintenance.svc/layers?Fmt=application/json",

然后在模板部分我有这个 div。

```
 <div class="source">
    <label>${name}, ${appLayerId}</label>
 </div> 
```

当您说时，只需访问对象的属性即可。我可以做的对象是什么，模板中的 objectName.appLayerId。不太清楚你在说什么，抱歉。

希望这可以帮助您帮助我解决这个问题。谢谢你的帮助。

-- 更新 3

进一步调查......我做了一个 console.dir(this.model); 在 addAll 函数中。在萤火虫中，控制台将“模型”显示为空。为什么会这样？同样，我更改的只是该示例中的 URL。

```
 addAll: function(){
                var el = this.el;
                el.hide().empty();
                console.dir(this.model);
                this.model.each(function(tweet){
                    var view = new TweetView({model: tweet});
                    el.append(view.render().el);
                });
                el.slideDown(500);
            } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-27T20:01:41.723

将对象的字符串表示形式放在变量中，您可以使用`$.parseJSON()`它来将其转换为 js 对象，然后像往常一样使用它。

```
 var result = "[
 {'appLayerId':'6002',
  'name':'US',
  'description':'test',
  'dataSource':'POINT',
  'status':{
      'status':'Success',
      'reason':'None',
      'otherInfo':null
      }
  }
 ]";

 var resultObject = $.parseJSON(result);
 var subObject1 = resultObject[0];
 var appLayerId1 = subObject1.appLayerId; 
```

希望这有帮助。

# javascript - 如何仅在网格中限制 jqgrid textarea 的高度

> ID：13103544
> 
> 赞同：2
> 
> 时间：2012-10-27T19:41:32.990
> 
> 标签：javascript, jquery-ui, jqgrid

Textarea 包含很多或行。在 jqgrid 网格中，只应显示第一行。在 jqgrid 视图窗口中，还应显示更多行和可能的滚动条。

[如何限制 jqgrid 中行的最大高度的](https://stackoverflow.com/questions/6573784/how-to-restrict-maximum-height-of-row-in-jqgrid)Oleg 答案

将视图窗口中的文本区域高度也限制为单行。如何仅在网格中显示第一行但在 jqgrid 视图形式中显示更多行？

colmodel 是：

```
{"name":"Description",
  "edittype":"textarea",
  "wrap":"on",
  "formatter":function(v){ return '<div style="max-height:20px">'+$.jgrid.htmlEncode(v)+'</div>';
                             } 
  ,"editoptions":{"class":"","rows":18,"wrap":"off","style":"width:800px",
      "readonly":"readonly"
      },
  "editrules":{"edithidden":true},"editable":true,"width":539,
  "classes":"jqgrid-readonlycolumn"} 
```

jqgrid 视图窗口显示多行。这应该保持不变：

![具有多行的正确视图窗口](../Images/336ad66937dc41d7cfa8a4ba85e390c2.png)

网格还显示多条线。这是错误的。：

![文本区域中具有多行的网格](../Images/21ee55603b42b2c148bb2e29825fcc1b.png)

如何强制网格在每个文本区域中仅显示第一行

或者可以在屏幕底部显示更多行：如果某行变为活动状态，则 textarea 列的前 10 行应显示在底部。这就像在 Windows 日志查看器中：移动到事件行在单独的窗口中显示事件长数据

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-11T11:47:33.840

如果我正确理解您的问题，您可以以相对简单的方式解决它。您应该只使用 CSS 而不是内联样式来设置`max-height`具有多行数据的 div。[例如，您可以使用的classes](http://www.trirand.com/jqgridwiki/doku.php?id=wiki:colmodel_options)属性在`<td>`具有多行元素的列元素上设置一些类。例如是你会使用对应列中的单元格的来获取类属性。因为您在网格内部和视图表单内部具有不同的元素层次结构，您可以在两种情况下指定不同的高度限制：`colModel``classes: "textInDiv"``<td>`

```
{name: "Description", edittype: "textarea", classes: "textInDiv",
    formatter: function (v) {
        return '<div>' + $.jgrid.htmlEncode(v) + '</div>';
    }} 
```

和

```
tr.jqgrow>td.textInDiv>div {
    max-height: 20px;
    overflow: auto
}
td.form-view-data>span>div {
    max-height: 150px;
    overflow: auto
} 
```

[演示](http://www.ok-soft-gmbh.com/jqGrid/RestrictMaxHeightOfRow.htm)演示了结果。您如何在以下图片中看到`max-height`单元格包含的网格和视图表单不同：

![在此处输入图像描述](../Images/79eb8c22d2cb7f51f6e13f8947582a55.png)

![在此处输入图像描述](../Images/2ffa361c4e12ca98ed16bba63c45994a.png)

# javascript - 不再支持完全可定制的 HTML Twitter 提要的 twitter_update_list 脚本？

> ID：13103545
> 
> 赞同：1
> 
> 时间：2012-10-27T19:41:46.533
> 
> 标签：javascript, html, css, twitter

似乎 Twitter 已经更新了他们的 API，并且用于吐出列表并使用 CSS 对其进行样式设置的通用脚本不再有效......有人知道其他替代方案吗？：

的HTML：

```
<ul id="twitter_update_list">
        </ul> 
```

JS：

```
<script type="text/javascript" src="http://twitter.com/statuses/user_timeline/iputmytwitterusernamehere.json?callback=twitterCallback2&count=4"></script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T18:13:50.307

我的也坏了......这是一个有效的

```
https://api.twitter.com/1/statuses/user_timeline/youraccountname.json?callback=twitterCallback2&count=4 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-27T19:51:50.007

在此处查看 API 更改： [https ://dev.twitter.com/docs/api/1.1/get/statuses/user_timeline](https://dev.twitter.com/docs/api/1.1/get/statuses/user_timeline)

现在这将需要特定的身份验证，这在 API 的 1.0 版本中是不需要的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-21T20:00:30.733

我认为应该这样做：您必须将用户名放在 screen_name 参数中。[来源在这里](http://api.twitter.com/1/statuses/user_timeline.json?callback=twitterCallback2&screen_name=HEREISWHEREYOURUSERNAMESHOULDBE&count=6&include_rts=true)。

# eclipse - web项目的eclipse启动配置

> ID：13103550
> 
> 赞同：2
> 
> 时间：2012-10-27T19:42:34.250
> 
> 标签：eclipse, tomcat, launch, eclipse-wtp

所以我右键单击我的项目并选择“在服务器上运行”并运行良好。但我似乎无法`.launch`在我的项目中移动运行配置（文件） - 当我转到运行配置 > 服务器选项卡时，我看到了 tomcat 的启动配置，如果我运行它，它会很好地启动 Tomcat，但不显示索引我的网络应用程序的 - 如果我单击项目并选择“在服务器上运行”，则显示正常。

在`${workspace_loc}\.metadata\.plugins\org.eclipse.debug.core\.launches`我有两个：

**Tomcat v7.0 服务器在 localhost.launch**：

```
<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<launchConfiguration type="org.eclipse.jst.server.tomcat.core.launchConfigurationType">
<listAttribute key="org.eclipse.jdt.launching.CLASSPATH">
<listEntry value="&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; standalone=&quot;no&quot;?&gt;&#13;&#10;&lt;runtimeClasspathEntry containerPath=&quot;org.eclipse.jdt.launching.JRE_CONTAINER/org.eclipse.jdt.internal.debug.ui.launcher.StandardVMType/jdk1.7.0_03&quot; path=&quot;2&quot; type=&quot;4&quot;/&gt;&#13;&#10;"/>
<listEntry value="&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; standalone=&quot;no&quot;?&gt;&#13;&#10;&lt;runtimeClasspathEntry externalArchive=&quot;C:/_/apache-tomcat-7.0.32/bin/bootstrap.jar&quot; path=&quot;3&quot; type=&quot;2&quot;/&gt;&#13;&#10;"/>
<listEntry value="&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; standalone=&quot;no&quot;?&gt;&#13;&#10;&lt;runtimeClasspathEntry externalArchive=&quot;C:/_/apache-tomcat-7.0.32/bin/tomcat-juli.jar&quot; path=&quot;3&quot; type=&quot;2&quot;/&gt;&#13;&#10;"/>
<listEntry value="&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; standalone=&quot;no&quot;?&gt;&#13;&#10;&lt;runtimeClasspathEntry externalArchive=&quot;C:/Program Files/Java/jdk1.7.0_03/lib/tools.jar&quot; path=&quot;3&quot; type=&quot;2&quot;/&gt;&#13;&#10;"/>
</listAttribute>
<booleanAttribute key="org.eclipse.jdt.launching.DEFAULT_CLASSPATH" value="false"/>
<stringAttribute key="org.eclipse.jdt.launching.JRE_CONTAINER" value="org.eclipse.jdt.launching.JRE_CONTAINER/org.eclipse.jdt.internal.debug.ui.launcher.StandardVMType/jdk1.7.0_03"/>
<stringAttribute key="org.eclipse.jdt.launching.PROGRAM_ARGUMENTS" value="start"/>
<stringAttribute key="org.eclipse.jdt.launching.VM_ARGUMENTS" value="-Dcatalina.base=&quot;C:\Dropbox\eclipse_workspaces\javaEE\.metadata\.plugins\org.eclipse.wst.server.core\tmp1&quot; -Dcatalina.home=&quot;C:\_\apache-tomcat-7.0.32&quot; -Dwtp.deploy=&quot;C:\Dropbox\eclipse_workspaces\javaEE\.metadata\.plugins\org.eclipse.wst.server.core\tmp1\wtpwebapps&quot; -Djava.endorsed.dirs=&quot;C:\_\apache-tomcat-7.0.32\endorsed&quot;"/>
<stringAttribute key="server-id" value="Tomcat v7.0 Server at localhost"/>
</launchConfiguration> 
```

和我的网络应用程序的 .launch （**ted2012.launch**）：

```
<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<launchConfiguration type="org.eclipse.wst.server.ui.launchConfigurationType">
<stringAttribute key="client-id" value="org.eclipse.wst.server.ui.web"/>
<stringAttribute key="launchable-adapter-id" value="org.eclipse.jst.server.tomcat.web"/>
<stringAttribute key="module-artifact" value="org.eclipse.jst.jee.server:ted2012//"/>
<stringAttribute key="module-artifact-class" value="org.eclipse.wst.server.core.util.WebResource"/>
<listAttribute key="org.eclipse.debug.core.MAPPED_RESOURCE_PATHS">
<listEntry value="/ted2012"/>
</listAttribute>
<listAttribute key="org.eclipse.debug.core.MAPPED_RESOURCE_TYPES">
<listEntry value="4"/>
</listAttribute>
<stringAttribute key="server-id" value="Tomcat v7.0 Server at localhost"/>
</launchConfiguration> 
```

但是，它没有出现在我的发布中：

![日食启动](../Images/23c61051af37a05ed4c5fe65ea7f9ec8.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T12:22:16.920

我在 WTP 论坛中询问并[得到了](http://www.eclipse.org/forums/index.php/mv/msg/452775/1008087/#msg_1008087)

> 服务器启动是“不同的”。每次启动服务器时，都会根据您的服务器配置创建/重新生成启动。保留现有启动的某些部分，例如 VM 参数，但否则每次启动服务器时都会替换启动。因此，不支持将启动文件移动到备用位置。它总是在“org.eclipse.debug.core.launches”下结束。

仍在寻找文档中的这条信息——所以如果有人知道这一点，我可能会接受它作为答案——我也会接受有根据的错误报告——因为这种情况至少有资格进行增强。暂时关闭

# php - ORM Kohana 分页 VS 找到的总记录

> ID：13103551
> 
> 赞同：0
> 
> 时间：2012-10-27T19:42:38.800
> 
> 标签：php, kohana

我对这个脚本有一些问题......工作正常，但不适用于查询中找到的全部记录。

我的 ORM 上有一个名为“mix”的函数。有 3 个表：mixes、generos 和 mixes_generos。

我可以在“mixes”表或“generos”表中搜索任何人。

```
public function search($query, $itemsperpage, $page)
{
    if (empty($page))
        $page = 1;

    $offset = ($page - 1) * $itemsperpage;

    $orm = $this->join('mixes_generos', 'LEFT')->on('mix.id', '=', 'mixes_generos.mix_id')
                ->join('generos', 'LEFT')->on('generos.id', '=', 'mixes_generos.genero_id')
                ->where_open()
                    ->or_where('mix.nombre', 'LIKE', '%'.$query.'%')
                    ->or_where('mix.descripcion', 'LIKE', '%'.$query.'%')
                    ->or_where('generos.nombre', 'LIKE', '%'.$query.'%')
                ->where_close()
                ->and_where('mix.estatus', '=', 'active')
                ->order_by('mix.fecha_produccion', 'DESC')
                ->order_by('mix.track', 'DESC');

    $this->_search_total = $orm->reset(FALSE)->count_all();

    $orm = $orm->limit($itemsperpage)->offset($offset);

    return $orm;
}

public function search_total()
{
    return $this->_search_total;
} 
```

然后，在我的控制器中，我有这个：

```
$data = ORM::factory('mix')->search('pop music', 10, 1); 
```

如果我想呼应总数，我会这样做：

```
echo $data->search_total(); 
```

在我看来，我打印信息：

```
foreach($data->find_all() as $mix)
    echo $mix->nombre; 
```

[http://s10.postimage.org/cvnr28nop/records.jpg](http://s10.postimage.org/cvnr28nop/records.jpg)

在此链接中，您将看到结果，仔细查看“records_founds”列与它找到的“记录”数量，3 vs 1??。

这是主要问题......因为当我打印混合数据时显示 3 而不是 1。我还添加了一个 group_by('mix.id') 并且什么都没有:(

你怎么看？

谢谢

# swing - eclipse插件文件夹中javaw.swing包的名称是什么

> ID：13103566
> 
> 赞同：0
> 
> 时间：2012-10-27T19:44:15.210
> 
> 标签：swing, osgi

我尝试将 OSGi 应用程序作为独立应用程序运行，但它失败了，因为它找不到 javax.swing 包。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-27T19:48:26.870

OSGi 通常用于基于 Web 的“瘦”客户端。

Java Swing 专门用于基于桌面的“厚”客户端。

问：您的 UI 是否打算在 Web 浏览器中运行？你确定你需要Java Swing吗？

如果是这样，请这样做：

1）查看这些链接：

*   [http://eclipse.dzone.com/articles/dynamic-swing-osgi-demo](http://eclipse.dzone.com/articles/dynamic-swing-osgi-demo)

*   [如何使用 Spring DM 在 AWT EventQueue 上创建 Swing OSGi 包](https://stackoverflow.com/questions/3561161/how-to-create-swing-osgi-bundles-on-awt-eventqueue-with-spring-dm)

2）请发帖：

a）您收到的确切错误消息

b) 您的 Java 版本

c) 您的 Eclipse 版本（如果适用；否则请向我们提供有关您的构建环境的一些信息）

# html - 如何使用 CSS 在单个内联元素内以不同方式对齐文本？

> ID：13103568
> 
> 赞同：2
> 
> 时间：2012-10-27T19:44:24.483
> 
> 标签：html, css, alignment, inline

这应该很有趣。这是我尝试用 CSS 做的事情：

1.  “示例对齐”一词应位于单个`<h1>`元素中。
2.  “对齐”这个词应该在第二行（用`<br />`标签很容易）。
3.  “An”这个词应该比其他词小（用`<span>`标签很容易）。

![在此处输入图像描述](../Images/e25bb589be96915f477c2ab63efca1df.png)

所以我们有：

```
<h1><span>An</span> Example <br />Alignment</h1> 
```

**但这里有一个问题：**

*   我还想将第二个和第三个单词的第一个字母垂直对齐，这就是我遇到问题的地方。

它应该是这样的*：* http: [//jsfiddle.net/Baumr/H2Pzr/](http://jsfiddle.net/Baumr/H2Pzr/)

但这是一个丑陋的解决方案，因为有两个`<h1>`元素。

关于如何通过保持 HTML 相同来使用 CSS 执行此操作的任何想法？很想听。先感谢您。

*PS我也可以将“An”放入单独的`<span>`，但我更愿意将所有内容放在一个单独的中`<h1>`。）*

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-27T20:20:13.973

我会通过使用两个`display:inline-block`跨度来进行填充，以确保右边距始终完全相同（字体宽度会有所不同，具体取决于使用中的字体）。

```
<h1>
    <span class="padding">An</span> Example <br>
    <span class="padding"></span> Alignment
</h1> 
```

CSS：

```
h1 {
    font-size: 30px;
}

.padding {
    font-size: 20px;
    width: 30px;
    display:inline-block;
} 
```

请注意，IE 并不总是使用`inline-block`正确的方式（尽管在这种情况下它应该）。

## 更新

一个更好的解决方案：http: [//jsfiddle.net/H2Pzr/9/](http://jsfiddle.net/H2Pzr/9/)

使用`table-cell`元素的显示将它们自动放在两列中：

HTML：

```
<h1>
<span class="first">An</span>
<div class="second">
    Example <br>
    Alignment
</div>
</h1> 
```

CSS：

```
h1 {
    font-size: 30px;
}

.first {
    display:table-cell;
    font-size: 20px;
    color: #444;
}
.second {
    display:table-cell;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-27T19:58:27.400

使用两个具有不同类的跨度，请参见[jsfiddle](http://jsfiddle.net/H2Pzr/3/)

```
<h1><span class="first">An</span> Example <br>
    <span class="second">Alignment</span>
    </h1> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-27T20:02:30.453

我会在同一个 H1 标签中使用两个跨度类：

```
<h1>
    <span class="small-text">An</span> Example 
    <span class="line-two">Alignment</span>
</h1> 
```

然后相应地更新您的 CSS：

```
h1 {
    font-size: 30px;
}

span.small-text {
    font-size: 20px;
}

.line-two{
    display:block;
    margin-left: 31px;
} 
```

您甚至不需要，`<br />`因为您可以在此处将第二个跨度显示为`display:block;` 更新的小提琴：http: [//jsfiddle.net/H2Pzr/6/](http://jsfiddle.net/H2Pzr/6/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-27T20:09:04.517

试试这个：（最少的元素！）

```
<h1>Example <br>Alignment</h1>​

h1 {
    font-size: 30px;
    margin-left: 31px;
}

h1:before
{
    content: 'An  ';
    font-size: 20px;
    margin-left: -31px;
} 
```

# propel - 集成 Zend Framework 2 和 Propel

> ID：13103569
> 
> 赞同：3
> 
> 时间：2012-10-27T19:44:34.040
> 
> 标签：propel, zend-framework2

我已经广泛搜索了如何集成推进和 Zend Framework 2，但是我还没有提出解决方案。

这是我到目前为止所拥有的。

安装 ZF2 骨架目录 从 ZF 站点插入样本专辑表数据

我的文件夹结构看起来像这样

```
--Vendor
----Propel
------album
--------autoload_classmap.php
--------models
----------map
----------om
----------Album.php
----------AlbumPeer.php
----------AlbumQuery.php
------config
--------module.config.php
------Module.php
------autoload_classmap.php 
```

专辑/autoload_classmap.php 看起来像这样

```
//vendor/Propel/album/autoload_classmap.php
<?php
// Generated by ZF2's ./bin/classmap_generator.php
return array(
    'AlbumTableMap'  => __DIR__ . '/models/map/AlbumTableMap.php',
    'BaseAlbumPeer'  => __DIR__ . '/models/om/BaseAlbumPeer.php',
    'BaseAlbumQuery' => __DIR__ . '/models/om/BaseAlbumQuery.php',
    'BaseAlbum'      => __DIR__ . '/models/om/BaseAlbum.php',
    'Album'          => __DIR__ . '/models/Album.php',
    'AlbumPeer'      => __DIR__ . '/models/AlbumPeer.php',
    'AlbumQuery'     => __DIR__ . '/models/AlbumQuery.php',
); 
```

这是module.config.php

```
//vendor/Propel/config/module.config.php
<?php
return array(); 
```

这是 Propel/autoload_classmap.php

```
//vendor/Propel/autoload_classmap.php

<?php
// Generated by ZF2's ./bin/classmap_generator.php
return array(
    'Propel'                                              => __DIR__ . '/runtime/lib/Propel.php',
); 
```

最后是 Model.php 文件

```
 //vendor/Propel/Module.php
<?php

namespace Propel;

class Module
{

    public function getAutoloaderConfig()
    {
        return array(
            'Zend\Loader\ClassMapAutoloader' => array(
                __DIR__ . '/autoload_classmap.php',
                __DIR__ . '/album/autoload_classmap.php'
            )
        );
    }

    public function getConfig()
    {
        return include __DIR__ . '/config/module.config.php';
    }
} 
```

为了**简单起见，**我将以下代码放入我的控制器中。

```
//module/Application/src/Application/Controller/IndexController.php
namespace Application\Controller;

use Zend\Mvc\Controller\AbstractActionController;
use Zend\View\Model\ViewModel;

class IndexController extends AbstractActionController
{
    public function indexAction()
    {
        $q = new \Propel\Album();
        $q->setArtist('The Who');
        $q->setTitle('Tommy');
        $q->save();

        return new ViewModel();
    }
} 
```

我得到的错误是

```
 Class 'Propel\\Album' not found 
```

我用来达到这一点的来源是

[https://groups.google.com/forum/?fromgroups=#!searchin/propel-users/zend/propel-users/lsHs-jjxp68/LDrQjzik6gAJ](https://groups.google.com/forum/?fromgroups=#!searchin/propel-users/zend/propel-users/lsHs-jjxp68/LDrQjzik6gAJ) [https://docs.google.com/viewer?a=v&pid= forums&srcid=MDU2NDIxODQyNDc0MDMyNjQ3NzUBMDY3ODcxMTYzMzg0MDA4OTU0MzgBeFpDZUM1WTZqMThKATQBAXYy](https://docs.google.com/viewer?a=v&pid=forums&srcid=MDU2NDIxODQyNDc0MDMyNjQ3NzUBMDY3ODcxMTYzMzg0MDA4OTU0MzgBeFpDZUM1WTZqMThKATQBAXYy) [将供应商特定模块添加到 Zend Framework 2.0](https://stackoverflow.com/questions/12600464/adding-vendor-specific-module-to-zend-framework-2-0)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-11-07T21:15:49.303

如果您没有在 XML 模式中设置名称空间，那么您的类应该可以在根名称空间中访问，例如 \Album。如果你想拥有一些其他的命名空间，你应该在你的 XML 模式的数据库标签中定义它。而且你不应该使用 Propel 命名空间，因为它是为 Propel 本身保留的。您生成的类对于您的项目的命名空间应该很长。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-28T15:17:47.343

`\Propel\Album`找不到，因为类映射指定`Album`为类名。

我猜你是否添加了以下行：`namespace Propel;`类映射生成器将在每个与 Propel 相关的文件中放置正确的类名。当然，您需要更新受影响代码中的类名。

# c# - C# 同一项目中的命名空间

> ID：13103574
> 
> 赞同：1
> 
> 时间：2012-10-27T19:45:38.090
> 
> 标签：c#, namespaces

我有一个像这样的静态类：

```
namespace Engine.Configuration
{
    public static class Configuration
    {
        public static int i;
    }
} 
```

在同一个项目中，但在不同的命名空间中，我有一个类试图访问静态类变量：

```
namespace Engine.MainProgram
{
    public class MainProgram
    {
        int x;
        int y;
        public void LoadConfiguration()
        {
            x = Configuration.Configuration.i;
        }
    }
} 
```

我想做的只是在 MainProgram 中放置一个 using 语句，如下所示：

```
using Engine.Configuration;
...
x = Configuration.i; 
```

但是当我尝试使用 Visual Studio 时，总是将 Configuration 视为命名空间而不是静态类。我的问题是为什么会发生这种情况，我该如何纠正？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-27T19:50:01.873

尝试：

```
using A = Engine.Configuration; 
```

然后

```
x = A.Configuration.i; 
```

或者只是使用

```
x = global::Engine.Configuration.Configuration.i 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-27T19:52:46.113

编译器并不总是知道如何区分名称空间和同名的类名。

改变这个：

```
using Engine.Configuration; 
```

到[命名空间别名](http://msdn.microsoft.com/en-us/library/sf0df423.aspx)：

```
using Configuration = Engine.Configuration.Configuration; 
```

**解释：**

假设您直接在根命名空间 Engine 下工作，如下所示：

```
namespace Engine
{
} 
```

然后你可以像这样在其他命名空间中获取东西：

```
namespace Engine
{
    Engine.Configuration.Configuration;

    // Or since you are in the root (Engine) you don't need to specify Engine:
    // You can always omit the root namespace if the namespace you're in has the same root.
    Configuration.Configuration;
} 
```

或者通过为命名空间声明一个 using，但编译器不会知道您是指命名空间还是命名空间中的类：

```
using Engine.Configuration;

namespace Engine
{
    // This will still work.
    Engine.Configuration.Configuration;

    // This will break, do we mean "Engine.Configuration.Configuration" or "Engine.Configuration"?
    Configuration;
} 
```

因此，一个类的名称永远不要与其所在的命名空间相同。也许将命名空间更改为 Engine.Configuration **s**。

# c# - 从列表框中删除项目会导致灾难性故障？

> ID：13103575
> 
> 赞同：2
> 
> 时间：2012-10-27T19:45:47.210
> 
> 标签：c#, windows-8, listbox, windows-runtime

我正在尝试清除我的 Windows RT 应用程序中的列表框项目。要添加项目，我使用：

```
List<string> list1;
...
foreach(string s in list1.Items)
{
    listBox1.Items.Add(s);
} 
```

要清除项目，我使用：

```
listBox1.Items.Clear(); 
```

但是，这会引发此异常：

```
Catastrophic failure (Exception from HRESULT: 0x8000FFFF (E_UNEXPECTED)) 
```

如果我尝试使用：

```
 int at = 0;
        while (at < listBox1.Items.Count)
        {
            listBox1.Items.RemoveAt(at);
            at += 1;
        } 
```

我在 RemoveAt 方法中遇到了同样的异常。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-27T19:58:26.190

我找到了解决这个问题的方法。我试图从由 SelectionChanged 事件触发的方法中删除项目。我将其更改为：

```
await Dispatcher.RunAsync(Windows.UI.Core.CoreDispatcherPriority.Normal, listBox1.Items.Clear); 
```

它工作正常。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-27T19:49:21.463

对于第二个，你真的不想增加'at'

如果您删除 0 处的项目 - 1 处的项目现在将成为 0 处的项目。

所以

```
while (listBox1.Items.Count != 0)
{
listBox1.Items.RemoveAt(0);

} 
```

将工作。

不知道为什么您在第一个中遇到异常-您是否在某处启动了列表框？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-02-10T10:55:46.513

如果您的列表使用 DataBinding 绑定到某些数据，则处理后面的数据模型而不是 ListItems。

（如果您正确实现了 INotifyPropertyChanged 接口，列表将会更新）

# android - Android GCM - 在客户端上创建通知时崩溃

> ID：13103577
> 
> 赞同：1
> 
> 时间：2012-10-27T19:46:15.120
> 
> 标签：android, google-cloud-messaging

我有这个例外：

```
java.lang.NoSuchMethodError: android.app.Notification$Builder.setProgress at android.support.v4.app.NotificationCompatIceCreamSandwich.a
dd(NotificationCompatIceCreamSandwich.java:31)
        at android.support.v4.app.NotificationCompat$NotificationCompatImplIceCreamSandwich.build(NotificationCompat.java:104)
        at android.support.v4.app.NotificationCompat$Builder.build(NotificationCompat.java:558)
        at com.problemio.GCMIntentService.generateNotification(GCMIntentService.java:132)
        at com.problemio.GCMIntentService.onMessage(GCMIntentService.java:71)
        at com.google.android.gcm.GCMBaseIntentService.onHandleIntent(GCMBaseIntentService.java:223)
        at android.app.IntentService$ServiceHandler.handleMessage(IntentService.java:59)
        at android.os.Handler.dispatchMessage(Handler.java:99)
        at android.os.Looper.loop(Looper.java:132)
        at android.os.HandlerThread.run(HandlerThread.java:60) 
```

这是我的 GCMIntentService.java

```
package com.problemio;

import static com.google.android.gcm.GCMConstants.ERROR_SERVICE_NOT_AVAILABLE;
import static com.google.android.gcm.GCMConstants.EXTRA_ERROR;
import static com.google.android.gcm.GCMConstants.EXTRA_REGISTRATION_ID;
import static com.google.android.gcm.GCMConstants.EXTRA_SPECIAL_MESSAGE;
import static com.google.android.gcm.GCMConstants.EXTRA_TOTAL_DELETED;
import static com.google.android.gcm.GCMConstants.EXTRA_UNREGISTERED;
import static com.google.android.gcm.GCMConstants.INTENT_FROM_GCM_LIBRARY_RETRY;
import static com.google.android.gcm.GCMConstants.INTENT_FROM_GCM_MESSAGE;
import static com.google.android.gcm.GCMConstants.INTENT_FROM_GCM_REGISTRATION_CALLBACK;
import static com.google.android.gcm.GCMConstants.VALUE_DELETED_MESSAGES;

import java.util.Random;
import java.util.concurrent.TimeUnit;
import com.google.android.gcm.GCMBaseIntentService;

import android.app.AlarmManager;
import android.app.IntentService;
import android.app.Notification;
import android.app.NotificationManager;
import android.app.PendingIntent;
import android.content.Context;
import android.content.Intent;
import android.graphics.Color;
import android.media.RingtoneManager;
import android.net.Uri;
import android.os.Bundle;
import android.os.PowerManager;
import android.os.SystemClock;
import android.support.v4.app.NotificationCompat;
import android.util.Log;
import android.widget.Toast;

import utils.GCMConstants;
import utils.SendEmail;

public class GCMIntentService extends GCMBaseIntentService 
{
    public GCMIntentService() 
    {
            super(ProblemioActivity.SENDER_ID);
    }

    @Override
      protected void onRegistered(Context ctxt, String regId) {
        Log.d(getClass().getSimpleName(), "onRegistered: " + regId);
        Toast.makeText(this, regId, Toast.LENGTH_LONG).show();
      }

      @Override
      protected void onUnregistered(Context ctxt, String regId) {
        Log.d(getClass().getSimpleName(), "onUnregistered: " + regId);
      }

      @Override
      protected void onMessage(Context ctxt, Intent message) 
      {
        Bundle extras=message.getExtras();

        for (String key : extras.keySet()) 
        {
            //sendEmail( "Key: " + key , "value: " + extras.getString(key) );

          Log.d(getClass().getSimpleName(),
                String.format("onMessage: %s=%s", key,
                              extras.getString(key)));
        }

        generateNotification(ctxt, extras.getString("message"), "New Message");
      }

        // Subject , body
        public void sendEmail( String subject , String body )
        {
            String[] params = new String[] { "http://www.problemio.com/problems/send_email_mobile.php", subject, body };

            SendEmail task = new SendEmail();
            task.execute(params);               
        }    

      @Override
      protected void onError(Context ctxt, String errorMsg) {
        Log.d(getClass().getSimpleName(), "onError: " + errorMsg);
      }

      @Override
      protected boolean onRecoverableError(Context ctxt, String errorMsg) {
        Log.d(getClass().getSimpleName(), "onRecoverableError: " + errorMsg);

        return(true);
      } 

      private static void generateNotification(Context context, String message, String title ) 
      {
            int icon = R.drawable.ic_launcher;
            long when = System.currentTimeMillis(); // can change this to a future time if desired

            NotificationManager notificationManager = 
                    (NotificationManager) context.getSystemService(Context.NOTIFICATION_SERVICE);

            Intent notificationIntent = new Intent(context, ProblemioActivity.class);

            // set intent so it does not start a new activity
            notificationIntent.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP | Intent.FLAG_ACTIVITY_SINGLE_TOP);
            PendingIntent intent = PendingIntent.getActivity(context, 0, notificationIntent, 0);        
            Uri defaultSound = RingtoneManager.getDefaultUri(RingtoneManager.TYPE_NOTIFICATION);            

             Notification notification = new NotificationCompat.Builder(context)
             .setContentTitle(title)
             .setContentText(message)
             .setContentIntent(intent)
             .setSmallIcon(icon)
             .setLights(Color.YELLOW, 1, 2)
             .setAutoCancel(true)
             .setSound(defaultSound)
             .build();

            notificationManager.notify(0, notification);
    }     
} 
```

崩溃发生在这一行：

```
generateNotification(ctxt, extras.getString("message"), "New Message"); 
```

我应该把这条线换成这样的：

```
if ( android.os.Build.VERSION.SDK_INT >= 8 )
{

} 
```

在我的清单中，我允许所有这样的 sdk 版本：

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-27T19:57:07.120

有一个为此提交的支持库错误，请参见[此处](http://code.google.com/p/android/issues/detail?id=36502)。可以从[评论 #2](http://code.google.com/p/android/issues/detail?id=36502#c2)中的[此链接](http://yuku-android-util.googlecode.com/git/ActionBarSherlock4/libs/android-support-v4.jar)下载固定的 v4 支持库。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-31T20:55:31.660

这是 rev11 之前的 android-support-v4.jar 中的一个已知错误。

获取最新的 android-support-v4.jar：

1.  从您的 IDE 打开 SDK 管理器
2.  检查`Android Support Library`并单击安装包
3.  导航到`yourSdkFolder/extras/android/support/v4`并复制`android-support-v4.jar`
4.  导航到`android-support-v4.jar`项目中的位置，然后粘贴，替换旧版本

# r - 如何重组和折叠数据集？

> ID：13103579
> 
> 赞同：4
> 
> 时间：2012-10-27T19:46:28.510
> 
> 标签：r

我有一个看起来像这样的数据集：

```
0 Var1 Var 2 Var3 Var4
1 2|1
2 1|2
3            1|2
4            2|1
5                  2|1
6                  2|1
7       1|2
8       1|2 
```

我想向左折叠，使其看起来像这样：

```
0 G.F  G.F.1
1 2|1  Var1
2 1|2  Var1
3 1|2  Var2
4 2|1  Var2
5 2|1  Var3
6 2|1  Var3
7 1|2  Var4
8 1|2  Var4 
```

我有一个涉及 reshape 包的一般想法，但到目前为止还没有找到一个优雅的解决方案。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-27T19:57:27.667

试试这个：

```
library(reshape)
foo = data.frame(Var1=c("2|1","1|2","","",""),Var2=c("","","","","1|2"))
foo 
#   Var1 Var2
# 1  2|1     
# 2  1|2     
# 3          
# 4          
# 5       1|2

foo = cbind("Row"=seq(nrow(foo)),foo)
foo = melt(foo, "Row")
setNames(foo[foo$value!="", c(3,2)], c("G.F","G.F.1"))
#    G.F G.F.1
# 1  2|1  Var1
# 2  1|2  Var1
# 10 1|2  Var2 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-27T20:07:45.657

坚持基地，这会让你到达你要去的地方：

```
#create data set
foo <- data.frame(Var1=c("2|1","1|2","","",""),Var2=c("","","","","1|2"),
    Var3=c("", "", "1|2","2|1","") ,Var4=c("","","", "1|2", ""))

#Split data frame columns into lists, counts lengths of each and put together
v <- lapply(seq_along(foo), function(i) foo[, i][foo[, i] != ""])
data.frame(G.F = unlist(v), G.F.1 = rep(colnames(foo), sapply(v, length))) 
```

或类似地：

```
lens <- sapply(foo, function(x) sum(x != ""))
x <- as.matrix(foo)  
data.frame(G.F = x[x!= ""], G.F.1 = rep(colnames(foo), lens)) 
```

# pascal - 以下帕斯卡代码中的运行时错误

> ID：13103580
> 
> 赞同：0
> 
> 时间：2012-10-27T19:46:30.880
> 
> 标签：pascal, prime-factoring

我正在尝试分解给定的数字`a`，因此我编写了以下 Pascal 代码：

```
program prime_factors;
  var b:array[1..1000] of integer;
  k,i,d,a:integer;
begin
  k:=0;
  write(' enter number ');
  read(a);
  while a>1 do
    if a mod d =0 then
      begin
        k:=k+1;
        b[k]:=d;
        a:=a div d;
      end
    else
      if d=2 then
        d:=d+1
      else
        d:=d+2;
   for i:=1 to k do
     write(b[i],'  ');
   readln();
   readln();
end. 
```

但是当我运行它时，它给了我错误 200 或运行时错误，但我无法确定是什么问题。我使用 k 作为 b 数组中因子数的长度。我应该认为索引 k 有什么问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T10:13:57.697

你应该定义 D:=2; 就在 Begin :D 之后，因为它的默认值为 0。

# graphviz - Graphviz - 如何使标签中的文本左对齐？

> ID：13103584
> 
> 赞同：51
> 
> 时间：2012-10-27T19:46:58.623
> 
> 标签：graphviz

我正在使用 graphviz 来可视化我正在解析的语言的 AST。我想包含源代码（作为标签），但 graphviz 对齐标签内的文本，这与我的缩进混淆（并且代码对缩进敏感）。这是问题的一个例子，第二行代码不应该缩进：

![在此处输入图像描述](../Images/191248941afab23e24436113c257c068.png)

这是生成的 .dot 文件的相关部分：

```
graph [fontname=Courier,fontsize=10.0,labeljust=l,nojustify=true];
node [shape=box,width=0.2,height=0.2,fontname=Courier,fontsize=10.0,penwidth=0.5];
edge [weight=1.2,penwidth=0.5,fontname=Courier,fontsize=10.0,labeljust=c];
labelloc="t";
label="\ndef square(a, b) -> a * b\ndef dotProduct(a, b) -> \n    a.x * b.x + a.y * b.y\n"; 
```

* * *

## 回答 #1

> 赞同：74
> 
> 时间：2012-10-27T23:04:41.507

您可以使用`\l`而不是`\n`将[标签划分为左对齐的行](http://www.graphviz.org/doc/info/attrs.html#k:escString)。

![带有左对齐线的graphviz标签](../Images/04daaff1c48a7f0319e265e0d2746aa7.png)

# apache - htaccess 重写 url 动态长度

> ID：13103585
> 
> 赞同：1
> 
> 时间：2012-10-27T19:47:17.967
> 
> 标签：apache, .htaccess

我从一个网站项目开始，我想用动态长度重写 url。例如，以下 url 可以存在于站点中：

```
http://www.url.com/signup/ 
```

或者

```
http://www.url.com/profile/mark/pm/compose/ 
```

现在我有一个 .htaccess 脚本工作，但我怀疑它的效率。这是代码：

```
Options +FollowSymLinks
RewriteEngine On

RewriteRule ^([a-zA-Z0-9_-]+)$ index.php?page=$1
RewriteRule ^([a-zA-Z0-9_-]+)/$ index.php?page=$1

RewriteRule ^([a-zA-Z0-9_-]+)/([a-zA-Z0-9_-]+)$ index.php?page=$1&subone=$2
RewriteRule ^([a-zA-Z0-9_-]+)/([a-zA-Z0-9_-]+)/$ index.php?page=$1&subone=$2

RewriteRule ^([a-zA-Z0-9_-]+)/([a-zA-Z0-9_-]+)/([a-zA-Z0-9_-]+)$ index.php?    page=$1&subone=$2&subtwo=$3
RewriteRule ^([a-zA-Z0-9_-]+)/([a-zA-Z0-9_-]+)/([a-zA-Z0-9_-]+)/$ index.php?page=$1&subone=$2&subtwo=$3

RewriteRule ^([a-zA-Z0-9_-]+)/([a-zA-Z0-9_-]+)/([a-zA-Z0-9_-]+)/([a-zA-Z0-9_-]+)$ index.php?page=$1&subone=$2&subtwo=$3&subthree=$4
RewriteRule ^([a-zA-Z0-9_-]+)/([a-zA-Z0-9_-]+)/([a-zA-Z0-9_-]+)/([a-zA-Z0-9_-]+)/$ index.php?page=$1&subone=$2&subtwo=$3&subthree=$4

RewriteRule ^([a-zA-Z0-9_-]+)/([a-zA-Z0-9_-]+)/([a-zA-Z0-9_-]+)/([a-zA-Z0-9_-]+)/([a-zA-Z0-9_-]+)$ index.php?arg[0]=$1&arg[1]=$2&arg[2]=$3&arg[3]=$4&arg[4]=$5
RewriteRule ^([a-zA-Z0-9_-]+)/([a-zA-Z0-9_-]+)/([a-zA-Z0-9_-]+)/([a-zA-Z0-9_-]+)/([a-zA-Z0-9_-]+)/$ index.php?arg[0]=$1&arg[1]=$2&arg[2]=$3&arg[3]=$4&arg[4]=$5 
```

我实际上想做这样的事情，但我不知道我是如何让它工作的......

```
RewriteRule ^{[a-zA-Z0-9_-]+}/$ index.php?urlvar={$#} 
```

所以网址

```
http://www.url.com/profile/mark/pm/compose/ 
```

会导致

```
http://www.url.com/index.php?urlvar[0]=profile&urlvar[1]=mark&urlvar[2]=pm&urlvar[3]=compose 
```

谁知道如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-27T20:22:44.463

我得到了这个工作：在.htaccess中：

```
Options +FollowSymLinks
RewriteEngine on

RewriteRule (.*)/ index.php?path=$1 
```

在 index.php 中：

```
<?php
    print_r(explode("/", $_GET['path']));
?> 
```

# c - 具有顺序保留的 C 中的霍夫曼编码

> ID：13103588
> 
> 赞同：0
> 
> 时间：2012-10-27T19:47:41.937
> 
> 标签：c, algorithm, huffman-code

C 实现用于 (a) 近似保序霍夫曼编码的算法 - 每个阶段合并两个相邻的子树，其权重给出最小的和。输入是 1) 正整数 n 和 2) n 正整数序列，给出有序字符集中符号的频率计数（权重）。

只有当叶子顺序与字符集的顺序一致时，才能保证顺序保留。

我必须修改以下代码以使上述成为可能：

```
 // Huffman code using a minHeap with handles (index-heap-based priority queue).
// Heap routines are adapted from "Algorithms in C, Third Edition", and
// "Algorithms in Java, Third Edition", Robert Sedgewick

// This is a prototype for demonstration purposes only.
// Minimally, the heap/priority queue implementation should
// be in a different source file.

#include <stdio.h>
#include <stdlib.h>

int N,          // Number of items in queue
        *pq,        // Priority queue
        *qp,        // Table of handles (for tracking)
        maxQueued;  // Capacity of priority queue
double *a;      // Pointer to user's table

void exch(int i, int j) {
// Swaps parent with child
    int t;

    t = pq[i];
    pq[i] = pq[j];
    pq[j] = t;
    qp[pq[i]] = i;
    qp[pq[j]] = j;
}

void PQinit(double *items, int n, int m) {
    int i;

    a = items;    // Save reference to index table
    maxQueued = m;
    N = 0;
    pq = (int*) malloc((maxQueued + 1) * sizeof(int)); // Contains subscripts to a[]
    qp = (int*) malloc(n * sizeof(int)); // Inverse of pq, allows changing priorities
    if (!pq || !qp) {
        printf("malloc failed %d\n", __LINE__);
        exit(0);
    }
// Set all handles to unused
    for (i = 0; i < n; i++)
        qp[i] = (-1);
}

int PQempty() {
    return !N;
}

int PQfull() {
    return N == maxQueued;
}

int less(int i, int j) {
// Notice how heap entries reference a[]
    return a[pq[i]] < a[pq[j]];
}

void fixUp(int *pq, int k) // AKA swim
{
    while (k > 1 && less(k, k / 2)) {
        exch(k, k / 2);
        k = k / 2;
    }
}

void fixDown(int *pq, int k, int N) // AKA sink
{
    int j;

    while (2 * k <= N) {
        j = 2 * k;
        if (j < N && less(j + 1, j))
            j++;
        if (!less(j, k))
            break;
        exch(k, j);
        k = j;
    }
}

void PQinsert(int k) {
    qp[k] = ++N;
    pq[N] = k;
    fixUp(pq, N);
}

int PQdelmin() {
    exch(1, N);
    fixDown(pq, 1, --N);
    qp[pq[N + 1]] = (-1);  // Set to unused
    return pq[N + 1];
}

void PQchange(int k) {
    fixUp(pq, qp[k]);
    fixDown(pq, qp[k], N);
}

// main implements Huffman code.
// Index is just a table of priorities whose
// subscripts are used in the PQ.

main() {
    int n, m, op, i, j, val;
    double *priority, probSum, expected = 0.0;
    int *left, *right;  // Links for Huffman code tree, root is subscript m-1
    int *parent;  // For printing the codes
    int *length;
    char *outString;

    printf("Enter alphabet size\n");
    scanf("%d", &n);
    m = 2 * n - 1;  // Number of nodes in tree
    priority = (double*) malloc(m * sizeof(double));
    left = (int*) malloc(m * sizeof(int));
    right = (int*) malloc(m * sizeof(int));
    parent = (int*) malloc(m * sizeof(int));
    outString = (char*) malloc((n + 1) * sizeof(char));
    length = (int*) malloc(m * sizeof(int));
    if (!priority || !left || !right || !parent || !outString || !length) {
        printf("malloc problem %d\n", __LINE__);
        exit(0);
    }

    PQinit(priority, m, n);

    for (i = 0; i < n; i++)
        priority[i] = (-1);

// Read and load alphabet symbols' probabilities into priority queue.
    probSum = 0.0;
    for (i = 0; i < n; i++) {
        scanf("%lf", priority + i);
        probSum += priority[i];
        PQinsert(i);
        left[i] = right[i] = (-1);
    }
    printf("Probabilities sum to %f\n", probSum);

// Huffman code tree construction
    for (i = n; i < m; i++) {
        left[i] = PQdelmin();
        right[i] = PQdelmin();
        parent[left[i]] = parent[right[i]] = i;
        priority[i] = priority[left[i]] + priority[right[i]];
        PQinsert(i);
    }
    i = PQdelmin();
    if (i != m - 1) {
        printf("The root isn't the root\n");
        exit(0);
    }
    parent[m - 1] = (-1);

// Goes breadth-first from root to compute length of prefix bit codes.
    length[m - 1] = 0;
    for (i = m - 1; i >= n; i--)
        length[left[i]] = length[right[i]] = length[i] + 1;

// Print the leaves, i.e. for the alphabet symbols
    printf("   i  prob  parent  bits product  code\n");
    for (i = 0; i < n; i++) {
        // Crawl up the tree to get prefix code
        outString[length[i]] = '\0';
        for (j = i; j != m - 1; j = parent[j])
            outString[length[j] - 1] = (left[parent[j]] == j) ? '0' : '1';
        printf("%5d %5.3f %5d %5d   %5.3f  %s\n", i, priority[i], parent[i],
                length[i], priority[i] * length[i], outString);
        expected += priority[i] * length[i];
    }
    printf("Expected bits per symbol: %f\n", expected);

// Print the internal nodes
    printf("   i  prob    left right parent\n");
    for (i = n; i < m; i++)
        printf("%5d %5.3f %5d %5d  %5d\n", i, priority[i], left[i], right[i],
                parent[i]);

    free(priority);
    free(left);
    free(right);
    free(parent);
    free(outString);
    free(length);
    free(pq);
    free(qp);
} 
```

建议采用以下方法：

> （一种）。您将希望每个堆条目对应于可以合并的两个相邻子树。在 PQdelmin() 确定要应用的合并后，您将需要 PQdelete() 来丢弃不需要的候选者（由于合并）和 PQinsert() 以包含新的候选者（也是由合并产生的）。手柄有助于实现这一点。

但我坚持排序和管理阵列。请帮忙！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-27T23:09:45.810

由于每个符号的概率不同，您可能有一个包含`a`and的节点`z`，它应该与另一个包含`b`and的节点合并`c`。没有简单的方法来排序非叶节点，这在更高的层次上变得越来越抽象。

反正; 要控制子树的顺序，可以在合并节点时交换左右子树：

```
// Huffman code tree construction
for (i = n; i < m; i++) {
    left[i] = PQdelmin();
    right[i] = PQdelmin();
    if (CompareNodes(left[i], right[i]) > 0) {
        Swap(&left[i], &right[i]);
    }
    parent[left[i]] = parent[right[i]] = i;
    priority[i] = priority[left[i]] + priority[right[i]];
    PQinsert(i);
} 
```

* * *

更多信息：

*   [近似保序霍夫曼代码](https://stackoverflow.com/questions/13097686/approximate-order-preserving-huffman-code)（stackoverflow）
*   Antoshenkov 等人的[顺序保留密钥压缩。](http://citeseerx.ist.psu.edu/viewdoc/download?doi=10.1.1.86.3306&rep=rep1&type=pdf)人。(pdf)

# android - onResume() 没有从 onPause() 中提取信息

> ID：13103590
> 
> 赞同：1
> 
> 时间：2012-10-27T19:47:55.547
> 
> 标签：android, android-intent

我正在制作这款基于文本的小型 rpg 游戏，用户可以在其中选择自己的姓名、种族、班级等……

我有一项活动，用户键入他们想要使用的名称，然后从微调器中选择比赛、班级。

然后当他们点击 Create character 按钮时，这一切都转移到下一个活动。这完美无缺。

问题在于保存数据时的 onPause 事件。onResume() 方法不起作用？视图只是显示为空白。

继承人选择的代码：

（这是从其他活动中提取数据的地方）

```
String Name = getIntent().getStringExtra("strName");
    textViewStrName.setText(Name);

    String Race = getIntent().getStringExtra("strRace");
    textViewStrRace.setText(Race);

    String Class = getIntent().getStringExtra("strClass");
    textViewStrClass.setText(Class); 
```

（这是 onPause() 方法）

```
SharedPreferences preferences = getPreferences(MODE_PRIVATE);
    SharedPreferences.Editor editor = preferences.edit();
    editor.clear();
    String strName = textViewStrName.getText().toString();
    String strRace = textViewStrRace.getText().toString();
    String strClass = textViewStrClass.getText().toString();
    editor.putString("strName", strName);
    editor.putString("strRace", strRace);
    editor.putString("strClass", strClass);
editor.commit(); 
```

（这是 onResume() 方法）

```
SharedPreferences preferences = getPreferences(MODE_PRIVATE);
    TextView textViewStrName = (TextView) findViewById(R.id.textViewStrName);
    TextView textViewStrRace = (TextView) findViewById(R.id.textViewStrRace);
    TextView textViewStrClass = (TextView) findViewById(R.id.TextViewStrClass);
    TextView textViewStrAlliance = (TextView) findViewById(R.id.textViewStrAlliance);

        textViewStrName.setText(preferences.getString("strName", null));
        textViewStrRace.setText(preferences.getString("strRace", null));
        textViewStrClass.setText(preferences.getString("strClass", null));
        textViewStrAlliance.setText(preferences.getString("strAlliance",
                null)); 
```

运行应用程序时，我没有收到任何错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-27T19:50:43.813

如果要在活动之间使用 SharedPreferences 存储，请使用 getSharedPreferences() 而不是 getPreferences。[在此处](http://developer.android.com/training/basics/data-storage/shared-preferences.html#GetSharedPreferences)查看详细信息。

也不要忘记`editor.commit()`在进行更改后打电话。

# iphone - iOS 应用程序在恢复模拟器后崩溃

> ID：13103592
> 
> 赞同：1
> 
> 时间：2012-10-27T19:48:08.817
> 
> 标签：iphone, ios, ios-simulator, xcode4.5, sigabrt

## 在我的问题之前

我正在为 iPhone 创建一个应用程序，在拍摄了我的第一个快照后，当我在模拟器上运行它时，情节提要在任何未显示的视图中都会发生变化，但所有代码更改都已正确应用。我不知道如何解决它，但现在我遇到了更严重的问题。为了修复“故事板更改更新”的问题**，我恢复了模拟器**（重置内容和设置）。

## 我的问题

**现在，当我启动应用程序时，我收到 SIGABRT 错误。**

## 我做了什么

我已经重启了电脑、模拟器和Xcode。我还做了 Clean 的事情 [cmd + shift + K] 和 Clean Build Folder 的事情 [option + cmd + shift + K]。我一起做了。

已经不工作了。

有时我启动 Xcode 并且运行按钮显示为灰色但仍然有效。

### 一些无效的解决方案

我恢复了*~/Library/Application Support/iPhone Simulator/6.0/Applications*中的先前文件，并且应用程序再次运行（当然，故事板更改未更新）但我希望我的模拟器恢复，而不是什么技巧。

**注意：** 模拟器中旧的app文件夹是*984E5409-2F65-4560-8AE3-59CDEAC3F314* 新的名字不一样，不知道是不是这个原因。

非常感谢你。

* * *

**编辑：**

当我创建应用程序的快照时，所有问题都开始了，因为我开始进行重大更改。模拟器可以尝试加载快照吗？这可以解释为什么它在重置模拟器后崩溃以及为什么视图中的更改未显示。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-27T22:39:21.603

由于某种原因，该应用程序在文件检查器中的“目标成员资格”下未选中。

我检查了它，一切都解决了。由于某种原因，它在执行快照时在某些文件中发生了变化。

![目标会员](../Images/5848ce003fb610feb7e5194fc5a15420.png)

谢谢大家。

# c# - 为什么我的 .net 应用程序不会发出超过 10 个并发 WebClient 请求？

> ID：13103597
> 
> 赞同：7
> 
> 时间：2012-10-27T19:48:42.633
> 
> 标签：c#, asynchronous, webclient, threadpool, async-await

我试图了解 C# 中的 async/await 和 Windows 中的 I/O 完成端口的复杂性，并编写代码来验证我的假设。

据我了解，调用`WebClient.DownloadStringTaskAsync(...)`将使当前线程注册一个带有I/O完成端口的I/O操作（这可能有点模糊，我还不了解细节），它将创建一个`Task<string>`并继续执行代码。在某些时候，它会遇到`await`给定任务的一个。那时，它将从当前方法返回（嗯，它将退出某个范围，我不确定这个范围是否可能不是方法——我可能应该检查生成的状态机以了解该部分） . 一旦 I/O 操作完成，将从线程池中抓取一个线程，将 I/O 操作的结果传递给它，并执行刚才提到的其余范围。

我已经尝试验证此行为，但仅在此 C# 代码之前出现了一些不正确的情况：

```
class Program
{
    static void Main(string[] args)
    {
        ThreadPool.SetMaxThreads(30, 30);
        Console.WriteLine("Connection limit is {0}", ServicePointManager.DefaultConnectionLimit);
        for (int i = 0; i < 30; i++)
        {
            FetchAsync(i);
        }

        Console.WriteLine("Done starting requests");
        Console.ReadKey();
    }

    private async static void FetchAsync(int num)
    {
        WebClient wc = new WebClient();
        string result = await wc.DownloadStringTaskAsync("http://localhost/slow/index/15");
        Console.WriteLine("Done #{0}", num);
    }
} 
```

如您所见，我正在使用 a`WebClient`为网页创建 30 个请求（我知道这很慢，需要 15 秒才能响应）。运行此代码，我观察到以下行为： 15 秒后，前 10 个请求完成。再过 15 秒，另外 10 个请求完成，再过 15 秒，其余请求完成。因此，似乎一次只有 10 个未完成的请求（使用 perfmon 我已经验证被调用的 Web 应用程序有 10 个当前请求）。这是为什么？我期待 30 个并发请求，因为我已经按照上面的代码设置了线程池的最大线程数。

[这个 SO 问题](https://stackoverflow.com/questions/2960056/trying-to-run-multiple-http-requests-in-parallel-but-being-limited-by-windows)让我相信这`ServicePointManager`可能与它有关，但由于`DefaultConnectionLimit`只有 2 我想没有联系。

我意识到这是对一个相当简单的问题的冗长描述。我希望它能让某人更容易准确地指出我的假设在哪里是错误的。

我在 Windows 7、64 位机器上运行它。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-27T23:04:11.597

您的客户端能够发送任意多个并发请求。但是，您的服务器是**localhost**。客户端 Windows 操作系统对 Web 应用程序中的并发请求数有限制（因此您必须购买服务器许可证）。此限制为 10。您对此无能为力。

顺便说一句，您的应用程序正在使用异步 IO，因此在 IO 运行时您不需要任何线程（甚至不需要隐式线程池线程）。这不是你的问题。

# c - 用 C 编写网络服务器

> ID：13103601
> 
> 赞同：3
> 
> 时间：2012-10-27T19:49:17.770
> 
> 标签：c, http, webserver

我正在尝试用 C 编写一个简单的 Web 服务器。到目前为止，我可以接收连接并接收完整的消息。但是，根据 HTTP/1.0 协议，我希望能够在遇到“\r\n\r\n”序列时将信息发送回客户端。但是，当使用 Telnet 测试我的服务器时，当我输入“\r\n\r\n”时，服务器什么也不做，直到我在客户端上点击“^]”。我对 Apache 进行了测试，Apache 没有这个问题。所以我希望能得到一些关于如何模仿 Apache 行为的信息。我的代码添加在下面，但请记住，我还没有完成，也没有实现很多错误检查。谢谢！

```
main(){
        int sock_fd = 0;
        int client_fd = 0;
        struct sockaddr_in socket_struct;
        /*Creates the socket*/
        if ((sock_fd = socket(AF_INET, SOCK_STREAM, 0)) < 0)
        {
                fprintf(stderr, "%s: %s\n", getprogname(), strerror(errno));
                exit(EXIT_FAILURE);
        }/*Ends the socket creation*/

        /*Populates the socket address structure*/
        socket_struct.sin_family = AF_INET;
        socket_struct.sin_addr.s_addr=INADDR_ANY;
        socket_struct.sin_port =htons(port);

        if (bind(sock_fd, (struct sockaddr*) &socket_struct, sizeof(socket_struct)) < 0)
        {
                fprintf(stderr, "%s: %s\n", getprogname(), strerror(errno));
                exit(EXIT_FAILURE);
        }//Ends the binding.

        if (listen(sock_fd, 5) <0)
        {
                fprintf(stderr, "%s: %s\n", getprogname(), strerror(errno));
                exit(EXIT_FAILURE);
        }//Ends the listening function

        if ( (client_fd = accept(sock_fd, NULL, NULL)) <0)
        {
                fprintf(stderr, "%s: %s\n", getprogname(), strerror(errno));
                exit(EXIT_FAILURE);
        }//Ends the accepting.
        while ( (size = read(client_fd, msg, 1024)) > 0)
        {
                //size = recv(client_fd, msg, 1024, MSG_PEEK|MSG_WAITALL);
                if ( (msg[size-4] == 13) && (msg[size-3] == 10)&&(msg[size-2] == 13) && (msg[size-1] == 10) )
                {
                        char* buffer = (char *)malloc(sizeof("The msg was: ")+ sizeof(msg));
                        sprintf(buffer, "The msg was: %s", msg);
                        send(client_fd, buffer, sizeof("The msg was: ")+ sizeof(msg), MSG_OOB);
                }

        }//ends the while loop for receiving data
        close(client_fd);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-27T20:09:27.330

首先，这条线不起作用：

```
while ( (size = read(client_fd, msg, 1024)) > 0) 
```

这将接收消息块，并且您收到的每个块都将覆盖最后一个块。做这样的事情：

```
char msg[1024];
size_t pos = 0;
while (1) {
    assert(pos < sizeof(msg));
    ssize_t amt = read(client_fd, msg + pos, sizeof(msg) - pos);
    if (amt < 0)
        err(1, "read failed");
    if (amt == 0)
        break; // EOF
    pos += amt;
    char *e = strstr(msg, "\r\n\r\n");
    if (e) {
        size_t msglen = e - msg;
        /* Handle a complete message here */
    }
} 
```

这样，当您收到消息块时，它们会被写入您的缓冲区。一旦你有了`"\r\n\r\n"`序列，你就可以处理整个消息，即使你可能会得到它的块。

**关键教训：**在 TCP 中，数据包边界和消息边界可能完全不同，您从中获得的大小`read`可能仍然不同。您必须通过查看数据本身来查找消息的结尾，而不是查看从返回的数据量`read()`（EOF 除外，它在`read()`返回 0 时发出信号）。

**脚注：**我认为带外数据不会像您认为的那样做。

```
send(client_fd, buffer, sizeof("The msg was: ")+ sizeof(msg), MSG_OOB); 
```

带外数据是 TCP 的一个古怪特性，在现代协议中几乎肯定应该避免。它的实现因平台而异，因此只能安全地发送*一个字节*的带外数据。

它被 Telnet 协议（以及基于 Telnet 的 FTP 扩展）用于某些事情，但在 HTTP 中没有用途。

# ruby-on-rails - Rspec，Rails，我是否需要为每个测试获取或发布请求

> ID：13103604
> 
> 赞同：2
> 
> 时间：2012-10-27T19:49:33.413
> 
> 标签：ruby-on-rails, ruby, testing, rspec

我对 rspec、rails 和 ruby​​ 很陌生。我现在正在学习它们。我发现自己在我执行的每个单独的测试中都提出了一个 get 或 post 请求，这不是很干燥。我是否需要继续发出这些请求才能使测试生效？还是我错过了一些基本的东西？

编辑：

对于我正在执行的每个测试，我必须发出一个 get :page 样式请求，以便控制器运行该请求。但是在测试同一操作的各个方面时，我会重复发出相同的请求，从而重复代码。这不是 DRY（不要重复自己）。

```
describe "Find Movies With Same Director" do
    it "should respond, and find the requested movie" do
      stubFind()
      id = "1"
      get :match_director, :id=>id
      response.code.should eq("200")
    end

    it "should search for movies with the same director" do
      id = "1"
      Movie.should_receive(:match_director).with(id)
      get :match_director, :id=>id
    end

    it "should pass all matching movies to view" do
      id = "1"
      Movie.should_receive(:match_director).with(id).and_return("")
      get :match_director, :id=>id
      assigns[:movies].should not_be nil
    end

    it "should pass a list of movies" do
      id = "1"
      Movie.stub(:match_director).and_return(stub_model(Movie))
      get :match_director, :id=>id

      assigns[:movies].should be_instance_of(Movie)
    end

  end 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-27T21:04:46.503

如果您对多个测试执行相同的操作，则可以将它们移动到 before 块。

```
describe 'something' do
    it 'should do one thing' do
        common_thing
        specific_thing
    end

    it 'should do one thing' do
        common_thing
        specific_thing
    end
end 
```

变成

```
describe 'something' do
    before :each do
        common_thing
    end

    it 'should do one thing' do
        specific_thing
    end

    it 'should do one thing' do
        specific_thing
    end
end 
```

如果您希望所有测试只调用一次常见的东西，那么您将替换`before :each`为`before :all`.

编辑：看到你编辑后，我认为你可以把调用`get :match_director, :id=>id`放在一个方法中并使用它：

```
def call_match_director
    get :match_director, :id=>id
end 
```

然后很容易将参数添加到一个地方的调用中。您还可以使用 let 构造将 id 放入变量中：

```
let(:id) { "1" } 
```

总而言之是这样的：

```
describe "Find Movies With Same Director" do
  let(:id) { "1" }

  def call_match_director
    get :match_director, :id=>id
  end

  it "should respond, and find the requested movie" do
    stubFind()
    call_match_director
    response.code.should eq("200")
  end

  it "should search for movies with the same director" do
    Movie.should_receive(:match_director).with(id)
    call_match_director
  end

  it "should pass all matching movies to view" do
    Movie.should_receive(:match_director).with(id).and_return("")
    call_match_director
    assigns[:movies].should not_be nil
  end

  it "should pass a list of movies" do
    Movie.stub(:match_director).and_return(stub_model(Movie))
    call_match_director
    assigns[:movies].should be_instance_of(Movie)
  end
end 
```

# database - Elasticsearch - River 和 nGrams

> ID：13103605
> 
> 赞同：1
> 
> 时间：2012-10-27T19:49:43.580
> 
> 标签：database, lucene, couchdb, elasticsearch, n-gram

我正在使用带有河流插件的 ES，因为我正在使用 couchDB，并且我正在尝试使用 nGrams 进行查询。我基本上已经完成了我需要的所有事情，除了当有人输入空格时，查询无法正常工作。这是因为 ES 对查询的每个元素进行了标记，将其按空格分隔。

这是我需要做的：

*   查询字符串中的部分文本：

    查询：“Hello Wor”响应：“Hello World，Hello Word”/排除“Hello，World，Word”

*   按我指定的标准对结果进行排序；

*   不区分大小写。

这是我在这个问题之后所做的：[如何使用 ElasticSearch 搜索单词的一部分](https://stackoverflow.com/questions/6467067/how-to-search-for-a-part-of-a-word-with-elasticsearch)

```
curl -X PUT  'localhost:9200/_river/myDB/_meta' -d '
{
"type" : "couchdb",
"couchdb" : {
    "host" : "localhost",
    "port" : 5984,
    "db" : "myDB",
    "filter" : null
},
   "index" : {
    "index" : "myDB",
    "type" : "myDB",
    "bulk_size" : "100",
    "bulk_timeout" : "10ms",
    "analysis" : {
               "index_analyzer" : {
                          "my_index_analyzer" : {
                                        "type" : "custom",
                                        "tokenizer" : "standard",
                                        "filter" : ["lowercase", "mynGram"]
                          }
               },
               "search_analyzer" : {
                          "my_search_analyzer" : {
                                        "type" : "custom",
                                        "tokenizer" : "standard",
                                        "filter" : ["standard", "lowercase", "mynGram"]
                          }
               },
               "filter" : {
                        "mynGram" : {
                                   "type" : "nGram",
                                   "min_gram" : 2,
                                   "max_gram" : 50
                        }
               }
    }
}
}
' 
```

然后，我将为排序添加一个映射：

```
curl -s -XGET 'localhost:9200/myDB/myDB/_mapping' 
{
"sorting": {
       "Title": {
            "fields": {
                "Title": {
                     "type": "string"
                  }, 
                "untouched": {
                    "include_in_all": false, 
                    "index": "not_analyzed", 
                    "type": "string"
                    }
               }, 
              "type": "multi_field"
         },
        "Year": {
              "fields": {
                   "Year": {
                       "type": "string"
                       }, 
                       "untouched": {
                           "include_in_all": false, 
                           "index": "not_analyzed", 
                           "type": "string"
                         }
                     }, 
                    "type": "multi_field"
        }
     }
    }
   }' 
```

我已经添加了我使用的所有信息，只是为了完整。无论如何，通过这种设置，我认为应该可以工作，每当我尝试获得一些结果时，该空间仍用于拆分我的查询，例如：

```
 http://localhost:9200/myDB/myDB/_search?q=Title:(Hello%20Wor)&pretty=true 
```

返回包含“Hello”和“Wor”的任何内容（我通常不使用括号，但我在示例中看到过它们，但结果看起来仍然非常相似）。

任何帮助都**非常**感谢，因为这让我非常烦恼。

**更新**：最后，我意识到我不需要 nGram。一个正常的索引就可以了；只需用“ AND ”替换查询的空格就可以了。

例子：

```
 Query: "Hello World"  --->  Replaced as "(*Hello And World*)" 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-27T20:32:19.613

现在没有弹性搜索设置，但也许这对文档有帮助？

[http://www.elasticsearch.org/guide/reference/query-dsl/match-query.html](http://www.elasticsearch.org/guide/reference/query-dsl/match-query.html)

```
Types of Match Queries

boolean

The default match query is of type boolean. It means that the text provided is analyzed and the analysis process constructs a boolean query from the provided text. The operator flag can be set to or or and to control the boolean clauses (defaults to or).

The analyzer can be set to control which analyzer will perform the analysis process on the text. It default to the field explicit mapping definition, or the default search analyzer.

fuzziness can be set to a value (depending on the relevant type, for string types it should be a value between 0.0 and 1.0) to constructs fuzzy queries for each term analyzed. The prefix_length and max_expansions can be set in this case to control the fuzzy process. If the fuzzy option is set the query will use constant_score_rewrite as its rewrite method the rewrite parameter allows to control how the query will get rewritten.

Here is an example when providing additional parameters (note the slight change in structure, message is the field name):

{
    "match" : {
        "message" : {
            "query" : "this is a test",
            "operator" : "and"
        }
    }
} 
```

# forms - Yii - 一个表单提交中的多个记录

> ID：13103607
> 
> 赞同：6
> 
> 时间：2012-10-27T19:49:58.023
> 
> 标签：forms, activerecord, model, yii

有谁知道如何在 Yii 中仅使用一种形式添加多条记录？所有记录属于同一模型，格式相同。

非常感谢，

缺口

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-28T13:59:09.207

[指南](http://www.yiiframework.com/doc/guide/1.1/en/form.table "http://www.yiiframework.com/doc/guide/1.1/en/form.table")中“batchUpdate”的等效“batchCreate”方法可能是这样的：

```
public function actionBatchCreate() {
    $models=array();
    // since you know how many models
    $i=0;
    while($i<5) {
        $models[]=Modelname::model();
        // you can also allocate memory for the model with `new Modelname` instead
        // of assigning the static model
    }
    if (isset($_POST['Modelname'])) {
        $valid=true;
        foreach ($_POST['Modelname'] as $j=>$model) {
            if (isset($_POST['Modelname'][$j])) {
                $models[$j]=new Modelname; // if you had static model only
                $models[$j]->attributes=$model;
                $valid=$models[$j]->validate() && $valid;
            }
        }
        if ($valid) {
            $i=0;
            while (isset($models[$i])) {
                $models[$i++]->save(false);// models have already been validated
            }
            // anything else that you want to do, for example a redirect to admin page
            $this->redirect(array('modelname/admin'));
        }
    }

    $this->render('batch-create-form',array('models'=>$models));
} 
```

这里唯一需要担心的是，必须为您保存的每个模型创建一个新实例**，**使用`new`. 其余的逻辑可以按照您希望的任何方式实现，例如在上面的示例中，所有模型都在验证，然后保存，而如果任何模型无效，您可以停止验证，或者直接保存模型，在`save`通话期间进行验证。所以逻辑真的取决于你的应用程序的用户体验。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-29T11:09:44.977

将此代码放在`components`文件名下的文件夹中`GeneralRepository.php`。

```
<?php
class GeneralRepository
{
    /**
     * Creates and executes an INSERT SQL statement for several rows.
     * 
     * Usage:
     * $rows = array(
     *      array('id' => 1, 'name' => 'John'),
     *      array('id' => 2, 'name' => 'Mark')
     * );
     * GeneralRepository::insertSeveral(User::model()->tableName(), $rows);
     * 
     * @param string $table the table that new rows will be inserted into.
     * @param array $array_columns the array of column datas array(array(name=>value,...),...) to be inserted into the table.
     * @return integer number of rows affected by the execution.
     */
    public static function insertSeveral($table, $array_columns)
    {
        $connection = Yii::app()->db;
        $sql = '';
        $params = array();
        $i = 0;
        foreach ($array_columns as $columns) {
            $names = array();
            $placeholders = array();
            foreach ($columns as $name => $value) {
                if (!$i) {
                    $names[] = $connection->quoteColumnName($name);
                }
                if ($value instanceof CDbExpression) {
                    $placeholders[] = $value->expression;
                    foreach ($value->params as $n => $v)
                        $params[$n] = $v;
                } else {
                    $placeholders[] = ':' . $name . $i;
                    $params[':' . $name . $i] = $value;
                }
            }
            if (!$i) {
                $sql = 'INSERT INTO ' . $connection->quoteTableName($table)
                . ' (' . implode(', ', $names) . ') VALUES ('
                . implode(', ', $placeholders) . ')';
            } else {
                $sql .= ',(' . implode(', ', $placeholders) . ')';
            }
            $i++;
        }
        $command = Yii::app()->db->createCommand($sql);
        return $command->execute($params);
    }
} 
```

并在任何地方使用：

```
$rows = array(
    array('id' => 1, 'name' => 'John'),
    array('id' => 2, 'name' => 'Mark')
);
GeneralRepository::insertSeveral(User::model()->tableName(), $rows); 
```

这只是执行一个查询。

# javascript - JW播放器没有出现

> ID：13103609
> 
> 赞同：2
> 
> 时间：2012-10-27T19:06:14.717
> 
> 标签：javascript, html

头

```
<script type="text/javascript" src="/jwplayer/jwplayer.js"></script> 
```

身体

```
<div id="test">Loading the player ...</div>
<script type="text/javascript">
jwplayer("test").setup({                      // this is critical line
flashplayer: "/jwplayer/player.swf",
file: "video.mp4",
height: 270,
width: 480
});
</script> 
```

“jwplayer.js”和“player.swf”位于根目录下的“jwplayer”文件夹中。
“video.mp4”直接在根目录下。
div 测试出现在页面上，但播放器没有。
Firefox 16
Check in firebug 控制台说：

```
ReferenceError: jwplayer is not defined
jwplayer("test").setup({ 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-27T20:37:02.593

代码对我来说看起来不错。你看过萤火虫的网络标签吗？确保已加载 jwplayer.js 而不是 404。

![404样本](../Images/6e70d402fb6f7d16f4c77b1633891afb.png)

# actionscript-3 - 在 as3 中获取移动对象的旋转/方向

> ID：13103612
> 
> 赞同：1
> 
> 时间：2012-10-27T19:50:25.623
> 
> 标签：actionscript-3, rotation, angle, direction

我构建了一个简单的小游戏，它以一定的角度和力量发射物体，以尝试粗略计算并击倒东西。机制就像愤怒的小鸟和类似的游戏。

有一种负力对抗 X（摩擦力和随机风），还有重力对抗我的 Y。

所以，这很好用，但我希望我的弹丸（我正在投掷的物体）始终指向它移动的方向。我不太确定我可以使用什么公式。

有人可以帮忙吗？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-27T19:54:46.903

我使用简单的三角函数对矢量（箭头）角度做了类似的事情。
arrowEnd 和 arrowStart 只是我以图形方式放置在对象本身内的子动画剪辑。

```
 public function getAngle():Number
    {
        var end=arrowEnd.getEndPoint();
        var start=arrowStart.getStartPoint();
        var angle = Math.atan((end.y - start.y) / (end.x - start.x));
        var angleInDegrees = angle * 180/Math.PI;
        return(angleInDegrees);

    } 
```

# iphone - UIPageViewController 在 iOS 6 中不返回手势识别器

> ID：13103613
> 
> 赞同：35
> 
> 时间：2012-10-27T19:50:29.447
> 
> 标签：iphone, objective-c, uikit, uipageviewcontroller

我正在尝试禁用 UIPageViewController 的平移手势识别器。

在 iOS 5 上，我可以遍历它们并禁用它们。

```
for (UIGestureRecognizer* recognizer in self.pageViewController.gestureRecognizers) {
    if ([recognizer isKindOfClass:[UIPanGestureRecognizer class]]) {
        recognizer.enabled = NO;
    }
} 
```

在使用 UIPageViewControllerTransitionStyleScroll 的 iOS 6 上，页面视图控制器没有返回手势识别器。

### 澄清

这可以归结为：

当 UIPageViewController 的转换样式设置为滚动时 self.pageViewController.gestureRecognizers = 0，因此我无法访问手势识别器。

有什么办法可以解决这个问题吗？我不认为我做错了什么，因为卷曲过渡工作正常。

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-11-10T17:50:21.993

在 UIPageViewController.h 中找到了这个：

> **// 仅当过渡样式为“UIPageViewControllerTransitionStylePageCurl”时才填充。** @property(nonatomic, readonly) NSArray *gestureRecognizers;

因此，这不是一个错误 - 根据设计，当设置滚动样式时 pageViewController 不会获得手势识别器。

* * *

## 回答 #2

> 赞同：28
> 
> 时间：2013-07-11T00:09:27.370

您始终可以尝试在页面视图控制器的子视图上禁用用户交互：

```
for (UIScrollView *view in self.pageViewController.view.subviews) {
    if ([view isKindOfClass:[UIScrollView class]]) {
        view.scrollEnabled = NO;
    }
} 
```

* * *

## 回答 #3

> 赞同：26
> 
> 时间：2012-11-08T16:48:21.230

[雷达](http://openradar.appspot.com/12606964)中有一个针对此行为的错误。所以，我敢打赌，在苹果修复它之前，没有机会解决这个问题。

我想到的一种解决方法是在您的顶部放置一个透明的子视图`UIPageViewController`并添加到它`UIPanGestureRecognizer`以拦截这种手势而不是进一步前进。当需要禁用手势时，您可以启用此视图/识别器。

我尝试了 Pan 和 Tap 手势识别器的组合，它可以工作。

这是我的测试代码：

```
- (void)viewDidLoad {
  [super viewDidLoad];

   UIPanGestureRecognizer* g1 = [[[UIPanGestureRecognizer alloc] initWithTarget:self
                                                                      action:@selector(g1Pan:)] autorelease];
  [self.view addGestureRecognizer:g1];

  UITapGestureRecognizer* s1 = [[[UITapGestureRecognizer alloc] initWithTarget:self
                                                                      action:@selector(g1Tap:)] autorelease];

  [self.view addGestureRecognizer:s1];

  UIView* anotherView = [[[UIView alloc]initWithFrame:self.view.bounds] autorelease];
  [self.view addSubview:anotherView];

  UIPanGestureRecognizer* g2 = [[[UIPanGestureRecognizer alloc] initWithTarget:self
                                                                      action:@selector(g2Pan:)] autorelease];
  [anotherView addGestureRecognizer:g2];

} 
```

启用时`g2`，将防止`g1`被识别。另一方面，它不会阻止 s1 被识别。

我知道这是 hack，但面对一个看似错误的错误`UIPageViewController`（至少，实际行为与参考状态明显不同），我看不到任何更好的解决方案。

* * *

## 回答 #4

> 赞同：19
> 
> 时间：2013-11-13T20:25:23.627

根据 UIPageViewController 头文件，当数据源为 nil 时，手势驱动导航被禁用。

因此，当您想要禁用滑动时，将 datasource 设置为 nil，然后当您想要启用滑动时，重置数据源。

IE

```
// turns off paging
pageViewController.datasource = nil

// turns on paging
pageViewController.datasource = self; 
```

* * *

## 回答 #5

> 赞同：9
> 
> 时间：2013-10-09T08:00:24.670

您可以通过 UIPageViewController 中的 UIScrollview 访问 UIPanGestureRecognizer。

```
for (UIView *view in self.pageController.view.subviews) {
    if ([view isKindOfClass:[UIScrollView class]])
    {
        UIScrollView *scrollView = (UIScrollView *)view;

        UIPanGestureRecognizer* panGestureRecognizer = scrollView.panGestureRecognizer;
        [panGestureRecognizer addTarget:self action:@selector(move:)];
    }
} 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2014-01-15T15:03:24.270

如果 UIPageViewControllers UIPanGestureRecognizer 正在吃掉/吞下其他 PanGestureRecognizer 的所有事件（例如滑动菜单）。

您可以轻松扩展 Bernies 解决方案并使 UIScrollViews PanGestureRecognizer 需要其他识别器失败。像这样的东西：

```
for (UIView *view in pageViewController.view.subviews) {
    if ([view isKindOfClass:[UIScrollView class]]){
        UIScrollView *scrollView = (UIScrollView *)view;

        [scrollView.panGestureRecognizer requireGestureRecognizerToFail:otherRecognizer];
    }
} 
```

这样，滚动的 PanGestureRecognizer 只会在我打算让他去的区域触发。

这可能不是最好的未来证明解决方案，因为我们要求 Apple 不要更改 UIPageViewControllers 内部对 UIScrollView 的使用。但...

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-11-08T17:01:52.863

假设您可以找到手势识别器并将其删除是非常脆弱的。您正在使用关于 Apple 如何使用实现 UIPageViewController 在您的应用程序中提供功能的假设知识。如果这种情况发生了变化（例如在 iOS 5 和 iOS 6 之间），那么您的代码应用程序将开始以意想不到的方式运行。这几乎就像使用私有 API - 您无法保证它会与下一个操作系统版本一起使用。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2012-11-08T17:21:30.340

如果您使用 KVC（键值编码）方法访问识别器会发生什么？（我现在无法测试这个。）

一个快速的测试可能是检索gestureRecognizers的数量：

```
[self.pageViewController countOfKey:@"gestureRecognizers"]; 
```

如果可行，您可能会进一步检索识别器数组：

```
NSArray *recognizers = [self.pageViewController
                        mutableArrayValueForKey:@"gestureRecognizers"]; 
```

瘦，但也许...

编辑：终于可以测试了。使用了以下内容：

```
NSArray *pvcGRsNoKVC = [[NSArray alloc]
                       initWithArray:self.pageViewController.gestureRecognizers];
NSArray *viewGRsNoKVC = [[NSArray alloc] initWithArray:self.view.gestureRecognizers];

NSArray *pvcGRsKVC = [[NSArray alloc]
                     initWithArray:[self.pageViewController valueForKey:@"gestureRecognizers"]];
NSArray *viewGRsKVC = [[NSArray alloc]
                      initWithArray:[self.view valueForKey:@"gestureRecognizers"]]; 
```

它没有任何区别。卷曲风格两种方式都很好。滚动样式显示数组不是零，而是空的。不过，有趣的是，视图也没有放弃它的识别器——尽管滚动功能在那里，所以它必须至少有一个平移识别器......

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2013-10-10T08:49:24.820

另一种解决方案，仅用于历史。您可以使任何视图成为一些手势识别器断路器，它应该在该视图的矩形中工作。必须有另一个带有委托的 UIPanGestureRecognizer。它可以是具有一种方法的任何对象：

```
static UIPageViewController* getPageViewControllerFromView(UIView* v) {
    UIResponder* r = v.nextResponder;
    while (r) {
        if ([r isKindOfClass:UIPageViewController.class])
            return (UIPageViewController*)r;
        r = r.nextResponder;
    }
    return nil;
}

- (BOOL)gestureRecognizer:(UIGestureRecognizer *)gestureRecognizer shouldRecognizeSimultaneouslyWithGestureRecognizer:(UIGestureRecognizer *)otherGestureRecognizer
{
    if (getPageViewControllerFromView(otherGestureRecognizer.view))
    {
        otherGestureRecognizer.enabled = NO;
        otherGestureRecognizer.enabled = YES;
    }
    return NO;
} 
```

您可以将以下类用于识别器破坏目的：

```
@interface GestureRecognizerBreaker : NSObject <UIGestureRecognizerDelegate>
{
    UIGestureRecognizer* breaker_;
    BOOL(^needsBreak_)(UIGestureRecognizer*);
}

- (id) initWithBreakerClass:(Class)recognizerClass
                    checker:(BOOL(^)(UIGestureRecognizer* recognizer))needsBreak;

- (void) lockForView:(UIView*)view;
- (void) unlockForView:(UIView*)view;
@end

@implementation GestureRecognizerBreaker
- (void) dummy:(id)r {}
- (id) initWithBreakerClass:(Class)recognizerClass checker:(BOOL(^)(UIGestureRecognizer*))needsBreak {
    self = [super init];
    if (!self)
        return nil;
    NSParameterAssert([recognizerClass isSubclassOfClass:UIGestureRecognizer.class] && needsBreak);
    needsBreak_ = needsBreak;
    breaker_ = [[recognizerClass alloc] initWithTarget:self action:@selector(dummy:)];
    breaker_.delegate = self;
    return self;
}

- (BOOL) gestureRecognizer:(UIGestureRecognizer*)gestureRecognizer
shouldRecognizeSimultaneouslyWithGestureRecognizer:(UIGestureRecognizer*)otherGestureRecognizer {
    if (needsBreak_(otherGestureRecognizer)) {
        otherGestureRecognizer.enabled = NO;
        otherGestureRecognizer.enabled = YES;
    }
    return NO;
}

- (void) lockForView:(UIView*)view {
    [view addGestureRecognizer:breaker_];
}

- (void) unlockForView:(UIView*)view {
    [view removeGestureRecognizer:breaker_];
}
@end 
```

例如，这可以作为单音：

```
static GestureRecognizerBreaker* PageViewControllerLocker() {
    static GestureRecognizerBreaker* i = nil;
    static dispatch_once_t onceToken;
    dispatch_once(&onceToken, ^{
        i = [[GestureRecognizerBreaker alloc]
            initWithBreakerClass:UIPanGestureRecognizer.class
            checker:^BOOL(UIGestureRecognizer* recognizer) {
                UIView* v = recognizer.view;
                UIResponder* r = v.nextResponder;
                while (r) {
                    if ([r isKindOfClass:UIPageViewController.class])
                        return YES;
                    r = r.nextResponder;
                }
                return NO;
            }];
    });
    return i;
} 
```

调用 -lockForView: 页面控制器的手势在拖入视图框架后不起作用。例如，我想锁定我的视图控制器的整个空间。所以在视图控制器方法的某个时刻我调用

```
[PageViewControllerLocker() lockForView:self.view]; 
```

在另一点

```
[PageViewControllerLocker() unlockForView:self.view]; 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2015-08-20T08:34:35.460

在 pageviewcontroller 内部有一个名为 quieingscrollview 的子视图，它有 3 个手势识别器，用于控制页面视图控制器以使用它们

```
[[pageViewController.view.subviews objectAtIndex:0] gestureRecognizers] 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2017-03-01T06:26:58.587

就我而言，我的 UIPageViewController 上有一个 UIView“信息面板”，但页面视图控制器的手势识别器干扰了通过我的信息面板进行的导航。

我的解决方案是将 dataSource 设置为 nil，但也不允许页面视图控制器在信息面板启动时更新焦点：

```
- (BOOL)shouldUpdateFocusInContext:(UIFocusUpdateContext *)context
{
    if (self.infoPanel) {
        return NO;
    } else {
        return YES;
    }
} 
```

* * *

## 回答 #12

> 赞同：-1
> 
> 时间：2012-10-27T23:49:42.673

您可以使用 的委托方法`UIGestureRecognizer`来捕获和禁用任何手势 例如，您可以使用此委托回调：`gestureRecognizer:shouldReceiveTouch:`。只需确保为所有识别器设置委托。

# c++ - 递归 -> 迭代

> ID：13103616
> 
> 赞同：1
> 
> 时间：2012-10-27T19:50:52.557
> 
> 标签：c++, algorithm, recursion, iteration

使用以下 Trie 结构：

```
struct Trie{
    char letter;
    bool eow;
    Trie *letters[26];
}; 
```

我正在使用以下代码按字母顺序将单词从 trie 提取到向量中。

```
void getWords(const TrieNode& data, vector<string> &words, string acc)
{
  if (data.eow)
    words.push_back(acc);

  for (int i = 0; i < 26; i++) {
    if (data.letters[i] != NULL)
      getWords(*(data.letters[i]), words, acc + data.letters[i]->letter);
  }
} 
```

我只是想知道是否有一种方法可以在没有递归的情况下做到这一点，并且只使用迭代？我正在尝试仅通过迭代来实现这一点，但想不出一种方法来使用循环检查 trie 中每一层的每个字母。有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-27T20:22:26.887

```
struct State {
  const TrieNode* data;
  string acc;
  int index;
  State( ... ): ... {} // element-wise constructor, left as an exercise
};

std::vector<string> getWords( const TrieNode* root )
{
  std::vector<string> retval;
  std::vector<State> states;
  states.push_back( State( root, string(), 0 ) );
  while (!states.empty())
  {
    State s = states.back();
    states.pop_back();
    if (s.data->eow)
    {
      retval.push_back( s.acc );
      continue;
    }
    if (s.index >= 26)
      continue;
    states.push_back( State( s.data, s.acc, s.index+1 ) );
    if (s.letters[s.index])
    {
      states.push_back( State( s.letters[s.index], s.acc + s.letters[s.index]->letter, 0 ) );
    }
  }
  return std::move(retval);
}; 
```

The states is an explicit stack that tracks the same data as you tracked recursively, pretty much. I think I managed to visit the elements in the same order your recursive function would, but that wouldn't really matter.

Note that the above code is written and not tested, and you have to write an element-wise constructor for State, because I'm lazy.

# c - C变量声明处

> ID：13103619
> 
> 赞同：4
> 
> 时间：2012-10-27T19:51:05.023
> 
> 标签：c

> **可能重复：**
> [C 中的变量声明位置](https://stackoverflow.com/questions/288441/variable-declaration-placement-in-c)

我真的不明白为什么当我在下面的代码片段中声明变量'm'时为什么它不起作用？？？我在使用它之前声明了m，那有什么意义呢？谢谢

```
 int main(){

    int a[] = {2,-4,6,47,59,-6,0};
    sort(a, 7);

    int m;
    for(m = 0; m < 7; m++){
        printf("%d ",a[m]);
    }
} 
```

但是，如果我将声明放在数组上方的开头，它就可以工作。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-27T19:58:53.027

看起来您正在以 ANSI C 模式编译。在 C89 中，变量声明只允许在块的开头。

自 C99 以来，此限制已被删除。使用 which 编译`-std=c99`将允许您在任何地方声明变量。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-27T19:54:40.570

据我所知，所有声明都必须在代码之上

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-27T19:57:57.637

您可能正在使用部分支持 C99（或根本不支持）的编译器，其中禁止就地变量声明。

使用这样的编译器需要您在“可执行”代码之前声明变量。

这是 C89 和以前的限制。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-27T20:13:54.143

实际上不是答案，但我还不能对问题发表评论。我同意上面关于您使用的 C 实现的人们的回答；正在使用导致错误。我建议您尝试的是 for (int m = 0, ...) 有两个原因：查看它是否可以编译，以及范围（从外观上看，您不需要 m 在 for 循环之外）希望这会有所帮助

# php - 在时间戳中添加日期和使用 strtotime 添加日期有什么区别？

> ID：13103625
> 
> 赞同：1
> 
> 时间：2012-10-27T19:51:52.790
> 
> 标签：php, date, timestamp

假设我想增加一周，`27-10-2012`这样我就可以使用：

```
$week = 60*60*24*7;
$newdate = strtotime('27-10-2012') +$week; 
```

或者我可以使用

```
$newdate = strtotime('+1 week',strtotime('27-10-2012')); 
```

或者：

```
$date = new DateTime('2012-10-27');
$date->add(new DateInterval('P7D')); 
```

那么有什么区别，尤其是在使用周而不是月时？

参考：-
[http://www.php.net/manual/en/function.strtotime.php](http://www.php.net/manual/en/function.strtotime.php)
[http://www.php.net/manual/en/function.date.php](http://www.php.net/manual/en/function.date.php)
及其函数签名。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-27T20:09:30.827

从纯代码的角度来看，它们都具有相同的值：

```
<?php
    $week = 60*60*24*7;
    $newdate = strtotime('27-10-2012') +$week;

    echo $newdate;
    echo '<br>';

    $newdate = strtotime('+1 week',strtotime('27-10-2012'));

    echo $newdate;
    echo '<br>';

    $date = new DateTime('2012-10-27');
    $date->add(new DateInterval('P7D'));

    echo strtotime($date->format('d-m-Y'));
?> 
```

输出：

```
1351900800
1351900800
1351900800 
```

从性能的角度来看，它有点不同。

方法1重复10.000次耗时0.025587s

方法2重复10.000次耗时0.12083s

方法3重复10.000次耗时0.05738s

在任何情况下，它都非常小，您无需担心。现在，问问自己：哪一个更具可读性？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-27T20:01:19.413

性能上可能存在差异，但是（除非代码在一个大循环中）对开发人员来说最重要的差异将是可读性。试着想象一下自己 1 年后，当你要更新你的代码时，你会看到：

```
$date->add(new DateInterval('P7D')); 
```

那边的那条线说：在我的日期上加上一个间隔，一个等于“P7D”的间隔……不管那是什么意思。

或者你可以看到这个：

```
$week = 60*60*24*7;
$newdate = strtotime('27-10-2012') +$week; 
```

想一想，好的，我在那个日期添加了一个变量 $week 。一周等于每分钟 60 秒、每小时 60 分钟、每天 24 小时和每周 7 天。是的，没错。

或者你可以看到：

```
$newdate = strtotime('+1 week',strtotime('27-10-2012')); 
```

并说： $newdate 等于 27-10-2012 之后的一周... NEXT！

PHP 本身就已经够乱了，不要让他变得更混乱。

关于性能，您可以确定这三者之间不会有重大差异，尽管`strtotime('+1 week'...`需要`new DateInterval('P7D')`进行一些文本解析，因此可能会出现一些问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-27T20:05:20.357

如果您正在谈论性能方面/内存使用情况，那么您的第一个示例可能是最直接的和内存意识的。话虽这么说，差异很小，除非您循环访问数千个结果并解析日期，否则您不会注意到任何差异。

对象很棒，但它们确实使用更多的内存，因为它们具有更多的功能和能力。 `DateTime`是一个很好用的对象，但是当做一些简单的事情时，比如给一个日期加上一周，`strtotime`就足够了。例如，您可以步行到 1 个街区外的商店或乘坐豪华轿车……如果您所做的只是增加一周，这有点矫枉过正。

话虽如此，`DateTime`当涉及到不同地点的时区和时间时，我会尝试更频繁地使用。从这个意义上说，效果很好，绝对不是矫枉过正。

纯属个人意见。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-27T20:18:09.380

**处理几周很容易尝试一个月**通常我会问自己这个问题..一个月有多少天或几周？肯定会走`60*60*24*Number of days`......因为每个月的每一天都不是固定的，所以你可能会罚款你自己有一些不准确

简单的编程错误

```
$newdate = time() + (60 * 60 * 24 * 28);
                                     ^-----Now you have look for num of days
var_dump(date("Y-m-d", $newdate)); //string '2012-11-24' (length=10)

$newdate = strtotime('+1 month', strtotime('27-10-2012'));
var_dump(date("Y-m-d", $newdate)); //string '2012-11-27' (length=10)

$newdate = new DateTime('2012-10-27');
$newdate->add(new DateInterval('P1M'));
var_dump($newdate->format("Y-m-d")); //string '2012-11-27' (length=10) 
```

从示例编号 1 选项出来

另一方面.... PHP DOC说

> m/d/y 或 dmy 格式的日期通过查看各个组件之间的分隔符来消除歧义：如果分隔符是斜杠 (/)，则假定为美式 m/d/y；而如果分隔符是破折号 (-) 或点 (.)，则假定为欧洲 dmy 格式。
> 
> 为避免潜在的歧义，最好尽可能使用 ISO 8601 (YYYY-MM-DD) 日期或 DateTime::createFromFormat()。

我敢打赌`DateTime::createFromFormat()`这是处理日期最可靠的方式，因为您`100%`可以确定您在任何时间点传递的格式

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-09-28T19:16:47.983

我对@pikzen（2012 年）获得的结果有点惊讶，所以我使用`strtotime()`. 我认为这个问题不是从正确的角度考虑的。

如果我们要使用`strtotime()`时间戳，则应在执行任何操作之前从头开始转换时间戳。

**EG**我目前正在编写一个算法，该算法会在很长一段时间内创建重复的停电和假期，当然，需要大量的日期验证和操作。

我使用 PHP 7 进行了 1,000,000 次重复的小测试，结果如下：

[![日期添加测试结果](../Images/6736a25b509d1d6fe8097834df3dab49.png)](https://i.stack.imgur.com/00UzN.jpg)

对于必须处理大量日期操作的复杂算法，在我看来，处理整数时间戳而不是字符串 DateTimes 有一点好处。

这是用于我的测试的代码：

```
set_time_limit(180); //3 minutes

echo "<style>table, tr, th, td {border-style:solid; padding:2px;}</style>" .
    "<h1>Date add using strtotime() 1,000,000 repetitions</h1>" . 
    "<table><b><tr style='background-color:LavenderBlush;'><th>Unit</th>" .
    "<th>String date with conversion</th><th>String date w/o conversion</th>" . 
    "<th>Timestamp with conversion</th><th>timestamp w/o conversion</th></tr></b>";

//add day
echo "<tr style='background-color:aqua;'><td><b>Day</b></td>";

$date = date("Y-m-d");

$test = microtime(true);

for ($i = 0; $i < 1000000; $i++) {

    $date = date('Y-m-d', strtotime($date . '+1 day'));
}

echo "<td>" . (microtime(true) - $test) . "</td>";

$date = date("Y-m-d");

$test = microtime(true);

for ($i = 0; $i < 1000000; $i++) {

    $newDate = strtotime($date . '+1 day');
}

echo "<td>" . (microtime(true) - $test) . "</td>";

$date = strtotime(date("Y-m-d"));

$test = microtime(true);

for ($i = 0; $i < 1000000; $i++) {

    $newDate = date('Y-m-d', strtotime('+1 day', $date));
}

echo "<td>" . (microtime(true) - $test) . "</td>";

$date = strtotime(date("Y-m-d"));

$test = microtime(true);

for ($i = 0; $i < 1000000; $i++) {

    $date = strtotime('+1 day', $date);
}

echo "<td>" . (microtime(true) - $test) . "</td><tr>";

//add week
echo "<tr style='background-color:LightCyan;'><td><b>Week</b></td>";

$date = date("Y-m-d");

$test = microtime(true);

for ($i = 0; $i < 1000000; $i++) {

    $date = date('Y-m-d', strtotime($date . '+1 week'));
}

echo "<td>" . (microtime(true) - $test) . "</td>";

$date = date("Y-m-d");

$test = microtime(true);

for ($i = 0; $i < 1000000; $i++) {

    $newDate = strtotime($date . '+1 week');
}

echo "<td>" . (microtime(true) - $test) . "</td>";

$date = strtotime(date("Y-m-d"));

$test = microtime(true);

for ($i = 0; $i < 1000000; $i++) {

    $newDate = date('Y-m-d', strtotime('+1 week', $date));
}

echo "<td>" . (microtime(true) - $test) . "</td>";

$date = strtotime(date("Y-m-d"));

$test = microtime(true);

for ($i = 0; $i < 1000000; $i++) {

    $date = strtotime('+1 week', $date);
}

echo "<td>" . (microtime(true) - $test) . "</td><tr>";

//add month
echo "<tr style='background-color:LightGreen;'><td><b>Month</b></td>";

$date = date("Y-m-d");

$test = microtime(true);

for ($i = 0; $i < 1000000; $i++) {

    $date = date('Y-m-d', strtotime($date . '+1 month'));
}

echo "<td>" . (microtime(true) - $test) . "</td>";

$date = date("Y-m-d");

$test = microtime(true);

for ($i = 0; $i < 1000000; $i++) {

    $newDate = strtotime($date . '+1 month');
}

echo "<td>" . (microtime(true) - $test) . "</td>";

$date = strtotime(date("Y-m-d"));

$test = microtime(true);

for ($i = 0; $i < 1000000; $i++) {

    $newDate = date('Y-m-d', strtotime('+1 month', $date));
}

echo "<td>" . (microtime(true) - $test) . "</td>";

$date = strtotime(date("Y-m-d"));

$test = microtime(true);

for ($i = 0; $i < 1000000; $i++) {

    $date = strtotime('+1 month', $date);
}

echo "<td>" . (microtime(true) - $test) . "</td><tr>";

//add year
echo "<tr style='background-color:LightGoldenRodYellow;'><td><b>Year</b></td>";

$date = date("Y-m-d");

$test = microtime(true);

for ($i = 0; $i < 1000000; $i++) {

    $date = date('Y-m-d', strtotime($date . '+1 year'));
}

echo "<td>" . (microtime(true) - $test) . "</td>";

$date = date("Y-m-d");

$test = microtime(true);

for ($i = 0; $i < 1000000; $i++) {

    $newDate = strtotime($date . '+1 year');
}

echo "<td>" . (microtime(true) - $test) . "</td>";

$date = strtotime(date("Y-m-d"));

$test = microtime(true);

for ($i = 0; $i < 1000000; $i++) {

    $newDate = date('Y-m-d', strtotime('+1 year', $date));
}

echo "<td>" . (microtime(true) - $test) . "</td>";

$date = strtotime(date("Y-m-d"));

$test = microtime(true);

for ($i = 0; $i < 1000000; $i++) {

    $date = strtotime('+1 year', $date);
}

echo "<td>" . (microtime(true) - $test) . "</td><tr></table>";

//string date comparation 

echo "<br /><h1>Date comparission with 1,000,000 repetition</h1>";

$date = date("Y-m-d");

$i = 0;

$newDate = date('Y-m-d', strtotime($date . '+1 year'));

$test = microtime(true);

while ($i < 1000000) {

    if ($date !== $newDate) {

        $i++;
    }
}

echo "<br / ><b>String date comparission:</b> " . (microtime(true) - $test) . "<br />";

//timestamp comparision

$date = strtotime($date);

$i = 0;

$newDate = strtotime($newDate);

$test = microtime(true);

while ($i < 1000000) {

    if ($date !== $newDate) {

        $i++;
    }
}

echo "<b>timestamp comparission:</b> " . (microtime(true) - $test) . "<br />"; 
```

# c++ - C++中的内存分配和删除

> ID：13103632
> 
> 赞同：-2
> 
> 时间：2012-10-27T19:52:46.860
> 
> 标签：c++, pointers, memory-management

有什么区别：双重删除，内存泄漏，删除堆栈内存？导致这些错误的条件是什么？我在参考[这个测试的问题 5 时](http://courses.skule.ca/exams/custom/20089/ECE244_2008_ts_1288731279.pdf)问这个问题。当涉及到这些东西时，我不太熟悉什么是好的做法和坏的做法，所以任何指南/提示都值得赞赏！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-27T21:19:45.800

引用的链接有一个测试，上面已经有答案，所以我认为进一步澄清测试的答案不会有助于作弊。

一个正确的程序总是会在每次调用 new 时只执行一次 delete 调用。所有这些事情都违反了这条规则。

双重删除多次调用删除。

```
A* p = new A;
if ( someOption )
    delete p;

... more code ...
delete p;    // p is double freed if someOption is true
return; 
```

内存泄漏根本不会调用 delete。

```
A* p = new A;
if ( someOption )
    delete p;    // p leaked if someOption is not true
return; 
```

并且删除堆栈内存调用删除不是从新返回的内存。

```
A a;

A* p;
if ( someOption )
    p = &a;
else
    p = new A;

delete p;    // p is deletion of stack memory if someOption is true 
```

# php - 如何使用 g-wan 运行 PHP 或 ruby 脚本？

> ID：13103641
> 
> 赞同：1
> 
> 时间：2012-10-27T19:53:30.767
> 
> 标签：php, ruby, g-wan

我安装了 php5-cli 和 ruby​​，但都不起作用！

在日志中，我在 new /home/olivier/gwan/0.0.0.0_8080/#0.0.0.0/csp/php.php 中有 * 错误

其中 php.php 很简单：

```
<?php
  echo "Hello World";
?> 
```

在 gwan.log 中，我没有看到任何关于加载我的 php 脚本的信息！？

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-27T20:12:35.703

当前可用的 G-WAN v3.3.28 不支持 PHP。G-WAN v3.10（据说本月发布）将有PHP支持，据作者介绍：http: [//gwan.ch/blog/20121021.html](http://gwan.ch/blog/20121021.html)

# c++ - 在 c++11 中使用带有 std::thread 的原子

> ID：13103645
> 
> 赞同：10
> 
> 时间：2012-10-27T19:53:55.310
> 
> 标签：c++, multithreading, gcc, c++11, atomic

我有一个线程，我想坐在一个循环中，直到我准备好退出程序，此时我希望它跳出循​​环并退出，以便我可以调用`std::thread::join`它。在 c++03 的日子里，我只会使用一个受锁保护的 bool 来告诉线程何时退出。这次我想我会利用新的原子库（特别是`std::atomic_bool`），但我遇到了麻烦。下面是我的测试用例：

```
#include <atomic>
#include <thread>
#include <cstdio>

using namespace std;

void setBool(atomic_bool& ab)
{
    ab = true;
}

int main()
{
    atomic_bool b;
    b = false;
    thread t(setBool, b);
    t.join();
    printf("Atomic bool value: %d\n", b.load());
    return 0;
} 
```

当我尝试编译时，声明`thread t`吐出[这个怪物。](http://pastebin.com/SpRQW4W1)错误的核心部分似乎是：

> 从“std::atomic_bool”类型的右值初始化“std::atomic_bool&”类型的非常量引用无效</p>

为什么我无法获得对 a 的引用`atomic_bool`？我应该怎么做？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-10-27T19:58:37.080

您必须明确地将 ref 传递给您的线程。使用`std::ref`将创建一个`std::reference_wrapper`可复制的并将引用传递给您的函数。

```
thread t(setBool, std::ref(b)); 
```

否则它将尝试复制您的原子，这是不可复制的。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-10-27T22:47:00.657

`std::ref`正如竹子解释的那样，如果你真的希望它们通过`std::thread`的变量参数构造函数通过引用传递，你必须包装对象。（同样适用于`std::async`。）为避免这种违反直觉的行为，您可以使用 lambda，它的行为与您预期的完全一样。只需使用它来创建线程：

```
thread t([&]{ setBool(b); }); 
```

使用 lambdas，当您想通过引用传递参数时，不需要 ref/cref 废话。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2016-02-03T01:06:44.837

我也遇到了这个问题，我认为您也可以通过将地址传递给原子来解决您的问题，如下所示：

```
std::atomic<bool> b{false};
std::thread t(setBool, &b); 
```

你的函数需要一个指向原子的指针：

```
void setBool(std::atomic<bool>* ab) 
```

我不确定公认的做法是什么，我想您可以通过这种方式将空指针传递给原子，但我不确定您为什么要这样做。

# php - 使用 php email() 发送的电子邮件是否显示在已发送文件夹中？

> ID：13103646
> 
> 赞同：3
> 
> 时间：2012-10-27T19:54:27.357
> 
> 标签：php, email

> **可能重复：**
> [在 PHP 邮件功能后将电子邮件放入“已发送”文件夹](https://stackoverflow.com/questions/10975488/putting-e-mail-into-sent-folder-after-php-mail-function)

我尝试发送几封电子邮件来测试 php mail() 函数，似乎在 gmail 中，电子邮件显示在已发送文件夹中，但在其他电子邮件客户端中却没有。如果我要从 steve.jobs@apple.com 之类的帐户向自己发送电子邮件，它会显示在该电子邮件的已发送文件夹中吗？不是我想那样做，只是我很好奇。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-27T19:58:07.820

这取决于您的电子邮件提供商。

对于大多数电子邮件提供商，电子邮件不会显示在“已发送邮件”文件夹中。电子邮件使用 SMTP 直接发送，其中没有文件夹的概念。当客户在“已发送邮件”文件夹中保留一份副本时，这只是客户的一项功能。

典型的 SMTP 工作流程（非常高级）：

```
> compose message -> "send" (local client may save a copy)
> sendmail(login-info, recip, content) -> SMTP server
> internet magic happens here (email routing) >
> destination server -> POP3/IMAP/web -> recipient's mailbox 
```

Gmail 有点不同……因为他们实现了自己的 SMTP 服务器，所以他们使用您的帐户凭据捕获通过中继的所有邮件并保留一份副本。这对他们来说有点独特。请注意，这只会在使用浏览器界面的 IMAP 连接时显示在您的 Gmail 发送项目中。如果您使用客户端访问您的电子邮件，它不会显示在本地“已发送邮件”文件夹中。

Gmail 风格的邮件工作流程（注意 Gmail 服务器的唯一区别）：

```
> compose message -> "send" (local client may save a copy)
> sendmail(login-info, recip, content) -> SMTP server (Gmail server saves a copy)
> internet magic happens here (email routing) >
> destination server -> POP3/IMAP/web -> recipient's mailbox 
```

即使对于上述 Gmail 的情况，您也不会访问其他人的“已发送邮件”文件夹。因为您提供了登录凭据来发送电子邮件，所以它最终会出现在您帐户的已发送项目中。现在，如果您碰巧访问了另一个人的电子邮件凭据以发送电子邮件，那就是另一回事了（另一个人的问题）......

如果您可以访问电子邮件中继，请试一试，看看会发生什么。尝试以“比尔·盖茨”或其他有趣的别名向自己发送电子邮件。如果您设法让电子邮件通过，请查看收件人的原始标题并查看显示的信息。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-27T20:03:45.047

**IMAP 会将其保存在已发送的文件夹**中，而 SMTP 则不会 - 如果您从手机发送 SMTP，它将保留在您发送的手机中，但没有其他地方，如果您从家庭 Outlook 发送它，它将保留在那里。 . 如果您通过 PHP 发送它，它几乎肯定不会保存在任何地方（但您可以密件抄送：给自己）.. 但是当您通过 gmail 发送时，您会通过一个帐户发送，他们会为您复制它（免费）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-27T19:57:02.063

不，您没有使用您的客户端，而是直接使用 SMTP 服务器。

当您直接使用自己的电子邮件客户端时，您只会在发送文件夹中获得副本。您的邮件客户端通常会为您连接到 SMTP 服务器并保留一份本地副本。

# javascript - 为什么要使用匿名函数？

> ID：13103649
> 
> 赞同：0
> 
> 时间：2012-10-27T19:54:43.073
> 
> 标签：javascript, jquery, anonymous-function

> **可能重复：**
> [在 JavaScript 事件代码中对回调和参数使用匿名函数而不是命名函数有什么好处？](https://stackoverflow.com/questions/10273185/what-are-the-benefits-to-using-anonymous-functions-instead-of-named-functions-fo)

我一直在阅读/编写一些基本的 Javascript 和 JQuery 代码，并注意到在我阅读的几乎每个教程中，都使用匿名函数而不是命名函数。

例如，类似：

```
$('document').ready(function(){
    alert("I am ready.");
}); 
```

相对：

```
function ready(){
    alert("I am ready.");
}

$('document').ready(ready()); 
```

第二个例子不是更容易阅读/理解吗？现在，我意识到这些都是非常简单的示例，但我想要说明的一点是，我觉得匿名函数使代码看起来混乱且难以理解。到处都有大括号和括号，因为它是匿名的，所以您不能在其他任何地方使用该函数。

功能的全部意义不在于能够将您的代码组织成不同的模块以使您的代码看起来更干净，使调试更容易并避免冗余代码吗？

为什么有人会使用匿名函数而不是命名函数？他们的目的是什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-27T19:59:05.373

匿名函数的要点是您只使用它们一次，而不必在其他地方定义它们（以便重用）。它很整洁，因为它们在要使用的地方（在特定上下文中）是正确的。

使用它们是您的选择。如果你不喜欢他们..不要！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-27T19:57:58.383

因为如果您不需要/想要名称，那么将变量环境与未使用的名称混淆是没有意义的。

* * *

仅供参考，这个：

```
$('document').ready(ready()); 
```

应该是这样的：

```
$('document').ready(ready); 
```

...除非您更改了函数以使其*返回*一个函数。

```
function ready() {
    return function() {
        alert("I am ready.");
    }
} 
```

但是正如你在这里看到的，我再次使用了一个匿名函数，因为它在它的变量环境中没有其他用途，除了作为返回值。

# directx - 如何转换边界框以进行视锥体剔除？

> ID：13103651
> 
> 赞同：1
> 
> 时间：2012-10-27T19:54:52.127
> 
> 标签：directx, intersection, coordinate-transformation, culling

我有一个场景图，其中的节点包含变换和边界框，以及一个视图平截头体，我从 viewProjection 矩阵构建每个帧。但是，框在框的局部空间中有 4 个顶点的坐标。什么必须我将它们转换为，将它们放入与视锥相同的空间，这样我就可以检查与视锥的交叉点？我尝试将它们带入世界空间，但这很奇怪，因为我有 50 个世界矩阵（我使用实例化，每个实例都有自己的世界/变换矩阵）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-27T21:16:09.183

通常你想在单词空间中碰撞 BB 和截锥体。原始算法：

```
mtxViewProjTranspose = MtxTranspose(mtxView * mtxProj);
frustumViewWorld = frustumView * mtxViewProjTranspose;
foreach(i)
{
    bbWorld[i] = bb[i] * mtxWorld;
    bCull[i] = collide(BBWorld[i], frustumViewWorld );
} 
```

您也可以在视图空间中执行此操作（但效果不太好）：

```
mtxProjTranspose = MtxTranspose(mtxProj);
frustumViewViewSpace = frustumView * mtxProjTranspose;
    foreach(i)
    {
        bbView[i] = bb[i] * mtxWorld[i] * mtxView;  // More calculations here
        bCull[i] = collide(bbView[i], frustumViewViewSpace );
    } 
```

如果您认为将边界框（4 个顶点）转换为世界空间很奇怪，那么想想在网格本身中有数千个顶点时这样做是多么奇怪。=) 据我了解，碰撞检测比这种简单的乘法要昂贵得多。但：

*   为了缩短碰撞列表，您可以将截锥体转换为世界空间并粗略检查哪些节点值得与截锥体碰撞，哪些不值得。**所以你也不需要翻译他们的 BB**。这取决于您的场景实现。
*   根据您在 HLSL 方面的技能、游戏风格和目标最终用户硬件，您可以（或不能）在 GPU （计算着色器，甚至在 SM 4.0 上可用，但有一些限制）上**移动 BB 变换，因为 GPU 通常使用网格 VB 执行此操作。**但我认为它不会给您带来出价收益。然而，稍后将碰撞检测转移到 GPU 也将是一个很好的训练。

希望它的帮助！

# mercurial - 修复 Mercurial Codeplex 存储库 - 始终回滚

> ID：13103659
> 
> 赞同：0
> 
> 时间：2012-10-27T19:57:33.487
> 
> 标签：mercurial, codeplex

我尝试将我的最新更改推送到 Codeplex 存储库。但是我总是得到回滚（见下文）。我有哪些选择？

1.  我已经尝试`force`和`debug`选择，没有进一步的细节或接受更改。
2.  试图删除整个存储库（删除整个 Codeplex 项目不是一个好的选择） - 但还没有找到方法。想要“推全新”。
3.  这里有人写了另一个[SO question](https://stackoverflow.com/questions/6326950/cannot-push-to-hg-project-on-codeplex)，我应该运行恢复。我试过`recover`and `hg recover`，但总是相同的回滚。

那么我能做什么呢？

我得到的小信息：

```
pushing to https://hg.codeplex.com/myproject
searching for changes
remote: adding changesets
remote: adding manifests
remote: adding file changes
remote: transaction abort!
remote: rollback completed
[command returned code 1 Sat Oct 27 21:40:53 2012] 
```

![水银期权](../Images/a4af37834efcdede843723dc4cb2c8fa.png) 尝试过`recover`并且`hg recover`

编辑：

正如下面的评论，更新到 Tortoise / Hg 2.5.1/2.3.2 - 只是为了尝试它。情况不变，将尝试其他提示。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T17:44:53.987

根据上面的评论，这就是我所做的。

1.  备份我的本地目录
2.  从 Codeplex 再次克隆旧版本
3.  从备份复制本地文件（不是存储库，只有文件）
4.  现在提交并推送 OK

缺点：让我失去了 Codeplex 和本地版本之间的历史。 **任何更好的想法仍然值得赞赏。**

# python - Python 中的 Google App Engine 循环模型依赖项

> ID：13103668
> 
> 赞同：2
> 
> 时间：2012-10-27T19:58:31.370
> 
> 标签：python, google-app-engine, google-cloud-datastore

我有以下 python 模块：

```
from google.appengine.ext import db
from user import User

class Post(db.Model):
    content = db.TextProperty()
    time = db.DateTimeProperty(auto_now_add=True)
    user = db.ReferenceProperty(User)
    topic = db.ReferenceProperty(Topic)

class Forum(db.Model):
    parent_ = db.SelfReferenceProperty()
    name = db.StringProperty()
    description = db.StringProperty()
    topics_count = db.IntegerProperty(default=0)
    posts_count = db.IntegerProperty(default=0)
    last_post = db.ReferenceProperty(Post)

class Topic(db.Model):
    forum = db.ReferenceProperty(Forum)
    title = db.StringProperty()
    replies_count = db.IntegerProperty(default=0)
    views = db.IntegerProperty(default=0)
    time = db.DateTimeProperty(auto_now_add=True)
    user = db.ReferenceProperty(User)
    last_post = db.ReferenceProperty(Post) 
```

这不起作用，因为我`Topic`在`Post`课堂上使用。我阅读[了这个解决方案](https://stackoverflow.com/questions/6402522/python-mutually-dependent-classes-circular-dependencies/6402530#6402530)并解决了循环依赖问题。生成的模块如下：

```
from google.appengine.ext import db
from user import User

class Post(db.Model):
    content = db.TextProperty()
    time = db.DateTimeProperty(auto_now_add=True)
    user = db.ReferenceProperty(User)

class Forum(db.Model):
    parent_ = db.SelfReferenceProperty()
    name = db.StringProperty()
    description = db.StringProperty()
    topics_count = db.IntegerProperty(default=0)
    posts_count = db.IntegerProperty(default=0)
    last_post = db.ReferenceProperty(Post)

class Topic(db.Model):
    forum = db.ReferenceProperty(Forum)
    title = db.StringProperty()
    replies_count = db.IntegerProperty(default=0)
    views = db.IntegerProperty(default=0)
    time = db.DateTimeProperty(auto_now_add=True)
    user = db.ReferenceProperty(User)
    last_post = db.ReferenceProperty(Post)

Post.topic = db.ReferenceProperty(Topic) 
```

但是现在我有另一个问题。App Engine 创建`Post`表，但它没有主题列。我怎么解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T15:09:06.007

这种方法不能正常工作，因为`db.Model`有一个元类在创建类时对 db 属性列表进行初始化工作。由于您的属性当时不存在，因此不会对其应用必要的初始化。

您可能需要考虑切换到 NDB，它通过对关键属性之一使用字符串名称来支持循环引用。

# charts - 如何将 Flot 与 AngularJS 集成？

> ID：13103671
> 
> 赞同：37
> 
> 时间：2012-10-27T19:58:37.900
> 
> 标签：charts, highcharts, angularjs, flot

我是 Angular 和 Flot 的新手，但对 Jquery 和 Javascript 有经验。我对如何将 Flot 图表绑定到 Angular 数据模型有点困惑，因为 Flot 是一个 JQuery 插件。我四处搜索，但找不到一个例子。

我也很乐意使用 highcharts、google-charts 或任何其他图表解决方案。

* * *

## 回答 #1

> 赞同：67
> 
> 时间：2012-10-27T21:52:45.330

由于图表涉及大量的 DOM 操作，因此指令是要走的路。

数据可以保存在控制器中

```
App.controller('Ctrl', function($scope) {
    $scope.data = [[[0, 1], [1, 5], [2, 2]]];
}); 
```

您可以创建自定义 HTML 标记[1](http://jsfiddle.net/Trufa/ksdqhqb2/1/)指定要从中获取数据的模型

```
 <chart ng-model='data'></chart> 
```

哪个角度可以通过指令编译

```
App.directive('chart', function() {
    return {
        restrict: 'E',
        link: function(scope, elem, attrs) {
            var data = scope[attrs.ngModel];
            $.plot(elem, data, {});
            elem.show();
        }
    };
}); 
```

[这里的例子](http://jsfiddle.net/Trufa/ksdqhqb2/1/)。

对于大多数修改 DOM 的插件来说，这个过程是相似的。

-*-

此外，您可以观察图表底层数据的变化并重新绘制它，这样您就可以通过 $http 服务从控制器中获取数据并自动更新视图。这可以通过修改指令定义对象中的链接函数来实现

```
 var chart = null,
       opts  = { };

    scope.$watch(attrs.ngModel, function(v){
        if(!chart){
            chart = $.plot(elem, v , opts);
            elem.show();
        }else{
            chart.setData(v);
            chart.setupGrid();
            chart.draw();
        }
    }); 
```

注意在指令中使用 Flot 的 API 来实现我们想要的。

[这里是完整的例子](http://jsfiddle.net/Trufa/h2szst34/1/)

* * *

[1](http://jsfiddle.net/Trufa/ksdqhqb2/1/)也可以是一个属性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-27T20:50:20.550

要将 jQuery 插件与 angularJS 一起使用，您必须将它们包装在指令中，您可以通过阅读 angularUI 指令的源代码找到一些 jQuery 插件指令的示例：[https ://github.com/angular-ui/angular-ui/tree /主/模块/指令](https://github.com/angular-ui/angular-ui/tree/master/modules/directives)

# javascript - 使用phonegap在android中拨打电话号码

> ID：13103676
> 
> 赞同：0
> 
> 时间：2012-10-27T19:59:40.250
> 
> 标签：javascript, android, cordova

我正在使用 Phonegap 编写应用程序。在我的应用程序中，我需要打开本机 android 拨号器。我在用着：

```
document.location = 'tel:' + NumToDial; 
```

但是，是否可以让它自动拨号而不需要用户在本机 android 拨号器上单击拨号？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T16:59:49.720

No, it's not (ordinarily) possible, because of security restrictions.

Regular apps are not allowed to use the ACTION_CALL Intent. It's restricted to prevent unscrupulous apps from, say, auto-dialing a 1-900 number and costing the user money.

Only system apps (that is, those that come pre-installed on the device) have access to ACTION_CALL.

Non-system apps have to settle for opening the dialer.

# performance - 使用 CL 寄存器的移位会导致部分寄存器停顿吗？

> ID：13103680
> 
> 赞同：8
> 
> 时间：2012-10-27T20:00:05.437
> 
> 标签：performance, assembly, x86, bit-shift

可变移位能否在 上产生部分寄存器停顿（或寄存器重组 µops）`ecx`？如果是这样，在哪个微架构上？

我已经在 Core2 (65nm) 上对此进行了测试，它似乎是只读的`cl`。

```
_shiftbench:
    push rbx
    mov edx, -10000000
    mov ecx, 5
  _shiftloop:
    mov bl, 5   ; replace by cl to see possible recombining
    shl eax, cl
    add edx, 1
    jnz _shiftloop
    pop rbx
    ret 
```

替换`mov bl, 5`为`mov cl, 5`没有任何区别，如果正在进行寄存器重新组合，它会有所不同，这可以通过替换来证明`shl eax, cl`（`add eax, ecx`在我的测试中，`add`当写入`cl`而不是时，该版本经历了 2.8 倍的减速`bl`）。

* * *

试验结果：

*   Merom：没有观察到失速
*   Penryn：没有观察到失速
*   Nehalem：没有观察到失速

更新：`shrx`Haswell 的新班次*确实*显示了这种停滞。移位计数参数没有写成 8 位寄存器，因此这可能是意料之中的，但文本表示实际上并没有说明此类微架构细节。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-08T22:06:03.373

正如目前所说的（“Can a shift using the CL register ...”），问题的标题包含了它自己的答案：对于现代处理器，CL 上永远不会出现部分寄存器停顿，因为 CL 永远无法从更小的东西重新组合。

是的，处理器知道您要移动的数量实际上包含在 CL 中，准确地说是 CL 的 5 或 6 个最低有效位。它可能在 ECX 上停滞不前的一种方法是，它考虑指令依赖关系的粒度没有低于完整的寄存器。不过，这种担心已经过时了：将整个 ECX 寄存器视为依赖项的最新 Intel 处理器是 Pentium 4。参见 Agner Fog 的[非官方优化手册](http://www.agner.org/optimize/microarchitecture.pdf)，第 121 页。但话又说回来，对于 P4，这不会被称为部分寄存器停顿，程序只能成为错误依赖的牺牲品（例如，如果 CH 在移位之前是修饰符）。

# c# - 在屏幕上绘制位图图像

> ID：13103682
> 
> 赞同：4
> 
> 时间：2012-10-27T20:00:25.197
> 
> 标签：c#, bitmap

我试图在我的主监视器上打印（显示在屏幕上）屏幕截图，我想我已经拥有了所有必要的变量来实现这一点，但我不知道如何通过“PaintEventArgs”。我应该寄什么，我该怎么做？

编辑：这是我想做的 [http://msdn.microsoft.com/en-us/library/8tda2c3c.aspx](http://msdn.microsoft.com/en-us/library/8tda2c3c.aspx)

```
static void Main(string[] args)
{
    Rectangle rect = Screen.PrimaryScreen.Bounds;
    int color = Screen.PrimaryScreen.BitsPerPixel;
    PixelFormat pf;
    pf = PixelFormat.Format32bppArgb;           
    Bitmap BM= new Bitmap(rect.Width, rect.Height, pf);
    Graphics g = Graphics.FromImage(BM);
    g.CopyFromScreen(rect.Left, rect.Top, 0, 0, rect.Size);
    Bitmap bitamp = new Bitmap(BM);
    print (bmp,) // what now?

}

private static void print(Bitmap BM, PaintEventArgs e)
{
    Graphics graphicsObj = e.Graphics; // or "Bitmap bitmap = new Bitmap("Grapes.jpg");"
    graphicsObj.DrawImage(BM, 60 ,10); // or "e.Graphics.DrawImage(bitmap, 60, 10);"
    graphicsObj.Dispose();
} 
```

PS：这是我第一次使用该网站，所以请原谅我可能犯的任何愚蠢的错误

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-27T20:23:23.270

The simplest way would be to use a Windows Forms [`PictureBox`](http://msdn.microsoft.com/en-us/library/system.windows.forms.picturebox.aspx) inside a [`Form`](http://msdn.microsoft.com/en-us/library/system.windows.forms.form.aspx).

For example:

```
Form form = new Form();
form.Text = "Image Viewer";
PictureBox pictureBox = new PictureBox();
pictureBox.Image = YourImage;
pictureBox.Dock = DockStyle.Fill;
form.Controls.Add(pictureBox);
Application.Run(form); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-27T20:34:05.997

您需要`print(Bitmap, PaintEventArgs)`在表单`Paint`事件中调用。

**尝试这个**

```
private void Form1_Load(object sender, EventArgs e)
{
    Paint += new PaintEventHandler(Form1_Paint); //Link the Paint event to Form1_Paint; you can do this within the designer too!
}
private void print(Bitmap BM, PaintEventArgs e)
{
    Graphics graphicsObj = e.Graphics; //Get graphics from the event
    graphicsObj.DrawImage(BM, 60, 10); // or "e.Graphics.DrawImage(bitmap, 60, 10);"
    graphicsObj.Dispose();
}

private void Form1_Paint(object sender, PaintEventArgs e)
{
     Rectangle rect = Screen.PrimaryScreen.Bounds;
     int color = Screen.PrimaryScreen.BitsPerPixel;
     PixelFormat pf;
     pf = PixelFormat.Format32bppArgb;
     Bitmap BM = new Bitmap(rect.Width, rect.Height, pf); //This is the Bitmap Image; you have not yet selected a file,
     //Bitmap BM = new Bitmap(Image.FromFile(@"D:\Resources\International\Picrofo_Logo.png"), rect.Width, rect.Height);
     Graphics g = Graphics.FromImage(BM);
     g.CopyFromScreen(rect.Left, rect.Top, 0, 0, rect.Size);
     Bitmap bitamp = new Bitmap(BM);
     print(bitamp, e);
} 
```

谢谢，
我希望你觉得这有帮助:)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-09-05T03:21:39.613

让它简单而已。

```
 //Draw Image

    // location of you image
    Bitmap img = Properties.Resources.myImage;

    // set image 
    Image newImg = img;

    // draw a image
    e.Graphics.DrawImage(newImg, 180F, 18F, newImg.Width, newImg.Height); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-04-11T07:27:14.633

我有一个很好的解决方案，但你需要计算你的东西的位置和尺寸。不幸的是，我还没有弄清楚如何在屏幕上绘制 img。

```
using System;
using System.Drawing;
using System.Runtime.InteropServices;
using System.Threading;

namespace DIRECTDRAW
{
    class Program
    {
        [DllImport("user32.dll")]
        static extern IntPtr GetDC(IntPtr hwnd);

        static void draw(Rectangle r, Brush b, IntPtr hwnd)
        {
            using (Graphics g = Graphics.FromHdc(hwnd))
            {
                g.FillRectangle(b, r);
            }
        }

        static void Main(string[] args)
        {
            int w = 5;
            int h = 5;

            Point xy = new Point(960 - w, 540 - h);
            draw(new Rectangle(xy, new Size(w, h)), new SolidBrush(Color.White), GetDC(IntPtr.Zero));
            Thread.Sleep(1);
            Main(args);
        }
    }
} 
```

我放入了一个循环函数，这样你的“东西”就不会消失，我在 1 毫秒处做了等待部分，这样点就不会闪烁。谢天谢地，它是一个控制台应用程序，所以它不会冻结。

从[Draw Directly To Screen](https://www.youtube.com/watch?v=TkjG9cGJrHE "- YouTube 视频解决方案 -")中找到了这个解决方案。

# android - 如何从网格视图的返回位置获取图像的 Uri

> ID：13103683
> 
> 赞同：0
> 
> 时间：2012-10-27T20:00:31.297
> 
> 标签：android

我目前有一个网格视图，它可以将图像位置/ID 返回给父活动。我还想将图像 Uri 返回或提取到父活动，并将其设置为可以在父活动的其他地方解析的变量。我一直在寻找一点，但找不到适合我正在尝试的解决方案。

我返回位置的gridview子活动

```
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.grid_layout);

    GridView gridView = (GridView) findViewById(R.id.grid_view);

    // Instance of ImageAdapter Class
    gridView.setAdapter(new ImageAdapter(this));

    /**
     * On Click event for Single Gridview Item
     * */
    gridView.setOnItemClickListener(new OnItemClickListener() {
        @Override
        public void onItemClick(AdapterView<?> parent, View v,
                int position, long id) {

            Intent data = new Intent(PicPicker2.this, PictureActivity.class);
            // passing array index
            data.putExtra("id", position);
            setResult(Activity.RESULT_OK, data);
            finish();
        }
    });
} 
```

}

我目前在父活动中捕获结果的地方

```
 else if (reqCode == 2) {

                // Selected image id
                int position = data.getExtras().getInt("id");
                ImageAdapter imageAdapter = new ImageAdapter(this);
                ChosenImageView.setImageResource(imageAdapter.mThumbIds[position]);
              }
            }
        } 
```

我想在哪里解析变量

```
 Uri attached_Uri = Uri.parse("SOME VARIABLE OF THE RETURNED URI"); 
```

我想将 Uri attach_Uri = Uri.parse() 设置为在 gridview 中单击的项目。我只是一个周末的 Android 修补匠，试图学习平台的概念，所以解释和示例对我来说有很长的路要走，非常感谢。

添加了我的图像适配器

公共类 ImageAdapter 扩展 BaseAdapter {

```
private Context mContext;

// Keep all Images in array
public Integer[] mThumbIds = {
        R.drawable.pic_1, R.drawable.pic_2,
        R.drawable.pic_3, R.drawable.pic_4,
        R.drawable.pic_5, R.drawable.pic_6,
        R.drawable.pic_7, R.drawable.pic_8,
        R.drawable.pic_9, R.drawable.pic_10,
        R.drawable.pic_11, R.drawable.pic_12,
        R.drawable.pic_13, R.drawable.pic_14,
        R.drawable.pic_15
};

// Constructor
public ImageAdapter(Context c){
    mContext = c;
}

@Override
public int getCount() {
    return mThumbIds.length;
}

@Override
public Object getItem(int position) {
    return mThumbIds[position];
}

@Override
public long getItemId(int position) {
    return 0;
}

@Override
public View getView(int position, View convertView, ViewGroup parent) {
    ImageView imageView = new ImageView(mContext);
    imageView.setImageResource(mThumbIds[position]);
    imageView.setScaleType(ImageView.ScaleType.CENTER_CROP);
    imageView.setLayoutParams(new GridView.LayoutParams(70, 70));
    return imageView;
} 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-27T20:31:16.017

您将资源用作图像，因此 uri 的格式为`"android.resource://your.package.name/resource_id"`. 更具体地说，假设您在变量中有图像的索引`position`（就像在`onClick`方法中一样），并且您有`ImageAdapter`in的实例`mImageAdapter`（请注意，在您的情况下，您可以创建一个新副本适配器，但通常您希望使用通用实例）。那么以下内容将为您提供`Uri`

```
Uri imageUri = Uri.parse("android.resource://your.package.name/" + 
     mImageAdapter.getItem(position)); 
```

在上面的代码中是文件`"your.package.name"`中定义的包的名称。`AndroidManifest.xml`

# javascript - 对于 Backbone.js，如何显示 Backbone.Model 继承自 Backbone.Events？

> ID：13103684
> 
> 赞同：0
> 
> 时间：2012-10-27T20:00:37.473
> 
> 标签：javascript, backbone.js

在[http://addyosmani.github.com/backbone-fundamentals/](http://addyosmani.github.com/backbone-fundamentals/)中，据说

```
every single one of the following objects inherits from Backbone.Events:

Backbone.Model
Backbone.Collection
Backbone.Router
Backbone.History
Backbone.View 
```

我还可以在`backbone.js`以下内容中找到：

```
// Attach all inheritable methods to the Model prototype.
_.extend(Model.prototype, Events, {  .... 
```

但是，我试图通过

```
Backbone.Model.prototype.__proto__ === Backbone.Events 
```

在 Firebug 中，它显示`false`, 和

```
Backbone.Model.prototype.__proto__.__proto__ 
```

is already `null`，意味着原型链的末端。那么如何显示继承呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-27T20:29:48.387

您引用的页面不正确，Backbone 中没有任何内容继承自`Backbone.Events`. 但是，`Backbone.Events`混入了其他 Backbone “类”。您提到的代码位：

```
_.extend(Model.prototype, Events, { ... 
```

不是设置继承，只是混入`Events`' `Model`sprototype 中，效果类似这样：

```
for k in Events
    Model.prototype[k] = Events[k] 
```

所以它只是简单地将`Events`'s 方法添加到`Model`. [骨干文件](http://backbonejs.org/#Events)只说：

> **Backbone.Events**
> 
> **事件**是一个可以混入任何对象的模块，使对象能够绑定和触发自定义命名事件。

注意术语中的*混合。*

`Backbone.Events`甚至不是构造函数（它只是一个对象），所以没有什么可以继承的。

# javascript - 当浏览器窗口较小时，如何使滚动条出现？

> ID：13103687
> 
> 赞同：0
> 
> 时间：2012-10-27T20:00:53.970
> 
> 标签：javascript, iphone, css, browser, scrollbar

我已经在整个网站和网上研究了这个问题，但似乎找不到解决方案。我有一个非常简单的网站，中间有一个视频播放器。

我似乎不知道如何使滚动条出现，以便您在 iPad 或 iPhone 上打开网站时可以看到所有内容 - 或者当您缩小浏览器窗口时，

这对 iPad 来说是个大问题，因为这意味着观众无法播放视频播放器。我该如何解决？

我一直在想我的 CSS 中有什么东西导致了这个问题。但也许可以在我的文档头部使用一行简单的 javascript 来修复它？

我添加了溢出：滚动；到我的身体标签已经......无济于事。

这是我正在使用的 CSS，我认为可以解决此问题：

```
body {
    border: 0;
    vertical-align: baseline;
    list-style: none;
    text-decoration: none;
    line-height: normal;
    margin: 0;
    padding: 0;
    background: #195f88;
    background-image: url(../images/subtle-pattern-10.jpg);
    font-size: 14px;
    overflow: scroll!important;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-28T01:15:33.927

第一件事是第一 - 这个网站的 HTML 代码写得很糟糕。非常糟糕。内容区域如何放置在侧边栏 div 内？为什么使用（非常）大的相对位置声明来定位它？为什么侧边栏首先固定？

除非您大量重构代码，否则恐怕没有人（据我所知）可以帮助您。问题是，您的页面目前没有尺寸 - 由于所有内容都是浮动的或位置固定的，因此页面的“流程”中没有任何内容，因此从技术上讲，就浏览器而言，您没有任何内容可以显示。你的运气是你没有

```
#wrap { overflow: hidden; } 
```

试试看 - 看看会发生什么来证明我的意思。

# c# - 将图标添加到我的菜单列表

> ID：13103688
> 
> 赞同：1
> 
> 时间：2012-10-27T20:01:03.520
> 
> 标签：c#, windows, contextmenu, notifyicon

> **可能重复：**
> [如何在 c# windows 窗体应用程序中将图标添加到上下文菜单](https://stackoverflow.com/questions/6555691/how-to-add-icon-to-context-menu-in-c-sharp-windows-form-application)

我有一个附加到任务托盘应用程序的上下文菜单。代码如下。

```
private NotifyIcon  trayIcon;
private ContextMenu trayMenu;

    trayMenu = new ContextMenu();

    trayMenu.MenuItems.Add("Login", OnLogin);
    trayMenu.MenuItems.Add("LogOut", OnLogOut);
    trayIcon = new NotifyIcon(); 
```

问题是我似乎真的找不到任何属性来为每个菜单项设置图像/图标。这可能吗？任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-27T20:09:56.950

我认为您可以在其中添加图像，`ContextMenuStrip`但无法使用`ContextMenu`. 这是一个关于如何执行此操作的简单示例

**例子**

```
private void Form1_Load(object sender, EventArgs e)
{
    Image ContextMenuStripItemImages = Image.FromFile(@"D:\Resources\International\Picrofo_Logo.png"); //Set the image from the path provided
    NotifyIcon trayIcon;
    ContextMenuStrip trayMenu;
    trayMenu = new ContextMenuStrip();
    trayMenu.Items.Add("Login", ContextMenuStripItemImages).Click += new EventHandler(Login_Click); //Create a new item in the context menu strip and link its Click event with Login_Click
    trayMenu.Items.Add("LogOut", ContextMenuStripItemImages).Click += new EventHandler(LogOut_Click); //Create a new item in the context menu strip and link its Click event with LogOut_Click
    trayIcon = new NotifyIcon();
    trayIcon.ContextMenuStrip = trayMenu; //Set the ContextMenuStrip of trayIcon to trayMenu
}

private void Login_Click(object sender, EventArgs e)
{
    //Do something when Login is clicked
}

private void LogOut_Click(object sender, EventArgs e)
{
    //Do something when LogOut is clicked
} 
```

**注意：**当您准备好向`NotifyIcon`用户展示您的内容时，您可以使用`NotifyIcon.Visible = true;`

谢谢，
我希望你觉得这有帮助:)

# java - 输入一长串数字时不断出错

> ID：13103692
> 
> 赞同：1
> 
> 时间：2012-10-27T20:01:50.620
> 
> 标签：java, string, numbers, space

因此，我的程序应该采用用于 Visa 或 MasterCard 的 16 位数字的附加形式。但是，当我运行它时，程序会读取一个空格作为输入的结尾。例如：如果我输入 1234 5678 9012 3444，程序只会在我输入空格之前添加数字的总和。然后，如果我输入没有空格的整个字符串，它会不断给我错误代码。我在这里做错了什么？

```
import java.util.Scanner;

public class assignment4
{

public static void main(String[] args)
    {
        Scanner in = new Scanner(System.in);

        int sum = 0, number, modulo;
        String cardBrand;
        System.out.print("Visa or MasterCard? ");
        cardBrand = in.nextLine();

        System.out.print("Please enter your 16 digit credit card number (no spaces): ");
        number = in.nextInt();

        while (number > 0)
        {

            int digit = number % 10;
            sum = sum + digit;
            number = number/10;

        }

        modulo = (sum % 10);

        if (cardBrand.equals("Visa"))
        {
            if (modulo == 0)
            {
                System.out.println("This is a valid Visa card. Good job.");
            }
            else
            {
                System.out.println("This is an invalid Visa card number.");
            }
        }
        else if (cardBrand.equals("MasterCard"))
        {
            if (modulo == 1)
            {
                System.out.println("This is a valid MasterCard.");
            }
            else
            {
                System.out.print("This is an invalid MasterCard card number.");
            }
        }

    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-27T20:04:57.243

`int`仅限于“2,147,483,647”，因此您的号码超出范围。

[http://docs.oracle.com/javase/tutorial/java/nutsandbolts/datatypes.html](http://docs.oracle.com/javase/tutorial/java/nutsandbolts/datatypes.html)

如果您确实必须处理如此大的数字，请使用[BigDecimal 。](http://docs.oracle.com/javase/7/docs/api/java/math/BigDecimal.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-27T20:12:12.063

您可以检查下一个字符是否为 int，因为它被接收，并总结了 int。这样，您就不会遇到 int 大小的问题，因为您正在对收到的每个 int 进行汇总。

```
 int sum = 0, number = 0, modulo;
   while(in.hasNext()){
     if(in.hasNextInt()){
     number = in.nextInt();
     sum = sum + number;
   }
   else{
     in.next();
   }
   modulo = sum % 10; 
```

* * *

（`Ctrl + Z`或`Ctrl + D`, 是打断输入序列的字符）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-27T20:14:15.777

**第一个解决方案**：使用`BigInteger`类。它的构造函数输入是`String`.

**第二种解决方案**：`split`在类中使用方法`String`或使用`StringTokenizer`类。Bhesh 写了这个`split`例子。`StringTokenizer`例子：

```
StringTokenizer st = new StringTokenizer ("1234 5678 9012 3444", " ");
st.nextToken() returns each part of your credit card number 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-27T20:05:55.387

您应该使用`nextLine()`读取所有数字，然后将它们按空格分隔。

```
String line = in.nextLine();
String[] numbers = line.split(" "); 
```

# c++ - 使用指针从 for_each 循环访问成员方法

> ID：13103693
> 
> 赞同：1
> 
> 时间：2012-10-27T20:02:12.593
> 
> 标签：c++, class, methods, foreach

```
#include <iostream>
#include <vector>
#include <algorithm>
#include <functional>

class A{
  public:
    A():n(4),d(6.6),f(2.7),s("hello my dear"){}
    ~A(){}
    void printAll()
    {
      std::cout << this->n << "\n" << this->d << "\n" << this->f << "\n" << this->s << "\n\n";
    }
  private:
    int n;
    double d;
    float f;
    std::string s;
};

int main(){
  std::vector<A*> v(100);
  //filling v ...
  std::for_each(v.begin(), v.end(), mem_fun_ref(&A*::printAll)); // this isn't supposed to work ?
  return(0);
} 
```

我尝试了很多解决方案，这只是最后一个，这些都不起作用，我的目标是为 C++ 11 之前的 C++ 版本提供解决方案，所以我想避免使用 lambda（我也没有与 lambda 一起工作的问题，我的问题仅在于 for_each 循环）。

为了清晰和代码可读性，我想避免奇怪的绑定解决方案，这个解决方案也倾向于向程序添加 1 个库。

那么，当引用指向自定义类型的指针时，我如何才能简单地访问 for_each 循环中的方法？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-27T20:09:00.537

首先，由于你的向量包含*指针*，你需要`std::mem_fun`，而不是`std::mem_fun_ref`。

其次，它`std::mem_fun`不仅仅是`mem_fun`。

第三，指向成员的正确语法是`&A::printAll`，而不是`&A*::printAll`。那`*`在那儿做什么？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-27T20:10:14.727

用于`std::mem_fun`创建带指针的函数对象。

或者[`std::mem_fn`](http://en.cppreference.com/w/cpp/utility/functional/mem_fn)，如果您使用的是 C++11，则使用 if 生成一个函数对象，该函数对象采用指针、智能指针和引用。

```
std::for_each(v.begin(), v.end(), std::mem_fn(&A::printAll)) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-27T20:05:37.137

您的成员函数的地址是`&A::printAll`，不是`&A::*printAll`。

```
std::for_each(v.begin(), v.end(), mem_fun_ref(&A*::printAll)); /
//                                              ^ error here - not need this * 
```

也许你被定义指向成员函数类型的指针的语法误导了——这个星号是必要的：

```
typedef void (A*::PrintAll)(); 
```

[更新]
次要（或主要-正如我从您的评论中了解到的）问题是用于在对象指针上调用成员函数的错误函数-有关详细信息，请参见[AndreyT](https://stackoverflow.com/a/13103741/1463922)答案

# foreach - 在 PHP 中暂停和恢复 foreach 循环

> ID：13103695
> 
> 赞同：0
> 
> 时间：2012-10-27T20:02:56.843
> 
> 标签：foreach

可以暂停一个 foreach 循环，插入一些代码，然后恢复它吗？

让我解释一下：我有一个包含 9 个元素和一些数据的数组。我想循环将元素按三分组的数组，并且我想这样做而不创建三个不同的foreach。

像这样：

```
<div class="first">
<ul>
[start foreach]
<li>Element 1</li>
<p>Element 1 data</li>
<li>Element 2</li>
<p>Element 2 data</li>
<li>Element 3</li>
<p>Element 3 data</li>
[pause foreach]
</ul>
</div>

<div class="second">
<ul>
[start foreach]
<li>Element 4</li>
<p>Element 4 data</li>
<li>Element 5</li>
<p>Element 5 data</li>
<li>Element 6</li>
<p>Element 6 data</li>
[pause foreach]
</ul>
</div>

<div class="third">
<ul>
[start foreach]
<li>Element 7</li>
<p>Element 7 data</p>
<li>Element 8</li>
<p>Element 8 data</p>
<li>Element 9</li>
<p>Element 9 data</p>
[pause foreach]
</ul>
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-27T20:13:04.560

可以在 html 周围使用 php 循环语句，它有点隐藏在 php.net 手册中，这是确切的页面，第一个示例应该就是您需要的。

[http://www.php.net/manual/en/control-structures.alternative-syntax.php](http://www.php.net/manual/en/control-structures.alternative-syntax.php)

这是我正在处理的页面中的一个示例，它是导航栏的一部分。

```
<ul class="menu_dropdown">
    <?php $categories = Category::find_all();
    foreach ($categories as $category) : ?>
        <li class="submenu"><a href="products.php?category=<?php echo $category->id?>"><?php echo $category->name."?></a></li>
    <?php endforeach?>
</ul> 
```

如果您想将其格式化为三个不同的 div（列？），则可能更容易获取查询数组并使用 while 或 if 语句来遍历不同的键或值，因为 foreach 将在一次，除非您有 3 个单独的查询。

# lisp - `控制字符串`的清晰列表在哪里？使用 Lisp+Slime 时，很难找到有关“格式”功能的 Hyperspec 文档

> ID：13103700
> 
> 赞同：1
> 
> 时间：2012-10-27T20:03:45.670
> 
> 标签：lisp, format, common-lisp, slime

```
(format t "~C  ~D ???" var1) 
```

谁能给个提示，我们如何/在所有强大的*Hyperspec*中找到*控制字符串的列表？*

像这样的事情，当它要找到一些关于`Lisp`控制字符串的提示时`format`，*Hyperspec*总是*HYPER* me。

我试过：`C-c C-d h format`, `C-c C-d h formatter`, `C-c C-d h tilds`...他们都失去了我。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-28T01:01:30.293

尝试`C-c``C-d``~`（即，`common-lisp-hyperspec-format`）。 `Tab`将显示摘要。如果您忘记了，它始终可以从`C-h``m`( `describe-mode`) 访问。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-27T20:20:18.777

[Common Lisp 快速参考](http://clqr.boundp.org/download.html)对Common Lisp有一个很好的概述。包括格式功能。

# bash - 如何在 if 语句中捕获错误

> ID：13103701
> 
> 赞同：3
> 
> 时间：2012-10-27T20:03:49.747
> 
> 标签：bash, if-statement, error-handling, bash-trap

运行以下代码：

```
#!/bin/bash

set -o pipefail
set -o errtrace
set -o nounset
set -o errexit

function err_handler ()
{
    local error_code="$?"
    echo "TRAP!"
    echo "error code: $error_code"
    exit
}
trap err_handler ERR

echo "wrong command in if statement"

if xsxsxsxs 
    then
        echo "if result is true"
    else
        echo "if result is false"
fi

echo -e "\nwrong command directly"
xsxsxsxs 

exit 
```

产生以下输出：

```
wrong command in if statement
trap.sh: line 21: xsxsxsxs: command not found
if result is false

wrong command directly
trap.sh: line 29: xsxsxsxs: command not found
TRAP!
error code: 127 
```

如何在 if 语句中捕获“*未找到命令”错误？*

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-27T21:32:47.510

您不能在 if 中为测试捕获 ERR

来自 bash 人：

```
The ERR trap is not executed if the failed  command
is  part  of  the  command list immediately following a while or
until keyword, part of the test in an if statement,  part  of  a
command  executed in a && or || list, or if the command's return
value is being inverted via ! 
```

但你可以改变这个

```
if xsxsxsxs 
then .. 
```

对此

```
xsxsxsxs 
if [[ $? -eq 0 ]]
then .. 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-29T18:04:49.280

不幸的是，[德国加西亚](https://stackoverflow.com/a/13104377/1032370)是对的，所以我写了一个解决方法。
任何建议或改进都非常受欢迎，谢谢。

这是我到目前为止所做的：

```
#!/bin/bash

set -o pipefail
set -o errtrace
set -o nounset
set -o errexit

declare stderr_log="/dev/shm/stderr.log"
exec 2>"${stderr_log}"

function err_handler ()
{
    local error_code=${1:-$?}
    echo "TRAP! ${error_code}"
    echo "exit status: $error_code"

    stderr=$( tail -n 1 "$stderr_log" )
    echo "error message: $stderr"

    echo "" > "${stderr_log}"
    echo "Normally I would exit now but I carry on the demo instead"

    # uncomemment the following two lines to exit now.
    # rm "${stderr_log}"
    # exit "${error_code}"
}
trap err_handler ERR

function check ()
{
    local params=( "$@" )

    local result=0

    local statement=''
    for param in "${params[@]}"
    do
        local regex='\s+'
        if [[ ${param} =~ ${regex} ]]
            then
                param=$( echo "${param}" | sed 's/"/\\"/g' )
                param="\"$param\""
        fi
        statement="${statement} $param"
    done

    eval "if $statement; then result=1; fi"

    stderr=$( tail -n 1 "$stderr_log" )

    ($statement); local error_code="$?"

    test -n "$stderr" && err_handler "${error_code}"
    test $result = 1 && [[ $( echo "1" ) ]] || [[ $( echo "" ) ]]
}

echo -e "\n1) wrong command in if statement"

if check xsxsxs -d "/etc"
    then
        echo "if returns true"
    else
        echo "if returns false"
fi

echo -e "\n2) right command in if statement"

if check test -d "/etc"
    then
        echo "if returns true"
    else
        echo "if returns false"
fi

echo -e "\n3) wrong command directly"
xsxsxsxs 

exit 
```

运行上述将产生：

```
1) wrong command in if statement
TRAP!
error code found: 0
error message: trap.sh: line 52: xsxsxs: command not found 
I would exit now but I carry on instead
if returns false

2) right command in if statement
if returns true

3) wrong command directly
TRAP!
error code found: 127
error message: trap.sh: line 77: xsxsxsxs: command not found
I would exit now but I carry on instead 
```

所以这个想法基本上是创建一个名为*'check'*的方法，然后将其添加到命令*之前*，以便在 if 语句中进行调试。
我无法以这种方式捕获错误代码，但只要我能收到消息，这并不重要。

**很高兴收到您的来信。谢谢**

# php - 转换为 HTTPS

> ID：13103707
> 
> 赞同：1
> 
> 时间：2012-10-27T20:04:15.450
> 
> 标签：php, html, security, http, https

我有一个 https 网站，谷歌在顶部显示带有黄色三角形的锁：

> 该网站使用 SSL，但谷歌浏览器在页面上检测到不安全的内容。如果您在此页面上输入敏感信息，请务必小心。不安全的内容可能会为某人提供更改页面外观的漏洞。

我想更改我的网站，使其完全安全，并获得绿色锁。但是，当我尝试像这样`https://www.domain.com`而不是通过 https 访问我的页面时`http://www.domain.com`，大多数事情都不起作用。Chrome 的检查员会说：

> [https://www.domain.com/Folder/](https://www.domain.com/Folder/)上的页面显示来自[http://website.com/media/images/photo.jpg](http://website.com/media/images/photo.jpg)的不安全内容。

这仅仅是因为我从中获取照片的页面是 http 吗？我应该采取哪些步骤来开始将我的整个网站转换为 https（就更改代码而言）？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-27T20:10:20.747

@理查德

正如我从您的问题中了解到的那样，您可能有指向外部资源的链接，这些资源是从 http://... 而不是 https://... 加载的，只需识别所有这些资源（即图像、样式表、javascript 文件甚至CSS 中的图像）并将协议部分“http://”替换为“//”。请参见下面的示例：

如果你有：

```
<img src="http://domain.com/path/to/image.png"> 
```

将其替换为：

```
<img src="//domain.com/path/to/image.png"> 
```

这样浏览器将替换适当的协议并相应地从 https:// 或 http:// 加载资源。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-27T20:07:49.990

从您的站点中删除（或替换为`https://`）通过 链接到页面的任何链接、图像等`http://`。

创建警告是因为您要求浏览器连接到（= 从中加载数据）不受 SSL (https) 保护的网站。

如果您想提供无法通过`https`您的站点获得的数据，您的服务器将需要下载并通过`https`.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-27T20:07:27.157

> 这仅仅是因为我从中获取照片的页面是 http 吗？

是的

> 我应该采取哪些步骤来开始将我的整个网站转换为 https（就更改代码而言）？

仅通过 HTTPS 加载资源。

# jsrender - 如何绑定鼠标悬停，在jsrender模板内的元素上单击事件

> ID：13103710
> 
> 赞同：2
> 
> 时间：2012-10-27T20:04:40.473
> 
> 标签：jsrender

我正在使用 jsRender 并希望绑定事件，例如单击、鼠标悬停在模板内呈现的元素上。在绑定事件时，我想将数据作为参数传递。

例子 ：

```
<li id="liv_{{:nid}}" onmouseover=[call some function and pass #data]>
<div class="qwqw"><a href="#"></a></div>
<div class="">
    <p class="we">{{:spd}} <span>mph (todo)</span></p>
</div>

<div class="clear"></div> 
```

我尝试了上面提到的代码，但没有奏效。有人可以深入了解如何做到这一点。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T13:39:35.620

只要定义了要在`onmouseover`事件中调用的函数，这很简单：

```
<li id="liv_{{:nid}}" onmouseover="someFunction({{:#data}});"> </li> 
```

但是，在使用 jQuery 渲染后绑定这些事件可能更干净。我可以想象将一个`data-*`属性应用于所有这些列表项并在您的选择器中使用它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T18:34:18.313

`{{:#data}}`将 #data 呈现为字符串，因此**除非 #data 整齐地进行字符串化和解析，否则该方法将不起作用**。如果没有手动 JSON 使用，对象将不会整齐地字符串化或解析。事实上，我怀疑只有数字、布尔值和`undefined`，并且`null`会正确地进行字符串化和解析。**如果函数不是全局的，**这种方法**也**将不起作用。任何时候都被迫在全局范围内定义回调函数，这让我觉得这是一个严重的问题。所以我不推荐使用标签内事件处理程序，尤其是当您已经运行 JavaScript 时。

 ****相反**，在将渲染的内容插入 DOM 后，您可以在那里绑定事件。这是一个粗略的草图。

将一个类或其他一些选择器添加到您的`<li>`.

```
<li class="onMouseEnter" id="liv_{{:nid}}"></li> 
```

将每个 #data 值放入对象中，使用等效的`liv_{{:nid}}`作为键。

```
var dataMap = {};
$.each(yourDataValues, function (i, value) {
    dataMap['liv_' + value.nid] = value;
}); 
```

最后，将实时事件绑定到您将渲染模板推送到其中的容器。

```
$(containerOfRenderedTemplate).on('mouseenter', '.onMouseEnter', function () {
    var id = $(this).attr('id');
    var data = dataMap[id];
    desiredCallbackFunctionWhichConsumesData(data);
}); 
```

`dataMap`并且事件绑定调用应该在同一范围内。

**注意：**如果此渲染可能发生多次，并且您需要将渲染的内容替换为全新的渲染内容，则应在绑定新事件之前取消绑定旧事件。

```
$(containerOfRenderedTemplate).off('mouseenter', '.onMouseEnter'); 
```**

# php - PHP 连接访问数据库 (.mdb)

> ID：13103712
> 
> 赞同：0
> 
> 时间：2012-10-27T20:04:52.613
> 
> 标签：php, ms-access

我目前正在获取一个 PHP 脚本来连接到 MS Access 数据库 2007，以便 PHP 脚本可以从中检索信息。

有谁知道实现这一点的任何方式我相信创建一个 ODBC 连接可能是前进的方向，但我会很感激任何关于这个问题的指导。

非常感谢任何人愿意给我的任何帮助

詹姆士

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-02-23T03:23:04.327

通常，您会执行以下操作：

```
$dbName = $_SERVER["DOCUMENT_ROOT"] . "products\products.mdb";
if (!file_exists($dbName)) {
    die("Could not find database file.");
}
$db = new PDO("odbc:DRIVER={Microsoft Access Driver (*.mdb)}; DBQ=$dbName; Uid=; Pwd=;"); 
```

成功的连接将允许从 PHP 执行 SQL 命令来读取或写入数据库。但是，如果您收到错误消息“PDOException 找不到驱动程序”，那么很可能是未安装 PDO ODBC 驱动程序。使用该`phpinfo()`功能检查您的安装是否引用了 PDO。

如果不存在 PDO ODBC 条目，则需要确保您的安装包括 PDO 扩展和 ODBC 驱动程序。要在 Windows 上执行此操作，请取消注释 中的行`extension=php_pdo_odbc.dll`，`php.ini`重新启动 Apache，然后再次尝试连接到数据库。

在您的情况下，我相信如果`.mdb`文件位于外部服务器上它会起作用，但您必须能够从您提供页面的位置点击它。

不确定这是 Intranet 还是跨公共 Internet，但如果是公共 Internet，您可能需要稍微修改您的工作流程，因为通常以这种方式访问​​您的数据库并不是您想要做的事情。

资料来源：[使用带有 PHP 的 Access 数据库](https://www.sitepoint.com/using-an-access-database-with-php/)

# string - 在 HTACCESS 中从查询字符串重定向到 URL

> ID：13103717
> 
> 赞同：1
> 
> 时间：2012-10-27T20:05:42.283
> 
> 标签：string, .htaccess, redirect

我正在尝试将带有查询字符串的 URL 重定向到没有查询字符串的 URL，但是，我想使用查询字符串中的值。

在下面的示例中，我使用的是单个状态，但是我希望它是动态的，这意味着它将解析任何带有查询字符串的 URL 到一个干净的 URL，该 URL 仍然包含查询字符串中的值。

```
Example: http://www.mywebsite.com/?state=CA redirects to http://www.mywebsite.com/CA/ 
```

我厌倦了将以下信息添加到我的 HTACCESS 文件中，但没有成功：

```
Options +FollowSymlinks
RewriteEngine On
RewriteCond %{THE_REQUEST} ^[A-Z]{3,9}\ /\?state=([a-z]+)&type=([a-z\-]+)
RewriteRule ^ /%1/%2? [L]
RewriteCond %{THE_REQUEST} ^[A-Z]{3,9}\ /\?state=([a-z]+)($|\ )
RewriteRule ^ /%1? [L] 
```

这些已经奏效，但是我必须输入我想避免的每个重定向：

```
RewriteCond %{QUERY_STRING} state=FL
RewriteRule ^$ "http://www.mywebsite.com/fl/?" [R=301,L]
RewriteCond %{QUERY_STRING} state=RI
RewriteRule ^$ "http://www.mywebsite.com/ri/?" [R=301,L] 
```

有任何想法吗？我在 Apache 上使用 WordPress。我相信一切都是最新的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-27T21:26:01.547

原始规则不起作用的原因是因为您的状态似乎是：

```
state=FL 
```

将`FL`永远不会匹配正则表达式`[a-z]+`，因为`[a-z]`字面意思是任何小写字母，而且 F 和 L 都不是小写字母。尝试：

```
Options +FollowSymlinks
RewriteEngine On
RewriteCond %{THE_REQUEST} ^[A-Z]{3,9}\ /\?state=([a-z]+)&type=([a-z\-]+) [NC]
RewriteRule ^ /%1/%2? [L,R=301]
RewriteCond %{THE_REQUEST} ^[A-Z]{3,9}\ /\?state=([a-z]+)($|\ ) [NC]
RewriteRule ^ /%1? [L,R=301] 
```

所以`[NC]`条件中的标志使得正则表达式不区分大小写。

# php - 如何自动将数据库查询中的每个值分配给变量数组？

> ID：13103718
> 
> 赞同：0
> 
> 时间：2012-10-27T20:05:50.353
> 
> 标签：php, mysql

是否有某种捷径可以将查询的所有选定行中的所有值应用于它们自己的数组？

即，如果我有行：颜色、大小和形状，是否有一些捷径可以让我将所有从颜色中检索到的值放入数组 $x[] 中，将来自大小的所有值放入数组 $y[] 中，等等，只是通过使用关键字，命名数组，并按我希望它们关联的行的顺序列出它们？

或者这是最简单的方法吗？：

```
$i = 0;
while ($row =...)
{
    $colour[$i] = $row[0];
    $Size[$i] = $row[1];
    $Shape[$i] = $row[2];
    $i++;
} 
```

我想代码不多，但如果你的数据库有 20 行，我想它可以节省一些时间......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-27T20:44:48.957

这是最简单的方法，您可以通过跳过`$i`和分配来压缩它`list`：

```
list($colour[],$Size[],$Shape[]) = $row; 
```

如果`$row`可以从数字索引数组更改为关联数组，则可以使用[variables 变量](http://php.net/manual/en/language.variables.variable.php)语法来赋值：

```
foreach($row as $arrayName => $value){
    array_push($$arrayName, $value);
} 
```

# php - 我无法连接我的 Amazon S3 帐户

> ID：13103720
> 
> 赞同：0
> 
> 时间：2012-10-27T20:06:04.467
> 
> 标签：php, codeigniter, amazon-s3, amazon-ec2

我有一个项目托管在 Amazon EC2 Ireland (Ubuntu)。

我用 CodeIgniter 开发，我想用 S3 来存储文件。

我已经使用了三个或四个特定的库来将 S3 与 CodeIgniter 一起使用，但没有一个有效。我尝试了官方的AWS SDK for PHP，兼容性测试还可以，但是示例不起作用。我认为问题在于访问 S3。

我在 S3 Management 中创建了三个存储桶，两个在爱尔兰，一个在美国标准，我可以通过浏览器、S3 Organizer (S3Fox) 和 Cyber​​duck 访问文件。但我无法访问我的项目。

任何人都可以帮助我吗？

对不起，我的英语不好...

控制器amazona.php：

```
 <?php defined('BASEPATH') OR exit('No direct script access allowed');

class Amazona extends CI_Controller {

    var $bucket = 'cubito';

    function __construct()
    {
        parent::__construct();
        $this->load->library('S3');
    }

    function index()
    {
/*      $data['files'] = $this->s3->getBucket('cubito'); */
        $data['texto'] = "prueba";
        $this->load->view('amazona', $data);
    }
}

?> 
```

查看amazona.php：

```
<html>
    <head>
        <title>prueba</title>
    </head>

    <body>
        <a href="http://cubito.s3.amazonaws.com/imagen.jpg">imagen</a>
        <img src="http://cubito.s3.amazonaws.com/imagen.jpg" />
        <p><?php echo($texto); ?></p>
        <p><?php echo($this->s3->listBuckets()); ?></p>

    </body>

</html> 
```

我添加了一个存储桶策略，但仍然不起作用：

```
{
    "Version": "2008-10-17",
    "Id": "Policy1351373775750",
    "Statement": [
        {
            "Sid": "Stmt1351373767997",
            "Effect": "Allow",
            "Principal": {
                "AWS": "*"
            },
            "Action": "s3:*",
            "Resource": [
                "arn:aws:s3:::cubito",
                "arn:aws:s3:::cubito/*"
            ]
        }
    ]
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-27T20:55:10.173

我认为您的 s3 存储桶策略列出存储桶是不正确的。你的存储桶策略是什么，你能分享一下吗？

```
You Need to include the bucket itself as a resource.
"Resource":["arn:aws:s3:::my_bucket/*", "arn:aws:s3:::my_bucket"] 
```

**编辑：**

试试这个：（这是让 IAM 用户访问 S3 的策略）

```
{
  "Statement": [
    {
      "Sid": "Stmt1351373767997",
      "Action": [
        "s3:*"
      ],
      "Effect": "Allow",
      "Resource": [
        "arn:aws:s3:::cubito",
        "arn:aws:s3:::cubito/*"
      ]
    },
  {
         "Effect":"Allow",
         "Action":"s3:ListAllMyBuckets",
        "Resource":"arn:aws:s3:::*"
     }    
  ]
} 
```

试试这个：（这是 s3 存储桶的策略）

```
{
  "Id": "Policy1351375661442",
  "Statement": [
    {
      "Sid": "Stmt1351375657362",
      "Action": "s3:*",
      "Effect": "Allow",
      "Resource": "arn:aws:s3:::*",
      "Principal": {
        "AWS": [
          "\"AWS\": \"*\""
        ]
      }
    }
  ]
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T18:53:47.003

我做的！！

我更改了 s3 库中的 var $endpoint。原本的：

```
public static $endpoint = 's3.amazonaws.com'; 
```

改变：

```
public static $endpoint = 's3-eu-west-1.amazonaws.com'; 
```

使用我的第一个 accesskey 和 secretkey 它运行！！！

谢谢大家，对不起我的英语不好。

¡¡¡ 谢邀！！！

# algorithm - 表示该算法的适当复杂性符号

> ID：13103722
> 
> 赞同：3
> 
> 时间：2012-10-27T20:06:24.113
> 
> 标签：algorithm, complexity-theory, big-o

我希望能获得一些帮助来评估表示以下算法复杂性的最佳方法（用伪代码编写）：

```
Input N;

bool complete = false;

If(N Satisfies Condition A)
{
    K = N/6;
    For(int i = 1; i <= sqrt(K/6) && complete != true; i++)
    {
        If(K Satisfies Condition B based on i)
                  complete = true;
        Else if(K Satisfies Condition C based on i)
                   complete = true;
        Else if(K satisfies Condition D based on i)
                   complete = true;
        Else if(K satisfies Condition E based on i)
        {
               If(K satisfies Condition D based on (i + 1))
               {
                        Change Output;
                        complete = true;
                }
                Else
                        complete = true;
         }
         Else if(K satisfies Condition F based on i)
         {
                change output;
                continue;
         }
     }
} 
```

我熟悉大 O-Notation，但（据我了解）最适用于最坏的情况。然而，这个算法很少能满足最坏的情况（如果只满足条件 F，这将是 O(sqrt(N))）。我不得不说至少 95% 的输入 N 但是不符合最坏的情况。

通过满足条件 E 的嵌入 if 语句，我发现了非常有趣的结果。只要满足条件 E，程序就基本上完成了。除了条件 F 的少数罕见情况外，它非常类似于常数 O(1)。

例如：

```
N = 11, Time = 0.004 sec, Steps Taken = 0
N = 101, Time = 0.005 sec, Steps Taken = 1
N = 1001, Time = 0.004 sec, Steps Taken = 0
N = 10001, Time = 0.003 sec, Steps Taken = 1
N = 100001, Time = 0.004 sec, Steps Taken = 1 
```

不要尝试在那里寻找模式，查看一些随机和更大值的结果：

```
N = 12764787846358441471, Time = 0.007, Steps Taken = 3332
N = 18446744073709551557, Time = 0.005, Steps Taken = 7 
```

如您所见，几乎所有时间都保持在 0.006 秒左右（在我的机器上），即使步骤不同，但在任何方向上都不一致。这个算法是我为我正在写的一篇论文开发的，所以我不仅愿意用大 O 表示法来表示这个算法，我只想用某种方式来真实地表示它的平均情况结果，这往往是非常很好。任何关于至少要研究的方向的见解都值得赞赏。到目前为止，我的数学知识远远超过了我的 CS 知识，所以我接触这种东西的机会很少。

谢谢，德文杰

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-27T21:53:34.783

您的算法可以确定的是：

*   `O(1)`在最好的情况下，
*   `O(sqrt(n))`在最坏的情况下。

要找到平均运行时间，您必须在随机输入上运行您的算法，并绘制一个表示**运行时间或输入大小函数的步数的**图表。然后你平滑你的点以尝试将它们拟合到一个函数中。通过绘制该图，您会发现您的平均时间复杂度可能`O(1)`也在平均情况下。

# javascript - Node.js：提取网页的图片网址

> ID：13103723
> 
> 赞同：1
> 
> 时间：2012-10-27T20:06:27.370
> 
> 标签：javascript, node.js

我正在尝试获取给定网页的图像。我尝试过使用这些模块`request`，`jsdom`如下所示：

```
var request = require('request'),
    jsdom = require('jsdom');

request({ uri:'http://www.google.com' }, function (error, response, body) {
  if (error && response.statusCode !== 200) {
    console.log('Error when contacting google.com')
  }

  jsdom.env({
    html: body,
    scripts: [
      'http://code.jquery.com/jquery-1.8.2.min.js'
    ]
  }, function (err, window) {
    var $ = window.jQuery;

    $(function () {
      console.log($('img').length);
    })
  });
}); 
```

不幸的是，尽管页面包含图像，但`console.log($('img').length);`打印...`0``google.com`

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-23T08:19:17.347

您可以在服务器中使用[Cheerio](https://github.com/MatthewMueller/cheerio) jquery 实现。

这是从站点读取图像 URL 的 Coffee 脚本要点

[https://gist.github.com/mrjjwright/3240020](https://gist.github.com/mrjjwright/3240020)

Javascript 版本

[https://gist.github.com/fizerkhan/5633503](https://gist.github.com/fizerkhan/5633503)

# mysql - 在多用户环境中选择数据

> ID：13103724
> 
> 赞同：3
> 
> 时间：2012-10-27T20:06:27.573
> 
> 标签：mysql, database, postgresql

我正在构建一个基于 crm 的系统，该系统将被大约 10 个用户同时使用。

如果同一记录已被其他用户打开，那么防止打开、使用和保存同一记录的最佳方法是什么。

我试图在几秒钟内打开用户 2 覆盖用户 1 更改的机会场景。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-27T20:49:17.460

我看到了几种方法：

1）只需将时间戳列添加到您的数据库并将其发布在隐藏字段中的表单上。一旦有人在编辑后保存记录 - 您可以将从客户端收到的时间戳值与数据库中当前可用的时间戳值进行比较。如果它们相等 - 保存更改并更新时间戳列。否则（有人刚刚编辑了该记录） - 不要保存更改并以某种方式处理这种情况。这里的问题是您需要从数据库中获取时间戳值并进行比较。在此期间（在您请求一个值但尚未保存更改之后）有人可能会更新记录。那个时间范围只有几毫秒，因此我认为它可以被忽略。

我没有机会做这样的事情，但我记得，数据库通常可以以某种方式锁定一行。因此，任何读取尝试都将停止，直到锁定未被删除。假设，这样你可以避免我上面提到的问题。

2）如果您可以控制会话状态，则可以在有人打开记录进行编辑后将其标记为正在编辑。该标记可以包含编辑器的会话 ID。编辑完成后 - 您将删除该标记（任何人都可以再次编辑它）。但是有人可能会开始编辑并打开页面。因此，您需要检查会话是否仍然存在。一旦它死了 - 标记要编辑的记录。

# java - Java 中的 LineCount 程序。忽略计数中的一些行

> ID：13103726
> 
> 赞同：0
> 
> 时间：2012-10-27T20:06:37.610
> 
> 标签：java, line-count

我有一个Java程序，代码如下：

```
import java.io.*;
public class LineCountingProg
{
   public static void main(String args[])
   {
      FileInputStream fis = null;
      try
      {
         fis = new FileInputStream("d://MyFile.txt");
      }
      catch(FileNotFoundException e)
      {
         System.out.println("The source file does not exist. " +e );
      }          
      LineNumberReader lineCounter = new LineNumberReader(new InputStreamReader(fis));
      String nextLine = null;
      try {
      while ((nextLine = lineCounter.readLine()) != null) {
  System.out.println(nextLine);
  if ((nextLine.startsWith("/*") && nextLine.endsWith("*/"))
            || (nextLine.trim().matches("[{};]+"))) {
          //This line needs to be ignored
          ignoredLines++;
          continue;
                    }
        }
  System.out.println("Total number of line in this file " + lineCounter.getLineNumber());
  int fcounter  = 0;
  fcounter = lineCounter.getLineNumber()-ignoredLines ;
  System.out.println("Total " +fcounter);
  } catch (Exception done) {
  done.printStackTrace();

  }}} 
```

我想添加一段代码，以便如果一行以 /* 开头并以 */ 结尾，它可以忽略行数。此外，如果一行仅包含 ; 和 } 它也应该忽略这些行。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-27T20:11:36.447

在您的 while 循环之外，您需要首先创建一个变量来计算所有被忽略的行。

```
int ignoredLines = 0; 
```

在您的 while 循环中，您可以添加以下条件：

```
if ((nextLine.startsWith("/*") && nextLine.endsWith("*/"))
    || (nextLine.trim().matches("[};]+"))) {
  //This line needs to be ignored
  ignoredLines++';
  continue;
} 
```

最后：

```
System.out.println("Total number of line in this file " + lineCounter.getLineNumber() - ignoredLines); 
```

`startsWith`，`endsWith`并`equals`在`String`课堂上找到。

# php - 如何在php中将变量从一个文件获取到另一个文件

> ID：13103727
> 
> 赞同：3
> 
> 时间：2012-10-27T20:06:36.870
> 
> 标签：php, html

我有 3 个文件。我会给你一个确切的例子：

**一个.php**

```
<form action="b.php" method="POST">

Enter age:
<input type="text" name="age"><br>
<input type="submit" value="Save">
</form> 
```

**b.php**

```
<?php
$age=$_POST["age"];
if (is_numeric($age))
{
    header("Location: c.php");
    exit();
}
else
{
    echo "Age invalid!";
}
?> 
```

**c.php**

```
<?php
//i want to use the $age variable here   
echo $age;
?> 
```

如何使用in 中的`$age`变量？`b.php``c.php`

我也尝试过 session_start(); at file`b.php`并使用`$_SESSION["age"]=$_POST["age"];`in`b.php`然后`$_SESSION["age"]`in`c.php`而不是，`$age`它仍然没有工作。

我也尝试过包含但也没有让我到任何地方......也许我没有正确使用它。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-27T20:11:08.833

问题是在文件 b.php 中，您没有将 age 的值发送到 c.php。

如果在 b.php 中，你这样做了：

```
 session_start();
 $_SESSION["age"] = $_POST["age"]; 
```

然后，在 c.php 中，你这样做了：

```
 session_start();
 $age = $_SESSION["age"];
 echo $age; 
```

它会正常工作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-27T20:15:19.873

当用户在**a.php提交表单时，浏览器会向****b.php** *WITH*数据发出 HTTP POST 请求。

所以你有年龄`$_POST`，但是你的`header()`in **b.php**通过 HTTP GET 请求将用户发送到**c.php ，***这*就是你不能`$_POST`在**c.php**访问的原因。但是，这是防止刷新页面导致数据重新提交的好方法。

您还需要在**c.php**中启动会话以访问会话数据，使用`session_start()`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-28T12:37:34.330

如果您不想创建会话开始和销毁，则必须将 b.php 文件添加到 c.php 中。

比之后你的 c.php 文件必须像这样

c.php

```
<?php
include_once 'b.php';
echo $age;
?> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-27T20:15:57.087

为什么不把b.php修改成...

```
<?php
$age=$_POST["age"];
if (is_numeric($age))
{
    header("Location: c.php?age=$age"); ### so it will be send as get var
    exit();
}
else
{
    echo "Age invalid!";
}
?> 
```

并在 c.php

```
$age = $_GET['age']; 
```

或使用 cal_b 描述的会话

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-27T20:11:12.407

如果要使用会话，则必须在要使用 $_SESSION 变量的每个页面上调用 session_start()，并且 session_start() 必须在任何输出之前。如果您在两个页面上都使用 session_start，那么您没有理由不应该工作。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-10-27T20:11:46.167

请试试这个：

**b.php：**

```
<?php
   $age=$_POST["age"];
   if (is_numeric($age))
   {
      header("Location: c.php?age=".$age);
      exit();
   }
   else
   {
      echo "Age invalid!";
   }
?> 
```

**c.php：**

```
<?php
    //i want to use the $age variable here   
    $age = $_REQUEST["age"];
    echo $age;
?> 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-10-27T20:12:08.520

你`session_start()`也在**c.php**中使用过吗？您必须`session_start()`在要访问会话的每个脚本中使用。一旦你`session_start()`在**c.php**中使用，你应该可以访问`$_SESSION['age']`.

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-10-28T12:59:24.047

用户并不真正需要`header('location: c.php');`

它看起来也不适合放置用户`$_SESSION`变量。

我认为您可以轻松地`include 'c.php'`代替使用`header('location: c.php');`.

**b.php**

```
<?php
$age=$_POST["age"];
if (is_numeric($age))
{
    include "c.php"; //THIS LINE HAS BEEN CHANGED
    exit();
}
else
{
    echo "Age invalid!";
}
?> 
```

**c.php**

```
<?php
echo $age; //NO CHANGE AT ALL IN THE FILE 'c.php'
?> 
```

因此，现在浏览器仍将保留，`localhost/project/b.php`并且您正在执行的内部操作`c.php`将保持安全。

`header('location: c.php');`用于将用户从一个页面带到另一个页面。例如，在用户登录后或当他的会话过期时，他应该再次进行身份验证。在这种情况下，用户看到他正在被`REDIRECT`ED 访问未经授权的页面。

**在这种情况下使用**它不是错误**`header()`，并且代码仍然可以正常工作，但它不应该用于那种动作。**

# c - 为什么 memcpy 在第二次尝试时不起作用？

> ID：13103728
> 
> 赞同：0
> 
> 时间：2012-10-27T20:06:39.450
> 
> 标签：c, segmentation-fault, memcpy

memcpy 在我的程序中表现得很奇怪。我的函数被调用了两次，所以 memcpy 行运行了两次，第一次运行没有问题，第二次我在该行（使用 gdb）出现 seg 错误。我很困惑，因为我不明白为什么它会工作一次而不是两次......而且，我输入的两个名字的长度相同。

这就是我所拥有的...

```
typedef struct _item_
{
    char name[500];
}item;

int my_function(char *name)
{

    item *myitem = malloc(sizeof(item));

    char* temp = myitem->name;

    strcpy(temp, name);

    /* code here to write add item to a global structure */

    return 0; 
```

}

在测试代​​码中...

```
int i;
i = my_function("test1");
.
.
.
i = my_function("test2"); 
```

然后我将其更改为 strcpy 并出现同样的问题

```
strcpy(temp, name); 
```

关于为什么这可能不起作用的任何想法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-27T21:10:18.970

在这种情况下，唯一可能的罪魁祸首似乎是：

(1) malloc() 失败——您没有检查 NULL 结果

（2）以前的腐败已经打乱了事情。

您可以通过读取内存来获得段错误，因此如果源参数不是以 0 结尾并且错误发生在找到可读的 0 字节之前（并且在超出 500 字符接收数组导致其他问题之前），则可能会添加第三个选项。 ) 那些短字符串文字不会发生这种情况，所以像这样的任何事情都必须属于 (2)。

你的代码片段，被黑进了一个主程序（内存泄漏和所有）对我来说并没有失败。（请参阅 hnhzflep 的答案以获得更详尽的演示 - 不会爆炸。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-27T20:53:12.987

哦，那好吧。好吧，您需要查看您的代码。特别是在你给 memcpy 或 strcpy 的目标指针指向的地方。您的消息清楚地表明您正在尝试写入不属于您的内存。这是使用您提供的代码的最小可编译版本。它工作得很好。调用该函数 20,000 次并返回有效结果。这在打印出所有 20,000 个元素时得到验证。

```
#include <stdio.h>
#include <stdlib.h>
#include <string.h>

typedef struct _item_
{
    char name[500];
}item;

item *my_function(char *name)
{
    item *myItem = (item*)malloc(sizeof(item));
    strcpy(myItem->name, name);
    return myItem;
}

int main()
{
    const int max = 10000;  // 10,000 iterations
    item *itemList[max*2];  // 2 operations per loop iteration
    int j, index = 0;
    for (j=0; j<max; j++)
    {
        itemList[index++] = my_function("test1");
        itemList[index++] = my_function("test2");
    }

    index = 0;
    for (j=0; j<max; j++)
    {
        printf("%d. - %s\n", 1+index, itemList[index]->name);
        index++;
        printf("%d. - %s\n", 1+index, itemList[index]->name);
        index++;
    }
} 
```

# javascript - 光标：鼠标抓取 javascript

> ID：13103735
> 
> 赞同：2
> 
> 时间：2012-10-27T20:08:15.417
> 
> 标签：javascript, cursor, drag, mousedown

我有两张图片：一张张开的手，一张抓着的手。我希望一个简单的“onmousedown”和“onmouseup”功能可以帮助您制作您可以在谷歌地图之类的东西中看到的著名的抓手。但是......对不起，从一开始：我有一个简单的 DIV，除了他的背景之外什么都没有。当我按住鼠标并开始“拖动”光标时，应该启动一个功能并将光标从“手打开”更改为“手抓”。但是光标变成了文本的选择器，而不是我想要的。有什么帮助吗？这是一个例子

```
<div onmousedown="function(){this.style.cursor='url(handgrab.png)'}"
onmouseup="function(){this.style.cursor='url(handopen.png)'}"
</div> 
```

我唯一想要的是将鼠标拖入 DIV 时更改光标。对不起这个内联选择，但我不想写所有的 JS 文件......

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-10-27T20:24:57.197

您应该通过类名访问它。它使生活更轻松。

试试这种方式： -

## HTML：

```
<div onmouseup="this.className='openHand'" onmousedown="this.className='closeHand'">
    Mouse Down and Up Events
</div>​​​​​​​​​​​​​​​​​​​​​​​​​​ 
```

## CSS：

```
.​openHand​ {
    cursor: url(https://mail.google.com/mail/images/2/openhand.cur), default !important;
}

.closeHand {
    cursor: url(https://mail.google.com/mail/images/2/closedhand.cur), default !important;
}​ 
```

参考**[现场演示](http://jsfiddle.net/SivaCharan/uYC2p/)**

# android - 将自定义按钮添加到首选项页面

> ID：13103743
> 
> 赞同：2
> 
> 时间：2012-10-27T20:09:09.457
> 
> 标签：android, sharedpreferences, preferences

如何将保存和取消按钮添加到首选项页面，以便在单击保存按钮时保存它？

# c - C中的赋值错误

> ID：13103744
> 
> 赞同：0
> 
> 时间：2012-10-27T20:09:10.097
> 
> 标签：c, casting, variable-assignment

我有以下代码：

```
struct message_t *msg = ( struct message_t* ) malloc ( sizeof( struct message_t ) );
struct server_t *server = ( struct server_t* ) malloc ( sizeof( struct server_t ) );

server = network_connect( argv[ 2 ] ); 
```

函数 network_connect 返回一个结构 server_t。但是我有争议地得到了错误：

> 警告：赋值使指针从整数不进行强制转换[默认启用]。

我不明白这个错误......首先我没有为我的指针 server_t 分配内存。好吧，我得到了错误并尝试分配内存，什么也没有。我查看了代码 network_connect，一切正常。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-27T20:15:08.963

我的超能力告诉我，你缺少函数的函数原型（声明）`network_connect`——确保包含它所在的头文件。

在 C 中，编译器允许*隐式声明*：当编译器看到一个以前从未见过的新函数名（例如`network_connect`）时，它假定它接受任意数量和类型的参数并返回`int`. 因此，由于隐式函数声明，编译器认为您正在尝试从 a 转换`int`为 a `struct server_t*`，这会导致给定警告。

您的代码中也存在内存泄漏——您正在为`server`对象分配内存`malloc`，然后立即用 的返回值覆盖该指针`network_connect`，这样您分配的内存就永远消失了。在这种情况下不需要分配任何内存，因为`network_connect`直接返回它的值。

最后，在 C 中，不需要强制转换`malloc`. `malloc`返回 a `void*`，并且 C（但不是 C++）允许隐式`void*`转换为任何其他指针类型。这里的强制转换只是不必要的额外冗长，它实际上可以隐藏错误——如果你忘记包含`<stdlib.h>`，那么任何使用 of`malloc`都会使用返回的隐式声明（见上文）`int`。演员表会隐藏错误（你忘了包括`<stdlib.h>`），而没有演员表会给你一个警告。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-27T20:15:02.017

根据您对`network_connect`声明的描述和错误消息，我会说这`network_connect`看起来像

```
struct server_t network_connec(char *); 
```

上面的声明说函数按*原样*返回结构，即它返回一个副本。但是您将变量声明`server`为*指针*，并且不能将非指针值分配给指针。解决方案是不要使`server`变量成为指针（因为分配会引入内存泄漏），只需将其声明为普通的非指针变量：

```
struct server_t server; 
```

# actionscript-3 - 在运行时调整相机和视频显示的大小

> ID：13103745
> 
> 赞同：2
> 
> 时间：2012-10-27T20:09:18.767
> 
> 标签：actionscript-3, apache-flex, air, flex4, flex4.5

我有一个视频显示器（火花）和相机。

```
 public var camera:Camera;
     ...
     livePreview.source = getDynamicStreamingVideoSource();
     camera.setMode(camWidth, camHeight, 15);
     livePreview.videoObject.attachCamera(camera);
     ...
     <s:VideoDisplay id="livePreview" ... /> 
```

在某些情况下，在我的代码中的某处，我尝试通过调用 camera.setMode(newWidth, newHeight) 和设置 livePreview.width = newWidth, livePreview.height = newHeight 以编程方式调整大小。从我所看到的情况来看，这并不奏效。livePreview 调整到新的宽度和高度，但不是相机，至少部分调整。例如，原始尺寸为 250、250，如果我将 500 (W) 和 250 (H) 设置为新尺寸，摄像机视频将水平显示为挤压，但物理宽度保持在 250。现在这是关键，如果我将 livePreview.scaleMode 设置为“拉伸”，相机视频将完全按照我想要的方式显示视频（不失真，大小正确，比例完好）。

现在是我真正的问题：这在性能方面效果不佳。“拉伸”确实向您展示了它正在拉伸视频，至少需要一秒钟才能完成。太慢了。我希望它在没有任何影响的情况下立即工作。我也不明白为什么在我指定正确的宽度并且与videoDisplay宽度相同时需要拉伸它。我在这里失踪了吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-10T22:07:25.880

我在 ActionScript 3.0 Cookbook（recipe 16.6，pg 398-399）一书中偶然发现了一些东西。为了尊重版权，我不会直接引用太多，但这里有一个摘要。我希望它是您正在寻找的：

我不知道你是否真的创建了一个 Video 对象（或者你是否可以），但书中说视频播放的尺寸取决于 Video 对象的宽度和高度属性。

```
var video:Video = new Video(160, 120);
//Now we change the dimensions of the video to scale it up to twice the size.
video.width = 320;
video.height = 240; 
```

虽然我没有使用 Camera 对象的任何直接经验，但我想如果你要从 Camera 对象创建一个 Video 对象（我什至不知道该怎么做，或者如果你可以......另一个问题，也许，）然后你可以直接调整视频的尺寸。

现在听起来像是视频显示对象试图显示比可用分辨率更高的分辨率，因此它正在对视频进行像素化。这就像试图在平板电脑上全屏显示邮票大小的视频......那里没有足够的实际像素数据，所以像素本身被放大了。

您必须找到一种方法来直接调整视频本身的大小，而不仅仅是 videoDisplay 容器。

我不知道这是否有帮助，特别是因为我不是视频专家，但也许这会给你一些想法......？

编辑：我找到了如何从相机中获取视频（[来自另一个 SO 问题！](https://stackoverflow.com/questions/11399814/as3-finding-an-object-by-it-instance-name-in-a-dynamic-added-child)），所以这是我推荐的用于放大视频的完整代码：

```
var camera:Camera = Camera.getCamera();
//You'll want to set the camera's quality and mode.

//Get video from camera.
var video:Video = new Video(160,120);
video.attachCamera(camera);

//Size up video to 320x240.
video.width = 320;
video.height = 240;

//Now, connect the video to the LivePreview object, 
//instead of connecting the camera and the preview directly. 
```

最后一个建议...尝试以您想要的最高分辨率从相机获取输入，然后缩小而不是放大。这将保持质量。

该代码未经测试，因此可能需要调整。尽管如此，我希望这能让你开始解决你的问题！

# javascript - 根据子节点的数量动态调整 d3 树布局的大小

> ID：13103748
> 
> 赞同：28
> 
> 时间：2012-10-27T20:09:38.140
> 
> 标签：javascript, layout, d3.js, tree

从这个例子 [http://mbostock.github.com/d3/talk/20111018/tree.html](http://mbostock.github.com/d3/talk/20111018/tree.html) 我已经构建了一个`d3 tree layout`根在`root.x0 = width/2`浏览器窗口的中间（）并且节点是向下的方向而不是面对向右。

是否可以重新调整树的大小，使得树的宽度取决于树的节点数，如果节点数较少，则宽度较小，否则如果节点数大于宽度大吗？

我还需要知道`d3 tree layout`当前如何计算“ `d.x`”属性？如何操纵“ `d.x`”属性来调整 d3 树布局的节点之间的间距。

* * *

## 回答 #1

> 赞同：46
> 
> 时间：2013-01-03T18:55:51.030

因此，当您设置树布局的“大小”时，您所做的就是设置树布局将插入 x 和 y 值的值。因此，您没有理由不能计算所需的宽度或高度，并在每次更新调用时在布局中更改它。

我将您提供的示例复制到[jsFiddle](http://jsfiddle.net/bSQ8U/1/)并将以下内容添加到更新函数中：

```
// compute the new height
var levelWidth = [1];
var childCount = function(level, n) {

  if(n.children && n.children.length > 0) {
    if(levelWidth.length <= level + 1) levelWidth.push(0);

    levelWidth[level+1] += n.children.length;
    n.children.forEach(function(d) {
      childCount(level + 1, d);
    });
  }
};
childCount(0, root);  
var newHeight = d3.max(levelWidth) * 20; // 20 pixels per line  
tree = tree.size([newHeight, w]); 
```

请注意，这是一个非常粗略的计算，并没有考虑到孩子们在哪里他们的父母或其他任何东西 - 但你明白了。

至于操作节点的 x 值，最简单的可能是在布局完成后简单地修改节点。事实上，您可以看到在示例中已经使用 y 坐标完成了此操作：

```
// Normalize for fixed-depth.
nodes.forEach(function(d) { d.y = d.depth * 180; }); 
```

他这样做是为了即使孩子被隐藏，给定级别的节点也会保持在相同的 y 位置，否则如果您折叠所有孩子，剩余的级别将拉伸以占据整个宽度（尝试注释掉该行，看看会发生什么当您切换整个级别不可见时）。

至于自上而下，我认为您几乎可以在看到 x 和 y（以及 x0 和 y0）的任何地方翻转。不要忘记对对角线投影做同样的事情，以确保你的线条也翻转。

# c# - 将 Lambda 表达式与 List.ConvertAll 一起使用

> ID：13103749
> 
> 赞同：3
> 
> 时间：2012-10-27T20:09:39.263
> 
> 标签：c#, lambda

我对 C# 很陌生，作为练习练习，我试图将 Y 和 N 的控制台输入转换为 true 和 false 的布尔数组（Y=true N=false）。

![在此处输入图像描述](../Images/6fc58bee93b4af7f720aa7c6e5a8a77b.png)

我收到“*只有赋值调用、递增、递减、等待和新对象表达式可以用作语句*”错误。有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-27T20:13:55.783

这有效并且更简单一些。

```
var array = Console.ReadLine().Select(x => x == 'y'); 
```

我相信这是因为您正在使用列表和数组。那是我在尝试您的方法时遇到的错误。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-27T20:15:20.380

尝试：

```
bool[] tempArray = Console.ReadLine().ToList().ConvertAll(ch => Char.Equals(ch, 'Y')).ToArray(); 
```

Lambda 不需要在声明中指定其参数的类型，它们是自动推断的。您还需要将`bool`s 列表转换为带有`ToArray`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-27T20:15:30.913

```
bool[] tempArray = Console.ReadLine().Select(ch => ch == 'Y').ToArray(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-27T20:32:36.257

为了使它没有错误：

```
var bools = Console.ReadLine().Where(x => Char.ToUpperInvariant(x) == 'Y' || Char.ToUpperInvariant(x) == 'N').Select(x => x == 'Y'); 
```

# c++ - 无法创建所有用户启动的快捷方式

> ID：13103751
> 
> 赞同：1
> 
> 时间：2012-10-27T20:09:51.117
> 
> 标签：c++, winapi

我正在使用一些基本代码在我的程序的安装程序中使用。为了让我的程序在启动时运行，我在 All Users Startup 文件夹中创建了一个 .lnk。

我的代码可以创建快捷方式，但我不断收到错误代码 5（priv 错误）。我尝试右键单击并以管理员身份运行此代码，但它不起作用，返回错误代码 5。我还使用该代码在文件系统的其他部分创建快捷方式，没有问题。

我还使用了 3rd 方程序，主要是“elevate.exe”来运行我的程序，但仍然无法正常工作，它继续返回错误代码 5。

我的问题是，如何使用下面的代码在没有 UAC 的情况下在所有用户的启动文件夹中创建快捷方式？

```
 int main () 
 {

 CoInitialize(NULL);

 IShellLink* pShellLink = NULL;

 HRESULT hres;

 hres = CoCreateInstance(CLSID_ShellLink, NULL, CLSCTX_ALL, IID_IShellLink,   (void**)&pShellLink);

  if (SUCCEEDED(hres))

  {
    pShellLink->SetPath("C:\\Windows\\System32\\testinstall\\test.exe");  // Path to the object we are referring to

    pShellLink->SetDescription("This is a test");

    pShellLink->SetIconLocation("C:\\Windows\\System32\\testinstall\\test.exe", 0);

    IPersistFile *pPersistFile;

    hres = pShellLink->QueryInterface(IID_IPersistFile, (void**)&pPersistFile);

    if (SUCCEEDED(hres))

    {
        hres = pPersistFile->Save(L"C:\\ProgramData\\Microsoft\\Windows\\Start Menu\\Programs\\Startup", TRUE);

        pPersistFile->Release();
    }

    else
    {
        cout << "Error 2" << endl;

        return 2;
    }

    pShellLink->Release();

    }

    else
    {

    cout << "Error 1" << endl;

    return 1;

    }

    cout << GetLastError ();

    _getch ();

    return 0;

    } 
```

# java - Jmonkey 碰撞检测

> ID：13103753
> 
> 赞同：2
> 
> 时间：2012-10-27T20:09:59.100
> 
> 标签：java, collision, jmonkeyengine

我是 Jmonkey 编程的新手，我想问一个关于碰撞交互的问题，因为我的代码似乎发现了可能来自地形的碰撞，我不知道如何解决这个问题。我的目标是玩家作为第一个被检测到的人，如果他与敌人的幽灵控件发生碰撞以显示消息作为输出。我的代码显示一个持续的碰撞，然后它崩溃了......

```
package test;

//imports...

public class test extends SimpleApplication
implements ActionListener,PhysicsTickListener{
    private MotionPath path;
    private MotionPath path2;
    private MotionTrack motionTrack;
    private MotionTrack motionTrack2;
    private AnimChannel channel2;
    private AnimControl control2;
    private AnimControl control3;
    private AnimChannel channel3;
    private BulletAppState bulletAppState;
    private RigidBodyControl landscape;
    private CharacterControl player;
    private Vector3f walkDirection = new Vector3f();
    private boolean left = false, right = false, up = false, down = false;
    private TerrainQuad terrain;
    private Material mat_terrain;
    private GhostControl ghost;
    static test app;
    Material matMarker;
    public static void main(String[] args) {
        app = new test();
        app.start();

    }
    float displacement=60;
    int score = 0;
    int robotHealth=0;
    Geometry mark;
    Node shootables;
    Node pickUpObject1;
    BitmapText hudText;
    @Override
    public void simpleInitApp() {

        createScene();
        enemies();
        pickUptype1();
        initCrossHairs(); // a "+" in the middle of the screen to help aiming
        initKeys();       // load custom key mappings
        initMark();       // a red sphere to mark the hit

        hudText = new BitmapText(guiFont, false);
        hudText.setSize(guiFont.getCharSet().getRenderedSize());      // font size
        hudText.setColor(ColorRGBA.Red);                             // font color

        hudText.setLocalTranslation(600, 700, 0); // position
        guiNode.attachChild(hudText);

        DirectionalLight sun2 = new DirectionalLight();
        sun2.setDirection(new Vector3f(-0.1f, -0.7f, -1.0f));
        int width = settings.getWidth();           //width is the width of the gui
        int height = settings.getHeight();         //height is the height of the gui
    }

    protected Geometry makeCube(String name, float x, float y, float z) {
        Box box = new Box(new Vector3f(x, y, z), 3f, 3f, 3f);
        Geometry cube = new Geometry(name, box);

        Material mat1 = new Material(assetManager, "Common/MatDefs/Misc/Unshaded.j3md");
        Texture tex_ml = assetManager.loadTexture("Interface/Logo/Monkey.jpg");
        mat1.setTexture("ColorMap", tex_ml);
        cube.setMaterial(mat1);

        return cube;
    }

    private PhysicsSpace getPhysicsSpace() {
        return bulletAppState.getPhysicsSpace();
    }

    /**
    * This is the main event loop--walking happens here.
    * We check in which direction the player is walking by interpreting
    * the camera direction forward (camDir) and to the side (camLeft).
    * The setWalkDirection() command is what lets a physics-controlled player walk.
    * We also make sure here that the camera moves with player.
    */
    @Override
    public void simpleUpdate(float tpf) {
        hudText.setText("SCORE \n" + "    " + score);// the text
        Vector3f camDir = cam.getDirection().clone().multLocal(0.6f);
        Vector3f camLeft = cam.getLeft().clone().multLocal(0.4f);
        walkDirection.set(0, 0, 0);
        if (left)  { walkDirection.addLocal(camLeft); }
        if (right) { walkDirection.addLocal(camLeft.negate()); }
        if (up)    { walkDirection.addLocal(camDir); }
        if (down)  { walkDirection.addLocal(camDir.negate()); }

        player.setWalkDirection(walkDirection);
        cam.setLocation(player.getPhysicsLocation());
        path.setCycle(true); // Make path a complete circuit
        path2.setCycle(true);
        motionTrack.setLoopMode(LoopMode.Loop);
        motionTrack2.setLoopMode(LoopMode.Loop);

    }

    public Node robot(){

        Node monster = (Node) assetManager.loadModel("Models/Oto/Oto.mesh.xml");
        monster.scale(1.5f, 1.5f, 1.5f);
        monster.rotate(0.0f, -3.0f, 0.0f);
        // Create a appropriate physical shape for it

        return monster;
    }

    public void createScene(){

        /** Set up Physics */
        bulletAppState = new BulletAppState();
        stateManager.attach(bulletAppState);
        //bulletAppState.getPhysicsSpace().enableDebug(assetManager);

        flyCam.setMoveSpeed(100);
        setUpKeys();

        terrain = new TerrainQuad("my terrain", 65, 513, heightmap.getHeightMap());

        /** 6\. Add physics: */
        // We set up collision detection for the scene by creating a
        // compound collision shape and a static RigidBodyControl with mass zero.*/
        CollisionShape terrainShape =
        CollisionShapeFactory.createMeshShape((Node) terrain);
        landscape = new RigidBodyControl(terrainShape, 0);
        terrain.addControl(landscape);

        CapsuleCollisionShape capsuleShape = new CapsuleCollisionShape(1.5f, 6f, 1);
        player = new CharacterControl(capsuleShape, 0.05f);
        player.setJumpSpeed(20);
        player.setFallSpeed(30);
        player.setGravity(30);
        player.setPhysicsLocation(new Vector3f(145f, -28f, 10f));
        player.setCollisionGroup(PhysicsCollisionObject.COLLISION_GROUP_01);
        player.addCollideWithGroup(PhysicsCollisionObject.COLLISION_GROUP_01);

        setUpLight();
        rootNode.attachChild(SkyFactory.createSky( assetManager,
        "Textures/Sky/Bright/BrightSky.dds", false));
    }

    public void enemies(){

        shootables = new Node("Shootables");
        rootNode.attachChild(shootables);

        Node Robot1 = robot();
        Node Robot2 = robot();

        CapsuleCollisionShape capsule = new CapsuleCollisionShape(4f, 10f);
        RigidBodyControl robot1Cap = new RigidBodyControl(capsule, 0.01f);

        Robot1.addControl(robot1Cap);

        getPhysicsSpace().add(robot1Cap);

        bulletAppState.getPhysicsSpace().add(robot1Cap);
        bulletAppState.getPhysicsSpace().enableDebug(assetManager);

        robot1Cap.setMass(100f);
        robot1Cap.setKinematic(true);

        CapsuleCollisionShape capsule2 = new CapsuleCollisionShape(4f, 10f);
        RigidBodyControl robot2Cap = new RigidBodyControl(capsule, 0.01f);

        Robot2.addControl(robot2Cap);

        getPhysicsSpace().add(robot2Cap);

        bulletAppState.getPhysicsSpace().add(robot2Cap);
        bulletAppState.getPhysicsSpace().enableDebug(assetManager);

        robot2Cap.setMass(100f);
        robot2Cap.setKinematic(true);

        ghost = new GhostControl(
        new BoxCollisionShape(new Vector3f(8f,8f,8f)));  // a box-shaped ghost
        Robot1.addControl(ghost);

        ghost.setCollisionGroup(PhysicsCollisionObject.COLLISION_GROUP_01);
        ghost.setCollideWithGroups(PhysicsCollisionObject.COLLISION_GROUP_01);

        getPhysicsSpace().add(ghost);

        getPhysicsSpace().addTickListener(this);

        control2 = Robot1.getControl(AnimControl.class);
        channel2 = control2.createChannel();
        channel2.setAnim("Walk");

        control3 = Robot2.getControl(AnimControl.class);
        channel3 = control3.createChannel();
        channel3.setAnim("Walk");
        path = new MotionPath();

        path.addWayPoint(new Vector3f(500f,-83f,3f));
        path.addWayPoint(new Vector3f(350f,-79f, 3f));
        path.enableDebugShape(assetManager,rootNode);

        // Initialize our motionTrack object
        motionTrack = new MotionTrack(Robot1, path);

        motionTrack.setDirectionType(MotionTrack.Direction.Path);
        // Enable the motionTrack
        motionTrack.setEnabled(true);

        path2 = new MotionPath();

        path2.addWayPoint(new Vector3f(180f,-50f,-100f));
        path2.addWayPoint(new Vector3f(200f, -55f, -30f));
        path2.enableDebugShape(assetManager,rootNode);

        // Initialize our motionTrack object
        motionTrack2 = new MotionTrack(Robot2, path2);
        motionTrack2.setDirectionType(MotionTrack.Direction.Path);
        // Enable the motionTrack
        motionTrack2.setEnabled(true);

        shootables.attachChild(Robot1);
        shootables.attachChild(Robot2);

    }

    public void physicsTick(PhysicsSpace space, float f) {
        if (ghost.getOverlappingObjects().size() > 0) {
            final Vector3f bPoint = ghost.getPhysicsLocation();
            try {
                app.enqueue(new Callable<Boolean>() {
                    public Boolean call() throws Exception {
                        app.addMarker(bPoint);
                        return true;
                    }
                });
            } catch (Exception ex) {
            }
        }
    }

    public void pickUptype1(){
        pickUpObject1 = new Node("pickUpObject1");
        rootNode.attachChild(pickUpObject1);

        Node cube1 = new Node();
        cube1.attachChild(makeCube("the Deputy", 220f, -63f, -150f));
        Node cube2 = new Node();
        cube2.attachChild(makeCube("the Deputy2", 410f, -89f, -270f));

        RigidBodyControl floor_phy = new RigidBodyControl(0.0f);
        cube1.addControl(floor_phy);

        RigidBodyControl floor_phy2 = new RigidBodyControl(0.0f);
        cube2.addControl(floor_phy2);
        bulletAppState.getPhysicsSpace().add(floor_phy);
        bulletAppState.getPhysicsSpace().add(floor_phy2);
        pickUpObject1.attachChild(cube1);
        pickUpObject1.attachChild(cube2);
    }

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-05-11T20:39:21.980

您包含了许多不必要的代码，并且从您对编程的一般风格来看，我编辑了您的问题以使其易于阅读，以便人们可以尝试和帮助（没有修复缩进，尽管这需要太多的耐心. 代码应该被剥离，只包括物理代码，成员变量和上下文设置。如果你的幽灵控制没有停留在地面上，它会掉下来离开你的机器人，所以它会不断地与地面或在最初穿过地面后从空隙中坠落。

您应该使用 getOverlappingObjects() 来获取与之碰撞的对象列表，然后检查该列表以获取物理空间中的字符表示。

以下也是不好的形式。如果您的方法要抛出异常，您应该知道它可以抛出什么并抛出那些确切的异常并处理每个异常。否则，您基本上是在绑上防弹衣并闭着眼睛到处跑，因为相信您不会受伤。

```
public Boolean call() throws Exception 
```

此外，您的敌人功能设计不佳。函数最好是小的，并且绝对应该只实现一个目的，而你的函数创建一个带有可射击的节点，创建两个敌人并设置控件。

创建节点并将其附加到根节点应该在构造函数中或在开始附近调用的初始化函数中。然后你应该有一个类似 addEnemy 的函数来添加一个敌人。例如：

```
/*
* adds an enemy and returns a reference to that enemy
*/
Spatial addEnemy()
{
    //Characters are spatials typically in JMonkey
    Spatial enemy=new Spatial(); 
    CapsuleCollisionShape collisionShape=new CapsuleCollisionShape(4.0f, 10.0f);
    CharacterControl characterControl = new CharacterControl(collisionShape, stepHeight);

    enemy.addControl(characterControl);
    getPhysicsSpaceState(characterControl);
    shootables.attachChild(enemy);
} 
```

现在你注意到这真的不一样了吗？

在 JMonkey 中，角色使用 Spatials（从节点派生的类），而且他们不使用刚体物理，地形之类的东西太颠簸了，而是使用角色控件，这些控件使它们保持直立，因此它们不会倾倒并允许您可以设置步行方向和查看方向。角色控件还提供了对碰撞形状的访问权限，您可以在该形状上运行 collides with 以获取角色控件何时相互碰撞。

为了控制您的 Spatial，您需要继承 AbstractControl，使用它您可以访问其他控件并经常更新您的 Spatial。在我的游戏中，所有角色都是具有不同皮肤设置的空间，不同之处在于控件。

玩家拥有：

```
CharacterControl
//to send keyboard input to the character controller to move it
KeyboardControl 
GunControl 
```

而人工智能有

```
CharacterControl
//does path planning to get a route and steers character control along it
RouteController  
GunControl
//AI to determine where/if I want to walk, what to shoot at, where to aim
BehaviourControl 
```

您应该将许多此功能拆分为一条更易于维护的路径，通过查看示例了解更多关于 JMonkey API 的工作原理，并了解面向对象设计的工作原理以及如何构造事物以使其易于阅读并且易于维护。如果您对 Robert C Martin 的书 clean code 感兴趣，它是关于干净可维护编码风格的绝佳指南 :)

有任何问题请随时询问我（们

# c++ - IntelliSense：对象具有与成员函数不兼容的类型限定符

> ID：13103755
> 
> 赞同：39
> 
> 时间：2012-10-27T20:10:11.247
> 
> 标签：c++, visual-studio-2010

我有一个名为 Person 的类：

```
class Person {
    string name;
    long score;
public:
    Person(string name="", long score=0);
    void setName(string name);
    void setScore(long score);
    string getName();
    long getScore();
}; 
```

在另一堂课中，我有这个方法：

```
void print() const {
     for (int i=0; i< nPlayers; i++)
        cout << "#" << i << ": " << people[i].getScore()//people is an array of person objects
    << " " << people[i].getName() << endl;
} 
```

这是人们的宣言：

```
 static const int size=8; 
    Person people[size]; 
```

当我尝试编译它时，我得到了这个错误：

```
IntelliSense: the object has type qualifiers that are not compatible with the member function 
```

在 print 方法中的 2 **people[i]**下面有红线

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：52
> 
> 时间：2012-10-27T20:13:47.490

`getName`不是 const，`getScore`不是 const，而是`print`is。使前两个 const 像`print`. 您不能使用 const 对象调用非常量方法。由于您的 Person 对象是其他类的直接成员，并且由于您处于 const 方法中，因此它们被视为 const。

一般来说，你应该考虑你编写的每一个方法，如果是这样，就将它声明为 const 。简单的 getter 喜欢`getScore`并且`getName`应该始终是 const。

# javascript - 将 OO 语言编译为 Javascript

> ID：13103760
> 
> 赞同：0
> 
> 时间：2012-10-27T20:10:39.227
> 
> 标签：javascript, oop, compiler-construction

所以我是 Javascript 的新手，但我一直在研究一种与 C# 语义相似的编程语言，我想添加一个 JS 反编译器。我一直在研究在 Javascript 中实现 OOP 的各种方法，但我不完全确定它是否会进一步发挥作用。

让我从一个例子开始。这是我的语言中的一段非常简单的代码：

```
// test.fd
// this code will be put in package 'test'
class Foo
{
    float bar;

    - test
    {
        int x = 3;
    }
} 
```

它输出这个：

```
var test = {
    function Foo(){
        this.bar = 0.0;
    };

    foo.prototype.test = function(){
        var x = 3;
    };
} 
```

现在我有几个问题。目前，当它编译类时，它会创建 js 函数 'Foo()'，我认为它实际上是一个构造函数。我想如果用户没有创建默认构造函数，我应该默认创建它，在这种情况下使用它。但是如果我想为同一个类有多个构造函数怎么办？它们是否必须具有不同的名称，我是否必须为每个构造函数重新创建所有方法和属性？

我的下一个问题是，在 JS 中实现继承的最佳方式是什么？我的语言假定所有方法都是虚拟的，因此它应该有望使多态性更容易。

谢谢大家，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-27T20:55:15.037

正如@WaleedKhan 指出的那样，您不应该为您不太了解的语言构建转编译器。

首先，您编译的代码并没有按照您的想法执行：

```
> var test = {
.    // Objects != namespaces
.    // Anything that is not a key: value pair is a syntax error.
.    function Test() {}
. }

SyntaxError: Unexpected identifier 
```

如果你想要一个类似命名空间的效果，你应该使用函数，因为[**JavaScript 没有块作用域**](https://developer.mozilla.org/en-US/docs/JavaScript/Guide/Statements#Block_Statement)：

```
var test = (function(){
// This wrapper is an immediately invoked function expression (IIFE)
// It will act as a "namespace" inasmuch as functions and variables that are
// declared with `var` will not leak into the global scope.
// However, anything that you don't *explicitly* expose will be private.

function Foo() {
    this.bar = 0.0;
}

// JavaScript is case-sensative - foo != Foo.
Foo.prototype.test = function() {
    var x = 1;
};

return {
    Foo: Foo
};

})(); 
```

至于你的问题：

是的，`Foo`是一个构造函数（某种意义上的）——但是，JavaScript 不支持您想要执行的那种调度。相反，您需要一个包装函数，该函数根据传入的参数调用*适当的构造函数：*

```
function FooFactory() {
    if (typeof arguments[0] === "string") {
        return new FooString(arguments[0]);
    }
    else {
        return new FooObject(arguments[0]);
    }
} 
```

这很快就变得难以使用（尽管有[一些库](https://github.com/natefaubion/matches.js)可以更容易地进行这种调度）。

至于如何正确地进行原型继承，你看过@bobince 对[如何“正确”在 JavaScript 中创建自定义对象的回答吗？](https://stackoverflow.com/questions/1595611/how-to-properly-create-a-custom-object-in-javascript/1598077#1598077)

最后，您可能想看看[JavaScript 闭包是如何工作的？](https://stackoverflow.com/questions/111102/how-do-javascript-closures-work)以及 Kangax关于JavaScript 语言[复杂部分的](http://perfectionkills.com/javascript-quiz/)[优秀](http://kangax.github.com/nfe/) [文章（他的](http://perfectionkills.com/understanding-delete/)[ES5 兼容性表](http://kangax.github.com/es5-compat-table/)也不容错过）。

如果你做到了这一步，祝你的冒险好运！

# windows-8 - 如何精确测量后台任务中的 CPU 使用率？

> ID：13103761
> 
> 赞同：11
> 
> 时间：2012-10-27T20:10:51.033
> 
> 标签：windows-8, microsoft-metro, windows-runtime

WinRT 中后台任务的 CPU 使用配额为 1 秒，如果它们处于锁屏状态，则为 2 秒。问题是如何准确测量这个 CPU 使用率 - 我想知道我的代码是否在这 2 秒的配额下运行？我猜在执行任务之前和之后只使用 DateTime.Now 不是正确的方法。
关于后台任务的 MSDN 文章：
[使用后台任务支持您的应用程序](http://msdn.microsoft.com/en-us/library/windows/apps/xaml/hh977056.aspx)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T23:54:35.153

我有同样的问题。

如果您开始`Task Manager`，在`App history`选项卡下，您可以看到各种应用程序的资源使用情况统计信息。其中之一是`CPU Time`。问题是它不是平均值，它只显示总 CPU 使用时间。

如果您需要平均时间，诀窍是在您的应用程序中记录任何后台活动，然后将整个时间除以该平均时间，这样您就可以获得平均时间。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-04-30T17:55:28.893

我使用[了 GetProcessTimes](https://msdn.microsoft.com/en-us/library/windows/desktop/ms683223(v=vs.85).aspx) WinAPI。

该文档说“仅限桌面应用程序”，但从技术上讲，它甚至存在于手机上：

```
 [DllImport( "KERNELBASE.DLL", SetLastError = true )]
    static extern IntPtr GetCurrentProcess();

    // NB! Undocumented API, won't pass marketplace checks.
    [DllImport( "KERNELBASE.DLL", SetLastError = true )]
    [return: MarshalAs( UnmanagedType.Bool )]
    static extern bool GetProcessTimes( IntPtr hProcess, out long lpCreationTime, out long lpExitTime, out long lpKernelTime, out long lpUserTime ); 
```

在 PC 上将 KERNELBASE.DLL 替换为 Kernel32.dll。

这不会通过市场认证，但应该足以让您对后台任务进行基准测试。

启动时调用 GetProcessTimes，计算`long startTime = KernelTime + UserTime`. 完成后调用 GetProcessTimes，计算`( KernelTime + UserTime ) - startTime`，然后你就得到你的数据。测量单位是 100ns 滴答，就像在 TimeSpan 中一样。

# php - MySql UNIX_TIMESTAMP() 存储为 UTC，夏令时临近

> ID：13103762
> 
> 赞同：3
> 
> 时间：2012-10-27T20:10:55.293
> 
> 标签：php, mysql, utc, unix-timestamp, dst

我的数据库服务器（运行 MySql 5.5）设置为 UTC，日期使用 UNSIGNED INT 作为 Unix 时间戳存储在数据库中。数据库主要用于存储在特定时间（exec_time）运行的任务。

我通过使用登录用户的时区（在本例中为 BST）在 PHP 中创建时间戳来插入任务。例如，我有一个任务设置为在 1351396800 运行，这是明天早上 4 点格林威治标准时间。

我使用以下查询从数据库中提取任务：

```
SELECT * FROM tasks WHERE exec_time <= UNIX_TIMESTAMP(); 
```

当明天凌晨 2 点时钟回退一小时时，这个设置可以吗？

更新：PHP 可以很好地转换日期。将 PHP 时区设置为 Europe/Dublin（当前为 BST）在午夜 12 点和凌晨 4 点添加的两个事件存储如下：

```
mysql> select exec_time, FROM_UNIXTIME(exec_time) from tasks order by id desc limit 2;
+-------------+----------------------------+
| exec_time | FROM_UNIXTIME(exec_time) |
+-------------+----------------------------+
|  1351378800 | 2012-10-27 23:00:00        |
|  1351396800 | 2012-10-28 04:00:00        | 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-27T21:03:41.047

tl; dr 只要您的`exec_time`列具有 TIMESTAMP 数据类型，您就应该没问题。

没有明确的 UNIX_TIMESTAMP 列数据类型。有一个 TIMESTAMP 列数据类型。从日期/时间字符串和 UTC 转换时，此数据类型的列的值会自动从客户端连接的时区转换为 UTC（a/k/a Z 或 Zulu 时间，f/k/a 格林威治标准时间）转换为日期/时间字符串后到您的客户端连接的时区。

因此，如果您将`exec_time`列存储为`TIMESTAMP`，则应该能够使用您建议的子句：

```
 WHERE exec_time <= UNIX_TIMESTAMP() 
```

这将起作用，因为您的`exec_time`值和`UNIX_TIMESTAMP()`函数调用的结果都是在服务器端以 UTC 处理的。您的`exec_time`值将以 UTC 格式存储。

如果您存储`exec_time`为一个`UNSIGNED INT`或类似的数字数据类型，您将无法在存储之前利用自动转换为 UTC。

您可以通过如下设置客户端连接 time_zone 来扰乱显示转换行为：

```
 SET time_zone='SYSTEM'   /* for your system's local time */ 
```

或者

```
 SET time_zone='+0:00'   /* for UTC */ 
```

或者

```
 SET time_zone'America/New_York' /* or 'Europe/Vienna' or whatever */ 
```

发出这些 SET 操作之一后，请执行

```
 SELECT exec_time, FROM_UNIXTIME(exec_time) 
```

了解您的值是如何在服务器端存储和翻译的。

如果你想看看八天后会发生什么，试试这个：

```
 SELECT 3600*24*8+exec_time, FROM_UNIXTIME(3600*24*8+exec_time) 
```

[http://dev.mysql.com/doc/refman/5.5/en//time-zone-support.html](http://dev.mysql.com/doc/refman/5.5/en//time-zone-support.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-27T20:28:19.337

In answer to your question, it depends how critical the time fields are, and whether the server's local time will change or not. If it's UTC then it probably won't change.

The temporal types in MySQL aren't timezone aware. You'll have to implement timezones yourself, perhaps by always storing a UTC timestamp/datetime and a separate timezone column which contains an interval offset from +12 to -12 hours for how much time to add or subtract to the UTC timestamp for the timezone.

The actual handling of what value to put in the timezone field and the work needed to retrieve a timestamp adjusted for the timezone are up to you, unfortunately.

If switching to Postgres is an option then you can always use the TIMESTAMP WITH TIMEZONE type that Postgres supplies.

# r - 设置小提琴图ggplot的最小限制

> ID：13103766
> 
> 赞同：4
> 
> 时间：2012-10-27T20:11:15.120
> 
> 标签：r, bounds, ggplot2

我想设置小提琴图的最小界限，类似于这个问题：[set only lower bound of a limit for ggplot](https://stackoverflow.com/questions/11214012/set-only-lower-bound-of-a-limit-for-ggplot)

为了这：

```
p <- ggplot(somedf, aes(factor(user1), pq)) + aes(ymin = -50)
p + geom_violin(aes(fill = user1))+ aes(ymin=-50) 
```

我试过添加

```
+ expand_limits(y=-50) 
```

和

```
+ aes(ymin = -50) 
```

设置没有效果的下限。

这是导致相同问题的示例数据框：

```
structure(list(pq = c(-20L, -12L, 10L, -13L, 11L, -16L), time = c(1214.1333, 
1214.1833, 1214.2667, 1214.2833, 1214.35, 1214.5167), pq.1 = c(-20L, 
-12L, 10L, -13L, 11L, -16L), time.1 = c(1214.1333, 1214.1833, 
1214.2667, 1214.2833, 1214.35, 1214.5167), time.2 = c(1214.1333, 
1214.1833, 1214.2667, 1214.2833, 1214.35, 1214.5167), pq.2 = c(-20L, 
-12L, 10L, -13L, 11L, -16L), user1 = structure(c(1L, 1L, 2L, 
1L, 2L, 1L), .Label = c("someguy3", "someguy4", "someguy6", "someguy4", 
"someguy5", "someguy6"), class = "factor"), pq.3 = c(-20L, -12L, 10L, 
-13L, 11L, -16L), time.3 = c(1214.1333, 1214.1833, 1214.2667, 
1214.2833, 1214.35, 1214.5167), user1.1 = structure(c(1L, 1L, 
2L, 1L, 2L, 1L), .Label = c("someguy3", "someguy4", "someguy6", 
"someguy4", "someguy5", "someguy6"), class = "factor")), .Names = c("pq", 
"time", "pq.1", "time.1", "time.2", "pq.2", "user1", "pq.3", 
"time.3", "user1.1"), row.names = c(565L, 566L, 568L, 569L, 570L, 
574L), class = "data.frame") 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-27T20:49:33.177

`aes()`如果您添加对`geom_blank()`.

```
## A reproducible example
library(ggplot2)
p <- ggplot(mtcars, aes(factor(cyl), mpg))

## This doesn't work:
p + aes(ymin = -10) + geom_violin()

## But this does:    
p + aes(ymin = -10) + geom_violin() + geom_blank() 
```

（注意：至少对于这个例子，`expand_limits(y = -10)`不管有没有伴随的调用都可以工作`geom_blank()`。）

![在此处输入图像描述](../Images/cd3677d8f980afa636ec4dd6f0465bd2.png)

# authentication - zend framework 2 autentification 使用 DbTable 失败

> ID：13103771
> 
> 赞同：2
> 
> 时间：2012-10-27T20:11:51.300
> 
> 标签：authentication, zend-framework2, zend-db-table, zend-auth

我已按照[zend 说明](http://packages.zendframework.com/docs/latest/manual/en/modules/zend.authentication.adapter.dbtable.html)使用数据库表实现我的 Web 身份验证。

完全相同的代码，但是在渲染页面时，出现以下异常：

```
 Zend\Authentication\Adapter\Exception\RuntimeException
    File:
    C:\xampp\htdocs\pfc\vendor\ZF2\library\Zend\Authentication\Adapter\DbTable.php
    Mensaje:
    The supplied parameters to DbTable failed to produce a valid sql statement, please
    check table and column names for validity. 
```

由另一个产生：

```
 Zend\Db\Adapter\Exception\InvalidQueryException
    File:
    C:\xampp\htdocs\pfc\vendor\ZF2\library\Zend\Db\Adapter\Driver\Mysqli\Statement.php
    Mensaje:
    Statement couldn't be produced with sql: SELECT `users`.*, (CASE WHEN `password` = ?
    THEN 1 ELSE 0 END) AS `zend_auth_credential_match` FROM `users` WHERE `mail` = ? 
```

似乎是 Statement.php 无法执行上面的 sql，但我通过 phpmyadmin 发送 sql 替换 ? 对于字符串和工作正常。

我确信 $dbAdapter 也可以正常工作，因为我已经对其进行了测试，并且列名是“mail”和“password”。

这在我的代码中，我也放了 $dbAdapter 测试代码。

```
 $dbAdapter = new DbAdapter(array(   //This DbAdapter Work ok sure!!
        'driver' => 'Mysqli',
        'database' => 'securedraw',
        'username' => 'root',
        'password' => ''
    ));

    $fp = function($name) use ($dbAdapter) { return $dbAdapter->driver->formatParameterName($name);};
    $sql = 'SELECT * FROM ' . $qi('users') . ' WHERE id = ' . $fp('id');
    $statement = $dbAdapter->query($sql);
    $parameters = array('id' => 1);
    $sqlResult = $statement->execute($parameters);
    $row = $sqlResult->current();
    $mail = $row['mail'];
    $password = $row['password'];  //until here test $dbAdapter exitly!!

    //Start the auth proccess!!
    $authAdapter = new AuthDbTableAdapter($dbAdapter);
    $authAdapter->setTableName('users')
    ->setIdentityColumn('mail')
    ->setCredentialColumn('password');
    $authAdapter->setIdentity('josep')
    ->setCredential('josep');
    $authResult = $authAdapter->authenticate();   //This is the fail method!!! 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-27T22:57:27.007

在对该主题进行了更多研究后，我发现如果将 dbAdapter 的驱动程序更改为 pdo_mysql，authenticate 方法可以正常工作。

问题是我不想使用 PDO，因为 SGBD 将来不会改变。

有人知道因为发生这种情况吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-27T01:19:52.567

这可能看起来很旧，但我能够解决这个错误。此错误是由您的 MySQL 版本引起的。

这个对我有用。您需要做的就是从您的数据库设置中删除 driver_options，此代码通常位于您的配置文件中的 global.php 或 .local.php 中。

更改自：

```
'db' => array(
    'driver'         => 'Pdo_Mysql',
    'dsn'            => 'mysql:dbname=dbName;host=localhost',
    'username'       => 'dbUser',
    'password'       => 'dbPass',
    'driver_options' => array(
        PDO::MYSQL_ATTR_INIT_COMMAND => 'SET NAMES \'UTF8\''
    ),
), 
```

至

```
'db' => array(
    'driver'         => 'Pdo_Mysql',
    'dsn'            => 'mysql:dbname=dbName;host=localhost',
    'username'       => 'dbUser',
    'password'       => 'dbPass',
), 
```

谢谢你。这个解决方案解决了我的问题。

# java - 使用 Java String.format

> ID：13103772
> 
> 赞同：1
> 
> 时间：2012-10-27T20:11:55.307
> 
> 标签：java, string.format

我有一个字符串“名称”，我需要在末尾添加 n 个空格。有人告诉我要使用 String.format，但对于我的一生，我不知道该怎么做。

```
String formatName = String.format(name, %15s);
return formatName; 
```

但这不起作用，谁能指出我正确的方向？

基本上，如果原始字符串太短，我需要使每个字符串长度为 15 个字符，并在末尾附加空格。

=================

根据建议，我颠倒了参数，但这会引发错误。

```
private String format(String name, String number) 
{
    String formatName = String.format(%15s, name);
    String formatNumber = String.format(%15s, number);
    return formatName + " - " + formatNumber;
} 
```

但是，这会引发错误 - 表达式的非法开始。

谁能告诉我我做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-27T20:16:05.147

```
formatName = String.format(name + "%15s", ""); 
```

或者

```
formatName = String.format("%-15s", name); 
```

`-`附加到参数的末尾。

# php - 正确的标题技术

> ID：13103773
> 
> 赞同：0
> 
> 时间：2012-10-27T20:11:58.287
> 
> 标签：php, html

有标题的正确方法是什么？例如，PHP `include`，在页面、iframe 等之间复制和粘贴它。我有兴趣拥有一个可以从一个文件轻松编辑的标题

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-27T20:17:49.053

没有“正确”的方式。也就是说，复制粘贴和 iframe 通常是非常糟糕的主意。使用包含是很常见的，通常是一种很好的方法。更好的是使用 MVC 框架提供的布局和模板工具，但这可能是一个陡峭的学习曲线，并且难以融入现有的项目。

# node.js - expressjs req.body.username 未定义

> ID：13103775
> 
> 赞同：2
> 
> 时间：2012-10-27T20:11:59.267
> 
> 标签：node.js, express

我看过几篇与此相关的帖子，但这里似乎没有一个问题。

这是一个非常简单的初学者 nodejs 应用程序，在 windows7 上使用 expressjs

```
/**
 * Module dependencies.
 */

var express = require('express')
    , connect = require('connect')
    , http = require('http')

var app = express();

app.configure(function(){
  app.set('port', process.env.PORT || 3000);
  // app.use(express.bodyParser());
  app.use(connect.bodyParser());
});

/**
 * Routes
 */
//get requests
// app.get("/", function(req, res){
//   res.send("Hello, Express!");
// });

// app.get("/hi", function(req, res){
//   var message = [
//     "<h1>Hello, Express!</h1>",
//     "<p>Welcome to 'Building Web Apps in Node.js with Express.'</p>",
//     "<p>You'll love Express because it's</p>",
//     "<ul><li>Fast</li>",
//     "<li>Fun</li>",
//     "<li>Flexible</li>"
//   ].join("\n");

//   res.send(message);
// });

// app.get("/users/:userID", function(req, res){
//   res.send("<h1>Hello, User #" + req.params.userID + "!");
// });

//post requests
app.post("/users", function(req, res){
    // res.send(req.body);
    res.send(req.body.username);
});

http.createServer(app).listen(app.get('port'), function(){
  console.log("Express server listening on port " + app.get('port'));
}); 
```

如您所见，我已经注释掉了其他路线，以确保它们不会导致问题，并且我也尝试安装和使用“连接”，但 express.bodyParser() 和 connect.bodyParser() 都给了我相同的结果。

我使用了 chrome adv rest 客户端扩展，还尝试了以下简单的 php 表单。

```
<form action="http://localhost:3000/users" method="POST" enctype="application/x-www-form-urlencoded">
    <li>
        <label for="username">Username</label>
        <input type="text" name="username" id="username">
    </li>
    <li>
        <input type="submit" name="submit" id="submit">
    </li>
</form> 
```

在所有情况下，我都会得到一个空的或未定义的 req.body.username，当我在响应中尝试 req.body 时，我得到一个空对象 {}

**更新：** 这是来自 chrome 的响应/请求标头信息：

```
Request URL:http://localhost:3000/users
Request Method:POST
Status Code:200 OK
Request Headersview source
Cache-Control:max-age=0
Connection:keep-alive
Content-Length:31
Host:localhost:3000
Request Payload
username=isimmons&submit=Submit
Response Headersview source
Connection:keep-alive
Date:Sat, 27 Oct 2012 23:01:45 GMT
Transfer-Encoding:chunked
X-Powered-By:Express 
```

这是我发送 req.route 时得到的

```
//result of console.log(req.route);
{ path: '/users',
  method: 'post',
  callbacks: [ [Function] ],
  keys: [],
  regexp: /^\/users\/?$/i,
  params: [] } 
```

Node 和 Express 版本：express 3.0 node 0.8.9

**UPDATE2 问题半解决** 见下面的评论。我应该在这里说。无论如何，这是正常工作时来自 chrome 的请求标头信息。

```
Request URL:http://localhost:3000/users
Request Method:POST
Status Code:200 OK
Request Headersview source
Accept:text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8
Accept-Charset:ISO-8859-1,utf-8;q=0.7,*;q=0.3
Accept-Encoding:gzip,deflate,sdch
Accept-Language:en-US,en;q=0.8
Cache-Control:max-age=0
Connection:keep-alive
Content-Length:26
Content-Type:application/x-www-form-urlencoded
Host:localhost:3000
Origin:http://localhost
Referer:http://localhost/nodeform.php
User-Agent:Mozilla/5.0 (Windows NT 6.1) AppleWebKit/537.16 (KHTML, like Gecko) Chrome/24.0.1305.3 Safari/537.16
Form Dataview sourceview URL encoded
username:dfd
submit:Submit
Response Headersview source
Connection:keep-alive
Content-Length:3
Content-Type:text/html; charset=utf-8
Date:Sun, 28 Oct 2012 01:12:23 GMT
X-Powered-By:Express 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-28T02:31:13.683

好的，终于遇到了这个其余 api 的错误报告，只需添加内容类型即可解决问题。

[错误报告](http://code.google.com/p/chrome-rest-client/issues/detail?can=2&start=0&num=100&q=&colspec=ID%20Type%20Status%20Priority%20Milestone%20Owner%20Summary&groupby=&sort=&id=85)

错误报告有一个答复，要求在发送前手动添加“Content-type”标头。这就是 php 表单起作用的原因。它设置了 enctype，因此我得到了完整的请求标头，如上所示。

要手动添加的正确内容类型标头是

```
Content-Type: application/x-www-form-urlencoded 
```

# jsp - JSP 中的 JFreeChart 错误

> ID：13103781
> 
> 赞同：2
> 
> 时间：2012-10-27T20:12:38.850
> 
> 标签：jsp, jfreechart

我尝试使用此代码，但出现错误。该代码在java项目中工作，但当我将它添加到这样的jsp文件时不起作用`<% grafik.ciz()%>`。

```
 package yazlab;

import java.awt.*;
import java.io.*;
import org.jfree.chart.*;
import org.jfree.chart.axis.*;
import org.jfree.chart.entity.StandardEntityCollection;
import org.jfree.chart.plot.*;
import org.jfree.chart.renderer.category.*;
import org.jfree.data.category.*;
import org.jfree.data.general.*;

public class grafik
{

public static void ciz()
{
      final DefaultPieDataset data = new DefaultPieDataset();
      data.setValue("One", new Double(43.2));
      data.setValue("Two", new Double(10.0));
      data.setValue("Three", new Double(27.5));
      data.setValue("Four", new Double(17.5));
      data.setValue("Five", new Double(11.0));
      data.setValue("Six", new Double(19.4));

      JFreeChart chart = ChartFactory.createPieChart
      ("Pie Chart ", data, true, true, false);

     try
     {
         final ChartRenderingInfo info = new 
         ChartRenderingInfo(new StandardEntityCollection());
          final File file1 = new File("C:\\Users\\Lycanthrope\\Desktop\\piechart.png");
          ChartUtilities.saveChartAsPNG(
           file1, chart, 600, 400, info);
      } 
     catch (Exception e)
     {
      System.out.println(e);
     }
}
} 
```

org.apache.jasper.JasperException。我在我的项目 jcommon 和 jfreechart 中添加了两个 .jar 文件。我该如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-27T20:34:51.657

尝试将图表图像路径放在jsp中

```
<div class="chartimage">
<img src="C:/Users/Lycanthrope/Desktop/piechart.png" height="500px" width="500px"/>
</div> 
```

# c# - 复活后产生GC？

> ID：13103783
> 
> 赞同：6
> 
> 时间：2012-10-27T20:12:52.797
> 
> 标签：c#, .net, garbage-collection

假设一个对象有一个`Finalize()`方法。

首次创建时，在终结队列中添加了一个指针。

该对象没有引用。

当垃圾回收发生时，它将引用从终结队列移动到 f-reachable 队列，并启动一个线程来运行该`Finalize`方法（依次在其他对象的`Finalize`方法之后）。

所以现在的对象（复活后）只有一个根，它是来自 f-reachable 队列的指针。

此时，对象是否/是否被提升到下一代？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-27T20:26:16.417

这是你可以尝试的。在没有附加调试器的情况下在发布版本中运行此代码：

```
using System;

class Program {
    static void Main(string[] args) {
        var obj = new Foo();
        // There are 3 generations, could have used GC.MaxGeneration
        for (int ix = 0; ix < 3; ++ix) {
            GC.Collect();
            GC.WaitForPendingFinalizers();
        }
        Console.ReadLine();
    }
}

class Foo {
    int attempt = 0;
    ~Foo() {
        // Don't try to do this over and over again, rough at program exit
        if (attempt++ < 3) {
            GC.ReRegisterForFinalize(this);
            Console.WriteLine(GC.GetGeneration(this));
        }
    }
} 
```

输出：

> 1
> 2
> 2

所以它停留在它被集合移动到的那一代，移动到每个集合的下一个，直到它到达最后一个。一般来说，这是有道理的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-27T20:19:57.327

似乎答案是肯定的，这会发生。[http://msdn.microsoft.com/en-us/magazine/bb985010.aspx](http://msdn.microsoft.com/en-us/magazine/bb985010.aspx)说：

> ... 需要两次 GC 来回收需要终结的对象使用的内存。实际上，可能需要两个以上的集合，因为对象*可能会被提升到老一代*。

# javascript - 按类重新排序 HTML 元素，而不是按 id

> ID：13103785
> 
> 赞同：4
> 
> 时间：2012-10-27T20:13:08.227
> 
> 标签：javascript, jquery, html, feed

我看到的每个重新排序元素的示例都使用 ID 来交换或插入。但是，我在我的网站上获得了提要，并且无法控制是否使用 ID。我正在尝试使用 blogger.com 撰写文章，使用 feedburner 创建提要，并将其显示在我的个人网站上。这是我所拥有的：

```
<li>
   <span class="headline">
      <a href="webpage.html">Article Link</a>
   </span>
   <p class="date">8/3/2012</p>
   <div> Brief article intro...</div>
</li> 
```

这是我想要的：

```
<li>
   <p class="date">8/3/2012</p>
   <span class="headline">
      <a href="webpage.html">Article Link</a>
   </span>
   <div> Brief article intro...</div>
</li> 
```

我理解我见过的例子：

```
$("#div2").insertAfter("#div3");
$("#div1").prependTo("#div2"); 
```

但是我不确定如何一般地或在循环中完成此操作，以便我只能交换单个父元素中的类。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-27T20:16:25.730

这是一个解决方案

```
$('li').each( function() {
    var $this = $( this );
    $this.prepend( $( '.date', $this ) ) ;
} ); 
```

它分离日期元素并将其插入到第一个位置`li`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-27T20:19:03.863

我能想到的最短解决方案

```
$('.date').each( function() {
    $(this).parent().prepend(this);
}) 
```

演示[http://jsfiddle.net/xs7UG/](http://jsfiddle.net/xs7UG/)

# php - 为什么我的数据库名称中的下划线会破坏 phpMyAdmin 数据库列表

> ID：13103786
> 
> 赞同：6
> 
> 时间：2012-10-27T20:13:14.760
> 
> 标签：php, phpmyadmin

最近我在 phpMyAdmin 中创建了一个名称的数据库，`test_test`刚创建它，左侧的数据库列表突然被破坏，这是一个错误还是我应该`_`在数据库名称中忽略？

**预习**

> 本地主机屏幕

![在此处输入图像描述](../Images/a5726475744033193a3ec8a89ee89d39.png)

![在此处输入图像描述](../Images/f250653eb82e878830c6ae2e4c2816f4.png)

> 关于选择`test_test`数据库

![在此处输入图像描述](../Images/35f2c37c00b3b24563fa759ee71d3525.png)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-27T20:16:17.197

如果使用下划线，PHPMyAdmin 正在对您的数据库进行分组。`prefix_name`. 它们仍然像往常一样工作，只是在 PHPMyAdmin 中显示不同。

如果你不喜欢它，你可以[禁用它](https://serverfault.com/questions/247061/is-there-any-way-to-disable-grouping-databases-in-phpmyadmin)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-27T20:17:40.177

> 这不是一个错误，这是一个功能

请参阅[http://wiki.phpmyadmin.net/pma/Config#LeftFrameDBSeparator](http://wiki.phpmyadmin.net/pma/Config#LeftFrameDBSeparator)您可以将其更改为其他模式或通过设置`LeftFrameDBTree`为 false禁用

# c - recvfrom - 接收任意大小的结构？

> ID：13103788
> 
> 赞同：1
> 
> 时间：2012-10-27T20:13:18.717
> 
> 标签：c, sockets, udp

我正在制作一个聊天客户端，它通过 UDP 套接字从服务器接收不同数量的信息结构。这些结构中的每一个都以一个标头开头，该标头告诉客户端它是什么类型的结构。是否可以使用`recvfrom`检索整个结构，无论大小是多少，然后根据标题将其转换为我需要的任何结构，还是我首先必须读取标题，确定结构，然后读入一块一块的结构？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-27T20:14:53.253

您只能接收作为完整数据报的 UDP 数据包。您必须`recvfrom`使用足够大的缓冲区来容纳任何消息，然后适当地进行转换。

# jquery - jQuery css() 行为

> ID：13103794
> 
> 赞同：3
> 
> 时间：2012-10-27T20:13:58.757
> 
> 标签：jquery

为什么这两条指令不会产生相同的渲染？

```
$("#j_idt14\\:panelGrid label").css({
    "position": "absolute",
    "width": $("#j_idt14\\:panelGrid label").parent().outerWidth() - 
        parseInt($("#j_idt14\\:panelGrid label").css("padding-left")) - 
        parseInt($("#j_idt14\\:panelGrid label").css("padding-right")) -
        parseInt($("#j_idt14\\:panelGrid label").css("border-left-width")) -
        parseInt($("#j_idt14\\:panelGrid label").css("border-right-width")) -
        24 + "px"
}); 
```

和

```
$("#j_idt14\\:panelGrid label").css("position", "absolute");
$("#j_idt14\\:panelGrid label").css("width", 
    $("#j_idt14\\:panelGrid label").parent().outerWidth() - 
        parseInt($("#j_idt14\\:panelGrid label").css("padding-left")) - 
        parseInt($("#j_idt14\\:panelGrid label").css("padding-right")) -
        parseInt($("#j_idt14\\:panelGrid label").css("border-left-width")) -
        parseInt($("#j_idt14\\:panelGrid label").css("border-right-width")) -
        24 + "px"); 
```

在第一种情况下，等于 500 像素`width`，在第二种情况下，`width`等于 394 像素（如预期的那样）。

谢谢你的澄清。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-27T20:16:32.507

当位置不是绝对位置时，该`j_idt14\\:panelGrid label`元素包含在`width`父元素的计算中。我的猜测是`j_idt14\\:panelGrid label`元素比父元素宽。

当元素的位置设置为 时`absolute`，它的宽度在计算中被忽略，因为它不再包含在父元素的边界内。

# java - GWT：地点和活动映射器的粒度

> ID：13103795
> 
> 赞同：5
> 
> 时间：2012-10-27T20:13:59.503
> 
> 标签：java, gwt, mvp, gwt-activities, gwt-places

我终于开始“获得” GWT。在任何时候，`PlaceChangeEvent`都可以`EventBus`像这样在应用程序上触发 a：

```
History.newItem("token-for-some-new-place"); 
```

这会将事件添加到总线，从而注册者`ActivityManager`将其收集起来并咨询其内部`ActivityMapper`以将其`Activity`与`PlaceChangeEvent`'s关联`Place`。

然后`Activity`（类似于 MVP/MVC 中的演示者或控制器对象）获取所需的任何数据（通过对服务器的 RPC 调用）并执行任何业务逻辑并配置最终视图（通常是`Composite`某种类型的）以显示。

只要我们谈论的是一个超级简单的 GWT 应用程序，它的主机页面上只有一个显示区域，那么就像我说的，我“明白”了它。

我现在窒息的地方是当您的应用程序包含多个显示区域（可以彼此异步更新的区域）时会发生什么。

所以我问：

1.  `ActivityMapper`s 应该有多细？是否只有一个应用程序范围内将所有s`AppActivityMapper`映射到所有ies，或者是否应该有某种层次结构/分解，您有多个映射器？（如果您对此的回答类似于“*这取决于您的应用程序的需求*”，那么请解释什么要求/需求推动了适当的粒度级别！）`Place``Activity``ActivityMapper`
**   如果 a`Place`表示您的应用程序中的 URL 令牌（为了使成为`Place`可收藏状态），那么当您有一个具有多个显示区域（D1、D2、D3）的更复杂的应用程序时会发生什么。一个 URL 令牌（即`http://myapp.com/#token-for-some-new-place`）如何映射到 D1、D2 和 D3？这不意味着`ActivityMapper#getActivity`必须能够返回一个活动列表（`List<Activity>`），其`start(AcceptsOneWidget, EventBus)`方法都会被调用吗？*

 *感谢您在这里的任何帮助 - 代码示例总是很摇滚。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-27T20:50:09.207

A`Place`代表，嗯，一个地方。它回答了*我从哪里来的存在主义问题？*，*我在哪里？**我要去哪里*？.

对于给定的地方，显示给用户的*屏幕*可能很复杂，并且被划分为一堆*显示区域*。每个都由一个 管理`ActivityManager`，它询问一个给定位置使用`ActivityMapper`哪个`Activity`，使一切松散耦合（活动不（必须）知道它们在哪里被使用，在哪个地方，哪些其他活动同时运行， ETC。）

因此，您不会有一个返回活动列表的映射器，而是一个映射器列表，每个映射器返回一个活动。

看：

*   [http://blog.ltgt.net/gwt-21-places/](http://blog.ltgt.net/gwt-21-places/)
*   [http://blog.ltgt.net/gwt-21-places-part-ii/](http://blog.ltgt.net/gwt-21-places-part-ii/)
*   [http://blog.ltgt.net/gwt-21-activities/](http://blog.ltgt.net/gwt-21-activities/)
*   [http://blog.ltgt.net/gwt-21-activities-nesting-yagni/](http://blog.ltgt.net/gwt-21-activities-nesting-yagni/)*

# ruby - gchart不工作

> ID：13103796
> 
> 赞同：1
> 
> 时间：2012-10-27T20:14:06.060
> 
> 标签：ruby, gem, google-visualization

好的，我想在 Ruby 中绘制图表，所以我找到了名为 Googlecharts 的 gem。这是问题所在：

```
-> % irb
1.9.2-p320 :001 > require 'gchart'
  => true 
1.9.2-p320 :002 > Gchart.line(:size => '200x200', :title => 'title', :bg => 'ffffff', :data => [10,20,30,50])
  => "http://chart.apis.google.com/chart?" 
```

如您所见，没有链接。怎么了？

# javascript - 文本区域自动完成

> ID：13103801
> 
> 赞同：1
> 
> 时间：2012-10-27T20:14:35.950
> 
> 标签：javascript, html, browser

文本区域字段上的 Autocomplete="off" 似乎不像输入字段那样工作。我在 Google 上找不到任何关于此的内容。有区别吗？

具体来说，我有一个页面，其中有一半是正常输入字段，另一半是通过 javascript 动态生成的。当我离开页面然后导航回来时，动态生成的字段中的文本会覆盖普通字段中的文本。这只发生在我离开然后单击*返回*时。如果我只是刷新页面，它不会发生。Autocomplete="false" 解决了输入字段的这个问题，但它没有解决 textareas。

先谢谢了！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-27T21:28:04.357

`autocomplete`属性或属性仅限于`input`元素，无论是根据[Microsoft 对该功能的描述](http://msdn.microsoft.com/en-us/library/ie/ms533032%28v=vs.85%29.aspx)，还是根据为标准化该功能而提议的HTML5草案[描述。](http://www.w3.org/TR/html5/common-input-element-attributes.html#the-autocomplete-attribute)所以你应该期望浏览器忽略它的其他元素，包括`textarea`.

显然，`autocomplete`这不是真正的问题，只是一种假设的方法，这是错误的。但真正的问题并没有真正描述。

# python - Python - raw_input() 遇到问题

> ID：13103806
> 
> 赞同：2
> 
> 时间：2012-10-27T20:15:12.597
> 
> 标签：python, raw-input

所以我一直在研究一个两人“猜数字”的程序。但我只是在一件事上遇到了麻烦。

所以这里的代码：

```
import time
import random
thenumber = random.randint(1, 10)
print "Welcome to Noah's Two Player guess a number game."
print "What is player one's name?"
player1 = raw_input()
print "What is player two's name?"
player2 = raw_input()
print "Well " + player1 + " and " + player2 + ", are you ready to play?"
choice = raw_input()
if choice == yes:
    print player1 + ", pick a number from 1 to 10."
    player1guess = raw_input()

    print player2 + ", pick a number from 1 to 10."
    player2guess = raw_input()

    print "Calculating..."
    time.sleep(3)

    p1 = thenumber - player1guess
    p2 = thenumber - player2guess

    if p1 > p2:
        print player1 + " won!"

    elif p2 > p1:
        print player2 + " won!" 
```

在我收到此错误之前，一切都运行顺利：

```
Traceback (most recent call last):
  File "C:\Python27\Script 1", line 11, in <module>
    if choice == yes:
NameError: name 'yes' is not defined 
```

据我所知，我不认为我做错了什么，但我还是 python 的初学者。

有人请帮我解决这个问题。

编辑：（这是python 2.7，如果它有所作为）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-27T20:16:58.743

`yes`我猜你需要在:周围加上引号`choice =='yes'`，否则 python 会认为这`yes`是一个变量。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-27T20:17:07.230

试试`if choice == 'yes':`。您正在将其与未定义的符号进行比较。

请注意，Python 中没有“变量”，只有符号及其值（语言解释器内部可以理解它们的类型）。把它们想象成你给各种对象起的名字。它们都是符号。

# python - 如何修复 Django 中的 AttributeError？

> ID：13103810
> 
> 赞同：2
> 
> 时间：2012-10-27T20:15:51.237
> 
> 标签：python, django, view, model

我正在尝试返回与当前登录用户关联的播放列表列表，但我收到一条错误消息：AttributeError: 'QuerySet' object has no attribute 'has_header

我已经包含了我认为是下面代码的相关部分。关于如何解决这个问题的任何建议？

# 视图.py

```
playlist = UserPlaylist.objects.filter(profile=request.user)
return playlist 
```

# 模型.py

```
class UserProfile(models.Model):
    user = models.OneToOneField(User)
    def __unicode__(self):
        return self.user

def create_user_profile(sender, instance, created, **kwargs):
    if created:
        UserProfile.objects.create(user=instance)

post_save.connect(create_user_profile, sender=User)         

class Playlist(models.Model):
    playlist = models.CharField('Playlist', max_length = 2000, null=True, blank=True)
    def __unicode__(self):
        return self.playlist

class Video(models.Model):
    video_url = models.URLField('Link to video', max_length = 200, null=True, blank=True)
    def __unicode__(self):
        return self.video_url

class UserPlaylist(models.Model):
    profile = models.ForeignKey(User)
    playlist = models.ForeignKey(Playlist)
    def __unicode__(self):
        return unicode(self.playlist)

class Videoplaylist(models.Model):
    video = models.ForeignKey(Video)
    playlist = models.ForeignKey(UserPlaylist)
    def __unicode__(self):
        return unicode(self.playlist) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-27T20:23:49.817

我只是想通了...我正在返回而不是打印。菜鸟失误。

# php - Cakephp查看错误——使用UploadPack存储图片

> ID：13103813
> 
> 赞同：2
> 
> 时间：2012-10-27T20:16:02.737
> 
> 标签：php, cakephp, phpmyadmin, cakephp-1.3, cakephp-2.0

当我尝试从使用“UploadPack”的控制器加载视图时出现以下错误 - （来源：- [https://github.com/szajbus/uploadpack）：-](https://github.com/szajbus/uploadpack):-)

Strict (2048)：UploadBehavior::setup() 的声明应该与 ModelBehavior::setup(Model $model, $config = Array) [APP\Plugin\upload_pack\Model\Behavior\UploadBehavior.php，第 15 行] 兼容

我的“UploadBehavior.php”和“ModelBehavior.php”文件如下，有人知道如何解决这个错误吗？

```
<?php
App::uses('HttpSocket', 'Network/Http');
/**
 * This file is a part of UploadPack - a plugin that makes file uploads in CakePHP as easy as possible.
 *
 * UploadBehavior
 *
 * UploadBehavior does all the job of saving files to disk while saving records to database. For more info read UploadPack documentation.
 *
 * joe bartlett's lovingly handcrafted tweaks add several resize modes. see "more on styles" in the documentation.
 *
 * @author Michał Szajbe (michal.szajbe@gmail.com) and joe bartlett (contact@jdbartlett.com)
 * @link http://github.com/szajbus/uploadpack
 */
class UploadBehavior extends ModelBehavior {

    private static $__settings = array();

    private $toWrite = array();

    private $toDelete = array();

    private $maxWidthSize = false;

    public function setup(&$model, $settings = array()) {
        $defaults = array(
            'path' => ':webroot/upload/:model/:id/:basename_:style.:extension',
            'styles' => array(),
            'resizeToMaxWidth' => false,
            'quality' => 75
        );

        foreach ($settings as $field => $array) {
            self::$__settings[$model->name][$field] = array_merge($defaults, $array);
        }
    }

    public function beforeSave(&$model) {
        $this->_reset();
        foreach (self::$__settings[$model->name] as $field => $settings) {
            if (!empty($model->data[$model->name][$field]) && is_array($model->data[$model->name][$field]) && file_exists($model->data[$model->name][$field]['tmp_name'])) {
                if (!empty($model->id)) {
                    $this->_prepareToDeleteFiles($model, $field, true);
                }
                $this->_prepareToWriteFiles($model, $field);
                unset($model->data[$model->name][$field]);
                $model->data[$model->name][$field.'_file_name'] = $this->toWrite[$field]['name'];
                $model->data[$model->name][$field.'_file_size'] = $this->toWrite[$field]['size'];
                $model->data[$model->name][$field.'_content_type'] = $this->toWrite[$field]['type'];
            } elseif (array_key_exists($field, $model->data[$model->name]) && $model->data[$model->name][$field] === null) {
                if (!empty($model->id)) {
                    $this->_prepareToDeleteFiles($model, $field, true);
                }
                unset($model->data[$model->name][$field]);
                $model->data[$model->name][$field.'_file_name'] = null;
                $model->data[$model->name][$field.'_file_size'] = null;
                $model->data[$model->name][$field.'_content_type'] = null;
            }
        }
        return true;
    }

    public function afterSave(&$model, $create) {
        if (!$create) {
            $this->_deleteFiles($model);
        }
        $this->_writeFiles($model);
    }

    public function beforeDelete(&$model) {
        $this->_reset();
        $this->_prepareToDeleteFiles($model);
        return true;
    }

    public function afterDelete(&$model) {
        $this->_deleteFiles($model);
    }

    public function beforeValidate(&$model) {
        foreach (self::$__settings[$model->name] as $field => $settings) {
            if (isset($model->data[$model->name][$field])) {
                $data = $model->data[$model->name][$field];

                if ((empty($data) || is_array($data) && empty($data['tmp_name'])) && !empty($settings['urlField']) && !empty($model->data[$model->name][$settings['urlField']])) {
                    $data = $model->data[$model->name][$settings['urlField']];
                }

                if (!is_array($data)) {
                    $model->data[$model->name][$field] = $this->_fetchFromUrl($data);
                }
            }
        }
        return true;
    }

    private function _reset() {
        $this->toWrite = null;
        $this->toDelete = null;
    }

    private function _fetchFromUrl($url) {
        $data = array('remote' => true);
        $data['name'] = end(explode('/', $url));
        $data['tmp_name'] = tempnam(sys_get_temp_dir(), $data['name']) . '.' . end(explode('.', $url));

        $httpSocket = new HttpSocket();
        $raw = $httpSocket->get($url);
        $response = $httpSocket->response;
        $data['size'] = strlen($raw);
        $data['type'] = reset(explode(';', $response['header']['Content-Type']));

        file_put_contents($data['tmp_name'], $raw);
        return $data;
    }

    private function _prepareToWriteFiles(&$model, $field) {
        $this->toWrite[$field] = $model->data[$model->name][$field];
        // make filename URL friendly by using Cake's Inflector
        $this->toWrite[$field]['name'] =
            Inflector::slug(substr($this->toWrite[$field]['name'], 0, strrpos($this->toWrite[$field]['name'], '.'))). // filename
            substr($this->toWrite[$field]['name'], strrpos($this->toWrite[$field]['name'], '.')); // extension
    }

    private function _writeFiles(&$model) {
        if (!empty($this->toWrite)) {
            foreach ($this->toWrite as $field => $toWrite) {
                $settings = $this->_interpolate($model, $field, $toWrite['name'], 'original');
                $destDir = dirname($settings['path']);
                if (!file_exists($destDir)) {
                    @mkdir($destDir, 0777, true);
                    @chmod($destDir, 0777);
                }
                if (is_dir($destDir) && is_writable($destDir)) {
                    $move = !empty($toWrite['remote']) ? 'rename' : 'move_uploaded_file';
                    if (@$move($toWrite['tmp_name'], $settings['path'])) {
                        if($this->maxWidthSize) {
                            $this->_resize($settings['path'], $settings['path'], $this->maxWidthSize.'w', $settings['quality']);
                        }
                        foreach ($settings['styles'] as $style => $geometry) {
                            $newSettings = $this->_interpolate($model, $field, $toWrite['name'], $style);
                            $this->_resize($settings['path'], $newSettings['path'], $geometry, $settings['quality']);
                        }
                    }
                }
            }
        }
    }

    private function _prepareToDeleteFiles(&$model, $field = null, $forceRead = false) {
        $needToRead = true;
        if ($field === null) {
            $fields = array_keys(self::$__settings[$model->name]);
            foreach ($fields as &$field) {
                $field .= '_file_name';
            }
        } else {
            $field .= '_file_name';
            $fields = array($field);
        }

        if (!$forceRead && !empty($model->data[$model->alias])) {
            $needToRead = false;
            foreach ($fields as $field) {
                if (!array_key_exists($field, $model->data[$model->alias])) {
                    $needToRead = true;
                    break;
                }
            }
        }
        if ($needToRead) {
            $data = $model->find('first', array('conditions' => array($model->alias.'.'.$model->primaryKey => $model->id), 'fields' => $fields, 'callbacks' => false));
        } else {
            $data = $model->data;
        }
        if (is_array($this->toDelete)) {
            $this->toDelete = array_merge($this->toDelete, $data[$model->alias]);
        } else {
            $this->toDelete = $data[$model->alias];
        }
        $this->toDelete['id'] = $model->id;
    }

    private function _deleteFiles(&$model) {
        foreach (self::$__settings[$model->name] as $field => $settings) {
            if (!empty($this->toDelete[$field.'_file_name'])) {
                $styles = array_keys($settings['styles']);
                $styles[] = 'original';
                foreach ($styles as $style) {
                    $settings = $this->_interpolate($model, $field, $this->toDelete[$field.'_file_name'], $style);
                    if (file_exists($settings['path'])) {
                        @unlink($settings['path']);
                    }
                }
            }
        }
    }

    private function _interpolate(&$model, $field, $filename, $style) {
        return self::interpolate($model->name, $model->id, $field, $filename, $style);
    }

    static public function interpolate($modelName, $modelId, $field, $filename, $style = 'original', $defaults = array()) {
        $pathinfo = UploadBehavior::_pathinfo($filename);
        $interpolations = array_merge(array(
            'app' => preg_replace('/\/$/', '', APP),
            'webroot' => preg_replace('/\/$/', '', WWW_ROOT),
            'model' => Inflector::tableize($modelName),
            'basename' => !empty($filename) ? $pathinfo['filename'] : null,
            'extension' => !empty($filename) ? $pathinfo['extension'] : null,
            'id' => $modelId,
            'style' => $style,
            'attachment' => Inflector::pluralize($field),
            'hash' => md5((!empty($filename) ? $pathinfo['filename'] : "") . Configure::read('Security.salt'))
        ), $defaults);
        $settings = self::$__settings[$modelName][$field];
        $keys = array('path', 'url', 'default_url');
        foreach ($interpolations as $k => $v) {
            foreach ($keys as $key) {
                if (isset($settings[$key])) {
                    $settings[$key] = preg_replace('/\/{2,}/', '/', str_replace(":$k", $v, $settings[$key]));
                }
            }
        }
        return $settings;
    }

    static private function _pathinfo($filename) {
        $pathinfo = pathinfo($filename);
        // PHP < 5.2.0 doesn't include 'filename' key in pathinfo. Let's try to fix this.
        if (empty($pathinfo['filename'])) {
            $suffix = !empty($pathinfo['extension']) ? '.'.$pathinfo['extension'] : '';
            $pathinfo['filename'] = basename($pathinfo['basename'], $suffix);
        }
        return $pathinfo;
    }

    private function _resize($srcFile, $destFile, $geometry, $quality = 75) {
        copy($srcFile, $destFile);
        @chmod($destFile, 0777);
        $pathinfo = UploadBehavior::_pathinfo($srcFile);
        $src = null;
        $createHandler = null;
        $outputHandler = null;
        switch (strtolower($pathinfo['extension'])) {
        case 'gif':
            $createHandler = 'imagecreatefromgif';
            $outputHandler = 'imagegif';
            break;
        case 'jpg':
        case 'jpeg':
            $createHandler = 'imagecreatefromjpeg';
            $outputHandler = 'imagejpeg';
            break;
        case 'png':
            $createHandler = 'imagecreatefrompng';
            $outputHandler = 'imagepng';
            $quality = null;
            break;
        default:
            return false;
        }
        if ($src = $createHandler($destFile)) {
            $srcW = imagesx($src);
            $srcH = imagesy($src);

            // determine destination dimensions and resize mode from provided geometry
            if (preg_match('/^\\[[\\d]+x[\\d]+\\]$/', $geometry)) {
                // resize with banding
                list($destW, $destH) = explode('x', substr($geometry, 1, strlen($geometry)-2));
                $resizeMode = 'band';
            } elseif (preg_match('/^[\\d]+x[\\d]+$/', $geometry)) {
                // cropped resize (best fit)
                list($destW, $destH) = explode('x', $geometry);
                $resizeMode = 'best';
            } elseif (preg_match('/^[\\d]+w$/', $geometry)) {
                // calculate heigh according to aspect ratio
                $destW = (int)$geometry-1;
                $resizeMode = false;
            } elseif (preg_match('/^[\\d]+h$/', $geometry)) {
                // calculate width according to aspect ratio
                $destH = (int)$geometry-1;
                $resizeMode = false;
            } elseif (preg_match('/^[\\d]+l$/', $geometry)) {
                // calculate shortest side according to aspect ratio
                if ($srcW > $srcH) $destW = (int)$geometry-1;
                else $destH = (int)$geometry-1;
                $resizeMode = false;
            }
            if (!isset($destW)) $destW = ($destH/$srcH) * $srcW;
            if (!isset($destH)) $destH = ($destW/$srcW) * $srcH;

            // determine resize dimensions from appropriate resize mode and ratio
            if ($resizeMode == 'best') {
                // "best fit" mode
                if ($srcW > $srcH) {
                    if ($srcH/$destH > $srcW/$destW) $ratio = $destW/$srcW;
                    else $ratio = $destH/$srcH;
                } else {
                    if ($srcH/$destH < $srcW/$destW) $ratio = $destH/$srcH;
                    else $ratio = $destW/$srcW;
                }
                $resizeW = $srcW*$ratio;
                $resizeH = $srcH*$ratio;
            }
            elseif ($resizeMode == 'band') {
                // "banding" mode
                if ($srcW > $srcH) $ratio = $destW/$srcW;
                else $ratio = $destH/$srcH;
                $resizeW = $srcW*$ratio;
                $resizeH = $srcH*$ratio;
            }
            else {
                // no resize ratio
                $resizeW = $destW;
                $resizeH = $destH;
            }

            $img = imagecreatetruecolor($destW, $destH);
            imagefill($img, 0, 0, imagecolorallocate($img, 255, 255, 255));
            imagecopyresampled($img, $src, ($destW-$resizeW)/2, ($destH-$resizeH)/2, 0, 0, $resizeW, $resizeH, $srcW, $srcH);
            $outputHandler($img, $destFile, $quality);
            return true;
        }
        return false;
    }

    public function attachmentMinSize(&$model, $value, $min) {
        $value = array_shift($value);
        if (!empty($value['tmp_name'])) {
            return (int)$min <= (int)$value['size'];
        }
        return true;
    }

    public function attachmentMaxSize(&$model, $value, $max) {
        $value = array_shift($value);
        if (!empty($value['tmp_name'])) {
            return (int)$value['size'] <= (int)$max;
        }
        return true;
    }

    public function attachmentContentType(&$model, $value, $contentTypes) {
        $value = array_shift($value);
        if (!is_array($contentTypes)) {
            $contentTypes = array($contentTypes);
        }
        if (!empty($value['tmp_name'])) {
            foreach ($contentTypes as $contentType) {
                if (substr($contentType, 0, 1) == '/') {
                    if (preg_match($contentType, $value['type'])) {
                        return true;
                    }
                } elseif ($contentType == $value['type']) {
                    return true;
                }
            }
            return false;
        }
        return true;
    }

    public function attachmentPresence(&$model, $value) {
        $keys = array_keys($value);
        $field = $keys[0];
        $value = array_shift($value);

        if (!empty($value['tmp_name'])) {
            return true;
        }

        if (!empty($model->id)) {
            if (!empty($model->data[$model->alias][$field.'_file_name'])) {
                return true;
            } elseif (!isset($model->data[$model->alias][$field.'_file_name'])) {
                $existingFile = $model->field($field.'_file_name', array($model->primaryKey => $model->id));
                if (!empty($existingFile)) {
                    return true;
                }
            }
        }
        return false;
    }
    public function minWidth(&$model, $value, $minWidth) {
        return $this->_validateDimension($value, 'min', 'x', $minWidth);
    }

    public function minHeight(&$model, $value, $minHeight) {
        return $this->_validateDimension($value, 'min', 'y', $minHeight);
    }

    public function maxWidth(&$model, $value, $maxWidth) {
        $keys = array_keys($value);
        $field = $keys[0];
        $settings = self::$__settings[$model->name][$field];
        if($settings['resizeToMaxWidth'] && !$this->_validateDimension($value, 'max', 'x', $maxWidth)) {
            $this->maxWidthSize = $maxWidth;
            return true;
        } else {
            return $this->_validateDimension($value, 'max', 'x', $maxWidth);
        }
    }

    public function maxHeight(&$model, $value, $maxHeight) {
        return $this->_validateDimension($value, 'max', 'y', $maxHeight);
    }

    private function _validateDimension($upload, $mode, $axis, $value) {
        $upload = array_shift($upload);
        $func = 'images'.$axis;
        if(!empty($upload['tmp_name'])) {
            $createHandler = null;
            if($upload['type'] == 'image/jpeg') {
                $createHandler = 'imagecreatefromjpeg';
            } else if($upload['type'] == 'image/gif') {
                $createHandler = 'imagecreatefromgif';
            } else if($upload['type'] == 'image/png') {
                $createHandler = 'imagecreatefrompng';
            } else {
                return false;
            }

            if($img = $createHandler($upload['tmp_name'])) {
                switch ($mode) {
                case 'min':
                    return $func($img) >= $value;
                    break;
                case 'max':
                    return $func($img) <= $value;
                    break;
                }
            }
        }
        return false;
    }
} 
```

///////////////////////////////////////// ///////////////////////////////////////// ///////////////////////////////////////// ///////////////////////////////////////// ///////////////////////////////////////// ///////////////////////我的“模型行为”文件：-

```
<?php
/**
 * Model behaviors base class.
 *
 * Adds methods and automagic functionality to Cake Models.
 *
 * PHP 5
 *
 * CakePHP(tm) : Rapid Development Framework (http://cakephp.org)
 * Copyright 2005-2012, Cake Software Foundation, Inc. (http://cakefoundation.org)
 *
 * Licensed under The MIT License
 * Redistributions of files must retain the above copyright notice.
 *
 * @copyright     Copyright 2005-2012, Cake Software Foundation, Inc. (http://cakefoundation.org)
 * @link          http://cakephp.org CakePHP(tm) Project
 * @package       Cake.Model
 * @since         CakePHP(tm) v 1.2.0.0
 * @license       MIT License (http://www.opensource.org/licenses/mit-license.php)
 */

/**
 * Model behavior base class.
 *
 * Defines the Behavior interface, and contains common model interaction functionality.  Behaviors
 * allow you to simulate mixins, and create reusable blocks of application logic, that can be reused across
 * several models.  Behaviors also provide a way to hook into model callbacks and augment their behavior.
 *
 * ### Mixin methods
 *
 * Behaviors can provide mixin like features by declaring public methods.  These methods should expect
 * the model instance to be shifted onto the parameter list.
 *
 * {{{
 * function doSomething(Model $model, $arg1, $arg2) {
 *      //do something
 * }
 * }}}
 *
 * Would be called like `$this->Model->doSomething($arg1, $arg2);`.
 *
 * ### Mapped methods
 *
 * Behaviors can also define mapped methods.  Mapped methods use pattern matching for method invocation. This
 * allows you to create methods similar to Model::findAllByXXX methods on your behaviors.  Mapped methods need to
 * be declared in your behaviors `$mapMethods` array.  The method signature for a mapped method is slightly different
 * than a normal behavior mixin method.
 *
 * {{{
 * public $mapMethods = array('/do(\w+)/' => 'doSomething');
 *
 * function doSomething(Model $model, $method, $arg1, $arg2) {
 *      //do something
 * }
 * }}}
 *
 * The above will map every doXXX() method call to the behavior.  As you can see, the model is
 * still the first parameter, but the called method name will be the 2nd parameter.  This allows
 * you to munge the method name for additional information, much like Model::findAllByXX.
 *
 * @package       Cake.Model
 * @see Model::$actsAs
 * @see BehaviorCollection::load()
 */
class ModelBehavior extends Object {

/**
 * Contains configuration settings for use with individual model objects.  This
 * is used because if multiple models use this Behavior, each will use the same
 * object instance.  Individual model settings should be stored as an
 * associative array, keyed off of the model name.
 *
 * @var array
 * @see Model::$alias
 */
    public $settings = array();

/**
 * Allows the mapping of preg-compatible regular expressions to public or
 * private methods in this class, where the array key is a /-delimited regular
 * expression, and the value is a class method.  Similar to the functionality of
 * the findBy* / findAllBy* magic methods.
 *
 * @var array
 */
    public $mapMethods = array();

/**
 * Setup this behavior with the specified configuration settings.
 *
 * @param Model $model Model using this behavior
 * @param array $config Configuration settings for $model
 * @return void
 */
    public function setup(Model $model, $config = array()) {
    }

/**
 * Clean up any initialization this behavior has done on a model.  Called when a behavior is dynamically
 * detached from a model using Model::detach().
 *
 * @param Model $model Model using this behavior
 * @return void
 * @see BehaviorCollection::detach()
 */
    public function cleanup(Model $model) {
        if (isset($this->settings[$model->alias])) {
            unset($this->settings[$model->alias]);
        }
    }

/**
 * beforeFind can be used to cancel find operations, or modify the query that will be executed.
 * By returning null/false you can abort a find.  By returning an array you can modify/replace the query
 * that is going to be run.
 *
 * @param Model $model Model using this behavior
 * @param array $query Data used to execute this query, i.e. conditions, order, etc.
 * @return boolean|array False or null will abort the operation. You can return an array to replace the
 *   $query that will be eventually run.
 */
    public function beforeFind(Model $model, $query) {
        return true;
    }

/**
 * After find callback. Can be used to modify any results returned by find.
 *
 * @param Model $model Model using this behavior
 * @param mixed $results The results of the find operation
 * @param boolean $primary Whether this model is being queried directly (vs. being queried as an association)
 * @return mixed An array value will replace the value of $results - any other value will be ignored.
 */
    public function afterFind(Model $model, $results, $primary) {
    }

/**
 * beforeValidate is called before a model is validated, you can use this callback to
 * add behavior validation rules into a models validate array.  Returning false
 * will allow you to make the validation fail.
 *
 * @param Model $model Model using this behavior
 * @return mixed False or null will abort the operation. Any other result will continue.
 */
    public function beforeValidate(Model $model) {
        return true;
    }

/**
 * afterValidate is called just after model data was validated, you can use this callback
 * to perform any data cleanup or preparation if needed
 *
 * @param Model $model Model using this behavior
 * @return mixed False will stop this event from being passed to other behaviors
 */
    public function afterValidate(Model $model) {
        return true;
    }

/**
 * beforeSave is called before a model is saved.  Returning false from a beforeSave callback
 * will abort the save operation.
 *
 * @param Model $model Model using this behavior
 * @return mixed False if the operation should abort. Any other result will continue.
 */
    public function beforeSave(Model $model) {
        return true;
    }

/**
 * afterSave is called after a model is saved.
 *
 * @param Model $model Model using this behavior
 * @param boolean $created True if this save created a new record
 * @return boolean
 */
    public function afterSave(Model $model, $created) {
        return true;
    }

/**
 * Before delete is called before any delete occurs on the attached model, but after the model's
 * beforeDelete is called.  Returning false from a beforeDelete will abort the delete.
 *
 * @param Model $model Model using this behavior
 * @param boolean $cascade If true records that depend on this record will also be deleted
 * @return mixed False if the operation should abort. Any other result will continue.
 */
    public function beforeDelete(Model $model, $cascade = true) {
        return true;
    }

/**
 * After delete is called after any delete occurs on the attached model.
 *
 * @param Model $model Model using this behavior
 * @return void
 */
    public function afterDelete(Model $model) {
    }

/**
 * DataSource error callback
 *
 * @param Model $model Model using this behavior
 * @param string $error Error generated in DataSource
 * @return void
 */
    public function onError(Model $model, $error) {
    }

/**
 * If $model's whitelist property is non-empty, $field will be added to it.
 * Note: this method should *only* be used in beforeValidate or beforeSave to ensure
 * that it only modifies the whitelist for the current save operation.  Also make sure
 * you explicitly set the value of the field which you are allowing.
 *
 * @param Model $model Model using this behavior
 * @param string $field Field to be added to $model's whitelist
 * @return void
 */
    protected function _addToWhitelist(Model $model, $field) {
        if (is_array($field)) {
            foreach ($field as $f) {
                $this->_addToWhitelist($model, $f);
            }
            return;
        }
        if (!empty($model->whitelist) && !in_array($field, $model->whitelist)) {
            $model->whitelist[] = $field;
        }
    }

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-28T15:59:58.683

`setup()`方法的签名`UploadBehavior`应该和`setup()`父类中方法的签名一致。这意味着你必须改变：`public function setup(&$model, $settings = array())`在你的`UploadBehavior`to`public function setup(Model $model, $settings = array())`和错误应该消失。

# android - 在 Android 上显示选取器

> ID：13103818
> 
> 赞同：1
> 
> 时间：2012-10-27T20:16:33.597
> 
> 标签：android

我正在尝试使用选择器以便用户能够选择小时。我用相应的 android XML 创建了一个 FragmentActivity。FragmentActivity 如下：

```
public class MainActivity extends FragmentActivity{

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    TimePickerFragment tpf = new TimePickerFragment();
    tpf.getFragmentManager();

}

public static class TimePickerFragment  extends DialogFragment implements TimePickerDialog.OnTimeSetListener {

@Override
public Dialog onCreateDialog(Bundle savedInstanceState) {
 final Calendar c = Calendar.getInstance();
 int hour = c.get(Calendar.HOUR_OF_DAY);
 int minute = c.get(Calendar.MINUTE);

 return new TimePickerDialog(getActivity(), this, hour,minute,DateFormat.is24HourFormat(getActivity()));
}

 public void onTimeSet(TimePicker view, int hourOfDay, int minute) {
   // Do something with the time chosen by the user 
 }

 public void showTimePickerDialog(View v) {
   DialogFragment newFragment = new TimePickerFragment ();
   newFragment.show(getFragmentManager(), "timePicker");
 }

}
} 
```

XML 如下：

```
 <RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
  xmlns:tools="http://schemas.android.com/tools"
  android:layout_width="match_parent"
  android:layout_height="match_parent" >

  <Button 
   android:layout_width="wrap_content" 
   android:layout_height="wrap_content"
   android:text="@string/hello_world" 
   android:onClick="TimePickerFragment " />

</RelativeLayout> 
```

代码检索自：http: [//developer.android.com/guide/topics/ui/controls/pickers.html](http://developer.android.com/guide/topics/ui/controls/pickers.html)

现在，问题是我无法看到带有日期的选择器。它只是显示一个白屏。我究竟做错了什么？

PS 我所做的唯一更改是我使用 getFragmentManager() 而不是 getSupportFragmentManager()。这就是为什么，当我使用最后一个时遇到错误。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-27T20:36:33.240

`FragmentActivity`是支持库的一部分，所以当你扩展它时，你必须使用`getSupportFragmentManager()`. 如果您在执行此操作时遇到错误，请发布错误。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-27T20:36:38.400

你的`android:onClick`属性不正确。你的 xml 应该是：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >

    <Button
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:onClick="showTimePickerDialog"
        android:text="Pick Time" />

</RelativeLayout> 
```

`showTimePickerDialog`现在将在用户单击`Button`. 这个方法应该在`MainActivity`.

此外，您需要通过调用来设置要使用的布局`setContentView`。`MainActivity`看起来像这样（我没有包括在内`TimePickerFragment`）：

```
public class MainActivity extends FragmentActivity {

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
    }

    public void showTimePickerDialog(View v) {
        DialogFragment newFragment = new TimePickerFragment();
        newFragment.show(getSupportFragmentManager(), "timePicker");
    }
    public static class TimePickerFragment extends android.support.v4.app.DialogFragment implements
        TimePickerDialog.OnTimeSetListener {
        ...
    }

} 
```

# module - 模块，数学

> ID：13103819
> 
> 赞同：2
> 
> 时间：2012-10-27T20:16:42.117
> 
> 标签：module, matrix, sum

我有以下问题：我想将一个较小的矩阵 M 与一个较大的矩阵 N 相加，从 N 中的 i,j 开始。

这是代码：

```
PutMintoN[M_, Q_, i_, j_] := Module[{Mrow, Mcol},
   {Mrow, Mcol} = Dimensions[M];
   For[k = 1, k <= Mrow, k++,
    For[q = 1, q <= Mcol, q++,
     Q[[i + k - 1, j + q - 1]] = 
      Q[[i + k - 1, j + q - 1]] + M[[k, q]]]];
   Q
   ]; 
```

问题似乎不在于算法，而在于模块，因为如果我将内部代码复制到外部，它就可以工作。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-12-08T03:09:45.323

太好了，您自己发现了错误。

为了同样的目的，我制作了一个更优雅、更健壮的模块，使用**ArrayPad**将 M 带到与 N 相同的维度，而不仅仅是将 M 添加到 N。它甚至可以工作，如果 i 或 j 的维度超出N，这对您的原始模块来说是个问题。

```
putMintoN[M_, N_, i_, j_] := Module[{Mrow, Mcol, Nrow, Ncol, mn},
  {Mrow, Mcol} = Dimensions[M]; {Nrow, Ncol} = Dimensions[N];
  mn = {{Min[i - 1, Nrow], Min[(Nrow - Mrow) - i + 1, Nrow]}, 
        {Min[j - 1, Ncol], Min[(Ncol - Mcol) - j + 1, Ncol]}};
  ArrayPad[M, mn] + N] 
```

测试：

```
IN: putMintoN[{{x, y, p}, {z, w, q}}, {{a, b, c}, {d, e, f}, {g, h, i}, {j, k, l}}, 2, 1]
OUT: {{a, b, c}, {d + x, e + y, f + p}, {g + z, h + w, i + q}, {j, k, l}} 
```

在 Mathematica 中，通常可以避免使用 for-lopes、Listable 函数、map、apply 等。

希望这能启发你。最好的祝福。

# c++ - C++ 结构 - 毫无意义？

> ID：13103820
> 
> 赞同：6
> 
> 时间：2012-10-27T20:16:57.150
> 
> 标签：c++, c

> **可能重复：**
> [C++中的struct和class有什么区别](https://stackoverflow.com/questions/92859/what-are-the-differences-between-struct-and-class-in-c)

我只是想弄清楚在 C++ 中使用“C 结构”是否基本上没用。您是否通过使用它们获得任何收益（与简单地创建另一个类相反）？

在 C 中，结构的意义是显而易见的，只是分组数据的连续分配和访问所述数据的好方法，在 C++ 中，我觉得角色变得更加模糊。

鉴于您可以拥有结构成员、实例变量和可见性标签的函数，我在 C++ 中看到的结构和类之间的唯一真正区别是结构成员默认为公共，而类成员默认为私有。在我看来，它们实际上都可以使用相同的底层系统来实现。

那么我在这里遗漏了关于 C++ 中结构的用途的内容吗？或者他们已经失去了他们的目的，就像我觉得他们在 C++ 中所做的那样？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-27T20:20:05.557

C++ 中的类和结构几乎相同，唯一不同的是，类的默认可见性是`private`while 在结构中是`public`.

在 C++ 中保留结构的原因可能是为了保持语言与 C 兼容，因此将 C 代码移植到 C++ 会更容易，或者让程序员进行这种转换。

至于结构类的用法，我个人使用它们就像在 C 中一样，将相关变量组合在一个“对象”中。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-27T20:20:34.420

在我看来，Structures 并没有给你任何类不能实现的东西。但是，结构保留在 C++ 中，以便与 c 向后兼容

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-27T20:22:02.363

Undoubtedly the reason they are there is for compatibility with C. But you are right, although there are small differences between class and struct in C++ there is nothing you can do with structs that you cannot do with classes (and vice versa).

Personally I use structs only when the same declaration would be legal in C, to emphasize the C-like nature of whatever it is I'm doing.

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-10-27T20:22:56.183

They *are* implemented "with the same exact underlying system". In fact, you can actually declare a type using `class` keyword and then define it using `struct` keyword. Basically, they are exactly the same aside from the conceptual difference you already mentioned: default access rights.

I don't see though why would one call them "useless". The usage of the keyword became a matter of personal preference and/or coding standard. Like "use `struct` fro POD types", or "use `struct` for types with no incapsulation/access control".

With the same degree of success one can declare the built-in `->` operator "useless" because of its equivalence to `*`+`.` combination.

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-27T20:22:24.577

You can have the same behavior as in C, nobody forces you to use the additional "class" features. So if you understand their purpose in C, it should be understandable in C++ as well (the "C-like" portion at least).

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-10-27T20:23:41.270

As Joachim Pileborg already pointed out, classes and structures are almost the same thing in C++.

I would, however, recommend to use `struct` for "dumb" data holders with public members and `class` for properly encapsulated classes as a style convention.

# android - 带有返回和下一步按钮的 Android 自定义操作栏

> ID：13103823
> 
> 赞同：2
> 
> 时间：2012-10-27T20:17:17.277
> 
> 标签：android, navigation, android-actionbar

我有问题。我想创建一个看起来像这样的东西： [操作栏](https://i.imgur.com/LeUJF.png)

![在此处输入图像描述](../Images/c56637f1ef2edd3475bd20bf8b2eb0a7.png)

左图标将是一个后退按钮（我的意思是它将返回到上一个选项卡，左侧），右侧图标将是下一个按钮（它将转到下一个选项卡，右侧）。我也想重复做，所以当我在选项卡 A 上时（例如有 3 个选项卡：A、B、C），当我使用右键时，转到 B，然后是 C，然后是 A，依此类推. 中间的文本将是选项卡的名称。我还想让它与早期版本的 android（如 2.something）兼容。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-01-03T08:01:45.810

为此，您需要实现自定义操作栏。
并且针对具有较低 android 版本的设备使用支持库。在库的帮助下，仅在 android 2.1 及更高版本中支持操作栏。

请参阅以下链接以设置操作栏。
[https://developer.android.com/training/basics/actionbar/setting-up.html](https://developer.android.com/training/basics/actionbar/setting-up.html)

下面的代码将帮助您对此有更多的了解。

```
// Inflate your custom layout
final ViewGroup actionBarLayout = (ViewGroup) getLayoutInflater().inflate(
        R.layout.action_bar,
        null);

// Set up your ActionBar
final ActionBar actionBar = getActionBar();
actionBar.setDisplayShowHomeEnabled(false);
actionBar.setDisplayShowTitleEnabled(false);
actionBar.setDisplayShowCustomEnabled(true);
actionBar.setCustomView(actionBarLayout); 
```

要创建上面的操作栏，请使用相对布局，其中两个图像视图用于方向按钮，一个文本视图用于选项卡名称。为了获得更好的设计，请避免在这种情况下使用选项卡。使用**片段**。每次单击图像时，只需将片段膨胀，每次。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-27T21:10:22.090

```
if (openTabIndex=totalNumofTabs-1) {
//go to Tab index 0
} else {
//go to Tab index openTabIndex+1
} 
```

我以前从未使用过标签，但这是一个`if`声明，如果缺席，你就不能做你想做的事。

# android - 无法将数据设置为钛选项卡中窗口的表格视图

> ID：13103827
> 
> 赞同：0
> 
> 时间：2012-10-27T20:17:50.747
> 
> 标签：android, titanium

我的钛样品代码如下，

创建选项卡的我的主文件如下，

```
globals.tabs = new AppTabGroup(
            {
                title: 'Waiting',
                icon: 'images/KS_nav_ui.png',
                window: new ListWindow({
                    title: 'Waiting',
                    backgroundColor: '#fff',
                    navBarHidden: false,
                    isDone: 0,
                    activity: {
                        onCreateOptionsMenu: function(e) {
                            var menu = e.menu;
                            var menuItem = menu.add({ title: "Add Customer" });
                            menuItem.setIcon("images/ic_menu_add.png");

                            var menuItem1 = menu.add({ title: "Settings" });
                            menuItem1.setIcon("images/ic_menu_add.png");

                            menuItem.addEventListener("click", function(e) {
                                new AddWindow().open();
                            });
                        }
                    }
                })
            },
            {
                title: 'Done',
                icon: 'images/KS_nav_views.png',
                window: new ListWindow({
                    title: 'Done',
                    backgroundColor: '#fff',
                    navBarHidden: false,
                    isDone: 1
                })
            }
        ); 
```

新的 AppTabGroup 只创建一个选项卡组并添加这两个选项卡 + 它设置 currentab

所以默认情况下，我的等待选项卡仍然是焦点，

新的 ListWindow 描述如下，

```
exports.ListWindow = function(args) {
    var AddWindow = require('ui/AddWindow').AddWindow;
    var self = Ti.UI.createWindow(args);
    var tableview = Ti.UI.createTableView();

    setTableHandle(tableview);

    var isDone = args.isDone;
    Ti.API.info("isDOne chi value:  " + isDone);

    self.add(tableview);

    tableview.addEventListener('click', function(e) {
        createConfirmDialog(e.row.id, e.row.title, isDone).show();
    });

    Ti.App.addEventListener('app:updateTables', function() {
        //tableview.setData(getTableData(isDone));
        tableview.setData(o9Data);
    });

    return self;
}; 
```

现在默认情况下 tableview 数据（上面代码中的 o9Data）（从 httpclient 获取）总是设置为第二个选项卡，
我更改了 isDone 的值但它不起作用

任何帮助表示赞赏

这是第二个带有数据的屏幕截图， ![在此处输入图像描述](../Images/b282de686b4edbe4198e1a488eddf896.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-28T06:24:31.027

终于找到解决办法了

因为这是所有选项卡的通用代码，所以我使用了以下行，

```
setTableHandle(tableview); 
```

它只是设置了用于将数据设置为表的 tableview 变量，这个 get 被最后一个选项卡覆盖，因此我无法将值添加到第一个或所有（除了最后一个）选项卡。

# css - css3 以百分比转换

> ID：13103828
> 
> 赞同：10
> 
> 时间：2012-10-27T20:18:01.660
> 
> 标签：css, transition

我坚持用百分比完全定义一个 css3 立方体。

这是 Codepen 中的一个简短示例

[http://codepen.io/anon/pen/detAB](http://codepen.io/anon/pen/detAB)

如您所见，立方体面具有其父元素的 100% 的宽度和高度，非常完美。现在我正在尝试将底面向下平移 50% 并向后平移 50%。

使用像素值，这没问题

```
transform: rotateX(-90deg) translateZ(50px) translateY(50px); 
```

但是百分比没有任何反应

```
transform: rotateX(-90deg) translateZ(50%) translateY(50%); 
```

还有其他方法吗？还是我错过了什么？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-27T20:54:10.030

您可能期望的方式不是父容器的百分比，而是元素本身的百分比。该规范将其描述为：

> [百分比]是指[s]元素框的大小

关于 %s，规范说：

> **请注意， translateZ**转换值中不允许有 值，如果存在，将导致属性值无效。

不过，似乎相反，它们至少对 Chrome 中的任何一个都无效。

对不起 ：（

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-11-16T02:45:47.343

我发现的最好的方法是做一些 javascript。

`translateZ()`我没有使用该值，而是使用**`transform-origin: x y z`**for 轴位于立方体的中心。

关键是立方体可以打开它的中心（而不是打开主面的中心并平移z ...）

这是 jQuery 函数（最终应用于`$(document).ready()`and `$(window).resize()`）：

```
function get50() {
  var half_width = $('#front').width() / 2;
  $('#front').css({
    transformOrigin : '50% 50% -' + half_width + 'px'
  });
} 
```

你可以在这里看到一个**[演示](http://codepen.io/anon/pen/dOppVK)**......

# ios - Titanium iOS 相机 - showCamera 错误

> ID：13103830
> 
> 赞同：0
> 
> 时间：2012-10-27T20:18:13.467
> 
> 标签：ios, titanium

我正在使用 Titanium 并在 iOS 上测试相机。我遇到了一个问题，即在我浏览相机页面之前运行相机页面之后的代码。在下面的代码中，该行在`'alert('Picture uploaded successfully.')`相机屏幕甚至打开之前执行。有什么想法吗？

```
 var wincam;

wincam = Titanium.UI.createWindow();
if (Ti.Platform.osname === 'android') {
    win.addEventListener('open', function(e) {
    });
} else {

Titanium.Media.showCamera({

    success:function(event)
    {
        var cropRect = event.cropRect;
        var image = event.media;

        Ti.API.debug('Our type was: '+event.mediaType);
        if(event.mediaType == Ti.Media.MEDIA_TYPE_PHOTO)
        {
            var imageView = Ti.UI.createImageView({
                width:win.width,
                height:win.height,
                image:event.media
            });
            win.add(imageView);
        }
        else
        {
            alert("got the wrong type back ="+event.mediaType);
        }
    },
    saveToPhotoGallery:false,
    allowEditing:true,
    mediaTypes:[Ti.Media.MEDIA_TYPE_VIDEO,Ti.Media.MEDIA_TYPE_PHOTO]
});

}
            //open next page
            var w3 = Titanium.UI.createWindow({
                backgroundImage:'/images/5-survey.png'
            });
            w3.open();

            alert('Picture uploaded successfully.'); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-27T23:09:33.483

showCamera 是一个异步事件，它不会停止执行上下文。如果您想在成功捕获图像时发出警报，请将警报放在成功事件中。

[http://developer.appcelerator.com/question/144053/showcamera-issue-on-ios#answer-250088](http://developer.appcelerator.com/question/144053/showcamera-issue-on-ios#answer-250088) — Anthony Decena 1 小时前回答

# php - 在 PHP 中减去两个浮点值时出错

> ID：13103831
> 
> 赞同：2
> 
> 时间：2012-10-27T20:18:30.973
> 
> 标签：php, math

> **可能重复：**
> [比较 php 中的浮点数](https://stackoverflow.com/questions/3148937/compare-floats-in-php)

我有以下代码：

```
$a = 1.49;
$b = 1.50;

echo $b - $a; // Outputs 0.01, which is ok

if (($b - $a) != 0.01) {
        echo "Not ok";
} else {
        echo "Ok";
} 
```

问题是 if 语句回显“Not ok”，尽管减法结果是 0.01。

知道为什么吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-27T20:24:31.237

[浮点数](http://php.net/manual/en/language.types.float.php)的 PHP文档显示了如何比较它们

> 如上面的警告所述，测试浮点值是否相等是有问题的，因为它们在内部表示的方式。但是，有一些方法可以绕过这些限制来比较浮点值。
> 
> 为了测试浮点值是否相等，使用了由于舍入导致的相对误差的上限。该值称为机器 epsilon 或单位舍入，是计算中可接受的最小差异。

```
<?php
// $a and $b are equal to 5 digits of precision.
$a = 1.23456789;
$b = 1.23456780;
$epsilon = 0.00001;

if(abs($a-$b) < $epsilon) {
    echo "true";
}
?> 
```

* * *

应用于您的示例：

```
$c = $b - $a;
$epsilon = 0.00001;

if (abs($a-$b-0.01) < $epsilon) {
        echo "Not ok";
} else {
        echo "Ok";
} 
```

输出`OK`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-27T20:24:09.207

it's because some floating point operations. the result isn't exactly 0.01\. your output is rounded by the system.

just try `var_dump(($b-$a)-0.01)`. this should be `float(8.673617379884E-18)`

a solution would be `if (round($b - $a,2) != 0.01)`

# objective-c - NSRunAlertPanel 是否在任何空间显示警报？- 目标-C/10.7+

> ID：13103832
> 
> 赞同：0
> 
> 时间：2012-10-27T20:18:31.720
> 
> 标签：objective-c, cocoa, nsalert

我正在开发一个标记为 LSUIElement 的应用程序，它的主窗口是一个“附加”到状态栏的 NSPanel。有时我需要显示一个正常的警报面板（使用 NSRunAlertPanel 或 NSAlert）。但是，面板始终显示在用户当前所在的空间上是非常重要的（否则用户可能不会立即看到它，而他看到这一点很重要）。

问题是警报总是显示在用户上次与应用程序窗口交互的空间上，而不是当前空间上。因此，例如，如果在 1 号空间我打开和关闭我的应用程序的 NSPanel，然后我移动到 2 号空间，一段时间后我的应用程序显示一个警报，该警报将显示在 1 号空间，而不是 2 号空间。因此在我决定切换到第一个空间之前，我（或普通用户）不会看到警报。

有什么方法可以改变这种行为（= 总是在当前空间显示警报）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-28T02:22:39.023

不完全是您要问的，但可能在您显示警报窗口之前将其收集行为设置为`NSWindowCollectionBehaviorCanJoinAllSpaces`using `setCollectionBehavior:`。然后该窗口应出现在所有空间上，包括当前空间...

# iphone - 应用程序因 NSInternalInconsistencyException 错误 sqlite3 更新而不断崩溃

> ID：13103833
> 
> 赞同：0
> 
> 时间：2012-10-27T20:18:46.547
> 
> 标签：iphone, objective-c, ios, sqlite

我对 SQLLite3 更新功能有疑问。我不知道我的查询是错误的还是我构建的函数有问题。

```
- (void)updateRowWithID:(NSString *)databaseItem AndWithColumnName:(NSString *)changeColumnName AndWithValue:(NSString *)changeValue
{
    NSString * sql = [NSString stringWithFormat:@"UPDATE tblUsers SET %@ = %@ WHERE ID = %@", changeColumnName, changeValue, databaseItem];

    sqlite3_stmt * statement;
    if(sqlite3_open([[self path]UTF8String], &database) == SQLITE_OK)
    {
        const char *insert_stmt = [sql UTF8String];

        NSLog(@"UPDATE: %@",sql);

        // here it says the something wrong and the application crush.
        if(sqlite3_prepare_v2(database, insert_stmt, -1, &statement, NULL) != SQLITE_OK)
        {
            NSAssert(0, @"ERROR ON INSERTING TO TABLE");
        }
        int success = sqlite3_step(statement);
        if(success)
            NSLog(@"Success");
    }
} 
```

这是暗恋日志：

```
2012-10-27 22:07:47.088 myapplication[21778:15803] *** Assertion failure in -[userData updateRowWithID:AndWithColumnName:AndWithValue:], /Users/user/myapplication/userData.m:47
2012-10-27 22:07:47.089 myapplication[21778:15803] *** Terminating app due to uncaught exception 'NSInternalInconsistencyException', reason: 'ERROR ON INSERTING TO TABLE'
*** First throw call stack:
(0x1a70022 0x1600cd6 0x1a18a48 0x133f2cb 0xcfc8 0xfcab 0x1a71e99 0x9ab14e 0x9ab0e6 0xa51ade 0xa51fa7 0xa51266 0x9d03c0 0x9d05e6 0x9b6dc4 0x9aa634 0x224fef5 0x1a44195 0x19a8ff2 0x19a78da 0x19a6d84 0x19a6c9b 0x224e7d8 0x224e88a 0x9a8626 0x2835 0x2735 0x1)
terminate called throwing an exception(lldb) 
```

请告诉我，我在这里做错了什么？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-27T21:00:26.257

打电话[`sqlite3_errmsg()`](http://www.sqlite.org/c3ref/errcode.html)找出问题所在。

很可能是表名或列名错误，或者数据库为空，因为该文件`path`不存在。

# mysql - 为什么我的 MySQL 组这么慢？

> ID：13103850
> 
> 赞同：5
> 
> 时间：2012-10-27T20:20:43.437
> 
> 标签：mysql, sql, performance, optimization, mariadb

我正在尝试查询接近 20M 行的分区表（按月）。我需要按 DATE(transaction_utc) 以及 country_id 进行分组。如果我关闭 group by 和聚合返回的行刚刚超过 40k，这并不算多，但是添加 group by 会使查询显着变慢，除非所述 GROUP BY 在 transaction_utc 列上，在这种情况下它变得很快。

我一直在尝试通过调整查询和/或索引来优化下面的第一个查询，并达到了下面的点（大约是最初的 2 倍）但是仍然坚持使用 5s 查询来汇总 45k 行，这似乎是方式太多了。

作为参考，这个盒子是一个全新的 24 个逻辑核心、64GB RAM、Mariadb-5.5.x 服务器，其可用的 INNODB 缓冲池比服务器上的索引空间多得多，因此不应该有任何 RAM 或 CPU 压力。

因此，我正在寻找有关导致速度变慢的原因的想法以及加快速度的建议。任何反馈将不胜感激！:)

好的，进入细节...

以下查询（我实际需要的查询）大约需要 5 秒 (+/-)，并返回少于 100 行。

```
SELECT lss.`country_id` AS CountryId
, Date(lss.`transaction_utc`) AS TransactionDate
, c.`name` AS CountryName,  lss.`country_id` AS CountryId
, COALESCE(SUM(lss.`sale_usd`),0) AS SaleUSD
, COALESCE(SUM(lss.`commission_usd`),0) AS CommissionUSD  
FROM `sales` lss  
JOIN `countries` c ON lss.`country_id` = c.`country_id`  
WHERE ( lss.`transaction_utc` BETWEEN '2012-09-26' AND '2012-10-26' AND lss.`username` = 'someuser' )  GROUP BY lss.`country_id`, DATE(lss.`transaction_utc`) 
```

相同查询的 EXPLAIN SELECT 如下所示。请注意，它没有使用 transaction_utc 键。它不应该使用我的覆盖索引吗？

```
id  select_type table   type    possible_keys   key key_len ref rows    Extra
1   SIMPLE  lss ref idx_unique,transaction_utc,country_id   idx_unique  50  const   1208802 Using where; Using temporary; Using filesort
1   SIMPLE  c   eq_ref  PRIMARY PRIMARY 4   georiot.lss.country_id  1 
```

现在谈谈我试图确定发生了什么的其他几个选项......

以下查询（更改分组依据）大约需要 5 秒 (+/-)，并且仅返回 3 行：

```
SELECT lss.`country_id` AS CountryId
, DATE(lss.`transaction_utc`) AS TransactionDate
, c.`name` AS CountryName,  lss.`country_id` AS CountryId
, COALESCE(SUM(lss.`sale_usd`),0) AS SaleUSD
, COALESCE(SUM(lss.`commission_usd`),0) AS CommissionUSD  
FROM `sales` lss  
JOIN `countries` c ON lss.`country_id` = c.`country_id`  
WHERE ( lss.`transaction_utc` BETWEEN '2012-09-26' AND '2012-10-26' AND lss.`username` = 'someuser' )  GROUP BY lss.`country_id` 
```

以下查询（删除分组依据）需要 4-5 秒 (+/-) 并返回 1 行：

```
SELECT lss.`country_id` AS CountryId
    , DATE(lss.`transaction_utc`) AS TransactionDate
    , c.`name` AS CountryName,  lss.`country_id` AS CountryId
    , COALESCE(SUM(lss.`sale_usd`),0) AS SaleUSD
    , COALESCE(SUM(lss.`commission_usd`),0) AS CommissionUSD  
    FROM `sales` lss  
    JOIN `countries` c ON lss.`country_id` = c.`country_id`  
    WHERE ( lss.`transaction_utc` BETWEEN '2012-09-26' AND '2012-10-26' AND lss.`username` = 'someuser' ) 
```

以下查询需要 .00X 秒 (+/-) 并返回约 45k 行。这对我来说表明，我们最多只尝试将 45K 行分组到少于 100 个组中（如在我的初始查询中）：

```
SELECT lss.`country_id` AS CountryId
    , DATE(lss.`transaction_utc`) AS TransactionDate
    , c.`name` AS CountryName,  lss.`country_id` AS CountryId
    , COALESCE(SUM(lss.`sale_usd`),0) AS SaleUSD
    , COALESCE(SUM(lss.`commission_usd`),0) AS CommissionUSD  
    FROM `sales` lss  
    JOIN `countries` c ON lss.`country_id` = c.`country_id`  
    WHERE ( lss.`transaction_utc` BETWEEN '2012-09-26' AND '2012-10-26' AND lss.`username` = 'someuser' )
GROUP BY lss.`transaction_utc` 
```

表模式：

```
CREATE TABLE IF NOT EXISTS `sales` (
  `id` bigint(20) unsigned NOT NULL AUTO_INCREMENT,
  `user_linkshare_account_id` int(11) unsigned NOT NULL,
  `username` varchar(16) NOT NULL,
  `country_id` int(4) unsigned NOT NULL,
  `order` varchar(16) NOT NULL,
  `raw_tracking_code` varchar(255) DEFAULT NULL,
  `transaction_utc` datetime NOT NULL,
  `processed_utc` datetime NOT NULL ,
  `sku` varchar(16) NOT NULL,
  `sale_original` decimal(10,4) NOT NULL,
  `sale_usd` decimal(10,4) NOT NULL,
  `quantity` int(11) NOT NULL,
  `commission_original` decimal(10,4) NOT NULL,
  `commission_usd` decimal(10,4) NOT NULL,
  `original_currency` char(3) NOT NULL,
  PRIMARY KEY (`id`,`transaction_utc`),
  UNIQUE KEY `idx_unique` (`username`,`order`,`processed_utc`,`sku`,`transaction_utc`),
  KEY `raw_tracking_code` (`raw_tracking_code`),
  KEY `idx_usd_amounts` (`sale_usd`,`commission_usd`),
  KEY `idx_countries` (`country_id`),
  KEY `transaction_utc` (`transaction_utc`,`username`,`country_id`,`sale_usd`,`commission_usd`)
) ENGINE=InnoDB  DEFAULT CHARSET=utf8
/*!50100 PARTITION BY RANGE ( TO_DAYS(`transaction_utc`))
(PARTITION pOLD VALUES LESS THAN (735112) ENGINE = InnoDB,
 PARTITION p201209 VALUES LESS THAN (735142) ENGINE = InnoDB,
 PARTITION p201210 VALUES LESS THAN (735173) ENGINE = InnoDB,
 PARTITION p201211 VALUES LESS THAN (735203) ENGINE = InnoDB,
 PARTITION p201212 VALUES LESS THAN (735234) ENGINE = InnoDB,
 PARTITION pMAX VALUES LESS THAN MAXVALUE ENGINE = InnoDB) */ AUTO_INCREMENT=19696320 ; 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-27T20:35:16.340

有问题的部分可能是`GROUP BY DATE(transaction_utc)`. 您还声称对此查询有一个覆盖索引，但我没有看到。您的 5 列索引包含查询中使用的所有列，但不是以最佳顺序（即：`WHERE`- `GROUP BY`- `SELECT`）。

因此，找不到有用索引的引擎将不得不为所有 20M 行评估此函数。`username`实际上，它找到一个以(the )开头的索引`idx_unique`并使用它，因此它必须为（仅）1.2M 行评估该函数。如果您有 a`(transaction_utc)`或 a`(username, transaction_utc)`它会选择三个中最有用的。

您能否通过将列拆分为日期和时间部分来更改表结构？如果可以，那么在`(username, country_id, transaction_date)`或（更改用于分组的两列的顺序）上的索引`(username, transaction_date, country_id)`将非常有效。

一个覆盖指数就`(username, country_id, transaction_date, sale_usd, commission_usd)`更好了。

* * *

如果要保留当前结构，请尝试将 5 列索引中的顺序更改为：

```
(username, country_id, transaction_utc, sale_usd, commission_usd) 
```

或者：

```
(username, transaction_utc, country_id, sale_usd, commission_usd) 
```

* * *

由于您使用的是 MariaDB，因此您可以使用**[`VIRTUAL`列](https://kb.askmonty.org/en/virtual-columns/)**功能，而无需更改现有列：

添加一个虚拟（持久）列和适当的索引：

```
ALTER TABLE sales 
    ADD COLUMN transaction_date DATE NOT NULL
               AS DATE(transaction_utc) 
               PERSISTENT 
    ADD INDEX special_IDX 
        (username, country_id, transaction_date, sale_usd, commission_usd) ; 
```

# c# - 我想通过使用 AutoDetectChanges 来提高 Edmx 的性能

> ID：13103852
> 
> 赞同：1
> 
> 时间：2012-10-27T20:21:18.757
> 
> 标签：c#, asp.net-mvc, performance, entity-framework

我有一个从数据库生成的相当大的 edmx，最近我一直在提高性能以改进我的应用程序

这个关于禁用自动检测更改[http://msdn.microsoft.com/en-us/data/jj556205.aspx](http://msdn.microsoft.com/en-us/data/jj556205.aspx)

这个关于提高删除性能的[DbContext 在添加和删除时非常慢](https://stackoverflow.com/questions/10103310/dbcontext-is-very-slow-when-adding-and-deleting)

这个（我认为很好）[http://www.codeproject.com/Articles/38922/Performance-and-the-Entity-Framework](http://www.codeproject.com/Articles/38922/Performance-and-the-Entity-Framework)

我已经在使用 myentities.tablename.MergeOption = MergeOption.NoTracking，我正在使用编译查询，我使用 EdmGen 预先生成了我的视图，我减少了我正在获取的数据等等。当然，我已经获得了飞跃和限制，以便在 54 秒内加载的页面现在需要 16.1 秒 - 但是我必须将其缩短到 3 秒所以我仍在寻找下一个改进

所以研究一切都很好，因此我已经升级到最新的 EntityFramework，我已经从 db 等重新生成了我的 .edmx ......并尝试了各种各样的东西，但我根本找不到 myEntities.Configuration.AutoDetectChangesEnabled为了将其设置为假。现在我必须错过一个简单的简单技巧 - 我如何让我的 edmx 拥有这个选项。

我在这个环境中。Net 4.0.3，Visual Studio 2010，EntityFramework 的最新版本，MVC 4.0 ......我只需要有人说“啊哈”你需要去做这个......

目前，如果我从我的一张较大的表（1.34 亿行）中删除 1000 条记录，则保存更改需要将近 10 分钟。所以从我读到的 AutoDetectChangesEnabled 是我需要改变的，但它在我的课程中不存在？我必须做什么才能得到它？

任何帮助表示赞赏我正在尝试快速解决这个问题

问候朱利安

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-28T10:42:56.180

是的，我最终在 stackoverflow [Get DbContext for Entities](https://stackoverflow.com/questions/11180250/get-dbcontext-for-entities)上找到了这个项目，它描述了将数据库首先 edmx 更改为具有 .Configuration.AutoDetectChangesEnabled 的版本所需的内容，这很棒，我能够取得进展。但是，这并没有让我得到我正在寻找的解决方案，因为保存删除仍然需要大量时间。

所以道德是，是的，在生成视图之前应用所有性能技巧，使用 AutoDetectChangesenabled=true，使用编译查询，智能连接字符串创建假对象而不是首先获取数据等等......在大多数情况下，你可能会得到性能是可以接受的，但如果你真的需要快速做事，你需要去 TSQL 并手动完成

问候朱利安

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-27T20:31:53.043

AutoDetectChanges 位于 DbContext.Configuration.AutoDetectChangesEnabled 中。对于删除，您还可以尝试获取要删除的 ID 列表，创建仅设置了这些 ID 的假对象，附加这些对象，然后删除它们。

但是，我们最近也遇到了类似的问题，我们目前正在使用 ADO.NET 进行删除。（或者在 DbContext 上有一个可以推送 SQL 的方法）。一般来说，EF 非常适合我们的应用程序，但在 2-3 处我们需要性能，因为记录数量巨大。不幸的是，我们不得不在这些地方使用 ADO.NET，当您处理海量数据时，它的速度要快很多倍。

# xcode - iPhone iOS 6 BonjourWeb Xcode 4.5“取消按钮错误

> ID：13103854
> 
> 赞同：0
> 
> 时间：2012-10-27T20:21:33.393
> 
> 标签：xcode, ios6, bonjour

我正在使用 iOS 6 和 Xcode 4.5 处理 BonjourWeb 的源代码。 [BonjourWeb Xcode 的源代码](http://developer.apple.com/library/ios/samplecode/BonjourWeb/BonjourWeb.zip)

在 BonjourWebAppDelegate.m 中，“applicationDidFinishLaunching: application:”方法中的 showCancelButton:YES 设置会导致在应用程序浏览器中单击“取消”按钮时程序崩溃，并出现错误：2012-10-27 13:07:45.309 BonjourWeb [1762:c07] *** 由于未捕获的异常“NSInvalidArgumentException”而终止应用程序，原因：“*** +[NSNetService dictionaryFromTXTRecordData:]：无法将 nil 转换为字典。”

我该如何纠正这个问题才能正常工作？

谢谢你。

大学教师

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T22:59:15.063

解决。不需要调用导致问题的方法。

# html - Point image request to a higher folder thru htaccess

> ID：13103855
> 
> 赞同：0
> 
> 时间：2012-10-27T20:21:34.343
> 
> 标签：html, .htaccess

Is there any rule I can write to make all requests to my image folder point up one folder. I'm dealing with a lot of links so I don't want to put ../

Eg: [http://hostingxtreme.com/ajax/images/logo.png](http://hostingxtreme.com/ajax/images/logo.png).

**Should become** [http://hostingxtreme.com/images/logo.png](http://hostingxtreme.com/images/logo.png)

Thanks

Here the code I'm using Dosent seem to be working!
`php_value register_long_arrays On
<IfModule mod_rewrite.c>
RewriteEngine On
RewriteBase /
RewriteRule ^index\.php$ - [L]
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule . /index.php [L]
RewriteEngine On
RewriteRule ^/?ajax/images/logo.png$ /images/logo.png [L,R=301]
</IfModule>`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-27T21:21:28.960

在文档根目录的 htaccess 文件中，添加：

```
Redirect 301 /ajax/images/logo.png /images/logo.png 
```

或者，如果您需要使用 mod_rewrite：

```
RewriteEngine On
RewriteRule ^/?ajax/images/logo.png$ /images/logo.png [L,R=301] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-28T06:51:59.610

我知道了！

```
RewriteCond %{REQUEST_FILENAME} !-d  
RewriteCond %{REQUEST_URI} (ajax/|ajax/.*/)images/(.*)  
RewriteRule (ajax/|ajax/.*/)images/(.*) images/$2  

RewriteCond %{REQUEST_FILENAME} !-d  
RewriteCond %{REQUEST_URI} (ajax/|ajax/.*/)stylesheets/(.*)  
RewriteRule (ajax/|ajax/.*/)stylesheets/(.*) stylesheets/$2 
```

# wordpress - How can i add multiple elements on a single wordpress page

> ID：13103861
> 
> 赞同：0
> 
> 时间：2012-10-27T20:22:37.603
> 
> 标签：wordpress, layout

I want to use wordpress as a cms. Is it possible to define standard layout elements which can be combined to edit the layout of a page similar like other cms like "drupal" for example. Ie you could design a row with a picture on the left, one with a picture on the right and one without a picture. Than I combine these templates in any order to built the layout of the pages main content.

Is this possible, maybe with plugins?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-27T20:28:48.297

是的当然！您只需要按照自己的方式**编辑**已经制作的模板，或者您可以**创建**自己的**Wordpress 模板**。但为此，您应该对自己的**HTML 和 CSS**技能充满信心！

以下是您可以参考的一些资源：

[http://blog.spoongraphics.co.uk/tutorials/how-to-build-a-custom-wordpress-theme-from-scratch](http://blog.spoongraphics.co.uk/tutorials/how-to-build-a-custom-wordpress-theme-from-scratch)

[http://themeshaper.com/modify-wordpress-themes/](http://themeshaper.com/modify-wordpress-themes/)

希望这可以帮助！

# list - how can add list to a fragment of pageindicator?

> ID：13103864
> 
> 赞同：1
> 
> 时间：2012-10-27T20:22:54.750
> 
> 标签：list, listview, android-viewpager, viewpagerindicator

i want to add list view to one page of pageindicator the code oof page indicator is :

```
public class VpiAbsTestActivity extends SherlockFragmentActivity {

private static final String[] CONTENT = new String[] { "This", "Is", "A", "ViewPager", "Demo" };

TestFragmentAdapter mAdapter;
ViewPager mPager;
PageIndicator mIndicator;

public boolean onCreateOptionsMenu(Menu menu) {

    SubMenu subMenu1 = menu.addSubMenu("Action Item");
    subMenu1.add(0,15, 0, "Sample");
    subMenu1.add(0,20, 0,"Menu");
    subMenu1.add("Items");

    MenuItem subMenu1Item = subMenu1.getItem();
    subMenu1Item.setIcon(R.drawable.ic_title_share_default);
    subMenu1Item.setShowAsAction(MenuItem.SHOW_AS_ACTION_ALWAYS | MenuItem.SHOW_AS_ACTION_WITH_TEXT);

    SubMenu subMenu2 = menu.addSubMenu("Overflow Item");
    subMenu2.add("These");
    subMenu2.add("Are");
    subMenu2.add("Sample");
    subMenu2.add("Items");

    MenuItem subMenu2Item = subMenu2.getItem();
    subMenu2Item.setIcon(R.drawable.ic_compose);
    subMenu2Item.setShowAsAction(MenuItem.SHOW_AS_ACTION_ALWAYS | MenuItem.SHOW_AS_ACTION_WITH_TEXT);
    return super.onCreateOptionsMenu(menu);
}
public boolean onOptionsItemSelected(MenuItem item) {
    // Handle item selection
    switch (item.getItemId()) {
    case 10:
        Toast.makeText(VpiAbsTestActivity.this, "Now "+item.getItemId(), Toast.LENGTH_SHORT).show();
        return true;
    case 15:
        Toast.makeText(VpiAbsTestActivity.this, "Now = "+item.getItemId(), Toast.LENGTH_SHORT).show();
        return true;
    case 20:
        Toast.makeText(VpiAbsTestActivity.this, "Now == "+item.getItemId(), Toast.LENGTH_SHORT).show();
        return true;
    default:
        return super.onOptionsItemSelected(item);
    }
}

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    setContentView(R.layout.simple_tabs);

    mAdapter = new TestFragmentAdapter(getSupportFragmentManager());

    mPager = (ViewPager)findViewById(R.id.pager);
    mPager.setAdapter(mAdapter);

    mIndicator = (TabPageIndicator)findViewById(R.id.indicator);
    mIndicator.setViewPager(mPager);
}

class TestFragmentAdapter extends FragmentPagerAdapter {        
    private int mCount = CONTENT.length;

    public TestFragmentAdapter(FragmentManager fm) {
        super(fm);
    }

    @Override
    public Fragment getItem(int position) {
        return TestFragment.newInstance(String.valueOf(position)); 
    }

    @Override
    public int getCount() {
        return mCount;
    }

    @Override
    public CharSequence getPageTitle(int position) {
        return CONTENT[position];
    }

 } 
```

}

i want to add a list view to page one for example this list but i cant write a list fragment for this code please tel me what i do

```
public static final String[] list = new String[]{"France", "London", "Sweden"}; 
```

what can I do ?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T13:27:07.573

首先，您必须了解什么是 Fragment 以及如何实例化它以及如何向其发送数据（您应该在[此处查看 Fragment](http://developer.android.com/reference/android/app/Fragment.html)[专用指南](http://developer.android.com/guide/components/fragments.html)和 Fragments 文档）。

然后你必须做两件事：

1.  创建您的自定义列表片段，我建议您查看[ListFragment](http://developer.android.com/reference/android/app/ListFragment.html)的 android 文档并创建一个继承自 ListFragment 的类。

    ```
    public class CustomListFragment extends ListFragment {
        // your code here to add content 
    } 
    ```

2.  当您在第一页时，修改您的 TestFragmentAdapter 以实例化您的新 CustomListFragment（参见下面的示例）

    ```
    public class TestFragmentAdapter
        extends FragmentPagerAdapter
    {

        protected final Class[] CONTENT_CLASSES = new Class[] { CustomListFragment.class, TestFragment.class};
        protected final String[] CONTENT_TITLES = new String[] { "List", "Test"};

        public TabAdapter( FragmentManager manager, Activity context )
        {
            super( manager );
            this.context = context;
        }

        @Override
        public Fragment getItem( int i )
        {
            Class targetFragmentClass = CONTENT_CLASSES[i]; 

            Bundle args = new Bundle();
            // add your args here 

            Fragment targetFragment = Fragment.instantiate( context, targetFragmentClass.getName(), args );
            return targetFragment;
        }

        @Override
        public int getCount()
        {
            return CONTENT_CLASSES.length;
        }

        @Override
        public CharSequence getPageTitle( int position )
        {
            return CONTENT_TITLES[i];
        }
    } 
    ```

# javascript - 在 ExtJS 4 网格面板中动态切换视图

> ID：13103869
> 
> 赞同：5
> 
> 时间：2012-10-27T20:23:18.297
> 
> 标签：javascript, extjs, extjs4

需要动态更改**ExtJS 4 网格面板**中的视图。

默认情况下，网格显示为表格，但在我的应用程序中，我需要一个功能来将网格从​​表格视图切换到*瓷砖*（或*卡片*）视图。下面我试图表示它应该是什么样子。

```
 Normal view:                               Tiles view:
 ======================================     ====================================
 | Name       | Description           |     | Name       | Description         |
 ======================================     ====================================
 | Name 1     | First description   |^|     |  ------     ------     ------  |^|
 |----------------------------------|X|     | | O  O |   | @  @ |   | >  < | |X|
 | Name 2     | Second description  |X|     | | \__/ |   | \__/ |   | \__/ | |X|
 |----------------------------------|X|     |  ------     ------     ------  |X|
 | Name 3     | Third description   | |     |  Name 1     Name 2     Name 3  | |
 |----------------------------------| |     |                                | |
 |            |                     | |     |  ------     ------     ------  | |
 | ...        | ...                 |v|     | | o  O |   | -  - |   | *  * | |v|
 ======================================     ==================================== 
```

我找到了我需要的几乎*完美的实现，命名为*[**Ext.ux.grid.ExplorerView**](http://www.sencha.com/forum/showthread.php?49088-Ext.ux.grid.ExplorerView-Windows-Explorer-look-a-like-grid)。但是，该扩展是为 ExtJS 版本 2.x (3.x) 开发的，不能在 ExtJS 4 中重复使用。

我使用了一个创建简单的网格：

```
Ext.create("Ext.grid.Panel", {
    store: ...,
    columns: [{
        header: "Name",
        dataIndex: "name",
    }, {
        header: "Description",
        dataIndex: "description"
    }],
    tbar: [ ... ],
    bbar: [ ... ],
    listeners: { ... },
    multiSelect: true,
    viewConfig: {
        stripeRows: true,
        markDirty: false,
        listeners: { ... }
    }
}); 
```

我试图更新`tpl`内部视图组件的属性，但似乎没有任何效果。

您是否知道如何在*单个网格面板的视图之间进行动态切换*？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-28T18:10:04.620

[**通过Harald Hanek**](https://github.com/harrydeluxe)开发的名为“ [**Tileview**](https://github.com/harrydeluxe/extjs-ux/blob/master/ux/grid/feature/Tileview.js) ”的网格面板的精彩*功能*，这个问题很容易解决。该解决方案是专门为**ExtJS 4**开发的。[](https://github.com/harrydeluxe/extjs-ux/blob/master/ux/grid/feature/Tileview.js)**[](https://github.com/harrydeluxe)**

 ******基本用法示例是：

```
var grid = Ext.create("Ext.grid.Panel", {
    store: ...,
    columns: [{
        header: "Name",
        dataIndex: "name",
    }, {
        header: "Description",
        dataIndex: "description"
    }],
    tbar: [ ... ],
    bbar: [ ... ],
    listeners: { ... },
    multiSelect: true,
    viewConfig: {
        stripeRows: true,
        markDirty: false,
        listeners: { ... }
    },

    features: [Ext.create("Ext.ux.grid.feature.Tileview", {
        getAdditionalData: function(data, index, record, orig) {
            if (this.viewMode) {
                return {
                    name: record.get("name").toLowerCase(),
                };
            }
            return {};
        },
        viewMode: 'tileIcons',   // default view
        viewTpls: {
            tileIcons: [
                '<td class="{cls} ux-tileview-detailed-icon-row">',
                '<table class="x-grid-row-table">',
                    '<tbody>',
                    '<tr>',
                        '<td class="x-grid-col x-grid-cell ux-tileview-icon" style="background-image: url(&quot;...&quot;);">',
                        '</td>',
                        '<td class="x-grid-col x-grid-cell">',
                            '<div class="x-grid-cell-inner">{name}</div>',
                        '</td>',
                    '</tr>',
                    '</tbody>',
                '</table>',
                '</td>'
            ].join(""),

            mediumIcons: [ ... ].join(""),
            largeIcons: [ ... ].join("")
        }
    })]
}); 
```

要更改视图，我们应该只使用`setView()`方法，即

```
grid.features[0].setView("tileIcons"); 
```

* * *

这就是该功能在现实生活中的样子。

*   *平铺视图示例：*

![在此处输入图像描述](../Images/58907e97044dbb2701e053553fb3d50e.png)

*   *图像视图示例：*

![在此处输入图像描述](../Images/b825528566c8fd410e6e6a8aab231c62.png)

* * *

**参考：**

*   [https://github.com/harrydeluxe/extjs-ux/blob/master/ux/grid/feature/Tileview.js](https://github.com/harrydeluxe/extjs-ux/blob/master/ux/grid/feature/Tileview.js) -- Tileview 来源
*   [https://github.com/harrydeluxe/extjs-ux](https://github.com/harrydeluxe/extjs-ux) -- *Harald 的所有扩展和截图*
*   [http://www.sencha.com/forum/showthread.php?183023-Thumbnails-in-Grid-with-switching-between-views](http://www.sencha.com/forum/showthread.php?183023-Thumbnails-in-Grid-with-switching-between-views) -- *Sencha 论坛上的功能讨论节点*
*   [http://harrydeluxe.github.com/extjs-ux/example/grid/tileview.html](http://harrydeluxe.github.com/extjs-ux/example/grid/tileview.html) --*演示*

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-27T23:21:02.397

我不会那样做的。取而代之的是，在卡片布局中有一个网格和一个视图，该视图使您能够对每个项目进行几乎任何标记，这是一个简单的示例：

```
Ext.define('Thing', {
    extend: 'Ext.data.Model',
    fields: ['name']
});

Ext.require('*');

Ext.onReady(function() {

    var store = Ext.create('Ext.data.Store', {
        model: Thing,
        data: [{
            name: 'Name 1'
        }, {
            name: 'Name 2'
        }, {
            name: 'Name 3'
        }]
    });

    var gridActive = true;

    var panel = Ext.create('Ext.panel.Panel', {
        renderTo: document.body,
        width: 400,
        height: 400,
        layout: 'card',
        tbar: [{
            text: 'Switch',
            handler: function(){
                var item;
                if (gridActive) {
                    item = panel.items.last();
                } else {
                    item = panel.items.first();
                }
                gridActive = !gridActive;
                panel.getLayout().setActiveItem(item);
            }
        }],
        items: [{
            border: false,
            xtype: 'gridpanel',
            columns: [{
                text: 'Name',
                dataIndex: 'name'
            }],
            store: store
        }, {
            xtype: 'dataview',
            itemTpl: '<b>{name}</b>',
            store: store
        }]
    });

}); 
```******

# java - Updating JPanel with radio button

> ID：13103871
> 
> 赞同：0
> 
> 时间：2012-10-27T20:23:26.830
> 
> 标签：java, swing, user-interface, unicode, jlabel

Scratching my head on the last part of this little project I have. It is a Binary/Decimal converter applet using JFrames/Jpanels. So the little niggle I am having is the applet needs to have an arrow (unicode) showing which direction you are converting and you change the direction of converting with a radio button. However, I can not get the initial arrow to change with the radio button. I have tried repaint(), and revalidate() in the radio button listener class and other little changes to the code with no luck. Here is what I have...

```
import java.awt.*;
import javax.swing.*;
import java.awt.*;
import java.awt.event.*;
import java.awt.Font;

public class NumberConverter extends JApplet {
private JPanel decimalPanel;
private JPanel arrowPanel;
private JPanel binaryPanel;
private JPanel buttonPanel;
private JPanel convertPanel;
private TextField decimal;
private TextField binary;
private JRadioButton convertToBinary;
private JRadioButton convertToDecimal;
private ButtonGroup radioButtonGroup;
private JButton convertButton;
private Font myFont = new Font("Courier New", Font.BOLD, 15);
private Font arrowFont = new Font("Courier New", Font.BOLD, 25);
private Color colorAll = Color.red;
private String currentConversion = "toBinary";
private String currentArrow = "\u2193";

public void init(){

    setSize(400, 250);

    buildDpanel();
    buildArrowPanel();
    buildBpanel();
    buildButtonPanel();
    buildConvertPanel();

    setLayout(new GridLayout(5,1));

    add(decimalPanel);
    add(arrowPanel);
    add(binaryPanel);
    add(buttonPanel);
    add(convertPanel);

    decimal.setEditable(true);
    binary.setEditable(false);

    setVisible(true);
}

private void buildDpanel(){
    decimalPanel = new JPanel();
    decimalPanel.setFont(myFont);
    Label message1 = new Label("Decimal: ");
    decimal = new TextField(20);
    decimalPanel.setLayout(new FlowLayout(FlowLayout.RIGHT));
    decimalPanel.setBackground(colorAll);

    decimalPanel.add(message1);
    decimalPanel.add(decimal);
}

private void buildArrowPanel(){
    arrowPanel = new JPanel();

    JLabel message1 = new JLabel(currentArrow);
    message1.setFont(arrowFont);
    arrowPanel.setLayout(new FlowLayout(FlowLayout.CENTER));
    arrowPanel.setBackground(colorAll);

    arrowPanel.add(message1);
}

private void buildBpanel(){
    binaryPanel = new JPanel();
    binaryPanel.setFont(myFont);
    Label message1 = new Label("Binary:");
    binary = new TextField(20);
    binaryPanel.setLayout(new FlowLayout(FlowLayout.RIGHT));
    binaryPanel.setBackground(colorAll);

    binaryPanel.add(message1);
    binaryPanel.add(binary);
}

private void buildButtonPanel(){
    buttonPanel = new JPanel();
    buttonPanel.setFont(myFont);
    convertToBinary = new JRadioButton("Decimal to binary", true);
    convertToDecimal = new JRadioButton("Binary to decimal");
    buttonPanel.setBackground(colorAll);

    radioButtonGroup = new ButtonGroup();
    radioButtonGroup.add(convertToBinary);
    radioButtonGroup.add(convertToDecimal);

    convertToBinary.setFont(myFont);
    convertToDecimal.setFont(myFont);

    convertToBinary.addActionListener(new RadioButtonListener());
    convertToDecimal.addActionListener(new RadioButtonListener());

    buttonPanel.add(convertToBinary);
    buttonPanel.add(convertToDecimal);

}

private void buildConvertPanel(){
    convertPanel = new JPanel();
    convertPanel.setFont(myFont);
    convertButton = new JButton("Convert");
    convertButton.addActionListener(new ButtonListener());
    convertButton.setBackground(Color.cyan);

    convertButton.setFont(myFont);

    convertPanel.add(convertButton);
}

private class RadioButtonListener implements ActionListener{
    public void actionPerformed(ActionEvent e){
        if (e.getSource() == convertToBinary){
            decimal.setEditable(true);
            binary.setEditable(false);
            currentConversion = "toBinary";
            currentArrow = "\u2191";
            arrowPanel.removeAll();
            arrowPanel.revalidate();
        }if (e.getSource() == convertToDecimal){
            decimal.setEditable(false);
            binary.setEditable(true);
            currentConversion = "toDecimal";
            currentArrow = "\u2193";
            arrowPanel.removeAll();
            arrowPanel.revalidate();
        }
    }
}

private class ButtonListener implements ActionListener{
    public void actionPerformed(ActionEvent e){

        if (currentConversion.equals("toBinary")){
            String binaryNum = "";
            String revString = "" ;
            int decimalNum;
            int quotient;
            int remainder;

            String deciStr = decimal.getText();

            decimalNum = Integer.parseInt(deciStr);

            for(int i = 0; i < 8; i++){

                quotient = decimalNum / 2;                  
                remainder = decimalNum % 2;             
                binaryNum = binaryNum + remainder;              
                decimalNum = quotient;

            }

            for(int i = binaryNum.length() -1 ; i >= 0 ; i--){
                revString = revString + binaryNum.charAt(i);
            } 

            binary.setText(revString);
        }else{
            int total = 0;
            String strTotal;

            String binStr = binary.getText();

            for(int i = 0; i <= binStr.length() - 1; i++){
                if(binStr.charAt(i) == '1'){
                    total += Math.pow(2,((binStr.length()-1)-i));

                }else if(binStr.charAt(i) == 0){

                }else{
                    strTotal = "Invalid character entered!";
                }
            }

            strTotal = total + "";

            decimal.setText(strTotal);
        }
    }
} 
```

}

So my issue, I think, is somewhere in my buildArrowPanel method and my radio button listener. Any help or ideas are appreciated, Thanks!

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-28T10:31:51.313

您没有更新您的标签`message1`中的文本`RadioButtonListener`或替换为 new `JPanel`。也不需要打电话

```
arrowPanel.revalidate() 
```

或者

```
arrowPanel.removeAll()  (!) 
```

所以要修复你可以`JLabel` `message1`在`arrowPanel`类成员变量上创建并简单地调用：

```
message1.setText(currentArrow); 
```

（您的向上和向下箭头 unicode 字符似乎是错误的方式:)）

**一些建议：**

您有多个名为 的标签`message1`，建议使用易于区分的名称，例如`arrowLabel`

为了提高可读性，请考虑`String`对箭头字符使用常量：

```
private static final String DOWN_ARROW = "\u2191";
private static final String UP_ARROW = "\u2193"; 
```

并致电：

```
arrowLabel.setText(UP_ARROW); 
```

# paypal - paypal echecks need some explanation

> ID：13103872
> 
> 赞同：3
> 
> 时间：2012-10-27T20:23:39.003
> 
> 标签：paypal, paypal-ipn, paypal-sandbox, paypal-adaptive-payments

I have read a lot of stuff and spent hours on studying the PPs API.

There is one thing I don't understand and would like to know how can I do this.

When sender sends money form the bank account (not cc) it's called echeck and it takes up to 5 days. In some places I can see that people say

*   you can't cancel echeck once it's approved. you can only ask seller to cancel your request/ payment. but on some other sites I can read
*   buyer can cancel transfer any time, so do not ship the items untill you get final confirmation.

So what's the final answer here, can the buyer cancell the echeck/ transfer or not? What if they approve it, but after one minute get rid of all the money form the account, and there is nothing they can be charged for?

And the second question: I can see that in the account setting you can disable acceptance od echecks. but how can this be done via API? I mean on my website I will have different sellers and I can't check if they have echeck enabled or not, so I would like to block echecks automatically via api. So, how can I block echecks using API

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-09-13T14:38:32.780

买家一旦发起电子支票就不能取消它。在电子支票完成后，他们必须要求您退款。（PS——在给买家货物之前等待电子支票完成总是一个好主意。仅仅因为电子支票被启动并不意味着它会自动清除——从他们的银行账户中提取仍然可能失败。 )

如果您使用 Express Checkout，您可以设置`PAYMENTREQUEST_0_ALLOWEDPAYMENTMETHOD=InstantPaymentOnly`禁用电子支票。

# php - How to pass a variable in form using GET with spaces in PHP+HTML+SQL

> ID：13103875
> 
> 赞同：3
> 
> 时间：2012-10-27T20:23:50.897
> 
> 标签：php, html, sql, variables

I have a form where I display a select item and two other invisible inputs with some variable values that I need to pass to the same page at the press of the "Action" button. But I'm having the problem that those variables are city names like "New York", so there is a space inside the name, and at the moment of passing the variable only the "New" gets passed; nothing after the space goes with it. I have read that there shouldn't be any spaces in those variables, so how should I do this?

Here is my sample code:

```
// at the beginning of the code I get this variables pass from other pages

$pais=$_GET['pais']; 
$name=$_GET['nombre'];

// this is how I query my table to populate my select item

$SN=mysql_real_escape_string($name);
$SP=mysql_real_escape_string($pais);
$estadoquery = "SELECT * FROM `".$SP."` ORDER BY Estado ASC";
$estadoresult = mysql_query($estadoquery);

// this is how I make my form

<form method="post" action="<?php echo $_SERVER['PHP_SELF']?>">
<input type="HIDDEN"  name=nombre  value="<? echo $SN ?>">
<input type="HIDDEN"  name=pais  value="<? echo $SP ?>">
  <th scope="col" align="center" valign="baseline" size="18px">

      <select name=estado  id="estado" style="font-size:24px">
       <option value="">Todos</option>
        <?
        while($rowp = mysql_fetch_array($estadoresult)) {
               $estado = $rowp['Estado'];
               $Se=mysql_real_escape_string($estado);
          ?>
        <option value=<?php echo $Se ?>>
        <?php echo $Se ?></option>
        <? } ?>
      </select>
  </th>
   <th scope="col" align="center" valign="baseline"> 
  <input type="SUBMIT"  name="ACTION" value="IR">
</th></form>

// and this is what the button action does

 if(@$_POST['ACTION']=='IR')
{
$pais = $_POST['pais'];
$name = $_POST['nombre'];
$estado = $_POST['estado'];
  $pais = mysql_escape_string($pais);
  $name = mysql_escape_string($name);
  $estado = mysql_escape_string($estado);
// this next echos are just to check my variables.
echo $pais;
echo $name;
echo $estado; // so here I can tell that this variable is not complete 
```

}

And I have read that variables cannot be passed with spaces, why does my `$pais` variable "United States" gets passed with the space in between correctly? Can someone tell me how to achieve this or how to transform my `<option value=<?php echo $Se ?>>` so it can pass the space?

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-27T20:28:38.490

使用[urlencode()](http://php.net/manual/en/function.urlencode.php)。它将转换`%20`成功传输的空间..您可以使用[urldecode()](http://www.php.net/manual/en/function.urldecode.php)对其进行解码。

```
<option value=<?php echo urlencode($Se); ?>> 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-27T20:45:10.827

根据我上面的评论：

问题是选项值周围没有引号。像这样改变它：

```
<option value="<?php echo $Se ?>"> 
```

你会很高兴的。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-27T20:28:25.573

I believe this has to do with URL Encoding. A URL can't have spaces in it. However, there are special characters that can be used to represent a space in a url. The GET Method uses the URL.

I believe this may help; [http://php.net/manual/en/function.urlencode.php](http://php.net/manual/en/function.urlencode.php)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-27T20:29:21.613

对要传入 get 的变量使用函数 urlencode。请参阅[http://php.net/manual/en/function.urlencode.php](http://php.net/manual/en/function.urlencode.php)以获取参考。

```
<input type="HIDDEN"  name=pais  value="<? echo urlencode($SP); ?>"> 
```

然后，当您想再次使用该变量时，您可以使用 urldecode 对其进行解码。[http://php.net/manual/en/function.urldecode.php](http://php.net/manual/en/function.urldecode.php)

编辑后：

```
<option value=<?php echo $Se ?>> 
```

应该：

```
<option value="<?php echo urlencode($Se); ?>"> 
```

使用 qoutes 和 urlencode。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-27T20:53:00.423

```
<option value="<?php echo htmlspecialchars($Se); ?>"> 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2016-05-18T21:17:49.567

关于 Gung Foo 的回应。urlencode() 不会将空格转换为 %20 而是转换为 + 字符。使用 rawurlencode() 将空格转换为 %20。

您也可能想阅读以下内容：[https ://stackoverflow.com/a/2678602/4481831](https://stackoverflow.com/a/2678602/4481831)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-10-09T19:40:39.350

根据 HTML 标准，您应该在值周围使用 "（双引号），而且 - 您必须正确编码它们，因此您的代码必须如下所示：

```
<option value="<?php echo htmlspecialchars($rowp['Estado']); ?>"> 
```

注意 - 没有使用 mysql_real_escape_string，因为它转义了不同的符号，htmlspecialchars 也没有

# vb.net - with the datetimepicker in vb.net i can set the custom format no hitch but cant get it to hold that format in the .value property?

> ID：13103876
> 
> 赞同：0
> 
> 时间：2012-10-27T20:23:53.940
> 
> 标签：vb.net, datetimepicker

```
Try
    DateTimePicker1.Format = DateTimePickerFormat.Custom
    ' Display the date as "2012-10-24 21:47:09".
    DateTimePicker1.CustomFormat = "yyyy-MM-dd HH:mm:ss"

    strQuery = "INSERT INTO TimeClockInfo(IdTimeClock, First_Name, Last_Name, LogTime, In_Out) VALUES('" & AddTimeEmplyIdBox.Text & "','" & AddTimeEmplyFNBox.Text & "','" & AddTimeEmplyLNBox.Text & "','" & DateTimePicker1.Value & "','in')"

    SQLCmd = New MySqlCommand(strQuery, dbCon)

    dbCon.Open()

    SQLCmd.ExecuteNonQuery()

    dbCon.Close()
    MsgBox("TimeClock Data Added Successfully!")
Catch ex As Exception
    MsgBox("Failure!", ex.Message)
End Try 
```

this returns the original format of the date and time in the value property? what am i doing wrong here?

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-27T20:25:27.353

`DateTimePicker1.Value`是`DateTime`- 它没有固有的格式。

如果要对其进行格式化，请使用`ToString`您选择的日期和时间格式字符串。

MSDN 详细介绍了[标准](http://msdn.microsoft.com/en-us/library/az4se3k1.aspx)和[自定义](http://msdn.microsoft.com/en-us/library/8kb3ddd4.aspx)格式字符串。

但是，由于您正在与 SQL 交互，因此您不应该连接 SQL - 您的代码以这种方式对[SQL 注入开放。](http://en.wikipedia.org/wiki/SQL_injection)您应该使用参数化 SQL，它没有此漏洞，并且也将`DateTime`正确处理。

# qt - Setup qmake for Qt Creator on Mac

> ID：13103879
> 
> 赞同：0
> 
> 时间：2012-10-27T20:24:14.667
> 
> 标签：qt, installation, osx-snow-leopard, qt-creator, qmake

I installed the qt debug and release libraries and qt creator.

I can't make it build because of qmake. How can i make qt creator know of `qmake`?

I went to `Preferences->Build&Run` and click `Add` but I can't select anything, not even `qmake` after I find it.

I have qmake, I can run it from the command line but I can't make the `QtCreator` know about it.

Please help me, I feel like I'm gonna blow up.

Thanks

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T00:40:04.173

我所做的是浏览一个文件`/usr/bin`（在 Mac OS X 中隐藏），它将文件资源管理器中出现的默认文件夹设置为`/usr/bin`. 然后我在 /usr/bin 中浏览了`qmake`哪个驱使我，所以我可以选择 qmake。然而，这是一种解决方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-10-31T17:51:05.353

在 qt creator 4.1.0 上，打开 Build&Run Preferences。

在 Qt 版本下单击“添加”并点击： *Command + shift + G*

然后输入： /usr/local/bin （或任何你的 qmake 是`find qmake`：）

为了在*Kits*中查看新的 qt 版本，您需要点击 OK 并重新打开 Preferences 窗口

我使用 Mac 版本 10.11.6，它对我有用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-03T21:33:07.663

我相信这是一个所有权问题。在 /usr/bin/qmake 上尝试 chown 并重新尝试添加到 Qt 版本。

# python - Python中的无限循环和递归

> ID：13103884
> 
> 赞同：0
> 
> 时间：2012-10-27T20:24:35.743
> 
> 标签：python, depth-first-search, iterative-deepening, sliding-tile-puzzle

我正在实施迭代深化深度优先搜索，以找到解决[8 难题](http://en.wikipedia.org/wiki/8-puzzle)的解决方案。我对自己找到实际的搜索路径不感兴趣，而只是计算程序运行需要多长时间。（我还没有实现定时功能）。

但是，我在尝试实现实际搜索功能时遇到了一些问题（向下滚动查看）。我粘贴了到目前为止所有的代码，所以如果你复制并粘贴它，你也可以运行它。这可能是描述我遇到的问题的最佳方式......我只是不明白为什么我在递归期间会出现无限循环，例如在拼图 2（p2）的测试中，第一次扩展应该产生一个解决方案。我认为这可能与未在其中一行代码前面添加“Return”有关（下面对此进行了评论）。当我添加返回时，我可以通过拼图 2 的测试，但是像拼图 3 这样更复杂的东西失败了，因为现在代码似乎只扩展了最左边的分支......

一直在这几个小时，放弃希望。如果您能指出我的错误，我将非常感谢您对此有另一种看法。谢谢！

```
#Classic 8 puzzle game
#Data Structure: [0,1,2,3,4,5,6,7,8], which is the goal state. 0 represents the blank
#We also want to ignore "backward" moves (reversing the previous action)

p1 = [0,1,2,3,4,5,6,7,8]
p2 = [3,1,2,0,4,5,6,7,8]
p3 = [3,1,2,4,5,8,6,0,7]

def z(p):   #returns the location of the blank cell, which is represented by 0
    return p.index(0)

def left(p):
    zeroLoc = z(p)
    p[zeroLoc] = p[zeroLoc-1]
    p[zeroLoc-1] = 0
    return p

def up(p):
    zeroLoc = z(p)
    p[zeroLoc] = p[zeroLoc-3]
    p[zeroLoc-3] = 0
    return p

def right(p):
    zeroLoc = z(p)
    p[zeroLoc] = p[zeroLoc+1]
    p[zeroLoc+1] = 0
    return p

def down(p):
    zeroLoc = z(p)
    p[zeroLoc] = p[zeroLoc+3]
    p[zeroLoc+3] = 0
    return p

def expand1(p):   #version 1, which generates all successors at once by copying parent
    x = z(p)
    #p[:] will make a copy of parent puzzle
    s = []  #set s of successors

    if x == 0:
        s.append(right(p[:]))
        s.append(down(p[:]))
    elif x == 1:
        s.append(left(p[:]))
        s.append(right(p[:]))
        s.append(down(p[:]))
    elif x == 2:
        s.append(left(p[:]))
        s.append(down(p[:]))
    elif x == 3:
        s.append(up(p[:]))
        s.append(right(p[:]))
        s.append(down(p[:]))
    elif x == 4:
        s.append(left(p[:]))
        s.append(up(p[:]))
        s.append(right(p[:]))
        s.append(down(p[:]))
    elif x == 5:
        s.append(left(p[:]))
        s.append(up(p[:]))
        s.append(down(p[:]))   
    elif x == 6:
        s.append(up(p[:]))
        s.append(right(p[:]))
    elif x == 7:
        s.append(left(p[:]))
        s.append(up(p[:]))
        s.append(right(p[:]))
    else:   #x == 8
        s.append(left(p[:]))
        s.append(up(p[:]))

    #returns set of all possible successors
    return s

goal = [0,1,2,3,4,5,6,7,8]

def DFS(root, goal):    #iterative deepening DFS
    limit = 0
    while True:
        result = DLS(root, goal, limit)
        if result == goal:
            return result
        limit = limit + 1

visited = []

def DLS(node, goal, limit):    #limited DFS
    if limit == 0 and node == goal:
        print "hi"
        return node
    elif limit > 0:
        visited.append(node)
        children = [x for x in expand1(node) if x not in visited]
        print "\n limit =", limit, "---",children   #for testing purposes only
        for child in children:
            DLS(child, goal, limit - 1)     #if I add "return" in front of this line, p2 passes the test below, but p3 will fail (only the leftmost branch of the tree is getting expanded...)
    else:
        return "No Solution"

#Below are tests

print "\ninput: ",p1
print "output: ",DFS(p1, goal)

print "\ninput: ",p2
print "output: ",DLS(p2, goal, 1)
#print "output: ",DFS(p2, goal)

print "\ninput: ",p3
print "output: ",DLS(p3, goal, 2)
#print "output: ",DFS(p2, goal) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-27T22:25:17.670

您在递归中遇到的直接问题是，当您执行递归步骤时，您没有返回任何内容。但是，无条件地从第一个递归调用返回值也不起作用，因为不能保证第一个孩子是找到解决方案的那个。相反，您需要测试以查看您在子状态上执行的哪些递归搜索（如果有）是成功的。以下是我将如何更改`DLS`函数的结尾：

```
 for child in children:
        child_result = DLS(child, goal, limit - 1)
        if child_result != "No Solution":
            return child_result

# note, "else" removed here, so you can fall through to the return from above
return "No Solution" 
```

一种更“pythonic”（和更快）的方法是`None`用作标记值而不是“No Solution”字符串。然后您的测试将简单地成为`if child_result: return child_result`并且您可以选择不使用失败搜索的返回语句（因为`None`它是函数的默认返回值）。

修复此递归问题后，您的代码还会遇到其他一些问题。例如，使用全局`visited`变量是有问题的，除非您每次重新启动另一个递归搜索时重新设置它。但我会把这些留给你！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-27T22:40:58.240

为您的州使用课程！这应该使事情变得容易得多。让你开始。现在不想发布整个解决方案，但这会让事情变得更容易。

```
#example usage
cur = initialPuzzle
for k in range(0,5): # for 5 iterations. this will cycle through, so there is some coding to do
    allsucc = cur.succ() # get all successors as puzzle instances
    cur = allsucc[0] # expand first                                                                                           
    print 'expand ',cur 
```

* * *

```
import copy

class puzzle:

    '''
    orientation
    [0, 1, 2
     3, 4, 5
     6, 7, 8]
    '''

    def __init__(self,p):
        self.p = p

    def z(self):  
        ''' returns the location of the blank cell, which is represented by 0 '''
        return self.p.index(0)

    def swap(self,a,b):
        self.p[a] = self.p[b]
        self.p[b] = 0

    def left(self):
        self.swap(self.z(),self.z()+1) #FIXME: raise exception if not allowed

    def up(self):
        self.swap(self.z(),self.z()+3)

    def right(self):
        self.swap(self.z(),self.z()-1)

    def down(self):
        self.swap(self.z(),self.z()-3)

    def __str__(self):
        return str(self.p)

    def copyApply(self,func):
        cpy = self.copy()
        func(cpy)
        return cpy

    def makeCopies(self,s):
        ''' some bookkeeping '''
        flist = list()
        if 'U' in s:
            flist.append(self.copyApply(puzzle.up))
        if 'L' in s:
            flist.append(self.copyApply(puzzle.left))
        if 'R' in s:
            flist.append(self.copyApply(puzzle.right))
        if 'D' in s:
            flist.append(self.copyApply(puzzle.down))

        return flist

    def succ(self):
        # return all successor states for this puzzle state
        # short hand of allowed success states
        m = ['UL','ULR','UR','UDR','ULRD','UDL','DL','LRD','DR']
        ss= self.makeCopies(m[self.z()]) # map them to copies of puzzles
        return ss

    def copy(self):
        return copy.deepcopy(self)

# some initial state
p1 = [0,1,2,3,4,5,6,7,8]

print '*'*20
pz = puzzle(p1)
print pz

a,b = pz.succ()
print a,b 
```

# python - 按键模拟器

> ID：13103889
> 
> 赞同：1
> 
> 时间：2012-10-27T20:25:12.750
> 
> 标签：python, simulator, keydown, ime

我在链接下制作了一个 IME 模拟器。

[http://colspan.net/hangulime/](http://colspan.net/hangulime/) <- 这是了解我的问题的非常重要的链接。

当您键入英语时，此模拟器会表达。它一一转换韩语。（w转换ㄱ，当k在w之后，实时模拟转换가。）

我已经使用 raw_input() 方法将英语转换为韩语。

我想制作从英语到韩语的转换器，而不是使用 raw_input 方法（像上面的链接一样实时），因为它需要一个字符串并通过 meally 机器转换为新字符串。

我可以使用 sys 库和 Tkinter 库来使用上面链接的 express 吗？

# javascript - Google Closure Library – 编译警告

> ID：13103892
> 
> 赞同：0
> 
> 时间：2012-10-27T20:25:44.497
> 
> 标签：javascript, google-closure-compiler, google-closure-library

几年来我一直在使用 Google Closure Compiler，但我并没有过多地使用实际的 Closure 库。

当我编译我的应用程序时，我收到以下警告。引用的代码在库本身中，而不是在我的文件中。**我想知道我是否应该做些什么来修复它们，或者只是等待 Closure 库的贡献者这样做。**

```
/Users/Jan/.../closure-library/closure/goog/dom/dom.js:673:
  WARNING - Property type never defined on attributes
      delete attributes.type;
             ^

/Users/Jan/.../closure-library/closure/goog/dom/dom.js:2396:
  WARNING - assignment to property getFrameContentDocument of goog.dom.DomHelper.prototype
found   : function ((Element|null)): Document
required: function (this:goog.dom.DomHelper, (HTMLFrameElement|HTMLIFrameElement|null)): HTMLDocument
goog.dom.DomHelper.prototype.getFrameContentDocument =
^

/Users/Jan/.../closure-library/closure/goog/fx/animation.js:255:
  WARNING - mismatch of the stop property type and the type of the property it overrides from superclass goog.fx.TransitionBase
original: function (this:goog.fx.TransitionBase, boolean=): ?
override: function (this:goog.fx.Animation, boolean): ?
goog.fx.Animation.prototype.stop = function(gotoEnd) {
^ 
```

据我所知，没有任何问题。警告不会仅针对一个项目弹出，但我确实以相同的方式使用该库。

# javascript - 为Javascript数组排序注入对象而不是函数

> ID：13103895
> 
> 赞同：1
> 
> 时间：2012-10-27T20:25:58.290
> 
> 标签：javascript, node.js, sorting, v8

我正在尝试对 javascipt 中的一组对象进行排序。排序顺序本身取决于两个因素：对象的属性和单个外部变量的值。我知道我可以使用 array.sort(sortFunction) 来注入自定义函数，但我需要根据外部变量（在排序期间固定）使用不同的函数。

我将排序减少到显示问题的最小测试用例并尝试注入“降序/升序”参数，尽管真正的问题要复杂得多。我知道我可以 reverse() 结果，但这不是问题。

这是代码：

```
var ar = [ 10, 3, 5, 17 ];
var ns = new nsort();
ar.sort(ns.sort);
console.log(ar);

function nsort()
{
    this.desc = true;
    this.sort = function(a,b) {
        console.log(this.desc);
        if (this.desc)
            return b-a;
        else
            return a-b;
    }
} 
```

这是输出（使用 Node.js）

```
undefined
undefined
undefined
undefined
[ 3, 5, 10, 17 ] 
```

看起来数组排序代码在排序时提取了父对象之外的函数。

任何想法为什么会发生这种情况以及正确的方法是什么？

**更新：**我确实找到了让它工作的方法：

```
var ar = [ 10, 3, 5, 17 ];
var ns = new nsort(true);
ar.sort(ns.sort);
console.log(ar);

function nsort(desc)
{
    this.sort = function(a,b) {
        if (desc)
            return b-a;
        else
            return a-b;
    }
} 
```

这是一个好主意吗？还是有更好的东西？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-27T20:28:52.017

你`ns.sort`正在失去它的调用上下文。换句话说，一旦你将它传递给`.sort()`，它就不再与`ns`对象有任何联系。

您可以让函数直接引用该对象，方法是让构造函数中的变量指向它，并让排序函数引用该变量。

```
function nsort()
{
    this.desc = true;
    var self = this;
    this.sort = function(a,b) {
        console.log(self.desc);
        if (self.desc)
            return b-a;
        else
            return a-b;
    }
} 
```

或者，如果您在像 NodeJS 这样的现代环境中，您可以使用`Function.prototype.bind()`将调用上下文值永久附加到函数中。

```
function nsort()
{
    this.desc = true;
    this.sort = function(a,b) {
        console.log(this.desc);
        if (this.desc)
            return b-a;
        else
            return a-b;
    }.bind(this);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-27T20:31:41.143

你需要使用`bind`. 请参阅[http://jsfiddle.net/fub49/](http://jsfiddle.net/fub49/)。

```
var ar = [ 10, 3, 5, 17 ];
var ns = new nsort();
ar.sort(ns.sort.bind(ns));
console.log(ar);

function nsort() {
    this.desc = true;
    this.sort = function(a,b) {
        console.log(this.desc);
        if (this.desc)
            return b-a;
        else
            return a-b;
    }
} 
```

简而言之，这就是说“使用排序函数`ns.sort`但调用它，以便该函数在内部`ns`用于表达式的值`this`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-27T20:53:06.387

代替`bind`你也可以使用这个模式（使用闭包）：

```
function nsort(desc)
{
   desc = desc || false;
   this.setDesc = function(val){desc = val; return this;}
   this.sort = function(a,b) {
        return desc ? b-a : a-b;
   }
}
var ar = [ 10, 3, 5, 17 ]
   ,ns = new nsort();
ar.sort(ns.sort);
console.log(ar); //=> [ 3, 5, 10, 17 ]
ar.sort(ns.setDesc(true).sort);
console.log(ar); //=> [ 17, 10, 5, 3 ] 
```

只是为了好玩，这里有一个简化，更“功能”并避免调用上下文问题：

```
function nsort(desc)
{
  return function(a,b){
       return desc ? b-a : a-b;
  };
}
var ar = [ 10, 3, 5, 17 ];
console.log( ar.sort(nsort()) );     //=> [ 3, 5, 10, 17 ]
console.log( ar.sort(nsort(true)) ); //=> [ 17, 10, 5, 3 ] 
```

# sd-card - 刷入以 root 身份挂载的内部 SD 卡

> ID：13103897
> 
> 赞同：0
> 
> 时间：2012-10-27T20:26:15.403
> 
> 标签：sd-card, embedded-linux, updates, dd

我正在开发具有内部 SD 卡的嵌入式 linux 设备。此设备需要在不打开设备和取出 SD 卡的情况下进行更新。目标是允许用户使用 USB 闪存驱动器更新他们的设备。我想用新的 SD 卡映像完全覆盖内部 SD 卡。

我的第一个想法是卸载根文件系统并使用以下效果：

```
dd if=/mnt/flashdrive/update.img of=/dev/sdcard 
```

但是，实际上要正确卸载根文件系统似乎很困难，因为像“login”和“systemd”这样的进程仍在使用根上的资源。例如，一旦您终止登录，更新脚本也会被终止。

当然，我们总是可以使用 dd 而不卸载 root。然而，这似乎相当愚蠢。:P

我还考虑在系统实际挂载根文件系统之前修改系统初始化脚本以执行此逻辑。

是否有正确/简单的方法来执行此类更新？我想它以前已经做过了。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-27T21:19:17.593

重新映像已挂载的文件系统听起来不是一个好主意，即使该挂载是只读的。

考虑：

*   使用 ramdisk（从压缩映像初始化）作为您的实际根文件系统，但可能除了文件系统中最重要的工具以外的所有工具都安装在下面，您可以将其删除以进行升级。大多数 Linux 实现在它们挂载主磁盘文件系统之前的引导过程的早期都会这样做：重新引导以进行升级可能是一种选择。

*   无论如何，SD 卡可能比您需要的要大。每次升级时有两个分区并在它们之间交替。或者有一个维护分区，您可以在其中启动以执行升级/恢复。

*   实际上不要对文件系统进行映像，而是升级单个文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-27T20:33:08.260

尝试其中一种或两种：

1.  首先进入单用户模式：`telinit 1`

或/和

1.  重新挂载 / 为只读：`mount -o remount,ro /`

在运行之前`dd`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-29T08:35:05.293

就我个人而言，我永远不会像你那样做某事，但有可能做到。

您的 linux 系统每次启动时都会执行此操作。事实上，发生的事情是您的内核最初安装了 initrd，加载了所有模块，然后它调用`pivot_root`安装真正的 / 。

`pivot_root`也是一个可以从shell使用的命令，你最好运行`man 8 pivot_root`但只是给你一个想法，你可以做这样的事情

```
mount /dev/hda1 /new-root
cd /new-root
pivot_root . old-root
exec chroot . sh <dev/console >dev/console 2>&1
umount /old-root 
```

最后一件事：这种执行软件升级的方式非常弱。请考虑其他解决方案。

# ios - iOS 5.1 和 iOS 6 的旋转兼容性

> ID：13103899
> 
> 赞同：2
> 
> 时间：2012-10-27T20:26:20.097
> 
> 标签：ios, rotation, universal

在需要同时在**iOS 5.1**和**iOS 6.0上运行的****通用应用程序**中，我使用上面的代码来允许在两个版本中进行**旋转**，并且都在 iPhone 上和 iPad 上。有没有更好的方法来做到这一点，同时保持两个版本之间的兼容性并且不使用已弃用的功能？使用上面的代码，我在 iOS 6.0 的 iPad 上遇到了一些小问题，有时......

 ******谢谢你。

```
// Override to allow orientations other than the default portrait orientation.
// Rotation for v. 5.1.1
- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
if (UI_USER_INTERFACE_IDIOM() == UIUserInterfaceIdiomPad) {
    // on iPad support all orientations
    return YES;
    }
else {
    // on iPhone/iPod support all orientations except Portrait Upside Down
    return (interfaceOrientation != UIInterfaceOrientationPortraitUpsideDown);
    }
return NO;
}

// Rotation 6.0

// Tell the system It should autorotate
- (BOOL) shouldAutorotate {
return YES;
}

// Tell the system which initial orientation we want to have
- (UIInterfaceOrientation)preferredInterfaceOrientationForPresentation {
return UIInterfaceOrientationPortrait;

}

// Tell the system what we support
-(NSUInteger)supportedInterfaceOrientations
 {
// return UIInterfaceOrientationMaskLandscapeRight;
// return UIInterfaceOrientationMaskAll;
return UIInterfaceOrientationMaskAllButUpsideDown;
} 
```

添加：经过一些测试后，我在模拟器中再次遇到了错误：slitViewController 的左侧部分变黑（不总是）并出现上述错误（然后再次运行，旋转 iPad）：

* * *

```
<Error>: CGImageCreate: invalid image size: 0 x 0.
<Error>: CGContextSetFillColorWithColor: invalid context 0x0
<Error>: CGContextSetStrokeColorWithColor: invalid context 0x0
<Error>: CGContextGetCompositeOperation: invalid context 0x0
<Error>: CGContextSetCompositeOperation: invalid context 0x0
<Error>: CGContextFillRects: invalid context 0x0 
```

...

* * *******

# java - 如果类实现了较新的接口，Android 推荐的安全支持较新 API 的方法会出错。为什么？

> ID：13103902
> 
> 赞同：3
> 
> 时间：2012-10-27T20:26:56.917
> 
> 标签：java, android, dalvik

为了支持不同的 Api 级别，我使用了这里描述的技术：[http://android-developers.blogspot.com/2010/07/how-to-have-your-cupcake-and-eat-it-too。 html](http://android-developers.blogspot.com/2010/07/how-to-have-your-cupcake-and-eat-it-too.html)

这是文章中的示例：

```
public static VersionedGestureDetector newInstance(Context context,
        OnGestureListener listener) {
    final int sdkVersion = Integer.parseInt(Build.VERSION.SDK);
    VersionedGestureDetector detector = null;
    if (sdkVersion < Build.VERSION_CODES.ECLAIR) {
        detector = new CupcakeDetector();
    } else if (sdkVersion < Build.VERSION_CODES.FROYO) {
        detector = new EclairDetector();
    } else {
        detector = new FroyoDetector(context);
    }

    detector.mListener = listener;

    return detector;
} 
```

这种方法“利用了 ClassLoader 的惰性”。对于具有较新 API 级别的设备（在示例中为 Froyo），它可以使用访问较新版本 API 的 Froyo 类。对于较旧的设备，它们会收到一个仅使用较旧 API 的类。

这完美地工作。

但是，如果您让 FroyoDetector 实现一个仅存在于较新的 api 级别中的接口，则当调用 newInstance() 时，即使在它运行该方法中的任何代码之前，它也会尝试加载 FroyoDetector 实现并放置的接口类日志中显示无法加载 FroyoDetector 类的错误。

所以我的问题是，为什么会发生这种情况？我的印象是，使用这种技术，直到第一次直接引用新类才会加载。`detector = new FroyoDetector(context);`但是，如果您向其添加接口，即使不调用该行，它似乎也会尝试加载它。

这是一些重现该问题的代码：

这是一个针对 sdk 16 的应用程序，最小为 8。在 2.3 设备上运行它会重现该问题。

以下是三个类：

```
public class VersionedLoader {

    public static VersionedLoader newInstance() {
        if (Build.VERSION.SDK_INT < 12) {
            return new OldVersionLoader();
        } else {
            return new NewVersionLoader();
        }
    }

} 
```

-

```
public class OldVersionLoader extends VersionedLoader {

} 
```

-

```
@TargetApi(11)
public class NewVersionLoader extends VersionedLoader implements AnimatorListener {

    @Override
    public void onAnimationStart(Animator animation) {}

    @Override
    public void onAnimationEnd(Animator animation) {}

    @Override
    public void onAnimationCancel(Animator animation) {}

    @Override
    public void onAnimationRepeat(Animator animation) {}

} 
```

AnimatorListener 仅从 3.1 开始可用。

现在如果你运行：`Object obj = VersionedLoader.newInstance();`

此错误将出现在日志中：

```
10-27 13:51:14.437: I/dalvikvm(7673): Failed resolving Lyour/package/name/NewVersionLoader; interface 7 'Landroid/animation/Animator$AnimatorListener;'
10-27 13:51:14.437: W/dalvikvm(7673): Link of class 'Lyour/package/name/NewVersionLoader;' failed
10-27 13:51:14.445: E/dalvikvm(7673): Could not find class 'your.package.name.NewVersionLoader', referenced from method your.package.name.VersionedLoader.newInstance
10-27 13:51:14.445: W/dalvikvm(7673): VFY: unable to resolve new-instance 1327 (Lyour/package/name/NewVersionLoader;) in Lyour/package/name/VersionedLoader;
10-27 13:51:14.445: D/dalvikvm(7673): VFY: replacing opcode 0x22 at 0x000c
10-27 13:51:14.445: D/dalvikvm(7673): VFY: dead code 0x000e-0011 in Lyour/package/name/VersionedLoader;.newInstance ()Lyour/package/name/VersionedLoader; 
```

它不会崩溃，它实际上会继续正常工作。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-28T18:42:42.473

是的，我可以重现该问题。有点令人惊讶，不过，正如您所指出的，它没有崩溃的事实意味着这更像是 Dalvik 在 LogCat 中可能有点过于健谈，而不是任何应该对应用程序造成伤害的事情。

一种解决方法是将接口移动到内部类。在您的示例中，内部类不是`NewVersionLoader`实现，而是实现：`AnimatorListener``NewVersionLoader``AnimationListener`

```
@TargetApi(11)
public class NewVersionLoader extends VersionedLoader {
    private class Foo implements AnimatorListener {
        @Override
        public void onAnimationStart(Animator animation) {}

        @Override
        public void onAnimationEnd(Animator animation) {}

        @Override
        public void onAnimationCancel(Animator animation) {}

        @Override
        public void onAnimationRepeat(Animator animation) {}

    }
} 
```

诚然，这可能并不理想，具体取决于您对`VersionedLoader`. 但是，由于`VersionedLoader`它本身没有实现，`AnimationListener`用户*不会*`VersionedLoader`调用`AnimationListener`方法，所以你的逻辑在内部类而不是实际类上的事实不应该是一个大问题 AFAIK。

# boolean - 转换为合取范式

> ID：13103905
> 
> 赞同：2
> 
> 时间：2012-10-27T20:27:31.257
> 
> 标签：boolean, logic

我正在尝试将其转换为合取范式：事实`∧0≤i<n ∨0≤j1,j2<n (Ci,j1 ∧ Ci,j2)` 证明这比我预期的要困难得多。

如果不将 NOT 引入非文字，我似乎无法摆脱嵌套最深的 AND。谁能告诉我如何做到这一点？

# php - 回调 API 服务需要什么才能通过 SSL 连接到我的服务器？

> ID：13103906
> 
> 赞同：0
> 
> 时间：2012-10-27T20:27:30.820
> 
> 标签：php, api, ssl, https

我需要使用一个 API 将信息传递给我服务器上的回调脚本。

API 使用安全套接字层 (SSL) 进行连接。我从来没有使用过 SSL，我不知道是否需要获得某种证书才能让它在我的服务器上工作。

我正在使用 PHP，这些是我可以通过 phpinfo() 找到的所有与 SSL 相关的当前设置：

* * *

注册的流套接字传输：`tcp, udp, unix, udg, ssl, sslv3, sslv2, tls`

SSL`Yes`

SSL 版本 `OpenSSL/0.9.8b`

OpenSSL 支持`enabled`

OpenSSL 库版本`OpenSSL 0.9.8e-fips-rhel5 01 Jul 2008`

OpenSSL 标头版本 `OpenSSL 0.9.8e-fips-rhel5 01 Jul 2008`

原生 OpenSSL 支持 `enabled`

* * *

那么我需要做什么才能让 API 通过 SSL 连接到我的服务器？

另外，我必须`https`在回调脚本的 URL 中使用吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-27T21:34:58.857

要通过 SSL 访问您的服务器，您需要在服务器上为其提供证书。在调用另一台服务器时，您将使用`https`来访问它。因此，如果您调用的 API 需要通过 SSL 进行安全回调，那么您确实需要证书。否则，你不会。

# c - 在 C 中使用 fork 创建 n 个后台进程

> ID：13103908
> 
> 赞同：0
> 
> 时间：2012-10-27T20:27:41.490
> 
> 标签：c, posix, shared-memory, semaphore, producer-consumer

我正在尝试使用信号量和共享内存在 C 中创建生产者-消费者问题。我已经让信号量和共享内存正常工作，但我无法确定如何运行个人消费者和生产者。

这是作业，要求规定生产者和消费者必须是单线程进程。我已经联系了教授，他建议使用 fork()。我认为这意味着我不能使用 pthread()。

目前，我为生产者和消费者提供了单独的应用程序（即他们每个人都有自己的 main()）。我需要能够运行用户指定的多组生产者和消费者，并在一定时间后终止应用程序。

最初我试过这个

```
int Ppid = fork();
if(Ppid == 0){
    execv("pathtoproducer", NULL);
}
int Cpid = fork();
if(Cpid == 0){
    execv("pathtoconsumer", NULL);
}
//close semaphores and detach shared memory 
```

当然，这会导致问题，因为应用程序将在运行分叉进程之前关闭信号量。

所以我正在考虑做这样的事情：

```
 int pid = fork();
 if(pid == 0){
     execv("pathtoproducer", NULL);
     execv("pathtoconsumer", NULL);
 }
 else{
    //wait for timer to run out
 }
 //detach shared memory and close semaphore 
```

但当然，因为我使用的是 execv，所以消费者永远不会运行。有什么我可以用来让生产者和消费者都运行的东西吗（请记住，我需要有 n 个它们，在这个例子中我只是尝试使用一个集合）。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-27T21:57:35.673

好吧，你总是可以做一个嵌套的叉子。

```
 int pid = fork();
 if (pid == 0){
     int pid2 = fork();
     if (pid2 == 0)
         execv("pathtoproducer", NULL);
     else
         execv("pathtoconsumer", NULL);
 } else { 
```

顺便提一句。有比计时器更好的方法来等待你的孩子。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-28T16:06:35.953

也许我遗漏了您的部分要求，但您似乎比现在更难了。

```
for (i=0...numConsumers)
    fork consumers; //they can't do anything without something to consume

for (i=0...numProducers)
    fork producers;

select(null, null, null, null, timetowait);

for (i=0...numProducers + numConsumers)
    kill(childPid, sigusr1);
    wait();

//whatever remain todo in parent... 
```

您需要在被捕获的生产者/消费者程序中使用一个简单的信号处理程序，然后程序会继续以有序的方式自行关闭。如果您不想使用信号，则可以使用管道或其他任何东西……包括一个简单的共享内存开关，因为无论如何您已经可以使用它了。

# math - 如何求解递归 T(n) = 2T(n^(1/2)) + log n？

> ID：13103909
> 
> 赞同：7
> 
> 时间：2012-10-27T20:27:52.830
> 
> 标签：math, logarithm, recurrence

我试图找到重复的时间复杂度：

> T(n) = 2T(n ^(1/2) ) + log n

我非常接近解决方案，但是，我遇到了障碍。我需要解决：

> n ^((1/2 ^k )) = 1

为 k 简化我的替换模式。我不是在寻找复发的答案，只是寻找`k`.

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2015-12-15T07:04:58.737

当你开始展开递归时，你会得到： [![在此处输入图像描述](../Images/9e22d03a6da9ad07de9400a8b040f665.png)](https://i.stack.imgur.com/kKIvG.png)

* * *

这里有一些额外的步骤：

## [![在此处输入图像描述](../Images/68f0ca26f269a7fdb5ddec5b17988773.png)](https://i.stack.imgur.com/vzlwk.gif)

现在使用递归的边界条件（数字 2 选择为 0 和 1 没有意义），您将得到：

[![在此处输入图像描述](../Images/e2ee53180be2d400166efe4457a0c6b9.png)](https://i.stack.imgur.com/w6nYR.png)

代`k`回方程式，您将得到：

[![在此处输入图像描述](../Images/a99d6561be8c901a038a97c14bd74f2d.png)](https://i.stack.imgur.com/xXJGg.png)

这里有几个使用相同想法的递归。

*   [T(n) = T(n^1/2) + 1](https://stackoverflow.com/a/34258332/1090562)
*   [T(n) = T(n^1/2) + O(loglog(n))](https://stackoverflow.com/questions/11149168/solve-recurrence-tn-tn1-2-%CE%98lg-lg-n/34259293#34259293)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-10-26T05:52:33.720

不可能解决

> n ^((1/2 ^k )) = 1

对于 k，因为如果 n > 1，那么对于任何非零 x， n ^(x > 1。)解决这个问题的唯一方法是选择 k 使得 1 / 2 ^k = 0，但这是不可能的。

但是，您*可以*解决此问题：

> n ^((1/2 ^k )) = 2

首先，取双方的日志：

> (1 / 2 ^k ) lg n = lg 2 = 1

接下来，将两边乘以 2 ^k：

> lg n = 2 ^k

最后，再记录一次：

> lg lg n = k

因此，一旦 k = lg lg n，这种重复就会停止。

尽管您只询问了 k 的值，但自从您询问以来已经整整一年了，我想我会指出您可以进行变量替换来解决这个问题。尝试设置 k = 2 ^n。然后 k = lg n，所以你的递归是

> T(k) = 2T(k / 2) + k

这（使用主定理）求解到 T(k) = Θ(k log k)，并且使用 k = lg n 这一事实，整体递归求解为 Θ(log n log log n)。

希望这可以帮助！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-27T20:34:56.787

老兄，如果它是等式的快速排序：

![在此处输入图像描述](../Images/97fa96534a8635a942d8997a6c42f9b0.png)

解决方案是`O(n*log(n))`因为现在它甚至更小（`T(n) ~ n^1/2`），`N`这意味着您的复杂性小于`O(n*log(n))`.

尝试使用归纳法来证明你的界限

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-27T20:52:25.073

日志基数为 1，为 0。

所以

n^((1/2)^k) = 1

对数(n)(n^((1/2)^k)) = 对数(n)(1)

1/2^k = 0

对数（1/2）（（1/2）^k）=对数（1/2）（0）

对数基数为 0 的任何值都是负无穷大......所以......

k = -无穷大。

我认为你应该为 n 使用不同的“最终数字”，而不是 1 只是说......

# html - Create footer element located beneath the screen

> ID：13103910
> 
> 赞同：0
> 
> 时间：2012-10-27T20:28:01.423
> 
> 标签：html, css, layout, footer

I have a page that does not fill the entire screen's height, but I want a footer to stay just below the screen, so that it appears right when you start scrolling - no matter the person's screen height.

How do I accomplish this using CSS?

**EDIT**

I have tried:

```
#footer{
    position:absolute;
    left:0px;
    top:100%;
} 
```

This works, but it gets in the way if my page *does* go over the screen's height. I really need compatibility for both types of pages.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-27T20:35:25.977

这是您描述的布局的简单示例：

**HTML**

```
<html>
<head><title>Hidden Footer</title></head>
<body>
    <div id="content">
        Content here
    </div>
    <div id="footer">
        Footer here
    </div>
</body>
</html> 
```

**CSS**

```
html,
body { height: 100%; min-height: 100%; }

#content { min-height: 100%; }
#footer { background: #ccc; } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-27T20:34:32.360

```
html {
  min-height: 100%;
}
body {
  min-height: 100%;
  padding-bottom: 40px; /* free space for the footer */
  box-sizing: border-box; /* don't add padding to the actual height */
}
#footer {
  position: absolute;
  bottom: 0;
  left: 0;
  right: 0;
  height: 40px;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-27T20:30:29.263

您链接的页面有一个固定的标题。身体的其余部分适当地滚动。

查看固定的 CSS 页眉/页脚以复制效果。

# scheme - Runtime of set! and begin in Scheme/Racket

> ID：13103912
> 
> 赞同：1
> 
> 时间：2012-10-27T20:28:07.167
> 
> 标签：scheme, racket

Does anyone know what the runtime of `set!` and `begin` is in Scheme/Racket?

I think `set!` is constant but I'm not sure.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-27T21:22:45.630

该`set!`操作只是将一个值关联（“绑定”）一个符号，这肯定是`O(1)`任何自尊的编程语言。寻找绑定可能不一定`O(1)`取决于实现细节，但这是完全不同的事情（我不知道 Racket 的细节）。

关于`begin`，这是一个排序形式，应用它本身没有成本，只有它的内容（它包含的表达式）将决定它的时间复杂度。同样的事情`set!`，赋值的*值*部分可能需要一些时间来评估，但`set!`操作本身是`O(1)`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-27T21:59:06.547

一个警告：设置！并且开始都有子表达式。如果其中任何一个需要很长时间，那么就对集合进行评估！（或开始）也会。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-27T21:10:51.763

放！是 O(1)。Scheme 和其他语言在这方面没有区别。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-31T02:31:16.520

如果您担心 的性能`set!`，请记住避免突变可以更快。请参阅[球拍指南：突变和性能](http://docs.racket-lang.org/guide/performance.html#%28part._.Mutation_and_.Performance%29 "球拍指南：突变和性能")。

# c++ - fstream 没有创建文件名附加了 asctime 值的文件

> ID：13103913
> 
> 赞同：2
> 
> 时间：2012-10-27T20:28:17.990
> 
> 标签：c++, io

我已经调试到我知道问题的程度，我只是不知道如何解决它。

现在我正在使用：

```
file.open(logFile.c_str(), std::ios::out | std::ios::app); 
```

只要我注释掉下面的标记行，logFile 变量就可以正常工作：

```
time_t rawtime;
struct tm * timeinfo;
time (&rawtime);
timeinfo = localtime (&rawtime);
logFile = "bin/";
if(_DEBUG) { logFile += "Debug/"; }
else { logFile += "Release/"; }
logFile += fileName;
if(_DEBUG) { logFile += "Debug-"; }
else { logFile += "Release-"; }
logFile += asctime(timeinfo); // Works fine with this line commented.
logFile += ".log"; 
```

那么我怎样才能让它在这条线没有注释的情况下正常工作呢？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-27T20:34:53.267

冒号 ( `:`) 是文件名的非法字符，至少对于 NTFS。尝试使用[`strftime()`](http://en.cppreference.com/w/cpp/chrono/c/strftime)而不是格式化不包含冒号的字符串。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-27T20:34:25.217

我来猜一猜。将时间添加到您的文件名将添加冒号，例如 12:23:34。我猜你在一个文件系统上，在文件名中使用冒号是不合法的。

解决方案（如果我的猜测是正确的），用下划线或类似内容替换冒号。

# ruby-on-rails - 如何使用非永久访问令牌构建在我的 Facebook 页面上自动发布的脚本？

> ID：13103916
> 
> 赞同：0
> 
> 时间：2012-10-27T20:28:32.500
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, facebook-graph-api, koala

我正在开发一个 ruby​​ 脚本，将我的 Facebook 页面上的每个新内容作为帖子推送。我知道访问令牌将在两个小时后过期，那么我该怎么做呢？

现在这段代码有效，因为我手动设置了“user_access_token”（但 2 小时后过期）。这是我公司的 Facebook 页面，链接到我的 Facebook 应用程序。我应该每两个小时点击一次“Facebook 连接”并授予新的访问令牌吗？

```
@user_graph = Koala::Facebook::API.new(user_access_token)
pages = @user_graph.get_connections('me', 'accounts')
# get access token for first page
first_page_token = pages.first['access_token']

# or: retrieve access_token for a given page_id
page_token = @user_graph.get_page_access_token(page_id)
@page_graph = Koala::Facebook::API.new(page_token)

@page_graph.put_wall_post('post on page wall') # post as page, requires publish_stream permission 
```

我从这里获得了“页面访问令牌”

![我从这里获得了页面访问令牌](../Images/8accfeac689a5b79fb5187bfca535524.png)

但一小时后它就会过期

![在此处输入图像描述](../Images/2f715d45f19e5ba1f6c8005973c88ff4.png)

**[解决]**

要获得扩展的页面访问令牌，请将用户访问令牌换成长期使用的令牌，然后请求页面令牌。这个页面的“扩展”令牌实际上没有任何到期时间。

[https://developers.facebook.com/docs/howtos/login/extending-tokens/#step1](https://developers.facebook.com/docs/howtos/login/extending-tokens/#step1)

我已经解决了执行 curl 请求，并在我的代码中手动保存“页面访问令牌”

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-27T20:33:07.320

获取[页面访问令牌](https://developers.facebook.com/docs/howtos/login/login-as-page/)——默认情况下不会过期；并确保使用[长期用户访问令牌这样做](https://developers.facebook.com/docs/howtos/login/extending-tokens/)

# javascript - Google Maps API for Business - 每秒地理编码请求限制？

> ID：13103917
> 
> 赞同：0
> 
> 时间：2012-10-27T20:28:35.323
> 
> 标签：javascript, google-maps-api-3

我知道作为普通用户，Geocoding API 每秒有 10 个请求的限制。

有人知道这个限制是相同的，还是增加了，或者对于商业用户根本不存在？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-28T10:16:51.100

我不确定您是在谈论客户端 Javascript 地理编码配额还是服务器端 Web 服务配额。

客户端 Javascript 确实有一个配额，但它是每个用户的客户端配额。一开始你会收到一堆请求，然后每隔几秒钟就会收到一个补充信息。

服务器端 Maps for Business 许可证可为您提供 10 QPS。此处记录了天数限制：[https](https://developers.google.com/maps/documentation/geocoding/#Limits) ://developers.google.com/maps/documentation/geocoding/#Limits 您可以通过联系您购买营业执照的人来购买额外的 QPS。

查看这篇文章： [https](https://developers.google.com/maps/articles/geocodestrat) ://developers.google.com/maps/articles/geocodestrat ，如果您仍然不确定，它会讨论客户端和服务器端地理编码的用例。

如果您坚持使用服务器端，请确保您使用的是 Geocoding API v3，因为 v2 已被弃用，并且在 2013 年 3 月 8 日之后将不再受支持。

要使用 Geocoding v3，您需要为每个请求创建数字签名。这些签名是使用您应该从 Google 和您的客户 ID 收到的欢迎信中提供给您的加密密钥生成的。

观看这个逐步解释如何签署请求的 YouTube 视频：http: [//goo.gl/y7Eq0](http://goo.gl/y7Eq0)

如果您没有加密密钥，您可以联系 Google 支持，他们会将其发送给您。联系他们的表格是：[https ://google.secure.force.com/?&hl=en&rd=2](https://google.secure.force.com/?&hl=en&rd=2)

# matlab - 使用 FIR 滤波器过滤光谱

> ID：13103922
> 
> 赞同：0
> 
> 时间：2012-10-27T20:29:00.363
> 
> 标签：matlab, filter, signal-processing

如果我有信号值 x[T] 和滤波器系数 b[i]，我可以使用卷积执行滤波。 ![在此处输入图像描述](../Images/56437b549e8638b5793b8aacfa9b25dd.png)

假设我有 x 的频谱（在 FFT 之后）并且我需要使用滤波器系数执行滤波，我该如何执行呢？我听说在频域它会相乘，而不是卷积（时域）。但我找不到使用它的方程式。我在 y = fft(x[T]) 向量中有 614000 个值和 119 个滤波器系数（使用 fdatool 生成），我不能直接将它们相乘......谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-27T22:58:42.753

您将需要零填充信号值 x 的频谱和零填充（到相同长度）FIR 滤波器内核 b 的 FFT，以便通过乘法进行快速卷积。否则，如果没有零填充，您最终将进行循环卷积而不是线性卷积。

对于长数据向量和相对较短的 FIR 滤波器内核，为了避免需要非常长的 FFT 和 IFFT，您可能需要研究重叠相加或重叠保存快速卷积算法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-27T21:51:50.353

您还需要将滤波器转换为频域。然后在频域中，您可以使用逐元素乘法。

[http://en.wikipedia.org/wiki/Convolution_theorem](http://en.wikipedia.org/wiki/Convolution_theorem)

# php - 变量将值保持在循环中

> ID：13103925
> 
> 赞同：0
> 
> 时间：2012-10-27T20:29:16.290
> 
> 标签：php, json

如何将具有多个项目的 JSON 文件中的数据添加到 mysql？目前，这下面为每个项目（游戏）创建一个新行，其中的值`$json`唯一的问题是，`$tagsT`当每一行应该不同时，每一行都相同，因为每个项目都有自己独特的一组标签。

```
$json = $_POST['json'];
$result = json_decode($json);
foreach($result as $key => $value) {
    if($value) {

foreach ($value->tags as $tag) { $tagsT .= $tag.','; }
 mysql_query("INSERT INTO `games_db`.`Games` (`title`, `description`, `image`, `category`, `page`, `rating`, `width`, `height`, `tags`) VALUES ('$value->name', '$value->description', '/images/$pageid.jpg', '$category', '$pageid', '$value->rating', '$value->width', '$value->height', '$tagsT')")
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-27T20:33:37.730

每次循环后清理字符串变量。

```
 foreach ($value->tags as $tag) { $tagsT .= $tag.','; }

 mysql_query("INSERT INTO `games_db`.`Games` (`title`, `description`, `image`, `category`, `page`, `rating`, `width`, `height`, `tags`) VALUES ('$value->name', '$value->description', '/images/$pageid.jpg', '$category', '$pageid', '$value->rating', '$value->width', '$value->height', '$tagsT')")

 $tagsT = "";  // reset string 
```

否则它显然会保留以前的标签。局部变量的作用域在函数内。即使在`foreach`.

还可以考虑阅读当代数据库教程。搜索 PDO 和准备好的语句。

# php - 为什么我不能在数组中返回多个值？

> ID：13103930
> 
> 赞同：1
> 
> 时间：2012-10-27T20:30:04.803
> 
> 标签：php, arrays

我想从 PHP 函数返回多个值，但它没有像以下代码一样工作：

该函数用于搜索特定文件夹及其递归文件夹中的文件名，并将文件名存储在数组中。

**在此示例中，调用特定（主）文件夹：F:\test**
**调用递归文件夹：F:\test\subfolder**

主文件夹和子文件夹共7个文件，文件名格式为：

**主文件夹：1.txt、2.txt、3.txt、4.txt**
**子文件夹：5.txt、6.txt、7.txt**

```
function getDirectory( $path = '.', $level = 0 ) {
$i=0;$j=0;

$dh = @opendir( $path );
while( false !== ( $file = readdir( $dh ) ) ){
// Loop through the directory

        if( is_dir( "$path/$file" ) ){
        // Its a directory, so we need to keep reading down...

            getDirectory( "$path/$file", ($level+1) );
            // Re-call this same function but on a new directory, this is what makes function recursive.

        } else {
            if ($level>0) //in a recursive folder
            {
                $dir_matched[$j]=$file;
                $j++;
            }
            else //in main folder
            {
            $files_matched[$i] = $file;
            $i++;
            }               
        }    
}
closedir( $dh );
//print_r ($files_matched);
//print_r ($dir_matched);   I tested this before return, both works fine.

return array($files_matched,$dir_matched);
}

echo "<pre>";
list($a,$b) = getDirectory("F:\test");
print_r ($a);   // this will result the same as array $files_matched, it ok!
print_r ($b);   // but i don't know why I cannot get the array of $dir_matched??
echo "</pre>"; 
```

如您所见，我只能得到一个数组，这太奇怪了？有什么想法可以获取`$dir_matched`数组的内容吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-27T20:33:23.810

现在的编写方式，您没有从递归调用中捕获值。在你的函数中，在这一行：

```
getDirectory( "$path/$file", ($level+1) ); 
```

您需要从中捕获返回的值。就像是：

```
$files_matched[++$i] = getDirectory( "$path/$file", ($level+1)); 
```

`$i`可能不是您想要的，您需要像在 中一样在此处增加它`else statement`，或者将它们捕获在不同的变量中以反映子目录 - 取决于您想要完成的任务。

# java - 如何在两次调用控制器方法之间保存数据？

> ID：13103931
> 
> 赞同：0
> 
> 时间：2012-10-27T20:30:09.603
> 
> 标签：java, jsp

我有 2 个 JSP `pay.jsp`：，`confirmPay.jsp`

用户在 上提交数据（信用卡号等）`pay.jsp`。此数据在后端进行验证，并与其他一些数据一起显示在`confirmPay.jsp`. 一旦他点击“确认”，数据（来自`pay.jsp`页面）将用于计费。如果他单击“取消”，则放弃付款。

这里重要的事情是：

1.  数据只能在`pay.jsp`
2.  应在两次调用之间保留数据

我知道这个问题类似于[如何在表单提交之间保留 ModelMap？](https://stackoverflow.com/questions/10019132/how-to-prserve-the-modelmap-between-form-submits). 只是想知道什么适用于这种情况，涉及敏感信息（如信用卡#）。把它放在一个会话中意味着同一个函数中的多个调用会产生问题。

请帮助我了解最佳选择是什么。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-27T21:30:03.470

如果您担心在会话中存储敏感数据，请不要担心。会话保存在服务器端的内存中。它不会上网，也不能被网络上的入侵者从浏览器内存中读取。

如果您担心用户在同一页面上有多个打开的浏览器选项卡或框架，并在同一会话中并行发送多个付款，那么这是一个非常有效的问题。我倾向于更喜欢无状态的解决方案，所以如果隐藏字段是一个可接受的解决方案，那么只需使用它们来维护从一页到下一页的状态。这不会对多个选项卡造成任何问题。如果需要使用 session 来存储中间状态，那么可以简单地生成一个唯一 ID（例如使用序列号），使用唯一 ID 作为 session 属性将数据存储在 session 中，并将这个唯一 ID frompage使用隐藏字段进行分页。这样，多个选项卡将使用不同的会话属性，并且不会相互干扰。

# java - 使用并发包中的同步器。FutureTask 总是返回 null

> ID：13103939
> 
> 赞同：3
> 
> 时间：2012-10-27T20:31:21.390
> 
> 标签：java, multithreading, concurrency, executorservice, java.util.concurrent

谁能说出为什么在以下代码段中使用 a`FutureTask`不起作用？
我的理解是我们可以使用`FutureTask`，对吗？
给出一个完整的描述：
我在我的代码中偶然发现了一些微妙的错误。
简而言之，我创建了一个使用 a`SingleThreadPoolExecutor`来运行`Callable`s 作为参数传递的类。
我使用它来运行后台任务并在 Eclipse 应用程序中显示进度对话框。
代码是：

```
public class TaskRunner <T>  {  

    final static ExecutorService threadPool = Executors.newSingleThreadExecutor();  
    private T taskResult;  

    public T runTask(Callable<T> task, Shell currentShell) throws CustomException{          
        if(currentShell == null){  
            currentShell = new Shell();  
        }  
        final Callable<T> taskToRun = task;       

        ProgressMonitorDialog progressDialog = new ProgressMonitorDialog(currentShell);  
        try {  
            progressDialog.run(false, true, new IRunnableWithProgress() {  

                @SuppressWarnings("unchecked")  
                @Override  
                public void run(IProgressMonitor monitor) throws InvocationTargetException, InterruptedException {  
                    monitor.beginTask("Saving your data!", 100);  

                    FutureTask<T> task = createTask(taskToRun);  
                    Future<?> result = threadPool.submit(task);  
                    while(!result.isDone()){  
                        monitor.worked(1);  
                    }                     
                    try {  
                        taskResult = (T) result.get();  
                        if(taskResult == null){  
                            System.out.println("Result here in return is NULL!");  
                        }  

                    } catch (ExecutionException e1) {  
                        logger.error(e1);  
                    }   
                    catch(Exception e){  
                        logger.error(e);  
                    }               
                }  
            });  
        } catch (InvocationTargetException e) {  
            logger.error(e);  
        } catch (InterruptedException e) {  
            logger.error(e);  
        }       
        return taskResult;  
    }  

    private static <T> FutureTask<T> createTask(Callable<T> theTask){  
        return new FutureTask<T>(theTask);   
    }  
} 
```

和代码任务：

```
public class MyTask implements Callable<ComplexObject> {    

    private Util helper;  
    private String filePath;  

    public LoadKeystoreTask(Util helper, String filePath) {  
        this.helper = helper;     
        this.filePath = filePath;  
    }  

    @Override  
    public Container call() throws Exception {        
        ComplexObject result = helper.loadData(filePath);  
        if(result == null){  
            System.out.println("ComplexObject IS NULL!");  
        }  
        else{  
            System.out.println("ComplexObject IS NOT NULL!");  
        }   
        return result;  
    }  
} 
```

**问题：**
虽然`helper.loadData`正确地返回了结果（通过调试和打印语句验证）这一行：

```
taskResult = (T) result.get(); 
```

**总是**`null`。_
即为了简化它被打印：

> 复杂对象不为空！
> 这里的结果是 NULL！

经验证，这是由提交`FutureTask`.
如果我提交一个`Callable`：

即更改为：

```
Future<?> result = threadPool.submit(taskToRun); 
```

有用！为什么 wrapping with`FutureTask`会导致这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-27T20:55:21.590

`FutureTask`这里是不必要的：

```
private static <T> FutureTask<T> createTask(Callable<T> theTask){  
    return new FutureTask<T>(theTask);   
}

FutureTask<T> task = createTask(taskToRun);  
Future<?> result = threadPool.submit(task); 
```

直接`submit()` `Calleble<T>`：

```
Future<?> result = threadPool.submit(taskToRun); 
```

我认为不[`FutureTask`](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/FutureTask.html)应该在用户代码中使用：

> 这个类提供了一个基本的实现`Future`

将实施留给`Future`图书馆。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T00:10:40.973

这很简单。`FutureTask`所以你打电话`Runnable`的确切方法是。现在让我们看一下javadoc：`ExecutorService``Future<?> submit(Runnable task)`

> 提交 Runnable 任务以执行并返回代表该任务的 Future。Future 的 get 方法将在成功完成后返回**null ......**

这是非常可以理解的。`Runnable`仅包含`void run()`方法。你希望它返回什么结果？

如果您提交`FutureTask`只是`Executor`使用它来获取结果：

```
FutureTask<Integer> task = ...
threadPool.submit(task);
result = task.get(); 
```

# php - 使用 PHP 和 cURL 防止远程服务器的欺骗

> ID：13103942
> 
> 赞同：5
> 
> 时间：2012-10-27T20:31:45.530
> 
> 标签：php, ssl, curl, spoofing

我正在编写从远程服务器请求机密数据的 php 脚本。我正在使用 cURL 来获取远程服务器的证书信息（请在下面查看其输出）。

我需要检查证书有效性的哪些数组键，没有人可以欺骗它们？

例如，密钥 [certinfo][0][Subject][CN] 可以被自签名证书欺骗。

我可以只检查我在客户端使用的 ca-bundle 文件的 md5 文件哈希，但是当服务器的证书到期时，我需要相应地替换 ca-bundle 文件，并在 php 脚本中更新 md5 文件哈希 - 这是不可接受的为了我。唯一的默认是替换 ca-bundle 文件而不更新 php 脚本。为此，我需要验证服务器证书的属性，这些属性在未来的证书重新生成中保持不变，并且不能被不法分子欺骗。

**print_r(curl_getinfo($ch))：**

```
[url] => https://remoteserver.com
[content_type] => text/html
[http_code] => 200
[header_size] => 148
[request_size] => 79
[filetime] => -1
[ssl_verify_result] => 0
[redirect_count] => 0
[total_time] => 0.374
[namelookup_time] => 0
[connect_time] => 0.062
[pretransfer_time] => 0.203
[size_upload] => 0
[size_download] => 20618
[speed_download] => 55128
[speed_upload] => 0
[download_content_length] => -1
[upload_content_length] => 0
[starttransfer_time] => 0.281
[redirect_time] => 0
[certinfo] => Array
    (
        [0] => Array
            (
                [Subject] => Array
                    (
                        [OU] => Globe Standard SSL
                        [CN] => www.remoteserver.com
                    )

                [Issuer] => Array
                    (
                        [C] => US
                        [O] => Globe Hosting, Inc.
                        [OU] => GlobeSSL DV Certification Authority
                        [CN] => GlobeSSL CA
                    )

                [Version] => 2
                [Signature Algorithm] => sha1WithRSAEncryption
                [Start date] => 2011-09-30 00:00:00 GMT
                [Expire date] => 2014-09-30 23:59:59 GMT
                [Public Key Algorithm] => rsaEncryption
                [RSA Public Key] => 2048
                [rsa(n)] => d7:c0:0b:3f:f3:3e:d6:ed:92:56:22:12:64:c1:c4:00:d7:c9:a1:1e:..cut..
                [rsa(e)] => 01:00:01:
                [X509v3 Authority Key Identifier] => keyid:C3:AB:A0:02:F0:9B:F5:66:7F:28:15:92:22:95:DB:B8:4E:D3:93:08
                [X509v3 Subject Key Identifier] => 13:1B:B2:52:14:3C:70:1C:B2:93:F1:C5:04:06:86:60:8A:D4:E5:5C
                [X509v3 Key Usage] => DigitalSignature,KeyEncipherment
                [X509v3 Basic Constraints] => CA:FALSE
                [X509v3 Extended Key Usage] => TLSWebServerAuthentication,TLSWebClientAuthentication
                [X509v3 Certificate Policies] => Policy:1.3.6.1.4.1.6449.1.2.2.27, CPS:http://www.globessl.com/docs/GlobeSSL_CPS.pdf
                [X509v3 CRL Distribution Points] => URI:http://crl.globessl.com/GlobeSSLDVCertificationAuthority.crl
                [Authority Information Access] => CAIssuers-URI:http://crt.globessl.com/GlobeSSLDVCertificationAuthority.crt, OCSP-URI:http://ocsp.globessl.com
                [X509v3 Subject Alternative Name] => DNS:www.remoteserver.com,DNS:remoteserver.com
                [Signature] => 61:38:06:d4:30:9c:14:a4:e5:1e:b2:c8:c4:..cut..
                [Cert] => -----BEGIN CERTIFICATE-----cut-----END CERTIFICATE-----

            )

        [1] => Array
            (
                [Subject] => Array
                    (
                        [C] => US
                        [O] => Globe Hosting, Inc.
                        [OU] => GlobeSSL DV Certification Authority
                        [CN] => GlobeSSL CA
                    )

                [Issuer] => Array
                    (
                        [C] => SE
                        [O] => AddTrust AB
                        [OU] => AddTrust External TTP Network
                        [CN] => AddTrust External CA Root
                    )

                [Version] => 2
                [Signature Algorithm] => sha1WithRSAEncryption
                [Start date] => 2010-06-22 00:00:00 GMT
                [Expire date] => 2020-05-30 10:48:38 GMT
                [Public Key Algorithm] => rsaEncryption
                [RSA Public Key] => 2048
                [rsa(n)] => a0:47:04:ce:a8:33:ab:..cut..
                [rsa(e)] => 01:00:01:
                [X509v3 Authority Key Identifier] => keyid:AD:BD:98:7A:34:B4:26:F7:FA:C4:26:54:EF:03:BD:E0:24:CB:54:1A
                [X509v3 Subject Key Identifier] => C3:AB:A0:02:F0:9B:F5:66:7F:28:15:92:22:95:DB:B8:4E:D3:93:08
                [X509v3 Key Usage] => CertificateSign,CRLSign
                [X509v3 Basic Constraints] => CA:TRUE,pathlen:0
                [X509v3 Certificate Policies] => Policy:1.3.6.1.4.1.6449.1.2.2.27
                [X509v3 CRL Distribution Points] => URI:http://crl.usertrust.com/AddTrustExternalCARoot.crl
                [Authority Information Access] => CAIssuers-URI:http://crt.usertrust.com/AddTrustExternalCARoot.p7c, CAIssuers-URI:http://crt.usertrust.com/AddTrustUTNSGCCA.crt, OCSP-URI:http://ocsp.usertrust.com
                [Signature] => 66:9c:13:6d:d2:7e:2c:..cut..
                [Cert] => -----BEGIN CERTIFICATE-----cut-----END CERTIFICATE-----

            )

    ) 
```

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-28T05:00:29.273

```
$ch=curl_init("https://default_cert");
curl_setopt($ch, CURLOPT_CAINFO, getcwd().'mydefault.cert');
curl_setopt ($ch,CURLOPT_CERTINFO,1);
curl_setopt ($ch,CURLOPT_VERBOSE,1);
curl_exec($ch) or die;
print_r( curl_getinfo($ch) ); 
```

在这种情况下，如果 mydefault.cert 包含不正确的 CN 或证书将被*中间人*欺骗， curl exec 将失败。

mydefault.cert 应该包含远程主机的证书。您必须使用受信任的渠道获取它（或者至少`CURLOPT_SSL_VERIFYPEER,FALSE`在您**确定**远程主机目前**受信任**时使用一次）。

一些理论：

*   **自签名证书**和**非自签名**证书之间的区别如下 -**自签名**是由人为自己签发的，它有密钥和证书部分，**而非自签名**也是由您信任的人签名的。它可以是证书中心，也可以是您最好的朋友，也可以是您的老板。如果您最好的朋友签发自签名证书并且您通过授权方式获得证书（他在磁盘上给您，或者使用自己的 pgp 密钥用它签署一封信，或者他从证书中间告诉它的 20 个字符），您可以使用它作为 CA 的证书。
*   *证书*本身是加密对的*公钥，**密钥*是该对的*私钥*。因此，站点执行以下操作 - 它使用*私钥*对自己的内容进行电子**签名**，另一端客户端使用*公钥*对内容进行**加密**。与使用 PGP 时相同。
*****   从服务器到客户端的数据使用加密算法之一加密，例如 ES、3DES、Blowfish、CAST128 或 Arcfour，客户端在客户端授权主机为受信任后由客户端初始化的算法密钥，该密钥由服务器的公钥*加密*（ https 的情况下的证书）之后，从客户端到服务器的数据也由该算法加密，如使用上述方案完成的密钥交换。****

 ****更多信息在[谷歌](https://www.google.com/search?q=ssl)

您可以使用此模式来欺骗服务器发送给客户端的任何数据吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-28T05:00:02.377

没有太多方法可以完全防止欺骗，但是，就像浏览器一样，您可以尝试验证证书的真实性。有关 SSL 证书如何工作的一些有用信息，请访问以下链接：

[如何验证 SSL 证书？](https://stackoverflow.com/questions/188266/how-are-ssl-certificates-verified)

现在，您可以做一些事情来确保您正在与正确的机器交谈，即使没有完全验证证书，但它们将要求您有权访问远程机器。最简单的事情之一就是使用加盐变量进行各种简单的握手。

例如，调用远程机器上生成唯一哈希的文件，例如，用您选择的单词加盐的时间戳，以及到目前为止您握手的次数。您的计算机将该哈希值与预期值匹配，并使用不同的盐执行相同的操作，将其发送回远程计算机，指示握手已完成，并且两台计算机都会增加它们的计数，以便下次哈希值不同。****

# sql - Lambda 表达式到 SQL 查询

> ID：13103946
> 
> 赞同：0
> 
> 时间：2012-10-27T20:32:16.837
> 
> 标签：sql, entity-framework, entity-framework-4, lambda

我正在尝试构建将删除指定表中与条件匹配的所有条目的方法。

```
 public void DeleteAll(Expression<Func<T, bool>> condition)
    {
        var service = PluralizationService.CreateService(new CultureInfo("en-US"));
        var tableName = service.Pluralize(typeof(T).Name);
        Context.Database.ExecuteSqlCommand(string.Format("DELETE FROM {0} WHERE {1}", tableName, condition));
    } 
```

目前这不起作用，因为我无法正确地将作为 lambda 表达式给出的条件转换为适合 WHERE 子句之后的有意义的 SQL 语法。我可以手动做一些事情，但我想知道是否有办法使用 .NET 框架提供的方法来完成。

# haskell - Haskell如何附加整数，如“.. ++ Integer ++ ...”

> ID：13103953
> 
> 赞同：3
> 
> 时间：2012-10-27T20:33:06.483
> 
> 标签：haskell, append, type-conversion

这是我的代码：

```
func :: Integer -> String
func i = "LoadC R" ++ i ++ "\n" 
```

但我得到了错误：

> 无法将预期类型“[Char]”与实际类型“Integer”匹配

如何转换`i`为字符？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-10-27T20:39:28.730

用于`show`将数字转换为字符串：

```
func :: Integer -> String
func i = "LoadC R" ++ show i ++ "\n" 
```

`show`适用于很多事情（但不是全部）。要实际打印这个，你需要做

```
main = putStr (func 5) 
```

或者如果您使用的是 ghci（我建议您*在*编写代码时经常使用它，并在编写完代码后立即测试所有内容），您可以编写

```
putStr (func 5) 
```

它会起作用。（我将在下面解释原因。）

如果您使用`putStrLn`而不是`putStr`它，则会在末尾添加一个额外的换行符。如果您想在打印的内容中添加新行，请将`\n`其放在您喜欢的任何位置。

```
func2 :: Integer -> String
func2 i = "\nLoadC \nR\n" ++ show i ++ "\n" 
```

里面有很多换行符。

为什么会`putStr`变成`\n`换行符？好吧，`putStr`并且`putStrLn`有类型`String -> IO ()`的含义，他们将给定的字符串转换为 IO 程序，并将其放在屏幕上。在 ghci 中，如果你给它一些 type `IO ()`，它会做到的。如果你给它其他类型的东西，它会`show`它，然后`putStr`它。这意味着如果您键入

```
"Hello\nMum" 
```

它具有相同的效果

```
putStrLn (show "Hello\nMum") 
```

而如果你想`\n`成为换行符，你需要做

```
putStrLn "Hello\nMum" 
```

`show`在将其放在屏幕上之前阻止 ghci对其进行处理。（如果你发现自己做了很多`putStr (show x)`，有一个捷径：`print x`。）

# twitter - Tweet 按钮在 IE9 中不起作用

> ID：13103955
> 
> 赞同：1
> 
> 时间：2012-10-27T20:33:15.227
> 
> 标签：twitter

Tweet 按钮在 Firefox、Chrome 和 Safari 中呈现，但在 IE9 中不呈现。

代码：

```
<!DOCTYPE html>

<a href="https://twitter.com/share" class="twitter-share-button" data-url="url" data-text="text">Tweet</a>

<script>!function(d,s,id) {
    var js,fjs=d.getElementsByTagName(s)[0];
    if (!d.getElementById(id)) {
        js=d.createElement(s);
        js.id=id;
        js.src="https://platform.twitter.com/widgets.js";
        fjs.parentNode.insertBefore(js,fjs);
    }
}
(document,"script","twitter-wjs");
</script> 
```

# ios - 如何在其中的内容（文本）数量之后缩放 UITableViewCell？

> ID：13103957
> 
> 赞同：1
> 
> 时间：2012-10-27T20:33:27.537
> 
> 标签：ios, uitableview

我如何实现这一目标？找不到有关此事的任何有用信息....我的应用程序中有一个论坛，根据帖子的大小，单元格的大小应根据文本量进行缩放...是否可以将其设置为故事板还是您被迫对其进行编程？/问候

**编辑**下面是我在 tableView 中的代码。单元格有 3 个标签，2 个或多或少是静态的（总是相同数量的文本），第 3 个是动态的（commentLabel），例如可以包含 1 行到 70 行之间的所有内容。现在我希望单元格在commentLabel的高度之后扩展......

```
#import "ForumthreadViewController.h"

@interface ForumthreadViewController ()

@end

@implementation ForumthreadViewController

@synthesize tableView;
@synthesize textField;

@synthesize refreshButton;

@synthesize forumThreadDataProvider;

@synthesize dateFormatter;

@synthesize items;
@synthesize taskId;
@synthesize forumThreadId;

- (void)viewDidLoad
{
[super viewDidLoad];

self.forumThreadDataProvider = [[MLForumThreadDataProvider alloc] initWithDelegate:self];

self.navigationItem.rightBarButtonItems = [NSArray arrayWithObjects:self.refreshButton, [self initLoadingIndicator], nil];

NSLocale *locale = [NSLocale currentLocale];
self.dateFormatter = [[NSDateFormatter alloc] init]; 
NSString *dateFormat = [NSDateFormatter dateFormatFromTemplate:@"E MMM d" options:0 locale:locale];
[self.dateFormatter setDateFormat:dateFormat];
[self.dateFormatter setLocale:locale];

[self refreshData];
}

- (void)viewDidUnload
{
[super viewDidUnload];
// Release any retained subviews of the main view.
}

- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
return (interfaceOrientation == UIInterfaceOrientationPortrait);
}

 - (BOOL)hidesBottomBarWhenPushed
{
return TRUE;
}

- (void)setLoadingState : (BOOL)loading
{
[super setLoadingState:loading];
if (loading)
{
    [self.refreshButton setEnabled:NO];
}
else
{
    [self.refreshButton setEnabled:YES];
}
}

 #pragma mark - Text field

- (void)textFieldDidBeginEditing:(UITextField *)pTextField
{
[self animateTextField: pTextField up: YES];
}

- (void)textFieldDidEndEditing:(UITextField *)pTextField
{
[self animateTextField: pTextField up: NO];
[pTextField resignFirstResponder];
}

- (void) animateTextField: (UITextField*) pTextField up: (BOOL) up
{
const int movementDistance = 215; // tweak as needed
const float movementDuration = 0.3f; // tweak as needed

int movement = (up ? -movementDistance : movementDistance);

[UIView beginAnimations: @"anim" context: nil];
[UIView setAnimationBeginsFromCurrentState: YES];
[UIView setAnimationDuration: movementDuration];
self.view.frame = CGRectOffset(self.view.frame, 0, movement);
[UIView commitAnimations];
}

- (BOOL)textFieldShouldReturn:(UITextField *)pTextField
{
[self setLoadingState:YES];
[pTextField resignFirstResponder];

NSUserDefaults *userStorage = [NSUserDefaults standardUserDefaults];

NSString *alias = [self urlEncode:[userStorage objectForKey:@"alias"]];
NSString *email = [self urlEncode:[userStorage objectForKey:@"email"]];
NSString *who = [self getUniqueDeviceId];
NSString *comment = [self urlEncode:[pTextField text]];

comment = [comment stringByTrimmingCharactersInSet:[NSCharacterSet whitespaceAndNewlineCharacterSet]];
who = [who stringByTrimmingCharactersInSet:[NSCharacterSet whitespaceAndNewlineCharacterSet]];

if([self isBlank:comment])
{
    [self setLoadingState:NO];
    pTextField.text = @"";
    return NO;
}
if([self isBlank:alias])
{
    [self showMessagePopup:NSLocalizedString(@"MessageMustChooseAlias", nil)];
    return NO;
}

[self.forumThreadDataProvider startSendPost:self.taskId : self.forumThreadId : alias : who : email : comment];

pTextField.text = @"";

return YES;
}

#pragma mark - Table view data source

- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView
{
return 1;
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
return [self.items count];
}

- (UITableViewCell *)tableView:(UITableView *)pTableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
static NSString *CellIdentifier = @"ForumthreadCell";
UITableViewCell *cell = [pTableView dequeueReusableCellWithIdentifier:CellIdentifier];

if (cell == nil)
{
    cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];

        }

Feedback *item = [self.items objectAtIndex:indexPath.row];

UILabel *aliasLabel = (UILabel *)[cell viewWithTag:1];
UILabel *commentLabel = (UILabel *)[cell viewWithTag:2];
UILabel *dateLabel = (UILabel *)[cell viewWithTag:3];

[aliasLabel setText:item.alias];
[commentLabel setText:item.comment];
[dateLabel setText:[self.dateFormatter stringFromDate:[NSDate dateWithTimeIntervalSince1970:(double)item.time]]];

commentLabel.numberOfLines = 0;
// commentLabel = [[[UILabel alloc] initWithFrame:CGRectZero] autorelease];
//commentLabel.lineBreakMode = UILineBreakModeWordWrap;
[commentLabel sizeToFit];

// CGSize constraint = CGSizeMake(300, 2000);
// CGSize size = [item.comment sizeWithFont:[UIFont boldSystemFontOfSize:11] constrainedToSize:constraint lineBreakMode:UILineBreakModeWordWrap];
//[commentLabel setFrame:CGRectMake(16, 30, 300, size.height)];

return cell;
}

- (CGFloat)tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath *)indexPath
{
UITableViewCell* cell = [tableView cellForRowAtIndexPath:indexPath];

if (cell) {        
    UILabel *commentLabel = (UILabel *)[cell viewWithTag:2];
    return commentLabel.frame.size.height;
}  
else
   return 30;
}

#pragma mark - Table view delegate

- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{

}

#pragma mark - Fetch data

- (IBAction) refreshData
{
[self setLoadingState:YES];
[self.forumThreadDataProvider startFetchResult:self.taskId : self.forumThreadId];

//[self fetchForumPosts:self.taskId : self.feedbackId];
}

 - (void) onFetchResultDone : (NSArray *) result
{
self.items = result;
[self.tableView reloadData];
[self setLoadingState:NO];
}

- (void) onCreatePostDone : (Result *) result
{
if ([result success])
{
    [self refreshData];
}
else
{
    [self showMessagePopup:[NSString stringWithFormat:NSLocalizedString(@"MessageErrorCreateForumPost", nil), result.code]];
}
[self setLoadingState:NO];
}

 - (void) onForumRequestFail : (NSError *) result
{
[self showNoConnectionPopup];
[self setLoadingState:NO];
} 
```

**错误图片：** [http ://tinypic.com/view.php?pic=1jssyc&s=6](http://tinypic.com/view.php?pic=1jssyc&s=6)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-27T22:00:01.977

恐怕您将不得不以编程方式执行此操作。

为此，您需要`tableView:heightForRowAtIndexPath:`在您的`UITableView`委托中实现。这将为您提供表格视图实例，以及相关行的索引路径。

**更新：**为此，您需要在创建单元格时根据其索引路径跟踪单元格的高度。您可以这样实现它：

```
@interface ForumthreadViewController() {
    NSMutableDictionary* m_cellHeights;
}
@end

// Init your dictionary in your init method using m_cellHeights = [NSMutableDictionary alloc] init];

- (UITableViewCell *)tableView:(UITableView *)pTableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    ...
    [commentLabel setText:item.comment];
    [dateLabel setText:[self.dateFormatter stringFromDate:[NSDate dateWithTimeIntervalSince1970:(double)item.time]]];

    commentLabel.numberOfLines = 0;
    // commentLabel = [[[UILabel alloc] initWithFrame:CGRectZero] autorelease];
    //commentLabel.lineBreakMode = UILineBreakModeWordWrap;
    [commentLabel sizeToFit];

    [m_cellHeights setObject:@(commentLabel.frame.size.height) forKey:indexPath];
    ...
}

- (CGFloat)tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath *)indexPath
{
    NSNumber* value = [m_cellHeights objectForKey:indexPath];

    if (value) {
        return [value floatValue];
    }

    return 0.0;
} 
```

**编辑：**通过查看您提供的代码，在哪里`UILabel`创建？

```
UILabel *aliasLabel = (UILabel *)[cell viewWithTag:1];
UILabel *commentLabel = (UILabel *)[cell viewWithTag:2];
UILabel *dateLabel = (UILabel *)[cell viewWithTag:3]; 
```

此代码试图从单元格中提取 UILabel，但在单元格生成代码中没有创建这些标签。您将需要按原样创建和添加它们（我曾经用来`...`防止从您的问题中重印过多的代码：

```
 - (UITableViewCell *)tableView:(UITableView *)pTableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
    {
    ...

    if (cell == nil)
    {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];

        UILabel* newAlias = [[UILabel alloc] initWithFrame:...]; // Provide the frame you need
        newAlias.tag = 1;
        [cell.contentView newAlias];

        // Do the same for date and comment
    }

    Feedback *item = [self.items objectAtIndex:indexPath.row];

    UILabel *aliasLabel = (UILabel *)[cell.contentView viewWithTag:1];
    UILabel *commentLabel = (UILabel *)[cell.contentView viewWithTag:2];
    UILabel *dateLabel = (UILabel *)[cell.contentView viewWithTag:3];

    ...

    return cell;
} 
```

# python - 用递归解决全括号表达式

> ID：13103965
> 
> 赞同：4
> 
> 时间：2012-10-27T20:34:29.580
> 
> 标签：python, recursion

我无法想出一种递归方法来解决完全带括号的方程......例如`((3+2)/(1+4))`。我能够想出一个递归解决方案来解决中缀表达式，比如`+*+3421`使用递归，但是对于像`((3+2)/(1+4))`我这样的东西有点卡住了。

```
def evalPrefix(exp):
    it = iter(exp)
    return evalPrefixInner(it)

def evalPrefixInner(it):
    item = it.next()
    if isInt(item):
        return int(item)
    else: 
        operand1 = evalPrefixInner(it)
        operand2 = evalPrefixInner(it)
        return execute(item, operand1, operand2) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-27T20:54:30.147

你的语法是：

```
expr ::= int | ( expr op expr ) 
```

正确的？

所以，忽略错误检查，比如......

```
def evalExpr(it):
    item = it.next()
    if isInt(item):
        return int(item)
    else: 
        //item should = lparen
        operand1 = evalExpr(it)
        op = it.next()        
        operand2 = evalExpr(it)
        rparen = it.next() 
        return execute(op, operand1, operand2) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-27T21:48:52.480

尝试[`shunting-yard algorithm`](http://en.wikipedia.org/wiki/Shunting-yard_algorithm)：

```
dic={"+": lambda x, y:x+y,
     "-": lambda x, y:x-y,
     "/": lambda x, y:x/y,
     "%": lambda x, y:x%y,
     "*": lambda x, y:x*y}

def algo(x, op=None, nums=None):
    if x != "":
        op = op if op else []
        nums = nums if nums else []
        item = x[0]
        if item in ("+","-","%","/","*"):
            op.append(item)
        if item.isdigit():
            nums.append(item)
        if item==")":
            operator = op.pop()
            opd1, opd2 = int(nums.pop()), int(nums.pop())
            ans = dic[operator](opd1, opd2)
            nums.append(ans)
        return algo(x[1:], op, nums)
    else:
        if op and nums:
            operator = op.pop()
            opd1, opd2 = int(nums.pop()), int(nums.pop())
            return dic[operator](opd1, opd2)
        else:
            return nums[-1]

print algo("((3+2)/(1+4))")  #output :1
print algo("((5+2)*3*(2+5))") #output :147 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-27T20:43:00.170

解析有效数据的输入，然后使用[`compiler`](http://docs.python.org/release/2.5.2/lib/module-compiler.html)模块解析表达式，如下所示：

```
import compiler
expr = compiler.compile(r'((3+2)/(4+1))', 'err', 'eval') 
```

然后你可以使用：

```
eval(expr) 
```

# java - 缓存空间查询

> ID：13103972
> 
> 赞同：4
> 
> 时间：2012-10-27T20:34:59.953
> 
> 标签：java, caching, gis, postgis

给定一个服务，它返回一些查询空间数据库的位置（纬度/经度）数据，我对使用内存缓存策略的好方法感兴趣，因为用例：

*   Lat/Long 值很难相同，因为由移动位置提供商返回
*   服务返回的数据是一些固定点的函数 -> 相似的位置返回相同的值。
*   我正在使用 Postgis/Java 来完成这项工作。

到目前为止，我最好的想法是使用例如第一个小数来标准化 lat/lng。但不确定是否有聪明的策略或一些地理信息系统支持。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-03-21T00:06:15.607

因此，您想使用 Java 应用程序作为缓存层来减少空间 PostGIS 数据库的负载吗？

是的，一种简单的方法是将世界网格化，-180、-90 右下角、左上角 180、90 右上角，并将传入的纬度/经度四舍五入到最接近的度数/整数。请取整而不是取整，因为它会在位置中引入较小的误差。

然后存储每个新网格位置的响应，因为它们进入。我会选择二维数组。

稍微复杂一点的解决方案是使用更小的双网格。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-11-25T14:50:32.500

Tarantool 1.6.4 具有 RTREE 内存索引，可用于最近邻和矩形内对象搜索。专门添加了该索引，以便能够充当针对 PostgreSQL 的空间查询的快速内存缓存。

# css - 无法定位首页保证金

> ID：13103977
> 
> 赞同：0
> 
> 时间：2012-10-27T20:35:37.817
> 
> 标签：css

你好，我已经在这工作了几个小时了。我的 CSS 知识开始到达那里。我似乎无法让我的首页内容左边距被覆盖。感谢所有帮助。

[我的首页](http://onlinebanter.com/)

我已经添加了-

> # 内容{填充：0 0px！重要；}

到页面，但无济于事。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-27T20:39:23.060

试试这个：

```
#content { padding: 0 !important; } 
```

或增加优先级

```
div#main-content div#content { padding: 0 !important; } 
```

我只是添加了 div#main-content 只是为了给予更多优先级，如果不需要最好将其删除

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-27T20:38:31.653

您的填充在这里介绍：

```
.block, #user-menu, #skip-nav, #branding, #search-box, #mission, #primary-menu, #secondary-menu, #attribution, #breadcrumb, #main-content-header, #content, #messages-and-help, #footer-message {
    padding: 0 10px;
} 
```

# html - CSS3下拉菜单z-index问题

> ID：13103982
> 
> 赞同：0
> 
> 时间：2012-10-27T20:36:33.077
> 
> 标签：html, css, drop-down-menu, css-transitions

我想创建 CSS3 多级下拉菜单，我在网上找到了一些示例。

我决定使用这个，因为它有很好的动画（不幸的是在现实生活用例中不能很好地工作）：[http ://www.alessioatzeni.com/wp-content/tutorials/html-css/CSS3-DropdownMenu/index .html](http://www.alessioatzeni.com/wp-content/tutorials/html-css/CSS3-DropdownMenu/index.html)

我的问题：

1.  我无法以任何方式修复二级 z-index 问题（它在第一个下拉列表的顶部开始动画，它应该在它的下方）。谁能指出我正确的方向？
2.  有没有更好的仅限 CSS3 的下拉菜单？我正在寻找适用于任意数量级别并且在所有分辨率下表现良好的东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-27T20:45:43.317

z-index 属性指定元素的堆栈顺序。具有较大堆栈顺序的元素始终位于具有较低堆栈顺序的元素之前。

尝试按从低到高的顺序给出 Z 指数。确保页面上的其他元素尚未定义 z-index。

如果这不起作用，我想看看您的页面/代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-28T02:53:16.067

z-index 比看起来更复杂。您的元素可能位于不同的“堆叠上下文”中，这意味着它们的 z-index 不会直接交互。在 DOM 层次结构中向上跟踪这两个冲突的元素，直到找到一个共同的祖先。开始在那里分配您的 z 索引，然后按原路返回。

这是一篇关于堆叠上下文的文章： [https ://developer.mozilla.org/en-US/docs/CSS/Understanding_z-index/The_stacking_context](https://developer.mozilla.org/en-US/docs/CSS/Understanding_z-index/The_stacking_context)

在下面的示例中，如果#content-wrapper 与#nav ul li 重叠，您将开始在#header 和#content 上设置z-index。根据其他 CSS 和标记，您可能需要继续使用 #nav 和 #content-wrapper 才能正常工作。

```
<div id="page">
  <div id="header">
    <div id="nav"><ul><li>etc</li></ul>
  </div>
  <div id="content">
    <div id="content-wrapper">
      Blah
    </div>
  </div>
</div> 
```

# javascript - 将 DatePicker 文本框转换为 javascript 日期

> ID：13103987
> 
> 赞同：3
> 
> 时间：2012-10-27T20:37:04.360
> 
> 标签：javascript, jquery, date, datepicker

我在 2 个文本框中有一个日期选择器，正在尝试将这些文本框的值添加到需要有效 Javascript 日期的函数中。

这是函数的一部分 - 开始是一个日期

```
 else if (daystosearch == 'custom') {
            start.setDate(Date.parse($('#<%= tStartDate.ClientID %>').val()));
            end.setDate(Date.parse($('#<%= tEndDate.ClientID %>').val()));
        } 
```

Date.Parse 不起作用，因为文本框的值是“10/29/2012”，它不是可解析的日期。如何使用`start.setDate`和获取文本框日期的值？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-27T20:43:02.063

如果文本框的值类似于“10/29/2012”，您应该可以使用：

```
var new_start = new Date($('#<%= tStartDate.ClientID %>').val()); 
```

但是，如果您尝试使用`setDate`，它接受的值是 1-31 的整数，因此您需要`getDate`在新的 Date 对象上使用，例如：

```
var new_start = new Date($('#<%= tStartDate.ClientID %>').val());
start.setDate(new_start.getDate()); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-27T20:41:22.733

使用 `$(selector).datepicker("getDate")`然后[`.getDate()`](http://www.w3schools.com/jsref/jsref_getdate.asp)抓住这一天。在你的情况下：

```
start.setDate($('#<%= tStartDate.ClientID %>').datePicker("getDate").getDate()); 
```

正如第一条评论所说，这将直接为您提供一个 Date 对象，而不管文本框中使用的字符串格式如何。看看[API 文档](http://api.jqueryui.com/datepicker/):)

**编辑**：正如 ianpgall 所指出的，您还需要使用 getDate() 来获取日期编号。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-27T20:45:52.223

使用来自 datepicker [http://docs.jquery.com/UI/Datepicker/parseDate的实用程序函数](http://docs.jquery.com/UI/Datepicker/parseDate)

```
$.datepicker.parseDate('yy-mm-dd', '2007-01-26'); 
```

# c# - 如何在 6 条记录后用“问号字符”替换 gridview 的值？

> ID：13103990
> 
> 赞同：2
> 
> 时间：2012-10-27T20:37:21.227
> 
> 标签：c#, asp.net, gridview

我正在使用 gridview 控件来显示记录。我希望从数据源中显示前 6 条记录。其余行（仅适用于 COL2 和 COL4）应替换为问号字符

像这样的东西。

```
COL1  COL2  COL3  COL4  COL5 

row1  row1  row1  row1  row1
row2  row2  row2  row2  row2
...
...
row6  row6  row6  row6  row6
row7   ?    row7   ?    row7
row8   ?    row8   ?    row8
row9   ?    row9   ?    row9 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-27T20:45:38.920

您可以使用[`RowIndex`](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.gridviewrow.rowindex.aspx)in`GridViewRow`将[`RowDataBound`](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.gridview.rowdatabound.aspx)单元格文本更改为`?`：

```
protected void gridView1_RowDataBound(Object sender, GridViewRowEventArgs e)
{
    if (e.Row.RowType == DataControlRowType.DataRow)
    {
        if(e.Row.RowIndex > 5)
        {
            e.Row.Cells[1].Text = "?";
            e.Row.Cells[3].Text = "?";
        }
    }
} 
```

# perl - 需要在str中放一个char

> ID：13103994
> 
> 赞同：1
> 
> 时间：2012-10-27T20:38:18.347
> 
> 标签：perl, random

我有一个字符串`$str = 'Hello my friends';`，我需要在`\`每个单词中添加一个字符并获得任何可能的变化。

例如在`stdout`我想得到

```
{H\ello|He\llo|Hel\lo|Hell\o} {m\y} {f\riens|fr\iends|fri\ends.....} 
```

我写了一些代码，但我无法想象接下来要做什么：

```
my $str = 'Hello my friends';
my @ra = split / /, $str;
for(my $i=0; $i < scalar @ra; $i++)
{
    my $word = $ra[$i];
    my $num = length($word);
    my @chars = split("", $word);

    for(my $k = 0, my $l = 1; $l < $num; $k++,$l++)
    {
        print $chars[$k]."\\".$chars[$l];   
    }

} 
```

有什么想法吗？=\

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-27T20:51:27.613

```
my $str = 'Hello my friends';
$str =~ s{(\S{2,})}{
    my @alts;
    for my $i (1..length($1)-1) {
        my $slashed = $1;
        substr($slashed, $i, 0, '\\');
        push @alts, $slashed;
    }
    '{' . join('|', @alts) . '}'
}eg; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-27T20:50:45.483

我建议您使用`substr`允许您提供第四个参数的工具，该参数提供一个新字符串，该字符串应该代替指定的子字符串。所以

```
my $string = 'ABCD';
substr $string, 2, 0, '\\'; 
```

将导致`$string`等于`AB\CD`。

该程序使用此程序为您的问题提供了解决方案

```
use strict;
use warnings;

my $str = 'Hello my friends';

my @words = split ' ', $str;
my @new_words;

foreach my $word (@words) {
  my @list
  for my $i (1 .. length($word) - 1) {
    substr my $new_word = $word, $i, 0, '\\';
    push @list, $new_word;
  }
  push @new_words, join '|', @list;
}

my $new_str = join ' ', map "{$_}", @new_words;

print $new_str; 
```

**输出**

```
{H\ello|He\llo|Hel\lo|Hell\o} {m\y} {f\riends|fr\iends|fri\ends|frie\nds|frien\ds|friend\s} 
```

# c - 在 C 中模拟线程死锁

> ID：13103999
> 
> 赞同：0
> 
> 时间：2012-10-27T20:39:14.700
> 
> 标签：c, multithreading, operating-system, deadlock

这只是更大模拟的开始。我们的想法是拥有 3 个线程和 2 个文件，并且在通常情况下会出现死锁，我专门对此进行了硬编码。

碰巧线程运​​行，然后进程在控制台上用 Abort 中止（核心转储）。我有下面的输出......这是死锁吗？我很抱歉没有以首选格式获得输出，但内存的回溯并不容易格式化。

```
Time Interval 4000250
*** glibc detected *** ./a.out: double free or corruption (out): 0x00007fa2dc000b00 *** 
 ======= Backtrace: =========
/lib/x86_64-linux-gnu/libc.so.6(+0x7e626)[0x7fa2e351d626]
/lib/x86_64-linux-gnu/libc.so.6(fclose+0x155)[0x7fa2e350d2a5]
./a.out[0x400a05]
/lib/x86_64-linux-gnu/libpthread.so.0(+0x7e9a)[0x7fa2e3863e9a]
/lib/x86_64-linux-gnu/libc.so.6(clone+0x6d)[0x7fa2e35914bd]
======= Memory map: ========
00400000-00401000 r-xp 00000000 07:00 163351                              /home/kartheek    /Desktop/a.out
00601000-00602000 r--p 00001000 07:00 163351                             /home/kartheek    /Desktop/a.out 
```

00602000-00603000 RW-P 00002000 07:00 163351/home/kartheek/desktop/a.out 00923000-00944000 RW-P 00000000 000000 00 000000 000 000000 0 [HEAP] 7FA2D4000000-7FA2D40000000000000000000000000000000000FA2DAD太平洋-p 00000000 00：00 0 7FA2DC0000000000000000000000000000000000000000..000000000000000000000000来/libgcc_s.so.1 7fa2e229c000-7fa2e249b000 ---p 00015000 07:00 4805 /lib/x86_64-linux-gnu/libgcc_s.so.1 7fa2e249b000-7fa2e249c000 r--p 00014000 07:00 07:00-linux lib/x86_6- -gnu/libgcc_s.so.1 7fa2e249c000-7fa2e249d000 rw-p 00015000 07:00 4805 /lib/x86_64-linux-gnu/libgcc_s.so。1 7fa2e249d000-7fa2e249e000 ---p 00000000 00:00 0 7fa2e249e000-7fa2e2c9e000 rw-p 00000000 00:00 0 7fa2e2c9e000-7fa2e2c9f000 ---p 00000000 00:00 0 7fa2e2c9f000-7fa2e349f000 rw-p 00000000 00:00 0 7fa2e349f000-7fa2e3652000 r-xp 00000000 07:00 4784 /lib/x86_64-linux-gnu/libc-2.15.so 7fa2e3652000-7fa2e3851000 ---p 001b3000 07:00 4784 /lib/x86_64-linux-gnu/libc-2.1500-7fa2e38 7fa2e3855000 r--p 001b2000 07:00 4784 /lib/x86_64-linux-gnu/libc-2.15.so 7fa2e3855000-7fa2e3857000 rw-p 001b6000 07:00 4784 /lib/x86_604-linux-gnu/c86_604-linux-gnu/fae/lib. -7fa2e385c000 rw-p 00000000 00:00 0 7fa2e385c000-7fa2e3874000 r-xp 00000000 07:00 4864 /lib/x86_64-linux-gnu/libpthread-2.15.so --- 7fa2e38730000-7fa2e3840000-7fa2e3a00 4864 /lib/x86_64-linux-gnu/libpthread-2.15.so 7fa2e3a73000-7fa2e3a74000 r--p 00017000 07:00 4864 /lib/x86_64-linux-gnu/libpthread-2.15.so 7fa2e3a740000-7fa2e0r307a :00 4864 /lib/x86_64-linux-gnu/libpthread-2.15.so 7fa2e3a75000-7fa2e3a79000 rw-p 00000000 00:00 0 7fa2e3a79000-7fa2e3a9b000 r-xp 00000000/07:064-linux/ld-lib/4-linux 2.15.so 7fa2e3c80000-7fa2e3c83000 rw-p 00000000 00:00 0 7fa2e3c97000-7fa2e3c9b000 rw-p 00000000 00:00 0 7fa2e3c9b000-7fa2e3c9c000 r--p 00022000 07:00 4764 /lib/x86_64-linux-gnu/ld-2.15.所以 7fa2e3c9c000-7fa2e3c9e000 rw-p 00023000 07:00 4764 /lib/x86_64-linux-gnu/ld-2.15.so 7fffa77ef000-7fffa7810000 rw-p 00000000 00：00 0 [堆栈] 7fffa784f000-7fffa7850000 r-xp 00000000 00:00 0 [vdso] ffffffffff600000-ffffffffff601000 r-xp 00000000 00:00 0 [vsyscall] 中止（核心转储）

我不知道这在输出中意味着什么，但它说 Aborted 的事实让我认为我可能很接近。

该代码的工作方式如下：

创建线程 Thread1 访问 file1 并以写入模式等待 Thread2 也访问 file1 并尝试对其进行更改，然后这就是发生的事情

现在，下一步是创建一个以更高优先级运行的监视器线程。无论如何允许死锁发生然后释放它？我的意思是，我想到了一种解决方案，在互斥条件的帮助下，我们可以检查冲突情况，但这将避免死锁，这是我不想要的。有没有办法让死锁发生然后阻止程序中止，以便监控线程可以相应地释放资源？？？

这是代码。再次为格式化道歉。

```
#include<stdio.h>
#include<stdlib.h>
#include<pthread.h>
#include<unistd.h>
#include<sched.h>

FILE *fp1;
FILE *fp2;
struct sched_param schedparam1,schedparam2,schedparam3;
int policy=SCHED_RR;
int mutex1[3]= {0,0,0},mutex2[3]= {0,0,0};

void *routine1(void *arg)
{
int a;
printf("before");
fp1= fopen("file1.txt", "w");
usleep(250000);
printf("woke up");
fp2= fopen("file2.txt", "w");
a=fclose(fp1);
printf("%d\n",a);
fclose(fp2);
}

void *routine2(void *arg)
{
printf("asdasd");
fp2=fopen("file2.txt",  "w");
fp1=fopen("file1.txt",  "w");
fclose(fp1);
fclose(fp2);
} 
```

//void *monitor_function(void *arg) //{

```
void main()
{
pthread_t thread1, thread2, thread3,thread4;
pthread_attr_t at1,at2,at3;
int iret1, iret2,iret3,iret4;
struct timespec tp;
schedparam1.sched_priority = 10;
sched_setscheduler(getpid(),policy,&schedparam1);
sched_rr_get_interval(getpid(),&tp);

printf("\nTime Interval %ld\n",tp.tv_nsec);
\
printf("test");

schedparam1.sched_priority = 10; //Set Nice value of Thread
schedparam2.sched_priority = 10;
schedparam3.sched_priority = 10;

/* Set attributes*/

pthread_attr_init(&at1);
pthread_attr_setinheritsched(&at1, PTHREAD_INHERIT_SCHED); // To inherit parent thread     properties use PTHREAD_INHERIT_SCHED
pthread_attr_setschedpolicy(&at1, policy);
pthread_attr_setschedparam(&at1, &schedparam1);

pthread_attr_init(&at2);
pthread_attr_setinheritsched(&at2, PTHREAD_INHERIT_SCHED);
pthread_attr_setschedpolicy(&at2,policy);
pthread_attr_setschedparam(&at2, &schedparam2);

pthread_attr_init(&at3);
pthread_attr_setinheritsched(&at3, PTHREAD_INHERIT_SCHED);
pthread_attr_setschedpolicy(&at3, policy);
pthread_attr_setschedparam(&at3, &schedparam3);

//iret1 = pthread_create( &thread1, &at1, monitor_function,NULL);

iret2 = pthread_create( &thread2,&at1, routine1,NULL);
iret3 = pthread_create( &thread3,&at2, routine2,NULL);
//iret4 = pthread_create( &thread4,&at3, NULL,NULL);

pthread_join( thread2, NULL);
pthread_join( thread3, NULL);
//pthread_join( thread1, NULL);

printf("\nThread create 1 returns: %d\n",iret1);

printf("Thread create 2 returns: %d\n",iret2);
printf("Thread create 3 returns: %d\n",iret3);
exit(0);

//fp1= fopen("file1.txt", "w");
//fp2= fopen("file2.txt", "w");

} 
```