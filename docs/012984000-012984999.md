# StackOverflow 问答 12984000-12984999

# r - 从 R 中的 dat 文件中绘制数据

> ID：12984000
> 
> 赞同：0
> 
> 时间：2012-10-20T00:03:08.673
> 
> 标签：r, plot

我正在阅读 R 手册，其中包含文件中的以下数据：

```
0.319132782  0.808869293
0.612725533  0.932766104
0.205770354  0.695866667
0.395410972  1.044069042
0.449560874  0.932377679
0.532886257  1.009741399 
```

数据由每个数字之间的几个空格分隔。它是一个 .dat 文件 在示例的一部分中，作者想要绘制数据并放置：

```
plot(all.x,all.y,xlab="x",ylab="y") 
```

我已阅读该文件：

```
all<-read.table("examples.dat",header=F) 
```

对于 all.x 和 all.y 的引用，我使用

```
all.x<-all[1]
all.y<-all[2] 
```

问题是当我绘图时出现条形图错误，这是为什么呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T00:19:51.767

您始终可以使用其 colID 引用数据框中的列。见下文：

`plot(all[,1],all[,2],xlab="x",ylab="y")`

# git - Github Pull-Request 有 1k 提交而不是我的 1 提交

> ID：12984001
> 
> 赞同：0
> 
> 时间：2012-10-20T00:03:09.660
> 
> 标签：git, github

如何从我的拉取请求中删除所有先前的提交？

我已经尝试了分支和樱桃挑选以及重置和拉动的无尽组合，但似乎没有任何工作......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-20T00:47:35.637

好吧，您最近的拉取请求只会对该请求进行更改。您只想删除其他提交吗？

你可以做`rm .git`

然后`git init`

然后`git push`到一个新的回购。

# sencha-touch - 使用 Sencha Touch 2 右对齐和连接字符串

> ID：12984002
> 
> 赞同：0
> 
> 时间：2012-10-20T00:03:11.033
> 
> 标签：sencha-touch, sencha-touch-2

关于使用 Sencha Touch 2 的组件布局，我有两个问题：

*   如何正确对齐容器中的文本？
*   如何将与静态数据混合的不同位动态数据连接到需要换行的组件中？

我有一个视图，我想像这样渲染：

![所需的视图布局](../Images/dd98cbd64d070264cd07d7cd4a6a2e11.png)

其中“Seen:”文本是静态且右对齐的，右侧的文本是由 3 段动态文本和 2 段静态文本拼接而成的字符串。

我有一些有用的东西，但感觉不对。

```
xtype:'container',
    layout:{
    type:'hbox'
},
items:[
    {
        xtype:'container',
        flex:1,
        layout:{
            type:'hbox'
        },
        items:[
            {
                xtype:'spacer',
                layout:'fill'
            },
            {
                xtype:'label',
                layout:'fit',
                html:'Seen:'
            }
        ]
    },
    {
        xtype:'label',
        name:'contentLabel',
        flex:5,
        html:'[BUILD A STRING AND SET THE HTML HERE]'
    }
] 
```

**右对齐**

所以为了使文本右对齐，我基本上使用了一个 hbox 容器，左边有一个间隔组件，右边有一个标签。必须有一个更简单的方法。

**连接**

我能够构建我想放在右边的字符串，但我宁愿有多个标签，我可以与我的模型一对一地映射。对我来说，必须编写代码来连接字符串并不像 MVC。

我尝试将右侧拆分为一个 hbox，但换行存在问题。每个标签都想单独呈现自己，所以如果有包装，它会在自己的容器中发生。

有没有更简单的方法来做我正在尝试的事情？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T15:20:03.437

**右对齐：**可以通过`text-align`CSS 属性来完成。在下面的示例中，`style`为了简单起见，我使用该属性，但使用该`cls`属性会更加灵活——它为组件添加了一个 CSS 类，因此您可以在 .sass 文件中设置它的样式。

**连接：**您可以使用标准的`join()`Javascript 函数。它使用给定的分隔符将数组的所有元素连接成一个字符串。在我的示例中，dynamic1 和 dynamic2 是变量。

所以结果代码：

```
xtype: 'container',
layout: {
    type: 'hbox'
},
items: [
    {
        xtype: 'label',
        flex: 1,
        html: 'Seen:',
        style: 'text-align:right'
    },
    {
        xtype: 'container',
        flex: 5,
        html: ['static1', 'static2', dynamic1, 'static3', dynamic2].join('')
    }
] 
```

编辑

您还可以使用该`tpl`属性来定义呈现`data`属性的模板。您可以通过调用 container.setData() 以编程方式对其进行更新

```
xtype: 'container',
layout: {
    type: 'hbox'
},
items: [
    {
        xtype: 'label',
        flex: 1,
        html: 'Seen:',
        style: 'text-align:right'
    },
    {
        xtype: 'container',
        flex: 5,
        data: {
            name: 'Harry Potter',
            day: 'Saturday',
            date: 'October 21, 2011'
        },
        tpl: [
            '{name} on {day} {date}'
        ]
    }
] 
```

# python - Python中混合多处理和线程的现状

> ID：12984003
> 
> 赞同：25
> 
> 时间：2012-10-20T00:03:22.470
> 
> 标签：python, multithreading, logging, multiprocessing, locks

关于问题 6721，在 Linux 中的同一 python 应用程序中使用多处理和用户线程的最佳实践或解决方法是什么，python 标准库中的锁应该在 fork 上进行清理？

为什么我两者都需要？我使用子进程进行繁重的计算，产生的数据结构结果太大而无法通过队列返回——而是必须立即将它们存储到磁盘。让这些子进程中的每一个由一个单独的线程监控似乎很有效，这样当完成时，线程可以处理将大（例如，多 GB）数据读回需要结果以进行进一步计算的进程的 IO结合其他子进程的结果。子进程会间歇性地挂起，我刚刚（经过多次头部撞击）发现这是使用日志模块“引起”的。其他人在这里记录了这个问题：

[https://twiki.cern.ch/twiki/bin/view/Main/PythonLoggingThreadingMultiprocessingIntermixedStudy](https://twiki.cern.ch/twiki/bin/view/Main/PythonLoggingThreadingMultiprocessingIntermixedStudy)

这指向了这个显然未解决的python问题：python标准库中的锁应该在fork上进行清理； [http://bugs.python.org/issue6721](http://bugs.python.org/issue6721)

我对追踪这件事的困难感到震惊，我回答说：

[有什么理由不在 Python 中混合多处理和线程模块](https://stackoverflow.com/questions/6244401/are-there-any-reasons-not-to-mix-multiprocessing-and-threading-module-in-python)

带有对“小心”的相当无益的建议和指向上述内容的链接。

但是冗长的讨论：问题 6721 表明在同一应用程序中同时使用多处理（或 os.fork）和用户线程是一个“错误”。由于我对这个问题的理解有限，我在讨论中发现太多分歧，无法得出在同一应用程序中同时使用多处理和线程的解决方法或策略是什么。我的直接问题通过禁用日志记录得到了解决，但是我在父进程和子进程中创建了少量其他（显式）锁，并且怀疑我正在为进一步的间歇性死锁做好准备。

你能给出实用的建议来避免在 python (2.7,3.2,3.3) 应用程序中使用线程和多处理时使用锁和/或日志模块时出现死锁吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-29T03:24:24.150

如果您在程序中仍然只有一个线程（即，在产生工作线程之前从主线程分叉）时分叉其他进程，您将是安全的。

您的用例看起来甚至不需要多处理模块；您可以使用子进程（甚至更简单的类似 os.system 的调用）。

另请参阅[从线程内分叉是否安全？](https://stackoverflow.com/questions/6078712/is-it-safe-to-fork-from-within-a-thread)

# android - 试图让 monkeyrunner 包含一个外部 .py 文件

> ID：12984004
> 
> 赞同：2
> 
> 时间：2012-10-20T00:03:23.137
> 
> 标签：android, python, jython, monkeyrunner

我试图让 monkeyrunner 接受外部 .py 文件。.py 文件只有一些功能，没什么特别的。

主脚本.py：

```
import unittest

import logging
import sys
sys.path.append("C:\path\to\helperscripts\")
from monkeyHelper import monkeyHelper

#log to STDERR
logging.basicConfig(level=logging.DEBUG)

class TestDepthOneFunctions(unittest.TestCase):  

def setUp(self):
    mh = monkeyHelper()
    self.device = mh.setupDevice()
    #monkeyHelper.setupDevice()

def test_myMusic(self):
    self.assertEqual(self.device,3)

def tearDown(self):
    pass

if __name__ == '__main__':
    unittest.main() 
```

猴子助手.py：

```
from com.android.monkeyrunner import MonkeyRunner, MonkeyDevice
import logging
import sys

class monkeyHelper(object):

    def __init__(self):
        return

    def setupDevice(self):
        return 3 
```

我试过只运行#>monkeyrunner.bat mainscript.py，但它不起作用。我已经看到了 monkeyrunner.bat 输出的完整命令行 - 有没有办法将 C:\path\to\helperScripts 添加到该命令行？这是 monkeyrunner.bat 吐出的内容：

```
C:\Windows\system32\java.exe -Xmx512m -Djava.ext.dirs=lib\;lib\x86_64 -Dcom.android.monkeyrunner.bindir=..\framework -jar lib\monkeyrunner.jar mainscript.py 
```

我得到的错误是：

```
import monkeyHelper
ImportError: No module named monkeyHelper 
```

我整天都在反对这个 - 任何帮助表示赞赏！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-20T19:21:01.187

由于您不能将 \ 随机放入字符串中，请尝试：

```
sys.path.append(r"C:\path\to\helperscripts") 
```

这`r`意味着该字符串将被视为原始字符串，这意味着所有转义码都将被忽略。

还要确保 helperMonkey.py 在该路径中，

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T10:21:24.470

如果你使用monkeyrunner，你可以在下面添加一个文件夹'lib'

```
C:\Documents and Settings\<user name>\Local Settings\Application Data\Android\android-sdk\tools\lib' 
```

然后把你的py文件放在

```
C:\Documents and Settings\<user name>\Local Settings\Application Data\Android\android-sdk\tools\lib\lib 
```

如果您的文件名为 myPyFile.py

只是

```
from myPyFile import * 
```

更新：注意如果您要更新Android SDK工具，请先备份您的文件，上次更新时，我的lib中的文件被删除了。

# oracle - 开始日期和结束日期之间的工作日计算（包括时间部分），不包括周末和自定义/业务特定假期

> ID：12984009
> 
> 赞同：0
> 
> 时间：2012-10-20T00:03:52.063
> 
> 标签：oracle, oracle10g, oracle11g

你能帮我计算一下吗？开始日期和结束日期之间的工作日数，不包括周末和特定业务假日。假设我们采用开始日期、结束日期和自定义假期表以及下面提到的假期日期列表。

**开始日期 (mm/dd/yyyy hh24:mi:ss)** : '10/15/2012 08:00:00'

**结束日期 (mm/dd/yyyy hh24:mi:ss)** : '10/23/2012 10:30:00'

**holiday_table.business_holiday_date 值（月/日/年）**：

2012 年 10 月 17 日

2012 年 10 月 19 日

2012 年 10 月 22 日

需要通过考虑计算中日期的时间部分来计算工作日（因此可以预期带有分数的工作日，例如 1.25、3.7 等）

感谢您能尽快帮助我。

-詹姆士

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-21T09:42:26.927

尝试：

```
SELECT(end_date - start_date) - 
(select count(*) 
 from holiday_table 
 where business_holiday_date >= start_date
 and business_holiday_date <= end_date)
FROM dual 
```

[这](http://www.sqlfiddle.com/#!4/1e7a5/7)是一个小提琴

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-21T15:11:51.687

我有一个只使用 2 个日期的函数，但你可以改进它。干得好...

1.  首先检查您在假期表中有多少天，不包括周末。
2.  获取两个日期之间的工作日（周一至周五），然后减去假期。

    ```
    create or replace
    FUNCTION calculate_business_days (p_start_date IN DATE, p_end_date IN DATE)
            RETURN NUMBER IS
            v_holidays     NUMBER;
            v_start_date   DATE   := TRUNC (p_start_date);
            v_end_date     DATE   := TRUNC (p_end_date);
            BEGIN
            IF v_end_date >= v_start_date
            THEN
                    SELECT COUNT (*)
                    INTO v_holidays
                    FROM holidays
                    WHERE day BETWEEN v_start_date AND v_end_date
                    AND day NOT IN (
                            SELECT hol.day 
                            FROM holidays hol 
                            WHERE MOD(TO_CHAR(hol.day, 'J'), 7) + 1 IN (6, 7)
                    );

            RETURN   GREATEST (NEXT_DAY (v_start_date, 'MON') - v_start_date - 2, 0)
                 +   (  (  NEXT_DAY (v_end_date, 'MON')
                         - NEXT_DAY (v_start_date, 'MON')
                        )
                      / 7
                     )
                   * 5
                 - GREATEST (NEXT_DAY (v_end_date, 'MON') - v_end_date - 3, 0)
                 - v_holidays;
            ELSE
                    RETURN NULL;
            END IF;
    END calculate_business_days; 
    ```

之后，您可以对其进行测试，例如：

```
 select 
            calculate_business_days('21-AUG-2013','28-AUG-2013') as business_days 
    from dual; 
```

# mono - 如何使用 PackageMaker 或 MonoMac 要求/添加对 Mono 的依赖项？

> ID：12984010
> 
> 赞同：0
> 
> 时间：2012-10-20T00:03:52.203
> 
> 标签：mono, packagemaker, monomac

我正在构建一个由四个 .app 包组成的应用程序：一个启动器、一个客户端、一个服务器管理器和一个运行时。

启动器的 .app 分布在 MonoMac 打包选项生成的 .pkg 文件中。其他 .app 文件由启动器下载/自动更新为 ZIP。

在每个 .app 文件中捆绑 Mono 的副本会浪费带宽/磁盘空间，但更重要的是，我有一个 Mono 服务器 .exe 文件，它是跨平台的，因此不会进来.app 包也不应该打包任何特定于平台的 DLL。因此，捆绑 Mono 的私有副本不是一种选择。

有没有办法让我创建一个对全局安装的 Mono 有依赖/要求的 .pkg 文件？

我看到 PackageMaker 有一个可以运行脚本的需求窗格，但我不知道如何正确检查 Mono 是否已安装，而不依赖于一些硬编码路径和类似的东西。

我想让安装程序检查是否安装了 Mono，如果没有安装，请安装它（或者，如果失败，则显示一条消息，其中包含指向 Mono 网站的链接）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T03:32:57.240

我最终切换到[Packages](http://s.sudre.free.fr/Software/Packages/about.html)，这是一个非常简洁的工具。

我添加了“Shell 脚本返回 true”类型的预安装要求。我的 shell 脚本只是使用“which”命令检查“mono”可执行文件：

```
#!/bin/bash
which mono
$(exit $?) 
```

当脚本返回 false 时，我将 Packages 配置为输出一条信息性错误消息，其中包含下载 Mono 的链接（因为缺少触发下载/安装 Mono 的方法）。

# visual-studio - 为什么 Visual Studio 使用 std::iterator<> 而不是 mine::iterator<>

> ID：12984012
> 
> 赞同：0
> 
> 时间：2012-10-20T00:04:14.307
> 
> 标签：visual-studio, compiler-construction, stl, constructor, include

几天来，我一直试图找出这个问题，并在将所有内容剥离到下面的代码后终于弄清楚了。您将在下面的代码中看到 const_iterator 的构造函数的三种不同尝试，以及我在其中两个上遇到的错误。在我看来，编译器正在尝试使用 std::iterator 而不是本地声明的 mine::iterator。应该是这样吗？

其他提供线索的花絮：

*   如果我将 mine::iterator 命名为其他名称，例如 mine::B，则`const_iterator(const B &rhs)`可以。

*   如果我从 std::iterator 以外的类派生 const_iterator，则`const_iterator(const iterator<T> &rhs)`可以。

感谢您提供任何信息。这是代码：

```
#include "stdafx.h"
#include <iterator>

namespace mine 
{

   template <class T>
   class iterator : public std::iterator<std::random_access_iterator_tag, T, ptrdiff_t, T*, T&>
   {
   public:
      iterator() {}
   };   

   template <class T>
   class const_iterator : public std::iterator<std::random_access_iterator_tag, T, ptrdiff_t, const T*, const T&>
   {
   public:
      const_iterator() {} 
      const_iterator(const mine::iterator<T> &rhs) {} // works
      //const_iterator(const iterator &rhs)        {} // error C2440: initializing: cannot convert from 'mine::iterator<T>' to 'mine::const_iterator<T>'
      //const_iterator(const iterator<T> &rhs)     {} // error C2976: std::iterator: too few template arguments
   }; 

}// namespace mine

using namespace mine;

int _tmain(int argc, _TCHAR* argv[])
{
   iterator<int> y;
   const_iterator<int> x = y;

   return 0;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-20T11:06:36.227

首先' `using namespace`'是邪恶的，使用`typedef`是为了方便。例如，不要说迭代器，而是使用 mine::iterator。

您的第二点也给出了您问题的答案。“如果我从 std::iterator 以外的类派生 const_iterator，那么就`const_iterator(const iterator<T> &rhs)`可以了。”

这里最近的迭代器属于`std`not `mine`，`std::iterator`你的`const_iterator`.

# django - 如何更改 modelForm 选择字段的 empty_label？

> ID：12984013
> 
> 赞同：20
> 
> 时间：2012-10-20T00:04:26.503
> 
> 标签：django, django-forms

我的一个模型中有一个字段，如下所示：

```
 payrollProvider = models.CharField(max_length=2, choices=PAYROLL_CHOICES)
 PAYROLL_CHOICES = (
        ('C1', 'Choice1'),
        ('C2', 'Choice2')
        etc.....
                    ) 
```

当我为此字段创建模型表单时，Django 正确生成了一个 HTML 选择框，但包含一个默认的空白值“----------”。

我想知道如何将此默认值更改为其他文本，例如“请选择值”。

我相信我应该能够通过以下方式在我的模型表单的**init**中进行设置，如[本答案](https://stackoverflow.com/questions/739260/customize-remove-django-select-box-blank-option "这个答案")和其他几个文件中所述：

```
self.fields['payrollProvider'].empty_label = "please choose value" 
```

但是，这对我不起作用。当我在表单的**init**中包含该行时，“--------”仍然显示为选择框中的初始选项。我在下面粘贴相关的 forms.py ，但似乎其他人[也无法访问/修改 empty_label](https://stackoverflow.com/questions/8928565/django-cant-remove-empty-label-from-typedchoicefield)。在这个链接上，提问者描述了一种*删除*默认 empty_label 值的方法（我能够通过他的方法成功地做到这一点），但我真正想做的是*修改*显示的 empty_label。

有任何想法吗？

这是 forms.py 中表单的代码，其中的 empty_label 代码无法成功更改默认“----------”：

```
class PayrollCredentialForm(forms.ModelForm):
    def __init__(self, *args, **kwargs):
        super(PayrollCredentialForm, self).__init__(*args, **kwargs)
        self.fields['payrollUsername'].widget.attrs.update({'class' : 'yp-signup'})
        self.fields['payrollPassword'].widget.attrs.update({'class' : 'yp-signup'})
        self.fields['payrollProvider'].widget.attrs.update({'class' : 'yp-signup'})
        self.fields['payrollUsername'].widget.attrs.update({'placeholder' : '  Payroll Username'})
        self.fields['payrollPassword'].widget.attrs.update({'placeholder' : '  Payroll Password'})
        self.fields['payrollProvider'].empty_label = "please choose value"

class Meta:
    model = Company
    fields = ('payrollProvider', 'payrollUsername', 'payrollPassword')
    widgets = {
        'payrollPassword': forms.PasswordInput(),
    } 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-12-25T16:36:30.430

dokkaebi，那将无法正常工作。您将收到以下*选择*代码：

```
<select name="payrollProvider" id="id_payrollProvider">
<option value="" selected="selected">---------</option>
<option value="" selected="selected">please choose value</option>
<option value="C1">Choice1</option>
<option value="C2">Choice2</option>
</select> 
```

我想到的唯一相对方便的方法是以以下形式执行以下操作：

```
class PayrollCredentialForm(forms.ModelForm):
    class Meta:
        model = Company
    def __init__(self, *args, **kwargs):
        super(PayrollCredentialForm, self).__init__(*args, **kwargs)
        self.fields["payrollProvider"].choices = [("", "please choose value"),] + list(self.fields["payrollProvider"].choices)[1:] 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2016-11-29T14:39:25.673

实际上，现在（对于**Django** `1.8`和更高版本）覆盖了一个`empty_label`作品：

```
class PayrollCredentialForm(forms.ModelForm):
    def __init__(self, *args, **kwargs):
        super(PayrollCredentialForm, self).__init__(*args, **kwargs)
        self.fields['payrollProvider'].empty_label = 'Please, choose value' 
```

此外，如果您使用**Django Admin**，则可以选择为列表视图设置空值：

```
class PayrollCredentialAdmin(admin.ModelAdmin):
    list_display = ('payrollProvider_value', )

    def payrollProvider_value(self, instance):
        return instance.payrollProvider
    payrollProvider_value.empty_value_display = 'Empty value' 
```

* * *

**如果字段应该是`readonly`什么？**

如果以这种方式修改的字段应该是，则有一个问题`readonly`。

`readonly_fields`如果在类内的属性中指定覆盖的表单字段`PayrollCredentialAdmin`，则会导致`KeyError`异常`PayrollCredentialForm`（因为`readonly`字段不会包含在表单中`self.fields`）。为了处理这个问题，需要覆盖`formfield_for_dbfield`而不是使用`readonly_fields`：

```
def formfield_for_dbfield(self, db_field, **kwargs):
    field = super(PayrollCredentialAdmin, self).formfield_for_dbfield(
        db_field, **kwargs
    )
    db_fieldname = canonical_fieldname(db_field)

    if db_fieldname == 'payrollProvider':
        field.widget = forms.Select(attrs={
            'readonly': True, 'disabled': 'disabled',
        })

    return field 
```

可能有用。

* * *

**Django** 更新`1.11`：

下面的评论带来了这样的假设，即这种覆盖对于较新版本的 Django 不再有效。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-10-20T01:20:40.603

问题是您正在尝试指定不适用于 Select 字段类型的内容。

empty_label 选项适用于 forms.ModelChoiceField，它恰好使用 Select 小部件，但与您提供选项的 CharField 的字段类型不同。

[https://docs.djangoproject.com/en/dev/ref/forms/fields/#modelchoicefield](https://docs.djangoproject.com/en/dev/ref/forms/fields/#modelchoicefield)

您也可以在此处的上一个问题中看到这一点：[https ://stackoverflow.com/a/740011/1406860](https://stackoverflow.com/a/740011/1406860)

您可以尝试覆盖模型表单的 html 以将第一个选项添加为“请选择值”。或者，您可以使用模板过滤器来做同样的事情。最后，您可以 and ("", "please choose value") 到 PAYROLL_CHOICES，如果您不希望在没有 payrollProvider 的情况下提交它，只需为模型中的字段设置空白 = False。

京东

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2017-05-26T07:03:53.537

在您的 forms.py 文件中，这肯定会起作用..试试这个...

```
 class Meta:
        model = StaffDetails
        fields =['photo','email', 'first_name','school','department', 'middle_name','last_name','gender', 'is_active']
     def __init__(self, *args, **kwargs):
        super(StaffDetailsForm, self).__init__(*args, **kwargs)
        self.fields['Field_name'].empty_label = 'Please Select' 
```

它对我有用..只需将字段名称替换为您的...

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-20T01:14:40.793

仅`ModelChoiceField`（为`ForeignKey`字段生成）支持该`empty_label`参数，在这种情况下很难获得，因为这些字段通常是`django.forms.models.ModelFormMetaclass`在调用`django.forms.models.modelform_factory`.

`ModelFormMetaclass`使用`empty_label`参数将另一个选项添加到列表中，`empty_label`作为显示和`''`作为它的值。

做你想做的最简单的方法就是在你的选择列表中添加一个空选项：

```
PAYROLL_CHOICES = (
        ('', 'please choose value'),
        ('C1', 'Choice1'),
        ('C2', 'Choice2'),

        etc.....
                    ) 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2020-05-24T08:36:02.110

另一个对我有用的简单方法是：

```
country = forms.ModelChoiceField(queryset=Country.objects.filter(), empty_label='--Select--') 
```

但是，我的 Django 版本是 2.2.7

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-08-05T09:39:14.053

改编自[Javed](https://stackoverflow.com/questions/12984013/how-to-change-empty-label-for-modelform-choice-field/68664171#answer-44195598)的答案。由于我的表单中有大量字段，我只想用占位符替换 html 中的所有标签，因此对于选择标签，我使用它们的字段标签。

```
class PacienteForm(forms.ModelForm):

    class Meta:
        model=Paciente
        fields=('__all__')

    def __init__(self, *args, **kwargs):
        super(PacienteForm, self).__init__(*args, **kwargs)

        for f in self.fields:
            if hasattr(self.fields[f], 'choices'):
                choices=self.fields[f].choices
                if type(choices) == list:
                    choices[0]=('',self.fields[f].label)
                    self.fields[f].choices=choices 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2021-12-26T13:26:34.190

只需向您添加`model.field.choices`一个值为**None**的元组：

```
 payrollProvider = models.CharField(max_length=2, choices=PAYROLL_CHOICES)
 PAYROLL_CHOICES = (
        (None, 'please choose'),
        ('C1', 'Choice1'),
        ('C2', 'Choice2')
        etc.....
                    ) 
```

从[文档（v4.0）](https://docs.djangoproject.com/en/4.0/ref/models/fields/#django.db.models.Field.choices)：

> 除非在字段上设置了空白=假以及默认值，否则将使用选择框呈现包含“---------”的标签。**要覆盖此行为，请向包含 None 的选项添加一个元组**；例如（无，'您的显示字符串'）。或者，您可以在有意义的情况下使用空字符串而不是 None - 例如在 CharField 上。

# android - 从服务器注册 GCM

> ID：12984014
> 
> 赞同：0
> 
> 时间：2012-10-20T00:04:54.670
> 
> 标签：android, google-cloud-messaging

是否可以通过服务器而不是 Android 应用程序中的 http 调用为 GCM 注册 Android 设备？假设我有设备令牌和应用程序 ID。Python 代码示例/指向 Python 代码的链接将非常棒！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-20T05:22:51.967

不可以。您必须从 GCMRegistrar 类中获取注册 ID。这取决于设备和应用程序安装。从理论上讲，您可能能够挖掘 GCMRegistrar 的源代码（如果有的话），并且您可能能够找到一种自己生成 id 的方法，但我对此表示怀疑。

# java - Crystal Reports Java 报表组件：Linux 机器 (CentOS) 上的图表上没有文本

> ID：12984015
> 
> 赞同：1
> 
> 时间：2012-10-20T00:05:02.790
> 
> 标签：java, linux, crystal-reports

我花了 3 天时间试图解决这个问题，但没有成功。所以我肯定需要别人的帮助。

### 问题

我的基于 JSP 的 Web 应用程序使用 Java 报告组件显示几个报告。每个报告都包含一个或多个图表。报表是使用 Crystal Reports 设计器 2008 创建的

在我的 Windows 机器上一切正常，但在 Linux 生产服务器上，我看不到图表上的任何文本（标题、图例等）。所有其他功能 - 图表本身、报告、导出为 PDF 等 - 都在工作。

### 环境

```
CentOS 5
Tomcat 6
JRC 12.2.211 
```

### 我已经尝试过的：

*   检查已安装的字体并安装 windows 字体。它帮助我解决了 PDF 问题，但图表上仍然没有文字
*   检查在这台机器上从 Java 绘制文本的可能性。我刚刚编写了一个简单的类，它使用 drawString 在图像上绘制文本 - 即使我指定了不存在的字体，它也能正常工作
*   更改图表参数（字体、文本颜色、透明度） - 未成功
*   要更改 Java 2D 选项 - 打开/关闭 OpenGL、屏幕外像素图支持、DGA - 仍然没有成功
*   将报告转换为更高版本 (CR 2011) - 相同
*   升级渲染引擎（JRC 12.2.211 -> JRC 12.2.214） - 相同。

有没有人有这个问题或想法如何解决它？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T15:58:06.687

Java 从 1.6.17 升级到 1.6.22 修复了这种情况。

# python - NameError：未定义全局名称“total”，但它是

> ID：12984016
> 
> 赞同：4
> 
> 时间：2012-10-20T00:05:15.213
> 
> 标签：python, variables, global

每次我运行我的代码时，它都会告诉我总数没有定义。我在 support.py 中定义了它，然后将其导入到 stop.py 中。我一直在寻找类似的案例，但我不明白为什么它告诉我这个。请帮忙！

这是停止.py

```
from support import *

def main():

    def get_info():
      amplitude = float(input("Amplitude of the sine wave (in feet): "))
      period = float(input("Period of the sine wave (in feet): "))
      sign = float(input("Distance to the stop sign (in feet): "))
      nobrake = float(input("Distance needed to stop without using hand brakes (in feet): "))
      step = 9
      return amplitude, period, sign, nobrake

    get_info()

    get_distance(0, 0, 155.3, 134.71)

    print("Distance to the stop sign (in feet): 155.3")
    print("Distance needed to stop without using hand brakes (in feet): 350.5")
    print("Length of the sine wave: ", total)

main() 
```

这是 support.py

```
import math

def get_sine_length(amplitude, period, x_distance, step):
  x = 0.0
  total = 0.0
  last_x = 0
  last_y = 0
  while x <= x_distance + (step / 2):
     y = math.sin(2 * math.pi / period * x) * amplitude
     dist = get_distance(last_x, last_y, x, y)
     #print("distance from (", last_x, ",", last_y, ") to (", x, ",", y, ") is", dist)
     total = total + dist
     last_x = x
     last_y = y
     x = x + step
 return total

def get_distance(a, b, c, d):
   dx = c - a
   dy = d - b
   dsquared = dx**2 + dy**2
   result = math.sqrt(dsquared) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-20T00:07:30.167

`total`是本地的`get_sine_length`。由于您要返回它，因此要调用它`get_sine_length`并存储结果。

这个问题实际上与真的没有任何关系`import`。如果 for 的函数定义`get_sine_length`在`stopping.py`. 在函数内部（在 a 内部`def someFunc():`）定义的变量只能由该函数访问，除非您强制它们是全局的。然而，大多数时候，你*不应该仅仅为了从函数外部访问通常的局部变量而声明全局变量*——这就是返回的目的。

此示例显示了您遇到的一般问题。我不愿称其为问题，因为它实际上是 python（以及许多其他编程语言）的一个重要语言特性。

```
>>> def func():
...     localVar = "I disappear as soon as func() is finished running."
... 
>>> print localVar
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
NameError: name 'localVar' is not defined
>>> func()
>>> print localVar
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
NameError: name 'localVar' is not defined 
```

将函数想象成一台接受某些输入并输出其他输入的机器。您通常不想打开机器 - 您只想输入输入并获得输出。

# php - MySQL：搜索一个简单的表，但将 WordPress 'wp_usermeta' 表与 meta_key/meta_value 结合起来

> ID：12984021
> 
> 赞同：0
> 
> 时间：2012-10-20T00:06:15.023
> 
> 标签：php, mysql, sql, wordpress

正如我在标题中提到的那样，我正在“bid_userloc”表中请求纬度和经度……但我需要结合“wp_usermeta”表中的信息……

```
SET @centerLat = '48.531157';
SET @centerLng = '-123.782959';

SELECT *, ( 3959 * acos( cos( radians( @centerLat ) ) * cos( radians( lat ) ) * cos( radians( lng ) - radians(@centerLng) ) + sin( radians( @centerLat ) ) * sin( radians( lat ) ) ) ) AS distance FROM bid_userloc HAVING distance < 25 ORDER BY distance LIMIT 0 , 20 
```

并使用`user_id`来自 的`SELECT *`，我需要从`wp_userdata`表中获取一些用户数据，如下所示：

```
id
meta_key
meta_value 
```

例如，我需要`meta_value`“`meta_key`昵称”......以及其他一些，但是一旦我看到它是如何完成的，我可以添加更多。

对此，我真的非常感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-20T00:17:09.257

试试这个，用你原来的距离代替距离，用真实的东西代替其他东西：

```
SET @centerLat = '48.531157';
SET @centerLng = '-123.782959';

SELECT bid_userloc.*, distance, nickname.meta_value, something_else.meta_value
FROM bid_userloc
LEFT JOIN wp_usermeta AS nickname 
    ON nickname.userid = bid_userloc.user_id 
        AND nickname.meta_key = 'nickname'
LEFT JOIN wp_usermeta AS something_else 
    ON something_else.userid = bid_userloc.user_id 
        AND something_else.meta_key = 'something_else'
HAVING distance < 25
ORDER BY distance 
LIMIT 0 , 20 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-20T00:52:42.477

修改后的答案如下：

```
SET @centerLat = '48.531157';
SET @centerLng = '-123.782959';

SELECT bid_userloc.*, nickname.meta_value, last_name.meta_value,
( 3959 * acos( cos( radians( @centerLat ) ) * cos( radians( lat ) ) * cos( radians( lng ) - radians(@centerLng) ) + sin( radians( @centerLat ) ) * sin( radians( lat ) ) ) ) AS distance
FROM bid_userloc
LEFT JOIN wp_usermeta AS nickname 
    ON nickname.user_id = bid_userloc.user_id 
        AND nickname.meta_key = 'nickname'
LEFT JOIN wp_usermeta AS last_name 
    ON last_name.user_id = bid_userloc.user_id 
        AND last_name.meta_key = 'last_name'
HAVING distance < 25
LIMIT 0 , 20 
```

# html - Web 开发人员/设计师，您会推荐在原生 CSS3 或 Google Web Fonts API 中使用什么@font-face？

> ID：12984024
> 
> 赞同：3
> 
> 时间：2012-10-20T00:06:50.240
> 
> 标签：html, css, font-face

我很好奇在网站中使用哪一个会更好或更标准。我倾向于使用 Google Web Fonts，但我担心需要额外的 CSS 文件。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-20T00:13:07.693

好吧，我会使用@font-face，只是因为我对 Google 字体有一些不好的体验。特别是在 IE 中，Google 字体无法正常工作。

另外，我直接从他们的服务器上使用了谷歌字体，所以加载时间可能会更长一些。

我会向您推荐[FontSquirrel 之](http://www.fontsquirrel.com/)类的东西，因为它们具有适用于几乎所有浏览器的类型格式，只要我使用它们，它们就可以正常工作。

干杯

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-20T00:22:22.720

Google 网络字体 API 在后台使用 @font-face，因此没有真正的技术差异。Google 只是为 font-face 提供了一个包装器，它处理一些跨浏览器的差异并为您提供一些便利功能，有点像 jQuery 为 JavaScript 所做的。

[https://developers.google.com/webfonts/docs/technical_considerations](https://developers.google.com/webfonts/docs/technical_considerations)

当然，这对您的项目来说是一些额外的资源，这是一个值得关注的问题。您必须维护一些额外的复杂性，任何刚接触该项目的人都必须学习。但是对于您的项目来说，这种权衡也许是值得的。

我知道我曾经花时间将字体转换为各种格式，因此@font-face 可以在多种浏览器中使用，而 Google 网络字体会为您摆脱这项工作。

# ravendb - RavenDB：如何在嵌入和作为文档时以不同方式序列化类

> ID：12984030
> 
> 赞同：1
> 
> 时间：2012-10-20T00:07:43.570
> 
> 标签：ravendb

RavenDB 附带的示例数据库具有`Albums`文档集合，每个集合中都有一个`Genre`嵌入文档，如下所示：

```
{
  ... other stuff...
  "Genre": {
    "Id": "genres/1",
    "Name": "Rock"
  },
  ... other stuff...
} 
```

请注意，这里有`Genre`has`Id`和`Name`fields。

但是当您查看`Genre`文档时，它们具有`Id`、`Name`和`Description`字段，如下所示：

```
{
  "Description": "Rock and Roll is a form of rock music developed in the 1950s and 1960s. Rock music combines many kinds of music from the United States, such as country music, folk music, church music, work songs, blues and jazz.",
  "Name": "Rock"
} 
```

我如何在代码中建模，以便当我保存自己的文档与保存文档并嵌入`Store()`时`SaveChanges()`，序列化和保存的方式不同（如示例数据） ？`Genre``Album``Genre`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-20T00:19:45.640

该模型将匹配 ravendb 样本数据：

```
public class Genre
{
    public string Id { get; set; }
    public string Description { get; set; }
    public string Name { get; set; }
}

public class Album
{
    public string Id { get; set; }
    public string AlbumArtUrl { get; set; }
    public GenreRef Genre { get; set; }
    public decimal Price { get; set; }
    public string Title { get; set; }
    public int CountSold { get; set; }
    public ArtistRef Artist { get; set; }

    public class GenreRef
    {
        public string Id { get; set; }
        public string Name { get; set; }
    }

    public class ArtistRef
    {
        public string Id { get; set; }
        public string Name { get; set; }
    }
} 
```

示例用法包括：

```
var albumId = "albums/1";
var album = session.Include<Album>(x => x.Genre.Id)
                   .Load<Album>(albumId);
var genre = session.Load<Genre>(album.Genre.Id); 
```

包含意味着在加载流派时，没有 db 调用，因为它已经在会话中跟踪。

# android - 如何在phonestatelistener中创建一个android alertdialog？

> ID：12984032
> 
> 赞同：0
> 
> 时间：2012-10-20T00:08:00.583
> 
> 标签：android, android-alertdialog, builder

代码如下所示：

1）在清单文件中声明新活动。（AndroidManifest.xml）：

```
 <activity
        android:name=".ConfirmDialog"
        android:label="@string/app_name"
        android:theme="@android:style/Theme.Dialog"
        android:launchMode="singleTask"
        android:screenOrientation="vertical">          
    </activity> 
```

2）创建新类扩展活动。（公共类 ConfirmDialog 扩展了 Activity）

```
private static final int DIALOG_YES_NO_MESSAGE = 1;

@Override
protected Dialog onCreateDialog(int id) {
    switch (id) {
    case DIALOG_YES_NO_MESSAGE:
        return new AlertDialog.Builder(ConfirmDialog.this)
            .setIconAttribute(android.R.attr.alertDialogIcon)
            .setTitle(R.string.app_name)
            .setMessage(R.string.ask_confirm)
            .setPositiveButton(R.string.ask_confirm_yes, new DialogInterface.OnClickListener() {
                public void onClick(DialogInterface dialog, int whichButton) {
                    dialog.cancel();
                    finish();
                }
            })
            .setNegativeButton(R.string.ask_confirm_no, new DialogInterface.OnClickListener() {
                public void onClick(DialogInterface dialog, int whichButton) {
                    dialog.cancel();
                    finish();
                }
            })
            .create();
    }
    return null;
}

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    showDialog(DIALOG_YES_NO_MESSAGE);
} 
```

3) 在phonestatelistener 中使用新创建的活动。（公共类监听器扩展了 PhoneStateListener）

```
public void onCallStateChanged(int state, String incomingNumber){

    switch(state){              
        case TelephonyManager.CALL_STATE_OFFHOOK:
            confirmCall();          
        break;
    }

    super.onCallStateChanged(state, incomingNumber);

}   

private void confirmCall(){
    Intent intent = new Intent();
    intent.setComponent(new ComponentName("com.example", "com.example.ConfirmDialog"));
    mContext.startActivity(intent);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-20T17:28:49.853

并非所有`Context`对象都是平等的，重用它们是危险的，因为它可能会导致您看到的错误。根据您的评论，您修改后的代码正在`Context`您的类中存储一个来自 SherlockFragmentActivity 的`Config`内容，然后在以后使用它`Activity`（以及它正在使用的窗口）可能不再存在时使用它。is 不是 null并且`Context`可能可以用来做 a `Toast`，但是做窗口操作是非常危险的。

一种解决方案是在您的应用程序中创建一个以对话框为主题的活动，该活动将只显示对话框。在`confirmCall()`中，使用 启动您的活动`startActivity()`，然后让活动创建对话框。对用户来说，屏幕上会出现一个对话框，但没有运行应用程序，但实际上您的应用程序*正在*运行并且可以响应用户在对话框上的是/否选择。请务必使用

```
new AlertDialog.Builder(this) 
```

所以对话框`Context`是一个`Activity`.

# ajax - Spring MVC 3.1：如何从 PUT 请求正文映射 JSON？

> ID：12984033
> 
> 赞同：2
> 
> 时间：2012-10-20T00:08:15.447
> 
> 标签：ajax, json, rest, spring-mvc, mapping

我知道这个问题已经被问了无数次，但我仍然找不到我的问题的解决方案，这基本上归结为来自 PUT 请求的 JSON 反序列化。

我已经添加了 HiddenHttpMethodFilter 作为过滤器。

org.codehaus.jackson.jackson-mapper-lgpl 在类路径中。

这是客户端部分：

```
$.ajax({
    url: '/occurrence',
    type: 'PUT',
    contentType: 'application/json',
    data: JSON.stringify({id:id,startDate:startDate, endDate:endDate, frequencyType:frequency})
 }) 
```

这是控制器部分：

```
@Controller
@RequestMapping("/occurrence")
public class OccurrenceController {

    private static final String COMMAND = "eventCommand";

    @Autowired
    private PersistenceCapableOccurrence occurrenceDao;

    @Autowired
    private PersistenceCapableFrequencyType frequencyTypeDao;

    @InitBinder(COMMAND)
    public void customizeConversions(final WebDataBinder binder) {
        DateFormat df = new SimpleDateFormat("dd/MM/yyyy HH:mm");
        df.setLenient(false);
        binder.registerCustomEditor(Date.class, new CustomDateEditor(df, true));

        EntityConverter<FrequencyType> frequencyTypeEntityConverter = new EntityConverter<FrequencyType>(frequencyTypeDao, FrequencyType.class, "findByValue", String.class);
        ((GenericConversionService) binder.getConversionService()).addConverter(frequencyTypeEntityConverter);
    }

    @RequestMapping(method = PUT, consumes = "application/json")
    @ResponseBody
    public Long saveOccurrence(@RequestBody Occurrence occurrence) {
        return occurrenceDao.saveOrUpdate(occurrence);
    }
} 
```

这是我的两个域类（Occurrence 和 FrequencyType）：

```
public class Occurrence {
    @Id
    @GeneratedValue(strategy = IDENTITY)
    @Column(name = "id", nullable = false)
    private long id;
    @NotNull
    @Column(name = "start_date")
    @Type(type = "org.jadira.usertype.dateandtime.joda.PersistentDateTime")
    private DateTime startDate;
    @Column(name="end_date")
    @Type(type = "org.jadira.usertype.dateandtime.joda.PersistentDateTime")
    private DateTime endDate;
    @ManyToOne
    @JoinColumn(name = "frequency_type", nullable = false)
    private FrequencyType frequencyType;

     /* C-tor (1 with [start,end,freq], another with [start,freq]), getters (no setters) */
}

@Entity
@Table(name = "frequency_types")
public class FrequencyType {

    public enum FrequencyTypeValues {
        ONCE, DAILY, WEEKLY, MONTHLY, YEARLY;
    }

    private String value;

    public FrequencyType() {}
    public FrequencyType(FrequencyTypeValues value) {
        this.value = value.name();
    }

    @Id
    @Column(name = "value")
    public String getValue() {
        return value;
    }

    public void setValue(String value) {
        //validates value against the enumerated/allowed values (ie throws exceptions if invalid value)
        FrequencyTypeValues.valueOf(value.toUpperCase());
        this.value = value;
    }
} 
```

最后我得到的只是 400 响应。例子 ：

```
PUT Request
{"id":"","startDate":"20/10/2012 17:32","endDate":"","frequencyType":"YEARLY"}

Response
"NetworkError: 400 Bad Request - http://localhost:9999/occurrence" 
```

在此先感谢您的帮助 ！罗尔夫

# mysql - NSIndexPath 保存到另一个实体

> ID：12984041
> 
> 赞同：0
> 
> 时间：2012-10-20T00:09:36.587
> 
> 标签：mysql, ios, uitableview, core-data, entity

我几乎完成了我的应用程序的研究。我需要学习如何做的最后一件事是以下情况：假设我创建了一个 UItableview 向下钻取应用程序，但是一旦用户完成向下钻取（他们对特定狗产品的选择实例现在非常具体），他们可以保存该信息。我希望我的应用在这里做的是，在钻取结束时，将它们的整个 nsindexpath 保存为另一个实体，以便稍后我可以将此信息发送到我的 MySQL 数据库。**我的问题是，如何从另一个实体的 nsindexpath 重新保存 nsstring？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T00:24:52.503

1.  开始编写代码，而不是在开始之前研究整个应用程序的架构。你真的只会从实际编程中学习。
2.  使用核心数据

用于`tableView:didSelectRowAtIndexPath:`获取选中的tableview单元格的indexPath，并根据需要存储indexPath或数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-20T07:14:00.927

我同意 runmads 的建议。从长远来看，CoreData 可能会让你的生活更轻松。不过要回答你的问题：

不要保存表格视图的 NSIndexPath。选择索引路径是与**视图**相关的属性（在 MVC 术语中）。您的用户选择属于**模型**域。将两者混合使用是不好的做法，如果您稍后在其中一个表中插入新选择，则存储的索引路径将变得无效。

而是创建像 UserChoice 对象或字典或数组之类的东西，您可以在用户向下钻取时向下传递您的 tableview 控制器。当用户选择一个单元格时，将关联数据对象的**主键**添加到您的数组中。最后，将一路收集的主键存储到数据库中。

# email - Win8/WinRT - 如何在电子邮件正文中添加换行符

> ID：12984043
> 
> 赞同：6
> 
> 时间：2012-10-20T00:09:57.160
> 
> 标签：email, windows-8, windows-runtime, windows-store-apps

在我的 Windows 8 应用商店应用程序中，我在页面上有一个**发送电子邮件**按钮，用户可以单击它并向我们发送电子邮件以进行一些一般查询。

我需要在电子邮件正文中预加载一些文本，但我似乎无法为其添加换行符。我试过`Environment.NewLine`了`"\r\n"`。它们都不起作用。

```
var mailto = new Uri("mailto:?to=james.jones@example.com&subject=Hello world&body=Hi," + Environment.NewLine + "Can you please ..."); 
await Windows.System.Launcher.LaunchUriAsync(mailto); 
```

当我运行它时，我得到“嗨，你能...”。换行符被省略。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-20T00:41:50.643

尝试使用`"%0d%0a"`作为你的换行符，如

```
"Hi,%0d%0aCan you please..." 
```

这是一个 URL 编码的 ASCII CR/LF 序列。这对我来说适用于内置的邮件应用程序，但你没有任何特别保证它适用于用户将来可能安装的任何邮件应用程序。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-05T17:43:22.483

它不起作用的原因是因为您正在启动 Uri，Uris 要求它们的内容是 UrlEncoded / UrlEncodable。在 Environment.Newline 等的情况下，你会得到一个无效的 Uri。

您可以通过 UrlEncoding 环境换行符来解决这个问题，如下所示：

```
System.Net.WebUtility.UrlEncode(Environment.NewLine) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-21T09:51:12.283

您也许应该考虑使用[共享合同](http://msdn.microsoft.com/en-us/library/windows/apps/xaml/Hh871368%28v=win.10%29.aspx)将您的内容共享到您的邮件应用程序。好处：使用您的软件的用户可以将其共享给其他应用程序，而不仅仅是电子邮件。

# c# - 让应用程序始终运行

> ID：12984044
> 
> 赞同：2
> 
> 时间：2012-10-20T00:10:03.640
> 
> 标签：c#, .net, windows

基本上我需要我的应用程序从系统启动到系统关闭运行。我想出了以下方法：

1.  创建 MyApp.exe 和 MyService.exe
2.  MyApp 应该将 MyService 安装为服务
3.  MyService 应该在启动时运行并定期检查 MyApp 是否正在运行。如果不是，那就开始吧。

这是我为我的服务编写的代码：

```
protected override void OnStart(string[] args)
{
    while(true)
    {
        int processesCount =
            Process.GetProcessesByName(Settings.Default.MyAppName).Count() +
            Process.GetProcessesByName(Settings.Default.MyAppName + ".vshost").Count() +
            Process.GetProcessesByName(Settings.Default.MyAppUpdaterName).Count();

        if(processesCount==0)
        {
            //restore
            var p = new Process { StartInfo = { FileName = Settings.Default.MyAppName, Arguments = "" } };
            p.Start();
        }
        else
        {
        }

        System.Threading.Thread.Sleep(3000);
    }
} 
```

1.  如何安装此过程以使其在 Windows 启动时启动？
2.  我不确定 OnStart 方法中的这个无限循环是否是个好主意。是吗？
3.  总体思路可以吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-20T00:19:54.173

我所做的是有一个运行逻辑和主要应用程序代码的 Windows 服务。然后，如果您需要一个 GUI，让 Windows 服务通过 WCF 公开一个 Web 服务，并创建一个调用该 Web 服务的 Windows 应用程序。安装时，将您的 windows 应用程序放在 windows 启动中。

此模型将始终运行主应用程序代码，但 GUI 仅在用户登录时启动。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-20T00:28:43.483

> 总体思路可以吗？

正如汉斯在评论中指出的那样，这对用户是不利的，幸运的是在 Vista 或更高版本上无法运行，因为服务在它们自己的 Windows 站中运行。将您需要始终运行的任何逻辑放入服务中，并使用 IPC 机制（例如 WCF）与（可选）正在运行的 UI 进行通信。如果用户禁用服务或退出 GUI，请尊重他们的意愿......

> 如何安装此过程以使其在 Windows 启动时启动？

添加一个`HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Windows\CurrentVersion\Run`或`HKEY_CURRENT_USER\SOFTWARE\Microsoft\Windows\CurrentVersion\Run`指向您的 GUI 应用程序的条目。

> 我不确定 OnStart 方法中的这个无限循环是否是个好主意。是吗？

否。`OnStart`如果您需要在 OnStart 返回后执行工作，则需要返回创建一个[线程](http://msdn.microsoft.com/en-us/library/system.threading.thread.aspx)来执行该工作。

# jquery - jQuery - 通过函数访问表单项

> ID：12984046
> 
> 赞同：2
> 
> 时间：2012-10-20T00:10:23.970
> 
> 标签：jquery

我在网上的一些示例中发现人们将表单传递给函数，然后他们只使用项目的 id 来访问它，如下所示：

```
<form id="frm">
<input type="text" id="textbox" name="textbox" value="some value" />
</form>

<script>
console.log(getelementval("#frm"));

function getelementval(frm) {
return frm.textbox.val();
}
</script> 
```

但是 FireBug 告诉我 frm.textbox 是未定义的......然后我正在搜索为什么它在网络上不起作用但我没有找到任何解释这个选项以及如何使用它的东西。有什么线索吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-20T00:13:20.227

您将不得不稍微修改 JS 以使其工作：

```
function getelementval(frm) {
    return $(frm)[0].textbox.value;
} 
```

**演示：http: [//jsfiddle.net/gdZEK/2/](http://jsfiddle.net/gdZEK/2/)**

*   `$(frm)`返回与选择器匹配的元素。
*   `[0]`获取实际的 DOM 元素。
*   `.textbox`仅适用于 DOM 元素，不适用于 jQuery 对象。它匹配`[name='textbox']`。
*   `.value`需要使用而不是`.val()`，因为`.textbox`它不是 jQuery 对象。

老实说，我真的不明白这比仅使用 jQuery 更好：

```
$('#frm input[name="textbox"]').val(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-20T00:16:07.243

这是纯 JavaScript 而不是 JQuery

```
function getelementval(frm) {
   var f = document.getElementById(frm);
   return f.textbox.value;
}

console.log(getelementval("frm")); 
```

jQuery版本

```
function getelementval(frm) {
   var f = $(frm)[0];
   return f.textbox.value;
}

console.log(getelementval("#frm")); 
```

# java - Android 客户端应用程序使用 socketChannel 与普通的多线程服务器通信

> ID：12984047
> 
> 赞同：1
> 
> 时间：2012-10-20T00:10:30.283
> 
> 标签：java, android, sockets, socketchannel

我有一个 android JAVA 应用程序，它使用普通的 TCP serversocket（多线程）与第三方服务器通信，如果我在 android 应用程序中使用 socketChannel 客户端，它会工作吗？该应用程序曾经使用套接字客户端，如果它运行正常，则可以正常工作，无论如何，如果路由器或网络具有QOS控制，并且发送比特率大于实际（我正在尝试自动检测实际吞吐量） ，即使我稍后将 QOS 更改为高于发送 bps，即使经过相当长的时间，客户端套接字写入即使是 1K 或 2K 数据仍然需要 1000+ 或 2000+ ms，这导致性能非常糟糕。

我想知道 socketchannel 是否是客户端的一个很好的解决方案，而无需更改服务器。

谢谢 ：）

# cuda - 为 NVIDIA CUDA 5 编译示例时没有 mpicxx

> ID：12984054
> 
> 赞同：1
> 
> 时间：2012-10-20T00:12:39.633
> 
> 标签：cuda

我在 64 位 RHEL 6.3 中成功安装了 CUDA 5 的驱动程序和工具包。

但是，当我尝试编译 CUDA 5 示例时，我收到了错误消息：

> make[1]: 离开目录`/root/NVIDIA_CUDA-5.0_Samples/0_Simple/cppIntegration'
> 
> 其中：没有 mpicxx

我该如何解决这个问题以编译 CUDA 5 示例？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T01:30:07.347

为了构建 simpleMPI 示例，您需要在系统上安装[某种 MPI 。](http://en.wikipedia.org/wiki/Message_Passing_Interface)您可以通过以下方式解决此问题并构建大部分示例：

```
 make -k 
```

这将尝试绕过 make 过程中的错误并构建所有可以构建的目标。

如果您愿意，可以删除此目录：

```
/root/NVIDIA_CUDA-5.0_Samples/0_Simple/simpleMPI 
```

也许使用以下命令，以 root 身份：

```
rm -Rf /root/NVIDIA_CUDA-5.0_Samples/0_Simple/simpleMPI 
```

并重新启动您的品牌。我个人认为 make -k 选项更简单。

（关于 cppIntegration 的消息只是最后一个成功构建的目标）

# facebook - How many Facebook API calls am I making with this line of code?

> ID：12984058
> 
> 赞同：0
> 
> 时间：2012-10-20T00:13:03.597
> 
> 标签：facebook, api

[https://graph.facebook.com/me?fields=friends.limit(100).fields(name,books)&access_token=##############](https://graph.facebook.com/me?fields=friends.limit(100).fields(name,books)&access_token=##############)

I believe it is 1\. But in the facebook documentation it says, batch requests api calls are calculated as if they were many individual calls. Since field expansion is also a "batch request", I am confused how they calculate.

I believe the number of calls will either be one of the following :
1\. 1 - line of code
2\. 100 - number of friends
3\. 100 * (1 + 1) = 200 - 1 each for name and books

Can you please tell me how to calculate?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-20T00:17:34.683

That's one - it's not a batch request unless you're actually creating a batch of requests per the batch request API documentation (which you're not here; here you're just making one 'call' asking for 100 friends' data)

# mysql - 使用 rails 提取博客文章的“预览”

> ID：12984069
> 
> 赞同：0
> 
> 时间：2012-10-20T00:14:35.880
> 
> 标签：mysql, ruby-on-rails, text, blogs

我们将博客文章存储在数据库的文本列中。我们的博客主页需要博客文章的“预览”。这样，我们可以显示最近几天的博客文章以及阅读全文的链接。

rails 有没有办法拉出一定数量的文本列？也许是第一个`x bytes`？我知道每篇博客文章的长度都不一样，但它应该在一般区域得到它。

或者也许做一些 html/css hack，我们溢出一个 div 并向 div 添加一个椭圆？

我还可以看到创建一个单独的“预览”列，但这感觉很hacky。

导轨 3.2.1。数据库是 MySQL

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T00:34:02.837

您可以选择列中文本的第一个（或最左边）字符：

```
SELECT LEFT(POST_BODY, 40) FROM BLOG_POSTS 
```

通常最好让数据库“完成工作”。但是，如果您要在用户单击“更多”时使用博客文章的其余部分，请选择整个文章并使用 Ruby 的字符串方法将其拆分。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-20T00:30:29.647

如果我理解正确，您需要将长文本条目转换为有限预览文本的东西，例如`This is a preview text, and it says that...`.

为此，您可以简单地执行以下操作：

```
text = post.text[0..100] + "..." 
```

它基本上从文本中获取前 100 个字符。如果你想要更复杂的东西，那就把单词考虑进去（这样你就不会得到类似的东西`This is a previ...`，你可以有一个函数将文本分成单词并将它们添加到最终文本中，直到它们达到所需的长度，比如：

```
text = post.text
words = text.split(" ")
final_text = ""
words.each do |word|
    final_text += word if final_text.size + word.size < DESIRED_LENGTH
end
final_text += "..." 
```

# magento - Magento - 在登录之前获取登录用户的客户组 ID

> ID：12984072
> 
> 赞同：1
> 
> 时间：2012-10-20T00:15:38.087
> 
> 标签：magento

所以在登录期间，我想检查用户是否在特定的客户组中，如果检查失败，则阻止登录。

我扩展了 AccountController，并在快速检查中添加了：

```
$customer = Mage::getModel('customer/customer')->loadByEmail($login['username']);
if ($customer->getGroupId() != 2) {
    $msg = Mage::getSingleton('core/session')->addError($this->__('You must have a wholesale account to access this area.'));
    header('Location: '. Mage::getUrl('customer/account/login'));
    exit;
} 
```

但是，运行此命令会返回会话错误消息“使用网站范围时必须指定客户网站 ID”。

基本上，我只需要获取尝试登录的用户的组 ID，我想我可以通过客户模型中提供的方法 loadByEmail() 来获取它。但是，是的，现在是星期五，显然魔法领主希望我迟到。

我尝试了多种方法来使其正常工作，包括允许登录，然后检查 ID，然后在检查失败时执行 $session->logout() ，但这阻止了我在注销后显示会话错误消息() 方法正在清除所有会话消息（包括“核心/会话”）。

有任何想法吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-20T07:48:57.353

您应该`website_id`在使用`loadByEmail`方法之前进行设置。我知道，这看起来很奇怪，但这是由事实决定的，它`customer`可能是一个网站范围的实体。因此，如果模型未分配给任何网站，该`loadByEmail`方法将抛出异常。`customer`

```
$customer = Mage::getModel('customer/customer');
$customer->setWebsiteId(Mage::app()->getStore()->getWebsiteId())
        ->loadByEmail($login['username']); 
```

# java - cvAbsDiff 的例子？

> ID：12984073
> 
> 赞同：3
> 
> 时间：2012-10-20T00:15:53.117
> 
> 标签：java, image, opencv, javacv

我试图找出两张图片之间的区别，但是，我正在使用 JavaCV，虽然我找到了一个似乎可以满足我需要的 openCV 函数，但我似乎无法让它工作，因为我不确定我该怎么做在 java 中使用 cvAbsDiff。谁能提供一个我需要哪些导入的示例，以及在哪里可以找到 javaCV 中支持的 openCV 函数的列表？

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T13:04:58.950

您可以使用以下形式：

```
cvAbsDiff(image1, image2, result); 
```

你需要导入

```
import static com.googlecode.javacv.cpp.opencv_core.* 
```

启用 absdiff。

# css - 伪类的功能：非伪类选择器 - css 问题

> ID：12984081
> 
> 赞同：4
> 
> 时间：2012-10-20T00:17:21.400
> 
> 标签：css, css-selectors, css-transitions, pseudo-class

我正在尝试选择除我当前单击的内容之外的所有内容。

基本上，我有一堆`.node-teaser`元素，它们的样式都相同，并且具有相同的类，只是它们在`:active`.

当我点击一个时，我想“重置”所有其他动画/过渡，这样只有当前的动画会变大。所以，基本上，我想：

```
.node-teaser:not(.node-teaser:active) {
   max-height: 50px;
   .....
} 
```

但是，我不能使用伪类作为`:not()`. 我如何以不同的方式解决问题，或者，我错过了什么？

我坚持使用我拥有的类，因为它们是由 Drupal 生成的，我真的不想为主题更改我的 PHP 模板。而且，我想向自己证明这适用于纯 CSS，但我被卡住了。

有这个`~`选择器。如果要在当前元素之前选择每个元素（与选择元素之后的所有内容的波浪号选择器相反），我基本上可以将这两个加起来，我将拥有之前的所有内容和之后的所有内容=除当前元素之外的所有内容。我不认为有一个选择器与之相反`~`。如果我错了，请纠正我！

编辑：因为我似乎很困惑 ^.^（对此感到抱歉）：在[adornis.de](http://adornis.de/)上，我一次只希望扩展一个项目，当您单击第二个项目时，其余项目应该关闭。通常 :active 无论如何都会立即关闭，但我正在延迟过渡。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-20T09:07:41.167

解决方案是：您可以使用伪类，但不能将它们与真实类结合起来。

所以

```
.foo:not(.foo:active) {} 
```

不起作用，但是

```
.foo:not(:active) {} 
```

工作得很好:)

这并没有解决我的问题，但我想理解这一点很重要。我仍然必须混合类和伪类来实现我的目标。

**结论：**没有 javaScript，你不能做到这一点（还）

感谢 BoltClock 在对原始帖子的评论中回答了这个问题:)

> 您遇到了与前几天其他人完全相同的问题：您可以在 :not() 中使用伪类，但在这种情况下，您将一个类和一个伪类结合起来，这是不行的

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-20T00:23:02.613

一种（我不会说最漂亮的）方法是恢复为默认值：

```
.node-teaser {
   max-height: 50px;
}

.node-teaser:active {
   max-height: auto;
} 
```

# gwt - GWT EditorDriver 代理对象修改

> ID：12984083
> 
> 赞同：0
> 
> 时间：2012-10-20T00:17:29.653
> 
> 标签：gwt, requestfactory

这是我之前问过的一个问题的编辑版本（并且那个 tbroyer 回答了）关于为什么在尝试修改实体的版本后该`isDirty()`方法没有返回。我认为我对实体/处理的理解是问题所在，而问题是转移注意力。我在这个问题的末尾留下了我原来的问题，但我的新问题是：`true``Editor``RequestFactory``EditorDriver``isDirty()`

如何`EditorDriver`在代码中修改正在编辑的实体（代理）？显然，值会随着用户界面的变化而改变；但我不知道如何在“幕后”改变价值观。我的理解是，调用`EditorDriver.edit()`将创建代理对象的副本，随后对该副本的任何更改都将使用`EditorDriver.flush()`. 但`EditorDriver.edit()`不返回对正在编辑的对象的引用（与 不同`RequestContext.edit()`，它确实返回对正在编辑的对象的引用）。

原始（消息灵通）问题：

我不明白为什么 EditorDriver.isDirty() 方法在以下情况下不返回 true （当从列表框中选择新的 Org 时调用以下 onOrgSelectedEvent() 方法）：

```
private IOrgProxy _org;
...
/**
 * Loads the currently selected Org into the editor. 
 */
@Override
public void onOrgSelectedEvent(final OrgSelectedEvent orgSelectedEvent) {
  IOrgProxy org = _clientFactory.getCache().getOrgCache().getOrg(orgSelectedEvent.getOrgId());
  _orgRequestContext = _clientFactory.getRequestFactory().newOrgRequestContext();
  _org = _orgRequestContext.edit(org);
  _orgEditorDriver.edit(_org, _orgRequestContext);
  _org.setName(_org.getName() + " (edit)");
  if (_orgEditorDriver.isDirty()) {
    _org.setName(org.getName());
  }
} 
```

当我在 setName() 调用上设置断点时，我看到第一个调用更改了可编辑 Org 对象中的名称，但从未到达第二个 setName() 调用（即 _orgEditorDriver.isDirty() 返回 false）。

作为一个附带问题，EditorDriver.edit() 方法不返回可编辑的代理对象，而且我必须调用 RequestContext.edit()，这对我来说似乎很奇怪，但这是一个非常小的问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-20T14:51:11.277

为什么`isDirty`之后会是真的`edit`？显然，用户没有时间进行任何更改。

`isDirty`将子编辑器的当前值与其原始值进行比较，它不关心对象是否更改：如果将对象借给编辑器，则隐含地赋予它对已编辑对象的控制权（对于已编辑的属性）。

# sql - sql - 来自组标志设置器的最大值

> ID：12984088
> 
> 赞同：0
> 
> 时间：2012-10-20T00:18:30.473
> 
> 标签：sql, sql-server, sql-server-2008, sql-server-2005

我正在尝试为下表中的条件设置标志

```
p_id      mon_year      e_id     flag  
----      ---------     -----    -----
 1          2011/11       20       0
 1          2011/11       21       1
 1          2012/01       22       1
 1          2012/02       23       0
 1          2012/02       24       0
 1          2012/02       25       1
 2          2011/11       28       0
 2          2011/11       29       1
 2          2012/01       30       1 
```

按 p_id、e_id 和 mon_year 分组，该标志设置为该月的最后一个值。

我很困惑我怎么能做到这一点

我试图通过使用 row_number 和 partition 来分离值来实现这一点。通过仍在寻找实现

使用 row_number 查询输出，我得到如下：

分组依据

```
p_id      mon_year      e_id     row
----      ---------     -----    -----
 1          2011/11       20       1
 1          2011/11       21       2
 1          2012/01       22       1
 1          2012/02       23       1
 1          2012/02       24       2
 1          2012/02       25       3
 2          2011/11       28       1
 2          2011/11       29       2
 2          2012/01       30       1 
```

此值的最大值将设置标志列。但我真的很想知道如何实现它。任何帮助都会很有用。

谢谢 ！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-20T00:30:21.363

尝试按降序排序。这样，您不必寻找最大 ROW_NUMBER 但当 ROW_NUMBER 为 1 时；）

像这样的东西（我没有完全理解你想要达到的目标，所以这可能不是 100% 准确）：

```
WITH r_MyTable
AS
(
    SELECT 
        *,
        ROW_NUMBER() OVER (PARTITION BY mon_year ORDER BY p_id, e_id DESC) AS GroupRank
    FROM MyTable
)
UPDATE r_MyTable
SET flag = CASE WHEN GroupRank = 1 THEN 1 ELSE 0 END; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-20T00:33:54.780

我想这就是你想要的。. . 输出与您的示例完全匹配：

```
declare @t table (p_id int, [year] int, [month] int,  [day] int)
insert @t select 1, 2011, 11, 20
    union select 1, 2011, 11, 21
    union select 1, 2012, 01, 22
    union select 1, 2012, 02, 23
    union select 1, 2012, 02, 24
    union select 1, 2012, 02, 25
    union select 2, 2011, 11, 28
    union select 2, 2011, 11, 29
    union select 2, 2012, 01, 30

select p_id, [year], [month], [day] 
, case when r=1 then 1 else 0 end flag
from
(
    select p_id, [year], [month], [day]
    , row_number() over (partition by p_id, [year], [month] order by [day] desc) r
    from @t
) x
order by  p_id, [year], [month], [day] 
```

输出：

```
p_id    year    month   day     flag
1       2011    11      20      0
1       2011    11      21      1
1       2012    1       22      1
1       2012    2       23      0
1       2012    2       24      0
1       2012    2       25      1
2       2011    11      28      0
2       2011    11      29      1
2       2012    1       30      1 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-21T15:58:21.620

您可以在 e_id 上使用 max 语句来获取该月的最后一个值，代码如下：

```
 IF OBJECT_ID('tempdb..#tmptest') IS NOT NULL
        DROP TABLE #tmptest

    SELECT
        *
    INTO
        #tmptest
    FROM
    (
        SELECT  '1' p_id,          '2011/11' mon_year,       '20' e_id,      '0' flag UNION ALL
        SELECT  '1',          '2011/11',       '21',       '1' UNION ALL
        SELECT  '1',          '2012/01',       '22',       '1' UNION ALL
        SELECT  '1',          '2012/02',       '23',       '0' UNION ALL
        SELECT  '1',          '2012/02',       '24',       '0' UNION ALL
        SELECT  '1',          '2012/02',       '25',       '1' UNION ALL
        SELECT  '2',          '2011/11',       '28',       '0' UNION ALL
        SELECT  '2',          '2011/11',       '29',       '1' UNION ALL
        SELECT  '2', '2012/01',       '30',       '1' 
    ) as tmp

    SELECT
        tmptest.*
    FROM
        (
            SELECT 
                MAX(e_id) e_id
                ,p_id
                ,mon_year
            FROM 
                #tmptest
            GROUP BY
                p_id,mon_year
        ) tblLastValueEID
    INNER JOIN
        #tmptest tmptest
    ON
        tmptest.p_id = tblLastValueEID.p_id
    AND
        tmptest.mon_year = tblLastValueEID.mon_year
    AND
        tmptest.e_id = tblLastValueEID.e_id 
```

# linux - 使用 ALSA 在仅播放声卡上捕获回放

> ID：12984089
> 
> 赞同：4
> 
> 时间：2012-10-20T00:18:46.517
> 
> 标签：linux, audio, audio-recording, alsa

我的 hw:1,0 是只播放的外部 USB 卡。如果记录应用程序尝试打开 hw:1,0 进行捕获，则无法捕获发送到 hw:1,0 的样本。alsamixer 没有为 hw:1,0 提供任何“[Capture]”选项 - 在“[Playback]”选项卡上只有一个音量控制。

是否可以创建一些虚拟“xxx”设备来接受来自播放应用程序的流并通过 2 个流（副本）将其发送出去 - 第一个到真正的“hw：1,0”（到我的耳机）和第二个到另一个提供捕获能力的虚拟设备“zzz”，将流馈送到可以打开“zzz”进行捕获的应用程序？

**更新**

我在内核中添加了 ALSA 环回设备，现在我有了环回设备。然后我发现工作 .asoundrc（见下文），但是当我使用 ffmpeg 捕获屏幕 + 声音时，声音比视频更早，一些很大的同步问题。因此，有了这个 .asoundrc（如下），我可以使用 hw:0,0（环回设备，hw:0,0 - 播放，hw:0,1 - 捕获）来捕获我发送到“默认”的内容。我也可以通过我的外部 USB hw:2,0 听到这些样本。

ffmpeg 命令：

```
ffmpeg  -f alsa -i hw:0,1  -f x11grab -s 854x480 -r 30 -i :0.0 -vcodec libx264 -vb 4000k /tmp/screen_854x480.avi 
```

.asoundrc：

```
pcm.!default {
    type plug
    slave.pcm "mdev"
    route_policy "duplicate"

}

pcm.mdev {
    type multi

    slaves.a.pcm "hw:Loopback,0,0"
    slaves.a.channels 2
    slaves.b.pcm "dmixer"
    slaves.b.channels 2

    bindings.0.slave a
    bindings.0.channel 0
    bindings.1.slave a
    bindings.1.channel 1
    bindings.2.slave b
    bindings.2.channel 0
    bindings.3.slave b
    bindings.3.channel 1
}

pcm.dmixer {
    type dmix
    ipc_key 1024
    slave {
            pcm "hw:2,0"
            period_time 0
            period_size 1024
            buffer_size 4096
            rate 44100
            channels 2
            format S16_LE
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-20T08:57:33.140

可以创建将播放数据重新路由回捕获设备的环回设备：
[Alsa Loopback Devices for Fun，但尚未盈利...](http://blog.vrplumber.com/b/1ZM/)
[ALSA Loopback for Fun and Profit](http://blog.vrplumber.com/b/1ZO/)

也可以使用[multi plugin](http://www.alsa-project.org/alsa-doc/alsa-lib/pcm_plugins.html#pcm_plugins_multi)创建一个输出到多个设备的虚拟设备。

尝试这样的事情：

```
pcm.xxx {
    type plug       # <-- no { here
    slave.pcm {
        type multi
        slaves {
            a { channels 2 pcm "hw:1,0" }  # the real device
            b { channels 2 pcm "hw:5,0" }  # the loopback driver
        }
        bindings {
            0 { slave a channel 0 }
            1 { slave a channel 1 }
            2 { slave b channel 0 }
            3 { slave b channel 1 }
        }
    }
    ttable [
        [ 1 0 1 0 ]   # left  -> a.left,  b.left
        [ 0 1 0 1 ]   # right -> a.right, b.right
    ]
} 
```

# mysql - 在一个范围内选择 MySQL 日期时间

> ID：12984093
> 
> 赞同：2
> 
> 时间：2012-10-20T00:19:24.857
> 
> 标签：mysql, datetime

我在 StackOverflow 上看到了至少 2 打这样的问题，但没有一个批准的答案对我有用。

我正在尝试运行这个 MySQL 查询：

```
SELECT * FROM requests WHERE date_created between "2012-10-01 00:00:00" AND "2012-11-01 00:00:00"­ 
```

我得到的错误是：

```
#1064 - You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '­ LIMIT 0, 30' at line 1 
```

我不明白这个错误！我什至没有在我的查询中使用“限制”。

任何帮助将不胜感激。谢谢你。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-20T00:23:21.597

试试这个 ：

```
 SELECT * FROM requests 
 WHERE date_created between DATE('2012-10-01 00:00:00') 
                            AND DATE('2012-11-01 00:00:00'­) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-20T00:26:05.203

如果没有更多上下文，我会说该错误可能是指代码中的另一个查询，其中实际上包含“LIMIT 0, 30”。

# php - 安装 magento 后使用旧数据库

> ID：12984104
> 
> 赞同：1
> 
> 时间：2012-10-20T00:21:14.813
> 
> 标签：php, mysql, sql, magento

我的网站被一个新手开发人员搞砸了，我没有选择删除旧文件，并安装 magento 1.7.0.2 的新副本。我的旧 Magento 版本是 1.6。

我想使用旧数据库，因为我的所有产品列表都在它上面，所有东西都在那个数据库上。我找不到将这些表（事实上它们的数量如此之多以至于几乎不可能记住它们的名字）放入我的新安装中的方法。

我尝试通过编辑 local.xml 将我的 magento 安装指向旧数据库但没有成功，因为 magento 一次又一次地抛出错误..错误是

```
table already exists and some description 
```

对我来说，这些错误是有道理的

有人可以指导我如何将旧数据库指向 magento 而不会出现错误，或者如何将旧数据加载到新的 magento 安装中。

我担心简单地导入sql数据库可能行不通

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-20T07:34:43.033

您还可以尝试使用旧数据库的副本并在现有数据库上安装新的 magento 存储。这就是我到目前为止所做的，我可以继续使用现有的产品。确保数据库没有损坏。

下载最新版本的 magento 并开始安装程序。当 Magento 询问您数据库的访问数据时，请使用“旧”数据库的访问数据。Magento 会自动将您的数据库升级到 Magento 1.7。

之后，您必须安装您在旧商店中使用的主题和所有扩展。可以肯定的是，他们正在开发 magento 1.7。您必须复制媒体文件夹，才能使用产品和类别的所有图像。

这可能会对您有所帮助：http: [//indieswebs.com/blog/upgrade-to-latest-magento-using-fresh-install-technique/](http://indieswebs.com/blog/upgrade-to-latest-magento-using-fresh-install-technique/) [http://neoshops.de/2013/08/03/how-to-upgrade -magento 使用旧数据库/](http://neoshops.de/2013/08/03/how-to-upgrade-magento-using-old-database/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-20T00:50:57.457

我会先尝试导入旧数据库。只要成功完成，它就会得到一切。此页面有详细说明： http: [//www.magentocommerce.com/wiki/groups/227/moving_magento_to_another_server](http://www.magentocommerce.com/wiki/groups/227/moving_magento_to_another_server)

如果 db 导入失败，Magento 经常会在版本之间更改（即使很小）其数据库的结构。您最好的选择是安装完全相同版本的 Magento (1.6.something)，然后通过编辑 app/etc/local.xml 将其指向您的旧数据库。您应该清除缓存，以便 Magento 加载新版本的 local.xml - Admin->system->cache manager->allcache->refresh

然后您可以更新到最新版本。

# python - python检查列表元素的存在

> ID：12984106
> 
> 赞同：1
> 
> 时间：2012-10-20T00:22:09.030
> 
> 标签：python

我正在尝试解决类似于以下的更通用的问题。在下文中，我得到了 vow_array，它表示在某些文本中存在元音子集，例如，发送到我的程序。我需要将每个元音的存在打印为 0 或 1。

```
ch_a = 0
ch_e = 0
ch_i = 0
ch_o = 0
ch_u = 0

# vow_array is generated at runtime; here is an example
vow_array = ['a', 'o', 'u']

if 'a' in vow_array:
    ch_a = ch_a + 1
if 'e' in vow_array:
    ch_e = ch_e + 1
if 'i' in vow_array:
    ch_i = ch_i + 1
if 'o' in vow_array:
    ch_o = ch_o + 1
if 'u' in vow_array:
    ch_u = ch_u + 1

print ch_a, ch_e, ch_i, ch_o, ch_u 
```

我认为这段代码太长而且容易出错。有没有更紧凑的写法？另外，假设我必须对字母表中的所有“字母”执行此操作，我不想重复代码。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-20T00:30:17.930

确实。

如果您有具有相同前缀 ( `ch_a`, `ch_e`, ...) 的变量，则需要使用字典或列表对它们进行分组：

```
vowels = {
    'a': 0,
    'e': 0,
    'i': 0,
    'o': 0,
    'u': 0
}

vowel_array = ['a', 'o', 'u']

for vowel in vowels.keys():
    if vowel in vowel_array:
        vowels[vowel] += 1

print vowels 
```

一个更 Pythonic 的解决方案是这样的：

```
>>> from collections import Counter
>>>
>>> letters = 'i am a sentence'
>>> Counter(letters)
Counter({' ': 3, 'e': 3, 'a': 2, 'n': 2, 'c': 1, 'i': 1, 'm': 1, 's': 1, 't': 1}) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-20T00:33:18.087

与@Blender 的想法相同，只是使用了不同的初始化字典的方式（您可以使用 Python >2.7 中的 dict 理解来做到这一点）：

```
>>> vowels = dict((v, 0) for v in 'aeiou')
>>> vow_array = ['a', 'o', 'u']
>>> for vow in vow_array:
...   vowels[vow] += 1
>>> vowels
{'e': 0, 'i': 0, 'o': 1, 'u': 1, 'a': 1} 
```

如果排序是一个问题：

```
>>> for value in sorted(vowels):
...   print '{0}: {1}'.format(value, vowels[value])
...
a: 1
e: 0
i: 0
o: 1
u: 1 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-20T00:33:04.950

尝试这个：

```
ch_dict = {'a':0,'e':0,'i':0,'o':0,'u':0}
vow_array = ['a','o','u']
for d in vow_array:
   ch_dict[d] = ch_dict[d] + 1

print(ch_dict) 
```

# linux - 如何从 Windows 7 使用远程桌面连接到 Amazon Linux 实例？

> ID：12984107
> 
> 赞同：10
> 
> 时间：2012-10-20T00:22:10.540
> 
> 标签：linux, amazon-web-services, remote-desktop

我创建了一个 EC2 Amazon Linux 实例（是的，亚马逊版本的 linux..）

它已启动，但我无法使用远程桌面连接...

我想在这里做一些疯狂的事情吗？

我收到远程计算机在网络上不可用的消息

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-20T00:34:02.250

如果您的意思是 Windows RDP（远程桌面），那是您的问题。您很可能需要使用 SSH 客户端进行连接。我建议[腻子](http://www.putty.org/)。

设置服务器时，您应该已经收到了 SSH 密钥。您需要使用 PuttyGEN（与 Putty 下载相同的页面）转换该密钥以进行转换，然后将其与 Putty 一起使用以访问服务器。

尝试引导您完成在服务器上安装 GUI 和 VNC 的过程对于这里来说有点多，但请试一试[此视频](http://www.youtube.com/watch?v=WeIw4CjwQ44)。它看起来非常彻底，跳过它，我在他的过程中没有发现明显的错误。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-20T00:41:43.803

尝试安装*vnc4server*软件包。然后，您可以使用[TightVNC](http://www.tightvnc.com/)等客户端从 Windows 机器进行连接。您还需要在防火墙中打开端口号 5900，这是 VNC 的默认端口。

您还必须在 EC2 实例上安装桌面环境 - 默认情况下，您可能只有不会为您提供 GUI 的服务器包。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-05-10T17:06:32.977

供您参考，有些人发布了`remote desktop`conf`EC2`示例。

[http://activeintelligence.org/blog/archive/remote-graphical-linux-desktop-on-ec2/](http://activeintelligence.org/blog/archive/remote-graphical-linux-desktop-on-ec2/)

# python - 处理法语文本 Python

> ID：12984110
> 
> 赞同：2
> 
> 时间：2012-10-20T00:22:28.910
> 
> 标签：python, unicode

我正在尝试阅读一些法语文本并对单词进行一些频率分析。我希望保留带有变音符号和其他变音符号的字符。所以，我这样做是为了测试：

```
>>> import codecs
>>> f = codecs.open('file','r','utf-8')
>>> for line in f:
...     print line
...

Faites savoir à votre famille que vous êtes en sécurité. 
```

到目前为止，一切都很好。但是，我有一个法语文件列表，我通过以下方式对其进行迭代：

```
import codecs,sys,os

path = sys.argv[1]
for f in os.listdir(path):
    french = codecs.open(os.path.join(path,f),'r','utf-8')
    for line in french:
        print line 
```

在这里，它给出了以下错误：

```
rdholaki74: python TestingCodecs.py ../frenchResources | more
Traceback (most recent call last):
  File "TestingCodecs.py", line 7, in <module>
    print line
UnicodeEncodeError: 'ascii' codec can't encode character u'\xe0' in position 14: ordinal not in range(128) 
```

为什么同一个文件在作为参数传递而不是在代码中明确给出时会引发错误？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-20T00:26:16.197

因为你误解了原因。您正在管道输出的事实意味着 Python 无法检测到要使用的编码。如果[stdout](http://docs.python.org/library/sys.html#sys.stdout)不是[TTY](http://docs.python.org/library/stdtypes.html#file.isatty)，那么您需要在输出之前手动编码为 UTF-8。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-20T00:29:10.817

这是由于重定向导致的打印错误。你可以使用：

```
PYTHONIOENCODING=utf-8 python ... | ... 
```

如果您的终端不使用 utf-8，请指定另一种编码

# java - 使用 Java API 和 JMF 播放/加载 mp3，错误不支持格式

> ID：12984111
> 
> 赞同：0
> 
> 时间：2012-10-20T00:22:32.020
> 
> 标签：java, jmf

我正在尝试加载 MP3 文件。我的类路径中有 jmf.jar（windows 版本），并试图通过 Eclipse 运行我的类。但是在尝试运行时出现此错误。

我从 oracle 站点下载并设置了这个版本的 JMF：

[JMF2.1.1e\lib](http://www.oracle.com/technetwork/java/javasebusiness/downloads/java-archive-downloads-java-client-419417.html)

我正在使用 Oracle 的 Java 7（通过 Eclipse）

错误：

```
 javax.sound.sampled.UnsupportedAudioFileException: 
    could not get audio input stream from input stream  
    at  
 javax.sound.sampled.AudioSystem.getAudioInputStream
    (Unknown Source)
    at
 org.berlin.sound.WaveformDisplaySimulator.main
    (WaveformDisplaySimulator.java:47) 
```

这是代码：

```
import java.io.BufferedInputStream;
import java.io.File;
import java.io.FileInputStream;

import javax.media.Codec;
import javax.media.Format;
import javax.media.PlugInManager;
import javax.media.format.AudioFormat;
import javax.sound.sampled.AudioFileFormat;
import javax.sound.sampled.AudioInputStream;
import javax.sound.sampled.AudioSystem;

    public static void main(final String[] args) {
        try {

            System.out.println(System.getProperty("java.version"));
            final String MP3 = "com.sun.media.codec.audio.mpa.JavaDecoder";
            Codec mp3 = (Codec) Class.forName(MP3).newInstance();

            final Format input1 = new AudioFormat(AudioFormat.MPEGLAYER3);
            final Format input2 = new AudioFormat(AudioFormat.MPEG);
            final Format output = new AudioFormat(AudioFormat.LINEAR);
            PlugInManager.addPlugIn(
                "com.sun.media.codec.audio.mpa.JavaDecoder",                
                new Format[]{ input1, input2 },
                new Format[]{ output },
                PlugInManager.CODEC
            );

            final AudioFileFormat.Type [] types = AudioSystem.getAudioFileTypes();
            for (final AudioFileFormat.Type t : types) {
                System.out.println("Returning Type : " + t);
            } // End of the for //

            final String PATH = "C:\\Users\\Downloads\\soundcloud2.mp3"; 
            final File file = new File(PATH);
            final AudioInputStream audioInputStream = AudioSystem.getAudioInputStream(new BufferedInputStream(new FileInputStream(file)));

        } catch (final Exception e) {
            e.printStackTrace();
        }
    } // End of the method // 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T06:44:09.613

我永远无法让 oracle 下载工作。我最终从这个站点下载了一个 MP3 插件，然后在我的类路径中添加了该插件。这适用于 Eclipse 和没有。

[http://www.tritonus.org/plugins.html](http://www.tritonus.org/plugins.html)

此外，我不必修改我的代码。我能够读取 mp3 二进制数据并流式传输到输出。

```
import javax.sound.sampled.AudioFileFormat;
import javax.sound.sampled.AudioFormat;
import javax.sound.sampled.AudioInputStream;
import javax.sound.sampled.AudioSystem;
import javax.sound.sampled.DataLine;
import javax.sound.sampled.LineUnavailableException;
import javax.sound.sampled.SourceDataLine;

http://www.tritonus.org/plugins.html

    public static void main(final String [] args) throws Exception {
        System.out.println("Running");        
        System.out.println(System.getProperty("java.version"));        
        final AudioFileFormat.Type [] types = AudioSystem.getAudioFileTypes();
        for (final AudioFileFormat.Type t : types) {
            System.out.println("Returning Type : " + t);
        } // End of the for //                
        final String PATH = "C:\\Users\\bbrown\\Downloads\\swing-hacks-examples-20060109\\Ch10-Audio\\75\\soundcloud2.mp3";             
        final File file = new File(PATH);
        final AudioInputStream in = AudioSystem.getAudioInputStream(new BufferedInputStream(new FileInputStream(file)));

        AudioInputStream din = null;
        final AudioFormat baseFormat = in.getFormat();
        final AudioFormat decodedFormat = new AudioFormat(AudioFormat.Encoding.PCM_SIGNED,
                baseFormat.getSampleRate(),
                16,
                baseFormat.getChannels(),
                baseFormat.getChannels() * 2,
                baseFormat.getSampleRate(),
                false);

        System.out.println("Channels : " + baseFormat.getChannels());                
        din = AudioSystem.getAudioInputStream(decodedFormat, in);        
        rawplay(decodedFormat, din);
        in.close();       
        System.out.println("Done");
    }    

    private static synchronized void rawplay(final AudioFormat targetFormat, final AudioInputStream din) throws IOException, LineUnavailableException {              
        final byte[] data = new byte[4096];
        final SourceDataLine line = getLine(targetFormat);               
        if (line != null) {
            System.out.println("Entering ...");
            // Start
            line.start();
            int nBytesRead = 0, nBytesWritten = 0;
            while (nBytesRead != -1) {
                nBytesRead = din.read(data, 0, data.length);
                if (nBytesRead != -1) {
                    nBytesWritten = line.write(data, 0, nBytesRead);
                    System.out.println("... -->" + data[0] + " bytesWritten:" + nBytesWritten);
                }                                           
            } // End of while //            
            System.out.println("Done ...");
            // Stop
            line.drain();
            line.stop();
            line.close();
            din.close();
        } // End of the if //
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-05T03:39:32.580

AudioInputStream 无法打开 mp3 格式的声音，因为它们已被压缩，即使您将它们格式化为 PCM_SIGNED （如 wav 文件），它们也无法始终播放。你可能喜欢 jLayer ，我从没见过它崩溃

导入 javazoom.jl.player.advanced.AdvancedPlayer；

`

```
 try{
            File file = new File("C:/DMK.mp3");
            FileInputStream in = new FileInputStream(file);
            AdvancedPlayer player = new AdvancedPlayer(in);
            player.play();
        } 
        catch (Exception ex) {
            ex.printStackTrace();
        } 
```

`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-01-19T21:45:06.863

现在是 2017 年，我通过使用 mp3spi 包 ( [http://www.javazoom.net/mp3spi/mp3spi.html](http://www.javazoom.net/mp3spi/mp3spi.html) )添加了对 mp3 编码/解码的支持

有人好心地将其设置为对 Google Code 的依赖。这是gradle条目：

`compile group: 'com.googlecode.soundlibs', name: 'mp3spi', version: '1.9.5-1'`

所以这个或 maven 等价物应该在您的项目中为您提供 mp3 支持。

# wordpress - 在 Wordpress 中向 $wp 全局数组添加额外的键

> ID：12984115
> 
> 赞同：0
> 
> 时间：2012-10-20T00:23:18.070
> 
> 标签：wordpress, wordpress-theming

在 Wordpress 中向全局数组 $wp（或 Wordpress 中的任何全局变量）添加额外的键是否是一种好习惯。

我需要在 Wordpress 的所有文件中访问我的主题选项，但我不确定这是否是最好的方法。

就像是：

```
$wp['theme-options] = $theme_options; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T02:17:00.200

“Wordpress 中的所有文件”是什么意思？如果您正在谈论将函数/插件中的变量传递到模板文件中，则这些变量存储在全局 $wp_query 对象中。您可以使用 get() 和 set() 方法 -

```
function my_plugin(){
    global $wp_query;
    $wp_query->set( 'foo', 'bar' );
}
add_action( 'init', 'plugin' );           // happens early in the logic

function my_plugin_two(){
    global $wp_query;
    $foo = $wp_query->get( 'foo' );
    var_dump( $foo == 'bar' );            // TRUE
}
add_action( 'parse_request', 'plugin' );  // happens later 
```

然后在您的模板文件中，您将拥有 $foo 一切准备就绪。

```
// don't need to reference $wp_query,
// load_template() in wp-includes/template.php has set up the variable for you
get_header();
echo $foo; 
etc 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-20T00:27:59.207

创建比需要更多的全局变量绝不是一个好主意。

看看[这个](http://codex.wordpress.org/Creating_Options_Pages)

# c++ - 我的程序在 Windows 上使用 MSVC 和 g++ 编译器运行，但在 Linux 上不运行

> ID：12984117
> 
> 赞同：1
> 
> 时间：2012-10-20T00:23:25.403
> 
> 标签：c++, windows, linux, memory, g++

我正在为一项研究任务编写遗传算法。我不是一个非常有经验的 C++ 程序员（因为我是一名数学家），但我管理我的程序在 Windows 环境中使用 MSVC 2008 和 g++ 编译器正确编译和运行（我使用 CygWin 在 Windows 7 上运行 g++）。现在，问题是这个程序必须在 Linux 环境下使用 g++ 的集群计算机上运行，​​但它总是在执行时崩溃（尽管至少它可以正确编译）。我已经解决了明显的细节（如使用 / 而不是 \ 作为文件名），但无法使其在 Linux 上正常运行。

但是，当我在下面评论函数“Cruce”时，程序结束了，尽管它显然没有执行所需的任务。这是这样一个函数的代码，以及它调用的其他函数（唯一的全局变量是 BITGEN，它是一个值为 30 的整数，用于浮点数的格雷码转换）：

```
 void xPC_BLX(double d, const vector<double>& P1, const vector<double>& P2,
    vector<double>& Hijo1, vector<double>& Hijo2, int genes){

    double I, A1, C1;
    int i;

    for (i=0; i < genes; i++)
    {

        I= d * fabs(P1[i]-P2[i]);

        A1=P1[i]-I; if (A1<0) A1=0.0;
        C1=P1[i]+I; if (C1>1) C1=1.0;
        Hijo1[i]= A1 + Rand()*(C1-A1);

        A1=P2[i]-I; if (A1<0) A1=0.0;
        C1=P2[i]+I; if (C1>1) C1=1.0;
        Hijo2[i]= A1 + Rand()*(C1-A1);
        }
    }

/**********************************************************/
/* Itoc and Ctoi translate ints to strings and vice versa */
/**********************************************************/
    unsigned long int Ctoi(char *Cad_ent,  int length){

        int i;      
    unsigned long n;    

    n = (unsigned long) 0;
    for (i=0; i<length; i++)
    {
        n <<= 1;
        n += (*Cad_ent++ - (int) '0');
    }
    return(n);
    }

    void Itoc(unsigned long int n, char *Cad_sal, int length){

        int i;      

        for (i=length-1; i>=0; i--)
        {
            Cad_sal[i] = (char)('0' + (n & 1));
            n >>= 1;
        }
    }

/*****************************************************************/
/* Translations between fixed point ints and reflected Gray code */
/*****************************************************************/

    void Gray(char *Cad_ent, char *Cad_sal, int length){

      int i;
      char last;

       last = '0';
       for (i=0; i<length; i++)
       {
        Cad_sal[i] = (char)('0' + (Cad_ent[i] != last));
        last = Cad_ent[i];
       }
    }

/*************************************************************************/
/* Translations between string representation and floating point vectors */
/*************************************************************************/
    void StringRep(const vector<double> vect, char *Cad_sal, int genes){

        int i;
        unsigned long int n;
        int pos;
        double INCREMENTO;
        static char *tmpstring;
        static int flag = 1;

        if (flag) {
        tmpstring = (char*) calloc (genes*BITGEN,sizeof(char));
        flag = 0;
        }

        pos = 0;
        for (i=0; i < genes; i++)
        {

        INCREMENTO=(1-0)/(pow(2.0, (double) BITGEN) - 1.0);

        n = (int) ((vect[i] - 0) / INCREMENTO + 0.5);

        Itoc(n, tmpstring, BITGEN);
        Gray(tmpstring, &Cad_sal[pos], BITGEN);

        pos += BITGEN;
        }
        Cad_sal[pos] = '\0';

    }

/*****************************************/
    int DistHam(char *Cr_1, char *Cr_2, int genes){

         int i, dist;
         dist=0;

         for (i=0; i<genes*BITGEN; i++) if (Cr_1[i]!=Cr_2[i]) dist++;

         return dist ;
    }

/**********************/
/* CROSS OPERATOR  */
/**********************/

    void Cruce(int& fin, int genes, vector<vector<double> >& POPULATION,
        vector<vector<double> >& CONTROL, double GA_THR)
    {

        int i, j, temp, mom, dad;
        static char *String1, *String2;
        static int flag=1;
        vector<double> newind(genes+1,0), newcont(2,0);

        if (flag) {
        String1 = (char*) calloc (genes*BITGEN,sizeof(char));
        String2 = (char*) calloc (genes*BITGEN,sizeof(char));
        flag = 0;
        }

        vector<int> sample(TAMPOP,0);  
        for (i=0; i < TAMPOP; i++) sample[i] = i;

    for (i=0; i < TAMPOP; i++)
    {
        j = Randint(i,TAMPOP-1);
        temp = sample[j];
        sample[j] = sample[i];
        sample[i] = temp;
    }

    for (i=0; i < TAMPOP; i++) CONTROL[i][0]=0;

    fin=TAMPOP;

    for (i=0; i < TAMPOP/2; i++)
    {
        mom=sample[2*i]; 
        dad=sample[2*i+1];

        StringRep(POPULATION[mom], String1, genes);
        StringRep(POPULATION[dad], String2, genes);

        if (DistHam(String1, String2, genes)/2.0 > GA_THR)
        {

            POPULATION.push_back(newind);

            POPULATION.push_back(newind);

            CONTROL.push_back(newcont);

            CONTROL.push_back(newcont);

            xPC_BLX(1,POPULATION[mom],POPULATION[dad],POPULATION[fin],   
                POPULATION[fin+1], genes);

            CONTROL[fin][0]=1;
            CONTROL[fin+1][0]=1;
            fin=fin+2;  

        }
    }
} 
```

为了找到可能的错误，我已经尽力了几天，但它是徒劳的。我猜这个错误必须与内存问题有关（因为我总是得到一个分段错误错误），但我不知道它在哪里。Windows 和 Linux 处理内存的方式应该有一个我不知道的关键区别。你们中的任何人都可以帮助我吗？

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-21T13:40:57.470

我在提供的代码中看到了潜在的错误。

```
 static char *tmpstring;
    static int flag = 1;

    if (flag) {
        tmpstring = (char*) calloc (genes*BITGEN,sizeof(char));
        flag = 0;
    } 
```

`StringRep()`如果使用不断增长的参数多次调用函数会发生什么`genes`：缓冲区不会增长，因此有人将在分配的第一个缓冲区之外写入。注意，同样适用于 function `Cruce()`。

然后我认为关于`fin=TAMPOP;`. 没有解释什么是`TAMOP`. 但是你在做`POPULATION[fin+1]`,`CONTROL[fin+1][0]=1;`或`fin=fin+2;`.

问候。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-21T13:23:20.990

一些可能对您有所帮助的一般提示：

*   `-Wall -Wextra`使用选项编译`g++`并改进您的源代码，直到所有警告都消失

*   尝试使用[clang++](http://clang.llvm.org/)编译器也使用`-Wall` （或类似）选项进行编译

*   `-g`使用选项（除了）进行编译`-Wall`以获取调试信息

*   使用[gdb](http://www.gnu.org/software/gdb/)调试您的程序（并在调试器下运行程序，然后`bt`用于回溯等...）

*   使用[valgrind](http://valgrind.org/)查找内存泄漏

*   避免使用`calloc`and `malloc`，最好使用标准 C++ 容器（如`std::string`,`std::vector<>`等`std::map<>`）。

此外，在您自己的笔记本电脑或台式机上安装 Linux 发行版，并通过命令行学习使用 Linux。

# android - 如何管理 apk 卸载

> ID：12984118
> 
> 赞同：0
> 
> 时间：2012-10-20T00:23:25.403
> 
> 标签：android

我有一个应用程序在用于存储数据对象的 SD 卡中写入一些文件。当用户删除应用或更新应用时，这些文件仍保留在 SD 中，不会随 apk 一起删除。如果我更改应用程序的数据管理结构，这可能会导致一些烦人的问题，仅检查这些 dat 文件是否由于各种原因已经存在，真的很难解决。

当应用程序未安装或更新而无需用户手动干预时，有没有办法让 Android 操作系统也删除这些文件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T01:02:19.180

对于更新案例，是的。实现一个`BroadcastReceiver`子类...

```
public class MyBroadcastReceiver extends BroadcastReceiver {
    @Override
    public void onReceive(final Context context, final Intent intent) {
        if (intent.getData().equals(Uri.parse("package:<YOUR APP'S PACKAGE>"))) {
            // Clean up for the new app install
        }
    }
} 
```

...然后`<receiver>`在清单中添加一个标签：

```
<receiver android:name =".MyBroadcastReceiver">
    <intent-filter>
       <action android:name="android.intent.action.PACKAGE_REPLACED"/>
       <data android:scheme="package"/> 
    </intent-filter>
</receiver> 
```

还有一个`PACKAGE_REMOVED`动作，但是在删除应用程序*后*`Intent`会触发该动作，因此您没有机会进行清理。

 ** * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-20T10:55:05.017

> 当用户删除应用或更新应用时，这些文件仍保留在 SD 中，不会被 apk 删除

那么你应该将它们存储在`getExternalFilesDir()`or中`getExternalCacheDir()`。这些目录中的文件存储在外部存储中，但在卸载应用程序时会自动删除。*

# cuda - 2-GPU 卡上的 PCI-e 通道分配？

> ID：12984119
> 
> 赞同：7
> 
> 时间：2012-10-20T00:23:48.647
> 
> 标签：cuda, gpu, gpgpu, nvidia, pci-e

操作的数据速率`cudaMemcpy`很大程度上受分配用于从 CPU 到 GPU 运行的 PCI-e 3.0（或 2.0）通道数量的影响。我很好奇如何在包含两个 GPU 的 Nvidia 设备上使用 PCI-e 通道。

Nvidia 有一些产品在单个 PCI-e 设备上具有两个 GPU。例如：

*   GTX 590 包含两个 Fermi GF110 GPU
*   GTX 690 包含两个 Kepler GK104 GPU

与许多较新的显卡一样，这些设备安装在`PCI-e 16`插槽中。对于仅包含*一个*GPU 的卡，GPU 可以使用 16 个 PCI-e 通道。

*如果我的设备包含两个 GPU（如 GTX 690），但我只在**其中一个**GPU上运行计算作业，那么**所有 16 个 PCI-e 通道是否可以为正在使用的一个 GPU 提供服务？***

* * *

将其显示为 ascii 艺术...

**[** GTX690 (2x GF110) **]** ------16 PCI-e 通道 ----- **[** CPU **]**

* * *

我**不是在谈论**CPU 连接到两张各有一个 GPU 的卡的情况。（如下图）

**[** GTX670 (1x GK104) **]** ------ PCI-e 通道 ----- **[** CPU **]** ------ PCI-e 通道 ----- **[** GTX670 (1x GK104) **]**

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-20T01:01:20.973

GTX 690 使用[PLX PCIe Gen 3 桥接芯片](http://www.fudzilla.com/home/item/27562-evga-gtx-690-4gb-reviewed/27562-evga-gtx-690-4gb-reviewed?showall=1)将两个 GK104 GPU 与主机 PCIe 总线连接起来。从主机到 PLX 设备以及从 PLX 设备到每个 GPU 的完整 x16 连接（PLX 设备共有 48 个通道）。因此，如果只使用一个 GPU，您可以为该 GPU 实现大约完整的 x16 带宽。您可以通过使用[bandwidthTest进行探索](http://docs.nvidia.com/cuda-samples/index.html#utilities)包含在 CUDA 样本中。bandwidthTest 将针对单个 GPU（卡上的两个 GPU，可以通过命令行选项选择），您应该会看到大约全带宽，具体取决于系统。如果您的系统支持 Gen3，您应该会看到完整的 PCIe x16 Gen 3 带宽（不要忘记使用 --memory=pinned 选项），这将根据特定系统而有所不同，但应该在 6GB/s 以北（可能在 9-11GB/s 范围内）。如果您的系统支持 Gen2，您应该会看到 4-6GB/s 范围内的数据。GTX 590 也有类似的说法，但它只是 Gen2 设备并使用不同的桥接芯片。bandwidthTest 的结果确认在根端口和任一 GPU 之间存在完整的 x16 逻辑路径。当然没有免费的午餐，

# jquery - jQuery GeoComplete - 按纬度和经度初始化位置

> ID：12984124
> 
> 赞同：2
> 
> 时间：2012-10-20T00:24:50.313
> 
> 标签：jquery, google-maps, maps

知道如何`init`定位（因此引脚被丢弃）`GeoComplete`吗？

```
 $("#geocomplete").geocomplete({
    map: ".map_canvas",
    location: [52.4078567, 16.92718339999999], // is it centring the map, no pin thought
    markerOptions: {
        draggable: true
    },
    details: "form",
    types: ["geocode", "establishment"]

}); 
```

**上面的例子确实使地图居中，但它没有放下一个 pin**。为什么？
在线演示[在这里](http://testowy.site44.com/)。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-20T14:49:25.690

当您在初始化时指定经度和纬度时，似乎没有放置图钉。

另一种方法是从初始化中删除 location 选项，并在创建 geocomplete 实例后一次性搜索默认位置：

```
// Run this function once after the first search
$("#geocomplete").geocomplete(options)
  .one("geocode:result", function(event, result){

    // Set the zoom level you require for the default map
    var map = $("#geocomplete").geocomplete("map");
    map.setZoom(13);

    // Optionally empty the geocomplete input field
    $("#geocomplete").val("");

}); 
```

然后是按地址查找：

```
$("#geocomplete").geocomplete("find", "Poznań, Poland"); 
```

或按经度和纬度：

```
var lat_and_long = "52.4078567, 16.9271833";
$("#geocomplete").geocomplete("find", lat_and_long); 
```

# asp.net-mvc - Asp.Net MVC - 我将如何在我的应用程序中维护用户状态

> ID：12984127
> 
> 赞同：0
> 
> 时间：2012-10-20T00:25:11.207
> 
> 标签：asp.net-mvc, azure

我知道有一些这样的问题，但问题更多的是关于这种具体情况。

我正在开发一个在线考试平台。测试是一组图像和归属问题。它托管在 Azure 上并使用 MVC 4。

如果用户进行了一半的测试并且浏览器崩溃或其他原因使其偏离测试并返回，我会多么喜欢它，它将提供恢复选项。

我自己有一个想法，但想知道是否还有其他选择。我正在考虑使用本地存储。当用户开始测试时，测试的信息保存在本地存储中，每次他移动到新图像时，它都会更新本地状态。然后，如果加载了测试播放器，它将检查是否有任何正在进行的测试可用。

我该怎么做？任何一个女巫类似的问题/解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T07:07:32.397

我不建议您将此信息存储在客户端浏览器上。用户可以访问本地存储、cookie 等......并且可以对其进行修改。您可以将测试开始时间存储在服务器上的数据库中。然后，每次用户向服务器发送请求以回答问题时，您都将验证测试是否仍处于活动状态或已超过最大允许时间。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-20T00:48:05.910

本地存储不是一个好的选择，因为它特定于每个实例。这意味着如果您有两个 Web 角色实例（建议的最小值），那么每个实例都将拥有自己的本地存储。它们不是共享的，并且无法访问特定机器上的本地存储。

你真的有两个选择。您可以使用 SQL Azure 等数据库，或使用[Azure 缓存](http://msdn.microsoft.com/en-us/library/windowsazure/gg278356.aspx)。Azure 缓存可能更容易，因为序列化/反序列化复杂对象非常容易，但缺点是缓存仅在 72 小时内有效。如果缓存对象在 72 小时内未访问/更新，则会被清除。

# c# - .Net 套接字类需要说明

> ID：12984132
> 
> 赞同：0
> 
> 时间：2012-10-20T00:25:59.773
> 
> 标签：c#, .net, sockets, tcp, stream

我对 .NET 套接字实现有几点看法，所以我将按顺序说明它们：

1.  我的理解是，Socket 的实例在其内部类实现中具有可变大小的缓冲区，实际上是一个字节队列，并且与您在应用程序中声明和定义的应用程序缓冲区不同。
2.  `stream`在使用 socket type:和 protocol type:的同步模式下`tcp`，当使用方法`Receive`（阻塞进程）时，带有参数的应用程序字节缓冲区实际上是在与您声明的应用程序字节缓冲区大小相同的块中将套接字缓冲区出队并在您的应用程序中定义，然后将此块分配给您发送给`Receive`功能的应用程序字节缓冲区。
3.  如果上述情况成立，那么当字节缓冲区的长度大于套接字队列中的字节元素时会发生什么？
4.  此外，如果 2 正确，则`Send`套接字的方法将数据发送到端点连接的主机套接字缓冲区而不是应用程序缓冲区。
5.  最后，由于 Socket 方法`Accept`是非阻塞的，因此在底层实现中为它创建了一个线程，并且它有一个自己的队列，当`Accept`方法被调用时它会出队。

我要求所有这些来检查我到目前为止的理解是否正确，或者它是否大部分是错误的并且需要纠正。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T01:02:12.623

首先.net 的实现主要是一个围绕winsock 的托管包装器。

> 我的理解是，Socket 的实例在其内部类实现中具有可变大小的缓冲区，实际上是一个字节队列，并且与您在应用程序中声明和定义的应用程序缓冲区不同。

到目前为止还好。

> 在使用套接字类型的同步模式下：...当使用 Receive 方法时

当您调用 Receive 时，数据将被复制到提供的缓冲区中，并返回写入的字节数。这很可能小于缓冲区的大小。如果您的缓冲区不够大，无法容纳 TCP 堆栈排队的所有数据，则只会复制可以复制到缓冲区中的尽可能多的字节，剩余的字节将在您下次调用 Receive 时返回。

套接字将所有发送（或接收）的数据视为不间断的连续流。但是，通过网络发送的数据受制于网络或主机拆分数据以满足最大数据包大小等限制。您的代码应该假设数据可能以任意大小的块到达。顺便说一句，这种消息更有可能出现在生产环境中而不是开发/测试环境中。

> 套接字将数据发送到端点连接的主机套接字缓冲区而不是应用程序缓冲区

当数据被 TCP 堆栈排队时，Send 将返回。如果 TCP 窗口已满并且远程端点没有读取套接字（例如，因为它正在等待自己的发送完成），这可能是很长时间。

> 最后，由于 Socket 方法 Accept 是非阻塞的

根据文档，Accept 将阻塞直到接收到连接，或者（在非阻塞模式下）同步接受第一个可用连接，或者如果没有可用连接则抛出。

[这](http://www.kohala.com/start/tcpipiv2.html)仍然是相关的，仍然建议任何即将开始编写网络代码的人阅读。

# php - '试图将 HTML 表存储为 PHP 变量，但使用 foreach 循环构建。可能的？

> ID：12984135
> 
> 赞同：1
> 
> 时间：2012-10-20T00:26:22.557
> 
> 标签：php, html, loops

嗨，我认为这只是一个语法问题，但我可能正在做一些 PHP 不适合做的事情。

我正在尝试绘制一个 HTML 表格，使用一个数组来填充表格。以标题为例。

$headers 是我尝试过的标题数组：

```
$html_table = '
                <table border="1" cellspacing="0" cellpadding="2">
                    <tr>
                        foreach($headers as $header)
                        {
                        echo "<th> $header </th>";                          
                        }
                    </tr>
'; 
```

产生的想法是：

```
 <table border="1" cellspacing="0" cellpadding="2">
    <tr>
        <th>Heading 1</th>
        <th>Heading 2</th>
        <th>Heading 3</th>
        ...
        <th>Heading 99</th>
    </tr> 
```

只需稍后要求 $html_table

可以说此刻我得到一个带有“$header”的单标题列，因为循环没有在变量方程中运行。

我将 HTML 存储为这样的变量的原因是因为我想将它与其他生成的 html 连接（使用？），即

```
$html_table .= '</table>'; 
```

稍后（当然，中间的实际位更复杂，与从数据库中检索数据以填充表有关。

我哪里错了？谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-20T00:27:40.710

从引号中取出 foreach

```
$html_table = '
            <table border="1" cellspacing="0" cellpadding="2">
                <tr>';
foreach($headers as $header){
    $html_table .= "<th> $header </th>";                          
}
$html_table .='
                </tr>
'; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-20T00:29:22.060

> ```
> $html_table = '<table border="1" cellspacing="0" cellpadding="2"><tr>'; 
> 
> foreach($headers as $header) 
>   { 
>     $html_table .= "<th>". $header."</th>";                           
>   }
>  $html_table .= '</tr>'; 
> ```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-20T00:29:49.973

```
$html_table = '<table border="1" cellspacing="0" cellpadding="2"><tr>';

foreach($headers as $header)
{
    $html_table .=  '<th>'. $header .'</th>';                          
}
$html_table .= '</tr></table>';

echo $html_table; 
```

不过，这很腐烂。您应该考虑不在 php 中回显 html ...

```
<table border="1" cellspacing="0" cellpadding="2">
    <tr>
        <?php foreach($headers AS $header): ?>
        <th><?php echo $header; ?></th>
        <?php endforeach; ?>
    </tr>
</table> 
```

# mathematical-optimization - AMPL：如何在变量表达式之间进行限制？

> ID：12984137
> 
> 赞同：2
> 
> 时间：2012-10-20T00:26:31.800
> 
> 标签：mathematical-optimization, ampl

我的问题如下：我必须使用 AMPL 解决关于混合的线性规划问题。我可以通过制作一个包含模型和数据的文件来解决它，但是我应该做的是制作一个与数据分离的更通用的模型。我的麻烦在于变量之间的限制——我不知道如何概括这些，然后在数据中反映。例如，我有以下限制：

```
subject to restriction1:
    Xc2 + Xd2 <= Xa2 + Xb2;
subject to restriction2:
    Xc3 + Xd3 >= 0.5*(Xa3 + Xb3); 
```

其中 Xc2、Xd2、Xa2 等都是变量。我找不到任何解释这个的教程。希望你能帮我一点...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-20T12:58:49.213

您通常希望将模型、参数和命令分开，因为它们可以独立变化。这是一个例子：

将其放入模型文件**example.mod**

```
var x1 >= 0;
var x2 >= 0;

param c;

maximize z:
  x1 + x2;

s.t.
constraint_1:
  x1 + x2 <= c; 
```

将参数的实际值放入单独的数据文件**examp.dat**

```
data;

param c := 1; 
```

将所有命令放入另一个文件**example.run**

```
#option solver "enter your solve name here and remove the #";

solve;

display x1, x2; 
```

您可以按如下方式从命令行运行它（取决于您的操作系统和设置）

ampl 考试.mod 考试.dat 考试.运行

这打印

```
LP_SOLVE 4.0.1.0: optimal, objective 1
1 simplex iterations
x1 = 0
x2 = 1 
```

在我的机器上。

如果我没记错的话，.mod、.dat 和 .run 扩展名不是必需的，你也可以有 .txt。

如果您还有其他问题，我推荐直接从 AMPL 开发人员那里免费下载的 AMPL 书：

[http://www.ampl.com/BOOK/download.html](http://www.ampl.com/BOOK/download.html)

特别是，请参阅第 10 页*的 1.4 AMPL 中的线性规划模型*，它们展示了如何将模型与数据分离。

* * *

**更新** 我仍然不能 100% 确定我是否正确理解了这个问题。我假设您希望根据某些情况启用/禁用约束。

在下面的示例中，只有一个模型，数据决定了传递给求解器的最终模型中包含的实际约束。在示例中，我启用`constraint_a`但我排除`constraint_b`. 该模型读起来和写起来很不愉快，因为您必须相应地编写模型。

您可以使用命令检查生成的模型`solexpand _scon;`。另请参阅应启用的其他选项。

```
var x1 >= 0;
var x2 >= 0;

param is_a_enabled;
param is_b_enabled;

maximize z:
  x1 + x2;

s.t.
constraint_a:
  is_a_enabled*(x1+x2-3) <= 0; # x1+x2<=3 if enabled, 0<=0 otherwise

constraint_b:
  is_b_enabled*(x1+2*x2-4)<=0; # x1+2*x2<=4 if enabled, 0<=0 otherwise

# you can put everything below into a separate file
data;

param is_a_enabled := 1;
param is_b_enabled := 0;

option presolve 10;
option substout 1;
option show_stats 1;

solve;

print "Constraints finally passed to the solver are:";
solexpand _scon;

print "Solution:";   
display x1, x2; 
```

这产生了以下输出

```
Presolve eliminates 1 constraint.
Adjusted problem:
2 variables, all linear
1 constraint, all linear; 2 nonzeros
        1 inequality constraint
1 linear objective; 2 nonzeros.

LP_SOLVE 4.0.1.0: optimal, objective 3
1 simplex iterations
Constraints finally passed to the solver are:
subject to constraint_a:
        x1 + x2 <= 3;

Solution:

x1 = 0
x2 = 3 
```

# c# - 我可以以编程方式登录 Reporting Services 并重定向到该页面吗？

> ID：12984139
> 
> 赞同：0
> 
> 时间：2012-10-20T00:26:37.817
> 
> 标签：c#, asp.net, asp.net-mvc, iis, reporting-services

我目前有一个不属于域的 SQL Server Reporting Services 站点（我知道这并不理想，但在这种情况下我没有选择）。我想做的是以编程方式从我的 ASP.NET MVC 页面登录到站点，然后重定向到报告服务页面以查看报告，而无需键入用户名和密码。我知道这不是最好的做法，但在这种情况下，这是我需要做的。

我正在考虑这样的事情，但它不起作用：

```
public ActionResult LogIntoReportingServices()
{
    HttpWebRequest wr = WebRequest.CreateHttp("http://example.com/Reports");
    NetworkCredential nc = new NetworkCredential("report_user", "password");
    wr.Credentials = nc;
    wr.GetResponse();

    return Redirect("http://example.com/Reports");
} 
```

我猜我的代码与需要的代码相差甚远，但我认为您可以通过查看它来理解我想要做什么。我猜我可能需要 POST 才能登录 Reporting Services/IIS，但我不确定。

我拥有的 Reporting Services 版本是 SQL Server 2008（不是 R2）附带的版本。如果有人能指出我正确的方向，那将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T01:38:33.597

看起来我会接受上述评论中 Jeroen 的建议。（http://stackoverflow.com/questions/6144513/how-can-i-use-a-reportviewer-control-in-an-asp-net-mvc-3-razor-view）

谢谢

# java - 绝对最快的 Java HTML 转义函数

> ID：12984140
> 
> 赞同：1
> 
> 时间：2012-10-20T00:26:49.163
> 
> 标签：java, html, optimization, escaping, stringescapeutils

基本上，这篇文章是一个挑战。我今天一直在尝试优化 HTML 转义功能，并取得了一定的成功。但我知道有一些认真的 Java 黑客可能比我做得更好，我很想学习。

我一直在分析我的 Java Web 应用程序，发现一个主要热点是我们的字符串转义函数。我们目前使用[Apache Commons Lang](http://commons.apache.org/lang/)来完成这项任务，调用 StringEscapeUtils.escapeHtml()。我认为既然它被广泛使用，它会相当快，但即使是我最天真的实现也明显更快。

这是我与 Naive 实现一起使用的基准代码。它测试不同长度的字符串，有些只包含纯文本，有些包含需要转义的 HTML。

```
public class HTMLEscapeBenchmark {

    public static String escapeHtml(String text) {
        if (text == null) return null;

        StringBuilder sb = new StringBuilder();
        for (int i = 0; i < text.length(); i++) {
            char c = text.charAt(i);

            if (c == '&') {
                sb.append("&amp;");
            } else if (c == '\'') {
                sb.append("&#39;");
            } else if (c == '"') {
                sb.append("&quot;");
            } else if (c == '<') {
                sb.append("&lt;");
            } else if (c == '>') {
                sb.append("&gt;");
            } else {
                sb.append(c);
            }
        }

        return sb.toString();
    }

    /*
    public static String escapeHtml(String text) {
        if (text == null) return null;
        return StringEscapeUtils.escapeHtml(text);
    }
    */

    public static void main(String[] args) {

        final int RUNS = 5;
        final int ITERATIONS = 1000000;

        // Standard lorem ipsum text.
        String loremIpsum = "Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut " +
            "labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut " +
            "aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum " +
            "dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia " +
            "deserunt mollit anim id est laborum. ";
        while (loremIpsum.length() < 1000) loremIpsum += loremIpsum;

        // Add some characters that need HTML escaping.  Bold every 2 and 3 letter word, quote every 5 letter word.
        String loremIpsumHtml = loremIpsum.replaceAll("[A-Za-z]{2}]", "<b>$0</b>").replaceAll("[A-Za-z]{5}", "\"$0\"");

        System.out.print("\nNormal-10");
        String text = loremIpsum.substring(0, 10);
        for (int run = 1; run <= RUNS; run++) {
            long start = System.nanoTime();
            for (int i = 0; i < ITERATIONS; i++) {
                escapeHtml(text);
            }
            System.out.printf("\t%.3f", (System.nanoTime() - start) / 1e9);
        }

        System.out.print("\nNormal-100");
        text = loremIpsum.substring(0, 100);
        for (int run = 1; run <= RUNS; run++) {
            long start = System.nanoTime();
            for (int i = 0; i < ITERATIONS; i++) {
                escapeHtml(text);
            }
            System.out.printf("\t%.3f", (System.nanoTime() - start) / 1e9);
        }

        System.out.print("\nNormal-1000");
        text = loremIpsum.substring(0, 1000);
        for (int run = 1; run <= RUNS; run++) {
            long start = System.nanoTime();
            for (int i = 0; i < ITERATIONS; i++) {
                escapeHtml(text);
            }
            System.out.printf("\t%.3f", (System.nanoTime() - start) / 1e9);
        }

        System.out.print("\nHtml-10");
        text = loremIpsumHtml.substring(0, 10);
        for (int run = 1; run <= RUNS; run++) {
            long start = System.nanoTime();
            for (int i = 0; i < ITERATIONS; i++) {
                escapeHtml(text);
            }
            System.out.printf("\t%.3f", (System.nanoTime() - start) / 1e9);
        }

        System.out.print("\nHtml-100");
        text = loremIpsumHtml.substring(0, 100);
        for (int run = 1; run <= RUNS; run++) {
            long start = System.nanoTime();
            for (int i = 0; i < ITERATIONS; i++) {
                escapeHtml(text);
            }
            System.out.printf("\t%.3f", (System.nanoTime() - start) / 1e9);
        }

        System.out.print("\nHtml-1000");
        text = loremIpsumHtml.substring(0, 1000);
        for (int run = 1; run <= RUNS; run++) {
            long start = System.nanoTime();
            for (int i = 0; i < ITERATIONS; i++) {
                escapeHtml(text);
            }
            System.out.printf("\t%.3f", (System.nanoTime() - start) / 1e9);
        }
    }
} 
```

在我两岁的 MacBook Pro 上，我得到以下结果。

Commons Lang StringEscapeUtils.escapeHtml

```
Normal-10     0.439     0.357     0.351     0.343     0.342
Normal-100     2.244     0.934     0.930     0.932     0.931
Normal-1000     8.993     9.020     9.007     9.043     9.052
Html-10     0.270     0.259     0.258     0.258     0.257
Html-100     1.769     1.753     1.765     1.754     1.759
Html-1000     17.313     17.479     17.347     17.266     17.246 
```

幼稚的实现

```
Normal-10    0.111    0.091    0.086     0.084     0.088
Normal-100    0.636     0.627     0.626     0.626     0.627
Normal-1000     5.740     5.755     5.721     5.728     5.720
Html-10     0.145     0.138     0.138     0.138     0.138
Html-100     0.899     0.901     0.896     0.901     0.900
Html-1000     8.249     8.288     8.272     8.262     8.284 
```

我将发布我自己在优化方面的最佳尝试作为答案。所以，我的问题是，你能做得更好吗？转义 HTML 的最快方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-20T00:26:49.163

这是我优化它的最佳尝试。我针对我希望纯文本字符串的常见情况进行了优化，但是对于带有 HTML 实体的字符串，我无法让它变得更好。

```
 public static String escapeHtml(String value) {
        if (value == null) return null;

        int length = value.length();
        String encoded;

        for (int i = 0; i < length; i++) {
            char c = value.charAt(i);

            if (c <= 62 && (encoded = getHtmlEntity(c)) != null) {
                // We found a character to encode, so we need to start from here and buffer the encoded string.
                StringBuilder sb = new StringBuilder((int) (length * 1.25));
                sb.append(value.substring(0, i));
                sb.append(encoded);

                i++;

                for (; i < length; i++) {
                    c = value.charAt(i);

                    if (c <= 62 && (encoded = getHtmlEntity(c)) != null) {
                        sb.append(encoded);
                    } else {
                        sb.append(c);
                    }
                }

                value = sb.toString();
                break;
            }
        }

        return value;
    }

    private static String getHtmlEntity(char c) {
        switch (c) {
            case '&': return "&amp;";
            case '\'': return "&#39;";
            case '"': return "&quot;";
            case '<': return "&lt;";
            case '>': return "&gt;";
            default: return null;
        }
    }

Normal-10     0.021     0.023     0.011     0.012     0.011
Normal-100     0.074     0.074     0.073     0.074     0.074
Normal-1000     0.671     0.678     0.675     0.675     0.680
Html-10     0.222     0.152     0.153     0.153     0.154
Html-100     0.739     0.715     0.718     0.724     0.706
Html-1000     6.812     6.828     6.802     6.802     6.806 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-20T01:03:05.887

> 我认为既然它被广泛使用，它会相当快，但即使是我最天真的实现也明显更快。

如果您查看 Apache 版本的源代码（[例如](http://grepcode.com/file/repo1.maven.org/maven2/commons-lang/commons-lang/2.1/org/apache/commons/lang/StringEscapeUtils.java#StringEscapeUtils.escapeHtml%28java.lang.String%29)），您会发现它正在处理您的版本忽略的许多情况：

*   它对 HTML 4 中定义的所有实体（以及应用程序添加的其他实体）进行编码，而不仅仅是硬连线的最小子集
*   它对所有大于或等于 0x7F 的字符进行编码。

简而言之，它更慢，因为它更通用。

# c++ - 无法为 std::less / std::greater 实例化 binary_function

> ID：12984145
> 
> 赞同：3
> 
> 时间：2012-10-20T00:27:45.777
> 
> 标签：c++, algorithm, data-structures, stl, functional-programming

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-20T00:43:06.740

You are the victim of [object slicing](http://en.wikipedia.org/wiki/Object_slicing).

When you assign `less<T>` or `greater<T>` to the `binary_function` type, the `operator()` they define is gone.

From [my favorite reference](http://en.cppreference.com/w/cpp/utility/functional/binary_function):

> binary_function does not define operator(); it is expected that derived classes will define this. binary_function provides only three types - first_argument_type, second_argument_type and result_type - defined by the template parameters.

You should pass `less<T>` or `greater<T>` in directly. You can also use [`pointer_to_binary_function`](http://en.cppreference.com/w/cpp/utility/functional/pointer_to_binary_function), but they've both been deprecated in C++11 in favor of [`function`](http://en.cppreference.com/w/cpp/utility/functional/function).

# android - AS3：声音类在 Android 上不起作用

> ID：12984147
> 
> 赞同：1
> 
> 时间：2012-10-20T00:28:00.130
> 
> 标签：android, actionscript-3, audio

我正在尝试为我的 as3 游戏使用一些音效。当我在 PC 上调试它时，一切正常，但是当我尝试直接在我的 android 设备上调试时，没有声音播放。我正在使用带有嵌入 mp3 文件的 Sound 类。有谁知道可能出了什么问题？

# ruby-on-rails - 试图强制 ssl，得到“这个网页有一个重定向循环”

> ID：12984148
> 
> 赞同：0
> 
> 时间：2012-10-20T00:28:03.900
> 
> 标签：ruby-on-rails, ruby, security, https

我试图强制我的控制器生成的所有 url 为“https”，否则重定向到 https。我尝试了[此博客](http://lucastej.blogspot.com/2008/01/ruby-on-rails-how-to-set-urlfor.html)中解释的方法以及 Olly 建议[的](https://stackoverflow.com/questions/1662262/rails-redirect-with-https)方法， 如果我尝试访问我的应用程序，则会收到此错误：

> **此网页有重定向循环**
> 
> https://'example.com' 上的网页导致了过多的重定向。清除此站点的 cookie 或允许第三方 cookie 可能会解决问题。如果不是，则可能是服务器配置问题，而不是您的计算机问题。

清除 cookie 无济于事。为什么会进入循环？我确保在 request.ssl 为 false 的情况下运行代码。我正在使用 Rails 2.3.10。所以这是我尝试过的，在我的应用程序控制器中我添加了：

```
 url_for unless (Rails.env.test? || Rails.env.development?) 
     def default_url_options(options) 
    { :only_path => false, :protocol => 'https' } unless (Rails.env.test? ||  Rails.env.development?) 
    end 
```

我也试过

```
def redirect_to_https
  redirect_to :protocol => "https://" unless (request.ssl? || Rails.env.test? || Rails.env.development? || local_request?)
end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T19:36:36.390

我正在使用的域在不同的应用程序之间共享，因此请求由 apache 服务器接收并转发到应用程序服务器，因此以这种方式强制执行 ssl 不起作用，因为应用程序将请求视为“本地”并且总是结束http 所以它进入一个重定向循环。我将改为在服务器级别强制执行 https。

# python - 交叉匹配两个列表

> ID：12984149
> 
> 赞同：1
> 
> 时间：2012-10-20T00:28:18.940
> 
> 标签：python

我有两个列表，我试图查看两个列表中元素中的子字符串之间是否存在任何匹配。

```
["Po2311tato","Pin2231eap","Orange2231edg","add22131dfes"]
["2311","233412","2231"] 
```

如果元素中的任何子字符串匹配第二个列表，例如“Po2311tato”，则将匹配“2311”。然后我想将“Po2311tato”放入一个新列表中，其中第一个匹配项的所有元素都将放入新列表中。所以新列表将是 ["Po2311tato","Pin2231eap","Orange2231edg"]

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-20T00:35:58.350

您可以使用以下语法`'substring' in string`来执行此操作：

```
a = ["Po2311tato","Pin2231eap","Orange2231edg","add22131dfes"]
b = ["2311","233412","2231"]

def has_substring(word):
    for substring in b:
        if substring in word:
            return True
    return False

print filter(has_substring, a) 
```

希望这可以帮助！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-20T00:40:44.693

通过使用列表理解，这可能比 jobby 的答案更简洁：

```
>>> list1 = ["Po2311tato","Pin2231eap","Orange2231edg","add22131dfes"]
>>> list2 = ["2311","233412","2231"]
>>> list3 = [string for string in list1 if any(substring in string for substring in list2)]
>>> list3
['Po2311tato', 'Pin2231eap', 'Orange2231edg'] 
```

这是否比 jobby 的版本更清晰/更优雅是一个品味问题！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-20T00:37:16.370

```
import re

list1 = ["Po2311tato","Pin2231eap","Orange2231edg","add22131dfes"]
list2 = ["2311","233412","2231"]
matchlist = []

for str1 in list1:
    for str2 in list2:
        if (re.search(str2, str1)):
            matchlist.append(str1)
            break

print matchlist 
```

# jquery-ui - 从jquery ui自动完成中的选择触发搜索

> ID：12984151
> 
> 赞同：0
> 
> 时间：2012-10-20T00:28:24.420
> 
> 标签：jquery-ui, autocomplete

如何相互触发/调用 jQuery UI 自动完成事件处理程序，例如，从选择处理程序触发搜索？

谢谢，里尔

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-07T16:29:38.370

上面的答案只对 jQueryUI **1.8.x**有效， 因为 jQueryUI **1.9.x**你必须添加一个超时：

> scott.gonzalez 说：“在 1.8 和 1.9 之间，自动完成发生了一些相当大的变化，特别是选择现在是同步的，而之前是异步的。”

更多的：

> scott.gonzalez 说：“正在发生的事情是选择一个项目总是会关闭菜单。关闭菜单会告诉自动完成忽略任何待处理的搜索。这包括您在菜单关闭之前立即手动触发的搜索。还值得注意的是您正在运行重复搜索，因为您在值更新之前触发了搜索。”

```
select: function(event, ui)
{
    var that = $(this);            
    setTimeout(function() {
      that.autocomplete("search");
    }, 1);
}, 
```

示例：http: [//jsfiddle.net/RB4N3/](http://jsfiddle.net/RB4N3/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-20T00:30:51.863

要触发[搜索](http://api.jqueryui.com/autocomplete/#method-search)：

```
$("#my-autocomplete").autocomplete("search", "SearchTerm"); 
```

一般来说，调用 jQueryUI 小部件方法使用`$("selector").widget("method" /*, options */)`

# video-streaming - Gstreamer 中的自适应流

> ID：12984155
> 
> 赞同：1
> 
> 时间：2012-10-20T00:28:49.440
> 
> 标签：video-streaming, gstreamer

我们如何使用 gstreamer 进行自适应流式传输？我已经使用 gstreamer 框架创建了客户端和服务器应用程序。我能够进行实时视频流。但是，我想根据网络状况采用自适应方式，比特率可以改变。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T17:26:39.317

最简单的方法是在服务器上以多种比特率和分辨率对内容进行编码和准备，并让客户端根据其可用带宽在内容之间切换。大多数 HTTP 流系统都遵循这一原则。

在服务器上的 gstreamer 上下文中，您需要设置多个管道来创建多比特率内容或使用 Tee 将视频从源拆分到不同的编码器。

我建议您通过 microsoft silverlight 平滑流式传输或任何自适应 HTTP 流式传输规范来获取更多详细信息。

# vb.net - 在 Visual Studio 2012 中加载 javascript 的问题

> ID：12984161
> 
> 赞同：0
> 
> 时间：2012-10-20T00:29:50.237
> 
> 标签：vb.net

嘿，我将如何加载此代码

[http://jsfiddle.net/xw89p/](http://jsfiddle.net/xw89p/)

在 Visual Studio 中的一个简单的 Web 表单中。

例如，我可以将其插入

```
 var rotation = function (){
  $("#image").rotate({
  angle:0, 
  animateTo:360, 
  callback:enter code here rotation,
  easing: function (x,t,b,c,d){        // t: current time, b: begInnIng value,
    c: change In value, d: duration
      return c*(t/d)+b;
  }
 });
    }
    rotation();​ 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-20T01:27:39.047

将该代码放入一个 JavaScript 文件 (.js)，然后在您的 Web 表单文件中，添加一个引用该 .js 文件的标记：

```
<script language="JavaScript" src="scripts.js"></script> 
```

第二种可能性是将该代码放在 Web 表单文件的脚本标记中：

```
<script>
var rotation = function (){
   $("#image").rotate({
      angle:0, 
      animateTo:360, 
      callback: rotation,
      easing: function (x,t,b,c,d){        // t: current time, b: begInnIng value, c: change In value, d: duration
          return c*(t/d)+b;
      }
   });
}
$(document).ready(function(){
    rotation();​
});
</script> 
```

当然，在包含 js 文件或内联脚本标记之前，您需要确保首先引用 jQuery 和您需要的任何其他 javascript 库。

希望这可以帮助

编辑：这是我这边的工作版本：

```
<%@ Page Language="vb" AutoEventWireup="false" CodeBehind="Default.aspx.cs" Inherits="WebApplication1._Default" %>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html>
<img src="https://www.google.com/images/srpr/logo3w.png" id="image">​
    <script  type="text/javascript"
    src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js">
</script>
<script type="text/javascript" src="http://jqueryrotate.googlecode.com/svn/trunk/jQueryRotate.js"></script>
<script type="text/javascript">
    function rotation() {
        $("#image").rotate({
            angle: 0,
            animateTo: 360,
            callback: rotation,
            easing: function(x, t, b, c, d) { // t: current time, b: begInnIng value, c: change In value, d: duration
                return c * (t / d) + b;
            }
        });
    };
    $(document).ready(function () {
        rotation();
    })
</script>
</html> 
```

# javafx-2 - 使用 javafx 检测文本区域和表格视图中的辅助鼠标按钮

> ID：12984163
> 
> 赞同：1
> 
> 时间：2012-10-20T00:29:58.563
> 
> 标签：javafx-2

私人无效 gotoRightClick() {

```
 textArea.setOnMouseClicked(new EventHandler<MouseEvent>(){

        @Override
        public void handle(MouseEvent event) {
            if(event.isSecondaryButtonDown())
            {
                System.out.println("right click pressed in text area");
            }
        }
    });

  tableView.setOnMouseClicked(new EventHandler<MouseEvent>(){

        @Override
        public void handle(MouseEvent e) {
            if(e.isSecondaryButtonDown())
            {
                System.out.println("right click pressed in table view");
            }
        }
    });
} 
```

没有检测到任何事件可以帮助我吗？谢谢提前

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-20T03:54:46.303

试试这个：

```
this.setOnMouseClicked(new EventHandler<MouseEvent>() {

            @Override
            public void handle(MouseEvent event) {
                if (event.getButton().equals(MouseButton.SECONDARY)) {
                    //do something
                }
            }
        }); 
```

# asp.net - 如何更改我的计算机的文化信息

> ID：12984166
> 
> 赞同：4
> 
> 时间：2012-10-20T00:30:27.963
> 
> 标签：asp.net, iis, windows-7

我在 IIS 上运行一个从 Thread.CurrentThread.CurrentCulture 读取文化信息的站点。这来自我所理解的系统文化信息。我需要将它设置为某个值，但我无法在操作系统级别更改它。

我的 windows 7 计算机最初设置为 en-GB 文化，现在我需要将其切换到 en-US。我在区域和语言控制面板中更改了它。在“格式”选项卡中，格式为英语（美国），在“位置”选项卡中，当前位置为美国，在“管理”选项卡中，非 Unicode 程序的当前语言为英语（美国）。重新启动后，所有值在 Windows UI 中都读取正确。

在这些更改之后我重新启动了我的计算机，我已经清除了我的本地 DNS（不知道这是否重要），我已经重新启动了 IIS，我已经回收了应用程序池，但它仍然读取为 en-GB。

我还需要做些什么来更新这个cultureInfo 吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-20T06:32:54.290

ASP.NET itslef 具有该任务的配置。可以在 system.web 部分的 web.config 文件中设置文化（多种方式）。下面的片段显示，美国文化如何被强迫

```
<globalization 
    enableClientBasedCulture="false" 
    uiCulture="en-US" 
    culture="en-US" /> 
```

如果应用程序准备好接受来自客户端（浏览器）的文化，设置应该是

```
<globalization 
    enableClientBasedCulture="true" 
    uiCulture="auto" 
    culture="auto" /> 
```

上述设置将采用客户端浏览器中选择的*语言*（例如，在我的情况下为 cs-CZ）。如果未定义，则将使用系统设置。最后的片段显示，如何允许客户端设置和发送预期的文化，但如果没有预先选择*语言，请使用其他一些默认值***en-US覆盖系统设置**

```
<globalization 
    enableClientBasedCulture="true" 
    uiCulture="auto:en-US" 
    culture="auto:en-US" /> 
```

# javascript - 清除后如何重新启动settimeout循环javascript？

> ID：12984169
> 
> 赞同：2
> 
> 时间：2012-10-20T00:30:43.633
> 
> 标签：javascript, slideshow, settimeout

我为纯 javascript-css tuorial 编写的一些代码一直存在问题。我是 javascript 的新手，我编写了这段代码来练习，但我认为这对于我为客户做的一些工作来说是完美的。要更改幻灯片，我有五个函数，第一个是启动 onload，然后我使用 settimeout 执行下一个，下一个，下一个，直到 5，当它循环回到一个，并进入无限循环，直到用户按下暂停（cleartimeout）。我的问题是，如何在停留在当前幻灯片（函数）上时重新启动 settimeout 循环？注意：我现在真的想坚持使用 javascript，所以我宁愿没有 jquery 解决方案。

如果您想查看实际的幻灯片：http: [//fudgepants.com/beta/slideshow/](http://fudgepants.com/beta/slideshow/) ，您可以按 F12 查看源代码。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-20T00:36:57.897

您可以创建一个单独的函数来控制要调用的函数。我们称之为 showNextSlide()。

该函数将有一个从 1 到 5 循环的绑定变量。它在自身上调用 setTimeout() 并且要恢复，您只需再次调用该函数，因为它仍然知道它在哪里停止。

```
// keep a reference to the most recent setTimeout() call
var timeOutId;

function showNextSlide()
{
    // initialize the bound variable for the first time
    // this variable gets preserved upon subsequent calls
    this.idx = this.idx || 0;

    switch (this.idx) {
        case 0:
            // code to show slide 1
            break;
        case 1:
            // show slide 2
            break;
        // etc.
    }

    // increase the counter and make sure it doesn't go over 4
    // i.e. 0, 1, 2, 3, 4, 0, 1, 2, 3, 4
    this.idx = (this.idx + 1) % 5;

    // call me in 5 seconds
    timeOutId = setTimeout(showNextSlide, 5000);
} 
```

# machine-learning - 如何使用配对 T 检验比较 Weka 中的两个分类器

> ID：12984170
> 
> 赞同：3
> 
> 时间：2012-10-20T00:30:45.497
> 
> 标签：machine-learning, weka, statistics

在 Weka，我可以去找实验者。在设置中，我可以加载一个 .arff 文件，并让 weka 创建一个分类器（即 J48），然后我可以运行它，最后我可以转到分析选项卡。在此选项卡中，它为我提供了“使用配对 T 检验进行测试”的选项，但我无法弄清楚如何创建第二个分类器（即未修剪的 J48）并对两个结果进行 T 检验。

Google 不会引导我找到任何教程或答案。

如何让 Weka 对使用相同数据的两个不同分类器的结果进行 T 检验？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-21T04:40:37.307

请按照[http://fiji.sc/Advanced_Weka_Segmentation__-_How_to_compare_classifiers](http://fiji.sc/Advanced_Weka_Segmentation_-_How_to_compare_classifiers)中的步骤操作。

在此[屏幕截图](http://fiji.sc/wiki/index.php/File%3aScreenshot-AWS-tutorial-percentage-correct-test.png)中，作者将显着性级别设置为**0.05**。据我了解，在这样的测试中，您总是与基线分类器（这里是 NaiveBayes）进行比较，输出使用注释 v 或 * 表示特定结果在统计上优于 (v) 或更差 (*)指定显着性水平的基线方案（当前为 0.05）。不过，它可能不是您所期望的。

# java - 是否有标准或简单的方法来冻结 JavaBean？

> ID：12984173
> 
> 赞同：5
> 
> 时间：2012-10-20T00:31:15.463
> 
> 标签：java, javabeans

我发现自己处于使用大量 JavaBeans 的不幸境地。我说不幸是因为我不喜欢它们是可变的。因此，在创建 bean 之后（我使用 Jackson 将它们从 JSON 转换），我想在指定的时刻“冻结”这些 bean，以确保它们不会发生突变。

我没有能力编写每个 bean 的可变/不可变版本，也没有自定义杰克逊工厂，所以我正在寻找一个库或函数调用，就像`Collections.unmodifiableCollection(...);`bean 一样。

（是的，我知道如果原始 bean 泄漏，这并没有*真正*冻结它。但是我会在创建后立即将它们包装或冻结，并且不再使用原始 bean。）

有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-20T00:58:26.677

当我搜索“java beans jackson immutable”时，Google 发现了这一点：

[http://www.cowtowncoder.com/blog/archives/2010/08/entry_409.html](http://www.cowtowncoder.com/blog/archives/2010/08/entry_409.html)

我不知道它是否有效，但文章声称能够做到。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-20T01:16:57.200

你是基于 bean 接口还是 pojos ？如果它们是基于接口的，您可以简单地编写一个实用方法：

```
public class ImmutableBean {
    public static <T> T makeImmutable(T t) { ... }
} 
```

然后，您可以创建一个 java.lang.Proxy 实例，该实例要么特定于您的 bean，要么查找诸如以“set”开头的方法之类的模式，并抛出一些特定的异常。这是一个关于创建代理实例的简短教程： [http ://www.javalobby.org/java/forums/t18631.html](http://www.javalobby.org/java/forums/t18631.html)

如果它们是 pojo 的，您应该能够使用 javassist 或 cglib 之类的库来创建一个增强版本，在该版本中您的设置器被存根以抛出异常。

这是一个 javassist 示例：

```
 public static <T> T makeImmutable(final T t) throws NotFoundException, InstantiationException, IllegalAccessException {
    MethodHandler mh = new MethodHandler() {
        @Override
        public Object invoke(java.lang.Object self, java.lang.reflect.Method thisMethod, java.lang.reflect.Method proceed, java.lang.Object[] args) throws Throwable {
            if (thisMethod.getName().startsWith("set")) {
                throw new UnsupportedOperationException();
            }
            return proceed.invoke(t, args);
        }

    };

    ProxyFactory proxyFactory = new ProxyFactory();
    proxyFactory.setSuperclass(t.getClass());
    Class<T> clazz = (Class<T>) proxyFactory.createClass();
    T instance = clazz.newInstance();
    ((ProxyObject)instance).setHandler(mh);

    return instance;

} 
```

但是，这确实需要您的原始类具有无参数构造函数，因此如果您没有无参数构造函数，您可能必须为您的类执行特定方法。

# javascript - 动态元素的 AddEventListener？

> ID：12984175
> 
> 赞同：0
> 
> 时间：2012-10-20T00:31:31.393
> 
> 标签：javascript, jquery, ios

在我的页面上，当您在元素上向右滑动时，该元素会移动。我有以下代码来处理这些滑动：

```
window.addEventListener("touchstart", touchStart, false);
window.addEventListener("touchmove", touchMove, false); 
```

问题是，它不仅会影响我想要滑动的元素。相反，如果我在页面上的任意位置滑动，它将运行`touchMove`. 为了解决这个问题，我尝试了：

```
var content = document.getElementById("content");
content.addEventListener("touchstart", touchStart, false);
content.addEventListener("touchmove", touchMove, false); 
```

这种工作，但是当一个 div 显示（通过用户交互） over`#content`时，事件仍然会触发。

我考虑的另一个解决方案是将这些事件绑定到 中的元素，这些元素`#content`应该启用滑动。问题是，这些元素是动态添加到页面中的，所以当在页面加载时调用上面的函数时，这些元素没有被考虑在内。然后我考虑使用 jQuery 的`.on()`方法，如下所示：

```
$("#content .row").on("touchmove", touchMove, false); 
```

但这根本不是电话`touchMove`。

有没有更好的方法来完成这一切？当事件侦听器被分配给 only 时`touchMove`，在不是子元素的元素上被调用是否有意义？`#content``#content`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T00:34:21.290

通过将事件附加到文档并为所需元素提供过滤器来尝试这种方式。

```
$(document).on("touchmove", "#content .row", touchMove); 
```

根据评论编辑，您可以通过这种方式获取事件

```
$(document).on("touchmove", "#content .row", function(event){
       alert(event.target.id);
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-20T00:35:00.560

```
$("#content .row").on("touchmove", touchMove, function(){
   // Your code here
}); 
```

`false or true`这里不需要选择器后面的值，因为大多数事件都使用`event bubbling.`. 在这种情况下，您可以省略它并编写处理程序

# java - 尝试将数组发送到 spring mvc 控制器时出现“错误请求”

> ID：12984176
> 
> 赞同：1
> 
> 时间：2012-10-20T00:31:38.647
> 
> 标签：java, jquery, spring, spring-mvc

我看到了相关的问题并尝试了那些没有帮助的问题。我正在使用 jquery 发送 POST 请求，如下所示：

```
var data = {};          
            //this works every time and it's not issue
            var statusArray = $("#status").val().split(',');  
            var testvalue = $("#test").val();

                     data.test = testvalue;
            data.status = statusArray ;

             $.post("<c:url value="${webappRoot}/save" />", data, function() {
        }) 
```

在控制器方面，我尝试了以下操作：

```
public void saveStatus(ModelMap model, Principal principal, HttpSession session, final HttpServletResponse response, @RequestParam String test, @RequestBody String [] status) {

        //I never get to this point, but when I set statusArray to required false test variable is being populated correctly
        }

public void saveStatus(ModelMap model, Principal principal, HttpSession session, final HttpServletResponse response, @RequestParam String test, @RequestParam String [] status) {

        //I never get to this point, but when I set statusArray to required false test variable is being populated correctly
        }

public void saveStatus(ModelMap model, Principal principal, HttpSession session, final HttpServletResponse response, @RequestParam String test, @RequestParam("status") String [] status) {

        //I never get to this point, but when I set statusArray to required false test variable is being populated correctly
        }

public void saveStatus(ModelMap model, Principal principal, HttpSession session, final HttpServletResponse response, @RequestParam String test, @RequestParam(name="status") String [] status) {

        //I never get to this point, but when I set statusArray to required false test variable is being populated correctly
        } 
```

这些都不起作用我想知道我做错了什么，无论我做什么`Bad request`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-16T11:19:59.517

我也遇到了同样的问题**Bad request**。我通过执行以下代码解决了它。
您可以通过**JSON.stringify(array)**将数组转换为 json 字符串来将数组发布到控制器。**我已使用push()**
将多个对象推入数组中。

 **```
 var a = [];
    for(var i = 1; i<10; i++){
        var obj = new Object();
        obj.name = $("#firstName_"+i).val();
        obj.surname = $("#lastName_"+i).val();
        a.push(obj);
    }

    var myarray = JSON.stringify(a);
    $.post("/ems-web/saveCust/savecustomers",{myarray : myarray},function(e) {

    }, "json"); 
```

**控制器：**
您可以使用 jackson 来处理 json 字符串。
Jackson 是一个高性能 JSON 处理器 Java 库。

```
 @RequestMapping(value = "/savecustomers", method = RequestMethod.POST)
    public ServiceResponse<String> saveCustomers(ModelMap model, @RequestParam String myarray) {

        try{
            ObjectMapper objectMapper = new ObjectMapper().configure(DeserializationFeature.ACCEPT_SINGLE_VALUE_AS_ARRAY, true); 
            List<DtoToMAP> parsedCustomerList = objectMapper.readValue(myarray, new TypeReference<List<DtoToMAP>>() { });
            System.out.println(" parsedCustomerList :: " + parsedCustomerList);
        }catch (Exception e) {  
            System.out.println(e);
        }
    } 
```

注意：确保您的 dto 应该包含与您使用数组对象发布的相同的变量名称。
就我而言，我的 dto 包含 firstName,lastName，因为我使用数组对象发布。

**杰克逊依赖：**

```
 <dependency>
        <groupId>org.codehaus.jackson</groupId>
        <artifactId>jackson-core-asl</artifactId>
        <version>1.9.3</version>
    </dependency>
    <dependency>
        <groupId>org.codehaus.jackson</groupId>
        <artifactId>jackson-mapper-asl</artifactId>
        <version>1.9.3</version>
    </dependency> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-20T00:51:45.987

您的状态参数应该是`@RequestParam(value = "status[]") String[] status`（Spring 3.1）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-20T01:00:25.793

我认为您的问题可能是要将数组发送到您必须多次实际发送参数的东西。

在 GET 操作的情况下，例如： ?status=FOO&status=BAR

我不确定spring会自动将逗号分隔的字符串转换为数组。但是，您可以添加一个 PropertyEditor（请参阅 PropertyEditorSupport）以逗号分隔字符串。

```
@InitBinder
public void initBinder(WebDataBinder binder) {
   binder.registerCustomEditor(String[].class, new PropertyEditorSupport() {
        @Override
        public String getAsText() {
            String value[] = (String[]) getValue();
            if (value == null) {
                return "";
            }
            else {
                return StringUtils.join(value, ",");
            }
        }

        @Override
        public void setAsText(String text) throws IllegalArgumentException {
            if (text == null || text.trim().length() == 0) {
                setValue(null);
            }
            else {
                setValue(StrTokenizer.getCSVInstance(text).getTokenArray());
            }
        }

    });
} 
```

请注意，我使用 commons-lang 来连接和拆分字符串，但您可以轻松地使用任何您想要的方式自己完成。

一旦你这样做了，任何时候你想要一个参数从一个字符串绑定到一个 String[]，spring 会自动为你转换它。**

# include - 在 cmake 命令行上指定包含目录

> ID：12984181
> 
> 赞同：30
> 
> 时间：2012-10-20T00:32:48.850
> 
> 标签：include, cmake, command-line-arguments

运行时是否可以指定包含目录`cmake`。例如

```
cmake . -INCLUDE=/foo/bar 
```

头文件与我想编译的源文件位于一个单独的目录中，我想在不修改`Makefile`生成的`cmake`.

**更新**

该项目确实有一个`CMakeLists.txt`. 摘抄：

```
INCLUDE_DIRECTORIES(${EO_SOURCE_DIR}/src)
INCLUDE_DIRECTORIES(${EO_SOURCE_DIR}/src/ga)
INCLUDE_DIRECTORIES(${EO_SOURCE_DIR}/src/utils) 
```

可以`${EO_SOURCE_DIR}`从命令行设置吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-20T10:01:31.600

如果您的标头的路径相对于您的源是固定的，那么您应该能够避免必须通过命令行传递此信息。

假设您的项目的目录结构是：

```
/CMakeLists.txt
/my_sources/main.cpp
/my_sources/foo.cpp
/my_includes/foo.hpp 
```

在您的 CMakeLists.txt 中，您目前有以下内容：

```
add_executable(MyExe my_sources/main.cpp my_sources/foo.cpp) 
```

然后要将`/my_includes`文件夹添加到包含搜索路径列表中，您只需添加以下内容：

```
include_directories(my_includes) 
```

有关更多信息`include_directories`，请运行

```
cmake --help-command include_directories 
```

* * *

**对相关更新的回答：**

是的，使用[`-D`](http://www.cmake.org/cmake/help/v2.8.9/cmake.html#opt%3a-Dvar%3atypevalue)命令行选项就可以了

```
cmake . -DEO_SOURCE_DIR:PATH=<Path to required dir> 
```

该变量`${EO_SOURCE_DIR}`因此被缓存，因此您只需要此`-D`参数一次（除非所需的路径更改或您删除了 CMakeCache 文件等）

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-10-20T08:19:33.407

正确的方法是在 CMakeLists.txt 中定义一个变量并要求用户设置它：

```
set(YOURLIB_INCLUDE_DIR "" CACHE FILEPATH "Path to yourlib includes")

if(NOT EXISTS ${YOURLIB_INCLUDE_DIR}/header.h)
  message(SEND_ERROR "Can't find header.h in ${YOURLIB_INCLUDE_DIR})
endif()

include_directories(${YOURLIB_INCLUDE_DIR}) 
```

现在您可以从命令行设置它：`cmake -D YOURLIB_INCLUDE_DIR=/path/to/yourlib/include .`

# android - 使用卡 io 在 samsung s3 上创建模块时找不到合适的库

> ID：12984185
> 
> 赞同：1
> 
> 时间：2012-10-20T00:33:17.673
> 
> 标签：android, samsung-mobile, card.io

card.io 可以在三星 s3 上运行吗？

我不断收到错误消息，说它找不到合适的库。

我已按照网站上列出的说明将文件放在正确的目录中

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-20T17:57:40.220

Yes. The card.io scan SDK has been tested on the Samsung Galaxy S3.

Usually a library load error means that Android cannot find one of the native libraries. Make sure that the following files exist with this exact path in your project:

```
libs/armeabi-v7a/libcardioDecider.so
libs/armeabi-v7a/libcardioRecognizer.so
libs/armeabi-v7a/libcardioRecognizer_tegra2
libs/armeabi-v7a/libopencv_core.so
libs/armeabi-v7a/libopencv_imgproc.so 
```

Additionally, to maintain graceful failover for unsupported devices, ensure that

```
libs/armeabi/libcardioDecider.so
libs/x86/libcardioDecider.so
libs/mips/libcardioDecider.so 
```

are also present.

The zip file you downloaded from the card.io website is designed to be expanded into the root directory of your project, and should put all of the files where you need them.

Also, as a sanity check, you can clone the example project from `git@github.com:card-io/android-scan-demo.git`. Note that you'll need to go into the example app and paste in your app token.

# php - 将带有 PHP 变量名的文本字段的值传递给 Javascript

> ID：12984186
> 
> 赞同：1
> 
> 时间：2012-10-20T00:33:27.907
> 
> 标签：php, javascript

晚上好。我已经创建了一个 PHP 页面，它将通过一个目录并将图片插入到一个表中。这些图片将是一个选择下拉框和一个数量文本输入。每个表单元素都是根据文件创建时的名称命名的。我似乎无法将数量值传递给 javascript。请帮忙）。我的代码发布在下面。

```
for ($i=0; $i<count($files); $i++) {
    echo $_POST[bandSelect];
    if ($i%3 ==0 && $i!=0) {
        echo '</tr><tr>';
    }
    $pricewallets = "$7.50"; $price3x5 = "$2.00";
    $price4x6 = "$3.00";     $price5x7 = "$4.00";
    $price8x10 = "$9.00";    $price11x14 = "$14.75";
    $price12x18 = "$20.00";  $price16x20 = "$27.00";  
    $price18x24 = "$28.20";

    $num = $files[$i];
    list($width, $height, $type, $attr) = getimagesize($files[$i]);
    echo '<td style="text-align:center;"><a href="'.$num.'" target="_blank">
        <img src="'.$num.'" width ="'.($width/4).'" alt="random image"></a>';

    $fileName = basename($num);
    $qty = $num."qty";
    echo "<br />".$fileName;
    echo '<br /><select name="'.$num.'" id="'.$num.'">
        <option value="'.$num.'Wallets">Wallets (8)</option>
        <option value="'.$num.'3x5">3" x 5"</option>
        <option value="'.$num.'4x6">4" x 6"</option>
        <option value="'.$num.'5x7">5" x 7"</option>
        <option value="'.$num.'11x14">11" x 14"</option>
        <option value="'.$num.'12x18">12" x 18"</option>
        <option value="'.$num.'16x20">16" x 20"</option>
        <option value="'.$num.'18x24">18" x 24"</option>
        </select>';
    echo '<input type="text" name="'.$qty.'" id="'.$qty.'" size="1" value="0" />
        <br />
        <input type="button" name="addCart" value="Add to cart" onclick="addcart( \''.$num.'\',\''.$fileName.'\',\''.$qty.'\')" />
    </td>';
} 
```

这是我的 Javascript

```
function addcart(name, filename, qty)
{
var e = document.getElementById(name);
var strUser = e.options[e.selectedIndex].text;
var price;
var salePrice;
switch (strUser)
{
case "Wallets (8)":
    salePrice = 7.5;
    price = "$7.50";
    break;

case "3\" x 5\"":
    salePrice = 2;
    price = "$2.00";
    break;

case "4\" x 6\"":
    salePrice = 3;
    price = "$3.00";
    break;

case "5\" x 7\"":
    salePrice = 4;
    price = "$4.00";
    break;

case "8\" x 10\"":
    salePrice = 9;
    price = "$9.00";
    break;

case "3\" x 5\"":
    salePrice = 2;
    price = "$2.00";
    break;

case "11\" x 14\"":
    salePrice = 14.75;
    price = "$14.75";
    break;

case "12\" x 18\"":
    salePrice = 20;
    price = "$20.00";
    break;

case "16\" x 20\"":
    salePrice = 27;
    price = "$27.00";
    break;

case "18\" x 24\"":
    salePrice = 28.5;
    price = "$28.50";
    break;
}
var cartTotal=document.picSelect.cart.value;
if(strUser!=="Wallets (8)")
{
document.picSelect.cart.value = cartTotal + " " + filename + " " + strUser + "\t " + price + " x " + qty + "\n";    
}
else
{
document.picSelect.cart.value = cartTotal + " " + filename + " " + strUser + " " + price + " x " + qty + "\n";
}
document.picSelect.Total.value = parseFloat(document.picSelect.Total.value) + salePrice * qty;
textTotal.innerHTML = "Your current  total is:\n\t$" +     parseFloat(document.picSelect.Total.value).toFixed(2);

 } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T01:14:00.583

您忘记更改文本字段的值：

`echo '<input type="text" name="'.$qty.'" id="'.$qty.'" size="1" value="'.$qty.'" />`

# javascript - 多个 if 语句的替代方案

> ID：12984191
> 
> 赞同：4
> 
> 时间：2012-10-20T00:34:13.107
> 
> 标签：javascript, jquery, if-statement, conditional-statements

我的代码包含很多多个`if`语句。有没有其他方法可以摆脱这些陈述。例如假设我有以下条件

```
if(t1 >= 1 && t2 == 0 && t3 == 0) $('div.b_class').fadeIn();
if(t1 == 0 && t2 >= 1 && t3 == 0) $('div.c_class').fadeIn();
if(t1 == 0 && t2 == 0 && t3 == 1) $('div.d_class').fadeIn();
if(t1 && t2 >= 1 && t3 == 0) $('div.b_class.c_class').fadeIn();
if(t1 && t3 >= 1&& t2 == 0) $('div.b_class.d_class').fadeIn(); 
```

有没有办法简化这些陈述？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-21T16:01:49.823

You could use a switch case structure with conditions inside like this :

```
switch(true)
{
 case (t1 >= 1 && t2 == 0 && t3 == 0) : $('div.b_class').fadeIn(); break;
 case (t1 == 0 && t2 >= 1 && t3 == 0) : $('div.c_class').fadeIn(); break;
 case (t1 == 0 && t2 == 0 && t3 == 1) : $('div.d_class').fadeIn(); break;
 case (t1 && t2 >= 1 && t3 == 0)      : $('div.b_class.c_class').fadeIn(); break;
 case (t1 && t3 >= 1&& t2 == 0)       : $('div.b_class.d_class').fadeIn(); break;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-20T21:08:13.250

这应该有效：

```
var selector = 'div';
if (t1) {
    selector += '.b_class';
}
if (t2) {
    selector += '.c_class';
}
if (t3) {
    selector += '.d_class';
}
$(selector).fadeIn(); 
```

它依赖于 tX 的“真实/虚假”值（0 是虚假的，1-3 是真实的，有关“真实/虚假”的更多详细信息，请参见[http://11heavens.com/falsy-and-truthy-in-javascript](http://11heavens.com/falsy-and-truthy-in-javascript)）。

**这种方法的唯一警告**是它允许`selector`if `'div.b_class.c_class.d_class'`、`t1`和`t2`都是`t3`非零的。

如果`selector`在这种情况下不可接受，请将`t3`条件更改为`if (t3 && !(t1 || t2))`。

当`t3`条件修改为时，可以附加`if (t3 && !(t1 || t2))`的唯一方法是 if非零且两者和都为零。`selector``d_class``t3``t1``t2`

```
var selector = 'div';
if (t1) {
    selector += '.b_class';
}
if (t2) {
    selector += '.c_class';
}
if (t3 && !(t1 || t2)) { //modified conditional
    selector += '.d_class';
}
$(selector).fadeIn(); 
```

**更新：**

最初的答案是我怀疑 OP 的实际意图（因为 OP 暗示代码是假设的），所以对[尤文](https://stackoverflow.com/users/8986/juve)的发现表示赞赏。为了满足[cbayram](https://stackoverflow.com/users/1754832/cbayram)，这将复制 OP 的逻辑（尽管我不确定您是否可以将其称为“简化”，因为它只删除了一个`if`比较并且更难阅读）。

```
var selector = 'div';
if ((((t1 && !(t2 || t3)) || (t1 && t3) || (t1 && t2 && !t3))) && !(t1 && t2 && t3)) {
    selector += '.b_class';
}
if ((t2 && !(t1 || t3)) || (t1 && t2 && !t3)) {
    selector += '.c_class';
}
if ((t3 === 1 && !(t1 || t2)) || (t1 && t3 && !t2)) {
    selector += '.d_class';
}
if (selector === 'div') {
    selector = '';
}
$(selector).fadeIn(); 
```

这是它的实际操作：http: [//jsfiddle.net/dX7AK/](http://jsfiddle.net/dX7AK/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-20T20:27:37.683

好的，假设您确实有很多`if`s 并且您`t`的 s 是固定整数，并且主要目标是您的很多很多“规则”的可读性。然后你可以试试下面的。

首先，我会确保所有`t`s 都具有有效值并跳过未定义的情况。如果变量`t`是真实的逻辑值而不是数字，我也会只使用显式规则（例如，`t1 == 0`而不是使用`>, <, >=, <=`），尤其是。如果您要实施的规则与您的`if`陈述中表达的规则一样多样化。

然后，您可以使用数字系统对逻辑进行编码，例如，使用小数以获得良好的可读性。对于每个`t`您使用编码逻辑的新“逻辑数”的一个小数位：

```
111 means t1 == t2 == t1 == 1
201 means t1 == 2, t2 == 0, t3 == 1
etc. 
```

该号码很容易从您的`t1`、`t2`和中创建`t3`：

```
num = t1*100 + t2*10 + t3 
```

下面的 switch-case 实现了您的逻辑。它是您的`if`规则的展开版本。通过不允许多值检查（通过`>=`等），我们需要为您要处理的每个组合指定一个规则。这可能会增加您必须指定的数量或规则，但也可能使您的逻辑规则更具可读性和可维护性。

```
var getFadeInClass = function(t1,t2,t3) {
    // for the sake of shortness I use ".b" instead of ".b_class" etc.
    var num = t1*100 + t2*10 + t3

    switch(logic_state){
    case 100:; case 200:; case 300: return ".b"
    case  10:; case  20:; case  30: return ".c"

    case   1:                       return ".d"

    case 110:; case 120:; case 130:;
    case 210:; case 220:; case 230:;
    case 310:; case 320:; case 330: return ".b.c"

    case 101:; case 102:; case 103:;
    case 201:; case 202:; case 203:;
    case 301:; case 302:; case 303: return ".b.d"
}
return "" 
```

}

您还可以使用数学或其他类型的测试来推理数字。

```
var x = t1*100 + t2*10 + t3
if ( x != 0 && x%100    == 0)  return "b"
if ( x != 0 && x%100%10 == 0)  return "c"
if ( x == 1 )                  return "d" 
```

但我更喜欢开关盒，因为它读起来更好看。我希望这是您想要实现的目标。:)

[你可以在这个 fiddle](http://jsfiddle.net/juve/GuLUB/)中查看这个十进制逻辑的运行版本。

干杯，尤文

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-20T05:24:23.213

如果 t1、t2 和 t3 为 0 到正无穷大，则修改后的逻辑有点浓缩：

```
<!DOCTYPE html>
<html>
   <head>
      <script type="text/javascript">
        function orig(t1, t2, t3) {
            var hits = "";
            if(t1 >= 1 && t2 == 0 && t3 == 0) hits += 'div.b_class\n';
            if(t1 == 0 && t2 >= 1 && t3 == 0) hits += 'div.c_class\n'; 
            if(t1 == 0 && t2 == 0 && t3 == 1) hits += 'div.d_class\n';
            if(t1 && t2 >= 1 && t3 == 0) hits += 'div.b_class.c_class\n';
            if(t1 && t3 >= 1 && t2 == 0) hits += 'div.b_class.d_class\n';
            return hits;
        }
        function modified(t1, t2, t3) {
            var hits = "";
            if(t2 >= 1 && t3 == 0)
                hits += (t1 == 0)?'div.c_class\n':'div.b_class.c_class\n';
            if(t1 >= 1 && t2 == 0) 
                hits += (t3 == 0)?'div.b_class\n':'div.b_class.d_class\n';          
            if(t1 == 0 && t2 == 0 && t3 == 1)   
                hits += 'div.d_class\n';
            return hits;
        }

        function runTest() {
            for(var i = 0; i < 3; i++) {
                for(var j = 0; j < 3; j++) {
                    for(var k = 0; k < 3; k++) {                    
                        var o = orig(i, j, k);
                        var m = modified(i, j, k);
                        if(o != m)
                            console.info(o + " | " + m);
                        console.warn("t1="+i+", t2="+j+", t3="+k + ": " + ((o == m)?"PASS":"FAIL"));            
                    }       
                }       
            }       

        }
      </script>
   </head>
   <body onload="runTest()">
   </body>
</html> 
```

无论哪种情况，这都是测试您的修改与原始版本的好方法。

# php - 列出菜单系统中的所有文件夹

> ID：12984193
> 
> 赞同：0
> 
> 时间：2012-10-20T00:34:31.003
> 
> 标签：php

我正在尝试使用 scandir() 将目录中的所有文件夹列出到我正在制作的菜单结构中。这是我到目前为止的代码：

```
$directory = "models/";
$files = scandir($directory);

echo "  <a class=\"menuitem submenuheader\" href=\"#\" >models</a>
        <div class=\"submenu\">\n
        <ul>\n";

foreach($files as $file)
{
     if(is_dir($file))
     {
        echo "<li><a href=\"$file.html\">$file</a></li>\n";
     }
}
echo "</ul>\n</div>\n"; 
```

我认为我在代码的 if(is_dir($file) 行中遇到了问题。它在菜单 (.) 和 (..) 中列出了两个项目。

感谢您提供的任何/所有帮助！我非常感谢。

为了做一些测试，我用 for 循环替换了 foreach 循环。

```
$directory = "models/";
$folders = scandir($directory);

echo "<a class=\"menuitem submenuheader\" href=\"#\" >models</a>\n";
echo "<div class=\"submenu\">\n";
echo "<ul>\n";

for ($i=0; $i<count($folders); $i++) {
     if ($folders[$i] != '.' && $folders[$i] != '..') {
         if(is_dir($folders[$i])) {
            echo "<li><a href=\"" . $folders[$i] . ".html\">" . $folders[$i] . "</a></li>\n";
         }
     }
}
echo "</ul>\n</div>\n"; 
```

仍然不起作用（不会在 $directory 中提取文件夹）但是，如果我更改

```
if(is_dir($folders[$i])) 
```

至

```
if(!is_dir($folders[$i])) 
```

它列出了 $directory 中的所有文件以及单个文件夹。不知道为什么这样做。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-20T01:26:34.003

知道了！！！

我猜 is_dir() 必须列出相关文件夹的完整路径，否则它不起作用。我将代码更改为：

```
if(is_dir($directory . $folders[$i])) { 
```

它完美无缺！

再次感谢大家的帮助！用这个网站进行头脑风暴让我的脑汁流淌......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-20T00:45:18.367

评论是对的。你可以添加你的条件来忽略那些：

```
if(is_dir($file) && $file != '.' && $file != '..')
{
   echo "<li><a href=\"$file.html\">$file</a></li>\n";
} 
```

除非你说的是这些是唯一的结果，而且应该还有更多。

另外，请确保您正确调用路径。您可以`$_SERVER['DOCUMENT_ROOT']`从那里使用并构建正确的路径。像这样的东西：

```
$directory = $_SERVER['DOCUMENT_ROOT']."/models/"; 
```

# objective-c - 使用 @selector() 处理已知目标时如何避免 BAD SELECTOR 错误

> ID：12984194
> 
> 赞同：1
> 
> 时间：2012-10-20T00:34:51.433
> 
> 标签：objective-c, ios

我在 Xcode 中编程时最常见的错误之一是错误的选择器，无论是由于重命名、重构还是输入错误。它们无法避免，因为许多功能都使用 SEL 参数，例如按钮目标。

它们在构建过程中没有被检测到，所以在你遇到运行时崩溃之前一切看起来都很好。

1.  由于在编写代码时使用的大多数选择器都是已知的，因此不需要动态，是否有更好的方法来指定 SEL 而不是仅使用 @selector()？

2.  如果没有，是否至少有一种方法可以格式化 @selector() 至少可以在构建时由编译器检查？

谢谢大家！

* * *

```
- (void)viewDidLoad
{
    UIButton* buttonBroken = [[UIButton alloc] initWithFrame: CGRectMake(100, 50, 100, 44)];
    [buttonBroken addTarget: self action:@selector(theWrongFunction) forControlEvents:UIControlEventTouchUpInside];
    [self addSubview: buttonBroken];
}

- (void)theRightFunction
{
    // Everything compiled without warning or issues, but I never got a call :(
} 
```

# json - JSON URL 检索和解析基础。专业网络管理员，新手 Java 程序员

> ID：12984196
> 
> 赞同：2
> 
> 时间：2012-10-20T00:35:16.693
> 
> 标签：json, parsing, url, object

很长一段时间以来，我一直想在 unix 之外学习编程。我终于有了一个项目和开始的动力。我想要完成的是使用我厨房里的蓝牙条形码扫描仪来扫描成品食品的 UPC 代码。然后这些 UPC 代码将被刮到 UPC 数据库 | 有关数千种产品的免费信息。该站点提供了一个 API，用于以 XML 或 JSON 格式检索数据。通过一点点挖掘，我发现我的 JSON 更容易使用，但这是我迷路的地方，我在 json 解析器等方面做了一些阅读，但我认为我真的很头疼。我相信我的主要问题是找出如何抓取数据的 url，然后如何将数据放入对象中。

到目前为止我的代码：

```
import javax.swing.JOptionPane;

public class barcode {
public static void main(String args[]) throws IOException{

//Barcode read and append to URL
String UPC;
UPC = JOptionPane.showInputDialog("Enter UPC");
String URL;
URL = "http://www.upcdatabase.org/api/json/*personal API KEY*/";
String barcode;
barcode = URL + UPC;

//Filewrite Process

FileWriter fstream = new FileWriter("out.txt",true);
BufferedWriter out = new BufferedWriter(fstream);
out.write(barcode + System.getProperty("line.separator"));
//Close the output stream
out.close(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-21T20:10:00.413

您应该查看[Jackson](http://jackson.codehaus.org/)，它可以将该站点的响应（如果它是正确的 json）直接解析为对象。

不要讨厌，但从您的代码的外观来看，您还有一些路要走。也许您可以在这方面获得一些帮助，以便您更快地学习编程？

# python - 将 pandas 生成的绘图渲染到 matplotlib 画布以进行流式传输

> ID：12984205
> 
> 赞同：2
> 
> 时间：2012-10-20T00:38:18.110
> 
> 标签：python, matplotlib, pandas

我正在尝试流式传输通过 pandas df.plot() 方法生成的 matplotlib，但无法在 matplotlib 画布上渲染图像。

这是我正在做的

```
import cStringIO
import matplotlib.pyplot as plt
import pandas
from matplotlib.backends.backend_agg import FigureCanvasAgg as FigureCanvas

labels = ['a', 'b', 'c', 'd', 'e']
s = pandas.Series(np.random.randn(5), index=labels)

fig = plt.figure()
s.plot()
canvas = FigureCanvas(fig)
output = cStringIO.StringIO()
canvas.print_png(output)

fh=open('check.png','w')
fh.write(output.getvalue()) 
```

check.png 原来是空白的。我想我无法将熊猫绘图函数生成的绘图渲染到画布上。

第二次尝试：查看坐标轴但没有数据

```
import cStringIO
import matplotlib.pyplot as plt
import pandas
import numpy as np
from matplotlib.backends.backend_agg import FigureCanvasAgg as FigureCanvas

labels = ['a', 'b', 'c', 'd', 'e']
s = pandas.Series(np.random.randn(5), index=labels)

fig = plt.figure()
ax = fig.add_subplot(111)
s.plot(ax=ax)
canvas = FigureCanvas(fig)
output = cStringIO.StringIO()
canvas.print_png(output)

fh=open('check.png','w')
fh.write(output.getvalue()) 
```

谢谢！-阿比

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-20T02:19:33.217

你所拥有的很好，但如果你在 Windows 机器上工作，你必须以二进制模式编写文件：

```
fh=open('check.png','wb') 
```

另外，写入后关闭文件：

```
fh.close() 
```

您上面的代码与这些小调整相结合，在我的机器上保存了一个可读的 .png。

# python - 如何从文件运行 python 脚本？(UNIX)

> ID：12984206
> 
> 赞同：2
> 
> 时间：2012-10-20T00:38:22.203
> 
> 标签：python, unix

基本上我想做的是制作一个名为 doPython 的文件，在这个文件中我想做命令：

```
python myFile.py data.txt 
```

我试过谷歌搜索并制作了一些脚本，但我似乎无法让它工作。它说“当我尝试使用时没有这样的文件或目录

```
#!/usr/bin/env python
python myFile.py data.txt 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-20T00:41:03.077

`#!/usr/bin/env python`表示您的脚本将使用 Python 解释器运行。您只需要致电`sh`或`bash`：

```
#!/bin/sh
python myFile.py data.txt 
```

# java - 无法在java中将当前画布数据转换为图像

> ID：12984207
> 
> 赞同：4
> 
> 时间：2012-10-20T00:38:25.230
> 
> 标签：java, image, png

我有一个简单的应用程序，允许用户在画布控件中绘图。

现在，我想要的是将该画布转换为图像。所以这是我的代码。

```
public void paint(Graphics g)
{
    //super.paint(g);
    Graphics2D draw = (Graphics2D) g;
    if(this.is_beginning || this.to_save)
    {
        draw.setColor(Color.white);
        draw.fillRect(0, 0, this.getWidth(), this.getHeight());
        this.is_beginning= false;
    }
    if(this.m_alzada)
    {
        draw.setColor(Color.red);
        draw.drawLine(uX, uY, x, y);

    }
} 
```

这是我保存图像的方法。

```
private void jButton2ActionPerformed(java.awt.event.ActionEvent evt) {                                         
    int w = canvas1.getWidth();
    int h = canvas1.getHeight();
    int type = BufferedImage.TYPE_INT_BGR;
    BufferedImage image = new BufferedImage(w,h,type);
    Graphics2D g2 = image.createGraphics(); 
    canvas1.to_save = true;
    canvas1.paint(g2);
    try {
        ImageIO.write(image, "png", new File("C:/Users/Uriel/Desktop/ejemplo.png"));
    } catch (IOException ex) {
        Logger.getLogger(main.class.getName()).log(Level.SEVERE, null, ex);
    }

} 
```

所有这些都导致了一个空白图像，我知道绘画方法是如何工作的，我意识到这就是我的问题所在。但是我怎样才能绘制用户已经在paint方法中绘制的所有内容呢？

请原谅我的英语不好，我来自墨西哥。顺便谢谢。

我想知道是否有任何东西可以制作，例如当您使用 Canvas og HTML5 时，您会得到一个包含画布中每个像素的 RGB 信息的矩阵。是否可以使用 JAVA 中的画布组件来做到这一点？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-20T01:00:06.357

除了确保组件大小合适之外，还可以使用[`JComponent#print`](http://docs.oracle.com/javase/7/docs/api/javax/swing/JComponent.html#print(java.awt.Graphics))和[`JComponent#printAll`](http://docs.oracle.com/javase/7/docs/api/javax/swing/JComponent.html#printAll(java.awt.Graphics))方法。

这些将禁用双缓冲，并在期望打印到屏幕时解决其他一些本机对等问题

**更新**

从示例应用程序...

![在此处输入图像描述](../Images/7fc39ba45d3452cf019f8030809de828.png)

我能够产生这个转储

![在此处输入图像描述](../Images/c199c37babca2c03ec4cb81118b3195c.png)

使用此代码

```
Container pane = frame.getContentPane();
BufferedImage img = new BufferedImage(pane.getWidth(), pane.getHeight(), BufferedImage.TYPE_INT_RGB);
Graphics2D g2d = img.createGraphics();
pane.printAll(g2d);
g2d.dispose();
try {
    ImageIO.write(img, "png", new File("save.png"));
} catch (IOException ex) {
    ex.printStackTrace();
} 
```

**更新**

我不认为你画画是你问题的根源。虽然它没有那么干净。

首先，您的“绘图”表面从 扩展`java.awt.Canvas`，并且您将其添加到 中`JFrame`，混合重型和轻型组件绝不是一个好主意。

```
public class Dibujo extends Canvas ... 
```

你最好使用类似的东西`JPanel`

```
public class Dibujo extends JPanel ... 
```

永远不要这样做

```
public void paint(Graphics g) {
    //super.paint(g); 
```

您必须调用`super.paint`后面的内容，然后简单地填充组件。一旦你开始使用类似的东西`JPanel`，你就会想要覆盖`paintComponent`。

您只在您的绘画方法中绘制最后一条线段......

```
if (this.m_alzada) {
    draw.setColor(Color.
    draw.drawLine(uX, uY, x, y);
} 
```

这意味着当您尝试保存组件时，您只会看到最后一段。该`paint`方法应在每次调用时绘制所有线段。

在你的`mouseDragged`方法中，你正在这样做......

```
this.paint(this.getGraphics()); 
```

不。您不负责更新图形，重绘管理器负责。所有这一切基本上都是在便签本图形上下文上进行绘制，一旦处理下一个重绘请求，它将全部被清除。

我认为您需要通读[Performing Custom Painting](http://docs.oracle.com/javase/tutorial/uiswing/painting/)以了解一些基本概念。我还将通读[AWT 和 Swing 中的绘画，](http://www.oracle.com/technetwork/java/painting-140037.html)以了解绘画在 Java 中的工作原理。

修改您的代码后，我能够得到这个......

![在此处输入图像描述](../Images/8f48f038e3693394d76909a99e2e0d61.png)

要这样保存...

![在此处输入图像描述](../Images/f74f67883cee0136a0c022ff94974d56.png)

```
package prueba_uno_graphics;

import java.awt.Color;
import java.awt.Graphics;
import java.awt.Graphics2D;
import java.awt.Point;
import java.awt.Shape;
import java.awt.event.*;
import java.awt.geom.Path2D;
import java.util.ArrayList;
import java.util.List;
import javax.swing.JPanel;

/**
 *
 * @author Uriel
 */
// Don't mix heavy and light weight components
public class Dibujo extends JPanel implements ActionListener, MouseListener, MouseMotionListener {

//    ArrayList lineas = new ArrayList();
//    boolean m_alzada = true, is_beginning = true, to_save = false;
//    int uX, uY, x, y;

    private Path2D shape;

    Dibujo() {
        setBackground(Color.WHITE);
        shape = new Path2D.Float();
    }

    @Override
    protected void paintComponent(Graphics g) {
        super.paintComponent(g);
        Graphics2D draw = (Graphics2D) g;
//        if (this.is_beginning || this.to_save) {
//            draw.setColor(Color.white);
//            draw.fillRect(0, 0, this.getWidth(), this.getHeight());
//            this.is_beginning = false;
//        }
//        if (this.m_alzada) {
//            draw.setColor(Color.red);
//            draw.drawLine(uX, uY, x, y);
//
//        }

        draw.setColor(Color.RED);
        draw.draw(shape);

    }

//    @Override
//    public void paint(Graphics g) {
//        // ALWAYS call super.paint
//        super.paint(g);
//        Graphics2D draw = (Graphics2D) g;
//        if (this.is_beginning || this.to_save) {
//            draw.setColor(Color.white);
//            draw.fillRect(0, 0, this.getWidth(), this.getHeight());
//            this.is_beginning = false;
//        }
//        if (this.m_alzada) {
//            draw.setColor(Color.red);
//            draw.drawLine(uX, uY, x, y);
//
//        }
//    }

    @Override
    public void actionPerformed(ActionEvent e) {
    }

    @Override
    public void mouseClicked(MouseEvent e) {
    }

    @Override
    public void mousePressed(MouseEvent e) {
        //        this.uX = e.getX();
        //        this.uY = e.getY();
        Point point = e.getPoint();
        shape.moveTo(point.x, point.y);

    }

    @Override
    public void mouseReleased(MouseEvent e) {
    }

    @Override
    public void mouseEntered(MouseEvent e) {
    }

    @Override
    public void mouseExited(MouseEvent e) {
    }

    @Override
    public void mouseDragged(MouseEvent e) {
        //        this.x = e.getX();
        //        this.y = e.getY();
        // Don't do this!
        //        this.paint(this.getGraphics());
        //        ArrayList ayuda = new ArrayList();
        //        ayuda.add(uX);
        //        ayuda.add(uY);
        //        ayuda.add(x);
        //        ayuda.add(y);
        //        this.lineas.add(ayuda);
        //        uX = x;
        //        uY = y;
        Point point = e.getPoint();
        shape.lineTo(point.x, point.y);
        repaint();

    }

    @Override
    public void mouseMoved(MouseEvent e) {
    }

} 
```

# emacs - linum 在 vi per 模式下无法启动（emacs）

> ID：12984212
> 
> 赞同：0
> 
> 时间：2012-10-20T00:39:35.850
> 
> 标签：emacs, elisp, viper-mode

我的`.emacs`文件：

```
;; viper mode default
(setq viper-mode t)
(require 'viper)

;; add to load path
(add-to-list 'load-path "~/.emacs.d/elisp/")

;; line number
(require 'linum)
(global-linum-mode 1)
(setq linum-format "%4d \u2502 ") ;; add spacing between numbering and text 
```

当我注释掉`viper`设置时，我一打开文件就会显示行号。当我`viper`在启动时启用时，行号不显示，我必须`M-x linum-mode`手动执行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T18:39:55.313

也许是一个愚蠢的建议，但你有没有尝试改变它们？

# bash - 使用 sed 删除特定行的 Bash 脚本不起作用

> ID：12984215
> 
> 赞同：0
> 
> 时间：2012-10-20T00:40:15.560
> 
> 标签：bash, shell, scripting, sed

我正在尝试编写一个 bash 脚本来使用 sed 删除文件的某些行。行号以相反的顺序存储在另一个文件中。我正在尝试执行的命令如下：

```
sed -e '{lineNumber}d' ./file.txt 
```

这是我到目前为止所拥有的，但它不起作用

```
while read -r line 
do 
   sed -e "/${line}d" ./file.txt
done < ./lineNum.txt 
```

我收到以下错误：
sed: -e expression #1, char 4: unterminated address regex

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-20T02:05:15.450

其实你做错的是这个

```
sed -e "/${line}d" ./file.txt 
```

你看，`sed`有这个语法

```
sed -e "/REGEX/d" ./file.txt 
```

删除所有包含匹配`REGEX`模式的行。既然你有第一个`/`，sed 认为你正在尝试使用正则表达式匹配，因此它说`unterminated address regex`.

所需的最小修复只是删除有问题的反斜杠，即

```
sed -e "${line}d" ./file.txt 
```

* * *

**旁白**：不是`sed`像 OP 要求的解决方案，而是更有效地做 OP 想要的。

```
awk 'NR==FNR {arr[$0]++; next} {if (!arr[FNR]) print }' linenum.txt file.txt 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-20T04:27:08.623

只要没有太多要删除的行，并且您没有在具有可悲限制版本的系统上工作`sed`（曾经`sed`在 HP-UX 上限制为大约 100 个命令），那么您可以使用：

```
sed 's/$/d/' linenum.txt | sed -f - file.txt 
```

这使用第一个`sed`将行号转换为删除命令（请注意，您的部分麻烦是一个杂散的不需要的斜杠），然后告诉第二个`sed`从标准输入（`-f -`）读取其脚本并将其应用于`file.txt`.

以上适用于 GNU `sed`；它不适`sed`用于 Mac OS X 10.7.5 ( `sed: -: No such file or directory`) 上的 BSD。在您的系统上使用它之前对其进行测试。

当然，如果您有足够新的版本`bash`（适用于`bash`4.2 但不适用于 3.2），那么您可以使用“进程替换”来解决以下限制`sed`：

```
 sed -f <(sed 's/$/d/' linenum.txt) file.txt 
```

如果这也不起作用，您可以将第一个`sed`命令的输出写入文件，然后使用该（临时）文件作为`sed`脚本的名称。所以，有很多方法可以做到这一点。但是，任何超过 3 个进程（两次运行`sed`和一次运行`rm`）都是奢侈的。如果您只需要执行一次，这可能不是问题，但如果您必须在一分钟内执行多次，则可能会成为问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-20T00:54:35.197

```
while read -r line; do sed -i "${line} d" ./file.txt; done < ./linenum.txt 
```

这行得通（我认为你的问题是使用-e）；但效率不高。一次将多行传递给 sed 可能会更好，以避免每行读取和写入文件一次。例如，您可以将 linenum.txt 转换为“6 d;2 d;1 d;” 然后将其传递给 sed 进行一勺处理。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-20T01:02:22.413

您可以直接使用`sed`而不使用循环进行更改：

```
sed 's/.*/&d/' lineNum.txt | sed -i -f - file.txt 
```

# oracle - Oracle 11g 系统查询

> ID：12984216
> 
> 赞同：7
> 
> 时间：2012-10-20T00:40:22.733
> 
> 标签：oracle, oracle11g

有人可以告诉我为什么要触发以下查询以及何时触发。我相信这个查询会对性能产生巨大影响。我无法追踪这是从哪里被解雇的。

询问 ：

```
SELECT SUM (used), SUM (total)
FROM (SELECT /*+ ORDERED */ 
             SUM (d.BYTES) / (1024 * 1024) - MAX (s.BYTES) used,
             SUM (d.BYTES) / (1024 * 1024) total
      FROM ( SELECT   tablespace_name, SUM (BYTES) / (1024 * 1024) BYTES
             FROM ( SELECT/*+ ORDERED USE_NL(obj tab) */DISTINCT ts.NAME
                    FROM SYS.obj$ obj, SYS.tab$ tab,  SYS.ts$ ts
                    WHERE obj.owner# = USERENV ('SCHEMAID')
                    AND obj.obj# = tab.obj#
                    AND tab.ts# = ts.ts#
                    AND BITAND (tab.property, 1) = 0
                    AND BITAND (tab.property, 4194400) = 0) tn,
             dba_free_space sp
             WHERE sp.tablespace_name = tn.NAME
             GROUP BY sp.tablespace_name) s, dba_data_files d
      WHERE d.tablespace_name = s.tablespace_name
      GROUP BY d.tablespace_name) 
```

它正在对 SYS.TS$ 和 SYS.FILE$ 进行全表扫描。我相信它正在利用数据库的最大资源。

请帮我。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T17:04:13.627

您是否在 v$sqlarea 中进行过查询，看看它是否在其中，然后查看它是什么会话/用户？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-12-01T11:31:41.837

OEM 在数据库中发出许多查询以进行簿记。此查询用于获取表空间上的可用空闲空间，并且可能在 OEM 中配置了警报以对其进行监视。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-05-12T00:57:48.570

11.2.0.3 中的常见问题。MOS 上有几种解决方法。

升级到 11.2.0.3 后查询 DBA_EXTENTS 速度变慢（文档 ID 1453425.1）

> 基于成本的优化器对此表使用 100,000 行的基数估计，并且 11.2.0.3 执行计划正在执行全表扫描。如果您有大量范围，则此查询可能需要 1 个小时以上才能完成。在 DBA_EXTENTS 上的查询性能低下存在许多未发布的错误。

# jquery - 向下滑动手风琴列表，如果打开或关闭，它会记住其状态

> ID：12984222
> 
> 赞同：0
> 
> 时间：2012-10-20T00:41:12.450
> 
> 标签：jquery

HTML

```
<div style="border:1px solid red;width:200px;">
<div class="wpsc_categorisation_group">
    <ul class="wpsc_categories wpsc_top_level_categories">
        <li><a href="link1">main link 1</a>
            <ul>
                <li><a>test 1</a></li>
                <li><a>test 2</a></li>
                <li><a>test 3</a></li>
            </ul>
        </li>
    </ul>
    <div class="clear_category_group"></div>
</div>
<div class="wpsc_categorisation_group">
    <ul class="wpsc_categories wpsc_top_level_categories">
        <li><a href="link2">main link 2</a>
            <ul>
                <li><a>test 1</a></li>
                <li><a>test 2</a></li>
                <li><a>test 3</a></li>
            </ul>
        </li>
    </ul>
    <div class="clear_category_group"></div>
</div>
</div> 
```

CSS

```
div.wpsc_categorisation_group ul li {position:relative;}
div.wpsc_categorisation_group ul li ul {display:none;}

ul.wpsc_top_level_categories {padding-bottom:0 !important;}
ul.wpsc_top_level_categories li {}
ul.wpsc_top_level_categories li:hover {cursor:pointer;}
ul.wpsc_top_level_categories li ul li a span {background:none !important;}
span.collapse-arrow {background:red;width:10px;height:9px;float:right;margin-top:5px;} 
```

Javascript

```
jQuery('div.wpsc_categorisation_group ul li ul').slideUp().hide();
jQuery('div.wpsc_categorisation_group ul li').click(function() {
jQuery(this).parent().find('ul').slideToggle();
    });
jQuery('div.wpsc_categorisation_group ul li a').append('<span class="collapse-arrow">&nbsp;</span>'); 
```

这是我的 jsfidlle[示例](http://jsfiddle.net/vs9nc/)

我真的需要这方面的帮助...

1.  我只需要红色框是可点击的，并且潜艇会向下滑动
2.  并且还需要它记住用户是打开还是关闭它，因此在更改页面时它会记住它的状态
3.  并且不应该更改 HTML，因为我正在 wpsc 小部件中进行编辑

我真的很感谢我能得到的任何帮助...... :-(

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-20T01:00:49.527

试试这个代码..对于第一个要求..

```
$('div.wpsc_categorisation_group ul li ul').slideUp().hide();
$('.wpsc_categories').on('click', 'a', function(e) {
    e.preventDefault();  // Prevent the Default Action
    if (e.target.className == 'collapse-arrow') { // Trigger only
                                                  // If clicked on span
        $(this).closest('ul').find('ul').slideToggle();
    }

});
$('div.wpsc_categorisation_group ul li a')
   .append('<span class="collapse-arrow">&nbsp;</span>');​ 
```

[工作小提琴](http://jsfiddle.net/sushanth009/nwbY7/2/)

**将 click 事件委托**给 Anchor 并仅在单击带有 class 的跨度时切换 ul `collapse-arrow`..

**2nd** req 有点不同，如果你要去不同的页面，你可以将状态存储在 cookie 或 session 中，并在每次页面加载时重新填充。 **3rd** -- 在上下文中没有改变 HTML

# c# - 进度条不起作用

> ID：12984223
> 
> 赞同：2
> 
> 时间：2012-10-20T00:41:20.630
> 
> 标签：c#, winforms, backgroundworker

我正在尝试在 4 步过程中使用 4 个进度条。基本上使用进度条是因为该项目需要很长时间才能运行，使用通常使用的带有（除以 10）的单个进度条意味着进度条每 20 分钟会增加 1 条。（太长。）

这是代码：

```
backgroundWorker1.ReportProgress(a++);

if (a == 100)
{
    backgroundWorker2.ReportProgress(b++);
    a = 0;
}

if (b == 100)
{
    backgroundWorker3.ReportProgress(c++);
    b = 0;
}

if (c == 100)
{
    c = 0;
    d = 25;
}

backgroundWorker4.ReportProgress(d); 
```

问题是，第一个进度条达到大约 99% 并停止，第二个进度条根本没有移动，但进程仍在运行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T00:47:22.603

尝试在传递给方法之前进行参数增量。在 C#中，自[增运算符](http://msdn.microsoft.com/en-us/library/36x43w8w%28v=vs.71%29.aspx)可以出现在其操作数之前和之后。当您执行 (a++) 时，它是后缀增量操作。此操作的结果是 a增加*之前*的值。因此传递给的最大值`ReportProgess`将是 99 而不是 100。如果将增量操作更改为 (++a)，即前缀增量，则操作结果将是*后*增量的值：

```
backgroundWorker1.ReportProgress(++a); 
```

与其他呼叫相同。顺便说一句，上次报告很奇怪 - 值`d`只更改了一次。也许你应该`d += 25`改用？

# ruby-on-rails-3 - Rails 3：在连接语句上使用范围

> ID：12984230
> 
> 赞同：1
> 
> 时间：2012-10-20T00:42:41.887
> 
> 标签：ruby-on-rails-3, join, scope

我正在处理一些无法进行重大重构的旧代码。以下代码行：

```
Address.joins(:contact => :user).where('users.organization_id = ?', session[:org_id]) 
```

生成地址列表。地址链接到联系人表，而联系人表又链接到用户表。

我需要一种方法来只加入特定范围内的某些用户，比如 User.active 或 User.inactive。

有没有一种方法可以在不对数据库进行重大重构的情况下做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T05:49:39.710

假设您有一个布尔属性，它说明用户是否在您的用户表中处于活动状态......那么您不需要对数据库做任何事情......您在 User 模型中定义一个范围来运行下面的行

User.active.joins(:address => :contacts).where('users.organization_id = ?', session[:blah-blah]')

如果您的数据库中没有该布尔属性，那么您必须设计一种特定的机制来处理各种属性以确定用户是否处于活动状态......

# mysql - MySql 查询：多个表的总平均值

> ID：12984231
> 
> 赞同：1
> 
> 时间：2012-10-20T00:42:52.883
> 
> 标签：mysql, oracle

我想计算一个部门所有学生的总体平均 GPA，这是我想出的，但它不起作用

```
COLUMN AVERAGE FORMAT 0.999  
SELECT  AVG(GPA) "AVERAGE"  
FROM    STUDENT  
WHERE   (YEAR < 4) AND 
        (MAJOR LIKE '%ACCT%') AND 
        (MAJOR LIKE '%FINA%') AND 
        (MAJOR LIKE '%MGMT%') AND 
        (MAJOR LIKE '%AISY%') AND 
        (MAJOR LIKE '%MINS%') AND 
        (MAJOR LIKE '%SCMS%'); 
```

所以他们应该都是本科生并被其中一个专业录取。

另外一个问题是：是否可以使用 "GROUP BY ### and HAVING ###) 编写这样的查询？如何？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-20T00:50:48.373

这将为您提供以下任一专业中所有 4 年级以下学生的平均成绩。我相信你的问题是使用`AND`而不是`OR`专业。不太可能有学生的名字与所有这些字符串匹配。

```
SELECT AVG(GPA) AS "AVERAGE"  
FROM STUDENT
WHERE (YEAR < 4)
   AND
   (
      (MAJOR LIKE '%ACCT%') OR
      (MAJOR LIKE '%FINA%') OR 
      (MAJOR LIKE '%MGMT%') OR 
      (MAJOR LIKE '%AISY%') OR 
      (MAJOR LIKE '%MINS%') OR 
      (MAJOR LIKE '%SCMS%')
   ) 
```

# java - Java -> Scala，集合性能

> ID：12984233
> 
> 赞同：5
> 
> 时间：2012-10-20T00:43:12.980
> 
> 标签：java, scala, collections

在Java中，根据集合的用途，我们不使用相同的实现（即ArrayList vs LinkedList）。

来自 Java 背景，有人能告诉我关于 Scala 集合和性能注意事项我应该知道些什么吗？

Scala List 的不可变版本似乎是某种不可变的 LinkedList。在 Coursera 上学习 Martin Odersky 课程后，我理解了这些概念。同样，我理解为什么前置比附加更有效，特别是当你有一个不可变列表时。

我想知道所有（或大部分）关于 Scala 集合性能的这些棘手的事情，这样我自己就不会觉得很难。有人能帮我吗？

谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-20T01:05:35.293

有一个[描述收集性能特征](http://www.scala-lang.org/docu/files/collections-api/collections_40.html)的文档。除此之外，您真的应该在微基准测试中测试您的用例。在某些情况下，Scala 集合的性能非常接近 Java 集合；在其他方面存在差距（例如地图）；在其他情况下，没有 Java 类比，不可变与可变的比较在很大程度上取决于您如何使用集合（很明显，大量突变有利于可变集合，而大量重用/复制有利于不可变集合）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-20T01:57:37.303

这并没有具体回答您的问题，但对于一般用途，我认为您不会注意到 java 和 scala 集合之间的区别。至少我没有注意到 :) 一般来说，我认为人们过早地通过担心这些事情来进行优化（尽管您可能有一个需要优化的完全有效的用例）。

就我个人而言，我更喜欢使用 scala 集合而不是 java 集合，因为它们的 API，而且因为我从来没有遇到过性能问题，所以我从来没有真正研究过 java vs scala 基准。

正如 Rex 所说，如果您担心（或只是想知道），为您的特定用例设置基准会很有用。

# android - 如何获取我在 Google Play 商店中设置的 Android 设备的昵称

> ID：12984234
> 
> 赞同：1
> 
> 时间：2012-10-20T00:43:26.490
> 
> 标签：android, api, google-play

我有多个相同型号的设备。因此，在 Google Play 商店中，我会看到它们具有相同的名称，默认情况下是运营商 + 制造商 + 型号。因此，哪个是哪个是相当混乱的。我最近发现您可以在“我的订单和设置”-> Google Play 商店网站上的设置下为每台设备设置一个昵称。太好了。但是有人知道是否有办法在我的应用程序中检索 Android 上当前设备的昵称？我想在我的应用程序中显示昵称而不是型号。我想如果有办法，它必须通过Google Play Store应用程序提供的API？有任何想法吗？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-20T01:24:48.560

不幸的是，没有官方的 Google Play Store API，所以无法做到这一点。有一个非官方的，一个艰难的，但你不能用这个来做到这一点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-04-22T00:34:09.823

经过验证的答案已经过时了。

[您可以使用PlayerClient 类](https://developers.google.com/android/reference/com/google/android/gms/games/PlayersClient)从 Google Play Games Service 获取玩家信息。一旦你得到它，你需要加载玩家的信息，然后你会得到[Player 类](https://developers.google.com/android/reference/com/google/android/gms/games/Player)。然后你可以创建一些自定义函数来获取用户详细信息

```
 public JSONObject get_user_details() {
    JSONObject userDetails = new JSONObject();

    // Needs to be loaded before, it is the Player class mentioned before
    if (currentPlayer != null) {
      try {
        userDetails.put("playergame:name", currentPlayer.getDisplayName());
        userDetails.put("playergame:photo_uri", currentPlayer.getIconImageUri());
        userDetails.put("playergame:uid", currentPlayer.getPlayerId());
      } catch (JSONException e) {
        Log.w(TAG, "Failed to load player's game informations: " + e);
      }
    }

    return userDetails;
  } 
```

如果您正在寻找更好的示例，谷歌已经[在 github 上发布了示例代码](https://github.com/playgameservices/android-basic-samples/blob/35d283fd365a1bdb290cc43b4bfc46ec09c7220b/TypeANumber/src/main/java/com/google/example/games/tanc/MainActivity.java#L507)。

# linq - EF4 返回的疯狂数据 - 错误的数据甚至错误的列

> ID：12984235
> 
> 赞同：0
> 
> 时间：2012-10-20T00:44:03.790
> 
> 标签：linq, entity-framework-4, linq-to-entities, sql-server-2008-r2

我有一组核心代码，多年来我一直在使用它来创建网站，它使用 EF4 并连接到 SQL Server 2008 R2 ......直到昨天，当一个网站开始到处都是炸弹。当我们跟踪错误时，我们发现从 Linq 返回到实体的数据很奇怪？

我们已经看到，不同的行返回相同的数据，重复报告错误的数据类型，返回 Id 列而不是我们正在查询的列中的值。当我们检查计数是否告诉我们有行循环...计数说找到 1 行，然后当我们循环时，我们得到一个空引用。

有人知道这里发生了什么吗？吓死我了

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T18:38:45.140

我今天早上遇到了这个问题。相关数据准确，返回的实体计数正确。但是，实体的属性值是错误的。我看到的主要问题是，应该只用于单个实体的值集被用于多个实体。长话短说，复合键不合适，因为它只指定了构成键的 3 个值中的 2 个。我在配置中添加了最终键，并返回了正确的值。

# java - 需要帮助来理解绘制棋盘的代码

> ID：12984237
> 
> 赞同：0
> 
> 时间：2012-10-20T00:44:55.923
> 
> 标签：java

本书使用此代码绘制棋盘格。我遇到的唯一问题是了解棋盘上各个方块的绘制顺序。当我进行计算时，它只会用从左上角到右下角的对角线方向的正方形填充棋盘。这本书说代码对每个正方形执行此循环 64 次，但我不确定它是如何执行 64 次的。

例如让我们说 getHeight() = 72

平方大小 = 9

在最里面的循环中移动
double x = 0 * 9 ===> 0
double y = 0 * 9 ===> 0
GRect (0, 0, 9, 9,);

双 x = 1 * 9 ===> 9
双 y = 1 * 9 ===> 9
GRect (9, 9, 9, 9,);

双 x = 2 * 9 ===> 18
双 y = 2 * 9 ===>18
GRect (18, 18, 9, 9);

ETC...

```
import acm.program.*;
import acm.graphics.*;

public class Checkerboard extends GraphicsProgram {

public void run(){

double sqSize = (double) getHeight() / N_ROWS;
for ( int i = 0; i < N_ROWS; i++ ){
    for( int j = 0; j < N_COLUMNS; j++) {
           double x = j * sqSize;
           double y = i * sqSize;
           GRect sq = new GRect(x, y, sqSize, sqSize);
           sq.setFilled(( i + J ) % 2 !=0); 

            }
         }
      }
    private static final int N_ROWS = 8; 
    private static final int N_COLUMNS = 8; 
     } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-20T00:55:52.180

你有两个循环——第二个循环遍历每个值 0-7，总共循环 8 次，因为这是第一个循环运行的次数。在您的解释中，您似乎同时增加了两个值，就好像只有一个循环每次都增加两个值一样。

在循环中打印*i*和*j*的值可能会有所帮助。

```
(i,j)

(0, 1) (0, 2) (0, 3) ...
(1, 1) (1, 2) (1, 3) ...
... 
```

# java - Java中用于多维数组的Split()方法

> ID：12984240
> 
> 赞同：3
> 
> 时间：2012-10-20T00:45:16.490
> 
> 标签：java

我有一个二维数组。任务是接受用户的行号和列号，如果用户想逐行（或逐列）输入数字数据，他必须用逗号来完成。例如，3x3 将是：

1,2,4

2,5,3

5,3,2

所以第一行元素将是 [0,0]=1 [0,1]=2 [0,2]=3，第二行 [1,0]=2 [1,1]=5 [1,2 ]=3 等。我知道我应该用字符串来做到这一点，然后将其拆分为“，”，然后将其转换为非整数，但我不知道在这种情况下如何拆分。

这就是我的行输入：

```
for (int row=0; row<board.length; row++){
        for (int column=0; column<board[row].length; column++){
            //System.out.print("["+board[row]+"]["+board[column]+"]: ");
            board[row][column] = myInput.nextInt(); 
            //input validation
            while ((1 > (board[row][column])) || ((board[row][column]) > board.length))
            {
                System.out.println("Please enter number between 1 to "+ board.length +":");
                board[row][column] = myInput.nextInt();
            }
        }
     } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-20T00:54:59.237

我认为这就是您想要`inputStr`的，假设存储用户输入：

```
String[] values = inputStr.split(',');
if(values.length != 2) {
   //Tell them they should enter two numbers
   System.out.println("Please enter two numbers separated by a comma");
}
else {
   try {
      int rowVal = Integer.parseInt(values[0]);
      int columnVal = Integer.parseInt(values[0]);

      System.out.println("The value is: "+board[rowVal][columnVal]);
   }
   catch (NumberFormatException e) {
      //It was comma separated but not two numbers
      System.out.println("Please enter two numbers separated by a comma");
   }
} 
```

对于逐行插入：

```
//Just to clean up the code
int rows = board.length;
int columns = board[0].lemgth;

String[][] dataValues = new String[rows][columns]
String[] data = new String[rows.length];
//Recieve data
for(int i = 0; i < rows; i++) {
   data[i] = input.nextString();  //modify with however you get a String in.
}
//Parse numbers
for(int i = 0; i < rows; i++) {
   dataValues[i] = data[i].split(',');
   if(dataValues[i].length != columns) {
      throw Exception("Wrong number of columns for row: "+i);
   }
   for(int j = 0; j < columns; j++) {
     try {
       board[row][column] = Integer.parseInt(dataValues[i][j]);
     } catch (NumberFormatException e) {
       throw Exception("Invalid value for ["+i+","+j+"]");
     }
   }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-20T01:42:37.580

您已声明您首先接受行数和列数，因此在开始阅读数字之前，您知道表格的尺寸。

所以你真的只需要根据你运行的模式来逻辑更新行或列。下面是一个不完整的例子。

希望它能给你一个关于如何完成它的想法。

```
public class SplitInputExample {

    int maxRows = 3;
    int maxCols = 3;
    int board[][] = new int[3][3];
    boolean interpretRowise = true;

    private void initialize() {
        for (int i = 0; i < maxRows; i++) {
            board[i] = new int[maxCols];
        }

    }

    /**
     * 
     * @param string input
     * @param rowByRow if true, parse row by row, if false parse col by col
     * @param index index of row/col to update i.e if updating 2nd col, pass 1
     */
    public void split(String string, boolean rowByRow, int index) {

        int limit = 0;
        if (rowByRow){
            limit = maxRows;
        }else{
            limit = maxCols;
        }
        String splitArray[] = string.split(",");
        int inputArray[] = new int[splitArray.length];

        //save the parsed input in an int array
        int counter = 0;
        for (String s: splitArray){
            inputArray[counter++] = Integer.parseInt(s);
        }

        //checks for ensuring input array is of equals rows/cols
        for (int i=0; i<limit; i++){
            //either check rows or cols
            if (rowByRow){
                //fix the row
                board[index][i] = inputArray[i];
            }else{
                //fix the col
                board[i][index] = inputArray[i];
            }
        }

    }

    public void print(){
        for (int row[]: board){
            for(int col: row){
                System.out.print(col);
            }
        }
    }

    public static void main(String args[]) {
        String input[] = {
            "1,2,3",
            "4,5,6",
            "7,8,9"
        };
        SplitInputExample example = new SplitInputExample();

        int index = 0;
// parse row-wise i.e 1,2,3 are values of row 0, for each column
        for (String s: input){
            example.split(s,true,index++);
        }
        example.print();
        System.out.println("\n");

        index = 0;
//reset index to 0 and parse column-wise i.e 1,2,3 are values of column 0 for each row
        for (String s: input){
            example.split(s,false,index++);
        }

        example.print();
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-02T20:03:36.890

这是解决方案：

```
 public static int getInputByRow(int[][] board, int v)
{

            for (int i=0; i<board.length; i++){
                int j=0;        
                String line = myInput.next();
                String[] splitarr = line.split(",");

                        for (String num : splitarr){                        
                                v = Integer.parseInt(num);
                                board[i][j++] = v;  
                        }
} 
```

# php - 用 facebook 登录 php mysql

> ID：12984243
> 
> 赞同：0
> 
> 时间：2012-10-20T00:45:31.433
> 
> 标签：php, mysql, facebook

请告诉我一个很好的教程来学习 php mysql login with facebook

使用 facebook 登录是否使用 facebook api 或 facebook sdk。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-20T01:15:49.013

使用本[教程](http://www.joeyrivera.com/2010/facebook-graph-api-app-easy-w-php-sdk/)

他的文件有一个问题。而`config.php`不是`if(is_null($facebook->getUser()))...`使用以下代码来检查用户是否已经存在。

```
try{
    $me = $facebook->api('/me');
$error='no';
    }
    catch (FacebookApiException $e) {
        $error='yes';
        $perms=array('req_perms' => 'user_status,publish_stream,user_photos,email,status_update,friends_status,export_stream');
        echo"<meta http-equiv='refresh' content='0; URL=".$facebook->getLoginUrl($perms,$cancel,$next,$display)."'>";
        exit;           
      }
    if($error!='yes'){//already logged in use normally
            } 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-20T00:54:44.587

您应该使用[SDK](http://developers.facebook.com/docs/reference/php/)。看一下文档，它很清楚并且解释得很好。

# php - 我的代码有什么问题？（如果上一列不为空，则更新下一列）

> ID：12984244
> 
> 赞同：-2
> 
> 时间：2012-10-20T00:45:31.327
> 
> 标签：php, mysql, case, isnull

我最近开始使用 PHP 和 MySQL，并且我编写了一个代码来将一个变量插入到 MySQL 列中，如果该列已被填充（非 NULL），它将继续并尝试更新下一列。这是我的代码：

```
$result=mysql_query("
UPDATE user_info SET   
 Amount20 = ( case when ( Amount19 is not null and Amount20 is null ) then ‘$amount’ WHERE Username ='$user' else Amount20 end )

,   Amount19 = ( case when ( Amount18 is not null and Amount19 is null ) then ‘$amount’ WHERE Username ='$user' else Amount19 end )

,   Amount18 = ( case when ( Amount17 is not null and Amount 18 is null ) then ‘$amount’ WHERE Username ='$user' else Amount18 end )

,   Amount17 = ( case when ( Amount16 is not null and Amount17 is null ) then ‘$amount’ WHERE Username ='$user' else Amount17 end )

,   Amount16 = ( case when ( Amount15 is not null and Amount16 is null ) then ‘$amount’ WHERE Username ='$user' else Amount16 end )

,   Amount15 = ( case when ( Amount14 is not null and Amount15 is null ) then ‘$amount’ WHERE Username ='$user' else Amount15 end )

,   Amount14 = ( case when ( Amount13 is not null and Amount14 is null ) then ‘$amount’ WHERE Username ='$user' else Amount14 end )

,   Amount13 = ( case when ( Amount12 is not null and Amount13 is null ) then ‘$amount’ WHERE Username ='$user' else Amount13 end )

,   Amount12 = ( case when ( Amount11 is not null and Amount12 is null ) then ‘$amount’ WHERE Username ='$user' else Amount12 end )

,   Amount11 = ( case when ( Amount10 is not null and Amount11 is null ) then ‘$amount’ WHERE Username ='$user'else Amount11 end )

,   Amount10 = ( case when ( Amount9 is not null and Amount10 is null ) then ‘$amount’ WHERE Username ='$user' else Amount10 end )

,   Amount9 = ( case when ( Amount8 is not null and Amount9 is null ) then ‘$amount’ WHERE Username ='$user' else Amount9 end )

,   Amount8 = ( case when ( Amount7 is not null and Amount8 is null ) then ‘$amount’ WHERE Username ='$user' else Amount8 end )

,   Amount7 = ( case when ( Amount6 is not null and Amount7 is null ) then ‘$amount’ WHERE Username ='$user' else Amount7 end )

,   Amount6 = ( case when ( Amount5 is not null and Amount6 is null ) then ‘$amount’ WHERE Username ='$user' else Amount6 end )

,   Amount5 = ( case when ( Amount4 is not null and Amount5 is null ) then ‘$amount’ WHERE Username ='$user' else Amount5 end )   

,   Amount4 = ( case when ( Amount3 is not null and Amount4 is null ) then ‘$amount’ WHERE Username ='$user' else Amount4 end )

,   Amount3 = ( case when ( Amount2 is not null and Amount3 is null ) then ‘$amount’ WHERE Username ='$user' else Amount3 end )  

, Amount2 = ( case when ( Amount1 is not null and Amount2 is null ) then ‘$amount’ WHERE Username ='$user' else Amount2 end )  

, Amount1 = ( case when ( Amount1 is null ) then '$amount' else Amount1 WHERE Username ='$user' end )  
"); 
```

我不知道出了什么问题，任何帮助都会很棒！注意：我有理由有 20 个不同的列，请不要将我称为“规范化”。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-20T10:55:03.987

我将您的查询修改如下：

```
$result=mysql_query("
UPDATE user_info SET   
Amount20 = ( case when ( Amount19 is not null and Amount20 is null ) then ‘$amount’    else Amount20 end )
,Amount19 = ( case when ( Amount18 is not null and Amount19 is null ) then ‘$amount’ else Amount19 end )
,Amount18 = ( case when ( Amount17 is not null and Amount 18 is null ) then ‘$amount’ else Amount18 end )
,Amount17 = ( case when ( Amount16 is not null and Amount17 is null ) then ‘$amount’ else Amount17 end )
,Amount16 = ( case when ( Amount15 is not null and Amount16 is null ) then ‘$amount’ else Amount16 end )
,Amount15 = ( case when ( Amount14 is not null and Amount15 is null ) then ‘$amount’ else Amount15 end )
,Amount14 = ( case when ( Amount13 is not null and Amount14 is null ) then ‘$amount’ else Amount14 end )
,Amount13 = ( case when ( Amount12 is not null and Amount13 is null ) then ‘$amount’ else Amount13 end )
,Amount12 = ( case when ( Amount11 is not null and Amount12 is null ) then ‘$amount’ else Amount12 end )
,Amount11 = ( case when ( Amount10 is not null and Amount11 is null ) then ‘$amount’ else Amount11 end )
,Amount10 = ( case when ( Amount9 is not null and Amount10 is null ) then ‘$amount’ else Amount10 end )
,Amount9 = ( case when ( Amount8 is not null and Amount9 is null ) then ‘$amount’ else Amount9 end )
,Amount8 = ( case when ( Amount7 is not null and Amount8 is null ) then ‘$amount’ else Amount8 end )
,Amount7 = ( case when ( Amount6 is not null and Amount7 is null ) then ‘$amount’ else Amount7 end )
,Amount6 = ( case when ( Amount5 is not null and Amount6 is null ) then ‘$amount’ else Amount6 end )
,Amount5 = ( case when ( Amount4 is not null and Amount5 is null ) then ‘$amount’ else Amount5 end )   
,Amount4 = ( case when ( Amount3 is not null and Amount4 is null ) then ‘$amount’ else Amount4 end )
,Amount3 = ( case when ( Amount2 is not null and Amount3 is null ) then ‘$amount’ else Amount3 end )  
,Amount2 = ( case when ( Amount1 is not null and Amount2 is null ) then ‘$amount’ else Amount2 end )  
,Amount1 = ( case when ( Amount1 is null ) then '$amount' else Amount1 end )
 WHERE Username ='$user'"); 
```

# c++ - 使用 Code::Blocks 编写的使用 SimpleSocket 的 C++ 程序中对函数的未定义引用

> ID：12984246
> 
> 赞同：0
> 
> 时间：2012-10-20T00:45:38.110
> 
> 标签：c++, linker, codeblocks, undefined-reference

我正在尝试在 Code::Blocks 中编写一个使用[SimpleSockets](http://sockets.carrierlabs.com/)的 C++ 程序。我程序中的文件在我的程序中，main.cpp、simplesocket.cpp、passivesockets.cpp、activesockets.cpp、simplesocket.h、passivesockets.h、activesockets.h。所有这些文件都在同一个目录中，并使用引号 (#include "simplesocket.h") 包含在 main.cpp 中。当我尝试编译它时，出现以下一些错误。

-------------- 构建：在 sys32 中调试 ---------------

g++.exe -Wall -g -I"C:\Documents and Settings\Administrator\My Documents\Downloads\curl-7.27.0-devel-mingw32" -IC:\MinGW\mingw32 -IC:\MinGW\lib\gcc \mingw32 -IC:\MinGW\lib\gcc\mingw32\4.7.0 -IC:\MinGW\lib\gcc\mingw32\4.7.0\include -IC:\MinGW\lib\gcc\mingw32\4.7.0\ include\c++\backward -IC:\MinGW\lib\gcc\mingw32\4.7.0\include\c++\mingw32 -c C:\system32\sys32\main.cpp -o obj\Debug\main.o 在包含的文件中从 C:\system32\sys32\ActiveSocket.h:46:0，从 C:\system32\sys32\main.cpp:2:

对`_htons@4的未定义引用

对 `_inet_addr@4 的未定义引用

对 `_inet_addr@4 的未定义引用

未定义的引用..............

未定义的引用..............

这些错误来自 SimpleSockets.cpp、PassiveSockets.cpp 和 ActiveSockets.cpp。从我在 StackOverflow 上可以找到的信息来看，这种类型的错误是一个链接错误。我发现这篇[文章](https://stackoverflow.com/questions/3000736/c-linker-error-when-trying-to-compile-a-second-module-using-codeblocks)将文件添加到项目中并且不起作用。StackOverflow 上有很多东西，但我似乎找不到如何让它工作。我正在寻找可以在 code::blocks 中手动链接其他 .cpp 文件的位置。我什至尝试将编译器从 migw32-g++ 更改为 g++，只是想看看会发生什么。

我也尝试使用 -lw2_32.lib 命令进行构建，但我仍然遇到相同的错误。以下是添加该命令后的输出。

-------------- 构建：在 sys32 中调试 ---------------

```
g++.exe -Wall  -g  -lws2_32.lib   -I"C:\Documents and Settings\Administrator\My Documents\Downloads\curl-7.27.0-devel-mingw32" -IC:\MinGW\mingw32 -IC:\MinGW\lib\gcc\mingw32 -IC:\MinGW\lib\gcc\mingw32\4.7.0 -IC:\MinGW\lib\gcc\mingw32\4.7.0\include -IC:\MinGW\lib\gcc\mingw32\4.7.0\include\c++\backward -IC:\MinGW\lib\gcc\mingw32\4.7.0\include\c++\mingw32  -c C:\system32\sys32\PassiveSocket.cpp -o obj\Debug\PassiveSocket.oIn file included from C:\system32\sys32\ActiveSocket.h:46:0,from C:\system32\sys32\PassiveSocket.h:45,from C:\system32\sys32\PassiveSocket.cpp:43:

PassiveSocket.cpp:70: undefined reference to htons@4
PassiveSocket.cpp:78: undefined reference to htonl@4
PassiveSocket.cpp:82: undefined reference to inet_addr@4 
```

再次感谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-27T15:31:16.917

我猜您正在使用 Code::blocks + MinGW Combo 而**不是任何其他编译器**。

转到项目->构建选项
单击“链接器设置”选项卡并在“其他链接器选项：”多行文本框中添加以下内容：-

```
-lwsock32
-lws2_32 
```

**请记住将每个条目放在一个新行上。
请注意，我省略了“.lib”文件扩展名**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-20T00:47:55.107

`-lws2_32.lib`编译时放。

# c - C/C++ 中的 SQLite。sqlite3_exec：回调函数中设置的参数指向一个空字符串

> ID：12984248
> 
> 赞同：1
> 
> 时间：2012-10-20T00:45:57.300
> 
> 标签：c, sqlite, pointers, void-pointers

我正在尝试一些非常基本的东西 -使用[SQLite 的 C/C++ 接口](http://www.sqlite.org/capi3ref.html)`SELECT`返回语句的结果。我的数据表只有两个字段 - 键（varchar）和值（文本）。

给定密钥，我的目标是通过查询 SQLite 数据库返回值。我传递给 *sqlite3_exec* - *select_callback* 函数以及*参数*(char *)。*参数*已成功设置为 *select_callback* 中的正确值。但是，在调用 *sqlite3_exec* 之后，参数指向一个空字符串（尽管指向相同的内存）。

知道出了什么问题以及如何解决这个问题吗？*sqlite3_exec* 是​​否在幕后为*参数释放内存？*

先感谢您！

```
// given the key tid returns the value
void getTypeByID(sqlite3 * db, string tid)
{
    string sql_exp_base = "select value from Data where key=''";
    int len = (int)sql_exp_base.size() + (int)tid.size() + 10;
    char * sql_exp = new char[len];
    sprintf(sql_exp, "select value from Data where key='%s'", tid.data());
    sql_exec(db, sql_exp);
}

// This is the callback function to set the param to the value
static int select_callback(void * param, int argc, char **argv, char **azColName)
{
    if(argc == 0) return 0;
    char * res = (char *)param;
    res = (char *) realloc(res, sizeof(*res));
    res = (char *) malloc(strlen(argv[0]) + 1);
    strcpy(res, argv[0]);
    printf("%s\n", res); // {"name": "Instagram Photo", url: "http://instagram.com"}
    return 0;
}

// execute the SQL statement specified by sql_statement
void sql_exec(sqlite3 * db, const char * sql_statement)
{
    char * zErrMsg = 0;
    char * param = (char *)calloc(1, sizeof(*param));
    int rc = sqlite3_exec(db, sql_statement, select_callback, param, &zErrMsg);
     printf("%s\n", param); 
```

**参数应该是 {"name": "Instagram Photo", url: "http://instagram.com"}，但由于某种原因它是空字符串！**

```
 if(rc != SQLITE_OK)
    {
        fprintf(stderr, "SQL error: %s\n", zErrMsg);
        sqlite3_free(zErrMsg);
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-20T08:10:59.140

您正在将指向新分配内存的指针写入`res`，但该变量是内部的局部变量`select_callback`，因此`sql_exec`不会知道。这同样适用于`param`参数：它只是`sqlite3_exec`的第四个参数的副本。

为确保看到您对字符串的更改，您必须传递一个指向字符串本身的指针（它是 C 中的指针，或者可能是`string`C++ 中的对象），类似于错误消息。对于 C：

```
char *result_str = ...;
rc = sqlite3_exec(..., &result_str, ...);
...
int callback(void *param, ...)
{
    char **result_str = (char **)param;
    *result_str = (char *)realloc(*result_str, ...);
    strcpy(*result_str, ...);
} 
```

* * *

**注意：**`tid`当字符串包含引号或其他控制字符时，或者当您尝试搜索[Bobby Tables](http://xkcd.com/327/)时，您会遇到问题。用于[`sqlite3_mprintf`](http://www.sqlite.org/c3ref/mprintf.html)格式化和分配 SQL 字符串，或者更好地使用[参数](http://www.sqlite.org/c3ref/bind_blob.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-30T17:54:31.763

我尝试了最后一个答案，它对我有用：我创建了一个指向指针的指针作为 char 值，并从 void 变量中插入指针的指针

```
#include <stdio.h>
#include <stdlib.h>
#include <string.h>
#include <unistd.h>
#include <sqlite3.h>

int callback(void *data,int argc,char *argv[],char **azcolname) {
int i=0;

char **result_str = (char **)data;
*result_str = (char *)calloc(strlen(argv[0]),sizeof(char));
strcpy(*result_str,argv[0]);
return 0;
}

    int main(int argc,char *argv[]) {

sqlite3 *conn;
int c=0;
char *ofile=NULL;
char *tsql_stmt=NULL;
int res=0;
char *zErrMsg = 0;
char *data=NULL;

while((c = getopt(argc , argv ,"f:")) != -1) 
{
    switch (c) {

        case 'f':
            ofile = optarg;
        break;

        default:
            fprintf(stderr,"worng argument provided\n");
        break;

    }
}

if (!ofile) {
    fprintf(stderr,"no output file (-f) given\n");
    exit(1);
}
sqlite3_open(ofile,&conn);
tsql_stmt = calloc(80,sizeof(char));
strcpy(tsql_stmt,"SELECT count(*) FROM sqlite_master WHERE type='table' AND name='");
    strcat(tsql_stmt,"mytest");
    strcat(tsql_stmt,"\'");

    //running the query
//printf("%s\n",tsql_stmt);
res = sqlite3_exec(conn,tsql_stmt,callback,&data, &zErrMsg);

if ( res != SQLITE_OK ) {
    fprintf(stderr, "SQL error: %s\n", zErrMsg);
    sqlite3_free(zErrMsg);
}
else{
    if ( atoi(data) != 1)
        fprintf(stderr, "unable to find the requested table\n");
    else
        printf("the Operation found the requested table in the database\n");
}

free(data);
sqlite3_close(conn);
return 0;
} 
```

# php - javascript循环奇数/偶数数组

> ID：12984250
> 
> 赞同：4
> 
> 时间：2012-10-20T00:46:22.187
> 
> 标签：php, javascript, jquery, loops

我正在尝试在一个数组中执行一个循环，对内容进行排序并创建每个具有 2 个值的 div。

尝试了很多东西，但我无法弄清楚我需要做什么。

这就是我需要做的：在数组中循环并创建 div。每个 div 应该有 2 个数组值。像这样：

```
<div id="1">content, content 2</div>
<div id="2">content 3, content 4</div>
<div id="3">content 5, content 6</div>
<div id="4">content 7</div> 
```

所以我有这样的数组：

```
var myArray = ['content', 'content 2', 'content 3', 'content 4', 'content 5', 'content 6', 'content 7']; 
```

我像这样循环：

```
for(var i=0; i<=myArray.length; i++){

    if(currentDiv == 1){
        $('#s'+currendDivID+'').append("<p>"+myArray[i]+"</p>");
            console.log(myArray[i]);
    }

    if(currentDiv == 2){
            $('#s'+currendDivID+'').append("<p>"+myArray[i]+"</p>");
            console.log(myArray[i]);
            $('#container').append("</div>");
    }

    console.log(currendDivID);

    if(currentDiv == 3){
        currendDivID ++;
        $('#container').append("<div id=\"s" + currendDivID + "\">");
        console.log(myArray[i]);
        $('#s'+currendDivID+'').append("<p>"+myArray[i]+"</p>");
    }

    if(currentDiv == 4){
        console.log(myArray[i]);
        $('#s'+currendDivID+'').append("<p>"+myArray[i]+"</p>");
        $('#container').append("</div>");
    }

    console.log(currendDivID);

    if(currentDiv == 5){
        currendDivID++;
        $('#container').append("<div id=\"s" + currendDivID + "\">");
        console.log(myArray[i]);
        $('#s'+currendDivID+'').append("<p>"+myArray[i]+"</p>");
    }

    if(currentDiv == 6){
        if(myArray[i] == undefined){
            return;
        }
        console.log(myArray[i]);
        $('#s'+currendDivID+'').append("<p>"+myArray[i]+"</p>");
        $('#container').append("</div>");
    }

    if(currentDiv == 7){
        currendDivID++;
            if(myArray[i] == undefined){
                $('#container').append("</div>");
                return;
            }
        $('#container').append("<div id=\"s" + currendDivID + "\">");
        console.log(myArray[i]);
        $('#s'+currendDivID+'').append("<p>"+myArray[i]+"</p>");
    }

    currentDiv ++;

} 
```

这很好用，但我需要对每个 div 进行硬编码以计数然后填充。有没有更好的方法来做到这一点，而不是像我在 currentDiv var 上那样对元素的数量进行编码？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-20T00:47:54.117

您可以使用`%`模运算符找出偶数和奇数，因为它会在除法后为您提供余数。如果将数字除以 2 并且余数为零，则为偶数，如果余数为 1，则为奇数。

```
for(var i=0; i<=myArray.length; i++){        
   if(currentDiv % 2 == 0){ 

   } 
   else{

   } 
} 
```

您可以将 currentDiv 与 i 循环增量变量一起使用，而且我认为循环计数器正在做一个额外的迭代，我已经通过 start 进行了调整`loop from i=1`。

```
for(var i=1; i<=myArray.length; i++){        
   if(i % 2 == 0){ 
        $('#s' + i + '').append("<p>"+myArray[i]+"</p>");
        console.log(myArray[i]);    
   } 
   else{
       console.log(myArray[i]);
       $('#s'+ i + '').append("<p>"+myArray[i]+"</p>");
       $('#container').append("</div>");
   } 
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-20T00:48:33.180

使用模运算符。

所以`currentDiv % 2 == 0` 对于
`currentDiv % 2 == 1` 偶数

它所做的是除以 2 并比较余数（http://en.wikipedia.org/wiki/Euclidean_division）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-10-06T08:18:09.807

```
var arr=['content','content2','content3','content4','content5'];

for(var i=0;i<=arrlen;i++){

        if(i%2==0){

            if(i!=(arrlen-1)){
                if(i!=arrlen){
                    console.log(arr[i]+" "+arr[i+1]);
                }else{
                    break;
                }
            }else{

                console.log(arr[i]);
            }

        }

    } 
```

# php - 安全地增加mysql中的字段？

> ID：12984261
> 
> 赞同：1
> 
> 时间：2012-10-20T00:48:13.663
> 
> 标签：php, mysql

我知道已经有一些关于此的帖子只是想知道使用它有多安全

```
UPDATE table SET field = field + 1 WHERE [...] 
```

如果服务器延迟一秒钟怎么办？假设 2 个用户同时单击该页面，这会导致他们都将字段读取为相同的数字并且都将同一字段增加 1？我猜，因为它是 mysql，它有某种查询系统，一次做一个，但不确定这是否属实，只是假设这是真的。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-20T00:53:17.787

在此示例中，读取和更新发生在同一语句中。语句是原子的（即您可以认为它们以事务方式运行），所以一切都很好。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-20T00:52:37.520

更新语句是原子的。当您运行更新查询时，表（或带有 innodb 的行）被锁定。时期。如果两个用户单击“同时”，它将正确地增加该字段两次。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-20T01:01:18.697

这是我使用的另一种方法（如果您有单独的查询并且不想不必要地锁定表）：

而不是更新，只需插入另一个表（模式无关紧要），定期（不是太频繁）计算该表中的项目并基于该更新另一个表。如果表会变大，只需增加计数，然后删除条目。还允许您添加其他元数据，例如用于进一步分析的时间戳。

# http - 如果查询字符串 url 参数是有效的 url 字符串，则 403 禁止错误

> ID：12984262
> 
> 赞同：3
> 
> 时间：2012-10-20T00:48:19.257
> 
> 标签：http

我有这个查询字符串

`article.php?title=sometitle&source=somesource&url=http://someurl.com`

url 参数是 urlencoded 但我收到 403 错误

如果我将 url 参数更改为除 url 字符串之外的其他内容，例如`&url=test`，它可以正常工作。

知道为什么会这样吗？谢谢！

# javascript - For循环后的神秘边界框（Javascript）

> ID：12984268
> 
> 赞同：3
> 
> 时间：2012-10-20T00:49:34.037
> 
> 标签：javascript, for-loop

我有一个 for() 循环，用于设置表格中元素的 src、高度和宽度。我对 Javascript 相当陌生（大约 2-3 周，自学），但我在游戏 Second Life 中使用 Line Scripting Language (LSL) 编写代码，所以这对我来说似乎相当熟悉且易于理解。 . 这也是我的代码和其他人的代码的组合来完成这项工作。重要的部分，比如阅读“film1.txt”文件来自某人，然后经过大量修改以适合我。大多数变量都有我想到的名称，所以它可能看起来有点随意，..或者完全容易理解。

导致问题的Javascript：

```
 var txtFile = new XMLHttpRequest();
txtFile.open("GET", "film1.txt", true);
txtFile.onreadystatechange = function() {
    if (txtFile.readyState === 4) {  // Makes sure the document is ready to parse.
        if (txtFile.status === 200) {  // Makes sure it's found the file.
            allText = txtFile.responseText; 
            linesParted = allText.split(","); // Will separate each line into an array
            document.getElementById("display").src=linesParted[0];
            document.getElementById("displayText").innerHTML=linesParted[1];

            var dispResize = new Image();
            dispResize.src = linesParted[0];
            dispResize.onload = function() {
                var dispNewHeight = (this.height*(500))/this.width;
                var dispNewWidth = 500;
                document.getElementById("display").style.height = dispNewHeight;
                document.getElementById("display").style.width = dispNewWidth;
            }               

            //
            var imgToDo;
            for(imgToDo = 0; imgToDo < ((linesParted.length)/2); imgToDo++)
            {
                var imgToResize = new Image();
                imgToDoTimes2 = linesParted[imgToDo*2]
                if(imgToDoTimes2 != null) {
                    document.getElementById("img"+imgToDo).style.cursor = "pointer";
                    document.getElementById("img"+imgToDo).src=imgToDoTimes2;
                    imgToResize.src = imgToDoTimes2;
                    imgToResize.onload = function() {
                        var imgResizeNewHeight = (this.height*125)/this.width;
                        document.getElementById("img"+imgToDo).height = imgResizeNewHeight;
                        document.getElementById("img"+imgToDo).width = 125;
                    }
                }
            }
        }
    }
}
txtFile.send(null); 
```

受 Javascript 影响的 HTML

```
<table border="0" align="center" cellpadding="0" cellspacing="0" id="displayTable">
                    <tr><td colspan="10"><center><div id="displayText"></div></center></td></tr>
                    <tr><td colspan="10" align="center"><img src="" id="display" onClick="scaleDisplay()" ondblclick="dblClick('display')" /></td></tr>
                    <tr><td></td><td colspan="6"><hr /></td><td></td></tr>
                    <tr width="500" id="imgRow">
                        <td></td>
                        <td onclick="fullsize(0)" width="125" ondblclick="dblClick(0)"><img src="" width="125" id="img0"/></td>
                        <td onclick="fullsize(1)" width="125" ondblclick="dblClick(1)"><img src="" width="125" id="img1"/></td>
                        <td onclick="fullsize(2)" width="125" ondblclick="dblClick(2)"><img src="" width="125" id="img2"/></td>
                        <td onclick="fullsize(3)" width="125" ondblclick="dblClick(3)"><img src="" width="125" id="img3"/></td>
                        <td onclick="fullsize(4)" width="125" ondblclick="dblClick(4)"><img src="" width="125" id="img4"/></td>
                        <td onclick="fullsize(5)" width="125" ondblclick="dblClick(5)"><img src="" width="125" id="img5"/></td>
                        <td></td>
                    </tr>
                    <tr width="500" id="imgRow">
                        <td></td>
                        <td onclick="fullsize(6)" width="125" ondblclick="dblClick(6)"><img src="" width="125" id="img6"/></td>
                        <td onclick="fullsize(7)" width="125" ondblclick="dblClick(7)"><img src="" width="125" id="img7"/></td>
                        <td onclick="fullsize(8)" width="125" ondblclick="dblClick(8)"><img src="" width="125" id="img8"/></td>
                        <td onclick="fullsize(9)" width="125" ondblclick="dblClick(9)"><img src="" width="125" id="img9"/></td>
                        <td onclick="fullsize(10)" width="125" ondblclick="dblClick(10)"><img src="" width="125" id="img10"/></td>
                        <td onclick="fullsize(11)" width="125" ondblclick="dblClick(11)"><img src="" width="125" id="img11"/></td>
                        <td></td>
                    </tr>
                    <tr width="500" id="imgRow">
                        <td></td>
                        <td onclick="fullsize(12)" width="125" ondblclick="dblClick(12)"><img src="" width="125" id="img12"/></td>
                        <td onclick="fullsize(13)" width="125" ondblclick="dblClick(13)"><img src="" width="125" id="img13"/></td>
                        <td onclick="fullsize(14)" width="125" ondblclick="dblClick(14)"><img src="" width="125" id="img14"/></td>
                        <td onclick="fullsize(15)" width="125" ondblclick="dblClick(15)"><img src="" width="125" id="img15"/></td>
                        <td onclick="fullsize(16)" width="125" ondblclick="dblClick(16)"><img src="" width="125" id="img16"/></td>
                        <td onclick="fullsize(17)" width="125" ondblclick="dblClick(17)"><img src="" width="125" id="img17"/></td>
                        <td></td>
                    </tr>
                    <tr width="500" id="imgRow">
                        <td></td>
                        <td onclick="fullsize(18)" width="125" ondblclick="dblClick(18)"><img src="" width="125" id="img18"/></td>
                        <td onclick="fullsize(19)" width="125" ondblclick="dblClick(19)"><img src="" width="125" id="img19"/></td>
                        <td onclick="fullsize(20)" width="125" ondblclick="dblClick(20)"><img src="" width="125" id="img20"/></td>
                        <td onclick="fullsize(21)" width="125" ondblclick="dblClick(21)"><img src="" width="125" id="img21"/></td>
                        <td onclick="fullsize(22)" width="125" ondblclick="dblClick(22)"><img src="" width="125" id="img22"/></td>
                        <td onclick="fullsize(23)" width="125" ondblclick="dblClick(23)"><img src="" width="125" id="img23"/></td>
                        <td></td>
                    </tr>
                    <tr><td colspan="6" height="25">&nbsp;</td></tr>
                </table> 
```

代码说明：我给它一个数组中的项目列表，该列表由服务器上名为film1.txt 的文件提供（就像幻灯片类型的东西，.. 但我改变了主意）。它是这样的：“filedir/filename.jpg,File Title,filedir/filename.jpg,File Title,filedir/filename.jpg,File Title”。它将 .split() 转换为一个数组，该数组使用“linesParted[]”调用。for() 循环通过从 0 开始直到它不再是 < (lineParted.length)/2 来完成它的工作。它创建一个新的 Image()，为在 for() 循环中测试的变量创建一个变量，在linesParted[] 中乘以 2，如果该新变量为 != 为 null，则在 if() 中进行测试。如果不是，则将 's style.cursor 设置为“指针”，将 src 设置为 src，将 Image() 的 src 设置为 imgToDoTimes2，然后一旦加载，

问题：由于某种原因，它将允许它不做任何事情的最后一个设置为空，因为它没有来自 film1.txt 的源数据，但它留下了一个边界框之类的东西，看起来与最后一个不为空的图像。

这是服务器上出现错误的上述代码的完整版本。注意注释：3（通常在顶部 index.html）： http: [//greengoosemarketing.com/so/](http://greengoosemarketing.com/so/)

其他资源链接位于该页面的注释中。

在它所在的网站上的一句话：该网站属于我的高级动画老师。在那里张贴的作品将主要是学生的作品。“我的世界 C4D 渲染”是我唯一的作品。:3

让我知道我是否可以为您提供其他任何东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T02:08:51.423

这个问题很容易解决。您正在从 for 循环完成后调用的函数访问 for 索引变量。因此，您将始终得到一个值，该值等于该索引在 for 循环的最后一次迭代中所取的数字。

解决此问题的一种方法是：

```
imgToResize.imgIndex = imgToDo;
imgToResize.onload = function() {
var imgResizeNewHeight = (this.height*125)/this.width;
    document.getElementById("img" + this.imgIndex).height = imgResizeNewHeight;
    document.getElementById("img"+ this.imgIndex).width = 125;
} 
```

您还可以在创建项目后使用其他方式访问项目，但这似乎是最简单的方法。

您还可以为元素分配一个预定义的 ID，然后在闭包中使用该 ID。

# r - 如何在R中安装k个最近邻居

> ID：12984271
> 
> 赞同：1
> 
> 时间：2012-10-20T00:50:01.487
> 
> 标签：r, installation

曾经有一个用于语言 R 的名为 knnflex 的包，但 CRAN 不再提供它。我有 tar 文件，但是如何在 R 下安装它？还有其他可以支持 knn.dist 或 knn.predict 的包吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-20T09:06:13.273

包**FNN**。快速 k-最近邻搜索算法和应用程序的集合，包括包类中的覆盖树、kd-树和最近邻算法。此外，还实现了 KNN 分类、回归和信息度量。

见[http://cran.r-project.org/web/packages/FNN/index.html](http://cran.r-project.org/web/packages/FNN/index.html)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-08-28T07:21:22.087

好吧，我正在使用 RStudio 0.98.994 并安装 knn 包，只需一个命令即可，即**install.packages(class)**并加载相同的类类型**library(class)**。希望能帮助到你。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-20T01:59:19.757

我认为这就是您正在寻找的[http://rss.acs.unt.edu/Rdoc/library/utils/html/INSTALL.html](http://rss.acs.unt.edu/Rdoc/library/utils/html/INSTALL.html)

# ruby - 呈现的 HTML 实体的 File.Open 编码损坏

> ID：12984275
> 
> 赞同：0
> 
> 时间：2012-10-20T00:51:02.793
> 
> 标签：ruby, encoding, character-encoding

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-20T01:24:31.227

*You have to be kidding me...*

The fix was to set a content header in the HTML template page. I'm guessing the console was outputting valid UTF-8 but not in a recognizable format.

`<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>`

While I feel pretty stupid right now, I'm sure someone else is going to run into something similar so if that's you: I feel your pain; I just hope you didn't spend the last 6 hours troubleshooting as I have.

# php - PHP - 检查是否设置了任何 GET 数据

> ID：12984279
> 
> 赞同：2
> 
> 时间：2012-10-20T00:51:30.283
> 
> 标签：php, get

> **可能重复：**
> [如何检查 $_GET 是否为空？](https://stackoverflow.com/questions/3408616/how-to-check-if-get-is-empty)

我正在尝试检查`$_GET`我的 url 中有任何数据的情况`?var=foo&biz=bang`，而`if`我目前用来执行此操作的语句是`isset($_GET) //Do something`，但即使我的 URL 中甚至没有任何数据`?`或`&`任何地方，它也会返回 truey。我假设`$_GET`变量总是设置的，那么我该如何检查呢？

[重复“如何检查 $_GET 是否为空？”](https://stackoverflow.com/questions/3408616/how-to-check-if-get-is-empty?rq=1)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-20T00:54:25.210

由于 $_GET*总是在 php 中* **设置**（在网络服务器中运行时），你真正想知道的是“里面有什么吗？”

你想使用：

```
if ($_GET) {
} 
```

这是有效的，因为 $_GET 是一个数组，一个空数组将被评估`false`，而一个填充的数组是`true`.

* * *

*更新*

我不再使用上述方法，因为它对可测试性和 CLI 运行命令 ( `phpunit`, `artisan`) 确实有负面影响。

我现在总是检查`isset()`阵列`$_GET`。我通常也分配给一个数组里面的`if`- php 将这些表达式评估为分配变量的值。

如果您的框架具有“安全数组访问”功能，则应始终使用它。如果你的框架有一个“安全的 GET 函数”那就更好了。如果您没有使用框架，或者您的框架不包含这些辅助函数，您应该自己编写它们。

```
// example with "safe array access"
if (isset($_GET) && $value = safe_array($_GET, 'key')) {
    // do something with $value
}

// example with "safe GET function"
if ($value = safe_input_get('key')) {
    // do something with $value
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-20T00:52:56.617

```
if(!empty($_GET))
{
    // do something
} 
```

这应该让您知道 get 数组是否已填充

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-20T00:59:16.513

using`empty()`可能有问题，因为它将返回`true`0、0.00、false 和其他 (http://php.net/manual/en/function.empty.php)

可能的解决方法：

```
<?php
function is_blank($value) {
    return empty($value) && !is_numeric($value);
}
if (!is_blank($_GET)){
   ... do your thing ...
}

?> 
```

或检查特定的帖子值`isset($_POST['value'])`

# visual-c++ - 如何在 C++/CLI 中定义非内联属性

> ID：12984283
> 
> 赞同：2
> 
> 时间：2012-10-20T00:51:39.147
> 
> 标签：visual-c++, c++-cli

在 C++/CLI 中，[根据文档](http://msdn.microsoft.com/en-us/library/ms235304.aspx)，您可以这样定义属性：

```
public ref class Vector sealed { 
public:
   property double x {
      double get() {
         return _x;
      }

      void set( double newx ) {
         _x = newx;
      }
   } // Note: no semi-colon
}; 
```

但是，如果您只是像这样对属性进行原型制作：

```
public ref class Vector sealed { 
public:
   property double x {
      double get() ;
      void set( double newx );
   } // Note: no semi-colon
}; 
```

您将如何为这些原型创建实现？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-20T00:51:39.147

为了实现给定的属性 x，您需要以下 2 个函数：

```
double Vector::x::get() {
    return _x;
}

void Vector::x::set(double newx) {
    _x = newx;
} 
```

# php - 检查路径是否会因为 open_basedir 而失败

> ID：12984288
> 
> 赞同：3
> 
> 时间：2012-10-20T00:51:54.803
> 
> 标签：php, open-basedir

是否可以在失败之前检查这一点？

```
if (is_in_open_basedir($path)) {
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-20T01:04:56.277

您可以使用[ini_get](http://php.net/manual/en/function.ini-get.php)获取 open_basedir 的当前值以检查其他值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-08-30T08:53:39.283

我知道这并不能完全回答这个问题，但也许是它背后的动机：

如果您不需要在调用*之前*检查并且只是想避免警告，在访问其他目录的函数上，另一种方法是使用`@`运算符并检查`error_get_last`

```
error_clear_last();
$isDir = @is_dir('/');
if (error_get_last() !== null) {
   $isDir = 'cannot-detect';
} 
```

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2012-10-20T01:00:52.597

这不是 php 标准函数。要处理异常，您可以使用：

```
try {

}
catch( $e ) {

} 
```

检查这个：[PHP异常](http://www.php.net/manual/en/language.exceptions.php)

# asp.net-mvc - MVC Homecontroller 在 DB 中编辑详细信息

> ID：12984289
> 
> 赞同：2
> 
> 时间：2012-10-20T00:52:06.950
> 
> 标签：asp.net-mvc, ckeditor

所以只是使用了一个基本教程来创建一个数据库并向其中添加新记录。这一切都很好......但是现在我想编辑一条记录......

```
// GET: /Home/Edit/5

    public ActionResult Edit(int id)
    {
        return View();
    }

    //
    // POST: /Home/Edit/5

    [HttpPost]
    //public ActionResult Edit(int id, FormCollection collection)
    public ActionResult Edit([Bind(Exclude = "id")]MovieTable1 movieToCreate)
    {
        try
        {
            // TODO: Add update logic here

           //so i need to insert a line of code here to say something like update
            //I was using the previous code:
           //_entities.AddToMovieTable1(movieToCreate);
            _entities.SaveChanges();           

            return RedirectToAction("Index");
        }
        catch
        {
            return View();
        }
    } 
```

这不起作用我想我所要做的就是编辑“_entities.AddToMovieTable1(movieToCreate);”行 到某事来编辑记录

为了让添加新记录工作，我使用了代码......

```
 public class HomeController : Controller
{
    private MoviesDBEntities _entities = new MoviesDBEntities();
    //
    // GET: /Home/

    public ActionResult Index()
    {
        return View(_entities.MovieTable1.ToList());
    }

    //
    // GET: /Home/Details/5

    public ActionResult Details(int id)
    {
        return View();
    }

    //
    // GET: /Home/Create

    public ActionResult Create()
    {
        return View();
    }

    //
    // POST: /Home/Create

    [HttpPost]
    //public ActionResult Create(FormCollection collection)
    public ActionResult Create([Bind(Exclude = "id")]MovieTable1 movieToCreate)
    {
        try
        {
            // TODO: Add insert logic here
            _entities.AddToMovieTable1(movieToCreate);
            _entities.SaveChanges();

            return RedirectToAction("Index");
        }
        catch
        {
            return View();
        }
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-20T01:06:57.220

你可以使用：

```
_entities.Attach(moveiToModify);
_entities.Entry(moveiToModify).State = EntityState.Modified; 
```

我真的不知道，为什么要排除 ID 属性，它是更新所必需的。

# iphone - 线程 1：在填充选择器时发出信号 SIGABRT 错误

> ID：12984291
> 
> 赞同：1
> 
> 时间：2012-10-20T00:52:16.540
> 
> 标签：iphone, xcode, ios6

我正在编写这段代码，它一直给我这个错误。我有另一个项目的代码相同，但没有给我错误，所以我看不出问题出在哪里。输出是`2012-10-19 20:48:22.266 ScienceReader[5992:c07] -[UIView numberOfComponentsInPickerView:]: unrecognized selector sent to instance 0x74385f0 2012-10-19 20:48:22.268 ScienceReader[5992:c07] *** Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: '-[UIView numberOfComponentsInPickerView:]: unrecognized selector sent to instance 0x74385f0' *** First throw call stack:` 调试会话中的行是`return UIApplicationMain(argc, argv, nil, NSStringFromClass([AppDelegate class]));` Viewcontroller.m 中的代码是`data = [[NSMutableArray alloc] initWithObjects:@"Delta", nil];`

# c - -1.#IND0 错误在 C 中使用 Range-Kutta 方法

> ID：12984296
> 
> 赞同：0
> 
> 时间：2012-10-20T00:52:43.910
> 
> 标签：c, physics, numerical-methods

我试图使用 4 点 Range-Kutta 方法求解耦合的一阶微分方程。输出 的值时`m`，`-1.#IND0`出现错误。我知道这可能是 NaN，但这对我来说没有意义，因为 的值`m`应该增加并且我`-1IND0`介于有效值之间。这是我的输出示例：

```
3110047776596300800000000000000000000.00000 35953700.00
-1.#IND0 35984000.00
-1.#IND0 36013700.00
3721056749337648900000000000000000000.00000 36042800.00
-1.#IND0 36071400.00
4132402773947312100000000000000000000.00000 36099500.00
-1.#IND0 36127200.00
4546861919240663800000000000000000000.00000 36154400.00 
```

这是我的代码：

```
#include <stdio.h>
#include <stdlib.h>
#include <math.h>

#define pi 3.141592654

double f(double p, double m, double r)
{
    return -0.000000000000000012812899255404507 * m * pow(p, 1.0/3) / (r * r);
}

double g(double p, double r)
{
    return 4 * pi * r * r * p;
}

int main()
{
    double  p_c,        //central density
            p,              //densities
            m,              //masses
            f_val[4],       //arrayed f
            g_val[4],       //arrayed g
            r = 1e-15,      //radius
        dr = 100,       //radius increment
        p_0 = 0.001;    //effective zero density
double p_min = 1e6;
double p_max = 1e14;
int i;                  //Loop counter

FILE *data=fopen("dwarf.txt", "w");//Output file

for(p_c = p_min; p_c <= p_max; p_c += (p_max - p_min) / 100)
{
    p = p_c;
    m = (4.0/3) * pi * r * r * r * p_c;

    while(p > p_0)
    {
        //fprintf(data, "%.5lf %.2lf %.2lf\n", p, m, r);

        f_val[0] = f(p, m, r) * dr;
        g_val[0] = g(p, r) * dr;

        f_val[1] = f(p + f_val[0]/2, m + g_val[0]/2, r + dr/2) * dr;
        g_val[1] = g(p + f_val[0]/2, r + dr/2) * dr;

        f_val[2] = f(p + f_val[1]/2, m + g_val[1]/2, r + dr/2) * dr;
        g_val[2] = g(p + f_val[1]/2, r + dr/2) * dr;

        f_val[3] = f(p + f_val[2], m + g_val[2], r + dr) * dr;
        g_val[3] = g(p + f_val[2], r + dr) * dr;

        m += (g_val[0] + 2 * g_val[1] + 2 * g_val[2] + g_val[3]) / 6; 
        p += (f_val[0] + 2 * f_val[1] + 2 * f_val[2] + f_val[3]) / 6;

        r += dr;
    }

    fprintf(data, "%.5lf %.2lf\n", m, r);
    printf("%.5lf %.2lf\n", m, r);
}
exit;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T03:43:17.193

我得到了南的。在 cygwin 上编译并运行：

```
3110047776596300799965078807132504064.00000 35953700.00
nan 35984000.00
nan 36013700.00
3721056749337648263817730951571570688.00000 36042800.00
nan 36071400.00
4132402773947312079489066295688691712.00000 36099500.00
nan 36127200.00
4546861919240663813565041399809703936.00000 36154400.00 
```

自从我研究龙格库塔已经有一段时间了......看看你的代码，我认为 r 是自变量，dr 是步长，m 是你要解决的因变量。我很困惑 p 是什么。你能给我们更多的细节吗？如果我能看到您要解决的实际方程式，那将更有意义。

# mysql - mysql客户端重新连接时提示输入密码

> ID：12984304
> 
> 赞同：3
> 
> 时间：2012-10-20T00:54:17.730
> 
> 标签：mysql, security

我通过以下方式调用mysql：

```
mysql -h localhost -u user -p db 
```

这将导致提示用户输入密码。

但是我已将 interactive_timeout 设置为 60 秒。

60 秒后，客户端将超时，但由于重新连接选项未设置为 false，因此它将尝试重新连接。重新连接时，mysql 客户端不提示输入密码。我想让它在重新连接时提示输入密码。谁可以帮我这个事。

这是示例输出

```
mysql -h localhost -u user -p db 
Enter password: 
Reading table information for completion of table and column names
You can turn off this feature to get a quicker startup with -A

Welcome to the MySQL monitor.  Commands end with ; or \g.
Your MySQL connection id is 26
Server version: 5.1.58 MySQL Community Server (GPL)

Copyright (c) 2000, 2010, Oracle and/or its affiliates. All rights reserved.
This software comes with ABSOLUTELY NO WARRANTY. This is free software,
and you are welcome to modify and redistribute it under the GPL v2 license

Type 'help;' or '\h' for help. Type '\c' to clear the current input statement.

mysql> show variables;
ERROR 2006 (HY000): MySQL server has gone away
No connection. Trying to reconnect...
Connection id:    30
Current database: db 
```

我希望它在重新连接时提示输入密码

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-20T01:13:57.953

您可以尝试查看指定[--skip-reconnect](http://dev.mysql.com/doc/refman/5.5/en/mysql-command-options.html#option_mysql_reconnect)（与 结合）的[别名是否有效](http://linux.about.com/library/glossary/bldef_alias.htm) `mysql``interactive_timeout`

# java - JavaFx 对 SwingUtilities.invokeLater 的响应

> ID：12984310
> 
> 赞同：10
> 
> 时间：2012-10-20T00:55:19.277
> 
> 标签：java, swing, javafx, event-dispatch-thread, mixing

因此，我知道 JavaFx 在使用线程时更新 GUI 的方法称为 Task，但代码是否以类似的方式工作或有任何差异。让我给你一个挥杆的例子：

**GUI 之外的另一个作为线程运行的类**

```
public void run(){
    while (socket.isConnected()) {
        String x = input.next();
        System.out.println(x);
        mg.updateChat(x)
    }
} 
```

**在实际的 GUI 中**

```
public void updateChat(final String input){
    SwingUtilities.invokeLater(new Runnable() {
        @Override
        public void run() {
            txtChat.setText(input); 
        }
    }); 
} 
```

Task 的工作方式是否完全相同？或者是否存在差异，如果有，您将如何修改此代码以在 JavaFx 项目中工作？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-10-20T03:58:07.973

您是否正在寻找 JavaFX 中的 SwingUtil.invokeLater 对应项。如果是，它是：

```
Platform.runLater(java.lang.Runnable runnable) 
```

# mysql - Mysql多对多表查询

> ID：12984311
> 
> 赞同：2
> 
> 时间：2012-10-20T00:55:29.047
> 
> 标签：mysql, sql

我有 3 桌汽车、司机、汽车司机。

我的汽车表有两个字段 - carid 和 car_model

我的驱动程序表有两个字段 - driverid 和 driver_name

我的 cars_drivers 有两个字段，它们是主键 - carid 和 driverid。

我的汽车表中有 3 个条目

1.  丰田
2.  本田
3.  起亚

我的司机表有

1.  鲍勃
2.  汤姆

我的 car_drivers 表会是什么样的？我会在 carId 中输入 3 或更少的数字，在 DriverId 中输入 2 或更少的数字吗？

```
1-1
1-2
1-3 
```

我将如何进行查询以显示 3 个带有随机驾驶员的车型？

我正在寻找类似的东西

```
toyota  bob
kia     tom
honda   bob 
```

我一直在浏览一些教程，但我也没有关注连接的工作方式

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-20T01:07:14.040

JOIN 关联信息。car_driver 中的一个条目告诉您汽车是由司机驾驶的。如果您只想显示一个随机驱动程序，则根本不需要加入，只需获取所有驱动程序并从列表中随机选择一个即可。

然而，通常数据库关联信息。例如，有工作的人。您不能只是将随机工作放在某人旁边，而是使用 JOIN 来获得正确的关系

就像是

```
 SELECT * FROM jobs
     LEFT JOIN people_jobs ON jobs.jobid = people_jobs.jobid 
     LEFT JOIN people ON people.personid = people_jobs.personid 
     WHERE person.personname = 'Bob Smith' 
```

会给你关于鲍勃所有工作的信息。

然而

```
 SELECT * FROM people 
     LEFT JOIN people_jobs ON people.personid = people_jobs.personid 
     LEFT JOIN jobs ON jobs.jobid = people_jobs.jobid 
     WHERE jobs.job = 'Waiter ' 
```

会让你得到数据库中所有曾经是服务员的人。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-20T01:09:36.647

您的模式应该是这样的表有两列（字段），它们共同形成一个复合主键，并且分别是和表`cars_drivers`的外键。`cars``drivers`

该`cars_drivers`表记录了每位驾驶员“可以”或“愿意”或“想要”驾驶的汽车。

对于给定的数据，`carid`列中的值应在 1-3 范围内；列中的值`driverid`应在 1-2 范围内。假设您使用 InnoDB 存储，这些约束应该自动强制执行（我保留对 MyISAM 的判断，但我认为它不会强制执行 PK-FK 约束）。

```
CREATE TABLE cars_drivers
(
    carid      INTEGER NOT NULL REFERENCES cars,
    driverid   INTEGER NOT NULL REFERENCES drivers,
    PRIMARY KEY(carid, driverid)
);  -- Plus storage options as required ... 
```

您可以从三个表中选择：

```
SELECT c.*, d.*
  FROM cars AS c
  JOIN cars_drivers AS j ON c.carid = j.carid
  JOIN drivers AS d ON d.driverid = j.driverid; 
```

您可以根据需要在联接上应用条件。请注意，显示此联接中的任何数据并没有特别的好处，`cars_drivers`因为这些值将与其他两个表中的值之一相同。

要仅获取模型名称和驱动程序名称，您只需指定这些列：

```
SELECT c.car_model, d.driver_name
  FROM cars AS c
  JOIN cars_drivers AS j ON c.carid = j.carid
  JOIN drivers AS d ON d.driverid = j.driverid; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-20T01:07:03.247

假设您的表格如下所示：

```
Table 1: Drivers
    id      Name
    1       Joe Bloggs
    2       Si Borg
    3       Anne Droyd

Table 2: Cars
    id      Type
    9       Honda
    8       Toyota
    7       Kia

Table 3: CarDrivers
    CarId   DriverId
    9       1
    9       2
    8       2
    7       3 
```

您的查询将是：

```
select d.name, c.type
from Drivers d
inner join CarDrivers cd
    on d.id = cd.DriverId
inner join Cars c
    on cd.CarId = c.id 
```

给出结果：

```
Name        Type
Joe Bloggs  Honda
Si Borg     Honda
Si Borg     Toyota
Anne Droyd  Kia 
```

CarDriver 表基本上是将司机与他们驾驶的汽车联系起来；即该表中的第一行表示 ID 为 1 的司机驾驶 ID 为 9 的汽车。

# networking - 如何在 Gstreamer 中了解网络数据包状态

> ID：12984314
> 
> 赞同：1
> 
> 时间：2012-10-20T00:55:57.923
> 
> 标签：networking, gstreamer

我已经使用 GStreamer 创建了用于实时流式传输的客户端和服务器应用程序。我将如何知道它已到达或未能到达目的地的网络数据包状态？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T12:24:14.267

即使在 tcp 反馈的情况下也不是实时的。我的意思是服务器上成功的发送 API 并不意味着数据包在那个时间点已经到达客户端。它可能仍停留在其中一个拥塞窗口中，但最终会到达客户端！

如果您通过不良网络连接连接到 TCP 流上的 RTSP/RTP，则可以非常明显地看到这种效果。

可靠的 UDP 等概念在这里可以提供一些帮助。

[当您需要可靠的 UDP 时，您使用什么？](https://stackoverflow.com/questions/107668/what-do-you-use-when-you-need-reliable-udp)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T09:09:56.523

您通常无法知道包裹是否已到达目的地。

例如，当使用 UDP（如`udpsrc`& `udpsink`）时，*设计*上无法知道包是否到达目的地。

otoh，当使用 TCP/IP（如`tcpclientsink`& `tcpserversrc`）时，协议栈将保证每个包的传递，除非连接断开。在这种情况下，您的一方将收到 EOS 通知。

# ruby-on-rails - Rails 数据库添加列

> ID：12984316
> 
> 赞同：12
> 
> 时间：2012-10-20T00:56:18.513
> 
> 标签：ruby-on-rails, ruby-on-rails-3

在 Rails 中创建模型时，我忘记添加`amount`我想要的列。以后如何将其添加到模型中？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-10-20T01:01:21.637

通过控制台创建一个新的迁移：

```
rails g migration add_amount_to_items 
```

这应该创建一个像这样的迁移：

```
class AddAmountToItems < ActiveRecord::Migration
  def change
    # add_column table_name, :column_name, :column_type
    add_column :items, :amount, :integer
  end
end 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-10-20T11:23:50.027

懒惰的方式：

```
rails g migration add_amount_to_items amount:integer 
```

# php - 删除文件扩展名并允许“伪目录”？

> ID：12984318
> 
> 赞同：0
> 
> 时间：2012-10-20T00:56:31.383
> 
> 标签：php, apache, .htaccess, url, mod-rewrite

我正在创建一个相当简单的网站。根文件夹中有两个静态页面（Home 和 Portfolio），Wordpress 在`/blog`. 静态页面包括使用`require_once("blog/wp-config.php");`.

作品集页面将使用 Javascript（History.JS 或 Crossroads/Hasher）来“推送”代表类别和专辑的 URL。例如，单击左侧的“婚礼”将导致`portfolio/weddings`，而相册将是`portfolio/weddings/jane-jon-smith`。这些文件需要在直接访问时可用（我向您发送了专辑的链接）。

现在，我已将其设置为可以从`index.php`和访问静态页面`portfolio.php`。我能够使用以下 .htaccess 指令删除文件扩展名：

```
# Remove .php-extension from url
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_FILENAME}\.php -f
RewriteRule ^([^\.]+)/$ $1.php [L] 
```

但是当我尝试访问诸如 之类的 URL 时`portfolio/weddings`，我收到 404 错误，因为那不是有效的目录或文件。我一直在搜索，但似乎找不到任何相关的东西，除了如何删除扩展名（我正在工作）。

如何删除文件扩展名并允许直接访问这些“假”目录？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-20T01:12:31.560

Wordpress 使用前端控制器来创建您所谓的“伪目录”。它获取 url 的参数，并相应地将其路由到应用程序控制器以构建视图层或客户端看到的内容。

为了让 Wordpress 相应地路由此请求，您需要为每个投资组合条目提供相应的页面。您可以使用 Wordpress 的默认功能来执行此操作。撤消对 .htaccess 文件的更改，而是将设置中的永久链接设置更改为“帖子名称”。

使用内置的动态投资组合可能比为您的静态页面使用自定义滚动“小部件”更容易。您的静态页面可以设置为显示具有正确 WP 主题的投资组合项目。

Wordpress 的伟大之处在于它可以做的非常先进的事情，只需更改仪表板中的设置即可。我建议您花一些时间研究每个功能可以做什么，并且您将节省大量时间，并且在 WP 于 12 月推出下一个版本时不必对自己的代码进行故障排除。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-20T02:15:49.213

在对这个问题发表评论后，我突然想到，也许我应该将任何匹配“portfolio/*”的东西重定向到portfolio.php，然后我可以使用一些函数来处理路径（现在已经成功运行）。

我所做的只是在我在问题中列出的规则之后立即添加这一行：

```
RewriteRule ^portfolio/([^/]+) /portfolio.php?$1 [NC] 
```

# php - 在 wordpress 模板中显示每页的帖子

> ID：12984319
> 
> 赞同：2
> 
> 时间：2012-10-20T00:56:44.987
> 
> 标签：php, wordpress, loops

我有 2 个循环，一个用于粘性博客帖子（每页限制为 3 个），一个用于其余帖子。我想每页显示 3 个置顶帖子 + 5 个其他帖子。每页仅显示 5 个其他帖子不起作用。这是他们的循环：

```
 $loop2query = new WP_Query('ignore_sticky_posts=1'.'showposts=5'.'&paged='.$paged);

  // START 2ND LOOP.
  if ($loop2query->have_posts()) : while ($loop2query->have_posts()) : $loop2query->the_post();
  // Show all posts except the 3 posts in the 1st loop.
  if(in_array($post->ID, $do_not_duplicate)) continue; ?>

  <div class="blogpost">
    <h2><a href="<?php the_permalink(); ?>" title="<?php the_title_attribute(); ?>"><?php the_title(); ?></a></h2>
    <p>Written on <?php the_time('m/d/Y') ?>. Filed under <?php the_category(', '); ?>.</p>
  </div>

  <?php the_excerpt();
  endwhile; endif; // END 2ND LOOP. ?> 
```

我认为`'showposts=5'.'&paged='.$paged`必须是限制每页帖子的正确方法，但我注意到我是否在我的查询中正确使用了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-04T16:03:30.677

我使用此代码来限制我的类别和每页的帖子数量，试试看：

```
<?php
$cat = 1;
$showposts = 5; // -1 shows all posts
$do_not_show_stickies = 1; // 0 to show stickies
$paged = (get_query_var('paged')) ? get_query_var('paged') : 1;
$args=array(
    'category__in' => $cat,
    'showposts' => $showposts,
    'caller_get_posts' => $do_not_show_stickies,
    'paged' => $paged
   );
$my_query = new WP_Query($args); ?>
<?php query_posts($args); if( have_posts() ) :?>
<?php while ( have_posts() ) : the_post(); ?>

<!-- put title and content tags here -->

<?php endwhile;endif; ?> 
```

# php - PHP：如何替换文本，但仅限于某些标识符之间？

> ID：12984321
> 
> 赞同：0
> 
> 时间：2012-10-20T00:56:48.293
> 
> 标签：php, regex, preg-match-all

在 PHP 中，我需要帮助替换某些标识符之间的文件中的某些内容。

例如 ：

```
abcde
-BEGIN-
   bcdef
-END-
cdefg
-BEGIN-
   doo wah diddy
-END-
defgh 
```

假设我需要用“z”替换“d”字符，但仅限于*to*`-BEGIN-`部分`-END-`之间。结果将是：

```
abcde
-BEGIN-
   bczef
-END-
cdefg
-BEGIN-
   zoo wah zizzy
-END-
defgh 
```

我试图`preg_match_all`成功识别 -BEGIN- 到 -END- 部分：

```
$text = file_get_contents($file);
preg_match_all('#-BEGIN-.*?-END-#s', $text, $matches); 
```

但无法弄清楚如何替换这些匹配项中的某些内容并返回包括正确替换在内的整个文本。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-20T01:37:18.313

这将搜索**-BEGIN-**和**-END-内的块，然后用****z**替换所有出现的**d**字符（因此是第 3 行中的函数）。**`preg_replace()`**

 **```
$str = preg_replace_callback(
    '~(?<=(?<=\n|^)-BEGIN-\n).*?(?=\n-END-)~s',
    create_function('$m','return preg_replace("~d~s","z",$m[0]);'),
    $str
); 
```

**编辑 1：**在两个正则表达式规则 中将**m**标志更改为**s 。**

* * *

**编辑 2：**如果您想确保这里有一个更好的正则表达式版本（考虑到所有可能的换行符 - Windows、Unix 等）。

```
 '~(?<=
        (?<=\n|\r|\r\n|^)   -BEGIN- \n |
        (?<=\n|\r|\r\n|^)   -BEGIN- \r |
        (?<=\n|\r|\r\n|^)   -BEGIN- \r\n
    )
    .*?
    (?=
        \n      -END-   (?=\n|\r|\r\n|$) |
        \r      -END-   (?=\n|\r|\r\n|$) |
        \r\n    -END-   (?=\n|\r|\r\n|$)
    )~xs', 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-20T00:59:09.047

[Preg_replace()](http://php.net/manual/en/function.preg-replace.php)应该可以解决问题。**

# php - Symfony move_uploaded_file 到公共资源？

> ID：12984330
> 
> 赞同：1
> 
> 时间：2012-10-20T00:59:49.507
> 
> 标签：php, symfony

我正在尝试执行文件上传，并且正在生成一条路线来告诉`move_uploaded_file`将文件移动到哪里。在我的路由文件中（从包中）我有：

```
endorsement_pics:
    pattern:  /images
    defaults: { _resource: EndorseMeEndorsementBundle/Resources/public/images/endorsement_images } 
```

我这样做：

```
 $url = $this->get('router')->generate('endorsement_pics'); 
```

生成文字网址 www.example.com/endorsement/images

和功能

```
 move_uploaded_file($_FILES['endorsement_image']['tmp_name'], $url."image1.jpg"); 
```

这给了我错误：

```
 Warning: move_uploaded_file(/newsite/web/app_dev.php/endorsement/imagesimage1.jpg) [&lt;a href=&#039;function.move-uploaded-file&#039;&gt;function.move-uploaded-file&lt;/a&gt;]: failed to open stream: No such file or directory in /home/content/24/9254124/html/newsite/src/EndorseMe/EndorsementBundle/Controller/DefaultController.php line 20 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-20T17:12:54.847

您不能将文件移动到 URL — 它必须是文件系统路径。为此使用路线是错误的。

要将文件上传到`web`公用文件夹，您可以执行以下操作。首先，`parameters.yml`为上传目录路径创建一个参数：

```
parameters:
    upload_dir: %kernel.root_dir%/../web/uploads 
```

然后使用参数进行上传：

```
$uploadDir = $this->container->getParameter('upload_dir');
move_uploaded_file(
    $_FILES['endorsement_image']['tmp_name'], 
    $uploadDir . '/image1.jpg'
); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-10-10T10:34:03.917

一些细微的修改：

```
$fileName1 = $_FILES['endorsement_image']['name'];

        move_uploaded_file(
            $_FILES['image']['tmp_name'], 
            $uploadDir . $fileName1
        ); 
```

此外，Symfony 4 将不再支持此声明。您必须引用它。我发现只给出路径更容易。

```
upload_dir: %kernel.root_dir%/../web/uploads

upload_dir: /usr/home/dir/ 
```

此外，如果您对 parameters.yml 进行更改，您还必须对 parameters.yml.dist 进行更改，否则 composer 将删除该条目。

# r - 将序列中的值分配给一组连续的行，使某些行为空

> ID：12984339
> 
> 赞同：4
> 
> 时间：2012-10-20T01:00:53.273
> 
> 标签：r, conditional-statements, sequence, rows

我正在尝试对几个连续的行进行分组（并为它们分配相同的值），同时将一些行留空（当不满足某个条件时）。

我的数据是位置（xy 坐标）、测量它们的日期/时间以及测量之间的时间跨度。以某种方式简化，它们看起来像这样：

```
ID   X     Y      Time    Span
1    3445  7671   0:00    -
2    3312  7677   4:00    4
3    3309  7680   12:00   8
4    3299  7681   16:00   4
5    3243  7655   20:00   4
6    3222  7612   4:00    8
7    3260  7633   0:00    4
8    3254  7641   8:00    8
9    3230  7612   0:00    16
10   3203  7656   4:00    4
11   3202  7678   8:00    4
12   3159  7609   20:00   12
... 
```

我想为在 4 小时内测量的每个位置序列分配一个值，并使我的数据如下所示：

```
ID   X     Y      Time    Span  Sequence
1    3445  7671   0:00    -     -
2    3312  7677   4:00    4     1
3    3309  7680   12:00   8     NA
4    3299  7681   16:00   4     2
5    3243  7655   20:00   4     2
6    3222  7612   4:00    8     NA
7    3260  7633   0:00    4     3
8    3254  7641   8:00    8     NA
9    3230  7612   0:00    16    NA
10   3203  7656   4:00    4     4
11   3202  7678   8:00    4     4
12   3159  7609   20:00   12    NA 
```

我已经尝试了几种带有循环“for”加“ifelse”条件的算法，例如：

```
Sequence <- for (i in 1:max(ID)) {
ifelse (Span <= 4, i+1, "NA")
} 
```

没有任何运气。我知道我的尝试是不正确的，但我的编程技能非常基础，我在网络上没有发现任何类似的问题。

任何想法将不胜感激！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-20T01:37:26.483

这是一个较长的班轮：

```
ifelse(x <- DF$Span == 4, cumsum(c(head(x, 1), tail(x, -1) - head(x, -1) == 1)), NA)
# [1] NA  1 NA  2  2 NA  3 NA NA  4  4 NA 
```

解释：

*   `x`是 TRUE/FALSE 的向量，显示`Span`是 的位置`4`。
*   `tail(x, -1)`是一种安全的写作方式`x[2:length(x)]`
*   `head(x, -1)`是一种安全的写作方式`x[1:(length(x)-1)]`
*   `tail(x, -1) - head(x, -1) == 1`是 TRUE/FALSE 的向量，显示我们从`Span != 4`到 的位置`Span == 4`。
*   因为上面的向量比 短一个元素`x`，所以我`head(x, 1)`在它前面加了前缀。`head(x, 1)`是一种安全的书写方式`x[1]`。
*   然后我将`cumsum`它转换为向量 TRUE/FALSE 为递增整数的向量：从到它的`Span`跳转增加 1，否则保持不变。`!=4``==4`
*   一切都被包装成一个`ifelse`，所以你只能看到`x`为真的数字，即在哪里`Span == 4`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-20T06:28:01.493

`rle`这是使用and的另一种选择`rep`。我们假设你`data.frame`的名字是“test”。

首先，初始化你的“序列”列，用`NA`.

```
test$Sequence <- NA 
```

其次，指定您要匹配的条件，在本例中为`test$Span == 4`.

```
x <- test$Span == 4 
```

第三，使用`rle`'s 输出 (`lengths`和`values`) 的组合来获得序列中每次新运行出现的次数。

```
spanSeq <- rle(x)$lengths[rle(x)$values == TRUE] 
```

最后，`rep`将参数设置为在步骤 3 中获得的结果使用。根据 匹配的索引`times`对所需的值进行子集，并将其替换为新序列。`test$Sequence``test$Span == 4`

```
test$Sequence[x] <- rep(seq_along(spanSeq), times = spanSeq)
test
#    ID    X    Y  Time Span Sequence
# 1   1 3445 7671  0:00    -       NA
# 2   2 3312 7677  4:00    4        1
# 3   3 3309 7680 12:00    8       NA
# 4   4 3299 7681 16:00    4        2
# 5   5 3243 7655 20:00    4        2
# 6   6 3222 7612  4:00    8       NA
# 7   7 3260 7633  0:00    4        3
# 8   8 3254 7641  8:00    8       NA
# 9   9 3230 7612  0:00   16       NA
# 10 10 3203 7656  4:00    4        4
# 11 11 3202 7678  8:00    4        4
# 12 12 3159 7609 20:00   12       NA 
```

* * *

一旦您了解了所涉及的步骤，您也可以直接使用`within()`. 以下将为您提供相同的结果：

```
within(test, {
  Sequence <- NA
  spanSeq <- rle(Span == 4)$lengths[rle(Span == 4)$values == TRUE]
  Sequence[Span == 4] <- rep(seq_along(spanSeq), times = spanSeq)
  rm(spanSeq)
}) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-20T01:10:16.057

```
count = 0
for (i in 1:max(ID)) {
      Sequence[i] = ifelse(Span[i] <= 4, count <- count+1, NA)
} 
```

# java - Java 7 Calendar.getInstance, TimeZone.getTimeZone 同步且缓慢，有什么解决方法吗？

> ID：12984345
> 
> 赞同：3
> 
> 时间：2012-10-20T01:01:25.207
> 
> 标签：java, performance, synchronized, simpledateformat

将我的运行时升级到 Java 7 后，我看到了难以置信的缓慢……而且我的程序将所有时间都花在了`SimpleDateFormat`构造函数中。正如这里的一篇精彩文章所述：http [://coffeedriven.org/](http://coffeedriven.org/?p=83)`TimeZone` ?p=83代码现在正在检查方法中是否存在应用程序`static synchronized`上下文`getDefaultInAppContext()`。

对我来说，问题在于它是[Spring Batch](https://projects.spring.io/spring-batch/)文件阅读器代码，它为它读取的每一行创建一个`new SimpleDateFormat`对象！

有人可以解决这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T01:08:28.313

`SimpleDateFormat`一直很慢，现在我知道它甚至更慢`Java 7`。

像@MK 一样，我们也缓存它们。但请注意，它不是*线程安全*的。我们最终创建了`ThreadLocals`.

[`JodaTime`](http://joda-time.sourceforge.net/)强烈推荐，虽然我从未使用过它，我不知道它有日期格式

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-27T14:49:53.137

我们通过更改 Spring Batch 本身解决了这个问题。目前，更改位于本地副本中，但我已输入 Jira 问题并希望将我们的修复贡献回 Spring Batch 本身。

更改本身是将 SimpleDateFormat 的使用从成员变量更改为注入变量（无论如何这似乎更像 Spring）。这让我们可以控制它的生命周期。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-08-01T12:56:07.837

我很高兴地报告这已在 Java 9 中附带的[JDK-8074002](https://bugs.openjdk.java.net/browse/JDK-8074002)中得到修复。现在已降至`#clone()`.

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-10-20T06:48:35.147

Joda Time 是用于日期时间计算的最佳日期时间 API。请记住，如果您的要求需要不同的时区，您应该使用 JodaTime API。

# html - IE6/IE7输入提交框模型困境

> ID：12984354
> 
> 赞同：4
> 
> 时间：2012-10-20T01:03:11.663
> 
> 标签：html, css, internet-explorer-7, internet-explorer-6, pixel-perfect

我今天在创建一个通用按钮类来设置从 div 到输入的所有内容时遇到了一些奇怪的错误。似乎大多数浏览器在输入 [type=submit] 时使用不同的框模型。

大多数现代浏览器（ie9+、ff、chrome 等）对所有输入都使用内容框框模型，如果我没记错的话，提交除外，它使用边框框。

基本上，如果我将高度设置为 100，填充设置为 10，则除提交之外的所有输入的高度将为 120，而提交的高度为 100。

使用 box-sizing 及其浏览器前缀可以轻松解决此问题。但我的问题是 IE6/7 做同样的事情但不支持 box-sizing ...

所以现在我所有的输入都显示全高，除了提交被切成两半。除了条件注释之外，我还有哪些选项可以强制内容框或其他修复？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T20:00:55.240

IE 的旧“破”盒子模型本质上是`content-box`. 在 IE>5 中，文档需要处于 quirks 模式，IE 才能使用它。您可以通过执行以下操作之一来触发怪癖模式（[根据维基百科](http://en.wikipedia.org/wiki/Internet_Explorer_box_model_bug#Workarounds)）：

*   当文件类型声明不存在或不完整时；
*   当遇到 HTML 3 或更早的文档时
*   当使用 HTML 4.0 过渡或框架集文档类型声明且系统标识符 (URI) 不存在时
*   当 SGML 注释或其他无法识别的内容出现在文档类型声明之前
*   当文档中的任何地方出现错误时

当然，这可能会带来更多的麻烦，因为它会使*所有东西都*使用 IE 框模型 ( `content-box`)。我可以看到这很有用，但是如果您的布局不是以这种方式构建的，那么返回并更改它可能需要做太多的工作。

我做了一些搜索，没有找到任何可以在某些元素上启用旧盒子模型的东西，而不是其他元素。

在过去处理过 IE6/7 之后，如果不使用条件注释或 css hack 之类的东西，真的没有办法绕过它的错误行为。与其他浏览器相比，它的渲染引擎从根本上被破坏了。试图让它在没有任何黑客攻击的情况下表现出来只是让人头疼。

我能想到的唯一另一件事是用 span 或 div 围绕每个表单元素，并使用它们来帮助调整表单元素的大小。这也很糟糕，但它的优点是至少可以在每个浏览器中工作。

# jquery - jQuery - 为什么我不能用附加 div 改变颜色

> ID：12984355
> 
> 赞同：2
> 
> 时间：2012-10-20T01:03:29.667
> 
> 标签：jquery

为什么我不能用附加 div 编辑颜色。

单击按钮并添加新的 div 调用'block2'，如果使用 $(this)，它将不起作用。如何解决？

HTML

```
<div id="btn"><input name="click" type="button" value="Click" /></div>
<div class="block1" style=" width:100px; height:100px; background:orange;">I am Block1</div> 
```

JS

```
 $('#btn').click(function(){
        var $newDiv=$('<div class="block2" style=" width:100px; height:100px; background:green;">I am Block2</div>');
        $( "#btn").parent().append($newDiv);

    });

$('.block1').click(function(){
    $(this).css('background', 'blue');
});

$('.block2').click(function(){
    $(this).css('background', 'blue');
}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-20T01:06:31.997

**工作演示** [http://jsfiddle.net/e7Apx/](http://jsfiddle.net/e7Apx/)

请注意，您正在附加元素，因此使用 API`.on`类`.block2`： `$(document).on('click','.block2',function() { ... });`

API：`.on` *文档*-> [http://api.jquery.com/on/](http://api.jquery.com/on/)

希望它适合原因`:)`

**代码**

```
$(function() {
    $('#btn').click(function() {
        var $newDiv = $('<div class="block2" style=" width:100px; height:100px; background:green;">I am Block2</div>');
        $("#btn").parent().append($newDiv);

    });

    $('.block1').click(function() {
        $(this).css('background', 'blue');
    });

    $(document).on('click','.block2',function() {
        $(this).css('background', 'blue');
    });
});​ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-20T01:08:33.177

它似乎在这里工作..

[检查小提琴](http://jsfiddle.net/sushanth009/fTs4E/1/)

对于 block2，您需要**委托**事件，因为它是动态添加的。

```
$('body').on('click','.block2' ,function() {
    $(this).css('background', 'blue');
});​ 
```

**JS**

```
$('#btn').click(function() {
    var $newDiv = $('<div class="block2" style=" width:100px; height:100px; background:green;">I am Block2</div>');
    $("#btn").parent().append($newDiv);

});

$('.block1').click(function() {
    $(this).css('background', 'blue');
});

$('body').on('click','.block2' ,function() {
    $(this).css('background', 'blue');
});​ 
```

# ruby-on-rails - jquery-ui-rails gem 不适用于预先存在的项目

> ID：12984356
> 
> 赞同：1
> 
> 时间：2012-10-20T01:04:01.253
> 
> 标签：ruby-on-rails, jquery-ui, gem, slider, ruby-on-rails-3.2

我正在使用 jquery-ui-rails gem 来创建一个滑块，但是由于某些奇怪的原因，它不适用于预先存在的项目。如果我创建一个新项目（rails 新博客），生成一个用户脚手架，然后添加 gmaps4rails gem，然后 jquery-ui-rails gem 地图和滑块工作并且看起来很好。但是，如果我打开一个较旧的项目，按照完全相同的步骤（添加相同的列等），地图会显示得很好，但滑块不会出现。有谁知道这是为什么/如何解决它？

这是我的 gemfile，以防有任何导致冲突的 gem

```
source 'http://rubygems.org'

gem 'rails', '3.2.8'
gem 'mysql2'

# Gems used only for assets and not required
# in production environments by default.
group :assets do
  gem 'sass-rails',   '~> 3.2.3'
  gem 'coffee-rails', '~> 3.2.1'
  gem 'uglifier', '>= 1.0.3'
  gem 'jquery-ui-rails'
end

gem 'jquery-rails'
gem 'gmaps4rails'
gem 'bcrypt-ruby', :require => "bcrypt"
gem 'mail' 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-20T13:43:55.420

发现问题，添加 jquery-rails-ui gem 后，您需要在命令行中运行 bundle exec rake assets:precompile 才能工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-20T01:17:31.560

可能是您*仅*在资产组中包含 jquery-ui-rails。资产组中的 gem 仅在资产管道操作期间使用。

将 jquery-ui-rails 移出资产组，运行“捆绑安装”，看看它是否有效。

# javascript - 具有多个图像和 getElementById 的 JavaScript SwapImage

> ID：12984361
> 
> 赞同：1
> 
> 时间：2012-10-20T01:04:45.587
> 
> 标签：javascript, html, mouseover, getelementbyid

我想`swapImage`在我的网站上实现一个可以交换一个图像`mouseover`和另一个图像`mouseout`。本质上，通过我发现的解决方案，我也可以交换不同的图像`mousedown`，`mouseup`甚至。

我在 8 个不同的嵌套选项卡中发生了这种情况，所有这些都在同一页面上。

javascript看起来像这样：

```
<script type="text/javascript">
    function swapImageFiat(imgID, imgSrc) {
        var theImage = document.getElementById(imgID)
        theImage.src = imgSrc;
    }

    function swapImageHarley(imgID, imgSrc) {
        var theImage = document.getElementById(imgID)
        theImage.src = imgSrc;
    }

    function swapImageHotWheels(imgID, imgSrc) {
        var theImage = document.getElementById(imgID)
        theImage.src = imgSrc;
    }

    function swapImageVoltron(imgID, imgSrc) {
        var theImage = document.getElementById(imgID)
        theImage.src = imgSrc;
    }

    function swapImageBenchmade(imgID, imgSrc) {
        var theImage = document.getElementById(imgID)
        theImage.src = imgSrc;
    }

    function swapImageCrew(imgID, imgSrc) {
        var theImage = document.getElementById(imgID)
        theImage.src = imgSrc;
    }

    function swapImageReuters(imgID, imgSrc) {
        var theImage = document.getElementById(imgID)
        theImage.src = imgSrc;
    }

    function swapImageMarsVolta(imgID, imgSrc) {
        var theImage = document.getElementById(imgID)
        theImage.src = imgSrc;
    }

    function preLoadImages() {
        for(var i = 0; i < arguments.length; i++) {
            var theImage = new Image();
            theImage.src = arguments[i];
        }
    }
</script> 
```

**每个**图像的内联代码基本上是这样的：

```
<img class="diagram" src="img/fiat.gif" id="imgToSwapFiat" alt="Diagram" data-title="Fiat Diagram" onClick="swapImageFiat('imgToSwapFiat', 'img/fiat-animated.gif')" onmouseout="swapImageFiat('imgToSwapFiat', 'fiat.gif')" height="189" width="358" /> 
```

我希望能够使用**更少的 ID**、更少的相同重复脚本和更短的内联代码。
但我也希望能够灵活地*更改*图像及其 ID，而不是使用 JQuery 或其他脚本大惊小怪。这就是我使用`getElementById`.

> 有没有更***有效***的方法来编写 JavaScript 和/或内联代码？

还

> 动画**停止播放**后，有没有办法让图像**切换回原始**图像，而不是鼠标移出？

 *** * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-20T03:57:18.410

使用`this`而不是元素 ID，因为您的函数最终需要实际的元素对象。

脚本示例：

```
function swapImageFiat(imgEle, imgSrc) {
    imgEle.src = imgSrc;
} 
```

图片 HTML 示例：

```
<img src="initial.jpg" onclick="swapImageFiat(this, 'clicked.jpg')" onmouseover="swapImageFiat(this, 'hovered.jpg')" onmouseout="swapImageFiat(this, 'left.jpg')" /> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-20T06:51:49.293

是的，当然有。正如 Jan 提到的 - 你所有的功能都是相同的。没有必要全部复制它们。此外，您可以从 html 中删除内联事件处理程序代码，只需附加 mouseover/mouseout 或 mousedown/mouseup。

只需为您希望对其产生影响的每个图像添加一个新属性，然后在页面加载时运行一些 js 以附加处理程序。

在这里，我刚刚使用（并检查了是否存在）自定义属性。如果图像有它们，我会附加处理程序。如果不是，它与任何其他正常图像没有什么不同。这应该是一个很好的可重复使用且使用起来很少的努力。

至于播放动画 gif 后重置图像，我可能会看看 Jan 的第一个建议。对这个想法稍作修改是使最后一帧透明，然后简单地将动画图像放置在静态图像上（z-index 更高）。完成后，您将再次看到原始图像。如果需要重新播放这些图像，您必须决定刷新这些图像的系统。我不确定，也许将它们的 src 设置为 ''，然后再将其设置回 animated.gif 会导致动画再次从头开始播放 - 你必须检查是否决定尝试这种方法。

```
<!DOCTYPE html>
<html>
<head>
<script>
function byId(e){return document.getElementById(e);}

function mInit()
{
    var imgList = document.getElementsByTagName('img');
    var i, n = imgList.length;
    for (i=0; i<n; i++)
    {
        if (imgList[i].hasAttribute('img2'))
            imgList[i].addEventListener('click', imgClick, false);
        if (imgList[i].hasAttribute('img3'))
            imgList[i].addEventListener('mouseover', imgHover, false);
        if (imgList[i].hasAttribute('img4'))
            imgList[i].addEventListener('mouseout', imgOut, false);
    }
}

// because these function are attached with addEventListener, the 'this'
// keyword refers to the image element itself. No need for IDs..
function imgClick()
{
    this.src = this.getAttribute('img2');
}
function imgHover()
{
    this.src = this.getAttribute('img3');
}
function imgOut()
{
    this.src = this.getAttribute('img4');
}

window.addEventListener('load', mInit, false);

</script>
<style>
</style>
</head>
<body>
    <img src='img/gladiators.png'>  <!-- this image won't be touched, as it doesn't have img1, img2 or img3 attributes -->
    <img src='img/opera.svg' img2='img/chromeEyes.svg' img3='img/rss16.png' img4='img/girl2.png'/>
</body>
</html> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-20T04:10:25.953

Jay 对你的函数有一个很好的建议，它们都做同样的事情。如果您从函数中删除名称，您会发现它们在其他方面是相同的。函数名根本没有区别，在这种情况下，重要的是传递给函数的参数。

> 动画停止播放后，有没有办法让图像切换回原始图像，而不是鼠标移出？

您可以使 gif 不循环，并使动画的最后一帧与原始图像相同。AFAIK 无法通过 Javascript 检测动画 gif 所在的帧。

如果您真的希望它返回原始图像，您可以通过 Javascript 完全为图像设置动画：编写一个预加载所有图像（或 spritemap）的函数，然后逐帧加载它们。**

# javascript - Jquery Random Slider 不显示 json 数组中的所有图像

> ID：12984364
> 
> 赞同：2
> 
> 时间：2012-10-20T01:04:59.097
> 
> 标签：javascript, jquery

我正在编写我的第一个 jquery 代码，并且我必须编写一个随机滑块，该滑块将通过 php 函数获取图像，并将按顺序显示它们并带有一些装饰。随机的事情是在 php 中完成的。我的jquery如下。

```
function bannerSlide(){
     $.ajax({
    type: "GET",
    url: "test.php",
    dataType: 'json',
    success: function(images) {
      $.each(images, function (index, value) {
        $('#banner').slideUp(500).delay(2000).fadeIn(500).css('background', 'url(ItemPictures/'+value+')');
    });

    }
  });
} 
```

我得到`images`数组中的图像并循环遍历它。我面临的问题是我的这段代码只显示数组中的最后一个图像。其他图像未显示，它一直在滑动数组的最后一个图像。但是，如果我`alert`在函数中添加一个语句，`$.each`那么在我单击警报框的 ok 后图像会发生变化，并且它会继续。

任何帮助将不胜感激。
请不要建议使用一些已经构建的滑块。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-20T12:17:09.717

循环将`each`在微秒内运行，并在每次通过代码时立即设置 css 值。因此你只能看到最后一张图片

这是在第一个动画的回调中使用`setTimeout`和更改 css 的解决方案，因此 css 仅在适当的时间更改。您可能需要调整超时间隔`index*3000`

```
$.each(images, function(index, value) {
    setTimeout(function() {
        $('#banner').slideUp(500, function() {
            /* use callback of animation to change element properties */
            $(this).delay(2000).fadeIn(500).css('background', 'url(ItemPictures/'+value+')');
        })
    }, index * 3000);
}); 
```

使用元素的文本更改的演示 [http://jsfiddle.net/RrPu6/](http://jsfiddle.net/RrPu6/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-20T12:18:27.230

以下代码是已发布问题的解决方案。

```
function bannerSlide(){
  $.ajax({
    type: "GET",
    url: "test.php",
    dataType: 'json',
    success: function(imgs) {
      var cnt = imgs.length;
        $(function() {
            setInterval(Slider, 3000);
        });
        function Slider() {
        $('#imageSlide').fadeOut("slow", function() {
           $(this).attr('src', 'ItemPictures/'+imgs[(imgs.length++) % cnt]).fadeIn("slow");
        });
        }
    }
  });
} 
```

`imageSlide`'banner' 'div' 内的 img 标签的 id 在哪里

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-20T01:37:25.350

问题是您正在迭代图像数组，并且为每个图像设置相同 DOM 元素的背景`$('#banner')`...。这将发生得如此之快，以至于您只能在迭代结束时看到最后一张图像。这也是为什么你可以看到它`alert()`在中间发生变化的原因，因为执行在`alert()`.

你必须想办法延迟背景的变化。您可以尝试的一件事是在`slideUp()`. 就像是：

```
function bannerSlide(){
  $.ajax({
    type: "GET",
    url: "test.php",
    dataType: 'json',
    success: function(images) {
      var duration = 2000;
      var element = $('#banner');
      $.each(images, function (index, value) {
        element.delay(index * duration).slideUp(500).delay(duration).fadeIn(500).css('background', 'url(ItemPictures/'+value+')');
        initialDelay += duration;
    });

    }
  });
} 
```

这是一个丑陋的黑客，但这就是那些已经构建的滑块存在的原因:)

# java - Jslider，没有出现在我的框架上

> ID：12984365
> 
> 赞同：3
> 
> 时间：2012-10-20T01:05:22.310
> 
> 标签：java, swing, jframe, layout-manager, jslider

> 一旦我运行我的java项目，我试图让我的滑块出现在我的gui上，这是我拥有的，任何帮助都会很好:)
> 
> 所以菜单栏出现了，菜单形状出现了，3个形状也出现了，我只是不能>让滑块出现在框的底部

* * *

课堂作业

* * *

```
package assignment;

public class Assignment {

public static void main(String[] args) {

MyFrame pane = new MyFrame();  

pane.setVisible(true);
pane.setSize(400,400); 
```

* * *

类 MyFrame

* * *

```
package assignment;

import javax.swing.JMenu;
import javax.swing.JMenuBar;
import javax.swing.JMenuItem;

public class MyFrame extends javax.swing.JFrame {

/**
 * Creates new form MyFrame
 */
public MyFrame() {
initComponents();

// Create the menu
JMenuBar topMenu = new JMenuBar();
this.setJMenuBar(topMenu);

//create the menu button "shapes"
JMenu shapes = new JMenu("Shapes");
topMenu.add(shapes);
//Create the 3 shapes for the menu
JMenuItem square = new JMenuItem("Square");
JMenuItem circle = new JMenuItem("Circle");        
JMenuItem triangle = new JMenuItem("Triangle");

//add shapes to menu
shapes.add(circle);
shapes.add(triangle);
shapes.add(square);

//add the menu
setJMenuBar(topMenu);

MyControlPanel pane = new MyControlPanel();
this.add(pane);

}

/**
 * This method is called from within the constructor to initialize the form.
 * WARNING: Do NOT modify this code. The content of this method is always
 * regenerated by the Form Editor.
 */
@SuppressWarnings("unchecked")
// <editor-fold defaultstate="collapsed" desc="Generated Code">
private void initComponents() {

    setDefaultCloseOperation(javax.swing.WindowConstants.EXIT_ON_CLOSE);

    javax.swing.GroupLayout layout = new javax.swing.GroupLayout(getContentPane());
    getContentPane().setLayout(layout);
    layout.setHorizontalGroup(
        layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
        .addGap(0, 400, Short.MAX_VALUE)
    );
    layout.setVerticalGroup(
        layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
        .addGap(0, 300, Short.MAX_VALUE)
    );

    pack();
}// </editor-fold>

/**
 * @param args the command line arguments
 */
public static void main(String args[]) {
    /* Set the Nimbus look and feel */
    //<editor-fold defaultstate="collapsed" desc=" Look and feel setting code (optional) ">
    /* If Nimbus (introduced in Java SE 6) is not available, stay with the default look and feel.

    try {
        for (javax.swing.UIManager.LookAndFeelInfo info :          javax.swing.UIManager.getInstalledLookAndFeels()) {
            if ("Nimbus".equals(info.getName())) {
                javax.swing.UIManager.setLookAndFeel(info.getClassName());
                break;
            }
        }
    } catch (ClassNotFoundException ex) {
        java.util.logging.Logger.getLogger(MyFrame.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
    } catch (InstantiationException ex) {
        java.util.logging.Logger.getLogger(MyFrame.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
    } catch (IllegalAccessException ex) {
        java.util.logging.Logger.getLogger(MyFrame.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
    } catch (javax.swing.UnsupportedLookAndFeelException ex) {
        java.util.logging.Logger.getLogger(MyFrame.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
    }
    //</editor-fold>

    /* Create and display the form */
    java.awt.EventQueue.invokeLater(new Runnable() {
        @Override
        public void run() {
        new MyFrame().setVisible(true);
        }
    });

}
// Variables declaration - do not modify
// End of variables declaration 
```

}

* * *

类 MyControlPanel

* * *

```
package assignment;

import javax.swing.JSlider;
import javax.swing.JTextField;

public class MyControlPanel extends javax.swing.JPanel {

/**
 * Creates new form MyControlPanel
 */
public MyControlPanel() {
initComponents();

JSlider slider = new JSlider();
slider.setMajorTickSpacing(10); 
slider.setPaintLabels(true); 
slider.setPaintTicks(true); 

JTextField boundary_length = new JTextField("Boundary Length");
JTextField area = new JTextField("Area");

this.add(slider);
this.add(area);
this.add(boundary_length);

}

/**
 * This method is called from within the constructor to initialize the form.
 * WARNING: Do NOT modify this code. The content of this method is always
 * regenerated by the Form Editor.
 */
@SuppressWarnings("unchecked")
// <editor-fold defaultstate="collapsed" desc="Generated Code">
private void initComponents() {

    javax.swing.GroupLayout layout = new javax.swing.GroupLayout(this);
    this.setLayout(layout);
    layout.setHorizontalGroup(
        layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
        .addGap(0, 400, Short.MAX_VALUE)
    );
    layout.setVerticalGroup(
        layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
        .addGap(0, 300, Short.MAX_VALUE)
    );
}// </editor-fold>
// Variables declaration - do not modify
// End of variables declaration 
```

}

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-20T01:37:28.967

你缺少的是对`GroupLayout`

如果我这样做

```
public MyControlPanel() {
    initComponents();

    JSlider slider = new JSlider();
    slider.setMajorTickSpacing(10);
    slider.setPaintLabels(true);
    slider.setPaintTicks(true);

    JTextField boundary_length = new JTextField("Boundary Length");
    JTextField area = new JTextField("Area");

    setLayout(new FlowLayout());

    this.add(slider);
    this.add(area);
    this.add(boundary_length);

} 
```

我明白这个...

![在此处输入图像描述](../Images/f142c1216ddb870ec32178f84c97bb44.png)

我所做的只是将布局管理器更改为`FlowLayout`. 没有冒犯，但`GroupLayout`不应该像真正应该与表单编辑器一起使用那样手动创建。

# apache-pig - 如何在没有 Amazon GUI 的情况下在 Elastic MapReduce 上自动运行 Pig Batch 作业？

> ID：12984369
> 
> 赞同：2
> 
> 时间：2012-10-20T01:05:38.800
> 
> 标签：apache-pig, elastic-map-reduce

我在 .pig 文件中有一些猪批处理作业，我希望每隔一小时左右在 EMR 上自动运行一次。[我在这里](http://aws.amazon.com/articles/Elastic-MapReduce/2729)找到了一个这样做的教程，但这需要为我设置的每项工作使用亚马逊的 GUI，我真的宁愿避免。有没有使用 Whirr 的好方法？还是 Ruby Elastic-mapreduce 客户端？我的所有文件都在 s3 中，还有几个带有我需要使用的功能的猪罐子。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2016-06-06T10:49:29.433

虽然我不知道如何使用您提到的工具运行 pig 脚本，但我知道两种可能的方法：

1.  在本地运行文件：您可以使用 cron
2.  在集群上运行文件：可以使用 OOZIE

话虽如此，大多数带有 GUI 的工具也可以通过命令行进行控制。（虽然如果您有可用的 GUI，设置可能会更容易）。

# c++ - 将结构数组传递给 pthread_create

> ID：12984371
> 
> 赞同：0
> 
> 时间：2012-10-20T01:05:58.177
> 
> 标签：c++, arrays, pointers, struct, pthreads

所以我有一个结构如下：

```
struct threadData{
    string filename
    int one;
    int two;
}; 
```

我创建了一个这样的结构数组：

```
pthread_t threadID[5];
struct threadData *threadP;
threadP = new struct threadData[5]; 
```

然后我将这个结构数组传递给一个线程函数，如下所示：

```
for(int i = 0; i < 5; i++){
    pthread_create(&threadID[i], NULL, threadFunction, (void * ) threadP[i]);
} 
```

这就是我的 threadFunction 的编写方式：

```
void *threadFunction(void * threadP[]){

} 
```

我尝试了各种方法，但总是收到我传入的内容不正确的错误，我该如何正确执行此操作，以便我可以访问和处理我传入的每个结构对象中的变量？我有一种感觉，由于我使用了结构数组，我的语法在某处是错误的……我只是不知道哪里或哪里出了问题。任何帮助，将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T02:31:24.203

```
void *threadFunction(void * threadP[]){ 
```

在 C++ 中，函数不能有数组类型的参数，而参数必须是指针，用作函数参数的数组衰减为指向第一个元素的指针，因此声明等价于：

```
void *threadFunction(void ** threadP){ 
```

这显然不是传递给的正确类型`pthread_create`

您需要使用此签名传递一个函数：

```
void *threadFunction(void * threadP) 
```

# php - 在 SQL 中使用带有 SELECT AS 语法的数组和循环

> ID：12984372
> 
> 赞同：0
> 
> 时间：2012-10-20T01:06:14.397
> 
> 标签：php, mysql, sql

我正在从 MySQL 数据库生成 HTML 表格，以便存储的数据可以显示在网页上，并最终以电子表格的形式下载。

我有大量的 SQL 标题（可能是错误的名称），也就是说任何给定列的“标题”。

我正在使用 SELECT 通过 PDO 从 MySQL 获取数据：

```
 $sql ="
             SELECT     
            `sv_20`  AS `Name`,
            `sv_21`  AS `Age`,
            `sv_22`  AS `Height`,
            `sv_23`  AS `Weight`,
            ...
            ...
            `sv_999`  AS `Something`

        FROM 
            database.table"; 
```

在 PHP 中，我将定义两个数组（数据库标题和我希望它们拥有的标题），然后编写一个 foreach 循环说：

```
 foreach(array_combine($headers, $titles) as $header => $title)
 {
 echo "`$header`  AS `$title`,";
 } 
```

哪个会给我完整的调用集，在查询数据库时有没有办法在 SQL 中执行此操作？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T01:10:43.893

这是基本的字符串操作，而不是`echo`，您想将其附加到字符串中`$sql .=`

最后一项之后的额外逗号会有一些问题，最好是

```
$sql = array();
foreach(....)
    $sql[] = "`$header`  AS `$title`"; 
```

然后做一个`join(',', $sql);`

# javascript - 如何确定您是否已滚动到元素的底部？

> ID：12984379
> 
> 赞同：0
> 
> 时间：2012-10-20T01:08:49.870
> 
> 标签：javascript, jquery, scroll

您将如何确定是否已到达元素的底部？例如，您有一个高度为 2000 像素的 div，那么视口只有 600 像素高。有了这些，如果它已经是 2000px div 的底部，你怎么知道需要多少滚动值？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-20T01:14:25.873

你可以使用这样的东西：

```
var $element = $('div');

$(window).scroll(function() {
    var scroll = $(window).scrollTop() + $(window).height();
    var offset = $element.offset().top + $element.height();

    if (scroll > offset) {
        $element.css('background', 'blue');
    } else {
        $element.css('background', 'red');
    }
}); 
```

**演示：http: [//jsfiddle.net/eNjEs/5/](http://jsfiddle.net/eNjEs/5/)**

# java - 在 WebApplicationInitializer 中加载 ApplicationContexts 的层次结构

> ID：12984380
> 
> 赞同：2
> 
> 时间：2012-10-20T01:08:55.120
> 
> 标签：java, spring, spring-mvc, servlet-3.0

我正在使用 Servlet 3 (Tomcat 7) + Spring 3.1，并尝试使用 WebApplicationInitializer 加载我的 webapp。

在我见过的常见示例中，您有一个 Root ApplicationContext，加载了 ContextLoaderListener，还有一个 servlet ApplicationContext，加载了 DispatcherServlet。

（要清楚，我不是在谈论 web.xml，而是在 WebApplicationInitializer 内部以编程方式谈论）。

现在，我想要一个 ApplicationContexts 的层次结构，让我们说：

根 -> AppContext1 -> AppContext2 -> ServletAppContext

**->**表示父 -> 子关系。每个 AppContext 都可以访问自己的 bean 和其祖先的 bean。

例如：

*   Root 定义属性、DAO 和 TX。
*   AppContext1 定义了 JPA 和 Spring Data 存储库。
*   AppContext2 定义了 JMS 和 Spring 集成管道。
*   ServletAppContext 定义控制器和视图。

我的第一种方法是将Root ApplicationContext 添加到ContextLoaderListener，然后将其设置为AppContext1 的父级。将 AppContext1 设置为 AppContext2 的父级。将 AppContext2 设置为 ServletAppContext 的父级。最后将 ServletAppContext 与 DispatcherServlet 关联起来。

问题是，在关闭时，DispatcherServlet 会关闭 ServletAppContext，但它不会传播。AppContext1 和 AppContext2 永远不会关闭，它们的 bean 永远不会被释放。所以我猜我使用了错误的方法。

我尝试将 AppContext2 关联到 ContextLoaderListener 而不是 Root。在这种情况下，AppContext2 关闭，但 AppContext1 和 Root 保持打开状态。

我也不能有 3 个 ContextLoaderListener，我的每个 AppContexts（根、1、2）各有 1 个。

我的问题是，这种情况的正确方法是什么？我愿意接受建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T02:52:51.637

不关闭父上下文的默认行为是因为单个父上下文可以由多个子上下文共享。在这种情况下，只有在所有子上下文都关闭后才能关闭父上下文。

如果它是线性关系（即，每个上下文只有一个子级），那么您可以使用扩展的 ApplicationContext 实现，其 close 方法也调用父级 close。

如果它不是线性关系 - 那么您可以实现引用计数机制来跟踪那里有多少活动子上下文，当它达到 0 时关闭上下文。

在做任何这些之前，你应该强烈地重新考虑有这么多上下文的原因。最好只创建两个上下文并使用导入来连接配置文件。对我来说，我看起来像是过度工程。我想不出一个很好的用例来做这样的事情，我很想听听你为什么这样做。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T14:13:20.460

所以，显然我正在尝试做一些 Spring（至少到 3.1 版）不准备做的事情。

# java - Java中的DOM解析器，属性和标签值

> ID：12984381
> 
> 赞同：0
> 
> 时间：2012-10-20T01:09:04.043
> 
> 标签：java, parsing, dom

```
 <SimpleData name="RATE">$1.00</SimpleData>
            <SimpleData name="LIMIT">2hr</SimpleData> 
```

在那段 XML 上，我如何访问每个单独的标记值？到目前为止，我有这个：

```
if(eElement.getAttribute("name").equals("RATE"))
  System.out.println("Rate : " + getTagValue("SimpleData", eElement)); 
```

它检查属性“名称”并进行比较，但我无法获得 LIMIT 值。我认为我的问题出在我的 getTagValue 方法中：

```
 private static String getTagValue(String sTag, Element eElement) {
    NodeList nlList = eElement.getElementsByTagName(sTag).item(0).getChildNodes();

        Node nValue = (Node) nlList.item(0);

    return nValue.getNodeValue();
  } 
```

有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-20T01:14:28.687

你有

```
if(eElement.getAttribute("name").equals("RATE")) {
   System.out.println("Rate : " + getTagValue("SimpleData", eElement));
} 
```

有什么问题：

```
else if(eElement.getAttribute("name").equals("LIMIT")) {
   System.out.println("Limit : " + getTagValue("SimpleData", eElement));
} 
```

# php - 如何将作者信息添加到 Mongo 的文档中？

> ID：12984384
> 
> 赞同：0
> 
> 时间：2012-10-20T01:09:37.967
> 
> 标签：php, mongodb, mongodb-php

```
{
    _id: ObjectId(...),
    discussion_id: ObjectId(...),
    slug: '34db',
    posted: ISODateTime(...),
    author: {
              id: ObjectId(...),
              name: 'Rick'
             },
    text: 'This is so bogus ... '
} 
```

这是我到目前为止所做的：

```
class Discussion
{

   /**
    * @MongoDB\Id
    */
        protected $id;

    /**
     * @MongoDB\ObjectId
     */
    protected $discussion_id;

   /**
     * @MongoDB\String
     */
    protected $slug;

    /**
     * @MongoDB\String    <---------- IS THIS THE RIGHT DATA TYPE?
     */
    protected $author;

     /**
     * @MongoDB\String
     */
    protected $text;

    /**
     * @MongoDB\Date
     */
    protected $createdAt;

} 
```

所以在我的代码中：

```
 $author_info = array(
            "userName" => $userName
            );

        $discussion = new Discussion();
        $discussion->setCreatedAt(new \DateTime());
        $discussion->setAuthor($author_info);
        $discussion->setText($listingInquiry); 
```

我的问题是我做得对吗？我有一种感觉，作者类型需要是别的东西。请建议。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T01:33:13.150

如果你想要`ObjectId`在你的作者中，那将是一个嵌入式文档（或者你可以使用 a `@MongoDB\Hash`）。

对于嵌入式文档：

```
/**
 * @MongoDB\EmbeddedDocument
 */
class Author
{
   /**
    * @MongoDB\ObjectId
    */
   protected $id;

   /**
    * @MongoDB\String
    */
    protected $name;
} 
```

在您的主文档中

```
/**
 * @MongoDB\EmbedOne(targetDocument="[Namespace]\Author")
 */
 protected $author; 
```

在您的代码中：

```
$author = new Author();
$author->setId( new \MongoId( $userId ) );
$author->setName( "Mark" );

$discussion->setAuthor( $author); 
```

# eclipse - JBoss AS 7 中的 FileNotFoundException

> ID：12984385
> 
> 赞同：4
> 
> 时间：2012-10-20T01:09:58.443
> 
> 标签：eclipse, maven, jboss7.x, filenotfoundexception

我在 Eclipse 4.2.1（构建 20121004-1855）中设置了一个 Maven 项目。该项目（除其他外）在 pom.xml 中配置了两个必要的依赖项，它们是：

```
<dependency>
  <groupId>com.google.apis</groupId>
  <artifactId>google-api-services-calendar</artifactId>
  <version>v3-rev16-1.8.0-beta</version>
</dependency>

<dependency>
  <groupId>com.google.http-client</groupId>
  <artifactId>google-http-client-jackson2</artifactId>
  <version>1.11.0-beta</version>
</dependency> 
```

第一个库允许我连接谷歌日历服务并与之交互。第二个库使我能够处理 JSON。

问题是当我尝试在 JBoss AS 7 中部署项目时，我收到以下错误：

```
17:31:09,754 INFO  [org.jboss.as] (Controller Boot Thread) JBAS015874: JBoss AS 7.1.1.Final "Brontes" started in 8392ms - Started 178 of 255 services (76 services are passive or on-demand)
17:43:12,193 INFO  [org.jboss.as.repository] (management-handler-thread - 5) JBAS014900: Content added at location /usr/local/jboss-as-7.1.1.Final/standalone/data/content/c6/3443036ca32a120acc8adf87de993f18a60175/content
17:43:12,204 INFO  [org.jboss.as.server.deployment] (MSC service thread 1-4) JBAS015876: Starting deployment of "eventes.war"
17:43:14,046 WARN  [org.jboss.as.server.deployment] (MSC service thread 1-3) Class Path entry httpclient-4.0.3.jar in "/content/eventes.war/WEB-INF/lib/google-oauth-client-1.11.0-beta.jar"  does not point to a valid jar for a Class-Path reference.
17:43:14,047 WARN  [org.jboss.as.server.deployment] (MSC service thread 1-3) Class Path entry httpcore-4.0.1.jar in "/content/eventes.war/WEB-INF/lib/google-oauth-client-1.11.0-beta.jar"  does not point to a valid jar for a Class-Path reference.
17:43:14,048 WARN  [org.jboss.as.server.deployment] (MSC service thread 1-3) Class Path entry httpclient-4.0.3.jar in "/content/eventes.war/WEB-INF/lib/google-http-client-1.11.0-beta.jar"  does not point to a valid jar for a Class-Path reference.
17:43:14,049 WARN  [org.jboss.as.server.deployment] (MSC service thread 1-3) Class Path entry httpcore-4.0.1.jar in "/content/eventes.war/WEB-INF/lib/google-http-client-1.11.0-beta.jar"  does not point to a valid jar for a Class-Path reference.
17:43:14,051 WARN  [org.jboss.as.server.deployment] (MSC service thread 1-3) Class Path entry httpclient-4.0.3.jar in "/content/eventes.war/WEB-INF/lib/google-http-client-jackson2-1.11.0-beta.jar"  does not point to a valid jar for a Class-Path reference.
17:43:14,053 WARN  [org.jboss.as.server.deployment] (MSC service thread 1-3) Class Path entry httpcore-4.0.1.jar in "/content/eventes.war/WEB-INF/lib/google-http-client-jackson2-1.11.0-beta.jar"  does not point to a valid jar for a Class-Path reference.
17:43:14,054 WARN  [org.jboss.as.server.deployment] (MSC service thread 1-3) Class Path entry commons-codec-1.6.jar in "/content/eventes.war/WEB-INF/lib/google-http-client-jackson2-1.11.0-beta.jar"  does not point to a valid jar for a Class-Path reference.
17:43:14,057 WARN  [org.jboss.as.server.deployment] (MSC service thread 1-3) Class Path entry httpclient-4.0.3.jar in "/content/eventes.war/WEB-INF/lib/google-api-client-1.11.0-beta.jar"  does not point to a valid jar for a Class-Path reference.
17:43:14,058 WARN  [org.jboss.as.server.deployment] (MSC service thread 1-3) Class Path entry httpcore-4.0.1.jar in "/content/eventes.war/WEB-INF/lib/google-api-client-1.11.0-beta.jar"  does not point to a valid jar for a Class-Path reference.
17:43:14,059 WARN  [org.jboss.as.server.deployment] (MSC service thread 1-3) Class Path entry jaxb-api.jar in "/content/eventes.war/WEB-INF/lib/jaxb-impl-2.2.4.jar"  does not point to a valid jar for a Class-Path reference.
17:43:14,060 WARN  [org.jboss.as.server.deployment] (MSC service thread 1-3) Class Path entry activation.jar in "/content/eventes.war/WEB-INF/lib/jaxb-impl-2.2.4.jar"  does not point to a valid jar for a Class-Path reference.
17:43:14,061 WARN  [org.jboss.as.server.deployment] (MSC service thread 1-3) Class Path entry jsr173_1.0_api.jar in "/content/eventes.war/WEB-INF/lib/jaxb-impl-2.2.4.jar"  does not point to a valid jar for a Class-Path reference.
17:43:14,061 WARN  [org.jboss.as.server.deployment] (MSC service thread 1-3) Class Path entry jaxb1-impl.jar in "/content/eventes.war/WEB-INF/lib/jaxb-impl-2.2.4.jar"  does not point to a valid jar for a Class-Path reference.
17:43:14,099 ERROR [org.jboss.msc.service.fail] (MSC service thread 1-2) MSC00001: Failed to start service jboss.module.spec.service."deployment.external./home/codegen/dependencies/java/stable/dependencies/libs/google-api-client-1.11.0-beta.jar".main: org.jboss.msc.service.StartException in service jboss.module.spec.service."deployment.external./home/codegen/dependencies/java/stable/dependencies/libs/google-api-client-1.11.0-beta.jar".main: java.io.FileNotFoundException: /home/codegen/dependencies/java/stable/dependencies/libs/google-api-client-1.11.0-beta.jar (No such file or directory)
    at org.jboss.as.server.moduleservice.ExternalModuleSpecService.start(ExternalModuleSpecService.java:65) [jboss-as-server-7.1.1.Final.jar:7.1.1.Final]
    at org.jboss.msc.service.ServiceControllerImpl$StartTask.startService(ServiceControllerImpl.java:1811) [jboss-msc-1.0.2.GA.jar:1.0.2.GA]
    at org.jboss.msc.service.ServiceControllerImpl$StartTask.run(ServiceControllerImpl.java:1746) [jboss-msc-1.0.2.GA.jar:1.0.2.GA]
    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110) [rt.jar:1.7.0_07]
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603) [rt.jar:1.7.0_07]
    at java.lang.Thread.run(Thread.java:722) [rt.jar:1.7.0_07]
Caused by: java.io.FileNotFoundException: /home/codegen/dependencies/java/stable/dependencies/libs/google-api-client-1.11.0-beta.jar (No such file or directory)
    at java.util.zip.ZipFile.open(Native Method) [rt.jar:1.7.0_07]
    at java.util.zip.ZipFile.<init>(ZipFile.java:214) [rt.jar:1.7.0_07]
    at java.util.zip.ZipFile.<init>(ZipFile.java:144) [rt.jar:1.7.0_07]
    at java.util.jar.JarFile.<init>(JarFile.java:152) [rt.jar:1.7.0_07]
    at java.util.jar.JarFile.<init>(JarFile.java:116) [rt.jar:1.7.0_07]
    at org.jboss.as.server.moduleservice.ExternalModuleSpecService.start(ExternalModuleSpecService.java:63) [jboss-as-server-7.1.1.Final.jar:7.1.1.Final]
    ... 5 more

17:43:14,097 ERROR [org.jboss.msc.service.fail] (MSC service thread 1-4) MSC00001: Failed to start service jboss.module.spec.service."deployment.external./home/codegen/dependencies/java/stable/dependencies/libs/guava-11.0.1.jar".main: org.jboss.msc.service.StartException in service jboss.module.spec.service."deployment.external./home/codegen/dependencies/java/stable/dependencies/libs/guava-11.0.1.jar".main: java.io.FileNotFoundException: /home/codegen/dependencies/java/stable/dependencies/libs/guava-11.0.1.jar (No such file or directory)
    at org.jboss.as.server.moduleservice.ExternalModuleSpecService.start(ExternalModuleSpecService.java:65) [jboss-as-server-7.1.1.Final.jar:7.1.1.Final]
    at org.jboss.msc.service.ServiceControllerImpl$StartTask.startService(ServiceControllerImpl.java:1811) [jboss-msc-1.0.2.GA.jar:1.0.2.GA]
    at org.jboss.msc.service.ServiceControllerImpl$StartTask.run(ServiceControllerImpl.java:1746) [jboss-msc-1.0.2.GA.jar:1.0.2.GA]
    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110) [rt.jar:1.7.0_07]
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603) [rt.jar:1.7.0_07]
    at java.lang.Thread.run(Thread.java:722) [rt.jar:1.7.0_07]
Caused by: java.io.FileNotFoundException: /home/codegen/dependencies/java/stable/dependencies/libs/guava-11.0.1.jar (No such file or directory)
    at java.util.zip.ZipFile.open(Native Method) [rt.jar:1.7.0_07]
    at java.util.zip.ZipFile.<init>(ZipFile.java:214) [rt.jar:1.7.0_07]
    at java.util.zip.ZipFile.<init>(ZipFile.java:144) [rt.jar:1.7.0_07]
    at java.util.jar.JarFile.<init>(JarFile.java:152) [rt.jar:1.7.0_07]
    at java.util.jar.JarFile.<init>(JarFile.java:116) [rt.jar:1.7.0_07]
    at org.jboss.as.server.moduleservice.ExternalModuleSpecService.start(ExternalModuleSpecService.java:63) [jboss-as-server-7.1.1.Final.jar:7.1.1.Final]
    ... 5 more

17:43:14,097 ERROR [org.jboss.msc.service.fail] (MSC service thread 1-1) MSC00001: Failed to start service jboss.module.spec.service."deployment.external./home/codegen/dependencies/java/stable/dependencies/libs/google-http-client-1.11.0-beta.jar".main: org.jboss.msc.service.StartException in service jboss.module.spec.service."deployment.external./home/codegen/dependencies/java/stable/dependencies/libs/google-http-client-1.11.0-beta.jar".main: java.io.FileNotFoundException: /home/codegen/dependencies/java/stable/dependencies/libs/google-http-client-1.11.0-beta.jar (No such file or directory)
    at org.jboss.as.server.moduleservice.ExternalModuleSpecService.start(ExternalModuleSpecService.java:65) [jboss-as-server-7.1.1.Final.jar:7.1.1.Final]
    at org.jboss.msc.service.ServiceControllerImpl$StartTask.startService(ServiceControllerImpl.java:1811) [jboss-msc-1.0.2.GA.jar:1.0.2.GA]
    at org.jboss.msc.service.ServiceControllerImpl$StartTask.run(ServiceControllerImpl.java:1746) [jboss-msc-1.0.2.GA.jar:1.0.2.GA]
    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110) [rt.jar:1.7.0_07]
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603) [rt.jar:1.7.0_07]
    at java.lang.Thread.run(Thread.java:722) [rt.jar:1.7.0_07]
Caused by: java.io.FileNotFoundException: /home/codegen/dependencies/java/stable/dependencies/libs/google-http-client-1.11.0-beta.jar (No such file or directory)
    at java.util.zip.ZipFile.open(Native Method) [rt.jar:1.7.0_07]
    at java.util.zip.ZipFile.<init>(ZipFile.java:214) [rt.jar:1.7.0_07]
    at java.util.zip.ZipFile.<init>(ZipFile.java:144) [rt.jar:1.7.0_07]
    at java.util.jar.JarFile.<init>(JarFile.java:152) [rt.jar:1.7.0_07]
    at java.util.jar.JarFile.<init>(JarFile.java:116) [rt.jar:1.7.0_07]
    at org.jboss.as.server.moduleservice.ExternalModuleSpecService.start(ExternalModuleSpecService.java:63) [jboss-as-server-7.1.1.Final.jar:7.1.1.Final]
    ... 5 more

17:43:14,097 ERROR [org.jboss.msc.service.fail] (MSC service thread 1-3) MSC00001: Failed to start service jboss.module.spec.service."deployment.external./home/codegen/dependencies/java/stable/dependencies/libs/google-oauth-client-1.11.0-beta.jar".main: org.jboss.msc.service.StartException in service jboss.module.spec.service."deployment.external./home/codegen/dependencies/java/stable/dependencies/libs/google-oauth-client-1.11.0-beta.jar".main: java.io.FileNotFoundException: /home/codegen/dependencies/java/stable/dependencies/libs/google-oauth-client-1.11.0-beta.jar (No such file or directory)
    at org.jboss.as.server.moduleservice.ExternalModuleSpecService.start(ExternalModuleSpecService.java:65) [jboss-as-server-7.1.1.Final.jar:7.1.1.Final]
    at org.jboss.msc.service.ServiceControllerImpl$StartTask.startService(ServiceControllerImpl.java:1811) [jboss-msc-1.0.2.GA.jar:1.0.2.GA]
    at org.jboss.msc.service.ServiceControllerImpl$StartTask.run(ServiceControllerImpl.java:1746) [jboss-msc-1.0.2.GA.jar:1.0.2.GA]
    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110) [rt.jar:1.7.0_07]
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603) [rt.jar:1.7.0_07]
    at java.lang.Thread.run(Thread.java:722) [rt.jar:1.7.0_07]
Caused by: java.io.FileNotFoundException: /home/codegen/dependencies/java/stable/dependencies/libs/google-oauth-client-1.11.0-beta.jar (No such file or directory)
    at java.util.zip.ZipFile.open(Native Method) [rt.jar:1.7.0_07]
    at java.util.zip.ZipFile.<init>(ZipFile.java:214) [rt.jar:1.7.0_07]
    at java.util.zip.ZipFile.<init>(ZipFile.java:144) [rt.jar:1.7.0_07]
    at java.util.jar.JarFile.<init>(JarFile.java:152) [rt.jar:1.7.0_07]
    at java.util.jar.JarFile.<init>(JarFile.java:116) [rt.jar:1.7.0_07]
    at org.jboss.as.server.moduleservice.ExternalModuleSpecService.start(ExternalModuleSpecService.java:63) [jboss-as-server-7.1.1.Final.jar:7.1.1.Final]
    ... 5 more

17:43:14,210 INFO  [org.jboss.as.server] (management-handler-thread - 5) JBAS015870: Deploy of deployment "eventes.war" was rolled back with failure message JBAS014750: Operation handler failed to complete
17:43:14,247 INFO  [org.jboss.as.server.deployment] (MSC service thread 1-1) JBAS015877: Stopped deployment eventes.war in 36ms 
```

我知道问题出在这些依赖项中，因为我有另一个非常相似的项目，它没有这两个依赖项，并且它没有任何问题。如果我将这些依赖项放在工作项目中，它就不再部署，并给出上述消息。

我从 JBoss AS 7 开始，我到处寻找解决方案。谁能给我一盏灯？有谁知道上述错误“/home/codegen/dependencies/java/stable/dependencies/libs/”中的这一行是什么意思？

我对这个真的很沮丧。

提前感谢您的任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-27T23:20:55.700

与此问题相关的问题已打开。你可以[在这里](https://code.google.com/p/google-api-java-client/issues/detail?id=642)看到它。

# web-applications - 打开网络浏览器到 http://localhost:8088?fgh 的 exe

> ID：12984386
> 
> 赞同：0
> 
> 时间：2012-10-20T01:10:05.960
> 
> 标签：web-applications, file-io, tcp, exe

我从一个站点下载了一个 exe 文件，该站点旨在连接到本地 USB 设备并更新其内部固件。当我运行默认的 exe 时，浏览器打开到上述位置。这是作为 Windows 应用程序运行的可执行文件还是真正的浏览器插件？
经验告诉我，这是一个本地应用程序加载网页并通过 tcp 套接字与服务器通信并通过文件 IO 与 USB 设备通信......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-20T01:57:45.550

一些程序不是通过窗口系统的本机调用创建自己的 UI，而是通过网页来创建自己的 UI。他们有一个内部网络服务器，然后启动系统的网络浏览器指向该服务器。

整个 UI 实现为本地 Web 服务。

这样做的一个主要优点是它非常便携，因为它可以用基本的 C 或 C++ 编写，而不需要对窗口系统进行任何调用，而只需对操作系统进行一些基本的（非常便携的）调用。

# java - 爪哇。模运算符的特殊输出

> ID：12984393
> 
> 赞同：1
> 
> 时间：2012-10-20T01:13:07.283
> 
> 标签：java

我明白这一点：

`35%10`返回`5`

但是，为什么会`000000035%10`返回`9`？

Ruby 做同样的事情。我检查了irb。

我应该去掉填充数字的 0 吗？执行此操作的 java 函数是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-20T01:18:19.390

数字文字中的前导零表示八进制数。

```
000000035 = 035 = 3*8 + 5 = 29
29 % 10 = 9 
```

有关其他可用格式，请参阅[此页面](http://en.wikibooks.org/wiki/Java_Programming/Literals/Numeric_Literals/Integer_Literals)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-20T01:18:25.017

当您将前导零后跟八进制数字（从`0`to `7`）时，您正在创建一个[八进制文字](http://docs.oracle.com/javase/specs/jls/se7/html/jls-3.html#jls-3.10.1)。并且由于`000000035`八进制是`29`十进制，它的余数`10`是`9`。

**更新**

如果您在字符串中有“八进制文字”，只需使用[`Integer.parseInt`](http://docs.oracle.com/javase/6/docs/api/java/lang/Integer.html#parseInt%28java.lang.String%29)它，您就会将其解析为十进制。

```
assert Integer.parseInt("035") == 35; 
```

# sql - SQL Sum 与选择案例中的条件

> ID：12984396
> 
> 赞同：0
> 
> 时间：2012-10-20T01:13:34.633
> 
> 标签：sql, sql-server-2008, sum, select-case

有以下sql查询

```
select catalogid
   , sum(numitems) numitems
   , sum(allitems) - sum(numitems) ignoreditems
from
(
   select i.catalogid
      , case
           when (ocardtype in ('PayPal','Sofort') OR
                   ocardtype in ('mastercard','visa') and
                   odate is not null)
              AND NOT EXISTS
              (
                 select *
                 FROM bookedordersids b
                 where b.booked = o.orderid
              )
           then numitems
           else 0
        end AS numitems
      , numitems AS allitems
   from orders AS o
   join oitems AS i on i.orderid = o.orderid
) AS X
group by catalogid 
```

现在我有 2 个表，这里有订单和 oitems 表

查询根据您看到的条件对`numitems`和求和`ignoreditems`，现在如果我只想在表中调用的列的值为 时`oprocessed`找到`oitems`总和`0`，

我之前要添加以下内容吗`X`

```
where oprocessed=0 
```

或者我应该在 SELECT CASE 中添加一个条件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T01:25:57.777

您的目录 ID 来自 oitems 表 - 添加 where oprocessed=0 意味着这些目录号不包含在您的结果中。

我的猜测是你会因此在你的案例陈述中想要这个 - 但我并不完全确定这背后的规范，所以不能肯定地说。

```
select catalogid
, sum(numitems) numitems
, sum(allitems) - sum(numitems) ignoreditems
from 
(
    select i.catalogid
    , numitems allitems
    , case 
        when --if the money for the order is gaurenteed return the number of items bought
        (
            ocardtype in ('PayPal','Sofort') 
            OR
            (
                ocardtype in ('mastercard','visa') 
                and
                odate is not null
            )
        ) 
        AND NOT EXISTS 
        (
            select top 1 1
            FROM bookedordersids b
            where b.booked = o.orderid
        )
        and i.oprocessed = 0
        then numitems
        else 0 --if payment isn't made/gaurenteed 0 items bought
    end numitems
    from orders o
    inner join oitems i 
    on i.orderid = o.orderid
) X
group by catalogid 
```

# c++ - 奇怪的 std::nan 错误

> ID：12984402
> 
> 赞同：0
> 
> 时间：2012-10-20T01:14:14.140
> 
> 标签：c++, eclipse, eclipse-cdt, std

当我在 Eclipse CDT 中打开我的 C++ Makefile 项目时，每个 std::nan 都带有红色下划线，当我将鼠标悬停时出现此错误：

```
Invalid arguments '
Candidates are:
__gnu_cxx::enable_if<&0[std::__is_arithmetic<#0>::__value],int>::__type isnan(#0)
' 
```

但是，使用 make + g++ 可以完美编译项目，没有错误或警告。当我从 std::isnan 中删除 std:: 时，Eclipse 停止抱怨，即使我不知道 std 命名空间之外的任何 isnan 函数或宏。什么可能是错的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2018-09-21T18:46:08.620

我尝试了其他答案。这次他们没有工作（但已经为其他真正不是错误的日食错误工作了）。我所做的是包含正确的标题和命名空间，然后从 std::isnan 中删除“std::”。结果 - 日食没有错误。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-20T01:21:43.473

在某些情况下 Eclipse 需要刷新索引。在左侧的项目资源管理器中，右键单击源文件并选择“ `Index -> Freshen All Files`”和“ `Index -> Re-Resolve Unresolved Includes`”。

# ios - UIActivityViewController - 电子邮件和 Twitter 共享

> ID：12984403
> 
> 赞同：34
> 
> 时间：2012-10-20T01:14:15.080
> 
> 标签：ios, email, nsmutablearray, ios6, uiactivity

我最近开始使用 UIActivity 向全世界分享我的应用程序，但我遇到的问题很少。**首先，我没有找到如何设置我的电子邮件主题。**有什么办法吗？其次，当我设置电子邮件的正文时，有一个额外的“输入”（电子邮件的第一行是空白的，我的文本从第二行开始）。这是代码：

```
 NSMutableArray *array = [[NSMutableArray alloc] initWithObjects: @"Test", nil];

    UIActivityViewController *activityViewController = [[UIActivityViewController alloc]
                                   initWithActivityItems:array applicationActivities:nil]; 
```

在电子邮件中，它显示：

"

测试 ”

第三：有没有办法知道选择了哪种分享方式？因为当用户在推特上分享时，我想在我的帖子中包含一个主题标签，但现在它也被集成到电子邮件中，这显然没有意义。

谢谢！

* * *

## 回答 #1

> 赞同：50
> 
> 时间：2013-06-28T16:41:59.600

要在 iOS6 上使用 UIActivityViewController 为电子邮件添加**主题**，这是任何人都可以使用的最佳解决方案。您所要做的就是在初始化 UIActivityViewController 时调用以下命令。

```
UIActivityViewController *activityViewController = [[UIActivityViewController alloc] initWithActivityItems:activityItems applicationActivities:applicationActivities];
[activityViewController setValue:@"My Subject Text" forKey:@"subject"]; 
```

你的 UIActivityViewController 填充了一个主题。

* * *

## 回答 #2

> 赞同：24
> 
> 时间：2013-10-08T15:12:40.477

在 iOS7 中，这可以通过使用 -

```
activityViewController:subjectForActivityType: 
```

> 在发布项目时，该服务可以提供单独的主题字段和数据字段，例如电子邮件消息。如果您希望为支持某个服务的服务提供主题字段，请实施此方法。

检查 - [https://developer.apple.com/library/ios/documentation/uikit/reference/UIActivityItemSource_protocol/Reference/Reference.html#//apple_ref/occ/intfm/UIActivityItemSource/activityViewController:subjectForActivityType](https://developer.apple.com/library/ios/documentation/uikit/reference/UIActivityItemSource_protocol/Reference/Reference.html#//apple_ref/occ/intfm/UIActivityItemSource/activityViewController:subjectForActivityType)：

* * *

## 回答 #3

> 赞同：16
> 
> 时间：2013-06-02T22:51:05.957

1 和 2：[如何在 iOS 6 中为 UIActivityViewController 设置收件人？](https://stackoverflow.com/questions/12623260/how-do-i-set-recipients-for-uiactivityviewcontroller-in-ios-6)

尽管提供的两种方法都有些小技巧，尤其是第一种方法，但这是可能的。

3：可以在不同的服务上共享不同的内容，但是项目的数量和它们的类型应该是相同的（但这并不是一个限制，真的，因为你可以为特定服务上不需要的项目返回 nil ）。您必须在使用 UIActivityItemSource 协议选择服务后创建共享项目

我使用的代码：

以当前控制器显示 UIActivityViewController 作为所有项目的提供者（它应该在 .h 文件中）：

```
const int numberOfSharedItems = 5;

- (IBAction)shareAction:(id)sender
{
    NSMutableArray *shareItems = [NSMutableArray new];
        while ([shareItems count] < numberOfSharedItems)
            [shareItems addObject: self];

        UIActivityViewController *shareController =
            [[UIActivityViewController alloc]
                // actual items are prepared by UIActivityItemSource protocol methods below
                initWithActivityItems: shareItems
                applicationActivities :nil];

        shareController.excludedActivityTypes = @[UIActivityTypeMessage, UIActivityTypePrint, UIActivityTypeCopyToPasteboard, UIActivityTypeAssignToContact, UIActivityTypeSaveToCameraRoll];

        [self presentViewController: shareController animated: YES completion: nil];
} 
```

为将要共享的项目制作占位符：

```
-(id)activityViewControllerPlaceholderItem:(UIActivityViewController *)activityViewController
{
    static UIActivityViewController *shareController;
    static int itemNo;
    if (shareController == activityViewController && itemNo < numberOfSharedItems - 1)
        itemNo++;
    else {
        itemNo = 0;
        shareController = activityViewController;
    }

    switch (itemNo) {
        case 0: return @""; // intro in email
        case 1: return @""; // email text
        case 2: return [NSURL new]; // link
        case 3: return [UIImage new]; // picture
        case 4: return @""; // extra text (via in twitter, signature in email)
        default: return nil;
    }
} 
```

为不同的服务制作将要共享的实际项目：

```
-(id)activityViewController:(UIActivityViewController *)activityViewController itemForActivityType:(NSString *)activityType
{
    // the number of item to share
    static UIActivityViewController *shareController;
    static int itemNo;
    if (shareController == activityViewController && itemNo < numberOfSharedItems - 1)
        itemNo++;
    else {
        itemNo = 0;
        shareController = activityViewController;
    }

    NSString *shareText = [self shareText]; // whatever you fancy
    NSURL *shareURL = [self shareURL];

    // twitter
    if ([activityType isEqualToString: UIActivityTypePostToTwitter])
        switch (itemNo) {
            case 0: return nil;
            case 1: return shareText; // you can change text for twitter, I add $ to stock symbol inside shareText here, e.g. Hashtags can be added too
            case 2: return shareURL;
            case 3: return nil; // no picture
            case 4: return @"via @YourApp";
            default: return nil;
        }

    // email
    else if ([activityType isEqualToString: UIActivityTypeMail])
        switch (itemNo) {
            case 0: return @"Hi!\r\n\r\nI used YourApp\r\n";
            case 1: return shareText;
            case 2: return shareURL;
            case 3: return nil; // no picture
            case 4: return [@"\r\nCheck it out.\r\n\r\nCheers\r\n" stringByAppendingString: [self userName]];
            default: return nil;
        }

    else // Facebook or something else in the future
        switch (itemNo) {
            case 0: return nil;
            case 1: return shareText;
            case 2: return shareURL;
            case 3: return [self shareImage];
            case 4: return nil;
            default: return nil;
        }
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-07-23T07:54:05.927

你可以简单地创建一个类，如下所示：

```
 @interface MYNActivityProvider : UIActivityItemProvider <UIActivityItemSource>

 @end 
```

// 执行

```
 - (id) activityViewController:(UIActivityViewController *)activityViewController
      itemForActivityType:(NSString *)activityType
 { 
    if ( [activityType isEqualToString:UIActivityTypePostToTwitter] ) {
        return stringToPost;
     }
    if ( [activityType isEqualToString:UIActivityTypePostToFacebook] ) {
         return stringToPost;
    }
    if ( [activityType isEqualToString:UIActivityTypeMessage] ) {
        return @"SMS message text";  
    }
    if ( [activityType isEqualToString:UIActivityTypeMail] ) {
        return @"Email text here!";
    }
    if ( [activityType isEqualToString:@"Custom"] ) {
        return @"app custom text";
    }
    return nil;
 } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-04-03T03:32:30.750

您可能想尝试[OvershareKit](https://github.com/overshare/overshare-kit)。

> 我们经常被问到为什么有人会使用 OvershareKit 而不是 UIActivityViewController (UIAVC) 和 UIActivity。UIAVC 非常适合那些知道他们永远不需要以下任何内容的应用程序：
> 
> 1.  永远不需要与超过一两个第三方服务集成。
> 2.  永远不需要调整活动表和共享屏幕的 UI。
> 3.  从不关心为每种共享类型（电子邮件与 SMS 等）提供单独的、特定于媒体的内容
> 4.  永远不需要在同一张表中有多个项目，例如复制文本与复制链接。
> 5.  不要介意所有非系统提供的活动都会被无聊的单色图标卡住。

您的情况是（3） - 需要关心不同共享类型的不同内容。

# javascript - 单击按钮后显示滑出 div

> ID：12984409
> 
> 赞同：0
> 
> 时间：2012-10-20T01:15:11.843
> 
> 标签：javascript, jquery

我在我的网站上使用 simplecart.js 将商品添加到购物车。[网站可以在这里看到。](http://www.rubytuesdaycreative.co.uk/testsite/snood.html)

该文档提到了使用 After Add 功能：

```
// basic callback example
simpleCart.bind( "afterAdd" , function( item ){
  console.log( item.get("name") + " was added to the cart!" );
}); 
```

我想在我的脚本中使用这个函数来制作一个滑出 div `panel`，以便在添加项目后滑出。

滑出面板的现有 jQuery 是：

```
///////
///Settings object
///////
var settings = {
    objSlideTrigger: '.trigger',
    objSlidePanel: '.panel'
} 
```

链接文件中还有完整的 jQuery：

```
///////
///Slide out tab
///////
function slideOutTab() {
    //Bind a click handler to the trigger
    $(settings.objSlideTrigger).bind('click' , function() {
        //If the panel isn't out
        if(!$(settings.objSlidePanel).hasClass('out')){
            //Animate it to left 0px
            $(settings.objSlidePanel).animate({
                'left' : '0px'
            });
            //Add the out class
            $(settings.objSlidePanel).addClass('out');
        }
        else {
            //Otherwise, animate it back in
            $(settings.objSlidePanel).animate({
                'left' : '-330px'
            });
            //Remove the out class
            $(settings.objSlidePanel).removeClass('out');
        }
    });
}
    $(function(){slideOutTab();}); 
```

加上现有的 simplecart javascript。

```
simpleCart({
    checkout: {
      type: "PayPal",
      email: "hello@myemail.com",
    },
    currency: "GBP"
}); 
```

我知道我需要使用基本的回调示例，而不是控制台消息需要调用 javascript 来滑出，但我不确定语法。任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T01:27:11.057

您调用`slideOutTab()`DOM 加载，因此该元素`click handler`附加了一个。

```
simpleCart.bind( "afterAdd" , function(){
    $('.trigger').click();
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-20T19:59:04.533

检查购物车是否打开，如果没有打开：

```
simpleCart.bind( "afterAdd" , function(){
    if(!$(settings.objSlidePanel).hasClass('out')){
        $(settings.objSlidePanel).click();
    }
}); 
```

这 ”！” 意味着检查它是否“没有”类“out”。换句话说，如果 if 语句在其中，则为 true，这会导致 click 方法被触发。

# silverlight - Silverlight MediaElement 在页面加载期间不起作用

> ID：12984412
> 
> 赞同：0
> 
> 时间：2012-10-20T01:16:00.027
> 
> 标签：silverlight, mediaelement

我不能让 MediaElement 对象在页面加载中工作。如果我打电话，它工作正常

```
// the reason is during Page_load MyMediaElement.AudioStreamCount is 0
MyMediaElement.Stop();
MyMediaElement.Play(); 
```

在按钮事件中。我检查了我的 page_load，但似乎没有什么能阻止这一点。是因为一些线程问题吗？

即使我在 Page_Loaded 上调用它，它也不起作用

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T15:37:55.493

如果您希望`MediaElement`尽快开始播放，可以将其[AutoPlay](http://msdn.microsoft.com/en-us/library/system.windows.controls.mediaelement.autoplay%28v=vs.95%29.aspx)属性设置为 true 或尝试在[MediaOpened](http://msdn.microsoft.com/en-us/library/system.windows.controls.mediaelement.mediaopened%28v=vs.95%29.aspx)事件中调用该`Play`方法。

# http - 如何在 Java 中通过 HTTP get 发送数据？

> ID：12984414
> 
> 赞同：1
> 
> 时间：2012-10-20T01:16:09.260
> 
> 标签：http, get, libcurl, multiplayer, cocos2d-x

因此，我将通过 iphone 连接到一个 servlet 并使用 HTTP。我实际上正在开发一个多人游戏，并且想知道如何通过 java (doGet) 中的 HTTP get 将特定数据发送到 iphone。我在 iphone (cocos2d-x) 上使用 libcurl。

这是我的代码的设置方式：

```
size_t write_data(void* buffer, size_t size, size_t nmemb, void *data)
{
    //do stuff with data        
}

//main or some init method
CURL *curl;
CURLcode res;
curl = curl_easy_init();
if(curl)
{
    char *data = "hi imma get=yeah";
    curl_easy_setopt(curl, CURLOPT_URL, "http://whatever.com");
    curl_easy_setopt(curl, CURLOPT_WRITEFUNCTION, write_data); 

    res = curl_easy_perform(curl);
    if(res != CURLE_OK)
    {
              CCLOG("WELP BETTER DO SOMETHING ERROR");
    }

    curl_easy_cleanup(curl);
} 
```

那么，我想知道的是如何使用 java 中的 doGet 方法中的响应将字符串发送到上面定义的 write_function？如，我如何处理 doGet 方法中的响应参数？

doGet 方法供参考：

```
protected void doGet(HttpServletRequest request, HttpServletResponse response) throws    ServletException, IOException
 {
    System.out.println("GET METHOD CALLED");

 } 
```

那么，现在我该如何处理该响应以将一些数据传递给 write_function？

谢谢，任何和所有的输入！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T01:22:02.140

通过使用响应的Writer，如下图所示。

```
protected void doGet(HttpServletRequest request, HttpServletResponse response) 
    throws ServletException, IOException
{
    // tell response what format your output is in, we select plain text here
    response.setContentType("text/plain;charset=UTF-8");
    // ask the response object for a Writer object
    PrintWriter out = response.getWriter();
    try {
        // and use it like you would use System.out.  Only, this stuff gets sent 
        //to the client
        out.println("GET METHOD CALLED");
    } finally {
        // housekeeping: ensure that the Writer is closed when you're ready.
        out.close();
    }
} 
```

在某些情况下，使用 Stream 会更容易。这也是可能的**，但您永远不能同时打开 Writer 和 OutputStream**。

```
protected void doGet(HttpServletRequest request, HttpServletResponse response) 
    throws ServletException, IOException
{
    response.setContentType("text/plain;charset=UTF-8");
    // ask the response object for an OutputStream object
    OutputStream os = response.getOutputStream();

    try {
        // output some stuff, here just the characters ABC
        os.write(new byte[]{65,66,67});
    } finally {            
        os.close();
    }

} 
```

如果您想了解更多信息，网上有大量关于 servlet 的教程，包括[oracle.com 上官方 Java EE 教程的 Servlet 章节](http://docs.oracle.com/javaee/6/tutorial/doc/bnafd.html)

# iphone - 字体大小在 iPhone 上呈现不同

> ID：12984424
> 
> 赞同：0
> 
> 时间：2012-10-20T01:19:50.280
> 
> 标签：iphone, ios, css, mobile

这个在搞乱我的脑袋。下面的 HTML/CSS 在每个浏览器上看起来都很好，当我在 iPhone 上阅读它时。a 标签（SITE DESIGN SOME COMPANY）中的文本明显小了大约 25%。我已经浏览了 DOM，并确保没有其他样式在我的桌面上进行计算。

```
<footer>
COPYRIGHT 2012 / <a href="http://somesite.com">
SITE DESIGN SOME COMPANY</a> / ALL RIGHTS RESERVED
</footer>      

footer {
width: 100%;
position: absolute;
padding: 10px 0 10px 0;
left: 0px;
bottom: -50px;
text-align: center;
word-spacing: 20px;
font-size: 75%;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-20T01:23:29.653

我也经历过这种情况。iPhone 呈现`%`字体大小的方式与其他浏览器不同。特别是如果嵌套在具有多个 % 更改的多个元素内（例如，如果您`<footer>`的示例位于另一个具有另一个`75%`字体大小声明的元素内）。

如果您将 75% 更改为 0.75em（或使用百分比以外的其他值），您应该重新开始营业。

```
footer {
width: 100%;
position: absolute;
padding: 10px 0 10px 0;
left: 0px;
bottom: -50px;
text-align: center;
word-spacing: 20px;
font-size: 0.75em; /* or 10pt, or... */
} 
```

# python - PIL“IOError：图像文件被截断”与大图像

> ID：12984426
> 
> 赞同：90
> 
> 时间：2012-10-20T01:20:27.890
> 
> 标签：python, image, python-imaging-library, zope

我认为这个问题与 Zope 无关。尽管如此，我会解释我正在尝试做的事情：

我在 Zope 中使用 PUT_factory 通过 FTP 将图像上传到 ZODB。上传的图像在新创建的容器对象中保存为 Zope 图像。这很好用，但是如果图像超过一定大小（宽度和高度），我想调整它的大小。所以我使用 PIL 的缩略图功能来调整它们的大小，即 200x200。只要上传的图像相对较小，它就可以正常工作。我没有检查确切的限制，但 976x1296px 仍然可以。

有了更大的图片，我得到：

```
Module PIL.Image, line 1559, in thumbnail
Module PIL.ImageFile, line 201, in load
IOError: image file is truncated (nn bytes not processed). 
```

我从我的相机测试了很多 jpeg。我不认为它们都被截断了。

这是我的代码：

```
if img and img.meta_type == 'Image':
  pilImg = PIL.Image.open( StringIO(str(img.data)) )
elif imgData:
  pilImg = PIL.Image.open( StringIO(imgData) )

pilImg.thumbnail((width, height), PIL.Image.ANTIALIAS) 
```

由于我使用的是 PUT_factory，因此我没有文件对象，我使用的是来自工厂的原始数据或以前创建的 (Zope) Image 对象。

我听说当超过一定大小时 PIL 会以不同的方式处理图像数据，但我不知道如何调整我的代码。还是和PIL的延迟加载有关？

* * *

## 回答 #1

> 赞同：217
> 
> 时间：2014-05-09T23:26:17.013

I'm a little late to reply here, but I ran into a similar problem and I wanted to share my solution. First, here's a pretty typical stack trace for this problem:

```
Traceback (most recent call last):
  ...
  File ..., line 2064, in ...
    im.thumbnail(DEFAULT_THUMBNAIL_SIZE, Image.ANTIALIAS)
  File "/Library/Python/2.7/site-packages/PIL/Image.py", line 1572, in thumbnail
    self.load()
  File "/Library/Python/2.7/site-packages/PIL/ImageFile.py", line 220, in load
    raise IOError("image file is truncated (%d bytes not processed)" % len(b))
IOError: image file is truncated (57 bytes not processed) 
```

If we look around line 220 (in your case line 201—perhaps you are running a slightly different version), we see that PIL is reading in blocks of the file and that it expects that the blocks are going to be of a certain size. It turns out that you can ask PIL to be tolerant of files that are truncated (missing some file from the block) by changing a setting.

Somewhere before your code block, simply add the following:

```
from PIL import ImageFile
ImageFile.LOAD_TRUNCATED_IMAGES = True 
```

...and you should be good.

EDIT: It looks like this helps for the version of PIL bundled with Pillow ("pip install pillow"), but may not work for default installations of PIL

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2013-11-19T10:00:21.617

最好的事情是你可以：

```
if img and img.meta_type == 'Image':
    pilImg = PIL.Image.open( StringIO(str(img.data)) )
elif imgData:
    pilImg = PIL.Image.open( StringIO(imgData) )

try:
    pilImg.load()
except IOError:
    pass # You can always log it to logger

pilImg.thumbnail((width, height), PIL.Image.ANTIALIAS) 
```

尽管看起来很愚蠢 - 它会像奇迹一样工作。如果您的图像缺少数据，它将用灰色填充（检查图像底部）。

Note: usage of camel case in Python is discouraged and is used only in class names.

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2020-01-07T08:44:54.860

Here is what I did:

*   Edit `LOAD_TRUNCATED_IMAGES = False` line from `/usr/lib/python3/dist-packages/PIL/ImageFile.py:40` to `LOAD_TRUNCATED_IMAGES = True`.

Editing the file requires root access though. I encountered this error while running some pytorch which was maybe using the PIL library.

Do this fix only if you encounter this error, without directly using PIL.

Else please do

```
from PIL import ImageFile
ImageFile.LOAD_TRUNCATED_IMAGES = True 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-10-21T05:13:14.747

这可能不是 PIL 问题。它可能与您的 HTTP 服务器设置有关。HTTP 服务器对将被接受的实体主体的大小进行了限制。

例如，在 Apache FCGI 中，选项 FcgidMaxRequestLen 确定可以上传的文件的最大大小。

检查您的服务器 - 它可能是限制上传大小的服务器。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2021-08-15T07:52:12.477

I was trapped with the same problem. However, setting `ImageFile.LOAD_TRUNCATED_IMAGES = True` is not suitable in my case, and I have checked that all my image files were unbroken, but big.

I read the images using `cv2`, and then converted it to `PIL.Image` to get round the problem.

```
img = cv2.imread(imgfile, cv2.IMREAD_GRAYSCALE)
img = Image.fromarray(img) 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-12-19T20:21:55.680

I had to change the tds version to 7.2 to prevent this from happening. Also works with tds version 8.0, however I had some other issues with 8.0.

# c - SDL+OpenGL 在 linux 中工作，但在 windows 中不工作，不是编译器/链接器问题

> ID：12984429
> 
> 赞同：2
> 
> 时间：2012-10-20T01:20:42.100
> 
> 标签：c, windows, linux, opengl, sdl

好的，所以我遇到了一个关于我一直在从事的项目的非常奇怪的问题。该项目是一个 3D 引擎（分别使用 SDL 和 openGL 进行输入处理和图形）。在过去的几个月里，我一直在 linux（Ubuntu 10.10）中从事这个项目，最近决定将代码移植到 Windows 7 环境中。我选择 SDL 的主要原因之一是因为它处理独立于操作系统的窗口创建，这意味着从一个操作系统移植到另一个操作系统应该相当简单。我没有编译或链接问题，问题在于完全相同的代码以两种完全不同的方式运行，显然没有理由。

首先，差异的视觉示例：

[http://i.stack.imgur.com/RNcCs.jpg](http://i.stack.imgur.com/RNcCs.jpg)

它不应该是这样的，首先左下角的紫色 revtanglers 应该是文本，如果你仔细观察，你会看到一些点正在渲染，我正在使用几何、顶点和像素着色器：

[http://i.stack.imgur.com/1Y9km.jpg](http://i.stack.imgur.com/1Y9km.jpg)

它应该看起来更像这样，就像在 linux 中一样。我所说的那些要点是这些中的草：

[http://i.stack.imgur.com/Hzmuy.jpg](http://i.stack.imgur.com/Hzmuy.jpg)

[http://i.stack.imgur.com/HYCMh.jpg](http://i.stack.imgur.com/HYCMh.jpg)

它还在 Linux 中以 600+ FPS 的速度运行，着色器工作正常，一切工作完美无缺。我添加了一些代码来检查 Windows 中的 FPS（按下按钮时将当前 fps 发送到日志文件）并且它在禁用着色器的情况下以 20-30 FPS 运行。

我对此感到非常困惑，因为我使用的所有代码实际上都不同，唯一的区别在于我使用 openGL 的方式：在 Windows 中我使用 GLEW 来处理我的扩展，而在 linux 中我使用#define GL_GLEXT_PROTOTYPES。我环顾四周，似乎我正在使用的代码应该在 linux 和 windows 上都可以工作，尽管每当我在 windows 中运行我的程序时都会产生这些非常奇怪的效果。

问题将是：

*   视图似乎卡在正交投影中（当它设置为透视时）
*   着色器、混合、帧缓冲区/VBO、纹理不工作。
*   极度延迟。

我认为我可能做错的唯一地方是 Initializing SDL/OpenGL/GLEW 。

我直接使用 GLEW，因为我最初链接的库给我带来了问题。

```
//SAE_GL.h
/**Header Guard**/
#ifndef __SAE_OPENGL__
#define __SAE_OPENGL__

/**Include**/
///gl extensions
#ifdef __WIN32
    #define GLEW_STATIC
    #include "GL/glew.h"
#else
    #define GL_GLEXT_PROTOTYPES
#endif

///opengl
#include "GL/gl.h"
#include "GL/glu.h"

///SAE Dependencies
#include "SAE_Core.h" 
```

窗口管理器（WM.h 仅包含声明，包括 SAE_GL.h、SAE_SDL.h 和 SAE_Core.h）

```
#include "SAE_WM.h"

namespace SAE{

bool SDL_Application::SAE_QUIT_BOOL_DEFAULT = false;
bool SDL_Application::SAE_MENU_BOOL_DEFAULT = false;
bool SDL_Application::SAE_VERBOSE_FLAG = false;

///Constructor
SDL_Application::SDL_Application(){

    ///Video Info
    screen      = (SDL_Surface*)NULL;
    videoInfo   = (SDL_VideoInfo*)NULL;

    VIEW_MODE               = SAE_PERSPECTIVE;
    VIEW_DIM                = SAE_3D;

    defaultScreenInfo = SAE_DEFAULT_SCREENINFO_HOLDER;
    currentScreenInfo = SAE_DEFAULT_SCREENINFO_HOLDER;

    numResolutions = 0;

    ///Set up our video flags
    videoFlags  = SDL_OPENGL;          ///OpenGL
    videoFlags |= SDL_GL_DOUBLEBUFFER; ///Double Buffering
    videoFlags |= SDL_HWPALETTE;       ///Harware Palette
    videoFlags |= SDL_RESIZABLE;       ///Window Resizing

    ///Callback setup
    setResizeFunction       ( SDL_DResize );
    setRunFunction          ( SDL_DRun    );
    setEventFunction        ( SDL_DEvent  );
    setCleanupFunction      ( SDL_DClean  );
    setMenuManagerFunction  ( SDL_DMenu   );

    SAE_QUIT_FLAG           = &SAE_QUIT_BOOL_DEFAULT;
    SAE_MENU_FLAG           = &SAE_MENU_BOOL_DEFAULT;

/////////////////////////////////////////////////

    ///FPS Handler setup
    time        = 0;
    frames      = 0;

/////////////////////////////////////////////////

/////////////////////////////////////////////////

/////////////////////////////////////////////////
/////////////////////////////////////////////////
}

void SDL_Application::init(int argc, char** argv){
    ///Redirect output to log
    FILE* tempb;
    tempb = freopen( "logfile.dat", "a+", stderr );

    fprintf(stderr,"\n===================================================================================================\n");
    fprintf(stderr,"\n***Initializing program essentials***\n");

    bool create_fonts = false;

    for(int i = 0; i < argc; i++){
        if(strncmp(argv[i], "-v",10)==0) SAE_VERBOSE_FLAG = true;
        if(strncmp(argv[i], "--genfonts",20)==0){
            videoFlags |= SDL_NOFRAME;
            create_fonts = true;
        }
    }

    ///Initialize Everything in SDL
    if(be_verbose)fprintf(stderr,"----SDL        : ");
    if ( SDL_Init( SDL_INIT_EVERYTHING ) < 0 ){
        if(be_verbose){
            fprintf( stderr, "Failed\n");
            fprintf( stderr, "--------Critical Error: SDL init failed: %s\n", SDL_GetError( ) );
        }
        fprintf( stderr, "****The program encountered a critical error - exiting...****");
        exit( 0 );
    }else{
        if(be_verbose)fprintf( stderr, "Success :)\n" );
    }

    ///Get Video Info
    videoInfo = ( SDL_VideoInfo* )SDL_GetVideoInfo( );
    if(be_verbose)fprintf(stderr,"----Video Info : ");

    if( !videoInfo ){
        if(be_verbose){
            fprintf( stderr, "Failed\n");
            fprintf( stderr, "--------Critical Error: Can't query video info: %s\n", SDL_GetError() );
        }
        fprintf( stderr, "\n****The program encountered a critical error - exiting...****");
        exit( 0 );
    } else {
        ///Setup our default width and height
        defaultScreenInfo.Width  = videoInfo->current_w;
        defaultScreenInfo.Height = videoInfo->current_h;
        if(be_verbose)fprintf( stderr, "Success :)\n");
    }

//////////////////////////////////////////////////////////////////////////////////////////////////

    ///Sets up what type of surface we're using
    if(be_verbose) fprintf(stderr,"----FrameBuffer: ");
    if( videoInfo -> hw_available ){
        videoFlags |= SDL_HWSURFACE;
    }
    else{
        videoFlags |= SDL_SWSURFACE;
    }

/////////

    ///Sets up hardware blitting
    if( videoInfo -> blit_hw ){
        videoFlags |= SDL_HWACCEL;
    }

/////////

    ///Enable Double Buffering
    SDL_GL_SetAttribute( SDL_GL_DOUBLEBUFFER, 1 );
    SDL_GL_SetAttribute( SDL_GL_DEPTH_SIZE,   16);
    ///Startup the screen

    if(create_fonts){
        screen = SDL_SetVideoMode( SAE_DEFAULT_TEXTURE_WIDTH,
                                   SAE_DEFAULT_TEXTURE_HEIGHT,
                                   SAE_DEFAULT_SCREEN_BYTES_PER_PIXEL,
                                   videoFlags );
    }else{
        screen = SDL_SetVideoMode( SAE_DEFAULT_SCREEN_WIDTH,
                                   SAE_DEFAULT_SCREEN_HEIGHT,
                                   SAE_DEFAULT_SCREEN_BYTES_PER_PIXEL,
                                   videoFlags );
        }

    if ( !screen ){
        if(be_verbose)fprintf( stderr, "Critical Error: Video mode not supported: %s\n", SDL_GetError());
        fprintf( stderr, "\n****The program encountered a critical error - exiting...****");
        exit(0);
    } else {
        if(be_verbose) fprintf( stderr, "Success :)\n");
    }

//////////////////////////////////////////////////////////////////////////////////////////////////

    SDL_PixelFormat format;
    SAE_ScreenInfo max;
    format.BitsPerPixel = SAE_COMPATABILITY_SCREEN_BYTES_PER_PIXEL;

////////

    ///Get supported screen resolutions
    SDL_Rect** modes = SDL_ListModes(&format, videoFlags|SDL_FULLSCREEN);

    if(be_verbose)fprintf(stderr,"----Resolutions: ");
    if (modes == (SDL_Rect**)0) {
        if(be_verbose)fprintf(stderr,"Critical Error: No resolutions available!\n");
        fprintf( stderr, "\n****The program encountered a critical error - exiting...****");
        exit(-1);
    }else{
        if(be_verbose)fprintf(stderr,"Success :)\n");
    }

    if (modes == (SDL_Rect**)-1) {
        max.Width = videoInfo->current_w;
        max.Height = videoInfo->current_h;
    }else{
        for (int i=0; modes[i]; ++i){
            max.Width = modes[i]->w;
            max.Height = modes[i]->h;
        }
    }

    for(int i = 0; i < 23; i+=2){
        if(SAE_SCREEN_RESOLUTIONS[i] <= max.Width && SAE_SCREEN_RESOLUTIONS[i+1] <= max.Height)
        {
            supportedResolutions[numResolutions].Width = SAE_SCREEN_RESOLUTIONS[i];
            supportedResolutions[numResolutions].Height = SAE_SCREEN_RESOLUTIONS[i+1];
            numResolutions++;
        }
    }

    ///Initialize openGL
    if(be_verbose)fprintf(stderr,"----OpenGL     : ");
    if(!initializeOpenGL()){
        if(be_verbose)fprintf(stderr,"Critical Error: openGL init failed, exiting\n");
        fprintf( stderr, "\n****The program encountered a critical error - exiting...****");
        exit(0);
    } else {
        if(be_verbose)fprintf(stderr,"Success :)\n\n");
    }
/////////////////////////////////////////////////
    fprintf(stderr,"***------------SUCCESS------------***\n");
////////////////////////////////////////////////

    if(be_verbose){
        fprintf(stderr,"\n***---Current Video Information---***\n");
        fprintf( stderr, "----Software Surface: %s\n", (videoFlags&SDL_SWSURFACE )?"ENABLED":"DISABLED");
        fprintf( stderr, "----Hardware Surface: %s\n", (videoFlags&SDL_HWSURFACE )?"ENABLED":"DISABLED");
        fprintf( stderr, "----Hardware Palette: %s\n", (videoFlags&SDL_HWPALETTE )?"ENABLED":"DISABLED");
        fprintf( stderr, "----Double Buffering: %s\n", (videoFlags&SDL_DOUBLEBUF )?"ENABLED":"DISABLED");
        fprintf( stderr, "----openGL Doublebuf: %s\n", (videoFlags&SDL_GL_DOUBLEBUFFER )?"ENABLED":"DISABLED");
        fprintf( stderr, "----Fullscreen      : %s\n", (videoFlags&SDL_FULLSCREEN)?"ENABLED":"DISABLED");
        fprintf( stderr, "----OpenGL          : %s\n", (videoFlags&SDL_OPENGL    )?"ENABLED":"DISABLED");
        fprintf( stderr, "----Resizable       : %s\n", (videoFlags&SDL_RESIZABLE )?"ENABLED":"DISABLED");
        fprintf( stderr, "----No Frame        : %s\n", (videoFlags&SDL_NOFRAME   )?"ENABLED":"DISABLED");
    }
    SDL_EnableKeyRepeat(500,250);
    time = SDL_GetTicks();
    resizeWindow(SAE_DEFAULT_SCREEN_WIDTH, SAE_DEFAULT_SCREEN_HEIGHT);
    time = SDL_GetTicks();
} 
```

这是我设置 openGL/GLEW 以供使用的地方。

```
///Initialize openGL
bool SDL_Application::initializeOpenGL(){
/////////////////////////////////////////////////

    ///Initialize GLEW and load extensions
    #ifdef __WIN32
    GLenum status = glewInit();

    if( status != GLEW_OK ){
    ///Glew Initialization went wrong
        fprintf(stderr, "Error: %s\n", glewGetErrorString( status ));
        return false;
    } else {
        fprintf(stderr, "GLEW successfully initialized!\n");
    }
    #endif

/////////////////////////////////////////////////

    ///Sets clear color and clear depth
    float clearColor[]={0.0f,0.0f,0.0f,0.0f};
    glClearColor( clearColor[0], clearColor[1], clearColor[2], clearColor[3] );
    glClearDepth( 1.0f );

/////////
    ///DEPTH FUNCTION NEEDS CHECKING
    glDepthFunc ( GL_LEQUAL );
    glBlendEquation(GL_FUNC_ADD);
    glBlendFunc(GL_SRC_ALPHA, GL_ONE_MINUS_SRC_ALPHA);

    glShadeModel( GL_SMOOTH );
/////////
    glEnable( GL_DEPTH_TEST );      ///Depth Testting
    glEnable( GL_CULL_FACE);        ///Face Culling
/////////////////////////////////////////////////

    return true;

/////////////////////////////////////////////////

} 
```

我还包括我的窗口大小调整功能，因为它是相对的。

```
void SDL_Application::resizeWindow(int width, int height){
/////////////////////////////////////////////////
        SDL_Event myEvent;
        myEvent.type = SDL_VIDEORESIZE;
        myEvent.resize.type = SDL_VIDEORESIZE;
        myEvent.resize.w = width;
        myEvent.resize.h = height;
        SDL_PushEvent(&myEvent);

    }

void SDL_Application::ResizeWindow(int width, int height){
/////////////////////////////////////////////////
    double v_min = (VIEW_DIM == SAE_2D)?1.0:  0.1 * SAE_UNIT_MEASURE;
    double v_max = (VIEW_DIM == SAE_2D)?1.0: 1000.0 * SAE_UNIT_MEASURE;
    ///Prevents divide by zero
    if( height <= 0 ) height = 1;

    ///Set aspect ratio
    double ratio = (double)width/(double)height;
    currentScreenInfo.Width = width;
    currentScreenInfo.Height = height;
/////////

    ///Load and clear our projection matrix
    glMatrixMode( GL_PROJECTION );
    glLoadIdentity();

    ///Set the entire window as our viewport
    glViewport( 0, 0, currentScreenInfo.Width, currentScreenInfo.Height );

    if(VIEW_MODE == SAE_PERSPECTIVE)
    {
        ///Set up a perspective projection
        gluPerspective( 70, ratio, v_min, v_max );
    }else{
        ///Gives us an orthographic perspective
        glOrtho( v_min, v_max, v_min, v_max, v_min, v_max);

    }

/////////

    ///Set what we're looking at, into the screen
    gluLookAt(0, 0, 0,
              0, 0, -1,
              0.0f, 1.0f, 0.0f);

/////////

    ///Do our user-set resize function and resize the screen

    SAEResize( currentScreenInfo.Width, currentScreenInfo.Height);
    screen = SDL_SetVideoMode( currentScreenInfo.Width, currentScreenInfo.Height, SAE_DEFAULT_SCREEN_BYTES_PER_PIXEL, videoFlags);
/////////////////////////////////////////////////
} 
```

我想我一定遗漏了一些东西，或者我不知道 SDL/OpenGL/GLEW 如何在 Windows 上工作。

**编辑：看起来我可能不会得到我的问题的具体答案，我想我应该重写我的代码以使用 DirectX，嗯，没什么大不了的。**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-20T09:14:45.717

我不认为这是您问题的主要原因，但是：为什么有这么多人，包括 OP 在窗口调整大小处理程序中设置投影矩阵？为什么？设置矩阵全部用于显示功能。

此外，投影矩阵只能用于设置“镜头”。**不得**使用投影矩阵设置视图位置。`gluLookAt`关于投影矩阵模式：Big, fat *NoGo*！

你说你正在使用着色器。那么你为什么要使用固定的函数矩阵运算呢？将矩阵作为制服传递。这也立即解决了在调整大小处理程序中做不属于它的事情的问题。

# c++ - 调试对象上的 LNK2005 和 LNK1169

> ID：12984430
> 
> 赞同：0
> 
> 时间：2012-10-20T01:21:18.903
> 
> 标签：c++, lnk2005

我已经非常广泛地阅读了这两个错误，但尽管我付出了所有努力，但我在这里看不到问题所在。我已经完全用标题保护淹没了我的代码，看看这是否有帮助，结果没有改变。这是每个文件： **Mystring.cpp**

```
#pragma once
#include "MyString.h"

#ifndef MYSTRING_CPP
#define MYSTRING_CPP

using namespace std;

    MyString::MyString(char chars[]){
        str = (char*) malloc(strlen(chars));
        str = chars;
    }

    //etc, other methods as defined in header file

#endif 
```

**我的字符串.h**

```
#pragma once
#include <string.h>
#include <iostream> 
#ifndef MYSTRING_H
#define MYSTRING_H
using namespace std;
class MyString {
protected:
    char * str;
public:
    ~MyString();
    MyString(char chars[]);
    MyString(const char chars[]);
    MyString();
    int length();
    void resize(int n, char c);
    void clear();
    bool empty();
    void insert(int pos1, const MyString& str);
    void insert (int pos1, const char* s);
    void erase (int pos, int n);
    int find(const MyString& str);
    int find(const char* s);
    int compare(const MyString& str);
    int compare(const char* s);
    const char* getStr() const;
    MyString::MyString(const MyString &that);
    MyString & operator=(const char chars[]);
    MyString & operator=(const MyString& str);

};

#endif 
```

**MystringDerived.h**

```
#pragma once
#include "MyString.cpp"
#ifndef MYSTRINGDERIVED_H
#define MYSTRINGDERIVED_H
class MyStringDerived :
    public MyString
{
public:

    MyStringDerived(char chars[]);
    bool operator>(MyString rhs);
    bool operator>=(MyString rhs);
    bool operator<(MyString rhs);
    bool operator<=(MyString rhs);
    bool operator==(MyString rhs);
    bool operator!=(MyString rhs);
    bool operator+(MyString rhs);
    bool operator[](MyString rhs);
    MyStringDerived(void);
    ~MyStringDerived(void);
};

#endif 
```

**MyStringDerived.cpp**

```
 #pragma once
#include "MyStringDerived.h"
#ifndef MYSTRINGDERIVED_CPP
#define MYSTRINGDERIVED_CPP

MyStringDerived::MyStringDerived(char * const)
{
}

MyStringDerived::~MyStringDerived(void)
{
}
#endif 
```

和我得到的错误

```
 1>test.obj : error LNK2005: "public: int __thiscall MyString::length(void)" (?length@MyString@@QAEHXZ) already defined in MyString.obj
1>test.obj : error LNK2005: "public: void __thiscall MyString::resize(int,char)" (?resize@MyString@@QAEXHD@Z) already defined in MyString.obj
1>C:\Users\Arthur\Documents\Visual Studio 2012\Projects\Project1\Debug\Project2.exe : fatal error LNK1169: one or more multiply defined symbols found 
```

有数百个错误行都看起来像这样。以我组织包含的方式，我绝对看不出我最终会如何包含多个副本。还有什么我想念的吗？任何见解都值得赞赏。这是作业（显然），所以当我在这里完成时，我肯定想真正理解问题。没有人向我展示过我做错了什么。

谢谢！

忘记包含 test.cpp。目前就这么简单：

> MyStringDerived m = "测试"; cout<< m.getStr(); 获取字符（）；返回0；

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-20T01:41:35.567

我认为问题出在 MyStringDerived.h 的第 2 行。当您应该包含 MyString.h 时，您正在包含 MyString.cpp

[更新]

按照您的编码方式，MyString.cpp 的所有定义都被编译到 MyString.obj 文件中——这很好，也应该如此。不幸的是，由于您的#include，MyString.cpp 的所有定义也出现在 MyDerivedString.obj 中

要真正理解为什么这是一个问题，您需要花一些时间来研究声明和定义之间的区别——只需谷歌“c++ 声明与定义”即可。这是一篇可能会有所帮助的文章。[http://www.cprogramming.com/declare_vs_define.html](http://www.cprogramming.com/declare_vs_define.html)

任何“声明”的内容都可以一次又一次地包含在程序中而不会造成任何损害。任何已定义的内容必须在链接到应用程序的所有对象文件中出现一次且仅出现一次。

这导致以下一般准则：

头文件 (.h) 只能包含声明。它不能包含任何定义。只有 .cpp 文件可以包含定义。然后你必须确保永远不要#include .cpp 文件。这是确保您在链接时永远不会有重复定义的最简单方法。

# objective-c - 如何更改 WebView 的网页位置？操作系统

> ID：12984436
> 
> 赞同：3
> 
> 时间：2012-10-20T01:22:30.917
> 
> 标签：objective-c, macos, cocoa, webview, webkit

假设我有一个加载 twitter.com 的 WebView。
这是我的 WebView 中显示的内容： ![在此处输入图像描述](../Images/3adadeb2c6b43b4361698289abb940b0.png)

这就是我想要展示的： ![在此处输入图像描述](../Images/2201af18603bfbddcb5535fee11c996c.png)

如何更改 WebView 上网站的默认左上角位置以显示同一网站的另一个位置？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-28T00:45:08.800

我使用它来移动它（你需要设置 frameLoadDelegate）：

```
-(void)webView:(WebView *)sender didFinishLoadForFrame:(WebFrame *)frame
{

    if (frame == self.myWebview.mainFrame)
    {
        DOMDocument *mainDoc = [self.myWebview.mainFrame DOMDocument];
        DOMNodeList *list = [mainDoc getElementsByClassName:@"front-signin js-front-signin"];
        DOMNode *loginElement = [list item:0];
        NSRect myRect = loginElement.boundingBox;
        [self.myWebview stringByEvaluatingJavaScriptFromString:[NSString stringWithFormat:@"window.scrollTo(%d,%d);", (int)myRect.origin.x, (int)myRect.origin.y]];
    }
} 
```

“front-signin js-front-signin”是 www.twitter.com 的源 html 中使用的类的名称。

因此，依赖随时可能发生变化的东西很容易失败。

在这种情况下，标题也不会移动。所以要么考虑它并显示它，要么将你的视图向上移动到这个标题的大小并隐藏它。

您需要调整 scrollTo 调用以使其在您的视图中居中。

而且您可能要考虑在视图加载后淡化视图，因为滚动有点生涩，而且不太像 osx。

但除此之外，它可以工作;-)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T18:43:03.473

您可以在 UIWebView 中执行 javascript：

```
[webView stringByEvaluatingJavaScriptFromString:@"window.pageYOffset=200;"]; 
```

这应该将窗口向下滚动 200 像素。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-24T19:28:06.603

您可以在 OS X 上使用以下内容：

> `[webView stringByEvaluatingJavaScriptFromString:[NSString stringWithFormat:@"window.scrollTo(%f, %f)", xPos, yPos]];`

* * *

## 回答 #4

> 赞同：-3
> 
> 时间：2012-10-26T14:04:16.283

您还可以使用 webview 的 scrollView contentOffset。

```
UIWebView * webView = [[UIwebView alloc] initWithFrame:CGRectMake(0, 0, 100, 100)];
[webView loadRequest:[NSURLRequest requestWithURL:[NSURL URLWithString:@"http://www.twitter.com"]]];
[webView.scrollView setContentOffset:CGPointMake(50, 60)];
[webView release]; 
```

# matlab - 在 MATLAB 中显示不同大小的图像

> ID：12984439
> 
> 赞同：8
> 
> 时间：2012-10-20T01:22:49.370
> 
> 标签：matlab, image-processing, resize, plot, gaussian

我在 MATLAB 2010b 中创建高斯金字塔。我想显示与[此处](http://www.cs.technion.ac.il/~ronrubin/Projects/fusion/images/gausspyr.jpg)提到的相同图案的图像。

我尝试使用`imresize`，`truesize`但让所有图像都具有相同的大小。有人可以帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-20T02:53:22.580

您可以使用“imshow with True Size for multiple images” [FEX 文件](http://www.mathworks.com/matlabcentral/fileexchange/32094-imshow-with-true-size-for-multiple-images)来回答您的问题...

**编辑：**下面的代码将在图的右下角产生子图：

```
clear imagesCellArray
mand = imread('mandelbrot_set.jpg'); % read image
dim = 3;

[imagesCellArray{1:dim,1:dim}] = deal(mand); % create smaller images by imresize
 for iRow = 1:dim
    for iCol = 1:dim
       imagesCellArray{iRow,iCol} = imresize(imagesCellArray{iRow,iCol},1/(1.5*(iCol*iRow)));
    end
 end

 % plot with imshowTruesize - true aspect ratio is preserved
 margins = [25 25];
 Handles = imshowTruesize(imagesCellArray,margins);
 for iRow = 1:dim
    for iCol = 1:dim
       axis(Handles.hSubplot(iRow,iCol),'on')
    end
 end 
```

![在此处输入图像描述](../Images/cb3f8b6056dbe6977f8ffc551f48860b.png)

# mongodb - 如何从用户评论中动态生成 slug？

> ID：12984440
> 
> 赞同：1
> 
> 时间：2012-10-20T01:23:01.257
> 
> 标签：mongodb, slug, doctrine-odm

我正在阅读 Mongo 网站上的一篇文章，他们提到在每个用户评论中添加一个 slug。 [http://docs.mongodb.org/manual/use-cases/storing-comments/](http://docs.mongodb.org/manual/use-cases/storing-comments/)

我坚持的是如何动态生成 slug？

有小费吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-20T10:52:23.777

您可以在您的评论创建区域内执行此操作，该区域称为`before_save`. 这基本上是在您获得评论信息但尚未保存之后发生的事件。

这个 slug 只是一个唯一标识符，您不必使用他们提供的标识符，事实上他们提供的标识符可能不是最适合存储的，因此他们使用日期和时间以及最后的一点来使其唯一。

我个人从当前和以前文档的 _ids 中制作了一个 slug，然后用 分隔`/`，它工作和排序很好，也很容易使用预先固定的正则表达式，因为它只是`OjectId`所需的较少猜测工作的字符串表示。

# objective-c - 检查两个 NSString 是否相似

> ID：12984442
> 
> 赞同：4
> 
> 时间：2012-10-20T01:23:33.787
> 
> 标签：objective-c, ios, nsstring, compare, similarity

我提出了一个棘手的问题，我不确定如何解决。因此，我制定了一个包含字典的 plist，其中包含两个对象：

*   国家名称
*   国家插头尺寸

不过，只有 210 个国家/地区/事实。

而且，我已经启用了搜索许多国家的列表，其中可能存在或不存在事实。但这是我的问题，我正在使用一个名为 Geonames 的网络服务，用户可以使用搜索栏显示控制器来搜索国家，而这些与插头尺寸配对的 plist 国家名称实际上来自 Wikipedia 文章。

现在，Geonames 中的国家名称和我在 Wikipedia 的 plist 中的名称可能略有不同，可能带有额外的空格、额外的破折号、额外的字母。这就是为什么我想查看地理名称国家字符串是否与 plist 中的字符串非常相似。

所以，这不会是`isEqualToString:`因为如果它是准确的，该`compare:`方法可以工作吗？

我该如何处理？这是一个例子：

Geoname 返回（不是一个真实的国家，只是一个例子）：

*   依婷

但是 plist 可能会返回：

*   依婷

所以有1个额外的't'，但还有其他情况。我希望将它们进行比较，或者至少相似，因此我可以将它们视为匹配项。

是否有任何教程、资源、项目等您可以指点我？

谢谢！再见！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-20T02:01:34.970

[Soundex](http://en.wikipedia.org/wiki/Soundex)算法在这种情况下很有用。

我在 github 上找到了一个[示例实现。](https://gist.github.com/1261842)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-20T01:47:00.533

You may find [this post about auto update/complete](https://stackoverflow.com/questions/11944553/custom-list-of-auto-complete-options-in-ios-using-monotouch) useful:

I've tested that `UITextView`s work well while adhering to the `UITextViewDelegate` protocol in your UIViewController class and will produce a result similar to what you'll find in the Messages app. I haven't checked if `UITextField` and `UITextFieldDelegate` do as well.

![Autocomplete/Autocorrect](../Images/b8c149bae13bdd1ee444c6964197429e.png)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-20T01:30:49.977

您需要实现一种算法来近似匹配字符串。最流行的此类算法之一是[*Levenshtein distance*](http://en.wikipedia.org/wiki/Levenshtein_distance)，它是几种[*编辑距离*](http://en.wikipedia.org/wiki/Edit_distance)算法之一。距离计算为将字符串 A 转换为字符串 B 所需的编辑操作次数 - 插入、删除或更改字符计为一次编辑操作。字符串越近，它们之间的编辑距离就越小。您可以计算成对编辑距离，并找到最小的一个来识别匹配。

# android - 随机“红色 x”警告，但未提供任何信息。我应该从哪里开始？

> ID：12984443
> 
> 赞同：0
> 
> 时间：2012-10-20T01:23:35.597
> 
> 标签：android, eclipse, android-activity

我是新人，如果这听起来很愚蠢，我深表歉意。

我正在使用最新版本的 Eclipse，并且有一个“Android 项目”正在运行。我的一个文件夹上有一个小红色 x。通常一个“流行音乐”会告诉我出了什么问题，但这个什么也没说。当我打开 activity_main.xml （在文件夹内，我看不到任何问题）。这是故障还是正常？

我不知道从哪里开始让它消失。

我是如何到达那里的；

我在“res”下创建了一个新文件夹。我正在关注一本书，它说将其称为 Layout Land 并在其中启动另一个 activity_main.xml。一切都很好，但 x 在文件夹上方。

任何信息都会有所帮助。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-20T01:27:50.243

转到窗口-> 显示视图-> 问题。然后你应该有一个窗口，你可以在其中阅读问题所在。

# iphone - 延迟后使用选择器的多项操作

> ID：12984444
> 
> 赞同：0
> 
> 时间：2012-10-20T01:23:48.710
> 
> 标签：iphone, ios, xcode, sdk

有没有办法分别使用： performSelector:withObject:afterDelay 代码执行多个操作？示例代码将不胜感激，在此先感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T02:47:43.420

或者使用块。如果您开始键入`dispatch_after`，您将看到代码完成，该代码将弹出以下代码片段，然后您可以在该块中放置任何您想要的操作。在这个例子中，我展示了它在一个内部使用`IBAction`：

```
- (IBAction)pushedSomeButton:(id)sender
{
    // anything you want to do immediate, do here

    [self doingSomethingRightNow];

    // anything you want to defer for some time, do inside the dispatch_after block
    // in this example, calling callAnotherMethod and whyNotCallAnotherMethod

    int64_t delayInSeconds = 2.0;
    dispatch_time_t popTime = dispatch_time(DISPATCH_TIME_NOW, delayInSeconds * NSEC_PER_SEC);
    dispatch_after(popTime, dispatch_get_main_queue(), ^(void){
        [self callAnotherMethod];
        [self whyNotCallAnotherMethod];
    });
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-20T01:58:16.877

设置一个使用 performSelector:withObject:afterDelay: 调用触发的方法：

```
-(void)performTheseAction {
    // do something
    // do something else
    [self callAnotherMethod];
    [self whyNotCallAnotherMethod];
} 
```

# ruby-on-rails - Ruby 中通过 MassiveRecord 的 HBase 导致中止

> ID：12984445
> 
> 赞同：2
> 
> 时间：2012-10-20T01:24:00.887
> 
> 标签：ruby-on-rails, ruby, hbase, thrift

当使用[MassiveRecord](https://github.com/CompanyBook/massive_record)而不是 thrift 将记录保存到 HBase 时，我收到一个奇怪的“中止”错误。

这里有一些代码将在 Mac OS X 上重现错误，通过自制软件安装 hbase（0.92.0 和 0.94.0）。

```
require 'massive_record'

MassiveRecord::ORM::Base.connection_configuration = { :host => 'hbase' }
class Woot < MassiveRecord::ORM::Table
  default_scope select(:data)
  column_family :data do
    field :name, :string
  end
end

woot = Woot.new( :name => 'rawr' )
woot.save 
```

这总是会导致进程停止，留下消息

```
[1]    8756 abort      ruby massive_woot.rb 
```

检索工作正常，但我似乎无法保存记录。

这是架构的样子：

```
>> describe 'woots'
DESCRIPTION                                                                                                          ENABLED                                                         
 {NAME => 'woots', FAMILIES => [{NAME => 'data', BLOOMFILTER => 'NONE', REPLICATION_SCOPE => '0', VERSIONS => '3', C true                                                            
 OMPRESSION => 'NONE', MIN_VERSIONS => '0', TTL => '2147483647', BLOCKSIZE => '65536', IN_MEMORY => 'false', BLOCKCA                                                                 
 CHE => 'true'}]}                                                                                                                                                                    
1 row(s) in 0.0190 seconds 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T22:53:35.050

原来这是一个版本控制问题。MassiveRecord v0.2.2 依赖于 thrift 0.6.0（由 Gemfile 中的“= 0.6.0”版本指定）。

我现在通过从 github 拉出 MassiveRecord 的“开发”分支来解决这个问题。

# ruby-on-rails - ActionMailer 中的 :domain、:user_name 和 :password

> ID：12984447
> 
> 赞同：1
> 
> 时间：2012-10-20T01:24:26.620
> 
> 标签：ruby-on-rails, ruby-on-rails-3, email, gmail

```
ActionMailer::Base.smtp_settings = {
  :address              => "smtp.gmail.com",
  :port                 => 587,
  :domain               => ???,
  :user_name            => ???,
  :password             => ???,
  :authentication       => "plain",
  :enable_starttls_auto => true
} 
```

我正在尝试在 Rails 中使用[Action Mailer](http://railscasts.com/episodes/206-action-mailer-in-rails-3)向用户发送电子邮件。我不太明白应该进入`:domain`,`:user_name`和`:password`. 应该是`gmail.com`，我的 Gmail 用户名和我的 Gmail 密码吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T02:31:50.053

下面是一个设置 ActionMailer 以使用 GMAil 发送邮件的示例：

```
config.action_mailer.delivery_method = :smtp
config.action_mailer.smtp_settings = {
  :address => "smtp.gmail.com",
  :port => 587,
  :domain => 'gmail.com',
  :user_name => 'my_user_name@gmail.com',
  :password => 'my_gmail_password',
  :authentication => 'plain',
  :enable_start_tts_auto => true
} 
```

域应为“gmail.com”，用户名和密码应为您的 Google 帐户。为了更好地保护您的主 GMail 帐户，您应该设置一个单独的 GMail 帐户，仅用于发送电子邮件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-20T01:29:37.953

我认为您不需要指定域，但是是的，用户名和密码必须是发件人电子邮件的相应用户名/密码

# php - 使用 $_POST 检索记录

> ID：12984448
> 
> 赞同：0
> 
> 时间：2012-10-20T01:24:27.537
> 
> 标签：php

我有一点问题。我有一个导航栏

```
|  home  |  view  |  view(active)  |  view(deleted)  | 
```

当我点击查看时，我会被带到`view.php`仅检索所有数据库记录的位置：

```
SELECT * FROM inventory 
```

在我的库存表中，我有一个名为的列`status`，其值为`y`or `n`。（`y`对于活动，`n`对于不活动（或已删除））。

当我单击`view(active)`和`view(deleted)`链接时，我想执行不同的查询，例如：

```
SELECT * FROM inventory WHERE status LIKE 'y' (for retrieval of active records)  
SELECT * FROM inventory WHERE status LIKE 'n' (for retrieval of deleted records) 
```

如果我附加`?view=y`到我的`view.ph`p 链接的末尾，它工作正常。我的表单的表单操作引用自身（`view.php`），除了附加的视图类型：`?view=y`或者`?view=n`然后有条件确定要执行的 mysql 查询。但是，我想用 POST 处理这种情况，但它不起作用。我不希望我的 URL 中有任何值。`$_GET`虽然工作得很好。

谢谢。

**CODE（用于查询的 view.php 条件）**

```
 if ($_POST['view'] == "y") {
        $result = mysql_query("SELECT * FROM inventory WHERE status LIKE 'y'"); }
    else if ($_POST['view'] == "n")  {
        $result = mysql_query("SELECT * FROM inventory WHERE status LIKE 'n'"); }
    else if ($_POST['submit'] == "search") {
        $result = mysql_query("SELECT * FROM inventory WHERE descrip LIKE '%$searchString%'"); }
    else {
        $result = mysql_query("SELECT * FROM inventory"); } 
```

**CODE（我的导航栏）**

```
<div id="navigation">
    <a href="add.php"><input type="button" value="ADD" /></a>
    <a href="view.php"><input type="button" value="VIEW" /></a>
    <a href="view.php?view=y"><input type="button" value="view active" /></a>
    <a href="view.php?view=n"><input type="button" value="view deleted" /></a>
    <div><br />
        <form action="view.php" method="POST">
            <input type="text" name="searchDescription" id="search" placeholder="search for text in description" value="<?php echo $_POST['searchDescription']; ?>"/>
            <input type="submit" value="SEARCH" name="submit" id="searchDescriptionButton" />
        </form>
    </div>
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-20T01:34:06.840

如果你正在做一个 POST 也没关系，如果你传递的值是请求页面的 URL 的一部分，那么它将在 $_GET 中。

一种快速/肮脏/糟糕的解决方法是简单地使用 $_REQUEST，它是 _GET 和 _POST 的组合，但不建议这样做，因为无法保证您的 PHP 是如何配置的以及哪种方法将优先。例如有

```
<form action="example.php?somevar=value" method="post">
   <input type="submit" name="somevar" value="othervalue" />
</form> 
```

不确定，具体取决于您的 PHP 安装`variable_order`设置。

请注意，这`somefield LIKE 'someconstantvalue'`有点毫无意义，完全等同于`somefield='someconstantvalue'`. LIKE 用于通配符搜索，通常应该与常量值比较混合使用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-20T01:36:17.173

您可以使用隐藏的输入类型将 POST 参数传递给您的 php 脚本。有很多更优雅的解决方案，但这里有一个需要最少代码更改的解决方案。

添加`<input type="hidden" name="view" id="viewvalue">`您的表单，并让您的按钮调用一个 javascript 函数，该函数将值设置为`y`or`n`并提交表单。

```
<script>
function setView(wanted)
{
   document.getElementById("viewvalue").value = wanted;
   document.getElementById("viewform").submit();
}
</script> 
```

请注意，此函数假定您已将 id 指定给`viewform`表单。

然后将按钮中的链接更改`a href`为`javascript:setView('y')`and `javascript:setView('n)`，您应该已设置好。

编辑：因为你不能使用 javascript，所以它应该是这样的

```
<div id="navigation">
<a href="add.php"><input type="button" value="ADD" /></a>
<a href="view.php"><input type="button" value="VIEW" /></a>
<form name="viewactiveform" action="view.php" method="POST">
    <input type="hidden" name="view" value="y">
    <input type="submit" value="view active" />
</form>
<form name="viewdeletedform" action="view.php" method="POST">
    <input type="hidden" name="view" value="n">
    <input type="submit" value="view deleted" />
</form>
<div><br />
    <form action="view.php" method="POST">
        <input type="text" name="searchDescription" id="search" placeholder="search for text in description" value="<?php echo $_POST['searchDescription']; ?>"/>
        <input type="submit" value="SEARCH" name="submit" id="searchDescriptionButton" />
    </form>
</div> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-20T01:32:25.590

您可以这样做 - 您可以为此目的在页面中添加一个表单，并使用隐藏字段来存储帖子值 (y, n)

```
<form name="gotoview" action="view.php" method="POST">
  <input type="hidden" name="view" id="view" value="" />
</form> 
```

您的链接应该张贴表格

```
<a href="#" onclick="document.forms['gotoview'].view='n';document.forms['gotoview'].submit();">View discontinued</a> 
```

使用 JavaScript 填充隐藏字段，然后将表单发布到操作中的 url。

# android - Android 移动设备的下拉菜单（尤其是 ICS）

> ID：12984453
> 
> 赞同：-1
> 
> 时间：2012-10-20T01:25:15.277
> 
> 标签：android, css, drop-down-menu, android-4.0-ice-cream-sandwich

我不是 Android 开发人员，我只是在创建一个带有下拉菜单的网站。现在有人告诉我，这个网站也必须与移动设备兼容。我使用 Wordpress 创建这个网站，当我为我的菜单使用小部件时，它在 Android 设备上不起作用。我只使用 CSS 创建了一个新的下拉菜单，并在我的 2 台 Android 设备上再次对其进行了测试。菜单有 2 个级别。当第 1 级悬停时（我知道悬停根本不适合移动设备）第 2 级通常会显示。两个级别的菜单项在单击时都链接到网站的子页面。

在我的带有 Gingerbread 的三星 Galaxy S2 上，CSS 菜单运行良好，但并不完美。当第 1 级（例如“水果”被点击时，“水果”页面打开但子项（例如“苹果”和“香蕉”）被显示。如果“苹果”或“香蕉”被点击，相应的页面被调用. 唯一的问题是：如果我已经在“水果”页面上，然后我再次点击菜单中的“水果”，什么也没有发生。这根本不好，但对我来说没关系。

不幸的是，我的 Asus Transformer Prime 平板电脑上的冰淇淋三明治菜单确实有问题。当我单击 1 级菜单项时，会显示该项目的页面，但无法单击子菜单。它在页面加载时仅显示一秒钟。因此，无法在此设备上访问网站的子页面。

我希望我能清楚地描述我的问题，无论我没有 Android 知识，我的英语是否完美。请让我知道我是否应该提供任何 CSS 或 HTML 代码或其他任何内容。感谢您的任何建议和帮助！

这是我的 PHP、HTML 和 CSS 代码：

PHP：

```
 <div id="menu" role="navigation">
        <?php wp_nav_menu(array('sort_column' => 'menu_order', 'menu' => 'Categories', 'container_class' => 'main-menu-class',
                                'container_id' => 'main-menu-id', 'theme_location'  => 'header', 'show_home' => true)); ?>
    </div> <!-- menu --> 
```

HTML（由 PHP 生成）：

```
<div id="menu" role="navigation">
<div class="menu">
<ul>
<li class="current_page_item">
<a title="Home" href="http://whatever.com/wordpress/">Home</a>
</li>
<li class="page_item page-item-40">
<a href="http://whatever.com/wordpress/?page_id=40">Cupcake Ipsum</a>
<ul class="children">
<li class="page_item page-item-388">
<a href="http://whatever.com/wordpress/?page_id=388">Red Velvet Cupcake</a>
</li>
<li class="page_item page-item-390">
<a href="http://whatever.com/wordpress/?page_id=390">Mango Cupcake</a>
</li>
<li class="page_item page-item-392">
<a href="http://whatever.com/wordpress/?page_id=392">Chocolate Cupcake</a>
</li>
</ul>
</li>
<li class="page_item page-item-43">
<a href="http://whatever.com/wordpress/?page_id=43">Bacon Ipsum</a>
<ul class="children">
<li class="page_item page-item-405">
</ul>
</li>
<li class="page_item page-item-45">
<a href="http://whatever.com/wordpress/?page_id=45">Veggie Ipsum</a>
<ul class="children">
<li class="page_item page-item-397">
<a href="http://whatever.com/wordpress/?page_id=397">Tomato</a>
</li>
<li class="page_item page-item-399">
<a href="http://whatever.com/wordpress/?page_id=399">Lettuce</a>
</li>
<li class="page_item page-item-401">
<a href="http://whatever.com/wordpress/?page_id=401">Broccoli</a>
</li>
<li class="page_item page-item-403">
<a href="http://whatever.com/wordpress/?page_id=403">Onion</a>
</li>
</ul>
</li>
</ul>
</div>
</div> 
```

CSS：

```
.menu {
background-color: #0B5A7D;
display: inline-block;
position: relative; }

#menu .menu-header ul,
div.menu ul {
list-style-type: none;
width: 921px;
margin: 0;
padding: 0; }

#menu ul li a {
text-decoration: none;
color: #CCCCCC;
font-size: 16px;
padding: 10px;
display: block;
position:relative; }

#menu ul li:hover a {
background-color: #006699; }

#menu ul li ul li a:hover {
color: #0B5A7D;
font-weight: bold;
background-color: #89b4ca; }

#menu ul li ul li a {
clear: left;
line-break: strict;
background-color: #006699;
padding: 5px;
font-size: 12px; }

.menu ul li {
display: inline-block;
position: relative;
border-left: solid 1px #006699; }

#menu ul li ul li {
display: block;
float: none;
clear: left;
width: 200px;
border: none;
background-color: #006699; }

.menu li ul {
position: absolute; }

.menu li:not(:hover) ul {
display: none; } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T15:15:34.697

这是我创建的一个小脚本，用于将普通菜单转换为选择下拉菜单，然后我相信我使用媒体查询来切换菜单。可能很快就会使它成为一个更灵活的插件。

[http://imstillreallybored.com/2012/jquery-snippet-for-mobile-menu/](http://imstillreallybored.com/2012/jquery-snippet-for-mobile-menu/)

# java - Android动画错误不会让我在动画向右移动后点击

> ID：12984454
> 
> 赞同：0
> 
> 时间：2012-10-20T01:25:51.897
> 
> 标签：java, android

那么，这是我的问题吗？我有它会滑出的地方，然后它会停留在那个位置，然后你应该能够再次点击它，它会滑回原来的位置。

但相反，我必须点击它 FIRST 所在的位置。即使它滑出。我想在动画之后制作它，我可以在任何地方单击它，它会滑出。

这是我的代码

```
 public void sideBar()
   {

       ImageView sidebar = (ImageView)findViewById(R.id.sidebar);

       if(out == 0)
       {
       mSlideInRight = AnimationUtils.loadAnimation(this, R.anim.slide_in_right);
       mSlideInRight.setFillAfter(true);
       sidebar.startAnimation(mSlideInRight);
       out= 1;
       }
       else if(out == 1)
       {
               mSlideInLeft = AnimationUtils.loadAnimation(this, R.anim.slide_in_left);
               sidebar.startAnimation(mSlideInLeft);
               out=0;
       }

   } 
```

这是您单击它时的代码

```
public void onClick(View v) {
        ImageView sidebar = (ImageView)findViewById(R.id.sidebar);
         ImageView popup = (ImageView)findViewById(R.id.popup);
         ImageView popup2 = (ImageView)findViewById(R.id.popup2);

        switch(v.getId())
        {           
            case R.id.sidebar:
                sideBar();
            break;
        }

    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T00:42:56.390

动画仅影响侧边栏`ImageView`的绘制方式，而不影响其实际位置。动画完成后，您应该将侧边栏的布局参数更新到您想要的位置。如果您`AnimationListener`希望在动画运行时或完成后更新位置，或者`startAnimation`如果您希望在动画开始时发生位置更改，则可以在调用后立即执行此操作。

```
mSlideInRight.setAnimationListener(new AnimationListener() {
    @Override
    public void onAnimationStart(Animation anim) {};

    @Override
    public void onAnimationRepeat(Animation anim) {};

    @Override
    public void onAnimationEnd(Animation anim) {
        RelativeLayout.LayoutParams layoutParams = new RelativeLayout.LayoutParams(...);
        // Set properties of layoutParams here
        sidebar.setLayoutParams(layoutParams);
    };
}); 
```

替换`RelativeLayout`为您的 ImageView 是子级的任何布局。

# c++ - 启动画面上的图像 C++ (Windows)

> ID：12984466
> 
> 赞同：0
> 
> 时间：2012-10-20T01:27:56.703
> 
> 标签：c++, visual-studio, image-formats

哪种图像格式可以让我的应用程序启动更快，BMP 还是 JPG？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-20T01:31:17.220

大部分时间都通过磁盘活动来加载图像。那么对于这个JPEG可以更小，因此更快。但是，对于演示文稿，需要像素值，而 BMP（如果未压缩）则直接具有这些值，而 JPEG 则需要解包。我怀疑那些时间之间至少存在一个数量级的差异，因此磁盘访问时间完全超过了拆包/呈现时间。

也就是说，

*   无论如何，这个时间可能太快了，用户将看不到任何差异，并且

*   如果您想要的不仅仅是预感和直觉（即使基于经验），请**测量！**.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-20T01:30:41.837

JPG - 越小越好。为什么？因为它更小，解压发生在内存中（比硬盘快）。BMP 文件要大得多，而且未压缩。

另一方面，如果 CPU 速度很慢，而磁盘速度非常快。BMP 将是一个更好的选择。这也取决于 BMP 的类型（每像素 16/24/32 位）和 JPEG 的质量。因为很难猜测图像文件的大小或提问者计算机的速度。很难准确回答。这两个条件似乎都成立。

测量是前进的唯一途径。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-20T01:39:20.873

硬盘读取大块存储，所以如果速度慢的话会影响jpg和bmp，所以尽量使用小bmp，避免解压，避免读取两个存储块。或者使用一张适合一大块的 jpg 文件，解压缩后会给你更多的 bmp 等效图像大小。

# c# - 在 Windows 8/Bing 地图应用程序中绘制地理坐标

> ID：12984467
> 
> 赞同：2
> 
> 时间：2012-10-20T01:28:09.977
> 
> 标签：c#, windows-8, geocoding, bing-maps

我正在使用 Bing 地图制作 C#/XAML Windows 8 应用程序。我正在复制一堆 Windows Phone 7 代码，而我在简单地绘制地理坐标时遇到了问题。这是 WP7 代码：

```
GeoCoordinate mapCenter = new GeoCoordinate(37.784, -122.408);
map1.Center = mapCenter; 
```

但是，当我尝试在 Win 8 中实例化 mapCenter 时（并且我确实使用了小写的 Geocoordinate 而不是 GeoCoordinate），我收到一条错误消息，指出“Windows.Devices.Geolocation.Geocoordinate 不包含采用 2 个参数的构造函数”。

我有点难过，因为我计划使用 Geocoordinates 相当多，而且我不确定如何弄清楚 Geocoordinate 构造函数究竟需要什么。

谢谢，

阿曼达

编辑以修复代码缩进

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-20T01:35:40.720

该类`Windows.Devices.Geolocation.Geocoordinate`不能直接实例化。另外，请记住，您使用的命名空间专门用于从设备中检索位置数据。

首先，您需要获取`Geoposition`via的实例[`Geolocator.GetGeopositionAsync`](http://msdn.microsoft.com/en-us/library/windows/apps/br225537.aspx)。

然后，您可以`Geocoordinate`从`Geoposition.Coordinate`.

如果您希望简单地将地图集中在给定的纬度和经度上（并且您正在使用 Bing Maps for Windows Store Apps SDK），那么看起来您应该使用[`Location`](http://msdn.microsoft.com/en-us/library/hh846500.aspx)该类（与[`Map.Center`](http://msdn.microsoft.com/en-us/library/hh846504.aspx)type一样`Location`）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T16:18:44.603

你的代码和你的错误输出说的是两件不同的事情。我遇到了同样的问题，请确保您在代码中使用 GeoCoordianate 中的大写 C。地理坐标中的小写 C 用于获取手机位置。

> Map 控件的 Center 属性需要 System.Device.Location 命名空间中的 GeoCoordinate 类型的值。如果您使用 Windows.Devices.Geolocation 命名空间中的定位服务，则必须将 Windows.Devices.Geolocation.Geocoordinate 值转换为 System.Device.Location.GeoCoordinate 值，以便与 Map 控件一起使用。

通过下载 Windows Phone 工具包，您可以获得一种扩展方法来执行此转换，以及 Maps API 的其他有用扩展。如果您想编写自己的代码，下面是一个可用于将 Geocoordinate 转换为 >GeoCoordinate 的方法示例：

来自[http://msdn.microsoft.com/en-US/library/windowsphone/develop/jj207045(v=vs.105).aspx#BKMK_converting](http://msdn.microsoft.com/en-US/library/windowsphone/develop/jj207045(v=vs.105).aspx#BKMK_converting)

# python - 我已经解决了相关的 SO 问题，但我仍然遇到问题。如何使用 pyinstaller 将带有图像的程序打包到一个文件中？

> ID：12984472
> 
> 赞同：1
> 
> 时间：2012-10-20T01:30:08.733
> 
> 标签：python, pyinstaller

我用谷歌搜索了我的问题，它把我带到了这里：[Bundling data files with PyInstaller (--onefile)](https://stackoverflow.com/questions/7674790/bundling-data-files-with-pyinstaller-onefile)

所以我添加了接受的答案的代码，

```
def resource_path(relative):
    return os.path.join(
        os.environ.get(
            "_MEIPASS2",
            os.path.abspath(".")
        ),
        relative
    )

# in development
>>> resource_path("app_icon.ico")
"/home/shish/src/my_app/app_icon.ico"

# in deployment
>>> resource_path("app_icon.ico")
"/tmp/_MEI34121/app_icon.ico" 
```

但我仍然收到`cannot locate imageName`错误消息。除了它列出了`_MEIPASS`文件夹之外。

有什么我想念的吗？

如果需要更多信息，请告诉我。就我而言，`pyinstaller`是黑魔法，所以我不确定什么是相关信息。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-05T06:27:04.480

我也被困在了这一步。然后我阅读了 pyinstaller.py 文件并以某种方式成功解决了它。通过添加 resource_path() 方法修改源文件后（正如您已经完成的那样），您必须执行以下步骤：

1.  跑：

    ```
    python utils\Makespec.py --onefile your_script_name.py 
    ```

2.  接下来从第一步创建的 your_script_name 文件夹中编辑 your_script_name.spec 文件。添加这些行（调整您的图像名称）

    ```
    a.datas +=  [('relative path from pyinstaller folder','actual path to image file','DATA')] 
    ```

    例如像这样，

    ```
    a.datas += [('calvin.jpg','C:\\projects\\python\\calvin.jpg','DATA')] 
    ```

    注意：当我将图像放在子文件夹中时，我无法使其工作，因此我将它们保存在 pyinstaller 文件夹本身中。

3.  然后最后运行这个：

    ```
    python pyinstaller.py your_script_name\your_script_name.spec 
    ```

    即使用您在第二步中编辑的 .spec 文件运行 pyinstaller。

希望这有助于消除您的所有疑虑:)

# android - Android的dex代码自动转换

> ID：12984473
> 
> 赞同：8
> 
> 时间：2012-10-20T01:30:20.150
> 
> 标签：android, dalvik, dex, smali

我想转换/检测 Dex 文件。转换的目标包括测量代码覆盖率。请注意，源文件不可用。所以检测 Dex 是唯一的选择。

我想知道是否有任何现有的代码库可以作为示例来编写工具来实现我的目标。

我知道 Smali 项目和许多其他基于 Smali 的项目。但是，这些项目都不是我的目的的好例子。

我正在寻找自动转换 smali 代码或 dexlib 表示的代码，从中生成 smali。出于我的目的，后一个选项是首选，因为可以避免生成 smali 的开销。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-20T16:00:49.300

代码很多，但是 dx 的[DexMerger](http://omapzoom.org/?p=platform/dalvik.git;a=blob;f=dx/src/com/android/dx/merge/DexMerger.java;hb=HEAD)是一个转换 dex 文件的示例程序。由于它需要猜测输出的大小才能使前向引用起作用，这使得它变得相当复杂。

您还需要创建基础架构来重写 dalvik 指令。DexMerger 的[InstructionTransformer](http://omapzoom.org/?p=platform/dalvik.git;a=blob;f=dx/src/com/android/dx/merge/InstructionTransformer.java;hb=HEAD)进行了浅层重写：它调整从一个映射到另一个映射的偏移量。要衡量代码覆盖率，您的指令重写可能需要更加复杂。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-18T05:16:46.877

最近可用的另一个选项是[Dexpler](http://www.bodden.de/2013/01/08/soot-android-instrumentation/)。它是 Soot 的扩展，Soot 是一个用于分析和检测 Java 程序的框架。Dexpler 读取 .apk 文件并转换为 Jimple 中间格式。然后可以任意检测 Jimple 代码，并最终将其转储到新的 apk 中。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-08-03T02:38:43.357

（为了记录，我在这里回答我自己的问题）

最终我没有找到任何适合我要求的工具。所以我最终基于 DexLib构建了自己的工具，称为[Ella 。](https://github.com/saswatanand/ella)开箱即用，它做了一些事情，例如测量代码覆盖率、记录方法跟踪等。但它可以很容易地扩展来进行其他类型的转换。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-20T17:28:01.600

在某些情况下，smali 本身在重新组装 dex 文件时会进行少量的指令重写。如果目标超出范围，则用 const-string/jumbo 替换 const-string 或用“更大”指令替换 goto 指令之类的事情。这涉及用可能更大的指令替换指令列表中的指令，并相应地修复偏移量。

[CodeItem.fixInstructions](https://code.google.com/p/smali/source/browse/dexlib/src/main/java/org/jf/dexlib/CodeItem.java?name=v1.4.0#426)是负责此的方法。

* * *

此外，还有[asmdex 库](http://asm.ow2.org/asmdex-index.html)。我对它不是很熟悉，但听起来它可能与你想做的事情有关。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-05T19:19:44.560

我知道这有点晚了，但以防万一您仍然感兴趣，或者可能对其他一些读者感兴趣。ASMDEX 已经提到过。我认为这是你目前最好的选择，因为你正在努力实现。

至于添加新寄存器，请查看 org.ow2.asmdex.util.RegisterShiftMethodAdapter 类。这并不完美！事实上，在添加寄存器时更改现有的 4 位指令是很可怕的，这意味着某些寄存器最终会变成 0xF 并且不适合 4 位。

但这应该是一个好的开始。

# c++ - 不需要 T 的`typedef T this_type`

> ID：12984479
> 
> 赞同：0
> 
> 时间：2012-10-20T01:31:47.183
> 
> 标签：c++, c++11, typedef

本质上，我需要知道当前的类，这样我才能制作执行以下操作的宏：

```
typedef boost::shared_ptr<MyClass> sptr;
typedef boost::shared_ptr<const MyClass> csptr;
//etc 
```

无需将 MyClass 作为宏的参数。我尝试过各种荒谬的事情，例如：

```
typedef decltype(*this) this_type; 
```

但当然它们不起作用。没有什么可以让我解决这个问题吗？我希望 C++11 能给我们一些东西，让我们一起破解。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-20T01:36:41.233

两件事：我不会因为必须重复类型而大惊小怪，而且我根本不会使用宏。您可以使用 CRTP：

```
template <typename T>
struct sp_typedefs {
    typedef std::shared_ptr<T> sptr;         // [*]
    typedef std::shared_ptr<const T> csptr;
}; 
```

然后在每种类型中使用继承将 typedef 带入您的类型：

```
class MyType : sp_typedefs<MyType>
{
   // ...
}; 
```

* * *

[*] 由于您已将问题标记为 C++11，因此您应该使用`std::shared_ptr`哪个是标准的，而不是`boost::shared_ptr`

# redis - 是否应该将“glob”样式模式保留为 STRING！还是有更聪明的方法？

> ID：12984480
> 
> 赞同：0
> 
> 时间：2012-10-20T01:32:00.710
> 
> 标签：redis, glob, rebol, dialect

我正在修改[Redis pub/sub](http://redis.io/topics/pubsub)的接口，它可以执行以下模式：

```
 PSUBSCRIBE news.jazz.figurative
 PSUBSCRIBE news.*
 PSUBSCRIBE n* 
```

尽管没有分隔符，Redis 还是接受这些作为字符串（由空格隐含）。当然，在 Rebol 中，这些将是 WORD！令牌。

绘制这些想法的第一个想法是使用 PATH 会很酷！因为它们具有结构并且可以通过编程方式构建和自省（计算路径中有多少元素，去掉最后一个元素等），而无需搜索点。它也没有更多的字符：

```
 PSUBSCRIBE news/jazz/figurative
 PSUBSCRIBE news/*
 PSUBSCRIBE n* 
```

不过，最后一个是诀窍。虽然您可以构建单元素 PATH！以编程方式（例如来自 BLOCK! like `to-path [n*]`），默认标记器会将最后一个标记器分类为 WORD！直接输入的时候。所以你必须让 PSUBSCRIBE 接受一个参数`[word! path!]`

```
PSUBSCRIBE: func ['pattern [word! path!]] [
    pattern: to-path pattern
    print [{The pattern you passed in was} mold pattern]

    insert pattern 'alt
    print [{Inserting at head of path yields} mold pattern]

    print [{The number of path elements is now} length? pattern]
] 
```

从某种意义上说，它“有效”：

```
>> psubscribe news/*
The pattern you passed in was news/*
Inserting at head of path yields alt/news/*
The number of path elements is now 3 
```

...但请注意，我必须将模式作为带引号的参数 ( `['pattern]`)。如果您想传递存储在变量中的模式，则引用意味着它会认为变量的名称*是实际的模式*：

```
>> mypattern: 'news.*

>> PSUBSCRIBE mypattern
The pattern you passed in was mypattern
Inserting at head of path yields alt/mypattern
The number of path elements is now 2 
```

基本上，如果我正在创建一种 REDIS 方言，我的想法不会是一个坏主意。我可能会试一试。但是现在我正试图让这些东西在 DO 方言中工作，并且我无法在不引用它们的情况下更改评估者的规则以赋予路径新的行为。

这就是我知道的部分，但我只是在记录。:) 现在的问题是：如果我坚持使用 DO 方言，我是否只使用 STRING！作为一个警察？调用必须涉及两种字符串分隔符中的任何一种：

```
 PSUBSCRIBE "news.jazz.figurative"
 PSUBSCRIBE {news.*}
 PSUBSCRIBE "n*" 
```

再说一次，有块！

```
 PSUBSCRIBE [news jazz figurative]
 PSUBSCRIBE [news *]
 PSUBSCRIBE [n*] 
```

这提供了一个结构层，因此它被分成几部分，而不必解析出点。然而，星星似乎可以出现在任何地方，而不仅仅是在层次结构中的某个位置。

也许我正在尝试将结构放在实际上*只是*一个字符串并且不能合理地建模为其他任何东西的东西上。是这样吗？如果是这样，我将链接到源中的这个问题作为决定的理由。:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T16:15:31.907

您可以通过文字参数传递引用：

```
mypattern: 'news/*
PSUBSCRIBE :mypattern 
```

在建模问题上，您的标记是否始终与 REBOL 的单词组合规则兼容？此外，如果没有`form`ing 单词，就无法检查星是否存在，所以它可能首先应该是字符串。与 .一起使用时，星号在字符串中确实有意义`find/any`。

# sql - 这可以在宏中运行吗？

> ID：12984481
> 
> 赞同：0
> 
> 时间：2012-10-20T01:32:21.007
> 
> 标签：sql, sas

我一直在尝试解决[问题](https://stackoverflow.com/questions/12924653/unable-to-run-call-execute-within-a-data-step)并使用不同的方法来解决它。我创建了一个宏来获取实际值。sql 使用我需要的值生成一个 HTML 视图。

```
 %macro actualvalue();

 proc sql noprint;

 %do i=1 %to %wordcount(&fieldlist);

 Select %scan(&fieldlist,&i) into :actualvar separated by ' ' FROM TableA Where        
 IncidentItemId=%scan(&incidentitemlist,&i);

 %end;

 quit;

 %mend actualvalue; 
```

但是，actualvar 宏变量似乎没有捕获该值。我尝试初始化宏变量的方式是否有问题，或者无法在宏内执行。对此的任何想法将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T08:41:42.173

我认为每次您的`do`循环运行时，它都会覆盖`actualvar`. 你需要使用类似的东西

```
select %scan(&fieldlist,&i) into :actualvar&i ... 
```

然后打印出`&actualvar1` `&actualvar2`etc... 的值以检查您的结果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-20T06:27:59.507

至少您需要将 PROC SQL 语句放在 DO 循环中，因为您的目标是多次运行 proc sql

```
%do i=1 %to %wordcount(&fieldlist);
    proc sql noprint;
    Select %scan(&fieldlist,&i) into :actualvar separated by ' ' FROM TableA 
    Where IncidentItemId=%scan(&incidentitemlist,&i);
%end; 
```

不过，我认为其他方面没有任何问题。给它一个测试并报告任何错误。我会相应地修改这个答案。

# soap - savon肥皂属性

> ID：12984482
> 
> 赞同：2
> 
> 时间：2012-10-20T01:32:23.557
> 
> 标签：soap, savon, netsuite

我正在尝试查询 netsuite api 的货币。以下肥皂请求适用于 SOAP UI 客户端。但是我很难尝试使用 ruby​​ 的 savon gem 版本 0.9.7 进行相同的工作。

```
<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:messages_2012_2.platform.webservices.netsuite.com" xmlns:urn1="urn:core_2012_2.platform.webservices.netsuite.com">
   <soapenv:Header>
      <urn:passport>
         <urn1:email>xxx@abc.com</urn1:email>
         <urn1:password>xxx</urn1:password>
         <urn1:account>xxx</urn1:account>
      </urn:passport>
   </soapenv:Header>
   <soapenv:Body>
      <urn:getAll>
         <urn:record recordType="currency"/>
      </urn:getAll>
   </soapenv:Body>
</soapenv:Envelope> 
```

基本上我无法在 urn:record 元素上设置属性。以下不起作用：

```
response = client.request :urn, :get_all do
  soap.body = { "urn:record" => { :attributes! => { "recordType" => "currency" } } }
end 
```

请指教。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-20T12:27:49.527

正如[http://savonrb.com](http://savonrb.com)上所解释的，散列中的键`attributes!`必须与 XML 标记匹配。你想写这样的东西：

```
response = client.request :urn, :get_all 做
  soap.body = {'urn:record'=>'',
               :attributes!=>{'urn:record'=>{'recordType'=>'currency'}}
              }
结尾

```

请让我们知道这是否能为您解决问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-20T01:42:40.897

仔细检查原始肥皂请求。:get_all 可能需要是 "getAll" 才能让 savon 从字面上理解；它可能会将其更改为`GetAll`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-07-21T09:01:35.647

在 savon 的新版本中，您可以将 :attributes 放置在操作标记的本地上下文中：

```
@interaction_client.call(:retrieve_interaction, message: message_hash, :attributes => {  'attachmentInfo' => include_attachments.to_s  }) 
```

在这种情况下，`attachmentInfo`属性将被放置在与操作链接的主操作标记中，在本例中，这将是`ns:RetrieveInteractionRequest`标记。

请注意，语法不包含感叹号。

# jquery - 如何在输入字段中选择选定的选项

> ID：12984490
> 
> 赞同：0
> 
> 时间：2012-10-20T01:33:11.607
> 
> 标签：jquery

不确定我是否可以正确地提出我的问题。
我有一个可以自定义的页面。所以它包含一堆单选按钮组、文本字段、复选框、下拉列表等。我希望通过单击按钮获得数组中每个选定/输入字段的所有名称和值。我目前有这个，它会给我所有的输入字段及其值。

```
$('#submit_btn').click(function(){
         var fields={};
        $(":input").each(function(){
             fields[this.name]=$(this).val();
           //  console.log("%s   - %s",this.name,$(this).val());
         }); 
```

所以说我想只包含被选中的单选的名称和值，而不是列出所有单选按钮。知道如何在 jQuery 中完成吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-20T01:35:34.980

尝试这个，

```
$('#submit_btn').click(function(){
   var fields={};
   $("input[type=radio]:checked").each(function(){
        fields[this.name]=$(this).val();
        //  console.log("%s   - %s",this.name,$(this).val());
   });
}); 
```

基于检查所有输入和应用检查收音机条件的评论。

```
$('#submit_btn').click(function(){
     var fields={};      
     $(":input").each(function(){
            if($(this).attr('type') == 'radio' && $(this).is(':checked')){            
                fields[this.name]=$(this).val();
            }
     });
}); 
```

# xpath - XPath/Scrapy 抓取格式怪异的页面

> ID：12984493
> 
> 赞同：1
> 
> 时间：2012-10-20T01:33:20.297
> 
> 标签：xpath, html-parsing, scrapy

我一直在玩scrapy，我发现xpath的知识对于成功利用scrapy至关重要。我有一个网页，我正在尝试从标签的格式中收集一些信息

```
<div id = "content">
  <h1></h1>
  <p></p>
  <p></p>
  <h1></h1>
  <p></p>
  <p></p> 
```

现在标题包含标题，第一个“p”包含 data1，第二个“p”包含 data2。这似乎是一个非常简单的任务，如果总是这样，我就没有问题，`hsx.select('//*[@id="content"]')`例如等等。

问题是，有时标题后面只有一个 p 标签，而不是两个。

```
<div id = "content">
  <h1></h1>
  <p></p> (a)
  <h1></h1>
  <p></p> (b)
  <p></p> (c) 
```

我想要的是，如果缺少段落标签，我想将该信息作为空白数据存储在我的列表中。现在发生的情况是列表存储第一个标题 1、第一个段落标记 (a)，然后是第二个 h1 (b) 下的段落标记。它应该做的是存储

```
title -> h1[0]
data1[0] -> (a)
data2[0] ->[] 
```

我希望这是有道理的。我一直在寻找一个好的 xpath 或 scrapy 解决方案来做到这一点，但我似乎找不到。任何有用的提示都会很棒。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-20T01:55:15.403

**使用**：

```
//div[@id='content']
     /h1[1]/following sibling::*
             [not(position()>2)][self::p] 
```

这将选择（最多）两个直接兄弟元素，前提是它们是any`p`的第一`h1`个子元素`div`（我们知道这必须只是一个`div) the string value of whose`id `attribute is`"content"`。

如果只有第一个直接兄弟是 a `p`，则返回的节点列表仅包含一个项目。

您可以检查返回的节点列表的长度是 1 还是 2，并使用它来构建对您的处理的控制。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-20T01:55:41.087

我想你会想要这样的东西；虽然不是 100% / 未经测试。

```
//h1/following-sibling::*[2][self::p]/text()|//h1[not(following-sibling::*[2][self::p])]/string('') 
```

# linux - 从 NodeJs 和 npm 彻底清理服务器

> ID：12984494
> 
> 赞同：2
> 
> 时间：2012-10-20T01:33:19.850
> 
> 标签：linux, node.js, web, uninstallation, npm

我已经将一个**nodejs**安装从升级`0.4.2`到了，`0.8.12`但是从那时起，我拥有的 js 服务器开始崩溃`seg fault`。由于我继承了这个应用程序，我不知道以前安装了什么以及如何维护它。`Npm`似乎只在本地安装，但我似乎无法正确称呼它。

这就是有关该问题的所有信息。我的问题是：

我可以完全删除`nodejs`，`npm`以便进行全新安装吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-20T08:11:29.253

更好的方法是安装 nvm 。 [https://github.com/creationix/nvm](https://github.com/creationix/nvm)

使用 nvm 安装不同版本的 node 。然后尝试不同的版本，比如 0.5 然后 0.6 并检查应用程序实际中断的版本。然后参考该版本中所做的关键更改并相应地修改您的代码。

这将是一个很好的软件实践。

# mysql - 单行友谊数据库模式，从一列或另一列获取用户 ID

> ID：12984497
> 
> 赞同：5
> 
> 时间：2012-10-20T01:34:38.353
> 
> 标签：mysql

我需要帮助从表中查询friendID。我的表存储了两个一起成为朋友的成员的用户 ID。

但是为了存储两个成员的“友谊”，我必须存储两个这样的记录：

```
friendshipID |  userID  |  friendID  
1            |  5       |  10
2            |  10      |   5 
```

然而，当我们真的只需要存储第一条记录时，这对数据库来说似乎很重，因为它包含两个成员的两个 id 就足够了。

但是，当我想查询ID=5的朋友的记录时，麻烦就来了。有时 ID 在 userID 列中，有时在friendID 列中。

这是我正在使用的查询：

```
SELECT *
FROM friends
WHERE userID = '5'
   OR friendID = '5' 
```

但我想做的是这样的

```
SELECT 
if $userID=5 then userID as myfriend
else friendID=5 then friendID as myfriend
FROM friends WHERE userID='5' OR myfriendID='5' 
```

希望这是有道理的。最后，我想拥有成员#5 的所有朋友 ID，而不是以 #5 作为朋友或用户的结果......而只是他的朋友。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-20T02:11:15.417

此查询将返回 #5 的朋友的 ID 值和名称，如此[**SQL Fiddle 示例所示**](http://sqlfiddle.com/#!2/0a08f/1/0)

```
SELECT f.FriendId AS FriendId
   , u.Name AS FriendName
FROM FriendTable AS f
INNER JOIN UserAccount AS u ON f.FriendId = u.UserId
WHERE f.UserId = 5

UNION

SELECT f.UserId AS FriendId
   , u.Name AS FriendName
FROM FriendTable AS f
INNER JOIN UserAccount AS u ON f.UserId = u.UserId
WHERE f.FriendId = 5 
```

将`UNION`删除重复项，使此查询既适用于单条朋友记录，也适用于您在评论中提到的 2 条记录友谊。不过，您不应该需要 2 条记录的友谊，因为没有新信息存储在第二条记录中，而只有一条记录是无法获得的。

# objective-c - 枚举/循环遍历 200 多个对象的数组很慢

> ID：12984498
> 
> 赞同：1
> 
> 时间：2012-10-20T01:35:04.750
> 
> 标签：objective-c, arrays, nsarray, nsdictionary, enumeration

在我实际测试它之前，我想知道这一点。

我有一个包含 210 个字典的 plist，在我的代码中，我`NSArray`通过该 plist 的内容来初始化一个。

在所有这些字典中，我需要枚举它们并检查一些东西：

```
for (NSDictionary *dict in largePlistArray) {

if ([[dict objectForKey: @"country"] isEqualToString: @"Cambodia"]) {

 NSLog (@"Random example!");

   }

 } 
```

假设带有“Cambodia”的字典是整个数组中的最后一个，枚举完整的 200 多个字典对象数组需要多长时间？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-20T01:47:02.170

The best way to tell is to try it out. However, `200` does not strike me as a particularly large or even as a marginally large number. Consider this: 1GHz CPU runs a billion elementary operations per second. Even if each lookup takes 100 elementary operations (in reality, it takes much fewer than that) a search of `200` items should complete in very short time, on the order of milliseconds.

# git - 如何防止root运行git pull？

> ID：12984499
> 
> 赞同：11
> 
> 时间：2012-10-20T01:35:08.287
> 
> 标签：git, permissions, githooks, git-pull, ownership

需要防止 root 更新 git（工作）目录。推理包括但不限于：防止不希望的文件系统所有权更改。

似乎没有一个 git 钩子在发生之前*阻止*提取/合并/拉取，类似于 pre-commit 钩子。或者至少，我在这里（或手册页）没有看到： [http ://www.analysisandsolutions.com/code/git-hooks-summary-cheat-sheet.htm](http://www.analysisandsolutions.com/code/git-hooks-summary-cheat-sheet.htm)

想法？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-20T21:19:59.023

更改`/root/.bashrc`以将新目录添加到`PATH`. 在那里添加一个 shell 脚本，称为`git`测试`$1`是几个只读命令之一（show/status/log/rev-list 等），并`/usr/bin/git "$@"`在命令可接受时调用。这将防止团队中的任何人意外`git pull`以 root 身份运行。如果您担心他们故意这样做，那么您的问题就更大了……

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-10-20T18:25:00.257

我看到这个问题没有解决但至少“缓解”的唯一方法是通过**git 命令的包装器**：

如果用户 id 不是 root，所有 git 命令都会通过这个包装器。

# iphone - 在 iPhone 上的 UIWebView 中显示文档目录中的本地 HTML 文件

> ID：12984502
> 
> 赞同：2
> 
> 时间：2012-10-20T01:35:51.587
> 
> 标签：iphone, html, objective-c, uiwebview, documents

如何在我的应用程序的 Documents 目录中显示 HTML 文件？下面是我正在使用的代码，我的`UIWebView`

```
NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
    NSString *documentsDirectory = [paths objectAtIndex:0];
    NSString *filePath = [NSString stringWithFormat:@"%@/%@", documentsDirectory, @"Notes.html"];

    NSURL *url = [NSURL URLWithString:filePath];
    NSURLRequest *request = [NSURLRequest requestWithURL:url];
    [notesListWeb loadRequest:request]; 
```

为什么这行不通？

我找到了其他答案，但它们不是来自文档目录。

非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-20T02:12:31.937

使用文件路径创建**NSURL对象的正确方法是：**

```
NSURL *url = [NSURL fileURLWithPath:filePath]; 
```

您还应该更改创建*filePath*的方式：

```
NSString *filePath = [documentsDirectory stringByAppendingPathComponent:@"Notes.html"]; 
```

还要记住，文件名在真实的 iOS 设备上是区分大小写的。文件真的命名为 Notes.html 和 notes.html 吗？

# php - ZF2 - 使用导航视图助手的多个导航菜单

> ID：12984508
> 
> 赞同：3
> 
> 时间：2012-10-20T01:36:55.110
> 
> 标签：php, navigation, zend-framework2, view-helpers

我正在尝试将主导航与子菜单结合使用以进行更具体的导航。

在我的*布局*中，我这样调用视图助手：

```
$this->navigation('main_navigation')->menu() 
```

在我*看来*，我这样称呼它：

```
$this->navigation('sub_navigation')->menu() 
```

问题是，每当我***不止一次***`navigation()`调用视图助手 a时，它只会在两个地方输出*第二个*。换句话说，它正在打印**主**导航*和**子*导航菜单的子导航。

 *****我的合并配置如下所示：

```
'navigation' => array(
    'main' => array(
        'home' => array(
            'label' => 'Home',
            'route' => 'myroute',
        ),
        'somepage' => array(
            'label' => 'Me',
            'route' => 'somepage'
        )
    ),
    'sub' => array(
        'test' => array(
            'label'  => 'Test',
            'route'  => 'myroute',
            'action' => 'test'
        ),
        'other-test' => array(
            'label'  => 'Other Test',
            'route'  => 'myroute',
            'action' => 'other-test'
        )
    )
) 
```

如何使用`navigation`视图助手以便为每次调用打印正确的菜单？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-21T09:54:27.093

、`menu`和助手注册`breadcrumbs`为插件。如果您是第一次调用，则会创建容器“main_navigation”。如果您第一次调用创建**对象**并**直接**注入容器。`sitemap``links``$this->navigation('main_navigation')``Zend\View\Helper\Navigation``menu()` **`Zend\View\Helper\Navigation\Menu`**

 ****这表明了缺陷：如果您`$this->navigation('sub_navigation')`现在调用，导航容器将加载到`navigation()`视图助手中。然后调用`menu()`时，菜单视图助手已经创建。因此不再注入新容器。

显然这是代码库中的一个错误。有一个快速解决方法：菜单助手也可以接受容器字符串：

```
<?php echo $this->navigation()->menu('main_navigation'); ?>
<?php echo $this->navigation()->menu('sub_navigation'); ?> 
```

我已经提交了一个关于它的问题，这个错误将被修复。*********

# javascript - Javascript 可在 Firefox 中运行，但不能在 IE、Chrome 或 Safari 中运行

> ID：12984513
> 
> 赞同：-1
> 
> 时间：2012-10-20T01:37:50.807
> 
> 标签：javascript, html, css, firefox, google-chrome

第一次从头开始制作 Javascript 脚本。这在 Firefox 中完美运行，但在 Chrome 或 Safari 中查看时，右侧边栏根本不会改变不透明度。这样做的目的是当鼠标悬停在侧边栏 div 上时，它会更改该 div 中箭头 img 的不透明度。左侧边栏设置为相同，但更改了 div 和 img 的不透明度。

我这样设计它是因为客户想在决定保留哪一个之前先看看两者的外观。一旦做出决定，它将只是一个或另一个，所以我需要修复右侧的侧边栏！

```
<!DOCTYPE html>
<html lang="en" xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Giterman Designs</title>     
<link rel="stylesheet" type="text/css" href="style.css"> 

<script type="text/javascript">
function changeOpacity(elm, value) {
   elm.style.opacity = (value / 100);
   elm.style.MozOpacity = (value / 100);
   elm.style.KhtmlOpacity = (value / 100);
   elm.style.filter = "alpha(opacity=" + (value) + ")";
   elm.style.MsFilter = " 'progid:DXImageTransform.Microsoft.Alpha(opacity=" + (value) + ")' ";}
</script>

</head> 
<body>

<!-- Left Side: Hover over Div, Div+Image shifts opacity -->
<div id="leftNav" class="sidebar" onMouseOver="changeOpacity(this, 70)" onMouseOut="changeOpacity(this, 20)">
    <img src="image/leftNav.png" id="leftButton" class="arrow" alt=""></div>

<!-- Right Side: Hover over Div, Image shifts opacity -->       
<div id="rightNav" class="sidebar2" onMouseOver="changeOpacity(rightButton, 70)" onMouseOut="changeOpacity(rightButton, 20)">
    <img src="image/rightNav.png" id="rightButton" class="arrow" alt=""></div>
</body>
</html> 
```

和 CSS

```
body{
background: url("image/bg.jpg") no-repeat center center fixed; -webkit-background-size: cover; -moz-background-size: cover; -o-background-size: cover; background-size: cover;}

div#leftNav{
position:absolute; left:0;}

div#rightNav{
position:absolute; right:0;}

/* Left Side-bar */
.sidebar{
background:#000000; width: 55px; height: 100%; top:0; opacity:0.20;}

/* Right Side-bar */
.sidebar2{
background: url("image/bar.png") repeat-y; width: 55px; height: 100%; top:0;}

/* Needed to seperate arrow opacity for Right Side-bar attempt */
#rightButton{
opacity: 0.20;}

img.arrow{
position: absolute; top: 50%; left: 50%; margin: 0 0 0 -35%;} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-20T01:49:44.863

你为左编码：

```
onMouseOver="changeOpacity(this, 70)" 
```

但是对于正确的你没有使用这个：

```
onMouseOver="changeOpacity(rightButton, 70)" 
```

# asp.net - 访问在 DelegatingHandler 中执行的当前控制器

> ID：12984514
> 
> 赞同：8
> 
> 时间：2012-10-20T01:37:59.407
> 
> 标签：asp.net, asp.net-web-api

我想知道是否可以在 DelegatingHandler 的 SendAsync 方法中访问正在执行（或即将执行）的控制器？我似乎无法弄清楚如何访问它，我认为这是因为它在控制器执行之外执行......

可以参考吗？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-10-20T01:56:33.583

不，因为消息处理程序在 raw`HttpRequestMessage`或 raw上运行`HttpResponseMessage`（在延续的情况下）。所以实际上，没有*“当前控制器执行”*的概念，`DelegatingHandlers`因为消息处理程序将在将请求分派给控制器之前或（再次，在继续的情况下）在控制器返回响应之后被调用。

但是，这实际上取决于您要做什么。

如果您想知道请求最终将路由到哪个控制器，您可以手动调用将在内部选择控制器的机制。

```
public class MyHandler : DelegatingHandler
{
    protected override System.Threading.Tasks.Task<HttpResponseMessage> SendAsync(HttpRequestMessage request, System.Threading.CancellationToken cancellationToken)
    {
        var config = GlobalConfiguration.Configuration;
        var controllerSelector = new DefaultHttpControllerSelector(config);

        // descriptor here will contain information about the controller to which the request will be routed. If it's null (i.e. controller not found), it will throw an exception
        var descriptor = controllerSelector.SelectController(request);

        // continue
        return base.SendAsync(request, cancellationToken);
    }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2017-06-07T14:22:34.583

扩展@GalacticBoy解决方案，使用起来会更好

```
public class MyHandler : DelegatingHandler
{
    private static IHttpControllerSelector _controllerSelector = null;

    protected override System.Threading.Tasks.Task<HttpResponseMessage> SendAsync(HttpRequestMessage request, System.Threading.CancellationToken cancellationToken)
    {
        if (_controllerSelector == null)
        {
            var config = request.GetConfiguration();
            _controllerSelector = config.Services.GetService(typeof(IHttpControllerSelector)) as IHttpControllerSelector;
        }

        try
        {
            // descriptor here will contain information about the controller to which the request will be routed. If it's null (i.e. controller not found), it will throw an exception
            var descriptor = _controllerSelector.SelectController(request);

        }
        catch
        {
            // controller not found
        }

        // continue
        return base.SendAsync(request, cancellationToken);
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-01-26T15:26:36.067

根据您对信息的处理方式，在执行请求后获取信息可能会很好。例如记录执行的控制器/动作。

```
using System;
using System.Net.Http;
using System.Threading;
using System.Threading.Tasks;
using System.Web;

namespace Example
{
    public class SampleHandler : DelegatingHandler
    {
        protected override Task<HttpResponseMessage> SendAsync(HttpRequestMessage request, CancellationToken cancellationToken)
        {
            return base.SendAsync(request, cancellationToken)
                       .ContinueWith(task =>
                       {
                           HttpResponseMessage response = task.Result;

                           string actionName = request.GetActionDescriptor().ActionName;
                           string controllerName = request.GetActionDescriptor().ControllerDescriptor.ControllerName;

                            // log action/controller or do something else

                           return response;
                       }, cancellationToken);
        }
    }
} 
```

# c - 系统调用为用户分配内存

> ID：12984515
> 
> 赞同：0
> 
> 时间：2012-10-20T01:38:29.623
> 
> 标签：c, linux-kernel

我有一个在 linux 内核（3.2）中声明/定义的结构，我目前正在尝试在系统调用中分配这些结构之一，并为调用系统调用的进程返回一个指向它的指针。

1.  我怎样才能`#include`在内核之外的程序中使用这个文件（问题可能是我应该包含**哪个**文件）？目前，我正在声明结构`include/linux/syscalls.h`并将其定义在我自己创建的文件中`kernel/mysystemcall.c`。如果我尝试在程序中使用该结构，我会得到`error: dereferencing pointer to incomplete type`.

2.  考虑到如果我取消引用它，我如何才能真正从这个内存中读取它，我会得到一个分段错误？目前，我正在使用`kmalloc`分配内存；我需要打开一个标志来访问内存，还是应该使用其他东西来分配这个内存？

感谢您提供的任何帮助！

当前的系统调用实现：

```
#include <linux/linkage.h>
#include <linux/sched.h>
#include <linux/slab.h>

struct threadinfo_struct {
    int pid;
    int nthreads;
    int *tid;
};

asmlinkage struct threadinfo_struct *sys_threadinfo(void) {
    struct threadinfo_struct *info = kmalloc(sizeof(struct threadinfo_struct), GFP_KERNEL);
    info->pid = current->pid;
    info->nthreads = -1;
    info->tid = NULL;
    return info;
} 
```

当前测试代码（外部内核）：

```
#include <stdio.h>
#include <linux/unistd.h>
#include <sys/syscall.h>
#define sys_threadinfo 349

int main(void) {
    int *ti = (int*) syscall(sys_threadinfo);
    printf("Thread id: %d\n", *ti); // Causes a segfault
    return 0;
} 
```

编辑：我意识到我可以让我的系统调用获取一个指向已分配内存的指针，并仅为用户填写值，但最好（教师偏好）以这种方式进行分配。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-24T18:54:22.710

看了[这个答案](https://stackoverflow.com/a/1623016/936083)后：

> 不要尝试从内核为用户空间分配内存——这严重违反了内核的抽象层。

在询问内核需要多少内存之后，我决定让用户空间程序自己分配内存。

这意味着我可以简单地将结构复制到用户和内核空间文件中，并且不需要`#include`内核文件来定义结构。

# python - Python Tkinter 文件菜单选项

> ID：12984516
> 
> 赞同：0
> 
> 时间：2012-10-20T01:39:15.380
> 
> 标签：python, tkinter, tk, py2app

创建 Tk 应用程序会导致菜单项“运行小部件演示”（文件 > 运行小部件演示）。我似乎找不到有关如何删除此菜单项的文档。任何帮助表示赞赏。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-20T10:29:12.393

根据您可以使用的[文档：](http://infohost.nmt.edu/tcc/help/pubs/tkinter/menu.html)

```
my_menu_object.delete(index1, index2=None) 
```

# php - 比较 uuid 是否相等（在 php 中）

> ID：12984518
> 
> 赞同：0
> 
> 时间：2012-10-20T01:39:23.057
> 
> 标签：php, uuid

在 PHP 中检查 2 个 uuid 是否相等的正确方法是什么？我需要检查 2 个具有 uuid 值的变量并根据结果采取行动。我尝试了 strcmp() 但没有产生正确的值。

谢谢！米兹

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-20T01:46:04.903

strcmp() works fine for comparing strings. If you claim otherwise, you would need to provide a self contained fully running code sample to prove it. My point is, you've made a mistake elsewhere.

Personally, I would just use the strict (===) comparison operator though

```
if ($a === $b) 
```

# java - XStream.fromXML 列表产生空列表

> ID：12984519
> 
> 赞同：0
> 
> 时间：2012-10-20T01:39:34.817
> 
> 标签：java, xstream

我正在尝试学习XStream，并且我已经按照API以及我可以理解的方式进行了学习，但是以下代码片段

```
List<Rectangle> rectangleArray = new ArrayList<Rectangle>();
xstream = new XStream(new DomDriver());
List<Rectangle> rectangleArray2 = new ArrayList<Rectangle>();

rectangleArray.add(new Rectangle(18,45,2,6));
String xml = xstream.toXML(rectangleArray);
System.out.println(xml);
xstream.fromXML(xml, rectangleArray2);
System.out.println("new list size: " + rectangleArray2.size()); 
```

产生输出

```
<list>
    <java.awt.Rectangle>
    <x>18</x>
    <y>45</y>
    <width>2</width>
    <height>6</height>
    </java.awt.Rectangle>
</list>
new list size: 0 
```

而且我无法弄清楚为什么 rectangleArray2 现在不是 rectangleArray 的副本。有什么帮助吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-20T02:13:29.690

处理`List`通过`XStream`有点棘手。要处理列表，您需要定义一个包装类来保存您的列表，例如：

```
 public class RectangleList {

        private List<Rectangle> rectangles = new ArrayList<Rectangle>();

        public List<Rectangle> getRectangles() {
            return rectangles;
        }

        public void setRectangles(List<Rectangle> rectangles) {
            this.rectangles = rectangles;
        }
    } 
```

然后将`alias`列表添加到`RectangleList`类中

```
 xstream.alias("list", RectangleList.class); 
```

**并注册一个隐式转换器来管理列表：**

```
 xstream.addImplicitCollection(RectangleList.class, "rectangles"); 
```

如果您希望`<java.awt.Rectangle>`打印为`<rectangle>`，请按如下方式注册别名：

```
 xstream.alias("rectangle", Rectangle.class); 
```

现在使用你`RectangleList`的类进行转换，它应该可以正常工作。

最终测试代码将如下所示：

```
 RectangleList recListInput = new RectangleList();
    RectangleList recListOutput = new RectangleList();
    XStream xstream = new XStream(new DomDriver());
    xstream.alias("list", RectangleList.class);
    xstream.alias("rectangle", Rectangle.class);
    xstream.addImplicitCollection(RectangleList.class, "rectangles");

    ArrayList<Rectangle> rectangleArray = new ArrayList<Rectangle>();
    rectangleArray.add(new Rectangle(18,45,2,6));
    recListInput.setRectangles(rectangleArray);
    String xml = xstream.toXML(rectangleArray);
    System.out.println(xml);
    xstream.fromXML(xml, recListOutput);
    System.out.println("new list size: " + recListOutput.getRectangles().size()); 
```

这将打印输出为：

```
 <list>
      <rectangle>
        <x>18</x>
        <y>45</y>
        <width>2</width>
        <height>6</height>
      </rectangle>
    </list>
    new list size: 1 
```

# php - 如何拆分包含逗号的查询值？

> ID：12984520
> 
> 赞同：-2
> 
> 时间：2012-10-20T01:39:40.310
> 
> 标签：php, url, get

> **可能重复：**
> [如何在 PHP 中将逗号分隔的字符串拆分为数组？](https://stackoverflow.com/questions/1125730/how-can-i-split-a-comma-delimited-string-into-an-array-in-php)

使用示例 URL 格式`domain.com/?q[]=a_1&q[]=a_2&q[]=a_3`：

在选择选项中，我将`selected='selected'`使用以下代码检索：

```
<option value="a_1"<?php if(isset($_GET['q'])) if (in_array('a_1', $_GET['q'])) { echo ' selected="selected"'; } ?>>
Sample 1
</option>
<option value="a_2"<?php if(isset($_GET['q'])) if (in_array('a_2', $_GET['q'])) { echo ' selected="selected"'; } ?>>
Sample 2
</option>
<option value="a_3"<?php if(isset($_GET['q'])) if (in_array('a_3', $_GET['q'])) { echo ' selected="selected"'; } ?>>
Sample 3
</option> 
```

如果 URL 格式改为 `domain.com/?q=a_1,a_2,a_3`，我将如何检索所选值？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-20T01:43:33.290

```
$vals = explode(',', $_GET['q']); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-20T01:44:04.157

You can explode it

```
$arrays = explode(',', $_GET['q']); 
```

# web-services - “从 Web 服务轮询数据”是什么意思？

> ID：12984521
> 
> 赞同：-1
> 
> 时间：2012-10-20T01:39:41.560
> 
> 标签：web-services, polling

“从 Web 服务轮询数据”是什么意思？你能给我一些例子吗？另外，这种应用程序有什么要求？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-20T02:07:49.383

在伪代码中：

```
while (!done) {
   answer = webService.service()
   if (!done = processAnswer(answer)) // display data, etc.
      wait(interval); //wait for some time period
} 
```

因此，基本上，您正在重复调用 Web 服务，并在两者之间等待一段时间。您可能正在观察某个长时间操作是否完成，或者在调用 Web 服务时寻找新数据。一个示例可能是一个电子邮件客户端，它调用服务器以查看自上次调用以来是否有新邮件到达。当您没有通知机制（推送通知）时使用轮询。

# c# - 如何让 IsKeyDown 方法在 C# 中工作

> ID：12984522
> 
> 赞同：3
> 
> 时间：2012-10-20T01:39:55.233
> 
> 标签：c#, winforms, methods, input

我不知道如何让这种方法起作用：

```
System.Windows.Input.Keyboard.IsKeyDown(System.Windows.Input.Key) 
```

对象浏览器显示以下内容：

> `public static bool IsKeyDown(System.Windows.Input.Key key)`
> System.Windows.Input.Keyboard 的成员
> **摘要：**
> 确定是否按下了指定的键。
> **参数：**
> key：指定的键。
> **返回值：**
> 如果键处于关闭状态，则为 true；否则为假。

好的，所以它是键盘的成员，对吧？我使用了以下代码：Keyboard test = new Keyboard();

但是当我输入 test 然后输入点时， IsKeyDown 不是一个选项。唯一的选项来自 Windows.Forms 成员。我在这里想念什么？谢谢。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-20T01:47:34.547

Add `PresentationCore.dll` assembly as a reference.

Add `WindowsBase.dll` assembly as a reference.

Test code:

```
private void buttonMisc_Click(object sender, EventArgs e)
{
    if (System.Windows.Input.Keyboard.IsKeyDown(System.Windows.Input.Key.LeftShift) == true)
        MessageBox.Show("Got it!");
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-20T01:47:53.713

IsKeyDown is static, so you need to use it like

```
Keyboard.IsKeyDown() 
```

Not with an instantiated object.

You also need to make sure you have the correct using statement at the top:

```
using System.Windows.Input; 
```

**EDIT**

On further inspection, Keyboard is a static class... So you can't `Keyboard test = new Keyboard();`

# powershell - Webclient 用户代理不断重置。需要 Internet Explorer

> ID：12984526
> 
> 赞同：1
> 
> 时间：2012-10-20T01:41:55.597
> 
> 标签：powershell, user-agent, webclient

好的，所以我之前问了一个关于 using 的问题

```
webclient.downloadfile($url,$path) 
```

我无法打开 PDF 文件，因为它的编码不正确。我现在知道的是，这是因为该网站只允许`Internet Explorer`使用。因此，我从未真正下载过 PDF，而是下载了 HTML 页面……作为 PDF。因此错误。对于该网站，当使用任何其他网站时，会弹出一个页面让您知道。我在使用时发现：

```
$webclient.downloadstring($url) 
```

..通读几行`Powershell ISE`，遇到同一句话：

> “检测到不兼容的浏览器。必须使用 IE 7.0 及更高版本”

好的。所以我做了一些研究并了解了这个 .AddHeader() 函数。我用了以下。

```
$wc.Headers.Add("user-agent", "Windows-RSS-Platform/2.0 (MSIE 9.0; Windows NT 6.1)") 
```

实际上在这个网站上。我认为这会诱使网站认为我正在使用`Internet Explorer 9.0`. 我输入`$webclient`以查看我的`Net.webclient`对象的所有属性并阅读

```
Headers: {user-agent} 
```

甜我说。现在它将起作用。但后来我尝试了我的`.downloadfile`功能，同样的事情发生了。运行 my 后，我再次`downloadfile`检查了属性，我的发生了什么？谁能让我知道为什么会发生这种情况或提供任何提示以使其正常工作？`$webclient``Headers= {}``user-agent`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-20T02:01:33.503

这是正常的 - 在第一次调用之后，标头被重置`WebClient`。因此，任何后续调用都将使它们为空。这是[来自 msdn.microsoft.com 的证明链接](http://msdn.microsoft.com/en-us/library/system.net.webclient%28v=vs.95%29.aspx)：

> 使用相同的 WebClient 重复调用导致 404 我们发现使用 WebClient 进行的第二次（和后续）调用失败。这是因为任何标题都丢失了。因此，您需要确保在每次调用同一 WebClient 实例之前重置您使用的自定义标头。

# menu - ExtJS 4：防止 Ext.grid.Panel 标题菜单在单击“列”子菜单后关闭

> ID：12984529
> 
> 赞同：1
> 
> 时间：2012-10-20T01:42:29.963
> 
> 标签：menu, click, extjs4, extjs

Sencha ExtJS 框架 Ext.grid.Panel 组件非常适合表示结果集数据。但是，当最终用户尝试启用和禁用网格中的列时，这会变得相当烦人。当您单击列标题的右侧时，会出现一个向下箭头，指示有一个菜单。当您单击该箭头时，会下拉一个菜单。在任何其他基于 HTML 应用程序的菜单（或桌面应用程序菜单）中，您可以将鼠标悬停在 [sub] 菜单选项上，或单击 [sub] 菜单选项并弹出下一个子菜单。对于 Ext.grid.Panel，当您单击主标题菜单上的菜单选项希望展开嵌套的子菜单时，整个根（列标题）菜单就会消失。这将被 Sencha 表示为增强，因为有一种解决方法——不要单击菜单选项“列”。如果你不点击它仍然有效，但它不直观。谁能在 extjs 4 框架代码中解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T15:33:51.253

根据文档中的源文件，此行为已在 4.1.2 中修复（尚未公开发布）。

但！

```
Ext.define('MenuFix', {
    override: 'Ext.menu.Item',
    onClick: function () {
        return this.menu ? null : this.callParent(arguments);
    }
}); 
```

# stan - Stan 中部分观察到的参数

> ID：12984532
> 
> 赞同：2
> 
> 时间：2012-10-20T01:43:10.880
> 
> 标签：stan

我正在尝试将一些代码从 JAGS 迁移到 Stan。假设我有以下数据集：

```
N <- 10 
nchoices <- 3
ncontrols <- 3
toydata <- list("y" = rbinom(N, nchoices - 1, .5), 
                "controls" = matrix(runif(N*ncontrols), N, ncontrols), 
                "N" = N, 
                "nchoices" = nchoices,
                "ncontrols" = ncontrols) 
```

并且我想使用以下代码运行多项 logit（取自文档的第 9.5 节）：

```
data {
  int N;
  int nchoices;
  int y[N];
  int ncontrols;
  vector[ncontrols] controls[N];
}

parameters {
  matrix[nchoices, ncontrols] beta;
}

model {
  for (k in 1:nchoices)
    for (d in 1:ncontrols)
      beta[k,d] ~ normal(0,100);
  for (n in 1:N)
    y[n] ~ categorical(softmax(beta * controls[n]));
} 
```

我现在想将第一行修复`beta`为零。在 JAGS 中，我只需在模型块中声明

```
for (i in 1:ncontrols) {
   beta[1,i] <- 0 
} 
```

但我不确定如何在 Stan 中执行此操作。我已经按照文档（部分已知参数）第 6.2 节的内容尝试了许多组合，例如，

```
parameters {
  matrix[nchoices, ncontrols] betaNonObs;
}

transformed parameters {
  matrix[nchoices, ncontrols] beta;
  for (i in 1:ncontrols) beta[1][i] <- 0
  for (k in 2:nchoices) beta[k] <- betaNonObs[k - 1]
} 
```

但它们都不起作用。有什么建议么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-21T11:30:46.860

提及错误消息会很有帮助。在这种情况下，如果 beta 被声明为一个矩阵，那么你想要的语法就是 R-like 语法

```
beta[1,i] <- 0.0; // you also omitted the semicolon 
```

为了回答您更广泛的问题，我相信您的最后一种方法是正确的。我将在名为 free_beta 的参数块中创建一个参数矩阵，并将这些元素复制到在名为 beta 的模型块中声明的另一个矩阵，该矩阵在顶部有一个额外的行用于固定零。像

```
data {
  int N;
  int nchoices;
  int y[N];
  int ncontrols;
  vector[ncontrols] controls[N];
}

parameters {
  matrix[nchoices-1, ncontrols] free_beta;
}

model {
  // copy free beta into beta
  matrix[nchoices,ncontrols] beta;
  for (d in 1:ncontrols)
    beta[1,d] <- 0.0;
  for (k in 2:nchoices)
    for (d in 1:ncontrols)
      beta[k,d] <- free_beta[k-1,d];

  // priors on free_beta, which execute faster this way
  for (k in 1:(nchoices-1))
    row(free_beta,k) ~ normal(0.0, 100.0);

  // likelihood
  for (n in 1:N)
    y[n] ~ categorical(softmax(beta * controls[n]));
} 
```

# android - 在 MediaPlayer 中开始播放远程 mp3 的事件

> ID：12984533
> 
> 赞同：1
> 
> 时间：2012-10-20T01:43:18.390
> 
> 标签：android, media-player

我在 MediaPlayer 源中设置为带有远程 mp3 文件的 url。我想听，从哪里开始播放歌曲。

在开始时需要下载 mp3 头文件（缓存）并且只有在开始播放歌曲之后。我怎么知道这一刻？我只知道简单的方法：检查计时器 isPlaying 状态...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T03:00:44.270

如果您使用 Android 原生 MediaPlayer，则有一个名为 onPrepare 的事件，当媒体播放器准备好播放您的音乐时会调用该事件

例如如何在 VideoView 上捕获上述事件。

```
video = new VideoView(activity);
video.setOnPreparedListener(new OnPreparedListener() {

} 
```

# html - Textareas and input texts css

> ID：12984544
> 
> 赞同：2
> 
> 时间：2012-10-20T01:46:48.077
> 
> 标签：html, css

I've noticed whenever I set `width: 100%;` on a textarea or an input text, they surpass the parent width. ![enter image description here](../Images/1ebdf2cd9fe5411c9cc0ef89f91349b4.png)

The textarea and text field are surrounded by a padding of 10 pixels within it's container. Is there a way to have it stop once it hits the bounding box surrounding it? What are the best practices to making a `width:100%;` element?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-20T01:52:02.147

我建议重置CSS：

```
textarea, input {
     padding: 0;
     margin: 0;
} 
```

并且请记住，这`width:100%`将与父宽度匹配，但要考虑边框。您可能想`box-sizing`在本文中了解：

[http://paulirish.com/2012/box-sizing-border-box-ftw/](http://paulirish.com/2012/box-sizing-border-box-ftw/)

# java - Java - Is there a fast way to replace all instances in a bitmap of certain colors with other colors?

> ID：12984550
> 
> 赞同：5
> 
> 时间：2012-10-20T01:47:49.980
> 
> 标签：java, swing, colors, javax.imageio

Is there a fast way in Java to replace all instances in a bitmap of certain colors with other colors?

The image I am working with is a single very large 5616 x 2160 24bit non-transparent unindexed bitmap, although the pixel values of this bitmap will vary.

This is the code I am using at the moment, but it is much too slow: [http://pastebin.com/UjgwgB0V](http://pastebin.com/UjgwgB0V)

```
public class DisplayImage extends JFrame {

public DisplayImage(boolean resize, boolean mapCountries) throws IOException {
super("Province Map");
File mapProvinceFile = new File("map\\provinces.bmp");
BufferedImage mapProvinceImage = ImageIO.read(mapProvinceFile);

byte[] pixels = (byte[])mapProvinceImage.getRaster().getDataElements(0, 0, mapProvinceImage.getWidth(), mapProvinceImage.getHeight(), null);

if (mapCountries) {
    for (int i = 0; i < Victoria2Stats.provinceDefinitionArray.size(); i++) {
        for (int p = 0; p < pixels.length-3; p = p + 3) {
           if ((byte)Victoria2Stats.provinceDefinitionArray.get(i).rgb[0] == pixels[p]) {
               if ((byte)Victoria2Stats.provinceDefinitionArray.get(i).rgb[1] == pixels[p+1]) {
                   if ((byte)Victoria2Stats.provinceDefinitionArray.get(i).rgb[2] == pixels[p+2]) {
                       try {
                           if ((Victoria2Stats.provinceDataTable[i].ownerColor == null) && !(Victoria2Stats.provinceDataTable[i].lifeRating == 0)) {
                                pixels[p] = (byte)255;
                                pixels[p+1] = (byte)255;
                                pixels[p+2] = (byte)255;
                           } else {
                                pixels[p] = (byte)(Victoria2Stats.provinceDataTable[i].ownerColor.getRed());
                                pixels[p+1] = (byte)(Victoria2Stats.provinceDataTable[i].ownerColor.getBlue());
                                pixels[p+2] = (byte)(Victoria2Stats.provinceDataTable[i].ownerColor.getGreen());
                           }
                       } catch (NullPointerException e) {
                       // I realise this is a bad practice, but it is unrelated to the question and will be fixed later
                       }
                   }
               }
           }
      }
  }
}

BufferedImage buffer = new BufferedImage(mapProvinceImage.getWidth(), mapProvinceImage.getHeight(), mapProvinceImage.getType());
DataBuffer dataBuffer = new DataBufferByte(pixels, pixels.length);

SampleModel sampleModel = new ComponentSampleModel(DataBuffer.TYPE_BYTE, mapProvinceImage.getWidth(), mapProvinceImage.getHeight(), 3, mapProvinceImage.getWidth()*3, new int[]{0,1,2});
Raster raster = Raster.createRaster(sampleModel, dataBuffer, null);
buffer.setData(raster);

BufferedImage fixedImage = ImageUtils.verticalflip(buffer);
ImageIcon ii = new ImageIcon(fixedImage);
JScrollPane jsp = new JScrollPane(new JLabel(ii));
getContentPane().add(jsp);
setSize(800, 600);
setVisible(true);
}

} 
```

Here is an example image: [http://www.mediafire.com/?rttpk4o33b3oj74](http://www.mediafire.com/?rttpk4o33b3oj74)

I was thinking of somehow converting it to an indexed bitmap and then swapping the color indexes, but I couldn't figure out any way to successful assign it/recreate it with a color index with Java.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-20T03:45:41.547

我实际上认为您应该尝试使用 Processing (www.processing.org) 。我可以用很少的代码为您的图像进行简单的颜色更改：

```
import processing.opengl.PGraphics3D;
//place provinces.bmp in the PROJECTFOLDER/data  
PImage p = loadImage("provinces.bmp"); 

//This just changes the window size, but the full image will be loaded
size(1000,800,P2D); 
PGraphics big = createGraphics(p.width, p.height, P2D);
big.beginDraw();
big.image(p,0,0);
//BEGIN GRAPHICS MANIPULATION
big.loadPixels();
for (int i = 0; i < big.pixels.length; i++) {
  color c = color(big.pixels[i]);
  float r = red(c);
  float g = green(c);
  float b = blue(c);
  //Let's do a simple color change, keeping r the same, setting green equal to old b, and setting blue to 0
  big.pixels[i] = color(r,b,0);
}
//END GRAPHICS MANIPULATION
big.updatePixels();
big.endDraw();
String path = savePath("big.jpg"); //change to tif or something else for uncompressed
big.save(path);
image(big, 0, 0); 
```

如果您需要有关如何进行不同颜色映射的建议，请发表评论，但您可以更改评论周围的代码（“让我们做一个简单的颜色更改”）

现在显然这可能不是您想要的确切颜色变化，但这是上面代码的结果：[http ://www.kapparate.com/hw/big.jpg](http://www.kapparate.com/hw/big.jpg)

仅供参考，您可以通过在 Java 类路径中包含 core.jar 来在非处理 Java 应用程序中使用 PImage 和 PGraphics

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-20T01:58:11.197

普通的留言：

*   您转换为索引位图的想法不太可能有帮助，因为（我认为您会发现）转换成本超过了节省。

*   使用外部应用程序或本机代码库可能会更好地解决问题。

我认为有微优化的空间。例如：

```
public class DisplayImage extends JFrame {

  public DisplayImage(boolean resize, boolean mapCountries) 
      throws IOException {
    super("Province Map");
    File mapProvinceFile = new File("map\\provinces.bmp");
    BufferedImage mapProvinceImage = ImageIO.read(mapProvinceFile);

    byte[] pixels = (byte[])mapProvinceImage.getRaster().getDataElements(
        0, 0, mapProvinceImage.getWidth(), mapProvinceImage.getHeight(), null);

    if (mapCountries) {
      int len = Victoria2Stats.provinceDefinitionArray.size();
      for (int i = 0; i < len; i++) {
        int[] rgb = Victoria2Stats.provinceDefinitionArray.get(i);
        ProvinceDataTable pdt = Victoria2Stats.provinceDataTable[i];
        for (int p = 0; p < pixels.length-3; p = p + 3) {
          if ((byte) rgb[0] == pixels[p] &&
              (byte) rgb[1] == pixels[p+1] &&
              (byte) rgb[2] == pixels[p+2]) {
            if (pdt.ownerColor == null && pdt.lifeRating != 0) {  // HERE
              pixels[p] = (byte)255;
              pixels[p+1] = (byte)255;
              pixels[p+2] = (byte)255;
            } else {
              pixels[p] = (byte)(pdt.ownerColor.getRed());
              pixels[p+1] = (byte)(pdt.ownerColor.getBlue());
              pixels[p+2] = (byte)(pdt.ownerColor.getGreen());
            }
          }
        }
      }
    }

    BufferedImage buffer = new BufferedImage(
       mapProvinceImage.getWidth(), mapProvinceImage.getHeight(),
       mapProvinceImage.getType());
    DataBuffer dataBuffer = new DataBufferByte(pixels, pixels.length);

    SampleModel sampleModel = new ComponentSampleModel(
       DataBuffer.TYPE_BYTE, mapProvinceImage.getWidth(),
       mapProvinceImage.getHeight(), 3, mapProvinceImage.getWidth()*3,
       new int[]{0,1,2});
    Raster raster = Raster.createRaster(sampleModel, dataBuffer, null);
    buffer.setData(raster);

    BufferedImage fixedImage = ImageUtils.verticalflip(buffer);
    ImageIcon ii = new ImageIcon(fixedImage);
    JScrollPane jsp = new JScrollPane(new JLabel(ii));
    getContentPane().add(jsp);
    setSize(800, 600);
    setVisible(true);
  }
} 
```

IMO，即使没有提高性能，可读性的提高也值得这样做。修复缩进也有帮助！

Incidentally, once I removed all of the verbiage, the probable source of your NPE problems became more obvious. Look at the line that I labelled "HERE". Note that the condition is such that the "then" branch is only taken if the `ownerColor` is `null` AND the `lifeRating` is non-zero. If the `ownerColor` is `null` AND the `lifeRating` is zero, you will take the "else" branch and an NPE is inevitable.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-20T03:01:28.427

[`java.awt.image.LookupOp`](http://docs.oracle.com/javase/6/docs/api/java/awt/image/LookupOp.html)一个合适的实例`LookupTable`可能会更快。[这里](https://stackoverflow.com/a/12808291/230513)引用了一个例子。

`ColorConvertOp`，如图所示[，](https://stackoverflow.com/a/12228640/230513)需要一个合适的`ColorSpace`.

[`ImageJ`](https://stackoverflow.com/tags/imagej/info)[，这里](https://stackoverflow.com/a/12590571/230513)提到的，可以用于批处理。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-10-20T03:24:33.743

如果您想真正快速地做到这一点，最好的方法是访问底层像素数据：

```
int[] data = ((DataBufferInt) image.getRaster().getDataBuffer()).getData(); 
```

然后你应该编写你的算法，使它恰好通过这个数组，测试每个 int 并在必要时更改它。

这种方法应该与本机代码一样快。

# android - 设置包装内容时的Imageview背景PNG问题

> ID：12984554
> 
> 赞同：0
> 
> 时间：2012-10-20T01:48:14.163
> 
> 标签：android, android-layout, android-imageview

我在 ScrollView 中有一个 LayoutView，并且想要设置一个我的玻璃背景 PNG 图像，该图像应该自动缩放以包装内容。

在这些布局视图中，有一个文本视图，该文本区域的内容是可变的。

通常没有任何PNG背景，如果不需要查看所有文本集，布局视图的大小不会扩展，但是当我设置PNG背景时，如果我在布局视图上设置换行内容，布局视图会自动放大到PNG的大小.

如何设置自定义背景图像可缩放以适应不影响换行内容行为的布局视图的大小？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T06:57:04.273

根据您的要求，我建议您 - 将背景图像的高度 = 约 50 像素宽度 = 任意 - 将此图像转换为九个补丁，点击此链接 - [http://developer.android.com/reference/android/graphics/NinePatch .html](http://developer.android.com/reference/android/graphics/NinePatch.html)

通过使用九个补丁图像，您的背景将根据动态数据调整大小/调整。

希望能帮助到你。谢谢

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-20T03:33:50.650

# 在我看来，你必须：

*   设置图像视图的 scaleType = "fitXY"
*   设置 layout_height, layout_width of layout = "wrap_content"

# jquery - if(:visible) slide up with a delay

> ID：12984555
> 
> 赞同：0
> 
> 时间：2012-10-20T01:48:36.673
> 
> 标签：jquery, if-statement, slidedown, slideup

I'm trying to have a page slide down and then another page slide up. But, for some reason, I can't figure it out.

[http://maximsiebert.com/unamed/Untitled-1.html](http://maximsiebert.com/unamed/Untitled-1.html)

If you look on here, you can see that if I click the `About` navigation link, the page slides up, if I click again it slides back down. Same for the `Contact page`.

The problem is, while, I have the `About page` up and I click on the contact link, I need the `About page` to slide down, while the `Contact page` slides up, vice versa. But I can't seem to get it to work.

Here's my code: ps: in "divPages" I have #aboutpage and #contactpage

```
 $(document).ready(function() {
 $('.about').click(function() {
    if (!$('#aboutpage').is(":visible")) {
    $('#portfolio').slideUp(1000);
        $('#aboutpage').slideDown(1000);
    }else{
        $('#portfolio').slideDown(1000);
        $('#aboutpage').slideUp(1000);
    }

}); 
```

});

```
$(document).ready(function() {
$('.contact').click(function() {
    if (!$('#contactpage').is(":visible")) {
        $('#portfolio').slideUp(1000);
        $('#contactpage').slideDown(1000);
    }else{
        $('#portfolio').slideDown(1000);
        $('#contactpage').slideUp(1000);
    }

}); 
```

});

```
$(document).ready(function() {
$('.welcome').click(function() {
    if ($(divPages).is(":visible")) {
        $('#portfolio').slideDown(1000);
        $(divPages).slideUp(1000);
        }else{
        $('html, body').animate({scrollTop:0}, 'slow');
    }

}); 
```

});

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T03:50:29.137

您的关于页面仍然存在，但隐藏在后面的某个地方。我儿子认为这不是您问题的全部内容，但它可能是其中很大一部分。

在任何 slideDown() 添加 .css({'z-index':'-1'}); 在和之后 ans slideUp() 添加 .css({'z-index':'100'});

```
$('#about').slideDown(1000).css({'z-index':'-1'});
$('#contact').slideDown(1000).css({'z-index':'100'}); 
```

我在交叉淡入淡出的幻灯片放映中遇到了与 EI 相同的问题。另一张照片停留在另一张照片上，所以你很难，它没有用。

希望这可以帮助。

编辑：再看一遍后，根据我的萤火虫，关于保持隐藏。然后，您还应该检查它是否可见，并在需要时更改显示。

这可以通过 .is(':visible') 来实现，如下所示：

```
if($('#about').is(':visible') == false) $('#about').show(); 
```

根据需要重用和更改其他元素的 html 指针。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-20T01:55:29.420

相反，我将在绑定了单击事件的所有菜单项之间共享一个类。然后，添加一个类来跟踪当前显示的项目。

**最后编辑**将等于内容 div 的 id的类`.menu-item`和数据属性添加到您的菜单 li 中。`data-content-div`

`<li class="about menu-item" data-content-div="contactpage">about</li>`

并尝试使用此代码代替您拥有的代码：

```
$(document).ready(function() {
    $('.menu-item').click(function() {
        if ( $(this).hasClass('menu-active') )
        {
            var contentDiv = $(this).data('content-div');
            $('.menu-active').removeClass('menu-active');
            $('#' + contentDiv).slideDown(1000);
        }
        else if ( $('.menu-active').length )
        {      
            var menuItem = $(this);
            var hideDiv = $('.menu-active').data('content-div');
            $('.menu-active').removeClass('menu-active');
            $('#' + hideDiv).slideDown(500, function() { 
                menuItem.addClass('menu-active');
                $('#' + menuItem.data('content-div') ).slideUp(1000);
            });
        }
        else
        {
            $(this).addClass('menu-active');
            $('#' + $(this).data('content-div') ).slideUp(1000);
        }

    });
}); 
```

​</p>

如果我有你所有的风格，这是一个可行的[小提琴。](http://jsfiddle.net/vLtsC/2/)​</p>

# c# - SwitchToThisWindow

> ID：12984556
> 
> 赞同：1
> 
> 时间：2012-10-20T01:48:50.630
> 
> 标签：c#, winforms

> **Possible Duplicate:**
> [How can I bring my application window to the front?](https://stackoverflow.com/questions/5282588/how-can-i-bring-my-application-window-to-the-front)

I am having an issue with SwitchToThisWindow

```
using System;
using System.Text;
using System.Windows.Forms;
using System.Runtime.InteropServices;
using System.Diagnostics;

namespace BringToFront
{
    public partial class Form1 : Form
    {
        [DllImport("USER32.DLL", CharSet = CharSet.Unicode)]
        public static extern IntPtr FindWindow(String className, String windowName);

        [DllImport("user32.dll", SetLastError = true)]
        static extern void SwitchToThisWindow(IntPtr hWnd, bool turnOn);

        [DllImport("user32.dll")]
        public static extern IntPtr GetForegroundWindow();

        IntPtr activeWindowHandle = GetForegroundWindow();

        public Form1()
        {
            InitializeComponent();
        }

        private void button1_Click(object sender, EventArgs e)
        {
            try
            {
                if (!checkBox1.Checked)
                    bringToFront(comboBox1.SelectedItem.ToString());
                else
                    timer1.Enabled = true;
            }
            catch
            {
                MessageBox.Show("Please choose a Process Name");
            }
        }

        public static void bringToFront(string title)
        {
            IntPtr handle = FindWindow(null, title);
            if (handle == IntPtr.Zero)
            {
                return;
            }
            SwitchToThisWindow(handle, true);
        }

        private void comboBox1_Click(object sender, EventArgs e)
        {
            comboBox1.Items.Clear();
            Process[] process = Process.GetProcesses();
            foreach (Process processes in process)
            {
                if (!String.IsNullOrEmpty(processes.MainWindowTitle))
                    comboBox1.Items.Add(processes.MainWindowTitle.ToString());
            }
        }

        private void timer1_Tick(object sender, EventArgs e)
        {
            Process process = Process.GetCurrentProcess();
            string title = process.ProcessName.ToString();
            IntPtr handle = FindWindow(null, title);

            if (activeWindowHandle != handle)
                bringToFront(comboBox1.SelectedItem.ToString());
            if (!checkBox1.Checked)
                timer1.Enabled = false;
        }
    }
} 
```

As you can see I'm trying to bring the process that is selected to the front and keep it in the front by doing a timer every 5 seconds and rebringing it to the front. It works perfectly when running the application through Microsoft Visual Studios, but when I run the program as a standalone, it works how every other function like this does and only makes it flash in taskbar instead of bringing it to the front.

Why are the permissions different and is there anyway to fix this?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-20T06:42:07.550

通过@ReedCopsy [here](https://stackoverflow.com/questions/1528473/c-sharp-make-a-window-topmost-using-a-window-handle)的解决方案，我建议在切换到该窗口后将所选句柄设为 TopMost。使用此解决方案，没有新的应用程序可以成为所选窗口的顶部。

将以下内容添加到您的代码中：

```
 [DllImport("user32.dll")]
 static extern bool SetWindowPos(IntPtr hWnd, IntPtr hWndInsertAfter, int X, int Y, int cx, int cy, uint uFlags);

 static readonly IntPtr HWND_TOPMOST = new IntPtr(-1);
 const UInt32 SWP_NOSIZE = 0x0001;
 const UInt32 SWP_NOMOVE = 0x0002;
 const UInt32 SWP_SHOWWINDOW = 0x0040; 
```

并通过添加对以下内容的调用来更改您的 bringToFront `SetWindowPos`：

```
 public static void bringToFront(string title)
    {
        IntPtr handle = FindWindow(null, title);
        if (handle == IntPtr.Zero)
        {
            return;
        }
        SwitchToThisWindow(handle, true);

        // Call this way:
        SetWindowPos(handle, HWND_TOPMOST, 0, 0, 0, 0, SWP_NOMOVE | SWP_NOSIZE | SWP_SHOWWINDOW);
    } 
```

# java - 我如何使用 pre_built 库

> ID：12984563
> 
> 赞同：0
> 
> 时间：2012-10-20T01:50:28.963
> 
> 标签：java, android, c++, android-ndk

假设我有这段代码：

打印.cpp

```
int print ()
{
  return 10;
} 
```

打印.h

```
#ifndef PRINT_H
#define PRINT_H
int print(); // function prototype for add.h
#endif 
```

我编译成一个库调用 libTest.a

现在假设我有这个 android.mk 文件

```
include $(CLEAR_VARS)
LOCAL_MODULE    := libtest
LOCAL_SRC_FILES := ../issmlib/libTest.a
LOCAL_EXPORT_C_INCLUDES := $(LOCAL_PATH)/../include
include $(PREBUILT_STATIC_LIBRARY) 
```

当然还有其他的东西，比如共享，但假设它们都工作正常！！！我将 libTest.a 放在名为 issmlib 的文件夹中，它与 jni 文件夹在我的项目中，然后我将 print.h 放入名为 include 的文件夹中。

现在这是我的主要内容：

```
#include "com_lan_factorial_FacLib.h"
#include "fac.h"

    //extern long fac(long n);

    JNIEXPORT jlong JNICALL Java_com_lan_factorial_FacLib_fac(JNIEnv *env, jclass clazz, jlong n)
    {
        fac *f = new fac();
        jlong result = (jlong) (f->factorial(n));
        delete(f);
        return result + print();
    } 
```

所以它会计算结果并添加 10。我不知道如何使用该预建库，我是否必须声明#include“print.h”我确实将它放入但它抱怨没有实现该方法。当我把它拿出来时，它抱怨没有声明 print() 。

这是一个 C++ 问题，但希望您能提供帮助。 ![在此处输入图像描述](../Images/0ace3bfaaffcade64690c510cdec6708.png)

我相信我的 Android.mk 路径很好，但如果你发现一些奇怪的东西，请告诉我。非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-20T11:18:13.717

确保您在命令行上有`V=1`参数。`ndk-build`这样，您将看到由 ndk-build 准备的实际编译命令。这通常会提供有关`Android.mk`.

如果您需要帮助解释此日志，请在此处发表评论并编辑问题以包含完整的构建日志和完整的`Android.mk`，包括调用**BUILD_SHARED_LIBRARY的部分**

# php - 从两个复选框中获取值并插入 mysql

> ID：12984565
> 
> 赞同：0
> 
> 时间：2012-10-20T01:51:41.557
> 
> 标签：php, loops, checkbox

我遇到了一个问题...我有一对我已经命名和编号的复选框。我需要标记复选框并将它们插入我的数据库。这是我创建复选框的方式：

```
<div class="check"><input type="checkbox" name="acharge1" value="1"> <span style="color: #0C0">$$</span><input type="checkbox" name="amenities1" value="1">Amenity 1</div>
<div class="check"><input type="checkbox" name="acharge2" value="1"> <span style="color: #0C0">$$</span><input type="checkbox" name="amenities2" value="1">Amenity 2</div>
<div class="check"><input type="checkbox" name="acharge3" value="1"> <span style="color: #0C0">$$</span><input type="checkbox" name="amenities3" value="1">Amenity 3</div>
<div class="check"><input type="checkbox" name="acharge4" value="1"> <span style="color: #0C0">$$</span><input type="checkbox" name="amenities4" value="1">Amenity 4</div> 
```

其中一些将被检查，而另一些则不会。此外，它们并不总是成对检查，​​但我必须成对将它们上传到我的数据库。所以换句话说：acharge1 和ities1 不会被检查，但acharge2 和ities2 会被检查。所以我尝试了一个 foreach 循环，但没有奏效。我也尝试了一个while循环，但我不知道要检查什么。所以这就是我现在所拥有的：

```
$aa = 1;
    echo "Amenity: ".$_POST['amenities'.$aa];
    $aa++;
    while(isset($_POST['amenities'.$aa])){
        $amen = $_POST['amenities'.$aa];
        if(isset($_POST['acharge'.$aa])){
        $acharge = $_POST['acharge'.$aa];
        }else{
            $acharge = "0";
            }
        echo "Amen: ". $amen." charge: ".$acharge;  
        mysql_query("INSERT INTO hotel_amenities (amenity_code, hotel_id, charge) VALUES ('$amen','$hotel_id','$acharge')") or die(mysql_error());
        echo $aa;
        $aa++;
        } 
```

但是正如您所看到的，这不起作用，因为如果未检查便利性 1，它将不会通过其他人执行 while 循环。无论如何，任何关于我如何实现这一目标的帮助将不胜感激！

编辑** 这是这个概念，所以你可以看到，有时他们的钱箱会与便利设施一起检查，有时则不会。 [http://www.cancunelitetravel.com/ale/Capture.PNG](http://www.cancunelitetravel.com/ale/Capture.PNG)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-20T02:03:20.773

你这样做的方式是完全错误的。如果你不确定可用选项的数量，你应该这样写：

```
$cnt = 0;
foeach ($_POST as $option => $value) {
    if (preg_match("/(?:acharge|amenities)(\\d+)/", $option, $matches)) {
        $cnt = max($cnt, intval($matches[1]));
    }
}
for ($i = 0; $i < $cnt; $i ++) {
    $amenity = $_POST['amenities' . $i];
    $value = "0";
    if (array_key_exists("acharge" . $i, $_POST)) {
        $value = "1";
    }
    mysql_query("INSERT INTO hotel_amenities (amenity_code, hotel_id, charge) VALUES ('$amenity','$hotel_id','$value')") or die(mysql_error());
} 
```

我想这会为你做的。那是假设您之前已经建立了连接并处理了`$hotel_id`.

# php - base64 图片上传和裁剪情况 PHP

> ID：12984571
> 
> 赞同：1
> 
> 时间：2012-10-20T01:53:39.553
> 
> 标签：php, javascript, base64

我正在尝试将图片从移动设备上传到服务器。我们正在使用 PhoneGap (Javascript) 构建，因此我们将其转换为字符串以便将其发送到服务器。我收到后遇到问题，将其转回可读的图像文件。简而言之，我需要将一个字符串和一个文件名发送给我，对其进行解码，将其转换为 .png，然后将其裁剪为圆形图像。

这就是我目前正在做的事情

```
if (isset($_POST['file'])) 
{
    //Result variable
    $result = false;

    $pic = base64_decode($_POST['file']);
    $filename = $_POST['filename'];

    if (strlen($pic) > 9 )
    {
        $fh = fopen("/var/www/pics/events/".$filename, 'w') or die("can't open file");
        fwrite($fh, $pic);
        fclose($fh);
    }
} 
```

我想我可以让其余的代码工作，如果我能弄清楚我在这里做错了什么，导致它不能正确保存为图像文件？该文件正确上传，但它没有扩展名，当我在浏览器中指向它时，它看起来应该是一个图像文件，但从不显示图像。当我直接到它的位置时，我会得到那个带有彩色形状的小破图片图标。

我是否需要知道在此过程中发送的图像类型是什么？如何知道它是 .gif、.jpg/jpeg、.png 等...？

提前感谢您的帮助！

弥敦道

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T02:14:21.243

出于安全原因，您应该清理文件名以防止目录遍历。

更重要的是，确保文件以正确的扩展名保存；如果您已经使用正确的扩展名保存，您可能会遇到来自应用程序的编码问题。

如果上述两种情况都不是，请确保您的字符串大小不超过 php.ini 中的最大 POST 大小限制；如果是这种情况，请增加大小限制。

# python - Heroku MongoHQ 插件和 PyMongo -- OperationFailure: 数据库错误：未授权

> ID：12984577
> 
> 赞同：6
> 
> 时间：2012-10-20T01:54:27.857
> 
> 标签：python, mongodb, heroku, flask, mongohq

我在使用 MongoHQ Heroku 插件时遇到问题。我的应用程序在本地工作，并且 os 变量在 Heroku 上存在且格式正确。但是，当我尝试访问数据库时，它会引发错误：`OperationFailure: database error: unauthorized db:my_database ns:my_database.cars lock type:0 client:128.62.187.133`. 如果我尝试从 MongoHQ 硬编码连接字符串并在本地运行，我会得到同样的错误。

我的应用程序如下：

```
import os
import datetime
from flask import Flask
from flask import g
from flask import jsonify
from flask import json
from flask import request
from flask import url_for
from flask import redirect
from flask import render_template
from flask import make_response
import pymongo
from pymongo import Connection
from bson import BSON
from bson import json_util

app = Flask(__name__)
def mongo_conn():
    # Format: MONGOHQ_URL: mongodb://<user>:<pass>@<base_url>:<port>/<url_path>
    if os.environ.get('MONGOHQ_URL'):
        return Connection(os.environ['MONGOHQ_URL'])
    else:
        return Connection()

@app.route('/', methods=['GET', 'POST'])
def hello():
    # Get your DB
    connection = mongo_conn()

    db = connection.my_database

    # Create an object
    car = {"brand": "Ford",
           "model": "Mustang",
           "date": datetime.datetime.utcnow()}

    # Get your collection
    cars = db.cars # crashes
    # Insert it
    cars.insert(car)
    ... 
```

编辑：MongoHQ 支持帮助了我。问题是我调用的是我的数据库`my_database`，而不是 MongoHQ 插件给我的实际数据库名称。例如，`db = connection.app52314314`。那个改变解决了它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-20T02:25:26.950

连接后，您可能需要`authenticate`直接对数据库运行命令。

尝试这样的事情：

```
db.authenticate([USER], [PASSWORD]) 
```

如果这不起作用，请随时发送电子邮件至 support@mongohq.com，我们可以为您提供特定数据库的帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-08-25T23:56:51.703

你不需要做所有这些。您可以简单地：

```
from pymongo import MongoClient

client = MongoClient(os.environ['MONGOHQ_URL'])
mongo_db = client.get_default_database() 
```

它将自动对您进行身份验证，并连接到配置的数据库，即`<url_path>`您的连接 url 的一部分。

# scala - 如何在 Scala 中使用来自 SBT（简单构建工具）的 JavaCV？

> ID：12984583
> 
> 赞同：2
> 
> 时间：2012-10-20T01:55:57.590
> 
> 标签：scala, opencv, sbt, javacv

如何在 Scala 中使用来自 SBT（简单构建工具）的 JavaCV？我需要使用 JavaCV，所以我可以使用它编写一个 Scala 应用程序。

简单的构建工具在这里：[http ://www.scala-sbt.org/](http://www.scala-sbt.org/)

JavaCV 在这里：[http ://code.google.com/p/javacv/](http://code.google.com/p/javacv/)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-20T02:05:23.703

将以下内容添加到您的 build.sbt 文件中。

```
resolvers += "JavaCV maven repo" at "http://maven2.javacv.googlecode.com/git/"

libraryDepedencies += "com.googlecode.javacv" % "javacv" % "0.2" 
```

这应该为您拉下 javacv 以及任何依赖项。请注意，您仍然需要像 javacv 详细信息一样设置所有本机库，这只会获取您项目的 jar。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-03-06T06:04:39.283

我创建了一个 SBT 插件，可以在 1 行中为您解决大部分问题；无需设置本机库等，因为这将为您完成所有工作。

[https://github.com/lloydmeta/sbt-opencv](https://github.com/lloydmeta/sbt-opencv)

用法：

在 中添加以下内容`project/plugins.sbt`：

`addSbtPlugin("com.beachape" % "sbt-opencv" % "1.2")`

# c++ - alt-tab 中的 WS_EX_TOOLWINDOW

> ID：12984584
> 
> 赞同：1
> 
> 时间：2012-10-20T01:56:06.923
> 
> 标签：c++, mfc

我希望在 中`WS_EX_TOOLWINDOW`出现一个窗口`Alt``Tab`，或者一个普通窗口，使其具有与工具窗口相同的外观。

这是可能吗 ？;/

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-20T02:36:18.867

看看 ITaskbarList::AddTab。URL 是[http://msdn.microsoft.com/en-us/library/windows/desktop/bb774652(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/bb774652(v=vs.85).aspx)

# google-analytics - 如何调试 Google Analytics 跟踪错误（_gaq.push 返回“3”）

> ID：12984586
> 
> 赞同：4
> 
> 时间：2012-10-20T01:56:36.217
> 
> 标签：google-analytics, google-analytics-api

总结：

我误解了内容脚本的用法。这导致了这个问题。以下是谷歌官方文档的引用：

> 执行环境
> 
> 内容脚本在称为孤立世界的特殊环境中执行。他们可以访问被注入页面的 DOM，但**不能**访问页面创建的任何 JavaScript 变量或函数。它查看每个内容脚本，就好像它正在运行的页面上没有执行其他 JavaScript。**反过来也是如此**：在页面上运行的 JavaScript 不能调用任何函数或访问由内容脚本定义的任何变量。

更多详细信息： [使用 Google Analytics 进行内容脚本跟踪](https://stackoverflow.com/questions/11372107/content-script-tracking-with-google-analytics/12985606)

--

我正在将一些跟踪代码添加到 Chrome 扩展程序中。但是当我测试它时，_gaq.push 返回数字 3。当我测试时，我想如果我在扩展程序中调用 _gaq.push，这个数字会继续上升。但是当我在控制台中调用它时，一切都很好（所有相同的代码）。

我想知道如何才能更深入地跟踪此错误？

非常感谢每一个答案！

更新：

当我跟踪_gaq的返回值时，它仍然是一个数组。这意味着 ga.js 没有加载，对吧？

但似乎 ga.js 从未加载到我的脚本中。除非我在控制台中手动键入 _gaq，否则它是一个对象。这很奇怪。

我检查了 DOM，发现标签已经添加了。

我查看了网络面板，发现队列中根本没有加载 ga.js。但是为什么我仍然可以使用控制台访问 _gaq 对象？

更新2：

我使用console.log跟踪“window._gaq”的值，发现console.log(window._gaq)的返回值与直接在控制台输入“window._gaq”不同。这完全是两个不同的对象。我什至使用 setInterval 函数来记录结果，它一直返回数组，而不是预期的对象。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-20T02:23:15.757

当你的脚本运行时`_gaq`只是一个普通的数组。就像 JavaScript 中的任何 Array 一样，它具有向 Array 中`push`插入一个或多个元素并返回数组最终长度的方法。

例如：

```
var _gaq = [];
> undefined
_gaq.push(['_setAccount', 'UA-XXXXX-X']);
> 1
_gaq.push(['_setDomainName', 'mysite.com']);
> 2
_gaq.push(['_trackPageview'], 
          ['_trackEvent', 'cat', 'act']);
> 4 
```

加载 ga.js 文件后，`_gaq`会读取数组，以便处理推入其中的指令，然后将`_gaq`数组替换为对象。该对象也实现了推送功能。但请注意，在这种情况下，push 函数将执行 ga.js 库中的指令，然后返回 0。

例如：

```
var _gaq = {
  push: function(){
    // Do something here
    return 0;
  }
};
> undefined
_gaq.push(['_trackPageview'])
> 0 
```

这是一个非常聪明的 Google 设计，它创建了一个 API，甚至可以在加载库 (ga.js) 之前使用。

这就是为什么在你的脚本`_gaq.push`中是 Array 类的一个方法并返回递增的数字，而在控制台上它总是返回 0。

这根本不是问题。它似乎按预期工作。

**更新**

似乎 ga.js 已经加载。也许它被缓存并且没有显示在网络面板上。

ga.js 由这部分跟踪脚本加载：

```
 (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })(); 
```

它是异步加载的。因此，在执行此代码段后，它将被加载，但加载它的确切点是未知的。

如果您需要知道 ga.js 文件何时加载，您可以向 _gaq 推送一个回调，它将在 ga.js 文件加载时执行。

例如：

```
_gaq.push(function(){
  console.log('ga.js loaded!');
  debugger;
}); 
```

# c++ - 在 Web 浏览器的行编辑（地址栏）中输入内容时创建条件

> ID：12984587
> 
> 赞同：3
> 
> 时间：2012-10-20T01:56:40.183
> 
> 标签：c++, qt, search, browser, conditional

我在 QT 中创建了一个简单的网络浏览器。我不想在地址栏旁边放置一个单独的搜索栏。我也想让地址栏成为搜索栏。例如，我想为在地址栏中输入的内容设置条件，这样如果“http://”或“www”或“.com”（或任何其他域）不存在，那么它将搜索输入了什么。我唯一拥有的是，如果不满足这些条件，那么在地址栏中键入的内容将插入：

[http://www.google.com/search?q=](http://www.google.com/search?q=) *what+was+typed*

如果有多个单词，我将如何处理这个问题以及如何在每个单词之间加上“+”？

另外我将如何在搜索栏中应用条件。也许使用像“if else”这样的循环？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T02:34:31.303

[替换在这里](http://doc.qt.digia.com/qt/qstring.html)寻找替换方法。同时隐藏浏览器的 TextEdit 并创建您自己的 TextEdit。

点击 textChanged() 的信号并做相应的事情（如实时搜索）和当今浏览器使用的其他花哨的技巧。

[在您继续之前先](http://harmattan-dev.nokia.com/docs/platform-api-reference/xml/daily-docs/libqt4/webkit-fancybrowser.html)看看这里

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-20T02:07:15.360

尝试使用正则表达式在每个单词之间插入加号。但是，这假设您可以识别单词是什么。鉴于如果他们打算搜索，他们可能会在单词之间包含空格，您可能只需使用[正则表达式](http://www.cplusplus.com/reference/std/regex/)将每个空格替换为“+”。

# c# - gridviewlist 列在 gridview 停靠区域中均匀显示

> ID：12984594
> 
> 赞同：0
> 
> 时间：2012-10-20T01:57:56.277
> 
> 标签：c#

怎么可能将网格视图的内容停靠在整个网格本身内，从而使列在表单上水平地均匀分布？

[我有什么](https://www.dropbox.com/s/t9v3s4hvlqxj5w5/current.png)| [我想要的是](https://www.dropbox.com/s/k2f5whh90ckhot0/want.png)

帮助表示赞赏！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T02:22:04.967

*   右键单击数据网格视图
*   点击属性
*   在“属性”窗口中，找到“列”部分并单击选项卡
*   在出现的对话框中，找到每列的 AutoSize 属性并设置为 Fill

![在此处输入图像描述](../Images/e1b64586975dc98018dfb58dc7951d2a.png)

# .htaccess - Magento SEO URL 突然更改，无法重新启用

> ID：12984595
> 
> 赞同：0
> 
> 时间：2012-10-20T01:58:07.550
> 
> 标签：.htaccess, url, magento, seo

我对 Magento 平台还很陌生，但我在 apache 服务器上的 web 开发方面有相当多的经验。

几天前，我被要求调查一个问题，该问题最初是由于过滤器失败而引起的。

我查看了谷歌分析数据，似乎 SEO 友好的 URL 都已停止显示。导航 URL 仍然使用友好的词，但是在页面返回 URL 被重定向到基本目录 URL。

[http://www.camera-camera.com/cameras-and-accessories.html](http://www.camera-camera.com/cameras-and-accessories.html)

相反，现在它去了

[https://www.camera-camera.com/index.php/catalog/category/view/id/9](https://www.camera-camera.com/index.php/catalog/category/view/id/9)

我检查了管理员配置。Web > SEO URL 重写设置为“是”，我将它们切换为“不保存”并返回“是”，然后保存。尝试清除目录 URL 重写缓存

检查了htaccess文件，几个月没有动过。

清空核心重写表并重新索引它。

所以我现在没有想法了，希望你们中的一些更有经验的用户可以对我还能检查的内容提出一些意见。

我还发现 URL 现在忽略回发参数很奇怪。如果您查看他们的过滤器，它们只是一个指向带有 post 参数的同一页面的链接。这现在被条纹和忽略可能是相关的？

文件恢复是在它发生的那一天。我应该检查任何文件吗？

感谢您的任何帮助，您可以提供 ！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T07:34:08.487

我刚刚发现它与HTTPS有关。我没有注意到，但即使过滤器链接等指向 HTTP，该站点似乎仍在重定向到 HTTPS，在重定向中，参数被删除。现在弄清楚为什么它会进入 HTTPS

# css - 即链接按钮 - 只能单击文本，不能单击按钮周围的空间

> ID：12984599
> 
> 赞同：0
> 
> 时间：2012-10-20T01:58:22.250
> 
> 标签：css, internet-explorer-8

我正在尝试使用 CSS 创建一个垂直的按钮分组。以前，[我尝试使用无序列表来执行此操作](https://stackoverflow.com/questions/12925723/ie-jquery-click-only-works-on-text-in-li-not-entire-box)。

我已经删除了无序列表，只是将按钮作为元素保留。在 Chrome 和 FF 中一切正常，但在 IE8 中不行。唯一一次激活“悬停”状态是当您实际将鼠标悬停在链接的文本上，而不是整个按钮上。我希望整个框都是可点击的。

这是我的 HTML 中的相关代码：

```
<div id="itemarea">
      <a href="#" class="item_button" id="139" style="color: #4bb2c5" data-seq= "0">Skydiving</a>
<a href="#" class="item_button" id="140" style="color: #EAA228" data-seq= "1">Knitting</a>
<a href="#" class="item_button" id="141" style="color: #c5b47f" data-seq= "2">Checkers</a>
<a href="#" class="item_button" id="142" style="color: #579575" data-seq= "3">Surfing</a>
  <button class="save_button" name="button" type="submit">Save</button>

</div> 
```

这是CSS：

```
#itemarea{
    padding-bottom:20px;
    margin-top:54px;
    height:470px;
    float:left;
    width:200px;
    padding-left:15px;
    background-color:#CFCFCF;
    border:2px solid gray;
    box-shadow: 3px 3px 3px rgba(0, 0, 0, 0.2);
    -moz-box-shadow: 3px 3px 3px rgba(0, 0, 0, 0.2);
    -o-box-shadow: 3px 3px 3px rgba(0, 0, 0, 0.2);
    -webkit-box-shadow: 3px 3px 3px rgba(0, 0, 0, 0.2);
    -ms-filter: progid:DXImageTransform.Microsoft.Shadow( Strength=5, Direction=135, Color='#999999' );
    filter: progid:DXImageTransform.Microsoft.Shadow( Strength=5, Direction=135, Color='#999999' );
}

.item_button {
    -moz-box-shadow:inset 0px 1px 0px 0px #ffffff;
    -webkit-box-shadow:inset 0px 1px 0px 0px #ffffff;
    box-shadow:inset 0px 1px 0px 0px #ffffff;
    background:-webkit-gradient( linear, left top, left bottom, color-stop(0.05, #ededed), color-stop(1, #dfdfdf) );
    background:-moz-linear-gradient( center top, #ededed 5%, #dfdfdf 100% );
    filter:progid:DXImageTransform.Microsoft.gradient(startColorstr='#ededed', endColorstr='#dfdfdf');
    background-color:#ededed;
    -moz-border-radius:6px;
    -webkit-border-radius:6px;
    border-radius:6px;
    border:1px solid #dcdcdc;
    display:inline-block;
    color:#777777;
    font-family:arial;
    font-size:15px;
    font-weight:bold;
    padding:6px 24px;
    text-decoration:none;
    text-shadow:1px 1px 0px #ffffff;
        width:120px;
}.item_button:hover {
    background:-webkit-gradient( linear, left top, left bottom, color-stop(0.05, #dfdfdf), color-stop(1, #ededed) );
    background:-moz-linear-gradient( center top, #dfdfdf 5%, #ededed 100% );
    filter:progid:DXImageTransform.Microsoft.gradient(startColorstr='#dfdfdf', endColorstr='#ededed');
    background-color:#dfdfdf;
}.item_button:active {
    position:relative;
    top:1px;
} 
```

提前感谢您提供的任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-20T02:05:19.653

确保ie8不在兼容模式下，尝试点击网址栏中的破碎页面图标

# c# - C# Dynamic MenuStrip（不接触表单）

> ID：12984600
> 
> 赞同：1
> 
> 时间：2012-10-20T01:58:42.797
> 
> 标签：c#, winforms, dynamic, menustrip

是否可以在不通过表单添加实例的情况下动态创建 MenuStrip？

我已经做好了..

```
//Create menu
MenuStrip menu = new MenuStrip();
menu.name = "MainMenu";

// Create a Menu Item
ToolStripMenuItem file = new ToolStripMenuItem("File");

//Add item to Menu
menu.Items.Add(file);

//Click event
file.Click += new System.EventHandler(this.FileItemClick);

private void FileItemClick(object sender, EventArgs e)
{
    MessageBox.Show("File clicked");
} 
```

我知道我必须用这样的东西将它添加到表单中..

```
this.MainMenuStrip = menu;
Controls.Add(menu); 
```

但是如果没有将实例拖到表单上，则上述操作是不可能的。有没有办法 100% 动态创建 MenuStrip？另外，子菜单？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-20T02:02:17.610

对的，这是可能的。实际上，您拖动到窗体的所有控件都由设计器生成为代码。要准确查看您需要的代码，只需将`MenuStrip`控件拖到表单上，然后打开设计器文件（在记事本中）并从那里复制并粘贴代码。如果您的表单被调用`Form1.cs`，那么您的设计器文件是`Form1.designer.cs`.

`Properties`设计器文件是所有生成的代码，用于创建表单上的所有控件并将其初始化为您在可视化设计表单时在工具窗口中选择的值。

# ios - 您可以通过 MPMoviePlayerController 访问 HLS 隐藏字幕数据吗？

> ID：12984601
> 
> 赞同：1
> 
> 时间：2012-10-20T01:58:46.947
> 
> 标签：ios, mpmovieplayercontroller, closed-captions

我想访问隐藏式字幕数据，以便我可以使用字幕数据来控制我的 iOS 应用程序中的项目。

如果我们从编码器中注入字幕数据，有没有办法让我们的 MPMoviePlayerController 播放器踢出字幕对象，以便我们可以读取它们并在解析它们后执行操作？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-15T20:50:31.947

There is no way to accomplish this with the MPMoviePlayerController, but it can be done with the AVPlayer.

see

```
AVPlayer.closedCaptionDisplayEnabled 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-23T21:30:49.400

直接来自苹果：“目前没有办法做到这一点。”

因此，您无法从该播放器或 AVplayer 中获取字幕或字幕。

# c - 分配中不兼容的类型，为什么我不能这样做？

> ID：12984603
> 
> 赞同：0
> 
> 时间：2012-10-20T01:59:51.163
> 
> 标签：c, arrays, pointers, struct, char

我有一个结构 The_Word 有一个变量 char word[WORD_LENGTH]

我有以下

```
typedef struct The_Word
{
    char word[WORD_LENGTH];
    int frequency;
    struct The_Word* next;
} The_Word;

int someFunc(char* word)
{
/*Rest of method excluded*/

struct The_Word *newWord = malloc(sizeof(struct The_Word));

newWord->word = word; // error here. How can I assign the struct's word to the pointer word
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T02:02:34.657

您需要使用[strncpy](http://linux.die.net/man/3/strncpy)来复制字符串：

```
#include <string.h>

int someFunc(char* word)
{
  /*Rest of method excluded*/

  struct The_Word *newWord = malloc(sizeof(struct The_Word));
  strncpy(newWord->word, word, WORD_LENGTH);
  newWord->word[WORD_LENGTH - 1] = '\0';
} 
```

您应该小心检查字符串是否适合数组。就是这样，当参数`char* word`的长度大于`WORD_LENGTH`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-20T02:28:57.433

这会导致类型不兼容错误，因为在 C 中，数组被视为常量指针。数组和指针并不完全相同。尽管它们在大多数其他情况下的行为相同，但您不能重新分配数组指向的内容。

看起来您打算将字符串从函数参数复制到新分配的结构中。如果是这种情况，请按照其他人的建议使用 strncpy() 或 memcpy() 。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-20T02:01:42.927

您不直接分配指针。相反，您应该使用`strncpy()`函数。

```
strncpy(newWord->word,word,strlen(word)); 
```

`strcpy()`，`memcpy()`所有工作都类似。

```
typedef struct The_Word
{
    char word[WORD_LENGTH];
    int frequency;
    struct The_Word* next;
} The_Word;

int someFunc(char* word)
{
/*Rest of method excluded*/

  struct The_Word *newWord = malloc(sizeof(struct The_Word));
  memset(newWord->word,0,WORD_LENGTH);
  strcpy(newWord->word,word);
  /*return something*/
} 
```

# org-mode - 让 org-mode 继续编号列表而不是重新启动

> ID：12984604
> 
> 赞同：27
> 
> 时间：2012-10-20T01:59:55.037
> 
> 标签：org-mode

有什么方法可以让 org-mode 继续编号列表而不是重新启动？

这是情况。你列了一个类似的列表：

> 有时您可以通过执行以下操作重新启动显示：
> 
> 1.  按 Ctrl-Alt-F1 打开终端。
> 2.  输入以下两条命令：
> 
> #+BEGIN_SRC 重击
> 
> > 导出显示=：0.0
> > 
> > 肉桂——替换
> 
> #+END_SRC
> 
> \3。然后按 Ctrl-Alt-F8 返回窗口管理器。

markdown 编辑器和 org-mode 都希望 #3 是 #1，在代码块之后重新启动列表。

解决方案如下。现在它看起来很完美。这是 Cinnamon 在 Ubuntu 12.04 或 Mint 13 中锁定时恢复的提示。

![在此处输入图像描述](../Images/2387f8868cc4979f3ee617aca6c30d40.png)

![在此处输入图像描述](../Images/1e0f2369390f5e43322c4c085066cf89.png)

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2014-01-31T07:58:31.443

您可以告诉 org-mode 每个项目的标签应该是什么，因此您可以使下一个列表从上一个列表中最后一个之后的数字开始。8.2.5h 版的[org-mode 手册](http://orgmode.org/manual/Plain-lists.html)说（我加粗了）：

> 有序列表项以数字开头，后跟句点或右括号，例如“1”。或“1)”。**如果您希望列表以不同的值（例如，20）开始，请以 [@20] 开始项目的文本。**这些结构可用于列表的任何项目，以强制执行特定编号。

使用它，您可以以任何您喜欢的方式缩进两个列表之间的文本，但是当前一个列表更改时，不会自动更新编号。

例子：

```
Here comes a multi-part list.

1\. Item the first.
2\. Item the second.

Here is some intermediate text.

3\. [@3] Item the third.
4\. Item the fourth. 
```

* * *

## 回答 #2

> 赞同：25
> 
> 时间：2012-10-20T03:59:50.853

尝试缩进 #+BEGIN_SRC 块，这样它“看起来”就像是项目编号 2 的子项目，而不是顶级项目。这样做能解决你的问题吗？

像这样：

```
 1\. Hit Ctrl-Alt-F1 to open up a terminal.
 2\. Enter the following two commands:

    #+BEGIN_SRC bash

        export DISPLAY=:0.0

        cinnamon --replace

    #+END_SRC

 3\. Then hit Ctrl-Alt-F8 to go back to the window manager 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-10-20T04:38:20.660

[org-mode 手册](http://orgmode.org/org.html#Plain-lists) [准确地描述](http://orgmode.org/org.html#fnd-18)了终止列表的内容。引用它：

> 每当每个项目结束时，列表都会结束，这意味着在任何缩进小于或等于顶级项目的行之前。它也在两个空行之前结束¹。

```
¹ See also org-empty-line-terminates-plain-lists. 
```

正如丹尼尔[提到](https://stackoverflow.com/a/12985152/1449460)`2.`的那样，在两者之间缩进`3.`应该可以解决您的问题。

# jquery - 使用 JSZip 下载图片导致浏览器崩溃

> ID：12984606
> 
> 赞同：3
> 
> 时间：2012-10-20T02:00:18.383
> 
> 标签：jquery, canvas, zip

我正在使用 JSZip 在页面上捆绑一组图像并创建一个 zip 文件来存储它们。这是相关的功能：

```
// Make a zip file
$("#snapLink").click(function() {
  var zip = new JSZip();
  snapFolder = zip.folder("snaps")
  $("#snapRandom img").each( function(index){
    imageLink = $(this).attr('src').substring(22);
    snapFolder.file("snap" + index + ".png", imageLink, {base64: true});
  })
  snapZip = zip.generate();
  location.href="data:application/zip;base64,"+snapZip;
}); 
```

图像是从画布生成的，因此它们不在文件系统中。图像源是数据 url。

如果要下载 1-3 个图像，这将非常有用。一旦超过 10 张图片，浏览器可能会崩溃，它肯定会崩溃。到目前为止，我已经在 Mac 上的 Safari 和 Chrome 上对此进行了测试。图像约为 120k。

您对如何使这项工作有任何想法吗？提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-07-22T16:57:06.387

我有同样的问题，以防其他人想知道，我在这里发布一个解决方案。

答案实际上在网站上：[https ://stuk.github.io/jszip/documentation/howto/write_zip.html](https://stuk.github.io/jszip/documentation/howto/write_zip.html)

```
zip.generateAsync({type:"blob"})
.then(function (blob) {
    saveAs(blob, "hello.zip");
}); 
```

就这么简单。包括 FileSaver.js 并使用 blob 而不是 base64。

该错误是由 href 的字符限制引起的。

> 当前 chrome 中的 URL 长度限制为 2097152 个字符

我最初认为我们必须使用 base64 来保存 zip 文件，因为图像是 base64 格式的。值得庆幸的是，我们可以将其保存为 blob 并克服 1.5Mb 的限制

# python - Python MySQLdb无法插入

> ID：12984607
> 
> 赞同：2
> 
> 时间：2012-10-20T02:00:22.610
> 
> 标签：python, cursor

我正在努力

```
title = "Title here"
url = "http://www.mysite.com/url-goes-here"

cursor.execute("""INSERT INTO `videos_justicevids` (`title`, `pageurl`) VALUES (%s, %s)""",(title, url)) 
```

我没有收到错误，但它没有插入数据库。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T02:08:52.347

你需要提交它。

```
connection.commit() 
```

# ruby-on-rails-3.2 - Rails 3.2.8 模型形式

> ID：12984611
> 
> 赞同：0
> 
> 时间：2012-10-20T02:01:44.890
> 
> 标签：ruby-on-rails-3.2

我有一个包含许多作业的作业页面。对于每个作业，我想要一个链接来为该作业创建报告。

在创建报告页面上，应预先填充分配信息，并应呈现报告表单。

任何提示我如何开始？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-21T02:39:55.767

首先你应该有一个报告模型假设报告模型有一个消息属性，那么我们可以简单地做

在您的报告模型中应该看起来像

```
belongs_to :assignment 
```

那么你的分配模型应该有

```
has_many:reports 
```

确保在报告数据库中包含 assignment_id 属性

您的控制器的 assignments 索引操作应如下所示

```
def index
  @assignments = Assignment.all
end

<% @assignments.each do |assignment| %>
  <%#= basic assignment info %>
  <%= link_to "Report", new_assignment_report_path(assingment) %>
<% end %> 
```

在报告控制器中，我们有一个新动作

```
def new
  @assignment = Assignment.find(params[:assignment_id])
  @report = Report.new(:assignment_id = @assignment.id)
end 
```

在新的报告视图中，我们可以简单地做

```
<%#= @assignment.attribute basic assignment info %> 
```

然后对于报告表，我们可以简单地做

```
<%= form_for @report do |f| %>
    <%= f.text_area :message %>
    <%= f.hidden_field :assignment_id %>
<% end %> 
```

我希望这有帮助

不要忘记在您的路线中执行此操作

```
resources :assignments do
  resources :reports
end 
```

# java - 在 twitter4j 中检索给定关键字的推文

> ID：12984617
> 
> 赞同：0
> 
> 时间：2012-10-20T02:03:44.923
> 
> 标签：java, real-time, twitter4j

我是新来的`twitter4j`。只是想知道，如何从推特上获取“一段时期的推文”。作为`twitter4j`唯一可以获得最少推文的人。

说，我想获得关键字“iphone5”的最近 2 周推文，我将如何使用`twitter4j`.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-20T15:52:25.887

在过去的一个小时内，已经有数千条“iphone5”推文。在达到限制之前，这已经比允许通过搜索 API 批量获得的推文更多。在过去两周内获得所有热门话题的推文将是不可能的。您必须缩小搜索范围，这样您就不必提出这么多请求（一次查询只能获得 100 条推文）。

您可能会考虑的另一件事是每隔几分钟获取关于某个主题的 1000 条最新推文并将它们存储在本地。这样，如果您需要历史数据，您可以返回自己的缓存。

```
public static void main(String[] args) throws TwitterException {
    Twitter twitter = new TwitterFactory().getInstance();

    for (int page = 1; page <= 10; page++) {
        System.out.println("\nPage: " + page);
        Query query = new Query("#iPhone5");
        query.setRpp(100); // set tweets per page to 100
        query.setPage(page);
        QueryResult qr = twitter.search(query);
        List<Tweet> qrTweets = qr.getTweets();

        // break out of the loop early if there are no more tweets
        if(qrTweets.size() == 0) break;

        for(Tweet t : qrTweets) {
            System.out.println(t.getId() + " - " + t.getCreatedAt() + ": " + t.getText());
        }
    }
} 
```

# github - 为什么github说找不到我的readme？

> ID：12984621
> 
> 赞同：1
> 
> 时间：2012-10-20T02:04:59.867
> 
> 标签：github

[https://github.com/aakilfernandes/uiji](https://github.com/aakilfernandes/uiji)

我有一个文件 README.MD 但我仍然收到一条消息：

> 我们建议在此存储库中添加自述文件。有关我们支持的格式的详细信息，请访问 github/markup。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-20T02:12:22.053

试试 README.md（小写扩展）

# openoffice-calc - 将现有数字单元格转换为文本

> ID：12984625
> 
> 赞同：0
> 
> 时间：2012-10-20T02:06:15.063
> 
> 标签：openoffice-calc

我有一个带有一列邮政编码的 .xls 文件。

由于它们都是 5 位数字，因此 Open Office Calc 将它们视为数字。我希望它将它们视为文本。

我知道我可以通过在所有数字字段前加上撇号来做到这一点。但是我有几十个带有几千个邮政编码的电子表格。

我尝试选择列并执行格式 - 单元格 - 选择数字选项卡并选择文本。但这不起作用，格式代码是 @ 而不是 '

有没有办法选择一列数字数据并自动在每个字段的开头添加一个'？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-20T02:19:41.507

您可以在宏中使用 VBA 来做到这一点，这很简单。或者，您可以使用 BAHTTEXT（在文本下）创建一个[公式](http://spreadsheets.about.com/od/excelformulas/ss/formula_begin.htm)，将数字转换为文本。如果这不起作用，您可以使用 CONCATENATE 并有一列所有撇号，然后加入这两列。然后只需向下拖动公式，您将有一个新的文本列。

# jquery - 加载页面时未执行JQuery函数

> ID：12984626
> 
> 赞同：1
> 
> 时间：2012-10-20T02:06:17.043
> 
> 标签：jquery, html

我对 jquery 开发很陌生，并且正在构建一个示例项目来尝试它。我遇到了页面加载问题，因为在加载页面时未执行调用 Web 服务的 JavaScript 函数。我想在页面第一次加载或随后从其他页面中的链接显示时执行 JS 函数。感谢是否有人可以提供这方面的指导。

```
 <meta name="viewport" content="width=device-width, initial-scale=1"> 
    <link rel="stylesheet"  href="jquery.mobile-1.2.0/demos/css/themes/default/jquery.mobile-1.2.0.css" />  
    <script type="text/javascript" src="jquery.mobile-1.2.0/demos/js/jquery.js"></script>
    <script type="text/javascript" src="jquery.mobile-1.2.0/demos/docs/_assets/js/jqm-docs.js"></script>
    <script type="text/javascript" src="jquery.mobile-1.2.0/demos/js/jquery.mobile-1.2.0.js"></script>
<script type="text/javascript">
    $(document).ready(function () {
        $.ajax("http://localhost:8098/CustomerService.svc/GetCustomerList",
            {
                beforeSend: function (xhr) {
                    // $.mobile.showPageLoadingMsg();
                },
                complete: function () {
                    // $.mobile.hidePageLoadingMsg();
                },
                contentType: 'application/json',
                dataType: 'jsonp',
                jsonp: 'callback',
                type: 'GET',
                error: function (xhr, ajaxOptions, thrownError) {
                    alert(xhr.status);
                    alert(xhr.responseText);
                    //alert(thrownError);
                },
                success: function (data) {
                    var result = data.GetCustomerListResult;

                    $.each(result, function (index, output) {
                        $('#CustomerList').append('<li data-theme="c"><a href="RewardMember_Find.html?CustomerNo=' + output.CustomerNo + '" data-transition="slide">' +
                        '<div style="text-align:center; width:80px; float:left;"><img alt="" src="images/' + output.PhotoImage + '"/></div>' +
                        '<div style="padding-left:85px; color:#575749;"><h2>' + output.CustomerLastName + ' ' + output.CustomerFirstName + '</h2>' +
                            '<table style="vertical-align:top; font-size:10px;width:100%;">' +
                                '<tr style="text-align:left;">' +
                                    '<td style="font-weight:bold; width:30%;">Member Since: </td>' +
                                    '<td style="padding-left:5px;color:#FF6600;">' + output.StartDate + '</td>' +
                                '</tr>' +
                                '<tr style="text-align:left;">' +
                                    '<td style="font-weight:bold;">Residential Loc: </td>' +
                                    '<td style="text-padding-left:5px;color:#FF6600;">' + output.ResidentialLocation + '</td>' +
                                '</tr>' +
                            '</table>' +
                        '</div>' +
                        '</a></li>');
                    });

                    $('#CustomerList').listview('refresh');
                }
            });
        }); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-20T02:09:51.520

```
$.ajax("http://localhost:8098/CustomerService.svc/GetCustomerList",
            { 
```

这条线应该是

```
$.ajax({
       url :  "http://localhost:8098/CustomerService.svc/GetCustomerList", 
```

# jquery - 我可以在 textareas 中使用许多所见即所得的 jquery 选择器吗？

> ID：12984627
> 
> 赞同：0
> 
> 时间：2012-10-20T02:06:17.717
> 
> 标签：jquery, jquery-selectors, wildcard, wysihtml5

我在我的 rails 应用程序中使用[bootstrap-wysihtml5-rails](https://github.com/Nerian/bootstrap-wysihtml5-rails)，在我尝试使用通配符选择器之前一切正常。

例如：

***Javascript***

```
$('[id*=some-textarea]').wysihtml5(); 
```

***HTML***

```
<textarea id="some-textarea1" placeholder="Enter text ..."></textarea>
<textarea id="some-textarea2" placeholder="Enter text ..."></textarea> 
```

不适用于 Chrome 版本 22.0.1229.94，控制台显示“未捕获错误：NOT_FOUND_ERR：DOM 异常 8”

Safari 仅在 some-textarea1 上显示所见即所得的控件。

当我明确时，它们工作正常

```
$('#some-textarea1').wysihtml5();
$('#some-textarea2').wysihtml5(); 
```

但是我的rails表单上的textarea的数量是动态的，所以我真的很想使用通配符，如果可能的话？

这是 wysiwyg.js 的问题吗？作为一个简单的css背景更改工作......

这是一个例子：http: [//jsfiddle.net/8PBwA/3/](http://jsfiddle.net/8PBwA/3/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T02:25:17.670

我将在这里（从快速浏览插件源代码）出发，并说这个 JS 插件不支持将集合作为参数。

您可以使用`for`循环。

```
$('[id*=some-textarea]').each(function() {
     $(this).wysihtml5();
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-20T02:16:47.273

尝试将您的选择器用双引号括起来。检查是否有帮助

```
$('[id*="some-textarea"]').wysihtml5(); 
```

您也可以尝试为所有这些文本区域分配一个**类..**

```
<textarea id="some-textarea1" class="w5text" placeholder="Enter text ..."></textarea>
<textarea id="some-textarea2" class="w5text" placeholder="Enter text ..."></textarea>

$('.w5text').wysihtml5(); 
```

或者

```
var count = 30;

for(var i = ;i<= count ; i++){
   $('#some-textarea'+ count).wysihtml5();
} 
```

# c++ - 函数中返回语句的段错误

> ID：12984628
> 
> 赞同：4
> 
> 时间：2012-10-20T02:06:39.350
> 
> 标签：c++, segmentation-fault, fault, infix-notation, postfix-notation

我的程序应该将提示从中缀转换为后缀。到目前为止，通过调试器和其他各种方法，我已经找到了我的段错误的确切点，但不明白为什么。

这是我的代码：

这是 itop.h：

```
using namespace std;
#include <cstdlib>
#include <iostream>

class sNode{
    public:
       char data;
       sNode *next;
};

class stack{
    public:
        sNode *head;
        void push (char);
        sNode pop();
        int rank(char);
        stack()
        {
        cout << "Initiliazing stack." << endl;
        }
}; 
```

这是我的 itop.cpp 文件：

```
 #include "itop.h"

    void stack::push (char a)
    {
            // cout << "Pushing " << a << endl;
            sNode *sn;
            sn = new sNode;
            sn->data = a;
            sn->next = head;
            head = sn;
    }

    sNode stack::pop()
    {
            // cout << "Popping stack." << endl;
            sNode *sn;
            sn = head;
            head = head->next;
            return *sn;
    }

    int stack::rank(char x)
    {
            int num = 0;
            // cout << "Checking rank." << endl;
            if(x == '\0')
            {
                    num = 1;
                    // cout << "Checking for null" << endl;
                    return num;
            }
            else if(x == '+' || x == '-')
            {
                    num = 2;
                    // cout << "Checking if + or -" << endl;
                    return num;
                    // cout << "After return." << endl;
            }
            else if(x == '*' || x == '/')
            {
                    num = 3;
                    // cout << "Checking for * or /" << endl;
                    return num;
            }
            else
                    cout << "Error! Input not valid!" << endl;
    } 
```

这是 main.cpp：

```
using namespace std;
#include <iostream>
#include <cstdlib>
#include <cstring>
#include "itop.h"

int main()
{
char *temp1;            //Instantiating variables.
char *temp2;
temp1 = new char[20];
temp2 = new char [20];
stack s;
do              //Checking commands.
{
    cout << "infix_to_postfix> ";
    cin >> temp1;
    if(strcmp(temp1, "quit") == 0)
    {
        return 0;
    }
    if(strcmp(temp1, "convert") != 0)
    {
        cout << "Error! Invalid command." << endl;
    }
    cin >> temp2;
    if(strcmp(temp1, "convert") == 0)
    {
        for(int i=0; i<sizeof(temp2); i++)
        {
            if(isdigit(temp2[i]))
            {
                cout << atoi(&temp2[i]);
            }
            else if(s.rank(temp2[i]) < s.rank(s.head->data))
            {
                sNode temp = s.pop();
                cout << temp.data;
            }
            else
            {
                s.push(temp2[i]);
            }
        }
    }
    else
    {
        cout << "Error! Command not supported." << endl;
    }
}while(strcmp(temp1, "quit") != 0);

return 0;
} 
```

该函数在

```
else if(s.rank(temp2[i]) < s.rank(s.head->data)) 
```

问题就在这里：

```
 else if(x == '+' || x == '-')
            {
                    num = 2;
                    // cout << "Checking if + or -" << endl;
                    return num;
                    // cout << "After return." << endl;
            } 
```

特别是在返回 num 之前，我收到“分段错误（核心转储）”错误消息。我使用过 gdb，我所知道的是，在“检查 + 或 -”之后，我看到“$1 = 2”。我不太确定这意味着什么，但这是我想要返回的。

感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T02:57:39.587

您的代码中有很多错误。您的堆栈实现是错误的。`push()`例如只设置`head`一遍又一遍。这导致您的堆栈类只能容纳一个元素。`next`从未设置为任何内容，因此它包含随机垃圾。再往下，你有这个：

```
for(int i=0; i<sizeof(temp2); i++) 
```

`sizeof(temp2)`不给你字符串`temp2`指向的字符数。它为您提供指针`temp2`本身的大小。此外，您最终`s.head`会从一个空堆栈中读取，这将是一个指向随机垃圾的指针。到那时，所有的赌注当然都结束了。除了崩溃和燃烧，你别无他求。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-20T03:18:13.983

修复1：写一个合适的构造函数。

```
 stack()
    {
    head=NULL;
    cout << "Initiliazing stack." << endl;
    } 
```

修复2：编写一个额外的方法来检查堆栈是否为空。

```
int stack::empty()
{
    if(head == NULL)
      return true;
    else
      return false;
} 
```

修复3：在使用堆栈数据之前检查堆栈是否为空。

```
else if(!s.empty() && s.rank(temp2[i]) < s.rank(s.head->data))
{
 ...
} 
```

修复 4：修复其余代码逻辑。

# meteor - 使用 accounts-ui 包时，meteor 中是否有 post createUser 挂钩？

> ID：12984637
> 
> 赞同：25
> 
> 时间：2012-10-20T02:08:50.940
> 
> 标签：meteor

假设我有一个待办事项应用程序，我想确保每个注册的用户至少有一个待办事项开始，例如“第一个要划掉的待办事项！”，我将如何在流星中做到这一点？

一般来说，按照我的看法，我可以在第一次创建用户时执行（理想），或者检查他们每次登录时是否需要新的待办事项（不太理想）。在后一种情况下，我可以检查`Todos.findOne()`，如果计数为 0，则添加一个。但是，似乎无论是在页面加载时在路由器中执行此操作，还是在某些模板的`.rendered`功能上执行此操作，我正在检查的集合尚未加载，因此我总是创建一个新的待办事项，即使确实存在一个。因此，如果有人可以解释如何解决这个问题，那就太好了。

但是，理想情况下，我想要的是能够在创建用户时创建一个新的 Todo。有一种`Accounts.onCreateUser`方法，但用于向用户配置文件添加附加信息，而不是创建后挂钩。还有一种使用`Accounts.createNewUser`回调以编程方式创建用户的方法，但我使用的是 accounts-ui 包，所以我没有以编程方式添加用户。在不太理想的情况下，我可以在用户登录时检查 Todo，但即使在这种情况下，似乎也存在联合`Accounts.loginWithXService`登录，因此不确定在任何用户登录时如何处理回调，无论服务类型如何.

我想我一定遗漏了一些简单的东西，如果这非常明显，请道歉。任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2014-03-04T20:03:13.210

Meteor API 现在有了钩子[`onCreateUser`](http://docs.meteor.com/#accounts_oncreateuser)：

```
Accounts.onCreateUser(function (options, user) {
  Todos.insert({
    owner: user._id,
    text: "First todo to cross off!",
  });

  // We still want the default hook's 'profile' behavior.
  if (options.profile)
    user.profile = options.profile;

  return user;
}); 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-11-20T22:18:06.103

我使用了上面描述的 _.wrap 方法，但想包含一个额外的建议。从新的自定义回调中调用原始回调是个好主意。Meteor 在回调上做了一些我们不想错过的事情。

修改后的代码对我来说就像一个冠军：

```
Accounts.createUser = _.wrap(Accounts.createUser, function(createUser) {

    // Store the original arguments
    var args = _.toArray(arguments).slice(1),
        user = args[0];
        origCallback = args[1];

    var newCallback = function(error) {
        // do my stuff

        origCallback.call(this, error);
    };

    createUser(user, newCallback);
}); 
```

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2015-12-06T04:21:17.280

## 如果您使用的是[UserAccounts](http://useraccounts.meteor.com/)包：`postSignUpHook`现在存在。

Splendido 刚刚合并了我针对这个问题的拉取请求。

```
AccountsTemplates.configure({
    /*...*/
    postSignUpHook: /*[callback with your actions post full user creation goes here]*/,
    /*...*/
} 
```

[文档](https://github.com/meteor-useraccounts/core/blob/master/Guide.md#options)（您需要向下滚动它是最后一个钩子）：

> func(userId, info) Called, server side only, just after a successfull user account creation, post submitting the pwdForm for sign-up: allows for custom actions on the data being submitted after we are sure a new user was successfully created. A common use might be applying roles to the user, as this is only possible after fully completing user creation in alanning:roles. The userId is available as the first parameter, so that user object may be retrieved. The password is not available as it's already encrypted, though the encrypted password may be found in info if of use.

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-11-07T19:37:20.703

您可以通过包装它们来搭载 Meteor 调用的函数。我还使用了accounts-ui 和accounts-password 包，并使用Underscore 的_.wrap 方法重新定义了loginWithPassword 函数。下划线默认包含在 Meteor 中。

我使用这样的东西登录：

```
Meteor.loginWithPassword = _.wrap(Meteor.loginWithPassword, function(login) {

  // Store the original arguments
  var args = _.toArray(arguments).slice(1),
      user = args[0],
      pass = args[1],
      origCallback = args[2];

  // Create a new callback function
  // Could also be defined elsewhere outside of this wrapped function
  var newCallback = function() { console.info('logged in'); }

  // Now call the original login function with
  // the original user, pass plus the new callback
  login(user, pass, newCallback);

}); 
```

在这种特定情况下，上面的代码将在您的客户端代码中某处。

对于 Accounts.createUser，它可能看起来像这样（也在客户端代码中的某处）：

```
Accounts.createUser = _.wrap(Accounts.createUser, function(createUser) {

  // Store the original arguments
  var args = _.toArray(arguments).slice(1),
      user = args[0],
      origCallback = args[1];

  // Create a new callback function
  // Could also be defined elsewhere outside of this wrapped function
  // This is called on the client
  var newCallback = function(err) {
    if (err) {
      console.error(err);
    } else {
      console.info('success');
    }
  };

  // Now call the original create user function with
  // the original user object plus the new callback
  createUser(user, newCallback);

}); 
```

希望这会有所帮助。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-10-25T02:39:20.570

Meteor 开发人员之一在 Meteor google 小组中回答了这个问题：[https ://groups.google.com/forum/?fromgroups=#!topic/meteor-talk/KSz7O-tt4w8](https://groups.google.com/forum/?fromgroups=#!topic/meteor-talk/KSz7O-tt4w8)

基本上，现在，在使用 accounts-ui 时没有 createUser 挂钩，只有在通过`Accounts.createUser`. 此外，没有用于登录的钩子，除非使用较低级别的登录功能`loginWithFacebook`，例如 等。我还没有找到解决这个问题的理想方法，但有几种处理方法：

*   如果需要在集合中输入默认值，请在该集​​合的订阅中使用 onComplete 参数。在此回调中，如果集合中没有条目，则添加一个。这避免了我在帖子中提到的第一个问题，即不知道何时加载集合，但并不理想，因为集合可能为空，因为用户已经删除了第一个默认集合：

    ```
    Meteor.subscribe 'todos', user: Meteor.userId(), () ->
      todo = Todos.findOne()
      unless todo
        Todos.insert user: Meteor.userId() 
    ```

*   您可以使用响应式方法设置登录挂钩`Meteor.autorun`来检查 Meteor.userId() 中的更改。只有当用户登录/重新加载页面时才会调用它。这对于非收藏的东西更有用，因为当 Meteor.userId 设置时，不能保证加载集合：

    ```
    Meteor.autorun () ->
      if Meteor.userId()
        console.log 'Do some post login hook' 
    ```

所以我认为有效的解决方案仍然存在，但想用我在此期间找到的解决方法来更新这篇文章。

* * *

## 回答 #6

> 赞同：-3
> 
> 时间：2015-02-02T16:27:14.280

我认为这更好地回答了这个问题：[如何在 Meteor 中创建用户服务器端？](https://stackoverflow.com/questions/11629759/how-can-i-create-users-server-side-in-meteor/22649527#22649527)

在简历中：

```
 Accounts.createUser({
                        username: username,
                        email : email,
                        password : password,
                        profile  : {
                            //publicly visible fields like firstname goes here
                        }

}); 
```

查看流星文档了解更多信息： http: [//docs.meteor.com/#/full/accounts_createuser](http://docs.meteor.com/#/full/accounts_createuser)

# c# - 在表单之间传递值；精制

> ID：12984639
> 
> 赞同：0
> 
> 时间：2012-10-20T02:08:54.613
> 
> 标签：c#, winforms, forms, variables, radio-button

基本上; Form1 有 2 个按钮，Form2 有 1 个按钮。当您单击 Form2 的按钮时，它会检查您单击了 Form1 上的哪个按钮，根据您单击的按钮（在 Form1 上）打开 Form3 或 Form4。

* * *

所以我使用了 Mark Halls 在表单之间传递变量的第一种方法。现在是我封闭改进的后半部分。

表格1

```
private void btnLogin_Click(object sender, EventArgs e)
        {
            // Call function while storing variable info.
            Account("login");
        }

        private void btnRegister_Click(object sender, EventArgs e)
        {
            // Call function while storing variable info.
            Account("register");
        }

        // Function used to pass Variable info to Account form while opening it as instance.
        private void Account(string formtype)
        {
            // Generate/Name new instant of form.
            frontend_account frmAcc = new frontend_account();
            // Pass variable to instance.
            frmAcc.CheckButtonClick = formtype;
            // Show form instance.
            frmAcc.Show(this);
            // Hide this instance.
            this.Hide();
        } 
```

表格2

```
// String Variable to store value from Login.
        public string CheckButtonClick { get; set; }

        private void btnContinue_Click(object sender, EventArgs e)
        {
            // If statement to open either Main form or Registration form, based on Login variable.
            if (CheckButtonClick == "login")
            {
                // Generate/Name new instant of form.
                frontend_main frmMain = new frontend_main();
                // Show form instant.
                frmMain.Show();
                // Close this instant.
                this.Close();
            }
            else if (CheckButtonClick == "register")
            {
                // Generate/Name new instant of form.
                frontend_register frmReg = new frontend_register();
                //  Show form instant.
                frmReg.Show();
                // Close this instant.
                this.Close();
            }
        } 
```

在 Form2 上有**两个**单选按钮，我可以熟练使用该代码在打开表单时设置选项卡控件的焦点吗？IE。如果选中 radClient，则在打开 winform 后将焦点设置在 tabcontrol 上，否则如果选中 radStudent，则在打开 winform 后将焦点设置在 tabcontrol（其他页面）上......如果没有选中收音机，我想不要打开 winform。

我相信这将成为焦点；

```
// Sets focus to first tab.
tabRegister.SelectedTab = tabRegister.TabPages[0];
// Sets focus to second tab.
tabRegister.SelectedTab = tabRegister.TabPages[1]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-20T03:38:53.957

在您的示例中，我看到的第一个问题是您正在关闭您的父表单，该表单关闭您的 Form1 并处理您的 Form2，我要做的是隐藏 Form1 而不是关闭它，然后我将在 Form2 上创建一个公共属性以传入被选中的按钮。但是，无论何时您打开和关闭多个表单都会变得混乱，我会为您的其他表单创建用户控件并将它们换出面板。第一个示例是如何按照您要求的方式进行操作。

**形式**

```
public partial class Form1 : Form
{
    public Form1()
    {
        InitializeComponent();
    }

    private void btnLogin_Click(object sender, EventArgs e)
    {
        ShowForm2("login");
    }

    private void btnRegister_Click(object sender, EventArgs e)
    {
        ShowForm2("register");
    } 

    private void ShowForm2(string formtype)
    {
        Form2 f2 = new Form2(); // Instantiate a Form2 object.
        f2.CheckButtonClick = formtype;
        f2.Show(this); // Show Form2 and  
        this.Hide(); // closes the Form1 instance.  

    }
} 
```

**表格2**

```
ublic partial class Form2 : Form
{
    public Form2()
    {
        InitializeComponent();
    }

    public string CheckButtonClick { get; set; }

    private void button1_Click(object sender, EventArgs e)
    {
        if (CheckButtonClick == "login")
        {
            Form3 f3 = new Form3(); // Instantiate a Form3 object.  
            f3.Show(); // Show Form3 and  
            this.Close(); // closes the Form2 instance.  
        }
        else if (CheckButtonClick == "register")
        {
            Form4 f4 = new Form4(); // Instantiate a Form4 object.  
            f4.Show(); // Show Form4 and  
            this.Close(); // closes the Form2 instance.  
        } 

    }
} 
```

**Form3 和 Form4**请注意，因为 Form1 早就被这些表格遗忘了，我搜索它以打开备份

```
public partial class Form3 : Form
{
    public Form3()
    {
        InitializeComponent();
    }

    private void Form3_FormClosed(object sender, FormClosedEventArgs e)
    {
        FormCollection frms = Application.OpenForms;
        foreach (Form f in frms)
        {
            if (f.Name == "Form1")
            {
                f.Show();
                break;
            }
        }
    }
} 
```

UserControls 的第二个选项有一个带有面板的表单。它使用事件来通知表单以更改控件以及 UserControl2 上的公共属性

```
public partial class Form1 : Form
{
    string logonType;
    public Form1()
    {
        InitializeComponent();
    }

    private void userControl1_LoginOrRegisterEvent(object sender, LoginOrRegisterArgs e)
    {
        logonType = e.Value;
        userControl2.BringToFront();
    }

    private void userControl2_ControlFinshedEvent(object sender, EventArgs e)
    {
        if (logonType == "logon")
            userControl3.BringToFront();
        else if (logonType == "register")
            userControl4.BringToFront();
    }

    private void userControl3_ControlFinshedEvent(object sender, EventArgs e)
    {
        userControl1.BringToFront();
    }

    private void userControl4_ControlFinshedEvent(object sender, EventArgs e)
    {
        userControl1.BringToFront();
    }
} 
```

**用户控件1**

```
public partial class UserControl1 : UserControl
{
   public delegate void LoginOrRegisterHandler(object sender, LoginOrRegisterArgs e);
   public event LoginOrRegisterHandler LoginOrRegisterEvent;

    public UserControl1()
    {
        InitializeComponent();
    }

    private void button1_Click(object sender, EventArgs e)
    {
        LoginOrRegisterArgs ea = new LoginOrRegisterArgs("logon");
        LoginOrRegisterEvent(sender, ea);
    }

    private void button2_Click(object sender, EventArgs e)
    {
        LoginOrRegisterArgs ea = new LoginOrRegisterArgs("register");
        LoginOrRegisterEvent(sender, ea);
    }
}

public class LoginOrRegisterArgs
{
    public LoginOrRegisterArgs(string s) {Value = s;}
    public string Value {get; private set;}
} 
```

**用户控件2**

```
public partial class UserControl2 : UserControl
{
    public delegate void ControlFinishedHandler(object sender, EventArgs e);
    public event ControlFinishedHandler ControlFinshedEvent;
    public UserControl2()
    {
        InitializeComponent();
    }
    public string SetLogonType { get; set; }

    private void button1_Click(object sender, EventArgs e)
    {
        ControlFinshedEvent(sender, new EventArgs());
    }
} 
```

**UserControl3 & UserControl4**完全相同，只是类名不同

```
public partial class UserControl3 : UserControl
{
    public delegate void ControlFinishedHandler(object sender, EventArgs e);
    public event ControlFinishedHandler ControlFinshedEvent;
    public UserControl3()
    {
        InitializeComponent();
    }

    private void button1_Click(object sender, EventArgs e)
    {
        ControlFinshedEvent(sender, new EventArgs());
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-20T02:16:37.497

正如我在评论中建议的那样，我知道在表单之间传递数据的最好方法之一是使用事件。

基本上，在“子”表单中，您声明将由“主”表单处理或监听的事件。

请参阅我评论中的参考答案，如果您对如何调整它有具体问题，请提出。

干杯

# ruby-on-rails - Rails：Amazon S3 + Paperclip 不在数据库中存储任何内容？

> ID：12984640
> 
> 赞同：1
> 
> 时间：2012-10-20T02:08:58.010
> 
> 标签：ruby-on-rails, amazon-s3

嗨，我目前正在为用户制作一个应用程序来上传图片。我正在尝试添加 Amazon S3 以准备部署我的应用程序。我没有收到任何错误，但在尝试设置 Amazon S3 后，我的图片无法正确上传。图片正在正确上传到亚马逊，而不是在我的数据库中，因此当我上传图片并尝试在视图中循环显示它们时，什么也没有显示。任何人都可以帮助我吗？

顺便说一句，我正在使用 Paperclip + jQuery 文件上传（用于多个图片上传）+ Amazon S3 + s3_direct_upload gem (https://github.com/WayneHoover/s3_direct_upload)

配置路线（注意图片嵌套在相册和用户中）这里没有问题

```
Pholder::Application.routes.draw do
resources :users do
  resources :friends
  resources :albums do
    resources :photos
  end
end
end 
```

users/show.html.erb（应该显示我上传的图片的页面，即使在我上传后也没有显示新图片）

```
 <% @user.albums.each do |album| %>
        <div class="albumthumb">
            <%= link_to image_tag(!album.photos.empty? ? album.photos.first.avatar.url(:medium) : ("questionmark.png"), :size => "150x150"), user_album_path(@user, album) %>
            <br>
            <%= album.name %>
        </div>
    <% end %> 
```

照片/new.html.erb（这里也有问题）

```
 #my new uploader that works with amazon s3, but doesn't seem to be storing the pics in my database
<%= s3_uploader_form post: user_album_photos_path, as: "photo[avatar]", id: "myS3Uploader" do %>
  <%= file_field_tag :file, multiple: true %>
<% end %>

#this is my old upload form that worked fine when uploading pics to my local public directory. 
#
#<% provide(:title, "Upload pictures") %>
#
#<%= form_for([@user, @album, @photo], :html => { :multipart => true }) do |f| %>
#
#<%= f.file_field :avatar, multiple: true, name: "photo[avatar]" %>

<div id="pics">
    <%= render :partial => "photo", :collection => @photos %>
</div>

<script id="template-upload" type="text/x-tmpl">
<div class="upload">
  {%=o.name%}
  <div class="progress"><div class="bar" style="width: 0%"></div></div>
</div>
</script> 
```

这是我在 github 上的代码：[https ://github.com/EdmundMai/railstest/blob/master/app/views/photos/new.html.erb](https://github.com/EdmundMai/railstest/blob/master/app/views/photos/new.html.erb)

如果您需要我上传更多代码，请告诉我。请帮忙！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T02:25:35.170

JQuery 文件上传只是将文件上传到 Amazon S3：它不会将所需的回形针记录添加到数据库中。为此，您需要执行更多步骤。请参阅[jquery-fileupload-rails-paperclip-example](https://github.com/tors/jquery-fileupload-rails-paperclip-example)或[jQuery File Upload v4 for Rails 3](https://github.com/blueimp/jQuery-File-Upload/wiki/jQuery-File-Upload-v4-for-Rails-3)。

# c# - 适用于 Visual Studio 2010 的 AcceptButton 和 CancelButton

> ID：12984642
> 
> 赞同：0
> 
> 时间：2012-10-20T02:10:22.363
> 
> 标签：c#, visual-studio-2010, acceptbutton

Visual Studio 2010 的 AcceptButton 和 CancelButton 的表单属性在哪里？我想将我的 btnClose 设置为 CancelButton，我想将我的 btnEnter 设置为我的 AcceptButton。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T02:35:26.060

您正在谈论的属性是表单上的 AcceptButton 和 CancelButton。

确保在表单设计器中选择表单，然后查看属性面板。

干杯

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-20T02:21:41.583

这是 VS 2010 中的 Windows 窗体吗？然后，您将制作两个按钮并在后面的代码中关联操作。制作两个按钮，btnCancel 和 btnEnter 并生成代码隐藏，只需双击 UI 中的按钮并提供代码。

取消按钮的代码类似于：

```
void btnCancel_Close(object sender, System.EventArgs e){
    this.close();
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-20T02:42:42.483

确保您的表单派生自`System.Windows.Forms.Form`，然后在设计器中确保您选择了表单。在“属性”窗口中，组合框应该看到类似

**Form1** System.Windows.Forms.Form

然后在 Misc Grouping 下，您应该看到可以设置为表单上任何按钮的`AcceptButton`和属性。`CancelButton`同样，确保表单是设计器窗口中的选定组件。

# mysql - mysql 的第二个实例关闭/不启动没有警告/错误？

> ID：12984643
> 
> 赞同：0
> 
> 时间：2012-10-20T02:10:36.073
> 
> 标签：mysql

我有一个外部 HD，我想在上面运行第二个 mysql 实例。我使用 windows 安装程序在 windows7 上安装/配置 mysqld 作为服务。我把 my.ini 从

```
C:\Program Files\MySQL\MySQL Server 5.5\my.ini 
```

然后编辑了端口（client 和 mysqld）、datadir 和 innodb_data_home_dir。运行此命令后

```
"C:\Program Files\MySQL\MySQL Server 5.5\bin\mysqld" --defaults-file="f:/dev/my.ini" 
```

我发现了一个关于 innodb_data_home_dir 目录不存在的错误。之后我再次运行命令。mysqld 只需启动一秒钟然后立即关闭。我在命令提示符中看不到任何消息。我知道这个命令行参数是正确的，因为我看到 mysqld 服务使用相同的服务，除了不同的 my.ini 路径。它还告诉我该目录不存在，所以我知道它正在读取新的 ini 文件。

我如何弄清楚为什么这个 mysqld 的第二个实例正在关闭？我如何让 2 个实例运行？

我正在使用 v 5.5

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-20T03:03:34.773

Mysql 文档很白痴，并且缺少包装（缺少 mysql_install_db）。我必须下载mysql-5.5.28-win32.zip（注意不是windows 32下的mysql-5.5.28.zip。它的来源根本没有提到）然后将performance_schema/和mysql/复制到数据目录然后mysqld可以跑...

# javascript - 固定定位的 div 在 FireFox 中滚动时移动到一边，在其他浏览器中工作正常

> ID：12984644
> 
> 赞同：0
> 
> 时间：2012-10-20T02:11:04.877
> 
> 标签：javascript, jquery, html, css, firefox

我的网站上有 2 个页面具有相同的布局。每个页面在右侧边栏中都有一个 div，当您向下滚动页面时，它会在 jquery 的帮助下更改它的类。

我注意到 FF 中的一个页面上有一个奇怪的行为。

在此页面[http://bit.ly/QDhrz8](http://bit.ly/QDhrz8)上，当我开始向下滚动时，右侧边栏中的 div 仅在 Firefox 中向右移动。Chrome 和 IE 按预期工作。

在另一页[http://bit.ly/RLZ4ZK](http://bit.ly/RLZ4ZK)上，它可以正常工作，而无需在滚动 div 上向右移动，并且在 FireFox、Chrome、IE 中的工作方式相同，没有问题。

两个页面都使用相同的布局、css 和 java 代码。

是什么导致 div在 Firefox中跳转到[http://bit.ly/QDhrz8这个页面？](http://bit.ly/QDhrz8)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T02:15:42.583

我不能说为什么会这样，但我发现你可以通过改变这一行来摆脱“跳跃”效应：

```
<td width="664" valign="top" class="content2"> 
```

对此：

```
<td valign="top" class="content2"> 
```

我相信在 html 中设置的宽度，不知何故与`padding`- 但我不能说这是真正的原因，但至少上面的修复似乎解决了你在 FF 中的问题

# ruby-on-rails-3 - ActionMailer 调试

> ID：12984652
> 
> 赞同：2
> 
> 时间：2012-10-20T02:13:18.093
> 
> 标签：ruby-on-rails-3, email, actionmailer

我正在尝试在 Rails 中使用[Action Mailer](http://railscasts.com/episodes/206-action-mailer-in-rails-3)向用户发送电子邮件。

```
def create
  ...
  if @post.save
    UserMailer.archive_confirmation(@site).deliver
  end
end 
```

但是当我尝试它时，我没有收到任何电子邮件，并且我不知道如何调试（由于该`create`方法成功运行，并且其他一切都按预期进行，因此没有错误消息）哪里可能`ActionMailer`出错？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-20T02:39:52.567

检查您的 RAILS 日志，`APP_ROOT/log/development.log`或`APP_ROOT/log/production.log`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-09-05T13:18:26.490

如果我正在编写代码以在控制器中发送电子邮件，我可以像这样编写来处理我的应用程序中的救援，并且我可以显示救援中出现的错误消息，我们可以显示。我在控制器中使用这样的东西：

```
if @user.save
  begin
  UserMailer.welcome_email(@user).deliver
  flash[:success] = "#{@user.name} created"
  rescue Net::SMTPAuthenticationError, Net::SMTPServerBusy, Net::SMTPSyntaxError, Net::SMTPFatalError, Net::SMTPUnknownError => e
  flash[:notice]=e.message   
  end
  redirect_to home_index_path
end 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-04-21T10:56:45.183

在您各自的环境文件中：

```
 ## config/environments/development.rb
  config.action_mailer.raise_delivery_errors = true 
```

# javascript - Javascript 输出不接受任何 CSS 样式

> ID：12984654
> 
> 赞同：0
> 
> 时间：2012-10-20T02:14:11.383
> 
> 标签：javascript, jquery, css

我正在使用 simplecart.js，它为我生成数据以添加到购物车，然后为我将其传递给 PayPal。

我已经成功地添加了“添加到购物篮”和“结帐”功能，但是我发现不可能对 JS 生成的代码进行样式设置，因为没有任何样式应用于它。

这是网站给我的代码，它从存储的数据中生成许多项目，如名称、数量等。它正确输出所有信息，但应用于类名的任何样式都不起作用。

这是生成数据的代码：

```
<div class="simpleCart_items"></div> 
```

这是来自网络浏览器的结果：

```
<div class="simpleCart_items"><div>
<div class="headerRow">
<div class="item-name">Name</div>
<div class="item-price">Price</div>
<div class="item-quantity">Qty</div>

<div class="item-remove"></div>
</div>
<div class="itemRow row-0 odd" id="cartItem_SCI-3">
<div class="item-name">The &nbsp;Jenny&nbsp;Snood&nbsp;£11</div>
<div class="item-price">£11.00</div>
<div class="item-quantity">1</div>
<div class="item-remove">
  <a href="javascript:;" class="simpleCart_remove">Remove</a>
</div>
</div>
</div>
</div> 
```

浏览器正确接收所有数据，但对类名应用任何样式都无济于事。例如，我有：

```
.headerRow{
background-colour:#0F0;
} 
```

结果应该是背景`headerRow`是石灰，但没有任何反应。它没有正确调用样式。

我已经尝试了所有方法，但没有一个类会获取应用于它们的样式。

这是它的外观截图，显然不是很好的无样式，但我根本无法对其应用任何样式。

![购物车无样式](../Images/74835f0d21fb0457f1f575b21bd053bd.png)

[这是现场直播的链接](http://www.rubytuesdaycreative.co.uk/testsite/snood.html)

进一步的例子：

我添加了生成总数的代码：

```
<div class="simpleCart_total"></div> 
```

我已经尝试给它自己的新类，并使用 !important 对原始类进行样式化 - 这些都不起作用。

```
<div class="totals simpleCart_total"></div>
.simpleCart_total{
  background-color:#0F0 !important;
}
.totals{
  background-color:#0F0 !important;
} 
```

以上似乎都没有任何影响。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-20T02:23:49.010

还有一些其他 css 或内联 javascript 会影响您尝试使用的自定义样式。

要缓解此问题，请执行以下操作之一：

*   在每个 css 语句之后添加 !important，如下所示：

    .headerRow{背景颜色：#0F0 !important;}

*   重新排序 css 文件，使您的自定义 css 文件位于底部

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-20T02:19:46.547

这里的问题是样式是由 js 在 CSS 之后动态应用的（即在插件初始化期间）。我想，你唯一的希望是在初始化之后用你自己的 js 来设置它的样式。

您可以在 Firebug 中检查...如果您查看那里的元素，您应该会看到一堆内联样式应用于它们。这些将胜过您在标题中的 CSS（甚至是您事先提供的内联 CSS）。

**编辑**：我在相关指令之前看到了一些垃圾字符（以及另一个答案中指出的那些）。我会尝试在前面的指令之后和损坏的指令之前删除所有空白。js似乎没有动态改变任何东西。

# php - 我无法获得用户 facebook 的会话，getUser 返回 0 - codeigniter

> ID：12984663
> 
> 赞同：0
> 
> 时间：2012-10-20T02:16:00.700
> 
> 标签：php, facebook, codeigniter

问候，

我对 Facebook SDK-PHP 和 Codeigniter 有疑问。

当我尝试捕获和获取该用户的基本数据时，我没有获得该用户的会话。

我得到的错误是：“必须使用活动访问令牌来查询有关当前用户的信息。”

当我应用“getUser()”时，我得到“0”。

注意：我下载了 php-sdk 并将文件 base_facebook.php 和 facebook.php 放在我的目录库中

在我的 application/config/config.php 中，我放置了我的 facebook 应用程序的密钥和 app_secret。

配置文件：

```
$config['base_url'] = 'http://localhost/myapp_local';
$config['app_id'] = 'xxxxxxxxxxxxxx';
$config['secret'] = 'xxxxxxxxxxxxxxxxxxxxxxxx';
$config['app_name'] = 'http://apps.facebook.com/myapp_local/'; 
```

在我的 Controller Main.php 中，我有以下代码：

```
class Main extends CI_Controller {

    public function __construct() {
        parent::__construct();
        $fb_config = array(
            'appId' => $this->config->item('app_id'),
            'secret' => $this->config->item('secret')
        );
        $this->load->library('facebook', $fb_config);

    private function _getInfoUserFB() {
        try {
            $fb_id = $this->facebook->getUser();
            if ($fb_id) {
                $fb_data = $this->facebook->api('/me');
                return $fb_data;
            }
        } catch (Exception $exc) {
            echo $exc;
        }
    }
       [....]
} 
```

现在，在我的变量 $fb_id 中，获得布尔值，我总是有“0”。因此，当我尝试获取当前用户 facebook 的数据时，总是会出现异常消息：“必须使用活动访问令牌来查询有关当前用户的信息。”

```
$fb_data['id'] = NULL
$fb_data['first_name'] = NULL
$fb_data['last_name'] = NULL 
```

我在这里做错了什么？我错过了任何步骤或设置？

注意 2：我没有使用 Facebook 登录的按钮，我的应用通过我在 facebook 上的应用配置直接连接到 facebook。（画布 URL、安全画布 URL、画布页面、站点 URL）

注意 3：我的应用程序有一些需要的权限，所以我把必要的权限放在 Settings-Permissions 但是没有显示“Auth Referrals”选项来显示对话框确认权限。

我使用 CodeIgniter 2.1.3 版和 PHP-SDK v 3.2.0

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T07:37:06.100

你必须去 Facebook 开发者网站 -> 应用程序 -> 权限。并为您的应用设置基本信息权限。

然后在你的函数`getLoginUrl(array("scope" => "user_about_me)))`中，你必须给出参数。

最后，您必须保存访问令牌`$this->facebook->getAccessToken();`

有问题可以问我。我已经用几乎所有社交媒体平台设置了我的 Codeigniter :)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-20T04:29:23.260

Facebook 对`localhost`. 我也经历过几次。我找到的让我在本地开发的解决方案是编辑我的主机文件（`C:\Windows\system32\drivers\etc\hosts`或`/etc/hosts`），并在其中添加类似于以下行的内容：

```
127.0.0.1    myfbapp.local 
```

使用它，如果您将浏览器指向`http://myfbapp.local/`，它实际上会转到 127.0.0.1 ，这意味着`localhost`. 当然，您还必须更新 CI 配置，并将基本 URL 更改为`http://myfbapp.local`.

据我所知，如果`.`域名中没有点 ()，Facebook PHP SDK 设置 cookie 会遇到问题，所以这正是我的解决方案所做的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-20T18:07:19.573

好的！，我解决了。修复的是与较新版本的交互必须以这种形式： [http ://www.galalaly.me/index.php/2012/04/using-facebook-php-sdk-3-with-codeigniter-2-1/](http://www.galalaly.me/index.php/2012/04/using-facebook-php-sdk-3-with-codeigniter-2-1/)

然后，您必须在您的应用第一次加载时调用第一次获取当前用户信息的函数。换句话说，您在网站的 MAIN、INDEX 视图中调用该函数。

如果您在其他时间调用，您的函数将无法获取当前用户的 access_token。

# networking - 是否有文章描述如何实现早期 UNIX 的传输提供程序？

> ID：12984666
> 
> 赞同：0
> 
> 时间：2012-10-20T02:16:41.347
> 
> 标签：networking, operating-system

我正在编写一个具有网络功能的简单操作系统。但我不知道如何开始网络部分。Linux 设备驱动程序不易阅读。

你能给我一些材料或建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-20T02:41:58.523

看看[lwIP](http://savannah.nongnu.org/projects/lwip/) - 轻量级 TCP/IP 堆栈。它实现了发送/接收 UDP 数据报和建立 TCP 连接的所有必要功能。

lwIP 是在 BSD 许可下获得许可的，因此您甚至可以在非开源项目中使用它。

# php - 使用 .htaccess 将所有目录请求重写到子目录

> ID：12984671
> 
> 赞同：0
> 
> 时间：2012-10-20T02:17:49.823
> 
> 标签：php, apache, .htaccess, symfony

我正在尝试将所有对`/myproj`（或其中的任何文件）的请求重写为`/myproj/web`使用 .htaccess。

我遇到的问题是带有斜杠（例如，`/myproj/somefile.php/`）的请求以某种方式被重写为`/docroot/index.php`而不是`/myproj/web/somefile.php/`.

我的`/myproj/.htaccess`文件：

```
<IfModule mod_rewrite.c>
    RewriteEngine On
    RewriteRule ^(.*)$ /myproj/web/$1 [QSA,L]
</IfModule> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-20T02:38:52.023

看看[这个答案](https://stackoverflow.com/questions/8443649/configuring-apache-to-not-rewrite-urls-for-file-slash)。这是我遇到的同样的问题，由stackoverflow上的一位亲爱的同行回答。

# python - 如何在所有操作系统平台上使用 Python 获取网络适配器列表？

> ID：12984677
> 
> 赞同：0
> 
> 时间：2012-10-20T02:19:09.023
> 
> 标签：python, macos, networking

如何在所有操作系统平台上使用 Python 获取网络适配器列表？如果无法以跨平台方式执行此操作，我该如何在 OS X 上执行此操作？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-20T02:26:51.187

[**netifaces**](http://pypi.python.org/pypi/netifaces/)似乎可以在 Mac **OS X**、Windows XP、Windows Vista、Linux 和 Solaris 上完成这项工作：

```
sudo easy_install netifaces 
```

...进而...

```
>>> import netifaces
>>> netifaces.interfaces() 
```

# java - 打包项目以进行部署 - Java

> ID：12984683
> 
> 赞同：0
> 
> 时间：2012-10-20T02:20:06.750
> 
> 标签：java, deployment, installation, packaging

我有一个 Java 应用程序（一个很大的应用程序，有许多外部 .jar 依赖项以及对图像的依赖项），我需要将它打包以便有人可以双击运行，例如。或者像这样简单的事情。

它使用 Java Persistence，因此它需要在 Java 项目的 Persistence.xml 文件中指定的 sql 连接。

我该如何打包？我刚在想：

1.  安装过程应该验证用户是否安装了 MySQL，如果没有，指导他们安装它
2.  安装过程可能会要求用户输入任何数据库的凭据，然后我可以在运行时更新 Persistence.xml

这是我的两个想法……但我不确定是否有已知的解决方案来解决这个问题。任何帮助将非常感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T02:49:45.770

我认为您应该看看嵌入式数据库解决方案，例如 H2。此外，您可以使用 maven 的 shadowing 或 jar 插件打包您的应用程序，激活 jar-with-dependencies 配置文件。

这将很好地免除您检查客户端计算机上运行的数据库服务器的工作，并且还将为您提供将应用程序捆绑在一个不错的 JAR 中的适当方法，尽管它有点大。

Maven 是一个构建生态系统和工具集，专为构建 Java 应用程序和执行代码而设计——通常可以做任何你能想象到的与代码相关的事情。

它有丰富的 API 用于开发插件，许多开发人员已经利用了这个功能。有许多插件可用于构建、启动和打包您的应用程序，以及帮助您管理应用程序依赖项。

Maven 的阴影以 的形式出现`maven-shade-plugin`，可[在此处获得](http://maven.apache.org/plugins/maven-shade-plugin/)获得。它的作用是帮助您从所有依赖项创建单个 JAR 文件。此外，还有`maven-jar-plugin`一个提供配置文件*jar-with-dependencies*。也可以从[这里](http://maven.apache.org/plugins/maven-jar-plugin/)访问。

另一方面，H2 是一个成熟的 RDBMS。这是网站： [http](http://www.h2database.com/html/main.html) ://www.h2database.com/html/main.html ，[这](http://www.h2database.com/html/tutorial.html)是一个教程。

您可以在此处找到有关嵌入数据库的信息：

*   [如何将H2数据库嵌入到交付给客户端的jar文件中？](https://stackoverflow.com/questions/4443192/how-to-embed-h2-database-into-jar-file-delivered-to-the-client)
*   [以编程方式嵌入 Java h2 数据库](https://stackoverflow.com/questions/154636/embedding-the-java-h2-database-programmatically)
*   [h2（嵌入式模式）数据库文件问题](https://stackoverflow.com/questions/2442867/h2-embedded-mode-database-files-problem)

我还建议您使用 H2/Hibernate/Spring 的组合，这是一个非常简单的设置，并为您提供了非常丰富的功能和易于使用的 API。

我希望这可以帮助你 ：）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-20T02:54:34.837

构建一个复杂的安装程序来检查大量的依赖关系，并在很多不同的平台上运行（我假设你想要）是复杂的。

我建议您查看安装程序生成器；请参阅[java 的最佳安装工具是什么？](https://stackoverflow.com/questions/173392/what-is-the-best-installation-tool-for-java)

我在一些产品中看到的另一种替代方法是使用 Perl 之类的脚本语言编写（非 GUI）安装程序或配置程序。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-20T05:07:58.437

我使用 ANT 编写了一个安装程序，但没有 GUI。另外，我使用了 Iz Pack（不错的选择），所以我认为这取决于您希望它有多聪明，如果您应该使用它，还是非技术人员等。

# java - 使用增量运算符打印 1 到 10

> ID：12984685
> 
> 赞同：0
> 
> 时间：2012-10-20T02:20:30.057
> 
> 标签：java, operators, increment

我的代码需要一些帮助。它根据需要打印`a`，而不是 1 到 10。我在这里想念什么？

```
public class numeros
{
     public static void main(String args[])    
     {
         int a;
         for (a=1; a<=10; a++)
         {
             System.out.println( "a");
         }     
     }
} 
```

它打印：

```
a
a
a
a
a
a
a
a
a
a
BUILD SUCCESSFUL (total time: 0 seconds) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-20T02:22:55.997

`"a"`是一个字符串，而不是变量`a`。更改`"a"`为`"Bugs Bunny"`并希望它可以清楚地说明正在发生的事情:-)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-20T02:22:37.200

您正在打印字符串“a”，而不是变量的值`a`。

最简单的事情就是做

`System.out.println(a);`

如果您查看 Javadocs，您会发现它`println`有许多签名，因此它可以采用许多不同的参数类型。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-20T02:22:53.863

```
class numeros{
public static void main(String [] args)
{
  int a;
  for(a = 1; a < 10; a++)
  {
     System.out.println(""+a);
  }
}
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-20T02:22:55.823

打印变量，而不是字符串“a”。

```
System.out.println(a); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-20T02:23:17.933

因为您将值为“a”的字符串而不是变量 a 传递给 System.out.printLn，所以请尝试使用 System.out.println(a)

# ios - 在ios中验证短信的电话号码

> ID：12984688
> 
> 赞同：0
> 
> 时间：2012-10-20T02:21:24.010
> 
> 标签：ios, sms, phone-number

我知道如何使用人员选择器 api 从通讯簿中获取电子邮件地址并将其验证为有效电子邮件。我现在正尝试对手机号码做同样的事情。该号码将被存储并稍后传递给短信 api。如何验证号码以确保它可以接收短信并使用来自不同国家的所有不同号码格式？

如果不可能准确，我宁愿允许一些在发送消息阶段失败的数字，而不是拒绝有效的数字。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-23T08:32:04.303

在 libPhoneNumber-iOS ( [https://github.com/iziz/libPhoneNumber-iOS](https://github.com/iziz/libPhoneNumber-iOS) )

你可以使用这种方式

```
NBPhoneNumberUtil *phoneUtil = [NBPhoneNumberUtil sharedInstance];

NSError *aError = nil;
NBPhoneNumber *aPhoneNumber = 
    [phoneUtil parse:@"13111589979" defaultRegion:@"US" error:&aError];

NBEPhoneNumberType type = [phoneUtil getNumberType:myNumber];
BOOL isValidType = (type == NBEPhoneNumberTypeMOBILE);

BOOL isValidNumber = 
    [phoneUtil isValidNumber:myNumber] && [phoneUtil isViablePhoneNumber:myNumber]; 
```

# php - MySQL：帮助更改此查询中的列名

> ID：12984692
> 
> 赞同：0
> 
> 时间：2012-10-20T02:21:37.947
> 
> 标签：php, mysql, sql, wordpress

我从这个查询中得到了错误的列名......例如，我得到了`meta_value`“resource_email”和“resource_phone”单元格的列名......它们的列名都是`meta_value`

```
SET @centerLat = '48.428289';
SET @centerLng = '-123.380585';

SELECT wp_posts.*, resource_email.meta_value, resource_phone.meta_value,
( 3959 * acos( cos( radians( @centerLat ) ) * cos( radians( lat.meta_value ) ) * cos( radians( lng.meta_value ) - radians(@centerLng) ) + sin( radians( @centerLat ) ) * sin( radians( lat.meta_value ) ) ) ) AS distance

FROM wp_posts

LEFT JOIN wp_postmeta AS lat 
    ON lat.post_id = wp_posts.id 
        AND lat.meta_key = 'bid_resource_lat'

LEFT JOIN wp_postmeta AS lng 
    ON lng.post_id = wp_posts.id 
        AND lng.meta_key = 'bid_resource_lng'

LEFT JOIN wp_postmeta AS resource_email 
    ON resource_email.post_id = wp_posts.id 
        AND resource_email.meta_key = 'bid_resource_primary_email'

LEFT JOIN wp_postmeta AS resource_phone 
    ON resource_phone.post_id = wp_posts.id 
        AND resource_phone.meta_key = 'bid_resource_primary_phone'

HAVING distance < 5
LIMIT 0 , 20 
```

不确定我需要如何更改此查询才能获得我真正需要的列名。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-20T02:25:53.420

使用`AS`：

```
SELECT wp_posts.*,
  resource_email.meta_value AS resource_email,
  resource_phone.meta_value AS resource_phone,
  ...
FROM ...
LEFT JOIN wp_postmeta AS resource_email ...
LEFT JOIN wp_postmeta AS resource_phone ... 
```

您提到的“单元格”实际上是表格（准确地说是表格别名）

如果数据库不接受等于表别名的列别名，则需要使用不同的表别名（或不同的列名）。

# java - 磁盘 I/O 算法的运行时间

> ID：12984699
> 
> 赞同：2
> 
> 时间：2012-10-20T02:22:42.333
> 
> 标签：java, algorithm, disk

在基于内存的计算模型中，通过考虑数据结构，可以抽象地完成唯一需要完成的运行时间计算。

但是，关于高性能磁盘 I/O 算法的文档并不多。因此，我提出以下一组问题：

1) 我们如何估计磁盘 I/O 操作的运行时间？我假设我们可以添加一组简单的常量来在磁盘上而不是在内存中查找值...

2）更具体地说，访问文件中特定索引的性能有什么区别？这是一个恒定时间操作吗？还是取决于指数“下降”多远？

3) 最后... JVM 如何优化对文件索引部分的访问？

而且......就资源而言 - 一般来说......是否有任何用于磁盘数据结构实现的好的习语或库？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-20T03:53:41.617

**1）**如果需要比较各种IO函数的速度，只需要运行一千次，记录运行时间。

**2）**这取决于您计划如何达到此索引。文件开头的索引与文件中间的索引完全相同。它只是指向磁盘上的一段内存。如果您通过从头开始并在那里进行到该索引，那么是的，这将需要更长的时间。

**3/4)**不，这些是由操作系统本身管理的。Java 的底层不足以处理这些类型的操作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-20T17:12:26.120

> 1) 我们如何估计磁盘 I/O 操作的运行时间？我假设我们可以添加一组简单的常量来在磁盘上而不是在内存中查找值...

在《[计算机系统：程序员的视角》的](http://csapp.cs.cmu.edu/public/ch6-preview.pdf)第 6 章中，他们给出了一个非常实用的数学模型，说明从典型磁盘读取一些数据需要多长时间。

要引用链接的 pdf 中的最后一页：

```
Putting it all together, the total estimated access time is
Taccess = Tavg seek + Tavg rotation + Tavg transfer
        = 9 ms      + 4 ms          + 0.02 ms
        = 13.02 ms

This example illustrates some important points:
• The time to access the 512 bytes in a disk sector is dominated by the seek time and the rotational
latency. Accessing the first byte in the sector takes a long time, but the remaining bytes are essentially
free.
• Since the seek time and rotational latency are roughly the same, twice the seek time is a simple and
reasonable rule for estimating disk access time. 
```

*注意，链接的 pdf 来自作者网站 == 没有盗版

当然，如果正在访问的数据是最近访问过的，那么它很有可能缓存在内存层次结构中的某个地方，在这种情况下，访问时间非常短（实际上，与磁盘访问时间相比，“接近即时”）。

> 2）更具体地说，访问文件中特定索引的性能有什么区别？这是一个恒定时间操作吗？还是取决于指数“下降”多远？

如果寻找的位置没有在附近按顺序存储，则可能会发生另一个寻找+旋转的时间量。这取决于您要查找的文件中的哪个位置，以及该数据物理存储在磁盘上的哪个位置。例如，碎片文件保证会导致磁盘寻道读取整个文件。

需要记住的是，即使您可能只请求读取几个字节，物理读取也往往以固定大小的块（扇区大小）的倍数发生，最终进入缓存。因此，您稍后可能会搜索文件中的某个附近位置，并幸运地发现它已经在缓存中。

顺便说一句-如果您对该主题感兴趣，那本书中有关内存层次结构的整章都是纯金的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-20T02:48:41.500

> 1) 我们如何估计磁盘 I/O 操作的运行时间？我假设我们可以添加一组简单的常量来在磁盘上而不是在内存中查找值...

没有这样的通用常数。事实上，物理磁盘 I/O、文件系统和操作系统的性能模型过于复杂，无法对具体操作做出准确的预测。

> 2）更具体地说，访问文件中特定索引的性能有什么区别？这是一个恒定时间操作吗？还是取决于指数“下降”多远？

预测太复杂了。例如，它取决于操作系统缓冲的文件量、物理磁盘参数（例如寻道时间）以及操作系统如何有效地调度磁盘活动……跨所有应用程序。

> 3）最后......JVM如何优化文件索引部分的访问？

它没有。这是操作系统级别的东西。

> 4) 磁盘数据结构实现有什么好的习语或库吗？

如果没有您的实际需求的更多细节，这很难回答。但最好的想法是不要自己尝试和实施这种事情。找到一个非常适合您的要求的现有库。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-20T08:41:12.713

> 高性能磁盘 I/O 算法。

硬件的性能通常非常重要，以至于你在软件中所做的事情并不重要。您应该首先考虑为这项工作购买合适的硬件。

> 我们如何估计磁盘 I/O 操作的运行时间？我假设我们可以添加一组简单的常量来在磁盘上而不是在内存中查找值...

为它们计时很简单，因为它们总是要花费很多微秒。例如，HDD 可以执行 80-120 IOP，SSD 可以执行 80K 到 230K IOP。您通常可以轻松获得制造商指定的 1/2，而获得 100% 是您可以在软件中使用技巧的地方。无论如何，除非您有大量内存并且只读取数据，否则您将永远无法让 HDD 像 SSD 一样运行，在这种情况下，操作系统将为您完成所有工作。

您可以购买具有 HDD 容量但性能接近 SSD 的[混合驱动器。](http://en.wikipedia.org/wiki/Hybrid_drive)对于商业生产用途，您可能愿意花钱购买具有多个驱动器的磁盘子系统。这可以将性能提高到 500 IOPS，但成本会显着增加。您通常购买磁盘子系统，因为您需要它提供的容量和冗余，但您通常也会获得性能提升，但有更多的脊椎一起工作。尽管这个关于[磁盘子系统性能](http://msdn.microsoft.com/en-us/library/windows/hardware/gg463405.aspx)的链接是旧的（2004 年），但从那时起它们并没有太大变化。

> 更具体地说，访问文件中特定索引的性能有什么区别？这是一个恒定时间操作吗？还是取决于指数“下降”多远？

这取决于它是否在内存中。如果它与您最近读取的数据非常接近，则很可能，如果它很远，则取决于您过去所做的访问以及您有多少可用内存来缓存磁盘访问。

HDD 的典型延迟为每个约 8 毫秒（即，如果您有 10 个随机读取排队，则可能为 80 毫秒） SSD 的典型延迟为 25 到 100 微秒。读取已经排队的可能性要小得多，因为它开始时要快得多。

> JVM 如何优化对文件索引部分的访问？

假设您使用的是合理的缓冲区大小，那么您在软件中通常无能为力。您可以做的是由操作系统完成。

> 磁盘数据结构实现有什么好的习语或库吗？

使用合理的缓冲区大小，例如 512 字节到 64 KB。

更重要的是，根据您的要求购买合适的硬件。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-24T15:32:05.250

另请注意，Linux 系统至少允许不同的文件系统。根据应用程序，一个可能比其他的更适合。[http://en.wikipedia.org/wiki/File_system#Linux](http://en.wikipedia.org/wiki/File_system#Linux)

# jquery - 设置 jQuery 插件

> ID：12984703
> 
> 赞同：0
> 
> 时间：2012-10-20T02:23:02.673
> 
> 标签：jquery, asp.net-mvc

我正在查看我们网站上的一些代码，直到我来到这个

```
<script>
    (function (a) {
        _q = function () { return a; };
        $ = function (f) { typeof f === 'function' && a.push(arguments); return $; };
        jQuery = $.ready = $;
    }([]));
</script> 
```

然后是一堆插件，包括 jQuery。
我只是不明白这意味着什么，我想知道它是如何工作的，以便能够操纵代码。谁能逐行解释代码？

**编辑**

很抱歉代码不好。我也在徘徊它的用途，这就是我在这里问它的原因。无论如何，这是 head 标签内的全部代码。

```
<head>
    <meta charset="utf-8">
    @foreach (string domain in
    ViewBag.Prefetches is string[] ? ViewBag.Prefetches : new string[] { })
    {
        @Html.Prefetch(domain)    
    }
    <title>
        @{@ViewBag.SiteName
            if (ViewBag.Title != null)
            {  @ViewBag.SiteDelimiter @ViewBag.Title } 
        }
    </title>

    <meta name="description" content="">
    <meta name="author" content="">
    <meta http-equiv="imagetoolbar" content="false">

    <link href="@Url.ContentArea("~/css/global/normalize.css")" rel="stylesheet" />

    @foreach (string stylesheet in
    ViewBag.Stylesheets is string[] ? ViewBag.Stylesheets : new string[] { @"style.css" })
    { 
        <link href="@Url.ContentArea("~/css/" + stylesheet)" rel="stylesheet" />
    }

    @RenderSection("CustomCss", required: false)

    <link href="@Url.ContentArea("~/css/global/helpers.css")" rel="stylesheet" />
    <link href="@Url.ContentArea("~/css/global/media.css")" rel="stylesheet" />

    <script src="@Url.ContentArea("~/js/global/modernizr-2.5.3.min.js")"></script>

    <script>
        (function (a) {
            _q = function () { return a; };
            $ = function (f) { typeof f === 'function' && a.push(arguments); return $; };
            jQuery = $.ready = $;
        }([]));
    </script>

    @RenderSection("OverrideJs", required: false)
</head>
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
<script>window.jQuery || document.write('<script src="@Url.ContentArea("~/js/global/jquery-1.7.2.min.js")"><\/script>');</script>
@foreach (string script in
    ViewBag.Scripts is string[] ? ViewBag.Scripts : new string[] { })
{ 
    <script src="@script"></script>
}
<script>
    Modernizr.load({
        test: window.JSON,
        nope: '@Url.Content("~/Scripts/Polyfills/json.polyfill.js")'
    });

    (function (i, s, q, l) {
        for (q = window._q(), l = q.length; i < l;) {
            $.apply(this, s.call(q[i++]));
        }
    }(0, Array.prototype.slice));

</script>
<!--[if lt IE 7 ]>
  <script src="//ajax.googleapis.com/ajax/libs/chrome-frame/1.0.2/CFInstall.min.js"></script>
  <script>window.attachEvent("onload",function(){CFInstall.check({mode:"overlay"})})</script>
<![endif]--> 
```

我无法提供链接，因为这些代码用于您必须登录的特定页面。
无论如何感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T02:45:02.203

简短的回答：它会记录 jQuery 是否已加载

长答案：看起来它所做的只是添加一个变量“jQuery”，如果它被加载，在添加一个函数 _q 之后返回一个参数数组（这是一个存在于所有函数的执行上下文中的类似数组的变量，感谢Fabrício Matté）。据我所知，由于没有参数被发送到函数中，它所要做的就是记录它被调用的范围。

看起来“jQuery”变量被访问得更远一点，如果没有设置它会加载 jQuery。但我不认为它可以在那里访问，因为我没有看到在任何地方全局声明的变量。

它的用途是它首先尝试从 Google 的主机加载 jQuery。如果失败，它将在本地加载 jQuery。

# jquery - 在调整屏幕大小之前，滚动条不会加载或调整大小

> ID：12984709
> 
> 赞同：0
> 
> 时间：2012-10-20T02:23:51.033
> 
> 标签：jquery, css, html, scrollbar

我正在为客户开发一个网站，需要一些帮助。出于某种原因，每个“页面”上的滚动条在调整窗口大小之前不会加载或更改高度。我有一个 jQuery 滚动条替换了普通滚动条，但这不是它，因为当我禁用它们时，普通滚动条会做同样的事情。内容存储在滚动 div 的子 div 中，但内容 div 的高度不会随着内容的变化而改变。将 $(window).resize（如下所示）中的代码转换为自己的函数也不起作用。

[http://brianandsacha.tumblr.com/](http://brianandsacha.tumblr.com/)

这不是最糟糕的事情，但非常烦人。

编辑：我添加了整个 JS 代码，由 Max Dunn 建议的编辑。它仍然做同样的事情。

```
 //--details
        $(document).ready(function() {
            $("#info").show();
        });
        $(document).ready(function() {
            $('#elephant').click(function() {
                if ($('#info').css('display') == "none")
                    $('#info').fadeIn('slow'),
                    $('#stay').hide();
                    $('#todo').hide();
                    $('#nav').hide();
                    $('#gifts').hide();
                    $('#contact').hide();
                    $('#photos').hide();
                    $('#welcome').hide();
                    $("#bubblecontent").show();
                    resizeBubble();
            });
        });
        //--stay
        $(document).ready(function() {
            $("#stay").hide();
        });
        $(document).ready(function() {
            $('#gator').click(function() {
                if ($('#stay').css('display') == "none")
                    $('#stay').fadeIn('slow'),
                    $('#info').hide();
                    $('#todo').hide();
                    $('#nav').hide();
                    $('#gifts').hide();
                    $('#contact').hide();
                    $('#photos').hide();
                    $('#welcome').hide();
                    $("#bubblecontent").show();
                    resizeBubble();

            });
        });
        //--todo
        $(document).ready(function() {
            $("#todo").hide();
        });
        $(document).ready(function() {
            $('#man').click(function() {
                if ($('#todo').css('display') == "none")
                    $('#todo').fadeIn('slow'),
                    $('#info').hide();
                    $('#stay').hide();
                    $('#nav').hide();
                    $('#gifts').hide();
                    $('#contact').hide();
                    $('#photos').hide();
                    $('#welcome').hide();
                    $("#bubblecontent").show();
                    resizeBubble();
            });
        });
        //--nav
        $(document).ready(function() {
            $("#nav").hide();
        });
        $(document).ready(function() {
            $('#woman').click(function() {
                if ($('#nav').css('display') == "none")
                    $('#nav').fadeIn('slow'),
                    $('#info').hide();
                    $('#stay').hide();
                    $('#todo').hide();
                    $('#gifts').hide();
                    $('#contact').hide();
                    $('#photos').hide();
                    $('#welcome').hide();
                    $("#bubblecontent").show();
                    resizeBubble();
            });
        });
        //--gifts
        $(document).ready(function() {
            $("#gifts").hide();
        });
        $(document).ready(function() {
            $('#bird').click(function() {
                if ($('#gifts').css('display') == "none")
                    $('#gifts').fadeIn('slow'),
                    $('#info').hide();
                    $('#stay').hide();
                    $('#todo').hide();
                    $('#nav').hide();
                    $('#contact').hide();
                    $('#photos').hide();
                    $('#welcome').hide();
                    $("#bubblecontent").show();
                    resizeBubble();
            });
        });
        //--contact
        $(document).ready(function() {
            $("#contact").hide();
        });
        $(document).ready(function() {
            $('#dog').click(function() {
                if ($('#contact').css('display') == "none")
                    $('#contact').fadeIn('slow'),
                    $('#info').hide();
                    $('#stay').hide();
                    $('#todo').hide();
                    $('#nav').hide();
                    $('#gifts').hide();
                    $('#photos').hide();
                    $('#welcome').hide();
                    $("#bubblecontent").show();
                    resizeBubble();
            });
        });

        //--photos
        $(document).ready(function() {
            $("#photos").hide();
        });
        $(document).ready(function() {
            $('#cat').click(function() {
                if ($('#photos').css('display') == "none")
                    $('#photos').fadeIn('slow'),
                    $('#info').hide();
                    $('#stay').hide();
                    $('#todo').hide();
                    $('#nav').hide();
                    $('#gifts').hide();
                    $('#contact').hide();
                    $('#welcome').hide();
                    $("#bubblecontent").show();
                    resizeBubble();
            });
        });
        //welcome
        $(document).ready(function() {
            $("#welcome").show();
            $("#bubblecontent").hide();
            $('#header').click(function() {
                if ($('#welcome').css('display') == "none")
                    $('#welcome').fadeIn('slow'),
                    $('#stay').hide();
                    $('#todo').hide();
                    $('#nav').hide();
                    $('#gifts').hide();
                    $('#contact').hide();
                    $('#photos').hide();
                    $("#bubblecontent").hide();
                    resizeBubble();
            });
        });
        //bubbleheight
        function resizeBubble() {
            var divHeight = $(document).height() - 300;
            $('#bubble').css({height: divHeight});
        };
        $(window).resize(
        function() {
            resizeBubble();
        });

    body {
        overflow-y: hidden;
        overflow-x: hidden;
        font-family: "museo-slab", georgia, serif;
        font-weight: 100;
        height: 100%;
    }
    #container {
        margin-left: auto;
        margin-right: auto;
    }
    #bubble {
        background-color: #f5fec3;
        height: 100%;
        width: 900px;
        margin-left: auto;
        margin-right: auto;
        border-radius: 15px;
        -moz-border-radius: 15px;
        overflow-y: auto;
    }
    #bubblecontent {
        width: 860px;
        margin-left: auto;
        margin-right: auto;
        overflow-y: auto;
    }

<div id="container">
  <div id="bubble">
    <div id="bubblecontent">
      <div id="contentdiv1">
        blah
      </div>
      <div id="contentdiv2">
        blah
      </div>
    </div>
  </div>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T00:17:27.860

我留下我的其他答案，因为它可能会帮助其他遇到类似问题的人。然而，在查看了这个特定的 javascript 代码之后，有很多地方需要改进，所以我重写了代码。重要的更改是在内容更改时使用 mCustomScrollbar("update") 函数：

```
<script type="text/javascript">
  //loading
  $(window).load(function () {
    $('#loading').fadeOut('fast');
  });

  $(document).ready(function () {
    //elephant
    loadImage1 = new Image();
    loadImage1.src = "http://static.tumblr.com/spps9en/JN3m8jui6/elephanthover.png";
    staticImage1 = new Image();
    staticImage1.src = "http://static.tumblr.com/spps9en/j7Fm8jufs/elephant.png";
    //gator
    loadImage2 = new Image();
    loadImage2.src = "http://static.tumblr.com/spps9en/DoNm8jujc/alligatorhover.png";
    staticImage2 = new Image();
    staticImage2.src = "http://static.tumblr.com/spps9en/q9Em8jujy/alligator.png";
    //man
    loadImage3 = new Image();
    loadImage3.src = "http://static.tumblr.com/spps9en/AKZm8jvs5/manhover.png";
    staticImage3 = new Image();
    staticImage3.src = "http://static.tumblr.com/spps9en/xZam8jvbc/man.png";
    //woman
    loadImage4 = new Image();
    loadImage4.src = "http://static.tumblr.com/spps9en/AH6m8jvvq/womanhover.png";
    staticImage4 = new Image();
    staticImage4.src = "http://static.tumblr.com/spps9en/seym8jvup/woman.png";
    //bird
    loadImage5 = new Image();
    loadImage5.src = "http://static.tumblr.com/spps9en/HY8m8phuj/birdhover.png";
    staticImage5 = new Image();
    staticImage5.src = "http://static.tumblr.com/spps9en/0jkm8jvz1/bird.png";
    //dog
    loadImage6 = new Image();
    loadImage6.src = "http://static.tumblr.com/spps9en/sxcm8gfjf/doghover.png";
    staticImage6 = new Image();
    staticImage6.src = "http://static.tumblr.com/spps9en/2qKm8jw17/dog.png";
    //cat
    loadImage7 = new Image();
    loadImage7.src = "http://static.tumblr.com/spps9en/ex8mc60c7/cathover.png";
    staticImage7 = new Image();
    staticImage7.src = "http://static.tumblr.com/spps9en/MKomc6065/cat.png";

    function resizeBubble() {
      var divHeight = $(document).height() - 300;
      $('#bubble').css({height: divHeight});
    };

    $(window).resize(function () {
      resizeBubble();
    });

    function updateScroll() {
      $("#bubble").mCustomScrollbar("update");
    }

    function hideAll() {
      $("#welcome").hide();
      $("#info").hide();
      $("#stay").hide();
      $("#todo").hide();
      $("#nav").hide();
      $("#gifts").hide();
      $("#contact").hide();
      $("#photos").hide();
    }

    function switchSection(sectionId) {
      if ($(sectionId).css('display') == "none") {
        hideAll();
        $(sectionId).fadeIn('slow');
        updateScroll();
      }
    }

    $('#elephant').click(function () {
      switchSection('#info')
    });
    $('#gator').click(function () {
      switchSection('#stay')
    });
    $('#man').click(function () {
      switchSection('#todo')
    });
    $('#woman').click(function () {
      switchSection('#nav')
    });
    $('#bird').click(function () {
      switchSection('#gifts')
    });
    $('#dog').click(function () {
      switchSection('#contact')
    });
    $('#cat').click(function () {
      switchSection('#photos')
    });
    $('#header').click(function () {
      switchSection('#welcome')
    });

    // Initial state
    hideAll();
    resizeBubble();
    $("#bubble").mCustomScrollbar({set_width:false});
    switchSection('#welcome');
  });
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-20T02:55:14.903

首先，使调整大小代码成为一个函数：

```
function resizeBubble() {
  var divHeight = $(document).height() - 300;
  $('#bubble').css({height: divHeight});
}; 
```

然后在显示第一个隐藏的 div 后调用此函数。

```
$(document).ready(function() {
  $("#info").show;
  resizeBubble();
}; 
```

在这里调用它而不是另一个 $(document).ready 的原因是您不知道 $(document).ready 将按什么顺序触发，并且它很可能在您显示任何 div 之前触发。

您还需要将 resizeBubble() 调用添加到所有 click() 函数以及 $(window).resize 的末尾。

# c# - C# 后台工作人员 DoWork 卡住了

> ID：12984711
> 
> 赞同：0
> 
> 时间：2012-10-20T02:24:31.277
> 
> 标签：c#, .net, winforms, backgroundworker

嘿，我有这个测试后台工作人员，它似乎卡在 DoWork 方法上，或者 RunWorkerCompleted 没有被解雇，你们在这里看到什么问题吗？

也许我没有正确实施：/

```
 using System;
    using System.Collections.Generic;
    using System.ComponentModel;
    using System.Data;
    using System.Drawing;
    using System.Linq;
    using System.Text;

        using System.Threading.Tasks;
        using System.Windows.Forms;
        using MailChimp;
        using System.Threading;
        using System.Runtime.InteropServices;

        namespace Chimporter
        {
            public partial class Form1 : Form
            {
                //Worker thread flag set to false
                static bool done = false;
                //Console dll
                [DllImport("Kernel32.dll")]
                static extern Boolean AllocConsole();

                public Form1()
                {
                    InitializeComponent();
                }

                private void button1_Click(object sender, EventArgs e)
                {

                }

                private void label1_Click(object sender, EventArgs e)
                {

                }

                private void accountInformationToolStripMenuItem_Click(object sender, EventArgs e)
                {
                    //loadWindow pleaseWait = new loadWindow();
                    //pleaseWait.Show();
                    BackgroundWorker bg = new BackgroundWorker();
                    bg.DoWork += new DoWorkEventHandler(bg_DoWork);
                    bg.RunWorkerCompleted += new RunWorkerCompletedEventHandler(bg_RunWorkerCompleted);
                    bg.RunWorkerAsync();
                    while (!done)
                    {
                        //Console.WriteLine("Waiting in Main, tid " + Thread.CurrentThread.ManagedThreadId);
                        //Thread.Sleep(100);

                    }
                    //AccountInfo accInfo = new AccountInfo();
                    //accInfo.Show();

                }

                public void bg_RunWorkerCompleted(object sender, RunWorkerCompletedEventArgs e)
                {
                    if (!AllocConsole())
                    {
                        Console.WriteLine("Fnished! " + Thread.CurrentThread.ManagedThreadId);
                    }
                    done = true;
                }

                public void bg_DoWork(object sender, DoWorkEventArgs e)
                {
                    for (int i = 0; i <= 3; i++)
                    {
                        if (!AllocConsole())
                        {
                            Console.WriteLine("Work Line: " + i + ", tid " + Thread.CurrentThread.ManagedThreadId);
                            Thread.Sleep(500);
                        }                
                    }            
                    //string key = "e42713458882f6c2c27b3d6d951174a2-us6";
                    //var mc = new MCApi(key, true);
                    //string user = mc.GetAccountDetails().Username.ToString();
                    return;
                }

                private void menuStrip1_ItemClicked(object sender, ToolStripItemClickedEventArgs e)
                {

                }

                private void exitToolStripMenuItem_Click(object sender, EventArgs e)
                {
                    //Exit application Form.Close()
                    Application.Exit();
                }
            }
        } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-20T02:37:21.413

拿出你`while (!done)`的。它正在锁定主线程。工人完成事件在该线程上被引发，但由于它在循环中忙，它永远不会被引发。

RunWorkerCompleted 事件的全部意义在于，您可以在主线程上收到通知，而不必将其锁定在繁忙的循环中并使您的 gui 无响应。

# windows-7 - MPICH2 在 Windows 7 中无法连接

> ID：12984712
> 
> 赞同：5
> 
> 时间：2012-10-20T02:24:37.013
> 
> 标签：windows-7, mpi, mpich

每当我尝试命令 mpiexec -n 4 testmpi.exe

> 无法连接到“RIJDZUAN-PC:8676”，sock 错误：通用套接字故障，错误堆栈：MPIDU_Sock_post_connect(1200)：无法连接到端口 8676 上的 RIJDZUAN-PC，耗尽所有端点 (errno -1) MPIDU_Sock_post_connect(1247 ): 无法连接到 RIJDZUAN-PC 的 8676 端口，由于目标机器主动拒绝，无法连接。（错误号 10061）

当我尝试 smpd -install 或 smpd -start 给我

> OpenSCManager 失败：访问被拒绝。（错误 5）

我相信我已经通过 mpiexec -register 注册了 mpiexec

如何解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-04T03:31:17.113

我也收到了这条消息。结果是当安装程序说“成功”但 smpd 没有运行时，安装是不正确的。

[从这里](http://lists.mcs.anl.gov/pipermail/mpich-discuss/2011-April/009694.html)复制（并稍作改动）

1.  卸载以前版本的 MPICH2
2.  通过右键单击命令提示符图标并选择“以管理员身份运行”打开管理员命令提示符
3.  从管理员命令提示符运行“msiexec /i mpich2-1.3.2p1-win-ia32.msi”以安装 MPICH2
4.  在安装过程中，选择为所有用户的“Everyone”安装 MPICH2。
5.  运行 wmpiconfig 并存储用户名/密码。编辑：使用您的真实 Windows 登录名和密码。
6.  将“C:\Program Files\MPICH2\bin”添加到系统路径并编辑：无需重新启动
7.  使用“smpd -status”检查 smpd。它应该返回 'smpd running on $hostname$'
8.  要测试执行环境，请转到目录 $MPICHROOT\examples 并使用以下命令运行 cpi.exe：'mpiexec -n 4 cpi'

即使您没有以管理员用户身份登录，也可以按照上述步骤操作。只需确保密切关注第 2 步。如果你看到

```
OpenSCManager failed: Access is denied 
```

这可能意味着您不在管理员命令提示符下。如果第 7 步检查成功，您应该可以开始了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-09-26T11:39:54.447

以管理员身份运行 CMD，然后运行 ​​smdp -install 命令。

# gwt - 混合使用普通 GWT 和智能 GWT 编写 Web 应用程序 GUI？

> ID：12984724
> 
> 赞同：0
> 
> 时间：2012-10-20T02:27:46.093
> 
> 标签：gwt, smartgwt

上个月我开始在 GWT 做项目。一切都很好，直到我需要拖放（DND）。在像其他人一样尝试了 gwt-dnd 库之后，我迷上了 smart-gwt 小部件。但是我在任何地方都读到它是对 Javascript 的非常薄的包装器。但我还是决定继续。我有一些关于 GWT 的一般性问题。

*   可以混合使用 plain-GWT 和 smart-gwt 编写 GUI 吗？
*   我可以在没有外部库帮助的情况下仅使用纯 GWT 实现拖放吗？
*   我应该自己用纯 GWT 编写类似智能 GWT 的小部件吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T13:33:49.060

*   不，你不应该，smartgwt 的创建者也没有提出任何建议，有一些调整可以使它工作，但它是在每个案例基础上的......
*   您可以尝试实现这一点，尤其是使用最新的 2.5 版本及其 Elemental 库。
*   取决于您需要什么以及您为该任务拥有的资源。您可以制作看起来像更轻的元素 macthing smartgwt 的元素，但如果您正在处理过滤等操作，这可能会很棘手。底线是，如果您拥有 smartgwt 或任何其他类似的库，您将不会考虑开发其小部件的时间和资源。

# clojure - 设置，让，宏，坚果

> ID：12984726
> 
> 赞同：4
> 
> 时间：2012-10-20T02:28:01.697
> 
> 标签：clojure, macros

我正在尝试从 html 内容构建一个快速目录。（为了缩短）

代码非常简单：

```
(defn toc [content]
 (doseq [i (take 5 (iterate inc 1))] 
   (let [h  (str "h" i)]
    (println ($ content h))))) 
```

其中*content*是 html 内容，*$*是*clojure-soup所需的宏*

尽管

```
($ content "h1") 
```

工作，并返回所有标签的列表。

简单的：

```
($ content (str "h" 1)) 
```

就是不管我做什么都不会成功。

我该如何强制

```
(str "h" 1) 
```

在调用宏 *之前*正确评估？

解释原因的奖励积分:)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-20T02:57:03.853

如果正如您所暗示的那样，这是一个宏，这是不可能`$`的：这根本不是宏的工作方式。宏需要在编译时扩展成某种东西，而且它只能这样做一次。您有运行时数据，例如 的各种值`h`，但无法在编译时使用它。对我来说，这听起来`$`应该是一个功能。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-20T07:16:25.473

Amalloy 回答问题`why`部分。对于`making it work`部分您将需要使用`eval`.

代替`($ content h)`使用

```
(eval `($ content ~h)) 
```

为什么会这样的另一种解释是基于宏在编译时执行什么操作以及它在运行时执行什么（即它发出什么代码）这一事实。下面是一个清除事情的例子。

```
(def user "ankur")
(defmacro do-at-compile [v] (if (string? v) `true `false))
(defmacro do-at-runtime [v] `(if (string? ~v) true false))

(do-at-compile "hello") ;; => true
(do-at-compile user) ;; => false, because macro does perform the check at compile time
(do-at-runtime "hello") ;; => true
(do-at-runtime user) ;; => true 
```

*宏在编译时*`$`对传递的第二个参数进行计算，因此它在您的特定情况下不起作用。

# jquery - 其他 JS 文件可访问的 JQuery 函数

> ID：12984727
> 
> 赞同：0
> 
> 时间：2012-10-20T02:28:11.013
> 
> 标签：jquery, html, css

对于我的 CSS，我正在为特定功能构建几个较小的文件，然后使用缩小将它们组合并压缩成一个文件以供下载。

我想对我的 JS 文件做同样的事情 - 逻辑分离，然后与 MIN 组合并压缩以供下载。

我唯一的收获是我正在构建的基于 AJAX 的站点有一个核心 JS 文件，该文件接受在主查看区域中加载页面的请求。

我可以从其他 JS 文件中调用此函数（在一个 JS 文件中）吗？这有点像将一个 JS 文件公开给其他脚本。

有什么建议吗？

谢谢

更新* ***** ** *** ***

那么我将如何从另一个 JS 文件中调用一个函数。

例如：

文件 A 有函数 callmetoday()

如何从 JS 文件编号 2 中调用它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-20T02:31:42.957

当然，只要确保首先加载依赖 js 文件即可。

如果您正在寻找更“模式化”的解决方案，我是否有兴趣查看[requirejs](http://requirejs.org)，这是一个可以帮助您解决此类依赖问题的库。

干杯

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-20T02:31:48.200

是的，您可以从两个单独的 js 文件中加载函数，这就是问题所在：

必须先声明该函数，然后才能使用它

这意味着您将需要具有要运行的函数的 js 文件，在调用它的 js 文件之前加载.....或者确保在页面完全加载后调用该函数

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-20T02:44:10.063

是的。除非您在函数内或作为对象字段声明函数或变量，否则它位于全局范围内。如果是浏览器，那就是`window`对象。

另请注意 Darwayne 的警告：您只能在声明后使用来自不同文件的函数（在[某些浏览器](http://www.mozilla.org/en-US/firefox/new/)中甚至在文件中）。

例子：

文件 1.js：

```
function f1(x){
  f2(x)
}

document.addEventListener("load",function(){f1(3)}) 
```

文件 2.js：

```
function f2(x){
  alert(x)
  if(x) f1(x-1)
} 
```

将工作：

*   1.js 加载时，`f1`出现在全局范围内
*   2.js 加载时，`f2`出现在全局范围内
*   当页面完全加载`f1`并且`f2`可以访问时。

# loops - 在 Linux 上检测到新硬件时如何执行脚本？

> ID：12984728
> 
> 赞同：1
> 
> 时间：2012-10-20T02:28:52.157
> 
> 标签：loops, automation, add, hardware, detect

我想在检测到添加/删除硬件时执行我的脚本。

现在我使用一个循环并每 10 秒休眠一次，以重新检查一个新硬件，但我认为如果我可以将我的脚本放到每次检测到硬件更改时都会运行的系统路径会更好，类似于“运行每个日志in" 当把脚本路径放到`/etc/rc.local`.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-20T02:33:17.103

[编写一个 udev 规则](http://www.reactivated.net/writing_udev_rules.html)，在每次添加或删除适当的硬件时执行该脚本。

> ## 在某些事件上运行外部程序
> 
> 编写 udev 规则的另一个原因是在设备连接或断开连接时运行特定程序。例如，您可能希望执行一个脚本，以便在连接数码相机时自动从您的数码相机下载所有照片。

# actionscript-3 - ActionScript3 外部预加载器不会播放影片剪辑

> ID：12984731
> 
> 赞同：0
> 
> 时间：2012-10-20T02:29:20.840
> 
> 标签：actionscript-3, flash, movieclip, preloader, flash-cs6

我确定这是一个简单的问题，而我忽略了一些明显的问题。

我有一个外部预加载 SWF，它只包含一个图层上的影片剪辑 (loader_graphic)，在第一个（也是唯一一个）帧中；和另一层上的加载脚本，在第一帧。影片剪辑只是一个没有进度指示器的简单循环动画。如果我不包含脚本，它会很好用。

该脚本加载外部 SWF，它本身就可以正常工作。

当我结合这两者时，我得到了影片剪辑的第一帧，然后它冻结，直到外部 SWF 完全加载。加载后，它会播放一次并停止。我对 AS3 有点陌生，我知道预加载是已经改变的约定之一，所以我可能没有正确编码：

```
loader_graphic.play();

import flash.display.Loader;
import flash.net.URLRequest;
import flash.events.ProgressEvent;

var l:Loader = new Loader();
l.contentLoaderInfo.addEventListener(ProgressEvent.PROGRESS, loop);
l.contentLoaderInfo.addEventListener(Event.COMPLETE, done);
l.load(new URLRequest("external.swf"));

function loop(e:ProgressEvent):void
{
  var perc:Number = e.bytesLoaded / e.bytesTotal;
}

function done(e:Event):void
{
  loader_graphic.stop();
  addChild(l);
} 
```

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T10:45:23.253

事实证明，预加载器一直在播放。它只是因为主 SWF 超载了 Flash 播放器而停止了。

它加载的主要 SWF 文件包括从标准 Web 服务器流式传输的 F4V 视频，播放器一次处理所有内容太多了。相反，我嵌入了视频，一切都很完美。

# ruby - 子模型的映射关联

> ID：12984733
> 
> 赞同：-2
> 
> 时间：2012-10-20T02:29:27.827
> 
> 标签：ruby

我有一个与章节有 has_many 关系的 Stories Chapter has_many 与 pages 的关系

我想使用 Stories.pages 方法返回我的 Stories 对象上的页面列表

```
def pages
  self.chapters.map do |c| c.pages end
end 
```

这不是返回我采取的列表列表

```
def pages
  pages =[]
  self.chapters.each do |c|
    c.pages.each do |p|
      pages << p
    end
  end
end 
```

我是 ruby​​ 新手，具有 php 和 c# 背景，我知道我可以通过故事和页面之间的直接关联或创建自定义查询（INNER JOIN）来做到这一点。

但是想把我的头绕在地图上，减少一点方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-20T02:33:39.837

无需创建自己的自定义方法，Rails 已经将其作为[`has_many :through`关联](http://guides.rubyonrails.org/association_basics.html#the-has_many-through-association)提供：

```
class Story < ActiveRecord::Base
  has_many :chapters
  has_many :pages, :through => :chapters
end 
```

# forms - 向 2 个 API 提交一份表格

> ID：12984734
> 
> 赞同：1
> 
> 时间：2012-10-20T02:30:27.383
> 
> 标签：forms, aweber

我正在尝试创建一个表单，该表单将基于一个复选框和一个提交按钮将数据提交到 2 个不同的 API。

基本上，我正在创建一个表单，允许站点访问者注册一个会议活动。这是表单的主要功能。其次，我想包括一个允许用户订阅电子邮件列表的复选框。

如果用户未选中该复选框 - 他或她只需通过 GTMeeting 注册该活动。如果他或她选中该框，则表示他们注册了该活动并想要订阅。

在案例 2 中，用户数据需要单独传递给 Aweber（此处选择的电子邮件客户端）和 GoToMeeting。

我创建了单独的表单来分别处理这些任务 - 并且取得了成功。但我不知道如何只用一个提交按钮进行 2 个 post 调用。

我从 ant 那里读到了这篇文章，看起来应该可以工作：[Submit form to 2 different action page](https://stackoverflow.com/questions/2446188/submit-form-to-2-different-action-page)

任何人都可以为我证实这一点-理论上吗？

谢谢。

克雷格

# php - Ajax 返回后的 PHP 错误（codeigniter 框架）

> ID：12984741
> 
> 赞同：0
> 
> 时间：2012-10-20T02:31:25.667
> 
> 标签：php, jquery, ajax, xcode, e-commerce

我正在开发一个自定义电子商务网站。如果您转到以下链接，您可以实时查看我的问题。

[自定义电子商务网站 »](http://faithpointdallas.com/ecom/category/view/choir-stoles)

（用户名：alex，密码：superman）

我的问题是，当您单击添加到购物车时，我的 jquery ajax 帖子效果很好，并且您的商品已添加到购物车中。但是，如果您首先按价格过滤，然后尝试添加到购物车，我会收到一个 php 错误。任何想法为什么会发生这种情况......

我对 ajax 不是超级熟悉，这是我的第一个超级密集的 ajax 项目，所以它可能只是一些简单的问题，就像我之前遇到的一个问题，有人向我介绍了 jQuery 中的 live() 函数。

任何帮助表示赞赏。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-20T04:36:12.487

好的，所以您正常的“添加到购物车”按钮适用于 AJAX。到目前为止，一切都很好。

您缺少的是，当您按价格过滤时，您（很可能）从列表中删除所有项目，并仅添加符合价格标准的项目。到目前为止也很好！

但是，在将过滤后的项目添加回来后，您不会重新初始化“添加到购物车”按钮上的 JavaScript 绑定。

无论您在哪里做类似的事情：

```
jQuery('.add-to-cart').bind('click', function(){
  // show lightbox and do some stuff here
} 
```

您需要在过滤完成后再次调用此方法/函数，或者更简单的解决方案是使用以下方法绑定事件`live`：

```
jQuery('.add-to-cart').live('click', function(){
  // do the same stuff as above
} 
```

请注意，这些代码只是一个示例，我实际上并没有采用您的代码。

# c - 循环是否会导致 C 中的赋值问题

> ID：12984743
> 
> 赞同：0
> 
> 时间：2012-10-20T02:31:45.513
> 
> 标签：c, arrays, loops, concatenation

（这与我之前遇到的问题有关。）在尝试将一个字符数组中的值分配给另一个字符数组时，我遇到了一个奇怪的问题，即正确的值没有被复制，但只有在我使用循环时才会被复制。我注释掉了循环并手动写出了它的迭代，它按我想要的方式工作。什么可能导致此问题？

> //导致数据传输不正确
> 
> ```
>  for(int q=0; q<4; q++){
> 
>    directory[q] = malloc(sizeof(char) * (1 + strlen(temp[q])));
> 
>    strcpy(directory[q],temp[q]);
> 
>   } 
> ```
> 
> //但这可以正常工作
> 
> ```
> directory[0] = malloc(sizeof(char) * (1 + strlen(temp[0])));
> 
> strcpy(directory[0], temp[0]);
> 
> directory[1] = malloc(sizeof(char) * (1 + strlen(temp[1])));
> 
> strcpy(directory[1], temp[1]);
> 
> directory[2] = malloc(sizeof(char) * (1 + strlen(temp[2])));
> 
> strcpy(directory[2], temp[2]);
> 
> directory[3] = malloc(sizeof(char) * (1 + strlen(temp[3])));
> 
> strcpy(directory[3], temp[3]); 
> ```

# object - Eclipse 中的组件建模

> ID：12984753
> 
> 赞同：2
> 
> 时间：2012-10-20T02:33:33.700
> 
> 标签：object, interface, components, class-diagram, object-model

我想使用 Eclipse（可能还有一些插件？）以及组件内对象的相应对象模型来制作组件模型。这个网页有一个我正在尝试生成的组件模型和对象模型的示例。 [http://www.agilemodeling.com/artifacts/componentDiagram.htm](http://www.agilemodeling.com/artifacts/componentDiagram.htm) （请看图表）

老实说，我是eclipse的新手。我想要图表以及类和接口定义（不仅仅是图片）。但我也想要图片.....不仅仅是类和组件定义。我在 Windows 上运行。

有图表的特殊插件吗？

组件模型有特殊插件吗？

如何在 Eclipse 中将类放置在组件中？

任何指向示例的链接（除了我拥有的），将不胜感激！

提前致谢！！

亚历克斯

# javascript - JavaScript 原型结构和对象

> ID：12984754
> 
> 赞同：0
> 
> 时间：2012-10-20T02:33:36.307
> 
> 标签：javascript, object, prototype, typeerror

我是原型结构的新手，我很难弄清楚这一点。这是我的 JavaScript 代码。

```
var Game = function ()
{
   //some variables
};
Game.prototype.block = 
{
    spawn: function () {
        var t1 = new this.inst;
    },
    inst : {
        x: 5,
        y: 0,
        type: ''
    }
}; 
```

当我尝试创建一个新对象“inst”时，出现以下错误：TypeError: object is not a function。我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T15:23:38.133

如果要创建从对象继承的`inst`对象，可以使用`Object.create`, with 来实现`var t1 = Object.create(this.inst);`。

```
var Game = function () {
   //some variables
};
Game.prototype.block =  {
    spawn: function () {
        var t1 = Object.create(this.inst);
    },
    inst : {
        x: 5,
        y: 0,
        type: ''
    }
}; 
```

那么你的代码看起来像这样；

```
var game = new Game();

game.block.spawn(); 
```

并且该`.spawn()`方法将具有一个引用从该`Game.prototype.block.inst`对象继承的对象的变量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-20T02:35:54.430

首先，`inst`没有定义在`Game`. 因此，`this`which 指的`Game`是没有任何属性称为`inst`. 其次，`inst`必须跟在后面`()`表示对构造函数的调用，您在此处缺少该构造函数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-20T03:20:27.423

我来宾您需要一个静态工厂方法来创建新的“inst”。下面的代码是你需要的吗？你调用 Game.spawn 方法来生成一个新的 inst，你可以把这个方法放在 setInterval 中。

```
function Game() {
    //some variables
}

Game.spawn = function() {
    function Inst() {
        this.x = 5;
        this.y = 0;
        this.type = '';
    }

    return new Inst;
}

var inst1 = Game.spawn();
inst1.x = 1; //test inst1
console.log(inst1.x);
var inst2 = Game.spawn();
inst2.x = 2; //test inst2
console.log(inst2.x);
var inst3 = Game.spawn();
inst3.x = 3; //test inst 3
console.log(inst3.x); 
```

# ruby - 西纳特拉`地图`不工作

> ID：12984760
> 
> 赞同：1
> 
> 时间：2012-10-20T02:34:52.207
> 
> 标签：ruby, sinatra

我正在尝试在 url 的代理后面运行 sinatra ，`http://server/project/`以便在应用程序中运行。我的样子是这样的：`GET http://server/project/foo``/foo``config.ru`

```
map('/project') { run App } 
```

我在日志中看到`"GET /project/ HTTP/1.1" 404`；即使我`GET '/'`定义了一个方法。它在正常运行时工作（只是`run App`没有`map`调用）。我不知道为什么。

# java - 多线程服务器不接受客户端输出流

> ID：12984762
> 
> 赞同：1
> 
> 时间：2012-10-20T02:35:26.273
> 
> 标签：java, sockets, client, client-server

我对线程世界有点陌生，我正在制作一个游戏服务器，分配每个连接到另一个线程的客户端，这样我就可以在同一个端口上接受多个客户端。但是，我在客户端连接到服务器时遇到问题，但无法发送数据（以 ObjectOutputStream 的格式发送到服务器）。关于可能出错的任何指示？

这是我的 MatchmakingServer.java 的代码

```
 try {
        listenForPlayers = new ServerSocket(portNumber);
        System.out.println("Port opened. Searching for players");
        while (true){
            Socket clientSocket = listenForPlayers.accept();
            Runnable r = new PlayerHandlerForServer(clientSocket);
            new Thread(r).start();
        }
    } catch (Exception e) { } 
```

我的 PlayerHandler 对象实现了 Runnable，这是它的 run 方法。

```
private Player player;
private ObjectInputStream getPlayerData;
private static PrintWriter sendPlayerData;
private Socket socket;
public void run() {
    try {
        getPlayerData = new ObjectInputStream(socket.getInputStream());
        player = (Player) getPlayerData.readObject();
        //do stuff with the player object, this code get executed.
        sendPlayerData = new PrintWriter(socket.getOutputStream(),true);
        updatePlayersFound(sendPlayerData);
    } catch (Exception e) { }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T02:40:01.410

正如评论记录异常中所指出的那样，它们将提供有关可能导致此问题的线索。

一个疯狂的猜测是你的 Player 类没有实现 Serializable 接口。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-20T05:25:29.150

我想知道为什么您要从 Socket 读取序列化对象，但使用 PrintWriter 写出数据。我建议使用 ObjectOutputStream 并保持一致。

发送序列化对象可能是矫枉过正。发送的数据可能比您关心的更多。这可能会对您的游戏客户端造成无用的网络延迟！您可能想看看使用 DataInputStream / DataOutputStream。这将允许您仅使用真正需要的内容来编写/读取对象。

# c++ - 在 C++ 中向主线程报告线程进度

> ID：12984766
> 
> 赞同：4
> 
> 时间：2012-10-20T02:35:59.710
> 
> 标签：c++, c, multithreading, thread-safety, pthreads

在 C/C++ 中，我怎样才能使线程（POSIX pthreads/Windows 线程）给我一个安全的方法，在执行进度或我决定用线程执行的工作时将进度传递回主线程.

是否可以按百分比报告进度？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-20T02:59:23.327

解决此问题的最佳方法是为此使用 C++ 原子。在一些足够明显的地方声明：

```
std::atomic<int> my_thread_progress(0); 
```

在简单的情况下，这应该是一个静态变量，在更复杂的地方，这应该是管理线程或类似事物的某个对象的数据字段。

在许多平台上，这会有点偏执，因为几乎所有地方的整数读写操作都是原子的。使用原子的位仍然是因为：

1.  您将保证这在任何平台上都能正常工作，即使是在 16 位 CPU 或任何不寻常的硬件上；
2.  您的代码将更易于阅读。读者将立即看到这是共享变量，而无需添加任何评论。一旦使用`load`/`store`方法更新它，就会更容易了解正在发生的事情。

**编辑**

英特尔® 64 和 IA-32 架构软件开发人员手册组合卷：1、2A、2B、2C、3A、3B 和 3C ( [http://download.intel.com/products/processor/manual/325462.pdf](http://download.intel.com/products/processor/manual/325462.pdf) )

第 3A 卷：8.1.1 保证原子操作

Intel486 处理器（以及之后的更新处理器）保证以下基本内存操作将始终以原子方式执行：

*   读取或写入一个字节
*   读取或写入在 16 位边界上对齐的字
*   读取或写入在 32 位边界上对齐的双字

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-20T04:28:20.623

我将假设一个非常简单的主线程案例和一个函数。我建议每次启动线程时传递一个指向原子的指针（如上面基里尔所建议的）。假设这里是 C++11。

```
using namespace std;

void threadedFunction(atomic<int>* progress)
{
    for(int i = 0; i < 100; i++)
    {
        progress->store(i);  // updates the variable safely
        chrono::milliseconds dura( 2000 );
        this_thread::sleep_for(dura); // Sleeps for a bit
    }
    return;
}

int main(int argc, char** argv)
{
    // Make and launch 10 threads
    vector<atomic<int>> atomics;
    vector<thread> threads;
    for(int i = 0; i < 10; i++)
    {
        atomics.emplace_back(0);
        threads.emplace_back(threadedFunction, &atomics[i]);
    }

    // Monitor the threads down here
    // use atomics[n].load() to get the value from the atomics
    return 0;
} 
```

我认为那会做你想要的。我省略了轮询线程，但你明白了。我正在传递一个主线程和子线程都知道的对象（在这种情况下是`atomic<int>`变量），它们都可以更新和/或轮询结果。如果您没有使用完整的 C++11 线程/原子支持编译器，请使用您的平台确定的任何内容，但总有一种方法可以将变量（至少 a `void*`）传递给线程函数。这就是你如何通过非静态方法来回传递信息的方式。

# arrays - 我用 VB.NET 编写的 Crypter 代码有两个我不知道如何解决的错误？

> ID：12984772
> 
> 赞同：2
> 
> 时间：2012-10-20T02:38:14.887
> 
> 标签：arrays, vb.net, encryption, cryptography, aes

我有一些我为 VB.ET 2010 Express Edition 中的简单 Crypter 编写的代码。我尝试构建它，但出现两个我不知道如何修复的错误。这是代码

```
Public Class MainWindow 'Class Name
Dim infectedfile, stub As String

Private Property Cryptfile As String

Private Sub MainWindow_Load(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles MyBase.Load
End Sub 
```

我得到的错误是“找不到事件'加载'”这是第二行代码：

```
Dim btSalt() As Byte = New Byte() (1, 2, 3, 4, 5, 6, 7, 8) 
```

我得到的错误是“初始化数组数组时只能为顶级数组指定边界。”

感谢所有帮助！:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T02:41:32.737

要解决您的第二个错误，您应该像这样声明您的数组：

```
Dim btSalt() As Byte = New Byte() {1, 2, 3, 4, 5, 6, 7, 8} 
```

至于第一个错误，我们需要更多的上下文。

干杯

编辑：

以下是如何覆盖 OnLoad 方法，该方法优于订阅自己的事件，即表单事件：

```
Public Class Form1

    Protected Overrides Sub OnLoad(e As EventArgs)
          MyBase.OnLoad(e)

        'Put your code here, code that you would have placed in your event handler
    End Sub

End Class 
```

# uitextview - 设置 NSFontAttributeName 时，UItextview 将忽略行高

> ID：12984774
> 
> 赞同：5
> 
> 时间：2012-10-20T02:38:29.367
> 
> 标签：uitextview, nsattributedstring

好吧，我在几个地方进行了搜索，尽管据称有些人找到了修复程序，但它似乎不适用于我的情况。

我正在尝试像这样在程序上设置一些 UItextviews 的行高：

```
 UITextView *lab = [LocalTexts objectAtIndex:j];

    NSMutableParagraphStyle *paragraphStyle = [[NSMutableParagraphStyle alloc] init];
    paragraphStyle.lineHeightMultiple = 50.0f;
    paragraphStyle.maximumLineHeight = 50.0f;
    paragraphStyle.minimumLineHeight = 50.0f;

    NSString *string = lab.text;
    NSDictionary *ats = @{
    NSFontAttributeName : [UIFont fontWithName:@"DIN Medium" size:16.0f],
    NSParagraphStyleAttributeName : paragraphStyle, 
    };

    lab.attributedText = [[NSAttributedString alloc] initWithString:string attributes:ats]; 
```

奇怪的是，如果我禁用 NSFontAttributeName 分配，行高**将**起作用，而且，如果我将段落样式设置为具有特定段落高度，那也总是有效，因此 NSParagraphStyleAttribute 不会被完全忽略。我不知道这是一个错误还是我实际上做错了什么。

我尝试将其实现为纯 CORE TEXT，但对于当前项目范围而言，它有点过于复杂。

希望有人能指出我正确的方向。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T06:47:55.860

这是 NSHTMLWriter 中的一个已知错误，UITextView 使用它来将属性字符串转换为 HTML： http: [//www.cocoanetics.com/2012/12/radar-uitextview-ignores-minimummaximum-line-height-in-attributed-细绳/](http://www.cocoanetics.com/2012/12/radar-uitextview-ignores-minimummaximum-line-height-in-attributed-string/)

您可以使用我们在 DTCoreText 中的 UITextView 替换来正确呈现此文本：[https ://github.com/Cocoanetics/DTCoreText](https://github.com/Cocoanetics/DTCoreText)

# facebook-like - 自动从 facebook 到我的网站

> ID：12984777
> 
> 赞同：0
> 
> 时间：2012-10-20T02:38:55.697
> 
> 标签：facebook-like, feed

我拥有域名 stfu.com 并有一个网站的想法。

Facebook 上的人们在谈话中总是说“stfu”。

有没有办法创建一个自动提要，自动从 Facebook 复制并粘贴对话，其中包含“stfu”字样，所有 Facebook 帐户中的至少 5 个喜欢自动到我的网站 stfu.com

例如：当 Facebook 上的任何人使用“stfu”一词并获得至少 5 个赞时……此对话应自动复制并粘贴到我的网站 stfu.com

这可能吗？

非常感谢您的帮助。

# java - 如何使用primefaces将值从我的视图发送到我的bean？

> ID：12984778
> 
> 赞同：0
> 
> 时间：2012-10-20T02:38:57.217
> 
> 标签：java, primefaces

我正在从我的 bean 和我的视图向我的 bean 发送值，如果我使用诸如“acitonListener”之类的事件，一切都很好，但现在我想将用户发送到其他页面（使用导航规则，它可以工作完美）当我单击一个按钮时，但在此之前我想在我的 bean 中设置一个值，我该怎么做？

我正在做这样的事情

```
 <p:commandButton value="Send" id="sendButton" action="#{myBean.myMethod}" 
    update=":form:growTop" >
   </p:commandButton> 
```

在此之前只有一个包含`<h:outputText/>`我的 bean 值的表，有什么方法可以做到这一点？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T05:53:39.597

```
action="#{myBean.myMethod(myParameter)} 
```

上面的方法表达式将发送`myParameter`到`myMethod`您的支持 bean 中的函数：

```
public void myMethod(String myParameter) {
    // ...
} 
```

您还可以通过从您的操作方法返回有效的导航结果将用户发送到下一页：

```
public String myMethod(String myParameter) {
    // ...
    return "myPage?faces-redirect=true";
} 
```

在您的具体情况下，如果有一个支持 bean 值被打印出来：

```
<h:outputText value=#{myBean.myParameter}/> 
```

以下动作

```
<p:commandButton value="Send" id="sendButton" action="#{myBean.myMethod(myParameter)} 
    update=":form:growTop" >
</p:commandButton> 
```

将传递`myParameter`给您的操作方法。

为了获得 primefaces 数据表的预期行为，至少`@ViewScoped`在表值后面使用支持 bean。

# iphone - iTether 是如何工作的（html5 iphone api）

> ID：12984781
> 
> 赞同：1
> 
> 时间：2012-10-20T02:39:17.157
> 
> 标签：iphone, ios, html

像 itether 这样的东西是如何工作的？是否有一个 HTML5 api 可以让您对设备进行这种级别的访问？我认为为基于 Web 的应用程序提供如此多的访问权限是一个巨大的安全风险。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T04:51:39.553

Tethering 的 HTML5 应用程序通过使用 iPhone 作为代理服务器来工作，因此可以设置一个 ad-hoc Wi-Fi 网络并运行特殊的桌面软件来将 HTTP 流量引导到 iPhone。

加载到 iPhone 上的 HTML5 页面推动流量并返回结果，无需获得 Apple 或网络运营商的批准即可创建网络共享。（[原始来源](http://www.theregister.co.uk/2012/03/12/tethering_iphone/)）

我认为他们正在使用 HTML [WebSockets](http://www.websocket.org/aboutwebsocket.html)检测代理服务器的存在并自动设置隧道以通过代理。

# javascript - jQuery 驱动的固定定位 div - 页面滚动在 Firefox 中消失，在 Chrome、IE、Safari 中运行良好

> ID：12984784
> 
> 赞同：-3
> 
> 时间：2012-10-20T02:39:59.743
> 
> 标签：javascript, jquery, html, css, firefox

[在这里](http://bit.ly/S9eJ87)，我在右侧边栏的底部有一个 div，它应该以这种方式运行：

1.  当您向下滚动页面并且 div 到达浏览器屏幕的顶部时，它的类会发生变化，并且它将固定在屏幕顶部，直到您到达 div 的父元素的底部。

2.  一旦 div 的底部到达父元素的底部，它的类就会变回非固定位置。

现在解决问题：

由于某种原因，在 Firefox 中，一旦 div 到达父元素的顶部，它就会消失，而在 Chrome、IE 和 Safari 中，它仍然可见。

如何防止 div 在 Firefox 中消失？

您可以在此处找到所有必要的代码：http: [//bit.ly/S9eJ87](http://bit.ly/S9eJ87)。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T04:17:12.463

发生这种情况是因为 Firefox（我认为某些版本的 IE）没有正确设置高度设置为 100% 的嵌套表的高度。

在 Chrome 上，$('#col12').height() 是 1102。在 Firefox 上，它是 0。

因此，作为一种解决方法，您可以更改此行：

```
else if ($(this).scrollTop() + $el.height() 
  < $el.parent().offset().top + $el.parent().height()) 
```

到：

```
else if ($(window).scrollTop() + $el.height() 
  < $el.parent().offset().top + ($('.content2').height() - $('#fullsize td:first').height())) 
```

如果你给元素一些更好的 id，你可以替换 td:first 选择器。

基本上发生的事情是这样的：

*   您的主要内容有一个左列，一行，右列，两行。
*   右列的底行应该是最大高度，但不是。
*   因此，要弄清楚该高度应该是多少，取左列的高度，然后减去右列顶行的高度。

如果不清楚，请告诉我，我会尝试更新我的答案。

公里

# iphone - 目标文件格式无法识别、无效或不合适的 xcode

> ID：12984788
> 
> 赞同：4
> 
> 时间：2012-10-20T02:40:25.793
> 
> 标签：iphone, cocoa-touch, ios6, xcode4.5, codesign

我知道已经发布了其他类似的问题，但这些解决方案都不适合我。今天从 4.3.3 更新到 Xcode 4.5.1。得到这个错误：

```
Build/Products/Debug-iphoneos/MobileApp.app/MobileApp malformed object (unknown load command 19)
/Users/garyt/Library/Developer/Xcode/DerivedData/MobileApp-cgojnkplmjncbaaigyvelwclibwr/Build/Products/Debug-iphoneos/MobileApp.app/: object file format unrecognized, invalid, or unsuitable
Command /bin/sh failed with exit code 1 
```

所以按照[这里](https://stackoverflow.com/questions/4842717/iphone-codesign-object-file-format-invalid-or-unsuitable)的说明。下载了最新的命令行工具，尝试了建议的 sudo codesign_allocate 修复，并检查以确保我的名称和值在目标和产品上都匹配，但仍然出现“目标文件格式无效或不合适的错误弹出”。可可/iOS 开发人员的新手，这并不是我所期待的。任何帮助，将不胜感激。我想我还应该注意，当我运行 Xcode 4.3.3 时一切正常，这就是我更新的内容。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-01T10:26:51.677

最好的方法是删除 XCode 并从 Appstore 安装一个新的。

[https://itunes.apple.com/in/app/xcode/id497799835?mt=12](https://itunes.apple.com/in/app/xcode/id497799835?mt=12)

# php - 无法修改标头信息

> ID：12984790
> 
> 赞同：2
> 
> 时间：2012-10-20T02:40:32.993
> 
> 标签：php

> **可能重复：**
> [PHP 已发送的标头](https://stackoverflow.com/questions/8028957/headers-already-sent-by-php)

错误：

```
Warning: Cannot modify header information - headers already sent by (output started at functions.php:37) in functions.php on line 207 
```

添加.php

```
<?php include('functions.php'); ?>
<?php global_header("Add"); ?>
    <?php page_navigation(); ?>
    <?php
    // If no form has been submitted, present form
    if (empty($_POST))
    {   
        add_form();
    }
    // if a form has been submitted
    else
    {       
        // if form_validity() == 1, proceed to connect
        if (form_validity() == 1)
        {
            // connect to mysql + database
            connect();

            // get values from form, insert into database

            $saleItemCheck = isset($_POST['saleItem'])?"y":"n";
            $discItemCheck = isset($_POST['discountedItem'])?"y":"n";

            $sql=("INSERT INTO inventory (name, manufac, model, descrip, onhand, reorder, cost, price, sale, discont, deleted)
                       VALUES ('$_POST[itemName]', '$_POST[manufacturer]', '$_POST[model]', '$_POST[description]', '$_POST[numberOnHand]', 
                               '$_POST[reorderLevel]', '$_POST[cost]','$_POST[sellingPrice]', 
                               '$saleItemCheck', '$discItemCheck', 'n')");

            // if the query doesn't work, display error message
            if (!(mysql_query($sql))) { die ("could not query: " . mysql_error()); }

            add_form(); 

            redirect("view.php");
        }
        else
        {
            // if form is not valid (form_validity returns 0), display error messages
            add_form();
        }
    }
    ?>
<?php page_footer(); ?> 
```

我的重定向功能

```
<?php
function redirect($page)
{
header('Location:'.$page); <------------------------------------ line 207
}?> 
```

头功能

```
<?php
function global_header($page_title)
{
    $content = '<!doctype html>
    <html lang="en">
        <head>
            <meta charset="utf-8">
            <title>DIMAS OLYMPIC WEIGHTLIFTING EQUIPMENT - ' . $page_title . '</title>
            <meta name="description" content="BTI320 Assignment 1">  
            <meta name="author" content="Marcel Olszewski - 078-681-103"> 
            <link rel="stylesheet" href="style.css" />
        </head> 
        <body>
        <div id="container">
        <div><img src="logo.png" id="logo" alt="I (Marcel Olszewski) created this in photoshop" /></div>';
    echo $content;  <------------------- LINE 37
}
?> 
```

以前有效，现在无效，不太清楚为什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T02:42:18.383

您无需关闭并重新打开 PHP 标记——这：

```
 }
}
?>
<?php page_footer(); ?> 
```

可以转换为：

```
 }
}
 page_footer(); 
```

您甚至不需要结束 PHP 标记。通过关闭标签，您冒着在关闭标签后留下空白的风险，这将回显到浏览器并导致您遇到的问题。通常，如果 PHP 标记位于文件末尾，则无需关闭它们。

编辑：这是你的问题：

改变：

```
<?php include('functions.php'); ?>
<?php global_header("Add"); ?>
    <?php page_navigation(); ?>
    <?php 
```

到：

```
<?php include('functions.php'); 
global_header("Add"); 
page_navigation(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-20T02:42:42.503

这是因为您已经向标准输出输出了一些内容。看看你的代码。如果您没有明确地这样做，则可能是您的代码执行中存在错误（例如 MySQL 连接错误），并且`display_errors`您`On`在调用`php.ini`之前编写了错误消息。`header`

此外，如果您的 PHP 代码的编码发生了变化，则 BOM 字符可能已添加到您的代码中，这是在您发送标头之前非自愿但非常真实的输出。

可能导致问题的另一件事是关闭打开的`?><?php`标签可能会在 PHP 块之间的代码中留下空格（甚至其他字符），从而通过 HTTP 向浏览器发送不必要的输出，从而导致问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-20T02:48:12.130

看起来你之前有输出缓冲，因为你在尝试重定向之前肯定有输出。

# c++ - 方程中的多重/除法困境

> ID：12984791
> 
> 赞同：8
> 
> 时间：2012-10-20T02:41:06.363
> 
> 标签：c++, c

我需要用 C/C++ 计算这个方程：

```
x=(a*b-1)/c; 
```

使用 __int64 类型的 a,b,c,x (a,b,c,x<10^13)。在所有情况下，选择 a,b,c 以使 x 适合 __int64。
但是，a*b 非常大，会导致溢出，x 是错误的。
我尝试通过类型转换来分隔 a*b：

```
x=(__int64)(((double)a/c)*(double)b - 1.0/c); 
```

这样，首先计算 a/c 并且不会发生溢出错误。
但是，问题是 ((double)a/c)*(double)b​​ 有时值很大（大约数十亿）并且精度降低，因此 1.0/c（非常小）不起作用并导致错误+-1。

例如：(__int64)(((double)a/c)*(double)b​​=123456789.01更有可能变成123456789.0和1.0/c=0.02。这种情况下有+1的误差。

有没有办法在没有外部库（如 Boost 或 Bignum）的情况下计算 x 精确？即使有错误 +-1 也会搞砸我的代码。
提前致谢。
顺便说一句，我使用 Visual Studio 10。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-20T04:01:28.717

您可以手动实现长算法，使用 32 位块：

长乘法：

```
 (ax + b) * (cx + d)
= ac x^2 + (ad+bc) x + bd

  [ab]*[cd]=[efg]:

   //long long e,f,g
   g = (long long)b*d;
   f = (long long)a*d+b*c;
   e = (long long)a*c;
   //perform carry
   f += g>>32; g &= 0xFFFFFFFF
   e += f>>32; f &= 0xFFFFFFFF 
```

学分，假设无符号算术：

```
 [efg]/[hi]=[jkl]:

    [jk] = [ef]/[hi];
    r = [ef]-j*[hi];
    l = [rg]/[hi];
    if j > 0, result doesn't fit
    x = [kl]; 
```

如果`a`和`b`有符号，则首先修复符号并使用绝对值进行计算，如@Serge 所建议的那样：如果 a 或 b 为零，`x=(-1)/c` 否则，`sign(x)=sign(a)*sign(b)*sign(c)`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-20T03:03:23.947

如果您的代码可能依赖于 CPU，最简单的方法可能是使用汇编程序来保留高位 8 个字节。x64，假设结果适合 8 个字节：

```
__asm{
  MOV RAX, a
  MUL b
  SUB RAX, 1
  SBB RDX, 0
  DIV c
  MOV x, RAX
} 
```

[1] [http://en.wikibooks.org/wiki/X86_Assembly/Arithmetic](http://en.wikibooks.org/wiki/X86_Assembly/Arithmetic)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-20T03:04:40.433

尝试找出 a 的最大乘数，它不会溢出。例如，如果 a*4 会溢出，则部分执行：

```
(a*5) = (a*3) + (a*2) 
```

因此，如果您发现中等值，例如

```
b1, b2, b3, where b1+b2+b3 == b 
```

然后

```
x = a*b1/c + a*b2/c + a*b3/c - 1.0/c 
```

您将从 b1 = floor(MAX_INT / a) 中找到最大的可用值，然后 b2 将是 b 的其余部分，仅当 b-b1 < b1 如果不是，则必须重复。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-20T05:56:43.783

您也许可以重新排列您的计算：

```
x = (a*b - 1) / c
  = a*b/c - 1 / c
  = (a/c)*b - 1 / c       ;If a is likely to be huge
  = a*(b/c) - 1 / c       ;If b is likely to be huge 
```

问题将是精度损失。这可以通过跟踪值的范围和引入缩放因子（选择使中间值尽可能大而不会溢出）来最小化。

例如，if`a`可以是0到1024，`b`可以是0到16777215，`c`也可以是4096到8192；然后：

```
x  = (a * ((256*b) /c) - 256 / c) / 256 
```

在这种情况下`(256*b) <= 0xFFFFFF00`（尽可能大以避免溢出 32 位无符号整数）`( (256*b) / c) <= 0x000FFFFF`、 和`a * ((256*b) /c) <= 0x3FFFFC00`.

同样对于这种情况，`a*b`（根据原始公式）将溢出一个 32 位无符号整数；和`b/c`（从第一次重新排列开始）会比现在损失 8 位的精度`(256 * b) / c`。

当然，针对您的具体情况的最佳公式（在没有溢出的情况下给出最小精度损失的公式）取决于您具体情况下可能的变量范围。

# java - 打开和写入文件 Java

> ID：12984792
> 
> 赞同：0
> 
> 时间：2012-10-20T02:41:09.227
> 
> 标签：java, file, printing, text-files

我目前被困在我的代码中。我需要将数据写入文本文件，我正在进行排序，他们正在花费时间完成每个排序，然后将它们放入一个 txt 文件中，然后我可以使用该文件来创建图表。问题是我运行程序后只得到一行。我无法保留每个结果。

```
public static void resultsToFile(String sort, double seconds, File file)
{
    try (PrintWriter out = new PrintWriter(new FileWriter(file)))
    {
        out.write(sort + "\t"); 
        out.write(seconds + " seconds\n");
        out.flush();
        out.close();

    }catch (IOException e)
    {
        e.printStackTrace();
    }   
} 
```

到目前为止，这就是我写入文件的方法。任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-20T02:46:37.803

正如**HovercraftFullOfEals**所提到的，您为每一行打开文件，这是一个很大的性能开销。

然而，您看到的问题是因为您没有打开文件来追加它，而是从头开始写入。要附加到文件，请使用构造函数打开它[`FileWriter(File,boolean)`](http://docs.oracle.com/javase/6/docs/api/java/io/FileWriter.html#FileWriter%28java.io.File,%20boolean%29)：

```
try (PrintWriter out = new PrintWriter(new FileWriter(file, true))) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-20T02:42:38.123

每次将一行结果写入文件时，您都会创建一个新的 PrintWriter 对象，从而覆盖任何先前存在的包含前一行数据的 File。为什么不在课堂上创建一次 PrintWriter，然后在将*所有*数据写入文件后关闭它？

# php - PHP jQuery 动态填充 SELECT

> ID：12984802
> 
> 赞同：0
> 
> 时间：2012-10-20T02:42:55.827
> 
> 标签：php, jquery, select, dynamic, options

一直在寻找解决方案，并在堆栈溢出方面找到了一些帮助，但在大多数情况下，我发现的示例没有使用由数据库查询形成的数组。这是我想要实现的一些代码......

```
$stores = mysql_query("SELECT * FROM Stores");
$staff = mysql_query("SELECT * FROM Staff"); 
```

我想创建两个元素，一个用于商店，另一个用于员工，但我想根据商店客户端过滤员工。因此，如果用户从第一个下拉列表中选择“Sydney”，则他们只会在第二个下拉列表中看到在悉尼商店工作的员工。然后如果用户从第一个下拉列表中选择“伦敦”，则悉尼工作人员将被伦敦工作人员所取代，依此类推。

我的服务器端脚本是用 PHP 完成的，我可以用 PHP 创建两个下拉列表。但是我坚持使用 jQuery 从第二个下拉列表中删除我不想要的。

我知道这是可能的，因为我看到它一直在使用。我已经看到很多关于如何管理它的示例，但没有一个示例使用 PHP 数组中的数据来插入 .

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-20T02:49:16.307

你需要ajax。

当用户在下拉列表中选择某些内容时，这会触发您可以处理的事件。在此过程中，您获取选择的值，例如 jQuery('#id_dropdown').val()，然后通过 ajax 发送（我喜欢使用 POST，因为您不会遇到 GET 请求大小限制）。

您可以在服务器端使用 php 进行处理，使用选定的值访问数据库并通过 ajax 发送。当您获得第二个下拉列表的正确结果时，您可以通过 echo 输出它。

最后，当响应返回给 jQuery 时，您可以在新的下拉列表中插入所有选项。

* * *

**JAVASCRIPT部分：**

1.  将事件绑定到第一个下拉列表
2.  获取下拉列表中选择的选项的值
3.  发出ajax请求

这是一些示例代码：

```
 var parameters='value_selected='+value_dropdown;
 jQuery.Post({
       url: '/destiny_when_I_process',
       data: parameters, 
       success: func_callback

 });
//here you can imagine a pause, because PHP is processing the data you send by post
//....  
//....
//this part is executed when php send the information 
function func_callback(response_from_php){
       jQuery('#second_dropdown').html(response_from_php); 
} 
```

* * *

**PHP部分：**

1.  从 POST 中获取价值
2.  使用该值访问数据库
3.  回声（发送响应）。您发送一串文本（HTML 格式），这确实不是很专业，但可以用于演示目的。专业人士发送 JSON，因为 JSON 更轻量级。

* * *

**JAVASCRIPT部分（第二部分）**

1.  在回调函数中，您通过第一个参数接收响应数据
2.  在第二个下拉菜单中插入新数据（由于数据已经是HTML，不需要处理）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-20T06:48:34.757

花了一个下午学习如何做到这一点，它工作得很好。在这里为其他人发布了新代码....

感谢[http://forum.codecall.net/topic/59341-php-sql-jquery-and-ajax-populate-select-boxes/](http://forum.codecall.net/topic/59341-php-sql-jquery-and-ajax-populate-select-boxes/)的教程。

并感谢这里的每一个人。

PHP 为第一个构建：

```
function agency_select() {
include('../include/dbase.php');
$agencies = $pdo->query("SELECT * FROM agency WHERE Status='active' ORDER BY AgencyName");
$opt = '';
while ($age_array = $agencies->fetch(PDO::FETCH_ASSOC)) {
    $opt .= '<option value="'.$age_array['AgencyId'].'">'.$age_array['AgencyId'].' - '.$age_array['AgencyName'].' - '.$age_array['AgencySuburb'].'</option>'."\n\t\t\t\t\t\t\t";
}
return $opt;
} 
```

两个元素的 HTML：

```
<label for="AgencyId">Client/Agency:</label>
    <select class="uniform" id="AgencyId" name="AgencyId" style="width: 400px; overflow-x: hidden">
        <?php echo agency_select(); ?>
    </select>

<label for="Contact">Contact: </label>
    <select class="uniform" id="Contact" name="Contact" style="width: 300px; overflow-x: hidden">
        <option value="">----Select Client/Agency----</option>
    </select> 
```

AJAX 文件：

```
if(isset($_POST['AgencyId'])) {

include('../include/dbase.php');

$option = '<option value="">----Select Contact----</option>';

$query = $pdo->prepare("SELECT * FROM client WHERE AgencyId= ?  AND Status='active' ORDER BY FirstName");
$result = $query->execute(array($_POST['AgencyId'])));

while ($row = $result->fetch(PDO::FETCH_ASSOC)) {
    $option .= '<option value="'.$row['id'].'">'.$row['FirstName'].' '.$row['LastName'].'</option>';
}

echo $option;
} 
```

jQuery：

```
$(document).ready(function () {
    update_contacts();
});

function update_contacts() {
$('#AgencyId').change(function() {
    $('#Contact').fadeOut();
    $('#loader').show();

$.post('../ajax/ajax_contact_select.php', {
        AgencyId: $('#AgencyId').val()
        }, function (response) {
        setTimeout("finishajax('Contact', '"+escape(response)+"')", 400);
        });
        return false;
    });
}

function finishajax(id,response) {
    $('#loader').hide();
    $('#'+id).html(unescape(response));
    $('#'+id).fadeIn();
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-20T03:07:37.987

对于第二个下拉菜单，是的，您需要一些 ajax。

您可以创建一个脚本来获取对应于商店的结果并发送回选项 listm 女巫被插入到选项中。

使用 jquery 和 php 你需要一些东西。

用于获取结果并返回选项的 php 文件。（比如说getStaff.php）

```
<?php 
//get the store id by post is it is set
if (isset($_POST['store->id']) $store_id = mysqli_real_escape_string($_POST['store_id']);

//get the data !! notice the WHERE caluse
$r = mysql_query("SELECT * FROM Staff" *WHERE store=''$store->is*);

//split the data in the array
$staffs=array();
    while ($assoc = mysql_fetch_assoc($r)) {
          //Varialbe = $assoc['colum_name'];
          $staff->id=$assoc['id'];
         $staff->name=$assoc['name'];
        //and so on for each colum in your table.
        array_push($staffs, $assoc);
   }

//echo the result as option
foreach ($staffs as $staff) echo "<option value='$staff->id'>$staff->name</option>";
?> 
```

在您第一次选择中，添加

```
onchange="$.post('getStaff.php', {store_id:$(this).val()}, function (data){ $('#staff_select').html(data);});" 
```

并在此 ecample 中为您的第二个选择 (staff_select) 添加一个 id。

作为解释：当第一个下拉列表更改时，它会向 getStaff.php 发送一个请求，并将 store_id 作为 POST 参数。php sript 根据商店 ID 获取 syaff，并为您的次要选择带回选项标签列表。比 jquery 将“数据”添加到您的辅助选择中，瞧！

希望你清楚，因为它是一堆小东西一起让它工作。抱歉，如果答案看起来很草率，但是一旦您知道它就真的很简单。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-20T02:55:05.960

我会尽力帮助你，我可以解释它。

mysql_query，你应该使用 mysqli 顺便说一句，mtsql 被弃用，返回一个结果集。这意味着您将拥有查询中的所有记录。在使用它之前，您需要先将结果分解。这是通过使用 mysql_fetch_assoc、mysql_fetch_row 等方法来完成的。有类似 fetch to array 之类的东西，但我不掌握它，所以我将使用 fetch assoc 来回复。

因此，一旦您获得了 yoru 结果集、$stores 和 $staff 在您的情况下，您就可以在结果上调用一个 while 循环来获取数据，如下所示：

```
 while ($assoc = mysql_fetch_assoc($r)) {
          //Varialbe = $assoc['colum_name'];
          $stores->id=$assoc['id'];
         $stores->name=$assoc['name'];
        //and so on for each colum in your table.
        array_push($stores, $assoc);
   } 
```

然后，您可以根据需要导出它。在你的情况下会是这样的

```
foreach ($stores as $store) echo "<option value='$store->id'>$store->name</option>"; 
```

我强烈建议你看看[http://php.net/manual/en/function.mysql-fetch-array.php](http://php.net/manual/en/function.mysql-fetch-array.php)女巫会用一个以 columname 作为键的数组来做同样的 fetch_assoc bu。

# python - 每次编辑对象时，DateField 都会自行清除

> ID：12984803
> 
> 赞同：2
> 
> 时间：2012-10-20T02:43:07.167
> 
> 标签：python, django, sqlite, orm

我有以下模型：

```
class Day(models.Model):
day = models.DateField()
title = models.CharField(max_length=20)
description = models.CharField(max_length=160)
votes = models.IntegerField(max_length=7)
last_vote = models.DateTimeField()

def __unicode__(self):
    return self.title 
```

每当我像这样编辑它时：

```
current_time = datetime.datetime.now()
day_to_vote_for.votes += 1
day_to_vote_for.last_vote = current_time
day_to_vote_for.save() 
```

或者每当我通过管理控制面板进行编辑时，它都会重置为空白字段？为什么？Datetime 字段不会发生这种情况。我如何解决它？

人们需要能够指定除现在以外的日期。所以 auto_now_add 不起作用。就是无缘无故的清零。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T03:35:58.677

如果您希望在保存字段时使用当前时间戳更新字段，只需传递 auto_now=True 或在实际创建对象时使用 auto_now_add=True 保存时间戳。

# apache-flex - Flex：使用 HTTPService 和 URLRequest 的区别

> ID：12984806
> 
> 赞同：0
> 
> 时间：2012-10-20T02:44:19.023
> 
> 标签：apache-flex, actionscript

`HTTPService`使用和`URLRequest`请求从弹性页面到 servlet 的数据有什么区别

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-20T15:10:13.170

[URLRequest](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/net/URLRequest.html)是包含要加载的 URL、post 参数等的请求对象。通常它与比 HTTPService 更基本的加载器类型一起使用，例如 URLLoader。

[HTTPService](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/mx/rpc/http/mxml/HTTPService.html)直接将 URL 作为其属性之一，因此它不需要 URLRequest。从技术上讲，您可以使用 URLRequest 来提供其余的“有效负载”，因为它是一个对象，并且 HTTPService 的请求参数可以是任何对象。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-20T15:23:39.603

HTTPService 是更高级别的对象，是 Flex 框架的一部分，不是 Flash Player 的原生对象。

它实现了各种接口，并且可以用作 MXML 标记，因此您可以直接将 UI 控件绑定到它。如果您主要在 MXML 中工作，这更容易使用。

URLLoader 是 Fl​​ash Player 原生的，并且级别更低。

# android - LibGdx - 在 Screen 类上需要帮助

> ID：12984808
> 
> 赞同：1
> 
> 时间：2012-10-20T02:45:58.740
> 
> 标签：android, libgdx

过去 3 周我一直在使用`libgdx`.. 我创建了两个引用游戏的屏幕：

```
public class Game extends Game {

TitleScreen titleScreen;
SplashScreen splashScreen;

@Override
public void create() {
    // TODO Auto-generated method stub
    titleScreen = new TitleScreen(this);
    splashScreen = new SplashScreen(this);
    setScreen(splashScreen);

} 
```

}

和

```
public class SplashScreen implements Screen {

Game game;

public SplashScreen(Game game) {
    // TODO Auto-generated constructor stub
    this.game = game;
    }

@Override
public void show() {
    // TODO Auto-generated method stub
}

@Override
public void hide() {
    // TODO Auto-generated method stub
}

@Override
public void render(float delta) {
    // TODO Auto-generated method stub
    Gdx.gl.glClearColor(0.5f, 1f, 1f, 1);
    Gdx.gl.glClear(GL10.GL_COLOR_BUFFER_BIT);

    if(Gdx.input.justTouched()){
        game.splashScreen.dispose();
        game.setScreen(game.titlescreen);
    }

}

@Override
public void resize(int width, int height) {
    // TODO Auto-generated method stub

}

@Override
public void pause() {
    // TODO Auto-generated method stub

}

@Override
public void resume() {
    // TODO Auto-generated method stub

}

@Override
public void dispose() {
    // TODO Auto-generated method stub

} 
```

我如何`splashscreen`完全处置？当我`game.setscreen(game.splashscreen)`在`titlescreen`课堂上打电话时，它恢复了`splashscreen`;。我期待设置一个新的`splashscreen`..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-20T02:52:38.533

每次您想从头开始显示启动画面时，都创建一个新的启动画面：

```
game.setScreen(new SplashScreen(game)); 
```

# ruby-on-rails - 使用 find_or_create_by 创建包含嵌套对象的对象

> ID：12984811
> 
> 赞同：4
> 
> 时间：2012-10-20T02:47:26.463
> 
> 标签：ruby-on-rails, activerecord

我想像这样的查询。

```
Movie.find_or_create_by_title(title: 'foo').photos.find_or_create_by_name(name: 'bar') 
```

给定的查询将创建`Photo`对象，但不会考虑其父对象`Movie`。

```
 => #<Photo id: 3, movie_id: nil … 
```

有什么办法可以把电影传给它吗？

更新：我尝试“同时保存两者”的原因是因为我有一个验证，要求电影至少有一张照片。请参阅：[https ://stackoverflow.com/a/12962317/471313](https://stackoverflow.com/a/12962317/471313)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-20T03:42:46.087

我正在使用更新的 Rails 3.2 语​​法，`find_or_create_by`因为它将在 Rails 4.0 中弃用。重要的是`accepts_nested_attributes_for`在您的*电影*模型中具有如下所示：

```
class Movie < ActiveRecord::Base
  has_many :photos
  accepts_nested_attributes_for :photos
end 
```

这允许您`<relation-name>_attributes`在您的情况下使用表单指定模型属性中的键`photo_attributes`。

```
@movie = Movie.where(:title => 'foo').first_or_create :director => 'Steven Speilberg',
                                                      :photos_attributes => [{
                                                        :caption => "Thrilling!"
                                                      }]
@movie.save 
```

在此之后，您只需保存父模型，这将自动保存子模型，同样在您的案例照片中。有必要先保存父母，因为孩子需要知道将什么id放入孩子记录中。所以`@movie`保存后，它会将它的 id`movie_id`放在照片记录的字段中。它无法在父母之前保存孩子，因为它不知道要使用什么 id。

如果您使用的是 3.2 之前的 Rails 版本，它将如下所示：

```
@movie = Movie.find_or_create_by_title "W00t!", :director => 'Steven Speilberg',
                                                :photos_attributes => [{
                                                  :caption => "Thrilling!"
                                                }] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-20T03:38:56.540

```
movie = Movie.where(title: 'foo').first
if movie.nil?
  movie = Movie.new(title: 'foo')
  movie.photos.build(name: 'bar')
  movie.save
else
  movie.photos.create(name: 'bar')
end 
```

# c - 在 C++ 中通过 'recv' 和 'MSG_PEEK' 获取套接字中可用的字节数

> ID：12984816
> 
> 赞同：14
> 
> 时间：2012-10-20T02:48:26.183
> 
> 标签：c, sockets, buffer, recv, peek

`MSG_PEEK`C++ 具有以下从套接字接收字节的函数，它可以使用标志检查可用的字节数。使用`MSG_PEEK`，'recv' 的返回值是套接字中可用的字节数：

```
#include <sys/socket.h>
ssize_t recv(int socket, void *buffer, size_t length, int flags); 
```

我需要在不创建的情况下获取套接字中可用的字节数`buffer`（不为 分配内存`buffer`）。有可能吗？怎么做？

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2012-10-20T03:00:30.937

你要找的是`ioctl(fd,FIONREAD,&bytes_available)`，windows下`ioctlsocket(socket,FIONREAD,&bytes_available)`。

但请注意，操作系统并不一定保证它将为您缓冲多少数据，因此如果您正在等待大量数据，您最好在数据进入时读取数据并将其存储在您自己的缓冲区中直到你拥有处理某事所需的一切。

为此，通常所做的只是一次读取块，例如

```
char buf[4096];
ssize_t bytes_read;
do {
     bytes_read = recv(socket, buf, sizeof(buf), 0);
     if (bytes_read > 0) {
         /* do something with buf, such as append it to a larger buffer or
          * process it */
     }
} while (bytes_read > 0); 
```

如果您不想坐在那里等待数据，您应该查看`select`或`epoll`确定何时准备好读取数据，`O_NONBLOCK`如果您想确保永远不会阻塞 recv，则套接字标志非常方便.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-20T03:39:39.827

在 Windows 上，您可以使用[`ioctlsocket()`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms738573.aspx)带有`FIONREAD`标志的函数来询问套接字有多少字节可用，而无需自己读取/查看实际字节。`recv()`返回的值是可以在没有阻塞的情况下返回的最小字节数。当您实际调用 时`recv()`，可能已经到达了更多字节。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2021-03-15T15:27:58.627

```
The short answer is : this cannot be done with MS-Windows WinSock2,
as I can discovered over the last week of trying. 

Glad to have finally found this post, which sheds some light on the issues I've been having, using latest Windows 10 Pro, version 20H2 Build 19042.867 (x86/x86_64) :

On a bound, disconnected UDP socket 'sk' (in Listening / Server mode):

1\. Any attempt to use either ioctlsocket(sk, FIONREAD, &n_bytes)
   OR WsaIoctl with a shifted FIONREAD argument, though they succeed,
   and retern 0, after a call to select() returns > with that 
  'sk' FD bit set in the read FD set,
   and the ioctl call returns 0 (success), and n_bytes is > 0, 
   causes the socket sk to be in a state where any
   subsequent call to recv(), recvfrom(), or ReadFile() returns 
   SOCKET_ERROR with a WSAGetLastError() of :
   10045, Operation Not Supported, or ReadFile
   error 87, 'Invalid Parameter'.

Moreover, even worse:

2\. Any attempt to use recv or recvfrom with the 'MSG_PEEK' msg_flags 
   parameter returns -1 and WSAGetLastError returns :
   10040 : 'A message sent on a datagram socket was larger than 
    the internal message buffer or some other network limit, 
    or the buffer used to receive a datagram into was smaller 
    than the datagram itself.
       ' .

   Yet for that socket I DID successfully call:
setsockopt(s, SOL_SOCKET, SO_RCVBUF, bufsz = 4096 , sizeof(bufsz) )
   and the UDP packet being received was of only 120 bytes in size.

   In short, with modern windows winsock2 ( winsock2.h / Ws2_32.dll) , 
   there appears to be absolutely no way to use any documented API
   to determine the number of bytes received on a bound UDP socket
   before calling recv() / recvfrom() in MSG_WAITALL blocking mode to
   actually receive the whole packet.

   If you do not call ioctlsocket() or WsaIoctl or 
   recv{,from}(...,MSG_PEEK,...) 
   before entering recv{,from}(...,MSG_WAITALL,...) ,
   then the recv{,from} succeeds.

   I am considering advising clients that they must install and run
   a Linux instance with MS Services for Linux under their windows
   installation , and developing some
   API to communicate with it from Windows, so that reliable 
   asynchronous UDP communication can be achieved - or does anyone 
   know of a good open source replacement for WinSock2 ? 

   I need access to a "C" library TCP+UDP/IP implementation for 
   modern Windows 10  that conforms to its own documentation, 
   unlike WinSock2 -  does anyone know of one ? 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-12-09T11:32:33.523

使用时要小心`FIONREAD`！using 的问题`ioctl(fd, FIONREAD, &available)`是它总是会返回在某些系统上的套接字缓冲区中可供读取的字节总数。

这对于 STREAM 套接字 (TCP) 没有问题，但对于 DATAGRAM 套接字 (UDP) 会产生误导。对于数据报套接字，读取请求被限制为缓冲区中第一个数据报的大小，当读取的数据小于第一个数据报的大小时，该数据报的所有未读字节仍然被丢弃。所以理想情况下，您只想知道缓冲区中下一个数据报的大小。

例如，在 macOS/iOS上，[记录](https://manpagez.com/man/2/getsockopt/)`FIONREAD`始终返回总金额（参见关于 的评论`SO_NREAD`）。要仅获取下一个数据报的大小（以及流套接字的总大小），您可以使用以下代码：

```
int available;
socklen_t optlen = sizeof(readable);
int err = getsockopt(soc, SOL_SOCKET, SO_NREAD, &available, &optlen); 
```

在 Linux`FIONREAD`上记录为[仅返回](https://man7.org/linux/man-pages/man7/udp.7.html)UDP 套接字的下一个数据报的大小。

在 Windows`ioctlsocket(socket, FIONREAD, &available)`上记录为始终给出总大小：

> 如果在 s 参数中传递的套接字是面向消息的（例如，类型 SOCK_DGRAM），FIONREAD 将返回报告可读取的字节总数，**而不是在套接字上排队的第一个数据报（消息）的大小。**

来源：[https ://docs.microsoft.com/en-us/windows/win32/api/ws2spi/nc-ws2spi-lpwspioctl](https://docs.microsoft.com/en-us/windows/win32/api/ws2spi/nc-ws2spi-lpwspioctl)

我不知道如何仅在 Windows 上获取第一个数据报的大小。

# sql - 将记录索引保存到列

> ID：12984819
> 
> 赞同：1
> 
> 时间：2012-10-20T02:49:10.813
> 
> 标签：sql, sql-server

我想将表中每条记录的索引保存到该记录的索引列。所以假设我对我的记录进行了排序：

```
select * from Users order by DateTimeCreated 
```

现在，假设我想在这种排序中缓存它们的位置。我想做这样的事情：

```
update Users set SortedIndex=GETINDEX() order by DateTimeCreated 
```

我怎么能做这样的事情？我可以用 C# 对其进行编码，但我更喜欢一种比单独循环和设置每条记录更有效的方法。我需要预先确定这个数字（写在每条记录上），而不是在运行时确定。谢谢你。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-20T03:09:25.267

尝试这个

```
update users set SortedIndex=row from
(
  select userid, row_number() over(order by DateTimeCreated desc) as row from users 
) u
where users.userid = u.userid 
```

# z3 - 在 Visual Studio 中构建 Z3 时遇到问题

> ID：12984821
> 
> 赞同：3
> 
> 时间：2012-10-20T02:49:19.580
> 
> 标签：z3

您好，我从[http://z3.codeplex.com/](http://z3.codeplex.com/)下载了 Z3 ，然后在 Visual Studio 2012 中打开了 Z3 解决方案。（虽然我对 VS 并不完全陌生，但我已经 10 多年没有使用它了）。此解决方案中有 9 个项目，但我很难说出我应该使用哪个项目。我可以猜到其中一些，但其他的不是很清楚。例如。Microsoft.Z3 和 Microsoft.Z3V3 有什么区别？谁能简要解释一下不同的项目是什么以及要构建哪些项目？

无论如何，只是为了好玩，我尝试构建顶级解决方案，但出现以下错误

错误 1 ​​错误 RC1015：无法打开包含文件“afxres.h”。C:\Projects\z3-src-4.1.2\z3\dll\dll.rc 10 1 dll

错误 2（与错误 1 ​​相同，但在 shell.rc 中除外）

错误 3 错误 LNK1104: 无法打开文件 'C:\Projects\z3-src-4.1.2\z3\Debug\z3_dbg.lib' C:\Projects\z3-src-4.1.2\z3\test_capi\LINK test_capi

尝试仅构建 MS.Z3 项目仍然给我错误 1。

我的最终目标是从 F# 程序中调用 Z3。有人可以为如何做到这一点提供一些指导吗？任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-20T03:05:46.200

**编辑**

*这个答案反映了Z3 版本 <= 4.1.1 中使用的[目录结构。](http://z3.codeplex.com/SourceControl/changeset/view/ae1595360992aa67b6ba55118a6e0e729b786db4#README)在 4.3 版中，代码库已重新组织/简化。*

**结束编辑**

您使用的是哪个版本的 Visual Studio？我问是因为我想重现你描述的行为。[此处](http://z3.codeplex.com/SourceControl/changeset/view/1cfe6e477a3d#README)描述了构建 Z3 的最简单方法。您应该使用 Visual Studio 命令提示符，然后执行`msbuild`. 看来你试过了，但有错误。以下是每个项目文件夹的简短说明：

*   `lib`: Z3 源代码在这里。这是重要的文件夹。对于 Visual Studio 用户，它生成了一个静态库。
*   `dll`：用于将静态库包装为 Windows DLL 的项目。这与其他平台的用户无关。
*   `shell`: 使用静态库 from`lib`来构建`z3.exe`.
*   `test`: 一堆单元测试。它产生`test.exe`.
*   `Microsoft.Z3`：.Net API。它是 Z3 的官方 .Net API（C#、Visual Basic、F# 等）。这是您应该与 F# 一起使用的 API。
*   `Microsoft.Z3V3`: 这是旧的 .NET API。它是 Z3 3.x 中可用的 API。我们维护它是因为一些用户仍在使用它。
*   `test_capi`：测试 Z3 C API 的应用程序。
*   `maxsat`：在 Z3 API 之上实现两个 maxsat 算法的小型应用程序。

# objective-c - 如何在 Core Data 中存储 CLPlacemark 地址数据

> ID：12984822
> 
> 赞同：5
> 
> 时间：2012-10-20T02:49:33.103
> 
> 标签：objective-c, ios, core-data, core-location

我一直在思考存储 CLPlacemark 数据（例如，Thoroughfare、Locality、Country 等）的最佳方式是什么。它们有很多，我目前将它们作为字符串单独存储在 Core Data 中，但这很麻烦。

也许我应该改为存储为可转换的 CLPlacemark ？还有其他方法可以有效快速地存储一大堆键值对吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-22T05:01:43.923

我最终将 CLPlacemark 存储为 Core Data 中的可转换类型。这样做省去了很多麻烦，而且由于 CLPlacemark 与 NSCoding 兼容，因此不需要转换器，非常容易。

# jquery - Twitter bootstrap 下拉输入字段无法使用 focus() 方法

> ID：12984828
> 
> 赞同：10
> 
> 时间：2012-10-20T02:50:46.770
> 
> 标签：jquery, input, twitter-bootstrap

我在登录下拉列表中关注我的第一个输入字段时遇到问题。我正在使用 jquery 1.7.2 和 bootstrap 2.1.1，只有模式和下拉功能。它们都很好用，我通过数据目标而不是 JS 调用下拉菜单和模式。

我已经尝试了几个小时并到处寻找答案，但我找不到让我的第一个输入字段（#j_username）在显示下拉列表时获得焦点的方法。

bootstrap 中显示的事件不会触发，所以我做了一个 jQuery on() 事件，它触发得很好。我的选择器工作正常，我已经在控制台中使用其他方法（hide() 和 show() 以及选择相同字段的各种方法（它的 id #j_username）或（$("#fields input:first ”）。

事件正确触发，但无法让输入字段获得焦点。我已经尝试过 HTML5 的 autofocus 属性，但它似乎也不起作用。

有任何想法吗？提前致谢

该处理程序是函数 onPageReady() 的一部分。

```
$("#loginlnk").on('click', function(){
console.log("FIRE");
$("#j_username").focus();
});

<span class="span-dropdown">
    <button class="dropdown-toggle btn grey" role="button" id="loginlnk" data-toggle="dropdown" href='#'>Login</button>
    <div class="dropdown-menu auth" role="menu" id="signin" aria-labelledby="loginlnk">
    <form-login action="/j_spring_security_check" method="POST" always-use-default-target='false'  default-target-url="/home.do" authentication-failure-url="/welcome.do" />
    <div class="dropdown-caret right">
        <span class="caret-outer"></span>
        <span class="caret-inner"></span>
    </div>
    <div id="fields">   
         <div id="username">Enter your email address
         <input class="inputs login" autofocus="autofocus" id="j_username" name="j_username">
          </div>
          <div id="password">Password
          <input class="inputs login" id ="j_password" name="j_password" type="password" >
          </div>
     </div>
     <div id="submit">
        <button class="btn mapit" id="signinbtn" type="submit" value="Login" onClick="login(1)" tabindex="102">Login</button>
    </div>
    <div id="links">
        <a id="pwdlnk" href="javascript:lostPwd();">Lost your password?</a>         
    </div> 
    <div id="lostpwd">
        Enter your email to receive recovery instructions.
        <div class="container">
        <input class="inputs login" type="email" id="lost_username" tabindex="400">
        <button class="btn" id="lostpwdbtn" type="submit" value="" onClick="forgotPassword()" tabindex="401">Recover</button>
        </div>
    </div>                  
 </form-login> 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-20T16:05:30.777

触发 click 事件时，表单尚未呈现。并且[没有计划将此类事件添加到 Bootstrap 下拉菜单](https://github.com/twitter/bootstrap/issues/1343)。

解决此问题的快速方法是：

```
$("#loginlnk").on('click', function(){
    console.log("FIRE");
    var x = setTimeout('$("#j_username").focus()', 700);
}); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-06-02T10:14:07.793

您可以使用`shown`带有下拉 id`accessdropdown`和输入文本框 id的事件`inputEmail`，如下所示：

```
$('#accessdropdown').on('shown.bs.dropdown', function () {

    $("#inputEmail").focus();

}) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-06-14T10:55:37.547

更通用一点：

```
$(document.body).on('shown.bs.dropdown', function () {
    $("[autofocus]", this).focus();
}); 
```

然后像往常一样在下拉列表中`autofocus`的元素上使用该属性。`input`

# sql - 从 3 个表中删除的存储过程

> ID：12984830
> 
> 赞同：0
> 
> 时间：2012-10-20T02:51:10.083
> 
> 标签：sql, sql-server-2008, stored-procedures

我正在创建相册和图片库作为目录的功能。基本上，企业可以创建相册，并将图像添加到这些相册中。

这是我的表：

*   BD_Album（专辑 ID、所有者 ID、专辑名称）
*   BD_Image（ImageID、OwnerID、ImageFile、ImageTitle、ImageDescription、Active）
*   BD_AlbumImage（EntryID、AlbumID、ImageID）

我想创建一个在所有者删除相册时执行的存储过程。我对这个过程的目标是清理表格。

```
DELETE FROM BD_Album WHERE AlbumID = @AlbumID --This is the obvious
DELETE FROM BD_Image WHERE ...
DELETE FROM BD_AlbumImage WHERE AlbumID = @AlbumID 
```

我的困惑在于我还想从`BD_Image`表中删除与该专辑关联的任何图像。（警告，删除此相册也会删除其中的所有图片。您确定吗？）

所有者可以创建任意数量的专辑。他们还可以通过表单中的列表框将图像分配给多个相册。

可能有点初级，但任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-20T03:39:29.043

您设置表格的方式允许图像在同一个相册中多次存在。如果您只想要专辑中的 1 个图像条目，则不需要 BD_AlbumImage 表中的 EntryId 列，您可以简单地拥有 AlbumId 和 ImageId，这两个外键都可以构成该表的 PrimaryKey。很酷的事情是，您可以对其进行级联删除以自动删除记录，如下所示：

```
ALTER TABLE BD_AlbumImage 
WITH CHECK ADD  CONSTRAINT FK_BD_AlbumImage_BD_Album 
FOREIGN KEY(AlbumID) REFERENCES BD_Album (AlbumID) ON DELETE CASCADE 
```

使用级联，您不需要运行最后一个删除。然后您会说：但是，我将图像附加到没有相册？是的，你可能会。如果是我，我不喜欢删除相册删除其中的图像，我希望它们保留在某种收件箱中，但是如果您想清除没有 ablum 的图像，则可以这样做：

```
DELETE FROM BD_Image 
  LEFT JOIN BD_AlbumImage ON BD_Image.ImageID = BD_AlbumImage.ImageID 
      WHERE BD_AlbumImage.AlbumID IS NULL 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-20T03:55:12.483

```
delete from BD_Image where ImageID in(select ImageID from BD_AlbumImage where AlbumID=@AlbumID )
delete from BD_AlbumImage  where AlbumID=@AlbumID
delete from BD_Album where AlbumID=@AlbumID 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-20T03:00:33.000

尝试

```
DELETE FROM BD_Image 
WHERE ImageID IN 
    (SELECT ImageID FROM BD_AlbumImage WHERE AlbumID = @AlbumID
        AND ImageID  NOT IN 
            (SELECT ImageID FROM BD_AlbumImage WHERE AlbumID <> @AlbumID)) 
```

或者

```
DELETE FROM BD_Image 
WHERE ImageID IN 
    (SELECT ImageID FROM BD_AlbumImage WHERE AlbumID = @AlbumID)
AND ImageID  NOT IN 
    (SELECT ImageID FROM BD_AlbumImage WHERE AlbumID <> @AlbumID) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-20T03:01:51.627

您可以从 SQL server 中的 BD_IMAGE 中删除相关记录，如下所示：

```
DELETE BD_IMAGE
FROM 
    BD_IMAGE i
    JOIN BD_AlbumImage ai
    ON i.ImageID = ai.ImageID
WHERE
    ai.AlbumID = @AlbumID 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-20T03:11:16.300

像这样试试。

```
delete from BD_Album a,BD_Image i,BD_AlbumImage ai where a.AlbumID = @AlbumID
and ai.AlbumID =a.AlbumID and i.ImageID=ai.ImageID; 
```

# android - 如何在 Android 上测量移动数据流量

> ID：12984831
> 
> 赞同：4
> 
> 时间：2012-10-20T02:51:13.743
> 
> 标签：android, traffic-measurement

我正在开发一个应用程序来测量从所有进程通过移动数据接口（无 wifi）接收的数据流量。此外，此计数器必须与日期范围相关，即 3 月 1 日和 4 月 1 日之间。

我已经阅读了有关 TrafficStats 类的信息，但在文档中没有提到任何关于从什么时候开始的统计信息。

这是我的第一个问题，非常感谢您的帮助。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T10:51:07.343

> 我已经阅读了有关 TrafficStats 类的信息，但在文档中没有提到任何关于从什么时候开始的统计信息。

“从什么时候开始”对你来说并不重要。在某个时间点读取一个读数，在稍后的某个时间点读取另一个读数，两者之间的差异就是这两个时间点之间消耗的带宽。

> 此外，此计数器必须与日期范围相关，即 3 月 1 日和 4 月 1 日之间。

您很可能需要自己处理这个问题，每隔一段时间检查一次带宽消耗量（例如，每 4 小时通过`AlarmManager`），将结果存储在数据库中，然后使用该信息来确定长时间消耗的带宽的时间。

# iphone - 赋值使指针从整数而不进行强制转换

> ID：12984832
> 
> 赞同：-1
> 
> 时间：2012-10-20T02:51:21.403
> 
> 标签：iphone, sdk

这是在我的 .h 文件中：

```
NSTimer *theTimer;
NSInteger *timeStart;

@property (nonatomic, retain) NSTimer *theTimer;
@property(assign) NSInteger *timeStart; 
```

在 .h 文件中这一行：

```
UISlider *slider = (UISlider *) sender;
timeStart = (int)(slider.value + 0.5f); 
```

我收到错误消息：赋值从整数生成指针，而没有从第二行进行强制转换

```
timeStart = (int)(slider.value + 0.5f); 
```

有人可以帮忙吗

谢谢，

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-20T02:57:22.310

NSInteger 不是一个对象，它基本上是一个普通的 ol' int 。对于大多数情况你只想做

```
NSInteger i = 10; 
```

不是

```
NSInteger *i = 10; 
```

# direct3d - Z-fighting Direct3D9，只有动态缓冲

> ID：12984834
> 
> 赞同：1
> 
> 时间：2012-10-20T02:52:26.890
> 
> 标签：direct3d, vertex-buffer, depth-testing

我用我的 blendshape 代码中的数据锁定并填充 Direct3d9 中的每一帧的顶点缓冲区。我的着色使用两个步骤，所以我用一个着色器渲染一次，然后用我的另一个着色器绘制一个加法混合。

出于我以外的原因，我的顶点缓冲区中的数据（显然）在这两个绘图调用之间略有不同，因为我有闪烁的 z-fighting，其中第二遍有时会在第一遍渲染“后面”。

这一切都在一个线程中完成，并且缓冲区在渲染调用之前很长时间被解锁。此外，不会对任何着色器指令进行任何更改，因此两次调用中的数据应该*完全相同*。如果 blendshape 碰巧没有改变，则不会发生 z-fighting。

现在我在我的着色器中“推动”一点深度，但这是一个非常不雅的解决方案。

为什么这些数据会被改变？为什么 DirectX 会在我解锁缓冲区后更改缓冲区中的数据？我可以强迫它不改变它吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T16:19:00.197

第一个。你确定数据真的被 D3D 改变了，还是这只是假设？我确定 D3D 不会更改您的数据

第二。正如您所说，您有两个不同的着色器来绘制几何图形。他们可能有不同的转换操作。或者由于优化，着色器中的转换可能会有所不同，这就是为什么转换后的顶点可能略有不同（但足以用于 z 战斗）。我建议在一个着色器/技术中使用两个通道。或者，如果您仍想使用两个着色器，则最好使用共享代码进行转换和其他相同的操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T03:55:26.440

我可以确定 D3D 运行时不会更改您通过顶点缓冲区传入的任何数据，我在渲染两层地形时做了和您一样的事情，没有 Z-fighting。但是确实有一些渲染状态会在将三角形光栅化为像素时改变它，它们是 D3D9 中的 D3DRS_DEPTHBIAS 和 D3DRS_SLOPESCALEDEPTHBIAS，或者 D3D10_RASTERIZER_DESC 结构中的相等值。如果这些渲染状态发生了变化，您应该检查它们。

您还需要确保在着色器中使用位置进行计算的所有变换矩阵或其他常数精确相等，否则将出现 z-fighting。

我建议你使用一些图形调试工具来检查它。如果您使用的是 NVIDIA 卡，则可以使用 PIX、PerfHUD 或 Nsight。

对不起，我的英语很差，一定很难理解。但我希望这可以帮助你，谢谢。

# php - 无法在php mysql中同时将相同的数据插入2个表中

> ID：12984840
> 
> 赞同：-1
> 
> 时间：2012-10-20T02:53:24.200
> 
> 标签：php, mysql, insert

我需要你的帮助来解决我的问题。首先我在 mysql dbase 中有 2 个表。这里是结构：

```
doctor1:
--------                         
no_que autoincrement pk,
doctor_name,
id_patient,
date,
time

status_que:
----------
id_patient,
doctor_name,
no_que fk,
date,
time 
```

我想将数据插入到 doctor1 中，status_que 中的数据将相同。

```
$idp=$_POST['id_patient'];
$dt=$_POST['date'];
$tm=$_POST['time'];
$dn=$_POST['doctor_name'];

$query = "INSERT INTO doctor1 (doctor_name, id_patient, date, time) 
            values ('$dn', '$idp', '$dt', '$tm')"; 

$result = @mysql_query($query) or die("REPORT Failed to save data.");

$last_insert_no_que = mysql_insert_id();

@query2 = "INSERT INTO status_queue (id_patient, doctor_name, no_que, date, time) 
            values ('$idp', '$dn', '$last_insert_no_que', '$dt', '$tm')"; 

$result = @mysql_query($query2) or die("REPORT Failed to save data."); 
```

但该代码不起作用

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-21T03:11:45.167

有用 ！我只需要删除“@”运算符.. :) ~ thx you

所以这是我的代码：

```
$idp=$_POST['id_patient'];
$dt=$_POST['date'];
$tm=$_POST['time'];
$dn=$_POST['doctor_name'];

$query = "INSERT INTO doctor1 (doctor_name, id_patient, date, time) 
            values ('$dn', '$idp', '$dt', '$tm')"; 

$result = mysql_query($query) or die(mysql_error());

$last_insert_no_que = mysql_insert_id();

$query2 = "INSERT INTO status_queue (id_patient, doctor_name, no_que, date, time) 
            values ('$idp', '$dn', '$last_insert_no_que', '$dt', '$tm')"; 

$result = mysql_query($query2) or die(mysql_error()); 
```

>

# php - PHP/MySQL 编码问题。â��而不是某些字符

> ID：12984841
> 
> 赞同：2
> 
> 时间：2012-10-20T02:53:32.903
> 
> 标签：php, mysql, utf-8, character-encoding, collation

使用 php 将某些字符输入到我的 mysql 数据库时，我遇到了一些问题。我正在做的是将用户输入的文本提交到数据库。我无法弄清楚我需要更改什么以允许将任何类型的字符放入数据库并通过 php 打印出来，因为它是假设的。

我的 MySQL 排序规则是：latin1_swedish_ci

就在我将文本从表单发送到数据库之前，我在数据上使用了 mysql_real_escape_string()。

下面的例子

本文：

```
â��People are just as happy as they make up their minds to be.â��
â�� Abraham Lincoln 
```

假设看起来像这样：

```
“People are just as happy as they make up their minds to be.”
― Abraham Lincoln 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-20T04:03:37.673

正如其他人所提到的，如果要支持“特殊”字符，则需要从头到尾转换为 UTF8。这意味着您的网页、PHP、mysql 连接和 mysql 表。网页相当简单，只需使用 UTF8 的元标记。理想情况下，您的标题也会说 UTF8。

```
<meta http-equiv="content-type" content="text/html; charset=utf-8" /> 
```

将您的 PHP 设置为使用 UTF8。无论如何，事情可能会奏效，但这样做是一个很好的措施：

```
mb_internal_encoding('UTF-8');
mb_http_output('UTF-8');
mb_http_input('UTF-8'); 
```

对于 mysql，您要将表转换为 UTF8，无需导出/导入。

```
ALTER TABLE table_name CONVERT TO CHARACTER SET utf8 
```

您可以并且应该将 mysql 配置为默认的 utf8。但您也可以运行查询：

```
 SET NAMES UTF8 
```

作为建立连接后的第一个查询，这会将您的数据库连接“转换”为 UTF8。

这应该可以解决你所有的字符显示问题。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-20T14:41:40.960

问题的最可能原因是数据库*连接*设置为，`latin1`但您正在输入以 UTF-8 编码的文本。解决这个问题的最简单方法是将您的输入转换为客户的期望：

```
$quote = iconv("UTF-8", "WINDOWS-1252//TRANSLIT", $quote); 
```

（MySQL`latin1`在世界其他地方调用的是 windows-1252。）请注意，许多字符，例如您在此处使用的引号 U+2015，无法以这种编码表示，并且将被转换为其他字符。理想情况下，您应该将列编码更改为`utf8`.

另一种解决方案：将数据库连接设置为`utf8`. 列的编码方式无关紧要：MySQL 在内部将文本从连接编码转换为存储编码，您可以根据需要保留列`latin1`。（如果这样做，引号 U+2015 将变成问号`?`，因为它不在 中`latin1`）

如何设置连接编码取决于您使用的库：如果您使用已弃用的 MySQL 库，它是 mysql_set_charset，如果是 MySQLi，它是 mysqli_set_charset，如果 PDO 添加`encoding=utf8`到 DSN。

如果您这样做，您将使用 Content-Type 标头将页面编码设置为 UTF-8。否则你会在浏览器上遇到同样的问题：当它期待其他东西时，给它输入 UTF-8 编码的文本：

```
header("Content-Type: text/html; charset=utf-8"); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-07-20T15:00:15.423

*如果*从头开始，所提供的解决方案会很有帮助。将所有可能的连接都放到 UTF-8 确实是最安全的。由于各种原因，UTF-8 是网络上最常用的字符集。

一些建议和警告：

*   **使用唯一前缀 (tmp_)复制**要清理的表
*   尽管您的 db-connection 被强制为 utf8，但请检查您的 General Settings 排序规则，如果尚未完成，请更改为**utf8_bin**
*   你需要在本地服务器上运行它
*   有趣的字符错误主要是由于混合了 LATIN1 和 UTF-8 配置。该解决方案就是为此而设计的。它可以与 LATIN1 的其他使用过的字符集一起使用，但我没有检查过这个
*   **在复制回原始文件之前广泛**检查这些 tmp_tables****

 **构建魔术所需的 2 数组：

```
$chars = get_html_translation_table(HTML_ENTITIES, ENT_QUOTES, "UTF-8");
$LATIN1 = $UTF8 = array();
while (list($key,$val) = each ($chars)) {
    $UTF8[] = $key;
    $LATIN1[] = $val;
} 
```

现在建立你需要的例程：(tables->)rows->fields 和在每个字段调用

```
$row[$field] = mysql_real_escape_string(str_replace($LATIN1 , $UTF8 , $row[$field]));
$q[] = "$field = '{$row[$field]}'"; 
```

最后建立并发送查询：

```
mysql_query("UPDATE $table SET " . implode(" , " , $q) . " WHERE id = '{$row['id']}' LIMIT 1"); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-20T02:58:23.540

将 MySQL 排序规则更改为 utf8_unicode_ci 或 utf8_general_ci，包括表和数据库。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-09-09T12:45:11.910

摆脱一切你只需要遵循这两点，所有关于特殊语言字符的问题都会得到解决。

1-您需要将表的排序规则定义为 utf8_general_ci。

2-`<meta http-equiv="content-type" content="text/html; charset=utf-8">`在 HTML 中定义在 head 标签之后。

2-您需要`mysql_set_charset('utf8',$link_identifier);`在与数据库建立连接的文件中定义，并在选择“mysql_select_db”等数据库后立即使用“mysql_set_charset”，这将允许您以任何语言正确添加和检索数据.

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-20T03:20:09.967

您需要将数据库设置为 utf-8 是的。有很多方法可以做到这一点。通过更改配置文件，通过 phpmyadmin 或在插入和更新 mysql 之前调用 php 函数（抱歉内存空白）。

不幸的是，我认为您将不得不重新输入您之前输入的任何数据。

根据个人经验，您还需要知道一件事，确保所有具有关系的表都具有相同的排序规则，否则您将无法加入它们。

作为参考：[http ://dev.mysql.com/doc/refman/5.6/en/charset-syntax.html](http://dev.mysql.com/doc/refman/5.6/en/charset-syntax.html)

另外，我可以是 apache 设置。我们在“免费托管”服务器和我兄弟的服务器上都遇到了同样的问题。一旦切换到另一台服务器，所有字符都变得整洁。验证你的 apache 设置，对不起，但我不能更清楚地了解 apache 的配置。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-03-16T16:58:53.477

如果您的文本已使用错误的编码进行编码和解码，因此 mojibake 实际上被“固化”为 unicode 字符，那么到目前为止提到的解决方案将不起作用。我最终成功地使用了`ftfy`Python 包来自动检测/修复 mojibake：

*   [https://github.com/LuminosoInsight/python-ftfy](https://github.com/LuminosoInsight/python-ftfy)
*   [https://pypi.org/project/ftfy/](https://pypi.org/project/ftfy/)
*   [https://ftfy.readthedocs.io/en/latest/](https://ftfy.readthedocs.io/en/latest/)

```
>>> import ftfy
>>> print(ftfy.fix_encoding("(à¸‡'âŒ£')à¸‡&quot;))
(ง'⌣')ง 
```

希望这对处于类似情况的人有所帮助。**

# algorithm - 在给定点数组的情况下找到最大矩形区域

> ID：12984850
> 
> 赞同：5
> 
> 时间：2012-10-20T02:56:14.433
> 
> 标签：algorithm

假设我有一个名为 Point 的对象数组。
点对象具有 x 和 y 值。

为了使它更困难，假设没有初始边界，这意味着我们想要找到的矩形区域由 Point 对象限定。因此，至少有 4 个 Point 对象。

所以如果数组只有 4 个 Point 对象：Point(0,0)、Point(100,0) Point(0,100) 和 Point(100,100)，我们要返回 100*100 的矩形区域。

这是容易的部分。但是考虑一下有超过 4 个 Point 对象的情况。你如何找到最大的矩形面积？

```
public int maxArea(Point[] points)
{
    int area;
    //do algo
    return area;
} 
```

编辑：仅通过查看 y 和 x 的最小值和最大值并不能保证，因为我正在寻找没有 Point 对象的矩形区域。所以在最大矩形区域内没有任何东西

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-20T19:50:47.907

让我首先阐述这个问题，因为我认为它的意思是：

*   要找到的矩形具有水平（常数 y）和垂直（常数 x）边界，即没有“旋转”。

*   矩形在其每条边的“内部”（“开放”）部分上至少有一个点，即不在拐角处。（它的任何边上可能有多个点，并且 ALSO 点在它的角上。）这排除了“无限”解决方案，因为所有点都有有限的 x,y。它还排除了我们可能打算仅通过 TopLeft 和 BottomRight 点以及类似结构来定义矩形的情况。

*   我们在满足上述条件的所有矩形中寻找面积最大的矩形。

假设上述是问题的正确（重新）表述，我相信它是一个二维优化问题，可能有许多“局部”最优值。任何“从某事开始并逐渐改进”类型的方法都只会找到局部最优值，而不一定是全局最优值。

我无法想出比 O(N^2) 方法更好的方法，包括 - 粗略地说 - N 次局部优化，其中每个局部优化都是 O(N)。我将使用一些代码片段（部分是伪代码或备注）来勾勒该方法，以用于本地优化的基本部分。其余部分“基本相同”，填写起来应该不难。

为了减少措辞而不会变得不准确，从今以后，我将指的是“（矩形的）边缘上的一个点”，一个位于边缘“内部”部分的点，而不是角落。同样，“矩形”是指一个“合格的”反应角，即满足基本条件的反应角：内部没有点，每个边缘上至少有一个点。

现在，LOCAL 优化由点集中的特定点“定义”，结合来自 {Left, Top, Right, Bottom} 的特定“边界类型”。假设我们选择了一个点 L 和边框类型“Left”；局部最优解定义为左边缘有 L 的“最佳”（最大面积）矩形。

我们将构建所​​有 (L,Left)-矩形并跟踪我们在途中找到的最大的一个。

观察：任何在右边界上具有点 R 的 (L,Left) 矩形，其上边界上必须有一个点 T，其下边界上必须有一个点 B，其中

```
L.x < T.x < R.x
L.x < B.X < R.X
B.y < L.y < T.y
B.y < R.y < T.Y 
```

现在想象一下，我们以 x 顺序扫描点，从 L 开始。

一方面：在我们找到 R 之前，上述条件表明我们必须首先遇到 T 和 B。

另一方面，一旦我们从中间遇到的所有 y > Ly 的点中找到 R，我们现在将被具有最低 y 的点所包围。同样适用于底部边框。

N 为点数 {P}，令 index_X[] 为 x 排序点的索引数组，使得 P[index_X[i]]x <= P[index_X[j]].x 每当 i 为小于 j。

此外，令 iL 为 L 在 x 排序数组中的索引：P[index_X[iL]] = L。

在下面的代码片段中（VB 语法；翻译成任何语言都不会太难），我们首先确定“some”T（顶部边缘点）和“some”B（底部边缘点）边缘点）。然后，我们继续扫描，每当我们找到一个完成矩形的点 R，我们： (a) 计算面积以更新最优值，如果它更大；(b) 用找到的 R 替换 T 或 B（取决于 R 是高于 L 还是低于 L），然后重复搜索 R。

```
 Dim indx As Integer = iL + 1 'first point to consider on the right of L
    Dim T As PointF = Nothing
    Dim B As PointF = Nothing
    ' find T,B
    While (indx < N AndAlso (T = Nothing OrElse B = Nothing))

      Dim Q As PointF = Pts(indx_X(indx))

      If (Q.Y > L.Y) Then
        ' a candidate for T
        If (T = Nothing) OrElse (Q.Y < T.Y) Then
          T = Q
        End If

      ElseIf (Q.Y < L.Y) Then
        ' a candidate for B
        If (B = Nothing) OrElse (Q.Y > B.Y) Then
          B = Q
        End If

      Else
        Return -1 'Failure for L altogether: Q has exactly the same y-value as L and we didn't find yet both T and B.
      End If

      indx += 1
    End While

    If (T = Nothing OrElse B = Nothing) Then
      Return -1  'Failure for L: we have exhausted all points on the right without finding both T and B.
    End If

    ' we have "some" T and B, now proceed to find all (L,Left) rectangles
    ' intialize result (= max area from (L,Left)-rectangles).
    Dim result As Double = -1
    ' the next point to consider
    indx += 1
    ' find successive rectangles, by searching for R, given L (fixed) and T,B (occasionally updated). 
    While (indx < N)

      Dim R As PointF = Pts(indx_X(indx)) 'candidate

      If (R.Y = L.Y) Then
        ' rectangle found, process it.
        Dim area As Double = (R.X - L.X) * (T.Y - B.Y)
        If area > result Then
          result = area
        End If
        ' it all stops here: no further rectangles {L,Left) are possible as they would have this R inside.
        Exit While
      End If

      If (R.Y > L.Y) Then
        ' a point with y > L.Y:
        ' if it is above T we can ignore it.
        ' if is below T, it is the R-bound for the rectangle bounded by L,T,B
        If (R.Y < T.Y) Then
          ' process the rectangle
          Dim area As Double = (R.X - L.X) * (T.Y - B.Y)
          If area > result Then
            result = area
          End If
          ' move on, understanding that for any NEXT rectangle this R must be the upperbound.
          T = R
        End If

      Else 'R.Y < L.Y
        ' a point with y < L.Y
        ' if it is below B we can ignore it.
        ' if it is above B, it is the R-bound for the rectangle bounded by L,T,B
        If (R.Y > B.Y) Then
          ' process the rectangle
          Dim area As Double = (R.X - L.X) * (T.Y - B.Y)
          If area > result Then
            result = area
          End If
          ' move on, understanding that for any NEXT rectangle this R must be the lowerbound.
          B = R
        End If

      End If

      indx += 1
    End While

    Return result 
```

整体的解决方案当然是：对每个点P，在opt(P,Left), opt(P,Right), opt(P,Top), opt(P,Bottom)中找到最优的，然后求最大值在所有 P 中。Right、Top、Bottom 的变体当然与我上面勾勒的 opt(Left) 非常相似。预排序（获取 x 顺序和 y 顺序的索引（用于处理 (P,Top) 和 (P,Bottom) 情况）是 O(nLogn)，局部优化是 O(n) - 查看代码，所以总体复杂度为 O(n^2)。

补充说明 - 因为最初的公式对我来说不是很清楚：如果矩形也可以由 CORNER 点限定，那么上面需要一些小的调整（主要是在不等式条件中添加等号），但它不会改变本质上是算法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-20T16:14:43.280

我可以做到这一点`O(N^2*Log(N))`。

首先将所有点放在一个集合中，这样我们就可以检查一个点是否存在于`O(Log(N))`.

枚举对角线上的2个点，`O(N^2)`然后确定矩形，检查其他2个点是否存在，然后你知道你是否可以得到它，如果你这样做，更新答案。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-20T04:51:55.497

你真的不需要四分。
找到形成矩形的 topLeft 和 bottomRight 点。
循环遍历数组并跟踪/更新这两个点。
一旦退出循环，只需返回 (topLeft.x - bottomRight-x)*(topLeft.y - bottomRight-y);

你去吧

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-20T04:37:49.803

最简单的方法是在 while 循环中计算所有可能的区域，并在最后获取最大的区域。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-08-04T03:51:21.210

```
def max_area_rectangle(points):
    seen_points = set()
    max_area = float('-inf')
    for x1, y1 in points:
        for x2, y2 in seen_points:
            if (x1, y2) in seen_points and (x2, y1) in seen_points:
                area = abs(x1 - x2) * abs(y1 - y2)
                if area > 0 and area > max_area:
                    max_area = area
        seen_points.add((x1, y1))
    #return area if it was possible to compute otherwise None
    return max_area if max_area > float('-inf') else None 
```

# c++ - 使用 mciSendString (MCIERR_CANNOT_LOAD_DRIVER) 播放 mp3 文件

> ID：12984851
> 
> 赞同：3
> 
> 时间：2012-10-20T02:56:15.220
> 
> 标签：c++, audio, mp3, mcisendstring

我正在尝试编写一些可以播放 .mp3 文件的代码。我以为我可以使用 mciSendString 调用，但我遇到了一个奇怪的错误。

所以，当我有这个代码时：

```
int rc=mciSendString(L"open songname.mp3 alias song1", NULL, 0, 0); 
```

`rc`返回数字 266，返回的错误字符串`GetErrorString`为：

> “加载指定设备驱动程序时出现未知问题。”
> 
> 错误 266 是 MCIERR_CANNOT_LOAD_DRIVER

我也试过：

```
int rc=mciSendString(L"open songname.mp3 type mpegvideo alias song1", NULL, 0, 0); 
```

并收到同样的错误。

我认为它可能是 mp3 文件，但我尝试了几个不同的文件并不断收到相同的错误。

我的代码是 C++ 并在 Windows 7 上运行。我的代码是否缺少某些内容？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T00:52:27.767

看起来我没有用于 MCI 的 mp3 编解码器。（实际上由@LightnessRacesinOrbit 在对问题的评论中回答。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-20T03:25:29.340

尝试`songname.mp3`用一对额外的引号括起来（确保用反斜杠转义它们）。

# c# - 为什么 MSChart 不能填充整个图表区域？

> ID：12984852
> 
> 赞同：2
> 
> 时间：2012-10-20T02:56:40.873
> 
> 标签：c#, winforms, charts, mschart

我正在创建几个图表，但我无法弄清楚为什么图表的左侧和右侧有这么多空白空间。我有一个 Winforms 图表、ChartArea 和 Series，并且图表的左侧和右侧总是有一英寸好，看起来像是浪费了空间。我需要更改什么设置来减小这个空白空间的大小？我在这篇文章中包含了带有空白区域的图表的屏幕截图以及我用来创建它的代码。提前致谢。

![在此处输入图像描述](../Images/7c14fe3da3ae680371400a7e790daf7f.png)

```
 if (listBoxCharts.SelectedItems.Count == 1)
        {
            switch (listBoxCharts.SelectedItem.ToString().Trim())
            {
                case "Incomplete Work Orders By Status":
                    ChartArea chartArea = new ChartArea();
                    Series series = new Series();
                    Title title = new Title();

                    chartArea.Area3DStyle.Enable3D = true;
                    chartArea.Area3DStyle.LightStyle = LightStyle.Realistic;
                    chartArea.Area3DStyle.Rotation = 10;
                    chartArea.Area3DStyle.WallWidth = 3;
                    chartArea.BorderColor = Color.Transparent;
                    chartArea.Name = "IncompleteWorkOrdersByStatus_ChartArea";

                    // Fix this hack
                    ChartContainer.ChartAreas.Clear();
                    this.ChartContainer.ChartAreas.Add(chartArea);
                    this.ChartContainer.Dock = DockStyle.Fill;
                    this.ChartContainer.Location = new Point(2, 21);
                    this.ChartContainer.Name = "Charts";
                    this.ChartContainer.PaletteCustomColors = new Color[] { Color.LemonChiffon };

                    series.ChartArea = "IncompleteWorkOrdersByStatus_ChartArea";
                    series.ChartType = SeriesChartType.StackedColumn;
                    series.CustomProperties = "DrawingStyle=Cylinder";
                    series.EmptyPointStyle.BorderDashStyle = ChartDashStyle.NotSet;
                    series.IsXValueIndexed = true;
                    series.Name = "IncompleteWorkOrdersByStatus_Series";

                    List<WorkOrder> incompleteWorkOrders = woDao.getIncompleteWorkOrders();

                    var uniqueStatuses = (
                        from statuses in incompleteWorkOrders
                        select statuses.fkOrderStatus).Distinct().ToList();

                    int xVal = 1;
                    foreach (var status in uniqueStatuses)
                    {
                        var count = (
                            from wo in incompleteWorkOrders
                            where wo.fkOrderStatus == status
                            select wo).Count();

                        DataPoint dPoint = new DataPoint(xVal, count);
                        if (status == null)
                        {
                            dPoint.AxisLabel = "No Status";
                        }
                        else
                        {
                            dPoint.AxisLabel = status.codedesc;
                        }

                        dPoint.ToolTip = count + " " + dPoint.AxisLabel;

                        series.Points.Add(dPoint);

                        xVal++;
                    }

                    this.ChartContainer.Series.Clear();
                    this.ChartContainer.Series.Add(series);

                    title.DockedToChartArea = "IncompleteWorkOrdersByStatus_ChartArea";
                    title.IsDockedInsideChartArea = false;
                    title.Name = "IncompleteWorkOrdersByStatus_Title";
                    title.Text = "Incomplete Work Orders By Status";

                    this.ChartContainer.Titles.Clear();
                    this.ChartContainer.Titles.Add(title);
                    break;

                default:
                    break;
            }
        } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-20T04:17:56.590

尝试使用 InnerPlotPosition 设置：

```
chart1.ChartAreas[0].InnerPlotPosition.X = 0; 
```

# java - 输入负值后需要再次提示

> ID：12984853
> 
> 赞同：0
> 
> 时间：2012-10-20T02:56:42.300
> 
> 标签：java, validation, java.util.scanner

我正在尝试构建一个新代码，现在问题是用户输入负值后，这将打印一些内容并再次提示输入值。我应该在第 69 行之后添加什么？

这是我的代码：

```
import java.util.Scanner;

public class bchimedochir_Math
{

    public static void main(String args[])
    {
        Scanner input = new Scanner(System.in);

        double userInput;
        double value;
        double pow;
        double sqrt;
        double log;
        double floor;
        double ceil;
        double abs;
        double sqrtE;

        System.out.print("How many numbers would you like to process:");
        userInput = input.nextDouble();  
        sqrtE = Math.sqrt(Math.E);  

        if (userInput > 0)
        {
            while (true)
            {        
            System.out.println();
            System.out.print("Please enter a number: ");
            value = input.nextDouble(); 
            sqrt = Math.sqrt(value);
            log = Math.log(value);
            ceil = Math.ceil(value);
            floor = Math.floor(value);
            pow = Math.pow(value, value);
            abs = Math.abs(value);

                System.out.println ("Using truncated integer value for exponent of power method.");
                System.out.printf("Math.pow(%.4f,%.4f)=%.4f\n", ceil, ceil, pow);
                if (value < 0 )
                {
                System.out.println ("Cannot use negative number for square root, using absolute value instead.");
                System.out.printf("Math.sqrt(%4f)=%.4f\n", abs, sqrt);
                }
                else 
                {
                System.out.printf("Math.sqrt(%4f)=%.4f\n", value, sqrt);
                }
                if (value < 0 )
                {
                System.out.println ("Cannot use negative number for log method, using absolute value instead.");
                System.out.printf("Math.log(%.4f)=%.4f\n", abs, log);
                }
                else 
                {
                System.out.printf("Math.log(%.4f)=%.4f\n", value, log);
                }
                System.out.printf("Math.floor(%.4f)=%.4f\n", value, floor);
                System.out.printf("Math.ceil(%.4f)=%.4f\n", value, ceil);
                System.out.printf("Math.abs(%.4f)=%.4f\n", value, abs);
                userInput = userInput - 1;
            }
            System.out.printf("\n\nThe square root of e is: \nMath.e = %.4f \n", sqrtE);
        }

        if (userInput < 0)
        {
            System.out.print("You must enter a number greater than or equal to 0.\n");          
        }
        if (userInput == 0)
        {
            System.out.print("No numbers to process.\n");   
            System.out.printf("\n\nThe square root of e is: \nMath.e = %.4f \n", sqrtE);            
        }

    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-20T03:00:30.093

使用带有 if() 中给出的条件的 while 循环。

此外，“您要处理多少个数字：”的答案将是一个整数值，不能是双精度数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-20T03:00:45.183

我认为您正在努力实现这一目标：

```
 while(userInput <0){
       System.out.print("You must enter a number greater than or equal to 0.\n"); 
       userInput = input.nextInt();
     } 
```

如果要限制尝试：

```
 int MAX_ATTEMPTS = 10;
  int attempts = 0;
  while(userInput <0 && attempts < MAX_ATTEMPTS ){
   System.out.println("You must enter a number greater than or equal to 0.\n"); 
   userInput = input.nextInt();
   attempts++;
  }

  if(userInput <0 ){
     System.out.println("You didn't enter correct value in "+
                                                       MAX_ATTEMPTS +" attempts");
  } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-20T03:06:48.810

只需创建一个读取正值的方法。

```
public int readPositiveInt() {
   int userInput = input.nextInt();
   if(userInput<0) {
       System.out.println("You must enter a number greater than or equal to 0.");
       return readPositiveInt();
   }
   return userInput;
} 
```

# c# - C# 在文本框上使用 KeyPress 事件时，为什么我不能输入减号？

> ID：12984856
> 
> 赞同：0
> 
> 时间：2012-10-20T02:57:07.260
> 
> 标签：c#, winforms, textbox

我使用VS2010，我有一个文本框......我在盒子上分配了一个KeyPress，abd设置方法如下：

```
private void MyButton_KeyPress(object sender, KeyPressEventArgs e)
    {
        e.Handled = true;
    } 
```

我注意到我不再能够在文本框中输入任何特殊键，例如减号 (-) 和加号 (+)。有人可以向我解释为什么我不再能够做到这一点，以及我能做些什么来解决这个问题？

最终我试图只允许输入数字键，我也想允许（-）减号，但如果我不能在那里得到减号，那么我想我将无法限制文本盒子

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-20T03:43:47.797

这应该为您完成工作。

```
private void MyButton_KeyPress(object sender, KeyPressEventArgs e)
{
    if (e.KeyChar >= '0' && e.KeyChar <= '9') return;
    if (e.KeyChar == '+' || e.KeyChar == '-') return;
    e.Handled = true;
} 
```

下面是它的工作原理。如果键入的字符是您想要的字符，只需从函数返回并让普通处理程序处理它。所有其他字符都被标记为已处理，因此对它们的处理将停止。由于没有对它们进行任何处理，因此它们基本上被丢弃了。您可以将所有内容放在一个 if 语句中，但为了清楚起见，我将其保留为这种方式

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-20T03:22:06.083

我稍微更改了您的代码并添加了仅接受 1、2 或 + 的逻辑，这是您的问题字符之一。希望这对你有帮助！

```
 private void MyButton_KeyPress(object sender, KeyPressEventArgs e)
    {
        e.Handled = true;
        if (e.KeyChar == '1' || e.KeyChar == '2' || e.KeyChar == '+') textBox1.AppendText(e.KeyChar.ToString());
    } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-20T03:37:17.390

实际上，您应该这样做：

```
 private void MyButton_KeyPress(object sender, KeyPressEventArgs e)
    {
        if (e.KeyChar == '1' || e.KeyChar == '2' || e.KeyChar == '+')
             e.Handled = false;
        else
             e.Handled = true;
    } 
```

当然，您需要用返回是否允许密钥的方法来替换单个测试。

干杯

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-20T03:46:57.077

就像现在一样，您的代码不允许输入任何内容。e.Handled 语句取消击键。下面的代码将允许任何数字字符和减号。如果您只想将减号放在文本框中的第一个位置，则必须在允许该字符之前测试 TextLength 属性。

```
private void MyButton_KeyPress(object sender, KeyPressEventArgs e
{
    int i = 0;
    if (!int.TryParse(e.KeyChar.ToString(), out i))
    {
        if (e.KeyChar.CompareTo('-')!=0)
        {
            e.Handled = true;
        }
    }
} 
```

# c++ - 分段错误 11 链表

> ID：12984860
> 
> 赞同：2
> 
> 时间：2012-10-20T02:58:13.097
> 
> 标签：c++, segmentation-fault, singly-linked-list, josephus

我的班级正在通过实现一个循环单链表来模拟约瑟夫斯问题。我的代码可以编译，但是当它运行时出现分段错误：构建列表后的 11 。到目前为止，我的调试使我意识到错误发生在程序进入主函数的最后一个while循环时。我认为这与我使用 first->next 的方式有关，但我不确定。任何帮助都会很棒，谢谢。如果这不明显，我正在用 C++ 编码。

```
#include <iostream>
#include <string>
using namespace std;

/*
 * Node structure used by the linked list.
 */
struct Node {
    // The name stored in this node.
    string name;

    // A pointer to the next node in the list.
    Node * next;
};

/* 
 * Build the linked list
 */

class LinkedList {
    private:
        //pointer to the head of the list
        Node *head;

    public:
        // constructor for LinkedList
        LinkedList(){
            head = NULL;
        }

        /*
        * Add the given value to the list, making it the head.
        */
        void insert(string name){

            // Remember where old head was
            Node *oldHead = head;

            // allocate a new node in memory
            head = new Node;

            // set new node's fields
            head->name = name;
            head->next = oldHead;
        }

        /*
        * Remove the item on the top of the stack, returning nothing.
        */
        void remove() {
            // Remember what the new head will be
            Node* newSecond = head->next->next;

            // Deallocate the head from memory
            delete head->next;
            // Set the head to the new head
            head->next = newSecond;
        }
        /*
         * Shifts the head forward one node.
         */
        void cycle(){

            head = head->next;
        }

        Node* getHead(){
            return head;
        }

         // This is the opposite of a constructor - a destructor! You (almost)
        // never need these in Java, but in C++ they are essential because 
        // you have to clean up memory by yourself. In particular, we need to
        // empty out the stack.
        ~LinkedList() {
            // While there's a head node still left, remove the head node.
            while (head != NULL) {
                remove();
            }
        }
};

int main(){
    //create the circular linked list
    LinkedList circle;

    int people;
    cin >> people;
    string soldier;
    Node* first = circle.getHead();

    //Insert all the names
    for(int i = 0; i < people; i++){
        cin >> soldier;
        circle.insert(soldier);
    }

    //begin the killing
    while(first->next != NULL){
        circle.cycle();
        cout << " killed " << endl;
        Node* temp = first->next->next;
        circle.remove();
        first->next = temp;
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-20T03:07:43.007

该代码中有几个问题。首先是这样的：

```
Node* newSecond = head->next->next; 
```

如果`head->next`为 NULL，那么您将获得 NULL 指针取消引用。这会导致崩溃。

但是，此特定崩溃的实际原因是：

```
while(first->next != NULL) 
```

是一个 NULL 指针取消引用。一开始`main()`你有：

```
Node* first = circle.getHead(); 
```

`circle`那时是空的，所以`first`被赋值为 NULL。并且它保持 NULL 直到您在`while`语句中取消引用它。因此，您会崩溃。

# c++ - 不理解“假设签名溢出”警告

> ID：12984861
> 
> 赞同：24
> 
> 时间：2012-10-20T02:58:15.397
> 
> 标签：c++, gcc, gcc-warning

我正进入（状态：

> 警告：假设 (X + c) < X 始终为假 [-Wstrict-overflow] 时，不会发生有符号溢出

在这条线上：

```
if ( this->m_PositionIndex[in] < this->m_EndIndex[in] ) 
```

`m_PositionIndex`和`m_EndIndex`类型`itk::Index`（[http://www.itk.org/Doxygen/html/classitk_1_1Index.html](http://www.itk.org/Doxygen/html/classitk_1_1Index.html)），它们`operator[]`返回一个`signed long`.

（这里是第 37 行：[https](https://github.com/Kitware/ITK/blob/master/Modules/Core/Common/include/itkImageRegionConstIteratorWithIndex.hxx) ://github.com/Kitware/ITK/blob/master/Modules/Core/Common/include/itkImageRegionConstIteratorWithIndex.hxx用于上下文）

谁能在这里解释什么会导致该警告？我在任何地方都看不到这种模式`(x+c) < x`——因为这只是一个`signed long`比较。

我试图在一个独立的例子中重现它：

```
#include <iostream>

namespace itk
{
  struct Index
  {
    signed long data[2];

    Index()
    {
      data[0] = 0;
      data[1] = 0;
    }

    signed long& operator[](unsigned int i)
    {
      return data[i];
    }
  };
}
int main (int argc, char *argv[])
{
  itk::Index positionIndex;
  itk::Index endIndex;

  for(unsigned int i = 0; i < 2; i++)
  {
    positionIndex[i]++;
    if ( positionIndex[i] < endIndex[i] )
    {
      std::cout << "something" << std::endl;
    }
  }

  return 0;
} 
```

但我没有得到警告。关于我的演示和真实代码之间有什么不同的想法，或者是什么可能导致真实代码中的警告？我收到带有 -Wall 标志的 gcc 4.7.0 和 4.7.2 的警告。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-06-20T04:20:12.157

**要简单地禁用此警告，请使用`-Wno-strict-overflow`.** 要改为禁用触发此警告的特定优化，请使用`-fno-strict-overflow`或`-fwrapv`。

[gcc 手册页](http://linux.die.net/man/1/gcc)描述了可以使用级别控制此警告：`-Wstrict-overflow=n`。

如果这是由于 导致您的构建停止`-Werror`，您可以在不隐藏警告的情况下通过使用`-Wno-error=strict-overflow`（或只是`-Wno-error`覆盖`-Werror`）来解决问题。

* * *

分析和评论...

我收到了同样的警告，并花了几个小时试图在一个较小的示例中重现它，但从未成功。我的真实代码涉及在模板类中调用内联函数，但算法简化为以下...

```
int X = some_unpredictable_value_well_within_the_range_of_int();
for ( int c=0; c<4; c++ ) assert( X+c >= X ); ## true unless (X+c) overflows 
```

在我的情况下，警告在某种程度上与展开`for`循环的优化器相关，因此我能够通过声明`volatile int c=0`. 修复它的另一件事是声明`unsigned int c=0`，但我不确定为什么会有所作为。修复它的另一件事是使循环计数足够大以至于循环不会被展开，但这不是一个有用的解决方案。

那么这个警告到底在说什么？要么是说优化器修改了你的算法的语义（假设没有溢出），要么只是告诉你**优化器假设你的代码没有溢出有符号整数的*未定义行为***。除非溢出有符号整数是您程序预期行为的一部分，否则此消息可能并不表示您的代码存在问题——因此您可能希望在正常构建时禁用它。如果您收到此警告但不确定有问题的代码，则使用 禁用优化可能是最安全的`-fwrapv`。

顺便说一句，我在 GCC 4.7 上遇到了这个问题，但是使用 4.8 编译的相同代码没有警告——也许表明 GCC 开发人员认识到在正常情况下需要不那么“严格”（或者可能是只是由于优化器的差异）。

* * *

哲学...

在 [C++11: [N3242](http://www.open-std.org/JTC1/SC22/WG21/docs/papers/2011/n3242.pdf) $5.0.4] 中，它声明...

> 如果在计算表达式期间，结果未在数学上定义或不在其类型的可表示值范围内，则行为未定义。

这意味着符合标准的编译器可以简单地假设不会发生溢出（即使对于无符号类型）。

在 C++ 中，由于模板和复制构造函数等特性，[省略](https://en.wikipedia.org/wiki/Elision_%28disambiguation%29)无意义的操作是重要的优化器能力。但是，有时，如果您将 C++ 用作低级“系统语言”，您可能只是希望编译器按照您的要求执行 - 并依赖于底层硬件的行为。鉴于标准的语言，我不确定如何以独立于编译器的方式实现这一点。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-08-09T20:34:45.047

编译器告诉您，它对该片段有足够的静态知识，可以知道如果假设没有签名操作会溢出，它可以优化测试，那么测试将始终成功。

换句话说，唯一在有符号`x + 1 < x`时返回真的`x`方法是如果`x`已经是最大有符号值。`[-Wstrict-overflow]`让编译器在可以假设没有带符号的加法溢出时发出警告；它基本上是在告诉您它将优化测试，因为有符号溢出是未定义的行为。

如果要抑制警告，请摆脱测试。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2019-01-14T16:45:09.207

尽管您的问题已经很老了，但由于您尚未更改代码的那部分，我认为问题仍然存在，并且您仍然没有得到关于这里实际发生的事情的有用解释，所以让我尝试一下：

在 C（和 C++）中，如果添加两个有符号整数导致溢出，则整个程序运行的行为是未定义的。因此，执行您的程序的环境可以为所欲为（格式化您的硬盘或开始一场核战争，假设存在必要的硬件）。

gcc 通常两者都不做，但它会做其他令人讨厌的事情（在不幸的情况下仍可能导致其中任何一个）。为了证明这一点，让我给你一个来自 Felix von Leitner @ [http://ptrace.fefe.de/int.c](http://ptrace.fefe.de/int.c)的简单例子：

```
#include <assert.h>
#include <stdio.h>

int foo(int a) {
  assert(a+100 > a);
  printf("%d %d\n",a+100,a);
  return a;
}

int main() {
  foo(100);
  foo(0x7fffffff);
} 
```

> 注意：我添加了 stdio.h，以消除有关未声明 printf 的警告。

现在，如果我们运行它，我们希望代码在第二次调用 foo 时断言，因为它会创建一个整数溢出并检查它。所以，让我们这样做：

```
$ gcc -O3 int.c -o int && ./int
200 100
-2147483549 2147483647 
```

怎么回事？（WTF，德语为“Was täte Fefe”-“Fefe 会做什么”，Fefe 是 Felix von Leitner 的昵称，我借用了代码示例）。哦，顺便说一句，是 täte Fefe 吗？正确：在 2007 年就这个问题写一个错误报告！[https://gcc.gnu.org/bugzilla/show_bug.cgi?id=30475](https://gcc.gnu.org/bugzilla/show_bug.cgi?id=30475)

回到你的问题。如果您现在尝试深入挖掘，您可以创建一个程序集输出 (-S) 并进行调查以发现`assert`已完全删除

```
$ gcc -S -O3 int.c -o int.s && cat int.s
[...]
foo:
        pushq   %rbx             // save "callee-save" register %rbx
        leal    100(%rdi), %edx  // calc a+100 -> %rdx for printf
        leaq    .LC0(%rip), %rsi // "%d %d\n" for printf
        movl    %edi, %ebx       // save `a` to %rbx
        movl    %edi, %ecx       // move `a` to %rcx for printf
        xorl    %eax, %eax       // more prep for printf
        movl    $1, %edi         // and even more prep
        call    __printf_chk@PLT // printf call
        movl    %ebx, %eax       // restore `a` to %rax as return value
        popq    %rbx             // recover "callee-save" %rbx
        ret                      // and return 
```

在任何地方都没有断言。

现在，让我们在编译期间打开警告。

```
$ gcc -Wall -O3 int.c -o int.s
int.c: In function 'foo':
int.c:5:2: warning: assuming signed overflow does not occur when assuming that (X + c) >= X is always true [-Wstrict-overflow]
  assert(a+100 > a);
  ^~~~~~ 
```

所以，这条消息实际上说的是：`a + 100`可能会溢出导致未定义的行为。因为你是一个技术娴熟的专业软件开发人员，从不做错任何事，我（gcc）肯定*知道*，这`a + 100`不会溢出。因为我知道，我也知道，这`a + 100 > a`总是正确的。因为我知道，我知道断言永远不会触发。因为我知道，我可以在“死代码消除”优化中消除整个断言。

这正是 gcc 在这里所做的（并警告您）。

现在，在您的小示例中，数据流分析可以确定该整数*实际上*没有溢出。所以，gcc 不需要*假设*它永远不会溢出，相反，gcc 可以*证明*它永远不会溢出。在这种情况下，删除代码是绝对可以的（编译器仍然可以在这里警告删除死代码，但是 dce 经常发生，可能没有人想要这些警告）。但是在你的“真实世界代码”中，数据流分析失败了，因为并非所有必要的信息都存在。所以，gcc 不知道是否`a++`溢出。所以它警告你，它*假设*永远不会发生（然后 gcc 删除整个 if 语句）。

解决（或隐藏！！！）这里问题的一种方法是`a < INT_MAX`在执行`a++`. 无论如何，我担心你可能有一些真正的错误，但我必须进行更多调查才能弄清楚。但是，您可以自己弄清楚，以正确的方式创建您的 MVCE：获取带有警告的源代码，从包含文件中添加任何必要的内容以获取独立的源代码（`gcc -E`有点极端，但可以完成工作)，然后开始删除任何不会使警告消失的内容，直到您有一个无法再删除任何内容的代码。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-08-09T19:43:22.903

就我而言，这是来自编译器的一个很好的警告。我有一个愚蠢的复制/粘贴错误，我在循环中有一个循环，每个循环都是相同的一组条件。像这样的东西：

```
for (index = 0; index < someLoopLimit; index++)
{
    // blah, blah, blah.....
    for (index = 0; index < someLoopLimit; index++)
    {
        //  More blah, blah, blah....
    }
} 
```

这个警告为我节省了调试时间。谢谢，海湾合作委员会！！！

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-20T03:03:17.037

我认为编译器改变了

```
positionIndex[i]++;
if ( positionIndex[i] < endIndex[i] ) 
```

变成更优化的东西，比如

```
if ( positionIndex[i]++ < endIndex[i] )   <-- see my comment below, this statement is wrong. 
```

所以

```
if ( positionIndex[i] + 1 < endIndex[i] ) 
```

在溢出的情况下会导致未定义的行为（感谢 Seth）。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-06-21T22:19:15.603

这几乎可以肯定是一个错误，尽管我不知道它是三个可能的错误中的哪一个。

我相信，gcc 正在以某种方式弄清楚 'this->m_PositionIndex[in]' 等中的值是从什么计算得出的，即两个值都来自相同的值，一个带有偏移量的值也可以证明是正的. 因此，它表明 if/else 构造的一个分支是无法访问的代码。

这是不好的。确实。为什么？嗯，正好有三种可能：

1.  gcc 是正确的，因为代码无法访问，而您忽略了这种情况。在这种情况下，您只是拥有臃肿的代码。三种可能性中最好的，但在代码质量方面仍然很差。

2.  gcc 是正确的，因为代码无法访问，但您希望它可以访问。在这种情况下，您需要再次查看它无法访问的原因并修复您的逻辑中的错误。

3.  gcc 是错误的，您偶然发现了其中的错误。不太可能，但有可能，不幸的是很难证明。

真正糟糕的是，您绝对需要找出代码无法访问的确切原因，或者您需要证明 gcc 是正确的（说起来容易做起来难）。根据墨菲定律，假设情况 1\. 或 3\. 没有证明它会确保它是情况 2.，并且您将不得不再次寻找错误...

# mysql - 在日期时间mysql中转换一年中的浮点数

> ID：12984862
> 
> 赞同：8
> 
> 时间：2012-10-20T02:58:20.700
> 
> 标签：mysql, sql, date, time

我在 MySQL DB 中有下表：

```
year | day_of_year
2012 | 283.813090 
```

如何转换这些字段`DateTime`？

我试过了：

```
SELECT MAKEDATE(year, day_of_year) from tableName;
```

它返回`Date`（`yyyy-mm-dd`）...我怎样才能得到`Time`（hh：mm：ss）？

谁能帮我解决这个问题？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-20T04:49:18.357

通过使用 MySQL 的[`SEC_TO_TIME()`](http://dev.mysql.com/doc/refman/5.1/en/date-and-time-functions.html#function_sec-to-time)函数（和一点数学），您将能够获得您的时间戳。

所涉及的数学运算是将您的`day_of_year`列乘以一天中的秒数 86400，然后对 86400 进行模运算，得到等式`((day_of_year * 86400) % 86400)`：

```
SELECT SEC_TO_TIME((day_of_year * 86400) % 86400) AS time; 
```

如果我用 value 运行`283.813090`它，它会给我正确的时间*：

```
mysql> SELECT SEC_TO_TIME((283.813090 * 86400) % 86400) AS time;
+----------+
| time     |
+----------+
| 19:30:51 |
+----------+ 
```

要将其与实际日期结合起来，您可以在两个单独的列中选择它们或使用`CONCAT()`来获取真正的“时间戳”：

```
SELECT
    CONCAT(MAKEDATE(year, day_of_year), ' ', SEC_TO_TIME((day_of_year * 86400) % 86400)) AS timestamp
FROM tableName; 
```

* 时间计算背后的数学相当简单。对于`283.813090`，这表示有 283 天。为了计算*时间*，我们使用小数部分并乘以 24（小时数）。`.813090 * 24 = 19.51416`. 这说有19个小时；为了计算分钟，我们取它的小数部分并乘以 60\. `.51416 * 60 = 30.8496`，即 30 分钟。对于秒数，再次取小数部分并乘以 60: `.8496 * 60 = 50.976`。因此，我们总共有 19 小时 30 分 50 秒（0.976 毫秒，四舍五入）- 19:30:51 或晚上 7:30。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-20T04:48:56.963

这是我提出的查询：

```
SELECT TIMESTAMP(
                 MAKEDATE(year, day_of_year),
                 SEC_TO_TIME((1 - (round(day_of_year) - day_of_year)) * 24 * 60 * 60))
FROM tableName; 
```

**这是什么？**

`1 - (round(day_of_year) - day_of_year)`=> 获得小数部分 (.813090)

`24 * 60 * 60`=> 1 天内的总秒数 = 24 小时 * 60 分钟 * 60 秒

**测试**

您可以在此处使用 SQL Fiddle 处理查询：[http ://sqlfiddle.com/#!2/f62619/21](http://sqlfiddle.com/#!2/f62619/21)

**结果**

这些是您在问题中提供的两个样本的结果：

```
October, 10 2012 19:30:51+0000
October, 10 2012 20:15:23+0000 
```

**参考**

这些是帮助我构建查询的好资源：

[12.7。日期和时间函数](http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html)
[如何在 MySQL 中添加日期或时间值](http://answers.oreilly.com/topic/165-how-to-add-date-or-time-values-in-mysql/)

# c - c调用汇编语言编写的函数

> ID：12984874
> 
> 赞同：2
> 
> 时间：2012-10-20T03:01:18.580
> 
> 标签：c, linux, gcc, assembly

我正在使用 GCC 练习 C 和汇编语言混合编程。并且发生了这个错误：

```
1 deng@ubuntu:~/workspace/leos_test$ make
2 ld -o deng c.o asm.o
3 ld: warning: cannot find entry symbol _start; defaulting to 0000000008048074
4 c.o: In function `main':
5 c_and_asm.c:(.text+0x19): undefined reference to `add'
6 c_and_asm.c:(.text+0x2e): undefined reference to `printf'
7 make: *** [deng] Error 1 
```

这是C代码：

```
1 #include<stdio.h>
2 void extern add(int * i);
3 void main(){
4    int i=1;
5    add(&i);
6    printf("%d ",i);
7} 
```

这是汇编语言代码：

```
1 .globl _add
2 _add:
3 push %bp;
4 mov %sp,%bp;
5 mov 0x4(%bp),%eax;
6 incw (%eax);
7 popw %bp;
8 ret 
```

这是生成文件：

```
1 deng: c.o asm.o
    2 ld -o deng c.o asm.o
3 c.o:
    4 gcc -o c.o -c c_and_asm.c
5 asm.o:
    6 as -o asm.o c_asm.asm 
```

任何建议将不胜感激:)。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T03:06:38.253

删除`_`from`_add`并修复`.globl`到`global`：

```
segment .text
global add

add: 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-20T03:13:09.147

将您的 c_asm.asm 文件更改为：

```
.section .text
.global add
.type add,@function
add:
push %bp;
mov %sp,%bp;
mov 0x4(%bp),%eax;
incw (%eax);
popw %bp;
ret 
```

在您的 ld 中包含此参数`-lc`并更好地将文件扩展名更改为`.s`

# mysql - MySQL接收重复条目

> ID：12984875
> 
> 赞同：0
> 
> 时间：2012-10-20T03:01:19.220
> 
> 标签：mysql, join, duplicates

我有这个查询，它从两个不同的数据库中获取信息：

我使用 $query 作为查询字符串。

```
SELECT 
    blurbs.text,
    blurbs.timestamp,
    users.name,
    users.username,
    users.profilepic,
    users.id 
FROM 
    blurbs, users 
WHERE 
    (LOWER(blurbs.text) LIKE '%$query%' 
OR  LOWER(users.name) LIKE '%$query%') 
AND blurbs.is_private=0 
LIMIT 0,30 
```

我收到了 blurbs 数据库中一些条目的副本。

我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-20T04:17:15.443

您还没有加入两个表。你需要像这样加入它`users.id = blurbs.userid`：

所以你的查询应该是：

```
SELECT 
    blurbs.text,
    blurbs.timestamp,
    users.name,
    users.username,
    users.profilepic,
    users.id 
FROM 
    blurbs, users 
WHERE
    users.id = blurbs.userid
AND (LOWER(blurbs.text) LIKE '%$query%' 
     OR  LOWER(users.name) LIKE '%$query%') 
AND blurbs.is_private=0 
LIMIT 0,30 
```

或者你也可以像这样使用 join 语句：

```
SELECT 
    blurbs.text,
    blurbs.timestamp,
    users.name,
    users.username,
    users.profilepic,
    users.id 
FROM 
    blurbs JOIN users ON users.id = blurbs.userid
WHERE
     (LOWER(blurbs.text) LIKE '%$query%' 
     OR  LOWER(users.name) LIKE '%$query%') 
AND blurbs.is_private=0 
LIMIT 0,30 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-20T03:05:19.750

您可以选择 DISTINCT 记录，如下所示：

```
SELECT DISTINCT
    blurbs.text,
    blurbs.timestamp,
    users.name,
    users.username,
    users.profilepic,
    users.id 
FROM 
    blurbs, users 
WHERE 
    (LOWER(blurbs.text) LIKE '%$query%' 
OR  LOWER(users.name) LIKE '%$query%') 
AND blurbs.is_private=0 
LIMIT 0,30 
```

此外，如果您在 blurbs 表和 users 表之间有任何关系，最好在这些字段上加入它们而不是做笛卡尔积。

# php - php 正则表达式 preg_match

> ID：12984879
> 
> 赞同：-1
> 
> 时间：2012-10-20T03:01:59.460
> 
> 标签：php, expression, match

注意 $pattern 的变化

```
$subject = '<table width="750"  style="padding-left:150px;"><tr><td width="108"class="fieldname">First Name:</td><td width="381" class="fieldname">';

    $pattern = '/(table)/';
    $matches = array();
    echo preg_match( $pattern, $subject, $matches)."<br/>";
    echo $matches[0]."<br/>"; 
```

给我输出
1 个
表

在 $pattern 中加上 < 前缀表给我输出
1

为什么 ？？我不应该得到 < table 作为输出吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-20T03:07:02.113

当您回显 preg_match 的结果时，您将得到一个布尔值，因此“1”是人们所期望的。$matches[1] 和 $matches[0] 都会给你“桌子”，所以这是人们所期望的。告诉我们您想要匹配的内容，我们可以提供帮助。

最后一个参数中的 preg_match &modified 变量将为您提供： - [0] 总匹配 - [1] 括号之间的匹配

虽然上面的答案是正确的，但 <(space)table 应该给你一个布尔值 FALSE。如果上面的回答者在他的假设中没有空格是正确的，那么他的回答是正确的，您正在查看浏览器输出而不是源。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-20T03:07:17.103

你明白了，但你看不到它（它是 HTML 标记，浏览器试图呈现一个表格）。

利用

```
 echo htmlentities($matches[0])."<br/>"; 
```

...检查比赛。

# msbuild - 如何并行构建多个配置？

> ID：12984882
> 
> 赞同：18
> 
> 时间：2012-10-20T03:03:01.323
> 
> 标签：msbuild

我有一个包含十二个解决方案配置的 Visual Studio 2012 解决方案。每个解决方案配置都是独立的（即每个配置的输出完全不相关）。

**问题：** 如何一步构建所有十二个配置，即通过在命令行上运行单个 MSBuild 命令，以及如何并行构建配置？

例如，如果只有两种配置，Release/AnyCPU 和 Debug/AnyCPU，我希望这两种配置可以同时并行构建。

为了完整起见，以下是我尝试过的；我还没有解决这个问题的方法。

* * *

为了一次构建所有项目，我创建了一个带有构建目标的新项目文件，该目标在每个配置的解决方案文件上运行 MSBuild 任务：

```
<Target Name="Build">
  <MSBuild Projects="cxxreflect.sln" Properties="SolutionDir=$(MSBuildProjectDirectory)\;Configuration=Release;Platform=Win32"     Targets="$(BuildCommand)" />
  <MSBuild Projects="cxxreflect.sln" Properties="SolutionDir=$(MSBuildProjectDirectory)\;Configuration=Release;Platform=x64"       Targets="$(BuildCommand)" />
  <MSBuild Projects="cxxreflect.sln" Properties="SolutionDir=$(MSBuildProjectDirectory)\;Configuration=Release;Platform=ARM"       Targets="$(BuildCommand)" />
  <MSBuild Projects="cxxreflect.sln" Properties="SolutionDir=$(MSBuildProjectDirectory)\;Configuration=Release(ZW);Platform=Win32" Targets="$(BuildCommand)" />
  <MSBuild Projects="cxxreflect.sln" Properties="SolutionDir=$(MSBuildProjectDirectory)\;Configuration=Release(ZW);Platform=x64"   Targets="$(BuildCommand)" />
  <MSBuild Projects="cxxreflect.sln" Properties="SolutionDir=$(MSBuildProjectDirectory)\;Configuration=Release(ZW);Platform=ARM"   Targets="$(BuildCommand)" />

  <MSBuild Projects="cxxreflect.sln" Properties="SolutionDir=$(MSBuildProjectDirectory)\;Configuration=Debug;Platform=Win32"       Targets="$(BuildCommand)" />
  <MSBuild Projects="cxxreflect.sln" Properties="SolutionDir=$(MSBuildProjectDirectory)\;Configuration=Debug;Platform=x64"         Targets="$(BuildCommand)" />
  <MSBuild Projects="cxxreflect.sln" Properties="SolutionDir=$(MSBuildProjectDirectory)\;Configuration=Debug;Platform=ARM"         Targets="$(BuildCommand)" />
  <MSBuild Projects="cxxreflect.sln" Properties="SolutionDir=$(MSBuildProjectDirectory)\;Configuration=Debug(ZW);Platform=Win32"   Targets="$(BuildCommand)" />
  <MSBuild Projects="cxxreflect.sln" Properties="SolutionDir=$(MSBuildProjectDirectory)\;Configuration=Debug(ZW);Platform=x64"     Targets="$(BuildCommand)" />
  <MSBuild Projects="cxxreflect.sln" Properties="SolutionDir=$(MSBuildProjectDirectory)\;Configuration=Debug(ZW);Platform=ARM"     Targets="$(BuildCommand)" />
</Target> 
```

这很好用，除了每个 MSBuild 任务都是按顺序调用的，所以没有并行性（是的，每个配置构建中都有并行性*，*但我真的很想跨配置构建获得并行性）。

为了使配置并行构建，我尝试利用 MSBuild 任务的 BuildInParallel 属性。我编写了一个预构建任务，为每个配置生成项目文件，然后尝试并行构建所有这些生成的项目：

```
<Target Name="PreBuild" Outputs="%(ProjectConfiguration.Identity)" Returns="%(BuildProject.Identity)">
  <Message Text="Cloning Solution for Configuration:  %(ProjectConfiguration.Identity)" />
  <PropertyGroup>
    <BuildProjectPath>$(IntPath)\%(ProjectConfiguration.Platform)\%(ProjectConfiguration.Configuration)\build.proj</BuildProjectPath>
  </PropertyGroup>
  <ItemGroup>
    <BuildProject Include="$(BuildProjectPath)" />
  </ItemGroup>
  <MakeDir Directories="$(IntPath)\%(ProjectConfiguration.Platform)\%(ProjectConfiguration.Configuration)" />
  <WriteLinesToFile
    File="$(BuildProjectPath)"
    Lines="&lt;?xml version='1.0' encoding='utf-8'?&gt;
&lt;Project DefaultTargets='Build' ToolsVersion='4.0' xmlns='http://schemas.microsoft.com/developer/msbuild/2003'>
  &lt;Target Name='Build'&gt;
    &lt;MSBuild
      Projects='$(SlnPath)'
      Properties='
        SolutionDir=$(MSBuildProjectDirectory)\%3b
        Configuration=%(ProjectConfiguration.Configuration)%3b
        Platform=%(ProjectConfiguration.Platform)
      '
      Targets='$(BuildCommand)'
    /&gt;
  &lt;/Target&gt;
&lt;/Project&gt;"
    Overwrite="true" />

</Target>
<Target Name="Build" DependsOnTargets="PreBuild">
  <Message Text="%(BuildProject.Identity)" />
  <MSBuild Projects="%(BuildProject.Identity)" Properties="BuildCommand=$(BuildCommand)" BuildInParallel="true" />
</Target> 
```

不幸的是，虽然这确实构建了所有十二种配置，但它是按顺序构建的。我的猜测是，当 MSBuild 对要构建的项目集执行依赖关系分析时，它会识别出它们都依赖于同一个解决方案文件，因此它决定它们不能并行构建。（这只是一个猜测；我可能完全错了。我对 MSBuild 知之甚少。）

我也在构建时使用 /m 开关。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-10-20T04:19:11.037

利用 MSBuild 任务的 BuildInParallel 选项，在一次调用中传递所有项目。[这里](http://msdn.microsoft.com/en-us/library/z7f65y0d.aspx)的例子给出了基本的方法：

```
<Project xmlns="http://schemas.microsoft.com/developer/msbuild/2003">
    <ItemGroup>
        <ProjectToBuild Include="a1.sln">
            <Properties>Configuration=Debug</Properties>
        </ProjectToBuild>
        <ProjectToBuild Include="a1.sln">
            <Properties>Configuration=Release</Properties>
        </ProjectToBuild>
    </ItemGroup>
    <Target Name="Build">
        <MSBuild Projects="@(ProjectToBuild)" BuildInParallel="true" />
    </Target>
</Project> 
```

# android - 是什么让 apk 像“小部件”一样？

> ID：12984888
> 
> 赞同：1
> 
> 时间：2012-10-20T03:03:37.187
> 
> 标签：android, android-appwidget

在 android 开发者网站中，应用小部件被实现为以下组合：

1.  AppWidgetProviderInfo 对象
2.  AppWidgetProvider 类
3.  初始视图布局

AndroidManifest.xml 中显示的应用小部件的典型示例是：

```
<receiver android:name="ExampleAppWidgetProvider" >   // item '2'
    <intent-filter>
        <action android:name="android.appwidget.action.APPWIDGET_UPDATE" />
    </intent-filter>
    <meta-data android:name="android.appwidget.provider"
               android:resource="@xml/example_appwidget_info" />   // item '1'
</receiver> 
```

项目 '1' 经常描述项目 '3' 的位置：

```
<appwidget-provider xmlns:android="http://schemas.android.com/apk/res/android"
    android:minWidth="294dp"
    android:minHeight="72dp"
    android:updatePeriodMillis="86400000"
    android:previewImage="@drawable/preview"
    android:initialLayout="@layout/example_appwidget"    // item '3'
    android:configure="com.example.android.ExampleAppWidgetConfigure" 
    android:resizeMode="horizontal|vertical">
</appwidget-provider> 
```

我见过很多这样的应用小部件示例。

但是，我仍然不明白“AppWidget 框架”使用什么签名来查找手机上的所有应用小部件并将它们放在主菜单的“**小部件”选项卡下。**

要使应用程序显示在主菜单的“**所有应用程序**”选项卡下，您可以将以下内容添加到其活动的意图过滤器之一。

```
<category android:name="android.intent.category.LAUNCHER" /> 
```

**但是，app widget 对应的魔法关键字是什么？**启动器如何识别应用小部件并将其放在“小部件”选项卡下？

我知道这可能不是因为项目 1,2,3 签名，因为我遇到了其他人开发的旧应用程序小部件，而我看不到 1,2,3 模式。而且我不知道“AppWidget 框架”如何确定它是一个应用程序小部件。

我在下面列出了旧应用程序小部件的清单文件，如果您能指出我应该在哪里寻找线索，我将非常感激。

```
<?xml version="1.0" encoding="utf-8"?>
<manifest
    xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.example.weather">
    <uses-permission android:name="android.permission.WAKE_LOCK"/>
    <uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION"/>
    <uses-permission android:name="android.permission.ACCESS_FINE_LOCATION"/>
    <uses-permission android:name="android.permission.ACCESS_MOCK_LOCATION"/>
    <uses-permission android:name="android.permission.ACCESS_NETWORK_STATE"/>
    <uses-permission android:name="android.permission.DISABLE_KEYGUARD" />
    <uses-permission android:name="android.permission.READ_PHONE_STATE" />
    <uses-permission android:name="android.permission.INTERNET" />
    <uses-permission android:name="android.permission.GET_TASKS" />
    <uses-permission android:name="com.android.launcher.permission.READ_SETTINGS" />
    <uses-permission android:name="com.android.launcher.permission.WRITE_SETTINGS" />
    <uses-permission android:name="android.permission.RECEIVE_BOOT_COMPLETED" />
    <application
        android:process="com.example.weather.sinaweather" 
        android:label="@string/app_name"
        android:icon="@drawable/widget_weather_icon">

        <provider
            android:name=".provider.WeatherProvider"
            android:authorities="com.example.weather" />
        <activity
            android:name=".WeatherDetail"
            android:excludeFromRecents="true">
        </activity>        
        <activity
            android:name=".WeatherDetailActivity"
            android:launchMode="singleTop"
            android:excludeFromRecents="true"
            android:configChanges="orientation|screenSize|keyboardHidden|navigation">
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />
                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>

        <activity
            android:name=".AlertActivity"
            android:excludeFromRecents="true"
            android:theme="@android:style/Theme.Dialog">
            <intent-filter>
                <!--action android:name="android.intent.action.MAIN" /-->
                <!--category android:name="android.intent.category.LAUNCHER" /-->
            </intent-filter>
            <intent-filter>
                <action android:name="com.example.weather.action.START_WEATHER_SETTINGS" />
                <category android:name="android.intent.category.DEFAULT" />
            </intent-filter>
            <intent-filter>
                <action android:name="com.example.weather.action.START_WEATHER_APPLICATION" />
                <category android:name="android.intent.category.DEFAULT" />
            </intent-filter>
        </activity>
        <activity
            android:name=".WeatherDisplayCurrentDialog"
            android:excludeFromRecents="true"
            android:theme="@android:style/Theme.Dialog">
            <intent-filter>
                <action android:name="com.example.weather.DISPLAY_CURRENT_CONFIGURE" />
            </intent-filter>
        </activity>
        <activity
            android:name=".AddCityActivity"
            android:excludeFromRecents="true"
            android:configChanges="orientation|screenSize|keyboardHidden|navigation|locale">
            <intent-filter>
                <action android:name="com.example.weather.action.START_WEATHER_SETTINGS_INTELNAL" />
                <category android:name="android.intent.category.DEFAULT" />
            </intent-filter> 
        </activity>
        <activity
            android:name=".SearchCityActivity"
            android:excludeFromRecents="true"
            android:configChanges="orientation|screenSize|keyboardHidden|navigation">
        </activity>
        <service android:name=".WeatherService">
            <intent-filter>
                <action android:name="com.example.weather.INIT_APP" />
                <action android:name="com.example.weather.WEATHER_RETRY" />
                <action android:name="com.example.weather.RESET_AUTO_UPDATE_ALARM" />
                <action android:name="com.example.weather.WEATHER_AUTOUPDATE" />
                <action android:name="com.example.weather.action.NEED_WEATHER_INFO" />
                <action android:name="com.example.weather.action.TOP_CITY_CHANGED" />
                <action android:name="com.example.weather.LOCATION_UPDATE" />          
            </intent-filter>
        </service>

        <receiver
            android:name=".WeatherReceiver">
            <intent-filter>
                <action android:name="android.intent.action.BOOT_COMPLETED" />
                <action android:name="com.example.weather.RESTART_SERVICE" />
            </intent-filter>
        </receiver>

    </application>
</manifest> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-20T10:04:32.630

阅读[本文](http://developer.android.com/guide/topics/appwidgets/index.html)以获取有关创建和声明小部件的详细说明。清单中需要您所谓的“1-2-3”模式。

# r - SLEPC / PETSC的R绑定？

> ID：12984889
> 
> 赞同：0
> 
> 时间：2012-10-20T03:03:56.067
> 
> 标签：r

有人在 R 和 SLEPC 的绑定中运气很好吗？在 R 中寻找更快的 SVD 和特征值算法。

更新：我通常对这两种情况都感兴趣（速度与规模）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-20T03:12:51.887

我不关注：

1.  SLEPC 用于*可扩展*的即非常大的问题

2.  您要求更快的 SVD

如果你追求速度，我会考虑

*   快速实现，比如[RcppEigen](http://cran.r-project.org/package=RcppEigen)或者，

*   加速的 BLAS，例如 OpenBLAS，如果 R 以正确的方式构建，它可以成为 R 的一个插件。

但是，如果您真的在处理大问题，那么包装 ScaLAPACK 的新[pbd-r.org](http://www.r-pdb.org)项目可能会有所帮助。

*因此，如果您追求速度*或*规模*，请告诉我们。

# jquery - jquery使用计时器和悬停迭代列表图像

> ID：12984890
> 
> 赞同：1
> 
> 时间：2012-10-20T03:04:01.460
> 
> 标签：jquery, each, loops, timing

我有一个列表，其中 li 有 img。图像是缩略图，还有另一个 div 应该迭代大版本的缩略图。此外，当用户在缩略图上移动时，大图像迭代应该停止并显示悬停的内容。

我悬停的东西正在工作，但迭代和时间却没有。我遗漏了一些东西并且并不感到惊讶，因为这确实在推动我的菜鸟静态页面的能力极限！

简单的html：

```
<ul>
 <li><img src='blah' />text</li>
 <li><img src='blah' />text</li>
</ul>
<div ='big'></div> 
```

jQuery：

```
$(document).ready(function(){

    $('li img').each(function (i) {
        var thumb = $(this).attr("src");
        setTimeout(function () { 
            $('#big').html('<img src=' + thumb + '/>');

            }, 5000 * (i + 1));
    });

    imgHov();

});

function imgHov(){
    $('li img').hover(
        function(){
            $('#big').html('<img src=' + $(this).attr("src") + '/>');
        },
        function(){
            $('#big').html("");
        }
        );

}; 
```

我准备完全重建这件事；我尝试使用 jquery .map() 和其他将列表转换为数组而不是 .each 的方法。让我知道您的专家将采取的方向。谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-20T05:56:48.003

这是我给你做的，你看看...

**现场演示：**

[http://jsfiddle.net/oscarj24/XcZBq/](http://jsfiddle.net/oscarj24/XcZBq/)

只是要知道，`setTimeout`我没有使用 ，而是使用`setInterval`并为此添加了一些逻辑，仅此而已。

希望这可以帮助。

# php - mkdir 上下文示例 php

> ID：12984891
> 
> 赞同：5
> 
> 时间：2012-10-20T03:04:04.673
> 
> 标签：php, mkdir

在 php 5.0 中，上下文被添加到 mkdir。但是如何使用它，它能做什么有用的事情呢？

哪些参数可用于传递给 mkdir 的上下文？）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T03:46:15.840

我相信添加了 context 选项，以便可以使用 mkdir 代替 PHP 中特定于连接的 mkdir，例如 ftp_mkdir：

[http://www.php.net/manual/en/context.ftp.php](http://www.php.net/manual/en/context.ftp.php)

尽管将上下文添加到 mkdir 似乎没有太多优势，但将其添加到所有文件系统创建函数中仍有很多优势： [http ://www.php.net/manual/en /stream.contexts.php](http://www.php.net/manual/en/stream.contexts.php)

至于参数，请查看： [http ://www.php.net/manual/en/context.php](http://www.php.net/manual/en/context.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-11-25T13:10:10.340

您需要两个参数，“文件夹”和“权限”。阅读： http: [//php.net/manual/es/function.mkdir.php](http://php.net/manual/es/function.mkdir.php)

我建议使用`chmod()`after `mkdir()`。

[http://php.net/manual/es/function.chmod.php](http://php.net/manual/es/function.chmod.php)

# c# - Debug 类和 Trace 类有什么区别？

> ID：12984905
> 
> 赞同：21
> 
> 时间：2012-10-20T03:07:46.303
> 
> 标签：c#, winforms, debugging

我正在尝试在我们的一个应用程序中编写更好的错误处理和调试逻辑。有人可以解释 Debug 和 Trace 类之间的区别吗？文档看起来非常相似。我想将这些类与 NLog 结合使用来改进我们的调试工作。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-10-20T06:49:09.420

`Debug`和`Trace`类有非常相似的方法。主要区别在于对`Debug`类的调用通常仅包含在 Debug 构建中，而 Trace 包含在所有构建（调试和发布）中。您可以通过编译器标志 DEBUG 和 TRACE 来控制它。如果您查看两者的文档，您会注意到`ConditionalAttribute`注释方法。这会导致方法调用仅在定义了适当的编译器标志时才包含在二进制文件中。您可以定义自己的编译器标志并`ConditionalAttribute`以类似的方式将其与 结合使用。请注意，如果您使用它，这些方法不会从已编译的二进制文件中删除。调用站点被修改以删除方法调用。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-10-20T04:53:51.720

调试期间使用调试。Trace 正在写入日志文件。这有点像日志记录。两者都非常相似，但是为了长期保留而进行跟踪，为了实时调试而进行调试。

# operating-system - Mac OS X下开发Simple OS，如何从Mach-O构建boot img？

> ID：12984907
> 
> 赞同：3
> 
> 时间：2012-10-20T03:08:04.103
> 
> 标签：operating-system

我正在 Mac OS X 环境下编写一个简单的操作系统。我可以通过 nasm 构建一个简单的引导加载程序。当我用 C 语言开发更多部分时，我应该将它们一起构建。Mac OS X 的 GCC 将编译一个 Mach-O 输出格式。我想知道如何 cat 输出对象的指令部分，并将其与 nasm 部分链接在一起。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-20T03:28:53.447

还有一个更大的问题，你没有看到。

GCC 不生成 16 位 x86 代码，仅生成 32 位或 64 位。x86 PC 引导加载程序以实寻址模式开始执行，这是一种仅适用于 16 位代码的 16 位模式。

因此，即使您设法将使用 gcc 编译的 C 代码和使用 NASM 编译的汇编代码链接在一起，您也无法执行 C 代码部分（与此相关的任何 32 位代码部分），直到您'已经切换到 32 位保护模式，这不是一件容易的事。

而且您也不想在 512 字节长的引导扇区中切换到保护模式。BIOS 功能不能在保护模式下使用。如果您切换得太早，您将无法从磁盘加载更多内容。

最实用的策略是将引导加载程序分成几个部分。512 字节长的引导扇区将使用 BIOS 磁盘 I/O 功能加载下一部分。这些其他部分将包含整个操作系统，或者通过使用相同的 BIOS I/O 功能或在真实或受保护模式下使用其自己的磁盘驱动程序来加载操作系统其余部分的足够代码。

因此，您注定要为引导扇区手动编写汇编语言的 16 位代码，没有 C，没有 32 位。

但是，您可以使用能够为引导加载程序的其他部分生成 16 位 x86 代码的其他 C 编译器。至少有两个这样的编译器可以在线免费获得：

*   Turbo C++ 1.01（仅在 DOS、Windows XP 或更低版本、带有 DOS/Windows 的 VM 中运行，例如 DosBox）
*   打开 Watcom C/C++ 1.9（在 DOS、Windows 和可能的 Linux 中运行）

# iphone - 在 UIViewController 子类中添加通知观察者的时机

> ID：12984908
> 
> 赞同：0
> 
> 时间：2012-10-20T03:09:18.877
> 
> 标签：iphone, objective-c, ios, cocoa-touch, cocoa

我对 Cocoa Touch 还很陌生。现在我正在尝试继承 UIViewController 来提供我的自定义视图。由于我打算使用 NSUserDefaults 保存 UITextField (passcodeField) 的内容，因此我希望在 UITextField 更改其值时得到通知。

我在某处读过，为了做到这一点，我应该将视图控制器添加为 UITextFieldTextDidChangeNotification 通知的观察者。但是，我只是不确定何时这样做。我考虑了几个选项。

1.  在`-loadView`方法中。但是，由于我使用 XIB 加载我的视图，我认为我不应该弄乱这种方法，而应该保持原样。（顺便说一句，我在这一点上是否正确？）

2.  在`-viewWillAppear`方法中。但是这个方法可能会被多次调用，因为视图可能会被移出并移入屏幕而不会被销毁和重新创建。（我说得对吗？）这不会对程序造成任何伤害，但肯定不是正确的方法。

3.  在 UIViewController 的初始化程序中。如果我想在那里添加通知，我必须引用 UITextField。通过这样做，我基本上可以在真正需要它之前创建视图。另外我想我在某处读到，如果系统内存不足，屏幕外视图可能会被破坏。因此，如果发生这种情况，我可能会失去观察通知，对吗？

所以我现在完全糊涂了。各位大神能不能给我一些建议把它放在哪里？非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-20T03:16:58.003

把它放在你的 ViewController 的 - (void)viewDidLoad 方法中记得调用 [super viewDidLoad]; 在您的实施开始时。

# ios - 检查 NSString 是否包含任何数字并且长度至少为 7 个字符

> ID：12984912
> 
> 赞同：17
> 
> 时间：2012-10-20T03:10:32.520
> 
> 标签：ios, objective-c, regex

所以我想我需要一个正则表达式来做到这一点，但我还没有用目标 c 做任何正则表达式，而且我已经有一年没有写过正则表达式语句了。

我认为它应该像 ((?=.*[0-9]).{7,1000})

如何将其放入客观的 c 字符串比较并评估结果？

我的正则表达式也正确吗？

* * *

## 回答 #1

> 赞同：68
> 
> 时间：2012-10-20T03:23:53.137

虽然正则表达式可能会起作用，但还有另一种方法：

```
NSString *str = // some string to check for at least one digit and a length of at least 7
if (str.length >= 7 && [str rangeOfCharacterFromSet:[NSCharacterSet decimalDigitCharacterSet]].location != NSNotFound) {
    // this matches the criteria
} 
```

这段代码实际上检查的不仅仅是 0-9。它也处理来自其他语言的数字。如果你真的只想要 0-9 然后替换：

```
[NSCharacterSet decimalDigitCharacterSet] 
```

和：

```
[NSCharacterSet characterSetWithCharactersInString:@"0123456789"]; 
```

# java - 请帮助解决这个空指针异常。本项目涉及struts2、jsp、java和struts.xml

> ID：12984916
> 
> 赞同：0
> 
> 时间：2012-10-20T03:11:13.447
> 
> 标签：java, xml, jsp, struts

以下jsp显示对应数据库中的4个文本字段

```
<%@ page language="java" contentType="text/html; charset=ISO-8859-1"
    pageEncoding="ISO-8859-1"%>
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<%@ taglib prefix="s" uri="/struts-tags"%>
<%@ taglib prefix="sj" uri="/struts2-jquery-tags"%>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<title>Insert title here</title>
</head>
<body>
<p>This is for fun</p>

<s:form action="eAction" name="eSites">
    <s:textfield value="%{l.Name}" label="Name" id="name" ></s:textfield>
    <s:textfield value="%{l.plan}" label="t Plan" id="plan" ></s:textfield>

</s:form>

<s:form action="updateAction" name="eSite">

<button onclick="output()">Update</button>
<script>
function output(){
         eSite.submit();    
    }
</script>
</s:form>

</body>
</html> 
```

以下是数据库：

```
INSERT INTO engagement(PId, S_Id, P_Name, Pa_Plan, Pa_Method, PDate) 
    VALUES(2, 1, 'erferef', 'ergregre', 'egregref', '2012-9-19'); 
```

Followign 是 struts.xml 代码。

```
 <action name="eAction"   class="com.fr.actions.EEngagement">
        <result name ="resultedfunc">/jsp/EParentEngagement.jsp</result> 
    </action>

    <action name="updateAction" class="com.fr.actions.EEngagement" method="update">
        <result name ="UPDATE">/jsp/Engagement.jsp</result>
    </action> 
```

出现的问题是当我给出 xxx.eAction 时，我可以看到 4 个文本字段，其中包含从 db 填充的数据。之后，如果我单击更新按钮（此按钮的代码存在于 jsp 文件中），则 url 为 updateAction.action，并且在下一行中出现空指针异常。

```
 System.out.println(li.gett_Name()); 
```

有人可以解决这个问题。我花了将近6个多小时。我尝试过自动生成 getter 和 setter 并重构所有内容。但我还是想不通。请帮帮我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T04:54:43.640

看起来您的更新方法中缺少以下操作

```
EditParentEngagementDAO editParentEngagementDAO = new EditParentEngagementDAO();
listSiteDetails = editParentEngagementDAO.aSiteIdDetails(getParentengid()); 
```

您可能需要在调用之前调用它`listsitedetails.get..`

# java - 不能在 Java 的多线程中使用 join()

> ID：12984921
> 
> 赞同：0
> 
> 时间：2012-10-20T03:12:25.443
> 
> 标签：java, multithreading

我对多线程有一些问题。我的程序如下：

```
...
for(int i=0; i< 10; i++)
{
   new Thread(){
       @Overried
       public void run(){
           <do something level 1>

           <do something level 2>
       }
   }.start;
}
<do something level 3>
... 
```

我希望主线程仅在所有 10 个线程完成 [做某事 2 级] 后才执行 [做某事 3 级]。并且在所有子线程完成[做某事级别 1] 的事件发生之前没有任何线程执行[做某事级别 2]。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-20T03:15:50.810

您应该保留对您启动的线程的引用以便调用`join`它们。

要实现第一件事，您可以执行以下操作：

```
Thread[] threads = new Thread[10];
for(int i=0; i< 10; i++)
{
   threads[i] = new Thread(){
       // ...
   };
   threads[i].start();
}
for(int i=0; i< 10; i++)
{
   threads[i].join();
} 
```

对于第二个，您可能应该`wait`在主线程和`notify`子线程中使用（在完成任务一之后）来表示第一部分的结束，然后`wait`在子线程和`notifyAll`主线程上使用来表示所有线程首先完成部分。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-20T04:33:39.717

`[do level 1]`我建议你分两个街区分手`[do level 2]`。

就像是

```
...

for(int i=0; i< 10; i++)
{
   new Thread(){
       public void run(){
           <do something level 1>
       }
   }.start;
}

**join** 

for(int i=0; i< 10; i++)
{
   new Thread(){
       public void run(){
           <do something level 2>
       }
   }.start;
}

<do something level 3>
... 
```

而不是在主线程中使用带有计数器的`wait`\ 。`notify`可能只是因为我对这些不满意，但我相信这会使事情变得不必要地复杂，你几乎肯定会遇到竞争条件。

此外，我建议您使用`ExecutorService`抽象而不是使用`Thread`s. 它们消除了在最低级别工作的需要，并且可配置性强且功能强大。一旦你习惯了它们，它们也更容易理解。

```
 ExecutorService service = Executors.newFixedThreadPool(10);

    for (int i = 1; i <= 10; i++) {
        final int w = i;
        service.execute(new Runnable() {

            public void run() {
                long wait = (long) (Math.random() * 1000);
                try {
                    Thread.sleep(wait);
                } catch (InterruptedException e) {
                }
                System.out.println(w + "LEVEL 1 done " + wait);

            }
        });
    }
    service.shutdown();
    service.awaitTermination(1, TimeUnit.DAYS);

    System.out.println("all level 1 done");

    service = Executors.newFixedThreadPool(10);

    for (int i = 1; i <= 10; i++) {
        final int w = i;
        service.execute(new Runnable() {

            public void run() {
                long wait = (long) (Math.random() * 1000);
                try {
                    Thread.sleep(wait);
                } catch (InterruptedException e) {
                }
                System.out.println(w + "LEVEL 2 done " + wait);

            }
        });
    }
    service.shutdown();
    service.awaitTermination(1, TimeUnit.DAYS);

    System.out.println("all done"); 
```

# java - 给扩展类一个特定的行为？

> ID：12984922
> 
> 赞同：1
> 
> 时间：2012-10-20T03:12:30.660
> 
> 标签：java

我怎样才能拥有一个类的多个扩展`Fruit`，并根据对象是什么类/类型，在这个水果上执行相同的方法但具有不同的功能？

示例：我正在使用 a 向水果店`FruitManager`添加新的。`Fruit fruit = new Apple();`如果这个水果是苹果，我当然想把它添加到苹果列表中。香蕉清单也是如此。现在，如果我有 10 种水果，我不想创建 10 个函数，如`addBanana()`,`addApple()`等等。而且我也不想为了获得正确的水果清单而使用混乱的 if-else 语句。

我可以根据我添加的对象类型来获取水果列表吗？

```
class Fruit;
class Apple extends Fruit;
class Banana extends Fruit;

class FruitStore {
    List<Fruit> apples = new ArrayList<Apple>();
    List<Fruit> bananas = nwe ArrayList<Banana>();
}

class FruitManager {
    FruitStore store;

    //called from somewhere with Fruit fruit = new Apple();
    addFruit(Fruit fruit) {
        //how could things like this be done in one statement?
        store.<get list apples or bananas>.add(fruit);
    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-20T03:40:46.273

把我的杂碎变成一个答案。考虑使用 HashMap `HashMap<Class<? extends Fruit>, List<Fruit>>`。像这样的东西：

```
class FruitStore {
   private Map<Class<? extends Fruit>, List<Fruit>> fruitMap = 
         new HashMap<Class<? extends Fruit>, List<Fruit>>();

   public void addFruit(Fruit fruit) {
      Class<? extends Fruit> fruitClass = fruit.getClass();
      List<Fruit> fruitList = fruitMap.get(fruitClass);
      if (fruitList == null) {
         fruitList = new ArrayList<Fruit>();
         fruitMap.put(fruitClass, fruitList);
      }
      fruitList.add(fruit);
   }

   public void displayStore() {
      for (List<Fruit> fruitList : fruitMap.values()) {
         System.out.println(fruitList);
      }
   }
} 
```

我对此进行了测试：

```
import java.util.ArrayList;
import java.util.HashMap;
import java.util.List;
import java.util.Map;

public class FruitManager {
   public static void main(String[] args) {
      FruitStore fruitStore = new FruitStore();
      for (int i = 0; i < 20; i++) {
         if (i % 3 == 0) {
            fruitStore.addFruit(new Banana());
         } else {
            fruitStore.addFruit(new Apple());
         }
      }

      fruitStore.displayStore();
   }
}

abstract class Fruit {
   public abstract String getName();

   @Override
   public String toString() {
      return getName();
   }
}

class Apple extends Fruit {

   private static final String NAME = "Apple";

   @Override
   public String getName() {
      return NAME;
   }

}

class Banana extends Fruit {

   private static final String NAME = "Banana";

   @Override
   public String getName() {
      return NAME;
   }

}

class FruitStore {
   private Map<Class<? extends Fruit>, List<Fruit>> fruitMap = 
         new HashMap<Class<? extends Fruit>, List<Fruit>>();

   public void addFruit(Fruit fruit) {
      Class<? extends Fruit> fruitClass = fruit.getClass();
      List<Fruit> fruitList = fruitMap.get(fruitClass);
      if (fruitList == null) {
         fruitList = new ArrayList<Fruit>();
      }
      fruitList.add(fruit);
      fruitMap.put(fruitClass, fruitList);
   }

   public void displayStore() {
      for (List<Fruit> fruitList : fruitMap.values()) {
         System.out.println(fruitList);
      }
   }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-20T03:16:33.217

虽然您可以避免对`addBanana(..)`,`addApple(..)`等的需要，但如果没有几个 if-else 语句，这是不可行的，除非您想在使用反射时失去相当多的程序效率。

```
public void addFruit(Fruit fruit) {
    if (fruit instanceof Apple) {
        store.apples.add(fruit);
    } else if (fruit instance of Banana) {
        store.bananas.add(fruit);
    } else if ... { }
} 
```

如果你*真的*想使用反射方法......这里是，但我不推荐它。

```
public void addFruit(Fruit fruit) {
    try {
        Class<Fruit> clazz = fruit.getClass();
        String clazzName = clazz.getName();
        String listName = clazzName.toLowercase() + "s";
        Class<FruitStore> fsClazz = store.getClass();
        Field listField = fsClazz.getDeclaredField(listName);
        listField.setAccessible(true);
        List<Fruit> list = (List<Fruit>) listField.get(store);
        list.add(fruit);
    } catch (Exception e) {
        // failed to add fruit
        e.printStackTrace();
    }
} 
```

注意：反射方法未经测试，但我认为可能发生的唯一问题是`Field#get`返回对其值副本的引用而不是对其值的引用，从而导致`list.add(fruit)`添加到与类中的列表不同的列表中。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-20T03:21:03.600

```
List<Fruit> apples = new ArrayList<Apple>(); 
```

首先，这在 Java 中是无效的，因为水果列表不能指向苹果列表，因为`List<Fruit>`它可能包含任何水果，即苹果或香蕉，而`ArrayList<Apple>`只能包含苹果。

其次，当您有这样的继承链时，通常不会将它们存储在单独的列表中。您可以将它们存储在一个列表中，`List<Fruit>`并且在此列表中的每个元素上执行的任何操作都将具有多态行为，并且根据 的实际类型`Fruit`，行为可能与相应类中定义的不同。

因此，您应该重新考虑您认为需要单独存储它们的用例。

# android - 如何修复广告横幅的布局

> ID：12984925
> 
> 赞同：3
> 
> 时间：2012-10-20T03:13:35.107
> 
> 标签：android, admob, android-relativelayout, ads

我刚刚在我的 android 应用程序中添加了来自 admob 的广告。一切正常，但只有一个小布局问题。当用户点击`EditText`并在屏幕上弹出键盘时，广告位于键盘顶部，使其看起来很烦人，如下图所示。即使键盘打开，如何确保广告固定在底部？

我在活动中使用了RelativeLayout，广告的标签如下

```
<com.google.ads.AdView
        xmlns:ads="http://schemas.android.com/apk/lib/com.google.ads"
        android:id="@+id/adView"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentBottom="true"
        ads:adSize="BANNER"
        ads:adUnitId="<MY ID>" /> 
```

清单中的活动声明

```
<activity
        android:name=".MyActivity"
        android:label="@string/title_activity_my_activity"
        android:screenOrientation="portrait" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
</activity>

<activity
        android:name="com.google.ads.AdActivity"
        android:configChanges="keyboard|keyboardHidden|orientation|screenLayout|
        uiMode|screenSize|smallestScreenSize" />" 
```

![广告布局](../Images/673b5f11f301aee59cb834b96b87455c.png)

* * *

## 回答 #1

> 赞同：-3
> 
> 时间：2012-10-20T03:48:27.437

检查你的 android manifest 并确保在你的活动标签中 android:windowSoftInputMode="adjustResize" 被**删除**

```
 <activity
        android:name=".YouActivity"
        android:label="@string/activity123"
        android:windowSoftInputMode="adjustResize" /> //remove adjustResize 
```

应该

```
 <activity
        android:name=".YouActivity"
        android:label="@string/activity123"/> 
```

并尝试添加 android:windowSoftInputMode="" 并试验可以放在那里的值（eclipse 中的 CTRL+SPACE）。尝试“调整盘”。

# java - Android 中的位图和 OpenCV 中的 Mat

> ID：12984926
> 
> 赞同：1
> 
> 时间：2012-10-20T03:13:38.210
> 
> 标签：java, android, c++, opencv, bitmap

我在 OpenCV C++ 中有这段代码：

```
#include <opencv2/imgproc/imgproc.hpp>
#include <opencv2/highgui/highgui.hpp>

using namespace cv;

int main(){
    Mat src = imread("image.jpg");
    if (src.empty())
        return -1;
    pyrMeanShiftFiltering(src,src,10,20,1);
    imshow("src", src);
    waitKey(0);
    return 0;
} 
```

这个来自 OpenCV 2.4.2 的 Sample1View.java 类作为一个名为“OpenCV Tutorial 1 - Add OpenCV”的示例：

```
import org.opencv.android.Utils;
import org.opencv.core.Core;
import org.opencv.core.CvType;
import org.opencv.core.Mat;
import org.opencv.core.Point;
import org.opencv.core.Scalar;
import org.opencv.imgproc.Imgproc;
import android.content.Context;
import android.graphics.Bitmap;
import android.util.Log;

class Sample1View extends SampleViewBase {
    public static final int     VIEW_MODE_RGBA  = 0;
    public static final int     VIEW_MODE_GRAY  = 1;
    public static final int     VIEW_MODE_CANNY = 2;
    private Mat mYuv;
    private Mat mRgba;
    private Mat mGraySubmat;
    private Mat mIntermediateMat;
    private Bitmap mBitmap;
    private int mViewMode;

    public Sample1View(Context context) {
        super(context);
        mViewMode = VIEW_MODE_RGBA;
    }

    @Override
    protected void onPreviewStarted(int previewWidth, int previewHeight) {
        synchronized (this) {
            // initialize Mats before usage
            mYuv = new Mat(getFrameHeight() + getFrameHeight() / 2, getFrameWidth(), CvType.CV_8UC1);
            mGraySubmat = mYuv.submat(0, getFrameHeight(), 0, getFrameWidth());
            mRgba = new Mat();
            mIntermediateMat = new Mat();
            mBitmap = Bitmap.createBitmap(previewWidth, previewHeight, Bitmap.Config.ARGB_8888); 
        }
    }

    @Override
    protected void onPreviewStopped() {
        if(mBitmap != null) {
            mBitmap.recycle();
        }

        synchronized (this) {
            // Explicitly deallocate Mats
            if (mYuv != null)
                mYuv.release();
            if (mRgba != null)
                mRgba.release();
            if (mGraySubmat != null)
                mGraySubmat.release();
            if (mIntermediateMat != null)
                mIntermediateMat.release();
            mYuv = null;
            mRgba = null;
            mGraySubmat = null;
            mIntermediateMat = null;
        }
    }

    @Override
    protected Bitmap processFrame(byte[] data) {
        mYuv.put(0, 0, data);
        final int viewMode = mViewMode;

        switch (viewMode) {
        case VIEW_MODE_GRAY:
            Imgproc.cvtColor(mGraySubmat, mRgba, Imgproc.COLOR_GRAY2RGBA, 4);
            break;
        case VIEW_MODE_RGBA:
            Imgproc.cvtColor(mYuv, mRgba, Imgproc.COLOR_YUV420sp2RGB, 4);
            Core.putText(mRgba, "OpenCV + Android", new Point(10, 100), 3/* CV_FONT_HERSHEY_COMPLEX */, 2, new Scalar(255, 0, 0, 255), 3);
            break;
        case VIEW_MODE_CANNY:
            Imgproc.Canny(mGraySubmat, mIntermediateMat, 80, 100);
            Imgproc.cvtColor(mIntermediateMat, mRgba, Imgproc.COLOR_GRAY2BGRA, 4);
            break;
        }

        Bitmap bmp = mBitmap;

        try {
            Utils.matToBitmap(mRgba, bmp);
        } catch(Exception e) {
            Log.e("org.opencv.samples.tutorial1", "Utils.matToBitmap() throws an exception: " + e.getMessage());
            bmp.recycle();
            bmp = null;
        }
        return bmp;
    }

    public void setViewMode(int viewMode) {
        mViewMode = viewMode;
    }
} 
```

现在我希望我的代码可以在 Android 上运行，所以我替换了这一行：

```
case VIEW_MODE_GRAY:
    Imgproc.cvtColor(mGraySubmat, mRgba, Imgproc.COLOR_GRAY2RGBA, 4);
    break; 
```

对此：

```
case VIEW_MODE_GRAY:
    Imgproc.cvtColor(mGraySubmat, mRgba, Imgproc.COLOR_GRAY2RGBA, 4);
    Imgproc.pyrMeanShiftFiltering(mRgba,mRgba,10,20);
    break; 
```

但我明白了：

```
10-20 11:08:45.929: I/Sample::Activity(12846): Menu Item selected Preview GRAY
10-20 11:08:46.049: W/dalvikvm(12846): threadid=9: thread exiting with uncaught exception (group=0x4013a560)
10-20 11:08:46.059: E/AndroidRuntime(12846): FATAL EXCEPTION: Thread-10
10-20 11:08:46.059: E/AndroidRuntime(12846): CvException [org.opencv.core.CvException: ..\..\modules\imgproc\src\segmentation.cpp:345: error: (-210) Only 8-bit, 3-channel images are supported in function void cvPyrMeanShiftFiltering(const CvArr*, CvArr*, double, double, int, CvTermCriteria)
10-20 11:08:46.059: E/AndroidRuntime(12846): ]
10-20 11:08:46.059: E/AndroidRuntime(12846):    at org.opencv.imgproc.Imgproc.pyrMeanShiftFiltering_1(Native Method)
10-20 11:08:46.059: E/AndroidRuntime(12846):    at org.opencv.imgproc.Imgproc.pyrMeanShiftFiltering(Imgproc.java:7247)
10-20 11:08:46.059: E/AndroidRuntime(12846):    at com.duckie.a.Sample1View.processFrame(Sample1View.java:80)
10-20 11:08:46.059: E/AndroidRuntime(12846):    at com.duckie.a.SampleViewBase.run(SampleViewBase.java:185)
10-20 11:08:46.059: E/AndroidRuntime(12846):    at java.lang.Thread.run(Thread.java:1019) 
```

似乎是什么问题？如何让我的代码在 Android 中运行？而且，我该如何做到这一点而不会有延迟？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-20T03:22:31.490

似乎 cvPyrMeanShiftFiltering 需要一个 3 通道图像，而您生成一个 4 通道图像：

```
Imgproc.cvtColor(mGraySubmat, mRgba, Imgproc.COLOR_GRAY2RGBA, 4); 
```

# function - Emacs删除文件夹中的文件没有提示

> ID：12984931
> 
> 赞同：2
> 
> 时间：2012-10-20T03:15:50.457
> 
> 标签：function, emacs, hook, delete-file

我正在尝试进行清理功能，我基本上希望它在 emacs 结束时删除文件夹中的所有文件。但是，当文件不存在 Emacs 错误（实际上不允许我退出）时，我已经决定编写单个文件名。

```
(defun delete-Navi-empty-files () 
(delete-file "/emacs-24.1/.emacs.d/Navi-empty/empty_flymake.tex" nil)
(delete-file "/emacs-24.1/.emacs.d/Navi-empty/empty_flymake.log" nil)
)

(add-hook 'kill-emacs-hook 'delete-Navi-empty-files) 
```

知道如何摆脱“不存在这样的文件”，或者如何清理文件夹吗？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-20T03:24:22.020

最简单的做法是在尝试删除文件之前检查文件是否存在：

```
(when (file-exists-p filename) (delete-file filename)) 
```

由于看起来您将重复使用它，因此将其包装在一个函数中可能是有意义的：

```
(defun my-delete (filename)
  "If the given file exists, delete it; otherwise do nothing."
  (when (file-exists-p filename) (delete-file filename))) 
```

# wordpress - Portfolio Press responsive CSS 如果它不在 style.css 中怎么办？

> ID：12984933
> 
> 赞同：0
> 
> 时间：2012-10-20T03:15:53.513
> 
> 标签：wordpress, responsive-design

我正在使用 Wordress 中的 Portfolio-Press 主题。我添加了一个 980px 宽的文件作为徽标，以给我一个“横幅”的外观。它是风化的木板外观。为了处理这个文件的左右边距最终变成白色，我在“品牌” div 中放置了一个风化的木板文件，它位于“logo” div 的下方，并给它一个 repeat-x这样无论屏幕设置多大，它都能填补空白。工作正常，除非浏览器的大小低于 750 像素。有一个@media css 调用被激活，它使背景向下移动约 100 像素并搞砸了菜单栏。你会认为这很容易找到和纠正，但我是个傻瓜。我搜索了这个 css 调用，但在真正的 css 文件中找不到它。它必须由脚本或其他东西生成。

问题是，在不重写 javascript 或编写这个 css 的情况下，我能做些什么吗？而且，如果它的 javascript 必须被重写，它到底在哪里？

您可以在以下位置查看该网站

[www.bufalobobschalupas.com](http://bufalobobschalupas.com)

如果您在打开开发人员工具的情况下运行它并选择“包装”div 内的“品牌”div，那么很容易看到 css 的变化。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-02T18:02:02.490

在尝试找出如何在投资组合视图中为缩略图正确添加边框时，我发现这篇文章描述了我需要更新的 css 元素：

[http://wordpress.org/support/topic/theme-portfolio-press-cant-remove-the-grey-border-on-the-thumbnails](http://wordpress.org/support/topic/theme-portfolio-press-cant-remove-the-grey-border-on-the-thumbnails)

> “在您的 CSS 文件中，找到：#content img、img.thumbnail 并删除边框：1px solid #DDD;”

然后我根据需要在 header.php 中覆盖样式，就在结束**</head>**标记的正上方。这有点小技巧，但我喜欢它比在长 CSS 文件的末尾进行编辑更好。我认为这可以保证我的 CSS 指令将是最后加载的，并且我将始终在文件顶部看到我的小修改。

不确定这是否有帮助，但我花了一些时间寻找要编辑的 CSS。我认为这可能是分享该发现以及我如何使用它的好地方。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-20T07:12:24.143

由于 css 已全部缩小，因此很难给出行号，但这是你的罪魁祸首；

```
@media screen and (max-width: 750px) {
   #branding {
     width: 46%
     height: auto;
   }
} 
```

删除宽度和高度属性，它看起来很好。

而且您可能希望在该屏幕尺寸下添加一个媒体查询，以删除填充`.col-width`

```
.col-width {
   padding: 0;
 } 
```

编辑：意识到我只回答了你的问题的一半。有问题的css文件是；

[http://chalupaholics.com/wp-content/w3tc/min/3b548d20.31cc2f.css](http://chalupaholics.com/wp-content/w3tc/min/3b548d20.31cc2f.css)

我不知道它是如何生成的，但我想通过一个插件将 css 编译成单个文件以减少页面请求并缩小它。我这么说是因为 css 和 JS 的添加顺序异常高，甚至在元数据之前。[在 Windows 上使用 Grep 或Astrogrep](http://astrogrep.sourceforge.net/)搜索您的安装，以在插件对其进行操作之前找到此 CSS 的来源并在那里对其进行修改。

# c++ - 基于坐标在地图中寻找对象的高效方法

> ID：12984935
> 
> 赞同：2
> 
> 时间：2012-10-20T03:16:03.780
> 
> 标签：c++, qt, data-structures, geometry, mouseevent

我正在使用 C++/Qt 构建一个编辑器，它具有点击和拖动的感觉。这种行为类似于原理图编辑器（Eagle、KiCAD 等）、Microsoft Visio 或您将对象从工具栏拖到中央编辑区域的其他程序。

我的问题是，当用户在自定义小部件内单击时，我希望能够选择框状对象的实例并对其进行操作。还会有线将盒子连接在一起。但是，我无法决定选择这些对象的有效方法。

对于如何为此进行编程，我有两个主要想法：第一个是绘制整个编辑器的小部件将简单地封装框的每个实例。另一种方法是让盒子的每个实例（在我的模型中）随身携带一个 QWidget 的实例，该实例将处理渲染盒子（这将在我的视图中......但它最终会被强烈附加到该模型）。至于连接它们的线，因为它们没有方形边界框，它们必须由包含的小部件呈现。

所以这里是我如何看待这件事的总结：

*   编辑器小部件变成一个包含小部件的容器，小部件处理它们自己的点击事件。这里的潜在问题是我不知道如何使自定义小部件变成允许单击和拖动功能的布局。
*   编辑器小部件负责所有渲染并处理鼠标点击（更简单的方法是我不必担心布局......它只是有效地选择实例，我不知道什么是最好的）。

所以，现在有了一些背景知识，对于第二种方法，我计划让每个类似盒子的实例都有一个边界矩形，并且线条由 3-4 像素宽的边界矩形段表示（它们呈 90 度角） . 我可以遍历每个框和行，但这似乎效率很低。

最大的问题：是否有某种数据结构可以保存矩形并将它们链接到小部件（或其他任何东西），然后给它两个坐标（例如鼠标坐标）并让它把我吐出边界框还是那些坐标所在的链接对象？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-21T09:09:21.960

听起来您真正的问题是关于找到实现编辑器的好方法，而不是矩形交集性能的细节。

您可能对 Qt 的[“Diagram Scene”示例项目](http://qt-project.org/doc/qt-4.8/graphicsview-diagramscene.html)感兴趣，它演示了`QGraphicsScene`API。这听起来很适合您描述的场景。（该示例的完整源代码随 Qt 一起提供。）

![在此处输入图像描述](../Images/ed8bbc214486de2b1daa88685fbc8977.png)

最好的部分是您仍然不必自己实现命中测试，因为 API 已经提供了您正在寻找的东西（例如，`QGraphicsScene::itemAt()`）。

值得注意的是，在内部，`QGraphicsScene`使用简单的迭代方法来执行命中测试。*正如其他人指出的那样，除非您的场景有很多*单独的项目，否则这不会成为严重的瓶颈。

# javascript - 无法弄清楚为什么没有传递算术参数

> ID：12984936
> 
> 赞同：0
> 
> 时间：2012-10-20T03:16:06.443
> 
> 标签：javascript

```
<html>
<head>
<title> Buttons</title>
<style type="text/css">

.intro{background-color:;}
.duction{background-color:blue;}
.function{background-color:grey;}
.equals{background-color:orange;}
</style>

</head>
<body>
<form name="calculator">
<input type="text"  name="display" length="50" width="100">
<div>
<input type= "button" value="7" class="intro" id="7" onclick="one(7)"></button>
<input type= "button" value="8" class="intro" id="8" onclick="one(8)"></button>
<input type= "button" value="9" class="intro" id="9" onclick="one(9)"></button>
<input type= "button" value="+" class="intro" id="+" onclick="one(+)"></button>
<input type= "button" value="-" class="intro" id="-" onclick="one(-)"></button>
<div>
<input type= "button" value="4" class="intro" id="4" onclick="one(4)"></button>
<input type= "button" value="5" class="intro" id="5" onclick="one(5)"></button>
<input type= "button" value="6" class="intro" id="6" onclick="one(6)"></button>
<input type= "button" value="x" class="intro" id="x" onclick="one(*)"></button>
<input type= "button" value="/" class="intro" id="/" onclick="one(/)"></button>
<div>
<input type= "button" value="1" class="intro" id="1" onclick="one(1)"></button>
<input type= "button" value="2" class="intro" id="2" onclick="one(2)"></button>
<input type= "button" value="3" class="intro" id="3" onclick="one(3)"></button>
<input type= "button" value="=" class="intro" id="=" onclick="Evaluate()"></button>
<div>
<input type= "button" value="0" class="intro" id="0" onclick="one(0)"></button>
<input type= "button" value="." class="intro" id="." onclick="one(.)"></button>
<input type= "button" value="c" class="intro" onclick="clearDigit()"></button>

<script type="text/javascript" src="C:\Users\LS\Desktop\QBJS\button.js">

</script>

</body>
</html>

var timer;
var object;
var thing;
var digit="";
var result;

function one(event)
{
   clearTimeout(timer);
   timer=setTimeout(function(){AddDigit(event);},200);

} 
```

在这个函数中，我开始使用正则表达式来检查传递给 x 的数字和算术运算符。那是我意识到我的算术运算符根本没有被传递的时候。不知道为什么！！！

```
function AddDigit(x)
{
   alert(x);
   /*if(/^\d[+-*\/$/.test(x)) 

       {document.calculator.display.value+=x;}
   else 

      */ {document.calculator.display.value+=digit + x;}
}

 function Evaluate()
{
  result=eval(document.calculator.display.value);
  document.calculator.display.value = result;
}

document.ondblclick=function(button)
{
   clearTimeout(timer);

   thing=button.target;

   if(thing.className=="intro")
      {thing.className="duction";}

   else if(thing.className=="duction")
      {thing.className="intro";}    
}

function clearDigit()
{
   document.calculator.display.value="";
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T03:21:51.520

一个问题是它`one(+)`不是有效的 Javascript。尝试这个：

```
<input type= "button" value="+" class="intro" id="+" onclick="one('+')"> 
```

其他操作员按钮也是如此。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-20T06:45:37.297

一些建议：

从有效的 HTML 开始，所有这些结束`</button>`标记都是无效的，并且表单没有结束标记。大多数 ID 值都是无效的，尽管它真的无关紧要，反正你也不需要它们。

考虑在表单上放置一个单击侦听器，然后响应分派事件的任何元素。

例如，下面是一个非常基本的计算器（它不检查构造的表达式是否有效）。请注意，显示的数学符号与 javascript 数学表达式中使用的符号不同，因此屏幕上显示的符号被映射到 javascript 符号并存储在单独的输入中（在示例中显示，但在使用时应隐藏）。

```
<form onclick="handleClick(this, event);">

  <!-- this input should be type hidden, left visible for demo -->
  <input type="text" name="store">

  <table> 
    <tr>
      <td colspan="3"><input type="text" value="" name="screen" readonly>
      <td><input type="button" value="=" name="bequal">
    <tr>
      <td><input type="button" value="7" name="b7">
      <td><input type="button" value="8" name="b8">
      <td><input type="button" value="9" name="b9">
      <td><input type="button" value="&divide;" name="bdiv">
    <tr>
      <td><input type="button" value="4" name="b4">
      <td><input type="button" value="5" name="b5">
      <td><input type="button" value="6" name="b6">
      <td><input type="button" value="&times;" name="btimes">
    <tr>
      <td><input type="button" value="1" name="b1">
      <td><input type="button" value="2" name="b2">
      <td><input type="button" value="3" name="b3">
      <td><input type="button" value="&minus;" name="bminus">
    <tr>
      <td><input type="button" value="0" name="b0">
      <td><input type="button" value="." name="bpoint">
      <td><input type="reset"  value="C" name="bclear">
      <td><input type="button" value="&plus;" name="bplus">
  </table>
</form>

<script>
function handleClick(form, evt) {

  // Stored symbol for eval is different to displayed symbol
  var buttonMap = {
    '247':'/', '215':'*', '8722':'-', '43':'+'
  }
  var el = evt.target || evt.srcElement;

  if (el.type == 'button') {
    if (el.name == 'bequal') {

      // Update display with result of evaluating expression
      form.screen.value = eval(form.store.value);

      // Update stored value
      form.store.value = form.screen.value;

    } else {
      // Update displayed expression
      form.screen.value += el.value;

      // Update expression to evaluate, map &times; to * and so on.
      form.store.value += buttonMap[el.value.charCodeAt(0)] || el.value;
    }
  }
}
</script> 
```

请注意，这只是一个演示，它需要更多的工作才能变得健壮，例如验证要评估的表达式（例如，不能按时间然后除法）并在按下下一个符号时评估每个表达式。

# php - 是否可以使用 PHP 更改 SimpleXMLElement 对象内的数据类型？

> ID：12984938
> 
> 赞同：0
> 
> 时间：2012-10-20T03:16:32.713
> 
> 标签：php, object, simplexml, type-conversion

我有这个对象

```
$data = simplexml_load_string('<xml><admin>0</admin></xml>'); 
```

其中 $data->admin = "0" `(string)`。因此，对于字符串 0，以下内容将始终返回 true

```
if($data->admin) {
    echo 'is admin';
} 
```

通过转换变量，这将正常工作

```
if((int)$data->admin) {
    echo 'is admin';
} 
```

但我仍然想知道是否可以更改对象内部的数据类型（就像在数组中这样做），所以我不必进行类型转换。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-20T03:20:34.230

不是 SimpleXML。您可以做的是改用[DOMDocument](http://php.net/manual/en/class.domdocument.php)。不推荐使用 SimpleXML。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-20T03:21:31.593

如果字符串为 '0'，它将返回 false。如果你将它转换为 int，它仍然会返回 false。) 最后逻辑表达式被转换为布尔值。所以你试图做的是无用的）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-20T15:01:21.943

你也可以试试这个）虽然我认为它不是好方法）这里最好的方法是再次比较零而不是进行类型转换。如果您想要类型转换，您可以执行以下操作。但是进行 3 次操作而不是 1 次操作并不是一个好习惯）

```
$data = simplexml_load_string('<xml><admin>0</admin></xml>');
if(strip_tags($data->admin->asXML()))
{
//is admin
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-20T03:25:03.077

在 PHP 中没有办法这样做，而不是类型转换，你可以试试这个解决方案

```
if ($data->admin != 0){ 
    //is admin
} 
```

# joomla - 安装新扩展时，manifest.xml 中 installscript.php 和 sql 文件之间的安装优先级是多少？

> ID：12984947
> 
> 赞同：2
> 
> 时间：2012-10-20T03:18:21.670
> 
> 标签：joomla, joomla2.5

您好我正在开发一个组件，我需要知道首先执行哪个组件，在 manifest.xml 或 install_data.sql 中声明为安装脚本的 installscript.php ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T15:56:40.643

> 因此，根据该文档，在 Joomla 安装数据库脚本完成后执行 Install 方法。- 你

# c - 为什么strdup被认为是邪恶的

> ID：12984948
> 
> 赞同：30
> 
> 时间：2012-10-20T03:18:58.913
> 
> 标签：c, c-strings

我看过一些海报说这`strdup`是邪恶的。对此是否有共识？我使用它时没有任何内疚感，并且看不出它比使用`malloc`/更糟糕的原因`memcpy`。

我能想到的唯一可能赢得`strdup`声誉的是调用者可能会滥用它（例如，没有意识到他们必须释放返回的内存；尝试将 strcat 放到 strdup 字符串的末尾）。但是，malloc'ed 字符串也不是没有被滥用的可能性。

* * *

感谢那些认为这个问题没有帮助的人的回复和道歉（投票结束）。总结这些回复，似乎没有普遍的感觉`strdup`本身就是邪恶的，而是普遍认为它可以像 C 的许多其他部分一样被不当或不安全地使用。

确实没有“正确”的答案，但为了接受一个，我接受了@nneoneo 的答案——它同样可能是@R.. 的答案。

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2012-10-20T03:25:15.327

我能想到的两个原因：

1.  它不是严格的 ANSI C，而是 POSIX。因此，一些编译器（例如 MSVC）不鼓励使用（MSVC 更喜欢`_strdup`），并且*从技术上讲*`strdup`，C 标准可以用不同的语义定义自己的，因为`str`它是一个保留的前缀。因此，它的使用存在一些潜在的可移植性问题。
2.  它隐藏了它的内存分配。大多数其他`str`函数不分配内存，因此用户可能会被误导（如您所说）相信返回的字符串不需要被释放。

但是，除此之外，我认为谨慎使用`strdup`是合理的，因为它可以减少代码重复并为常见的习惯用法提供了一个很好的实现（例如`strdup("constant string")`获取一个可变的、可返回的文本字符串副本）。

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2012-10-20T23:24:06.517

我的回答是相当支持的`strdup`，它并不比 C 中的任何其他函数差。

1.  POSIX 是一种*标准*，`strdup`如果可移植性成为问题，实施起来并不难。

2.  `strdup`如果有人花一点时间阅读手册页并了解其工作原理，是否释放分配的内存应该不是问题`strdup`。如果一个人不了解一个函数是如何工作的，那么这个人很可能会搞砸一些事情，这适用于*任何*函数，而不仅仅是`strdup`.

3.  在 C 中，内存和大多数其他东西都由程序员管理，因此 strdup 并不比忘记*释放* `malloc`内存、未能为*空终止*字符串、使用不正确的格式字符串`scanf`（并调用未定义的行为）、访问*悬空*指针等更糟糕.

（我真的很想将此作为评论发布，但无法添加一条评论。因此，将其发布为答案）。

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2012-10-20T03:26:42.413

我还没有真正听说过`strdup`被描述为邪恶，但有些人不喜欢它的一些可能原因：

1.  它不是标准的 C（但在 POSIX 中）。但是我觉得这个原因很愚蠢，因为它几乎是一个添加到缺少它的系统的单行函数。
2.  盲目地在各处复制字符串，而不是在可能的情况下就地使用它们会浪费时间和内存，并将失败案例引入可能没有失败的代码中。
3.  当您确实需要一个字符串的副本时，您实际上可能需要更多空间来修改或构建它，`strdup`但并没有给您。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2012-10-20T05:05:54.623

我认为对 strdup 的大部分担忧来自于关于缓冲区溢出和格式不正确的字符串的安全问题。如果将非空终止字符串传递给 strdup，它可以分配一个未定义长度的字符串。我不知道这是否可以专门用于攻击，但总的来说，仅使用具有最大长度的字符串函数而不是单独依赖空字符是一种很好的安全编码实践。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-10-20T04:13:39.900

很多人显然不知道，但我个人认为`strdup`邪恶有几个原因，

*   主要的是它隐藏了分配。其他`str*`功能和大多数其他标准功能都不需要`free`事后处理，所以`strdup`看起来很无害，你可以忘记在它之后进行清理。dmckee 建议将其添加到您需要清理的功能的心理列表中，但为什么呢？与将两条中等长度的线减少到一条短线相比，我认为没有太大的优势。

*   它总是在堆上分配内存，并且使用 C99（是 99？）VLA，您还有另一个理由只使用`strcpy`（您甚至不需要`malloc`）。你不能总是这样做，但当你可以的时候，你应该这样做。

*   它不是 ISO 标准的一部分（但它是 POSIX 标准的一部分，感谢 Wiz），但这确实是一个小问题，因为 R.. 提到它可以很容易地添加。如果您编写可移植程序，我不确定您如何判断它是否已经定义...

这些当然是我自己的一些原因，没有其他人的。要回答你的问题，我知道没有共识。

如果您只是为自己编写程序并且您没有发现`strdup`任何问题，那么没有理由不使用它，而不是您正在编写一个可供许多不同技能水平和年龄的人阅读的程序。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2016-05-30T03:55:28.877

我不喜欢 strdup 的原因是没有自然对的资源分配。让我们尝试一个愚蠢的游戏：我说`malloc`，你说`free`。我说`open`你说`close`。我说`create`你说`destroy`。我说`strdup`你说……？

实际上，答案当然`strdup`是`free`，并且该函数的名称应该更好地`malloc_and_strcpy`说明这一点。但是许多 C 程序员并不这样想，并且忘记了`strdup`需要它的相反或“结束”`free`来解除分配。

根据我的经验，在调用`strdup`. 这是一个奇函数，它结合`strlen`了`malloc`和`strcpy`。

# php - 如何完成 SRC 标签的 url

> ID：12984953
> 
> 赞同：0
> 
> 时间：2012-10-20T03:20:55.020
> 
> 标签：php, image, url

我正在尝试使用 php 从 URL 获取图像。我使用此链接 [从字符串中获取所有图像 url](https://stackoverflow.com/questions/1513418/get-all-images-url-from-string?rq=1)

我让它工作了，但是当我测试它时，我遇到了 URL，在哪里

URL`www.myurl.com/pianos/new/steinway.html?kID=243`可以包含图像`<img src="/images/SteinwayGrand.jpg">`

或者`<img src="http://www.myurl.com/images/SteinwayGrand.jpg">`

我正在尝试解决这两种情况，并使脚本正常工作，即在我的页面上显示图像。谁能建议一些方法来覆盖这种标签？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T05:46:02.673

从这篇文章中得到了答案：

[使用 PHP 抓取完整的图像 src](https://stackoverflow.com/questions/1162191/scrape-full-image-src-with-php)

稍作修改以匹配我的应用程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-20T03:29:56.580

使用 php，您可以使用 str_replace 将 ../ 更改为 /，如下所示：

```
$new_url = str_replace("../", "/", $url); 
```

其中 str_replace(needle, haystack, input_String);

如果没有，你可以找到一种方法在 js 中做同样的事情。

添加的信息你可以使用它：

$new_url = str_replace("../", "http://www.website.com/", $url);

```
this will replace any ../ into http://www.website.com/ 
```

# firefox - 禁用插件时删除 XUL 元素，使用 Firefox 插件 SDK

> ID：12984958
> 
> 赞同：2
> 
> 时间：2012-10-20T03:21:49.777
> 
> 标签：firefox, firefox-addon, firefox-addon-sdk

我也尝试在这里搜索谷歌搜索。但似乎我没有运气。

我正在使用 Addon-SDK 创建一个小的 firefox 插件。除了 UI 元素，一切看起来都很酷。真的很难实施。

我已经阅读了在此处找到的工具栏按钮[https://github.com/mozilla/addon-sdk/wiki/Community-](https://github.com/mozilla/addon-sdk/wiki/Community-developed-modules) Developed-modules 和 Mozilla XUL，并决定通过跟踪浏览器窗口来创建我自己的工具栏按钮，使用 WindowUtils。 onTrack() 和操作浏览器 XUL DOM；

它几乎完成了，但是当我尝试禁用并重新启用我的附加组件时。按钮没有消失，那里有 2 个按钮。

这太糟糕了，你能告诉我如何在插件被禁用或删除时销毁或删除该按钮以及其他 XUL 元素。我们正在使用 addon-SDK，它是无需重启的扩展。

我的另一个问题是在操作 BrowserXULDom WindowUtils 或 WindowMediator 时我们应该使用什么？或者其他，哪个更快更方便？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T18:31:18.387

最简单的方法是使用 Erik Vold 的工具栏库：

[https://github.com/voldsoftware/toolbarbutton-jplib/blob/master/lib/toolbarbutton.js](https://github.com/voldsoftware/toolbarbutton-jplib/blob/master/lib/toolbarbutton.js)

如果您决定自己编写，我建议您查看 Erik 的代码，因为它确实处理了卸载按钮。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-21T17:38:59.363

我找到了解决方案！

我们可以在我们的附加组件上监听禁用或卸载事件并在那时删除 XUL 元素。如：

```
exports.onUnload = function(reason) {
  // remove code here
} 
```

根据附加 SDK 文档，附加组件卸载事件存在一些错误，但我认为很快就会解决。

SDK里面有一个卸载模块，我还没试过。希望有人分享一下。

上面的解决方案对我来说很有效，希望这对你也有帮助。谢谢！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-07-01T14:43:48.833

Firefox 插件 sdk 有一个 bug，所以如果你想检测插件的卸载。您必须使用“禁用”而不是“卸载”

```
exports.onUnload = function (reason) {
         if (reason==='disable') {
            //remove code here
         }
    }; 
```

# asp.net - MSDeploy.exe 可以以管理员身份连接，但不能以任何其他 Windows 帐户连接

> ID：12984960
> 
> 赞同：15
> 
> 时间：2012-10-20T03:21:52.177
> 
> 标签：asp.net, iis, iis-7.5, windows-server-2008, webdeploy

我正在将 MSDeploy 集成到我的构建过程中，并且在进行身份验证时遇到了问题。以下命令工作正常：

```
msdeploy -verb:sync -source:appHostConfig="KitchenPC",computerName=192.168.0.3,userName=Administrator,password=secret -dest:package=c:\DeployTest\KPC.zip 
```

但是，这不起作用：

```
msdeploy -verb:sync -source:appHostConfig="KitchenPC",computerName=192.168.0.3,userName=kpcpublish,password=secret -dest:package=c:\DeployTest\KPC.zip 
```

并产生错误：

```
Error Code: ERROR_USER_NOT_ADMIN
More Information: Connected to '192.168.0.11' using the Web Deployment Agent Service, but could not authorize. Make sure you are an administ
rator on '192.168.0.11'.  Learn more at: http://go.microsoft.com/fwlink/?LinkId=221672#ERROR_USER_NOT_ADMIN.
Error: The remote server returned an error: (401) Unauthorized.
Error count: 1. 
```

我已按照上面链接中的说明以及[我能找到的任何其他文档进行](http://www.iis.net/learn/install/installing-publishing-technologies/installing-and-configuring-web-deploy)操作，它们几乎都说同样的话：

1.  我创建了一个名为*kpcpublish的帐户*
2.  我将此帐户添加到名为*MSDepSvcUsers*的组中- 哎呀，我什至将该帐户添加到管理员
3.  我右键单击该站点并选择**Deploy->Configure Web Deploy Publishing**并将 kpcpublish 添加到列表中。它说：

.

> ```
> Publish enabled for 'SERVER\kpcpublish' Granted 'SERVER\kpcpublish'
> full control on 'C:\Website' Successfully created settings file
> 'C:\Users\Administrator\Desktop\SERVER_kpcpublish_KitchenPC.PublishSettings' 
> ```

我*必须*缺少一些步骤，但我无法弄清楚可能是什么。

**更新：**

使用该`computerName`属性的完整 HTTP 路径，我收到错误：

> 错误代码：ERROR_DESTINATION_NOT_REACHABLE 更多信息：无法连接到远程计算机（“192.168.0.3”）。在远程计算机上，确保安装了 Web Deploy 并且启动了所需的进程（“Web 管理服务”）。了解更多信息：http: [//go.microsoft.com/fwlink/](http://go.microsoft.com/fwlink/?LinkId=221672#ERROR_DES) ?LinkId =221672#ERROR_DES TINATION_NOT_REACHABLE。错误：无法连接到远程服务器错误：连接尝试失败，因为连接方在一段时间后没有正确响应，或建立连接失败，因为连接的主机没有响应 192.168.0.3:8192 错误计数：1 .

我已经检查过，Web 管理服务确实在运行。

**另一个更新：**

我已经完全铺平了系统并从头开始重新设置。我什么都没做，只是安装了 IIS 角色，并确保检查管理工具下的“管理服务”，这是 WMSVC 运行所必需的。然后我安装了 Web PI，并安装了“托管服务提供商的推荐配置”，它将安装 Web Deploy 3.0。但是，我确实注意到安装它时出现了错误（我相信我上次也遇到了这个错误）。看起来像：

![在此处输入图像描述](../Images/d268807a1d4639d62c22e09b52edf94c.png)

我还在[这里](http://pastie.org/5089988)附加了日志文件。

然后我尝试手动安装 Web Deploy 3.0，但是它说它已经安装了。[接下来，我直接从http://www.iis.net/download/webdeploy](http://www.iis.net/download/webdeploy)下载了 MSI并在“修复”模式下运行它。这似乎奏效了。我还注意到 WMSVC 服务已启动并正在运行。所以这看起来不错。

尽管如此，MSDeploy 将无法连接。我认为这可能是某种防火墙问题，所以我在本地运行它。我尝试使用 HTTPS 和 HTTP 进行连接。HTTPS 给我一个错误，HTTP 只是在 2-3 分钟后超时。

**HTTPS：**

```
msdeploy -verb:sync -source:appHostConfig="Default Web Site",computerName=https://STAGING:8172/msdeploy.axd,userName=Administrator,password=Khorf123 -dest:package=c:\DeleteMe.zip
Info: Using ID 'f3a54096-adc4-4f54-9e4f-ad8fde12edb6' for connections to the remote server.
Error Code: ERROR_CERTIFICATE_VALIDATION_FAILED
More Information: Connected to the remote computer ("staging") using the specified process ("Web Management Service"), but could not verify the server's certifi
cate. If you trust the server, connect again and allow untrusted certificates.
Learn more at: http://go.microsoft.com/fwlink/?LinkId=221672#ERROR_CERTIFICATE_VALIDATION_FAILED.
Error: The underlying connection was closed: Could not establish trust relationship for the SSL/TLS secure channel.
Error: The remote certificate is invalid according to the validation procedure.
Error count: 1. 
```

**HTTP：**

```
msdeploy -verb:sync -source:appHostConfig="Default Web Site",computerName=http://STAGING:8172/msdeploy.axd,userName=Administrator,password=Khorf123 -dest:package=c:\DeleteMe.zip
Info: Using ID 'ebee66f0-08e5-4d9d-98ea-0c2e59784895' for connections to the remote server.
Error: Could not complete the request to remote agent URL 'http://staging:8172/msdeploy.axd'.
Error: The operation has timed out
Error count: 1. 
```

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-10-20T03:42:25.410

（**更新于 2016-03-07** - 注意：非管理员部署也需要`?site=IIS_SITE_NAME`after `msdeploy.axd`，否则连接被视为全局连接并需要管理员访问权限）

不知道最初是如何错过的，但你的问题是`computerName`参数。仅在使用 WMSVC 时才支持非管理员部署，您需要为其指定完整 URL。

尝试以下

```
msdeploy -verb:sync ^
  -source:appHostConfig="KitchenPC",computerName=https://192.168.0.3:8172/MsDeploy.axd,userName=kpcpublish,password=secret,authType=Basic ^ 
  -dest:package=c:\DeployTest\KPC.zip 
```

[从文档](http://technet.microsoft.com/en-us/library/dd569001%28v=ws.10%29.aspx)：

> 计算机名称将转换为默认的 Web 部署 URL。例如，**computerName=Server1**将变为**[http://Server1/MsDeployAgentService](http://Server1/MsDeployAgentService)**。如果远程服务使用自定义端口或 URL 运行，则必须指定完整 URL

并[根据安装说明](http://www.iis.net/learn/install/installing-publishing-technologies/installing-and-configuring-web-deploy)：

> 如果未安装 Web 管理服务，MSI 将不会安装 Web 管理服务处理程序组件；处理程序组件对于非管理员部署是必需的

（我找不到更明确的规范来源将 WMSVC 描述为非管理员部署的要求）

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2012-10-20T19:15:56.053

**弄清楚了！**

因此，似乎（至少在默认情况下）WMSVC 只侦听 HTTPS，而 HTTP 只会超时。但是，由于我的证书是自签名的，我不得不使用*-allowUntrusted*命令行选项。

这*差不多*够了。我还必须像 Richard 最初建议的那样指定*authType=Basic 。*因此，总而言之，这是实际可以工作的 MSDeploy 命令行：

```
msdeploy -verb:sync -source:appHostConfig="Default Web Site",computerName=https://192.168.0.3:8172/msdeploy.axd,authType=Basic,userName=Publish,password=secret -dest:package=c:\DeployTest\KPC.zip -allowUntrusted 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-11-07T19:49:36.097

配置 Web 部署后，我的服务器[如下](http://www.orcsweb.com/blog/gabe/how-to-install-webdeploy-on-windows-server-2012/)。我继续收到[HTTP 404](https://support.microsoft.com/en-gb/kb/943891)连接失败。五月份对我有用的是以下额外的努力......

1.  卸载存在的所有以前版本的 Web Deploy。我什至不知道它们的存在。但是，以前的版本似乎与完成与最新 Web 部署服务的连接相冲突。较新的版本不要卸载他们的前辈。在最后一部分，我得到了[`HTTP 401.7 - File Extension Denied`](https://support.microsoft.com/en-gb/kb/943891).
2.  为了更好地衡量，对当前版本的 Web Deploy 进行了修复，目前`Microsoft Web Deploy 3.6`
3.  为了更好地衡量，重新创建并导入我的 Visual Studio 2013 部署配置文件...
    1.  使用面板中目标网站的上下文菜单选项中可用`publish settings file`的`Configure Web Deploy Publishing`对话框重新创建。（注意，当您按对话框条目中指定完整路径的文件时，将重新创建， ） `Deploy``IIS Manager``Connections``publish settings file``Setup``Specify a location to save the publish settings file`
    2.  复制或以其他方式使`publish settings file`Visual Studio 可用，然后`Publish`从项目的上下文菜单中选择，**通过导入`publish settings file`**.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-10-24T10:16:55.117

尝试在目标机器上重新启动 wmsvc 服务

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-07-13T17:45:15.197

如上所述，请确保您通过 HTTPS 进行连接。如果您尝试以管理员身份连接，但不使用 SSL，则会收到以下错误：

> 错误代码：ERROR_USER_NOT_ADMIN
> 
> 更多信息：使用 Web 部署代理服务连接到“主机”，但无法授权。确保您是“主机”的管理员。

（其中“主机”是您的服务器名称）

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-04-13T22:59:00.313

对我来说，问题是我的密码已过期......我在注销时注意到了它，然后尝试通过远程桌面重新登录。

# java - 从网站提取数据时出现异常

> ID：12984961
> 
> 赞同：1
> 
> 时间：2012-10-20T03:21:54.260
> 
> 标签：java, exception, html-parsing, jsoup

我正在使用 Jsoup 从网站中按邮政编码提取数据。邮政编码是从文本文件中读取的，结果会写入控制台。我有大约 1500 个邮政编码。程序抛出两种异常：

```
org.jsoup.HttpStatusException: HTTP error fetching URL. Status=500, URL=http://www.moving.com/real-estate/city-profile/...

java.net.SocketTimeoutException: Read timed out 
```

我认为解决方案是当时只读取少量数据。因此，我使用计数器从文本文件中计算 200 个邮政编码，并在获得 200 个邮政编码的数据后停止程序 5 分钟。正如我所说，我仍然有例外。到目前为止，当我看到异常时，我复制粘贴了可用数据，然后我继续使用以下邮政编码。但我想不间断地读取所有数据。这可能吗？任何提示将不胜感激。先感谢您！

这是我读取所有数据的代码：

```
 while (br.ready())
        {
            count++;

            String s = br.readLine();
            String str="http://www.moving.com/real-estate/city-profile/results.asp?Zip="+s; 
            Document doc = Jsoup.connect(str).get();

            for (Element table : doc.select("table.DataTbl"))
            {
                for (Element row : table.select("tr")) 
                {
                    Elements tds = row.select("td");
                    if (tds.size() > 1)
                    {
                        if (tds.get(0).text().contains("Per capita income"))
                            System.out.println(s+","+tds.get(2).text());
                    }
                }
            }
            if(count%200==0)
            {
                Thread.sleep(300000);
                System.out.println("Stoped for 5 minutes");
            }
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T03:35:41.007

更新此行`Document doc = Jsoup.connect(str).get();`以将超时设置为：

```
 Connection conn = Jsoup.connect(str);
        conn.timeout(300000); //5 minutes
        Document doc = conn.get(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-20T03:32:36.113

连接连接 = Jsoup.connect(str); conn.timeout(0); /无限超时

> 设置请求超时（连接和读取）。如果发生超时，将抛出 IOException。默认超时为 3 秒（3000 毫秒）。**超时为零被视为无限超时。**
> 
> **参数：**
> 
> ```
> millis - number of milliseconds before timing out connects or reads. 
> ```
> 
> **回报：**
> 
> ```
> this Connection, for chaining 
> ```

[来源：jsoup API](http://jsoup.org/apidocs/org/jsoup/Connection.html)

将超时设置为零。这样你就不用停5分钟了。

# android - Android (Xamarin, Mono for Android) - Web 服务在模拟器中工作，但在设备上不工作

> ID：12984964
> 
> 赞同：2
> 
> 时间：2012-10-20T03:22:53.373
> 
> 标签：android, service, xamarin.android, content-type, xamarin

我希望我缺少的是一些基本的东西。我创建了一个 XML Web 服务，我可以使用 Android 模拟器成功调用它。但是，当我部署应用程序时，相同的 Web 服务（我一直在测试的方法实际上返回“Hello world。”这是由 Visual Studio 创建的默认 Web 服务。）失败。消息是“响应中不支持 Content-Type：'text/html; charset=utf-8.'”

我认为这意味着响应没有以 XML 格式返回，这显然是一个问题。但是为什么在模拟器和空中会有不同呢？这是相同的程序/服务！

无论如何，如果有人知道解决方法，或者可以猜到我做错了什么，将不胜感激。感谢您的时间。

# command-line - 如何将命令行日志保存到文本文件？

> ID：12984966
> 
> 赞同：0
> 
> 时间：2012-10-20T03:23:40.113
> 
> 标签：command-line

我有几个 .cmd 文件，我一个接一个地运行。这些可以是几千行文本。我想将输出保存到文本文件，但我不知道如何。我尝试了 > 和 >> 运算符，但文本文件中没有生成任何内容。

有人知道我在做什么错吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T03:28:13.990

如果程序将它们的输出发送到 stderr，您需要将 stderr 重定向到 stdout 以便在您的日志文件中捕获它。即

```
cmd >> cmd.log 2>&1 
```

# javascript - 使用 JSNI 调用带参数的 javascript 函数

> ID：12984968
> 
> 赞同：3
> 
> 时间：2012-10-20T03:24:01.080
> 
> 标签：javascript, gwt, jsni, mixpanel

我正在尝试将 Mixpanel 与 GWT 集成，但在调用具有属性和一个值的事件时遇到问题。

我跟踪一个简单事件的函数（没有值）：

```
 public native void trackEvent(String eventName)/*-{
        $wnd.mixpanel.track(eventName);
    }-*/; 
```

有用。

但是当我想添加一些属性和值时，它不能正常工作：

```
public native void trackComplexEvent(String eventName, String property, 
            String value)/*-{
    $wnd.mixpanel.track(eventName, {property:value});

}-*/; 
```

我有两个问题：

1）Mixpanel 说属性名称是：“属性”（是的，我传递的变量的名称，而不是值）。

2) Mixpanel 说值是：undefined

mixpanel web 的一个例子是：

```
mixpanel.track("Video Play", {"age": 13, "gender": "male"}); 
```

所以，我想问题是我打错电话或使用错误类型的参数。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-20T10:57:52.670

你的问题是，当你传递你创建属性对象时，你不会创建一个参数，取自你的`property`名字，而是一个名为的属性`property`。如果你调试你的代码，你可以检查一个参数`property`是否被传递给你的`mixpanel.track`函数。

为了做你想做的事，你必须使用另一种语法。

```
public native void trackComplexEvent(String eventName, String property,
        String value)/*-{
    //create the property object you want to pass
    var propertyPassed = {}     
    // set the value you want to pass on the propertyPassed object
    propertyPassed[property] = value;

    //call your function with the argumetn you want to pass     
    $wnd.mixpanel.track(eventName, propertyPassed);
}-*/; 
```

我通过在我的网站上创建一个 JavaScript 函数来测试您的代码：

```
window.mixpanel = {
            track : function(eventName, props) {
                alert(props.age);
            }
        } 
```

并用

```
 trackComplexEvent("hallo", "age", "13"); 
```

警报是`'13'`

BR，斯特凡

# database - Postgresql 查询优化 不允许内/外连接

> ID：12984970
> 
> 赞同：6
> 
> 时间：2012-10-20T03:24:24.697
> 
> 标签：database, postgresql, join, query-optimization, postgresql-performance

我得到了这个查询来优化 POSTGRESQL 9.2：

```
SELECT C.name, COUNT(DISTINCT I.id) AS NumItems, COUNT(B.id)
FROM Categories C INNER JOIN Items I ON(C.id = I.category) 
                  INNER JOIN Bids B ON (I.id = B.item_id)
GROUP BY C.name 
```

作为我学校作业的一部分。

我在各个表上创建了这些索引：`items(category)`-->2ndary b+tree、`bids(item_id)`-->2ndary b+tree 和`categories(id)`-->primary index here，

奇怪的是，PostgreSQL 正在对我的 Items、Categories 和 Bids 表进行顺序扫描，当我设置 时`enable_seqscan=off`，索引搜索结果比下面的结果更可怕。

当我在 PostgreSQL 中运行解释时，结果如下：请不要删除缩进，因为它们很重要！

```
GroupAggregate  (cost=119575.55..125576.11 rows=20 width=23) (actual time=6912.523..9459.431 rows=20 loops=1)
  Buffers: shared hit=30 read=12306, temp read=6600 written=6598
  ->  Sort  (cost=119575.55..121075.64 rows=600036 width=23) (actual time=6817.015..8031.285 rows=600036 loops=1)
        Sort Key: c.name
        Sort Method: external merge  Disk: 20160kB
        Buffers: shared hit=30 read=12306, temp read=6274 written=6272
        ->  Hash Join  (cost=9416.95..37376.03 rows=600036 width=23) (actual time=407.974..3322.253 rows=600036 loops=1)
              Hash Cond: (b.item_id = i.id)
              Buffers: shared hit=30 read=12306, temp read=994 written=992
              ->  Seq Scan on bids b  (cost=0.00..11001.36 rows=600036 width=8) (actual time=0.009..870.898 rows=600036 loops=1)
                    Buffers: shared hit=2 read=4999
              ->  Hash  (cost=8522.95..8522.95 rows=50000 width=19) (actual time=407.784..407.784 rows=50000 loops=1)
                    Buckets: 4096  Batches: 2  Memory Usage: 989kB
                    Buffers: shared hit=28 read=7307, temp written=111
                    ->  Hash Join  (cost=1.45..8522.95 rows=50000 width=19) (actual time=0.082..313.211 rows=50000 loops=1)
                          Hash Cond: (i.category = c.id)
                          Buffers: shared hit=28 read=7307
                          ->  Seq Scan on items i  (cost=0.00..7834.00 rows=50000 width=8) (actual time=0.004..144.554 rows=50000 loops=1)
                                Buffers: shared hit=27 read=7307
                          ->  Hash  (cost=1.20..1.20 rows=20 width=19) (actual time=0.062..0.062 rows=20 loops=1)
                                Buckets: 1024  Batches: 1  Memory Usage: 1kB
                                Buffers: shared hit=1
                                ->  Seq Scan on categories c  (cost=0.00..1.20 rows=20 width=19) (actual time=0.004..0.028 rows=20 loops=1)
                                      Buffers: shared hit=1
Total runtime: 9473.257 ms 
```

[请在 explain.depesz.com 上](http://explain.depesz.com/s/tDa)查看此计划。

我只想知道为什么会发生这种情况，即与顺序扫描相比，为什么索引会使查询变得非常慢。

编辑：我想我已经设法通过阅读 postgresql 文档发现了一些东西。Postgresql 决定对某些表（例如 bids 和 items）进行 seq 扫描，因为它预测它必须检索表中的每一行（比较实际时间之前括号中的行数和实际时间部分中的行数）。顺序扫描更适合检索所有行。好吧，在那部分什么都做不了。

我已经创建了额外的索引`categories(name)`，下面的结果就是我所拥有的。它以某种方式得到了改进，但现在哈希连接被嵌套循环所取代。为什么有任何线索？

```
GroupAggregate  (cost=0.00..119552.02 rows=20 width=23) (actual time=617.330..7725.314 rows=20 loops=1)
  Buffers: shared hit=178582 read=37473 written=14, temp read=2435 written=436
  ->  Nested Loop  (cost=0.00..115051.55 rows=600036 width=23) (actual time=0.120..6186.496 rows=600036 loops=1)
        Buffers: shared hit=178582 read=37473 written=14, temp read=2109 written=110
        ->  Nested Loop  (cost=0.00..26891.55 rows=50000 width=19) (actual time=0.066..2827.955 rows=50000 loops=1)
              Join Filter: (c.id = i.category)
              Rows Removed by Join Filter: 950000
              Buffers: shared hit=2 read=7334 written=1, temp read=2109 written=110
              ->  Index Scan using categories_name_idx on categories c  (cost=0.00..12.55 rows=20 width=19) (actual time=0.039..0.146 rows=20 loops=1)
                    Buffers: shared hit=1 read=1
              ->  Materialize  (cost=0.00..8280.00 rows=50000 width=8) (actual time=0.014..76.908 rows=50000 loops=20)
                    Buffers: shared hit=1 read=7333 written=1, temp read=2109 written=110
                    ->  Seq Scan on items i  (cost=0.00..7834.00 rows=50000 width=8) (actual time=0.007..170.464 rows=50000 loops=1)
                          Buffers: shared hit=1 read=7333 written=1
        ->  Index Scan using bid_itemid_idx on bids b  (cost=0.00..1.60 rows=16 width=8) (actual time=0.016..0.036 rows=12 loops=50000)
              Index Cond: (item_id = i.id)
              Buffers: shared hit=178580 read=30139 written=13
Total runtime: 7726.392 ms 
```

看看[这里](http://explain.depesz.com/s/bVJ)的计划是否更好。

通过在 category(id) 和`items(category)`. Postgresql 使用这两个索引来获得 114062.92 成本。但是，现在 postgresql 正在与我玩游戏，不使用索引！为什么这么马车？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T09:20:46.597

`EXPLAIN`感谢您在未经询问的情况下发布输出，以及`EXPLAIN (BUFFERS, ANALYZE)`.

查询性能问题的一个重要部分可能是外部排序计划节点，该节点正在使用临时文件进行磁盘合并排序：

```
Sort Method: external merge Disk: 20160kB 
```

您可以通过设置在内存中进行这种排序：

```
SET work_mem = '50MB'; 
```

在运行查询之前。此设置也可以按用户、每个数据库或在`postgresql.conf`.

由于查询当前是结构化的，我不相信添加索引会带来很多好处。它需要读取和连接所有三个表中的所有行，而哈希连接可能是最快的方法。

我怀疑还有其他方法可以表达将使用完全不同且更有效的执行策略的查询，但是我对它们可能是*什么*有一个大脑褪色并且不想花时间来制作虚拟表来玩。更多`work_mem`应该可以显着改善查询。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T15:00:27.920

从查询计划我们可以看到：
1\. 结果和类别有 20 条记录
2\. 具有类别的项目 是顺序扫描中所有项目数量的 5%
"Rows Removed by Join Filter: 950000" "rows=50000" 3\. 投标匹配是 rows=600036 （你能给我们出价的总数吗？） 4\. 每个类别都有出价吗？

所以我们想在项目（类别）和出价（项目ID）上使用索引。我们还希望排序适合内存。

```
 select  
   (select name from Categories where id = foo.category) as name, 
   count(foo.id),  
   sum(foo.bids_count)  
 from 
   (select 
      id,  
      category,  
      (select count(item_id) from Bids where item_id = i.id) as bids_count  
    from Items i  
    where category in (select id from Categories)  
      and exists (select 1 from Bids where item_id = i.id)  
   ) as foo  
  group by foo.category  
  order by name 
```

当然，您必须记住，它严格取决于第 1 点和第 2 点中的数据。

如果 4 为真，您可以从查询中删除存在的部分。

有什么建议或想法吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-09T04:42:02.510

请注意，如果 的大小`bids`系统地且显着大于`items`则实际上遍历`items`两次（特别是如果`items`适合 RAM）可能比从连接结果中挑选那些不同的项目 ID 更便宜（即使您在内存中排序） . 此外，根据 Postgres 管道碰巧从重复表中提取数据的方式，即使在不利的负载或内存条件下，也可能会受到有限的惩罚（这将是一个很好的问题，您可以在[pgsql-general](http://archives.postgresql.org/pgsql-general/)上提出。）采取：

```
SELECT name, IC.cnt, BC.cnt FROM
Categories C,
( SELECT category, count(1) cnt from Items I GROUP BY category ) IC,
( SELECT category, count(1) cnt from Bids B INNER JOIN Items I ON (I.id = B.item_id) GROUP BY category ) BC
WHERE IC.category=C.id AND BC.category=id; 
```

便宜多少？至少 4 倍给定足够的缓存，即 610 毫秒与 2500 毫秒（内存中排序），有 20 个类别、5 万个项目和 60 万个出价，并且在我的机器上刷新文件系统缓存后仍然比 2 倍快。

请注意，以上内容不能直接替代您的原始查询；对于一个它假设类别 ID 和名称之间存在 1:1 映射（这可能是一个非常合理的假设；如果不是，简单地`SUM(BC.cnt)`和`SUM(IC.cnt)`你一样`GROUP BY name`），**但更重要**的是，每个类别的项目计数包括项目没有出价，不像你原来的`INNER JOIN`。如果只需要投标项目计数，您可以`WHERE EXISTS (SELECT 1 FROM Bids B where item_id=I.id)`在 IC 子查询中添加；这也将遍历`Bids`第二次（在我的情况下，这对现有的 ~600ms 计划增加了 ~200ms 的惩罚，仍然远低于 2400ms。）

# facebook-graph-api - 怎么发照片。iOS Facebook SDK 3.1

> ID：12984976
> 
> 赞同：10
> 
> 时间：2012-10-20T03:25:41.327
> 
> 标签：facebook-graph-api, http-post, facebook-ios-sdk

我需要在我的墙上发布一张照片。图片是在我的 iPad 应用程序中生成的。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-10-20T03:25:41.327

这是我发现的最简单的方法

```
- (void) postImageToFB:(UIImage*)image
{
    NSData* imageData = UIImageJPEGRepresentation(image, 90);    
    NSMutableDictionary * params = [NSMutableDictionary dictionaryWithObjectsAndKeys:
                                    @"This is my drawing!", @"message",
                                    imageData, @"source",
                                    nil];

    [FBRequestConnection startWithGraphPath:@"me/photos"
                                 parameters:params
                                 HTTPMethod:@"POST"
                          completionHandler:^(FBRequestConnection *connection, id result, NSError *error) {

                          }];
} 
```

如果您想在朋友的墙上发帖，请更改`@"me/photos"`为`@"[friendID]/photos"`

然后，请求发布和调用方法的权限

```
if ([FBSession.activeSession.permissions indexOfObject:@"publish_stream"] == NSNotFound)
{
    // No permissions found in session, ask for it
    [FBSession.activeSession reauthorizeWithPublishPermissions:[NSArray arrayWithObject:@"publish_stream"]
                                               defaultAudience:FBSessionDefaultAudienceFriends
                                             completionHandler:^(FBSession *session, NSError *error)
     {
         // If permissions granted, publish the story
         if (!error) [self postImageToFB:currentDrawing];
     }];
}
// If permissions present, publish the story
else [self postImageToFB:currentDrawing]; 
```

将创建一个“[App Name] Photos”相册（如果不存在）

它对我有用！

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-23T08:13:02.363

对于 iOS 4.3 和 UI 看起来像 iOS 6.0，我想你想要这样的东西：[IOS sharing framework for twitter, facebook, flicr, tumblr](https://stackoverflow.com/questions/9825548/ios-sharing-framework-for-twitter-facebook-flicr-tumblr/14474863#14474863)

# javascript - 使用 jQuery.ajax 时如何限制/指定 json 响应

> ID：12984983
> 
> 赞同：7
> 
> 时间：2012-10-20T03:27:59.417
> 
> 标签：javascript, jquery, ajax

所以我最近才开始使用 ajax 和 jQuery。我想知道是否可以限制或指定您想要从响应中返回的内容。

所以说我有以下，我只想得到前 3 个人或 100 个人中的最后 3 个人。

```
$.ajax({
   type: "GET",
   url: "/people"
   dataType: "json",
   success: function(data) {
      // Do some awesome stuff.
   }
}); 
```

现在，我知道您可以传递和可选数据对象。这个数据对象可以用来限制或指定我想要的响应吗？

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-20T03:34:52.553

您应该在服务器端进行过滤。传递参数使用`data`。

```
$.ajax({
   type: "GET",
   url: "/people",
   data: {limit: 3, order: 'desc'}, 
   dataType: "json",
   success: function(data) {
      // Do some awesome stuff.
   }
}); 
```

然后在服务器端，根据`limit`and返回响应`order`。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-20T03:37:12.487

是的，您将使用“数据”参数将参数传递回您的服务器，指示您想要返回哪些记录。我通常使用分页来获取第 1-10 行或第 21-30 行。这要求您的服务器逻辑从参数值中了解它需要返回正确数量的数据。如果您无法控制它（服务器总是向您发送 100 条记录），那么在您的成功处理程序中，您将手动提取您想要的 3 条记录。

```
$.ajax({
 type: "GET",
 url: "/people"
 dataType: "json",
 data: {
   minRow: 1,
   maxRow: 10
 },
 success: function(data) {
    // Do some awesome stuff.
 }
}); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-20T03:34:34.600

您必须根据您的响应类型限制服务器端的结果。如果响应是 JSON 格式，您可以创建一个 for 循环，使其在第 3 个结果处停止。我会亲自去服务器端，因为我会减少响应大小。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-10-20T03:52:35.760

如果您选择在客户端执行此操作：

成功回调的第一个参数是从服务器返回的数据。

由于您期望从服务器返回的数据类型是 JSON，因此将返回一个 JavaScript 对象。您将像在 JavaScript 中通常那样访问前 3 个人或最后 3 个人。

例如，如果来自服务器的响应采用以下形式：

```
{ 
    "people" : [
        { name: "Foo" },
        { name: "Bar" },
        { name: "Baz" },
        // and so on...
    ]
} 
```

您可以像这样访问前 3 个人或后 3 个人：

```
$.ajax({
   type: "GET",
   url: "/people"
   dataType: "json",
   success: function(data) {
      // Assuming there are 100 people in the "people" array
      // The first three people 
      console.log( data.people[0] ); // "Foo"
      console.log( data.people[1] ); // "Bar"
      console.log( data.people[2] ); // "Baz"

   } 
}); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-20T03:38:05.217

如果我理解得很好......

我通常在 ajax 请求中发送数据。在你的情况下，我会发送这个：

```
 url:'addres'
 data: 'from='+value_from+'&to='+to;
 type:'post' 
```

在服务器端，您可以从和到，或类似的东西（如果需要，或其他选项），并以您想要的结果响应

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-08-23T06:58:53.833

我完全同意@xdazz 的回答，但是如果您使用外部资源并且无权访问服务器端脚本，那么您可以采用这种方法，这对我的解决方案很有帮助。在你的 for 循环中添加：

```
for (var i = 0; i < 5 && i < response.data; i++) {

//Response is limited to five. 
//example: 
var items = response[i].data.items

}; 
```

这有点像传统方法，但有效。

# ruby-on-rails-3.2 - 如何防止 Rails 在生产中使用 Action View 登录

> ID：12984984
> 
> 赞同：5
> 
> 时间：2012-10-20T03:28:02.463
> 
> 标签：ruby-on-rails-3.2, actionview

在 rails 3.2.0 中，是否可以在生产环境中关闭 Rails 日志记录以在 ActionView:: LogSubscriber 中呈现视图。

目前我发现抑制的唯一方法是对其进行修补并提高日志级别以通过以下方式进行调试。有没有更好的方法来做到这一点或任何配置？

```
 module ActionView
    class LogSubscriber
       def render_template(event)
            message = "Rendered #{from_rails_root(event.payload[:identifier])}"
            message << " within #{from_rails_root(event.payload[:layout])}" if event.payload[:layout]
            message << (" (%.1fms)" % event.duration)
            debug(message)
       end
          alias :render_partial :render_template
          alias :render_collection :render_template
     end
  end 
```

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-05-04T00:25:01.187

ActionView 使用*[ActiveSupport::Notifications](http://api.rubyonrails.org/classes/ActiveSupport/Notifications.html)*和*[ActiveSupport::LogSubscriber](http://api.rubyonrails.org/classes/ActiveSupport/LogSubscriber.html)*来检测其事件，并将其从日志中静音就像在环境文件中包含以下内容一样简单：

```
%w{render_template render_partial render_collection}.each do |event|
  ActiveSupport::Notifications.unsubscribe "#{event}.action_view"
end 
```

干杯!

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-05-19T14:29:40.700

您可以直接关闭 action_view 记录器。

```
Rails.application.configure do
  config.action_view.logger = nil
end 
```

# ios - 如何生成设备库标识符？

> ID：12984989
> 
> 赞同：0
> 
> 时间：2012-10-20T03:29:15.850
> 
> 标签：ios, passbook

我想构建一个与 Passbook 集成的系统，第一步是注册一个设备以接收通行证推送通知，我知道它将使用 Web 服务，如“webServiceURL /version /devices/deviceLibraryIdentifier /registrations/passTypeIdentifier /serialNumber ”。

“设备库标识符是用户设备和您的 Web 服务器之间特定于 Passbook 的共享机密。它与设备标识符 (UDID) 无关。设备使用不同的 ID 向不同的服务器标识自己，并且可能会更改其 ID随时。它的目的是允许设备和您的服务器之间进行有效的通信，而不是让您的服务器保留设备上当前安装的通行证的列表。设备库标识符唯一地标识一个设备并指示该实体提出请求被授权提出这样的请求。”

我的问题是

*   如何在设备上生成 deviceLibraryIdentifier？最好的格式是什么？
*   什么时候注册，是在第 3 方应用程序上将通行证添加到 Passbook 时，然后，对于通过 url/电子邮件添加的通行证，何时注册？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-03T15:22:45.747

由`deviceLibraryIdentifier`Passbook 应用程序发行。您不需要自己生成它。当用户向 Passbook 添加通行证时，应用程序将向您定义的`webServiceURL`. 例子：

```
POST /v1/devices/070ddefaed0cdc4bedfe5e46b4ba7e20/registrations/pass.com.apple.test/123456 
```

您需要保存传递​​的`deviceLibraryIdentifier`,`serialNumber`和`pushToken`（在 POST 正文中），以便向 Passbook 发出 APNS 推送并更新给定的传递。

我真的推荐 WWDC 2012 的 Passbook 介绍视频，以更好地了解 Passbook 生态系统。

# r - 停止 lapply 从打印到控制台

> ID：12984991
> 
> 赞同：46
> 
> 时间：2012-10-20T03:29:36.117
> 
> 标签：r

当我使用`lapply`并打印到控制台时，它会打印出不需要`[[i]]NULL`的信息，尽管我希望将预期的消息打印到控制台。我试过了`suppressWarnings`，`suppressMessages`但这些并不能消除不受欢迎的罪犯。我进行了搜索`lapply`，但没有看到将其静音的论据。这更美观，因为它不会干扰功能。我不反对控制台的替代打印，只要用户愿意的话可以关闭它。

这是一个示例函数，输出和我想得到的：

**示例功能：**

```
FUN <- function(x) {
    FUN2 <- function(z) message(z)
    lapply(1:3, function(i) FUN2(paste(x, i)))
}

FUN("hello") 
```

**输出：**

```
hello 1
hello 2
hello 3
[[1]]
NULL

[[2]]
NULL

[[3]]
NULL 
```

**期望的输出：**

```
hello 1
hello 2
hello 3 
```

* * *

## 回答 #1

> 赞同：60
> 
> 时间：2012-10-20T03:33:52.030

使用`invisible`，例如：

```
invisible(FUN("hello"))
hello 1
hello 2
hello 3 
```

您也可以将其包装`lapply`在函数中的调用周围以使其更整洁。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-10-22T23:08:53.970

`l_ply`从 plyr使用：

```
library(plyr)
FUN <- function(x) {
    FUN2 <- function(z) message(z)
    l_ply(1:3, function(i) FUN2(paste(x, i)))
}
FUN("hello") 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-07-27T19:02:39.423

您可以使用普通的 ol' for 循环而不是`lapply()`：

```
FUN <- function(x) {
  for (i in 1:3) {
    message(paste0(x, i))
  }
}
FUN("hello") 
```

# python - 内存中 GPG 签名（或可能使用临时密钥环）

> ID：12984992
> 
> 赞同：2
> 
> 时间：2012-10-20T03:29:44.007
> 
> 标签：python, gnupg, in-memory

我正在开发一个网络应用程序，该应用程序需要为文件创建 GPG 签名，因为它们是由员工上传的。但是，为了安全起见，我不想将签名密钥保留在网络服务器上，即使它受密码保护。

我正在研究的一种解决方案是在 webapp 启动时提示输入私钥，并将其存储在内存中。然后，在签名时传入密钥文本，而不是使用密钥环中的密钥。

但是，我环顾四周，找不到任何方法来做到这一点。GPG 期望密钥在密钥环中。有什么建议或更好的想法吗？我正在使用 Python，但任何命令行工具/脚本也可以很好地工作。

（我意识到我总是可以在非面向公众的机器上手动生成签名......但我想先调查一下，因为如果可能的话会更方便。）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T13:12:12.760

[这个关于超级用户的答案](https://superuser.com/a/450760)可能会给你一些想法。它是为使用公钥加密而编写的，但它很容易适应。长与短：您可以使用`gpg --homedir SOMEDIR`，其中 SOMEDIR 是 tmpfs 文件系统上的目录，如传统的 /dev/shm。

# jquery - 无法删除 on() 上的事件；

> ID：12984998
> 
> 赞同：3
> 
> 时间：2012-10-20T03:30:14.727
> 
> 标签：jquery

我在使用 on(); 分配了一个事件的元素解除绑定事件时遇到问题；

这是我的 JS：

```
 $(document).on('click','.reply-indicator a', function(e){
    e.preventDefault();
    var commentid = $(this).data('commentid');
    $.ajax({
        type: 'POST',
        url: '?category=getreplies',
        data:{
            "commentid" : commentid
        },
        success: function(data){
            $('.'+commentid+'subcomments').append(data);
        }
    });
    return false;
}); 
```

我已经尝试了所有我能想到的从元素中删除 click 事件的方法，我什至在每次迭代时都为每个元素分配了一个 id 属性，以便能够专门针对该元素，因为有几个：

```
$(document).off('click','#'+commentid+'indicator a');
$('#'+commentid+'indicator a').off();

$('#'+commentid+'indicator a').off('click');

$('#'+commentid+'indicator a').unbind('click'); 
```

但是即使我尝试将此代码放在 ajax 请求之前但事件在回调函数之后仍然有效，它也不会丢失回调函数中的事件。我是否试图正确定位它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-20T03:35:41.017

尝试将一个类添加到您想要委托的元素，然后当您想要删除某些元素时，只需删除该类

```
//add delegate
$(document).on('click','.reply-indicator a.onclick', function(e){
...
//remove the class from the element so it no loger matches the delegate selector
$('#'+commentid+'indicator a').removeClass('onclick'); 
```

[http://jsfiddle.net/jN7LG/2/](http://jsfiddle.net/jN7LG/2/)