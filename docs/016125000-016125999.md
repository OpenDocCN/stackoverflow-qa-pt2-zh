# StackOverflow 问答 16125000-16125999

# javascript - 如何通过jquery选择一个选项

> ID：16125001
> 
> 赞同：0
> 
> 时间：2013-04-20T20:44:23.123
> 
> 标签：javascript, jquery

我有一个看起来像这样的选择表单：

```
<select multiple="multiple" id="id_color_id" name="color_id"">
<option value="1">Red</option>
<option value="2">Blue</option>
<option value="3">Brown</option>
</select> 
```

我想要做的是通过javascript选择上面的项目。这实际上是隐藏表单的一部分，所以我要做的就是利用表单的序列化部分。我认为在序列化之后破解它然后添加它会更容易，但我也想取消选择已经选择的任何选项。

所以两个问题：

1.  如何通过 javascript 选择选项。我只知道“红色”、“蓝色”或“棕色”。我也有一个查找字典，它也可以让我得到值。

2.  如何在选择上述选项之一之前取消选择所有选项。

这与：[通过 JQuery 在选择中选择选项](https://stackoverflow.com/questions/10715466/selecting-options-in-a-select-via-jquery)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-20T20:52:24.720

本机Javascript：

```
var textToFind = 'Red';

var dd = document.getElementById('id_color_id');
for (var i = 0; i < dd.options.length; i++) {
    if (dd.options[i].text === textToFind) {
        dd.selectedIndex = i;
        break;
    }
} 
```

或使用 jQuery：

```
$('#id_color_id option:contains('Blue')').prop('selected',true); 
```

带变量：

```
var blue = "Blue";
$('#id_color_id option:contains(' + blue + ')').prop('selected',true); 
```

**并取消选择所有选定的选项：**

本机Javascript：

```
var elements = document.getElementById("id_color_id").options;

    for(var i = 0; i < elements.length; i++){
       if(elements[i].selected)
        elements[i].selected = false;
    } 
```

jQuery：

```
$("#id_color_id option:selected").removeAttr("selected"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-20T20:53:50.117

根据内容选择选项（*考虑您发布的内容就是您拥有*的内容）

```
$("#id_color_id option:contains('Red')").prop('selected',true); 
```

[jsFiddle 演示](http://jsfiddle.net/mohammadAdil/FNxjk/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-20T20:54:24.723

[您可以使用.val()](http://api.jquery.com/val/#val2)方法在选择框上设置值。运行此操作将重置任何先前选择的值，因此您无需执行任何特定操作即可完成该部分。您还可以使用数组来选择多个值，这可能很有趣，因为您使用的是多选。

```
$("#id_color_id").val(['1','2']); 
```

# android - 使用 admob-android 打开应用程序时崩溃

> ID：16125002
> 
> 赞同：3
> 
> 时间：2013-04-20T20:44:32.063
> 
> 标签：android, admob

这是我添加广告的活动：

```
 public void onCreate(Bundle savedInstanceState) {
     super.onCreate(savedInstanceState);

/*  Intent intent = new Intent(this, SelectArticle.class);
    startActivity(intent);*/

    // Create the adView
   adView = new AdView(this, AdSize.BANNER, "a15172dfcf0c366");

    // Lookup your LinearLayout assuming it's been given
    // the attribute android:id="@+id/mainLayout"
    TableLayoutlayout = (TableLayout)findViewById(R.layout.activity_main);

    // Add the adView to it
    layout.addView(adView);

    // Initiate a generic request to load it with an ad
    adView.loadAd(new AdRequest());

    setContentView(R.layout.activity_main);
} 
```

在清单的末尾：

```
 <activity
            android:name="com.google.ads.AdActivity"
            android:configChanges="keyboard|keyboardHidden|orientation|screenLayout|uiMode|screenSize|smallestScreenSize" />
    </application>

</manifest> 
```

我还添加了 jar 文件 googleAdmob。

当我打开应用程序时，它崩溃了。我应该添加什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T07:20:09.113

您的应用程序崩溃的原因是您在调用`findViewById()`之前先调用`setContentView()`。要解决此问题，请将线移至该线`setContentView(R.layout.activity_main)`的正下方`super.onCreate()`。那仍然不能解决您的问题，因为当您调用 findViewById 时，您使用的是 R.layout.main_activity，因为它是一个布局，所以它不起作用。您必须`linearlayout`在 XML 文件中提供属性`android:id="@+id/main_activity`，然后必须将实例化线性布局的行更改为

findViewById(R. **id** .activity_main)

# jsp - 对 sevlet 的 jQuery AJAX 调用在锚标记中不起作用

> ID：16125005
> 
> 赞同：0
> 
> 时间：2013-04-20T20:44:54.987
> 
> 标签：jsp, jquery, servlets

我是 jQuery 和 Servlet 的新手。在一个学校项目上工作，现在我被这个问题困住了。

我的 proj3.html 文件中左侧有一个导航栏，带有这样的锚标记。

```
 <ul class="nav nav-list">

          <li class="nav-header">Labels</li>
          <li><a href="" class="labels">Sony</a></li>
          <li><a href="" class="labels">Spinnin</a></li>
          <li><a href="" class="labels">BMG</a></li>
          <li><a href="" class="labels">Ultra</a></li>
      <li><a href="" class="labels">Universal</a></li>

          <li class="nav-header">Genere</li>
          <li><a href="" class="genere">Rock</a></li>
          <li><a href="" class="genere">Alternative Rock</a></li>
          <li><a href="" class="genere">Pop</a></li>
          <li><a href="" class="genere">EDM</a></li>
          <li><a href="" class="genere">Hip-Hop</a></li>
       </ul> 
```

在Javascript里面我有这个

```
 $('a.labels').on('click',function(e){

        var url = "http://example.edu/servlet/SampleQuery";       
            $.get(url);
        e.preventDefault();
    }

} 
```

在我的 servlet SampleQuery.java 中，我从 DB 中读取并转发到这样的 JSP

```
 RequestDispatcher dispatcher = null;
       dispatcher = request.getRequestDispatcher("/jsp/DisplayVendor.jsp"); 
   dispatcher.forward(request, response); 
```

当我点击任何锚标记`$.get`时，我的 JSP 页面没有显示出来。奇怪的是，如果我检查 firebug 的网络流量，我会看到我的 AJAX 调用正在通过，我什至可以看到 DisplayVendor.jsp 页面作为响应。但它没有得到显示。

有人可以指出我是否犯了任何错误。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T21:16:58.507

你打电话`$.get(url)`，但不对响应做任何事情。将其更改为

```
$.get(url, function(data) {
    alert('here is the response data : ' + data);
}); 
```

显示您收到的内容。

例如，要使用 AJAX 调用返回的 HTML 更新 id 为“dynamicallyLoadedDiv”的 div 的内容，请使用

```
$.get(url, function(data) {
    $('#dynamicallyLoadedDiv').html(data);
}); 
```

或者干脆

```
$('#dynamicallyLoadedDiv').load(url); 
```

阅读[文档](http://api.jquery.com/jQuery.get/)以获取更多信息。

请注意，如果您的目标是替换整个页面内容，我真的看不出发出 AJAX 请求的意义。在这种情况下使用简单的超链接。

# javascript - 删除子节点错误

> ID：16125006
> 
> 赞同：0
> 
> 时间：2013-04-20T20:45:03.097
> 
> 标签：javascript

我在使用下面的代码时遇到问题，我在 Opera 中不断收到此错误：

```
Uncaught exception: DOMException: NOT_FOUND_ERR 
```

这在 Chrome 中：

```
Uncaught Error: NOT_FOUND_ERR: DOM Exception 8 
```

此消息指的是 removeInput 函数：

```
function addInput() {
  var div = document.createElement("div");
  var txt = "<div>Upload image: <input type='file' name='slika[]' /> <span onclick='removeInput(this.parentNode)' />Remove <img src='catalog/remove_icon.png' /></span></div>";
  div.innerHTML = txt;
  document.getElementById('text').appendChild(div);
}

function removeInput(el) {
  document.getElementById('text').removeChild(el);
} 
```

问题是：如何删除 addInput 函数先前创建的元素？这是动态删除元素的正确方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T20:53:49.283

`el.parentNode.removeChild(el);`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-20T20:49:42.983

`<div>`首先：你不需要在innerHTML中写“ ”，因为createElement`<div></div>`默认创建“”。

第二：如果要删除最后插入的元素，则需要在全局变量中插入后保存

```
var lastInserted = null;
function addInput() {
  var div = document.createElement("div");
  var txt = "Upload image: <input type='file' name='slika[]' /> <span onclick='removeInput(this.parentNode)' />Remove <img src='catalog/remove_icon.png' /></span>";
  div.innerHTML = txt;
  document.getElementById('text').appendChild(div);
  lastInserted = div;
}

function removeInput() {
  if(!lastInserted)return;
  document.getElementById('text').removeChild(lastInserted);
} 
```

# c++ - Win 8 中的 C++ 自动运行

> ID：16125010
> 
> 赞同：3
> 
> 时间：2013-04-20T20:45:20.997
> 
> 标签：c++, windows, c++builder

使用win 8的旧技术自动运行我的程序是否正确？

我没有要测试的win 8，所以我希望有人已经知道了。

重新启动PC时，我的程序没有启动，这可能是什么原因？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-20T22:59:44.057

使用该注册表项指定的自动运行在 Windows 8 上的工作方式与在早期版本的 Windows 中的工作方式相同。随意继续使用该方法。

# java - java http GET - 结果解析

> ID：16125014
> 
> 赞同：1
> 
> 时间：2013-04-20T20:45:30.067
> 
> 标签：java, json, parsing, bufferedreader, http-get

通过我的应用程序，我正在连接到 http 服务器上的 php 脚本（GET 方法）。我正在使用缓冲区阅读器阅读结果。

```
 public String updateOsv(String urlToRead) {
  URL url;
  HttpURLConnection conn;
  BufferedReader rd;
  String line = null;
  String result = "";
  try {
     url = new URL(urlToRead);
     conn = (HttpURLConnection) url.openConnection();
     conn.setRequestMethod("GET");
     rd = new BufferedReader(new InputStreamReader(conn.getInputStream()));
    while ((line = rd.readLine()) != null) {
        result += line;
       // System.out.println(result);
    }
     rd.close();
  } catch (Exception e) {
     e.printStackTrace();
  }
  return result;
 } 
```

确切的结果是：15;1;20。如果我想将这 3 个数字放在单独的变量中（int i=15，int j=1，int k=20），我该如何解析这个结果？请帮我。我不知道该怎么做。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T20:50:19.310

Java 没有像 PHP`list`这样的函数，您可以`explode`在一个简单的指令中将一个值分配给不同的变量。相反，您可以使用 创建一个数组[`String.split`](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/String.html#split%28java.lang.String%29)，示例将是：

```
String[] values = resultString.split(";"); 
```

# java - 大十六进制转二进制

> ID：16125017
> 
> 赞同：2
> 
> 时间：2013-04-20T20:46:32.527
> 
> 标签：java

我在stackoverflow上查看了很多关于这个问题的帖子，我找到了部分解决方案，但到目前为止我还没有找到适合我的解决方案。 `new BigDecimal("3324679375210329505").toString(2);` 似乎最适合我（来自：[将大的 2^63 decimal 转换为 binary](https://stackoverflow.com/questions/6337828/convert-a-large-263-decimal-to-binary)）但我确实需要前导零和尾随零。无论如何我可以将大（大于长）十六进制转换为二进制（字符串）表示形式吗？

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-20T20:50:04.783

BigInteger 类处理任意大的数字。

尾随零已被处理。要处理前导零，只需在前面添加一个“1”，以确保前导“1”位，然后再次将其剥离：

```
String bits = new BigInteger("1" + hex, 16).toStting(2).substring(1); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-20T21:01:12.917

You need leading zeroes? I don't know of a built-in function, but you can easily implement it yourself:

```
public static String hex2binary(String hex) {
    StringBuilder result = new StringBuilder(hex.length() * 4);
    for (char c : hex.toUpperCase().toCharArray()) {
        switch (c) {
        case '0': result.append("0000"); break;
        case '1': result.append("0001"); break;
        case '2': result.append("0010"); break;
        case '3': result.append("0011"); break;
        case '4': result.append("0100"); break;
        case '5': result.append("0101"); break;
        case '6': result.append("0110"); break;
        case '7': result.append("0111"); break;
        case '8': result.append("1000"); break;
        case '9': result.append("1001"); break;
        case 'A': result.append("1010"); break;
        case 'B': result.append("1011"); break;
        case 'C': result.append("1100"); break;
        case 'D': result.append("1101"); break;
        case 'E': result.append("1110"); break;
        case 'F': result.append("1111"); break;
        default: throw new IllegalArgumentException("Invalid hex: '" + hex + "'");
        }
    }
    return result.toString();
} 
```

# java - Play 框架 - 对具有依赖项的控制器进行单元测试

> ID：16125025
> 
> 赞同：2
> 
> 时间：2013-04-20T20:48:15.907
> 
> 标签：java, unit-testing, playframework, mocking, playframework-2.1

我正在编写使用 Play 框架（2.1.1 版本）的 Web 应用程序。

我写了我的第一个非常简单的控制器，我想对它进行单元测试。

问题是，因为 Play 控制器都是静态的，所以我想知道模拟依赖项的正确方法是什么，例如，让我们采取一些`MyService`：

```
private static MyService myService = new MyServiceImpl(); 
```

我在我的应用程序中使用这种初始化来传递控制器依赖项。

现在，如果我想模拟我的依赖项，我可以创建静态方法，将`myService`字段设置为模拟的`MyService`.

这是在用 Java 编写的 play 框架应用程序中完成的方式吗？或者也许在 Play 框架中有一些更“惯用”的方式来做这种事情。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T07:39:46.497

[http://www.playframework.com/documentation/2.1.1/JavaInjection](http://www.playframework.com/documentation/2.1.1/JavaInjection)上记录了如何实现类似的目标。

在[https://github.com/guillaumebort/play20-spring-demo](https://github.com/guillaumebort/play20-spring-demo)上是一个 Play Spring 项目的演示。

`play.Play.isTest()`您可以检查您是否处于测试模式。它记录在[http://www.playframework.com/documentation/api/2.1.1/java/play/Play.html](http://www.playframework.com/documentation/api/2.1.1/java/play/Play.html)上。

# javascript - 在博客网站上以 Javascript 的数组编码显示图像

> ID：16125027
> 
> 赞同：0
> 
> 时间：2013-04-20T20:48:19.960
> 
> 标签：javascript, html, arrays, image, blogs

在我的博客上，我有一个数组的 html 编码。我从网站 blogskins 下载了这个 blogskin，它带有编码“数组”。我对此有点熟悉，但我不知道html代码我想知道你们是否可以帮助我？我得到的编码是...

```
<script type="text/javascript">
<!-- hide
numquotes = 3;
var quotes = new Array(numquotes);
quotes[0]="<img src=http://i589.photobucket.com/albums/ss333/HeartsAloud/i9.jpg>";
quotes[1]="<img src=http://i589.photobucket.com/albums/ss333/HeartsAloud/i6.jpg>";
quotes[2]="<img src=http://i589.photobucket.com/albums/ss333/HeartsAloud/i10.jpg>";
quotes[3]="<img src=http://i589.photobucket.com/albums/ss333/HeartsAloud/i7.jpg>";
quotes[4]="<img src=http://i589.photobucket.com/albums/ss333/HeartsAloud/i3.jpg>";
var rand = Math.floor(Math.random()*numquotes);
document.write(quotes[rand]);
// -->
</script></center> 
```

我想将这些图像更改为我自己的图像，并且我有几个想要替换它的链接，所以它会读取我的用户名而不是 HeartsAloud。

[http://s1286.photobucket.com/user/Aquallurement/media/Blogger/tumblr_luufej9POE1r2jjy2o1_500_zpsecce3309.gif.html](http://s1286.photobucket.com/user/Aquallurement/media/Blogger/tumblr_luufej9POE1r2jjy2o1_500_zpsecce3309.gif.html)

^ 一个这样的例子，每当我放置那个链接而不是已经存在的那个链接时，它在我保存时它永远不会出现。

每当您发布条目时，它只会随机化图片。任何人都可以帮忙吗？我使用了错误的链接吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T21:00:45.133

have you tried the built-in string functions, like replace?

```
 var str="Visit Microsoft!";
 var n=str.replace("Microsoft","W3Schools"); 
```

from: [http://www.w3schools.com/jsref/jsref_replace.asp](http://www.w3schools.com/jsref/jsref_replace.asp)

so in your case it would be something like:

```
 newLink = quotes[0].replace('old_userame', 'your_username') 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-20T21:39:38.377

您修改后的版本如下所示：

```
<script type="text/javascript">
<!-- hide
numquotes = 5;
var quotes = new Array(numquotes);
quotes[0]='<img src="YOUR LINK GOES HERE BETWEEN THE QUOTES">';
quotes[1]='<img src="YOUR LINK GOES HERE BETWEEN THE QUOTES">';
quotes[2]='<img src="YOUR LINK GOES HERE BETWEEN THE QUOTES">';
quotes[3]='<img src="YOUR LINK GOES HERE BETWEEN THE QUOTES">';
quotes[4]='<img src="YOUR LINK GOES HERE BETWEEN THE QUOTES">';
var rand = Math.floor(Math.random()*numquotes);
document.write(quotes[rand]);
// -->
</script> 
```

所以你用你的链接替换你的链接在引号之间，以获得：

```
quotes[0]='<img src="http://i1286.photobucket.com/albums/a601/Aquallurement/Blogger/tumblr_luufej9POE1r2jjy2o1_500_zpsecce3309.gif">'; 
```

确保您直接链接到图片，而不是 photobucket 页面（右键单击图片并在谷歌浏览器中选择复制图片 URL）

这是您发布的链接： http: [//s1286.photobucket.com/user/Aquallurement/media/Blogger/tumblr_luufej9POE1r2jjy2o1_500_zpsecce3309.gif.html](http://s1286.photobucket.com/user/Aquallurement/media/Blogger/tumblr_luufej9POE1r2jjy2o1_500_zpsecce3309.gif.html)

这是图片的链接，您应该使用：http: [//i1286.photobucket.com/albums/a601/Aquallurement/Blogger/tumblr_luufej9POE1r2jjy2o1_500_zpsecce3309.gif](http://i1286.photobucket.com/albums/a601/Aquallurement/Blogger/tumblr_luufej9POE1r2jjy2o1_500_zpsecce3309.gif)

# javascript - Move caret on contentEditable div using javascript

> ID：16125028
> 
> 赞同：0
> 
> 时间：2013-04-20T20:48:35.363
> 
> 标签：javascript, html, contenteditable, caret

I've been searching a lot but i couldn't figure out how to move the text cursor in a contentEditable div,the problem is that i don't have much knowledge in javascript and the best working code i found doesn't work when the div content has multiple lines,the snippet is bellow:

```
function moveCaret(win, charCount) {
    var sel, range;
    if (win.getSelection) {
        sel = win.getSelection();
        if (sel.rangeCount > 0) {
            var textNode = sel.focusNode;
            var newOffset = sel.focusOffset + charCount;
            sel.collapse(textNode, Math.min(textNode.length, newOffset));
        }
    }else if ( (sel = win.document.selection) ) {
        if (sel.type != "Control") {
            range = sel.createRange();
            range.move("character", charCount);
            range.select();
        }
    }
} 
```

**So basically i need a javascript function to move the caret in a contentEditable div,assuming that the div may have multiple lines.**

Any advices,link or source code will be appreciate.Thanks in advance!

# c# - 面向对象的聚合/关联不起作用

> ID：16125034
> 
> 赞同：0
> 
> 时间：2013-04-20T20:49:16.747
> 
> 标签：c#, class, inheritance, associations, aggregation

我试图在另一个类中调用我的类，它调用了该类，但是当我使用类变量来使用它的方法时，它没有显示任何内容。请告诉我我在哪里做错了。

```
class Course
{
    string mycourse;

    public Course(string course)
    {
        mycourse = course;

    }

    public void subjects()
    {
        System.Windows.Forms.MessageBox.Show("rEGISTERED"+ mycourse);

    }

} 
```

***学生班***

```
class Students
{
    Course myCourse = new Course("English");

} 
```

但是在我写 myCourse 的学生课上。它没有显示任何课程类的方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T20:57:54.723

`myCourse` here is a field

```
class Students
{
    Course myCourse = new Course("English");
    myCourse. ??? // nae, not gonna work
} 
```

And you probably looking for a method, like

```
class Students
{
    public void AddCourse(string course)
    {
        Course myCourse = new Course(course);
        myCourse. //this is where you get IntelliSense
    }
} 
```

And somewhere else

```
Student s = new Student();
s.AddCourse("English"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-20T20:52:50.350

您必须将代码段放在方法或构造函数中。

例如，这应该可以编译，现在它`myCourse.subjects()`已被移至构造函数：

```
class Students
{
    public Students()
    {
        Course myCourse = new Course("English");
        myCourse.subjects();
    }

} 
```

# magento-1.7 - 如何在magento的标题中添加自定义过滤器

> ID：16125036
> 
> 赞同：0
> 
> 时间：2013-04-20T20:49:27.340
> 
> 标签：magento-1.7

在我的 magento 网站中，我在标题中有下拉列表，我想在最后一个下拉项目选择后搜索或导航产品。下拉是相互依赖的（我的意思是第三个取决于第二个，第二个取决于第一个）第三个下拉是第二个下拉类别项目的属性值。它应该像过滤器一样工作。我创建了 .phtml 文件并在标题中添加了这些下拉列表。请帮帮我。提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T13:31:18.813

自定义您的分层导航功能

解决问题的分层导航示例

您有 3 个属性：-（类别、颜色、制造商）颜色取决于颜色中的类别和制造商

因此，当您传递 #cat=5 时，ajax 调用将过滤掉产品。还根据可用产品现有颜色过滤掉第二个下拉列表。然后类似地传递#cat=5&color=23....等等

这种过滤已经在分层导航中完成。您只需要自定义您的代码即可在下拉列表中使用它

:)

# java - Eclipse 忽略 CLASSPATH 变量？

> ID：16125040
> 
> 赞同：0
> 
> 时间：2013-04-20T20:49:45.710
> 
> 标签：java, classpath, environment-variables

我的想法是任何 Java 应用程序都会在运行时查找该`CLASSPATH`变量以检查类。

但情况似乎并非如此，作为我从 Eclipse 运行的应用程序。那么在哪些具体情况下使用`CLASSPATH`变量呢？如何确保 Eclipse 始终使用我的`CLASSPATH`变量？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T20:53:18.803

当 java（或 javaw）命令在没有 -classpath 或 -jar 或 -cp 选项的情况下启动时，将使用 CLASSPATH 变量。但 Eclipse 遵循最佳实践，并始终使用这些选项。

恕我直言，你永远不应该依赖 CLASSPATH。始终在命令行选项中明确指定类路径。希望所有的 java 程序共享相同的库是非常罕见的。这就是为什么 CLASSPATH 全局环境变量是个坏主意。

# css - 在 Canvas 中翻转图像，不使用 Scale -1

> ID：16125043
> 
> 赞同：0
> 
> 时间：2013-04-20T20:50:08.840
> 
> 标签：css, canvas, html5-canvas, excanvas

我正在尝试向此演示添加触发器功能[http://www.ernestdelgado.com/public-tests/canvasphoto/demo/canvas.html](http://www.ernestdelgado.com/public-tests/canvasphoto/demo/canvas.html)

我正在尝试通过设置 scalex = -1 ，它的作品，但这个演示也有调整大小的功能。因此，作者使用 scalex 查找高度和宽度（在调整图像大小时）（请检查下面的代码）。

在我分配 scalex = -1 后，画布的高度和宽度变为 0。还有其他方法吗？

```
Canvas.Img.prototype.setFlop = function() {
    this.width = this._oElement.width;
    this.height = this._oElement.height;
    this.scalex = -1

    this.setImageCoords();
}

Canvas.Img.prototype.setImageCoords = function() {
    this.left = parseInt(this.left);
    this.top = parseInt(this.top);

    this.currentWidth = parseInt(this.width) * this.scalex;
    this.currentHeight = parseInt(this.height) * this.scalex;
    this._hypotenuse = Math.sqrt(Math.pow(this.currentWidth / 2, 2) + Math.pow(this.currentHeight / 2, 2));
    this._angle = Math.atan(this.currentHeight / this.currentWidth); ... 
```

# sql - sql - 与相关子查询混淆

> ID：16125044
> 
> 赞同：0
> 
> 时间：2013-04-20T20:50:10.913
> 
> 标签：sql, subquery

我一直在使用早先关于子查询的问题中给我的建议。看这里：

[sql - 多层相关子查询](https://stackoverflow.com/questions/16073199/sql-multiple-layers-of-correlated-subqueries)

[SQL Server：左连接导致的行数少于左表中的行数](https://stackoverflow.com/questions/16116559/sql-server-left-join-results-in-fewer-rows-than-in-left-table)

我正在使用 ms sql 服务器（我相信是 2005 年）。

我现在要做的是：

我有一个行结果（称为结果 A），它是通过执行以下操作获得的：

```
select * from TableA as a
join (select * from TableB where RealDate = '4/20/2013 12:00:00 AM') as b
on a.id = b.id 
```

在此结果中，我想查找不在此查询返回的行的结果中的所有行：

```
select * from TableA as a
join TableC as c
on c.id = a.id 
```

本质上，我遇到的情况是第一个查询产生 246 条记录，而第二个查询产生 247 条记录。我期待第一个结果返回 247 条记录（所有这些都应该在第二个查询返回的记录列表中）。所以现在我需要调查缺少哪条记录，以便采取适当的措施。

我尝试执行以下操作，但收到各种错误：

```
select * from (select * from TableA as a
join (select * from TableB where RealDate = '4/20/2013 12:00:00 AM') as b
on a.ul_id = b.id))
as result_A
where not exists (select 1 from (select * from TableA as a
                  join TableC as c
                  on c.id = a.ul_id) as result_B
                  where result_A.ul_id = result_B.id); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-20T20:56:59.810

做这个设置差异：

```
select a.* from TableA as a
join TableC as c
on c.id = a.id

except

select a.* from TableA as a
join (select * from TableB where RealDate = '4/20/2013 12:00:00 AM') as b
on a.id = b.id 
```

如果由于某种原因这没有返回一行，则第一个查询有重复。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-20T21:00:06.543

您的叙述说您要排除以下结果：

```
select * from TableA as a
join TableC as c
on c.id = a.id 
```

但是您的不存在有不同的子查询。此外，您的某些错误可能是由于多次使用同一个别名而引起的。

最后，Pieter 的方法应该奏效。我没有检查细节。

# php - DataMapper ORM - 如何获取所有模型和每个实例的相关数据

> ID：16125050
> 
> 赞同：1
> 
> 时间：2013-04-20T20:50:37.603
> 
> 标签：php, codeigniter, orm, codeigniter-datamapper

我不明白如何执行以下操作：

假设我有一个产品表和一个照片表。1 产品有很多照片。所以在产品模型中我这样做：

```
var $has_many = array("category", "photo"); 
```

现在我想获取所有产品并将他们的每张照片与它们相关联。我怎样才能做到这一点？目前，在我的控制器中，我正在浏览每个产品并查询照片并以这种方式传递一个单独的数组。这不可能是理想的。我应该可以将每张照片直接与特定产品联系起来，不是吗？

从逻辑上讲，这会起作用（但它不起作用？）

```
$product = new Product;
$products = $product->get_by_related_category('name', $where);
$photos = $product->photo->get(); 
```

看看我在说什么？**我很想将 $products 变量传递给我的视图，能够通过它进行遍历，并将一组照片绑定到每个产品对象。**

我怎样才能做到这一点？还是有更好的方法来做到这一点？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-20T22:21:34.820

对于“有很多”关系，您基本上有两种使用 SQL 获取相关信息的方法：

1.  您可以在 like 中加入另一张桌子`select products.*, photos.* from products left outer join photos on products.id = photos.product_id`。这样，您将拥有“重复”的产品数据，因此您需要相应地处理结果。不幸的是[`include_related()`](http://datamapper.wanwizard.eu/pages/getadvanced.html#include_related)，它不直接支持这一点，它会创建重复的产品，每个产品都有一张相关的照片。

2.  您可以运行两个查询，首先获取产品 ( `select * from products where ...`)，然后获取带有所选产品 id 的照片( )，然后`select * from photos where product_id in (...)`整理出哪些照片行应该放在哪些产品上。在 DMZ 中没有内置功能，但这是我为模型基类（扩展`DataMapper`类）编写的代码，可以像这样使用：

    ```
    $products = new Product;
    $products = $products
        ->get_by_related_category('name', $where) // first get the parent objects
        ->load_related('photo'); // then load in the related ones inside them
    foreach ($products as $product) {
        // unique product instances as before
        foreach ($product->photo as $photo) {
            // and every product has a list of related photos 
            // for each product individualy
        }
    } 
    ```

    下面的方法将收集父对象的 id，使用 a 中的 id 运行一个 SQL 查询，`where_in()`并为父对象的相关字段对象排序结果（不幸的是它有点长，不支持多对多关系）。

```
/**
 * load_related
 * 
 * Loads related has_many objects efficiently
 *
 * @param string $related_field_name the name of the relation
 * @param callable $filter_function callback to place extra conditions on the related model query
 */ 
public function load_related($related_field_name, $filter_function = null) {
    $related_properties = $this->_get_related_properties($related_field_name);
    $related_models = new $related_properties['class'];
    $join_field = $related_properties['join_self_as'].'_id';

    $ids = array_unique(array_filter(array_merge(array('id' => $this->id), array_column($this->all, 'id')), 'intval'));
    if (empty($ids)) {
        return $this;
    }

    $related_models->where_in($join_field, $ids);
    if (is_callable($filter_function)) {
        call_user_func($filter_function, $related_models);
    }

    $related_models = $related_models->get();
    $related_models = array_group_by($related_models, $join_field);

    foreach ($this->all as $i => $row) {
        $related_models_to_row = isset($related_models[$row->id]) ? $related_models[$row->id] : null;
        if ($related_models_to_row) {
            $this->all[$i]->{$related_field_name} = reset($related_models_to_row);
            $this->all[$i]->{$related_field_name}->all = $related_models_to_row;
        }
    }

    if (isset($related_models[$this->id])) {
        $this->{$related_field_name} = $related_models[$this->id];
    }

    return $this;
}

// The two array helper functions used above from my_array_helper.php
function array_group_by($arr, $key, $index_by_col = false) {
    $re = array();
    foreach ($arr as $v) {
        if (!isset($re[$v[$key]])) {
            $re[$v[$key]] = array();
        }
        if ($index_by_col === false) {
            $re[$v[$key]][] = $v;
        } else {
            $re[$v[$key]][$v[$index_by_col]] = $v;
        }
    }
    return $re;
}

function array_column($arr, $key, $assoc = false) {
    if (empty($arr)) {
        return array();
    }
    $tmp = array();
    foreach ($arr as $k => $v) {
        if ($assoc === true) {
            $tmp[$k] = $v[$key];
        } elseif (is_string($assoc)) {
            $tmp[$v[$assoc]] = $v[$key];
        } else {
            $tmp[] =  $v[$key];
        }
    }
    return $tmp;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-10T11:15:34.230

我现在有点探索 DM 并且我需要相同的功能。起初`load_related`，其他答案的功能似乎是解决这个问题的方法。不过我做了一些进一步的研究。我找到了另一个问题的答案，[这](https://stackoverflow.com/a/16088476/1397220)让我思考是否没有办法只自动填充一些关系。
嗯，有！！

如果您在模型中建立关系，则可以设置此“选项”。

```
//Instead of doing this:
var $has_many = array('user_picture');

//Do this
var $has_many = array(
    'user_picture' => array(
        'auto_populate' => TRUE,
    ),
 ); 
```

现在图片将在用户对象中可用。

```
foreach ($u as $user) {

    foreach ($user->user_picture as $picture) {
        // Do your thing with the pictures
    }

} 
```

我从文档的[这个页面上找到了它。](http://datamapper.wanwizard.eu/pages/advancedrelations.html)

享受！

# sql - 更改域值

> ID：16125052
> 
> 赞同：1
> 
> 时间：2013-04-20T20:50:39.667
> 
> 标签：sql, oracle

我有三个非空​​域的字段。如何更改它们以接受 NULL 数据？

```
frais_inscription NUMBER(6,2) NOT NULL,
date_paiement DATE NOT NULL,
type_paiement VARCHAR2(15) NOT NULL, 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-20T20:56:37.227

你只是想改变你的表的列来接受空值吗？这是通用语法：

```
alter table yourtable
modify (yourfield number(6,2) null); 
```

[SQL 小提琴演示](http://sqlfiddle.com/#!4/2ad35/1)

# python - python在command.replace中使用变量

> ID：16125063
> 
> 赞同：0
> 
> 时间：2013-04-20T20:51:37.353
> 
> 标签：python

这真让我抓狂。我有一个这样的字符串：

```
Sheridan School III 
```

在这样的列表中：

```
Sheridan School III
Lake Bluff Elementary II
Barrington IV 
```

我想把尾随部分变成一个变量`homeseries`

并将之前的部分变为变量`homeclub`

当我拆分字符串时，我可以得到系列，没问题，如下所示。

但是我不能在`.replace`字符串中使用该系列，我只想用它来摆脱原始字符串的最后一部分。如何在 .replace 中使用变量？Python 抛出一个错误，我确信有一种简单的方法可以将它作为变量引用。

```
homeclubfull = "Sheridan School III"
homeclublist = homeclubfull.split(" ")
homeseries = homeclublist[-1:]    # this should return "III"
homeclub=homeclubfull.replace(homeseries,'')
print homeclub, home series 
```

抛出的错误：

```
import.py:51: TypeError: expected a character buffer object 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-20T20:52:55.843

[`str.rsplit()`使用方法](http://docs.python.org/2/library/stdtypes.html#str.rsplit)和限制从末尾拆分：

```
homeclub, homeseries = homeclubfull.rsplit(None, 1) 
```

演示：

```
>>> homeclubfull = "Sheridan School III"
>>> homeclub, homeseries = homeclubfull.rsplit(None, 1)
>>> homeclub
'Sheridan School'
>>> homeseries
'III' 
```

您收到的错误是因为您试图将*列表*传递给`.replace()`，而不是字符串；你想要这个：

```
homeseries = homeclublist[-1]   # Note, no : 
```

您正在对列表进行*切片*，而不是选择一个元素。切片结果是一个列表，总是：

```
>>> homeclubfull.split()[-1:]
['III']
>>> homeclubfull.split()[-1]
'III' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-20T21:02:23.023

如果不是`homeclublist[-1:]`您使用，您的问题将得到解决，`homeclublist[-1]`因为第一个返回一个列表（它留下一个您可以剥离的尾随空格）。

您也可以在不替换的情况下执行此操作；通过切片列表中您想要的部分而不是您不想要的部分，然后替换：

```
homeclubfull = "Sheridan School III"
homeclublist = homeclubfull.split()
homeseries = ' '.join(homeclublist[:-1])
print(homeseries) 
```

# html - 页面底部的附加背景

> ID：16125066
> 
> 赞同：-2
> 
> 时间：2013-04-20T20:51:54.750
> 
> 标签：html, css, twitter-bootstrap

我正在使用 Bootstrap 来创建我的个人网页，我尝试添加渐变背景，`<body>`但我最终在那里得到了一个毫无意义的渐变空间。这是图片，我不能包含 jsfiddle，因为我有多个 CSS 文件。

[http://jsfiddle.net/eJ3CL/](http://jsfiddle.net/eJ3CL/)

您在 jsfiddle 中看不到问题，因为那里不包含引导程序，但这里是屏幕截图：

**编辑：** 编辑[小提琴](http://jsfiddle.net/eJ3CL/2/)以包括引导程序并将内容中间的高度设置为 120px，以便其他人可以看到 OP 想要传达的问题。

![当我将容器高度设置为 900](https://i.stack.imgur.com/9fsDK.png)

![当我将容器高度设置为 500](https://i.stack.imgur.com/WNDcM.png)

这是什么原因造成的？我该如何解决这个问题？

编辑：这是所有相关代码。

```
<head>
    <title>Burak Özmen - A Newbie Designer</title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />  
    <link href="css/reset.css" rel="stylesheet" type="text/css">
    <!-- Bootstrap -->
    <link href="css/bootstrap.min.css" rel="stylesheet" media="screen">
    <link href="style.css" rel="stylesheet" type="text/css">

</head>
<body>
    <div class="container container-top">
        <div class="page-header">
            <h1>Burak Özmen <small>A Newbie Developer</small></h1>
        </div>
    </div>
    <div class="container container-middle">
        <div class="navbar navbar-static-top navbar-inverse">
            <div class="navbar-inner">
                <ul class="nav">
                    <li><a href="#">Home</a></li>
                    <li><a href="#">About Me</a></li>
                    <li><a href="#" class="pull-right">Link</a></li>
                </ul>
            </div>
        </div>
        <div class="vertical-middle">In development... </div>
    </div>
</body>
</html> 
```

样式.css：

```
body {
background: rgb(249,252,247); /* Old browsers */
background: -moz-linear-gradient(top,  rgba(249,252,247,1) 0%, rgba(245,249,240,1) 100%); /* FF3.6+ */
background: -webkit-gradient(linear, left top, left bottom, color-stop(0%,rgba(249,252,247,1)), color-stop(100%,rgba(245,249,240,1))); /* Chrome,Safari4+ */
background: -webkit-linear-gradient(top,  rgba(249,252,247,1) 0%,rgba(245,249,240,1) 100%); /* Chrome10+,Safari5.1+ */
background: -o-linear-gradient(top,  rgba(249,252,247,1) 0%,rgba(245,249,240,1) 100%); /* Opera 11.10+ */
background: -ms-linear-gradient(top,  rgba(249,252,247,1) 0%,rgba(245,249,240,1) 100%); /* IE10+ */
background: linear-gradient(to bottom,  rgba(249,252,247,1) 0%,rgba(245,249,240,1) 100%); /* W3C */
filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#f9fcf7', endColorstr='#f5f9f0',GradientType=0 ); /* IE6-9 */

}

.container-middle {
    height: 300px;
    background: white;

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T21:39:58.330

给身体一个最小高度

```
body {
  min-height: 400px;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-20T21:33:38.920

将正文选择器中的规则移动到 html 选择器并将`height:100%;`规则添加到`html`选择器。

```
html{
background: rgb(249,252,247); /* Old browsers */
background: -moz-linear-gradient(top,  rgba(249,252,247,1) 0%, rgba(245,249,240,1) 100%); /* FF3.6+ */
background: -webkit-gradient(linear, left top, left bottom, color-stop(0%,rgba(249,252,247,1)), color-stop(100%,rgba(245,249,240,1))); /* Chrome,Safari4+ */
background: -webkit-linear-gradient(top,  rgba(249,252,247,1) 0%,rgba(245,249,240,1) 100%); /* Chrome10+,Safari5.1+ */
background: -o-linear-gradient(top,  rgba(249,252,247,1) 0%,rgba(245,249,240,1) 100%); /* Opera 11.10+ */
background: -ms-linear-gradient(top,  rgba(249,252,247,1) 0%,rgba(245,249,240,1) 100%); /* IE10+ */
background: linear-gradient(to bottom,  rgba(249,252,247,1) 0%,rgba(245,249,240,1) 100%); /* W3C */
filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#f9fcf7', endColorstr='#f5f9f0',GradientType=0 ); /* IE6-9 */
height: 100%;

}

.container-middle {
    height: 300px;
    background: white;

} 
```

它适用于 Firefox、Chrome 和 IE9

# jquery - 使用 jquery 复制 HTML 表（包括用户输入的数据）

> ID：16125074
> 
> 赞同：2
> 
> 时间：2013-04-20T20:53:14.647
> 
> 标签：jquery, html

我定义了一个空表

```
<table align="center"  class="bordered"  border="6" id="tableb_copy"></table> 
```

我有一个定义了 INPUT 元素的表

```
<table align="center"  class="bordered"  border="6" id="tableb">
    <tr>
       <td><input type="text" value="test"></td>
       <td>test1</td>
       <td>test1</td>
    </tr>
</table> 
```

我使用以下代码将tableb的内容复制到tableb_copy

```
$('#tableb_copy').html($('#tableb').html()); 
```

它复制表结构，但如果用户在 INPUT 单元格中输入了一些数据，则不会复制。有什么方法可以复制内容吗？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-20T21:12:09.410

先尝试克隆表，然后将克隆移动到新位置。

```
<div id='here'></div> 
```

和js

```
$('#here').html($('#tableb').clone().attr('id', 'tableb_copy')); 
```

小提琴[http://jsfiddle.net/Spokey/nCyFK/4/](http://jsfiddle.net/Spokey/nCyFK/4/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-20T21:00:14.207

它似乎工作，除了你`<table>`不是 HTML 有效的。这`<tr>`是一个块标签，例如，您以它结束`</tr>`。

[http://jsfiddle.net/Bjmhw/1/](http://jsfiddle.net/Bjmhw/1/)

HTML：

```
<table align="center"  class="bordered"  border="6" id="tableb_copy"></table>
<table align="center"  class="bordered"  border="6" id="tableb">
    <tr>
        <td>1</td>
        <td>2</td>
        <td>3</td>
    </tr>
</table> 
```

JS：

```
$('#tableb_copy').html($('#tableb').html()); 
```

# javascript - 不能在 jQuery 中使用 $this

> ID：16125076
> 
> 赞同：0
> 
> 时间：2013-04-20T20:53:19.030
> 
> 标签：javascript, jquery, html, web

我有一个初学者问题。我有“菜单”，菜单是样式表，并且在 jQuery 中获得了使菜单移动的代码。我的问题是，为什么我不能在我的代码中使用 $this 变量？我是 jQuery 的大初学者，所以请耐心等待。我会很高兴得到任何答案。

```
$(document).ready(function(){
    $('.item').hover(function(){
        $($this).stop().animate({paddingLeft: '20px'}, "slow");
}, function(){
        $($this).stop().animate({paddingLeft: '0px'}, "slow");
    });
}); 
```

我的代码：[jsFiddle](http://jsfiddle.net/xfzvq/)

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-20T20:54:12.067

它应该是`$(this)`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-20T20:56:53.330

The `$` prefix (in Javascript/jQuery code) before a variable is typically a convention used to indicate that the variable is a jQuery object (as opposed to a plain Javascript one). If you've seen it before, it's just like any regular variable.

You should use `$(this)` instead, which 'wraps' `this` in a jQuery object.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-20T21:04:18.927

人们经常使用`$this`缓存`$(this)`，这样他们就不必重复启动 jQuery 对象，这很昂贵。

```
$this = $(this)
$this.stop()
$this.animate()
// etc... 
```

这是按约定完成的，`$`javascript中的字符没有特殊含义。想我会提到，因为似乎没有其他人提到过原因。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-20T21:02:51.640

用这个

```
$(document).ready(function(){
    $('.item').hover(function(){
        $(this).stop().animate({paddingLeft: '20px'}, "slow");
    }, function(){
        $(this).stop().animate({paddingLeft: '0px'}, "slow");
    });
}); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-20T21:04:25.147

`$this`并且`this`不一样。在开发中，当我们编写为`var $this = $(this)`比它成为一个 jQuery 对象。`$this`表示`this`目前我们有一个 jQuery 对象。这只是为了参考，您可以使用任何其他变量，因为 $this 不是必需的。您可以编写 vat`$that = $(this)`并使用它，它的行为将相同。

# ruby-on-rails - Capybara::InfiniteRedirectError - 通过 rails 3.2.12 集成测试中的 click_link

> ID：16125077
> 
> 赞同：0
> 
> 时间：2013-04-20T20:53:38.987
> 
> 标签：ruby-on-rails, rspec, capybara, integration-testing

这是一段使用水豚进行 Rails 集成测试的代码：

```
it "should work with links on index page" do
      visit customers_path
      save_and_open_page
      click_link 'Edit'
end 
```

显示的html页面是：

![在此处输入图像描述](https://i.stack.imgur.com/u4a4D.jpg)

页面中有一个编辑链接。但是 click_link 'Edit' 仍然抛出错误：

```
 1) TestPaths GET /customerx_test_paths should work with links on index page
     ←[31mFailure/Error:←[0m ←[31mclick_link 'Edit'←[0m
     ←[31mCapybara::InfiniteRedirectError:←[0m
       ←[31mredirected more than 5 times, check for infinite redirects.←[0m
←[36m     # ./spec/features/customerx/customerx_test_paths_spec.rb:130:in `block (3 levels) in <top (required)>'←[0m 
```

编辑客户通过的集成测试。但是测试中的每个 click_link 都会给我们带来错误。代码可能有什么问题？谢谢。

# javascript - Backbone.js todomvc 为模型添加更多属性

> ID：16125079
> 
> 赞同：0
> 
> 时间：2013-04-20T20:53:43.467
> 
> 标签：javascript, model-view-controller, backbone.js, collections, model

我想尝试 Backbone.js 并从著名的 TodoMVC-App 开始。我想通过输入字段添加更多属性（最初只有一个带有“todo”的输入字段），但我不知道如何。

在我尝试 Angular.js 之前，这更容易一些——现在我被困在应该如何为每个输入字段添加更多属性的问题上。

谁能给我一个提示，实现这一目标的最佳/最简单方法是什么？

一些相关的代码片段：

索引.html：

```
 <tr class="userInputs" >
        <td><input id="toggle-all" type="checkbox"></td>
        <td><input type="text" id="new-todo" placeholder="What needs to be done?" autofocus style="width: 150px"/></td>
        <td><input type="text" id="newQuantity"/></td>

        <td colspan="2"><a ><img src="img/plus.png" id="addItem"></a></td>

    </tr> 
```

模型/todo.js

```
app.Todo = Backbone.Model.extend({

    // Default attributes for the todo
    // and ensure that each todo created has `title` and `completed` keys.
    defaults: {
        title: '',
        quantity: 0,
        completed: false
    }

}); 
```

意见/app.js：

```
initialize: function() {
            this.allCheckbox = this.$('#toggle-all')[0];
            this.$input = this.$('#new-todo');
            this.$footer = this.$('#footer');
            this.$main = this.$('#main');

            this.listenTo(app.Todos, 'add', this.addOne);
            this.listenTo(app.Todos, 'reset', this.addAll);
            this.listenTo(app.Todos, 'change:completed', this.filterOne);
            this.listenTo(app.Todos, 'filter', this.filterAll);
            this.listenTo(app.Todos, 'all', this.render);

            app.Todos.fetch();
        }

addOne: function( todo ) {
    var view = new app.TodoView({ model: todo });
    $('#todo-list').append( view.render().el );
}

newAttributes: function() {
    return {
        title: this.$input.val().trim(),
        quantity: this.$input.val().trim(),
        order: app.Todos.nextOrder(),
        completed: false
    };
}

createOnEnter: function(e) {

    app.Todos.create( this.newAttributes() );
    this.$input.val('');
} 
```

希望这是足够的信息，否则请告诉我！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T21:42:53.913

按照它为标题完成的方式。
添加一个新的输入。更改将`appView#newAttributes`新输入值传递给模型的方法。
更改`appView#createOnEnter`重置字段的方法。
更改`#item-template`以在 Todo 模板中包含新属性。

其他一切都将是自动的（包括将新属性设置为模型（作为参数传递）并将新属性传递给模板（因为我们使用该`Model#toJSON`方法））。

**编辑：**
`this.$input`是对`this.$('#new-todo')`（参见`initialize`方法）的引用，因此它的 val 是标题。您需要创建一个新变量：
In `initialize`：

```
this.$quantity = this.$('#newQuantity'); 
```

在`newAttributes`：

```
quantity: this.$quantity.val();
// you're not making any check here
// add one if necessary (you can use underscore), eg
// _.isNumber(quantity = this.$('#newQuantity')) ? quantity : 0
// number being declared before, else it'd be global 
```

在`createOnEnter`：

```
this.$quantity.val(''); 
```

# c# - 用c#动态设置img src标签

> ID：16125088
> 
> 赞同：-1
> 
> 时间：2013-04-20T20:54:41.973
> 
> 标签：c#, image, dynamic, src

我试图用 C# 设置图像标签的来源，因为模块并不总是在具有相同路径的同一页面上，尽管它不工作。

```
<img id="3ways" src='"<%= ConfigurationManager.AppSettings["Images08"].ToString() + "/3ways.png"%>"' border="0" style="padding-bottom:2px;"> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T01:12:38.030

为什么不使用 runat="server"？例如：

```
<img id="3ways" runat="server" src="" border="0" style="padding-bottom:2px;"> 
```

然后在后端执行此操作：

```
 3ways.Attributes["src"] = ConfigurationManager.AppSettings["Images08"].ToString() + "/3ways.png" 
```

它更清洁，更好地分离关注点。

# node.js - `npm root` 给出了一个不存在的目录的路径

> ID：16125089
> 
> 赞同：1
> 
> 时间：2013-04-20T20:54:44.807
> 
> 标签：node.js, npm

在我的`/Desktop`文件夹中并输入终端时，`npm root`我得到了路径`/Users/Cathy/node_modules`。

但是，`/Users/Cathy/node_modules`不存在，因此该路径不正确。

如果我在`/Users`文件夹中并输入终端`npm root' I get the path`/Users/node_modules`。那个文件夹也不存在。

我不知道那条错误的路径是什么时候设置的，也不知道它们是如何设置的。或者如果文件夹不存在，为什么`npm root`报告它存在？

如果我在一个正在处理的项目中，`npm root`请将我带到我的模块所在的正确位置。

所以，这不会给我带来问题，但我想了解发生了什么。（我不认为我曾经`npm install`在那些更靠近根目录的文件夹中做过。）

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-20T21:07:04.980

`npm root`打印对`node_module`特定位置有效的文件夹位置。

这意味着输出将用于安装。这并不意味着那里是否安装了任何东西。它仅用于用户支持。

# algorithm - 从图中消除顶点

> ID：16125096
> 
> 赞同：0
> 
> 时间：2013-04-20T20:55:44.620
> 
> 标签：algorithm, graph, graph-algorithm, depth-first-search, breadth-first-search

从斯基纳的书中，

设计一个线性时间算法，通过用边 (u,w) 替换边 (u,v) 和 (v,w) 从图中消除每个 2 次顶点 v。我们还试图通过用单个边缘替换它们来消除边缘的多个副本。请注意，删除一条边的多个副本可能会创建一个 2 度的新顶点，必须将其删除，而删除 2 度的顶点可能会创建多个边，也必须将其删除。

一般来说，我至少有一个办法，对于这个问题，我很无奈。这不是 Hw，而只是我自己为面试做的准备。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-21T00:24:44.047

这个问题有两个线索 - 线性时间要求和多副本洞察力。第一个建议不应该处理超过固定次数的顶点，第二个建议需要维护一个队列来决定接下来访问哪个顶点。

基于此，我的总体思路如下。我们维护一个需要处理的顶点队列。如果一个顶点的出度为 2，或者它与一个或多个其他顶点具有多条边，则必须对其进行处理。顶点在被发现时被放置在队列中。向顶点添加或删除边时会发现顶点。

# 处理一个顶点

从队列中删除顶点*v 。*如果它的度数为 2（即 2 个邻居），则删除其邻居 u 和 w 的边**（** O *(* 1 *)*）。如果这样的边不存在 (O(1))，则在*u*和*w*之间添加一条边。如果*u*现在的度数为 2 并且尚未在队列中，则添加到队列的前面。*对w*做同样的事情。（每个 O(1)）

```
Algorithm ProcessVertex(v, Q)
  Remove v from Q;
  IF Degree(v) == 2 and Seen(v) == False:
    Seen(v) = True
    u = Adj(v).first;
    RemoveEdge(u,v);
    w = Adj(v).first;
    RemoveEdge(u,w);
    IF !IsEdge(u,w)
      AddEdge(u,w); 
```

# 算法

遍历顶点列表。对于每个顶点，如果度数为2，则将其加入队列；否则什么也不做。

当队列不为空时，处理前面的顶点。

```
Algorithm EliminateVertices(G)
  Q = empty queue;
  FOR v in G
    IF Degree(v) == 2
      EnqueueFront(v,Q);

  WHILE !IsEmpty(Q)
    ProcessVertex(Front(Q), Q); 
```

# 线性复杂度的证明

*   *我们可以在 O(1) 时间内检查两个顶点i*和*j*之间是否已经存在一条边。这是使用邻接矩阵表示来实现的。在 O(1) 时间内跟踪每个节点的度数也很容易 - 只需在分别向节点添加/删除边时增加或减少计数。因此，每个 ProcessVertex 调用都需要 O(1) 时间。
*   每个顶点最多处理一次。证明：一个顶点一旦从队列中移除就不再存在。我们还可以有效地（O(1)）确保一个顶点不能多次添加到队列中（在每个顶点中标记它是否已经在队列中，如果是则不添加）。因此，最多有 O(n) 个 ProcessVertex 调用。

# algorithm - O(1) 额外空间查找数据结构

> ID：16125099
> 
> 赞同：4
> 
> 时间：2013-04-20T20:55:49.353
> 
> 标签：algorithm

我想知道是否有一个简单的数据结构支持分摊的 log(n) 查找和插入，就像自平衡二叉搜索树一样，但具有恒定的内存开销。（我真的不关心删除元素）。

我的一个想法是将所有内容存储在一个连续的内存块中，该内存块分为两个连续的块：对所有元素进行排序的 S 部分和未排序的 U 部分。

要执行插入，我们可以在 U 中添加一个元素，如果 U 的大小超过 log(S 的大小)，则对整个连续数组进行排序（将 S 和 U 视为一个连续数组），这样在排序所有内容都在 S 中，而 U 为空。

要在 S 上执行查找运行二进制搜索，只需查看所有 U。

但是，我无法计算我的算法的摊销插入时间。

最终，我只会欣赏一些具有所需属性的相当简单的算法/数据结构，并保证它在摊销时间内运行得相当快。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T21:11:55.097

如果通过恒定的内存开销，您的意思是对于**存储**在数据结构中的元素，`N`空间消耗应该是树包含一个元素，有这个属性。`O(N)`**`n``n > 1`**

 **`N`这是因为任何具有节点的树图都有`N - 1`边这一事实。

如果通过恒定数量的内存开销，您的意思是`N`元素的空间消耗应该是`N + O(1)`，那么平衡树和哈希表都没有这个属性 - 两者都将使用`k * N`内存，`k > 1`因为在树的情况下额外的节点指针和哈希表的负载因子。

我觉得你的方法很有趣，但我认为即使你只对 U 进行排序，然后在线性时间内合并这两个集合，它也不会起作用。您需要`O(logN * log(logN))`在每次`logN`更新后进行排序（操作），然后`O(n)`合并 S 和 U（请注意，到目前为止，[实际上没有人知道如何在线性时间内做到这一点](http://citeseerx.ist.psu.edu/viewdoc/download?doi=10.1.1.22.5514&rep=rep1&type=pdf)，也就是说，没有额外的数组）。

摊销的插入时间为`O(n / logN)`. `O(√n)`但是，如果您允许 U 的大小增长到 S 的平方根，您也许可以使用您的方法来实现接近的目标。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-20T20:58:34.837

任何哈希表都会这样做。唯一棘手的部分是如何解决冲突 - 解决冲突的方法很少，另一个棘手的部分是正确的哈希计算。

见： [http ://en.wikipedia.org/wiki/Hash_table](http://en.wikipedia.org/wiki/Hash_table)**

# android - 以街景图像为图标的 Google Maps API v2 标记

> ID：16125101
> 
> 赞同：0
> 
> 时间：2013-04-20T20:56:32.640
> 
> 标签：android, google-maps-api-2, google-street-view

我正在使用 Google Maps Android API v2，并且我已经正确设置了所有内容。我已经根据纬度/经度设置了一些标记。

如何将 lat/lng 的街景图像添加为图标？

```
/* Google Maps API v2 map set code here */
Marker marker = map.addMarker(new MarkerOptions().position(point)
  .title("Title")
  .snippet("Snippet")
  .icon(  StreetViewObject? )); 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-24T13:28:19.147

您可以使用此 api 根据您的纬度和经度获取图像：

[https://developers.google.com/maps/documentation/streetview/](https://developers.google.com/maps/documentation/streetview/)

# google-analytics - Google Analytics tracking within Lightbox image gallery

> ID：16125113
> 
> 赞同：0
> 
> 时间：2013-04-20T20:57:41.457
> 
> 标签：google-analytics, lightbox

I found some topics which might have been related to my issue, but I wasn't 100% sure.

I want to setup Events tracking (Google Analytics) so that I know which photos from a Lightbox image gallery attract the most attention.

I used this:

```
a rel="lightbox[portrait]" href="images/image-14.jpg" onClick="_gaq.push(['_trackEvent', 'Image', 'Open Image', '14' ]);"><img src="images/thumb-14.jpg"></a> 
```

But of course, if the visitor then uses the left/right arrows to navigate, I only know which photo was the initial click.

Is there any way around this?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T23:51:20.457

我认为您现有的设置回答了您的问题。灯箱内的左/右箭头导航并不能真正告诉您给定用户发现哪些照片有趣，因为他们不再选择。

话虽如此，但它是一种参与度的衡量标准。您可以做的是计算用户进行了多少次转换 + 初始选择，并将其作为自定义变量或自定义指标（在 GA Universal 的情况下）推送，然后您可以设置阈值来限定访问者。

# c# - Read Intergers from file into int variables or Vector3

> ID：16125116
> 
> 赞同：0
> 
> 时间：2013-04-20T20:58:14.310
> 
> 标签：c#, file-io, input, xna

How do i input integers from a file into a vector3 or a int variable? This is my code what works for only string

```
using (var enviromentPos = new FileStream("enviromentPos.txt", FileMode.OpenOrCreate))
{
  using(var input = new StreamReader(enviromentPos))
  {
    int line = "";

    while ((line = input.ReadLine()) != null)
    {
    }
  }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T21:02:29.967

```
String line="";
List<int> foo = new List<int>()    
while ((line = input.ReadLine()) != null)
{
    int i=0;
    if(int.TryParse(line,out i)) foo.Add(i);
} 
```

将逐行读取并将所有包含 int-parseable 内容的行添加到列表中作为解析的 int 值

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-20T21:21:12.617

获得读取输入的代码后：

```
String line = null;
var input = new List<int>();
while ((line = file.ReadLine()) != null)
{
    int i = 0;
    if( int.TryParse(line,out i))
    {
       input.Add(i);
    }
} 
```

您可以在之后处理该列表：

```
var vectors = new List<Vector3>();
for (int index = 0; index < input.Count; index += 3)
{
    vectors.Add(new Vector3(input[index], input[index+1], input[index+2]);
} 
```

您需要通过截断或填充来确保输入是三的倍数。

或者您可以在阅读时处理输入，但是您需要一个计数器，以便您可以`vectors.Add`每隔三个从文件中读取的值执行一次代码：

```
String line = null;
var input = new List<int>();
int count = 0;
var vectors = new List<Vector3>();
while ((line = file.ReadLine()) != null)
{
    int i = 0;
    if( int.TryParse(line,out i))
    {
       input.Add(i);
       count++;
       if (count % 3 == 0)
       {
          vectors.Add(new Vector3(input[count-2], input[count-1], input[count]);
       }
    }
} 
```

# php - 使用 Joomla 删除另一个表中的多行

> ID：16125121
> 
> 赞同：2
> 
> 时间：2013-04-20T20:58:48.907
> 
> 标签：php, mysql, joomla

我在互联网上搜索了这个问题的一个很好的答案，但没有任何结果。我正在尝试删除另一个表中的多行，而不是从执行组件的位置。

基本上，当我在组件 A 中删除 4 行时，这些行也必须在组件 B 中删除。密钥存在于另一个表中，所以这不是问题。我可以通过一些快速而肮脏的 mysql 查询轻松地做到这一点，但我想用 Joomla 的内置方法来做到这一点。

在 joomla 中，从 JControllerAdmin 中使用删除方法，其中使用 getModel 获取模型，然后执行另一个删除方法。但我似乎找不到这个删除方法实际删除行的位置。

顺便说一句，我已经从 JControllerAdmin 复制粘贴了删除方法并将其粘贴到我自己的控制器中。我确实更改了名称，但一切正常

所以现在我求助于 Stackoverflow 来解决我的问题。长话短说：我有一个 customDelete() 方法，它是 JControllerAdmin 类中 delete 方法的相同副本，我想添加允许我使用 customDelete() 方法中的 id 删除另一个表中的行的功能.

我希望这很清楚:)

谢谢！

编辑：这是控制器中的删除方法。我必须从`#__modeling`（与组件 B 对应的表）中删除所有包含 id 的行`$cid`

```
 public function customDelete() {

    // Check for request forgeries
    JSession::checkToken() or die(JText::_('JINVALID_TOKEN'));

    // Get items to remove from the request.
    $cid = JRequest::getVar('cid', array(), '', 'array');

    if (!is_array($cid) || count($cid) < 1) {
        JError::raiseWarning(500, JText::_($this->text_prefix . '_NO_ITEM_SELECTED'));
    } else {
        // Get the model.
        $model = $this->getModel();

        // Make sure the item ids are integers
        jimport('joomla.utilities.arrayhelper');
        JArrayHelper::toInteger($cid);
        // Remove the items.
        if ($model->delete($cid)) {
            $this->setMessage(JText::plural($this->text_prefix . '_N_ITEMS_DELETED', count($cid)));
        } else {
            $this->setMessage($model->getError());
        }
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-25T09:52:19.320

这并不难。

基本上，您需要做的就是调用与#__modeling 表相关的不同模型。所以你需要一个我们可以称之为建模的模型，它看起来像：

```

```
``<?php

// No direct access to this file
defined('_JEXEC') or die('Restricted access');

// import Joomla modelform library
jimport('joomla.application.component.modeladmin');

/**
 * Modeling Model
 */
class MyModelModeling extends JModelAdmin { 

  /**
   * Returns a reference to the a Table object, always creating it.
   *
   * @param type    The table type to instantiate
   * @param string  A prefix for the table class name. Optional.
   * @param array   Configuration array for model. Optional.
   * @return    JTable  A database object
   * @since 1.6
   */
  public function getTable($type = 'Modeling', $prefix = 'MyTable', $config = array()) 
  {
    return JTable::getInstance($type, $prefix, $config);
  }

}`` 
```

 上面的模型扩展了 JModelAdmin（它有 delete 方法）并告诉 delete 方法从哪个表中删除（因为 getTable 是由 delete() 方法调用的）。它应该进入管理员/您的组件/模型。

您还需要一个 JTable 类，如下所示：

```

```
`<?php
/**
 * @package     Joomla.Administrator
 * @subpackage  com_users
 *
 * @copyright   Copyright (C) 2005 - 2013 Open Source Matters, Inc. All rights reserved.
 * @license     GNU General Public License version 2 or later; see LICENSE.txt
 */

defined('_JEXEC') or die;

/**
 * Modeling table class
 *
 * @package     Joomla.Administrator
 * @subpackage  com_users
 * @since       2.5
 */
class MyTableModeling extends JTable
{
    /**
     * Constructor
     *
     * @param  JDatabaseDriver  &$db  Database object
     *
     * @since  2.5
     */
    public function __construct(&$db)
    {
        parent::__construct('#__modeling', 'id', $db);
    }
}` 
```

因此，您可以看到 JTable 类指向您要从中删除的表。这应该进入 yourcomponent/tables 文件夹。

然后，您应该能够更改您的 customDelete 方法，如下所示：

```

```
 `public function customDelete() {

    // Check for request forgeries
    JSession::checkToken() or die(JText::_('JINVALID_TOKEN'));

    // Get items to remove from the request.
    $cid = JRequest::getVar('cid', array(), '', 'array');

    if (!is_array($cid) || count($cid) < 1) {
        JError::raiseWarning(500, JText::_($this->text_prefix . '_NO_ITEM_SELECTED'));
    } else {
        // Get the model.
        $model = $this->getModel();

        // Make sure the item ids are integers
        jimport('joomla.utilities.arrayhelper');
        JArrayHelper::toInteger($cid);
        // Remove the items.
        if ($model->delete($cid)) {
            $this->setMessage(JText::plural($this->text_prefix . '_N_ITEMS_DELETED', count($cid)));
        } else {
            $this->setMessage($model->getError());
        }
        // Get the modeling model
        $new_model = JModelLegacy::getInstance('Modeling','MyModel');
        if ($new_model->delete($cid)) {
          // Items deleted from #__modeling table
        } else {
          // 
        }

    }` 
```

高温高压

一种

```

``` 
```

# javascript - 如何使用 d3 访问变量输入/将参数传递给回调

> ID：16125124
> 
> 赞同：0
> 
> 时间：2013-04-20T20:58:57.377
> 
> 标签：javascript, d3.js

这可能是一个 JS 问题，也许不仅仅是一个 D3 问题

我在一个页面上有几个 D3 可视化，所有这些都是从相同的代码构建的。为了拥有某种命名空间，我创建了一个类（嗯，JS 中的一个函数），我实例化了它。类似于以下内容：

```
function AlmViz(params) {
    ... 
    this.svg = this.chartDiv.append("svg")
        .attr("width", this.width + this.margin.left + this.margin.right)
        .attr("height", this.height + this.margin.top + this.margin.bottom)
      .append("g")
        .attr("transform", "translate(" + this.margin.left + "," + this.margin.top + ")");
        ...
}

function loadData(viz) {
    ...   
    viz.svg.selectAll(".bar")
        .data(level_data)
      .enter().append("rect")
             ...
     ...
}

 // I loop here and call this several times
 // with different paramters, so I get a bunch of 
 // different graphs
var viz = new AlmViz(params);
loadData(viz);

 chartDiv.svg.append("a")
    .attr("href", "#")
    .text("to change click here")
    .on("click", change); 
```

我现在想添加一些转换，这需要使用 .on("click", change)。但是，在所有 d3 示例中，change 函数依赖于对当前范围内的变量的访问。如何访问与特定实例附带的图表对应的 AlmViz 实例？

注意：这已发布在 d3 Google 群组上，但似乎并没有引起太多关注，所以我想我会回到 STO。原帖在这里： [https ://groups.google.com/forum/?fromgroups=#!topic/d3-js/1o4mYnMJZTA](https://groups.google.com/forum/?fromgroups=#!topic/d3-js/1o4mYnMJZTA)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-20T22:15:36.337

您可以将当前状态作为参数传递给您的更改函数，如下所示：

```
.on("click", function() { change(viz); }); 
```

# java - 使用箭头键遍历 JMenuBar 时跳过禁用的 JMenu

> ID：16125126
> 
> 赞同：1
> 
> 时间：2013-04-20T20:59:07.450
> 
> 标签：java, swing, look-and-feel, jmenubar

我有一个包含 JMenuBar 的 JFrame 的 Java 应用程序。我正在使用 Windows L&F。

当 JMenuBar 处于活动状态时，选定的 JMenu 将突出显示。用户可以通过按左/右箭头键移动到上一个/下一个 JMenu。

我遇到的问题是禁用的 JMenus。在 Windows L&F 中，使用箭头键遍历禁用的 JMenus 时不会跳过它们，它们也不会突出显示。当用户移动到禁用的 JMenu 上时，没有关于他在哪里的视觉线索。

有什么方法可以修改 JMenuBar 行为以跳过禁用的 JMenus？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-20T22:11:53.020

为了弄清楚导航是如何完成的，我查看了 BasicPopupMenuUI ，在那里我发现了两个调用方法`next/previousEnabledChild(...)`，它们正在检查以下 UIManager 属性：

```
UIManager.getBoolean("MenuItem.disabledAreNavigable") 
```

因此，在将 LAF 设置为 windows 之后，我添加了以下代码行：

```
UIManager.put("MenuItem.disabledAreNavigable", Boolean.FALSE); 
```

它现在可以按您的预期工作。

# jsf - 在 JBoss 7.1 上设置 JSF 应用程序

> ID：16125128
> 
> 赞同：1
> 
> 时间：2013-04-20T20:59:27.260
> 
> 标签：jsf, deployment, jboss, forms-authentication, container-managed

我想在 JBoss 7.1 上部署一个工作的 JSF 应用程序（Tomcat 7.0.34）到目前为止我已经配置了数据源，它正在工作。但是我在设置容器管理的身份验证时遇到了麻烦。通过调用 index.xhtml，所有项目都从 DB 中正确加载。但是当我登录时，用户没有任何角色。因此，不允许他访问他的客户详细信息页面。因此，我想问一下，我是否忘记了要配置的内容。

我的配置：

独立的.xml

安全域似乎工作正常。如果我将选定的列 'role' 更改为 'r'，则会在登录期间引发异常。

```
...
<datasource jndi-name="java:jboss/datasources/MySqlDS" pool-name="MySqlDS" enabled="true" use-java-context="true" use-ccm="true">
    <connection-url>jdbc:mysql://localhost:3306/bookstore</connection-url>
    <driver>mysql</driver>
        <security>
            <user-name>bookstore</user-name>
            <password>book$tore</password>
        </security>
</datasource>
...
<security-domain name="SgpRealm" cache-type="default">
    <authentication>
        <login-module code="Database" flag="required">
            <module-option name="dsJndiName" value="java:jboss/datasources/MySqlDS"/>
            <module-option name="principalsQuery" value="SELECT pwd FROM customer where eMail=?"/>
            <module-option name="rolesQuery" value="SELECT role, role FROM roles WHERE eMail=?"/>
            <module-option name="unauthenticatedIdentity" value="anonymous"/>
            <module-option name="password-stacking" value="useFirstPass"/>
        </login-module>
    </authentication>
</security-domain> 
```

jboss-web.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<jboss>
    <security-domain>SgpRealm</security-domain>
</jboss> 
```

web.xml

```
<security-constraint>
    <web-resource-collection>
    <web-resource-name>Authenticated admins only</web-resource-name>
    <url-pattern>/faces/sections/admin/*</url-pattern>
</web-resource-collection>
<auth-constraint>
    <role-name>ADMIN</role-name>
    </auth-constraint>
</security-constraint>

<login-config>
    <auth-method>FORM</auth-method>
<form-login-config>
    <form-login-page>/faces/sections/authentication/login.xhtml</form-login-page>
    <form-error-page>/faces/sections/authentication/loginFailed.xhtml</form-error-page>
</form-login-config>
</login-config>

<security-role>
    <role-name>ADMIN</role-name>
</security-role> 
```

login.xhtml

```
<h:form prependId="false">
<table id="loginTable" >
    <tr>
        <td><h:outputLabel for="email" value="#{msgs.username}" />
        </td>
        <td><h:inputText id="email" value="#{login.eMail}"
                            required="true" style="width:100%" /></td>
    </tr>
    <tr>
        <td><h:outputLabel for="password" value="#{msgs.password}" />
        </td>
        <td><h:inputSecret id="password" value="#{login.password}"
                            required="true" style="width:100%" /></td>
    </tr>
    <tr height="50px">
        <td colspan="2"><h:commandButton value="#{msgs.login}"
                            actionListener="#{login.doLogin}" style="width:104%" /></td>
    </tr>

</table>    
</h:form> 
```

Login.java#doLogin(...) 方法

```
public void doLogin(ActionEvent e) throws IOException {
FacesContext context = FacesContext.getCurrentInstance();
HttpServletRequest request = (HttpServletRequest) context
    .getExternalContext().getRequest();

try {
    // Try to login customer via container management
    request.login(eMail, password);

            /*
             * Prints out the username (eMail) of the logged in user !!!
             */                
            System.out.println(request.getUserPrincipal());

            if(request.isUserInRole("ADMIN")){

                    /*
                     * This part of source is never reached!!!!
                     */  

                    System.out.println("Role: ADMIN");
            }
            ... 
```

通过使用 Tomcat 实例，在 META-INF 目录中有一个名为 context.xml 的文件。（对于 JBoss 我删除了它）

```
<Context>

    <Resource name="jdbc/bookstore" 
    auth="Container" 
    type="javax.sql.DataSource"
        username="bookstore"
        password="book$tore"
        driverClassName="com.mysql.jdbc.Driver"
        url="jdbc:mysql://localhost/bookstore"/>

</Context> 
```

我需要什么吗？JBoss 类似，还是需要其他配置文件？

非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-28T17:06:24.583

所以，我的应用程序现在在 JBoss 上运行。我刚刚将安全域从

```
<security-domain name="SgpRealm" cache-type="default">
<authentication>
    <login-module code="Database" flag="required">
        <module-option name="dsJndiName" value="java:jboss/datasources/MySqlDS"/>
        <module-option name="principalsQuery" value="SELECT pwd FROM customer where eMail=?"/>
        <module-option name="rolesQuery" value="SELECT role, role FROM roles WHERE eMail=?"/>
        <module-option name="unauthenticatedIdentity" value="anonymous"/>
        <module-option name="password-stacking" value="useFirstPass"/>
    </login-module>
</authentication> 
```

到

```
<security-domain name="SgpRealm" cache-type="default">
<authentication>
    <login-module code="Database" flag="required">
        <module-option name="dsJndiName" value="java:jboss/datasources/MySqlDS"/>
        <module-option name="principalsQuery" value="SELECT pwd FROM customer where eMail=?"/>
        <module-option name="rolesQuery" value="SELECT role, role FROM roles WHERE eMail=?"/>
    </login-module>
</authentication> 
```

文件 context.xml 仍然被删除。

# c# - How to store hierarchy in Entity Framework

> ID：16125134
> 
> 赞同：0
> 
> 时间：2013-04-20T20:59:55.577
> 
> 标签：c#, asp.net, asp.net-mvc, user-interface, hierarchy

Take a look at the following UI:

![ui mockup](https://i.stack.imgur.com/aNBIF.png)

I am allowing the user, who owns an auto shop of some kind, to select what types of service his shop provides. There are 5 levels to my hierarchy and thousands of total entries. Selecting (checking) any skill area automatically selects all sub-areas or child areas. Each area has an ID which for the top level looks like 10000, the next level 11000, etc...

My questions:

1.  How can I achieve this UI with one code base supporting mobile, tablet and desktop interfaces?
2.  How can I represent the hierarchy using Entity Framework for populating the hierarchy as well as storing the user's selections?

The application is in ASP.Net MVC 4 using SimpleMembership.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T21:42:03.007

1.  让一个代码库支持多个平台的最佳方法是将 ASP.NET MVC 4 WebAPI（JSON 或 XML）用作 REST Web 服务。你可以在这里找到更多关于它的信息：[http ://www.asp.net/web-api](http://www.asp.net/web-api)

还有一些现成的解析器可以将 JSON/XML 数据反序列化为客户端的 C# 对象。

第二个问题似乎与实体框架抽象背后的数据库模式更相关。就 EF 而言，组织数据的最佳方式可能是让类别引用其他类别，最后一个类别引用实际服务。您熟悉数据库关系、外键等概念吗？

编辑：

```
 public class Category1{
    public string Name { get; set; }

    public virtual ICollection<Item> Items { get; set; }
}

public class Category2{
    public string Name { get; set; }

    public Category1 ParentCategory { get; set; }

    public virtual ICollection<Item> Items { get; set; }
}

public class Item{
    public string Name { get; set; }
    public decimal Price { get; set; }
} 
```

这是一个示例，您将如何编写代码优先的 EntityFramework 对象。Category2 有一个 Category1 类型的父类，并且两个类别都包含一个项目集合。Pluralsight 有一个关于 EF 代码优先的[优秀课程](http://pluralsight.com/training/Courses/TableOfContents/ef41-code-first)，涵盖了所有基础知识。

# prolog - Prolog实践，需要弄清楚为什么我会出错

> ID：16125140
> 
> 赞同：1
> 
> 时间：2013-04-20T21:00:34.773
> 
> 标签：prolog

嘿，我正在准备考试，但我无法弄清楚其中一个练习题。我能得到一些帮助吗？

这就是问题：定义一个名为 power10 的谓词，它接受两个参数。当且仅当 P 是 X 可以被 10 整除的次数时，power10(X,P) 应该为真。换句话说，您正在计算 X 末尾有多少个零。（但如果您知道如何在 Prolog 中将整数转换为字符串，您可能不会用它来找到答案！）您可能会假设 X 绑定到一个正整数。P 可以绑定或不绑定。

这就是我到目前为止所拥有的，我收到错误并且我不确定如何让它输出我的 P 值。

```
power10(X,P):-
    X mod 10 =\= 0.

power10(X,P):-
    X mod 10 =:= 0,
    Remainder is X//10,
    power10(Remainder,Counter),
    P is Counter+1. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T21:13:34.420

在您的第一个谓词中，您永远不会为`P`. 试试这个：

```
power10(X, 0) :-
    X mod 10 =\= 0. 
```

# javascript - 使 int 等于两个数字之间的值？

> ID：16125149
> 
> 赞同：-4
> 
> 时间：2013-04-20T21:01:31.493
> 
> 标签：javascript

假设我有一个 int = 30;。我将如何使 int = 30 到 80 之间的任何值而不是仅仅让 int 等于一个数字（如 30）？谢谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-20T21:14:06.027

```
<div id="result"></div>

var min = 30;
var max = 80;

document.getElementById("result").textContent = Math.floor(Math.random() * (max - min + 1)) + min; 
```

在[jsfiddle上](http://jsfiddle.net/Xotic750/brFpc/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-20T21:06:56.900

在**JavaScipt**中：

```
var x = Math.floor( Math.random()*(81-30) +30); 
```

[请参阅W3Schools](http://www.w3schools.com/jsref/jsref_obj_math.asp)和[Mozilla Developer Network](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Math)上的数学对象描述。

对此答案的评论表明，价值`Math.floor`回报是“任意的”。然而，它是一个`Number`. 请参阅[ECMAScript 3 规范](http://www.ecma-international.org/publications/files/ECMA-ST/Ecma-262.pdf)，“15.8.2.9 floor(x)”，第 162 页。并且根据相同的规范（“8.5 The Number Type”，第 29 页），数字值是一个`double-precision 64-bit format IEEE 754`值。或者用普通程序员理解的话来说：“double”或“float”类型。如果您手头有[JavaScript: The Definitive Guide](https://rads.stackoverflow.com/amzn/click/com/0596000480)一书，那么您可以从第 31 页（“3.1 数字”）和转发中阅读有关数字类型的信息。

我的旧答案以为您说的是 Java：

~~随机 r = new Random(); int x = r.nextInt(81 - 30) + 30;~~

~~请参阅[随机 API 文档](http://docs.oracle.com/javase/7/docs/api/java/util/Random.html)。~~

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-20T21:19:20.140

```
function getInt(lo, hi) {
    var l = parseInt(lo);
    var h = parseInt(hi);
    return parseInt(Math.random() * (h - l)) + l;
}

function isBetween(x, lb, ub) {
    return x >= lb && x <= ub;
}

for (var i = 0; i < 10; i++) {
    var lo = 30, hi = 80
    var x = getInt(lo, hi);
    var b = isBetween(x, lo, hi);
    document.write(x + '-' + b + '<br/>');
} 
```

[试试看。](http://jsfiddle.net/P63KX/)

# iphone-5 - UIImageView 以编程方式自动调整大小

> ID：16125155
> 
> 赞同：2
> 
> 时间：2013-04-20T21:02:24.203
> 
> 标签：iphone-5, autoresize

我试图在我的 UIViewController 底部对齐一个 imageView，但在 iPhone 5 模拟器上它没有在底部对齐。

我试图在故事板的底部放置一个 imageView 并且它正确对齐，所以我想我错过了我的代码中的某些内容。

有什么建议吗？

谢谢，e。

```
imageView=[[UIImageView alloc] initWithFrame:CGRectMake(0, 416, 320, 64)];
[imageView setContentMode:UIViewContentModeScaleToFill];
imageView.autoresizingMask=UIViewAutoresizingFlexibleHeight | UIViewAutoresizingFlexibleTopMargin;
[self.view addSubview:imageView]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-04T08:43:39.403

像这样设置帧大小：

```
UIImageView *imageView = [[UIImageView alloc] initWithFrame:CGRectMake(self.view.frame.origin.x, self.view.frame.size.height-64, 320, 64)];
[imageView setContentMode:UIViewContentModeScaleToFill];
[self.view addSubview:imageView]; 
```

希望这会有所帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-22T20:23:54.760

收到，用过

```
[self.view addConstraints:[NSLayoutConstraint constraintsWithVisualFormat:@"V:[xmlView]|"
                                                                  options:0
                                                                  metrics:0 views:NSDictionaryOfVariableBindings(xmlView)]]; 
```

# c# - XNA 4 C# - 不是 Alpha 混合到黑色

> ID：16125158
> 
> 赞同：0
> 
> 时间：2013-04-20T21:02:33.063
> 
> 标签：c#, xna, xna-4.0, alphablending

我正试图让我的启动画面淡入黑色。我意识到它会淡入`GraphicsDevice.Clear(Color.White);`默认更新方法的默认行中清除屏幕的任何颜色。当我把它变成白色时，我的图像会变成白色，这是有道理的。所以我将它从白色更改为黑色，但我的图像不再褪色或看起来不像。

```
public void SplashUpdate(GameTime theTime)
        {
            gameTime = theTime;

            if ( theTime.TotalGameTime.Seconds > 1.4 )
            {
                Draw.blender.A --;
                if (Draw.blender.A == 0)
                {
                    game1.currentState = PixeBlastGame.Game1.GameState.gameSplash;
                    MediaPlayer.Play(Game1.sMenu);
                }
            }
        } 
```

blender 是应用于启动画面的纹理的颜色，定义如下，`public static Color blender = new Color(255, 255, 255);`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T23:42:53.117

Xna 4.0 使用预乘 alpha，因此您的代码不正确....您应该将颜色乘以 alpha...但我会做类似的事情：

```
 float fadeDuration = 1;
 float fadeStart = 1.4f;
 float timeElapsed = 0;
 Color StartColor = Color.White;
 Color EndColor = Color.Transparent;

 void Update(GameTime time)
 {
     float secs = (float) time.ElapsedTime.TotalSeconds;

     timeElapsed += secs;
     if (timeElapsed>fadeStart)
     {
          // Value in 0..1 range
          var alpha =(timeElapsed - fadeStart)/fadeDuration;  
          Draw.Blender = Color.White * (1 - alpha);
          // or Draw.Blender = Color.Lerp(StartColor, EndColor, alpha);

          if (timeElapsed>fadeDuration + fadeStart)
          {
                Draw.Blender = EndColor;
                // Change state
          }
     }
 } 
```

# javascript - 这在 Durandal 视图模型中的价值

> ID：16125160
> 
> 赞同：2
> 
> 时间：2013-04-20T21:02:42.720
> 
> 标签：javascript, knockout.js, requirejs, durandal

我有一个令我困惑的问题。我有一个如下定义的 Durandal 视图模型，但是`this`当我逐步执行代码时，它的值和其他变量和函数会在各处进行更改和更改。

我已经在下面评论了，因为它更容易在代码中移动时显示各种值。

```
define(['durandal/plugins/router'], function (router) {

    var _outerRouter = router;
    var _outerSelf = this;

    var viewModel = function () {

        var _self = this;
        var _router = router;
        var _searchCriteria = ko.observable('');
        var _searchResults = ko.observableArray([]);
        var _messages = ko.observableArray([]);

        this.searchCriteria = _searchCriteria;
        this.searchResults = _searchResults;
        this.messages = _messages;

        this.search = function () {

            //
            // When called from the view bindings:
            //  > this = viewModel
            //  > _self = _outerSelf = _outerRouter = undefined
            //  > _router = defined
            //
            var that = this;

            //
            // N.B. I set callback context to the viewModel
            //
            var req = $.ajax({
                url: '../api/v1/things',
                dataType: 'json',
                context: this,  
                data: {
                    searchCriteria: this.searchCriteria()
                }
            })
            .done(function (results, status, request) {

                //
                // When called back:
                //  > this = viewModel 
                //  > _self = _outerSelf = _outerRouter = undefined
                //  > _router = defined
                //
                this.searchResults.removeAll();
                this.messages.removeAll();

                //
                // Now when calling:
                //  > doShowResult = showResult = undefined
                //  > this.showResult = defined (have to use 'this')
                //  > displayMultipleResults = defined
                //
                if (results.length == 1) {                    
                    this.showResult(results[0]);
                }
                else {
                    displayMultipleResults(results);
                }
            });

            function displayMultipleResults(results) {

                //
                // When called from ajax.done():
                //  > this = Window ?!?!
                //  > that = viewModel
                //  > _self = _outerSelf = _outerRouter = undefined
                //  > _router = defined
                //
                that.messages.push({ title: 'Found Lots of Things', body: "Please select...blah blah blah", type: 'info' });

                for (var i = 0; i < results.length; i++)
                    that.searchResults.push(results[i]);
            };
        };

        function doShowResult(result) {

            //
            // When called from ajax.done():
            //  > this = viewModel
            //  > _self = _outerSelf = _outerRouter = undefined
            //  > _router = defined
            //
            // and then
            //
            // When called from the view bindings:
            //  > this = the bound searchResult object
            //  > _self = _outerSelf = _outerRouter = undefined
            //  > _router = defined
            //
            _router.navigateTo('show-my-thing');
        }

        this.showResult = doShowResult;
    };

    return viewModel;
}); 
```

这是它必然的观点：

```
<div>
    <div class="container-narrow">    
        <div class="row-fluid">
            <div class="span12">
                <h3>Search</h3>

                <p>Enter search criteria...</p>

                <div class="control-group">
                    <input type="text" class="input-block-level" placeholder="Criteria" data-bind="value: searchCriteria"/>
                </div>

                <div class="pull-right">
                    <button class="btn btn-primary" data-bind="click: search">
                        <i class="icon-search icon-white"></i> Search
                    </button>
                </div>

            </div>
        </div>
        <br />

        <!-- ko foreach: messages -->
        <div class="row-fluid">
            <div class="alert" data-bind="css: { 'alert-error': type == 'error', 'alert-info': type == 'info', 'alert-success': type == 'success' }">
                <strong data-bind="text: title"></strong> <span data-bind="text: body"></span>
            </div>
        </div>
        <!-- /ko -->

        <!-- ko foreach: searchResults -->
        <div class="row-fluid">
            <div class="span12 well well-small">                
                <div class="span10 search-result">
                    <label>Resut:</label> <span data-bind="{text: $data}"></span><br />
                </div>
                <div class="span2">                    
                    <button class="btn btn-mini btn-success pull-right" data-bind="click: $parent.showResult">
                        View
                    </button>
                </div>
            </div>        
        </div>    
        <!-- /ko -->

    </div>
</div> 
```

我的主要问题是：

1.  为什么我可以在任何地方访问`_router`但不能访问`_self`（或任何其他变量（_searchCriteria 等）？

2.  当执行在内部`ajax.done()`并且`this`等于 viewModel 的值但在进入 displaySearchResult 之后`this`等于 Window 对象时，如何？

3.  当在里面`ajax.done()` `doShowResult`并且`showResult`是`undefined`但工作正常时`this.showResult`，肯定是否`this`定义了？`viewModel``showResult`

4.  幸运的是，在这种情况下，我只需要导航`doShowResult`并`_router`在我从视图绑定和视图绑定调用时定义`ajax.done`。但是，如果我需要从视图模型中访问一个值——如果从视图绑定中调用，这将不可用——我如何更改绑定或代码以支持这一点（最好以非 hacky 方式）？

预先感谢任何人都可以对此有所了解。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-22T11:54:58.330

'this' 关键字在 JavaScript 中的行为与其他语言非常不同，可见范围的概念也是如此。

在任何给定时间，“this”的值取决于您从中访问它的函数的调用上下文。调用方法有四种不同的方法，每种方法对“this”都有不同的含义。

1.  作为函数调用（调用命名函数）：this = window（即全局对象）。

    ```
    function fName() { };
    fName(); // this = window 
    ```

2.  作为方法调用（调用对象的属性）：this = 对象

    ```
    var o = {};
    o.whatever = function() {};
    o.whatever(); // this = o 
    ```

3.  作为构造函数调用（使用 new 关键字）：this = 新对象

    ```
    var Animal = function() { }; // best practice to capitalise the initial letter of function intended to be called as constructor.
    var cat = new Animal(); // this = (what will become cat) 
    ```

4.  使用 apply() 和 call() 方法调用：（this = 第一个参数）

    ```
    function fName() { };
    var obj1 = {};
    fName.apply(obj1); // this = obj1
    fName.call(obj1); // this = obj1 
    ```

# python - 使用记事本++运行python，但它给了我一个语法错误，即使它是正确的

> ID：16125162
> 
> 赞同：-1
> 
> 时间：2013-04-20T21:02:45.733
> 
> 标签：python, syntax-error

我正在使用python 27，代码是

```
print "HI". 
```

我用了

```
C:\Python27\python.exe -i "$(FULL_CURRENT_PATH)" 
```

让notepad ++与python一起工作，如果这有所作为。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-20T21:03:52.127

您在字符串*之外*有一个句号：

```
print "HI".
   # -----^ 
```

那不是合法的Python：

```
>>> print "HI".
  File "<stdin>", line 1
    print "HI".
             ^
SyntaxError: invalid syntax 
```

删除它或将其移动*到*字符串中：

```
print "HI." 
```

# javascript - 通过 REST 填充 HTML 表单

> ID：16125168
> 
> 赞同：0
> 
> 时间：2013-04-20T21:03:34.623
> 
> 标签：javascript, html, rest, twitter-bootstrap

我有一个 HTML 表单（twitter 引导程序）。用户输入一些字段，我希望通过 REST 调用自动填充一些字段。目前我有如下模拟/硬编码的 REST 调用（填充单个字段）

```
<div class="widget-content nopadding">
<form id="my_wizard" class="form-horizontal" action="/rest/my-wizard-service"        novalidate="novalidate" method="post">
<div class="control-group">
<label class="control-label">Customer ID</label>
<div class="controls">
<label class="control-label">GB02FFF30565</label>
</div>
</div>
.... 
```

我怎样才能替换这条线

```
<label class="control-label">GB02FFF30565</label> 
```

使用 RESTful 调用检索数据“GB02FFF30565”？

谢谢

# java - 在父子持久化中生成父ID

> ID：16125172
> 
> 赞同：1
> 
> 时间：2013-04-20T21:03:41.390
> 
> 标签：java, hibernate, jpa

我有一对多的父子关系，我只想将整个事情坚持一次。我遇到的问题是孩子里面有父母的ID，但是在持久化时，它无法获得该ID，因为它是生成的。这是我到目前为止的设置：

```
public class Parent
{
    @Id
    @GeneratedValue(generator = "parent-id-gen")
    @GenericGenerator(name = "parent-id-gen", strategy = "increment")
    @Column(name = "id", nullable = false)
    private long ID;

    // some other fields

    @OneToMany(orphanRemoval = true, cascade = CascadeType.ALL)
    @JoinColumn(name = "parent_id")
    private List<Child> children;
}

public class Child
{
    @Id
    @GeneratedValue(generator = "child-id-gen")
    @GenericGenerator(name = "child-id-gen", strategy = "increment")
    @Column(name = "id", nullable = false)
    private long ID;

    @Column(name = "parent_id", nullable = false)
    private long parentID;

    // some other fields
} 
```

数据库（PostgreSQL）看起来像这样，如果重要的话：

```
CREATE TABLE parent
(
  id integer NOT NULL,
  ... other fields,
  PRIMARY KEY (id)
);

CREATE TABLE child
(
  id integer NOT NULL,
  parent_id integer NOT NULL,
  ... other fields,
  PRIMARY KEY (id),
  UNIQUE (parent_id, ... other fields)
); 
```

我只想做一个`org.hibernate.Session.saveOrUpdate(parentObject)`，但它使我在子表上的唯一键失败，因为 parentID 一直设置为 0，而不是从父级生成的 ID。

有没有办法做到这一点？

我在想 Hibernate 先插入，然后用父 ID 更新子 ID，因此由于当前定义了数据库，因此无法执行此操作。结果我可能不得不删除唯一键，这很不幸......如果有办法解决这个问题，请告诉我！

编辑：添加了数据库信息，因为它可能是相关的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T21:16:33.740

Hibernate 背后的想法是，您的模型类是从关系之间的标识内容中抽象出来的。含义`private long parentID`可以更改为`private Parent parent`。这会让hibernate知道如何控制它，如果你需要父母的ID，你可以做类似的事情`child.getParent().getId()`

# android-emulator - 为什么 Worklight Hybrid 应用程序在 Android 模拟器上立即退出/崩溃？

> ID：16125177
> 
> 赞同：1
> 
> 时间：2013-04-20T21:04:05.483
> 
> 标签：android-emulator, ibm-mobilefirst

在 worklight 中创建的应用程序在部署到 android 模拟器后会立即关闭。即使是简单的 HelloWorklight 应用程序也会立即退出。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T06:37:18.710

可能的罪魁祸首：

1.  您正在使用运行 Android OS v2.3.x 的 AVD - Google 有一个错误，导致应用程序崩溃。使用 Android OS v2.2.x 或 3.x 或 4.x。

2.  您正在使用 Worklight v5.0.5 并且仅安装了 Android API 级别 17 - 升级到 Worklight v5.0.6.x，此缺陷已得到解决。

如您问题的评论部分所述，如果上述建议未能解决您的问题，请在您的问题中添加您在应用程序启动时在 LogCat 中获得的内容。

# php - 使用 javascript 重新加载数据

> ID：16125182
> 
> 赞同：0
> 
> 时间：2013-04-20T21:04:44.027
> 
> 标签：php, javascript

我正在尝试创建一个带有文本的图像，人们可以在同一页面上进行编辑。但是将放置在图像上的许多信息是`file_get_contents`通过 PHP 从另一个来源获取的。我希望用户能够单击刷新按钮以重新加载图像和图像上的数据，而无需刷新页面。如何使用 javascript 或其他语言来做到这一点？

欢迎任何想法，谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T21:10:57.920

要重新加载图像，您需要使用 javascript 并设置 src='imgName2.jpg' 其中 imgName2.jpg 不是旧名称。或者

```
src='oldNmae.png?t=" + +new Date() + "'" //check if this works on your webserver

<script>

function change1()
{   

   edit_save.src = "../template/save.png";                              
}
</script> 
```

从[以编程方式更改 img 标签的 src](https://stackoverflow.com/questions/11722400/javascript-change-img-src)

要重新加载文本需要使用 ajax，然后在图像上更改某些元素的内部 html。（css z 顺序）

简单的 ajax 示例[http://www.degraeve.com/reference/simple-ajax-example.php](http://www.degraeve.com/reference/simple-ajax-example.php)

对于css和innerHtml可以google！

# javascript - 将同级节点添加到嵌套列表

> ID：16125184
> 
> 赞同：0
> 
> 时间：2013-04-20T21:05:34.183
> 
> 标签：javascript, jquery, html-lists

给定以下标记：

```
<div id="nodes">
    <ul>
        <li><a href="#">Colors</a>
            <ul>
                <li><a href="#">Red</a></li>
                <li><a href="#">Green</a></li>
                <li><a href="#">Blue</a></li>
            </ul>
        </li>
        <li><a href="#">Sizes</a></li>
        <li><a href="#">Material</a></li>
    </ul>
</div> 
```

我写了一个jQuery函数来添加兄弟节点：

```
$("#nodes ul li").click(function(e) {
    addSibling(this, 'new one');
    e.stopPropagation();
});

function addSibling(selector, content){
    var markup='<li><a href="#">' + content + '</a></li>';
    $(selector).parent().append(markup);
} 
```

起初它似乎工作得很好，只要我点击原始节点。例如，如果我点击“蓝色”，我会得到：

```
<div id="nodes">
    <ul>
        <li><a href="#">Colors</a>
            <ul>
                <li><a href="#">Red</a></li>
                <li><a href="#">Green</a></li>
                <li><a href="#">Blue</a></li>
                <li><a href="#">new node</a></li>
            </ul>
        </li>
        <li><a href="#">Sizes</a></li>
        <li><a href="#">Material</a></li>
    </ul>
</div> 
```

但是，当我单击新节点时，它没有将新节点作为同级节点，而是向上一级（即“颜色”、“大小”和“材料”的同级节点）。查看 jQuery 生成的标记，我看不出有任何区别，所以我很困惑为什么新节点的行为与原始节点不同。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-20T21:26:12.693

我建议：

```
$("#nodes ul").click(function (e) {
    addSibling(e.target, 'new one');
    e.stopPropagation();
});

function addSibling(selector, content) {
    var markup = '<li><a href="#">' + content + '</a></li>';
    $(selector).parent().append(markup);
} 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/xv4GF/)。

这会将点击处理程序绑定到`ul`元素，而不是`this`使用`e.target`，这是在`ul`. 这意味着您可以避免没有将 click 事件处理程序绑定到新添加的元素的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-20T21:19:17.320

原因是 jquery 将您的点击回调注册到已经存在的对象。当您单击新创建的 li 时，它只会冒泡并发射更高的级别。

除此之外：你有 class="nodes" 并且你想要 id="nodes"。

如何解决？尝试将您的点击注册到 ul（不是 li）并在 addSibling 中删除父级。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-20T21:22:59.750

因为当您将新节点添加到 DOM 时，您不会将点击事件附加到它，所以底层的“li”正在注册点击并将节点附加到该节点。为了解决这个问题，在您的 addSibling 函数中，在您创建新节点后，将单击事件附加到它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-20T21:25:22.247

您的问题是您新创建`<li>`的 s 没有附加事件处理程序。那是因为当您`$("#nodes ul li").click(...)`只调用适合选择器的元素时，会获得附加到它们的处理程序。一旦调用了该函数，当新元素添加到 DOM 时将不会再次调用它。结果，您对 new`<li>`的点击“冒泡”，直到它点击一个`<li>`已经有事件处理程序的。

您可以通过使用委托单击处理程序来解决此问题，而不是直接在元素上：

```
$("#nodes").on("click","li",function(e) {
    addSibling(this, 'new one');
    e.stopPropagation();
}); 
```

其工作方式如下：
您仅将一个单击处理程序附加到`#nodes`元素。当您单击元素`<li>`内部的任何`nodes`内容时，将触发该功能。并且由于它适用于元素`<li>`内部的所有 s `#nodes`，因此它们是否是动态创建的并不重要。

# javascript - jQuery：每次元素在页面上可见时仅触发一次

> ID：16125186
> 
> 赞同：0
> 
> 时间：2013-04-20T21:05:36.943
> 
> 标签：javascript, jquery, css, scroll

这个问题基于这个优秀的 StackOverflow 元素可见性检测脚本：

[检查滚动后元素是否可见](https://stackoverflow.com/questions/487073/check-if-element-is-visible-after-scrolling)

使用上面的脚本，我能够正确检测页面上何时可见元素（通过滚动到它），然后触发警报。我无法从上面的脚本中看到代码的不同之处在于，我希望每次元素可见时只触发一次警报。使用下面的 jsFiddle 代码，当元素可见时，每次滚动鼠标或滚动条都会继续触发警报：

[http://jsfiddle.net/Berklie/JnFqu/](http://jsfiddle.net/Berklie/JnFqu/)

```
function isScrolledIntoView(elem) {
  var docViewTop = $(window).scrollTop();
  var docViewBottom = docViewTop + $(window).height();

  var elemTop = $(elem).offset().top;
  var elemBottom = elemTop + $(elem).height();

  return ((elemBottom <= docViewBottom) && (elemTop >= docViewTop));
}

$(window).scroll(function () {
  var myelement = $('#overdueWarning');

  if (isScrolledIntoView(myelement)) {
    alert('Your book is overdue');
  }
}); 
```

我想要的是警报仅在元素变得可见时触发一次......然后*仅*在元素变得不可见时再次触发，然后再次可见。

请让我知道我是否可以提供其他任何东西。谢谢！

伯克利

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-20T21:13:32.363

[jsFiddle 工作演示](http://jsfiddle.net/mohammadAdil/JnFqu/13/)

```
var shown = false;
$(window).scroll(function () {
    var myelement = $('#overdueWarning');
    if(isScrolledIntoView(myelement)){
        if(!shown){
         console.log('Your book is overdue');
        }
         shown = true;
    }
    else{
     shown = false;
    }
}); 
```

# javascript - 在文本之间添加可变空格 标签

> ID：16125187
> 
> 赞同：0
> 
> 时间：2013-04-20T21:05:51.963
> 
> 标签：javascript, jquery, html, css

我有以下代码：

```
for(i = 0; i < results.rows.length; i++)
{
  $('#entries').append("<li>" + results.rows.item(i).food +
                       "<span class = 'addWhiteSpace'>" +
                       results.rows.item(i).calories + " caloriën" + "</span>" +
                       "</li>");
} 
```

我已经添加了一个带有类空白的跨度并将 CSS 设置为`margin-left: 50px`. 问题在于空格都是相同的，因此跨度的位置取决于我的 WebSQL 数据库 ( `results.rows.item(i).food`) 的结果。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T21:31:43.430

我完全同意@nnnnnn 上面的评论。

您正在显示**表格数据**，因此您应该使用该`<table>`构造。这将自动处理数据的可变宽度，并按照您期望的数据显示它。

# cqrs - CQRS - 单独的命令和事件处理程序

> ID：16125188
> 
> 赞同：0
> 
> 时间：2013-04-20T21:05:53.557
> 
> 标签：cqrs

在这里查看一些[非常有趣的演示 CQRS 代码](https://gist.github.com/hyrmn/3200053/raw/39ae14e4226d5e0d032690bf0e37e75286d2a1f7/EndToEndTests.cs)命令和处理程序被拆分为单独的接口。

```
public interface CommandHandler<in T>
{
    void Handle(T command);
}

public interface EventHandler<in T>
{
    void Handle(T @event);
} 
```

我正在自动连接命令和事件，似乎membus*可能*存在限制，它只能连接 CommandHandlers 或 EventHandlers，但无论哪种方式，我都在想：

`Handler`鉴于两个接口都有一个 Handle 方法，以这种方式拆分命令和事件的想法是什么，而可以使用单个通用命令/事件接口代替？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-22T00:49:46.457

区别在于语义 - 事件和命令在语义上是不同的消息类型，将这种区别明确化可能是有益的。由于每种消息类型可能具有独特的处理要求，因此可以在组织和功能方面获得好处。

# php - 数据库中的数据不是从 PHP 代码中的 MySQL 获取的

> ID：16125196
> 
> 赞同：0
> 
> 时间：2013-04-20T21:06:45.360
> 
> 标签：php, mysql, haversine, geopoints, location-based-service

我已经实现了我的数据库，然后我通过 PHP 从数据库中检索数据。

在我的代码中，我应该按名称过滤数据，如果名称存在，我想打印数据。尽管想要的项目在表中，但没有显示任何内容。我不明白错误在哪里。只有关于数据库中位置的信息，我没有将用户的位置保存在我的数据库中。

我的代码是：

```
<?php
    $username="myusername";
    $password="mypasswd";
    $database="mydatabase";
    $host="mysqlmyhost.com";
    mysql_connect($host,$username,$password);
    @mysql_select_db($database) or die( "Unable to select database");

    // check for post data
    if (isset($_GET["locationName"])) {
        $locationName = $_GET['locationName'];

        // get a product from products table
        $result = mysql_query("SELECT *FROM Location WHERE locationName =   $locationName");

        if (!empty($result)) {
            // check for empty result
            if (mysql_num_rows($result) > 0) {
                $result = mysql_fetch_array($result);

                $product = array();
                $product["locationName"] = $row["locationName"];
                $product["locationInfo"] = $row["locationInfo"];
                $product["locationLatitude"] = $row["locationLatitude"];
                $product["locationLongitude"] = $row["locationLongitude"];
                $product["locationPic"] = $row["locationPic"];
                $product["city"] = $row["city"];
                // success
                $response["success"] = 1;

                // user node
                $response["Location"] = array();

                array_push($response["Location"], $product);

                // echoing JSON response
                echo json_encode($response);
            } else {
                // no product found
                $response["success"] = 0;
                $response["message"] = "No product found";

                // echo no users JSON
                echo json_encode($response);
            }
        } else {
            // no product found
            $response["success"] = 0;
            $response["message"] = "No product found";

            // echo no users JSON
            echo json_encode($response);
        }
    } else {
        // required field is missing
        $response["success"] = 0;
        $response["message"] = "Required field(s) is missing";

        // echoing JSON response
        echo json_encode($response);
    }
?> 
```

编辑：

现在，我想向用户显示最近的位置。我已经搜索并更改了代码。我在以 $userLatitude=$_GET['userLatitude']; 开头的行出现错误 . 它说这里有一个意外的 t_string 错误。我无法理解错误是什么。你能再帮忙吗？

```
 if (isset($_GET["userLatitude"]) && isset($_GET["userLongitude"])) {
$userLatitude=$_GET['userLatitude'];
$userLongitude=$_GET['userLongitude'];
$result = mysql_query("SELECT locationName, ( 6371 * acos( cos( radians(      $userLatitude) ) * cos( radians( locationLatitude ) ) * cos( radians( locationLongitude ) - radians( $userLatitude) ) + sin( radians($userLongitude) ) * sin( radians( locationLatitude) ) ) ) AS distance 
FROM Location HAVING distance < 2 ORDER BY distance LIMIT 0 ,20") or die(mysql_error());
echo $result;

  // check for empty result
  if (mysql_num_rows($result) > 0) {
    // looping through all results
    // products node
    $response["Location"] = array();

    while ($row = mysql_fetch_array($result)) {
    // temp user array
    $product = array();
    $product["locationName"] = $row["locationName"];
    $product["locationInfo"] = $row["locationInfo"];
    $product["locationLatitude"] = $row["locationLatitude"];
    $product["locationLongitude"] = $row["locationLongitude"];
    $product["locationPic"] = $row["locationPic"];
    $product["city"] = $row["city"];

    // push single product into final response array
    array_push($response["Location"], $product);
}
// success
$response["success"] = 1;

// echoing JSON response
echo json_encode($response);
   } else {
// no products found
$response["success"] = 0;
$response["message"] = "No products found";

// echo no users JSON
echo json_encode($response);
 }
 mysql_close(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T21:32:46.057

一些想法：

*   您可能希望在查询中添加单引号，因为某些文本可能包含空格或特殊字符，并且 SQL 喜欢边界。如果您不喜欢它周围的双引号，它仍然应该可以正常工作，但它已成为我的习惯。

***可能的代码：***

```
// get a product from products table
$result = mysql_query("SELECT *FROM Location WHERE locationName = '".$locationName."'"); 
```

*   当您将数据存储在数据库中时，您是否考虑了转义字符（即您是否使用 mysql_real_escape_string() 在插入数据时添加斜杠以防止注入攻击或错误数据。）。如果是这样，您可能希望使用相同的函数来验证数据，并且他们使用 stripslashes() 函数返回“标准化”数据以插入到您的响应中。

数据库中的数据示例：that/'s what i/'m talkin/' about /"fella/'/"!

***可能的代码：***

```
$locationName = mysql_real_escape_String($_GET['locationName']);

and

$product["locationName"] = stripslashes($row["locationName"]); 
```

*   您可以添加错误检查和/或显示消息以帮助排除故障

***mysql 查询的内联错误显示：（*** 这将在出现错误时停止页面并显示 MySQL 返回的消息）

```
$result = mysql_query("SELECT *FROM Location WHERE locationName = $locationName") or die(mysql_error()); 
```

***PHP 中的一般错误报告：（*** 这个有点冗长，也显示警告）

```
// Same as error_reporting(E_ALL);
ini_set('error_reporting', E_ALL); 
```

***详细输出*** 有时我会在页面中添加详细消息，以便验证我提交的查询，并在测试脚本后删除或注释掉它们。

```
$locationQuery= mysql_query("SELECT *FROM Location WHERE locationName = '".$locationName."'");
echo "Current Query: ".$locationQuery."<br>\n";
$result = mysql_query($locationQuery) or die(mysql_error()); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-20T21:10:04.277

1.

> 选择 *从

*后你忘记了空格

2.

> WHERE locationName = $locationName"

你应该用引号括起来变量

```
WHERE locationName = \"$locationName\"" 
```

3.

删除这个条件`if (!empty($result)) {`，因为 $result 是资源并且它不为空

4.

您使用**$row**变量，将行更改为`$row = mysql_fetch_array($result);`

总是写**或死（mysql_error（））**

> mysql_query('....') 或死(mysql_error());

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-20T21:13:37.023

在示例代码中，您将返回的数据存储在 $result 变量中，但尝试从 $row 变量中访问它

```
$result = mysql_fetch_array($result);

$product = array();
$product["locationName"] = $row["locationName"]; 
```

尝试

```
$row = mysql_fetch_array($result);

$product = array();
$product["locationName"] = $row["locationName"]; 
```

# ios - IOS 上 Chrome 中的 Indexeddb - 何时可用？

> ID：16125199
> 
> 赞同：12
> 
> 时间：2013-04-20T21:07:00.797
> 
> 标签：ios, google-chrome, indexeddb

有谁知道 Indexeddb 何时或如何在 IOS 上的 Chrome 中可用？Indexeddb 在 Android 设备上的移动 Chrome 中运行良好！

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-21T23:32:28.973

由于 iOS 的限制，iOS 版 Chrome 与其他平台上的 Chrome 并不完全相同。它实际上只是标准 iOS Web 浏览器控件的封装。这意味着它受限于*类似*的限制和 iOS WebKit（还有一些其他限制与 JS 优化等有关）。

正因为如此，您受制于 iOS WebKit 对 IndexedDB 的支持，目前还不清楚它何时会到来。同时，您始终可以使用包装 WebSQL的[IndexedDB polyfill，haz.io 支持该](http://nparashuram.com/IndexedDBShim/)[polyfill](http://haz.io)。

*更新：正如@x3m 指出的那样，iOS8 将添加 IndexedDB 支持，因此 iOS 和 Safari 桌面 IndexedDB 将得到支持。*

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-09-03T00:33:14.133

对于感兴趣的人，我在 iOS 8 beta 5 上做了一些测试。

Safari（Chrome 尚未针对 iOS 8 进行优化）能够在索引数据库中存储 1GB（确切地说是 1024MB）的数据，但一次只能存储 10MB 的块

# c++ - 具有动态内存分配的链表程序

> ID：16125201
> 
> 赞同：0
> 
> 时间：2013-04-20T21:07:30.470
> 
> 标签：c++, pointers, linked-list, dynamic-memory-allocation

```
#include "PersonList.h"
#include <iostream>
#include <string>
using namespace std;

PersonList::PersonList()
{
    head=NULL; //Head is a PersonRec*
}
struct PersonRec
{
    string aName;
    int aBribe;
    PersonRec* link;
};
void PersonList::AddToList()
{

    //string a;
    //int b;
    PersonRec* p;                  
    p=new PersonRec;

    p->link=NULL;
    cout << "\nEnter the person's name: ";
    cin >> p->aName;
    cout<< "\nEnter the person's contribution: ";
    cin >> p->aBribe;

    if(head==NULL)
    {
        cout<<1<<endl;
        head=p;
    }
    else if(head!=NULL)     //The problem is in here.
    {
        PersonRec *currPtr=head;
        bool x=true;
        while(x==true)
        {
            currPtr=currPtr->link;    
            if(currPtr==NULL)
            {
                currPtr=p;
                x=false;
            }

        }
    }

} 
```

这是一个程序，应该通过动态内存分配将姓名和贿赂输入到链表中，并根据请求输出结果（我只将输入函数放在这里，因为它是唯一有问题的函数）。第一个元素输入和输出正常，但如果我尝试输入第二个元素，则不会输出。程序可以编译，但是由于在第一个节点之后添加节点的所有节点都不同，所以问题一定出在我评论为问题的部分。任何帮助，将不胜感激。这是家庭作业，是的，所以任何提示将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T21:55:29.267

由于这是你的作业，我不会给你代码，而是引导你找到解决方案:)

问题是您将局部变量设置`currPtr`为指向新添加的元素，而不是设置`link`最后一条记录的指向它。

我相信以下内容可能会让您感到困惑：

```
a = 7;
b = a;
b = 6; 
```

在这里， 的值`a`没有改变，不管我们在第二个语句中复制了它的值**。**`b`

类似地，在以下语句序列中

```
currPtr = currPtr->link;
currPtr = p; 
```

无论 currPtr 和 link 是指针，currPtr->link 的值都没有改变，因为您正在更改它们的**值**，而不是它们指向的字段。

# google-maps-sdk-ios - 在背景中添加标记

> ID：16125205
> 
> 赞同：0
> 
> 时间：2013-04-20T21:08:03.787
> 
> 标签：google-maps-sdk-ios

我正在尝试在后台添加标记，以防止地图在添加时变得无响应，但我看到了一个我以前从未遇到过的错误。

这是我在后台加载标记的尝试，并且在尝试发送 addMarkerWithOptions 时发生错误。

```
dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), ^{
    NSLog(@"yeap im in the background %i, markers=%i", [[self visibleLocations] count], [[[self googleMap] markers] count]);
    for (int i = 0; i < self.visibleLocations.count; i++) {
        Location *location = [self.visibleLocations objectAtIndex:i];
        GMSMarkerOptions *options = [[GMSMarkerOptions alloc] init];
        options.position = CLLocationCoordinate2DMake([location.lat floatValue], [location.lng floatValue]);
        options.title = [NSString stringWithFormat:@"(%i) %@", location.mapNeighbors.count, location.title];
        options.icon = [UIImage imageNamed:@"search_measle_small.png"];
        [self.googleMap addMarkerWithOptions:option];
    }
}); 
```

错误

```
yeap im in the background 860, markers=0
2013-04-20 14:02:11.561 Skate-Spots[7796:907] *** Terminating app due to uncaught exception 'NSGenericException', reason: '*** Collection <__NSSetM: 0x1d6e7880> was mutated while being enumerated.'
*** First throw call stack:
(0x336a23e7 0x3b39d963 0x336a1ec1 0x16ea0d 0x3b7b7793 0x3b7b75db 0x3b7bae45 0x336761b1 0x335e923d 0x335e90c9 0x371c833b 0x355052b9 0x112e5 0x3b7cab20)
libc++abi.dylib: terminate called throwing an exception 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T12:12:30.463

根据[此文档](https://developers.google.com/maps/documentation/ios/reference/interface_g_m_s_map_view)：

> `GMSMapView`只能从主线程读取和修改，类似于所有 UIKit 对象。从另一个线程调用这些方法将导致异常或未定义的行为。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-21T22:11:18.233

```
dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), ^{
    NSLog(@"yeap im in the background %i, markers=%i", [[self visibleLocations] count], [[[self googleMap] markers] count]);
    for (int i = 0; i < self.visibleLocations.count; i++) {
        Location *location = [self.visibleLocations objectAtIndex:i];
        GMSMarkerOptions *options = [[GMSMarkerOptions alloc] init];
        options.position = CLLocationCoordinate2DMake([location.lat floatValue], [location.lng floatValue]);
        options.title = [NSString stringWithFormat:@"(%i) %@", location.mapNeighbors.count, location.title];
        options.icon = [UIImage imageNamed:@"search_measle_small.png"];

      dispatch_async(dispatch_get_main_queue(), ^{
        [self.googleMap addMarkerWithOptions:option];
      });
    }
}); 
```

# c# - LINQ 文本框匹配数据库

> ID：16125206
> 
> 赞同：0
> 
> 时间：2013-04-20T21:08:09.047
> 
> 标签：c#, asp.net, linq-to-sql

我正在尝试在 LINQ 更新语句中运行以下内容。

```
if (updateProfile.website == txtSite.Text) { }
else { updateProfile.website = txtSite.Text; } 
```

这只是检查文本框值是否与数据库中的值匹配，如果匹配则继续，如果不匹配则更新它。

我遇到的问题是，如果文本框是空的，它会传入“”，所以是一个空白值。如果文本框是“”，我希望它继续前进，这样它将空值留在数据库中。

非常感谢所有帮助，谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T21:12:43.617

您可能想要使用 want `string.IsNullOrEmpty()`，它几乎可以做到它所说的：

```
if(string.IsNullOrEmpty(txtSite.Text) || updateProfile.website == txtSite.Text) { }
else { updateProfile.website = txtSite.Text; } 
```

或者，如果您*只*关心该值`""`并希望将其与 区别对待`null`，您可以明确地检查它：

```
if (txtSite.Txt == "" || updateProfile.website == txtSite.Text) { }
else { updateProfile.website = txtSite.Text; } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-24T06:11:33.797

或者您可以像这样检查您的文本框，然后添加您的条件

```
if (txtSite.Text.Trim().Length > 0)
{
    if (updateProfile.website == txtSite.Text) { }
    else { updateProfile.website = txtSite.Text; }
} 
```

# python - 在 python 中将文本转换为旁白视频

> ID：16125207
> 
> 赞同：0
> 
> 时间：2013-04-20T21:08:11.863
> 
> 标签：python, video, text-to-speech

我有很多文本，我想把它转换成音频，使用一些文本到语音库，然后我想把那个音频变成一个视频文件，如果屏幕只是黑色，或者如果文字是视觉的？

无论如何，我真的不知道从哪里开始。它有很多，我需要它做很多次，我对 python 很熟悉，但我不知道我应该怎么做。是否有用于将文本转换为 python 语音的标准库？还是mp4中的音频？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T23:35:20.327

没有用 python 编写的纯文本转语音引擎，但有很多其他引擎的包装器。以下是一些快速谷歌搜索带来的内容：

如果您在 Windows 上，[PySpeech](http://code.google.com/p/pyspeech/)与 Windows 文本转语音引擎交互。它不再受支持，但可能对您有用。

龙自然还有一个界面，叫做[Dragonfly](http://code.google.com/p/dragonfly/)。该库也适用于内置的 Windows 系统，并且仍然受到积极支持。

最后，如果您使用的是 linux，还有[pyFestival](http://code.google.com/p/pyfestival/)，它为开源 Festival 引擎提供绑定。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-29T12:26:57.833

有点俗气，但如果你有一个 mac，有一个小技巧。

尝试在终端中输入以下内容：

```
$ say 'hello world' 
```

并且将有来自 mac 的声音会说出来。从python这样的事情是相对容易的：

```
import os
os.system("say 'hello world'") 
```

现在，如果您在执行此操作时打开了屏幕录像机，您可能会拥有您想要的东西。

# c - 从一个字符串创建两个字符串

> ID：16125214
> 
> 赞同：-2
> 
> 时间：2013-04-20T21:09:19.617
> 
> 标签：c

有没有一种方法可以创建两个字符串，而第二个字符串不包含第一个字符串？

我目前有这个

```
char * s = "Generic String";
char foo[1];
memcpy(foo, s, 1);
char bar[2];
memcpy(bar, s, 2);
printf("%s %s\n", foo, bar); 
```

这将打印出 G GeG

显然，我希望它打印 G Ge。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-20T21:12:05.550

C 中的所有字符串都需要一个结束标记——即空字符。

所以代码

```
char foo[1]; 
```

应该

```
char foo[2]; 
```

其次是

```
foo[0] = s[0];
foo[1] = 0; 
```

另一个也一样。

IE

```
char bar[3];
memcpy(bar, s, 2); /* As you prefer */
bar[2] = 0; /* To terminate the string */ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-20T21:12:35.600

您需要 NUL 终止字符串。当前，您的程序调用未定义的行为。此外，在从字符串文字初始化时使用`const char *`or ，否则 const 正确性被破坏。`char []`

```
const char *s = "Generic String";

char foo[2];
memcpy(foo, s, 1);
foo[1] = 0;

char bar[3];
memcpy(bar, s, 2);
bar[2] = 0;

printf("%s %s\n", foo, bar); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-20T21:13:59.523

您在末尾使用没有零的字符串。

选项1：限制打印宽度：

```
printf("%*s %*s\n", 1, foo, 2, bar); 
```

选项 2：为字符串终止符 (0) 分配空间。

```
char foo[2];
char bar[3];

memcpy(foo, s, 1);
foo[1] = 0;
memcpy(bar, s, 2);
bar[2] = 0; 
```

# javascript - 使用 CSS 或 Javascript 有条件地隐藏按钮

> ID：16125215
> 
> 赞同：1
> 
> 时间：2013-04-20T21:09:26.730
> 
> 标签：javascript, css

我有一个页面，其中的代码如下所示：

```
<form id="editform" class="left " method="post" action="edit-account.php" name="editform">
<ul>
<li id="row_first">
<label for="first">First name</label>
<input id="first" type="text" value="Mike" name="first">
</li>
<li id="row_last">
<label for="last">Last name</label>
<input id="last" type="text" value="" name="last">
</li>
</ul>
<label for="submit_button"> </label>
<input id="submit_button" class="button" type="submit" value="Modify user profile" name="submit_button">
<input type="hidden" name="submitted" value="true">
</form> 
```

我的目标是仅当字段“first”包含默认值“Mike”时才隐藏提交按钮。

在实践中，如果我使用这个 CSS：

```
#submit_button.button{ display: none; } 
```

这很好地隐藏了按钮，但在所有情况下，不仅当“Mike”是字段“first”的默认值时。

有机会使用 CSS 做到这一点吗？

请注意，我无权访问 HTML 页面。我只能修改外部 CSS 文件，该文件为我要更改的页面设置样式。

或者，如果您有 Javascript 解决方案，我通常可以使用它，因为我可以访问计划用于修改某些表单元素的外部 JS 文件。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-20T21:15:40.300

CSS 不是功能性的，它是用于样式的，因此这在 CSS 中是不可能的。您需要使用 JS 来完成此任务。

**更新：**

这个 JS 应该适合你：

```
var element = document.getElementById("first");
var btn = document.getElementById("submit_button"); 

function checkIfMike() {
    if(element.value == "Mike") {
        btn.style.display = "none";
    } else {
        btn.style.display = "block";
    } 
}

checkIfMike();
element.addEventListener("keyup", checkIfMike); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-20T21:16:03.490

虽然 CSS 确实允许您基于属性值来定位兄弟元素，但这只会让您的解决方案走到一半。例如，以下将隐藏您的提交按钮：

```
#first[value='Mike'] ~ #submit_button {
    display: none;
} 
```

这会将与值为 的任何`#submit_button`元素在同一容器中的任何`#first`元素的 display 属性设置为 none `Mike`。这适用于最初隐藏按钮，以及在用户键入键名时隐藏它。*但是，由于缺少不等于运算符，当值不是*目标名称时，CSS 无法帮助我们恢复可见性。

我们的其他选择是使用 JavaScript。我们将创建一个执行此评估的函数，并根据名字字段的值显示或隐藏提交按钮：

```
(function () {

    "use strict";

    // Reference all of our key elements, and values
    var name = "Mike",
        form = document.getElementById("editform"),
        inpt = document.getElementById("first"),
        sbmt = document.getElementById("submit_button");

    // A function to toggle visibility based on field value
    function setVisibility() {
        sbmt.style.display = (inpt.value.trim() === name) ? "none" : "";
    }

    // Call this function whenever input occurs on the field
    form.addEventListener("input", setVisibility, false);

    // Fire it once upon load for initial evaluation
    setVisibility();

}()); 
```

这应该可以让您根据用户提供的数据隐藏/显示提交按钮。

小提琴：http: [//jsfiddle.net/jonathansampson/j2MRQ/](http://jsfiddle.net/jonathansampson/j2MRQ/)

# scala - 播放 2.1.1 不加载自定义 Akka 调度程序

> ID：16125218
> 
> 赞同：5
> 
> 时间：2013-04-20T21:09:52.433
> 
> 标签：scala, playframework, akka, playframework-2.1

我正在使用 Play 2.1.1，并在`application.conf`其中添加了以下自定义调度程序：

```
# Dispatcher for round-robin actors
play {
    akka {
        actor {
            rr-dispatcher = {
                type = BalancingDispatcher
                executor = fork-join-executor
                fork-join-executor {
                    parallelism-min = 2
                    parallelism-factor = 2
                    parallelism-max = 24
                }
                # messages per actor before jumping
                throughput = 100
            }
        }
    }
} 
```

我尝试在演员身上使用它：

```
private val default = Akka.system.actorOf(Props[MessageRouterActor].withRouter(FromConfig()).withDispatcher("rr-dispatcher"), "msgRouter") 
```

但我收到这条消息，说明找不到调度员：

```
[info] play - Starting application default Akka system.
[WARN] [04/20/2013 22:05:12.069] [application-akka.actor.default-dispatcher-5] [Dispatchers] Dispatcher [rr-dispatcher] not configured, using default-dispatcher 
```

据我所见，这似乎是添加它的正确方法。有谁知道是什么问题？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-20T23:06:35.410

您必须放置完整的配置值路径： withDispatcher("akka.actor.rr-dispatcher") （或者甚至可能是 "play.akka.actor.rr-dispatcher"）

# asp.net-mvc - 基于条件的多个操作的 ASP .NET MVC 3 相同路由

> ID：16125220
> 
> 赞同：0
> 
> 时间：2013-04-20T21:09:55.617
> 
> 标签：asp.net-mvc, asp.net-mvc-3, asp.net-mvc-routing

在 ASP .NET MVC 3+ 中是否有可能基于特定状态为多个操作提供一个相同的路由？

例如，在 LinkedIn 或一些类似的网站上，相同的路由`http://site-domain/home` 用于多个视图。

如果用户未登录，主页将显示欢迎视图，但如果用户已登录，则会显示用户的主页，其中显示他的通知和其他用户特定数据。

我们可以根据用户的登录状态或任何其他类型的数据控件，使用相同的路由 url 路由到不同控制器的不同操作吗？

注意：在同一操作中显示不同的视图不是一种选择，因为两个操作具有完全不同的逻辑。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T21:35:14.527

当然。您有几个选择，第一个是根据用户的某些属性为用户提供您选择的视图，但是您对视图模型的控制有限。

```
public ActionResult SomeAction(){

if(User.Identity.Name == "Admin")
    return View("AdminView");
else
    return View("SomeOtherView");
} 
```

另一种选择是在控制器方法中将用户重定向到另一个操作，如下所示：[http ://weblogs.asp.net/mikebosch/archive/2008/02/02/asp-net-mvc-tip-2-redirecting -to-another-action-and-passing-information-to-it.aspx](http://weblogs.asp.net/mikebosch/archive/2008/02/02/asp-net-mvc-tip-2-redirecting-to-another-action-and-passing-information-to-it.aspx)

当然，始终可以选择根据某些用户属性在页面上呈现部分视图。如果您可以提供有关您的项目的更多信息，这将有助于找到解决方案。

# emacs - 自定义 gnus 摘要缓冲区

> ID：16125222
> 
> 赞同：0
> 
> 时间：2013-04-20T21:10:00.410
> 
> 标签：emacs, elisp, gnus

我希望我的主题看起来类似于下面（代码来自：[http](http://emacswiki.org/emacs/TomRauchenwald) ://emacswiki.org/emacs/TomRauchenwald ）

[![主题](https://i.stack.imgur.com/3lpc6.png)](https://i.stack.imgur.com/3lpc6.png)
[（来源：[modprobe.de](http://sec.modprobe.de/oxy-gnus-threads.png)）]

但是我明白了，即我的线程不会相互连接。我怀疑这是由于文本填充或其他原因？

![在此处输入图像描述](https://i.stack.imgur.com/SV4VW.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T13:56:48.810

它看起来像一个字体问题。您找到的代码使用了一个名为`BOX DRAWINGS HEAVY VERTICAL`. 它看起来像一个管道 ( `|`)，但稍长且粗一些。当您的字体没有该字符时，它有一个替换规则告诉它使用管道。

由于管道有点短，你会得到这个间隙。您应该能够通过使用不同的字体来解决此问题。

我认为使用 emacs 的图形版本也有帮助，因为它可以使用多种字体。当找不到字符时，它将使用您最喜欢的字体并用另一种字体对其进行补充。

# architecture - 独立模块中的项目功能，架构决策

> ID：16125223
> 
> 赞同：1
> 
> 时间：2013-04-20T21:10:00.520
> 
> 标签：architecture

情况如下：

我们（学生）必须为我们大学编写跨平台软件项目，专为处理统计数据而设计，可能是天文数字。预计学生（具有不同技能）将能够年复一年地继续维护/改进项目。

主要思想是将程序分成主要部分和多个不同的模块，可以独立编写和连接，可能是共享库。这些模块每个都包含分析和处理特定数据的方法，并给出输出（数字、字符串、图像等）。

所以我们有一小部分比较精通的学生，他们可以做主要的工作。决定选择 C++ 作为主要编程语言，选择 Qt 作为跨平台 GUI。

主要问题是关于那些将来开发模块的人。这里的教育主要是基于 Pascal/Delphi（这是乌克兰，都说:)），C++ 课程很差，绝大多数学生都懒得自己学东西，所以让我们假设，Pascal 是他们唯一的东西知道。

主要问题来了：

**设计具有以下要求的模块系统的适当方法是什么：**

*   项目必须是跨平台的
*   数据处理的主要功能必须作为一组（相对）独立的模块来实现
*   模块应该用不同的语言编写（Pascal 是必须的）
*   模块应该能够通过创建窗口来请求额外的数据，或者以某种方式触发主窗体中的窗口生成机制并获取新数据或更好的方法？
*   不能使用 COM 技术
*   将来编写新模块的学生的平均技能可能很低

任何想法都会被接受。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T22:24:11.807

我将从为数据提供者和数据消费者设计合同开始。由于技术上的限制，合约应该以函数的形式表达，并以原生库的形式实现。

然后，您的核心模块应该接受任何实现数据提供者和数据消费者合同的插件。插件架构应该很容易实现，你只需扫描一个文件夹，看看是否有任何具有预期签名功能的共享库（你的合约）。如果是，插件也会自我介绍，以便它可以附加到主菜单。

拥有数据提供者和数据消费者可以让您几乎永远设计新功能。新的数据提供者可以使用文件、网络服务、任何东西来创建数据。新消费者可以分析数据、导出、创建图表或任何您想要的东西。

我关心的是Delphi的要求以及跨平台开发的要求。我的建议是忘记 Delphi 并转而使用 Java。它是跨平台的，有很棒的免费开发者工具，并且在 2、5 或 10 年内它更有可能被项目成员认可。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-20T22:54:28.380

根据 Wiktor Zychla 的回答，如果您选择使用 Java 和基于组件的体系结构，我建议使用 OSGI（我可能不会对选择发表意见，因为我不是很客观，因为只使用 java）。使用 OSGI，数据提供者和数据消费者的合约定义得到了完美的管理，系统会根据他们定义的合约自动将模块插入在一起。部署的扫描文件夹已经在这里，它支持热部署，相同组件的多个版本一起运行等......

[http://en.wikipedia.org/wiki/OSGi](http://en.wikipedia.org/wiki/OSGi)

根据功能要求，还建议使用为复杂数学运算提供丰富库的语言，但我不知道帕斯卡功能。

# php - 按id查询订单

> ID：16125225
> 
> 赞同：-5
> 
> 时间：2013-04-20T21:10:26.053
> 
> 标签：php, mysql

我正在处理以下查询：

```
$query2 = 'SELECT * FROM user_uploads WHERE id_user = '.$id_user; 
```

我想通过以下方式订购它：ORDER BY upload_id DESC - 但我不知道如何做到这一点，或者在这种特殊情况下将代码放在哪里。

有人可以帮我吗？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T21:11:28.767

做就是了 ：

```
$query2 = 'SELECT * FROM user_uploads WHERE id_user = '.$id_user.' ORDER BY upload_id DESC'; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-20T21:11:32.017

```
$query2 = 'SELECT * FROM user_uploads WHERE id_user = '.$id_user.' ORDER BY upload_id DESC; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-20T21:12:50.193

虽然你可以做

```
$query2 = "SELECT * FROM user_uploads WHERE id_user = $id_user ORDER BY upload_id DESC"; 
```

您绝对应该查看参数化查询。谷歌搜索 PDO！

# asp-classic - 试图在 ASP 页面 alt 标记上用 VB 脚本编写页面标题

> ID：16125226
> 
> 赞同：0
> 
> 时间：2013-04-20T21:10:28.353
> 
> 标签：asp-classic, vbscript

嗨，我正在尝试在不使用 Javascript 的情况下做一些非常基本的事情。我希望我的页面徽标的图像 alt 字段包含页面的标题。我宁愿使用 VB 脚本，以便将实际的 HTML 内容注入到用户端的 html 标记中。

我们目前有以下在 Javascript 中执行此操作

`<script language=javascript type=text/javascript> var writelogo; writelogo = "<a href=http://www.mywebsite.com><img SRC=/logo.png alt=\"" + document.title + "\" /></a>"; document.write(writelogo); </script>`

我假设我可以使用 VBScript 在一个简单的脚本中编写 document.title，然后简单地将它应用到一个变量，以在静态图像的 alt 标记中看起来像这样。

前任`<img src="Logo.jpg" alt="<%=mypageTitle%>">`

有没有一种简单的方法可以在经典的 asp 页面上使用 VBScript 来获取页面标题并将其显示在 alt 标记中？我尝试了几种不同的方法，但都没有成功。谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T20:17:08.470

不可以。如果页面标题没有存储在服务器端，VB 将无法访问该信息。

我认为您最简单的选择是两个之一......

1.  如果页面和标题已经被硬编码，也只需在 alt 标签中进行硬编码。

或者...

1.  把它放在图片的alt标签中。

    <script>document.write(document.title);</script>

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-21T16:49:27.770

不，没有“更简单”的方法可以做到这一点。服务器端没有任何特殊的页面标题持有者。我认为自己声明一个持有变量并在 HTML 时内联使用它是我认为的唯一方法。还有其他选择：如果在您的特定情况下更有意义，您可以使用函数或对象的属性来代替变量。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-29T08:02:32.600

首先，您需要使用 ASP，因为您想要做的事情需要在出厂前完成。是的，ASP 可用于检索标题标签中的内容，并在同一页面上的某处替换占位符以用于替代标签等。

如果您没有可使用的标题标签，则可以使用页面名称，或者您可以从页面中检索一些内容来创建一个。例如，您可以搜索页面并捕获第一个标记或第一个标记之后的任何措辞。

如果您的页面是根据 CMS 等数据库记录动态构建的，那么它会变得容易得多，因为您不需要非常复杂的脚本来使用主题行或文章中的前几个单词。这种方法对于在搜索引擎优化之前创建的页面添加标题、描述、替代标签和关键字最有用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-01-03T08:15:47.403

我来到这个页面是为了寻找同一个问题的答案。看到这里展示的材料启发了我调整我的思维上限，并尝试一下。以下是我的直接解决方案，取自工作沙箱页面。

```
<head>
    <title>VBScript Date Functions Demonstration</title>
    <link rel="stylesheet"
          type="text/css"
          href="/css/WebApplication1.CSS">
    <link rel="stylesheet"
          type="text/css"href="/css/Widget_Generators.css">
    <script src="/JavaScipt/commonPageHelpers.js"></script>
</head>
<body onload="cphSetTitleFromTag()" lang="en-us">
<h1 class="PageTitle" id="spnPageTitle"></h1> 
```

其中，WebApplication1.css 定义了一个 PageTitle 类选择器，如下所示。

```
h1.PageTitle
{
    font-family:        Arial,Helvetica,Geneva,sans-serif ;
    font-size:          14pt ;
    font-weight:        bold ;
    font-style:         normal ;
    color:              purple ;
    text-align:         left ;

    margin-bottom:      1em ;
} 
```

定义的细节无关紧要；关键是这样的类存在于嵌入或链接到您的页面的 CSS 中。由于这个测试站点中已经有四个页面，它们都共享相同的级联样式，因此我将它们放入一个单独的文件中，所有四个页面都链接到该文件。

同样，所有四个页面都链接到 commonPageHelpers.js，其中包含以下代码。

```
//  ----------------------------------------------------------------------------
//  Define some constants that have broad usage, well beyond their applications
//  herein.
//  ----------------------------------------------------------------------------

var cLENGTH_OF_EMPTY_STRING = 0;
var cDEFAULT_PAGE_TITLE_SPAN_PLACEHOLDER = "spnPageTitle";
var cTYPEOF_IS_STRING = "string";
var cTYPEOF_IS_UNDEFINED = "undefined";

var cTRUE = 1;
var cFALSE = 0;

var cTHE_EMPTY_STRING = "";

function cphSetTitleFromTag( pstrSpanID )
{
    if ( typeof( pstrSpanID) == cTYPEOF_IS_UNDEFINED )
    {   // Degenerate case 1 of 3: Use the default placeholder span ID.
        document.getElementById( cDEFAULT_PAGE_TITLE_SPAN_PLACEHOLDER ).innerHTML = document.title;
    }   // TRUE block, if ( typeof (pstrSpanID) == cTYPEOF_IS_UNDEFINED )
    else if (typeof(pstrSpanID) == cTYPEOF_IS_STRING )
    {   // Explicitly cast pstrSpanID to a string, to simplify subsequent processing.
        var strSpanIDString = pstrSpanID.toString( );

        if ( strSpanIDString.length > cLENGTH_OF_EMPTY_STRING )
        {
            document.getElementById( strSpanIDString ).innerHTML = document.title;
        }   // TRUE block, if ( strSpanIDString.length > cLENGTH_OF_EMPTY_STRING )
        else
        {   // Degenerate case 3 of 3: Use the default placeholder span ID.
            document.getElementById( cDEFAULT_PAGE_TITLE_SPAN_PLACEHOLDER ).innerHTML = document.title;
        }   // FALSE block, if ( strSpanIDString.length > cLENGTH_OF_EMPTY_STRING )
    }   // TRUE block, else if (typeof(pstrSpanID) == cTYPEOF_IS_STRING )
    else
    {   // Degenerate case 2 of 3: Use the default placeholder span ID.
        document.getElementById( cDEFAULT_PAGE_TITLE_SPAN_PLACEHOLDER ).innerHTML = document.title;
    }   // FALSE block, if ( typeof (pstrSpanID) == cTYPEOF_IS_UNDEFINED ) and else if (typeof(pstrSpanID) == cTYPEOF_IS_STRING )
}   // cphSetTitleFromTag 
```

好的，伙计们，我知道这个函数有点矫枉过正，但它让我可以灵活地选择不同的元素 ID，而无需触及这个例程，并且当它获得空字符串时，它会尝试优雅地失败，将其视为等同于省略完全参数，这在开始语句中的 typeof 等于 "undefined" 的测试中涵盖。

将这个简短的 JavaScript 事件处理程序安全地隐藏在外部脚本文件中，在运行时从标题标签获取标题文本只需要两件事。

1.  如上所示，外部脚本文件链接到您的页面。
2.  Body 标记具有 onload="cphSetTitleFromTag()" 属性，这会导致在页面完成加载时调用 JavaScript 函数**cphSetTitleFromTag**时不带参数。
3.  您希望标题出现的标签具有指定的**ID**属性。我对**H1**的选择是任意的。

为了您的方便，我在[commonPageHelpers.js](http://www.wizardwrx.com/commonPageHelpers.js)上发布了 JavaScript 库。

最后，上述方法适用于客户端运行 JavaScript 的任何环境；服务器可以是任何东西，尽管 ASP.NET 页面可以在服务器端完成这一壮举。

# python - Python字典中的最后一个键

> ID：16125229
> 
> 赞同：86
> 
> 时间：2013-04-20T21:10:36.750
> 
> 标签：python, python-2.7

我很难弄清楚 Python 字典中最后一个键的语法是什么。我知道对于 Python 列表，人们可能会这样说来表示最后一个：

```
list[-1] 
```

我也知道可以得到一个字典的键列表，如下所示：

```
dict.keys() 
```

但是，当我尝试使用以下逻辑代码时，它不起作用：

```
dict.keys(-1) 
```

它说键不能接受任何参数，并且给出了 1。如果键不能带参数，那么我如何表示我想要列表中的最后一个键？

我的操作假设 Python 字典是按照项目添加到字典中的顺序排序的，最近的项目最后。出于这个原因，我想访问字典中的最后一个键。

我现在被告知，字典键的顺序不是基于它们添加的时间。那么我如何能够选择最近添加的密钥？

* * *

## 回答 #1

> 赞同：87
> 
> 时间：2013-04-20T21:11:14.417

看起来你想这样做：

```
dict.keys()[-1] 
```

`dict.keys()`返回字典键的列表。获得列表后，-1 索引允许您获取列表的最后一个元素。

由于字典是无序的*，因此获取字典的最后一个键是没有意义的。

也许您想先对它们进行排序。它看起来像这样：

```
sorted(dict.keys())[-1] 
```

笔记：

在 Python 3 中，代码是

```
list(dict)[-1] 
```

### *更新：

这已不再是这种情况。字典键从 Python 3.7 开始正式订购（在 3.6 中非正式订购）。

* * *

## 回答 #2

> 赞同：61
> 
> 时间：2013-04-20T21:23:27.853

如果插入顺序很重要，请查看[`collections.OrderedDict`](http://docs.python.org/2/library/collections.html#collections.OrderedDict)：

> OrderedDict 是一个 dict，它记住第一次插入键的顺序。如果新条目覆盖现有条目，则原始插入位置保持不变。删除条目并重新插入会将其移至末尾。

* * *

```
In [1]: from collections import OrderedDict

In [2]: od = OrderedDict(zip('bar','foo'))

In [3]: od
Out[3]: OrderedDict([('b', 'f'), ('a', 'o'), ('r', 'o')])

In [4]: od.keys()[-1]
Out[4]: 'r'

In [5]: od.popitem() # also removes the last item
Out[5]: ('r', 'o') 
```

### 更新：

OrderedDict 不再需要，因为字典键从 Python 3.7 开始按插入顺序正式排序（非官方在 3.6 中）。

对于这些最新的 Python 版本，您可以改用`list(my_dict)[-1]`or `list(my_dict.keys())[-1]`。

* * *

## 回答 #3

> 赞同：16
> 
> 时间：2013-04-20T21:16:34.647

要求字典中的“最后一个”键是没有意义的，因为字典键是*无序*的。您可以获取键列表并根据需要获取最后一个键，但这绝不是“字典中的最后一个键”。

* * *

## 回答 #4

> 赞同：15
> 
> 时间：2019-05-17T05:18:27.720

在 python 3.6 中，我从以下代码中获得了最后一个键的值

```
list(dict.keys())[-1] 
```

* * *

## 回答 #5

> 赞同：8
> 
> 时间：2020-07-23T16:42:45.120

由于 python 3.7 dict 总是有序的（插入顺序），

由于 python 3.8`keys()`和`values()`dict`items()`返回：视图可以是`reversed`：

获取**最后一个密钥**：

```
next(reversed(my_dict.keys())) 
```

同样适用于`values()`和`items()`

**PS**，**获得第一个关键**用途： `next(iter(my_dict.keys()))`

* * *

## 回答 #6

> 赞同：6
> 
> 时间：2013-04-20T21:19:33.597

```
sorted(dict.keys())[-1] 
```

否则，`keys`只是一个无序列表，“最后一个”是没有意义的，甚至在各种python版本上都可以不同。

也许您想研究[OrderedDict](https://docs.python.org/2/library/collections.html#collections.OrderedDict)。

* * *

## 回答 #7

> 赞同：5
> 
> 时间：2015-04-07T19:17:07.990

绝对有充分的理由需要 OrderedDict 的最后一个键。我在编辑用户时使用有序字典列出我的用户。我正在使用 AJAX 调用来更新用户权限并添加新用户。由于在检查权限时会触发 AJAX，因此为了方便起见，我希望我的新用户保持在显示列表中的相同位置（最后一个），直到我重新加载页面。每次脚本运行时，它都会重新排序用户字典。

这一切都很好，为什么需要最后一个条目？因此，当我为我的软件编写单元测试时，我想确认用户保持在最后一个位置，直到重新加载页面。

```
dict.keys()[-1] 
```

完美执行此功能（Python 2.7）。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2019-02-01T21:00:54.027

您可以执行以下功能：

```
def getLastItem(dictionary):
    last_keyval = dictionary.popitem()
    dictionary.update({last_keyval[0]:last_keyval[1]})
    return {last_keyval[0]:last_keyval[1]} 
```

这不改变原来的字典！发生这种情况是因为 popitem() 函数返回一个元组，我们可以利用它为我们提供帮助！

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2019-02-08T08:11:10.763

肯定需要获取字典的最后一个元素，例如确认最新元素是否已附加到字典对象。

我们需要将字典键转换为列表对象，并使用索引 -1 打印出最后一个元素。

```
mydict = {'John':'apple','Mat':'orange','Jane':'guava','Kim':'apple','Kate': 'grapes'}

mydict.keys() 
```

> 输出： dict_keys(['John', 'Mat', 'Jane', 'Kim', 'Kate'])

```
list(mydict.keys()) 
```

> 输出：['John', 'Mat', 'Jane', 'Kim', 'Kate']

```
list(mydict.keys())[-1] 
```

> 输出：“凯特”

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2021-06-05T07:24:24.273

这将返回字典的最后一个元素：

```
dictObj[len(dictObj.keys()) - 1] 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2021-03-04T08:38:52.260

```
#to find last key:

dict = {'a':1,'b':2,'c':3,'d':4}
print(dict)

res = list(dict.key())[-1]
print(res)

#to find last value:

dict = {'a':1,'b':2,'c':3,'d':4}
print(dict)

res = list(dict.values())[-1]
print(res) 
```

* * *

## 回答 #12

> 赞同：-4
> 
> 时间：2016-10-13T17:16:42.110

是的，有：`len(data)-1`。

对于第一个元素，它是：0

# jquery - 使用 AJAX 动态获取每个表行的匹配数据

> ID：16125232
> 
> 赞同：0
> 
> 时间：2013-04-20T21:10:52.837
> 
> 标签：jquery, jsp, spring-mvc

下面的行是动态生成的

```
<input id="soid0" name="soid[0].name" type="text" />
<input id="soid1" name="soid[1].name" type="text" />
<input id="soid2" name="soid[2].name" type="text" /> 
```

当我遍历文本字段时，Ajax 查询应该调用后端并获取匹配的数据（如果存在）

```
 $(document).ready(function() {
        $( "#soid0" ).autocomplete({
            source: "/myapp/soid.htm"
        });

    }); 
```

该查询有效，但我希望它适用于所有动态生成的行`#soid0`，`#soid1`？简而言之，我需要一个适用于所有文本字段的查询。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-20T21:13:13.493

# 按属性选择器

* * *

将属性选择器与`^`开头选择器结合使用。

```
$(document).ready(function() {
    $('input[name^="soid"]' ).autocomplete({
        source: "/myapp/soid.htm"
    });
}); 
```

请注意，当可以使用类时，jquery 文档建议不要使用此选择器，说明：

> 但是，它会比使用类选择器慢，因此如果可以的话，可以利用类来对类似元素进行分组。

# 按类别（首选方法）

* * *

或者对每个输入应用一个类：

**HTML**

```
<input id="soid0" class="soid" name="soid[0].name" type="text" />
<input id="soid1" class="soid" name="soid[1].name" type="text" />
<input id="soid2" class="soid" name="soid[2].name" type="text" /> 
```

**Javascript**

```
$(document).ready(function() {
    $('.soid' ).autocomplete({
        source: "/myapp/soid.htm"
    });
}); 
```

# 按标签

* * *

或者，如果这些是页面上唯一的输入，请使用标签选择器：

```
$(document).ready(function() {
    $('input' ).autocomplete({
        source: "/myapp/soid.htm"
    });
}); 
```

**工作示例** [http://jsfiddle.net/QqeLp/](http://jsfiddle.net/QqeLp/)

# validation - 验证消息不再显示

> ID：16125235
> 
> 赞同：0
> 
> 时间：2013-04-20T21:10:58.637
> 
> 标签：validation, jsf

我需要验证一个`<p:spinner>`值是否在设定范围内。

```
<p:spinner id="minutes" min="0" max="1000" value="#{printerSettings.t}"  size ="1">
    <f:validateLongRange minimum="0" maximum="1000" />
    <p:ajax update="NewTime"/>
</p:spinner>
<h:message for="minutes" style="color:red" /> 
```

和

```
<p>Number of copies (Max of 50) :
    <p:spinner id ="Copies" min="1" max="50" value="#{printerSettings.p}" size ="1"> <!-- allows the user a choice of up to 50, this is more than enough for any situation, if needed this can be removed or raised -->
        <p:ajax update="p"/>
        <f:validateLongRange minimum="1" maximum="50" />
    </p:spinner>
    <div class="whiteSpace"/>   
    <h:outputText value="Copies that will be printed: &nbsp; #{printerSettings.p}" id="p"/>

    <h:message for="Copies" style="color:red" />
</p> 
```

这以前可以工作，但现在没有发生验证，没有错误等。这是如何引起的，我该如何解决？

编辑

```
 <div id="site_content">
        <div id="content">
            <h:body>

                <h:form onsubmit="return validateForm()"> 
                    <p>

                    In how many minutes time would you like to have your job sent to the printer ?  
                    <div class="whiteSpace"/>
                    <p:spinner id="minutes" min="0" max="1000" value="#{printerSettings.t}"  size ="1">
                        <p:ajax update="NewTime"/>
                        <f:validateLongRange minimum="1" maximum="1000" />
                    </p:spinner>

                    <h:message for="minutes" style="color:red" />

                    <br></br>
                    <br></br>

                    The time the print job will be sent to the printer will be : 
                    <!--<p:button actionListener="{otherBean.setTValue(printerSettings.t)}" value="Set Val" /> Currently causing an error -->
                    <br></br>
                    <h:outputText value="#{printerSettings.getNewTime()}" id="NewTime"/>
                    <br></br>
                    <br></br>
                    <p:commandButton  type="submit" action="#{email.mail(printerSettings.t, printerSettings.p, printerSettings.paperSize, printerSettings.duplex, printerSettings.orienation, printerSettings.printer)}" onclick="Thankyou()" value="Print" />

<p:button outcome="index" value="Homepage" icon="ui-icon-home">  
                    </p:button>  

                </h:form>
            </h:body>
        </div>
    </div>
    <script type="text/javascript">

                    function Thankyou()
                    {
                        alert("Sent to the printing holding queue, you may close this app now or carry on using this app, your work will still print out ");
                        //location.href = 'index.xhtml';

                    } 
```

那样行吗 ？如果需要，我可以发布更多代码，正如我在评论中所说，验证似乎正在工作，这只是现在显示的错误消息

编辑

```
 <p:commandButton  type="submit" update ="minutes2 Copies2"  action="#{email.mail(printerSettings.t, printerSettings.p, printerSettings.paperSize, printerSettings.duplex, printerSettings.orienation, printerSettings.printer)}" onclick="Thankyou()" value="Print" /> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-20T21:48:44.733

您正在通过 ajax 验证和提交表单，但您没有指示 JSF 在 ajax 响应中更新消息组件。他们不会自行更新。

您需要给消息组件一个 ID 并在 ajax 更新中引用它们。

例如

```
<h:message id="foo" ... /> 
```

和

```
<p:ajax ... update="foo" /> 
```

和

```
<p:commandButton ... update="foo" /> 
```

如有必要，您可以指定多个以空格分隔的 ID。

```
<p:commandButton ... update="foo bar" /> 
```

# string - 从循环创建字符串向量

> ID：16125239
> 
> 赞同：0
> 
> 时间：2013-04-20T21:11:18.453
> 
> 标签：string, r, for-loop

我正在尝试为`combn`命令创建一个标签，以便我确切知道比较了哪些对。这是一个例子：让 a 成为我感兴趣的向量，

```
a<-seq(1,10,1)
c<-combn(a,2) 
```

所以我想用成对的数字创建一个矢量*标签：*

```
label<-rep("abc",times=ncol(c)) #This is just a vector to initialized "label"
head(label)

for(i in ncol(c)){
label[i]<-c(paste("Exon",c[1,i],"with",c[2,i]))
}
head(label) 
```

问题是当我运行`for`循环时它不起作用。或者，它只输出最后一次比较。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-20T21:17:11.193

删除循环并使用矢量化方法：

```
label <- paste("Exon", c[1,] "with", c[2,]) 
```

顺便说一句：`c`是一个非常糟糕的变量名（请参阅 参考资料`?c`）。

# android - 高通没有 Unity 的 Vuforia

> ID：16125240
> 
> 赞同：1
> 
> 时间：2013-04-20T21:11:19.300
> 
> 标签：android, augmented-reality, vuforia

我是 Vuforia SDK 的新手。
在我编译并运行示例应用程序之后。
我试图创建自己的 3D 对象，以便高通希望您下载 Unity 的游戏引擎。
他们为 Eclipse 提供了一个扩展。

我的问题是。有没有办法在不购买 400 美元或 1500 美元的 pro unity 的情况下构建 3D 模型？我看到了一些关于 openGL 的东西，但我真的不明白我是否可以替换 Unity。

在线目标管理器让您创建两个目标：
1.SDK（Eclipse、Ant、Xcode 等）
2.Unity 编辑器

但是生成 3D 模型呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-01-22T17:45:57.310

如果您将 Unity 3D 用于非商业项目，现在将免费提供 Unity 3D。如果您想在商业上使用它，他们会收取许可费。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-26T17:57:08.507

如果您已经团结一致，Vuforia 是“免费的”。否则，您将被困在没有渲染引擎的情况下，不得不支付 400-1500 美元。

我建议使用 Metaio SDK。它是免费的（只是在左下角有一个小水印），并且包含一个带有 SDK 的 3d 渲染引擎。

它还支持所有类型的 3D 模型，包括 FBX、MD2 和 OBJ。因此，您可以使用[http://www.blender.org/](http://www.blender.org/)来创建 3d 模型。

Metaio 还提供以下与您相关的网络研讨会/教程：

*   关于在 Android、iOS 和 Unity 中使用 Metaio SDK 的网络研讨会：[https ://dev.metaio.com/webinars/](https://dev.metaio.com/webinars/)
*   关于在 Blender 中创建 AR 内容的网络研讨会：[https ://dev.metaio.com/helpdesk/webinars/content-creation-and-management/](https://dev.metaio.com/helpdesk/webinars/content-creation-and-management/)
*   分步教程和示例代码：[http ://dev.metaio.com/sdk/getting-started/](http://dev.metaio.com/sdk/getting-started/)

希望这可以帮助。

# android - Android中可靠时钟的好策略？

> ID：16125242
> 
> 赞同：1
> 
> 时间：2013-04-20T21:11:24.610
> 
> 标签：android

如果 24 小时过去了，我正在开发一个需要与网络服务器同步的应用程序。每个交互都记录在数据库中，以便我可以跟踪上次同步时间，因此当应用程序启动时，它会检查数据库以查看是否到了同步时间。

到目前为止，我还没有找到合适的时钟来测量可靠和一致的时间，时钟要么是临时的（测量正常运行时间），要么用户可以更改它们的日期，所以有什么好的策略来处理这些的问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-20T21:53:48.807

*这是软件工程中每个人*的常见问题，唯一正确的答案是：不是没有网络调用。测量时间是你无法普遍做到的事情。时区、不同的用户时钟、夏令时，所有这些**都会**发生。要么使用`System.elapsedRealTime()`诸如启动监听器之类的东西，要么询问服务器时间是什么（这实际上是一个*坏*主意，因为它可能a）失败b）非常慢c）花费用户金钱并且d）浪费电池。您可以做的另一件事是每天在特定时间（例如凌晨 4 点）自动同步。这对用户更改时间或 DST 没有帮助，但它适用于 99% 的所有场景。用户通常不会改变很多时间:)

# php - 在 HTML 元素中防止 XSS

> ID：16125244
> 
> 赞同：3
> 
> 时间：2013-04-20T21:11:29.513
> 
> 标签：php, xss

以下内容足以防止 HTML 元素内部出现 XSS 吗？

```
function XSS_encode_html ( $str )
{
    $str = str_replace ( '&', "&amp;", $str );
    $str = str_replace ( '<', "&lt;", $str );
    $str = str_replace ( '>', "&gt;", $str );
    $str = str_replace ( '"', " &quot;", $str );
    $str = str_replace ( '\'', " &#x27;", $str );
    $str = str_replace ( '/', "&#x2F;", $str );

    return $str;
} 
```

如此处所述： -
[https://www.owasp.org/index.php/Abridged_XSS_Prevention_Cheat_Sheet#RULE_.231_-_HTML_Escape_Before_Inserting_Untrusted_Data_into_HTML_Element_Content](https://www.owasp.org/index.php/Abridged_XSS_Prevention_Cheat_Sheet#RULE_.231_-_HTML_Escape_Before_Inserting_Untrusted_Data_into_HTML_Element_Content)

* * *

**编辑**

我没有使用 htmlspecialchars() 因为： -

1.  它不会改变 / 到`&#x2F;`
2.  ' （单引号）在设置 ENT_QUOTES 时变为 ' `&#039;`' （或）。`&apos;`

根据 OWASP，'（单引号）应该变成`&#x27;`（*叫我迂腐*）并且
`&apos;`不推荐，因为它不在 HTML 规范中

* * *

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-20T23:39:15.193

在元素的内容中，[唯一可能有害的字符是开始标记分隔符`<`](http://shazzer.co.uk/vector/Replacement-for-lt-in-tag)，因为它可能表示某些标记声明的开始，无论是开始标记、结束标记还是注释。所以这个角色应该*总是*被转义。

其他字符不一定需要在元素的内容中进行转义。

引号确实只需要在标签内进行转义，特别是当用于包裹在相同引号内或根本不被引用的属性值时。类似地，标记声明关闭分隔符`>`只需要在标签内进行转义，此处仅在未引用的属性值中使用时。但是，[建议同时转义普通的 & 符号，以避免它们被错误地解释为字符引用的开始](https://stackoverflow.com/q/11027167/53114)。

至于替换的原因`/`，可能是由于SGML中的一个特性，标记语言HTML改编自，它允许所谓[的空结束标记](http://www.is-thought.co.uk/book/sgml-9.htm#NET)：

> 要了解 null 结束标签在实践中的工作方式，请考虑将其与可以定义为的元素结合使用：
> 
> ```
> <!ELEMENT ISBN  - -  CDATA --ISBN number-- > 
> ```
> 
> 而不是输入 ISBN 号：
> 
> ```
> <ISBN>0 201 17535 5</ISBN> 
> ```
> 
> 我们可以使用 null end-tag 选项以缩短的形式输入元素：
> 
> ```
> <ISBN/0 201 17535 5/ 
> ```

但是，我从未见过任何浏览器实现过此功能。HTML 的语法规则一直比 SGML 语法规则更严格。

另一个更可能的原因是所谓的[原始文本元素 (`script`和`style`)](http://www.w3.org/TR/html5/syntax.html#raw-text-elements)的内容模型，它是具有以下[限制](http://www.w3.org/TR/html5/syntax.html#cdata-rcdata-restrictions)的纯文本：

> 原始文本和 RCDATA 元素中的文本不得包含任何出现的字符串“ `</`”（U+003C LESS-THAN SIGN, U+002F SOLIDUS），后跟不区分大小写匹配元素标签名称的字符，后跟以下之一“制表符”（U+0009）、“LF”（U+000A）、“FF”（U+000C）、“CR”（U+000D）、U+0020 空格、“ `>`”（U+003E）或" `/`" (U+002F)。

这里它说在原始文本元素内部，例如`script`出现的`</script/`将表示结束标记：

```
<script>
alert(0</script/.exec("script").index)
</script> 
```

尽管 JavaScript 代码完全有效，但结束标记将由`</script/`. 但除此之外，`/`它不会造成任何伤害。而且，如果您只允许在 JavaScript 上下文中使用转义 HTML 的任意输入，那么您已经注定要失败了。

[顺便说一句，转义这些字符的字符引用](http://www.w3.org/TR/html5/syntax.html#character-references)类型无关紧要，无论是命名字符引用（即实体引用）还是数字字符引用，无论是十进制还是十六进制。它们都引用了相同的字符。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-20T21:20:48.600

你应该使用`htmlspecialchars`：

```
$str = htmlspecialchars($str, ENT_QUOTES, 'UTF-8'); 
```

这是[文档](http://php.net/manual/en/function.htmlspecialchars.php)，基本上可以完成您的功能，但它已经实现并且更干净。但是，它不会转换斜杠和反斜杠。

如果要使用命名的 HTML 实体转换每个字符，可以使用`htmlentities`：

```
$str = htmlentities($str, ENT_QUOTES, 'UTF-8'); 
```

它[记录](http://www.php.net/manual/en/function.htmlentities.php)在这里。如果您只想防止 XSS 攻击和 JS 注入，我会推荐前者，因为它的开销要低得多。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-20T22:47:30.360

好吧，这是一个很长的内容，但我觉得如果我不分享它会造成伤害。所有代码直接取自 Drupal 最新稳定版本的源代码的各个部分，并编译到一个区域（如下所示）。非常有效的防止 XSS 攻击的方法。

示例用法：

```
$html = file_get_contents('http://example.com');
$output = filter_xss($html);
print $output; 
```

或者：

```
$html = file_get_contents('http://example.com');
// Allow only <ul></ul>, <li></li>, and <p></p> tags.
$allowed_tags = array('ul', 'li', 'p');
$output = filter_xss($html, $allowed_tags);
print $output; 
```

这是运行上述示例所需的代码：

```
/**
 * Filters HTML to prevent cross-site-scripting (XSS) vulnerabilities.
 *
 * Based on kses by Ulf Harnhammar, see http://sourceforge.net/projects/kses.
 * For examples of various XSS attacks, see: http://ha.ckers.org/xss.html.
 *
 * This code does four things:
 * - Removes characters and constructs that can trick browsers.
 * - Makes sure all HTML entities are well-formed.
 * - Makes sure all HTML tags and attributes are well-formed.
 * - Makes sure no HTML tags contain URLs with a disallowed protocol (e.g.
 *   javascript:).
 *
 * @param $string
 *   The string with raw HTML in it. It will be stripped of everything that can
 *   cause an XSS attack.
 * @param $allowed_tags
 *   An array of allowed tags.
 *
 * @return
 *   An XSS safe version of $string, or an empty string if $string is not
 *   valid UTF-8.
 *
 * @see validate_utf8()
 * @ingroup sanitization
 */
function filter_xss($string, $allowed_tags = array('a', 'em', 'strong', 'cite', 'blockquote', 'code', 'ul', 'ol', 'li', 'dl', 'dt', 'dd')) {
  // Only operate on valid UTF-8 strings. This is necessary to prevent cross
  // site scripting issues on Internet Explorer 6.
  if (!validate_utf8($string)) {
    return '';
  }
  // Store the text format.
  _filter_xss_split($allowed_tags, TRUE);
  // Remove NULL characters (ignored by some browsers).
  $string = str_replace(chr(0), '', $string);
  // Remove Netscape 4 JS entities.
  $string = preg_replace('%&\s*\{[^}]*(\}\s*;?|$)%', '', $string);

  // Defuse all HTML entities.
  $string = str_replace('&', '&amp;', $string);
  // Change back only well-formed entities in our whitelist:
  // Decimal numeric entities.
  $string = preg_replace('/&amp;#([0-9]+;)/', '&#\1', $string);
  // Hexadecimal numeric entities.
  $string = preg_replace('/&amp;#[Xx]0*((?:[0-9A-Fa-f]{2})+;)/', '&#x\1', $string);
  // Named entities.
  $string = preg_replace('/&amp;([A-Za-z][A-Za-z0-9]*;)/', '&\1', $string);

  return preg_replace_callback('%
    (
    <(?=[^a-zA-Z!/])  # a lone <
    |                 # or
    <!--.*?-->        # a comment
    |                 # or
    <[^>]*(>|$)       # a string that starts with a <, up until the > or the end of the string
    |                 # or
    >                 # just a >
    )%x', '_filter_xss_split', $string);
}

/**
 * Processes an HTML tag.
 *
 * @param $m
 *   An array with various meaning depending on the value of $store.
 *   If $store is TRUE then the array contains the allowed tags.
 *   If $store is FALSE then the array has one element, the HTML tag to process.
 * @param $store
 *   Whether to store $m.
 *
 * @return
 *   If the element isn't allowed, an empty string. Otherwise, the cleaned up
 *   version of the HTML element.
 */
function _filter_xss_split($m, $store = FALSE) {
  static $allowed_html;

  if ($store) {
    $allowed_html = array_flip($m);
    return;
  }

  $string = $m[1];

  if (substr($string, 0, 1) != '<') {
    // We matched a lone ">" character.
    return '&gt;';
  }
  elseif (strlen($string) == 1) {
    // We matched a lone "<" character.
    return '&lt;';
  }

  if (!preg_match('%^<\s*(/\s*)?([a-zA-Z0-9]+)([^>]*)>?|(<!--.*?-->)$%', $string, $matches)) {
    // Seriously malformed.
    return '';
  }

  $slash = trim($matches[1]);
  $elem = &$matches[2];
  $attrlist = &$matches[3];
  $comment = &$matches[4];

  if ($comment) {
    $elem = '!--';
  }

  if (!isset($allowed_html[strtolower($elem)])) {
    // Disallowed HTML element.
    return '';
  }

  if ($comment) {
    return $comment;
  }

  if ($slash != '') {
    return "</$elem>";
  }

  // Is there a closing XHTML slash at the end of the attributes?
  $attrlist = preg_replace('%(\s?)/\s*$%', '\1', $attrlist, -1, $count);
  $xhtml_slash = $count ? ' /' : '';

  // Clean up attributes.
  $attr2 = implode(' ', _filter_xss_attributes($attrlist));
  $attr2 = preg_replace('/[<>]/', '', $attr2);
  $attr2 = strlen($attr2) ? ' ' . $attr2 : '';

  return "<$elem$attr2$xhtml_slash>";
}

/**
 * Processes a string of HTML attributes.
 *
 * @return
 *   Cleaned up version of the HTML attributes.
 */
function _filter_xss_attributes($attr) {
  $attrarr = array();
  $mode = 0;
  $attrname = '';

  while (strlen($attr) != 0) {
    // Was the last operation successful?
    $working = 0;

    switch ($mode) {
      case 0:
        // Attribute name, href for instance.
        if (preg_match('/^([-a-zA-Z]+)/', $attr, $match)) {
          $attrname = strtolower($match[1]);
          $skip = ($attrname == 'style' || substr($attrname, 0, 2) == 'on');
          $working = $mode = 1;
          $attr = preg_replace('/^[-a-zA-Z]+/', '', $attr);
        }
        break;

      case 1:
        // Equals sign or valueless ("selected").
        if (preg_match('/^\s*=\s*/', $attr)) {
          $working = 1; $mode = 2;
          $attr = preg_replace('/^\s*=\s*/', '', $attr);
          break;
        }

        if (preg_match('/^\s+/', $attr)) {
          $working = 1; $mode = 0;
          if (!$skip) {
            $attrarr[] = $attrname;
          }
          $attr = preg_replace('/^\s+/', '', $attr);
        }
        break;

      case 2:
        // Attribute value, a URL after href= for instance.
        if (preg_match('/^"([^"]*)"(\s+|$)/', $attr, $match)) {
          $thisval = filter_xss_bad_protocol($match[1]);

          if (!$skip) {
            $attrarr[] = "$attrname=\"$thisval\"";
          }
          $working = 1;
          $mode = 0;
          $attr = preg_replace('/^"[^"]*"(\s+|$)/', '', $attr);
          break;
        }

        if (preg_match("/^'([^']*)'(\s+|$)/", $attr, $match)) {
          $thisval = filter_xss_bad_protocol($match[1]);

          if (!$skip) {
            $attrarr[] = "$attrname='$thisval'";
          }
          $working = 1; $mode = 0;
          $attr = preg_replace("/^'[^']*'(\s+|$)/", '', $attr);
          break;
        }

        if (preg_match("%^([^\s\"']+)(\s+|$)%", $attr, $match)) {
          $thisval = filter_xss_bad_protocol($match[1]);

          if (!$skip) {
            $attrarr[] = "$attrname=\"$thisval\"";
          }
          $working = 1; $mode = 0;
          $attr = preg_replace("%^[^\s\"']+(\s+|$)%", '', $attr);
        }
        break;
    }

    if ($working == 0) {
      // Not well formed; remove and try again.
      $attr = preg_replace('/
        ^
        (
        "[^"]*("|$)     # - a string that starts with a double quote, up until the next double quote or the end of the string
        |               # or
        \'[^\']*(\'|$)| # - a string that starts with a quote, up until the next quote or the end of the string
        |               # or
        \S              # - a non-whitespace character
        )*              # any number of the above three
        \s*             # any number of whitespaces
        /x', '', $attr);
      $mode = 0;
    }
  }

  // The attribute list ends with a valueless attribute like "selected".
  if ($mode == 1 && !$skip) {
    $attrarr[] = $attrname;
  }
  return $attrarr;
}

/**
 * Processes an HTML attribute value and strips dangerous protocols from URLs.
 *
 * @param $string
 *   The string with the attribute value.
 * @param $decode
 *   (deprecated) Whether to decode entities in the $string. Set to FALSE if the
 *   $string is in plain text, TRUE otherwise. Defaults to TRUE.
 *
 * @return
 *   Cleaned up and HTML-escaped version of $string.
 */
function filter_xss_bad_protocol($string, $decode = TRUE) {
  // Get the plain text representation of the attribute value (i.e. its meaning).
  if ($decode) {

    $string = decode_entities($string);
  }
  return check_plain(strip_dangerous_protocols($string));
}

/**
 * Strips dangerous protocols (e.g. 'javascript:') from a URI.
 *
 * @param $uri
 *   A plain-text URI that might contain dangerous protocols.
 *
 * @return
 *   A plain-text URI stripped of dangerous protocols. As with all plain-text
 *   strings, this return value must not be output to an HTML page without
 *   check_plain() being called on it. However, it can be passed to functions
 *   expecting plain-text strings.
 *
 */
function strip_dangerous_protocols($uri) {
  static $allowed_protocols;

  if (!isset($allowed_protocols)) {
    $allowed_protocols = array_flip(array('ftp', 'http', 'https', 'irc', 'mailto', 'news', 'nntp', 'rtsp', 'sftp', 'ssh', 'tel', 'telnet', 'webcal'));
  }

  // Iteratively remove any invalid protocol found.
  do {
    $before = $uri;
    $colonpos = strpos($uri, ':');
    if ($colonpos > 0) {
      // We found a colon, possibly a protocol. Verify.
      $protocol = substr($uri, 0, $colonpos);
      // If a colon is preceded by a slash, question mark or hash, it cannot
      // possibly be part of the URL scheme. This must be a relative URL, which
      // inherits the (safe) protocol of the base document.
      if (preg_match('![/?#]!', $protocol)) {
        break;
      }
      // Check if this is a disallowed protocol. Per RFC2616, section 3.2.3
      // (URI Comparison) scheme comparison must be case-insensitive.
      if (!isset($allowed_protocols[strtolower($protocol)])) {
        $uri = substr($uri, $colonpos + 1);
      }
    }
  } while ($before != $uri);

  return $uri;
}

/**
 * Encodes special characters in a plain-text string for display as HTML.
 *
 * Also validates strings as UTF-8 to prevent cross site scripting attacks on
 * Internet Explorer 6.
 *
 * @param $text
 *   The text to be checked or processed.
 *
 * @return
 *   An HTML safe version of $text, or an empty string if $text is not
 *   valid UTF-8.
 *
 * @see validate_utf8()
 * @ingroup sanitization
 */
function check_plain($text) {
  return htmlspecialchars($text, ENT_QUOTES, 'UTF-8');
}

/**
 * Decodes all HTML entities (including numerical ones) to regular UTF-8 bytes.
 *
 * Double-escaped entities will only be decoded once ("&amp;lt;" becomes "&lt;"
 * , not "<"). Be careful when using this function, as decode_entities can
 * revert previous sanitization efforts (&lt;script&gt; will become <script>).
 *
 * @param $text
 *   The text to decode entities in.
 *
 * @return
 *   The input $text, with all HTML entities decoded once.
 */
function decode_entities($text) {
  return html_entity_decode($text, ENT_QUOTES, 'UTF-8');
}

/**
 * Checks whether a string is valid UTF-8.
 *
 * All functions designed to filter input should use validate_utf8
 * to ensure they operate on valid UTF-8 strings to prevent bypass of the
 * filter.
 *
 * When text containing an invalid UTF-8 lead byte (0xC0 - 0xFF) is presented
 * as UTF-8 to Internet Explorer 6, the program may misinterpret subsequent
 * bytes. When these subsequent bytes are HTML control characters such as
 * quotes or angle brackets, parts of the text that were deemed safe by filters
 * end up in locations that are potentially unsafe; An onerror attribute that
 * is outside of a tag, and thus deemed safe by a filter, can be interpreted
 * by the browser as if it were inside the tag.
 *
 * The function does not return FALSE for strings containing character codes
 * above U+10FFFF, even though these are prohibited by RFC 3629.
 *
 * @param $text
 *   The text to check.
 *
 * @return
 *   TRUE if the text is valid UTF-8, FALSE if not.
 */
function validate_utf8($text) {
  if (strlen($text) == 0) {
    return TRUE;
  }
  // With the PCRE_UTF8 modifier 'u', preg_match() fails silently on strings
  // containing invalid UTF-8 byte sequences. It does not reject character
  // codes above U+10FFFF (represented by 4 or more octets), though.
  return (preg_match('/^./us', $text) == 1);
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-09-02T09:08:07.900

对于 perl 脚本或 cgi，您可以使用[HTML::Entities](http://search.cpan.org/dist/HTML-Parser/lib/HTML/Entities.pm)：

```
use HTML::Entities;

$str = encode_entities($str, '<>&"'); 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-04-20T22:31:40.547

您可以使用 stripslashes() 函数。

```
 $str = stripslashes($str); 
```

# google-app-engine - 试图提高我的 GAE 应用程序的性能

> ID：16125251
> 
> 赞同：0
> 
> 时间：2013-04-20T21:12:15.963
> 
> 标签：google-app-engine, python-2.7, google-cloud-datastore, appstats

我正在尝试使用 memcache 来提高性能。
这是我的模型：

```
class ABC(db.Model):
   some_property = db.StringProperty()
# more properties

class XYZ(db.Model):
   another_property = db.StringProperty()
   abc = db.ReferenceProperty(ABC,collection_name="xyzs")
# more properties 
```

我只有两个 ABC 实体和 800 个 XYZ 实体
所以，该应用程序的功能之一是为所有 XYZ 提供 excel 表。excel工作表有两列。
第一列是“another_property”，第二列是“some_property”（来自 ABC 参考）。

```
 xyzs = XYZ.all()
for xyz in xyzs:
   logging.info(xyz.another_property)
   logging.info(xyz.abc.some_property) 
```

使用这种方法，`xyz.abc.some_property`每次都进行数据存储调用
![参考属性进行 datstore 查询](https://i.stack.imgur.com/xNGQD.png)

![RPC 调用](https://i.stack.imgur.com/IDbOR.png)

看到这一点，我决定使用 memcache 将 abc 引用存储在内存中。
在使用 memcache 时，我没有看到响应时间有任何重大变化。

```
abcId = XYZ.abc.get_value_for_datastore(xyz).id()
#Get ABC reference from memcache if present else bring it from datastore and add it to memcahce. 
```

![内存缓存](https://i.stack.imgur.com/vCPWK.png)

![内存缓存 RPC](https://i.stack.imgur.com/M1Ni1.png)

可以请某人为什么我没有看到任何性能提升？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T00:11:49.013

您可能会注意到，如果您刚开始考虑使用 ndb。

现在回答我的问题，您应该使用更有效的预取引用属性方法，请参阅 nick johnson [http://blog.notdot.net/2010/01/ReferenceProperty-prefetching-in-App-Engine撰写的文章](http://blog.notdot.net/2010/01/ReferenceProperty-prefetching-in-App-Engine)

它基本上收集了引用属性中的所有键，然后对所有实体进行一次获取。您可能会发现它的性能与 memcache 一样好，此外，如果实体从 memcache 中被逐出（这将发生），您将获得所有数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-20T22:26:28.040

我试图为每个 XYZ 实体做一个 get memcache。我通过批量获取内存缓存解决了这个问题[https://developers.google.com/appengine/docs/python/memcache/clientclass#Client_get_multi](https://developers.google.com/appengine/docs/python/memcache/clientclass#Client_get_multi)
伪代码：

```
 abcIds = [str(XYZ.abc.get_value_for_datastore(xyz).id() for xyz in xyzs]
abcs = memcache.get_multi(abcIds) #This gives me a dictionary of id as key and ABC reference property as value 
```

这是我的应用程序改进版本的快照。![改进的内存](https://i.stack.imgur.com/1l7kk.png)

发布它，因为它可能会帮助其他人。
PS：我感觉这也可以改进。帮助我改进答案。

# rubymotion - 如何在 ruby 运动中创建 textView？

> ID：16125253
> 
> 赞同：0
> 
> 时间：2013-04-20T21:12:27.563
> 
> 标签：rubymotion

我刚刚开始使用 RubyMotion，并在 Rails 中有过一段历史。我有一个带有两个视图的简单应用程序。第一个视图是一个列出“类别”数组的 tableView。每个类别都有一个详细视图。我最初将详细视图也设置为 tableView，但由于每个类别只有一小段静态文本，我将更改为 UILabel。我考虑在细节中使用单行表格并根据内容更改单元格高度，但决定因为我只需要一个单元格......这可能是表格使用不当和更好地使用 UILabel （到目前为止我可以说是静态文本......不仅仅是一个“标签”）。非常欢迎对此提出意见或想法。

# category_view_controller.rb

因此，在我现有的 category_view_controller 中，当从类别视图控制器的类别列表中选择一行时，我有以下方法推送详细信息视图控制器。因为，现在我正在 app_deligate.rb 中静态地创建我的类别及其属性（标签和描述）。这在 sim 中运行良好。

```
 def tableView(tableView, didSelectRowAtIndexPath:indexPath)

     case indexPath.section
      when 0
       cat, label, desc = Categories.categories_list[indexPath.row]
       detailsVC = DetailViewController.alloc.initWithStyle(UITableViewStyleGrouped,        category:cat, label:label, description:desc)
       navigationController.pushViewController(detailsVC, animated:true)
     end

    tableView.deselectRowAtIndexPath(indexPath, animated:true)
  end 
```

# DetailViewController.rb。

这个控制器继承自 UITableViewController。下面的代码已经被修改以摆脱 tableView...这就是为什么没有 table（你可以看到我从哪里开始更改为 UILabel）。使用一个简单的白色标签也可以很好地加载，其中包含我在 add_deligate 文件中设置的详细信息文本。

```
class DetailViewController < UITableViewController

 def initWithStyle(style, category:cat, label:label, description:desc)
   initWithStyle(style)
   @category = cat
   @description = desc
   @label_text = label
   self
 end

 def viewDidLoad
   super
   self.view.backgroundColor = UIColor.redColor

   @label = UILabel.alloc.initWithFrame([[20, 50], [280, 80]]).tap do |label|
    label.translatesAutoresizingMaskIntoConstraints = false
    label.text = @description
    label.lineBreakMode = UILineBreakModeTailTruncation
    label.numberOfLines = 0
    label.sizeToFit
    label.textColor = UIColor.colorWithHue(0.0, saturation:0.0, brightness:0.40, alpha:1.0)
    self.view.addSubview(label)
  end
 end  
end 
```

# 我的困惑

我不知道如何删除 tableView 并仅通过 UILabel 使用简单的静态文本。或者，也许还有更好的方法。

我知道我需要在调用 details_view_controller 的 categories_views_controller 中更改这一行。此行仍在引用 UITableViewStyleGrouped...并且不应该，因为没有要设置样式的表格。

```
detailsVC = DetailViewController.alloc.initWithStyle(UITableViewStyleGrouped, category:cat, label:label, description:desc) 
```

我尝试简单地删除'initWithStyle ...但是，这会破坏应用程序。

```
detailsVC = DetailViewController.alloc.init(category:cat, label:label, description:desc) 
```

我还需要 details_view_controller 不继承自 < UITableViewController. 这看起来就像删除或更改继承一样简单。我试过......但是，这会破坏应用程序。我怀疑一旦我从 category_view_controller 的详细信息调用中正确删除了“UITableViewStyleGrouped”，其中任何一个都可能起作用。

```
 class DetailViewController 
```

和

```
 class DetailViewController < UIViewController 
```

此外，当我在 details_view_controller 内的 viewDidLoad 方法中设置背景颜色时，它没有任何效果。不知道为什么。

```
 self.view.backgroundColor = UIColor.redColor 
```

所以，回顾一下。根视图是静态类别的tableView，每个类别都有一个详细视图。点击列表中的类别时会加载详细视图。详细信息视图是一个简单的视图，其中包含一个显示类别详细描述的 UILabel 元素。

我希望有人能指出我学习动作的方向并使这段代码按预期工作。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-21T06:53:45.430

看起来你有很多背景阅读要做。没问题——我们都在同一时刻。但是您遇到的问题似乎是对 Cocoa Touch 普遍缺乏熟悉。

我建议阅读 Apple 官方指南，包括 View Controller 指南。

[https://developer.apple.com/library/ios/#featuredarticles/ViewControllerPGforiPhoneOS/Introduction/Introduction.html](https://developer.apple.com/library/ios/#featuredarticles/ViewControllerPGforiPhoneOS/Introduction/Introduction.html)

如果您只想开始编码，ProMotion 将是您最好的朋友。

[https://github.com/clearsightstudio/ProMotion](https://github.com/clearsightstudio/ProMotion)

ProMotion 抽象掉了很多凌乱的 Objective-C，并允许您使用简单的命令打开和关闭屏幕。

```
class AppDelegate < ProMotion::AppDelegateParent
  def on_load
    open ListScreen.new(nav_bar: true)
  end
end

class ListScreen < ProMotion::TableScreen
  def table_data
    [{
      title: "",
      cells: [{
        title: "Cell 1",
        action: :selected_cell,
        arguments: { cell_number: 1 }
      }, {
        title: "Cell 2",
        action: :selected_cell,
        arguments: { cell_number: 2 }
      }]
    }]
  end

  def selected_cell(args={})
    if args[:cell_number] == 1
      open DetailScreen
    elsif args[:cell_number] == 2
      open OtherScreen
    end
  end
end

class DetailScreen < ProMotion::Screen
  title "Detail"

  def will_appear
    # Set up your UILabel and whatnot here
  end
end 
```

# jquery - 我如何知道我的输入 type="file" 是否选择了内容

> ID：16125255
> 
> 赞同：25
> 
> 时间：2013-04-20T21:12:36.497
> 
> 标签：jquery, html, file-io

我有一个简单的输入文件`<input type="file" name="file" id="file">` ，但我试图在发布后验证输入文件是否有内容。

我尝试过，`$("#file").val()`但是控件的域总是相同的。

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2013-04-20T21:32:04.210

你是什​​么意思：**在帖子之后**，你的意思是：

-**在点击提交按钮之后**但在发布或提交之前？

- 或者你的意思是在提交并且内容已经到达服务器之后？

如果是第一种情况，请确保向表单返回 false 以便它不会提交，并且您可以验证，例如：

```
<form onsubmit="return false"> 
```

或在提交时调用验证函数后尝试向表单返回布尔值：

```
<form onsubmit="return validate()"> 
```

然后使用 Jquery 验证您的数据：

```
function validate(){

  valid = true;

     if($("#file").val() == ''){
         // your validation error action
        valid = false;

     }

    return valid //true or false
} 
```

如果发现错误返回 false，如果数据有效返回 true。在了解了它的工作原理之后，最终，所有这些都可以用 Jquery 来完成：

HTML：

```
<form id="fileform" action="nextpage.php"> 
```

JS：

```
$('#fileform').submit(function(){
     valid = true;

     if($("#file").val() == ''){
        // your error validation action
        valid =  false;
    }

    return valid
}); 
```

此外，如果您要查看提交的文件类型，您可以查看这篇文章：[jQuery - INPUT type=File , Image FileType Validation options?](https://stackoverflow.com/questions/4222502/jquery-input-type-file-image-filetype-validation-options)

如果您要做的是在提交后验证数据，**那么**您必须使用 PHP 等服务器脚本语言对验证进行编码。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-20T21:20:58.423

尝试像这样提交表单后获取值

```
$('#yourform').submit(function(){
     var val = $("#file").val();
    if(val == ''){
       return false;
    }
}); 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-04-20T21:15:12.750

> 尝试**在发布后进行验证**

这将是您在*服务器端*而不是通过 jQuery 在客户端上执行的操作。如果您使用您使用的服务器端语言标记您的问题，我们可以为您提供所需的帮助。

# php - XAMPP 通过 $_GET 检索 URL

> ID：16125258
> 
> 赞同：0
> 
> 时间：2013-04-20T21:12:41.570
> 
> 标签：php, xampp

我已经在我的本地机器上设置了 XAMPP。我开始设置我的 MVC 并注意到 $_GET 将我的本地目录结构一直返回到驱动器号。但我想返回 URL 结构。

我试图提供所有可能的相关信息。

**环境**

*   Windows 7 专业版 SP1 64 位
*   [XAMPP 1.8.1](http://www.apachefriends.org/en/xampp.html)

**主机**[C:\Windows\System32\drivers\etc\hosts]

```
127.0.0.1       www.getspark.com 
```

**httpd.conf** [E:\xampp\apache\conf\httpd.conf]

```
DocumentRoot "E:/xampp/htdocs/home"

<VirtualHost *:80>
    DocumentRoot /xampp/htdocs/home
    ServerName getspark
</VirtualHost>
<Directory "E:/xampp/htdocs/home/private">
    Order deny,allow
    Deny from all
</Directory>
<Directory />
    RewriteEngine On
    RewriteCond %{REQUEST_FILENAME} !-f
    RewriteCond %{REQUEST_FILENAME} !-d
    RewriteCond %{REQUEST_FILENAME} !-l
    RewriteRule ^(.+)$ /index.php?url=$1 [L,QSA]
</Directory> 
```

**Web 目录结构**[E:\xampp\htdocs\home]

```
home
    index.php
    private
        controllers
    public
        graphics
            HTML5_Logo_512.png 
```

**主页**[E:\xampp\htdocs\home\index.php | http://www.getspark.com/]

```
<?php
$url = $_GET['url'];
echo $url . '<br />';
?>
<img src="/public/graphics/HTML5_Logo_512.png" /> 
```

如果我使用以下网址：

```
http://www.getspark.com/foobar 
```

我得到这个输出：

```
E:/xampp/htdocs/home/foobar 
```

以及图像。

但我想要这个输出：

```
foobar 
```

所有相对（和绝对）引用都能正常工作（对于图像、php 文件、js 文件等）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-26T11:44:07.653

使用 $_SERVER['REQUEST_URI'] 被认为是更好的做法，它在域之后返回请求中的所有内容（根据 apache/lighty，在重写之前） - 在您的情况下为“/foobar”。

# sed - 在 ksh 中使用 sed 删除空字符串

> ID：16125260
> 
> 赞同：0
> 
> 时间：2013-04-20T21:12:47.413
> 
> 标签：sed

我有一个命令，其输出是：

```
""
"D"
"M"
"N" 
```

我想删除第一个空字符串，所以这样做了：

```
<command> |sed 's/^""$/d' 
```

但是外壳告诉我：

```
sed: 0602-404 Function s/^""$/d cannot be parsed. 
```

那么，`sed`我应该使用什么命令来删除用双引号括起来的空字符串？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T21:17:00.597

试试这个，你错过了一个报价，你不应该使用`s///`form ：

```
<command> | sed '/^""$/d' 
```

根据您的评论，如果您只需要处理第 1 行：

```
<command> | sed '1{/^""$/d}' 
```

`d`修饰符只能以形式使用`/regex/`，不能以`s///`替代形式使用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-06T16:35:39.380

```
sed -n 'H
$ {x;s/""\n/²/1;s/.*²//;p;}' YourFile 
```

使用临时标记`²`（或任何其他未使用/特殊的正则表达式字符）

# excel - 运行时错误“1004”：无法设置 OLEObject 类的启用属性

> ID：16125272
> 
> 赞同：2
> 
> 时间：2013-04-20T21:13:37.927
> 
> 标签：excel, vba

当我设置`combobox2.enable = True`combobox1 发生变化时，我收到了上述错误消息。

```
Private Sub ComboBox1_Change()

   If ComboBox1.Value = "One Session" Then
      ComboBox2.Enabled = True
   End If
End Sub 
```

有人可以告诉我出了什么问题吗？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T21:51:38.903

确保每个组合框的名称是 ComboBox1 和 ComboBox2。如果你重命名它们，它可能会给出这样的错误。

另外，如果您出于某种原因禁用了 combobox2 (Enabled=false)，这就是您所需要的，但是如果您试图让 excel 将焦点设置在 ComboBox2 上，请使用`ComboBox2.SetFocus`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-21T07:01:50.063

我相信组合框在您的工作表中。

出现此错误的主要原因有两个。

1.  ActiveX 控件被禁用。你可能想看[这个](http://office.microsoft.com/en-us/excel-help/enable-or-disable-activex-controls-in-office-documents-HA010031067.aspx)或

2.  您的工作表受到保护。如果您的工作表受到保护，那么您有两种方法来处理它

**方式一**

```
Private Sub ComboBox1_Change()
    ActiveSheet.Unprotect "YOUR PASSWORD"
    If ComboBox1.Value = "One Session" Then
       ComboBox2.Enabled = True
    End If
    ActiveSheet.Protect "YOUR PASSWORD"
End Sub 
```

或者

**方式二**

这`UserInterfaceOnly:=True`允许您仅使用宏对工作表进行更改

```
ActiveSheet.Protect Password:="YOUR PASSWORD", _
DrawingObjects:=True, Contents:=True, _
Scenarios:=True, UserInterfaceOnly:=True 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-07-08T20:29:02.647

我一直遇到这个问题，我的解决方案与前两个答案略有不同。在我的情况下，**对象**和工作表都被锁定。我的解决方案是取消保护工作表，选择导致错误的对象，进入其属性，然后取消选中“锁定”。然后重新保护工作表并保存。

# html - mac和windows上的输入按钮不同

> ID：16125274
> 
> 赞同：1
> 
> 时间：2013-04-20T21:13:52.930
> 
> 标签：html, css, windows, macos, button

这是我在代码中的按钮：

```
<!-- CSS Code -->
input {
    height: 100px;
    width: 150px;
    font-size: 55px;
    text-align: center;
}

button {
    width: 87px;
    height: 38px;
    font-size: 12px;
}

<!--  HTML Code -->
<input type="submit" class="button" value="Student"> 
```

当我在 macbook 和我的 windows 笔记本电脑上查看这个按钮时，它们看起来都不同。

苹果系统：

![在此处输入图像描述](https://i.stack.imgur.com/ILW75.jpg)

Windows 7的：

![在此处输入图像描述](https://i.stack.imgur.com/q3w9B.jpg)

如您所见，Windows 7 版本中的按钮更大，字体更大。我最初是在我的 Macbook 上开发的。我需要更改代码中的某些内容吗？为什么要这样做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T21:25:06.387

它看起来像在 Mac OS 上`font-size`被忽略，可能是设计或某些浏览器/操作系统设置覆盖。

如果您删除 font-size 按钮现在在两个浏览器中看起来是否相同？如果您需要指定字体大小，您可能会[在此处找到一些有用的建议](https://stackoverflow.com/questions/7025993/font-size-being-ignored-in-browsers)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-20T23:28:49.020

试试这个 css 代码
.button {
width: 87px;
高度：38px；
字体大小：12px； 你的按钮 css 代码是一个标签，而不是一个类，所以你
是行不通的，因为不存在这个 css 类

`class="Button"`

# java - Scribe on Android OAuthConnectionException

> ID：16125284
> 
> 赞同：1
> 
> 时间：2013-04-20T21:14:59.170
> 
> 标签：java, android, oauth, scribe

我正在尝试为我的 Android 应用程序构建 oauth 身份验证。我使用 ZF2 和 PECL OAuthProvider 构建了服务器端，但现在我正在尝试构建客户端。

我尝试了在 Request Token 请求中失败的路标，所以我切换到 Scribe，但这并没有更好：

当我尝试获取请求令牌时，出现异常。这是我的跟踪（在调试模式下）

```
04-20 23:03:40.768: I/System.out(10677): obtaining request token from http://192.168.1.198:88/oauth/requesttoken
04-20 23:03:40.778: I/REQUEST(10677): http://192.168.1.198:88/oauth/requesttoken
04-20 23:03:40.778: I/System.out(10677): setting oauth_callback to oob
04-20 23:03:40.778: I/System.out(10677): generating signature...
04-20 23:03:40.838: I/System.out(10677): using base64 encoder: CommonsCodec
04-20 23:03:40.958: I/System.out(10677): base string is: POST&http%3A%2F%2F192.168.1.198%3A88%2Foauth%2Frequesttoken&oauth_callback%3Doob%26oauth_consumer_key%3D0afc84167f8f5c0134d88599c7dbdabf6e05de12%26oauth_nonce%3D345688132%26oauth_signature_method%3DHMAC-SHA1%26oauth_timestamp%3D1366491820%26oauth_version%3D1.0
04-20 23:03:40.958: I/System.out(10677): signature is: O2gik5ufQISAluRS5sDyZcUy2SQ=
04-20 23:03:40.968: I/System.out(10677): appended additional OAuth parameters: { oauth_callback -> oob , oauth_signature -> O2gik5ufQISAluRS5sDyZcUy2SQ=
04-20 23:03:40.968: I/System.out(10677):  , oauth_version -> 1.0 , oauth_nonce -> 345688132 , oauth_signature_method -> HMAC-SHA1 , oauth_consumer_key -> 0afc84167f8f5c0134d88599c7dbdabf6e05de12 , oauth_timestamp -> 1366491820 }
04-20 23:03:40.968: I/System.out(10677): using Http Header signature
04-20 23:03:40.978: I/System.out(10677): sending request...
04-20 23:03:41.018: W/System.err(10677): org.scribe.exceptions.OAuthConnectionException: There was a problem while creating a connection to the remote service.
04-20 23:03:41.028: W/System.err(10677):    at org.scribe.model.Request.send(Request.java:69)
04-20 23:03:41.028: W/System.err(10677):    at org.scribe.oauth.OAuth10aServiceImpl.getRequestToken(OAuth10aServiceImpl.java:59) 
```

这是代码（尽可能简单）：

```
 OAuthService service = new ServiceBuilder()
    .provider(OAuthApi.class)
    .apiKey(Const.CONSUMER_KEY)
    .apiSecret(Const.CONSUMER_SECRET)
    .debug()
    .build();

Token requestToken = service.getRequestToken();
Log.i("Token", requestToken.getToken()); 
```

我的 OAuthApi 基于示例，也很简单：

```
public class OAuthApi extends DefaultApi10a {

    @Override
    public String getRequestTokenEndpoint() 
    {
        Log.i("REQUEST ", Const.SERV+"oauth/requesttoken");
        return Const.SERV+"oauth/requesttoken";
    }

    @Override
    public String getAccessTokenEndpoint() 
    {
        return Const.SERV+"oauth/accesstoken";
    }

    @Override
    public String getAuthorizationUrl(Token requestToken)
    {
        return String.format(Const.SERV+"oauth/authorize?token=%s", requestToken.getToken());
    }

} 
```

我究竟做错了什么 ？Scribe 在 Android 上是否有限制？

谢谢。

# cqrs - 带有 membus 和 ioc 容器的 SetHandlerInterface() 的多种类型

> ID：16125285
> 
> 赞同：6
> 
> 时间：2013-04-20T21:15:02.297
> 
> 标签：cqrs, membus

在[这里查看演示 CQRS 代码](https://gist.github.com/hyrmn/3200053/raw/39ae14e4226d5e0d032690bf0e37e75286d2a1f7/EndToEndTests.cs)，命令和事件处理程序分别连接如下：

```
public interface CommandHandler<in T>
{
    void Handle(T command);
}

public interface EventHandler<in T>
{
    void Handle(T @event);
}

bus = BusSetup.StartWith<Conservative>()
       .Apply<FlexibleSubscribeAdapter>(a =>
       {
           a.ByInterface(typeof(IHandleEvent<>));
           a.ByInterface(typeof(IHandleCommand<>));
       })
       .Construct(); 
```

我正在使用一个与 membus 挂钩的 IoC 容器，它通过`IEnumerable<object> GetAllInstances(Type desiredType)`使用我的容器实现接口来实现梦想，但是与使用这种注册方法的演示不同，我无法将接口拆分为单独的命令和事件：

```
this.Bus = BusSetup.StartWith<Conservative>()
    .Apply <IoCSupport>(c =>
        {
            c
            .SetAdapter(SimpleInjectorWiring.Instance)
            .SetHandlerInterface(typeof(CommandHandler<>))
            /*.SetHandlerInterface(typeof(EventHandler<>))*/;
            // only CommandHandler or EventHandler can be used - not both
        })
    .Construct(); 
```

任何人都可以让我知道是否有任何方法可以解决这个问题，以便我们可以注册任意数量的类型？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-21T10:28:00.907

恐怕当前版本的 MemBus 无法做到这一点 - 请注意，没有特别的原因。我知道能够区分事件和命令是有意义的，即使底层基础设施是相同的。

目前唯一的解决方法是使用单个接口将 IOC 连接到 MemBus。

如果要将这样的功能引入 MemBus，则必须考虑到 IOC 容器的查找机制应该是什么样子。它可能必须请求所有接口的所有处理程序，或者必须引入某种分类/区分事件和命令“消息”的方法。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-04-07T18:14:19.403

我只是将其设置为概念验证，因为我根据[Microsoft CQRS Journey 指南](http://msdn.microsoft.com/en-us/library/jj554200.aspx)使用以下约定：

*   [每个命令只能有一个 CommandHandler](http://msdn.microsoft.com/en-us/library/jj591577.aspx#commands)
*   每个 Event 可以有多个 EventHandler

我想使用 IOC 容器的 (SimpleInjector) API 来强制执行约定，因为它强制您[通过设计明确地进行单处理程序与多处理程序注册](http://simpleinjector.codeplex.com/workitem/19634)。现在，只要意外注册了同一命令的两个处理程序，我的 IOC 容器就会抛出异常。

为了让 MemBus 支持这种约定，我需要创建自己的 ISetup、ISubscriptionResolver 和 IoCAdapter（分别从 IoCSupport、IoCBasedResolver 和 IocAdapter 的代码开始）。我还必须创建一个新的 IocAdapter 接口，它也支持单一的 GetInstance() 方法；现在该接口大致匹配 System.Web.Http.Dependencies.IDependencyScope 接口（GetService 和 GetServices）。

```
// Setup
return BusSetup
    .StartWith<Conservative>()
    .Apply<CommandingEventingSupport>(
        adapter =>
            {
                adapter.SetAdapter(new MemBusSimpleInjectorAdapter(container));
                adapter.SetCommandHandlerInterface(typeof(IHandleCommand<>));
                adapter.SetEventHandlerInterface(typeof(IHandleEvent<>));
                adapter.SetCommandTest(obj => obj is IDomainCommand);
            })
    .Construct(); 
```

然后解析器将命令分派给 GetInstance 并将事件分派给 GetAllInstances...

```
 // Command vs Event
    public IEnumerable<ISubscription> GetSubscriptionsFor(object message)
    {
        bool isCommand = _isCommandFunc(message);
        Type typeToCreate = isCommand
            ? _commandHandlerType 
            : _eventHandlerType;
        var handlesType = ConstructHandlesType(typeToCreate, message.GetType());
        var mi = handlesType.GetRuntimeMethods().First();
        return isCommand
                   ? new[] { mi.ConstructSubscription(_adapter.GetInstance(handlesType)) }
                   : _adapter.GetAllInstances(handlesType).Select(mi.ConstructSubscription);
    } 
```

# ios - UIButton 占位符文本

> ID：16125295
> 
> 赞同：0
> 
> 时间：2013-04-20T21:16:16.507
> 
> 标签：ios, objective-c, uibutton

`FirstViewController`有一个`UIButton`需要将其标题设置为字符串“Pick your Favourite Food” 。

一旦用户单击该`UIButton`，他们就会`SecondViewController`选择具有`TableView`不同食品项目的列表。

当他们选择`TableView cell`Food 时，他们会跳回到`FirstViewController`，`UIButton`标题应该说明他们选择了什么 Food。

现在，`UIButton`只是说`"(null)"`，直到用户选择一种食物。所以我需要它在他们打开应用程序时说“选择你最喜欢的食物”，直到他们选择了一种食物，此时 UIButton 标题将显示他们选择了哪种食物。

有什么想法吗？如果需要，我可以添加任何代码片段，谢谢！

编辑：这是我已经拥有的用于设置 UIButton 标题的代码-

```
[buttonOne setTitle:[NSString stringWithFormat:@"%@", FoodOne] forState:UIControlStateNormal]; 
```

已解决：我使用了@lnafziger 在下面给我的回复，效果很好。感谢所有试图回答我遇到的问题的人！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T02:47:57.603

您可以`-viewWillAppear:`在视图控制器子类中覆盖，并在那里设置按钮的文本。这样，每次显示视图时，您都可以检查并重新配置按钮。（我不太清楚这些数据来自哪里，如果它类似于 CoreData，那么您还可以做一些更高级的东西，例如 Key-Value Observing，或者在最坏的情况下使用 NSNotifications 实现您自己的更改传播系统）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-22T02:53:20.080

将您现在拥有的代码更改为：

```
// If FoodOne is a NSString, then you can skip this part and just use FoodOne
NSString *foodOneDescription = [NSString stringWithFormat:@"%@", FoodOne]
if ([foodOneDescription length] == 0)
    [buttonOne setTitle:@"Pick your Favorite Food" forState:UIControlStateNormal];
else
    [buttonOne setTitle:foodOneDescription forState:UIControlStateNormal]; 
```

除非选择了食物，否则这会将其设置为您的“占位符”文本，在这种情况下，它将使用食物的描述（如您的示例中所示）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-20T21:46:09.333

您不需要任何“占位符”，您可以根据需要多次设置/更改标题。最初只需将其设置为“选择您最喜欢的食物”，然后在选择项目后再次设置。

# excel - Excel：当 VLOOKUP 不匹配时，如何将单元格留空（而不是 0）？

> ID：16125307
> 
> 赞同：18
> 
> 时间：2013-04-20T21:18:05.163
> 
> 标签：excel

我有一个带有 2 个工作表的 Excel 工作簿：国家和公司。公司工作表在国家工作表中通过`VLOOKUP`s 部分填写，如下所示：

国家：

```
 A       B
1 COUNTRY HOF_LTO
2 Belgium    4
3 Japan      5
4 Spain
5 Sweden     0 
```

公司：

```
 A         B       C
1 COMPANY  COUNTRY HOF_LTO
2 Belgacom Belgium    4
3 Onkyo    Japan      5
4 Sony     Japan      5
5 ATTM     Spain      0
6 Nokia    Sweden     0 
```

我正在`C`使用以下公式填充该列：

```
=VLOOKUP($B2;countries!$A$1:$C$5;MATCH(companies!B$1;countries!$1:$1;0);FALSE) 
```

出了问题的是：即使在国家/`Spain`地区没有`HOF_LTO`- 值，公式也会`0`将适当的值放在 cell 中`companies!C5`。相反，它应该将单元格留空，并且只在国家选项卡中显示时输入零 ( `0`) `0`，就像在瑞典的情况一样。

我如何需要编辑公式，以便在没有匹配的国家/地区值时将单元格留空？

* * *

## 回答 #1

> 赞同：45
> 
> 时间：2016-07-30T22:21:08.713

这应该解决它：

```
=VLOOKUP(...) & "" 
```

> 这将强制 Excel 使该单元格引用文本值，从而防止将空白转换为零。

*取自[https://superuser.com/a/906954/222835](https://superuser.com/a/906954/222835 "在 Excel 2010 中引用空白单元格时显示空白")*

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2014-04-30T00:09:25.123

```
=CONCATENATE(VLOOKUP($B2;countries!$A$1:$C$5;MATCH(companies!B$1;countries!$1:$1;0);FALSE)) 
```

连接确保数据被视为字符串而不是数字。如果该值只是一个空单元格，您只会得到一个空单元格。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-04-20T21:37:01.717

如果在您的国家/地区表中，所有国家/地区仅出现一次，您可以改用以下内容：

```
=IF(ISNUMBER(OFFSET(countries!$B$1;MATCH(B2;countries!A:A;0)-1;0));
    OFFSET(countries!$B$1;MATCH(B2;countries!A:A;0)-1;0);
    "") 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-06-21T01:03:28.197

这是`VLOOKUP`+ 连接答案的变体，可确保数值不会转换为字符串：

```
=IF(LEN(VLOOKUP(args) & "")=0,"",VLOOKUP(args)) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-20T22:13:06.070

或者，如果它只是您需要控制的数据的表示，请调整单元格格式以将 0 值显示为空白而不是数字零**。**

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-01-09T23:46:39.587

简单的解决方案：在您的国家/地区源工作簿的完整数组上进行查找和替换，用 @ 替换空单元格。（确保在执行全部替换时选中“仅查找整个单元格”。）然后返回并运行您的 vlookups。复制和粘贴值以摆脱 vlookups 并只保留结果。现在搜索并替换目标文件中的 @ 符号。瞧。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2018-07-11T02:26:30.450

我为文本找到的*最简洁*`CLEAN`的方法（双关语）是使用该功能。:)

**注意**：这应该只用于您返回实际文本的列。如果要返回数字、日期等，则可以省略此包装器。

[`VLOOKUP`](https://support.office.com/en-gb/article/vlookup-function-0bbc8083-26fe-4963-8ab8-93a18ad188a1)简单地用[`CLEAN`](https://support.office.com/en-us/article/clean-function-26f3d7c5-475f-4a9c-90e5-4b8ba987ba41)这样的函数包装你：

`=CLEAN(VLOOKUP($B2,countries!$A$1:$C$5,MATCH(companies!B$1,countries!$1:$1,0),FALSE))`

更好的是，把它全部包起来，[`IFERROR`](https://support.office.com/en-us/article/iferror-function-c526fd07-caeb-47b8-8bb6-63f3e417f611)以确保你不会得到`#N/A`或可怕`#REF!`的等。像这样：

`=IFERROR(CLEAN(VLOOKUP($B2,countries!$A$1:$C$5,MATCH(companies!B$1,countries!$1:$1,0),FALSE)),"")`

**奖金**：固定！你所有的公式在函数参数之间都错误地使用了分号而不是逗号，我很惊讶没有人注意到这一点。>.<

**通用**：

`=IFERROR(CLEAN(VLOOKUP(lookup_value, table_array, col_index_num,FALSE)),"")`- 对于文本 `=IFERROR(VLOOKUP(lookup_value, table_array, col_index_num,FALSE),"")`- 对于值 `=IFERROR(VALUE(VLOOKUP(lookup_value, table_array, col_index_num,FALSE)),"")`- 对于强制值

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2019-04-18T09:44:21.007

另一个解决方案是使用 (*) 一个 UDF（用户定义函数）**`vlookup2`**，它大大简化了典型`vlookup`用法（并尊重良好的性能和更易读的公式）。

所以用法将在给定的示例中：

```
=VLOOKUP2(
   $B2  ;  countries!$A$1:$C$5  ;  MATCH( companies!B$1 ; countries!$1:$1 ; 0 )  ;  "" ) 
```

而不是例如（基于漂亮的[枕套示例](https://stackoverflow.com/a/38679010/1915920)）：

```
=VLOOKUP( 
   $B2  ;  countries!$A$1:$C$5  ;  MATCH( companies!B$1 ; countries!$1:$1 ; 0 ) ; FALSE) 
   & "" 
```

在其他情况下（例如，搜索条件`$B2`可能已经是`#NV`或类似的，以下可能是有意义的：

```
=VLOOKUP2(
   $B2  ;  countries!$A$1:$C$5  ;  MATCH( companies!B$1 ; countries!$1:$1 ; 0 ) ; "" ; "") 
```

的代码`vlookup2`将是：

```
'simpler to use than vlookup
'only exact matches and 0 subst value support
'https://stackoverflow.com/a/55743343/1915920
'
Function vlookup2( _
  ByRef searchCriteria As Variant, _
  ByRef matrix As Variant, _
  ByRef columnIndex As Variant, _
  Optional zeroSubst As Variant, _
  Optional errSubst As Variant )

    Dim val As Variant:  val = Application.WorksheetFunction.VLookup( _
                                 searchCriteria,  matrix,  columnIndex,  False )

    If Not IsMissing(errSubst) Then On Error GoTo EH  'EH = error handler
    If Not IsMissing(zeroSubst) And val = 0 Then val = zeroSubst

    vlookup2 = val
    Exit Function

EH:
    vlookup2 = errSubst        
End Function 
```

* * *

(*)：如果您对此一无所知，就这么简单：

1.  按*CTRL + F11* =>`Microsoft Visual Basic for Applications`窗口打开
2.  插入一个新模块并将上面的代码粘贴到正确的编辑器中 [![在此处输入图像描述](https://i.stack.imgur.com/KGndJ.png)](https://i.stack.imgur.com/KGndJ.png)
3.  关闭刚刚打开的窗口

* * *

对于德语版本，可以添加另一个：

```
'https://stackoverflow.com/a/55743343/1915920
Function SVerweis2( _
    ByRef Suchkriterium As Variant, _
    ByRef Matrix As Variant, _
    ByRef SpaltenIndex As Variant, _
    Optional NullZahlSubst As Variant, _
    Optional FehlerSubst As Variant)

    SVerweis2 = vlookup2( Suchkriterium, Matrix, SpaltenIndex , NullZahlSubst, FehlerSubst )
End Function` 
```

# asp.net-mvc-3 - 需要使用 Linq 订购

> ID：16125308
> 
> 赞同：1
> 
> 时间：2013-04-20T21:18:10.590
> 
> 标签：asp.net-mvc-3, linq

我对 Linq 还很陌生，所以请放轻松。我正在创建一个博客站点，而不是使用罐装解决方案，并且我正在使用 MVC 3 构建它。我有一个按年份显示帖子的存档页面。在存储库中，代码是：

```
IEnumerable<IGrouping<int, Post>> groupedPosts = _dataContext.Posts
            .GroupBy(s => s.PostDate.Year)
            .OrderByDescending(p => p.Key).ToList(); 
```

如您所见，我正在列出一个帖子列表并按年份对它们进行分组。在这种情况下，关键当然是年份。在视图中，我遍历集合，一切都正确显示。但是，我注意到当我插入一个新帖子时，因为我是按年份排序的，所以组内的新帖子被放在了底部并且已经过时了。例如，在插入 2013 年 4 月 20 日的帖子后，存档显示以下内容：-

```
2013
Aha, I'm back
Posted: 15 April 2013
Aha, I'm back
Posted: 07 April 2013
Thinking Too Much
Posted: 02 March 2013
Blog 2 Title Category XHTML
Posted: 02 February 2013
Latest Blog Post
Posted: 20 April 2013 
```

看看我的最新帖子应该在每个分组的顶部时如何放在堆的底部。我知道我需要以某种方式订购帖子，但不知道该怎么做。有没有一种简单的方法可以对每个组内的帖子进行排序，所以最新的帖子放在每个组的顶部。感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T21:20:38.907

您应该订购两次 - 每个组内的项目一次，组内的第二次：

```
var groupedPosts = _dataContext.Posts
            .GroupBy(s => s.PostDate.Year)
            .OrderByDescending(p => p.Key)
            .Select(g = new { g.Key, Items =  g.OrderByDescending(x => x.PostDate) })
            .ToList(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-21T04:25:28.983

```
IEnumerable<IGrouping<int, Post>> groupedPosts = _dataContext.Posts
  .AsEnumerable()  //we're pulling the whole table, might as well make it official.
  .OrderByDescending(s => s.PostDate)
  .GroupBy(s => s.PostDate.Year)  //Enumerable.GroupBy retains the order in the groups
  .OrderByDescending(g => g.Key)
  .ToList(); 
```

# ruby-on-rails - 让引导程序的按钮收音机与 Rails UJS（数据远程）配合得很好？

> ID：16125310
> 
> 赞同：1
> 
> 时间：2013-04-20T21:18:24.977
> 
> 标签：ruby-on-rails, twitter-bootstrap, radio-button, ujs

前两个按钮的行为与您预期的一样，但远程/js 驱动的按钮没有表现出其他按钮的切换行为。

我认为这可能是由于 UJS 如何劫持点击事件，但我不太确定。

关于如何按预期工作的任何想法？

现在，我有一行在我的 update.js 文件中为这个控制器执行了一个 .button('toggle') ，但显然客户端存在延迟，这是糟糕的用户体验。

```
<div class="btn-group" data-toggle="buttons-radio">
    <a class="btn btn-primary"><i class="icon-thumbs-up icon-white"></i> Accept0</a>
    <a class="btn btn-primary"><i class="icon-thumbs-up icon-white"></i> Accept1</a>
    <a class="btn btn-primary" href="some_path/update?model[key]=newvalue2" data-remote="true"><i class="icon-thumbs-up icon-white"></i> Accept2</a>
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T21:22:21.607

你对劫持是 100% 正确的。我对 Rails UDJ 不熟悉，但在我看来，该库是在设置 onclick 而不是执行附加事件（addEventListener）。一个覆盖事件，另一个添加到我相信的事件。您可以在代码中验证这一点吗？

# java - 在后台更新 JavaFX 树时出现 ConcurrentModificationException

> ID：16125311
> 
> 赞同：7
> 
> 时间：2013-04-20T21:18:49.513
> 
> 标签：java, javafx-2

我的代码`TreeItem<String>` 是在后台任务中创建的，因为我有很多它们，并且它们的创建需要相当长的时间才能使应用程序冻结。在此示例中，它没有多大意义，但它说明了我在实际应用程序中遇到的问题。扩展节点时，程序会抛出 ConcurrentModificationException。

我使用 jdk1.7.0_17 和 JavaFX 2.2.7

有谁知道如何创建线程安全`Tree`或如何规避问题？

## 例外

```
java.util.ConcurrentModificationException
    at java.util.ArrayList$Itr.checkForComodification(ArrayList.java:819)
    at java.util.ArrayList$Itr.next(ArrayList.java:791)
    at com.sun.javafx.collections.ObservableListWrapper$ObservableListIterator.next(ObservableListWrapper.java:681)
    at javafx.scene.control.TreeItem.updateExpandedDescendentCount(TreeItem.java:788)
    ... 
```

## 代码

```
import javafx.application.Application;
import javafx.collections.ObservableList;
import javafx.concurrent.Task;
import javafx.scene.Scene;
import javafx.scene.control.TreeItem;
import javafx.scene.control.TreeView;
import javafx.scene.layout.HBox;
import javafx.stage.Stage;

import java.security.SecureRandom;
import java.util.Random;

public class ConcurrentExample extends Application {
    public static void main(String[] args) {
        launch(args);
    }

    @Override
    public void start(Stage stage) throws Exception {
        TreeView<String> treeView = new TreeView<String>(createNode("root"));
        HBox hBox = new HBox();
        hBox.getChildren().addAll(treeView);
        Scene scene = new Scene(hBox);
        stage.setScene(scene);
        stage.show();
    }

    Random r = new SecureRandom();

    public TreeItem<String> createNode(final String b) {
        return new TreeItem<String>(b) {
            private boolean isLeaf;
            private boolean isFirstTimeChildren = true;
            private boolean isFirstTimeLeaf = true;

            @Override
            public ObservableList<TreeItem<String>> getChildren() {
                if (isFirstTimeChildren) {
                    isFirstTimeChildren = false;
                    buildChildren(super.getChildren());
                }
                return super.getChildren();
            }

            @Override
            public boolean isLeaf() {
                if (isFirstTimeLeaf) {
                    isFirstTimeLeaf = false;
                    isLeaf = r.nextBoolean() && r.nextBoolean() && r.nextBoolean();
                }
                return isLeaf;
            }

            private void buildChildren(final ObservableList<TreeItem<String>> children) {
                if (!this.isLeaf()) {
                    Task<Integer> task = new Task<Integer>() {
                        @Override
                        protected Integer call() throws Exception {
                            int i;
                            int max = r.nextInt(500);
                            for (i = 0; i <= max; i++) {
                                children.addAll(new TreeItem[]{createNode("#" + r.nextInt())});
                            }
                            return i;
                        }
                    };
                    new Thread(task).start();
                }
            }
        };
    }

} 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-06-30T21:51:20.673

当前的答案没有帮助。关键是你必须在 Platform.runLater 的帮助下在主线程中执行子线程的更新

```
import javafx.application.Application;
import javafx.application.Platform;
import javafx.collections.ObservableList;
import javafx.scene.Scene;
import javafx.scene.control.TreeItem;
import javafx.scene.control.TreeView;
import javafx.scene.layout.HBox;
import javafx.stage.Stage;

import java.security.SecureRandom;
import java.util.Random;

public class Example extends Application {
    public static void main(String[] args) {
        launch(args);
    }

    @Override
    public void start(Stage stage) throws Exception {
        TreeView<String> treeView = new TreeView<String>(createNode("root"));
        HBox hBox = new HBox();
        hBox.getChildren().addAll(treeView);
        Scene scene = new Scene(hBox);
        stage.setScene(scene);
        stage.show();
    }

    Random r = new SecureRandom();

    public TreeItem<String> createNode(final String b) {
        return new TreeItem<String>(b) {
            private boolean isLeaf;
            private boolean isFirstTimeChildren = true;
            private boolean isFirstTimeLeaf = true;

            @Override
            public ObservableList<TreeItem<String>> getChildren() {
                if (isFirstTimeChildren) {
                    isFirstTimeChildren = false;
                    buildChildren(super.getChildren());
                }
                return super.getChildren();
            }

            @Override
            public boolean isLeaf() {
                if (isFirstTimeLeaf) {
                    isFirstTimeLeaf = false;
                    isLeaf = r.nextBoolean() && r.nextBoolean() && r.nextBoolean();
                }
                return isLeaf;
            }

            private void buildChildren(final ObservableList<TreeItem<String>> children) {
                if (!this.isLeaf()) {
                    Platform.runLater(new Runnable() {
                        @Override
                        public void run() {
                            int i;
                            int max = r.nextInt(500);
                            for (i = 0; i <= max; i++) {
                                children.addAll(new TreeItem[]{createNode("#" + r.nextInt())});
                            }
                        }
                    });
                }
            }
        };
    }
} 
```

这个人在这里遇到了同样的问题：[http ://blog.idrsolutions.com/2012/12/handling-threads-concurrency-in-javafx/](http://blog.idrsolutions.com/2012/12/handling-threads-concurrency-in-javafx/)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-22T02:40:05.280

您不能从除 JavaFX 应用程序线程之外的任何线程直接修改任何影响活动节点和与场景图相关的数据（包括 TreeView 的项目）的任何内容。

有关示例任务（返回 ObservableList 或部分结果的任务），请参阅[任务](http://docs.oracle.com/javafx/2/api/javafx/concurrent/Task.html)文档，这将帮助您解决问题。您需要在新的 ObservableList 中的 Task 中创建新的 TreeItems，然后，一旦 Task 完成（在 JavaFX 应用程序线程上），将树的项目列表设置为从 Task 返回的 ObservableList。

[http://docs.oracle.com/javafx/2/api/javafx/concurrent/Task.html](http://docs.oracle.com/javafx/2/api/javafx/concurrent/Task.html)

这是您的代码的更新版本，它遵循其中一些原则，并且没有任何 ConcurrentModificationExceptions。

为什么不应该在 TreeItem 调用 updateExpandedDescendentCount() 的那一刻准确地执行 addAll(List) 调用？

```
import javafx.application.Application;
import javafx.collections.FXCollections;
import javafx.collections.ObservableList;
import javafx.concurrent.Task;
import javafx.concurrent.WorkerStateEvent;
import javafx.event.EventHandler;
import javafx.scene.Scene;
import javafx.scene.control.TreeItem;
import javafx.scene.control.TreeView;
import javafx.scene.layout.HBox;
import javafx.stage.Stage;

import java.security.SecureRandom;
import java.util.Random;

public class ConcurrentExample extends Application {
  public static void main(String[] args) {
    launch(args);
  }

  @Override
  public void start(Stage stage) throws Exception {
    TreeView<String> treeView = new TreeView<>(createNode("root"));
    HBox hBox = new HBox();
    hBox.getChildren().addAll(treeView);
    Scene scene = new Scene(hBox);
    stage.setScene(scene);
    stage.show();
  }

  Random r = new SecureRandom();

  public TreeItem<String> createNode(final String b) {
    return new TreeItem<String>(b) {
      private boolean isLeaf;
      private boolean isFirstTimeChildren = true;
      private boolean isFirstTimeLeaf = true;

      @Override
      public ObservableList<TreeItem<String>> getChildren() {
        if (isFirstTimeChildren) {
          isFirstTimeChildren = false;
          buildChildren(super.getChildren());
        }
        return super.getChildren();
      }

      @Override
      public boolean isLeaf() {
        if (isFirstTimeLeaf) {
          isFirstTimeLeaf = false;
          isLeaf = r.nextBoolean() && r.nextBoolean() && r.nextBoolean();
        }
        return isLeaf;
      }

      private void buildChildren(final ObservableList<TreeItem<String>> children) {
        final ObservableList<TreeItem<String>> taskChildren = FXCollections.observableArrayList();

        if (!this.isLeaf()) {
          Task<Integer> task = new Task<Integer>() {
            @Override
            protected Integer call() throws Exception {
              int i;
              int max = r.nextInt(500);
              for (i = 0; i <= max; i++) {
                taskChildren.addAll(new TreeItem[]{createNode("#" + r.nextInt())});
              }
              return i;
            }
          };

          task.setOnSucceeded(new EventHandler<WorkerStateEvent>() {
            @Override public void handle(WorkerStateEvent workerStateEvent) {
              children.setAll(taskChildren);
            }
          });
          new Thread(task).start();
        }
      }
    };
  }

} 
```

* * *

*更新 - 说明解决方案为何有效*

上面的解决方案无法收到 a`ConcurrentModificationException`因为所`ObservableLists`涉及的内容永远不会同时修改。

*   `taskChildren`集合仅在任务的用户线程上修改，并且
*   主动附加到场景图的树项的子项仅在任务的 JavaFX 应用程序线程上进行修改。

这是通过以下项目确保的：

1.  `taskChildren.addAll`在任务的`call`方法中调用。
2.  在用户线程上调用任务的调用方法。
3.  `children.setAll(taskChildren)`在 JavaFX 应用程序线程上调用。
4.  JavaFX 系统确保`onSucceeded`在 JavaFX 应用程序线程上调用任务的事件处理程序。
5.  任务完成后，将不再向给定`taskChildren`列表添加子代，并且该列表永远不会被修改。
6.  对于执行的每项任务`taskChildren`，都会创建一个新列表，因此`taskChildren`永远不会在任务之间共享给定列表。
7.  每次对树进行修改时，都会创建一个新任务。
8.  任务语义使得给定任务只能运行一次并且永远不会重新启动。
9.  附加到活动场景图的 TreeItem 的子项仅在任务成功完成并停止处理后在 JavaFX 应用程序线程上进行修改。

> 为什么不应该在`addAll(List)`呼叫的那一刻准确地执行`TreeItem`呼叫`updateExpandedDescendentCount()`？

`updateExpandedDescendentCount()`不是公共`TreeItem`api 的一部分 - 它是一种内部实现方法，`TreeView`与解决此问题无关。

* * *

*更新部分更新*

[JavaFX 任务文档](http://docs.oracle.com/javafx/2/api/javafx/concurrent/Task.html)有一个“返回部分结果的任务”的解决方案。使用类似的东西，您应该能够解决“应用程序在开始时无法使用，因为必须等待'buildChildren'线程完成才能看到任何节点。”的问题。这是因为部分结果解决方案将允许结果以小批量的方式从构建器任务线程“流式传输”回 FX 应用程序线程。

这种解决方案在实现上比我上面提供的解决方案更复杂，但应该允许您拥有一个符合您要求的响应式 UI。与往常一样，在处理并发情况时，需要格外小心，以确保共享数据不会同时发生突变，从而导致您在原始帖子中遇到的潜在竞争条件。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-04-20T21:26:45.767

这很简单：当客户端代码开始迭代集合时，您将继续更新集合。

删除线程或确保它在迭代器创建之前完成，或进行某种同步。

# laravel - 使用 Laravel 自联接

> ID：16125312
> 
> 赞同：0
> 
> 时间：2013-04-20T21:18:53.093
> 
> 标签：laravel, self-join, eloquent

如何使用 Laravel 3 或 4 进行自我加入？

```
class Category extends Eloquent {

     public function category ()
     {
          return $this->has_one('Category');
     }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T02:39:28.877

如果你的表`category_id`中有一个列`Category`，这应该可以正常工作，递归。

# javascript - 另一个主干帖子部分数据

> ID：16125322
> 
> 赞同：-1
> 
> 时间：2013-04-20T21:19:50.607
> 
> 标签：javascript, backbone.js

我想使用Backbone.save模型，模型的嵌套数据需要过滤，所以我使用

```
model.save(null,{
    success: ...,
    error:...,
    data: {
        id:null,
        name:'myname',
        nestmodel: {
            id:'xx'/*Other data i don't need it,so just id column*/
        }
    }
} 
```

而且我不想使用`patch`HTTP METHOD。因为我只是添加一个新模型，而不是更改零件数据。

而且我不想发布一些`nestmodel`数据，因为它太大了，我只希望 id 没问题。

`nestmodel`只需要身份证。

我已阅读同步 (Backbone.js) 和 Backbone.js/express.js 参数时排除模型属性`model.save()`

有一种方法可以解决这个问题。

这就是我的全部代码：

```
 sync: function(method, model, options) {
  var data, orderSuiteItems;
  if (method === 'create') {
    options.url = this.url;
  } else {
    // MUST setting the url .options's url is undefined
    options.url = this.url + this.idUrl(this.get('id'));
  }
  // IF `create` or `update` , pick the we need properties
  if (method === 'create' || method === 'update') {
    orderSuiteItems = [];
    if (this.has('orderSuiteItems')) {
      // Because the `dishes` and `dishesUnitPrice` have a lot of prop,
      // Each of `dishes` or `dishesUnitPrice` may each have 10K data
      orderSuiteItems = _.map(this.get('orderSuiteItems'), function(osi) {
        return {
          id: osi.id,
          qty: osi.qty,
          servingQty: osi.qty,
          confirmQty: osi.confirmQty,
          deleted: osi.deleted,
          orderItem: _.pick(osi.orderItem, 'id'),
          dishes: _.pick(osi.dishes, 'id'), // HAVE a large prop 
          dishesUnitPrice: _.pick(osi.dishesUnitPrice, 'id'), // HAVE a large prop 
          orderItemStatus: osi.orderItemStatus,
          piece: osi.piece
        };
      });
    }
    data = {
      id: this.get('id'),
      order: this.get('order'),
      price: this.get('price'),
      dishes: _.pick(this.get('dishes'), 'id', 'isSuite'),
      dishesUnitPrice: _.pick(this.get('dishesUnitPrice'), 'id'),
      qty: this.get('qty'),
      servingQty: this.get('servingQty'),
      confirmQty: this.get('confirmQty'),
      sum: this.get('sum'),
      orderSuiteItems: orderSuiteItems,
      orderItemStatus: this.get('orderItemStatus')
    };
    // Setting attrs with pick data.
    options.attrs = data;
    return Backbone.sync(method, model, options);
  } else {
    return Backbone.sync(method, model, options);
  }
} 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-04-20T21:56:25.203

我希望您只是`data`为了示例的清晰起见而选择该选项。

无论如何，在使用`unset`之前使用删除你的属性怎么样`Model#save`？稍后重新设置它。
另一种解决方案是覆盖该`Model#save`方法。
您还可以通过将其定义为属性而不是在原型中来*隐藏*相同的方法（这将使您有机会切换回来）。

解决方案＃1或类似的东西将是最简单的。比方说，解决方案 #2 可能更具风险，但样板文件可能更少。我只会在一些非常具体的情况下使用＃3（现在甚至不能考虑一个），其中包括：对象是一个单例（因为我们没有使用原型）（或仅在有限的数量） ，需要大量切换2种模式，最好只有1种方法。

**编辑：**
解决方案＃1：

```
var nestedModel = myModel.get('nestmodel');
myModel.save('nestmodel', nestedModel.id, {silent: true});
myModel.set('nestmodel', nestedModel, {silent: true}); 
```

我添加了`silent`标志，因为我不知道您是否正在收听`nestmodel`属性的更改。如果这个不适合您，我将为其他解决方案添加代码。

# php - 用户返回时查询缓存

> ID：16125323
> 
> 赞同：1
> 
> 时间：2013-04-20T21:20:13.533
> 
> 标签：php, mysql, caching, cookies

我有一个查询 MySql 数据库的页面，然后将结果显示为 HTML。假设数据库发生变化，当用户返回页面时，数据库的新变化是否会反映出来？我担心用户第一次访问该页面时获得的数据在他们返回时没有改变。有没有办法在用户访问页面时防止数据被缓存。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T22:20:37.973

如果您的页面没有指定缓存行为，那么浏览器将最好地猜测它是否应该缓存该页面。在某些情况下，当用户点击“返回”时，浏览器会显示相同的页面，而在其他情况下可能不会。

您应该明确告诉浏览器不要缓存页面并重新验证它。您可以使用下面的代码来实现这一点：

```
header("Cache-Control: no-cache, must-revalidate");
header("Expires: Sat, 26 Jul 1997 05:00:00 GMT"); 
```

# python - Python只写文件的第一行？

> ID：16125331
> 
> 赞同：0
> 
> 时间：2013-04-20T21:21:06.430
> 
> 标签：python, python-3.x

我之前发布了一个关于在文件中组织信息的程序的问题： [有没有办法在 python 中按列表元素组织文件内容？](https://stackoverflow.com/questions/16072167/is-there-a-way-to-organize-file-content-by-list-element-in-python/16072228?noredirect=1#16072228)

我现在正在尝试使用以下代码将信息写入新文件

```
def main():
    #open the file
    info = open('Studentinfo.txt', 'r')
    #make file content into a list
    allItems = []
    #loop to strip and split
    for i in info:
        data = i.rstrip('\n').split(',')
        allItems.append(data)

    allItems.sort(key=lambda x: x[3]) # sort by activity

    for data in allItems:
        first = data[1]
        last = data[0]
        house = data[2]
        activity = data[3]
        a = str(first)
        b = str(last)
        c = str(house)
        d = str(activity)
    f = open('activites.txt', 'w')
    f.write(a)
    f.write(b)
    f.write(c)
    f.write(d)
    f.close()

main() 
```

但是，当我打开新的文本文件而不是

```
Amewolo, bob J.,E2,none
Andrade, Danny R.,E2,SOCCER
Banks-Audu, Rob A.,E2,FOOTBALL
Anderson, billy D.,E1,basketball
souza, Ian L.,E1,ECO CLUB
Garcia, Yellow,E1,NONE
Brads, Kev J.,N1,BAND
Glasper, Larry L.,N1,CHOIR
Dimijian, Annie A.,S2,SPEECH AND DEBATE 
```

只有

```
 Amewolo, bob J.,E2,none 
```

为什么python只写第一行

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-20T21:24:42.013

您只是在 for 循环之后写入文件，而不是一次将每组数据写入一个。换句话说，您正在遍历所有数据，然后打开文件，写入最后 4 项，然后关闭它。

您需要打开文件，将所有内容写入其中，然后关闭。尝试这个

```
f = open('activites.txt', 'w') # open the file first
for data in allItems: # iterate over all of the data
    first = data[1]
    last = data[0]
    house = data[2]
    activity = data[3]
    a = str(first)
    b = str(last)
    c = str(house)
    d = str(activity)
    f.write(a) # write each element out
    f.write(b)
    f.write(c)
    f.write(d)
f.close() # then close 
```

但是，`str()`调用是不必要的。 `first`, `last`, `house`, 并且`activity`已经是字符串。

结合`with`声明，整个事情可能会崩溃到

```
with open('activites.txt', 'w') as f:
    for data in allItems:
        data = [data[0], data[1]] + data[2:]
        print(*data, file=f, sep=', ') 
```

# javascript - 将我的内容字符串链接到 js 文件中的数据

> ID：16125333
> 
> 赞同：0
> 
> 时间：2013-04-20T21:21:32.680
> 
> 标签：javascript, infobubble

我刚刚完成了一张地图，并希望内容字符串从我的 js 文件中获取数据以添加到标记的信息框中。我让它在一个简单的`infoBubble.setContent('<b>'+data.description+'</b>'+'<br>'+data.name);`查询下工作。但现在我创建了选项卡并要求每个选项卡从 map.js 文件中读取不同的数据。

到目前为止我的代码：

```
window.onload = function () {

    // Creating a new map
    var map = new google.maps.Map(document.getElementById("map"), {
            center : new google.maps.LatLng(51.50746, -0.127594),
            zoom : 10,
            mapTypeId : google.maps.MapTypeId.ROADMAP
            });

    var contentString = '<div id="content">'+
    '<h1>'+'</h1>'+
    '<p><b>Test</b>'
    '</div>';

    var contentString2 = '<div id="content">'+
    '<h1>Info</h1>'+
    '<p><b>Info</b>'
    '</div>';

    var contentString3 = '<div id="content">'+
    '<h1>More</h1>'+
    '<p><b>More</b>'
    '</div>';                   

            // Creating a global infoBox object that will be reused by all markers
    infoBubble = new InfoBubble({
      minWidth: 300,
      maxWidth: 300,
      minHeight: 150,
      maxHeight: 350,
      arrowSize: 50,
      arrowPosition: 50,
      arrowStyle: 2,
      borderRadius: 10,
      shadowStyle: 1,
    });

    var div = document.createElement('DIV');
    div.innerHTML = 'test 101';

    infoBubble.addTab('Details', contentString);
    infoBubble.addTab('Info', contentString2);
    infoBubble.addTab('More', contentString3);

    // Custom Markers
    var markers = {};
      var categoryIcons = {
        1 : "images/liver_marker1.png",
        2 : "images/liver_marker2.png",
        3 : "images/liver_marker3.png",
        4 : "images/liver_marker4.png",
        5 : "images/liver_marker5.png",
        6 : "images/liver_marker6.png",
        7 : "images/liver_marker.png"
      }

    // Looping through the JSON data
    for (var i = 0, length = json.length; i < length; i++) {
        var data = json[i],
        latLng = new google.maps.LatLng(data.latitude, data.longitude);

        // Creating a marker and putting it on the map
        var marker = new google.maps.Marker({
                position : latLng,
                map : map,
                title : data.title,
                icon : categoryIcons[data.category]
            });

        // Creating a closure to retain the correct data, notice how I pass the current data in the loop into the closure (marker, data)
        (function (marker, data) {

            // Attaching a click event to the current marker
            google.maps.event.addListener(marker, 'click', function(e) {
                //infoBubble.setContent('<b>'+data.description+'</b>'+'<br>'+data.name);
                infoBubble.open(map, marker);
                map.panTo(loc);
});

        })(marker, data);

    }

}

})();
google.maps.event.addDomListener(window, 'load', initialize);
</script> 
```

我的 js 文件示例：

```
var json = [{
        "name" : "Acton Street",
        "latitude" : 51.52834,
        "longitude" : -0.118619,
        "description" : "Leaf",
        "category" : 7
    }, {
        "name" : "Aldermans Hill",
        "latitude" : 51.618522,
        "longitude" : -0.11167,
        "description" : "Pod",
        "category" : 7
    }, {
        "name" : "Aldermans Hill",
        "latitude" : 51.618522,
        "longitude" : -0.11167,
        "description" : "Turner",
        "category" : 7
    },{
        "name" : "Alexandra Road/Holloway Street CP",
        "latitude" : 51.469744,
        "longitude" : -0.363063,
        "description" : "Box",
        "category" : 7
    }] 
```

基本上让 contentString 寻找“描述”让 contentString2 寻找“名称”，而 contentString3 寻找“纬度”和“经度”

很想知道这个。

干杯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T21:30:08.557

你试过`updateTab`吗？

```
//update the first tab content
infoBubble.updateTab(0, 'Details', 'new content'); 
```

看看一些例子[http://google-maps-utility-library-v3.googlecode.com/svn/trunk/infobubble/examples/example.html/](http://google-maps-utility-library-v3.googlecode.com/svn/trunk/infobubble/examples/example.html/)

*另请注意，该`id`属性必须是唯一的。就像现在一样，您所有的内容 div 都具有相同的`id`.*

# node.js - Firebase 中嵌套事务的含义？

> ID：16125334
> 
> 赞同：3
> 
> 时间：2013-04-20T21:22:04.763
> 
> 标签：node.js, firebase

我正在运行一个事务来更新需要存储在两个键中的项目。为此，我设置了一个嵌套事务，如下所示，它似乎按预期运行：

```
firebaseOOO.child('relationships/main').child(accountID).child(friendAccountID).transaction(function(data) {
    data.prop = 'newval';
    firebaseOOO.child('relationships/main').child(friendAccountID).child(accountID).transaction(function(data) {
        return r;
    });
    return r;
}); 
```

对此是否有任何陷阱或可能的意外影响？我最担心在负载下陷入某种事务循环，其中每个事务都会取消另一个事务，从而迫使它们重新启动或类似情况。

有没有更好的方法来做到这一点？

我正在使用 NodeJS 客户端。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-21T21:21:09.683

您可能不想从第一个回调中启动另一个事务。无法保证您的第一个事务的函数将运行多少次，尤其是当您尝试更新的位置存在大量争用时。

我相信您在另一个问题中遇到的更好的解决方案是在检查第一个事务是否已提交之后，从完成回调开始第二个事务。

# paypal - 贝宝沙箱 - 无法更改密码

> ID：16125339
> 
> 赞同：6
> 
> 时间：2013-04-20T21:22:51.687
> 
> 标签：paypal, paypal-sandbox

当我尝试更改我的贝宝沙盒测试帐户的密码时，为了安全起见，它要求我输入完整的信用卡号或完整的银行帐号。它给了我这些帐户的最后几位数字，如下图所示：

![在此处输入图像描述](https://i.stack.imgur.com/c4Ijv.png)

所以基本问题是当我创建这些帐户时，这个信用卡号和银行帐号是由沙箱自动创建的。我不知道这两个数字实际上是什么。这是我尝试过的：

*   尝试从有效的测试卡 # 创建新信用卡，尝试将其设为主要卡。这一切都奏效了，但是当我返回验证屏幕时，我的新卡没有出现——它只是默认的一张。
*   尝试使用谷歌搜索以查找该测试信用卡号或测试银行帐号是什么。没有骰子。
*   对于安全挑战，尝试选择秘密问题而不是帐号。贝宝出现故障，它甚至不会带我到那个屏幕，仍然带我去抄送/银行。
*   尝试从“忘记密码”重置密码，但电子邮件永远不会出现，因为它是沙箱。

我只是想更改我的密码。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-22T12:41:59.573

您可以从 developer.paypal.com 更改您的沙盒帐户密码。

1.  前往[developer.paypal.com](https://developer.paypal.com/home/)并登录
2.  点击“应用程序”
3.  单击“沙盒帐户”
4.  选择您的一个测试帐户，然后单击“个人资料”
5.  点击“更改密码”
6.  输入新密码，然后点击“保存”

![个人资料截图](https://i.stack.imgur.com/wrnIV.png)

![密码变更](https://i.stack.imgur.com/CAA5d.png)

> 注意：如果您尝试更改密码并在单击“保存”后看到错误消息“请重试”，请确保新密码具有以下特征：

*   8 到 20 个字符之间
*   大写、小写、字母、数字和符号的混合

希望这可以帮助！如果您遇到任何问题，请告诉我。

谢谢，

# java - 如何编写一个将在已经创建的后台侦听的客户端套接字？

> ID：16125342
> 
> 赞同：0
> 
> 时间：2013-04-20T21:23:21.607
> 
> 标签：java, android, sockets, client

首先，我对此很陌生，我有服务器/客户端套接字在运行，服务器正在发送/接收数据，但我的客户端目前仅在 try/catch 块中发送数据，我需要编写另一种方法来只是捕捉传入的数据？并将其保留在我原来的 try/ctach* 之外

任何帮助都会很棒

```
public void onClick(View v)
         {
             setMyIp(ipaddress.getText().toString());
            // myComs.sending_data(getMyIp() , "Got connected");
            try
             {
                 InetAddress inet = InetAddress.getByName(getMyIp());
                 Socket s = new Socket(inet, 2000);
                 OutputStream o = s.getOutputStream();
                 PrintWriter p = new PrintWriter(o);
                 InputStream in = s.getInputStream();

                 p.println("You are connected");
                 p.flush();

                 readContacts();
                 //inboxConversations();
                 //outboxConversations();
                 readSms();

             }
             catch (UnknownHostException e) 
             {
                ipaddress.setText("Unknown host");
                   e.printStackTrace();
             }
            catch (IOException e)
            {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }

         }

     }); 
```

这是我的代码，我需要在按钮之外创建一个单独的侦听器任何想法

**谢谢**

* * *

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T22:06:58.307

您必须保持套接字在循环中打开，不断侦听要写入的任何数据。当然，在单独的线程/进程上执行此操作。实际上，在我看来，服务器端和客户端都应该在一个单独的线程上。您可以查找 java NIO，但这里有一些代码只是为了让您入门，因为 android 有一个可以在后台执行操作并在之后更新主 UI 的类，它称为 ASYNCHTASK。你当然可以用其他方式生成一个线程，只是向你展示一种方便的方式：（注意我没有运行这个我只是写了我会怎么做所以它把它当作伪代码）

```
class ClientTask extends AsyncTask<Void, Void, Void> // or whatever you want to pass in
{

        public static String ip = "10.0.2.1";
        public static int port = 5061;
        Socket socket;
        public DataInputStream dis;
        public DataOutputStream dos;
        public String message;

        @Override
        protected Void doInBackground(Void... params) {

/* set up our socket and open a stream to read */

                 try {
                socket = new Socket(ip, port);
        dis = new BufferedReader(new InputStreamReader(socket.getInputStream()));           

            } catch (Exception e) {
                Log.i("AsyncTank class", "Socket has some trouble opening");
            }

/*heres the stuff your looking for to listen to a socket all day long*/

while(socket.isConnected()){
                String mymessage=dis.readLine(); //readline blocks
/* do something with your message */    
publishProgress(mymessage); //publishes update to main UI thread            
                        }
                }

            }
            return null;
        }

@Override
    protected void onProgressUpdate(String... messages) {

     Toast.makeText(this, messages,Toast.LENGTH_LONG).show(); //announce updates on incoming socket

}

} 
```

-------- 如果您不需要在套接字因任何原因关闭后更新主 UI，只需执行相同的操作，但使用可运行或 Thread 类来创建和侦听。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-21T06:47:53.597

如果您需要客户端充当接收者，则您已经为此异步行为运行了一个线程，否则如果您在主线程上执行此操作，它将冻结您的应用程序。

所以做以下事情

在您的客户端的 main 方法中启动一个接收器线程

```
Thread receiver_thread=new Thread(new Reciever());
reciever_thread.start(); 
```

这是接收器类

```
public class Receiver implements Runnable  
{
    public void run()  
    {
        While(true)
        {
            //check here if there is some data in your input stream so what              
               //you receive when server sends something to you

           //so that's it here  do your work with the incoming data
           //suggestion make an inner class to your main ui class so that data that comes here can be printed to those ui components.
         }
      }
} 
```

希望对你有帮助

# python - 从 Django 请求中获取以相同字符串开头的 POST 值

> ID：16125352
> 
> 赞同：0
> 
> 时间：2013-04-20T21:25:03.313
> 
> 标签：python, django

我的网站上有一个表单，允许用户向对象添加名称。用户可以点击加号按钮添加另一个名称或点击减号按钮删除一个名称。我需要能够轻松提取所有以名称开头的 POST 变量。

例如。一个用户添加了两个名字，所以我们有两个文本框名称“name0”和“name1”。有没有办法可以在不知道我有多少的情况下提取这两个值？

我想在不知道的情况下这样做的一个原因是因为他们可以在名称列表上执行任意数量的添加和删除功能。所以我可以这样结束：

'name2'、'name10'、'name11'

对于进来的名字。我不想知道确切的值。我只想提取所有以“名称”开头的 POST 变量。

这可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T22:11:55.420

您可以遍历所有 POST 元素并保留以“名称”开头的元素：

```
names = [v for k, v in request.POST.items() if k.startswith('name')] 
```

但这确实是错误的做法。您根本不应该将您的字段称为不同的名称：只需将所有字段都命名为`'name'`. HTTP 愉快地将所有数据作为同一变量的不同元素发布，您可以通过`request.POST.getlist('name')`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-10-07T02:03:30.543

是的，就像丹尼尔说的，所以我添加了下一个

posted = [{k.replace('person__',''):v} for k, v in request.POST.items() if k.startswith('person__')]

然后我可以使用带有发布数据的模型表单

# java - 获取所有字段值java程序

> ID：16125359
> 
> 赞同：-1
> 
> 时间：2013-04-20T21:25:31.517
> 
> 标签：java, reflection

我正在构建俄罗斯方块游戏。我目前正在调试游戏，为了做到这一点，我需要查看所有变量和变量变量的值等等。通过反射，我可以通过以下方式获得所有类字段：

```
try
{
    for(Field field : this.getClass().getDeclaredFields())
    {
        field.setAccessible(true);
        System.out.println(field.get(this));
    }
}
catch(Exception e)
{   
} 
```

我不知道如何获取每个字段对象的所有字段值。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-20T21:40:18.150

您需要做两件事：

1.  创建一组可达对象。您不想永远递归地遍历您的对象图。
2.  打印每个对象的值。

对于第一个，您需要使用以下内容`IdentityHashMap`：

```
import java.util.IdentityHashMap;

class MyObjectCache
{
    final IdentityHashSet objects = new IdentityHashSet ();
    ...
} 
```

要遍历对象，您可以使用递归函数（它更简单，但有堆栈限制）：

```
class MyObjectCache
{
     ....
     void registerObject(Object o)
     {
         if (objects.contains(o))
         {
             return;
         }

         objects.add(o);
         for(Field field : o.getClass().getDeclaredFields())
         {
             field.setAccessible(true);
             registerObject(field.get(o));
         }
    }
    ...
} 
```

然后你就可以开始打印收集的对象了……

# magento - Magento 模块开发

> ID：16125363
> 
> 赞同：1
> 
> 时间：2013-04-20T21:26:38.660
> 
> 标签：magento

我需要修改位于*app/code/core/Mage/Adminhtml/Block/Page/Menu.php**的*Menu.php 。我的问题是我可以将目录路径更改为*本地*（*app/code/local/Mage/Adminhtml/Block/Page/Menu.php*）而不会在未来出现任何问题吗？

 **** * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T21:42:27.887

[以下文章](http://prattski.com/2010/06/24/magento-overriding-core-files-blocks-models-resources-controllers/)解释了覆盖 Magento 核心类的最佳实践

您需要创建自己的基本模块，并重写核心类以指向您模块的类。然后该类可以扩展现有的 Magento 核心类，覆盖或扩展任何方法。

*但是*，您可以简单地将文件及其路径复制到本地目录，因为 Magento 的自动加载器在查找类时首先默认在那里。这样做的问题是，当您决定升级 Magento 时，您必须将新文件完全复制到您的路径（如果它已被升级修改）并重新应用您的修改。

重写/扩展是一种更易于维护的解决方案，但后者既快速又简单。这是你的选择！***

# symfony - 在供应商存储库中添加自定义函数

> ID：16125364
> 
> 赞同：0
> 
> 时间：2013-04-20T21:26:39.100
> 
> 标签：symfony, doctrine-orm

我在我的 Symfony 网站中使用 CCDNSForum 的 ForumBundle（包本身不相关，我的问题与这个包无关，但更笼统），我想自定义它，所以我自然地创建了一个 AcmeForumBundle，其父级是CCDNSForumForumBundle。我唯一要更改的是在与 Category 实体关联的 CategoryRepository 中添加一个新的自定义函数。

所以我在我的AcmeForumBundle 中创建了一个CategoryRepository.php，扩展了CCDNForum 的CategoryRepository.php，这还不够，因为Category 实体的默认存储库是CCDNForum 的CategoryRepository。

我做的下一件事是创建一个新的 AcmeForumBundle 类别实体，扩展 CCDNSForum 的类别实体，当然更改默认的关联存储库

```
namespace Acme\ForumBundle\Entity;

use CCDNForum\ForumBundle\Entity\Category as BaseCategory;

use Doctrine\ORM\Mapping as ORM;
use Doctrine\Common\Collections\ArrayCollection as ArrayCollection;

/**
 * @ORM\Entity
 * @ORM\Entity(repositoryClass="Acme\ForumBundle\Repository\CategoryRepository")
 * @ORM\Table(name="CC_Forum_Category")
 */
class Category extends BaseCategory
{
} 
```

我添加了@ORM\Table 行，因为找不到 SQL 错误“acme_category”表。该课程当然是空的，因为我在实体中没有任何更改。

使用这段代码一切正常，我在 CategoryRepository 中添加了我的自定义函数没有问题，但是当我想更新数据库模式时问题就来了。运行 php app/console 学说时出现错误：schema:update --dump-sql

```
[Doctrine\DBAL\Schema\SchemaException]
The table with name 'acme.cc_forum_category' already exists. 
```

我可以理解，因为 CCDNSForum 的 Category 实体和我的 Acme Category 实体使用的是同一个表（C_Forum_Category 表）。

我的问题是：我做得对吗？没有更简单的方法可以在供应商存储库中添加自定义功能吗？

谢谢！

# android - 如何在 SQLite 中插入日期类型的数据

> ID：16125366
> 
> 赞同：1
> 
> 时间：2013-04-20T21:26:47.763
> 
> 标签：android, sqlite, date

我想在类型为 Date 而不是 String 的表中插入日期（因为我必须稍后对其进行排序）。我不能使用内容值的函数 put()，因为它只需要 (String, String) 参数，而不是日期。那么如何在表格行中插入系统的当前日期？请帮忙。

```
 public long createEntry (String name, String db_dr, int amount, Date dt){
            ContentValues values = new ContentValues ();``
            values.put(DbOpenHelper.ENTRY_NAME,  name );
            values.put(DbOpenHelper.DR_CR, db_dr );
            values.put(DbOpenHelper.ENTRY_AMOUNT, amount);
            values.put(DbOpenHelper.DATE, dt); // function put defined for (string, string)
            long insertid= database.insert(DbOpenHelper.TABLE_ENTRIES, null, values);
            return insertid;
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T21:30:16.337

SQLite[不支持 Date 数据类型](http://www.sqlite.org/datatype3.html#datetime)。相反，您可以将日期存储在 Unix 时间中。例如，如果日期存储在 中`Calendar`，请使用`getTimeInMillis`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-21T03:07:21.673

您可以将日期插入为毫秒。正如您的评论所说，您能够使用 milis 存储日期并且面临检索它并将其转换为日期的问题。这是一个例子

```
 Calendar calendar = new GregorianCalendar();
    calendar.setTimeInMillis(date_in_milis);
    int year = calendar.get(Calendar.YEAR);
    int month = calendar.get(Calendar.MONTH);
    int date = calendar.get(Calendar.DATE);
    int day = calendar.get(Calendar.DAY_OF_WEEK); 
```

它将年、月、日和日设置为整数。因此，通过一些计算，如果您还想获取月/日名称，您可以将其格式化为字符串。

# python - 展平内部列表而不更改python中的外部列表

> ID：16125367
> 
> 赞同：1
> 
> 时间：2013-04-20T21:26:54.110
> 
> 标签：python, list, nested, flatten

因此，只需在 stack-overflow/google 中输入 python flatten list 就会返回大量重复的结果。我已经尝试了所有这些，但没有一个适用于这个特定的实例。

我从 pyodbc 取回了一个数据库结果集，它为我提供了一个数据结构，我可以将其强制转换为列表列表。返回的每一行中的第一个元素（第一列）的格式为`"a.b.c"`。我希望它是`"a", "b", "c"`。我的第一直觉是按期分开，我做到了。

前：

```
[["a.b.c", "d", 1], ["e.f.g", "h", 2], ... ] # rows left out for brevity 
```

后：

```
# unfortunately, split returns a list, which then gets nested
[[["a", "b", "c"], "d", 1], [["e", "f", "g"], "h", 2], ... ] 
```

但是，我想看到的是：

```
[["a", "b", "c", "d", 1], ["e", "f", "g", "h", 2], ... ] 
```

我尝试了以前关于堆栈溢出的解决方案来展平列表，但是当每个人都提到嵌套列表时，没有人说如何*只*展平嵌套列表。

我努力了：

```
from itertools import chain
for row in rows:
    row = list(chain(row)) # python won't allow modifications in a loop 
```

和

```
rows = [list(chain(row)) for row in rows] 
```

我想一定有一种方法，也许有产量，做这样的事情：

```
for row in rows:
    row = row[0].append(row[1:]) # but this doesn't work either 
```

我不知道如何修改列表列表中的内部列表。如果有比我迄今为止尝试过的更好的方法，我很想听听。在此先感谢您的帮助。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-20T21:29:21.683

怎么样：

```
>>> s = [["a.b.c", "d", 1], ["e.f.g", "h", 2]]
>>> [k[0].split('.') + k[1:] for k in s]
[['a', 'b', 'c', 'd', 1], ['e', 'f', 'g', 'h', 2]] 
```

这将获取在`split`对第一个元素进行操作后返回的列表，并将其添加到由其余元素组成的列表中。

# c# - CookieHelper 错误，一次又一次地创建 cookie

> ID：16125370
> 
> 赞同：0
> 
> 时间：2013-04-20T21:27:42.660
> 
> 标签：c#, asp.net, webforms

创建了这个简单的类来创建 cookie。但是一次又一次地创建cookie。

```
using System;
using System.IO;
using System.Web;
using System.Web.UI;

/// <summary>
/// Summary description for CookieHelper
/// </summary>
public class CookieHelper
{
    private Page _page = null;
    public bool success { get; private set; }

    public bool CreateSuccess { get; private set; }
    protected bool SaveSuccess { get; private set; }
    protected bool DeleteSuccess { get; private set; }

    public bool IsExisting { get;private set; }
    public string cookieName { get; set; }

    public CookieHelper(Page page)
    {
        _page = page;
        CreateSuccess = SaveSuccess = IsExisting = DeleteSuccess = false;
    }

    public bool Exist(string cookieName)
    {
        if (string.IsNullOrEmpty(cookieName))
            throw new ArgumentNullException("cookieName can't be null");
        else
        {
            try
            {
                if (_page.Request.Cookies[cookieName] == null)
                {
                    IsExisting = false;
                    return false;
                }
                else
                {
                    IsExisting = true;
                    return true;
                }
            }
            catch (ArgumentException)
            {
                throw new ArgumentException("cookieName given to Exist check function is invalid or not string");
            }
        }
    }

    public void CreateCookie(string cookieName, int expiryTimeInMinutes=1, bool secure = true)
    {
        if (string.IsNullOrEmpty(cookieName))
            throw new ArgumentNullException("cookieName can't be null");
        else
        {
            try
            {
                if (Exist(cookieName))
                {
                    IsExisting = true;
                    return;
                }
                else
                {
                    HttpCookie cookie=new HttpCookie(cookieName);
                    cookie.Expires = DateTime.Now.AddMinutes(expiryTimeInMinutes);
                    cookie.Secure = secure;
                    CreateSuccess = true;
                    IsExisting = true;
                }
            }
            catch (ArgumentException)
            {
                throw new ArgumentException(string.Format("CookieName type mismatch.  The parameter is of type '{0}', was expecting '{1}'.",
                    cookieName.GetType(), "a".GetType()));
            }
        }
    }

    public bool SaveInCookie(string cookieName, string valueKey, string valueToBeStored, int expiryTimeInMinutes, bool secure = true)
    {
        SaveSuccess = false;
        if (typeof(string) != cookieName.GetType() || typeof(string) != valueKey.GetType() || typeof(string) != valueToBeStored.GetType() || typeof(bool) != secure.GetType() || typeof(int) != expiryTimeInMinutes.GetType())
            throw new ArgumentException("Parameter type mismatch");
        else
        {
            try
            {
                HttpCookie cookie = null;
                if (_page.Request.Cookies[cookieName] == null)
                {
                    cookie = new HttpCookie(cookieName);
                    CreateSuccess = true;
                    IsExisting = true;
                }
                else
                {
                    cookie = _page.Request.Cookies[cookieName];
                    IsExisting = true;
                    CreateSuccess = false;
                }

                cookie.Values.Add(valueKey, valueToBeStored);
                cookie.Expires = DateTime.Now.AddMinutes(expiryTimeInMinutes);
                cookie.Secure = secure;
                _page.Response.Cookies.Add(cookie);
            }
            catch (Exception)
            {
                SaveSuccess = false;
                throw new Exception("Cookie Save Failed");
            }
            return SaveSuccess;
        }
    }

    public string GetCookieValue(string cookieName, string valueKey = null)
    {
        if (typeof(string) != cookieName.GetType() || typeof(string) != valueKey.GetType())
            throw new ArgumentException("Parameter type mismatch");
        else
        {
            string keyExist = string.Empty;
            try
            {
                if (Exist(cookieName) == IsExisting)
                {
                    keyExist = (string)_page.Request.Cookies[cookieName][valueKey];
                    return ((string.IsNullOrEmpty(keyExist)) ? String.Empty : _page.Request.Cookies[cookieName].Values[valueKey]
                        );
                }
                else
                    throw new FileNotFoundException("Cookie with the name provided doesnot exist");
            }
            catch (Exception ex)
            {
                throw ex;
            }
        }
    }

    public bool DeleteCookie(string cookieName)
    {
        if (typeof(string) != cookieName.GetType())
            throw new ArgumentException("Parameter type mismatch");
        else
        {
            try
            {
                if (_page.Request.Cookies[cookieName] != null)
                {
                    HttpCookie myCookie = new HttpCookie(cookieName);
                    myCookie.Expires = DateTime.Now.AddDays(-1d);
                    _page.Response.Cookies.Add(myCookie);
                    IsExisting = false;
                }
                return true;
            }
            catch (Exception ex)
            { throw ex; }
        }
    }
} 
```

在我的网页中将此类称为-

```
protected void Page_Load(object sender, EventArgs e)
    {
        CookieHelper cook = new CookieHelper(this.Page);
        if (!cook.Exist("Preferences"))
        {
            cook.CreateCookie("Preferences",2);
            Response.Write("Created");
        }
        else
            Response.Write("Not");

    } 
```

给我总是创造。我添加了断点并检查了调试，发现编译器总是去创建部分。请建议我创建这个助手类。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T21:36:23.903

看来你不见了

`Response.Cookies.Add(myCookie);`

在你的`CreateCookie`其他情况下。

因此它看起来像：

```
HttpCookie cookie=new HttpCookie(cookieName);
cookie.Expires = DateTime.Now.AddMinutes(expiryTimeInMinutes);
cookie.Secure = secure;
CreateSuccess = true;
IsExisting = true;
Response.Cookies.Add(myCookie); 
```

这确保了 cookie 被添加到响应中，因此浏览器每次访问时都知道重播它。

这是获取有关 Web 表单环境中 cookie 信息的[良好起点](http://msdn.microsoft.com/en-us/library/aa287547%28v=vs.71%29.aspx)。

# objective-c - setActivationPolicy 为 Regular 和 openWindow

> ID：16125371
> 
> 赞同：0
> 
> 时间：2013-04-20T21:27:45.560
> 
> 标签：objective-c, cocoa

在`applicationDidFinishLaunching`应用程序`activationPolicy`上设置为`Prohibited`（隐藏停靠图标）。

我有一个方法将它设置为`NSApplicationActivationPolicyRegular`（能够打开并聚焦窗口）然后打开窗口，但我必须运行它两次才能工作。设置策略不影响`openWindow:`方法。

```
- (void)openWindow {
    [NSApp activateIgnoringOtherApps:YES];
    [NSApp setActivationPolicy:NSApplicationActivationPolicyRegular];
    [NSApp openWindow:window];
} 
```

我需要延迟`openWindow:`吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-04T23:50:55.557

你什么时候打电话`openWindow`？也许你应该把调用放在`applicationDidFinishLaunching`.

顺便说一句，如果您想隐藏停靠图标并能够专注于窗口，您应该尝试`NSApplicationActivationPolicyAccessory`除`NSApplicationActivationPolicyProhibited`.

# android - API 级别 10 的 SqliteDatabase.getDatabaseName

> ID：16125373
> 
> 赞同：1
> 
> 时间：2013-04-20T21:27:50.260
> 
> 标签：android, sqlite

我想获取一个打开的数据库的名称，我通过`SqliteOpenHelper`. API 级别 14 ( ) 没有问题`getDatabasename`。但我需要它与 API 级别 10 一起工作（硬要求——这是针对我正在学习的课程）。

到目前为止，我提出的唯一想法是自己存储数据库名称以供将来使用——无论是在我需要它的类中，还是作为`SqliteOpenHelper`. 有没有更好的办法？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-20T21:53:55.897

`getDatabaseName()`返回您在构造函数中提供的完全相同的名称`SqliteOpenHelper`，因此最好将其存储在子类的成员变量中。如果以后您有另一个遇到相同问题的项目，它将更加灵活。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-20T22:50:56.833

但是自从您打开数据库并将其传递给 SqliteOpenHelper 的构造函数后，您是否已经有了数据库名称？所以只需继承 SqliteOpenHelper 并自己创建方法 getDatabaseName() 并让它做你想做的事。这似乎更多地是关于面向对象的原则。如果您需要代码或我弄错了，请告诉我。

我grep了代码。您要查找的函数只是存储您在构造函数中设置的变量：

公共字符串 getDatabaseName() { 返回 mName; }

所以再次制作自己的 [http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android/4.2.1_r1.2/android/database/sqlite/SQLiteOpenHelper.java#SQLiteOpenHelper .getDatabaseName%28%29](http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android/4.2.1_r1.2/android/database/sqlite/SQLiteOpenHelper.java#SQLiteOpenHelper.getDatabaseName%28%29)

# jquery - 带有历史 API 的浏览器后退按钮

> ID：16125374
> 
> 赞同：0
> 
> 时间：2013-04-20T21:28:08.903
> 
> 标签：jquery, ajax, browser-history

我想使用 HTML5 历史 API 和带有`<a>`标签的经典链接。

我从 ajax 开始`/page1/`并加载资源`/recource/`。

然后我用`window.history.pushState(push_data, document.title, url)`. 然后我通过经典链接转到另一个页面，`<a href = '/page2'>` 然后单击浏览器中的后退按钮。但不是显示`/page1/`修改过的页面，而是显示页面中的数据`/resource/`- 只是纯文本数据或 json 或你在`/rescource/`.

如何让浏览器混合历史 API 和经典链接？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T23:37:09.650

它完全按照您所做的。

你在：`/page1`它在堆栈的顶部，然后 push `/resource`，然后 push `/page2`。所以堆栈看起来像这样。

```
/page2
/resource
/page1 
```

History API 只允许开发人员推送 URL（以及带有一些数据的对象），仅此而已......例如：如果您说您刚刚创建的动物网页应该推送状态，`google.com`那么您将在堆栈上google.com，当单击返回按钮时，您将真正转到 google.com。

网络上最重要的是 URL 代表一些数据。因此，`/resource`当 URL 不起作用或显示不同的内容时，您不应该将 URL 推送到历史堆栈中 - 现在您的示例将`/resource`URL 与两个不相同的内容相关联

1.  显示内容的网页`/resource`
2.  文件`/resource`本身

但他们不一样！这就是为什么你应该推送类似`/page1WithLoadedResource`或（我认为是最好的）`/page1/resource`或`page1?loaded=resource`任何对你有用的东西，并确保当你在浏览器中输入这个 URL 时，它会做你想要的，无论你是否在在服务器或客户端上......在客户端上，您可以只显示空白页面模板，然后`/resource`完全按照您在启动`/page1`和加载时所做的那样通过 AJAX 加载`/resource`。

使用某些客户端 MVC/MVVM 框架时，您可以更轻松地做到这一点，但这远远超出了这个问题的范围，但您应该始终将 URL 与用于书签、处理、REST API 等的资源链接起来......

# javascript - 将 jquery 事件添加到 joomla 主菜单模块

> ID：16125375
> 
> 赞同：0
> 
> 时间：2013-04-20T21:28:18.140
> 
> 标签：javascript, jquery, jquery-ui, joomla, joomla-extensions

我有一个加载主菜单模块的 joomla 站点，如下所示：

```
<jdoc:include type="modules" name="topmenu"/> 
```

这个模块加载一个标签。我想使用带有该标签的 jquery。问题是我的 jquery 代码不能这样做：

```
$("menu") 
```

似乎`<ul class"menu">`必须在我使用 jquery 之前加载，否则 jquery 找不到类。

关于如何将 jquery 与我的 mainmenu 模块一起使用的任何想法？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T21:31:12.193

```
$(document).ready(function(){
 // $('menu') is available here
}); 
```

# controller - ARM cortex 架构代码执行

> ID：16125378
> 
> 赞同：1
> 
> 时间：2013-04-20T21:28:36.207
> 
> 标签：controller, arm, execution

我有一个关于 STM32F407 uC 或更多关于 cortex-M4 的问题。

那么代码是如何在手臂上执行的呢？是从 Flash 加载并执行每条指令还是存储在 RAM 中。或者它是否缓冲以及关于自我修改代码的内容是否有 2 个单独的地址空间用于 RAM 和代码（闪存）

希望有人可以给我一个解释，默认情况下是如何处理的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-20T23:20:17.290

来自[一些 ST 营销页面](http://www.st.com/web/en/catalog/mmc/FM141/SC1169/SS1577)：

> > ... 这些 MCU 利用 ST 的 90 nm NVM 技术和 ST 的 ART Accelerator™，以 180 MHz 的工作频率从闪存执行高达 225 DMIPS/606 CoreMark 的基于 Cortex-M 的微控制器达到业界最高的基准分数。

所以它默认从闪存执行（它应该是地址空间的一部分），但我相信你也可以将一些代码复制到`ram`那里并从那里运行，但是你的 mcu 的`flash`大小比它的`sram`.

您的问题的第二部分可以通过说 ARM 架构对指令和数据使用相同的地址空间但它们具有不同的总线/缓存（由于性能原因）来回答 - 这使得拥有自修改代码解决方案变得更加困难。

# c++ - 是否可以将向量用于opengl顶点数组？

> ID：16125382
> 
> 赞同：0
> 
> 时间：2013-04-20T21:29:27.840
> 
> 标签：c++, opengl

我希望我的班级`Vector3f`为我的长方体（由三角形制成）存储索引点。

这是我要推送到向量的内容。

```
 vector<Vector3f> I;

    I.push_back(Vector3f(1,   0,   2));     //front
    I.push_back(Vector3f(2,   0,   3));
    I.push_back(Vector3f(4,   5,   7));         //back
    I.push_back(Vector3f(7,   5,   6));
    I.push_back(Vector3f(0,   4,   3));     //left
    I.push_back(Vector3f(3,   4,   7));     
    I.push_back(Vector3f(5,   1,   6));     //right
    I.push_back(Vector3f(6,   1,   2));
    I.push_back(Vector3f(7,   6,   3));     //up
    I.push_back(Vector3f(3,   6,   2));
    I.push_back(Vector3f(1,   0,   5));     //down
    I.push_back(Vector3f(5,   0,   4)); 
```

顶点数组可以从类中读取吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T21:35:09.870

假设您的 Vector3f 是 POD

`&I[0]`会给你一个`float *`你可以传递给`glBufferData`

# iphone - iOS 注册协议处理程序的 API

> ID：16125383
> 
> 赞同：1
> 
> 时间：2013-04-20T21:29:30.413
> 
> 标签：iphone, ruby, api

是否有 API 可以检查已注册的 iOS 协议处理程序是否存在？我想弄清楚给我的一些协议处理程序是否有效。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T05:50:03.300

如果您在谈论应用程序 URL 方案，您可以使用：

```
 [[UIApplication sharedApplication] canOpenURL:<#(NSURL *)#>] 
```

`YES`如果有可以打开 URL 方案的应用程序或者没有，它将返回`NO`。

# java - 设置类路径 java 错误

> ID：16125385
> 
> 赞同：1
> 
> 时间：2013-04-20T21:30:07.240
> 
> 标签：java, macos, classpath, environment-variables, agents-jade

我正在尝试按照[本](http://jade.tilab.com/doc/tutorials/JADEAdmin/startJade.html)教程来使用 Jade（Java 代理开发框架）。我对java很陌生。我对这个命令有疑问：（我使用的是 Mac OSx）

```
java -cp lib\jade.jar;classes jade.Boot -gui -agents ping1:examples.PingAgent.PingAgent 
```

我收到此错误：

```
Usage: java [-options] class [args...]
       (to execute a class)
or  java [-options] -jar jarfile [args...]
       (to execute a jar file)
...
-bash: classes: command not found 
```

我已经像这样设置了我的环境变量：

```
export CLASSPATH=$CLASSPATH:/Applications/jade/classes
export CLASSPATH=$CLASSPATH:/Applications/jade/lib/jade.jar 
```

这是文件夹的层次结构： ![在此处输入图像描述](https://i.stack.imgur.com/6XcXl.png)

如果您需要更多信息来理解问题，请告诉我。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-20T21:32:05.270

尝试在类路径周围添加引号：`java -cp "lib\jade.jar;classes" ...`. 没有它们，bash 将分号解释为新命令的开始，这会导致错误消息`-bash: classes: command not found`

**编辑**

令我震惊的是，您当然是在 *nix 中运行的。那么路径分隔符将是`:`，而不是`;`。然后甚至不需要引号。分号是 Windows 中的路径分隔符。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-20T21:34:48.690

尝试

```
java -cp "lib\jade.jar;classes" jade.Boot -gui -agents ping1:examples.PingAgent.PingAgent 
```

看起来 bash 正在处理 ; 作为命令的结尾并将类视为新命令。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-07-06T17:21:17.070

The command is in Windows notation, not Unix one. On Unix systems You have to use lib/jade.jar instead of lib\jade.jar

# cuda - 调用 CUDA 内核时出现“无效的配置参数”错误？

> ID：16125389
> 
> 赞同：30
> 
> 时间：2013-04-20T21:31:00.877
> 
> 标签：cuda

这是我的代码：

```
int threadNum = BLOCKDIM/8;
dim3 dimBlock(threadNum,threadNum);
int blocks1 = nWidth/threadNum + (nWidth%threadNum == 0 ? 0 : 1);
int blocks2 = nHeight/threadNum + (nHeight%threadNum == 0 ? 0 : 1);
dim3 dimGrid;
dimGrid.x = blocks1;
dimGrid.y = blocks2;

//  dim3 numThreads2(BLOCKDIM);
//  dim3 numBlocks2(numPixels/BLOCKDIM + (numPixels%BLOCKDIM == 0 ? 0 : 1) );
perform_scaling<<<dimGrid,dimBlock>>>(imageDevice,imageDevice_new,min,max,nWidth, nHeight);
cudaError_t err = cudaGetLastError();
cudasafe(err,"Kernel2"); 
```

这是我的第二个内核的执行，它在数据使用方面完全独立。`BLOCKDIM`是 512 ，`nWidth and nHeight`也是 512 并且`cudasafe`简单地打印错误代码的相应字符串消息。这部分代码在内核调用之后给出了配置错误。

什么可能会给这个错误，任何想法？

* * *

## 回答 #1

> 赞同：53
> 
> 时间：2013-04-20T21:44:48.010

这种类型的错误消息通常是指启动配置参数（在这种情况下是网格/线程块尺寸，在其他情况下也可能是共享内存等）。当您看到这样的消息时，最好在启动内核之前打印出您的实际配置参数，看看您是否犯了任何错误。

你说`BLOCKDIM`= 512。你有`threadNum = BLOCKDIM/8`= `threadNum`64。你的线程块配置是：

```
dim3 dimBlock(threadNum,threadNum); 
```

因此，您要求启动 64 x 64 线程块，即每个块 4096 个线程。这不适用于任何一代的 CUDA 设备。当前所有的 CUDA 设备都被限制为每个块最多 1024 个线程，这是 3 个块维度的乘积。

最大尺寸列在CUDA 编程指南的[表 14](https://docs.nvidia.com/cuda/cuda-c-programming-guide/index.html#features-and-technical-specifications__technical-specifications-per-compute-capability)中，也可通过`deviceQuery`CUDA 示例代码获得。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-10-12T11:11:02.330

只是为了添加到前面的答案，您还可以找到代码中允许的最大线程数，因此它可以在其他设备上运行，而无需硬编码您将使用的线程数：

```
struct cudaDeviceProp properties;
cudaGetDeviceProperties(&properties, device);
cout<<"using "<<properties.multiProcessorCount<<" multiprocessors"<<endl;
cout<<"max threads per processor: "<<properties.maxThreadsPerMultiProcessor<<endl; 
```

# java - 如何更好地调试 Java 中的空指针异常

> ID：16125397
> 
> 赞同：2
> 
> 时间：2013-04-20T21:32:01.040
> 
> 标签：java, serialization, client-server, objectoutputstream

我正在创建一个客户端/服务器程序，它将来回发送一个可序列化的对象。我不知道空指针异常是如何发生的，它指向 btnSave 响应 Click 事件的行，并且 OutputStream 对象尝试写入

现在只实现了这个功能，以防有人测试代码。

## 可序列化对象：

```
import java.io.Serializable;

public class Contact implements Serializable {

private String Name;
private String Phone;   
private Operation operation;

public Contact(String n, String p, Operation op){
    this.operation = op;
    this.Name=n;
    this.Phone = p;
}
public String toString(){
    return this.Name + this.Phone;
}

protected enum Operation{
    save,
    read
}

} 
```

## 客户代码：

```
import java.io.*;
import java.net.*;
import java.awt.*;
import java.awt.event.*;
import javax.swing.*;

public class Client extends JFrame {

private JTextField txtName = new JTextField();
private JTextField txtPhone = new JTextField();

private JLabel lblName = new JLabel(" Name ");
private JLabel lblPhone = new JLabel(" Phone ");

private JButton btnSave = new JButton(" Save ");
private JButton btnRead = new JButton(" Read ");

private JPanel pan = new JPanel();

private JTextArea jta = new JTextArea(5,5);

private ObjectOutputStream Send;
private ObjectInputStream Receive;

public static void main(String[] args) {
new Client();
}

public Client() {

btnSave.addActionListener(new Listener() );
pan.setLayout(new GridLayout(2,3));

pan.add(lblName);
pan.add(txtName);
pan.add(btnSave);

pan.add(lblPhone);
pan.add(txtPhone);
pan.add(btnRead);

setLayout(new BorderLayout());
add(pan, BorderLayout.NORTH);
add(new JScrollPane(jta), BorderLayout.SOUTH);

setTitle("Client");
setSize(500, 300);
setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
setVisible(true); 

try {
  Socket socket = new Socket("localhost", 8000);
  Receive = new ObjectInputStream(socket.getInputStream());

  Send    = new ObjectOutputStream(socket.getOutputStream());
}
catch (IOException ex) {
  jta.append(ex.toString() + '\n');
}
}

private class Listener implements ActionListener {
public void actionPerformed(ActionEvent e){
    Contact c;
    if (e.getSource()==btnSave){
        c = new Contact(txtName.getText(), txtPhone.getText(), Contact.Operation.save);
    }
    else
    {
        c = new Contact(txtName.getText(), txtPhone.getText(),     Contact.Operation.read);
    }
    try{
    Send.writeObject(c);
    Send.flush();

    /*
     * try{
        Contact x = (Contact)Receive.readObject();
        JOptionPane.showMessageDialog(null, c.toString());
    }
        catch(ClassNotFoundException excee)
    {}
    */
    }
    catch(IOException exc)
    {

    }
}
}
} 
```

## 服务器是：

```
import java.io.*;
import java.net.*;
import java.util.*;
import java.util.regex.*;
import java.awt.*;
import javax.swing.*;

public class PhoneServer extends JFrame {
// Text area for displaying contents
private JTextArea jta = new JTextArea();

public static void main(String[] args) {
new PhoneServer();
}

public PhoneServer() {

setLayout(new BorderLayout());
add(new JScrollPane(jta), BorderLayout.CENTER);

setTitle("MultiThreadServer");
setSize(500, 300);
setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
setVisible(true); 

try {

  ServerSocket serverSocket = new ServerSocket(8000);
  jta.append("Phone Server started at " + new Date() + '\n');

  int clientNo = 1;

  while (true) {

    Socket socket = serverSocket.accept();
    InetAddress inetAddress = socket.getInetAddress();

    jta.append("New Client: #" + clientNo + " From: "+inetAddress.getHostAddress()+'\n');

    HandleAClient task = new HandleAClient(socket);
    new Thread(task).start();
        clientNo++;
  }
}
catch(IOException ex) {
  System.err.println(ex);
}
}

class HandleAClient implements Runnable {
private Socket socket;

public HandleAClient(Socket socket) {
  this.socket = socket;
}

public void run() {
    Matcher matcher;

    try {

    ObjectInputStream inputFromClient = new ObjectInputStream(socket.getInputStream());
    ObjectOutputStream outputToClient = new ObjectOutputStream(socket.getOutputStream());

    while (true) {
        try{
        Contact x = (Contact)inputFromClient.readObject();
        JOptionPane.showMessageDialog(null, x.toString());
        }
        catch(ClassNotFoundException excr){}

        //outputToClient.write(("Phone is " + phone + " and name is " + name).getBytes());//dataArray);
        //outputToClient.write(data.getBytes());
    }
  }
  catch(IOException e) {
    System.err.println(e);
  }
}
}
} 
```

## 错误：

```
Exception in thread "AWT-EventQueue-0" java.lang.NullPointerException
at Client$Listener.actionPerformed(Client.java:76)
at javax.swing.AbstractButton.fireActionPerformed(Unknown Source)
at javax.swing.AbstractButton$Handler.actionPerformed(Unknown Source)
at javax.swing.DefaultButtonModel.fireActionPerformed(Unknown Source)
at javax.swing.DefaultButtonModel.setPressed(Unknown Source)
at javax.swing.plaf.basic.BasicButtonListener.mouseReleased(Unknown Source)
at java.awt.Component.processMouseEvent(Unknown Source)
at javax.swing.JComponent.processMouseEvent(Unknown Source)
at java.awt.Component.processEvent(Unknown Source)
at java.awt.Container.processEvent(Unknown Source)
at java.awt.Component.dispatchEventImpl(Unknown Source)
at java.awt.Container.dispatchEventImpl(Unknown Source)
at java.awt.Component.dispatchEvent(Unknown Source)
at java.awt.LightweightDispatcher.retargetMouseEvent(Unknown Source)
at java.awt.LightweightDispatcher.processMouseEvent(Unknown Source)
at java.awt.LightweightDispatcher.dispatchEvent(Unknown Source)
at java.awt.Container.dispatchEventImpl(Unknown Source)
at java.awt.Window.dispatchEventImpl(Unknown Source)
at java.awt.Component.dispatchEvent(Unknown Source)
at java.awt.EventQueue.dispatchEventImpl(Unknown Source)
at java.awt.EventQueue.access$400(Unknown Source)
at java.awt.EventQueue$2.run(Unknown Source)
at java.awt.EventQueue$2.run(Unknown Source)
at java.security.AccessController.doPrivileged(Native Method)
at java.security.AccessControlContext$1.doIntersectionPrivilege(Unknown Source)
at java.security.AccessControlContext$1.doIntersectionPrivilege(Unknown Source)
at java.awt.EventQueue$3.run(Unknown Source)
at java.awt.EventQueue$3.run(Unknown Source)
at java.security.AccessController.doPrivileged(Native Method)
at java.security.AccessControlContext$1.doIntersectionPrivilege(Unknown Source)
at java.awt.EventQueue.dispatchEvent(Unknown Source)
at java.awt.EventDispatchThread.pumpOneEventForFilters(Unknown Source)
at java.awt.EventDispatchThread.pumpEventsForFilter(Unknown Source)
at java.awt.EventDispatchThread.pumpEventsForHierarchy(Unknown Source)
at java.awt.EventDispatchThread.pumpEvents(Unknown Source)
at java.awt.EventDispatchThread.pumpEvents(Unknown Source)
at java.awt.EventDispatchThread.run(Unknown Source) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T06:13:45.847

我已经编译了这个并做了一些测试。我假设调用时以某种方式发送对象为空

```
Send.writeObject(c); 
```

所以添加：

```
Send = new ObjectOutputStream(new Socket("localhost", 8000).getOutputStream()); 
```

在修复错误之前的行中，一切都按预期工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-20T22:07:36.980

从堆栈跟踪中，它显示错误在第 76 行。

```
Send.writeObject(c); 
```

这表明 Send 对象为空。

此外，在第 54 - 62 行

```
try {
  Socket socket = new Socket("localhost", 8000);
  Receive = new ObjectInputStream(socket.getInputStream());

  Send    = new ObjectOutputStream(socket.getOutputStream());
}
catch (IOException ex) {
  jta.append(ex.toString() + '\n');
} 
```

你正在吞下例外。因此，即使没有创建“发送”对象，您也可以继续执行您的程序。

第 76 行假定 Send 对象已创建。您可能想在此处检查 null 并采取适当的措施。

或者，当出现异常时，您可以在第 61 行抛出致命错误。

# android - TrivialDrive 显示“此版本的应用程序未配置为通过......计费”

> ID：16125403
> 
> 赞同：0
> 
> 时间：2013-04-20T21:33:14.033
> 
> 标签：android, in-app-billing

我正在尝试在手机上运行 TrivialDrive 来测试它。我已采取所有预防措施，即不在我自己的手机上运行它。我检查了版本是否相同。我已经等待了足够的时间让 GP 服务器更新，等等。有谁知道为什么会这样？谢谢。

04-20 22:26:54.860: D/dalvikvm(3960): GC_EXTERNAL_ALLOC 释放 47K, 50% 空闲 2727K/5379K, 外部 0K/0K, 暂停 22ms 04-20 22:26:54.885: D/TrivialDrive(3960):加载的数据：tank = 2 04-20 22:26:54.885: D/TrivialDrive(3960): 创建 IAB 助手。04-20 22:26:54.885: D/TrivialDrive(3960): 开始设置。04-20 22:26:54.885：D/IabHelper(3960)：开始应用内计费设置。04-20 22:26:54.885：I/ApplicationPackageManager(3960)：cscCountry 不是德语：XEU 04-20 22:26:54.910：D/IabHelper(3960)：计费服务已连接。04-20 22:26:54.910：D/IabHelper(3960)：检查应用内计费 3 支持。04-20 22:26:54.915：D/IabHelper(3960)：com.trivialdrivesample.free 支持应用内计费版本 3 04-20 22:26:54.925：D/IabHelper(3960)：订阅可用。04-20 22:26:54.925: D/TrivialDrive(3960): 设置完成。04-20 22:26:54.925: D/TrivialDrive(3960)：设置成功。查询库存。04-20 22:26:54.925：D/IabHelper(3960)：启动异步操作：刷新库存 04-20 22:26:54.935：D/IabHelper(3960)：查询拥有的项目，项目类型：inapp 04-20 22 ：26：54.935：D / IabHelper（3960）：包名称：com.trivialdrivesample.free 04-20 22：26：54.935：D / IabHelper（3960）：使用延续令牌调用getPurchases：null 04-20 22:26： 54.955：D/CLIPBOARD（3960）：在开始输入时隐藏剪贴板对话框：由其他人完成...！04-20 22:26:54.965：D/IabHelper(3960)：自有项目响应：0 04-20 22:26:54.965：D/IabHelper(3960)：继续令牌：空 04-20 22:26:54.965： D/IabHelper(3960)：查询 SKU 详细信息。04-20 22:26:54.965: D/IabHelper(3960): queryPrices: 无事可做，因为没有 SKU。04-20 22:26:54.965：D/IabHelper(3960)：查询拥有的物品，物品类型：subs 04-20 22:26:54.965: D/IabHelper(3960): 包名称: com.trivialdrivesample.free 04-20 22:26:54.965: D/IabHelper(3960): 使用延续令牌调用 getPurchases: null 04- 20 22:26:54.975：D/IabHelper(3960)：自有项目响应：0 04-20 22:26:54.975：D/IabHelper(3960)：继续令牌：空 04-20 22:26:54.975：D/ IabHelper(3960)：查询 SKU 详细信息。04-20 22:26:54.975: D/IabHelper(3960): queryPrices: 无事可做，因为没有 SKU。04-20 22:26:54.975：D/IabHelper(3960)：结束异步操作：刷新库存 04-20 22:26:54.975：D/TrivialDrive(3960)：查询库存完成。04-20 22:26:54.975: D/TrivialDrive(3960): 查询库存成功。04-20 22:26:54.975: D/TrivialDrive(3960): 用户不是 PREMIUM 04-20 22:26:54.975: D/TrivialDrive(3960): 用户没有无限 gas 订阅。04-20 22:26:55.000: D/dalvikvm(3960): GC_EXTERNAL_ALLOC 释放 29K, 49% 释放 2762K/5379K, 外部 467K/513K, 暂停 23ms 04-20 22:26:55.005: D/TrivialDrive(3960): 初始库存查询完成；启用主 UI。04-20 22:27:03.490：D/TrivialDrive(3960)：点击购买气体按钮。04-20 22:27:03.495: D/TrivialDrive(3960): 启动 gas 购买流程。04-20 22:27:03.495：D/IabHelper(3960)：启动异步操作：launchPurchaseFlow 04-20 22:27:03.495：D/IabHelper(3960)：构建 gas 购买意向，项目类型：inapp 04-20 22:27:03.550：D/IabHelper(3960)：启动购买天然气的意图。请求代码：10001 04-20 22:27:03.620：D/CLIPBOARD(3960)：在开始输入时隐藏剪贴板对话框：由其他人完成...！04-20 22:27:16.580: D/TrivialDrive(3960): onActivityResult(10001,0,Intent { (有额外) } 04-20 22:27:16.580: D/IabHelper(3960): 结束异步操作：launchPurchaseFlow 04-20 22:27:16.580：D/IabHelper(3960)：购买已取消 - 响应：5：开发人员错误 04-20 22:27:16.580：D/TrivialDrive(3960)：购买完成：IabResult : 用户取消。（响应：-1005：用户取消），购买：空 04-20 22:27:16.580：E/TrivialDrive(3960)：*** * TrivialDrive 错误：购买错误：IabResult：用户已取消。（响应：-1005：用户取消）04-20 22:27:16.580：D/TrivialDrive(3960)：显示警报对话框：错误：购买错误：IabResult：用户取消。（响应：-1005：用户取消） 04-20 22:27:16.710：D/dalvikvm(3960)：GC_EXTERNAL_ALLOC 释放 61K，48% 释放 2840K/5379K，外部 917K/920K，暂停 21ms 04-20 22:27： 16.715：D/TrivialDrive(3960)：由 IABUtil 处理的 onActivityResult。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-27T02:30:11.907

根据您上面的评论，问题现在似乎很清楚：

当您从 Eclipse 将应用程序下载到您的设备时，Eclipse 会自动使用您的调试密钥（通常由 Eclipse 自动生成）对您的 APK 进行签名，而您上传的 APK 必须使用您自己的（非调试）签名进行签名密钥（因为否则 Google Play 不会接受它）。因此，您正在测试的文件的签名（来自 Eclipse）与上传的 APK 的签名不匹配。这就是导致表明您的应用未配置计费的错误的原因。

您不必*直接*从 Google Play 接收 APK 进行测试；您可以通过 USB 数据线从您的 PC 加载与您上传到 Google Play 相同的签名 APK。事实上，只要您的本地 APK 与您上传的 APK 具有相同的签名和相同的 VersionCode，您就可以使用 ADB 通过 USB 将其发送到您的设备，它应该可以运行。这很重要，因为当您进行测试时，您将希望进行各种小修复，而不必每次重新上传并在测试前等待几个小时。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T22:28:19.650

谢谢卡尔的积分。我一遍又一遍地阅读，似乎一切都做对了，除了我通过电缆将 APK 直接从 Eclipse 上传到手机。文档不够清楚。应该说应用只能从GP下载，不能从任何开发环境下载。我这样做的那一刻，它奏效了。再次感谢。我现在要为 IAB 开发我的真实应用程序。;-)

# c++ - c++ - 类型转换的接口，而不是强制转换

> ID：16125407
> 
> 赞同：0
> 
> 时间：2013-04-20T21:33:56.600
> 
> 标签：c++, types, type-conversion

这有点难以解释，但我会尽力而为。假设我们有一个接收选项的函数。该选项将是第一次，一个字符串。像这样的东西：

> 命令选项="废话废话"

在这里，我们的选择是`blah blah blah`.

现在，我想为开发人员提供一种将字符串“转换”（**而不是强制转换）为另一种类型的方法。**我会为基本类型实现我自己的“翻译器”，例如`bool`or `int`，例如：

> 命令递归=“真”

或者

> 命令行=7

让开发人员覆盖它们或指定新的，也许使用仿函数（因为我使用的是 C++11，所以使用 wonderful 没有问题`functional`）。

问题是我还没有找到一个可以接受的关于如何实现它的想法。根据我对 C++ 的了解，我已经尝试了一些东西——这绝对不是“完整的”，而是“可以接受的”——但其中很多都没有奏效或让我陷入困境。我的意思是我可以使用一些肮脏的技巧，但我想要最优雅的解决方案（当然是类型安全的）。

我希望我不会和你成为一个*luser*。感谢您的宝贵时间，无论如何抱歉。

最好的问候， Kalrish

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T21:58:05.397

要将字符串转换为整数，您可以从使用[`atoi`](http://en.cppreference.com/w/c/string/byte/atoi).

```
std::string strValue = "1245";
int intValue = atoi(strValue.c_str()); 
```

或者在 C++11 中你可以使用

```
int intValue = std::atoi(strValue.c_str()); 
```

要转换为布尔值，您可以从比较字符串开始

```
bool boolValue = strValue == "true"; 
```

# actionscript-3 - 如何让 Flex SWFLoader unloadAndStop 也卸载声音？

> ID：16125408
> 
> 赞同：1
> 
> 时间：2013-04-20T21:34:05.713
> 
> 标签：actionscript-3, apache-flex, flash, flex4.6, swfloader

```
public var swfLoader:SWFLoader = new SWFLoader();

[Embed(source="/some/file1.swf")]
public var file1:Class;

[Embed(source="/some/file2.swf")]
public var file2:Class; 
```

然后我做：

```
swfLoader.load(file1); 
```

稍后的：

```
swfLoader.unloadAndStop(true); 
```

它会卸载视频，但不会卸载声音！所以我添加

```
SoundMixer.stopAll(); 
```

没关系，有一段时间。后来，我这样做：

```
swfLoader.load(file2); 
```

最终，在观看 file2 时，file1 的音频将开始在后台播放 file2 的音频，无法停止！停止file1音频的正确方法是什么？我一直看到的方式是使用我正在使用的 unloadAndStop() 。除非我每次都必须创建一个新的 swfLoader 对象？

根据下面 Konrad 的回答，我应该停止在清理事件中播放声音，例如 REMOVED_FROM_STAGE，但是，如何停止在使用 SWFLoader 加载的 swf 文件上播放声音？我没有看到明显的方法来做到这一点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-21T02:12:14.743

解决方案有点棘手，因为问题在于加载的内容。

垃圾收集器不会删除声音，因为它仍在播放（因此它被 Flash Player 引用）但您无权访问它的声道（因为它的隐藏类似于类中的私有变量）。这种行为是完全正确的。

解决方案：在加载的 swf 代码中，您应该停止播放该声音（在 REMOVED_FROM_STAGE 或其他“清理”事件处理程序中）。其他解决方案（如 SoundMixer.stopAll）在某些情况下会起作用，但并非全部起作用。

我们经常忘记在我们的应用程序之后进行清洁。如果它们与 Flash Player 的实例相同，则没有问题（删除它会清除我们 swf 使用的所有内存）。当我们加载和卸载 swf 时，问题就开始了。忽略清理是内存泄漏的快速方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-04T09:08:54.913

swfLoader.unloadAndStop(true);

是否也删除了 swf 和声音。对我来说很好。甚至文档都说：卸载图像或 SWF 文件。此方法返回后，源属性将为空。仅当主机 Flash Player 为 10 或更高版本时才支持此功能。如果主机 Flash Player 版本低于 10，则此方法将卸载内容，就像源设置为 null 一样。此方法尝试通过删除对子 SWF 文件的 EventDispatcher、NetConnection、Timer、Sound 或 Video 对象的引用来卸载 SWF 文件。因此，子 SWF 文件和子 SWF 文件的显示列表会发生以下情况： ***声音停止。*** 舞台事件监听器被移除。删除了 enterFrame、frameConstructed、exitFrame、activate 和 deactivate 的事件侦听器。计时器停止。相机和麦克风实例分离 电影剪辑停止。

# asp.net - 来自外部类的 Request.cookies

> ID：16125409
> 
> 赞同：1
> 
> 时间：2013-04-20T21:34:10.863
> 
> 标签：asp.net, cookies

对于我的网页，我决定创建一个可重用的外部（即代码是页面自身类之外的单独类）类来以某种方式管理 cookie。

所以在我的类构造函数中，我做了这样的事情：

```
private property cookiepageas Page
Public Sub New(whatpage as Page)
  cookiepage= whatpage
End Sub 
```

这允许我将页面上下文传递给我的外部类。这样，我可以获得智能感知来允许我这样做： private property cookie as httpcookie cookie = cookiepage.Request.Cookies.Get(cookiename) 'get the current cookie

编译。问题是当我在浏览器中运行它时，我得到了这个错误：

> 请求在此上下文中不可用

那么，如何从我的外部类请求 cookie？ *（你可以发布 vb 或 c# - 我都喜欢）*

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-20T22:05:19.130

[啊，我没有](https://stackoverflow.com/questions/1373771/asp-net-is-it-possible-to-read-the-value-of-a-cookie-from-a-static-class?rq=1)通过页面，而是这样做了：

```
cookie = HttpContext.Current.Request.Cookies.Get(cookiename) 
```

# c# - 在 C# 中定义接口时，'in' 和 '@' 关键字有什么作用？

> ID：16125410
> 
> 赞同：1
> 
> 时间：2013-04-20T21:34:17.003
> 
> 标签：c#, .net

鉴于以下接口声明：

**声明 A**

```
public interface EventHandler<T>
{
    void Handle(T command);
} 
```

**声明 B**

```
public interface EventHandler<in T>
{
    void Handle(T @event);
} 
```

在正常测试中，这些都做同样的事情。该`Handle`方法按预期调用。

上述情况有何不同，在其他情况下它们的行为有何不同？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-20T21:40:06.880

`in`将泛型类型参数指定为逆变：[`in`(Generic Modifier) (C# Reference)](http://msdn.microsoft.com/en-us/library/dd469484.aspx)。还有[`out`for covariant](http://msdn.microsoft.com/en-us/library/dd469487.aspx)。

`@`允许您使用注册的关键字作为标识符：

> 关键字是预定义的、保留的标识符，对编译器具有特殊含义。**除非它们包含在前缀****中，否则它们不能用作程序中的标识符`@`**。例如，`@if`是一个有效的标识符，但`if`不是因为 if 是一个关键字。

*来源：[C#关键词](http://msdn.microsoft.com/en-us/library/x53a06bb.aspx)*

# java - 如何显示两个对象彼此相邻？

> ID：16125415
> 
> 赞同：0
> 
> 时间：2013-04-20T21:35:00.863
> 
> 标签：java

我必须阅读一个文件，显示一个字母（城市）与另一个相邻。它们由制表符分隔。

我如何证明 Q 与 X 相邻，R 与 X 相邻（也），P 与 R 相邻，等等……？

```
Q   X
R   X
P   R
P   W
W   S
S   T
T   W
W   Y
Y   R
Y   Z 
```

要在文件中读取的代码段：

```
private ArrayList<City> cityList;
private ArrayList<City> cityFromList;
private ArrayList<City> cityToList;
Scanner theFlightFile = null;

    try {
        theFlightFile = new Scanner (new File("flightFile.txt"));
    }
    catch (Exception FileNotFoundException) {
        System.out.println(FileNotFoundException.getMessage());
    }
    while (theFlightFile.hasNext()) {
        String cityFrom = theFlightFile.next();
        String cityTo = theFlightFile.next();
        City cityA = new City(cityFrom);
        City cityB = new City(cityTo);

        cityToList.add(cityA);
        cityFromList.add(cityB);
        //testing input reading...
        System.out.println(cityFrom + " -----> " + cityTo);
    } 
```

显示与“aCity”相邻的所有城市名称的方法。@param aCity 需要邻接列表的城市。

```
 //this is completely wrong, I know...
public void displayAdjacentCities(City aCity) {
    //for (aCity  : cityFromList) {
    //  for (City cityB : cityToList) {
    //      System.out.println(cityA + " is adjacent to " + cityB);
    //  }
    //}

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T21:38:57.657

您可以使用一个`HashMap<City, HashSet<City>>`结构，其中键是一个城市对象，它指向一组相邻的城市。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-20T21:41:59.260

最简单的方法是：

```
for (i = 0; i < cityFromList.length(); i++) {
  if (cityFromList.get(i).equals(aCity)) {
    System.out.println(aCity + " is adjacent to " + cityToList.get(i) + ".");
  }
} 
```

这当然要求“City”类需要实现 equals 方法，因此也需要实现 hashcode 方法。

# python - 在将键值对插入字典之前删除字符

> ID：16125421
> 
> 赞同：0
> 
> 时间：2013-04-20T21:35:27.677
> 
> 标签：python, python-3.x

我有一个 csv 文件，我正在解析它以将内容读入字典。但是，下面的代码给了我所有键的每个值的括号：值对：

```
import csv

f = open(input('Which csv file: '))
cdata = csv.reader(f, delimiter = ';', quoting = csv.QUOTE_NONNUMERIC)
cdict = {}
for row in cdata:     
    cdict[row[0]] = row[1:]
print(cdict)
f.close() 
```

我努力了：

```
for row in cdata:
    row = "".join(row)
    cdict[row[0]] = row[1:] 
```

但收到错误：

```
TypeError: sequence item 0: expected str instance, float found 
```

我将 csv 的内容读取为浮点数而不是字符串的原因是首先删除无关字符。我需要字典的最终输出只包含来自 csv 的实际数字，即没有引号或括号。

下面确实返回了我正在寻找的内容，但必须有一种更 Pythonic 的方式来做到这一点：

```
for row in cdata:    
    cdict[row[0]] = row.pop() 
```

示例 csv 数据：

```
Number;Value
0;13.168159
1;13.1681598889
2;13.0313661591 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T22:36:25.637

由于只有两列，我认为这更像是pythonic

```
cdata = csv.reader(f, delimiter = ';', quoting = csv.QUOTE_NONNUMERIC)
print dict(cdata) 
```

# c - 为什么我的最终 scanf 没有停止并读取用户输入？

> ID：16125423
> 
> 赞同：0
> 
> 时间：2013-04-20T21:35:46.040
> 
> 标签：c, scanf

谁能告诉我为什么我的代码可以正常工作，直到我到达最后一点，我问用户他们是否想再玩一次？由于某种原因，该程序似乎忽略了这行代码。请保持温柔，因为我是编程新手并试图自学 Objective-C。这个程序是典型的菜鸟，我生成一个随机数，让用户猜测，然后询问他们是否想再玩一次。谢谢你。

```
#import <Foundation/Foundation.h>

int main(int argc, const char * argv[])
{

    @autoreleasepool {

        int randomNumber = arc4random_uniform(100); // This is a random number generator that gens a num betw 0 and 100
        int userNumber;     // This is the number that the user picks intially
        int attempts = 0;   // This is the number of attempts the user makes during each game
        int games = 0;      // This is the number of games the user has played
        char play = 'n';    // This is whether the user wants to play again, intially set to 'y'

        scanf("%c", &play);
        while (play == 'y') {

            NSLog(@"Random number is: %d", randomNumber);
            NSLog(@"Enter a number between 0 and 100");
            scanf("%d", &userNumber);
            games++;    // Increment the number of games the user has played to 1

            if (userNumber == randomNumber) {
                attempts++;
                NSLog(@"Congratulations. You guessed correctly!");
            }

            attempts++;

            while (userNumber != randomNumber) {

                if (userNumber < randomNumber) {    // Guess is too low
                    attempts++;                     // attempt is incremented
                    NSLog(@"Too low. Try again!");  // User tries again
                    scanf("%d", &userNumber);
                }

                if (userNumber > randomNumber) {    // Guess is too high
                    attempts++;                     // attempt is incremented
                    NSLog(@"Too high. Try again!"); // User tries again
                    scanf("%d", &userNumber);
                }
            }
            NSLog(@"Congratulations. You guessed correctly!");
            NSLog(@"It took you %d attempts to guess correctly", attempts);

            NSLog(@"Do you want to play again?");
            scanf("%c", &play); // --------- Here is where things to wrong ---------

        } // while play is yes

    } // autoreleasepool
    return 0;
} // main 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T23:31:01.310

将评论转换为答案：

> 可能，最后`scanf()`读取换行符并继续（数字不读取换行符）。也许在`%c`:
> 
> ```
> scanf(" %c", &play); 
> ```
> 
> 检查来自 的返回值`scanf()`，甚至可能检查读取了哪个字符。

反击：

> 成功之前的那个空间`%c`。怎么会有人学到那样的东西？我认为它正在读取`\n`字符而不是我希望它读取的内容，即“y”或“n”。据我了解，`%d`整数不会在换行符中读取，但是`%c`呢？那是对的吗？防止这种情况的方法是使用空间？我只是不明白我怎么会知道这样做。

和回应：

> 通过非常仔细地阅读手册页`scanf()`，多次阅读，或者通过痛苦的经历（或者通过回答很多关于它的问题）。该`scanf()`系列功能非常强大，而且很难准确使用。我通常建议使用`fgets()`来读取输入行：
> 
> ```
> char line[4096];
> if (fgets(line, sizeof(line), stdin) != 0)
> {
>     ...use line...
> } 
> ```
> 
> 结合`sscanf()`解析数据就行了。它通常会减少您刚刚遇到的那种意外。您应该始终检查是否`scanf()`进行了预期的转换。

`scanf()`-family 格式字符串中空格的作用是错综复杂的。大多数转换说明符会自动跳过前导空白（包括换行符），因此格式字符串`"%d%d"`将读取为整数值，其中第一个可能前面有任意数量的空白，第二个也可能前面有任意数量的空白白色空间。转换将在不能成为第二个整数的一部分的第一个字符处停止（除非之前出现错误）。如果您键入`8`和换行符作为输入，则转换将在换行符 ( `\n`) 处停止并保留 if 以供下一个输入读取。

数字转换和字符串转换`%s`都跳过前导空格。单字符格式 ( `%c`) 和扫描集`%[a-z]`不会跳过前导空格。

当空格字符出现在格式中时，如 中`"%d %c"`，则它表示数据中的任意数量的空格，包括零。因此，在以下每一行中，接收`%c`格式的变量`Z`每次都会得到：

```
123Z
123 Z
123        Z
123
               Z 
```

（最后两行一起读取最后一个输入。）

# python - python koan - 将这两个班轮简化为一个

> ID：16125424
> 
> 赞同：1
> 
> 时间：2013-04-20T21:35:48.133
> 
> 标签：python

我想把这两行代码合二为一。

```
for n in exceptions:
    my_dict[n] += 1 
```

一个增加字典的小语句需要两行，这让我很困扰。我敢肯定，这个问题也曾困扰过某人。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-20T21:39:20.763

```
for n in exceptions: my_dict[n] += 1 
```

...但是该语句采用两行这一事实并*没有错。*有一些 Python[编码指南 (PEP8)](http://www.python.org/dev/peps/pep-0008/)，它们强烈鼓励核心可读性。通过将这些语句放在一行中，您会降低可读性。

从[PEP8](http://www.python.org/dev/peps/pep-0008/)：

> 虽然有时可以将带有小主体的 if/for/while 放在同一行，但切勿对多子句语句执行此操作。还要避免折叠这么长的线！

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-20T21:41:32.647

```
my_dict.update({n: my_dict[n] + 1 for n in exceptions}) 
```

这实质上是使用[dict.update](http://docs.python.org/3/library/stdtypes.html#dict.update)用另一个字典中的值更新字典。另一个字典是使用字典理解构建的。不幸的是，为了获得`my_dict[n] += 1`效果，我们必须在表达式中再次显式地读取值。

**但是**，如果它比为此使用**简单**明了的 for 循环更好，我会争论**很多。**

 ****另一方面，由于您似乎只是在计算异常，您可能需要考虑为您的字典使用[计数器](http://docs.python.org/3/library/collections.html#collections.Counter)。它本质上是一个改进的字典（意味着您可以像使用普通字典一样使用它），但它具有一些功能，使其在计算事物时非常完美。例如，您可以将上述语句简化为：

```
my_dict.update({n: 1 for n in exceptions}) 
```

或者当您只是`1`为每个添加时，您可以直接传递 iterable `exceptions`：

```
my_dict.update(exceptions) 
```

这也将具有`my_dict`自动初始化尚不存在的异常的好处。要从现有字典创建 Counter，只需将原始字典传递给 Counter 构造函数：

```
from collections import Counter
my_dict = Counter(my_dict) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-20T21:50:33.103

使用[collections.Counter](http://docs.python.org/2/library/collections.html#collections.Counter)：

```
import collections
my_dict = collections.Counter(exceptions) 
```

或者，如果`my_dict`已经定义为 a `dict`，

```
my_dict = collections.Counter(my_dict)
my_dict.update(exceptions) 
```****

# python - 在python中声明用户定义类的列表

> ID：16125425
> 
> 赞同：0
> 
> 时间：2013-04-20T21:36:03.737
> 
> 标签：python, list, class, cluster-computing

我有：

```
class Cluster:
    # some attributes

c = Cluster() 
```

where`c`应该是类型列表`Cluster()`

我可以定义类似的东西`c= Cluster[]`吗？

我是python的初学者。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-20T21:41:05.790

澄清一下：**没有**“类型列表”之类的东西`Cluster`。有一个 type 列表`list`，它可以包含任何内容。

所以你需要创建一堆`Cluster`s 并将它们添加到常规列表中：

例如列表理解：

```
N = 10 # length
clusters = [Cluster() for _ in range(N)] 
```

或使用常规循环：

```
clusters = []
for _ in range(N): clusters.append(Cluster()) 
```

无论如何，您可以稍后修改您的列表，因为它只是一个常规列表。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-20T21:45:48.823

在 Python 中，您不必（也不能）告诉您的列表将包含什么。所以只需制作空列表

```
c=[] 
```

然后打电话

```
c.append(thing) 
```

对于你想要的东西：thing 可以是 int、Cluster、float 等类型。最后，你可以拥有

```
c=[Cluster(...),1,"2",["a",1.2],(2,3),{1,2,3}] 
```

（其中 {1,2,3} 是一个集合，而 (2,3) 是一个元组）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-20T21:38:01.200

```
c = [Cluster(arguments), Cluster(arguments2), ... ] 
```

是相同的：

```
a = [1 , 2, "a" , 4, Cluster(arguments3)] 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-20T21:37:23.113

只需编写`c = []`，然后将`Cluster`对象添加到您的`list`c 中，如下所示：

```
c = []
obj = Cluster()
c += [obj] 
```

# algorithm - 最短路径的AI算法可能解决方案

> ID：16125426
> 
> 赞同：0
> 
> 时间：2013-04-20T21:36:06.150
> 
> 标签：algorithm, path-finding, heuristics, minesweeper

我需要关于扫雷游戏启发式的建议。如果找到 10 个没有我的字段，我很好奇如何估计下一个要打开的字段是什么？我正在考虑在每个带有数字的字段周围寻找地雷的可能性，并在计算结束时选择一个可能性最小的字段，但我认为这不会给我带来好的结果，因为我需要打开已经安全的字段以及什么我需要的是打开一个字段，它将打开板上最大的区域。我想阅读好的想法，但只是没有作弊算法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T22:05:23.223

您可以尝试使用蒙特卡罗模拟进行 A* 搜索。也就是说，为正在打开的每种类型的单元格（每种类型的操作）定义成本/奖励。

假设您在当前时间步可以执行 K 个不同的操作 (a_1,a_2,a_3...)。

1.  对于每个动作（打开单元格 X），并使用游戏模型来模拟接下来会发生什么。存储动作序列的奖励，并将奖励累积到原始动作。您可以为动作和后果添加概率权重，以使估计更准确。

2.  取每个动作和动作序列的模拟奖励的平均值。在深度 D 进行 M 次模拟后（其中 M 和 D 只是预定义的值，以确保算法不会花费太长时间），从 (a_1,a_2,a_3...) 中选择一个具有最高模拟奖励的动作。剪枝是必要的，以使这种方法有效（也就是说，不要将时间浪费在经过几步模拟后肯定不会导致高回报的动作上）

# sql - ORA-01031 创建视图时权限不足？

> ID：16125429
> 
> 赞同：7
> 
> 时间：2013-04-20T21:36:26.043
> 
> 标签：sql, oracle, view, oracle11g

当我尝试创建包含不同表的视图时，出现以下错误：第 1 行错误：ORA-01031 权限不足。

谁能告诉我可能是什么问题。我尝试遵循此处提到的另一个 stackoverflow 帖子，但它与不同的模式有关。

[ORA-01031: 选择视图时权限不足](https://stackoverflow.com/questions/140643/ora-01031-insufficient-privileges-when-selecting-view)

请让我知道，因为我是新来的。

我的查询如下：

原始问题：创建一个视图以选择员工 ID、员工姓名、雇用日期和部门编号。

我的解决方案：

```
CREATE VIEW SIMPVIEW AS
SELECT EMPNO, ENAME, HIREDATE,DEPTNO
FROM EMP; 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2015-03-12T10:13:35.610

那么可能你可能没有权限`CREATE VIEW`在你的数据库模式中执行命令...登录到 SYSDBA 帐户并发出命令

```
GRANT CREATE VIEW TO <dbusername>; 
```

此处`<dbusername>`应替换为您要授予该`CREATE VIEW`命令访问权限的用户的名称。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-29T09:39:32.547

您可以使用 . 检查您的用户是否具有`VIEW`创建权限`select * from session_privs`。

请注意，为了能够创建视图，创建它的用户需要被授予`SELECT`对所有正在使用的对象的权限，以及提到的`CREATE VIEW`权限。`USER_TAB_PRIVS`您还可以通过向收到错误的用户查询来检查这一点。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-12-06T16:05:47.940

当我想在 sql developer 中执行上述查询时，我遇到了一些问题，因为我没有足够的权限来创建视图或其他 oracle 对象模式，例如触发器、包、过程等。我发现错误是“第 1 行错误” : ORA-01031 权限不足”。所以，我需要所有权限来练习所有这些查询和程序。我采取了以下步骤来解决我的问题：

1.  因为我以用户名“scott”登录，所以我的名字是“scott”而不是“Dhruv”。我的目标是将所有权限授予我，即授予用户“scott”。
2.  为此，我需要以 DBA 身份输入数据库。现在，问题是！如何以 DBA 身份登录。为此，我打开命令提示符并按照以下步骤以 sysdba 身份登录数据库：

a) 在窗口运行中，我输入 cmd 打开命令提示符。我输入： sqlplus /nolog 这意味着我在没有提供所需凭据的情况下登录。
b) 我为我的底层 O/S 验证了自己，并以 DBA 身份输入数据库。为此，我输入了命令提示符：connect / as sysdba; c) 我评估了谁是我的数据库中的 DBA 用户（如果存在）。为此，我输入：从 V$database 中选择名称；d) 我们在这里执行这个命令。我终于允许自己 (scott) 通过键入以下命令在 sql developer 中创建视图：grant create view to scott; e) 最后，我通过键入以下内容授予自己所有权限：将所有权限授予 scott；

命令提示符快照：我已附上。

最后，我执行并创建了我的视图：我已附加

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-11-03T13:26:18.073

我遇到了这个错误，解决方案是`grant select WITH GRANT OPTION` 从视图中包含的另一个模式中获取一个表。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-04-30T23:10:01.023

1.  首先，您需要给用户身份验证，所以您需要知道系统中正常情况下谁 dba 进行此身份验证，所以请`conn system/ *password*`
2.  通过 put 给予盛大或认证`grant create view to *DataBaseUsername*;`
3.  与您的用户建立连接并应用您的命令

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2016-02-04T16:04:34.363

您必须授予用户选择任何表的权限。然后视图将成功编译。无需显式授予用户对所有对象的选择。

# c++ - C ++：将int的地址作为参数传递

> ID：16125430
> 
> 赞同：3
> 
> 时间：2013-04-20T21:36:27.103
> 
> 标签：c++, pointers, parameters, reference, memory-address

为什么“Void”实际上返回“6”？

```
void Void (int &ref){
    ref++;
}

int main () {

    int test= 5;
    Void(test);
    cout << test;  // is 6      

    return 0;
} 
```

我不太明白这里发生了什么。使用 Void(test) 我没有通过测试的地址。为什么不是“Void(&test);”？为什么 ref++ 将 1 添加到值 5？不应该是“*ref++”吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-20T21:46:06.817

```
int &ref = test; 
```

`ref`被初始化为对变量的引用`test`。引用本质上是另一个对象的别名。尽管有熟悉的语法（即 amersand *`&`*），但这并**没有**获取任何东西的地址，并且在语义上与指针*无关。*

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-20T21:37:51.933

```
void Void (int &ref)
               ^
             this! 
```

您[通过引用传递它](http://en.wikipedia.org/wiki/Reference_%28C%2B%2B%29)。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-20T21:38:45.527

的参数`Void`具有类型`int&`。`&`in`int&`是类型的一部分。它使它成为一个引用类型。`&`它与您可能用来获取对象地址的无关。

由于参数类型是引用类型，因此传递给它的任何对象都是*通过引用传递的*。这意味着`ref`函数内部指的`test`是它外部的对象。因此，`ref++`对 有影响`test`。

这与类型中没有 a`&`并且它是*按值传递的*情况相反。这会将对象复制到函数中，并且`ref++`只会影响副本。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-20T21:38:53.387

```
void Void (int &ref){
   ref++;
} 
```

您通过 传递参数，因此对内部参数的`reference`任何更改都将直接应用于调用变量，即在这种情况下，因为是对`ref``Void``test``ref``test`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-20T21:39:57.023

你通过引用传递它。在 C++ 中通过引用传递变量时，不需要在参数前加上 &。如果函数的参数是引用，则在函数调用时通过引用传递参数。

# android - 如何在android中从ViewPager的每个页面获取/设置数据

> ID：16125432
> 
> 赞同：2
> 
> 时间：2013-04-20T21:36:51.890
> 
> 标签：android, android-viewpager

将尝试解释我需要实现的目标：

我的活动用于显示一些用户设置。只是为了用户，为了让它看起来更好，我需要使用 3 个页面的 ViewPager：常规设置，另一个设置，不同的设置。当活动开始时，我使用 http 异步任务获取所有设置。所以我需要用来自http响应的数据填充我所有的3页。因此用户可以向左/向右滚动以查看不同的页面并更改设置。在操作栏上我有按钮保存：按下它时，它应该从每个页面获取所有数据并发送 http post 请求以保存数据。

我需要为我的 ViewPager 使用哪种类型的适配器才能实现它？目前我使用“FragmentStatePagerAdapter”，但它让我可以访问当前/显示的片段。但我需要能够从每个片段中获取/设置数据，而不仅仅是当前片段。

有人可以给我任何提示我该怎么做。我应该使用 FragmentStatePagerAdapter 还是只使用 PagerAdapter 就足够了？或者也许还有另一种方法）

任何提示都会非常有帮助。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T21:43:36.003

加载数据和显示数据是不同的任务。您当然可以下载您需要的所有数据并将其存储在适配器本身中。一旦适配器收到对`getItem()`您的调用，使用给定页面的数据初始化一个新片段并返回它。另外，使用[FragmentPagerAdapter](http://developer.android.com/reference/android/support/v4/app/FragmentPagerAdapter.html)因为它更轻量级。在 api 文档中，您实际上可以看到如何创建新的 Fragment 并返回。

# entity-framework - SqlCe 4.0 + EF 5.0 在 VS2012 中停止工作

> ID：16125434
> 
> 赞同：0
> 
> 时间：2013-04-20T21:37:22.753
> 
> 标签：entity-framework, visual-studio-2012, sql-server-ce

我已经创建了一个几乎可以分发给客户的应用程序。我花了几个月的时间。一切正常，但后来我安装了 VS2012，我的所有测试都停止工作。我尝试了一切，但最终放弃并重新安装了我的整台电脑。

与以前相同的设置，但一切都很干净：Windows 7 64 位、VS2012、SQL2012 等。现在所有测试都运行良好，所以我很高兴。但现在我遇到了新的麻烦。以 SqlCe 4.0 为目标时，它不起作用。我的应用程序将通过 WinApi 与中央 SQL Server 同步。那部分很好，但是带有 SqlCe 4.0 的本地数据库不起作用。问题是什么？这是一台新的干净的电脑！

我使用基本设置创建了一个全新的解决方案：Nuget 安装了 SqlCe Compact，Entity Framework 5，代码优先，一个类，一个上下文。这没用！它卡在对数据库的第一次上下文调用中，并且没有生成数据库文件。也不例外，就是卡住了！

到底是怎么回事？SqlCe 不可靠吗？我应该切换到 SQLite 吗？问题是我有很多代码，而且我非常习惯 EF。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-21T07:35:08.560

安装 NuGet 包不会在 machine.config 中注册任何内容，您必须在自己的配置文件中删除/添加提供程序，或在用户计算机上安装 4.0 MSI 文件。EF 示例始终假定已安装 MSI。

示例配置条目：

```
<system.data>    
  <DbProviderFactories>      
    <remove invariant="System.Data.SqlServerCe.4.0"/>      
    <add name="Microsoft SQL Server Compact Data Provider 4.0" invariant="System.Data.SqlServerCe.4.0" description=".NET Framework Data Provider for Microsoft SQL Server Compact" type="System.Data.SqlServerCe.SqlCeProviderFactory, System.Data.SqlServerCe, Version=4.0.0.0, Culture=neutral, PublicKeyToken=89845dcd8080cc91"/>    
  </DbProviderFactories>  
</system.data> 
```

我在这里有一篇关于私人部署的博客文章：http: [//erikej.blogspot.dk/2011/02/using-sql-server-compact-40-with.html](http://erikej.blogspot.dk/2011/02/using-sql-server-compact-40-with.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-20T21:37:22.753

我进行了搜索，但没有找到与我的情况完全匹配的答案。但是我在博客上得到了一个想法，提到 machine.config 文件中的格式错误。在查看它时，我发现了这个非常关键的部分：

```
 <system.data>
    <DbProviderFactories>
      <add name="Odbc Data Provider" invariant="System.Data.Odbc" description=".Net Framework Data Provider for Odbc" type="System.Data.Odbc.OdbcFactory, System.Data, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089"/>
      <add name="OleDb Data Provider" invariant="System.Data.OleDb" description=".Net Framework Data Provider for OleDb" type="System.Data.OleDb.OleDbFactory, System.Data, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089"/>
      <add name="OracleClient Data Provider" invariant="System.Data.OracleClient" description=".Net Framework Data Provider for Oracle" type="System.Data.OracleClient.OracleClientFactory, System.Data.OracleClient, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089"/>
      <add name="SqlClient Data Provider" invariant="System.Data.SqlClient" description=".Net Framework Data Provider for SqlServer" type="System.Data.SqlClient.SqlClientFactory, System.Data, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089"/>
      <add name="Microsoft SQL Server Compact Data Provider 4.0" invariant="System.Data.SqlServerCe.4.0" description=".NET Framework Data Provider for Microsoft SQL Server Compact" type="System.Data.SqlServerCe.SqlCeProviderFactory, System.Data.SqlServerCe, Version=4.0.0.0, Culture=neutral, PublicKeyToken=89845dcd8080cc91"/>
      <add name="Microsoft SQL Server Compact Data Provider" invariant="System.Data.SqlServerCe.3.5" description=".NET Framework Data Provider for Microsoft SQL Server Compact" type="System.Data.SqlServerCe.SqlCeProviderFactory, System.Data.SqlServerCe, Version=3.5.0.0, Culture=neutral, PublicKeyToken=89845dcd8080cc91"/>
    </DbProviderFactories>
  </system.data> 
```

在我的 machine.config 文件中，DbProviderFactories 部分为空。我尝试添加它但无法添加，因为它已被某个应用程序锁定。另一方面，我的客户可能会遇到同样的问题，我很难让他们编辑 machine.config。所以我用简单的方法做到了：将该部分添加到我的应用程序配置文件中！瞧！一切恢复正常。我的应用程序再次运行良好。

但为什么它在我之前的 Windows 安装中起作用？为什么这部分不总是添加到 machine.config 中？为什么在 SqlCe 4.0 和 EntityFramework 5.0 的演示示例中从未提及 DbProviderFactories 作为先决条件？这可能只是 .Net Framework 4.5 中的一个问题吗？

# jquery - jQuery从底部向上滑动，无法使上部内容不重叠

> ID：16125442
> 
> 赞同：0
> 
> 时间：2013-04-20T21:38:16.083
> 
> 标签：jquery, css

当我点击`toggle`按钮时，我想从底部*向上*`#upper`滑动。但是，我不能停留在底部，也不能让内容重叠。我怎样才能解决这个问题？*`#lower``#upper`*

 *JS 小提琴：http: [//jsfiddle.net/4k6du/136/](http://jsfiddle.net/4k6du/136/)

有问题的页面：http: [//keebs.com/sandbox](http://keebs.com/sandbox)

HTML

```
<div id="upper">
    <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Aenean a mauris et nulla facilisis eleifend. Sed metus orci, vulputate sit amet malesuada id, luctus vestibulum lacus. Sed faucibus, nibh vel faucibus porta, lectus lacus suscipit metus, ut posuere nulla dolor porttitor erat. Nam iaculis dolor et est tristique scelerisque. Integer gravida scelerisque est, ut pellentesque sem facilisis in. Quisque felis elit, laoreet id sagittis non, sollicitudin vitae turpis. Pellentesque quis quam sed nibh sollicitudin porttitor non ac sapien. Cras luctus egestas urna, vitae bibendum enim malesuada ut. Nulla porta tempus mi vel consequat. Aenean scelerisque porttitor felis, id elementum erat porttitor eu. Mauris vitae elit non lorem malesuada viverra non ac eros. Aenean scelerisque porttitor felis, id elementum erat porttitor eu. Mauris vitae elit non lorem malesuada viverra non ac eros. Aenean scelerisque porttitor felis, id elementum erat porttitor eu. Mauris vitae elit non lorem malesuada viverra non ac eros. Aenean scelerisque porttitor felis, id elementum erat porttitor eu. Mauris vitae elit non lorem malesuada viverra non ac eros. Aenean scelerisque porttitor felis, id elementum erat porttitor eu. Mauris vitae elit non lorem malesuada viverra non ac eros. Aenean scelerisque porttitor felis, id elementum erat porttitor eu. Mauris vitae elit non lorem malesuada viverra non ac eros. Aenean scelerisque porttitor felis, id elementum erat porttitor eu. Mauris vitae elit non lorem malesuada viverra non ac eros. Aenean scelerisque porttitor felis, id elementum erat porttitor eu. Mauris vitae elit non lorem malesuada viverra non ac eros. Aenean scelerisque porttitor felis, id elementum erat porttitor eu. Mauris vitae elit non lorem malesuada viverra non ac eros. Aenean scelerisque porttitor felis, id elementum erat porttitor eu. Mauris vitae elit non lorem malesuada viverra non ac eros. Aenean scelerisque porttitor felis, id elementum erat porttitor eu. Mauris vitae elit non lorem malesuada viverra non ac eros. Aenean scelerisque porttitor felis, id elementum erat porttitor eu. Mauris vitae elit non lorem malesuada viverra non ac eros. Aenean scelerisque porttitor felis, id elementum erat porttitor eu. Mauris vitae elit non lorem malesuada viverra non ac eros.</p>
</div>

<div id="lower">
    <div id="toggle-div">
    <a href="#" id="toggle">button</a>
    </div>

    <div id="panel">
        <p>Panel - Lorem ipsum dolor sit amet, consectetur adipiscing elit. Aenean a mauris et nulla facilisis eleifend. Sed metus orci, vulputate sit amet malesuada id, luctus vestibulum lacus. Sed faucibus, nibh vel faucibus porta, lectus lacus suscipit metus, ut posuere nulla dolor porttitor erat. Nam iaculis dolor et est tristique scelerisque. Integer gravida scelerisque est, ut pellentesque sem facilisis in. Quisque felis elit, laoreet id sagittis non, sollicitudin vitae turpis. Pellentesque quis quam sed nibh sollicitudin porttitor non ac sapien. Cras luctus egestas urna, vitae bibendum enim malesuada ut. Nulla porta tempus mi vel consequat. Aenean scelerisque porttitor felis, id elementum erat porttitor eu. Mauris vitae elit non lorem malesuada viverra non ac eros.</p>
    </div>
    <div id="copyright">
        copyright info
    </div>
</div> 
```

CSS

```
#upper {
    position: relative;
}

#lower {
    width: 90%;
    position: absolute;
    bottom: 0;
}

#toggle-div {
    padding: 10px;
    background:#666;
}

#panel {
    display: none;
/*    height: 100px;*/
    background-color: #aaaaaa;
    padding: 10px;
}
#copyright {
    width:100%;
    background:#222;
    height:40px;
} 
```

JS

```
$("#toggle").click(function() {
    if ($('#panel').css('display') == 'block') {
        var height = '-=' + $('#panel').height();
    } else {
        var height = '+=' + $('#panel').height();
    }
    $("#panel").slideToggle("slow");
    $("#upper").animate({
        bottom: height
    }, "slow")
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T23:51:54.707

这里的主要目的是让用户知道已经显示了新内容。虽然可以按照您想要的方式实现这一目标，但我建议您尝试一些更简单的方法，如下所示：

[http://jsfiddle.net/mDBbE/2/](http://jsfiddle.net/mDBbE/2/)

```
$('#toggle').click(function(e) {
    e.preventDefault();
    var $el = $('.slide-container');
    if($el.is(':visible'))
    {
        $el.slideUp(300);
    } else {
        $el.slideDown(300);
        scrollToContent($el);
    }
});

function scrollToContent($el) {
    $('html, body').animate({ scrollTop: $el.offset().top }, 600);
} 
```*

# c# - 在 wpf 应用程序中保存用户输入数据

> ID：16125444
> 
> 赞同：0
> 
> 时间：2013-04-20T21:38:21.603
> 
> 标签：c#, .net, wpf

我想存储用户通过应用程序打开的最后一个文件路径。并在下一次打开应用程序时将其呈现给他。

在 WPF 应用程序中这样做的推荐方法是什么？

感谢帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-20T21:51:09.793

通过项目属性和设置选项卡将设置文件添加到您的应用程序。
将此设置命名`LastUserSelectedPath`，选择字符串类型，最重要的是，选择用户设置。将值留空。

现在，在您的应用程序中，您可以使用

```
 string uPath = Properties.Settings.Default.LastUserSelectedPath; 
```

你可以用

```
string newSelectedPath = SomeMethodThatReturnsTheNewPath();
Properties.Settings.Default.LastUserSelectedPath = newSelectedPath;
Properties.Settings.Default.Save(); 
```

请注意，这适用于*每个用户*。不同的用户，如果它在同一台机器上运行，也会有不同的设置。
不要忘记添加

```
using System.Configuration; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-20T22:00:38.897

如果您使用的是 OpenFileDialog 控件，则可以在调用 ShowDialog 之前将[RestoreDirectory](http://msdn.microsoft.com/en-us/library/system.windows.forms.filedialog.restoredirectory.aspx)属性设置为。`true`我相信这会将您的最后一个目录存储在注册表中，但前提是用户单击`OK`而不是`Cancel`.

# javascript - 复选框的值为 [object HTMLInputElement]

> ID：16125446
> 
> 赞同：0
> 
> 时间：2013-04-20T21:38:33.213
> 
> 标签：javascript, jquery, checkbox

我有两个表格紧挨着。

这里是表格一

```
<form>
    <input type="radio" id="genderOne" name="genderOne" value="Mann"><label for="genderOne">Maennlich</label>
    <input type="radio" id="genderTwo" name="genderOne" value="Frau"><label for="genderTwo">Weiblich</label><br><br>
    <input type="checkbox" id="ageCheck" id="ageCheck" name="ageCheck"><label for="ageCheck">Bist du ueber 18?</label>
</form> 
```

表格2也是一样，只是checkbox的ID是genderThree和genderFour，名字是genderTwo。该复选框还有另一个名称“ageCheckTwo”。

现在我想，如果所有内容都正确填写，则可以使用用户输入的参数打开一个 php.site。

一切正常，除了第二种形式，但只有性别。

这是该部分的 JavaScript 代码

```
if(document.getElementById('genderOne').checked || document.getElementById('genderTwo').checked)
        {
            if(document.getElementById('genderOne').checked)
            {
                var genderOne = $('#genderOne').val();
                urlString += "&genderOne=" + genderOne;
            }
            if(document.getElementById('genderTwo').checked)
            {
                var genderTwo = $('#genderTwo').val();
                urlString += "&genderOne=" + genderTwo;
            }
        }
        if(document.getElementById('genderThree').checked || document.getElementById('genderFour').checked)
        {
            if(document.getElementById('genderThree').checked)
            {
                var genderOne = $('#genderThree').val();
                urlString += "&genderTwo=" + genderThree;
            }
            if(document.getElementById('genderFour').checked)
            {
                var genderTwo = $('#genderFour').val();
                urlString += "&genderTwo=" + genderFour;
            }
        } 
```

可以肯定的是，这是第二种形式

```
<form>
                    <input type="radio" id="genderThree" name="genderTwo" value="Mann"><label for="genderThree">Maennlich</label>
                    <input type="radio" id="genderFour" name="genderTwo" value="Frau"><label for="genderFour">Weiblich</label><br><br>
                    <input type="checkbox" id="ageCheckTwo" id="ageCheckTwo" name="ageCheckTwo"><label for="ageCheckTwo">Ist er/sie ueber 18?</label>
                    </form> 
```

但是，当我检查所有参数时，URL 现在是这样的：

```
http://localhost/mojoGerman/questions.php?nameOne=fdgh&nameTwo=hj&genderOne=Mann&genderTwo=[object HTMLInputElement] 
```

虽然它应该在最后显示第二个人的性别。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-20T21:41:39.350

这里有简单的印刷错误：

```
 if(document.getElementById('genderThree').checked)
        {
            var genderThree = $('#genderThree').val();
            urlString += "&genderThree=" + genderThree;
        }
        if(document.getElementById('genderFour').checked)
        {
            var genderFour = $('#genderFour').val();
            urlString += "&genderFour=" + genderFour;
        } 
```

这就是为什么剪切和粘贴是一个**坏主意**。让自己成为一个简单的函数：

```
function addIfChecked(name) {
  var val = $('#' + name).val();
  return val ? "&" + name + "=" + encodeURIComponent(val) : '';
}

urlString += addIfChecked("genderOne") + 
  addIfChecked("genderTwo") +
  addIfChecked("genderThree") + 
  addIfChecked("genderFour"); 
```

或类似的东西。更好的是，给复选框一个类，以便您可以使用选择器找到它们并通过 jQuery 迭代它们。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-20T21:41:59.240

```
var genderOne = $('#genderThree').val(); // get value in genderThree here
urlString += "&genderTwo=" + genderThree; 
```

尝试这个 -

```
if(document.getElementById('genderThree').checked) {
         var genderThree = $('#genderThree').val();
         urlString += "&genderTwo=" + genderThree;
 }
if(document.getElementById('genderFour').checked) {
         var genderFour = $('#genderFour').val();
         urlString += "&genderTwo=" + genderFour;
 } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-20T21:46:34.617

问题是使用了错误的变量名`genderThree`和`genderFour`

但是您可以将整个事情简化为

```
$('input[type="radio"][name^="gender"]:checked').each(function(){
   urlString += '&' + this.name + '=' + this.value;
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-20T21:50:51.747

我还没有完全理解你想要做什么，但是看到你的代码，我认为它可以通过使用不同的实践来优化

```
<form>
    <input type="radio" id="genderOne" name="genderOne[]" value="Mann"><label for="genderOne">Maennlich</label>
    <input type="radio" id="genderTwo" name="genderOne[]" value="Frau"><label for="genderTwo">Weiblich</label><br><br>
    <input type="checkbox" id="ageCheck" id="ageCheck" name="ageCheck"><label for="ageCheck">Bist du ueber 18?</label>
</form> 
```

如果您想在查询字符串中使用相同的键 genderOne ，您可以在 name 属性中明确声明您的名称为数组。在您的 php 脚本上，您可以使用 GET 方法获取此值以获取这些值

```
//php
echo $_GET['genderOne'][0];//returns first checked gender value
echo $_GET['genderOne'][1];//returns 2nd checked gender value 
```

如果我了解您要实现的目标，您甚至不需要 javascript。

# opencv - OpenCV 平行线剔除

> ID：16125447
> 
> 赞同：1
> 
> 时间：2013-04-20T21:38:37.963
> 
> 标签：opencv, image-processing, detection, image-recognition, object-detection

我有一个算法，它简单地通过多个角落并找到那些平行的。我的问题是，如下所示，我有时会得到假阳性结果。

为了消除这种情况，我将检查两个点是否落在一条霍夫线上，但这将是计算量很大的，我想知道是否有人有任何更简单的想法。

谢谢。

![假阳性平行线](https://i.stack.imgur.com/TgPXk.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-21T14:18:38.880

好的，根据评论，这应该是可以修复的。当您检测到一对平行线时，请使用您用来构造它的两个角来获取该线的方程。这条线的形式可能是`y = mx + c`. 然后对于`y`两点之间的每个坐标，计算`x`坐标。这为您提供了一组线段覆盖的所有像素。遍历这些像素，检查每个像素的强度是否更接近黑色而不是白色。如果集合中的大多数像素都是黑色的，那么它就是一条线。如果不是，它可能是一个非行。

# python - Python - 读取 .b4u 文件 - 错误序列项 0：预期的 str 实例，找到的字节

> ID：16125451
> 
> 赞同：3
> 
> 时间：2013-04-20T21:38:50.387
> 
> 标签：python, html, python-3.x, export

我正在尝试使用[http://grantcox.com.au/2012/01/decoding-b4u-binary-file-format/](http://grantcox.com.au/2012/01/decoding-b4u-binary-file-format/) Python 代码将 .b4u 文件导出为 HTML 格式，但由于某种原因在程序点之后：

```
# find the initial caret position - this changes between files for some reason - search for the "Cards" string
for i in range(3):
    addr = 104 + i*4
    if ''.join(self.parser.read('sssss', addr)) == 'Cards':
        caret = addr + 32
        break
    if caret is None:
        return 
```

我收到以下错误：

```
if ''.join(self.parser.read('sssss', addr)) == 'Cards':
TypeError: sequence item 0: expected str instance, bytes found 
```

我使用的 Python 版本是：Python 3.3.1 (v3.3.1:d9893d13c628, Apr 6 2013, 20:25:12)。

知道如何解决这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-01T23:19:21.363

我让它在 Python 2.7.4 下工作 我的 Python 3.3.2 给了我同样的错误。如果我知道如何将这段代码移植到 Python 3.xx，我会回复你 必须与 unicode 作为 Python 3 中字符串的默认值有关。这是我想出的一个解决方案：

```
def read(self, fmt, offset):
    if self.filedata is None:
        return None
    read = struct.unpack_from('<' + fmt, self.filedata, offset)
    xread = []
    for each in range(0,len(read)):
        try:
                xread.append(read[each].decode())
        except:
                xread.append(read[each])
    read = xread
    if len(read) == 1:
        return read[0]
return read

def string(self, offset):
    if self.filedata is None:
        return None
    s = u''
    if offset > 0:
        length = self.read('H', offset)
        for i in range(length):
            raw = self.read('H', offset + i*2 +2)
            char = raw ^ 0x7E
            s = s + chr(char)
    return s

def plain_fixed_string(self, offset):
    if self.filedata is None:
        return None
    plain_bytes = struct.unpack_from('<ssssssssssssssssssssssss', self.filedata, offset)
    xplain_bytes = []
    for each in range(0,len(plain_bytes)):
            try:
                    xplain_bytes.append(plain_bytes[each].decode())
            except:
                    xplain_bytes.append(plain_bytes[each])
    plain_bytes = xplain_bytes
    plain_string = ''.join(plain_bytes).strip('\0x0')
    return plain_string 
```

您可以只使用这些方法，而不是原作者提供的。请注意，如果您在任何地方看到它，您还应该将 unicode() 更改为 str() 并将 unichr() 更改为 chr()。还要记住 print 是一个函数，不能在没有括号 () 的情况下使用。

# delphi - 如何在 Delphi 中创建音符？

> ID：16125462
> 
> 赞同：12
> 
> 时间：2013-04-20T21:39:44.277
> 
> 标签：delphi, audio

有没有一个命令可以让我们的 Delphi 应用程序发出声音，我们可以像基本一样选择数字音调和持续时间？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-04-20T23:01:25.193

要产生纯正弦音，您可以使用

```
Windows.Beep(400, 1000) 
```

这将发出 400 Hz 纯正弦音，持续 1000 毫秒。

如果您想演奏真正的乐器（钢琴、吉他或 125 (?) 其他选项中的任何一个），您可以使用 MIDI。只需使用该`MMSystem`装置并执行

```
var
  mo: HMIDIOUT;

const
  MIDI_NOTE_ON = $90;
  MIDI_NOTE_OFF = $80;
  MIDI_CHANGE_INSTRUMENT = $C0;

function MIDIEncodeMessage(Msg, Param1, Param2: byte): integer;
begin
  result := Msg + (Param1 shl 8) + (Param2 shl 16);
end;

procedure NoteOn(NewNote, NewIntensity: byte);
begin
  midiOutShortMsg(mo, MIDIEncodeMessage(MIDI_NOTE_ON, NewNote, NewIntensity));
end;

procedure NoteOff(NewNote, NewIntensity: byte);
begin
  midiOutShortMsg(mo, MIDIEncodeMessage(MIDI_NOTE_OFF, NewNote, NewIntensity));
end;

procedure SetInstrument(NewInstrument: byte);
begin
  midiOutShortMsg(mo, MIDIEncodeMessage(MIDI_CHANGE_INSTRUMENT, NewInstrument, 0));
end;

procedure InitMIDI;
begin
  midiOutOpen(@mo, 0, 0, 0, CALLBACK_NULL);
  midiOutShortMsg(mo, MIDIEncodeMessage(MIDI_CHANGE_INSTRUMENT, 0, 0));
end; 
```

初始化 MIDI 系统后，您可以尝试

```
NoteOn(50, 127);
Sleep(500);
SetInstrument(60);
NoteOn(60, 127);
Sleep(500);
NoteOff(60, 127);
SetInstrument(80);
NoteOn(70, 127);
Sleep(500);
NoteOff(70, 127);
SetInstrument(90);
NoteOn(80, 127);
Sleep(500);
NoteOff(80, 127);
SetInstrument(100);
NoteOn(90, 127);
Sleep(500);
NoteOff(90, 127);
SetInstrument(12);
NoteOn(40, 127);
Sleep(1000);
NoteOff(40, 127); 
```

MIDI 编程被*低估了*！

[编译演示EXE](http://privat.rejbrand.se/AFewMIDINotes.exe)

# html - 如何在不换行的情况下使用文本溢出省略号制作流体宽度标题？

> ID：16125463
> 
> 赞同：18
> 
> 时间：2013-04-20T21:39:44.800
> 
> 标签：html, css

我需要在同一行上的标题和按钮，如有必要，使用省略号。

这是一个小提琴：http: [//jsfiddle.net/epyFT/1/](http://jsfiddle.net/epyFT/1/)

我希望输出看起来像这样：

```
_________________________________________________________
|                                                       |
| Header goes here [button]                             |
|                                                       |
--------------------------------------------------------- 
```

或者

```
_________________________________________________________
|                                                       |
| Super, super, super, super long header... [button]    |
|                                                       |
--------------------------------------------------------- 
```

或使用较小的窗口：

```
____________________________
|                          |
| Header goes... [button]  |
|                          |
---------------------------- 
```

该按钮不应该浮动到下一行。我怎样才能做到这一点？

HTML

```
<div class="container">
    <h2>This is the header that should never wrap and elipse if it doesn't fit</h2>
    <button>Button</button>
</div>

<div class="container">
    <h2>Header</h2>
    <button>Button</button>
</div> 
```

CSS

```
.container {
    width:100%;
}
h2 {
    display:inline;
    min-width:200px;
    overflow: hidden; white-space: nowrap; text-overflow: ellipsis; word-break: break-all; word-wrap: break-word;
}
button {
    width:100px;
} 
```

* * *

**奖金**

获得第二个（固定宽度）按钮以向右拉的额外功劳。

```
_________________________________________________________
|                                                       |
| Header goes here [button1]                  [button2] |
|                                                       |
|                                                       |
| Super, super, super, super long... [button] [button2] |
|                                                       |
--------------------------------------------------------- 
```

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-04-20T22:06:15.133

也许这样的事情有帮助？[http://jsfiddle.net/epyFT/3/](http://jsfiddle.net/epyFT/3/)

我不确定如何使按钮与容器的未包装宽度对齐，并且我只使用单元格的百分比宽度。

新代码：

```
.container {
  width: 100%;
  display: table;
  table-layout: fixed;
}

.container>div {
  display: table-cell;
}

.cell1 {}

.wrap {
  overflow: hidden;
  white-space: nowrap;
  text-overflow: ellipsis;
  word-break: break-all;
  word-wrap: break-word;
}

.cell2 {
  width: 60%;
}

h2 {
  display: inline;
  min-width: 200px;
}

button {
  width: 100px;
}
```

```
<div class="container">
  <div class="cell1">
    <div class="wrap">
      <h2>This is the header that should never wrap and elipse if it doesn't fit</h2>
    </div>
  </div>
  <div class="cell2">
    <button>Button</button>
  </div>
</div>
<div class="container">
  <h2>Header</h2>
  <button>Button</button>
</div>
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-04-20T22:49:20.077

我想我找到了一个更好的解决方案：http: [//jsfiddle.net/epyFT/9/](http://jsfiddle.net/epyFT/9/)

HTML：

```
<div class="container">
    <h2>This is a very long heading that should wrap with ellipsis when too long, but have a button to it's right.</h2>
    <button>Hello.</button>
</div>

<div class="container">
    <h2>This is short.</h2>
    <button>Sup</button>
</div> 
```

CSS：

```
.container {
    display: inline-block;
   max-width:100%;
   position: relative;
}
h2 {  
    padding-right: 200px;
    box-sizing: border-box;
    width: 100%;
    display: inline-block; 
    overflow: hidden; 
    white-space: nowrap; 
    text-overflow: ellipsis; 
    word-break: break-all; 
    word-wrap: break-word; 
}

button {
    position: absolute;
    width: 100px;
    right: 95px;
    top: 2em;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-20T22:30:48.223

这是另一个

HTML：

```
<div class="container">
     <h2 class="oneline">This is the header that should never wrap and elipse if it doesn't fit</h2>
    <button>Button</button>
</div>
<div class="container">
     <h2 class="oneline">Header</h2>
    <button>Button</button>
</div> 
```

CSS：

```
.container {
    width: 100%;
}
.oneline {
    display: inline-block;
    vertical-align: middle;
    max-width: 80%;
    margin: 0;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
} 
```

[JSFiddle](http://jsfiddle.net/Gu7qf/2/)

要对齐右侧的按钮，请`width: 80%;`添加`.oneline`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-12-03T20:30:36.400

我采用了 Dan 的出色答案（仅与 Webkit 浏览器兼容），并使其与 Firefox 和 Internet Explorer 8+ 兼容。这是小提琴：http: [//jsfiddle.net/hammerbrostime/9t5bX/1/](http://jsfiddle.net/hammerbrostime/9t5bX/1/)

```
.container {
  display: inline-block;
  max-width: 100%;
  position: relative;
}

h2 {
  padding-right: 200px;
  box-sizing: border-box;
  width: 100%;
  display: inline-block;
  overflow: hidden;
  white-space: nowrap;
  text-overflow: ellipsis;
  word-break: break-all;
  /* word-wrap: break-word;  taken out, caused issues in IE */
  max-width: -moz-calc(100% - 200px);
  /* FF hack */
}

button {
  position: absolute;
  width: 100px;
  right: 95px;
  top: 2em;
}
```

```
<div class="container">
  <h2>This is a very long heading that should wrap with ellipsis when too long, but have a button to it's right.</h2>
  <button>Hello.</button>
</div>

<div class="container">
  <h2>This is short.</h2>
  <button>Sup</button>
</div>
```

# sql - 通过 Internet 连接 SQL Server Express 2012

> ID：16125469
> 
> 赞同：0
> 
> 时间：2013-04-20T21:40:33.613
> 
> 标签：sql, sql-server, sql-server-2012, sql-server-express

我一直在尝试将我的 sql server express 2012 配置为通过 Internet 接收连接数小时而没有任何运气（我正在使用 Team Foundation Service 进行夜间构建，但是当它尝试运行与 sql server 交互的单元测试时它失败了）。

我一直得到的是这条消息：

```
A network-related or instance-specific error occurred while establishing a connection to SQL Server. The server was not found or was not accessible. Verify that the instance name is correct and that SQL Server is configured to allow remote connections. (provider: Named Pipes Provider, error: 40 - Could not open a connection to SQL Server) 
```

为了解决这个问题，我尝试了以下方法：

1.  安装并运行 SQL Server Browser
2.  为 sql server 实例启用 TCP/IP（使用默认 SQLEXPRESS）
3.  在我的路由器中启用端口转发
4.  将 SQL Server 和 SQL Server 浏览器应用添加到防火墙允许的应用列表中。
5.  把我的头撞在墙上。

我的sql server是混合模式，用户名密码正确（使用本地ip时有效）

我已经阅读了关于这个问题的每一篇文章，但到目前为止还没有..

我很绝望，所以任何建议将不胜感激！

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-20T22:24:46.313

解决了。

只需要输入我的公共 IP 地址而不输入实例名称。

例如 xxx.xxx.xxx.xxx 而不是 xxx.xxx.xxx.xxx\SQLEXPRESS

我不敢相信这是一个愚蠢的错误......

# c# - C#读取文本框忽略字符

> ID：16125470
> 
> 赞同：0
> 
> 时间：2013-04-20T21:40:34.217
> 
> 标签：c#, winforms, keydown

大家好，我有一个按键事件如下

```
if (e.KeyCode == Keys.C && e.KeyCode == Keys.Enter || e.KeyCode == Keys.Return)
{
    var amount = textBox1.Text;
    var total = label3.Text;
    decimal damount = Math.Round(Convert.ToDecimal(amount), 2);
    decimal dtotal = Convert.ToDecimal(total);
    var ntotal = dtotal - damount;
    var ndue = Math.Round(Convert.ToDecimal(ntotal), 2);
    var ntotal1 = Convert.ToString(ndue);
    if (ndue <= 0)
    {
        panel4.Show();
        label4.Text = ntotal1;
    }
    else
    {
        label3.Text = ntotal1;
    }
    textBox1.Text = "";
    textBox1.Focus();
} 
```

这个事件像我想要的那样工作，但这是我的问题，我在阅读 textbox1.text 时如何忽略 c 或 a 等字符，因为 keydown 需要 c 它与我的十进制转换混淆任何建议

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-20T21:44:42.040

`e.SuppressKeyPress = true; e.Handled = true;`当您想阻止按键继续前进时，添加到您的处理程序。

顺便说一句，您的 if 语句等效于`if (e.KeyCode == Keys.Return)`，因为它永远不会等于`C`and `Enter`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-20T22:16:21.180

不久前，我写了一篇关于限制用户输入到 TextBoxes 的短文，可在此处找到（[限制 TextBox 中允许的字符](http://satalketo.com/2010/08/restrict-characters-entered-into-textbox/)），但我意识到它没有处理的一件事是用户将包含这些字符的文本粘贴到 TextBox 中以下内容可能对您有用（[阻止某人粘贴到 TextBox](http://satalketo.com/2010/08/stop-someone-from-pasting-into-a-textbox/)中）。这两篇文章都是用 VB.NET 编写的，但代码很简单，将代码移至 C# 应该不会有任何问题。

希望这可以帮助 ：）

# ios - 从设备发送数据到设备

> ID：16125472
> 
> 赞同：0
> 
> 时间：2013-04-20T21:40:36.333
> 
> 标签：ios, iphone, sdk, notifications, device

我正在为我的小公司开发本地简单的聊天应用程序，该应用程序将消息从设备发送到设备。
每个设备都分配有一个唯一编号（例如，111,112,113，...）。
我需要一种将消息从设备 (111) 直接发送到设备 (112) 的方法。
我使用了推送通知，它工作得很好，但是必须为应用程序启用通知设置。
是否有另一种方法可以直接从设备发送日期到设备？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T01:44:04.953

一种选择是通过 GameKit 使用蓝牙通信。这是使用该方法的简单聊天应用程序的代码。该示例已有几年历史，但仍然相关：

[http://www.devx.com/wireless/Article/43502](http://www.devx.com/wireless/Article/43502)

# c++ - set::end++ 的值是多少？

> ID：16125474
> 
> 赞同：0
> 
> 时间：2013-04-20T21:41:07.720
> 
> 标签：c++, stl

首先，我`set::lower_bound`用来查找一些东西，然后我需要在两个方向上检查该值的一些邻居。我的代码最终进入无限循环，我认为这可能是由于之后的奇怪行为：

```
idx = set.lower_bound(val);
++idx;
while(idx != set.end() && /*...*/)
{
  /*...*/
  idx++;
} 
```

让我们假设 lower_bound 返回`set::end`。我想在增加`set::end`一些奇怪的事情之后发生了，while 循环进入了通往星星的漫长旅程:) 但我不确定和好奇。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-20T21:42:12.883

递增结束迭代器是未定义的行为。不要这样做。

# c# - 尝试为 TileMap 游戏引擎找到存储和加载信息的最有效方式

> ID：16125477
> 
> 赞同：0
> 
> 时间：2013-04-20T21:41:14.503
> 
> 标签：c#, xna-4.0

我一直在尝试编写一个 Tilemap 引擎，它使用一组 Tile 类来存储信息。这些 Tile 类存储 8 条信息（所有数字），包括纹理索引和工件索引，但是在保存和加载这些数组时可能需要很长时间，尤其是加载可能需要几分钟才能加载更大尺寸的数组，例如 100x100。我目前正在使用文本文件来保存信息，用空格分隔不同的 Tiles，并使用逗号分隔这些 Tiles 的不同信息，我使用 StreamReaders 和 StreamWriters 来读取这些信息。

```
 public void Load()
    {
        try
        {
            TextReader TR = new StreamReader("C:/Users/Cogythea/Documents/Programming TextFiles/TileMap.tilemap");
            TR.Close();

            StreamReader reader = new StreamReader("C:/Users/Cogythea/Documents/Programming TextFiles/TileMap.tilemap");
            List<string[]> stringLists = new List<string[]>();

            int arrayArea;

            int lineLength = 0;
            int arrayHeight = 0;

            int width;

            string line;
            while ((line = reader.ReadLine()) != null)
            {
                lineLength = line.Length;
                arrayHeight++;

                stringLists.Add(line.Split(' '));
            }

            arrayArea = lineLength * arrayHeight;

            for (int y = 0; y < lineLength; y++)
            {
                for (int x = 0; x < arrayHeight; x++)
                {
                    try
                    {
                        string currentLine = stringLists[x][y].ToString();

                        List<string[]> currentLineSections = new List<string[]>();
                        currentLineSections.Add(currentLine.Split(','));

                        Map[x, y].textureIndex = Convert.ToInt16(currentLineSections[0][0].ToString());
                        Map[x, y].accessoryIndex = Convert.ToInt16(currentLineSections[0][1].ToString());

                        if (currentLineSections[0][2].ToString() == "1")
                            Map[x, y].colliding = true;
                        else
                            Map[x, y].colliding = false;

                        if (currentLineSections[0][3].ToString() == "1")
                            Map[x, y].startLocation = true;
                        else
                            Map[x, y].startLocation = false;

                        if (currentLineSections[0][4].ToString() == "1")
                            Map[x, y].portal = true;
                        else
                            Map[x, y].portal = false;

                        if (currentLineSections[0][5].ToString() == "1")
                            Map[x, y].portalExit = true;
                        else
                            Map[x, y].portalExit = false;

                        Map[x, y].portalNumber = Convert.ToInt16(currentLineSections[0][6].ToString());

                        Map[x, y].portalDestination = new Vector2(Convert.ToInt16(currentLineSections[0][7].ToString()), Convert.ToInt16(currentLineSections[0][8].ToString()));

                    }
                    catch (Exception e)
                    {

                    }
                }
            }

            reader.Close();
        }

        catch (Exception)
        {
        }
    }

    public void Save()
    {
        try
        {
            TextReader TR = new StreamReader("C:/Users/Cogythea/Documents/Programming TextFiles/TileMap.tilemap");
            TR.Close();
        }

        catch (Exception)
        {
            FileStream create = File.Create("C:/Users/Cogythea/Documents/Programming TextFiles/TileMap.tilemap");
            create.Close();
        }

        StreamWriter writer = new StreamWriter("C:/Users/Cogythea/Documents/Programming TextFiles/TileMap.tilemap");
        for(int x = 0; x < Map.GetLength(0); x++)
        {
            for (int y = 0; y < Map.GetLength(1); y++)
            {
                writer.Write(Map[x, y].textureIndex.ToString() + ",");
                writer.Write(Map[x, y].accessoryIndex.ToString() + ",");

                if(Map[x,y].colliding)
                    writer.Write("1,");
                else
                    writer.Write("0,");

                if (Map[x, y].startLocation)
                    writer.Write("1,");
                else
                    writer.Write("0,");

                if (Map[x, y].portal)
                    writer.Write("1,");
                else
                    writer.Write("0,");

                if (Map[x, y].portalExit)
                    writer.Write("1,");
                else
                    writer.Write("0,");

                writer.Write(Map[x, y].portalNumber.ToString() + ",");

                writer.Write(Map[x, y].portalDestination.X.ToString() + ",");
                writer.Write(Map[x, y].portalDestination.Y.ToString() + ",");

                writer.Write(" ");
            }
            writer.WriteLine();
        }
        writer.Close();
    } 
```

我一直在互联网上寻找替代方法，我发现对用于存储信息的 XML 文件有压倒性的支持。现在，我有两个关于这个的问题。一，我一直在使用的代码教程（[http://msdn.microsoft.com/en-us/library/bb203924.aspx](http://msdn.microsoft.com/en-us/library/bb203924.aspx)）说要为 IAsyncResult 使用 StorageDevice，但是当我声明它时，Visual Studio 会带来两个问题之一：如果我不初始化它，它说它不存在（如你所料），但是当我初始化它时 -

```
 StorageDevice device = new StorageDevice(); 
```

我收到错误“'Microsoft.Xna.Framework.Storage.StorageDevice' 类型没有定义构造函数”，尽管它没有告诉我括号中需要任何东西，那么我该如何让它工作？对此的任何帮助将不胜感激。我的第二个问题是是否有任何其他替代方案，或者即使我的原始方法是正确的但需要改进。我在业余时间已经尝试解决这个问题两周了，所以我真的很感激任何帮助。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-29T00:36:33.233

对于 tilemap，我永远不会使用 XML 存储。围绕基本上是 2D 的东西，它有太多的“控制语法”。

一个简单的文本文件，每一行都是地图中的一行，二进制文件似乎更合乎逻辑甚至更好。

但是为了使其易于阅读和维护，您可以制作一个“解析器”来读取您的 XML 文件，将它们解析为您自己的二进制格式，然后将二进制输出保存为您自己的图块/地图格式。

然后你只需要一个“地图/瓦片加载器”来读取你的这个解析/压缩格式。

= 可维护性和速度。

大多数语言都是一样的，你用“人类可读的语言”编写它们，然后将它们编译成“汇编器/二进制操作码”。

# ipython - IPython 启动 ipclusters

> ID：16125478
> 
> 赞同：1
> 
> 时间：2013-04-20T21:41:26.017
> 
> 标签：ipython

我正在使用这个令人惊叹的 IPython 笔记本。我现在对并行计算非常感兴趣，并希望将 MPI 与 IPython（和 MPI4py）一起使用。但我无法启动集群

ipcluster 启动 -n 4

在 Windows7 上。我刚回来“无法创建进程”。如果我使用笔记本并在“集群”寄存器中启动一个集群，那么一切正常。但是使用 cmd （即使具有管理员权限）我只会收到此消息。与使用 MPI (MPICH2) 的所有尝试相同。所有路径变量都已设置。也许这个问题根本与Python无关......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-24T06:54:01.183

I can't say anything about IPython's parallel features, but if you're having problems with MPI in Windows in general, I would offer these suggestions. I've had quite a few issues in the past in trying to get MPI working in Windows. The most convenient method for me in the past has been to use an OpenMPI Windows binary [http://www.open-mpi.org/software/ompi/v1.6/](http://www.open-mpi.org/software/ompi/v1.6/). These are now only available in previous releases. And even then, you might have to try more than one before you find one that works. I don't know why, but the latest didn't work on my machine. The release before that one did, however. After this, you have to call mpicc and mpiexec from the Microsoft Visual Studio Command Prompt or it won't work (without a lot of other stuff).

After you have verified that MPI is working, you can try installing mpi4py separately and see if that works. In my experience, sometimes this has worked fine and sometimes I've had to wrestle with configurations. You might just try your luck with an unofficial, prepackaged binary (for example, [http://www.lfd.uci.edu/~gohlke/pythonlibs/](http://www.lfd.uci.edu/~gohlke/pythonlibs/)).

Hope this helps!

# php - 尝试循环通过两个 $_POST 数组但没有成功

> ID：16125479
> 
> 赞同：1
> 
> 时间：2013-04-20T21:41:26.773
> 
> 标签：php, mysql, loops

以下是我的表单，其中我有两个不同的 $_POST 数组，“ids”和“quantities”。我正在尝试遍历它们，以便更新数据库列。

我的表格：

```
<form action="" method="post">
            <ul>
<?php       foreach($rows as $row) { ?>
                <li>
                    <input type="hidden" name="ids[]" value="<?php echo $row['id']; ?>">
                </li>
                <li>
                    <input type="text" name="quantities[]" value="1" size="3">
                    <?php echo $row['title']; ?>
                </li>   
<?php       } ?>
                <li>
                    <br><input type="submit" value="Submit New Release Edits" name="submit">
                </li>
            </ul>
            </form> 
```

为了正确更新数据库，我尝试运行的代码是：

```
if(isset($_POST['submit'])) {
        foreach($_POST['quantities'] as $quantity) {
            foreach($_POST['ids'] as $id) {
                $stmt = $db->prepare("UPDATE titles SET release_quant=:release_quant WHERE id=:id");
                $stmt->bindValue(':release_quant', $quantity, PDO::PARAM_INT);
                $stmt->bindValue(':id', $id, PDO::PARAM_INT);
                $stmt->execute();
            }
        }
    } 
```

我知道代码不正确，因为它不会同时遍历数量和 id 数组。我需要如何调整我的代码？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-20T21:44:37.380

**试试这个：（**通过直接访问替换了第二个循环，所以你只得到想要的 ID）

```
$i = 0;
if(isset($_POST['submit'])) {
        foreach($_POST['quantities'] as $quantity) {
                $id = $_POST['ids'][$i];
                $stmt = $db->prepare("UPDATE titles SET release_quant=:release_quant WHERE id=:id");
                $stmt->bindValue(':release_quant', $quantity, PDO::PARAM_INT);
                $stmt->bindValue(':id', $id, PDO::PARAM_INT);
                $stmt->execute();
                $i++;
        }
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-20T21:46:27.147

由于您想同时遍历 2 个数组，因此最好在索引上使用常规 for 循环而不是 foreach 循环：

```
if(isset($_POST['submit'])) {
    $count = count($_POST['quantities']);
    for($i = 0; $i < $count; $i++) {
        $stmt = $db->prepare("UPDATE titles SET release_quant=:release_quant WHERE id=:id");
        $stmt->bindValue(':release_quant', $_POST['quantities'][$i], PDO::PARAM_INT);
        $stmt->bindValue(':id', $_POST['ids'][$i], PDO::PARAM_INT);
        $stmt->execute();
    }
} 
```

# c++ - 使用勾股定理的碰撞检测不可靠？

> ID：16125489
> 
> 赞同：1
> 
> 时间：2013-04-20T21:42:09.127
> 
> 标签：c++, physics

物体可以经常互相穿过吗？此外，在计算动量时，有时精灵会在碰撞时形成斑点，一起移动而不是反弹。

该代码确实适用于大多数碰撞，但它经常失败。有任何想法吗？

xV = X 速度。yV = Y 速度。每一帧，这个速度值都被添加到四边形的 X 和 Y 位置。

```
bool Quad::IsTouching(Quad &q)
{
    float distance = 0;
    float combinedRadius = (size/2) + (q.GetSize()/2);

    distance = sqrt(pow(q.GetX() - GetX(), 2) + pow(q.GetY() - GetY(), 2));

    if(distance < combinedRadius)
    {
        return true;
    }

    return false;
}

void Quad::Collide(Quad &q)
{
    float mX, mY, mX2, mY2, mXTmp, mYTmp;

    mX = mass * xV;
    mY = mass * yV;
    mXTmp = mX;
    mYTmp = mY;

    mX2 = q.GetMass() * q.GetxV();
    mY2 = q.GetMass() * q.GetyV();

    mX = mX2;
    mY = mY2;

    mX2 = mXTmp;
    mY2 = mYTmp;

    xV = mX/mass;
    yV = mY/mass;

    q.SetxV(mX2/q.GetMass());
    q.SetyV(mY2/q.GetMass());
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T21:50:29.823

你指的是什么类型的碰撞？有弹性还是无弹性？对于弹性碰撞，代码会失败，您必须创建一个附加属性来防止两个对象在接触时粘在一起。您还必须使用循环或 if 语句确保如果一个对象与另一个对象同时穿过另一个对象的位置，则两者将以与碰撞速度成比例的角度分开。使用适当的物理公式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-21T08:24:08.917

我有[同样的问题](https://stackoverflow.com/questions/15837065/how-to-avoid-particles-glitching-together-in-an-elastic-particle-collision-simul)，[这](http://www.youtube.com/watch?v=wN8u-ERVaww)是我制作的一个快速视频来演示这个问题。

解决这个问题的方法是计算碰撞的确切时间，因此粒子将以新的速度移动迭代/时间步长的剩余时间。为此，您必须在更新位置之前检查是否会发生碰撞，因此：`sqrt((x1 - x2 + dt * (vx1 - vx2))^2 + (y1 - y2 + dt * (vy1 - vy2))^2) <= distance`。

您也许还可以采用更简单的解决方案，在该解决方案中稍微移动两个对象，以使它们不再发生碰撞。这会导致创建者不准确，但确实需要更少的计算：

```
dx = x1 - x2;
dy = y1 - y2;
d = sqrt(dx^2 + dy^2);
D = r1 + r2;
if(d < D)
{
    s = (d - D) / (2 * d);
    x1 = x1 + s * dx;
    x2 = x2 - s * dx;
    y1 = y1 + s * dy;
    y2 = y2 - s * dy;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-20T22:44:38.437

作为一个推断的、潜在的问题（没有提供速度、尺寸等的值，所以我不能肯定地说），你没有考虑到四边形*完全*接触。即，`distance == combinedRadius`。因此，如果为真，则检查失败，然后对象继续在下一个滴答声中移动……彼此穿过。

将您的支票更改为`distance <= combinedRadius`. 此外，您可能只是获得了隧道效应，因为对象足够小并且移动速度足够快，以至于它们在每个滴答声中都相互穿过。有多种方法可以解决这个问题，其中一些是：施加最大速度和最小尺寸；提高物理检查的帧速率；使用连续碰撞检查与离散检查：[请参阅有关主题的维基百科文章](http://en.wikipedia.org/wiki/Discrete_collision_detection#A_posteriori_.28discrete.29_versus_a_priori_.28continuous.29)

# applescript - 无法将处理程序参数传递给代码。新手

> ID：16125491
> 
> 赞同：1
> 
> 时间：2013-04-20T21:42:12.027
> 
> 标签：applescript

背景：我正在尝试使用其 AllShare 功能将呼叫者信息从电话应用程序 (Phone Amego) 传递到我的三星电视。为此，我必须发送带有呼叫者信息的肥皂消息。Phone Amego 提供了一种将applescript 分配给呼叫事件的简单方法。但是，我没有任何编程经验！

到目前为止，我已经成功地制作了一个脚本，它可以读取肥皂消息，更新必填字段并将其发送到我的电视。完美，至少结果，代码可能不完美，但它可以工作。这是代码。

```
set callerID_string to "John Doe : 1-917-123-4567"
set AppleScript's text item delimiters to {":"}
set pieces to text items of callerID_string
set callerID_name to item 1 of pieces
set callerID_number to item 2 of pieces
set AppleScript's text item delimiters to {""}

set myDate to do shell script "date '+%d.%m.%Y'"
set myTime to do shell script "date '+%T'"
set total_Length to (length of callerID_name) + (length of callerID_number) + 780
set search_strings to {"Content-Length: 796", "2013-01-01", "00:00:00", "Mike", "777-777-7777"}
set replace_strings to {"Content-Length:" & total_Length, myDate, myTime, callerID_name, callerID_number}

tell application "Finder"
set theFile to alias "Macintosh HD:Users:Marc:Desktop:IncCallMBsTemplate.txt"
open for access theFile
set fileRef to open for access (theFile as alias)
set fileContents to (read fileRef)
close access theFile
end tell

set the clipboard to fileContents

repeat with i from 1 to (count search_strings)
set the_string to the clipboard
set the_string to my snr(the_string, item i of search_strings, item i of replace_strings)
end repeat

on snr(the_string, search_string, replace_string)
tell (a reference to my text item delimiters)
    set {old_atid, contents} to {contents, search_string}
    set {the_string, contents} to {the_string's text items, replace_string}
    set {the_string, contents} to {"" & the_string, old_atid}
end tell
set the clipboard to the_string

-- Create a file handler for the file to write to.

set myFile to (open for access alias "Macintosh HD:Users:Marc:Desktop:Test.txt" with write permission)
try
    -- Delete current contents of the file
    set eof myFile to 0
    -- Write to file
    write the_string to myFile as «class utf8»
end try
-- Close the file
close access myFile
end snr

set cmd to "/Usr/bin/nc 10.0.1.7 52235 < /Users/Marc/Desktop/Test.txt"
do shell script cmd 
```

问题：在上面的脚本中，我为变量 callerID_string 设置了一个值，但我应该通过处理程序 call_from(callerID_string) 从 Phone Amego 获取它。但是无论我尝试什么，我都无法将该 callerID_string 传递给我的代码。它由来电者姓名和电话号码两部分组成。代码应该像这样开始：

```
on call_from(callerID_string) 
```

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T15:50:06.590

我假设您的脚本同时与其他应用程序一起运行，并且它需要该处理程序，因此需要进行一些重新设计，以便我们可以将（前主）代码作为子例程调用。

我不确定我是否正确理解了这种情况，但无论如何：

我添加了 on`call_from...`处理程序，它将其余代码作为子例程 ( `myAction`) 调用。

代码中的第一个注释行可以取消注释并用于测试运行它`AppleScript Editor`。不再需要时删除该行。

`testFilePath`是一个属性并且全局可见。此外，我更改了硬编码的文件路径内容，以便它找到桌面的路径。

```
property testFilePath : ""

-- my myAction("John Doe : 1-917-123-4567")

on call_from(callerID_string)

    my myAction(callerID_string)

end call_from

on myAction(CIS)

    if CIS is "" then
        tell me to activate
        display dialog "Caller ID is empty." buttons {"Quit"} default button 1 with icon 0
        return
    end if

    set pathToDesktop to (path to desktop) as text
    set testFilePath to pathToDesktop & "Test.txt"

    set callerID_string to CIS -- "John Doe : 1-917-123-4567"

    set lastTextItemDelimeter to AppleScript's text item delimiters
    set AppleScript's text item delimiters to {" : "}

    set pieces to text items of callerID_string
    set callerID_name to item 1 of pieces
    set callerID_number to item 2 of pieces

    set AppleScript's text item delimiters to {""} -- or lastTextItemDelimeter if you want to change it back to last

    set myDate to do shell script "date '+%d.%m.%Y'"
    set myTime to do shell script "date '+%T'"
    set total_Length to (length of callerID_name) + (length of callerID_number) + 780
    set search_strings to {"Content-Length: 796", "2013-01-01", "00:00:00", "Mike", "777-777-7777"}
    set replace_strings to {"Content-Length:" & total_Length, myDate, myTime, callerID_name, callerID_number}

    set templateFile to pathToDesktop & "IncCallMBsTemplate.txt"

    tell application "Finder"
        set theFile to templateFile as alias -- Macintosh HD:Users:Marc:Desktop:IncCallMBsTemplate.txt"
        open for access theFile
        set fileRef to open for access (theFile as alias)
        set fileContents to (read fileRef)
        close access theFile
    end tell

    set the clipboard to fileContents

    repeat with i from 1 to (count search_strings)
        set the_string to the clipboard
        set the_string to my snr(the_string, item i of search_strings, item i of replace_strings)
    end repeat

    set cmd to "/usr/bin/nc 10.0.1.7 52235 < " & quoted form of (POSIX path of testFilePath)
    do shell script cmd

end myAction

on snr(the_string, search_string, replace_string)

    tell (a reference to my text item delimiters)
        set {old_atid, contents} to {contents, search_string}
        set {the_string, contents} to {the_string's text items, replace_string}
        set {the_string, contents} to {"" & the_string, old_atid}
    end tell

    set the clipboard to the_string

    -- Create a file handler for the file to write to.
    set myFile to (open for access (testFilePath as alias) with write permission)

    try
        -- Delete current contents of the file
        set eof myFile to 0
        -- Write to file
        write the_string to myFile as «class utf8»
    on error the error_message number the error_number
        -- display dialog "Error: " & the error_number & ". " & the error_message buttons {"Cancel"} default button 1
        log "Error: " & the error_number & ". " & the error_message
    end try

    -- Close the file
    close access myFile
end snr 
```

# command-prompt - 如何在 Zsh 提示符中显示电池状态

> ID：16125498
> 
> 赞同：8
> 
> 时间：2013-04-20T21:42:54.407
> 
> 标签：command-prompt, zsh

我认为答案是不言自明的。

我一直在寻找已经做到这一点的软件，但我没有任何运气。它要么不是在 Zsh 中完成，要么是用于另一个应用程序，例如 tmux。重点是我没找到。

所以我的问题是，是否已经有一个预制的脚本有人这样做了？如果有，能否请您分享一个链接。

如果没有，我应该如何制作这个脚本？我是 Zsh 脚本的新手，所以请记住这一点。

这个想法是它输出一些类似的东西`67%`。你明白了。;)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-26T02:29:29.340

[另一个答案](https://stackoverflow.com/a/16129404/1084945)在Mac OS X 上不起作用（否`apci`）。

我在提示中使用了一些[Steve Losh 的 zsh](http://stevelosh.com/blog/2010/02/my-extravagant-zsh-prompt/#my-right-prompt-battery-capacity)提示。这并不完全是您所追求的 - 箭头`▸▸▸▸▸▸▸▸▸▸`显示当前的电池状态，并在电池电量不足时改变颜色。此方法使用 Python 脚本，为了完整起见，我将在下面添加。这是我的提示的屏幕截图：

![我的 zsh 提示符](https://i.stack.imgur.com/KyhOl.png)

[在 Reddit](http://www.reddit.com/r/osxterminal/comments/1aum9n/show_your_battery_percentage_and_charging_status/)上展示了 OS X 的另一种方法，使用另一个简短的脚本：

```
ioreg -n AppleSmartBattery -r | awk '$1~/Capacity/{c[$1]=$3} END{OFMT="%.2f%%"; max=c["\"MaxCapacity\""]; print (max>0? 100*c["\"CurrentCapacity\""]/max: "?")}'
ioreg -n AppleSmartBattery -r | awk '$1~/ExternalConnected/{gsub("Yes", "+");gsub("No", "%"); print substr($0, length, 1)}' 
```

假设此脚本保存在`~/bin/battery.sh`：

```
function battery {
    ~/bin/battery.sh
}
setopt promptsubst
PROMPT='$(battery) $' 
```

看起来像这样：

![基于 Reddit 的电池充电。](https://i.stack.imgur.com/cdLl4.png)

* * *

要使用 Steve Losh 的脚本，请将脚本保存在某个地方，然后在`battery()`上面的函数中使用它。

### OS X 的电池充电 Python 脚本

```
#!/usr/bin/env python
# coding=UTF-8

import math, subprocess

p = subprocess.Popen(["ioreg", "-rc", "AppleSmartBattery"], stdout=subprocess.PIPE)
output = p.communicate()[0]

o_max = [l for l in output.splitlines() if 'MaxCapacity' in l][0]
o_cur = [l for l in output.splitlines() if 'CurrentCapacity' in l][0]

b_max = float(o_max.rpartition('=')[-1].strip())
b_cur = float(o_cur.rpartition('=')[-1].strip())

charge = b_cur / b_max
charge_threshold = int(math.ceil(10 * charge))

# Output

total_slots, slots = 10, []
filled = int(math.ceil(charge_threshold * (total_slots / 10.0))) * u'▸'
empty = (total_slots - len(filled)) * u'▹'

out = (filled + empty).encode('utf-8')
import sys

color_green = '%{[32m%}'
color_yellow = '%{[1;33m%}'
color_red = '%{[31m%}'
color_reset = '%{[00m%}'
color_out = (
    color_green if len(filled) > 6
    else color_yellow if len(filled) > 4
    else color_red
)

out = color_out + out + color_reset
sys.stdout.write(out) 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-04-21T08:45:28.240

一个非常简单的解决方案：

```
setopt promptsubst
PROMPT='$(acpi | grep -o "[0-9]*%)% ' 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2016-01-21T00:41:40.017

即使这个线程很老，我想我也在这里发布我的版本：

[我使用了steve losh 的](http://stevelosh.com/blog/2010/02/my-extravagant-zsh-prompt/)电池提示的基本概念，但首先将其更改为不使用 python 而是使用 shell，这要快得多，并且还更改了我的 arch linux 发行版的电池路径。此外，如果我的笔记本电脑正在充电，我在最后添加了一个绿色粗体“+”： [![这就是我的提示与电池状态的外观](https://i.stack.imgur.com/Q5mGh.jpg)](https://i.stack.imgur.com/Q5mGh.jpg)

我的电池功能如下：

```
 function battery_charge {
      b_now=$(cat /sys/class/power_supply/BAT1/energy_now)
      b_full=$(cat /sys/class/power_supply/BAT1/energy_full)
      b_status=$(cat /sys/class/power_supply/BAT1/status)
      # I am displaying 10 chars -> charge is in {0..9}
      charge=$(expr $(expr $b_now \* 10) / $b_full)

      # choose the color according the charge or if we are charging then always green
      if [[ charge -gt 5 || "Charging" == $b_status ]]; then
        echo -n "%{$fg[green]%}"
      elif [[ charge -gt 2 ]]; then
        echo -n "%{$fg[yellow]%}"
      else
        echo -n "%{$fg[red]%}"
      fi

      # display charge * '▸' and (10 - charge) * '▹'
      i=0;
      while [[ i -lt $charge ]]
      do
        i=$(expr $i + 1)
        echo -n "▸&quot;
      done
      while [[ i -lt 10 ]]
      do
        i=$(expr $i + 1)
        echo -n "▹&quot;
      done

      # display a plus if we are charging
      if [[ "Charging" == $b_status ]]; then
        echo -n "%{$fg_bold[green]%} +"
      fi
      # and reset the color
      echo -n "%{$reset_color%} "
    } 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-12-01T02:45:34.367

这是一个带颜色的版本，用 ZSH 编写。

在您的 .zshrc 文件中

```
function battery {
    batprompt.sh
}
setopt promptsubst
PROMPT='$(battery) >' 
```

这是一个 batprompt.sh 用于 linux 的脚本。您可以适应其他读取电池数据的方式或适应较早帖子中的 acpi 版本：

```
#!/bin/zsh
# BATDIR is the folder with your battery characteristics
BATDIR="/sys/class/power_supply/BAT0"
max=`cat $BATDIR/charge_full`
current=`cat $BATDIR/charge_now`
percent=$(( 100 * $current / $max ))

color_green="%{^[[32m%}"
color_yellow="%{^[[34m%}"
color_red="%{^[[31m%}"
color_reset="%{^[[00m%}"

if [ $percent -ge 80 ] ; then
    color=$color_green;
elif [ $percent -ge 40 ] ; then
    color=$color_yellow;
else
    color=$color_red;
fi
echo $color$percent$color_reset 
```

请注意，您在颜色定义中看到的 ^[ 是转义字符。如果剪切和粘贴不能正常工作，您需要将 ^[ 转换为转义字符。在 VI/Vim 中，您可以删除字符，然后插入 control-v，然后按 Escape 键。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2018-07-25T20:59:54.650

这对我的 Mac 有帮助，

```
pmset -g batt | grep -Eo "\d+%" | cut -d% -f1 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-11-12T11:30:00.513

Zsh 有一个自 2011 年以来称为的内置插件[`battery`](https://github.com/ohmyzsh/ohmyzsh/blob/master/plugins/battery/battery.plugin.zsh)，它允许显示电池状态。为了激活插件，`~/.zshrc`在您喜欢的文本编辑器中打开并添加`battery`到插件设置：

```
plugins=(git battery) 
```

保存更改并重新加载 Zsh 会话：

```
source ~/.zshrc 
```

列出的插件现在处于活动状态。

# sql - 序列上的无效数字

> ID：16125499
> 
> 赞同：0
> 
> 时间：2013-04-20T21:43:04.297
> 
> 标签：sql, oracle

当我为 table 创建一个序列时`article`，它从 17 而不是 1 开始

```
CREATE SEQUENCE seq_article START WITH 1 INCREMENT BY 1;

CREATE OR REPLACE TRIGGER auto_article BEFORE insert ON article
FOR EACH ROW
BEGIN
  SELECT seq_article.NEXTVAL INTO :NEW.id_article FROM dual;
END;
/ 
```

我试图删除所有行并创建其他数据，这次它是从 19 开始的。我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T21:47:06.197

我不确定我是否理解这个问题。

*   序列生成唯一值。除非您将序列设置为`CYCLE`并且超出`MAXVALUE`（考虑到您发布的定义实际上不可能）或者您手动[重置序列](https://stackoverflow.com/questions/51470/how-do-i-reset-a-sequence-in-oracle)（例如，通过将序列设置`INCREMENT BY`为 -16，获取 a `nextval`，然后将`INCREMENT BY`返回设置为 1），否则它赢了永远不要产生`1`第二次的价值。`id_article`删除数据对将要生成的下一个数据没有影响。
*   序列生成的列将有间隙。无论是因为序列缓存从共享池中老化还是因为事务回滚，并不是每个值都会最终出现在表中。如果您确实需要无间隙值，则不能使用序列。当然，这意味着您必须序列化`INSERT`操作，这将大大降低应用程序的可伸缩性。

# node.js - 使用 node.js + express + jQuery 将所有 URL 指向单个网页

> ID：16125502
> 
> 赞同：0
> 
> 时间：2013-04-20T21:43:59.530
> 
> 标签：node.js, express

我刚刚开始尝试使用 node & express，并尝试使用 Ajax 将各种 HTML 文件的内容加载到单个网页中。

我希望地址栏中显示的 URL 反映我服务器上的实际文件结构；因此，例如，当用户单击带有 的链接时`href="posts/thePost.html"`，我没有实际进入该页面，而是使用`click()`、`preventDefault()`和 Ajax 将内容加载到 div 中，然后`pushState()`使`window.onpopstate`地址栏显示文件的相对路径。我不想使用哈希 ( `#`) 符号或查询 ( `?=`) 或类似的东西，我想要普通的 URL。

这很好用，但是当我刷新页面时，显示位于 URL (ie `posts/thePost.html`) 的文件而不是`index.html`加载的内容。有没有办法使用节点来解决这个问题，也许是通过拦截请求并显示内容来`index.html`代替？我试图搜索这个，但没有任何运气。

抱歉，如果这听起来令人困惑。简而言之，我正在寻找的行为是，**无论刷新页面时地址栏显示什么 URL，`index.html`都应该提供服务**。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T23:11:02.350

这很容易做到：

```
function serveIndex(req, res) {
    return res.sendfile('index.html');
}
app.get('*', serveIndex);
app.head('*', serveIndex); 
```

您可能希望将其放在其他路线之后，以免最终破坏它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-02-25T06:59:37.820

```
var routes = require('./routes/index'); 
app.use('/',routes); 
app.use('/index',routes);

function serveIndex(req, res) {
 res.redirect('/');
}
app.get('*', serveIndex); 
```

# libreoffice - LibreOffice Calc：如何将无格式文本转换为数字（或其他格式）

> ID：16125504
> 
> 赞同：9
> 
> 时间：2013-04-20T21:44:35.593
> 
> 标签：libreoffice

如何将未格式化的文本（例如 csv 或制表符分隔）粘贴到 LibreOffice Calc 中，然后将其格式化为数字（无需手动编辑每个单元格）。当我粘贴下面的文本时，它会在所有内容前面添加一个 '，所以如果我尝试将其转换为数字，它仍然是文本。

```
Text 0.01% 3% 5.1%
Asdf 0.2% 4% 6.0% 
```

因此，例如，如果我将特殊的内容粘贴为带有空格分隔符的无格式文本，然后将 0.01% 转换为数字（如果它符合我的要求，则它会说 0.0001），现在它会在单元格中显示“0.01%”。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2014-09-10T11:40:43.350

用前导单引号替换单元格：`' (U+0027)`

按`CTRL`+ `H`» `Click More options`» `Check Regular expressions`。

搜索`^.*$`并替换为`&`

这有点像 RegEx 引擎黑客。它在单元格开始之前搜索所有内容并将其替换为现有的单元格内容 - 但没有单引号。如果您想了解更多信息，请查看[后面的参考。](https://help.libreoffice.org/Common/List_of_Regular_Expressions)

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-04-24T18:49:36.440

此过程在 LibreOffice 4.0.2 中进行了测试。粘贴为无格式文本，然后选择以下选项：

*   选择英语作为语言，或使用句点作为小数分隔符的其他语言。
*   选择“检测特殊号码”。

现在百分比将被粘贴为数字而不是文本，您可以使用格式选项以您喜欢的方式显示它们。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-12-20T14:49:21.297

我插入一个包含函数的列`CNUM()`并引用文本值。然后复制特殊粘贴：只有数字。然后压制旧列。

# python - 数据验证：在选择正确的输入之前，如何让我的程序发出错误？

> ID：16125507
> 
> 赞同：0
> 
> 时间：2013-04-20T21:44:39.687
> 
> 标签：python, validation

```
print "Welcome to aa47's Voice Mail Message Program!"
print "You are currently using a"+ " " + platform.system()+ " Operating System"
g = raw_input("What gender would you prefer Male or Female? (Please press m or f)") 
```

# 我相信我需要创建一个循环，但我不确定如何

```
if g == "m":
    print "You have chosen the Gender Male"
elif g == "f":
    print "You have chosen the Gender Female"
else:
    print "You have entered an invalid choice"
    print "Program restarting"
    execfile ("my python project.py") 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T21:53:39.897

你可能想把它包装在一个循环中

```
valid_gender = False
while not valid_gender:
    g = raw_input("What gender would you prefer Male or Female? (Please press m or f)")
    if g == "m":
        print "You have chosen the Gender Male"
        valid_gender=True
    elif g == "f":
        print "You have chosen the Gender Female"
        valid_gender = True
    else:
        print "You have entered an invalid choice" 
```

# javascript - 如果输入框中的值为 x，则使用 javascript 显示一条消息

> ID：16125509
> 
> 赞同：-1
> 
> 时间：2013-04-20T21:44:47.030
> 
> 标签：javascript, jquery

我有一个输入框（微调器）

```
div id="site_content">
        <div id="content">
            <h:body>

                <h:form> 
                    <p:spinner id="minutes" min="0" max="1000" value="#{printerSettings.t}"  size ="1">
                        <p:ajax update="NewTime"/>
                    </p:spinner>
                    <p:commandButton  type="submit" action="#{email.mail(printerSettings.t, printerSettings.p, printerSettings.paperSize, printerSettings.duplex, printerSettings.orienation, printerSettings.printer)}" onclick="Thankyou()" value="Print" />

                </h:form>
            </h:body>
        </div>
    </div> 
```

在提交时，我想知道是否有可能，如果用户输入 1001 来显示错误消息，这背后有验证，但我想向用户展示这个

可以使用 javascript 或查询来完成，但我不知道从哪里开始，对这些语言完全陌生，

有没有人有任何关于如何实现这一目标的示例/链接？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T21:47:23.250

```
$('form').submit(function() {
    var minuteVal = $('#minutes').val();
    if(minuteVal > 1000 || minuteVal < 0) {
        alert(minuteVal);
    }
}); 
```

# django - django & jquery mobile - 测试我正在构建的内容

> ID：16125511
> 
> 赞同：1
> 
> 时间：2013-04-20T21:44:51.220
> 
> 标签：django, jquery-mobile

我正在构建一个带有 django 后端和 jquery 移动前端的应用程序。我试图弄清楚如何查看我正在构建的内容。我的意思是，迄今为止，当我构建我的 Web 应用程序（由 django 驱动的常规网站）时，我都在本地完成并使用 django 测试服务器 ( `python manage.py runserver`) 来测试我正在构建的内容，并在`127.0.0.1:8000/`.

如果我正在为我们的 iPhone 构建应用程序，我如何在测试时在手机上查看我的网络应用程序？如果我启动 django 测试服务器，我可以在笔记本电脑上导航到我的应用程序，它看起来像一个应用程序。但是，我想打开手机的网络浏览器来查看相同的应用页面。

在我的笔记本电脑上我导航到：`127.0.0.1:8000/m/`并且我假设在我的 iPhone 上我会导航到我的笔记本电脑的 IP 地址，所以：`192.168.1.103:8000/m/`

我想我在概念上遗漏了一些东西......有什么想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-20T22:08:00.403

尝试

```
python manage.py runserver 0.0.0.0:8000 
```

通过使用 0.0.0.0，您将能够将文件提供给外部计算机和您的 iphone

# c# - 在 C# 和 MySQL 中使用 DataGridView

> ID：16125513
> 
> 赞同：0
> 
> 时间：2013-04-20T21:45:09.943
> 
> 标签：c#, mysql, winforms, datagridview, combobox

一个完整的菜鸟在这里说话。我有一个与 MySQL 交互的 C# 接口。我的问题是我想显示一个 DataGridView，但我想更改列的内容。我想用代码更容易理解。

```
private void CargaEstados()
    {
        conexion.Open();
        txtNomMun.Focus();
        try
        {
            DataSet ds = new DataSet();
            MySqlDataAdapter da = new MySqlDataAdapter("SELECT cveestado, nombre FROM tbestados", conexion);
            da.Fill(ds, "FillDropDown");
            cbEstado.DisplayMember = "Nombre";
            cbEstado.ValueMember = "CveEstado";
            cbEstado.DataSource = ds.Tables["FillDropDown"];
            conexion.Close();
        }
        catch (Exception ex)
        {
            MessageBox.Show(ex.Message, Application.ProductName, MessageBoxButtons.OK, MessageBoxIcon.Error);
        }
    }

    private void CargaDataGridView()
    {
        conexion.Open();
        try
        {
            cmd.CommandText = "select cvemunicipio, nombre, cveEstado from tbMunicipios";
            rd = cmd.ExecuteReader();
            while (rd.Read())
            {
                this.dataGridView1.Rows.Add(rd.GetValue(0), rd.GetValue(1), rd.GetValue(2));
            }
            conexion.Close();
        }
        catch (Exception ex)
        {
            MessageBox.Show(ex.Message, Application.ProductName, MessageBoxButtons.OK, MessageBoxIcon.Error);
        }
    } 
```

在 CargaEstados() 中，我在 Combobox (cbEstado) 中显示名称 (nombre)，但我获得了 id (cveestado) {如下所示}。

```
"insert into tbmunicipios (nombre, cveestado) values ('" + txtNomMun.Text + "', '" + cbEstado.SelectedValue.ToString() + "')"; 
```

在 DataGridView 中，我想相反，使用 id，我想显示名称，但我不知道该怎么做。

我的 SQL 表是：

```
Create DataBase CatalogoMun;
use CatalogoMun;
Create table tbEstados
(
   CveEstado int not null,
   Nombre varchar (45) not null,
   Constraint pkCveEstado Primary Key (CveEstado)
)Engine=Innodb;
Create table tbMunicipios
(
    CveMunicipio int not null AUTO_INCREMENT,
    Nombre varchar (45) not null,
    CveEstado int not null,
    Constraint pkCveMunicipio Primary Key (CveMunicipio),
    Constraint fkCVeEdo Foreign Key (CveEstado) references tbEstados (CveEstado)
)Engine=Innodb; 
```

例如，如果我在 tbMunicipios 中有 (1, Villahermosa, 27)，我想显示 (1, Villahermosa, Tabasco)。

感谢：D

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T21:54:30.913

这可以通过[SQL 连接来完成](http://www.w3schools.com/sql/sql_join.asp)

该声明将如下所示：

```
cmd.CommandText = "SELECT m.cvemunicipio, m.nombre AS NombreA, e.nombre AS NombreB FROM tbMuncipios m INNER JOIN tbEstados e ON m.CveEstado = e.CveEstado"; 
```

# command-line - 显示文件内容

> ID：16125520
> 
> 赞同：1
> 
> 时间：2013-04-20T21:45:52.343
> 
> 标签：command-line, batch-file

我正在尝试在批处理文件中显示完整的文本文件，但是当我这样做时，它会打开记事本。

```
@echo off
call YourText.txt
pause >nul
exit 
```

我也试过

```
@echo off
more < YourText.txt
pause >nul
exit 
```

带双引号和不带双引号。但是，它不起作用。然后，当我在没有它的情况下这样做时`@echo off`，它会将每一行显示为：

```
C:\Documents and Settings\Gebruiker\Mijn documenten\others\Bureaublad YourTextline 1
C:\Documents and Settings\Gebruiker\Mijn documenten\others\Bureaublad YourTextline 2 
```

我已经尝试了该`set /f`命令，但没有任何运气。有人知道如何通过批处理文件导入全文文件吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-20T22:02:00.743

您正在寻找[`type`](http://technet.microsoft.com/en-us/library/cc732507%28v=ws.10%29.aspx)：

```
type YourFile.txt 
```

如果您希望它在充满文本的屏幕之间暂停，请结合[`more`](http://technet.microsoft.com/en-us/library/cc733118%28v=ws.10%29.aspx)使用管道`|`运算符：

```
type YourFile.txt | more 
```

或使用`more`直接从文本文件或通过重定向获取输入（第一个示例由@MatthewStrawbridge 在他的评论中提供）：

```
more YourFile.txt 
```

或者

```
more < YourFile.txt 
```

# php - 如何检查 id 是否已经存在 - codeigniter

> ID：16125524
> 
> 赞同：7
> 
> 时间：2013-04-20T21:46:11.990
> 
> 标签：php, codeigniter

我正在尝试检查数据库中的 id 是否已经存在，如果不存在则只插入该 id 而不是其他存在的

我试图做一个 where 语句来检查它们是否是数据库中存在的 id 但即使它们是新信息它也不会将其插入数据库

我很迷失在这里任何指导将不胜感激

ps 我不想更新一行我想插入一个不存在的新更新的行

```
$this->db->where('id',$id);
$q = $this->db->get('testing');

if($q)
{
    //Do nothing
}
else
{

    $this->db->set('id', $id);
    $this->db->set('message', $message);
    $query= $this->db->insert('testing');

} 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-21T00:44:43.637

模型

```
<?php
class Fruits_model extends CI_Model
{
    function __construct()
    {
        parent::__construct();
        $this->load->database();
    }

    function check()
    {
        $query = null; //emptying in case 

        $id   = $_POST['id']; //getting from post value
        $name = $_POST['name'];

        $query = $this->db->get_where('fruits', array(//making selection
            'id' => $id
        ));

        $count = $query->num_rows(); //counting result from query

        if ($count === 0) {
            $data = array(
                'name' => $name,
                'id' => $id
            );
            $this->db->insert('fruits', $data);
        }
    }
}

?> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-20T23:04:29.367

您的代码存在需要修复的逻辑问题。

在您的代码中，您将查询的结果保存为`$q = $this->db->get('testing')`，并且`$q`无论您返回的行数如何，都将始终评估为 true。

您需要检查使用的行数，`$query->num_rows() > 0`然后其余代码将按预期运行。

有关详细信息，请参阅：[http ://ellislab.com/codeigniter/user-guide/database/results.html](http://ellislab.com/codeigniter/user-guide/database/results.html)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-20T22:38:34.037

```
$ql = $this->db->select('id')->from('testing')->where('id',$id)->get();

if( $ql->num_rows() > 0 ) {} else {
    $a = array('id' => $id, 'message' => $message);
    $this->db->insert('testing', $a);
} 
```

这应该这样做。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-20T22:24:20.503

您需要在 MYSQL 表中选择要检查的 id 的 id，然后计算行数。如果行数为 0，则 id 不存在。

```
 $query = mysql_query("SELECT * FROM     your_table WHERE id='$id'");
     $count = mysql_num_rows($query);
     If($count!=0){
     // id exists
     } else {
     // id doesn't exist
     } 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-04-20T22:35:41.810

通常“id”字段设置为**auto_increment**并设置唯一且不可重复的**主要字段。**所以不存在担心存在的问题。

但是，就您而言，我认为您没有将其用作“独特领域”。

让我给你举个例子。

在这里，我有一个表名“水果”

```
++++++++++++++++++++++++++++++++++++
ငfruit_id  | int (primary)
name      | text 
id        |  int
++++++++++++++++++++++++++++++++++++++ 
```

在你的模型中

```
function checkId($id)
{
   $query=$this->db->get_where('fruits',array('id'=>$id)); //check if 'id' field is existed or not

   if($query!=null)  // id found stop
   {
     return FALSE; 
   }
   else // id not found continue..
   {
       $data = array(
             'fruit_id' => $fruit_id ,
              'name' => $name ,
             'id' => $id
        );    
      $this->db->insert('fruits', $data);          
   }    
} 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2019-10-11T15:50:01.337

你应该这样尝试：

```
public function record_exists(){
   $exists = $this->db->get_where('table_name', array('id' => $id));
   if($exists->num_rows() > 0 ){
       echo "Some message";
       return false;
   }else{
      // Insert your data into the database...
   }
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-07-11T05:00:33.547

对于检查 Id 或数据库中不存在的任何列值 CI 有一个验证规则。

在这里看到它：`[Validation Rule](https://www.codeigniter.com/userguide3/libraries/form_validation.html#rule-reference)`

规则：`is_unique`

如果表单元素对于参数中的表和字段名称不是唯一的，则返回 FALSE。注意：此规则需要启用查询生成器才能工作。

例子：`is_unique[table.field]`

```
$this->form_validation->set_rules(
        'username', 'Username',
        'required|min_length[5]|max_length[12]|is_unique[users.username]',
        array(
                'required'      => 'You have not provided %s.',
                'is_unique'     => 'This %s already exists.'
        )
); 
```

为了更高级地使用验证，您可以使用数组添加所有验证设置规则。

```
 $this->form_validation->set_rules(
            'username', 'Username',
            'required|min_length[5]|max_length[12]|is_unique[users.username]',
            array(
                    'required'      => 'You have not provided %s.',
                    'is_unique'     => 'This %s already exists.'
            )
    );

    $config = array(
        'your_rule_name' => array(
                array(
                        'username', 'Username',
                        'required|min_length[5]|max_length[12]|is_unique[users.username]',
                        array(
                                'required'      => 'You have not provided %s.',
                                'is_unique'     => 'This %s already exists.'
                        )
                )
        ),        
        array(
                'field' => 'email',
                'label' => 'Email',
                'rules' => 'required'
        )
);

$this->form_validation->set_rules($config); 
```

# node.js - 顺序运行 Firebase 事务的策略（NodeJS 客户端）

> ID：16125527
> 
> 赞同：0
> 
> 时间：2013-04-20T21:46:36.853
> 
> 标签：node.js, firebase

这是使用 NodeJS 客户端按顺序运行相互依赖的 Firebase 事务的“正确”方式吗：

```
ref.child('relationships/main').child(accountID).transaction(function(data) {
    return r;
}, function(error, committed, snapshot) {
        if (error) {}
        else if (!committed) {}
        else {
            runNextTransaction();
        }
    }); 
```

最初我打算将 runNextTransaction() 放在核心函数中，因为事务首先在本地运行，但是这样会不会在链中的最后一个事务完成之前保持打开原始事务，可能会导致问题？（另外我需要为下一步提供良好的数据，所以我必须在继续之前处理碰撞。）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-21T20:58:15.293

事务是异步运行的，因此从第一个事务中启动下一个事务是可行的，但它可能无法达到您想要的效果。事务函数可以运行多次，在这种情况下您可能不希望启动多个辅助事务。您所拥有的看起来像是进行串行交易的正确方法。如果您有兴趣让事情变得更简洁，特别是如果您要链接多个交易，请考虑研究 Promises。

# c++ - XCODE 4.6 C++模板函数，函数指针作为模板类中的参数

> ID：16125529
> 
> 赞同：0
> 
> 时间：2013-04-20T21:46:39.903
> 
> 标签：c++, xcode, templates, pointers, arguments

我已经为此苦苦挣扎了大约半天，似乎至少 XCode 4.6 有一个错误，其中模板类的某些声明会违反语言并允许将 const 数据从类内传递到外部函数，参数被定义为没有常量修饰符。

下面的示例将编译，即使 Tcaller::call() 方法的严格模板声明指定作为引用传递的 const 参数，但静态 cmp 函数提供无用的 *const & 修饰符。

```
template< typename T> struct Tcalled
{
    // !!!error - this prototype doesn't protect the data passed to function
    // because it should be declared with const modifiers but it wouldn't compile then.
    // SEE: Below my NOTE for correct function prototype.
        static bool cmp(const Tcalled*& item, const int& key) //<- correct but doesn't work
        static bool cmp(Tcalled* const & item, const int& key) //<- invalid but works!!
        {
            return (item->index = key); /// error - we modify const object here !
        }

    T index;
};

template < typename T> struct Tcaller
{
    Tcaller(){}

    template < typename K, bool (*compare)(const T& item, const K& key) >
    bool call(int k) const { return compare(data, k); }

    T       data;

};

int main(int argc, char *argv[])
{
    const Tcaller<Tcalled<int>* > tmp;  // <- const data
    int k = 1;

    tmp.call<int,Tcalled<int>::cmp>(k);  //call here WILL modify const data !!

} 
```

问题是：我如何强制 XCode 遵守规则并允许我为我的静态函数创建原型，因为它是为模板参数声明的？至于现在，这些是我在正确声明静态方法时得到的 XCode 错误：

没有匹配的成员函数调用“调用”候选模板被忽略：模板参数“比较”的显式指定参数无效

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-20T21:53:03.273

大概你的意思是当参数被声明为`Tcalled<T>* const & item`并且 body`cmp`应该使用`==`not时它可以工作`=`。

您对模板参数的实例化方式存在误解。这不仅仅是模板参数的复制粘贴替换。您期望用as`const T&`实例化时将等效于; 也就是说，“对指向 const 的指针的引用。`T``Tcalled<int>*``const Tcalled<int>*&``Tcalled<int>`

但是，这是错误的，`const`适用于整个`T`类型。所以真的，在实例化之后，`const T&`就相当于`Tcalled<int>* const&`. 这就是为什么将参数声明为`Tcalled* const & item`可以正常工作的原因。

为了使它与 as 声明一起工作，`const Tcalled<T>*& item`必须改变一些事情：

1.  `call`函数模板参数应该这样定义：

    ```
    template < int (*compare)(T& item) > 
    ```

    也就是说，函数指针类型采用 a `T&`，而不是 a `const T&`。这是有道理的，因为`cmp`函数根本不引用`const`对象（它引用非`const`指针）。

2.  该`call`功能不应该是`const`：

    ```
    int call() { return compare(data); } 
    ```

    这是因为它将其成员传递`T`给比较，这是对非`const`对象的引用（指针本身不是`const`）。如果它是一个`const`函数，它就不能这样做，因为它不能保证`compare`不会修改对象。

3.  `Tcaller`必须用`T`as实例化`const Tcalled<int>*`：

    ```
    Tcaller<const Tcalled<int>* > tmp; 
    ```

# dynamic - 参数传递方法

> ID：16125530
> 
> 赞同：0
> 
> 时间：2013-04-20T21:46:48.887
> 
> 标签：dynamic, language-agnostic, static, parameter-passing

我需要在考试前弄清楚一些事情。你能帮我回答下面的问题吗？如果我弄错了，我想修复它并学习真正的答案。

谢谢！！！

```
int x = 1; 
int foo (int a) { return a + bar (x) + x; } 
int bar (int b) { b++; return b * x; } 
int main () { int x = 2; foo(x);  } 
```

以下情况的输出是什么：

**a) 静态作用域和按值传递。**

5 :: foo->2 * bar (x) + x-> 2 + [2 (b) * 1 (global x)] + 1 (global x)

**b) 静态范围通过引用传递。**

8 :: foo->2 * bar (x) + x-> 2 + [2 (b) * 2 (全局 x 改变)] + 2 (全局 x 改变)

**c) 静态范围按值结果传递。**

8 :: foo->2 * bar (x) + x-> 2 + [2 (b) * 2 (全局 x 改变)] + 2 (全局 x 改变)

**d) 动态范围和值传递。**

10 :: foo->2 * bar (x) + x-> 2 + [3 (b 是来自 main 的 x，即 2，我们将其添加 1) * 2 (foo x from main)] + 2 (foo x from主要的）

**e) 动态范围和通过引用传递。**

15 :: foo->2 * bar (x) + x-> 2 + [3 (b 是来自 main 的 x，它是 2，我们添加它 1) * 3 (来自 main 的 foo x，因为它被 b 别名也增加了）] + 3（来自 main 的 foo x）

# linux - 制作一个 USB 视频采集卡驱动程序

> ID：16125533
> 
> 赞同：0
> 
> 时间：2013-04-20T21:47:21.233
> 
> 标签：linux, video, usb, driver

我在 ebay 上买了一个 USB 视频采集器，但我没有收到官方设备，它是假的，这是唯一一个不受 Linux 支持的假货。我想编写linux驱动程序，但我对驱动程序开发一无所知。我在哪里可以找到关于 Linux 上的驱动程序开发学习的教程？

该设备是easycap dc60++，标识为fushicai usbtv007。更多细节在这里： http: [//linuxtv.org/wiki/index.php/Easycap#Known_Easycap_devices](http://linuxtv.org/wiki/index.php/Easycap#Known_Easycap_devices)

它适用于win7，因此我可以轻松嗅探usb协议。

提前谢谢你

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-11T13:45:02.300

我已经为相关设备制作了驱动程序（[https://lkml.org/lkml/2013/6/10/381](https://lkml.org/lkml/2013/6/10/381)）。有很大的改进空间，如果你能参与进来，我会很高兴的。

以下文档很有帮助：

*   Linux 设备驱动程序，第三版，书籍。
    *   PDF： http: [//lwn.net/Kernel/LDD3/](http://lwn.net/Kernel/LDD3/)
    *   电子版：http : [//v3.sk/~lkundrak/ldd3/](http://v3.sk/~lkundrak/ldd3/)
*   Video4Linux2 API： http: [//lwn.net/Articles/203924/](http://lwn.net/Articles/203924/)
*   Videobuf2 API：[http ://lwn.net/Articles/447435/](http://lwn.net/Articles/447435/)

当谈到一个很好的例子时，请查看驱动程序/媒体/usb 树，尤其是 stk1160 驱动程序。

我还没有看过 Federico Ruiz 为该设备提供的 libusb 驱动程序，但似乎他对硬件的理解与我所做的大致相同。不过，我建议您看一下，我当然会这样做。

此外，linux-media list 可能是提出此类问题的更好地方。我来到这里主要是偶然的，而且名单上肯定有更多有能力的人。

祝你有美好的一天！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-14T22:32:36.267

我为此设备制作了一个实验性的用户空间驱动程序：

[https://github.com/memeruiz/usbtv007](https://github.com/memeruiz/usbtv007)

希望有人（或我）能接受它并为它制作一个合适的内核驱动程序。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-20T23:44:24.653

恕我直言，学习如何为内核开发驱动程序的最佳方法是采用与您想要的类似的现有驱动程序（最好是来自主线），然后看看他们是如何做到的。有关功能参考，请前往您最喜欢的[LXR 网站](http://lxr.free-electrons.com/)并进行搜索。

您可以在 Google 上查找 Linux 驱动程序开发并找到一些教程，但除了入门之外，我不推荐使用它，因为它们可能已过时或使用过时的内核 API。

否则，如果您不想进入内核驱动程序开发的世界，总会有[libusb 。](http://www.libusb.org/)

祝你好运。

# .htaccess - 多个参数的多个重写条件

> ID：16125539
> 
> 赞同：2
> 
> 时间：2013-04-20T21:48:28.700
> 
> 标签：.htaccess, redirect, seo

我的设置中的 htaccess 重写条件存在问题。

目前我有以下代码。

> ```
>  Options +FollowSymLinks 
>    RewriteEngine on 
>    RewriteCond %{REQUEST_FILENAME}\.php -f 
>    RewriteCond %{REQUEST_FILENAME} !-d 
>    RewriteRule ^(.*)$ http://mydom.com/$1.php 
> ```

这适用于任何使它们看起来像这样的基本页面。

> ```
>  http://mydom.com/page 
> ```

我还想做的是从 url 添加参数（如果存在）。我有一些页面会是这样的。

> ```
>  http://mydom.com/page?param=1&secondParam=2 
> ```

我试图做的是添加这个。

> ```
>  RewriteCond %{REQUEST_FILENAME} !-d
> 
>    RewriteRule ^(.*)/(.*)/(.*)$ http://mydom/$1/$2/$3 [L]
>    RewriteRule ^(.*)/(.*)$ http://mydom/$1/$2 [L] 
> ```

这对我来说很有意义，因为我认为如果条件不匹配，它会继续前进，但这给了我一个内部服务器错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T02:10:08.520

我最终做的是为每个可能有多个参数的页面设置一个单独的规则。

> RewriteCond %{REQUEST_FILENAME}.php -f
> 
> RewriteCond %{REQUEST_FILENAME} !-d
> 
> RewriteRule ^page /(.)/(.)$ [http://mydom.com/page.php?param=](http://mydom.com/page.php?param=) $1&secondParam= $ 2 [L *]*
> 
> RewriteRule ^page/(.*)$ [http://mydom.com/page.php?param=](http://mydom.com/page.php?param=) $1 [L]
> 
> RewriteRule ^(.*)$ [http://mydom.com/](http://mydom.com/) $1.php

这可行，但是您需要记住您网站中可能拥有的相关链接，例如样式表和 javascript 文件。就我而言，我必须用完整的站点路径替换所有相对路径，具体取决于您设置站点的方式，替换可能需要一段时间。

# java - Tic Tac Toe Java 程序 - CPU 没有响应

> ID：16125540
> 
> 赞同：0
> 
> 时间：2013-04-20T21:48:36.557
> 
> 标签：java, cpu

我已经在这个程序上工作了几个星期，向小程序添加组件以输出简单的井字游戏。我已经得到了一些工作，但是到目前为止，当你运行时，它所做的只是你点击它一次，CPU在左上角投射它的标记，然后你可以点击其他任何地方，它会自动说你赢了。我无法让 CPU 继续播放。我不希望任何人告诉我该怎么做，但我只是对我需要采用哪种方法来让 CPU 做出响应感到困惑。我的教授留下了一些非常有用的伪代码，但我还是不太明白。我一直在使用“gameEnd”方法，检查水平、垂直和对角线的获胜者，看看这是否是让游戏继续超过两个分数的原因，但它不起作用。有人有什么建议吗？谢谢。

```
import java.awt.Color;
import java.awt.Event;
import java.awt.Font;
import java.awt.Graphics;
import java.util.Random;

public class TicTacToe extends java.applet.Applet {

    // Ignore this constant
    private static final long serialVersionUID = 1942709821640345256L;

    // You can change this boolean constant to control debugging log output
    private static final boolean DEBUGGING = false;

    // Constants

    // Size of one side of the board in pixels
    private static final int BOARD_SIZE_PIXELS = 600;
    // Number of squares on one side of the board
    private static final int SQUARES = 3;
    // Diameter of the circle drawn in each square
    private static final int CIRCLE_WIDTH = 90;

    // Colors to be used in the game
    private static final Color BACKGROUND_COLOR = Color.WHITE;
    private static final Color SQUARE_BORDER_COLOR = Color.BLACK;
    private static final Color GAME_OVER_MESSAGE_COLOR = Color.BLACK;
    private static final Color HUMAN_COLOR = Color.RED;
    private static final Color HUMAN_WINNING_COLOR = Color.MAGENTA;
    private static final Color CPU_COLOR = Color.BLUE;
    private static final Color CPU_WINNING_COLOR = Color.CYAN;

    // Status constant values for the game board
    private static final int EMPTY = 0;
    private static final int HUMAN = 1;
    private static final int HUMAN_WINNING = 2;
    private static final int CPU = -1;
    private static final int CPU_WINNING = -2;

    // String displayed when the game ends
    private static final String GAME_WIN_MESSAGE = "You win! Click to play again.";
    private static final String GAME_LOSE_MESSAGE = "You lose......Click to play again.";
    private static final String GAME_DRAW_MESSAGE = "No one wins? Click to play again...";

    // Instance variables that control the game

    // Whether or not the user just clicked the mouse
    private boolean mouseClicked = false;
    // Whether or not to start the game again
    private boolean restart = false;
    // Whether or not the CPU should start playing a move.
    // USED ONLY WHEN THE CPU PLAYS FIRST!
    private boolean onFirstMove = false;
    // The column and row of the SQUARE the user clicked on
    private int xMouseSquare; // column
    private int yMouseSquare; // row
    // The width (and height) of a single game square
    private int squareWidth = BOARD_SIZE_PIXELS / SQUARES;
    // An array to hold square status values on the board.
    // The status values can be EMPTY, HUMAN, CPU or other values
    private int[][] gameBoard;
    // The column and row of the SQUARE the CPU player will move on
    private int xCPUMove;
    private int yCPUMove;

    // Add the rest of your instance variables here, if you need any. (You won't
    // need to, but you may if you want to.)

    // Ignore these instance variables

    // CPUinMove represents if the CPU is thinking (generating the CPU move).
    // If it is true, it means the CPUMove() method is running and no new move
    // should be added
    private boolean CPUinMove;

    // Methods that you need to write:

    /*
     * Pre: x and y are x-coordinate and y-coordinate where the user just
     * clicks. squareWidth is the width (and height) of a single game square.
     * 
     * Post: xMouseSquare and yMouseSquare are set to be the column and row
     * where the user just clicked on (depending on x and y).
     * 
     * Hint: You need only two statements in this method.
     */
    // Setting MouseSquare equal to x and y divided by the Square Width to create a location for
    // the user after clicking
    private void setMouseSquare(int x, int y) {
        // 
        xMouseSquare = x/squareWidth;
        yMouseSquare = y/squareWidth;
    }

    /*
     * Pre: SQUARES is an int that holds the number of game squares along one
     * side of the game board. xSquare is an int such that 0 <= xSquare <
     * SQUARES. CIRCLE_WIDTH is an int that holds the diameter of the circle to
     * be drawn in the center of a square. squareWidth is an int that holds the
     * width and height in pixels of a single game square.
     * 
     * Post: Return the correct x-coordinate (in pixels) of the left side of the
     * circle centered in a square in the column xSquare.
     * 
     * Hint: This method should be very simple. What you need to do is to find
     * the right equation.
     */
    private int getIconDisplayXLocation(int xSquare) {

        // This line is an example of using DEBUGGING variable
        if (DEBUGGING) {
            System.out.println("The input that getIconDisplayXLocation() receives is: " + xSquare);
        }

        // equation that returns the correct variable in the column xSquare
        return squareWidth * xSquare + (squareWidth - CIRCLE_WIDTH)/2;
    }

    /*
     * Pre: SQUARES is an int that holds the number of game squares along one
     * side of the game board. ySquare is an int such that 0 <= ySquare <
     * SQUARES. CIRCLE_WIDTH is an int that holds the diameter of the circle to
     * be drawn in the center of a square. squareWidth is an int that holds the
     * width and height in pixels of a single game square.
     * 
     * Post: Return the correct y-coordinate (in pixels) of the top of the
     * circle centered in a square in the row ySquare.
     * 
     * Hint: This method should be very simple. What you need to do is to find
     * the right equation.
     */
    private int getIconDisplayYLocation(int ySquare) {
        // This line is an example of using DEBUGGING variable
        if (DEBUGGING) {
            System.out.println("The input that getIconDisplayYLocation() receives is: " + ySquare);
        }

        // equation that returns the correct variable in the column ySquare
        return squareWidth * ySquare + (squareWidth - CIRCLE_WIDTH)/2;
    }

    /*
     * The instance variable gameBoard will be created and initialized
     * 
     * Pre: SQUARES is set to an int. gameBoard is a 2-dimensional array type
     * variable that holds the status of current game board. Each value in the
     * array represents a square on the board
     * 
     * Post: gameBoard must be assigned a new 2-dimensional array. Every square
     * of gameBoard should be initialized to EMPTY.
     * 
     * Hint: A loop.
     */
    private void buildBoard() {
        // Setting the two methods equal to local variables, x and y
        int x = xMouseSquare;
        int y = yMouseSquare;
        // This line creates the gameBoard array. You must write several more
        // lines to initialize all its values to EMPTY
        // Write game board using the equation of three across and down for each column

        // Constructs a 3 by 3 array of integers for the board
        gameBoard = new int[3][3];
        // Initialize variables i and j, set equal to 0; this establishes a connection for loop
        for (x = 0; x < 3; x++) {
            for (y = 0; y < 3; y++) {
                gameBoard[x][y] = EMPTY;
            }
        }
    }

    /*
     * Returns whether the most recently clicked square is a legal choice in the
     * game.
     * 
     * Pre: gameBoard is a 2-dimensional array type variable that holds the
     * status of current game board. xSquare and ySquare represent the column
     * and row of the most recently clicked square.
     * 
     * Post: Returns true if and only if the square is a legal choice. If the
     * square is empty on current game board, it is legal and the method shall
     * return true; if it is taken by either human or CPU or it is not a square
     * on current board, it is illegal and the method shall return false.
     * 
     * Hint: Should be simple but think carefully to cover all cases.
     */
    private boolean legalSquare(int xSquare, int ySquare) {
        if (gameBoard[xSquare][ySquare] == EMPTY)
        return true;
     else return false; 
    }

    /*
     * Pre: gameBoard is an array that holds the current status of the game
     * board. xSquare and ySquare represent the column and row of the most
     * recently clicked square. player represent the current player (HUMAN or
     * CPU). This method is always called after checking legalSquare().
     * 
     * Post: Set the square as taken by current player on the game board if the
     * square is empty.
     * 
     * Hint: Very simple.
     */
    private void setMovePosition(int xSquare, int ySquare, int player) {
        player = HUMAN;
        player = CPU;
        this.xMouseSquare = xSquare;
        this.yMouseSquare = ySquare;
    }

    /*
     * Check if HUMAN or CPU wins the game.
     * 
     * Pre: gameBoard is an array to hold square status values on the board. The
     * status values can be EMPTY, HUMAN, CPU or other values.
     * 
     * Post: The method will return true if and only if a player wins the game.
     * Winning a game means there is at least one row, one column, or one
     * diagonal that is taken by the same player. The method does not need to
     * indicate who wins because if it is implemented correctly, the winner must
     * be the one who just made a move.
     * 
     * Hint: Complicated method. Use loops to shorten your code. Think about how
     * to represent "a player takes 3 squares in a row/column/diagonal".
     */

    private boolean gameEnd() {
        // Setting local variables
        int i = 0;
        int x = xMouseSquare;
        int y = yMouseSquare;
        int sw = squareWidth;
        int[][] g = gameBoard;
        // Checking for a winner

        // Checking columns
        for (y = 0; y < 3; y++) {
        for (x = 0; x < 3; x++) {
            i = g[x][y] + i;

        }
    }       
        {   

        // Checking rows
        for (x = 0; x < 3; x++) {
        for (y = 0; y < 3; y++) {
            i = g[x][y] + i;
            }
        }   
    }       

        // Checking first diagonal

        {

        for (x = 0; x < 3; x++) {
            g[x][x] = 3;

            }
        }

        for (x = 1; x < 3; x++) {
            g[x][x] = 3;

        }

        for (x = 2; x < 3; x++) {
            g[x][x] = 3;

        }

        // Checking second diagonal
        for (y = 0; y < 3; y++) {
            g[y][2 - y] = 3;    

        }

        for (y = 1; y < 3; y++) {
            g[y][2 - y] = 3;

        }

        for (y = 2; y < 3; y++) {
            g[y][2 - y] = 3;

        }

        return true;
    }

    /*
     * Check if the game ends as a draw.
     * 
     * Pre: gameBoard is an array to hold square status values on the board. The
     * status values can be EMPTY, HUMAN, CPU or other values. This method is
     * always called after gameEnd().
     * 
     * Post: The method will return true if and only if all squares on the game
     * board are taken by HUMAN or CPU players (no EMPTY squares left).
     * 
     * Hint: Should be simple. Use loops.
     */
    // Value of...

    private boolean gameDraw() {
        if (squareWidth == (3^2 - 1)) {
        }
    return true;
        }

    /*
     * Marks circles on the line on which a player wins.
     * 
     * Pre: g is Graphics object that is ready to draw on. HUMAN_WINNING_COLOR
     * and CPU_WINNING_COLOR are both Color objects that represent the color to
     * show when HUMAN/CPU wins. gameBoard is gameBoard is an array to hold
     * square status values on the board. The status values can be EMPTY, HUMAN,
     * CPU or other values.
     * 
     * Post: ALL the row(s)/column(s)/diagonal(s) on which a player wins will be
     * marked as the special color.
     * 
     * Hint: You must draw a new circle with the special color (to replace the
     * old circle) on the square if the square belongs to a winning
     * row/column/diagonal. You can change gameBoard because the board will be
     * reset after displaying the winning line. You can use helper methods
     * (existing ones or your own) to finish this method. Pay attention that
     * many functions in this method is similar to gameEnd(). You should think
     * about reusing code.
     * 
     * Hint2: This method is not necessary for the game logic. You don't have to
     * start it early. Start when you know everything else is correct.
     */

    private void markWinningLine(Graphics g) {
        // TODO
    }

    /*
     * Generates the next square where the CPU plays a move.
     * 
     * Pre: gameBoard is an array to hold square status values on
     * the board. The status values can be EMPTY, HUMAN, CPU or other values.
     * 
     * Post: Set xCPUMove and yCPUMove to represent the column and the row which
     * CPU plans to play a move on. The respective square MUST BE EMPTY! It will
     * cause a logical error if this method returns a square that is already
     * taken!
     * 
     * Hint: Don't start too early -- currently this method works (though
     * naively). Make sure that everything else works before touching this
     * method!
     */

    private void CPUMove() {
        // TODO
        // The following block gives a naive solution -- it finds the first
        // empty square and play a move on it. You can use this method to test
        // other methods in the beginning. However, you must replace this block
        // with your own algorithms eventually.

        for (int i = 0; i < 3; i++) {
            for (int j = 0; j < 3; j++) {
                if (gameBoard[i][j] == 0) {
                    xCPUMove = i;
                    yCPUMove = j;
                    return;
                }
            }
        }

    }

    /* Put any helper methods you wish to add here. */

    /* You will not need to change anything below this line. */

    /*
     * DO NOT change this method.
     * 
     * Set the game board to show a new, blank game.
     */
    private void wipeBoard(Graphics g) {
        g.setColor(BACKGROUND_COLOR);
        g.fillRect(0, 0, BOARD_SIZE_PIXELS, BOARD_SIZE_PIXELS);
    }

    /*
     * DO NOT change this method.
     * 
     * Displays a circle on g, of the given color, in the center of the given
     * square.
     */
    private void displayHit(Graphics g, Color color, int xSquare, int ySquare) {
        g.setColor(color);
        g.fillOval(getIconDisplayXLocation(xSquare),
                getIconDisplayYLocation(ySquare), CIRCLE_WIDTH, CIRCLE_WIDTH);
    }

    /*
     * DO NOT change this method.
     * 
     * This method handles mouse clicks. You will not need to call it.
     */
    @Override
    public boolean mouseDown(Event e, int xMouse, int yMouse) {
        if (isClickable()) {
            mouseClicked = true;
            setMouseSquare(xMouse, yMouse);
        }
        repaint();
        return true;
    }

    /*
     * DO NOT change this method.
     * 
     * This method handles drawing the board. You will not need to call it.
     */
    @Override
    public void update(Graphics g) {
        paint(g);
    }

    /*
     * DO NOT change this method.
     * 
     * Draws the border between game squares onto canvas. Also, draws the moves
     * that are already made.
     */
    private void displayGame(Graphics canvas) {
        canvas.setColor(SQUARE_BORDER_COLOR);
        for (int i = 0; i < BOARD_SIZE_PIXELS; i += squareWidth) {
            for (int j = 0; j < BOARD_SIZE_PIXELS; j += squareWidth) {
                canvas.drawRect(i, j, squareWidth, squareWidth);
            }
        }
        for (int i = 0; i < SQUARES; i++) {
            for (int j = 0; j < SQUARES; j++) {
                switch (gameBoard[i][j]) {
                case HUMAN:
                case HUMAN_WINNING:
                    displayHit(canvas, HUMAN_COLOR, i, j);
                    break;
                case CPU:
                case CPU_WINNING:
                    displayHit(canvas, CPU_COLOR, i, j);
                    break;
                default:
                    break;
                }
            }
        }
    }

    /*
     * DO NOT change this method.
     * 
     * This method relays information about the availability of mouse clicking
     * in the game. You will not need to call it.
     */
    private boolean isClickable() {
        return !CPUinMove;
    }

    /*
     * DO NOT change the contents this method.
     * 
     * If this method is changed to public void paint(Graphics canvas), it will
     * execute the program with the CPU-first order.
     * 
     * This method is like the "main" method (but for applets). You will not
     * need to call it. It contains most of the game logic.
     */
    // @Override
    public void paint(Graphics canvas) {
        displayGame(canvas);
        if (mouseClicked) {
            if (onFirstMove) {
                CPUMove();
                setMovePosition(xCPUMove, yCPUMove, CPU);
                displayHit(canvas, CPU_COLOR, xCPUMove, yCPUMove);
                onFirstMove = false;
            } else {
                if (restart) {
                    wipeBoard(canvas);
                    setUpGame();
                    repaint();
                } else if (legalSquare(xMouseSquare, yMouseSquare)) {
                    setMovePosition(xMouseSquare, yMouseSquare, HUMAN);
                    displayHit(canvas, HUMAN_COLOR, xMouseSquare, yMouseSquare);
                    if (gameEnd()) {
                        markWinningLine(canvas);
                        canvas.setFont(new Font("SansSerif", Font.PLAIN, 30));
                        canvas.setColor(GAME_OVER_MESSAGE_COLOR);
                        canvas.drawString(GAME_WIN_MESSAGE, squareWidth / 2,
                                squareWidth);
                        restart = true;
                    } else {
                        CPUinMove = true;
                        CPUMove();
                        setMovePosition(xCPUMove, yCPUMove, CPU);
                        displayHit(canvas, CPU_COLOR, xCPUMove, yCPUMove);
                        CPUinMove = false;
                        if (gameEnd()) {
                            markWinningLine(canvas);
                            canvas
                                    .setFont(new Font("SansSerif", Font.PLAIN,
                                            30));
                            canvas.setColor(GAME_OVER_MESSAGE_COLOR);
                            canvas.drawString(GAME_LOSE_MESSAGE,
                                    squareWidth / 2, squareWidth);
                            restart = true;
                        } else if (gameDraw()) {
                            canvas
                                    .setFont(new Font("SansSerif", Font.PLAIN,
                                            30));
                            canvas.setColor(GAME_OVER_MESSAGE_COLOR);
                            canvas.drawString(GAME_DRAW_MESSAGE,
                                    squareWidth / 2, squareWidth);
                            restart = true;
                        }
                    }
                }
            }
            mouseClicked = false;
        }
    }

    /*
     * DO NOT change this method.
     * 
     * This method is like the "main" method (but for applets). You will not
     * need to call it. It contains most of the game logic.
     */
    public void paint_game(Graphics canvas) {
        // display the current game board
        displayGame(canvas);

        // the following block will run every time the user clicks the mouse
        if (mouseClicked) { // when the user clicks the mouse
            // if the game is ready to start or to be restarted
            if (restart) {
                // clear the window and set up the game again
                wipeBoard(canvas);
                setUpGame();
                repaint();
            }
            // else, if the game is in play, check if the click is on a legal
            // square
            else if (legalSquare(xMouseSquare, yMouseSquare)) {
                // if the square is legal, mark the corresponding position as
                // taken by HUMAN
                setMovePosition(xMouseSquare, yMouseSquare, HUMAN);
                // display the new position with a HUMAN_COLOR circle
                displayHit(canvas, HUMAN_COLOR, xMouseSquare, yMouseSquare);
                // check if the game ends (if it is, HUMAN wins)
                if (gameEnd()) {
                    // if HUMAN wins, mark the winning line as a special color.
                    markWinningLine(canvas);
                    // display the human winning message
                    canvas.setFont(new Font("SansSerif", Font.PLAIN, 30));
                    canvas.setColor(GAME_OVER_MESSAGE_COLOR);
                    canvas.drawString(GAME_WIN_MESSAGE, squareWidth / 2,
                            squareWidth);
                    // mark the game as ready to restart
                    restart = true;
                } else if (gameDraw()) {
                    // if HUMAN doesn't win but the board is full, it is a draw
                    // display the draw message
                    canvas.setFont(new Font("SansSerif", Font.PLAIN, 30));
                    canvas.setColor(GAME_OVER_MESSAGE_COLOR);
                    canvas.drawString(GAME_DRAW_MESSAGE, squareWidth / 2,
                            squareWidth);
                    // mark the game as ready to restart
                    restart = true;
                } else {
                    // if HUMAN doesn't win and the board is not full, the CPU
                    // is ready to move
                    CPUinMove = true;
                    // calculates the next CPU move
                    CPUMove();
                    // mark the corresponding position as taken by CPU
                    setMovePosition(xCPUMove, yCPUMove, CPU);
                    // display the new position with a CPU_COLOR circle
                    displayHit(canvas, CPU_COLOR, xCPUMove, yCPUMove);
                    CPUinMove = false;
                    if (gameEnd()) {
                        // if CPU wins, mark the winning line as a special
                        // color.
                        markWinningLine(canvas);
                        // display the human losing message
                        canvas.setFont(new Font("SansSerif", Font.PLAIN, 30));
                        canvas.setColor(GAME_OVER_MESSAGE_COLOR);
                        canvas.drawString(GAME_LOSE_MESSAGE, squareWidth / 2,
                                squareWidth);
                        // mark the game as ready to restart
                        restart = true;
                    }
                    // else (if the game is not ended after the CPU move), the
                    // game is ready to get the next HUMAN move
                }
            }
            mouseClicked = false;
        }
    }

    /*
     * DO NOT change this method.
     * 
     * This method initializes the applet. You will not need to call it.
     */
    @Override
    public void init() {
        setSize(BOARD_SIZE_PIXELS, BOARD_SIZE_PIXELS);
        setBackground(BACKGROUND_COLOR);
        setUpGame();
    }

    /*
     * DO NOT change this method.
     * 
     * Creates a fresh game board and sets up the game state to get ready for a
     * new game.
     */
    private void setUpGame() {
        buildBoard();
        CPUinMove = false;
        restart = false;
        onFirstMove = true;
    }
} 
```

# session - 禁止帐户时有什么好的做法？

> ID：16125542
> 
> 赞同：1
> 
> 时间：2013-04-20T21:48:49.003
> 
> 标签：session, language-agnostic

假设用户在网站中被禁止，但他的会话仍然处于活动状态。阻止他执行被禁止用户不允许执行的操作的最佳方法是*什么*？

我想出的两个合理的解决方案是

*   在每个“主要”操作之前进行额外检查，例如在论坛中发帖，发送私人消息等，以确保他没有被禁止（检查数据库）

*   破坏他的会话

现在，后一种解决方案可以通过为 cookie 设置过期时间来完成，但这对于其他用户来说会很麻烦，因为他们必须重新登录。

其他选项是在脚本检查他是否被数据库禁​​止的会话中设置超时，然后如果他被禁止则销毁他的会话，但这似乎有点太多了。

处理这个问题的最佳方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-28T07:21:17.417

如果我理解您为设置 cookie 设置过期时间的意思，我建议您不要这样做。您希望控件位于服务器端 - 不要信任您的客户端；他们可以很容易地防止他们这边的 cookie 被破坏。

希望您使用的任何框架都可以删除与用户会话关联的服务器端数据，而不是使客户端的会话 ID 无效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-20T22:15:35.870

如果您的应用程序是面向对象的，您可以检查您的构造函数，如果用户被禁止，如果他是，取消他的会话/调用注销功能。

# string-matching - KMP失效函数计算

> ID：16125544
> 
> 赞同：5
> 
> 时间：2013-04-20T21:49:16.423
> 
> 标签：string-matching, knuth, knuth-morris-pratt

我的教授解决了kmp故障功能如下：

```
index  1 2 3 4 5 6 7 8 9
string a a b a a b a b b
ff     0 1 2 1 2 3 4 5 1 
```

从网上查到的其他文字，我发现可能是错的，我又回去跟他确认，他告诉我他完全正确。有人可以通过简单的逐步方式向我解释为什么他认为这是对还是错？谢谢

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-06-23T16:33:15.337

据我了解该算法，您的示例的故障函数应如下所示：

1 2 3 4 5 6 7 8 9
阿拉巴巴

0 1 0 1 2 3 4 0 0

f - 失败函数（根据定义，这是字符串的最长前缀的长度，也是后缀）

这是我如何逐步构建它的：

f(a) = 0（一个字母总是 = 0）

f(aa) = 1（一个字母'a'既是前缀又是后缀）

f(aab) = 0（没有相同的后缀和前缀：a != b, aa != ab）

f(aaba) = 1 （'a' 开头和结尾是一样的，但是如果你取 2 个字母，它们将不相等：aa != ba）

f(aabaa) = 2 （你可以取 'aa' 但不能再取了：aab != baa）

f(aabaab) = 3 (你可以取'aab')

f(aabaaba) = 4 (你可以取'aaba')

f(aabaabab) = 0 ( 'a' != 'b', 'aa' != 'ab' 等等，不可能是 = 5，所以 'aabaa' != 'aabab')

f(aabaabbabb) = 0（同样的情况）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2021-03-30T16:59:18.563

由于@user1041889 很困惑（也让我很困惑），我将在这里说明 Z 函数和故障函数之间的区别。

失效函数，`π[i]`：

> 是字符串最长前缀长度的映射和索引，也是后缀

但这可以说是中文，所以我会把它弄糊涂，以便真正理解我在说什么：

> 感兴趣的字符串开头的最长子字符串有多大，等于以 index 结尾的子字符串`i`

或等效地：

> `i`与感兴趣的字符串的开头匹配的以 index 结尾的最大子字符串的长度是多少

所以在你的例子中：

```
index  1 2 3 4 5 6 7 8 9
string a a b a a b a b b
ff     0 1 0 1 2 3 4 0 0 
```

我们观察到`π[6] = 3`，那么以索引 6 结尾且长度为 3 的子字符串是什么？`aab`！

有趣的是我们以前是怎么看到的！

让我们检查一下它确实是最大的一个：`baab != aab`. 是的！

注意这意味着失效函数总是均匀增长。

Z 算法并非如此。

[正在保存草稿，稍后继续]

# html - 向 $_GET 添加附加值并保持旧值

> ID：16125547
> 
> 赞同：0
> 
> 时间：2013-04-20T21:49:37.103
> 
> 标签：html, get

假设我有类似网站`mydomain.com/test.php?pikazi=true` 并且有表单

```
 <form action="test.php"  method="get">
    <input name="drzava-asc" type="image" src="images/sort-asc.gif">
    <input name="drzava-desc" type="image" src="images/sort-desc.gif" >
  </form> 
```

如何在`prikazi=true`从表单添加新内容的同时保持现有状态

```
mydomain.com/test.php?pikazi=true&drzava-asc.x=6&drzava-asc.y=1 
```

drzava-asc 的值由脚本生成，因为它是图像而不是提交按钮。

我使用了现有的网址：

```
parse_str($_SERVER['QUERY_STRING'], $query_arr);
$url=http_build_query($query_arr); 
```

我可以将它用作隐藏字段，但不确定如何。还有其他方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T21:53:06.943

**编辑：**

您只需在表单中添加一个隐藏字段：

```
<form action="test.php"  method="get">
  <input name="prikazi" type="hidden" value="true" />
  <input name="drzava-asc" type="image" src="images/sort-asc.gif">
  <input name="drzava-desc" type="image" src="images/sort-desc.gif" >
</form> 
```

就是这样:) 干杯！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-20T21:54:46.790

你不能，不能直接。

如果您正在使用`POST`，您可以拥有`action=""`并且它将所有`GET`变量保留在那里。但是，您正在使用`GET`这样会覆盖它们。

如果您使用的是服务器端语言，例如 PHP，您可以这样做：

```
<form action="test.php" method="get">
    <?php foreach($_GET as $k=>$v) echo "<input type=\"hidden\" name=\"".$k."\" value=\"".htmlspecialchars($v)."\" />"; ?>
    Rest of form here...
</form> 
```

或 JavaScript 中的类似内容：

```
var forms = document.getElementsByTagName('form'), l = forms.length, i,
    qs = location.search.substr(1).split("&"), m = qs.length, j, tmp, inp;
for( i=0; i<l; i++) {
  if( forms[i].method.toLowerCase() != "get") continue;
  for( j=0; j<m; j++) {
    inp = document.createElement('input');
    inp.type = "hidden";
    tmp = qs[j].split("=");
    inp.name = tmp.shift();
    inp.value = tmp.join("=");
    forms[i].appendChild(inp);
} 
```

# java - 如何使用 AspectJ 捕获所有新创建的类型或子类型 Widget 的对象？

> ID：16125549
> 
> 赞同：1
> 
> 时间：2013-04-20T21:50:08.240
> 
> 标签：java, aspectj

为了获得所有新实例化的小部件，我尝试了以下代码

```
after(final Widget widget) : execution (* Widget+.new(..)) && this(widget) {
    ...
} 
```

但是每次有链式构造函数（同一个类中的多个构造函数，相互引用）时，它都会失败。

我需要收集在应用程序中创建的所有类型的小部件。我不能使用`call`代替，`execution`因为这意味着编织代码将成为调用代码的一部分，而不是`Widget`代码的一部分，这很麻烦，因为这个项目涉及很多库，这会让我不得不编织所有这些都是为了完成所描述的努力。

谢谢

## 编辑（更多信息）

考虑以下类：

```
class A {
  private int i;

  public A(int i) {
    this.i = i;
    initialize();
  }

  public A() {
    this(0);
  }
}

after(final A a) : execution (* A+.new(..)) && this(a) {
  ...
}

//test
new A(0); //caught by the aspect and fine
new A(); //caught by the aspect twice, once for every constructor. 
```

如果考虑`A`s 的层次结构，情况会变得更糟：

```
class B extends A {
  public B() {
    super();
  }

  public B(int i) {
    super(i);
  }
}

//test
new B(0); //caught by the aspect twice, once as B and once as A
new A(); //caught by the aspect thrice, once for B and twice for A 
```

我只想捕获一次对象，并且只有在对象完全构造之后（也就是说，它已经将“外部”构造函数运行到最后），将方面代码注入到所考虑的类中而不是在它之外（所以 a`call`是不可接受的）。

我在 AspectJ 邮件列表中找到了关于此主题的另一个有趣的讨论：http: [//dev.eclipse.org/mhonarc/lists/aspectj-users/msg09651.html](http://dev.eclipse.org/mhonarc/lists/aspectj-users/msg09651.html)。它描述了一个可能的（如果我没记错的话是不完整的）解决方案，涉及某种堆栈分析。

## 编辑2

这个简单的hack似乎可以解决问题：

```
after(A a) : initialization(A+.new(..)) && this(a) {
    if (a.getClass() == thisJoinPoint.getSignature().getDeclaringType())
                //fully constructed object caught
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T20:51:11.573

在您的情况下，您应该能够使用初始化切入点。有关该切入点的更多信息，请参阅[AspectJ 文档](http://eclipse.org/aspectj/doc/released/progguide/quick.html)。本质上，您应该执行以下操作：

```
after(final A a) : initialization (* A+.new(..)) && this(a) {
  ...
} 
```

这里的好处是你可以很棘手并指定一个特定的构造函数。在以下情况下，仅匹配 1-arg 构造函数。0-arg 构造函数不是。

```
initialization (* A+.new(int)) 
```

# java - 覆盖对象的 toString 使 ListView 行不可点击？

> ID：16125550
> 
> 赞同：0
> 
> 时间：2013-04-20T21:50:08.940
> 
> 标签：java, android

我有一个奇怪的问题。我有一个带有 onItemClickListener 的简单 ListView。当我覆盖列表对象的 toString 时，它会正确显示，但点击停止工作。当我在 toString 中调用 super 时，点击工作正常。

来自 onCreate：

```
ListView listView = (ListView) findViewById(R.id.listview);
    SearchAdapter searchAdapter = new SearchAdapter(this, 0, 0, CalendarActivity.satellites);
    listView.setAdapter(new ArrayAdapter<Satellite>(this, R.layout.search_cell, R.id.name, CalendarActivity.satellites));
    listView.setOnItemClickListener(new OnItemClickListener() {

        @Override
        public void onItemClick(AdapterView<?> arg0, View arg1, int arg2, long arg3) {
            startActivity(new Intent(SearchActivity.this, DayActivity.class));
        }
    }); 
```

卫星：

```
public class Satellite {

public String url;
public boolean active;
public String name;
public int id;

public ArrayList<Date> dates;

@Override
public String toString() {
    if (!name.isEmpty()) { //note that this still fails the onClick
        return name;
    } else {
        return super.toString();
    }
} 
```

这是怎么回事？

# salesforce - 在自定义对象字段中显示商机相关联系人

> ID：16125553
> 
> 赞同：1
> 
> 时间：2013-04-20T21:50:18.677
> 
> 标签：salesforce, apex-code, soql

我有下一个问题。我有一个名为“应用程序”的自定义对象，我有这个要求：

“显示与应用程序相关的所有联系人。在应用程序对象上创建一个字段，必须是只读的”。

我用顶点代码解决它。“应用程序”查找机会，机会到客户，并且我所有的联系人都有 AccountId，所以这样，我在触发器中使用顶点代码获取所有联系人。

但是，我被要求将其更改为 Application 对象中的公式字段。所以，我的问题是下一个。我无法使用高级公式编辑器获得所有联系人，因为它们不是任何对象的一部分。我没有主从关系。

有谁知道我如何使用配置来实现这一点？我不应该为此请求使用顶点代码。提前感谢各位。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T06:57:12.993

我不认为你能做到。

在公式/合并字段语法中，没有办法“向上，向上然后向下”（应用程序 -> 机会 -> 帐户 -> 向下到联系人相关列表）。也没有什么可以让您循环浏览联系人（并显示什么？ID？姓名？电子邮件？）。粗略地说，你只能通过点上升。

您可能想探索“跨对象工作流”规则的路径，但我想当我向帐户添加新联系人时，它应该以某种方式“传播”到所有相关的应用程序？也没有直接的方法来触发删除工作流 - 所以你最终会得到不准确的列表。

我会说触发器是一个很好的解决方案。也许它没有优化，但如果它必须在一个领域 - 很难。

* * *

通过在应用程序页面布局中嵌入一个 visualforce 页面，可能有一种相当简单的方法来实现这一点。

这应该可以用纯 Visualforce 来实现（所以从技术上讲，不会有 Apex 代码；））

`<apex:relatedList list="Contacts" subject="Application__c.Opportunity__r.AccountId" />`

将是一个好的开始（如果您想要自己的布局而不是 rel. 列表 - 您应该仍然可以使用`<apex:repeat>`or来完成它`<apex:pageBlockTable>`。

这里有一个 BUT：它不是一个字段，只是一个展示技巧。忘记在报告、移动应用程序等中使用它。

另一种方式 - 与这些联系人一键点击是否可以接受？您可以制作报告“带有联系人的帐户”，按一个帐户的 ID 对其进行过滤，然后使用“URL hacking”根据您从哪个应用程序单击它来更改过滤器。此链接可以是公式字段或真正的自定义按钮/链接。从技术上讲 - 它是纯粹的配置，没有顶点和 VF。

[您可以在Ray Dehler 的优秀帖子](http://raydehler.com/cloud/clod/salesforce-url-hacking-to-prepopulate-fields-on-a-standard-page-layout.html)中阅读更多关于 URL hacking的信息，特别是关于动态报告[的](http://www.interactiveties.com/b_dynamic_report_part1.php)[信息](http://www.tgerm.com/2011/04/passing-params-to-reports-salesforce.html)。

# c# - 如何禁用 treeviewitem 背景颜色更改？

> ID：16125557
> 
> 赞同：1
> 
> 时间：2013-04-20T21:50:34.227
> 
> 标签：c#, wpf, treeview, treeviewitem, lost-focus

我有以下问题：我的 WPF 应用程序中有两个树视图控件，当我单击第一个树中的一个项目，然后单击第二个树中的一个项目时，第一个树中的项目会更改其背景颜色。我试图更改多触发器中的背景颜色

```
 <MultiTrigger.Conditions>
  <Condition Property="IsSelected" Value="true"/>
  <Condition Property="IsSelectionActive" Value="false"/>
 </MultiTrigger.Conditions> 
```

对于模板属性，但没有效果。如何禁用此行为？这是我的示例窗口代码（我没有在后面的代码中更改树视图控件）

```
<Window x:Class="StackOverflowTests.MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    Title="MainWindow" Height="350" Width="525">

<Window.Resources>
    <SolidColorBrush x:Key="ListBorder" Color="#828790"/>
    <Style x:Key="TreeViewStyle1" TargetType="{x:Type TreeView}">
        <Setter Property="Background" Value="{DynamicResource {x:Static SystemColors.WindowBrushKey}}"/>
        <Setter Property="BorderBrush" Value="{StaticResource ListBorder}"/>
        <Setter Property="BorderThickness" Value="1"/>
        <Setter Property="Padding" Value="1"/>
        <Setter Property="Foreground" Value="{DynamicResource {x:Static SystemColors.ControlTextBrushKey}}"/>
        <Setter Property="ScrollViewer.HorizontalScrollBarVisibility" Value="Auto"/>
        <Setter Property="ScrollViewer.VerticalScrollBarVisibility" Value="Auto"/>
        <Setter Property="ScrollViewer.PanningMode" Value="Both"/>
        <Setter Property="Stylus.IsFlicksEnabled" Value="False"/>
        <Setter Property="VerticalContentAlignment" Value="Center"/>
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="{x:Type TreeView}">
                    <Border x:Name="Bd" BorderBrush="{TemplateBinding BorderBrush}" BorderThickness="{TemplateBinding BorderThickness}" SnapsToDevicePixels="true">
                        <ScrollViewer x:Name="_tv_scrollviewer_" Background="{TemplateBinding Background}" CanContentScroll="false" Focusable="false" HorizontalScrollBarVisibility="{TemplateBinding ScrollViewer.HorizontalScrollBarVisibility}" Padding="{TemplateBinding Padding}" SnapsToDevicePixels="{TemplateBinding SnapsToDevicePixels}" VerticalScrollBarVisibility="{TemplateBinding ScrollViewer.VerticalScrollBarVisibility}">
                            <ItemsPresenter/>
                        </ScrollViewer>
                    </Border>
                    <ControlTemplate.Triggers>
                        <Trigger Property="IsEnabled" Value="false">
                            <Setter Property="Background" TargetName="Bd" Value="{DynamicResource {x:Static SystemColors.ControlBrushKey}}"/>
                        </Trigger>
                        <Trigger Property="VirtualizingPanel.IsVirtualizing" Value="true">
                            <Setter Property="CanContentScroll" TargetName="_tv_scrollviewer_" Value="true"/>
                        </Trigger>
                    </ControlTemplate.Triggers>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
        <Style.Triggers>
            <Trigger Property="VirtualizingPanel.IsVirtualizing" Value="true">
                <Setter Property="ItemsPanel">
                    <Setter.Value>
                        <ItemsPanelTemplate>
                            <VirtualizingStackPanel/>
                        </ItemsPanelTemplate>
                    </Setter.Value>
                </Setter>
            </Trigger>
        </Style.Triggers>
    </Style>
    <Style x:Key="TreeViewItemFocusVisual">
        <Setter Property="Control.Template">
            <Setter.Value>
                <ControlTemplate>
                    <Rectangle/>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>
    <SolidColorBrush x:Key="TreeViewItem.TreeArrow.Static.Checked.Fill" Color="#FF595959"/>
    <SolidColorBrush x:Key="TreeViewItem.TreeArrow.Static.Checked.Stroke" Color="#FF262626"/>
    <SolidColorBrush x:Key="TreeViewItem.TreeArrow.MouseOver.Stroke" Color="#FF1BBBFA"/>
    <SolidColorBrush x:Key="TreeViewItem.TreeArrow.MouseOver.Fill" Color="Transparent"/>
    <SolidColorBrush x:Key="TreeViewItem.TreeArrow.MouseOver.Checked.Stroke" Color="#FF262626"/>
    <SolidColorBrush x:Key="TreeViewItem.TreeArrow.MouseOver.Checked.Fill" Color="#FF595959"/>
    <PathGeometry x:Key="TreeArrow" Figures="M0,0 L0,6 L6,0 z"/>
    <SolidColorBrush x:Key="TreeViewItem.TreeArrow.Static.Fill" Color="Transparent"/>
    <SolidColorBrush x:Key="TreeViewItem.TreeArrow.Static.Stroke" Color="#FF989898"/>
    <Style x:Key="ExpandCollapseToggleStyle" TargetType="{x:Type ToggleButton}">
        <Setter Property="Focusable" Value="False"/>
        <Setter Property="Width" Value="16"/>
        <Setter Property="Height" Value="16"/>
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="{x:Type ToggleButton}">
                    <Border Background="Transparent" Height="16" Padding="5,5,5,5" Width="16">
                        <Path x:Name="ExpandPath" Data="{StaticResource TreeArrow}" Fill="{StaticResource TreeViewItem.TreeArrow.Static.Fill}" Stroke="{StaticResource TreeViewItem.TreeArrow.Static.Stroke}">
                            <Path.RenderTransform>
                                <RotateTransform Angle="135" CenterY="3" CenterX="3"/>
                            </Path.RenderTransform>
                        </Path>
                    </Border>
                    <ControlTemplate.Triggers>
                        <Trigger Property="IsChecked" Value="True">
                            <Setter Property="RenderTransform" TargetName="ExpandPath">
                                <Setter.Value>
                                    <RotateTransform Angle="180" CenterY="3" CenterX="3"/>
                                </Setter.Value>
                            </Setter>
                            <Setter Property="Fill" TargetName="ExpandPath" Value="{StaticResource TreeViewItem.TreeArrow.Static.Checked.Fill}"/>
                            <Setter Property="Stroke" TargetName="ExpandPath" Value="{StaticResource TreeViewItem.TreeArrow.Static.Checked.Stroke}"/>
                        </Trigger>
                        <Trigger Property="IsMouseOver" Value="True">
                            <Setter Property="Stroke" TargetName="ExpandPath" Value="{StaticResource TreeViewItem.TreeArrow.MouseOver.Stroke}"/>
                            <Setter Property="Fill" TargetName="ExpandPath" Value="{StaticResource TreeViewItem.TreeArrow.MouseOver.Fill}"/>
                        </Trigger>
                        <MultiTrigger>
                            <MultiTrigger.Conditions>
                                <Condition Property="IsMouseOver" Value="True"/>
                                <Condition Property="IsChecked" Value="True"/>
                            </MultiTrigger.Conditions>
                            <Setter Property="Stroke" TargetName="ExpandPath" Value="{StaticResource TreeViewItem.TreeArrow.MouseOver.Checked.Stroke}"/>
                            <Setter Property="Fill" TargetName="ExpandPath" Value="{StaticResource TreeViewItem.TreeArrow.MouseOver.Checked.Fill}"/>
                        </MultiTrigger>
                    </ControlTemplate.Triggers>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>
    <Style x:Key="TreeViewItemStyle1" TargetType="{x:Type TreeViewItem}">
        <Setter Property="Background" Value="Transparent"/>
        <Setter Property="HorizontalContentAlignment" Value="{Binding HorizontalContentAlignment, RelativeSource={RelativeSource AncestorType={x:Type ItemsControl}}}"/>
        <Setter Property="VerticalContentAlignment" Value="{Binding VerticalContentAlignment, RelativeSource={RelativeSource AncestorType={x:Type ItemsControl}}}"/>
        <Setter Property="Padding" Value="1,0,0,0"/>
        <Setter Property="Foreground" Value="{DynamicResource {x:Static SystemColors.ControlTextBrushKey}}"/>
        <Setter Property="FocusVisualStyle" Value="{StaticResource TreeViewItemFocusVisual}"/>
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="{x:Type TreeViewItem}">
                    <Grid>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition MinWidth="19" Width="Auto"/>
                            <ColumnDefinition Width="Auto"/>
                            <ColumnDefinition Width="*"/>
                        </Grid.ColumnDefinitions>
                        <Grid.RowDefinitions>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition/>
                        </Grid.RowDefinitions>
                        <ToggleButton x:Name="Expander" ClickMode="Press" IsChecked="{Binding IsExpanded, RelativeSource={RelativeSource TemplatedParent}}" Style="{DynamicResource ToggleButtonStyle1}"/>
                        <Border x:Name="Bd" BorderBrush="{TemplateBinding BorderBrush}" BorderThickness="{TemplateBinding BorderThickness}" Background="{TemplateBinding Background}" Grid.Column="1" Padding="{TemplateBinding Padding}" SnapsToDevicePixels="true">
                            <ContentPresenter x:Name="PART_Header" ContentSource="Header" HorizontalAlignment="{TemplateBinding HorizontalContentAlignment}" SnapsToDevicePixels="{TemplateBinding SnapsToDevicePixels}"/>
                        </Border>
                        <ItemsPresenter x:Name="ItemsHost" Grid.ColumnSpan="2" Grid.Column="1" Grid.Row="1"/>
                    </Grid>
                    <ControlTemplate.Triggers>
                        <Trigger Property="IsExpanded" Value="false">
                            <Setter Property="Visibility" TargetName="ItemsHost" Value="Collapsed"/>
                        </Trigger>
                        <Trigger Property="HasItems" Value="false">
                            <Setter Property="Visibility" TargetName="Expander" Value="Hidden"/>
                        </Trigger>
                        <Trigger Property="IsSelected" Value="true">
                            <Setter Property="Background" TargetName="Bd" Value="{DynamicResource {x:Static SystemColors.HighlightBrushKey}}"/>
                            <Setter Property="Foreground" Value="{DynamicResource {x:Static SystemColors.HighlightTextBrushKey}}"/>
                        </Trigger>
                        <MultiTrigger>
                            <MultiTrigger.Conditions>
                                <Condition Property="IsSelected" Value="true"/>
                                <Condition Property="IsSelectionActive" Value="false"/>
                            </MultiTrigger.Conditions>
                            <Setter Property="Background" TargetName="Bd" Value="{DynamicResource {x:Static SystemColors.HighlightTextBrushKey}}"/>
                            <Setter Property="Foreground" Value="{DynamicResource {x:Static SystemColors.HighlightTextBrushKey}}"/>
                        </MultiTrigger>
                        <Trigger Property="IsEnabled" Value="false">
                            <Setter Property="Foreground" Value="{DynamicResource {x:Static SystemColors.GrayTextBrushKey}}"/>
                        </Trigger> 
                    </ControlTemplate.Triggers>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
        <Style.Triggers>
            <Trigger Property="VirtualizingPanel.IsVirtualizing" Value="true">
                <Setter Property="ItemsPanel">
                    <Setter.Value>
                        <ItemsPanelTemplate>
                            <VirtualizingStackPanel/>
                        </ItemsPanelTemplate>
                    </Setter.Value>
                </Setter>
            </Trigger>
        </Style.Triggers>
    </Style>
    <Style x:Key="ToggleButtonStyle1" TargetType="{x:Type ToggleButton}">
        <Setter Property="Focusable" Value="False"/>
        <Setter Property="Width" Value="16"/>
        <Setter Property="Height" Value="16"/>
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="{x:Type ToggleButton}">
                    <Border Background="Transparent" Height="16" Padding="5,5,5,5" Width="16">
                        <Path x:Name="ExpandPath" Data="{StaticResource TreeArrow}" Fill="{DynamicResource {x:Static SystemColors.HotTrackBrushKey}}" Stroke="{StaticResource TreeViewItem.TreeArrow.Static.Stroke}">
                            <Path.RenderTransform>
                                <RotateTransform Angle="135" CenterY="3" CenterX="3"/>
                            </Path.RenderTransform>
                        </Path>
                    </Border>
                    <ControlTemplate.Triggers>
                        <Trigger Property="IsChecked" Value="True">
                            <Setter Property="RenderTransform" TargetName="ExpandPath">
                                <Setter.Value>
                                    <RotateTransform Angle="180" CenterY="3" CenterX="3"/>
                                </Setter.Value>
                            </Setter>
                            <Setter Property="Fill" TargetName="ExpandPath" Value="{StaticResource TreeViewItem.TreeArrow.Static.Checked.Fill}"/>
                            <Setter Property="Stroke" TargetName="ExpandPath" Value="{StaticResource TreeViewItem.TreeArrow.Static.Checked.Stroke}"/>
                        </Trigger>
                        <Trigger Property="IsMouseOver" Value="True">
                            <Setter Property="Stroke" TargetName="ExpandPath" Value="{StaticResource TreeViewItem.TreeArrow.MouseOver.Stroke}"/>
                            <Setter Property="Fill" TargetName="ExpandPath" Value="{StaticResource TreeViewItem.TreeArrow.MouseOver.Fill}"/>
                        </Trigger>
                        <MultiTrigger>
                            <MultiTrigger.Conditions>
                                <Condition Property="IsMouseOver" Value="True"/>
                                <Condition Property="IsChecked" Value="True"/>
                            </MultiTrigger.Conditions>
                            <Setter Property="Stroke" TargetName="ExpandPath" Value="{StaticResource TreeViewItem.TreeArrow.MouseOver.Checked.Stroke}"/>
                            <Setter Property="Fill" TargetName="ExpandPath" Value="{StaticResource TreeViewItem.TreeArrow.MouseOver.Checked.Fill}"/>
                        </MultiTrigger>
                    </ControlTemplate.Triggers>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>

</Window.Resources>
<Grid>
    <StackPanel Orientation="Horizontal">
    <TreeView x:Name="XX" HorizontalAlignment="Left" Height="100"  VerticalAlignment="Top" Width="100" Style="{DynamicResource TreeViewStyle1}" Background="#7B898C">
        <TreeViewItem Header="XXXX_1" Style="{StaticResource TreeViewItemStyle1}">
            <TreeViewItem Header="XXXX_2" HorizontalAlignment="Left" />
        </TreeViewItem>
    </TreeView>

    <TreeView x:Name="XX2" Margin="10,0,0,0" HorizontalAlignment="Left" Height="100"  VerticalAlignment="Top" Width="100" Style="{DynamicResource TreeViewStyle1}" Background="#7B898C">
        <TreeViewItem Header="XXXX_3" Style="{StaticResource TreeViewItemStyle1}">
            <TreeViewItem Header="XXXX_4" HorizontalAlignment="Left" />
        </TreeViewItem>
    </TreeView>
    </StackPanel>
</Grid> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T22:30:33.897

在您发布的代码中，我唯一能看到的错误是您`Trigger`的 's `Setter`set both `Background`and `Foreground`to the same color`{DynamicResource {x:Static SystemColors.HighlightTextBrushKey}}`

您也可以尝试将`MultiTrigger`条件设置为`Selector.IsSelectionActive`明确：

我用这些更改尝试了您发布的代码（在 Windows-8 中对我来说很好）：

```
<MultiTrigger>
  <MultiTrigger.Conditions>
    <Condition Property="IsSelected"
                Value="true" />
    <Condition Property="Selector.IsSelectionActive"
                Value="false" />
  </MultiTrigger.Conditions>
  <Setter TargetName="Bd"
          Property="Background"
          Value="{DynamicResource {x:Static SystemColors.HighlightBrushKey}}" />
  <Setter Property="Foreground"
          Value="{DynamicResource {x:Static SystemColors.HighlightTextBrushKey}}" />
</MultiTrigger> 
```

输出：

![在此处输入图像描述](https://i.stack.imgur.com/cGsZc.png)

**笔记：**

`Style`您对 Top的唯一设置`TreeViewItem`为`TreeViewItemStyle1`. 因此，默认值`Style`应用于`TreeViewItem`未指定 a的 Child `Style`。如果您希望它自动应用于 all `TreeViewItem`，只需删除声明中的 Style Key ，它应该根据`TargetType`

# windows-phone-8 - 如何使用 cpp 获取 windows phone 8 操作系统版本

> ID：16125558
> 
> 赞同：0
> 
> 时间：2013-04-20T21:50:36.797
> 
> 标签：windows-phone-8

cpp 没有命名空间 System.Environment.OSVersion

那么获取 OSVersion 的 api 是什么？

wp8 中似乎未启用系统 api GetVersion GetVersionEx

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T09:05:14.223

当您从 Windows 8 升级到 WP8 时，会缺少很多东西。我发现解决所有问题的唯一方法是从 C++/CX 调用 C# 代码。方法如下：[在 WP8 中从 C++ 代码调用 C# 方法](https://stackoverflow.com/questions/14434874/calling-c-sharp-method-from-c-code-in-wp8/16127627#16127627)

# spring-mvc - 将 JdbcTemplate 用于动态 WHERE 时转义单引号

> ID：16125560
> 
> 赞同：0
> 
> 时间：2013-04-20T21:50:48.447
> 
> 标签：spring-mvc, jdbctemplate, spring-jdbc

我正在使用 JdbcTemplate 查询数据库，但是我正在构建一个动态 WHERE 子句并且我想转义引号。下面是我的字符串外观的示例：

有时它们不会是任何 where 子句，因为用户可能想要返回所有记录。所以在这里使用准备好的语句可能不可行。

**Jdbc模板**

```
String sql = "select crime.*, "+
                     "criminalSocialSecurityNumber,criminal.fName as criminalFName,criminal.lName as criminalLName,"+
                     "criminal.photo as criminalPhoto,criminal.dob as criminalDob,victimSocialSecurityNumber,"+
                     "victim.fName as victimFName,victim.lName as victimLName,victim.photo as victimPhoto, victim.dob as victimDob "+ 
                     "from tblcrimes crime "+
                     "left join tblcriminalcrime on crime.crimeRecNo = tblcriminalcrime.crimeRecNo "+
                     "left join tblvictimcrime on crime.crimeRecNo = tblvictimcrime.crimeRecNo "+
                     "inner join tblcitizens criminal on criminal.socialSecurityNumber = tblcriminalcrime.criminalSocialSecurityNumber "+
                     "inner join tblcitizens victim on victim.socialSecurityNumber = tblvictimcrime.victimSocialSecurityNumber " + where_clause; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-20T21:58:06.303

使用准备好的语句是完全可能的，并且是你应该做的。

动态构建查询，`?`对每个参数使用占位符 ( )，每次添加占位符时，还要将参数值添加到参数列表中。最后，您有一个参数化的 SQL 查询，以及一个要绑定到准备好的语句的参数值列表。

就像是

```
List<Object> args = new ArrayList<Object>();
StringBuilder whereClause = new StringBuilder();
if (criteria.getFoo() != null) {
    whereClause.append(" and foo = ?");
    args.add(criteria.getFoo());
}
if (criteria.getBar() != null) {
    whereClause.append(" and bar = ?");
    args.add(criteria.getBar());
}
// ...

PreparedStatement stmt = connection.prepareStatement(query + whereClause);
int i = 1;
for (Object arg : args) {
    stmt.setObject(i, arg);
    i++;
} 
```

# google-search-console - 我在谷歌网站管理员工具中提交了一个 sitemap.xml，但并非所有网址都被编入索引

> ID：16125568
> 
> 赞同：0
> 
> 时间：2013-04-20T21:51:49.233
> 
> 标签：google-search-console

这是我的 Sitemap.xml

```
<?xml version="1.0" encoding="utf-8" ?>
<urlset xmlns="http://www.sitemaps.org/schemas/sitemap/0.9">
  <!-- Generated by Sitemaps.NET 1.1
  -->
  <url>
    <loc>http://www.friendisc.com</loc>
  </url>
  <url>
    <loc>http://www.friendisc.com/Login.aspx</loc>
  </url>
  <url>
    <loc>http://www.friendisc.com/Signup.aspx</loc>
  </url>  
  <url>
    <loc>http://www.friendisc.com/UpdateProfile.aspx</loc>
  </url>  
  <url>
    <loc>http://www.friendisc.com/Friends.aspx</loc>
  </url>
  <url>
    <loc>http://www.friendisc.com/Share.aspx</loc>
  </url>
  <url>
    <loc>http://www.friendisc.com/Groups.aspx</loc>
  </url>  
  <url>
    <loc>http://www.friendisc.com/Messages.aspx</loc>
  </url>
  <url>
    <loc>http://www.friendisc.com/Wall.aspx</loc>
  </url>
  <url>
    <loc>http://www.friendisc.com/ChatRoom.aspx</loc>
  </url>  
  <url>
    <loc>http://www.friendisc.com/BookReview.aspx</loc>
  </url>
  <url>
    <loc>http://www.friendisc.com/MovieReview.aspx</loc>
  </url>  
  <url>
    <loc>http://www.friendisc.com/Questions.aspx</loc>
  </url>
  <url>
    <loc>http://www.friendisc.com/AskQuestion.aspx</loc>
  </url>  
  <url>
    <loc>http://www.friendisc.com/ViewSong.aspx</loc>
  </url>
</urlset> 
```

# ruby-on-rails - 从同一台计算机创建第二个 Heroku 应用程序的步骤？

> ID：16125573
> 
> 赞同：0
> 
> 时间：2013-04-20T21:52:19.703
> 
> 标签：ruby-on-rails, heroku

我想从我的计算机创建一个完全独立的应用程序。到目前为止，我只有一个文件夹，我使用 git 将我的更新推送到 heroku。

如何创建一个完全独立的 heroku 应用程序，同时允许我在两个应用程序之间来回切换？

我想保留第一个应用程序的原样，但我想开始开发第二个应用程序作为试用版，可以灵活地返回并在第一个应用程序上工作，反之亦然。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T22:52:58.130

错误...我不确定您的问题是否缺少我的东西，但这应该很简单。

创建您的新应用

```
$ rails new yourapp
$ cd yourapp 
```

创建存储库

```
$ git init
$ git add .
$ git commit -m "Initial commit" 
```

创建、部署和打开应用程序@Heroku

```
$ heroku create
$ git push heroku master
$ heroku open 
```

**编辑：**如果您要查找的是新 herokudomain 上的重复应用程序，请执行以下操作：

在本地复制您的应用程序文件夹并 cd 进入副本。

删除当前遥控器（原点）

```
git remote rm origin 
```

添加新的遥控器

```
git remote add origin <URL to second heroku app> 
```

推送到新域

```
git push -u origin master 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-21T03:30:23.487

首先，确保您的应用程序位于完全独立的目录中（一个不应该是另一个的子目录）。这样的事情很典型：

```
workspace
  |
  |----- my_app_1
  |         |
  |         |---- .git
  |         |       |
  |         |       |---- config
  |         |       |---- ...
  |         |      
  |         |----- app
  |         |----- Gemfile
  |         |----- ...
  |
  |----- my_app_2
  |         |
  |         |---- .git
  |         |       |
  |         |       |---- config
  |         |       |---- ...
  |         |      
  |         |----- app
  |         |----- Gemfile
  |         |----- ...
  |
  |----- ... 
```

因此，您可能有一个`workspace`目录，其中包含多个 Rails 应用程序目录`my_app_1`，`my_app_2`等等。这些目录中的每一个都是类似于典型 Rails-application-with-git-version-control 项目的结构。

*   要创建一个新的 Rails 应用程序，`cd`请进入您的`workspace`目录，然后输入命令`rails new my_app_x`。
*   要将其初始化为 git 存储库，`cd`请进入新创建的 `my_app_x`目录并输入命令`git init`（后跟 a `git add .; git commit -m "initial commit"`）。

最后，您需要确保`.git/config`为每个项目正确设置文件。您可能希望您的两个应用程序`.git/config`文件如下所示：

```
[core]
    repositoryformatversion = 0
    filemode = true
    bare = false
    logallrefupdates = true
    ignorecase = true
    precomposeunicode = false
[remote "heroku"]
    url = git@heroku.com:floating-dusk-xxxx.git
    fetch = +refs/heads/*:refs/remotes/heroku/* 
```

另一个是这样的：

```
[core]
    repositoryformatversion = 0
    filemode = true
    bare = false
    logallrefupdates = true
    ignorecase = true
    precomposeunicode = false
[remote "heroku"]
    url = git@heroku.com:boiling-bastion-xxxx.git
    fetch = +refs/heads/*:refs/remotes/heroku/* 
```

如果您的配置文件看起来有点不同，并且其中有一些额外的部分，那也没关系，关键部分是该部分的`url`下方`[remote "heroku"]`。

然后，您可以将这两个不同的应用程序推送到两个不同的 Heroku 存储库（然后您可以通过它们各自的`blah-blah-xxxx.herokuapp.com`URL 导航到这两个应用程序。为了将应用程序推送到 Heroku，请确保您已`cd`进入正确的目录，然后输入命令`git push heroku master`。如果您将这些 Heroku 远程存储库所在的状态当前搞砸了，这可能无法立即工作，因此请对您遇到的任何错误发表评论。

# c++ - 如何使用 boost XML 存档序列化 OpenCV Mat

> ID：16125574
> 
> 赞同：1
> 
> 时间：2013-04-20T21:52:21.547
> 
> 标签：c++, opencv, serialization, boost

我正在尝试序列化一个具有 cv::Mat 作为成员的对象，我找到了这个[SO 页面](https://stackoverflow.com/questions/4170745/serializing-opencv-mat-vec3f)，但是当我尝试它时，我收到以下错误：

> usr/include/boost/archive/basic_xml_iarchive.hpp:70:9: error: no matching function for call to 'assertion_failed(mpl_::failed************ boost::serialization::is_wrapper ::************) 注意：模板 int mpl_::assertion_failed(typename mpl_::assert::type) /usr/include/boost/archive/basic_xml_iarchive.hpp: 在成员函数' void boost::archive::basic_xml_iarchive::load_override(T&, int) [with T = unsigned char, Archive = boost::archive::xml_iarchive]':'</p>

在链接页面上的示例中，他们使用二进制存档，而我使用的是 xml 存档，这会导致问题吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-09-27T11:39:20.710

需要在包含的标题中的某处添加它：

```
namespace boost {
  namespace serialization {

    template<class Archive>
    inline void serialize(Archive & ar, cv::Mat& m, const unsigned int version) {
      int cols = m.cols;
      int rows = m.rows;
      size_t elemSize = m.elemSize();
      size_t elemType = m.type();

      ar & BOOST_SERIALIZATION_NVP(cols);
      ar & BOOST_SERIALIZATION_NVP(rows);
      ar & BOOST_SERIALIZATION_NVP(elemSize);
      ar & BOOST_SERIALIZATION_NVP(elemType); // element type.

      if(m.type() != elemType || m.rows != rows || m.cols != cols) {
        m = cv::Mat(rows, cols, elemType, cv::Scalar(0));
      }

      size_t dataSize = cols * rows * elemSize;
      cout << " datasize is " << dataSize;

      for (size_t dc = 0; dc < dataSize; dc++) {
        std::stringstream ss;
        ss << "elem_"<<dc;
        ar & boost::serialization::make_nvp(ss.str().c_str(), m.data[dc]);
      }

    }
  }
} 
```

# java - 未执行线程后的代码

> ID：16125577
> 
> 赞同：2
> 
> 时间：2013-04-20T21:52:37.797
> 
> 标签：java, android

我正在为一个android应用程序提取一些html。我遇到的一个问题是下面代码中线程之后的代码没有被执行。我觉得我犯了一个业余错误，但我不明白它是什么。我知道数组列表正在被填充，从在 createTimetable() 方法中将它们的内容打印到 logcat 中。但是，之后的任何事情`}).start();`都没有完成。有任何想法吗？

```
 protected void onCreate(Bundle savedInstanceState) {

    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_display_online_timetable);
    Intent intent = getIntent();
    value = intent.getStringExtra("url");

      new Thread(new Runnable() {
            public void run() {
                try {
                    Log.d("url",value);
                    doc = Jsoup.connect(value).get();
                    Element monday = doc.select("p ~ table").first();
                    Element tuesday = doc.select("p ~ table").get(1);
                    Element wednesday = doc.select("p ~ table").get(2);
                    Element thursday = doc.select("p ~ table").get(3);
                    Element friday = doc.select("p ~ table").get(4);

                    monday.select("tr:eq(0)").remove();
                    tuesday.select("tr:eq(0)").remove();
                    wednesday.select("tr:eq(0)").remove();
                    thursday.select("tr:eq(0)").remove();
                    friday.select("tr:eq(0)").remove();

                    final Elements mon = monday.select("td");
                    final Elements tues = tuesday.select("td");
                    final Elements wed = wednesday.select("td");
                    final Elements thurs = thursday.select("td");
                    final Elements fri = friday.select("td");               

                    Log.d("thread","sdsddssd");
                    createTimetable(monClasses, mon, day1);
                    createTimetable(tuesClasses, tues, day2);
                    createTimetable(wedClasses, wed, day3);
                    createTimetable(thurClasses, thurs, day4);
                    createTimetable(friClasses, fri, day5);

                } catch (IOException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                }
            }
          }).start();

      Log.d("sdfsdfsdf", "HELLO");
      for(int i = 0; i<monClasses.size();i++)
      {
          Log.d("monday", monClasses.get(i).toString());
      }

    mSectionsPagerAdapter = new SectionsPagerAdapter(
            getSupportFragmentManager());

} 
```

![日志猫](https://i.stack.imgur.com/90rJm.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-20T21:59:02.910

我猜你来自传统的 java 开发，所以这里有一个警告：线程和 Android 互不喜欢。将您的线程切换到[异步任务并重](http://developer.android.com/reference/android/os/AsyncTask.html)试，只需更改几行代码。

基本上，将所有代码复制到`doInBackground()`方法中，然后调用`task.execute()`. 您想要对生成的数据执行的所有操作都应该进入`onPostExecute()`Async 任务的方法。您甚至可以通过使用`publishResult()`和`onResultPublished()` 注意进行并行处理，这可能会同步运行，但您不必担心这一点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-20T22:03:09.277

既然你在线程之后没有做任何 UI 工作，你能不能在 finally 子句中做工作？

如果你依赖这个线程来收集数据来填充视图，你应该使用 AsyncTask。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-20T23:43:08.547

尝试将线程分配给变量并在 onCreate 方法结束时启动该线程变量

# javascript - 访问请求的页面大小 - Chrome 扩展

> ID：16125578
> 
> 赞同：1
> 
> 时间：2013-04-20T21:52:49.313
> 
> 标签：javascript, debugging, google-chrome, google-chrome-extension

我想将给定页面的大小写入控制台。请注意，如果页面被压缩，我想知道压缩后的大小和未压缩的大小。我也希望能够为任何 ajax 请求执行此操作。

如果有一种方法可以在没有插件的情况下做到这一点，那就太好了。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-04-24T10:06:25.903

```
var req = new XMLHttpRequest();
req.open('GET', document.location, false);
req.send(null);
var headers = req.getAllResponseHeaders().toLowerCase();
var encoding = (headers.match(/Content-encoding\: (\w*)/i) || []).pop();
var unpacked_size = req.responseText.length;
var packed_size = -1;
if (['gzip','deflate','lzh','sdch'].indexOf(encoding) !== -1) {
    packed_size = parseInt((headers.match(/content-length\: (\d*)/i) || []).pop());
}

var result = {
    encoding: encoding,
    unpacked_size: unpacked_size,
    packed_size: packed_size,
} 
```

# ruby-on-rails - Heroku 按照 Hartl 的 Rails 教程搞砸了 CSS

> ID：16125581
> 
> 赞同：0
> 
> 时间：2013-04-20T21:53:17.147
> 
> 标签：ruby-on-rails, heroku, railstutorial.org

我在 heroku 上正确渲染 microposts 时遇到问题，但在 localhost 上却没有。我正在关注 Hartl 的 Rails 教程指南。

这是一个显示该问题的 imgur 专辑。第一个图像是错误（heroku），第二个是正确的（localhost）。 [http://imgur.com/d8XxHzm,HnRoGne#0](http://imgur.com/d8XxHzm,HnRoGne#0)

我一生都无法弄清楚为什么会发生这种情况。Heroku 似乎忽略了我的 CSS。

这是 github 仓库： [https ://github.com/Mciocca/sample_app](https://github.com/Mciocca/sample_app)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-20T22:15:35.847

听起来像是三种可能的原因之一：

1.  有一个冲突的样式表干扰。检查 app/assets/stylesheets 是否有定义了两次的类。
2.  堆。我看到您已`pg`在 gemfile 中投入生产，这很好。Heroku 在 Cedar 堆栈上运行 - 确保它是。( `Creating severe-mountain-793... done, **stack is cedar**`)
3.  不做任何假设，但我已经去过那里好几次了：确保在推送到 heroku**之前，你已经包含了对你的 repo 的最新更改。**`git add .`和`git commit -am "brainfart"`，然后`git push heroku master <branch>`。

恭喜您选择了 Rails！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-07-10T18:40:54.760

运行`bundle exec rake assets:precompile`以编译资产，包括。样式表到 Heroku 使用的公共层次结构中。

完成后：

`git add -A`

`git commit -m "Precompiled assets"`最后

`git push`和`git push heroku`

为了更好地理解，请查看资产管道上的[Rails 指南和资产管道上](http://guides.rubyonrails.org/asset_pipeline.html)的[Heroku 指南](https://devcenter.heroku.com/articles/rails-4-asset-pipeline)。

# java - 如何有效地重置线程池

> ID：16125582
> 
> 赞同：4
> 
> 时间：2013-04-20T21:53:22.020
> 
> 标签：java, concurrency, threadpool

我正在使用线程池来使多个不重要的任务排队并（可能）执行但是我需要能够轻松取消所有排队和执行的任务并从头开始一个新队列。

IE：

```
// startup
pool = Executors.newFixedThreadPool(5);

// reset
pool.shutdownNow();
pool = Executors.newFixedThreadPool(5); 
```

我现在使用的实现似乎可以工作，但我不确定完全关闭并创建一个新的线程池是否特别有效。

重置定期发生，在某些用途中，它与调度任务一样定期发生！由于无法确定是否有任何任务正在等待执行（或者是否存在？）我觉得我关闭池的方式过于频繁。

是否有更合适的池实现或更好的方法来实现此功能？

**编辑：解决方案**

我现在正在运行：

```
// startup
pool = (ThreadPoolExecutor) Executors.newFixedThreadPool(5);

// reset
for (Future<?> task : pool.getQueue().toArray(new Future[0]))
    task.cancel(true); 
```

我忽略了对“清除”的调用，因为这很慢，而且队列稍后会被池清理。我知道当前执行的任务可能不会因此而终止，这对我有用。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T21:58:26.897

您可以监视`Future`从提交任务中获得的所有 s 以及`cancel()`所有这些，这将允许您重新使用线程池而无需重新创建。但是，我怀疑你会获得太多额外的效率。

只要您不经常这样做，我认为您的机制应该可以正常工作。要意识到的一件事是，尽管您正在调用`pool.shutdownNow()`，但这只会中断正在运行的作业，而不一定会停止它们。这取决于他们在做什么以及他们是否正在执行`InterruptedException`经常抛出的方法或监听线程中断标志。所以即使`shutdownNow()`返回，一些任务可能仍在执行。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-04-20T22:00:46.300

您可以取消所有待处理（并且可能正在运行）的任务：

```
for (Future f: pool.getQueue().toArray(new Future[0]))
{
    f.cancel(true); // or false
}
pool.purge(); 
```

# docpad - docpad：获取有关到底哪里出错的信息

> ID：16125584
> 
> 赞同：0
> 
> 时间：2013-04-20T21:53:30.583
> 
> 标签：docpad

Docpad 一直在向我发出警告：

```
warning: Something went wrong while rendering: ... 
```

我很想知道更多关于到底出了什么问题。我可以调整任何设置以使输出更有帮助吗？在这种特殊情况下，模板是一个`eco`文件。

我已经尝试过该`-d`选项，但看不到它有帮助。

我会喜欢一种特殊的调试模式，其中每个布局、文档、部分等都呈现在带有呈现文件名称的边框内。如果文件中可用的变量可以序列化并显示在弹出窗口或其他内容中，我会很激动。:-)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-06T00:49:28.907

这种特殊模式听起来很像[TraceGL](https://trace.gl/)很快就能提供的。TraceGL 看起来很棒，但我似乎还不能让它与 DocPad 一起工作。

同时，[DocPad 网站上的调试说明有](http://docpad.org/docs/debug)帮助吗？

# connection - Arduino以太网屏蔽未连接到网站

> ID：16125586
> 
> 赞同：1
> 
> 时间：2013-04-20T21:53:48.523
> 
> 标签：connection, arduino, ethernet

我正在尝试使用以下代码将数据发送到本地服务器：服务器不通过以太网屏蔽接收数据。它说它连接成功。我已经用以太网屏蔽对谷歌进行了 ping 操作，并且还使用 char server[] 中的链接通过浏览器发送了数据。这两种情况都运作良好。有谁知道这个问题？

```
#include <Ethernet.h>
#include <SPI.h>

byte mac[] = { 0xDE, 0xAD, 0xBE, 0xEF, 0xFE, 0xED };
byte ip[] = { 192, 168, 0, 116 };
char server[] = "http://192.168.0.175/test-app/listener?data=1234"; 

EthernetClient client;

void setup()
{
  Ethernet.begin(mac, ip);
 Serial.begin(9600);

delay(1000);

Serial.println("connecting...");

if (client.connect(server,8080)) {
 Serial.println("connected");
 //client.println("GET /search?q=arduino HTTP/1.0");
 //client.println();
 client.stop();
} else {
 Serial.println("connection failed");
}
 } 

void loop()
{
  if (client.connect(server,80)){
  client.stop();
  Serial.println("yay!!");
 }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-10-04T17:02:58.523

您在服务器名称中提供完整路径，它只需要是基本 URL。

# internet-explorer - IE Developer Toolbar 将检查的元素变为黑色

> ID：16125589
> 
> 赞同：1
> 
> 时间：2013-04-20T21:54:23.230
> 
> 标签：internet-explorer, windows-8, retina-display, parallels

我在 Retina Mac Book Pro 15 上的 Parallels 上的 Windows 8 下运行 Internet Explorer 10（只是认为提供所有细节可能很有用）。

例如，当我运行*F12 开发人员工具*并在单击时检查元素时，该元素会完全变黑，这使得我无法看到在我更改样式规则时发生了什么。

我尝试了 Google Chrome 开发人员工具，它们运行良好。这是一个已知的错误，还是一个*功能*？因为如果它是一个功能，它就是一个烦人的功能！

![在此处输入图像描述](https://i.stack.imgur.com/tpV92.jpg)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T02:53:22.310

这不是 Internet Explorer 10 或其检查元素功能的正常行为。我怀疑这与您的设置有关，并且可能与内存不足有关。我发现在低内存环境中重新绘制页面的某些部分存在问题，有时与您现在看到的类似。如果可以，请尝试增加分配给虚拟操作系统的内存量，看看这是否能解决问题。

这是我的设置的屏幕截图：

![在此处输入图像描述](https://i.stack.imgur.com/uAD6d.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-02T21:53:22.020

我整天都在为这个问题烦恼，从modern.ie安装不同的虚拟机，但它们都受到了影响。

解决方法是：在 VM 的视频设置中，选择 DirectX 9。

# c# - 发布表单时查看模型不绑定

> ID：16125592
> 
> 赞同：0
> 
> 时间：2013-04-20T21:54:32.387
> 
> 标签：c#, asp.net-mvc-4, model-binding

当我提交表单时，这些值没有绑定到视图模型。我看不出我做错了什么。有没有人在我的代码中看到我遗漏的东西。

这是视图的一部分：

```
@model FacilitiesCostIndex.ViewModels.AddAsset.TheViewModel

<div id="addAssetForm-div">
@using (Html.BeginForm("Submit", "AddAsset", FormMethod.Post, new { id = "AddAssetForm" }))
{
<span class="formTitle">@ViewBag.Title</span><br />

<fieldset id="topRow">
    <legend></legend>
    <!--Location-->
    <span id="location" class="notes">- Location -</span><br />
    <!--Site-->
    <span id="site-span">
        @Html.LabelFor(model => model.SiteId, new { @class = "formLabel" })
        @Html.DropDownListFor(model => model.SiteId, Model.SiteItems, new { id = "siteDrpDwn", @class = "formDropDown" })
        @Html.ValidationMessageFor(model => model.SiteId, string.Empty, new { id = "siteVldMsg", @class = "formValidationMessage" })
    </span>
    <!--Floor-->
    <span id="floor-span">
        @Html.LabelFor(model => model.FloorId, new { @class = "formLabel" })
        <span id="floorDrpDwnContainer" data-populateurl="@Url.Action("PopulateFloorDrpDwn", "AddAsset")" data-unpopulateurl="@Url.Action("UnpopulateFloorDrpDwn", "AddAsset")">
            @{Html.RenderPartial("AddAsset/UnpopulatedFloorDrpDwn", new FacilitiesCostIndex.ViewModels.AddAsset.FloorDrpDwnViewModel());}
        </span>
        @Html.ValidationMessageFor(model => model.FloorId, string.Empty, new { id = "floorVldMsg", @class = "formValidationMessage" })
    </span>
    <!--Zone-->
    <span id="zone-span">
        @Html.LabelFor(model => model.ZoneId, new { @class = "formLabel" })
        <span id="zoneDrpDwnContainer" data-populateurl="@Url.Action("PopulateZoneDrpDwn", "AddAsset")" data-unpopulateurl="@Url.Action("UnpopulateZoneDrpDwn", "AddAsset")">
            @{Html.RenderPartial("AddAsset/UnpopulatedZoneDrpDwn", new FacilitiesCostIndex.ViewModels.AddAsset.ZoneDrpDwnViewModel());}
        </span>
        @Html.ValidationMessageFor(model => model.ZoneId, string.Empty, new { id = "zoneVldMsg", @class = "formValidationMessage" })
    </span><br />
</fieldset>

<fieldset id="leftColumn">
    <legend></legend>
    <!--Install Date-->
    <div id="installDate-div" class="leftColumnItem">
        @Html.LabelFor(model => model.InstallDate, new { id="installDateLbl" }) <br />
        @Html.TextBoxFor(model => model.InstallDate, new { id="installDateTxt" })
    </div>

    <!--Name-->
    <div id="assetName-div" class="leftColumnItem">
        @Html.LabelFor(model => model.AssetName, new { @class="formLabel" }) <br />
        @Html.TextBoxFor(model => model.AssetName, new { id="assetNameTxt", @class = "formTextbox" })
    </div>
    <!--Asset Number-->
    <div id="assetNumber-div" class="leftColumnItem">
        @Html.LabelFor(model => model.AssetNumber, new { @class="formLabel" }) <br />
        @Html.TextBoxFor(model => model.AssetNumber, new { id="assetNumberTxt", @class = "formTextbox" })
    </div>
    <!--Description-->
    <div id="description-div" class="leftColumnItem">
        @Html.LabelFor(model => model.Description, new { @class="formLabel" }) <br />
        @Html.TextBoxFor(model => model.Description, new { id="descriptionTxt", @class = "formTextbox" })
    </div>
    <!--Group-->
    <div id="group-div" class="leftColumnItem">
        @Html.LabelFor(model => model.GroupId, new { @class = "formLabel" }) <br />
        @Html.DropDownListFor(model => model.GroupId, Model.GroupItems, new { id = "groupDrpDwn", @class = "formDropDown" })
        @Html.ValidationMessageFor(model => model.GroupId, string.Empty, new { id = "groupVldMsg", @class = "formValidationMessage" })
    </div> 
```

这是 ViewModel 的一部分：

```
public class TheViewModel
{
    [Display(Name = "Site")]
    public int SiteId { get; set; }
    public IEnumerable<SelectListItem> SiteItems { get; private set; }

    [Display(Name = "Floor")]
    [Required(ErrorMessage = "Please select a Floor.")]
    public int FloorId { get; set; }

    [Display(Name = "Zone")]
    [Required(ErrorMessage = "Please select a Zone.")]
    public int ZoneId { get; set; }

    [Display(Name = "Name")]
    [Required(ErrorMessage = "Please enter an Asset Name.")]
    public string AssetName { get; set; }

    [Display(Name = "Asset Number")]
    [Required(ErrorMessage = "Please enter an Asset Number.")]
    public string AssetNumber { get; set; }

    [Display(Name = "Description")]
    public string Description { get; set; }

    [Display(Name = "INSTALL DATE")]
    [Required(ErrorMessage = "Please enter an install date.")]
    public DateTime? InstallDate { get; set; }

    [Display(Name = "Group")]
    [Required(ErrorMessage = "Please select a Group.")]
    public int GroupId { get; set; }
    public IEnumerable<SelectListItem> GroupItems { get; private set; }

    public TheViewModel()
    {
        SiteId = -1;
        SetSiteItems();
        GroupId = -1;
        SetGroupItems();
    } 
```

这是控制器的代码：

```
 [HttpPost]
    public ActionResult Submit(TheViewModel model)
    {
        DateTime DateEntered = DateTime.Now;

        AssetModel AnAsset = new AssetModel();
        AnAsset.AssetName = model.AssetName;
        AnAsset.AssetNumber = model.AssetNumber;
        AnAsset.AssetTypeId = model.AssetTypeId;
        AnAsset.GroupId = model.GroupId;
        AnAsset.ZoneId = model.ZoneId;
        AnAsset.Description = model.Description;

        //Note: Conversion from nullable to non-nullable type is dealt with.
        if (model.InstallDate.HasValue)
        {
            AnAsset.InstallDate = model.InstallDate.Value;
        }

        //Send asset to insert method.
        new AssetRepositoryModel().Insert(AnAsset);

        return View();
    } 
```

感谢您能给我的任何帮助。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-21T00:14:27.593

可能使用 Global.asax 中的绑定并定义从 IModelBinder 继承的 TheViewModelBinder 类来解决？

```
ModelBinders.Binders.Add( typeof(TheViewModel), new TheViewModelBinder() ); 
```

和活页夹类是这样的：

```
public class TheViewModelBinder : IModelBinder {
    public object BindModel( ControllerContext controllerContext, ModelBindingContext     bindingContext ) {
                    var theViewModel = new TheViewModel();
                    theViewModel.SiteId = int.Parse(request.Form.Get( "SiteId" ));
                    //other your code here
            }
    } 
```

# c++ - 我的长方体哪里出了问题？

> ID：16125594
> 
> 赞同：0
> 
> 时间：2013-04-20T21:54:47.587
> 
> 标签：c++, arrays, opengl, vertex

我正在使用顶点数组在 OpenGL 中创建一个长方体，但我的纹理似乎有点错误。

这是我的代码：

```
float halfW = getW() / 2;
float halfH = getH() / 2;

GLubyte myIndices[]={
    1,   0,   2,        //front
    2,   0,   3,
    4,   5,   7,        //back
    7,   5,   6,
    0,   4,   3,        //left
    3,   4,   7,        
    5,   1,   6,        //right
    6,   1,   2,
    7,   6,   3,        //up
    3,   6,   2,
    1,   0,   5,        //down
    5,   0,   4
};
float myVertices[] = {
    -halfW, -halfH, -halfW,         // Vertex #0
     halfW, -halfH, -halfW,         // Vertex #1
     halfW,  halfH, -halfW,         // Vertex #2
    -halfW,  halfH, -halfW,         // Vertex #3
    -halfW, -halfH,  halfW,         // Vertex #4
     halfW, -halfH,  halfW,         // Vertex #5
     halfW,  halfH,  halfW,         // Vertex #6
    -halfW,  halfH,  halfW          // Vertex #7
};
float myTexCoords[]= {
    1.0, 1.0,           //0
    0.0, 1.0,           //1
    0.0, 0.0,           //2
    1.0, 0.0,           //3
    0.0, 0.0,           //4
    1.0, 0.0,           //5 
    1.0, 1.0,           //6
    0.0, 1.0            //7
}; 
```

继承人的问题： ![在此处输入图像描述](https://i.stack.imgur.com/uyWYr.png)

正面和背面渲染良好，但顶部、底部、左侧和右侧偏斜。

我哪里错了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T22:28:06.717

你的纹理坐标和顶点索引看起来是关闭的。由于顶点#2（坐标为halfW、halfH、-halfW）具有纹理坐标（0, 0），顶点#6（坐标为halfW、halfH、halfW）不应该具有纹理坐标（1, 1）。它所做的是将具有纹理坐标 (0, 0) 和 (1, 1) 的顶点沿同一边放置，这会导致麻烦。

立方体的问题是**每个顶点一个 2D 纹理坐标不足以将纹理映射到这样的立方体上**（无论您尝试放置它们，最终都会得到奇怪的边）。

解决方案是添加额外的三角形以便没有边与另一边共享顶点，或者查看[立方体贴图](http://www.opengl.org/wiki/Cubemap_Texture)，在其中指定 3D 纹理坐标（就像顶点一样）。我建议使用 Cube Maps，因为它可以避免添加多余的顶点。

# subprocess - 在 PyDev 上下文中的 Python 脚本中执行 subprocess.Popen 与在终端中运行不同

> ID：16125595
> 
> 赞同：1
> 
> 时间：2013-04-20T21:54:52.790
> 
> 标签：subprocess, pydev

我正在执行这段代码：

```
p = subprocess.Popen(['/path/to/my/script.sh','--flag'] , stdin=subprocess.PIPE)
p.communicate(input='Y')
p.wait() 
```

它在使用“python scriptName.py”在shell上执行时有效，但是在Eclipse中使用PyDev执行时，它失败了，原因：

> /path/to/my/script.sh：第 111 行：服务：找不到命令

此 bash 脚本“script.sh”包含以下导致错误的命令：

> 服务 mysqld 重启

因此，从 PyDev 的上下文中运行 .sh 脚本时，无法识别“服务”。我想这与一些 ENV VAR 配置有关，找不到怎么做。

*   顺便说一句 - 调用 subprocess.Popen 时使用“shell=True”并没有解决它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T22:40:55.187

`service`通常位于`/usr/sbin`，并且该目录不在`PATH`. 由于这通常包含管理二进制文件和脚本，它们并非旨在由所有人（仅由管理员/root）运行，因此默认情况下`sbin`并不总是将目录添加到目录中。`PATH`

要检查这一点，请尝试`PATH`在您的脚本中打印（或添加`env`命令）。

要修复它，您可以

*   使用在你的 python 脚本中设置 PATH`os.setenv`
*   传递一个`env`包含正确的字典`PATH`到`Popen`
*   `PATH`在你的 shellscript 中设置
*   在你的 shellscript 中使用完整路径
*   `PATH`在日食中设置

# jquery - Jquery验证器代码一直返回false

> ID：16125597
> 
> 赞同：0
> 
> 时间：2013-04-20T21:55:23.963
> 
> 标签：jquery, jquery-validate

我试图了解这个功能。但是，每次我运行它时，它都会告诉用户代码不正确，尽管我很难做到。有人可以在这里提出我的缺陷吗

html很简单

```
<form id="Join_league" method="post" action="<? echo $HTTP_SERVER_VARS['PHP_SELF'];?>">
    <input name="league_code" id="league_code" class="input">
                    <br><br>
    <input id="Join_button" name="Join_button" value="Enter League" type="submit"/>
</form> 
```

这是我的 javascript/ajax 函数

```
 <script src="http://code.jquery.com/jquery-latest.js"></script>
           <script type="text/javascript" src="http://jzaefferer.github.com/jquery   validation/jquery.validate.js"></script>

    <script type="text/javascript">

      $(document).ready(function() {
$.validator.addMethod("valid_code",function(value,element){
    var parameter="";
    $.ajax({
          url: "check_league_code.php",
          type: "POST",
          async: false,
          data: parameter,

          success:function(output)
                 {
                    return true;
                 }
     });
});

$("#Join_league").validate({
    rules: {
    league_code: {number : true,required : true ,
                              valid_code: true
                                            }
},
messages: {
    league_code: { required:"<strong>Please enter code</strong>",
                  number:"<strong>Please enter number only</strong>",
                valid_code:"<strong>Sorry incorrect code entered</strong>"
        }

}

   })

});

</script> 
```

有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T18:14:32.687

这是我用来返回真假的代码

```
<script type="text/javascript">
$(document).ready(function() {

    jQuery.validator.addMethod("valid_code", function(value,element) {
          var isSuccess = false;
          $.ajax({ url: "check_league_code.php",
          data: "",
          async: false,
          success: function(msg) { 
                      if(msg === "1")
                              {
                                isSuccess=true;
                              }
                    }
           });
                return isSuccess;
             },"<strong>Sorry incorrect code entered</strong>");

    $("#Join_league").validate({
        rules: {
            league_code: {
                required : true,
                number : true,
                valid_code: true
                        },
            messages: {
                league_code: {
                    required: "<strong>Please enter code</strong>",
                    number: "<strong>Please enter number only</strong>",
                    valid_code: "<strong>Sorry incorrect code entered</strong>"
                             }
                     }
        }
    });

}); 
```

# c# - 如果图像打开... 否则打开？

> ID：16125600
> 
> 赞同：0
> 
> 时间：2013-04-20T21:55:52.427
> 
> 标签：c#, wpf, windows, image

我只是想知道这里是否有人知道如何编写代码如何检查项目是否为图像，然后使用 Windows 图像预览打开，否则使用媒体播放器中的构建打开。

代码是这样的：

```
private bool listbox3job()
{
    AxWMPLib.AxWindowsMediaPlayer axWmp = wfh.Child as AxWMPLib.AxWindowsMediaPlayer;
    WMPLib.IWMPPlaylist playlist = axWmp.newPlaylist("myPlaylist", string.Empty);
    DateTime? start = starttid2.Value;
    DateTime? end = sluttid2.Value;
    DateTime now = DateTime.Now;

    if (start == null || end == null)
    {
        return false;
    }
    else if (now >= start.Value && now <= end.Value)
    {
        foreach (var selected in listBox3.Items)
        {
            string s = selected.ToString();
            if (listBox3Dict.ContainsKey(s))
            {
    if (extentions.Contains(System.IO.Path.GetExtension(s).ToUpperInvariant()))
    {
        Process process = new Process();
        process.StartInfo.FileName = "rundll32.exe";
        process.StartInfo.Arguments = @"C:\WINDOWS\System32\shimgvw.dll,ImageView_Fullscreen " + listBox3Dict[s];
        process.Start();
        Thread.Sleep(7000);
        {
            exit();
        }
    }
    else
    {
                WMPLib.IWMPMedia temp = axWmp.newMedia(listBox3Dict[s]);  
                playlist.appendItem(temp);
                axWmp.settings.setMode("loop", true);
                axWmp.settings.autoStart = true;
                axWmp.currentPlaylist = playlist; 
    }
            }
        }
                return true;
    }
    return false;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T22:20:48.813

这个给你

```
 public static List<string> extentions = new List<string> { ".JPG", ".JPE", ".BMP", ".GIF", ".PNG" };

private void Open()
{

    foreach (var selected in listBox4.Items)
    {
        string s = selected.ToString();

        if (listBox4Dict.ContainsKey(s))
        {
            if (extentions.Contains(Path.GetExtension(s).ToUpperInvariant()))
            {
                Process process = new Process();
                process.StartInfo.FileName = "rundll32.exe";
                process.StartInfo.Arguments = @"C:\WINDOWS\System32\shimgvw.dll,ImageView_Fullscreen " +listBox4Dict[s];
                process.Start();
                process.WaitForExit();
                while (!process.HasExited)
                    Thread.Sleep(500);
            }
            else
            {
                Mediaplayer.URL = (listBox4Dict[s]);
            }
        }
    }
} 
```

# java - java.util.concurrent 类如何重用线程？

> ID：16125602
> 
> 赞同：2
> 
> 时间：2013-04-20T21:56:12.280
> 
> 标签：java, multithreading, concurrency

我说的是`Thread`实例，如果它们将它们`Runnable`作为构造函数参数提供并且您只能执行它们的`start`方法一次，那么`Executor*`类族如何重用它们？

PS：我知道并使用比裸线程更好的抽象的 Executors 类，我只是出于好奇而问这个问题。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-20T22:02:52.353

传递给执行器线程的可运行对象（我们称它们为 R）实际上被包装在其他可运行对象中（我们称它们为 W）。W 的 run() 方法的伪代码是

```
while (threadMustRun) {
    wait for new R to be submitted and assigned to this thread
    execute R.run()
} 
```

它实际上比这更复杂，但你应该明白这一点。要真正理解它的作用，请查看`ThreadPoolExecutor.Worker`内部类的代码。

# mysql - 使用 .sql.gz 文件还原数据库时，gunzip 附近的 SQL 语法错误

> ID：16125603
> 
> 赞同：13
> 
> 时间：2013-04-20T21:56:12.827
> 
> 标签：mysql, database, windows, phpmyadmin, database-restore

我正在尝试使用 .sql.gz 文件恢复 mysql 数据库。我正在使用 mySql 控制台运行命令，因为文件大小对于 phpMyAdmin 来说太大了。我正在使用的命令是

```
gunzip C:/Vik/Gya/Source/beed_2013-04-06.sql.gz | mysql -u root -p bd 
```

其中 root 是用户 ID。root 没有密码。bd 是我要导入的数据库。mysql 在我的本地机器（Windows 8）上运行。我有一个 wamp 设置。

这是我得到的错误：

> ERROR 1064 (42000)：您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以`'gunzip C:/Vikalp/Gyankosh/Source/beedictionary_2013-04-06.sql | mysql -u root -p'`在第 1 行附近使用正确的语法。

* * *

## 回答 #1

> 赞同：69
> 
> 时间：2013-07-29T14:21:19.197

您需要 -c 选项（输出到标准输出）

```
gunzip -c xxx.sql.gz |mysql -u root -p 
```

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2014-11-20T14:35:09.487

虽然 Kisoft 的答案是正确的，但我只是想指出您不需要 -c，它可以正常工作。此命令将解压缩数据库转储并同时将其导入数据库。

```
gunzip < output.sql.gz | mysql -u <username> -p<password> <database> 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-04-20T22:32:10.590

如果您键入`gunzip`并收到一个抱怨 gunzip 的 SQL 语法错误，**则您已经登录到 mysql 控制台**。mysql 控制台不是通用外壳！

您使用的是 Windows，我怀疑您尚未在计算机中安装 gzip（它不是内置实用程序）。这是一个经典的 Unix 工具，但您可以找到适用于[Windows](http://gnuwin32.sourceforge.net/packages/gzip.htm)的二进制文件。安装它并通过一些调整运行您的原始命令：

1.  确保您处于 Windows 提示符 ( `C:\>`)

2.  将 gunzip 结果重定向[到标准输出](https://www.freebsd.org/cgi/man.cgi?query=gunzip&sektion=1#OPTIONS)而不是文件：

    ```
    gunzip --stdout C:/Vik/Gya/Source/beed_2013-04-06.sql.gz | mysql -u root -p bd 
    ```

或者，如果您先解压缩它，您可以从 MySQL promt ( `mysql>`) 中运行转储（您不需要专门的命令行 gzip，大多数 GUI 存档器，例如[7-Zip](http://www.7-zip.org/)都支持这种格式）：

```
mysql> \. C:/Vikalp/Gyankosh/Source/beedictionary_2013-04-06.sql 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2016-05-03T13:03:06.300

你不需要 gunzip 只是：zcat myfile.gz | mysql -uuser -ppassword mydatabase 这样更快

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-04-20T22:04:56.050

你的答案已经在这里

[phpMyAdmin：无法导入庞大的数据库文件，有什么建议吗？](https://stackoverflow.com/questions/5051253/phpmyadmin-cant-import-huge-database-file-any-suggestions)

在 php.ini 文件下，通常位于 c:\xampp\php 或 wampp 中，无论你叫什么

```
post_max_size=128M
upload_max_filesize=128M 
```

改变那里的价值会让你得到你想要的。祝你好运不要忘记重新启动，apache和mysql。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-07-18T11:41:00.960

尝试以下步骤使用 .gz 文件恢复数据库：

```
1\. Run command : gunzip C:/Vik/Gya/Source/beed_2013-04-06.sql.gz 
```

这将解压缩 .gz 文件并将 beed_2013-04-06.sql 存储在同一位置。

```
2\. Type the following command to import sql data file:
      mysql -u username -p bd < C:/Vik/Gya/Source/beed_2013-04-06.sql 
```

# android - 哪些应用程序组件可能成为 Android 应用程序的入口点？

> ID：16125613
> 
> 赞同：2
> 
> 时间：2013-04-20T21:56:51.923
> 
> 标签：android

Android 开发人员指南指出“应用程序组件是 Android 应用程序的基本构建块。每个组件都是系统可以通过它进入您的应用程序的不同点。并非所有组件都是用户的实际入口点，有些组件相互依赖”。我想知道，除了活动之外，哪些其他组件（服务、广播接收器）可以充当 Android 应用程序的入口点。我确信 ContentProvider 在这种情况下没有意义。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-20T21:59:01.420

> 我想知道，除了活动之外，哪些其他组件（服务、广播接收器）可以充当 Android 应用程序的入口点

如果它们被导出， A`Service`或 a`BroadcastReceiver`可以是“Android 应用程序的入口点”。

> 我确信 ContentProvider 在这种情况下没有意义。

我不同意。我认为 export`ContentProvider`也是“Android 应用程序的入口点”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-21T03:20:08.393

您也可以阅读[这篇论文](http://www.cc.gatech.edu/grads/l/long/download/CHEX_CCS12.pdf)（发表在顶级安全会议 CCS 2012 上）。作者提出了一种算法来从应用程序中发现可能的入口点。

# split - 尝试使用 SoX 将 Wav 文件拆分为两部分

> ID：16125614
> 
> 赞同：3
> 
> 时间：2013-04-20T21:56:57.837
> 
> 标签：split, wav, sox

我正在尝试将一个 .wav 文件分成两部分，其中有几秒钟的沉默。根据我找到的文档，以下内容应该有效：

```
 sox testfile.wav tester.wav silence 1 0.50 0.1% 1 1.0 0.1% : newfile : restart 
```

“testfile.wav”是一个录音，我在中间放了大约 4 秒的静音来测试。预期的结果是我会通过运行它得到“tester001.wav”和“tester002.wav”。相反，我得到一个文件 - “tester.wav”，它是原始文件的第一部分（直到静音）。我想知道如何让它继续并从沉默后的部分制作一个新文件。

我发现了这一点：[sox 无法](https://stackoverflow.com/questions/5210582/sox-fails-to-split-files)在 StackOverflow 上拆分文件，但对该问题的接受答案并没有改变我（将秒数更改为 3.0 给了我相同的结果，因为我有四秒的差距。它仍然没有给我第二个音频文件。）

任何帮助，将不胜感激！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-21T14:59:13.050

哈！事实证明，在我的服务器上运行的 SoX 版本是古老的，这就是问题所在。更新到当前版本后，一切都按预期工作。:)

# c++ - 使一堆 C++ 类具有可比性，同时避免代码重复

> ID：16125615
> 
> 赞同：0
> 
> 时间：2013-04-20T21:56:58.270
> 
> 标签：c++, templates, macros, non-repetitive

我需要创建一堆类，以便可以相互比较特定类型的实例。

我想写一个 compare 方法，每个类都是唯一的，然后将以下代码添加到每个类定义中，将 T 替换为我所在的类的名称：

```
bool operator== (const T& L, const T& R)        {return L.compare(R)==0;}
bool operator!= (const T& L, const T& R)      {return L.compare(R)!=0;}
bool operator< (const T& L, const T& R)       {return L.compare(R)<0;}
bool operator<= (const T& L, const T& R)        {return L.compare(R)<=0;}
bool operator> (const T& L, const T& R)       {return L.compare(R)>0;}
bool operator>= (const T& L, const T& R)      {return L.compare(R)>=0;} 
```

不过，这有点重复。有没有更通用的方法呢？我想我可以为此编写一个宏，在 T 上对其进行参数化，但是宏现在不是很 cplusplusy，是吗？我还考虑了继承和多态性，从我所读到的（我还没有使用虚拟类；我是 C++ 新手），我似乎会引入不必要的运行时开销，因为我m 不需要通过基类指针进行统一访问。除了宏或复制粘贴之外，还有更好的方法来完成它吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T22:51:32.327

# [Boost.Operators](http://www.boost.org/doc/libs/1_53_0/libs/utility/operators.htm)

> 标头`<boost/operators.hpp>`提供了几组类模板（在命名空间中`boost`）。这些模板根据类提供的最少数量的基本运算符在命名空间范围内定义运算符。

```
#include <boost/operators.hpp>
#include <cassert>

struct Integer : boost::totally_ordered<Integer>
{
    int value;
    Integer(int x) : value(x) {}
};

bool operator<(Integer lhs,Integer rhs)
{
    return lhs.value < rhs.value;
}
bool operator==(Integer lhs,Integer rhs)
{
    return lhs.value == rhs.value;
}

int main()
{
    Integer a(1), b(2), c(1);
    // We have defined only operator< and operator==
    assert(a < b);
    assert(a == c);
    // Other operators are provided automaticly:
    assert(a <= b);
    assert(b > a);
    assert(b >= a);
    assert(a != b);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-20T23:00:44.583

不使用升压：

```
#include <cassert>
struct Integer
{
    int value;
    Integer(int x) : value(x) {}
};

bool operator<(Integer lhs,Integer rhs)
{
    return lhs.value < rhs.value;
}
bool operator==(Integer lhs,Integer rhs)
{
    return lhs.value == rhs.value;
}

template< class T >
bool operator!= (const T& L, const T& R) { return !(L==R); }
template< class T >
bool operator<= (const T& L, const T& R) { return (L < R) || (L == R); }
template< class T >
bool operator>  (const T& L, const T& R) { return (!(L < R)) && (!(L == R)); }
template< class T >
bool operator>= (const T& L, const T& R) { return !(L < R); }

int main()
{
    Integer a(1), b(2), c(1);
    assert(a < b);
    assert(a <= b);
    assert(b > a);
    assert(b >= a);
    assert(a == c);
    assert(a != b);
} 
```

或更接近您的原始问题：

```
#include <cassert>
struct Integer {
  int value;
  Integer(int x) : value(x) {}
  int compare(const Integer & rhs) const {
    return (value - rhs.value);
  }
};

template< class T >
bool operator== (const T& L, const T& R) { return L.compare(R)==0; }
template< class T >
bool operator!= (const T& L, const T& R) { return L.compare(R)!=0; }
template< class T >
bool operator<  (const T& L, const T& R) { return L.compare(R)<0; }
template< class T >
bool operator<= (const T& L, const T& R) { return L.compare(R)<=0; }
template< class T >
bool operator>  (const T& L, const T& R) { return L.compare(R)>0; }
template< class T >
bool operator>= (const T& L, const T& R) { return L.compare(R)>=0; }

int main() {
  Integer a(1), b(2), c(1);
  assert(a < b);
  assert(a <= b);
  assert(b > a);
  assert(b >= a);
  assert(a == c);
  assert(a != b);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-20T22:38:50.740

我认为你能得到的最接近的是为基类提供运算符并要求所有可比较的类都从它继承。将它们实现为模板化的自由函数并不是一个好主意，因为它允许编译器尝试对您感兴趣的类型以外的类型进行操作。

```
class AClass
{
public:
    int compare(const AClass& a) const
    {
        return this == &a ? 0 : 1; // i'm sure you can do the -1 / 1 stuff
    }

    friend bool operator==(const AClass& L, const AClass& R)
    {
        return L.compare(R) == 0;
    }
}; 
```

这将允许比较 AClass 和所有后代。

# java - 字符串数组是可变的吗？

> ID：16125616
> 
> 赞同：8
> 
> 时间：2013-04-20T21:57:11.130
> 
> 标签：java, arrays, string, types, mutable

我想知道 Java 中的字符串数组是否是可变的？我知道字符串是不可变的，但是字符串数组呢？

如果我有一个字符串数组并更改内容，是否会创建一个新的字符串对象？还是会改变实际值？

提前致谢

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-04-20T22:00:15.950

中包含的`String`s`String[]`确实是不可变的，但是数组是可变的。

这在[这个答案](https://stackoverflow.com/a/2535564/1065197)中得到了很好的解释：

> *   不变性意味着某种类型的对象不能以任何有意义的方式改变外部观察者
>     *   `Integer`, `String`, 等是不可变的
>     *   通常所有值类型都应该是
> *   数组对象是可变的
>     *   它可能是对不可变类型的引用数组，但数组本身是可变的
>         *   这意味着您可以将这些引用设置为您想要的任何内容
>         *   也适用于基元数组
>     *   不可变数组不实用
> *   可以共享对对象的引用
>     *   如果对象是可变的，则通过所有这些引用可以看到突变

编辑：

有点相关：[为什么字符串在 Java 和 .NET 中不能是可变的？](https://stackoverflow.com/q/93091/1065197)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-20T22:00:48.040

据我记得你的数组中的字段将引用另一个字符串

```
String[] array {"I","like","rain"};
array[2] = "sun" 
```

你的数组可以改变。字符串本身不是。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-20T22:02:04.937

在数组中，每个元素只是一个指向对象的指针。所以，当你做类似的事情时

```
String one = "1";
String two = "2";
String three = "3";
String four = "4";
String[] myStringArray = {one, two, three};
myStringArray[2] = four; 
```

然后，位于数组第三个元素的指针现在指向**4**而不是**3**。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-08-03T19:04:16.423

正如某些人所说，该`String[]`数组不包含对字符串变量的引用。该`String[]`数组包含值（或更确切地说是对值的引用），但不包含对变量的引用。

```
public class Main {
    public static void main(String[] args) {

        String one="1";
        String two="2";

        String[] arr = {one, two};

        System.out.println(arr[1]);
        // Result is "2"

        two="3";

        System.out.println(arr[1]);
        // Result is still "2"
    }
} 
```

因此，如您所见， the`arr[1]`不是对`String two`. 它从变量中获取值，仅此`two`而已。更改变量`two`并没有影响`arr[1]`。

同样的事情`ArrayList`：

```
 //...

    String one="1";
        String two="2";
    List arr2 = new ArrayList<String>();

        arr2.add(one);
        arr2.add(two);

        System.out.println(arr2.get(0));
   // Result is "1"

        one = "one";
        System.out.println(arr2.get(0));
   // Result is still "1", not "one"

//... 
```

因此数组`String`元素是不可变的（这是合乎逻辑的，因为`String`s 是不可变的）。

当您将数组`arr`或`arr2`它们本身（而不是它们的不可变`String`元素）传递给过程时，就会发生可变性。

例如：

```
 change(arr);
   // where arr is a String[] array of {"1","2"}
   // see the procedure below

     System.out.println(arr[0]);
  // Result is "one"

  // ...

    static void change(String[] someArray){
        someArray[0]="one";
    } 
```

换句话说，数组是通过引用传递的（=可变的），但它的字符串元素是通过值传递的（不可变的）。

# android - Android OpenGL 2.0：对象拾取（查看是否用射线击中对象）

> ID：16125617
> 
> 赞同：0
> 
> 时间：2013-04-20T21:57:13.300
> 
> 标签：android, opengl-es, opengl-es-2.0

所以我试图让对象拾取在 OpenGL 2 中工作，在 OpenGK 1 中我使用了非常简单的 glpixelColor。

我有以下代码可以给我光线的起点和终点？？

```
Log.i("My POSITION", "x:" + mRenderer.eye.x + " y:" + mRenderer.eye.y + " z:" + mRenderer.eye.z);

float xyzw[] = unproject(x, mRenderer.screenHeight - y, -1.0f);
Log.i("Start of ray", "x:" + xyzw[0] + " y:" + xyzw[1] + " z:" + xyzw[2]);

xyzw = unproject(x, mRenderer.screenHeight - y, 1.0f);
Log.i("End of Ray", "x:" + xyzw[0] + " y:" + xyzw[1] + " z:" + xyzw[2]); 
```

我使用以下功能

```
public float[] unproject(float rx, float ry, float rz) {
            float[] xyzw = {0, 0, 0, 0};
            int[] viewport = { 0, 0, mRenderer.screenWidth, mRenderer.screenHeight};
            android.opengl.GLU.gluUnProject(rx, ry, rz, mRenderer.mViewMatrix, 0, mRenderer.mProjectionMatrix, 0, viewport, 0, xyzw, 0);
            xyzw[0] /= xyzw[3];
            xyzw[1] /= xyzw[3];
            xyzw[2] /= xyzw[3];
            xyzw[3] = 1;
            return xyzw;
        } 
```

我得到以下输出

我的位置：x:-1.857801 y:0.0 z:-8.655011 04-21

光线起点：x:-1.8198236 y:-0.005848203 z:-8.688532 04-21

光线结束：x:758.43915 y:-117.07846 z:-679.7136

**问题** 如果我在某个位置点击了立方体，我该如何计算？假设立方体在 1,1,1

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T18:57:52.187

我试过这个，它有点工作

```
float xDif = (xyzw2[0] - xyzw[0]) / 1000;
float yDif = (xyzw2[1] - xyzw[1]) / 1000;
float zDif = (xyzw2[2] - xyzw[2]) / 1000;

for (int i = 0; i < 1000; i ++)
{
    if ((xyzw[0] + (xDif * i)) > mRenderer.cube.position.x - 1.0 && (xyzw[0] + (xDif * i)) < mRenderer.cube.position.x + 1.0 && 
        (xyzw[1] + (yDif * i)) > mRenderer.cube.position.y - 1.0 && (xyzw[1] + (yDif * i)) < mRenderer.cube.position.y + 1.0 &&
        (xyzw[2] + (zDif * i)) > mRenderer.cube.position.z - 1.0 && (xyzw[2] + (zDif * i)) < mRenderer.cube.position.z + 1.0)
        {   
        Log.i("Hit cube", "HIT");
        break;
        }
    } 
```

# javascript - 使用javascript在海边打开链接

> ID：16125618
> 
> 赞同：3
> 
> 时间：2013-04-20T21:57:15.323
> 
> 标签：javascript, smalltalk, seaside

嗨，我是 Seaside 和 Smalltalk 的新手。我正在开发一个搜索应用程序，用户在其中发布查询，系统显示相关结果。现在要实现反馈，我想知道用户何时单击了特定链接。因此，单击链接涉及两件事：1）导航到该特定链接 2）在用户单击该链接的背景中注册。我坚持这样做。如果有人可以帮助解决这个问题，那就太好了。我对如何阅读其他帖子有所了解，这些帖子建议我实现回调并在该回调中使用 javascript 打开链接。有人可以提供这样做的代码。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T05:51:19.387

答案取决于您拥有什么样的*链接*。它是指向（外部）网页的链接还是 Seaside 应用程序本身的链接？在前者的情况下，将点击注册的 Seaside 回调和用于导航到链接的 javascript 结合起来是有意义的。你可以在这个问题中找到一个例子：[seaside : 2 events on html anchor](https://stackoverflow.com/questions/16004435/seaside-2-events-on-html-anchor)。

在另一种情况下，当您单击 Seaside 应用程序中的链接时执行的回调既可以注册用户操作，也可以将用户导航到应用程序中的其他页面：

```
html anchor
   callback:[ self registerClick. self call:: newPageComponent];
   with: 'click this' 
```

查看[Seaside 书籍](http://book.seaside.st)以了解有关回调和组件导航的所有信息。

# c# - 无法在 Visual Studio 中连接到 MySQL 数据库

> ID：16125620
> 
> 赞同：0
> 
> 时间：2013-04-20T21:57:54.760
> 
> 标签：c#, mysql, visual-studio-2010, wcf

我在 Visual Studio 2010 中有一个 WCF 项目。我有一个要连接的 MySQL 数据库。我安装了 MySQL 连接器 6.6.5。我点击 Server Explorer -> Add Connection，选择 MySQL Data Provider，输入主机名、用户名、密码，但它没有连接到数据库，并显示一条消息（当我点击“Test Connection”时）：

> “使用方法 'mysql_native_password' 对用户 ** 的主机 ** 身份验证失败并显示消息：用户 *** @IP_address 的访问被拒绝（使用密码：是）”

我该如何解决这个问题并连接到数据库？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T22:17:34.910

如果您安装了 phpmyadmin，您可以查看权限和凭据信息，请参阅我的屏幕截图以获取详细信息。我不得不将我的监听端口更改为：90 因为我也像你一样运行 IIS。你可以从这里获取 Xampp（获取 phpmyadmin）。[http://www.apachefriends.org/en/xampp-windows.html](http://www.apachefriends.org/en/xampp-windows.html)

![在此处输入图像描述](https://i.stack.imgur.com/JjGfm.png)

# ruby-on-rails - 如何在 Gitlab 上调试电子邮件发送？

> ID：16125623
> 
> 赞同：21
> 
> 时间：2013-04-20T21:58:05.803
> 
> 标签：ruby-on-rails, ruby, gitlab

我的 Gitlab（第 5 版）没有发送任何电子邮件，我在试图弄清楚发生了什么时迷失了方向。日志没有提供有用的信息。我将其配置为 used `sendmail`。

我写了一个通过 ActionMailer 发送电子邮件的小脚本（我猜它是 gitlab 用来发送电子邮件的，对吧？）。它会正确发送电子邮件。

但是，在我的 Gitlab 上，我可以保证 sendmail 甚至没有被调用。

我是否需要启用某些功能才能获得电子邮件通知？如何调试我的问题？

# 更新

问题是我在任何地方都找不到任何信息。事情只是默默地失败了。我在哪里可以找到某种日志？目录中的日志`log`没有提供有用的信息。

我的问题是，我怎样才能让 Gitlab 更冗长？我怎样才能让它告诉我发生了什么事？

# 更新 2

我刚刚发现该部分安排了很多邮件`Background jobs`。很多未加工的`Sidekiq::Extensions::DelayedMailer`。这是什么意思？为什么这些工作没有得到处理？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2018-04-06T13:27:29.983

今天偶然发现这个问题，这是我的研究：

尚不支持在 GitLab GUI 中调试 SMTP 连接。但是，有一个待处理的[功能请求](https://gitlab.com/gitlab-org/gitlab-ce/issues/16557#note_18106744)和一个[命令行解决方案](https://docs.gitlab.com/ee/administration/troubleshooting/debug.html)。

设置所需的 SMTP 设置`/etc/gitlab/gitlab.rb`并运行`gitlab-ctl reconfigure`（请参阅[https://docs.gitlab.com/omnibus/settings/smtp.html](https://docs.gitlab.com/omnibus/settings/smtp.html)）。

启动控制台运行`gitlab-rails console -e production`。

显示配置的交付方式（应该是`:smtp`）运行命令`ActionMailer::Base.delivery_method`。显示所有正在运行的已配置 SMTP 设置`ActionMailer::Base.smtp_settings`。

发送测试邮件运行

```
Notify.test_email('youremail@example.com', 'Hello World', 'This is a test message').deliver_now 
```

在 GitLab 的管理页面上，»后台作业«部分显示有关所有作业的信息。那里也列出了失败的 SMTP 连接。

请注意，您可能需要重新启动 GitLab 实例才能使用新配置的 SMTP 设置（在我的实例上，控制台能够发送邮件，GUI 需要重新启动）。运行`gitlab-ctl restart`以重新启动您的实例。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-04-21T20:35:32.043

首先，我将说明我的问题：sidekiq 负责处理发送电子邮件。由于某种原因，我的 sidekiq 卡住了，重新启动它解决了问题。

我在哪里找到有关我在 Gitlab 上发现的问题的信息：

1.  日志目录。它有一些信息。
2.  在管理页面上，“后台作业”部分提供了有关 sidekiq 的信息。
3.  javascript 控制台（如果您的浏览器支持）也有有用的信息。仅当您的问题与 javascript 相关时。
4.  如果你达到了这一点，你可以修改 Gitlab 的代码，这样你就可以“跟踪它”写入文件：

    `File.open('/tmp/logfile','a') { |file| file.write("Hello World!\n") }`

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-20T23:14:52.663

也许尝试在生产模式下启用交付错误，看看会发生什么

```
 config.action_mailer.raise_delivery_errors = true 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-08-04T20:13:59.483

在后台作业下的管理部分中，如果计划选项卡中有很多项目，请尝试重新启动`sidekiq`：

```
cd /home/git/gitlab    
exec rake sidekiq:start RAILS_ENV=production 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-02-25T15:39:43.320

我有同样的问题，发现我需要修改 application.rb：

```
diff --git a/config/application.rb b/config/application.rb
index d85bcab..274976f 100644
--- a/config/application.rb
+++ b/config/application.rb
@@ -11,6 +11,8 @@ end

 module Gitlab
   class Application < Rails::Application
+    config.action_mailer.sendmail_settings = { :arguments => "-i" }
+
     # Settings in config/environments/* take precedence over those specified here.
     # Application configuration should go into files in config/initializers
     # -- all .rb files in that directory are automatically loaded. 
```

注意：我正在运行使用 exim 发送邮件的 Debian 7。

# java - newFixedThreadPool 与 newSingleThreadExecutor 的性能问题

> ID：16125626
> 
> 赞同：6
> 
> 时间：2013-04-20T21:58:15.870
> 
> 标签：java, multithreading, performance, concurrency, threadpool

我正在尝试对我们的客户端代码进行基准测试。所以我决定编写一个多线程程序来对我的客户端代码进行基准测试。我正在尝试测量`time (95 Percentile)`以下方法需要多少-

`attributes = deClient.getDEAttributes(columnsList);`

下面是我编写的多线程代码，用于对上述方法进行基准测试。我在两种情况下看到了很多变化-

1）首先，使用多线程代码`20 threads`and `running for 15 minutes`。我得到 95 个百分位`37ms`。我正在使用-

```
ExecutorService service = Executors.newFixedThreadPool(20); 
```

2）但是如果我正在运行相同的程序来`15 minutes`使用-

`ExecutorService service = Executors.newSingleThreadExecutor();`

代替

`ExecutorService service = Executors.newFixedThreadPool(20);`

当`7ms`我使用`newFixedThreadPool(20)`.

**谁能告诉我这种高性能问题的原因是什么 -**

`newSingleThreadExecutor vs newFixedThreadPool(20)`

通过这两种方式，我正在运行我的程序`15 minutes`。

下面是我的代码-

```
public static void main(String[] args) {

    try {

        // create thread pool with given size
        //ExecutorService service = Executors.newFixedThreadPool(20);
        ExecutorService service = Executors.newSingleThreadExecutor();

        long startTime = System.currentTimeMillis();
        long endTime = startTime + (15 * 60 * 1000);//Running for 15 minutes

        for (int i = 0; i < threads; i++) {
            service.submit(new ServiceTask(endTime, serviceList));
        }

        // wait for termination        
        service.shutdown();
        service.awaitTermination(Long.MAX_VALUE, TimeUnit.DAYS);
    } catch (InterruptedException e) {

    } catch (Exception e) {

    }
} 
```

下面是实现 Runnable 接口的类-

```
class ServiceTask implements Runnable {

    private static final Logger LOG = Logger.getLogger(ServiceTask.class.getName());
    private static Random random = new SecureRandom();

    public static volatile AtomicInteger countSize = new AtomicInteger();

    private final long endTime;
    private final LinkedHashMap<String, ServiceInfo> tableLists;

    public static ConcurrentHashMap<Long, Long> selectHistogram = new ConcurrentHashMap<Long, Long>();

    public ServiceTask(long endTime, LinkedHashMap<String, ServiceInfo> tableList) {
        this.endTime = endTime;
        this.tableLists = tableList;
    }

    @Override
    public void run() {

        try {

            while (System.currentTimeMillis() <= endTime) {

                double randomNumber = random.nextDouble() * 100.0;

                ServiceInfo service = selectRandomService(randomNumber);

                final String id = generateRandomId(random);
                final List<String> columnsList = getColumns(service.getColumns());

                List<DEAttribute<?>> attributes = null;

                DEKey bk = new DEKey(service.getKeys(), id);
                List<DEKey> list = new ArrayList<DEKey>();
                list.add(bk);

                Client deClient = new Client(list);

                final long start = System.nanoTime();

                attributes = deClient.getDEAttributes(columnsList);

                final long end = System.nanoTime() - start;
                final long key = end / 1000000L;
                boolean done = false;
                while(!done) {
                    Long oldValue = selectHistogram.putIfAbsent(key, 1L);
                    if(oldValue != null) {
                        done = selectHistogram.replace(key, oldValue, oldValue + 1);
                    } else {
                        done = true;
                    }
                }
                countSize.getAndAdd(attributes.size());

                handleDEAttribute(attributes);

                if (BEServiceLnP.sleepTime > 0L) {
                    Thread.sleep(BEServiceLnP.sleepTime);
                }
            }
        } catch (Exception e) {

        }
    }
} 
```

**更新：-**

这是我的处理器规格-我从 Linux 机器上运行我的程序，其中 2 个处理器定义为：

```
vendor_id       : GenuineIntel
cpu family      : 6
model           : 45
model name      : Intel(R) Xeon(R) CPU E5-2670 0 @ 2.60GHz
stepping        : 7
cpu MHz         : 2599.999
cache size      : 20480 KB
fpu             : yes
fpu_exception   : yes
cpuid level     : 13
wp              : yes
flags           : fpu vme de pse tsc msr pae mce cx8 apic sep mtrr pge mca cmov pat pse36 clflush dts acpi mmx fxsr sse sse2 ss syscall nx rdtscp lm constant_tsc arch_perfmon pebs bts rep_good xtopology tsc_reliable nonstop_tsc aperfmperf pni pclmulqdq ssse3 cx16 sse4_1 sse4_2 popcnt aes hypervisor lahf_lm arat pln pts
bogomips        : 5199.99
clflush size    : 64
cache_alignment : 64
address sizes   : 40 bits physical, 48 bits virtual
power management: 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-04-20T22:08:24.883

> 谁能告诉我`newSingleThreadExecutor`vs出现这种高性能问题的原因是什么`newFixedThreadPool(20)`...

如果您并行运行的任务（在这种情况下为 20 个）比您拥有的处理器多得多（我怀疑您有 20+ 个处理器盒），那么是的，每个单独的任务都需要更长的时间才能完成。计算机一次执行一项任务比在同时运行的多个线程之间切换更容易。即使您将池中的线程数限制为您拥有的 CPU 数，每个任务也可能会运行得更慢，尽管会稍微慢一些。

但是，如果您比较不同大小的线程池的*吞吐量*（完成多个任务所需的时间），您应该会发现 20 个线程的吞吐量应该更高。如果您使用 20 个线程执行 1000 个任务，它们总体上将比仅使用 1 个线程完成得快得多。每个任务可能需要更长的时间，但它们将并行执行。考虑到线程开销等，它可能不会快 20 倍，但它可能会快 15 倍。

您不应该担心单个任务的速度，而应该尝试通过调整池中的线程数来最大化任务吞吐量。使用多少线程很大程度上取决于 IO 量、每个任务使用的 CPU 周期、锁、同步块、操作系统上运行的其他应用程序以及其他因素。

人们通常使用 1-2 倍的 CPU 数量作为开始池中线程数量以最大化吞吐量的好地方。更多 IO 请求或线程阻塞操作然后添加更多线程。更多的 CPU 绑定然后减少线程数以更接近可用的 CPU 数。如果您的应用程序正在与服务器上其他更重要的应用程序竞争操作系统周期，那么可能需要更少的线程。

# arduino - Arduino将char传递给函数

> ID：16125627
> 
> 赞同：0
> 
> 时间：2013-04-20T21:58:17.960
> 
> 标签：arduino

如果这是一个愚蠢的问题（可能是），我深表歉意，但我很难让函数正常工作。

我的代码：

```
#define photoPin A0    
char photoCode[] = "L";

void loop(void) {
   analogSensor(photoPin, photoCode);
   delay(5000);
}

void analogSensor(int sensorPin, char* sensorCode) {
   //Poll the Photo Cell and append that to the buffer
   int sensorValue=analogRead(sensorPin);
   Serial.print(sensorCode);
   sprintf(buf + strlen(buf), "," + sensorCode + ":%04i", sensorValue);

} 
```

当我尝试编译它时，我收到以下消息：

```
In function 'void analogSensor(int, char*)':
i2c_Sensor:104: error: invalid operands of types 'const char [2]' and 'char*' to binary 'operator+' 
```

但是，如果我注释掉 sprintf 行，它编译得很好，并且每隔 5 秒，屏幕上就会打印出一个“L”。最终，我很困惑，因为所有人都出去了，现在不知道该转向哪里。

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T22:14:22.890

最后一个格式被破坏了:)

我担心你不能用 + 运算符连接 char* :) 你必须调用 sprintf 或 strcat :) 请参阅你当地的手册页。

而不是这个：

```
sprintf(buf + strlen(buf), "," + sensorCode + ":%04i", sensorValue); 
```

尝试这个：

```
sprintf( buf+strlen(buf), ",%s:%04i", sensorCode, sensorValue ); 
```

# r - 将参数的值插入图例

> ID：16125628
> 
> 赞同：0
> 
> 时间：2013-04-20T21:58:18.397
> 
> 标签：r, legend

我正在尝试编写一个带有图形输出的函数。我想插入一个带有参数值的图例。

例如：

```
f<-function(x,alpha=0.9){
   ....
   plot(x)
   legend("topleft",expression(alpha)???)
   } 
```

'expression(alpha)' 应该等于 alpha 的当前值。

谁能告诉我我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T22:07:09.113

我还没有看到测试用例，但是这类问题（需要计算表达式的一部分）的通常答案是`bquote`它的内置`.()`函数：

```
f<-function(x,alpha=0.9){ .... plot(x) legend("topleft", bquote(.(alpha)) ) } 
```

`.() 函数隔离值得评估的部分。另请参阅 plotmath 页面：

```
?plotmath 
```

有时`substitute`需要：

```
 alpha=0.2
 substitute( alpha, list(alpha=alpha) )
 #0.2 
```

....但大多数人发现`bquote`更容易使用。

要求进行一些编辑以避免覆盖 label1 的附加代码：

```
x<-seq(0,60,length=150) 
 y<-rnorm(150,0,10) 
 yy<-x+y 
 d<-cbind(x,yy) 
 m<-lm(d[,2]~d[,1]) 
 plot(x,yy) > abline(m) 
 label1<-summary(m)$'r.squared' 
 label2<-summary(m)$'adj.r.squared' 
 legend("topleft", legend=bquote( R^2==.(label1)*";"~Adj.R^2==.(label2) ) ) 
```

# c - C：无法从结构中的字符串数组中访问元素

> ID：16125635
> 
> 赞同：1
> 
> 时间：2013-04-20T21:59:29.050
> 
> 标签：c, arrays, pointers, struct

我是 C 的新手，我并不完全理解所有这些指针和内存分配的东西，如果我在概念上是错误的，很抱歉。我正在尝试访问字符串数组中的字符串元素，但字符串数组位于结构中，每次我尝试访问它时，我的程序都会崩溃。

当我尝试执行此 if 语句检查时出现错误

```
if (strcmp(functionList[holder].otherServers[i], "") == 0) 
```

我只想检查结构数组（functionList [holder]）中的当前结构元素是否为其字符串数组（otherServers [i]）中的元素填充了一个空值。当它找到它的第一个空元素时，我要做的就是在字符串数组的索引中复制一个字符串（otherServers[i]）

这是我的代码（注意：我取出了很多我认为与问题无关的代码）

```
struct function {
    char name[20];
    int parameterNumer;
    int canDo;
    //currently the system has a 10 server max. You can change this easily
    char *otherServers[10];    
};

//global scope variables
//currently the system has a 10 server max. You can change this easily
char *serverList[10];
struct function functionList[10] = {{"",0, 0, {}}};
int numberofOtherServers;

while(strcmp(functionList[i].name, "") != 0 && i != -1)
{            
    //if the function exist in the functionList already, then just add server to the functions list of capable servers
    if(strcmp(functionList[i].name, functionName) == 0 && functionList[i].parameterNumer == functionParam)
    {
        holder = i;
        //function found so go through the functions list of servers and add it to the list
        i = 0;
        while(i >= 0)
        {
            if(strcmp(functionList[holder].otherServers[i], "") == 0)
            {
                strcpy(functionList[holder].otherServers[i], serverHelloName);
                i = -1; //
            }
            if(i == 9)
            { //ran through entire list of all possible servers and couldnt find an empty slot
                printf("server list full, should allow more room for other servers");
                fflush(stdout);
                i = -1;
            }
        }
        printf("yay");
        fflush(stdout);
    }
    if(i == 9)
    { //ran through entire list of all possible functions and did not see an empty slot or there is no match
        printf("function list full so could not add, and there was no match for any functions");
        fflush(stdout);
        i = -1;
    }
    i++;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T22:23:30.187

您的代码未显示`otherServers`. 当您有一个字符指针数组时，例如`otherServers`，您需要为每个字符串分配内存，以便有一些东西可以指向。

这意味着您需要先检查指针点是否有效，然后才能执行此操作`strcmp()`，并且`strcpy()`：

```
if(strcmp(functionList[holder].otherServers[i], "") == 0) {
    strcpy(functionList[holder].otherServers[i], serverHelloName);
    i = -1;
} 
```

相反，此代码段将检查`otherServers[i]`尚未分配的内容，然后分配足够的内存来存储字符串：

```
if ( functionList[holder].otherServers[i] == NULL ) {
    // add one for the terminator
    functionList[holder].otherServers[i] = malloc(strlen(serverHelloName) + 1);

    // make sure the allocation worked
    if ( functionList[holder].otherServers[i] == NULL ) {
        // something went wrong so bail
        break;
    }
    strcpy(functionList[holder].otherServers[i], serverHelloName);
} 
```

当您完成`otherServers[]`or`functionList[]`本身后，您需要释放之前分配的内存：

```
for ( i = 0; i < 10; i++ ) {

    if ( functionList[holder].otherServers[i] != NULL ) {
        free(functionList[holder].otherServers[i]);
        functionList[holder].otherServers[i] = NULL;
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-20T22:28:14.060

最好在初始化程序中用 NUL 代替普通的 ""：

```
struct function functionList[10] = {{{'\0'},0, 0, {}}}; 
```

要检查示例中的名称是否已分配，您只需取消引用它并检查 NUL 字符：

```
*functionList[i].name == '\0' 
```

`strcmp`检查从提供的偏移量开始的 nul 字符（又名零终止符），如果找不到，将继续超出数组 - 导致未定义的行为，很可能是访问冲突，具体取决于此缓冲区的方式分配。

SpacedMonkey 击败了我，获得了有效答案的其余部分；您需要为字符串分配存储空间。默认情况下，指针只指向内存中的某个区域 - 您必须`malloc`在使用它之前手动分配它，并使用`free`.

# version-control - 在 Emacs Lisp 中获取 VC 根目录

> ID：16125637
> 
> 赞同：5
> 
> 时间：2013-04-20T21:59:33.220
> 
> 标签：version-control, emacs, elisp, visual-c++, magit

在 Emacs Lisp 函数中，我想知道任意文件夹的 VC 根目录（如果在源代码控制下），就像 vc-print-root-log 一样。我正在尝试从 VC 文件/文件夹之外执行此操作（尽管创建一个临时缓冲区来执行此操作会很好）。我目前通过 magit - 有一个仅 git 的解决方案`(magit-get-top-dir dir-name)`。

我尝试使用`(vc-deduce-backend)`'root 命令，但 vc-deduce-backend 检查的变量似乎只在现有的 vc 模式（例如 log-view-mode）缓冲区中设置。

有没有一种简单的方法可以从 VC 中解决这个问题？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-21T02:24:12.033

查看您自己的示例`vc-print-root-log`，以下似乎是您所追求的：

```
(require 'vc)
(let ((path "~/.emacs.d/el-get/"))
  (vc-call-backend (vc-responsible-backend path) 'root path)) 
```

# html - 无法使用退格键删除 n 可编辑 div 内的元素 - Jquery

> ID：16125640
> 
> 赞同：0
> 
> 时间：2013-04-20T22:00:25.183
> 
> 标签：html, contenteditable

我得到了这个 html

```
<div contenteditable="true"> Hey <a class="tgt" contenteditable="false">harry</a> great </div> 
```

在`firefox`我无法删除`a.tgt`使用时`backspace`时。在除 Firefox 之外的所有其他浏览器中被删除

有什么问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-10-10T15:15:34.277

这可能对某些人有帮助。我遇到了同样的问题。

而不是这个： `<div contenteditable="true"> Hey <a class="tgt" contenteditable="false">harry</a> great </div>`

你可以有这个： `<div contenteditable="true"> Hey <a class="tgt" contenteditable="false">harry</a><span class="remove"></span> great </div>`

您可以使用 javascript（在这种情况下使用 jquery）来检测 .remove 的删除并同时删除您不可编辑的 div：

```
// you can wrap this in an if statement and only execute in firefox
$('.remove').on("DOMNodeRemoved", function() { 
    $(this).prev(".tgt").remove();
}); 
```

希望这可以帮助！

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-20T22:07:51.427

尝试使用属性**contenteditable=true**`<a>`将html 包装到**span**标记中

 **```
<div contenteditable="true"> Hey <a class="tgt" contenteditable="false"> <span contentEditable="true">harry</span></a> great</div> 
```**

# linux - 使用 Puppet 管理 shell 命令

> ID：16125641
> 
> 赞同：0
> 
> 时间：2013-04-20T22:00:29.163
> 
> 标签：linux, ubuntu, deployment, puppet, vagrant

例如让我们尝试让 Puppet[安装 opengeo-suite](http://suite.opengeo.org/opengeo-docs/installation/linux/ubuntu/suite.html)。

做类似的事情

```
wget -qO- http://apt.opengeo.org/gpg.key | apt-key add -
echo "deb http://apt.opengeo.org/suite/v3/ubuntu lucid main" >> /etc/apt/sources.list 
```

我们可以用

```
exec {'getKey':
    command => "wget -qO- http://apt.opengeo.org/gpg.key | apt-key add -",
}

exec {'addRepo':
    command => "echo "deb http://apt.opengeo.org/suite/v3/ubuntu lucid main" >> /etc/apt/sources.list",
} 
```

**问题一：**如果我们再次运行 puppet 脚本，wget 和 echo 不会运行两次吗？我们最终会在`/etc/apt/sources.d`. 运行`package { "opengeo-suite": }`两次不会尝试安装包两次，它只是确保它已安装。

**问题#2：**是否`apt-get install opengeo-suite`有几个用户输入提示。使用`Package{"opengeo-suite":}`时，Puppet 会以某种方式知道要使用的默认输入，还是会崩溃？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T00:01:44.790

首先，已经有一些特定于木偶的方法可以做到这一点：

[https://serverfault.com/questions/111766/adding-a-yum-repo-to-puppet-before-doing-anything-else](https://serverfault.com/questions/111766/adding-a-yum-repo-to-puppet-before-doing-anything-else)

Q1：是的，一切都会一次又一次地运行。通常，您必须保护您的执行官说“仅当此文件不存在时”，或“检查网站并在不同时更新”或“强制文件具有这些内容”。

此外，通常您可以创建 /etc/apt/sources.list.d/myrepo.conf，而不是附加到 /etc/apt/sources.list。

Q2：Puppet 可能会挂掉。您可以使用“apt-get install -y package”。但是最好使用为安装包而设计的 Puppet 资源来安装包。

# prolog - Basic Prolog - 任意数量的原子（Prolog 的新功能）

> ID：16125652
> 
> 赞同：1
> 
> 时间：2013-04-20T22:02:13.290
> 
> 标签：prolog

```
palindrome_list_atomes(A,B):-  
  atom_concat(A,B,C),  
  atom_chars(C,X),  
  palindrome_list(X). 
```

我想让 palindrome_list_atomes(A,B) 除了任何数量的原子（不仅仅是 A 和 B），然后 atom_concat 将这些相对数量的原子加在一起以创建原子 C。

```
atom_charts(C,X) 
```

只需将其转换为字符列表，然后将 X 传递给另一个谓词。

我确定这样的事情很容易（应该如此），我只是 Prolog 的新手，并且厌倦了在谷歌上达到死胡同。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T04:38:04.437

如果我理解你的问题，你必须传递一个原子列表：

```
palindrome_list_atomes(Atoms):-  
  list_concat(Atoms, Big),  
  atom_chars(Big,Chars),
  palindrome_list(Chars).

list_concat([], '').
list_concat([A|As], R) :-
  list_concat(As, T),
  atom_concat(A, T, R). 
```

[list_concat/2 它是atomic_list_concat](http://www.swi-prolog.org/pldoc/man?predicate=atomic_list_concat/2) /2 的可怜人替代品，可在 SWI-Prolog' 库中找到。当然，如果可用，请使用内置函数。

# jquery - 对于每个 li 元素，从 XML 中附加一个随机 AJAX 项

> ID：16125653
> 
> 赞同：0
> 
> 时间：2013-04-20T22:02:24.130
> 
> 标签：jquery, html, xml, ajax

我正在尝试使用 AJAX 将 XML 文档中的随机项目附加到 ul 中的每个 li 项目，但我真的不知道从哪里开始，或者这是否可能。换句话说，对于每个 li 元素，抓取一个随机 XML 项并将其附加到列表项。

到目前为止，我的脚本看起来像这样，html 只是一个空白 ul，我没有收到任何错误，所以我不确定为什么这不起作用：

```
$(document).ready(function(){
    $.ajax({
        type: "GET",
        url: "myxmlpage.xml",
        dataType: "xml",
        success: parseXml
    }); 
});

function parseXml(xml){
    var random;
    $(xml).find("item:eq(" + random + ")").each(function(){
        random = Math.floor(Math.random()*10);  
        $('ul').append("<li>" + $(this).find("item").text() + "</li>");
    });
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T22:13:55.233

```
function parseXml(xml){
    var random;

    var $items = $(xml).find('item');
    var itemsCount = $items.length;

    $('ul li').each(function(){
         var random = Math.floor(Math.random()*itemsCount);
         $(this).html($($items.get(random)).text());
    });
} 
```

# python - 为什么我的 for 循环不在此代码中迭代？

> ID：16125654
> 
> 赞同：1
> 
> 时间：2013-04-20T22:02:28.293
> 
> 标签：python, for-loop, iteration, turing-machines

```
eachconfig = [['a', ['blank', ['p1', 'r', 'r'], ['b']]], ['b', ['blank', ['p0'], ['c']]], ['c', ['blank', ['r', 'r'], ['a']]]]
def turingmachine(data):
    a = 0
    tape = []
    finalmc = data[0][0]
    for z in range(1,40):
        tape.append(' ')
    mcName = []
    m = 0
    for emc in range(1,len(data)+1):
        goal = data[m][0]
        mcName.append(goal)
        m+=1
    mcNumber = [h-1 for h in range(1,len(mcName)+1)]
    mcNameNumber = dict(zip(mcName,mcNumber))

    d = 0
    tapeposition = d
    tapescan = tape[d]
    for process in range(1,len(tape)):
        b = 0
        c = 0

        cconfig = data[a][b]
        if cconfig == finalmc:
            b += 1
            scannedsymbol = data[a][b][c]
            if isinstance(scannedsymbol, str):
                if scannedsymbol.lower() in ('any', 'blank'):
                    c += 1
                    operations = data[a][b][c]
                    for cycle in operations:
                        if cycle[0] in ('p','P'):
                            tape[tapeposition] = cycle[1:]
                        elif cycle[0] in ('r', 'R'):
                            tapeposition += 1
                        elif cycle[0] in ('l', 'L'):
                            tapeposition -= 1
                        elif cycle[0] in ('e', 'E'):
                            tape[tapeposition] == ' '   
                    finalmc = data[a][b][-1][0]
                    a = mcNameNumber[finalmc]
        return tape

print turingmachine(eachconfig) 
```

这段代码我的效率可能并不惊人，也不完整，它只是当前'eachconfig'列表中设置数据的一个框架。尽管如此，程序的输出仍然只是`[1, ' ', ' ', ' ', ...]`，它应该在哪里`[1, ' ' , 0 , ' ' , 1 , ' ' , 0 , ...]`

我已经阅读了数十次代码，我通过打印出每一行来检查错误，我发现问题在于它只迭代循环一次（有问题的循环是`for process in range(1,len(data)+1):`循环，之前的循环仅用于初始化），但我不知道为什么。为什么会这样？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-20T22:35:23.713

简单的答案：因为您的 return 语句在 for 循环内。所以，可能只是一个缩进错误。

但我必须说，这段代码非常不符合 Python 风格。您正在对范围进行大量迭代，这应该始终是一个危险信号：在 Python 中，您通常希望迭代一个实际的东西，而不是一个特别构造的范围。在任何情况下，由于您甚至没有使用循环变量 ( `process`)，因此您应该考虑 for 循环是否是正确的结构。

另外，正如火山在评论中指出的那样，您的大部分设置代码都可以大大缩短。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-20T22:35:36.993

您返回`tape`内部循环，即带有 的循环`process in range(...)`，因此只发生一次迭代。你的`tape`也不够长，你对每个`tape`可用空间进行了几次操作，我也没有找到任何“终止”符号，所以在这种`for`情况下它永远不会足够长。

这是“固定”代码：

```
eachconfig = [['a', ['blank', ['p1', 'r', 'r'], ['b']]], ['b', ['blank', ['p0'], ['c']]], ['c', ['blank', ['r', 'r'], ['a']]]]
def turingmachine(data):
    a = 0
    tape = []
    finalmc = data[0][0]
    for z in range(1,40):
        tape.append(' ')
    mcName = []
    m = 0
    for emc in range(1,len(data)+1):
        goal = data[m][0]
        mcName.append(goal)
        m+=1
    mcNumber = [h-1 for h in range(1,len(mcName)+1)]
    mcNameNumber = dict(zip(mcName,mcNumber))

    d = 0
    tapeposition = d
    tapescan = tape[d]
    for process in range(1,len(tape) - 8):
        b = 0
        c = 0

        cconfig = data[a][b]
        if cconfig == finalmc:
            b += 1
            scannedsymbol = data[a][b][c]
            if isinstance(scannedsymbol, str):
                if scannedsymbol.lower() in ('any', 'blank'):
                    c += 1
                    operations = data[a][b][c]
                    for cycle in operations:
                        if cycle[0] in ('p','P'):
                            tape[tapeposition] = cycle[1:]
                        elif cycle[0] in ('r', 'R'):
                            tapeposition += 1
                        elif cycle[0] in ('l', 'L'):
                            tapeposition -= 1
                        elif cycle[0] in ('e', 'E'):
                            tape[tapeposition] == ' '
                    finalmc = data[a][b][-1][0]
                    a = mcNameNumber[finalmc]
    return tape

print turingmachine(eachconfig) 
```

# android - 跨越 2 个片段的按钮（xml 布局）

> ID：16125658
> 
> 赞同：1
> 
> 时间：2013-04-20T22:02:52.887
> 
> 标签：android, xml

无法弄清楚如何在 XML 中进行设置...

试图让一个按钮放置在它后面的 2 个片段上。

我想要的是：

![在此处输入图像描述](https://i.stack.imgur.com/N0H4I.jpg)

我有的：

![在此处输入图像描述](https://i.stack.imgur.com/2sRB2.jpg)

我的代码：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="horizontal"
    tools:context=".VulgarActivity" 
    >
    <Button
        android:id="@+id/luckBtn"
        android:layout_gravity="bottom"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="@string/feel_lucky"
        android:textColor="#ffffff"
        />
    <fragment
        android:name="com.wizardknight.visionaryvulgarity.FirstWord"
        android:id="@+id/firstWord"
        android:layout_weight="1"
        android:layout_width="0dp"
        android:layout_height="match_parent"
        />
    <fragment
        android:name="com.wizardknight.visionaryvulgarity.LastWord"
        android:id="@+id/lastWord"
        android:layout_weight="1"
        android:layout_width="0dp"
        android:layout_height="match_parent"
        />  
</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T22:07:01.013

您可以使用以下命令执行此操作`RelativeLayout`：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="horizontal" >

    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="match_parent" >

        <fragment
            android:id="@+id/firstWord"
            android:name="com.wizardknight.visionaryvulgarity.FirstWord"
            android:layout_width="0dp"
            android:layout_height="match_parent"
            android:layout_weight="1" />

        <fragment
            android:id="@+id/lastWord"
            android:name="com.wizardknight.visionaryvulgarity.LastWord"
            android:layout_width="0dp"
            android:layout_height="match_parent"
            android:layout_weight="1" />
    </LinearLayout>

    <Button
        android:id="@+id/luckBtn"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentBottom="true"
        android:layout_centerHorizontal="true"
        android:layout_gravity="bottom"
        android:text="@string/feel_lucky"
        android:textColor="#ffffff" />

</RelativeLayout> 
```

![在此处输入图像描述](https://i.stack.imgur.com/3ThPs.png)

## 解释：

`RelativeLayout`和之间的区别`LinearLayout`很简单。`LinearLayouts`就像名字已经说过的那样，线性地排列他们的子视图。这意味着，孩子将根据彼此的方向`LinearLayout`垂直或水平排列自己。`RelativeLayout`另一方面，子视图*相*对于父视图或其他视图对自身进行排序。在此布局中，我只是将父布局更改为`RelativeLayout`并将您的片段包装在 a 中`LinearLayout`，以便它们可以使用该`layout_weight`属性。然后我将其设置为按钮：

```
android:layout_alignParentBottom="true"
android:layout_centerHorizontal="true" 
```

这会将按钮与底部对齐并将它们水平居中。现在，由于它相对于顶级布局执行此操作，因此它与片段重叠。

# c++ - 如何从 8 位整数中获得大于 8 位的值？

> ID：16125660
> 
> 赞同：119
> 
> 时间：2013-04-20T22:02:58.770
> 
> 标签：c++, gcc, undefined-behavior

我找到了隐藏在这个小宝石后面的一个非常讨厌的错误。我知道，根据 C++ 规范，有符号溢出是未定义的行为，但只有当值扩展到 bit-width 时才会发生溢出`sizeof(int)`。据我了解，`char`只要`sizeof(char) < sizeof(int)`. 但这并不能解释如何`c`获得*不可能*的价值。作为一个 8 位整数，如何`c`保存大于其位宽的值？

## 代码

```
// Compiled with gcc-4.7.2
#include <cstdio>
#include <stdint.h>
#include <climits>

int main()
{
   int8_t c = 0;
   printf("SCHAR_MIN: %i\n", SCHAR_MIN);
   printf("SCHAR_MAX: %i\n", SCHAR_MAX);

   for (int32_t i = 0; i <= 300; i++)
      printf("c: %i\n", c--);

   printf("c: %i\n", c);

   return 0;
} 
```

## 输出

```
SCHAR_MIN: -128
SCHAR_MAX: 127
c: 0
c: -1
c: -2
c: -3
...
c: -127
c: -128  // <= The next value should still be an 8-bit value.
c: -129  // <= What? That's more than 8 bits!
c: -130  // <= Uh...
c: -131
...
c: -297
c: -298  // <= Getting ridiculous now.
c: -299
c: -300
c: -45   // <= .......... 
```

## [在ideone上查看。](http://ideone.com/93syPL)

* * *

## 回答 #1

> 赞同：111
> 
> 时间：2013-04-20T22:24:04.650

[这是一个编译器错误。](http://gcc.gnu.org/bugzilla/show_bug.cgi?id=35634)

尽管为未定义的行为获得不可能的结果是一个有效的结果，但实际上您的代码中没有未定义的行为。发生的事情是编译器*认为*行为未定义，并相应地进行优化。

如果`c`定义为`int8_t`，并`int8_t`提升为`int`，则应该在算术`c--`中执行减法并将结果转换回。减法不会溢出，将超出范围的整数值转换为另一种整数类型是有效的。如果目标类型是有符号的，则结果是实现定义的，但它必须是目标类型的有效值。（如果目标类型是无符号的，则结果是明确定义的，但这不适用于此处。）`c - 1``int``int8_t``int`

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2013-04-21T04:01:41.940

A compiler can have bugs which are other than nonconformances to the standard, because there are other requirements. A compiler should be compatible with other versions of itself. It may also be expected to be compatible in some ways with other compilers, and also to conform to some beliefs about behavior that are held by the majority of its user base.

In this case, it appears to be a conformance bug. The expression `c--` should manipulate `c` in a way similar to `c = c - 1`. Here, the value of `c` on the right is promoted to type `int`, and then the subtraction takes place. Since `c` is in the range of `int8_t`, this subtraction will not overflow, but it may produce a value which is out of the range of `int8_t`. When this value is assigned, a conversion takes place back to the type `int8_t` so the result fits back into `c`. In the out-of-range case, the conversion has an implementation-defined value. **But a value out of the range of `int8_t` is not a valid implementation-defined value. An implementation cannot "define" that an 8 bit type suddenly holds 9 or more bits.** For the value to be implementation-defined means that something in the range of `int8_t` is produced, and the program continues. **The C standard thereby allows for behaviors such as saturation arithmetic (common on DSP's) or wrap-around (mainstream architectures).**

The compiler is using a wider underlying machine type when manipulating values of small integer types like `int8_t` or `char`. When arithmetic is performed, results which are out of range of the small integer type can be captured reliably in this wider type. To preserve the externally visible behavior that the variable is an 8 bit type, the wider result has to be truncated into the 8 bit range. Explicit code is required to do that since the machine storage locations (registers) are wider than 8 bits and happy with the larger values. Here, the compiler **neglected to normalize** the value and simply passed it to `printf` as is. The conversion specifier `%i` in `printf` has no idea that the argument originally came from `int8_t` calculations; it is just working with an `int` argument.

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2013-04-20T22:16:18.993

**我无法将其放入评论中，因此我将其发布为答案。**

由于一些非常奇怪的原因，`--`操作员恰好是罪魁祸首。

我测试了发布在 Ideone 上的代码并替换`c--`为`c = c - 1`，值保持在 [-128 ... 127] 范围内：

```
c: -123
c: -124
c: -125
c: -126
c: -127
c: -128 // about to overflow
c: 127  // woop
c: 126
c: 125
c: 124
c: 123
c: 122 
```

怪眼？我不太了解编译器对`i++`or之类的表达式做了什么`i--`。它可能会将返回值提升为 an`int`并传递它。这是我能得出的唯一合乎逻辑的结论，因为您实际上得到的值无法放入 8 位。

* * *

## 回答 #4

> 赞同：12
> 
> 时间：2013-04-20T22:12:44.090

我猜底层硬件仍在使用 32 位寄存器来保存该 int8_t。由于规范没有强加溢出行为，因此实现不检查溢出并允许存储更大的值。

* * *

如果将局部变量标记为`volatile`强制为其使用内存并因此获得范围内的预期值。

* * *

## 回答 #5

> 赞同：11
> 
> 时间：2013-06-23T18:49:16.047

汇编代码揭示了问题：

```
:loop
mov esi, ebx
xor eax, eax
mov edi, OFFSET FLAT:.LC2   ;"c: %i\n"
sub ebx, 1
call    printf
cmp ebx, -301
jne loop

mov esi, -45
mov edi, OFFSET FLAT:.LC2   ;"c: %i\n"
xor eax, eax
call    printf 
```

EBX 应与 FF 后减量进行与运算，或者仅应使用 BL 并清除 EBX 的其余部分。好奇它使用 sub 而不是 dec。-45 非常神秘。这是 300 和 255 = 44 的按位反转。-45 = ~44。某处有联系。

它使用 c = c - 1 完成了更多的工作：

```
mov eax, ebx
mov edi, OFFSET FLAT:.LC2   ;"c: %i\n"
add ebx, 1
not eax
movsx   ebp, al                 ;uses only the lower 8 bits
xor eax, eax
mov esi, ebp 
```

然后它只使用 RAX 的低部分，因此它被限制为 -128 到 127。编译器选项“-g -O2”。

没有优化，它会产生正确的代码：

```
movzx   eax, BYTE PTR [rbp-1]
sub eax, 1
mov BYTE PTR [rbp-1], al
movsx   edx, BYTE PTR [rbp-1]
mov eax, OFFSET FLAT:.LC2   ;"c: %i\n"
mov esi, edx 
```

所以这是优化器中的一个错误。

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2013-05-05T17:25:31.273

使用`%hhd`代替`%i`！应该能解决你的问题。

你看到的是编译器优化的结果，你告诉 printf 打印一个 32 位数字，然后将一个（假设是 8 位）数字压入堆栈，这实际上是指针大小的，因为这就是 x86 中的推送操作码的工作方式。

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2013-05-05T10:36:25.287

我认为这是通过优化代码来实现的：

```
for (int32_t i = 0; i <= 300; i++)
      printf("c: %i\n", c--); 
```

编译器使用`int32_t i`变量 for`i`和`c`。关闭优化或进行直接投射 `printf("c: %i\n", (int8_t)c--);`

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2013-06-24T21:42:16.480

`c`本身定义为`int8_t`，但是当操作`++`或`--`超过`int8_t`它时，它首先被隐式转换为`int`和**操作的结果，**而不是**c 的内部值**用 printf 打印，恰好是`int`。

查看整个循环之后的**实际值**，`c`尤其是**在最后一次递减之后**

```
-301 + 256 = -45 (since it revolved entire 8 bit range once) 
```

它是类似于行为的正确值`-128 + 1 = 127`

`c`开始使用`int`大小内存，但打印`int8_t`时仅使用`8 bits`. `32 bits`用作时使用所有`int`

[编译器错误]

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2013-06-20T07:28:00.510

我认为这是因为你的循环会一直持续到 int i 变为 300 并且 c 变为 -300。最后一个值是因为

```
printf("c: %i\n", c); 
```

# java - 对集合（例如 HashSet）使用 Java 的 contains(Object) 方法，但实际上没有对象

> ID：16125663
> 
> 赞同：1
> 
> 时间：2013-04-20T22:03:17.733
> 
> 标签：java, collections, map, contains, hashset

我承认这听起来有点疯狂，但要解释一下我的意思：

我有一个`Collection`（例如 HashSet）包含几个相当慢的初始化对象，我想看看是否`Collection`已经包含一个特定的对象。让我们`Vector3d`作为一个例子（我知道初始化并不昂贵）。

所以`Collection`包含：

```
Vector3d(1,1,1)
Vector3d(2,1,1)
Vector3d(3,1,1) 
```

我想问一个`Collection`问题“是否`Collection`包含 a `Vector3d`with `x=2`, `y=1`and `z=1`（即我已经知道该`.contains()`方法将针对的数据）。所以我可以创建一个新的`Vector3d(2,1,1)`然后使用`.contains()`它但是正如我所说的对象初始化很慢，或者我可以运行整个`Collection`手动检查（这就是我现在正在做的事情）但是那（据我所知）比`.contains()`它不使用哈希要慢。有没有更好的方法来做到这一点？

有问题的对象是可变的，但该`equals`方法所基于的数据不是。（在我的情况下，它们是 x、y、z 坐标处的块，块的内容可能会改变，但 x、y、z 坐标不会）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-20T22:10:49.623

在 an 上使用该`.contains()`方法`ArrayList`将导致`equals`对`ArrayList`.

虽然这对你有用，但它可能对非常大`ArrayList`的 s 没有好处。如果性能是一个问题，您可能希望持有一个`HashSet`包含对`Vector3d`对象的引用。调用`contains`a `HashSet`（或 any `Set`）要快得多。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-21T04:03:42.890

如果您只需要遍历所有元素或按位置访问元素，则 ArrayList 是正确的数据结构。对于其他任何东西来说，它都是错误的数据结构。

您要做的是快速回答包含问题，这就是 Sets 和 Maps 的用途。`Vector3dKey`使用您想要的简单散列函数创建一个单独的、更便宜的类并将昂贵的对象插入到 a`Map< Vector3dKey, Vector3d >`同时或代替 an会更有意义`ArrayList< Vector3d >`。Java 显然不会保留您昂贵向量的两个副本，而只是引用的副本。当然，如果您的 Vectors 是*mutable* ，整个方案就会失效。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-21T03:51:26.773

如果您真的必须使用列表（而不是哈希），您不妨遍历列表，检索每个对象并手动检查其属性——我的意思是这将与“包含”一样快。

如果您打算使用哈希而不是列表，那么您应该使用不同的对象进行比较。例如，如果您在上面的示例中使用 HashMap，则您的键可能是以下字符串：

"1,1,1","2,1,1","3,1,1"

这将使查找变得即时而简单。如果列表可以包含其他类型的对象，那么“Vector3d(1,1,1)”可能是一个更好的字符串。无需昂贵或增加代码复杂性即可轻松重新创建。

如果您因为需要保留顺序而使用列表，请查看 LinkedHashMap。

另外我建议您创建一个函数来从对象（插入时）或参数（搜索时）派生字符串，而不是在代码周围分发功能，这是您可能需要更改或扩展的事情稍后。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-21T14:24:41.827

基于 Mental 法官回答的代码

```
package mygame;

import java.util.HashMap;
import java.util.Map;

public class Main{

    public Main(){
        Map<CheapKey,ExpensiveClass> map=new HashMap< CheapKey, ExpensiveClass>();

        for(int i=0;i<100;i++){
            ExpensiveClass newExpensiveClass;
            newExpensiveClass=new ExpensiveClass(i,0,0);
            map.put(newExpensiveClass.getKey(), newExpensiveClass);
        }

        CheapKey testKey1=new CheapKey(1,0,0);
        CheapKey testKey2=new CheapKey(1,0,1);

        System.out.println(map.containsKey(testKey1)); //there is an object under key1
        System.out.println(map.containsKey(testKey2)); //there isn't an object under key2
        ExpensiveClass  retrievedExpensiveClass=map.get(testKey1);
    }

    public static void main(String[] args) {
        Main main=new Main();
    }

    protected class ExpensiveClass{
        int x;
        int y;
        int z;
        public ExpensiveClass(int x, int y, int z){
            this.x=x;
            this.y=y;
            this.z=z;
            for(int i=0;i<10000;i++){
                //slow initilisation
            }

        }
        public CheapKey getKey(){
            return new CheapKey(x,y,z);
        }

    }

    protected class CheapKey{
        int x;
        int y;
        int z;
        public CheapKey(int x, int y, int z){
            this.x=x;
            this.y=y;
            this.z=z;
        }

        @Override
        public boolean equals(Object obj) {
            if (obj == null) {
                return false;
            }
            if (getClass() != obj.getClass()) {
                return false;
            }
            final CheapKey other = (CheapKey) obj;
            return true;
        }

        @Override
        public int hashCode() {
            int hash = 7;
            hash = 79 * hash + this.x;
            hash = 79 * hash + this.y;
            hash = 79 * hash + this.z;
            return hash;
        }

    }

} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-20T22:06:24.413

contains 方法将调用对象的 .equals 方法，因此只要该类的 .equals 实现比较对象中包含的值而不是它们的指针，那么使用 contains 就可以了。

[http://docs.oracle.com/javase/7/docs/api/java/util/Collection.html#contains(java.lang.Object)](http://docs.oracle.com/javase/7/docs/api/java/util/Collection.html#contains(java.lang.Object))

**编辑**误读了您的问题。我认为这取决于列表有多大与初始化需要多长时间。如果列表很短，请遍历它并手动检查。但是，如果列表可能很长，那么创建对象并使用 .contains 可能会更有效。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-20T22:10:29.177

`ArrayList.contains`不使用散列；和人工检查的速度完全一样。两种方式都没有区别。

使用假对象类是可行的，但几乎可以肯定是代码异味。

# javascript - 对象性质的函数

> ID：16125667
> 
> 赞同：1
> 
> 时间：2013-04-20T22:04:13.090
> 
> 标签：javascript, function, object, constructor

**语境**

我注意到有些函数只能用`new`前缀调用。在没有它的情况下调用时，会抛出错误*非法调用。*以下是控制台在`Image`以不同方式调用时如何反应的两个示例。

```
-> new Image();
<- <img>
-> Image();
<- TypeError: DOM object constructor cannot be called as a function. 
```

更有趣的是，在仔细观察下，这些类型的函数看起来像函数，但它们不是。举个`Image`例子，该`typeof`命令表明它`Image`是一个函数，但它的构造函数却`Image`暗示它是一个对象。

这与下面的大多数构造函数非常不同。

```
function Foo(){
    this.identity = 'Bar';
} 
```

该函数`Foo`可以通过两种方式调用，`new Foo()`并且`Foo()`. 这与功能非常不同`Image`。

**问题**

这个带有函数的动作与`Image`大多数构造函数有很大的不同。这怎么可能？这就是为什么`new`前缀必须与 一起使用的原因`Image`吗？更重要的是，这种功能可以重新创建吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-20T22:42:35.167

我认为这是您正在寻找的逻辑，当`new`关键字不用于创建以下实例时，它会重现异常`Foo`：

```
function Foo() {
    if (!(this instanceof arguments.callee)) 
        throw new TypeError("DOM object constructor cannot be called as a function.");

    this.identity = 'Bar';
} 
```

根据[这篇文章](https://stackoverflow.com/questions/383402/is-javascript-s-new-keyword-considered-harmful)中的一些评论，如果您处于严格模式，则`arguments.callee`不必使用函数名称：`Foo`

```
function Foo() {
    if (!(this instanceof Foo)) 
        throw new TypeError("DOM object constructor cannot be called as a function.");

    this.identity = 'Bar';
} 
```

**[在此处](http://jsfiddle.net/4ZBMt/)**查看说明情况的演示。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-22T12:33:05.430

问题`Image`在于它是一个[宿主对象](http://es5.github.io/#x4.3.8)——这意味着它不需要遵循原生 EcmaScript 对象的严格语义。例如，它可以继承 not 的东西`Function.prototype`，实现内部的 [[Construct]] 方法而不是 [[Call]] 和类似的东西。

它们由 DOM 指定（请参阅[Where are constructors such as, `new Image()` 和 `new Option()`, 已记录？](https://stackoverflow.com/q/6936071/1048572)），特别是[这里](http://www.w3.org/html/wg/drafts/html/master/embedded-content-0.html#dom-image)：

> 提供了一个构造函数来创建`HTMLImageElement`对象（除了来自 DOM 的工厂方法，例如）`createElement()`：**当作为构造函数调用时**， this 必须返回一个新对象（一个新的 img 元素）。[…]`Image(width, height)`**`HTMLImageElement`**

 **然而，它实现了特定于浏览器的：例如，Opera 创建图像时`new`也没有，不会抛出`NOT SUPPORTED`错误。**

# c++ - 排序程序仅显示第一个和最后一个数字

> ID：16125671
> 
> 赞同：0
> 
> 时间：2013-04-20T22:05:00.047
> 
> 标签：c++, sorting, random, visual-studio-2012

我正在生成从 -100 到 100 的随机数，我试图按升序和降序对 # 进行排序，但是当显示结果时，只显示第一个和最后一个数字？

```
// sorting using function pointers.
#include "stdafx.h"
#include <fstream>  // writing data to disk
#include <cstdlib>  // standard general utilities library "# generator"
#include <ctime>   // convert time value to string
#include <iostream>
#include <iomanip> // set precision

using namespace std;

// prototypes
void selectionSort( int [], const int, bool (*)( int, int ) );
void swap( int * const, int * const );   
bool ascending( int, int ); // implements ascending order
bool descending( int, int ); // implements descending order

int _tmain(int argc, _TCHAR* argv[])
{

// Number Generator 
{
    double Final_Avg = 0;
    double Random_Cap = 100;
    double Samples_To_Create = 99;
    srand((unsigned)time(0));
    double rndDbl;
    int rndInt;
    double rndAvg = 0, rndMin = 0, rndMax = 0;
    int counter = 0;
    double temp = 0;
    double dblRanAry[100]; 

    Final_Avg = rndAvg / counter; // final average to display

    double lDbl=0, hDbl=Random_Cap; 
    int lInt = 0, hInt=1;

    double dblRange=(hDbl-lDbl)+1;
    int intRange=(hInt-lInt)+1;

    for(int index=0; index<Samples_To_Create; index++) 
    {
    rndInt = lInt+int(intRange*rand()/(RAND_MAX + 1.0));
    rndDbl = lDbl+double(dblRange*rand()/(RAND_MAX + 1.0));

// random number if statement
    if (rndInt == 0){
        rndDbl = -(rndDbl);

    } //start of Min/Max if statements
    if (rndMin == 0){
        rndMin = rndDbl;
    }
    else if (rndDbl < rndMin){
        rndMin = rndDbl;
    }
    if (rndMax == 0){
        rndMax = rndDbl;
    }
    else if (rndDbl > rndMax){
        rndMax = rndDbl;
    } //end of Min Max if statements

    temp = rndDbl;
    rndAvg += temp;
    dblRanAry[counter] = temp;
    counter++;

    }

   const int arraySize = 100;
   int order; // 1 = ascending, 2 = descending
   int counter1; // array index 
```

// **** 我认为问题出在这里 ****

```
 int a[ arraySize ] = { rndDbl }; 

   cout << "Enter 1 to sort in ascending order,\n" 
      << "Enter 2 to sort in descending order: ";
   cin >> order;
   cout << "\nData items in original order\n";

// output original array
   for ( counter1 = 0; counter1 < arraySize; ++counter1 )
      cout << setw( 4 ) << a[ counter1 ];

// sort array in ascending order; pass function ascending 
// as an argument to specify ascending sorting order
   if ( order == 1 ) 
   {
      selectionSort( a, arraySize, ascending );
      cout << "\nData items in ascending order\n";
   } // end if

     // sort array in descending order; pass function descending
     // as an argument to specify descending sorting order
   else 
   {
      selectionSort( a, arraySize, descending );
      cout << "\nData items in descending order\n";
   } // end else part of if...else

   // output sorted array
   for ( counter1 = 0; counter1 < arraySize; ++counter1 )
      cout << setw( 4 ) << a[ counter1 ];

   cout << endl;
   system("pause");
} 
 } // end main

// multipurpose selection sort; the parameter compare is a pointer to
// the comparison function that determines the sorting order
void selectionSort( int work[], const int size,
                    bool (*compare)( int, int ) )
{
   int smallestOrLargest; // index of smallest (or largest) element

   // loop over size - 1 elements
   for ( int i = 0; i < size - 1; ++i )
   {
      smallestOrLargest = i; // first index of remaining vector

      // loop to find index of smallest (or largest) element
      for ( int index = i + 1; index < size; ++index )
         if ( !(*compare)( work[ smallestOrLargest ], work[ index ] ) )
            smallestOrLargest = index;

      swap( &work[ smallestOrLargest ], &work[ i ] );
   } // end if
} // end function selectionSort

// swap values at memory locations to which 
// element1Ptr and element2Ptr point
void swap( int * const element1Ptr, int * const element2Ptr )
{
   int hold = *element1Ptr;
   *element1Ptr = *element2Ptr;
   *element2Ptr = hold;
} // end function swap

// determine whether element a is less than 
// element b for an ascending order sort
bool ascending( int a, int b )
{
   return a < b; // returns true if a is less than b
} // end function ascending

// determine whether element a is greater than 
// element b for a descending order sort
bool descending( int a, int b )
{
   return a > b; // returns true if a is greater than b
} // end function descending 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T22:44:30.647

是的，问题确实存在。

```
 int a[ arraySize ] = { rndDbl }; 
```

`a`将使用值初始化第一个元素，`double rndDbl;`而您需要复制整个数组。

```
 int a[ arraySize ];
   for ( counter1 = 0; counter1 < arraySize; ++counter1 )
     a[ counter1 ] = dblRanAry[counter1]; 
```

通过我看不出创建数组持有双打的意义是什么，只是在填充数据后立即将它们转换为 int 。为什么不`a`直接填写数据。

# c - 初始化结构的双指针

> ID：16125673
> 
> 赞同：0
> 
> 时间：2013-04-20T22:05:04.717
> 
> 标签：c, hash, struct, doubly-linked-list, double-pointer

我试图在通用哈希表中动态分配指向通用链表的指针数组，其大小取决于用户输入。请让我给你看代码。

这是驱动程序，用户将输入他们希望哈希表的大小，这与哈希表中应该有多少链表直接相关。

```
int main(int argc, char **argv)
{   
int i;
int n;
int count;
unsigned int seed=0;

HashObjectPtr job;
HashTablePtr table;

if (argc < 2) {
    fprintf(stderr, "Usage: %s <table size> [<test size=table size * 10>]);
    exit(1);
}
n = atoi(argv[1]);
count = n;
if (argc >=  3) {
    count = atoi(argv[2]);
    count *= 10;
}
if (argc == 4) {
    seed = atoi(argv[3]);
}
char * firstInput = (char *)malloc(sizeof(char) * 
strlen("I'm a void star made at the beginning") + 1);
firstInput = strcpy (firstInput, "I'm a void star made at the beginning");
table = createHashTable(n, getKey, toString, freeHashObject, compare);

for (i=0; i<n; i++)
{
    job = createHashObject(firstInput);
    HashInsert(table, job);
}

runRandomTests(count, seed, n, table);

if (DEBUG > 0)
    PrintHash(table);
free(firstInput);
FreeHashTable(table);
exit(
} 
```

这是结构。我定义了链表数组 ListPtr * table => linkedList ** table;

```
typedef struct HashTable HashTable;
typedef struct HashTable * HashTablePtr;

struct HashTable {
int tableSize;
int (*getKey)(void *);
char *  (*toString)(void *);
void (*freeHashObject)(void *);
Boolean (*compare)(void *, void *);
ListPtr * table;
};

HashTablePtr createHashTable(int size, int (*getKey)(void *), char *  (*toString)(void *), void (*freeHashObject)(void *), Boolean (compare)(void *, void *));
void HashInsert(HashTablePtr table, HashObjectPtr object);
HashObjectPtr HashSearch (HashTablePtr table, HashObjectPtr obj);
void PrintHash(HashTablePtr table);
void FreeHashTable(HashTablePtr table);
HashObjectPtr HashRemove(HashTablePtr table, HashObjectPtr obj);
int HashFunction(HashObjectPtr obj); 
```

这是初始化链表的函数。

```
HashTablePtr createHashTable(int size, int (*getKey)(void *), char * (*toString)(void *), void (*freeHashObject)(void *), Boolean (*compare)(void *, void *))
{
HashTablePtr h = (HashTablePtr)malloc(sizeof(HashTable));
h -> tableSize = size;
h -> getKey = getKey;
h -> toString = toString;
h -> freeHashObject = freeHashObject;
h -> compare = compare;

h -> table = (ListPtr *)malloc(sizeof(ListPtr)*size);
int i;
for (i = 0; i < size; i++)
{
    h -> table[i] = createList(getKey, toString, freeHashObject);
}
} 
```

这是创建链表的函数

```
ListPtr createList(int(*getKey)(void *), 
               char * (*toString)(void *),
               void (*freeHashObject)(void *))
{
ListPtr list;
list = (ListPtr) malloc(sizeof(List));
list->size = 0;
list->head = NULL;
list->tail = NULL;
list->getKey = getKey;
list->toString = toString;
list->freeObject = freeHashObject;
return list;
} 
```

我在 Eclipse 的调试器中逐步完成了它，它编译和运行良好，但是当我在 CreateHashTable 函数期间单击 h 内的“表”变量时，一切看起来都很好，循环遍历并在每个索引处创建列表。但是当我去插入时，我得到了一个段错误。

它必须与我初始化 ListPointers 数组的方式有关，但我想不出更好的方法。

请帮忙？

谢谢

# ios - iOS：没有调用 didStartMonitoringForRegion

> ID：16125674
> 
> 赞同：1
> 
> 时间：2013-04-20T22:05:08.007
> 
> 标签：ios

我在我的 iPhone 4 设备上运行它。

首先，这里是相关代码：

```
-(void)applicationDidBecomeActive:(UIApplication *)application
{
    CLLocationDegrees latitude = 45.50568;
    CLLocationDegrees longitude = -73.21352;
    CLLocationCoordinate2D center = CLLocationCoordinate2DMake(latitude, longitude);
    CLLocationDistance radius = 200.0;

    CLRegion *myRegion = [[CLRegion alloc] initCircularRegionWithCenter:center radius:radius identifier:@"region1"];

    [locationManager startMonitoringForRegion:myRegion];
} 
```

但是在任何时候都不会`didStartMonitoringForRegion`被调用，甚至不会`monitoringDidFailForRegion`被调用。

我究竟做错了什么？我的设备支持区域监控，看不出是什么问题。

# tcl - tcl：如何处理文件事件可读的通道关闭

> ID：16125678
> 
> 赞同：1
> 
> 时间：2013-04-20T22:05:30.827
> 
> 标签：tcl

我需要在输入通道关闭后执行一些操作。人文件事件 说：

> 文件事件处理程序也会在其通道关闭时自动删除

因此，如果通道关闭，则可能不会调用处理程序来处理此问题。当尝试从子进程读取输出时，我实际上可以看到它：上一次调用处理程序仍然认为 [eof $fd] 为假，并且永远不会调用下一次。

我现在能想象的唯一方法是实现一些像定期看门狗这样的黑客攻击，它检查 $fd 是否仍然打开，但这很脏。我可以确定 $fd 在打开其他读取通道时不会获得相同的值吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T05:23:23.143

我认为这里需要澄清一下。当文档说“频道已关闭”时，这意味着“频道已在您的程序中关闭”。换句话说，直到**你**调用`[close]`.

如果通道从另一端（例如套接字的另一端或管道的另一端）关闭，则在您打电话给`[close]`自己之前，它不会被视为在您这边关闭。因此，如果通道在另一端关闭，则 fileevent 将被执行并`[eof]`返回 true（或读取操作将出错）。

我从未遇到过 tcl 检测到通道已关闭而不调用 fileevent 的情况。我不认为这是可能的。但是，在某些情况下，通道实际上已经死了但没有关闭（通常是由于网络错误或另一端的机器重新启动）。对于这种情况，您需要实现超时。但是超时并不意味着通道已经关闭。这只是意味着您不再确信通道另一侧的机器还活着。

# r - 如何绘制一个“条形图”，每个条形图的高度不同？在 R 中

> ID：16125682
> 
> 赞同：0
> 
> 时间：2013-04-20T22:06:17.480
> 
> 标签：r, bar-chart

我需要使用以下数据创建一个条形图：

```
a<-c(0.02686811,0.01724433,0.05678611,0.01328387,0.02083748,0.01340736)

b<-c(0.12310228,0.07907666,0.08608878,0.04961274,0.12348462,0.03520654) 
```

这很容易：

```
rbind(a,b)->zz

barplot(zz) 
```

然而，这里是困难的部分，向量“a”和“b”的每个元素代表在不同时间获取的数据：

```
t<-c(0,2,2,5,6,10) 
```

我想在不同的高度表示条形图的每个条，每个高度由向量“t”中的每个时间表示。

因此，例如，barplot(zz) 中的第一个条形图我希望它从 0 高度开始（矩形下边缘的位置在高度 0），第二个条形图我希望它从一个高度开始2个，以此类推……

我希望你们理解我的问题，任何帮助将不胜感激。

先感谢您。

蒂娜。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T02:31:18.047

```
zz <-rbind(t,zz)
barplot(zz, col=c("white", "black", "grey") ) 
```

# python - Biopython中的BetweenPosition和WithinPosition

> ID：16125684
> 
> 赞同：0
> 
> 时间：2013-04-20T22:06:36.757
> 
> 标签：python, biopython

Biopython 中的“BetweenPosition”和“WithinPosition”有什么区别。

似乎其中一个包含端点，而另一个不包含端点——但 Biopython 文档中的描述似乎没有明确描述。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-09T17:22:08.000

BetweenPosition 基本上已经过时了，可以忽略。

# c++ - C++ - 函数返回，但不交还控制权

> ID：16125685
> 
> 赞同：1
> 
> 时间：2013-04-20T22:06:47.553
> 
> 标签：c++, linux

我正在使用 C++ 开发另一个用于 Linux 的套接字库，作为个人练习。这是我的代码：

```
#ifndef SOCKET_H
#define SOCKET_H

#include <sys/types.h>
#include <sys/socket.h>
#include <netdb.h>
#include <stdio.h>
#include <stdlib.h>
#include <string.h>
#include <iostream>
using namespace std;

/**
 * Creates a struct to hold all the necessary information to create a socket.<br/>
 * Typically, you should not need to call this yourself, as it is done when you     call         listen() or dial()
 * @param host The hostname or IP address to connect to.
 * @param service The service on that machine (e.g "http" or "80")
 * @param sock The type of socket ("tcp" or "udp")
 * @return A addrinfo struct with all the required information to create a connection.
 */
addrinfo setup(const char *host,const char *service,const char *sock) {
    struct addrinfo hints;
    struct addrinfo *serv;
cout << "2.call to setup()\n";
//cout << "3.setup() returns here.\n";
//return *serv;
    int status=0;
/*struct addrinfo hints;
    struct addrinfo *serv;*/

    memset(&hints,0,sizeof hints);
    hints.ai_family=AF_UNSPEC;
    if (sock=="tcp") {
    hints.ai_socktype=SOCK_STREAM;
    } else if (sock=="udp") {
        hints.ai_socktype=SOCK_DGRAM;
    } else {
        fprintf(stderr,"[!] xsockets: error: unknown socket type %s\n",sock);
        exit(2);
    }
    hints.ai_flags=AI_PASSIVE;

    if ((status=getaddrinfo(host,service,&hints,&serv))!=0) {
        fprintf(stderr, "[!] xsockets: error: getaddrinfo error: %s\n",     gai_strerror(status));
        exit(1);
    }
    cout << "3.setup() returns here.\n";
    return *serv;
}

/**
 * Listens on a portand returns a scoket file descriptor.
 * @param service The service on this machine (e.g "http" or "80")
 * @param sock The type of socket ("tcp" or "udp")
 * @return A socket filde descriptor.
 */
int listen(const char *service,const char *sock) {
    cout << "1.call to listen()\n";
    struct addrinfo *serv;
    *serv=setup(NULL,service,sock);
    cout << "4.is this ever called?";
    int sockfd=socket(serv->ai_family,serv->ai_socktype,serv->ai_protocol);
    int status=bind(sockfd,serv->ai_addr,serv->ai_addrlen);
    if (status!=0) {
        fprintf(stderr,"[!] xsockets: error: bind error:                         %s\n",gai_strerror(status));
        exit(3);
}
    cout << "5.listen() returns here.";
    return sockfd;
}
#endif 
```

如果我运行它，它会达到 #3 “setup() 返回这里”，但永远不会达到 #4 “这曾经被调用过吗？” 更不用说 #5 “listen() 在这里返回”

谁能告诉我出了什么问题。

我在 Ubuntu Linux 上，以 root 权限运行它。`g++`它是用命令编译的。

这是我得到的：

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-20T22:08:48.450

您有未定义的行为，因为您没有初始化指针`serv`，而是立即使用`*serv`.

尽管如此，在调试时，您应该确保通过插入 或 来刷新`std::flush`输出：`std::endl``std::cout`

```
cout << "4.is this ever called?" << std::endl; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-20T22:10:43.747

你有一些基本问题：

1.  您不为`serv`.

    `struct addrinfo *serv;`

    `*serv=setup(NULL,service,sock);`

2.  您不检查大多数函数的返回值，例如`int sockfd`.

3.  您在堆栈上声明事物而不是全局声明，尝试找出每个变量的范围。

    ```
    struct addrinfo hints;
    struct addrinfo *serv; 
    ```

# macos - 用于 shell 脚本的 Mac OS X 应用程序包不起作用

> ID：16125686
> 
> 赞同：0
> 
> 时间：2013-04-20T22:06:56.723
> 
> 标签：macos, shell, osx-lion, nsbundle

我刚刚做了一个应用程序包，就像它在[这个博客](http://mathiasbynens.be/notes/shell-script-mac-apps)上显示的那样，但应用程序不工作。看起来它会打开（应用程序打开的 OS X 效果），但随后什么也没有发生，没有窗口，没有进程，什么都没有。在应用程序目录上运行脚本`./app.sh`可以完美运行并打开应用程序窗口。我正在做的步骤是：

1.  将 appify 脚本复制到我的应用目录。
2.  运行应用程序。生成`My App.app`其中的 shell 脚本`Contents/MacOS/`并`Info.plist`在`Contents/`.
3.  由于我的应用程序需要其他文件，我将我的`data/`目录复制到应用程序包目录`Contents/MacOS/data/`。

我尝试使用博客文章中显示的 appify 脚本以及[更新](https://github.com/subtleGradient/tilde-bin/blob/master/appify)后的脚本。我还尝试`chmod +x`了 .app 包和 .sh 内部的`My App.app/Contents/MacOS/`.

我不知道如何让捆绑包运行我的应用程序。这有什么线索吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-18T12:16:32.527

你不需要 appify 来创建一个可以通过鼠标点击执行的脚本（就像一个应用程序），只需按照这个简单的过程：

1.  创建您的脚本文件（例如 myscript）
2.  授予它执行权限（chmod 755 ./myscript）
3.  脚本文件上的上下文菜单->获取信息->打开方式：->（关联：应用程序->实用程序->终端应用程序）
4.  脚本文件上的上下文菜单 -> 获取信息 -> （通过拖放图标文件将所需的图标放在左上角的小图标上）

# mysql - 我如何解码 SMF mysql 密码字段

> ID：16125689
> 
> 赞同：0
> 
> 时间：2013-04-20T22:07:07.327
> 
> 标签：mysql, passwords, decode, sha1, smf

我目前使用 SMF 作为我的论坛软件，但我目前正在构建自己的自定义论坛软件，我需要将 SMF 数据库中的条目导入我的新数据库。我注意到 Mysql 使用 sha1 编码密码的方式，我也将其合并到我自己的数据库表密码字段中。我遇到了一个网站，我可以从我的表中解码哈希码，但是当我尝试对 SMF 表进行解码时，它不起作用。我认为它不完全是 sha1，它可能与某人混合在一起。这可能是它没有转换的原因。我有点认为这与我仍在努力解决的密码盐有关。

请问，有谁熟悉 SMF Mysql 成员表中的密码字段吗？我只是希望可以将我的会员列表导入到我的新表中，因为如果我不能，我可能会浪费我的时间来构建一个新的应用程序。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-10-08T05:14:09.610

SMF 1.1 和更高版本（几乎所有存在的东西）都用于`sha1(strtolower('username') . 'password');`对密码进行编码。这是一种加盐密码，因此破解它几乎是不可能的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-20T23:32:11.520

如果是 md5 哈希，那么您将无法（轻松）反转它们 - 但您可以通过让自己的论坛软件将用户输入的 md5 哈希与数据库中的哈希进行比较来重新使用它们，就像你的旧论坛软件做到了。

如果您想为您的新论坛使用 sha1，那么只需在登录时检查特定用户的数据库中存储了哪些类型的数据，并根据需要比较哈希值；md5 哈希和 sha1 都设置了长度，因此检查类型很简单。

# python - Pygame 和 IDE——源代码更改需要 python 重启

> ID：16125691
> 
> 赞同：1
> 
> 时间：2013-04-20T22:07:18.907
> 
> 标签：python, scripting, ide, pygame

我可以在我使用的任何一个 IDE（Spyder 和 IEP）中运行我的 pygame 项目，但是我尝试对一些 .py 文件进行更改，当我再次运行该项目时，这些更改不会显示出来。我认为这与将 .py 文件作为脚本运行的 IDE 有关，但我想不出一个好的解决方案。我尝试删除编译的文件，但仍然出现同样的问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T23:28:21.813

您可以使用[reload](http://docs.python.org/2/library/functions.html#reload)函数使用更新的文件更新正在运行的 python 实例。

# java - 从文件中读取的排序数组

> ID：16125694
> 
> 赞同：0
> 
> 时间：2013-04-20T22:07:33.623
> 
> 标签：java, sorting

如果我做错了什么，第一次用户非常抱歉。

我必须编写一个程序，根据用户输入的内容对数组进行排序。从文件中读取数据。该文件`Bank.txt`包含**10,000 个**帐户，其中一些是空帐户，默认值为`0000, ,00.00.`

目前的输出是：

```
ID#1234 joe     $436.0
ID#3620 kim     $600.0
ID#4563 Jimmy   $1653.0
ID#4571 Billy   $72.0
ID#5930 Brian   $962.0
ID#6766 Jen     $215.0
ID#7092 Adam    $8794.0 
```

它看起来只是按 排序，`ID`因为这是它在 txt 文档中的写入方式。我不知道从哪里开始。我需要根据用户输入的内容进行`ID`排序。我知道有，但这在这里行不通（除非我想多了），因为它只会对该数组中的电流进行排序。再次感谢任何帮助。`Name``Balance``array.sort(array)``id,name,balance`

按名称排序应显示：

```
ID#7092 Adam    $8794.0
ID#4571 Billy   $72.0
ID#5930 Brian   $962.0
ID#6766 Jen     $215.0
ID#4563 Jimmy   $1653.0
ID#1234 joe     $436.0
ID#3620 kim     $600.0 
```

按余额排序：

```
ID#4571 Billy   $72.0 <br>
ID#6766 Jen     $215.0 <br>
ID#1234 joe     $436.0 <br>
ID#3620 kim     $600.0 <br>
ID#5930 Brian   $962.0 <br>
ID#4563 Jimmy   $1653.0 <br>
ID#7092 Adam    $8794.0 <br> 
```

程序代码：

```
import static java.nio.file.AccessMode.*;
import java.nio.file.*;
import java.io.*;
import java.util.Arrays;

public class ReadBankSequentially
{
    public static void main(String[] args)
    {
        Path file = Paths.get("Bank.txt");
        String[] array = new String[3];
        String s = "";
        String delimiter = ",";
        int id;
        String stringId;
        String name;
        double balance;

        try
        {

            InputStream input = new BufferedInputStream(Files.newInputStream(file));
            BufferedReader reader = new BufferedReader(new InputStreamReader(input));
            System.out.println();
            s = reader.readLine();
            while(s != null)
            {
                array = s.split(delimiter);
                stringId = array[0];
                id = Integer.parseInt(array[0]);
                if(id != 0)
                {
                    name = array[1];
                    balance = Double.parseDouble(array[2]);
                    System.out.println("ID#" + stringId + " " + name + " $" + balance); 

                }
                s = reader.readLine();
            }
            reader.close();
        }
        catch(Exception e)
        {
            System.out.println("Message: " + e);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-20T22:14:52.233

我会创建一个`Customer` [DTO](http://en.wikipedia.org/wiki/Data_transfer_object)：

```
public class Customer {
  protected int _id;
  protected String _name;
  protected float _balance;

  public Customer() {
    init(0, "New Customer", 0.00f);
  }

  public Customer(int id, String name, float balance) {
    init(id, name, balance);
  }

  private void init(int id, String name, float balance) {
    id(id).name(name).balance(balance);
  }

  public int id() {
    return this._id;
  }
  public Customer id(int id) {
    this._id = id;
    return this;
  }

  public String name() {
    return this._name;
  }
  public Customer name(String name) {
    this._name = name;
    return this;
  }

  public float balance() {
    return this._balance;
  }
  public Customer balance(float balance) {
    this._balance = balance;
    return this;
  }

  public String toString() {
    return String.format("#%d: %-5s - $%07.2f", id(), name(), balance());
  }
} 
```

接下来，我将创建一个实用程序类来读取文件并生成客户：

```
import java.io.File;
import java.io.FileNotFoundException;
import java.util.ArrayList;
import java.util.List;
import java.util.Scanner;

public class Utils {  
  public static List<Customer> getCustomers(String filename, String delimiters) {
    List<Customer> customers = new ArrayList<Customer>();
    Customer customer = null;
    File file = new File(filename);
    Scanner scanner = null;
    try {
      scanner = new Scanner(file);
      while (scanner.hasNextLine()) {
        String line = scanner.nextLine();
        if ((customer = createCustomer(line, delimiters)) != null)
          customers.add(customer);
      }
    } catch (FileNotFoundException e) {
      e.printStackTrace();
    } finally {
      scanner.close();
    }

    return customers;
  }

  public static Customer createCustomer(String line, String delimiter) {
    String[] arr = line.split(delimiter);
    if (arr.length < 3)
      return null;
    int id = Integer.parseInt(arr[0].trim());
    String name = arr[1].trim();
    float balance = Float.parseFloat(arr[2].trim());
    return new Customer(id, name, balance);
  }
} 
```

最后我会创建我的`Bank`类来存储`Customer`s 并可以将它们排序/打印出来。

```
import java.util.Collections;
import java.util.Comparator;
import java.util.List;
import static bank.Utils.getCustomers;

public class Bank {
  protected List<Customer> customers;

  public enum Sort {
    ID, NAME, BALANCE
  }

  public Bank() {
    String filename = "bank/Bank.txt";
    String delimiters = "[,]";
    customers = getCustomers(filename, delimiters);

    printCustomers(Sort.ID, false);
    printCustomers(Sort.ID, true);
    printCustomers(Sort.NAME, false);
    printCustomers(Sort.NAME, true);
    printCustomers(Sort.BALANCE, false);
    printCustomers(Sort.BALANCE, true);
  }

  public void sortId(boolean descending) {
    final int d = descending ? -1 : 1;
    Comparator<Customer> comparator = new Comparator<Customer>() {
      public int compare(Customer c1, Customer c2) {
        return (c1.id() > c2.id() ? 1 :
               c1.id() == c2.id() ? 0 : -1) * d;
      }
    };
    Collections.sort(customers, comparator);
  }

  public void sortName(boolean descending) {
    final int d = descending ? -1 : 1;
    Comparator<Customer> comparator = new Comparator<Customer>() {
      public int compare(Customer c1, Customer c2) {
        return (c1.name().compareTo(c2.name())) * d;
      }
    };
    Collections.sort(customers, comparator);
  }

  public void sortBalance(boolean descending) {
    final int d = descending ? -1 : 1;
    Comparator<Customer> comparator = new Comparator<Customer>() {
      public int compare(Customer c1, Customer c2) {
        return (c1.balance() > c2.balance() ? 1 :
               c1.balance() == c2.balance() ? 0 : -1) * d;
      }
    };
    Collections.sort(customers, comparator);
  }

  public void printCustomers(Sort sortBy, boolean descending) {
    String header = "";
    String desc = descending ? "descending" : "ascending";
    switch (sortBy) {
      case NAME:
        header = "Sorting by Name";
        sortName(descending);
        break;
      case BALANCE:
        header = "Sorting by Balance";
        sortBalance(descending);
        break;
      case ID:
        header = "Sorting by Id";
      default:
        sortId(descending);
        break;
    }
    System.out.printf("### %s %s ###\n", header, desc);
    for (Customer c : customers)
      System.out.println(c);
    System.out.println();
  }

  public static void main(String[] args) {
    new Bank();
  }
} 
```

**输入文件**

```
1234,Joe,436.00
3620,Kim,600.00
4563,Jimmy,1653.00
4571,Billy,72.00
5930,Brian,962.00
6766,Jen,215.00
7092,Adam,8794.00 
```

**输出**

```
### Sorting by Id ascending ###
#1234: Joe   - $0436.00
#3620: Kim   - $0600.00
#4563: Jimmy - $1653.00
#4571: Billy - $0072.00
#5930: Brian - $0962.00
#6766: Jen   - $0215.00
#7092: Adam  - $8794.00

### Sorting by Id descending ###
#7092: Adam  - $8794.00
#6766: Jen   - $0215.00
#5930: Brian - $0962.00
#4571: Billy - $0072.00
#4563: Jimmy - $1653.00
#3620: Kim   - $0600.00
#1234: Joe   - $0436.00

### Sorting by Name ascending ###
#7092: Adam  - $8794.00
#4571: Billy - $0072.00
#5930: Brian - $0962.00
#6766: Jen   - $0215.00
#4563: Jimmy - $1653.00
#1234: Joe   - $0436.00
#3620: Kim   - $0600.00

### Sorting by Name descending ###
#3620: Kim   - $0600.00
#1234: Joe   - $0436.00
#4563: Jimmy - $1653.00
#6766: Jen   - $0215.00
#5930: Brian - $0962.00
#4571: Billy - $0072.00
#7092: Adam  - $8794.00

### Sorting by Balance ascending ###
#4571: Billy - $0072.00
#6766: Jen   - $0215.00
#1234: Joe   - $0436.00
#3620: Kim   - $0600.00
#5930: Brian - $0962.00
#4563: Jimmy - $1653.00
#7092: Adam  - $8794.00

### Sorting by Balance descending ###
#7092: Adam  - $8794.00
#4563: Jimmy - $1653.00
#5930: Brian - $0962.00
#3620: Kim   - $0600.00
#1234: Joe   - $0436.00
#6766: Jen   - $0215.00
#4571: Billy - $0072.00 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-20T22:16:14.213

创建一个“AccountEntry”类：

```
class AccountEntry {
  String id;
  String name;
  int balance;
} 
```

创建三个“比较器”：

```
class IdComparator implements java.lang.Comparator {
  public int compare(Object o1, Object o2) {
    AccountEntry a1 = (AccountEntry) o1;
    AccountEntry a2 = (AccountEntry) o2;
    return a1.id.compareTo(a2.id);
  }
}

class NameComparator implements java.lang.Comparator {
  public int compare(Object o1, Object o2) {
    AccountEntry a1 = (AccountEntry) o1;
    AccountEntry a2 = (AccountEntry) o2;
    return a1.name.compareTo(a2.name);
  }
}

class BalanceComparator implements java.lang.Comparator {
  public int compare(Object o1, Object o2) {
    AccountEntry a1 = (AccountEntry) o1;
    AccountEntry a2 = (AccountEntry) o2;
    if (a1.balance > a2.balance)
      return 1;
    if (a1.balance == a2.balance)
      return 0;
    return -1;
  }
} 
```

排序使用

```
Collections.sort(List, comparator) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-20T22:16:49.607

首先，您需要将数据保存在一个结构（类）中，该结构（类）将包含足够的数据来支持来自文件的传入数据。让我们称之为`BankAccount`类：

```
public class BankAccount {
    //NOTE: you can change the type of the elements used here, like double per BigDecimal
    private long id;
    private String owner;
    private double amount;
    //class constructors...
    //getters and setters...
} 
```

其次，您需要将这些对象存储在可以像数组或`List`. 我会推荐一个`List<BankAccount>`：

```
public class Bank {
    private List<BankAccount> accounts = new ArrayList<BankAccount>();
    //getters and setters...
} 
```

第三，您必须对数组进行排序。如果您处于学习阶段，则需要实现一种算法来对数组进行排序。如果您对 Java 有一定的经验，您可以使用[`Collections#sort(List, Comparator)`](http://docs.oracle.com/javase/7/docs/api/java/util/Collections.html#sort%28java.util.List,%20java.util.Comparator%29)并发送您的`List<BankAccount> accounts`作为第一个参数和`Comparator<BankAccount>`作为第二个参数。我将定义一个比较器示例，以根据帐户所有者名称对帐户进行排序（使用[匿名类](http://docstore.mik.ua/orelly/java-ent/jnut/ch03_12.htm)）：

```
public void sortByOwner() {
    Comparator<BankAccount> comparator = new Comparator<BankAccount>() {
        public int compare(BankAccount account1, BankAccount account2) {
            return account1.getOwner().compareTo(account2.getOwner());
        }
    };
    Collections.sort(accounts, comparator);
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-20T22:17:28.980

为简单起见，定义一个`User`类型：

```
class User
{
    public int id;
    public String name;
    public double balance;

    public User(int id, int name, int balance)
    {
        this.id = id;
        this.name = name;
        this.balance = balance;
    }
} 
```

然后为它定义`Comparator`类型（因为你可以有不同的比较规则）：

```
class UserComparatorByBalance implements Comparator<User>
{
    public int compare(User a, User b)
    {
        if (a.balance > b.balance) return 1; // or -1
        if (a.balance < b.balance) return -1; // or 1
        return 0;
    }
} 
```

然后，填充一个集合（列表）：

```
 ArrayList<User> users = new ArrayList<User>();
        s = reader.readLine();
        while(s != null)
        {
            array = s.split(delimiter);
            stringId = array[0];
            id = Integer.parseInt(array[0]);
            if(id != 0)
            {
                name = array[1];
                balance = Double.parseDouble(array[2]);
                System.out.println("ID#" + stringId + " " + name + " $" + balance); 
                User user = new User(id, name, balance);
                users.add(user);
            }
            s = reader.readLine();
        }
        reader.close(); 
```

最后，排序：

```
Collections.sort(users, new UserComparatorByBalance()); 
```

# c# - ASP.NET Web 应用程序中的 C# 递归：在列表框中显示静态方法中的数字

> ID：16125700
> 
> 赞同：1
> 
> 时间：2013-04-20T22:08:08.393
> 
> 标签：c#, asp.net, web-applications, recursion

我正在尝试在 C# 中学习递归。我可以在控制台应用程序中做一个简单的倒计时，但我不确定如何在 ASP.NET Web 应用程序中做同样的事情。我想在列表框中显示结果，但我无法在静态函数中访问列表框。

这是我的控制台应用程序：

```
 static void Main(string[] args)
    {
        int startInt = 100;
        countDown(startInt);
        Console.ReadLine();

    }
    public static void countDown(int integer)
    {
        if (integer == 1)
        {
            Console.WriteLine(integer);
        }
        else 
        {
            Console.WriteLine(integer);
            integer--;
            countDown(integer);
        }
    } 
```

关于让它在将在列表框中显示数字的 Web 应用程序中工作的任何帮助？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T22:28:53.687

您不需要将其保持为静态，因为您不再从静态函数调用它。使用类似这样的 countDown 函数

```
public void countDown(int integer)
{
    if (integer > 0)
    {
        ListBox1.Items.Add(integer.ToString());
        integer--;
        countDown(integer);
    }
} 
```

应该可以正常工作。我把它测试了出来

```
int startInt = 100;
countDown(startInt); 
```

在 Page_Load 方法中，ListBox 按预期显示。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-20T22:35:30.323

我不确定是否存在性能问题或更好的解决方案。但这很有效，并且可能是理解递归的一个很好的例子。

```
protected void Page_Load(object sender, EventArgs e)
{
    int startInt = 100;
    form1.Controls.Add(countDown(startInt, new ListBox()));
}

public static ListBox countDown(int integer, ListBox lb)
{
    ListItem li = new ListItem();

    if (integer > 0)
    {
        li.Text = integer.ToString();
        lb.Items.Add(li);

        integer--;
        countDown(integer, lb);
    }
    return lb;

} 
```

# javascript - “未捕获的类型错误：对象 [对象对象] 没有方法 'zclip'”

> ID：16125704
> 
> 赞同：0
> 
> 时间：2013-04-20T22:09:11.357
> 
> 标签：javascript, jquery, zclip

我正在尝试将 Zclip 添加到我的项目中，但它总是给我标题错误。已经搜索了很多，找到了很多“解决方案”，但这个错误根本不会消失。

这是我的代码：JS：

```
<script type="text/javascript" src="http://code.jquery.com/jquery-1.7.2.min.js"></script>
<script type="text/javascript" src="http://www.steamdev.com/zclip/js/jquery.zclip.min.js"></script>

$("a#click_expremed").on('click', function (e) {
  e.preventDefault();
}).zclip({
  path: 'http://www.steamdev.com/zclip/js/ZeroClipboard.swf',
  copy: function () {
    return $('#expremed').text();
  }
}); 
```

HTML：

```
<a href="#" class="generated black" style='display:inline-block;' id='click_expremed'>
<span id="expremed"> Some Random text</span> </a> 
```

请，如果有人知道一些修复，说我！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T02:43:05.373

您的代码看起来正确。请看下面的小提琴，忽略console.log中的跨域错误：http: [//jsfiddle.net/AQrNs/6/](http://jsfiddle.net/AQrNs/6/)

完全重复您的代码，减去链接：

```
$("a#click_expremed").on('click', function (e) {
  e.preventDefault();
}).zclip({
  path: 'http://www.steamdev.com/zclip/js/ZeroClipboard.swf',
  copy: function () {
    return $('#expremed').text();
  }
}); 
```

使用以下 HTML：

```
<a href="#" class="generated black" style='display:inline-block;' id='click_expremed'>
  <span id="expremed"> Some Random text</span> 
</a> 
```

只有当我删除小提琴的外部资源时，我才能复制你的错误。我相信问题是不知何故，您的 zclip 文件没有被加载。正如@juanchopx2 提到的，脚本调用应该包含在`<header>`您的 HTML 中，而不是`<body>`. 大多数时候，这无关紧要，但从语义上讲它是正确的，并且可能会导致您的问题。

我希望这有帮助！

# javascript - 我如何“插入” sigma.js 的插件？

> ID：16125705
> 
> 赞同：9
> 
> 时间：2013-04-20T22:09:26.530
> 
> 标签：javascript, visualization, sigma.js

Sigma.js 在他们的 GitHub 上列出了几个[示例](https://github.com/jacomyal/sigma.js/tree/master/examples)，但他们并不清楚加载插件需要什么。

我尝试过简单地包含一个`<script>`指向插件 JavaScript 文件的标记，但这不起作用。如何将插件导入/使用/复制粘贴到我的网站？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-21T20:54:19.700

首先，包括您需要的 sigma 文件：

```
<script src="sigma/sigma.concat.js"></script>
<script src="sigma/plugins/sigma.parseGexf.js"></script>
<script src="sigma/plugins/sigma.forceatlas2.js"></script> 
```

然后启动你的脚本；

```
<script type="text/javascript">
function init() {
  // Instanciate sigma.js and customize rendering :
   sigInst = sigma.init(document.getElementById('graph')).drawingProperties({
    defaultLabelColor: '#fff',
    defaultLabelSize: 14,
    defaultLabelBGColor: '#fff',
    defaultLabelHoverColor: '#000',
    labelThreshold: 6,
    defaultEdgeType: 'curve' 

  }).graphProperties({
    minNodeSize: 2,
    maxNodeSize: 5,
    minEdgeSize: 1,
    maxEdgeSize: 1

  }).mouseProperties({
    maxRatio: 32
  });

  // Parse a GEXF encoded file to fill the graph
  // (requires "sigma.parseGexf.js" to be included)
  sigInst.parseGexf('getgefx.php');

  sigInst.bind('downnodes',function(event){
    var nodes = event.content;
    var neighbors = {};
    sigInst.iterEdges(function(e){
      if(nodes.indexOf(e.source)>=0 || nodes.indexOf(e.target)>=0){
        neighbors[e.source] = 1;
        neighbors[e.target] = 1;

      } 
    }).iterNodes(function(n){
      if(!neighbors[n.id]){
        n.attr['temphidden'] = 1;
        n.attr['oldcolor'] = n.color;
        // var c = sigma.tools.getRGB(n.color);
        n.color = "#eee"; // #ccc";

        // n.color = "rgba("+c['r']+","+c['g']+","+c['b']+",0.2)";
      }
    }).draw(2,2,2);
  }).bind('upnodes',function(){
    sigInst.iterNodes(function(n){
        if(n.attr['temphidden'] == 1) {
            n.color = n.attr['oldcolor'];
            n.attr['temphidden'] = 0;
        }

    }).draw(2,2,2);
  });
  // Draw the graph :
  sigInst.draw(2,2,2);
  sigInst.startForceAtlas2();
  var isRunning = true;
  document.getElementById('stop-layout').addEventListener('click',function(){
    if(isRunning){
      isRunning = false;
      sigInst.stopForceAtlas2();
      document.getElementById('stop-layout').childNodes[0].nodeValue = 'Start Layout';
    }else{
      isRunning = true;
      sigInst.startForceAtlas2();
      document.getElementById('stop-layout').childNodes[0].nodeValue = 'Stop Layout';
    }
  },true);

}

if (document.addEventListener) {
  document.addEventListener("DOMContentLoaded", init, false);
} else {
  window.onload = init;
}
</script> 
```

# html - 图片库不断导致页面跳转

> ID：16125706
> 
> 赞同：0
> 
> 时间：2013-04-20T22:09:28.160
> 
> 标签：html, css

我正在尝试创建一个仅 CCS 和 HTML 的图片库滑块。

我已经让滑块工作了，但是每当按下按钮时，焦点就会跳到页面上。

我已经尝试了我能想到的一切，但没有成功:(

任何帮助都会很棒！

HTML：

```
<!DOCTYPE html>
<html>
<head>
<link rel="stylesheet" type="text/css" href="Style.css">
</head>
<body>
<div id="container">
<div id="header">
</div> <!-- end of header -->

<nav>
<ul>

<a href="index.html"><li id="HomeButton"><img id="HomeText" src="Images/Icons/HomeText.png" />
</li></a>

<a href="whatswhat.html"><li id="WhatsWhatButton">
<img id="WhatsWhatText" src="Images/Icons/WhatsWhatText.png" />
</li></a>

<a href="FoodFromPlants.html"><li id="FoodFromPlantsButton">
<img id="FoodFromPlantsText" src="Images/Icons/FoodFromPlantsText.png" />
</li></a>

<a href="howplantsgrow.html"><li id="HowPlantsGrowButton">
<div id="HowPlantsGrowText"><img src="Images/Icons/HowPlantsGrowText.png" />
</div>
<div id="HowPlantsGrowIcon"></div>
</li></a>

<a href="plantGame.html"><li id="PlantGameButton">
<img id="PlantGameText" src="Images/Icons/PlantGameText.png" />
</li></a>
</ul>

<form>
 <select accesskey="S" onchange="window.location.href=this.value;">
<option value="index.html">Home</option>
<option value="whatswhat.html">Whats What</option>
<option value="FoodFromPlants.html">Food From Plants</option>
<option value="howplantsgrow.html">How Plants Grow</option>
</select>
</form>

</nav> <!-- end of nav -->

<div id="page">
<div id="content">

<img class="title" src="Images/Icons/FoodFromPlantsTitle.png" width="250" height="100"/>

<div id="images">
    <img id="image1" src="Images/ImageGallery/Bananas.jpg" />
    <img id="image2" src="Images/ImageGallery/Apples.jpg" />
    <img id="image3" src="Images/ImageGallery/Broccoli.jpg" />
    <img id="image4" src="Images/ImageGallery/Carrots.jpg" />
    <img id="image5" src="Images/ImageGallery/Onions.jpg" />
    <img id="image6" src="Images/ImageGallery/Peas.jpg" />
</div>
<div id="slider">
    <a href="#image1">1</a>
    <a href="#image2">2</a>
    <a href="#image3">3</a>
    <a href="#image4">4</a>
    <a href="#image5">5</a>
    <a href="#image6">6</a>

</div>
</div> <!-- end of content -->
</div> <!-- end of page -->

<footer>
</footer> <!-- end of footer -->
</div>  <!-- end of container -->
</body>
</html> 
```

CSS：

```
#images {
    width: 400px;
    height: 250px;
    overflow: hidden;
    position: relative;
    margin: 20px auto;
}
#images img {
    width: 400px;
    height: 250px;
    position: absolute;
    top: 0;
    left: -400px;
    z-index: 1;
    opacity: 0;
    transition: all linear 500ms;
    -o-transition: all linear 500ms;
    -moz-transition: all linear 500ms;
    -webkit-transition: all linear 500ms;
}
#images img:target {
    left: 0;
    z-index: 9;
    opacity: 1;
}
#images img:first-child {
    left: 0;
}
#slider a {
    text-decoration: none;
    background: #E3F1FA;
    border: 1px solid #C6E4F2;
    padding: 4px 6px;
    color: #222;
}
#slider a:hover {
    background: #C6E4F2;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T04:25:10.403

我怀疑您是否可以在不添加 JavaScript 的情况下修复您当前的方法。

使用 jQuery，在点击时让图像淡入淡出非常简单。

检查此[jsFiddle](http://jsfiddle.net/apaul34208/sVmTn/)以获取实时示例。

```
<script src="http://code.jquery.com/jquery-latest.min.js"type="text/javascript"></script>

<script>
$(document).ready(function(){
$(".selector").click(function () {  
$('#image1').fadeToggle(); 
});
</script> 
```

只需将“.selector”替换为您要用作触发器的元素的类或 id。

# django - Django 使用外键

> ID：16125707
> 
> 赞同：0
> 
> 时间：2013-04-20T22:10:22.323
> 
> 标签：django, foreign-keys, models

我想知道如何修复从类 Categoria 获取外部值的代码，我需要获取 nombrecategoria 字段，但目前我不知道出了什么问题。

模型.py

```
class Subcategorias(models.Model):
  codigosubcategoria = models.CharField(max_length=7, unique=True)
  nombresubcategoria = models.CharField(max_length=30)
  descripcionsubcategoria = models.TextField(blank=True)
  codigocategoria = models.ForeignKey('Categorias')

  def __unicode__(self):
      return self.codigosubcategoria

class Categorias(models.Model):
  codigocategoria = models.CharField(max_length=7, unique=True)
  nombrecategoria = models.CharField(max_length=30)
  descripcioncategoria = models.TextField(blank=True)

  def __unicode__(self):
      return self.codigocategoria 
```

视图.py

```
def lista_subcategorias(request):
    subcategorias = Subcategorias.objects.all()
    categorias = Categorias.objects.all()
    return render_to_response('lista_subcategorias.html',{'datos':subcategorias, 'categorias':categorias}, context_instance=RequestContext(request)) 
```

lista_subcategorias.html

```
<H2>Subcategorias Registradas</H2>

<table border=1>
    <tr><td>codigo</td>
    <td>Nombre</td>
    <td>Descripcion</td>
    <td>Categoria</td>
    </tr>

    <tr>
        <ul>

    {% for dato in datos %}

    <td><B>{{dato.codigosubcategoria}}</B></td>

    <td><b>{{dato.nombresubcategoria}}<b></td>
    <td><b>{{dato.descripcionsubcategoria}}<b></td>
        {% for item in categorias %}
            {% if item.codigocategoria == dato %}   
                <td><B>{{item.nombrecategoria}}</B></td>
            {% endif %}
        {% empty %}
            <li>empty</li>
        {% endfor %}
    {% empty %}
        <li>empty</li>
    {% endfor %}

    </tr>
        </ul>
</table> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T22:39:41.830

您不需要获取类别对象。要访问您使用的相关类别对象的字段`{{ dato.codigocategoria.nombrecategoria }}`

视图.py

```
def lista_subcategorias(request):
    subcategorias = Subcategorias.objects.all()
    return render_to_response('lista_subcategorias.html',{'datos':subcategorias}, context_instance=RequestContext(request)) 
```

lista_subcategorias.html

```
<H2>Subcategorias Registradas</H2>

<table border=1>
    <tr><td>codigo</td>
    <td>Nombre</td>
    <td>Descripcion</td>
    <td>Categoria</td>
    </tr>

    <tr>
    {% for dato in datos %}

    <td><b>{{ dato.codigosubcategoria }}</b></td>

    <td><b>{{ dato.nombresubcategoria }}</b></td>
    <td><b>{{ dato.descripcionsubcategoria }}</b></td> <!-- don't forget to close your tags -->
    <td><b>{{ dato.codigocategoria.nombrecategoria }}</b></td>
    {% empty %}
        <td colspan="4">empty</td>
    {% endfor %}
    </tr>
</table> 
```

另外，我不知道您为什么在表格中使用该列表，这没有任何意义。

# c++ - 通过引用传递的 int 和传递的 int 地址之间的区别

> ID：16125711
> 
> 赞同：0
> 
> 时间：2013-04-20T22:10:31.043
> 
> 标签：c++, pointers, parameters, reference

```
void VoidRef (int &ref){
   ref++;
}

void VoidPtr (int *ptr){
  (*ptr)++;
}

int test= 5;

VoidRef(test);
cout << test;  // is 6

VoidPtr(&test);
cout << test;  // is 7 ! 
```

为什么两个空洞做同样的事情？哪个虚空需要更多资源？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T22:15:52.993

```
void VoidRef (int &ref){
              //^^pass by reference
   ref++;
}

void VoidPtr (int *ptr){
                //^^ptr stores address of test
  (*ptr)++;
} 
```

`Why do both voids do the same thing?`

`ref`是对 test 的引用，即 的别名`test`，所以对 的操作`ref`也是对 的操作`test`。

`ptr`是一个存储 的内存地址的指针`test`，因此`(*ptr)++`会将存储在内存地址上的值加一。第一个输出是 6 而第二个输出是 7 的原因是每次调用这两个函数都会将变量值增加 1。

您可以`think of`同时对变量的地址进行操作`VoidRef`，因此它们具有相同的效果。`VoidPtr``test`

# sql - 是什么导致了这个 System.Data.SqlClient.SqlException 错误。我的 SqlDataAdapter 的问题

> ID：16125712
> 
> 赞同：0
> 
> 时间：2013-04-20T22:10:32.307
> 
> 标签：sql, sql-server, vb.net, sql-server-2008, sqldataadapter

我不确定为什么会收到此错误。我的问题的描述在代码下方。我在下面的代码中排除了一些 Select Cases 和字段，以使其尽可能短。

```
 Private Sub SetClassGrid(ByVal ClassCategory As String)
    Dim connectionString As String = WebConfigurationManager.ConnectionStrings("theDataBase").ConnectionString
    Dim con As New SqlConnection(connectionString)
    Dim sqlCommand As StringBuilder = New StringBuilder()

    sqlCommand.Append("SELECT Name, City, State FROM Classes$ WHERE (ClassesCategoryID = ")

    Select Case ClassCategory
        Case "Art"
            sqlCommand.Append("1)")
        Case "Drama"
            sqlCommand.Append("2)")
        Case "Aquarium"
             sqlCommand.Append("2)")         
    End Select

    Dim cmd As String = sqlCommand.ToString()
    Dim da As New SqlDataAdapter(cmd, con)
    Dim ds As New DataSet()

    Try
        con.Open()
        da.Fill(ds, "Classes$")

    Finally
        con.Close()
    End Try

    GridView1.DataSource = ds.Tables("Classes$")
    GridView1.DataBind()

End Sub 
```

对于 Select Case- 当*ClassCategory* = "Art" 时，它工作正常；但是，当*ClassCategory*等于其他任何值时，我得到一个错误。

同样对于 Select Case - 如果案例是“艺术”并且如果我将*sqlCommand*从 =“1)”更改为 =“2)”，它会按预期工作。

所以问题是上面的代码只适用于第一个案例。 [![在此处输入图像描述](https://i.stack.imgur.com/n3o76.jpg)](https://i.stack.imgur.com/n3o76.jpg)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-20T22:16:18.520

调试器显示什么？`sqlCommand`发生错误时的值是多少？

只是为了确保查询仍然有效，请为您添加默认行为`select case`：

```
Select Case ClassCategory
    Case "Art"
        sqlCommand.Append("1)")
    Case "Drama"
        sqlCommand.Append("2)")
    Case "Aquarium"
        sqlCommand.Append("2)")
    Case Else
        sqlCommand.Append("-1)")
End Select 
```

更好的是，参数化您的查询：

```
SqlDataAdapter adapter = new SqlDataAdapter();
SqlCommand command = new SqlCommand("SELECT Name, City, State FROM Classes$ WHERE " + 
                                    "ClassesCategoryID = @Id", connection);

// Add the parameters for the SelectCommand.
command.Parameters.Add("@Id", SqlDbType.Int);

adapter.SelectCommand = command; 
```

并将参数填写在您的`select case`：

```
Select Case ClassCategory
    Case "Art"
        command.Parameters["@Id"].Value = 1;
    Case "Drama"
        command.Parameters["@Id"].Value = 2;
    Case "Aquarium"
        command.Parameters["@Id"].Value = 2;
    Case Else
        command.Parameters["@Id"].Value = -1;
End Select 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-20T22:17:14.607

考虑添加中断；? 尝试一步一步，在你的代码执行查询之前，尝试复制查询sql并在服务器中手动执行，看起来查询搞砸了

# c++ - C ++监视变量以更改值

> ID：16125713
> 
> 赞同：9
> 
> 时间：2013-04-20T22:10:32.687
> 
> 标签：c++, object, state, tradestation

我正在将 TradeStation EasyLanguage 指标代码转换为 C++ DLL。使用 TradeStation API 可以访问 C++ DLL 中的市场数据，如下所示：

```
double currentBarDT = pELObject->DateTimeMD[iDataNumber]->AsDateTime[0]; 
```

我的问题是：

C++ 中是否有可能以某种方式“监视”或“监听”变量“currentBarDT”的值何时更改/更新？我想使用值的变化作为触发器来使用 Boost.Signals2 生成信号。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-07-21T11:48:47.413

您可以使用适合您需要的条件变量。

[http://en.cppreference.com/w/cpp/thread/condition_variable/notify_all](http://en.cppreference.com/w/cpp/thread/condition_variable/notify_all)

在您更新市场数据的信号中 (i)

在等待中，您在 i 上放置了一个条件变量（例如，某个水平下的股票）

如果您需要更多信息，请告诉我，我可以详细说明并使其更加明确。

```
#include <stdlib.h>     /* srand, rand */
#include <iostream>
#include <condition_variable>
#include <thread>
#include <chrono>
#include <atomic>
std::condition_variable cv;
std::mutex cv_m;
double StockPrice;//price of the stock
std::atomic<int> NbActiveThreads=0;//count the number of active alerts to the stock market

void waits(int ThreadID, int PriceLimit)
{
      std::unique_lock<std::mutex> lk(cv_m);
      cv.wait(lk, [PriceLimit]{return StockPrice >PriceLimit ;});
      std::cerr << "Thread "<< ThreadID << "...Selling stock.\n";
      --NbActiveThreads;
}

void signals()
{
    while (true)
    {
        std::this_thread::sleep_for(std::chrono::seconds(1));
        std::cerr << "GettingPrice "<<std::endl;
        std::unique_lock<std::mutex> lk(cv_m);
        /* generate secret number between 1 and 10: */
        StockPrice = rand() % 100 + 1;  
        std::cerr << "Price =" << StockPrice << std::endl;
        cv.notify_all();//updates the price and sell all the stocks if needed
        if (NbActiveThreads==0)
        {
            std::cerr <<"No more alerts "<<std::endl;
            return;
        }
    }

}

int main()
{
    NbActiveThreads=3;
    std::thread t1(waits,1,20), t2(waits,2,40), t3(waits,3,95), t4(signals);
    t1.join(); 
    t2.join(); 
    t3.join();
    t4.join();
    return 0;
} 
```

希望有帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-01-17T12:21:48.313

您可以创建某种存储类并`operator=`在调用通知程序中实现。可能适用于模板，但您需要在标题中保留规范。也可以创建类似的接口并覆盖通知程序调用。

# installation - 尝试在 solaris 中运行 byobu 时出现错误消息

> ID：16125714
> 
> 赞同：2
> 
> 时间：2013-04-20T22:10:36.283
> 
> 标签：installation, solaris, tmux, byobu

我能够成功执行

```
'./configure --prefix=/my/path;make;make install' 
```

在 byobu 源代码上。我还安装了 tmux-1.8。但是当我尝试跑步时

```
byobu 
```

或者

```
byobu-tmux 
```

我收到很多错误，说 find 无法访问文件（它不能，因为我想在没有完全访问权限的本地系统上构建 byobu）我想问的错误消息是

```
install: null was not found anywhere! 
```

这是一系列错误后的最后一条消息，其形式为 find:[cannot read|stat() error |cycle detected] filename

（tmux 1.8 和 byobu 在我的其他桌面上运行良好（我拥有完全访问权限））。

我需要再次构建 byobu 吗？或者在 byobu 脚本中进行更改？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T13:40:46.063

解决了。

byobu-tmux 运行 byobu-janitor --force

里面使用了solaris中不存在的命令“安装”，它与触摸文件名相同；chmod xxx文件名

刚刚替换它并且错误消息消失了。但仍然无法运行它..新错误

# sockets - 有人可以澄清 RTCdatachannel 将如何工作吗？他们的要求是什么？

> ID：16125718
> 
> 赞同：2
> 
> 时间：2013-04-20T22:11:14.150
> 
> 标签：sockets, networking, websocket, webrtc

首先，我只是明白它不会是纯粹的 p2p 功能，它根本不是套接字，出于安全和 DDOS 目的。

但是我很难弄清楚提供、回答、SDP、ICE、STUN 等内容。似乎有很多抽象和要求。

这是否意味着总是需要有一个集中 IP 地址的网站？

它会使实施 DHT 变得困难吗？

我认为它会是某种套接字等价物，但它似乎非常不同并且更复杂。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-30T16:10:28.457

您仍然需要一些中央服务器来建立对等点之间的连接。

服务器应该提供一些信号传输——它可以是 websockets、google appengine 通道或一些手工制作的东西。客户端将使用此传输与服务器进行通信，然后才能建立 p2p 连接。

此外，您需要一些 STUN 服务器来支持 NAT 穿越功能 - 对于那些在 NAT 后面工作的客户端（即家庭/办公室网络路由器）。你可以使用一些开源实现来安装你自己的 STUN 服务器。或者你可以使用谷歌的 STUN 服务器。

实际上，所有这些信息一般都适用于 WebRTC，但它特别适用于 RTCDataChannel。

在这里你可以找到如何使用 DataChannel 的好例子：[https ://github.com/muaz-khan/WebRTC-Experiment/tree/master/DataChannel](https://github.com/muaz-khan/WebRTC-Experiment/tree/master/DataChannel)

在这里，您可以找到我使用 Erlang 和 Websockets 进行信号协议的视频聊天示例：[https ://github.com/fycth/webrtcexample](https://github.com/fycth/webrtcexample)

# c# - 你如何清除 WPF RichTextBox？

> ID：16125721
> 
> 赞同：12
> 
> 时间：2013-04-20T22:11:50.740
> 
> 标签：c#, wpf, richtextbox

每当我这样做`richtextbox1.Clear()`时，它都会说该方法不存在。这几乎是我得到的唯一解决方案，无论我走到哪里。

我尝试过寻找`Text`房产，也尝试过查看`Document`房产，但无济于事。

我错过了什么？需要清除该框，就像您可以通过`textbox.Clear()`通话一样。

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2013-04-20T22:20:05.447

您可以使用清除 RichTextBox`richTextBox.Document.Blocks.Clear();`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-11-07T14:49:42.897

如果您要在richTextBox 中添加一些控件（例如下面）：

```
LinkLabel link = new LinkLabel();
richTextBox1.Controls.Add(link); 
```

你必须使用

```
richTextBox1.Controls.Clear(); 
```

删除所有控件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-04-24T15:17:54.370

对 Windows 窗体执行此操作的正确方法是`richTextBox.ResetText();`

* * *

## 回答 #4

> 赞同：-4
> 
> 时间：2013-04-20T22:21:45.310

你也可以这样做`richTextBox.Text = "";`。

# android - 旋转设备后 ListView 不再可点击

> ID：16125724
> 
> 赞同：3
> 
> 时间：2013-04-20T22:12:22.950
> 
> 标签：android, listview, android-fragments, android-activity

我有一个包含两个片段的活动，一个`ListView`使用适配器显示一个项目，第二个显示有关特定列表项的信息，当它被单击时。

一切正常，除了一旦我旋转设备并重新创建活动，我的 ListView 就搞砸了，有时不可滚动或不可点击（没有点击动画，点击时什么也没有发生）。

有任何想法吗？我不想禁用清单中的配置更改，因为我知道这不是一个好习惯。

活动代码：

```
public class MainActivity extends FragmentActivity implements AppListFragment.AppListFragmentCallback{

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        AppListFragment fragment = new AppListFragment();
        fragment.setArguments(getIntent().getExtras());
        fragment.setRetainInstance(true);
        getSupportFragmentManager().beginTransaction().add(R.id.main_frame, fragment).commit();
    }

    @Override
    public void onAppSelected(String app) {
        AppDetailsFragment fragment = new AppDetailsFragment();
        Bundle args = new Bundle();
        args.putString(AppDetailsFragment.KEY_APP, app);
        fragment.setArguments(args);
        fragment.setRetainInstance(true);

        getSupportFragmentManager().beginTransaction().replace(R.id.main_frame, fragment).addToBackStack(null).commit();
    }
} 
```

列出片段代码：

```
public class AppListFragment extends Fragment {

    public interface AppListFragmentCallback {
        void onAppSelected(String app);
    }

    private AppListFragmentCallback callback;

    @Override
    public void onAttach(Activity activity) {
        super.onAttach(activity);

        // This makes sure that the container activity has implemented
        // the callback interface. If not, it throws an exception
        try {
            callback = (AppListFragmentCallback) activity;
        } catch (ClassCastException e) {
            throw new ClassCastException(activity.toString()
                    + " must implement AppListFragmentCallback");
        }       
    }

    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {
        View view = inflater.inflate(R.layout.fragment_app_list, container, false);

        AppListAdapter adapter = new AppListAdapter();

        ListView lv = (ListView)view.findViewById(R.id.view_app_list);
        lv.setAdapter(adapter);
        lv.setOnItemClickListener(new OnItemClickListener() {

            @SuppressWarnings("rawtypes")
            @Override
            public void onItemClick(AdapterView parent, View view, int position, long id) {
                callback.onAppSelected((String)parent.getAdapter().getItem(position));
            }
        });

        return view;
    }
} 
```

适配器代码：

```
public class AppListAdapter extends BaseAdapter implements ListAdapter {

    private ArrayList<String> apps;

    public AppListAdapter() {

        apps = new ArrayList<String>();
        for (Integer i = 0; i < 50; i++)
        {
            apps.add(i.toString());
        }
    }

    @Override
    public int getCount() {
        return apps.size();
    }

    @Override
    public Object getItem(int position) {
        return apps.get(position);
    }

    @Override
    public long getItemId(int position) {
        return position;
    }

    @Override
    public View getView(int position, View convertView, ViewGroup parent) {
        TextView text = new TextView(parent.getContext());
        text.setText("App number " + apps.get(position));
        text.setPadding(10, 3, 10, 3);
        text.setBackgroundResource(R.drawable.button_xml);
        return text;
    }
} 
```

详细视图片段代码：

公共类 AppDetailsFragment 扩展片段 { final static String KEY_APP = "key_app";

```
@Override
public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {
    View view = inflater.inflate(R.layout.fragment_app_details, container, false);

    TextView textName = (TextView)view.findViewById(R.id.text_app_name);
    TextView textDesc = (TextView)view.findViewById(R.id.text_app_description);

    Bundle args = getArguments();
    String app = args.getString(KEY_APP);
    if (app == null) 
        return view;

    textName.setText(app);
    textDesc.setText("App Description");

    return view;
} 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T22:43:09.907

好的，我在阅读这篇文章后设法弄清楚：[为什么使用 Fragment#setRetainInstance(boolean)？](https://stackoverflow.com/questions/11160412/why-use-fragmentsetretaininstanceboolean)

显然，设置`fragment.setRetainInstance(true);`意味着片段不被破坏，但是活动被破坏并`onCreate()`创建片段的新实例，即使它没有被破坏。

在创建新的之前，我通过编辑活动`onCreate()`来检查片段是否存在来解决问题：

```
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    AppListFragment fragment = (AppListFragment)getSupportFragmentManager().findFragmentByTag(TAG_LIST_FRAGMENT);
    if (fragment == null) {
        fragment = new AppListFragment();
        fragment.setRetainInstance(true);
        fragment.setArguments(getIntent().getExtras());
        getSupportFragmentManager().beginTransaction().add(R.id.main_frame, fragment, TAG_LIST_FRAGMENT).commit();
    }
} 
```

# ruby-on-rails - Rails 3、Action Mailer、附件、form_for、电子邮件

> ID：16125725
> 
> 赞同：3
> 
> 时间：2013-04-20T22:12:36.413
> 
> 标签：ruby-on-rails, ruby-on-rails-3, actionmailer, email-attachments

如何使用 form_for 将文件附加到邮件？到目前为止，它给了我一个错误：

用户控制器中的 ActiveRecord::StatementInvalid#create

NoMethodError：nil 的未定义方法“名称”：NilClass：插入“用户”（“created_at”、“email”、“file_field”、“name”、“text_field”、“updated_at”）值（？，？，？， ?, ?, ?)

这就是我想出的。

```
class UserMailer < ActionMailer::Base
  default :from => "example@gmail.com"

    def registration_confirmation(user)
      @user = user
         unless user[:file_field].nil?
           file=user[:file_field]
           attachments[file.original_filename] = File.open(file.path, 'rb'){|f| f.read}
         end
    mail(:to => user.email, :subject => "Registered")
  end
end 
```

看法

```
 <%= form_for @user, :html => {:multipart => true} do |f| %>
<div class="field">
  <%= f.label :file_field %><br />
  <%= f.file_field :file_field %>
</div>
 <div class="field">
   <%= f.label :name %><br />
   <%= f.text_field :name %>
</div>
<div class="field">
   <%= f.label :email %><br />
   <%= f.text_field :email %>
</div>
<div class="actions">
   <%= f.submit %>
</div>
<% end %> 
```

创建动作

```
def create
@user = User.new(params[:user])

  if @user.save
UserMailer.registration_confirmation(@user).deliver
    redirect_to @user
  else
   render action: "new" 
  end
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T22:46:27.717

这是 stackoverflow 上的热门话题，请务必查看其他线程。他们真的很深入，应该可以解决你的问题。

例如：[解决方案 1](https://stackoverflow.com/a/8625980/1792207)、[解决方案 2](https://stackoverflow.com/a/11314127/1792207)、[解决方案 3](https://stackoverflow.com/a/7177061/1792207)

如果这没有结果，回来，我们一定会启动另一个邮件附件线程。

# javascript - 检查窗口可以滚动多远？

> ID：16125728
> 
> 赞同：1
> 
> 时间：2013-04-20T22:12:56.417
> 
> 标签：javascript, jquery

这似乎应该很容易，所以我只是不明白我忽略了什么。我已经尝试过 jQuery `$(document).width()`，但没有返回正确的值。我只需要检查窗口可以滚动多远（水平）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T22:18:42.820

您需要[获取视口的宽度](https://stackoverflow.com/q/1248081/707111)，并从文档的宽度中减去它：

```
$(document).width() - $(window).width() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-20T22:39:36.870

单击按钮可显示此窗口的高度和宽度（不包括工具栏和滚动条）。

你试过直接的javascript吗？尝试运行这段代码，看看你会得到什么样的结果。我建议仅在加载所有 dom 和图像后放置任何脚本来测量您的尺寸。

希望以下对您有所帮助！干杯!

```
<button onclick="myFunction()">Try it</button>

<script>
function myFunction()
{
var w=window.innerWidth;
var h=window.innerHeight;
x=document.getElementById("demo");
x.innerHTML="Width: " + w + " Heigth: " + h;
}
</script>

</body>
</html> 
```

# c++ - 使用父类构造函数将值重新分配给继承的变量

> ID：16125730
> 
> 赞同：0
> 
> 时间：2013-04-20T22:13:07.810
> 
> 标签：c++, oop, class, inheritance

我有一个从类 A 继承的 C++ 类 B。我可能错过了 OOP 的一个重要概念，这当然很琐碎，但我不明白如何在 B 的实例化之后使用 B 中的 A 的构造函数重新分配新值*仅适用*于从 A 继承的局部变量：

*A级*

```
class A{
    public:
        A(int a, int b){
            m_foo = a;
            m_bar = b;
            }
    protected:
        int m_foo;
        int m_bar;
}; 
```

*B类*

```
class B : public A{
    public:
        B(int a, int b, int c):A(a,b),m_loc(c){};
        void resetParent(){
            /* Can I use the constructor of A to change m_foo and 
             * m_bar without explicitly reassigning value? */

            A(10,30); // Obviously, this does not work :)

            std::cout<<m_foo<<"; "<<m_bar<<std::endl; 
            }
    private:
        int m_loc;
}; 
```

*主要的*

```
int main(){
    B b(0,1,3);
    b.resetParent();
    return 1;
    } 
```

在这个具体的例子中，我想调用`b.resetParent()`which should call`A::A()`来改变`m_foo`and `m_bar`(in`b`为 10 和 30。因此，我应该打印“10; 30”而不是“0; 1”。

非常感谢您的帮助，

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-20T22:15:30.040

您不能使用构造函数来更改对象，只能构造它。要更改已经构造的对象，您需要使用它的`public`and `protected`（如果是派生的`class`）成员。在您的示例`A`中，需要实现一个`reset()`成员函数，该函数稍后可用于重置其状态。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-21T06:27:43.353

不，您不能调用基类构造函数来重置值。但是，您要重置的值被声明为`protected`可以`B`直接访问它们：

```
void resetParent()
{
    m_foo = 10;
    m_bar = 30;

    std::cout << m_foo << "; " << m_bar << std::endl; 
} 
```

**如果** `A`定义了`=`赋值运算符，您也可以声明一个临时`A`实例并将其分配给基类：

```
void resetParent()
{
    *this = A(10, 30);
    // or:
    // A::operator=(A(10, 30));

    std::cout << m_foo << "; " << m_bar << std::endl; 
} 
```

# c# - SignalR 可以帮助这种情况 - 在不轮询的情况下检测计划完成吗？

> ID：16125751
> 
> 赞同：2
> 
> 时间：2013-04-20T22:16:25.767
> 
> 标签：c#, asp.net, signalr

在我的网页上（写在 asp.net mvc3 上），用户可以在 ms sql 数据库中创建一个计划，然后需要通知用户计划完成以及一些数据作为结果。

为了检测计划完成（其唯一 id 会在完成时从表中消失），目前我正在执行 ajax 轮询，然后进行额外的 ajax 调用以从数据库中获取结果数据。

可以通过使用 SignalR 来改善这种情况吗？如果可以，如何改善？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-20T23:43:27.337

> 可以通过使用 SignalR 来改善这种情况吗？如果可以，如何改善？

绝对可以改进。目前，我假设您正在执行 Ajax 轮询，但不知道何时真正需要刷新页面以显示计划完成的更新。使用 SignalR 实现，您将拥有一个使用集线器方法和客户端回调创建的服务器端集线器，以处理来自服务器集线器的回调。您不需要您的客户端轮询服务器以查看是否有任何更新。但是有些您需要在服务器内部（可能是 BG 工作人员）有一个轮询机制来检测计划完成（假设这是一个自动活动）。Signalr 不会自动执行这些操作，您需要从服务器发起呼叫到客户端集线器订阅。

就像您的场景的简单原型一样，您可以在服务器上创建一个集线器，例如：-

`ScheduleHub`它可能有 2 个功能，比如`CreateSchedule`和`SetScheduleCompletion`。提供 setScheduleCompletion 知道

在您的客户端 javascript 上，您将获得 hubConnection 实例

```
 var scheduleCheckHub= $.connection.scheduleHub;
//when the use
    $("#createSchedule").click(function () {
                    scheduleCheckHub.server.createSchedule(somedata);
                }); 
```

客户端集线器方法回调来处理来自服务器的回调。

```
scheduleCheckHub.client.updateScheduleStatus = function (data) {
              //do something
            }; 
```

您将有连接开始停止，重新连接逻辑等

```
 $.connection.hub.start().done(function () {
              //do something
            });
       ..... 
```

在您的服务器集线器 SetScheduleCompletion 方法中

```
 public void SetScheduleCompletion()
   {
 .....
//some code that knows when the schedule has been completed.
//Now i know that this schedule has been completed so
//push this to all the clients, ok then make the call back to the client hub proxy method
      Clients.All.updateScheduleStatus(responseObject); 
//No i just want to send this to only specific clients. Ok then do this
   var subscribers = Clients.Group(someIdentifierToGetGroups);
   subscribers.updateScheduleStatus(responseObject);
} 
```

同样，事情可能会根据应用程序的复杂性而改变。这是一个非常简单的场景和实现。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-20T22:22:01.290

如果您要使用 SignalR，您的应用程序的结构会略有变化。

例如，不是在客户端上进行 ajax 轮询，而是让您的服务器轮询或以某种方式更新已完成的时间表。

一旦 SignalR 知道计划已完成，它就可以将数据与有关计划完成的信息一起推送到您的客户端。

# matlab - 根据范围绘制函数结果

> ID：16125753
> 
> 赞同：0
> 
> 时间：2013-04-20T22:16:30.983
> 
> 标签：matlab, plot

我正在尝试根据范围绘制函数结果；为此，我定义了范围 -

```
r = [-1:0.01:4.5] 
```

我有一个`G.m`描述函数的文件 -

```
function [y] = G(x)
y=(1/4)*((x^3)-4*(x^2)+7*x);
end 
```

我想检查`G`所有范围内的功能`r`。

我试过`plot(r,G(r))`没有成功。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T22:18:40.590

改变

```
y=(1/4)*((x^3)-4*(x^2)+7*x); 
```

至：

```
y=(1/4)*((x.^3)-4*(x.^2)+7*x); 
```

并且`plot(r,G(r))`会为你工作，我的朋友。

# ios - EXC_BAD_ACCESS 尝试使用 skpsmtpmessage

> ID：16125754
> 
> 赞同：2
> 
> 时间：2013-04-20T22:16:31.030
> 
> 标签：ios, objective-c, ipad, email

我正在尝试使用 skpsmtpmessage 库从我的 iPad 程序发送电子邮件。一切顺利通过 SMTP 身份验证，有时甚至成功发送电子邮件。但是，我总是在同一点得到一个 EXC_BAD_ACCESS：

```
libobjc.A.dylib`objc_msgSend:
0x140708c:  movl   8(%esp), %ecx
0x1407090:  movl   4(%esp), %eax
0x1407094:  testl  %eax, %eax
0x1407096:  je     0x14070e8                 ; objc_msgSend + 92
0x1407098:  movl   (%eax), %edx
0x140709a:  pushl  %edi
0x140709b:  movl   8(%edx), %edi                 <Thread 1: EXC_BAD_ACCESS (code=1, address=0xe0000008
0x140709e:  pushl  %esi 
```

# r - TwitteR：尝试使用 getFollowers() 或 getFriends() 时出现问题

> ID：16125757
> 
> 赞同：1
> 
> 时间：2013-04-20T22:16:57.397
> 
> 标签：r, twitter, rcurl

这可能是一个非常基本的问题，但是，我花了很多时间试图弄清楚，根本无法提出解决方案。

我一直在尝试使用 TwitteR 从 Twitter 获取用户朋友和关注者的数据。我使用了这个简单的语法：

```
user_test<-getUser('WorldBank') 

user_test_n<-user_test$getScreenName()

following<-user_test$getFollowers(n=50) 
```

运行最后一行后，我收到此消息：

```
Error in split.default(users, ceiling(seq_along(users)/100)) : 
  first argument must be a vector 
```

当我尝试从 Twitter 中提取朋友时，也会出现同样的问题。语法似乎很简单——可能是什么问题？

谢谢！

露西

# javascript - 检查XXTEA是否解密成功

> ID：16125761
> 
> 赞同：0
> 
> 时间：2013-04-20T22:17:29.063
> 
> 标签：javascript, encryption, xxtea

我[在 javascript 中使用](http://www.movable-type.co.uk/scripts/tea-block.html)[XXTEA](http://en.wikipedia.org/wiki/XXTEA) 并且一切正常，但我希望能够对密码进行错误检查 - 所以我需要确定任意文本的解密是否成功。

目前，我能想到的唯一不理想的解决方案是在加密期间使用令牌开始文本，并在解密后检查它是否存在 - 但这并不理想。还有其他方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T10:17:35.857

您可以在执行 PBKDF（例如 PBKDF2）后立即使用 KBKDF（例如 HKDF）或 NIST 定义的 KBKDF 之一。然后，您可以使用特定信息字段生成一个密钥以与已知的存储密钥进行比较，并使用另一个信息字段生成用于加密的密钥。您可能还想添加某种完整性控制。

这对您来说可能听起来像是胡言乱语，在这种情况下，首先查找相关术语，例如在维基百科上......

# javascript - 使用 JavaScript 初始化 BootStrap Typeahead 时遇到问题

> ID：16125766
> 
> 赞同：0
> 
> 时间：2013-04-20T22:18:16.707
> 
> 标签：javascript, jquery, twitter-bootstrap

我有一个简单的 Bootstrap 预输入，如下所示：

```
<input tabindex="1" type="text" name="q" class="search-query" id="wSearch" 
    data-provide="typeahead" data-items="3" 
    data-source='["AL", "AK", "AZ", "AR", "CA", "CO", "CT"]' 
    placeholder="Search"> 
```

这工作得很好。

也就是说，我希望数据来自 ajax 调用，所以我想用 JavaScript 转换 typeahead 初始化。当我写这篇文章时，我的预输入不起作用：

```
var options = {
    items: 3,
    source: ["AL", "AK", "AZ", "AR", "CA", "CO", "CT"]
};
$("#wSearch").typeahead(options);

...

<input tabindex="1" type="text" name="q" class="search-query" 
    id="wSearch" placeholder="Search"> 
```

我可以单步执行代码并查看它正在执行，并且我没有看到任何 JavaScript 错误，但 typeahead 根本不起作用。

我一定错过了一些微不足道的东西，但是在盯着它看了很长时间之后，我仍然没有看到它。

有什么想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-20T22:20:00.560

`$(document).ready();`在 DOM 准备好之前尝试加载您的代码。

```
$(document).ready(function(){
   var options = {
    items: 3,
    source: ["AL", "AK", "AZ", "AR", "CA", "CO", "CT"]
   };
   $("#wSearch").typeahead(options);
}); 
```

# android - 当电池温度超过限制时通知用户

> ID：16125770
> 
> 赞同：0
> 
> 时间：2013-04-20T22:18:43.887
> 
> 标签：android, service, notifications, battery

我正在开发一个从用户那里获得最高温度的应用程序。它会持续监控电池的当前温度。一旦温度超过用户提供的最高温度，它应该通知用户。

我设计了布局，编写了逻辑来存储用户的温度，我知道我可以使用 EXTRA_TEMPERATURE 监控温度。但是，此应用程序应在后台运行。由于我必须始终监控温度，因此从逻辑上讲，服务应该始终运行。

在阅读论坛上，我知道这会大量消耗电池电量，并且大多数情况下可以在屏幕打开时运行服务。但是，我想知道是否可以在不耗尽电池的情况下在后台使用该服务。或者有没有其他方法可以实现这一目标？

我的应用与此类似：[创建激活后在后台运行的温度感应 Android 应用](https://stackoverflow.com/questions/12075084/creating-a-temperature-sensing-android-app-that-runs-in-the-background-after-act)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T22:24:21.690

> 由于我必须始终监控温度，因此从逻辑上讲，服务应该始终运行。

伊克。

> 或者有没有其他方法可以实现这一目标？

第 1 步：允许用户选择轮询周期（一分钟、五分钟、10 分钟等）。

第 2 步：根据轮询周期设置`AlarmManager`时间表以获取控制权，将控制权路由到`BroadcastReceiver`.

步骤#3：在`onReceive()`中`BroadcastReceiver`，通过 获取上次广播的电池信息`registerReceiver(null, new IntentFilter(Intent.ACTION_BATTERY_CHANGED))`，挑选出来`EXTRA_TEMPERATURE`，并根据您当前的算法进行处理。如果要在此处完成的工作将超过几毫秒，请考虑将该工作委托给一个`IntentService`，它可以在后台线程上完成工作。

这样，您不需要一直将进程保存在内存中，并且用户可以选择他们想要监控温度的积极程度——监测越积极，电池成本就越高（讽刺的是，更多监控将增加电池温度）。

# python - 构造函数参数重用于新对象？

> ID：16125772
> 
> 赞同：4
> 
> 时间：2013-04-20T22:18:45.873
> 
> 标签：python

我是 Python 新手，在使用它编写一个小型应用程序时遇到了一个问题。由于我在 Google 上找不到类似的东西，我可能误解了 Python 的一些基本概念。如果你们当中有人能向我解释一下，那就太好了。

所以这是一个最小的工作示例。请忽略类名和变量名，也就是说只是一个人为的例子，但它说明了我的意思。您可以将其 c&p 到您的 IDE 并自己运行。

```
class State(object):
    def __init__(self, wrappers = []):
        self.wrappers = wrappers

    def add(self, name, items):
        lst = KeyValList(name)
        for item in items:
            lst.add(item, items[item])
        self.wrappers.append(Wrapper(lst))

class Wrapper(object):
    def __init__(self, kv_lst):
        self.kv_lst = kv_lst

class KeyValList(object):
    def __init__(self, name, kvals = []):
        self.name = str(name)
        self.kvals = kvals

    def add(self, key, value):
        self.kvals.append(KeyVal(key, value))

class KeyVal(object):
    def __init__(self, key, val):
        self.key = str(key)
        self.val = val 
```

好的，这就是我使用的类的定义。
就在下面，我写了以下内容：

```
state = State()
kv = { "key1" : "1", "key2" : "2", "key3" : "3" }
state.add("1st", kv)
kv = { "keyX" : "X", "keyY" : "Y", "keyZ" : "Z" }
state.add("2nd", kv)

for wrap in state.wrappers:
    print wrap.kv_lst.name, "-->",
    for kv in wrap.kv_lst.kvals:
        print "%s:%s" % (kv.key, kv.val),
    print "" 
```

作为一名 Java 程序员，我希望得到以下输出：

```
1st --> key3:3 key2:2 key1:1
2nd --> keyZ:Z keyY:Y keyX:X 
```

但是，使用 Python 中的这个程序，我得到以下输出：

```
1st --> key3:3 key2:2 key1:1 keyZ:Z keyY:Y keyX:X 
2nd --> key3:3 key2:2 key1:1 keyZ:Z keyY:Y keyX:X 
```

为什么两个列表都包含所有键/值对？

我希望在类中的某个地方出现问题，因为在第二次在主程序中调用`KeyValList`该方法时进行调试时，构造函数的参数包含前对。但怎么可能呢？我没有为这个参数提供任何东西，由于参数默认值，它不应该因此被初始化为一个空列表吗？`state.add()``kvals``KeyValList``kvals`

PS：我在 Windows 上使用 Python 2.7.3。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-20T22:22:56.670

这基本上是 Python 的一个非常常见的——起初相当违反直觉的——特性的一个实例，[可变的默认参数](https://stackoverflow.com/questions/1132941/least-astonishment-in-python-the-mutable-default-argument)。要点是默认参数是*函数对象*的属性，因此，如果您在一个函数调用中对它们进行变异，您将对所有函数调用进行变异。

这个例子比标准的可变默认参数问题稍微复杂一些，因为你也传递了相同的对象作为类的属性和实例。但是您的代码中只有一个列表对象——由它创建的对象`[]`——因此通过实例属性对其进行变异与在函数对象上对其进行变异相同。

换句话说，当你写

```
self.kvals.append(...) 
```

您正在将一些数据附加到特定的列表对象。哪个列表对象？由函数定义中创建的那个`[]`，因此与 Python 用作函数的默认参数的那个相同。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-20T22:21:42.070

不要使用可变的默认参数，而是使用*None*作为占位符，并让您的函数/方法在每次调用时构造新容器。

改变这个：

```
class State(object):
    def __init__(self, wrappers = []):
        self.wrappers = wrappers 
```

对此：

```
class State(object):
    def __init__(self, wrappers = None):
        if wrappers is None:
           wrappers = []
        self.wrappers = wrappers 
```

[在这篇博](http://pythonconquerstheuniverse.wordpress.com/2012/02/15/mutable-default-arguments/)文中有一个很好的解释。

# webrtc - ARM 处理器上是否有任何浏览器支持 WebRTC？

> ID：16125773
> 
> 赞同：6
> 
> 时间：2013-04-20T22:19:01.677
> 
> 标签：webrtc, chromium

我正在制作一个使用 WebRTC 从 PC 到某些专用硬件的点对点视频呼叫的辅助项目。

我真的很想为我的硬件原型使用 Raspberry Pi，但我很难找到有关主要浏览器（Midori 和 Chromium）是否支持 WebRTC 的信息。

任何人都可以提供任何信息吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-10-28T16:24:37.393

截至今天，2014 年 11 月 28 日，**是的**

我使用 Iceweasel 和 Rasbian。这是工作。您可以使用此网站 ( [https://mozilla.github.io/webrtc-landing/](https://mozilla.github.io/webrtc-landing/) ) 从浏览器中试用您的网络摄像头。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-30T23:12:43.953

对于 Raspberry Pi 2 的 WebRTC，有[UV4L](http://www.linux-projects.org/modules/news/)。它允许您将实时音频和视频从 Rpi 流式传输到 PC 上的任何浏览器 (HTML5)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-19T19:12:25.400

截至今天，2013 年 5 月 19 日星期日

### 不

[http://caniuse.com/#feat=stream](http://caniuse.com/#feat=stream) ![在此处输入图像描述](https://i.stack.imgur.com/qEByK.png)

### 不

[http://www.webrtc.org/](http://www.webrtc.org/)

![在此处输入图像描述](https://i.stack.imgur.com/50Adv.png)

* * *

WebRTC 是一个延伸目标，事实上我很想找到一个支持 websockets 和其他 HTML5 好东西的浏览器。要记住的另一件事是编解码器许可：[http ://www.raspberrypi.com/license-keys/](http://www.raspberrypi.com/license-keys/)

# android - 在 Haxe NME 中使用蓝牙

> ID：16125774
> 
> 赞同：2
> 
> 时间：2013-04-20T22:19:10.677
> 
> 标签：android, ios, haxe, nme

我打算使用 Haxe NME 开发一个简单的蓝牙聊天应用程序。

是否可以在 Haxe 中使用特定于设备的原生 API？或者是否有一些包装类可用于使用蓝牙？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-21T12:04:12.440

使用蓝牙协议的准入门槛相当高，并且不是用于跨平台聊天应用程序轻松通信的常用方法。例如看这个不支持蓝牙的框架对比图； [http://www.markus-falk.com/mobile-frameworks-comparison-chart/](http://www.markus-falk.com/mobile-frameworks-comparison-chart/)

更常用的是套接字网络连接，您可以看到一个使用 nme 的聊天应用程序示例，它可以很好地跨平台运行[https://github.com/RealyUniqueName/StablexNet](https://github.com/RealyUniqueName/StablexNet)

我确信可以编写一个本地扩展，但我不希望很快看到一个，因为它不是那么简单。如果你想接受挑战，也许你可以考虑为[http://developer.android.com/reference/android/bluetooth/BluetoothServerSocket.html编写一个扩展](http://developer.android.com/reference/android/bluetooth/BluetoothServerSocket.html)

蓝牙更普遍地与蓝牙配置文件和为其设计的外围设备一起使用[http://en.wikipedia.org/wiki/Bluetooth_profile](http://en.wikipedia.org/wiki/Bluetooth_profile)。

# jquery - 可拖动用于移动或触摸媒体的 Jquery UI

> ID：16125775
> 
> 赞同：0
> 
> 时间：2013-04-20T22:19:26.773
> 
> 标签：jquery, jquery-mobile

我需要通过蒙版 div 通过 jquery 使 div 可拖动。首先是div结构：

```
<div id="parent">//Relatively positioned
   <div id="mask"></div>
   <div id="content"></div>
</div> 
```

我需要使`#content`div 可拖动，但由于它在 mask div 下分层，因此鼠标事件不会到达它。所以我的桌面完美解决方案：

```
$("#mask").on("mousedown",function(e){
     $("#content").trigger(e);
}) 
```

如您所见，我只是传递了必要的事件数据，一切都很好。但是我不知道要为触摸设备做什么。我通过哪个事件发送？

我正在使用 jQueryMobile 和 TouchPunch .....并且没有掩码 div，它可以在触摸屏上正常工作。有任何想法吗？

# c# - 将通用 GetEnumerator 列表转换为接口失败

> ID：16125776
> 
> 赞同：0
> 
> 时间：2013-04-20T22:19:41.173
> 
> 标签：c#, .net, interface, enumerator

GetEnumerator cast to an Interface failed
没有编译器错误
运行时失败，消息索引无穷大
如果我直接使用 struct Word1252 而没有接口，它可以工作

```
namespace WordEnumerable
{
    public partial class MainWindow : Window
    {
        public MainWindow()
        {
            InitializeComponent();
            WordEnum wordEnum = new WordEnum();
            Debug.WriteLine(wordEnum[0].GetType().ToString());
            Debug.WriteLine(wordEnum[0].Value);
            Debug.WriteLine(wordEnum.Count.ToString());
            foreach (iWord w in wordEnum)  // fails here
            {
            }
        }
    }
}
public interface iWord
{
    Int32 Key { get; }
    String Value { get; }
}
public class WordEnum : IEnumerable<iWord>
{
    private static List<Word1252> words1252 = new List<Word1252>();
    IEnumerator<iWord> IEnumerable<iWord>.GetEnumerator()
    {
        return ((IEnumerable<iWord>)words1252).GetEnumerator();
    }
    public struct Word1252 : iWord
    {
        public UInt64 packed;
        public Int32 Key   { get { return (Int32)((packed >> 27) & ((1 << 25) - 1)); } }
        public Byte Length { get { return (Byte) ((packed >> 59) & ((1 <<  5) - 1)); } }
        public String Value { get { return Key.ToString(); } }
        public Word1252(UInt64 Packed) { packed = Packed; }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T23:21:19.807

简而言之，`upcasting`从`IEnumerable<Word1252>`到`IEnumerable<IWord>`，

这需要`covariance`工作。

> 即使 IEnumerable 被标记为`out`（协变）
> **协方差也不适用于“值类型”** ——即您定义了接口的结构。

例如看...

[这是 C# 4 中的协方差错误吗？](https://stackoverflow.com/questions/2783233/is-this-a-covariance-bug-in-c-sharp-4/2783401#2783401)
（或有点不同，但归结为同一个问题）
[为什么不能将 IEnumerable<struct> 转换为 IEnumerable<object>？](https://stackoverflow.com/questions/9688268/why-cannot-ienumerablestruct-be-cast-as-ienumerableobject/9688362#9688362)

要解决，您只需定义您的列表，例如

```
private static List<iWord> words1252 = new List<iWord>(); 
```

或者像这样定义你的枚举器：

```
IEnumerator<iWord> IEnumerable<iWord>.GetEnumerator()
{
    foreach (var word in words1252)
        yield return word;
} 
```

# ruby-on-rails-3.2 - 如果语句不起作用，则导轨和咖啡脚本

> ID：16125777
> 
> 赞同：-2
> 
> 时间：2013-04-20T22:19:42.693
> 
> 标签：ruby-on-rails-3.2, coffeescript

我正在开发一个 Rails 应用程序，它支持三种不同国籍的语言。填满数据的表是用 JQuery 实现的。我想把它们翻译成所有三种语言。

目前，我通过 HTML 数据属性传递当前语言值：

```
<table id="companies" class="table table-striped" data-source="<%= companies_url(format: "json") %>" data-language="<%= current_language %>"> 
```

并保存到 Coffee`Lang`变量中

```
jQuery ->
  Lang = $('#companies').data('language')
  $('#companies').dataTable
    sPaginationType: "full_numbers"
    sDom: "Rlfrtip"
    bJQueryUI: true
    bDestroy: true
    bProcessing: true
    bServerSide: true
    sAjaxSource: $('#companies').data('source')
    if Lang == "ro"
      oLanguage:
        sProcessing:   "Processing...", 
```

然后我检查`Lang`是“ro”、“en”还是“ru”并加载所需的 Coffee 脚本部分。好吧，至少这是它应该工作的方式，但事实并非如此。

我尝试`data('language')`从 Chrome 控制台中的表加载，加载正常，但如果语句不起作用，我总是得到默认的英语语言。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T22:37:20.147

该语法不起作用。您不能将`if`语句放在对象声明中。您`if`需要坐在参数列表之外。

```
options = 
  sPaginationType: "full_numbers"
  sDom: "Rlfrtip"
  bJQueryUI: true
  bDestroy: true
  bProcessing: true
  bServerSide: true
  sAjaxSource: $('#companies').data('source')

if Lang == "ro"
  options.oLanguage = { sProcessing:   "Processing..." }

jQuery ->
  Lang = $('#companies').data('language')
  $('#companies').dataTable(options) 
```

# eclipse - 如何更改 Eclipse 的编辑器以在多列中显示或编辑代码？

> ID：16125778
> 
> 赞同：3
> 
> 时间：2013-04-20T22:19:58.600
> 
> 标签：eclipse, editor

我的笔记本电脑和台式机显示器比它们的高度更宽。当我查看代码时，屏幕的一半到 2/3 是空的，没有代码。这很愚蠢。

我想看看如何扩展 Eclipse 的编辑器以在多列中显示数据。

如果有人对我应该查找什么 api 或任何其他资源有任何想法，请指出。

谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-21T00:36:07.753

我不知道一个查看器是否可以在多列中显示代码，但您可以[为同一个文件](https://stackoverflow.com/questions/2198822/eclipse-same-java-file-in-split-view)( `Window -> New editor`) 拆分视图。

这样，您可以看到更多代码，每个选项卡都使用您在屏幕上拥有的水平空间。

对于不同的文件，您可以并排放置不同的编辑器：

![拖](https://i.stack.imgur.com/25Z0s.png)

这将给出：

![侧边](https://i.stack.imgur.com/W5uQE.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-02-09T22:13:27.840

在 Eclipse 2018-12 (4.10) 中，有一个“窗口/编辑器/切换垂直分割编辑器”菜单选项可以满足您的需求。那里还有切换拆分编辑器水平选项。

# jquery - 如何阻止 Chrome 缓存 jQuery.load()ed 文件？

> ID：16125781
> 
> 赞同：0
> 
> 时间：2013-04-20T22:20:21.123
> 
> 标签：jquery, google-chrome, caching, ahah

我以前遇到过这个问题，现在又遇到了。我有一个网页可能会通过 AHAH 加载`jQuery.load()`。加载的文本似乎保留在缓存中，通常的 shift-reload 是不够的：它加载父文档但保留加载数据的缓存副本。

确保页面和加载的所有内容正常工作的最佳方法是什么？关闭页面并删除相应的浏览数据？这次我通过从另一个浏览器加载绕过了这个问题，但我想知道是否有任何对开发人员友好的模式会导致 AHAH `jQuery.load()`ed 数据中的更新出现。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T22:24:55.733

按F12，点击右下角的齿轮，确保选中“禁用缓存”。只要开发者工具打开，Chrome 似乎只支持此设置。

# r - 疯狂地尝试编写一个对数据框的一列进行操作的简单函数

> ID：16125785
> 
> 赞同：2
> 
> 时间：2013-04-20T22:21:09.333
> 
> 标签：r, function, dataframe, user-defined-functions, plyr

我正在尝试编写一个“变量化” ddply 调用的函数：

```
december <- ddply(adk47, .(PeakName, Elevation), summarize, 
  needThese=if(sum(dec) == 0) "needThis" 
  else character(0), .progress='text') 
```

df 中每个月有 3 个字母的列名。我正在尝试将函数编写为：

```
need.fr.month <- function(df, monthCol) {
    needThese <- ddply(df, .(PeakName, Elevation), 
                       summarize, 
                       needThese=if(sum(monthCol) == 0)
                           "needThis" else character(0)
    )
    return(needThese)
} 
```

但是当我用

```
need.fr.month(adk47, oct) 
```

或与

```
need.fr.month(adk47, "oct") 
```

我收到这些错误消息：

> eval 中的错误（expr，envir，enclos）：找不到对象“monthCol”

或者

> sum("monthCol") 中的错误：参数的“类型”（字符）无效

我知道我没有得到一些非常基本的东西，但我不知道是什么。

我正在使用这个 DF 来练习编写 R 函数。我的其他功能进展顺利；但是，这是我尝试对 df 列进行可变化的第一个函数。

帮助将不胜感激。

这是数据子集的可重现示例

```
PeakName    Elevation   jul aug sep oct nov dec
Algonquin   5114    0   0   1   0   0   0
Algonquin   5114    0   0   0   0   0   0
Algonquin   5114    0   0   0   1   0   0
Algonquin   5114    1   0   0   0   0   0
Allen   4340    0   0   0   0   0   0
Allen   4340    0   0   0   0   0   0
Allen   4340    0   0   1   0   0   0
Allen   4340    1   0   0   0   0   0
Allen   4340    0   0   0   0   1   0
Armstrong   4400    0   0   0   0   0   0
Armstrong   4400    0   0   0   0   0   0
Armstrong   4400    0   0   0   0   0   0
Armstrong   4400    0   0   0   0   0   0
Armstrong   4400    0   0   0   0   1   0
Armstrong   4400    0   0   0   0   0   0
Armstrong   4400    0   0   0   1   0   0
Basin   4827    1   0   0   0   0   0
Basin   4827    0   0   0   0   0   0
Basin   4827    0   0   0   0   0   0
Basin   4827    0   0   0   0   0   0
Basin   4827    0   0   0   0   0   0
Basin   4827    0   0   0   0   0   0
Basin   4827    0   0   0   0   1   0
Big.Slide   4240    0   0   0   0   0   0
Big.Slide   4240    0   0   0   1   0   0
Big.Slide   4240    0   0   0   0   0   0
Big.Slide   4240    0   0   1   0   0   0
Big.Slide   4240    0   0   0   0   0   0
Big.Slide   4240    0   0   0   0   0   0
Big.Slide   4240    0   0   0   0   0   0
Big.Slide   4240    1   0   0   0   0   0 
```

我希望这就足够了。显然，这是数据的一个子集。形式是，每次“远足”都有一行月份列（此处截断为 7 月至 12 月），表示一个月为“1”，其他 11 个月为 0。

谢谢

韦恩

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-21T03:32:56.823

你打电话时

```
need.fr.month(adk47, oct) 
```

`oct`R 查找在您的一般环境中命名的变量，但什么也没找到。因此它报告它没有找到。

如果你打电话：

```
need.fr.month(adk47, "oct") 
```

R 尝试使用字符串`"oct"`代替`monthCol`. 但是获取`sum`字符串的 没有意义，因此会引发错误。

将参数传递给内部函数可能很困难。臭名昭著的 eval-parse 构造是一个快速的组合。虽然它可以完成工作，但[通常不建议](https://stackoverflow.com/questions/13649979/what-specifically-are-the-dangers-of-evalparse)这样做，因为通常有更简单的方法可以完成相同的工作。

```
need.fr.month <- function(df, monthCol) {
    needThese <- eval(parse(text=paste0("ddply(df, .(PeakName, Elevation), 
                       summarize, 
                       needThese=if(sum(", monthCol, ") == 0)
                           "needThis" else character(0)
                 ")))
    )
    return(needThese)
} 
```

在这里，你不需要 eval-parse 来得到你想要的。只是不要使用`summarize`和依赖基本的 R 提取函数：

```
need.fr.month <- function(df, monthCol) {
    needThese <- ddply(df, .(PeakName, Elevation), 
                       function(x) sum(x[[monthCol]]))
    return(needThese)
    #return(needThese[needThese[["V1"]] != 0,])
} 
```

我认为这种方法可以做得更好，但如果不知道你想用这些信息做什么，我就无法进一步改进它。如果您想找到要子集化的行，我认为最好执行以下操作：

```
need.fr.month <- function(df, monthCol) {
ave(df[[monthCol]],df[["PeakName"]],df[["Elevation"]],FUN=sum)
}
adk47$need <- need.fr.month(adk47,"dec") == 0 
```

然后，这会在数据框中为您提供一列，让您可以通过`adk47$need == TRUE`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-21T18:58:57.037

谢谢大家，这两个都很有用。

我使用了 Blue Magister 的第二个示例的修改版本：

```
need.fr.month <- function(df, monthCol) {
needThese <- ddply(df, .(PeakName, Elevation),
                   function(x) sum(x[[monthCol]]))
subsetNeedThese <- subset(needThese, V1 == 0, select=c(PeakName, Elevation)) 
```

}

因为它准确地返回了我需要的东西，并且我理解它在做什么。我之前没有处理过附加和分离环境，所以我感谢 croy111 提供的示例。我需要阅读这个！同样，Blue Magister 的 eval-parse 对我来说似乎是一种简单的方法来做一些我真的不明白的事情。

我很欣赏 Blue Magister 的评论：“将参数传递给内部函数可能很困难”。我现在会接受，如果你避免调用内部函数（例如“summarize”）并在下次遇到这样的问题时再考虑一下，这个问题就会消失！

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-21T03:42:20.943

看起来，`summarize`无法从调用`ddply`. 但是，您可以手动将此环境附加到搜索路径。调用后`ddply`，您可以分离环境。

这是一个简单的示例 - 类似的方法也应该适用于您。

```
test_fun=function(team_vec)
{
    attach(environment())
    tmp=ddply(baseball,
              "team",
              summarise,
              duration=(if (unique(team)%in%team_vec) max(year)-min(year) else 0)
             )
    detach(environment())
    tmp
}

test_fun(c("PIT","PHI")) 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-04-22T00:50:10.907

我认为创建一个您的指标变量将是指标变量的列（如描述[优化：将数据框拆分为数据框列表，每行转换数据](https://stackoverflow.com/questions/15934193/)）然后从中提取子集会容易得多。

我会提倡`data.table`不`ddply + summarize`使用效率（但也许这是一个长期目标）

`data.table`用于访问（适用于data.frames `set` ）

```
library(data.table)
adk47$monthCol <- character(nrow(adk47))
# data.table specific
# adk47 <- data.table(adk47)
# adk47[, monthCol := character(nrow(adk47))]

# find which columns are == 1
whiches <- lapply(adk47[c("jul", "aug", "sep", "oct", "nov", "dec")],
                  function(x) which(x==1))
# data.table approach would require 
#  adk47[c("jul", "aug", "sep", "oct", "nov", "dec"),with = TRUE]

for(val in names(whiches)){ 
  set(adk47, i = whiches[[val]], j = 'monthCol', value = val)
  }

head(adk47)

       PeakName Elevation jul aug sep oct nov dec monthCol
1 Algonquin      5114   0   0   1   0   0   0      sep
2 Algonquin      5114   0   0   0   0   0   0         
3 Algonquin      5114   0   0   0   1   0   0      oct
4 Algonquin      5114   1   0   0   0   0   0      jul
5     Allen      4340   0   0   0   0   0   0         
6     Allen      4340   0   0   0   0   0   0 
```

然后，您可以使用子集`monthCol`

# python - Python将fasta格式解析为基于行的序列

> ID：16125792
> 
> 赞同：-9
> 
> 时间：2013-04-20T22:22:13.973
> 
> 标签：python

我需要一个 python 脚本来将 fasta 格式解析为基于行的序列。

**我需要改变这个：**

```
>GeneID12345
ATTACATATACCATACC
CCATATTAATCCGAGGG
TTACCTATAGGTATACC
>GeneID12346
TTGATACCATATATCCC
ATATGCCCTATATTCCT
TTACCTATC 
```

**对此：**

```
GeneID12345 ATTACATATACCATACCCCATATTAATCCGAGGGTTACCTATAGGTATACC
GeneID12346 TTGATACCATATATCCCATATGCCCTATATTCCTTTACCTATC 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-20T23:05:21.803

这将完成这项工作：

```
import sys

sep=''
with open(sys.argv[1]) as f:
    for line in f:
        if line.startswith(">GeneID"):
            sys.stdout.write(sep+line.strip()+' ')
        else:
            sys.stdout.write(line.strip())
            sep='\n' 
```

像运行`python parse_fasta.py input.fasta`。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-20T23:18:01.493

如果您不限于`python`以下简洁的解决方案`awk`：

```
$ awk 'NR>1&&/^>/{printf "\n"}{printf "%s",$0}/^>/{printf " "}' file
>GeneID12345 ATTACATATACCATACCCCATATTAATCCGAGGGTTACCTATAGGTATACC
>GeneID12346 TTGATACCATATATCCCATATGCCCTATATTCCTTTACCTATC 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-20T23:13:20.407

```
data = []
last = None
for line in f:
    if line.strip('ATCG') != '': # contains non-nucleobases, i.e. is an id
        if last: # save previous data
            data.append(last)
        last = line + ' '
    else:
        last += line
if last:
    data.append(last)

# now pretty-print
for gene in data:
    print(gene) 
```

结果是：

```
GeneID12345 ATTACATATACCATACCCCATATTAATCCGAGGGTTACCTATAGGTATACC
GeneID12346 TTGATACCATATATCCCATATGCCCTATATTCCTTTACCTATC 
```

这假设`f`是包含原始数据的文件；即循环遍历文件的行。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-20T23:25:28.783

步骤#1：安装[BioPython](http://biopython.org/wiki/Main_Page)。不要浪费时间重新发明轮子。如果您正在使用 FASTA 文件，您可以编写自己的半功能解析器，或者您可以使用已经存在的解析器，以及教程和所有内容。

步骤#2：嗯，实际上，步骤#1 主要是它。代码：

```
from Bio import SeqIO

with open("example.fasta") as fp_in, open("newformat.txt", "w") as fp_out:
    for record in SeqIO.parse(fp_in, "fasta"):
        fp_out.write("{} {}\n".format(record.id, record.seq)) 
```

生产

```
~/coding$ cat newformat.txt 
GeneID12345 ATTACATATACCATACCCCATATTAATCCGAGGGTTACCTATAGGTATACC
GeneID12346 TTGATACCATATATCCCATATGCCCTATATTCCTTTACCTATC 
```

更重要的是，您会获得`SeqRecord`易于操作的实例，并且可以正确获取可能存储在更复杂示例中的其他信息：

```
>>> record
SeqRecord(seq=Seq('TTGATACCATATATCCCATATGCCCTATATTCCTTTACCTATC',
SingleLetterAlphabet()), id='GeneID12346', name='GeneID12346', 
description='GeneID12346', dbxrefs=[]) 
```

# android - 如何在Android中有效地打包大量不同分辨率的可绘制图像？

> ID：16125794
> 
> 赞同：0
> 
> 时间：2013-04-20T22:22:32.620
> 
> 标签：android

我有一个图像应用程序，如 Android 上的 SlideShow，并希望支持多种屏幕分辨率，即。ldpi、mdpi、hdpi 等。我有大量图像，并且为每个屏幕分辨率拥有每个图像的副本将使我的应用程序大小变大。如何以有效的方式打包它们以使应用程序大小保持较小？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T23:04:47.753

为了支持多种屏幕密度，您实际上不必提供每个密度的所有图像（如果它们看起来大致相同，只需调整大小）。

您可以简单地将最高质量的图像放在 drawable-xhdpi 或 drawable-xxhdpi 上，然后在运行时缩小并查看其他屏幕的图像（Android 会自动执行此操作，但在某些情况下，您可能需要进一步缩小，具体取决于图像）。

缺点是它需要在低密度屏幕上进行更多工作，并且图像看起来可能与您想要的不同。

将图标放在不同密度的文件夹中是很常见的事情，这样调整大小不会以任何方式损害质量（包括模糊效果）。

# php - jQuery 倒计时：客户端的 serverSync 仍然滞后 1-2 秒

> ID：16125796
> 
> 赞同：0
> 
> 时间：2013-04-20T22:22:54.937
> 
> 标签：php, ajax, sync, jquery-countdown

我正在建立拍卖网站，我正在使用[Keith Wood](http://keith-wood.name/countdownRef.html#serverSync)的 jQuery 倒计时来显示拍卖的结束时间。我需要为我的所有客户与服务器同步倒计时时间。到目前为止，我已经用`serverSync`函数实现了 jQuery 倒计时。它工作正常，但是当几秒钟过去后，倒计时滞后 1 或 2 秒。 **如果可能的话，我怎样才能完美地同步所有客户的时间？**

**更新：**我还在轮询（500 毫秒间隔）php 文件，它更新所有拍卖（实时效果），在这段代码中，我还从数据库中回显了新的“轮询”倒计时（因为当用户在拍卖的最后 10 秒内出价时，倒计时增加 + 10 秒）。所以我认为这是问题所在，因为在客户端，并非每次轮询都同时开始，这取决于客户端何时刷新页面等等，它会影响倒计时。**基本上每 500 毫秒我在 poll.php 中调用一次（它会更新数据库中的倒计时）：**

```
var syncDate = new Date("'.$formatEndDate.'");  
jq("#defaultCountdown-'.$bidded_id.'").countdown("option", {until: syncDate, serverSync: serverTime}); 
```

**到目前为止，我的代码滞后 1 或 2 秒：**

```
$(function () {
   var d = new Date("'.$endingDate.'");             
   $('#defaultCountdown').countdown({until: d,  onExpiry: endAuction, 
     expiryText: '<div class="bid-over">Ended</div>', format: 'HMS', 
     onTick: watchCountdown, serverSync: serverTime });
});

function serverTime() {
var time = null;
var url = "serverTime.php";
jq.ajax({
    url: url,
    async: false,
    dataType: "text",
    success: function (text) {
        time = new Date(text);
    },
    error: function (http, message, exc) {
        time = new Date();

    }
});
return time;
} 
```

和**serverTime.php：**

```
<?php
//This is how I get server time
header("Cache-Control: no-cache, must-revalidate"); // HTTP/1.1 
header("Expires: Fri, 1 Jan 2010 00:00:00 GMT"); // Date in the past 
header("Content-Type: text/plain; charset=utf-8"); // MIME type 
date_default_timezone_set('Europe/Ljubljana');
$srvDate = getdate();
$d = $srvDate['mday'];
$m = $srvDate['mon'];
$y = $srvDate['year'];
$h = $srvDate['hours'];
$i = $srvDate['minutes'];
$s = $srvDate['seconds'];
$nowDate=date("$y-$m-$d $h:$i:$s");
$nowDate=str_replace("-","/",$nowDate);
echo $nowDate;
?> 
```

# dart - 在 Dart 中，如果我用两个监听器监听一个点击事件，我怎么知道哪个先发生？

> ID：16125800
> 
> 赞同：6
> 
> 时间：2013-04-20T22:23:13.290
> 
> 标签：dart, dart-html

如果我编写以下 Dart 代码，我怎么知道哪个点击处理程序首先发生？

```
main() {
  var button = new ButtonElement();
  var stream = button.onClick.asBroadcastStream();

  stream.listen(clickHandler1);
  stream.listen(clickHandler2);
} 
```

假设我在其他代码中，对前两个单击处理程序一无所知，但我注册了另一个。

*   我可以知道流有两个听众吗？
*   我可以暂停或取消所有其他订阅者吗？
*   如果我`button.onClick.asBroadcastStream()`在其他地方再次写入，它是否指向与中使用的流相同的流`main`？
*   我可以在其中一个处理程序中说不要将事件传递给另一个广播侦听器吗？那是消费者吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-05-01T11:15:49.747

> 假设我在其他代码中，对前两个单击处理程序一无所知，但我注册了另一个。
> 
> 我可以知道流有两个听众吗？

不，你不能。您可以扩展流类或包装它并自己提供此功能，但这感觉不是一个好的设计选择，因为我认为听众不应该了解其他听众。你到底想做什么？也许有比让听众了解彼此更好的方法。

> 我可以暂停或取消所有其他订阅者吗？

您只能[取消/暂停/恢复](http://api.dartlang.org/docs/releases/latest/dart_async/StreamSubscription.html)您正在处理的订阅者。同样，您可能不应该接触其他侦听器，但我想您可以包装/扩展 Stream 类以具有此行为。

> 如果我在别处再次写 button.onClick.asBroadcastStream() ，它是否指向与 main 中使用的相同流？

不，至少不是在当前版本的 SDK 中。因此，不幸的是，您需要在某处存储对该广播流的引用并引用它，因为`asBroadcastStream()`多次调用不会产生您可能期望的结果。（注意：至少基于快速测试：[http](http://d.pr/i/Ip0K) ://d.pr/i/Ip0K虽然[文档](http://api.dartlang.org/docs/releases/latest/dart_async/Stream.html#asBroadcastStream)似乎表明不同，但当我找到时间时，我还没有进行更多测试）。

> 我可以在其中一个处理程序中说不要将事件传递给另一个广播侦听器吗？

好吧，[`stopPropagation()`](http://api.dartlang.org/docs/releases/latest/dart_html/Event.html#stopPropagation)在 HTML 领域中，这意味着该事件不会传播到其他元素，但它可能不是您想要的。

为了能够停止在其他侦听器中触发的事件，需要有一个调用侦听器的顺序。我相信顺序是那些听众的注册顺序。从设计的角度来看，我认为允许听众取消/暂停其他人不是一个好主意。

HTML 中的事件传播是有意义的，因为它是关于层次结构的，但在这里我们没有（即使在 HTML 中的事件的情况下，单个元素也可以有多个侦听器）。

没有办法为听众分配权重或定义重要性顺序，因此没有办法停止事件也就不足为奇了。

与其让听众相互了解并相互操纵，也许你应该尝试考虑另一种方法来解决你的问题（不管是什么）。

> 那是消费者吗？

[`StreamConsumer`](http://api.dartlang.org/docs/releases/latest/dart_async/StreamConsumer.html)如果您想允许其他流通过管道传输到您的类中，这只是您可以实现的一个类。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-02T23:30:37.840

> 我可以知道流有两个听众吗？

不，您有一个包装 DOM 事件处理的“流”。没有这样的功能。

> 我可以暂停或取消所有其他订阅者吗？

查看[Event.stopPropagation()](http://api.dartlang.org/docs/releases/latest/dart_html/Event.html#stopPropagation)和[Event.stopImmediatePropagation()](http://api.dartlang.org/docs/releases/latest/dart_html/Event.html#stopImmediatePropagation)，可能还有[Event.preventDefault()](http://api.dartlang.org/docs/releases/latest/dart_html/Event.html#preventDefault)。

> 如果我在别处再次写 button.onClick.asBroadcastStream() ，它是否指向与 main 中使用的相同流？

[更新] 不，[当前的实现](https://code.google.com/p/dart/codesearch#dart/trunk/dart/tools/dom/src/EventStreamProvider.dart&q=asBroadcastStream&sq=package%3adart&type=cs)不会给你相同的 Stream 返回，因为`onClick`getter 每次调用它都会返回一个新的流。但是，返回的流已经是一个广播流，所以你不应该调用`asBroadcastStream()`它。如果你这样做了，你只会得到对同一个对象的引用。

```
Stream<T> asBroadcastStream() => this; 
```

> 我可以在其中一个处理程序中说不要将事件传递给另一个广播侦听器吗？那是消费者吗？

同样，看看[Event.stopPropagation()](http://api.dartlang.org/docs/releases/latest/dart_html/Event.html#stopPropagation)和[Event.stopImmediatePropagation()](http://api.dartlang.org/docs/releases/latest/dart_html/Event.html#stopImmediatePropagation)，可能还有[Event.preventDefault()](http://api.dartlang.org/docs/releases/latest/dart_html/Event.html#preventDefault)。

# java - 使用输入更改对象名称

> ID：16125802
> 
> 赞同：1
> 
> 时间：2013-04-20T22:23:33.500
> 
> 标签：java

我是 java 的初学者，我想知道是否有办法通过输入更改主类中对象的名称？例如我得到这个代码：

```
while(!answer.equals("stop"))
    {
    //Enters book's information  and stores it in the object book1  
    System.out.println("Book-" + count);    
    title = input.next();
    author = input.next();
    ISBN = input.next();
    copies = input.nextInt();
    Book book1 = new Book(title,author, ISBN, copies);
    printLn("");
    printLn("Do you wish stop adding books? N || stop");      
    answer = input.next();
    } 
```

我想继续添加新书，直到出现提示时写停止，但当然不更改名称它将继续将数据添加到同一个对象。有可能还是我需要继续制作新书对象：书等=新书（标题，作者，ISBN，副本）

*“更正我的代码”* 就像 Kevin 提到的那样，数组是存储这些值的主要思想，但由于它的静态值，它可能是满的，但是当输入 n-books 并且数组已满时，我可以使用 expandcapacity 方法它以 x 大小扩展数组。谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-20T22:26:37.133

代码应将每本书存储在一个列表中，以便稍后在代码中访问它们。除了在代码中标识您的对象之外，名称实际上并不重要。即使您可以更改局部变量的名称，`book`您的问题仍然存在。

您遇到的问题与范围和对象实例更相关。当您调用时，`new Book(..)`您会创建一本书的新实例。这本书的范围实例仅限于`{}`while 循环执行的代码块。这意味着在循环之外无法访问 book 的实例。

为了在循环外访问 book 的实例，您可以在循环外创建一本书，如下所示：

```
Book book;

while(...){
   book = new Book(...);
} 
```

这种方法的问题是您正在创建书籍的多个实例，因此对于循环的每次迭代，对书籍的引用将被最新的书籍覆盖。

这创造了容纳多本书的必要性。可能会立即想到一个数组，但是数组的大小是静态的，用户可以输入 1..n 本书。这并不能使数组成为存储书籍的好选择。

这就是`List`and`ArrayList`发挥作用的地方。A`List`是一个包含多个对象实例的数据结构。使用该`add(Object)`方法可以很容易地扩展它。List 和 ArrayList 的完整描述超出了此答案的范围，但我提供以下资源：[http ://docs.oracle.com/javase/tutorial/collections/](http://docs.oracle.com/javase/tutorial/collections/)

**最终解决方案**

```
 List<Book> books = new ArrayList<Book>();
    while(!answer.equals("stop"))
        {
        //Enters book's information  and stores it in the object book1  
        System.out.println("Book-" + count);    

        title = input.next();
        author = input.next();
        ISBN = input.next();
        copies = input.nextInt();

        Book book1 = new Book(title,author, ISBN, copies);
        books.add(book1);

        printLn("");
        printLn("Do you wish stop adding books? N || stop");      
        answer = input.next();
     }

     //Iterating the book list outside the loop
     for(Book book:books){
       //this call may vary depending on the book implementation
       System.out.println(book.getTitle());
     } 
```

# java - 使用 SWIG 引用外部库中的特定类

> ID：16125811
> 
> 赞同：0
> 
> 时间：2013-04-20T22:24:48.667
> 
> 标签：java, c++, opencv, swig

目前，我正在尝试包装我的自定义 C++ 库以用于 Java（最终是 Android）。我的库使用 OpenCV`Mat`和`Size`类作为输入。下面是我到目前为止所拥有的示例 SWIG 界面：

```
%module customLib

%include <std_vector.i>
%include <std_string.i>

%{
#include "opencv2/core/core.hpp"
#include "../include/myinc/CustomLib.h"
%}

namespace cv {
    class Mat {};
    class Size {};
}

namespace myinc {
    CustomType preprocessMatrix(const cv::Mat& src, cv::Mat& dst, const cv::Size& ksize);
} 
```

OpenCV 已经有 Java 包装`Mat`器`Size`；我想知道一旦我添加了 OpenCV 自己的 Java 框架，我在这里所做的是否会导致命名冲突。这是通过 SWIG 包含对外部库类的引用的正确方法吗？或者，有没有更好的方法来完成这类事情？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T20:38:44.070

我终于想通了这个！我花了一点时间来理解 SWIG 的 Java 类型映射系统是如何工作的（大多数示例都掩盖了一些重要的概念）。

如果其他人无法理解如何编写 Java 类型映射，这里有一种方法可以帮助我。我认为从自上而下的角度（即 Java -> 中间 JNI -> JNI）查看类型映射是最简单的。首先，将 定义`jstype`为您希望在 Java 类中看到的类型（例如，module_name.java）。用于`javain`告诉 SWIG 如何将变量从 Java 类传递到中间 JNI 类（例如，module_nameJNI.java）。接下来，将 定义`jtype`为与将要的类型相同的类型`javain`。例如，`$javainput.getNativeObjectAddr()`返回 a `long`，所以这将成为 my `jtype`。最后，定义`jni`实际的 JNI 函数将使用什么。

下面是我想出的在 OpenCV 的 Java 接口上运行的 SWIG 类型图（截至 2.4.5）：

```
 %typemap(jstype) cv::Mat& "org.opencv.core.Mat"
    %typemap(javain) cv::Mat& "$javainput.getNativeObjAddr()"
    %typemap(jtype) cv::Mat& "long"
    %typemap(jni) cv::Mat& "jlong"

    %typemap(in) cv::Mat& {
            $1 = *(cv::Mat **)&$input;
    }

    %typemap(jstype) cv::Size& "org.opencv.core.Size"
    %typemap(javain) cv::Size& "$javainput"
    %typemap(jtype) cv::Size& "org.opencv.core.Size"
    %typemap(jni) cv::Size& "jobject"

    %typemap(in) cv::Size& {
            jclass sizeClass = JCALL1(GetObjectClass, jenv, $input);
            jfieldID widthFieldId = JCALL3(GetFieldID, jenv, sizeClass, "width", "D");
            jfieldID heightFieldId = JCALL3(GetFieldID, jenv, sizeClass, "height", "D");
            double width = JCALL2(GetDoubleField, jenv, $input, widthFieldId);
            double height = JCALL2(GetDoubleField, jenv, $input, heightFieldId);
            $1 = new cv::Size((int)width, (int)height);
    }

    %typemap(freearg) cv::Size& {
            delete $1;
    } 
```

# google-chrome-extension - 如何为 chrome 扩展正确编写新的“事件页面”？

> ID：16125815
> 
> 赞同：3
> 
> 时间：2013-04-20T22:25:11.800
> 
> 标签：google-chrome-extension

在新的 chrome 扩展 API 中，“背景页面”被替换为“事件页面”，这些页面在扩展安装时仅加载一个，并且需要注册回调，该回调将在某些事件上由 chrome 调用。

我想创建每秒执行我的代码的“事件页面”。我用“manifest.json”创建了一个扩展：

```
{
  "manifest_version" : 2,
  "name" : "myextension",
  "version" : "1.0.0",
  "background" : { "scripts" : [ "background.js" ], "persistent" : false }
} 
```

和“background.js”：

```
function onTimer()
{
  console.log( "on timer" );
}

function onStartup()
{
  console.log( "on startup" );
  window.setInterval( onTimer, 1000 );
}

console.log( "script load" );
chrome.runtime.onStartup.addListener( onStartup ); 
```

安装扩展程序后，我可以在开发人员工具控制台中看到“脚本加载”，但看不到“启动时”和“定时器时”:(。在我关闭并重新打开浏览器后，甚至“脚本加载”也不会显示（即是预期的）。我做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-02-14T07:15:46.113

从[Google 事件页面 API](http://developer.chrome.com/extensions/event_pages.html)：

> 如果您的扩展程序使用 window.setTimeout() 或 window.setInterval()，请改用警报 API。如果事件页面关闭，则不会使用基于 DOM 的计时器。

看起来事件页面正在破坏您的 setInterval() 函数。

# function - 删除选项卡后，如何以编程方式重新排序选项卡控件中的选项卡？

> ID：16125817
> 
> 赞同：1
> 
> 时间：2013-04-20T22:25:30.330
> 
> 标签：function, tabs, tabcontrol

情况：我正在编写一个程序，其中用户单击一个按钮以在 TabControl 中创建选项卡。用户创建了 5 个选项卡，然后想要删除选项卡 3。这会留下选项卡 1、2、4 和 5。

如何重新排序选项卡以填补空白（选项卡 4 变为新的选项卡 3，选项卡 5 变为选项卡 4，等等）？TabControl 是否为此提供了内置功能？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T09:25:16.097

参考链接： [MSDN Add And Remove Tab From Tabcontrol](http://msdn.microsoft.com/en-us/library/zb7xae05.aspx)

```
// Removes the selected tab:
tabControl1.TabPages.Remove(tabControl1.SelectedTab);
// Removes all the tabs:
tabControl1.TabPages.Clear(); 
```

如果你想按索引删除标签

```
tabControl1.TabPages.RemoveAt(i); 
```

使用一个包含所有标签页的 Tabpage 数组，通过 TabControl.SelecetedIndex 在 TabPage 数组中搜索，在删除后找到 TabPage 的索引，然后您可以执行任何操作，这意味着您只需从 TabControl 中删除 Tabpage，而不是从 TabPage Array 中删除以及在需要时其中之一在 TabControl 中搜索。您可以通过将标签属性设置为数组的实际索引，将选定的标签页与标签页数组相关联。使用这 2 个功能：

```
TabPage[] tabPages;
private void MyForm_Load(object sender, EventArgs e)
{ 
       tabPages = new TabPage[tabServices.TabPages.Count];
        for (int i = 0; i < tabServices.TabPages.Count; i++)
        {
            tabServices.TabPages[i].Tag=i;//for relation between TabControl and Array
            tabPages[i] = tabServices.TabPages[i];
        }
 }

private int GetTabIndex(TabPage pg)
    {
        return int.Parse(tabServices.TabPages[tabServices.SelectedIndex].Tag.ToString());
    }

    private TABPAGE GetTABPAGE(TabPage pg)
    {
        return (TABPAGE)int.Parse(tabServices.TabPages[tabServices.SelectedIndex].Tag.ToString());
    }

    private void tabServices_SelectedIndexChanged(object sender, EventArgs e)
    {
            switch (GetTABPAGE(tabServices.TabPages[tabServices.SelectedIndex]))
            {
                 case TABPAGE.TabP1:
                   //Do Works;
                  break;  
                 case TABPAGE.TabP2:
                   //Do Works;
                  break;  
                 case TABPAGE.TabP3:
                   //Do Works;
                  break;  
                 case TABPAGE.TabP4:
                         //Do Works;
                  break;  
            }
    } 
```

并为所有 TabPages 定义一个枚举（用于 ReadAbility 和 Index to Tabpage 有意义的名称）：

```
public enum TABPAGE { TabP1 = 0, TabP2 = 1, TabP3 = 2}; 
```

# opengl - CUDA OpenGL互操作，资源映射搞乱缓冲区

> ID：16125819
> 
> 赞同：3
> 
> 时间：2013-04-20T22:25:58.617
> 
> 标签：opengl, cuda

我最近开始编写 CUDA OpenGL 互操作性。大多数时候，我一直在 Linux 环境中进行开发。尝试将我的代码传输到运行 OS XI 的 MacBook Pro 时遇到以下问题：

**每当我将 OpenGL 中的顶点缓冲区对象作为资源映射到 CUDA 时，它都会弄乱存储在相应缓冲区中的数据。**

这是我的代码：

```
// OpenGL and window handler includes
#include <GL/glew.h>
#include <SDL/SDL.h>
#include <OpenGL/GL.h>

// OpenGL/CUDA interop
#include <cuda_runtime.h>
#include <cuda_gl_interop.h>

// C libraries
#include <iostream>

int main(int argc, char* argv[])
{
    GLuint vbo;
    struct cudaGraphicsResource *cuda_vbo_resource;

    // create OpenGL context with SDL
    SDL_Init(SDL_INIT_VIDEO);
    SDL_GL_SetAttribute( SDL_GL_RED_SIZE, 5 );
    SDL_GL_SetAttribute( SDL_GL_GREEN_SIZE, 5 );
    SDL_GL_SetAttribute( SDL_GL_BLUE_SIZE, 5 );
    SDL_GL_SetAttribute( SDL_GL_DEPTH_SIZE, 16 );
    SDL_GL_SetAttribute( SDL_GL_DOUBLEBUFFER, 1 );
    SDL_SetVideoMode( 400, 200, 16, SDL_OPENGL);

    // initialize extension wrangler
    glewInit();

    // set cuda/GL device
    cudaGLSetGLDevice(0);

    // generate buffer
    glGenBuffers(1, &vbo);

    // fill buffer with data (1, 2, 3)
    glBindBuffer(GL_ARRAY_BUFFER, vbo);
    int inData[] = {1,2,3};
    glBufferData(GL_ARRAY_BUFFER, 3*sizeof(int), inData, GL_DYNAMIC_DRAW);
    glBindBuffer(GL_ARRAY_BUFFER, 0);

    // Register buffer with cuda
    cudaGraphicsGLRegisterBuffer(&cuda_vbo_resource, vbo,             
                                        cudaGraphicsMapFlagsWriteDiscard);

    // let's have a look at the buffer
    glBindBuffer(GL_ARRAY_BUFFER, vbo);
    int* mappedBuffer = (int *) glMapBuffer(GL_ARRAY_BUFFER,GL_READ_ONLY);
    printf("\tbefore mapping: %d, %d, %d\n",mappedBuffer[0], mappedBuffer[1], 
            mappedBuffer[2]);
    glUnmapBuffer(GL_ARRAY_BUFFER);
    glBindBuffer(GL_ARRAY_BUFFER, 0);

    // map and unmap the cuda resource
    if (cudaGraphicsMapResources(1, &cuda_vbo_resource, 0) != cudaSuccess)
        printf("Resource mapping failed...\n");
    if (cudaGraphicsUnmapResources(1, &cuda_vbo_resource, 0) != cudaSuccess)
        printf("Resource unmapping failed...\n");

    // let's have a look at the buffer again
    glBindBuffer(GL_ARRAY_BUFFER, vbo);
    mappedBuffer = (int *) glMapBuffer(GL_ARRAY_BUFFER,GL_READ_ONLY);
    printf("\tafter mapping: %d, %d, %d\n",mappedBuffer[0], mappedBuffer[1], 
            mappedBuffer[2]);
    glUnmapBuffer(GL_ARRAY_BUFFER);
    glBindBuffer(GL_ARRAY_BUFFER, 0);

    // unregister the cuda resource
    cudaGraphicsUnregisterResource(cuda_vbo_resource);

    // delete the buffer
    glBindBuffer(1, vbo);
    glDeleteBuffers(1, &vbo);

    return 0;
} 
```

编译后：

```
g++ -o resourceMapping resourceMapping.cpp `sdl-config --cflags --libs` -lglew 
         -framework OpenGL -I /usr/local/cuda/include  -L /usr/local/cuda/lib -lcudart 
```

我明白了

```
before mapping: 1, 2, 3
after mapping:  0, 33554432, 32 
```

**有谁知道为什么映射会更改缓冲区数据？这让我特别困惑，因为这不会发生在 Linux 机器上。**

感谢您的任何意见或提示！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-20T23:05:17.997

我注意到您使用 cudaGraphicsMapFlagsWriteDiscard 注册了 vbo。

从[这里](http://developer.download.nvidia.com/compute/cuda/4_1/rel/toolkit/docs/online/group__CUDART__OPENGL_g43f69a041bdfa4f8b36aff99bf0171db.html#g43f69a041bdfa4f8b36aff99bf0171db)“指定 CUDA 不会从该资源中读取，并将覆盖该资源的全部内容，因此不会保留之前存储在该资源中的任何数据。”

也许尝试 cudaGraphicsMapFlagsNone 或 cudaGraphicsMapFlagsReadOnly？

# ios - AFNetworking 块和提要

> ID：16125820
> 
> 赞同：0
> 
> 时间：2013-04-20T22:25:59.397
> 
> 标签：ios, uitableview, objective-c-blocks, afnetworking

好的，今晚我还有一个问题，使用 AFNetworking，我解析了我的 JSON 流，添加了一个 MutableArray 对象，当我插入尝试在成功块之外打印数组时，它显示为 null，但在这个块内部它可以工作，所以如何将 _listOfNewsArray 传递到主线程？

这是我的代码：

```
- (void)viewDidLoad
{
    [super viewDidLoad];
NSString *path = [[NSBundle mainBundle] pathForResource:@"bgWhitelight" ofType:@"png"];
self.tableView.backgroundColor = [[UIColor alloc] initWithPatternImage:[[UIImage alloc] initWithContentsOfFile:path]];

NSURLRequest *newsRequest = [NSURLRequest requestWithURL:[NSURL URLWithString:@"http://aXXXXXXXXXXXipt/beta.php"]];

AFJSONRequestOperation *newsJSONRequest = [AFJSONRequestOperation JSONRequestOperationWithRequest:newsRequest success:^(NSURLRequest *request, NSHTTPURLResponse *response, id JSON)
{
    NSArray *newsArray = [JSON objectForKey:@"news"];
    _listOfNews = [[NSMutableArray alloc]init];

    for (NSDictionary *oneNews in newsArray) {

        CCENews *currentNews = [[CCENews alloc]init];
        currentNews.title = [oneNews objectForKey:@"title"];
        currentNews.content = [oneNews objectForKey:@"content"];
        currentNews.category = [currentNews getHiResCategoryPicture:[oneNews objectForKey:@"category"]];
        currentNews.date = [oneNews objectForKey:@"date"];
        currentNews.imageURL = [oneNews objectForKey:@"pictureurl"];

        [_listOfNews addObject:currentNews];
    }
} failure:^(NSURLRequest *request, NSHTTPURLResponse *response, NSError *error, id JSON) {

    NSLog(@"%@", error);
}];

[newsJSONRequest start]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T14:12:17.297

事实上，我找到了解决方案，只是使用 self.listOfNews，只需要考虑一下！-

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-21T12:57:33.050

将*listOfNews 的创建移出块并放入 viewDidLoad，或将 ivar 设为块变量（* _block NSM....）。我更喜欢第一个解决方案。

# twitter-bootstrap - 检查引导工具提示是否与字段相关联？

> ID：16125821
> 
> 赞同：9
> 
> 时间：2013-04-20T22:26:08.990
> 
> 标签：twitter-bootstrap, tooltip

我正在字段上动态创建引导工具提示，我想检查给定字段是否有工具提示，以便我可以编辑消息而不是创建新的工具提示。

我在 Bootstrap 文档中看不到这样做，但我想有办法做到这一点。有人知道方法吗？

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2016-04-14T05:48:18.760

使用引导程序 3：

```
var field = $('.example');

if (field.data('bs.tooltip')) {
    // tooltip is initialized
} else {
    // tooltip is not initialized
} 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-04-20T22:41:08.407

我也没有看到任何相关的文档。但是您可以使用 jQuery 检查工具提示是否具有属性 data-original-title。该属性由插件在初始化元素时添加，用于工具提示文本内容。

```
if ($('.example').attr('data-original-title')) {
    console.log('Tooltip not initialized'); 
} else {
    console.log('Tooltip initialized');
    // Change the tooltip content
    $('.example').attr('data-original-title', 'My new title');
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-21T01:54:41.253

我最终使用的方法以防万一它对其他人有用，

```
var field = $('.example');

if (field.data && field.data('tooltip')) {
    // tooltip not initalized
} else {
    // it is
} 
```

# ios - 分发第三方 iOS 应用程序时遇到问题

> ID：16125824
> 
> 赞同：0
> 
> 时间：2013-04-20T22:26:32.153
> 
> 标签：ios, distribution, enterprise

我对 iOS 开发非常陌生，并且有点束缚。另一家公司为我们制作了一个应用程序，我们将对其进行部署。我有一个企业开发帐户，并已成功将我自己的一个应用程序部署到我自己的安全应用程序商店。

我从 B 公司收到了一个 .ipa 和一个 .plist 文件，并尝试将它放在我的应用商店中，就像我使用特殊的 href 标记对我的应用所做的那样。

`a href="itms-services://?action=download-manifest&url=http://www.myurl.com/app/company_b.plist">link</a>`

该应用程序下载了大约 90%，然后失败。我已确保它是指向 .ipa 的有效 plist 文件。

Company-B 必须在[https://developer.apple.com/account/ios/device/deviceList.action](https://developer.apple.com/account/ios/device/deviceList.action)将我的 iOS 设备添加到他们的设备列表中。在他们这样做之后，应用程序将正确下载。

我需要将此应用程序部署给许多人，而 B 公司无法将所有设备添加到他们的设备列表中。

我该怎么做才能正确部署此应用程序？

非常感谢任何和所有帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T01:47:57.627

The company has not properly signed the application. Get them to rebundle the ipa with the proper enterprise certificate

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-21T02:53:41.463

使用[https://gist.github.com/RichardBronosky/2878446](https://gist.github.com/RichardBronosky/2878446)之类的脚本使用您的企业证书重新签署 ipa。这样您就不需要向第 3 方开发人员提供您的签名身份。

您**绝不**应将企业证书的私钥泄露出去，也不应将 developer.apple.com 访问权限授予公司以外的**任何人**。

# amazon-web-services - 通过端口连接的 EC2 实例？

> ID：16125825
> 
> 赞同：0
> 
> 时间：2013-04-20T22:26:35.780
> 
> 标签：amazon-web-services, amazon-s3, amazon-ec2, ec2-api-tools

我有两个 EC2 实例，A 和 B

*   A 是 Apache PHP (LAMP)，B 是 Apache Solr
*   两个实例共享同一个安全组
*   如何使实例 B 可以通过实例 A 中的 localhost 访问，例如：localhost:8985 是 A 中的实例 B

实现这一目标的想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T09:10:33.040

要将实例 A 连接到实例 B，您需要使用 IP 地址，而不是 localhost。如果您真的想使用 A 上的 localhost 从 A 连接到 B，您需要设置某种隧道，例如 stunnel 或 ssh。但这并没有真正的优势，因此只需直接连接即可。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-21T02:55:29.583

默认情况下，同一安全组内的实例不能互相访问。您可以授予对另一个安全组的访问权限，而不仅仅是 IP 范围。因此，要在实例之间提供访问权限，您需要做的就是提供对组本身的访问权限。

# jquery - 我可以将 Nuget 保留在 jQuery 1.9.x/1.x 路径上（而不是升级到 2.x）吗？

> ID：16125828
> 
> 赞同：86
> 
> 时间：2013-04-20T22:26:51.063
> 
> 标签：jquery, nuget

像大多数人一样，我使用[jQuery Nuget 包](https://nuget.org/packages/jQuery)来保持最新状态。

然而，随着 jQuery 2.0 的发布，我现在被提示将 jQuery 1.9.1 升级到 2.0。目前，我的网站上有足够多的访问者使用“古老”版本的浏览器，我宁愿坚持使用 1.9.x 和[jQuery Migrate](https://nuget.org/packages/jQuery.migrate)。

在检查包的更新（jQuery 或其他）时，是否有告诉 Nuget 坚持使用特定版本（1.9.x）？

我正在使用 Visual Studio 2010/2012 扩展，但如果我需要使用 VS 中的命令行界面来解决这个问题，我当然会。

**注意：**在我脑海中的一件事是他们搞砸了更新。由于 jQuery 1.9.x 和 2.0.x/2.x 完全不同，它们似乎应该创建一个 jQuery 2(.0.x|.x) 包。

当然，真正想要更新到 2.x 的人必须了解它并切换他们想要安装的软件包。但鉴于它包含重大更改，也许这样更好？

* * *

## 回答 #1

> 赞同：117
> 
> 时间：2013-04-22T16:03:50.213

在我看来，这是包作者的错误。删除对多个浏览器的支持的更新应该被制作成一个单独的版本 2 nuget 包并相应地进行宣传，即带有重要的免责声明。1.9 库不是遗留的，将来会收到进一步的更新。我已经与包作者保持联系，如果收到回复，我会写更多。

在此期间，您可以通过在 中使用以下语法来限制包的版本`packages.config`：

```
<package id="jQuery" version="1.9.1" allowedVersions="[1.9.1]" /> 
```

这里有关于版本约束的更多信息：

[http://docs.nuget.org/docs/reference/Versioning](http://docs.nuget.org/docs/reference/Versioning)

进行配置更改后，更新不应将您的 jQuery 包升级到 2.0 版本。UI 包管理器过去曾出现过不尊重`allowedVersions`属性 ( [https://nuget.codeplex.com/workitem/1891](https://nuget.codeplex.com/workitem/1891) ) 的问题，因此如果遇到此问题，您可能必须使用命令行。

但是，这些都不能解决更新 1.9 分支时发生的问题，因为软件包提要现在将在 2.0+ 轨道上。我假设您必须切换到专门为支持“旧”1.x 版本而编写的新 nuget 包，或者每次手动复制脚本。

无论如何，当我了解更多信息时，我会更新它。

**编辑：**

包作者表示，未来将同时支持 1.x*和*2.x 路径，即包源将包含并行版本，而不是拆分它们。据我所知，解决方案是在包配置级别使用版本约束来防止更新到 2.x 版本，例如：

```
<package id="jQuery" version="1.9.1" allowedVersions="[1.9.1,2)" /> 
```

（指定 min 和 max 版本`allowedVersions`应该允许更新而不冒切换到 2.x 版本的风险。顺便说一下，右括号看起来很奇怪，但它是正确的 - 它表示“小于版本 2”。）

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2013-04-22T08:41:21.060

如何指定版本？

PM> Install-Package jQuery -Version 1.9.1

参考资料： http: [//nuget.org/packages/jQuery/1.9.1](http://nuget.org/packages/jQuery/1.9.1)

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2013-09-26T07:52:37.387

Nuget 现在有一个[jquery1 包](http://www.nuget.org/packages/jQuery1/)，它只跟踪 1.x 分支，因此您应该能够将核心 jQuery 包换成这个包。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-09-10T16:39:27.973

我为@TeYoU 从顶部组合了两种解决方案

首先，我从包管理器控制台安装了包：

工具菜单 -> 库包管理器 -> 包管理器控制台

```
PM> Install-Package jQuery -Version 1.9.1 
```

然后我编辑了 packages.config，正如@Dave R. 所说：

```
<package id="jQuery" version="1.9.1" allowedVersions="[1.9.1,2)" /> 
```

然后我使用 Nuget Manager 更新到当前版本，目前是 1.10.2，它就像一个魅力。

# php - 将电子邮件 ISO-8859-1 转换为 UTF-8

> ID：16125830
> 
> 赞同：1
> 
> 时间：2013-04-20T22:27:05.057
> 
> 标签：php, utf-8

我制作了一个脚本来从 PIPE 获取电子邮件正文。这是我得到的：

```
--_a09b8441-38d7-411d-93d3-19fe256fc2d3_
Content-Type: text/plain; charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable

isto=2C isto =E9 um t=E9ste! :D 
```

使用正则表达式后，我只得到了这个：

```
isto=2C isto =E9 um t=E9ste! :D 
```

无论如何，发送的电子邮件是：

```
isto, isto é um téste! :D 
```

我已经尝试用 iconv 转换它，但它没有改变。我需要从我收到的内容中获取带有口音的发送内容。

请帮我。先感谢您。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T23:05:44.453

我已经找到了如何做到这一点。代码：

```
$message='isto=2C isto =E9 um t=E9ste! :D';
$message=quoted_printable_decode($message)
$message=iconv('iso-8859-1','utf-8', $message); 
```

输出：

```
isto, isto é um téste! :D 
```

# iphone - 核心数据获取

> ID：16125831
> 
> 赞同：1
> 
> 时间：2013-04-20T22:27:13.647
> 
> 标签：iphone, ios, objective-c, core-data

我有一个实体，我想获取某个属性。

例如，

假设我有一个名为 Food 的实体，具有多个属性。我想选择所有类别，这是每个食品的一个属性。在 Core Data 中实现这一目标的最佳方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T22:35:22.220

只需运行您的获取请求，然后用于`valueForKey:`提取所有属性值。如果您的模型包含大量对象，您可以设置获取限制和偏移量（以及排序描述符）以对项目进行分页。执行此操作时，您还应该将获取请求设置为不将对象作为故障返回。

只记得有一个替代方案。您可以将属性设置为 fetch，然后将结果类型设置为 NSDictionaryResultType。您仍然需要进行迭代，但这将返回尽可能少的数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T01:34:15.533

您只能获取整个对象，但您只能在获取请求中使用 nspredicate 获取具有特定属性的对象。请参阅代码片段部分中 Xcode 中的代码片段。在 find 字段中查找 fetch request 并使用 nspredicate 代码拖出代码段。您可以将谓词设置为仅查找满足此谓词的对象。希望这可以帮助！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-20T23:12:18.400

编辑：我想我误解了你的问题。您似乎只想获取对象的属性，而不是对象本身（例如属性而不是实体）？我不相信核心数据会以这种方式工作……正如上面提到的那样，它是一个对象图而不是数据库。研究 Core Data 如何“出错”，在需要时自动检索依赖对象。我留下了下面的建议，以防它仍然适用，但我不确定它是否会适用。

您可以在搜索中添加谓词，以便仅获取满足特定条件的对象；它的工作方式类似于用于获取的“if”语句。这是苹果的文档：

[https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSPredicate_Class/Reference/NSPredicate.html](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSPredicate_Class/Reference/NSPredicate.html)

还有一个教程： [http ://www.peterfriese.de/using-nspredicate-to-filter-data/](http://www.peterfriese.de/using-nspredicate-to-filter-data/)

话虽如此，必要性实际上取决于您要获取的对象数量。如果它没有造成任何性能损失，那么获取一些不需要的对象不一定有什么问题。换句话说，解决问题——不要“优化”那些运行良好的东西。但是，如果您的模型包含大量对象，那么获取所有对象可能会很昂贵，并且您可能希望使用谓词。

# dart - 在 Dart 中，Dart2JS 和 Dart VM 之间的事件队列/事件循环有何不同？

> ID：16125833
> 
> 赞同：3
> 
> 时间：2013-04-20T22:27:44.650
> 
> 标签：dart, dart2js

执行顺序有什么不同吗？

或者事件队列/循环在 JavaScript 中的工作方式是否与 Dart 不同？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-05-03T22:54:27.707

DOM 事件由 Blink 处理。因此，这些事件应该以相同的方式处理。在 JavaScript 中没有其他事件循环 (afaik)。例如，产生执行的常见模式是`window.setTimeout(0, continuation)`.

在 Dart 中，我们也有由`dart:async`. 在那里我们可以区分*瞬间*和*周期*。瞬间由一个或多个循环组成。一个瞬间执行它的所有循环，直到没有剩余，然后移动到下一个瞬间。DOM 事件与瞬间处于同一级别。也就是说，DOM 事件永远不会与同一时刻的周期交错。[^1]（这也意味着在同一时刻堆积循环会使 DOM 饿死。）

`runAsync`排队一个新的周期。 `Timer.run`排队一个新的瞬间。

Futures 和 Streams 使用循环对可以立即执行的事件进行排队。在下面的示例中，两个`then`s 都将在同一时刻安排，因此在任何 DOM 事件有机会干扰之前运行。

```
var future = new Future.value(499);
future.then(print);
future.then(print); 
```

Dart 和 JavaScript 之间还有其他一些小的区别： Dart 没有最短的`Timer`运行睡眠时间。在 JavaScript`window.setTimeout`中不允许在 5ms 之前执行计算。（这是由于不幸的历史情况造成的）。Dart 没有这个限制。[^2]

VM 的`Timer`功能不是基于 DOM，而是有自己的实现。截至 2013 年 5 月，JavaScript（以及 dart2js）和 VM 之间的预定计时器回调的顺序不一致。（我不确定 Dartium，但我相信它使用 DOM 的版本，因此类似于 JavaScript）。

我们目前正在讨论对库的更改，以确保`Timer`事件以“正确”的顺序执行，而不仅仅是在等待时间过去之后。

* * *

[^1] 这未正确实现。截至 2013 年 5 月，异步操作都建立在`Timer`.

[^2] 这也尚未完成（2013 年 5 月）。我不确定 Dartium，但 dart2js 目前仍在使用`window.setTimeout`. 它最终会切换到更新的原语（在支持它的浏览器上），以允许更精确的超时。

# java - 在 jtext 区域中打印 unicode 单词时出现 ArrayIndexOutofBoundException。（马拉雅拉姆语单词）

> ID：16125840
> 
> 赞同：4
> 
> 时间：2013-04-20T22:28:29.923
> 
> 标签：java, swing, unicode, jtextarea, indexoutofboundsexception

我正在尝试将从“Matrubhumi”“Indiavision”等各种媒体提供的 rssfeed 中提取的马拉雅拉姆语单词打印到 jtext 区域。

我正在做的是将所有主题从 rssfeed 保存到文本文件中，然后逐行读取它们以将其打印到 textarea 中。但有些话我得到了`ArrayIndexOutofBoundException`。

例如打印“ബോസ്റ്റൺ സംഭവം: അമേരിക്കയിലെ സിഖ് സമൂഹം ആശങൽക”给出错误。请指出我犯的任何错误。此外，我已将字体更改为“Meera”，所以我认为这不是问题。像“ ബംഗാളിൽ ചിട്ടി കമ്പനി പൊളിഞ്ഞു, സംഘർഷം ”等字符串不会显示任何错误并打开应用程序窗口。提前致谢。

```
 BufferedReader demo = new BufferedReader(new FileReader(Name));
  jScrollPane1 = new javax.swing.JScrollPane();
  jTextArea1 = new javax.swing.JTextArea();
  setBackground(java.awt.Color.white);
  setPreferredSize(new java.awt.Dimension(1366, 768));
  jTextArea1.setColumns(30);
  jTextArea1.setRows(10);
  jTextArea1.setBorder(null);
  jTextArea1.setFont(new java.awt.Font("Meera", 1, 24));
  jTextArea1.setEditable(false);
  jScrollPane1.setViewportView(jTextArea1);
  jTextArea1.setWrapStyleWord(true);
  jTextArea1.setLineWrap(true);
    while ((sCurrentLine = demo.readLine()) != null){
    jTextArea1.append(sCurrentLine);
}
  private javax.swing.JTextArea jTextArea1;
  public static final java.lang.Character.UnicodeBlock MALAYALAM = null; 
```

其余代码是从 netbeans 自动生成的代码。这是第二课。主类处理获取 rssfeed 并将主题保存到文本文件中。文本文件的名称被传递给这个类，该类`FileReader()`用于访问文件并将内容逐行获取到字符串变量“sCurrentLine”。并使用`jTextArea.append()`将文本附加到文本区域。

```
Exception in thread "main" java.lang.ArrayIndexOutOfBoundsException: 432
at sun.font.ExtendedTextSourceLabel.createCharinfo(ExtendedTextSourceLabel.java:772)
at sun.font.ExtendedTextSourceLabel.getCharinfo(ExtendedTextSourceLabel.java:509)
at sun.font.ExtendedTextSourceLabel.getLineBreakIndex(ExtendedTextSourceLabel.java:455)
at java.awt.font.TextMeasurer.calcLineBreak(TextMeasurer.java:325)
at java.awt.font.TextMeasurer.getLineBreakIndex(TextMeasurer.java:561)
at java.awt.font.LineBreakMeasurer.nextOffset(LineBreakMeasurer.java:358)
at java.awt.font.LineBreakMeasurer.nextLayout(LineBreakMeasurer.java:440)
at javax.swing.text.TextLayoutStrategy.sync(TextLayoutStrategy.java:323)
at javax.swing.text.TextLayoutStrategy.insertUpdate(TextLayoutStrategy.java:70)
at javax.swing.text.FlowView.loadChildren(FlowView.java:143)
at javax.swing.text.CompositeView.setParent(CompositeView.java:139)
at javax.swing.text.FlowView.setParent(FlowView.java:289)
at javax.swing.plaf.basic.BasicTextAreaUI$PlainParagraph.setParent(BasicTextAreaUI.java:239)
at javax.swing.text.CompositeView.replace(CompositeView.java:217)
at javax.swing.text.BoxView.replace(BoxView.java:181)
at javax.swing.text.View.updateChildren(View.java:1116)
at javax.swing.text.View.insertUpdate(View.java:700)
at javax.swing.plaf.basic.BasicTextUI$RootView.insertUpdate(BasicTextUI.java:1602)
at javax.swing.plaf.basic.BasicTextUI$UpdateHandler.insertUpdate(BasicTextUI.java:1861)
at javax.swing.text.AbstractDocument.fireInsertUpdate(AbstractDocument.java:202)
at javax.swing.text.AbstractDocument.handleInsertString(AbstractDocument.java:749)
at javax.swing.text.AbstractDocument.insertString(AbstractDocument.java:708)
at javax.swing.text.PlainDocument.insertString(PlainDocument.java:130)
at javax.swing.JTextArea.append(JTextArea.java:477) 
```

此外，我尝试通过将错误生成部分包含在 try catch 中来运行程序，但后来我得到了另一个`ArrayIndexOutofBoundException`，但这次是在不同的行。代码段

```
 String RSSName;
 RSSName = "Matrubhumi";
 ReadTest demo = new ReadTest();
 demo.NewsFeed(RSSName); //Creates text file and fetch data from rssfeed
 JFrame frame = new JFrame();
 frame.setLayout(new BorderLayout());
 frame.add(new ImportantNews(RSSName),BorderLayout.CENTER);
 frame.setSize(1366, 768);
 frame.setVisible(true); // new exception is thrown in this line
 frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE); 

 Exception in thread "main" java.lang.ArrayIndexOutOfBoundsException: 496
at sun.font.ExtendedTextSourceLabel.createCharinfo(ExtendedTextSourceLabel.java:772)
at sun.font.ExtendedTextSourceLabel.getCharinfo(ExtendedTextSourceLabel.java:509)
at sun.font.ExtendedTextSourceLabel.getCharX(ExtendedTextSourceLabel.java:353)
at java.awt.font.TextLine$3.computeFunction(TextLine.java:515)
at java.awt.font.TextLine.applyFunctionAtIndex(TextLine.java:651)
at java.awt.font.TextLine.getCharXPosition(TextLine.java:668)
at java.awt.font.TextLine.getCharLinePosition(TextLine.java:678)
at java.awt.font.TextLayout.buildCache(TextLayout.java:683)
at java.awt.font.TextLayout.ensureCache(TextLayout.java:655)
at java.awt.font.TextLayout.getAdvance(TextLayout.java:885)
at sun.font.FontDesignMetrics.charsWidth(FontDesignMetrics.java:510)
at javax.swing.text.Utilities.getTabbedTextWidth(Utilities.java:279)
at javax.swing.text.GlyphPainter1.getSpan(GlyphPainter1.java:62)
at javax.swing.text.GlyphView.getPreferredSpan(GlyphView.java:592)
at javax.swing.text.View.getMaximumSpan(View.java:269)
at javax.swing.text.ParagraphView.findEdgeSpan(ParagraphView.java:768)
at javax.swing.text.ParagraphView.calculateMinorAxisRequirements(ParagraphView.java:736)
at javax.swing.plaf.basic.BasicTextAreaUI$PlainParagraph.calculateMinorAxisRequirements(BasicTextAreaUI.java:272)
at javax.swing.text.BoxView.checkRequests(BoxView.java:935)
at javax.swing.text.BoxView.getMinimumSpan(BoxView.java:568)
at javax.swing.text.BoxView.calculateMinorAxisRequirements(BoxView.java:903)
at javax.swing.text.BoxView.checkRequests(BoxView.java:935)
at javax.swing.text.BoxView.setSpanOnAxis(BoxView.java:343)
at javax.swing.text.BoxView.layout(BoxView.java:708)
at javax.swing.text.BoxView.setSize(BoxView.java:397)
at javax.swing.plaf.basic.BasicTextUI$RootView.setSize(BasicTextUI.java:1714)
at javax.swing.plaf.basic.BasicTextUI.getPreferredSize(BasicTextUI.java:917)
at javax.swing.plaf.basic.BasicTextAreaUI.getPreferredSize(BasicTextAreaUI.java:120)
at javax.swing.JComponent.getPreferredSize(JComponent.java:1651)
at javax.swing.JTextArea.getPreferredSize(JTextArea.java:619)
at javax.swing.ScrollPaneLayout.layoutContainer(ScrollPaneLayout.java:790)
at java.awt.Container.layout(Container.java:1503)
at java.awt.Container.doLayout(Container.java:1492)
at java.awt.Container.validateTree(Container.java:1688)
at java.awt.Container.validateTree(Container.java:1697)
at java.awt.Container.validateTree(Container.java:1697)
at java.awt.Container.validateTree(Container.java:1697)
at java.awt.Container.validateTree(Container.java:1697)
at java.awt.Container.validateTree(Container.java:1697)
at java.awt.Container.validate(Container.java:1623)
at java.awt.Container.validateUnconditionally(Container.java:1660)
at java.awt.Window.show(Window.java:1033)
at java.awt.Component.show(Component.java:1651)
at java.awt.Component.setVisible(Component.java:1603)
at java.awt.Window.setVisible(Window.java:1014) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T23:23:25.087

这可能是[此线程中描述的编码问题](https://stackoverflow.com/questions/696626/java-filereader-encoding-issue)

尝试替换此行

```
BufferedReader demo = new BufferedReader(new FileReader(Name)); 
```

和

```
new BufferedReader(new InputStreamReader(new FileInputStream(filePath), encoding)); 
```

`encoding`您存储主题的文件中使用的编码应该在哪里。

# java - 通过选择另一个数据结构来优化代码

> ID：16125841
> 
> 赞同：0
> 
> 时间：2013-04-20T22:28:47.090
> 
> 标签：java, string, optimization, data-structures, char

我有一段代码需要优化。

```
 for (int i = 0; i < wordLength; i++) {
   for (int c = 0; c < alphabetLength; c++) {
     if (alphabet[c] != x.word.charAt(i)) {
        String res = WordList.Contains(x.word.substring(0,i) +
                     alphabet[c] +
                     x.word.substring(i+1));
      if (res != null && WordList.MarkAsUsedIfUnused(res)) {
        WordRec wr = new WordRec(res, x);
        if (IsGoal(res)) return wr;
        q.Put(wr);
      }
    }
  } 
```

单词由字符串表示。问题是第 4-6 行的代码创建了许多字符串对象，因为字符串是不可变的。

如果我想获得更快的代码，我应该将我的单词表示更改为哪种数据结构？我试图将其更改为 char[]，但随后我无法让以下代码正常工作：

```
x.word.substring(0,i) 
```

如何从 char[] 获取子数组？以及如何在第 4.6 行连接 char 和 char[] ？

我可以使用任何其他合适且可变的数据结构吗？我想到了字符串缓冲区，但在字符串缓冲区上找不到合适的操作。

给定一个特定的单词，此函数生成所有相差一个字符的单词。WordRec 只是一个类，其中包含一个表示单词的字符串和一个指向该单词“父亲”的指针。

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T22:36:12.090

您可以使用以下方法减少对象数量：

```
StringBuilder tmp = new StringBuilder(wordLength);
tmp.append(x.word);
for (int i=...) {
    for (int c=...) {
        if (...) {
           char old = tmp.charAt(i);
           tmp.setCharAt(i, alphabet[c]);
           String res = tmp.toString();
           tmp.setCharAt(i, old);
           ...
        }
    }
} 
```

# python - 存在列表项时的Python列表最大值函数

> ID：16125843
> 
> 赞同：2
> 
> 时间：2013-04-20T22:28:54.580
> 
> 标签：python

我试图在列表中找到最大元素，但是当列表包含另一个列表项时发现了一些奇怪的东西。

代码.py

```
a=[[1,2],3,4]
max(a)
[1,2] 
```

max 函数在上述工作中是如何工作的？

如何将列表元素假定为最大元素...

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-20T22:30:56.850

在 Python 2 中，无法比较的类型之间的比较会返回无意义（但一致）的结果：

```
>>> [1,2] > 3
True 
```

`max`使用这些比较来找到最大的元素，在这种情况下恰好是列表。

这[已](http://docs.python.org/3/whatsnew/3.0.html#ordering-comparisons)在 Python 3 中得到修复，您将获得：

```
>>> max([1,2], 3, 4)
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
TypeError: unorderable types: int() > list() 
```

# java - 圆圈中的圆圈逐渐消失，创建一个目标

> ID：16125847
> 
> 赞同：1
> 
> 时间：2013-04-20T22:30:31.113
> 
> 标签：java, variables, object, methods, drawing

我想创建一个图形，其中圆圈重叠并且它们的颜色淡出，圆圈之间也应该有一个空白，类似于这样：![在此处输入图像描述](https://i.stack.imgur.com/C0gJP.jpg)

这是我已经走了多远：

```
import java.awt.*;
import java.awt.geom.*;
import javax.swing.*;
import java.awt.event.MouseListener;
import java.awt.event.MouseEvent;

class Circles extends JPanel implements MouseListener {

    public void mouseReleased(MouseEvent event) {

    }
    public void mousePressed(MouseEvent event) {

    }
    public void mouseClicked(MouseEvent event) {

    }
    public void mouseEntered(MouseEvent event) {}
    public void mouseExited(MouseEvent event) {}

    public Circles() {
        addMouseListener(this);
    }

    public void paint(Graphics g) {
        g.setColor(Color.white);
        int w = getWidth();
        int h = getHeight();
        g.fillRect(0, 0, w, h);

        Graphics2D g2 = (Graphics2D) g;

        for (int i = 0; i < 20; i++) {
            if (i % 2 == 0) {
                Color c = new Color(255 - i * 10, 255 - i * 10, 255 - i * 10);
                g2.setColor(c);
            } else {
                g2.setColor(Color.white);
            }

            g2.fillOval((5 * i), (5 * i), (w - 10) * i, (h - 10) * i);
        }
    }

    public static void main(String[] args) {
        Frame w = new Frame();
        w.setVisible(true);
    }
} 
```

框架：

```
import java.awt.*;
import java.awt.geom.*;
import javax.swing.*;

public class Frame extends JFrame {
    Circles myPanel;

    public static void main(String[] args) {
        Frame w = new Frame();
        w.setVisible(true);
    }

    public Frame() {
        setTitle("In-class Test 1: Starting Code");
        setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        setSize(500, 220);
        setLocation(300, 300);
        myPanel = new Circles();
        add(myPanel);
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-20T22:52:26.147

有很多方法可以实现这一点，但首先，从覆盖`paintComponent`而不是`paint`.

其次，您将需要某种循环来在每次迭代时扩大圆的半径。

第三，您将需要一个简单的`int`值作为 alpha 值，从 255 开始并降低到您想要的最微弱的 alpha 级别，例如 64。

在循环的每次迭代中，您都需要增加半径值并相应地减少 alpha 值。然后，您只需使用所需`Color`的 RGB 和 alpha 值创建一个新对象

查看[2D 图形](http://docs.oracle.com/javase/tutorial/2d/)了解详情

**更新了示例...**

![在此处输入图像描述](https://i.stack.imgur.com/GiIDh.png)

```
import java.awt.BasicStroke;
import java.awt.BorderLayout;
import java.awt.Color;
import java.awt.Dimension;
import java.awt.EventQueue;
import java.awt.Graphics;
import java.awt.Graphics2D;
import java.awt.RenderingHints;
import java.awt.geom.Ellipse2D;
import javax.swing.JFrame;
import javax.swing.JPanel;
import javax.swing.UIManager;
import javax.swing.UnsupportedLookAndFeelException;

public class FadingCircles {

    public static void main(String[] args) {
        new FadingCircles();
    }

    public FadingCircles() {
        EventQueue.invokeLater(new Runnable() {
            @Override
            public void run() {
                try {
                    UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
                } catch (ClassNotFoundException | InstantiationException | IllegalAccessException | UnsupportedLookAndFeelException ex) {
                }

                JFrame frame = new JFrame("Test");
                frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
                frame.setLayout(new BorderLayout());
                frame.add(new TestPane());
                frame.pack();
                frame.setLocationRelativeTo(null);
                frame.setVisible(true);
            }

        });
    }

    public static class TestPane extends JPanel {

        public static final int CIRCLE_COUNT = 10;

        @Override
        public Dimension getPreferredSize() {
            return new Dimension(200, 200);
        }

        @Override
        protected void paintComponent(Graphics g) {
            super.paintComponent(g);
            Graphics2D g2d = (Graphics2D) g.create();

            g2d.setRenderingHint(RenderingHints.KEY_ALPHA_INTERPOLATION, RenderingHints.VALUE_ALPHA_INTERPOLATION_QUALITY);
            g2d.setRenderingHint(RenderingHints.KEY_ANTIALIASING, RenderingHints.VALUE_ANTIALIAS_ON);
            g2d.setRenderingHint(RenderingHints.KEY_COLOR_RENDERING, RenderingHints.VALUE_COLOR_RENDER_QUALITY);
            g2d.setRenderingHint(RenderingHints.KEY_DITHERING, RenderingHints.VALUE_DITHER_ENABLE);
            g2d.setRenderingHint(RenderingHints.KEY_FRACTIONALMETRICS, RenderingHints.VALUE_FRACTIONALMETRICS_ON);
            g2d.setRenderingHint(RenderingHints.KEY_INTERPOLATION, RenderingHints.VALUE_INTERPOLATION_BILINEAR);
            g2d.setRenderingHint(RenderingHints.KEY_RENDERING, RenderingHints.VALUE_RENDER_QUALITY);
            g2d.setRenderingHint(RenderingHints.KEY_STROKE_CONTROL, RenderingHints.VALUE_STROKE_PURE);

            int maxRadius = Math.min(getWidth(), getHeight());
            int alpha = 255;
            int range = 255 - 32;
            g2d.setStroke(new BasicStroke(6, BasicStroke.CAP_ROUND, BasicStroke.JOIN_ROUND));

            for (int index = 0; index < CIRCLE_COUNT; index++) {
                float progress = (float) index / (float) CIRCLE_COUNT;
                alpha = 255 - Math.round(range * progress);
                Color color = new Color(0, 0, 0, alpha);
                g2d.setColor(color);

                int radius = Math.round(maxRadius * progress);
                int x = (getWidth() - radius) / 2;
                int y = (getHeight() - radius) / 2;

                g2d.draw(new Ellipse2D.Float(x, y, radius, radius));
            }
            g2d.dispose();
        }
    }
} 
```

您可能还想查看[执行自定义绘画](http://docs.oracle.com/javase/tutorial/uiswing/painting/)

# wpf - Rx-WPF 和 Rx-Xaml 包之间有什么区别吗？

> ID：16125851
> 
> 赞同：4
> 
> 时间：2013-04-20T22:31:17.380
> 
> 标签：wpf, nuget, system.reactive

如果我将 RX-main 包添加到 WPF 应用程序，我会安装以下依赖包：

*   接收接口
*   接收核心
*   Rx-Linq
*   Rx 平台服务
*   Rx-主要

添加 Rx-main 后，可以安装两个与 WPF 相关的附加包

*   RX-XAML
*   接收-WPF

Rx-Xaml 依赖于 Rx-Main，而 Rx-WPF 依赖于 Rx-Xaml。但是，这两个包都添加了对 System.Reactive.Windows.Threading 的引用。如果它们之间有什么区别，为什么会有两个单独的包添加对同一个程序集的引用？

另外，我是否需要添加其中一个或两个才能在 WPF 中使用 RX？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-04-21T23:39:50.330

作为 Rx-Xaml 包的前所有者，我实际上知道这个问题的答案。过去只有 Rx-Silverlight 和 Rx-WPF。这使得创建像[ReactiveUI](http://www.reactiveui.net)这样的包变得困难，因为它们依赖于一个或另一个，*具体取决于您使用的平台*。

因此，我创建了 Rx-Xaml，它实际上只是 Rx-Silverlight 和 Rx-WPF 的合并。然而，Rx 团队意识到拥有单独的包是愚蠢的，并问我他们是否可以自己接管这个名字。我很乐意，现在 Rx-Xaml 是您应该使用的包。自 2.0 以来的 Rx-Xaml 归微软所有。

**tl;dr**：使用 Rx-Xaml，忽略 Rx-WPF 和 Rx-Silverlight，它们已经过时了。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-21T19:22:35.263

从我使用[NuGet Package Explorer](https://npe.codeplex.com/)看到的情况来看，[Rx-WPF](https://www.nuget.org/packages/Rx-WPF/)[和 Rx-Silverlight](https://www.nuget.org/packages/Rx-Silverlight/)都没有在它们各自的 nupkg 文件中包含它们自己的任何 DLL（或事实上的任何其他文件）。因此，它们似乎仅用作[Rx-Xaml](https://www.nuget.org/packages/Rx-Xaml/)的容器。我的猜测是你仍然应该指向[Rx-WPF](https://www.nuget.org/packages/Rx-WPF/)，因为 Rx 团队可能会开始向它添加特定的逻辑，而这些逻辑不会包含在基本的[Rx-Xaml](https://www.nuget.org/packages/Rx-Xaml/)包中。

# php - PHP 国际化 - PHP 函数的执行顺序

> ID：16125852
> 
> 赞同：0
> 
> 时间：2013-04-20T22:31:24.917
> 
> 标签：php, ajax, url, session

大家好，

我正在尝试使用 php 将我的网站国际化。我对 PHP 很陌生！

`index.php`开头是这样的：

```
<?php session_start(); ?>
<?php include 'api/locale.php'; ?>

<html>
  <!-- ... -->
  <div><?php loc('foo') ?></div> 
```

`locale.php`看起来像这样：

```
<?php
  if(isset($_GET['lang']) {
      $_SESSION['lang'] = $_GET['lang'];
  } else {
      $_SESSION['lang'] = 'en';     // default value
  }

  // use the necessary language file
  include('/locale/' . $_SESSION['lang'] . '.php');

  // get phrase from URL
  if (isset($_GET["phrase"]))
    loc($_GET["phrase"];);

  function loc($phrase)
  {
    global $lang;

    if(array_key_exists($phrase, $lang)) {
        echo $lang[$phrase];
    } else {
        echo $phrase;
    }
  }
?> 
```

我的想法是我想使用该功能`loc($phrase)`来获取德语或英语的内容。但问题是：

如果我有这样的代码，我总是会得到英文版本，因为`locale.php`我无法`lang`从 URL`$_GET['lang']`中获取：未定义。因此，会话语言始终设置为默认语言 (en)。

但是，如果我将 移动`session_start();`到文件`locale.php`中，则国际化工作：

`index.php`：

```
<?php include 'api/locale.php'; ?>

<html>
  <!-- ... -->
  <div><?php loc('foo') ?></div> 
```

`locale.php`：

```
<?php
  session_start();
  if(isset($_GET['lang']) {
      $_SESSION['lang'] = $_GET['lang'];
  // ... rest the same as above 
```

为什么会这样？我在做一些概念上的错误吗？问题是我也在`locale.php`ajax 调用中使用它来获取动态生成的 HTML 元素的国际内容：

```
function loc(phrase)
{
  var locString;
  $.ajax({
    // force synchronous ajax call, to return with locString
    async: false,
    // url with to be translated id
    url: "api/locale.php?phrase=" + phrase,
    // "get" for small data (otherwise post)
    method: "get",
    // callback function after server has reveiced information
    success: function (data)
      {
        locString = data;
      }
  });
  return locString;
} 
```

所以如果我`locale.php`用这个 AJAX 调用一遍又一遍地调用，是不是有新的会话一遍又一遍地开始？我不确定我是否正确设计了我的功能。我很高兴有任何评论！

谢谢！

=============== 编辑===============

好的，我现在尝试了一种新方法：

1.  `session.php`

    ```
    // session starts at this point
    session_start();

    // internationalisation in EN and DE
    $allowedLangs = array('en', 'de');

    // check lang-parameter given in URL and set language from there
    if(isset($_GET['lang']) && in_array($_GET['lang'], $allowedLangs))
      $_SESSION['lang'] = $_GET['lang'];

    if(!isset($_SESSION['lang']))
      $_SESSION['lang'] = 'en';     // default value 
    ```

2.  `locale.php`

    ```
    // include correct languguage file
    $root = realpath($_SERVER["DOCUMENT_ROOT"]) ;
    include($root . '/locale/' . $_SESSION['lang'] . '.php');

    // get phrase from URL and translate it
    if (isset($_GET["phrase"]))
    {
      $phrase = $_GET["phrase"];
      global $lang;

      if (array_key_exists($phrase, $lang))
        echo $lang[$phrase];
      else
        echo $phrase;
    } 
    ```

这两个文件都包含在`index.php`

```
<?php include 'api/session.php'; ?>
<?php include 'api/locale.php'; ?> 
```

但是，如果我现在使用 ajax 对短语进行本地化，则会出现以下错误消息：

```
Notice: Undefined variable: _SESSION in ... /locale.php on line 4 
```

这个怎么可能？我以为`$_SESSION`是超全球的？！？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-20T22:55:15.873

当您通过 ajax 使用 session_start 调用 api/locale.php 版本时，将启动不是新的但**相同**的会话，这是正确的行为。

Word start 可能会让您感到困惑，但会话开始会正确提供**当前**会话的信息，而不是新的。所以没什么好担心的。

你也可以考虑看看

```
$_SERVER['HTTP_ACCEPT_LANGUAGE'] 
```

在开始对服务器和客户端进行 ajax ping-pong 以进行初始语言快速猜测之前...

对于您的代码的两个版本，当 session_start位于 locale.php 中时，为什么它可以工作并不神秘。

原因是：

您的 ajax 调用**没有从****index.php**进入您的脚本，而是直接进入**api/locale.php**。

如果你**在 api/locale.php 中没有 session_start**，ajax 调用将进入一个无会话的 php 调用。

所以它将保持默认值，因为会话数据既不能被提取也不能被记录。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-20T23:40:03.317

我认为您的 locale.php 文件中存在概念上的错误。你总是设置的事实`$_SESSION['lang']`是难闻的气味。
应该有一种情况，您不设置值`$_SESSION['lang']`而只使用值`$_SESSION['lang']`而不修改它。
使用您的语言环境文件，以及不将“lang”作为参数传递的 ajax 调用，您将始终获得默认语言。
但无论如何，您的 local.php 文件应该以ishan`session_start();`的说明开头。

顺便说一句，你不应该在你的函数 loc 中使用'echo'。而是返回结果并执行

```
echo loc('foo'); 
```

它会做同样的工作，但你的 loc 函数会更可重用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-29T17:00:40.647

嗨，马库斯，我将尝试在评论中回答您的问题。

$_SESSION id 确实是一个超级全局的。但是您需要调用 session_start() 才能使其正常工作。这就是为什么它在 locale.php 中不再起作用的原因

问题是您的 locale.php 文件同时服务于两个目的。它应该只是翻译，但不能直接从 url 访问。所以你应该做这样的事情：

1.  会话.php`

    //这里定义一个默认值。所以无论发生什么，你都知道 $_session['lang']
    // 总是会被设置。

    ```
    if(! isset ($_SESSION['lang'] {
       $_SESSION['lang'] = 'en';     // default value
    }

    // internationalisation in EN and DE
    $allowedLangs = array('en', 'de');

    // check lang-parameter given in URL and set language from there
    //if necessary, the default value will be overwritten.
    if(isset($_GET['lang']) && in_array($_GET['lang'], $allowedLangs)) {
      $_SESSION['lang'] = $_GET['lang'];
    } 
    ```

2.  `翻译.php

    函数 getTranslation ($phrase, $lang='en') {

    ```
     $root = realpath($_SERVER["DOCUMENT_ROOT"]) ;
     include($root . '/locale/' . $lang . '.php');

     //the array with the phrases and their translations should not be called $lang 
     //to avoid confusion. Let's call it $translations
     if (array_key_exists($phrase, $translations))
       return $translations[$phrase];
     else
       return $phrase;
     } 
    ```

    }

3.  locale.php ` 该文件将在 ajax 中调用。它可以提供已经定义的 $_SESSION['lang'] （例如在 index.php 中）。否则，您将退回到默认语言。

    包括'path_to_translate/translate.php'；

    session_start();

    if(isset($_SESSION['lang'] {
    $lang = $_SESSION['lang'];
    } else {
    $lang = 'en';
    }

    $phrase = $_GET['phrase'];

    回声 getTranslation($phrase, $lang);

4.  `index.php`

    ```
     session_start(); 
       include 'api/session.php'; 
       include 'path_to_translate/translate.php';

       $lang = $_SESSION['lang'];

    <some html>

    //to translate anything
    <?php echo getTranslation($anything, $lang)  ?>  

    </some html> 
    ```

希望这会有所帮助。当然，我无法测试所有这些代码，所以它们可能是一些错误。但这是一般的想法。
我尽量不改变你所做的太多。但是还有一个问题。您不应该在 index.php 中定义语言。如果您的索引中有一个表格来选择语言。在 ajax 中调用 set_lang.php。不是让索引在会话中设置语言。

# javascript - jQuery .data 上下文问题

> ID：16125863
> 
> 赞同：1
> 
> 时间：2013-04-20T22:33:05.890
> 
> 标签：javascript, jquery, arrays, object

我在尝试使用 $.data 附加和检索数据时遇到了一个奇怪的问题。我认为这可能是一个上下文问题，但不知道如何解决这个问题，也不知道到底发生了什么？

我有一组拇指，每个都应该有自己的数据与之相关联。当脚本被调用时，它会触发所有插件的默认设置，这是正常的事情，然后从每个缩略图的父 ('a') 标记中提取所有数据插件设置并将其合并。最后，我将整套合并的插件设置分配给缩略图的 $.data，最后分配一个点击事件给它。

```
return this.each(function(index){ 
   var $this=$(this), 
       objSRC=$this.parents('a:first'),
       dataSettings=(!objSRC.data("plugin"))?{}:JSON.parse(objSRC.attr('data-plugin')),
       mergedData=$.extend({}, Plugin.settings,dataSettings||{});

    $.data($this, mergedData); 

    // SETUP THUMBNAIL CLICK EVENT  
    $this.on('click',function(e){ 
       Plugin.thumbClick($this); 
       e.stopPropagation(); e.preventDefault();
    });
}); 
```

....然后在实际的缩略图单击事件方法中，我遇到了问题：

```
thumbClick:function(obj){
   var objData=$.data(obj), 
       objParent=obj.parents('a:first'),
       GalAttr=obj[0].getAttribute('rel'), 
       imageATTR=this.alt;

   // SETUP GALLERIES IN ARRAY INSIDE DATA - ONCE
   if((typeof(GalAttr)!='undefined' && GalAttr) && !obj[0]['Galleries']){
      var GallerySet=$("[rel='"+GalAttr+"']");
      for(var i=0,l=GallerySet.length; i<l; ++i){ 
          GallerySet[i]['Galleries']=GallerySet; 
      };
   };   
}, 
```

在该方法中，我设置了一些基本变量，然后使用缩略图的 rel 属性。rel 属性用于将缩略图分组到画廊中。所以，点击缩略图后，我试图

1）从缩略图（obj）中拉取REL属性

2）找到页面上所有具有相同rel属性的相似缩略图（一次）

3) 将返回的集合作为数组保存到缩略图的数据中

这样，我只需要在每个图库中基于 'rel' 搜索 DOM 一次。之后，所有内容都将存储在缩略图 $.data 中的“Galleries”数组中。一切看起来都正确并且正在工作，但我遇到了 1 个问题 - $.data 在传递给函数的缩略图（obj）与我搜索并添加到画廊的缩略图（obj）之间没有正确对齐大批。

基本上如果我 console.log(obj) 和 console.log($(GallerySet[0]))

单击图库中的第一张图片时，我得到完全相同的元素。（两者都是对象）但是，当我尝试从每个对象中提取数据时：

console.log($.data(obj) 和 console.log($.data($(GallerySet[0]))

他们完全不同。$.data(obj) （这是单击并传递给 thumbClick 方法的缩略图）正在正确返回数据对象，但另一个正在返回一个空对象。

有没有人对这个问题有想法或见解？谢谢！

# java - Java中的阻塞队列

> ID：16125865
> 
> 赞同：0
> 
> 时间：2013-04-20T22:33:56.020
> 
> 标签：java, multithreading, synchronization, synchronized

我正在阅读一本名为“Beginning Algorithms”的书，其中包含 Java 示例。在关于队列的章节中，它解释了“阻塞队列”，并且......即使我的背景是 C# 而不是 Java，我觉得有些东西很有趣。

这是代码的一部分（我省略了不相关的部分）：

```
public void enqueue(Object value){
    synchronized(_mutex){
        while(size == _max_size){
            waitForNotification();
        }
        _queue.enqueue(value);
        _mutex.notifyAll();
    }
}

private void waitForNotification(){
    try {
        _mutex.wait();
    } catch( InterruptedException e){
        // Ignore
    }
}

public Object dequeue() throws EmptyQueueException {
    synchronized(_mutex){
        while(isEmpty()){
            waitForNotification();
        }
        Object value = _queue.dequeue();
        _mutex.notifyAll();
        return value;
    }
} 
```

我看到两个主要问题。

首先，如果队列已满，有 5 个线程正在等待添加项目，其他线程将 1 个项目出列，其他 5 个将被释放，同时检查“size() == _max_size”是否不再为真，并且他们将尝试调用“_queue.enqueue” 5 次，使队列溢出。

其次，同样的情况也发生在“出队”上。如果由于队列为空而阻止多个线程尝试使项目出队，添加一个将导致所有线程检查队列不再为空，并且所有线程都将尝试出队，得到 null 或我猜的异常。

我对吗？IC# 有一个“Monitor.Pulse”，它只释放一个被阻塞的线程，这会是解决方案吗？

干杯。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T22:44:38.593

你无视`synchronized`声明。这仅允许一个线程获取`_mutex`. 因此，只有一个线程能够检查 的值，`size`因为该`while`语句在`synchronized`块内。

As described in [this thread](https://stackoverflow.com/questions/1036754/difference-between-wait-and-sleep), the `wait()` method actually releases the `_mutex` object and waits for a call to `notify()`, or `notifyAll()` in this case. Furthermore, `notifyAll()` will only grant the lock on `_mutex` to **one** of the waiting threads.

# javascript - JavaScript 变量解析

> ID：16125866
> 
> 赞同：1
> 
> 时间：2013-04-20T22:34:12.647
> 
> 标签：javascript, performance, variables

我在思考这个问题：

```
function outer()
{
    var myVar = 1;

    function inner()
    {
        alert(myVar);
    }
} 
```

现在，据我了解，这将导致对变量的两次查找——一次查找检查内部函数中的局部变量，一次查找外部函数——此时找到变量。

问题是 - 与此相比，这是否会特别消耗性能：

```
function myFunc ()
{
    var myVar = 1;

    alert(myVar);
} 
```

这只需要对变量进行一次查找-然后将其作为局部变量找到。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T01:26:37.590

在较旧的 JS 引擎中，范围查找可能会对性能产生一些影响。

然而，即使在几年前，这只是一个非常非常小的差异 - 并不是你真正需要担心的事情。

今天的引擎很可能能够像这样优化查找，而且总的来说它们的性能要好得多。除非您正在编写完全疯狂的东西或针对性能非常差的设备，否则您无需担心。

# java - 许多生产者和许多消费者。让最后一个生产者活着杀死消费者

> ID：16125867
> 
> 赞同：2
> 
> 时间：2013-04-20T22:34:22.037
> 
> 标签：java, multithreading, producer-consumer

我有一个标准的生产者消费者问题。生产者将数据放入堆栈（缓冲区）消费者接受它。

我希望有很多生产者和消费者。

**问题是我只想让最后一个活着的制作人能够打电话`b.stop()`**

```
for(int i = 0; i < 10; i++){
        try{
    //      sleep((int)(Math.random() * 1));                
        }catch(Exception e){e.printStackTrace();}
        b.put((int) (Math.random()* 10));
        System.out.println("i = " + i);
    }
    b.stop(); 
```

那么我将`b.stop()`which changes `running`field in称为`Buffer`false 和`notifiesAll()`

结束然后我得到：

```
i = 9 // number of iteration this is 10th iteration
Consumer 2.: no data to take. I wait.  Memory: 0
Consumer 1.: no data to take. I wait.  Memory: 0
Consumer 3.: no data to take. I wait.  Memory: 0 
```

他们应该死了，所以我做了方法 stop() 但它没有用。

代码正在运行，请检查

```
import java.util.Stack;

public class Buffer {
private static int SIZE = 4;
private int i;//number of elements in buffer
public Stack<Integer> stack;
private volatile boolean running;
    public Buffer() {
        stack = new Stack<>();
        running = true;
        i = 0;
    }
    synchronized public void put(int val){
        while (i >= SIZE) {
            try {
                System.out.println("Buffer full, producer waits");
                wait();
            } catch (InterruptedException exc) {
                exc.printStackTrace();
            }
        }   
        stack.push(val);//txt = s;
        i++;
        System.out.println("Producer inserted " + val + " memory: " + i);
        if(i - 1 == 0)
            notifyAll();
        System.out.println(stack);
    }

    public synchronized Integer get(Consumer c) {
        while (i == 0) {
            try {
                System.out.println(c + ": no data to take. I wait.  Memory: " + i);
                wait();
            } catch (InterruptedException exc) {
                exc.printStackTrace();
            }
        }   
        if(running){
            int data = stack.pop();
            i--;    
            System.out.println(c+  ": I took: " + data +" memory: " +  i);
            System.out.println(stack);
            if(i + 1 == SIZE){//if the buffer was full so the producer is waiting
                notifyAll();
                System.out.println(c +  "I notified producer about it");
        }
        return data;}
        else 
            return null;
    }

    public boolean isEmpty(){
        return i == 0;
    }
    public synchronized void stop(){//I THOUGH THIS WOULD FIX IT~!!!!!!!!!!!!!!
        running = false;
        notifyAll();
    }
    public boolean isRunning(){
        return running;
    }

} 
```

* * *

```
public class Producer extends Thread {
private Buffer b;
    public Producer(Buffer b) {
        this.b = b;
    }

    public void run(){
        for(int i = 0; i < 10; i++){
            try{
        //      sleep((int)(Math.random() * 1));                
            }catch(Exception e){e.printStackTrace();}
            b.put((int) (Math.random()* 10));
            System.out.println("i = " + i);
        }
        b.stop();
    }

} 
```

* * *

```
public class Consumer extends Thread {
    Buffer b;
    int nr;
    static int NR = 0;

    public Consumer(Buffer b) {
        this.b = b;
        nr = ++NR;
    }

    public void run() {
        Integer i = b.get(this);
        while (i != null) {
            System.out.println(nr + " I received : " + i);
            i = b.get(this);
        }
        System.out.println("Consumer " + nr + " is dead");
    }

    public String toString() {
        return "Consumer " + nr + ".";
}

} 
```

* * *

```
public class Main {

    public static void main(String[] args) {

        Buffer b = new Buffer();
        Producer p = new Producer(b);
        Consumer c1 = new Consumer(b);
        Consumer c2 = new Consumer(b);
        Consumer c3 = new Consumer(b);  
        p.start();
        c1.start();c2.start();c3.start();

    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T23:13:29.453

您必须意识到您的线程可能在以下两个位置中的任何一个中等待：

1.  在`wait`循环中`i == 0`- 在这种情况下`notifyall`会将所有这些都踢出去。但是，如果`i`仍然如此`0`，他们将直接再次等待。
2.  等待对对象的独占访问（即等待`synchronized`方法）-在这种情况下（如果您修复了上面的问题 1 并且锁将被释放），它们将直接进入`while (i == 0)`循环。

我建议您将`while ( i == 0 )`循环更改为`while ( running && i == 0 )`. 这**应该可以**解决您的问题。由于您的`running`标志（正确）`volatile`所有都应该整齐地退出。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-21T16:48:28.150

作为**对只有最后一个活着的生产者能够调用 b.stop() 的回答**。

您应该在包含生产者数量的情况下添加一个`AtomicInteger`，`Buffer`并在其构造函数中进行每个生产者调用`b.start()`（增加它）。

这样你就可以减少它，`b.stop()`只有当它变为零时才应该`running`设置为`false`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-21T11:51:05.863

我会重新考虑你的设计。类应该有一套连贯的职责；让一个类负责从队列中消费对象，同时还负责关闭其他消费者，这似乎是您想要分开的事情。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-20T22:38:43.017

在您的`stop`方法中，您设置`running`为`false`，但您的 while 循环运行时间为`i == 0`。设置`i`为不同于零的值，它应该修复它。

顺便说一句，我不明白为什么你有一个`running`变量和一个单独的`i`变量，这实际上是保持线程运行的变量。

# android - 在 GoogleMap SupportMapFragment 上绘制 2 个 GeoPoints 之间的行车路线

> ID：16125868
> 
> 赞同：2
> 
> 时间：2013-04-20T22:34:28.257
> 
> 标签：android, google-maps, android-mapview, android-maps, google-maps-android-api-2

这是一个棘手的问题，困扰了我一天，请帮忙。

我使用 Google Maps APIs 来获取我提供的 2 个 GeoPoints 之间的最短行驶距离及其路线、点等，请参见下面的代码

```
private JSONObject GetDistance(String src, String dest) throws Exception
{
    StringBuilder urlString = new StringBuilder();
    urlString.append("http://maps.googleapis.com/maps/api/directions/json?");
    urlString.append("origin=");// from
    urlString.append(src);
    urlString.append("&destination=");// to
    urlString.append(dest);
    urlString.append("&mode=driving&sensor=true&units=imperial");

    // get the JSON And parse it to get the directions data.
    HttpURLConnection urlConnection = null;
    URL url = null;

    url = new URL(urlString.toString());
    urlConnection = (HttpURLConnection) url.openConnection();
    urlConnection.setRequestMethod("GET");
    urlConnection.setDoOutput(true);
    urlConnection.setDoInput(true);
    urlConnection.connect();

    InputStream inStream = urlConnection.getInputStream();
    BufferedReader bReader = new BufferedReader(new InputStreamReader(inStream));

    String temp, response = "";
    while ((temp = bReader.readLine()) != null)
    {
        // Parse data
        response += temp;
    }
    // Close the reader, stream & connection
    bReader.close();
    inStream.close();
    urlConnection.disconnect();

    JSONObject object = (JSONObject) new JSONTokener(response).nextValue();

    return (object);
} 
```

我还在谷歌地图片段上绘制了 2 个 GeoPoints，我使用 SupportMapFragment，即这个库 com.google.android.gms.maps.SupportMapFragment

我想要做的是，我想绘制从上面的 getDistance 函数获得的路线，它以 JSON 格式输出我可以轻松处理的数据。

```
Here is the JSON object that I get from the getDistance function
{
    "status": "OK",
    "routes": [
        {
            "waypoint_order": [],
            "summary": "Wilbraham Rd/A6010",
            "bounds": {
                "southwest": {
                    "lng": -2.26773,
                    "lat": 53.4301
                },
                "northeast": {
                    "lng": -2.19414,
                    "lat": 53.45106000000001
                }
            },
            "legs": [
                {
                    "duration": {
                        "value": 797,
                        "text": "13 mins"
                    },
                    "distance": {
                        "value": 7289,
                        "text": "4.5 mi"
                    },
                    "end_location": {
                        "lng": -2.19414,
                        "lat": 53.43052
                    },
                    "start_address": "137 College Road, Manchester, Greater Manchester M16 0AA, UK",
                    "end_address": "6 Ealing Place, Manchester M19, UK",
                    "start_location": {
                        "lng": -2.26773,
                        "lat": 53.45106000000001
                    },
                    "via_waypoint": [],
                    "steps": [
                        {
                            "html_instructions": "Head <b>southeast</b> on <b>College Rd</b> toward <b>Park Dr</b>",
                            "duration": {
                                "value": 83,
                                "text": "1 min"
                            },
                            "distance": {
                                "value": 729,
                                "text": "0.5 mi"
                            },
                            "end_location": {
                                "lng": -2.25758,
                                "lat": 53.45005
                            },
                            "polyline": {
                                "points": "ctfeIh|yLrBaEdAoB`@w@N]BKDM@Q@M?]?WC}AAgAGyG?mAI{GG{JM_HAo@"
                            },
                            "travel_mode": "DRIVING",
                            "start_location": {
                                "lng": -2.26773,
                                "lat": 53.45106000000001
                            }
                        },
                        {
                            "html_instructions": "Turn <b>right</b> onto <b>Withington Rd</b>",
                            "duration": {
                                "value": 96,
                                "text": "2 mins"
                            },
                            "distance": {
                                "value": 747,
                                "text": "0.5 mi"
                            },
                            "end_location": {
                                "lng": -2.25703,
                                "lat": 53.44339
                            },
                            "polyline": {
                                "points": "ymfeIz|wLJ@v@TL@N?H?HAHCJEXKhAy@JGTEH?|BAzAExAAN?z@Cb@?dA?d@AdFKxCGfCC"
                            },
                            "travel_mode": "DRIVING",
                            "start_location": {
                                "lng": -2.25758,
                                "lat": 53.45005
                            }
                        },
                        {
                            "html_instructions": "Turn <b>left</b> onto <b>Wilbraham Rd/A6010</b>",
                            "duration": {
                                "value": 249,
                                "text": "4 mins"
                            },
                            "distance": {
                                "value": 2565,
                                "text": "1.6 mi"
                            },
                            "end_location": {
                                "lng": -2.21852,
                                "lat": 53.44261
                            },
                            "polyline": {
                                "points": "edeeIlywLAsGAgA@}D@m@@{EFqGHcG?]LmGHaFDyD@gB?sC?oDIw@?i@AuACoCKiGWcNe@mQKcEK}DASAe@C{AAcAAq@?_B?mABkALkCFgBF[LsCp@sQFyADmALkDj@wNx@_U@wA"
                            },
                            "travel_mode": "DRIVING",
                            "start_location": {
                                "lng": -2.25703,
                                "lat": 53.44339
                            }
                        },
                        {
                            "html_instructions": "Continue straight onto <b>Moseley Rd/B5093</b><div style=\"font-size:0.9em\">Continue to follow Moseley Rd</div><div style=\"font-size:0.9em\">Go through 1 roundabout</div>",
                            "duration": {
                                "value": 100,
                                "text": "2 mins"
                            },
                            "distance": {
                                "value": 974,
                                "text": "0.6 mi"
                            },
                            "end_location": {
                                "lng": -2.20411,
                                "lat": 53.44213000000001
                            },
                            "polyline": {
                                "points": "i_eeIvhpLDsA@a@Ba@D{@JgAPsAVgBHi@De@Fe@Bc@Bk@D{@@_A?qAB}I?gA@oDBmJ@qD?g@@gGBgD@[?Q?MA[AUG]A??AA??AA??AA??A?AA??A?A?AAA?A?A?A?A?A?A?A@??A?A?A@A?A@??A@A@A@?@AYiE"
                            },
                            "travel_mode": "DRIVING",
                            "start_location": {
                                "lng": -2.21852,
                                "lat": 53.44261
                            }
                        },
                        {
                            "html_instructions": "At the roundabout, take the <b>2nd</b> exit onto <b>Kingsway/A34</b>",
                            "duration": {
                                "value": 63,
                                "text": "1 min"
                            },
                            "distance": {
                                "value": 694,
                                "text": "0.4 mi"
                            },
                            "end_location": {
                                "lng": -2.20629,
                                "lat": 53.43661
                            },
                            "polyline": {
                                "points": "i|deItnmLC?AAA?AAAAA?AA?AACAAAAAC?AAC?AAC?C?C?CAA?C?C@C?C?A?C@C?C@A?C@A@C?A@A@A@A@A@A@?@A@?@A@?@?B?@@@?@@@?@@@??@@@@@?@@@@@?@@@?@?@@@b@V^VZHDBHBf@Rv@ZLD`@NJDB@h@RrFvBLDhGxBjFdB"
                            },
                            "travel_mode": "DRIVING",
                            "start_location": {
                                "lng": -2.20411,
                                "lat": 53.44213000000001
                            }
                        },
                        {
                            "html_instructions": "Turn <b>left</b> onto <b>Grangethorpe Dr</b>",
                            "duration": {
                                "value": 56,
                                "text": "1 min"
                            },
                            "distance": {
                                "value": 415,
                                "text": "0.3 mi"
                            },
                            "end_location": {
                                "lng": -2.20015,
                                "lat": 53.43616
                            },
                            "polyline": {
                                "points": "yyceIh|mL\\aCBUBa@RcCFc@FcAHiB@MReRM}@AI"
                            },
                            "travel_mode": "DRIVING",
                            "start_location": {
                                "lng": -2.20629,
                                "lat": 53.43661
                            }
                        },
                        {
                            "html_instructions": "Continue onto <b>Crossley Rd</b>",
                            "duration": {
                                "value": 45,
                                "text": "1 min"
                            },
                            "distance": {
                                "value": 394,
                                "text": "0.2 mi"
                            },
                            "end_location": {
                                "lng": -2.19433,
                                "lat": 53.43562000000001
                            },
                            "polyline": {
                                "points": "_wceI|ulLGyCBY@GJs@L}@BaA?GFqCBiBDkB@CLkBPkBRsCF{@"
                            },
                            "travel_mode": "DRIVING",
                            "start_location": {
                                "lng": -2.20015,
                                "lat": 53.43616
                            }
                        },
                        {
                            "html_instructions": "Turn <b>right</b> onto <b>Errwood Rd</b>",
                            "duration": {
                                "value": 60,
                                "text": "1 min"
                            },
                            "distance": {
                                "value": 607,
                                "text": "0.4 mi"
                            },
                            "end_location": {
                                "lng": -2.19615,
                                "lat": 53.43027000000001
                            },
                            "polyline": {
                                "points": "ssceIpqkL`GtA`B`@xCt@z@Th@H|EnAjFlA"
                            },
                            "travel_mode": "DRIVING",
                            "start_location": {
                                "lng": -2.19433,
                                "lat": 53.43562000000001
                            }
                        },
                        {
                            "html_instructions": "Take the 2nd <b>left</b> onto <b>Watford Rd</b>",
                            "duration": {
                                "value": 12,
                                "text": "1 min"
                            },
                            "distance": {
                                "value": 83,
                                "text": "272 ft"
                            },
                            "end_location": {
                                "lng": -2.19492,
                                "lat": 53.4301
                            },
                            "polyline": {
                                "points": "erbeI||kL`@uF"
                            },
                            "travel_mode": "DRIVING",
                            "start_location": {
                                "lng": -2.19615,
                                "lat": 53.43027000000001
                            }
                        },
                        {
                            "html_instructions": "Turn <b>left</b> onto <b>Eastern Cir</b>",
                            "duration": {
                                "value": 20,
                                "text": "1 min"
                            },
                            "distance": {
                                "value": 65,
                                "text": "213 ft"
                            },
                            "end_location": {
                                "lng": -2.19415,
                                "lat": 53.43037
                            },
                            "polyline": {
                                "points": "cqbeIfukLWWIMKUG_@AU@g@"
                            },
                            "travel_mode": "DRIVING",
                            "start_location": {
                                "lng": -2.19492,
                                "lat": 53.4301
                            }
                        },
                        {
                            "html_instructions": "Take the 2nd <b>left</b> onto <b>Ealing Pl</b>",
                            "duration": {
                                "value": 13,
                                "text": "1 min"
                            },
                            "distance": {
                                "value": 16,
                                "text": "52 ft"
                            },
                            "end_location": {
                                "lng": -2.19414,
                                "lat": 53.43052
                            },
                            "polyline": {
                                "points": "yrbeIlpkL]A"
                            },
                            "travel_mode": "DRIVING",
                            "start_location": {
                                "lng": -2.19415,
                                "lat": 53.43037
                            }
                        }
                    ]
                }
            ],
            "warnings": [],
            "overview_polyline": {
                "points": "ctfeIh|yLxDqHp@uAHYB_@E{EGgJQwSOoIbAVp@?TIXKhAy@`@MfCA`GKhB?jGM`HKC{ILyUHaHVoNFaH?cIIw@?i@EeFc@mVq@qWSsICcHPwEFgBF[~@gVLgDx@cTx@_U@wAFuBH}A\\{C`@qCLkAFoAF{BBoLFwW@oHDcECqAK_@CCCM?G@E@GDEBAYiEC?CACCEGEICMAMD[BKFGFCHAFBDDDF@Fd@X^VZHNF~An@~@\\|GjCvG~BjFdB\\aCFw@ZgDPmDTsROgAGyCBYL{@L}@BaAFyCHuENoBd@_GF{@`GtAzFvAdB^|EnAjFlA`@uFWWUc@Iu@@g@]A"
            },
            "copyrights": "Map data ©2013 Google"
        }
    ]
} 
```

请帮忙，我真的在这里迷路了。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-20T23:59:45.587

看看我在一篇文章中提供的这段代码，用于从 Google Direction API 创建折线，如果你想从其他来源获取数据，你可以更改获取数据的类，但这就是你的做法。创建一个负责获取方向和解析的类：

```
public class GMapV2Direction {
public final static String MODE_DRIVING = "driving";
public final static String MODE_WALKING = "walking";

public GMapV2Direction() { }

public Document getDocument(LatLng start, LatLng end, String mode) {
    String url = "http://maps.googleapis.com/maps/api/directions/xml?" 
            + "origin=" + start.latitude + "," + start.longitude  
            + "&destination=" + end.latitude + "," + end.longitude 
            + "&sensor=false&units=metric&mode="+ mode;

    try {
        HttpClient httpClient = new DefaultHttpClient();
        HttpContext localContext = new BasicHttpContext();
        HttpPost httpPost = new HttpPost(url);
        HttpResponse response = httpClient.execute(httpPost, localContext);
        InputStream in = response.getEntity().getContent();
        DocumentBuilder builder = DocumentBuilderFactory.newInstance().newDocumentBuilder();
        Document doc = builder.parse(in);
        return doc;
    } catch (Exception e) {
        e.printStackTrace();
    }
    return null;
}

public String getDurationText (Document doc) {
    NodeList nl1 = doc.getElementsByTagName("duration");
    Node node1 = nl1.item(0);
    NodeList nl2 = node1.getChildNodes();
    Node node2 = nl2.item(getNodeIndex(nl2, "text"));
    Log.i("DurationText", node2.getTextContent());
    return node2.getTextContent();
}

public int getDurationValue (Document doc) {
    NodeList nl1 = doc.getElementsByTagName("duration");
    Node node1 = nl1.item(0);
    NodeList nl2 = node1.getChildNodes();
    Node node2 = nl2.item(getNodeIndex(nl2, "value"));
    Log.i("DurationValue", node2.getTextContent());
    return Integer.parseInt(node2.getTextContent());
}

public String getDistanceText (Document doc) {
    NodeList nl1 = doc.getElementsByTagName("distance");
    Node node1 = nl1.item(0);
    NodeList nl2 = node1.getChildNodes();
    Node node2 = nl2.item(getNodeIndex(nl2, "text"));
    Log.i("DistanceText", node2.getTextContent());
    return node2.getTextContent();
}

public int getDistanceValue (Document doc) {
    NodeList nl1 = doc.getElementsByTagName("distance");
    Node node1 = nl1.item(0);
    NodeList nl2 = node1.getChildNodes();
    Node node2 = nl2.item(getNodeIndex(nl2, "value"));
    Log.i("DistanceValue", node2.getTextContent());
    return Integer.parseInt(node2.getTextContent());
}

public String getStartAddress (Document doc) {
    NodeList nl1 = doc.getElementsByTagName("start_address");
    Node node1 = nl1.item(0);
    Log.i("StartAddress", node1.getTextContent());
    return node1.getTextContent();
}

public String getEndAddress (Document doc) {
    NodeList nl1 = doc.getElementsByTagName("end_address");
    Node node1 = nl1.item(0);
    Log.i("StartAddress", node1.getTextContent());
    return node1.getTextContent();
}

public String getCopyRights (Document doc) {
    NodeList nl1 = doc.getElementsByTagName("copyrights");
    Node node1 = nl1.item(0);
    Log.i("CopyRights", node1.getTextContent());
    return node1.getTextContent();
}

public ArrayList<LatLng> getDirection (Document doc) {
    NodeList nl1, nl2, nl3;
    ArrayList<LatLng> listGeopoints = new ArrayList<LatLng>();
    nl1 = doc.getElementsByTagName("step");
    if (nl1.getLength() > 0) {
        for (int i = 0; i < nl1.getLength(); i++) {
            Node node1 = nl1.item(i);
            nl2 = node1.getChildNodes();

            Node locationNode = nl2.item(getNodeIndex(nl2, "start_location"));
            nl3 = locationNode.getChildNodes();
            Node latNode = nl3.item(getNodeIndex(nl3, "lat"));
            double lat = Double.parseDouble(latNode.getTextContent());
            Node lngNode = nl3.item(getNodeIndex(nl3, "lng"));
            double lng = Double.parseDouble(lngNode.getTextContent());
            listGeopoints.add(new LatLng(lat, lng));

            locationNode = nl2.item(getNodeIndex(nl2, "polyline"));
            nl3 = locationNode.getChildNodes();
            latNode = nl3.item(getNodeIndex(nl3, "points"));
            ArrayList<LatLng> arr = decodePoly(latNode.getTextContent());
            for(int j = 0 ; j < arr.size() ; j++) {
                listGeopoints.add(new LatLng(arr.get(j).latitude, arr.get(j).longitude));
            }

            locationNode = nl2.item(getNodeIndex(nl2, "end_location"));
            nl3 = locationNode.getChildNodes();
            latNode = nl3.item(getNodeIndex(nl3, "lat"));
            lat = Double.parseDouble(latNode.getTextContent());
            lngNode = nl3.item(getNodeIndex(nl3, "lng"));
            lng = Double.parseDouble(lngNode.getTextContent());
            listGeopoints.add(new LatLng(lat, lng));
        }
    }

    return listGeopoints;
}

private int getNodeIndex(NodeList nl, String nodename) {
    for(int i = 0 ; i < nl.getLength() ; i++) {
        if(nl.item(i).getNodeName().equals(nodename))
            return i;
    }
    return -1;
}

private ArrayList<LatLng> decodePoly(String encoded) {
    ArrayList<LatLng> poly = new ArrayList<LatLng>();
    int index = 0, len = encoded.length();
    int lat = 0, lng = 0;
    while (index < len) {
        int b, shift = 0, result = 0;
        do {
            b = encoded.charAt(index++) - 63;
            result |= (b & 0x1f) << shift;
            shift += 5;
        } while (b >= 0x20);
        int dlat = ((result & 1) != 0 ? ~(result >> 1) : (result >> 1));
        lat += dlat;
        shift = 0;
        result = 0;
        do {
            b = encoded.charAt(index++) - 63;
            result |= (b & 0x1f) << shift;
            shift += 5;
        } while (b >= 0x20);
        int dlng = ((result & 1) != 0 ? ~(result >> 1) : (result >> 1));
        lng += dlng;

        LatLng position = new LatLng((double) lat / 1E5, (double) lng / 1E5);
        poly.add(position);
    }
    return poly;
}
} 
```

创建一个 getDirections `AsyncTask`：

```
public class GetDirectionsAsyncTask extends AsyncTask<Map<String, String>, Object, ArrayList<LatLng>> {

public static final String USER_CURRENT_LAT = "user_current_lat";
public static final String USER_CURRENT_LONG = "user_current_long";
public static final String DESTINATION_LAT = "destination_lat";
public static final String DESTINATION_LONG = "destination_long";
public static final String DIRECTIONS_MODE = "directions_mode";
private MapFragmentActivity activity;
private String url;

private Exception exception;

private Dialog progressDialog;

public GetDirectionsAsyncTask(MapFragmentActivity activity /*String url*/) 
{
    super();
    this.activity = activity;

    //  this.url = url;
}

public void onPreExecute() {
    progressDialog = DialogUtils.createProgressDialog(activity, activity.getString(R.string.get_data_dialog_message));
    progressDialog.show();
}

@Override
public void onPostExecute(ArrayList<LatLng> result) {
    progressDialog.dismiss();

    if (exception == null) {
        activity.handleGetDirectionsResult(result);
    } else {
        processException();
    }
}

@Override
protected ArrayList<LatLng> doInBackground(Map<String, String>... params) {

    Map<String, String> paramMap = params[0];
    try{
        LatLng fromPosition = new LatLng(Double.valueOf(paramMap.get(USER_CURRENT_LAT)) , Double.valueOf(paramMap.get(USER_CURRENT_LONG)));
        LatLng toPosition = new LatLng(Double.valueOf(paramMap.get(DESTINATION_LAT)) , Double.valueOf(paramMap.get(DESTINATION_LONG)));
        GMapV2Direction md = new GMapV2Direction();
        Document doc = md.getDocument(fromPosition, toPosition, paramMap.get(DIRECTIONS_MODE));
        ArrayList<LatLng> directionPoints = md.getDirection(doc);
        return directionPoints;

    }
    catch (Exception e) {
        exception = e;
        return null;
    }
}

private void processException() {
    Toast.makeText(activity, activity.getString(R.string.error_when_retrieving_data), 3000).show();
}

} 
```

在您`Activity`创建这两种方法时：

```
public void handleGetDirectionsResult(ArrayList<LatLng> directionPoints)
{
    Polyline newPolyline;
    GoogleMap mMap = ((SupportMapFragment)getSupportFragmentManager().findFragmentById(R.id.map)).getMap(); 
    PolylineOptions rectLine = new PolylineOptions().width(3).color(Color.RED);

    for(int i = 0 ; i < directionPoints.size() ; i++) 
    {          
        rectLine.add(directionPoints.get(i));
    }
    newPolyline = mMap.addPolyline(rectLine);
}

public void findDirections(double fromPositionDoubleLat, double fromPositionDoubleLong, double toPositionDoubleLat, double toPositionDoubleLong, String mode)
{
    Map<String, String> map = new HashMap<String, String>();
    map.put(GetDirectionsAsyncTask.USER_CURRENT_LAT, String.valueOf(fromPositionDoubleLat));
    map.put(GetDirectionsAsyncTask.USER_CURRENT_LONG, String.valueOf(fromPositionDoubleLong));
    map.put(GetDirectionsAsyncTask.DESTINATION_LAT, String.valueOf(toPositionDoubleLat));
    map.put(GetDirectionsAsyncTask.DESTINATION_LONG, String.valueOf(toPositionDoubleLong));
    map.put(GetDirectionsAsyncTask.DIRECTIONS_MODE, mode);

    GetDirectionsAsyncTask asyncTask = new GetDirectionsAsyncTask(this);
    asyncTask.execute(map); 
} 
```

最后运行这个方法来创建`Polyline`：

```
findDirections(AppObj.getInstance().currentUserLocation.getLatitude(),
                                                   AppObj.getInstance().currentUserLocation.getLongitude(),
                                                   clickMarkerLatLng.latitude, clickMarkerLatLng.longitude, GMapV2Direction.MODE_DRIVING ); 
```

# javascript - 将 iframe 中的 javascript 与同一域完全隔离

> ID：16125869
> 
> 赞同：2
> 
> 时间：2013-04-20T22:34:28.663
> 
> 标签：javascript, iframe

假设我们有一个窗口和一个 iframe，里面有一些 javascript。iframe 源代码直接在 iframe 的“srcdoc”属性中定义。

是否有可能以某种方式强制浏览器表现得像从另一个域加载 iframe 一样？

我的意思是我不希望 iframe 中的 javascript 能够通过“window.parent”或类似的方式访问主窗口，因为 iframe 内容不受信任。但问题是它存储在同一个域中，我什至想使用相同的请求来加载主窗口和 iframe 内容（使用“srcdoc”属性）。

那么有可能吗？

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-20T22:46:07.697

您可以在字符串前面添加：

```
"<script> parent = top = null; </script>" 
```

到 srcdoc。这应该可以防止 srcdoc 表单中的其余代码通过`window.parent`and访问父级`window.top`。

我不确定是否有任何其他方法可以访问 iframe 的父级。

# c# - 决定 RichTextBox 的字体样式（粗体、斜体、下划线）

> ID：16125870
> 
> 赞同：2
> 
> 时间：2013-04-20T22:34:32.537
> 
> 标签：c#, wpf, richtextbox

您究竟如何更改 RichTextBox 中的字体？

环顾四周给了我似乎不再起作用的旧答案。我认为这就像做`richtextbox1.Font = Font.Bold;`或类似的事情一样简单。原来不是，所以我环顾四周。显然您必须更改`FontStyle`which is a `readonly`(??) 属性，但您必须创建一个新`FontStyle`对象。

但即使那样也行不通

你怎么做到这一点？编辑：

似乎不起作用：\

```
 rssTextBox.Document.Blocks.Clear();
            rssTextBox.FontWeight = FontWeights.Bold;
            rssTextBox.AppendText("Title: ");
            rssTextBox.FontWeight = FontWeights.Normal;
            rssTextBox.AppendText(rs.Title + "\n");
            rssTextBox.FontWeight = FontWeights.Bold;
            rssTextBox.AppendText("Publication Date: ");
            rssTextBox.FontWeight = FontWeights.Normal;
            rssTextBox.AppendText(rs.PublicationDate + "\n");
            rssTextBox.FontWeight = FontWeights.Bold;
            rssTextBox.AppendText("Description: ");
            rssTextBox.FontWeight = FontWeights.Normal;
            rssTextBox.AppendText(rs.Description + "\n\n"); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-20T22:46:27.253

`Bold`是一个`FontWeight`。你可以直接申请。

正如[MSDN Doc](http://msdn.microsoft.com/en-us/library/system.windows.controls.control.fontweight.aspx)所述，“获取或设置指定字体的粗细或粗细”。

您可以在 xaml 中设置它

```
<RichTextBox FontWeight="Bold" x:Name="richText" /> 
```

或在代码隐藏中：

```
richText.FontWeight = FontWeights.Bold; 
```

如果您尝试切换`FontFamily`，就像：

```
richText.FontFamily = new FontFamily("Arial"); 
```

或`FontStyle`：

```
richText.FontStyle = FontStyles.Italic; 
```

**更新**：（用于更新`RichTextBox`内联）

这只是一个快速的模型。以此为例。请根据您的要求构建它。

```
richText.Document.Blocks.Clear();
Paragraph textParagraph = new Paragraph();
AddInLineBoldText("Title: ", ref textParagraph);
AddNormalTextWithBreak(rs.Title, ref textParagraph);
AddInLineBoldText("Publication Date: ", ref textParagraph);
AddNormalTextWithBreak(rs.PublicationDate, ref textParagraph);
AddInLineBoldText("Description: ", ref textParagraph);
AddNormalTextWithBreak(rs.Description, ref textParagraph);
AddNormalTextWithBreak("", ref textParagraph);
richText.Document.Blocks.Add(textParagraph);

private static void AddInLineBoldText(string text, ref Paragraph paragraph) {
  Bold myBold = new Bold();
  myBold.Inlines.Add(text);
  paragraph.Inlines.Add(myBold);
}

private static void AddNormalTextWithBreak(string text, ref Paragraph paragraph) {
  Run myRun = new Run {Text = text + Environment.NewLine};
  paragraph.Inlines.Add(myRun);
} 
```

# python - python中从float到int的显式类型转换过程

> ID：16125871
> 
> 赞同：0
> 
> 时间：2013-04-20T22:34:37.903
> 
> 标签：python

我正在编写一个程序，该程序允许我以天为单位计算一个人的年龄——计算每一天，包括闰日和不规则的天数。这是一行代码：

```
number_of_days = (((year2 - year1) * 12) + (month2 - month1)) * 30.4375 + (day2 - day1) 
```

我`30.4375`通过除以`365.25`得到值`12`。

现在我只需要将整数部分存储在`number_of_days`. 我怎么做？

非常感谢您的帮助！

PS所有变量值都是int值

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-20T22:35:51.353

您可以使用`int`：

```
number_of_days = int((((year2 - year1) * 12) + (month2 - month1)) * 30.4375 + (day2 - day1)) 
```

或`math.floor`：

```
import math

number_of_days = math.floor((((year2 - year1) * 12) + (month2 - month1)) * 30.4375 + (day2 - day1)) 
```

但随后`number_of_days`将是 a `float`，所以我认为第一个解决方案更好。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-20T22:35:56.327

只需致电`int`：

```
number_of_days = int((((year2 - year1) * 12) + (month2 - month1)) * 30.4375 + (day2 - day1)) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-20T22:53:08.443

如果您的目标是计算日期之间的天数，您可以使用 datetime 模块：

```
import datetime
birth = datetime.date(1967,11,14)
today = datetime.date.today()

number_of_days = (today - birth).days 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-04-20T22:43:30.780

考虑使用 round 而不是转换更准确：

```
import math
int(math.round((((year2 - year1) * 12) + (month2 - month1)) * 30.4375 + (day2 - day1))) 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-04-20T22:37:47.597

你能用地板功能吗？

```
number_of_days = math.floor((((year2 - year1) * 12) + (month2 - month1)) * 30.4375 + (day2 - day1)) 
```

# javascript - AngularJS：为什么 ng-bind 在角度上比 {{}} 更好？

> ID：16125872
> 
> 赞同：409
> 
> 时间：2013-04-20T22:34:44.507
> 
> 标签：javascript, angularjs, ng-bind

我参加了一次有角度的演讲，会议中提到的一位人`ng-bind`比`{{}}`绑定更好。

一个原因，`ng-bind`将变量放在观察列表中，只有当模型发生变化时才会推送数据以查看，另一方面，`{{}}`每次都会插入表达式（我猜是角循环）并推送值，即使值改变与否。

也有人说，如果您在屏幕上没有太多数据，您可以使用`{{}}`并且性能问题将不可见。有人可以为我解释一下这个问题吗？

* * *

## 回答 #1

> 赞同：545
> 
> 时间：2014-04-30T07:43:44.623

**能见度：**

当您的 angularjs 正在引导时，用户可能会在 html 中看到您放置的括号。这可以用`ng-cloak`. 但对我来说，这是一种解决方法，如果我使用`ng-bind`.

* * *

**表现：**

`{{}}`速度**要慢**得多。

这`ng-bind`是一个*指令*，将在传递的变量上放置一个观察者。所以只有当**传递的值确实改变**`ng-bind`时才会适用。

 **另一方面，即使**没有必要，括号也会在****每个中进行****脏检查**和刷新。 **`$digest`**

 ***** * *

我目前正在构建一个大型单页应用程序（每个视图约 500 个绑定）。从 {{}} 更改为 strict`ng-bind`确实为我们节省了大约 20% 的`scope.$digest`.

* * *

**建议**：

如果您使用诸如*angular-translate*之类的翻译模块，请始终在括号注释之前使用*指令。*

`{{'WELCOME'|translate}}` =>`<span ng-translate="WELCOME"></span>`

如果您需要过滤器功能，最好选择一个指令，它实际上只使用您的自定义过滤器。 [$filter 服务的文档](https://docs.angularjs.org/api/ng/service/$filter)

* * *

**更新 28.11.2014**（但可能偏离主题）：

在 Angular 1.3x`bindonce`中引入了该功能。因此，您可以绑定一次表达式/属性的值（将在 != 'undefined' 时绑定）。

当您不希望绑定更改时，这很有用。

用法：`::`装订前放置：

```
<ul>  
  <li ng-repeat="item in ::items">{{item}}</li>
</ul>  
<a-directive name="::item">
<span data-ng-bind="::value"></span> 
```

例子：

`ng-repeat`输出表中的一些数据，每行有多个绑定。翻译绑定，过滤输出，在每个作用域摘要中执行。

* * *

## 回答 #2

> 赞同：324
> 
> 时间：2013-04-20T23:10:29.627

如果您不使用`ng-bind`，请改为：

```
<div>
  Hello, {{user.name}}
</div> 
```

您可能会在解决之前看到实际`Hello, {{user.name}}`的一秒钟`user.name`（在加载数据之前）

你可以做这样的事情

```
<div>
  Hello, <span ng-bind="user.name"></span>
</div> 
```

如果这对你来说是个问题。

另一种解决方案是使用[`ng-cloak`](https://docs.angularjs.org/api/ng/directive/ngCloak).

* * *

## 回答 #3

> 赞同：29
> 
> 时间：2014-04-08T16:02:46.167

`ng-bind`好于`{{...}}`

例如，您可以这样做：

```
<div>
  Hello, {{variable}}
</div> 
```

这意味着包含的整个文本**`Hello, {{variable}}`**将`<div>`被复制并存储在内存中。

相反，如果您执行以下操作：

```
<div>
  Hello, <span ng-bind="variable"></span>
</div> 
```

只有值的值将存储在内存中，并且 angular 将注册一个仅由变量组成的观察者（观察表达式）。

* * *

## 回答 #4

> 赞同：15
> 
> 时间：2013-04-20T23:10:54.637

基本上，双花括号语法更自然地可读并且需要更少的输入。

两种情况都会产生相同的输出，但是.. 如果您选择使用，则用户有可能会在您的模板被 Angular 渲染之前`{{}}`看到几毫秒。`{{}}`因此，如果您注意到任何`{{}}`那么最好使用`ng-bind`.

同样非常重要的是，只有在您的角度应用程序的 index.html 中，您才能拥有 un-rendered `{{}}`。如果您使用的是指令，那么模板，则没有机会看到这一点，因为角度首先渲染模板，然后将其附加到 DOM。

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2017-03-15T10:35:55.917

`{{...}}`是指双向数据绑定。但是，**ng-bind**实际上是用于单向数据绑定。

使用**ng-bind**将减少页面中的观察者数量。因此**ng-bind**将比`{{...}}`. 因此，如果您只想显示一个值及其更新，并且不想将其从 UI 的更改反映回控制器，那么请使用**ng-bind**。这将提高页面性能并减少页面加载时间。

```
<div>
  Hello, <span ng-bind="variable"></span>
</div> 
```

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2014-10-23T02:28:01.997

这是因为`{{}}`角度编译器同时考虑了文本节点和它的父节点，因为有可能合并 2`{{}}`个节点。因此，有额外的链接器会增加加载时间。当然，对于少数这样的情况，差异并不重要，但是当您在大量项目的转发器中使用它时，它会在较慢的运行时环境中产生影响。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2017-07-31T10:19:54.307

[![在此处输入图像描述](https://i.stack.imgur.com/02neu.jpg)](https://i.stack.imgur.com/02neu.jpg)

Ng-Bind 之所以更好，是因为，

当您的页面未加载或您的互联网速度较慢或您的网站加载一半时，您会看到这些类型的问题*（检查带有读取标记的屏幕截图）*将在屏幕上触发，这非常奇怪。为了避免这种情况，我们应该使用 Ng-bind

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2016-05-25T21:02:52.660

**ng-bind**也有它的问题。当你尝试使用 angular **filters**，**limit**或其他东西时，如果你使用**ng-bind** ，你可能会遇到问题。但在其他情况下，**ng-bind**在**UX**方面更好。当用户打开页面时，他/她会看到（10ms-100ms）打印符号（**{{ ... }}**），这就是为什么 ng-bind 更好.

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2016-11-09T08:48:10.870

{{ }} 中存在一些闪烁的问题，例如当您刷新页面时，会看到很短的垃圾邮件时间表达式。所以我们应该使用 ng-bind 而不是表达式来进行数据描述。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2017-04-03T07:17:58.883

你可以参考这个网站，它会给你一个解释哪个更好，因为我知道 {{}} 这比 ng-bind 慢。

[http://corpus.hubwiz.com/2/angularjs/16125872.html](http://corpus.hubwiz.com/2/angularjs/16125872.html) 参考这个网站。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2016-10-31T15:26:56.517

`ng-bind`也更安全，因为它表示`html`为字符串。

因此例如，`'<script on*=maliciousCode()></script>'`将显示为字符串而不被执行。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2017-03-22T13:46:02.097

**根据 Angular Doc：**
由于**ngBind**是一个元素属性，它使绑定在页面加载时对用户不可见......这是主要区别......

基本上直到每个**dom**元素都没有加载，我们看不到它们，因为**ngBind**是元素上的属性，它等到 dom 开始发挥作用......**下面的更多信息**

**ngBind**
*- 模块 ng 中*

的指令**ngBind 属性**告诉**AngularJS**将指定 HTML 元素的文本内容替换为给定表达式的值，并在该表达式的值更改时更新文本内容。

通常，**您不直接使用 ngBind**，而是使用类似于**{{ expression }}**的双卷曲标记，它类似但不那么冗长。

如果在 AngularJS 编译模板之前浏览器暂时以原始状态显示模板，则最好使用 ngBind 而不是 {{ expression }}。由于 ngBind 是一个元素属性，它使绑定在页面加载时对用户不可见。

这个问题的**另一种解决方案**是使用**ngCloak**指令。[访问这里](https://docs.angularjs.org/api/ng/directive/ngCloak)

有关**ngbind**的更多信息，请访问此页面：[https ://docs.angularjs.org/api/ng/directive/ngBind](https://docs.angularjs.org/api/ng/directive/ngBind)

你可以做这样的事情作为属性，**ng-bind**：

```
<div ng-bind="my.name"></div> 
```

或进行如下插值：

```
<div>{{my.name}}</div> 
```

或者在 AngularJs 中使用 ng-cloak 属性：

```
<div id="my-name" ng-cloak>{{my.name}}</div> 
```

ng-cloak 避免在 dom 上闪烁并等待一切准备就绪！这等于**ng-bind**属性...******

# php - PHP登录检查或重定向

> ID：16125874
> 
> 赞同：-1
> 
> 时间：2013-04-20T22:34:55.810
> 
> 标签：php, redirect, login

我正在尝试创建一个检查登录，或者如果用户已登录，它会将用户重定向到主页。现在的问题是它强制用户登录到 login_forum.php 页面，但是当我尝试登录时，它只是重置表单并且不会重定向到 home.php 页面。

主页.php

```
<?PHP

session_start();

if (!(isset($_SESSION['login']) && $_SESSION['login'] != '')) 
{

header ("Location: login_form.php");

}

else
{
header ("Location: home.php");
}

?> 
```

这有什么问题吗？哪个文件会有问题？

检查用户.php

```
if($login_check > 0){
while($row = mysql_fetch_array($sql)){
foreach( $row AS $key => $val ){
$$key = stripslashes( $val );
}
// Register some session variables!
session_register('first_name');
$_SESSION['first_name'] = $first_name;
session_register('last_name');
$_SESSION['last_name'] = $last_name;
session_register('email_address');
$_SESSION['email_address'] = $email_address;
session_register('phone_number');
$_SESSION['phone_number'] = $phone_number;
session_register('address');
$_SESSION['address'] = $address;

mysql_query("UPDATE abnc_users SET last_login=now() WHERE userid='$userid'");

header("Location: home.php"); 
```

我一直在研究，这可能是个问题吗？

login_form.php

```
<form action="checkuser.php" method="post" name="" id=""> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T23:02:42.950

还需要设置`$_SESSION['login']`... 示例：

```
$_SESSION['login'] = 1; 
```

# php - 一个表中的用户数据，与另一个表相关吗？

> ID：16125875
> 
> 赞同：1
> 
> 时间：2013-04-20T22:35:01.460
> 
> 标签：php, mysql, function, join

我想创建一个获取表数据的函数，其中第一个表中的用户名与`users`第二个表中的所有者相同`pets`。我希望能够使用`$pet_data['fieldname']`或来回忆该字段中的任何项目`pet_data['fieldname']`一般答案会很好，因为我可以编辑代码 xD 这是我的 user_data 函数，我试图应用我想要的，但没有工作：

```
function user_data($user_id) {
  $data = array();
  $user_id = (int)$user_id;
  $func_num_args = func_num_args();
   $func_get_args = func_get_args();
  if ($func_num_args > 1) {
    unset($func_get_args[0]);
    $fields = '`' . implode('`, `', $func_get_args) . '`';
    $data = mysql_fetch_assoc(mysql_query("SELECT $fields FROM `users` WHERE `user_id` = $user_id"));
    return $data;
  }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T00:16:21.200

用这个替换你的查询：

```
SELECT $fields FROM `users`, `pets`
WHERE `user_id` = $user_id
AND `owner` = $user_id 
```

`$fields`可能包含来自`users`或的列名`pets`。如果列名有歧义，则必须通过完全限定它们来解决它们（例如。`users.user_id`）。

这是您的代码的可能更新：

```
$fields = '`' . implode('`, `', $func_get_args) . '`';
$data = mysql_query("SELECT $fields FROM `users`, `pets` WHERE `user_id` = $user_id AND `owner` = $user_id");
if ($data === false) {
    die("error on mysql_query: ". mysql_error());
}
$data = mysql_fetch_assoc($data); 
```

# php - SQL QUERY 选择禁止列表，孩子和父亲加入

> ID：16125879
> 
> 赞同：0
> 
> 时间：2013-04-20T22:35:32.323
> 
> 标签：php, mysql, sql, database

好吧，我已经建立了以下表格（仅涉及列）

表论坛：

```
编号 | 论坛名称 | 相关
------------------------------
1 | 游戏 | 0
2 | 动作游戏 | 1 // 论坛游戏子论坛
3 | 角色扮演游戏 | 1 // 论坛游戏子论坛

```

表禁令

```
编号 | 用户援助 | 论坛ID
----------------------
1 | 56 | 1 // 用户 56 被论坛游戏禁止

```

我要做的是构建一个函数来查看用户是否被论坛 X 禁止，如果他被禁止，他认为与论坛 X 相关的论坛被禁止。例如：用户 56 也被禁止论坛 rpg游戏。

我写了以下没有用的查询：

```
    选择
    f.id,
    f. 相关的，
    b.useraid 为 u1，
    b2.useraid 作为 u2
    来自论坛 f
    LEFT JOIN banlist b ON(b.forumid=f.id and b.useraid='56')
    LEFT JOIN banlist b2 ON(b2.forumid=f.relatedto and b2.useraid='56')
    其中 f.id='2'

```

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T22:51:47.407

所以像...

```
SELECT f.* FROM forums f JOIN banlist b ON b.forumid = f.id OR b.forumid = f.parent_id; 
```

...？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-20T22:57:58.877

我认为您的查询非常接近，假设您希望在用户未被禁止时返回结果，并且在用户被禁止时不想返回结果：

```
SELECT *
FROM forums f
  LEFT JOIN banlist b ON f.id = b.forumid AND b.useraid = 56
  LEFT JOIN banlist b2 ON f.relatedto = b2.forumid AND b2.useraid = 56
WHERE b.id IS NULL 
  AND b2.id IS NULL
  AND f.id = 2 
```

[SQL 小提琴演示](http://sqlfiddle.com/#!2/c1ecdd/1)

您可能需要`OR`用于您的`IS NULL`检查 - 取决于您想要的结果（例如，如果孩子被禁止但父母不是）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-20T22:58:16.903

我找到了答案。

```
SELECT 
  f.id,
  count(b.id) AS isbanned
FROM forums f 
LEFT JOIN banlist b
  ON (
    (
      b.forumid = f.id OR b.forumid = f.relatedto
    )
    AND userid = '$userid'
  )
WHERE f.id = '$forumid' 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-20T23:36:31.773

要确定用户是否被禁止，您可以创建一个函数或一个过程，将其传递给用户帮助。

创建 proc userstatus @useraid int As IF (SELECT COUNT(*) FROM BANLIST WHERE USERAID = @USERAID) > 0 BEGIN PRINT” USER IS BANNED' ELSE PRINT “USER IS NOT BANNED” END

# google-app-engine - Go：如何将 struct 转换为 []byte？

> ID：16125886
> 
> 赞同：6
> 
> 时间：2013-04-20T22:36:01.560
> 
> 标签：google-app-engine, go

我正在尝试使用“appengine/memcache”将数据存储在缓存中，memcache.Item 的 Value 字段是 []byte

如何将结构转换为 []byte 来存储它？

例如：

```
type Link struct {
    Files []string
} 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-20T23:23:52.390

参见 memcache.Codec 类型，这可用于转换 memcache 项。appengine/memcache 包已经准备好两个编解码器，memcache.Gob 和 memcache.JSON。您可以使用这些编解码器而不是直接调用来从缓存中存储和检索项目，例如对于 gob 编码的项目如下所示：

```
 item := &memcache.Item{
        Key:    myCacheKey,
        Object: &myLinkVar,
    }
    err := memcache.Gob.Set(context, item) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-20T22:42:37.473

该`encoding/gob`软件包可能是您的最佳选择。

您也可以使用该`encoding/json`软件包。

如果您使用`encoding/json`，您将获得能够从 Go 以外的语言读取值的好处。

如果你使用`encoding/gob`你会得到更快的速度。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-05-12T02:40:58.323

您可以使用`gob#Encoder.Encode`：

```
package main

import (
   "bytes"
   "encoding/gob"
   "fmt"
)

type link struct {
   Files []string
}

func main() {
   s := link{
      []string{"south", "north"},
   }
   b := new(bytes.Buffer)
   gob.NewEncoder(b).Encode(s)
   // "\x1d\xff\x81\x03\x01\x01\x04link\x01\xff\x82\x00\x01\x01\x01\x05Files\x01\xff\x84\x00\x00\x00\x16\xff\x83\x02\x01\x01\b[]string\x01\xff\x84\x00\x01\f\x00\x00\x11\xff\x82\x01\x02\x05south\x05north\x00"
   fmt.Printf("%q\n", b)
} 
```

[https://golang.org/pkg/encoding/gob#Encoder.Encode](https://golang.org/pkg/encoding/gob#Encoder.Encode)

# php - PHP Mysql单选按钮选择

> ID：16125893
> 
> 赞同：1
> 
> 时间：2013-04-20T22:36:37.543
> 
> 标签：php, mysql

有人可以帮我吗，我正在尝试实施一个简单的 php MySQL 调查，但我被困在这个问题上，如何将特定选择存储在用户选择的 MySQL 中。

您的满意程度：

```
<table id="table1" rules="all" border="1" cellpadding="3" cellspacing="0" width="70%">
    <colgroup width="70%"></colgroup>
    <colgroup width="6%">
    </colgroup>
    <thead>
        <tr align="center">
           <th></th>
           <th font="" style="font-size:9pt;" size="2"><b>Dissatisfied</b></th>
           <th font="" style="font-size:9pt;" size="2"><b>Satisfied</b></th>
           <th font="" style="font-size:9pt;" size="2"><b>Very Satisfied</b></th> 
        </tr>
   </thead>
   <tbody>
       <tr align="center">
           <td align="left"><font style="font-size:10pt;"><b>Technician's ability to understand the unique nature of your problem?</b></font></td>
           <td><input name="satisfaction" value="Dissatisfied"  type="radio"></td>
           <td><input name="satisfaction" value="Satisfied"  type="radio"></td>
           <td><input name="satisfaction" value="Very Satisfied"  type="radio"></td>

       </tr>
       <tr align="center">
   </tbody>
</table> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-20T22:48:28.063

为此，您需要**一个表单**来提交数据选择。您将需要**两个 php 文件**

第一个是构建**单选按钮的形式**。我已经删除了表格的元素以获得整洁的视图，然后我们设置了第二页的 URL。如果你愿意，也可以是单个页面，但这更容易。

反馈.php

```
 <form action="add.php" method="post" accept-charset="utf-8">
     <input name="satisfaction" value="Dissatisfied"  type="radio">Dissatisfied<br>
     <input name="satisfaction" value="Satisfied"  type="radio">Satisfied<br>
     <input name="satisfaction" value="Very Satisfied"  type="radio">Very Satisfied<br>

     <input type='submit' value="submit">
</form> 
```

在第二页**中，我们捕捉到了我们从第一页发布的内容**。

添加.php

```
 $result= $_POST['satisfaction'];
  echo $result; 
```

使用 $result 存储在您的数据库中。祝你好运

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-20T22:49:10.287

很简单：

1，在表格标签之前添加这一行：

```
<form method="post" action=""> 
```

第二，这个在你的代码末尾：

```
<input type="submit" name="submit" value="Submit">
</form> 
```

然后，您可以将此代码插入数据库。

```
if ($stmt = $mysqli->prepare("INSERT INTO TABLENAME(COLUMN NAME) values (?)")) {
     $stmt->bind_param('s', $satisfaction);

    $satisfaction=$_POST['satisfaction'];

     $stmt->execute();

    $stmt->close();
} 
```

# amazon-web-services - 为 AWS S3 上托管的静态网站设置 Content-Type

> ID：16125897
> 
> 赞同：3
> 
> 时间：2013-04-20T22:36:54.780
> 
> 标签：amazon-web-services, amazon-s3, s3cmd

我在 S3 上托管一个静态网站。要将我的网站推送到亚马逊，我使用 s3cmd 命令行工具。除了将 Content-Type 设置为`text/html;charset=utf-8`.

我知道我可以在 HTML 文件的元标记中设置字符集，但我想避免它。

这是我正在使用的确切命令：

```
s3cmd --add-header='Content-Encoding':'gzip'
    --add-header='Content-Type':'text/html;charset=utf-8'
    put index.html.gz s3://www.example.com/index.html 
```

这是我得到的错误：

ERROR: S3 error: 403 (SignatureDoesNotMatch): 我们计算的请求签名与您提供的签名不匹配。检查您的密钥和签名方法。

如果我`;charset=utf-8`从上述命令中删除该部分，它可以工作，但 Content-Type 设置为`text/html`not `text/html;charset=utf-8`。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-04-25T16:08:50.703

解决您的问题的两步过程。

(1) 升级您的 S3cmd 安装。1.0.x 版没有设置字符集的能力。[从github 上的 master](https://github.com/s3tools/s3cmd)安装。Master 包含对这个 (1)[错误](https://github.com/s3tools/s3cmd/commit/615eed45d)和这个 (2)[错误](https://github.com/s3tools/s3cmd/commit/c8b44249)的修复，这些错误导致无法识别内容类型的格式以及早期版本中的“定义前调用”问题。

要在 OSX 上从 master 安装 s3cmd，请执行以下操作：

```
git clone https://github.com/s3tools/s3cmd.git
cd s3cmd/
sudo python setup.py install (sudo optional based on your setup) 
```

通过将以下内容添加到您的 .profile 或 .bashrc 或 .zshrc （同样，取决于您的系统），确保您的 python 库在您的路径中。

```
export PATH="/Library/Frameworks/Python.framework/Versions/2.7/bin:$PATH" 
```

但是如果您使用自制软件可能会导致冲突 - 只需符号链接到可执行文件。

```
ln -s /Library/Frameworks/Python.framework/Versions/2.7/bin/s3cmd /usr/local/bin/s3cmd 
```

关闭终端并重新打开。

```
s3cmd --version 
```

仍然会输出

```
s3cmd version 1.5.0-alpha3 - but its the patched version. 
```

(2) 升级后，使用：

```
s3cmd --acl-public --no-preserve --add-header="Content-Encoding:gzip" --add-header="Cache-Control:public, max-age=86400" --mime-type="text/html; charset=utf-8" put index.html s3://www.example.com/index.html 
```

如果上传成功并将 Content-Type 设置为 "text/html; charset=utf-8" 但您在此过程中看到此错误：

```
WARNING: Module python-magic is not available... 
```

我更喜欢没有 python-magic 的生活——我发现如果你不专门设置 mime-type，python-magic 经常会猜错。安装 python-magic 但一定要在 s3cmd 中设置 mime-type="application/javascript" 否则如果你在本地 gzip 你的 js，python-magic 会猜测它是 "application/x-gzip"。

安装 python-magic：

```
sudo pip install python-magic 
```

PIP 与最近的 OSX 升级中断，因此您可能需要更新 PIP：

```
sudo easy_install -U pip 
```

这样就可以了。所有这一切也适用于 S3cmd 同步 - 不仅仅是放。我建议您将 s3cmd sync 放入一个 thor 类型的任务中，这样您就不会忘记在任何特定文件上设置 mime 类型（如果您在 gzip 文件上使用 python-magic）。

[这是将静态中间人站点部署到 s3 的示例 thor 任务的要点。](https://gist.github.com/dpfranklin/5470776) 此任务允许您在本地重命名文件并使用 s3cmd sync 而不是使用 S3cmd put 一个接一个地重命名它们。

# .htaccess - 301 重定向适用于链接，但不适用于子域

> ID：16125899
> 
> 赞同：1
> 
> 时间：2013-04-20T22:37:21.317
> 
> 标签：.htaccess, redirect, subdomain

最近将站点从子域移到根域的子目录中。

`http://blog.domain.com`到`http://domain.com/blog`.

我将其放入我`.htaccess`的 at 中`http://blog.domain.com`，因此使用旧 URL 访问文章的用户将被相应地重定向。

```
Options +FollowSymLinks
RewriteEngine On
RewriteCond %{HTTP_REFERER} ^http://blog.\domain\.com
RewriteRule .* http://domain.com/blog [R=301,L] 
```

我无法弄清楚如何重定向`http://blog.domain.com`到`http://domain.com/blog`. 上面的代码片段没有这样做。任何见解将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T04:41:50.310

```
Options +FollowSymLinks
RewriteEngine On
RewriteCond %{HTTP_HOST} ^blog\.domain\.com$
RewriteRule ^(.*)$ http://domain.com/blog/$1 [L,R=301] 
```

# sql - 当至少一半的记录被评估为“Y”时选择数据

> ID：16125901
> 
> 赞同：0
> 
> 时间：2013-04-20T22:37:36.157
> 
> 标签：sql, oracle

我有这张桌子

```
evaluation([id_member, id_article], opinion) 
```

我尝试选择 id_article，而至少有一半的成员对“Y”发表了意见。

例如 ：

```
(1, 1, NULL)
(2, 1, NULL)
(1, 2, NULL)
(2, 2, 'Y') 
```

查询应选择文章 2（用于第二篇文章），因为两行之一包含“Y”。

我找不到怎么做！

`[]`表示`id_member`并`id_article`构成主键。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-20T22:56:13.673

如果意见是字符串：

```
SELECT id_article
FROM
Evaluation
GROUP BY id_article
HAVING
AVG(CASE OPINION WHEN 'Y' THEN 1.0 ELSE 0.0 END) >= 0.5 
```

如果意见是十进制的（假设为 0.0 或 1.0），那么

```
SELECT id_article
FROM
Evaluation
GROUP BY id_article
HAVING
AVG(Opinion) >= 0.5 
```

如果意见是整数（假设为 0 或 1），则

```
SELECT id_article
FROM
Evaluation
GROUP BY id_article
HAVING
AVG(Opinion*10) >= 5 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-20T22:44:58.830

这是使用having子句的绝佳机会。

```
select blah, blah, blah
from evaluation join other tables as required
where whatever
having (sum(opinion) / count(*)) * 100 > 50 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-21T07:57:37.767

这是一种使用低估的 ratio_to_report() 分析函数有效获取整行的方法：

```
select
  id_member,
  id_article,
  opinion
from   
  (select id_member,
          id_article,
          opinion,
          ratio_to_report(case when opinion 'Y' then 1 else 0 end)
            over (partition by id_article) rtr
   from   evaluation)
where
  rtr >= 0.5; 
```

# php - 比较两个数组以获取新数据的提示

> ID：16125903
> 
> 赞同：0
> 
> 时间：2013-04-20T22:37:43.463
> 
> 标签：php, arrays, merge, unique

我正在使用各种社交网络的 API，并且正在考虑一种模拟实时更新的方法。我知道一些 API 提供了这个，但它不适用于我构建这个网站的方式。

只是通过下面的示例寻找有关如何执行此操作的一些建议。

当访问该页面时，用户正在从 5 个不同的社交网站获取数据。一切 5 分钟该站点将调用获取数据的功能。想我会用 jQuery 和 AJAX 来做这件事。每个社交网站的每个数据集都放入一个数组中。

*   每 5 分钟我获取当前数据的当前数组。
*   我将这些带有 AJAX 的数组传递给 getData.php
*   getData.php 将保存那些旧数组。
*   getData.php 将从每个站点收集新数据，并将其放入新数组中。
*   新数据可能包含旧数组中的一些相同数据，因此我将合并旧数组和新数组，然后仅过滤 array_unique 的唯一内容
*   将仅包含唯一数据的新数组发送回 AJAX，然后附加到列表的前面

我认为。听起来对吗？这完全可行吗？想法？在我深入研究代码并找出这样做的错误方法之前，我只是想把所有这些都包起来。

# qt - SSL。没有 OPENSSL_Applink

> ID：16125905
> 
> 赞同：8
> 
> 时间：2013-04-20T22:37:55.563
> 
> 标签：qt, ssl, openssl

有使用 QSslSocket 的 openssl 服务器和 Qt 客户端。当客户端连接到服务器时，服务器显示没有 OPENSSL_Applink 并关闭。但是使用 OpenSSL 客户端服务器可以正常工作。可能是什么原因？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-09-05T06:10:47.120

```
#include <openssl/applink.c> 
```

包括`applink.c`将解决问题。请查看[OpenSSL 常见问题解答](http://www.openssl.org/support/faq.html)

基本上，只有当我们使用任何文件处理 API（如`d2i_X509`. `applink.c`在 Windows VC8.0中使用此 API 时，我遇到了断言失败。后来我分别做了fopen并调用了`d2i_X509_fp`API。

# c# - 带有方法请求元素属性的ASMX？

> ID：16125906
> 
> 赞同：3
> 
> 时间：2013-04-20T22:37:55.860
> 
> 标签：c#, asp.net, web-services, asmx

我正在尝试编写一个模拟服务来模仿我在生产之前无法访问的第 3 方 Web 服务。

假设我有方法'Foo'，它接受参数'WidgetName'。请求正文可能如下所示：

```
<Foo xmlns="http://tempuri.org/">
    <WidgetName>Gadget</WidgetName>
        ...
</Foo> 
```

我想要的是这样的：

```
<Foo xmlns="http://tempuri.org/" WidgetName="Gadget">
 ...
</Foo> 
```

请注意，“WidgetName”是“Foo”的一个属性。我可以像这样装饰参数`[XmlAttribute]`：

```
[WebMethod]
...
public string Foo([XmlAttribute]string WidgetName) {
  //...
} 
```

但是，当一切都说完了，结果……

```
XmlSerializer attribute System.Xml.Serialization.XmlAttributeAttribute is not valid in sourceSystemType. Only XmlElement, XmlArray, XmlArrayItem, XmlAnyAttribute and XmlAnyElement attributes are supported when IsWrapped is true. 
```

好吧`.Bare`，这不是我想要的（相反的`.Wrapped`），对吧？因为这会导致`<Foo ..></Foo>`完全消失。如果我确实设置为“Bare”，则在尝试更新 Web 服务参考时会收到此错误（带有完整的真实代码）：

`There was an error downloading 'http://localhost:48319/FooWS/FooWS.asmx/_vti_bin/ListData.svc/$metadata'. The request failed with the error message...`它说`Request format is unrecognized for URL unexpectedly ending in '/_vti_bin/ListData.svc/$metadata'.`

`[XmlAttribute]`一旦我从`Foo(string WidgetName)`我只是不知道从这里去哪里，错误更新就会消失。

# javascript - Javascript返回未定义

> ID：16125913
> 
> 赞同：1
> 
> 时间：2013-04-20T22:39:22.027
> 
> 标签：javascript, jquery

我正在尝试获取微调器的值并显示其值。这是微调器代码：

```
<div id="site_content">
    <div id="content">
        <h:body>
            <h:form>
                <div class="whiteSpace" />
                <p:spinner id="minutes" min="0" max="1000" value="#{printerSettings.t}" size="1">
                    <p:ajax update="NewTime" />
                    <f:validateLongRange minimum="1" maximum="1000" />
                </p:spinner>
                <h:message id="minutes2" for="minutes" style="color:red" /> 
```

这是当用户按下提交时调用的javascript代码

```
function Thankyou() {
    var minuteVal = $('minutes').val(); //not finding the minutes selected
    alert(minuteVal);
    alert("Sent to the printing holding queue, you may close this app now or carry on using this app, your work will still print out ");
    //location.href = 'index.xhtml';
} 
```

我努力了

```
var minuteVal = $('minutes').text(); 
```

这将返回一个空框。谢谢。

**编辑**

找到上面的JavaScript

```
 </h:form>
            </h:body>
        </div>
    </div>
    <script type="text/javascript">
        .....
    </script>
</html> 
```

在 XHTML 的底部。

编辑

这是来源，我不知道这意味着什么

```
In how many minutes time would you like to have your job sent to the printer ?
<div class="whiteSpace"></div>
<span id="j_idt8:minutes" class="ui-spinner ui-widget ui-corner-all">
    <input id="j_idt8:minutes_input" name="j_idt8:minutes_input" type="text" class="ui-spinner-input ui-inputfield ui-state-default ui-corner-all" autocomplete="off" value="1" size="1" />
    <a class="ui-spinner-button ui-spinner-up ui-corner-tr ui-button ui-widget ui-state-default ui-button-text-only">
        <span class="ui-button-text">
            <span class="ui-icon ui-icon-triangle-1-n"></span>
        </span>
    </a>
    <a class="ui-spinner-button ui-spinner-down ui-corner-br ui-button ui-widget ui-state-default ui-button-text-only">
        <span class="ui-button-text">
            <span class="ui-icon ui-icon-triangle-1-s"></span>
        </span>
    </a>
</span>
<script id="j_idt8:minutes_s" type="text/javascript">
    PrimeFaces.cw('Spinner', 'widget_j_idt8_minutes', {
        id: 'j_idt8:minutes',
        step: 1.0,
        min: 0.0,
        max: 1000.0,
        behaviors: {
            change: function(event) {
                PrimeFaces.ab({
                    source: 'j_idt8:minutes',
                    event: 'valueChange',
                    process: 'j_idt8:minutes',
                    update: 'j_idt8:NewTime'
                }, arguments[1]);
            }
        }
    });
</script>
<span id="j_idt8:minutes2"></span> 
```

编辑

```
function Thankyou()
{
    var minutesVal = $('#minutes').spinner('value');//not finding the minutes selected
    alert(minutesVal);
    alert("Sent to the printing holding queue, you may close this app now or carry on using this app, your work will still print out ");
    //location.href = 'index.xhtml';
} 
```

现在什么也没有发生，鼠标上的加载符号出现但没有消息框等

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-20T22:42:20.497

选择器`'minutes'`查找带有标签 name 的元素`'minutes'`，如`<minutes>`。你想通过 id 去，那就是`'#minutes'`.

```
var minuteVal = $('#minutes').val(); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-20T22:41:54.380

jQuery 基于 css 样式的选择器选择元素；例如，您当前拥有的是选择“分钟”标签，您需要的是：

```
 var minuteVal = $('#minutes').attr("value"); 
```

最重要的是，除了,和标签之外，`value`不是任何东西的有效属性，因此您需要为非标准 html 属性使用前缀属性， with或执行类似于上述的操作。`input``textarea``select``data-``.data("value")`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-20T23:09:13.813

从 HTML 的最终源代码中获取第一个和第二个微调器：

```
var firstSpinner, secondSpinner;
$('input.ui-spinner-input').each(function(index) {
    if(index == 0) {firstSpinner = $(this).val();}
    else if (index == 1) {secondSpinner = $(this).val();} 
});
alert('First spinner: ' + firstSpinner + ' Second spinner: ' + secondSpinner); 
```

# .net - System.Net.WebClient DownloadFile 未发出 HTTP 请求

> ID：16125917
> 
> 赞同：1
> 
> 时间：2013-04-20T22:39:42.397
> 
> 标签：.net, vb.net, webclient

我正在开发一个应用程序，该应用程序应该将给定 URL 处的文件下载到路径。我使用了下面显示的代码，我在很多地方都看到过。

我正在使用 fiddler 来监控我的连接并进行故障排除，我遇到了一个问题，即 Fiddler 从不请求路径，并且我从来没有抛出错误（没有消息框出现）。我已经设置好了，所以在输入这个函数之前我会显示一个消息框，并且效果很好，但它似乎卡在了这个函数中。没有抛出错误，它似乎只是挂起。

```
Public Sub DownloadFile(ByVal _URL As String, ByVal _SaveAs As String)
    Try
        Dim _WebClient As New System.Net.WebClient()
        ' Downloads the resource with the specified URI to a local file.
        _WebClient.DownloadFile(_URL, _SaveAs)
    Catch _Exception As Exception
        'Error
        MsgBox("Exception caught in process: {0}", _Exception.ToString())
    End Try
End Sub 
```

有人对为什么会发生这种情况有任何想法吗？

**编辑** 我忘了提到这只发生在运行 SERVER 2012 的测试计算机上。它在我的 Windows 7 开发机器上运行良好

在此先感谢，
丹

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T23:54:00.780

我没有完全解决关于 WebClient 有什么问题的问题，但我设法使用找到的教程解决了这个问题[Here](http://www.c-sharpcorner.com/uploadfile/bfarley/simple-web-file-download-in-vb-net/)。较新的 .NET 版本与本教程有一点不同，那就是正在改变

```
WebRequestFactory.Create 
```

成为

```
WebRequest.Create 
```

# android - Android SQLite 快速从游标中获取所有数据

> ID：16125919
> 
> 赞同：2
> 
> 时间：2013-04-20T22:39:46.087
> 
> 标签：android, database, performance, sqlite, cursor

我正在处理我的一个应用程序中的性能问题。也许你们中的一个可以帮助我？！

我有一个大约有 10k 条目的数据库。[我使用SQLiteDatabase](http://developer.android.com/reference/android/database/sqlite/SQLiteDatabase.html)类中的默认*查询*方法查询元素。查询本身足够快。

查询完成后，我必须在 Google 地图上显示结果。为此，我从包含标记信息的光标生成一个结果数组。

我使用的方法看起来有点像这样：

```
 final ArrayList< MarkerElement > result = new ArrayList< MarkerElement >();
    cursor.moveToFirst();
    while ( !cursor.isAfterLast() ) {
        result.add( new MarkerElement(
                cursor.getString( COL_TITLE ),
                cursor.getString( COL_SNIPPET ),
                new LatLng(
                        cursor.getDouble( COL_LAT ),
                        cursor.getDouble( COL_LNG ) ),
                cursor.getString( COL_OTHER_USEFUL_DATA ) );
        cursor.moveToNext();
    }
    cursor.close(); 
```

MarkerElement只是*一个*简单的类，它保存 Google 地图上标记所需的值。

现在的问题是，遍历所有游标元素需要很长时间。此外，我想不出一种聪明的方法来延迟加载 ListView 中的结果，因为我需要同时显示所有结果。

我能做些什么来显着加快这个过程吗？

任何帮助是极大的赞赏！

此致

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-24T05:03:36.547

我不太确定查询是否真的像你想象的那么快。实际查询很可能仅使用 cursor.moveToFirst() 语句执行，而不是在调用 query() 或 rawQuery()（或您正在使用的任何其他查询方法）时执行。

无论如何，查询应该足够快，让用户只等待一会儿。如果不是，那么您可能需要考虑使用 SELECT * FROM your_table LIMIT START, COUNT 将其加载到块中（例如 SELECT * FROM your_table LIMIT 0, 1000 以检索前 1000 行）。

查询不能在 ui 线程上发生，因此您希望在 AsyncTaskLoader 或更好的 CursorLoader 中运行它。可以在此处看到没有 ContentProvider 的 CursorLoader：[https](https://stackoverflow.com/a/7422343/534471) ://stackoverflow.com/a/7422343/534471 。

假设您需要针对 1000 条记录运行 10 次查询，那么您将拥有 10 个可以使用 LoaderManager 管理的 CursorLoader。LoaderManager 管理游标（打开和关闭它们），在方向更改时保留游标并在后台任务中运行所有内容，因此不会出现阻塞 ui 线程的问题。如果内容发生变化，LoaderManager 还会重新查询数据库（参见：[https](https://stackoverflow.com/a/5603959/534471) ://stackoverflow.com/a/5603959/534471 ）。当 LoaderManager 通知您的片段或您的活动光标已完成加载时，它将调用 onLoadFinished()（请参阅：http: [//developer.android.com/reference/android/support/v4/app/LoaderManager.LoaderCallbacks.html](http://developer.android.com/reference/android/support/v4/app/LoaderManager.LoaderCallbacks.html)） .

减慢代码速度的不仅仅是查询数据库，还创建了 10'000 个 MarkerElement 和另外 10'000 个 LatLng 对象。我不知道您的要求，但如果您看到没有这些对象的任何工作机会，那肯定会加快您的代码速度。消除 MarkerElements/LatLng 的另一个理想效果是内存使用。对于一个以手机为目标的应用程序，包含 3 个字符串和 2 个 Double 的 20'000 个对象是相当可观的。

使用 CursorLoaders 和 LoaderManager 将允许您从光标中检索值并直接填充您的 ui 视图，而无需 MarkerElements 和 LatLng。它还允许您延迟加载。您可以在为 CursorLoaders 之一调用 onLoadFinished() 时填充视图（在 ui 线程上调用 onLoadFinished()，除非从非 ui 线程调用 initLoader/restartLoader）。如果 1000 个视图太多而无法一次填充，请将查询分解为更小的部分，或者添加一种机制以 10 或 100 的块（对于每个游标）填充视图。

如果您需要当前存储在 MarkerElement 中的信息，例如当用户选择其中一个标记时，请在显示标记的视图上使用 setTag() 来存储数据库记录的主键。使用该键从数据库中检索记录，或者甚至从已经查询的游标中检索记录更好（这将需要一些映射机制，但它是可行的）。

概括：

*   将查询拆分为多个子查询以检索较小的数据集
*   使用 CursorLoaders 和 CursorManager 管理不同的查询/游标
*   不要为每一行创建 MarkerElement 和 LatLng，而是直接从返回的游标填充视图
*   可能分几个步骤为每个光标填充，以保持 ui 响应
*   在视图上使用 setTag() 能够检索视图后面的数据

# c++ - 如何将冒泡排序功能添加到当前的随机数生成器中？

> ID：16125924
> 
> 赞同：0
> 
> 时间：2013-04-20T22:40:13.370
> 
> 标签：c++, visual-studio-2010, visual-studio-2012, bubble-sort

需要在保持当前小数位精度的同时，对 100 个范围从 -100 到 100 的随机数进行冒泡排序。我有一个冒泡排序函数，但不知道如何从另一个函数中调用它。

```
 #include "stdafx.h"
    #include <fstream>  // writing data to disk
    #include <cstdlib>  // standard general utilities library "# generator"
    #include <ctime>   // convert time value to string
    #include <iostream>
    #include <iomanip> // set precision

using namespace std;

// Functions
void number_Generator();

void bubbleSort (double *array, double length)
{
    int i,j;
    for (i=0;i<100;i++)
    {
        for (j=0;j<i;j++)
        {
            if(array[i]>array[j])
            {
                int temp = array[i];
                array[i]=array[j];
                array[j]=temp;
            }
        }
    }
}
int _tmain(int argc, _TCHAR* argv[])
{
    system("pause");
    cout.precision (6);
    number_Generator(); 
}

// Number Generator Function
void number_Generator()

{
    double Final_Avg = 0;

    double Random_Cap = 100;
    double Samples_To_Create = 100;
    srand((unsigned)time(0));
    double rndDbl;
    int rndInt;
    double rndAvg = 0, rndMin = 0, rndMax = 0;
    int counter = 0;
    double temp = 0;
    double dblRanAry[100]; 

    Final_Avg = rndAvg / counter; // final average to display

    double lDbl=0, hDbl=Random_Cap; 
    int lInt = 0, hInt=1;

    double dblRange=(hDbl-lDbl)+1;
    int intRange=(hInt-lInt)+1;

    for(int index=0; index<Samples_To_Create; index++) 
    {
    rndInt = lInt+int(intRange*rand()/(RAND_MAX + 1.0));
    rndDbl = lDbl+double(dblRange*rand()/(RAND_MAX + 1.0));

// random number if statement
if (rndInt == 0){
    rndDbl = -(rndDbl);

} //start of Min/Max if statements
if (rndMin == 0){
    rndMin = rndDbl;
}
else if (rndDbl < rndMin){
    rndMin = rndDbl;
}
if (rndMax == 0){
    rndMax = rndDbl;
}
else if (rndDbl > rndMax){
    rndMax = rndDbl;
} //end of Min Max if statements

temp = rndDbl;
rndAvg += temp;
dblRanAry[counter] = temp;
counter++;

cout.precision (6);
cout << fixed << " " << rndDbl << endl; 

}
cout << " " << endl
     << "The average = "  << fixed << rndAvg/counter << endl
     << " " << endl
     << "The Min = "  << fixed << rndMin << endl
     << " " << endl
     << "The Max = "   << fixed << rndMax << endl
     << " " << endl;

} // end of number generator function 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T22:47:51.927

你需要做几件事：

添加排序函数调用，如下所示：

```
 int _tmain(int argc, _TCHAR* argv[])
  { 
       system("pause");
       cout.precision (6);

        int dblArray[100] = {0.0}; //these change are explained  below
        number_Generator(dblArray, 100); //100 means generate 100 random numbers
                  //remove double dblRanAry[100] inside the generator;
        bubbleSort (dblArray, 100) ;
  } 
```

将原型更改`number_Generator`为

```
 void number_Generator(double dblArray[], int length); 
```

你`number_Generator`应该要么

1.  返回一个将这些随机数存储到 main 或
2.  将这些数字存储在全局数组中或
3.  将数组传递给它并像我上面那样存储数字。

你也可以改变你的`number_Generator`以满足原型的变化。

此外：

```
void bubbleSort (double *array, int length)
{                               //^^array length is int, not double
    for (int i = 0; i < length; i++)
    {               //^^use length, not hardcoded 100
        for (int j = 0; j < i; j++)
        {
            if(array[i] > array[j])
            {
                double temp = array[i];
                //since array elements are double, not int
                array[i] = array[j];
                array[j] = temp;
            }
        }
    }
} 
```

# autoconf - AM_CONDITIONAL 测试类型的大小

> ID：16125928
> 
> 赞同：0
> 
> 时间：2013-04-20T22:41:30.423
> 
> 标签：autoconf, automake

我想定义`PLATFORM64`如果`SIZEOF_VOIDP`等于 8，下面的配置片段不起作用，但显示了我想要实现的目标。有没有办法在我的配置脚本中做到这一点？

```
# Get size of void*
AC_CHECK_SIZEOF(void*)

# Determine if this is a 32 or 64 bit system, this can also be set manually with "-DPLATFORM64"
AM_CONDITIONAL([PLATFORM64], [test SIZEOF_VOIDP = 8]) 
```

**更新：**

我试过了：

```
AM_CONDITIONAL([PLATFORM64], [test "$SIZEOF_VOIDP" -eq 8]) 
```

但我收到“测试：错误号码”错误消息。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T00:02:30.950

问题在于`AC_CHECK_SIZEOF`定义预处理器指令，而不是设置 shell 变量。`$host_cpu`您可以在调用后尝试测试`AC_CANONICAL_HOST`。

或者：

```
AC_PREPROC_IFELSE([AC_LANG_SOURCE([
#if SIZEOF_VOIDP != 8
#error
#endif
])], [platform64=true], [platform64=false])

AM_CONDITIONAL([PLATFORM64], [test "$platform64" = true]) 
```

# java - 如何使 jogl 与 intellij idea 一起工作

> ID：16125929
> 
> 赞同：0
> 
> 时间：2013-04-20T22:41:42.963
> 
> 标签：java, intellij-idea, jogl

我环顾四周，似乎无法弄清楚这一点。我正在尝试设置 JOGL（在 win64 上）以与 IntelliJ IDEA 一起使用，无论我做什么，它似乎都不起作用。这是我到目前为止所做的：

1.  下载[了这个](http://jogamp.org/deployment/jogamp-current/archive/jogamp-all-platforms.7z)
2.  将所有这些文件移动到它们自己的文件夹中（称为 JOGL）：
    *   胶水-rt.jar
    *   jogl-all.jar
    *   胶水-java-src.zip
    *   jogl-java-src.zip
    *   胶水-rt.dll
    *   jogl_desktop.dll
    *   nativewindow_awt.dll
    *   nativewindow_win32.dll
    *   蝾螈.dll
3.  转到项目结构并将 JOGL 文件夹作为库添加到模块中
4.  尝试使用导入运行模块：`import net.java.games.jogl.*;`添加

我还尝试在`System.loadLibrary("jogl");`不使用导入的情况下运行该行代码，但它不起作用。任何帮助表示赞赏。

这些是我遵循的指南：

*   [http://jogamp.org/wiki/index.php/Downloading_and_installing_JOGL](http://jogamp.org/wiki/index.php/Downloading_and_installing_JOGL)
*   [http://jogamp.org/wiki/index.php/Setting_up_a_JogAmp_project_in_your_favorite_IDE](http://jogamp.org/wiki/index.php/Setting_up_a_JogAmp_project_in_your_favorite_IDE)

**编辑：**

根据 CrazyCoder 的要求，当我尝试使用`import net.java.games.jogl.*;`我提到的进行编译时，我得到：

`java: C:\....\Main.java:2: package net.java.games.jogl does not exist`

* * *

当我删除导入并尝试在`System.loadLibrary("jogl");`插入行的情况下运行它时，我得到：

```
Exception in thread "main" java.lang.UnsatisfiedLinkError: no jogl in java.library.path
at java.lang.ClassLoader.loadLibrary(ClassLoader.java:1738)
at java.lang.Runtime.loadLibrary0(Runtime.java:823)
at java.lang.System.loadLibrary(System.java:1028)
at core.Main.main(Main.java:15) 
```

* * *

奇怪的是，当我尝试使用命令在命令行上运行它时，`java -cp "/cygdrive/c/apps/JOGL/" core.Main`我得到：

```
java.lang.NoClassDefFoundError: core/Main
Caused by: java.lang.ClassNotFoundException: core.Main
at java.net.URLClassLoader$1.run(URLClassLoader.java:202)
at java.security.AccessController.doPrivileged(Native Method)
at java.net.URLClassLoader.findClass(URLClassLoader.java:190)
at java.lang.ClassLoader.loadClass(ClassLoader.java:306)
at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:301)
at java.lang.ClassLoader.loadClass(ClassLoader.java:247)
Could not find the main class: core.Main.  Program will exit.
Exception in thread "main" 
```

如果我不使用`-cp "/cygdrive/c/apps/JOGL/"`.

* * *

下面是我的模块依赖项的屏幕截图（JOGL 就是我上面提到的）：

![](https://i.imgur.com/KAysk4D.jpg)

我试图将所有内容分开以使其更具可读性，如果难以理解，请见谅。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-08-19T08:13:14.080

如果您使用的是 IDEA，那么将其作为一个 maven 项目来做是有意义的，因为 IDEA 有很好的 maven 支持。只需将依赖项粘贴到您`pom.xml`可以从 Maven 中心获得的依赖项中：

```
<dependencies>
  <dependency>
    <groupId>org.jogamp.gluegen</groupId>
    <artifactId>gluegen-rt-main</artifactId>
    <version>2.0.2</version>
  </dependency>
  <dependency>
    <groupId>org.jogamp.jogl</groupId>
    <artifactId>jogl-all-main</artifactId>
    <version>2.0.2</version>
  </dependency>

  <dependency>
    <groupId>org.jogamp.jocl</groupId>
    <artifactId>jocl</artifactId>
    <version>2.0.2</version>
  </dependency>
  <dependency>
    <groupId>org.jogamp.jocl</groupId>
    <artifactId>jocl-main</artifactId>
    <version>2.0.2</version>
  </dependency>

  <!-- audio -->
  <dependency>
    <groupId>org.jogamp.joal</groupId>
    <artifactId>joal</artifactId>
    <version>2.0.2</version>
  </dependency>
</dependencies> 
```

这是我在玩 JOGL 时使用的，它很有效。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-02-04T20:12:30.253

只需将jogl-all.jar 和gluegen-rt.jar 放入您的类路径，并将包含本机库的JAR 放入同一目录中。net.java.games.jogl 来自 JOGL JSR 231（一个非常旧的版本），在您下载 JOGL 2 时不再维护。调整您的代码以使其与 JOGL 2 一起使用。

编辑：现在您可以使用单个 JAR，jogamp-far.jar。只需将其放入您的类路径中即可。这要容易得多。[说明在我们的 wiki 中](http://jogamp.org/wiki/index.php/Setting_up_a_JogAmp_project_in_your_favorite_IDE#IntelliJ_IDEA)。

# html - 来自 Nawk 脚本的 HTML 表输出错误

> ID：16125930
> 
> 赞同：0
> 
> 时间：2013-04-20T22:41:52.223
> 
> 标签：html, linux, unix, awk, nawk

`$3`是第三列，`.txt`其中代表我的电子邮件地址列。为什么输出以下语句`"$3"`而不是电子邮件地址？：

```
print "      <td><a href=mailto:>$3</a></td>" 
```

我处于静止状态。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T22:51:04.340

因为您正在打印文字字符串，所以您想要的是：

```
print "      <td><a href=mailto:>"$3"</a></td>" 
```

# java - 使用新值更新实体

> ID：16125932
> 
> 赞同：1
> 
> 时间：2013-04-20T22:41:57.813
> 
> 标签：java, jakarta-ee

我有一个 Book 实体，它是由 Chapter 实体列表组成的组合。我正在创建一个 RESTful Web 服务，其中一个端点`/books/1/chapters/3`响应 PUT 方法来更新章节。

更新本书列表中现有章节的好方法是什么？复制控制器层中的每个值似乎不是很聪明，并且创建部分章节实体以传递给`update`复制每个字段的章节实体上的方法将意味着我在系统中的章节不一致。

# mysql - 从另一个表中选择带有主键的数据？

> ID：16125937
> 
> 赞同：0
> 
> 时间：2013-04-20T22:42:26.823
> 
> 标签：mysql, sql, one-to-many, junction-table

我有一个“*用户*”表、一个“*报价*”表和一个带有用户 ID 和报价 ID 的联结“*users_offers*”。

如何从属于特定用户的报价中选择每个报价？

我可以实现一个解决方案（如下），它实际上从联结表中开始选择数据，然后简单地连接报价列，但结果也包含联结列。

```
SELECT * 
FROM users_offers INNER JOIN offers ON users_offers.offerID = offers.ID 
WHERE userID = 1 
```

有没有从优惠开始选择的解决方案？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-20T22:48:51.320

使用[SQL 别名](http://dev.mysql.com/doc/refman/5.0/en/select.html)：

```
SELECT o.* 
FROM users_offers AS uo
INNER JOIN offers AS o ON uo.offerID = o.ID 
WHERE uo.userID = 1 
```

解释：

`FROM users_offers AS uo`设置一个名为“uo”的新别名，指向 [users_offers] 表。同样的情况发生在`offers AS o`. 这些别名可用于 SQL 语句的其他部分。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-20T22:54:48.080

```
SELECT offers_alias.*
FROM users_offers
INNER JOIN offers AS offers_alias ON users_offers.offerID = offers_alias.ID 
WHERE users_offers.userID = 1 
```

# c# - AForge AVI Writer 异常

> ID：16125938
> 
> 赞同：0
> 
> 时间：2013-04-20T22:42:31.563
> 
> 标签：c#, .net, nullreferenceexception, avi, aforge

我写了一些代码，应该从列表中创建一个 avi 文件。

```
// instantiate AVI writer, use WMV3 codec
        internal static AVIWriter writer = new AVIWriter( "wmv3" );
        private static List<Bitmap> imgList = new List<Bitmap>();

        internal static void SaveFile()
        {
            var list = imgList;
            imgList = default(List<Bitmap>);

            // create new AVI file and open it
            writer.Open(@"d:\test.avi", 640, 480);
            foreach (Bitmap b in list)
            {
                writer.AddFrame(b);
            }
            writer.Close();
        } 
```

不幸的是，我在“foreach（列表中的位图 b）”处得到了一个空引用异常但是当我在 writer.Close(); 处调试并放置一个断点时，这个错误只会在我实际通过该断点后触发。

所以我很困惑，有人知道这里发生了什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T13:01:37.893

不完全确定为什么您的程序会在 2 个不同点遇到相同的异常。我最好的猜测是它与本机互操作不与托管代码同步有关。

您是否尝试过引用 AForge 源代码而不是二进制文件？这将让您查明错误发生的确切位置。

现在我建议你检查你的位图列表是否有任何空值或更新到最新的 AForge（可能是框架错误）。我还建议您尝试几种不同的编解码器（不要问为什么）。

# mysql - MySQL 触发 IF 语句

> ID：16125941
> 
> 赞同：0
> 
> 时间：2013-04-20T22:42:38.660
> 
> 标签：mysql, if-statement, triggers

好的，我正在为上课做这个，但我不知道为什么会出错。我对编写高级 sql 脚本很陌生，所以这可能是这里的问题，但我正在尝试。我得到的错误是：意外'（'期待'：'我的代码......错误出现在 raise_application_error 行。

```
DELIMITER $$

DROP TRIGGER IF EXISTS DoubleRoomPriceTrigger $$

CREATE TRIGGER DoubleRoomPriceTrigger
    BEFORE UPDATE ON Room
    FOR EACH ROW

    BEGIN
        IF Room.RoomType = 'Double' AND Room.price < 100 THEN
            raise_application_error(22, 'Price must be greater than 100 for a double room');
        END IF;
    END

$$ 
```

任何帮助是极大的赞赏。谢谢，汤米

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T23:40:43.237

你在 raise_application_error 之前失踪`CALL`了（我假设你已经定义了 raise_application_error 过程）。

```
CALL raise_application_error(22, 'Price must be greater than 100 for a double room'); 
```

# .htaccess - htaccess：将 www 强制为非 www 在末尾添加额外的斜杠

> ID：16125942
> 
> 赞同：0
> 
> 时间：2013-04-20T22:42:46.367
> 
> 标签：.htaccess, mod-rewrite, gunicorn, supervisord

我想将 www 强制为无 www，但重写似乎在末尾添加了另一个（如此双的）斜杠。下面的设置适用于 Django/Gunicorn/Supervisor 环境。

在哪里/为什么添加额外的斜线？我想不通。提前致谢！

老情况：

```
RewriteRule ^/(.*) http://127.0.0.1:9001/$1 [L,P]
ProxyPassReverse / http://127.0.0.1:9001/ 
```

现在的情况：

```
RewriteCond %{HTTP_HOST} ^www\.domain\.com [NC]
RewriteRule (.*) http://domain.com/$1 [L,R=301]
RewriteRule ^/(.*) http://127.0.0.1:9001/$1 [L,P]
ProxyPassReverse / http://127.0.0.1:9001/ 
```

# java - 在 spring mvc 中处理会话中的对象的问题

> ID：16125944
> 
> 赞同：0
> 
> 时间：2013-04-20T22:42:52.067
> 
> 标签：java, session, spring-mvc, session-variables

是的，实际上我在整个会话过程中遇到了一个奇怪的问题。

我有一个控制器如下：

```
@SessionAttributes({"cart", "order"})
public class CartController { 
```

好的，我有一个将商品添加到购物车的请求：

```
@RequestMapping(method = RequestMethod.POST, value = "/kleidung/{slug}")
@Transactional
public String addClothingToCart(final Model model,
                                @ModelAttribute("addToCartAttribute") @Valid final AddToCartDTO cartDto,
                                final BindingResult errors, @PathVariable("slug") final String slug,
                                @ModelAttribute("cart") Cart cart,
                                final HttpServletRequest request) {

    final Clothing clothing = clothingRepository.findBySlug(slug);
    validateAddToCartDto(cartDto, errors);
    if (errors.hasErrors()) {
        return viewPreparer.prepareDetailViewFor(clothing, model);
    }
    addProductToCart(cartDto, clothing, cart);
    cart = cartRepository.saveAndFlush(cart);
    return "redirect:/warenkorb";
} 
```

由于我对解决我的问题感到失望，我应用了事务注释我认为它没有改变任何东西，所以它不会使问题变得更糟或更好。

反正

另一种方法可以删除项目如下：

```
 @RequestMapping(method = {RequestMethod.GET, RequestMethod.DELETE}, value = "/{listId}")
@Transactional
public String deleteItemFromCart(@PathVariable("listId") final String listId,
                                 @ModelAttribute("cart") Cart cart,
                                 final SessionStatus session) {
    cart.getOrderItems().remove(Integer.parseInt(listId));
    if (cart.getOrderItems().isEmpty()) {
        session.setComplete();
    }
    cart = cartRepository.saveAndFlush(cart);
    return "redirect:/warenkorb";
} 
```

到目前为止，一切都很好 ：）

现在出现了奇怪的部分，如果我将两个项目添加到购物车并删除其中一个，然后尝试更改购物车，我总是得到一个 EntityNotFoundException。

整个会话的行为是如此奇怪，我不知道如何解决它。

也许有人有建议或解决方案。

# python - 搜索值是列表的 Python 字典

> ID：16125950
> 
> 赞同：4
> 
> 时间：2013-04-20T22:43:15.763
> 
> 标签：python, dictionary, python-2.7

如果我有一本字典，其中的值默认设置为一个列表，我怎么能在字典中的所有这些列表中搜索某个术语？

例如：

```
textbooks = {"math":("red", "large"), "history":("brown", "old", "small")} 
```

随着更多的术语和情况可能再次发生相同的事情，我怎么能说找到所有键，其中它们的值是包含“红色”的列表？在上面的示例中，我希望它找到的唯一一个是“数学”。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-20T22:45:25.937

```
[k for k, v in textbooks.iteritems() if 'red' in v] 
```

它是 Pythonic 的简写

```
res = []
for key, val in textbooks.iteritems():
    if 'red' in val:
        res.append(key) 
```

请参阅 Python 文档中的列表[理解](http://docs.python.org/2.7/tutorial/datastructures.html#list-comprehensions)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-20T22:52:15.887

```
[key for key, corresponding_list in textbook.items() if 'red' in corresponding_list] 
```

# objective-c - 可变跳跃高度

> ID：16125951
> 
> 赞同：0
> 
> 时间：2013-04-20T22:43:22.123
> 
> 标签：objective-c, game-physics, gravity

我在创建一个跳跃系统时遇到了很大的困难，用户可以点击跳跃按钮进行小跳并按住它以获得更高的跳跃。

我偶然发现了这个话题：

[https://gamedev.stackexchange.com/questions/13277/variable-height-jumping-in-side-scrollers](https://gamedev.stackexchange.com/questions/13277/variable-height-jumping-in-side-scrollers)

这极大地帮助我开发了以下代码：

```
PlayerMovementTimer = [NSTimer scheduledTimerWithTimeInterval:0.005 target:self selector:@selector(movePlayer) userInfo:nil repeats:YES];

[JumpButton addTarget:self action:@selector(jumpPlayer:) forControlEvents:UIControlEventTouchDown];
[JumpButton addTarget:self action:@selector(stopJump:) forControlEvents:UIControlEventTouchCancel | UIControlEventTouchUpInside | UIControlEventTouchDragExit];

- (void)movePlayer
{
    CGFloat playerY = Player.center.y + PlayerYV;
    if(playerY > 264) {
        PlayerYV = 0;
        playerY = 264;
    }
    if(playerY < 264) {
        PlayerYV += 0.048f - PlayerYD;
    }
    if(HoldingJump && PlayerYV < 0 && PlayerYD + 0.0018f < 0.048f) {
        PlayerYD += 0.0018f;
    }

    Player.center = CGPointMake(Player.center.x + PlayerXV, playerY);
}

- (IBAction)jumpPlayer:(id)sender
{
    if(Player.center.y == 264) {
        PlayerYD = 0;
        PlayerYV = -2.25;
        HoldingJump = true;
    }
}

- (IBAction)stopJump:(id)sender
{
    HoldingJump = false;
} 
```

代码似乎可以工作（一些值需要一些微调，但我还没有解决这个问题）。唯一的问题是运动似乎有点生涩（即使在真实设备上），并且当玩家处于跳跃的顶部时，他们的加速非常缓慢，而且我没有设置任何值似乎能够让跳跃看起来像马里奥游戏一样流畅。

请看一下代码，看看我是否遗漏了一些明显的东西，或者是否有比 NSTimer 调用 void 函数更有效的控制运动的方法。另外，将 UIImageView 的位置设置为浮点值是否不好？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-28T05:59:40.247

所以这里有很多问题。首先，是的，您永远不应该将 ImageView 或任何其他 UI 元素的原点设置为小数像素的坐标位置。这会导致亚像素化，从而使您的图像模糊。为避免这种情况，所有 CGFloat 都应使用 roundf() 或其他类似的舍入函数四舍五入到最接近的整数。

我可以看到的另一个问题是您正在设置 Player.center。我希望为你着想 Player 不是 ImageView 因为你会让你的生活变得更艰难。如上所述，当帧的原点未设置为整数的 CGFloat 时，您将获得子像素化。当您使用 center 属性时，您很容易导致自己获得错误的原点值。例如，如果我有一个 11 x 11 的图像并将其中心设置为 (11,11)，则原点将设置为 (5.5,5.5) 并导致子像素化。避免这种情况的简单方法是进行数学运算以正确放置原点并确保将输入的 CGFloats 舍入（或在设置之前在框架上使用 CGRectIntegral）。

这里的第三个问题是计时器被称为 0.005 秒。假设您希望该游戏以 60 FPS 运行。60 FPS 转换为大约 0.0167 秒。计时器调用该方法的频率比它要高出三倍，即使您想要 60 FPS 也是如此，此外，如此频繁地调用此方法可能会导致您的一些生涩动作。

现在就获得类似“马里奥”的跳跃而言，您真正需要做的是考虑获得一个专用的物理引擎，因为如果您使用上面的代码，您似乎没有。物理引擎会做的是应用恒定的“重力”，这将有助于使玩家跳跃的外观和动作更加逼真。当玩家按下按钮时，您会在玩家角色上施加一个向上的冲动。脉冲的使用还可以简化您的工作，因为您可以根据按钮按住按钮的时间等以不同的方式应用脉冲。上面的代码只是试图解决这个问题，而不是解决你没有一个真正的问题物理引擎。

去研究 cocos2D 和 Box2D 作为你可以使用的物理引擎。关于 cocos2D+Box2D 的资源非常丰富，还有一位开发人员甚至制作了一个关于使用 cocos2D 创建超级马里奥克隆的教程，这应该让您对物理引擎的工作原理有一些基本的了解：[http://www.raywenderlich .com/15230/how-to-make-a-platform-game-like-super-mario-brothers-part-1](http://www.raywenderlich.com/15230/how-to-make-a-platform-game-like-super-mario-brothers-part-1)

# javascript - onbeforemousemove 获取鼠标的旧位置？

> ID：16125952
> 
> 赞同：0
> 
> 时间：2013-04-20T22:43:28.493
> 
> 标签：javascript, jquery, events, drag-and-drop, mouse

我正在开发拖放库，我想将鼠标的位置变化添加到拖动元素的实际位置，而不是仅仅将其位置设置为窗口中的当前光标位置。这将允许我不使用 position: fixed 并能够拖动位置相对/绝对；元素。

要知道鼠标的旧位置（在调用 mousemove 处理程序之前），我可以使用 e.pageX 和 pageY 将位置存储在上一次调用该处理程序的变量中。但是第一次移动鼠标处理程序呢？**当我还没有存储旧位置时，如何知道旧鼠标位置以确定它的变化？**

一段代码：

```
 var $dragged = null,
        $window = $(window),
        oldMouseX = null,
        oldMouseY = null;

    var mouseMoveHandler = function(e) {
        var curTop = $dragged.css('top'),
            curLeft = $dragged.css('left');
        $dragged.css({
            top  : curTop + e.pageY - oldMouseY,
            left : curLeft + e.pageX - oldMouseX,
        });
        oldMouseX = e.pageX;
        oldMouseY = e.pageY;
    };

    $('.Draggable')

        .attr('draggable', true)

        .css({userSelect: 'none'})

        .on('mousedown', function() {
            $dragged = $(this);
            $window.bind('mousemove', mouseMoveHandler);
        })
        .on('mouseup', function() {
            $dragged = null;
            $window.unbind('mousemove', mouseMoveHandler);
        }) 
```

# javascript - 在破砖游戏中找到离球最近的砖

> ID：16125953
> 
> 赞同：1
> 
> 时间：2013-04-20T22:43:29.493
> 
> 标签：javascript, collision-detection, game-physics

我正在从头开始构建一个 JavaScript 砖块破坏游戏，以获得乐趣。可以在[这里](http://thibaultcha.github.io/Breakoid/)播放演示。但是，您会看到所有冲突都没有得到处理。

为了尝试通过直接计算（而不是遍历整个砖块阵列）来处理碰撞，我需要在每个滴答声中找到离我的球​​最近的砖块，这样我就可以比较它的边界和我的球的边界，看看是否有是一次碰撞。

我有一个 2D `bricksArray`，我这样做是为了找到最近的砖：

```
var col = Math.floor((_ballX + _ballDirX * Breakoid.BALL_SIZE) / (_brickWidth + Breakoid.EMPTY_SPACE))
var row = Math.floor((_ballY + _ballDirY * Breakoid.BALL_SIZE) / (Breakoid.BRICK_HEIGHT + Breakoid.EMPTY_SPACE)) 
```

我建议您[在其上下文中查看代码，](https://github.com/thibaultCha/Breakoid/blob/develop/breakoid.js#L208)以清楚地了解我要做什么。（我提交了我的试验和调试的东西让你看到，也许比我更能理解我的问题。混乱发生在第 208 行和第 246 行之间）。

实际上，这两个`Math.floor`很奇怪（因为我没有正确使用它们）。它通常会找到比实际最近的砖高 1 或低 1 的值，这会导致诸如此类的事情`bricksArray[1][-1]`当然不存在并引发错误。或者`bricksArray[1][2]`当最近的砖实际上是`[1][1]`，这对他们来说不是很好，因为我生气了。

**那么，我怎样才能找到离我的球​​最近的砖呢？**（希望这是最好的方法）

另外：我的球目前只能向 4 个方向移动，`_ballDirX`并且`_ballDirY`只能采用`1`或`-1`。我知道三角圆的东西，但我想知道碰撞是否仍然会“那么简单”......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T07:58:03.400

您需要检查球的每个方向的值`row`和值。`col`通过这种方式，您可以根据球的方向确定球将在哪个砖块上发生碰撞。

```
// Bricks collision stuff
if (topBall <= Breakoid.NBROWS * (Breakoid.BRICK_HEIGHT + Breakoid.EMPTY_SPACE) {               

    // find the closest brick based on direction of ball
    if(_ballDirX==1 && _ballDirY==1) {
        var col = Math.floor((rightBall + _brickWidth) / (_brickWidth + Breakoid.EMPTY_SPACE))-1
        var row = Math.floor((bottomBall) / (Breakoid.BRICK_HEIGHT + Breakoid.EMPTY_SPACE))
    }
    else if(_ballDirX==1 && _ballDirY==-1) {
        var col = Math.floor((rightBall + _brickWidth) / (_brickWidth + Breakoid.EMPTY_SPACE)) -1
        var row = Math.floor((topBall + Breakoid.BRICK_HEIGHT) / (Breakoid.BRICK_HEIGHT + Breakoid.EMPTY_SPACE)) - 1
    }
    else if(_ballDirX==-1 && _ballDirY==1) {
        var col = Math.floor((leftBall + _brickWidth) / (_brickWidth + Breakoid.EMPTY_SPACE))-1 
        var row = Math.floor((bottomBall) / (Breakoid.BRICK_HEIGHT + Breakoid.EMPTY_SPACE))
    }
    else if(_ballDirX==-1 && _ballDirY==-1) {
        var col = Math.floor((leftBall + _brickWidth) / (_brickWidth + Breakoid.EMPTY_SPACE))-1
        var row = Math.floor((topBall + Breakoid.BRICK_HEIGHT) / (Breakoid.BRICK_HEIGHT + Breakoid.EMPTY_SPACE)) - 1
    }

    // avoid wrong values of row and col
    // when the player is over the game borders.    
    try{
        var brick = _bricksArray[row][col]

        // check for collision
        if (_bricksArray[row][col].present) {
            if (topBall == brick.bottomBorder) {
                console.log("top hit")
                _ballDirY = 1
                _bricksArray[row][col].present = false
            } else if (rightBall == brick.leftBorder) {
                console.log("right hit")
                _ballDirX = -1
                _bricksArray[row][col].present = false
            } else if (bottomBall == brick.topBorder) {
                console.log("bottom hit")
                _ballDirY = -1
                _bricksArray[row][col].present = false
            } else if (leftBall == brick.rightBorder) {
                console.log("left hit")
                _ballDirX = 1
                _bricksArray[row][col].present = false
            }
        }

    }catch(e){
        // console.log("row: " + row + " col: " + col)
    }   
} 
```

也许您会在这段代码中发现一些问题，因为它没有经过全面测试。尽管如此，希望你明白这一点。

我强烈推荐杰克戈登的这个“突破”教程：http:
[//codeincomplete.com/posts/2011/6/11/javascript_breakout/](http://codeincomplete.com/posts/2011/6/11/javascript_breakout/)

它涵盖了使用 html5 画布的“突围”游戏的完整实现。

他在这篇特别的文章中处理了碰撞及其问题：http: [//codeincomplete.com/posts/2011/6/12/collision_detection_in_breakout/](http://codeincomplete.com/posts/2011/6/12/collision_detection_in_breakout/)

上面引用的文章可能不适合您的需求，但您可以深入了解如何在游戏中实现多个功能。

# php - 使用 php pdo 准备好的语句从 mysql 数据中填充表

> ID：16125956
> 
> 赞同：-1
> 
> 时间：2013-04-20T22:43:43.530
> 
> 标签：php, pdo, prepared-statement

我一直在尝试将 mysql 语句切换到 PDO 和 Prepared Statements，但只是没有得到它。我有一个表单，用户输入数据并将其发布到 mysql 数据库。我相信我已经弄清楚了，因为它确实有效。这是代码。

```
 $stmt = $dbh->prepare("INSERT INTO info(lakeid, name, size, depth, access, sports, beach, atlantic, 
                bluegill, brook, brown, catfish, coho, crappie, king, lake, largemouth, muskie,
                pike, perch, pumkinseed, rainbow, rock, smallmouth, steelhead, sturgeon, walleye, 
                comments) 
            VALUES (:lakeid, :name, :size, :depth, :access, :sports, :beach, :atlantic, :bluegill, 
                :brook, :brown, :catfish, :coho, :crappie,:king, :lake, :largemouth, :muskie, :pike, 
                :perch, :pumkinseed, :rainbow, :rock, :smallmouth, :steelhead, :sturgeon, :walleye, 
                :comments )");

            $stmt->bindParam(':lakeid', $lakeid, PDO::PARAM_STR);
            $stmt->bindParam(':name', $name, PDO::PARAM_STR);
            $stmt->bindParam(':size', $size, PDO::PARAM_STR);
            $stmt->bindParam(':depth', $depth, PDO::PARAM_STR);
            $stmt->bindParam(':access', $access, PDO::PARAM_STR);
            $stmt->bindParam(':sports', $sports, PDO::PARAM_STR);
            $stmt->bindParam(':beach', $beach, PDO::PARAM_STR);
            $stmt->bindParam(':atlantic', $atlantic, PDO::PARAM_STR);
            $stmt->bindParam(':bluegill', $bluegill, PDO::PARAM_STR);
            $stmt->bindParam(':brook', $brook, PDO::PARAM_STR);
            $stmt->bindParam(':brown', $brown, PDO::PARAM_STR);
            $stmt->bindParam(':catfish', $catfish, PDO::PARAM_STR);
            $stmt->bindParam(':coho', $coho, PDO::PARAM_STR);
            $stmt->bindParam(':crappie', $crappie, PDO::PARAM_STR);
            $stmt->bindParam(':king', $king, PDO::PARAM_STR);
            $stmt->bindParam(':lake', $lake, PDO::PARAM_STR);
            $stmt->bindParam(':largemouth', $largemouth, PDO::PARAM_STR);
            $stmt->bindParam(':muskie', $muskie, PDO::PARAM_STR);
            $stmt->bindParam(':pike', $pike, PDO::PARAM_STR);
            $stmt->bindParam(':perch', $perch, PDO::PARAM_STR);
            $stmt->bindParam(':pumkinseed', $pumkinseed, PDO::PARAM_STR);
            $stmt->bindParam(':rainbow', $rainbow, PDO::PARAM_STR);
            $stmt->bindParam(':rock', $rock, PDO::PARAM_STR);
            $stmt->bindParam(':smallmouth', $smallmouth, PDO::PARAM_STR);
            $stmt->bindParam(':steelhead', $steelhead, PDO::PARAM_STR);
            $stmt->bindParam(':sturgeon', $sturgeon, PDO::PARAM_STR);
            $stmt->bindParam(':walleye', $walleye, PDO::PARAM_STR);
            $stmt->bindParam(':comments', $comments, PDO::PARAM_STR);

            $stmt->execute(); 
```

我的问题是让这些信息在原始页面上打印回表格中。我已经尝试了几个教程，但似乎都没有帮助。对此的任何建议都会有所帮助。谢谢一堆。

这是用于将用户输入打印到表格中的编辑代码。同样，我对 PDO 了解不多，但试图防止注射。这实际上将所有正确的输入打印到表中。还有什么我需要担心的吗？感谢您的任何回复。

```
 $stm = $dbh->prepare("SELECT * FROM info WHERE lakeid = ?");
        $stm->execute(array("$counties"));
        $data = $stm->fetchAll();

Print "<table border cellpadding=5>"; 
    Print "<tr><th>Name:</th> <th>Size:</th> <th>Depth:</th> <th>Boat Access:</th> <th>All Sports:</th> <th>Public Beach:</th> <th>Fish Species:</th> <th>Comments:</th></tr>"; 
    foreach($data as $inform  ) 

    {
    Print "<tr>"; 
    Print " <td>" .$inform['name']."</td> "; 
    Print "<td>".$inform['size'] . " </td>";
    Print " <td>".$inform['depth'] . "</td> "; 
    Print " <td>".$inform['access'] . "</td> "; 
    Print " <td>".$inform['sports'] . "</td> "; 
    Print " <td>".$inform['beach'] . " </td>";
    Print" <td>".$inform['atlantic'] ."\n". $inform['bluegill']. "\n". $inform['brook']. "\n". $inform['brown']. 
    "\n". $inform['catfish']. "\n". $inform['coho']. "\n". $inform['crappie']. "\n". $inform['king']. "\n". $inform['lake']. 
    "\n". $inform['largemouth']. "\n". $inform['muskie']. "\n". $inform['pike']. "\n". $inform['perch']. "\n". $inform['pumkinseed'].  
    "\n". $inform['rainbow']. "\n". $inform['rock']. "\n". $inform['smallmouth']. "\n". $inform['steelhead'].  "\n". $inform['sturgeon'].
    "\n". $inform['walleye'].   "</td>";
    Print " <td>".$inform['comments'] . "</td> "; "</tr>"; 
    } 

    Print "</table>"; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T01:17:26.677

我想知道您尝试了哪个教程，但是您的检索尝试违反了所有 SQL 规则。

```
$stm = $dbh->prepare("SELECT * FROM info");
$stm->execute();
$data = $stm->fetchAll();
?>
<table>
<? foreach ($data as $row): ?>
  <tr>
<? foreach ($row as $value): ?>
    <td><?=$value?></td>
<? endforeach ?>
  </tr>
<? endforeach ?>
</table> 
```

只是一个例子。我相信你首先需要一个关于基本 SQL 的教程。

# python - numpy：在二维数组中查找对称值

> ID：16125957
> 
> 赞同：3
> 
> 时间：2013-04-20T22:43:43.470
> 
> 标签：python, arrays, matrix, numpy, symmetric

我必须分析一个二次二维 numpy 数组 LL 的对称值（LL[i,j] == LL[j,i]）而不是零。

有没有更快、更“类似数组”的方式没有循环来做到这一点？有没有一种简单的方法来存储值的索引以供以后使用，而无需创建数组并在每个循环中附加索引的元组？

这是我存储索引的经典循环方法：

```
IdxArray = np.array() # Array to store the indices
for i in range(len(LL)):
    for j in range(i+1,len(LL)):
        if LL[i,j] != 0.0:
            if LL[i,j] == LL[j,i]:
                IdxArray = np.vstack((IdxArray,[i,j])) 
```

稍后使用索引：

```
for idx in IdxArray:
    P = LL[idx]*(TT[idx[0]]-TT[idx[1]])
    ... 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-20T22:51:57.893

```
>>> a = numpy.matrix('5 2; 5 4')
>>> b = numpy.matrix('1 2; 3 4')
>>> a.T == b.T
matrix([[False, False],
        [ True,  True]], dtype=bool)
>>> a == a.T
matrix([[ True, False],
        [False,  True]], dtype=bool)
>>> numpy.nonzero(a == a.T)
(matrix([[0, 1]]), matrix([[0, 1]])) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-21T00:50:47.407

这个怎么样：

```
a = np.array([[1,0,3,4],[0,5,4,6],[7,4,4,5],[3,4,5,6]])

np.fill_diagonal(a, 0) # changes original array, must be careful

overlap = (a == a.T) * a
indices = np.argwhere(overlap != 0) 
```

结果：

```
>>> a
array([[0, 0, 3, 4],
       [0, 0, 4, 6],
       [7, 4, 0, 5],
       [3, 4, 5, 0]])
>>> overlap
array([[0, 0, 0, 0],
       [0, 0, 4, 0],
       [0, 4, 0, 5],
       [0, 0, 5, 0]])
>>> indices
array([[1, 2],
       [2, 1],
       [2, 3],
       [3, 2]]) 
```

# opengl - glsl 是否有任何调试器？

> ID：16125959
> 
> 赞同：0
> 
> 时间：2013-04-20T22:44:00.443
> 
> 标签：opengl, ubuntu, glsl

我无法在 glsl 文件中打印任何语句。是否有 glsl 文件的调试器？就像我发现了一个叫做 glslDevil 的东西一样，但我只找到了损坏的链接。glsl 还有其他调试器吗？

问候， G

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T00:23:06.617

你没有说你正在使用哪个操作系统。在 MacOS 上，您有[OpenGL Shader Builder](http://developer.apple.com/library/mac/#documentation/GraphicsImaging/Conceptual/OpenGLShaderBuilderUserGuide/Introduction/Introduction.html)。它不完全是一个调试器，但你可以在其中输入 glsl 程序，如果它是一个有效的程序，它会显示错误并显示输出。其他操作系统可能有类似的应用程序。

通常，您不能单步执行 glsl 程序或添加打印语句，因为该程序同时在多个（通常是数百个）片段上执行。此外，它在 GPU 上，因此打印不实用。

我使用的一种技术是修改程序以将调试输出生成为颜色。例如，在处理法线时，将 x、y 和 z 放入红色、绿色和蓝色通道，这样我就可以检查它们是否指向我期望的位置。

如果您解释您要调试的内容，我们可能会提供其他建议。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-21T00:34:12.597

我认为 glslDevil 可以在这个站点上找到：http: [//www.vis.uni-stuttgart.de/glsldevil/](http://www.vis.uni-stuttgart.de/glsldevil/) 两个下载，适用于 windows 和 linux 对我来说都很好。

# java - 从一百万条记录中查询 - Linq4j

> ID：16125960
> 
> 赞同：1
> 
> 时间：2013-04-20T22:44:00.853
> 
> 标签：java, google-app-engine, linq4j

我刚刚用 GAE 和我的持久映射完成了 Linq4j 的测试：

```
@Test
public void testLinq4j() {
    Map<Long, String> map = Humongous.getMap("Users", LongParser.getInstance());

    map.put(1L, "user1");
    map.put(2L, "user2");

    assertNotNull(map.get(1L));
    assertNotNull(map.get(2L));

    final List<Grouping<Object, Map.Entry<Long, String>>> result =
              new ArrayList<Grouping<Object, Map.Entry<Long, String>>>();

    Linq4j.asEnumerable(map.entrySet())
        .where(new Predicate1<Map.Entry<Long,String>>() {
            @Override
            public boolean apply(Map.Entry<Long, String> v1) {
                if (v1.getKey().equals(2L)){ // filter only those with ID == 2
                    return true;
                }
                return false;
            }
        })
        .groupBy(
                new Function1<Map.Entry<Long, String>, Object>() {
                    public Object apply(Map.Entry<Long, String> entry) {
                        return entry.getValue();
                    }
                })
                .into(result);

    assertEquals(2, map.size());
    assertEquals(1, result.size());
} 
```

**问题是：**

*   Linq4j 如何在内部使用`map.entrySet()`or 使用它的方法`asEnumerable`？在我的例子中`map.entrySet()`，最终归结为一个数据存储`PreparedQuery`，它对数据存储中与查询匹配的所有记录都有一个安全的迭代器——在持久映射的情况下，它匹配特定的每条记录`kind`；这可能真的很大。如果我的地图（如上面的“用户”）包含一百万条记录，那么这个查询会非常缓慢地迭代每个`Map.Entry`？

*   当它找到一个可能导致 HeapOverFlowError 的 java.util.List`时会`linq4j`调用...`toList()``Collection<E>? I ask this because calling this methods copied all the Datastore keys into`

# sql - 预订系统上的 sql join 或 union 查询

> ID：16125961
> 
> 赞同：0
> 
> 时间：2013-04-20T22:44:02.280
> 
> 标签：sql, join, union

在加入、工会、ON-s 等方面，我不是很有经验，但我有一所学校，我需要从两张表中选择客户名称，贵宾和普通客户。

我尝试了两种方法，但不幸的是没有任何效果：//1

```
SELECT Hotel_Rooms.Book_From, Hotel_Rooms.Book_To, Hotel_Rooms.[Book_To]-[Book_From] AS Booked_Days, Hotel_Rooms.[Price_Per_Night]*[Booked_Days] AS Price, Reg_Customers.Cust_name
FROM Reg_Customers
UNION
SELECT Hotel_Rooms.Book_From, Hotel_Rooms.Book_To, Hotel_Rooms.[Book_To]-[Book_From] AS Booked_Days, Hotel_Rooms.[Price_Per_Night]*[Booked_Days] AS Price, Vip_Customers.Cust_name
FROM Vip_Customers
INNER JOIN Hotel_Rooms ON Reg_Customers.Cust_ID = Hotel_Rooms.Cust_ID && Vip_Customers.Cust_ID = Hotel_Rooms.Cust_ID
ORDER BY Hotel_Rooms.[Price_Per_Night]*[Booked_Days] DESC; 
```

//2

```
SELECT Hotel_Rooms.Book_From, Hotel_Rooms.Book_To, Hotel_Rooms.[Book_To]-[Book_From] AS Booked_Days, Hotel_Rooms.[Price_Per_Night]*[Booked_Days] AS Price, Reg_Customers.Cust_name, Vip_Customers.Cust_name
FROM Reg_Customers, Vip_Customers
INNER JOIN Hotel_Rooms ON Reg_Customers.Cust_ID = Hotel_Rooms.Cust_ID && Vip_Customers.Cust_ID = Hotel_Rooms.Cust_ID
ORDER BY Hotel_Rooms.[Price_Per_Night]*[Booked_Days] DESC; 
```

没有一个查询可以正确选择、连接表。你能帮忙吗？表格方案，如果这些有帮助

房间 { Rooms_ID, Cust_ID, Room_Capacity, Available, Book_Time, Book_Price_Per_Night, Book_From, Book_To }

普通客户 {Cust_ID, Cust_Name, Cust_Phone, Cust Card} vip {Cust_ID, Cust_Name, Cust_Phone, Cust Card}

谢谢你。如果您可以提供一个有效的查询，无论是＃1 还是＃2 版本，那就太好了，谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T23:05:27.293

不知道您的数据库有点棘手，但是根据您提供的内容，此联合/排序可能会起作用

```
{ 
    SELECT hr.Book_From, hr.Book_To, hr.[Book_To]-[Book_From] AS Booked_Days, hr.[Price_Per_Night]*[Booked_Days] AS Price, rc.Cust_name
    FROM Reg_Customers rc
    LEFT JOIN Hotel_Rooms AS hr ON rc.Cust_ID = hr.Cust_ID
} UNION {
    SELECT hr.Book_From, hr.Book_To, hr.[Book_To]-[Book_From] AS Booked_Days, hr.[Price_Per_Night]*[Booked_Days] AS Price, vc.Cust_name
    FROM Vip_Customers vc
    LEFT JOIN Hotel_Rooms AS hr ON vc.Cust_ID = hr.Cust_ID
}
ORDER BY [Price_Per_Night]*[Booked_Days] DESC; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-20T22:47:48.217

你的第二种方法更好，但你犯了一个错误。您可以像这样连接表：

```
from table1, table2
where table1.id = table2.id 
```

或像这样（哪个更好）

```
from table1 join table2 on table1.id = table2.id 
```

但您不能在同一个查询中同时使用这两种技术。这就是您在第二个示例中的内容。

**编辑从这里开始**

再次阅读您的问题，联合查询是一种更好的方法。但是，您在这里犯了两个错误：

```
FROM Vip_Customers
INNER JOIN Hotel_Rooms ON Reg_Customers.Cust_ID = Hotel_Rooms.Cust_ID 
&& Vip_Customers.Cust_ID = Hotel_Rooms.Cust_ID
ORDER BY Hotel_Rooms.[Price_Per_Night]*[Booked_Days] DESC; 
```

第一个错误是在逻辑上。您从 vip 客户中选择，但从普通客户表中加入。第二个错误是语法。将“&&”替换为“和”。据我所知，没有任何 RDBMS 支持“&&”。

# python - IndexError：从 XML 文件解析元素时列出索引 Python

> ID：16125962
> 
> 赞同：0
> 
> 时间：2013-04-20T22:44:12.213
> 
> 标签：python, xml, variables

我对 python 很陌生，但是我设法创建了一个解析器 python 程序，它调用基于 Web 的 xml 文件并将元素存储在一个数组中。然后读取这些包含 xml 元素的数组并将其发送到 localhost 数据库。

我在写入数据库时​​遇到“IndexError”问题，因为其中一个数组包含的元素少于其他数组，这意味着会产生此错误。是否有人对如何允许我将字符串附加到数组有任何建议 - 如果 xml 文件中没有元素？

获取 xml 元素并将其分配给“stop_times”数组的代码 -

```
stop_times = []
for stop in event_main:
    stop_time = stop.getElementsByTagName("stop_time")[0]
    stop_times.append(stop_time) 
```

是否可以检查“stop_time”变量是否为空/空，如果是，stop_time 等于字符串“null”？非常感谢任何帮助，凯伦

编辑：我的正确代码（可能对其他人有帮助）：

```
stop_times = []
for stop in event_main:
    try:
        stop_time = stop.getElementsByTagName("stop_time")[0].childNodes[0].nodeValue
        stop_times.append(stop_time)
    except IndexError: 
        stop_times.append("none") 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T23:03:06.807

如果我理解你的正确，这可能会对你有所帮助。

```
stop_times = []
for stop in event_main:

    try:
        stop_time = stop.getElementsByTagName("stop_time")[0]
        stop_times.append(stop_time.firstChild.nodeValue)
    except IndexError:
        stop_times.append("none")
        break 
```

# python - Python：尝试验证电话号码等输入以确保它是 10 个数字字符，如果不是则提示和错误

> ID：16125964
> 
> 赞同：0
> 
> 时间：2013-04-20T22:44:17.417
> 
> 标签：python, loops, validation

我希望程序删除 () 和 - 当有人进入他们的电话时可能会输入的。如果不产生循环，我还想确保它是 10 个数字字符长。

```
p = raw_input("Please enter your 10 digit Phone Number")
def only_numerics(p):
    seq_type= type(p)
    return seq_type().join(filter(seq_type.isdigit, p))
p = only_numerics(p)

valid_phone = False
while not valid_phone:

    if p > "0000000000" and p < "9999999999" and len(p) == 10 :
        print "You have entered " + p
        valid_phone=True
    else:
        print "You have entered an invalid choice" 
```

如果我输入少于 10 个数字，我会重复 else 打印命令。我希望它返回原始输入（“请输入您的 10 位电话号码”）。有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-20T23:03:18.257

除了像 James 指出的那样在循环内设置“raw_input”之外，您可能对使用[正则表达式](http://docs.python.org/2/library/re.html)感兴趣并使您的代码更漂亮：

```
import re
phone_re = re.compile(r'\d{10}$')

def only_numerics(p):
    seq_type= type(p)
    return seq_type().join(filter(seq_type.isdigit, p))

valid_phone = False
while not valid_phone:
    p = raw_input("Please enter your 10 digit Phone Number: ")
    p = only_numerics(p)
    if phone_re.match(p):
        print "You have entered " + p
        valid_phone=True
    else:
        print "You have entered an invalid choice" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-20T22:53:28.790

它循环回到 print 语句，因为您在 while 循环之外定义了 p 。更改此设置将解决循环问题：

```
valid_phone = False
while not valid_phone:

    p = raw_input("Please enter your 10 digit Phone Number")
    def only_numerics(p):
        seq_type= type(p)
        return seq_type().join(filter(seq_type.isdigit, p))
    p = only_numerics(p)

    if p > "0000000000" and p < "9999999999" and len(p) == 10 :
        print "You have entered " + p
        valid_phone=True
    else:
        print "You have entered an invalid choice" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-08-03T12:29:36.263

def val_number(input_num):

```
valid_num=re.findall(r'\d+',input_num)
if len(valid_num[0])>10:
    print('You have entered more than 10 digits')
else:
    return(valid_num) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-05-27T10:59:58.270

此 python 代码验证 11 位手机号码：

```
valid = True
mobile_number = str(input("What is your mobile number? "))
while len(mobile_number) != 11 or mobile_number[0] != "0" or mobile_number[1:].isdigit() == False:
    mobile_number = str(input("Please enter a valid mobile number: "))
    valid = False
print("Your mobile number is valid") 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-03-27T15:16:15.880

而（真）：

```
try:
    phone_number=int(input("please enter the phone number:no spaces in between: \n"))
except ValueError:
    print("mismatch")
    continue
else:
    phone=str(phone_number)
    if(len(phone)==10):
        break
    else:
        print("10 digits please ")
        continue 
```

# php - 标头 X-csrftoken

> ID：16125965
> 
> 赞同：0
> 
> 时间：2013-04-20T22:44:17.937
> 
> 标签：php, javascript, http-headers, csrf

我需要以某种形式创建一个登录脚本。问题是登录需要 X-scsrf-token。我有令牌本身，但问题是我找不到发送此参数的方法。谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T23:05:48.713

我在[XMLHttpRequest](https://developer.mozilla.org/en-US/docs/DOM/XMLHttpRequest)文档中发现的最明显的候选者是[setRequestHeader()](https://developer.mozilla.org/en-US/docs/DOM/XMLHttpRequest#setRequestHeader%28%29)：

> **设置请求头（）**
> 
> 设置 HTTP 请求标头的值。您必须在 open() 之后、send() 之前调用 setRequestHeader()。
> 
> ```
> void setRequestHeader(
>    DOMString header,
>    DOMString value
> ); 
> ```
> 
> **参数**
> 
> `header`要设置其值的标头的名称。
> `value`要设置为标头正文的值。

# php - CakePHP - 选择框项目未正确出现在 POSTED 数据中

> ID：16125972
> 
> 赞同：0
> 
> 时间：2013-04-20T22:44:38.983
> 
> 标签：php, cakephp

我有以下带有 CakePHP 的选择框。

```
//Users/settings.ctp

$options = array('NYC', 'LA');      

    echo $this->Form->create('Location');
    echo $this->Form->input('Location', array('type' => 'select', 'options' => $options)); 
    echo $this->Form->end(__('Submit')); 
```

在 UsersController 我有

```
public function settings($id = null){
    if ($this->request->is('post')) {
        $location = $this->request->data;
        //$location = $location['Location']['Location'][0];
        $this->Session->setFlash( __(print_r($location))); //displays '1' in the alert no matter the selection
    }
} 
```

当我在原始数据上使用 print_r 时，它显示以下内容。

```
Array ( [Location] => Array ( [Location] => 0 ) ) 
```

所以我有两个问题

1.  正在选择项目的索引，而不是项目本身
2.  setFlash 窗口始终显示“1”。在列表框工作后，我需要进行一些字符串操作，很高兴看到输出。

**更新 - 我进入 /Cake/View/Helper/FormHelper.php 并做了一些挖掘**

我在以下行做了一个 print_r

```
$attributes = $this->_initInputField($fieldName, array_merge(
        (array)$attributes, array('secure' => self::SECURE_SKIP)
    )); 
```

这导致

```
Array ( [value] => 0 [class] => [name] => data[Users][Location] [id] => UsersLocation ) 
```

传递的值为 0，我在任何地方都看不到位置

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T23:50:56.563

您正在为“位置”模型创建一个表单，但您需要指定选择用于哪个字段：

```
echo $this->Form->input('Location.location', array('type' => 'select', 'options' => $options)); 
```

或者，如果它实际上不是用于“位置”模型，则将表单中的“位置”替换为`create()`正确的模型，或者`null`如果它根本不是模型，则使用：

$this->Form->create(null);

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-21T00:45:38.860

我想通了，并决定其他人可能会觉得它很有用。

数组需要格式化为

```
$options = array(
   'value' => 'Display'); 
```

所以，我用

```
$options = array(
    'NYC' => 'NYC',
    'LA' => 'LA'); 
```

# javascript - 将字符串传递给jquery函数

> ID：16125973
> 
> 赞同：0
> 
> 时间：2013-04-20T22:44:38.770
> 
> 标签：javascript

```
<script>

   $(document).ready(function() {   
   $(".tweets").liveTweets({operator: "#google"});
            });
</script> 
```

我喜欢将#google 作为变量，以便我可以根据需要更改股票代码。我试图用 php 来回应。但是，它打破了实时推文 jquery。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T22:59:28.413

```
<?php
  $operator = "#google";
?>

<script>

   $(document).ready(function() {   
   $(".tweets").liveTweets({operator: <?php echo json_encode($operator)?>});
            });
</script> 
```

编辑：感谢您的[评论](https://stackoverflow.com/questions/16125973/passing-string-to-jquery-function/16126081#comment23034302_16126081)@icktoofay。

他是对的，我们不需要将输出用双引号括起来，它为我们做到了。我刚刚更新了它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-20T23:08:41.523

HTML属于`.html`文件，CSS属于`.css`文件，JS属于`.js`文件。如果你想从服务器（在这种情况下是 PHP）向 JavaScript 传递额外的数据，你应该使用[`[data-*]`attributes](http://www.w3.org/html/wg/drafts/html/master/dom.html#embedding-custom-non-visible-data-with-the-data-%2a-attributes)。

无论您在哪里定义`.tweets`元素，都应该将要用作`operator`自定义`data-*`属性的值传递：

[HTML：]

```
<?php
    $operator = '#google';
?>
<div class="tweets" data-operator="<?php echo htmlspecialchars($operator) ?>">
    ...contents...
</div> 
```

在您单独的 JS 文件中，您可以在初始化小部件时使用自定义服务器变量：

[JS：]

```
$('.tweets').each(function () {
    $(this).liveTweets({
        operator: $(this).data('operator')
    });
}); 
```

或者，您可以使用该`data-*`属性来包含整个 JSON 对象来初始化小部件：

[HTML：]

```
<?php
    $liveTweets = array(
        'operator' => '#google'
    );
?>
<div class="tweets" data-live-tweets="<?php echo htmlspecialchars(json_encode($liveTweets)) ?>">
    ...contents...
</div> 
```

[JS：]

```
$('.tweets').each(function () {
    $(this).liveTweets($(this).data('liveTweets'));
}); 
```

此外，您可以根据具有适当`data-*`属性的条件选择元素：

[JS：]

```
$('[data-live-tweets]').each(function () {
    $(this).liveTweets($(this).data('liveTweets'));
}); 
```

# javascript - JavaScript 中的响应式 http 请求

> ID：16125974
> 
> 赞同：0
> 
> 时间：2013-04-20T22:44:47.247
> 
> 标签：javascript, jquery, knockout.js

对不起我的英语不好。我做了一些测试客户端来测试我们的网络服务器，但我对我的工作不满意。请帮助我改进我的代码。

我想发出串行 HTTP 请求。我有带有测试请求的数组：

```
Aua.Queries = ko.observableArray([
    new Query("/srv?key=value&key2=someValue", 300, "comment for this request"), 
    new Query("/srv?someKey=SomeValue", 0, "comment for this request")
]); 
```

（在 Aua.Queries 数组中 24 个查询）

我对 Aua.Queries observableArray 的包装：

```
function Query(query, result, comment) {
    var me = this;
    me.Query = "http://mydomain.com?" + query;
    me.Result = result;
    me.Comment = comment;
    me.Selected = ko.observable(false);
} 
```

当单击发送处理程序时，我这样做：

```
Aua.SendHandler = function () {
    Aua.Loading(true);
    Aua.Responses([]);
    if (Aua.Advanced() == true) {
        var queries = Aua.Queries();
        console.log("Selected Request Count: ",
            Enumerable.From(queries).Where("$.Selected() == true").Select(function(query) {
                console.log("Result: ", query.Result);
                Aua.Url(query.Query);
                query.Selected(false);
                sendRequest();
            }).Count());
    }
    else if (Aua.RequestCount() > 1) {
        for (var i = Aua.RequestCount(); i > 0; i--) {
            Aua.RequestCount(i);
            setUrlByStatus();
            sendRequest();
        }
    }
    else
        sendRequest();
}; 
```

和`sendRequest`处理程序：

```
function sendRequest() {

    console.log("Sending request to: ", Aua.Url());

    $.ajax(Aua.Url(), {
        dataType: 'text',
        cache: false,
        type: 'GET',
        success: function(data, status, xhr) {
            Aua.Responses.push({
                "Data": data,
                "Status": xhr.status + " " + xhr.statusText
            });
            prettyPrint();
        },
        error: function(xhr, status, data) {
            Aua.Responses.push({
                "Data": data,
                "Status": xhr.status + " " + xhr.statusText
            });
            prettyPrint();
            console.log("Error: ", Aua.Responses());
        },
        complete: function() {
            Aua.Loading(false);
        }
    });
} 
```

设置请求格式的类型。

```
function setUrlByStatus() {
    if (Aua.RequestStatus() === "error")
        Aua.Url(Aua.Queries()[Math.floor(Math.random() * Aua.Queries().length)].Query);
    else
        Aua.Url(
            "http://mydomain.com?" +
                "action=" + Aua.Action() +
                "&number=" + Aua.Number());
} 
```

A 有 3 种类型的发送请求。

1.  从 Aua.Queries 数组发送多个请求。
2.  根据计数发送请求。
3.  并在输入中发送 1 个请求。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T14:19:48.423

我做我自己。

我学会了如何组织我的代码

```
/*
    Client requests for tes our server

Make different demands on the Serer.
Query setings:
     Send something that is in the input.
     Send to a specified number of times queries and allow the user to choose what kind of answer he wants, success or error.
         For successful actions are random data request: email, account, paper.
     Send requests from the table.

     All the answers to print. Prettify XML response.

     After the data to make a progress report
         The following table show: Status Code, Comments, Quantity.

     HTTP status display for each response received and paint the fatal errors in red.
*/

(function (global, undefined) {

    function ajaxObject(url, query, response, loading) {

        console.log("Query: ", query());

        var catched = query();
        return $.ajax({
            cache: false,
            dataType: "text",
            type: "GET",
            url: url() + catched,
            success: function (data, status, xhr) {
                response.push({
                    Data: data,
                    Query: catched,
                    Status: xhr.status + ' ' + xhr.statusText
                });
            },
            error: function (xhr, status, data) {
                response.push({
                    Data: data,
                    Query: catched,
                    Status: xhr.status + " " + xhr.statusText
                });
            },
            complete: function () {
                loading(false);
                prettyPrint();
            }
        });
    }

    function Query(query, result, comment) {
        var me = this;
        me.Query = query;
        me.Result = result;
        me.Comment = comment;
        me.Selected = ko.observable(false);
        me.Describtion = ko.observable(comment);
        me.DescribtionComment = function (data) { me.Describtion(data.Comment); };
        me.DescribtionQuery = function (data) { me.Describtion(data.Query); };
    }

    var queries = [
        new Query("/zibaba?paper=go&id=1&account=someacc&date=20130221174323", 453, "Error. Expected parameter test"),
        new Query("/zibaba?paper=go&account=someacc", 0, "Expected parameter test"),
        new Query("/zibaba?paper=do&id=3&account=someacc&date=20130221174323", 1, " Forbidden"))
    ];

    var Aua = global.Aua = new function Aua() { };
    Aua.Configuration = {
        Advanced: {
            Queries: queries,
            QueriesSelectAll: ko.observable(false),
            Toggle: ko.observable(false)
        },
        Counter: ko.observable(1),
        Query: ko.observable(),
        Url: ko.observable(),
        Status: ko.observable("success")
    };
    Aua.Configuration.Advanced.QueriesSelectAll.subscribe(function () {
        var qs = Aua.Configuration.Advanced.Queries;
        for (var i = 0; i < qs.length; i++)
            qs[i].Selected(!qs[i].Selected());
    });
    Aua.IsLoading = ko.observable(false);
    Aua.SendHandler = function() {
        Aua.IsLoading(true);
        Aua.Responses([]);
        if (Aua.Configuration.Advanced.Toggle() === true) {
            $.when(Enumerable.From(Aua.Configuration.Advanced.Queries)
                .Where("$.Selected() === true")
                .Select(function(current) {
                    Aua.Configuration.Query(current.Query);
                    return ajaxObject(Aua.Configuration.Url, Aua.Configuration.Query, Aua.Responses, Aua.IsLoading);
                }).ToArray());
        } else {
            $.when(Enumerable.Generate(function() {
                var papers;

                if (Aua.Configuration.Status() == "success") {
                    papers = ["do", "go"];

                    Aua.Configuration.Query(
                        "?account=" + Math.floor(Math.random() * 1234567 + 1) +
                            ("&paper=" + papers[Math.floor(Math.random() * papers.length)]) +
                            ("&id=" + Math.floor(Math.random() * 123754 + 1)));
                } else if (Aua.Configuration.Status() == "error") {
                    papers = ["do", "go", "justdoit"];
                    var accounts = [Math.floor(Math.random() * 1234567 + 1), " ", Math.floor(Math.random() * 4532 + 1)],
                        ids = [" ", (Math.floor(Math.random() * 123754 + 1)), (Math.floor(Math.random()))];

                    Aua.Configuration.Query(
                        "?account=" + accounts[Math.floor(Math.random() * accounts.length)] +
                            "&paper=" + (papers[Math.floor(Math.random() * papers.length)]) +
                            "&id=" + (ids[Math.floor(Math.random() * ids.length)]));
                }

                return ajaxObject(Aua.Configuration.Url, Aua.Configuration.Query, Aua.Responses, Aua.IsLoading);
            }, Aua.Configuration.Counter()).ToArray());
        }
    };
    Aua.ResetHandler = function () { location.reload(); };
    Aua.Statistics = {
        Code: ko.observable(0),
        Comment: ko.observable(0),
        Quantity: ko.observable(0)
    };
    Aua.Responses = ko.observableArray([{
        Data: ko.observable(),
        Status: ko.observable(-1)
    }]);
    Aua.Responses([]);

    $(document).on("ready", function () {
        ko.applyBindings(Aua);
    });
 })(window); 
```

对不起我的英语不好

# cocos2d-iphone - CCParticleSystem四重停止/暂停/恢复/播放能力？

> ID：16125978
> 
> 赞同：2
> 
> 时间：2013-04-20T22:45:11.457
> 
> 标签：cocos2d-iphone, ccparticlesystem

查看此类中是否有暂停/恢复方法。
类似：[CCParticleSystemQuad resume];
我错过了吗？或不存在？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T22:49:02.410

不是正式的。但是您可以编辑源代码，添加一个 BOOL 属性`paused`并检查更新方法中的暂停标志：

```
-(void) update:(ccTime)delta
{
    if (_paused == NO)
    {
        // update particles code here...
    }
} 
```

不能保证它会起作用，但值得一试。

也可能不更改代码，但这也会影响其他计划的方法和操作：

```
[particleSystem pauseSchedulerAndActions]; 
```

恢复：

```
[particleSystem resumeSchedulerAndActions]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-10T19:39:57.020

我使用的另一个技巧是 setEmissionRate() 函数。暂停粒子系统：

> setEmissionRate(0);

恢复粒子系统：

> setEmissionRate(latestValue);

我希望这对你有好处:)

# c++ - 运行时错误 - 变量 arr_processes 周围的堆栈已损坏

> ID：16125980
> 
> 赞同：0
> 
> 时间：2013-04-20T22:45:24.077
> 
> 标签：c++, c

这段代码是为操作系统创建队列我使用结构来实现我的进程并使用 arr_processes 来处理所有这些进程，并使用 new_processes 数组根据其到达时间对这些进程进行排序

但是当我在 Visual Studio 2010 上运行此代码时，它会产生此运行时错误 Run-Time Check Failure #2 - 变量 arr_processes 周围的堆栈已损坏！

这是代码

```
#include <stdio.h>
#include <stdlib.h>

typedef struct
{
    int id;
    int arr_time;
    int serv_time;
    int deadline;
} process;

void print_process(process n);
int main()
{
    process arr_processes[8];
    process new_processes[8];
    process real_processes[3];
    process ready_processes[5];
    process tmp_process[1];
    int length_ready;
    int i,length,j;
    int length_real;

    arr_processes[0].id=1;
    arr_processes[0].arr_time=12;
    arr_processes[0].serv_time=4;
    arr_processes[0].deadline=0;

    arr_processes[1].id=2;
    arr_processes[1].arr_time=10;
    arr_processes[1].serv_time=5;
    arr_processes[1].deadline=0;

    arr_processes[2].id=3;
    arr_processes[2].arr_time=9;
    arr_processes[2].serv_time=2;
    arr_processes[2].deadline=0;

    arr_processes[3].id=4;
    arr_processes[3].arr_time=8;
    arr_processes[3].serv_time=4;
    arr_processes[3].deadline=10;

    arr_processes[4].id=5;
    arr_processes[4].arr_time=5;
    arr_processes[4].serv_time=2;
    arr_processes[4].deadline=8;

    arr_processes[5].id=6;
    arr_processes[5].arr_time=3;
    arr_processes[5].serv_time=3;
    arr_processes[5].deadline=0;

    arr_processes[6].id=7;
    arr_processes[6].arr_time=2;
    arr_processes[6].serv_time=3;
    arr_processes[6].deadline=0;

    arr_processes[7].id=8;
    arr_processes[7].arr_time=1;
    arr_processes[7].serv_time=1;
    arr_processes[7].deadline=28;

    length=sizeof(arr_processes)/sizeof(arr_processes[0]);

    printf("\t length of the processes=%i\n\n",length);
    printf("\t The Original processes \n\n");
    for(i=0;i<8;i++)
        print_process(arr_processes[i]);

    // now we want to sort the processes according to their arrival time
    for(i=0;i<8;i++)
    {
        new_processes[i]=arr_processes[i];
    }

    for(i=0;i<length;i++)
    {
        for(j=0;j<length-i;j++)
        {
            if((new_processes[j].arr_time)>(new_processes[j+1].arr_time))
            {
                tmp_process[0]=new_processes[j];
                new_processes[j]=new_processes[j+1];
                new_processes[j+1]=tmp_process[0];
            }
        }
    }

    printf("\t The New processes \n\n");
    for(i=0;i<8;i++)
        print_process(new_processes[i]); // the new queue

    ready_processes[0]=arr_processes[0];
    ready_processes[1]=arr_processes[1];
    ready_processes[2]=arr_processes[2];
    ready_processes[3]=arr_processes[5];
    ready_processes[4]=arr_processes[6];

    length_ready=sizeof(ready_processes)/sizeof(ready_processes[0]);
    // now we want to design the ready queue
    for(i=0;i<length_ready;i++)
    {
        for(j=0;j<length_ready-i;j++)
        {
            if((ready_processes[j].arr_time)>ready_processes[j+1].arr_time)
            {
                tmp_process[0]=ready_processes[j];
                ready_processes[j]=ready_processes[j+1];
                ready_processes[j+1]=tmp_process[0];
            }
        }
    }

    printf("\t The ready processes \n\n");
    for(i=0;i<length_ready;i++)
    print_process(ready_processes[i]); // the ready  queue

    // now we want to design the ready real queue for the shortest deadline first
    // we donnot need to check for the new proesses at each instant of time
    //but we need to check for the service time from now

    real_processes[0]=arr_processes[3];
    real_processes[1]=arr_processes[4];
    real_processes[2]=arr_processes[7];

    length_real=sizeof(real_processes)/sizeof(real_processes[0]);
    for(i=0;i<length_real;i++)
    {
        for(j=0;j<length_real-i;j++)
        {
            if((real_processes[j].deadline)>real_processes[j+1].deadline)
            {
                tmp_process[0]=real_processes[j];
                real_processes[j]=real_processes[j+1];
                real_processes[j+1]=tmp_process[0];
            }
        }
    }

    printf("\t The real processes \n\n");
    for(i=0;i<length_real;i++)
    print_process(real_processes[i]); // the ready real queue

    // removed real process
    process removed_real;
    removed_real.id=0;
    removed_real.arr_time=0;
    removed_real.serv_time=0;
    removed_real.deadline=0;

    process running_process;
    running_process.id=0;
    running_process.arr_time=0;
    running_process.serv_time=0;
    running_process.deadline=0;

    int counter=0;
    int start_time;

    while(counter<=28)
    {
        printf("when time = %i\n\n",counter);
        // printf("\t The real processes when the counter=%i \n\n",counter);
        // for(i=0;i<length_real;i++)
        // print_process(real_processes[i]); // the ready real queue

        // first we must check for the real processes
        for(i=0;i<length_real;i++)
        {
            if((counter==real_processes[i].arr_time)
            &&((real_processes[i].deadline)-counter)>=(real_processes[i].serv_time))
            {
                running_process=real_processes[i];
                printf("The non zero deadline process is:%i\n",running_process.id);
                real_processes[i]=removed_real;
                start_time=counter;   // real process

                while(counter!=(start_time+running_process.serv_time))
                {
                    printf("At time = %i,The Running Process is...\n",counter);
                    print_process(running_process);
                    counter++;
                }
            }
        }

        counter++;
    }

    return 0;
}

void print_process(process n)
{
    if(n.deadline!=0)
    printf("ID=%i\narr_time=%i\nserv_time=%i\ndeadline=%i\n\n\n",n.id,n.arr_time,n.serv_time,n.deadline);
    else if(n.deadline==0)
    printf("ID=%i\narr_time=%i\nserv_time=%i\n\n\n",n.id,n.arr_time,n.serv_time);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-20T23:00:15.567

当您用完索引时，这是一个排序示例：

```
for(i=0; i<length - 1; i++)
{
     for(j=i + 1;j<length;j++)
     {
         if((new_processes[j].arr_time)>(new_processes[i].arr_time))
         {
              tmp_process[0]=new_processes[j];
              new_processes[j]=new_processes[i] ;
              new_processes[i]=tmp_process[0] ;
         }
    }
} 
```

或者，您可以使用标准功能：

```
void qsort(void *base, size_t nmemb, size_t size,
       int (*compar)(const void *, const void *)); 
```

定义一个比较函数：

```
int compare_by_arr_time(const void* a, const void* b)
{
    int a_int = ((const process*)a)->arr_time;
    int b_int = ((const process*)b)->arr_time;

    return a_int - b_int;  // or b_int - a_int
} 
```

并按如下方式使用它：

```
qsort(new_processes,
      sizeof(new_processes)/sizeof(new_processes[0]),
      sizeof(new_processes[0]),
      compare_by_arr_time); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-20T22:53:18.367

当您超出数组的范围时，您会遇到这些类型的错误。

```
for(i=0;i<length;i++)
 {
       for(j=0;j<length-i;j++)
       {
             if((new_processes[j].arr_time)>(new_processes[j+1].arr_time))
             {
                   tmp_process[0]=new_processes[j];
                   new_processes[j]=new_processes[j+1] ;
                   new_processes[j+1]=tmp_process[0] ;
             }
       }
 } 
```

在第一次迭代中`i = 0`，`j = 0`和`j`必须小于`8 - i`，即`8`。注意表达式`j+1`。此表达式将在`[1 ... 9]`最外层循环的第一次迭代期间返回范围内的值，因此，您将超出`new_processes`数组的范围。

有你的问题。

**编辑：**这个问题也可能出现在`for`第一个之后的循环中。

# c# - 动态数据库上下文

> ID：16125985
> 
> 赞同：1
> 
> 时间：2013-04-20T22:45:40.777
> 
> 标签：c#, entity-framework, entity-framework-5

我的应用程序有一个底层模型，我使用实体框架 DbContext 进行数据访问。除了基本应用程序之外，还有动态加载的模块，每个模块都由一个程序集表示，并在运行时由主应用程序加载（所有要加载的模块都在配置文件中进行配置）。模块可以进一步相互依赖，例如 ModC 需要加载 ModA 和 ModB。

模块为基础应用程序提供额外的视图和服务（即扩展基础应用程序）。大多数时候，他们会向基础应用程序添加额外的用例。

关于 DbContext 的实际问题：模块扩展数据库中的表数量或扩展现有表（通过从基本模型类继承）。

a) 有没有办法为模块提供统一的 DbContext 而无需在其 DbContext 中重写所有 DbSet<...>s？从基础应用程序的 DbContext 继承不起作用，因为模块可以依赖于多个其他模块，并且 C# 不支持多重继承。

b) 如何正确运行 Entity Framework 数据库迁移以正确配合加载模块中的所有迁移脚本？更准确地说：模块只允许添加/扩展现有的数据库结构，因此迁移应该在第一次加载模块时发生，一旦模块被卸载，更改不应该被删除，但是，如果模块被更新，数据库应该在下次加载模块时迁移。

希望有任何模式或想法可以在 C# / Entity Framework 中实现这样的场景。

编辑：在视图方面，它与 MVC 的可插入区域相比很容易实现： [动态扩展应用程序的功能？](https://stackoverflow.com/questions/11023748/dynamically-extending-features-of-an-application) 我希望数据层也有类似的东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T11:02:26.503

好吧，我猜如果您使用具有更多表的 dbContext，例如，每种情况下的业务逻辑都是不同的。因此，也许您可​​以执行以下操作：

1.- 定义一个接口，该接口具有 CRUD 操作和您需要使用数据库的其他方法。

2.- 实现一个实现此接口的存储库。您可以拥有许多存储库，因此每个存储库都使用不同的模块。

3.- 在您的主应用程序中，您使用接口，该接口在每种情况下都使用您需要的存储库进行实例化。所以你调用接口的方法，在主应用程序中总是有相同的代码。只需要知道何时使用存储库或其他。这可以通过反射或用作决定使用哪个存储库的工厂的类来完成。

# asp.net - 找不到服务器错误

> ID：16125986
> 
> 赞同：0
> 
> 时间：2013-04-20T22:45:43.383
> 
> 标签：asp.net, web

我是网络编程新手，想在我的网站上设置 Hello World。我有 web.config 作为

```
<?xml version="1.0" encoding="utf-8" ?>
<configuration>
  <system.web>
  </system.web>
</configuration> 
```

和 index.html 作为

```
<html>
 <head>
  <title>Sample "Hello, World" Application</title>
 </head>
 <body bgcolor=white>
  <table border="0" cellpadding="10">
   <tr>
    <td>
      <h1>Sample "Hello, World" Application</h1>
    </td>
   </tr>
  </table>
  <p>This is the home page for World. </p>
 </body>
</html> 
```

但是，当我访问 www.mywebsite.com 时，我得到一个未找到服务器的错误。

我哪里错了？我错过了一个文件吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T00:35:54.673

看起来你正在学习编写代码。如果是这种情况，请使用您的主机文件创建自定义域名：[https://en.wikipedia.org/wiki/Hosts_(file)](https://en.wikipedia.org/wiki/Hosts_(file))

可能在 %SystemRoot%\system32\drivers\etc\hosts

编辑主机文件非常容易。

如果您正在学习管理计算机（通过设置 iis、配置 IP 地址、域名等），那么您希望继续学习 DNS。SeverFault 可能有更多建议，我不确定。

# networking - 基于 OSI 模型的数据包如何通过 Internet 从一台计算机传输到另一台计算机

> ID：16125987
> 
> 赞同：27
> 
> 时间：2013-04-20T22:45:44.883
> 
> 标签：networking

我熟悉基本的 OSI 模型，但我总是感到困惑，数据包如何通过 Internet 从一台机器传输到另一台机器，以及 OSI 层是如何形成的？例如，对于以下拓扑：

机器A<----->交换机<---->路由器<---->路由器<---->路由器<---->交换机<---->机器B

其中显示了多个路由器来代表 Internet，当机器 A 向机器 B 发送数据包（例如通过 FTP 的简单“ls”命令）时，在 OSI 层级别会发生什么。

以上只是一个建议的例子，但如果有人可以用任何其他网络拓扑来解释，那也很好。我正在寻找一个非常基本的解释，说明数据包如何在每个节点（机器、交换机、路由器等）处转换为不同的 OSI 层。

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2013-04-20T23:10:56.600

路由器使用 IP 层（第 3 层），交换机使用数据链路层（第 2 层）。第 1 层是通过线路的物理 1 和 0，第 2 层是数据链路层，它是以太网和点对点协议 (PPP) 等协议，它在相邻节点之间传输有关 MAC 地址的信息，来自和并允许错误检测和重传。第 3 层是 IP 层，它携带有关数据包在整个网络中的来源和目的地的信息，而不仅仅是当前跃点。

传输将是这样的：

机器 A 想向机器 B 发送一个数据包。机器 A 知道机器 B 的 IP 地址，因此它将它放在第 3 层数据包中。但是，机器 A 需要将下一跳的 MAC 地址放入第 2 层数据包中。如果它不知道，那么它将使用目标 IP 向网络发送一个称为 ARP 请求（地址解析协议，请阅读此处： [http ://www.tildefrugal.net/tech/arp.php）的东西。](http://www.tildefrugal.net/tech/arp.php)这里会发生几件事之一：

1.  IP是本地的。具有该 IP 的机器将使用其 MAC 地址回复发件人。
2.  IP 是非本地的。网关路由器将检测到这一点并发送其 MAC 地址。
3.  IP 是非本地的，并且机器 A 的默认网关和子网掩码已设置。使用此信息，机器 A 可以确定 IP 地址的非本地性并将其发送到路由器的 MAC 地址（如果还不知道，则为 ARPing）。

（如果机器 A 早先发现了这个，它将在 ARP 缓存中，机器 A 将使用它。）现在 MAC 地址已发送，数据包可以被传输（物理层 1 执行实际的数据传输）电线）。下一站将是开关。交换机知道列为第 2 层目标的 MAC 地址在哪个出站端口上，因为它会跟踪它看到的数据包来自的每个 MAC 地址以及它来自哪个端口 - 如果它不知道，那么它将在每个单一端口，保证它会到达。

因此，数据包到达路由器。IP 模型很酷的地方在于它将网络/世界中的每个 IP 地址划分为层次结构 - 根据定义，子网不能部分重叠子网，它们要么完全包含它们，要么完全包含在它们之中。因此，只要子网遵循这个层次结构，路由器就可以通过查看 IP 将在其表中属于哪个子网，明确地确定 40 亿个可能的 IP 地址中的每一个在网络上的位置！然后将数据包从该端口发送出去。

当数据包通过互连的 ISP 的路由器、骨干基础设施等时，它到达机器 B 的路由器，在那里发生相反的过程 - 路由器 B 看到它的目的地是机器 B 并将其发送到站。（类似地，如果不知道，路由器 B 将不得不使用类似 ARP 的过程来查找机器 B 的 MAC 地址。）从这里开始，其余的应该是微不足道的。

很好的参考：

[https://web.archive.org/web/20120129120350/http://www.tildefrugal.net/tech/arp.php](https://web.archive.org/web/20120129120350/http://www.tildefrugal.net/tech/arp.php)

[http://en.wikipedia.org/wiki/Data_link_layer](http://en.wikipedia.org/wiki/Data_link_layer)

[http://en.wikipedia.org/wiki/Network_switch](http://en.wikipedia.org/wiki/Network_switch)

[http://en.wikipedia.org/wiki/Network_layer](http://en.wikipedia.org/wiki/Network_layer)

[http://en.wikipedia.org/wiki/Routing](http://en.wikipedia.org/wiki/Routing)

[http://en.wikipedia.org/wiki/Router_(计算)](http://en.wikipedia.org/wiki/Router_(computing))

[http://en.wikipedia.org/wiki/Address_Resolution_Protocol](http://en.wikipedia.org/wiki/Address_Resolution_Protocol)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-09-11T10:00:33.700

网络层协议监督数据包从源机器到目的地的传输。数据在传输之前被分解为长达 64 kb 的数据包或数据报，并带有目标 IP 地址的标记，然后转发到网络网关。网关可以是互连网络的路由器。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-08-23T23:21:15.907

唯一可以在铜线上传播的是电脉冲。二进制数 1 由电脉冲或 0 无电脉冲表示。请记住，任何类型的真实数据都不能通过铜线、光纤或空气发送……仅代表先前已转换为 1 或 0 的数据，然后在接收端重新转换回来。

# c# - c# 中的多个奇怪重复的模板模式（CRTP）？

> ID：16125988
> 
> 赞同：0
> 
> 时间：2013-04-20T22:46:00.333
> 
> 标签：c#, crtp, recurring

我试图为我的代码实现 CRTP 接口，但约束让我卡住了。如果我的代码结构看起来像这样，如何实现约束？这合法吗？谢谢你。

```
interface IInterface<T>
    where T: IInterface<T>
{
    //bla bla bla
    T Member { get; set; }
}
interface ITest1<iTest2, iTest1> : IInterface<iTest2>
{
    //bla bla bla
}
interface ITest2<iTest1, iTest3> : IInterface<iTest1>
{
    iTest3 RefMember { get; set; }
    //bla bla bla
}
interface ITest3<iTest2>
{
    List<iTest2> manyTest { get; set; }
    //bla bla bla
}
class Test1 : ITest1<Test2, Test1>
{
    //bla bla bla
}
class Test2 : ITest2<Test1, Test3>
{
    //bla bla bla
}
class Test3 : ITest3<Test2>
{
    //bla bla bla    
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-01-22T11:45:19.923

```
 public abstract class MyBase
{
    /// <summary>
    /// The my test method. divyang
    /// </summary>
    public virtual void MyVirtualMethodWhichIsOverridedInChild()
    {
        Console.Write("Method1 Call from MyBase");
    }

    /// <summary>
    /// The my another test method.
    /// </summary>
    public abstract void MyAnotherTestMethod();

    /// <summary>
    /// The my best method.
    /// </summary>
    public virtual void MyVirualMethodButNotOverridedInChild()
    {
        Console.Write("Method2 Call from MyBase");
    }
} 
```

现在制作基类

```
public abstract class CrtpBaseWrapper<T> : MyBase
    where T : CrtpBaseWrapper<T>
{
} 
```

然后你可以制作你的子类

```
public class CrtpChild : CrtpBaseWrapper<CrtpChild>
{
    /// <summary>
    /// The my test method. divyang
    /// </summary>
    public override void MyVirtualMethodWhichIsOverridedInChild()
    {
        Console.Write("Method1 Call from CrtpChild");
    }

    /// <summary>
    /// The my another test method.
    /// </summary>
    public override void MyAnotherTestMethod()
    {
        Console.Write("MyAnotherTestMethod Call from CrtpChild");
    }
} 
```

# java - Android：使用数组适配器显示列表数组

> ID：16125989
> 
> 赞同：1
> 
> 时间：2013-04-20T22:46:05.063
> 
> 标签：java, android, xml

我在 Eclipse 中没有收到直接错误。但是当我尝试在我的手机上运行它时，它不会打开活动，然后我的手机会重置。我可能错误地使用了数组适配器。但这是我的代码文件：

Java文件包creativecoders.periodictable；

```
 import android.app.Activity;
    import android.content.pm.ActivityInfo;
    import android.os.Bundle;
    import android.widget.ArrayAdapter;
    import android.widget.ListView;

    public class AM extends Activity {

        private ListView amList;

        @Override
        public void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);
            setContentView(R.layout.am);

            setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_PORTRAIT);

        }

        @Override
        public void onStart() {
            super.onStart();

            ArrayAdapter<CharSequence> adapter = ArrayAdapter.createFromResource(
                    this, R.array.AM, android.R.layout.simple_list_item_1);
            amList.setAdapter(adapter);

        }

        public void onPause() {
            super.onPause();
            finish();
        }

        public void onStop() {
            super.onStop();
            finish();
        }

        public void onDestroy() {
            super.onDestroy();
            finish();
        }

    } 
```

XML 布局文件

```
 <ListView
            android:id="@+id/listView1"
            android:layout_width="match_parent"
            android:layout_height="wrap_content" >
        </ListView>

    </LinearLayout> 
```

字符串文件

```
 <string-array name="AM">
        <item>  ONE  </item>
        <item>  TWO  </item>
        <item>  THREE  </item>
      </string-array> 
```

编辑：日志文件：04-20 23:10:07.660: D/AndroidRuntime(284): 关闭 VM 04-20 23:10:07.660: W/dalvikvm(284): threadid=1: 线程以未捕获的异常退出（ group=0x4001d800) 04-20 23:10:07.670: E/AndroidRuntime(284): 致命异常: main 04-20 23:10:07.670: E/AndroidRuntime(284): java.lang.RuntimeException: 无法启动活动ComponentInfo{creativecoders.periodictable/creativecoders.periodictable.AM}: java.lang.NullPointerException 04-20 23:10:07.670: E/AndroidRuntime(284): at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2663) 04 -20 23:10:07.670: E/AndroidRuntime(284): 在 android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2679) 04-20 23:10:07.670: E/AndroidRuntime(284): 在 android.app .ActivityThread.access$2300(ActivityThread.java:125) 04-20 23:10:07.670: E/AndroidRuntime(284):在 android.app.ActivityThread$H.handleMessage(ActivityThread.java:2033) 04-20 23:10:07.670: E/AndroidRuntime(284): 在 android.os.Handler.dispatchMessage(Handler.java:99) 04- 20 23:10:07.670: E/AndroidRuntime(284): 在 android.os.Looper.loop(Looper.java:123) 04-20 23:10:07.670: E/AndroidRuntime(284): 在 android.app。 ActivityThread.main(ActivityThread.java:4627) 04-20 23:10:07.670: E/AndroidRuntime(284): at java.lang.reflect.Method.invokeNative(Native Method) 04-20 23:10:07.670: E /AndroidRuntime(284): at java.lang.reflect.Method.invoke(Method.java:521) 04-20 23:10:07.670: E/AndroidRuntime(284): at com.android.internal.os.ZygoteInit$ MethodAndArgsCaller.run(ZygoteInit.java:868) 04-20 23:10:07.670: E/AndroidRuntime(284): at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626) 04-20 23: 10:07.670：E/AndroidRuntime(284)：在 dalvik.system。NativeStart.main(Native Method) 04-20 23:10:07.670: E/AndroidRuntime(284): 由: java.lang.NullPointerException 04-20 23:10:07.670: E/AndroidRuntime(284): 在 creativecoders。 periodtable.AM.onStart(AM.java:28) 04-20 23:10:07.670: E/AndroidRuntime(284): 在 android.app.Instrumentation.callActivityOnStart(Instrumentation.java:1129) 04-20 23:10: 07.670: E/AndroidRuntime(284): 在 android.app.Activity.performStart(Activity.java:3781) 04-20 23:10:07.670: E/AndroidRuntime(284): 在 android.app.ActivityThread.performLaunchActivity(ActivityThread .java:2636) 04-20 23:10:07.670: E/AndroidRuntime(284): ... 11 更多E/AndroidRuntime(284): 在 android.app.Instrumentation.callActivityOnStart(Instrumentation.java:1129) 04-20 23:10:07.670: E/AndroidRuntime(284): 在 android.app.Activity.performStart(Activity.java :3781) 04-20 23:10:07.670: E/AndroidRuntime(284): 在 android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2636) 04-20 23:10:07.670: E/AndroidRuntime(284): ... 11 更多E/AndroidRuntime(284): 在 android.app.Instrumentation.callActivityOnStart(Instrumentation.java:1129) 04-20 23:10:07.670: E/AndroidRuntime(284): 在 android.app.Activity.performStart(Activity.java :3781) 04-20 23:10:07.670: E/AndroidRuntime(284): 在 android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2636) 04-20 23:10:07.670: E/AndroidRuntime(284): ... 11 更多

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T23:05:52.653

您没有初始化 ListView。在 onCreate()

```
amList = (ListView)findViewById(R.id.listView1); 
```

# objective-c - NSProgressIndicator 显示不正确（不确定） - Xcode

> ID：16125992
> 
> 赞同：2
> 
> 时间：2013-04-20T22:46:14.850
> 
> 标签：objective-c, xcode, macos, nsprogressindicator

在我的项目中，我使用 NSProgressIndicator 来显示 NSTask 正在运行，并且它被设置为停止时不显示。它在不停止时显示，在停止时消失，但是当它出现时，它看起来像这样：

![显示不正确](https://i.stack.imgur.com/W0Jt7.png)

相反，它应该看起来像这样，但不是：

![在此处输入图像描述](https://i.stack.imgur.com/Bt853.png)

如您所见，它没有边界。我怎样才能让它有一个？这是一个已知的错误？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-28T12:09:40.430

也许这是一个错误，因为正如您在评论中提到的，将 NSProgressIndicator 设置为手动隐藏和显示也可以解决我的问题。

*把它放在这里是因为这应该作为一个答案来解决，至少它是唯一的解决方法。*

# javascript - jquery fn.extend() 在对象中返回值和调用值

> ID：16125993
> 
> 赞同：2
> 
> 时间：2013-04-20T22:46:20.997
> 
> 标签：javascript, jquery, function, object, extend

我需要一些帮助来理解某些东西，这对于严肃的 jquery 和 javascript 程序员来说可能很容易。

假设我有这样的代码：

```
jQuery.fn.extend({
   myNameSpace: {
     myPlugIn: function (o) { 
       var o = { variable : o.variable || false };

      var myfunction = function(v) {
      o.variable = v;
      };
      return {
         myfunction : myfunction
      };

    }
}); 
```

现在我可以这样称呼它：

```
x = new $.myNameSpace.myPlugIn({variable : 99}) ; 
```

然后我像这样调用我的函数 myfunction

```
x.myfunction(20); 
```

我可以理解，现在的问题是：如何在插件中获取变量的值。

我试过类似的东西，`alert(x.o[variable]);`但我就是不明白 - 这一定很容易......

我尝试完成的是一个值，如果插件内部的某些内容完成或计算，我可以调用它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T22:55:57.567

您无法使用当前代码获取内部变量，除非您将其更改为：

```
var myfunction = function(v) {
    o.variable = v;
    return v;  //or o.variable
};

//...
x.myfunction(20)  //20; 
```

* * *

**添加**

看来您正在尝试为 jQuery 制作插件。要创建插件，请不要使用`$.extend`. `$.extend`仅用于预设默认设置。^([[1]](http://docs.jquery.com/Plugins/Authoring#Defaults_and_Options))通常这是[您设置插件的方式](http://docs.jquery.com/Plugins/Authoring)：

```
(function($) {
    var methods = {
        getVar: function(){ 
            return $.extend({
                data: data,
            }, methods);
        },
        setVar: function(d){ 
            data = d;
            return methods;
        }
    },
    data = {};

    $.fn.myPlugin = function(options) {
        //do stuff
        data = $.extend( data , options );

        return methods;
    };
})(jQuery); 
```

[http://jsfiddle.net/DerekL/wv5QH/1/](http://jsfiddle.net/DerekL/wv5QH/1/)

# c# - AutoMapper 将目标对象上的属性设置为 null

> ID：16125997
> 
> 赞同：9
> 
> 时间：2013-04-20T22:46:41.667
> 
> 标签：c#, automapper

我有这样的事情：

```
public class DomainEntity
{
    public string Name { get; set; }
    public string Street { get; set; }
    public IEnumerable<DomainOtherEntity> OtherEntities { get; set; }
    public IEnumerable<DomainAnotherEntity> AnotherEntities { get; set; }
}

public class ApiEntity
{
    public string Name { get; set; }
    public string Street { get; set; }
    public int OtherEntitiesCount { get; set; }
} 
```

以及以下映射器配置：

```
Mapper.Configuration.AllowNullCollections = true;

Mapper.CreateMap<DomainEntity, ApiEntity>().
    ForSourceMember(e => e.OtherEntities, opt => opt.Ignore()).
    ForSourceMember(e => e.AntherEntities, opt => opt.Ignore()).
    ForMember(e => e.OtherEntitiesCount, opt => opt.MapFrom(src => src.OtherEntities.Count()));

Mapper.CreateMap<ApiEntity, DomainEntity>().
    ForSourceMember(e => e.OtherEntitiesCount, opt => opt.Ignore()).
    ForMember(e => e.OtherEntities, opt => opt.Ignore()).
    ForMember(e => e.AnotherEntities, opt => opt.Ignore()); 
```

从我正在使用的 DomainEntity 获取 ApiEntity`var apiEntity = Mapper.Map<DomainEntity, ApiEntity>(myDomainEntity);`

从我正在使用的 ApiEntity 获取合并的 DomainEntity`var domainEntity = Mapper.Map(myApiEntity, myDomainEntity);`

但是当使用它时，属性`OtherEntities`和`AnotherEntities`被设置为`null`- 即使它们在调用映射 from `myApiEntity`to之前有值`myDomainEntity`。我怎样才能避免这种情况，以便它们真正**合并**而不仅仅是替换值？

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-20T23:03:47.940

我认为您正在寻找`UseDestinationValue`而不是`Ignore`：

```
Mapper.CreateMap<ApiEntity, DomainEntity>().
    ForSourceMember(e => e.OtherEntitiesCount, opt => opt.UseDestinationValue()).
    ForMember(e => e.OtherEntities, opt => opt.UseDestinationValue()).
    ForMember(e => e.AnotherEntities, opt => opt.UseDestinationValue()); 
```

# assembly - 我们可以一次使用两个 32 位 reg(32 + 32 = 64) 以使其能够获取 64 位值吗？汇编语言 8086

> ID：16125998
> 
> 赞同：0
> 
> 时间：2013-04-20T22:46:44.803
> 
> 标签：assembly, x86, masm, cpu-registers, irvine32

汇编语言 8086：

我已经制作了加法程序，它在控制台中接受两个值并给我们结果..如果我们给出更高的值，它只能取 32 位（8 位）以下的值，那么它将在控制台中给出整数溢出错误

如果我想在 input1 和 input2 中提供超过 32 位的值，我该怎么做？

我想通过使用 32 位寄存器将 value1 添加到 value2 并在 64 位（等于 16 位）下给出值.. 可以使用**2 reg 的空间（32 + 32 = 64 位）？**...

我们如何制作 2 个 32 位寄存器以使其成为 64 位我知道这是可能的，但我不知道该怎么做......因为我是汇编语言的新手

我在汇编语言中使用 KIP.R.IRVINE 链接库

**我们将如何使用 2 个 32 位 reg 给出 64 位值？或者我们如何使 2 32bit reg 取 64bit 值？**

这是 32 位加法的代码：

```
INCLUDE Irvine32.inc

.data

 Addition BYTE "A: Add two Integer Numbers", 0

 inputValue1st BYTE "Input the 1st integer = ",0
 inputValue2nd BYTE "Input the 2nd integer = ",0

  outputSumMsg BYTE "The sum of the two integers is = ",0

   num1 DD ?
   num2 DD ?
   sum  DD ?

   .code

   main PROC

   ;----Displays addition Text-----

  mov edx, OFFSET Addition
  call WriteString
  call Crlf
  ;-------------------------------

  ; calling procedures here

   call InputValues
   call addValue
   call outputValue

   call Crlf

   jmp exitLabel

   main ENDP

      ; the PROCEDURES which i have made is here

  InputValues PROC
  ;----------- For 1st Value--------

   call Crlf
   mov edx,OFFSET inputValue1st ; input text1
   call WriteString

   ; here it is taking 1st value
   call ReadInt    ; read integer
   mov num1, eax   ; store the value

     ;-----------For 2nd Value----------

      mov edx,OFFSET inputValue2nd ; input text2
      call WriteString

      ; here it is taking 2nd value
      call ReadInt    ; read integer
      mov num2, eax   ; store the value

      ret
      InputValues ENDP

     ;---------Adding Sum----------------

     addValue PROC
     ; compute the sum

     mov eax, num2  ; moves num2 to eax
     add eax, num1  ; adds num2 to num1
     mov sum, eax   ; the val is stored in eax

     ret
     addValue ENDP

     ;--------For Sum Output Result----------

     outputValue PROC

     ; output result

     mov edx, OFFSET outputSumMsg ; Output text
     call WriteString

     mov eax, sum
     call WriteInt ; prints the value in eax

     ret
     outputValue ENDP

     exitLabel:
     exit

    END main 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-21T02:29:23.867

您可以`ADC`与 结合使用`ADD`来向存储在 2 个 32 位寄存器中的 64 位整数添加一些内容。

您可以将`SHLD`与 结合使用`SHL`，将存储在 2 个 32 位寄存器中的 64 位整数左移。

如果可以进行 64 位加法和 64 位移位，则可以轻松地将 64 位整数乘以 10 ( `hint: 10=8+2, x*10=x*8+x*2`)。

您可能需要它才能从控制台读取 64 位整数。您需要将它们读取为`ASCII strings`，然后使用重复乘以 10 和加法 ( `hint: 1234 = (((0+1)*10+2)*10+3)*10+4`) 将其转换为 64 位整数。

以上应该是足够的信息来读取 64 位整数并添加它们。

为了打印总和，您需要将 64 位除以 10，因此您可以将 64 位整数转换`ASCII string`为它的十进制表示 ( `hint: 4=1234 mod 10 (then 123 = 1234 / 10), 3 = 123 mod 10 (then 12 = 123 / 10), 2 = 12 mod 10 (then 1 = 12 / 10), 1 = 1 mod 10 (then 0 = 1 / 10, stop)`)。

我现在不打算解释如何使用 2 进行 64 位除以 10 `DIVs`。先让其余的工作。