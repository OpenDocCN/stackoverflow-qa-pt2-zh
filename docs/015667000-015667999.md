# StackOverflow 问答 15667000-15667999

# c++ - ODBC，C++，从第一列检索 ntext

> ID：15667004
> 
> 赞同：0
> 
> 时间：2013-03-27T18:48:30.023
> 
> 标签：c++, sql, sql-server, odbc

我可以用 SQLGetData 这样的方式检索 ntext 列。

```
retCode = SQLGetData(input_hstmt, column, SQL_C_BINARY, 
            target_ptr, NULL, &binding_ref.buffer_length);
target_ptr = new BYTE[buffer_length + 1];
retCode = SQLGetData(input_hstmt, column, SQL_C_WCHAR, 
            target_ptr, buffer_length + 1, &strlen_or_ind); 
```

问题是还有其他列，我想绑定这些列并在之后与它们一起使用 SQLFetch。对于使用 SQLGetData，要从中检索的列数必须大于绑定列的最大数。检索数据的最正确方法是什么？例如，对列进行排序并以正确的顺序检索它们，避免使用 SQLFetch，还有其他什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T10:19:14.020

我不确定是否有“正确”的解决方案，它只是 SQL Server 驱动程序的一个功能，它可以像 SQLGetData 一样从 TDS 输入缓冲区中读取数据。但是，您可以通过将光标类型设置为可滚动来解决此问题。SQL Server 在使用游标时默认不返回大对象，并且在调用 SQLGetData 时会重新获取数据库。它并不理想，但可以帮助您解决问题。

# c# - 缩放和平移问题 Translate/ScaleTransform WPF

> ID：15667006
> 
> 赞同：0
> 
> 时间：2013-03-27T18:48:37.723
> 
> 标签：c#, wpf, resize, zooming

我有一个画布控件，我在其中动态添加不同的形状。我已经通过使用 ScaleTransform 实现缩放并通过 TranslateTransform 平移。如果我必须放大和缩小而不调整画布中的形状（即调整画布大小而不调整其子项的大小)，我将如何实现这一目标？

谢谢，

BR,

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T20:33:31.063

以下简单派生的 Canvas 将其子元素排列在由它们的`Canvas.Left`和`Canvas.Top`属性值给定的变换位置。转换由`ChildPositionTransform`依赖属性应用。

```
public class ZoomCanvas : Canvas
{
    public static readonly DependencyProperty ChildPositionTransformProperty =
        DependencyProperty.Register(
            "ChildPositionTransform", typeof(Transform), typeof(ZoomCanvas),
            new FrameworkPropertyMetadata(
                Transform.Identity, FrameworkPropertyMetadataOptions.AffectsArrange));

    public Transform ChildPositionTransform
    {
        get { return (Transform)GetValue(ChildPositionTransformProperty); }
        set { SetValue(ChildPositionTransformProperty, value); }
    }

    protected override Size ArrangeOverride(Size finalSize)
    {
        foreach (UIElement element in InternalChildren)
        {
            var x = GetLeft(element);
            var y = GetTop(element);
            var pos = new Point(double.IsNaN(x) ? 0d : x, double.IsNaN(y) ? 0d : y);
            ArrangeElement(element, ChildPositionTransform.Transform(pos));
        }

        return finalSize;
    }

    private void ArrangeElement(UIElement element, Point position)
    {
        element.Arrange(new Rect(position, element.DesiredSize));
    }
} 
```

现在，您还可以通过改进 ArrangeElement 方法来考虑子元素`HorizontalAlignment`和属性。`VerticalAlignment`

```
private void ArrangeElement(UIElement element, Point position)
{
    if (element is FrameworkElement)
    {
        switch (((FrameworkElement)element).HorizontalAlignment)
        {
            case HorizontalAlignment.Center:
                position.X -= element.DesiredSize.Width / 2;
                break;

            case HorizontalAlignment.Right:
                position.X -= element.DesiredSize.Width;
                break;

            default:
                break;
        }

        switch (((FrameworkElement)element).VerticalAlignment)
        {
            case VerticalAlignment.Center:
                position.Y -= element.DesiredSize.Height / 2;
                break;

            case VerticalAlignment.Bottom:
                position.Y -= element.DesiredSize.Height;
                break;

            default:
                break;
        }
    }

    element.Arrange(new Rect(position, element.DesiredSize));
} 
```

# c# - 尝试使用反射创建通用类型阅读器

> ID：15667008
> 
> 赞同：1
> 
> 时间：2013-03-27T18:48:40.960
> 
> 标签：c#, generics, reflection

[将静态反射信息传递给静态泛型方法](https://stackoverflow.com/questions/15573791/passing-static-reflection-information-to-static-generic-methods)的此问题的扩展

我试图创建一个通用类型读取器，因为我使用类进行大量数据访问，并且我试图创建一个相当通用的方法，允许在没有太多代码的情况下读取数据。

进行大部分阅读的代码部分如下所示

```
 public static T Read<T>(string field,IDataRecord data )
    {
        Type type1 = typeof (T);
        try
        {
            if (type1 == typeof( String ))
            {
                return (T)Convert.ChangeType( readString( data[field].ToString() ), typeof( T ) );
            }
            if (type1 == typeof( int? ))
            {
                return (T)Convert.ChangeType( readIntN( data[field].ToString() ), typeof( T ) );
            }
            if (type1 == typeof( Guid? ))
            {
                return (T)Convert.ChangeType( readGuidN( data[field].ToString() ), typeof( T ) );
            }
            if (type1 == typeof( double? ))
            {
                return (T)Convert.ChangeType( readDoubleN( data[field].ToString() ), typeof( T ) );
            }
            if (type1 == typeof( decimal? ))
            {
                var res = readDecimalN(data[field].ToString());
                return (T)Convert.ChangeType( res, typeof( T ) );
            }
            if (type1 == typeof( float? ))
            {
                return (T)Convert.ChangeType( readFloatN( data[field].ToString() ), typeof( T ) );
            }
            if (type1 == typeof( bool? ))
            {
                return (T)Convert.ChangeType( readBoolN( data[field].ToString() ), typeof( T ) );
            }
            if (type1 == typeof( DateTime? ))
            {
                return (T)Convert.ChangeType( readDatetimeN( data[field].ToString() ), typeof( T ) );
            }
            if (type1 == typeof( int ))
            {
                return (T)Convert.ChangeType( readInt( data[field].ToString() ), typeof( T ) );
            }
            if (type1 == typeof( long? ))
            {
                return (T)Convert.ChangeType( readLongN( data[field].ToString() ), typeof( T ) );
            }
            if (type1 == typeof( long ))
            {
                return (T)Convert.ChangeType( readLong( data[field].ToString() ), typeof( T ) );
            }
            if (type1 == typeof( Guid ))
            {
                return (T)Convert.ChangeType(readGuid( data[field].ToString() ), typeof( T ) );
            }
            if (type1 == typeof( double ))
            {
                return (T)Convert.ChangeType( readDouble( data[field].ToString() ), typeof( T ) );
            }
            if (type1 == typeof( decimal ))
            {
                return (T)Convert.ChangeType( readDecimal( data[field].ToString() ), typeof( T ) );
            }
            if (type1 == typeof( float ) || type1 == typeof( Single ))
            {
                return (T)Convert.ChangeType( readFloat( data[field].ToString() ), typeof( T ) );
            }
            if (type1 == typeof( bool ))
            {
                return (T)Convert.ChangeType( readBool( data[field].ToString() ), typeof( T ) );
            }
            if (type1 == typeof( DateTime ))
            {
                return (T)Convert.ChangeType( readDatetime( data[field].ToString() ), typeof( T ) );
            }
        }
        catch (Exception)
        {
            throw;
        }
        throw new Exception(String.Format("Data Type Not Supported: {0}", type1));
    } 
```

但是，这会引发 Invalid Cast Exception。

readXXX 方法工作正常每个返回语句中都出现问题

我也尝试过使用

```
public static T SafeConvert<T>(string s, T defaultValue)
{
if ( string.IsNullOrEmpty(s) )
    return defaultValue;
return (T)Convert.ChangeType(s, typeof(T));
} 
```

但它仍然失败

编辑：

该方法正在通过调用

```
private static List<T> GetItems<T>(IDataReader reader)
    {
        var items = new List<T>();
        while (reader.Read())
        {
            Type type1 = typeof (T);
            var item = (T) Activator.CreateInstance(typeof (T), new object[] {});
            foreach (PropertyInfo info in type1.GetProperties())
            {
                int written = 0;
                if (info.CanWrite)
                {
                    #region

                    try
                    {
                        Type dataType = info.PropertyType;
                        MethodInfo method = typeof (DataReader).GetMethod("Read",BindingFlags.Static | BindingFlags.Public);
                        MethodInfo generic = method.MakeGenericMethod(dataType);
                        var t = generic.Invoke(null, new object[] {info.Name, reader});
                        info.SetValue( item, t ); 
```

更多的...

人们似乎在问我用它做什么，最终它允许我在一行中创建一个 ienumerable，它可以通过传递文件 Location 或 sql 查询从任何来源读取，无论是 CSV 还是 SQL

```
//returns Ienumerable<MyClass>
var list = Reader.ReadSql<MyClass>(DataBases.Test,"select * from TestTable where someAttribute  = 1");
// also returns Ienumerable MyClass
var list2 = Readre.ReadCsv<MyClass>(@"c:\file1.csv",","); 
```

我现在运行它，但它需要在每个实现中重复 if dataType == typeof(string) 的长列表我希望将其重构为单个通用读取方法，但在转换时遇到问题

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T21:26:13.807

您更新的问题说它有效，但您想重构。好吧，你可以！

```
Dictionary<Type, Func<string, IDataRecord, object>> converters_ = new Dictionary<Type, Func<string, IDataRecord, object>>();

converters_[typeof(bool)] = (s) => { return readBoolN( data[s].ToString() ); };
// repeat for other types:

Then

 public static T Read<T>(string field,IDataRecord data )
 {
     return (T)converters_[typeof(T)](field, data);
 } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T23:55:01.300

1.  `GetMethod`您在没有 a 的情况下调用`Binder`，您如何获得预期的泛型之一？

2.  `Read<T>`将在没有参数的情况下调用可以用来推断类型，您是否期望每次使用类型参数调用它？

3.  如果 2 是您所期望的，那么与仅调用`GetXXX`方法有什么不同？

我无法遵循您的原始设计，但请考虑以下代码：

```
public static partial class DataReaderExtensions {
    /// <summary>
    /// <para>Copy data to target object</para>
    /// <para>Class which implements IDataRecord usually also implements IDataReader</para>
    /// </summary>
    /// <typeparam name="T"></typeparam>
    /// <param name="data"></param>
    /// <param name="target"></param>
    /// <returns>the count of field or property copied</returns>
    public static int CopyTo<T>(this IDataRecord data, T target) {
        return (
            from column in
                Enumerable.Range(0, data.FieldCount).Select(
                    (x, i) => new {
                        DataType=data.GetFieldType(i),
                        ColumnName=data.GetName(i)
                    }
                    )
            let type=target.GetType()
            from member in type.GetMembers()
            let typeMember=
                member is PropertyInfo
                    ?(member as PropertyInfo).PropertyType
                    :member is FieldInfo
                        ?(member as FieldInfo).FieldType
                        :default(MemberInfo)
            where typeMember==column.DataType
            let name=member.Name
            where name==column.ColumnName
            let invokeAttr=
                BindingFlags.SetProperty|BindingFlags.SetField|
                BindingFlags.NonPublic|BindingFlags.Public|
                BindingFlags.Instance
            select type.InvokeMember(name, invokeAttr, default(Binder), target, new[] { data[name] })
            ).Count();
    }
} 
```

您可以通过语句将其直接复制`data`到自定义类型的实例，例如：

```
reader.CopyTo(myObject); 
```

无论公共/非公共，它都会自动将列名与字段/属性映射；最后返回复制元素的计数。

# templates - 是否可以将变量传递给小胡子部分

> ID：15667011
> 
> 赞同：13
> 
> 时间：2013-03-27T18:48:48.323
> 
> 标签：templates, mustache

可以说我有一个像这样的小胡子按钮

```
<button name="{{name}}" class="btn">{{title}}</button> 
```

像这样直接调用部分时是否可以以某种方式设置标题

```
<form>
....
{{> button|name=foo,title=Cancel}} {{> button|name=bar,title=Submit}}
</form> 
```

这将使创建视图变得更容易，而不是像这样为每个按钮创建一个哈希。

```
<form>
....
{{#buttons}}
    {{> button}}
{{/buttons}}
</form> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-06-27T08:06:39.043

我不确定你能做到这一点，但我使用 mustache 函数解决了这个问题

javascript

```
var partial = "<div>{{value}}</div>";
var data = {some_data:[1,2,3]};
var items = {func:function (){
    return function (index){
        return mustache.render(partial,{value : data.some_data[index]});
    }
});
mustache.render(main,items); 
```

胡子

```
{{#func}}1{{/func}}
{{#func}}2{{/func}} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-05-29T23:05:53.783

在普通的 Mustache 中不可能做到这一点，但在 Handlebars 中可以使用助手。Handlebars 是 Mustache 的扩展，因此您只需更换解析器库即可切换到它。以下是它在 Handlebars 中的外观：

**JS Helper（还有许多其他语言的实现）：**

```
Handlebars.registerHelper('button', function(title, options) {
    var attrs = Em.keys(options.hash).map(function(key) {
        key + '="' + options.hash[key] + '"';
    }).join(" ");
    return new Handlebars.SafeString(
      "<button " + attrs + ">" + title + "</button>");
}); 
```

**模板中的用法：**

```
{{buttton title name="name" class="class"}} 
```

更多信息可在此处获得：http: [//handlebarsjs.com/](http://handlebarsjs.com/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2018-09-13T15:30:55.700

不，您不能使用 Mustache 直接从模板传递变量视图数据。

但是，在使用 Mustache 时，使用列表将按钮呈现为一个部分是当前合适的替代方案：

**部分：（buttons.mst）**

```
{{#buttons}}
  <button name="{{name}}" class="btn">{{title}}</button>
{{/buttons}} 
```

**模板：**

```
<form>
  ...

  {{> buttons}}
</form> 
```

**看法：**

```
buttons: [
  { name: 'foo', title: 'Cancel' },
  { name: 'bar', title: 'Submit' },
] 
```

**输出：**

```
<form>
  ...

  <button name="foo" class="btn">Cancel</button>
  <button name="bar" class="btn">Submit</button>
</form> 
```

实际上效果很好，因为如果没有传递任何按钮，则不会呈现部分。

希望能帮助到你。

# linux - 检查多行并输出缺少的行。（重击）

> ID：15667017
> 
> 赞同：0
> 
> 时间：2013-03-27T18:49:02.557
> 
> 标签：linux, bash, shell, scripting

所以基本上我有一个文件，为了理解如何写这个，看起来像这样。

```
Start:
       First line of text
       Second line of text
Bin:
       Third line of text
       Four  line of text 
```

我需要完成的是编写一个脚本来检查这些字符串并输出任何丢失的字符串。

根据我的假设，我假设这将涉及一个 awk 或 grep 来检查每个字符串和一组 if 语句，如果它不存在然后输出什么字符串不存在。

关于如何开始的任何指示？到目前为止，这是我尝试过的几乎是伪代码。`

```
 str1=$(awk '/Start:/' /some/file)
 str2=$(awk '/First line of text/' /some/file) 
 str3=$(awk '/Second line of text/' /some/file)

if $str1 == '' then
   print $str1 'does not exist'
elif $str2 == '' then
   print $str2 'does not exist'
else $str3 == '' then 
   print $str3 'does not exist'
fi`    ` 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T21:46:11.367

像这样的东西应该用 AWK 打印丢失的字符串：

```
BEGIN {
 a[i++]="Start:"
 a[i++]="First line of text"
 a[i++]="Second line of text"
}

// {
 for (s in a) {
  if (match($0,a[s]) ) { a[s]="" }
 }
}

END {
 for (s in a) {
  if (a[s] != "") { print a[s] }
 }
} 
```

# sql-server - 在 T-SQL 中加入、分组和再次加入

> ID：15667026
> 
> 赞同：0
> 
> 时间：2013-03-27T18:49:24.620
> 
> 标签：sql-server, tsql, join, group-by, subquery

我在对这种需求进行适当查询时遇到问题。我希望有人能清除我的想法。

假设我有这三个表：

一张桌子

```
Column1|Column2 
```

B表

```
Column3|Column4 
```

C表

```
Column5|Column6 
```

首先，这些表 A 和 B 应该在`A-TABLE.Column1 = B-TABLE.Column3`. 这个表也应该用 WHERE 子句过滤，因为我不需要所有的行。

`SUM()`然后，有必要按这个新连接的表进行分组，以便之后我得到包含`B-TABLE.Column3`分组的表`A-TABLE.Column1`。

因此，在此之后我应该将表加入 C-TABLE 以便`C-TABLE.Column5 = A-TABLE.Column1`.

我希望有人可以帮助我实现我的目标？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T19:26:47.543

这符合您的规格：

```
;With SomeCTE As
(
    Select A-TABLE.Column1
         , Sum(C-TABLE.Column3) As SomeSum
      From C-TABLE
      Left Join A-TABLE On C-TABLE.Column3 = A-TABLE.Column1
     --Where ...
     Group By A-TABLE.Column1
)
Select Column1
     , Column5
     , SomeSum
  From SomeCTE
 Inner Join C-TABLE On SomeCTE.Column1 = C-TABLE.Column5 
```

# php - 将用户 IP 与 .txt 文件内容进行比较

> ID：15667027
> 
> 赞同：0
> 
> 时间：2013-03-27T18:49:29.557
> 
> 标签：php

我有一个 .txt 文件，其中包含大约 100.000 个 IP（列入黑名单），我想检查当前用户 IP 是否存在于该 .txt 文件中，如果是，则脚本执行应该停止。

在不使用 .htaccess 的情况下，最有效的方法是什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T18:54:10.643

```
$file = file_get_contents( "your_text_file.txt" );
if( preg_match( "/$ip/", $file ) ) {
  // block
} 
```

如果您要使用 preg_match 进行阻止，您可能需要在搜索字符串中添加换行符并转义句点字符，因为否则它们将匹配任何单个字符（但不太可能，这可能会阻止普通用户）。Htaccess 更适合这个甚至是数据库查询。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T18:56:19.810

我认为您存储数据的方式将帮助您更快地查找。将数据保持为排序格式，然后尝试进行二进制搜索之类的事情可以帮助您更快地搜索事物。我只是建议理论部分:)

# c - 为什么我们在 C 中传递结构参数时使用双指针？

> ID：15667028
> 
> 赞同：3
> 
> 时间：2013-03-27T18:49:32.320
> 
> 标签：c, pointers, linked-list

我正在编写一些 C 代码来实现基本的 Stack 数据结构操作，如 push、pop 等。我正在使用堆栈的链表实现。在这个实现中，每次我将一个值推入卡住时，我都会创建一个新节点，并将其设置为我的链表的头节点。所以这涉及到改变头节点的引用。

```
void push(stack **t, int ele)
{
stack *new, *temp;
temp=*t;
new=(stack *)malloc(sizeof(stack));
if(new==NULL)
{
    printf("\n stack overflow");
    return;
}
new=(stack *)malloc(sizeof(stack));
new->val=ele;
new->next=*t;
*t=new;

} 
```

如果我要使用单指针编写类似的代码，那么它将是这样的

```
void push(stack *t, int ele)
{
stack *new, *temp;
temp=t;
new=(stack *)malloc(sizeof(stack));
if(new==NULL)
{
    printf("\n stack overflow");
    return;
}
new=(stack *)malloc(sizeof(stack));
new->val=ele;
new->next=t;
t=new;

} 
```

在函数中，头节点（**t）出现在所有步骤的赋值的 RHS 上，但这个

```
 *t=new; 
```

基本上，第一个代码将'new'分配给**t的指针，即*t，而第二个代码将'new'分配给*t的指针，即t。两者似乎都只需要将指向头节点的单个指针分配为“新”，但只有第一个代码有效，第二个代码实际上并没有修改头节点值。

发生这种情况的解释是什么？为什么第二个代码的工作方式与第一个代码不同？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-27T19:16:01.273

因为 C 中的所有内容都是按值传递的。因此，如果您需要为函数的参数分配新值，则必须添加一个间接级别。如果您不这样做，您只会收到一个本地副本，因此分配给该副本的任何值都将仅在函数本身内可见。

附带说明一下，不要`malloc`在 C 中强制转换返回值。这是不必要的，会使您的代码混乱，并且可以为允许默认 int 的编译器隐藏错误。

在..另一个旁注，而不是写类似的东西：

```
new_stack = malloc(sizeof(stack)); 
```

改用这个：

```
new_stack = malloc(sizeof(*new_stack)); 
```

现在，如果类型发生变化，您就没有问题了`new_stack`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-09-25T07:23:29.157

在单指针的情况下说

```
int addInBeginning(int *s)
{
 ... // add a node in the beginning of the linked list
}

int main()
{
 int *t;
 ... // make t point to a linked list say t ---> 1 -> 2 -> 3
 f(t);
} 
```

最初，s 和 t 指向同一个列表。但是当我们在开头添加一个节点时，s 指向新节点，而 t 仍然指向它之前指向的节点。当 push 返回时，新节点无法从 t 访问。

```
0 -> 1 -> 2 -> 3
^    ^
|    |
s    t 
```

在双指针的情况下，s 将指向 t，而 t 又指向列表。所以所有指针操作都发生在原始指针 t 上。

```
s ----> t ----> 0 -> 1 -> 2 -> 3 
```

# asp.net-mvc - ASP.NET Web API 错误：未找到与请求 URI 匹配的 HTTP 资源

> ID：15667030
> 
> 赞同：5
> 
> 时间：2013-03-27T18:49:43.110
> 
> 标签：asp.net-mvc, asp.net-web-api

我正在尝试将 Web API 添加到现有的 ASP.NET MVC 项目中。这最初是一个 ASP.NET MVC 2 网站，后来升级到 MVC 3，然后使用以下过程再次升级到 MVC 4：

[将 ASP.NET MVC 2 项目升级到 ASP.NET MVC 3](http://www.asp.net/whitepapers/mvc3-release-notes#upgrading)

[将 ASP.NET MVC 3 项目升级到 ASP.NET MVC 4](http://www.asp.net/whitepapers/mvc4-release-notes#_Toc303253806)

我的 Api 控制器非常简单。实际上，它是默认模板：

```
public class ValuesController : ApiController
{
    // GET api/values
    public IEnumerable<string> Get()
    {
        return new string[] { "value1", "value2" };
    }

    // GET api/values/5
    public string Get(int id)
    {
        return "value";
    }
} 
```

我添加了一个类来注册 de API 路由。

```
public static class WebApiConfig
{
    public static void Register(HttpConfiguration config)
    {
        config.Routes.MapHttpRoute(
            name: "DefaultApi",
            routeTemplate: "api/{controller}/{id}",
            defaults: new { id = RouteParameter.Optional }
        );
    }
} 
```

这是从 Application_Start 调用的

```
protected void Application_Start()
{
    AreaRegistration.RegisterAllAreas();

    WebApiConfig.Register(GlobalConfiguration.Configuration);
    RouteConfig.RegisterRoutes(RouteTable.Routes);
} 
```

但是，当我尝试访问 'localhost:50315/api/values' 时，我收到以下错误：

```
<Error>
<Message>
    No HTTP resource was found that matches the request URI    'http://localhost:50315/api/values'.
</Message>
<MessageDetail>
    No type was found that matches the controller named 'values'.
</MessageDetail>
</Error> 
```

根据路由调试器，路由似乎工作正常，web api 路由是“匹配当前请求”的第一个条目。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-09-14T05:47:20.137

**请参阅以下步骤 - 它可能不会给你一个正确的答案，但它会给你一个调试问题的方向。您可以一一执行这些操作。**

1.  确保您已执行以下操作：

    ```
    Install-Package Microsoft.AspNet.WebApi 
    ```

这只是为了确保您拥有正确的 DLLS。

2.  您可以尝试的另一件事是在 get 顶部添加一条路线。

    ```
    class ValuesController : ApiController
    { 
        [System.Web.Http.Route("api/values")]
        public IEnumerable<string> Get()
        {
            return new string[] { "value1", "value2" };
        }

        public string Get(int id)
        {
            return "value";
        }
    } 
    ```

3.  禁用 MvC 路由以进行调试。IE

    ```
    protected void Application_Start()
    {
        AreaRegistration.RegisterAllAreas();
        GlobalConfiguration.Configure(WebApiConfig.Register);
    } 
    ```

4.  启用 GET 动词。

我在下面从我的项目中给你作为参考。

```
 <httpProtocol>
      <customHeaders>

        <add name="Access-Control-Allow-Headers" value="*" />
        <add name="Access-Control-Allow-Methods" value="*" />
      </customHeaders>
    </httpProtocol>
    <validation validateIntegratedModeConfiguration="false" />
    <handlers>
      <remove name="WebDAV" />
      <remove name="ExtensionlessUrlHandler-ISAPI-4.0_32bit" />
      <remove name="ExtensionlessUrlHandler-ISAPI-4.0_64bit" />
      <remove name="ExtensionlessUrlHandler-Integrated-4.0" />
      <add name="ExtensionlessUrlHandler-ISAPI-4.0_32bit" path="*." verb="GET,HEAD,POST,DEBUG,PUT,DELETE,PATCH,OPTIONS" modules="IsapiModule" scriptProcessor="%windir%\Microsoft.NET\Framework\v4.0.30319\aspnet_isapi.dll" preCondition="classicMode,runtimeVersionv4.0,bitness32" responseBufferLimit="0" />
      <add name="ExtensionlessUrlHandler-ISAPI-4.0_64bit" path="*." verb="GET,HEAD,POST,DEBUG,PUT,DELETE,PATCH,OPTIONS" modules="IsapiModule" scriptProcessor="%windir%\Microsoft.NET\Framework64\v4.0.30319\aspnet_isapi.dll" preCondition="classicMode,runtimeVersionv4.0,bitness64" responseBufferLimit="0" />
      <add name="ExtensionlessUrlHandler-Integrated-4.0" path="*." verb="GET,HEAD,POST,DEBUG,PUT,DELETE,PATCH,OPTIONS" type="System.Web.Handlers.TransferRequestHandler" preCondition="integratedMode,runtimeVersionv4.0" />
    </handlers> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-05-15T02:16:17.280

解决方案是给 apicontroller 类一个不同的命名空间，就像 AardVark71 在评论中的建议一样。

现有的 MVC 有一个类似 WebApplication.Controllers 的命名空间，而 Web api 使用的是相同的命名空间。当我改变它时，一切正常。

完整的 Web Api 控制器如下所示：

```
namespace WebApplication.Api.Controllers
{
    public class ValuesController : ApiController
    {
        // GET api/values
        public IEnumerable<string> Get()
        {
            return new string[] { "value1", "value2" };
        }

        // GET api/values/5
        public string Get(int id)
        {
            return "value";
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-08-14T15:45:34.790

确保您使用的是相同版本的

```
 System.Web.Http 
```

当我从 ApiController System.Web.Http v5.0 继承 BaseApiController System.Web.Http v4.0 时遇到了这个错误

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-03-16T13:24:46.290

asp.net web api给了我同样的错误，但我用不同的方法和那个方法解决了这个问题；

**第一种方法**

我用 AclController 将控制器名称更改为 AuthorizeController 并解决了我的问题。

**第二种方法**

如果您将方法参数类型与字符串、int、bool 等类型一起使用，则此方法可能会解决您的问题，然后出现此错误并且不使用字符串、int、bool 等类型仅使用类或接口等类型，那么也许可以解决您的问题问题。

# php - 建议 Backbone.js 和 php 作为后端的教程

> ID：15667033
> 
> 赞同：5
> 
> 时间：2013-03-27T18:49:49.517
> 
> 标签：php, rest, backbone.js

您好我正在制作一个使用backbone.js 作为前端的应用程序。它向服务器发送安静的调用。我做了前端。我想在 php 上创建一个后端，我可以在其中接收这些请求，从数据库中获取数据并给出响应。

您能否建议相同的教程或展示在 php 中制作后端服务器的方法？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-27T20:06:36.050

是的，这个对我有用，PHP API + Backbone

[http://coenraets.org/blog/2011/12/restful-services-with-jquery-php-and-the-slim-framework/](http://coenraets.org/blog/2011/12/restful-services-with-jquery-php-and-the-slim-framework/)

# java - java.lang.NoClassDefFoundError: org/apache/commons/vfs/FileSystemException

> ID：15667041
> 
> 赞同：1
> 
> 时间：2013-03-27T18:50:07.083
> 
> 标签：java, sftp

在我从这里遵循示例代码之后发生了一件奇怪的事情

**代码**

```
try {
    String filePath="C:\\srcFolder\\" + fileName;
    String destFolder="\\destFolder";
    int status = SFTP.sendFile(filePath, destFolder, ftpServer, ftpUserName, ftpPassword);
    if(FileTransferStatus.SUCCESS == status){
        System.out.println(filePath + " got sftp-ed successfully to  folder "+destFolder);
    }
    else if(FileTransferStatus.FAILURE == status){
        System.out.println("Fail to ssftp  to  folder "+destFolder);
    }
} catch (FileTransferException e) {
    e.printStackTrace();
} 
```

**堆栈跟踪**

```
Caused by: java.lang.NoClassDefFoundError: org/apache/commons/vfs/FileSystemException
    at com.zehon.sftp.SFTP.getSFTPClient(SFTP.java:20)
    at com.zehon.sftp.SFTP.sendFile(SFTP.java:50)
    at uploadFile(ftpService.java:208) 
```

编辑：我将 jar 包含在 Eclipse 项目外部库中，但我仍然遇到同样的错误，我使用的是 Maven

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T18:56:45.093

将 commons-vfs-1.0.jar 放入特定项目的类路径中，并确保所有导入都存在于 Java 类中

# php - Wordpress 分页因在第一页添加特色帖子而中断

> ID：15667044
> 
> 赞同：0
> 
> 时间：2013-03-27T18:50:21.827
> 
> 标签：php, wordpress

我正在为 Wordpress 使用骨骼主题。

我有一个博客页面，每页以 3x3 布局跟随 9 个帖子，除了在 3x3 上方有一个大（最新）帖子的第一页。分页工作正常，直到帖子等于 9+1 的倍数，所以就像 19、28、37...

我意识到在第一页上放置较大的特色帖子一定会破坏它，我只是不知道如何更改它。

这就是在 bone.php 中调用导航的方式

```
 function bones_page_navi($before = '', $after = '') {
    global $wpdb, $wp_query;
    $request = $wp_query->request;
    $posts_per_page = intval(get_query_var('posts_per_page'));
    $paged = intval(get_query_var('paged'));
    $numposts = $wp_query->found_posts;
    $max_page = $wp_query->max_num_pages;
    if ( $numposts <= $posts_per_page ) { return; }
    if(empty($paged) || $paged == 0) {
        $paged = 1;
    }
    $pages_to_show = 7;
    $pages_to_show_minus_1 = $pages_to_show-1;
    $half_page_start = floor($pages_to_show_minus_1/2);
    $half_page_end = ceil($pages_to_show_minus_1/2);
    $start_page = $paged - $half_page_start;
    if($start_page <= 0) {
        $start_page = 1;
    }
    $end_page = $paged + $half_page_end;
    if(($end_page - $start_page) != $pages_to_show_minus_1) {
        $end_page = $start_page + $pages_to_show_minus_1;
    }
    if($end_page > $max_page) {
        $start_page = $max_page - $pages_to_show_minus_1;
        $end_page = $max_page;
    }
    if($start_page <= 0) {
        $start_page = 1;
    }
    echo $before.'<nav class="page-navigation"><ol class="bones_page_navi clearfix">'."";
    if ($start_page >= 2 && $pages_to_show < $max_page) {
        $first_page_text = "First";
        echo '<li class="bpn-first-page-link"><a href="'.get_pagenum_link().'" title="'.$first_page_text.'">'.$first_page_text.'</a></li>';
    }
    echo '<li class="bpn-prev-link">';
    previous_posts_link('&laquo;');
    echo '</li>';
    for($i = $start_page; $i  <= $end_page; $i++) {
        if($i == $paged) {
            echo '<li class="bpn-current">'.$i.'</li>';
        } else {
            echo '<li><a href="'.get_pagenum_link($i).'">'.$i.'</a></li> <!--'.$paged.' is paged and '.$end_page.' is end page. '.$numposts.' is numposts '.$max_page.' is maxpage'.$posts_per_page.'-->'; // **ISSUE LIES HERE WITH TOO MANY PAGES
        }
    }
    echo '<li class="bpn-next-link">';
    next_posts_link('&raquo;');
    echo '</li>';
    if ($end_page < $max_page) {
        $last_page_text = "Last";
        echo '<li class="bpn-last-page-link"><a href="'.get_pagenum_link($max_page).'" title="'.$last_page_text.'">'.$last_page_text.'</a></li>';
    }
    echo '<a href="'.home_url().'/about#users" class="browse mobile-hide">Browse authors</a></ol></nav>'.$after."";
} 
```

这就是我将最新帖子放在索引页面上的方式。

```
 <?php if (have_posts()) : ?>
                    <?php $post = $posts[0]; $c=0;?>
                    <?php while (have_posts()) : the_post(); ?>

                    <?php $c++;
                    if( !$paged && $c == 1) : // code for the first post  ?>

                    <div><article id="post-<?php the_ID(); ?>" <?php post_class('clearfix blog first-blog'); ?> role="article">

                        <header class="article-header">

                            <?php if ( has_post_format( 'link' )) { ?>

                            <a href="<?php echo get_post_meta($post->ID, 'link_url', true); ?>" rel="bookmark" title="Visit link: <?php the_title_attribute(); ?>" target="_blank">

                            <?php } else { ?>

                            <a href="<?php the_permalink() ?>" rel="bookmark" title="<?php the_title_attribute(); ?>">

                            <?php }; ?>

                                <div class="date">
                                    <time class="updated" datetime="<?php echo the_time('Y-m-j'); ?>" pubdate>
                                        <span class="month"><?php the_time('M'); ?></span>
                                        <span class="day"><?php the_time('j'); ?></span>
                                        <span class="year"><?php the_time('Y'); ?></span>
                                    </time>
                                </div>

                                <?php if ( has_post_format( 'link' )) {
                                  echo '<div class="link"><i class="icon-link"></i></div>';
                                } ?>
                                <h1 class="h2"><?php the_title(); ?></h1>

                            </a>

                        </header> <!-- end article header -->

                        <?php if ( has_post_format( 'link' )) {
                                  echo '';
                        } else { ?>  

                        <div class="blog-body clearfix">

                            <?php if ( has_post_format( 'video' )) {
                                echo '<div class="eightcol first vid">'.get_post_meta($post->ID, 'video_url', true).'</div>'; 
                             } else { ?>

                            <a class="image mobile-hide" href="<?php the_permalink() ?>" rel="bookmark" title="<?php the_title_attribute(); ?>">
                                <?php the_post_thumbnail('large', array('class' => 'mobile-hide eightcol first')); ?>
                            </a>

                            <?php } ?>

                            <section class="entry-content clearfix mobile-hide fourcol last">

                                <p class="byline"><?php _e('by', 'bonestheme'); ?> <span class="author"><?php the_author_posts_link(); ?></span></p>

                                <?php the_content( 'Continue reading...' ); ?>
                            </section> <!-- end article section -->

                        </div><!-- end blog body -->

                        <?php } ?>

                    </article></div> <!-- end article --> 
```

抱歉，我还是 PHP 新手。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-09T17:32:55.630

所以以防有人好奇，我通过包括但不确定这是否是正确的形式来解决它，`if(($numposts%9)==1){ $max_page=$end_page=$end_page-1; }`我`if((($numposts%9)==1) && ($paged == ($max_page))) { } else { next_posts_link('&raquo;'); }`相信它可以被清理，但它有效！

# mongodb - Scala：使用 Casbah 在 MongoDB 中写入/更新/删除对象的示例？

> ID：15667047
> 
> 赞同：2
> 
> 时间：2013-03-27T18:50:26.993
> 
> 标签：mongodb, scala, crud, casbah

[在 Casbah 教程（ http://mongodb.github.com/casbah/tutorial.html](http://mongodb.github.com/casbah/tutorial.html) ）中找不到任何描述如何在 MongoDB 中编写/更新/删除对象。请帮助提供示例或告诉要查找这些方法的类。谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-28T03:33:57.360

**更新的答案**

在提出并回答了这个问题几个月后，Casbah 文档被更新为包括[Doing CRUD 操作](http://mongodb.github.io/casbah/tutorial.html#doing-crud-operations)部分。也许这个问题/答案有助于实现这一目标。或者，也许有人意识到不在数据库教程中记录 CRUD 操作是克雷克雷。

**原始答案**

为了理解为什么 Cashbah 教程没有提供如何从 MongoDB 数据库中插入、更新或删除文档的示例，一个好的起点是 Casbah 文档的第一段：

> Casbah 是 MongoDB 的 Scala 工具包 --- 我们使用术语“工具包”而不是“驱动程序”，因为 Casbah 在官方 mongo-java-driver 之上集成了一个层，以便更好地与 Scala 集成。这与 MongoDB 有线协议的本机实现相反，Java 驱动程序做得非常好。Casbah 没有完全重写，而是使用隐式和 Pimp My Library 代码来增强现有的 Java 代码。

Casbah 是一个增强 Java 驱动程序的工具包。因此，为了有效地使用 Casbah，必须先阅读 Java 驱动程序文档，然后再阅读 Casbah 文档。

为了进一步激发这个建议，看看 Casbah 如何包装 Java 驱动程序中的一些方法：

```
trait MongoCollectionBase extends Logging { self =>
  ...
  val underlying: DBCollection
  ...
  def save[A <% DBObject](jo: A) = underlying.save(jo)
  ...
  def update[A <% DBObject, B <% DBObject](q: A, o: B) = underlying.update(q, o)
  ...
  def remove[A <% DBObject](o: A) = underlying.remove(o)
  ... 
```

正如上面的摘录所示，Casbah`MongoCollection`是 Java 驱动程序的`DBCollection`. 这是为了说明，如果 Casbah 工具包没有处理某些事情，那么它正在通过调用 Java 驱动程序来处理。

以下是有关如何使用 Java 驱动程序从 MongoDB 数据库中插入、更新和删除文档的示例的链接：

*   [此处](http://docs.mongodb.org/ecosystem/tutorial/getting-started-with-java-driver)记录了如何在数据库中插入和更新文档；
*   [此处](http://java.dzone.com/articles/basic-java-crud-operations)提供了如何删除文档的示例。

既然您了解了 Casbah 与 Java 驱动程序的关系，那么将这些示例移植到使用 Casbah 应该很简单。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-08-20T19:25:13.120

我准备了一些如何使用 casbah 的示例，到目前为止非常简单。稍后我会添加更多功能。

[https://github.com/talgendler/casbah](https://github.com/talgendler/casbah)

```
object AddressMongoConverter {
  def convertToMongoObject(address: Address): DBObject = {
    MongoDBObject(
      STREET -> address.street,
      ZIP_CODE -> address.zipCode,
      CITY -> address.city,
      COUNTRY -> address.country
    )
  }

  def convertFromMongoObject(db: DBObject): Address = {
    Address(
      street = db.getAsOrElse[String](STREET, mongoFail),
      zipCode = db.getAsOrElse[Int](ZIP_CODE, mongoFail),
      city = db.getAsOrElse[String](CITY, "Tel-Aviv"), // slightly different get
      country = db.getAsOrElse[String](COUNTRY, "Israel")
    )
  }
} 
```

# python - 基本 Python 模块错误

> ID：15667048
> 
> 赞同：0
> 
> 时间：2013-03-27T18:50:31.177
> 
> 标签：python, module

所以我正在为我的新工作学习python，从java背景开始，我遇到了以下错误。

我尝试在终端上运行这个模块（使用 mac），然后通过 IDLE。都是徒劳的。

```
 userName = input("What is your name?: ")
   lengthName = str(len(usernName))

   yourName = "\nYour name is " + userName + " and is " + legnthName + " letters long."

   print(yourName)
   input("\nPress enter to exit") 
```

当这在终端中执行并且我输入第一个输入时：“John”我得到这个结果：

```
 File "[...]", line 1, in <module>
   userName = input("What is your name?: ")
   File "<string>", line 1, in <module>
   NameError: name 'John' is not defined 
```

同样，当通过 IDLE 执行时：

```
 Traceback (most recent call last):
     File "/Users/zachmartin/Desktop/python fails/lol.py", line 2, in <module>
       lengthName = str(len(usernName))
   NameError: name 'usernName' is not defined 
```

这里发生了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-27T18:51:57.777

两个问题：

*   您应该使用`raw_input()`而不是`input()`（因为`input()`会将您键入的内容视为 Python 代码并尝试对其进行评估）。

*   你有一个错字，`userName`vs . `usernName`（注意额外的`n`）。（`legnthName`稍后也会。）

# php - 获取某人登录计算机的名称

> ID：15667051
> 
> 赞同：3
> 
> 时间：2013-03-27T18:50:54.020
> 
> 标签：php, javascript

我想知道是否有可能获得在 php 或 javascript 中登录到计算机的人的用户名。例如，如果我在笔记本电脑上登录计算机并访问网站，我希望它显示我登录时使用的名称。

有没有办法做到这一点，或者是不可能的

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-27T18:52:19.263

这对于 PHP 或 Javascript 是不可能的。

您可以查看发送到服务器的标头以查看发送了哪些数据（[getallheaders](http://php.net/manual/en/function.getallheaders.php)）。

正如其他人建议的那样，您可以使用与主机更紧密集成的插件来获取此信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T18:54:29.490

PHP 是服务器端，您必须使用 PHP 网络服务器插件，如活动目录。但是用户必须通过您的网站进行身份验证，您不能只是“拉”

**LDAP 示例：**
[通过 Active Directory 使用 LDAP 在 PHP 中进行身份验证](https://stackoverflow.com/questions/171519/authenticating-in-php-using-ldap-through-active-directory)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-27T18:55:28.213

实际上，如果您有 Apache NTLM 模块，这是可能的。但是您必须能够将其安装在您的服务器上。所以如果它是一个托管的盒子，可能不会工作。缺点，我认为它只适用于 IE。

> NTLM 是 Microsoft Internet Informations Server(tm) 和 Microsoft Internet Explorer(tm) 使用的身份验证协议。虽然它不是很安全，但它提供了后台身份验证（用户的工作站登录凭据被传递到 Web 服务器）。此功能广泛用于基于这些 Microsoft 产品的 Intranet。

[http://modntlm.sourceforge.net/](http://modntlm.sourceforge.net/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-27T18:57:05.170

PHP 是一个服务器端脚本引擎，除了浏览器向服务器发送的内容外，它对客户端一无所知，但用户名不存在。

与 JavaScript 相同 - 这个在客户端运行，但与网页共享用户名可能是一个严重的安全漏洞。网站应远离任何用户敏感数据。

最后，一些系统可能没有实现任何用户配置文件（如手机和智能手机）。那会寄什么？

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-01-11T01:17:34.713

如果只是登录名（用户 ID）：

```
<?php echo filter_input(INPUT_SERVER, 'LOGON_USER'); ?>
```

这与

```
<?php echo $_SERVER['LOGON_USER']; ?>
```

你也可以使用

```
<?php

foreach ($_SERVER as $var => $value){

    echo "$var => $value<br />";

}

?>
```

显示服务器或本地主机中可用的超全局 $_SERVER 的所有可能值。

# debugging - 使用 jstl 进行调试 - 究竟如何？

> ID：15667052
> 
> 赞同：3
> 
> 时间：2013-03-27T18:50:57.770
> 
> 标签：debugging, jsp, jstl

我一直在尝试了解[BalusC](https://stackoverflow.com/questions/3177733/how-to-avoid-java-code-in-jsp-files)关于可调试性的答案，但我仍然无法准确弄清楚 jstl 标记如何比 scriptlet 更容易调试。

当我想到调试时，我想到的是单步执行代码并确定在任何给定点将哪些变量加载到内存中并查看其内容的能力。使用 jstl，我无法设置任何类型的断点，如果它的任何部分中断，我正在处理的任何形式的碎片都会丢失。我不确定哪个更糟：空白页面或半加载页面。我见过这样的情况：当 jstl 失败时，表单的其他部分会丢失，而不仅仅是它影响的部分。无论哪种情况，都无法真正看出问题所在。

使用 scriptlet，我可以放置断点，并在 IDE 中查看我想要的任何点。即使我没有使用这样的功能，我也可以将我想查看的任何部分程序打印到控制台，并在以后弄清楚。如果页面失败并显示一个空白页面，尽管这可能很烦人，我至少可以逐步找出它失败的确切行。

使用jstl，我完全处于黑暗之中。遍历一个集合真的感觉就像一个黑盒子，你希望一切都正常，而不是真正能够一步一步地观察它的发生。它让你感到无能为力。

我承认，jstl 更简洁，看起来更直观，但我遇到的一个明显问题是无法真正调试页面上的任何内容。我在这里完全错了吗？我只是错过了调试正在发生的事情的好方法吗？还是我的调试方法不正确，需要重新考虑？

我已经用谷歌搜索了这个问题，但我似乎无法找到任何直接的答案......如果有人对此有任何见解，那将非常有帮助。我想使用 jstl 代替 scriptlet，这是让我退缩的一个明显的事情......

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2017-04-11T17:02:50.627

您可以添加 jsp scriptlet 并打印 jstl 使用的变量。这会打印在控制台或容器的输出文件中

```
 <c:set var="myVar" value='${param.myUrlParam}' />

    <% System.out.println(pageContext.findAttribute("myVar") ); %> 
```

这是我能找到的调试 jstl 页面的唯一最佳方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T16:57:30.207

[如果您使用符合JSP/EL 规范](http://jcp.org/aboutJava/communityprocess/mrel/jsr245/index.html)和[JSTL 文档](http://docs.oracle.com/javaee/5/jstl/1.1/docs/tlddocs/)的 JSTL 标记，则它们本身不需要调试。在您找到的答案中，“可调试性”仅指用于业务逻辑的 Java 代码的上下文，需要用 Java 类（如 servlet、过滤器、实体或 EJB）替换，而不是用于表示逻辑的 Java 代码，需要被 JSTL 标记替换，例如`if/else`块、`for`循环、HTML 转义、日期/数字格式、字符串操作函数等。

但是，如果您遇到的问题已经找到了明显是 JSTL 标记的根本原因，那么如果您正确使用它们，请重新阅读[JSTL 文档。](http://docs.oracle.com/javaee/5/jstl/1.1/docs/tlddocs/)您也可以使用以下模板转储感兴趣的 EL 变量：

```
<h2>Request headers</h2>
<dl>
    <c:forEach items="${headerValues}" var="entry">
        <dt><c:out value="${entry.key}" /></dt>
        <dd>
            <c:forEach items="${entry.value}" var="headerValue" varStatus="loop">
                <c:out value="${headerValue}" />${not loop.last ? ', ' : ''}
            </c:forEach>
        </dd>
    </c:forEach>
</dl>

<h2>Request params</h2>
<dl>
    <c:forEach items="${paramValues}" var="entry">
        <dt><c:out value="${entry.key}" /></dt>
        <dd>
            <c:forEach items="${entry.value}" var="paramValue" varStatus="loop">
                <c:out value="${paramValue}" />${not loop.last ? ', ' : ''}
            </c:forEach>
        </dd>
    </c:forEach>
</dl>

<h2>Request scope</h2>
<dl>
    <c:forEach items="${requestScope}" var="entry">
        <dt><c:out value="${entry.key}" /></dt>
        <dd><c:out value="${entry.value}" /></dd>
    </c:forEach>
</dl>

<h2>Session scope</h2>
<dl>
    <c:forEach items="${sessionScope}" var="entry">
        <dt><c:out value="${entry.key}" /></dt>
        <dd><c:out value="${entry.value}" /></dd>
    </c:forEach>
</dl>

<h2>Application scope</h2>
<dl>
    <c:forEach items="${applicationScope}" var="entry">
        <dt><c:out value="${entry.key}" /></dt>
        <dd><c:out value="${entry.value}" /></dd>
    </c:forEach>
</dl> 
```

如有必要，您可以将其包装在某个弹出面板中，该面板通过访问密钥打开并且仅在开发模式期间呈现（Java EE 的 MVC 框架 JSF 的风格非常相似`<ui:debug>`）。

如果徒劳无功，请将问题确定为最小的 JSP 文件，该文件通过复制'n'paste'n'running 来重现整个问题（在这样的示例中，您可以将必要的业务逻辑和例如`request.setAttribute()`行放在一个*脚本*中放置在 JSP 文件的最顶部；这样的原型设计是*scriptlet*的合法用例之一）。

如果您仍然无法根据该 SSCCE 找出答案，请将其作为问题发布在 Stack Overflow 上。如果正确放置，您可能会在不到一天的时间内得到答案。如果它经常归结为简单的错字或语法/逻辑错误，请不要感到惊讶。

# html - 带有链接的固定宽度标题文本

> ID：15667054
> 
> 赞同：0
> 
> 时间：2013-03-27T18:50:58.487
> 
> 标签：html, css

我有几个这样的帖子：

```
<p>Title 1 <a href="/view/1">view</a></p>
<p>Title 2 <a href="/view/2">view</a></p>
<p>Longer Title 3 <a href="/view/3">view</a></p> 
```

是否可以对它们进行 CSS 以使标题文本具有固定宽度，例如 300 像素，并且所有“视图”链接都出现在文本的右侧，并且作为一列在另一列下方？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T18:58:49.607

如果您无法更改 HTML

```
p {
    width: 300px;
}

p a {
    float: right;
} 
```

[http://jsfiddle.net/DvYq8/](http://jsfiddle.net/DvYq8/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T18:56:11.237

[http://jsfiddle.net/t6a9A/](http://jsfiddle.net/t6a9A/)

不得不稍微修改HTML...

**HTML：**

```
<p><span>Title 1</span> <a href="/view/1">view</a></p>
<p><span>Title 2</span> <a href="/view/2">view</a></p>
<p><span>Longer Title 3</span> <a href="/view/3">view</a></p> 
```

**CSS：**

```
p {
    width: 300px;
    height: 50px;
    position: relative;
}
p > span {
    display: block;
    width: 100%;
    background: #ccc;
}

p > a {
    position: absolute;
    top: 20px;
    left: 0;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-27T18:58:33.290

如果不允许修改 html，这里是 CCS 代码。您需要更改`a`标签显示属性。

```
<style type="text/css">
a { display:block; }
p { border:1px solid #FF0000; width:300px; }
</style> 
```

[样本](http://jsfiddle.net/XxvZB/1/)

但是，实际上最好重写您的 HTML 结构，使其更可靠且易于通过 CSS 管理。

# javascript - 中断请求时如何返回ajax错误？

> ID：15667057
> 
> 赞同：0
> 
> 时间：2013-03-27T18:51:12.907
> 
> 标签：javascript, jquery, ajax, json

我正在一个 Django 网站上工作，其中包含许多返回 json 数据的 web 服务（Rest/Piston）。

这是调用网络服务的函数；它有时可以正常工作，但在某些错误中它不会返回错误消息，只会返回“未定义错误”。如何查看错误消息或知道错误是什么？

```
function ws(p_url, p_json, p_type, p_auth, p_before, p_success, p_finally, p_async) {
    dict = {
       url : p_url,
       beforeSend : function(request) {
          request.setRequestHeader('Authorization', p_auth);
          eval(p_before);
       },
       cache : false,
       type : p_type,
       data : p_json,
       async : false,
       contentType : 'application/json; charset=utf-8',
       processData : false,
       dataType : 'json',
       timeout : 10000,
       success : function(json, textStatus) {
          eval(p_success);
       },

       error: function(e) {     
          alert("Error "+e.responseText);
          return false;
       },
       complete: function(XMLHttpRequest, status) {
          alert("Complete");
       }
   };
   $.when(
       $.ajax(dict) ).done(function(){
          eval(p_finally);
          preLoader.fadeOut(300);
          return resposta;
       }).fail(function(fail_msg){
          alert("Fail: "+fail_msg);
       }
   );
}; 
```

# jquery - 为兄弟姐妹腾出空间

> ID：15667058
> 
> 赞同：0
> 
> 时间：2013-03-27T18:51:16.167
> 
> 标签：jquery, autosize

我正在为我的用例调整一个 textarea 自动增长插件

[http://jsfiddle.net/hY73a/](http://jsfiddle.net/hY73a/)

变化是从一开始就应该是单行的，并且应该为兄弟姐妹留出空间

我正在计算这样的兄弟姐妹宽度，但我一定做错了，因为你可以看到两个兄弟姐妹都不适合

```
var siblings = $self.siblings();
var siblingsWidth = 0;
for(var i = 0; i < siblings.length; i++) 
    siblingsWidth += $(siblings[i]).outerWidth(); 
```

然后设置 max-width 像

```
$self.css({"max-width": $self.parent().innerWidth() - siblingsWidth }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T20:01:07.570

发生这种情况的原因是`span`元素是`display: inline`元素，浏览器会在它们周围放置空格，就像放置文本节点一样。这导致这些组件占用的空间量等于它们的宽度**加上**它们之间的空间量。

为了证明这一点，我删除`span`了 HTML 中元素之间的所有间距。

```
<div style="width: 200px; border: solid black 1px">
    <textarea></textarea><span>SibOne</span><span>SibTwo</span>
</div> 
```

另一个需要注意的地方是原始代码没有考虑到文本区域框模型的其他组件（例如，边距、边框、填充）所用的宽度量。

```
// Get the amount of horizontal space used up by the textarea margin, border, and padding
var selfUnfactoredWidth = parseInt($self.css('margin-left'), 10) 
    + parseInt($self.css('margin-right'), 10) 
    + parseInt($self.css('border-left-width'), 10) 
    + parseInt($self.css('border-right-width'), 10) 
    + parseInt($self.css('padding-left'), 10) 
    + parseInt($self.css('padding-right'), 10);

$self.css({
    "max-width": $self.parent().innerWidth() - selfUnfactoredWidth - siblingsWidth
}); 
```

[**演示**](http://jsfiddle.net/KLK2q/3/)

或者，您可以使用`box-sizing`修改默认[CSS 框模型](https://developer.mozilla.org/en-US/docs/CSS/Box_model)。

```
textarea { 
    resize: none;
    border: solid black 1px;
    -moz-box-sizing: border-box;
    -webkit-box-sizing: border-box;
    box-sizing: border-box;
} 
```

这样做可以让你省略之前的边框和填充宽度，因为改变的盒子模型会处理它。

```
// Get the amount of horizontal space used up by the textarea margin, border, and padding
var selfUnfactoredWidth = parseInt($self.css('margin-left'), 10) 
    + parseInt($self.css('margin-right'), 10);

$self.css({
    "max-width": $self.parent().innerWidth() - selfUnfactoredWidth - siblingsWidth
}); 
```

**[演示（使用`box-sizing`）](http://jsfiddle.net/KLK2q/4/)**

# c - 在 mpir 中创建大数组

> ID：15667065
> 
> 赞同：0
> 
> 时间：2013-03-27T18:51:38.380
> 
> 标签：c, arrays, memory, large-data

对于 mpir 中的小数组和浮点数，我没有收到错误消息，但是当我想创建一个非常大的数组时。说 >100,000,000 我收到以下错误消息：

GNU MP: 无法分配内存 (size=16) 按任意键继续。. .

不幸的是，我需要 2 个大型阵列。一个大小为 100,010,000，另一个大小为 1,000,100。这在 Windows 64 位机器上可行吗？

有没有办法从内存中清除数组的一部分而不是整个数组（在 MPIR 上）以创建空间？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T19:05:56.257

您无法成功地将那么多内存分配到一个数组中，因为数组的元素必须在内存中连续出现，而且您的堆的当前状态不太可能允许这样的事情。

假设您正在讨论系统上 a 的大小可能为 的`float`数组，那么您能够分配 400MB 内存的唯一可能方法是存在 4 亿个未占用的**连续内存地址。**`float``4`

 ****编辑：**我不是说这是不可能的，我只是说它不可靠。

**编辑 2：**一个解决方案是让您分块分配内存。您可以将其分配为一组 100 万个浮点数，而不是一个包含 1 亿个浮点数的数组。您更有可能分配 100 个 4MB 的块，而不是 1 个 400MB 的块。**

# java - Java老虎机

> ID：15667069
> 
> 赞同：1
> 
> 时间：2013-03-27T18:51:43.917
> 
> 标签：java

我的 CS 课有作业问题。我应该做一台老虎机，但我无法继续工作，我知道扫描仪 nextLine 方法会跳过该行并保留那里的内容，但它不会让我输入任何内容，它只会结束程序。由于我的教授要求的格式，我还必须将此方法拆分并使其不超过 30 行。我还必须保持奖金的总和，但我不知道如何为头奖做这件事。

```
/**
 * ProgrammingAssignment2.java
 * 
 * @author Corey Goff 
 * @version March 2013
 */
import java.util.Random;
import java.util.Scanner;
/**
* This class simulates a slot machine.
*/
public class SlotMachine
{
   /**
    * This is the main method.
    * 
    * @param args
    */
   public static void main(String[] args)
   {
       Scanner keyboard = new Scanner(System.in);
       Random random = new Random();
       String cont = "n";
       char answer;
       int coin = 0;
       int totalEntered = 0;
       int a;
       int b;
       int c;
       int n;
       int amountWon = 0;
       int dubs = coin * 2;
       int trips = coin * 4;

       while (cont.equals("n"))
       {
           a = random.nextInt(6);
           b = random.nextInt(6);
           c = random.nextInt(6);
           n = random.nextInt(991) +10;
           totalEntered += coin;
           System.out.println("How much would you like to bet? ");
           coin = keyboard.nextInt();

           switch (a) 
           {
               case 0:
                   System.out.println("Cherry");
                   break;
               case 1:
                   System.out.println("Orange");
                   break;
               case 2:
                   System.out.println("Plum");
                   break;
               case 3:
                   System.out.println("Bell");
                   break;
               case 4:
                   System.out.println("Melon");
                   break;
               default:
                   System.out.println("Bar");
           }

           switch (b) 
           {
               case 0:
                   System.out.println("Cherry");
                   break;
               case 1:
                   System.out.println("Orange");
                   break;
               case 2:
                   System.out.println("Plum");
                   break;
               case 3:
                   System.out.println("Bell");
                   break;
               case 4:
                   System.out.println("Melon");
                   break;
               default:
                   System.out.println("Bar");
           }

           switch (c) 
           {
               case 0:
                   System.out.println("Cherry");
                   break;
               case 1:
                   System.out.println("Orange");
                   break;
               case 2:
                   System.out.println("Plum");
                   break;
               case 3:
                   System.out.println("Bell");
                   break;
               case 4:
                   System.out.println("Melon");
                   break;
               default:
                   System.out.println("Bar");
           }

           if (a != b && a != c && b != c)
           {
               System.out.println("You have won $0");
           }
           else if (a == b || a == c || b == c)
           {
               System.out.println("Congratulations, you have won $" + dubs);
                  amountWon += dubs;
           }
           else if (a == b && a == c && a != 0)
           {
               System.out.println("Congratulations, you have won $" + trips);
                  amountWon += trips;
           }
           else if (a == 0 && b == 0 && c == 0)
           {
               System.out.println("Congratulations! You have won the jackpot of $" 
                   + (coin * n));

           }

           System.out.println("Continue? y/n ");
           cont = keyboard.nextLine();
       }
   }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T18:59:44.157

调用keyboard.nextInt() 后，必须调用keyboard.nextLine() 将换行符转储到缓冲区中。nextInt() 读取直到找到不能作为 int 一部分的内容，并将 int 之后的所有内容留在缓冲区中。

有关更多信息，请参阅这篇文章：[读取字符串 next() 和 nextLine() Java](https://stackoverflow.com/questions/8873351/reading-strings-next-and-nextline-java)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T19:04:14.837

让你的代码工作（几乎没有改变）：使用`keyboard.next();`而不是`keyboard.nextLine();`

将您的初始 cont = "n" 更改为 cont = "y"，并让 while 循环检查 if (cont.equals("y"))。

这是一个快速修复，可以进行许多更改以提高效率并跟上标准，但我不会详细介绍。

至于 30 行以下的要求，我将首先使用一个随机生成器在一个结构中生成所有 3 个水果。问问自己，为什么你必须为每个水果有单独的随机生成器？为什么每个水果都换一个新开关？一个随机与 3 个随机生成器将为您的水果产生相同的随机性。

# oauth-2.0 - 使用 WebBrowser 控件的 Yammer 嵌入源

> ID：15667075
> 
> 赞同：3
> 
> 时间：2013-03-27T18:52:09.200
> 
> 标签：oauth-2.0, yammer

我正在开发一个应用程序（.Net Windows 窗体）并使用 Web 浏览器控件来显示用户数据和 yammer 嵌入式提要。作为起点，我在 Web 浏览器控件中使用以下脚本。

```
<script> 
    yam.connect.embedFeed({
    container: "#embedded-feed",
    network: "mynetwork.com",
    feedType: "group",
    feedId: "11111"});
</script> 
```

它向我显示“使用 Yammer 登录”登录按钮，但一旦我使用 OAuth 对话框登录，它就不会显示嵌入式提要。OAuth 弹出窗口也未关闭。我在浏览器/IE 中尝试了相同的 html 页面，它工作正常。

在这种情况下，如何在客户端应用程序/Web 浏览器控件中使用嵌入式提要或如何与 OAuth 交互？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-07-10T17:58:28.160

通过 postMessage 对原始帖子的 OAuth 弹出式回调，让它知道用户已通过身份验证。并且主嵌入重新加载自身。我不熟悉 Web 浏览器控件。你最好的选择是寻找任何被吐出的错误。或者找出 Web 浏览器控件是否对 postMessage 有一些限制。

# python - 列出边界——最 Pythonic 的方式是什么？

> ID：15667083
> 
> 赞同：0
> 
> 时间：2013-03-27T18:52:34.890
> 
> 标签：python

我有一个 Python 列表，我想检查给定的索引是否超出范围。由于我接受用户输入，我想将索引限制为大于或等于 0 的整数。最 Pythonic 的方法是什么？目前，这是我的解决方案：

```
def get_current_setting(self, slot):
    if slot < 0 or slot > len(self.current_settings) - 1:
        raise Exception("Error message...")
    return self.current_settings[slot] 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T18:54:01.560

`IndexError`为什么不尝试访问该值，如果超出范围，您将得到一个。您想要做的任何与众不同的检查，只需事先手动进行即可。

```
def get_current_settings(self, slot):
    if slot < 0:
        raise IndexError(...)
    return self.my_list[slot] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-27T19:07:44.983

在 Python 中，您可以同时进行两项检查（下限和上限），从而使 if 条件更具可读性：

```
def get_current_setting(self, slot):
    if not 0 <= slot < len(self.current_settings):
        raise Exception("Error message...")
    return self.current_settings[slot] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-27T18:59:44.840

我会用这个替换你的 if 行：

```
 if slot not in range(len(self.my_list)): 
```

# javascript - 如何理解 Javascript 中的闭包？

> ID：15667093
> 
> 赞同：23
> 
> 时间：2013-03-27T18:53:41.077
> 
> 标签：javascript, closures

如何理解 Javascript 中的闭包？

> 一般而言，闭包是绑定到一个或多个外部变量的函数。当它被调用时，该函数能够访问这些变量。在 JavaScript 中，当函数在另一个函数中声明时，通常会实现闭包。内部函数访问父函数的变量，即使在父函数终止后

在这句话中，“闭包是绑定到一个或多个外部变量的函数”，这是否意味着我们可以这样做：对`var myFun = Function(msg){...};`吗？

“即使在父函数终止之后”是什么意思？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-27T19:07:29.340

> 闭包是绑定到一个或多个外部变量的函数

这个概念的一个例子是函数 bar 绑定到外部变量 x、y 和 z：

```
function foo(x, y) {
  var z = 3;

  return function bar(a, b, c) {
    return (a + b + c) * (x + y + z);
  };
}

var closure = foo(1, 2);
closure(5, 6, 7); // (5 + 6 + 7) * (1 + 2 + 3) = 24 
```

变量`closure`指的是`bar`调用返回的内部函数`foo`。调用`closure`就像重新进入 范围内的范围`foo`，它可以看到所有`foo`的局部变量和参数。

> 即使在父函数终止之后

这意味着在`foo`执行之后，存储在`closure`变量中的返回函数保持`foo`. 你甚至可以通过`foo`再次调用来创建多个独立的闭包：

```
var closure = foo(1, 2);
closure(5, 6, 7); // (5 + 6 + 7) * (1 + 2 + 3) = 24

var closure2 = foo(0, 0);
closure2(5, 6, 7); // (5 + 6 + 7) * (0 + 0 + 3) = 21

/* closure2 does not affect the other closure */
closure(5, 6, 7); // (5 + 6 + 7) * (1 + 2 + 3) = 24 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-27T18:57:57.207

您对外部变量的解释不正确。这真的意味着它可以做到这一点：

```
function make_closure() {
  var x = 20;
  return function() {
    console.log(x);
  };
}

var closure = make_closure();
closure(); // Displays 20
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-27T19:04:30.963

我不确定你从哪里引用，但听起来它是在父函数完成运行时引用的。

# random - MIPS 32 位随机整数

> ID：15667097
> 
> 赞同：0
> 
> 时间：2013-03-27T18:53:46.593
> 
> 标签：random, integer, mips, 32-bit

我试图让 MIPS 生成 32 位随机整数。我正在尝试使用以下代码，但在运行程序时会出错。

```
addi $v0, $zero, 42
li $a1, 4294967295 #32 bit number
syscall 
```

我正在使用火星模拟器。该程序汇编没有任何错误。执行上述系统调用时会出现问题。我真的很感激任何帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T18:59:09.687

我认为问题在于您提供的最大数量（`0xffffffff`）。尝试使用（有符号的）最大正值（`0x7fffffff`）

```
addi $v0, $zero, 42
li $a1, 0x7fffffff  #32 bit number (maximum 32bit signed positive number)
syscall 
```

根据 OP 的评论，要获得 32 位数字，您可以分两步进行：首先“掷硬币”获得第 32 位，然后随机获得其他 31 位：

```
 addi $v0, $zero, 42
    move $a2, $zero
    li $a1, 2
    syscall
    bnez $a0, skip
    li $a2, 0x80000000
skip:
    li $a1, 0x7fffffff #31 bit number (maximum 32bit signed positive number)
    syscall
    or $a0, $a0, $a2   # Here $a0 has a 32 bit number 
```

# android - 像这样漂亮干净的android滚动？（附图片）

> ID：15667103
> 
> 赞同：1
> 
> 时间：2013-03-27T18:54:01.440
> 
> 标签：android, android-styles, android-scroll, android-scrollbar

如何让我的 android 滚动条看起来像这样？（见图片链接）。...我正在开发我的第一个 Android 应用程序。我是 android 新手，有时最简单的事情可能是一个挑战。谁能指出我正确的方向。谢谢。

![在此处输入图像描述](../Images/20edad52844c9afe3443a5d87e54bc19.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-27T19:09:27.697

每个设备上的滚动条看起来都略有不同，尤其是对于每个版本的 Android 操作系统。

**我建议您将它们完全保留为默认值。**

您的滚动条看起来会有所不同，可能就像您的示例一样，具体取决于您测试应用程序的设备。

如果滚动条的外观和行为与设备上所有其他应用程序中的所有其他滚动条完全一样，我认为您的应用程序会看起来更好，并且更专业地支持您的用户。

在自定义方面，您可以添加无限数量的关于滚动条、快速滚动、显示水平和垂直轨道、滚动主题等的修改。在该链接中查看[android:scrollbarStyle](http://developer.android.com/reference/android/view/View.html#attr_android%3ascrollbarStyle)和其他参数。

# jquery - ASP.NET MVC 3 和 jquery 验证：客户端验证是否支持自定义 html 控件

> ID：15667105
> 
> 赞同：1
> 
> 时间：2013-03-27T18:54:07.123
> 
> 标签：jquery, asp.net-mvc-3, validation, custom-controls

前言：自定义 html 控件应该遵循包含在父表单中的部分视图中的标记：

```
 <select id="SomeModelFieldId" name="SomeModelFieldId">
         @{
                 <option value="">Select smthg...</option>

            foreach(var item in SomeModelFieldList)
            {
                 <option value="@item.Id">@item.Text</option>
            }
         }
    </select> 
```

需要通过赋予它们额外的属性来自定义“选项”行为。

问题是当我做这样的事情时

```
 @Html.DropDownListFor(m => SomeModelFieldId, new SelectList(SomeModelFieldList), "Select smthg...", new { }) 
```

提交发生后验证工作正常[换句话说，在回发时 - 这对我来说是可以接受的]，但是如果我将标记更改为前面提到的验证引擎什么都不做。

我已经比较了使用 mvc 提供的 DropDownListFor-control 和我的自定义标记生成的标记 - 它们似乎是相同的......我错过了什么吗？/ 设计上真的不可能吗？

# php - 如何在ajax从名为filter.php的其他php文件中获取数据并将其返回到当前页面时添加加载符号

> ID：15667109
> 
> 赞同：0
> 
> 时间：2013-03-27T18:54:19.697
> 
> 标签：php, javascript, html, ajax

这是我的 html 文件，它调用提交按钮的处理函数 onclick。我的问题是，当我调用作为 javascript 函数的 process 函数时，它会刷新漏洞页面，并且 ajax 没有返回任何内容，#loadscreen 也没有显示任何内容

```
<head><script src="jquery-1.9.1.min.js"></script></head>
<form  name="myForm">
Category
        <select name="category">
            <option>..........</option>
            <option>.........</option>
            <option>.......</option>
            <option>......</option>

        </select>
        <br/><br/>

Experience      <br/>   
        <select name="experience">
            <option>......</option>
            <option>......</option>
            <option>......</option>
            <option>......</option>
            <option>......</option>

        </select>
        <br/><br/>

Location            
        <select name="location">
            <option>......</option>
            <option>......</option>
            <option>......</option>
            <option>.......</option>
            <option>........</option>
        </select>

<input type="submit" name="submit" value="Search" onclick="Process(); return false;">    </input>           
</form>
<div id="container" style="z-index: 1; width: 830px; height: 356px; position: absolute; top: 194px; left: 218px"></div>
<div id="loadScreen" style="display: none;width: 100%; height: 100%; top: 0pt;left: 0pt;">
<div id="loadScr" style="filter: alpha(opacity = 65);  z-index: 9999;border: medium        none; margin: 0pt; padding: 0pt; width: 100%; height: 100%; top: 0pt;left: 0pt; background-color: rgb(0, 0, 0); opacity: 0.2; cursor: wait; position: fixed;"></div>
<div id="loader"  style="z-index: 10000; position: fixed; padding: 0px; margin: 0px;width: 30%; top: 40%; left: 35%; text-align: center;cursor: wait; ">
<img src="busy.gif" alt="loading" />
</div>
</div> 
```

这是使用 ajax 的 Process 函数的代码和繁忙页面的代码

```
function Process( )
{
$('#loadScreen').show(function() {
var exp = document.forms['myForm']['experience'].value;
      var loc = document.forms['myForm']['location'].value;
      var cat = document.forms['myForm']['category'].value;

    if (window.XMLHttpRequest)
      {// code for IE7+, Firefox, Chrome, Opera, Safari
        xmlhttp=new XMLHttpRequest();
      }
    else
      {// code for IE6, IE5
        xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
      }
        xmlhttp.onreadystatechange=function()
         {
            if (xmlhttp.readyState==4 && xmlhttp.status==200)
             {

                document.getElementById("container").innerHTML=xmlhttp.responseText;
             }
      }

    xmlhttp.open("GET","filter.php?experience="+ exp +"&location=" + loc + "&category=" + cat, true);
    xmlhttp.send();
});
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T19:00:11.373

不知道如何按照您的方式进行操作，但您可以使用已内置功能的**JQuery库。例如：**

```
$.ajax({
   type: 'get',
   url: 'filter.php',
   data: {
      experience: exp,
      location: loc,
      category: cat
   }, 
   beforeSend: function() {
      //code to be executed while script is executing.
      $('#your_img_loader').fadeIn(500);
   },
   success: function(result) {
      //done executing hide loader
      $('#your_img_loader').hide();

      /* OTHER CODE */
   }
}); 
```

请注意，如果您想在 URL 旁边传递 GET 参数，您也可以这样做：

```
url: 'filter.php?experience='+exp+'&location='+loc+'&category='+cat 
```

并删除`data: {}`部分

# python - 通过 parse 命令使用爬虫时如何在 Scrapy 中使用管道

> ID：15667111
> 
> 赞同：1
> 
> 时间：2013-03-27T18:54:21.600
> 
> 标签：python, scrapy

```
scrapy parse --spider=$spider -c parse_thread -d 100 --nolog $url 
```

有没有办法为使用 parse 命令处理的项目启用管道？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T22:15:34.123

如果您使用该[`crawl`](http://doc.scrapy.org/en/latest/topics/commands.html#crawl)命令，它将使用您的设置中指定的管道，并且您可以将 url 添加到[`start_urls`](https://scrapy.readthedocs.org/en/latest/topics/spiders.html#scrapy.spider.BaseSpider.start_urls)属性中，或者，如果您想获取这些 url 以回调特定函数，您可以[`start_requests`](https://scrapy.readthedocs.org/en/latest/topics/spiders.html#scrapy.spider.BaseSpider.start_requests)在那里手动覆盖并发出您的请求：

```
def start_requests(self):
    yield Request(url1, callback=self.my_callback)
    yield Request(url2, callback=self.my_callback) 
```

# jquery - JQuery Mobile - 选择标签内未正确显示的元素

> ID：15667112
> 
> 赞同：3
> 
> 时间：2013-03-27T18:54:23.923
> 
> 标签：jquery, html, css, jquery-mobile

我希望在单选按钮标签中有一个下拉菜单，它似乎可以工作，但是它切断了它的底部。我在文本框方面遇到了类似的问题，但是我通过使位置相对来解决了这个问题。

```
input.inline
{
   position:relative !important;
   display:inline;
}

<div id="confirmBooking" data-role="page" class="ui-page">
    <div data-role="header" data-theme="b">
        <h1>Welcome</h1>
    </div>
<div data-role="content">
       <h3>Choose:</h3>
       <fieldset data-role="controlgroup">
          <input checked="checked" type="radio" name="item-choice" id="existing-item"/>
           <label for="existing-item">An Existing Item
           <select class="mySelect">
             <option>Option 1</option>
           </select>
          </label>
  <input type="radio" name="item-choice" id="new-item"/>
  <label for="new-item">New Item 
      <input class="inline" placeholder="Item Name"/>
      <input class="inline" placeholder="Item Description"/>      
  </label>
</fieldset>
<div align="right">     
 <a data-icon="arrow-r" data-iconpos="right" href="#" id="submit" data-theme="b" data-role="button" data-inline="true">Make Booking</a> 
</div>
</div> 
</div> 
```

我在[这里](http://jsfiddle.net/MehU5/)添加了一个 jsfiddle 。希望这可以更清楚地说明问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-27T19:13:25.180

因为您这样做了：http: [//jsfiddle.net/MehU5/3/](http://jsfiddle.net/MehU5/3/)而不是使用复选框，而是使用具有不同的单独可折叠表单

```
 <!-- Home -->
<div data-role="page" id="page1">
    <div data-role="content">
        <div data-role="collapsible-set">
            <div data-role="collapsible" data-collapsed="false">
                <h3>
                    An existing item
                </h3>
                <div data-role="fieldcontain">
                    <label for="selectmenu1">
                    </label>
                    <select name="">
                        <option value="option1">
                            Option 1
                        </option>
                    </select>
                </div>
                <input value="Make booking" type="submit">
            </div>
            <div data-role="collapsible">
                <h3>
                    New item
                </h3>
                <div data-role="fieldcontain">
                    <fieldset data-role="controlgroup">
                        <label for="textinput1">
                        </label>
                        <input name="" id="textinput1" placeholder="Item name" value="Item name"
                        type="text">
                    </fieldset>
                </div>
                <div data-role="fieldcontain">
                    <fieldset data-role="controlgroup">
                        <label for="textinput2">
                        </label>
                        <input name="" id="textinput2" placeholder="Item description" value=""
                        type="text">
                    </fieldset>
                </div>
                <input value="Make booking" type="submit">
            </div>
        </div>
    </div>
</div> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-27T19:30:14.923

是的，我在您的代码中看到的唯一问题是您将标签包装在 and 语句周围，正确的方法是：

```
 <div data-role="content">
       <form method="get" action="">
         <fieldset data-role="fieldcontain">
          <label for="select1">Basic Select Menu: </label>
            <select name="select" id="select1">
                 <option value="1">Value 1 </option>
                 <option value="1">Value 1 </option>
           </select>
          </fieldset>
       </form>
      </div> 
```

# c# - C#：方法被连续调用两次

> ID：15667117
> 
> 赞同：2
> 
> 时间：2013-03-27T18:54:39.737
> 
> 标签：c#, multithreading, user-interface, backgroundworker

这是我的代码。

```
BackgroundWorker exportWorker = new BackgroundWorker();

private void btnOK_Click(object sender, RoutedEventArgs e)
{
    exportWorker.DoWork += new DoWorkEventHandler(ExportWorkerDoWork);
    exportWorker.RunWorkerCompleted += new RunWorkerCompletedEventHandler(ExportWorkerRunWorkerCompleted);
    exportWorker.RunWorkerAsync();
}

void ExportWorkerDoWork(object sender, DoWorkEventArgs e)
{
    MethodToPerformInThisThread();
    **Dispatcher.Invoke(new Action(() => {MethodofAnotherThreadThatChangesUIStuff();}**
}

void ExportWorkerRunWorkerCompleted(object sender, RunWorkerCompletedEventArgs e)
{
} 
```

*   当我第一次单击 OK 按钮 ( `btnOK_Click`) 时，它会继续运行一切正常。
*   现在，如果我在代码执行完成后第二次单击“确定”按钮，粗体中的代码会运行两次，这意味着该方法`MethodofAnotherThreadThatChangesUIStuff();`会连续调用两次。
*   同样，如果我第三次单击“确定”按钮， `MethodofAnotherThreadThatChangesUIStuff();`则会连续调用 3 次。
*   等等。

我希望`MethodofAnotherThreadThatChangesUIStuff();`只调用一次，无论它是哪个点击。我的意思是，一般来说事情应该是这样的。

我在这里想念什么？

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-27T18:57:24.217

由于您每次按下按钮时都声明背景在 Click 处理程序之外工作，因此您再次添加事件处理程序。这就是为什么您的方法第二次被调用两次而第三次将被调用三次的原因......

要解决这个问题，请在 click 方法之外添加事件处理程序（例如在构造函数中），并且只在 click 方法中保留 RunAsync() 调用。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-27T19:00:11.587

每次单击“确定”时，您都在创建新的事件处理程序，它们都将调用您的 DoWork 方法。

将此代码放在应用程序的初始化中：

```
exportWorker.DoWork += new DoWorkEventHandler(ExportWorkerDoWork);
exportWorker.RunWorkerCompleted += new RunWorkerCompletedEventHandler(ExportWorkerRunWorkerCompleted); 
```

`btnOK_Click`在您的方法中仅包含以下内容：

```
exportWorker.RunWorkerAsync(); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-27T19:01:41.610

这是因为这条线引起的：

```
exportWorker.DoWork += new DoWorkEventHandler(ExportWorkerDoWork); 
```

正在`btnOK_Click`处理程序内部运行。如果您像这样在处理程序之外设置事件：

```
BackgroundWorker exportWorker = new BackgroundWorker();
exportWorker.DoWork += new DoWorkEventHandler(ExportWorkerDoWork);
exportWorker.RunWorkerCompleted += new RunWorkerCompletedEventHandler(ExportWorkerRunWorkerCompleted);

private void btnOK_Click(object sender, RoutedEventArgs e)
{
exportWorker.RunWorkerAsync();
} 
```

那么一切都应该像你期望的那样工作。

另一种选择实际上是`BackgroundWorker`在`btnOK_Click`处理程序中创建一个新的。本质上，您将为每次点击创建一个新的工作人员，使用处理程序对其进行设置，然后运行它。然后，您将丢弃它并为每次点击创建一个新的。

# javascript - mvc 下拉列表选择的项目无法重新选择

> ID：15667118
> 
> 赞同：0
> 
> 时间：2013-03-27T18:54:43.770
> 
> 标签：javascript, asp.net-mvc, drop-down-menu

在一个视图（UserPicture.aspx）中，我有一个用户下拉列表、一张图片、一个文件上传和一个提交按钮。当我更改所选用户时，我想将显示的图像更改为相应的个人资料图片。在我使用文件上传和提交按钮为用户修改图像之前，一切正常。之后，如果我尝试重新选择更改的用户，**javascript 函数不会再将 $.get(...) 触发到控制器**。所有未更改的用户仍然会触发 $get()...

我怎样才能解决这个问题？

谢谢。

* * *

我的查看项目：

```
<%= Html.DropDownList("cbUsers", (IEnumerable<SelectListItem>)@ViewBag.cbUsers, new Dictionary<string, object> { { "onChange", "swapImage()" } })%>

<input type="file" name="myImage" id="myImage"/>

<div id="ProfilePicture">
    <img alt="Profile picture" src="../../images/img_profile.png" />
</div>

<button type="submit"><asp:Label runat="server" Text="Update" /></button> 
```

我如何获得图像路径：

```
function swapImage() {
    var e = document.getElementById("cbUsers");
    var strUser = e.options[e.selectedIndex].value;
    $.get("/Admin/GetUserProfilePath",
    { val1: strUser },
    function (data) {
        document.getElementById("ProfilePicture").innerHTML = "<img src='" + data + "' alt='Profile picture' class='searchPicture'/>";
    });
}; 
```

在控制器中使用此函数返回图像路径：

```
 public ActionResult GetUserProfilePath(string val1) 
```

提交按钮触发：

```
[AcceptVerbs(HttpVerbs.Post)]
public ActionResult UserPicture(object cbUsers, HttpPostedFileBase myImage)
{
    HandleUploadedFile(cbUsers, myImage);
    ViewBag.cbUsers = new IEnumerable<SelectListItem>();//Get the users list
    return View();
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T21:01:31.063

可能是缓存问题。尝试将此属性添加到您的 GetUserProfilePath() 操作：

```
[OutputCache(NoStore = true, Duration = 0, VaryByParam = "*")] 
```

或更改`.get()`为`.ajax({ type: 'get' })``cache:false`

# ios - 如何在目标 C/iOS 中的客户端上创建虚拟 JSON 数据？

> ID：15667121
> 
> 赞同：11
> 
> 时间：2013-03-27T18:54:46.817
> 
> 标签：ios, objective-c, json, nsdictionary, foundation

我想以 JSON 格式设置静态虚拟数据，供我的应用程序处理。这纯粹是客户端；我不想从网络中检索任何东西。

到目前为止，我看到的所有问题和答案都有 NSData* 变量存储从网络调用中检索到的内容，并且 [JSONSerialization JSONObjectWithData: ...] 通常作用于非手动创建的数据。

这是我在 xcode 中尝试过的示例。

```
NSString* jsonData = @" \"things\": [{ \
\"id\": \"someIdentifier12345\", \
\"name\": \"Danny\" \
\"questions\": [ \
    { \
        \"id\": \"questionId1\", \
        \"name\": \"Creating dummy JSON data by hand.\" \
    }, \
    { \
        \"id\": \"questionId2\", \
        \"name\": \"Why no workie?\"
    } \
    ], \
\"websiteWithCoolPeople\": \"http://stackoverflow.com\", \
}]}";

NSError *error;
NSDictionary *parsedJsonData = [NSJSONSerialization JSONObjectWithData:jsonData options:kNilOptions error:&error]; 
```

尝试创建 JSON 数据变量或尝试解析它时，类似的尝试（并尝试更改内容，例如将 NSString* 转换为 NSData* 从该 JSON 字符串）产生了 null parsedJsonData 数据或异常。

**如何在我自己的代码中创建虚拟 JSON 数据，以便可以通过解析 JSON 数据的普通 Foundation 类对其进行解析？**

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-03-27T20:43:14.017

我会将我的测试 json 保存为应用程序中的单独文件。这样做的好处是您可以从 Web 服务中复制和粘贴响应并轻松阅读它们，而无需将它们转换为 NSDictionaries 或转义字符串。

我已正确格式化您的 JSON（使用[jsonlint](http://jsonlint.com/)`testData.json` ）并将其保存到应用程序包中命名的文件中。

```
{"things":
    [{
     "id": "someIdentifier12345",
     "name": "Danny",
     "questions": [
                   {
                   "id": "questionId1",
                   "name": "Creating dummy JSON data by hand."
                   },
                   {
                   "id": "questionId2",
                   "name": "Why no workie?"
                   } 
                   ], 
     "websiteWithCoolPeople": "http://stackoverflow.com" 
     }]
} 
```

然后为了在你的应用程序中解析这个文件，你可以简单地从包目录中加载文件。

```
NSString *filePath = [[NSBundle mainBundle] pathForResource:@"testdata" ofType:@"json"];
NSData *jsonData = [[NSData alloc] initWithContentsOfFile:filePath];

NSError *error = nil;
NSDictionary *jsonDict = [NSJSONSerialization JSONObjectWithData:jsonData options:0 error:&error];

NSLog(@"%@", jsonDict); 
```

现在可以很容易地扩展它来加载任意数量的响应，并且基本上有一个本地 Web 服务。然后，调整它以加载来自远程服务器的响应不会有更多的工作。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-27T20:04:30.963

试试这样的！

```
NSDictionary *jsonObject = @{@"id": @"someIdentifier",
                             @"name":@"Danny",
                             @"questions":@[
                                            @{@"id":@"questionId1",
                                              @"name":@"Creating dummy JSON"},
                                            @{@"id":@"questionId2",
                                              @"name":@"Creating dummy JSON"},
                                            @{@"id":@"questionId3",
                                              @"name":@"Creating dummy JSON"}],
                             @"websiteCoolPeople":@"http://stackoverflow.com"};

NSLog(@" JSON = %@",jsonObject); // let's see if is correct

NSData *jsonData = [NSJSONSerialization dataWithJSONObject:jsonObject options:NSJSONWritingPrettyPrinted error:nil];

NSLog(@" JSON DATA \n  %@",[NSString stringWithCString:[jsonData bytes] encoding:NSUTF8StringEncoding]);

//lets make a check

if ([NSJSONSerialization isValidJSONObject:jsonObject] == YES) {

    NSLog(@" ;) \n");
}
else{

    NSLog(@"Epic Fail! \n");

}

//Going back

NSDictionary *parsedJSONObject = [NSJSONSerialization JSONObjectWithData:jsonData options:kNilOptions error:nil];

NSLog(@"Cool! :  %@",parsedJSONObject); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-27T20:14:32.470

首先

```
-(void)createJsonData
{
    //your objects for json
    NSArray * objects=@[@"object1",@"object2",@"object3",@"object4"];
    //your keys for json
    NSArray * keys=@[@"key1",@"key2",@"key3",@"key4"];

    //create dictionary to convert json object
    NSDictionary * jsonData=[[NSMutableDictionary alloc] initWithObjects:objects forKeys:keys];

    //convert dictionary to json data
    NSData * json =[NSJSONSerialization dataWithJSONObject:jsonData options:NSJSONWritingPrettyPrinted error:nil];

    //convert json data to string for showing if you create it truely
    NSString * jsonString=[[NSString alloc] initWithData:json encoding:NSUTF8StringEncoding];

    NSLog(@"%@",jsonString);
} 
```

这将创建一个 jsonData。另一个事实是，要创建数据，您应该使用 dataWithJSONObject。并且此方法接受 NSDictionary 或 NSArray。NSString 不是此方法的有效类。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-27T19:25:02.987

答案是创建正确格式的 JSON。如果您在手动创建 JSON 时格式不正确，那么您只会从序列化中获取一揽子“null”值。以下是让我发疯的事情，因为在@bgoers 提到其中一个之前，它们都是小因素。

*   确保您包含正确的大括号 ([{}]) 并适当地关闭它们。这实际上不是一个小因素，但是如果您将数据基于文档（就像我一样），那么您可能会错过复制/粘贴其中一个花括号的机会。
*   在复制/粘贴 JSON 数据的外观时，请确保使用的所有字符（尤其是“引号”标记）都是统一的。事实证明，我使用了花哨的开始和结束引号，它们被编码到文档中，而不仅仅是你在 xcode 中键入的 "。

一旦你有了有效的 JSON，Foundation 类应该可以正常工作。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-27T19:47:24.823

```
#import "SBJSON.h"

NSDictionary *dictionary = [[NSDictionary alloc] initWithObjects:[NSArray arrayWithObjects:
                                                                      @"2013-03-27",
                                                                      @"2013-04-04",
                                                                      @"2013-03-27",
                                                                      @"0",
                                                                      @"1",
                                                                      @"1",nil]
                                                             forKeys:[NSArray arrayWithObjects:
                                                                      @"startDate",
                                                                      @"endDate",
                                                                      @"selectedDate",
                                                                      @"shadowsOfID",
                                                                      @"appointmentsOfID",
                                                                      @"shadowType",nil]];

   SBJsonWriter *p = [[SBJsonWriter alloc] init];
        NSString *jsonStr = [NSString stringWithFormat:@"%@",[p stringWithObject:dictionary]]; 
```

jsonStr 现在包含以下内容：

```
"{\"shadowType\":\"1\",\"startDate\":\"2013-03-27\",\"selectedDate\":\"2013-03-27\",\"endDate\":\"2013-04-04\",\"shadowsOfID\":\"0\",\"appointmentsOfID\":\"1\"}"; 
```

注意：Dictionary可以是项目中的plist文件。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-09-27T16:19:30.970

转到此链接以获取在线 JSON 到 NSDictionary/NSArray 转换器：

[https://erkanyildiz.me/lab/jsonhardcode/](https://erkanyildiz.me/lab/jsonhardcode/)

使用格式正确的 json 作为输入，然后将结果作为文字复制并粘贴到代码中`NSDictionary *myDict = @{...};`

# java - 从 Zip 文件中的文件中读取内容

> ID：15667125
> 
> 赞同：84
> 
> 时间：2013-03-27T18:54:51.740
> 
> 标签：java, zip, extract, apache-tika

我正在尝试创建一个简单的 java 程序，它从 zip 文件中的文件中读取和提取内容。Zip 文件包含 3 个文件（txt、pdf、docx）。我需要阅读所有这些文件的内容，为此我正在使用**Apache Tika 。**

有人可以在这里帮助我实现该功能。到目前为止我已经尝试过了，但没有成功

**代码片段**

```
public class SampleZipExtract {

    public static void main(String[] args) {

        List<String> tempString = new ArrayList<String>();
        StringBuffer sbf = new StringBuffer();

        File file = new File("C:\\Users\\xxx\\Desktop\\abc.zip");
        InputStream input;
        try {

          input = new FileInputStream(file);
          ZipInputStream zip = new ZipInputStream(input);
          ZipEntry entry = zip.getNextEntry();

          BodyContentHandler textHandler = new BodyContentHandler();
          Metadata metadata = new Metadata();

          Parser parser = new AutoDetectParser();

          while (entry!= null){

                if(entry.getName().endsWith(".txt") || 
                           entry.getName().endsWith(".pdf")||
                           entry.getName().endsWith(".docx")){
              System.out.println("entry=" + entry.getName() + " " + entry.getSize());
                     parser.parse(input, textHandler, metadata, new ParseContext());
                     tempString.add(textHandler.toString());
                }
           }
           zip.close();
           input.close();

           for (String text : tempString) {
           System.out.println("Apache Tika - Converted input string : " + text);
           sbf.append(text);
           System.out.println("Final text from all the three files " + sbf.toString());
        } catch (FileNotFoundException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (SAXException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (TikaException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：205
> 
> 时间：2013-03-27T19:05:25.660

如果您想知道如何从每个文件中获取文件内容，`ZipEntry`这实际上非常简单。这是一个示例代码：

```
public static void main(String[] args) throws IOException {
    ZipFile zipFile = new ZipFile("C:/test.zip");

    Enumeration<? extends ZipEntry> entries = zipFile.entries();

    while(entries.hasMoreElements()){
        ZipEntry entry = entries.nextElement();
        InputStream stream = zipFile.getInputStream(entry);
    }
} 
```

拥有 InputStream 后，您可以随心所欲地阅读它。

* * *

## 回答 #2

> 赞同：52
> 
> 时间：2016-05-24T12:25:57.540

从 Java 7 开始，NIO Api 提供了一种更好、更通用的方式来访问 Zip 或 Jar 文件的内容。实际上，它现在是一个统一的 API，允许您将 Zip 文件与普通文件一样对待。

为了提取此 API 中 zip 文件中包含的所有文件，您可以执行以下操作：

**在 Java 8 中：**

```
private void extractAll(URI fromZip, Path toDirectory) throws IOException{
    FileSystems.newFileSystem(fromZip, Collections.emptyMap())
            .getRootDirectories()
            .forEach(root -> {
                // in a full implementation, you'd have to
                // handle directories 
                Files.walk(root).forEach(path -> Files.copy(path, toDirectory));
            });
} 
```

**在 Java 7 中：**

```
private void extractAll(URI fromZip, Path toDirectory) throws IOException{
    FileSystem zipFs = FileSystems.newFileSystem(fromZip, Collections.emptyMap());

    for(Path root : zipFs.getRootDirectories()) {
        Files.walkFileTree(root, new SimpleFileVisitor<Path>() {
            @Override
            public FileVisitResult visitFile(Path file, BasicFileAttributes attrs) 
                    throws IOException {
                // You can do anything you want with the path here
                Files.copy(file, toDirectory);
                return FileVisitResult.CONTINUE;
            }

            @Override
            public FileVisitResult preVisitDirectory(Path dir, BasicFileAttributes attrs) 
                    throws IOException {
                // In a full implementation, you'd need to create each 
                // sub-directory of the destination directory before 
                // copying files into it
                return super.preVisitDirectory(dir, attrs);
            }
        });
    }
} 
```

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2013-03-27T19:00:02.077

由于 中的条件`while`，循环可能永远不会中断：

```
while (entry != null) {
  // If entry never becomes null here, loop will never break.
} 
```

而不是`null`那里的检查，你可以试试这个：

```
ZipEntry entry = null;
while ((entry = zip.getNextEntry()) != null) {
  // Rest of your code
} 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-12-24T22:38:57.187

您可以使用示例代码让 Tika 为您处理容器文件。 [http://wiki.apache.org/tika/RecursiveMetadata](http://wiki.apache.org/tika/RecursiveMetadata)

据我所知，接受的解决方案不适用于嵌套 zip 文件的情况。然而，Tika 也会处理这种情况。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2016-02-19T16:46:07.437

我实现这一点的方法是创建 ZipInputStream 包装类，该类将处理仅提供当前条目的流：

包装类：

```
public class ZippedFileInputStream extends InputStream {

    private ZipInputStream is;

    public ZippedFileInputStream(ZipInputStream is){
        this.is = is;
    }

    @Override
    public int read() throws IOException {
        return is.read();
    }

    @Override
    public void close() throws IOException {
        is.closeEntry();
    } 
```

}

它的用途：

```
 ZipInputStream zipInputStream = new ZipInputStream(new FileInputStream("SomeFile.zip"));

    while((entry = zipInputStream.getNextEntry())!= null) {

     ZippedFileInputStream archivedFileInputStream = new ZippedFileInputStream(zipInputStream);

     //... perform whatever logic you want here with ZippedFileInputStream 

     // note that this will only close the current entry stream and not the ZipInputStream
     archivedFileInputStream.close();

    }
    zipInputStream.close(); 
```

这种方法的一个优点是：InputStreams 作为参数传递给处理它们的方法，并且这些方法倾向于在处理完输入流后立即关闭它。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-04-06T18:37:04.157

我这样做了，记得更改 url 或 zip 文件 jdk 15

```
import java.io.FileNotFoundException;
import java.io.FileOutputStream;
import java.io.IOException;
import java.net.MalformedURLException;
import java.net.URL;
import java.util.Scanner;
import java.util.stream.Stream;
import java.util.zip.ZipEntry;
import java.util.zip.ZipFile;
import java.io.*;
import java.util.*;
import java.nio.file.Paths;

class Main {
  public static void main(String[] args) throws MalformedURLException,FileNotFoundException,IOException{
    String url,kfile;
    Scanner getkw = new Scanner(System.in);
    System.out.println(" Please Paste Url ::");
    url = getkw.nextLine();
    System.out.println("Please enter name of file you want to save as :: ");
    kfile = getkw.nextLine();
    getkw.close();
    Main Dinit = new Main();
    System.out.println(Dinit.dloader(url, kfile));
    ZipFile Vanilla = new ZipFile(new File("Vanilla.zip"));
    Enumeration<? extends ZipEntry> entries = Vanilla.entries();

    while(entries.hasMoreElements()){
        ZipEntry entry = entries.nextElement();
//        String nextr =  entries.nextElement();
        InputStream stream = Vanilla.getInputStream(entry);
        FileInputStream inpure= new FileInputStream("Vanilla.zip");
        FileOutputStream outter = new FileOutputStream(new File(entry.toString()));
        outter.write(inpure.readAllBytes());
        outter.close();
    }

  }
  private String dloader(String kurl, String fname)throws IOException{
    String status ="";
    try {
      URL url = new URL("URL here");
      FileOutputStream out = new FileOutputStream(new File("Vanilla.zip"));         // Output File
      out.write(url.openStream().readAllBytes());
      out.close();
    } catch (MalformedURLException e) {
      status = "Status: MalformedURLException Occured";
    }catch (IOException e) {
      status = "Status: IOexception Occured";
    }finally{
      status = "Status: Good";}
    String path="\\tkwgter5834\\";
    extractor(fname,"tkwgter5834",path);

    return status;
  }
  private String extractor(String fname,String dir,String path){
    File folder = new File(dir);
    if(!folder.exists()){
      folder.mkdir();
    }
    return "";
  }
} 
```

# javascript - 任何滑块 FX 问题

> ID：15667128
> 
> 赞同：1
> 
> 时间：2013-03-27T18:55:08.450
> 
> 标签：javascript, jquery, anythingslider

我正在尝试将各种FX与AnythingSlider（在这种情况下特别是左、右和淡入淡出）一起使用并遇到一些问题。将所有幻灯片设置为“淡入淡出”FX，一切似乎都可以正常工作（请参见下面的链接）：

[http://dl.dropbox.com/u/12310886/Work/anythingslider/slide_fade.html](http://dl.dropbox.com/u/12310886/Work/anythingslider/slide_fade.html)

但是，当所有幻灯片都设置为“左”或“右”FX 时，幻灯片在旋转时会不同步（请参阅下面的链接）：

[http://dl.dropbox.com/u/12310886/Work/anythingslider/slide_left.html](http://dl.dropbox.com/u/12310886/Work/anythingslider/slide_left.html) [http://dl.dropbox.com/u/12310886/Work/anythingslider/slide_right.html](http://dl.dropbox.com/u/12310886/Work/anythingslider/slide_right.html)

知道发生了什么吗？

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T21:10:33.723

问题是整个面板都被动画化了。因此，当最后一个或下一个取决于方向的面板移出视图时，它实际上最终会与当前面板重叠。所以你有两个选择：

1.  将面板的内容包装在一个元素中并将其定位为动画。这将起作用的原因是面板本身具有`overflow:hidden`应用到它的属性，因此内容不会与其他面板重叠。

    ```
    <div class="left">
      <div class="content-wrapper"> <!-- add this content wrapper -->
        <div class="caption"></div>
        <img src="../slide1.jpg" alt="" />
      </div>
    </div> 
    ```

2.  添加`.activePage { z-index: 1; }`到您的CSS。这是有效的，因为当前面板将始终位于顶部。此解决方案的主要问题是您会看到其他面板在后台奇怪地移动。

# c# - 从 WP7 WebControl 检索 twitter 验证程序代码

> ID：15667131
> 
> 赞同：1
> 
> 时间：2013-03-27T18:55:19.420
> 
> 标签：c#, html, windows-phone-7, twitter, tweetsharp

我一直在为 windows phone 开发一个相当基本的 twitter 应用程序，并且在登录过程中遇到了一个问题。我正在使用 tweetsharp api，对此我没有任何问题。我一直在关注本教程：http: [//mobile.tutsplus.com/tutorials/windows/wp7-integrating-twitter-with-your-app/](http://mobile.tutsplus.com/tutorials/windows/wp7-integrating-twitter-with-your-app/)

问题是，一旦用户授予我的应用程序权限，我就无法从 WebControl 读取验证程序代码并完成身份验证过程。我不想让用户复制代码并粘贴回我的应用程序，因为这会妨碍用户体验，而且我从未见过手机上的 twitter 应用程序会这样做。我想我已经找到了问题，但我不确定如何解决它L

以下是从验证页面解析 AbsoluteUri 以获取验证者代码的代码：

```
 // From Hammock.Extensions.StringExtensions.cspublic 
    static IDictionary<string, string> ParseQueryString(string query)
    {    
        // [DC]: This method does not URL decode, and cannot handle decoded input    
        if (query.StartsWith("?")) query = query.Substring(1);    
        if (query.Equals(string.Empty))    
        {        
            return new Dictionary<string, string>();    
        }    
        var parts = query.Split(new[] { '&' });    
        return parts.Select(        
            part => part.Split(new[] { '=' })).ToDictionary(            
                pair => pair[0], pair => pair[1] 
            );
    } 
```

这是调用解析方法的代码：

```
 // called everytime navigation occurs in the WebControl
    private void browserNavigated(object sender, System.Windows.Navigation.NavigationEventArgs e)
    {
        MessageBox.Show(e.Uri.AbsoluteUri); // for debugging
        MessageBox.Show(Browser.SaveToString()); // for debugging
        if (e.Uri.AbsoluteUri.Contains("oauth_verifier"))
        {
            var values = ParseQueryString(e.Uri.AbsoluteUri);
            string verifier = values["oauth_verifier"];
            Globals.client.GetAccessToken(Globals.requestToken, verifier, processAccessToken);
            Dispatcher.BeginInvoke(() => { Browser.Visibility = System.Windows.Visibility.Collapsed; });
            MessageBox.Show(verifier); // for debugging
        }
    } 
```

这是验证者页面的 AbsoluteUri：[https ://api.twitter.com/oauth/authorize](https://api.twitter.com/oauth/authorize)

AbsoluteUri 不包含验证码！我相信这是问题所在，因为教程中的代码假定验证程序代码在页面的 AbsoluteUri 中。我查看了页面的 html，希望通过它解析以检索验证器，但不幸的是 twitter 隐藏了它。有没有人有任何建议或解决方法来解决这个问题？如果我绝对需要，我可以申请 xauth 访问权限，但我将其保存为最后的手段。如果有人想查看 html 代码，请询问，我可以尝试发布。非常感谢任何帮助！

谢谢， 挤压

# rdf - DBpedia SPARQL 搜索类似于 DBpedia 查找工具

> ID：15667133
> 
> 赞同：3
> 
> 时间：2013-03-27T18:55:25.617
> 
> 标签：rdf, sparql, dbpedia

DBpedia 提供了一个查找工具，如[http://lookup.dbpedia.org/api/search.asmx/KeywordSearch?QueryString=panda](http://lookup.dbpedia.org/api/search.asmx/KeywordSearch?QueryString=panda)，它返回一个结果集。使用SPARQL查询DBpedia能否得到相同的结果集

# sql - 在db2 sql中将视图中的异常字符插入到表中

> ID：15667135
> 
> 赞同：0
> 
> 时间：2013-03-27T18:55:28.773
> 
> 标签：sql, view, casting, db2, type-conversion

我正在使用 DB2 i5/OS 版本。我`salesview`准备好了，看起来像这样：

```
 ORGNNAME                            SHIPTONO     ITEMNO

    Landoll Corporation                 00000001     EJ8-4001A       
    MCFA - Brittmoore Warehouse         ¿·11115R     114-04-4003 
```

列定义为：

```
ORGNNAME CHAR(35) CCSID 65535   DEFAULT '' ,    
SHIPTO CHAR(8) CCSID 65535   DEFAULT '' 
ITEMNO CHAR(15) CCSID 65535   DEFAULT '' 
```

**我想无条件地在表格中插入这些值，包括我无法插入的向上问号。有人可以帮我解决这个问题吗**

我有另一个具有类似列的表，可以说表中的 2 列是`ORGNNAME`& `SHIPTONO`。我想`insert into table`从`view`. 我使用的代码类似于：

```
INSERT INTO ADCLIBT.TEMP11
(
SHIPTO,
SHIPMNTNO,
itnbr
)
 SELECT     
 cast(SHIPTONO as varchar(20)),
 SHIPNUMBER,
 ITEMNO
 FROM AMFLIB7.salesview WHERE SHIPDATE=1130204 AND ITEMNO LIKE ('1SD.055.%') 
```

我试过这样做，但给了我一个错误：

```
QL State: 22018
Vendor Code: -420
Message: [SQL0420] Character in CAST argument not valid 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-28T05:10:08.827

根据消息 SQL0420 给出的“恢复”，您需要将结果数据类型更改为`CAST`可以接受该值的类型。一个直接的例子可能是：

```
CAST( SHIPTONO AS VARCHAR (20) CCSID 65535 ) 
```

将 CCSID 65535 用于字符数据可能（或现在）是一个非常糟糕的主意。它使数据非常不可移植，并且随着未来事物的变化（例如，当定义发生变化或必须与其他平台（例如 PC）交换数据时）带来持续的问题。根据定义，它是没有编码且不会转换为其他编码（例如 EBCDIC<->ASCII）的二进制数据。默认转换通常是可能的，但它们必须应用于平台之间的每个单独的连接。如果不应用，可能（将）发生不可预测的数据结果。

# git - git 将未提交的更改从主分支移动到新分支

> ID：15667143
> 
> 赞同：1
> 
> 时间：2013-03-27T18:55:40.133
> 
> 标签：git, github

stackoverflow中有类似问题的解决方案。但我想确保我的问题属于同一类别：我做了一个`git checkout master`

我做了一些更改（未提交），并意识到应该通过创建新分支而不是 master 来进行更改。

是否有命令可以将更改移动到新分支并将本地分支中的 master 恢复到我进行这些更改之前的状态？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-27T19:01:07.233

由于您没有向 master 提交任何内容，因此没有什么可以“还原”。Juste 创建一个新分支`git checkout -b new_branch`并提交您的更改。

# javascript - 如何将变量保存在hta中，以便在关闭和打开hta后，它会被保存？

> ID：15667145
> 
> 赞同：0
> 
> 时间：2013-03-27T18:55:44.630
> 
> 标签：javascript, html, variables, hta

我正在尝试制作一个 hta（html 应用程序），您可以在其中将名称添加到数组中，然后找出某个名称是否在数组中。当我关闭并重新打开 hta（或刷新 html）时，没有保存任何名称。我如何做到这一点，以便当我运行添加名称的函数时，代码与其中包含名称的变量一起保存。

这是添加名称的功能

```
 var names = []
    function addName(first, last){
    names.push(first + " " + last)
}

function realAddName(eventObject){
    var addFirstName = document.getElementById("addFirstName")//the input box for the first name
    var addLastName = document.getElementById("addLastName")//the input box for the last name
    addName(addFirstName.value, addLastName.value)
    alert("The name you input is now added to the thing.")
} 
```

我没有 jQuery，所以不要给我使用 jQuery 的答案。

请帮我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T19:05:42.220

这就是javascript的工作方式。当浏览器关闭时，您添加到数组中的任何值都不会保存。这就是数据库的作用。jQuery 也无法做到这一点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T19:29:15.653

本地存储可能会对您有所帮助。例如：

```
function addName(first, last) {
    localStorage.setItem("usr123", first + " " + last)
} 
```

您可以添加、更改或删除本地存储中的数据。但它是有限的。您可以在此处了解有关 localStorage 的更多信息：[HTML5 Web Storage](http://www.w3schools.com/html/html5_webstorage.asp)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-27T19:08:34.620

您需要将应用程序的状态保存到磁盘。因为这是一个 HTA，这意味着您可以使用它`Scripting.FileSystemObject`与本地文件系统进行交互。

```
var fs = new ActiveXObject("Scripting.FileSystemObject");
var textFile = fs.CreateTextFile("foo.txt");
textFile.WriteLine(someVariable);
textFile.Close(); 
```

*   `fs`是一个对象，可让您访问本地文件系统：`FileSystemObject`
*   `FileSystemObject`有一个名为的方法`CreateTextFile`，它在磁盘上创建一个新的文本文件，并为您提供一个对象 ( `textFile`)，您可以使用该对象将文本写入该文件。
*   `WriteLine`将一些文本写入文件 `.Close()`会导致文本文件被安全地“保存”。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-05-17T12:57:45.927

用户2216996

如果您真的需要询问，那么您不需要数据库来处理您正在做的事情。试试“嘿，脚本专家！” [http://blogs.technet.com/b/heyscriptingguy/archive/2007/11/09/hey-scripting-guy-how-can-i-save-information-in-an-hta-as-a-](http://blogs.technet.com/b/heyscriptingguy/archive/2007/11/09/hey-scripting-guy-how-can-i-save-information-in-an-hta-as-a-tab-separated-values-file.aspx)的解决方案[制表符分隔值文件.aspx](http://blogs.technet.com/b/heyscriptingguy/archive/2007/11/09/hey-scripting-guy-how-can-i-save-information-in-an-hta-as-a-tab-separated-values-file.aspx)

如果您真的想了解数据库，那么我建议您访问[http://en.wikipedia.org/wiki/Database](http://en.wikipedia.org/wiki/Database)并开始阅读。

# ruby - 参数很少或为零的 Ruby 方法 - 怎么做？

> ID：15667146
> 
> 赞同：0
> 
> 时间：2013-03-27T18:55:46.483
> 
> 标签：ruby, methods, arguments, reverse

我在 Ruby 中有两种方法：

```
def reverse(first,second)
   @items[first..second]=@items[first..second].reverse 
end 
```

和：

```
def reverse
  @items.reverse! 
end 
```

我可以将这些组合成一个函数并使用一个`if first.nil? && second.nil?`条件，还是保持原样更好？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-27T19:00:47.520

第一个选项是使用默认值参数：

```
def reverse(first = nil, second = nil)
  if first && second
    @items[first..second]=@items[first..second].reverse
  else
    @items.reverse! 
  end
end 
```

第二个选项是使用可变数量的参数：

```
def reverse(*args)
  if args.length == 2
    @items[args.first..args.last]=@items[args.first..args.last].reverse
  else
    @items.reverse! 
  end
end 
```

# java - 在 Eclipse 中使用 Play 框架 2.1.x 中的多个项目

> ID：15667148
> 
> 赞同：11
> 
> 时间：2013-03-27T18:55:53.137
> 
> 标签：java, eclipse, playframework, playframework-2.0, sbt

我在 Eclipse 中有一个现有项目（我们称之为“NotPlayProj”），其中有很多仍在开发中的 Java 代码。我使用 play 2.1.0 制作了一个新的 eclipse 项目（我们称之为“PlayProj”）。我的目标是在 PlayProj 中使用 NotPlayProj 中的代码，并让 Eclipse 和 Play 编译器都注意到任一项目中的更改。

如果我进入 PlayProj 的属性并通过 Project 选项卡添加 NotPlayProj，则方法完成和包含在 eclipse 中工作，但 Play compile 看不到结果。我查看了 Play 模块，但这些模块似乎没有做我想要的。

有没有办法做到这一点，理想情况下不修改 NotPlayProj？

编辑---我查看了[http://www.playframework.com/documentation/2.0/SBTDependencies](http://www.playframework.com/documentation/2.0/SBTDependencies)，它显示了如何将 jar 从 NotPlayProj 导出到 PlayProj/lib 目录，但这需要每次手动导出 NotPlayProject变化。我怀疑托管依赖部分应该涵盖这一点，但我以前从未使用过 SBT，因此可能缺少一些基本的东西。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T19:17:48.157

你需要的是持续集成。

看看 Jenkins： http: [//jenkins-ci.org/](http://jenkins-ci.org/) 您应该设置一个持续集成服务器并自定义您需要的构建。

示例：您`PlayProj`在某个服务器上运行，它需要能够使用来自另一个名为`NoPlayProj`.

重建是必须的，诸如停机时间为零之类的事情很难实现（至少我认为这也不是您所要求的）。您需要使用 Jenkins 实现自动化的步骤是：

1 - 构建和部署`NoPlayProj`位于某个存储库中的最新版本

2 - 构建和部署`PlayProj`位于某个存储库中的最新版本，并且还包含您的最后一次提交，您在其中更新了存在的依赖项`NoPlayProj`

可以在 Jenkins 中配置一个不太复杂的构建和部署指令。这应该会加快你的速度。如果可能的话，另一个建议是对两个项目进行 mavenize，这将帮助您更轻松地管理依赖项。

只是为了澄清一件事，你说：`My goal is to use code from NotPlayProj in PlayProj and have both Eclipse and the Play compiler notice changes in either project.`

只要您在提交代码之前更新依赖项，那么执行构建的顺序将取决于您想要做什么。

最后一件事，如果您不想部署，则不必这样做，您可以创建 Jenkins 作业，以您只构建的方式。使用 Jenkins，你可以做很多事情，你也可以执行一些你自己的帮助脚本，这些脚本可以为你提供额外的功能。

我希望这很有用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T19:25:15.530

要让 Eclipse 在使用 PlayProj 时看到 NotPlayProj 的变化，只需更改 PlayProj 的配置即可。属性-> Java 构建路径-> 项目-> 添加 NotPlayProj 作为依赖项。

没有直接的方法可以让 Play 编译器处理依赖项，除非您将其打包为 jar。考虑配置简单的 ant 任务（外部工具配置 -> Ant build），它将复制您的 jar 文件。任务可以通过按键或按钮触发。

使用托管依赖项，每次在 NotPlayProj 中进行更改时，都必须手动重建它。让 Ivy/Maven 将依赖项放在本地存储库中。之后，Play 将从您的本地存储库中获取最新快照。

这两种方法都需要一些努力。也许您可以看一下运行 Play 的 Python 脚本，也许在执行 play start 时使用 NotPlayProj 扩展类路径就足够了

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-05T07:43:58.587

虽然我从来没有使用过play框架，但我认为有一种play框架和eclipse都可以理解的格式，那就是Maven。看看[http://www.playframework.com/modules/maven-head/home](http://www.playframework.com/modules/maven-head/home)

# android - IllegalStateException 使用自定义 adatper 和 AlertDialog Android

> ID：15667151
> 
> 赞同：0
> 
> 时间：2013-03-27T18:56:00.377
> 
> 标签：android, android-alertdialog, illegalstateexception

我的活动中有多个 ListView(s)，它们使用相同的 CustomAdapter。在我的 CustomAdapter 中，在每个 ListView 上，我将图像添加到 ListView 的单个项目中。

我只想管理图像单击侦听器（在我的 CustomAdapter 中）并显示自定义 AlertDialog。

但我只想在这个 AlertDialog 上绘制一个 ArrayList 的内容

我找到了第一个解决方案：以编程方式制作一个 LinearLayout 并用我的字典 ArrayList 填充它

编辑：这是 MyAdapter （为了让您理解，我让我的适配器更简单）：

```
class MyAdapter extends ArrayAdapter<Drink> 
    {
            LayoutInflater inflat;
            private ArrayList<Drink> items;
            private String sousCategory;

            public MyAdapter(Context context, ArrayList<Drink> objects) 
            {
                super(context, R.layout.activity_sousboissons_list_item_elementsouscategorie, objects);
                this.items = objects;
                this.inflat = LayoutInflater.from(context);
                this.sousCategory = objects.get(0).getType();
            }
           private class ViewHolder{
                public TextView title;
                public TextView prix;
                public TextView desc;
                public TextView size;
                public ImageView img;
                public LinearLayout ll;
            }

           @Override
           public View getView(int position, View convertView, ViewGroup parent) {
               String currentKey = "";
               ViewHolder holder = null;
               Drink element = items.get(position);

               if (convertView == null) {
                       holder = new ViewHolder();
                       convertView = inflat.inflate(R.layout.activity_sousboissons_list_item_elementsouscategorie, null);
                       holder.title = (TextView) convertView.findViewById(R.id.sousboissons_element_title);
                       holder.desc =  (TextView) convertView.findViewById(R.id.sousboissons_element_desc);
                       holder.prix =  (TextView) convertView.findViewById(R.id.sousboissons_element_prix);
                       holder.size = (TextView) convertView.findViewById(R.id.sousboissons_element_size);

                       if (element.getPrice().size() > 1){
                                  EditText editT = new EditText(SousBoisson.this);
                           final AlertDialog.Builder alert = new AlertDialog.Builder(SousBoissonsActivity.this);
                           alert.setTitle(element.getName());
                   alert.setView(e);
                           holder.img.setOnClickListener(new OnClickListener() {
                            @Override
                            public void onClick(View v) {
                                alert.show();
                            }
                        });
                           holder.ll.addView(holder.img);
                       }else{
                       }
                       convertView.setTag(holder);
               } else {
                       holder = (ViewHolder) convertView.getTag();
               }
               if (element != null) {
                   // Here I'm setting all the Text Value of my Labels
                   }
               }
               return convertView;
           }
    } 
```

它运行良好，但是当我第二次单击它时出现错误：

```
03-27 19:50:11.007: E/AndroidRuntime(5416): java.lang.IllegalStateException: The specified child already has a parent. You must call removeView() on the child's parent first.
03-27 19:50:11.007: E/AndroidRuntime(5416):     at android.view.ViewGroup.addViewInner(ViewGroup.java:3618)
03-27 19:50:11.007: E/AndroidRuntime(5416):     at android.view.ViewGroup.addView(ViewGroup.java:3489)
03-27 19:50:11.007: E/AndroidRuntime(5416):     at android.view.ViewGroup.addView(ViewGroup.java:3465)
03-27 19:50:11.007: E/AndroidRuntime(5416):     at com.android.internal.app.AlertController.setupView(AlertController.java:402)
03-27 19:50:11.007: E/AndroidRuntime(5416):     at com.android.internal.app.AlertController.installContent(AlertController.java:242)
03-27 19:50:11.007: E/AndroidRuntime(5416):     at android.app.AlertDialog.onCreate(AlertDialog.java:336)
03-27 19:50:11.007: E/AndroidRuntime(5416):     at android.app.Dialog.dispatchOnCreate(Dialog.java:351)
03-27 19:50:11.007: E/AndroidRuntime(5416):     at android.app.Dialog.show(Dialog.java:256)
03-27 19:50:11.007: E/AndroidRuntime(5416):     at android.app.AlertDialog$Builder.show(AlertDialog.java:932)
03-27 19:50:11.007: E/AndroidRuntime(5416):     at azur.mobile.incomrestau.SousBoissonsActivity$MyAdapter$1.onClick(SousBoissonsActivity.java:189)
03-27 19:50:11.007: E/AndroidRuntime(5416):     at android.view.View.performClick(View.java:4211)
03-27 19:50:11.007: E/AndroidRuntime(5416):     at android.view.View$PerformClick.run(View.java:17267)
03-27 19:50:11.007: E/AndroidRuntime(5416):     at android.os.Handler.handleCallback(Handler.java:615)
03-27 19:50:11.007: E/AndroidRuntime(5416):     at android.os.Handler.dispatchMessage(Handler.java:92)
03-27 19:50:11.007: E/AndroidRuntime(5416):     at android.os.Looper.loop(Looper.java:137)
03-27 19:50:11.007: E/AndroidRuntime(5416):     at android.app.ActivityThread.main(ActivityThread.java:4898)
03-27 19:50:11.007: E/AndroidRuntime(5416):     at java.lang.reflect.Method.invokeNative(Native Method)
03-27 19:50:11.007: E/AndroidRuntime(5416):     at java.lang.reflect.Method.invoke(Method.java:511)
03-27 19:50:11.007: E/AndroidRuntime(5416):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:1006)
03-27 19:50:11.007: E/AndroidRuntime(5416):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:773)
03-27 19:50:11.007: E/AndroidRuntime(5416):     at dalvik.system.NativeStart.main(Native Method) 
```

我读过这很正常，因为我还是个孩子，所以我不能代替他。

我想用`alert.setAdapter`而不是用，`alert.setView`但我不知道..

编辑：问题不在于我的`holder.ll`..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T23:41:12.983

哦，它可以在我的 img 的 OnClickListener 中使用删除视图！

我刚刚补充说：

```
holder.img.setOnClickListener(new OnClickListener() {
                                @Override
                                public void onClick(View v) {
                                    if(e.getParent() != null)
                                        ((ViewGroup) e.getParent()).removeView(e);
                                    alert.show();
                                }
                            }); 
```

:) 谢谢，希望它将使用自定义自定义布局而不是 editText。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T19:01:34.617

> 它运行良好，但是当我第二次单击它时出现错误：
> 
> ```
> IllegalStateException: The specified child already has a parent. You must call removeView() on the child's parent first. 
> ```

这似乎是问题所在：

```
holder.ll.addView(holder.img); 
```

一个快速的解决方法是检查是否`img`已经有一个父级，如果它确实删除了它：

```
if(holder.img.getParent() != null)
    ((ViewGroup) holder.img.getParent()).removeView(holder.img);
holder.ll.addView(holder.img); 
```

# wpf - WPF：具有联接 DataBinding 和值的表达式

> ID：15667154
> 
> 赞同：0
> 
> 时间：2013-03-27T18:56:18.260
> 
> 标签：wpf, xaml, data-binding

在我得到的自定义 Slider 模板中，主边框的 Height 绑定到**TemplateBinding Height**属性，我希望 Thumb 元素的高度值相对于我之前提到的**TemplateBinding Height属性高 2-3 个像素。**有没有什么优雅的方法可以在不涉及 ValueConverters 和 AttachedProperties 的情况下实现这一目标？就像是

`Height="{TemplateBinding Height} + 3"`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T19:55:38.877

2 个选项：

1）考虑设置控件的边距，其高度绑定为-3。我认为这将满足您对“高 2-3 像素”的描述。如果不是 -3，您可以使用其他边距值。

2）如果 1 不起作用，那么您需要编写一个`IValueConverter`类并将其设置为您的绑定的转换器。不幸的是，TemplateBinding 不支持转换器，因为它们是与控件的前向属性的轻量级连接。

您的绑定将改为：

```
Height="{Binding RelativeSource={RelativeSource TemplatedParent}, Path=Height, Converter={StaticResource ReferenceToMyPlus3Converter}}" 
```

这是一个编写转换器示例的[链接。](http://msdn.microsoft.com/en-us/library/system.windows.data.binding.converter.aspx)

# css - 高度为 100% 的 DIV 正在切断滚动条

> ID：15667156
> 
> 赞同：1
> 
> 时间：2013-03-27T18:56:25.783
> 
> 标签：css, html, height

我在这个论坛上查看了 100% 高度问题的 div，但似乎找不到我遇到的确切问题。基本上我有一个高度为 100% 的 div，并且滚动条的一部分被切断了。我该如何解决？我在下面附上了示例代码。

**HTML：**

```
<body style="height:150px;">
        <div style="height:150px;padding:0px;margin:0px;border:0px" >
          <DIV class="wrapper">
            <TABLE id="title_table" >
              <TR class="titleHeader_row" oncontextmenu="return false;">
                <TH class="coltitleExpand_cell">123
                </TH>
                <TH class="coltitle_cell">123<br/>123
                </TH>
                <TH class="coltitle_cell">123<br/>123<br/>123
                </TH>
                <TH class="coltitle_cell">123<br/>123<br/>123
                </TH>
                <TH class="coltitle_cell">123<br/>123
                </TH>
                <TH class="coltitle_cell">123<br/>123
                </TH>
                <TH class="coltitle_cell">123<br/>123
                </TH>
                <TH class="coltitle_cell">123<br/>123
                </TH>
                        <TH class="coltitle_cell">123<br/>123
                </TH>
                </TR>
                </TABLE>
          <DIV  class="record_div"  id="coldata_div">
            <TABLE class="record_table" id="coldata_table">
              <TR>
                <TD class="dummy_cell"></TD>
                <TH >123
                </TH>
                <TH >123<br/>123
                </TH>
                <TH >123<br/>123<br/>123
                </TH>
                <TH >123<br/>123<br/>123
                </TH>
                <TH >123<br/>123
                </TH>
                <TH >123<br/>123
                </TH>
                <TH >123<br/>123
                </TH>
                <TH >123<br/>123
                </TH>
                </TR>
                      <TR>
                <TD class="dummy_cell"></TD>
                <TH >123
                </TH>
                <TH >123<br/>123
                </TH>
                <TH >123<br/>123<br/>123
                </TH>
                <TH >123<br/>123<br/>123
                </TH>
                <TH >123<br/>123
                </TH>
                <TH >123<br/>123
                </TH>
                <TH >123<br/>123
                </TH>
                <TH >123<br/>123
                </TH>
                </TR>
                              <TR>
                <TD class="dummy_cell"></TD>
                <TH >123
                </TH>
                <TH >123<br/>123
                </TH>
                <TH >123<br/>123<br/>123
                </TH>
                <TH >123<br/>123<br/>123
                </TH>
                <TH >123<br/>123
                </TH>
                <TH >123<br/>123
                </TH>
                <TH >123<br/>123
                </TH>
                <TH >123<br/>123
                </TH>
                </TR>
                </TABLE>
        </div>
        </DIV>
</body> 
```

**CSS：**

```
.wrapper {
  margin: 0;
  padding:0px 0px 0px 3px;
  width:100%;
  height:150px;
  overflow:hidden;
}

.dummy_cell {
  width: 45px;
}

.wrapper table {
  border-collapse: collapse; 
  margin: 0;
  padding: 0;
  table-layout: fixed;
}

.wrapper #title_table {
  position: relative;
}

.wrapper th {
  font: normal;
}

.wrapper #title_table .titleHeader_row {
  background-color: #E7F0F7;
  font: 11px bold Arial, Helvetica, sans-serif;
  margin: 0;
  padding: 0;
}

.wrapper #title_table .titleHeader_row th.coltitle_cell {
  border: 1px solid #a7cbe3;
  border-left: none;
  font: bold 11px;
  min-height: 35px;
  margin: 0;
  padding: 0;
  position: relative;
}

.wrapper #title_table .titleHeader_row .coltitleExpand_cell {
  border: 1px solid #a7cbe3;
  margin: 0;
  text-align: left;
  width: 45px;
}

.wrapper #title_table {
  position: relative;
}

.wrapper th {
  font: normal;
}

.wrapper #title_table .titleHeader_row {
  background-color: #E7F0F7;
  font: 11px bold Arial, Helvetica, sans-serif;
  margin: 0;
  padding: 0;
}

.wrapper #title_table .titleHeader_row th.coltitle_cell {
  border: 1px solid #a7cbe3;
  border-left: none;
  font: bold 11px;
  min-height: 35px;
  margin: 0;
  padding: 0;
  position: relative;
}

.wrapper .results_row {
  display: inline;
}

.record_div {
  margin:0px;
  width:100%;
  height:100%;
  overflow:auto;
}

.wrapper .record_div .record_table {
  table-layout:fixed;
  margin: 0;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T19:03:25.967

`overflow:hidden`从`.wrapper`选择器中移除

有关工作示例，请参阅此[Jsfiddle 。](http://jsfiddle.net/WAh72/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-29T05:34:31.423

我认为您的问题是您在结尾处缺少标签。

编辑：哇刚刚看到这个问题的年龄......哈哈

# php - PDO 异常“找不到驱动程序”（pgsql）

> ID：15667158
> 
> 赞同：2
> 
> 时间：2013-03-27T18:56:27.670
> 
> 标签：php, windows, pdo

我下载并安装了 Stackbuilder 附带的 PostgreSQL 9.2.3。

我使用 PostgreSQL Stackbuilder 来安装 Apache (2.2.22) & PHP (5.4.5)。

现在我正在尝试使用 PDO 连接到数据库，但出现`driver not found`错误。

我在我的 php.ini 文件中取消了`extension=php_pgsql.dll`&的注释。`extension=php_pdo_pgsql.dll`

我的 phpinfo(); 功能显示它们已启用。 ![在此处输入图像描述](../Images/cfb32c1e363e1a2f2e37c2b46b894720.png)

我注意到的主要事情是在我的**php\**目录中没有包含这些文件的**ext\目录。**我会假设这些文件会自动安装到**php\**子目录中。

这些扩展存储在哪里；我是否需要为 php 指定一个绝对路径才能找到它们？

**更新：** 所以我进入 php.ini 并打开了启动错误。当我启动命令行 php.exe 时，我收到错误消息，指出找不到 php_pgsql.dll 和 php_pdo_pgsql.dll。

![在此处输入图像描述](../Images/ea02965e5feba2fb0ccbd14b324a0911.png) 看起来他们正试图在我没有的 D: 驱动器上引用它们。我将所有内容都安装到 E: 驱动器上的同一目录中。我在任何地方都找不到扩展名（php 也找不到）。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2014-09-08T20:27:49.250

在 Wamp（Windows）中...

复制`C:\wamp\bin\php\php5.x.xx\libpq.dll`

粘贴`C:\Windows\System32\`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-02-08T13:41:55.717

在 Wamp 上，有 2 个 php.ini 文件，你必须检查 Postgresql 扩展是否都在这两个文件上！延长线是

```
extension=php_pdo_pgsql.dll 
```

所以检查

```
C:\wamp\bin\apache\apache2.4.9\bin\php.ini 
```

还要检查

```
C:\wamp\apache\apache2.4.9\bin\php.ini 
```

添加扩展行后，重新启动 Apache 即可。

# java - 试图反转存储在Java数组中的图像

> ID：15667170
> 
> 赞同：1
> 
> 时间：2013-03-27T18:57:12.983
> 
> 标签：java, arrays, reverse

我需要反转存储在 double[] img 中的给定长度和宽度的图像；这是我第一次使用数组。指令是嵌套for循环，y（行）上的外循环和x（列）上的内循环，并反转每个水平数组。这就是我所拥有的，但它不起作用。

```
width = ImageLibrary.getImageWidth();
height = ImageLibrary.getImageHeight();

  for(i = 0; i < width ; i++){
    for(j = 0; j < height ; j++){
       for(int k = 0; k < img.length/2; k++){
           double temp = img[k];
           img[i] = img[img.length - k - 1];
           img[img.length - k - 1] = temp;
}
    }
  } 
```

我真的不确定该怎么办？当它说要反转水平阵列时，我这样做是否正确？谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-27T19:06:20.507

我认为您正在寻找的更像是这样的

```
width = ImageLibrary.getImageWidth();
height = ImageLibrary.getImageHeight();

// Loop from the top of the image to the bottom
for (y = 0; y < height ; y++) {

    // Loop halfway across each row because going all the way will result
    // in all the numbers being put back where they were to start with
    for (x = 0; x < width / 2 ; x++) {

        // Here, `y * width` gets the row, and `+ x` gets position in that row
        double temp = img[y * width + x];

        // Here, `width - x - 1` gets x positions in from the end of the row
        // Subtracting 1 because of 0-based index
        img[y * width + x] = img[y * width + (width - x - 1)];
        img[y * width + (width - x - 1)] = temp;
    }
} 
```

这将镜像图像，所以现在左侧是右侧，右侧是左侧

# javascript - 谷歌地图 V3：防止标记缩放

> ID：15667174
> 
> 赞同：2
> 
> 时间：2013-03-27T18:57:25.437
> 
> 标签：javascript, google-maps, google-maps-api-3

我有一张谷歌地图，上面有一个标记。

我需要标记为固定大小，例如 10x10 像素，并且即使我放大或缩小，也要重新发送相同的大小。

这就是我现在拥有的（不是工作）：

```
var marker = new google.maps.Marker({
    position: circleCenter,
    map: googleMap,
    icon: {
        path: google.maps.SymbolPath.CIRCLE,
        fillOpacity: 0.5,
        fillColor: 'ff0000',
        strokeWeight: 10,
        size: 5
    }
}); 
```

当地图缩放发生变化时，这是否可以阻止缩放其大小的标记？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T20:42:05.317

Google 没有开箱即用的方法来阻止标记缩放。

您可以使用[地面叠加层](https://developers.google.com/maps/documentation/javascript/reference#GroundOverlay)在地图上设置固定区域，然后附加图像。地面覆盖的诀窍是您必须知道边界对象的坐标，并且您可能必须想出一些计算边界的方法。在这个例子中，我只是将一个中心点扩展为一个矩形。

您还会失去其他标记功能，因为此方法不使用标记对象（例如拖动、动画等），但覆盖确实具有单击事件。

这是一个概念证明：http: [//jsfiddle.net/bryan_weaver/4rxqQ/](http://jsfiddle.net/bryan_weaver/4rxqQ/)

相关代码：

```
function initialize() {
    var map;
    var centerPosition = new google.maps.LatLng(38.713107, -90.42984);
    var options = {
        zoom: 9,
        center: centerPosition,
        mapTypeId: google.maps.MapTypeId.ROADMAP
    };
    map = new google.maps.Map($('#map')[0], options);

    var icon = 'https://www.google.com/mapfiles/marker_black.png';
    var iconBounds = constructBounds(38.713107, -90.42984);
    var staticOverlay = new google.maps.GroundOverlay(icon, iconBounds);
    staticOverlay.setMap(map);
}

function constructBounds(lat, lng){
    var sw = new google.maps.LatLng(lat - .03, lng - .025)
    var ne = new google.maps.LatLng(lat + .03, lng + .025) 
    return new google.maps.LatLngBounds(sw, ne);
} 
```

# java - Maven资源没有被复制到jar文件中

> ID：15667176
> 
> 赞同：0
> 
> 时间：2013-03-27T18:57:29.540
> 
> 标签：java, maven, resources, pom.xml

我的 maven 项目有一个父 POM 和三个子 POM。我的父 POM 看起来像这样

```
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
     xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">
<modelVersion>4.0.0</modelVersion>

<groupId>groupID</groupId>
<artifactId>artifacct</artifactId>
<version>1.0-SNAPSHOT</version>
<modules>
    <module>module1</module>
    <module>module2</module>
    <module>module3</module>
</modules>
<packaging>pom</packaging>

<name>name</name>
<url>http://maven.apache.org</url>

<properties>
    <project.build.sourceEncoding>UTF-8</project.build.sourceEncoding>
</properties>
<repositories>
    <repository>
        <id>clojars.org</id>
        <url>http://clojars.org/repo</url>
    </repository>
</repositories>

<build>
    <resources>
        <resource>
            <directory>src/main/resources</directory>
        </resource>
    </resources>
    <plugins>
        <plugin>
            <groupId>org.apache.maven.plugins</groupId>
            <artifactId>maven-compiler-plugin</artifactId>
            <version>3.0</version>
            <configuration>
                <source>1.7</source>
                <target>1.7</target>
            </configuration>
        </plugin>
        <plugin>
            <artifactId>maven-assembly-plugin</artifactId>
            <configuration>
                <descriptorRefs>
                    <descriptorRef>jar-with-dependencies</descriptorRef>
                </descriptorRefs>
                <finalName>finalName</finalName>
            </configuration>
        </plugin>
    </plugins>
</build> 
```

但问题是我的资源没有被添加到 jar 文件中。这可能是什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-05-30T10:09:15.313

你用`maven-dependency-plugin`吗？像这样的东西

```
 <plugin>
            <groupId>org.apache.maven.plugins</groupId>
            <artifactId>maven-dependency-plugin</artifactId>
            <version>2.8</version>
            <executions>
                <execution>
                    <id>copy-dependencies</id>
                    <phase>prepare-package</phase>
                    <goals>
                        <goal>copy-dependencies</goal>
                    </goals>
                    <configuration>
                        <outputDirectory>${project.build.directory}/lib</outputDirectory>
                        <overWriteReleases>false</overWriteReleases>
                        <overWriteSnapshots>false</overWriteSnapshots>
                        <overWriteIfNewer>true</overWriteIfNewer>
                    </configuration>
                </execution>
            </executions>
        </plugin> 
```

像这样打包你的罐子

```
 <plugin>
            <groupId>org.apache.maven.plugins</groupId>
            <artifactId>maven-jar-plugin</artifactId>
            <version>2.4</version>
            <configuration>
                <archive>
                    <manifest>
                        <addClasspath>true</addClasspath>
                        <classpathPrefix>lib/</classpathPrefix>
                        <mainClass>package.class.your.MainClass</mainClass>
                    </manifest>
                </archive>
            </configuration>
        </plugin> 
```

# c++ - 我可以使用 enter 作为输入吗？

> ID：15667178
> 
> 赞同：1
> 
> 时间：2013-03-27T18:57:41.437
> 
> 标签：c++

我试图让用户输入一个字符串或直接按回车键，在这种情况下我会使用默认字符串。

```
cout << "Where should I save the exam (default (./)exam.txt): " ;
cin >> exam_filename; 
```

但是现在您可以输入一个字符串并且它工作正常，但是如果您按 Enter 键，它只会一直等待用户输入一些内容。有什么建议么？？

好的，所以当我这样做时：

```
string exam_filename;
getline(cin, exam_filename);
if (exam_filename.empty())
  // set to default string 
```

现在它总是将字符串设置为默认字符串。它从来没有让我有机会输入它只是在程序的下一部分自动移动的任何内容。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-27T18:58:31.817

你真的想读一行。去做就对了：

```
string exam_filename;
getline(cin, exam_filename);
if (exam_filename.empty())
  // set to default string 
```

# windows-server-2012 - 如何在 Hyper-V VM 上启用 HPET

> ID：15667182
> 
> 赞同：2
> 
> 时间：2013-03-27T18:57:59.073
> 
> 标签：windows-server-2012, hyper-v

我一直在寻找有关如何在 Hyper-V 上正确启用 HPET 的文档。我找不到任何东西来说明它是否有效，如果有效，如何正确启用它。从我们最初的测试来看，它似乎与机器计时器或 HPET 不一致。

我们正在部署基于 Lync 和 UCMA 的应用程序，并注意到启用 HPET 和禁用 HPET 的机器在处理容量方面存在显着的性能差异。我们希望能够虚拟化这些机器，但 HPET 目前是我们的限制因素。

谁能指出我正确的方向以找到答案？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-18T14:28:20.000

查看 Microsoft 的[Hypervisor Top-Level Functional Specification](http://www.microsoft.com/en-us/download/details.aspx?id=39289)，我能看到的对 HPET 的唯一引用与管理程序自己对 HPET 的使用有关。它似乎没有提供虚拟 HPET 设备。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-12T16:47:27.713

我不确定，但我认为我们不能在 VM 中启用 HPET。

一般对于物理机我们可以启用

1.从 BIOS 启用 HPET

和

2.从操作系统运行`bcdedit /set useplatformclock true`，然后重新启动。

# templates - 根据模板客户端隐藏模板的特定部分

> ID：15667186
> 
> 赞同：2
> 
> 时间：2013-03-27T18:58:06.080
> 
> 标签：templates, jsf, facelets

我在 Facelet 模板中定义了页眉、正文和页脚。我想在我的登录页面中隐藏页眉和页脚。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-27T19:08:33.673

其中一种方法是根据[当前视图 ID](https://stackoverflow.com/questions/3253923/get-current-page-programmatically)有条件地渲染它们。

```
<h:panelGroup id="header" layout="block" rendered="#{view.viewId != '/login.xhtml'}">
    Header.
</h:panelGroup>

<div id="body">
    <ui:insert name="body">Body.</ui:insert>
</div>

<h:panelGroup id="footer" layout="block" rendered="#{view.viewId != '/login.xhtml'}">
    Footer.
</h:panelGroup> 
```

另一种方法是使用以下参数对其进行参数化`<ui:param>`：

```
<h:panelGroup id="header" layout="block" rendered="#{not hideHeaderAndFooter}">
    Header.
</h:panelGroup>

<div id="body">
    <ui:insert name="body">Body.</ui:insert>
</div>

<h:panelGroup id="footer" layout="block" rendered="#{not hideHeaderAndFooter}">
    Footer.
</h:panelGroup> 
```

然后在模板客户端中`/login.xhtml`：

```
<ui:composition template="/WEB-INF/templates/layout.xhtml" ...>
    <ui:param name="hideHeaderAndFooter" value="true" />
    <ui:define name="body">
        ...
    </ui:define>
</ui:composition> 
```

# python - id() 函数是干什么用的？

> ID：15667189
> 
> 赞同：112
> 
> 时间：2013-03-27T18:58:15.277
> 
> 标签：python

我阅读[了 Python 2 文档](http://docs.python.org/2/library/functions.html#id)并注意到了这个`id()`函数：

> 返回对象的“身份”。这是一个整数（或长整数），保证该对象在其生命周期内是唯一且恒定的。具有非重叠生命周期的两个对象可能具有相同的 id() 值。
> 
> CPython 实现细节：这是对象在内存中的地址。

因此，我通过使用`id()`列表进行了实验：

```
>>> list = [1,2,3]
>>> id(list[0])
31186196
>>> id(list[1])
31907092 // increased by 896
>>> id(list[2])
31907080 // decreased by 12 
```

函数返回的整数是多少？它是 C 中内存地址的同义词吗？如果是这样，为什么整数不对应数据类型的大小？

什么时候`id()`在实践中使用？

* * *

## 回答 #1

> 赞同：165
> 
> 时间：2013-03-27T19:05:37.130

您的帖子提出了几个问题：

> 函数返回的数字是多少？

它是“*一个整数（或长整数），保证在其生命周期内对于该对象是唯一且恒定的。* ” [（Python 标准库 - 内置函数）](https://docs.python.org/2/library/functions.html#id)一个唯一的数字。不多也不少。将其视为 Python 对象的社会保险号或员工 ID 号。

> 与C中的内存地址相同吗？

从概念上讲，是的，因为他们都保证在他们的一生中在他们的宇宙中是独一无二的。在 Python 的一种特定实现中，它实际上是对应 C 对象的内存地址。

> 如果是，为什么数字不会立即增加数据类型的大小（我假设它是 int）？

因为列表不是数组，列表元素是引用，而不是对象。

> 我们什么时候真正使用`id( )`函数？

几乎没有。您可以通过比较它们的 id 来测试两个引用是否相同，但[`is`操作符](https://docs.python.org/2/reference/expressions.html#is)一直是推荐的方法。`id( )`仅在调试情况下才真正有用。

* * *

## 回答 #2

> 赞同：55
> 
> 时间：2013-03-27T18:59:55.300

那就是对象在内存中的**位置标识...**

这个例子可以帮助你更多地理解这个概念。

```
foo = 1
bar = foo
baz = bar
fii = 1

print id(foo)
print id(bar)
print id(baz)
print id(fii)

> 1532352
> 1532352
> 1532352
> 1532352 
```

这些都指向内存中的相同位置，这就是它们的值相同的原因。在示例中，`1`仅存储一次，其他任何指向的内容都`1`将引用该内存位置。

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2015-03-16T21:11:41.710

Rob 的回答（上面投票最多）是正确的。我想补充一点，在某些情况下，使用 ID 很有用，因为它允许比较对象并查找哪些对象引用了您的对象。

后者通常可以帮助您调试奇怪的错误，例如将可变对象作为参数传递给类并分配给类中的本地变量。改变这些对象将改变一个类中的变量。这表现为奇怪的行为，其中多个事物同时发生变化。

最近我在一个 Python/Tkinter 应用程序中遇到了这个问题，其中在一个文本输入字段中编辑文本会在我输入时更改另一个文本：)

这是一个示例，说明如何使用函数 id() 来跟踪这些引用的位置。无论如何，这并不是涵盖所有可能情况的解决方案，但您明白了。再次在后台使用 ID，用户看不到它们：

```
class democlass:
    classvar = 24

    def __init__(self, var):
        self.instancevar1 = var
        self.instancevar2 = 42

    def whoreferencesmylocalvars(self, fromwhere):
        return {__l__: {__g__
                    for __g__ in fromwhere
                        if not callable(__g__) and id(eval(__g__)) == id(getattr(self,__l__))
                    }
                for __l__ in dir(self)
                    if not callable(getattr(self, __l__)) and __l__[-1] != '_'
                }

    def whoreferencesthisclassinstance(self, fromwhere):
        return {__g__
                    for __g__ in fromwhere
                        if not callable(__g__) and id(eval(__g__)) == id(self)
                }

a = [1,2,3,4]
b = a
c = b
democlassinstance = democlass(a)
d = democlassinstance
e = d
f = democlassinstance.classvar
g = democlassinstance.instancevar2

print( 'My class instance is of', type(democlassinstance), 'type.')
print( 'My instance vars are referenced by:', democlassinstance.whoreferencesmylocalvars(globals()) )
print( 'My class instance is referenced by:', democlassinstance.whoreferencesthisclassinstance(globals()) ) 
```

输出：

```
My class instance is of <class '__main__.democlass'> type.
My instance vars are referenced by: {'instancevar2': {'g'}, 'classvar': {'f'}, 'instancevar1': {'a', 'c', 'b'}}
My class instance is referenced by: {'e', 'd', 'democlassinstance'} 
```

变量名称中的下划线用于防止名称冲突。函数使用“fromwhere”参数，以便您可以让他们知道从哪里开始搜索引用。此参数由一个列出给定名称空间中所有名称的函数填充。Globals() 就是这样一个函数。

* * *

## 回答 #4

> 赞同：10
> 
> 时间：2013-03-27T19:04:33.313

`id()`确实返回被引用对象的地址（在 CPython 中），但您的困惑来自 Python 列表与 C 数组非常不同的事实。在 python 列表中，每个元素都是一个*引用*。因此，您所做的与此 C 代码更相似：

```
int *arr[3];
arr[0] = malloc(sizeof(int));
*arr[0] = 1;
arr[1] = malloc(sizeof(int));
*arr[1] = 2;
arr[2] = malloc(sizeof(int));
*arr[2] = 3;
printf("%p %p %p", arr[0], arr[1], arr[2]); 
```

换句话说，您打印的是参考中的地址，而*不是*与您的列表存储位置相关的地址。

在我的例子中，我发现该`id()`函数可以方便地创建不透明句柄以在从 C 调用时返回到 C 代码`python`。这样做，您可以轻松地使用字典从其句柄中查找对象，并保证它是唯一的。

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2013-03-27T19:16:29.020

我从 python 开始，当我使用交互式 shell 时使用 id 来查看我的变量是否分配给相同的东西，或者它们是否看起来相同。

每个值都是一个 id，它是与它在计算机内存中的存储位置相关的唯一编号。

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2014-09-20T02:31:11.797

如果您使用的是 python 3.4.1，那么您的问题会得到不同的答案。

```
list = [1,2,3]
id(list[0])
id(list[1])
id(list[2]) 
```

返回：

```
1705950792   
1705950808  # increased by 16   
1705950824  # increased by 16 
```

具有恒定 id的整数`-5`，`256`并且在多次找到它时，它的 id 不会改变，这与它之前或之后的所有其他数字不同，每次找到它时都有不同的 id。从`-5`到的数字`256`按递增顺序排列，相差`16`.

函数返回的数字`id()`是存储在内存中的每个项目的唯一 id，它与 C 中的内存位置类似。

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2013-03-27T19:04:22.853

操作员使用`is`它来检查两个对象是否相同（而不是相等）。从返回的实际值`id()`几乎从未用于任何事情，因为它没有真正的意义，而且它依赖于平台。

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2013-03-27T19:01:48.157

答案几乎是永远不会。ID 主要在 Python 内部使用。

一般的 Python 程序员可能永远不需要`id()`在他们的代码中使用。

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2013-03-27T19:06:00.250

正如文档所说，它是内存中对象的地址。但是，它附加了元数据，需要对象的属性和内存中的位置来存储元数据。因此，当您创建名为 list 的变量时，您还会为列表及其元素创建元数据。

因此，除非您是该语言的绝对大师，否则您无法根据前一个元素确定列表中下一个元素的 id，因为您不知道该语言与元素一起分配了什么。

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2016-04-14T19:32:34.057

我有一个在日志记录中使用 value 的想法`id()`。
它很便宜，而且很短。
在我的情况下，我使用龙卷风，并`id()`希望有一个锚来通过网络套接字将分散和混合在文件中的消息分组。

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2019-11-14T18:50:20.493

我有点晚了，我会谈谈Python3。要了解 id() 是什么以及它（和 Python）如何工作，请考虑下一个示例：

```
>>> x=1000
>>> y=1000
>>> id(x)==id(y)
False
>>> id(x)
4312240944
>>> id(y)
4312240912
>>> id(1000)
4312241104
>>> x=1000
>>> id(x)
4312241104
>>> y=1000
>>> id(y)
4312241200 
```

您需要将右侧的所有内容都视为对象。每次进行分配时-您都会创建新对象，这意味着新的ID。在中间，您可以看到仅为函数创建的“野生”对象 - id(1000)。所以，它的生命周期只针对那行代码。如果您检查下一行 - 您会看到当我们创建新变量 x 时，它具有与该 Wild 对象相同的 id。它几乎就像内存地址一样工作。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2019-07-09T13:43:54.933

在 python 3 中，id 被分配给一个值而不是一个变量。这意味着如果您创建如下两个函数，则所有三个 id 都是相同的。

```
>>> def xyz():
...     q=123
...     print(id(q))
...
>>> def iop():
...     w=123
...     print(id(w))
>>> xyz()
1650376736
>>> iop()
1650376736
>>> id(123)
1650376736 
```

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2019-11-23T18:59:12.767

小心（关于下面的答案）......这是正确的，因为 123 介于 -5 和 256 之间......

```
In [111]: q = 257                                                         

In [112]: id(q)                                                            
Out[112]: 140020248465168

In [113]: w = 257                                                         

In [114]: id(w)                                                           
Out[114]: 140020274622544

In [115]: id(257)                                                         
Out[115]: 140020274622768 
```

# matlab - 如何从内置函数 graycoprops() 中获取能量值

> ID：15667195
> 
> 赞同：0
> 
> 时间：2013-03-27T18:58:35.340
> 
> 标签：matlab

如何从下面给出的代码中获取能量值

```
g=rgb2gray(im);
g=double(g);
stats = graycoprops(g, {'energy'});
disp(stats) 
```

它显示这样的结果

```
 Energy: 1.4492e-005 
```

但我只想要 1.4492e-005

这样我就可以将其存储到文件中，或者有什么方法可以将统计变量（即“能量：1.4492e-005”）存储到文件中。我试过这个

```
stats = graycoprops(g, {'energy'});
  fprintf(fwener,'%s',stats); 
```

它给了我错误“???未定义的函数或变量'fwener'。”

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T19:53:56.023

`stats`是一个结构。

```
stats.Energy 
```

应该给你你想保存在文件中的号码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T20:46:54.590

正如莫莉所说，`stats`是结构。如果你这样做

```
disp(stats)   
disp('List of variables');
whos
disp('List of fields');
fieldnames(stats) 
```

你会看到这个：

```
Energy: 3.7247e-006
List of variables
  Name         Size                 Bytes  Class     Attributes
  ans          1x1                    124  cell                
  g          450x600              2160000  double              
  im         450x600x3             810000  uint8               
  stats        1x1                    184  struct              
List of fields
ans = 
    'Energy' 
```

因此，您应该更深入地检查 MatLab 所说的内容。

玩得开心;o)

# javascript - 上传时检查文件大小

> ID：15667197
> 
> 赞同：0
> 
> 时间：2013-03-27T18:58:43.807
> 
> 标签：javascript

我想在 javascript 上传时检查文件的大小（它是一个图像文件，所以如果可能的话，想检查 kb 或字节或 px）

有什么办法我可以做到。

提前致谢！

```
<input type="file" name="ssimgfile2" id="ssimgfile2" /> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T19:03:48.633

JavaScript 本身无法找到文件名以外的任何信息。我知道在 Windows 中，您可以通过定义一个新的 ActiveX 对象来创建文件系统对象，如下所示：

```
var myFSO = new ActiveXObject("Scripting.FileSystemObject"); 
```

我会建议使用服务器端脚本语言，如 ASP、ColdFusion 或 PHP，具体取决于您拥有的 Web 服务器类型。

# php - 为什么这个 CURL 请求不起作用？

> ID：15667201
> 
> 赞同：4
> 
> 时间：2013-03-27T18:59:00.270
> 
> 标签：php, curl, youtube-api

我正在尝试在 YouTube 视频上发表评论...为此，我使用 YouTube api。这是代码：

```
<?php
$message="Just Some Comment...";
$developer_key="<!---visit demo for actual code---!>";
$access_token=$_GET['code'];
if(!$access_token ){ Header("Location: <!---visit demo for actual code---!>");}
$video_id="I3LMKhu2-vo";
$message_xml='<?xml version="1.0" encoding="UTF-8"?>
<entry xmlns="http://www.w3.org/2005/Atom"     xmlns:yt="http://gdata.youtube.com/schemas/2007">
<content>' . $message . '</content>
</entry>'; 
$url = "http://gdata.youtube.com/feeds/api/videos/" . $video_id .  "/comments";
$header = array('Content-Type: application/atom+xml', 'Content-Length: ' .   strlen($message_xml), 'Authorization: Bearer "' . $access_token . '"', 'GData-Version: 2', 'X-GData-Key: key=' . $developer_key);
$ch = curl_init($url);
curl_setopt($ch, CURLOPT_SSL_VERIFYHOST, 0);
curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, 0);
curl_setopt($ch, CURLOPT_POST, 1);
curl_setopt($ch, CURLOPT_HTTPHEADER, $header);
curl_setopt($ch, CURLOPT_POSTFIELDS, "$message_xml");
curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
$result = curl_exec($ch);
echo curl_error($ch);
curl_close($ch);
echo $access_token;
?> 
```

我提到`<!---visit demo for actual code---!>`的地方是隐藏个人资料，但您可以在 votm.net78.net 上查看演示。所以我的问题是，为什么即使用户发送了授权令牌，视频上也没有出现评论？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T13:49:29.080

我认为您的代码中缺少的主要内容是您必须使用授权代码通过调用令牌服务来获取真正的 access_token（请参阅我的代码中的步骤 2）。这意味着您总共将有**两个**curl 请求。有关详细信息，请查看文档：[https ://developers.google.com/accounts/docs/OAuth2WebServer?hl=de#handlingtheresponse](https://developers.google.com/accounts/docs/OAuth2WebServer?hl=de#handlingtheresponse)

此外，您需要在[https://code.google.com/apis/console/](https://code.google.com/apis/console/)上创建一个项目（除非已经完成），以便为授权 API 访问创建一个`Client ID`和。`Client secret`除了`developer key`.

通过一些额外的错误检查，我编写了以下代码并成功测试了它。我假设脚本可以通过 URL 访问

```
http://localhost/youtube.php 
```

：

```
<?php

$developer_key='<!---hidden---!>';
$client_id=     '<!---hidden---!>';
$client_secret='<!---hidden---!>';

// error checking; user might have denied access
if (isset($_GET['error'])) {
    if ($_GET['error'] == 'access_denied') {
        echo('You have denied access. Click <a href="'. $_SERVER["SCRIPT_NAME"] .'">here</a> to retry&hellip;');
    } else {
        echo("An error has occurred: ". $_GET['error']);
    }
    exit;
}

// Step 1: redirect to google account login if necessary
if(!isset($_GET['code']) || $_GET['code'] === '') { 
    Header('Location: https://accounts.google.com/o/oauth2/auth?client_id='. $client_id .
            '&redirect_uri=http%3A%2F%2Flocalhost%2Fyoutube.php' .
            '&scope=https://gdata.youtube.com&response_type=code&access_type=offline',
        true, 307);
    exit;
}
$authorization_code= $_GET['code'];

// Step 2: use authorization code to get access token
$url = "https://accounts.google.com/o/oauth2/token";
$message_post= 'code='. $authorization_code .
        '&client_id='. $client_id . 
        '&client_secret='. $client_secret .
        '&redirect_uri=http://localhost/youtube.php' .
        '&grant_type=authorization_code';

$ch = curl_init($url);
curl_setopt($ch, CURLOPT_SSL_VERIFYHOST, 0);
curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, 0);
curl_setopt($ch, CURLOPT_POST, 1);
curl_setopt($ch, CURLOPT_POSTFIELDS, $message_post);
curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
$result = curl_exec($ch);

if ($cur_error= curl_error($ch)) {
    echo($cur_error);
    curl_close($ch);
    exit;
}
curl_close($ch);

$jsonArray= json_decode($result, true);

if ($jsonArray === null) {
    echo("Could not decode JSON.");
    exit;
}

if (isset($jsonArray['error'])) {
    echo("An error has occurred: ". $jsonArray['error']);
    exit;
}

if (!isset($jsonArray['access_token'])) {
    echo("Access token not found.");
    exit;
}

// Step 3: using access_token for youtube api call
$message="Just Some Comment...";
$access_token= $jsonArray['access_token'];
$video_id="I3LMKhu2-vo";
$message_xml='<?xml version="1.0" encoding="UTF-8"?>
<entry xmlns="http://www.w3.org/2005/Atom"     xmlns:yt="http://gdata.youtube.com/schemas/2007">
<content>' . $message . '</content>
</entry>'; 
$url = "https://gdata.youtube.com/feeds/api/videos/" . $video_id .  "/comments";
$header = array('Content-Type: application/atom+xml', 'Content-Length: ' .   strlen($message_xml), 'Authorization: Bearer "' . $access_token . '"', 'GData-Version: 2.1', 'X-GData-Key: key=' . $developer_key);
$ch = curl_init($url);
curl_setopt($ch, CURLOPT_SSL_VERIFYHOST, 0);
curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, 0);
curl_setopt($ch, CURLOPT_POST, 1);
curl_setopt($ch, CURLOPT_HTTPHEADER, $header);
curl_setopt($ch, CURLOPT_POSTFIELDS, $message_xml);
curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
$result = curl_exec($ch);
echo curl_error($ch);
curl_close($ch);

echo "DONE! Token:" . $access_token . "<br />\n";
var_dump($result);
?> 
```

请注意，登录其 google 帐户并代表将发布评论的用户需要有一个链接的 YouTube 帐户（仅 google 帐户是不够的）。此外，他需要在 YouTube 上成功发布至少一条评论。否则，他会看到类似“youtube_signup_required”或“NoLinkedYouTubeAccount”的错误。

而且我已经切换到 API 2.1 (GData-Version)，因为它是更新的，并且在未链接的谷歌帐户的情况下提供了更好的功能和错误报告。

# java - 服务器线程看不到序列化对象的更改字段

> ID：15667203
> 
> 赞同：1
> 
> 时间：2013-03-27T18:59:05.337
> 
> 标签：java, sockets, serialization, objectoutputstream, objectinputstream

我面临一个关于通过 TCP 套接字发送和接收序列化对象的问题。实际上，我可以在服务器线程和客户端线程之间正确接收/发送对象。但是，问题是如果更改了接收/发送对象的属性值，则等待线程无法实现此更改。考虑这个代码示例；

```
public class ClientThread extends javax.swing.JFrame implements Runnable {

ClientObject mainClient; // Initiliazed after sockets connect to server successfully
.
.
.
      String addNewBuddy = JOptionPane.showInputDialog(this, "Enter the Username of the person who you want to add...");

      mainClient.setBuddyRequest(true);
      mainClient.setBuddyRequestAccount(addNewBuddy);

      send.writeObject(mainClient); // write into an ObjectOutputStream
      send.flush(); // flush it

      System.out.println("mainClient.setBuddyRequest : " + mainClient.isBuddyRequest() + " setBuddyRequestAccount : " + mainClient.getBuddyRequestAccount()); // Check if values changed properly

      ClientObject tempClientObject; // temporary an instance of ClientObject

      while(( tempClientObject = (ClientObject) receive.readObject()) != null){

           if( !tempClientObject.isBuddyRequest() ){

                    JOptionPane.showMessageDialog(this, "Buddy Request Information", "Requested buddy doesnt exist!!!", JOptionPane.ERROR_MESSAGE);
                    break;
                }

                else{
                    JOptionPane.showMessageDialog(this, "Buddy Request Information", "Requested buddy added into your buddy list succesfully", JOptionPane.INFORMATION_MESSAGE);
                    labelSetText = tempClientObject.getNickName();
                    onlineStatus = tempClientObject.isIsOnline();
                    model.addElement(createPanel());
                }

            }
.
.
.
} 
```

因此，在我更改了一些属性后，`mainClient`我将其发送到服务器。这是服务器线程等待对象做出反应的部分。此外，当客户端发送第二个对象（使计数器大于 0）时，服务器线程可以毫无错误地读取它，但我认识到即使客户端将修改后的对象作为第二条消息发送到服务器，第一个和第二个对象的属性之间也没有区别！ .

```
 while( ( clientO = (ClientObject) receive.readObject()) != null ){

                counterMessage++;

                 if( counterMessage==1) { // 

                     checkAccountIfExist(toWrite,file.exists(),toModify,clientO); // Check is connected account exist in database of server

                 } // end of if (counter==1)

                 else{ // Second time when server waits 

// prints counter=2 but clientO.isBuddyRequest printed as 'false' 
//instead of 'true' so this makes if statement unreachable!
                     System.out.println("Counter = " + counterMessage + "  BUDDYREQUEST : " + clientO.isBuddyRequest() + " USERNAME : " + clientO.getUserName());

                     if(clientO.isBuddyRequest()){
                         System.out.println("Entered");
                         checkBuddyAvalaible(clientO);
                     }

                 }

        } 
```

最后是我的可序列化 ClientObject 的代码

```
public class ClientObject implements Serializable {

    private static final long serialVersionUID = 8662836292460365873L;
    private String userName;
    private String password;
    private String nickName;
    private String message;
    private boolean checkAcc;
    private LinkedList<ClientObject> buddyList;
    private boolean isOnline;
    private boolean buddyRequest;
    private String buddyRequestAccount;

    public ClientObject(String userName, String password){

        this.userName = userName;
        this.password = password;
        this.checkAcc = false;
        this.buddyList = new LinkedList<ClientObject>();
        this.isOnline = false;
        this.buddyRequest = false;
        this.buddyRequestAccount = null;
    }

   ...methods of getters and setters
} 
```

我希望我已经清楚这个问题，我会感谢每一个答案，无论如何，谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-27T23:06:19.440

您需要做的就是调用 ObjectOutputStream.reset()，或使用 writeUnshared()。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-27T19:49:36.273

我猜您正在编写发送代码：

```
.....
mainClient = new ClientObject(userName, password);
String clientNickName = JOptionPane.showInputDialog(this, "Enter your NickName");
mainClient.setNickName(clientNickName);
send.writeObject(mainClient);
send.flush();
...... 
```

在一个循环中。如果是这样，您应该阅读有关 java 序列化的事实：

> 在执行对象的序列化时，Java 会形成一个类似于 Object Graph 的数据结构来确定哪些对象需要被序列化。它从主对象开始进行序列化，递归地遍历所有从主对象可达的对象。对于它遇到的每个需要序列化的对象，它将一个标识符关联到一个给定的 ObjectOutputStream 实例，该标识符将该对象标记为已序列化。所以当Java遇到已经被标记为序列化到ObjectOutputStream的同一个对象时，它不会再序列化这个对象，而是序列化同一个对象的句柄。这就是 Java 避免重新序列化已经序列化的对象的方式。

**编辑**
根据*EJP 的评论*，我更新了帖子以向 OP 提供正确的信息。
在第一次向 via 发送对象后`ClientObject`，`OutputStream`下次`ObjectOutputStream`发送更改后的`ClientObject`java 对象时会检查此类型的对象是否已被序列化。由于它已经被序列化了，所以java不会`object`再次序列化新创建的。这就是为什么你在另一边得到相同的对象。
解决这个问题的方法是每次你想发送`ClientObject`重置的更改对象时`ObjectOutputStream`：

```
send.reset(); 
```

然后将更改后的对象发送到另一端。

# javascript - 自定义颜色选择器 TinyMCE

> ID：15667207
> 
> 赞同：2
> 
> 时间：2013-03-27T18:59:10.923
> 
> 标签：javascript, tinymce, wysiwyg, color-picker

我在我的网站上使用 TinyMCE 作为所见即所得的编辑器，除了使用前景色的现有颜色选择器之外，我还想向编辑器添加一个自定义颜色选择器。我找到了这个[http://fiddle.tinymce.com/lwcaab/16](http://fiddle.tinymce.com/lwcaab/16)并用它来显示按钮，但有两个问题。我需要过滤显示在该按钮中的颜色（仅显示几种颜色），当您单击颜色时，它不会更改编辑器中的字体颜色。

```
tinymce.create('tinymce.plugins.ExamplePlugin', {
    createControl: function(n, cm) 
        {
            switch(n)
            {
            case "universityColors":
               var o = {};
               ed=tinyMCE.activeEditor;
               o.scriptURL = ed.baseURI.getURI();
               o['class'] = 'mce_forecolor';
               o.title='University Font Colors';
               o.scope=this;
               o.image = '../images/uor.ico',
               o.onclick = function (color) { console.log('clicked',color);/*this.cs.showMenu(); if (this.o.onClick) this.o.onClick(c);*/};
               o.onselect = function (color) {console.log('selected',color); /*this.color=this.o.color=c; if (this.o.onSelect) this.o.onSelect(c);*/};

                var mcsb = cm.createColorSplitButton('universityColors', o);

                // return the new ColorSplitButton instance
                return mcsb;
            }
            return null;
        }
   });
tinymce.PluginManager.add('universityColorPicker', tinymce.plugins.ExamplePlugin);
tinyMCE.init({
    mode: "specific_textareas",
    editor_selector: "tinyMCE",
    theme : "advanced",
    plugins : "emotions,spellchecker,advhr,insertdatetime,preview, -universityColorPicker", 

     // Theme options - button# indicated the row# only
    theme_advanced_buttons1 : "newdocument,|,bold,italic,underline,|,justifyleft,justifycenter,justifyright,fontselect,fontsizeselect,formatselect",
    theme_advanced_buttons2 : "cut,copy,paste,|,bullist,numlist,|,outdent,indent,|,undo,redo,|,link,unlink,anchor,image,|,code,preview,|,forecolor,backcolor, universityColors",
    theme_advanced_buttons3 : "insertdate,inserttime,|,spellchecker,advhr,,removeformat,|,sub,sup,|,charmap,emotions",      
    theme_advanced_toolbar_location : "top",
    theme_advanced_toolbar_align : "left",
    theme_advanced_statusbar_location : "bottom",
    theme_advanced_resizing : true,

    }); 
```

我也做了一个小提琴的工作：http: [//fiddle.tinymce.com/jYcaab](http://fiddle.tinymce.com/jYcaab)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-28T10:07:39.140

我做了那个较旧的小提琴:)在这里你修改过的小提琴限制了颜色： http: [//fiddle.tinymce.com/jYcaab/1](http://fiddle.tinymce.com/jYcaab/1)

将字体应用于内容是另一回事。更新：现在应用字体：http: [//fiddle.tinymce.com/jYcaab/2](http://fiddle.tinymce.com/jYcaab/2)

# ruby-on-rails - 如何将 update_elements 与 rails3-jquery-autocomplete 一起使用？

> ID：15667212
> 
> 赞同：2
> 
> 时间：2013-03-27T18:59:32.597
> 
> 标签：ruby-on-rails, autocomplete, ruby-on-rails-3.2

我正在使用 rails3-jquery-autocomplete (Rails 3.2.10)，我想我可能有两个问题，可能会或可能不会交互。

我在表“pi”中有一个“名称”字段（包含给定名称）。我希望该字段能够自动完成，并且我希望在第一个字段中选择一个名称来填充同一个表中的第二个姓氏字段。

这对我来说适用于 0.6.0 的 gem，但不适用于 1.0.11。我可以在版本之间来回切换，只需更改捆绑的 gem，让它工作或不工作。

我放弃了尝试让 1.0.11 工作，很高兴直到我需要同时实现另一个姓氏字段的填充。这我无法在 0.6.0 或 1.0.11 中工作。我也尝试了 1.0.10 无济于事。

如果我能自动完成使用 0.6.0 的其他字段，我会很高兴，但我希望用最新的东西来解决这个问题对我来说是有意义的。如果有人可以帮助我继续前进，我将不胜感激。

我的表格如下所示：

```
 <%= form_tag do %>
      Given name:  <%= text_field_tag 'name', '', :autocomplete => welcome_autocomplete_pi_name_path, :update_elements => {:surname => '#surname'} %>

      Surname: <%= text_field_tag 'surname', '' %>

    <% end %> 
```

第一个字段 id 使用给定名称自动完成的字段；姓氏根本没有被填充。

控制器：

```
 class WelcomeController < ApplicationController
      autocomplete :pi, :name, :extra_data => [:surname]
    end 
```

耙路线给出：

```
 $ rake routes
    welcome_show GET /welcome/show(.:format)                 welcome#show
    root     /                                       welcome#show
    welcome_autocomplete_pi_name GET /welcome/autocomplete_pi_name(.:format) welcome#autocomplete_pi_name 
```

我进行了搜索，但找不到任何显示其工作原理的东西。文档似乎表明这很简单，所以我不得不假设我遗漏了一些东西。

谢谢阅读 ！

# r - data.frame 中特定列的矩阵运算

> ID：15667219
> 
> 赞同：0
> 
> 时间：2013-03-27T18:59:45.400
> 
> 标签：r, qualtrics

我有一个从 Qualtrics 调查中提取的松鼠数据集。它看起来像这样：

```
V3       Q8_42  Q8_33  Q8_72   Q8_38  Q13_1_42 Q13_1_33 Q13_1_72 Q13_1_38
Chap A     .    1       .        .       .      4        .        .
Chap B     1    .       .        .       4      .        .        .
Chap C     .    .       .        .       .      .        .        .
Chap D     .    .       .        .       .      .        .        . 
```

快照显示了四个人询问他们是否是朋友（q8_42 是 A；q8_33 是 B，q8_72 是 C，q8_38 是 D）。如果有人说他们是朋友，那么他们会以 1-5 的等级询问他们友谊的强度（q13_1_42 代表 A，q13_1_33 代表 B，q13_1_72 代表 C，q13_1_38 代表 D）。我总共有 95 个人，总共有 9 个问题向他们提出：他们的友谊。我应该如何运行矩阵运算，以便最终得到以下矩阵，每个友谊问题 1：

```
 Chap A   Chap B  Chap C  Chap D
Chap A  0       4       .       .
Chap B  4       0       .       .
Chap C  .       .       0       .
Chap D  .       .       .       0 
```

我的解决方案是将数据（名为“kolp”）读入 R，然后运行

```
Chap.A <- (kolp$q8_42 * kolp$q13_1_42)
Chap.B <- (kolp$q8_33 * kolp$q13_1_33)
Chap.C <- (kolp$q8_72 * kolp$q13_1_72)
Chap.D <- (kolp$q8_38 * kolp$q13_1_38)
Mat.1 <- cbind(Chap.A, Chap.B, Chap.C, Chap.D)
rownames(Mat.1) <- c("Chap.A", "Chap.B", "Chap.C", "Chap.D") 
```

这给了我

```
 Chap.A Chap.B Chap.C Chap.D
Chap.A     NA      4     NA     NA
Chap.B      4     NA     NA     NA
Chap.C     NA     NA     NA     NA
Chap.D     NA     NA     NA     NA 
```

但我知道这是一种笨拙的方法，特别是有 9 个矩阵要提取为 *.csv 或 *.txt 文件，dim 为 95x95

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T20:45:36.647

假设列的形式为“questionID_individualID”，您可以尝试使用此函数来处理您的数据：

```
f <- function(dat)
{
    n <- names(dat)

    id <- substring(n, nchar(n)-1)

    qu_id <- substring(n, 1, nchar(n)-3)

    individuals <- sort(unique(id))

    questions <- unique(qu_id)

    result <- 1

    for(q in questions)
    {
        filter <- qu_id==q

        result <- result * dat[,filter][,match(individuals, id[filter])]
    }

    result

    colnames(result) <- individuals

    result
} 
```

用作`f(kolp)`. 即使列无序，它也可以工作。但是，如果某些问题没有针对所有个人的列，它将失败（或给出错误的结果）。

# sql - 从数据库中选择唯一记录

> ID：15667220
> 
> 赞同：1
> 
> 时间：2013-03-27T18:59:46.727
> 
> 标签：sql

运行此查询，

```
select * from table; 
```

返回以下内容

```
|branch | number |
-------------------
|  1    |  123   |
|  1    |  001   |
|  2    |  123   |
|  3    |  123   |
|  4    |  123   |
|  1    |  123   |
|  1    |  789   |
|  2    |  123   |
|  3    |  123   |
|  4    |  009   | 
```

我想找到仅分支 1 独有的值

```
|  1    |  001   |
|  1    |  789   | 
```

这可以在没有将数据存储在单独的表中的情况下完成吗？我已经尝试了一些“选择不同”的查询，但似乎没有得到我期望的结果。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T19:01:41.767

```
SELECT branch, number
FROM table
WHERE branch = 1
GROUP BY branch, number 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-27T19:02:33.433

如果您不需要任何聚合，则可以使用`distinct`代替`group by`：

```
select  distinct branch
,       number
from    YourTable
where   branch = 1 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-27T19:33:39.560

> 我想我想说的是我想找到仅分支 1 独有的所有数字。如果在任何其他分支中找到它们，我不想看到它们。

我想这就是你想要的。

```
SELECT distinct number
FROM MyTable
WHERE branch=1 and number not in 
( SELECT distinct number
FROM MyTable
WHERE branch != 1 ) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-27T19:01:31.013

试试这个：

```
SELECT branch, number
FROM table
GROUP BY branch, number 
```

这是一个[SQLFiddle](http://sqlfiddle.com/#!2/06bd8/2)供您查看

如果要将其限制为仅分支 1，则只需添加 where 子句。

```
SELECT branch, number
FROM table
WHERE branch = 1
GROUP BY branch, number 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-27T19:44:31.103

要选择列中唯一`number`且`branch`值为 1 的所有值，您可以使用以下代码：

```
SELECT branch, number
FROM table1
WHERE number IN (
 SELECT number
 FROM table1
 GROUP BY number 
 HAVING (COUNT(number ) = 1)
)
AND branch = 1 
```

有关演示，请参阅[http://sqlfiddle.com/#!2/97145/62](http://sqlfiddle.com/#!2/97145/62)

# php - 有没有办法检测unix命令“cat”完成合并文件？

> ID：15667222
> 
> 赞同：1
> 
> 时间：2013-03-27T18:59:51.210
> 
> 标签：php, unix, file-upload, zip

我想知道，有没有办法检测 cat 函数完成合并文件，所以我可以压缩文件？例如，如果我有这样的简单案例，则包含多个文件的文件夹如下：

```
/var/www/testing/file1.iso0
/var/www/testing/file1.iso1
/var/www/testing/file1.iso2
/var/www/testing/file2.xls0
/var/www/testing/file2.xls1 
```

基本上，使用我的网络应用程序，用户将上传 file1.iso 和 file2.xls，使用 html5 我将切片每个文件并部分上传，这将导致上述结构。在每个文件的所有部分完成上传后，我将使用 ajax 调用使用 cat unix 命令合并文件。

```
$command = '(files=(' . $list_file_copy . '); cat ' . '"${files[@]}" > ' . '"' . $file_name . '"' . '; rm ' . '"${files[@]}")'; 
```

像这样的东西。

```
exec($cmd . " > /dev/null &"); 
```

我的问题是我怎么知道 file1.iso 和 file2.xls 完成合并，所以我可以发送另一个命令来压缩文件？例如 file1.iso 和 file2.xls 变成 filexxx.zip。

请注意，文件可以是多个，每个单独的文件都可以很大（我会说最多 4GB，这就是为什么它将 100MB 切成小部分的原因）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T01:43:29.453

您可以尝试检查退出代码.......当命令完成时，它会向操作系统返回成功/失败指示符或调用 prog....

在外壳测试中 $ 的值？（会给你最后执行的命令的退出代码），如果那是成功的，它将返回 0 作为退出代码 - 执行 zip，否则根据需要抛出警告或错误。

我在很多脚本中都这样做。希望这可以帮助

# mysql - 在 CodeIgniter 结果集的字段中更改内容时向 HTML 表中添加行

> ID：15667233
> 
> 赞同：0
> 
> 时间：2013-03-27T19:00:17.427
> 
> 标签：mysql, codeigniter, design-patterns

我有一个返回以下示例结果的查询：

```
obs_id  person_id   concept_id  encounter_id    obs_datetime    
477205  2           6136        48915           2013-03-21 00:00:00
477206  2           6134        48915           2013-03-21 00:00:00
477204  2           976         48915           2013-03-21 00:00:00
477203  2           6135        48914           2013-03-15 00:00:00
477202  2           6136        48914           2013-03-15 00:00:00
477200  2           976         48913           2013-03-15 00:00:00
477201  2           6134        48913           2013-03-15 00:00:00
477192  2           5497        48912           2013-03-14 00:00:00
477191  2           887         48912           2013-03-14 00:00:00
477190  2           857         48912           2013-03-14 00:00:00 
```

我在 HTML 表格中显示结果。共享遇到 id 的结果放在同一行中。并非行中的每个单元格都包含一个值。每次我有一个新的遭遇 id 时，我都需要创建一个新行。使用 CodeIgniter 的简单方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T19:17:43.267

```
$this->db->group_by("encounter_id"); 
$this->db->order_by("encounter_id"); 

$previous_id = -1;
foreach($results as $row)
{
    if ($row->encouter_id != previous_id)
    {
        // create new tr in html-table
        $previous_id = $row->id;
    }
} 
```

（我不太擅长CI和PHP，所以可能会有一些语法错误，但处理方式应该可以。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T19:24:01.767

我对 CI 不是很友好，但这里有一些关于普通 PHP 的代码，我相信它们可以很容易地适应 CI。

```
$someArray = array();
$someArray[] = array("477205", "2", "6136", "48915", "2013-03-21 00:00:00");
$someArray[] = array("477206", "2", "6134", "48915", "2013-03-21 00:00:00");
$someArray[] = array("477204", "2", "976", "48915", "2013-03-21 00:00:00");
$someArray[] = array("477202", "2", "6136", "48918", "2013-03-15 00:00:00");
$someArray[] = array("477203", "2", "6135", "48914", "2013-03-15 00:00:00");
$someArray[] = array("477202", "2", "6136", "48914", "2013-03-15 00:00:00");
$someArray[] = array("477200", "2", "976", "48913", "2013-03-15 00:00:00");
$someArray[] = array("477201", "2", "6134", "48913", "2013-03-15 00:00:00");
$someArray[] = array("477192", "2", "5497", "48912", "2013-03-14 00:00:00");
$someArray[] = array("477191", "2", "887", "48912", "2013-03-14 00:00:00");
$someArray[] = array("477190", "2", "857", "48912", "2013-03-14 00:00:00");

function CalcUnique($arr,$prop,$val) {
    reset ($arr);
    $count = 0;
    foreach ($arr as $sub) if ($sub[$prop]==$val) $count++;
    return $count;
}

echo "<table border=1>\n"; // starting table
$doMerge = $actualVal = false; // setting initial values
foreach ($someArray as $row) { // inerating array
    if ($row[3]!=$actualVal) { // if value changed from previous
        $mergeNum = CalcUnique($someArray,3,$row[3]); // check if there is more then one row with this value
        $actualVal = $row[3]; // store new val
        $doMerge = true; // setting flag to merge cells
    }

    echo "<tr>\n\t<td>".$row[0]."</td><td>".$row[1]."</td><td>".$row[2]."</td>";

    if ($doMerge && $mergeNum>1) { // prints out merged cell
        echo "<td rowspan=".$mergeNum.">".$row[3]."</td>";
        $doMerge = false;
    }
    if ($mergeNum==1) echo "<td>".$row[3]."</td>"; // prints out regular cell       
    echo "<td>".$row[4]."</td>\n";
    echo "</tr>\n";
}
echo "</table>";
?> 
```

# mysql - 按行的值将一列分隔为两列

> ID：15667235
> 
> 赞同：3
> 
> 时间：2013-03-27T19:00:30.450
> 
> 标签：mysql

我有 2 个表 - 帖子和元

帖子结构：

```
+---------+---------+
|   id    |  title  |
+---------+---------+ 
```

元结构：

```
+---------+---------+---------+
|   post  |   key   |  value  |
+---------+---------+---------+ 
```

我需要选择 meta.key 为“end”或“result”的记录，并按 post.id 组合（如果同时存在“end”和“result”元键）

这是我的尝试：

```
SELECT
posts.id,
posts.title,
meta.post,
meta.`value`,
CASE meta.`key` WHEN 'result' THEN value END AS 'result',
CASE meta.`key` WHEN 'end' THEN value END AS 'end'
FROM
posts
INNER JOIN meta ON posts.id = meta.post
WHERE meta.`key` IN ('result', 'end') 
```

它返回两条单独的记录，一条带有 meta.key “end”，一条带有“result”。

```
+------------+------------+------------+------------+------------+------------+
|    id      |   title    |   post     |   value    |   result   |     end    |
+------------+------------+------------+------------+------------+------------+
|     1      |  Untitled  |      1     |     5      |    (Null)  | 1344240000 |
+------------+------------+------------+------------+------------+------------+
|     1      |  Untitled  |      1     |   88:79    |    88:79   |   (Null)   |
+------------+------------+------------+------------+------------+------------+ 
```

我需要的是将这两条记录合并为一条：

```
+------------+------------+------------+------------+------------+------------+
|    id      |   title    |   post     |   value    |   result   |     end    |
+------------+------------+------------+------------+------------+------------+
|     1      |  Untitled  |      1     |     -      |    88:79   | 1344240000 |
+------------+------------+------------+------------+------------+------------+ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T19:09:08.863

您可以通过两次 INNER JOINing meta 来做到这一点，即

```
SELECT

  p.id,
  p.title,
  mr.value AS result,
  me.value AS end

FROM posts AS p

INNER JOIN meta AS mr

  ON mr.post = p.id
  AND mr.`key` = 'result'

INNER JOIN meta AS me
  ON me.post = p.id
  AND me.`key` = 'end'; 
```

SQL小提琴链接：[http ://sqlfiddle.com/#!2/2a89e/5](http://sqlfiddle.com/#!2/2a89e/5)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T19:05:58.670

由于您正在尝试对数据进行*透视*，因此您通常会使用带有以下内容的聚合函数`CASE`：

```
SELECT
  posts.id,
  posts.title,
  -- meta.post,
  -- meta.`value`,
  max(CASE meta.`key` WHEN 'result' THEN value END) AS 'result',
  max(CASE meta.`key` WHEN 'end' THEN value END) AS 'end'
FROM posts
INNER JOIN meta 
  ON posts.id = meta.post
WHERE meta.`key` IN ('result', 'end')
GROUP BY posts.id, posts.title  -- , meta.post, meta.`value` 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!2/65528/1)

注意：您正在为该`value`列显示两个单独的值，您需要决定选择一个值的逻辑，因为如果在`group by`执行时它们是不同的，您将获得多行。所以你会看到我注释掉了这两列，因为它们正在被使用`CASE`并且该`post`列已经显示。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-27T19:15:52.347

只要每个帖子ID只有一行“结果”和“结束”一行，您就可以`MAX`将原始查询用作聚合函数并在最后按posts.id分组；我不太明白你的逻辑，`VALUE`所以我暂时省略了；

```
SELECT posts.id, posts.title,
  MAX(CASE meta.`key` WHEN 'result' THEN value END) AS 'result',
  MAX(CASE meta.`key` WHEN 'end' THEN value END)  AS 'end'
FROM posts
INNER JOIN meta ON posts.id = meta.post
WHERE meta.`key` IN ('result', 'end')
GROUP BY posts.id, posts.title 
```

[一个用于测试的 SQLfiddle](http://sqlfiddle.com/#!2/27142/1)。

# android - android：过滤列数据

> ID：15667238
> 
> 赞同：0
> 
> 时间：2013-03-27T19:00:34.990
> 
> 标签：android, sqlite

您好，我的 sqlite3 数据库中有一个这样的表。

```
db.execSQL(" CREATE TABLE IF NOT EXISTS "
        + DATABASE_TABLE + " ( " + KEY_ID + " INTEGER PRIMARY KEY AUTOINCREMENT,"   + KEY_DATE + " TEXT, " + KEY_CATEGORY + " TEXT, "
        + KEY_SUB_CATEGORY + " TEXT, " + KEY_AMOUNT + " REAL, "
        + KEY_NOTE + " TEXT " + " );"); 
```

`KEY_SUB_CATEGORY`我查询了数据库并获得`KEY_AMOUNT`了当前年份的所有值。

```
Cursor c = db.query(DATABASE_TABLE,new String[] { KEY_SUB_CATEGORY, KEY_AMOUNT }, + KEY_YEAR + "=? ", new String[] { Integer.toString(currentYear) }, null, null, null, null); 
```

现在，有没有办法，我可以根据我的`KEY_SUB_CATEGORY`.

例如，我`KEY_SUB_CATEGORY`的杂货店有 3 个值。

有没有办法可以从此光标中获取 Grocery 的总金额？还是我每次都必须单独查询`KEY_SUB_CATEGORY`？

![在此处输入图像描述](../Images/5d2f137cf470517890f6015ea32c2498.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T19:06:52.500

> 有没有办法可以从此光标中获取 Grocery 的总金额？还是我每次都必须为每个 KEY_SUB_CATEGORY 单独查询？

我建议您进行新的查询（代码更具可读性），然后使用`SUM()`可以制作技巧的函数。

```
int sum = 0; 
String query = "select SUM(" + KEY_AMOUNT + ") from " + DATABASE_TABLE 
             + " where " + KEY_SUB_CATEGORY + " = ?";
Cursor c = db.rawQuery(query, new String[] {"Grocery"});
if (c.moveToFirst()) {
   sum = c.getInt(0);
} 
```

输出将是：

```
select SUM(KEY_AMOUNT) from DATABASE_TABLE where KEY_SUB_CATEGORY = 'Grocery'; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T19:11:17.430

```
Cursor c = db.query(DATABASE_TABLE,
new String[] { KEY_SUB_CATEGORY, KEY_AMOUNT, "sum(" + KEY_AMOUNT + ") as catsum " }, 
+ KEY_YEAR + "=? ", new String[] { Integer.toString(currentYear) }, 
KEY_SUB_CATEGORY, null, null, null);  

c.getInteger(2) would be the sum 
```

# xcode - Xcode 运行脚本引用来自不同目标的变量

> ID：15667239
> 
> 赞同：2
> 
> 时间：2013-03-27T19:00:35.730
> 
> 标签：xcode, variables, target

在 Xcode 中，我有 2 个目标 A、B。我想在目标 B 的运行脚本中引用目标 A 的产品名称。谁能告诉我该怎么做？谢谢。

# zend-framework2 - 如何从 ZfcUser 中删除不需要的字段？

> ID：15667241
> 
> 赞同：0
> 
> 时间：2013-03-27T19:00:40.947
> 
> 标签：zend-framework2, zfcuser

刚刚接触了一个新的 ZF2 站点，我正在努力集成 ZfcUser 模块。我让它开箱即用，但我现在正在尝试自定义它。我能够创建自己的`Entity\User`，并添加字段并将它们保存到我的用户表中，但是我在删除不需要的字段时遇到了很多麻烦。

具体来说，我没有使用用户名或`display_name`字段。我有`enable_username`并`enable_display_name`设置为 false，它们没有显示在注册表单中，但是当我在数据库表本身中没有这些字段时出现错误：

```
"SQLSTATE[42S22]: Column not found: 1054 Unknown column 'username' in 'field list'" 
```

这似乎是因为我的用户实体实现`UserInterface`了包括这些字段，但这似乎是 UserHydrator 的要求。我很犹豫是否尝试自定义或覆盖太多，因为我还不精通 ZF2 或这些不同部分如何协同工作，但如果它们总是将这些额外字段保留在表中似乎很愚蠢为空。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T22:27:58.550

为用户使用您自己的实体

更改模块配置数组中的 zfcuser 实体 ->

```
'doctrine' => array(
    'driver' => array(
       'zfcuser_entity' => array(
            'class' => 'Doctrine\ORM\Mapping\Driver\AnnotationDriver',
            'paths' => __DIR__ . '/../src/YourModule/Entity',
        ),
     )
    ) 
```

并修改你想要的字段

# c# - 用户类的数据类型/类结构

> ID：15667249
> 
> 赞同：1
> 
> 时间：2013-03-27T19:00:58.540
> 
> 标签：c#, asp.net, .net, oop, class

这是一个新手问题，我正在设计一个包含用户详细信息的类。让我摸不着头脑的一部分是“许可”

这是场景。每个用户属于多个城市。在那个可以拥有各种权限的城市。

例如，John 在 NY 和 DC，在 NY 他拥有权限 1,2,3，在 DC 3,4

我不知道如何设计我的课程以考虑到这一点。

我的表，我没有设计）看起来像这样（带有一些示例数据）：

```
userID  City   permission
John    NY     1
John    NY     2
John    NY     3
John    DC     3
John    DC     4
Jane    DC     1
Jane    DC     2
Jane    NY     6 
```

在我的 C# 类中，我最初将它们分别写出来，如下所示：

```
 public class User
        {

            public string userid { get; set; }
            public string name{ get; set; } //from main user table
            public string address{ get; set; } //from main user table
            public List<string> Citites{ get; set; } //from usercitypermission table
            public List<string> userRole { get; set; }//from usercitypermission table

public User(string username)
    {
        this.userid = username;

        DataSet ds = new DataSet();
        SqlConnection conn = new SqlConnection(cCon.getConn());

        SqlCommand cmd = new SqlCommand("sp_getUserDetails", conn);

        // 2\. set the command object so it knows
        // to execute a stored procedure
        cmd.CommandType = CommandType.StoredProcedure;

        // 3\. add parameter to command, which
        // will be passed to the stored procedure
        cmd.Parameters.Add(
            new SqlParameter("@userName", username));

        try
        {
            // Open the connection and execute the Command
            conn.Open();
            SqlDataAdapter sqlDA = new SqlDataAdapter();

            sqlDA.SelectCommand = cmd;
            sqlDA.Fill(ds);
        }
        catch (Exception ex)
        {
            throw (ex);
        }
        finally
        {
            conn.Close();
        }

        this.userRole = new List<string>();
        foreach (DataTable DT in ds.Tables)
        {
            foreach (DataRow dr in DT.Rows)
            {
                this.userRole.Add(dr["permission"].ToString());
            }
        }
    } 
```

当我设置这些时，我只是在我的 上运行一个不同的`tblUserCityPermission`，所以我的 Cities 拥有一个不同`Cities`的用户列表（我没有为此发布代码，但它只是一个运行的存储过程，类似于那个上面）并且`userRole`持有该用户的所有权限（1-10）（如上所示），但它没有考虑该权限适用于哪个城市。

我希望这是有道理的。：-/

我想我的问题是，我如何设计课程以确保我的权限与用户所在的每个特定城市（或城市）相关联。我应该使用除此之外的类型`List`吗？我离这儿很远吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T19:10:30.647

您还需要为城市及其权限创建一个类。类似于以下内容：

```
class CityPermission
{
    public string Name;
    public List<int> Permissions{ get; set; }
} 
```

不，您拥有作为城市财产的权限。这又是用户的属性：

```
class User
{
    .
    .
    .
    public List<CityPermission> Citites{ get; set; }
    .
    .
    .
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-27T19:11:15.167

作为定义类型的替代方法，您可以使用[`Dictionary`](http://msdn.microsoft.com/en-ca/library/xfhwa508.aspx)：

```
public Dictionary<string, List<string>> Permissions { get; set; } 
```

其中键是城市名称，值是适用于该城市的权限列表。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-27T19:16:41.973

您可以将所有这些存储在多级字典中，如下所示：

```
 Dictionary<string, Dictionary<string, Dictionary<int, int>>> UserCityPermissions = new Dictionary<string, Dictionary<string, Dictionary<int, int>>>();
    UserCityPermissions.Add("John", new Dictionary<string, Dictionary<int, int>>());
    UserCityPermissions["John"].Add("NY", new Dictionary<int,int>());
    UserCityPermissions["John"]["NY"].Add(1, 1);
    UserCityPermissions["John"]["NY"].Add(2, 2);
    UserCityPermissions["John"]["NY"].Add(3, 3);
    UserCityPermissions["John"].Add("DC", new Dictionary<int, int>());
    UserCityPermissions["John"]["DC"].Add(3, 3);
    UserCityPermissions["John"]["DC"].Add(4, 4);
    UserCityPermissions.Add("Jane", new Dictionary<string, Dictionary<int, int>>());
    UserCityPermissions["Jane"].Add("DC", new Dictionary<int, int>());
    UserCityPermissions["Jane"]["DC"].Add(1, 1);
    UserCityPermissions["Jane"]["DC"].Add(2, 2);
    UserCityPermissions["Jane"].Add("NY", new Dictionary<int, int>());
    UserCityPermissions["Jane"]["NY"].Add(6, 6); 
```

# java - 从 Vague Stack Trace 中查找异常原因

> ID：15667252
> 
> 赞同：0
> 
> 时间：2013-03-27T19:01:07.743
> 
> 标签：java, android, exception, exception-handling

我有一个 Android 应用程序最近神秘地强制关闭了一些使用 4.x 设备的用户。查看异常堆栈，似乎错误发生在我的任何代码运行之前，但我认为我正在做一些导致这种情况的事情。

***我找到原因或堆栈的方式有问题吗？否则，如果这是一个完整的堆栈跟踪，Android 是否真的有可能在我的任何代码运行之前失败？***

我发现后者不太可能，因为我`UncaughtExceptionHandler`在 my`Application`的`onCreate()`方法中注册了 my ，并且我通常从我的用户那里获取文件。

我的错误记录代码如下：

我`Thread.UncaughtExceptionHandler`使用应用程序的 . 当发生错误时，我将异常信息写入登录`uncaughtException(Thread thread,Throwable ex)`。这就是我找到要打印的字符串的方式：

```
 // Get exception info

    String newLine = "\r\n";
    String message = "Message: " + ex.getMessage();
    String cause = "Cause: " + ex.getCause();
    StackTraceElement[] stes = ex.getStackTrace();
    String stack;

    // build stack trace

    stack = "Stack: " + newLine;

    for ( int i = 0; i < stes.length; i++ )
        {
        stack += stes[i].toString();
        stack += newLine;
        }

    // print out message
    // print out cause
    // print out stack 
```

将其输出到文件：

`Message: Unable to create application com.(Modified app name for anonimity).*.*Application: java.lang.IllegalArgumentException Cause: java.lang.IllegalArgumentException Stack: android.app.ActivityThread.handleBindApplication(ActivityThread.java:4254) android.app.ActivityThread.access$1400(ActivityThread.java:140) android.app.ActivityThread$H.handleMessage(ActivityThread.java:1297) android.os.Handler.dispatchMessage(Handler.java:99) android.os.Looper.loop(Looper.java:137) android.app.ActivityThread.main(ActivityThread.java:4921) java.lang.reflect.Method.invokeNative(Native Method) java.lang.reflect.Method.invoke(Method.java:511) com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:1038) com.android.internal.os.ZygoteInit.main(ZygoteInit.java:805) dalvik.system.NativeStart.main(Native Method)`

PS 是的，我知道 ACRA，但我现在不想使用它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T19:11:59.827

也许您的应用程序导致了一个异常，该异常被捕获然后重新抛出。

您只打印最后一个异常的 Stacktrace。也许这个异常有原因（`ex.getCause()`不是`null`）。在这种情况下，您还应该打印原因的堆栈跟踪（可能是原因的原因..）。

您不必自己执行此操作。`Throwable`有一个很好的方法可以将完整的堆栈跟踪和回溯打印到`PrintStream`：

```
public void printStackTrace(PrintStream s) 
```

之后，您只需将其写入`printStream`您的日志。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-07T16:17:39.090

@micha 仍然是公认的答案，但我想我会根据他的答案展示我修改后的解决方案。

```
 @Override
public void uncaughtException(Thread thread, Throwable ex)
    {
    // This needs to be AIR TIGHT!. Do everything in a try-catch to prevent
    // any exceptions from EVER occurring here. If an error does occur here 
    // then we will hang
    // indefinitely and get an ANR.
    try
        {
        FileManager fileMgr = FileManager.getInstance( myApp );
        String logName = "ErrorLog.log";

        // print exception to byte array

        ByteArrayOutputStream out = new ByteArrayOutputStream();
        PrintStream printer = new PrintStream( out );
        ex.printStackTrace( printer );

        // write out byte array as string to log file.

        fileMgr.writeToLogFile( logName, out.toString(), false );
        }
    catch ( Exception e )
        {
        }

    // This allows the system to handle to exception and close the App.

    defaultHandler.uncaughtException( thread, ex );
    } 
```

我的自定义`FileManager`类执行对文件的实际写入，但我使用`Throwable`'s`printStackTrace()`来获取完整的堆栈跟踪，这比我自己可以完成的要深得多。

# c++ - 处理夏令时 - C++

> ID：15667253
> 
> 赞同：2
> 
> 时间：2013-03-27T19:01:08.520
> 
> 标签：c++, time, timezone, dst, ctime

给定输入日期和时间（以字符串格式），我试图使用like中`time`给出的函数获取它的纪元时间。将纪元时间转换回日期和时间会导致日期和时间比原始时间少一小时。我经历了一些讨论，说在夏令时的情况下可能会调整一小时。这是代码： `ctime``mktime``time_t`

```
//sample strptime program.

#include <iostream>
#include <ctime>
#include <string>
using namespace std;

long parseTime(string time) {

  cout << "Time entered = " << time << endl;

  long timeSinceEpoch;

  struct tm t;

  if(time.find("/") != string::npos) {
    //format of date is mm/dd/yyyy. followed by clock in hh:mm (24 hour clock).
    if(strptime(time.c_str(), "%m/%e/%Y %H:%M", &t) == NULL) {
      cout << "Error. Check string for formatting." << endl;
    }
  } else if(time.find("-") != string::npos) {
    //format of date is yyyy-mm-dd hh:mm:ss (hh in 24 hour clock format).
    cout << "I am here." << endl;
    if(strptime(time.c_str(), "%Y-%m-%e %H:%M:%S", &t) == NULL) {
      cout << "Error. Check string for formatting of new date." << endl;
    }
  }

  cout << "Details of the time structure:" << endl;
  cout << "Years since 1900 = " << t.tm_year << endl;
  cout << "Months since January = " << t.tm_mon << endl;
  cout << "Day of the month = " << t.tm_mday << endl;
  cout << "Hour = " << t.tm_hour << " Minute = " << t.tm_min << " second = " << t.tm_sec << endl;

  timeSinceEpoch = mktime(&t);
  time_t temp = mktime(&t);
  cout << "Time since epoch = " << timeSinceEpoch << endl;

  cout << "Reconverting to the time structure:" << endl;
  struct tm* t2 = localtime(&temp);
  cout << "Details of the time structure:" << endl;
  cout << "Years since 1900 = " << t2->tm_year << endl;
  cout << "Months since January = " << t2->tm_mon << endl;
  cout << "Day of the month = " << t2->tm_mday << endl;
  cout << "Hour = " << t2->tm_hour << " Minute = " << t2->tm_min << " second = " << t2->tm_sec << endl;

  return timeSinceEpoch;
}

int main(int argc, char *argv[]) {

  string date, t;
  cout << "Enter date: " << endl;
  cin >> date;
  cout << "Enter time: " << endl;
  cin >> t;

  struct tm time;
  string overall = date + " " + t;

  long result = parseTime(overall);
  cout << "Time in date + time = " << overall << " and since epoch = " << result << endl;

return 0;
} 
```

麻烦的输入是：日期：2013-03-11 时间：04:41:53

我的问题：
1\. 检查`tm_idst`标志返回非零，表示 DST 有效。但是，我怎么知道正在谈论什么时区？
2\. 上面给出的时间戳可能与我所在的时区不同。有没有办法指定时区以便`tm_idst`正确设置标志？
3\. 不确定时间戳记录在哪个时区时，如何处理夏令时？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T19:36:17.103

Plain`C++`的时区数据非常稀疏，并且在要格式化的时间中没有时区规范，有几个时期您会得到不一致的结果 - 例如，时钟回溯后的重复时间。这就是为什么总是建议记录所有时间戳的原因`UTC`- 即**永远不要**将时区应用于记录的时间戳，将其记录在 GMT 中，然后将该值作为显示变量来回切换，您可以完全控制它。

Linux/BSD 有一些额外的字段可用于确定时区和与 UTC 的偏移量 - 例如在 linux 上它是`__tm_gmtoff`字段，而在 BSD(/Mac OS X) 中它被称为`tm_gmtoff`.

`__tm_zone`在 linux 和BSD(/Mac OS X) 上还有一个标记时区的附加字段`tm_zone`，但该字段仅在您获取本地时间时才会填充。

我稍微改变了你的例子，得到了以下输出：

```
Time entered = 2013-04-05 15:00
I am here.
Error. Check string for formatting of new date.
Details of the time structure:
Years since 1900 = 113
Months since January = 3
Day of the month = 5
Hour = 15 Minute = 0 second = 0
gmtoff = 0
Time since epoch = 1365174000
Reconverting to the time structure:
Details of the time structure:
Years since 1900 = 113
Months since January = 3
Day of the month = 5
Hour = 16 Minute = 0 second = 0
gmtoff = 3600
Zone = IST
Time in date + time = 2013-04-05 15:00 and since epoch = 1365174000 
```

但是，如果您在 Windows 中使用此结构，您将不得不使用另一种机制，因为它没有这两个额外的字段。

# java - 关注 Android HTTP 示例/教程 - 为网络活动实现异步任务的问题

> ID：15667255
> 
> 赞同：-2
> 
> 时间：2013-03-27T19:01:17.747
> 
> 标签：java, android, http, post

我正在尝试遵循有关发布 HTTP 数据的教程，但是由于 IO 线程上的网络活动，它在主线程上强制关闭，所以我尝试实现 AsyncTask （正如其他几个有用的 SO 用户所建议的那样 - 但是我已经屠杀了代码，整个辣酱玉米饼馅的力量向我逼近。）

: (

[http://webtutsdepot.com/2011/11/15/android-tutorial-how-to-post-data-from-an-android-app-to-a-website/](http://webtutsdepot.com/2011/11/15/android-tutorial-how-to-post-data-from-an-android-app-to-a-website/)

提前致谢！

菜鸟忍者

爪哇：

```
import java.io.IOException;
import org.apache.http.client.ClientProtocolException;

import java.util.ArrayList;
import android.os.AsyncTask;
import java.util.List;
import org.apache.http.client.HttpClient;
import org.apache.http.client.methods.HttpPost;
import org.apache.http.impl.client.DefaultHttpClient;

import org.apache.http.NameValuePair;
import org.apache.http.client.entity.UrlEncodedFormEntity;
import org.apache.http.message.BasicNameValuePair;

// import everything you need
import android.app.Activity;
import android.os.Bundle;
import android.view.View;
import android.widget.Button;
import android.widget.EditText;
import android.widget.Toast;

public class DeviceConfig  extends Activity {

    AsyncTask<Object, Object, Object> saveContactTask = 
            new AsyncTask<Object, Object, Object>() 
            {
               @Override
               protected Object doInBackground(Object... params) 
               {

                  return null;
               }

               @Override
               protected void onPostExecute(Object result) 
               {

               }

               @Override
               protected void saveContactTask.execute()
               {

               }

            ; 

            @Override
            protected Object doInBackground(Object... params) 
            {

               return null; 

            }
    Button sendButton;

    EditText msgTextField;

    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState)
    {
        super.onCreate(savedInstanceState);
        // load the layout
        setContentView(R.layout.deviceconfig);        

        // make message text field object
        msgTextField = (EditText) findViewById(R.id.msgTextField);
        // make send button object
        sendButton = (Button) findViewById(R.id.sendButton);

    }

    // this is the function that gets called when you click the button
    public void send(View v);
    protected void saveContactTask.execute();

        // get the message from the message text box
        String msg = msgTextField.getText().toString();  {

        // make sure the fields are not empty
        if (msg.length()>0)
        {
            HttpClient httpclient = new DefaultHttpClient();
            HttpPost httppost = new HttpPost("http://gamedemo.hostzi.com/test.php");
         try {
           List<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>(2);
           nameValuePairs.add(new BasicNameValuePair("id", "12345"));
           nameValuePairs.add(new BasicNameValuePair("message", msg));
           httppost.setEntity(new UrlEncodedFormEntity(nameValuePairs));
           httpclient.execute(httppost);
           msgTextField.setText(""); // clear text box
         } catch (ClientProtocolException e) {
             // TODO Auto-generated catch block
         } catch (IOException e) {
             // TODO Auto-generated catch block
         }

        }
        else
        {
            // display message if text fields are empty
            Toast.makeText(getBaseContext(),"All field are required",Toast.LENGTH_SHORT).show();
        }

    }

} 
```

XML:

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:orientation="vertical"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    >
    <TextView
        android:text="Message"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        /> 

    <EditText
        android:id="@+id/msgTextField"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        />
    <Button
        android:text="Send"
        android:id="@+id/sendButton"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:onClick="send"
        /> 

</LinearLayout> 
```

PHP：

```
<?php
// get the "message" variable from the post request
// this is the data coming from the Android app
$message=$_POST["message"]; 
// specify the file where we will save the contents of the variable message
$filename="androidmessages.html";
// write (append) the data to the file
file_put_contents($filename,$message."<br />",FILE_APPEND);
// load the contents of the file to a variable
$androidmessages=file_get_contents($filename);
// display the contents of the variable (which has the contents of the file)
echo $androidmessages;
?> 
```

日志猫：

```
 03-27 16:30:00.775: D/dalvikvm(14566): GC_FOR_ALLOC freed 88K, 3% free 7355K/7568K, paused 36ms, total 36ms
03-27 16:30:00.785: I/dalvikvm-heap(14566): Grow heap (frag case) to 10.818MB for 3686416-byte allocation
03-27 16:30:00.825: D/dalvikvm(14566): GC_FOR_ALLOC freed 1K, 2% free 10953K/11172K, paused 35ms, total 35ms
03-27 16:30:00.845: D/dalvikvm(14566): GC_CONCURRENT freed <1K, 2% free 10953K/11172K, paused 3ms+3ms, total 29ms
03-27 16:30:01.095: D/dalvikvm(14566): GC_FOR_ALLOC freed <1K, 2% free 10953K/11172K, paused 16ms, total 16ms
03-27 16:30:01.105: I/dalvikvm-heap(14566): Grow heap (frag case) to 17.043MB for 6529744-byte allocation
03-27 16:30:01.125: D/dalvikvm(14566): GC_FOR_ALLOC freed 0K, 2% free 17330K/17552K, paused 16ms, total 16ms
03-27 16:30:01.145: D/dalvikvm(14566): GC_CONCURRENT freed 0K, 2% free 17330K/17552K, paused 3ms+3ms, total 23ms
03-27 16:30:01.275: D/libEGL(14566): loaded /system/lib/egl/libEGL_tegra.so
03-27 16:30:01.285: D/libEGL(14566): loaded /system/lib/egl/libGLESv1_CM_tegra.so
03-27 16:30:01.295: D/libEGL(14566): loaded /system/lib/egl/libGLESv2_tegra.so
03-27 16:30:01.325: D/OpenGLRenderer(14566): Enabling debug mode 0
03-27 16:30:03.325: D/AndroidRuntime(14566): Shutting down VM
03-27 16:30:03.325: W/dalvikvm(14566): threadid=1: thread exiting with uncaught exception (group=0x41cd2930)
03-27 16:30:03.325: E/AndroidRuntime(14566): FATAL EXCEPTION: main
03-27 16:30:03.325: E/AndroidRuntime(14566): java.lang.Error: Unresolved compilation problems: 
03-27 16:30:03.325: E/AndroidRuntime(14566):    Syntax error on token ".", ; expected
03-27 16:30:03.325: E/AndroidRuntime(14566):    Syntax error, insert ";" to complete FieldDeclaration
03-27 16:30:03.325: E/AndroidRuntime(14566):    Syntax error, insert "}" to complete ClassBody
03-27 16:30:03.325: E/AndroidRuntime(14566):    at com.nfc.linkingmanager.DeviceConfig.<init>(DeviceConfig.java:48)
03-27 16:30:03.325: E/AndroidRuntime(14566):    at java.lang.Class.newInstanceImpl(Native Method)
03-27 16:30:03.325: E/AndroidRuntime(14566):    at java.lang.Class.newInstance(Class.java:1319)
03-27 16:30:03.325: E/AndroidRuntime(14566):    at android.app.Instrumentation.newActivity(Instrumentation.java:1054)
03-27 16:30:03.325: E/AndroidRuntime(14566):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2097)
03-27 16:30:03.325: E/AndroidRuntime(14566):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2230)
03-27 16:30:03.325: E/AndroidRuntime(14566):    at android.app.ActivityThread.access$600(ActivityThread.java:141)
03-27 16:30:03.325: E/AndroidRuntime(14566):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1234)
03-27 16:30:03.325: E/AndroidRuntime(14566):    at android.os.Handler.dispatchMessage(Handler.java:99)
03-27 16:30:03.325: E/AndroidRuntime(14566):    at android.os.Looper.loop(Looper.java:137)
03-27 16:30:03.325: E/AndroidRuntime(14566):    at android.app.ActivityThread.main(ActivityThread.java:5041)
03-27 16:30:03.325: E/AndroidRuntime(14566):    at java.lang.reflect.Method.invokeNative(Native Method)
03-27 16:30:03.325: E/AndroidRuntime(14566):    at java.lang.reflect.Method.invoke(Method.java:511)
03-27 16:30:03.325: E/AndroidRuntime(14566):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
03-27 16:30:03.325: E/AndroidRuntime(14566):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
03-27 16:30:03.325: E/AndroidRuntime(14566):    at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T19:03:26.060

> NetworkOnMainThreadException

您遇到异常是因为您在不允许 android 版本 >= 3.0 的主线程上进行网络操作。

使用 AsyncTask 进行网络操作。

用方法做你的网络操作`doInBackground()`。

阅读[AsyncTask](http://developer.android.com/reference/android/os/AsyncTask.html)的 android 文档。

# php - 从 sql 文件加载时，mysql_query 不能部分工作

> ID：15667256
> 
> 赞同：1
> 
> 时间：2013-03-27T19:01:20.507
> 
> 标签：php, mysql, phpmyadmin

我已将数据库的内容以如下形式转储到 sql 文件中

```
insert into `a` values
(17,11,5),
(18,12,7),
(19,12,10),
(21,14,45),
(22,15,46),
(24,16,46),
(25,16,49),
(26,17,21),
(27,17,30),
(28,17,45),
(29,17,54),
(30,18,32),
(31,18,35),
(32,19,23),
(33,19,27),
(34,19,54),
(35,20,53),
(36,21,32),
(37,21,35),
(38,21,45),
(39,22,23),
(40,22,30),
(41,22,45),
(57,24,19),
(58,25,46),
(59,26,39),
(60,27,49),
(61,27,56),
(62,28,34);

insert into `b` values (14,'2009-01-06',''),
(15,'2009-02-01',''),
(16,'2009-03-01',''),
(17,'2009-03-25',''),
(18,'2009-04-05',''),
(19,'2009-04-17',''),
(20,'2009-04-18',''),
(21,'2009-04-19',''),
(22,'2009-04-23',''),
(24,'2009-07-05',''),
(25,'2009-08-02',''),
(26,'2009-08-07',''),
(27,'2009-09-06',''),
(28,'2009-09-14','');

etc.. 
```

我有 4 个这样的表，没有外键约束。然后我尝试将数据上传到数据库（mysql）中。我读取了文件的内容，将每个表的插入传递到一个数组中，然后对每个元素执行 mysql_query：

```
$sqlArray = explode(';',$sqlFile); 

 for($i=0;$i<sizeof($sqlArray);$i++){
   mysql_query($sqlArray[$i]) or die ('Error: '.mysql_error());;
 } 
```

结果是插入了最后三个表，但没有插入第一个，错误是：

```
You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near ' insert into `a` values (17,11,5), (18,12,7), (19,12,10), (21,14,4' at line 1 
```

我验证了 $sqlArray 具有正确的包含，并且查询是正确的并且可以从 phpmyadmin 运行。

问题似乎与第一个表无关（即即使`b`是第一个表也会显示），并且它似乎总是在中间“剪切”查询（或在将近 70 个字符之后）。

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T19:32:41.077

您的第二个语句有一个错字（“int”应该是“into”）：

```
insert int `b` values (14,'2009-01-06',''), 
```

或者，如果这不是问题，请尝试使用单独的插入语句来获得更清晰的错误消息：

```
insert into `a` values (17,11,5);
insert into `a` values (118,12,7);
... 
```

我在一些旧版本的 MySQL 上体验过它们不喜欢扩展插入。您还可以尝试使用列的真实名称显式指定列名称。如果这些表中有超过 3 个列（例如自动增量列），这将很有用。

```
insert into `a` (`[column1name]`, `[column2name]`, `[column3name]`) values (17,11,5); 
```

# csv - 如何使用 d3.js 从 CSV 文件制作散点图？

> ID：15667257
> 
> 赞同：1
> 
> 时间：2013-03-27T19:01:21.567
> 
> 标签：csv, d3.js, visualization, scatter-plot

我对 d3.js 很陌生。我正在尝试使用 csv 文件中存在的数据制作散点图。在 csv 文件中，我使用了两列中的数据。

```
 d3.csv("test.csv",function (data) {

  var margin = {top: 30, right: 10, bottom: 50, left: 60},
        width = 960 - margin.left - margin.right,
        height = 500 - margin.top - margin.bottom;

        var xMax = d3.max(data, function(d) { return +d.Survivaltime; }),
        xMin = 0,
        yMax = d3.max(data, function(d) { return +d.Year; }),
        yMin = 1950;

        //Define scales
    var x = d3.scale.linear()
        .domain([xMin, xMax])
        .range([0, width]);

    var y = d3.scale.linear()
        .domain([yMin, yMax])
        .range([height, 0]);
});

// the chart object, includes all margins
var chart = d3.select('body')
.append('svg:svg')
.attr('width', width + margin.right + margin.left)
.attr('height', height + margin.top + margin.bottom)
.attr('class', 'chart')

// the main object where the chart and axis will be drawn
var main = chart.append('g')
.attr('transform', 'translate(' + margin.left + ',' + margin.top + ')')
.attr('width', width)
.attr('height', height)
.attr('class', 'main')   

// draw the x axis
var xAxis = d3.svg.axis()
.scale(x)
.orient('bottom');
.tickSize(-height)
.tickFormat(d3.format("s"));

main.append('g')
.attr('transform', 'translate(0,' + height + ')')
.attr('class', 'main axis date')
.call(xAxis);

// draw the y axis
var yAxis = d3.svg.axis()
.scale(y)
.orient('left');
.ticks(5)
.tickSize(-width)
.tickFormat(d3.format("s"));

main.append('g')
.attr('transform', 'translate(0,0)')
.attr('class', 'main axis date')
.call(yAxis);

// draw the graph object
var svg = main.append("svg:g"); 

g.selectAll("scatter-dots")
  .data(d.Year)  // using the values in the ydata array
  .enter().append("svg:circle")  // create a new circle for each value
      .attr("cy", function (d) { return y(d.Year); } ) // translate y value to a pixel
      .attr("cx", function (d) { return x(d.Survivaltime); } ) // translate x value
      .attr("r", 10) // radius of circle
      .style("opacity", 0.6); // opacity of circle 
```

这是 csv 文件的链接：

[http://bit.ly/14oLdml](http://bit.ly/14oLdml)

请帮我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T19:38:51.597

大部分看起来都不错。我能看到的唯一问题（尽管我可能还缺少其他问题）接近尾声：

```
// draw the graph object
//var svg = main.append("svg:g");// <---- this is causing a bug. Should be:
var g = main.append("svg:g"); 
```

然后修复：

```
g.selectAll(".scatter-dots"); // <---- added a period before scatter-dots 
```

另一件事不会破坏您的代码，但应该修复：

在你之后`.append("svg:circle")`，你应该打电话`.attr("class", "scatter-dots")`给它。

# php - php base64解码函数无法解码base64图像字符串

> ID：15667258
> 
> 赞同：1
> 
> 时间：2013-03-27T19:01:24.090
> 
> 标签：php, javascript, image, xhtml, base64

由于`ie7`&`ie8`默认情况下无法解码 base64 图像字符串，我一直在寻找一种替代方法。在谷歌搜索该问题后，我在[http://dean.edwards.name/weblog/2005/06/base64-ie/](http://dean.edwards.name/weblog/2005/06/base64-ie/)找到了一个很好的教程。

据我了解，解码过程由两个简短的脚本组成，如下所示：

A.php **base64解码函数**

`base64.php`按照作者的指导命名

```
<?php
$data = split(";", $_SERVER["QUERY_STRING"]);
$type = $data[0];
$data = split(",", $data[1]);
header("Content-type: ".$type);
echo base64_decode($data[1]);
?> 
```

B. **javascript**

它应该插入到嵌入base64图像字符串的页面的head标签中，最后应该将图像字符串传递`base64.php`给处理和解码。

```
<script type="text/javascript">
// a regular expression to test for Base64 data
var BASE64_DATA = /^data:.*;base64/i;
// path to the PHP module that will decode the encoded data
var base64Path = "base64.php";
function fixBase64(img) {
  // check the image source
  if (BASE64_DATA.png(img.src)) {
    // pass the data to the PHP routine
    img.src = base64Path + "?" + img.src.slice(5);
  }
};
// fix images on page load
onload = function() {
  for (var i = 0; i < document.images.length; i++) {
    fixBase64(document.images[i]);
  }
};
</script> 
```

不幸的是，在我的情况下，php base64 decode 函数无法将图像字符串解码为`ie7`& `ie8`。

我的文档类型是`DTD XHTML 1.0 Transitional`& `charset=utf-8`。

知道这里出了什么问题吗？

**演示链接：**

base64-string-without-php-decoder：[http ://silentpond.eu5.org/base64-string-without-php-decoder.php](http://silentpond.eu5.org/base64-string-without-php-decoder.php)

base64-string-with-php-decoder：[http ://silentpond.eu5.org/base64-string-with-php-decoder.php](http://silentpond.eu5.org/base64-string-with-php-decoder.php)

谢谢，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T19:11:36.077

在 IE 中，至少在版本 8 和更早版本中。url 的最大长度约为 2047 字节。更多信息可以在这里找到：http: [//support.microsoft.com/kb/208427](http://support.microsoft.com/kb/208427)

# gcc - 为没有构建环境的旧 Linux 系统构建 strace

> ID：15667262
> 
> 赞同：1
> 
> 时间：2013-03-27T19:01:36.590
> 
> 标签：gcc, libc

我有一点问题。我需要使用 strace 实用程序来找出命令在较旧的 Linux 系统上崩溃的原因。不幸的是，我在那个系统上没有 strace，也没有 gcc/binutils。

我尝试在当前的 Debian 系统上静态构建应用程序，但调用 getpwnam 需要动态加载编译时使用的 libc 版本。这很好，但是由于旧系统上的实用程序都是使用旧版本的 libc 构建的，因此在该系统上放置新的 libc 会破坏其他一切。

如果没有下载和安装旧的 Linux 发行版然后进行构建，有没有更简单的方法来解决这个问题？该系统上的原始发行版目前未知，我研究得越多，它看起来就像一个巨大的鸡与蛋的问题。任何提示将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T02:36:29.550

使用过时的 Linux 系统绝不是明智之举……可以升级吗？如果不是，为什么不呢？什么是失败，以及如何？有机会更新吗？

应该有一个名为 /etc/release 或类似文件的文件，它应该让您了解发行版和版本。或者`uname -a`可能会提供有关分布的线索。如果它不起作用，请尝试查看诸如 rpm、apt-get 之类的命令或其他包管理命令之一是否可用，这将缩小分发范围。在 Google 上搜索一些已安装的软件包和版本可能有助于缩小发行版本的范围。

了解发行版和版本，您可能可以获得 strace （也许还有其他需要的包）。许多发行版保留了存档版本（至少是旧版本的原始安装媒体）。

# python - 如何使用 Python 的 ElementTree 遍历所有 XML 元素并将逻辑应用于每个元素的值

> ID：15667263
> 
> 赞同：0
> 
> 时间：2013-03-27T19:01:38.717
> 
> 标签：python, xml, elementtree, celementtree

我目前正在尝试将逻辑应用于 XML 文件中的元素值。具体来说，我试图将所有值编码为 UTF-8，同时不触及任何元素名称/属性本身。

这是示例 XML：

```
<?xml version="1.0"?>
<sd_1>
    <sd_2>
        <sd_3>\311 is a fancy kind of E</sd_3>
    </sd_2>
</sd_1> 
```

目前我已经尝试了 3 种方法来实现这一点，但没有成功：

首先，我尝试循环遍历每个元素，使用 .text 检索值并使用 .parse：

```
import xml.etree.ElementTree as ET

et = ET.parse('xml/test.xml')

for child in et.getroot():
    for core in child:
        core_value = str(core.text)
        core.text = core_value.encode('utf-8')

et.write('output.xml') 
```

这会导致 XML 文件没有正确更改文本 \311，它只是保持原样。

接下来我用 cElementTree 尝试了 .iterparse 无济于事：

```
import xml.etree.cElementTree as etree

xml_file_path = 'xml/test.xml'
with open(xml_file_path) as xml_file:
    tree = etree.iterparse(xml_file) 
    for items in tree:
        for item in items:
            print item.text

etree.write('output1.xml') 
```

这导致：

```
 "...print item.text\n', "AttributeError: 'str' object has no attribute 'text'..." 
```

不知道我在那里做错了什么，我已经看到了多个具有相同排列的示例，但是当我通过没有 .text 的元素打印时，我看到开头字符串值为“end”的元组，我认为那是导致此方法出现问题。

如何正确迭代我的元素，并且不指定元素名称，例如 .findall()，将逻辑应用于每个元素中包含的值，以便当我将 xml 写入文件时，它会保存程序迭代时所做的更改元素值？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-27T20:03:38.470

这是你想要的？

```
import xml.etree.ElementTree as ET

et = ET.parse('xml/test.xml')

for child in et.getroot():
    for core in child:
        core_value = str(core.text)
        core.text = core_value.decode('unicode-escape')

et.write('output.xml') 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T20:20:30.540

这是个有趣的问题。让我们关注您提出的第一种方法，因为这应该是解决此问题的完全好方法。当我一一打印出这些行时，这是我得到的：

```
>>> core_value
'\\311 is a fancy kind of E' 
```

对我来说发生的事情是该字符被读取为文字“\”，必须对其进行转义才能打印。如果我们将转义字符 ( `\\`) 更改为非转义字符 ( `\`)，我们会得到以下结果：

```
>>> cv = core_value.replace('\\311','\311')
'\xc9 is a fancy kind of E'
>>> print cv
É is a fancy kind of E 
```

这里奇怪的是你不知道原始文件`\311`中什么时候“应该是”一个或四个字符。如果您知道这些都将是一个字符，则可以根据此答案编写一些卑鄙的代码：

[Python Unicode，在普通字符串中有 unicode 数字，想要打印 unicode](https://stackoverflow.com/questions/8021331/python-unicode-have-unicode-number-in-normal-string-want-to-print-unicode)

将 a 之后的所有内容`\`转换为正确的 unicode 字符并删除`\`.

# sql - 如何在 SQL 中对组总数求和？

> ID：15667264
> 
> 赞同：0
> 
> 时间：2013-03-27T19:01:38.930
> 
> 标签：sql, sql-server

我需要每个具有多个行项目的业务的总收入。数据示例：

![在此处输入图像描述](../Images/53fccb7ebe20dc1ff44f30dce0ac1a55.png)

期望的输出：
![在此处输入图像描述](../Images/f8e570ee506599817e1c9a29cea90332.png)

这是我所拥有的不正确的：

```
SELECT  business_name,  sum(revenue)  
FROM business_table
GROUP BY  business_name 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-27T19:06:22.057

你的查询似乎很完美。只有您可以为第二列添加名称：

```
SELECT  business_name,  sum(revenue) revenue
FROM business_table
GROUP BY  business_name 
```

# javascript - 将信息框添加到 Google 路线

> ID：15667266
> 
> 赞同：0
> 
> 时间：2013-03-27T19:01:41.040
> 
> 标签：javascript, google-maps

我无法将可点击的信息框添加到我的谷歌地图路线中。

我可以让它在初始化函数中工作，但是当我通过我的 xml 文件添加额外的标记时，我需要让它工作。请参阅下面的完整代码。

谢谢你的帮助..

```
var directionDisplay;
var directionsService = new google.maps.DirectionsService();
var stepDisplay;
var map;
var markersArray;
var markers = [];
var infowindow;

function initialize() {
var latlng = new google.maps.LatLng( <? echo $lat; ?> , <? echo $lon; ?> );
var rendererOptions = {
    draggable: true
};
directionsDisplay = new google.maps.DirectionsRenderer(rendererOptions);
var myOptions = {
    zoom: 14,
    center: latlng,
    mapTypeId: google.maps.MapTypeId.ROADMAP,
    mapTypeControl: false
};
map = new google.maps.Map(document.getElementById("map_canvas"), myOptions);
directionsDisplay.setMap(map);
directionsDisplay.setPanel(document.getElementById("directionsPanel"));
}

//ADD LIST
google.maps.event.addListener(marker, 'click', function() {
infowindow.open(map,marker);
});

function calcRoute() {
var travelMode = 'DRIVING';
var start = $("#routeStart").val();
var via = $("#routeVia2").val();
var end = $("#routeVia").val();
var waypoints = [];
if (via != '') {
    waypoints.push({
        location: via,
        stopover: true
    });
}
var request = {
    origin: start,
    destination: end,
    waypoints: waypoints,
    unitSystem: google.maps.UnitSystem.IMPERIAL,
    travelMode: google.maps.DirectionsTravelMode[travelMode]
};

directionsService.route(request, function (response, status) {
    if (status == google.maps.DirectionsStatus.OK) {            
       directionsDisplay.setDirections(response);
        var myRoute = response.routes[0];
        var txtDir = '';
        for (var i = 0; i < myRoute.legs[0].steps.length; i++) {
            txtDir += myRoute.legs[0].steps[i].path + "";
        }
        var strLAT = "" + txtDir;
        //---------------------------------------------------------     
        //SEND DATA TO URL
        var DATET = $("#DATET").val();
        var TIMET = $("#TIMET").val();
        var xmlHttp = getXMLHttp();
        xmlHttp.onreadystatechange = function () {
            if (xmlHttp.readyState == 4) {
                HandleResponse(xmlHttp.responseText);
            }
        }
        xmlHttp.open("POST", 'MYPHPFILE', true);
        xmlHttp.setRequestHeader("Content-type", "application/x-www-form-urlencoded");
        xmlHttp.send("LATLON=" + strLAT + "&getURL=" + end + "&TIMET=" + TIMET + "&DATET=" + DATET);
        //-------------------------------------------------------
        //RETURN DATA FOR PLACE MARKERS 
       var getURL = "MYXMLFILE" + end + ".xml";

       jQuery.get(getURL, function(data) {
       jQuery(data).find("marker").each(function() {
       var eachMarker = jQuery(this);
       var markerCoords = new google.maps.LatLng(
       parseFloat(eachMarker.find("Lat").text()),
       parseFloat(eachMarker.find("Lng").text())
       );
       var header  = eachMarker.find("title").text();
       var content = eachMarker.find("Content").text();
       var wxicon  = eachMarker.find("icon").text();
       //-------------------------------------------------------------------------- 
       //ADD INFO BOXES
       var contentString = "HELLO WORLD";
       var infowindow = new google.maps.InfoWindow({
       content: contentString,
       });         
       //--------------------------------------------------------------------------
        marker = new google.maps.Marker({
        position: markerCoords,
        icon: wxicon,
        map: map,
        animation: google.maps.Animation.DROP,
        title: header,
        });
        });
        });
        //--------------------------------------------------------------------------
    } else {
        //ERROR MESSAGES
        if (status == 'ZERO_RESULTS') {
            alert('No route could be found between the origin and destination.');
        } else if (status == 'INVALID_REQUEST') {
            alert('The DirectionsRequest provided was invalid.');
        } else {
            alert("There was an unknown error in your request. Requeststatus: nn" + status);
        }
    }
});
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T19:57:29.167

已修复，我将标记更改为此，见下文。回答[http://you.arenot.me/2010/06/29/google-maps-api-v3-0-multiple-markers-multiple-infowindows/](http://you.arenot.me/2010/06/29/google-maps-api-v3-0-multiple-markers-multiple-infowindows/)

```
 //ADD INFO BOX
       var contentString = "HELLO WORLD";
       var infowindow = new google.maps.InfoWindow({
       content: htmls,
       });  
       //--------------------------------------------------------------------------
        marker = new google.maps.Marker({
        position: markerCoords,
        icon: wxicon,
        map: map,
        animation: google.maps.Animation.DROP,
        title: header,
        html: htmls,
        });
        var contentString = "HELLO WORLD";
        var infowindow = new google.maps.InfoWindow({
        content: htmls,
        }); 
        google.maps.event.addListener(marker, 'click', function () {
        infowindow.setContent(this.html);
        infowindow.open(map, this);
        });
        }); 
        }); 
```

# ios - NSString 到 NSDate 错误结果

> ID：15667271
> 
> 赞同：-3
> 
> 时间：2013-03-27T19:01:47.500
> 
> 标签：ios, nsdate

在我的 iOS 应用程序中，我试图将字符串格式的日期转换为 NSDate。我首先将字符串以正确的格式放入，但在将其更改为 NSDate 时，我得到了不同的输出日期。在下面的代码中，我放置了两个 NSLog，它们显示字符串与日期格式匹配，所以我不知道为什么输出不同。

```
NSString * list = @"Sun, 24 Mar 2013 21:08:02 +0000";
NSArray *listItems = [list componentsSeparatedByString:@", "];
//24 Mar 2013 21:08:02 +0000

NSArray *listItems1 = [[listItems objectAtIndex:1] componentsSeparatedByString:@" "];
NSString *timeSubString = [[listItems1 objectAtIndex:3] substringWithRange:NSMakeRange(0,5)];
NSString * newConcat = [NSString stringWithFormat:@"%@-%@-%@ %@",[listItems1 objectAtIndex:0],[listItems1 objectAtIndex:1],[listItems1 objectAtIndex:2], timeSubString];
NSLog(@"***DATE STRING***: %@",newConcat);
//***DATE STRING***: 24-Mar-2013 21:08

NSDateFormatter* fmt = [NSDateFormatter new];
[fmt setDateFormat:@"dd-MMM-YYYY HH:mm"];
NSDate* date = [fmt dateFromString:newConcat];
NSLog(@"***OUTPUT DATE***: %@",date);
//***OUTPUT DATE***: 2013-01-06 02:08:00 +0000
NSLog(@"***DATE STRING***: %@", [fmt stringFromDate:date]);
//***DATE STRING***: 05-Jan-2013 21:08 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T19:28:51.947

你可以这样做

```
NSString *dateString = @"Sun, 24 Mar 2013 21:08:02 +0000";
NSDateFormatter *dateFormatter = [NSDateFormatter new];
NSLocale *enUSPOSIXLocale = [[NSLocale alloc] initWithLocaleIdentifier:@"en_US_POSIX"];
[dateFormatter setLocale:enUSPOSIXLocale];
[dateFormatter setDateFormat:@"EEE, dd MMM yyyy HH:mm:ss Z"];

NSDate *date = [dateFormatter dateFromString:dateString];
[dateFormatter setDateFormat:@"dd-MMM-yyyy HH:mm"];

NSString *newDateString = [dateFormatter stringFromDate:date]; 
```

# excel - 通过宏复制excel中的值

> ID：15667290
> 
> 赞同：0
> 
> 时间：2013-03-27T19:03:10.417
> 
> 标签：excel, vba

宏的新手，我正在寻找一些见解。

我希望根据所选框中的值，在单独的工作表上的表格中显示单元格信息。

我有 5 个单元格，它们根据从名为 Movies 的表中提取的评级返回电影的标题。我旁边还有 5 个返回年份的单元格，然后在旁边有 5 个带有评级的单元格。这是它的样子：

```
 A                        B      C
   ______________________________________________________
1 | Eternal Sunshine of the Spotless Mind  |  2004 | 8.5 |
2 | 3 Idiots                               |  2009 | 8.2 |
3 | Before Sunrise                         |  1995 | 8.1 |
4 | Groundhog Day                          |  1993 | 8.1 |
5 | (500) Days of Summer                   |  2009 | 8.0 | 
```

我想让它在选择单元格 A1 时从电影工作表中的电影表中拉出。

```
Worksheet = movies
Table = Movies
Column = Plot 
```

我需要能够匹配标题和年份，因为我的电影表中有多个同名电影。

这是迄今为止我创建的用于测试的宏（Result1 是 A1 的名称，Result2 是 A2 的名称，等等）：

```
Private Sub Worksheet_SelectionChange(ByVal Target As Excel.Range)
    If Not Intersect(Target, Range("Result1")) Is Nothing Then
        MsgBox Target.Address & " is Result1."
    ElseIf Not Intersect(Target, Range("Result2")) Is Nothing Then
        MsgBox Target.Address & " is Result2."
    ElseIf Not Intersect(Target, Range("Result3")) Is Nothing Then
        MsgBox Target.Address & " is Result3."
    ElseIf Not Intersect(Target, Range("Result4")) Is Nothing Then
        MsgBox Target.Address & " is Result4."
    ElseIf Not Intersect(Target, Range("Result5")) Is Nothing Then
        MsgBox Target.Address & " is Result5."
    Else
    End If
End Sub 
```

我想将所选单元格中的电影情节复制到单元格 B7 中。

例如，如果选择了Result1，它会在movie表中找到一尘不染的永恒阳光，并在B7中输出它的情节。

谢谢你的帮助！

编辑：这就是电影表的样子：

```
 ID   Title                            Year   Duration   Rating   Plot
   _____________________________________________________________________________________________________________________________________________________________________________________
  |  1 | (500) Days of Summer           | 2009 |  95 min  |   8.0  | An offbeat romantic comedy about a woman who doesnt believe true love exists, and the young man who falls for her. | 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T19:42:46.500

我可能会使用自动过滤器。根据您引用的电影表的结构（我没有可用的），您需要修改 AutoFilter`Field`值，并确保定义`tblRange`.

**根据 OP 注释和示例文件结构进行了修订**

```
Private Sub Worksheet_SelectionChange(ByVal Target As Range)
Dim movieTitle As String
Dim movieYear As String

If Not Intersect(Target, Range("Result1")) Is Nothing Then
    movieTitle = Range("Result1").Value 'Modified because you use merged cells...
    movieYear = Range("Result1").Offset(0, 1).Value 'modified.
    GetMovieInfo movieTitle, movieYear
End If
If Not Intersect(Target, Range("Result2")) Is Nothing Then
    movieTitle = Range("Result2").Value 'Modified because you use merged cells...
    movieYear = Range("Result2").Offset(0, 1).Value 'modified.
    GetMovieInfo movieTitle, movieYear
End If
If Not Intersect(Target, Range("Result3")) Is Nothing Then
    movieTitle = Range("Result3").Value 'Modified because you use merged cells...
    movieYear = Range("Result3").Offset(0, 1).Value 'modified.
    GetMovieInfo movieTitle, movieYear
End If
If Not Intersect(Target, Range("Result4")) Is Nothing Then
    movieTitle = Range("Result4").Value 'Modified because you use merged cells...
    movieYear = Range("Result4").Offset(0, 1).Value 'modified.
    GetMovieInfo movieTitle, movieYear
End If
If Not Intersect(Target, Range("Result5")) Is Nothing Then
    movieTitle = Range("Result5").Value 'Modified because you use merged cells...
    movieYear = Range("Result5").Offset(0, 1).Value 'modified.
    GetMovieInfo movieTitle, movieYear
End If

End Sub 
```

该子例程`GetMovieInfo`将过滤 Movies 表并在消息框中为您返回第 6 列（情节）的结果。

```
Sub GetMovieInfo(movieTitle As String, movieYear As String)
Dim tblRange As Range
Set tblRange = Sheets("movies").Range("Movies")
With tblRange
 .AutoFilter Field:=2, Criteria1:=movieTitle  '<change to filter column "2"
 .AutoFilter Field:=3, Criteria1:=movieYear  'change to filter to column "3"
    With .SpecialCells(xlCellTypeVisible)
        If .Areas.Count > 1 Then
            MsgBox .Areas(2).Cells(1, 10).Value
        Else:
            MsgBox .Areas(1).Cells(1, 10).Value
        End If
    End With
 .AutoFilter
End With
End Sub 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T20:21:39.867

我建议使用`Find`Range 属性。该功能可能如下：

```
Function GiveMeMoviePlot(MovieRange As Range, MovieTitle As String, _
            MovieYear As String)
    'pass movieTable to MovieRange

Dim A As Range
Dim checkAddress As String

Set A = MovieRange.Find(MovieTitle, , xlValues, xlWhole, , xlNext, False)
checkAddress = A.Address

If Not A Is Nothing Then

    Do
        Debug.Print A.Address
        If A.Offset(0, 1) = MovieYear Then
            'found
            GiveMeMoviePlot = A.Offset(0, 4)
            Exit Function
        Else
            Set A = MovieRange.FindNext(A)

        End If

    Loop While A.Address <> checkAddress

End If

        GiveMeMoviePlot = "Nothing found"
End Function 
```

其余逻辑与@DavidZemens 的逻辑非常相似

# ios - CBPeripheralManager 是否应该在单独的线程上发送数据？

> ID：15667299
> 
> 赞同：1
> 
> 时间：2013-03-27T19:03:41.157
> 
> 标签：ios, concurrency, core-bluetooth

我正在设计一个 iOS 应用程序，用户可以在其中通过蓝牙发送数据。这是我第一次在应用程序中使用蓝牙，我想知道它的最佳实践，特别是数据传输是否应该在单独的线程中处理。

一旦`CBPeripheralManager`连接到订阅`CBCentralManager`，发送数据的循环归结为：

```
while (didSend) {
    NSData *blob = /* some data */
    didSend = [self.manager updateValue:blob
                      forCharacteristic:self.characteristic
                   onSubscribedCentrals:nil]
} 
```

如果这在主线程上执行，这是否一定意味着用户失去了对应用程序的控制？例如，如果用户想要通过关闭应用程序或其他方式来取消交易，我是否能够以`CBPeripheralManager`某种方式告诉他们中止，或者我是否必须等到循环完成？如果后者是真的，解决这个问题的最佳方法是什么？

# ios - phonegap 推送通知在 Xcode 中显示错误

> ID：15667305
> 
> 赞同：1
> 
> 时间：2013-03-27T19:03:59.307
> 
> 标签：ios, xcode, cordova, jquery-mobile

因此，我将用于推送通知的 phonegap 插件合并到我的 phonegap 应用程序中，但在我的控制台中收到一个错误，说这`#import <Cordova/JSONKit.h>`是错误的并且找不到文件。[所以在这里](https://stackoverflow.com/questions/15357687/push-notification-plugin-for-cordova-phonegap-2-5-0-is-not-working)关闭这篇文章我能够解决错误，但现在它出现了两个附加警告。

`NSString* uuid = [[UIDevice currentDevice] uniqueIdentifier];` *未找到已折旧*

和
`NSString *jsStatement = [NSString stringWithFormat:@"window.plugins.pushNotification.notificationCallback(%@);", [userInfo cdvjk_JSONString]];` *实例方法 -cdvjk JSONString中的唯一标识符*

有没有人遇到过这个？我正在使用 phonegap 2.4.0

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T19:09:47.083

第一个错误是由于 UUID 已被弃用，除非您修复该警告，否则您的应用将永远不会被应用商店接受。修复很简单，替换`[[UIDevice ...] ...]`为：

```
NSString *uuid = [[ASIdentifierManager sharedManager] advertisingIdentifier] 
```

对于第二个问题，更改`cdvjk_JSONString`为`JSONString`，这将在下一版本的 Cordova / PhoneGap 中解决。

# android - onPostResume 后显示 DialogFragment 导致 IllegalStateException：无法执行此操作

> ID：15667307
> 
> 赞同：1
> 
> 时间：2013-03-27T19:04:10.760
> 
> 标签：android, android-dialogfragment, illegalstateexception, android-support-library

我有一个应用程序，它对不同的操作（主要是异步操作）显示不同`DialogFragments`的响应。我正在使用最新版本的支持库（通过 SDK 管理器不断更新它）

所有动作都抛出`Intent`回调

意图在 中处理`BroadcastReceiver`，即在`onPostResume`回调中注册（并且在 中取消注册`onPause`）。

捕获意图后立即显示对话框：

```
if(Constants.SHOW_DIALOG_INTENT.equals(intent.getAction()) {
    showDialog();
} 
```

对话框通过[show(FragmentManager, String)](http://developer.android.com/reference/android/support/v4/app/DialogFragment.html#show%28android.support.v4.app.FragmentManager,%20java.lang.String%29)方法显示

所以问题是：为什么我`IllegalStateException`从一些用户那里得到（应用程序被 10k+ 用户使用，但到目前为止只捕获了 10-15 个异常）。我不知道什么会导致这种情况，除了某种竞争条件（在实际调用和实际调用`Activity`之间下降）`showDialog()``DialogFragment.show()`

我能做些什么来避免这种情况（我知道，0.1% 的错误是可以接受的，但我只是想找出问题所在）？

# jquery - 将参数传递给 jQuery 函数

> ID：15667313
> 
> 赞同：0
> 
> 时间：2013-03-27T19:04:28.633
> 
> 标签：jquery

我有一个由两个不同按钮使用的 jQuery 函数。

有没有办法将参数传递给函数，以便我可以告诉它需要写入什么？

我的功能是这样开始的：

```
 $("#tblOwnerSearchResults, #tblDirectorSearchResults").on("click", "input.select", function () { 
```

我需要将一个变量传递给这部分：

```
$(html).appendTo('**#A_Table**'); 
```

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-27T19:08:59.993

您最好的选择可能是使用属性将变量直接存储在元素中`data-`并使用方法检索它[`.data()`](http://api.jquery.com/data)。

示例 HTML：

```
<input class="select" data-str="something"> 
```

示例 jQuery：

```
$("#tblOwnerSearchResults, #tblDirectorSearchResults").on("click", "input.select", function () {
    var str = $(this).data('str');
    $(html).appendTo(str);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-27T19:08:19.407

使用 HTML 属性。例如。

```
<a id="tblOwnerSearchResults" data-parameter="foo">Button</a> 
```

和 jQuery

```
$(this).data("parameter"); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-27T19:08:46.160

在您的函数中，您可以检查哪个元素触发了事件：

```
$this.attr('id'); 
```

# google-maps - 街景无法在 Firefox 浏览器中正确呈现

> ID：15667317
> 
> 赞同：0
> 
> 时间：2013-03-27T19:04:47.980
> 
> 标签：google-maps, google-maps-api-3, google-street-view

这是我在[http://jsfiddle.net/fyDkD/14/上工作的小提琴](http://jsfiddle.net/fyDkD/14/)

我的**HTML**在这里

```
<div id="map-holder">
  <div id="map_canvas" class="bigmap"></div>
  <div id="map_stv" class="minimap" style="display:none"></div>
</div> 
```

我的**CSS**在这里

```
#map-holder {
    height: 1200px ;
    position: relative;
    }

.bigmap{
    width:100%;
    height:100%;
}

.minimap{
    width:50%;
    height:100%;
}

#map_stv {
    position: absolute;
    top: 0;
    right: 0;
}
#map_stv img {
    border: none !important;
    max-width: none !important;
} 
```

在这个我看到，当我们将街景小人拖放到谷歌地图上的任何地方时，我们就会得到街景。街景不仅在火狐浏览器中是正确的。我还看到，如果宽度和高度之间的差异很大，那么我们可以很容易地看到这个问题。街景的图像显示不正确。请就此提出建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-10-20T07:15:25.460

这可以通过添加 `mode: 'html5'` 到全景选项来解决。我测试了它并且它有效。

请参阅 Google 对此我发送给他们的错误报告的回答： [https ://code.google.com/p/gmaps-api-issues/issues/detail?id=7246](https://code.google.com/p/gmaps-api-issues/issues/detail?id=7246)

# powershell - 如何从 Powershell 打开 Powershell 控制台窗口

> ID：15667322
> 
> 赞同：83
> 
> 时间：2013-03-27T19:05:16.167
> 
> 标签：powershell, powershell-2.0

我正在编写一个脚本来使用多个 plink (PuTTY) 会话作为 Windows 版本的 clusterssh。但是我被卡住了，因为我想从 powershell 打开多个 Powershell 窗口。当我为 powershell 键入命令时，它会打开一个新会话。这类似于在 bash 中键入 bash。我想要打开多个物理窗口。

我尝试了 -windowstyle 以及其他 args 无济于事。我想知道你是否知道有一种方法。我真的很感谢你的帮助。我看了看，并没有在这里找到任何东西。谢谢你的时间。

* * *

## 回答 #1

> 赞同：181
> 
> 时间：2013-03-27T20:39:19.007

这将打开一个新窗口。

任何一个：

```
start-process powershell 
```

或者：

```
start powershell 
```

* * *

## 回答 #2

> 赞同：27
> 
> 时间：2018-02-23T02:58:42.870

如果您尝试打开一个新窗口并启动一个新脚本：

```
start powershell {.\scriptInNewPSWindow.ps1} 
```

* * *

## 回答 #3

> 赞同：25
> 
> 时间：2013-03-27T19:16:08.463

这将做到：

```
Invoke-Item C:\Windows\System32\WindowsPowerShell\v1.0\powershell.exe 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2018-03-19T11:00:40.420

这对我有用：

`$argList = "-file `"$Location\script.ps1`"" Start-Process powershell -argumentlist $argList`

（反引号是必需的。这可以直接复制。）“-file”参数中可以使用变量（例如在脚本开头设置一个以反映文件的位置），并且可以在变量中出现空格由于反引号。

**编辑**为使用两行解决方案（“$argList”变量），因为 PowerShell 可以以其他方式破坏事物。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2019-08-13T10:47:45.227

从 PS 控制台启动 Powershell 6`start pwsh`可能会成功。
它从同一个文件夹开始。

（我还没有深入研究它，但我猜 PS6 的 pwsh.exe 必须在它的工作路径中。）

# sql-server - 将文件复制到 SQL Server 计算机的最佳方法

> ID：15667323
> 
> 赞同：0
> 
> 时间：2013-03-27T19:05:19.203
> 
> 标签：sql-server, sqlclr, sqlbulkcopy

我正在研究将文件从客户端计算机复制到服务器计算机。我研究过的一条路径是创建一个接受流作为输入的 CLR 方法。我的另一个建议是使用 BCP 实用程序，尽管我未能找到任何使用 BCP 完成的示例。

是否可以将 blob 传递给 BCP 并导入表，或者是否需要更多步骤来完成这项工作？哪种方法最适合文件复制功能？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T19:53:15.253

您可以 BCP blob 进出数据库。此外，我还找到了用于将文件作为 blob 导入和导出的脚本的参考，这[可能会有所帮助](http://makdns.blogspot.com/2012/02/sql-server-blob-import-and-export.html)。

# javascript - jQuery + 模块模式：何时声明/查询元素？

> ID：15667329
> 
> 赞同：4
> 
> 时间：2013-03-27T19:05:38.693
> 
> 标签：javascript, jquery, document-ready, module-pattern

*   通常，在`$(document).ready()`.
*   在下面的两个选项中，Widget 在`$(document).ready()`.
*   **这个可以吗？**我可以在准备好的处理程序之外初始化 jQuery 元素（只要我不操作任何东西）吗？
*   将整个 Widget 定义放在 里面会更好`$(document).ready()`吗？
*   我应该等到`Widget.init()`查询元素吗？
*   *注意：我是 JS 设计模式的新手，所以如果我遗漏了什么，请注意*

**选项1**

```
Widget = {
    ele : $('#ele'),
    init : function(){ ... }
};

$(document).ready(function(){
    Widget.init();
}); 
```

**选项2**

```
Widget = (function(){
    var privateEle = $('#privateEle');
    return {
        publicEle: $('#publicEle'),
        init: function(){ ... }
    };
}());

$(document).ready(function(){
    Widget.init();
}); 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-27T19:33:07.853

我会做什么：

```
var Widget = (function(){
    var ele;

    function init(_ele){
        ele = _ele;
    };

    return {
        init: init
    };
})();

$(function(){
    Widget.init( $('#foo') );
}); 
```

如果您的脚本在 jquery 之前加载，您将不会看到错误“未定义不是函数”。但是，如果你在 domReady 之前执行查询，你可能会得到意想不到的结果，ele = []

编辑：顺便说一句..把你的`<script>`标签放在`</body>`不在里面`<head></head>`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T19:07:54.263

它不起作用，因为在您查询元素时，该元素还不存在，因此您的查询将返回一个空的 jQuery 选择。您只能在 DOM 准备好时查询元素。

什么会起作用的是以下各项：

在外面创建元素`$(document).ready()`。请注意，您必须提供完整的 html 或使用`$(..).attr(x,y)`等。

```
Widget = {
    ele : $("<div id='ele'>"),
    ....
} 
```

或者您可以在小部件初始化时查询元素。

```
Widget = {
    ele : "#ele",
    init : function(){
        this.ele = $(this.ele);
        ...
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-27T19:36:43.793

您可以**在正文结束**标记之前包含脚本。

```
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <title>Demo</title>
</head>
<body>
    <!-- my HTML -->

    <script src="../js/vendor/jquery-1.9.1.js"></script>
    <script src="../js/vendor/jquery-migrate-1.1.1.js"></script>
    <script src="../js/custom.js"></script>
</body>
</html> 
```

DOM 准备好了（不需要 $(document).ready）：

```
 /*custom.js */
    var Widget = (function($){
        var _$element;

        return {
            init: function(){ 
                  _$element = $('#myElementId');
                  // TODO - element is available from now on
           };
        };
    }(jQuery));

    Widget.init(); 
```

# bean-validation - 运行时配置 Hibernate 验证注释

> ID：15667331
> 
> 赞同：0
> 
> 时间：2013-03-27T19:05:39.600
> 
> 标签：bean-validation

我有一些“X 是有效的 IFF 服务 Y 返回 Z”形式的业务验证逻辑，其中 X 和 Z 在编译时是已知的，并且 Y 的位置是从 Spring 配置文件中加载的。

我想使用基于 JSR-303 注释的验证以及 Spring 配置，所以我可以编写如下代码：

自定义类级别约束注释：

```
@MyValidation
public class X { .... } 
```

*@MyValidation*的约束验证器：

```
public class MyValidationValidator implements ConstraintValidator<MyValidation, X> {
   private MyService service;
   public MyService getService() { return service; }
   public void setService(MyService serv) { this.service = serv; }
   //Validation Logic...
} 
```

弹簧配置：

```
<bean id="ServiceY" class="...">
   ...
</bean>
<bean id="mvv" class="MyValidationValidator">
   <property name="service" value="ServiceY" />
</bean> 
```

但是我以这种方式组合这些的尝试失败了，因为验证器的属性没有设置。

现在，我正在使用 Spring AOP 拦截器作为解决方法，但这在我看来并不理想。

这里的其他问题之一让我想到了使用属性文件/属性，但这不需要我重复服务的配置吗？

另一个提到以编程方式定义约束映射，但如果我这样做，我的解决方法可能会更好。

关于如何进行动态配置的任何线索？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T23:14:07.520

您应该使用 Spring`LocalValidatorFactoryBean`设置一个 Bean Validation 验证器：

```
<bean id="validator"
    class="org.springframework.validation.beanvalidation.LocalValidatorFactoryBean"/> 
```

以这种方式设置的验证器将在内部使用`ConstraintValidatorFactory`在创建的验证器实例上执行依赖注入的实现，只需使用或标记`service`验证器中的字段。请注意，不需要将约束验证器本身设置为 Spring bean。`@Inject``@Autowired`

您可以在 Spring[参考指南](http://static.springsource.org/spring/docs/3.1.x/spring-framework-reference/html/validation.html#validation-beanvalidation-overview)中找到更多详细信息。

# matlab - Matlab 文件 I/O 连接

> ID：15667335
> 
> 赞同：0
> 
> 时间：2013-03-27T19:05:50.563
> 
> 标签：matlab, file-io, concatenation

我有这个

```
fprintf(emailFile, '%s' , fname); 
fprintf(emailFile, '%s' , lname); 
fprintf(emailFile, '%i' , id); 
fprintf(emailFile, '%s\n' , dept); 
```

我需要这样做，以便电子邮件文件显示 fname.lname.id@dept.edu 但我不知道如何处理连接。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T19:32:01.400

正如 Ben Voigt 在他的评论中指出的那样，将电子邮件地址的各个部分与正确的分隔符连接起来的最简单方法是使用这样一个事实，即`fprintf`它的表亲`sprintf`采用参数来控制字符串的格式和实际内容。

例如，您可以使用完整的电子邮件地址创建一个字符串，如下所示：

```
completeAddress = sprintf('%s.%s.%i@%s.edu', fname, lname, id, dept); 
```

如您所见，一些字符控制“在此处插入下一个字符串参数”，而格式化字符串中的其他字符只是被复制到输出字符串。另请注意，如果您的 ID 是最多四个字符长的整数，并且您想对小数字（`0876`而不是`876`）进行零填充，则可以使用例如`%04i`用于格式化。

写入中间字符串（而不是直接写入文件）可以让您确认您拥有所需的字符串；然后，您可以使用单个语句将其写入文件（`emailFile`当然，假设这是一个有效的文件 ID）

```
fprintf(emailFile, '%s\n', completeAddress); 
```

# ruby-on-rails - postgres 数组和 rails 4 erb

> ID：15667343
> 
> 赞同：0
> 
> 时间：2013-03-27T19:06:16.133
> 
> 标签：ruby-on-rails, arrays, postgresql

我在我的 postgres 数据库中有一个视图，它在我的`frequencies`列上返回一个数组。不幸的是，它有时会返回诸如`{NULL}`（由于原始数据）之类的值。

在我的 Rails 视图中，我有类似的东西：

```
dataset = [
    <% @item.each do |i| %>
        {   
            name: "<%= i.device %>" 
            lng: <%= i.longitude %> 
            lat: <%= i.latitude %>
            frequencies: <%= i.frequencies.to_s.html_safe %>
        },
    <% end %>
] 
```

这似乎工作得很好 - 除非它达到包含以下内容的记录`{NULL}`：

在 javascript 控制台中，它显示：

```
Uncaught ReferenceError: nil is not defined 
```

并在 html 中显示：

```
 ...
  }, {
    name: "blah",
    lng: -122.2,
    lat: 37.4,
    frequencies: [nil]
  }, { 
  ... 
```

我可以通过遍历控制器中的列表来解决这个问题，但我认为这会相当冗长（并且浪费周期）。

有没有办法让erb`[]`在（而不是`[nil]`）json为空时输出“正确”？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-27T19:12:31.653

试试这个：

```
 <%= i.frequencies.compact %> 
```

[紧凑的](http://www.ruby-doc.org/core-2.0/Array.html#method-i-compact-20)例子：

```
 [nil].compact #=> []
 [1,2, nil, 3, nil].compact  #=> [1,2,3] 
```

# mocking - 在 GoogleMock 中声明操作与期望

> ID：15667347
> 
> 赞同：1
> 
> 时间：2013-03-27T19:06:24.753
> 
> 标签：mocking

在阅读了关于 google mock 框架的文档后，我的初步印象是，***action***用于为 mock 对象定义简单的函数，以便使用这些对象的类可以更容易地测试，而***期望***则用于实际验证 mock 对象的正确行为。被测试的类使用。

GoogleMock 文档指出，可以通过使用 EXPECT_CALL 宏的 WillOnce/WillRepeatedly 扩展来为模拟对象的函数指定操作。但是，文档还指出 EXPECT_CALL 宏用于在执行某些函数并破坏模拟对象后验证模拟对象的期望。那么这个宏是否充当两个不同的功能，在某些情况下定义操作而在其他情况下定义期望？有没有办法使用 WillOnce/WillRepeatedly 而不是设置动作来设置期望？这与使用 ON_CALL 宏定义默认操作有什么区别？

# ruby - 子类化哈希时的奇怪行为

> ID：15667349
> 
> 赞同：1
> 
> 时间：2013-03-27T19:06:30.853
> 
> 标签：ruby, subclass

我正在尝试对 Ruby 进行子类`Hash`化，以在访问特定键时引入我自己的行为。这在构造时需要一个额外的参数，所以我已经实现了我的自定义哈希，如下所示：

```
class PlayerCollection < Hash
    def new(server)
        @server_player = SpecialPlayer.new(server, "Server")
        super(nil)
    end

    def [](key)
        key == "Server" ? @server_player : super(key)
    end

    def []=(key, value)
        key == "Server" ? value : super(key, value)
    end
end 
```

如您所见，我`super`使用 的值进行调用`nil`，因为我希望`nil`在散列中找不到该值时返回我的散列。`server`但是，当找不到密钥时，我的哈希最终会返回对象，就好像我用`Hash.new(server)`!创建了我的哈希一样。

我怎样才能避免这种行为？任何帮助，将不胜感激！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-27T19:12:58.070

在您的`PlayerCollection`中，您应该覆盖`Hash#initialize`而不是`Hash#new`.

那`new`不叫。它是被调用的类方法`Hash.new`（或）。`PlayerCollection.new`

# vba - 从 VBA 打开 word doc

> ID：15667360
> 
> 赞同：1
> 
> 时间：2013-03-27T19:07:16.680
> 
> 标签：vba, ms-access, ms-word

我在 MS Access 中有一个子程序，可以打开一个特定的 word doc 文件。代码的要点是

```
Dim wrdApp As Word.Application
Dim wrdDoc As Word.Document
Dim filepath as String

'Open Word
Set wrdApp = CreateObject("Word.Application")
wrdApp.Visible = True

filepath = CurrentProject.Path & "\Prospect Profiles\Account Profile Form.doc"

'Open the file
Set wrdDoc = wrdApp.Documents.Open(filepath) 
```

所以这是踢球者 - 该子程序适用于除我们的一名员工之外的所有员工。我们都在同一个 Citrix 环境中，并且我们都拥有相同版本的 Access 和 Word。对于这个用户，子程序不会给出错误——它只是打开了一个 ms word 的空白实例，但它从不打开 word doc 文件。是什么赋予了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T19:22:08.277

啊哈！事实证明，这个用户复制了我们数据库前端的旧版本，他没有访问我们当前的更新版本。谢谢大家的帮助！

# python - 在 Python ctypes 中使用自定义类型进行回调

> ID：15667361
> 
> 赞同：3
> 
> 时间：2013-03-27T19:07:21.243
> 
> 标签：python, callback, ctypes

我正在尝试使用 ctypes 在 Python 中包装一个 C 库。函数调用需要我使用文档实现的回调函数。问题是回调函数需要来自库的自定义对象。这是我试图在 python 中复制的 C 代码

```
void outputCallback(const A* a, void* b) {
    //
}

a = function1(0, 0, outputCallback, 0, 0) 
```

头文件中A的结构体定义为：

```
typedef struct A
{
     const unsigned char* a1;
     unsigned int a2;
} A; 
```

以及我对 Python 等价物的尝试。

```
class A(Structure):
    _fields_ = [
       ("a1", ?, ?),
       ("a2", c_int, 16)]

class Callback():
    def outputCallback(self, a):
        print a.a2
        return 1

cb = Callback() 

CMPFUNC = CFUNCTYPE(c_int, POINTER(A))

cb.cmp_func = CMPFUNC(cb.outputCallback)

cdll.LoadLibrary("library.so")
libc = CDLL("library.so")

a = libc.function1(0, 0, cb.cmp_func, 0, 0) 
```

我将回调包装在一个类中的原因是因为[这篇文章](https://stackoverflow.com/questions/3530002/python-ctype-problem-with-callback-in-making-python-custom-library)。基本上这是我试图阻止这个回调被垃圾收集。

谢谢你的尽心帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-27T19:45:48.160

那里有一些错误，有些是基本的 Python 错误：

```
from ctypes import *

class A(Structure):
    _fields_ = [
       ("a1", c_char_p),
       ("a2", c_int)]

class Callback(object):
    def outputCallback(self, a, b):         # outputCallback(): ?
        print a.contents.a1, a.contents.a2
                                            # The prototype of the `outputCallback`
                                            # tells that it returns nothing, `void`
cb = Callback()
CMPFUNC     = CFUNCTYPE(None, POINTER(A), c_void_p) # so `restype` shoud be
                                                    # None, void

cb.cmp_func = CMPFUNC(cb.outputCallback)

libc = CDLL('library.so')
libc.function1(0, 0, cb.cmp_func, 0, 0) 
```

测试DLL：

```
#include <stdio.h>

#ifdef _WIN32
#define DLLEXPORT __declspec(dllexport) 
#else
#define DLLEXPORT
#endif

#ifdef __cplusplus
extern "C" {
#endif

typedef struct A
{
     const unsigned char* a1;
     unsigned int a2;
} A;

int DLLEXPORT function1(int a,
                        int b,
                        void (*outputCallback)(const A* a, void* b),
                        int c,
                        int d)
{
    A obj;

    obj.a1 = "Hello";
    obj.a2 = 5;

    outputCallback(&obj, NULL);
    return 0;
}

#ifdef __cplusplus
};
#endif 
```

测试：

```
>gcc library.c -o library.so -shared

>python py.py
Hello 5

> 
```

# php - 用 php 和 mysql 制作即时通讯工具箱？

> ID：15667363
> 
> 赞同：4
> 
> 时间：2013-03-27T19:07:29.933
> 
> 标签：php, mysql

我正在尝试为我网站上的用户创建一个即时消息框，如果用户进入另一个用户个人资料，他们可以在聊天框中写入并向其他用户发送即时消息，这很糟糕。

我无法让 mysql 获取结果并对其进行过滤，以便如果用户 1 向用户 2 发送消息，则只有用户 1 和用户 2 可以看到对话。

目前虽然只有登录用户或“.$_SESSION['user_id']”。可以看到对话，但我希望两个用户都能看到彼此之间的对话。

另一个问题是，如果用户 3 向用户 2 和用户 1 发送消息，那么用户 2 会从用户 1 和用户 3 获得所有对话，但我只希望每个用户在每个盒子之间进行一次对话。

我的数据库 ptb_chats 如下所示：

```
id  |   to_user_id  |  from_user_id   | date_added|   content  |

2            2               1         April 2011      hello 
```

这是我的php：

```
<?php
    $chat_set = get_chats();
while ($chat = mysql_fetch_array($chat_set)) { ?>
             <?php echo "<div class=\"chat_row\">".$chat['content']."</div>"; ?>
        <? } ?> 
```

这是我的mysql：

```
function get_chats() {
            global $connection;
            global $profile_id;
            $query = "SELECT *
                        FROM ptb_chats, ptb_profiles
                        WHERE ptb_profiles.user_id = ptb_chats.from_user_id
                        AND ptb_chats.to_user_id=".$_SESSION['user_id']."
                        ORDER BY ptb_chats.date_added ASC";
            $chat_set = mysql_query($query, $connection);
            confirm_query($query, $connection);
            return $chat_set;
        } 
```

请有人可以告诉我我需要做什么才能让它工作吗？谢谢

# ruby-on-rails - Heroku 运行 rake db 错误

> ID：15667365
> 
> 赞同：0
> 
> 时间：2013-03-27T19:07:41.040
> 
> 标签：ruby-on-rails, ruby, heroku

我正在尝试运行`heroku run rake db:migrate`，这是我遇到的错误。为什么会出现这个错误？我以前做过很多次，从来没有见过这个错误。

提前致谢

```
Heroku client internal error.

Error:       Operation timed out - connect(2) (Errno::ETIMEDOUT)
Backtrace:   /Users/johndoe/.heroku/client/lib/heroku/client/rendezvous.rb:39:in `initialize'
             /Users/johndoe/.heroku/client/lib/heroku/client/rendezvous.rb:39:in `open'
             /Users/johndoe/.heroku/client/lib/heroku/client/rendezvous.rb:39:in `block in start'
             /usr/local/heroku/ruby/lib/ruby/1.9.1/timeout.rb:68:in `timeout'
             /Users/johndoe/.heroku/client/lib/heroku/client/rendezvous.rb:31:in `start'
             /Users/johndoe/.heroku/client/lib/heroku/command/run.rb:113:in `rendezvous_session'
             /Users/johndoe/.heroku/client/lib/heroku/command/run.rb:100:in `run_attached'
             /Users/johndoe/.heroku/client/lib/heroku/command/run.rb:21:in `index'
             /Users/johndoe/.heroku/client/lib/heroku/command.rb:206:in `run'
             /Users/johndoe/.heroku/client/lib/heroku/cli.rb:28:in `start'
             /usr/local/heroku/bin/heroku:24:in `<main>'

Command:     heroku run rake db:migrate
Version:     heroku-toolbelt/2.35.0 (x86_64-darwin10.8.0) ruby/1.9.3 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T19:23:11.753

经常发生在我身上。只需再次触发命令，就可以了。

# c++ - 将数字写为给定整数的总和

> ID：15667366
> 
> 赞同：0
> 
> 时间：2013-03-27T19:07:41.627
> 
> 标签：c++, binary, numbers, sum, combinations

这就是问题所在。

将给定数字 N 写为给定数字的总和，仅使用加法和减法。

这是一个例子：

```
N = 20
Integers = 8, 15, 2, 9, 10 
```

20 = 8 + 15 - 2 + 9 - 10。

这是我的想法；

第一个想法是使用蛮力，交替加减。首先，我计算组合的数量及其 2^k（其中 k 是整数的数量），因为我只能交替使用减号和加号。然后我遍历从 1 到 2^k 的所有数字，并将其转换为二进制形式。对于任何 1，我使用加号，对于任何 0，我使用减号。通过示例（使用上面的示例），您会更容易。

```
The number of combinations is: 2^k = 2^5 = 32.
Now I run through all numbers from 1 to 32\. 
So i get: 1=00001, that means: -8-15-2-9+10 = -24 This is false so I go on.
2 = 00010, which means: -8-15-2+9-10 = -26\. Also false. 
```

这种方法效果很好，但是当整数数量太大时，它需要的时间太长。

这是我在 C++ 中的代码：

```
#include <iostream>
#include <cmath>
using namespace std;
int convertToBinary(int number) {
    int remainder;
    int binNumber = 0;
    int i = 1;
    while(number!=0)
    {
        remainder=number%2;
        binNumber=binNumber + (i*remainder);
        number=number/2;
        i=i*10;
    }
    return binNumber;
}
int main()
{
    int N, numberOfIntegers, Combinations, Binary, Remainder, Sum;
    cin >> N >> numberOfIntegers;
    int Integers[numberOfIntegers];
    for(int i = 0; i<numberOfIntegers; i++)
    {
        cin >>Integers[i];
    }
    Combinations = pow(2.00, numberOfIntegers);
    for(int i = Combinations-1; i>=Combinations/2; i--) // I use half of the combinations, because 10100 will compute the same sum as 01011, but in with opposite sign.
    {
        Sum = 0;
        Binary = convertToBinary(i);
        for(int j = 0; Binary!=0; j++)
        {
            Remainder = Binary%10;
            Binary = Binary/10;
            if(Remainder==1)
            {
                Sum += Integers[numberOfIntegers-1-j];
            }
            else
            {
                Sum -= Integers[numberOfIntegers-1-j];
            }
        }
        if(N == abs(Sum))
        {
            Binary = convertToBinary(i);
            for(int j = 0; Binary!=0; j++)
            {
                Remainder = Binary%10;
                Binary = Binary/10;
                if(Sum>0)
                {
                    if(Remainder==1)
                    {
                        cout << "+" << Integers[numberOfIntegers-1-j];
                    }
                    else
                    {
                        cout << "-" << Integers[numberOfIntegers-1-j];
                    }
                }
                else
                {
                    if(Remainder==1)
                    {
                        cout << "-" << Integers[numberOfIntegers-1-j];
                    }
                    else
                    {
                        cout << "+" << Integers[numberOfIntegers-1-j];
                    }
                }
            }
            break;
        }
    }
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T20:16:15.787

所以你担心的是你的复杂性。

让我们分析可以进行哪些优化。

给定 a[n] 中的 n 个数字和目标值 T；

可以肯定的是，加减法的一种组合会给你 T ；

所以 Sigma(m*a[k]) =T where( m =(-1 or 1) and 0 >= k >= n-1 )

这只是意味着..

它可以写成

（数组中一些数字的总和）=（数组中剩余数字的总和）+ T

就像你的情况一样..

8+15-2+9-10=20 可以写成

8+15+9= 20+10+2

所以包括目标在内的所有数字的总和 = 64 // 我们可以计算它.. :)

所以一半是32

如果进一步写为 20+(somthing)=32 在这种情况下为 12 (2+10)。

在这种情况下，您的问题可以简化为查找总和为 12 的数组中的数字

因此，您现在的问题可以减少为找到总和为 k 的数字组合（您可以按上述方式计算 k=12 。）对于其复杂性为 O(log (n )) n as size of array ，请保留请注意，您必须对数组进行排序并使用基于二进制搜索的算法来获取 O(log(n))。

因此，复杂性可以从 O(2^n) 到 O((N+1)logN)，因为包括排序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T12:33:51.810

由于这是典型的作业，我不会给出完整的答案。但是考虑一下：

```
K = +a[1] - a[2] - a[3] + a[4] 
```

可以改写为

```
a[0] = K
a[0] + a[2] + a[3] = a[1] + a[4] 
```

您现在在两边都有正常的子集总和。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-09T05:38:03.310

这需要您提供的静态输入，我使用核心 java 编写

```
 public static void main(String[] args) {

    System.out.println("Enter number");

    Scanner sc = new Scanner(System.in);

    int total = 0;

    while (sc.hasNext()) {

        int[] array = new int[5] ;

        for(int m=0;m<array.length;m++){
            array[m] = sc.nextInt();
        }

         int res =array[0];
            for(int i=0;i<array.length-1;i++){

                    if((array[i]%2)==1){
                            res = res - array[i+1];
                    }
                    else{
                    res =res+array[i+1];
                    }
            }
            System.out.println(res);
    }
} 
```

# asp.net - ASP.Net 3.5 Web 应用程序尝试加载 System.Web.Mobile.dll 版本 4.0.0.0

> ID：15667369
> 
> 赞同：1
> 
> 时间：2013-03-27T19:07:47.623
> 
> 标签：asp.net, mobile, binding, version

我正在尝试调试从以前的开发人员那里继承的 Web 应用程序，它是使用带有 .Net 3.5 框架的 Visual Studio 2008 编写的（因此使用 asp.net 2.0）。我可以看到临时 asp.net 文件显示在 2.0 文件夹中（C:\Windows\Microsoft.NET\Framework64\v2.0.50727\Temporary ASP.NET Files）

不幸的是，每次我尝试浏览到本地 IIS 服务器上的登录页面时，都会收到以下错误：

> “无法加载文件或程序集 'System.Web.Mobile, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a' 或其依赖项之一。找到的程序集的清单定义与程序集引用不匹配。（来自 HRESULT 的异常: 0x80131040)"

该程序集在应用程序的任何地方都没有被引用，我不知道为什么当我浏览到页面时它试图加载它。我尝试使用 2.0 框架 dll 在 web.config 中显式引用 3.5 版本，如下所示：C:\Windows\Microsoft.NET\Framework\v2.0.50727\System.Web.Mobile.dll

但是，无论我做什么，它似乎都试图绑定到 4.0.0.0 版本并且无法加载页面。

# java - 从主类读取数据

> ID：15667371
> 
> 赞同：1
> 
> 时间：2013-03-27T19:07:52.373
> 
> 标签：java, file-io

我正在编写一个简单的两文件项目。我想知道为什么第二个文件无法从主类读取和打印数据。我知道反过来也可能发生。请为我澄清这一点。吨

**测试.java**

```
package testme;

public class Test {   
     int a = 7;    

     public int getA() { return a; }

     public static void main( String args[] ) { 
         Test test = new Test();
     }     
} 
```

**Testit.java**

```
package testme;

public class Testit {    
    Test t;    
    Testit() {
       t = new Test(); 
       System.out.println( t.getA() );
    }   
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T19:11:01.310

代替

```
Test test = new Test(); 
```

和

```
Testit test = new Testit(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T19:22:08.923

你的类定义似乎没问题。唯一的问题是您的 main 永远不会启动 Testit 的实例。

Testit 正在成功执行 t = new Test();。所以它现在可以访问 getA() 方法。

反过来也不是这样。您的主要创建 test = new Test()，但没有引用 TestIt 对象。

试着把它放在你的主要

```
Testit test = new Testit(); 
```

你应该看到 A (7)

# vb.net - GPA 计算器文本框问题

> ID：15667374
> 
> 赞同：0
> 
> 时间：2013-03-27T19:08:00.777
> 
> 标签：vb.net

我编写了一个 GPA 计算器，其中有 8 个文本框用于输入课程名称，8 个文本框用于输入每门课程的小时数，最后 8 个文本框用于输入您在这些课程中的字母等级。我在使用 8 个需要学分的文本框时遇到问题。如果我不觉得每个人都有一个数字，它会给我一个错误“输入字符串格式不正确”。我想把它编程到如果用户只上 5 门课，他们可以将其他 3 个文本框留空，并且在他们没有填写学分的文本框中输入“0”，然后计算 GPA 5个班级进入。如果用户在所有 8 个文本框中输入学分时间，它可以正常工作，但是，如果他们没有填写所有 8 个，我上面提到的错误代码就会出现......

这是我到目前为止的代码。

```
Public Class Form1

Dim QualityPoints As Double
Dim CourseName, hours As String

Private Sub btnTotalHours_Click(sender As Object, e As EventArgs) Handles btnTotalHours.Click
    Dim totalHours As String
    Dim Credit1, Credit2, Credit3, Credit4, Credit5, Credit6, Credit7, Credit8 As Integer
    Credit1 = Integer.Parse(txtBoxCredit1.Text)
    Credit2 = Integer.Parse(txtBoxCredit2.Text)
    Credit3 = Integer.Parse(txtBoxCredit3.Text)
    Credit4 = Integer.Parse(txtBoxCredit4.Text)
    Credit5 = Integer.Parse(txtBoxCredit5.Text)
    Credit6 = Integer.Parse(txtBoxCredit6.Text)
    Credit7 = Integer.Parse(txtBoxCredit7.Text)
    Credit8 = Integer.Parse(txtBoxCredit8.Text)

    totalHours = CStr(txtBoxTotalHours.Text)
    txtBoxTotalHours.Text = (Credit1 + Credit2 + Credit3 + Credit4 + Credit5 + Credit6 + Credit7 + Credit8)

End Sub

Private Sub btnTotalQualityPoints_Click(sender As Object, e As EventArgs) Handles btnTotalQualityPoints.Click

    Select Case txtBoxGrade1.Text
        Case "A"
            QualityPoints += (4 * txtBoxCredit1.Text)
        Case "B"
            QualityPoints += (3 * txtBoxCredit1.Text)
        Case "C"
            QualityPoints += (2 * txtBoxCredit1.Text)
        Case "D"
            QualityPoints += (1 * txtBoxCredit1.Text)
        Case "F"
            QualityPoints += (0 * txtBoxCredit1.Text)
        Case " "
            QualityPoints += (0 * txtBoxCredit1.Text)

    End Select

    Select Case txtBoxGrade2.Text
        Case "A"
            QualityPoints += (4 * txtBoxCredit2.Text)
        Case "B"
            QualityPoints += (3 * txtBoxCredit2.Text)
        Case "C"
            QualityPoints += (2 * txtBoxCredit2.Text)
        Case "D"
            QualityPoints += (1 * txtBoxCredit2.Text)
        Case "F"
            QualityPoints += (0 * txtBoxCredit2.Text)
        Case " "
            QualityPoints += (0 * txtBoxCredit2.Text)

    End Select

    Select Case txtBoxGrade3.Text
        Case "A"
            QualityPoints += (4 * txtBoxCredit3.Text)
        Case "B"
            QualityPoints += (3 * txtBoxCredit3.Text)
        Case "C"
            QualityPoints += (2 * txtBoxCredit3.Text)
        Case "D"
            QualityPoints += (1 * txtBoxCredit3.Text)
        Case "F"
            QualityPoints += (0 * txtBoxCredit3.Text)
        Case " "
            QualityPoints += (0 * txtBoxCredit3.Text)

    End Select

    Select Case txtBoxGrade4.Text
        Case "A"
            QualityPoints += (4 * txtBoxCredit4.Text)
        Case "B"
            QualityPoints += (3 * txtBoxCredit4.Text)
        Case "C"
            QualityPoints += (2 * txtBoxCredit4.Text)
        Case "D"
            QualityPoints += (1 * txtBoxCredit4.Text)
        Case "F"
            QualityPoints += (0 * txtBoxCredit4.Text)
        Case " "
            QualityPoints += (0 * txtBoxCredit4.Text)

    End Select

    Select Case txtBoxGrade5.Text
        Case "A"
            QualityPoints += (4 * txtBoxCredit5.Text)
        Case "B"
            QualityPoints += (3 * txtBoxCredit5.Text)
        Case "C"
            QualityPoints += (2 * txtBoxCredit5.Text)
        Case "D"
            QualityPoints += (1 * txtBoxCredit5.Text)
        Case "F"
            QualityPoints += (0 * txtBoxCredit5.Text)
        Case " "
            QualityPoints += (0 * txtBoxCredit5.Text)

    End Select

    Select Case txtBoxGrade6.Text
        Case "A"
            QualityPoints += (4 * txtBoxCredit6.Text)
        Case "B"
            QualityPoints += (3 * txtBoxCredit6.Text)
        Case "C"
            QualityPoints += (2 * txtBoxCredit6.Text)
        Case "D"
            QualityPoints += (1 * txtBoxCredit6.Text)
        Case "F"
            QualityPoints += (0 * txtBoxCredit6.Text)
        Case " "
            QualityPoints += (0 * txtBoxCredit6.Text)

    End Select

    Select Case txtBoxGrade7.Text
        Case "A"
            QualityPoints += (4 * txtBoxCredit7.Text)
        Case "B"
            QualityPoints += (3 * txtBoxCredit7.Text)
        Case "C"
            QualityPoints += (2 * txtBoxCredit7.Text)
        Case "D"
            QualityPoints += (1 * txtBoxCredit7.Text)
        Case "F"
            QualityPoints += (0 * txtBoxCredit7.Text)
        Case " "
            QualityPoints += (0 * txtBoxCredit7.Text)

    End Select

    Select Case txtBoxGrade8.Text
        Case "A"
            QualityPoints += (4 * txtBoxCredit8.Text)
        Case "B"
            QualityPoints += (3 * txtBoxCredit8.Text)
        Case "C"
            QualityPoints += (2 * txtBoxCredit8.Text)
        Case "D"
            QualityPoints += (1 * txtBoxCredit8.Text)
        Case "F"
            QualityPoints += (0 * txtBoxCredit8.Text)
        Case " "
            QualityPoints += (0 * txtBoxCredit8.Text)

    End Select

    txtBoxTotalQualityPoints.Text = QualityPoints

End Sub

Private Sub btnClear_Click(sender As Object, e As EventArgs) Handles btnClear.Click
    txtBoxCourse1.Clear()
    txtBoxCourse2.Clear()
    txtBoxCourse3.Clear()
    txtBoxCourse4.Clear()
    txtBoxCourse5.Clear()
    txtBoxCourse6.Clear()
    txtBoxCourse7.Clear()
    txtBoxCourse8.Clear()

    txtBoxCredit1.Clear()
    txtBoxCredit2.Clear()
    txtBoxCredit3.Clear()
    txtBoxCredit4.Clear()
    txtBoxCredit5.Clear()
    txtBoxCredit6.Clear()
    txtBoxCredit7.Clear()
    txtBoxCredit8.Clear()

    txtBoxGrade1.Clear()
    txtBoxGrade2.Clear()
    txtBoxGrade3.Clear()
    txtBoxGrade4.Clear()
    txtBoxGrade5.Clear()
    txtBoxGrade6.Clear()
    txtBoxGrade7.Clear()
    txtBoxGrade8.Clear()

    txtBoxTotalGPA.Clear()
    txtBoxTotalHours.Clear()
    txtBoxTotalQualityPoints.Clear()

End Sub 
```

感谢您提供的任何帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T19:11:00.857

看看`Int32.TryParse`方法。它将尝试解析数据，如果成功则返回一个值。

[http://msdn.microsoft.com/en-us/library/f02979c7.aspx?cs-save-lang=1&cs-lang=vb#code-snippet-1](http://msdn.microsoft.com/en-us/library/f02979c7.aspx?cs-save-lang=1&cs-lang=vb#code-snippet-1)

# php - 退出（标题（'位置：index.php'））；- 这会引起问题吗？

> ID：15667376
> 
> 赞同：0
> 
> 时间：2013-03-27T19:08:10.897
> 
> 标签：php

我总是使用标题然后退出方法。最近我尝试了 exit(header('location: index.php')); 它似乎工作。有没有人遇到过这种方法的任何问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T19:12:58.583

没有什么不同：

```
header('location: index.php'); exit; 
```

使用`exit(header('location: index.php'));`该`header`函数时执行重定向，然后不返回任何内容，并且`exit`不带参数调用只是退出而没有自定义消息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-27T19:11:13.077

Exit 需要一个可选的退出代码，因此没有理由它不应该工作。但是，为了清楚起见，我仍然会打破这两行，以防万一未来版本的 php 引入不需要的行为

# c# - 是否可以在 c# 中创建 GUI 来替换现有的虚拟模拟器用户界面

> ID：15667380
> 
> 赞同：1
> 
> 时间：2013-03-27T19:08:24.340
> 
> 标签：c#, telnet, vt100

有一个 linux 服务器可以与设备建立 telnet 会话。该设备使用 vt100 终端仿真器与服务器通信。

我想使用 ac# 程序与服务器建立 telnet 会话，而不是使用终端模拟器。我想在设备上使用与终端模拟器相同的 telnet 会话显示一个更好的图形用户界面，而无需更改服务器上的任何代码。

这是服务器通过 telnet 会话发送内容的示例。是否可以提取有意义的数据并使用 c# 标签/按钮/等显示它...？

[1;1H[7mRF ID - V2.03D[608][2;1H[mxlqqqqqqqqqqqqqqk[2;19Hx[3;1HxxKey

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T19:53:06.663

解释 VT100 转义序列很简单。他们有据可查： http: [//graphcomp.com/info/specs/ansi_col.html](http://graphcomp.com/info/specs/ansi_col.html)

你想用它做什么可能会比你意识到的更复杂。如果我是你，我会建立一个屏幕的内部模型，并根据你获得的 VT100 代码更新该模型。这应该可以帮助您对应用程序应该看到的内容保持一致的“视图”。

**更新：**这里有更多信息：[http](http://www.vt100.net/) ://www.vt100.net/ 您可能会发现这特别有用：[http ://www.vt100.net/docs/vt102-ug/chapter5.html](http://www.vt100.net/docs/vt102-ug/chapter5.html)

# wpf - 在 WPF GUI 中用于提高速度的最佳集合

> ID：15667382
> 
> 赞同：0
> 
> 时间：2013-03-27T19:08:31.860
> 
> 标签：wpf, performance, listview, collections

我有一个包含“行”列表的列表视图，其中包含“列”列表。现在，我对行和列都使用 List（即，我有一个 List，它是 Rows 对象，我有一个 List，但随着数字变大，更新 GUI 所需的时间和程序的整体性能得到非常糟糕。另外，当项目（行内的列）发生变化时，GUI 不会得到通知，所以我必须做一个 Item.Refresh，这似乎每次都会刷新整个事情，增加了缓慢的性能

是否有任何其他类型的对象可以用来加速整个过程。这意味着它需要满足以下几点： - 更快的列表 - 当我添加新行时，列表视图会更新。有可能，只添加新行而不是整个列表视图。- 当我更改 Columns 对象时，GUI 会更新。如果可能，只有修改后的列对象会受到影响，因此整个 Listview 不会更改。

请注意，在显示列对象的场景背后有相当多的实际计算。我目前正在努力优化这一端，但我很确定使用更好的集合在这里会有很大帮助。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T19:26:59.143

我相信您正在寻找的是一个[可观察的集合](http://msdn.microsoft.com/en-us/library/ms748365.aspx)

添加项目时，此集合类型将触发 CollectionChanged 事件。您无需刷新集合，因为 WPF 控件开箱即用地支持此操作。

### 笔记

更新单个元素时不会触发 CollectionChanged 事件。如果您希望这些更新显示在 UI 上，则集合中的对象应实现[INotifyPropertyChanged](http://msdn.microsoft.com/en-us/library/system.componentmodel.inotifypropertychanged.aspx)

# python - Google App Engine 找不到 PyObjC / 识别 PYTHONPATH

> ID：15667387
> 
> 赞同：1
> 
> 时间：2013-03-27T19:08:46.027
> 
> 标签：python, macos, google-app-engine, pyobjc

我升级到 google app engine sdk 1.7.6 并受到欢迎

> 用户警告：不支持检测源代码更改，因为您的 Python 版本不包含 PyObjC ( [http://pyobjc.sourceforge.net/](http://pyobjc.sourceforge.net/) )。请安装 PyObjC

我通过这样做安装了 PyObjC

```
sudo easy_install -U pyobjc-core
sudo easy_install -U pyobjc 
```

然后我将以下内容添加到我的 .bash_profile

```
export PYTHONPATH=/System/Library/Frameworks/Python.framework/Versions/2.7/Extras/lib/python:$PYTHONPATH 
```

因为`PyObjC.pth`文件位于那里。

从终端运行 python 然后输入`import objc`工作，所以我假设 PyObjC 安装正确。

Google App Engine 仍然给了我错误，所以我尝试将相同的路径添加到 ~/.MacOSX/environment.plist

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE plist PUBLIC "-//Apple Computer//DTD PLIST 1.0//EN" "http://www.apple.com/DTDs/PropertyList-1.0.dtd">
<plist version="1.0">
  <dict>
    <key>DISPLAY</key>
    <string>:0.0</string>
<key>PYTHONPATH</key>
    <string>/usr/local/Cellar/pil/1.1.7/lib/python2.7/site-packages:/System/Library/Frameworks/Python.framework/Versions/2.7/Extras/lib/python</string>
  </dict>
</plist> 
```

那也没有用。

总的来说，我很困惑 Google App Engine 在哪里寻找库，以及它是否关心 PYTHONPATH，或者是否有多个 PYTHONPATH。[这个](https://stackoverflow.com/questions/1035554/google-app-engine-cannot-find-gdata-module)问题似乎暗示它不关心 .bash_profile 定义的 PYTHONPATH。我在安装 PIL 图像库时也遇到了很多麻烦。

我的 Google App Engine 使用的主要 python 安装目录是

```
/Library/Frameworks/Python.framework/Versions/2.7/bin/ 
```

这不是 pyobjc 库的安装位置。

相关问题： [由于 1.7.6 更新，我是否真的需要安装 Xcode 并编译 PyObjC？](https://stackoverflow.com/questions/15513642/do-i-seriously-need-to-install-xcode-and-compile-pyobjc-as-a-result-of-1-7-6-upd)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T19:19:46.993

我最终从源代码而不是使用 easy_install 安装 PyObjC，重新启动了 Google App Engine，它似乎已经工作了。

在另一台机器上，easy_install 方法开箱即用，所以安装到正确的 python 目录可能只是一个问题（正如 Ronald 评论的那样）。

仍然很想听听有关 GAE 是否关心 PYTHONPATH 的任何见解。我相信我必须进行编辑`~/.MacOSX/environment.plist`才能使 PIL 图像库正常工作。

# security - UDP 与 TCP 安全性

> ID：15667392
> 
> 赞同：4
> 
> 时间：2013-03-27T19:09:03.833
> 
> 标签：security, tcp, network-programming, udp

我们正在开发一款游戏，数百万客户端与我们的服务器进行通信。这些游戏大部分是回合制的。我知道 UDP 比 TCP 提供了一些性能优势，但我想知道一个协议是否比另一个协议具有安全优势？我读过一些网站表明 TCP 通常会更安全，但我看到了大量利用 TCP 弱点的攻击。

我们的代码非常容忍不可靠的连接和丢失/乱序的数据，这就是我想到 UDP 的原因。谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-27T19:27:23.543

UDP 最大的安全问题是您容易受到[欺骗](https://www.cisco.com/c/en/us/about/press/internet-protocol-journal/back-issues/table-contents-38/104-ip-spoofing.html)和[DOS 攻击](https://www.us-cert.gov/ncas/alerts/TA14-017A)。由于握手永远不会完成，因此不可能使用 TCP 在 Internet 上欺骗地址。使用 UDP 的 OTOH 没有隐式握手 - 任何会话维护都必须由您的代码完成（处理开销）。

> 我知道 UDP 提供了一些优于 TCP 的性能优势

仅通过 LAN - 部分原因是不必执行握手减少了延迟 - 但最大的区别在于它绕过了拥塞控制机制。这对于通过 LAN 的数据包丢失非常低的数据来说不是问题 - 但是如果您想通过 Internet 发送数据，您将不得不在应用程序中实现带宽限制、错误恢复和[拥塞控制](https://quicwg.org/base-drafts/draft-ietf-quic-recovery.html)（更多处理高架）。虽然您可以通过转发错误控制来处理某些类型的数据包丢失，但这对过载的路由器没有帮助。所有减慢 UDP 的东西都是有原因的。

如果您的数据流不超过任何方向的 2 MSS，然后是来自远程端的确认，那么就去做吧 - 但如果您想快速移动大量数据，请使用 TCP（或旅行车）。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-27T19:14:19.960

这是比较 UDP 和 TCP 的好资源：[http](http://www.skullbox.net/tcpudp.php) ://www.skullbox.net/tcpudp.php 。

传统上，大多数实时应用程序都使用 UDP，例如：VOIP。我不是安全专家，但我想它们都同样安全/不安全。这取决于 TLS 等安全协议的使用。

TCP 只是有机制来保证数据包的传递。

# jquery - 无法使用 jquery 获取 div 的实际高度

> ID：15667395
> 
> 赞同：2
> 
> 时间：2013-03-27T19:09:09.307
> 
> 标签：jquery

我需要获取 div 的实际高度，但下面的所有 jquery 函数都会产生相同的值，该值比实际高度短约 10 个像素。我使用屏幕截图确认了实际高度，并在 Photoshop 中进行了测量。

需要什么方法来获得正确的高度？

```
alert($("#content-container").outerHeight(true));
alert($("#content-container").outerHeight());
alert($("#content-container").height());

#content-container {
width: 970px;
margin-right: auto;
margin-left: auto;
background-color: #FFFFFF;
height: auto;
min-height: 550px;
}

<body>
<div id="content-container">Content</div>
</body> 
```

div 中有内容，但此处发布的内容太多。我想要容器的总高度，这样如果我对其应用边框，您可以测量从边框的顶部边缘到边框的底部边缘。现在我得到的高度比那个测量值小 10 像素。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-27T20:06:08.527

> OuterHeight 为您提供在内容容器上应用的填充和边距的高度，innerHeight 只为您提供填充的高度，而高度为您提供不包括应用在内容容器上的填充和边距的高度。

你想知道总高度。最好使用 outerHeight()

```
alert($("#content-container").outerHeight()); 
```

**此外，您想解决您的问题，最好发布您的小提琴。谢谢你亲爱的。**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-27T19:15:42.693

div 可能需要明确设置高度，否则它不会返回高度。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-27T21:08:32.290

该问题似乎与内容区域中的无序列表有关。我希望项目显示内联并将 li 设置为 display:inline，当我删除 inline 属性并将其更改为 float:left 时，它开始工作。这对我来说毫无意义，但它现在确实有效。

# javascript - JS 变量函数

> ID：15667398
> 
> 赞同：2
> 
> 时间：2013-03-27T19:09:29.137
> 
> 标签：javascript, jquery

请看下面的代码：

```
var test = {

    test2 : {
        variable: 'hello world',

        test3: {
            test4 : test.test2.variable  
        },

        echo : function() {
            alert(test.test2.test3.test4);   
        }
    }

};

test.test2.echo(); 
```

[jsfiddle](http://jsfiddle.net/RUgA4/)

为什么 test4 不能访问变量：

```
test4 : test.test2.variable 
```

也请随意修改我的标题，我找不到更好的。

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-27T19:12:06.207

`test`是`undefined`在当时`test.test2.variable`被评估。

表达式是由内向外计算的，因此您的代码按以下顺序执行以下操作：

1.  创建一个对象
2.  创建一个对象
3.  将`variable`属性附加到 (2)
4.  创建另一个对象
5.  将`test4`属性附加到 (4)，其值是评估的结果`test.test2.variable`（**失败**，因为直到 (1) 才分配测试）
6.  将`test3`属性附加到值为 (4) 的第一个属性
7.  创建一个函数实例
8.  将`echo`属性附加到 (2)
9.  将`test2`指向 (2) 的属性附加到 (1)
10.  将 (1) 分配给变量`test`。

如果您可以依赖现代浏览器并且不太可能经常阅读或者您可以在`test`正确初始化后分配它，则可以使用如下所示的 getter 来延迟对 (5) 的评估。

```
 var test = { 
   test2: {
     variable: "foo",
     test3: {
       get test4 () { return test.test2.variable; }
     }
   }
 }; 
```

或者更向后兼容

```
 var test = {
   test2: {
     variable: "foo",
     test3: {
       test4: null
     }
   }
 }
 test.test2.test3.test4 = test.test2.variable; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-27T19:12:15.143

因为`test`还没有分配。Javascript 解释器首先解析右侧的 JSON 文字，然后将值赋给`test`变量：

```
var test = {...} 
```

要修复它，您可以这样做：

```
var test = {
    test2 : {
        variable: 'hello world',
        test3: {

        },
        echo : function() {
            alert(test.test2.test3.test4);   
        }
    }
};
test.test3.test4 = test.test2.variable; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-27T19:28:28.967

这应该有效。自从迈克·塞缪尔（Mike Samuel）给出了很好的解释后，我就没有解释过。

```
var test = {

    test2 : {
        variable: 'hello world',

        test3: {
            test4 : function (){return test.test2.variable  }
        },

        echo : function() {
            alert(test.test2.test3.test4());   
        }
    }        
};

test.test2.echo(); 
```

# axapta - 动态添加的表单数据源上的 setTmpData()

> ID：15667405
> 
> 赞同：3
> 
> 时间：2013-03-27T19:09:46.773
> 
> 标签：axapta, dynamics-ax-2009, x++, dynamics-ax-2012

我使用标准模式将数据源添加到表单中：

```
Args args;
FormRun formRun;

Form form;
FormBuildDataSource formBuildDataSource;
;

form = new Form(formstr(ICS));
formBuildDataSource = form.addDataSource('dbm_ICStmp');
//formBuildDataSource.table(tablenum(dbm_ICStmp));

args = new Args();
args.object(form);

formRun = classfactory.formRunClass(args);

formRun.init();
formRun.run();
formRun.detach(); 
```

dbm_ICStmp 是一个临时表。如何调用 setTmpData？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-27T21:57:37.713

我可以向您推荐一些关于此的事情：

1.  使用 classFactory 创建表单（[Args 类 - Classfactory](http://www.axaptapedia.com/index.php?title=Args_Class)）
2.  不要通过表单外的代码添加数据源，而是尝试将临时表作为数据源放在表单上。
3.  当您打开表单时，临时表将为空，但您可以使用 setTmpData(MyTemporaryRecordInstance) 方法添加数据。MyTemporaryRecordInstance 是您在此之前填写的临时表。有关更多信息，您可以在以下链接中找到有关表单中临时表的所有信息：表单中的[临时表](http://www.axaptapedia.com/Temporary_tables#Temporary_tables_in_forms)

# c# - 访客屏幕分辨率

> ID：15667408
> 
> 赞同：2
> 
> 时间：2013-03-27T19:09:58.930
> 
> 标签：c#, asp.net, resolution, monitor

我需要获取网站上访问者的屏幕分辨率。可以在 ASP.NET 中执行此操作吗？我使用以下代码获得屏幕分辨率：

```
var mn = System.Windows.Forms.Screen.PrimaryScreen.Bounds;
int h = mn.Height;
int w = mn.Width; 
```

但是这个分辨率在服务器上。我需要客户端监视器的分辨率。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T19:13:34.027

您将不得不使用 javascript 来完成此操作。[有效高度有效](https://developer.mozilla.org/en-US/docs/DOM/window.screen.availHeight) [宽度](https://developer.mozilla.org/en-US/docs/DOM/window.screen.availWidth)

```
window.screen.availHeight
window.screen.availWidth 
```

然后，您将不得不以某种方式将其传递回您的应用程序。

# javascript - 使用库加载 google maps api

> ID：15667409
> 
> 赞同：1
> 
> 时间：2013-03-27T19:10:05.147
> 
> 标签：javascript, google-maps

我正在尝试将主 API 和库（Places）加载到我的 Web 应用程序中。根据文档，我应该加载 Places 库：

```
<script type="text/javascript" src="https://maps.googleapis.com/maps/api/js?libraries=places&sensor=false"></script> 
```

但是当我将它与我的脚本标签结合使用来加载主 api 时，它给了我一个错误，我正在加载 api 两次。我怎么能在同一个脚本标签中加载两者？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-27T19:18:29.803

由于您已经`places`在`libraries`参数中指定了，您只需要一个脚本。根据[文档](https://developers.google.com/maps/documentation/javascript/libraries)：

```
The JavaScript code for the Maps API is loaded via a bootstrap URL of the 
form http://maps.googleapis.com/maps/api/js.
This bootstrap request loads all of the main Javascript objects and symbols 
for use in the Maps API. Some Maps API features are also available in 
self-contained libraries which are not loaded unless you specifically 
request them. 
```

# java - SQLite 数据库不接受超过 1000 行？

> ID：15667415
> 
> 赞同：3
> 
> 时间：2013-03-27T19:10:38.073
> 
> 标签：java, android, sqlite

我正在编写一个安卓应用程序。我正在解析 txt 文件中的行并将每行中的数据插入 SQLite 数据库。但是插入过程恰好在 1000 个条目处停止。有超过 3000 个条目，但插入过程在 1000 处停止。出了什么问题？

编辑：这是代码：

```
try{
            InputStream is = ctx.getAssets().open("feedtitlesandaddresses.txt");
            InputStreamReader iz=new InputStreamReader(is);
            BufferedReader br = new BufferedReader(iz);
            ContentValues values = new ContentValues();
            while((line=br.readLine())!=null) {
            StringTokenizer stringTokenizer = new StringTokenizer(line, "<");
            String firstNumber="";
            String strfinal="";
              **//code which gives values to strfinal and firstNumber excluded
              values.put(KEY_NAME, firstNumber); // Contact Name
              values.put(KEY_PH_NO,strfinal); // Contact Phone

              // Inserting Row

              db.insert(TABLE_CONTACTS, null, values);}

   }catch(Exception e){Log.d("yeah error is"+e,"twitch12");} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T19:21:21.283

> 出了什么问题？

我想这很奇怪。问题可能与两者有关（文件或数据库问题）。

你想过`TRANSACTION`吗？它可能会解决您的问题。我最近使用 db 并正常插入了 100 000 行（但肯定在事务中），因为如果没有事务，您的操作将花费大量时间。

因此，正如我的建议将您的代码包装到事务中一样，读写将花费更少的时间，并且应该可以解决问题。

**伪代码：**

```
try {
   db.begiTransaction();
   ...
   // your work with file and inserting
   db.setTransactionSuccessful();
   ...
}
finally {
   if (db.inTransaction()) {
      db.endTransaction();
   }
} 
```

## 更新：

查看文件中的 1000\. 行并告诉我。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-06-21T03:47:34.560

脚步：

*   转到 SQLiteStudio
*   选择工具 > 打开配置对话框 > 数据浏览
*   在您将拥有`Number of data rows per page`的数据浏览中，现在根据需要选择大小。

我和你有同样的问题，我把数字 1000 改成了 2000，效果很好。希望它对你有用。

# asp.net-mvc - 用于选择的 KendoUI Grid Ajax 绑定参数

> ID：15667418
> 
> 赞同：10
> 
> 时间：2013-03-27T19:10:43.480
> 
> 标签：asp.net-mvc, telerik, kendo-ui, kendo-grid

我的 ASP.NET MVC 应用程序有一个基本网`KendoUI`格，它使用 ajax 绑定进行读取。我想增强这一点，以便使用网格上方的表单来帮助选择应在网格中显示的数据。这是一个标准的搜索表单，包含基本字段，如名字、姓氏、出生日期、客户来源等，并带有搜索按钮。当按下搜索按钮时，我想强制网格通过传入带有我上面引用的字段的搜索模型来从控制器获取满足条件的数据。

搜索表单包含在 _CustomerSearch 部分视图中。

我之前使用 Telerik MVC 扩展实现了这种事情，方法是利用 OnDataBinding 客户端事件并在那里更新参数值，然后手动进行 Ajax 调用以获取数据。KendoUI 似乎不会以同样的方式运行。

## 看法

```
@Html.Partial("_CustomerSearch", Model)
<hr>
@(Html.Kendo().Grid<ViewModels.CustomerModel>()    
    .Name("Grid")
    .Columns(columns =>
    {
        columns.Bound(p => p.Id).Hidden(true);
        columns.Bound(p => p.FirstName);
        columns.Bound(p => p.LastName);
        columns.Bound(p => p.DateOfBirth).Format("{0:MM/dd/yyyy}");
        columns.Bound(p => p.IsActive);
    })
    .Scrollable()
    .Filterable()
    .Sortable()
    .DataSource(dataSource => dataSource
        .Ajax()
        .Read(read => read.Action("_Search", "Customer"))
    )
) 
```

## 控制器

```
public ActionResult _Search([DataSourceRequest]DataSourceRequest request)
{
    return Json(DataService.GetCustomers2().ToDataSourceResult(request));
} 
```

我设想控制器看起来像这样，但找不到任何以这种方式实现的示例，这是我需要帮助的。

```
public ActionResult _Search([DataSourceRequest]DataSourceRequest request, CustomerSearchModel customerSearchModel)
{
    return Json(DataService.GetCustomers2(customerSearchModel)
               .ToDataSourceResult(request));
} 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-03-27T19:32:44.697

如果您的要求可以通过内置过滤来解决，那么 Nicholas 的回答可能会起作用。但是，如果您的需求可以通过内置过滤来解决，您为什么要创建自定义搜索表单？

所以我想你有理由手动进行搜索，所以这就是我们在项目中完成它的方式（所以也许有更简单的方法，但这仍然对我们有用）：

控制器动作很好：

```
public ActionResult _Search([DataSourceRequest]DataSourceRequest request, 
                            CustomerSearchModel customerSearchModel)
{
    return Json(DataService.GetCustomers2(customerSearchModel)
               .ToDataSourceResult(request));
} 
```

下一步：您需要一个 JavaScript 函数，该函数从搜索表单中收集数据（JS 对象的属性名称应与您的属性名称匹配`CustomerSearchModel`）：

```
function getAdditionalData() {
    // Reserved property names
    // used by DataSourceRequest: sort, page, pageSize, group, filter
    return {
        FirstName: $("#FirstName").val(),
        LastName: $("#LastName").val(),
        //...
    };
} 
```

然后你可以配置这个函数在每次读取时调用：

```
.DataSource(dataSource => dataSource
        .Ajax()
        .Read(read => read.Action("_Search", "Customer")
                          .Data("getAdditionalData"))
    ) 
```

最后在你的按钮点击你只需要刷新网格：

```
$('#Grid').data('kendoGrid').dataSource.fetch(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-27T19:20:34.530

您可以通过调用`filter`网格的数据源在网格上设置过滤器。

所以在你的按钮的`onclick`处理函数中，放这样的东西：

```
var $Grid = $('#Grid').data('kendoGrid');

$Grid.dataSource.filter([
  { field: 'FirstName', operator: 'eq', value: $('#firstName').val() },
  { field: 'LastName', operator: 'eq', value: $('#lastName').val() }
]); 
```

这是 Kendo 文档的链接：[DataSource.filter](http://docs.kendoui.com/api/framework/datasource#methods-filter)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-08-05T09:21:18.177

请参阅[将附加数据传递给操作方法](http://docs.kendoui.com/getting-started/using-kendo-with/aspnet-mvc/helpers/grid/ajax-binding)

> 要将附加参数传递给操作，请使用**Data**方法。提供一个 JavaScript 函数的名称，该函数将返回一个带有附加数据的 JavaScript 对象：

下面列出了一个有效的搜索示例：

重要：`type="button"`对于按钮；对于`AutoBind(false)`网格；否则，它将无法正常工作

**看法**

```
@model  IEnumerable<KendoUIMvcSample.Models.Sample>
@{
    ViewBag.Title = "Index";
}

<script type="text/javascript">

    function getAdditionalData()
    {
        return {
            FirstName: 'A',
            LastName: 'B',
        };
    }

    $(document).ready(function ()
    {
        $('#Submit1').click(function ()
        {
            alert('Button Clicked');
            //Refresh the grid
            $('#ssgrid222').data('kendoGrid').dataSource.fetch();
        });

    });

</script>

<h2>Index</h2>
@using (Html.BeginForm())
{ 

    @(Html.Kendo().Grid<KendoUIMvcSample.Models.Sample>()    
    .Name("ssgrid222")
    .Columns(columns => {
        columns.Bound(p => p.SampleDescription).Filterable(false).Width(100);
        columns.Bound(p => p.SampleCode).Filterable(false).Width(100);
        columns.Bound(p => p.SampleItems).Filterable(false).Width(100);
    })
    .AutoBind(false)
    .Pageable()
    .Sortable()
    .Scrollable()
    .Filterable()
    .HtmlAttributes(new { style = "height:430px;" })
    .DataSource(dataSource => dataSource
        .Ajax()
        .PageSize(20)
        .Read(read => read.Action("Orders_Read", "Sample")
        .Data("getAdditionalData"))
     )
  )

 <input id="Submit1" type="button" value="SubmitValue" />

} 
```

**控制器**

```
namespace KendoUIMvcSample.Controllers
{
    public class SampleController : Controller
    {
        public ActionResult Index()
        {
            SampleModel AddSample = new SampleModel();
            Sample s1 = new Sample();
            return View(GetSamples());
        }
        public static IEnumerable<Sample> GetSamples()
        {
            List<Sample> sampleAdd = new List<Sample>();
            Sample s12 = new Sample();
            s12.SampleCode = "123se";
            s12.SampleDescription = "GOOD";
            s12.SampleItems = "newone";
            Sample s2 = new Sample();
            s2.SampleCode = "234se";
            s2.SampleDescription = "Average";
            s2.SampleItems = "oldone";
            sampleAdd.Add(s12);
            sampleAdd.Add(s2);
            return sampleAdd;
        }
        public ActionResult Orders_Read([DataSourceRequest]DataSourceRequest request, CustomerSearchModel customerSearchModel)
        {
            string firstParam = customerSearchModel.FirstName;
            return Json(GetOrders().ToDataSourceResult(request));
        }
        private static IEnumerable<Sample> GetOrders()
        {
            return GetSamples();
        }
    }
    public class CustomerSearchModel
    {
        public string FirstName { get; set; }
        public string LastName { get; set; }
    }
} 
```

**模型**

```
namespace KendoUIMvcSample.Models
{
    public class SampleModel
    {
        public List<Sample> samples;
    }
    public class Sample
    {
        public string SampleDescription { get; set; }
        public string SampleCode { get; set; }
        public string SampleItems { get; set; }
    }
} 
```

# function - VBScript 函数的返回值

> ID：15667421
> 
> 赞同：37
> 
> 时间：2013-03-27T19:10:48.560
> 
> 标签：function, vbscript, return-value

我有两个函数，我试图在第二个函数中使用一个函数的结果。它将进入该`else`部分，但它没有为“cus_number”打印任何内容。

如何打印“cus_number”？

```
Function getNumber
    number = "423"
End Function

cus_number = getNumber

If (IsNull(cus_number)) Then
    WScript.Echo "Number is null"
Else
    WScript.Echo "cus_number : " & cus_number
End If 
```

* * *

## 回答 #1

> 赞同：89
> 
> 时间：2013-03-27T19:13:40.540

要从 VBScript 函数返回值，请将值分配给函数的名称，如下所示：

```
Function getNumber
    getNumber = "423"
End Function 
```

# asp.net - 隐藏 DIV 中的复选框列表

> ID：15667422
> 
> 赞同：2
> 
> 时间：2013-03-27T19:10:51.310
> 
> 标签：asp.net

我在 DIV 中有一个 CheckboxList。单击按钮时，DIV 显示为模式弹出窗口。然后用户勾选复选框列表中的任意数量的项目并单击确定。这隐藏了div。

一旦用户单击主窗体上的保存按钮，我需要根据单击复选框列表中的哪些项目将参数传递给存储过程，但是当我运行保存代码时它们总是设置为未选中。我很想知道如何正确地做到这一点。

谢谢

查询：

```
 $(document).ready(function () {
        $('#<%=txtLANG.ClientID %>').click(function () {
            $("#overlay-back").dialog({
                resizable: false,
                modal: true,
                width: 500,
                height: 400,
                buttons: {
                    OK: function () {
                        GetLanguages();
                        $(this).dialog("close");
                    },
                    Cancel: function () {
                        $(this).dialog("close");
                    }
                }
            });
        });
    }); 
```

在 CodeBehind 中保存方法

```
 private void Save()
  {
        List<string> lstItemsChecked = new List<string>();

        for (int i = 0; i < chkTopLanguages.Items.Count; i++)
        {
            if(chkTopLanguages.Items[i].Selected)
                lstItemsChecked.Add(chkTopLanguages.Items[i].Value);
        }
        //stored proc call
  }

  protected void btnSubmit_Click(object sender, EventArgs e)
  {
         Save();
  } 
```

DIV 弹出窗口和 CheckBoxList 的 ASPX 代码

```
 <div id="overlay-back" style="display:none;">
  <td rowspan="3" valign="top">
     <asp:CheckBoxList ID="chkTopLanguages" TextAlign="Right" runat="server" />
           <br />
     <asp:TextBox runat="server" ID="txtOtherLanguages" Text="Other Languages..."></asp:TextBox>
  </td>
 </div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T19:46:59.640

尝试将 AutoPostBack 设置为 false：

```
<asp:CheckBoxList ID="chkTopLanguages" TextAlign="Right" runat="server" AutoPostBack="false" /> 
```

对于 CheckBoxList 控件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T19:56:00.673

可能发生这种情况是因为当您关闭弹出窗口时，无法访问弹出窗口上的控件。我不知道确切的原因，但您可以在 javascript 中创建一个数组变量。每当您选中或取消选中复选框时；在 javascript 的帮助下，您可以将该变量修改为所有变量的设置与否。

我很久以前就使用了模态弹出窗口，并且只有这样的问题。这种方法可能不是最佳的，但肯定会奏效。

# php - 在 xampp 数据库中排列图像

> ID：15667424
> 
> 赞同：2
> 
> 时间：2013-03-27T19:10:52.227
> 
> 标签：php, image, xampp

我在 php 中有这段代码。我希望我的图像显示为水平显示。这些图像保存在 xampp 中。有谁能够帮我？这是我的代码：

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
</head>

<body>
<?php
mysql_connect("localhost","root","");
mysql_select_db("dbLetters");
$res=mysql_query("select * from tbLetters");
echo "<table>";
while ($row = mysql_fetch_array($res))
{
echo "<tr>";
echo "<td>";?> <img src = "<?php echo $row["images"]; ?>"  height="200" width="200"> <? php echo "</td>";
echo "</tr>";

}
echo "</table>";
?>

</body>
</html>

your response will be a big help. thanks. :)) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T19:16:10.533

除非您使用数据 url，否则您实际上需要设置一个单独的脚本来拉取该脚本，该脚本会将图像提供给浏览器。

这将使您的图片网址类似于`image.php?id=<image_id>`. image.php 脚本将获取图像并将图像提供给浏览器。

将图像数据存储在 mysql 中通常不是一个好主意。

# javascript - 是否可以使用 Javascript 检查是否在样式标签内定义了某些 CSS 属性？

> ID：15667426
> 
> 赞同：4
> 
> 时间：2013-03-27T19:10:54.357
> 
> 标签：javascript, css, styles

我正在编写一个脚本，该脚本需要检查`<style>`标签内是否定义了某些 CSS 属性。

```
<style type="text/css">
#bar {width: 200px;}
</style> 
```

```
<div id="foo" style="width: 200px;">foo</div>
<div id="bar">bar</div> 
```

```
// 200px
console.log(document.getElementById("foo").style.width);

// an empty string
console.log(document.getElementById("bar").style.width);

if(property_width_defined_in_style_tag) {
    // ...
} 
```

这可能吗？

我不是想得到`getComputedStyle(ele).width`顺便说一句。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-27T20:45:38.270

我不确定这是你想要的，它最接近你的第一个伪代码，你有一个元素实例，无论如何希望它有帮助：

```
var proto = Element.prototype;
var slice = Function.call.bind(Array.prototype.slice);
var matches = Function.call.bind(proto.matchesSelector || 
                proto.mozMatchesSelector || proto.webkitMatchesSelector ||
                proto.msMatchesSelector || proto.oMatchesSelector);

// Returns true if a DOM Element matches a cssRule
var elementMatchCSSRule = function(element, cssRule) {
  return matches(element, cssRule.selectorText);
};

// Returns true if a property is defined in a cssRule
var propertyInCSSRule = function(prop, cssRule) {
  return prop in cssRule.style && cssRule.style[prop] !== "";
};

// Here we get the cssRules across all the stylesheets in one array
var cssRules = slice(document.styleSheets).reduce(function(rules, styleSheet) {
  return rules.concat(slice(styleSheet.cssRules));
}, []);

// get a reference to an element, then...
var bar = document.getElementById("bar");

// get only the css rules that matches that element
var elementRules = cssRules.filter(elementMatchCSSRule.bind(null, bar));

// check if the property "width" is in one of those rules
hasWidth = elementRules.some(propertyInCSSRule.bind(null, "width")); 
```

我认为你可以为你的目的重用所有这些代码，或者只是其中的一部分，它是故意模块化的——例如，一旦你有所有的`cssRules`flatten 或`elementRules`，你仍然可以使用`for`循环并检查你需要什么。它使用 ES5 函数和[matchSelector](https://developer.mozilla.org/en-US/docs/DOM/Element.mozMatchesSelector)，因此在旧浏览器中没有 shims 将无法工作。另外，您还可以按优先级等进行过滤 - 例如，您可以删除所有优先级低于内联样式的属性等。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-27T19:13:17.697

您可以在 javascript 中完全探索[styleSheets](https://developer.mozilla.org/en-US/docs/DOM/stylesheet)。

从`document.styleSheets`数组开始。这些值是文档使用的不同样式元素或 CSS 文件。

# wordpress - Wordpress：评论存档页面

> ID：15667430
> 
> 赞同：2
> 
> 时间：2013-03-27T19:11:09.453
> 
> 标签：wordpress, comments, archive, woocommerce

我目前正在为客户开发一个 Wordpress 网站/主题。

他有一个特定的要求，即能够向存档页面添加评论 - 它实际上需要是页面本身的评论，而不是该存档中的帖子/产品。

我实际上需要一种将comments.php 添加到archive.php 底部的方法，尽管我知道这行不通，因为存档页面没有用于关联评论的ID。

有没有办法根据类别给类别存档页面一个ID，然后将评论模板挂钩到每个存档的这个ID？

非常感谢您提供的任何建议 - 这是一个漫长的过程，这是完成项目的最后一点！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T21:05:04.907

**不幸的是，这似乎不是直接可行的，但是对于任何想做类似事情的人来说，有一个名为IntenseDebate**的第三方评论解决方案适合添加到存档页面。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-10-31T23:14:39.350

如果您使用 DISQUS，您可以使用 PHP 调用评论模板来绕过 WordPress 检查并在档案页面上发表评论。

```
include 'comments.php'; 
```

# vba - 根据单元格值复制和粘贴行

> ID：15667432
> 
> 赞同：0
> 
> 时间：2013-03-27T19:11:12.653
> 
> 标签：vba, excel, copy, copy-paste

我试图复制行 10:12 并在每次 D8 中的值超过 1 时将其粘贴到下面（即 D8 = 2 然后粘贴一次，如果值等于 3 然后粘贴两次，依此类推）。我什至不知道从哪里开始这段代码所以......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T12:32:25.157

这个公式

```
=IF(A$8>=1,A10,"") 
```

将允许您根据第八行中的值向下复制，如果您只想坚持 D8 中的值，请将公式更改为

```
=IF($D$8>=1,A10,"") 
```

该公式需要每第三行更新一次，因此单元格 A16 中的公式为

```
=IF(A$8>=2,A13,"") 
```

![在此处输入图像描述](../Images/442a761ad388a8fd62c7315b712aa874.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T21:46:59.620

我猜你可以做这样的事情：

```
Sub LoopeyPasteyFantastico()
    Dim ValueOverOne As Long
    Dim i As Long
    Dim LastRow As Long

    ValueOverOne = Sheet1.Cells(8, 4).Value - 1

    For i = 1 To ValueOverOne
        Sheet1.Range("10:12").Select
        Selection.Copy
        LastRow = Sheet1.Range("A65536").End(xlUp).Row + 1
        Sheet1.Range(LastRow & ":" & LastRow).Select
        Selection.PasteSpecial Paste:=xlPasteValues, Operation:=xlNone, SkipBlanks _
            :=False, Transpose:=False
    Next i
End Sub 
```

或者更好的选择是这个（你不必使用复制和粘贴）：

```
Sub LoopeyPasteyFantasticoAlternative()
    Dim ValueOverOne As Long
    Dim i As Long
    Dim LastRow As Long

    ValueOverOne = Sheet1.Cells(8, 4).Value - 1

    For i = 1 To ValueOverOne
        LastRow = Sheet1.Range("A65536").End(xlUp).Row + 1
        Sheet1.Range(LastRow & ":" & LastRow + 2).Value = Sheet1.Range("10:12").Value
    Next i
End Sub 
```

# google-apps-script - 带有传递参数的表单htmlservice问题

> ID：15667439
> 
> 赞同：0
> 
> 时间：2013-03-27T19:11:35.983
> 
> 标签：google-apps-script

我查看了其他帖子，并且正在努力解决如何将表单值传递给 GAS 的相同问题。由于 GUI 编辑器已经贬值，我决定走*htmlservice*表单路线。在下面这个简单的代码中，我只是试图访问表单字段*aField*并将其粘贴到单元格中。

```
function doGet() {

return HtmlService.createHtmlOutputFromFile('myForm.html');
}  

function processForm(value) {

var myRange = SpreadsheetApp.openById("xxx").getSheetByName("Results-List").getDataRange("B20");    
myRange.setValue(value.aField);

 } 
```

这是 HTML 模板**myForm.html**：

```
 <html>

 <form id="myForm">
 <input name="aField" id="aField">
 <input type="button" id="submit" value="submit" onclick = "sendData()">
 </form>

 <script>
   function sendData() {
    google.script.run.processForm(document.getElementById("myForm"));
}

 </script>
 </html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T22:08:42.970

[.getDataRange()](https://developers.google.com/apps-script/reference/spreadsheet/spreadsheet?hl=en#getDataRange%28%29)有不同的用途。使用[.getRange('B20') 让它](https://developers.google.com/apps-script/reference/spreadsheet/spreadsheet?hl=en#getRange%28String%29)工作。

# iphone - 将 NSManagedObject 复制到内存中的新对象

> ID：15667441
> 
> 赞同：0
> 
> 时间：2013-03-27T19:11:44.200
> 
> 标签：iphone, ios, objective-c, xcode, ipad

我有一个菜单屏幕，其中填充了来自 NSManagedObject 的数据。当这个屏幕出现时，用户可以输入各种值。等等

我遇到的问题是我不需要更改用于填充屏幕的初始 NSManagedObject。我需要一个用户可以更改的副本，因为如果他们在一切完成之前取消，那么原始和正确的信息会被公正的数据破坏。

但是，我在我的 NSManagedObject 中实现任何类型的复制方法或进程时遇到问题，因为所有属性都是@dynamic。

如果我只是在 NSManagedObject 内的 copyWithZone 方法中“返回自我”，那会正确复制所有内容吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T19:21:33.880

您想要的是对同一个 NSManagedObject 进行更改，但在子 NSManagedObjectContext 中。这样，如果您需要放弃更改，您可以直接丢弃子上下文，而不会影响您的主上下文或对象。看到[这个问题](https://stackoverflow.com/questions/12271464/how-do-i-create-a-child-nsmanagedobjectcontext)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-27T23:01:33.760

为什么不使用类别将复制方法添加到您的自定义 NSManagedObject？

如果您的 NSManagedObject 是用户，则创建一个新类别 User+copy.h/m，您将在其中添加复制方法，该方法将简单地一一复制所有单个字段。

# bash - 变量具有空格分隔的值我需要为下一个脚本获取 3 个值组

> ID：15667442
> 
> 赞同：2
> 
> 时间：2013-03-27T19:11:46.413
> 
> 标签：bash, ksh

我有一个由 sql 命令填充的 shell 脚本环境变量，该 sql 命令返回 3 列的多条记录。我需要传递给另一个 shell 脚本的每条记录。

```
QUERYRESULT=`${SQLPLUS_COMMAND} -s ${SQL_USER}/${SQL_PASSWD}@${SQL_SCHEMA}<<endl
set heading off  feedback off
select col1, col2,  col3
from mytable
where ......)
order by ......
;
exit
endl`
echo ${QUERYRESULT} 
```

输出所有列的单行空格分隔，所有变量都保证不为空

```
 val1 val2 val3 val1 val2 val3 val1 val2 val3 ...... 
```

我需要为每条记录调用以下内容

```
nextScript.bash val1 val2 val3 
```

我也可以运行查询但计算记录以确定我需要调用nextScript.bash 的次数。

关于如何从具有多个 3 个参数的单个 env 变量到执行下一个脚本的任何想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T19:39:25.570

不使用变量：

```
( ${SQLPLUS_COMMAND} -s ${SQL_USER}/${SQL_PASSWD}@${SQL_SCHEMA}<<endl
set heading off  feedback off
select col1, col2,  col3
from mytable
where ......)
order by ......
;
exit
endl
) | while read line;do echo $line; done 
```

# ruby-on-rails-3 - 使用 Omniauth、Ajax 和 Rails 在模式中登录 Facebook

> ID：15667446
> 
> 赞同：1
> 
> 时间：2013-03-27T19:12:08.990
> 
> 标签：ruby-on-rails-3, facebook, facebook-javascript-sdk, omniauth, warden

目前，我正在努力通过社交网络（在本例中为 facebook）从模式中启用登录并使用omniauth。因为成功时需要进行某些 dom 更改，所以我也想使用 ajax 调用。

我在coffeescript中的实际点击功能是：

```
(".sign-sns .facebook").click (e) ->
    FB.login (response) ->
      if response.authResponse
        $.post("/auth/facebook/callback")
        .done (response) ->
          SOME_CALLBACKS_HERE
        .fail (response) ->
          DISPLAY_SOME_ERROR 
```

但是，当它发出 ajax 请求时，它从未真正命中路由中设置的控制器操作。如果我要手动获取或发布为 url，它会正常工作，但尝试跳过它并直接发布到回调路由似乎不起作用。

我还尝试了另一种方法，将其发布到我将链接的网址：

```
(".sign-sns .facebook").click (e) ->
  $.post("/auth/facebook?path=signup")
  .done (response) ->
    SOME_CALLBACKS_HERE
  .fail (response) ->
    DISPLAY_SOME_ERROR 
```

这会击中我的控制器，但是当我尝试通过warden进行身份验证时，将没有设置omniauth参数。所以我有点卡住了。任何人都知道我可能做错了什么？

# ajax - 试图将来自 AJAX 响应的 JSONP 数据转换为 HTML

> ID：15667453
> 
> 赞同：0
> 
> 时间：2013-03-27T19:12:33.020
> 
> 标签：ajax, node.js, jsonp

响应正在通过开发人员工具中的浏览器传递，但我无法从我想要的响应中获取数据，并将其转换为可行的形式。

应用程序.js

```
res.jsonp({
                pollName: loadedPoll.pollName,
                pollTitle: loadedPoll.pollTitle,
                pollID: loadedPoll._id,
                pollOptions: loadedPoll.pollOptions
            }); 
```

javascript

```
 $.ajax({
        url: 'http://Thisiscorrect.com:3000/loadPoll',
        dataType: 'jsonp',
        data:{questionName: 'testPoll'},
        success: function(data){ //console.log(data);
            var X = data.toString();

            console.log(X);
            //console.log($(x).filter("#responseText"));
        } 
```

如果我在开发者控制台中查看数据

`responseText: "jQuery19105805847404990345_1364409899124 && jQuery19105805847404990345_1364409899124({↵ "pollName": "testPoll",↵ "pollTitle": "Do you like Doritos?",↵ "pollID": "5150a7596a76e6378a000002",↵ "pollOptions": [↵ "Yes",↵ "No",↵ "Maybe"↵ ]↵});"`

这就是我想要的，但上面的两种方法都不起作用。有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T19:22:06.167

代替 data.tostring，试试

```
JSON.stringify( data) 
```

# extjs4.1 - ExtJS 4.1 中使用行扩展器的嵌套网格

> ID：15667460
> 
> 赞同：2
> 
> 时间：2013-03-27T19:13:01.350
> 
> 标签：extjs4.1

在前端我有一个呼叫网格。每个呼叫可能有一个或多个与之关联的注释，因此我想添加向下钻取到每个呼叫网格行并显示相关注释的功能。

在后端，我使用的是 Ruby on Rails，Calls 控制器返回一个 Calls json 记录集，每行都有嵌套的 Notes。这是使用**to_json(:include => blah)**完成的，以防您想知道。

所以问题是：如何添加当用户双击或展开父网格中的一行时显示的子网格（或只是一个 div）？如何将嵌套的 Notes 数据绑定到它？

我在那里找到了一些答案，这些答案让我找到了我需要去的地方。感谢那些帮助我从那里拿走它的人。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-27T19:13:01.350

我将直接发布代码，无需过多解释。请记住，我的 json 记录集有嵌套的 Notes 记录。在客户端，这意味着每个 Calls 记录都有一个嵌套的**notesStore**，其中包含相关的 Notes。另外，为了简单起见，我只显示一个 Notes 列 - 内容。

```
Ext.define('MyApp.view.calls.Grid', {

  alias:                             'widget.callsgrid',
  extend:                            'Ext.grid.Panel',

  ...

  initComponent:                      function(){

     var me = this;

     ...

     var config = {

       ...

       listeners:                  {
            afterrender: function (grid) {
                me.getView().on('expandbody',
                    function (rowNode, record, expandbody) {
                        var targetId = 'CallsGridRow-' + record.get('id');
                        if (Ext.getCmp(targetId + "_grid") == null) {
                            var notesGrid = Ext.create('Ext.grid.Panel', {
                                forceFit: true,
                                renderTo: targetId,
                                id: targetId + "_grid",
                                store: record.notesStore,
                                columns: [
                                    { text: 'Note', dataIndex: 'content', flex: 0 }
                                ]
                            });
                            rowNode.grid = notesGrid;
                            notesGrid.getEl().swallowEvent(['mouseover', 'mousedown', 'click', 'dblclick', 'onRowFocus']);
                            notesGrid.fireEvent("bind", notesGrid, { id: record.get('id') });
                        }
                    });
            }
        },

        ...

      };

      Ext.apply(me, Ext.apply(me.initialConfig, config));
      me.callParent(arguments);
    },

    plugins: [{
      ptype:                'rowexpander',
      pluginId:               'abc',
      rowBodyTpl:            [
        '<div id="CallsGridRow-{id}" ></div>'
      ]
   }]
}); 
```

# xml - 使用 VB.NET 读取 xml 文档的特定部分

> ID：15667462
> 
> 赞同：2
> 
> 时间：2013-03-27T19:13:13.210
> 
> 标签：xml, vb.net

伙计们，我有一个带有这个模型的xml：

```
<XML>
  <IdValue id="1">
    <Value a="1" b="2" c="3" />
  </IdValue >
  <IdValue id="2">
    <Value a="10" b="20" c="30" />
  </IdValue >
</XML> 
```

所以我想用`VB.NET`程序读取属性的值`a`,`b`和`c`, 基于节点的属性 id 的值`IdValue`。

你能帮帮我吗？

谢谢 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T20:15:27.587

使用 VB.Net 的 XML 文字和 Linq-to-XML 非常容易。

给定以下 XML：

```
Dim xml = <XML>
            <IdValue id="1">
                <Value a="1" b="2" c="3" />
            </IdValue >
            <IdValue id="2">
                <Value a="10" b="20" c="30" />
            </IdValue >
           </XML> 
```

您可以像提取所需的值一样简单

```
Dim result = From id In xml.<IdValue>
             Select New With { .Id = id.@id,
                               .a  = id.<Value>.@a, 
                               .b  = id.<Value>.@b,
                               .c  = id.<Value>.@c }

For Each item in result
    Console.WriteLine(String.Format("id:{0} a:{1} b:{2} c:{3}", item.id, item.a, item.b, item.c))
Next 
```

**输出：**

> id:1 a:1 b:2 c:3
> id:2 a:10 b:20 c:30

如果你对单个感兴趣`<IdValue>`，可以添加一个`Where`从句；例如：

```
Dim result = From id In xml.<IdValue>
             Where id.@id = 2
             Select New With { .Id = id.@id,
                               .a  = id.<Value>.@a, 
                               .b  = id.<Value>.@b,
                               .c  = id.<Value>.@c } 
```

# iphone - 加载 WebView 时显示表格视图单元格

> ID：15667463
> 
> 赞同：0
> 
> 时间：2013-03-27T19:13:14.880
> 
> 标签：iphone, ios, uitableview, uiwebview

我的分组表视图中有一个 UIWebView，并且因为一个单元格的高度是可变的，我希望函数 heightForRowAtIndexPath 在计算之前等待 webViewDidFinish。我怎样才能做到这一点 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T09:29:08.060

您不能停止显式调用 heightForRowAtIndexPath，但您可以对此进行调整。再次加载web视图后调用表重新加载高度数据。

使用相同的 Web 视图委托方法。

```
– webView:shouldStartLoadWithRequest:navigationType:

– webViewDidStartLoad:

– webViewDidFinishLoad:

– webView:didFailLoadWithError: 
```

在 webViewDidFinishLoad 中存储变量值（对于 hieght），然后调用 tableview 重新加载数据。现在在 cellForRowAtIndex 方法中使用这个变量作为高度。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T19:37:19.210

没试过，但是如果你做 [_myTable reloadData]; 在你的 webViewDidFinish 结束时？那应该重新加载表信息。

或者你可以尝试一个带有while循环的BOOL？

在发送请求之前将 boolStillLoading 设置为 true，然后当它返回时将其设置为 false

```
viewDidLoad...
while(boolStillLoading){
    sleep(.2);
} 
```

这不是漂亮的或可能是最有效的方法，但它会在您执行之前的内容时阻止加载表。

虽然很想看到其他方法......

# ruby-on-rails - Ruby：在循环中取消转义特殊符号

> ID：15667464
> 
> 赞同：0
> 
> 时间：2013-03-27T19:13:14.993
> 
> 标签：ruby-on-rails, escaping

我想要做：

```
text.gsub('\a', "\a").gsub('\b', "\b")......gsub('\n', "\n").....gsub('\t', "\t")......gsub('\z', "\z") 
```

我来到了这段代码：

```
('a'..'z').each { |sym| text.gsub!("\\#{sym}", "\#{sym}") } 
```

但问题是我不能`"\#{sym}"`在这里生成，好像它是`"\n"`or `"\t"`。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T19:33:42.673

不幸的是，没有“好”的方法来做到这一点。需要这个的正常情况是解码像 AJAX 这样的传输格式，但是这些库只是自己实现正确的映射，所以你很少在自己的代码中需要它。你有两个选择，真的：

1.  像在原始代码中一样，自己写出映射。为了使其更具可读性，您可以做的一件事是创建一个字典并对其进行循环，而不是链接 gsub。

2.  用于`eval`创建字符串。例如：

    ```
    c = 'n'
    newline = eval "\"\\#{c}\"" 
    ```

# c# - 如何创建无限嵌套的子菜单？

> ID：15667473
> 
> 赞同：1
> 
> 时间：2013-03-27T19:13:39.513
> 
> 标签：c#, asp.net-mvc-3, entity-framework

我正在尝试编写一个模块。它的菜单管理模块，您可以创建所需的菜单和子菜单。但是现在在我的模块中，您的菜单深度可以直到三个。这意味着我的模块最多支持根菜单和子菜单以及子菜单的子菜单，但是我正在考虑一种算法来创建无限嵌套的子菜单以及如何在站点中显示它们。我的意思是我想让用户自由地创建无限嵌套的子菜单。我不知道应该如何设置我的模型和数据库来实现我的目标。我正在使用 MVC3 和 C# 以及实体框架。谢谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-27T19:24:33.843

就数据模型而言，您可以：

*   ID
*   菜单文本
*   网址
*   父 ID

对于顶级菜单项，ParentId 将为 NULL。否则，它指向父级。

大多数 UI 菜单（如 Superfish.js）使用`<ul>`和`<li>`元素来呈现菜单。只需遍历数据库中的菜单项即可构建`<ul>`结构。

这是一个开始：

```
private void BuildMenu()
{
    List<MenuItem> menuItems = GetTopLevelMenuItems();

    string html = "<ul>";

    foreach (var menuItem in menuItems)
    {
        html += BuildMenuSubMenu(menuItem);
    }
    html += "</ul>"
}

private string BuildMenuSubMenu(MenuItem menuItem)
{
    string html = string.Empty;

    List<MenuItem> childItems = GetChildItems(menuItem);

    html += string.Format("<li><a href=\"{0}\">{1}</a>", menuItem.Url, menuItem.MenuText);

    if (childItems.Count > 0)
    {
        html += "<ul>";
        foreach (var child in childItems)
        {
            html += BuildMenuSubMenu(child);
        }
        html += "<ul>";
    }

    html += "<li>";

    return html;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-12T18:40:11.000

```
 public List<_Category> GetTopLevelMenuItems() 
    { 
       entityName db = new entityName();
       var categories = db.Category.Where(x => x.CategoryID == null).Select(x => new _Category() { 
    ID = x.ID,
    CategoryName = x.CategoryName

    }).ToList();

    return categories;
    }

    public List<_Category> GetChildItems(_Category C)
    {

        entityName db = new entityName();
        var categories = db.Category.Where(x => x.CategoryID == C.ID).Select(x => new _Category()
        {
            ID = x.ID,
            CategoryName = x.CategoryName,

        }).ToList();
        return categories;
    }
    public string BuildMenu()
    {
        List<_Category> menuItems = GetTopLevelMenuItems();

        string html = "<ul>";

        foreach (var menuItem in menuItems)
        {
            html += BuildMenuSubMenu(menuItem);
        }
        html += "</ul>";
        return html;
    }
    public string BuildMenuSubMenu(_Category menuItem)
    {
        string html = string.Empty;

        List<_Category> childItems = GetChildItems(menuItem);

        html += string.Format("<li><a href=\"{0}\">{1}</a>", menuItem.ID, menuItem.CategoryName);

        if (childItems.Count > 0)
        {
            html += "<ul>";
            foreach (var child in childItems)
            {
                html += BuildMenuSubMenu(child);
            }
            html += "</ul>";

        }

        html += "</li>";

        return html;
    }
public class _Category
{
    public int ID { get; set; }
    public int? CategoryID { get; set; }
    public string CategoryName { get; set; }
} 
```

*   编辑完整代码

在 ActionResult 中使用：

```
ViewData["menu"] = BuildMenu(); 
```

# ruby-on-rails - 对象 id 和 youtube 视频 id 与 youtube_it gem 相同

> ID：15667475
> 
> 赞同：0
> 
> 时间：2013-03-27T19:13:51.840
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, youtube, ruby-on-rails-3.2

我正在使用这个 gem 从我的应用程序将视频上​​传到 youtube：

[https://github.com/kylejginavan/youtube_it](https://github.com/kylejginavan/youtube_it)

这是我对令牌的要求：

```
{:url=>"http://uploads.gdata.youtube.com/action/FormDataUpload/AIwbFATUMuFsv2GfJp4jkDXk3mkLNF6WklzOSoX05p96enTOMAj6DlnXpe1Rav-ZxZwNRrGC_7-8kStHFA2nisMb09CjdJgNBA?nexturl=http://localhost:3000/es/cvs/5152d31aa61654e56b000001/save_video?cv_id=5152d31aa61654e56b000001", :token=>"AIwbFAQv5ZE9-TBWTNNJi4Ng6_tvoLaxW0JVDCU7TE0rxiT_2CUFw-eZR5kuZr_0tkWBTtpWVu4I-OcfMsfnusqHYQNwq1EsVaCuGDnbqV07OwngagOQYXfzgnxwNzDJ5H1ESkRWKjtOVGGP1-ETDhDdB45-ZyYxlVQVKbitcrONJz1NKI4adqhVrPhmTJaKyjysb5mtWlNYoA1DGesmEwg6UG4y9Nwg1ekVYpi_fB8lvFE5CkchG1AhDkei6yq0wQSyxJVBbF3mhgFuh8ZSRvCuxRvKH7tTmx0ew3P9dmv61S5MQHs5_cwY-pGq4rce4xjVKBB68j5GoT6RaJxKbhLXrV6_pQwUACG40tTWxWhVHLZDneAlzDwnveFBJRE41xCI0G_sbkIJ5703Y1dLorXAGcjNxMFe3-MJ-zbPXWpyZeK7TD2s0lnbc6cdOPje8DGFAFmc6P_7TD6RzTepoBkOOhAokGKpAYkfxacBD77aaExHCzFHde-9jFNZQ2QelPL2YXwyMA8lcX81c3zItut1NKp1soXxuGDNkBPOpu2OzYuGTSBS9PPyvFfqUMHg5X2KDADn2uYNU25nDMIKJlG4VeCfntEbr1J0m1HpcFR3_8LK9hlehuHjqmY_7e8lIbSRJHmEEhw2bQG1aIh7gClZDVVfeJnA52r8Sb_7O4yWtkbii6 
```

当我上传视频时，我会在日志中看到这些参数：

```
{"cv_id"=>"5152d31aa61654e56b000001", "status"=>"200", "id"=>"5152d31aa61654e56b000001", "action"=>"save_video", "controller"=>"cvs", "locale"=>"es"} 
```

cv_id和**id都是****同**一个 id，这是不正确的。

 **但是在 url 我可以看到**youtube video id**，这是 url：

```
http://localhost:3000/es/cvs/5152d31aa61654e56b000001/save_video?cv_id=5152d31aa61654e56b000001&status=200&id=GJUIN83LrdQ 
```

正确的 youtube 视频 ID 是**GJUIN83LrdQ**

这些是我使用此资源的路线：

```
Myapp::Application.routes.draw do
  #
  #
  resources :cvs do
   member do
    get :upload, :save_video
   end
  end
  #
  #
end 
```

我正在使用强参数gem，我不知道这是不是问题。

我该如何解决这个问题？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T23:01:22.947

您的路线与您希望看到的数据不匹配。您的路由`:id`在路径中指定了一个参数，该参数将优先`id`于查询字符串中的参数。由于路径中的 id 和查询字符串中的 cv_id 相同（5152d31aa61654e56b000001），因此您会看到两个参数键的此值。

根据您的选择，考虑从您提供的查询字符串中省略 id`nexturl`并将其放在路径参数中`:id`：

```
http://localhost:3000/es/cvs/GJUIN83LrdQ/save_video?cv_id=5152d31aa61654e56b000001 
```

或者，重命名您的路线，使其在查询字符串中指定`:cv_id`和省略`cv_id`：

```
# route:
(/:locale)/cvs/:cv_id/save_video(.:format) cvs#save_video

http://localhost:3000/es/cvs/5152d31aa61654e56b000001/save_video?id=GJUIN83LrdQ 
```**

# jquery - 为什么我不能删除新的 jQuery 创建的 li？

> ID：15667480
> 
> 赞同：0
> 
> 时间：2013-03-27T19:14:12.950
> 
> 标签：jquery, web

我正在尝试创建一个实用 jQuery 格式的用户界面列表。用户使用输入字段和添加按钮添加到列表中，并且可以使用可排序功能对列表进行排序，并且应该能够双击以从列表中删除项目。但是，双击删除仅适用于我在 html 中输入的原始 ol li 项目。由于某种原因，我在 jQuery 中添加的 li 对象不会被双击删除。有谁知道为什么？

下面的代码摘录

```
$(document).ready(function () {
    $('ol').sortable();
    $('#button').click(function () {
        var toAdd = $('input[name=checkListItem]').val();
        $('.list').append('<li>' + toAdd + '</div>');
    });
    $("li").dblclick(function () {
        $(this).remove();
    });
    $(document).on('.dblclick', 'li', function () {
        $(this).remove();
    });
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T19:16:23.103

```
$(".list").on('dblclick', 'li',function () {  
   $(this).remove();
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T19:17:40.670

好的，有两个问题（下面解决，用一个活生生的例子）：

这段代码：

```
$("li").dblclick(function () {
    $(this).remove();
}); 
```

...只会将`dblclick`事件连接到运行时存在的元素上。因此，它不会与您稍后添加的元素挂钩。

这段代码：

```
$(document).on('.dblclick', 'li', function () {
    $(this).remove();
}); 
```

...*尝试*通过事件委托来处理它，但你不应该`.`在`.dblclick`.

所以（使用更正常的代码/缩进样式）：

```
$(document).ready(function () {
    $('ol').sortable();

    $('#button').click(function () {
        var toAdd = $('input[name=checkListItem]').val();

        $('.list').append('<li>' + toAdd + '</div>');
    });

    $(document).on('dblclick', 'li', function () {
        $(this).remove();
    });
}); 
```

[实例](http://jsbin.com/ewocih/1)| [来源](http://jsbin.com/ewocih/1/edit)

我在那里所做的是删除我上面提到的第一项，因为它不适用于动态添加的元素，并修复了第二项（删除了`.`）。

# asp.net - ASP.NET Web 服务 - 记录 SOAP XML

> ID：15667481
> 
> 赞同：1
> 
> 时间：2013-03-27T19:14:13.980
> 
> 标签：asp.net, .net, web-services, soap, asmx

我有一个在 IIS 上运行的 ASP.NET asmx Web 服务。

一个客户端正在尝试使用该服务，我可以看到（在重建之后） Global.asax Application_Start 受到他的尝试的打击......但特定的功能没有受到打击。

此链接 [从在 ASP.net 中运行的 Web 参考客户端获取 RAW Soap 数据](https://stackoverflow.com/questions/300674/getting-raw-soap-data-from-a-web-reference-client-running-in-asp-net) 为我正在尝试做的事情提供了一个“解决方案”，但它没有用。

我将上述链接的建议放在了我的 web.config 中，但即使我自己成功调用了该服务，也不会生成日志文件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-07-24T14:19:14.603

如果您希望在客户端捕获请求/响应，您可以使用 WCF 样式生成的代理连接到 ASMX Web 服务，只需使用“服务参考”而不是“Web 参考”，然后按照[您链接的 WCF 跟踪用于](https://stackoverflow.com/questions/300674/getting-raw-soap-data-from-a-web-reference-client-running-in-asp-net?lq=1)原始数据，以及[`System.ServiceModel.MessageLogging`](https://msdn.microsoft.com/en-us/library/ms730064(v=VS.110).aspx)用于特定于 SOAP 的东西。请记住：

1.  的`maxdatasize`属性`System.Net`将截断记录的数据，因此如果您的请求/响应更大，请选择更大的数字。`maxSizeOfMessageToLog`与 一起使用`System.ServiceModel.MessageLogging`。
2.  删除原始 ascii/hex 并仅`tracemode="protocolonly"`在`<source name="System.Net">`元素中显示 xml

但是，如果您想在服务器端捕获请求（即从您的 ASMX Web 服务中），您可以尝试[这里的建议](https://stackoverflow.com/a/5518868/1037948)，即从请求流中读取数据，`Application_BeginRequest`也可能从响应流中读取数据`Application_EndRequest`。

# jquery - 将变量传递给 jQuery scrollTo 的持续时间

> ID：15667484
> 
> 赞同：0
> 
> 时间：2013-03-27T19:14:26.793
> 
> 标签：jquery, scrollto

我正在处理的这个项目上的菜单链接触发了一个自定义功能。该函数有两个参数。n 是单击元素的索引，p 是要滚动到的 scrollTop。我想根据我们必须滚动过去的“幻灯片”数量来更改 scrollTo 的持续时间。每张幻灯片 1000 毫秒。我将所有索引设置为从 1 而不是 0 开始。然后循环遍历所有菜单列表项，如果是当前幻灯片，则将其索引存储在 x 中。返回 n - x... 等的绝对值。数学计算结果很好。问题是 scrollTo 不接受我的变量。有什么想法吗？

```
function calcScrollSpeed(n, p){
    var x = 1;
    var y;
    var pp = p + 'px';
    $('nav#left div ul li').each(function(i){
        var ii = 2;
        var iii = ii + i;
        if($(this).hasClass('current')) {
            x = iii;
        }
    });
    y = Math.abs(n - x);
    yy = y + '000';
    $.scrollTo(pp, yy);
    console.log(yy);
} 
```

顺便提一句

我将 ii 设置为 2 的原因是考虑到导航中未包含的徽标/主页链接元素。x 从 1 开始。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T19:17:02.887

问题是 yy 是一个字符串，而 nut 是一个数字

```
y = Math.abs(n - x);
yy = y + '000'; 
```

尝试

```
 yy = yy*1000 
```

# python - 将整个文件作为列表读取的首选方式

> ID：15667485
> 
> 赞同：2
> 
> 时间：2013-03-27T19:14:29.773
> 
> 标签：python, file-io

我刚刚看到 DSM 对我对问题的回答的评论create [a](https://stackoverflow.com/a/15665784/977038) [series of tuples using a for loop](https://stackoverflow.com/q/15665222/977038)并迫使我想知道是否有任何理由使用 fileObj.readlines() 而不是将 fileObj 传递给列表。据我所知，两者都给出了相同的结果。唯一的区别是可读性，但考虑到两者都具有同等的可读性，应该首选什么方式？

考虑两种情况

```
#This will create a tuple of file lines
with open("yourfile") as fin:
    tup = list(fin)

#This is a straight forward way to create a list of file lines
with open("yourfile") as fin:
    tup = fin.readlines() 
```

我试图计时，但这没有多大意义，因为它们都有相当的性能。

# c++ - 在 C++ 中将值设置为 Excel 单元格引发异常 0x800A03EC

> ID：15667486
> 
> 赞同：2
> 
> 时间：2013-03-27T19:14:30.767
> 
> 标签：c++, excel, automation, cell

我正在编写一个 Excel 插件。插件中的 UDF 之一是使用 C++ 中的 Excel 自动化为选定的单元格设置值。在我的代码中，我没有问题获取范围，从选定的单元格读取值，但是当我尝试将值设置为单元格时，如果该值是字符串，则代码抛出异常（0x80020005 类型不匹配），否则，它总是抛出HResult 0x800A03EC 异常。下面是一个代码片段：

有任何想法吗？

```
void SetValue()
{
   Excel::SheetsPtr pSheets = GetExcelApplicationObj()->GetWorksheets();
   Excel::_WorksheetPtr pSheet = GetExcelApplicationObj()->GetActiveSheet();

   _variant_t text = pSheet->Range["A2"]->Text; //Read value from selected cell works fine

   pSheet->Range["C2"]->Value = "Hello"; // throw 0x80020005 Type mismatch

   pSheet->Range["B2"]->Value = 5.0; //Set value throw Exception with HRESULT 0x800A03EC
}

Excel::_Application* GetExcelApplicationObj()
{
    if (m_pApp == NULL)
    {
        std::vector<HWND>::iterator it;
        std::vector<HWND> handles = getToplevelWindows();
        for (it = handles.begin(); it != handles.end(); it++)
        {
            HWND hwndChild = NULL;
            ::EnumChildWindows( (*it), EnumChildProc, (LPARAM)&hwndChild);
            if (hwndChild != NULL)
            {
                Excel::Window* pWindow = NULL;
                HRESULT hr = ::AccessibleObjectFromWindow(hwndChild, OBJID_NATIVEOM, __uuidof(Excel::Window), (void**)&pWindow);
                if (SUCCEEDED(hr))
                {
                    if (pWindow != NULL)
                    {
                        m_pApp = pWindow->GetApplication();
                        pWindow->Release();
                    }
                    break;
                }
            }
        }
    }
    return m_pApp;
}

std::vector<HWND> getToplevelWindows()
{
    EnumWindowsCallbackArgs args( ::GetCurrentProcessId() );
    if ( ::EnumWindows( &EnumWindowsCallback, (LPARAM) &args ) == FALSE ) {
      return std::vector<HWND>();
    }
    return args.handles;
}

BOOL CALLBACK EnumWindowsCallback( HWND hnd, LPARAM lParam )
{
    EnumWindowsCallbackArgs *args = (EnumWindowsCallbackArgs *)lParam;

    DWORD windowPID;
    (void)::GetWindowThreadProcessId( hnd, &windowPID );
    if ( windowPID == args->pid ) {
        args->handles.push_back( hnd );
    }

    return TRUE;
}

BOOL CALLBACK EnumChildProc(HWND hwndChild,LPARAM lParam)
{
    CHAR className[128];
    ::GetClassName(hwndChild, className, 128);
    if (strcmp(className, "EXCEL7") == 0)
    {
        HWND * phandle = (HWND*)lParam;
        (*phandle) = hwndChild;
        return FALSE;
    }
    return TRUE;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-06-27T08:26:21.720

您必须将`string`值包装到变体中。

尝试这个：

```
pSheet->Range["C2"]->Value = _variant_t(_bstr_t("Hello")).Detach(); 
```

# git - 无论如何，NetBeans 都会看到未推送到远程 git 存储库的提交

> ID：15667487
> 
> 赞同：3
> 
> 时间：2013-03-27T19:14:32.030
> 
> 标签：git, netbeans

在 NetBeans 中，我对本地 git 存储库进行了许多提交。如何查看未推送到远程仓库的提交？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T17:50:58.043

Netbeans 还没有这个功能。这是一个讨论这个问题的错误。 [http://netbeans.org/bugzilla/show_bug.cgi?id=208930](http://netbeans.org/bugzilla/show_bug.cgi?id=208930) [http://netbeans.org/bugzilla/show_bug.cgi?id=207165](http://netbeans.org/bugzilla/show_bug.cgi?id=207165)

看看这个， [http://netbeans.org/kb/docs/ide/git.html#diff](http://netbeans.org/kb/docs/ide/git.html#diff)

这是关于此的另一个 SF 问题。 [使用 Netbeans 在 master 和 origin/master 之间的 Git diff](https://stackoverflow.com/questions/9788959/netbeans-git-diff-between-master-and-origin-master)

@EM-Creations

是的，但 svn 是不同的。GIT 具有 Remote and Head（本地 repo）和工作树的概念。当您提交时，您提交到 Head 并且您必须推送到远程仓库。

# google-fusion-tables - 带侧边栏的融合桌

> ID：15667488
> 
> 赞同：0
> 
> 时间：2013-03-27T19:14:37.827
> 
> 标签：google-fusion-tables

我不确定我做错了什么，但我无法让我的标记或侧边栏出现。我不确定我遗漏了哪一部分，或者我是否只是在语法上不正确。如果您能提供帮助，我将不胜感激。

```
<!-- language: lang-js --> 

google.load('visualization', '1', {'packages':['table']});
var map;
var markers = [];
var infoWindow = new google.maps.InfoWindow();

function initialize() {
var ak = new google.maps.LatLng(64.958056,-147.618333);

map = new google.maps.Map(document.getElementById('map_canvas'), {
center: ak,
zoom: 9,
mapTypeId: google.maps.MapTypeId.ROADMAP
});

var sql = encodeURIComponent("SELECT name, lat, lng, description FROM 1zFwXiOkWbKCY9xRGvXBdHjUkTsirnwbr77WjTds ORDER BY NAME");
var query = new  google.visualization.Query('https://www.googleapis.com/fusiontables/v1/query?sql=' + sql);

query.send(getData);
}

function getData(response) {
var dt = response.getDataTable();  

var side_html = '<table style="border-collapse: collapse" border="1" \
                   cellpadding="5"> \
                   <thead> \
                     <tr style="background-color:#e0e0e0"> \
                       <th>City</th> \
                     </tr> \
                   </thead> \
                   <tbody>';

for (var i = 0; i < dt.getNumberOfRows(); i++) {
  var lat = dt.getValue(i,1);
  var lng = dt.getValue(i,2);
  var name = dt.getValue(i,0);
  var description = dt.getValue(i,3);

var pt = new google.maps.LatLng(lat, lng);

var html = "<strong>" + name + "</strong><br />";

  side_html += '<tr> \
                  <td><a href="javascript:myclick(' + i + ')">' + name + '</a></td> \
                </tr>';

  createMarker(pt, html);

}

side_html += '</tbody> \
            </table>';
document.getElementById("side_bar").innerHTML = side_html;
}

function createMarker(point,info) {
var iconURL = 'uaf-icon.png';               var iconSize = new google.maps.Size(29,60);
var iconOrigin = new google.maps.Point(0,0);    var iconAnchor = new google.maps.Point(15,60);

var myIcon = new google.maps.MarkerImage(iconURL, iconSize, iconOrigin, iconAnchor);

var shadowURL = 'uaf-shadow.png';           var shadowSize = new google.maps.Size(63, 60);
var shadowOrigin = new google.maps.Point(0, 0); var shadowAnchor = new google.maps.Point(15, 60);

var myShadow = new google.maps.MarkerImage(shadowURL, shadowSize, shadowOrigin, shadowAnchor);

var iconShape = [18,0,20,1,22,2,23,3,24,4,25,5,26,6,27,7,27,8,28,9,28,10,28,11,28,12,28,13,28,14,28,15,28,16,28,17,28,18,28,19,27,20,27,21,26,22,26,23,25,24,24,25,23,26,21,27,20,28,16,29,21,31,21,32,21,33,21,34,21,35,20,36,20,37,20,38,19,39,19,40,19,41,18,42,18,43,18,44,18,45,17,46,17,47,17,48,17,49,16,50,16,51,16,52,15,53,15,54,15,55,14,56,14,57,14,58,14,59,13,59,13,58,13,57,13,56,12,55,12,54,12,53,12,52,11,51,11,50,11,49,11,48,11,47,10,46,10,45,10,44,10,43,9,42,9,41,9,40,9,39,9,38,8,37,8,36,8,35,8,34,8,33,7,32,7,31,12,29,9,28,7,27,6,26,4,25,3,24,3,23,2,22,1,21,1,20,0,19,0,18,0,17,0,16,0,15,0,14,0,13,0,12,0,11,0,10,1,9,1,8,2,7,2,6,3,5,4,4,5,3,6,2,8,1,10,0,18,0];
var myMarkerShape = {
  coord: iconShape,
  type: 'poly'
};

var myMarkerOpts = {
  position: point,
  map: map,
  icon: myIcon,
  shadow: myShadow,
  shape: myMarkerShape
};

var marker = new google.maps.Marker(myMarkerOpts);

markers.push(marker);

google.maps.event.addListener(marker, 'click', function() {
  infoWindow.close();
  infoWindow.setContent(info);
  infoWindow.open(map,marker); 
});
}

function myclick(num) {
google.maps.event.trigger(markers[num], "click");
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T21:20:26.740

您的查询无效：“SELECT name, lat, lng, description FROM 1zFwXiOkWbKCY9xRGvXBdHjUkTsirnwbr77WjTds ORDER BY NAME”

应该是：“SELECT name, lat, lng, description FROM 1zFwXiOkWbKCY9xRGvXBdHjUkTsirnwbr77WjTds ORDER BY name”（“name”列的名称为小写，ORDER BY 取列名）。

您需要决定是要使用 Fusion Table API v1.0 还是可视化 API (AKA GViz)，看起来您的代码是为使用 GViz 而编写的，但您正在将查询发送到 v1 API。

这对我有用：

```
var queryStr = "SELECT name, lat, lng, description FROM 1zFwXiOkWbKCY9xRGvXBdHjUkTsirnwbr77WjTds ORDER BY name";
var queryText = encodeURIComponent(queryStr);
  var query = new google.visualization.Query('http://www.google.com/fusiontables/gvizdata?tq='  + queryText); 
```

并将错误检查添加到响应处理中，让您查看发生了什么（它正在超时）：

```
function getData(response) {
if (!response) {
  alert('no response');
  return;
}
if (response.isError()) {
  alert('Error in query: ' + response.getMessage() + ' ' + response.getDetailedMessage());
  return;
} 
var dt = response.getDataTable(); 
```

[工作示例](http://www.geocodezip.com/v3_SO_fusionTableSidebar.html)

# extjs - 如何在浏览器检查元素中完全隐藏 ExtJS 源代码？

> ID：15667492
> 
> 赞同：0
> 
> 时间：2013-03-27T19:14:52.923
> 
> 标签：extjs

我有一个 EXTJS 应用程序，当我使用浏览器的检查元素查看源代码时，我可以看到整个应用程序的源代码（当然，服务器端代码除外。）。

我见过一些 extjs 应用程序，在检查源代码时，我只能看到 app.html 页面，并且浏览器无法发现它们的 .js 文件。

我想知道我应该如何配置我的 EXTJS 应用程序以使它们在浏览器“源”选项卡中不可见（即 Chrome 的检查元素 > 源）。

任何帮助深表感谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T19:19:13.947

你能做的最好的就是混淆你的代码，因为一旦它进入浏览器，就没有办法阻止别人查看它。

即使浏览器可以以某种方式隐藏它，也没有什么可以阻止用户嗅探网络上的数据包等。

# c - c 中输出的缓冲文本

> ID：15667494
> 
> 赞同：0
> 
> 时间：2013-03-27T19:14:58.780
> 
> 标签：c, file, text, buffer, output

我正在尝试在 C 中创建一个定序器来处理带有字符'a''b''%'等的文本文件，然后按顺序显示它们，一次一个，所以我想以某种方式缓冲它们，但是我对这个话题不是很熟悉。但我的想法是

a）将它们存储在一个数组中（限制每个文件中字符的维度）

b) 即时阅读它们。

但我不确定如何以最快的输出实现这一点。有没有人处理过大量的文本文件，并且他们不得不像这样以大块的形式输出它们？

# ant - 在 ant 中运行“tar”任务时忽略特定文件的完整路径

> ID：15667499
> 
> 赞同：0
> 
> 时间：2013-03-27T19:15:16.757
> 
> 标签：ant, tar

我有这样的项目结构

```
 myproj
   -bin/myproj-run
   -bin/myproj-cli
   -lib/x.jar
   -target/myproj.jar 
```

我想创建一个看起来像的 tar.gz

```
myproj
       -bin/myproj-run
       -bin/myproj-cli
       -lib/x.jar
       -myproj.jar 
```

我如何使用 ant tar 任务来做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T19:35:31.927

这个应该可以工作（我已经在我的电脑上测试过了，它可以工作）：

```
<project name="tar.test" default="tartest">

    <dirname property="basedir" file="${ant.file.tar.test}" />

    <target name="tartest">
        <tar destfile="${basedir}/files.tar">
            <tarfileset dir="${basedir}/myproj">
                <exclude name="target/**" />
            </tarfileset>
            <tarfileset dir="${basedir}/myproj/target"/>
        </tar>
    </target>

</project> 
```

顺便说一句，您应该阅读[apache 页面](http://ant.apache.org/manual/Tasks/tar.html)`tar`上的手册，您会发现一些可以帮助您的示例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T19:31:29.850

我会首先[`<copy>`](http://ant.apache.org/manual/Tasks/copy.html)将文件放到具有您想要的文件夹结构的其他目录（例如，一个名为“包”的目录）中。然后，运行`<tar>`并`<gzip>`：

```
<tar destfile="myTar.tar" basedir="package" />
<gzip src="myTar.tar" destfile="myTar.tar.gz"/> 
```

# php - 使用 PHPstorm 在浏览器中执行 php 代码

> ID：15667500
> 
> 赞同：7
> 
> 时间：2013-03-27T19:15:21.297
> 
> 标签：php, ide, editor, phpstorm

因此，当我单击运行时，PHPstorm 在其控制台中运行 php 代码很好，这很好，但我想在浏览器中看到它。

所以我在 PHPstorm 中创建了一个新的 PHP Web 应用程序，将服务器设置为“localhost:8000”。

![PHPstorm 屏幕截图](../Images/51dbb59dec09f26f4086dadba4572d68.png)

现在，当我单击 RUN 时，它会打开浏览器，但我收到一条错误消息：“糟糕！Google Chrome 无法连接到 localhost:8000”

我究竟做错了什么？？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-08-23T03:49:42.633

您必须首先为您的项目配置运行配置。

转到`Run -> Edit Configurations`，单击“PHP 内置 Web 服务器”，然后按“+”。您应该看到如下内容：

![运行/调试配置](../Images/775145fe4047b1fac7b79f072dfd0492.png)

保存设置后，您可以通过 运行 Web 服务器`Run -> Run '<project-name>'`。它现在应该将页面提供给您的浏览器。

# wpf - 在 XAML 中设置样式的 ControlTemplate 的属性

> ID：15667503
> 
> 赞同：5
> 
> 时间：2013-03-27T19:15:28.873
> 
> 标签：wpf, xaml, styles, controltemplate

我想访问嵌套在样式的控件模板中的属性。我知道您可以在代码隐藏中执行此操作：

```
GradientStop stop = (GradientStop)progressBar1.Template.FindName("gradStop", progressBar1);
stop.Color = Colors.Black; 
```

是否可以做同样的事情，但在 XAML 中？例如：

```
<ProgressBar Style="{StaticResource CustomProgressBar}" [???].Color="FF000000"/> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T15:05:27.123

不能使用 TemplateBinding 吗？

```
 <Style x:Key="MyStyle" TargetType="{x:Type ContentControl}">
    <Setter Property="Template">
        <Setter.Value>
            <ControlTemplate TargetType="{x:Type ContentControl}">
                    <Border Width="{TemplateBinding Width}" Height="{TemplateBinding Height}" Background="{TemplateBinding Background}" >
                        <ContentPresenter />
                    </Border>
            </ControlTemplate>
        </Setter.Value>
    </Setter>
</Style> 
```

然后在应用样式时指定模板绑定值。

# javascript - 从扩展中捕获 Firefox 关闭事件

> ID：15667505
> 
> 赞同：2
> 
> 时间：2013-03-27T19:15:37.283
> 
> 标签：javascript, firefox, firefox-addon

我的扩展打开了一系列额外的窗口。当用户关闭主 Firefox 窗口时，我希望这些窗口关闭。[我知道您可以检测到选项卡何时关闭](https://stackoverflow.com/questions/1339551/catching-close-tab-event-in-a-firefox-extension)（也许我应该只寻找“最终”选项卡关闭？）但我想知道“所有选项卡”何时关闭。

简而言之，我如何检测 Firefox 主窗口何时从扩展程序中关闭？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T07:32:56.190

你可以监听[卸载](https://developer.mozilla.org/en-US/docs/DOM/Mozilla_event_reference/unload)事件。

如果您的脚本在所有类型的窗口上运行，则检查 url 是否为浏览器窗口。

```
window.addEventListener('unload', function(event) {
    if (event.target.location.href !== 'chrome://browser/content/browser.xul') {
        return;
    }
    // do you stuff...
}, false); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T19:25:18.280

我找到了一种解决方案，尽管它实际上并不监听特定事件。相反，我们设置了一个间隔来检查选项卡容器是否仍然可用。

```
setInterval(function() {
    if (typeof gBrowser.mTabContainer === 'undefined') {
        // Rest of your code...
    }
}, 500); 
```

如果有更清洁的方式来做到这一点，我会很高兴看到它。

# android - 谷歌路线服务：将每个角落视为一个步骤

> ID：15667516
> 
> 赞同：0
> 
> 时间：2013-03-27T19:16:08.397
> 
> 标签：android, google-maps, directions

我正在一个将使用 Google 方向服务的 Android 应用程序中工作。

源位置由 GPS 确定，目的地由用户设置，用户也可以通过在 MapView 中触摸来设置一些航点（这是可选的）。最后，应用程序绘制这些点之间的路线。

当调用谷歌方向服务时，我得到一个“步骤”列表，就我而言，每个步骤都对应于驾驶员必须转弯的一个点（对吗？）。是否有可能获得更多步骤？例如，将路径的每个角落视为一个步骤？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T13:36:33.760

最后，我可以通过解码服务返回的每个步骤的“折线”来绘制一条精确的路线。折线包含一个对象，该对象包含一个表示近似路径的编码点数组。

所以我把它解码成一个地理点列表，然后在这些地理点之间画线。

如果有人需要做类似的事情，这对我来说真的很有用：

[Google Maps API 版本差异](https://stackoverflow.com/questions/11323500/google-maps-api-version-difference/11357351#11357351)

# c++ - fstream 不会创建文件

> ID：15667530
> 
> 赞同：26
> 
> 时间：2013-03-27T19:16:52.577
> 
> 标签：c++, file-io, fstream

如果它不存在，我只是试图创建一个文本文件，我似乎无法`fstream`做到这一点。

```
#include <fstream>
using std::fstream;

int main(int argc, char *argv[]) {
    fstream file;
    file.open("test.txt");
    file << "test";
    file.close();
} 
```

我是否需要在`open()`函数中指定任何内容才能让它创建文件？我读过您不能指定`ios::in`，因为那会期望已经存在的文件存在，但我不确定是否需要为尚不存在的文件指定其他参数。

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2013-03-27T19:22:05.413

您应该将 fstream::out 添加到 open 方法，如下所示：

```
file.open("test.txt",fstream::out); 
```

有关 fstream 标志的更多信息，请查看此链接：[http ://www.cplusplus.com/reference/fstream/fstream/open/](http://www.cplusplus.com/reference/fstream/fstream/open/)

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2013-03-27T19:19:59.920

您需要添加一些参数。此外，实例化和打开可以放在一行中：

```
fstream file("test.txt", fstream::in | fstream::out | fstream::trunc); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-27T19:24:56.860

这将做：

```
#include <fstream>
#include <iostream>
using std::fstream;

int main(int argc, char *argv[]) {
    fstream file;
    file.open("test.txt",std::ios::out);
    file << fflush;
    file.close();
} 
```

# ios - NSCFString _cfurl 无法识别的选择器发送到实例

> ID：15667531
> 
> 赞同：0
> 
> 时间：2013-03-27T19:16:54.450
> 
> 标签：ios, cocoa-touch, core-data, uimanageddocument, uidocument

我正在使用 Core Data 多年。目前我想了解更多关于 UIManagedDocument 的信息。我已经完成了几个示例项目以了解更多信息。最后，我很高兴将这种机制转移到实际项目中。在现有项目中，我目前正在实现Core Data，因此我创建了Data Model（与app同名）。我为实体生成了一个类，然后我创建了一个类别，该类别具有一个将对象添加到数据库的简单方法。最后我为 UIManagedDocument 创建了单例，现在它看起来像这样：

```
+ (MDManagedDocument *)sharedDocument {
    static dispatch_once_t dispatchOncePredicate;
    __strong static MDManagedDocument *md = nil;
    dispatch_once(&dispatchOncePredicate, ^{
        md = [[MDManagedDocument alloc] init];
    });
    return md;
}

- (id)init {
    self = [super init];
    if(self) {
        [self setManagedDocument:[[UIManagedDocument alloc] initWithFileURL:[[[[NSFileManager defaultManager] URLsForDirectory:NSDocumentDirectory inDomains:NSUserDomainMask] lastObject] URLByAppendingPathComponent:@"ThisIsDatabase"]]];
        [[self managedDocument] setPersistentStoreOptions:[NSDictionary dictionaryWithObjectsAndKeys:[NSNumber numberWithBool:YES], NSMigratePersistentStoresAutomaticallyOption, [NSNumber numberWithBool:YES], NSInferMappingModelAutomaticallyOption, nil]];        
    }
    return self;
}

- (void)prepareManagedDocument {
    if (![[NSFileManager defaultManager] fileExistsAtPath:[[[self managedDocument] fileURL] path]]) {
        [[self managedDocument] saveToURL:[[self managedDocument] fileURL] forSaveOperation:UIDocumentSaveForCreating completionHandler:^(BOOL success) {
            if (success) {
                NSLog(@"Managed document was created.");
            } else {
                NSLog(@"Error occured while creating managed document.");
            }
        }];
    } else if([[self managedDocument] documentState] == UIDocumentStateClosed) {
        [[self managedDocument] openWithCompletionHandler:^(BOOL success) {
            if (success) {
                NSLog(@"Managed document was opened.");
            } else {
                NSLog(@"Error occured while opening managed document.");
            }
        }];
    } else if([[self managedDocument] documentState] == UIDocumentStateNormal) {
        NSLog(@"Managed document is opened and prepared for editing and/or reading.");
    }
} 
```

在我实例化共享实例并调用 prepareManagedDocument 方法后，它会因以下消息而崩溃：

```
*** Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: '-[__NSCFString _cfurl]: unrecognized selector sent to instance 0xb3774b0' 
```

有趣的是它只在第一次运行时崩溃，但由于这次崩溃，它不会创建持久存储，所以它无法写入文档等。我有一个正在使用此代码的项目，并且不要抛出任何异常，因此它正在创建持久存储并且我能够写入该文档。

**我哪里错了？**

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T15:12:29.847

问题解决了！我有一个扩展 NSURL 的类别，并且只有一个方法 baseURL，在我删除此类别或重命名该方法后一切正常。

# symfony - Symfony2：设置选择的默认选项

> ID：15667537
> 
> 赞同：0
> 
> 时间：2013-03-27T19:17:11.393
> 
> 标签：symfony, symfony-forms

我有一个带有下拉列表（选择）的表单，我想选择默认选择的选项：

这是生成选择的代码：

```
 $builder->add('language', 'choice', array(
        'label' => 'pages.age.gateway.language.label',
        'choices' => array(1 => 'first option', 2 => 'second option'),
    )); 
```

我尝试了以下方法（这里建议[Symfony2 Setting a default choice field selection](https://stackoverflow.com/questions/8073236/symfony2-setting-a-default-choice-field-selection)）：

```
 $builder->add('language', 'choice', array(
        'label' => 'pages.age.gateway.language.label',
        'choices' => array(1 => 'first option', 2 => 'second option'),
        'data' => '2'
    )); 
```

这不适用于我的代码（我对 symfony2 的理解，我的方向可能不对）。

另一种选择是使用“preferred_choices”，但我想避免这种情况，因为我不想修改选项的显示顺序。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T20:23:50.413

如果您的表单依赖于一个实体：

```
/* Action */
public function myAction()
{
    $user = new User();
    $user->setLanguage(2); // Set the default option
    $form = $this->createForm(new UserType(), $user); // Give the user to the form

    if ($request->getMethod() == 'POST') {

            $form->bindRequest($request);

            if ($form->isValid()) {

                $user = $form->getData();
                // Do something like save / redirect
            }
     }

     return array(
        'form' => $form->createView(),
     );
} 
```

由于preferred_choices键（它将值向上移动到选择的顶部），您还可以设置首选选项（但不是真正的默认值）：

```
$builder->add('language', 'choice', array(
        'label' => 'pages.age.gateway.language.label',
        'choices' => array(1 => 'first option', 2 => 'second option'),
        'preferred_choices' => 2
)); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2014-03-10T21:22:25.687

您想添加没有值的选项。您可以使用选项来执行此操作`empty_value`。

```
 $builder
        ->add('gender', 'choice', array(
            'label'       => 'Gender',
            'choices' => array('male', 'female'),
            'empty_value' => 'Please select option'
    )); 
```

# c++ - 在向量中创建动态对象

> ID：15667544
> 
> 赞同：2
> 
> 时间：2013-03-27T19:17:37.670
> 
> 标签：c++, memory-leaks, dynamicobject

所以我想有`vector<OtherClassName> theVector`一个成员`BaseClass`

我想知道在很多方面我可以得到内存泄漏......

这样做会导致内存泄漏吗？

```
BaseClass::someFunction(){
   OtherClassName * c = new OtherClassName();
   theVector.push_back((*c));
} 
```

我是 C++ 的初学者，从互联网上学习。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T19:20:32.890

> 这样做会导致内存泄漏吗？

**是**的，这将导致内存泄漏。每个分配的对象都`new`必须用 销毁`delete`。否则会导致内存泄漏。

特别是，您在此处存储在向量中的是分配给 的对象的*副本*`new`。如果你想让你的容器保存某个类的对象，这样做就足够了：

```
BaseClass::someFunction()
{
    OtherClassName c;
    theVector.push_back(c);
} 
```

请注意，`vector`与 C++ 标准库的所有容器一样，具有*值语义*：这意味着您在向量中插入的内容是您传递给的对象的*副本*`push_back()`。对原始对象的进一步修改不会反映在向量中包含的对象的状态，反之亦然。

如果您希望发生这种情况，即如果您需要*引用语义*，则必须让您的向量包含（可能是智能的）*指针*。例如：

```
#include <memory>

// theVector would be declared as:
// std::vector<std::shared_ptr<OtherClassName>> theVector;

BaseClass::someFunction()
{
    std::shared_ptr<OtherClassName> pC = std::make_shared<OtherClassName>();
    theVector.push_back(pC);
} 
```

在现代 C++ 中，通过手动内存管理`new`被`delete`认为是**不好的编程实践**，因为它很容易导致内存泄漏或未定义的行为，并在健壮性、可读性和易于维护性方面对程序设计产生负面影响。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T19:24:43.190

动态创建任何东西的类应该有一个析构函数，当对象被销毁时释放内存。如果你没有一个你有内存泄漏。新语句占用的任何内存都必须有相应的删除语句，否则就会发生内存泄漏。由于您的课程现在编写，它将有内存泄漏，因为您再也不会释放内存。您的析构函数应该简单地遍历向量并从它存储的每个指针中释放内存。

# ruby-on-rails - 销毁 has_many / belongs_to 元素时更新 ID

> ID：15667546
> 
> 赞同：0
> 
> 时间：2013-03-27T19:17:41.187
> 
> 标签：ruby-on-rails, ruby-on-rails-3.2

有课程状态和票

```
class Status < ActiveRecord::Base
  has_many :tickets
end

class Ticket < ActiveRecord::Base
  belongs_to :status
  attr_accessible :name, :status_id
end 
```

在视图中，我有一个下拉菜单，您可以在其中选择工单的状态，其中状态 ID 是选项的值。当我去删除一个状态时出现了问题，被删除状态的状态ID仍然保存在票中。如何使具有已销毁状态的工单的所有状态 ID 无效，或将这些工单的状态 ID 更改为活动状态？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T19:22:04.583

用于`:dependent => :destroy`门票。

```
class Status < ActiveRecord::Base
  has_many :tickets, :dependent => :destroy  #`:dependent => :nullify` to set all foreign keys to nil
end 
```

这将删除所有已删除状态的工单记录。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T19:25:43.590

```
class Status < ActiveRecord::Base
  has_many :tickets, dependent: :destroy
end 
```

这意味着票证取决于状态。当一个状态被销毁时，它也会销毁所有关联的票证。这就是差异`#delete`变得`#destroy`更加突出的地方。

# objective-c - 如何使用带有弹出视图控制器的自定义视图

> ID：15667548
> 
> 赞同：0
> 
> 时间：2013-03-27T19:17:48.730
> 
> 标签：objective-c, macos, cocoa, nsview

我在标准的 NSView 上做了一个 Popupview。弹出窗口出现-确定。但我想展示一个以编程方式创建的视图。所以我设置了popupViewController的视图委托的视图。

```
NSView* editorView = [self.sharedUI editorViewForElementKey:classKey];// Creates a custom view and its subviews
self.popoverViewController.view  = editorView;  programmatically
[[self editorPopover]showRelativeToRect:[elementViewItem] ofView:elementViewItem preferredEdge:NSMaxYEdge]; // shows the View. 
```

弹出窗口出现，似乎窗口大小是我新生成的视图的大小，但它是空的。

为了生成我的“editorView”，我使用了派生类并生成了我的子视图：

```
NSView *view;
view = [[NSTextField alloc]initWithFrame:control.rect];
((NSTextField*)view).stringValue = control.controlAttributeName;   
[((NSTextField*)view) setBezeled:NO];
[((NSTextField*)view) setDrawsBackground:NO];
[((NSTextField*)view) setEditable:NO];
[((NSTextField*)view) setSelectable:NO];   
[self addSubview:view]; 
```

我做错了什么？我在监督什么吗？

# postgresql - 未找到 Heroku postgres

> ID：15667551
> 
> 赞同：3
> 
> 时间：2013-03-27T19:17:59.823
> 
> 标签：postgresql, heroku, ruby-on-rails-4, ruby-2.0

当我在 Heroku 中访问我的应用程序并检查资源时，我可以看到 Postgresql

但是当我从我的计算机 pg:info 运行时，我得到以下信息：

```
$ heroku pg:info
! Resource not found 
```

或这个：

```
$  heroku pg:wait 
!    Resource not found 
```

虽然当我运行 pg:credential 时，我确实得到了一个输出：

```
$ heroku pg:credentials HEROKU_POSTGRESQL_PINK
Connection info string:
   "dbname=some_name host=ec2-107-22-165-15.compute-1.amazonaws.com port=5432 user=some_user password=some_password sslmode=require" 
```

我试过跑步`heroku run rake db:migrate`，`heroku run db:reset`但都失败了。我得到错误：

```
could not connect to server: Connection refused
Is the server running on host "localhost" and accepting
TCP/IP connections on port 5432? 
```

通过heroku web进入设置，我可以看到以下内容：

```
Connection Settings : Default

Host    ec2-107-22-165-15.compute-1.amazonaws.com
Database    some_databasename
User    some_user
Port    5432
Password    some_password

Statistics
Plan    Dev
Status  available
Data Size   5.9 MB
Tables  0
PG Version  9.1.8
Created March 27, 2013 18:01 
```

`heroku config`已设置 DATABASE_URL 和 HEROKU_POSTGRESQL_PINK_URL。

据我所知，我已经删除了Heroku 创建自己的`production`部分`database.yml``database.yml`

我刚刚迁移到 ruby​​ 2.0 和 rails 4.0

我应该如何连接到数据库？我认为这应该是自动的。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T01:34:18.047

通过降级 Rails 和 Ruby 解决了这个问题 :(

现在我正在使用 rails 3.1.0 和 ruby​​ 1.9.3

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-02-09T20:25:11.853

似乎问题出在过时的heroku工具带版本上。我使用的是 v2.19.2。

不推荐通过 ruby​​ gems 安装 heroku 工具带，最好的办法是卸载 heroku gem并重新安装工具带，具体取决于您的平台： [https](https://toolbelt.heroku.com/)`$ gem uninstall heroku` ://toolbelt.heroku.com/

# java - ArrayList 中的排序条目

> ID：15667556
> 
> 赞同：0
> 
> 时间：2013-03-27T19:18:30.660
> 
> 标签：java, sorting, collections

有 5 个条目存储在`ArrayList<ArrayList<Double>> selected`. 这些条目中的每一个都由两个参数指定 -`rank`和`cd`：

```
rank = [1.0, 2.0, 3.1, 1.2, 2.1]
cd = [6.2, 5.2, 7.1, 8.0, 1.1] 
```

我需要对这些条目进行排序，**首先**，按`rank`，**其次**，按`cd`降序排列（即 3.1、2.1、2.0、1.2、1.1）。第二个排序 (by `cd`) 必须应用于已经按 排序的条目`rank`。

```
ArrayList<Double> rank = new ArrayList<Double>(); 
ArrayList<Double> cd = new ArrayList<Double>();

ArrayList<ArrayList<Double>> selected = new ArrayList<ArrayList<Double>>();

for (int i=0; i<len; i++) {
    rank.add(getRank(i));
    cd.add(getCub_len(i));
}
selected.add(0,rank);
selected.add(1,cd);

Comparator<ArrayList<Double>> comparatorRank = new Comparator<ArrayList<Double>>() 
{
    public int compare(ArrayList<Double> a, ArrayList<Double> b) 
    {
        return (int) (a.get(0) - b.get(0));
    }
};

Comparator<ArrayList<Double>> comparatorCD = new Comparator<ArrayList<Double>>() 
{
    public int compare(ArrayList<Double> a, ArrayList<Double> b) 
    {
        return (int) (a.get(1) - b.get(1));
    }
};

Collections.sort(selected, comparatorRank);
Collections.sort(selected, comparatorCD); 
```

问题是我不知道如何在订购之前获取已分配给条目的 ID。例如，这是一个无序的ID序列：1、2、3、4、5，这是排序后的ID序列：5、3、4、1、2。如何获得这些ID？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-02T16:29:53.477

这就是我将如何处理它...

```
import java.util.ArrayList;
import java.util.Arrays;
import java.util.Collections;
import java.util.List;

public class SortPairs {

    public static void main(String[] args) {
        List<Double> rank = new ArrayList<Double>(Arrays.asList(1.0, 2.0, 3.1, 1.2, 2.1)); 
        List<Double> cd = new ArrayList<Double>(Arrays.asList(6.2, 5.2, 7.1, 8.0, 1.1));

        List<Pair<Double, Double>> pairs = new ArrayList<Pair<Double, Double>>(rank.size());
        for (int i = 0; i < rank.size(); ++i)
            pairs.add(new Pair<Double, Double>(rank.get(i), cd.get(i)));

        Collections.sort(pairs);

        ListIterator<Double> rankIter = rank.listIterator();
        ListIterator<Double> cdIter = cd.listIterator();
        for (Pair<Double, Double> pair : pairs) {
            System.out.println(String.format("[rank = %.1f, cd = %.1f", pair.getT1(), pair.getT2()));
            rankIter.next();
            cdIter.next();
            rankIter.set(pair.getT1());
            cdIter.set(pair.getT2());
        }
    }

   public static class Pair <T1 extends Comparable<? super T1>, T2 extends Comparable<? super T2>> implements Comparable<Pair<T1, T2>> {
      private final T1 t1;
      private final T2 t2;

      public Pair(T1 t1, T2 t2) {
         this.t1 = t1;
         this.t2 = t2;
      }

      public T1 getT1() {
          return t1;
      }

      public T2 getT2() {
          return t2;
      }

      @Override
      public int compareTo(Pair<T1, T2> other) {
          return t1.equals(other.t1) ?
                 other.t2.compareTo(t2) : 
                 other.t1.compareTo(t1);
      }
   }
} 
```

# android - 在 Android 中分享 DefaultHttpClient

> ID：15667559
> 
> 赞同：0
> 
> 时间：2013-03-27T19:18:35.013
> 
> 标签：android, httpclient

我对每个活动都使用了一个新的 httpClient，例如：

> DefaultHttpClient httpClient = new DefaultHttpClient();

但我想与一些活动分享同一个！任何一小段代码将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T20:01:04.423

正如雪蟹评论的那样，您可以尝试使用服务。或者如何使用单例？这是一个简短的示例，因此您可以了解一下。

```
private static DefaultHttpClient httpClient;
public DefaultHttpClient getHttpClientInstance() {
    if(httpClient==null)
        httpClient=new DefaultHttpClient();
    return httpClient;
} 
```

因此，您可以从其他类调用 getHttpClientInstance。希望这可以帮助。

# java - 嵌套异常与现代（Java SE 7）异常

> ID：15667560
> 
> 赞同：4
> 
> 时间：2013-03-27T19:18:36.047
> 
> 标签：java, exception-handling, ddlutils, nested-exceptions

## 问题

上下文异常与嵌套异常的优缺点是什么？

## 为什么我在乎

作为一个没有 Java 背景或不了解 Java 背景的开发人员，我偶然发现了一个可能的机会来更新开源项目的异常处理，但我希望确保我所做的更改是有益的。

有问题的项目是[ddlutils](http://db.apache.org/ddlutils/api/ "org.apache.ddlutils")。它目前使用 org.apache.commons.lang.exception ，其中指出：

> “为以前的 Java 版本提供 JDK 1.4 样式的嵌套异常功能。”

[Commons Lang](http://commons.apache.org/proper/commons-lang/ "org.apache.commons.lang3")的当前版本（撰写本文时为 3.1）使用 org.apache.commons.lang3.exception ，其中指出：

> “包含带有上下文的异常的概念，即这样的异常将包含带有键和值的映射。这提供了一种在异常时以有用的形式将有价值的状态信息以有用的形式传递给调用进程的简单方法。”

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T15:53:23.367

讨论这个你应该知道大约 10 年前发布的 JDK1.4。它发明了异常链接，这仅仅意味着你有一个构造函数，它接受一个原因异常。然后为所有这些东西打印一个很好的复合堆栈跟踪。在 JDK1.4 之前，JDK 中已经存在许多这样的实现，并且这些实现被统一为一个一致的解决方案。现在，commons lang 所做的就是提供一些类似的基类来将这个想法传递给旧的 JDK。然而，由于发生了很多事情：

*   JDK 1.3 公共维护期结束
*   JDK 1.4 公共维护期结束
*   JDK 5 公共维护期结束
*   现在JDK 6公共维护期即将结束。

因此，再也没有人对“以前的 JDK 1.4”版本感兴趣了。

现在另一方面，这个带有上下文的异常与任何 JDK 版本无关。它又是异常的基类，但它有一个可以放置东西的 Map。通常这是由具有附加字段的特殊异常类型实现的。这是类型安全、美观且干净的。每个异常都有一张地图，意味着永远不知道这张地图中会出现什么。我想不出这有什么好处。所以，如果你没有一个很好的计划来使用它，我不会推荐它。

# sublimetext2 - SublimeText 输出显示完成时间

> ID：15667561
> 
> 赞同：3
> 
> 时间：2013-03-27T19:18:38.963
> 
> 标签：sublimetext2, sublimetext

我刚刚开始使用 SublimeText 2 并在其上运行 python 脚本。

我的输出显示还显示 [ Finished in 0.1s ]

我不希望输出显示显示此消息。任何人都可以在这方面帮助我。

最亲切的问候

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2015-01-26T21:07:42.877

只需添加

```
"quiet": true 
```

.sublime-build 文件的选项。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-27T19:22:43.653

当然，

编辑这个文件：

`~/Library/Application Support/Sublime Text 2/Packages/Default/exec.py`

```
def finish(self, proc):
    if not self.quiet:
        elapsed = time.time() - proc.start_time
        exit_code = proc.exit_code()
        if exit_code == 0 or exit_code == None:
            self.append_data(proc, ("[Finished in %.1fs]") % (elapsed))
        else:
            self.append_data(proc, ("[Finished in %.1fs with exit code %d]") % (elapsed, exit_code)) 
```

更具体地说，注释掉`if exit_code == 0....`以下 3 行。

# ruby-on-rails - Rails 3：发送带附件的邮件 - 首次发送后文件损坏

> ID：15667565
> 
> 赞同：1
> 
> 时间：2013-03-27T19:18:52.863
> 
> 标签：ruby-on-rails, actionmailer

我想实现一个真正简单的时事通讯。因此，我可以选择我想要的尽可能多的收件人。

我可以在该时事通讯中附加一个文件。这适用于第一封邮件。所有接下来的邮件都有损坏的附件（1 字节大小）。

行动邮件：

```
def send_newsletter(recipient,subject,content,file)
    @content = content

    if file
      attachments[file.original_filename] =  {
        :content=> file.read, 
        :mime_type=> file.content_type
      }
    end

    mail(:to => recipient, :template_name => "deliver_newsletter",
             :subject => subject).deliver!
  end 
```

应用控制器：

```
 def create
    @customers = Customer.where("CHAR_LENGTH(email) > 0")
    @recipients = params[:sent_to]
    @subject = params[:subject]
    @content = params[:content].html_safe
    @file = params[:file]

    if @recipients
      @recipients.each do |mail_recipient|
        Newsletter.send_newsletter(mail_recipient,@subject,@content,@file)
      end
    end

    respond_to do |format|
      format.html { redirect_to bills_path, notice: "everything works fine" }
    end
  end 
```

最后是发送时事通讯的表格：

```
 <%= form_tag ('/newsletters'), :multipart => true do %>
            <%= t 'views.newsletter.to_recipient' %>:<br>
            <%= select_tag 'sent_to', options_from_collection_for_select(@customers, 'email', 'name'), :multiple => true, :class => 'sent_to' %><br><br>
          <%= t 'views.newsletter.subject' %>:<br>
            <%= text_field_tag 'subject' %><br><br>
          <%= t 'views.newsletter.content' %>:<br>
            <%= text_area_tag 'content', "".html_safe, :size=>"20x8" %><br><br>
<%= t 'views.newsletter.attachment' %>:<br>
<%= file_field_tag 'file' %><br><br>
          <%= submit_tag t('views.buttons.newsletter_send_now'), :class => "btn btn-primary", :disable_with => t('views.buttons.newsletter_sending') %>
    <% end %> 
```

另一个小问题：为什么“delay_jobs”gem 中的“delay”在这里不起作用？所有其他邮件都可以通过键入“Newsletter.delay.send_newsletter(...)”来发送

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T21:56:43.297

这可能会发生，因为`file.read`你在文件的末尾没有什么可读的了。我会`file_contents = file.read`在您的 ApplicationController 中添加一个，然后将其作为附加参数传递给每个`send_newsletter`调用，假设文件很小。

# scala - Scala中的嵌套反应（或接收）

> ID：15667566
> 
> 赞同：2
> 
> 时间：2013-03-27T19:18:55.573
> 
> 标签：scala, actor

我有一个中间远程参与者（B），它应该从 A 和 C 来回转发消息（如 A <-> B <-> C ）。在 B 的代码中，我有类似的东西

```
 loop {
      react {
        case msg => val A = sender
          //2) Should this be synchronous with !?
          C ! msg
          //1) What's better react or receive?
          react {
            case response => A ! response   
          }
      }
    } 
```

3个问题：

1）什么是更好的反应或接收（嵌套在反应中）？

2）鉴于将发回响应，应该！？代替 !

3）对于这种情况还有其他建议吗？

谢谢你们！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T17:44:50.647

对于*标准*Actor 模型的问题，必须以原子方式处理消息（即，当您处理另一个消息时，您无法接收和处理消息——这正是您在这里想要做的）

但是，Scala Actors 具有宽松的语义，这可能允许这样做。

对于问题1，您应该清楚react 和receive 之间的区别。无论如何，你可以很容易地使用反应（这里使用[http://www.scala-lang.org/docu/files/actors-api/actors_api_guide.html](http://www.scala-lang.org/docu/files/actors-api/actors_api_guide.html)）

或者，您不能使用嵌套。在你的actor发送请求后，它的状态应该改变，以便下一个循环周期它会寻找回复。

您可能还想升级到集成了 Akka 演员的 Scala 2.10；该模型更清晰，更易于使用。

# asp.net - 如何将 ASP.NET MVC 4 与预安装的 JQuery UI 库一起使用

> ID：15667567
> 
> 赞同：0
> 
> 时间：2013-03-27T19:19:00.477
> 
> 标签：asp.net, asp.net-mvc, jquery-ui, asp.net-mvc-4

因此，在成功将 JQuery Mobile 与我的移动应用程序一起使用后，我希望将 JQuery UI 与我的 Web 应用程序一起使用。我的 Web 应用程序是在 Visual Studio 2012 中创建的 ASP.NET MVC 4 项目。

但是，我意识到当我创建 MVC 4 项目时，它实际上已经包含了 JQuery UI——只是目前没有使用。

我注意到 Microsoft ASP.NET MVC 网站在其任何教程或代码示例中都没有提及预安装的 JQuery 和 JQuery UI 库，我觉得这很奇怪。我还注意到，我的 MVC 4 书籍都没有提及预装的 JQuery 库。

所以我的问题是，我预装了 JQuery UI，如何开始使用这些文件？我的意思是我想我会从我的视图中引用它们，但是我应该引用哪些文件？

是否有任何现有文档可以帮助我充分利用预安装的 JQuery 库？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T19:22:30.900

如果您使用的是 MVC4，则应在`BundleConfig.cs` （App_Start 文件夹）中为您预设所有内容，只需包含您要使用的捆绑包。
通常对于 Javascript，您只需要`jquery-ui-{version}.js`文件，其余的是您要应用的 css 样式。

*注意：确保您使用的是最新的 jquery UI。如果不是最新的，我建议直接通过包管理器更新您的 Jquery UI。*

# php - 用于自定义链接 (url) 结构验证的正则表达式 (preg_match, PHP)

> ID：15667571
> 
> 赞同：0
> 
> 时间：2013-03-27T19:19:20.427
> 
> 标签：php, regex, pattern-matching, preg-match

我计划允许读者以自定义方式创建链接。我认为对于不习惯编写html打开+关闭标签的人来说会更容易。

## 允许和需要的自定义链接结构

```
++visible text part==invisible address part++ 
```

一个有效的结构化示例：
`++stack overflow==http://stackoverflow.com/questions/ask++`

## 我的要求

当然，用户可以输入多个链接。

1.  所以我必须检查每一个链接尝试。如果所有链接结构都格式化为`++visible text part==invisible address part++`
2.  那么我将需要验证和验证*不可见的地址部分*
3.  最后，我将从*可见文本部分中删除标签（如果有的话）*

## 我的问题

因此，我需要您的帮助`preg_match` `pattern` **来验证自定义链接结构**。另请注意，我将需要 2 个部分（即：*可见文本部分的**左侧*部分和*不可见地址部分的**右侧*部分分别匹配我的第二个和第三个要求。`==` **`==`**

 ***## 我不成功的审判是

```
/++(.+)==(.+)++/ 
```

谢谢，BR

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T19:38:57.193

尝试

```
/\+\+(.+?)==(.+?)\+\+/ 
```

`+`是一个正则表达式特殊字符，应该转义。

如果您希望匹配包含换行符，请`s`在结束分隔符之后添加。`/`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-27T19:36:34.090

您的正则表达式有两个主要问题。首先`+`是你知道的保留标志（因为你使用它），所以你必须逃避它。

这将把我们带到以下正则表达式：`/\+\+(.+)==(.+)\+\+/`

如果您使用它，它实际上可能会起作用，但前提是该标记从不使用或使用一次，那是因为 PHP 中的 regex 是*greedy*。你可以通过使用正确的[修饰符](http://www.php.net/manual/en/reference.pcre.pattern.modifiers.php)来解决这个问题。

这给我们带来了`/\+\+(.+)==(.+)\+\+/U`不完美但会起作用的地方。然后，您可以对以下方面进行其他改进`(.+)`***

# c# - 在 C# 中添加引用

> ID：15667577
> 
> 赞同：1
> 
> 时间：2013-03-27T19:19:39.777
> 
> 标签：c#, asp.net

从网站转换为 Web 应用程序时如何为 c# 类文件添加程序集引用

我最近将我的一个 VS 项目从网站转换为 Web 应用程序。当我这样做时，在尝试查看该站点时，我收到以下错误：

`The type or namespace name 'FunFactory' could not be found (are you missing a using directive or an assembly reference?)`

FunFactory 是 App_Code 中的一个类文件 - 我需要做什么才能让我的 Web 应用程序识别这个类？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T19:30:28.783

我相信这是 App_Code 问题（根据我从您的帖子中了解到的情况）

查看此内容以进行一些一般性讨论
[ASP.NET 网站在 App_Code 文件夹中看不到 .cs 文件](https://stackoverflow.com/questions/4038082/asp-net-web-site-cant-see-cs-file-in-app-code-folder)

> 特别是这个用于转换问题。
> [App_Code 文件夹问题](https://stackoverflow.com/questions/89570/app-code-folder-issues/89719#89719)

* * *

而这个更详细地描述了这个问题
[http://vishaljoshi.blogspot.com/2009/07/appcode-folder-doesnt-work-with-web.html](http://vishaljoshi.blogspot.com/2009/07/appcode-folder-doesnt-work-with-web.html)

> 如果有需要添加到 WAP 的独立代码文件，应该怎么办？
> 
> 您可以在任何文件夹下添加代码文件，称为“CodeFolder”、“Controllers”或任何在您的项目中有意义的文件……只要避免将它们放在“App_Code”下，除非您特别想要服务器端编译行为……</p>

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T19:21:38.360

在 Visual Studio 中，您可以右键单击该项目，然后从上下文菜单中转到“添加引用”。之后您会看到什么取决于您的 VS 版本，但您可能会看到一组选项卡，指示您可以添加哪些引用。

另一种方法是这样做：

```
<Reference Include="[name]">
    <HintPath>[path]</HintPath>
</Reference> 
```

或者，如果它是一个项目...

```
<ProjectReference Include="[path]">
  <Project>[project-GUID]</Project>
  <Name>[name]>
</ProjectReference> 
```

祝你好运。

编辑：如果您尝试在 AppCode 中使用引用，则需要执行以下操作：

```
using [namespace]; 
```

...在您想要使用它的页面顶部。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-27T19:21:17.620

在解决方案资源管理器中，右键单击引用，选择“添加引用”

# python - 如何将 Mezzanine 安装为 Django 应用程序？

> ID：15667578
> 
> 赞同：16
> 
> 时间：2013-03-27T19:19:41.000
> 
> 标签：python, django, mezzanine

我已经有一个现有的 Django 网站。我添加了一个新的 url 路由“/blog/”，我想在其中创建一个夹层博客。如果可以将 Mezzanine 安装为现有 Django 站点中的应用程序，而不是独立的博客应用程序。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2015-01-15T20:02:41.953

如果您像我一样，您会发现常见问题解答中严重缺乏对如何让 Mezzanine 作为应用程序运行的描述。所以这就是我所做的（经过半天痛苦的黑客攻击）来整合它（有点）：

1.  下载 repo 并将其复制到您的项目中
2.  为包运行 setup.py
3.  `cd`到包并运行夹层命令以创建一个新应用程序（`mezzanine-project <project name>`），假设您使用名称`blog`作为您的`<project_name>`.
4.  在`local_settings.py`or`settings.py`文件中，将`DATABASES`dict 设置为使用项目的数据库。
5.  `createdb`从夹层`manage.py`文件运行命令

* * *

现在是开始 hack-fest 的时候了：

1.  在项目的 settings.py 文件中，`blog`添加`INSTALLED_APPS`
2.  将 Mezzanine 期望的一些配置变量添加到 settings.py 中： `PACKAGE_NAME_FILEBROWSER = "filebrowser_safe" PACKAGE_NAME_GRAPPELLI = "grappelli_safe" GRAPPELLI_INSTALLED = False ADMIN_REMOVAL = [] RATINGS_RANGE = range(1, 5) TESTING = False BLOG_SLUG = '' COMMENTS_UNAPPROVED_VISIBLE = True COMMENTS_REMOVED_VISIBLE = False COMMENTS_DEFAULT_APPROVED = True COMMENTS_NOTIFICATION_EMAILS = ",".join(ALL_EMAILS) COMMENT_FILTER = None`
3.  添加一些 Mezzanine 期望的中间件：```` ... “mezzanine.core.request.CurrentRequestMiddleware”、“mezzanine.core.middleware.RedirectFallbackMiddleware”、“mezzanine.core.middleware.TemplateForDeviceMiddleware”、“mezzanine.core. middleware.TemplateForHostMiddleware", "mezzanine.core.middleware.AdminLoginInterfaceSelectorMiddleware", "mezzanine.core.middleware.SitePermissionMiddleware",

    # 如果使用任何 SSL 设置，请取消注释以下内容：

    # "mezzanine.core.middleware.SSLRedirectMiddleware",

    “夹层.pages.middleware.PageMiddleware”，....````
4.  添加 Mezzanine 期望的一些 INSTALLED_APPS： `.... "mezzanine.boot", "mezzanine.conf", "mezzanine.core", "mezzanine.generic", "mezzanine.blog", "mezzanine.forms", "mezzanine.pages", "mezzanine.galleries", "mezzanine.twitter", ....`
5.  添加对模板文件夹的引用到`mezzanine`您的`TEMPLATE_DIRS`元组 `os.path.join(BASE_PARENT, '<path to mezzanine>/mezzanine/mezzanine'), os.path.join(BASE_PARENT, '<path to mezzanine>/mezzanine/mezzanine/blog/templates'),`
6.  最后，如果你喜欢我，你将不得不覆盖`extends`夹层模板中的一些路径，最明显的是在“blog_post_list.html”中，它只是扩展`base.html`，而不是你希望它扩展夹层特定的`base`文件。因此，转到该文件并将其替换`{% extends "base.html" %}`为`{% extends "core/templates/base.html" %}`.

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-27T19:44:45.377

常见问题解答中对此进行了介绍：

[http://mezzanine.jupo.org/docs/frequently-asked-questions.html#how-can-i-add-mezzanine-to-an-existing-django-project](http://mezzanine.jupo.org/docs/frequently-asked-questions.html#how-can-i-add-mezzanine-to-an-existing-django-project)

TLDR：Mezzanine 添加了一些设置、应用程序、中间件和上下文处理器，所有这些都在其默认的 settings.py 文件中定义——您只需要根据您的需要提取足够多的这些。

# email - 设置新的网络服务器：有没有更好的方法来设置电子邮件系统？

> ID：15667583
> 
> 赞同：0
> 
> 时间：2013-03-27T19:19:57.483
> 
> 标签：email, gmail, postfix-mta, sendgrid, amazon-ses

对于新的网络服务器，我正在考虑按如下方式设置电子邮件系统：

1.  用于特定站点电子邮件的 gmail 业务，例如客户支持等（双向）

2.  amazon-ses 用于交易和营销电子邮件（仅限外发）

3.  网络服务器框上的后缀，用于将日志消息 (log@xyz.com) 发送到 gmail-business 上的电子邮件别名（仅限外发）

有没有更好的方法来设置电子邮件系统？预算对我的设置影响很大。

如果我确实喜欢上面，我有几件事要理解：

1.  当gmail用于域电子邮件时，是否可以从其他服务器（如上面的#2、#3）发送电子邮件？

2.  MX 记录设置会有问题吗？

3.  我在网上看到有几次提到在回复字段中使用“noreply@xyz.com”电子邮件地址不是一个好主意（它会阻碍对话）。在此设置中，首选回复字段是什么，尤其是对于营销和交易电子邮件？另外，在从亚马逊 ses 发送电子邮件时，是否可以将回复设置为 gmail 上的地址？

4.  如果将来，如果我需要将我的交易和/或营销电子邮件从 amazon-ses 迁移到另一个（例如 sendgrid/mailup/mailchimp/..），由于此迁移而导致的 IP 地址更改是否会对可交付性？

**-- 回答#4 --**

```
Changes to the IP address will not impact the reputation of our email address
if we use DKIM signatures, the latter is given more priority by ISPs. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T19:30:28.927

我曾经使用 Exchange 电子邮件服务器，我不得不说，无论是托管您自己的服务器还是使用电子邮件提供商，都需要考虑很多因素。但是，我们使用了 Postini（在 Google 购买后），我们必须在配置中定义所有用于发送出站的服务器，否则 Postini 会拒绝该消息。我知道他们正在将 Postini 服务迁移到 Google Business 应用程序，因此您可以在使用他们的电子邮件服务时使用自己的电子邮件服务器：

[http://www.google.com/postini/](http://www.google.com/postini/)

我认为 MX 记录不会成为问题，因为它们将指向 Google 电子邮件服务而不是您的邮件服务器。然后他们将知道如何路由到下一个智能主机。您可以在我知道使用 Postini 的域上执行的 nslookup 中看到这一点：

```
domain.net    MX preference = 300, mail exchanger = domain.net.mail7.psmtp.com
domain.net    MX preference = 400, mail exchanger = domain.net.mail8.psmtp.com
domain.net    MX preference = 100, mail exchanger = domain.net.mail5.psmtp.com
domain.net    MX preference = 200, mail exchanger = domain.net.mail6.psmtp.com 
```

没有真正关注你的第三个问题。但是，据我所知，对于您的最后一个问题，您需要定义托管服务提供商将接收和发送电子邮件的所有电子邮件服务器。因此，如果未定义，托管服务提供商可能会拒绝该名称。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-27T21:56:10.477

这是我的答案，基于我对类似设置的经验。

> 当gmail用于域电子邮件时，是否可以从其他服务器（如上面的#2、#3）发送电子邮件？

是的，我们将 Gmail 用于企业（使用我们自己的域名），并且还从 Amazon SES 发送电子邮件，没有任何问题。我对后缀不熟悉，但我看不出它有任何不起作用的原因。

> MX 记录设置会有问题吗？

我们已经成功设置它，没有任何问题。只需按照[Google 的说明进行操作即可](http://support.google.com/a/bin/answer.py?hl=en&answer=174125&topic=2683820&ctx=topic)。

> 我在网上看到有几次提到在回复字段中使用“noreply@xyz.com”电子邮件地址不是一个好主意（它会阻碍对话）。在此设置中，首选回复字段是什么，尤其是对于营销和交易电子邮件？另外，在从亚马逊 ses 发送电子邮件时，是否可以将回复设置为 gmail 上的地址？

回复字段可以是您喜欢的任何电子邮件地址，包括个人或群组的 Gmail 地址。我们创建了一个名为 admin@ourdomain.com 的电子邮件组（使用 Google 管理控制面板），并将其用作从 SES 发送电子邮件的回复地址。

> 如果将来，如果我需要将我的交易和/或营销电子邮件从 amazon-ses 迁移到另一个（例如 sendgrid/mailup/mailchimp/..），由于此迁移而导致的 IP 地址更改是否会对可交付性？

它不应该引起任何问题。我们从 SES 和 Mailchimp 发送电子邮件，不需要做任何特别的事情来使它工作。

**编辑**：我们还使用 SES 通过电子邮件发送日志消息，因为与您不同，我们不会发送很多消息（仅发送关键信息）。您使用 Postfix 的想法对我来说很有意义，但我对此无能为力，因为我从未使用过它。[根据Google 支持文章](https://support.google.com/a/bin/answer.py?hl=en&answer=166852)的摘录，这似乎是可能的：

> 如果您有本地邮件服务器，则可以直接发送给收件人，避免发送限制。此本地服务器还应添加到您的 SPF 记录中，以防止邮件被标记为垃圾邮件。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-08T20:49:09.653

> 当gmail用于>域电子邮件时，是否可以从其他服务器（如上面的#2、#3）发送电子邮件？

一般而言，您可以拥有一台传入电子邮件服务器和无限的传出电子邮件服务器。再说一遍，总的来说。有办法绕过它，但这超出了我的水平，并不常见。

> MX 记录设置会有问题吗？

不会。只需确保在您更改 MX 记录后，它们仍然适用于您的其他服务

> 我在网上看到有几个提到在回复中有“noreply@xyz.com”电子邮件地址-？到场不是一个好主意（它阻碍了谈话）。在此设置中，>preferred reply-to 字段可以是什么，尤其是对于营销和交易电子邮件？

我们使用 info@example.com，如果您认为它有所作为，您可以进行 A|B 测试。

> 另外，在从亚马逊 ses 发送电子邮件时，是否可以将回复设置为 gmail 上的地址？

是的

> 如果将来，如果我需要将我的交易和/或营销电子邮件从 amazon-ses 迁移到另一个（例如 sendgrid/mailup/mailchimp/..），由于此迁移而导致的 IP 地址更改是否会对可交付性？

每个公司都有自己的发送指南。我发现 SES 没有明确定义的指南。我们使用 MailGun，他们处理速率限制和声誉管理。（SendGrid 紧随其后，但 MailGun 为我们提供了更好的产品）。

因此，当您转换时，您应该联系公司并找到您的公司从 SES 转换的最佳行动计划。我建议您从其中一家公司开始。我知道有很多，当您准备好时：[良好的比较指南](http://socialcompare.com/en/comparison/transactional-emailing-providers-mailjet-sendgrid-critsend)

# google-app-engine - 新的开发服务器没有收到请求

> ID：15667586
> 
> 赞同：1
> 
> 时间：2013-03-27T19:20:09.920
> 
> 标签：google-app-engine

更新到 AE 1.7.6 并且直到今天使用它都没有问题。似乎新的开发服务器不再收到请求。当我在终端中运行开发服务器时，我没有看到任何错误消息，并且一切似乎都照常工作。当我转到 localhost:8080 时，我得到一个 Chrome 错误页面，并且终端中没有记录任何请求。

如果我运行 old_dev_server.py 一切正常。

自从我更新到 1.7.6 后，我对我的 mac 所做的唯一事情就是重新启动并运行“MacBook Pro Retina SMC Update v1.1”的 mac 更新。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T20:00:51.663

您可能遇到了 Chrome 问题。请参阅[https://code.google.com/p/chromium/issues/detail?id=224215](https://code.google.com/p/chromium/issues/detail?id=224215)。

作为一种解决方法，请转到 chrome://flags 并将“内置异步 DNS”设置为“已禁用”，然后重新启动浏览器。

# javascript - 读取 JSON Tiled 地图编辑器文件并显示到画布

> ID：15667588
> 
> 赞同：6
> 
> 时间：2013-03-27T19:20:16.123
> 
> 标签：javascript, json, canvas, map, tile

我遵循本[教程](http://blog.hashrocket.com/posts/using-tiled-and-canvas-to-render-game-screens)能够在我的 javascript/canvas 游戏中加载由平铺地图编辑器创建的 json 地图文件。

我已经实现了我自己的版本，并且在控制台或网络等中的萤火虫中没有错误。

据我所知，通过放入 console.logs 和 alerts，脚本运行得非常好！

问题是画布保持空白！当它现在应该有一个tilemap时。

这是我在游戏中实现的教程版本：

```
function Level() {
var c;
var data;
var layers = [];

this.get_map = function(name,ctx){
    c = ctx;
    $.getJSON('maps/'+ name + '.json', function(json){
    get_tileset(json);
    });
};

function get_tileset(json) {
    data = json;
    this.tileset = $("<img />", { src: json.tilesets[0].image })[0];
    this.tileset.onload = renderLayers(this);
}

function renderLayers(layers){
    layers = $.isArray(layers) ? layers : data.layers;
    layers.forEach(renderLayer);
}

function renderLayer (layer){
    if (layer.type !== "tilelayer" || !layer.opacity) {
        alert("Not a tileLayer");
    }
    var s = c.canvas.cloneNode(),
            size = data.tileWidth;
    s = s.getContext("2d");

    if (layers.length < data.layers.length) {
        layer.data.forEach(function(tile_idx, i) {
            if (!tile_idx) { return; }
            var img_x, img_y, s_x, s_y,
                tile = data.tilesets[0];
            tile_idx--;
            img_x = (tile_idx % (tile.imagewidth / size)) * size;
            img_y = ~~(tile_idx / (tile.imagewidth / size)) * size;
            s_x = (i % layer.width) * size;
            s_y = ~~(i / layer.width) * size;
            s.drawImage(this.tileset, img_x, img_y, size, size,
                s_x, s_y, size, size);
        });

        layers.push(s.canvas.toDataURL());
        c.drawImage(s.canvas, 0, 0);
    }
    else {
        layers.forEach(function(src) {
            var i = $("<img />", { src: src })[0];
            c.drawImage(i, 0, 0);
        });
    }

}

} 
```

它是从我的主 javascript 文件中调用的，它是这样的：

```
$(document).ready(function(){

var canvas = document.getElementById("TBG");
var ctx = canvas.getContext("2d");

var ui = new Gui();
var level = new Level();

//----------Login/Register Gui --------------
$('#TBG').hide();
$('#load-new').hide();
$('#reg').hide();
$('#login').hide();

//if login_but is clicked do ui.login function
$('#login_but').click(ui.login);
//if reg_but is clicked do ui.register function
$('#reg_but').click(ui.register);

$('#new_but').click(function(){
    game_settings("new");
});

$('#load_but').click(function(){
    game_settings("load");
});

//if login_sumbit button is clicked do ui.login_ajax function
$("#login_submit").click(ui.login_ajax);

$("#reg_submit").click(ui.register_ajax);

$("#welcome").on("click", "#logout_but", ui.logout);

//________________________

//Initialisation of game

function game_settings(state){
    if(state == "load"){
        ui.load_game();
        //do ajax call to load user last save
        level.get_map("level_01",ctx);
    }
    else{
        //set beginning params

        //Change screens
        ui.new_game();
        alert("new game");
    }
}

// End Loop ------------------------------------------------------

}); 
```

我想你们可爱的人不会发现为什么瓷砖地图没有打印到我的画布上？

感谢您的帮助汤姆

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-29T04:23:46.700

**平铺+帆布**

我查看了 Shane Riley在[http://blog.hashrocket.com/posts/using-tiled-and-canvas-to-render-game-screens](http://blog.hashrocket.com/posts/using-tiled-and-canvas-to-render-game-screens)上的 Tiled+Canvas 博客文章。一个有趣的帖子！

好消息……我从他的演示中获取了他的代码，并且他的代码在我的开发计算机上本地运行。

在完成整个过程并查看您的代码时，我认为您可以通过处理 2 个问题来使您的代码正常工作：

1) 您的 get_tileset 函数中有一个小错误。

2) 您需要将Shane 的**所有**演示文件指向本地计算机上**的文件。**我只是将所有这些文件放在一个文件夹中（为我工作）。您将需要触摸这些文件（详情如下）：

*   山.html
*   山.json
*   山.tmx
*   山景_23.png
*   render_scene.js

这是详细信息。这些对我有用，它们应该对你有用。但如果没有，请告诉我，我可以发布我的完整代码。

一个错误——在你的 get_tileset() 中，tileset.onload 需要一个*命名函数*或*内联函数*，而不是函数调用。

```
// not this.tileset.onload=renderLayers(this)
this.tileset.onload=renderLayers;    

// change the signature of renderLayers 
// (you have “layers” in scope for visibility in this function so this s/b ok)
// So: not function renderLayers(layers)
function renderLayers() 
```

*请*在您的 $.getJSON 中包含一个错误捕获器，以便您了解失败的请求！

```
$.getJSON('maps/'+ name + '.json', function(json){
        get_tileset(json);
}).fail( alert(“I think you should know that something has gone horribly wrong!”);  ); 
```

以下是本地化文件所需的更改。

在 mountain.html 中：

```
 <script src="render_scene.js" type="text/javascript"></script> 
```

在 render_scene.js 中（如果您从 Gist 下载）

```
load: function(name) {
  return $.ajax({
    url: "mountain.json",
    dataType: "text json"
  }).done($.proxy(this.loadTileset, this));
} 
```

在 mountain.json 中：

```
"image":"mountain_landscape_23.png", 
```

在 mountain.tmx 中：

```
<image source="mountain_landscape_23.png" width="512" height="512"/> 
```

Mountain_landscape_23.png

重要的！根据您设置开发环境的方式，您可能会遇到跨域安全错误，并且浏览器将拒绝绘制您的图块。如果是这样，请将此 png 文件放入 Photoshop 之类的编辑器中，然后将其保存回您的开发域以消除 CORS 错误。

# javascript - jquery/javascript 读取选择框 css/class

> ID：15667589
> 
> 赞同：0
> 
> 时间：2013-03-27T19:20:21.247
> 
> 标签：javascript, jquery, css, dom

我继承了一些代码，这些代码根据已选择的选项设置选择框的 css。页面上有很多选择框，我的目标只是获得具有“失败”css 样式的选择框。

我认为我已经比较接近了，但我无法让它为我工作。相对接近意味着我可以在 JavaScript 警报框中显示 css 类，但是当我尝试在 if 语句中使用该文本值时，什么也没有发生。该代码如下。

任何指点都感激不尽。

```
$("select").each(function () {
   alert(this.options.item(this.options.selectedIndex).className);
   if (this.options.item(this.options.selectedIndex).className == 'frm_ddl_notOk') {
      alert('bunter?');
   }
}); 
```

20小时后编辑...

我是一个白痴。我拼错了我要找的课程。应该是“form_ddl_notOk”。我花了多长时间才注意到这一点，这显然令人沮丧。特别是在我使用提示框之后，我可以将类名剪切并粘贴回我的代码中（然后没有这样做！）。

当我使用正确的类名时，我在问题中发布的不完美代码起作用了。

以下是我的问题的一些背景以及对其他问题和评论的回应：

当我在“失败”中找到一个元素时，我会寻找一个名为“comments”的兄弟元素，并强制填写“comments”。我不能基于选项文本进行选择，我必须基于类和/或 bgcolor。该样式应用于 select 元素和 option 元素。我使用更通用的选择器只是为了弄清楚。

感谢您的回复。不确定我是否应该将其中任何一个标记为“答案”。如果这个 Q 被删除，宇宙可能会继续正常运行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T19:25:25.990

不要选择所有`<select>`元素，而是更改选择器：

```
$("select.frm_ddl_notOk").each(function () {

}); 
```

这使用**类**选择器 ( `.`) - [http://api.jquery.com/class-selector/](http://api.jquery.com/class-selector/)。它只会返回具有特定类的元素。因此，在您的情况下，它将查找所有`<select>`元素，然后根据它们是否具有类“frm_ddl_notOk”来过滤它们。

但更具可读性的是：

```
$("select").filter(".frm_ddl_notOk").each(function () {

}); 
```

如果您要针对`<select>`具有特定类的元素（这就是您的问题似乎要解释的内容），这就是全部。但是在您的代码中，您似乎正在查看`<option>`元素（特别是选定的元素）以查看它们是否具有类（使用 jQuery 的 hasClass - [http://api.jquery.com/hasClass/](http://api.jquery.com/hasClass/)）。如果是这样，你可以尝试这样的事情：

```
$("select").each(function () {
    var $this = $(this);
    if ($this.find("option").filter(":selected").hasClass('frm_ddl_notOk')) {
        alert('bunter?');
    }
}); 
```

这将为**每个元素找到***选定* `<option>`的元素，如果它具有您正在查看的类，它将发出警报。 **`<select>`**

 **使用`:selected`选择器 - [http://api.jquery.com/selected-selector/](http://api.jquery.com/selected-selector/)

所以我想我的意思是，如果您想获得选定的选项，请使用：

```
$("select").find("option").filter(":selected") 
```

如果要设置选定的选项，请使用：

```
$("select").find("option").eq(YOUR INDEX).prop("selected", true); 
```

[http://api.jquery.com/eq/](http://api.jquery.com/eq/)

[http://api.jquery.com/prop/](http://api.jquery.com/prop/)

最后，如果您不需要对特定`<select>`元素进行操作，只需使用以下命令：

```
$("select").find("option").filter(":selected").filter(".frm_ddl_notOk").each(function () {
    // The <option>s that have the "frm_ddl_notOk" class
}); 
```

在这一个中，它找到所有`<select>`元素，查看它们的`<option>`子元素，只查看*选定*的元素，并且只查看类“frm_ddl_notOk”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T19:25:27.647

试试这个：

```
$("select").each(function () {
   if ($(this.options[this.selectedIndex]).hasClass('frm_ddl_notOk')) {
      // do what must be done.
   }
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-27T19:26:04.573

```
$("select").each(function (i, ele) {
     if ( $('option:selected', ele).is('.frm_ddl_notOk') ) {
         alert('bunter?');
     }
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-28T17:57:48.567

当我使用正确的类名时，我发布的问题代码有效。

类名 == 'form_ddl_notOk'

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-03-27T19:48:32.987

您的代码有两个方面的改进：
1）选择器可以更高效
2）您对“this”的使用不正确。使用`$(this)`或更好地使用回调函数`$(element)`的第二个参数作为`each()``element`

```
/*You get your <select class="frm_ddl_notOk"> element*/
$("select.frm_ddl_notOk").each(function(index, element) {
   /* Get the <option> tag like this $(element).find("option:selected") */
   alert("Your option element is "+ $(element).find("option:selected"));
   alert('bunter?');
}); 
```

如果您觉得超级懒惰：`$("select.frm_ddl_notOk option:selected")`用于获取所有选定`<option>`的标签，其中`"frm_ddl_notOk"`包含父`<select>`标签中的类。**

# c# - 未捕获异步异常

> ID：15667595
> 
> 赞同：1
> 
> 时间：2013-03-27T19:20:34.613
> 
> 标签：c#, asynchronous

这是我与服务器通信的异步方法：

```
public static Task<bool> ValidateEmail(string email)
    {
        var url = ServerBase + Resources + Authorization + "check_existence";
        var queryString = SerializationHelper.CreateQueryString(new Dictionary<object, object> {{"email", email}});
        try
        {
            return
                HttpHelper.PostAsync(url, queryString, null).ContinueWith(
                    json => SerializationHelper.DeserializeValidationResponse(json.Result));
        } catch (Exception e)
        {
            return TaskErrorHelper.Error<bool>(e);
        }
    } 
```

`DeserializeValidationResponse`未捕获序列化服务器响应（来自方法）时引发的异常。我究竟做错了什么？

更新：`TaskErrorHelper.Error`代码：

```
internal static Task<T> Error<T>(Exception e)
    {
        var tcs = new TaskCompletionSource<T>();
        tcs.SetException(e);
        return tcs.Task;
    } 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-27T20:03:46.297

> 未捕获序列化服务器响应（来自 DeserializeValidationResponse 方法）时引发的异常。我究竟做错了什么？

你没有*做错*什么。错误的是您认为异常处理程序与延续有任何关系。让我们暂时不考虑延续，考虑一下：

```
class C
{
  object obj = null;
  Action action;
  void M()
  {
    N();
    action();
  }
  void N()
  {
     try
     {
       action = ()=>{Console.WriteLine(obj.ToString());};
     }
     catch (Exception ex) 
     { 
       Console.WriteLine("caught!");
     }
  } 
```

您是否认为 catch 处理程序应该捕获`action()`仅因为`action`恰好是在具有处理程序的堆栈帧上创建而引发的异常？

这不是异常的工作方式。

你的情况只是这个小程序的一个更复杂的版本。直到异常处理程序消失很久之后，延续委托才会运行。哎呀，延续甚至可能不在同一个线程上运行！

那么如何获得异常呢？**如果延续抛出异常，那么它将被自动捕获并将异常存储在任务中。**然后，您可以将其从任务中拉出来。

或者，您可以重写您的程序以将处理程序的副本放在延续中：

```
public static Task<bool> ValidateEmail(string email)
{
    var url = ...
    var queryString = ...
    try {
        return HttpHelper.PostAsync(url, queryString, null).ContinueWith(
        json => { try { ... } catch(Exception) { ... } });
    } catch( ... 
```

或者，如果你`async-await`在 C# 5 中使用，你会得到一些乐趣：

```
public static async Task<bool> ValidateEmail(string email)
{
    var url = ...
    var queryString = ...
    try
    {
        HttpResponseMessage json = await HttpHelper.PostAsync(url, queryString, null);
        SerializationHelper.DeserializeValidationResponse(json.Result));
    } 
    catch (Exception e)
    {
        return false;
    }
    return true;
} 
```

现在编译器会重写你的代码，让它做你想做的事。这样做的好处`await`是您不必编写任何这种疯狂的“继续”逻辑；编译器会为你做这件事。

# php - 推送通知要求 Android iOS

> ID：15667600
> 
> 赞同：-1
> 
> 时间：2013-03-27T19:20:53.207
> 
> 标签：php, android, ios, push-notification, google-cloud-messaging

我想知道在 android 和 iOS 应用程序中实现推送通知的要求是什么。

我有一个托管计划来托管我的网站和 PHP 脚本，所以我真正的问题是推送通知是由 php 脚本还是由需要安装到专用服务器的程序发出的。

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T16:25:49.770

通常，`Push Notifications`不是由您直接发送，而是由 Google/Apple 托管的服务器发送。

在您的服务器上，您向这些服务器发出请求，以便发送您的推送通知。可以使用各种 Web 编程语言设置这些请求，例如 Java/PHP/Python/... 已经有一些开源库可以为您派上用场，例如[APNS-PHP](https://code.google.com/p/apns-php/) (iOS)。要使用`Google Cloud Messaging`(Android) 和发送通知`PHP`，请参阅此[SO 帖子](https://stackoverflow.com/questions/11242743/gcm-with-php-google-cloud-messaging)。

有关一般介绍，请参阅

*   [本地和推送通知编程指南](http://developer.apple.com/library/mac/#documentation/NetworkingInternet/Conceptual/RemoteNotificationsPG/ApplePushService/ApplePushService.html)(iOS)
*   [适用于 Android 的 Google 云消息传递](http://developer.android.com/google/gcm/index.html)(Android)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T19:23:24.730

如果你不知道从哪里开始，我强烈推荐 Urban Airship，你不需要编写自己的服务器，只需通过他们的 API 使用他们的服务器。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-04T16:13:13.983

还有另一种更便宜的服务，例如[Pushwoosh](http://www.pushwoosh.com/)、[Mainline](http://www.mainline.fr/)，甚至 Parse 都可以做到。

# ant - 使用 ANT 为没有 RAD 或 RBU 的 IBM WAS 服务器创建 EAR

> ID：15667603
> 
> 赞同：0
> 
> 时间：2013-03-27T19:21:06.290
> 
> 标签：ant, ibm-rad

是否可以在不安装 RAD（Rational Application Developer）或 RBU（Rational Build Utility）的情况下创建和使用 IBM Ant 任务。我想只使用 ANT 并复制任务运行所需的任何 jar。我已经尝试过了，但是在需要更多课程的情况下得到了例外。我们通常在无头 ant 构建中运行构建，但由于不同的构建服务器需要 RAD 或 RBU 安装许可证，因此保持这种状态的成本越来越高。对此有什么想法吗？

到目前为止，我已经这样做了：

```
<path id="was_classpath">
    <fileset dir="c:\rad_extension\lib">
        <include name="*.jar"/>
    </fileset>
</path>

<taskdef name="earExport" classname="com.ibm.etools.j2ee.ant.EARExport"
       classpathref="was_classpath" />
<taskdef name="projectBuild" classname="com.ibm.etools.ant.extras.ProjectBuild"
       classpathref="was_classpath" />
<taskdef name="projectGetErrors" classname="com.ibm.etools.ant.extras.ProjectGetErrors"
       classpathref="was_classpath" />

<projectBuild ProjectName="MyProject"
       failonerror="false" DebugCompilation="true" BuildType="full" /> 
```

我用罐子创建了文件夹“C:\rad_extension\lib”：

```
antextras.jar
antj2ee.jar
antserver.jar
org.eclipse.core.runtime_.jar
org.eclipse.wst.common.frameworks.nl1_1.1.200.v200809240100.jar
org.eclipse.wst.common.frameworks.nl2_1.1.200.v200809240100.jar
org.eclipse.wst.common.frameworks_1.1.201.v200811060900.jar
resources-ant.jar 
```

但我仍然收到以下错误：

taskdef 找不到类 com.ibm.etools.j2ee.ant.EARExport 所需的类：org.eclipse.core.runtime.CoreException using the classloader

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-24T14:29:38.187

您仍然需要 ANT 运行时 jar。就我而言，RAD 8.0.4 位于：{install-dir}\SDPShared\plugins\og.apache.ant_1.7.1.v.20100518\lib*

根据您的构建使用的任务，您可能需要一些其他 jar。您可以通过查看 Windows->Preferences 中的 Ant->Runtime->Tasks 选项卡来确定哪些。

# java - 在 spring 3.0 中管理所有用户的会话数据

> ID：15667604
> 
> 赞同：0
> 
> 时间：2013-03-27T19:21:07.700
> 
> 标签：java, spring, security, session, spring-mvc

正如标题所说，我有一个 spring mvc 安全实现，效果很好，但我想在 web 应用程序中管理用户登录。

我需要添加会话信息，例如“客户端 IP 地址、登录时间、用户的上次活动和登录状态（如果我想注销它们）”

我已经阅读了很多论坛、示例，甚至是 spring 文档，但找不到我需要的东西。

甚至尝试将 bean 添加到我的安全 xml 中，在我的 LoginController 中添加 @Resource sessionManager，并得到 504 错误。

另一个问题：有没有办法获取客户端IP地址？我现在通过使用 jquery 在另一个网站上发帖来获得它......但这很脏。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T19:35:19.687

为了对“所有会话”进行操作，您需要比会话“更高”，这意味着 ApplicationContext。

通过扩展 ServletContextListener 并向 web.xml 添加侦听器定义，我做了一些类似的事情。

基本上：在 contextInitialized(ServletContextEvent event) 添加你的监听器实例

```
event.getServletContext().setAttribute("myContextListener", this); 
```

当您需要某些东西时，将对象从上下文中取出，并带有一些变化

```
(MyContextListener)request.getSession().getServletContext()
    .getAttribute("myContextListener"); 
```

至于如何做'The Spring Way'（tm），好吧，我不知道......但是。

# c# - 设置 Lucene.Net 索引

> ID：15667606
> 
> 赞同：1
> 
> 时间：2013-03-27T19:21:12.590
> 
> 标签：c#, lucene.net

我有一个列出运动和用户的数据库，并有一个连接表（UserSports）：

```
Sports Table:
ID   Name
1    Running
2    Swimming
3    Football
4    Baseball
5    Basketball

Users Table:
ID    Name
1     George
2     Jane
3     Alex

UsersSports
UserID   SportID
1         2
3         1
2         4
2         5 
```

我想使用 lucene.net 搜索运动，所以我为它们创建了一个索引并分析了名称。这很好用。当我搜索“球”时，我得到了足球、棒球、篮球。我想要做的是，对于特定用户，只返回他们在 UserSports 中没有记录的运动。因此，如果 Jane 搜索“ball”，它应该只返回 Football。我可以使用 a`not in`或 a在 SQL 中执行此操作，`left join ... where join is null`并且效果很好，但我想添加模糊逻辑搜索 Lucene.net 给出的。

在 Lucene.Net 中索引我的数据的最佳方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T14:44:59.600

有很多方法可以做到这一点。

因为你永远不会有大量的运动，你可以像你实际做的那样简单地查询 Lucene 索引，并从中构建一个 SQL 查询：

```
SELECT *
FROM Sports
WHERE Sports.ID IN([list from lucene])
AND NOT EXISTS(
    SELECT 1
    FROM UsersSports
    WHERE UsersSports.UserId = [current user id]
    AND UserSports.SportID = Sports.ID
) 
```

# css - 哪个是创建圆形按钮的更好方法：或背景图像？

> ID：15667614
> 
> 赞同：14
> 
> 时间：2013-03-27T19:21:28.810
> 
> 标签：css

我有两种创建圆形按钮的方法：[http](http://codepen.io/anon/pen/GiHyJ) ://codepen.io/anon/pen/GiHyJ 它们看起来都一样，但我不确定哪种方式更稳定、跨平台、可用等。我只有一个 android手机测试一下，两个都好看。我应该使用一种方法而不是另一种方法，为什么？

方法一：`<img>`在 a`<div>`中，允许用户在 img 上获取上下文菜单。

```
<div class="method1">
  <img src="http://i.imgur.com/TLFDrvp.jpg" />
</div>

.method1 {
    width: 100px;
    height: 100px;
    overflow: hidden;
    border-radius: 50%;
    -webkit-border-radius: 50%;
    -moz-border-radius: 50%;
    box-shadow: 0 0 10px rgba(0, 0, 0, .9);
    -webkit-box-shadow: 0 0 10px rgba(0, 0, 0, .9);
    -moz-box-shadow: 0 0 10px rgba(0, 0, 0, .9);
} 
```

方法二：`background: url`在`<div>`. 少加价。

```
<div class="method2"></div>

.method2 {
    background: url(http://i.imgur.com/TLFDrvp.jpg);
    width: 100px;
    height: 100px;
    overflow: hidden;
    border-radius: 50%;
    -webkit-border-radius: 50%;
    -moz-border-radius: 50%;
    box-shadow: 0 0 10px rgba(0, 0, 0, .9);
    -webkit-box-shadow: 0 0 10px rgba(0, 0, 0, .9);
    -moz-box-shadow: 0 0 10px rgba(0, 0, 0, .9);
} 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-27T20:16:10.623

将图像用于内容和`background-image`设计元素。在您的情况下，按钮是您设计的一部分，应该使用`background-image`.

# ios - 如何找到 NSPredicate 选择值的 ARRAY 的索引位置。我使用filteredArrayUsingPredicate 作为过滤器

> ID：15667615
> 
> 赞同：3
> 
> 时间：2013-03-27T19:21:29.287
> 
> 标签：ios, objective-c, nspredicate

这是一个根据当前时间过滤具有开始时间和结束时间的数组的示例。这工作正常：

**问题：但在这里我想知道 collectionArr 的索引位置，谓词选择值。**

```
NSDate* currentDate = [NSDate date];
NSDateFormatter *_formatter = [[[NSDateFormatter alloc] init] autorelease];
[_formatter setLocale:[NSLocale currentLocale]];
[_formatter setDateFormat:@"yyyy-MM-dd hh:mm a"];

NSString *_date=[_formatter stringFromDate:currentDate];
NSPredicate *predicate = [NSPredicate predicateWithFormat:@"StartDate <= %@ AND EndDate = %@", _date, _date];
if (shortPrograms.count > 0) {
    [shortPrograms removeAllObjects]; 
}

//collectionArr have multiple dictionaries ,which has start date and end date.  
//collectionArr = [[NSArray alloc] initWithObjects:[NSDictionary dictionaryWithObjectsAndKeys:@"..Sdate..",@"Startdate",@"..Edate..",@"Enddate", nil], nil]; 
//shortPrograms is a filter are, having the date in between start date and end date.

[shortPrograms addObjectsFromArray:[collectionArr filteredArrayUsingPredicate:predicate]]; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T19:46:50.883

您的`shortPrograms`数组包含来自 的对象的子集`collectionArr`。听起来您想从中获取对象`shortPrograms`并确定`collectionArr`它的来源。

一般来说你不能。但是，如果其中的所有对象`collectionArr`都是唯一的，那么这是可能的。

```
id someObject = shortPrograms[someIndex]; // get some value
NSUInteger originalIndex = [collectionArr indexOfObject:someObject]; 
```

如果您的对象`collectionArr`不是唯一的，那么这将不起作用，因为无法知道您正在处理哪些重复项。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-27T20:05:22.670

如果你想根据一些比较从数组中获取索引，你应该使用 indexOfObjectsPassingTest:，而不是谓词。您似乎想要查找结束时间与当前日期（包括时间）相同的对象的索引。仅当键 EndDate 的值是 NSDate 对象而不是字符串时，这才有效。此外，假设您的开始日期总是相同或更早于结束日期，没有理由检查开始时间，只检查结束时间。这就是您可以使用我上面提到的方法的方式：

```
NSIndexSet *indxs = [collectionArr indexesOfObjectsPassingTest:^BOOL(NSDictionary *dict, NSUInteger idx, BOOL *stop) {
        return (fabs([dict[@"EndDate"] timeIntervalSinceNow]) < 10);
    }];
NSLog(@"%@",indxs); 
```

这将返回键 EndDate 的值与当前时间和日期相差不到 10 秒的任何字典的索引。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-27T19:24:41.373

据我所知，这是**不可能**的`NSPredicate`

没有可用的方法可以`NSPredicate`返回索引位置。

您可能必须实现自己的逻辑才能实现目标。

# visual-c++ - 如何显示 ListBox 中对象的 ToString？

> ID：15667617
> 
> 赞同：0
> 
> 时间：2013-03-27T19:21:36.460
> 
> 标签：visual-c++, c++-cli

我有一个类，其中包含我要显示的字符串和该项目的 id。

```
ref class ListBoxItem {
private:
   int id;
   String ^ name;

public:
   ListBoxItem(int id, const char * name) { this->id = id; this->name = gcnew System::String(name); }
   virtual String ^ ToString() new { return name; }
}; 
```

我将每个项目添加到 ListBox 中，如下所示：

```
for(list<string>::iterator i = listItems.begin(); i != listItems.end(); i++)
   listBoxItems->Items->Add(gcnew ListBoxItem(2, (*i).c_str())); 
```

这将产生一个`ListBox`具有正确数量的项目，但所有项目都称为“ListBoxItem”。

相反，我希望显示在调用方法`ListBox`时生成的字符串。`ToString``ListBoxItem`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T21:58:38.950

您没有说您使用的是 WinForms 还是 WPF，但我相信这个答案对任何一个都有效。

（注意：框架中有一个名为[ListBoxItem](http://msdn.microsoft.com/en-us/library/system.windows.controls.listboxitem.aspx)的类。您可能想选择一个不同的类名。）

我相信问题在这里：

```
virtual String ^ ToString() new { return name; }
                            ^^^ 
```

这意味着您正在创建一个全新的 ToString 方法，它与 Object.ToString 方法没有任何关系。当 ListBox 调用 ToString 时，它没有您的类定义，因此它只调用 Object.ToString()，您没有更改它。

切换到这个，你应该很好：

```
virtual String ^ ToString() override { return name; }
                            ^^^^^^^^ 
```

# .net - 如何找出当前方法是否被 IsOneWay 标记

> ID：15667622
> 
> 赞同：2
> 
> 时间：2013-03-27T19:21:51.723
> 
> 标签：.net, wcf, isoneway, oneway

有没有办法知道当前正在执行的 WCF 方法是否是 OneWay 方法？

我正在使用 httpBinding，问题与服务器端有关。

我在 MSDN 上的 OperationContext 属性中搜索并找不到它。

**编辑**：

```
I used the following check:
HttpContext.Current.Response.StatusCode != 
        (int)System.Net.HttpStatusCode.Accepted; 
```

在 OneWay 调用的情况下，状态码将为 202，但这不是一个好方法。

有没有更好的方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T20:45:47.227

正如蒂姆建议的那样，使用反射。以下代码段应该适合您

```
 Type serviceInterface = typeof(IService1);
 MethodInfo mi =  serviceInterface.GetMethod((System.Reflection.MethodBase.GetCurrentMethod().Name);
 Attribute attr = mi.GetCustomAttribute(typeof(OperationContractAttribute));
 Console.WriteLine(((OperationContractAttribute)attr).IsOneWay); 
```

您也可以使用 stackframe 来获取当前方法名称，但我一直使用反射。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-28T22:23:19.253

解决此问题的 WCF 方法是：

1.  创建包含所需数据的自定义上下文对象
2.  创建填充数据的自定义行为
3.  将行为应用于您的服务

这需要插入多个 WCF 扩展点。一旦掌握了窍门，这并不难，但是由于需要实现所有接口（即使方法实现为空），因此需要大量输入。这是一个例子。

首先定义一个简单的服务：

```
[ServiceContract]
public interface ISimple
{
    [OperationContract(IsOneWay = true)]
    void OneWay();

    [OperationContract]
    void Default();
}

[OneWayContract]
public class SimpleService : ISimple
{
    //[OneWayOperation]     // uncomment to Add context data on the operation level instead on contract.
    public void OneWay()
    {
        Console.WriteLine("OneWay() is marked IsOneWay:" + OneWayContext.Current.IsOneWay);
    }

    public void Default()
    {
        Console.WriteLine("Default() is marked IsOneWay:" + OneWayContext.Current.IsOneWay);
    }
} 
```

它使用自定义上下文对象来存储您需要的信息。在这种情况下，如果操作 IsOneWay，则为 true 的布尔值。请注意，由于您正在包装 WCF InstanceContext，因此可以在不实际托管服务的情况下进行单元测试。创建取自[此博客](http://caraulean.com/blog/2008/02/13/httpcontext-idiom-for-windows-communication-foundation/)的自定义上下文的方法：

```
public class OneWayContext : IExtension<InstanceContext>
{
    public OneWayContext()
    {
        // if not set, default to false.
        IsOneWay = false;
    }

    public bool IsOneWay { get; set; }

    public static OneWayContext Current
    {
        get
        {
            OneWayContext context = OperationContext.Current.InstanceContext.Extensions.Find<OneWayContext>();
            if (context == null)
            {
                context = new OneWayContext();
                OperationContext.Current.InstanceContext.Extensions.Add(context);
            }
            return context;
        }
    }

    public void Attach(InstanceContext owner) { }
    public void Detach(InstanceContext owner) { }
} 
```

创建一个 OperationInvoker 以将自定义上下文添加到 OperationContext。请注意，插入 WCF OperationInvoker 意味着将其放入调用堆栈中。因此，它不处理的所有调用都需要传递给框架的“内部”OperationInvoker。

```
public class OneWayBehavior : IOperationInvoker
{
    IOperationInvoker innerOperationInvoker;
    public readonly bool isOneWay;

    public OneWayBehavior(IOperationInvoker innerOperationInvoker, bool isOneWay)
    {
        this.isOneWay = isOneWay;
        this.innerOperationInvoker = innerOperationInvoker;
    }

    public object[] AllocateInputs()
    {
        return innerOperationInvoker.AllocateInputs();
    }

    public object Invoke(object instance, object[] inputs, out object[] outputs)
    {
        // Everytime the operation is invoked, add IsOneWay information to the context.
        OneWayContext.Current.IsOneWay = this.isOneWay;

        return innerOperationInvoker.Invoke(instance, inputs, out outputs);
    }

    public IAsyncResult InvokeBegin(object instance, object[] inputs, AsyncCallback callback, object state)
    {
        return innerOperationInvoker.InvokeBegin(instance, inputs, callback, state);
    }

    public object InvokeEnd(object instance, out object[] outputs, IAsyncResult result)
    {
        return innerOperationInvoker.InvokeEnd(instance, out outputs, result);
    }

    public bool IsSynchronous
    {
        get { return innerOperationInvoker.IsSynchronous; }
    }
} 
```

现在将新行为应用于合同。[OneWayContract] 属性应用 WCF 合同行为，该行为应用操作行为。您还可以在操作级别应用该行为。

**请注意，OperationDescription 提供了已填充的 WCF 结构所需的所有信息。不诉诸反思。不依赖绑定。**

```
public class OneWayOperationAttribute : Attribute, IOperationBehavior
{
    public void AddBindingParameters(OperationDescription operationDescription, System.ServiceModel.Channels.BindingParameterCollection bindingParameters)
    {
    }

    public void ApplyClientBehavior(OperationDescription operationDescription, ClientOperation clientOperation)
    {
    }

    public void ApplyDispatchBehavior(OperationDescription operationDescription, DispatchOperation dispatchOperation)
    {
        // grab "IsOneWay" from the operation description and pass on the behavior's constructor.
        dispatchOperation.Invoker = new OneWayBehavior(dispatchOperation.Invoker, operationDescription.IsOneWay);
    }

    public void Validate(OperationDescription operationDescription)
    {
    }
}

public class OneWayContractAttribute : Attribute, IContractBehavior
{
    public void AddBindingParameters(ContractDescription contractDescription, ServiceEndpoint endpoint, System.ServiceModel.Channels.BindingParameterCollection bindingParameters)
    {
    }

    public void ApplyClientBehavior(ContractDescription contractDescription, ServiceEndpoint endpoint, ClientRuntime clientRuntime)
    {
    }

    public void ApplyDispatchBehavior(ContractDescription contractDescription, ServiceEndpoint endpoint, DispatchRuntime dispatchRuntime)
    {
        foreach (OperationDescription operation in contractDescription.Operations)
        {
            operation.OperationBehaviors.Add(new OneWayOperationAttribute());
        }
    }

    public void Validate(ContractDescription contractDescription, ServiceEndpoint endpoint)
    {
    }
} 
```

现在运行一个快速测试。

```
public static class Program
{
    static void Main(string[] args)
    {
        ServiceHost simpleHost = new ServiceHost(typeof(SimpleService), new Uri("http://localhost/Simple"));
        simpleHost.Open();

        ChannelFactory<ISimple> factory = new ChannelFactory<ISimple>(simpleHost.Description.Endpoints[0]);
        ISimple proxy = factory.CreateChannel();

        proxy.OneWay();

        proxy.Default();

        Console.WriteLine("Press ENTER to close the host once you see 'ALL DONE'.");
        Console.ReadLine();

        ((ICommunicationObject)proxy).Shutdown();

        simpleHost.Shutdown();
    }
} 
```

输出应该是：

```
Default() is marked IsOneWay:False
OneWay() is marked IsOneWay:True
Press ENTER to close the host once you see 'ALL DONE'. 
```

请注意，我们所有的抽象都得到了维护。服务只依赖于一个行为提供的上下文对象，该行为被属性明确标记为对服务的依赖。

该示例放在`[OneWayContract]`服务类上。但您也应该能够将其应用于`[ServiceContract]`.

* * *

为了完整起见，这是整个代码示例的副本，作为一个控制台应用程序，您可以粘贴并运行它。

```
using System;
using System.ServiceModel;
using System.ServiceModel.Description;
using System.ServiceModel.Dispatcher;

namespace ConsoleWCF
{
    [ServiceContract]
    public interface ISimple
    {
        [OperationContract(IsOneWay = true)]
        void OneWay();

        [OperationContract]
        void Default();
    }

    [OneWayContract]
    public class SimpleService : ISimple
    {
        //[OneWayOperation]     // uncomment to Add context data on the operation level instead on contract.
        public void OneWay()
        {
            Console.WriteLine("OneWay() is marked IsOneWay:" + OneWayContext.Current.IsOneWay);
        }

        public void Default()
        {
            Console.WriteLine("Default() is marked IsOneWay:" + OneWayContext.Current.IsOneWay);
        }
    }

    public class OneWayBehavior : IOperationInvoker
    {
        IOperationInvoker innerOperationInvoker;
        public readonly bool isOneWay;

        public OneWayBehavior(IOperationInvoker innerOperationInvoker, bool isOneWay)
        {
            this.isOneWay = isOneWay;
            this.innerOperationInvoker = innerOperationInvoker;
        }

        public object[] AllocateInputs()
        {
            return innerOperationInvoker.AllocateInputs();
        }

        public object Invoke(object instance, object[] inputs, out object[] outputs)
        {
            // Everytime the operation is invoked, add IsOneWay information to the context.
            OneWayContext.Current.IsOneWay = this.isOneWay;

            return innerOperationInvoker.Invoke(instance, inputs, out outputs);
        }

        public IAsyncResult InvokeBegin(object instance, object[] inputs, AsyncCallback callback, object state)
        {
            return innerOperationInvoker.InvokeBegin(instance, inputs, callback, state);
        }

        public object InvokeEnd(object instance, out object[] outputs, IAsyncResult result)
        {
            return innerOperationInvoker.InvokeEnd(instance, out outputs, result);
        }

        public bool IsSynchronous
        {
            get { return innerOperationInvoker.IsSynchronous; }
        }
    }

    public class OneWayOperationAttribute : Attribute, IOperationBehavior
    {
        public void AddBindingParameters(OperationDescription operationDescription, System.ServiceModel.Channels.BindingParameterCollection bindingParameters)
        {
        }

        public void ApplyClientBehavior(OperationDescription operationDescription, ClientOperation clientOperation)
        {
        }

        public void ApplyDispatchBehavior(OperationDescription operationDescription, DispatchOperation dispatchOperation)
        {
            // grab "IsOneWay" from the operation description and pass on the behavior's constructor.
            dispatchOperation.Invoker = new OneWayBehavior(dispatchOperation.Invoker, operationDescription.IsOneWay);
        }

        public void Validate(OperationDescription operationDescription)
        {
        }
    }

    public class OneWayContractAttribute : Attribute, IContractBehavior
    {
        public void AddBindingParameters(ContractDescription contractDescription, ServiceEndpoint endpoint, System.ServiceModel.Channels.BindingParameterCollection bindingParameters)
        {
        }

        public void ApplyClientBehavior(ContractDescription contractDescription, ServiceEndpoint endpoint, ClientRuntime clientRuntime)
        {
        }

        public void ApplyDispatchBehavior(ContractDescription contractDescription, ServiceEndpoint endpoint, DispatchRuntime dispatchRuntime)
        {
            foreach (OperationDescription operation in contractDescription.Operations)
            {
                operation.OperationBehaviors.Add(new OneWayOperationAttribute());
            }
        }

        public void Validate(ContractDescription contractDescription, ServiceEndpoint endpoint)
        {
        }
    }

    public class OneWayContext : IExtension<InstanceContext>
    {
        public OneWayContext()
        {
            // if not set, default to false.
            IsOneWay = false;
        }

        public bool IsOneWay { get; set; }

        public static OneWayContext Current
        {
            get
            {
                OneWayContext context = OperationContext.Current.InstanceContext.Extensions.Find<OneWayContext>();
                if (context == null)
                {
                    context = new OneWayContext();
                    OperationContext.Current.InstanceContext.Extensions.Add(context);
                }
                return context;
            }
        }

        public void Attach(InstanceContext owner) { }
        public void Detach(InstanceContext owner) { }
    }

    public static class Program
    {
        static void Main(string[] args)
        {
            ServiceHost simpleHost = new ServiceHost(typeof(SimpleService), new Uri("http://localhost/Simple"));
            simpleHost.Open();

            ChannelFactory<ISimple> factory = new ChannelFactory<ISimple>(simpleHost.Description.Endpoints[0]);
            ISimple proxy = factory.CreateChannel();

            proxy.OneWay();

            proxy.Default();

            Console.WriteLine("Press ENTER to close the host once you see 'ALL DONE'.");
            Console.ReadLine();

            ((ICommunicationObject)proxy).Shutdown();

            simpleHost.Shutdown();
        }
    }

    public static class Extensions
    {
        static public void Shutdown(this ICommunicationObject obj)
        {
            try
            {
                obj.Close();
            }
            catch (Exception ex)
            {
                Console.WriteLine("Shutdown exception: {0}", ex.Message);
                obj.Abort();
            }
        }
    }
} 
```

# entity-framework - DbContext 处理后枚举成功

> ID：15667634
> 
> 赞同：2
> 
> 时间：2013-03-27T19:22:17.923
> 
> 标签：entity-framework, linq-to-entities

**背景**

我正在从父/子关系创建一个投影，其中包括父级的 Name 属性和子级 ID 的列表。

**代码**

```
private class ParentChildInfo
{
    public string Name { get; set; }
    public List<int> ChildIds { get; set; }
}

var infos = ctx.Masters.Include(m => m.Children).Select(
    m => new ParentChildInfo()
    {
        Name = m.Name,
        ChildIds = m.Children.Where(c => c.SomeProp.StartsWith("SpecialValue"))
                    .Select(c => c.Id).ToList()
    }).ToList(); 
```

不幸的是，这产生了错误

> LINQ to Entities 无法识别方法 'System.Collections.Generic.List`1[System.Int32] ToList[Int32]

这导致我[这篇文章](https://stackoverflow.com/q/13810087/141172)，其中建议（[在评论中](https://stackoverflow.com/a/13810301/141172)）进行以下更改：

```
private class ParentChildInfo
{
    public string Name { get; set; }
    public IEnumerable<int> ChildIds { get; set; } // No longer List<int>
}

var infos = ctx.Masters.Include(m => m.Children).Select(
    m => new ParentChildInfo()
    {
        Name = m.Name,
        ChildIds = m.Children.Where(c => c.SomeProp.StartsWith("SpecialValue"))
                    .Select(c => c.Id) // Dropped the .ToList()
    }).ToList(); 
```

我最初想要获取列表而不是可枚举，因为使用结果的代码会运行几分钟，而且我不想将 DbContext 占用那么长时间。

我使用这样的代码：

```
using (MyContext ctx = new MyContext())
{
    // code from above that populates infoes
}

foreach (var info in infoes)
{
    // use info.ChildIds
} 
```

我计划将其`foreach`移入，`using`以便我可以枚举 ChildId，但改为按 F5 并惊讶地发现代码有效。

**问题**

鉴于 DbContext 在那一点被处置并且 ChildIds 是`IEnumerable<int>`而不是`List<int>`，为什么我*可以*枚举 ChildIds？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-27T19:47:01.070

这是因为查询`ToList()`的`infos`实际执行查询。因此枚举集合`ctx.Masters`并填充预测。即使没有它，`Include`它也会注意到`Master.Children`已解决并发出 SQL 连接。的实现类型`IEnumerable<int> ChildIds`可能是`List<int>`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-27T19:48:09.643

您对查询执行了 .ToList() ，因此执行了查询并实现了所有结果，并且应该关闭与数据库的连接。我认为如果您没有 .ToList() 它将不起作用，因为（至少在 EF5 中）结果正在以流式方式处理，并且在请求时实体化（即在循环中的每次迭代中）。

# c - 如何在用 C 编写的 shell 中重定向 cd 的输出

> ID：15667635
> 
> 赞同：0
> 
> 时间：2013-03-27T19:22:26.717
> 
> 标签：c, linux, shell

我正在用 C 编写一个基本的 shell，我已经实现了所有的重定向运算符，但是，当我尝试重定向“cd”时，我遇到了这个问题：

cd 在没有任何输出重定向的情况下完美运行，但是

当我试图做这样的事情时：

```
cd inexistant_directory > output_file 
```

输出文件不是在 bash 中创建的，运行该命令会重定向标准输出，正如我之前所说的，使用外部命令的重定向运算符效果很好

当我遇到 cd 命令时，我调用

```
char*path = get_path(parameters);  //implemented by me, works on rest of the cases
int  ret =chdir(path); 
```

我不在子进程中调用它，而是在父进程中调用它（shell进程本身）

我究竟做错了什么 ？

谢谢，

PS：我运行它的操作系统是 Ubuntu 12.10 但是，代码是 POSIX 兼容的

LE：我无法发布整个代码，因为它大约有 600 行，

这是我的逻辑

```
if(internal_command) {
     //do quit, exit or cd
} else if (variable_assignemt){
     //do stuff
} else {
    // external command
    pid = fork();
    if(pid == -1) {
        //crash
    } else if (pid == 0) {
        do_redirects()
        call_external_cmd
     }
    default : 
        wait(pid, &status); 
```

所以，我认为要解决这个问题，我需要在parrent（shell进程）中重定向stdout并在执行命令后恢复它

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T19:51:59.297

在父进程（shell）中不重定向标准输出确实是导致 cd 不良行为的原因，我的解决方案如下：

```
 if(we_have_out_redirection == 1) {
       if(out != NULL) {

       char *outParrent = out;

           fflush(stdout);

       outBackup = dup(STDOUT_FILENO); //I save stdout for future restoration
       int fd = open(outParrent, O_WRONLY | O_CREAT | O_TRUNC, 0644); //open output file
       int rc;
           rc = dup2(fd, STDOUT_FILENO); //redirect stdout

    retval = chdir(out); //execute cd command

        //restore stdout
    close(fd); 
    fflush(stdout);
    rc = dup2(outBackup, 1);
    close(outBackup);
   }
} 
```

感谢 Jake223 指出我忘记在 parrent 中重定向！

# css - 2 个 div，并排占用 100% 的空间

> ID：15667647
> 
> 赞同：1
> 
> 时间：2013-03-27T19:23:12.403
> 
> 标签：css, html

我在这里搜索并找到了许多问题和答案，但我无法让这件事发挥作用。

你可以在这里查看我的 HTML 和 CSS：http: [//jsfiddle.net/PqjqF/2/](http://jsfiddle.net/PqjqF/2/)

HTML

```
<div id="SearchBox">
    <div id="SearchFieldContainer">
        <input class="SearchField" type="text" name="search" placeholder="Search..."/>
    </div>
    <div id="SearchButtonContainer">
        <a href="#" class="SearchButton">Search</a>
    </div>
</div> 
```

CSS

```
#SearchBox {
    width: *;
    background-color: #fff;
    border-top: 1px solid #ffffff;
    border-bottom: 1px solid #d2d2d2;
    height: 40px;
    padding: 14px 8px 8px 8px;
    background: -webkit-gradient(linear, left top, left bottom, color-stop(0%,#ffffff), color-stop(92%,#f3f3f3));
    background: -webkit-linear-gradient(top, #ffffff 0%,#f3f3f3 92%); /* Chrome10+,Safari5.1+ */
    background: linear-gradient(to bottom, #ffffff 0%,#f3f3f3 92%); /* W3C */
}

#SearchFieldContainer {
    float: left;
    width: 100%;
}

#SearchButtonContainer{
   float:left;
}

.SearchField {
    border: 1px solid #bdbdbd;
    background: #f5f5f5;
    -webkit-border-radius: 60px;
    border-radius: 60px;
    color: #0a0705;
    -webkit-box-shadow: rgba(255,255,255,0.4) 0 1px 0, inset rgba(000,000,000,0.7) 0 1px 1px;
    box-shadow: rgba(255,255,255,0.4) 0 1px 0, inset rgba(000,000,000,0.7) 0 1px 1px;
    padding:8px;
    margin-bottom:20px;
    width:100%;
}

.SearchField:focus {
   background: #fff;
   color: #000000;
}

.SearchButton {
    -webkit-box-shadow: 0px 2px 2px 0px #8a8a8a;
    box-shadow: 0px 2px 2px 0px #8a8a8a;
    background:-webkit-gradient( linear, left top, left bottom, color-stop(0.05, #2f3c47), color-stop(1, #0f1011) );
    background-color:#2f3c47;
    -webkit-border-radius:42px;
    border-radius:42px;
    border:1px solid #0d060d;
    display:inline-block;
    color:#ffffff;
    font-family:arial;
    font-size:18px;
    font-weight:bold;
    padding:5px 18px;
    text-decoration:none;
} 
```

我想要的是输入字段将占用它拥有的所有空间，并且搜索按钮位于它旁边，在同一行上。

我尝试了很多东西，比如隐藏溢出和其他，但它拒绝工作：-/

这里有什么帮助吗？

谢谢， - 谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T19:34:13.717

嗯，试试：

```
#SearchFieldContainer {
    float: left;
    width: 50%;
}

#SearchButtonContainer{
   float:left;
   width: 50%;
} 
```

所以两个 div 各占宽度的 50% = 100% 宽度。需要更多的工作才能完美契合，但基本上它应该可以工作。记住要“清除”（如果您不知道，请查找 clear:both）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T19:35:07.590

你的问题是某些事情没有达到 100%。例如，文本字段本身设置为 100% 宽度，但具有使其大于 100% 的填充。如果您将文本字段包装在边框中，您可以看到它超出了包含 div 的范围。有几种方法可以解决这个问题......要么删除填充，将填充计算为总 100% 宽度，或者使用 CSS：`box-sizing: border-box;`它告诉浏览器计算宽度，包括填充和边框。

您的两个容器也是如此。

**我将`box-sizing`首先使用我上面提到的方法...**

请参阅以下小提琴：http: [//jsfiddle.net/PqjqF/4/](http://jsfiddle.net/PqjqF/4/)

在这里，我已将`box-sizing: border-box;`文本字段和按钮添加到您的两个容器中。我将边界留在原处，以便您可以看到容器的边缘。（这是调试布局以查看框在哪里的好方法）

我已将容器的宽度分别更改为 80% 和 20%，并将文本字段的宽度设置为 100%。您还可以对按钮应用 100% 宽度以使其填充其容器。

请参阅[我可以使用它吗？](http://caniuse.com/#feat=css3-boxsizing)用于浏览器兼容性的框大小。

* * *

**现在一个没有`box-sizing: border-box;`...的解决方案**

请参阅以下小提琴：http: [//jsfiddle.net/PqjqF/5/](http://jsfiddle.net/PqjqF/5/)

在这里，我计算了填充的百分比，在本例中为元素本身宽度的 1%。因此，1% 左右填充（顶部和底部无关紧要），98% 宽度 = 100%。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-27T19:37:19.677

1.  稍微更改您的 HTML 以使其`div#SearchButtonContainer`出现在`div#SearchFieldContainer`.
2.  添加`margin-right`为`div#SearchFieldContainer`按钮腾出足够的空间。移除它的`float: left;`样式，然后它会默认展开 100% 的宽度（右边有一些边距）；
3.  添加`float: right;`到`div#SearchButtonContainer`.

[在jsFiddle](http://jsfiddle.net/PPxDk/2/)查看修改后的示例

# javascript - Google Map v3 - Jquery 演示 - 地图标记

> ID：15667652
> 
> 赞同：0
> 
> 时间：2013-03-27T19:23:35.037
> 
> 标签：javascript, jquery, google-maps-api-3

我在一个新项目中使用这个演示：http: [//jquery-ui-map.googlecode.com/svn/trunk/demos/jquery-google-maps-mobile.html#directions_map](http://jquery-ui-map.googlecode.com/svn/trunk/demos/jquery-google-maps-mobile.html#directions_map)

我唯一要改变的是，我会将地图上预加载的目的地放大一点。

我正在努力解决的是......我如何让地图标记显示在加载的目标位置？

这是工作地图的清理版本（只需要链接到现代化器）。如果有人可以修改以在地图上显示标记（加载时的目的地，以及在更改地图的起点时下降），那么您将成为救星。

非常感谢-戴夫

```
<!doctype html>
<html lang="en">
        <head>
        <title>jQuery mobile with Google maps - Google maps jQuery plugin</title>
        <meta charset="utf-8" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
        <meta name="viewport" content="width=device-width,initial-scale=1" />
        <link type="text/css" rel="stylesheet" href="http://jquery-ui-map.googlecode.com/svn/trunk/demos/css/jquery-mobile-1.0/jquery.mobile.css" />
        <link rel="stylesheet" href="http://jquery-ui-map.googlecode.com/svn/trunk/demos/css/mobile.css" />
        <script type="text/javascript" src="http://maps.google.com/maps/api/js?sensor=false&libraries=places"></script>
        <script type="text/javascript" src="../js/modernizr.js"></script>
        <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.7/jquery.min.js" type="text/javascript"></script>
        <script type="text/javascript" src="http://code.jquery.com/mobile/1.3.0/jquery.mobile-1.3.0.min.js"></script>
        <script type="text/javascript" src="http://jquery-ui-map.googlecode.com/svn/trunk/demos/js/demo.js"></script>
        <script type="text/javascript" src="http://jquery-ui-map.googlecode.com/svn/trunk/ui/jquery.ui.map.js"></script>
        <script type="text/javascript" src="http://jquery-ui-map.googlecode.com/svn/trunk/ui/jquery.ui.map.services.js"></script>
        <script type="text/javascript" src="http://jquery-ui-map.googlecode.com/svn/trunk/ui/jquery.ui.map.extensions.js"></script>
        <script type="text/javascript">

            var mobileDemo = { 'center': '40.74843,-73.98566', 'zoom': 18 };

            ////////////////////////////////////////////////////////////

            $('#basic_map').live('pageinit', function() {
                demo.add('basic_map', function() {
                    $('#map_canvas').gmap({'center': mobileDemo.center, 'zoom': mobileDemo.zoom, 'disableDefaultUI':true, 'callback': function() {
                        var self = this;
                        self.addMarker({'position': this.get('map').getCenter() }).click(function() {
                            self.openInfoWindow({ 'content': 'Hello World!' }, this);
                        });
                    }}); 
                }).load('basic_map');
            });

            $('#basic_map').live('pageshow', function() {
                demo.add('basic_map', function() { $('#map_canvas').gmap('refresh'); }).load('basic_map');
            });

            ////////////////////////////////////////////////////////////

            $('#directions_map').live('pageinit', function() {
                demo.add('directions_map', function() {
                    $('#map_canvas_1').gmap({'center': mobileDemo.center, 'zoom': mobileDemo.zoom, 'disableDefaultUI':true, 'callback': function() {
                        var self = this;
                        self.set('getCurrentPosition', function() {
                            self.refresh();
                            self.getCurrentPosition( function(position, status) {
                                if ( status === 'OK' ) {
                                    var latlng = new google.maps.LatLng(position.coords.latitude, position.coords.longitude)
                                    self.get('map').panTo(latlng);
                                    self.search({ 'location': latlng }, function(results, status) {
                                        if ( status === 'OK' ) {
                                            $('#from').val(results[0].formatted_address);
                                        }
                                    });
                                } else {
                                    alert('Unable to get current position');
                                }
                            });
                        });
                        $('#submit').click(function() {
                            self.displayDirections({ 'origin': $('#from').val(), 'destination': $('#to').val(), 'travelMode': google.maps.DirectionsTravelMode.DRIVING }, { 'panel': document.getElementById('directions')}, function(response, status) {
                                ( status === 'OK' ) ? $('#results').show() : $('#results').hide();
                            });
                            return false;
                        });
                    }});
                }).load('directions_map');
            });

            $('#directions_map').live('pageshow', function() {
                demo.add('directions_map', $('#map_canvas_1').gmap('get', 'getCurrentPosition')).load('directions_map');
            });

            ////////////////////////////////////////////////////////////

            $('#gps_map').live('pageinit', function() {
                demo.add('gps_map', function() {
                    $('#map_canvas_2').gmap({'center': mobileDemo.center, 'zoom': mobileDemo.zoom, 'disableDefaultUI':true, 'callback': function(map) {
                        var self = this;
                        self.watchPosition(function(position, status) {
                            if ( status === 'OK' ) {
                                var latlng = new google.maps.LatLng(position.coords.latitude, position.coords.longitude);
                                if ( !self.get('markers').client ) {
                                    self.addMarker({ 'id': 'client', 'position': latlng, 'bounds': true });
                                } else {
                                    self.get('markers').client.setPosition(latlng);
                                    map.panTo(latlng);
                                }
                            }
                        });
                    }});
                }).load('gps_map');
            });

            $('#gps_map').live('pageshow', function() {
                demo.add('gps_map', function() { $('#map_canvas_2').gmap('refresh'); }).load('gps_map');
            });

            $('#gps_map').live("pagehide", function() {
                demo.add('gps_map', function() { $('#map_canvas_2').gmap('clearWatch'); }).load('gps_map');
            });

            ////////////////////////////////////////////////////////////

            $('#places').live('pageinit', function() {
                demo.add('places_1', function() {
                    $('#map_canvas_3').gmap({'center': mobileDemo.center, 'zoom': mobileDemo.zoom, 'disableDefaultUI':true, 'callback': function() {
                        var self = this;
                        var control = self.get('control', function() {
                            $(self.el).append('<div id="control"><div><input id="places-search" class="ui-bar-d ui-input-text ui-body-null ui-corner-all ui-shadow-inset ui-body-d ui-autocomplete-input" type="text"/></div></div>');
                            self.autocomplete($('#places-search')[0], function(ui) {
                                self.clear('markers');
                                self.set('bounds', null);
                                self.placesSearch({ 'location': ui.item.position, 'radius': '5000' }, function(results, status) {
                                    if ( status === 'OK' ) {
                                        $.each(results, function(i, item) {
                                            self.addMarker({ 'id': item.id, 'position': item.geometry.location, 'bounds':true }).click(function() {
                                                self.openInfoWindow({'content': '<h4>'+item.name+'</h4>'}, this);
                                            });
                                        });
                                    }
                                });
                            });
                            return $('#control')[0];
                        });
                        self.addControl(new control(), 1);
                    }});
                }).load('places_1');
            });

            $('#places').live('pageshow', function() {
                demo.add('places_2', function() { $('#map_canvas_3').gmap('refresh'); }).load('places_2');
            });

        </script>
        </head>
<body>
<div id="directions_map" data-role="page"><div data-role="content">

    <div class="ui-bar-c ui-corner-all ui-shadow" style="padding:1em;">
      <div id="map_canvas_1" style="height:300px;"></div>
          <p>
            <label for="from">From</label>
            <input id="from" class="ui-bar-c" type="text" value="" />
          </p>
          <p>
            <label for="to">To</label>
            <input id="to" class="ui-bar-c" type="text" value="350 5th Ave, New York, NY 10118" />
          </p>
          <a id="submit" href="#" data-role="button" data-icon="search">Get directions</a>
      </div>

    <div id="results" class="ui-listview ui-listview-inset ui-corner-all ui-shadow" style="display:none;">
      <div class="ui-li ui-li-divider ui-btn ui-bar-b ui-corner-top ui-btn-up-undefined">Results</div>
      <div id="directions"></div>
      <div class="ui-li ui-li-divider ui-btn ui-bar-b ui-corner-bottom ui-btn-up-undefined"></div>
    </div>

</div></div>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T20:04:47.867

找到了解决方案：

我在“基本地图”部分找到了这个片段并将其应用于“方向图”部分：

```
self.addMarker({'position': this.get('map').getCenter() }).click(function() {
self.openInfoWindow({ 'content': 'Hello World!' }, this);
}); 
```

就在下面：

```
var self = this 
```

# php - 按发票行项目在php中计算销售税

> ID：15667654
> 
> 赞同：0
> 
> 时间：2013-03-27T19:23:38.200
> 
> 标签：php, invoice, sales-tax

我有一个关于在美国计算和存储销售税的最佳方法应该是什么的问题。我正在创建一个可以有多个行项目的发票程序。这是我遇到的问题的一个示例。

我的其中一个发票行项目如下所示。

数量 2

金额 1133.67

税率 7.5% (.075)

如果我将 1133.67 添加到 1133.67 并乘以 0.075，则税为 170.05。

但是，如果我将每个数量 1133.67 并先单独对其进行征税，则税额总计为 170.06。

显然，当我处理对每个单独数量征税时，每个数量都被四舍五入。但是当我对每个数量进行合计然后对总数征税时，就没有四舍五入了。

我可以通过简单地编辑我的表格字段以允许 3 位小数而不是 2 位来解决这个问题。

这可能是一个只有我能回答的问题，但是存储每个行项目的税额是否有意义？我在想这些数据可能会在以后的报告中有用。

想知道别人在做什么。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T19:29:34.107

在一家成功的销售税初创公司工作过，我可以告诉你“这取决于”。当地法律对您是在行项目还是发票级别计算销售税有所不同。有关该主题的一些讨论，请参见：

[https://money.stackexchange.com/questions/15051/sales-tax-rounded-then-totaled-or-totaled-then-rounded](https://money.stackexchange.com/questions/15051/sales-tax-rounded-then-totaled-or-totaled-then-rounded)

我还可以告诉你，美国的销售税*非常*复杂。有超过 10,000 个司法管辖区可以征税（州、县、市和特殊区域，如体育场区、大都市交通区、水区等）。这些地区的边界没有很好地定义一个现成的公共资源，当然也不符合邮政编码的边界。

如果你想把它弄好，你最好的选择是使用销售税计算服务。有几种 SAAS 解决方案非常适合 Web 应用程序。

# python - 与“{}”的明显缓存相关的奇怪行为

> ID：15667659
> 
> 赞同：5
> 
> 时间：2013-03-27T19:23:54.167
> 
> 标签：python

今天我了解到 Python 会缓存表达式`{}`，并在将其分配给变量时将其替换为新的空字典：

```
print id({})
# 40357936

print id({})
# 40357936

x = {}
print id(x)
# 40357936

print id({})
# 40356432 
```

我还没有查看源代码，但我知道如何实现它。（也许当对全局的引用计数`{}`增加时，全局`{}`被替换。）

但考虑这一点：

```
def f(x):
    x['a'] = 1
    print(id(x), x)

print(id(x))
# 34076544

f({})
# (34076544, {'a': 1})

print(id({}), {})
# (34076544, {})

print(id({}))
# 34076544 
```

`f`修改全局字典而不导致它被替换，并打印出修改后的字典。但是在外部`f`，尽管 id 相同，但全局字典现在是空的！

**怎么了？？**

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-27T19:30:08.657

它没有被缓存——如果你不分配`{}`任何地方的结果，它的引用计数是 0 并且它会立即被清除。碰巧您分配的下一个内存重用了旧内存。当你把它分配给你时，`x`你让它活着，然后下一个有一个不同的地址。

在您的函数示例中，一旦`f`返回，就没有对您的 dict 的剩余引用，因此它也被清理了，同样的事情也适用。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-27T19:31:36.743

Python 在这里没有做任何缓存。`id()`在程序的不同点给出相同的返回值有两种可能性：

1.  `id()`在同一个对象上被调用了两次
2.  调用的第一个对象`id()`是在创建第二个对象之前进行垃圾回收的，并且第二个对象是在与原始对象相同的内存位置创建的

在这种情况下，它是第二个。这意味着即使`print id({}); print id({})`可能两次打印相同的值，每次调用都在不同的对象上。

# php - Php - 将对象推入数组

> ID：15667660
> 
> 赞同：0
> 
> 时间：2013-03-27T19:23:54.597
> 
> 标签：php, arrays

当数组中不存在新对象时，我需要将其推送到数组中。但我一直收到这个错误。我读到这经常发生在循环中创建新对象或将项目推入循环中的数组时。我试图重用这些对象并只是重置成员值，但我仍然遇到相同的错误。实现这一目标的最佳方法是什么？

错误：

```
PHP Fatal error:  Allowed memory size of 67108864 bytes exhausted (tried to allocate 71 bytes) 
```

代码：

```
if(!array_key_exists($a->name, $tArray)) $tArray[] = $a; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-27T19:27:20.973

你有一个错误。做这个：

```
if(!array_key_exists($a->name, $tArray)) $tArray[$a->name] = $a; 
```

否则 array_key_exists 将始终返回 false 并始终添加 $a 。

# android - 改变方向 ANDROID

> ID：15667664
> 
> 赞同：0
> 
> 时间：2013-03-27T19:24:04.370
> 
> 标签：android, android-orientation

我需要帮助。

当设备方向变为横向时，我的应用程序仍然失败。

有什么问题？

我已经在 Android 清单`android:configChanges="keyboardHidden|orientation"` 和主 Activity 中设置：

```
@Override
public void onConfigurationChanged(Configuration newConfig) {
    setContentView(R.layout.main);
    super.onConfigurationChanged(newConfig);

    if (newConfig.orientation == Configuration.ORIENTATION_LANDSCAPE) {
        Toast.makeText(this, "landscape", Toast.LENGTH_SHORT).show();
    } else if (newConfig.orientation == Configuration.ORIENTATION_PORTRAIT) {
        Toast.makeText(this, "portrait", Toast.LENGTH_SHORT).show();
    }
} 
```

我的活动是碎片。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T19:31:06.813

不当`onConfigurationChanged()`。

`setContentView(R.layout.main);`从中删除`onConfigurationChanged()`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T21:00:59.020

重新创建活动时，您可能会遇到问题。

也许解决方案可能在[这里](https://stackoverflow.com/questions/12672972/fragments-and-rotating-screen-problems)

# c++ - C++：组合/多集函数（阶乘溢出）

> ID：15667665
> 
> 赞同：1
> 
> 时间：2013-03-27T19:24:06.447
> 
> 标签：c++, algorithm, combinatorics, factorial

我必须实现一个问题，从一组 n 个元素中计算 m 个元素的组合和多组。它们的公式如下：

![在此处输入图像描述](../Images/8fc353d7ac540cdc28263ca8efbc65f4.png)

![在此处输入图像描述](../Images/8f92009815d52d0fb13f53114e8cf173.png)

问题是阶乘很容易溢出，所以基本上有什么解决方案可以解决这个问题？

由于它是 TopCoder 中问题的子问题，因此我有以下约束：

1) 程序必须用 C++ 编写。

2）我无法加载外部库。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-27T19:46:14.217

你真的不需要`n!`直接计算，这很容易溢出。自从

```
C(n,m) = C(n-1, m-1) + C(n-1,m)
C(n,0) = C(n,n) =1 
```

您可以建立一个有大小的表格，`(n+1,m+1)`并使用动态编程以自下而上的方式建立表格。

算法伪代码可能如下所示：

```
for i ← 0 to n do  // fill out the table row wise
      for j = 0 to min(i, m) do
          if j==0 or j==i then C[i, j] ← 1 
          else C[i, j] ← C[i-1, j-1] + C[i-1, j] 
return C[n, m] 
```

如果您声明`c(n,m)`为 long double 并且 n 不是那么大，那么这种方式应该可以工作。否则，您需要定义自己的 BigInteger 类以避免溢出，并定义`+`运算符对 BigInteger 的工作方式，BigInteger 通常表示为字符数组或字符串。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T19:25:49.697

阶乘是相当大的数字（它们不适合 64 位字）。因此，您需要使用[bignums](http://en.wikipedia.org/wiki/Arbitrary-precision_arithmetic)（任意精度算术）来完整计算它们。考虑为此目的使用[GMPlib](http://gmplib.org/)（或在语言和实现中编写代码，例如 Common Lisp with [SBCL](http://sbcl.org/)，它本机提供它们）

另请参阅[this](https://stackoverflow.com/a/14787898/841108)和[that](https://stackoverflow.com/a/13000103/841108)对与您的问题非常相似的答案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-27T19:49:50.460

不要使用递归方法来计算可能导致堆栈溢出的阶乘，而是使用迭代方法！即使对于更大的数字，这也可以为您节省溢出。

# objective-c - 在 C 数组中存储一个 NSObject 指针数组

> ID：15667667
> 
> 赞同：2
> 
> 时间：2013-03-27T19:24:09.843
> 
> 标签：objective-c, c, arrays

我想创建一个`NSObject`包含一些成员变量的子类：

```
@interface PointMass : NSObject
{
    CGPoint mCurPosition;
    CGPoint mLastPosition;
    CGPoint mAcceleration;
}

-(id) initWithPosition:(CGPoint*) pos;

#import "PointMass.h"

@implementation PointMass

-(id) initWithPosition:(CGPoint*)pos
{
    mCurPosition = *pos;
    mLastPosition = *pos;
    mAcceleration = ccp(0,0);
    return self;
}

@end 
```

我想创建一个 C 风格的数组来在 cocos2d 类中保存一堆它们：

```
// mNumPoint declared in interface, I've set it to 100
PointMass *pointMassList;
pointMassList = malloc(sizeof(PointMass*) * mNumPointMass);

for (int = 0; i < mNumPointMass; i++)
{
    CGPoint point = ccp(100,100);
    PointMass *p = [[PointMass alloc] initWithPosition: &point];
    pointMassList[i] = p;
} 
```

但我得到一个错误

```
Expected method to write array element not found on object of type 'PointMass *' 
```

如果我想将指向它的指针存储在 C 数组中，是否需要告诉编译器更多关于我的 PointMass 对象的信息？

我基本上是想在 iPhone 上玩一些粒子数学，而不需要不断地从 NSArray 中解包点，如果不清楚我想在这里实现什么。

如果我以一种倒退的方式处理这个问题，我很想得到纠正——我已经有一段时间没有写 vanilla C 了，而且我有点生疏了！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-27T19:28:09.403

> 自从我写香草 C 以来已经有一段时间了

您仍然应该能够区分指向指针`T`和指向指针的指针`T`（`T`在`PointMass`这种情况下）。你想存储一个数组`PointMass *`，而**不是**一个数组`PointMass`（无论如何你都做不到）。所以将声明更改`pointMassList`为

```
PointMass **pointMassList; 
```

它会起作用。但是，如果您仍然使用 Objective-C，为什么不简单地将实例存储到`NSArray`?

# google-api - 使用 PHP 的 Google URL Shortening API

> ID：15667668
> 
> 赞同：0
> 
> 时间：2013-03-27T19:24:21.300
> 
> 标签：google-api, google-api-php-client

现在我知道这是 Internet 上的一个常见话题，尤其是 StackOverflow。但是我没有（或尚未看到）的是在会话中维护令牌的直接解决方案。

我正在使用[适用于 PHP 的 Google APIs 客户端库](https://code.google.com/p/google-api-php-client/)。

**我的查询：** 我有一个 index.php，我在其中使用 PHP 客户端库中的 Google_Oauth2Service 获取用户数据（例如姓名）。用户身份验证成功，一切顺利。现在我想使用 URL Shortening 服务，因此我有一个 short.php，我有代码可以尝试获取短 URL。有些如何这不起作用。

**索引.php**

```
//include google api files
require_once 'src/Google_Client.php';
require_once 'src/contrib/Google_Oauth2Service.php';
require_once 'src/contrib/Google_UrlshortenerService.php';

//start session
session_start();
$gClient = new Google_Client();
$gClient->setApplicationName('Test App');
$gClient->setClientId($google_client_id);
$gClient->setClientSecret($google_client_secret);
$gClient->setRedirectUri($google_redirect_url);
$gClient->setDeveloperKey($google_developer_key);

$google_oauthV2 = new Google_Oauth2Service($gClient);
....
.... 
```

在这里，我开始了会话并创建了 Google_Client 的对象。我已经声明了客户 ID、机密和所有其他详细信息。

然后我在成功的身份验证中获取访问令牌并将其存储在 Session 变量中，以便当我尝试从 short.php 获取短 url（使用 jQuery ajax）时，我可以使用现有的令牌。

```
$_SESSION['token'] = $gClient->getAccessToken();    
.... 
```

现在在**shortcut.php**

```
session_start();
require_once 'src/Google_Client.php';
require_once 'src/contrib/Google_Oauth2Service.php';
require_once 'src/contrib/Google_UrlshortenerService.php';

$gClient = new Google_Client();
$gClient->setApplicationName('Test App');
$gClient->setClientId($google_client_id);
$gClient->setClientSecret($google_client_secret);
$gClient->setRedirectUri($google_redirect_url);
$gClient->setDeveloperKey($google_developer_key);

....
if (isset($_SESSION['token']) && $_SESSION['token']) {

    // Set the access token from the session
    $gClient->setAccessToken($_SESSION['token']);   
    $url_service = new Google_UrlshortenerService($gClient);

    // Check if a URL has been passed
    if (isset($_GET['url'])) {  
            $url = new Google_Url();
        $url->longUrl = $_GET['url'];

        $shortURL = $url_service->url->insert($url);    
            .... 
```

这是代码中断的确切行，`$shortURL = $url_service->url->insert($url);`我使用 Session 变量成功获取令牌并创建了成功的 URL 服务对象。但就在我调用 insert 方法时，它就失败了。

从**apache 错误日志**：

```
husain@innovate:~/myprojects/web$ tail -1 /var/log/apache2/error.log | sed -e 's/\\n/\n/g'
[Thu Mar 28 00:42:35 2013] [error] [client 127.0.0.1] PHP Fatal error:  Uncaught exception 'Google_ServiceException' with message 'Error calling POST https://www.googleapis.com/urlshortener/v1/url?key=AIzaSyCxfXP-xS-QYJw-7mM4SNG3EW9ryj_Oiv4: (401) Invalid Credentials' in /home/husain/myprojects/web/apps/src/io/Google_REST.php:66
Stack trace:
#0 /home/husain/myprojects/web/apps/src/io/Google_REST.php(36): Google_REST::decodeHttpResponse(Object(Google_HttpRequest))
#1 /home/husain/myprojects/web/apps/src/service/Google_ServiceResource.php(177): Google_REST::execute(Object(Google_HttpRequest))
#2 /home/husain/myprojects/web/apps/src/contrib/Google_UrlshortenerService.php(38): Google_ServiceResource->__call('insert', Array)
#3 /home/husain/myprojects/web/apps/shorten.php(44): Google_UrlServiceResource->insert(Object(Google_Url))
#4 {main}
  thrown in /home/husain/myprojects/web/apps/src/io/Google_REST.php on line 66 
```

当我将 Google_Client 变量转储到 index.php 和 short.php 文件时，这就是我得到的。

**索引.php**

```
Google_Client Object
    (
    [scopes:protected] => Array

        (
        )

    [useObjects:protected] => 
    [services:protected] => Array
        (
            [oauth2] => Array
                (
                    [scope] => Array
                        (
                            [0] => https://www.googleapis.com/auth/userinfo.profile
                            [1] => https://www.googleapis.com/auth/userinfo.email
                        )

                )

        )

    [authenticated:Google_Client:private] => 
) 
```

**缩短.php**

```
object(Google_Client)#1 (4) {
  ["scopes":protected]=>
  array(0) {
  }
  ["useObjects":protected]=>
  bool(false)
  ["services":protected]=>
  array(1) {
    ["urlshortener"]=>
    array(1) {
      ["scope"]=>
      string(44) "https://www.googleapis.com/auth/urlshortener"
    }
  }
  ["authenticated":"Google_Client":private]=>
  bool(false)
} 
```

两者都不一样，所以我假设这里有什么不对劲的地方。请帮助或指导。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T19:25:45.190

身份验证时您没有请求 UrlShortener 范围，这就是它失败的原因。要添加范围，您可以在 index.php 中进行身份验证之前创建一个 UrlshortenerService，并传递相同的客户端实例，如下所示：

```
//start session
session_start();
$gClient = new Google_Client();
$gClient->setApplicationName('Test App');
$gClient->setClientId($google_client_id);
$gClient->setClientSecret($google_client_secret);
$gClient->setRedirectUri($google_redirect_url);
$gClient->setDeveloperKey($google_developer_key);

$google_oauthV2 = new Google_Oauth2Service($gClient);
$url_service = new Google_UrlshortenerService($gClient); 
```

或者，您可以使用[setScopes](https://code.google.com/p/google-api-php-client/source/browse/trunk/src/Google_Client.php#349)覆盖自动生成的范围

# haskell - 在 Haskell 中检索平衡二叉树的元素

> ID：15667669
> 
> 赞同：0
> 
> 时间：2013-03-27T19:24:28.457
> 
> 标签：haskell, tree, indexing

假设我有以下形式的自定义树数据类型：

```
data BalTree a = Leaf | Node Integer (BalTree a) a (BalTree a) deriving (Eq, Show, Read) 
```

并创建一个大小为 10 的新树，我会得到这个：

```
Node 10 (Node 5 (Node 2 (Node 1 Leaf 'Z' Leaf) 'Z' Leaf)
                 'Z'
                (Node 2 (Node 1 Leaf 'Z' Leaf) 'Z' Leaf))
'Z'
        (Node 4 (Node 2 (Node 1 Leaf 'Z' Leaf) 'Z' Leaf)
                 'Z'
                 (Node 1 Leaf 'Z' Leaf)) 
```

给定索引时，如何按顺序横向检索元素？

我的尝试：

```
ind Leaf pos            = Nothing
ind tree@(Node n lt x rt) pos
    | pos < 0           = Nothing
    | pos > treeSize-1  = Nothing
    | pos < hTreeSize   = ind lt pos
    | pos == hTreeSize  = Just x
    | pos > hTreeSize   = ind rt (pos - hTreeSize)
    where treeSize = size tree
          hTreeSize = treeSize `div` 2 
```

我不确定这是否是按顺序横向的并且它不会返回正确的结果。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T19:39:23.303

我们希望在有序遍历中获得存储在二叉树中的第 n 个值。我们知道以每个节点为根的每棵树中存储的值的数量（的`Integer`参数`Node`）。

```
data BalTree a = Leaf
               | Node Integer (BalTree a) a (BalTree a)

size :: BalTree a -> Integer
size Leaf              = 0
size (Node size _ _ _) = size

nthInOrder :: BalTree a -> Integer -> Maybe a
nthInOrder Leaf _ =
    Nothing
nthInOrder (Node _ left x right) n
    | leftSize == n - 1 = Just x
    | n <= leftSize     = nthInOrder left n
    | otherwise         = nthInOrder right (n - leftSize - 1)
  where
    leftSize  = size left 
```

这个想法是这样的：假设我们在 node`A`并且想要`n`th 值：

```
 A
 / \
B   C 
```

如果`B`持有`n-1`值，则第`n`th 值是 的值`A`。如果`B`持有大于或等于`n`值，那么我们可以忽略树的其余部分并仅搜索`B`；所以我们只是递归到它。否则，我们应该寻找 中的值`C`，所以我们递归到它；在这种情况下，我们还需要更新`n`以反映 中存在一些值`B`，而 中存在 1 个值`A`。

在最坏的情况下，这个算法会下降到`Leaf`，因此，复杂度是`O(depth of tree)`。如果树是平衡的，则复杂度为`O(log2(size of tree))`。

# android - 动态生成 TableRow 时如何拉伸和收缩列？

> ID：15667671
> 
> 赞同：2
> 
> 时间：2013-03-27T19:24:39.117
> 
> 标签：android

我正在使用 TableLayout 并用自定义行动态填充它，但现在如果我使用 android:stretchColumns android:shrinkColumns 它不起作用。

我的活动布局：

```
<LinearLayout 
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:orientation="vertical" >

    <TextView 
        android:text="@string/offline"
        android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_marginLeft="20dp"
    android:layout_marginRight="20dp"
    android:layout_marginTop="20dp"
    android:textStyle="bold"
    android:textSize="20sp"
    android:textColor="@color/dimGray"
    />

    <TableLayout
    android:id="@+id/download_full_table"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:layout_marginLeft="20dp"
    android:layout_marginRight="20dp"
    android:layout_marginTop="20dp"
    android:stretchColumns="2"
    android:shrinkColumns="1"
    >
</LinearLayout> 
```

我的行布局：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:background="@color/white"
    android:orientation="vertical">

    <TableRow 
        android:background="@color/white"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:stretchColumns="*">

        <TextView

            android:id="@+id/row_name"
            android:text="@string/empty" 
            android:layout_width="wrap_content" 
            android:layout_height="wrap_content"
            android:textSize="12sp"
            android:layout_marginLeft="15dp"
            android:layout_marginTop="7dp"
            android:layout_marginRight="10dp"
             />

        <TextView
            android:id="@+id/row_size"
            android:text="@string/empty" 
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:textColor="@color/lightGray"
            android:layout_marginTop="7dp"
             />

        <Button 
            android:id="@+id/row_btnDownload"
            android:text="@string/baixar"
            android:layout_width="wrap_content" 
            android:layout_height="35dp"
            android:background="@drawable/btn_baixar_verde"
            android:textColor="@color/white"
            android:textSize="13sp"
            android:layout_marginTop="7dp"
            android:layout_marginBottom="7dp"
            android:layout_marginLeft="7dp"
            android:layout_marginRight="15dp"
            android:textStyle="bold"

            />

    </TableRow>

</LinearLayout> 
```

我的代码：

```
TableLayout tableFullDownload = (TableLayout) findViewById(R.id.download_full_table);

LayoutInflater inflater = getLayoutInflater();

ArrayList<MetaDados> fullList = getIntent().getParcelableArrayListExtra("metaDadosFull");

for (MetaDados metaDados : fullList) {
    LinearLayout row = (LinearLayout) inflater.inflate(R.layout.download_table_row, tableFullDownload, false);
    TextView name = (TextView) row.findViewById(R.id.row_name);
    TextView size = (TextView) row.findViewById(R.id.row_size);

    name.setText(metaDados.getName());

    long fileSize = metaDados.getSize();
    fileSize = (fileSize / 1024) / 1024;
    String sizeToShow = (fileSize + " MB");

    size.setText(sizeToShow);

    tableFullDownload.addView(row);
} 
```

我得到了什么：

![在此处输入图像描述](../Images/8f433a25dff0ecf705503b1acf8bd334.png)

我想要的是：

![在此处输入图像描述](../Images/a08918778ea0362ff92caaed4d0d4459.png)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-01T13:11:03.253

问题是我试图拉伸和缩小我的列，但是我在行中拥有的是一个独特的视图，在这个视图中我正在创建我的列，那么解决这个问题的唯一方法是使用里面的 weight 属性我的观点

```
 <TextView
            android:id="@+id/row_name"
            android:layout_width="0dp"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:maxLines="2" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-12-04T10:59:54.060

其他选项是，您可以在 res/drawable 下创建一个可绘制资源。可以是这样的......

```
<?xml version="1.0" encoding="utf-8"?>

<shape xmlns:android="http://schemas.android.com/apk/res/android"
    android:shape="rectangle">
    <solid android:color="@android:color/white"/>
    <stroke android:color="@android:color/black"
        android:width="1dp" />
</shape> 
```

保存它，然后将其设置为布局中 TextView 的背景：

```
android:background="@drawable/bckgrd_border_textbox" 
```

# .net - 创建对象的新实例后保留以前的数据

> ID：15667680
> 
> 赞同：0
> 
> 时间：2013-03-27T19:25:05.470
> 
> 标签：.net, vb.net, variable-declaration, objectinstantiation

说我有这个：

```
Dim Editor As frmEditor
Editor.Text = "New Form"
Editor.Controls.Add(richTextBox) 
```

然后稍后在子例程中，我这样做：

```
Editor = New frmEditor 
```

是否可以保存先前声明的控件/数据以`Editor`供将来使用？声明的不是使用`New`关键字实例化的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T22:08:08.570

[nkvu - 从评论转移到回答，以防有人有类似的查询......]

你能做类似的事情：

```
Dim oldEditor as frmEditor 
```

然后在你做之前：

```
Editor = New frmEditor 
```

做这个：

```
oldEditor = Editor 
```

`oldEditor`然后应该有对前一个对象的引用

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-27T22:22:49.807

```
Dim Editor As frmEditor 
```

... 不创建编辑器，它只声明一个空变量，因此 ...

```
Dim Editor As frmEditor
Editor.Text = "New Form" 
```

... 将失败！

您**必须**创建一个表单`New`：

```
Dim Editor As frmEditor
Editor = New frmEditor()
Editor.Text = "New Form" 
```

或者

```
Dim Editor As frmEditor = New frmEditor()
Editor.Text = "New Form" 
```

* * *

要回答您的问题：

将“旧”编辑器分配给另一个变量

```
Dim oldEditor As Editor = frmEditor
frmEditor = New frmEditor()
frmEditor.RtfText = oldEditor.RtfText 
```

还创建一个公共属性，允许您从表单外部访问您需要访问的内容

```
Public Property RtfText() As String
    Get
        Return richTextBox.Rtf
    End Get
    Set(ByVal value As String)
        richTextBox.Rtf = value
    End Set
End Property 
```

# python - App Engine cron 作业可以使用 https (SSL) 吗？

> ID：15667681
> 
> 赞同：4
> 
> 时间：2013-03-27T19:25:08.197
> 
> 标签：python, google-app-engine, cron

我有一个需要 SSL 才能访问任何 URL 的 App Engine 应用。

任务执行没有任何问题并且需要 https (SSL)。

我尝试运行的 cron 作业也需要 SSL（在 Base Handler 级别进行了检查），但它无法运行。我相当肯定这是问题所在，因为 URL 在使用 GET 的浏览器中运行良好，但它确实需要 https。我真的不想更改 Base Handler（在 python 中）以允许某些请求在没有 SSL 的情况下通过。

作业运行时（按计划运行），App Engine 日志中没有日志条目。

作业的状态为“失败”。

App Engine cron 作业是否有使用 SSL 的配置参数，或者这是 App Engine 团队的功能请求？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T01:52:43.193

您可以先阅读[Securing URLs for Cron](https://developers.google.com/appengine/docs/python/config/cron#Securing_URLs_for_Cron)，然后实施部分（或全部）建议的方法，我认为通过要求 Cron 任务的“管理员”权限并检查`X-Appengine-Cron: true`即使不使用 SSL，您也会变得相当安全。

您不必更改基本处理程序，只需为 Cron 作业创建另一个处理程序。

# c++ - 清除向量空间

> ID：15667682
> 
> 赞同：0
> 
> 时间：2013-03-27T19:25:09.240
> 
> 标签：c++

嗨人们一个快速的问题：

我已将向量设置为特定大小，我想要做的是在该向量达到最大空间后清空该向量。

我有这个代码：

```
vector<Point> Rightarm(20); 
    vector<Point> Leftarm(20);

    vector<Point>::const_iterator RightIter;
    vector<Point>::const_iterator LeftIter;

Rightarm.push_back(center);
    Leftarm.push_back(center1); 

    for(RightIter = Rightarm.begin(); RightIter != Rightarm.end(); ++RightIter)
    {
        circle(drawing, *RightIter, 3, Scalar(0,255,0), CV_FILLED); 
    }

    if(RightIter == Rightarm.end())
        {
            Rightarm.clear();
        }

    for(LeftIter = Leftarm.begin(); LeftIter != Leftarm.end(); ++LeftIter)
    {
        circle(drawing, *LeftIter, 3, Scalar(0,255,0), CV_FILLED);

    }

        if(LeftIter == Leftarm.end())
        {
            Leftarm.clear();
        } 
```

我对这段代码的问题是每次都清除向量......我希望它只有在达到 20 的大小限制后才被清空......

谁能发现这哪里出了问题......？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T19:32:23.403

Vector 总是被清除，因为 Leftarm.end() 总是指向 Leftarm 的末尾。如果 Leftarm 有 6 个元素，则 LeftIter 指向第 6 个元素的末尾。因此，在您的代码中，左臂向量将始终被清除。更改您的代码，包括该部分：

```
if(Leftarm.size()==20) //or >=20
{
    Leftarm.clear();
} 
```

# c# - 带有声明变量的简单 C# 方向

> ID：15667683
> 
> 赞同：1
> 
> 时间：2013-03-27T19:25:09.970
> 
> 标签：c#

我刚开始尝试学习 C#。到目前为止，我已经阅读了大约 50 篇教程，并认为我已经很好地理解了。显然我错了。我一直在阅读 msdn.microsoft.com 的 C# Programmer's Reference，但它似乎不是教程的最佳来源。

我实际上是在尝试完成最简单的任务。试图理解变量、操作和输入。我来自网络编程，想将 PHP 脚本变成桌面应用程序，所以我正在尝试学习 C# 的基础知识，我想我可能需要学习另一种语言。

基本上，我有一个文本框和一个按钮。单击按钮时，我想检查文本框中的文本，看看它是否与某个字符串匹配。然后显示一个带有消息的消息框。

```
private void btnClick_Click(object sender, EventArgs e) {
    if(txtCL.Text == "one") {
        bool myTest = true;
    } else {
        bool myTest = false;
    }
    if(myTest == true) {
        MessageBox.Show("You entered the correct password.", "Important Message");
    } else {
        MessageBox.Show("The password you entered is not correct.", "Incorrect Input");
    }
} 
```

如果有人能给我指点更好的教程，让我学得更快，我将不胜感激。微软的文档真的没有教给我任何东西。

我为这个愚蠢的问题道歉，请随时称我为白痴。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-27T19:31:30.897

这是一个范围界定问题，`myTest`不存在，至少不*存在*- 您每次都在每个初始条件的范围内创建它。如果你这样做：

```
bool myTest = false;
if(txtCL.Text == "one") {
   myTest = true;
}
if(myTest == true) {
    MessageBox.Show("You entered the correct password.", "Important Message");
} else {
    MessageBox.Show("The password you entered is not correct.", "Incorrect Input");
} 
```

然后，您指定布尔值，并将其设置为 false（实际上这是 a 的默认值`bool`），然后检查您的条件是否满足并相应地重新分配它；然后可以对其进行评估以显示您的消息框。

您可以进一步缩短此代码，作为读者的练习。（：

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-27T19:31:16.883

你真的不需要一个 bool 变量，你可以让它更简单：

```
private void btnClick_Click(object sender, EventArgs e)
{
    if(txtCL.Text == "one")
    {
        MessageBox.Show("You entered the correct password.", "Important Message");
    }
    else
    {
        MessageBox.Show("The password you entered is not correct.", "Incorrect Input");
    }
} 
```

如果你需要一些教程，只需谷歌“C#初学者教程”，或者如果你喜欢视频教程，你可以看看[这里](http://www.youtube.com/playlist?list=PLAC325451207E3105)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-27T19:37:39.110

```
 if(...) {
        bool myTest = true;
    } else {
        bool myTest = false;
    }

    // At this point in time 'myTest' is not a known variable. 
    // It's out of scope already s your next line will cause a compile error.
    if(myTest == true) { 
        ...
    } 
```

所以你需要在范围内声明变量

```
 bool myTest = false;

    if(...) {
        myTest = true;
    } 

    // Now you can use the myTest variable
    if(myTest) { 
        ...
    } 
```

正如您已经指出的那样，您根本不需要该变量，因为这将完全一样

```
private void btnClick_Click(object sender, EventArgs e) {
    if(txtCL.Text == "one") {
        MessageBox.Show("You entered the correct password.", "Important Message");
    } else {
        MessageBox.Show("The password you entered is not correct.", "Incorrect Input");
    }
} 
```

您可以阅读任意数量的书籍，但由于您已经有 PHP 编程经验，我建议您多实践 C# 方面的经验。同时，一本书当然不会受到伤害。但我认为你所遵循的方法（在线阅读、编码）最终会得到回报。给它一些时间。实践。很多。

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2013-03-27T19:30:28.327

我假设当您单击按钮时什么都没有发生。这是真的？如果是，请在该行设置一个断点： if(txtCL.Text == "one") ，运行应用程序并单击它。如果您没有达到断点，则“点击”事件和您的代码之间没有联系。探索按钮属性，您将看到一种建立链接的方法。

坚持下去，我以前是 PHP 人，现在是 C# 人。可以办到。

# c# - 在字典 C# 中排序

> ID：15667684
> 
> 赞同：3
> 
> 时间：2013-03-27T19:25:10.627
> 
> 标签：c#, asp.net, .net, vb.net

我有一本字典

```
Dictionary<string, string> rList = new Dictionary<string, string>();
rList .Add("/a/b/c", "35");
rList .Add("/a/c/f/v", "25");
rList .Add("/a/r/d/c/r/v", "29");
rList .Add("/a", "21");
rList .Add("/a/f, "84"); 
```

我只想根据键中存在的“/”的数量对这个字典进行排序。我的预期输出是，

```
("/a/r/d/c/r/v", "29")
("/a/c/f/v", "25")
("/a/b/c", "35")
("/a/f, "84")
("/a", "21") 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-27T19:26:48.607

该`Dictionary<TKey, TValue>`类型是 .Net 中的无序集合。如果您想要订购，那么您需要使用`SortedDictionary<TKey, TValue>`并提供一个自定义`IComparer<string>`来计算`/`字符串中的值。

```
sealed class SlashComparer : IComparer<string> { 
  static int CountSlashes(string str) { 
    if (String.IsNullOrEmpty(str)) { 
      return 0;
    }

    int count = 0;
    for (int i = 0; i < str.Length; i++) {
      if (str[i] == '/') {
         count++;
      }
    }
    return count;
  }

  public int Compare(string left, string right) { 
    int leftCount = CountSlashes(left);
    int rightCount = CountSlashes(right);
    return rightCount - leftCount;
  }
} 
```

要与 a 一起使用，`SortedDictionary`您唯一需要更改的是声明

```
var comparer = new SlashComparer();
var rList = new SortedDictionary<string, string>(comparer); 
```

其余代码可以保持不变

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-27T19:29:45.203

正如[JaredPar](https://stackoverflow.com/users/23283/jaredpar)已经回答的那样`Dictionary<TKey, TValue>`，内容没有指定顺序。但是，您可以获得`List<KeyValuePair<TKey, TValue>>`所需的顺序：

```
List<KeyValuePair<string, string>> results = rList.OrderByDescending(x => x.Key.Count(c => c == '/')).ToList(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-27T19:29:55.067

试试这个：

```
 var result = rList.OrderBy(input => input.Key.Select(c => c == '/').Count()).Reverse().ToList(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-27T19:31:13.133

来自 linqpad：

```
void Main()
{
    Dictionary<string, string> rList = new Dictionary<string, string>();
    rList .Add("/a/b/c", "35");
    rList .Add("/a/c/f/v", "25");
    rList .Add("/a/r/d/c/r/v", "29");
    rList .Add("/a", "21");
    rList .Add("/a/f", "84");

    var x = from a in rList
        let i = a.Key.ToCharArray().Count (k => k.Equals('/') )
        orderby i descending
        select a;

    x.Dump();
} 
```

# google-visualization - 为什么谷歌图表中较长的 vAxis 标签在末尾附加 3 个点（ . ）

> ID：15667685
> 
> 赞同：2
> 
> 时间：2013-03-27T19:25:11.843
> 
> 标签：google-visualization

我有一个谷歌图表，其 vAxis 设置如下..

```
vAxis: {
            textStyle: { color: 'white' },
            baselineColor: '#666666',
            format: '######.#'
        }, 
```

但在 vAxis 标签中超过 1000 个整数附加 3 个点（ . ）并且不显示整个标签，所以如果实际标签是 2000 那么它只显示 2... 谁能告诉我如何显示整个标签 2000 2...

提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-27T20:36:02.653

谷歌计算标签的宽度，并在标签的末尾添加点进行调整。所以解决方法是增加图表宽度或减小标签字体大小。我减小了字体大小，这起到了作用:)

# javascript - 页面加载后 1 分钟加载 div

> ID：15667686
> 
> 赞同：4
> 
> 时间：2013-03-27T19:25:18.077
> 
> 标签：javascript, jquery, xhtml

我在主页上有一个带有 id 通知的 div。我不希望在页面第一次加载时加载 div，我希望它在 1 分钟后加载。javascript或jquery有什么方法可以做我想做的事吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-27T19:28:04.570

我不确定您希望如何将 div 实际添加到 DOM 中，但您可以使用 setTimeout 延迟一分钟。从[文档](https://developer.mozilla.org/en-US/docs/DOM/window.setTimeout)：

```
Calls a function or executes a code snippet after specified delay. 
```

所以是这样的：

```
function appendDiv() {
  ... append code here...
}

timeoutID = window.setTimeout(appendDiv, 60000); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-27T19:28:44.057

当然 :) 在我的示例中，我使用 jQuery：

```
<div style="display:none" id="notifications"></div>

<script type="text/javascript">
$(document).ready(function() { 
    setTimeout(function() { 
        $.get('/notifications.php', function(result) {
            // build your notifications here
            // ...
            $('#notifications').show(); 
        }, 'json');
    }, 60000);
});
</script> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-27T19:36:07.643

如果通知在第一分钟根本不应该在 DOM 中，请使用以下代码：

```
$(document).ready(function(){
  setTimeout( function(){
    $("<div>")
      .html( "your notification message/markup" )
      .attr({ id : 'notification', ... })
      .appendTo( "body" /* or any other DOM element */ );
  }, 60*1000);
}) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-27T19:40:30.370

使用 jQuery 的`load`功能：

```
setTimeout(function() {
    $('#myDiv').load('divcontents.html');
}, 60 * 1000); 
```

`divcontents.html`可以在服务器上动态生成。

# arduino - 从处理中的字符串中提取一个字母

> ID：15667692
> 
> 赞同：1
> 
> 时间：2013-03-27T19:25:39.957
> 
> 标签：arduino, processing

我试图从处理中的字符串中获取一个字母，所以假设草图接收到字符串“x193”，它需要能够隔离 x 和 193 并将它们放在不同的变量中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T21:48:10.277

您实际上并不需要获取并放置“x”，因为它总是相同的，所以只需获取它后面的内容，直到字符串的末尾。就像是：

```
字符串[] a = {"x1", "x12", "x123"};

String[] onlyNumbers = new String[3];

无效设置（）{
  for (int i = 0; i 长度; i++){
    String Stirp = a[i].substring(a[i].indexOf('x')+1, a[i].length());
    onlyNumbers[i] = Stirp;
  }
  println(onlyNumbers);
}

```

如果您需要性能，您也可以使用[StringBuilder](http://docs.oracle.com/javase/6/docs/api/index.html?java/lang/String.html)，这要快得多。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T20:14:29.440

你需要这样的东西：

字符串 inQuestion = "x193";

String myCharacter = inQuestion.substring(0, 1);

见[http://www.processing.org/reference/String_substring_.html](http://www.processing.org/reference/String_substring_.html)

# c++ - 没有得到预期的输出

> ID：15667695
> 
> 赞同：0
> 
> 时间：2013-03-27T19:25:47.570
> 
> 标签：c++

我正在写一个家庭作业，要求用户阅读一个包含未知数量的 SSN 和成绩的文本文件。然后程序需要计算最高、最低和平均分数，然后输出带有相关 SSN 的最高成绩以及最低和平均成绩。

它似乎运行正常，但输出全为“0”。

非常感谢任何解决此问题的帮助。

代码：

```
#include <iostream>
#include <fstream>
#include <string>
#include <iomanip>

using namespace std;

int main()
{
    string ssn, maxSSN;
    int grade = 0, totalGrades = 0, count = 0, maxScore = 0, minScore = 0;
    double avgScore = 0;

    ifstream inFile;
    inFile.open("C:\\lab5a.txt");

    if(!inFile)
    {
        cout << "Error opening the requested file\n\n";
        system("pause");
        return 101;
    }

    while (!inFile.eof())
    {
        if (count == 0)
        {
            maxScore = grade;
            minScore = grade;
        }
        else
        {
            if (grade > maxScore)
                maxScore = grade;
            if (grade < minScore)
                minScore = grade;
        }
            grade += totalGrades;
            count++;

    }

    if (count)
        avgScore = totalGrades / count;

    cout << "Maximum Score: " << maxScore << "      Student SSN:" << maxSSN << "\n";
    cout << "Minimum Score: " << minScore << "\n";
    cout << "Average Score: " << avgScore << "\n";
    // studentFile >> ssn >> grade;

    inFile.close();

    cout << "\n\n";
    system("pause");
    return 0;

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-27T19:27:07.437

**1.你没有读到任何东西`inFile`。最有可能的是，您想读取等级值：**

```
 while (!inFile.eof())
 {
     inFile >> grade;
     ... 
```

根据@Blastfurnace 的反馈，使用`inFile.eof()`也是错误的。考虑以下输入文件：

```
3
5
9
17 
```

每行以 . 结尾`lf`。然后，循环将读取**5 行**，因为在读取值**后**它没有检测到文件的结尾`17`，但会尝试从文件中读取另一个值。`count`然后将`5`是循环终止时，这是错误的。

请改用以下条件：

```
 while (inFile >> grade)
 {
   ... 
```

要阅读 ssn，请使用以下命令：

```
while (inFile >> ssn >> grade)
{
   ... 
```

这确保了在执行循环体时两者`ssn`都已`grade`从文件中读取。

**2.计算的`totalGrades`操作数顺序错误：**

```
 grade += totalGrades; 
```

需要是

```
 totalGrades += grade; 
```

**3.你已经声明`avgScore`为double，但是**

```
 avgScore = totalGrades / count; 
```

进行整数运算，因此您永远不会得到浮点结果。您需要将至少一个操作数转换为加倍：

```
 avgScore = totalGrades / (double) count; 
```

**4.仍然缺少的是SSN的处理**

您需要将其与文件中的成绩一起读取，然后将其分配到您分配值`maxSSN`的同一位置。`maxScore`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T19:29:12.593

您**没有读取**文件，因此没有将`grade`其作为**输入**。

# c# - 如何让用户在 C# EF4.1 Code First 中动态指定数据库提供程序和连接详细信息？

> ID：15667702
> 
> 赞同：3
> 
> 时间：2013-03-27T19:26:05.020
> 
> 标签：c#, database, ef-code-first, connection-string

我正在创建一个 C# 应用程序来替换使用 MySQL 数据库的 VB6 应用程序，其中应用程序的多个副本使用相同的数据库。新应用程序必须能够使用当前的 MySQL 数据库，但我也希望它与数据库无关，以便应用程序的未来实例可以使用用户想要的任何服务器。在一个完美的世界中，我希望应用程序在首次运行时向用户显示一个对话框，让他们选择数据库类型（MySQL、SQL Server 等）并指定服务器 ip、用户、密码和数据库姓名。然后，该应用程序将连接到该服务器，如果数据库已经存在，则使用该数据库，如果不存在，则创建一个新数据库。

使用 Code First 我已经了解如何使用现有数据库或创建新数据库，但只能通过在 App.config 文件中对连接字符串进行硬编码。

```
 <add name="GumpIndexDatabase"
     connectionString="server=localhost;userid=123;password=123;port=3306;database=gump_new_data;pooling=false;"
     providerName="MySql.Data.MySqlClient"
     /> 
```

我可以在启动应用程序之前更改连接字符串和提供程序，并且一切都按预期工作。我也可以在启动后更改连接字符串，但不能更改提供程序，并且我必须知道提供程序是 MySQL 还是 MSSQL 才能正确获取连接字符串详细信息（例如：用户或用户 ID）

```
class GumpIndexDatabase: DbContext
{
    public GumpIndexDatabase(string connectionName)
        : base(MakeConnectionString(connectionName))
    {
    }
    private static string MakeConnectionString(string connectionName)
    {
         if (connectionName=MySQL) {
             //return MySQL string
         } else {
             //return SQL Server string
         }
    } 
```

几个小时的搜索还没有找到如何做这样的事情的例子，所以我怀疑它是不允许或推荐的，即使它看起来很简单。我看过一些关于连接字符串构建器的文章，但不明白如何从通用对象中获取数据库特定的字符串。

所以一个简单的问题：如何在运行时指定数据库连接细节？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T22:19:10.390

我不建议强制执行此功能，除非您 100% 肯定没有它就无法生存。它增加了很多维护任务，现在可能并不明显（例如更新到新版本、修复错误、花费大量时间找出通用接口、维护这些接口、大量测试等等）。因此，除非它是一个请求的业务功能 - 忘记它。

但是，如果您知道自己在做什么，则此问题通常通过接口解决。可能有这些通用接口（弄清楚它们是一项任务）：

*   `IConnection`
*   `IDataProvider`
*   `IRepository<T>`

目前，您将使用 MySql 数据库实现接口，例如`class MySqlConnection : IConnection`. 如果您需要 MS SQL `class MsSqlConnection : IConnection`，.

实际上，您必须将所有功能抽象为通用接口。您必须为要支持的每个数据库/存储引擎提供实现。在运行时，您将使用 IoC 容器和 DI 原理来设置当前实现。所有子依赖项将使用作为参数传递给构造函数（或属性或方法）的接口

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T19:44:55.423

你试过`Database`房产吗？

```
GumpIndexDatabase.Database.Connection.ConnectionString = "your conn string"; 
```

我只是对它进行了**很短**的测试，因此不能保证它可以正常工作。但是我在我的一个服务层类的构造函数中成功地使用了它：

```
public class MyService
{
    protected DataContext DataContext { get; set; }

    public MyService(DataContext dataContext)
    {
        DataContext = dataContext;
        DataContext.Database.Connection.ConnectionString = "conn string";
    }
} 
```

刚刚看到`DbContext`有过载`DbContext(string nameOrConnectionString)`。你应该也可以使用它。

## 使用现有连接

或者您使用现有的连接。你`DbContext`应该有这样的东西：

```
public class DataContext : DbContext
{
    public DataContext(DbConnection existingConnection)
        : base(existingConnection, true) { }
} 
```

然后在需要的任何地方初始化它：

```
public void SomeMethod()
{
    var connString = "whatever"; // could also be something like Textbox1.Text
    using (var connection = new SqlConnection(connString))
    {
        var context = new DataContext(connection);
    }
} 
```

当然`SqlConnection`可以是任何继承自`DbConnection`. 请参阅[DbConnection 类](http://msdn.microsoft.com/de-AT/library/system.data.common.dbconnection.aspx)。

# wcf - 如何实现 WSS：WCF Web 服务（服务器端）上的 X509 令牌配置文件 1.0

> ID：15667703
> 
> 赞同：2
> 
> 时间：2013-03-27T19:26:11.373
> 
> 标签：wcf, ws-security, x509

我是创建 WCF Web 服务的新手，我正在尝试弄清楚如何创建符合 WSS:X509 Token Profile 1.0 的 WCF 服务。有很多关于如何进行客户端配置的帖子，但是关于服务器配置的帖子不多。

该项目最初是作为 WSDL 优先生成的服务，因此我无法更改客户端如何向我发送数据的任何内容，并且我需要使服务符合他们发送的数据。

我已经为这个服务创建了一个自定义端点，但是这就是我卡住的地方。我确定我缺少一些小细节以使其符合以下 pdf：

[http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-x509-token-profile-1.0.pdf](http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-x509-token-profile-1.0.pdf)

```
 <behavior name="Something.ServiceBehavior">
      <serviceMetadata httpGetEnabled="true" />
      <serviceDebug includeExceptionDetailInFaults="true" />
      <serviceCredentials>
        <clientCertificate>
          <authentication certificateValidationMode="None" />
          <certificate findValue="ClientCertificate" 
                       storeLocation="LocalMachine" 
                       storeName="My" 
                       x509FindType="FindBySubjectName" />
        </clientCertificate>
        <serviceCertificate findValue="OurCertificate" 
                            storeLocation="LocalMachine" 
                            storeName="My" 
                            x509FindType="FindBySubjectName"/>
      </serviceCredentials>
      <serviceSecurityAudit auditLogLocation="Application"
                            serviceAuthorizationAuditLevel="Failure"
                            messageAuthenticationAuditLevel="Failure"
                            suppressAuditFailure="true" />
    </behavior>
  </serviceBehaviors>

  <service behaviorConfiguration="Something.ServiceName"
    name="Something.ServiceName">
    <endpoint address="mex" binding="mexHttpBinding" bindingConfiguration="" name="MetaDataEndPoint" contract="IMetadataExchange" />
    <endpoint address="" binding="customBinding" bindingConfiguration="CustomBinding0" name="customBindingEndPoint" contract="Something.IServiceName" >
    </endpoint>

    <binding name="CustomBinding0">
      <textMessageEncoding messageVersion="Soap12" />
      <security authenticationMode="MutualCertificate" messageSecurityVersion="WSSecurity11WSTrustFebruary2005WSSecureConversationFebruary2005WSSecurityPolicy11" />
      <httpTransport />
    </binding> 
```

非常感谢任何帮助/评论。

# sql-server-2008 - 存储过程中的搜索参数不起作用

> ID：15667706
> 
> 赞同：1
> 
> 时间：2013-03-27T19:26:24.653
> 
> 标签：sql-server-2008, stored-procedures

我正在尝试在 SQL Server 2008 中创建一个存储过程，该过程在（[Chinook](http://chinookdatabase.codeplex.com/)，如果有帮助的话）数据库的 Track 表中搜索与专辑标题（部分）匹配的曲目。例如，当参数为“rock”时，我想查看专辑中在某处具有“rock”标题的所有曲目。

硬编码“rock”按预期工作，但从 Management Studio 以“rock”作为参数运行该过程会返回许多非“rock”结果。

这是我用来修改存储过程的脚本：

```
ALTER PROCEDURE [dbo].[searchTrackAlbumTitle]
    @trackAlbumTitle nvarchar
AS
BEGIN
SET NOCOUNT ON;

    SELECT Track.TrackId
      ,Track.Name AS TrackName
      ,Artist.Name AS ArtistName
      ,Album.Title AS AlbumTitle
      ,Track.Composer
      ,Track.Milliseconds
      ,Track.Bytes
      ,MediaType.Name AS TypeName
      ,Genre.Name AS GenreName
      ,Track.UnitPrice
    FROM Track
        LEFT JOIN Album ON Track.AlbumId = Album.AlbumId
        LEFT JOIN Artist ON Album.ArtistId = Artist.ArtistId
        LEFT JOIN MediaType ON Track.MediaTypeId = MediaType.MediaTypeId
        LEFT JOIN Genre ON Track.GenreId = Genre.GenreId
    WHERE Album.Title LIKE ( '%' + @trackAlbumTitle + '%' ) -- doesn't work
    --WHERE Album.Title LIKE ( '%' + 'rock' + '%' ) -- works

END 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T19:29:32.317

在你的参数上加上一个长度。例如

```
@trackAlbumTitle NVARCHAR(255) 
```

现在它被截断为`NVARCHAR(1)`. [有关更多信息，请参阅此博客文章](https://sqlblog.org/2009/10/09/bad-habits-to-kick-declaring-varchar-without-length)- 它也适用于`NVARCHAR`。

另请注意，如果您`WHERE Album.anything`说`LEFT JOIN`变成`INNER JOIN`. 因此，您应该将其移至`ON`子句或将连接更改为显式`INNER JOIN`. 现在很混乱 - 我不知道你想要哪种行为（而且它们是不同的）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T19:29:35.817

试试这个：

```
 WHERE Album.Title LIKE ( '%' + rtrim(@trackAlbumTitle) + '%' ) 
```

# jquery - 如何以与 $(this) 相同的方式使用 jQuery 选择元素？

> ID：15667710
> 
> 赞同：0
> 
> 时间：2013-03-27T19:26:34.107
> 
> 标签：jquery, this

好的，所以，我有这个（由 Wordpress 驱动的）网站，上面有一些图像。一旦它们溢出内容 div，我想缩放这些图像。为了使它们正确缩放，幸运的是我可以添加一个`.scaled`可以制作 image 的类，这样就可以`width:100%;`解决问题。

我的问题是，当我检测图像是否对于页面来说太大时，我似乎无法选择页面上的特定图像。

HTML：

```
<div class="entry-content">
   <p>
      <img src="http://upload.wikimedia.org/wikipedia/commons/f/fd/Luftballong.jpg" width="1024" height="768" class="alignnone">
   </p>
</div> 
```

重要的 CSS：

```
.scaled {
   width:100%;
 } 
```

现在，对于 jQuery。我目前的设置是这样的：

```
$(window).resize(function() {
    if($('section .entry-content img').width() > $('.entry-content').width()) {
        $(this).addClass('scaled')
    }
}); 
```

我的问题经常出现在`$(this)`. 我猜它不会在这里选择实际的图像，而是选择别的东西，或者没有特别的东西。

所以我的问题是，**用 jQuery 只选择一个图像并对其应用一个类的最佳方法是什么？**我很想看到一些只涉及我将其更改`$(this)`为其他内容的东西。

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T19:34:27.583

```
$(window).on('resize', function() {
    $('section .entry-content img').filter(function() {
        return $(this).width() > $(this).closest('.entry-content').width();
    }).addClass('scaled');
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T19:32:34.213

一种方法是使用如下变量：

```
$(window).resize(function() {
  var $img = $('section .entry-content img')[0];
  if($img.width() > $('.entry-content').width()) {
    $img.addClass('scaled')
  }
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-27T19:32:48.843

尝试将您的 jQuery 方法更改为：

```
$(window).resize(function() {
    $( "section .entry-content img" ).each(function() {
        if($(this).width() > $('.entry-content').width()) {
            $(this).addClass('scaled')
        }
    });
}); 
```

这应该处理每个单独的 img 元素的功能（并且“this”相对于）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-27T19:40:14.850

对于执行您想要的功能的函数，这里已经有很多很好的答案，但我认为值得添加`this`事件回调函数上下文中的关键字是指由 JQuery 传入的 DOM 元素。因此，在您之前的示例中，`$(this)`实际上导致了一个包装`window`元素的 JQuery 对象。

因此，正如您在许多其他示例中所见，解决方案是更改您使用的 JQuery 对象的选择器`this`。

# ssrs-2008 - 可以在ssrs报告中做吗

> ID：15667711
> 
> 赞同：-1
> 
> 时间：2013-03-27T19:26:35.153
> 
> 标签：ssrs-2008, reporting-services

```
Name age sons 

ram   22   5    (i want a drop down menu to enter age and number of sons in ssrs end user need to select)
kri   26   3
Total      8 
```

是否可以在 ssrs 报告中创建

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T22:51:56.307

SSRS 不是为了让用户输入表单，而是为了报告而不是输入。使用 ASP.NET 或类似的东西可能会更好。SSRS 仅用于从数据库报告一个方向，而不是向它报告。它没有设置为数据输入的输入法。事件控件的范围非常有限，即使您可以设法对数据库进行一些更新，它也会非常笨重和麻烦。然而，ASP.NET 和其他技术已经预定义了围绕这个东西构建的表单。不过，它们需要更长的时间来设置。

# algorithm - 文本对齐算法（左右齐平）

> ID：15667712
> 
> 赞同：0
> 
> 时间：2013-03-27T19:26:35.277
> 
> 标签：algorithm, dynamic-programming, greedy, text-justify, string-algorithm

我正在寻找一种方法来执行文本对齐（左右齐平）。每个输出行的最大宽度为 M 个字符。不允许断词。

例如，请参阅此维基百科页面中的“对齐（左右齐平）”：[http://en.wikipedia.org/wiki/Justification_(typesetting)](http://en.wikipedia.org/wiki/Justification_(typesetting))。

我知道有一个动态编程解决方案可以优化左对齐，右对齐，即在行尾均匀分配额外的空间，这样额外空间的成本是最优的（这也被称为“自动换行” '问题或'打印整齐'问题）。但是，对于全文对齐问题，我无法得出动态编程或贪婪方法。

谷歌搜索带我找到基于马尔可夫链编程的文本对齐：[http](http://www.rose-hulman.edu/Users/faculty/young/OldFiles/CS-Classes/csse220/200820/web/Programs/Markov/justification.html) ://www.rose-hulman.edu/Users/faculty/young/OldFiles/CS-Classes/csse220/200820/web/Programs/Markov/justification.html 。但这对我来说似乎很复杂。如果这是对全文证明问题的最佳（也是最简单）的解决方案，那么如果有人能用简单的语言解释同样的问题，那就太好了。

# objective-c - 如何使 Xcode anaylzer 为类方法报告“存储到‘self’中的对象可能泄漏”

> ID：15667714
> 
> 赞同：1
> 
> 时间：2013-03-27T19:26:38.983
> 
> 标签：objective-c, xcode

我几乎可以肯定这段代码没有泄漏，但 Xcode 分析器报告说存在“潜在”泄漏（Xcode 4.6.1）。

```
+ (MySHA1hash *)sha1HashWithHashBytes:(unsigned char *)hash length:(unsigned int)length;
{
   return [[[MySHA1hash alloc] initWithHashBytes:hash length:length] autorelease];
} 
```

![XCode 分析器错误截图](../Images/4270d00344f9381d4467bee7e181476b.png)

如果问题是 Xcode 报告了误报，我想弄清楚如何以一种使警告静音的方式构造代码。

我也有可能以我不理解的方式泄漏，但如果有人能看到我实际上是如何泄漏的，我也会很高兴得到反馈。

这一定和我调用的init函数有关，因为如果我简单地将initWithHashBytes替换为init，那么泄漏就不再报告了。为此，我还包括了 initWithHashBytes 的主体。

```
- (id)initWithHashBytes:(unsigned char *)hash length:(unsigned int)length
{
    if (hash != nil && length <= SHA_DIGEST_LENGTH) {
        NSData *data = [NSData dataWithBytes:hash length:length];
        self = [self initWithHash:data];
    }
    else {
        self = nil;
    }
    return self;
}

- (id)initWithHash:(NSData *)hash
{
    if ([hash length] <= SHA_DIGEST_LENGTH && (self = [super init]) != nil) {
        finished = YES;
        [hash getBytes:sha_Result];
        hashValue = [NSNumber numberWithInt:[hash hash]];
    }
    else {
        self = nil;
    }
    return self;
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-27T19:45:16.137

线

```
self = nil; 
```

在`initWithHashBytes:`（和`initWithHash:`）是问题。您正在分配一个对象，但如果您`nil`从 from返回`initWithHashBytes:`，该对象将被泄漏，因为您将调用`autorelease`而`nil`不是调用您分配的对象。

`self`在你回来之前释放`nil`，一切都应该很好。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-27T20:45:15.427

在这种特殊情况下，显然存在需要修复的错误，但我有时看到需要抑制完全理解为无问题的警告（即报告的泄漏实际上不是泄漏）。

这是我期望在这里需要做的，但事实证明确实存在泄漏。所以我很高兴它得到了修复。我立即发现了另一个问题，这是一个明确无误的“误报”（我知道该错误被报告为“潜在泄漏”，所以实际上它不是误报，但这并不意味着我想看到每次我运行分析器时都在报告中）。

因此，我仍然有如何抑制这些警告的问题。事实证明，您可以轻松地将您希望分析器绕过的代码封装在 ifdef 检查 __clang_analyzer 中。

```
#ifndef __clang_analyzer__
  ... code you want to ignore ...
#endif 
```

[这里](http://xcodebook.com/2011/08/handling-false-positives-with-the-static-analyzer/ "这里")有一篇很好的文章。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-27T19:51:38.607

你缺少一个`[self release]`before `self = nil`。

您从中获取的对象`alloc`的引用计数为 +1，需要通过调用来平衡`release`or `autorelease`。对于从该类方法中返回实际对象的情况，该方法会处理所有事情`sha1HashWithHashBytes:length:`。`autorelease`

对于您返回方法的情况，您`nil`的`init`方法是最后一个引用该分配对象的方法，因此它必须释放它。

# function - 从函数中检索数值结果

> ID：15667717
> 
> 赞同：0
> 
> 时间：2013-03-27T19:26:51.467
> 
> 标签：function, evaluate, maxima

我正在研究最大值的代码，并在其中定义了一个函数。

```
Ucr(y):=offset+c1[21]+2*sum(realpart(c1[m+20])*cos(2*%pi*(m-1)*y/dp) - imagpart(c1[m+20])*sin(2*%pi*(m-1)*y/dp),m,2,nmax+1); 
```

但是，如果我尝试评估诸如 Ucr(1) 之类的东西，我没有得到答案的数字，我会得到一个很长的方程式，其中包含所有变量和数字。我是 maxima 的新手，不知道我怎么能让它煮成一个漂亮的表情。

我将不胜感激任何帮助。

最好的，本

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-01-09T18:14:28.737

尝试环绕`float(trigreduce(rectform( ... )))`你的函数体。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T09:21:41.940

您可以给变量数值

```
kill(nmax, dp, offset, c1);
numerval(nmax, 1);
numerval(dp, 1);
numerval(offset, 1);
/* fill a list with dummy values */
c1: makelist(1/m+m*%i, m, 1, ev(nmax, numer)+22);
Ucr(y):=offset+c1[21]+2*sum(realpart(c1[m+20])*cos(2*%pi*(m-1)*y/dp) - imagpart(c1[m+20])*sin(2*%pi*(m-1)*y/dp),m,2,nmax+1);

ev(Ucr(1), numer); 
```

或者只是在最后结合数值

```
kill(nmax, dp, offset, c1);
Ucr(y):=offset+c1[21]+2*sum(realpart(c1[m+20])*cos(2*%pi*(m-1)*y/dp) - imagpart(c1[m+20])*sin(2*%pi*(m-1)*y/dp),m,2,nmax+1);
env: [dp=1, offset=1, nmax=1, c1=makelist(1/m+m*%i, m, 1, 23)];
ev(Ucr(1), env); 
```

# php - 从 HTML 选择中存储 PHP 变量

> ID：15667722
> 
> 赞同：-1
> 
> 时间：2013-03-27T19:27:04.937
> 
> 标签：php, html, sql

我需要将用户从 HTML 选择下拉菜单中选择的内容放入一个 php 变量中，然后我可以在 sql INSERT 语句中使用该变量。

我怎么能这样做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T19:27:57.247

使用表格。然后，您可以通过`$_POST`超全局访问该变量。

```
<form action="targetpage.php" method="post">
<select name="myselect">
    <option>Option 1</option>
    <option>Option 2</option>
</select>
<input type="submit">
</form> 
```

目标页面.php：

```
<?php
echo $_POST['myselect']; // Will print either "Option 1" or "Option 2"
?> 
```

**编辑**

您可以使用“post”或“get”获取表单数据。get 更改 URL，您希望将其保留为 2000 个字符或更少。Post 将数据与 URL 分开发送。如果您使用 get 您可以通过 检索数据`$_GET`，但对于表单 post 通常是正确的选择。

# java - 你如何将数据从 FragmentA 传递到 hostActivity 然后更新 fragmentB

> ID：15667723
> 
> 赞同：0
> 
> 时间：2013-03-27T19:27:06.030
> 
> 标签：java, android, android-activity, bundle, fragment

我有三个片段，Player1Tun、Player2Turn 和 TicTacToeLayout。Player1Turn 和 Player2Turn 每次玩家移动时都会进行内部切换，并且 TicTacToeLayout 包含每次片段切换时更新的井字表。我要做的是将数据从任一播放器片段发送到主机活动（当程序仍在运行时），然后从那里更新 TicTacToeLayout 中的表。有什么想法或方法我可以做到吗？

玩家1：

```
package As2.packageTK;

//import android.app.Activity;
import java.util.ArrayList;

import android.support.v4.app.Fragment;
import android.support.v4.app.FragmentManager;
import android.support.v4.app.FragmentTransaction;
import android.app.Activity;
import android.os.Bundle;
import android.util.Log;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import android.widget.Button;
import android.widget.EditText;
import android.widget.TextView;
import android.widget.Toast;

public class PlayerTurn2 extends Fragment{

    TextView p2Name;
    TextView p2Icon;
    Button doneP2;
    Button resetP2;
    EditText row;
    EditText column;

    TicTacToeLayout myObject2 = new TicTacToeLayout();
    ArrayList<String> player2;
    Bundle extras = new Bundle();

    int turn = 2;

    public View onCreateView(LayoutInflater inflater,
    ViewGroup container, Bundle savedInstanceState) {
        View view = inflater.inflate(R.layout.playerturn2, container, false);
        return view;
    }

    public void onActivityCreated(Bundle savedInstanceState) {
        super.onActivityCreated(savedInstanceState);

        extras = getArguments();

        player2 = new ArrayList<String>(extras.getStringArrayList("player2"));

        //Toast.makeText(getActivity(), player2.get(0), Toast.LENGTH_LONG).show();
        //Toast.makeText(getActivity(), player2.get(1), Toast.LENGTH_LONG).show();

        p2Name = (TextView) getActivity().findViewById(R.id.p2NameInfo);
        p2Icon = (TextView) getActivity().findViewById(R.id.p2IconInfo);
        row = (EditText) getActivity().findViewById(R.id.rowP2);
        column = (EditText) getActivity().findViewById(R.id.columnP2);
        doneP2 = (Button) getActivity().findViewById(R.id.doneP2);
        //resetP2 = (Button) getActivity().findViewById(R.id.resetP2);

        setPlayer(); //sets all the information of player 2, name, icon, image, etc

        doneP2.setOnClickListener(new View.OnClickListener() {          
            public void onClick(View v) {   

                callPlayer1Fragment(); //switches with first player
            }
        });
    }

    public void callPlayer1Fragment()
    {
        FragmentManager fm       = getFragmentManager();
        FragmentTransaction ft = fm.beginTransaction();
        Fragment Player1Frag = new PlayerTurn1();
        Player1Frag.setArguments(extras);
        ft.replace(R.id.fragment_container, Player1Frag);
        ft.commit();
    }

    public boolean checkField()
    {
        if(row == null || column == null)
        {
            Toast.makeText(getActivity(), "Please input the row or column!", Toast.LENGTH_LONG).show();
            return false;
        }

        else
            return true;
    }

    public void setPlayer()
    {
        String name = player2.get(0);
        if(!name.equals(""))
            p2Name.setText("Player Name: " + name);
        else 
            p2Name.setText("");

        String icon = player2.get(1);

        if(!icon.equals(""))
            p2Icon.setText("Player Icon: " + icon);
        else
            p2Icon.setText("");
    }
} 
```

player 2 片段是完全相同的代码，所以我不会费心添加它。

TicTacToeLayout 片段类：

```
public class TicTacToeLayout extends Fragment {

    TextView image1, image2, image3, image4, image5, image6, image7, image8, image9;
    TextView[][] images;

    public View onCreateView(LayoutInflater inflater,
    ViewGroup container, Bundle savedInstanceState) {
        return inflater.inflate(R.layout.tictactoe_layout, container, false);
    }

    public void onActivityCreated(Bundle savedInstanceState) {
        super.onActivityCreated(savedInstanceState);

        image1 = (TextView) getActivity().findViewById(R.id.Image1);
        image2 = (TextView) getActivity().findViewById(R.id.Image2);
        image3 = (TextView) getActivity().findViewById(R.id.Image3);
        image4 = (TextView) getActivity().findViewById(R.id.Image4);
        image5 = (TextView) getActivity().findViewById(R.id.Image5);
        image6 = (TextView) getActivity().findViewById(R.id.Image6);
        image7 = (TextView) getActivity().findViewById(R.id.Image7);
        image8 = (TextView) getActivity().findViewById(R.id.Image8);
        image9 = (TextView) getActivity().findViewById(R.id.Image9);

        images = new TextView[][]{ {image1, image2, image3},
                                   {image4, image5, image6},
                                   {image7, image8, image9} };

        toast();
    }

    public void toast()
    {
        Toast.makeText(getActivity(), images[0][0].getText().toString(), Toast.LENGTH_LONG).show();
        Toast.makeText(getActivity(), images[0][1].getText().toString(), Toast.LENGTH_LONG).show();
        Toast.makeText(getActivity(), images[0][2].getText().toString(), Toast.LENGTH_LONG).show();
        Toast.makeText(getActivity(), images[1][0].getText().toString(), Toast.LENGTH_LONG).show();
    }

    public void play(int row, int column, String icon)
    {
            images[row-1][column-1].setText(icon);
    }

} 
```

这是 playerturn2 的 XML 布局

```
<?xml version="1.0" encoding="UTF-8"?>
    <TableLayout xmlns:android="http://schemas.android.com/apk/res/android"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent" >

        <TableRow
            android:id="@+id/tablerow0"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content" >

            <TextView
                android:id="@+id/player2Num"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_marginBottom="30dp"
                android:layout_marginLeft="100dp"
                android:gravity="center_horizontal"
                android:text="Player 2"
                android:textSize="20dp" />
        </TableRow>

        <TableRow
            android:id="@+id/tablerow1"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content" >

            <TextView
                android:id="@+id/p2NameInfo"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:text="Player Name: "
                android:textSize="20dp" />
        </TableRow>

        <TableRow
            android:id="@+id/tablerow2"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content" >

            <TextView
                android:id="@+id/p2IconInfo"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:text="Player icon: "
                android:textSize="20dp" />
        </TableRow>

        <TableRow
            android:id="@+id/tablerow3"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content" >

            <TextView
                android:id="@+id/p2PicInfo"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:text="Player picture:"
                android:textSize="20dp" />

        </TableRow>

        <ImageView
            android:id="@+id/imageView1"
            android:layout_width="100dp"
            android:layout_height="100dp"
            android:src="@android:drawable/editbox_background" />

        <TableRow
            android:id="@+id/rowNumber"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content" >

            <TextView
                android:id="@+id/TextView01"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_marginBottom="30dp"
                android:layout_marginLeft="50dp"
                android:gravity="center_horizontal"
                android:text="Row (1-3):"
                android:textSize="20dp" />

            <EditText
                android:id="@+id/rowP2"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:ems="10"
                android:inputType="number"
                android:width="50dp" />
        </TableRow>

        <TableRow
            android:id="@+id/colNumber"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content" >

            <TextView
                android:id="@+id/TextView02"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_marginBottom="30dp"
                android:layout_marginLeft="50dp"
                android:gravity="center_horizontal"
                android:text="Col (1-3):"
                android:textSize="20dp" />

            <EditText
                android:id="@+id/columnP2"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:ems="10"
                android:inputType="number"
                android:width="50dp" />

        </TableRow>

        <TableRow
            android:id="@+id/tableRow1"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_marginTop="50dp" >

            <Button
                android:id="@+id/doneP2"
                android:layout_width="50dp"
                android:layout_height="wrap_content"
                android:text="Done"
                />

            <Button
                android:id="@+id/resetP2"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:text="Reset"
                />

        </TableRow>

    </TableLayout> 
```

这是 tictactoelayout.xml 的布局

```
<?xml version="1.0" encoding="UTF-8"?>
    <TableLayout xmlns:android="http://schemas.android.com/apk/res/android"
        android:id="@+id/tictactoe"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:layout_marginLeft="10dp" >

        <TableRow
            android:id="@+id/tableRow1"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_marginTop="30dp" >

            <TextView
                android:id="@+id/Image1"
                android:layout_width="100dp"
                android:layout_height="100dp"
                android:text="1"
                android:textSize="70dp" />

            <TextView
                android:id="@+id/Image2"
                android:layout_width="100dp"
                android:layout_height="100dp"
                android:text="2"
                android:textSize="70dp" />

            <TextView
                android:id="@+id/Image3"
                android:layout_width="100dp"
                android:layout_height="100dp"
                android:text="3"
                android:textSize="70dp" />
        </TableRow>

        <TableRow
            android:id="@+id/tableRow2"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content" >

            <TextView
                android:id="@+id/Image4"
                android:layout_width="100dp"
                android:layout_height="100dp"
                android:text="4"
                android:textSize="70dp" />

            <TextView
                android:id="@+id/Image5"
                android:layout_width="100dp"
                android:layout_height="100dp"
                android:text="5"
                android:textSize="70dp" />

            <TextView
                android:id="@+id/Image6"
                android:layout_width="100dp"
                android:layout_height="100dp"
                android:text="6"
                android:textSize="70dp" />
        </TableRow>

        <TableRow
            android:id="@+id/tableRow3"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content" >

            <TextView
                android:id="@+id/Image7"
                android:layout_width="100dp"
                android:layout_height="100dp"
                android:text="7"
                android:textSize="70dp" />

            <TextView
                android:id="@+id/Image8"
                android:layout_width="100dp"
                android:layout_height="100dp"
                android:text="8"
                android:textSize="70dp" />

            <TextView
                android:id="@+id/Image9"
                android:layout_width="100dp"
                android:layout_height="100dp"
                android:text="9"
                android:textSize="70dp" />
        </TableRow>

        <RelativeLayout
            android:layout_width="wrap_content"
            android:layout_height="match_parent" >

            <TextView
                android:id="@+id/win"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_alignParentLeft="true"
                android:layout_centerVertical="true"
                android:text="Winner"
                android:textSize="20dp" />

            <EditText
                android:id="@+id/winner"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_alignParentRight="true"
                android:layout_centerVertical="true"
                android:layout_marginRight="15dp"
                android:ems="10" />

        </RelativeLayout>

    </TableLayout> 
```

最后是宿主活动的 xml 布局：tictactoegame.xml

```
<?xml version="1.0" encoding="UTF-8"?>
    <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:orientation="horizontal" >

        <FrameLayout
         android:id="@+id/fragment_container"
         android:layout_width="0px"
         android:layout_height="match_parent" 
         android:layout_weight="1" />

        <fragment
            android:id="@+id/frag2"
            android:name="As2.packageTK.TicTacToeLayout"
            android:layout_width="0px"
            android:layout_height="match_parent"
            android:layout_weight="1" />

    </LinearLayout> 
```

我的朋友做了同样的事情，但是实现了他在片段中创建的接口并让主要活动实现了接口。有了这个，他使用了一种方法来传递数据。也许不清楚，但如果你知道我想说什么，那么你可以为我们所有人清除它:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T19:42:23.060

您的朋友是对的，文档中很好地解释了与其他片段的通信：

[http://developer.android.com/training/basics/fragments/communicating.html](http://developer.android.com/training/basics/fragments/communicating.html)

# php - 转换为准备好的语句

> ID：15667729
> 
> 赞同：0
> 
> 时间：2013-03-27T19:27:31.173
> 
> 标签：php, mysql, prepared-statement

我一直在尝试更新一些代码以使用准备好的语句，但无法让它工作。根据我读过的文档和示例，似乎 SELECT 语句中的每个字段都需要单独绑定。

我正在根据用户输入构建查询，但不确定我的代码是否能够使用准备好的语句，或者我是否需要重写脚本。基本上是在这种情况下寻找一个可以效仿的例子。

我拥有的简化代码如下：

```
$db = mysqli_connect("ip_address", "my_login", "my_pw", "my_db");
    if (!$db) {
         die('Connect Error (' . mysqli_connect_errno() . ') '. mysqli_connect_error());

    $query = "SELECT * FROM tbl_name WHERE 1=1";
    if ($_POST[id] != '') {
        $query = $query. " AND id LIKE '%$_POST[id]%'";
    } 
    if ($_POST[date] != '') {
        $query = $query. " AND bdate LIKE '%$_POST[date]%'";
    } 
    if ($_POST[name] != '') {
        $query = $query. " AND name LIKE '%$_POST[name]%'";
    } 
    if ($_POST[address] != '') {
        $query = $query. " AND address LIKE '%$_POST[address]%'";
    }

    $query = $query. " ORDER BY id, bdate DESC";

     $results = mysqli_query($db, $query);  
     echo $query;
} 
```

提前致谢

# c - 列出 C 中的目标目录

> ID：15667730
> 
> 赞同：-2
> 
> 时间：2013-03-27T19:27:35.660
> 
> 标签：c, shell

所以我的任务是创建一个外壳。我的功能正常工作（例如dir、clear、quit 等），但我对'dir' 功能有疑问。目前'dir'工作正常。它列出了程序所在目录的文件。我要做的是列出另一个位置的目录。有办法吗？

我还没有创建更改目录命令。我想知道我的问题是否会通过它来解决。任何帮助表示赞赏。

旁注：说明声明我“需要提供一些命令行解析功能来提取目标目录以供列出。” 我不知道那是什么，但也许有人可以启发我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T19:30:21.327

看一下 GNU 的[Simple Directory Lister](http://www.gnu.org/software/libc/manual/html_node/Simple-Directory-Lister.html)示例代码，它使用`opendir()`.

要解析命令行参数，请查看您的`main()`函数：

```
int main(int argc, char* argv[])
{
    ...
    return 0;
} 
```

使用`argv[]`指针和`argc`整数值来确定参数的数量和字符指针。

# java - 对于多个数据集，比多个 SessionFactories 更好的选择？

> ID：15667736
> 
> 赞同：1
> 
> 时间：2013-03-27T19:28:15.553
> 
> 标签：java, hibernate, sessionfactory

我有一个导入应用程序，用户向我提供一个数据集（在我的情况下是一个 stackexchange 站点的数据转储）和一个表前缀，我需要创建表并导入数据。

然而，我能想到的在 Hibernate 中导入它的唯一方法是为每个数据集设置一个专用的 SessionFactory，这样我就可以为 SchemaExport 和 Session 使用一个特定的 NamingStrategy。否则 hibernate 会对我说的表感到困惑

不过，创建多个 SessionFactories 似乎是使用 Hibernate 的错误方式。这似乎也有很多开销和内存使用。

有谁知道在这种情况下使用单个 SessionFactory 的方法？

# python - 如何从另一个python脚本更改一个python脚本中变量的值

> ID：15667740
> 
> 赞同：0
> 
> 时间：2013-03-27T19:28:35.133
> 
> 标签：python, string

我必须归档 python1 和 python2。

Python2.py 有这样的代码：

```
import sys
variable1=value1
variable2=value2
#and some python code from here on 
```

python1 脚本应该获取 variable1 和 variable2 的输入值，并在不篡改其他代码的情况下更改 python2.py 中的相应值。

示例 2：如果任何用户将变量 1 的值设为 android。python2中variable1的值应该改成android

谢谢

注意：python2 不是配置文件，还有很多其他的模块

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-27T19:33:03.407

您可以只`import python2`输入`python1`，然后使用`python2.variable1=...`

# python - 对象没有属性会话

> ID：15667744
> 
> 赞同：0
> 
> 时间：2013-03-27T19:28:51.647
> 
> 标签：python, django

我正在为库存创建一个签入/结帐应用程序。用户不需要密码或电子邮件，只需输入数字或使用条形码扫描卡。因此，我没有使用 auth / users 模型，而是使用我自己的名为`Members`. 一切工作正常，我可以登录/注销，但是当我尝试结帐时问题就开始了。然后我得到一个错误`Member object has no attribute 'session'`

如何解决此错误？

**错误**

```
[27/Mar/2013 12:16:30] ERROR [django.request:215] Internal Server Error: /checkout/
Traceback (most recent call last):
  File "/Library/Python/2.7/site-packages/django/core/handlers/base.py", line 111, in get_response
    response = callback(request, *callback_args, **callback_kwargs)
  File "/Users/username/Google Drive/Python/GearTracker/GearTracker/decorators.py", line 15, in wrapper
    return function(request, *args, **kw)
  File "/Users/username/Google Drive/Python/GearTracker/inventory/views.py", line 28, in checkout
    check_status = check_in_out_item(request.session.get('user'),checked_out_item)
  File "/Users/username/Google Drive/Python/GearTracker/GearTracker/decorators.py", line 12, in wrapper
    if not (request.session.get('is_authed') == True):
AttributeError: 'Member' object has no attribute 'session' 
```

**装饰器.py**

```
def is_user_authed(function):
    def wrapper(request, *args, **kw):
        logger.info(request)
        if not (request.session.get('is_authed') == True):
            return HttpResponseRedirect('/login/')
        else:
            return function(request, *args, **kw)
    return wrapper 
```

**库存/views.py 片段**

```
@is_user_authed
def checkout(request):
    form = CheckoutForm(request.POST or None)
    logger.info(request)
    if request.method == 'POST':
        if (request.POST.get('serial')):
            try:
                checked_out_item = Inventory.objects.get(serial=request.POST.get('serial'))
                check_status = check_in_out_item(request.session.get('user'),checked_out_item)
            except Inventory.DoesNotExist:
                pass
        elif (request.POST.get('barcode')):
            try:
                checked_out_item = Inventory.objects.get(barcode=request.POST.get('barcode'))
                check_status = check_in_out_item(request.session.get('user'),checked_out_item)
            except Inventory.DoesNotExist:
                pass

    checked_out_items = Checkout.objects.all().filter(user=request.session.get('user'),checked_in__isnull=True)

    return render(request, 'inventory/index.html', {'items': checked_out_items, 'form': form}) 
```

**库存模型**

```
class Group(models.Model):
    name = models.CharField(max_length=200)

    def __unicode__(self):
        return self.name

class Member(models.Model):
    name = models.CharField(max_length=200)
    p_number = models.BigIntegerField()
    barcode = models.CharField(max_length=50,blank=True)

    def __unicode__(self):
        return self.name

class Inventory(models.Model):
    name = models.CharField(max_length=200)
    serial = models.CharField(max_length=200)
    barcode = models.CharField(max_length=200)
    active = models.BooleanField(verbose_name="Active (can be checked out if not out for repair)",blank=True,default=True)
    repair = models.BooleanField(verbose_name="Out for repair?",blank=True)
    group = models.ForeignKey(Group)

    def __unicode__(self):
        return self.name

class Checkout(models.Model):
    user = models.ForeignKey(Member)
    item = models.ForeignKey(Inventory)
    checked_out = models.DateTimeField()
    checked_in = models.DateTimeField(null=True, blank=True)

    def __unicode__(self):
        return self.item.name 
```

**中间件**

```
MIDDLEWARE_CLASSES = (
    'django.contrib.sessions.middleware.SessionMiddleware',
    'django.middleware.common.CommonMiddleware',
    'django.middleware.csrf.CsrfViewMiddleware',
    'django.contrib.auth.middleware.AuthenticationMiddleware',
    'django.contrib.messages.middleware.MessageMiddleware',
    # Uncomment the next line for simple clickjacking protection:
    'django.middleware.clickjacking.XFrameOptionsMiddleware',
) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T20:01:25.337

正如评论中所述，问题在于`check_in_out_item`期待 a`Request`因为你已经装饰了它，但你正在传递它`user`，它是 a `Member`。您需要修改`check_in_out_item`以接受 a`Request`而不是 a`Member`或删除装饰器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-03-26T08:20:44.913

要解决此错误，请先查看您使用的 TensorFlow 版本，如果您看到 TensorFlow 版本 1.14，则此问题将得到解决。

# ios - 如何检测 UIButton 的触摸结束事件？

> ID：15667746
> 
> 赞同：7
> 
> 时间：2013-03-27T19:28:52.327
> 
> 标签：ios, cocoa-touch, uibutton, touch

我想处理**UIButton**触摸结束时发生的事件。我知道 UIControl 有一些实现触摸的事件（UIControlEventTouchDown、UIControlEventTouchCancel 等）。**但除了UIControlEventTouchDown**和**UIControlEventTouchUpInside**之外，我什么也抓不到。

我的按钮是一些 UIView 的子视图。该 UIView 的**userInteractionEnabled**属性设置为**YES**。

怎么了？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-03-27T19:32:40.310

您可以根据`ControlEvents`

```
- (void)addTarget:(id)target action:(SEL)action forControlEvents:(UIControlEvents)controlEvents; 
```

例子：

```
[yourButton addTarget:self 
           action:@selector(methodTouchDown:)
 forControlEvents:UIControlEventTouchDown];

[yourButton addTarget:self 
           action:@selector(methodTouchUpInside:)
 forControlEvents: UIControlEventTouchUpInside];

-(void)methodTouchDown:(id)sender{

   NSLog(@"TouchDown");
}
-(void)methodTouchUpInside:(id)sender{

  NSLog(@"TouchUpInside");
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-27T19:42:52.533

您需要创建自己的扩展自定义类`UIButton`。你的头文件应该是这样的。

```
@interface customButton : UIButton
{
}

- (void)touchesEnded:(NSSet *)touches withEvent:(UIEvent *)event; 
```

然后制作你的实现文件

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2017-03-08T11:45:18.113

@Ramshad使用*UIControl*类的以下方法以**Swift 3.0语法接受的**[答案](https://stackoverflow.com/a/15667813/3659227)

 ***```
open func addTarget(_ target: Any?, action: Selector, for controlEvents: UIControlEvents) 
```

例子：

```
myButton.addTarget(self, action: #selector(MyViewController.touchDownEvent), for: .touchDown)
myButton.addTarget(self, action: #selector(MyViewController.touchUpEvent), for: [.touchUpInside, .touchUpOutside])

func touchDownEvent(_ sender: AnyObject) {
    print("TouchDown")
}

func touchUpEvent(_ sender: AnyObject) {
    print("TouchUp")
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-01-05T08:08:11.087

我认为这更容易

```
UILongPressGestureRecognizer *longPressOnButton = [[UILongPressGestureRecognizer alloc] initWithTarget:self action:@selector(longPressOnButton:)];
longPressOnButton.delegate = self;
btn.userInteractionEnabled = YES;
[btn addGestureRecognizer:longPressOnButton];

- (void)longPressOnButton:(UILongPressGestureRecognizer*)gesture
{
    // When you start touch the button
    if (gesture.state == UIGestureRecognizerStateBegan)
    {
       //start recording
    }
    // When you stop touch the button
    if (gesture.state == UIGestureRecognizerStateEnded)
    {
        //end recording
    }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-01-09T08:47:05.753

只需为带有事件`TouchDown:`和主要操作的 UIButton 添加 IBOutlets`Triggered:`

```
- (IBAction)touchDown:(id)sender {
    NSLog(@"This will trigger when button is Touched");
}

- (IBAction)primaryActionTriggered:(id)sender {
    NSLog(@"This will trigger Only when touch end within Button Boundary (not Frame)");
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-04-04T08:35:52.687

**斯威夫特 3.0 版本：**

```
 let btn = UIButton(...)

 btn.addTarget(self, action: #selector(MyView.onTap(_:)), for: .touchUpInside)

 func onTap(_ sender: AnyObject) -> Void {

} 
```***

# java - 两个请求之间的会话 ID 更改

> ID：15667747
> 
> 赞同：0
> 
> 时间：2013-03-27T19:29:00.807
> 
> 标签：java, spring, firefox, flex4

我正在使用会话 ID 来存储特定用户上传的文件，当用户单击按钮时，这些文件会被下载。但是，我面临一个问题。当我创建文件时，传入的会话 ID 与同一用户在同一会话中的任何其他请求不同。这会导致两个不同的会话 ID，并且由于哪个用户在下载该文件时面临问题。同样的东西在`IE`. 这仅在 Firefox 中发生。Jaxb 用于 Web 服务，flex 用于 GUI。有人可以帮助确定这里和哪一层出了什么问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T17:06:00.350

由于 ActionScript 中的文件上传（也可能是下载）将生成具有自己生命周期的单独会话，因此可能会出现此问题。我在一个使用 PHP 作为后端的基于 Flex 的应用程序中遇到了这个问题。

问题是用户必须能够上传媒体文件，但前提是他必须登录到应用程序。开始上传新文件时，ActionScript 将在具有自己会话 ID 的单独会话下处理上传。我只是因为用户和文件上传的会话冲突而导致上传开始时用户被重定向回登录屏幕。

您应该查阅 ActionScript 的[FileReference](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/net/FileReference.html)类的 API 文档，以了解在文件上传/下载期间究竟会发生什么。

您仅在 Firefox 中遇到该问题的问题可能源于您为 Firefox 安装的 Flash Player 版本。也许存在一些特定于浏览器的错误或其他问题。

# solr - 如何配置 Solr 以提高索引速度

> ID：15667748
> 
> 赞同：13
> 
> 时间：2013-03-27T19:29:05.540
> 
> 标签：solr, solrj, solr4

我有一个客户端程序，它生成 1-50 百万个 Solr 文档并将它们添加到 Solr。
我正在使用 ConcurrentUpdateSolrServer 从客户端推送文档，每个请求 1000 个文档。
文档相对较小（很少有小文本字段）。
我想提高索引速度。
我尝试将“ramBufferSizeMB”增加到 1G，将“mergeFactor”增加到 25，但没有看到任何变化。
我想知道是否还有其他推荐的设置来提高 Solr 索引速度。
任何指向相关材料的链接将不胜感激。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-28T00:46:53.213

看起来您正在将数据批量导入 Solr，因此您无需立即搜索任何数据。

首先，您可以增加每个请求的文档数量。由于您的文档很小，我什至会将每个请求增加到 100K 文档或更多并尝试。

其次，您希望减少批量索引时发生的提交次数。在您的 solrconfig.xml 中查找：

```
<!-- AutoCommit

     Perform a hard commit automatically under certain conditions.
     Instead of enabling autoCommit, consider using "commitWithin"
     when adding documents.

     http://wiki.apache.org/solr/UpdateXmlMessages

     maxDocs - Maximum number of documents to add since the last
               commit before automatically triggering a new commit.

     maxTime - Maximum amount of time in ms that is allowed to pass
               since a document was added before automatically
               triggering a new commit.

     openSearcher - if false, the commit causes recent index changes
     to be flushed to stable storage, but does not cause a new
     searcher to be opened to make those changes visible.
  -->
 <autoCommit>
   <maxTime>15000</maxTime>
   <openSearcher>false</openSearcher>
 </autoCommit> 
```

您可以完全禁用自动提交，然后在发布所有文档后调用提交。否则，您可以按如下方式调整数字：

默认`maxTime`值为 15 秒，因此如果有未提交的文档，自动提交每 15 秒发生一次，因此您可以将其设置为较大的值，例如 3 小时（即 3*60*60*1000）。您还可以添加`<maxDocs>50000000</maxDocs>`，这意味着仅在添加 5000 万个文档后才会发生自动提交。发布所有文档后，手动或从 SolrJ 调用一次 commit - 提交需要一段时间，但总体上会快得多。

此外，在您完成批量导入后，减少`maxTime`和`maxDocs`，这样您将对 Solr 所做的任何增量帖子都会更快地提交。或者`commitWithin`按照 solrconfig 中的说明使用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-03-25T17:14:39.253

除了上面写的，在使用 SolrCloud 时，您可能需要考虑`CloudSolrClient`在使用 SolrJ 时使用。客户端类是 Zookeeper 感知的`CloudSolrClient`，并且能够直接连接到领导分片，在某些情况下加快索引速度。

# highcharts - Highstock/Highcharts 上的每一行都有不同的后缀

> ID：15667749
> 
> 赞同：8
> 
> 时间：2013-03-27T19:29:08.430
> 
> 标签：highcharts, highstock

有没有一种简单的方法可以在每行上使用不同的后缀值？

现在我有 3 行，我正在尝试更改每行的后缀，但我只能使用 formatter 函数找到它。

但是，如果我使用格式化程序功能，我需要编辑每个工具提示，使其像默认的一样，我不知道默认格式。

我的意思是，一种简单的方法，比如改变颜色，我们可以简单地做：

```
{
name: 'First line',
type: 'line',
color: '#33CC66',
zIndex: 0,
data: [ ... ]
} 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-03-28T03:28:32.317

我想这就是你想要的。您可以在每个系列上指定 tooltip 属性并使用 valueSuffix ：

[http://jsfiddle.net/aXvcw/](http://jsfiddle.net/aXvcw/)

```
 tooltip: {
            formatter : function() {
                 return this.y + ' ' +  this.series.tooltipOptions.valueSuffix;
            }
        },
        series: [{
            name: 'Rainfall',
            type: 'column',
            yAxis: 1,
            data: [49.9, 71.5, 106.4, 129.2, 144.0, 176.0, 135.6, 148.5, 216.4, 194.1, 95.6, 54.4],
            tooltip: {
                valueSuffix: ' mm'
            }

        }, {
            name: 'Temperature',
            type: 'spline',
            data: [7.0, 6.9, 9.5, 14.5, 18.2, 21.5, 25.2, 26.5, 23.3, 18.3, 13.9, 9.6],
            tooltip: {
                valueSuffix: '°C'
            }
        }] 
```

从这个演示修改：[http](http://www.highcharts.com/demo/combo-dual-axes) ://www.highcharts.com/demo/combo-dual-axes 。

您也不需要提供工具提示格式化程序功能，但如果您想要的不是默认值，这就是您可以访问系列 valueSuffix 的方式。

# python - 在openpyxl中为标签着色

> ID：15667750
> 
> 赞同：7
> 
> 时间：2013-03-27T19:29:12.173
> 
> 标签：python, openpyxl

我们有一种情况，我们想使用 openpyxl 为工作表的选项卡着色。有没有办法在图书馆内做到这一点？或者，有没有人找到一种在库外部执行此操作的方法（即通过扩展或类似的方法）？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2016-03-31T00:34:29.873

您可以使用 sheet_properties.tabColor 属性的 RRGGBB 颜色代码使用 openpyxl 为选项卡着色：

```
from openpyxl import Workbook

wb = Workbook()
ws = wb.create_sheet('My_Color_Title')
ws.sheet_properties.tabColor = 'FFFF00'

wb.save('My_book_with_Yellow_Tab.xlsx') 
```

[![在此处输入图像描述](../Images/b3c620ed3721bf35f622bba042958f95.png)](https://i.stack.imgur.com/NtZxf.png)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-16T10:00:08.630

[您可以使用XlsxWriter](http://xlsxwriter.readthedocs.org/) Python 模块在新的 Excel 文件中设置选项卡颜色。这是一个例子：

```
from xlsxwriter.workbook import Workbook

workbook = Workbook('tab_colors.xlsx')

# Set up some worksheets.
worksheet1 = workbook.add_worksheet()
worksheet2 = workbook.add_worksheet()
worksheet3 = workbook.add_worksheet()
worksheet4 = workbook.add_worksheet()

# Set tab colours
worksheet1.set_tab_color('red')
worksheet2.set_tab_color('green')
worksheet3.set_tab_color('#FF9900')  # Orange

# worksheet4 will have the default colour.
workbook.close() 
```

![使用 Python 的 Excel 工作表中的彩色选项卡](../Images/a32e9e46ffaa1c053d61671d04720310.png)

# java - Android：错误 - 案例表达式必须是常量表达式

> ID：15667755
> 
> 赞同：1
> 
> 时间：2013-03-27T19:29:20.217
> 
> 标签：java, android, switch-statement

我一直在开发一个应用程序，最近买了一台新电脑。我不得不将我现有的代码导入这台计算机。现在，当我这样做时，我在构建路径中遇到了一些错误，所以我修复了它们。但是现在，我的 switch 和 case 在每种情况下都会出错。它说：case 表达式必须是常量表达式。

我的代码示例：

```
case R.id.b3:
    a.putExtra("Green", "green");
    startActivity(a);
    break;
case R.id.b4:
    a.putExtra("Pink", "pink");
    startActivity(a);
    break; 
```

我收到按钮 id 上的错误。在我使用的另一台计算机上一切正常，所以我不确定为什么我现在收到此错误。我用谷歌搜索了一下，我读到我应该用 if else 语句替换它们，但是替换我的所有开关和案例将是一个很大的痛苦，所以我想避免这种情况。

为什么我的导入代码会出现这种情况？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-27T19:36:06.763

当您的资源在库项目中定义时，就会发生这种情况。我相信较新版本的 Android 插件之一需要基于库项目编译方式的更改。if-else 是必要的。IDE 会自动为您完成。如果您突出显示 switch 关键字并按 ctrl-1，您应该可以选择自动进行更改。

你可以在[这里](http://tools.android.com/tips/non-constant-fields)阅读。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T19:33:47.187

检查您正在使用的活动，即给您错误的活动，并在其中查找这行代码

```
import android.R; 
```

删除它！执行干净，一切都应该工作

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-27T19:38:02.887

自从 ADT14 不久前[工具链发生变化以来，无法保证 id 在库中保持不变](http://tools.android.com/recent/switchstatementconversion)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-09-25T15:19:14.130

这可能是您正在使用第三方库，为了让您快速开发应用程序并能够使用多个库，资源 id 未定义为 final，因此您必须使用 if/else 而不是 switch/case .

# java - 更高效的 RGB 到 ARGB 转换

> ID：15667757
> 
> 赞同：0
> 
> 时间：2013-03-27T19:29:32.170
> 
> 标签：java, android, graphics, rgb, argb

我有这个工作代码，它读入一个 700x700 RGB24 TIF 文件并将其放入显示内存中。分配`pixelARGB`值的行似乎效率极低，此代码需要 3-4 秒来重绘屏幕。*有没有办法可以避免移位和 oring 并将字节值放在 32 位字中的正确位置？* 在其他语言中，我使用“叠加变量”或“变体记录”等来完成此操作。在 Java 中找不到这个。谢谢你。

```
for (y=0; y<700; y++) { // for each line
    i = 0;
    for (x=0; x<700; x++) { // for each dot
        red = lineBuf[i++] & 0xFF;
        green = lineBuf[i++] & 0xFF;
        blue = lineBuf[i++]& 0xFF;
        pixelARGB = 0xFF000000 | (red << 16)| (green << 8) | blue;
        this_g.setPixel(x + BORDER, y + BORDER, pixelARGB);
    }
    size=is.read(lineBuf,0,2100);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T19:45:54.843

至少有一种方法可以将 TIFF 图像数据缓冲区转换为`Bitmap`更有效的缓冲区，并且可以进行优化。

### 1.使用`int[]`数组而不是像素副本：

您仍然必须单独计算每个像素，但将它们设置在`int[]`数组中。这`setPixel()`是占用您所有时间的功能。

例子：

```
final int w = 700;
final int h = 700;
final int n = w * h;
final int [] buf = new int[n];
for (int y = 0; y < h; y++) {
    final int yw = y * w;
    for (int x = 0; x < w; x++) {
        int i = yw + x;
        // Calculate 'pixelARGB' here.
        buf[i] = pixelARGB;
    }
}
Bitmap result = Bitmap.createBitmap(buf, w, h, Bitmap.Config.ARGB_8888); 
```

### 2\. 在您的循环内调整大小：

这不太可能，但如果`ImageView`已知结果图像的目标小于源图像（在您的问题中为 700x700），那么您可以在`for`循环中调整大小以获得极高的性能提升。

您需要做的是遍历目标图像像素，`x`从`y`源图像中计算所需`pixelARGB`的像素值，仅计算这些像素的值，填充较小的`int[]`数组，最后生成较小的`Bitmap`. 很多。快点。

您甚至可以通过对每个目标像素最近的四个源像素进行自制三次插值来提高调整大小的质量，但我认为您会发现这对于显示目的是不必要的。

# wpf - 如何在 wpf/XAML 中实现条件验证规则

> ID：15667767
> 
> 赞同：1
> 
> 时间：2013-03-27T19:30:17.693
> 
> 标签：wpf, validation, xaml, data-binding

我希望找到一种`ValidationRule`在 XAML 数据绑定中使用自定义的方法，但要有条件地使用它，以便动态选择使用的规则。对于我的特定问题，我想验证一个物理位置范围，但该范围可以是绝对的或相对的，具体取决于布尔属性（绑定到复选框）。

这是我实现的验证规则（属性`Range2Sel`确定使用哪个范围）：

```
class IntDualRangeRule : ValidationRule
{
    public int Min1 { get; set; }
    public int Max1 { get; set; }
    public int Min2 { get; set; }
    public int Max2 { get; set; }
    public bool Range2Sel { get; set; }

    public override ValidationResult Validate(object value, CultureInfo cultureInfo)
    {
        ValidationResult vr = ValidationResult.ValidResult;     
        try
        {
            int num = int.Parse(value.ToString());
            int rangeMin = Range2Sel ? Min2 : Min1;
            int rangeMax = Range2Sel ? Max2 : Max1;
            if (num < rangeMin || num > rangeMax)
            {
                vr = new ValidationResult(false, "The value cannot be less than " + rangeMin + " or greater than " + rangeMax + ".");
            }
        }
        catch (FormatException)
        {
            vr = new ValidationResult(false, "The value \"" + value.ToString() + "\" is not a valid integer number.");
        }

        return vr;
    }
} 
```

现在我可以从 C# 代码中成功使用此验证规则，如下所示：

```
IntDualRangeRule valInt = new IntDualRangeRule() {
    Min1 = GVars.MTP_GANTRY_TPOS_ABS_MIN, 
    Max1 = GVars.MTP_GANTRY_TPOS_ABS_MAX, 
    Min2 = GVars.MTP_GANTRY_TPOS_REL_MIN,
    Max2 = GVars.MTP_GANTRY_TPOS_REL_MAX,
    Range2Sel = Some_Boolean_Property
};
ValidationResult vRes = valInt.Validate(MyTargetPos, System.Globalization.CultureInfo.CurrentCulture); 
```

我遇到的障碍是如何在 XAML 中解决这个问题（注意“???”）：

```
<Binding Path="GTargetPos" UpdateSourceTrigger="LostFocus" Mode="TwoWay" >
    <Binding.ValidationRules>
        <loc:IntDualRangeRule 
            Min1="{x:Static loc:GVars.MTP_GANTRY_TPOS_ABS_MIN}"  
            Max1="{x:Static loc:GVars.MTP_GANTRY_TPOS_ABS_MAX}" 
            Min2="{x:Static loc:GVars.MTP_GANTRY_TPOS_REL_MIN}"  
            Max2="{x:Static loc:GVars.MTP_GANTRY_TPOS_REL_MAX}" 
            Range2Sel=???
            />
    </Binding.ValidationRules>
</Binding> 
```

绑定不适用于这种参数，所以我不知道下一步该去哪里，或者对于其他人之前肯定遇到过的问题，什么是“最佳实践”。除了这个特定的问题，我还想知道其他人如何处理仅在某些条件下相关的验证规则。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-23T10:29:29.240

尝试将 Min1 Min2 Max1 Max2 作为依赖属性而不是普通属性。

# javascript - 行中等高的列

> ID：15667770
> 
> 赞同：0
> 
> 时间：2013-03-27T19:30:21.630
> 
> 标签：javascript, jquery, html

我正在尝试使用 fitHeights （[http://codepen.io/davatron5000/pen/fIqnF](http://codepen.io/davatron5000/pen/fIqnF)）来均衡列的行，但我无法让它分别计算每行的高度。有没有人知道如何修改它来计算每行最高的容器？

这是我正在使用的示例。[http://codepen.io/FernE97/pen/rzfid](http://codepen.io/FernE97/pen/rzfid)。现在它正在计算高度，但它是从 4 个中最高的而不是每行中的最高的。

```
(function ($) {
    'use strict';

    $.fn.fitHeights = function () {

        var items = $(this);

        function setHeights() {
            var currentTallest = 0;

            items.css({ 'min-height' : currentTallest }); // unset min-height to get actual new height

            items.each(function () {
                if ($(this).outerHeight() > currentTallest) { currentTallest = $(this).outerHeight(); }
            });

            items.css({ 'min-height' : currentTallest });
        }

        setHeights();
        $(window).on('resize', setHeights);
        return this;
    };

}(jQuery));

// on load
jQuery(window).load(function ($) {

    $('.fitheights .module').fitHeights();

}(jQuery)); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T19:57:24.977

希望这会有所帮助，但请查看我所做的更新的 codepen - 基本上我创建了一个 sameHeights 函数并在图像上放置了一个高度，希望这对您有所帮助 [http://codepen.io/anon/pen/fslvc](http://codepen.io/anon/pen/fslvc)

js

```
 $.fn.sameHeights = function() {
    $(this).each(function(){
        var tallest = 0;
        $(this).children().each(function(i){
            if (tallest < $(this).height()) { tallest = $(this).height(); }
        });
        $(this).children().css({'height': tallest});
    });
    return this;
}; 

 $(window).load(function(){
/* $(groupOfItems).fitHeights(); */
 $('ul').sameHeights();
}); 
```

css

```
img { max-width: 100%; height:300px; } 
```

# jquery - jquery 显示更多/更少与添加的 html 标签有关的问题

> ID：15667771
> 
> 赞同：2
> 
> 时间：2013-03-27T19:30:23.423
> 
> 标签：jquery

评论 div 中的 HTML 标签有问题，插入`<p>something</p>`标签时没有显示更多文本链接。它适用于纯文本。我想插入富文本，但它不起作用。

**HTML**

```
<div id="header">
<H2>
    Dynamically shortened Text with Show More link using jQuery
</H2>
</div>
<p>Click here to view the Tutorial: <a href="http://viralpatel.net/blogs/2010/12/dynamically-shortened-text-show-more-link-jquery.html">Shortened Text with Show More link</a></p>

<br/>
<div class="comment more">
    <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit.
    Vestibulum laoreet, nunc eget laoreet sagittis,
    quam ligula sodales orci, congue imperdiet eros tortor ac lectus.
    Duis eget nisl orci. Aliquam mattis purus non mauris
    blandit id luctus felis convallis.
    Integer varius egestas vestibulum.
    Nullam a dolor arcu, ac tempor elit. Donec.</p>
</div>
<div class="comment more">
    Duis nisl nibh, egestas at fermentum at, viverra et purus.
    Maecenas lobortis odio id sapien facilisis elementum.
    Curabitur et magna justo, et gravida augue.
    Sed tristique pellentesque arcu quis tempor.
</div>
<div class="comment more">
    consectetur adipiscing elit. Proin blandit nunc sed sem dictum id feugiat quam blandit.
    Donec nec sem sed arcu interdum commodo ac ac diam. Donec consequat semper rutrum.
    Vestibulum et mauris elit. Vestibulum mauris lacus, ultricies.
</div> 
```

**CSS**

```
body, input{
    font-family: Calibri, Arial;
    margin: 0px;
    padding: 0px;
}
a {
    color: #0254EB
}
a:visited {
    color: #0254EB
}
#header h2 {
    color: white;
    background-color: #00A1E6;
    margin:0px;
    padding: 5px;
}
.comment {
    width: 400px;
    background-color: #f0f0f0;
    margin: 10px;
}
a.morelink {
    text-decoration:none;
    outline: none;
}
.morecontent span {
    display: none;

} 
```

**Javascript**

```
$(document).ready(function() {
    var showChar = 100;
    var ellipsestext = "...";
    var moretext = "more";
    var lesstext = "less";
    $('.more').each(function() {
        var content = $(this).html();

        if(content.length > showChar) {

            var c = content.substr(0, showChar);
            var h = content.substr(showChar-1, content.length - showChar);

            var html = c + '<span class="moreelipses">'+ellipsestext+'</span>&nbsp;<span class="morecontent"><span>' + h + '</span>&nbsp;&nbsp;<a href="" class="morelink">'+moretext+'</a></span>';

            $(this).html(html);
        }

    });

    $(".morelink").click(function(){
        if($(this).hasClass("less")) {
            $(this).removeClass("less");
            $(this).html(moretext);
        } else {
            $(this).addClass("less");
            $(this).html(lesstext);
        }
        $(this).parent().prev().toggle();
        $(this).prev().toggle();
        return false;
    });
}); 
```

[jsFiddle在这里](http://jsfiddle.net/Skdmk/)

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T12:08:24.383

那是因为你正在服用`var content = $(this).html();`。html 有 a`<p>`并且当您使用 substr 时，您最终会得到格式错误的 html，并且没有结束标记（例如`<p>Some Text`）。不同的浏览器会以不同的方式处理格式错误的 html。您的`morelink`链接被放在外部，`<p>`并且切换最终将其隐藏。改用`var content = $(this).text();`或找到一个可以更好地处理这个问题的插件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-05T14:33:12.857

插件版（新功能）：

```
$.fn.showHideParagraph = function(settings){
    var config = $.extend({},  $.fn.showHideParagraph.config, settings);
    $(this).on({click: function () {
        var $this = $(this);
        if ($this.hasClass('less')) {
            $this.removeClass('less').html(config.moreText);
        } else {
            $this.addClass('less').html(config.lessText);
        }

        $this.parent().siblings('p:not(:first)').animate({opacity: 'toggle', height: 'toggle'});
        return false;
    }
    }, '.morePLink');

    return this.each(function () {
        var $this = $(this);
        if($this.hasClass("shortenedP")) return;

        $this.addClass("shortenedP");
        var paragraphs = $this.children('p');
        if (paragraphs.length > config.paragraphShowed) {
            paragraphs.not(":first").hide();

            paragraphs.first().append(" ...");
            var moreLess = '<span><a href="#" class="morePLink">'  + config.moreText + '</a></span>';
            $this.append(moreLess);
        }
    });
};

$.fn.showHideParagraph.config = {
    paragraphShowed: 1,
    ellipsesText: "...",
    moreText: 'more',
    lessText: 'less'
}; 
```

这支持 p 并且您可以配置 p 显示的数量。

小提琴：http: [//jsfiddle.net/544HN/](http://jsfiddle.net/544HN/)

# c# - 使用对象或属性创建视图模型

> ID：15667776
> 
> 赞同：3
> 
> 时间：2013-03-27T19:30:46.160
> 
> 标签：c#, asp.net-mvc

我正在创建我的第一个 MVC 项目，并且很好奇将我的 Code First 实体类公开给我的视图模型的正确方法。我有一个像这样的实体类：

```
public class Product
{
    public int Id { get; set; }
    public int CategoryId { get; set; }
    [StringLength(50)]
    public string ProductName { get; set; }
    public Nullable<System.DateTime> DateAdded { get; set; }
    [StringLength(50)]
    public string AddedBy { get; set; }
} 
```

是传入对象更好，还是传入新的属性类？

```
public class ProductViewModel
{
    Product myProduct { get; set; }
}

public class ProductViewModel
{
    public int Id { get; set; }
    public int CategoryId { get; set; }
    public string ProductName { get; set; }
    public DateTime DateAdded { get; set; }
    public string AddedBy { get; set; }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T19:32:32.340

最好选择第二个选项。将数据库类用作模型通常是**不好的做法。**您的第一个选项本质上就是这样，除了它将它包装在另一个*毫无意义*的类中。

不过，我要做的是让它们都实现一个**接口**，这样如果你想改变它，只需改变接口，然后两个实例都可以改变。

```
public class ProductViewModel : IProduct
{
    public int Id { get; set; }
    public int CategoryId { get; set; }
    [StringLength(50)]
    public string ProductName { get; set; }
    public DateTime DateAdded { get; set; }
    [StringLength(50)]
    public string AddedBy { get; set; }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T19:33:00.547

我肯定会选择第二种选择。它提供了与域模型（实体）和视图模型的清晰分离。分离这些模型很重要，因为：

*   您有两种截然不同的问题需要解决
    *   您的域处理域逻辑，即管理应用程序数据所涉及的实际业务流程。
    *   您的视图专注于视图逻辑，为与该数据交互提供了一个良好的用户界面。
*   您可以将域和接口层的开发工作分开。您希望将一层中的微小更改对其他层的影响降至最低。

当然，在这个例子中它有点微不足道，但是当你在你的视图中构建更多的逻辑时它会非常重要。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-27T19:33:38.277

最好将实体类作为一个整体传入。这样，如果类发生变化，您就不必更新 ViewModel 中的属性。

# mysql - 如何仅将 mysql 中的选定文件导出到 .csv

> ID：15667778
> 
> 赞同：-2
> 
> 时间：2013-03-27T19:31:05.927
> 
> 标签：mysql, sql

如何仅将 mysql 中的选定文件导出到 .csv 文件

例子：

```
Select * from tablename where column name = $somevalue 
```

如何从该查询中导出返回值？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T19:32:48.077

使用`into outfile`（[此处的](http://dev.mysql.com/doc/refman/5.0/en/select-into.html)文档）：

```
select *
into outfile 'the/file/you/want.csv'
from tablename
where column = $somevalue 
```

哦，要添加列名，您需要使用`union all`. 太好了，因为这可能需要您将某些列显式转换为正确的格式。

```
select <all columns except "isheader">
into outfile 'the/file/you/want.csv'
from ((select 1 as isheader, <list of column names in quotes>
      ) union all
      (select 0 as isheader, t.*
       from tablename
       where column = $somevalue
      )
     ) t
order by isheader desc 
```

例如，如果您有一列名为`id`：

```
select id
into outfile 'the/file/you/want.csv'
from ((select 1 as isheader, 'id' as id
      ) union all
      (select 0 as isheader, t.id
       from tablename t
       where column = $somevalue
      )
     ) t
order by isheader desc 
```

# scala - 如何指定标头和生成代码的包？

> ID：15667783
> 
> 赞同：1
> 
> 时间：2013-03-27T19:31:21.717
> 
> 标签：scala, code-generation, isabelle

我正在用 Isabelle 生成 Scala 代码。如何为我的 Scala 文件指定标题？例如，我想要这样的东西：

```
// Generated code. Generated with Isabelle/HOL
// File: blubb.thy line:1234
// Date: Wed, 27.03.2013
// exported code equations: bla blub blob ... 
```

如何指定要使用的包？例如，要使用包`GENERATED`，文件应该以单词开头`package GENERATED`。

* * *

到目前为止，我得到的最好的想法是`code_include`第二个参数为空的命令 ( `""`)。如果我选择更长的第二个参数，`Efficient_Nat`理论首先会发出它的代码。但我必须写到文件的开头。

```
code_include Scala ""
{*package GENERATED

// Code generated by Isabelle
*} 
```

这个解决方案有多邪恶？如果它不是那么邪恶，我怎么能添加诸如当前日期、当前你的文件以及`export_code`发生的行之类的东西。我还可以添加我导出的代码方程式但不添加它们的体面吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-28T07:43:58.653

`code_include`是你想要的正确的东西。第二个参数标识包含并确定代码生成器输出不同`code_include`s 的顺序。当您选择了空标识符`""`时，您的文本将始终排在第一位，但您不能有多个`code_include`具有相同标识符的 s（后者会覆盖前者）。

你给`code_include`里面`{*`的文本`*}`没有被解释，所以你不能在那里有动态部分。但是，如果您使用代码生成器的 ML 接口，则可以在调用`export_code`. 这可能如下所示：

```
ML {*
val scala_header =
  let
    val package = "package GENERATED";   
    val date = Date.toString (Date.fromTimeLocal (Time.now ()))
    val header = package ^ "\n\n" ^ "// Generated by Isabelle on " ^ date ^ "\n"
  in
    Code_Target.add_include "Scala" ("", SOME (header, []))
  end
*} 
```

现在，您只需要在`scala_header`之前调用`export_code`：

```
setup {* scala_header *}
export_code ... in Scala file ... 
```

这为您提供了大致正确的生成日期。详细地说，时间将是`setup {* scala_header *}`执行的时间，这可能是（由于多线程）`export_code`实际执行之前的某个时间。即使在顺序模式下，当您生成大量代码或对代码方程式进行大量预处理时，间隔也可能是几分钟。

# html - 图像在固定标题上可见

> ID：15667784
> 
> 赞同：2
> 
> 时间：2013-03-27T19:31:29.007
> 
> 标签：html, css

我创建了一个标头，`position: fixed`并在其下方添加了一个使用图像替换的徽标。但是，当我向下滚动时，图像会移动*到*标题上方而不是*下方*。

如何让固定标题始终位于顶部（即强制图像在其下方移动）？

这是我的代码的一部分：

**HTML**

```
<header>
    <nav>
        <ul>
            <li>Home</li>
            <li>About</li>
            <li>Work</li>
        </ul>
    </nav>
</header>

<div class="banner">
    <h1><img src="imgs\logo.png" />Jackle</h1>
    <h3>We design and create.</h3>
</div>

<img src="" class="representationBannerPic">
<p>Lorem ipsum dolor sit amet, consectetur adipisicing elit. Veritatis recusandae ullam dolores sint eligendi voluptatibus incidunt esse vero totam aspernatur. Iste quae molestias sed enim corrupti rerum nam culpa asperiores.</p> 
```

**CSS**

```
header
{
    background-color: black;
    width: 100%;
    height: 47px;
    color: white;
    position: fixed;
}
.banner
{
    background-color: #3b97b1;
    background-color: #5fa1b4;
    height: 247px;
    width: 100%;
}
.banner h1 
{
    text-align: center;
    position: relative;
    top: 100px;
    text-indent: -9999px;
}
.banner h1 img
{
   position: absolute;
   top: 50%;
   left: 50%;
   width: 200px;
   height: 60px;
   margin-top: -30px; /* Half the height */
   margin-left: -100px; /* Half the width */
   padding-top: 20px;
} 
```

如果您需要查看更多内容，可以[在此处找到](http://jsbin.com/uvecap/1/)完整代码。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-03-27T19:33:11.583

将以下规则添加到您的*标题*样式：

```
header
{
    /* ... */
    z-index: 99;
} 
```

该`z-index`属性指定定位元素的叠加顺序。因此，具有较大的元素`z-index`将始终位于具有较低的元素之前`z-index`。将 设置为`z-index`大于（或什至等于）0 的值会将该元素设置在未`z-index`指定的非定位元素之上。您始终可以将其设置为低于 99 的值，但是，通常的做法是避免与其他定位元素发生潜在冲突。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T11:39:15.677

```
header {
    z-index: 1;
}

.banner {
    position: relative;
    z-index: 0;
} 
```

它适用于所有浏览器，没有副作用。

# sql-server - SSRS 使用 SQL 存储过程

> ID：15667793
> 
> 赞同：2
> 
> 时间：2013-03-27T19:31:53.573
> 
> 标签：sql-server, ssrs-2008

我有一个从链接服务器检索数据的存储过程。我可以通过设置单个变量来运行存储过程。结果最终出现在我的 SQL 2008 R2 数据库中的一个表中。SSRS 中的数据集使用 EXEC dbo.ImagePlaceholder @Name 命令调用此存储过程。这是存储过程：

```
 USE [LagoReporting]

GO
 /****** Object:  StoredProcedure [dbo].[ImagePlaceholder]    Script Date: 03/27/2013 14:22:21    ******/
    SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
-- =============================================
-- Author:Tim Vavra
-- Create date: 3/27/13
-- Description: Stored procedure to create the table necessary to produce a report that shows all images that are listed
-- as placeholders in Lago.  Included in table will be any job which has a street date greater than today - 30.
-- =============================================

ALTER PROCEDURE [dbo].[ImagePlaceholder]
(
@Name varchar(80)
)
AS
BEGIN

    SET NOCOUNT ON;
    SET FMTONLY OFF; 

declare @SQL nvarchar(4000)
declare @KATBEZC varchar(80)

drop table dbo.ImagePH

set @KATBEZC = @Name    

Create Table #ActiveTemp(
    media nvarchar(max),
    div nvarchar(max),
    folio nvarchar(max),
    pgblock nvarchar(max),
    item nvarchar(max),
    itemname nvarchar(max),
    photoinstruction nvarchar(max),
    photodirection nvarchar(max),
    PH nvarchar(100),
    imagename nvarchar(max))

Create Table [dbo].[ImagePH](
    media nvarchar(max),
    div nvarchar(max),
    folio nvarchar(max),
    pgblock nvarchar(max),
    item nvarchar(max),
    itemname nvarchar(max),
    photoinstruction nvarchar(max),
    photodirection nvarchar(max),
    PH nvarchar(100),
    imagename nvarchar(max))

      set @SQL=
      N'insert into #ActiveTemp 
      select media, div,folio,pgblock,item, itemname, photoinstruction, photodirection,PH,imagename
      from  OPENQUERY(LAGO,
      ''SELECT DISTINCT KATBEZC media,
art.artvf1c div,
CONCAT(pagprec,pagpags) folio,
pro.probezc pgblock,
art.artvf2c item,
art.artbezc itemname,
art.artvf7c photoinstruction,
art.artvf6c photodirection,
bld.bldtmps PH,
bld.bldfnmc ImageName
FROM dok,
pro,
art,
aez,
kat,
PAG,
kav,
kom,
bld,
boz
WHERE kavkatkeyi = katkeyi
AND artkavkeyi = kavkeyi
AND aezartkeyi = artkeyi
AND aezkavkeyi = artkavkeyi
AND prokeyi = aezprokeyi
AND prokavkeyi = aezkavkeyi
AND komprokeyi = prokeyi
AND (komkavkeyi = 0 OR komkavkeyi = prokavkeyi)
AND dokkeyi = komdokkeyi
AND (prosnei = doksnli OR prosnei = doksnei)
AND dokkeyi = pagdokkeyi
AND PAGPAVKEYI = KATPAVKEYI
and bldtmps = 1
and bozbldkeyi = bldkeyi
and bozobjkeyi = artkeyi
and katbezc = ''''' + @Name + '''''
and boztyps = 2
Group by kat.katbezc,
CONCAT(pagprec,pagpags),
art.artvf1c,
pro.probezc,
art.artvf2c,
art.artbezc,
kom.kombezc,
art.artvf7c,
art.artvf6c,
bld.bldtmps,
bld.bldfnmc
'')'

    exec (@SQL)

    insert into dbo.ImagePH 
    select * from #ActiveTemp

END 
```

尽管当我查询数据库 dbo.ImagePH 具有所有正确信息时，我没有将数据返回到报告中。

提前感谢您的帮助。对不起，代码格式。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T19:36:35.073

你的 sp 的结尾是一个插入查询

```
insert into dbo.ImagePH 
select * from #ActiveTemp 
```

如果您希望它返回结果，则它需要是一个选择查询

还

*   您应该使用`sp_executesql`，以便您将查询作为参数化查询执行。
*   无论如何，您都不应该在这里使用动态 sql
*   填充临时表是没有意义的。只需直接插入 dbo.ImagePH 即可。

# gdb - 如何让 GDB 仅在断点处停止在 SIGTRAP？

> ID：15667795
> 
> 赞同：8
> 
> 时间：2013-03-27T19:31:58.900
> 
> 标签：gdb

我正在尝试调试一个经常导致 GDB 在不在断点处时停止并显示 SIGTRAP 的程序。它发生在加载动态库和其他普通东西时。在我的断点最终被击中之前，大约有 1,000 次此类事件发生，因此我无法手动“继续”所有这些不相关的 SIGTRAP。但是如果我使用 command `handle SIGTRAP nostop noprint`，那么 GDB 将不会在我的断点处停止。

似乎必须有一种方法来教育 GDB，以便它了解哪些 SIGTRAP 有利于停止，哪些不利于停止。显然 GDB 知道它是否在断点处，因为输出非常可靠地不同：在断点处，它提到“断点”并显示断点编号——但在任何其他 SIGTRAP 处，它只显示“SIGTRAP”。因此，与其打印关于 SIGTRAP 的消息，我真的希望 GDB 对自己说：“哇，这是一个 SIGTRAP，这里没有断点——看我，我要停下来打印一个完全破坏调试会话的无用 SIGTRAP 消息！我只是安静地继续怎么样？如果有人有办法做到这一点，请告诉我。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2015-11-03T12:11:22.337

您可以设置[捕获点](https://sourceware.org/gdb/current/onlinedocs/gdb/Set-Catchpoints.html#Set-Catchpoints)来捕获 SIGTRAP 信号并添加命令来决定是继续还是停止。在此处理程序中，您可以检查[便利变量](https://sourceware.org/gdb/onlinedocs/gdb/Convenience-Vars.html)，例如[`$_siginfo`](https://sourceware.org/gdb/onlinedocs/gdb/Signals.html#extra-signal-information)信号的原因。

特别有趣的是`$_siginfo.si_code`，它的值取决于传递的信号。[sigaction(2)](http://man7.org/linux/man-pages/man2/sigaction.2.html) Linux 手册页描述了确切的关系。您可以通过编译程序或查看标头（在我的系统上使用标头）来找到这些`SI_USER`,等代码的数值。我遇到的一些价值观是：`SI_KERNEL``/usr/include/bits/siginfo.h`

*   0x00 (0):`SI_USER`
*   0x80 (128):`SI_KERNEL`
*   0x02 (2):`TRAP_TRACE`

有了这些信息，下面是一个捕获 SIGTRAP 并打印原因的示例，然后继续：

```
catch signal SIGTRAP
commands
 p $_siginfo.si_code
 c
end
# Set another breakpoint for testing
break sleep 
```

现在考虑这个休眠 5 秒的测试程序，然后在 x86(-64) 上触发调试陷阱：

```
#include <unistd.h>
int main(void) {
    for (;;) {
        sleep(5);
        asm("int3");
    }
    return 0;
} 
```

该程序一直停`gdb`在该`int3`行，因为信号被捕获（`si_code`恰好是 0x80, `SI_KERNEL`），但随后再次重复该指令。因此，要跳过这条指令，程序计数器 ( `$pc`) 必须递增。这样做之后，我了解了有关`SIGTRAP`and的信息`si_code`：

*   断点使用代码 128 ( ) 触发 SIGTRAP `SI_KERNEL`。
*   继续断点后，将`TRAP_TRACE`收到代码为 2 ( ) 的 SIGTRAP（因为 的捕获点`SIGTRAP`）。
*   该`int3`指令使用代码 128 触发 SIGTRAP。因此，您需要一些东西来区分指令。

以下是最终的 GDB 命令，它们跳过了`int3`陷阱并仍然保持断点功能：

```
catch signal SIGTRAP
commands
 silent # do not print catchpoint hits
 # ignore the int3 instruction (this address was looked up at
 # the tracepoint using print $pc)
 if $pc == 0x400568
  set $pc++ # skip int3
  c
 end
 # Ignore TRAP_TRACE that is used for breakpoints
 if $_siginfo.si_code == 2
  c
 end
end 
```

最后一点： SIGTRAP 由调试器内部使用，上述内容可能会捕获太多。这是在 Arch Linux 上使用 GDB 7.10 测试的。

# java - 非空参数的方法引用？

> ID：15667804
> 
> 赞同：13
> 
> 时间：2013-03-27T19:32:20.293
> 
> 标签：java, lambda, java-8

我正在阅读有关[Java 8 特性](http://www.techempower.com/blog/2013/03/26/everything-about-java-8/)的信息，并且看到它们具有方法引用，但我没有看到在方法重载时如何指定哪个方法。有人知道吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-27T20:01:38.167

编译器会将方法签名与功能接口匹配。

```
Integer foo(){...}

Integer foo(Number x){...}

Supplier<Number>          f1 = this::foo;  // ()->Number, matching the 1st foo

Function<Integer, Number> f2 = this::foo;  // Int->Number, matching the 2nd foo 
```

本质上，`f2`是可以接受 a`Integer`并返回 a`Number`的东西，编译器可以发现 2nd`foo()`满足要求。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-27T20:03:25.490

从[这个 Lambda 常见问题解答](http://www.lambdafaq.org/)：

> **可以在哪里使用 lambda 表达式？**
> 
> *   方法或构造函数参数，其目标类型是相应参数的类型。如果方法或构造函数被重载，则在 lambda 表达式与目标类型匹配之前使用通常的重载解析机制。（在重载决议之后，可能仍有多个匹配方法或构造函数签名接受具有相同功能描述符的不同功能接口。在这种情况下，必须将 lambda 表达式转换为这些功能接口之一的类型）；
>     
>     
> *   转换表达式，显式提供目标类型。例如：

```
Object o = () -> { System.out.println("hi"); };       // Illegal: could be Runnable or Callable (amongst others)
Object o = (Runnable) () -> { System.out.println("hi"); };    // Legal because disambiguated 
```

因此，如果存在模棱两可的签名，则需要强制转换它。

# sass - 使用 Compass sprite 进行缓存破坏

> ID：15667808
> 
> 赞同：0
> 
> 时间：2013-03-27T19:32:27.543
> 
> 标签：sass, compass-sass

我正在对指南针中的图像使用缓存破坏：

```
asset_cache_buster do |http_path, real_path|
  if File.exists?(real_path)
    hash = Digest::MD5.file(real_path.path).hexdigest
    "v=%s" % hash[0,5]
  end
end 
```

使用`image_url()`将附加`v`.

如何使用精灵完成相同的行为？：

```
@import '../images/navbar/*.png';
@include navbar-sprite; 
```

我试过了，但抛出了罗盘语法错误：

```
@import image-url('../images/navbar/*.png'); 
```

我能做些什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T19:46:10.403

罗盘精灵的默认行为几乎是这样，除了它改变文件的名称，而不是改变查询字符串。检查文件系统和/或输出 css。您没有看到带有类似 url 的生成图像`/images/navbar-s34fe0604ab.png`吗？只要里面的任何文件发生更改，该名称就会`/images/navbar/`更改。

# android - 简单的 Listview emulator-5554 空错误

> ID：15667809
> 
> 赞同：0
> 
> 时间：2013-03-27T19:32:30.943
> 
> 标签：android, listview

当我单击列表视图时，我希望将文本值更改为列表视图值。我不能这样做。请帮我。

activity_main.xml

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:id="@+id/LinearLayout1"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical"
    tools:context=".MainActivity" >

    <ListView
        android:id="@+id/listvalue"
        android:layout_width="160dp"
        android:layout_weight="0.02"
        android:text="@string/listval" />
    <TextView 
        android:id="@id/textvalue"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="@string/txtval" />
   <Button
        android:id="@+id/stopBtn"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="@string/stopBtn" />

</LinearLayout> 
```

MainActivity.java

```
public class MainActivity extends ListActivity {

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        String[] songlist={"Green","Yellow","Black","White","Red"};
        ArrayAdapter<String> adapter = new ArrayAdapter<String>this,R.layout.activity_main, R.id.txtvalue, songlist);

        setListAdapter(adapter);
    }

    @Override
    protected void onListItemClick(ListView l, View v, int position, long id) {
        String item = (String) getListAdapter().getItem(position);
        Toast.makeText(this, item + " selected", Toast.LENGTH_LONG).show();
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T19:41:53.463

您没有获得 TextView 并设置值。

```
@Override
protected void onListItemClick(ListView l, View v, int position, long id) {
    String item = (String) getListAdapter().getItem(position);
    Toast.makeText(this, item + " selected", Toast.LENGTH_LONG).show();
    TextView tv = (TextView) findViewById(R.id.textvalue);
    tv.setText(item);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T08:50:19.243

只需使用以下代码：

```
public class MainActivity extends ListActivity {

            String[] songlist={"Green","Yellow","Black","White","Red"};
            TextView tv;

            @Override
            public void onCreate(Bundle savedInstanceState) {
                super.onCreate(savedInstanceState);
                setContentView(R.layout.activity_main);
                tv = (TextView) findViewById(R.id.textvalue);
                //String[] songlist={"Green","Yellow","Black","White","Red"};
                ArrayAdapter<String> adapter = new ArrayAdapter<String>(this,android.R.Layout.simple_list_item_1, songlist);

               setListAdapter(adapter);
        }

          @Override
          protected void onListItemClick(ListView l, View v, int position, long id) {
          String item  = songlist[position];
          Toast.makeText(this, item + " selected", Toast.LENGTH_LONG).show();

          tv.setText(item);
         }
    } 
```

在布局文件中：将此行替换`android:id="@id/textvalue"`为此`android:id="@+id/textvalue"`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-28T08:51:51.943

试试这个

```
ListView listView=getListView();
        setListAdapter(adapter);

        listView.setOnItemClickListener(new OnItemClickListener() {
            public void onItemClick(AdapterView<?> parent, View view,
                    int position, long id) {
                String item = (String) getListAdapter().getItem(position);
        Toast.makeText(this, item + " selected", Toast.LENGTH_LONG).show();
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-28T10:01:09.537

你必须更换这个。

```
<TextView 
        android:id="@id/textvalue"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="@string/txtval" />

ArrayAdapter<String> adapter = new ArrayAdapter<String>(this,R.layout.activity_main, R.id.txtvalue, songlist); 
```

一些有用的链接。

[http://windrealm.org/tutorials/android/android-listview.php](http://windrealm.org/tutorials/android/android-listview.php)

[http://androidtrainningcenter.blogspot.in/2012/09/simple-listview-example-in-android.html](http://androidtrainningcenter.blogspot.in/2012/09/simple-listview-example-in-android.html)

如果您发现任何问题，请告诉我。

# c# - 我如何首先单击更改按钮图像，然后单击显示预览图像（按钮的第一个图像）？

> ID：15667817
> 
> 赞同：1
> 
> 时间：2013-03-27T19:32:47.310
> 
> 标签：c#, winforms

如何第一次单击更改按钮图像并第二次单击显示预览图像（按钮的第一个图像）？例如：第一个按钮图像 = 图像 1 第二个按钮图像 = 图像 2

首先单击将图像按钮更改为 image2，然后单击更改为图像 1。

按钮的默认图像是 image1。

什么是鼠标事件？

鼠标按下和？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T19:37:09.657

```
 int ImageNum = 1;

    private void button1_MouseDown(object sender, MouseEventArgs e)
    {
        if (ImageNum == 1)
        {
            button1.Image = Image2;
            ImageNum = 2;
        }
        else
        {
            button1.Image = Image1;
            ImageNum = 1;
        }
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-27T19:40:03.987

检查按钮的图像是否等于Image1，如果是，则将其更改为image2，如果不是，则将其更改为image1。

```
button1.Image = button1.Image == Image2 || button1.Image == null ? Image1 : Image2; 
```

这可以放在`Click`事件或`MouseClick`事件中，两者都会有相同的结果。

# mysql - 选择最大日期的总和

> ID：15667820
> 
> 赞同：1
> 
> 时间：2013-03-27T19:32:50.573
> 
> 标签：mysql

我有一些网站收集分析数据，每个网站都有每个国家/地区的数据，并非所有网站每个月都会获得数据。

我想在最后一组数据（可能不同的日期）中获取所有站点的访问总和。

我不能在 where 子句中使用 MAX() ，因为那是无效的。

我尝试将最后一个日期存储为变量，但这不起作用：

```
select sites.id, sites.name, SUM(data.visits), @start := MAX(data.start_date)
inner join data on data.profile_id = sites.profile_id
where data.start_date = @start
group by sites.profile_id 
```

我也玩过子查询，但还没有完全正确。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-27T19:38:17.923

使用子查询获取最大日期并将其加入：

```
select sites.id, sites.name, SUM(data.visits), dp.maxdate
from sites inner join
     data
     on data.profile_id = sites.profile_id inner join
     (select profile_id, MAX(start_date) as maxdate
      from data
      group by profile_id
     ) dp
     on data.profile_id = dp.profile_id and data.start_date = dp.maxdate
group by sites.profile_id, sites.name, dp.maxdate 
```

# spring - spring-security.xml 声明奇怪的行为

> ID：15667821
> 
> 赞同：0
> 
> 时间：2013-03-27T19:32:58.493
> 
> 标签：spring, security, applicationcontext

所以如果我这样做：

```
<servlet>
    <servlet-name>spring</servlet-name>
    <servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>
    <init-param>
        <param-name>contextConfigLocation</param-name>
        <param-value>/WEB-INF/applicationContext.xml,/WEB-INF/spring-security.xml</param-value>
    </init-param>
    <load-on-startup>1</load-on-startup>
</servlet>
<servlet-mapping>
    <servlet-name>spring</servlet-name>
    <url-pattern>/</url-pattern>
</servlet-mapping> 
```

我得到没有定义名为“springSecurityFilterChain”的bean的异常

如果我这样做：

```
<context-param>
    <param-name>contextConfigLocation</param-name>
    <param-value>/WEB-INF/applicationContext.xml,/WEB-INF/spring-security.xml</param-value>
</context-param>

<servlet>
    <servlet-name>spring</servlet-name>
    <servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>
    <load-on-startup>1</load-on-startup>
</servlet>
<servlet-mapping>
    <servlet-name>spring</servlet-name>
    <url-pattern>/</url-pattern>
</servlet-mapping> 
```

我得到了 /WEB-INF/spring-servlet.xml 找不到或无法打开的异常。

然而它的工作原理是这样的：

```
<context-param>
    <param-name>contextConfigLocation</param-name>
    <param-value>/WEB-INF/spring-security.xml</param-value>
</context-param>

<servlet>
    <servlet-name>spring</servlet-name>
    <servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>
    <init-param>
        <param-name>contextConfigLocation</param-name>
        <param-value>/WEB-INF/applicationContext.xml</param-value>
    </init-param>
    <load-on-startup>1</load-on-startup>
</servlet>
<servlet-mapping>
    <servlet-name>spring</servlet-name>
    <url-pattern>/</url-pattern>
</servlet-mapping> 
```

那么为什么我不能在标签中同时指定两者呢？我错过了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T20:54:30.193

您遇到的第一个异常可能是因为您忘记指定 spring 安全过滤器。

```
<filter>
    <filter-name>springSecurityFilterChain</filter-name>
    <filter-class>org.springframework.web.filter.DelegatingFilterProxy</filter-class>
</filter>
<filter-mapping>
    <filter-name>springSecurityFilterChain</filter-name>
    <url-pattern>/*</url-pattern>
</filter-mapping> 
```

您确定您的其他示例正在运行（即使它们开始时没有例外）？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-30T21:03:20.177

在第一个示例中，您正在为调度程序 servlet 定义 bean，仅此而已（没有 Spring Security 可以访问的根应用程序上下文）。您应该使用 ContextLoaderListner 并将您的 Spring XML 文件添加为上下文参数。

在第二个示例中，您没有提及任何 XML，然后 Dispatcher servlet 回退到不存在的默认 XML。

在第三个示例中，您将一些 bean 定义为根应用程序上下文，并将一些 bean 定义为调度程序 servlet bean（您提到了一个 XML 名称，因此它不会回退到默认名称）。

# html - REST 数据源绑定 Listview 中的嵌套 REST 调用

> ID：15667823
> 
> 赞同：1
> 
> 时间：2013-03-27T19:33:01.670
> 
> 标签：html, rest, xmlhttprequest, windows-store-apps, winjs

我有一个 Windows 8 JavaScript 应用程序，其中我将一个 VirtualDataSource 从 RESTful 服务中检索产品绑定到一个 Listview。

//当用户滚动时获取数据 itemsFromIndex: function (requestIndex, countBefore, countAfter) {

```
 return WinJS.xhr(options).then(
                //Callback for success
                function (request) {
                    var results = [], count;
                    console.log("request.responseText: " + request.responseText);
                    // Use the JSON parser on the results, safer than eval
                    var obj = JSON.parse(request.responseText);

                    console.log("obj: " + obj);

                    // Verify if the service has returned images
                    if (obj.length > 0) {
                        var items = obj;
                        console.log("returned items: " + items.length);
                        console.log("returned items: " +items[0].productid);
                        // Data adapter results needs an array of items of the shape:
                        // items =[{ key: key1, data : { field1: value, field2: value, ... }}, { key: key2, data : {...}}, ...];
                        // Form the array of results objects
                        for (var i = 0, itemsLength = items.length; i < itemsLength; i++) {
                            var dataItem = items[i];
                            var text = "aaa";
                            **var a = fetchPrice(dataItem.productid);**
                            console.log("shortText = " + a.text);
                            results.push({
                                key: (fetchIndex + i).toString(),
                                data: {
                                    productId: dataItem.productid,
                                    price: a
                                }
                            });
                        } 
```

到目前为止一切顺利... 现在麻烦... 一旦我检索了所有产品，我需要通过调用另一个 web 服务来显示例如产品的价格，但在同一个列表视图模板中。解决这个问题的最佳方法是什么？如您所见，我已经添加了类似 fetchPrice 的代码，这是另一个 WinJS.xhr 调用。有没有更好的方法来做到这一点？我可以将价格 html 元素绑定到仅在运行时可用的 productid 吗？

请帮忙！

谢谢，托马斯

--

实际上现在更进一步：

```
 var obj = JSON.parse(request.responseText);

                    console.log("obj: " + obj);

                    // Verify if the service has returned images
                    if (obj.length > 0) {
                        var items = obj;
                        console.log("returned items: " + items.length);
                        console.log("returned items: " + items[0].productid);
                        var priceText;
                        that.getPriceText(items[0].productid).done(function (b) { priceText = b; console.log("in function : " + priceText); });
                        console.log("priceText is " + priceText);
                        // console.log("var b = " + b.isPrototypeOf);
                        // Data adapter results needs an array of items of the shape:
                        // items =[{ key: key1, data : { field1: value, field2: value, ... }}, { key: key2, data : {...}}, ...];
                        // Form the array of results objects
                        for (var i = 0, itemsLength = items.length; i < itemsLength; i++) {
                            var dataItem = items[i];

                            results.push({
                                key: (fetchIndex + i).toString(),
                                data: {
                                    productId: dataItem.productid,
                                    price: priceText
                                }
                            });
                        } 
```

第二行的控制台输出 console.log (console.log("priceTextis " + priceText)) 返回 undefined: 这是意料之中的，因为 priceText 异步调用尚未完成。

异步调用的 .done 函数中的 priceText 输出正确输出到控制台。（行阅读（“在函数中：”等）

如何将异步调用的值直接传递到将项目推送到返回数组的行中的价格字段？我已经尝试将价格设置为 .done Promise 返回值：

价格：that.getPriceText(items[0].productid).done(function (b) { return b; })

但是，在我的 WebApp 中，价格仍然是“未定义的”，我假设是因为第一个承诺返回所有已完成的项目并显示所有结果。这实际上是我想要的：显示所有产品详细信息，然后异步检索价格。谁能建议实现这一目标的最佳方法？

谢谢！

# javascript - 选择值 on 和 off 时图像不显示

> ID：15667824
> 
> 赞同：0
> 
> 时间：2013-03-27T19:33:02.390
> 
> 标签：javascript, jquery, jquery-ui, javascript-events

我正在创建两组单选按钮，它们的值都打开和关闭......

当按钮位于 ON Accessories 和 ON Panels 时，我遇到了代码问题，然后用户关闭了配件......图像没有改变......

这是JS

```
 var oneOn = $('input:radio[name=one]:checked').val();
  var twoOn = $('input:radio[name=two]:checked').val(); 
  var oneOff = $('input:radio[name=one]:checked').val();
  var twoOff = $('input:radio[name=two]:checked').val();

  $('.radioButton').click(function(e){
   fixButtons(this, selected);
   var selected = $(this).val();
   var oneOn = $('input:radio[name=one]:checked').val();
   var twoOn = $('input:radio[name=two]:checked').val();
   var oneOff = $('input:radio[name=one]:checked').val();
   var twoOff = $('input:radio[name=two]:checked').val();
 if(oneOn === 'on' && twoOn === 'on1') {
  $('.aon_pon').fadeIn('slow');
   }
else if(oneOff === 'off' && twoOff === 'off1'){
  $('.main-img').fadeOut('slow');
}

else if(selected === 'on') {
  $('.aon_poff').fadeIn('slow');
 }
else if(selected === 'off') {
  $('.aon_poff').fadeOut('slow');
}
else if(selected === 'on1') {
  $('.aoff_pon').fadeIn('slow');
}

else if(selected === 'off1'){
  $('.aoff_pon').fadeOut('slow');
}    
 });

 $(":radio[name='one']").attr('checked', true);
 $(":radio[name='two']").attr('checked', true); 
```

这是小提琴

[http://jsfiddle.net/d0okie0612/m43EQ/](http://jsfiddle.net/d0okie0612/m43EQ/)

我认为我的问题可能与 z-index 有关，但我尝试过 addign .css('z-index', '1000') 以及 css 但这并不能解决问题......

任何帮助将不胜感激谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T19:35:34.867

您应该使用[`.prop()`](http://api.jquery.com/prop)来切换单选按钮的实际选择状态：

```
$(":radio[name=one][value=on]").prop('checked', true); 
```

同样，要检查单选按钮的实际开/关状态：

```
var oneOn = $('input:radio[name=one][value=on]').prop('checked'); // true or false 
```

# php - 没有显示真实图片

> ID：15667827
> 
> 赞同：-1
> 
> 时间：2013-03-27T19:33:06.543
> 
> 标签：php, jquery, mysqli

我已经建立了一个灯箱来展示我的大图像。我有 4 张图像，但是当我单击数字 1 时，它会显示数字 2，当我单击数字 2 时，它也会显示数字 2。换句话说，它只会显示数字 2 的图像，而不会显示其他图像。

jQuery在这里：

```
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
    <script type="text/javascript">

        $(document).ready(function(){

            $('.lightbox').click(function(){
                $('.backdrop, .box').animate({'opacity':'.50'}, 300, 'linear');
                $('.box').animate({'opacity':'1.00'}, 300, 'linear');
                $('.backdrop, .box').css('display', 'block');
            });

            $('.close').click(function(){
                close_box();
            });

            $('.backdrop').click(function(){
                close_box();
            });

        });

        function close_box()
        {
            $('.backdrop, .box').animate({'opacity':'0'}, 300, 'linear', function(){
                $('.backdrop, .box').css('display', 'none');
            });
        }

    </script> 
```

当我想看到我的照片时，我喜欢这样只看到它们：

```
function gallery()
    {
        if ($stmt = $this->mysqli->prepare('SELECT `rank`, `img`, `navn` FROM `gallery`')) { 
            $stmt->execute();

            /* Bind resultatet */
            $stmt->bind_result($rank, $img, $navn);

            /* Hent rækker og udskriv data */
            while ($stmt->fetch()) {
            if($rank != 1)
            {
            ?>
            <a href="#" class="lightbox"><img src="/indhold/gallery/<?php echo $img;?>" alt="<?php echo $navn;?>"></a>

            <div class="backdrop"></div>
            <div class="box"><div class="close">x</div><img src="/indhold/gallery/index/<?php echo $img;?>" alt="<?php echo $navn;?>"></div>
            <?php
            }
            }

            /* Luk statement */
            $stmt->close();

        } else {
            /* Der er opstået en fejl */
            echo 'Der opstod en fejl i erklæringen: ' . $this->mysqli->error;
        }   
        }
.backdrop {
    position: absolute;
    top: 0px;
    left: 0px;
    width: 100%;
    height: 100%;
    background: #000;
    opacity: .0;
    filter: alpha(opacity= 0);
    z-index: 50;
    display: none;
}
.box {
    position: absolute;
    top: 20%;
    left: 30%;
    height: 175px;
    width: 370px;
    background: #fff;
    z-index: 51;
    padding: 10px;
    display: none;
}
.close
{
    float: right;
    margin-right: 10px;
    margin-bottom: 20px;
    cursor: pointer;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T20:33:47.187

对不起，伙计，看了你的网站后，我不知道你到底想做什么。我会使用 jQuery 的内置对话框或获取灯箱插件。或者只是下载一个免费的图片库（在谷歌搜索“免费 jquery 图片库”）。那会容易很多。:)

# javascript - ReferenceError: 函数未在 onclick 函数上定义

> ID：15667835
> 
> 赞同：1
> 
> 时间：2013-03-27T19:33:20.803
> 
> 标签：javascript, jquery, asp.net, html

我得到一个“ReferenceError: punt is not defined”——一切似乎都是正确的，我无法识别错误。

以下是相关代码：

```
<script src="../Scripts/jquery-1.9.1.min.js" type="text/javascript">

 function punt(rowIndex, Name, actionType) {
            alert("hello");
        }

</script> 
```

在中继器的 ItemTemplate 中，我有：

```
<input type="image" style="border-width:0" src='<%=ResolveUrl("~/css/images/icon_update.png") %>'  
                                         alt="Update Reviewer List" tabindex="0" title="Update Reviewer List"  
                                         onclick="punt(<%#Container.ItemIndex%>,  
                                                      '<%#HttpUtility.HtmlEncode((string)DataBinder.Eval(Container.DataItem, "Name"))%>', 
                                                      'Update');
                        return false;" /> 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-27T19:36:05.070

您不能将脚本包含和内联 javascript 结合起来。

```
<script src="../Scripts/jquery-1.9.1.min.js" type="text/javascript"></script>
<script>
    function punt(rowIndex, Name, actionType) {
        alert("hello");
    }
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T19:38:13.430

包含外部脚本的脚本标签应与定义新函数的脚本标签分开，即：

```
<!-- first script tag -->
<script src="jquery"></script>

<!-- second script tag -->
<script>
 // punt function
</script> 
```

# html - div 警报时屏幕变暗

> ID：15667837
> 
> 赞同：1
> 
> 时间：2013-03-27T19:33:22.673
> 
> 标签：html, css

当弹出警报框触发时，我有以下 html div 和 css。我希望它周围的其余屏幕变暗，但 CSS 不起作用。

我们可以只使用 css 使聚焦 div 周围的屏幕变暗吗？

```
.dim {
    height:100%;
    width:100%;
    position:fixed;
    left:0;
    top:0;
    z-index:1 !important;
    background-color:black;
    filter: alpha(opacity=75); /* internet explorer */
    -khtml-opacity: 0.75;      /* khtml, old safari */
      -moz-opacity: 0.75;      /* mozilla, netscape */
           opacity: 0.75;      /* fx, safari, opera */
} 
```

```
<div class="dim" id="dialog" title="Event">
  <p>
      This is the default dialog which is useful for displaying information. 
      The dialog window can be moved, resized and closed with the 'x' icon.
  </p>
</div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T19:49:48.593

不完全理解您的问题，但我认为您正在寻找一个简单的“灯箱”效果。

您需要两个单独的 DIV。第一个看起来与您上面的 CSS 代码相似，并覆盖了正常的网站。第二个 DIV 用于您的消息（或内容）。诀窍是，第二个 div 的 z-index 高于 overlay-div 的 z-index。

**HTML：**

```
<p>Normal Website content</p>
<p>Normal Website content</p>
<p>Normal Website content</p>
<p>Normal Website content</p>
<p>Normal Website content</p>
<p>Normal Website content</p>

<!-- The first DIV for creating an Overlay -->
<div class="dim"  title="Event">
</div>  

<!-- The second div. Note, that the wrapper is only need to center the real dialog div -->
<div class="dialog_wrapper">
    <div class="dialog">Dialog Window</div>
</div> 
```

**CSS：**

```
.dim {
    height:100%;
    width:100%;
    position:fixed;
    left:0;
    top:0;
    z-index:1 !important;
    background-color:black;
    filter: alpha(opacity=75); /* internet explorer */
    -khtml-opacity: 0.75;      /* khtml, old safari */
      -moz-opacity: 0.75;      /* mozilla, netscape */
           opacity: 0.75;      /* fx, safari, opera */
}
.dialog_wrapper {
    width: 100%;
    top: 0px;
    left: 0px;
    position: absolute;
    z-index: 5;
    display: block;
}
.dialog {
    width: 400px;
    height: 400px;
    margin: 0 auto;
    padding: 40px;
    background-color: #fff;
    border: 1px solid #ccc;
    color: #333;
} 
```

仅当您想在屏幕中心对齐对话框 div 时才需要 Wrapper。

### [jsFiddle 中的演示](http://jsfiddle.net/5pqft/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T19:49:53.267

为背景创建一个单独的 div 并将 z-index 更改为 -1。

```
<div class="dim"></div>
<div id="dialog" title="Event">
  <p>This is the default dialog which is useful for displaying information. 
  The dialog window can be moved, resized and closed with the 'x' icon.</p>
</div> 
```

# iphone - CFWriteStreamCanAcceptBytes 阻塞

> ID：15667838
> 
> 赞同：1
> 
> 时间：2013-03-27T19:33:23.270
> 
> 标签：iphone, objective-c, macos, networking, bonjour

我创建了一个程序，它可以成功地将一张图像从我的 iPhone 发送到我的 Mac。问题是一旦完成发送，我想发送一些其他数据（确切地说是无关紧要的）。每当我尝试发送数据时，都会被以下行阻止：

```
if ( !CFWriteStreamCanAcceptBytes((CFWriteStreamRef)_outputStream) ) {
    NSLog(@"FAILED ErrorCode:2 saveAsWallpaper in server.m");
    return;
} 
```

我不关闭任何流或任何类似的东西。我认为问题可能出在以下行：

```
CFWriteStreamSetProperty(writeStream,kCFStreamPropertyShouldCloseNativeSocket,
                                     kCFBooleanFalse); 
```

但这应该可以防止套接字关闭。如果需要，我可以提供更多代码，但我希望在正确的方向上提供更多的指针而不是解决方案。

欢迎任何帮助，谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T19:50:11.450

新 iPhone5 上的该方法似乎存在错误（或至少不一致）。相同的 CFWriteStreamCanAcceptBytes 在 iPhone 3GS 上完美运行，但在 iPhone5 上却不行。

到目前为止，我发现的唯一解决方案不再使用`CFWriteStreamCanAcceptBytes`，只是写了 - 这很好用。

唯一的问题是，一旦连接丢失并且您仍然写入，超时大约需要 20-30 秒。

第一次处理这个问题时，您可以使用在另一个任务中执行写入`performSelectorInBackground`并检查是否花费了太长时间才能返回，然后您可以确定连接丢失并设置您自己的标志，该标志可用作看门人后续调用 write。

但在 99% 的情况下，它工作正常，因为连接正常。

我尝试了许多替代方案，但是`write`一旦开始执行就无法停止执行 - 所以这就是我使用`performSelectorInBackground`.

即使是应该在 5 秒内执行的计时器也必须等待，因为没有成功的写入需要时间并且根本不接受任何中断。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-31T13:40:41.770

所以事实证明，关闭 ARC 以某种方式有所帮助。像这样的行无法正常工作（因为从外观上看它需要手动内存管理）：

```
if (kCFSocketSuccess != CFSocketSetAddress(_socket, (CFDataRef)CFBridgingRetain(address4))) { 
```

请注意“保留”一词。

不是每个人的解决方案，但关闭 ARC 然后自己管理泄漏让我的项目一切正常。

# git - github推送来源

> ID：15667847
> 
> 赞同：-1
> 
> 时间：2013-03-27T19:33:53.323
> 
> 标签：git, github, git-push

我在将一些更改推送到 GitHub 上的分支时遇到了一些麻烦。我对 Git 很陌生，我确信要么我做了一些愚蠢的事情，要么我错过了明显的东西，但我看不出是什么。

我对我的一个 repos（实际上是 GitHub 上的一个 fork）进行了全新克隆，然后切换到现有分支，进行了一些更改并提交了它们。我想要的只是将它们推回 GitHub。但是“git push”说“一切都是最新的”，尽管“git status”说我的本地分支比原点的分支领先一个提交：

```
> git checkout -b mystuff origin/newstuff
Switched to a new branch 'mystuff'

> echo "Make some changes..." >> file.txt

> git commit -m "Change." file.txt
[...]

> git status
# On branch mystuff
# Your branch is ahead of 'origin/newstuff' by 1 commit.
#
nothing to commit (working directory clean)

> git push
Everything up-to-date 
```

知道我错过了什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T19:36:50.507

```
git push origin mystuff 
```

只会`git push`推送默认分支，通常设置为`master`.

额外提示：`-u`选项`git push`将设置一个新的默认分支，所以如果你运行

```
git push -u origin mystuff 
```

您随后可以直接执行`git push`并继续，`mystuff`而无需再指定分支。

# ios - AS3 for ios：如何序列化数组然后保存

> ID：15667848
> 
> 赞同：0
> 
> 时间：2013-03-27T19:34:01.590
> 
> 标签：ios, json, actionscript-3

我有一个多维数组，我想对其进行序列化，然后使用 SharedObjects 保存它。我尝试了很多东西，但每次都有问题。

JSON：不能有类型。

ByteArray ：结果不是字符串，则 SharedObject 不想保存它。

可能是 SharedObjects 不是解决方案的一部分。

所以我的问题：是否有一个简单的解决方案可以将数组保存在磁盘上并检索该数组？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T19:48:07.783

你需要使用`flash.net.registerClassAlias`.

所以如果我有这样的课：

```
package com {
    public class Bob {
        public var myArray:Array;
    }
} 
```

我可以这样做：

```
registerClassAlias("com.Bob", Bob); 
```

然后您可以将 Bob 类对象保存到您的共享对象中（或者再次检索它们）

完整示例：

```
//register the class - you only need to do this once in your class
registerClassAlias("com.Bob", Bob); 
```

* * *

```
//Lets save a Bob instance into a shared object
var bob:Bob = new Bob();
bob.myArray = ["blah","blah","blah"];

var bobSO:SharedObject = SharedObject.getLocal("Bob");          
bobSO.data.bob = new Bob();
bobSO.flush(); 
```

* * *

```
//now at a later time, let's retrieve it
var bobInstance:Bob;
var bobSO:SharedObject = SharedObject.getLocal("Bob");
if (bobSO.size > 0 && bobSO.data.bob && bobSO.data.bob != undefined) {
    bobInstance = bobSO.data.bob;
} 
```

请记住，您需要注册所有使用的类（如果您的数组中存储了不同的类）。

# unix - 区分目录 a 和 b。仅显示 b 中的文件，而不显示 a 中的文件

> ID：15667851
> 
> 赞同：6
> 
> 时间：2013-03-27T19:34:07.107
> 
> 标签：unix, diff

标题总结了我的问题。给定目录 a 和 b，我希望能够生成 b 中但不在 a 中的文件列表。

一个普通的差异会这样做，但它也会显示 a 中的文件，而不是 b 中的文件：

```
$ diff -u /mnt/Media/a ~/b    
Only in /mnt/Media/a: abab
Only in /home/conor/b: blah 
```

我还希望 diff 仅列出文件名 - 没有“仅在 ..”中的东西

谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-27T19:38:53.273

## 试试这个

拿起其中之一：

```
$ LANG=C diff -qr a b | awk -F"Only in b: " '/^Only in b:/{print $2}' 
```

或者

```
$ LANG=C diff -qr a b | grep -oP "^Only in b: \K.*" 
```

或者

```
$ LANG=C diff -qr a b | grep '^Only in b:' | cut -d: -f2- 
```

## 笔记

```
LANG=C 
```

只是为了避免以任何语言环境显示，但以英语显示。

## 文档

看[`man diff`](http://linux.die.net/man/1/diff)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-27T20:05:57.197

该`uniq`命令比您想象的更有用。考虑两个目录`dirA`和`dirB`：

```
% ls -R dirA dirB
dirA:
s1/ s2/

dirA/s1:
f2

dirA/s2:
f1  f2

dirB:
s1/ s2/

dirB/s1:
f1  f2

dirB/s2:
f1
% 
```

`s1/f1`中缺少文件，而中缺少`dirA`文件。`s2/f2``dirB`

创建两个目录的内容列表：

```
% (cd dirA; find . -type f >../listA)
% (cd dirB; find . -type f >../listB) 
```

现在找到*仅存*在于的行`listB`：

```
% cat listA listA listB | sort | uniq -u 
./s1/f1
% 
```

达达！

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-03-27T20:14:16.093

通常，当我必须这样做时，我会采用低技术：

```
cd ~/a
find . -type f | sort > ~/fooa
cd ~/b
find . -type f | sort > ~/foob
vimdiff ~/fooa ~/foob 
```

它让我可以改进结果。“哦，哎呀，我想从 ~/a 中排除 .svn 目录”，所以重新运行不带 .svn 目录的 ~/fooa 文件，然后重新比较。

# .htaccess - 如何使用“.htaccess”删除 index.html？

> ID：15667853
> 
> 赞同：0
> 
> 时间：2013-03-27T19:34:21.530
> 
> 标签：.htaccess

我想重定向这个链接：

```
domain/error/index.html 
```

至

```
domain/error/ 
```

我怎样才能做到这一点？

另一个问题：

我想删除此链接中的最后一个正斜杠：

```
domain/category.php?id=41/ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T19:50:19.663

[`mod_rewrite`](http://httpd.apache.org/docs/current/mod/mod_rewrite.html "mod_rewrite")只要您的 Apache 版本启用并包含它，您就可以使用 来完成这两件事。

[`Redirect`](http://httpd.apache.org/docs/2.2/mod/mod_alias.html#redirect "重定向")对于您的第一个问题，如果 index.html 最近更改为另一个位置，您可能需要查看指令。以下将是有效的：

```
Redirect    domain/error/index.html domain/error/ 
```

对于第二个问题，我会这样做：

```
RewriteRule    domain/category.php?id=(\d*)/ domain/category.php?id=$1 
```

两者的区别在于，`Redirect`客户端提交一个新的请求，同时`RewriteRule`会修改当前的请求。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T19:51:04.950

问题 1：使用 Apache 的 DirectoryIndex 指令：- [http://httpd.apache.org/docs/2.2/mod/mod_dir.html](http://httpd.apache.org/docs/2.2/mod/mod_dir.html)有可以剪切和粘贴的示例。

问题 2：看看[mod_rewrite: remove trailing slash (only one!)](https://stackoverflow.com/questions/3068091/mod-rewrite-remove-trailing-slash-only-one) and [Removing trailing slashes with mod rewrite？](https://stackoverflow.com/questions/1368276/removing-trailing-slashes-with-mod-rewrite)

# asp.net - Azure 和 ASP 身份验证

> ID：15667857
> 
> 赞同：0
> 
> 时间：2013-03-27T19:34:30.703
> 
> 标签：asp.net, .net, azure, console-application, database-migration

我正在转换要与 Azure 数据库一起使用的应用程序。不过，我在 ASP 会员方面遇到了一些问题。我找到了一些关于此的文章，但并不是我在做什么。

我现在遇到的问题是我正在使用 Migrator.NET 控制台应用程序进行数据库迁移。我的第一次迁移使用以下代码设置 ASP 成员资格部分。

```
// Install Membership and Roles to the database with the Asp.Net installer.
SqlConnectionStringBuilder connectionBuilder = new SqlConnectionStringBuilder(connection.ConnectionString);
SqlServices.Install(connectionBuilder.InitialCatalog, SqlFeatures.Membership | SqlFeatures.RoleManager, connection.ConnectionString); 
```

这会导致 InstallCommon.sql 错误。

我从另一篇文章中找到了这篇文章。

[http://www.hanselman.com/blog/IntroducingSystemWebProvidersASPNETUniversalProvidersForSessionMembershipRolesAndUserProfileOnSQLCompactAndSQLAzure.aspx](http://www.hanselman.com/blog/IntroducingSystemWebProvidersASPNETUniversalProvidersForSessionMembershipRolesAndUserProfileOnSQLCompactAndSQLAzure.aspx)

我安装了 Microsoft.AspNet.Providers 包，但这就是我卡住的地方。

现在我收到错误“尚未设置数据库连接字符串”。

我在 db.config 文件中设置了一个连接字符串，该文件在我添加新包之前有效。连接字符串现在需要放在其他地方吗？有没有更好的方法来解决这个问题？

# c# - log4net 上记录的信息太多

> ID：15667858
> 
> 赞同：0
> 
> 时间：2013-03-27T19:34:32.503
> 
> 标签：c#, logging, log4net

我有一些 mvc4 应用程序，我想在登录管理员用户时记录，当发生错误登录时，crud 操作等。现在一切正常，但我看不到森林中的树:) 记录了太多信息，所以我想删除除我在控制器中明确设置的信息以外的所有内容`log.Info("User is succ. login");`等。

```
2013-03-27 20:25:11,285 [40] INFO NHibernate.Cfg.XmlHbmBinding.Binder - mapping collection: Domain.Model.Property.Photos -> Photo
2013-03-27 20:25:11,285 [40] INFO NHibernate.Cfg.Configuration - processing one-to-one association property references
2013-03-27 20:25:11,285 [40] INFO NHibernate.Cfg.Configuration - processing foreign key constraints 
```

波纹管是这样的超过100行。

我在想这可能是我在 application_startup 设置了日志 xml 配置

```
 log4net.Config.XmlConfigurator.Configure(); 
```

并且 root appender 是这样注册的

```
<root>
      <level value="INFO" />
      <appender-ref ref="RollingFileAppender" />
</root> 
```

再说一遍，如何删除所有这些映射和其他信息，并使用 log.Info("some info"); 仅记录我的显式日志信息。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T19:37:11.773

您可以通过将conversionPattern 应用于appender 来指定记录哪些信息。

```
<appender name="FileAppender" type="log4net.Appender.FileAppender">
  <param name="File" value="C:\\Log\log.log"/>
  <param name="AppendToFile" value="true"/>
  <rollingStyle value="Size" />
  <maxSizeRollBackups value="0" />
  <maximumFileSize value="10MB" />
  <staticLogFileName value="true" />
  <layout type="log4net.Layout.PatternLayout">
    <param name="ConversionPattern" value="%date [%thread] %-5level %logger [%ndc] - %message%newline"/>
  </layout>
</appender> 
```

# macos - 在 Mac OS 上设置 Qt::WindowStaysOnTopHint 使 QDialog 停留在应用程序窗口上方

> ID：15667859
> 
> 赞同：3
> 
> 时间：2013-03-27T19:34:32.897
> 
> 标签：macos, qt, qt4

我有一个 Qt 应用程序（根据用户要求）应该保持在其他窗口之上。我通过在我的应用程序的 windowsFlags 中设置 Qt::WindowStaysOnTopHint 来实现这一点。

但是，每当我打开像 QFileDialog 这样的系统模式 QDialog 派生对话框时，这个对话框都会停留在我自己的应用程序下面。我现在可以尝试查找所有对话框并使用 Qt::WindowStaysOnTopHint 构建它们，但是

*   由于大量对话，这很乏味，
*   容易出错，如果我错过了一个，
*   对于某些对话框，这根本不起作用，例如，QColorDialog::getColor() 没有提供可以传递 WindowFlag 的接口。

环境是 Mac OS X Lion，Qt 4.8.1。

# 3g - 嗅探 802.11 和 3G 网络

> ID：15667860
> 
> 赞同：0
> 
> 时间：2013-03-27T19:34:43.060
> 
> 标签：3g, sniffing, 3g-network, wifi

我正在对 802.11 和 3G/GSM 网络进行一些实验。因此，我的机器必须“嗅探” wlan 和 3G 网络的流量。在无线局域网上，我想我可以通过使用wireshark 来管理它。但是，3G 网络我找不到任何嗅探器.. 也.. 我没有任何 3G 适配器。有人可以给我一些建议吗？

亲切的问候。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T13:48:45.963

如果没有适当的硬件，您将无法嗅探任何东西。获取 3G 适配器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-30T13:26:15.810

你需要一个 3G 调制解调器，看看[这个](http://www.ebay.in/itm/Huawei-E1732-3G-usb-modem-Data-Card-7-2Mbps-Unlocked-Idea-Net-Setter-Bill-/280770863669?pt=LH_DefaultDomain_203&hash=item415f3f6235#ht_4514wt_976)。但是，Sniffing 3G 中的问题是与基站通信的数据是加密的，你可以试试，但我不认为 Wireshark 示例可以嗅探 3G 数据！

# jquery - 在另一个 DIV 中查找子 Div ID 的值

> ID：15667861
> 
> 赞同：0
> 
> 时间：2013-03-27T19:34:50.383
> 
> 标签：jquery, children

我的 CMS HTML 页面中有一个 DIV 列表，我想知道子 DIV 的 ID 值。

例如，这里是 HTML :-

```
<div class="view" id="views_slideshow_cycle_div_resources-block_3">
  <div class="views-slideshow-cycle">
     <div class="content clearfix">
       <div class="field-item even">
         <div class="jwplayer-video">
            <div id="4ac1a678934a37fd58e86cf0a7d51c79_wrapper">
               <object></object></div> 
```

我需要知道的是class=jwplayer-video的DIV内部DIV的ID值，即“4ac1a678934a37fd58e86cf0a7d51c79_wrapper”

我试图做的是： -

```
$("#views_slideshow_cycle_div_resources-block_0").find(".jwplayer-video") 
```

甚至这个

```
$("#views_slideshow_cycle_div_resources-block_0").find(".jwplayer-video").attr("id") 
```

不幸的是，它没有帮助。

请提供任何帮助。

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-27T19:38:58.857

```
$("#views_slideshow_cycle_div_resources-block_3 .jwplayer-video div:first").attr("id"); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-27T19:38:51.017

试试这个

`$('#views_slideshow_cycle_div_resources-block_3').find('div.jwplayer-video').find('div').eq(0).attr('id');`

我为您的帮助创建了一个[jsfiddle](http://jsfiddle.net/yRVqE/)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-27T19:39:45.327

```
$("#views_slideshow_cycle_div_resources-block_3").find(".jwplayer-video").children().attr('id') 
```

**[jsFiddle 示例](http://jsfiddle.net/j08691/S6zFZ/)**

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-27T19:37:44.073

```
$("#views_slideshow_cycle_div_resources-block_0").find(".jwplayer-video").children().attr("id"); 
```

.jwplayer-video div 没有 ID。你必须更深入一步。

另请查看 HTML 和 jQuery 中的 Id

block_0 和 block_3

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-27T19:38:38.953

尝试

```
$(".jwplayer-video").children().attr("id") 
```

# c - 在表中实现字符串文字及其大小

> ID：15667863
> 
> 赞同：1
> 
> 时间：2013-03-27T19:35:18.647
> 
> 标签：c, arrays, string, sizeof, string-literals

我正在寻找最优雅的字符串文字实现，它们的大小在 C 中的表中。要点是我希望编译器在编译时计算 sizeof("Some String Literal")。

到目前为止，我可以想到以下两种可能性（见下面的代码）：

1.  键入选项 A 的两次字符串。这不是一个好的解决方案，因为如果有很多字符串并且必须更改字符串，则可能会出现键入错误。

2.  定义字符串文字，然后在表中使用这些文字，就像使用选项 B 一样

还是有更优雅的解决方案？

```
#define STR_OPTION_B "Option B"

typedef struct
{
    enum {
        OPTION_A,
        OPTION_B
    } optionIDs;
    char* pString;
    int sizeOfString;
}
tTableElement;

tTableElement table[] =
{
    { OPTION_A, "Option A", sizeof("Option A") },
    { OPTION_B, STR_OPTION_B, sizeof(STR_OPTION_B) }
}; 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-27T19:39:11.927

使用`#define`将字符串和字符串大小放入结构的宏。

```
#define STR_ENTRY(x) x, sizeof(x)
tTableElement table[] =
{
    { OPTION_A, STR_ENTRY("Option A") },
    { OPTION_B, STR_ENTRY("Option B") }
};
#undef STR_ENTRY 
```

这应该从字面上扩展为：

```
tTableElement table[] =
{
    { OPTION_A, "Option A", sizeof("Option A") },
    { OPTION_B, "Option B", sizeof("Option B") }
}; 
```

# validation - Symfony2 validatePropertyValue 为 UniqueEntity

> ID：15667868
> 
> 赞同：2
> 
> 时间：2013-03-27T19:35:38.743
> 
> 标签：validation, symfony

有没有办法在 symfony 验证器的单个属性值上验证 UniqueEntity？

```
# Acme\Resources\config\validation.yml
Acme\DemoBundle\Entity\User:
    constraints:
        - Symfony\Bridge\Doctrine\Validator\Constraints\UniqueEntity: { fields: username, message: This username is already taken}

    properties:
        username:
            - NotBlank: { message: You must provide a username} 
```

当我在用户注册表单上运行验证时，它运行良好，`NotBlank`然后检查`UniqueEntity`并报告违规行为。

但是，我还使用验证器对每个字段（作为用户类型）运行 ajax 验证，`validatePropertyValue`如下所示：

```
$violations = $this->validator->validatePropertyValue("Acme\DemoBundle\Entity\User", "username", $value);

var_dump($violations); 
```

只检查属性用户名约束。它从不检查`uniqueEntity`约束。

# knockout.js - 在提交到服务器之前清理淘汰 VM 项目

> ID：15667869
> 
> 赞同：0
> 
> 时间：2013-03-27T19:35:39.213
> 
> 标签：knockout.js

我对淘汰赛很陌生。但我想做的是在尝试将视图模型发送回服务器之前清理它。我有几个不想发回服务器的 ko.observable 和 ko.computed 字段（progress 和 entryType）

我有一个绑定到此事件的按钮。我首先根据其 id 在 vm 中查找该项目。删除不需要的字段是我遇到的麻烦。

```
 self.addTransaction = function(transaction) {

            var selected = ko.utils.arrayFirst(self.transactions(), function(currentTransaction) {
                return currentTransaction.id() == transaction.id();
            });

            if (selected) {
                    console.log(selected);

                var items = ko.toJS(selected);
                var mappedItems = ko.utils.arrayMap(items, function(item) {
                    delete item.progress && item.entryType;
                    return item;
                });
                console.log(JSON.stringify(ko.toJS(mappedItems), null, 2));
                //send to server                

            } 
        }; 
```

谁能指出我如何做到这一点的正确方向？

感谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T20:05:11.293

你应该看看[淘汰赛映射插件](http://knockoutjs.com/documentation/plugins-mapping.html)

它允许您在映射时指定要使用的映射，并且您可以告诉它忽略属性：

```
var mapping =
{
    'ignore': ["propertyToIgnore", "alsoIgnoreThis"]
};
var jsData = ko.mapping.toJS(viewModel, mapping); 
```

# javascript - 使用jsp读取从角度发送的json

> ID：15667871
> 
> 赞同：0
> 
> 时间：2013-03-27T19:36:00.920
> 
> 标签：javascript, ajax, json, jsp, angularjs

因此，在我的 Angular 应用程序中，我尝试使用 JSP 在服务器端处理保存。我遇到的问题是，当使用 Angular 的 $save 方法时，它将对象数据（我正在保存的对象）作为 JSON 对象发送，但不是以我习惯的任何方式发送。该对象无法通过 request.getParameter() 访问，并且在 firebug 中查看请求时，我可以看到它不发送 JSON 或具有任何参数。相反，它在“POST”部分发送 json 对象。我不太明白这里发生了什么。？？？

所以这是我到目前为止所知道的：

Angular 中帖子的默认 contentType 是“application/json”，因此如果您将其更改为“application/x-www-form-urlencoded;charset=utf-8”，您至少可以使用获取 json 对象的参数request.getParameter() （如果您还更改了 json 对象的传输方式）

但

这首先不是真正的问题，因为如果我使用 jQuery.ajax() 发出请求并将 contentType 设置为“application/json”，然后将 json 对象作为数据传递，那么我仍然会得到 json 对象属性作为参数，所以我可以使用 request.getParameter()，你只是没有在 url 中获取查询字符串。

SOOO，我的问题是：

1) Angular 发送数据的方式到底是怎么回事

2) 有什么方法可以在仍然能够使用 $resource $save 函数的同时更改它（更改 $http 的 contentType 在使用 $resource 方法时会产生一些不良影响），而且，最重要的是

3）**如果我不能改变它（或者即使我可以），你如何用它现在的工作方式解析JSP中的json数据。**

非常感谢您的帮助，我不敢相信我还找不到这方面的东西，我一直在寻找一段时间。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T21:32:53.267

好吧，如果有人想知道这个：

我仍然不明白为什么 angular 和 jquery “post” 方法在给它们相同的数据类型（“application/json”）时会表现不同，但据我所知，Angular 似乎使用 REST，我猜是 JQuery才不是？

至于如何解析服务器端的json，看这篇文章：[Retrieving JSON Object Literal from HttpServletRequest](https://stackoverflow.com/questions/1548782/retrieving-json-object-literal-from-httpservletrequest)

# c++ - 只有 2 个元素的元组是否有任何性能损失？

> ID：15667875
> 
> 赞同：0
> 
> 时间：2013-03-27T19:36:08.117
> 
> 标签：c++, tuples, std-pair

与pair相比，只有2个元素的元组有性能损失吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T20:45:20.040

`tuple`我非常怀疑您正在设计的任何系统都会因为您选择使用over而陷入停顿`pair`。事实上，如果编译器为一个 2 值元组生成的东西比它为一对（几乎）等价的对生成的东西多或少，我会感到非常惊讶。

我可以向您保证，如果您的应用程序停止运行并且您的 PC 开始崩溃 - 这不会是由于您选择了 tuple over pair，反之亦然。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-27T20:37:36.430

您必须对其进行概要分析。此外，为什么要冒着延长使用仅与两个元素一起使用的风险的风险。个人喜好是不够的。Pair 很容易与 Maps 一起使用，而 tuple 是它自己的集合。

# json - 从服务中读取 geoJSON

> ID：15667877
> 
> 赞同：0
> 
> 时间：2013-03-27T19:36:21.867
> 
> 标签：json, leaflet

我正在使用传单显示用户提交的点和多边形以显示多边形内提交的点的计数。

我与我们的系统分析师一起工作，他创建了一个服务，它将给我一个多边形的 json 对象。这是我到目前为止所拥有的，我可以访问数据并将其记录到控制台，但地图上没有显示任何内容

```
var testAreas = [];
$.getJSON("http://server/WildlifeServices/WildlifeMapStats.ashx",
    function(data){
        console.log(data);
        $.each(data.features,function(i,item){
            console.log(item.geometry.coordinates[0]);
            testAreas.push(L.MultiPolygon(item.geometry.coordinates[0]))
        });
    });
areaGroup = L.layerGroup(testAreas); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T19:59:47.217

`$.getJSON()`是异步的，这意味着脚本的执行将在调用 getJSON 之后继续执行，并且成功处理程序将在稍后加载 geoJSON 时调用。您的代码行：

```
areaGroup = L.layerGroup(testAreas); 
```

在加载 JSON 之前执行。尝试将该行（以及依赖于该行的任何其他行）放入您的成功处理程序中：

```
var testAreas = [];
$.getJSON("http://server/WildlifeServices/WildlifeMapStats.ashx",
    function(data){
        console.log(data);
        $.each(data.features,function(i,item){
            console.log(item.geometry.coordinates[0]);
            testAreas.push(L.MultiPolygon(item.geometry.coordinates[0]))
        });
        areaGroup = L.layerGroup(testAreas);
        //additional leaflet related code here
    }); 
```

# android - 我的应用在 Android 2.3 中崩溃，但在 4.0 中没有

> ID：15667878
> 
> 赞同：1
> 
> 时间：2013-03-27T19:36:26.193
> 
> 标签：android, android-4.0-ice-cream-sandwich, android-2.3-gingerbread

我的应用程序在 Android 2.3 上运行时崩溃，但在 Android 4.0 上运行完美。这发生在一个活动中：简单的文本视图，没有特定的库。为什么？我该如何解决这个问题？这是错误日志：

```
03-23 01:01:37.379: D/testService(2126): Sto per lanciare il servizio 
03-23 01:01:37.389: W/dalvikvm(2126): VFY: unable to resolve virtual method 4279: Lnet/simonvt/widget/BuildLayerFrameLayout;.setTranslationX (F)V
03-23 01:01:37.389: W/dalvikvm(2126): VFY: unable to resolve virtual method 4279: Lnet/simonvt/widget/BuildLayerFrameLayout;.setTranslationX (F)V
03-23 01:01:37.399: W/dalvikvm(2126): VFY: unable to resolve virtual method 4277: Lnet/simonvt/widget/BuildLayerFrameLayout;.setLayerType (ILandroid/graphics/Paint;)V
03-23 01:01:37.399: W/dalvikvm(2126): VFY: unable to resolve virtual method 2928: Landroid/view/ViewGroup;.postOnAnimation (Ljava/lang/Runnable;)V
03-23 01:01:37.399: W/dalvikvm(2126): VFY: unable to resolve virtual method 4277: Lnet/simonvt/widget/BuildLayerFrameLayout;.setLayerType (ILandroid/graphics/Paint;)V
03-23 01:01:37.439: V/testService(2126): Caricamento: false
03-23 01:01:44.609: V/testService(2126): position: 0
03-23 01:01:44.879: W/dalvikvm(2126): Link of class 'Ltest/testservicedown/CrociereDestActivity;' failed
03-23 01:01:44.879: E/dalvikvm(2126): Could not find class 'test.testservicedown.CrociereDestActivity', referenced from method test.testservicedown.MainActivity$4.onItemClick
03-23 01:01:44.879: W/dalvikvm(2126): VFY: unable to resolve const-class 1248 (Ltest/testservicedown/CrociereDestActivity;) in Ltest/testservicedown/MainActivity$4;
03-23 01:01:47.589: W/dalvikvm(2126): threadid=1: thread exiting with uncaught exception (group=0x40126560)
03-23 01:01:47.599: E/AndroidRuntime(2126): FATAL EXCEPTION: main
03-23 01:01:47.599: E/AndroidRuntime(2126): java.lang.NoClassDefFoundError: test.testservicedown.CrociereDestActivity
03-23 01:01:47.599: E/AndroidRuntime(2126):    at test.testservicedown.MainActivity$4.onItemClick(MainActivity.java:429)
03-23 01:01:47.599: E/AndroidRuntime(2126):    at android.widget.AdapterView.performItemClick(AdapterView.java:284)
03-23 01:01:47.599: E/AndroidRuntime(2126):    at android.widget.ListView.performItemClick(ListView.java:3744)
03-23 01:01:47.599: E/AndroidRuntime(2126):    at android.widget.AbsListView$PerformClick.run(AbsListView.java:1991)
03-23 01:01:47.599: E/AndroidRuntime(2126):    at android.os.Handler.handleCallback(Handler.java:587)
03-23 01:01:47.599: E/AndroidRuntime(2126):    at android.os.Handler.dispatchMessage(Handler.java:92)
03-23 01:01:47.599: E/AndroidRuntime(2126):    at android.os.Looper.loop(Looper.java:130)
03-23 01:01:47.599: E/AndroidRuntime(2126):    at android.app.ActivityThread.main(ActivityThread.java:3687)
03-23 01:01:47.599: E/AndroidRuntime(2126):    at java.lang.reflect.Method.invokeNative(Native Method)
03-23 01:01:47.599: E/AndroidRuntime(2126):    at java.lang.reflect.Method.invoke(Method.java:507)
03-23 01:01:47.599: E/AndroidRuntime(2126):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:878)
03-23 01:01:47.599: E/AndroidRuntime(2126):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:636)
03-23 01:01:47.599: E/AndroidRuntime(2126):    at dalvik.system.NativeStart.main(Native Method) 
```

CrociereDest活动：

```
package test.testservicedown;

import java.util.ArrayList;
import java.util.List;

import test.testservicedown.models.Crociera;
import test.testservicedown.models.ListAdapter;

import android.annotation.SuppressLint;
import android.annotation.TargetApi;
import android.app.ActionBar;
import android.app.Activity;
import android.app.SearchManager;
import android.content.Intent;
import android.database.Cursor;
import android.database.DataSetObserver;
import android.net.Uri;
import android.os.Build;
import android.os.Bundle;
import android.util.Log;
import android.view.KeyEvent;
import android.view.Menu;
import android.view.MenuItem;
import android.view.View;
import android.view.View.OnClickListener;
import android.view.inputmethod.EditorInfo;
import android.view.ViewGroup;
import android.widget.AdapterView;
import android.widget.AdapterView.OnItemClickListener;
import android.widget.EditText;
import android.widget.ListView;
import android.widget.SearchView;
import android.widget.SearchView.OnQueryTextListener;
import android.widget.TextView;
import android.widget.TextView.OnEditorActionListener;

public class CrociereDestActivity extends Activity implements OnQueryTextListener{

    private static final String TAG = "testService";

    private String pkg;
    private String zona;
    private String period;
    private String query;
    private String prezzo;
    private String nome;

    private List<String> listaPromo;

    private String from1[] = { "*,substr(a.departure_date, -2,2) ||'_'||substr(a.departure_date, -5,2) ||'_'|| substr(a.departure_date, -8,2) as data"};
    private String from[] = {"*"};
    private String fromMSCDest[] = {"_id", "code", "name"};
    private String fromMSC[] = {"cruise_id", "departure_date", "itinerary_desc", "minimum_price", "nights_number", "departure_port_id", "destination_id", "period_id"};
    private String fromMSCItin[] = {"cruise_id", "day_number", "departure_date", "departure_time", "arrival_date", "arrival_day_number", "arrival_time", "arrival_port_id", "departure_port_id"};

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.lista_crociere);

        Intent intent = getIntent();
        pkg = getPackageName();

        zona = intent.getStringExtra(pkg + "ZONA");
        query = intent.getStringExtra(pkg + "QUERY");
        period = intent.getStringExtra(pkg + "PERIOD");
        prezzo = intent.getStringExtra(pkg + "PREZZO");
        nome = intent.getStringExtra(pkg + "NOME");
        setTitle("Crociere");

//      Carica Promo-----------------------------------------
        listaPromo = new ArrayList<String>();
        String[] from = {"*"};
        String where = "cruise_id IN (SELECT c.cruise_id FROM msc_cabin c LEFT OUTER JOIN msc_promos p ON c.cabin_id = p.cabin_id WHERE c.cabin_id = p.cabin_id GROUP BY c.cruise_id) GROUP BY d.name";
        Cursor cPromo = null;
        cPromo = getContentResolver().query(ServiceContentProvider.TABLE13_14_CONTENT_URI_PROMO, from, where, null, null);

        while (cPromo.moveToNext()) {
            String cruise_id = cPromo.getString(0);
            listaPromo.add(cruise_id);
        }

        cPromo.deactivate();
        cPromo.close();

        if (query.equals("dest")) {
            caricaDati();
        } else if (query.equals("data")) {
            caricaDatiData();
        } else if (query.equals("prezzo")) {
            caricaDatiPrezzo();
        } else if (query.equals("depar")) {
            caricaDatiPartenza();
        } else if (query.equals("promo")) {
            caricaDatiPromo();
        }

    }

    private void caricaDati(){

        List<Crociera>lstCrociere = new ArrayList<Crociera>();

        Cursor c = null;
        c = getContentResolver().query(ServiceContentProvider.TABLE13_14_15_16_17_CONTENT_URI, from1, "d.name = '" + zona + "' GROUP BY a.cruise_id", null, "data ASC");
        if (c.getCount() > 0) {
            while (c.moveToNext()) {
                Crociera crociera = new Crociera();
                crociera.setCruiseId(c.getString(0));
                crociera.setItinerario(c.getString(2));
                crociera.setNomeNave(c.getString(8));
                String prezzo = c.getString(3).replace(",", ".");
                crociera.setPrezzo(Float.parseFloat(prezzo));
                crociera.setNomePortoPartenza(c.getString(27));
                crociera.setDataPartenza(c.getString(1));
                crociera.setArrival_potr_id(c.getString(19));
                crociera.setNomePortoArrivo("");
                crociera.setDataArrivo("");
                crociera.setGiorno(c.getString(1).substring(0,2));
                crociera.setMese(crociera.getDataPartenza());
                crociera.setnNotti(Integer.parseInt(c.getString(4)));

                if (listaPromo.contains(crociera.getCruiseId())) {
                    crociera.setPromo(true);
                    Log.v(TAG, "Promo: " + crociera.getCruiseId());
                }else {
                    crociera.setPromo(false);
                }

                lstCrociere.add(crociera);

            }
        }

        c.deactivate();
        c.close();

        ListView lvCrociere = (ListView)findViewById(R.id.lvCrociere);

        lvCrociere.setAdapter(new ListAdapter(this, R.layout.row_blog, lstCrociere));

        lvCrociere.setOnItemClickListener(mItemClickListener);

    }

    private void caricaDatiData(){

        List<Crociera>lstCrociere = new ArrayList<Crociera>();

        Cursor c = null;
        c = getContentResolver().query(ServiceContentProvider.TABLE13_14_15_16_17_CONTENT_URI, from, "m.name = '" + period + "' GROUP BY a.cruise_id", null, null);
        if (c.getCount() > 0) {
            while (c.moveToNext()) {
                Crociera crociera = new Crociera();
                crociera.setCruiseId(c.getString(0));
                crociera.setItinerario(c.getString(2));
                crociera.setNomeNave(c.getString(8));
                String prezzo = c.getString(3).replace(",", ".");
                crociera.setPrezzo(Float.parseFloat(prezzo));
                crociera.setNomePortoPartenza(c.getString(27));
                crociera.setDataPartenza(c.getString(1));
                crociera.setArrival_potr_id(c.getString(19));
                crociera.setNomePortoArrivo("");
                crociera.setDataArrivo("");
                crociera.setGiorno(c.getString(1).substring(0,2));
                crociera.setMese(crociera.getDataPartenza());
                crociera.setnNotti(Integer.parseInt(c.getString(4)));

                if (listaPromo.contains(crociera.getCruiseId())) {
                    crociera.setPromo(true);
                    Log.v(TAG, "Promo: " + crociera.getCruiseId());
                }else {
                    crociera.setPromo(false);
                }

                lstCrociere.add(crociera);

            }
        }

        c.deactivate();
        c.close();

        ListView lvCrociere = (ListView)findViewById(R.id.lvCrociere);

        lvCrociere.setAdapter(new ListAdapter(this, R.layout.row_blog, lstCrociere));

        lvCrociere.setOnItemClickListener(mItemClickListener);

    }

    private void caricaDatiPrezzo(){

        List<Crociera>lstCrociere = new ArrayList<Crociera>();

        Cursor c = null;
        c = getContentResolver().query(ServiceContentProvider.TABLE13_14_15_16_17_CONTENT_URI, from, "a.minimum_price = '" + prezzo + "' GROUP BY a.cruise_id", null, null);
        if (c.getCount() > 0) {
            while (c.moveToNext()) {
                Crociera crociera = new Crociera();
                crociera.setCruiseId(c.getString(0));
                crociera.setItinerario(c.getString(2));
                crociera.setNomeNave(c.getString(8));
                String prezzo = c.getString(3).replace(",", ".");
                crociera.setPrezzo(Float.parseFloat(prezzo));
                crociera.setNomePortoPartenza(c.getString(27));
                crociera.setDataPartenza(c.getString(1));
                crociera.setArrival_potr_id(c.getString(19));
                crociera.setNomePortoArrivo("");
                crociera.setDataArrivo("");
                crociera.setGiorno(c.getString(1).substring(0,2));
                crociera.setMese(crociera.getDataPartenza());
                crociera.setnNotti(Integer.parseInt(c.getString(4)));

                if (listaPromo.contains(crociera.getCruiseId())) {
                    crociera.setPromo(true);
                    Log.v(TAG, "Promo: " + crociera.getCruiseId());
                }else {
                    crociera.setPromo(false);
                }

                lstCrociere.add(crociera);

            }
        }

        c.deactivate();
        c.close();

        ListView lvCrociere = (ListView)findViewById(R.id.lvCrociere);

        lvCrociere.setAdapter(new ListAdapter(this, R.layout.row_blog, lstCrociere));

        lvCrociere.setOnItemClickListener(mItemClickListener);

    }

    private void caricaDatiPartenza(){

        List<Crociera>lstCrociere = new ArrayList<Crociera>();

        Cursor c = null;
        c = getContentResolver().query(ServiceContentProvider.TABLE13_14_15_16_17_CONTENT_URI, from1, "p.name = '" + nome + "' GROUP BY a.cruise_id", null, "data ASC");
        if (c.getCount() > 0) {
            while (c.moveToNext()) {
                Crociera crociera = new Crociera();
                crociera.setCruiseId(c.getString(0));
                crociera.setItinerario(c.getString(2));
                crociera.setNomeNave(c.getString(8));
                String prezzo = c.getString(3).replace(",", ".");
                crociera.setPrezzo(Float.parseFloat(prezzo));
                crociera.setNomePortoPartenza(c.getString(27));
                crociera.setDataPartenza(c.getString(1));
                crociera.setArrival_potr_id(c.getString(19));
                crociera.setNomePortoArrivo("");
                crociera.setDataArrivo("");
                crociera.setGiorno(c.getString(1).substring(0,2));
                crociera.setMese(crociera.getDataPartenza());
                crociera.setnNotti(Integer.parseInt(c.getString(4)));

                if (listaPromo.contains(crociera.getCruiseId())) {
                    crociera.setPromo(true);
                    Log.v(TAG, "Promo: " + crociera.getCruiseId());
                }else {
                    crociera.setPromo(false);
                }

                lstCrociere.add(crociera);

            }
        }

        c.deactivate();
        c.close();

        ListView lvCrociere = (ListView)findViewById(R.id.lvCrociere);

        lvCrociere.setAdapter(new ListAdapter(this, R.layout.row_blog, lstCrociere));

        lvCrociere.setOnItemClickListener(mItemClickListener);

    }

    private void caricaDatiPromo(){

        List<Crociera>lstCrociere = new ArrayList<Crociera>();

        String where = " a.cruise_id IN (SELECT c.cruise_id FROM msc_cabin c LEFT OUTER JOIN msc_promos p ON c.cabin_id = p.cabin_id WHERE c.cabin_id = p.cabin_id GROUP BY c.cruise_id) AND d.name = '" + zona + "' GROUP BY a.cruise_id";

        Cursor c = null;
        c = getContentResolver().query(ServiceContentProvider.TABLE13_14_15_16_17_CONTENT_URI, from1, where, null, "data ASC");
        if (c.getCount() > 0) {
            while (c.moveToNext()) {
                Crociera crociera = new Crociera();
                crociera.setCruiseId(c.getString(0));
                crociera.setItinerario(c.getString(2));
                crociera.setNomeNave(c.getString(8));
                String prezzo = c.getString(3).replace(",", ".");
                crociera.setPrezzo(Float.parseFloat(prezzo));
                crociera.setNomePortoPartenza(c.getString(27));
                crociera.setDataPartenza(c.getString(1));
                crociera.setArrival_potr_id(c.getString(19));
                crociera.setNomePortoArrivo("");
                crociera.setDataArrivo("");
                crociera.setGiorno(c.getString(1).substring(0,2));
                crociera.setMese(crociera.getDataPartenza());
                crociera.setnNotti(Integer.parseInt(c.getString(4)));

                crociera.setPromo(true);

                lstCrociere.add(crociera);

            }
        }

        c.deactivate();
        c.close();

        ListView lvCrociere = (ListView)findViewById(R.id.lvCrociere);

        lvCrociere.setAdapter(new ListAdapter(this, R.layout.row_blog, lstCrociere));

        lvCrociere.setOnItemClickListener(mItemClickListener);

    }

    private AdapterView.OnItemClickListener mItemClickListener = new AdapterView.OnItemClickListener() {

        public void onItemClick(AdapterView<?> arg0, View arg1, int arg2, long arg3) {

            Intent i = new Intent(arg1.getContext(), DetailsActivity.class);

            TextView tvCruiseID = (TextView) arg1.findViewById(R.id.txtIDCrociera);
            String cruiseId = tvCruiseID.getText().toString();
            TextView tvItinerario = (TextView) arg1.findViewById(R.id.txtItinerario);
            String itin = tvItinerario.getText().toString();
            TextView tvNomeNave = (TextView) arg1.findViewById(R.id.txtNomeNave);
            String nomeNave = tvNomeNave.getText().toString();
            TextView tvAnno = (TextView) arg1.findViewById(R.id.txtAnno);
            String anno = tvAnno.getText().toString();
            TextView tvMese = (TextView) arg1.findViewById(R.id.txtMese);
            String mese = tvMese.getText().toString();
            TextView tvGiorno = (TextView) arg1.findViewById(R.id.txtGiorno);
            String giorno = tvGiorno.getText().toString();
            TextView tvNomePortoDep = (TextView) arg1.findViewById(R.id.txtPortoPart);
            String nPortoDep = tvNomePortoDep.getText().toString();
            TextView tvNomePortoArr = (TextView) arg1.findViewById(R.id.txtPortoArr);
            String nPortoArr = tvNomePortoArr.getText().toString();
            TextView tvDataDep = (TextView) arg1.findViewById(R.id.txtDataPartenza);
            String dataDep = tvDataDep.getText().toString();
            TextView tvDataArr = (TextView) arg1.findViewById(R.id.txtDataArrivo);
            String dataArr = tvDataArr.getText().toString();
            TextView tvNNotti = (TextView) arg1.findViewById(R.id.txtNNotti);
            String nNotti = tvNNotti.getText().toString();

            i.putExtra(pkg + "CRUISEID", cruiseId);
            i.putExtra(pkg + "ITIN", itin);
            i.putExtra(pkg + "NNAVE", nomeNave);
            i.putExtra(pkg + "ANNO", anno);
            i.putExtra(pkg + "MESE", mese);
            i.putExtra(pkg + "GIORNO", giorno);
            i.putExtra(pkg + "NPORTODEP", nPortoDep);
            i.putExtra(pkg + "NPORTOARR", nPortoArr);
            i.putExtra(pkg + "DATADEP", dataDep);
            i.putExtra(pkg + "DATAARR", dataArr);
            i.putExtra(pkg + "NNOTTI", nNotti);

            startActivity(i);

        }

    };

    @TargetApi(Build.VERSION_CODES.HONEYCOMB)
    @SuppressLint("NewApi")
    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        getMenuInflater().inflate(R.menu.menu_search, menu);
        if(android.os.Build.VERSION.SDK_INT < 11){

        }else {
            SearchView searchView = (SearchView) menu.findItem(R.id.menu_search).getActionView();
            searchView.setOnQueryTextListener(this);
        }
        return super.onCreateOptionsMenu(menu);
    }

    public boolean onQueryTextChange(String newText) {
        // TODO Auto-generated method stub
        return false;
    }

    public boolean onQueryTextSubmit(String query1) {
        Log.v(TAG, "Ricerca: " + query);
        if (!query1.equals("")) {
            ricerca(query1);
//          if (query.equals("dest")) {
//              ricerca(query1);
//          } else if (query.equals("data")) {
//              ricercaData(query1);
//          } else if (query.equals("prezzo")) {
//              ricercaPrezzo(query1);
//          } else if (query.equals("depar")) {
//              ricercaPartenza(query1);
//          } else if (query.equals("promo")) {
//              ricercaPromo(query1);
//          }

        }
        return false;
    }

    private void ricerca(String query){
        List<Crociera>lstCrociere = new ArrayList<Crociera>();

        Cursor c = null;
//      c = getContentResolver().query(ServiceContentProvider.TABLE13_14_15_16_17_CONTENT_URI, from, "d.name = '" + zona + "' AND a.itinerary_desc LIKE '%" + query + "%' GROUP BY a.cruise_id", null, null);
        c = getContentResolver().query(ServiceContentProvider.TABLE13_14_15_16_17_CONTENT_URI, from, "a.itinerary_desc LIKE '%" + query + "%' OR a.ship_name LIKE '%" + query + "%' OR p.name LIKE '%" + query + "%' GROUP BY a.cruise_id", null, null);
        if (c.getCount() > 0) {
            while (c.moveToNext()) {
                Crociera crociera = new Crociera();
                crociera.setCruiseId(c.getString(0));
                crociera.setItinerario(c.getString(2));
                crociera.setNomeNave(c.getString(8));
                String prezzo = c.getString(3).replace(",", ".");
                crociera.setPrezzo(Float.parseFloat(prezzo));
                crociera.setNomePortoPartenza(c.getString(27));
                crociera.setDataPartenza(c.getString(1));
                crociera.setArrival_potr_id(c.getString(19));
                crociera.setNomePortoArrivo("");
                crociera.setDataArrivo("");
                crociera.setGiorno(c.getString(1).substring(0,2));
                crociera.setMese(crociera.getDataPartenza());
                crociera.setnNotti(Integer.parseInt(c.getString(4)));

                if (listaPromo.contains(crociera.getCruiseId())) {
                    crociera.setPromo(true);
                    Log.v(TAG, "Promo: " + crociera.getCruiseId());
                }else {
                    crociera.setPromo(false);
                }

                lstCrociere.add(crociera);

            }
        }

        c.deactivate();
        c.close();

        ListView lvCrociere = (ListView)findViewById(R.id.lvCrociere);

        lvCrociere.setAdapter(new ListAdapter(this, R.layout.row_blog, lstCrociere));

        lvCrociere.setOnItemClickListener(mItemClickListener);
    }

    private void ricercaData(String query){
        List<Crociera>lstCrociere = new ArrayList<Crociera>();

        Cursor c = null;
        c = getContentResolver().query(ServiceContentProvider.TABLE13_14_15_16_17_CONTENT_URI, from, "m.name = '" + period + "' AND a.itinerary_desc LIKE '%" + query + "%' GROUP BY a.cruise_id", null, null);
        if (c.getCount() > 0) {
            while (c.moveToNext()) {
                Crociera crociera = new Crociera();
                crociera.setCruiseId(c.getString(0));
                crociera.setItinerario(c.getString(2));
                crociera.setNomeNave(c.getString(8));
                String prezzo = c.getString(3).replace(",", ".");
                crociera.setPrezzo(Float.parseFloat(prezzo));
                crociera.setNomePortoPartenza(c.getString(27));
                crociera.setDataPartenza(c.getString(1));
                crociera.setArrival_potr_id(c.getString(19));
                crociera.setNomePortoArrivo("");
                crociera.setDataArrivo("");
                crociera.setGiorno(c.getString(1).substring(0,2));
                crociera.setMese(crociera.getDataPartenza());
                crociera.setnNotti(Integer.parseInt(c.getString(4)));

                if (listaPromo.contains(crociera.getCruiseId())) {
                    crociera.setPromo(true);
                    Log.v(TAG, "Promo: " + crociera.getCruiseId());
                }else {
                    crociera.setPromo(false);
                }

                lstCrociere.add(crociera);

            }
        }

        c.deactivate();
        c.close();

        ListView lvCrociere = (ListView)findViewById(R.id.lvCrociere);

        lvCrociere.setAdapter(new ListAdapter(this, R.layout.row_blog, lstCrociere));

        lvCrociere.setOnItemClickListener(mItemClickListener);
    }

    private void ricercaPrezzo(String query){
        List<Crociera>lstCrociere = new ArrayList<Crociera>();

        Cursor c = null;
        c = getContentResolver().query(ServiceContentProvider.TABLE13_14_15_16_17_CONTENT_URI, from, "a.minimum_price = '" + prezzo + "' AND a.itinerary_desc LIKE '%" + query + "%' GROUP BY a.cruise_id", null, null);
        if (c.getCount() > 0) {
            while (c.moveToNext()) {
                Crociera crociera = new Crociera();
                crociera.setCruiseId(c.getString(0));
                crociera.setItinerario(c.getString(2));
                crociera.setNomeNave(c.getString(8));
                String prezzo = c.getString(3).replace(",", ".");
                crociera.setPrezzo(Float.parseFloat(prezzo));
                crociera.setNomePortoPartenza(c.getString(27));
                crociera.setDataPartenza(c.getString(1));
                crociera.setArrival_potr_id(c.getString(19));
                crociera.setNomePortoArrivo("");
                crociera.setDataArrivo("");
                crociera.setGiorno(c.getString(1).substring(0,2));
                crociera.setMese(crociera.getDataPartenza());
                crociera.setnNotti(Integer.parseInt(c.getString(4)));

                if (listaPromo.contains(crociera.getCruiseId())) {
                    crociera.setPromo(true);
                    Log.v(TAG, "Promo: " + crociera.getCruiseId());
                }else {
                    crociera.setPromo(false);
                }

                lstCrociere.add(crociera);

            }
        }

        c.deactivate();
        c.close();

        ListView lvCrociere = (ListView)findViewById(R.id.lvCrociere);

        lvCrociere.setAdapter(new ListAdapter(this, R.layout.row_blog, lstCrociere));

        lvCrociere.setOnItemClickListener(mItemClickListener);
    }

    private void ricercaPartenza(String query){
        List<Crociera>lstCrociere = new ArrayList<Crociera>();

        Cursor c = null;
        c = getContentResolver().query(ServiceContentProvider.TABLE13_14_15_16_17_CONTENT_URI, from, "p.name = '" + nome + "' AND a.itinerary_desc LIKE '%" + query + "%' GROUP BY a.cruise_id", null, null);
        if (c.getCount() > 0) {
            while (c.moveToNext()) {
                Crociera crociera = new Crociera();
                crociera.setCruiseId(c.getString(0));
                crociera.setItinerario(c.getString(2));
                crociera.setNomeNave(c.getString(8));
                String prezzo = c.getString(3).replace(",", ".");
                crociera.setPrezzo(Float.parseFloat(prezzo));
                crociera.setNomePortoPartenza(c.getString(27));
                crociera.setDataPartenza(c.getString(1));
                crociera.setArrival_potr_id(c.getString(19));
                crociera.setNomePortoArrivo("");
                crociera.setDataArrivo("");
                crociera.setGiorno(c.getString(1).substring(0,2));
                crociera.setMese(crociera.getDataPartenza());
                crociera.setnNotti(Integer.parseInt(c.getString(4)));

                if (listaPromo.contains(crociera.getCruiseId())) {
                    crociera.setPromo(true);
                    Log.v(TAG, "Promo: " + crociera.getCruiseId());
                }else {
                    crociera.setPromo(false);
                }

                lstCrociere.add(crociera);

            }
        }

        c.deactivate();
        c.close();

        ListView lvCrociere = (ListView)findViewById(R.id.lvCrociere);

        lvCrociere.setAdapter(new ListAdapter(this, R.layout.row_blog, lstCrociere));

        lvCrociere.setOnItemClickListener(mItemClickListener);
    }

    private void ricercaPromo(String query){
        List<Crociera>lstCrociere = new ArrayList<Crociera>();

        String where = " a.cruise_id IN (SELECT c.cruise_id FROM msc_cabin c LEFT OUTER JOIN msc_promos p ON c.cabin_id = p.cabin_id WHERE c.cabin_id = p.cabin_id GROUP BY c.cruise_id) AND d.name = '" + zona + "' AND a.itinerary_desc LIKE '%" + query + "%' GROUP BY a.cruise_id";

        Cursor c = null;
        c = getContentResolver().query(ServiceContentProvider.TABLE13_14_15_16_17_CONTENT_URI, from, where, null, null);
        if (c.getCount() > 0) {
            while (c.moveToNext()) {
                Crociera crociera = new Crociera();
                crociera.setCruiseId(c.getString(0));
                crociera.setItinerario(c.getString(2));
                crociera.setNomeNave(c.getString(8));
                String prezzo = c.getString(3).replace(",", ".");
                crociera.setPrezzo(Float.parseFloat(prezzo));
                crociera.setNomePortoPartenza(c.getString(27));
                crociera.setDataPartenza(c.getString(1));
                crociera.setArrival_potr_id(c.getString(19));
                crociera.setNomePortoArrivo("");
                crociera.setDataArrivo("");
                crociera.setGiorno(c.getString(1).substring(0,2));
                crociera.setMese(crociera.getDataPartenza());
                crociera.setnNotti(Integer.parseInt(c.getString(4)));

                crociera.setPromo(true);

                lstCrociere.add(crociera);

            }
        }

        c.deactivate();
        c.close();

        ListView lvCrociere = (ListView)findViewById(R.id.lvCrociere);

        lvCrociere.setAdapter(new ListAdapter(this, R.layout.row_blog, lstCrociere));

        lvCrociere.setOnItemClickListener(mItemClickListener);
    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T20:59:22.403

可能是您正在使用为更高版本的 api 级别引入的方法...删除所有 lint 抑制（如果有）并检查错误。

编辑：您的活动唯一奇怪的是您全局实现了在 API 11 中添加的 OnQueryTextListener。可能是如果您在检查版本后将侦听器应用到 searchview 可能会解决问题。但它只是一个猜测。

阅读您的 logcat 提示我单击列表视图项后会发生错误。也许如果你也可以发布那部分。

我想建议您使用 Action Bar Sherlock，它将在 3.0 之前的 OS 上支持 ActionBar（和 SearchView）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-30T07:21:00.667

将您的数据库操作放入 AsyncTask。在 onPostExecute 方法中填充列表视图。

# asp.net - 隐藏 vb.net for asp.net 中空数据点的部分系列线

> ID：15667879
> 
> 赞同：3
> 
> 时间：2013-03-27T19:36:30.293
> 
> 标签：asp.net, vb.net, mschart

我有从数据集中生成图表的代码。数据集中的一些点是空的，但是图表将这些空数据点绘制为 0。我希望图表将它们绘制为图表中的间隙。下面是我的 ASP 代码。

```
<asp:Chart ID="FailStatusChart" runat="server">
    <Series>
        <asp:Series Name="Series1" Color="#CC3300">
        <EmptyPointStyle BackImageTransparentColor="Transparent" 
            BackSecondaryColor="Transparent" 
            BorderColor="Transparent" 
            BorderDashStyle="NotSet" 
            Color="Transparent" 
            IsVisibleInLegend="False" 
            LabelBackColor="Transparent" 
            LabelBorderColor="Transparent" 
            LabelBorderDashStyle="NotSet" 
            LabelForeColor="Transparent" 
            BackGradientStyle="None" />

        </asp:Series>

    </Series>

    <ChartAreas>
        <asp:ChartArea Name="ChartArea1">
        </asp:ChartArea>

    </ChartAreas> 
```

VB.net

```
For Each DataRow In ByteFailTable.Rows()
     If DataRow(1) = "" Then
        FailStatusChart.Series("Series1").Points.Item(DataRow(1)).IsEmpty = True
        FailStatusChart.Series("Series1").Points(DataRow(1)).Color = Drawing.Color.Transparent
        FailStatusChart.Series("Series1").Points.Remove(DataRow(1))
     End If
Next 
```

# xslt - xslt 转换分数

> ID：15667882
> 
> 赞同：1
> 
> 时间：2013-03-27T19:36:35.267
> 
> 标签：xslt

我有一个带有`<fraction d="2" n="1">`标签的文件。我需要将其转换为`&frac12;`我尝试这样做：

```
<xsl:template match="fraction">
  <xsl:text>&frac</xsl:text>
    <xsl:value-of select="@n"/>
    <xsl:value-of select="@d"/>
  <xsl:text>;</xsl:text>
</xsl:template> 
```

但我收到一个错误 - 可能是由于引用 &frac

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T19:42:23.970

这似乎对我有用（xslt 1.0）：

```
<xsl:template match="/">
  <xsl:text disable-output-escaping="yes">&amp;frac</xsl:text>
  <xsl:value-of select="@n"/>
  <xsl:value-of select="@d"/>
  <xsl:text>;</xsl:text>
</xsl:template> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T02:17:16.247

**不需要 DOE**（而且**[它的使用不仅仅是不好的味道](http://dpawson.co.uk/xsl/sect2/N2215.html)**！）：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
 xmlns:my="my:my">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>
 <xsl:strip-space elements="*"/>

 <my:fractions>
  <frac14>&#188;</frac14>
  <frac12>&#189;</frac12>
  <frac34>&#190;</frac34>
  <frac18>&#8539;</frac18>
  <frac38>&#8540;</frac38>
  <frac58>&#8541;</frac58>
  <frac78>&#8542;</frac78>
 </my:fractions>

 <xsl:variable name="vFracs" select="document('')/*/my:fractions/*"/>

 <xsl:template match="fraction">
     <xsl:value-of select="$vFracs[name()= concat('frac', current()/@n, current()/@d)]"/>
 </xsl:template>
</xsl:stylesheet> 
```

**当此转换应用于提供的 XML 文档时：**

```
<fraction d="2" n="1"/> 
```

**产生了想要的正确结果：**

```
½ 
```

# ruby-on-rails - Ruby on Rails：has_many 关联和表单复选框的问题

> ID：15667889
> 
> 赞同：1
> 
> 时间：2013-03-27T19:36:58.057
> 
> 标签：ruby-on-rails, activerecord, associations, form-for

我正在使用表单向用户添加类别。在我的表单中，我有许多对应于可用类别的复选框。用户可以随时选中和取消选中他想要的类别。

```
class User < ActiveRecord::Base
  has_many :categories, :through => :classifications
end

class Category < ActiveRecord::Base
  has_many :users, :through => :classifications
end

class Classification < ActiveRecord::Base
  belongs_to :user
  belongs_to :category
end

= form_for @user
  - @all_categories.each do |category|
    %label
      = check_box_tag "user[category_ids][]", category.id, @user.categories.include?(category)
      = category.name 
```

问题是用户无法有效地取消选中一个类别。我明白为什么，但我不知道解决这个问题的最佳方法。

谢谢您的帮助 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T19:39:32.900

使用 fields_for 可能是你最好的朋友

[http://api.rubyonrails.org/classes/ActionView/Helpers/FormHelper.html#method-i-fields_for](http://api.rubyonrails.org/classes/ActionView/Helpers/FormHelper.html#method-i-fields_for)

示例：我正在做的一个项目有食物，而食物可以有很多 food_tags。管理这些标签的表单如下所示：

```
= food_form.fields_for "tags" do |tags_form|
  - Tag.all.each_with_index do |tag, index|
    = fields_for "#{type.downcase}[food_tags_attributes][#{index}]", food.food_tags.find_or_initialize_by_tag_id(tag.id) do |tag_form|
      = tag_form.hidden_field :id
      = tag_form.hidden_field :tag_id
      = tag_form.check_box :_destroy, {:checked => tag_form.object.new_record? ? false: true}, "0", "1"
      = tag_form.label :_destroy, tag.display_name + " #{}" 
```

注意我使用的是倒置的 _destroy 属性。因此，如果选中该框，它将添加，如果未选中，它将在 food.update_attributes 上删除它。

# javascript - 清除文本框

> ID：15667890
> 
> 赞同：0
> 
> 时间：2013-03-27T19:36:58.687
> 
> 标签：javascript, jquery, html

感谢任何人的帮助......下面的PHP包含一个txt文件中的项目列表，每个项目旁边是一个文本框供用户输入数量，默认设置为1。我正在尝试清除用户单击文本框时的框，有什么想法吗？

```
<input type='text' id='qty' name='$partno' size='1' value='0'> 
```

到目前为止，我已经尝试过使用 JavaScript，但没有运气。

```
 <script>
        function validateName()
        {
            var x=document.forms["purchase"]["visitor"].value;
            if (x==null || x=="")
            {
                alert("Visitor name must be entered");
                return false;
            }
        }

        function name()
        {  
            document.getElementById('qty').value = "";
        }
    </script>
</head>

<body>

    <h1>Items Available</h1>

    <form id="purchase" name="purchase" action="confirm.php" method="post" onsubmit="return validateName()">
        <table>

            <h3>Visitor Name: <input type='text' name='visitor'></h3>
            <tr><th></th><th></th><th></th><th>Price</th><th>QTY</th></tr>

            <?php
            if (!($data = file('items.txt'))) {
                echo 'ERROR: Failed to open file! </body></html>';
                exit;
            }
            foreach ($data as $thedata) {

                list($partno, $name, $description, $price, $image) = explode('|', $thedata);
                echo "<tr><td><img src='$image' width='60' height='60' alt='image'></td><td><h3>$name</h3></td><td>&nbsp;&nbsp;&nbsp;&nbsp;$description</td>
                    <td>&nbsp;&nbsp;&nbsp;&nbsp;<b>&pound;$price</b></td><td><input type='text' id='qty' name='$partno' size='1' value='0'></td></tr>";
                //<input type='text' size='1' name='partno_qty' value='1'</td>
            }
            ?> 

        </table>

        <input type="submit" value="Purchase">
        <input type="reset" value="Clear">

    </form> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T19:40:32.673

将 onclick 或 onfocus 处理程序添加到您的“input name=qty”标签，或查看使用“placeholder”属性，这在您必须支持的某些浏览器中可能不起作用：

```
foreach ($data as $thedata)
{
    list($partno, $name, $description, $price, $image) = explode('|', $thedata);
                echo '<tr><td><img src="' . $image . '" width="60" height="60" alt="image"></td>'
                . '<td><h3>' . $name . '</h3></td><td>&nbsp;&nbsp;&nbsp;&nbsp;' . $description . '</td>'
                . '<td>&nbsp;&nbsp;&nbsp;&nbsp;<b>&pound;' . $price . '</b></td>'
                . '<td><input type="text" id="part-' . $partno . '" '
                . 'name="' . $partno . '" size="1" '
                . 'value="0" onfocus="this.value=\'\';" placeholder="0"></td>'
                . '</tr>';
} 
```

“onclick/onfocus”方法将在每次单击/输入时清除该框。如果您希望使用“名称”功能，则调用更改为：

```
onfocus="name( this );" 
```

并且“名称”更改为：

```
function name( obj )
{  
    obj.value = "";
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T19:47:29.127

您可以使用 HTML5`placeholder`和`required`属性：

```
<form>
<input type="text" placeholder="Name" required />
<input type="submit" value="submit" />
</form> 
```

[演示](http://jsfiddle.net/arcm111/kJMk8/)

**注意：** Internet Explorer 10、Firefox、Opera、Chrome 和 Safari 支持
该属性。Internet Explorer 10、Firefox、Opera 和 Chrome 支持`placeholder`该标记。`required`Safari 不支持它

或者你可以在 JS 中这样做：

```
<input type="text" onfocus="inputFocus(this, 'initial text')" onblur="inputBlur(this, 'initial text')" value="initial text" /> 
```

`'initial text'`是页面加载时文本输入的默认值，例如（'你的名字'）。

```
function inputFocus(elm, placeholder){
    if (elm.value == placeholder){ elm.value = "" }

}

function inputBlur(elm, placeholder){
    if (elm.value == "" || elm.value == placeholder){
        elm.style.border = "1px solid red";
        elm.value = placeholder;
        alert("Visitor name must be entered");
    }else{
        elm.style.border = "1px solid green";
    }
} 
```

[演示](http://jsfiddle.net/arcm111/vKJEy/)

# javascript - ScrollTop() 在 document.location.reload() 之后总是返回 0

> ID：15667891
> 
> 赞同：2
> 
> 时间：2013-03-27T19:37:02.920
> 
> 标签：javascript, jquery, scroll, reload

我有一个页面，其中包含单击时调用 document.location.reload() 的按钮。重新加载页面时，我得到了 $(document).scrollTop() 的值。

```
$(function(){
  alert("scrollTop:"+$(document).scrollTop()); //or $(window).scrollTop() or $('body').scrollTop()
}) 
```

在 Firefox 和 Opera 中 scrollTop() 返回正确的值。在 Chrome 和 IE 中总是返回 0。

示例：( [http://jsbin.com/ipepon/8](http://jsbin.com/ipepon/8) ) 步骤：

1.  关闭警报
2.  滚动页面到底部
3.  点击按钮

至于 Chrome，我知道滚动位置恢复是在加载文档后发生的，可以在 Scroll 事件处理程序中获取。

当您重新加载文档时，是否有任何跨浏览器方法可以正确确定 scrollTop 值？

**更新 1**

有效的解决方案，但它看起来“脏”：

```
$(window).load(function(){
  setTimeout(function(){alert("scrollTop:"+$(document).scrollTop());},10);
}); 
```

（尝试[http://jsbin.com/ipepon/34](http://jsbin.com/ipepon/34)）设置恢复滚动位置的延迟。

# matlab - 根据规则用范围内的随机整数填充矩阵

> ID：15667898
> 
> 赞同：0
> 
> 时间：2013-03-27T19:37:23.280
> 
> 标签：matlab, random, while-loop

我使用矩阵作为在 matlab 中使用 NSGA-II 进行多目标优化的初始总体。我的染色体向量（C）的大小是`1x192`，每个基因必须在范围内`0<=gene<=40`，并且基因必须是整数。规则是6个基因的分组之和必须小于或等于40。即：

```
sum(reshape(6,[]))<=40 
```

我使用了以下代码，但它输出一个全为零的种群矩阵（种群矩阵=500 条染色体的垂直串联）或一个不满足规则的矩阵：

```
 X=zeros(500,192);
     while i<501
       r=randi(40,6,32);
        if nnz(((sum(r))./40)>1)==0
         X(i,:)=reshape(r,1,[]);
         i=i+1;
         clear r;
        else
         clear r;
        end
     end 
```

退出while循环也需要永远。我在这里做错了什么？是否有另一种方法来完成上述操作？

我也试过这个：

```
i=1;
while i<17500
 r=randi([1,40],6,1);
 s=sum(r);
  if s<=40
   X(:,i)=r;
   i=i+1;
  else
   clear r;
  end
end
X=unique(X','rows')';
A=X(:,randperm(size(X,2)));
A=X(randperm(size(X,1)),:); 
```

以上尝试创建将被重塑为人口矩阵的随机列。但是数字在重复；即在 17500（删除重复列后为 16448）列中没有出现数字 37 和 40。有什么方法可以优化生成的随机数的分布？

@0x90 我有一个向量，称为“染色体”，大小`1x192`和每个连续的 6 个成员组（称为表型）的总和必须为 40 或更少。为了更清楚： ![问题详情](../Images/1ced517a0943fa968afc37ca21588278.png) 也就是说，每个 P 必须是 0 到 40（含）范围内的整数，并且每个表型的总和必须 <=40。我需要500条这样的染色体。

我希望现在有意义。><

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T19:41:53.187

您应该使用[randi([min,max],n,m)](http://www.mathworks.com/help/matlab/ref/randi.html)。`randint`将被弃用。

```
>> r = randi([1,4],3,2)

r =

     3     3
     2     2
     4     4 
```

# forms - 表单使用 href 提交

> ID：15667908
> 
> 赞同：0
> 
> 时间：2013-03-27T19:38:20.643
> 
> 标签：forms, submit, href

当您有超过 1 个提交时，有什么建议使用 href 提交表单？

```
 <form id="form-id">

    <input type='text'name='name'>

    <input type='submit' value='Preview' name='preview'/>
    <input type='submit' value='Add' name='add'/>

  </form> 
```

我只知道以这种方式使用一个提交来做到这一点：

```
<a href="#" onclick="document.getElementById('form-id').submit();"> submit </a> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T19:40:54.607

**已编辑**

使用这种方式：

```
<input type='submit' id='PrevSubmit' value='Preview' name='preview' 
style='display:none;' />

<input type='submit' id='addSubmit' value='Add' name='add' 
style='display:none;'/> 
```

添加两个`a`这样的标签：

```
<a href="javascript:void(0);" 
onclick="document.getElementById('PrevSubmit').click();">
  Preview 
</a>
<a href="javascript:void(0);" 
onclick="document.getElementById('addSubmit').click();">
 Add </a> 
```

# webstorm - Webstorm 和部分视图

> ID：15667910
> 
> 赞同：3
> 
> 时间：2013-03-27T19:38:27.877
> 
> 标签：webstorm

在 Webstorm 中是否支持“部分”视图？

例如，我有一块 html 将被注入（通过 angular.js）到主页面。如果我正在处理该块并创建一个新的 CSS 标记，“创建选择器”将不会列出任何 css 文件，因为它们没有在部分中引用，而是在“父”视图中引用。

据我所知，它只查找在 head 标签中引用的 CSS 文件。通常这是完全合理的。不要在不可用的文件中创建新的 CSS 属性。但在部分视图的情况下，它们将被注入到一个页面中，该页面有几个链接到它的 CSS 文件。有什么方法可以通知 Webstorm 这些是部分视图并且 CSS 文件将在运行时可用？换句话说，这些部分视图是父视图的子视图，我希望 Webstorm 能够了解这种层次结构。

# dictionary - 深入了解 SSRS 美国地图报告

> ID：15667911
> 
> 赞同：1
> 
> 时间：2013-03-27T19:38:32.313
> 
> 标签：dictionary, reporting-services, report, reporting-services-map

我一直对地图报告感兴趣，所以我想创建一个具有向下钻取功能的地图报告，所以基本上创建了两个报告，如下所示：a) 基于 SQL Server 空间数据的主要报告，用于显示美国各州的销售额 b) 向下钻取地图基于 ESRI shapfile 的报告，用于显示所选州的美国县销售额

我下载了美国县 ESRI shapefile。

完成报告后，我使用向下钻取功能测试了地图。我预览了主要报告，将鼠标悬停在德克萨斯州，我没有看到德克萨斯州的县。我只看到一张带有小点的美国地图。

所以，我不确定我错过了什么。我从空间数据中选择县名列，并从分析数据集中选择县名。它是 ESRI 形状文件吗？

请指教。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T23:28:45.743

据我所知，SSRS 不支持“悬停”功能，仅支持“操作”功能。该操作可以转到超链接、转到报告或转到某个部分。要对报告进行深入研究，即使它是地理上的，您也需要引用可以传递给其他内容的内容。我最近做了一些类似于你问的事情。您可以制作一个“子报告”，该“子报告”是从代表州的地理数据类型动态创建的。我做了什么：

1.  我下载了一个获取人口普查形状文件并将它们放入 SQL 数据库的程序：http: [//www.sharpgis.net/page/sql-server-2008-spatial-tools.aspx](http://www.sharpgis.net/page/sql-server-2008-spatial-tools.aspx)

2.  我从人口普查中得到了美国各县的形状文件。

3.  我创建了一个名为“空间”的数据库
4.  我创建了一个表并将数据从第 1 步的应用程序“县”插入其中
5.  我使用美国的地理选项创建了一个通用的美国地图作为我的“主要”报告。
6.  我创建了一个地图类型的子报表，但选择了空间数据向导。选项对于开始并不重要，但你如何制作图像。该报告从我创建的表的“地理”列中获取数据，因此查询将如下所示（确保将数据源转到空间数据库）：

    ```
    Select StateName, Counties, geog(geographic type)
    from UsCounties
    where StateName = @State 
    ```

7.  完成后的报告看起来像一个 blob，因为它是在运行时创建的，而不是静态创建的。您可以“预览”它并从应该创建的名为“State”的变量中传入“OR”或“WA”之类的状态。如果它不是自动创建的，您可以这样做并将其设为“文本”变量。如果设置正确，它将显示状态形状。

8.  您可以返回到第 5 步中的报告，然后转到您创建的图层的“多边形属性”。
9.  选择左侧的“操作”窗格。选择“转到报告”，指定您创建的子报告，该报告将需要一个与“州”匹配的变量，通用美国州有一个与州两位数字代码相对应的“缩写”。
10.  现在您应该能够运行主报表，并且当您在某个状态下单击任意位置时，它将“钻取”到在运行时从空间数据库创建的报表。这是基于矢量的，因此它相当快，具体取决于托管机器的硬件和显示的数据量。

请记住，使用 SSRS 很难使其具有一些 3d 功能，并且由于某种原因悬停在对象上被完全忽略，但被降级为只有“工具提示”，您可以加载这些功能以提供文本和数字但不多更多的。我在另一个地方写了一个关于如何使用 javascript 弹出窗口的 hack，但实际上你只是在以不同的方式进行钻取。

# html - 如何链接到不同文件中的脚本？

> ID：15667926
> 
> 赞同：1
> 
> 时间：2013-03-27T19:39:15.510
> 
> 标签：html

```
Folder1
   Item1
Folder2
   Item2 
```

如何将第 2 项链接到第 1 项。我试过`"/Folder2/Item.extension"`了，但没有成功。而且我一`/`开始就尝试过没有。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T19:41:34.850

使用相对路径，尝试：

```
"../Folder2/Item2" 
```

双点符号表示父文件夹。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T19:43:22.130

使用绝对路径，假设 Folder1 位于项目的根目录，请尝试：

```
"/Folder2/Item2" 
```

这样，如果您移动文件，就不必担心更改路径。

# c# - 如何保留 Regex.Split 的分隔符？

> ID：15667927
> 
> 赞同：38
> 
> 时间：2013-03-27T19:39:17.287
> 
> 标签：c#, regex, split

我想使用类`Split`中的函数拆分字符串`Regex`。问题是它**删除**了分隔符，我想保留它们。最好作为拆分器中的单独元素。

根据我发现的[其他讨论](https://stackoverflow.com/questions/7127384/how-to-keep-the-delimiter-while-using-regex)，只有不方便的方法可以实现这一目标。

有什么建议么？

* * *

## 回答 #1

> 赞同：88
> 
> 时间：2013-03-27T20:09:06.030

只需将模式放入捕获组，匹配项也将包含在结果中。

```
string[] result = Regex.Split("123.456.789", @"(\.)"); 
```

**结果：**

```
{ "123", ".", "456", ".", "789" } 
```

这也适用于许多其他语言：

*   **JavaScript**：`"123.456.789".split(/(\.)/g)`
*   **蟒蛇**：`re.split(r"(\.)", "123.456.789")`
*   **珀尔**：`split(/(\.)/g, "123.456.789")`

（虽然不是 Java）

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-03-27T19:49:30.817

用于`Matches`查找字符串中的分隔符，然后获取值和分隔符。

例子：

```
string input = "asdf,asdf;asdf.asdf,asdf,asdf";

var values = new List<string>();
int pos = 0;
foreach (Match m in Regex.Matches(input, "[,.;]")) {
  values.Add(input.Substring(pos, m.Index - pos));
  values.Add(m.Value);
  pos = m.Index + m.Length;
}
values.Add(input.Substring(pos)); 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-03-27T19:56:32.473

> *假设输入是“abc1defg2hi3jkl”，正则表达式是挑选数字。*

```
String input = "abc1defg2hi3jkl";
var parts = Regex.Matches(input, @"\d+|\D+")
            .Cast<Match>()
            .Select(m => m.Value)
            .ToList(); 
```

零件将是：`abc` `1` `defg` `2` `hi` `3` `jkl`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-12-22T15:29:49.143

对于 Java：

```
Arrays.stream("123.456.789".split("(?<=\\.)|(?=\\.)+"))
                .forEach((p) -> {
                    System.out.println(p);
                }); 
```

输出：

```
123
.
456
.
789 
```

受这篇文章的启发（[如何拆分字符串但在 java 中保留分隔符？](https://stackoverflow.com/questions/56156363/how-to-split-string-but-keep-delimiters-in-java/56157429)）

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-27T19:43:08.413

将它们添加回来：

```
 string[] Parts = "A,B,C,D,E".Split(',');
    string[] Parts2 = new string[Parts.Length * 2 - 1];
    for (int i = 0; i < Parts.Length; i++)
    {
        Parts2[i * 2] = Parts[i];
        if (i < Parts.Length - 1)
            Parts2[i * 2 + 1] = ",";
    } 
```

# xcode4 - Xcode 4：尝试添加目标依赖项时出现“无过滤结果”

> ID：15667928
> 
> 赞同：2
> 
> 时间：2013-03-27T19:39:22.600
> 
> 标签：xcode4

[我正在尝试按照本教程](http://pymatics.com/2011/12/23/tutorial-develop-a-private-framework-for-your-mac-app-using-xcode-4s-workspace-feature/)弄清楚如何在 Xcode 中使用库。在添加目标依赖项之前，一切似乎都很简单。每当我单击“+”以在“构建阶段”中添加目标依赖项时，我的项目会短暂闪现到视图中，然后消失在显示“无过滤结果”的视图后面。

我的项目目录树一直到根目录都没有空格。我正在使用 Xcode 4.6.1。我尝试在搜索窗格中输入我的项目名称，并以多种不同的方式将文件添加到我的项目中，所有这些都具有相同的结果。这是 Xcode 中已知的怪异之处还是我做错了什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2015-01-12T14:31:32.500

这个问题有点老了，但我偶然发现了同样的问题。Xcode 的导航器显示“ *No filter results* ”而不是项目结构。我关闭了 Xcode 并重新打开，但这并没有解决问题。

解决的方法是转到*Project Navigator 中的 Navigate > Reveal*。在此之后，结构再次出现。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-28T07:02:39.450

最终我自己想通了。当 Xcode 进入此状态时，解决方案是关闭它并重新启动并添加目标依赖项按预期工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-11-28T12:00:37.793

这个问题仍然存在于 Xcode 11.1 中。

我使用了另一种方法，我一直在删除我的源项目 .xcworkspace，之后只使用 pod 命令：pod deintegrate 和 pod install；打开您的“新 .xcworkspace”。完成 ！

您不需要提交任何将显示在 git status （.project 或其他）上的新内容，如果您愿意，请丢弃并让代码！

# database - 如何显示路径以及在 sqlite 数据库中的每个字段上花费的时间？

> ID：15667932
> 
> 赞同：0
> 
> 时间：2013-03-27T19:39:26.627
> 
> 标签：database, sqlite

我有两个表格，它们以 id 的形式相互关联。我想获取路径以及花费的时间。日期采用 PR 时间格式。

**地方**

身份证 ***_* __** **课程* ****__ *_* __ *_* __ *_* __ *_* __** last_ visit_date***

 **** * *

1 ---------------- 英文 ------------------- 1364407154328000

2 ----------------------- 数学 ----------- 1364321118380000

3 ----------------------经济学----------------- 1364320870167000

**访问**

从 ***_* __ *_* __ *_* ____** place_id ***_* __ *_* __ *_* __ *_*** visit_date

1 ----------------------------------------- 2 -------- ----- 1364320856866000

2 ------------------ 3 ------ ----- 1364320857080000

***输出********

从 ***_* __ *_* __ *_* __ *_*** 到 ***_* __ *_* __ *_* __ *_* ____** 持续时间

英语 ------------------ 数学 ------------------------ 2:00:00

数学 ------------------------ 经济学 -------------------- 2:00:20

我可以显示路径，但无法显示持续时间以及路径。如何将这两个表连接在一起。

我感谢您的帮助！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T16:56:09.233

我没有得到与您提出的相同的值，但想法是这样的：

```
SELECT p1.Course, p2.Course, time((p2.last_visit_date-v.visit_date)/1000000,'unixepoch')
    FROM Visits v
    INNER JOIN Places p1 ON v.from_id=p1.id
    INNER JOIN Places p2 ON v.place_id=p2.id; 
```

这个想法是与 Places 加入两次，一个用于第一个课程，另一个用于最后一个课程。

（请注意，我将您的“from”字段更改为“from_id”。如果您在反引号之间指定它，您仍然可以使用 from，但我认为最好避免这样的名称冲突。）***

# css - 如何在 Sencha Touch 2 中更改默认背景

> ID：15667935
> 
> 赞同：1
> 
> 时间：2013-03-27T19:39:40.987
> 
> 标签：css, background, sencha-touch-2, background-color, viewport

当您在 Sencha Architect 中开始一个新项目时，它会为您提供这种白色背景 (#eeeeee)。自然地，就像任何网站或应用程序一样，您可以滑动到高于或低于实际内容的位置，因此这种灰白色会显示出来。

我想改变这个背景颜色。我可以更改容器或面板，所以这不是问题。我还尝试将 Cls 应用到视口或使用视口的样式或 HTML 配置，但没有成功。

有谁知道这个 Cls，所以我可以覆盖它或有任何其他方法来做到这一点？这就像它是一切背后的最终背景。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T22:04:15.433

定义了一个 css var 来更改默认背景颜色。是`$page-bg-color`。您几乎可以在底部找到它-

> ....\touch\resources\themes\stylesheets\sencha-touch\default_variables.scss

为 设置默认值`#eee`。因为它是一个 css var，它可能在不同的地方被引用过。因此，为每个元素添加一个具有自定义背景的类并不好。最好通过`scss`自身覆盖它。

您需要定义自己的`*.scss`文件并编译它。在这个`*.scss`文件中，您可以覆盖几乎所有的 css 属性。在您的情况下，设置`$page-bg-color:#whatever`并重新编译它。

希望您熟悉使用 compass 和 scsss，如果没有，那么 [http://vimeo.com/36917216](http://vimeo.com/36917216)上有快速入门指南。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T12:58:57.357

如果你想使用 Cls 手段

```
 Ext.define("VUCFyn.view.MemberHome", {
         extend: 'Ext.Panel',
            xtype: 'memberhome',
             fullscreen:true,

         config: {
              cls : 'booked-seats',        // inside config use like this 
```

并且您已经在 index.html 文件中指定了设计

```
 .booked-seats {
        background-color: #DEFCE2;

   }, 
```

试试它会工作..我试过这样..

# python - 对python循环感到困惑

> ID：15667938
> 
> 赞同：3
> 
> 时间：2013-03-27T19:39:48.923
> 
> 标签：python

我对python中的迭代过程感到困惑

我有：

```
numbers = [0,1,2,3,4,5]
for i in numbers:
    v = numbers
    print v 
```

这是循环的结尾，但是在 C ， C++ ， Java 中，我们知道里面的`{ }`行将被重复执行，或者如果没有给出花括号，那么循环之后的下一条语句，但我在这里感到困惑。迭代中将执行多少行？它取决于缩进吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-27T19:42:04.310

在 Python 中，缩进而不是括号决定了块的范围，所以在这个例子中，每次循环迭代都会执行一次缩进的行。

对于来自 C/Java 语言家族的程序员来说，这是关于 Python 的最奇怪的事情，但你很快就会习惯它。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-27T19:42:53.313

Python 使用缩进来分隔代码块。尝试将此特定代码视为：

```
numbers = [0,1,2,3,4,5]
for i in numbers:  #{
    v = numbers
    print v
#} 
```

这是完全有效的 Python 代码，其中包含带有花括号的注释，您可以在某些不同的语言中看到它们。

Python 执行单个语句的对应物是：

```
numbers = [0,1,2,3,4,5]
for i in numbers: v = numbers
print v 
```

并且每个循环都只会执行`v = numbers`（但是，通过使用`;`，您可以在同一行中添加语句）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-27T19:42:23.047

在 python 中，缩进很重要。在您的代码中，这两行都将在 for 循环的每次迭代中执行：

```
 v = numbers
   print v 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-27T19:58:13.640

作为补充说明，我认为您的原始代码没有做我认为您希望它做的事情 - 即在自己的行上打印数字 1-5。它应该是（使用 Python 3）：

```
numbers = [0,1,2,3,4,5]
for i in numbers:
    print(i) 
```

如果您运行以下代码：

```
numbers = [0,1,2,3,4,5]
v = numbers
print(v) 
```

你会得到：

```
[0, 1, 2, 3, 4, 5] 
```

# passenger - 如何知道旅客滚动重启何时结束？

> ID：15667939
> 
> 赞同：3
> 
> 时间：2013-03-27T19:39:51.593
> 
> 标签：passenger

如果我在企业乘客中配置滚动重启，然后触摸restart.txt，我如何以编程方式检查该过程是否已完成并且可以保证不再提供旧版本？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-06-17T23:22:07.120

我知道这个问题已经有一段时间了，但是对于像我这样在谷歌搜索时发现这个问题的其他人来说，这里有一个答案：

当您执行“touch tmp/restart.txt”时，您可以使用以下命令检查乘客进程状态：

```
 rvmsudo passenger-status 
```

然后，您将看到一些带有“滚动重启”行的进程。完成后，您还可以检查每个乘客进程的正常运行时间（使用相同的命令）。

当然，当您刚刚重新启动乘客应用程序时，整个滚动重启完成后，正常运行时间应该是几秒钟。这应该证明您的应用程序正确重新启动并使用新版本。

最后，如果您想真正确定您的应用程序使用新版本，您可以在您的一个视图中添加应用程序的“版本号”（可能在您的管理视图或秘密视图或您的法律中）网站...）。

您可以在每次部署时使用 capistrano 自动增加版本。（但如果你使用 capistrano，我认为你不需要这个“版本控制”;-)）。

# c# - C# Chat - 如何体面地显示消息？

> ID：15667940
> 
> 赞同：1
> 
> 时间：2013-03-27T19:39:53.433
> 
> 标签：c#, winforms

我正在制作一个聊天客户端和服务器..一切都是最好的，线程，连接，一切都好。

但是现在我的 C# 程序出现了问题.. ..我搜索了几个小时和几天没有解决方案

这是我的问题：

*我需要用支持color*、*smile*、*font*，也许还有*interactive features*的东西来替换（经典）文本框来阅读。

**富文本框**？没有*GIF*支持或交互式项目

我喜欢**fastcoloredtextbox**但无法更改字体或字体大小（可能但效果不佳）顺便说一句不适合我

*我会使用 Browser*，它允许我使用 html、css 和 javascript，从而解决我所有的问题..

为什么我不能？

壁虎？不工作[！？]：|

标准的**WebBrowser**很烂。我有 Windows 8，但仍然是 IE9（wtf？）。

**真棒**？没关系，但不能修改文档...我应该创建一个空白的 html 页面并通过 javascript 全部插入吗？

任何解决方案？你有什么建议？

【是桌面应用，我用的是vs2010】

谢谢

**编辑：**有一个解决方案。

***WebSockets***是一种方式..！:3

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T08:51:07.340

如果您想使用 rtf，我发现了一些可能有用的链接：

*   [http://www.codeproject.com/Articles/4544/Insert-Plain-Text-and-Images-into-RichTextBox-at-R](http://www.codeproject.com/Articles/4544/Insert-Plain-Text-and-Images-into-RichTextBox-at-R)
*   [http://social.msdn.microsoft.com/forums/en-US/winforms/thread/fe9bfcb7-b226-4a54-9882-11c699bf1cb4/](http://social.msdn.microsoft.com/forums/en-US/winforms/thread/fe9bfcb7-b226-4a54-9882-11c699bf1cb4/)
*   [如何使超链接在 RichTextBox 中工作？](https://stackoverflow.com/questions/435607/c-sharp-how-can-i-make-a-hyperlink-work-in-a-richtextbox)
*   [C#/WPF：Richtextbox：查找所有图像](https://stackoverflow.com/questions/4404516/c-sharp-wpf-richtextbox-find-all-images)

但是这个问题有很多可能的答案，所以这完全取决于你想要如何显示消息。

# sql - 按分钟分组并填补缺失

> ID：15667941
> 
> 赞同：2
> 
> 时间：2013-03-27T19:39:58.347
> 
> 标签：sql, postgresql

您如何在 Postgres 中执行 GROUP BY 分钟语句？我也想知道如果有记录丢失如何用零替换丢失？

```
SELECT avg(load) as load, min(created_at) as create_at FROM stats GROUP BY ?what here? 
```

那么我会得到如下行：

```
 created_at   | load
27.3.2013 16:08 | 15
27.3.2013 16:09 | 14
27.3.2013 16:10 | 16
27.3.2013 16:12 | 15 
```

缺少一条记录，请注意

```
27.3.2013 16:11 | 0 
```

如何设置默认值或如何调用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T19:58:49.393

你需要加入一个包含你需要的所有分钟的集合。您可以为此使用 generate_series(start, stop, step)。是这样的：

```
SELECT avg(load), min(created_at) as load 
FROM generate_series('2013-3-20 0:00:00'::timestamp, '2013-3-30 0:00:00', 
              '1 minute') AS minutes(minute)
    LEFT JOIN stats ON minute=date_trunc('minute', stats.created_at)
GROUP BY minute 
```

# c# - 在执行 C# 自定义 Cmdlet 期间收集用户输入（不是通过参数）

> ID：15667944
> 
> 赞同：2
> 
> 时间：2013-03-27T19:40:06.700
> 
> 标签：c#, powershell, input, cmdlet

我正在编写与 Google Apps API 交互并需要 Oauth2 身份验证的 Cmdlet。如果用户尝试在未经身份验证的情况下运行 Cmdlet 并且不仅仅是刷新令牌，我需要他们输入浏览器提供的访问代码。（这一切都已解决。）我想在必要时暂停 cmdlet，等待他们的输入，然后仅在验证后继续。

但是，我现在只能通过抛出错误退出当前 Cmdlet 然后指示用户将访问代码作为参数传递给另一个 Cmdlet（笨拙）来做到这一点。

我一直在寻找一种方法来调用诸如 C# 的 Console.Readline 之类的东西（这只是在执行 cmdlet 时被跳过）或尝试[调用 Read-Host cmdlet](http://msdn.microsoft.com/en-us/library/windows/desktop/ms714876%28v=vs.85%29.aspx)；一旦我从用户那里获得访问代码，代码就可以继续正常执行。我知道这不一定是“Powershell 方式”，但为了这些工具，我觉得它是用户的最佳选择。

如果我尝试这种方法：

```
ReadHostCommand read = new ReadHostCommand();
read.prompt = "Access Code";
foreach (string s in read.Invoke<string>()) {
    WriteObject(s);
} 
```

我收到一个错误：**无法直接调用从 PSCmdlet 派生的 Cmdlet。**

搜索该错误导致我尝试[创建一个新的](https://stackoverflow.com/questions/12712196/run-pscmdlets-in-c-sharp-code-citrix-xendesktop) [Host 对象](http://msdn.microsoft.com/en-us/library/windows/desktop/ee706584(v=vs.85).aspx)，如下所示我得到另一个错误（也如下）：

```
PowerShell ps = PowerShell.Create();
ps.AddCommand("Read-Host");
foreach (PSObject result in ps.Invoke()) {
    WriteObject(result);
} 
```

**Read-Host ：提示用户失败的命令，因为主机程序或命令类型不支持用户交互。尝试支持用户交互的主机程序，例如 Windows PowerShell 控制台或 Windows PowerShell ISE，并从不支持用户交互的命令类型（例如 Windows PowerShell 工作流）中删除与提示相关的命令。**

有没有办法暂停 cmdlet 以从用户那里获取字符串？

编辑：为了澄清，我正在编写要从 Powershell 控制台或 ISE 或类似设备中运行的 Cmdlet，并且需要从用户 mid-cmdlet-execution 获取输入。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-04T15:58:09.597

如果您的 cmdlet 派生自 PSCmdlet，则使用`this.InvokeCommand.InvokeScript()`调用`Read-Host`cmdlet。或者你可以使用这些`this.Host.UI.Prompt*/Read*()`方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T20:10:04.517

听起来您实际上需要实现 PSHost（以及 PSHostUserInterface 和 PSHostRawUserInterface 类）。在这样做时，您将实现与读取主机和写入主机（可能使用 console.readline）的用户交互的功能。

# c++ - VTKPNGWriter 打印出黑色图像？

> ID：15667947
> 
> 赞同：3
> 
> 时间：2013-03-27T19:40:15.770
> 
> 标签：c++, png, vtk, itk

我正在使用 ITK 进行一些图像处理，然后使用 VTK 以 .png 格式打印结果，但是输出图像始终是黑色的。

目前，我正在使用 itk::ImagetoVTKImageFilter（在我的代码中键入 ITKtoVTKFilterType）将 itk::Image 转换为 vtk::vtkImageData。

```
ITKtoVTKFilterType::Pointer itk2vtkGray = ITKtoVTKFilterType::New();
itk2vtkGray->SetInput(grayBinary);  //grayBinary is of type itk::Image<unsigned short, 2>
itk2vtkGray->Update();

vtkSmartPointer<vtkImageData> grayVTK = vtkSmartPointer<vtkImageData>::New();
grayVTK->SetExtent(extent);
grayVTK->SetSpacing(m_spacing);
grayVTK->SetScalarTypeToUnsignedShort();
grayVTK->SetNumberOfScalarComponents(1);
grayVTK->AllocateScalars();
grayVTK->DeepCopy(static_cast<vtkImageData*>(itk2vtkGray->GetOutput()));
//grayVTK = itk2vtkGray->GetOutput(); 
```

我什至使用以下代码确认我的 VTK ImageData 包含 255 或 0 的值。

```
int *dims = grayVTK->GetDimensions();

std::cout << "Dims: " << " x: " << dims[0] << " y: " << dims[1] << " z: " << dims[2] << std::endl;
std::cout << "Number of points: " << grayVTK->GetNumberOfPoints() << std::endl;
std::cout << "Number of cells: " << grayVTK->GetNumberOfCells() << std::endl;

for (int y = 0; y < dims[1]; y++)
{        
     for (int x = 0; x < dims[0]; x++)
     {
         unsigned short *pixel = static_cast<unsigned short*>(grayVTK->GetScalarPointer(x,y,0));
         std::cout << "PIXEL LOC/VAL "<< y*dims[0] + x << " " << pixel[0] <<std::endl;
     }
     std::cout << std::endl;
 } 
```

然后我继续执行 ImageCast 以确保数据的类型是 unsignedShort。

```
vtkSmartPointer<vtkImageCast> cast2 = vtkSmartPointer<vtkImageCast>::New();
cast2->SetInput(grayVTK);
cast2->SetOutputScalarTypeToUnsignedShort();
cast2->ClampOverflowOn();
cast2->Update(); 
```

最后我使用 vtkPNGwriter 输出 .png 文件。请注意，我已尝试输出实际的 vtkImageData 以及 ImageCastFilter 的输出。

```
vtkSmartPointer<vtkPNGWriter> writer =
vtkSmartPointer<vtkPNGWriter>::New();
writer->SetFileName(filename.toStdString().c_str());
writer->SetInputConnection(cast2->GetOutputPort());
//writer->SetInput(grayVTK); I have tried to method as well but to no success
writer->Write(); 
```

但是，.png 输出始终是黑色的。有谁知道我做错了什么。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-28T20:50:07.470

为了将来参考，似乎许多 PNG 阅读器不显示 16 位数据。因此，我最后对 unsigned short 所做的铸造应该是 char。

```
vtkSmartPointer<vtkImageCast> cast2 = vtkSmartPointer<vtkImageCast>::New();
cast2->SetInput(grayVTK);
cast2->SetOutputScalarTypeToChar();
cast2->ClampOverflowOn();
cast2->Update(); 
```

# google-chrome - KinectJS 拖动图像演示在最新的 chrome 版本中不起作用

> ID：15667949
> 
> 赞同：0
> 
> 时间：2013-03-27T19:40:21.260
> 
> 标签：google-chrome, kineticjs

我在我的项目中遇到了类似的问题，但能够在 kinectjs 演示站点上重现它。以下页面适用于 IE，但最新版本的 Chrome（版本 26.0.1410.43）拖放功能不再起作用。

[http://www.html5canvastutorials.com/kineticjs/html5-canvas-drag-and-drop-an-image-tutorial/](http://www.html5canvastutorials.com/kineticjs/html5-canvas-drag-and-drop-an-image-tutorial/)

希望可以确定问题，以便我们也可以修复我的环境。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T22:12:50.073

我构建的应用程序遇到了同样的问题，更新到最新版本的 kineticJs 解决了我的问题。(4.4.0)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T11:30:50.620

在 Android 的 4.1.x 本机浏览器上，我也遇到了这个演示的问题。在 Chrome 手机和其他浏览器上，它就像一个魅力。在本机浏览器上，在 dragstart 之后，图像会转到左上角并一直停留在那里，直到我重绘图层。

# php - 远程 .js 文件上的 file_get_contents 返回垃圾

> ID：15667952
> 
> 赞同：0
> 
> 时间：2013-03-27T19:40:31.370
> 
> 标签：php, file-get-contents

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T19:47:12.947

The content stored on cloudfront is gzip'd. Being that its stored in that format, its not allowing any content negotiation. So you get the content gzip'd whether you like it or not.

PHP provides `gz` functions that should allow you to decompress this.

# django - django：静态网址无法正确呈现

> ID：15667954
> 
> 赞同：0
> 
> 时间：2013-03-27T19:40:34.380
> 
> 标签：django, django-forms

我的页面之一，静态 url 未正确呈现。例如：

```
<link href="//static/static/css/style.css" rel="stylesheet"> 
```

这是一个联系表格，下面是视图：

```
def contact(request):

    Success = False
    email = ""
    title = ""
    text = ""

    if request.method == "POST":    
        contact_form = ContactForm(request.POST)

        if contact_form.is_valid():
            Success = True
            email = contact_form.cleaned_data['email']
            title = contact_form.cleaned_data['title']
            text = contact_form.cleaned_data['text']

    else:
        contact_form = ContactForm()

    ctx = {'contact_form':contact_form, 'email':email, 'title':title, 'text':text, 'success':success}

    return render_to_response('website/contact.html', ctx, context_instance=RequestContext(request)) 
```

模板：

```
{% if success %}
    <p>{{ email }}</p>
    <p>{{ title }}</p>
    <p>{{ text }}</p>

{% else %}

<form action"." method="POST">

{{ contact_form.as_p }}

<input type="submit" value="Send">
<input type="reset" value="Reset">

</form>
{% endif %} 
```

所有其他页面都在正确加载，唯一的区别是这种形式。有谁知道发生了什么？

编辑：

呈现 url 的模板代码是：

```
<link href="/{{ STATIC_URL }}static/css/bootstrap.css" rel="stylesheet"> 
```

以及相关的settings.py代码：

```
STATIC_ROOT = os.path.join(os.path.dirname(__file__), "static")

CURRENT_PATH = os.path.abspath(os.path.dirname(__file__).decode('utf-8')).replace('\\', '/')

STATIC_URL = '/static/'

STATICFILES_DIRS = (
    os.path.join(CURRENT_PATH, '/static/'),
) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T20:59:30.637

也许您需要删除重复的“静态”，即：

```
<link href="{{ STATIC_URL }}/css/bootstrap.css" rel="stylesheet"> 
```

**编辑：** 您没有在您认为有效的视图上传递请求上下文。当您忽略传递请求上下文时，STATIC_URL 是一个空字符串，因此您的链接将正确解析（即 /static/css/boostrap.css），但是当您添加请求上下文时，STATIC_URL 将被替换为“/static/”呈现不正确的网址。 **简而言之，要解决这个问题：1）使用上面的代码来引用 bootstrap.css，2）在所有视图中包含请求上下文。**

有关更多信息，请参阅[请求上下文文档](https://docs.djangoproject.com/en/dev/ref/templates/api/#subclassing-context-requestcontext)。

# r - 计算由另一列分组的一列中的分类值

> ID：15667957
> 
> 赞同：1
> 
> 时间：2013-03-27T19:40:46.710
> 
> 标签：r, aggregate

R新手，请原谅我的无知。我的数据如下所示：

```
 JOB_ROLE       EXP_IT_NETW
1  Software engineering-related (developer, tester, project manager, architecture)        5<10
3                                                                        See below        None
4                                                                          Student          <1
5  Software engineering-related (developer, tester, project manager, architecture)         1<5
6                                                                          Blogger         10+ 
```

我想计算第 2 列中每个值的实例，并按第 1 列对计数进行分组，因此结果如下所示：

```
JOB_ROLE           None    <1    1<5    5<10    10+
Software engineer    3      5     10     15     3
Student              10     7     5      1      0
... 
```

关于如何做到这一点的任何想法？我的 dput 输出如下。提前致谢！

```
structure(list(JOB_ROLE = c("Software engineering-related (developer, tester, project manager, architecture)", 
"See below", "Student", "Software engineering-related (developer, tester, project manager, architecture)", 
"Blogger", "Systems Support", "Student", "IT/Network Administrator", 
"Software engineering-related (developer, tester, project manager, architecture)", 
"Student", "Student", "Software engineering-related (developer, tester, project manager, architecture)", 
"IT hobbyist", "Student", "Software engineering-related (developer, tester, project manager, architecture)", 
"Software engineering-related (developer, tester, project manager, architecture)", 
"IT Manager", "Software engineering-related (developer, tester, project manager, architecture)", 
"Software engineering-related (developer, tester, project manager, architecture)", 
"Software engineering-related (developer, tester, project manager, architecture)", 
"Software engineering-related (developer, tester, project manager, architecture)", 
"IT/Network Administrator", "IT/Network Administrator", "Software engineering-related (developer, tester, project manager, architecture)", 
"Software engineering-related (developer, tester, project manager, architecture)", 
"Student", "Software engineering-related (developer, tester, project manager, architecture)", 
"Researcher in CompSci or related field", "Researcher in CompSci or related field", 
"IT/Network Administrator", "Student", "Software engineering-related (developer, tester, project manager, architecture)", 
"Software engineering-related (developer, tester, project manager, architecture)", 
"Software engineering-related (developer, tester, project manager, architecture)", 
"Software engineering-related (developer, tester, project manager, architecture)", 
"Education", "Software engineering-related (developer, tester, project manager, architecture)", 
"Software engineering-related (developer, tester, project manager, architecture)", 
"IT/Network Administrator", "Software engineering-related (developer, tester, project manager, architecture)", 
"IT/Network Administrator", "Student", "IT/Network Administrator", 
"Software engineering-related (developer, tester, project manager, architecture)", 
"Student", "IT/Network Administrator", "just a layperson who has used computers for over 30 years", 
"IT/Network Administrator", "Unemployed", "Student", "IT/Network Administrator"
), EXP_IT_NETW = c("5<10", "None", "<1", "1<5", "10+", "None", 
"1<5", "10+", "<1", "None", "1<5", "1<5", "None", "None", "10+", 
"None", "1<5", "10+", "None", "1<5", "None", "1<5", "10+", "1<5", 
"1<5", "1<5", "None", "None", "1<5", "5<10", "None", "5<10", 
"<1", "None", "1<5", "None", "1<5", "1<5", "10+", "1<5", "10+", 
"None", "1<5", "5<10", "None", "1<5", "None", "1<5", "None", 
"None", "10+")), .Names = c("JOB_ROLE", "EXP_IT_NETW"), class = "data.frame", row.names = c(1L, 
3L, 4L, 5L, 6L, 7L, 8L, 9L, 10L, 11L, 12L, 13L, 16L, 17L, 18L, 
19L, 20L, 21L, 22L, 23L, 25L, 26L, 27L, 28L, 29L, 30L, 32L, 33L, 
34L, 35L, 36L, 37L, 39L, 40L, 41L, 42L, 43L, 44L, 47L, 48L, 49L, 
50L, 51L, 52L, 53L, 55L, 56L, 57L, 59L, 61L, 62L)) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-27T19:57:16.530

使用`table`：

```
> table(d)
                                                                                 EXP_IT_NETW
JOB_ROLE                                                                          <1 1<5 10+ 5<10 None
  Blogger                                                                          0   0   1    0    0
  Education                                                                        0   0   0    0    1
  IT hobbyist                                                                      0   0   0    0    1
  IT Manager                                                                       0   1   0    0    0
  IT/Network Administrator                                                         0   4   5    1    0
  just a layperson who has used computers for over 30 years                        0   0   0    0    1
  Researcher in CompSci or related field                                           0   1   0    0    1
  See below                                                                        0   0   0    0    1
  Software engineering-related (developer, tester, project manager, architecture)  2   9   2    3    5
  Student                                                                          1   3   0    0    6
  Systems Support                                                                  0   0   0    0    1
  Unemployed                                                                       0   0   0    0    1 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-27T19:55:27.277

我也会使用`data.table`但有点不同来获得您期望的相同格式。

```
require(data.table)
dt <- data.table(df) # here, I assume df is your data.frame

setkey(dt, "JOB_ROLE") # setkey for fast access/grouping

 dt[, {tt <- table(factor(EXP_IT_NETW, 
                 levels=factor(unique(dt$EXP_IT_NETW)))); 
       setattr(as.list(tt), 'names', names(tt))
      }, by = key(dt)] 
```

我明白了：

```
#                                   JOB_ROLE None 10+ 1<5 5<10 <1
#  1:                   >30_years_experience    1   0   0    0  0
#  2:                                Blogger    0   1   0    0  0
#  3:                              Education    1   0   0    0  0
#  4:                             IT Manager    0   0   1    0  0
#  5:                            IT hobbyist    1   0   0    0  0
#  6:               IT/Network Administrator    0   5   4    1  0
#  7: Researcher in CompSci or related field    1   0   1    0  0
#  8:                              See below    1   0   0    0  0
#  9:                   Software_enginnering    5   2   9    3  2
# 10:                                Student    6   0   3    0  1
# 11:                        Systems Support    1   0   0    0  0
# 12:                             Unemployed    1   0   0    0  0 
```

# types - 通过公共函数公开私有类型

> ID：15667963
> 
> 赞同：3
> 
> 时间：2013-03-27T19:41:09.290
> 
> 标签：types, go, visibility

当我通过公共函数公开私有类型时，我正在测试 go 的类型可见性并收到意外行为：

```
package pak

type foo struct { // shoudn't be visible to any other package than pak
    Bar string
}

func NewFoo(str string) *foo {
    return &foo{str}
}

// ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

package main

import (
    "fmt"
    "pak"
)

func main() {
    // these lines should be equivalent...
    var f = pak.NewFoo("Hello, World!")         // this works fine...   
    var f *pak.foo = pak.NewFoo("Hello, World!") // ERROR: cannot refer to unexported name pak.foo

    fmt.Printf("%T\n", f)
    fmt.Printf("%s\n", f.Bar)  // how does it know about .Bar, if it can't see pak.foo?
} 
```

没有明确声明 的类型`f`，它会打印：

```
*pak.foo
Hello, World! 
```

但`*pak.foo`它无法编译。

为什么在这两种情况下都不会失败？

（这个[问题](https://stackoverflow.com/questions/1773192/private-type-with-exported-fields)有点相关，但它没有回答这个问题）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-27T20:12:26.773

有效的声明

```
var f = pak.NewFoo("test") 
```

为您提供一个匿名的隐藏地址`struct` `foo`。您不能使用它来读取或写入包`struct` `foo`外部`pak`。您可以并且通常会使用它来调用`pak`包方法。例如，

```
p := f.PakMethod() 
```

无效的声明

```
var f *pak.foo = pak.NewFoo("test") 
```

尝试获取`struct` `foo`. `struct` `foo`如果允许，这将允许您从包外部读取和写入`pak`。

# objective-c - 更改 NSComboBox 时未触发 comboBoxWillDismiss 事件

> ID：15667964
> 
> 赞同：0
> 
> 时间：2013-03-27T19:41:14.090
> 
> 标签：objective-c, events, nscombobox

我在 Interface Builder 中定义了一个 NSComboBox，`-(void)comboBoxWillDismiss:(NSNotification *)notification`在我的 .m 文件中定义了该函数。
但是，当更改`NSComboBox`（内部单元格，而不是数据源）的内容时，`comboBoxWillDismiss`不会触发。
我忘了做什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T21:52:54.237

它按照评论建议工作：[myCombo setDelegate:self]。

# android - 为什么我们需要 onUpgrade(); SQLiteOpenHelper 类中的方法

> ID：15667965
> 
> 赞同：8
> 
> 时间：2013-03-27T19:41:16.197
> 
> 标签：android, database, sqlite, android-sqlite, sqliteopenhelper

我正在关注本教程。[http://www.androidhive.info/2011/11/android-sqlite-database-tutorial/](http://www.androidhive.info/2011/11/android-sqlite-database-tutorial/)

任何人都可以让我清除这段代码。

```
 // Creating Tables
@Override
public void onCreate(SQLiteDatabase db) {
    String CREATE_CONTACTS_TABLE = "CREATE TABLE " + TABLE_CONTACTS + "("
            + KEY_ID + " INTEGER PRIMARY KEY," + KEY_NAME + " TEXT,"
            + KEY_PH_NO + " TEXT" + ")";
    db.execSQL(CREATE_CONTACTS_TABLE);
}

// Upgrading database
@Override
public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
    // Drop older table if existed
    db.execSQL("DROP TABLE IF EXISTS " + TABLE_CONTACTS);

    // Create tables again
    onCreate(db);
} 
```

**问题**

方法的目的是`onUpgrade();`什么？

什么时候被调用？正如文档所说`this is Called when the database needs to be upgraded`，升级数据库意味着什么？

**重要的**

为什么我们在这种方法中删除表并重新创建？

提前致谢。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-27T19:46:41.393

onUpgrade 基本上用于处理应用程序的任何新版本的新数据库更改（可能是新列添加、表添加）。

在 onUpgrade 中删除表并不总是必要的，这完全取决于您的用例。如果要求不保留旧版本应用程序中的数据，那么 drop 应该会有所帮助，但如果它喜欢更改架构，那么它应该只有更改脚本。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-27T19:44:49.163

升级意味着对数据库模式进行了更改（版本号不同），需要升级。删除表格并重新创建是一种方法。您还可以发出[“alter table”](http://sqlite.org/lang_altertable.html)语句。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-27T19:42:58.283

当您打开数据库时，它会检查版本号以及它是否存在。您可以只“升级”您的数据库，而不是创建新数据库。

一个很好的教程：[http ://www.vogella.com/articles/AndroidSQLite/article.html](http://www.vogella.com/articles/AndroidSQLite/article.html)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-01-28T11:15:41.677

当您更新数据库版本时调用此方法。当再次调用 onCreate 方法时，它会删除现有表并再次创建它。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-06-19T20:04:42.913

回答你的4个问题：

***1)*** onUpgrade 的目的是管理一个新的数据库结构。您可以使用简单的功能启动您的应用程序，然后您需要例如添加一个新列，因此您需要将数据库的版本从 1 增加到 2 并在 onUpgrade 中给出添加新列的指令，这样如果用户更新应用程序，新列被添加。

***2)***当你有一个新版本的数据库并且你在 super 方法中增加 int 数时调用 onUpgrade （这里是 1，所以你最终将它更改为 2）

```
 public static class DatabaseHelper extends SQLiteOpenHelper{
    DatabaseHelper(Context context){
        super (context,DATABASE_NAME,null,1);
    } 
```

***3）***请参阅上面关于更新数据库的含义

***4）***我们删除表并重新创建，因为修改表（例如添加适合新功能的新列）的逻辑方式可能是，在“销毁”/删除表然后创建一个新表之前与所有数据。但这可能不是可行的方法，尽管重新创建数据可能意味着 id 编号将是连续的（通常不连续：您可能有 1、2 和..4，因为 3 已被删除），因此删除然后再次创建表，并最终加载以前的数据，您可以具有此 id 一致性。有时您可能想使用 ALTER 而不是 DROP。为什么？通常因为使用 DROP 用户会丢失数据库中已有的内容，[回复](https://stackoverflow.com/questions/3505900/sqliteopenhelper-onupgrade-confusion-android/3505944#3505944)

# ruby-on-rails - 为什么 find_in_batches 无法通过关系包含 has_many 中的所有记录

> ID：15667968
> 
> 赞同：0
> 
> 时间：2013-03-27T19:41:34.727
> 
> 标签：ruby-on-rails, ruby-on-rails-3, activerecord, rails-activerecord

给定以下代码

```
class Things < ActiveRecord::Base
  belongs_to :user
  belongs_to :sock
end

class User < ActiveRecord::Base
  has_many :things
  has_many :socks, through: :things
end

class Sock < ActiveRecord::Base
  has_many :things
  has_many :users, through: :things
end 
```

假设第一个用户有两只袜子，而所有其他用户都有一只袜子。总共有 1000 个用户和 1001 个袜子。您希望`find_in_batches`返回与正常选择相同数量的记录。

```
User.joins(:socks).count
=> 1001
agg = []
User.joins(:socks).find_in_batches{|g| agg += g}
agg.count
=> 1000 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T19:41:34.727

您必须从关系的另一端开始，因为`find_in_batches`使用主键来确定从哪里开始搜索结果（SELECT ... FROM ... WHERE id > N LIMIT 1000）

```
Sock.joins(:users).count
=> 1001
agg = []
Sock.joins(:users).find_in_batches{|g| agg += g}
agg.count
=> 1001 
```

# java - 如何让我的程序在 Eclipse 之外运行

> ID：15667973
> 
> 赞同：3
> 
> 时间：2013-03-27T19:41:40.810
> 
> 标签：java, eclipse, export, processing

我在eclipse中有一个项目。当我单击 IDE 中的绿色圆圈播放按钮时，它会执行我希望它执行的所有操作 - 打开窗口，播放内容，一切。但是，尽我所能，我无法弄清楚如何让它在日食之外做到这一点。

我的项目使用 processing.core 库来做它的一些事情，但我无法让项目在 Processing IDE 中运行，因为一些愚蠢的东西关于我的一个类不能有效替代类型参数`Collections.sort(List<T>)`. 如果有人知道我如何让它从处理 IDE 中导出，那就太好了。

我需要能够通过电子邮件发送/上传到互联网/以其他方式传输某种文件/文件夹/网页，以允许收件人在没有太多技术知识或工作的情况下查看窗口或允许他们查看和与程序交互的方式与当我按下顶部的播放按钮时，我能够与 Eclipse 启动的窗口进行交互一样。

我尝试了几种不同的方法来实现这一点，但都没有奏效。我尝试导出一个 runnable `.jar`，但它不允许我包含引用的库。我尝试了一个常规的`.jar`，但我不知道如何将它与能够查看它所需的任何东西打包在一起。我什至也尝试过使用 fat jar eclipse 插件，但是我遇到了一些关于无法找到`PApplet`项目的主类的问题。

如果有人知道如何实现我想要发生的事情，或者知道如何做我想做的事情的好教程，我将非常感谢任何形式的帮助或指导或任何东西。

谷歌在为这个问题提供解决方案方面一直没有帮助，因为我发现的大多数结果只是其他人问了相同或类似的问题，然后要么没有答案，要么我已经尝试过，没有确切的迹象为了完成任务，我需要给它什么样的选项或设置。

我使用的`processing.core.jar`是 2.0b7 版，但我认为这不会有什么不同，尽管如果我想不出其他任何东西，我打算用不同的版本尝试它。

我的项目文件夹的副本可以在[https://www.dropbox.com/sh/1n4curhxbgi8fye/A5F6_l7xQu找到](https://www.dropbox.com/sh/1n4curhxbgi8fye/A5F6_l7xQu)

我拥有的所有数据都是我从[http://earthquake.usgs.gov/earthquakes/catalogs/eqs7day-M1.txt文件的连续版本中连接在一起的东西](http://earthquake.usgs.gov/earthquakes/catalogs/eqs7day-M1.txt)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-28T17:14:03.307

我在 OSX 上做了一个快速测试，不得不稍微调整一下你的 Eclipse 项目：

1.  您正在使用绝对路径链接到 .jar 库。我建议使用保持与项目相关的库
2.  我遇到了一些内存问题，不得不添加几个编译器标志
3.  在 Earthquaker.java 中添加了一个 main 方法来初始化为应用程序。

主要看起来像这样：

```
public static void main(String[] args) {
        PApplet.main(Earthquaker.class.getSimpleName());
    } 
```

在 Eclipse 中，您可以通过**File > Export > Java > Runnable JAR file 导出**可运行的 jar 。这是几个屏幕截图：

![eclipse jar 导出 1](../Images/6b45caac641e68ec5ed48a2e7ed1adda.png)

![eclipse jar 导出 2](../Images/92fec4c1db7661d9568d58a9e3c35e17.png)

我个人更喜欢使用**“将所需的库复制到子文件夹...”**选项，以防我需要更新一些独立于主应用程序 .jar 的依赖 .jar。

作为参考，我在[这里](http://lifesine.eu/so/Processing-DataVisualization.zip)上传了修改后的 eclipse 项目（Java SDK 需要更改）。[此处](http://lifesine.eu/so/EarthQuake.zip)提供了带有 bash 脚本的导出可运行 jar 。

这是 bash 脚本本身，它也应该在 Linux 上运行：

```
java -Xms128M -Xmx1024M -jar Processing-DataVisualization.jar 
```

顺便说一句，非常酷的项目。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-27T19:48:08.577

创建一个简单的罐子。创建一个批处理文件并指定类路径。保存批处理文件。运行批处理文件将运行应用程序

```
@ECHO OFF
set CLASSPATH=%CLASSPATH%;myjar1.jar;myjar2.jar;

java mypackage.MyClass 
```

# node.js - 使用不同的值更新多个文档

> ID：15667974
> 
> 赞同：0
> 
> 时间：2013-03-27T19:41:47.737
> 
> 标签：node.js, mongodb, mongoose

不要认为这根本不可能，但想检查一下。

如果我有以下文件：

```
doc1 : {
  _id: 1,
  name: 'John Smith',
  age: 20
}

doc2 : {
  _id: 2,
  name: 'Jane Smith',
  age: 22
} 
```

我希望客户能够在同一个更新请求中将两个文档都传递给我。在这种情况下，可能会为两个文档添加一个地址。

有没有办法我可以向 mongo 发送一个更新语句，以便它使用名称值更新两个文档？

来自客户端的 IE：

```
doc1 : {
  _id: 1,
  name: 'John Smith',
  age: 20,
  address: '123 Street'
}

doc2 : {
  _id: 2,
  name: 'Jane Smith',
  age: 22,
  address: '456 Way'
} 
```

目前我正在迭代这些值并一次更新一个。问题在于 mongoose/mongodb 更新是异步的，所以我无法可靠地告诉客户端我更新了每个结果，直到所有更新回调都被触发。我有一个计数器来确保我收到 N 个回调然后我发送一个响应。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T01:54:55.923

我所做的所有更新都是一次一个，但对我来说很好的是它们是同步的。=)

看来您可以使用 mongoimport 工具批量加载：http: [//docs.mongodb.org/manual/reference/mongoimport/#cmdoption-mongoimport--upsertFields](http://docs.mongodb.org/manual/reference/mongoimport/#cmdoption-mongoimport--upsertFields)。您可以通过这种方式进行批量更新。

否则，我不相信您可以通过客户端在一个命令中做到这一点。

# javascript - $.each 与 JSON 源的 delay()

> ID：15667981
> 
> 赞同：0
> 
> 时间：2013-03-27T19:42:05.187
> 
> 标签：javascript, jquery, json

如何使用 delay() 使用 $.each() 遍历 JSON？
我希望每个图像使用fadeIn() 和fadeOut() 显示3 秒。

JSFiddle：http: [//jsfiddle.net/8x6rR/23/](http://jsfiddle.net/8x6rR/23/)

```
// JSON source
var sponzorji = [{
    logo: "http://dijaki.gimvic.org/2a/stara/miha/javascript/slider/img/interspar.png",
    link: "http://www.center-vic.si/",
    naziv: "Interspar Vič"
}, {
    logo: "http://dijaki.gimvic.org/2a/stara/miha/javascript/slider/img/plesna_sola_urska.png",
    link: "http://www.urska.si/",
    naziv: "Plesna Šola Urška"
}, {
    logo: "http://dijaki.gimvic.org/2a/stara/miha/javascript/slider/img/sae.png",
    link: "http://ljubljana.sae.edu/sl/home/",
    naziv: "SAE Ljubljana"
}];

// HTML
var linkEl = $("a#link"),
    imgEl = $("img#slika");

    // mainLoop
    function mainLoop() {
        $(sponzorji).each(function (index) {

            linkEl.attr("href", this.link).find(imgEl).attr({
                src: this.logo,
                alt: this.naziv
            });

            // Recursive
            if (index == sponzorji.length - 1) {
                mainLoop();
            }

        });

    } // end mainLoop

mainLoop(); 
```

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T20:11:22.500

如果您希望它在到达数组末尾后继续运行，那么最好使用 setInterval()。然后，您可以使用 incriminator 来计算下一个 json 对象的数量，并使用模数和 .length 当您到达最后一项时，您可以从 0 开始。这是一个更新的[jsFiddle](http://jsfiddle.net/8x6rR/25/)。

```
var linkEl = $("a#link"),
    imgEl = $("img#slika"),
    inc = 0;

imgEl.hide();

function mainLoop() {
    setInterval(function () {
        imgEl.fadeOut(function () {
            inc = inc % sponzorji.length
            linkEl.attr("href", sponzorji[inc].link).find(imgEl).attr({
                src: sponzorji[inc].logo,
                alt: sponzorji[inc].naziv
            }).fadeIn();
        });
        inc++
    }, 3000);
}
mainLoop(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T19:48:49.140

$.each(function(i,e) {}) 包含“i”参数，它是当前项目的索引。最好的方法是在延迟（）的计算中添加该索引。我非常肯定您可以使用 .delay(time).fadeIn() 延迟“.fadeIn()”动画。因此，如果您想在 3 秒后淡入淡出（）然后淡出，您应该执行以下操作：

```
$(something with images).each(function(i,e) {
   // i*3800 returns 0 on the first index, which starts the animation automaticly.
   // 3800 is 3seconds + 400 fadeIn() animation + 400 fadeOut() animation
   // fadeOut() animation is in the callback so the 3seconds 'delay' should be set there.
   $(this).delay(i*3800).fadeIn(400, function() {
      $(this).delay(3000).fadeOut(400);
   })
}) 
```

希望这可以帮助。

# r - 可以从 [.data.table() 中的浏览器查看 .SD 吗？

> ID：15667984
> 
> 赞同：17
> 
> 时间：2013-03-27T19:42:19.700
> 
> 标签：r, scope, data.table

在构造表达式以放入调用的`j`-slot 时`[.data.table`，能够检查和使用`.SD`.

这种天真的尝试是行不通的……

```
library(data.table)
DT = data.table(x=rep(c("a","b","c"),each=3), y=c(1,3,6), v=1:9)

DT[, browser(), by=x]
# Called from: `[.data.table`(DT, , browser(), by = x)
Browse[1]> 
Browse[1]> .SD
# NULL data.table 
```

...即使一个名为的变量`.SD`和与当前 data.table 子集相关的其他几个变量都存在于本地环境中

```
Browse[1]> ls(all.names = TRUE)
#  [1] ".BY"       ".GRP"      ".I"        ".iSD"      ".N"        ".SD"      
#  [7] "Cfastmean" "mean"      "print"     "x"        
Browse[1]> .N
# [1] 3
Browse[1]> .I
# [1] 4 5 6 
```

使用`.I`，我可以查看 +/- 之类`.SD`的内容，但能够直接访问其值会很好：

```
Browse[1]> DT[.I]
#    x y v
# 1: b 1 4
# 2: b 3 5
# 3: b 6 6 
```

**我的问题：**`.SD`为什么不能直接从调用中获得期望值（`browser()`while `.I`、`.N`和are）？是否有其他方法可以访问 的值？`.GRP``.BY``.SD`

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-03-27T20:01:41.893

**根据 Matthew Dowle 的评论更新：**

事实证明，这`.SD`是在内部评估**所有** `j`表达式的环境，包括那些根本没有显式引用`.SD`的表达式。`DT`用每个子集的所有列填充它`DT` 并不便宜，从时间上讲，`[.data.table()`除非确实需要，否则不会这样做。

相反，充分利用 R 对参数的惰性求值，它预览未求值的`j`表达式，并且只添加到`.SD`其中引用的列。如果`.SD`提到它本身，它会添加所有`DT`的列。

因此，要查看`.SD`，只需在 - 表达式中包含对它的一些引用`j`。这是可以使用的许多表达式之一：

```
library(data.table)
DT = data.table(x=rep(c("a","b","c"),each=3), y=c(1,3,6), v=1:9)

## This works
DT[, if(nrow(.SD)) browser(), by=x]
# Called from: `[.data.table`(DT, , if (nrow(.SD)) browser(), by = x)
Browse[1]> .SD
#    y v
# 1: 1 1
# 2: 3 2
# 3: 6 3 
```

这里还有一些：

```
DT[,{.SD; browser()}, by=x]
DT[,{browser(); .SD}, by=x]  ## Notice that order doesn't matter 
```

要亲自查看`.SD`仅加载 - 表达式所需的列，请`j`依次运行这些列（`.SD`在进入浏览器环境时输入，然后`Q`离开并返回到正常命令行）：

```
DT[, {.N * y ; browser()}, by=x]
DT[, {v^2 ; browser()}, by=x]
DT[, {y*v ; browser()}, by=x] 
```

# php - Yii 以用户为中心的查询构建器

> ID：15667988
> 
> 赞同：0
> 
> 时间：2013-03-27T19:42:45.133
> 
> 标签：php, yii

我正在根据来自 Yii 应用程序中 MySQL 数据库的查询为用户生成报告视图。

它从一份报告开始，但现在请求来得很快。但是，我注意到这些请求通常不需要更改连接的实际表，但更改仅在`SELECT`or`GROUP BY`条件中。

有没有办法让我提供一个清单，例如，他们可以在其中选择他们想要查看的列，我可以使用该条件运行查询？

例如，一个用户选择姓名、最短进入日期、帖子数量来生成报告，其中只有这三列可供另一个用户使用姓氏、最长进入日期、响应来生成该报告。

# sqlite - 在 sqlite3 中更改表并将列添加到表中

> ID：15667990
> 
> 赞同：2
> 
> 时间：2013-03-27T19:42:50.967
> 
> 标签：sqlite

如果我更改表并添加一个新列，则会添加从该表中删除的数据。

```
ALTER TABLE MyTable ADD COLUMN noOfDays integer default 0 NOT NULL 
```

上面的 SQL 命令会删除 MyTable，然后使用 noOfDays 列对其进行更改，还是会简单地添加 noOfDays 列而不删除它。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-27T19:46:03.973

不，`add`只是添加列。既不会删除其数据，也不会删除表。

ps 来自文档
“注意：另外，在添加 CHECK 约束时，不会针对表中预先存在的行测试 CHECK 约束。” （查看[SQLite](http://www.sqlite.org/lang_altertable.html)手册了解更多信息）

# c# - 奇偶校验错误缺少“126”

> ID：15667997
> 
> 赞同：1
> 
> 时间：2013-03-27T19:43:12.923
> 
> 标签：c#, serial-port, parity

我有一个我知道接收无效奇偶校验位的 COM 端口，并且我正在使用以下程序，但是我似乎从未得到[文档](http://msdn.microsoft.com/en-us/library/system.io.ports.serialport.parity.aspx)提到的尾随`126`字节。

在下面的程序中，控制台打印了很多`!!!!!`但没有`?????`，为什么？

另外我假设具有无效奇偶校验位的字节仍将包含在流中？

```
using (var serialPort = new SerialPort())
{
    serialPort.PortName      = "COM2";
    serialPort.BaudRate      = 562500;
    serialPort.Parity        = Parity.Space;
    serialPort.DataBits      = 8;
    serialPort.StopBits      = StopBits.One;

    serialPort.ErrorReceived += (s, e) => Console.WriteLine("!!!!!");

    serialPort.Open();

    var thread = new Thread(() =>
    {
        while (isRunning)
        {
            var b = serialPort.ReadByte();

            if (b == 126)
                Console.WriteLine("?????");
        }
    });

    thread.Start();

    Console.WriteLine("");
    Console.WriteLine("Press any key to exit.");
    Console.ReadKey(true);

    isRunning = false;
    thread.Join();
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T21:23:44.793

这是一个文档错误。实际替换字符是 '?'，ASCII 码 63。