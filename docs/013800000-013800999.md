# StackOverflow 问答 13800000-13800999

# php - MySQL查询，不根据名称显示记录

> ID：13800007
> 
> 赞同：0
> 
> 时间：2012-12-10T11:24:03.677
> 
> 标签：php, mysql

我有一张可以举办活动的桌子。每个事件都有一个名称，但事件会根据其名称进行分组。

```
+---------------+
| NAME          |
+---------------+
| EVENT 1 CHILD |
| EVENT 1 ADULT |
+---------------+ 
```

是一个样本行。但是，当我查询事件时，我只想显示其中一个事件名称。

所以基本上我只希望显示 EVENT 1 ADULT，因为孩子通过它的名字链接到它。

我不确定如何在 MySQL 中完全做到这一点，我知道我可以执行查询然后用 PHP 删除事件，但如果我可以用 MySQL 做到这一点，这样做似乎很愚蠢。

关于如何解决这个问题的任何建议？

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-10T11:36:28.777

您可以只读取只有`ADULT`这样的日期：

```
SELECT * FROM table WHERE NAME LIKE '%ADULT%'; 
```

或者，如果它总是在最后：

```
SELECT * FROM table WHERE NAME LIKE '% ADULT'; 
```

**但是**，如果您需要区分大小写，请尝试以下操作：

```
SELECT * FROM table WHERE NAME LIKE BINARY '%ADULT%'; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T11:29:40.277

您应该更改表结构以包含 parent_id 列。这将允许您在不基于名称的情况下将子记录显式链接到父记录，然后您可以使用以下方法轻松查询父记录：

```
SELECT name FROM events WHERE parent_id IS NULL; 
```

编辑：

如果您无法更改数据（根据您的评论），那么您在寻找父母时会遇到这样的问题：

```
SELECT name FROM events WHERE name LIKE '%ADULT%'; 
```

为了找到给定成年人的孩子：

```
SELECT name FROM events WHERE name LIKE CONCAT('%', TRIM(TRAILING 'ADULT' FROM '$parentName', '%'); 
```

请注意，这是一个完全未经测试的 CONCAT 与 LIKE 的使用，所以它只是一个猜想，它会起作用。

# android - 在 Android 4.0.4 上隐藏我的应用程序的 android 状态栏？

> ID：13800009
> 
> 赞同：2
> 
> 时间：2012-12-10T11:24:10.253
> 
> 标签：android, statusbar

我尝试使用以下代码隐藏状态栏，但它不起作用..

```
getWindow().getDecorView().setSystemUiVisibility(View.SYSTEM_UI_FLAG_HIDE_NAVIGATION); 
```

并调暗我使用的酒吧

```
 getWindow().getDecorView().setSystemUiVisibility(View.SYSTEM_UI_FLAG_LOW_PROFILE); 
```

它有效.. 有谁知道如何在 Android 4.0.4 设备上隐藏状态栏？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-10T11:30:14.523

在您的清单中使用以下内容

```
<activity
        android:name=".abc"
        android:label="@string/app_name"
        android:theme="@android:style/Theme.NoTitleBar.Fullscreen" > 
```

但是，这仅适用于手机，平板电脑不支持隐藏状态栏。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-14T04:43:36.543

`onCreate`在你的方法上试试这个。

```
getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN, WindowManager.LayoutParams.FLAG_FULLSCREEN); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-01-05T02:52:23.770

1.  添加样式并扩展 Theme.AppCompat.NoActionBar ，并添加两个项目。

像这样

```
 <style name="AppTheme" parent="Theme.AppCompat.NoActionBar">
        <!-- Customize your theme here. -->
        <item name="colorPrimary">@color/colorPrimary</item>
        <item name="colorPrimaryDark">@color/colorPrimaryDark</item>
        <item name="colorAccent">@color/colorAccent</item>
        <item name="android:windowFullscreen">true</item>
        <item name="android:windowContentOverlay">@null</item>
    </style 
```

2.  使用此主题设置您的应用程序。

像这样

```
<application
    ...
    android:theme="@style/AppTheme"
    ...>
</application> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-10T12:01:49.877

在您的 AndroidManifest 中，只需将其添加到`android:theme`. 以下任何一行都应该适合您：

`android:theme="@android:style/Theme.NoTitleBar.Fullscreen"`

`android:theme="@android:style/Theme.Black.NoTitleBar.Fullscreen"`

您需要指定全屏，否则您的状态栏将被保留，只有您的标题栏会消失。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-09-13T11:39:52.723

`View.SYSTEM_UI_FLAG_HIDE_NAVIGATION`不隐藏状态栏。它隐藏了导航栏。如果你想隐藏状态栏，你应该使用：

```
getWindow().getDecorView().setSystemUiVisibility(View.SYSTEM_UI_FLAG_FULLSCREEN); 
```

或者

```
getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN, WindowManager.LayoutParams.FLAG_FULLSCREEN); 
```

在此处阅读更多信息： [https ://developer.android.com/training/system-ui/status.html](https://developer.android.com/training/system-ui/status.html)

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2013-03-04T17:02:09.667

这个解决方案对我有用：

1- 根您的设备。使用本网站中的工具 >> www.unlockroot.com

2-在应用程序启动时调用此函数>> [https://stackoverflow.com/a/14940667/1995361](https://stackoverflow.com/a/14940667/1995361)

# php - PEG-php解析if语句

> ID：13800010
> 
> 赞同：1
> 
> 时间：2012-12-10T11:24:17.217
> 
> 标签：php, parsing, peg

再会。刚开始用PEG。我熟悉[wp:peg](http://en.wikipedia.org/wiki/Parsing_expression_grammar) 和其他一些理论，但仍然无法理解它在内部是如何工作的。

我的任务是解析表达式

```
if($a=='qwerty' && $b>2 || $c<=5)
     print 'something';
endif; 
```

is 语句的主体只包含打印操作符，没有其他内容，但条件复杂。

我的想法：

```
/*!* Calculator

Int: /[0-9]+/
Var: /\$[a-z]+/
tThen: /then{1}/
tIf: /if{1}/
tElse: /else{1}/
tEndif: /endif{1}/

block: /.+/

condEq: Var '==' ( Int | Var ) * 

condStatement: '(' condEq ')'
  function condEq( &$result, $sub ) {
    if( eval($sub['text'].';') ) {
        $result['text'] = 'true';
    }
    else {
        $result['text'] = 'false';
    }
  }

 ifStatement: tIf condStatement

 Expr: ifStatement

 */ 
```

但我相信这个任务有更好的解决方案:) 你能帮我吗？谢谢。

# android - 未调用 PreExecute 方法上的 Android Asynctask

> ID：13800011
> 
> 赞同：2
> 
> 时间：2012-12-10T11:24:23.613
> 
> 标签：android, android-asynctask, progressdialog

我想开始一个`ProgressDialog`何时`onPreExecute()`被调用但它不起作用。

**家庭活动.java**

```
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    //switch condtion...
    case R.id.buttontime :                
        new FlightListTask().execute("");
        break:  

}

public class FlightListTask extends AsyncTask<String,ArrayList<HashMap<String, String>>, ArrayList<HashMap<String, String>>> {

    protected String onPreExecute(String temp) {
        progresdialoglistview=ProgressDialog.show(HomeActivity.this, "", "Loading");
        Log.e("onPreExecutive","called"+progresdialoglistview);
        return temp;
    }

    @Override
    protected ArrayList<HashMap<String, String>> doInBackground( String... params ) {
        return flightlist;
    }

    protected void onPostExecute(ArrayList<HashMap<String, String>> flightList) {
        // listview code....
    }

} 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-10T11:30:38.550

将您的`onPreExecute`方法更改为：

```
 @Override
  protected  void onPreExecute()
  {
      progresdialoglistview=ProgressDialog.show(HomeActivity.this, "","Loading");
      Log.e("onPreExecutive","called"+progresdialoglistview);

  } 
```

[onPreExecute()](http://developer.android.com/reference/android/os/AsyncTask.html#onPreExecute%28%29)方法不带任何参数并且返回类型为 void。所以也从 onPreExecute 中删除 return

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-10T11:25:24.247

您没有**覆盖** `onPreExecute`而是**重载**。

`onPreExecute`不接受任何参数，也不返回任何东西。改用这个：

```
protected void onPreExecute() 
```

# objective-c - performSelectorOnMainThread 方法未调用

> ID：13800013
> 
> 赞同：0
> 
> 时间：2012-12-10T11:24:32.570
> 
> 标签：objective-c, ios, ios5, nsthread, performselector

我创建了一个在新线程中运行的方法。

```
[NSThread detachNewThreadSelector:@selector(setmostpopularReq:) toTarget:self withObject:mostPopulerstring]; 
```

完成此方法后，我将所有数据发送到主线程。

```
[self performSelectorOnMainThread:@selector(getmostpopularResponse:) withObject:self waitUntilDone:YES]; 
```

但有时我的主线程方法没有调用。

我用了

```
dispatch_sync(dispatch_get_main_queue(),^{[self getmostpopularResponse:mostPopularList];}); 
```

但这也有同样的问题，有时它的调用方法或有时不调用。

请帮助我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T12:22:05.070

我建议您创建一个委托，您可以在完成分离线程后通知主线程

另一种解决方案是创建一个 NSOperation 和 NSOperationQueue 而不是一个新线程。在那里你可以安排你想要的。对我来说看起来更容易，尽管这取决于你。

这是一个链接，可以帮助您更多地使用 NSOperation [https://developer.apple.com/library/mac/#featuredarticles/ManagingConcurrency/_index.html](https://developer.apple.com/library/mac/#featuredarticles/ManagingConcurrency/_index.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T12:57:59.263

我会很快写这个的。

```
@protocol RespondDelegate
- (void)notifyWithRespond:(NSData *)data;
@end

@interface ContactWebServiceOperation:NSOperation
@property (nonatomic, assign) id delegate;
@end

@implementation ContactWebServiceOperation
@synthesize delegate;

// initialize here.
- (id)initWithDelegate:(id)delegate;
{
   if ([self = [super init]) { 
      self.delegate = delegate;
   }

   return self;
}

- (void)main 
{
    if (self.isCancelled) return;
    if (nil != delegate) {
        // Do your work here...
        work();

        // When finished notify the delegate with the new data.
        [delegate notifyWithRespond:your_data_here];

        // Or
        [delegate performSelectorOnMainThread:@selector(processImageForDownloadOperation:)
            withObject:self waitUntilDone:YES];
    }
}
@end

// Now on the view that you want to present the received results 
// you have to do one thing.
// Let's say that your view is called View1

@interface View1 : UIViewController<RespondDelegate>
// Here put whatever you like.
@end

@implementation View1

// Put here all your code.

- (void)notifyWithRespond:(NSData *)data
{
    // Here you will handle your new data and you will update your view.
}

@end 
```

如果我理解正确，这应该有效。此外，您可以将 NSData 更改为您喜欢的任何内容，只要您稍后执行适当的转换即可。

如果它不起作用，请查看 Apple 的链接，也许我有一些错字或其他东西。但总的来说，它看起来很坚固。

# zend-framework - 在哪里以及如何找到此 Zend 控制器插件

> ID：13800027
> 
> 赞同：0
> 
> 时间：2012-12-10T11:25:07.263
> 
> 标签：zend-framework, front-controller

我有一个 Zend 前端控制器插件。它依赖于请求对象和服务层，但它不能跨应用程序重用。因此，我认为它属于应用程序控制器目录中的插件目录。这听起来对吗？

其次，我怎样才能让 Zend 自动加载这个目录中的插件？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T13:49:16.080

我同意插件应该放在插件文件夹中。我通常在引导期间使用我的应用程序的自定义命名空间设置资源自动加载器的实例。例如，假设您的应用的命名空间是“Bob”：

```
protected function _initAutoloader()
{
    $autoloader = Zend_Loader_Autoloader::getInstance();

    $resourceAutoloader = new Zend_Loader_Autoloader_Resource(array(
        'basePath' => APPLICATION_PATH,
        'namespace' => 'Bob',
        'resourceTypes' => array(
            'model' => array(
                'path' => 'models/',
                'namespace' => 'Model'
            ),
            'form' => array(
                'path' => 'forms/',
                'namespace' => 'Form'
            ),
            'plugin' => array(
                'path' => 'plugins/',
                'namespace' => 'Plugin'
            ),
            'service' => array(
                'path' => 'services/',
                'namespace' => 'Service'
            )
        )
    ));
    $autoloader->pushAutoloader($resourceAutoloader);

    return $autoloader;
} 
```

根据需要添加或删除资源类型。然后你可以把你的插件放在 application/plugins/Whatever.php 中，它会像往常一样自动加载。

# c# - 无法在 ascx 控制页面中呈现 html

> ID：13800030
> 
> 赞同：0
> 
> 时间：2012-12-10T11:25:20.837
> 
> 标签：c#, asp.net, html, ascx

这是我的 ascx 控制页面代码

```
 <%@ Control Language="C#" AutoEventWireup="true" CodeBehind="Menu.ascx.cs" Inherits="CrossQueue.Web.Menu" %>
<asp:Label ID="lblMenu" runat="server"></asp:Label> 
```

这是我的 C# 代码

```
private void CreateMenu()
    {
        StringBuilder menuHtml = new StringBuilder();   
        int profileId = 0;
        MenuBL menuManager = new MenuBL();
        DataTable dtMenu = null;
        if (Session["USR_ID"] != null)
        {
            profileId = Convert.ToInt32(Session["USR_PROFILE"]);
            dtMenu = menuManager.GetAllMenuItemsForProfile(profileId);
            if (dtMenu != null && dtMenu.Rows.Count > 0)
            {
                menuHtml.Append("<table id='tblMenu' cellpadding='0' cellspacing='0' width='939' border='0' align='center'>");
                menuHtml.Append("<tr>");
                menuHtml.Append("<td align='left'>");
                menuHtml.Append(Convert.ToString(Session["USR_USERNAME"]));
                menuHtml.Append("</td>");

                menuHtml.Append("<td width='739' valign='middle' align='right' style='height: 30px;'>");
                foreach (DataRow dr in dtMenu.Rows)
                {
                    if (dr["MenuName"].ToString() == "Profile")
                    {
                        menuHtml.Append("<img src='/images/home_icon.jpg' width='25' height='25' align='middle' /><a href='AllProfile.aspx>Profile</a>&nbsp;");
                    }
                    else if (dr["MenuName"].ToString() == "User")
                    {
                        menuHtml.Append("<img src='/images/home_icon.jpg' width='25' height='25' align='middle' /><a href='AllUsers.aspx>User</a>&nbsp;");
                    }
                }
                menuHtml.Append("</td>");
                menuHtml.Append("</tr>");
                menuHtml.Append("</table>");
            }
            lblMenu.Text = menuHtml.ToString();
        }
    } 
```

当我加载页面时，我只看到一个 html 代码打印为文本而不是渲染。任何人都可以指出可能有什么问题

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-10T11:29:16.217

您可以使用文字而不是标签。

请参阅此 [http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.literal.aspx](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.literal.aspx)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-10T11:27:33.817

您可以通过设置而不是标签来`div`访问服务器，并设置其 InnerHTML = menuHtml.ToString();`assigning ID``runat="server"`

```
<div id="div1" runat="server" ></div>

div1.InnerHTML = menuHtml.ToString(); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-10T11:32:51.977

更改标签

```
<asp:Label ID="lblMenu" runat="server"></asp:Label> 
```

文字为

```
<asp:Literal ID="lblMenu" runat="server" EnableViewState="false"></asp:Literal> 
```

# visual-studio-2010 - 如何在 Visual Studio 高级版中查看编码的 UI

> ID：13800032
> 
> 赞同：1
> 
> 时间：2012-12-10T11:25:27.497
> 
> 标签：visual-studio-2010, testing, ui-automation, coded-ui-tests, regression-testing

我无法在 Visual Studio 2010 高级版的测试菜单中看到编码的 UI 测试。我只能看到基本单元测试、有序测试、单元测试和单元测试向导。我尝试使用自定义功能在菜单中添加编码 UI 测试生成器，但它在菜单中显示为禁用。

请让我知道如何访问编码的 UI 测试。

# windows-phone-7 - 如何在 Windows Phone 应用程序中生成不重复的随机数

> ID：13800034
> 
> 赞同：0
> 
> 时间：2012-12-10T11:25:31.133
> 
> 标签：windows-phone-7

这是生成随机数的代码，但是我得到重复的数字，我该如何克服这个问题。

```
 void getnumbers()

    {
        Random r = new Random();
        int[] trubyte = new int[4];
        for (var x = 0; x < 4; ++x)
        {
            trubyte[x] = r.Next(1, 5);
        }
        b1.Content = trubyte[0];
        b2.Content = trubyte[1];
        b3.Content = trubyte[2];
        b4.Content = trubyte[3];
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T21:57:06.173

如果该方法返回一个您已经拥有的随机数，则只需获取另一个随机数。

```
void getnumbers()
{
    Random r = new Random();
    int num;
    var trubyte = new List<int>();

    for (var x = 0; x < 4; ++x)
    {
        do
        {
            num = r.Next(1, 5);
        } while(trubyte.Contains(num));

        trubyte[x] = num;   
    }
    b1.Content = trubyte[0];
    b2.Content = trubyte[1];
    b3.Content = trubyte[2];
    b4.Content = trubyte[3];
} 
```

我使用`List`而不是数组只是因为它立即提供了`Contains`方法，而不是任何其他特殊原因。

如果你想生成一个随机的、不重复的数字的大列表（在最坏的情况下是 O(n^2)），那么这不是有效的，但是对于 4 个数字来说已经足够了；）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T09:52:43.550

我们可以在 windows phone 应用程序中使用字典而不是哈希集。下面是生成不同随机数的代码。

```
 static int[] GetRandomNumbersNonrepeat(int noOfRandomNumbers, int maxValue)

    {
        Dictionary<int, int> randomnumbers = new Dictionary<int, int>();
        while (randomnumbers.Count < maxValue)
        {
            Random r = new Random();
            int rnum = r.Next(1, maxValue+1);

            if (!randomnumbers.ContainsValue(rnum))
            {

                randomnumbers.Add(randomnumbers.Count + 1, rnum);
            }

        }

        int[] rnums = randomnumbers.Values.ToArray<int>();
        return rnums;
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-10T11:41:03.283

随机数生成器函数可以返回重复项，因为输出是随机的。

如果您使用 RNG 生成必须唯一的数字，则需要在使用它们之前验证它们尚未生成。

你不能在 Windows Mobile 上使用类似 [0] 的东西吗？这似乎比编写自己的 RNG 更实用。

0： http: [//msdn.microsoft.com/en-us/library/system.security.cryptography.randomnumbergenerator (v=vs.90).aspx](http://msdn.microsoft.com/en-us/library/system.security.cryptography.randomnumbergenerator(v=vs.90).aspx)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-10T11:41:35.613

你必须自己做，这意味着检查一个数字是否已经生成。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-11T11:33:14.727

你可以像 gjulianm 说的那样做，但这是一长串数字，比如 1000，你会浪费很多时间。因此，如果您想要一个 1000 的随机列表，您可以按照以下方式进行

*   使用 trubyte[0]=1,trubyte[1]=2 等初始化大小为 1000 的数组 trubyte...
*   初始化一个变量arraysize=1000
*   运行一个循环 1000 次，其中首先提取一个随机数 k btw 0-(arraysize-1)。您的随机数是 a[k] ，您可以在列表中单独列出。现在将 trubyte[k] 与 trubyte[arraysize] 交换。最后将数组大小减一。

另一种方式，如果你不希望循环中的数字只是在循环执行后使用更改后的列表

```
void getnumbers(){
Random r = new Random();
int num;
int[] trubyte = new int[1000];
int finalList[] =  new int[1000]
for (int x = 0; x < 1000; ++x)
{
 trubyte[x]=x+1;
}
int arraysize=1000;
for (var x = 0; x < 1000; ++x)
{
    int k=r.Next(0, arraysize);
    finalList[x]=trubyte[k];
    trubyte[k]=trubyte[arraysize-1];
    arraysize--;
}
//use the finalList 
```

}

# c# - 创建 ParseTree（不是 AST）

> ID：13800036
> 
> 赞同：2
> 
> 时间：2012-12-10T11:25:42.040
> 
> 标签：c#, antlr, antlr3

我想用目标语言 C# 用 ANTLR 创建一个解析树（不是 AST）。这似乎不那么微不足道，也许我正在寻找所有错误的地方。

到目前为止，我尝试在生成的解析器中实现partials，如下所示：

```
public partial class TestParser
{

   ParseTree pt = new ParseTree("root", null);

   partial void EnterRule(string ruleName, int ruleIndex)
   {
     ParseTree child = new ParseTree(ruleName, pt);
     pt.Children.Add(child);
     this.pt = child;
   }

   partial void LeaveRule(string ruleName, int ruleIndex)
   {
     this.pt = pt.Parent;
   }

} 
```

与`ParseTree`存在

```
public class ParseTree
{
    private List<ParseTree> children = new List<ParseTree>();

    public ParseTree(string name, ParseTree parent)
    {
        this.Parent = parent;
        this.Rule = name;
    }

    public ParseTree Parent { get; private set; }
    public string Rule { get; private set; }
    public List<ParseTree> Children { get { return children; } }

    public Boolean IsTerminal
    {
        get
        {
            return (children.Count == 0);
        }
    }

} 
```

这可行，但不能实现我的目标：我无法从这棵树中获取匹配的标记/文本。除此之外，它还有一个额外的缺点：如果我想对多个语法执行此操作，我必须将部分类复制粘贴到任何地方，因为它是 TestParser 的一部分，在食物链上没有任何东西。

我查看了[http://www.antlr.org/wiki/pages/viewpage.action?pageId=1760](http://www.antlr.org/wiki/pages/viewpage.action?pageId=1760)但生成的 Parser 没有采用`ParseTreeBuilder`.

现在去哪里？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T15:56:36.327

我找到了一个或多或少合理的解决方案来解决我的问题。它有一个主要缺点：它只处理仅由标记组成的生产规则文本。这对我来说已经足够了，但可能不适合你。一个正确的实现也应该有令牌节点，所以它可以被正确地遍历。

适配器：

```
 public class ParseAdaptor : CommonTreeAdaptor
    {
        private C<ParseTree> container;

        public ParseAdaptor(C<ParseTree> container)
            : base()
        {
            this.container = container;
        }

        public override void AddChild(object t, object child)
        {
            base.AddChild(t, child);
            this.container.Value.Text += base.GetTree(child).Text;
        }

    } 
```

ParseTree 实现：

```
public class ParseTree
{
    private string ownText;
    private List<ParseTree> children = new List<ParseTree>();

    public ParseTree(string name, ParseTree parent)
    {
        this.Parent = parent;
        this.Rule = name;
    }

    public String Text
    {
        get
        {
            if (this.IsTerminal) return this.ownText;
            else
            {
                StringBuilder builder = new StringBuilder();
                foreach (ParseTree child in children)
                {
                    builder.Append(child.Text);
                }
                return builder.ToString();
            }
        }
        set
        {
            this.ownText = value;
        }
    }

    public ParseTree Parent { get; private set; }
    public string Rule { get; private set; }
    public List<ParseTree> Children { get { return children; } }

    public Boolean IsTerminal
    {
        get
        {
            return (children.Count == 0);
        }
    }

}
//Isn't this the silliest little thing you've ever seen?
//Where is a pointer when you need one?
public class C<T>
{
    public T Value { get; set; }
} 
```

它与部分粘合在一起：

```
 public partial class TestParser
    {

        C<ParseTree> parseTreeContainer = new C<ParseTree>() { Value = new ParseTree("root", null) };

        public ParseTree Tree
        {
            get
            {
                return parseTreeContainer.Value;
            }
            set
            {
                parseTreeContainer.Value = value;
            }
        }

        partial void CreateTreeAdaptor(ref ITreeAdaptor adaptor)
        {
            adaptor = new ParseAdaptor(this.parseTreeContainer);
        }

        partial void EnterRule(string ruleName, int ruleIndex)
        {
            ParseTree child = new ParseTree(ruleName, Tree);
            ParseTree parent = Tree;
            parent.Children.Add(child);
            Tree = child;
        }

        partial void LeaveRule(string ruleName, int ruleIndex)
        {
            Tree = Tree.Parent;
        }

    } 
```

# php - 如何从 sqlite db 中获取行？

> ID：13800038
> 
> 赞同：-2
> 
> 时间：2012-12-10T11:25:51.460
> 
> 标签：php, sqlite

我正在使用此 PHP 代码来获取行，但出现错误

```
$db = new PDO('sqlite:db/logs');

$result = $db->exec("SELECT * FROM users");

while($row = $result->fetch(SQLITE_ASSOC))
{

} 
```

我正在使用 sqlite3 和 php5，我想知道

1.  我是否使用正确的代码连接到我也使用过的数据库，`sqlite.open()`但它也出现错误？

2.  这`new PDO('sqlite:db/logs')`与数据库连接，但为什么每次都创建新数据库

3.  我的主要问题是我在while循环所在的地方遇到错误

> 在非对象上调用成员函数 fetch()

请帮帮我，我是 php 和 sqlite 的新手

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-10T11:30:29.483

你不能`while`使用**PDO**，你可以使用**程序化方法**。

一些参考：[参考链接](http://blog.digitalneurosurgeon.com/?p=947)

您可以使用`$db->exec`for `insert`&`update`查询。不是当您想获取记录时。

尝试以下更改。

```
$db = new PDO('sqlite:db/logs');
//connection code here
$result = $db->query("SELECT * FROM users"); //replace exec with query

foreach($result as $row){
    $row['field1'];
    $row['field2'];
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-10T11:30:43.587

[`PDO::exec()`](http://php.net/manual/en/pdo.exec.php)返回行数，而不是您可以获取的对象。

> PDO::exec() 返回由您发出的 SQL 语句修改或删除的行数。如果没有行受到影响，PDO::exec() 返回 0。

相反，您可以使用`query()`：

```
$result = $db->query('SELECT * FROM users');

foreach($result as $row)
{
    print_r($row);
} 
```

# javascript - 需要访问当前的 TR 或 TD

> ID：13800040
> 
> 赞同：0
> 
> 时间：2012-12-10T11:26:27.843
> 
> 标签：javascript, jquery, html

我必须根据一些业务逻辑更改表格行颜色。我的访问权限有限。我有决定 TD 内容的 PHP 代码...从那个 TD 我必须更改当前的 TR 背景颜色。

jQuery 可以提供帮助，因为它有很多遍历器和访问器。

我正在写的代码是

```
<script type="text/javascript">$(this).closest("td").css("border", "1px solid red");</script> 
```

但无法访问当前的 TD 或 TR

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T11:29:41.743

不要使用**this**，而是给元素一个 id 并使用 jQuery 获取它。在您的代码中，这没有任何意义。像：

```
<table><tr><td> <input id="myInput" type="text" /> </td></tr></table>

 //If you want to access the td
 $('#myInput').closest("td").css("border", "1px solid red");
 //If you want to access the tr
 $('#myInput').closest("tr").css("background", "red"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T11:30:02.290

在这里你可以使用 parents() 功能。

如果你的元素是 $('#el') 那么下面会给你最近的 td 和 tr

```
$('#el').parents('td').first();
$('#el').parents('tr').first(); 
```

然后您可以应用如下操作

```
$('#el').parents('td').first().css("border", "1px solid red");
$('#el').parents('tr').first().css("border", "1px solid red"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-10T11:30:23.850

您需要某种方式来定位 TD 内容或 TD 本身。如果内容是唯一的，您可以搜索关键字或词组。无论哪种方式，您都需要一个选择器 - $(this) 只是在处理程序内一次对 jquery 对象的引用。

**编辑**

我想了更多，这里有一些你可以尝试的东西。由于您只能访问内容，您可以向其中添加一些内容，例如*UPDATED*吗？如果是这样，那么您可以添加该关键字，并且使用 jQuery，我们可以添加边框、背景和删除关键字，如下所示：

```
​&lt;table cellpadding="5px" cellspacing="5px" border="1px">
    <tr><td>*UPDATED*Apple</td><td>Pie</td></tr>
    <tr><td>Orange</td><td>Crush</td></tr>
</table>​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​ 
```

-

```
var $updatedContent = $('td:contains("*UPDATED*")');

$updatedContent.closest('td').css('border', '1px solid red').closest('tr').css('background','green');
$updatedContent.text($updatedContent.text().replace('*UPDATED*', '')); 
```

​</p>

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-10T11:56:53.480

假设在最坏的情况下，您有嵌套表并且无法更改当前 TD 属性，则可以通过以下方式在其中打印一个空跨度：

```
<table>
<tr>
<td>Content 1
    <table>
    <tr>
        <td>Content 2<span data-class="very_important" /></td>
    </tr>
    </table>
</td>
</tr>
</table> 
```

比像这样向（第一个或最后一个）父 TR 添加类：

```
$(function() {
    $('span[data-class]').each(function(n) {
        var highlightClass = $(this).attr('data-class');
        $(this).parents('tr:first').addClass( highlightClass );
        $(this).remove(); /* Optional */
    });
}); 
```

现在你的 TR 有了类，你可以按照你喜欢的方式来设计它（和它的孩子）。结果代码：

```
<table>
<tr>
    <td>Content 1
        <table>
        <tr class="very_important">
            <td>Content 2</td>
        </tr>
        </table>
    </td>
</tr>
</table> 
```

# jquery - jQuery 自定义内容滚动器 - 水平和垂直滚动器

> ID：13800041
> 
> 赞同：0
> 
> 时间：2012-12-10T11:26:27.110
> 
> 标签：jquery, scrollbar, horizontal-scrolling, vertical-scrolling

在开始我写我的英语我liitle。

我有问题。在“jquery-custom-content-scroller”（[http://manos.malihu.gr/jquery-custom-content-scroller/](http://manos.malihu.gr/jquery-custom-content-scroller/)）中，滚动条是如何水平和垂直的。我想在需要时显示 scroolbars。

# matlab - 如何从绘图处理程序中绘图？

> ID：13800043
> 
> 赞同：5
> 
> 时间：2012-12-10T11:26:33.937
> 
> 标签：matlab

我有情节的处理程序，或图形的句柄示例：

```
h = plot([1:0.2:10])
xx=get(h)
xx = 

           DisplayName: ''
            Annotation: [1x1 handle]
                 Color: [0 0 1]
             LineStyle: '-'
             LineWidth: 0.5000
                Marker: 'none'
            MarkerSize: 6
       MarkerEdgeColor: 'auto'
       MarkerFaceColor: 'none'
                 XData: [1x46 double]
                 YData: [1x46 double]
                 ZData: [1x0 double]
          BeingDeleted: 'off'
         ButtonDownFcn: []
              Children: [0x1 double]
              Clipping: 'on'
             CreateFcn: []
             DeleteFcn: []
            BusyAction: 'queue'
      HandleVisibility: 'on'
               HitTest: 'on'
         Interruptible: 'on'
              Selected: 'off'
    SelectionHighlight: 'on'
                   Tag: ''
                  Type: 'line'
         UIContextMenu: []
              UserData: []
               Visible: 'on'
                Parent: 173.0107
             XDataMode: 'auto'
           XDataSource: ''
           YDataSource: ''
           ZDataSource: '' 
```

这个处理程序包含所有的情节信息，我怎样才能再次绘制出来？这是一个简单的示例，`plot`但它也应该可以使用`slice`。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-10T13:06:19.110

如果我正确理解您的问题，您想使用 struct 重现绘图`xx`。cook 提供的答案是正确的，但这是实现您想要的更短的方法：

```
figure
h2 = plot(0);
ro_props = [fieldnames(rmfield(xx, fieldnames(set(h2)))); 'Parent'];
xx = rmfield(xx, ro_props);
set(h2, xx) 
```

最后一个`set`命令使用 struct`xx`设置所有值并重现您的绘图。请注意，`ro_props`在`xx`调用`set`.

*[编辑：修改答案以根据此建议](https://stackoverflow.com/a/13803861/1336150)自动检测只读属性。*

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-10T12:11:20.080

你可以使用copyobj

```
h = plot([1:0.2:10])
xx=get(h)
figure
copyobj(h,gca) 
```

这会将绘图复制到一个新图形上

见： http: [//www.mathworks.com/help/matlab/ref/copyobj.html](http://www.mathworks.com/help/matlab/ref/copyobj.html)

更新

我认为您不能直接从结构 xx 创建，尝试这样做：

```
h = plot([1:0.2:10])
xx=get(h)

h2 = plot(0,0)
set(h2,xx) 
```

引发错误

```
Error using graph2d.lineseries/set
Changing the 'Annotation' property of line is not allowed. 
```

您需要手动设置一些属性值，如下所示：

```
h = plot([1:0.2:10])
xx=get(h)

figure
h2 = plot(0.0)

names = fieldnames(xx);

fieldCount = size(names,1);

protectedNames = {'DisplayName' 'Annotation' 'BeingDeleted' 'Type' 'Parent'}

for i = 1:fieldCount
    name = names{i};
    if ( ismember(protectedNames, name) == false  )

        set(h2, name, getfield(xx,name))

    end
end

yy=get(h2) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-10T12:00:21.490

我不知道是否有更简单的方法，但是您在 XData 和 YData 中有 x,y 值。

做：

```
figure
plot(get(h,'XData'),get(h,'YData')) 
```

# mongodb - 如何在 MongoDB 中为每日增量建模

> ID：13800046
> 
> 赞同：0
> 
> 时间：2012-12-10T11:26:47.713
> 
> 标签：mongodb, performance, time-series, nosql

我有一些要在 MongoDB 中建模的股票价格数据。从逻辑上讲，每个股票价格都有一个日期、股票名称和与之相关的价格。该应用程序的主要目的之一是模拟股票价格的每日变化。

我有两个与此问题相关的问题。

1) 考虑到我将在其上运行的查询类型，在 MongoDB 中对此类数据进行建模的最佳方法是什么。

更新！！！我做了一些实验，并决定对数据进行非规范化并确保我有适当的列索引。我实际上并没有看到嵌套我正在运行的查询类型的数据的任何性能差异，并且它使编写聚合例程的过程变得复杂。感谢拉克西特的建议！

2) 给定 1) 在 MongoDB 中编写这些每日更改样式查询的最佳方法是什么？

* * *

因此，从现在开始，我每个日期和库存都有一份文件。

```
{
    {"stock":"Bob",
     "date":"2012-12-01",
     "price":99.99                         
    },
    {"stock":"Bob",
     "date":"2012-12-02",
     "price":99.99                         
    },
    {"stock":"Bob",
     "date":"2012-12-03",
     "price":99.99                         
    },
    {"stock":"Ted",
     "date":"2012-12-01",
     "price":99.99                         
    },
    {"stock":"Ted",
     "date":"2012-12-02",
     "price":99.99                         
    },
    {"stock":"Ted",
     "date":"2012-12-03",
     "price":99.99                         
    },
    .
    .
    .

} 
```

我对2的看法：

我想生成显示股票价格每日变化的报告。考虑到文档大小的限制，我可能需要将其拆分为每只股票和每年的增量或其他内容，但这更多是实现细节。本质上，我想输出以下形式的文档：

```
{
 {"stock":"Bob",
          "prices": {[{"fromDate":"2012-12-01","toDate":"2012-12-02","delta":-1.0},
                     {"fromDate":"2012-12-02","toDate":"2012-12-03","delta":-1.0},
                     .
                     .
                     .]}
 },
 {"stock":"Ted",
          "prices": {[{"fromDate":"2012-12-01","toDate":"2012-12-02","delta":1.0},
                     {"fromDate":"2012-12-02","toDate":"2012-12-03","delta":1.0},
                     .
                     .
                     .]}
 },
 .
 .
 .
} 
```

理想情况下，我希望能够临时返回这些数据。我很确定这可以使用 map-reduce 来完成，但我想知道是否有办法使用新的聚合框架来做到这一点？在我开始研究 mongodb 之前，我假设以这种方式进行建模更改将是一个失败的常见用例，但到目前为止，我还没有遇到过类似的情况。

您可以提供的任何建议都将非常有用。随着我自己的研究进展，我会更新这篇文章。

谢谢，

马特。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T12:30:48.240

看起来在上述两种情况下，您在嵌入式文档中的数据已更改（添加）！

简单结构 {stockname:'bob',date:date1,price:200} {stockname:'bob',date:date2,price:220} 等怎么样？

甚至

{stockname:'bob',date:date2,price:200, lastdate:date1,pricedelta:(price2-price1)}

# php - XML 解析错误：文档元素后出现垃圾 - PHP

> ID：13800051
> 
> 赞同：0
> 
> 时间：2012-12-10T11:27:01.163
> 
> 标签：php, html, css, xml, xml-parsing

我在 PHP 中动态创建 XML 文件。我从[StackOverflow](https://stackoverflow.com/questions/486757/how-to-generate-xml-file-dynamically-using-php)获得提示。我正在尝试该问题的第一个答案。显然它工作得很好，在某些情况下不工作。我将数组动态传递到该 xml 文件中。字段描述包含一些我认为如此的特殊字符，我收到错误“XML Parsing Error: junk after document element”。我尝试了各种可能性。以下是其中之一，它将使特殊字符转义。

```
echo "<!DOCTYPE html PUBLIC '-//W3C//DTD XHTML 1.0 Transitional//EN'   
            'http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd'>"; 
```

但它并不适合我。请给我一些建议如何解决这个问题。

# python - 仅在大陆上绘制数据时，程序永远运行而不会出错

> ID：13800056
> 
> 赞同：-1
> 
> 时间：2012-12-10T11:27:09.493
> 
> 标签：python, matplotlib, matplotlib-basemap

我试图仅在大陆上绘制数据。我之前问过一个关于这个的问题，我在[这里](https://stackoverflow.com/a/13796829/1819734)得到了答案。现在，当我在代码中实现它时，程序将运行而不会出现错误。

但是，它永远运行。当我使用`ctrl + C`强制停止它时，它会追溯到`"if not (map.is_land(X[i], Y[i])):"`，所以我认为这里有问题。但我无法弄清楚。

这是涉及挑选非大陆数据并删除它们的代码部分：

```
X, Y = map(Lon,Lat)
ocean = []
for i in range(len(X)):
    if not (map.is_land(X[i], Y[i])):
        ocean.append(i)

X_new = np.delete(X, ocean)
Y_new = np.delete(Y, ocean)
HDO_new = np.delete(HDO, ocean) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T11:51:16.457

由于您使用`for`循环，因此程序无论如何都应该停止，唯一的问题是`X`. 我只能给两个建议：

1）尝试`len(X)`在输入for cicle之前打印出的值，看看有多大

2)如果您使用 python 2.x，请尝试使用`xrange`而不是`range`

还要记住，使用带有十万个元素的列表似乎很慢。如果可以的话，最终尝试使用更小的数据样本

# actionscript-3 - AS3 组合框体积计算器

> ID：13800063
> 
> 赞同：0
> 
> 时间：2012-12-10T11:27:35.673
> 
> 标签：actionscript-3, flash, math, combobox, volume

我正在尝试使用 2 个组合框创建一个 AS3 体积计算器，一个用于高度，另一个用于直径。这些值的高度为 600 毫米到 2000 毫米，以 100 为增量，直径为 300 毫米到 600 毫米，以 50 为增量，最终数字输出到文本输入中。

我已经计算出这个特殊形状的体积计算方法，它是一个圆柱体，顶部有一个半球，公式是；

**(高度-190) * (直径-6) / 2 * (直径-6) / 2 * 3.141 / 1000000**

190 = 半球高度

6 = 公差

有人对我将如何做这件事有任何想法吗？

提前谢谢了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T13:18:15.683

我首先将组合框数据提供者（它们包含的值的列表）添加到`fx:declarations`标签中：

```
<fx:Declarations>
  <s:ArrayList id="height_data">
    <fx:int>600</fx:int>
    <fx:int>700</fx:int>
    <fx:int>800</fx:int>
    <fx:int>900</fx:int>
    <fx:int>1000</fx:int>
    <fx:int>1100</fx:int>
    <fx:int>1200</fx:int>
    <fx:int>1300</fx:int>
    <fx:int>1400</fx:int>
    <fx:int>1500</fx:int>
    <fx:int>1600</fx:int>
    <fx:int>1700</fx:int>
    <fx:int>1800</fx:int>
    <fx:int>1900</fx:int>
    <fx:int>2000</fx:int>
  </s:ArrayList>
  <!-- similar list for diameter -->
</fx:Declarations> 
```

然后添加两个组合框，以及一个用于输出到表单的区域（此处堆叠在 a 中`VGroup`，但您可以随意排列它们）：

```
<s:VGroup>
  <s:ComboBox id="shape_height" dataProvider="{height_data}"
              change="calculate_volume()"></s:ComboBox>
  <s:ComboBox id="shape_diameter" dataProvider="{diameter_data}"
              change="calculate_volume()"></s:ComboBox>
  <s:TextArea id="output"></s:TextArea>
</s:VGroup> 
```

然后创建一个执行计算的函数：

```
<fx:Script>
  <![CDATA[
    public function calculate_volume():void {
      var height:int = parseInt(shape_height.selectedItem);
      var diameter:int = parseInt(shape_diameter.selectedItem);
      if(!isNaN(height) && !isNaN(diameter)) {
        // perform calculation
        // store answer in volume variable
        output.appendText(volume.toString() + "\n");
      }
    }
  ]]>
</fx:Script> 
```

# python - 获取查询集中每个实例的 FK 集

> ID：13800066
> 
> 赞同：1
> 
> 时间：2012-12-10T11:27:53.520
> 
> 标签：python, django

我有一个名为 A 的树状 Django 模型，由 django-mptt 完成。

```
class A(MPTTModel):
    parent = TreeForeignKey('self') 
```

此类自动具有“儿童”管理器，因此我可以轻松获取子树

还有另一个模型，它有 FK 链接到 A：

```
class SomeModel(models.Model):
    link_to_a = models.ForeignKey(A) 
```

我知道，如果我想获得 A 实例的 SomeModel 集，我可以这样做：

```
a = A.objects.filter(blah)
a.somemodel_set.all() 
```

问题是：在A模型下的某些查询集中获取每个实例的somemodel_set的最pythonic方法是什么，即我想要4个示例：

```
some_A_instance.children.all().get_all_somemodel_instances() 
```

并且 get_all_somemodel_instances() 应该检索每个孩子的压缩查询集

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T12:43:12.330

您只需要一个列表中的相关项目，还是需要将每个集合与其父项关联？如果是前者，您可以通过以下方式一次性获得它们：

```
related_items = SomeModel.objects.filter(link_to_a=some_A_instance.children.all()) 
```

它将执行一个查询（带有子查询）来获取所有内容。

否则，您可以使用[`prefetch_related()`](https://docs.djangoproject.com/en/1.4/ref/models/querysets/#prefetch-related)一次性获取所有项目的相关集：

```
items = some_A_instance.children.all().prefetch_related('somemodel_set') 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T12:30:06.033

这应该这样做：

```
[child.somemodel_set.all() for child in some_A_instance.children.all()] 
```

# asp.net - 像下划线一样的文本框

> ID：13800069
> 
> 赞同：5
> 
> 时间：2012-12-10T11:28:24.703
> 
> 标签：asp.net, css, textbox

有没有办法让 asp.net 控件中的文本框仅显示为下划线，就像在纸质文档中放置空白用于文本输入一样？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-12-10T11:30:37.783

应用固体`border-bottom`：

```
<asp:TextBox id="txt" runat="server" CssClass="underlined" /> 
```

**CSS：**

```
input.underlined
{
   border:0;
   border-bottom:solid 1px #000;
   outline:none; /* prevents textbox highlight in chrome */
} 
```

[**-- 查看工作演示 --**](http://jsfiddle.net/4hpvQ/3/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T11:52:33.697

我认为如果您只想在打印时更改它，那么您应该像这样使用

**对于普通屏幕**

```
@media screen
{
   input.underlined
   {
    /*put your attributes here*/
   }
} 
```

**用于打印屏幕**

```
@media print
{
  input.underlined
  {
    border:0;
    border-bottom:solid 1px #000;
   }
} 
```

# .htaccess - htaccess RewriteRule *.php to /*/

> ID：13800070
> 
> 赞同：2
> 
> 时间：2012-12-10T11:28:26.423
> 
> 标签：.htaccess, mod-rewrite, seo

我只是找不到我需要的正确解决方案，所以我希望有人能在这里帮助我。

我现在有这个文件的网站：

```
/admin/
/images/
/js/
about.php
index.php
news.php
questions.php 
```

所以我现在的网址是： www.mydomain.com/about.php www.mydomain.com/news.php ...

我想要 www.mydomain.com/about/, w​​ww.mydomain.com/news/,...

我已经尝试了很多我发现的东西，但它们都没有像它应该的那样工作，或者它弄乱了其他东西。

我最接近的是：

```
RewriteRule about/ about.php
RewriteRule about about.php 
```

但是，如果我在包含名称的代码中使用一些图像（例如图像/about-me.jpg），这也会搞砸 - 可能是因为第二个语句。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T12:03:12.020

通过启用 mod_rewrite 和 .htaccess `httpd.conf`，然后将此代码放在您`.htaccess`的`DOCUMENT_ROOT`目录下：

```
Options +FollowSymLinks -MultiViews
# Turn mod_rewrite on
RewriteEngine On
RewriteBase /

## hide .php extension
# To externally redirect /dir/foo.php to /dir/foo
RewriteCond %{THE_REQUEST} ^[A-Z]{3,}\s([^.]+)\.php [NC]
RewriteRule ^ %1 [R,L,NC]

## To internally forward /dir/foo to /dir/foo.php
RewriteCond %{REQUEST_FILENAME}.php -f
RewriteRule ^ %{REQUEST_FILENAME}.php [L] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T14:03:07.353

为了让生活更简单，我将停止使用基于目录的 URL

/关于/

并使用更简单的文件基础 URL

/关于

该额外的斜线将页面移动到子目录中，并且页面中的所有相对引用都将中断。

或者，您可以更改所有链接、包含和图像 URL，以确保它们都相对于域的根目录。为此，您始终在 URL 前添加一个斜杠 (/) 或将其设为完整 URL。

并使您的规则更具体：

重写规则 ^/about$ about.php

那些额外的 ^$ 表示开始和结束，所以它必须是完全匹配的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-11-15T03:41:40.533

这对我有用

```
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(about)$ about.php 
```

# c# - 使用实体框架更新数据库引发空引用异常

> ID：13800073
> 
> 赞同：1
> 
> 时间：2012-12-10T11:28:31.053
> 
> 标签：c#, wpf, entity-framework, data-binding

我正在使用实体框架为组织创建一个桌面应用程序，以将他们的数据输入数据库以显示他们的记录。

我创建了一个`tab control`using a `data template`，它已经过验证，使他们能够保存必要的必填字段，到目前为止一切都很好。

我在页面上使用了一系列不同的数据网格来显示已添加的详细信息。在此页面内，它包含一系列不同`commands`的允许用户添加、更新或删除内容（取决于表，只允许他们更新）。

但这就是我陷入困境的地方。到目前为止，add 和 delete 方法工作得很好，但是当涉及到更新表时，它会抛出一个`Null Reference Exception`.

以下是一些代码片段；*视图模型：*

```
 public List<Employee> LoadEmployee
    {
        get
        {
            using (DBEntities context = new DBEntities())
            {
                var query = from e in context.Employees
                            select e;
                return query.ToList<Employee>();
            }
        }
    }

    public void UpdateEmployee()
    {
        var employee = new Employee();

        using (DBEntities context = new DBEntities())
        {
            //var emp = context.Employees.Where(e => e.EmployeeID == employee.EmployeeID).FirstOrDefault();

            var emp = (from a in context.Employees
                       where a.EmployeeID == EmployeeID
                       select a).FirstOrDefault();

            if (emp == null)
            {
                emp.EmployeeID = EmployeeID;
                emp.OrganisationID = OrganisationID;
                emp.Title = Title;
                emp.FirstName = FirstName;
                emp.Surname = Surname;
                emp.Position = Position;
                emp.DateOfBirth = DateOfBirth;
                emp.Address = Address;
                emp.Country = Country;
                emp.Postcode = Postcode;
                emp.PhoneNumber = PhoneNumber;
                emp.MobileNumber = MobileNumber;
                emp.FaxNumber = FaxNumber;
                emp.Email = Email;
                emp.NINumber = NINumber;
                emp.ChargableResource = ChargableResource;
                emp.ChargeOutRate = ChargeOutRate;
                emp.TimeSheetRequired = TimeSheetRequired;
                emp.WorkShift = WorkShift;
                emp.WorkShift = BenefitsProvided;

                //context.Employees.Attach(emp);
                context.SaveChanges();

                MessageBox.Show("Updated Employee Details");
            }
            else
            {
                MessageBox.Show("Unable to update selected item.");
            }
        }
    }

    public Employee _SelectedEmployee;
    public Employee SelectedEmployee
    {
        get
        {
            return _SelectedEmployee;
        }
        set
        {
            if (_SelectedEmployee == value)
                return;

            _SelectedEmployee = value;
            OnPropertyChanged("_SelectedEmployee");
        }
    } 
```

*代码背后：*

```
 private void Window_Loaded(object sender, RoutedEventArgs e)
    {
        listview.DataContext = new EmployeeViewModel();
    }

    private void btnupdate_Click(object sender, RoutedEventArgs e)
    {
        var emp = new EmployeeViewModel();

        Employee selected = listview.SelectedItem as Employee;

        if (selected == null)
            MessageBox.Show("You must select a 'Employee' before updating.");
        else
        {
        UpdateEmployeeView update = new UpdateEmployeeView();

        update.ShowDialog();
        Window_Loaded(null, null);
        }
    } 
```

xml;

```
 IsSynchronizedWithCurrentItem="False"
            ItemsSource="{Binding LoadEmployee}"
            SelectedItem="{Binding SelectEmployee}" Grid.RowSpan="2"> 
```

首先，当用户从数据网格中选择一行时，我希望更新该特定行。我已将我的视图模型中的属性绑定到我的 xaml 中的文本字段，以便它传递到视图模型。我还尝试在我的视图模型中对 ID 属性进行硬编码；`public int _EmployeeID = 11; public int _OrganisationID = 4;`但这仍然会抛出`Null Reference Exception`.

谁能帮我解决这个问题？我一直在尝试各种不同的方法，但仍然没有用。我是 WPF 的新手并试图实现 MVVM，显然它不是完全的 MVVM，但我正在缓慢但肯定地学习实现它的正确方法。干杯。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T11:32:13.883

```
if (emp == null)
 { 
```

添加行：

```
emp = new Employee(); 
```

否则，您将值分配给 null 变量。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-18T10:24:45.783

在我的代码隐藏中，我已将其映射`TextBox`到`Entities`EF 中（我知道这是不正确的实现方式，`MVVM`但由于我仍在学习，这将被更改。

基本上，我将所有的分配给`textbox`项目，而不是分配 ID。因此它不允许我更新，因为由于没有分配 ID，它无法识别表中要更新的项目。

像这样；

```
txtID.Text = type.OrganisationTypeDetailID.ToString(); 
```

# mysql - mysql分组错误

> ID：13800074
> 
> 赞同：2
> 
> 时间：2012-12-10T11:28:34.223
> 
> 标签：mysql, sql, group-by, where

下面是我正在使用的查询

```
SELECT 
  `names`, sum(cashin.amount) as amountin, 
  sum(cashout.amount) as amountout, 
  (sum(cashin.amount) - sum(cashout.amount)) as total 
FROM (`client`) 
INNER JOIN `cashin` ON `cashin`.`clientid`=`client`.`id` 
INNER JOIN `cashout` ON `cashout`.`clientid`=`client`.`id` 
WHERE (sum(cashin.amount) - sum(cashout.amount)) < 0 
GROUP BY `client`.`id` 
```

问题是我得到一个错误：

> `Invalid use of group function`

用字段别名替换 where 子句中的函数`'total'`我仍然得到一个错误：

> `Unknown column total`

如何修复此查询？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T11:30:11.653

使用`HAVING`代替`WHERE`，并在子句之前放置`GROUP BY names`子句代替，如下所示：`GROUP BY id``HAVING`

```
SELECT 
  `names`, 
  sum(cashin.amount) as amountin, 
  sum(cashout.amount) as amountout, 
  (sum(cashin.amount) - sum(cashout.amount)) as total 
FROM client
INNER JOIN `cashin` ON `cashin`.`clientid`=`client`.`id` 
INNER JOIN `cashout` ON `cashout`.`clientid`=`client`.`id` 
GROUP BY names
HAVING (sum(cashin.amount) - sum(cashout.amount)) < 0 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T11:31:56.053

尝试这个 ：：

```
SELECT 
  `names`, 
  sum(cashin.amount) as amountin, 
  sum(cashout.amount) as amountout, 
  (sum(cashin.amount) - sum(cashout.amount)) as total 
FROM client
INNER JOIN `cashin` ON `cashin`.`clientid`=`client`.`id` 
INNER JOIN `cashout` ON `cashout`.`clientid`=`client`.`id` 
GROUP BY names
HAVING total < 0 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-10T11:33:07.647

作为使用`HAVING`子句的替代方法，您可以将查询包装在`SELECT`语句中，然后将过滤器放在`WHERE`子句中：

```
select names,
  amountin,
  amountout,
  total
from
(
  SELECT 
    `names`, 
    sum(cashin.amount) as amountin, 
    sum(cashout.amount) as amountout, 
    (sum(cashin.amount) - sum(cashout.amount)) as total 
  FROM client
  INNER JOIN `cashin` ON `cashin`.`clientid`=`client`.`id` 
  INNER JOIN `cashout` ON `cashout`.`clientid`=`client`.`id` 
  GROUP BY names
) src
where total < 0 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-10T12:08:47.307

你给这个取别名

```
 (sum(cashin.amount) - sum(cashout.amount)) as total 
```

总的来说，为什么你不在这里使用它？

```
 WHERE (sum(cashin.amount) - sum(cashout.amount)) < 0 
```

将其替换为

```
 WHERE total < 0 
```

和这个

```
 FROM (`client`) 
```

只需使用

```
 FROM `client` 
```

和这个

```
 (sum(cashin.amount) - sum(cashout.amount)) as total  // line 4 
```

将其替换为

```
 (amountin - amountout) as total 
```

它会对你有好处。

# php - 阿拉伯语订单的发票 Pdf 未在 magento 中打印正确的字母

> ID：13800078
> 
> 赞同：1
> 
> 时间：2012-12-10T11:28:45.067
> 
> 标签：php, magento

阿拉伯订单的发票 Pdf 没有在 magento 中打印正确的字母。它正在打印*******用于阿拉伯字母。请为此提出解决方案

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T13:38:38.567

```
 $page = $pdf->newPage(Zend_Pdf_Page::SIZE_A4);
    $pdf->pages[] = $page;
    $this->_setFontRegular($page,12);
    $page->setFillColor(new Zend_Pdf_Color_Rgb(0.4, 0.4, 0.4));
    $page->drawText('Text', 15, $this->y, 'CP1256'); 
```

尝试这个。

# file - 下载重定向的文件？

> ID：13800079
> 
> 赞同：0
> 
> 时间：2012-12-10T11:28:48.777
> 
> 标签：file, redirect, download

我曾尝试在 Google 和 StackOverFlow 上搜索此内容，但根本找不到我要查找的内容，可能是根本不可能，但我想我还是会问。

我正在寻找一种使文件将用户重定向到另一个页面的方法，用户将通过单击按钮下载文件。

这是一个 Prestashop 可下载产品，我试图将用户重定向到我们网站的另一部分（不是直接可见的），以便能够在查看器中查看杂志等。

现在 Prestashop 本身就设置为下载文件，这是我们不想要的，因此使用查看器，但是没有办法简单地提供一个链接来将用户发送到而不是物理文件，比如PDF什么的。我不能真正修改 Prestashop 生成的按钮，如果我在其中添加带有链接的 PDF 文件，它会破坏目的，因为我不希望人们在文档中拥有链接（我知道他们可以从他们的历史等）。因此，我认为如果可能的话，使用重定向的文档会更容易。

所以简而言之，是否有可能制作一个文件，一旦人们在他们的计算机上打开/下载这个文件，就会将他们发送到某个网页？

如果是的话，人们会怎么做呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T11:32:41.357

你能让用户下载一个 HTML 文件吗？如果是这样，您可以使用“元刷新”将用户重定向到您的私人页面。

这确实意味着未受保护的链接将在下载的 HTML 文件中可见 - 也许您可以使用 JavaScript 对其进行混淆，以使用户更难找到受保护的 URL。

[http://www.w3.org/TR/WCAG20-TECHS/H76](http://www.w3.org/TR/WCAG20-TECHS/H76)

# java - 如何从数据库中删除不再连接到中央服务器的节点？

> ID：13800081
> 
> 赞同：0
> 
> 时间：2012-12-10T11:29:00.323
> 
> 标签：java, jsp

在我的网络应用程序中，客户端既是`server`又`client`是。就像点对点应用程序一样。客户端启动网络应用程序后，首先要做的是**：**检查互联网连接是否可用*（加载 jsp 页面时）*。如果连接可用，则将节点信息发送到远程数据库。这只是为了知道连接到主服务器的节点的地址。

现在，如果节点与服务器断开连接*（由于互联网连接失败或其他原因）*，我希望从数据库中删除节点的信息。

一种方法，我认为实现这一点是在主服务器上启动一个线程，该线程不断尝试连接到数据库中的所有节点。但我对这个选项不满意。可能还有另一种方式。或者我可以以更好的方式实现*这*一点。

请建议，我该怎么做？

而且我必须在主服务器上启动一个线程，我应该从jsp页面调用线程函数吗？像 ：

```
<%-- This is a jsp page --%>
.....
........
<%-- start a new thread that does that task --%>

<% new ThreadClass().startContinuousThread(); %>
......
......... 
```

***注意：***每个节点都连接到中央服务器：

```
 final URL url = new URL("http://sevrer/servlet");
      final HttpURLConnection urlc = (HttpURLConnection) url.openConnection();
      int responseCode = urlc.getResponseCode();
      if(responseCode == 200){
          connected = true;
          System.out.println("Initial connection to the server successful");
      }

      // send the node information to the servlet via a 'parameterized query'. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T11:53:12.570

我建议您不要在服务器端进行此检查，而是在客户端发送上进行此检查。类似于以配置的时间间隔发送 ping 请求。就像连接到服务器的代码一样，编写定期调用另一个 servlet 的代码。

```
final URL url = new URL("http://sevrer/pingServlet");
final HttpURLConnection urlc = (HttpURLConnection) url.openConnection();
int responseCode = urlc.getResponseCode(); 
```

服务器将只保留一个计时器任务，该任务仅检查到达服务器中每个节点条目的最后一个 ping 请求。如果任何节点的 ping 条目未在配置的超时间隔内到达，则服务器将从其数据库中清除该节点。

此解决方案的优点是您的服务器不会因每次都启动请求而超载。但是，我没有看到 I/O 端有任何改进，但是使用此解决方案，服务器端逻辑将非常干净和简单。

# jquery - 从 jquery 中调用支持 bean 方法

> ID：13800088
> 
> 赞同：2
> 
> 时间：2012-12-10T11:29:22.587
> 
> 标签：jquery, jsf, dialog, backing-beans

我正在处理一个 JSF 文件，其中我有一个 javascript 函数，并且涉及到一些 jquery。我设计了一个带有两个按钮的对话框：1）确定和 2）取消。我设计它的方式是取消按钮将中止该过程，这没有问题。
但是，我想要完成的是，当用户按下确定时，程序应该调用一个支持 bean（java bean）方法，你们中的任何人都能够管理这个吗？

感谢您的所有帮助和提示

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T11:43:43.307

至此，您需要让 jQuery 在 JSF 的 HTML 表示上触发 click 事件`<h:commandButton>`。如有必要，您可以使用 CSS 隐藏表单/按钮`display:none`。

例如

```
<h:form id="formId" style="display:none">
    ...
    <h:commandButton id="buttonId" ... />
</h:form> 
```

和

```
$("[id='formId:buttonId']").click(); 
```

然而，这有点笨拙。为什么不直接使用`<h:commandButton>`“确定”按钮？此外，从长远来看，为 JSF 重新发明基于 jQuery 的组件可能会很痛苦。例如，您是否看过[PrimeFaces](http://primefaces.org)来避免头痛和样板代码？它已经在使用 jQuery 和 jQuery UI。另见例如[`<p:confirmDialog>`展示](http://www.primefaces.org/showcase/ui/confirmDialog.jsf)。

### 也可以看看：

*   [当 UI 可以由 CSS、HTML、JavaScript、jQuery 实现时，JSF 需要什么？](https://stackoverflow.com/questions/4421839/what-is-the-need-of-jsf-when-ui-can-be-achieved-from-css-html-javascript-jquery/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T16:40:25.990

I think you just need this :

```
<h:form>
   <h:commandButton value="OK" action="#{bean.submit}" />
</h:form> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-11T17:12:43.063

如果你包含richfaces，你可以使用丰富的jsFunction组件来调用你支持bean的action方法，你可以看到[http://livedemo.exadel.com/richfaces-demo/richfaces/jsFunction.jsf;jsessionid=168EE2D49DC8BB1BA781B1C880B4B511?c=jsFunction&tab=用法](http://livedemo.exadel.com/richfaces-demo/richfaces/jsFunction.jsf;jsessionid=168EE2D49DC8BB1BA781B1C880B4B511?c=jsFunction&tab=usage)

```
<a4j:jsFunction name="pressOK" reRender="showname" action="#{bean.action}" oncomplete="callback()">

    </a4j:jsFunction> 
```

有了这个，你可以调用javascript函数pressOK()

# c# - 跨多个回发传递在 ASP.NET C# 中动态创建的复选框

> ID：13800094
> 
> 赞同：0
> 
> 时间：2012-12-10T11:29:41.777
> 
> 标签：c#, asp.net

我遇到了一个问题，我将其简化为下面的代码。我在 aspx 页面上有两个按钮。两个按钮都有`runat="server"`属性并且在`<form runat="server" >`标签内

**btnGetData**

```
 protected void btnGetData_Click(object sender, EventArgs e)
 {
            headlines = masg.Split('*');
            //Response.Write(headlines.Length);
            cb = new CheckBox[headlines.Length];

            for (int i = 0; i < headlines.Length; i++)
            {
                cb[i] = new CheckBox();

                cb[i].Text = headlines[i];
                Literal br = new Literal();
                br.Text = "<br/>";
                Form.Controls.Add(cb[i]);
                Form.Controls.Add(br);
            }

 } 
```

单击“获取数据”按钮时，会生成多个带有相关文本的复选框。

我单击一些复选框，然后单击显示按钮，**如果工作正确**，该按钮应将选定的复选框文本组合成单个字符串并显示它。

**显示**

```
protected void btnShow_Click(object sender, EventArgs e)
{

            for (int i = 0; i < headlines.Length; i++)
            {
                if (cb[i].Checked)
                    newmsg += cb[i].Text + '*';
            }
            Response.Write("<BR><BR><BR>" + newmsg);

} 
```

但是，一旦我单击 GetData 按钮，复选框就会丢失，因为它们不会持续存在。我阅读了有关`SESSION`变量的信息，但不知道如何应用它们。我已将以下变量声明为全局变量，以便可以在整个页面中访问它们。

```
CheckBox[] cb;
string[] headlines;
string masg; 
```

请提供代码帮助。请向我提供代码输入。如果我不能说清楚，我会完善我的问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-10T11:35:28.383

由于 HTTP 的无状态性，您需要在每个回发（in`Page_Init`或）上重新创建动态创建的控件。`Page_Load`你需要知道你必须重新创建什么。因此，您可以将已创建的数量保存`CheckBoxes`在`ViewState`变量中。

您只需要分配与以前相同的 ID 并`Page_Load`最迟添加它们。如果您知道要创建的控件的数量，则可以通过将计数器变量附加到控件 ID 来从计数器变量中派生 ID。

推荐读物：

*   [真正了解动态控制](http://weblogs.asp.net/infinitiesloop/archive/2006/08/25/TRULY-Understanding-Dynamic-Controls-_2800_Part-1_2900_.aspx)
*   [页面生命周期](http://msdn.microsoft.com/en-us/library/ms178472.aspx)

或者您使用像[Repeater](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.repeater.aspx)这样自动执行此操作的内置[数据绑定控件之一。](http://msdn.microsoft.com/en-us/library/ms228214.aspx)你只需要设置它们并调用()。`DataSource``DataBind`

以下是我对具有实施细节的类似问题的回答：

*   [C＃](https://stackoverflow.com/a/9276160/284240)
*   [VB.NET (+ C#)](https://stackoverflow.com/questions/5266482/load-dynamic-control-from-a-dropdownlist-event-handler-how-to-preserve-the-cont/5266670#5266670)

# c# - 在 Visual Studio 中选择哪个选项？

> ID：13800098
> 
> 赞同：-4
> 
> 时间：2012-12-10T11:29:52.800
> 
> 标签：c#

希望我不会因为一个愚蠢的简单问题而被标记...

我之前写过几个 Windows 窗体应用程序（非常非常基础！），现在我的经理要我写一个 Web 前端应用程序，在其中我将服务器放入文本框并按 Enter，然后它会显示有关服务器的一些设置.

当我进入 Visual Studio 新项目时，我应该选择哪个项目来执行此操作？这将在 C# 中，选项如下：

1.  Windows 窗体应用程序
2.  WPF 应用程序
3.  控制台应用程序
4.  类库
5.  WPF 浏览器应用程序
6.  空项目
7.  视窗服务
8.  WPF 自定义控件库
9.  WPF 用户控件库
10.  Windows 窗体控件库

我的目标是在后端编写代码，然后将 ASP.net 网页链接到代码，以便它读取有关服务器上的设置的信息并显示网页上的所有内容。

ASP.net 是执行此操作的最佳方式还是类似 WPF 的方式？从来没有做过，所以想找一些我可以一次又一次使用的东西（并且易于学习和实施！）

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T11:35:13.840

如果要创建 Web 应用程序，请不要在左侧的树形视图中选择“Windows”。改为选择“网络”。那里有一大堆可供选择的 ASP.NET 应用程序模板。我建议您使用“ASP.NET MVC 4 Web 应用程序”或经典的“ASP.NET Web 应用程序”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T11:34:58.567

WPF 是基于 Windows 桌面的。创建项目时，您需要在左侧面板中选择“Web Projects”。您想通过 Web 表单（更容易学习）或 MVC（更适合大型项目）来使用 ASP .NET。Silverlight 就像 Web 的 WPF，但对于您所追求的可能有点矫枉过正。

一个让你开始的地方：http: [//asp.net-tutorials.com/basics/hello-world/](http://asp.net-tutorials.com/basics/hello-world/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-10T11:36:56.507

> 我的经理要我编写一个 Web 前端应用程序
> 
> 当我进入 Visual Studio 新项目时，我应该选择哪个项目来执行此操作？

您想在项目模板浏览器中单击 C# 下 的**Web选项卡并为****ASP.NET Web 应用程序**选择模板，或者如果您有足够的信心，您甚至可以选择 MVC 方法。这在很大程度上取决于您的技能水平！您将需要 Visual Web Developer（2010 及更早版本）、Visual Studio for Web（2012）或非 Express Edition 且已安装 Web 模板的 Visual Studio 版本。

仅供参考……至于您的项目模板列表，这就是它们**不**适合 Web 应用程序的原因。

**Windows Forms Application** 基于Windows Forms技术的桌面应用程序（WPF是WinForms的继承者）

**基于 Windows Presentation Foundation 技术的**WPF Application桌面应用程序****

 ****控制台应用程序** 基于 MS-DOS 样式文本的“控制台”应用程序。

**类库** 纯代码编译成 DLL，因此不能直接执行。

**WPF 浏览器应用程序** 类似于“WPF 应用程序”，但它旨在在浏览器中运行。

**空项目** 做它在锡上说的！

**Windows 服务** 在后台运行的应用程序，有限/无用户交互。

**WPF 自定义控件库** 允许创建自定义 WPF 控件，用于 WPF 应用程序。

**WPF User Control Library** Allows custom WPF user controls to be created, for use with a WPF application.

**Windows Forms Control Library** Allows custom WinForms controls to be created, for use with a WinForms application.**

# asp.net - 如何匹配一个表达式而不匹配另一个表达式

> ID：13800100
> 
> 赞同：1
> 
> 时间：2012-12-10T11:29:58.240
> 
> 标签：asp.net, .net, regex

我正在尝试创建一个 .NET 正则表达式（用于 ASP.NET RegularExpressionValidator 控件），它与 [First Name][Space][Surname] 格式的名称匹配，但如果输入特定名称*则不*匹配，例如米老鼠

此表达式适用于第一部分：

```
^[a-zA-Z]{2,}\s{1}[a-zA-Z]{3,}$ 
```

这*似乎*适用于第二部分：

```
[^Mickey Mouse] 
```

但我似乎无法将这两者结合成一个表达式

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-10T11:32:22.700

您当前使用的是否定字符类。它匹配一个不属于字符集的单个字符`M`, `i`, `c`, `k`... 你明白了。

如果要确保您的字符串不是序列`Mickey Mouse`，则需要使用否定的前瞻断言：

```
^(?!Mickey Mouse$)[a-zA-Z]{2,}\s[a-zA-Z]{3,}$ 
```

# c# - 从另一个表单激活工具条单击事件

> ID：13800102
> 
> 赞同：0
> 
> 时间：2012-12-10T11:30:01.010
> 
> 标签：c#, .net, toolstrip

我需要`refreshToolStripMenuItem`从另一个表单发送一个点击事件。这是我所拥有的，由于某种原因它不起作用。请帮忙。

菜单项点击：

```
public void refreshToolStripMenuItem_Click(object sender, EventArgs e)
{
    noteslist.Items.Clear();
    idlist.Items.Clear();
    setnotes();
} 
```

用于发送事件的代码：

```
frmnotes notes = new frmnotes();
notes.refreshToolStripMenuItem_Click(this, e);
this.Close(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T11:52:31.963

不要调用事件本身。这是糟糕的代码。把创建一个自己受保护的 void updateMyList() 方法。

```
 internal void updateMyList()
    {
         noteslist.Items.Clear();
         idlist.Items.Clear();
         setnotes();
    } 
```

然后从您的事件中调用更新方法。

```
 private void refreshToolStripMenuItem_Click(object sender, EventArgs e)
    {
        updateMyList();
    } 
```

然后只需从您的表单中调用更新方法：

```
 frmnotes notes = new frmnotes();
       notes.updateMyList();
       this.Close(); 
```

顺便说一句：将 Click 事件的修饰符（即 refreshToolStripMenuItem_Click）设置为私有。你永远不应该从表单之外调用它们。查看 MVC 模式以获取更多信息。这真的很有帮助。

# xpath - 如何找到当前页面中存在的 xpath？

> ID：13800109
> 
> 赞同：0
> 
> 时间：2012-12-10T11:30:16.920
> 
> 标签：xpath

我有 Xpath "//td[contains(@class,'list-padding radar_text')]/a[contains(@href,'id')]"))"。

在我的网页中，提交表单后，页面将重新加载一些动态创建的详细信息。给定的 XPath 用于字段之一。在获取此 XPath 的值之前，我想检查该 Xpath 是否存在于该页面中。

# python - 选择列表中的最大值以及与该值相关的属性

> ID：13800114
> 
> 赞同：0
> 
> 时间：2012-12-10T11:30:31.887
> 
> 标签：python, list, optimization, coding-style

我正在寻找一种方法来选择数字列表中的主要值以获取属性。

```
data
[(14549.020163184512, 58.9615170298556),
 (18235.00848249135, 39.73350448334156),
 (12577.353023695543, 37.6940001866714)] 
```

我希望提取 (18235.00848249135, 39.73350448334156) 以获得 39.73350448334156。前一个列表（数据）是从一个空列表 data=[] 派生的。它是循环存储数据的最佳格式吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-10T11:31:49.580

您可以通过以下方式获得它：

`max(data)[1]`

因为默认情况下，元组将按第一个元素进行比较。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-10T11:31:54.240

```
max(data)[1] 
```

对元组进行排序根据第一个元素排序，然后是第二个。这意味着`max(data)`根据第一个元素进行排序。

`[1]`然后从“最大”对象返回第二个元素。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-10T11:32:30.360

嗯，这似乎很容易还是什么？） max(a)[1] ？

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-10T12:19:07.953

您实际上可以对列表的任何属性进行排序。您可以使用[itemgetter](http://www.dr-chuck.com/csev-blog/2010/01/fun-python-syntax-operator-itemgetter-sorted-and-lambda-functions-oh-my/)。另一种排序方法是使用明确的比较函数（当您可能需要多个级别的 itemgetter 时，因此下面的代码更具可读性）。

```
dist = ((1, {'a':1}), (7, {'a': 99}), (-1, {'a':99}))

def my_cmp(x, y):
    tmp = cmp(x[1][a], y[1][a])
    if tmp==0:
        return (-1 * cmp(x[0], y[0]))
    else: return tmp

sorted = dist.sort(cmp=my_cmp) # sorts first descending on attr "a" of the second item, then sorts ascending on first item 
```

# java - “.write”的java错误

> ID：13800118
> 
> 赞同：0
> 
> 时间：2012-12-10T11:30:47.207
> 
> 标签：java

我在这里遇到问题
我正在使用netbeans！
我无法使用 .write

这是我的代码：

```
ModFile=new File(NameText.getText() + ".mod");
if(!ModFile.exists()){
try {
  ModFile.createNewFile();
  System.out.println("Mod file has been created to the current directory");
  ModFile.*write*(CodesBox.getText());
  } catch (IOException ex) {
  Logger.getLogger(ModMakerGui.class.getName()).log(Level.SEVERE, null, ex);
  }
 } 
```

这一行：

```
ModFile.*write*(CodesBox.getText()); 
```

给我带来了问题！
请在这里帮助我

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T11:39:57.393

文件没有写入方法。请使用 FileWriter 或 Print Writer

```
ModFile=new File(NameText.getText() + ".mod");
FileWriter 作家=空；
如果（！ModFile.exists（））{
尝试 {
  ModFile.createNewFile();
writer=new FileWriter(ModFile);
  System.out.println("Mod 文件已创建到当前目录");
  writer.write(CodesBox.getText());
  } 捕捉（IOException ex）{
  Logger.getLogger(ModMakerGui.class.getName()).log(Level.SEVERE, null, ex);
  }
 }     

```

# makefile - 是否有一个 `clearmake` 选项来更改远程目录？

> ID：13800120
> 
> 赞同：1
> 
> 时间：2012-12-10T11:30:53.180
> 
> 标签：makefile, clearcase

makefile 中有一个选项作为`make -C /pathname`（因此它构建目标路径）。

里面有没有类似的`clearmake`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T11:38:18.857

是的，如果您使用`clearmake -C gnu`.
参见“ [makefile_gnu](http://publib.boulder.ibm.com/infocenter/cchelp/v7r0m1/index.jsp?topic=/com.ibm.rational.clearcase.cc_ref.doc/topics/makefile_gnu.htm) ”。

> ### 支持的 GNU make 命令选项
> 
> `clearmake –C gnu`支持 GNU make 命令选项的大多数单字符和长格式拼写，如下所示：
> 
> *   `-directory=dir`
>     在读取 makefile 之前切换到指定目录。

[（这与gnu`make`选项`-C`](http://www.gnu.org/software/make/manual/make.html#Options-Summary)非常相似：

> *   '<code>-C dir'<br /> '<code>--directory=dir'<br />`dir`在读取 makefile 之前切换到目录。
>     如果指定了多个 '<code>-C' 选项，则每个选项都相对于前一个进行解释：'<code>-C / -C etc' 等效于 '<code>-C /etc'。
>     这通常与递归调用一起使用`make`（请参阅[Recursive Use of`make`](http://www.gnu.org/software/make/manual/make.html#Recursion)）。

)

# android - Android 应用开发蓝牙 SPP rfcomm

> ID：13800126
> 
> 赞同：1
> 
> 时间：2012-12-10T11:30:59.873
> 
> 标签：android, bluetooth, arduino

我正在尝试创建一个 Android 应用程序，它允许我的 Galaxy SIII 使用我刚购买的 eBay 便宜模块通过蓝牙连接到我的 Arduino 板。问题是，我不知道如何建立正确的连接等等。

我在网上看了很多东西，找到了几十个源代码，但我仍然不明白它是如何工作的（我可能很笨，至少有一点）。我发现的一些源代码非常复杂，有很多可能性，我还在学习过程中。显然我尝试了[http://developer.android.com/](http://developer.android.com/)但并没有完全理解。

我的问题是：是否可以向我描述使用不安全的 Rfcomm 建立连接所需的内容（逐步）（我在网上阅读过，我可能错了）。例如：首先您需要激活蓝牙并启用发现，然后创建一个套接字......类似的东西。我显然愿意获得比上面写的更多的信息。（Dunno if would 非常有礼貌，正如你可能已经看到的那样，英语不是我的母语）。

目前，我在选中复选框时设法激活了蓝牙，或者如果蓝牙已经启用，我的应用程序会自动选中复选框。好吧，我所做的非常基本，但它仍然有效。

我的项目基本上是向我的 Arduino 发送一封信或一些信，以便它可以解释它并打开和关闭 LED（非常简单）。由于我很好奇并且渴望学习，我想开发自己的应用程序，而不是使用已经存在的应用程序。

在此先感谢您的宝贵时间，并感谢您阅读我的全部信息 :) 祝您有美好的一天！

PS：我的代码是这样的： http: [//pastebin.com/k9sSGTuC](http://pastebin.com/k9sSGTuC)

# perl - 向脚本添加帮助命令

> ID：13800130
> 
> 赞同：6
> 
> 时间：2012-12-10T11:31:16.420
> 
> 标签：perl, documentation, command-line-arguments, getopt-long, perl-pod

是否有向脚本添加帮助功能的标准方法？最简单的方法可能是接受一个参数并打印一些文本，如果它是“-help”或其他东西。有没有人有任何关于如何做到这一点的例子？

谢谢！

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-12-10T11:41:36.527

考虑[Getopt::Long](https://metacpan.org/module/Getopt::Long)加上[Pod::Usage](https://metacpan.org/module/Pod::Usage)。我编写 CLI 工具的常用模式：

```
#!/usr/bin/env perl
# ABSTRACT: Short tool description
# PODNAME: toolname
use autodie;
use strict;
use utf8;
use warnings qw(all);

use Getopt::Long;
use Pod::Usage;

# VERSION

=head1 SYNOPSIS

    toolname [options] files

=head1 DESCRIPTION

...

=cut

GetOptions(
    q(help)             => \my $help,
    q(verbose)          => \my $verbose,
) or pod2usage(q(-verbose) => 1);
pod2usage(q(-verbose) => 1) if $help;

# Actual code below 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-06-18T06:45:25.960

易于使用：

```
if( $ARGV[0] eq '-h' || $ARGV[0] eq '-help')
{
help();
exit;
}

sub help { print "My help blah blah blah\n";
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-10T13:04:35.843

看看[https://github.com/qazwart/SVN-Watcher-Hook/blob/master/svn-watch.pl](https://github.com/qazwart/SVN-Watcher-Hook/blob/master/svn-watch.pl)。我使用一种技术来组合`Getopt::Long`模块和`Pod::Usage`模块。

主要动作发生在第 97 到 106 行和第 108 到 110 行。

这`Getopt::Long`是一个非常常用的模块，因为它可以轻松处理命令行参数。很少使用 Pod 文档。但是，所有 CPAN 模块和所有 Perl 内置模块都使用 Pod 文档，所以如果您不知道，请[学习它](http://perldoc.perl.org/perlpod.html)。POD 并不难学，而且它内置在 Perl 中，因此所有 Perl 程序都可以自我记录。`perldoc`您可以使用该命令打印出任何程序的 POD 文档。尝试这个：

```
$ perldoc File::Find 
```

您还可以使用`pod2html`,`pod2text`和其他类型的翻译命令将 POD 文档打印成 HTML 等。

在我了解 POD 之前，我会在我的程序顶部放置这样的内容：

```
########################################################
# USAGE
#
my $USAGE =<<USAGE;

     Usage:

         foo [ -baz -fu <bar>] [-help]

         where:

             baz: yadda, yadda, yadda
             fu:  yadda, yadda, yadda
           help:  Prints out this helpful message

USAGE
#
###################################################### 
```

然后，在我的程序中，我可以这样做：

```
if ($help) {
    print "$USAGE\n";
    exit 0;
} 
```

这样，有人可以查看代码并阅读使用文本。这也将与您使用`-help`参数时打印出的文本相同。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-10T11:40:13.523

我这样做的方法是利用从命令行参数[`Getopt::Std`](http://perldoc.perl.org/Getopt/Std.html)中找到一个标志。`-h`

```
use strict;
use warnings;
use Getopt::Std;

my %args;
getopts('h', \%args);

my $help = "help goes here. You can use
more than one line to format the text";

die $help if $args{h};
# otherwise continue with script... 
```

更复杂的方法是使用[`POD::usage`](http://perldoc.perl.org/Pod/Usage.html)，尽管我个人没有尝试过这种方式。

# liferay - 如何在liferay中获取客户端portlet-id？

> ID：13800131
> 
> 赞同：6
> 
> 时间：2012-12-10T11:31:16.450
> 
> 标签：liferay, liferay-6, alloy-ui

我在我的liferay portlet 中使用AlloyUI。

我想`<input>`在 javascript 中使用我的 id。问题是元素的 id 在客户端发生了变化。

例如：
如果我将一个`<input>`的 Id 设置为“用户名”，它会更改为`_hospital_WAR_hospitalportlet_userName`ie`_hospital_WAR_hospitalportlet_`附加到 Id，其中`Hospital`是我的 portlet 名称。

如何获取客户端 ID 以便可以在 jquery 中使用它？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-11T07:31:56.977

`_hospital_WAR_hospitalportlet_`前面`Id`的字符串`<input>`只不过是 portlet 命名空间。

如果您使用标签，这只会添加到您`<input>`的`name`&`id`属性之前，如果您只使用普通的 html标签`<aui:input>`，则`name`&属性不会更改。`id``<input>`

但由于使用它是一种很好的做法，`<aui:input>`您可以执行以下操作来获取 javascript 代码中的 portlet-namespace：

1.  如果您在 JSP 中使用 javascripts，即使用 inside`<script> .. </script>`或`<aui:script> .. </aui:script>`然后您可以使用**`<portlet:namespace />`**or**`<%= renderResponse.getNamespace() %>`**获取`_hospital_WAR_hospitalportlet_`您的 javascript 中的字符串，例如。

    ```
    jQuery("#<portlet:namespace />username").val();

    // Or

    jQuery("#<%= renderResponse.getNamespace() %>username").val(); 
    ```

2.  但是，如果您使用的是`*.js`文件，那么我建议您将命名空间作为参数传递给`js`文件中的 javascript 函数：

    ```
    function changeValues(portletNamespace) { // this function is in a js file
        jQuery("#" + portletNamespace + "username").val("Lets change");
    } 
    ```

    从 JSP 调用此函数：

    ```
    <input type="button" onClick="changeValues('<portlet:namespace />')" /> 
    ```

希望这可以帮助。我不知道是否有办法直接通过 Liferay 定义的一些 javascript 函数来获取`namespace`or 。`portletId`如果你得到类似的东西，你可以把它贴在这里，这将非常有帮助。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-10-20T19:04:12.093

试试这个：

```
Liferay.Portlet.ready(

    /*
    This function gets loaded after each and every portlet on the page.

    portletId: the current portlet's id
    node: the Alloy Node object of the current portlet
    */

    function(portletId, node) {
    }
); 
```

# javascript - 渲染后的主干布局管理器

> ID：13800132
> 
> 赞同：1
> 
> 时间：2012-12-10T11:31:26.147
> 
> 标签：javascript, backbone.js, backbone-layout-manager

我正在使用主干和布局管理器。我在 MyView.js 中有这段代码：

```
afterRender: function() {
    var scope = this;
    this.model.get("books").each(function(bookModel) {
            var bookView = new BookView({
                model: bookModel
            });
            scope.insertView(".books", bookView).render();
    });
}, 
```

在 BookView.js 里面我有 afterRender 方法：

```
afterRender: function() {
    console.log("after render");
}, 
```

我在模型的 books 属性中有 6 个项目，我要求`render()`每本书。最终我得到的是“渲染后”只记录一次。怎么了？缺少的 5 个“渲染后”日志在哪里？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T17:39:39.833

上面的代码在 MyView 的 afterRender 方法中调用。由于未知`render()`的原因，许多一一调用不会调用每本书的 afterRender()。
在 LayoutManager 文档中反复阅读后，我意识到我需要`insertView()`在方法内部调用`beforeRender()`而不渲染视图。这种方式`render()`将呈现所有子视图并`afterRender()`正确调用：

```
beforeRender: function() {
    var scope = this;
    this.model.get("books").each(function(bookModel) {
            var bookView = new BookView({
                model: bookModel
            });
            scope.insertView(".books", bookView);
    });
}, 
```

# android - Android SearchView 不输入 onQueryTextChange

> ID：13800133
> 
> 赞同：2
> 
> 时间：2012-12-10T11:31:29.517
> 
> 标签：android, actionbarsherlock, searchview

我正在尝试使用 Sherlock 操作栏实现 SearchView。我无法让查询进入 onQueryTextChange 方法。不知道出了什么问题。

```
public class MainActivity extends SherlockFragmentActivity implements
        SearchView.OnQueryTextListener {
    protected static CharSequence[] _categories = { "Amusement Park",
            "Bird Sanctuary", "Wild Life", "River", "Hill Station", "Temple" };

    protected static boolean[] _selections = new boolean[_categories.length];

    private final String[] places = new String[] { "Mysore", "Bangalore",
            "Mangalore", "Wayanad", "Bandipur National Park", "Chickmaglur",
            "Bandipura", "Coorg", "Kodaikanal", "Hampi", "Ghati Subramanya",
            "Mekedatu", "Muththathhi", "Shivasamudram", "Talakadu",
            "Savana Durga" };

    public SearchView mSearchView;
    private TextView mStatusView;

    private Menu mainMenu = null;

    PlacesListAdapter adapter;
    ListView listView;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        Log.i("Nomad", "onCreate");

        List<Place> thePlaces = new ArrayList<Place>();
        for (int i = 0; i < places.length; i++) {
            Place pl = new Place("NO_ID", places[i], "NO_DISTANCE",
                    "NO_CATEGORYICON");
            thePlaces.add(pl);
        }

        listView = (ListView) findViewById(R.id.place_list);
        adapter = new PlacesListAdapter(MainActivity.this, R.layout.item_place,
                thePlaces);

        listView.setAdapter(adapter);

        listView.setOnItemClickListener(new OnItemClickListener() {
            @Override
            public void onItemClick(AdapterView<?> a, View view, int position,
                    long id) {

                Toast.makeText(MainActivity.this, "Test", Toast.LENGTH_SHORT);
                startActivity(new Intent(MainActivity.this, PlaceActivity.class));
            }
        });

    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        Log.i("Nomad", "onCreateOptionsMenu");
        super.onCreateOptionsMenu(menu);
        MenuInflater inflater = getSupportMenuInflater();
        inflater.inflate(R.menu.activity_main, menu);

        mainMenu = menu;

        MenuItem searchItem = menu.findItem(R.id.action_search);

        // Search View
        mSearchView = (SearchView) searchItem.getActionView();
        setupSearchView(searchItem);

        mSearchView.setOnSearchClickListener(new View.OnClickListener() {
            @Override
            public void onClick(View v) {
                // hide action item
                if (mainMenu != null) {
                    mainMenu.findItem(R.id.action_category).setVisible(false);
                    mainMenu.findItem(R.id.action_sort).setVisible(false);
                }

            }
        });
        mSearchView.setOnCloseListener(new SearchView.OnCloseListener() {
            @Override
            public boolean onClose() {
                // re-show the action button
                if (mainMenu != null) {
                    mainMenu.findItem(R.id.action_category).setVisible(true);
                    mainMenu.findItem(R.id.action_sort).setVisible(true);
                }
                return false;

            }
        });

        Log.i("Nomad", "after setupSearchView()");
        return true;
    }

    public boolean onOptionsItemSelected(MenuItem item) {

        switch (item.getItemId()) {

        case R.id.action_search:
            Toast.makeText(this, "Searh", Toast.LENGTH_LONG).show();
            Log.i("Nomad", "Click Search");
            break;

        case R.id.action_category:
            showDialog();
            break;
        case R.id.action_sort_alpha_az:
            Toast.makeText(this, "Alpha AZ", Toast.LENGTH_LONG).show();
            break;
        case R.id.action_sort_alpha_za:
            Toast.makeText(this, "Alpha ZA", Toast.LENGTH_LONG).show();
            break;
        case R.id.action_sort_dist_nf:
            Toast.makeText(this, "Dist NF", Toast.LENGTH_LONG).show();
            break;
        case R.id.action_sort_dist_fn:
            Toast.makeText(this, "Dist FN", Toast.LENGTH_LONG).show();
            break;
        default:
            // return super.onOptionsItemSelected(item);
            break;
        }
        return true;
    }

    private void setupSearchView(MenuItem searchItem) {
        mSearchView.setIconifiedByDefault(true);
        mSearchView.setOnQueryTextListener(this);
        mSearchView.setSubmitButtonEnabled(false);

        searchItem.setShowAsActionFlags(MenuItem.SHOW_AS_ACTION_ALWAYS);
        // | MenuItem.SHOW_AS_ACTION_COLLAPSE_ACTION_VIEW
    }

    public boolean onQueryTextChange(String newText) {
        Log.i("Nomad", "onQueryTextChange");

        if (TextUtils.isEmpty(newText)) {
            Log.i("Nomad", "onQueryTextChange Empty String");
            listView.clearTextFilter();
        } else {
            Log.i("Nomad", "onQueryTextChange " + newText.toString());
            adapter.getFilter().filter(newText.toString());
        }
        return true;
    }

    public boolean onQueryTextSubmit(String query) {
        Log.i("Nomad", "onQueryTextSubmit");
        return false;
    }

    public boolean onClose() {
        Log.i("Nomad", "onClose");
        return false;
    }

    protected boolean isAlwaysExpanded() {
        return false;
    }

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T19:50:30.633

将此添加到您的 searchCommand ：

```
searchCommand.setShowAsAction(MenuItem.SHOW_AS_ACTION_IF_ROOM | MenuItem.SHOW_AS_ACTION_COLLAPSE_ACTION_VIEW); 
```

# google-maps-api-3 - 从融合表层多边形和折线谷歌地图 v3 中删除阴影

> ID：13800137
> 
> 赞同：1
> 
> 时间：2012-12-10T11:31:44.400
> 
> 标签：google-maps-api-3, polygon, google-fusion-tables, polyline

我如何从融合表层隐藏阴影，我在其中添加多边形和折线等几何图形。我知道无法通过使用融合表格样式来移除阴影是否有解决方法，例如 var shadow = layer.getPanes(); shadow.overlayShadow.style.dsiplay="none";

只需在谷歌地图 v3 上隐藏融合表层的所有阴影。

# jsp - 在主页上读取 cookie 不起作用

> ID：13800145
> 
> 赞同：0
> 
> 时间：2012-12-10T11:32:19.560
> 
> 标签：jsp, servlets, scriptlet

我知道这是一个奇怪的问题。我正在开发一个 Web 应用程序，其中欢迎文件是一个 servlet（它从数据库收集数据）并转发到 JSP。当我在 Main servlet 中读取 cookie 时， **FireFox 向我显示 File not found 错误，Safari 打开一个弹出窗口以保存名为“www.mydomain.co.uk”的文件，Internet Explorer 自动关闭**

当我按如下方式阅读 JSP 脚本中的 cookie 时，

```
//Read cookies and check if log in info is correct
    Cookie[] cookies = request.getCookies();
    for(int i = 0; i < cookies.length; i++)
    { 
        Cookie c = cookies[i];
        if (c.getName().equals("__iaqwc"))
        {
            if(!c.getValue().equals(""))
            {
                info = c.getValue();
            }
        }
    } 
```

它不会第一次读取 cookie，也不会在页面上显示任何内容（我正在生成 usnig javascript），当我刷新页面时，它会向我显示内容并读取 cookie。我正在阅读“头标签”内的 cookie，这仅发生在主页上，其他页面工作正常。而且在本地服务器上也可以正常工作，但是当我在实时服务器上上传时，就会出现上述问题。

任何想法可能是什么问题。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T11:40:09.163

在第一次请求时，返回的值`request.getCookies()`可能是`null`.

```
 Cookie[] cookies = request.getCookies();
 if(cookies!=null) {
    //code here
 } 
```

# vb.net - 将 SQLite 静态编译成 VB.Net 应用程序？

> ID：13800154
> 
> 赞同：1
> 
> 时间：2012-12-10T11:33:05.963
> 
> 标签：vb.net, sqlite, system.data.sqlite

System.Data.SQLite (SDS) 显然是在 .Net 应用程序中使用 SQLite 的最流行方式。

我想知道如果

*   SDS 需要另外提供 SQLite DLL，或者如果 SDS 包含 SQLite 源代码，并且
*   SDS可以静态编译成VB.Net应用程序吗？它只能作为DLL发布吗？

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T17:14:55.840

实际上，将 System.Data.SQLite.dll 编译为不需要 C++ 运行时非常容易。例如，如果您[下载](http://system.data.sqlite.org/index.html/doc/trunk/www/downloads.wiki)源代码并遵循[构建过程](http://system.data.sqlite.org/index.html/doc/trunk/www/build.wiki)，您将在以下路径中找到 System.Data.SQLite.dll 的静态链接（无需 C/C++ 运行时）副本：

```
<your-src-root>\bin\<2008 or 2010>\<Win32 or x64>\ReleaseStatic 
```

例如，如果您的源代码位于其中，`C:\Work\sqlite-netFx-source-1.0.80.0`则 Win32 和 .NET 3.5 (VS 2008) 的静态链接二进制文件将位于：

```
C:\Work\sqlite-netFx-source-1.0.80.0\bin\2008\Win32\ReleaseStatic 
```

此外，由于 System.Data.SQLite.dll 是一个[混合模式程序集](http://msdn.microsoft.com/en-us/library/x0w2664k.aspx)，由使用[link.exe](http://msdn.microsoft.com/en-us/library/y0zzbyt4.aspx)链接在一起的托管 .netmodule 和本机 .obj 文件组成，因此也可以将您的应用程序构建为 .netmodule 并将其链接在一起与 SQLite 成一个单一的混合模式程序集。

生成的程序集仍然是 Win32 或 x64，但是由于几乎所有 x64 机器在运行 Win32 代码时都没有问题，您可以只选择 Win32，只要：

*   您的应用程序是 .exe 或 .dll 始终加载到 Win32 进程中，并且
*   您不使用任何 x64 特定优势，例如更大的地址空间或使用仅在 x64 中可用的非托管代码

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T12:15:15.363

为了扩展我的评论，SDS 是非托管代码的 .net 包装器，因此您需要将发布代码与 DLL 副本一起发布。

正如史蒂夫所提到的，DLL 有 32 位和 64 位版本，而且我在挫折之后发现，你必须在目标机器上安装相应的 Visual c++ 运行时，所以如果你将 32 位版本部署到 64 位机器上，它将需要安装 32 位 c++ 运行环境。

我目前正在研究但没有时间测试的另一种方法是 csharpe-sqlite，一个纯 .net 实现：

[http://code.google.com/p/csharp-sqlite/](http://code.google.com/p/csharp-sqlite/)

顾名思义，用 c# 编码，但当然可以在任何 .net 语言中使用，包括 vb.net

# c - malloc 两次用于结构

> ID：13800157
> 
> 赞同：2
> 
> 时间：2012-12-10T11:33:25.883
> 
> 标签：c, structure

我的结构如下

```
typedef struct Mystruct{
char *name;
int telno;
struct Mystruct *nextp;
}data; 
```

现在我 malloc 结构

```
data *addnode;
addnode = malloc (sizeof(data)); 
```

现在我将数据添加到`char *name`.

```
addnode->name = malloc (sizeof(MAX)); 
```

**问题**：为什么需要`malloc`再次？

我假设`malloc`-ing`addnode`甚至会为其分配内存，`addnode->name`但事实并非如此。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-10T11:36:19.350

`malloc`不深也不做递归。因此它不会为您传递的结构内的任何指针分配内存。

如果你再想一想，你会发现一定是这样。您不会传递有关您正在分配的结构的任何信息。您只需传递内存块的大小。现在，`malloc`甚至不知道您分配的是什么类型的数据。它不知道块本身包含一个指针。

至于为什么做出这种设计选择，库如何知道谁拥有你的指针所指的内存？也许它属于那个结构。或者，也许您想使用该指针来引用在别处分配的一些内存。只有你才能知道这就是为什么责任落在你身上的原因。事实上，你的结构就是一个很好的例子。成员可能`name`由结构拥有，而`nextp`成员不是。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-10T11:36:01.080

分配内存 为`Mystruct`指向 的指针提供了足够的内存`name`。在这一点上，我们不知道名称中有多少个字符，因此不可能为它分配内存。

如果您想在一次分配中完全分配结构，您可以决定最大大小`name`并将结构定义更改为

```
#define MAX_NAME (10) /* change this as required */
typedef struct Mystruct{
    char name[MAX_NAME];
    int telno;
    struct Mystruct *nextp;
}data; 
```

或者，如果您在分配结构时知道名称，则可以通过提供构造函数向调用者隐藏两次分配的需要

```
struct Mystruct* Mystruct_create(const char* name)
{
    Mystruct* ms = malloc(sizeof(*ms));
    ms->name = strdup(name);
    return ms;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-10T11:34:51.123

否。首先`malloc()`将内存分配给整个结构，包括用于保存指向名称的指针的内存。即 32 位操作系统中的 4 个字节。

您需要单独分配内存以在其中保存数据。默认情况下，如果未初始化，该指针将指向某个垃圾位置。

同样的情况`free()`。即你必须先释放内部块，然后释放整个结构的内存。中没有递归之类的东西`malloc() and free()`。

# javascript - 使用“位置：绝对”子元素动态调整 div 元素的大小

> ID：13800172
> 
> 赞同：1
> 
> 时间：2012-12-10T11:34:44.437
> 
> 标签：javascript, html, resize, positioning

我有以下代码：

```
<head>
    <style>
        #mainDiv {
            background-color: grey;
            position: absolute;
        }
        #one {
            height: 150px;
            width: 70px;
            bottom: 300px;
            right: 500px;
            background-color: green;
            position: absolute; 
        }
        #two {
            height: 200px;
            width: 200px;
            margin-top: 50px;
            margin-bottom: 20px;
            margin-left: 90px;
            margin-right: 5px;
            background-color: blue;
            position: absolute;
        }
    </style>
</head>
<body>
    <div id="mainDiv">
        <div id="one"></div>
        <div id="two"></div>
    </div>
</body> 
```

我想调整**#mainDiv**的大小，使其包含其子项并考虑所有定位和边距属性（基本上#mainDiv 的灰色区域将围绕子项并直观地显示定位和边距空间）。

我知道它不能使用 CSS 动态完成。我如何在**不**使用 JQuery 的情况下使用纯 JavaScript 实现这样的功能？

注意：孩子的位置属性没有限制，它可以是任何一个，但“固定”。

代码需要支持所有主流浏览器+IE8+手机（android 2.3+4、iphone）。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T11:58:07.547

在您的情况下，由于某些逻辑原因，这是不可能的。当父母没有大小并且因此没有可用的正确位置时，如何为 id one 找到正确的位置。

如果您在 id 1 中使用 left 而不是 right，情况会变得更好。

一切顺利

试试这个

```
 <script>
    window.onload = function() {
        var elems, max_top, max_right;
        elems = mainDiv.getElementsByTagName( 'div' );
        for( i = 0; i < elems.length; i++ ) {
            elem = elems[ i ].offsetLeft + elems[ i ].offsetWidth + elems[ i ].style.marginLeft;
            max_right = ( max_right > elem ) ? max_right : elem;

            elem = elems[ i ].offsetTop + elems[ i ].offsetHeight + elems[ i ].style.marginBottom;
            max_top = ( max_top > elem ) ? max_top : elem;
        }
        console.log( 't: ' + max_top + ', r: ' + max_right );
        mainDiv.style.height = max_top;
        mainDiv.style.width = max_right;

    }
    </script> 
```

该代码在获取利润方面存在一些问题。

我找到了一个很好的页面来解决这个问题。

[http://www.quirksmode.org/dom/getstyles.html](http://www.quirksmode.org/dom/getstyles.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T13:37:01.497

我做了一些可能很复杂的事情，你可以在这里找到：http: [//jsfiddle.net/YMmHz/1/](http://jsfiddle.net/YMmHz/1/)

基本上我得到了所有可能的值：

```
var widthOne, widthTwo, heightOne, heightTwo;
var leftOne, leftTwo, rightOne, rightTwo, topOne, topTwo, botOne, botTwo;
var marginLeftOne, marginLeftTwo, marginRightOne, marginRightTwo, marginTopOne, marginTopTwo, marginBotOne, marginBotTwo;
var paddingLeftOne, paddingLeftTwo, paddingRightOne, paddingRightTwo, paddingTopOne, paddingTopTwo, paddingBotOne, paddingBotTwo;
var maxWidthOne, maxWidthTwo, maxHeightOne, maxHeightTwo; 
```

通过不同的测试：

```
widthOne = $('#one').width();
widthTwo = $('#two').width();

(parseInt($('#one').css('left')))? leftOne = parseInt($('#one').css('left')):leftOne = 0;
(parseInt($('#two').css('left')))? leftTwo = parseInt($('#two').css('left')):leftTwo = 0; 
```

然后像这样定义**#mainDiv**的大小：

```
(maxWidthOne>=maxWidthTwo)? $('#main_div').width(maxWidthOne):$('#main_div').width(maxWidthTwo);
(maxHeightOne>=maxHeightTwo)? $('#main_div').height(maxHeightOne):$('#main_div').height(maxHeightTwo); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-10T11:47:09.190

对第二个 div 使用相对位置，因此 mainDiv 灰色区域将围绕您的子元素

```
#mainDiv {
        background-color: grey;
        position: absolute;
    }
    #one {
        height: 150px;
        width: 100px;
        bottom: 300px;
        right: 500px;
        background-color: yellow;
    }
    #two {
        height: 200px;
        width: 200px;
        margin-top: 50px;
        margin-bottom: 20px;
        margin-left: 90px;
        margin-right: 5px;
        background-color: blue;
        position: relative;
    } 
```

# java - JFreeChart - 标记未显示

> ID：13800173
> 
> 赞同：1
> 
> 时间：2012-12-10T11:34:50.210
> 
> 标签：java, jfreechart, marker

我正在尝试向 eplot 添加一个范围市场，但是每当标记值超过当前最大值时，它就不包含在图表中，因为图表似乎没有根据范围标记调整大小......有什么解决方法吗? 顺便说一句，我不知道数据集的当前最大值是多少。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T11:53:53.680

为了知道数据集的当前最大值，您可以使用以下代码：-

```
ValueAxis valueAxis=cp.getRangeAxis(); // getting the value axis from plot 
Range r=cp.getDataRange(valueAxis); // getting the data range 
System.out.println(r.getUpperBound()); 
```

sysout 将返回数据集中的最大值。当您知道数据集中的最大值时，您可能可以获得所需的结果。

# vim - 防止模糊查找器在 NERDTree 窗口中加载文件

> ID：13800179
> 
> 赞同：7
> 
> 时间：2012-12-10T11:35:04.033
> 
> 标签：vim, nerdtree, fuzzyfinder

我在 vim 中同时使用了fuzzyfinder 和NERDTree。当我的光标位于 NERDTree 所在的窗口中并且我使用模糊查找器时，它将在 NERDTree 窗口中打开一个文件。

有没有办法防止这种行为并强制文件不在 NERDTree 窗口中打开？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T13:08:01.773

您必须使用自定义映射或覆盖默认的 FuzzyFinder 映射才能启动它。然后，您可以在那里检查打开的 NERDTree，并跳转到上一个窗口（或者可能关闭 NERDTree），如下所示：

```
:nnoremap <silent> <F5> :<C-u>if exists("t:NERDTreeBufName") && bufwinnr(t:NERDTreeBufName) == winnr() <Bar> wincmd p <Bar> endif <Bar> FufBuffer<CR> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T13:07:11.850

看看[这个脚本（在页面底部是否](http://vim.1045645.n5.nabble.com/NERDTree-and-FuzzyFinder-how-to-force-open-in-main-buffers-window-td2180652.html)适合你。

# java - 将 JComponent 重置为默认值

> ID：13800180
> 
> 赞同：2
> 
> 时间：2012-12-10T11:35:05.857
> 
> 标签：java, swing

例如，如果组件是一个复选框，它必须设置为 false，或者它是一个文本字段，它必须清除文本。我正在尝试编写一种方法来重置`JPanel`. 它必须像 HTML 表单中的重置功能一样工作。

如何将a重置`JComponent`为默认值？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-10T12:14:13.923

作为一名优秀的开发人员，您可能在视图和模型之间有一个很好的分离。当模型更新时，这些更改会反映在视图中。

如果你有这样的结构，你可以简单地将你的模型重置为默认状态，然后重置后的状态在 UI 中变得可见（这意味着 UI 被重置为其默认状态）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-10T11:39:04.323

Swing 中没有复位功能。最好的方法是创建一个方法，其中包含要重置的值并在此处设置所有内容，例如：

```
public void resetWindow(){
    checkBox.setSelected(false);
    textField.setText("");
} 
```

使用这种方式的优点是您可以在想要重置时以及在加载类时重用此方法。

另一种方法是创建 Panel 的另一个实例并丢弃原始实例。这样，一切都将处于启动状态。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-10T11:41:25.660

一种可能的解决方法是创建自定义重置功能。重新初始化面板（您的表单）。

例如

```
void reset(){
    //recreate the form panel.
    formPanel = new FormPanel(); 
} 
```

创建一个自定义类`FormPanel`来存储表单字段及其侦听器。

重新初始化面板组件将导致按照@Robin 的建议重新分配侦听器的开销。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-10T11:37:54.487

编写一个方法，在开始时设置所有元素的初始值。然后你可以重用这个初始化方法来“重置”这些值。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-10T11:39:46.290

摆动组件没有重置类型的方法，您的代码应该处理它。

# ios - 在输入字段jquery mobile phonegap ios上触摸并拖动时无法阻止拖动页面

> ID：13800181
> 
> 赞同：0
> 
> 时间：2012-12-10T11:35:07.647
> 
> 标签：ios, cordova, input, preventdefault

我阻止滚动我的跨平台应用程序添加

```
document.addEventListener('touchmove', function(e) { e.preventDefault(); }, false); 
```

关于设备就绪功能。除了输入字段外，一切都很好：当我点击输入字段并向下拖动页面时，我可以向下移动整个窗口并看到黑屏。当手势从输入字段内开始时如何防止滚动有什么想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-12T02:43:36.160

将**UIWebViewBounce**设置为 NO 应该可以解决此问题。

您的项目 > 资源 > **Cordova.plist** > 设置：

```
UIWebViewBounce Boolean NO 
```

# android - Android 的 NSNonLossyASCIIStringEncoding 等效项

> ID：13800183
> 
> 赞同：3
> 
> 时间：2012-12-10T11:35:24.017
> 
> 标签：android, ios, nsstring

我必须将一些聊天代码从 iOS 移植到 Android。在将聊天消息发送到套接字之前，iOS 代码使用`NSNonLossyASCIIStringEncoding`该类作为 NSString::dataUsingEncoding 的参数。

你会如何在Android中做到这一点？关于相反解码的相同问题。

例如，如果不这样做，换行符会在另一台手机上收到的消息中消失。

iOS上的代码：

```
NSData *data1 = [myStringTosend dataUsingEncoding:NSNonLossyASCIIStringEncoding];
NSString *goodValue = [[[NSString alloc] initWithData:data1 encoding:NSUTF8StringEncoding] autorelease]; 
```

和解码：

```
NSData *data = [[NSData alloc] initWithData:[response dataUsingEncoding:NSASCIIStringEncoding]]; 
```

到目前为止（并且不正确），Android 端的编码：

```
OutputStream os = socket.getOutputStream();
os.write(request.getBytes("UTF-8"));
os.flush(); 
```

和解码：

```
while ((bytesRead = is.read(buffer, 0, BUFFER_SIZE)) >= 0) {
    if (bytesRead > 0) response.append(new String(buffer, 0, bytesRead, "UTF-8"));
    if (bytesRead < BUFFER_SIZE) break;
} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2015-12-22T21:14:00.750

@portforwardpodcast 是绝对正确的，如果可能的话，您应该避免对您的 utf8 进行 ASCII 编码，而是将您的堆栈设置为直接处理/存储 utf8。也就是说，如果您无法更改行为，以下代码可能会有所帮助。

虽然没有公布如何`NSNonLossyASCIIStringEncoding`工作的解释，但根据其输出，它看起来像：

*   扩展 ASCII 范围内的字节（十进制值 128 - 255）使用八进制编码进行转义（例如`ñ`，十进制值 241 -> `\361`）
*   使用十六进制编码将非 ASCII 代码点转义为两个字节块（例如，它占用 32 位，十进制值 128549 -> `\ud83d\ude25`）

所以要编码：

```
public static String encodeToNonLossyAscii(String original) {
    Charset asciiCharset = Charset.forName("US-ASCII");
    if (asciiCharset.newEncoder().canEncode(original)) {
        return original;
    }
    StringBuffer stringBuffer = new StringBuffer();
    for (int i = 0; i < original.length(); i++) {
        char c = original.charAt(i);
        if (c < 128) {
            stringBuffer.append(c);
        } else if (c < 256) {
            String octal = Integer.toOctalString(c);
            stringBuffer.append("\\");
            stringBuffer.append(octal);
        } else {
            String hex = Integer.toHexString(c);
            stringBuffer.append("\\u");
            stringBuffer.append(hex);
        }
    }
    return stringBuffer.toString();
} 
```

并进行解码（这可以通过在锁定步骤中解析两种类型的编码来提高效率，而不是作为两个单独的传递）：

```
private static final Pattern UNICODE_HEX_PATTERN = Pattern.compile("\\\\u([0-9A-Fa-f]{4})");
private static final Pattern UNICODE_OCT_PATTERN = Pattern.compile("\\\\([0-7]{3})");

public static String decodeFromNonLossyAscii(String original) {
    Matcher matcher = UNICODE_HEX_PATTERN.matcher(original);
    StringBuffer charBuffer = new StringBuffer(original.length());
    while (matcher.find()) {
        String match = matcher.group(1);
        char unicodeChar = (char) Integer.parseInt(match, 16);
        matcher.appendReplacement(charBuffer, Character.toString(unicodeChar));
    }
    matcher.appendTail(charBuffer);
    String parsedUnicode = charBuffer.toString();

    matcher = UNICODE_OCT_PATTERN.matcher(parsedUnicode);
    charBuffer = new StringBuffer(parsedUnicode.length());
    while (matcher.find()) {
        String match = matcher.group(1);
        char unicodeChar = (char) Integer.parseInt(match, 8);
        matcher.appendReplacement(charBuffer, Character.toString(unicodeChar));
    }
    matcher.appendTail(charBuffer);
    return charBuffer.toString();
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-19T05:07:14.757

不要使用 NSNonLossyASCIIStringEncoding，使用 utf-8 编码。我刚刚在 ios+android+java spring backend 上自己解决了这个问题，我花了大约 4 天的时间来解决所有问题。Android 无法显示表情符号，但这为我提供了几乎所有（或所有不确定）语言的完整字符支持。以下是对我有帮助的文章：

必读： http: [//blog.manbolo.com/2012/10/29/supporting-new-emojis-on-ios-6](http://blog.manbolo.com/2012/10/29/supporting-new-emojis-on-ios-6) [http://blog.manbolo.com/2011/12/12/supporting-ios- 5-新表情符号编码](http://blog.manbolo.com/2011/12/12/supporting-ios-5-new-emoji-encoding)

查看数据库中字符串的十六进制字节：[如何查看存储在 MySQL 列中的原始字节？](https://stackoverflow.com/questions/1881832/how-can-i-see-raw-bytes-stored-in-a-mysql-column)

有关如何设置 MySQL 的详细信息：http: [//technovergence-en.blogspot.com/2012/03/mysql-from-utf8-to-utf8mb4.html](http://technovergence-en.blogspot.com/2012/03/mysql-from-utf8-to-utf8mb4.html)

utf8 深入常见问题解答- [http://www.unicode.org/faq/utf_bom.html#utf8-4](http://www.unicode.org/faq/utf_bom.html#utf8-4)

有关符号差异的详细信息：\ud83d\udc7d 和内存中的十六进制值：0xF09F91BD [http://en.wikipedia.org/wiki/UTF-8#Description](http://en.wikipedia.org/wiki/UTF-8#Description)

使用它来复制和粘贴字符以查看真正的十六进制字节值（适用于表情符号）：[http://perishablepress.com/tools/utf8-hex/index.php](http://perishablepress.com/tools/utf8-hex/index.php)

获取 Spring 以在 url 中支持 utf8（用于 GET 参数）[http://forum.springsource.org/showthread.php?93728-RequestParam-doesn-t-seem-to-be-decoded](http://forum.springsource.org/showthread.php?93728-RequestParam-doesn-t-seem-to-be-decoded) [获取参数编码](https://stackoverflow.com/questions/5445990/get-parameter-encoding) [http://forum。 springsource.org/showthread.php?112181-Unable-to-Override-the-Spring-MVC-URL-decoding-which-uses-default-quot-ISO-8859-1-quot](http://forum.springsource.org/showthread.php?112181-Unable-to-Override-the-Spring-MVC-URL-decoding-which-uses-default-quot-ISO-8859-1-quot)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-03-17T08:20:17.847

我的答案代码相当于 IOS NSNonLossyASCIIStringEncoding for Android。

在你的 gradle 中放在 depandancy 下面。

```
 compile 'org.apache.commons:commons-lang3:3.4' 
```

然后像这样把方法放到你的 Utils 类中

```
 public static String encode(String s)
{
    return StringEscapeUtils.escapeJava(s);

}

public static String decode(String s)
{
    return StringEscapeUtils.unescapeJava(s);

} 
```

然后只需在要编码字符串或像这样解码字符串的地方调用此方法

```
//for encode
String stencode = Utils.encode("mystring");

//for decode
String stdecode = Utils.decode("mystring") 
```

# android - 如何在对话框中创建分隔线

> ID：13800187
> 
> 赞同：1
> 
> 时间：2012-12-10T11:35:27.333
> 
> 标签：android

我有一个底部有两个按钮的对话框。如何在这些按钮上方创建分隔线？我的 XML 如下：

```
<?xml version="1.0" encoding="utf-8"?> 
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android" 
android:layout_width="wrap_content" 
android:layout_height="400dp" 
>   

<ImageView 
android:id="@+id/imageView2" 
android:layout_width="wrap_content" 
android:layout_height="wrap_content" 
android:layout_alignBottom="@+id/username" 
android:layout_alignParentLeft="true" />

<LinearLayout 
android:layout_width="wrap_content" 
android:layout_height="wrap_content" 
android:layout_alignParentBottom="true" 
android:layout_alignParentRight="true" 
android:orientation="horizontal"> 

<Button 
android:id="@+id/start" 
android:textSize="18sp" 
android:layout_marginRight="2dip" 
android:layout_width="wrap_content" 
android:layout_marginBottom="5dip" 
android:padding="5dip" 
android:layout_height="fill_parent" 
android:text="Start" /> 

<Button 
android:id="@+id/cancel" 
android:textSize="18sp" 
android:layout_marginLeft="2dip" 
android:layout_width="wrap_content" 
android:layout_height="wrap_content" 
android:text="Cancel" 
android:textColor="#000000" /> 

</LinearLayout> 
</RelativeLayout> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T11:38:12.657

使用视图

```
<View android:layout_height="2px" android:layout_width="fill_parent"
        android:background="@android:color/black"
         /> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T11:38:20.503

只需添加一个 ImageView 并提供以下属性，

```
 <ImageView  android:layout_width="fill_parent"
        android:layout_height="3dip"
        android:background="@color/white"
        android:padding="5dip"/> 
```

没有什么比您可以为布局设置的 Divider 属性更好的了。分隔线仅适用于 ListView。

所以你可能不得不像这样改变你的线性布局，

```
 <LinearLayout 
    android:layout_width="wrap_content" 
    android:layout_height="wrap_content" 
    android:layout_alignParentBottom="true" 
    android:layout_alignParentRight="true" 
    android:orientation="horizontal"> 

 <LinearLayout android:layout_width="wrap_content" 
    android:layout_height="wrap_content"  >

  <ImageView  android:layout_width="fill_parent"
            android:layout_height="3dip"
            android:background="@color/white"
            android:padding="5dip"/>

</LinearLayout> 

    <LinearLayout android:layout_width="wrap_content" 
    android:layout_height="wrap_content" 
   android:orientation="horizontal">

    <Button 
    android:id="@+id/start" 
    android:textSize="18sp" 
    android:layout_marginRight="2dip" 
    android:layout_width="wrap_content" 
    android:layout_marginBottom="5dip" 
    android:padding="5dip" 
    android:layout_height="fill_parent" 
    android:text="Start" /> 

    <Button 
    android:id="@+id/cancel" 
    android:textSize="18sp" 
    android:layout_marginLeft="2dip" 
    android:layout_width="wrap_content" 
    android:layout_height="wrap_content" 
    android:text="Cancel" 
    android:textColor="#000000" /> 

        </LinearLayout> 
    </LinearLayout> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-10T11:46:44.533

我刚刚根据尼拉夫的回答想出了一些东西

```
 <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
        android:layout_width="254dp"
        android:layout_height="wrap_content"
        android:background="@drawable/dialogbox_bg"
        android:orientation="vertical" >

        <ImageView
            android:layout_width="fill_parent"
            android:layout_height="50dp"
            android:gravity="center"
            android:text="@string/selectattachment"
            android:textColor="@color/white"
            android:textSize="20sp"
            android:textStyle="bold" />

          <View
            android:layout_width="fill_parent"
            android:layout_height="2dp"
            android:background="@color/blue" />

           <LinearLayout 
             android:layout_width="wrap_content" 
             android:layout_height="wrap_content" 
             android:layout_alignParentBottom="true" 
             android:layout_alignParentRight="true" 
             android:orientation="horizontal"> 

           <Button 
             android:id="@+id/start" 
             android:textSize="18sp" 
             android:layout_marginRight="2dip" 
             android:layout_width="wrap_content" 
             android:layout_marginBottom="5dip" 
             android:padding="5dip" 
             android:layout_height="fill_parent" 
             android:text="Start" /> 

           <Button 
             android:id="@+id/cancel" 
             android:textSize="18sp" 
             android:layout_marginLeft="2dip" 
             android:layout_width="wrap_content" 
             android:layout_height="wrap_content" 
             android:text="Cancel" 
             android:textColor="#000000" /> 

</LinearLayout> 
    </LinearLayout> 
```

# jquery - 在 SAP ECC 6.0 环境中创建 REST 服务

> ID：13800189
> 
> 赞同：2
> 
> 时间：2012-12-10T11:35:55.480
> 
> 标签：jquery, rest, sap-erp, sap-basis

我们使用 SAP ECC 6 作为后端，我们的要求是从浏览器和移动设备调用 BAPI/RFC。我们的约束是我们不想打开 ECC 环境的端口。

**我们认为的解决方案如下：** 在后端创建 REST SERVICE（SAP ECC），它将调用 BAPI，并且可以通过创建 REST 客户端从 Internet 使用相同的服务。我认为在这种情况下不需要打开 ECC 端口。我的假设是否正确？请建议......

我们不想使用 Web 服务，因为要在 Internet 环境中从 Web 服务访问 BAPI，我们需要打开 SAP ECC 的所需端口，这将是一个安全问题。

这是一个正确的方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T12:53:55.477

似乎是个好主意，尽管您仍然必须打开 ICM 服务器侦听的 HTTP 端口。确切的端口取决于您的安装，但通常是 8080。为了增加安全性，您可能希望在 Internet 和 ECC 系统之间添加反向代理，尽管这与 SOAP Web 服务实际上没有什么不同。两者都通过 HTTP 工作，因此需要通过 HTTP 从 Internet 到 ECC 系统的一些路径。

在 ECC 端实现 REST API 方面，您有 2 个选项：

*   使用 NetWeaver Gateway，它可以通过 RESTful API 提供 OData (AtomPub) 和 JSON 格式。
*   使用 ABAP HTTP 处理程序（在事务 SICF 中注册）自己构建它。

请务必与您的 SAP 客户主管确认是否存在潜在的许可影响。NetWeaver Gateway 在许可其他用户方面有很大帮助，否则这些用户根本无法访问您的系统。您还可以在[SCN](http://scn.sap.com/welcome)上查看更多信息，甚至可以查看我在[SlideShare](http://slideshare.net/sufw)上的一些演示文稿。

希望这可以帮助，

萨沙

# python - MatPlotlib：未显示补丁

> ID：13800193
> 
> 赞同：4
> 
> 时间：2012-12-10T11:35:59.867
> 
> 标签：python, matplotlib

我刚刚开始尝试使用 matplotlib，因为我经常遇到需要绘制一些数据的情况，matplotlib 似乎是一个很好的工具。我试图在主站点中调整椭圆示例，以便改为绘制两个圆圈，但是在运行代码之后，我发现没有显示任何补丁，我无法弄清楚到底是什么问题.. . 这是代码。提前致谢。

```
import numpy as np
import matplotlib.pyplot as plt
import matplotlib
import matplotlib.patches as mpatches

plt.axis([-3,3,-3,3])
ax = plt.axes([-3,3,-3,3])
# add a circle
art = mpatches.Circle([0,0], radius = 1, color = 'r', axes = ax)

ax.add_artist(art)

#add another circle
art = mpatches.Circle([0,0], radius = 0.1, color = 'b', axes = ax)

ax.add_artist(art)

print ax.patches

plt.show() 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-10T11:49:20.703

您使用的是哪个版本的 matplotlib？我无法复制您的结果，我可以很好地看到两个省略号。我的目标很远，但我想你的意思是做这样的事情：

```
import numpy as np
import matplotlib.pyplot as plt
import matplotlib
import matplotlib.patches as mpatches

# create the figure and the axis in one shot
fig, ax = plt.subplots(1,figsize=(6,6))

art = mpatches.Circle([0,0], radius = 1, color = 'r')
#use add_patch instead, it's more clear what you are doing
ax.add_patch(art)

art = mpatches.Circle([0,0], radius = 0.1, color = 'b')
ax.add_patch(art)

print ax.patches

#set the limit of the axes to -3,3 both on x and y
ax.set_xlim(-3,3)
ax.set_ylim(-3,3)

plt.show() 
```

# c# - 从 C# 调用 Windows .exe

> ID：13800198
> 
> 赞同：0
> 
> 时间：2012-12-10T11:36:45.900
> 
> 标签：c#

我正在尝试`tlbExp.exe`使用 C# 从 C#调用`Process.Start`。我将命令字符串作为参数传递，但无论它是什么风格，我总是会收到一条错误消息：

```
The system cannot find the file specified

   at System.Diagnostics.Process.StartWithShellExecuteEx(ProcessStartInfo startInfo)
   at System.Diagnostics.Process.Start()
   at System.Diagnostics.Process.Start(ProcessStartInfo startInfo)
   at System.Diagnostics.Process.Start(String fileName) 
```

如果我在调试时尝试在命令窗口中单独运行命令字符串，它会执行它应该发生的事情（从 dll 生成的 tlb）。但是，我不能让它从代码中工作。

```
string tlb;
...
tlb += @"C:\Program files\Microsoft SDKs\Windows\v6.0A\bin\tlbExp.exe";
tlb += @""""; tlb += @" """; tlb += outputDllPath;
tlb += @""" /out:"""; tlb += outputTlbPath; tlb += @"""";
Process.Start(tlb); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T11:41:21.783

您需要使用接受`ProcessStartInfo`对象的重载：

```
var programPath = @"""C:\Program files\Microsoft SDKs\Windows\v6.0A\bin\tlbExp.exe""";
var info = new ProcessStartInfo(programPath);
info.Arguments = string.Format("\"{0}\" /out:\"{1}\"", outputDllPath, outputTlbPath);

Process.Start(info); 
```

* * *

为了使其通用，将第一行更改为：

```
var programFiles = Environment.GetFolderPath(Environment.SpecialFolder.ProgramFiles);
var programPath = string.Format("\"{0}\"", Path.Combine(programFiles, @"Microsoft SDKs\Windows\v6.0A\bin\tlbExp.exe")); 
```

# html - 100% 高度 div 的滚动条

> ID：13800203
> 
> 赞同：0
> 
> 时间：2012-12-10T11:36:57.433
> 
> 标签：html, css, scroll, overflow

我设法创建了这个，它是页面的高度，但我试图让它滚动而不是永远向下拉伸

![在此处输入图像描述](../Images/d300af92ad174c31ef619505565d4d39.png)

.leftnavdiv 的 CSS

```
.leftnavdiv {
    padding-top: 40px;
    overflow: hidden;
    z-index: 99;
    position: fixed;
    _position:absolute;
    top: 0px;
    _top:expression(eval(document.body.scrollTop));
    left: 0px;
    width: 10px;
    height: 100%;
    background-color: white;
    a:link color:#FF0000;     
    a:visited color:#00FF00;
} 
```

html:

```
<div class="leftnavdiv">
            <div>
                <table style="height:100%;">
                    <tr style="height:100%;">
                        <td valign="top" style="height:100%;">
                            <div id="makebtnset" style="height:100%; overflow-y: scroll;">
                                <?php
                                //code removed
                                ?>
                            </div>
                        </td> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-11T14:31:06.517

忘记高度：100%，你可以使用：

```
.leftnavdiv {
   bottom: 0;
   left: 0;
   overflow-x: hidden;
   overflow-y: auto;
   padding: 0;
   position: fixed;
   top: 0;
   width: 300px;
} 
```

# javascript - 用于开发/生产环境的备用 grunt.js 任务

> ID：13800205
> 
> 赞同：30
> 
> 时间：2012-12-10T11:37:06.120
> 
> 标签：javascript, node.js, npm, gruntjs

我正在尝试设置我的 grunt.js 文件，以便它仅`min`在我的生产服务器上运行时运行任务 - 在我的本地开发服务器上运行时，我不希望`min`每次更改都对我的代码进行更改，因为这是不必要的。

关于 grunt.js 如何区分 dev/prod 环境的任何想法？

* * *

## 回答 #1

> 赞同：67
> 
> 时间：2012-12-10T19:55:07.323

注册生产任务：

```
// on the dev server, only concat
grunt.registerTask('default', ['concat']);

// on production, concat and minify
grunt.registerTask('prod', ['concat', 'min']); 
```

在您的开发服务器运行`grunt`和您的生产运行`grunt prod`。

您还可以为每个任务设置更精细的目标：

```
grunt.initConfig({
  min: {
    dev: {
      // dev server minify config
    },
    prod: {
      // production server minify config
    }
  }
});
grunt.registerTask('default', ['min:dev']);
grunt.registerTask('prod', ['min:prod']); 
```

# json - 如何将 json 编码的输入插入到外部相关表中

> ID：13800207
> 
> 赞同：0
> 
> 时间：2012-12-10T11:37:16.790
> 
> 标签：json, extjs, yii

我在 yii+extjs 中创建功能。我的客户端在 extjs 中设计，服务器端在 yii 框架中。我有两个表作为 Poll Option -pollId -optionId -PollQuestion -option -pollId

现在通过将在 extjs 中的投票创建表单，问题及其相关选项以 json 格式发送到服务器。所以在 yii 框架中，在 actionCreate 函数中会得到输入——

```
$json='{"pollId":1,"PollQuestion":"Who is the best 
cricketer","option":"ABC","option":"DEF","option":"XYZ"}'
$obj=json_decode($json); 
```

在创建民意调查期间，用户可以输入任意数量的选项。因此选项的数量可以是任意数量。我正在 Pollcontroller 中创建上述功能。所以这个新创建的问题被插入到投票表中=

```
$model=new Poll();
           $model->pollId=$obj->pollId;
           $model->PollQuestion=$obj->PollQuestion; 
```

现在我想将所有这些新选项放在具有相同 pollId 的选项表中。那么如何在选项表中添加所有这些选项呢？请帮我

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T13:47:38.140

我将从修改 JSON 开始，因此选项是 pollquestion JSON 中的一个单独的 JSON。像这样的东西...

```
$json='{"pollId": 1,"PollQuestion": "Who is the best cricketer",
        "options":{[{"value":"ABC"},{"name": "DEF"},{"name": "XYZ"}]}'; 
```

这样，当您使用 json_decode 对其进行解码时，您将获得一个选项数组，您可以通过该数组并将该数组中的每个元素添加到选项数组中。

```
for($i=0; $i<sizeof($obj['options']);$i++){
    //Add to table logic here
} 
```

# c# - 如何使用 C# 访问 Excel 书签

> ID：13800211
> 
> 赞同：0
> 
> 时间：2012-12-10T11:37:39.490
> 
> 标签：c#, excel, bookmarks

我有一个非常大的 excel 文件，我们必须将其导入数据库。导入工作完美，但导入它需要 35 秒。客户等不及了。我在其中创建了书签。

这是创建书签的链接。 [http://www.youtube.com/watch?v=9n4g_l7h8jc](http://www.youtube.com/watch?v=9n4g_l7h8jc)

现在我想从 C# 代码中读取书签。正如我所说，我们有不同的部分，例如：1\. 分配
2\. 员工 3\. 资源 4\. 预算等等......

我可以直接从此代码访问此标题/部分，我得到行和列

```
_Worksheet xlWorksheet = xlWorkbook.Sheets[1];
Range xlRange = xlWorksheet.UsedRange;
var externalDprDistribution = xlRange.Find("Distribution");
var colDist = externalDprDistribution.Column;
var rowDist = externalDprDistribution.Row; 
```

但我仍然想在 excel 工作表中创建书签，然后我想在 c# 代码中访问书签，并从那里获取行和列。所以我需要一个可以访问在 c# 中创建的书签的代码

有什么帮助吗？问候

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-08-01T03:14:44.070

如果您提取 Excel 文件，您会看到书签是超链接。

```
<hyperlinks>
  <hyperlink ref="G18" location="Test_Mark1" display="Bookmark1"/>
  <hyperlink ref="G10" r:id="rId1"/>
</hyperlinks> 
```

最近做一个项目，写了下面的测试代码，找书签更新，希望对你有帮助

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Threading.Tasks;
using DocumentFormat.OpenXml;
using DocumentFormat.OpenXml.Packaging;
using DocumentFormat.OpenXml.Spreadsheet;
using System.IO.Packaging;
using System.Xml;
using System.IO;

namespace OpenXMLTest
{
class Program
 {
static void Main(string[] args)
{
    string fileName = @"c:\temp\book1.xlsx";

    Console.WriteLine("Start reading bookmark of excel...");

    using (FileStream fs = new FileStream(fileName, FileMode.Open, FileAccess.ReadWrite, FileShare.ReadWrite))
    {
        using (SpreadsheetDocument doc = SpreadsheetDocument.Open(fs, true))
        {
            WorkbookPart workbookPart = doc.WorkbookPart;

            //find bookmarks
            foreach (var workSheetPart in workbookPart.WorksheetParts)
            {
                var temp = workSheetPart.RootElement.Descendants<Hyperlinks>();
                IEnumerable<Hyperlink> hyperLinks = null;
                if (temp.Count() > 0)
                {
                    hyperLinks = temp.First().Cast<Hyperlink>();
                }

                var workSheet = workSheetPart.Worksheet;

                var cells = workSheet.Descendants<Cell>();

                //loop each cell, find bookmark
                foreach (var c in cells)
                {

                    if (hyperLinks != null && hyperLinks.Count() > 0)
                    {
                        var hyperLink = hyperLinks.SingleOrDefault(x => x.Reference.Value == c.CellReference.Value);
                        if (hyperLink != null)
                        {

                            if (!string.IsNullOrEmpty(hyperLink.Location))
                            {
                                Console.WriteLine("Bookmark.DisplayName : " + hyperLink.Display);
                                Console.WriteLine("Bookmark.Location : " + hyperLink.Location);

                                //update bookmark

                                hyperLink.Location = "BookMark_Test";
                                hyperLink.Display = "updated bookmark";

                                Console.WriteLine("Bookmark.DisplayName after updated : " + hyperLink.Display);
                                Console.WriteLine("Bookmark.Location after updated : " + hyperLink.Location);
                            }

                            //for normal hyperlinks
                            //var hr = workSheetPart.HyperlinkRelationships.SingleOrDefault(x => x.Id == hyperLink.Id);
                            //if (hr != null)
                            //{
                            //    Console.WriteLine(hr.Uri.ToString());
                            //}
                        }
                    }

                    workSheet.Save();
                }

                workbookPart.Workbook.Save();

            }

        }

    }

    Console.ReadKey();

}

}
} 
```

# jquery - 使用带有 jquery 和 rails 的复选框在一个页面上提交多个表单

> ID：13800212
> 
> 赞同：0
> 
> 时间：2012-12-10T11:37:43.030
> 
> 标签：jquery, ruby-on-rails

**问题：它只提交页面上的第一个表单。**

我有一个待办事项，完成后可以通过单击复选框来检查。

在我的部分我有一个表格。它的渲染次数与待办事项一样多，但具有不同的 id。在表单中有一个复选框。单击时表单提交。

部分的

```
<%= form_for todo, :remote => true, :html => {:id => "edit_done_todo_#{todo.id}"} do |f| %>
  <%= f.hidden_field(:done_by_user_id,:value => current_user.id) %>
  <%= f.check_box :completed, :class => "done_box", :id => todo.id %>
<% end %> 
```

这是javascript

```
jQuery.fn.mark_todo_done = function (){
    var id = $(this).attr("id")
    console.log(id)
    $("#edit_done_todo_" + id).submit()

};
$(document).ready(function() {
 $(".done_box").live("click", function() { 
     $(this).mark_todo_done();
   })
}) 
```

console.log 显示正确的 id。但是，页面上的第一个表单被提交。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T15:25:33.333

Railscasts 在这个主题上有出色的表现，称为 jquery-ajax-revised (#136)。它包含了一个简单的待办事项列表的几乎所有基本知识。

关于您的问题，您所需要的只是以下 javascript：

```
 $(document).ready(function() {
    $('.edit_todo input[type=submit]').remove();
    $('.edit_todo input[type=checkbox]').click(function() {
      $(this).parent('form').submit();
    });
  }); 
```

第二行意味着您从评论中删除提交按钮（如果有的话）。第三行响应实际单击复选框（从类名为 edit_todo 的表单中，您可以通过单击 Chrome 中的检查元素来检查表单的类名）。第四行实际上从您单击的复选框中获取表单元素并提交该表格。

希望我在此回答了您的问题，否则我想对您的问题进行进一步的解释。

# excel - Application.Run 和范围参数？

> ID：13800213
> 
> 赞同：2
> 
> 时间：2012-12-10T11:37:45.123
> 
> 标签：excel, vba

如果我有一个excel函数，例如：

```
=my_function(A1:C4) 
```

我想从 VBA 中调用它，例如：

```
Dim t as variant
t = Application.Run("my_function",X) 
```

X 表示 A1:C4 的最简单方法是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-10T12:25:48.093

您的范围必须来自工作表，因此如果您首先定义该范围，然后将其传递给其他工作簿中的函数（我假设这就是您想要做的，因为您不会使用 Application.Run 否则）。所以下面的代码可以解决问题：

```
Sub RunFunctionInAnotherWorkbook()
    Dim rThisRange as Range
    Dim vResult as Variant

    Set rThisRange = ActiveSheet.Range("A1:C4")

    vResult = Application.Run("'MyOtherWorkbook.xls'!TheModuleName.TheSubName", rThisRange)
End Sub 
```

以及工作簿“MyOtherWorkbook.xls”中的功能：

```
Function TheSubName(inputRange as Range) as Variant

    'Work your magic here

End Function 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T11:48:36.897

我没试过，但不会

```
t=myfunction(range) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-30T10:02:54.280

最简单的语法是

```
Application.Run("my_function", [A1:c4]) 
```

# facebook - Facebook 与 php 同步 - 获取 facebook 数据

> ID：13800219
> 
> 赞同：0
> 
> 时间：2012-12-10T11:38:04.623
> 
> 标签：facebook, codeigniter, facebook-graph-api

我对我的 Facebook 应用程序的授权有疑问。当我在本地 Web 服务器上正常运行我的应用程序时，进程如下所示：

```
**Get facebook user->If user is not logged on -> Redirect user on facebook login page**

**Get facebook user->If user is  logged on -> Redirect user to authorize my facebook application->everything goes right without problems** 
```

当我使用 iframe 在 facebook 上托管我的应用程序时，第二个进程不起作用（用户永远不会显示授权窗口），并且出现以下异常：

```
Error validating access token: User xxxxxxx has not authorized application xxxxxxx. 
```

我正在使用 CodeIgniter PHP 框架，这是我的 PHP 代码：

```
$this->load->library('facebook');
        $user = null;
        $user_profile = null;

        $user = $this->facebook->getUser();
        if ($user) {
          try {
            // Proceed knowing you have a logged in user who's authenticated.
            $access_token = $this->facebook->getAccessToken();
            $user_profile = $this->facebook->api($user);

          } 
          catch (FacebookApiException $e) {
            show_error(print_r($e, TRUE), 500);
          }
        }
        else{
            $data = array(
            'redirect_uri' => 'xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx','scope'=>'email');
            $access_token = $this->facebook->getAccessToken();
        redirect($this->facebook->getLoginUrl($data));

        }
        $data['facebook']=$user_profile;
        $this->load->view('templates/header');
        $this->load->view('pages/prijavaKlasicnoFacebook', $data);
        $this->load->view('templates/footer');
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T14:38:58.090

您还应该在您的范围内提供“读取流”和“发布数据”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T11:49:23.293

您不能在 iframe 中加载 OAuth 对话框——出于安全原因。

您必须将其加载到最顶层的窗口实例中——因此没有服务器端重定向，而是使用客户端“重定向”`top.location.href = "…";`

让你的脚本在一个空文档中输出这个 JS 片段（包括正确的登录 URL）。

# bash - While 循环在 Bash 的第一行之后停止读取

> ID：13800225
> 
> 赞同：139
> 
> 时间：2012-12-10T11:38:40.863
> 
> 标签：bash, shell, ssh, while-loop

我有以下 shell 脚本。目的是循环遍历目标文件的每一行（其路径是脚本的输入参数）并对每一行进行处理。现在，它似乎只适用于目标文件中的第一行，并在该行被处理后停止。我的脚本有什么问题吗？

```
#!/bin/bash
# SCRIPT: do.sh
# PURPOSE: loop thru the targets 

FILENAME=$1
count=0

echo "proceed with $FILENAME"

while read LINE; do
   let count++
   echo "$count $LINE"
   sh ./do_work.sh $LINE
done < $FILENAME

echo "\ntotal $count targets" 
```

在`do_work.sh`中，我运行了几个`ssh`命令。

* * *

## 回答 #1

> 赞同：227
> 
> 时间：2012-12-10T11:56:30.357

问题是`do_work.sh`运行`ssh`命令，默认情况下`ssh`从您的输入文件 stdin 读取。结果，您只看到处理的第一行，因为该命令消耗了文件的其余部分并且您的 while 循环终止。

这不仅适用于`ssh`，而且适用于任何读取标准输入的命令，包括`mplayer`、`ffmpeg`、`HandBrakeCLI`等。

为防止这种情况，请将`-n`选项传递给您的`ssh`命令以使其从`/dev/null`标准输入而不是标准输入中读取。其他命令具有类似的标志，或者您可以普遍使用`< /dev/null`.

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2019-03-25T09:32:51.937

更一般地说，一个不特定的解决方法是`ssh`为任何可能消耗`while`循环输入的命令重定向标准输入。

```
while read -r LINE; do
   let count++
   echo "$count $LINE"
   sh ./do_work.sh "$LINE" </dev/null
done < "$FILENAME" 
```

添加`</dev/null`是这里的关键点（尽管更正的引用也有些重要；另请参见[何时在 shell 变量周围加上引号？](https://stackoverflow.com/questions/10067266/when-to-wrap-quotes-around-a-shell-variable/27701642)）。`read -r`除非您特别需要没有`-r`.

另一种特定的解决方法是`ssh`确保任何`ssh`命令都绑定了其标准输入，例如通过更改

```
ssh otherhost some commands here 
```

而是从此处的文档中读取命令，该文档方便地（对于此特定场景）绑定了`ssh`命令的标准输入：

```
ssh otherhost <<'____HERE'
    some commands here
____HERE 
```

* * *

## 回答 #3

> 赞同：16
> 
> 时间：2021-02-12T21:16:34.837

一个非常简单且强大的解决方法是更改​​命令接收输入的*文件描述符。*`read`

这是通过两个修改来实现的： 的`-u`参数`read`和 的重定向运算符`< $FILENAME`。

在 BASH 中，默认的文件描述符值（即`-u`in的值`read`）是：

*   0 = 标准输入
*   1 = 标准输出
*   2 = 标准错误

所以只需选择一些其他未使用的文件描述符，就像`9`只是为了好玩。

因此，以下将是解决方法：

```
while read -u 9 LINE; do
   let count++
   echo "$count $LINE"
   sh ./do_work.sh $LINE
done 9< $FILENAME 
```

注意两个修改：

1.  `read`变成`read -u 9`
2.  `< $FILENAME`变成`9< $FILENAME`

作为最佳实践，我对`while`我在 BASH 中编写的所有循环都执行此操作。如果您使用 嵌套循环，请为每个循环使用`read`不同的*文件描述符（9、8、7、...）。*

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2015-11-14T22:54:02.110

ssh -n 选项可防止在使用 HEREdoc 将输出传输到另一个程序时检查 ssh 的退出状态。所以最好使用 /dev/null 作为标准输入。

```
#!/bin/bash
while read ONELINE ; do
   ssh ubuntu@host_xyz </dev/null <<EOF 2>&1 | filter_pgm 
   echo "Hi, $ONELINE. You come here often?"
   process_response_pgm 
EOF
   if [ ${PIPESTATUS[0]} -ne 0 ] ; then
      echo "aborting loop"
      exit ${PIPESTATUS[0]}
   fi
done << input_list.txt 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2018-01-31T11:03:22.050

这发生在我身上，因为我有`set -e`并且`grep`一个循环返回没有输出（这给出了一个非零错误代码）。

# listbox - 在 Windows Phone 8 的混合示例数据中使用 ListBox 而不是 LongListSelector

> ID：13800233
> 
> 赞同：2
> 
> 时间：2012-12-10T11:39:40.467
> 
> 标签：listbox, windows-phone, windows-phone-8, blend, longlistselector

我只是在尝试使用[Corinna Black 在本视频中演示](http://www.youtube.com/watch?v=w6hZpst9INs)的相同示例应用程序（大约 21:40）。她在 Blend 中创建了示例数据，并将其作为 ListBox 绑定到 Panorama Item 的 Grid。当我将集合拖放到设计器时，这是 Blend 将为我提供的唯一选项。

从 Windows Phone 8 开始，ListBox 被 Windows Phone Toolkit 的 LongListSelector 取代。我现在的问题是：Blend 怎么可能使用 ListBox 而我却不能在 Visual Studio 2012 中使用 ListBox，尽管我已经创建了一个仅限 Windows Phone 8 的项目？如果我尝试在 XAML 代码中用 LongListSelector 替换 ListBox，Blend 会报错：

> 名称空间“http://schemas.microsoft.com/client/2007”中不存在名称“LongListSelector”

我认为 ListBox 的使用已被弃用，因为 LongListSelector 中的滚动性能更好。那么为什么 Blend 使用旧的 ListBox 而不是应该更好的 LongListSelector 呢？以及如何使用 LongListSelector 为 Windows Phone 8 应用程序创建示例数据？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T08:31:24.623

我找到了问题的答案： LongListSelector 不是普通库的一部分。它是[Windows Phone Toolkit library](http://phone.codeplex.com/)的一部分，必须使用 NuGet 预先添加。

将新命名空间添加到您的 xaml：

```
xmlns:toolkit="clr-namespace:Microsoft.Phone.Controls;assembly=Microsoft.Phone.Controls.Toolkit" 
```

现在您可以使用 LongListSelector 访问

```
<phone:LongListSelector/> 
```

然后，您可以分配一个 ItemsSource，甚至可以与设计数据混合使用它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T11:10:48.750

longlistselector 现在是核心 SDK 库的一部分。我建议使用它而不是工具包的 LLS。

核心库 LLS 用于无缝替换您的 WP7 列表框，如果您想使用该工具包的列表框，则必须进行一些自定义。

# android - MapView显示很多GeoPoints之间的路线

> ID：13800238
> 
> 赞同：0
> 
> 时间：2012-12-10T11:39:59.320
> 
> 标签：android, android-mapview, routes

我有一个应用程序，用户获得了很多积分（100 甚至更多），他必须亲自去这些积分并“签到”。他们必须按特定顺序前往这些点，所以我需要在 MapView 中显示一条通过所有这些点的路线。

我已经阅读了很多关于获取两点之间的路线的内容，但是我找不到任何关于绘制具有很多点的复杂路线的信息。这种行为可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T12:32:06.963

```
public class RouteOverlay extends Overlay {
    private GeoPoint gp1;
    private GeoPoint gp2;
    private int color;

public RouteOverlay(GeoPoint gp1, GeoPoint gp2, int color) {
        this.gp1 = gp1;
        this.gp2 = gp2;
        this.color = color;
    }
Now all that's left now for our Overlay is to override the draw() method and draw the line as we need it:

@Override
public void draw(Canvas canvas, MapView mapView, boolean shadow) {
    Projection projection = mapView.getProjection();
    Paint paint = new Paint();
    Point point = new Point();
    projection.toPixels(gp1, point);
    paint.setColor(color);
    Point point2 = new Point();
    projection.toPixels(gp2, point2);
    paint.setStrokeWidth(5);
    paint.setAlpha(120);
    canvas.drawLine(point.x, point.y, point2.x, point2.y, paint);
    super.draw(canvas, mapView, shadow);
}
Back in the Activity, just iterate over the GeoPoints that you got from google maps and add each of them to the MapView:

private void drawPath(List geoPoints, int color) {
   List overlays = mapView.getOverlays();

   for (int i = 1; i < geoPoints.size(); i++) {
    overlays.add(new RouteOverlay(geoPoints.get(i - 1), geoPoints.get(i), color));
   }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T12:19:23.137

尝试这样的事情

```
if(DataSources.ActivitiesList.length >0)
{
  String address = "http://maps.google.com/maps?daddr=" +    DataSources.ActivitiesList[0].SiteLatitude.toString() + "," + DataSources.ActivitiesList[0].SiteLongitude.toString();
for (int i= 1 ;i <  DataSources.ActivitiesList.length ; i++) 
{
    if(DataSources.ActivitiesList[i].SiteLatitude != null)
        address += "+to:" + DataSources.ActivitiesList[i].SiteLatitude + "," + DataSources.ActivitiesList[i].SiteLongitude;
}
Intent intent = new Intent(android.content.Intent.ACTION_VIEW, Uri.parse(address));
    startActivity(intent);
    break;      
} 
```

# iphone - UITableView Cell控件自定义

> ID：13800241
> 
> 赞同：0
> 
> 时间：2012-12-10T11:40:08.343
> 
> 标签：iphone, objective-c, xcode, uitableview

我需要`UITableview`像图片一样自定义一个控件，![](../Images/de0b41745d9f4be72f230002988cef31.png)

在这里我需要将 RE-ORDERING 控件放在左侧，这里可以吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T11:50:46.727

@Harish Saran -- 您可以自定义表格视图单元格。只需在扩展 tableviewcell 的类（customCell.h）上创建。在那个类中创建你想要的按钮/ImageView。并放置在单元格的内容视图中。

现在在您的 cellForRowAtIndexPath 方法中创建 customCell.h 的单元格对象，并为 customCell.h 中分配的按钮/ImageView 分配图像

# azure - 如何启用订阅以创建网站？

> ID：13800243
> 
> 赞同：2
> 
> 时间：2012-12-10T11:40:12.220
> 
> 标签：azure, payment, subscription, azure-web-app-service

我在 Windows Azure 中有两个订阅计划，我想配置一个网站以使用我帐户的不同订阅计划。

我该怎么做呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-10T11:48:34.107

创建新网站时，有 3 个选项：快速创建、使用数据库创建和从图库中创建。在每个选项中都有一个标有“订阅”的组合框。使用此字段选择将在其下创建新网站的订阅。

例如，在使用数据库创建新网站时：

![在此处输入图像描述](../Images/810c46d3998c5e38f6826fe095871424.png)

笔记：

*   如果在“区域/关联组”组合框中选择了关联组，您必须将其更改为区域（例如“美国东部”）才能看到其他订阅，否则您将只能查看包含所选关联组的订阅。

*   当网站功能处于预览状态时，只会显示激活了此预览功能的订阅。

创建网站后，无法通过管理门户更改其所属的订阅。如果要迁移一个网站，在另一个订阅下创建一个新网站，将内容转移到这个新网站，然后更改域名指向新网站，如果有的话。

如果您希望将订阅下的**所有服务迁移到另一个订阅，您可以按照**[此答案](https://stackoverflow.com/a/10986843/376366)中的说明向 Windows Azure 计费团队提交请求。

**注意：**如果“订阅”下拉菜单不存在，则您要启用的服务可能处于预览状态，您必须为其显式启用订阅，请查看[此](https://stackoverflow.com/a/12625671/75500)答案以获取详细信息。

# postgresql - 忙表性能优化

> ID：13800248
> 
> 赞同：0
> 
> 时间：2012-12-10T11:40:21.223
> 
> 标签：postgresql, indexing

我有一个 postgresql 表，用于存储类似表格的数据。

```
id SERIAL,
item_id INTEGER ,
date BIGINT,
column_id INTEGER,
row_id INTEGER,
value TEXT,
some_flags INTEGER, 
```

问题是我们每天有 5000 多个条目，这些信息需要保存多年。所以我最终得到了一个巨大的表，女巫忙于前 1000-5000 行，有很多 SELECT、UPDATE、DELETE 查询，但旧内容很少使用（仅在统计中）并且几乎从未更改。

问题是如何提高日常工作的性能（前 5000 个条目来自 5000 万）。几乎所有列都有简单的索引.. 但没什么特别的。目前无法拆分表，我正在寻找更多索引优化。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T14:06:58.647

`dezso`来自和的评论中的建议`Jack`很好。如果你想要最简单的，那么这就是你实现部分索引的方式：

```
create table t ("date" bigint, archive boolean default false);

insert into t ("date")
select generate_series(
    extract(epoch from current_timestamp - interval '5 year')::bigint,
    extract(epoch from current_timestamp)::bigint,
    5)
;

create index the_date_partial_index on t ("date")
where not archive
; 
```

为避免更改所有添加索引条件的查询重命名表：

```
alter table t rename to t_table; 
```

并使用包含索引条件的旧名称创建视图：

```
create view t as
select *
from t_table
where not archive
;

explain
select *
from t
;
                                          QUERY PLAN                                           
-----------------------------------------------------------------------------------------------
 Index Scan using the_date_partial_index on t_table  (cost=0.00..385514.41 rows=86559 width=9) 
```

然后每天存档旧行：

```
update t_table
set archive = true
where
    "date" < extract(epoch from current_timestamp - interval '1 week')
    and
    not archive
; 
```

`not archive`条件是避免更新数百万已归档的行。

# asp.net-mvc - 看不到默认 MVC 帐户控制器/ASP.NET 成员资格提供程序使用的数据库

> ID：13800250
> 
> 赞同：1
> 
> 时间：2012-12-10T11:40:37.257
> 
> 标签：asp.net-mvc, asp.net-mvc-3, asp.net-mvc-4

我启动了一个新的 Internet 应用程序类型 MVC 3 项目。它有一个使用默认 ASP.NET 成员资格提供程序工作的帐户控制器。

该项目的 web.config 具有以下连接字符串：

```
connectionString="data source=.\SQLEXPRESS;Integrated Security=SSPI;AttachDBFilename=|DataDirectory|aspnetdb.mdf;User Instance=true"
         providerName="System.Data.SqlClient" /> 
```

我的机器上确实有 SQLEXPRESS，但是当我在 Management Studio 中查找数据库时，我没有看到为成员资格创建的任何数据库。我只看到我创建的那些。

ASP.NET MVC 在哪里创建这个成员数据库？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T11:45:39.573

您使用的是用户实例（包含`aspnetdb.mdf`在您的 SQL 安装`data`目录中的文件）而不是 SQLExpress 中的嵌入式数据库，这就是您在 SSMS 中看不到它的原因。

如果需要，这里[解释了这是什么](http://blogs.msdn.com/b/sqlexpress/archive/2006/11/22/connecting-to-sql-express-user-instances-in-management-studio.aspx)以及如何查询其中的数据。

# android - 在哪里放置 bitmap.recycle() 以减少内存不足问题

> ID：13800252
> 
> 赞同：1
> 
> 时间：2012-12-10T11:40:46.637
> 
> 标签：android, bitmap, out-of-memory, bitmapfactory

我正在使用以下方法将位图的大小从任何原始大小减小到 200dp X 200dp。这应该是为了防止由于我没有减小位图的大小而发生的内存不足问题而导致的崩溃。然而，即使在使用 BitmapFactory.opitons 来减小位图的大小之后，我仍然会遇到内存不足的问题。

有人建议我使用 bitmap.recycle(); 我以前从未使用过这个，我有点困惑，因为位置 logcat 告诉我内存不足正在发生。

logcat 在此处返回位图的方法的返回语句中告诉我图像缩小方法中发生了内存问题：

```
 return BitmapFactory.decodeFile(fileName, options); 
```

那么在这段代码中我会在哪里调用 bitmap.recycle() 呢？

这是整个方法的代码：

```
 public static Bitmap decodeSampledBitmapFromResource(String fileName, int reqWidth, int reqHeight) {

    // First decode with inJustDecodeBounds=true to check dimensions
    final BitmapFactory.Options options = new BitmapFactory.Options();
    options.inJustDecodeBounds = true;
    BitmapFactory.decodeFile(fileName, options);

    // Calculate inSampleSize
    options.inSampleSize = calculateInSampleSize(options, reqWidth, reqHeight);

    // Decode bitmap with inSampleSize set
    options.inJustDecodeBounds = false;

       // logCat says running out of memory here on the return statement
    return BitmapFactory.decodeFile(fileName, options);

} 
```

# google-chrome - 每当我点击 TinyMce 可编辑的文本框时，Chrome 都会跳转

> ID：13800254
> 
> 赞同：4
> 
> 时间：2012-12-10T11:40:57.917
> 
> 标签：google-chrome, tinymce, css-position

我正在使用带有“位置：固定”外部工具栏的 TinyMCE。

问题是每当我单击一个 div 时，该 div 在单击时变为可被 tinyMCE 编辑，整个 Chrome 页面都会跳转，以便在单击后工具栏始终位于页面上的某个位置。

我怎样才能防止跳跃？

当一个人点击一个 div（其 ID 为`ta_id`）时，这是代码的一部分（附加到该 div 的插件的一部分：

```
 tinyMCE.execCommand("mceAddControl", false, ta_id);
            $('#'+ta_id+'_tbl').css("width",'100%');
            divheight = $this.css('height');
            $('#'+ta_id+'_tbl').css("height",divheight);
            $('#'+ta_id+'_ifr').attr('scrolling','no');
            $('#'+ta_id+'_ifr').css('overflow-y','hidden');
            $('#'+ta_id+'_ifr').css("height",divheight);
            $this.resizable("option","disabled",true);
            $this.draggable("option","disabled",true); 
```

如果我单击 FF 或 IE 中的 div，TinyMCE 可以对其进行编辑，而不会出现任何烦人的跳转。

# ios - 如何找到地图中某个点的角度方向（相对于北方）

> ID：13800255
> 
> 赞同：0
> 
> 时间：2012-12-10T11:40:58.193
> 
> 标签：ios, c, map

我需要找到北方和地图中一个点之间的角度（21.4167，-39.8167）。

这是我的代码

```
double MECCA_LONGITUDE = 21.4167;
double MECCA_LATITUDE = -39.8167;

-(void) getAngle :(float) phoneAngle: (float) lon:(float) lat
{

 float ad = atan (sin (lon - MECCA_LATITUDE) /  ( (cos (lat)) * (tan (MECCA_LATITUDE)) ) - ( (sin (lat)) * (cos (lon - MECCA_LONGITUDE)) ));

NSLog(@"###### %f", CC_RADIANS_TO_DEGREES(ad));
} 
```

我仍然没有得到正确的答案。任何提示将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T13:23:06.633

您的主要问题是，`sin()`并`cos()`以弧度表示他们的论点，并且您正在通过度数（您还可以互换麦加的经度和纬度）。

尝试：

```
double MECCA_LATITUDE = 21.4167;
double MECCA_LONGITUDE = 39.8167;

double r_delta_lon = CC_DEGREES_TO_RADIANS(MECCA_LONGITUDE - lon);
double r_lat2 = CC_DEGREES_TO_RADIANS(MECCA_LATITUDE);
double r_lon1 = CC_DEGREES_TO_RADIANS(lon);
double r_lat1 = CC_DEGREES_TO_RADIANS(lat);

double ad = atan2(sin(r_delta_lon) * cos(r_lat2),
    cos(r_lat1) * sin(r_lat2) - sin(r_lat1) * cos(r_lat2) * cos(r_delta_lon)); 
```

# c++ - 如何从 vlc 媒体播放器源代码中使用 QNetworkAccessManager

> ID：13800256
> 
> 赞同：2
> 
> 时间：2012-12-10T11:41:01.810
> 
> 标签：c++, qt4, vlc

我正在自定义 vlc 源代码，需要使用 Qt OpenDialog 中的 QNetworkAccessManager（vlc 的 QT UI 对话框的一部分）。

我正在尝试使用[以下](https://stackoverflow.com/questions/7218851/making-an-http-get-under-qt)代码示例

```
void MainWindow::requestShowPage(){
    QNetworkAccessManager *manager = new QNetworkAccessManager(this);
    connect(manager,SIGNAL(finished(QNetworkReply*)),this,SLOT(requestReceived(QNetworkReply*)));
manager->get(QNetworkRequest(QUrl("http://google.com")));
}

void MainWindow::requestReceived(QNetworkReply* reply){
    QString replyText;
    replyText.fromAscii(reply->readAll());
    ui->txt_debug->appendPlainText(replyText);
} 
```

我的主要问题是即使有一个如下调用，vlc 也无法加载 UI：

```
QNetworkAccessManager *manager = new QNetworkAccessManager(this); 
```

以下是 vlc 控制台上产生的输出

```
./vlc
[0x19c9388] main libvlc: Running app with the default interface. 
[0x1f82988] main interface error: corrupt module: /VLC/vlc-2.0.4/modules/gui/qt4/.libs/libqt4_plugin.so
[0x2586748] main generic error: corrupt module: /VLC/vlc-2.0.4/modules/gui/qt4/.libs/libqt4_plugin.so
[0x1f82988] skins2 interface error: no suitable dialogs provider found (hint: compile the qt4 plugin, and make sure it is loaded properly)
[0x1f82988] skins2 interface error: cannot instantiate qt4 dialogs provider
[0x1f82988] [cli] lua interface: Listening on host "*console". 
```

简单地省略 QNetworkAccessManager 会再次恢复 UI。

一个。QNetworkAccessManager 使用场景有什么特别之处，即它应该在全局范围内创建还是什么？我浏览了它的文档，但没有找到任何东西。

湾。是否有关于 Qt 的任何特殊约定，或者它与我缺少的 VLC 一起使用？我在 c/c++ 和 Linux 方面经验丰富，但对 QT 很陌生。

**UPDATE1：**我也看到了[这个 SO question](https://stackoverflow.com/q/9506852/986760)，它基本上是在尝试使用 QNetworkAccessManager 执行相同的 httpget。但是，我相信调用这个简单的 api 不需要作为一个单独的模块来完成（这个问题试图编写一个新模块）？或者在 qt / vlc 中有没有这样的限制

**UPDATE2：**到目前为止，我怀疑它与向 vlc qt ui 部分添加新类有关。我尝试使用 vlc 包含 qt 安装附带的 http 示例，但看到相同的行为。任何有关在 vlc ui 组件中包含 .cpp 和 .h 的指南都会有所帮助。

**更新 3：**我按照以下答案中的建议进行操作，似乎无法理解以下编译错误。任何人都可以帮忙吗？

```
/usr/include/qt4/QtCore/qobject.h: In copy constructor ‘QNetworkAccessManager::QNetworkAccessManager(const QNetworkAccessManager&)’:
/usr/include/qt4/QtCore/qobject.h:333:5: error: ‘QObject::QObject(const QObject&)’ is private
In file included from /usr/include/qt4/QtNetwork/QNetworkAccessManager:1:0,
                 from qt4.hpp:39,
                 from qt4.cpp:37:
/usr/include/qt4/QtNetwork/qnetworkaccessmanager.h:72:24: error: within this context
qt4.cpp: At global scope:
qt4.cpp:192:63: note: synthesized method ‘QNetworkAccessManager::QNetworkAccessManager(const QNetworkAccessManager&)’ first required here 
In file included from qt4.cpp:54:0: 
```

=============

qt4.hpp 包含在全局范围内添加的以下内容

```
#include <QNetworkAccessManager>
extern QNetworkAccessManager NETWORK_MANAGER; 
```

qt4.cpp 在全局范围内包含这个

```
QNetworkAccessManager NETWORK_MANAGER = QNetworkAccessManager(); 
```

然后我正在访问 qt4 的子类之一

```
QNetworkAccessManager * qnam = &NETWORK_MANAGER; 
```

**更新 4**我还发现手动将 QtNetwork 包含到 make 文件中也是有问题的（尽管它在编译头文件时没有抱怨）并且 vlc ui 无法加载。但是，当我将它添加到主 vlc 配置文件时，即使是 QNetworkAccessManager 的基本本地创建工作。有关详细信息，请参阅[此 vlc 邮件列表线程](http://comments.gmane.org/gmane.comp.video.videolan.vlc.devel/89409)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T00:55:34.137

`QNetworkAccessManager`应该在全球范围内创建。如果你在类或方法中创建它，它会随对象（或方法）一起被销毁，你发送的请求也会丢失。此外，我已经在一个程序中遇到了几个`QNetworkAccessManager`s 的问题，所以我建议你这样做：

a_module.hpp：

```
// ...

#ifndef THE_MODULE
#define THE_MODULE

// ...

#include <QNetworkAccessManager>

// ...

extern QNetworkAccessManager NETWORK_MANAGER;

// ...

#endif    // THE_MODULE 
```

a_module.cpp：

```
// ...

#include "a_module.hpp"

// ...

QNetworkAccessManager NETWORK_MANAGER = QNetworkAccessManager();

// ... 
```

在您的代码中：

```
// ...

#include "a_module.hpp"

// ...

QNetworkAccessManager * qnam = &NETWORK_MANAGER;

// ... 
```

**编辑**：如果它不起作用（参见问题中的更新 3），请尝试`QNetworkAccessManager NETWORK_MANAGER;`代替`QNetworkAccessManager NETWORK_MANAGER = QNetworkAccessManager();`in `a_module.cpp`。这是由于编译器。与 MSVC 不同，g++ 编译时使用`QNetworkAccessManager NETWORK_MANAGER;`但不是`QNetworkAccessManager NETWORK_MANAGER = QNetworkAccessManager();`.

# php - 在没有身份验证系统的情况下使用 Symfony2？

> ID：13800260
> 
> 赞同：1
> 
> 时间：2012-12-10T11:41:23.123
> 
> 标签：php, symfony

我想用用户表的用户名和密码实现一个身份验证系统。

我还有 2 个其他表，其中包含用户表 ( )`users_type1` `users_type2`的外键。`fk_users`我的目标是在身份验证期间识别用户是否匹配类型 1 或类型 2 以便正确重定向。

使用 Symfony 身份验证系统，我做不到。

如果我自己编写所有代码而不使用 Symfony 系统，那么我就可以做我想做的事。

我的问题是：你觉得在没有身份验证系统的情况下使用 Symfony2 会怎样？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T12:05:32.240

您可以使用 Symfony`RoleInterface`按角色对用户进行分组。

[Symfony 的文档](http://symfony.com/doc/current/cookbook/security/entity_provider.html#managing-roles-in-the-database)。

您还可以[从表单参数](http://symfony.com/doc/2.0/cookbook/security/form_login.html#control-the-redirect-url-from-inside-the-form)控制重定向。

# php - 我可以在我的文本框中使用 + 登录吗？

> ID：13800262
> 
> 赞同：0
> 
> 时间：2012-12-10T11:41:26.790
> 
> 标签：php, html

有没有办法可以在我的文本框中接受加号 (+)。实际上我有一个电话号码输入框，可以接受（+）号，然后是号码。有没有办法做到这一点。因为当我`$_POST`在我的 php 中使用数组访问它时，它会删除符号并只给我数字。这就是我从谷歌得到的：

`application/x-www-form-urlencoded`: 这是默认编码。所有字符在发送前都经过编码（空格转换为“+”符号，特殊字符转换为 ASCII HEX 值）

因此，如果空格被转换为“+”，那么真正的“+”符号将变得无法区分。正确的？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T11:49:35.400

是的，有一个加号作为值的编码。
独立的例子

```
<?php if ( !isset($_GET['foo']) ) { ?>
<html>
    <head><title>...</title></head>
    <body>
        <form method="GET" action="?">
            <p>
                <input type="text" name="foo" value="+49301234567789" />
                <input type="submit" />
            </p>
        </form>
    </body>
</html>
<?php
}
else {
    if ( 0==strncmp('+', $_GET['foo'], 1) ) {
        echo 'leading plus sign';
    }
    else {
        echo 'no leading plus sign';
    }
} 
```

附加的查询字符串是编码加号的`?foo=%2B49301234567789`地方。`%2B`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T12:15:14.917

我曾经`rawurlencode($_POST['mobile'])`检索`'mobile'`文本输入名称的值，它返回带有“+”号的值。

# php - jQuery循环创建一个按钮

> ID：13800263
> 
> 赞同：0
> 
> 时间：2012-12-10T11:41:28.663
> 
> 标签：php, jquery, jquery-ui

我目前有一个 jQuery 函数，它 onclick 会打开一个对话框。这允许用户回答问题。

我遇到的问题是，如果有多个问题，该功能仅适用于创建的第一个按钮。

### PHP代码

```
$C = count($array2);
    for($i=0; $i < $C; $i++)
    {
        echo "<button id='reply'>Reply</button";
    } 
```

### jQuery

```
$(function() {
    var name = $( "#name" ),
    allFields = $( [] ).add( name ),

    $( "#form" ).dialog({
        autoOpen: false,
        height: 200,
        width: 700,
        modal: true,
        buttons: {
            Cancel: function() {
                $( this ).dialog( "close" );
            }
        },
        close: function() {
            allFields.val( "" ).removeClass( "ui-state-error" );
        }
    });

    $( "#reply" ).click(function() {
        $( "#form" ).dialog( "open" );
    });
}); 
```

我想要的是单击任何这些按钮，对话框将打开，允许用户回复评论。

提前致谢。

戴夫。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T11:45:47.373

首先，ID 是唯一的。考虑`reply`改为使用类：

```
echo "<button class='reply'>Reply</button>"; 
```

现在您的代码应该可以使用：

```
$(".reply").click(function() {
    $( "#form" ).dialog( "open" );
}); 
```

其次，您可能需要考虑委托给父级以避免添加不必要的事件处理程序。例如，如果所有这些回复按钮都包含在一个元素中`#container`，您可以使用：

```
$('#container').on("click",".reply",function(){
    $( "#form" ).dialog( "open" );
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T11:46:08.800

对于回复按钮，您应该使用 Class 而不是 Id。请尝试以下代码：

......

```
for($i=0; $i < $C; $i++)
{                                   
     echo "<button class='reply'>Reply</button";
} 
```

......

```
$( ".reply" ).click(function() {
      $( "#form" ).dialog( "open" );
}); 
```

# java - 如何单元测试此 inputStream 已关闭？

> ID：13800269
> 
> 赞同：14
> 
> 时间：2012-12-10T11:41:40.967
> 
> 标签：java, unit-testing, junit, mockito

我有一个`Runnable`大致的思路：

```
 public void run() {
        InputStream inputStream = null;
        try {
            inputStream = new FileInputStream(file);
            //more stuff here
        } 
        catch (Exception e) {
            //simplified for reading
        }
        finally {
            if(inputStream != null) {
                try {
                    inputStream.close();
                } catch (IOException e) {}
            }
        }
    } 
```

我如何测试`inputStream.close()`被调用？我目前正在使用 Mockito 和 JUnit。我知道注入`inputStream`in 是一个想法，但我不希望在`run?()`调用之前使用资源，因此它是一个局部变量。那么如何以允许我测试是否调用 close 的方式重新设计我的代码？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-12-10T11:47:36.737

如果我正确理解了任务，它可能是这样的

```
static boolean isClosed;

public void run() {
    InputStream inputStream = null;
    try {
        inputStream = new FileInputStream(file) {
            @Override
            public void close() throws IOException {
                isClosed = true;
                super.close();
            }
        };
        // more stuff here 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-12-10T11:48:12.653

由于没有理由在此方法范围之外公开 InputStream，因此您遇到了测试问题。

但我假设你并不直接关心`InputStream`被关闭。你想测试它，因为你被告知这是一种很好的做法（而且确实如此）。但我认为你真正关心的是保持开放的流的负面影响。效果如何？

尝试修改此方法，使其不关闭流，然后多次执行。您是否遇到内存泄漏，或者文件句柄用完或其他一些愚蠢的行为？如果是这样，你有一个合理的测试。

或者，继续并公开一个装饰的 InputStream ，它可以告诉您它是否已关闭。使其包保护。这就是“不纯”但务实的做法。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2017-03-08T03:42:43.200

要检查是否调用了 close() 方法，您可以使用 Mockito.spy() 创建一个可以记住调用的代理对象。Spy 将所有调用委托给底层 InputStream，只记住发生了什么：

```
InputStream inputStreamSpy = Mockito.spy(inputStream);
// a code that is expected to close your stream goes here ...
Mockito.verify(inputStreamSpy).close(); 
```

实际上，这不会解决您注入 InputStream 实例的问题。似乎您需要某种可以为您打开流的工厂，并且您可以在单元测试中模拟该工厂。让我们称这个工厂为 FileSystem：

```
public class FileSystem {
    public FileInputStream newFileInputStream(File file) {
        return new FileInputStream(file);
    }
} 
```

现在，您可以注入 FileSystem 的一个实例，并且在执行 run 方法之前它不会使用资源：

```
public void run() {
    InputStream inputStream = null;
    try {
        inputStream = fileSystem.newFileInputStream(file);
        //more stuff here
    } 
    catch (Exception e) {
        //simplified for reading
    }
    finally {
        if(inputStream != null) {
            try {
                inputStream.close();
            } catch (IOException e) {}
        }
    }
}

@Test
public void runShouldCloseInputStream() {
    InputStream inputStream = ...
    InputStream inputStreamSpy = Mockito.spy(inputStream);
    FileSystem fileSystemMock = Mockito.mock(FileSystem.class);
    when(mockFileSystem.newFileInputStream(Mockito.any(File.class)))
        .thenReturn(inputStreamSpy);

    MyRunnable instance = new MyRunnable(mockFileSystem);
    instance.run();

    verify(inputStreamSpy).close();
} 
```

Spy 可以做的不仅仅是聆听，您可以使用 Mockito.when() 教它改变行为，就像使用常规模拟一样。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-02-15T11:16:40.387

用于测试 URL 流的 Kotlin 实现已关闭

```
//close the connection
streamURL.close()

//stream should not be available if it is closed
try { streamURL.available() }

//java.net.URL provides simple "closed" message on IO URL
catch (ex: IOException) { Assert.assertEquals("closed", ex.message) } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-10T13:33:24.423

您可以在测试中编写如下内容：

```
try {
    run();
} catch (IOException e) {
    Assert.fail();
} 
```

当您的方法关闭 strem 并发生异常时，测试将失败。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-06-12T17:48:14.607

你可以这样做...

```
 try
    {
         inputStream.readLine();        
    }
    catch (IOException e)
    {
        Assert.assertEquals(e.getLocalizedMessage(), "Stream closed");
    } 
```

# cassandra - 使用 cql2 或 cql3 插入时出现 rpc_timeout 异常

> ID：13800271
> 
> 赞同：0
> 
> 时间：2012-12-10T11:41:45.880
> 
> 标签：cassandra, cql, cql3

我有一个列族，其结构是

```
CREATE TABLE practice (
  id text,
  name text,
  addr text,
  pin text,
  PRIMARY KEY (id, name)
) WITH
comment='' AND
caching='KEYS_ONLY' AND
read_repair_chance=0.100000 AND
gc_grace_seconds=864000 AND
replicate_on_write='true' AND
compaction_strategy_class='SizeTieredCompactionStrategy' AND
compression_parameters:sstable_compression='SnappyCompressor';

CREATE INDEX idx_address ON practice (addr); 
```

最初我使用 CQL 3.0.0 制作了列族。然后为了创建索引，我使用了 CQL 2.0。

现在，当想要在列族中插入任何数据时，它总是显示超时异常。

```
INSERT INTO practice (id, name, addr,pin) VALUES ( '1','AB','kolkata','700052'); 
```

请求未在 rpc_timeout 内完成。

请建议我哪里出错了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-02T12:41:57.090

正如[链接的 Cassandra 论坛问题](http://cassandra-user-incubator-apache-org.3065146.n2.nabble.com/rpc-timeout-exception-while-inserting-td7584186.html)的答案所说，这可能是因为您混合了 CQL2 和 CQL3。你应该坚持其中一个。

# vb.net - DirectCast(sender, Control).ID 在 Vb 2008 中不起作用

> ID：13800272
> 
> 赞同：0
> 
> 时间：2012-12-10T11:41:48.973
> 
> 标签：vb.net, winforms, visual-studio-2008

我需要知道我刚刚在 vb 2010 上单击的对象的名称，我可以使用 DirectCast(sender, Control).ID 来完成，但是我需要这样做的是 2008 年，而 .ID 在 2008 年不存在

我需要等效的

```
lblPatient.Text = DirectCast(sender, Control).ID 
```

'写在 vb 2010 视觉网络开发者中

对于VB 2008

代码

```
 Imports System.Data.SqlClient
Imports System.Data
Public Class FormRm3A
    Dim Labels(40) As Label
    Dim X As Integer
    Dim Y As Integer
    Private Sub FormArrayTest_Load(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles MyBase.Load

        Dim i As Integer

        i = 1
        For Me.Y = 1 To 5
            For Me.X = 1 To 8
                'creates new textbox
                Labels(i) = New Label()
                'set its properties
                Labels(i).Width = 50
                Labels(i).Height = 35
                Labels(i).Left = X * 49
                Labels(i).Top = 30 + (Y * 34)
                Labels(i).BorderStyle = BorderStyle.FixedSingle
                'add control to current form
                Me.Controls.Add(Labels(i))
                If Clicky = True Then
                    AddHandler Labels(i).Click, AddressOf Label1_Click
                End If
                i = i + 1
            Next X
        Next Y

        Dim con As New SqlConnection
        Dim cmd As New SqlCommand
        Dim Subject As String
        Dim StaffInitials As String
        For Session = 1 To 40
            Try
                con.ConnectionString = System.Configuration.ConfigurationManager.ConnectionStrings("RoomBookingSystem.My.MySettings.Database1ConnectionString1").ConnectionString
                Dim SessionParm As New SqlParameter("Session", Session)
                SessionParm.Direction = ParameterDirection.Input
                con.Open()
                cmd.Connection = con
                cmd.Parameters.Add(SessionParm)
                cmd.CommandText = "SELECT Subject, StaffInitials FROM PermanantBooking WHERE (Week = 'A') AND(Room = 'Rm3') AND (Session = @Session)"
                Dim lrd As SqlDataReader = cmd.ExecuteReader()
                While lrd.Read()

                    Subject = Convert.ToString((lrd("Subject").trim))
                    StaffInitials = Convert.ToString((lrd("StaffInitials").trim))

                    Labels(Session).Text = Subject & "" & vbNewLine & StaffInitials
                End While
                'Catch ex As Exception
                ' MsgBox("" & ex.Message)
                'here if there is an error it will go here (can use Msgbox or lable)
            Finally
                cmd.Parameters.Clear()
                con.Close()
            End Try
        Next
    End Sub

Private Sub Label1_Click(ByVal sender As System.Object, ByVal e As System.EventArgs)
    Dim objectID As String
    objectID = DirectCast(sender, Control).ToString
    Day = 
    Period = X
    FormMakeBookingDetails.Show()
    Me.Hide()
End Sub
End Class 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T11:45:19.277

ASP.NET 3.5 已经具有[此属性](http://msdn.microsoft.com/en-us/library/system.web.ui.control.id%28v=vs.90%29.aspx)（实际上`Control.Id`自 1.1 以来就存在），因此您的代码应该可以正常工作。

你能显示完整的代码和异常吗？

**编辑**：

由于您提到您正在使用可视化 Web 开发人员，因此我错误地认为您正在使用 ASP.NET。实际上，您正在使用 Winforms。`Id`Winforms中没有与 ASP.NET 不同的属性。也许您想改用该[`Name`属性](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.name.aspx)（自 1.1 起可用）。

# objective-c - 创建一个不附加到任何 UI 元素的故事板转场？

> ID：13800273
> 
> 赞同：2
> 
> 时间：2012-12-10T11:41:59.503
> 
> 标签：objective-c, ios, xcode, uistoryboard, uistoryboardsegue

我正在尝试从不在我的故事板中的 UI 元素触发故事板转场（在这种情况下，它是 UIAlertView）。因此，我无法从情节提要中的任何现有组件中绘制箭头。

处理这种情况的正确方法是什么？我需要一个带有标识符的 segue，以便我可以从相关的 UIAlertView 按钮调用它。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-10T12:05:35.097

您可以通过`right click + drag`从源控制器将 segue 添加到故事板中的目标控制器。然后只需单击创建的 segue 并设置标识符。您可以像这样以编程方式触发您的 segue：

```
// Note: In this example self is the source controller
// (the controller that holds the segue)
[self performSegueWithIdentifier:@"mySegue" sender:self]; 
```

这是您可以用作参考的屏幕截图：

![在此处输入图像描述](../Images/b792e67553fe96f862c1e4b2b99e44cd.png)

# intellij-idea - IntelliJ：通过签名查找方法

> ID：13800276
> 
> 赞同：5
> 
> 时间：2012-12-10T11:42:27.100
> 
> 标签：intellij-idea

我想知道是否有可能找到返回特定类型的对象方法？例如，我想查看自动完成所有返回的方法`String`：

![在此处输入图像描述](../Images/9d38505875fe991ede18591518a590d1.png)

对于此示例，只需向下滚动即可轻松找到它，但对于具有大量方法的对象，它可能会很痛苦。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T12:27:26.630

实际上，即使在类结构视图中，也没有按返回类型进行默认排序（还没有？）。我为此目的使用智能完成（ctrl+shift+space），仅接受某些类型，例如：

```
String s = aClass.<smart completion here> 
```

它将显示从一开始就`aClass`返回`String`的方法。

# javascript - 原型在 IE6 中不起作用

> ID：13800280
> 
> 赞同：1
> 
> 时间：2012-12-10T11:42:34.630
> 
> 标签：javascript, jquery

此功能不适用于 IE6，但适用于所有其他浏览器。错误是 propertyType 未定义，该函数不适用于 IE6。

我的功能是，

```
function propertyType(){}

propertyType.prototype.contactClear=function()
{
    $('#error_msg').text('');
    $('#error_msg').css("display","none");
    $('#name').val(LANG.LBL_NAME+':');
    $('#email').val(LANG.LBL_EMAIL+':');
    $('#phone').val(LANG.LBL_PHONE+':');
    $('#message').val(LANG.LBL_MESSAGE+': '+LANG.LBL_CONTACT_ME);
    $("#captchaval").val('');
    $("#success_msg").text('');
    $('#success_msg').css("display","none");
}

var propertyType = new propertyType(); 
```

谁能建议我解决这个问题？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T11:51:15.333

如果您尝试将元素加载`clear`到.`hide``DOM`

# iphone - 在“缓存”类中，目录设置在哪里？

> ID：13800281
> 
> 赞同：0
> 
> 时间：2012-12-10T11:42:35.430
> 
> 标签：iphone, ios, ios6, nsfilemanager

我有一个类，用于使用 NSFileManager 从缓存中存储和检索图像数据。创建它的实例时，我想检查图像目录是否已经存在，如果不存在，则创建它。把这段代码放在哪里最合适？这是一个会覆盖指定初始化程序的东西吗？

谢谢阅读。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T11:52:32.977

从编程的角度来看，initialiser ( `init`) 函数是最好的地方，因为其余的实例方法可能依赖于访问目录来存储/检索图像。

您还希望创建的任何实例都知道访问/创建是否成功，因此在您的初始化程序中，您可能希望放置一些错误处理，如果无法访问它，则返回一个 nil 实例（或引发异常），然后可以由使用缓存类实例的类处理。

# php - 禁用重复用户电子邮件的 Wordpress 限制

> ID：13800282
> 
> 赞同：0
> 
> 时间：2012-12-10T11:42:39.910
> 
> 标签：php, wordpress

我有一个非常大的多站点。我收到了启用多个用户可以使用同一电子邮件的选项的请求。我发现一个插件“允许多个帐户”不能正常工作。我应该为此想出一些其他的解决方案。我知道我可以使用像在每封电子邮件中添加 +sometext 之类的东西，所以它会与 Wordpress 显示不同。你有其他解决方案吗，可以在这里完成吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T11:56:19.943

如果你有多站点架构，用户可以在网络网站之间共享。一个用户可以分配到多个站点。用户分享能解决你的问题吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-12T20:32:06.907

有一个插件叫allow allow-multiple-accounts。公平警告它已经两年多没有更新了，但它可能会起作用。

# sql - 各种范围的计数和总和

> ID：13800286
> 
> 赞同：0
> 
> 时间：2012-12-10T11:42:51.613
> 
> 标签：sql, oracle

我想获得以下范围（10-20、21-30、31-40）的计数和总和。我怎样才能修改这个查询来得到它？

```
select count (t.aaa), sum (t.bbb)
from xxx t
where t.qqq IN  ('3')
and t.www like 'A'
and t.eee >= TO_DATE('2008/03/20','YYYY/MM/DD')
and t.eee <= TO_DATE('2009/03/21','YYYY/MM/DD')
and t.ttt >= 10 and t.ttt <= 20 
```

输出应如下所示：

```
╔════════╦══════════════╦════════════╗
║ TRANGE ║ COUNT(t.aaa) ║ SUM(t.bbb) ║
╠════════╬══════════════╬════════════╣
║ 10-20  ║          340 ║ 4981620000 ║
║ 21-30  ║          239 ║ 3999425000 ║
║ 31-40  ║          199 ║ 4076525000 ║
╚════════╩══════════════╩════════════╝ 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T15:42:19.073

听起来您可能想按 t.www 和每个范围进行分组。案例可以将每个数字转换为范围值，然后可以在分组依据中使用。

```
SELECT CASE 
   WHEN t.ttt BETWEEN 10 AND 20 THEN '10-20'
   WHEN t.ttt BETWEEN 21 AND 30 THEN '21-30'
   ELSE '31-40' END TRange
   , count(t.aaa), sum(t.bbb)
FROM xxx t
WHERE t.qqq IN  ('3')
AND t.www IN ('A','B','C','D')
AND t.eee >= TO_DATE('2008/03/20','YYYY/MM/DD')
AND t.eee <= TO_DATE('2009/03/21','YYYY/MM/DD')
AND t.ttt BETWEEN 10 AND 40
GROUP BY CASE 
   WHEN t.ttt BETWEEN 10 AND 20 THEN '10-20'
   WHEN t.ttt BETWEEN 21 AND 30 THEN '21-30'
   ELSE '31-40' END; 
```

[SQLFiddle。](http://www.sqlfiddle.com/#!4/dd93c/2)

# git - 将 Git 客户端（如 GitHub for Windows）配置为不要求身份验证

> ID：13800289
> 
> 赞同：21
> 
> 时间：2012-12-10T11:43:18.787
> 
> 标签：git, github, github-for-windows

我已经安装了 GitHub for Windows 和 GitExtensions，并且在我的路径中有多个版本的 git.exe。

![在此处输入图像描述](../Images/444fe9c572ebec3c5c79158d14b0d380.png)

```
C:\Users\Rajat\AppData\Local\GitHub\PortableGit_93e8418133eb85e81a81e5e19c272776524496c6\cmd\git.exe
C:\Users\Rajat\AppData\Local\GitHub\PortableGit_93e8418133eb85e81a81e5e19c272776524496c6\bin\git.exe
E:\cygwin\bin\git.exe
C:\Program Files (x86)\Git\cmd\git.exe
C:\Program Files (x86)\Git\bin\git.exe 
```

现在，当我`git push origin master`使用最后三个`git.exe`s 中的任何一个时，它会询问我的用户名。但是便携式 Git 不要求输入用户名。请参阅以下屏幕截图：

![在此处输入图像描述](../Images/d1a71d84227a2525295a9199ff1e1a36.png)

心形角色只是一个`^C`如此忽略的角色。

在这种情况下如何处理身份验证？最终，我希望最后三个 Git 不要求授权。这怎么可能？

我在 GitHub 的 Git 中发现了两个额外的文件，但我怀疑它们是否重要：

![在此处输入图像描述](../Images/8a2e9321d46af98a083e2518b215b0fe.png)

* * *

## 回答 #1

> 赞同：52
> 
> 时间：2014-04-11T19:44:09.703

如果你使用 GitHub for Windows，你需要做的就是：

1.  确保您至少登录过一次 GUI 应用程序
2.  单击“Git Shell”链接

GitHub 已经在命令行上为你解决了这个问题，包括基于 HTTPS 和 SSH 的远程

* * *

## 回答 #2

> 赞同：45
> 
> 时间：2013-09-04T07:32:41.867

对于 GitHub for Windows 本身，[Paul Betts](https://stackoverflow.com/users/5728/paul-betts)（[GitHub 工作人员](https://github.com/paulcbetts)）温和地提醒大家，**G4W 已经包含了一个凭证助手**（基于**CryptProtect**和我想的[`CryptProtectData`功能](http://msdn.microsoft.com/en-us/library/windows/desktop/aa380261%28v=vs.85%29.aspx)）
请参阅[下面的他的回答](https://stackoverflow.com/a/23021315/6309)。

对于那些不使用 G4W 的人，请继续阅读。

* * *

添加到我[之前的答案](https://stackoverflow.com/a/13801685/6309)（通过控制台/命令行推送到 GitHub 时）：

像`~/.netrc`（在 Unix 上）或`%HOME%/_netrc`（在 Windows 上）这样的文件可以帮助您**避免在每次 git push 到 GitHub 时输入您的凭据**。

您可以在一个`netrc`文件中存储所需的任意数量的凭据。
（对于 GitHub 或其他 repo 托管服务提供商）
但是：

*   你不想存储你的主 GitHub 密码帐户
*   你不希望那些在纯文本文件中。

以下部分解决了这些问题：

* * *

## 在您的 GitHub 帐户上启用[双重身份验证 (2FA)](https://github.com/blog/1614-two-factor-authentication)

（2013 年 9 月 3 日）

**如果可以避免的话，通过应用程序配置 2FA**，始终通过应用程序，*永远不要*通过短信。

原因是，通过该激活过程，您可以访问您的**双因素密钥**，它用于每 30 秒生成一次第二因素身份验证：

![两因素秘密字符串](../Images/2c23a8919b88bef511fbddf6fae1072e.png)

这样您就可以访问**任何 GAuth ( [Google Authenticator](https://code.google.com/p/google-authenticator/) ) 客户端**，输入相同的 2FA 密钥，并查看您通过 SMS 消息获得的*完全相同的代码。*
除此之外，如果您没有电话服务，它仍然可以工作；）

当然，第一个使用的客户端是您的 android 手机或 iphone 上的[GAuth 。](https://support.google.com/accounts/answer/1066447?hl=en)

![Android 上的 GAuth](../Images/cd683465e008beaf244b28634bbd34ad.png)

这意味着您不必等待短信，并且可以将 2FA 保存在手机上。

但是，拥有您的密钥可以让您不局限于手机上的客户端。
您可以访问任何其他客户，例如：

*   [JAuth](http://blog.jcuff.net/2011/09/beautiful-two-factor-desktop-client.html)，一个漂亮的两因素桌面客户端，（[代码在 GitHub 上](https://github.com/mclamp/JAuth)）
*   [html5-google-authenticator](https://github.com/gbraad/html5-google-authenticator)：一个**[GAuth Authenticator 客户端网页](http://gauth.apps.gbraad.nl/)**，您可以在其中看到每 30 秒生成的令牌，就像您在手机上或通过 SMS 看到它们一样。
*   桌面[系统托盘](https://github.com/rdgreen/LCGoogleApps)
*   浏览器扩展（如FireFox[的 gauth-authenticator](https://marketplace.firefox.com/app/gauth-authenticator/)）

对于所有这些客户端（在您的手机上使用 GAuth，或者使用桌面客户​​端或网页），您将需要您的**两因素密钥**。

如果您通过短信激活了 2FA：

*   你不知道你的密钥
*   您不能使用任何其他 GAuth 客户端
*   您只能通过手机接收令牌（如果您有电话服务和/或如果您有手机）

* * *

注意：如果您在 Android 上的 Gauth 客户端中添加了密钥，而没有记住第一个密钥，[则一切都不会丢失](http://bryars.eu/2012/02/how-to-add-an-additional-google-authenticator-device/)。
（但你需要一部有根电话）

```
$ adb shell
# sqlite3 /data/data/com.google.android.apps.authenticator/databases/databases
sqlite> select * from accounts;
1|your@email.address|your2factorkey|0|0
sqlite> .quit
#exit 
```

* * *

不要忘记获取并保存相关的恢复代码（在[`Account Settings`您的 GitHub 帐户部分](https://github.com/settings/admin)）：

![恢复代码](../Images/00e687df5e546bfd587fe51cec0696d8.png)

（另请参阅关于保存这些代码的*位置的最后一节）*

* * *

## 加密您的`_netrc`文件

（参见**[带有 git1.8.3+ 的凭证助手 netrc](https://stackoverflow.com/a/18362082/6309)**：gpg 加密）

您需要在该文件中至少加密这两个凭据：

```
machine github.com
login username
password xxxx
protocol https

machine gist.github.com
login username
password xxxx
protocol https 
```

然后你只保留一个`~/.netrc.gpg`或`%HOME%/_netrc.gpg`

但是，如果您启用上述新的双因素身份验证，“ `xxxx`”将不是您的 GitHub 帐户：请参阅下一节有关“个人访问令牌”的内容。

* * *

## 生成个人访问令牌

如果您已激活 2FA，您将无法使用您的 GitHub 密码进行推送。

**`Anonymous access to user/repo.git denied`**

这是您将看到的（`gpg`部分是因为我使用了[`netrc`凭证助手](https://stackoverflow.com/a/18362082/6309)）：

```
C:\Users\VonC\prog\git\git>git push origin
Using GPG to open %HOME%/_netrc.gpg: [gpg2 --decrypt %HOME%/_netrc.gpg]

You need a passphrase to unlock the secret key for
user: "auser <email@email.com>"
2048-bit RSA key, ID A2EF56, created 2012-09-12 (main key ID DC43D6)

remote: Anonymous access to VonC/git.git denied.                      <=====
fatal: Authentication failed for 'https://VonC@github.com/VonC/git/'  <===== 
```

因此，转到**[`Developer`您的 GitHub 帐户部分](https://github.com/settings/developers)**（子部分[`Personal access tokens`](https://github.com/settings/tokens)），并生成**个人访问令牌**：

![个人代币](../Images/f8d67eee92d7a12e144b0ddfecca2399.png)

该令牌**不需要双重身份验证**：您可以将其用作`_netrc`文件中的密码，并且可以直接推送到 GitHub。

但与您的主 GitHub 帐户密码的区别在于：
**您可以撤销个人访问令牌**（并生成一个新的），同时仍保持主密码不变。

如果您在`~/.netrc.gpg`文件中加密了主 GitHub 密码，则可以将其替换为新的个人令牌：

```
gpg -d %HOME%\_netrc.gpg | sed "s/yourPassord/YourPersonalAccessToken/g" | gpg -e -r auser --yes -o %HOME%\_netrc.gpg 
```

在多行中以提高可读性：

```
gpg -d %HOME%\_netrc.gpg | 
  sed "s/yourPassord/YourPersonalAccessToken/g" | 
  gpg -e -r auser --yes -o %HOME%\_netrc.gpg 
```

借助类似 unix 的[GoW（Windows 上的 Gnu）](https://github.com/bmatzelle/gow/wiki)命令，这甚至在 Windows 上也有效，其中包括`sed`.

* * *

## 保存您的 GitHub 凭据

我推荐像**[lastpass.com这样的在线凭证存储](https://lastpass.com/)**

您需要保存：

*   您的 GitHub 帐户密码
*   您的 2FA 密钥
*   您的 2FA 恢复代码
*   您的个人令牌

![最后通行证](../Images/bd390d01fa19dd797bd09f6761b9f1a2.png)

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2013-01-12T12:29:54.913

[https://help.github.com/articles/set-up-git](https://help.github.com/articles/set-up-git)

密码缓存部分说：

> 如果您不想使用 GitHub for Windows，可以在此处下载适用于您的操作系统的帮助程序：

这样做，任何其他 git.exe 都可以在不询问密码的情况下工作。:)

# c++ - 文件下载问题

> ID：13800293
> 
> 赞同：1
> 
> 时间：2012-12-10T11:43:31.963
> 
> 标签：c++, qt, qnetworkaccessmanager, qwebkit

我有这个使用 webkit 的 QT 脚本。我可以下载文件没问题，但我无法让进度条在文件对话框中移动。我认为在我调用进度对话框之前已经发送了网络回复，因为单击下载链接然后`qDebug() << "Left click - download!";` 将回显输出到控制台会有延迟。如何在网络回复完成并调用 unsupportedContent() 方法之前拦截它？

**编辑：** 我可以把它去掉并使用`reply = manager.get(QNetworkRequest(url));`，但我实际上并不知道它可能是用户点击的任何链接的 URL，没有预定义的 URL？

```
void MainWindow::unsupportedContent(QNetworkReply *reply) {

    qDebug() << "Left click - download!";
    qDebug() << "Bytes to download: " << reply->bytesAvailable();

    QString str = reply->rawHeader("Content-Disposition");

    QString end = str.mid(21);
    end.chop(1);

    qDebug() << "File name: " << end;
    qDebug() << "File type: " << reply->rawHeader("Content-Type");
    qDebug() << "File size (bytes): " << reply->bytesAvailable();
    QString defaultFileName = QFileInfo(end).fileName();
    QString fileName = QFileDialog::getSaveFileName(this, tr("Save File"), defaultFileName);
    if (fileName.isEmpty()) return;

    file = new QFile(fileName);
    if(!file->open(QIODevice::WriteOnly))
    {
        QMessageBox::information(this, "Downloader",
            tr("Unable to save the file %1: %2.")
            .arg(fileName).arg(file->errorString()));
        delete file;
        file = NULL;
        return;
    }

    downloadRequestAborted = false;

    connect(reply, SIGNAL(finished()), this, SLOT(downloadFinished()));
        connect(reply, SIGNAL(readyRead()), this, SLOT(downloadReadyRead()));
        connect(reply, SIGNAL(downloadProgress(qint64,qint64)), this, SLOT(downloadProgress(qint64,qint64)));
        connect(progressDialog, SIGNAL(canceled()), this, SLOT(cancelDownload()));
        progressDialog->setLabelText(tr("Downloading %1...").arg(fileName));
        //downloadButton->setEnabled(false);
        progressDialog->exec();

    //QFile file(fileName);
    //file.open( QIODevice::WriteOnly );
    //file.write(reply->read(reply->bytesAvailable()));
    //file.close();
}

void MainWindow::downloadProgress(qint64 bytesReceived, qint64 bytesTotal)
{
    qDebug() << bytesReceived << bytesTotal;
    if(downloadRequestAborted)
        return;
    progressDialog->setMaximum(bytesTotal);
    progressDialog->setValue(bytesReceived);
}

void MainWindow::downloadReadyRead()
{
    if(file)
        file->write(reply->read(reply->bytesAvailable()));
}

void MainWindow::downloadFinished()
{
    qDebug() << "Download finished!";
    if(downloadRequestAborted)
    {
        if(file)
        {
            file->close();
            file->remove();
            delete file;
            file = NULL;
        }
        reply->deleteLater();
        progressDialog->hide();
        //downloadButton->setEnabled(true);
        return;
    }

    downloadReadyRead();
    progressDialog->hide();
    //downloadButton->setEnabled(true);
    file->flush();
    file->close();

    if(reply->error())
    {
        //Download failed
        QMessageBox::information(this, "Download failed", tr("Failed: %1").arg(reply->errorString()));
    }

    reply->deleteLater();
    reply = NULL;
    delete file;
    file = NULL;
}

void MainWindow::cancelDownload()
{
    downloadRequestAborted = true;
    reply->abort();
    progressDialog->hide();
    //downloadButton->setEnabled(true);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T16:53:13.343

上面的方法一直有效，问题是它接收的字节太小了，你根本看不出它已经下载了，一旦我尝试下载更大的文件，正在下载的字节就会充分显示:)

这是我最终得到的可以接收请求并将其保存到磁盘的方法。

```
void MainWindow::unsupportedContent(QNetworkReply *reply) {

    QString str = reply->rawHeader("Content-Disposition");

    QString end = str.mid(21);
    end.chop(1);

    QString defaultFileName = QFileInfo(end).fileName();
    QString fileName = QFileDialog::getSaveFileName(this, tr("Save File"), defaultFileName);
    if (fileName.isEmpty()) return;

    file = new QFile(fileName);
    if(!file->open(QIODevice::WriteOnly))
    {
        QMessageBox::information(this, "Downloader",
            tr("Unable to save the file %1: %2.")
            .arg(fileName).arg(file->errorString()));
        delete file;
        file = NULL;
        return;
    }

    downloadRequestAborted = false;
    if(!reply->isFinished()){
    connect(reply, SIGNAL(downloadProgress(qint64, qint64)), SLOT(downloadProgress(qint64, qint64)));

    connect(progressDialog, SIGNAL(canceled()), SLOT(cancelDownload()));
    progressDialog->setLabelText(tr("Downloading %1...").arg(fileName));
    progressDialog->exec();
    //return;
    }

    if(downloadRequestAborted)
    {
        if(file)
        {
            file->close();
            file->remove();
            delete file;
            file = NULL;
        }
        reply->abort();
        reply->deleteLater();
        progressDialog->hide();
        return;
    }

    file->write(reply->read(reply->bytesAvailable()));
    file->flush();
    file->close();
    file = NULL;

    if(file == NULL){
        isDownload = true;
        fileURL = fileName;
    systray->showMessage("CytoViewer v1.0", "Download finished - Click to open", QSystemTrayIcon::NoIcon, 10000);
    }
} 
```

# jquery - 菜单下拉菜单在连续点击时不起作用

> ID：13800297
> 
> 赞同：1
> 
> 时间：2012-12-10T11:43:44.967
> 
> 标签：jquery, jquery-ui

```
function toggleMenu() {
    var mwidget = jQuery("#login_menu").menu("widget");
    var visible = mwidget.is(":visible");
    alert(visible);

    mwidget.position({
        my:'top',
        at:'bottom',
        of:$(".action")
    });

    $( "#login_menu" ).menu("refresh");
    $('#login_menu').menu().toggle();

    var visible = mwidget.is(":visible");
    alert(visible);

    return false;
}

jQuery(document).ready(function() {
    jQuery("#login_menu").menu().hide();

    jQuery(".action").mousedown(function() {
        toggleMenu();
    });
}); 
```

我正在尝试`menu()`从 jQueryUI 显示。出现的问题如下。

结构：如上面的代码所示，我在元素上附加了一个下拉菜单，`.action`菜单本身命名为`#login_menu`.

期望的行为：当我单击`mousedown`按钮上的（事件）时`.action`，菜单应该出现，然后在下次单击时菜单应该消失。

问题：当我单击第一次和第二次时，它起作用了。但第三次菜单不再出现。谁能告诉我这是为什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T12:38:58.493

您的问题可能是`var mwidget = jQuery("#login_menu").menu("widget")`：每次用户单击操作链接时，都会多次初始化菜单。

假设您的 HTML 如下所示：

```
<a href="#" class="action">Action button</a>

<ul id="login-menu">
    <li><a href="#">Login</a></li>
    <li><a href="#">Register</a></li>
    <li>
        <a href="#">Settings</a>
        <ul>
            <li><a href="#">1</a></li>
            <li><a href="#">2</a></li>
        </ul>
    </li>
</ul>​​​​​​​​​​​​​​​​​​​​​ 
```

连同这个 CSS（这样做比在页面加载后使用 hide() 更好）：

```
​#login-menu {
    display: none;
    width: 200px
}​​​​​​​ 
```

此代码将使其按您希望的方式工作。请注意，我将 mousedown() 与 jQuery 的 click() 交换，并将“返回 false”与 jQuery 的 preventDefault() 交换。我还使用可链接对象方法设置菜单的位置，而不是像您那样通过变量访问它。

```
$(document).ready(function(){

    $("#login-menu")
        .menu()
        .menu("option", "position", { 
            my:'right top',
            at:'right' });

    $(".action").click(function(e) {
        e.preventDefault();
        $('#login-menu')
            .menu("refresh") 
            .toggle();
    });

});​​​ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T11:58:59.020

```
jQuery(document).ready(function() {
function toggleMenu()
{
    var mwidget = jQuery("#login_menu").menu("widget");

    var visible = mwidget.is(":visible");
    alert(visible);

    $('#login_menu').menu().toggle();

    var visible = mwidget.is(":visible");
    alert(visible);

    return false;
};

function posnMenu()
{
var mwidget = jQuery("#login_menu").menu("widget");

    alert("positioning the menu");

    mwidget.position({
        my:'top',
        at:'bottom',
        of:jQuery(".action")
    });

return false;
};

jQuery("#login_menu").menu().hide();

posnMenu();

jQuery(".action").mousedown(function () {
    toggleMenu();
}); 
```

});

刚刚找到解决方案...此代码有效...也许有人仍然可以指出为什么前面的代码不起作用...但是这次唯一的区别是我只定位了一次。所以在每次切换导致问题之前重新定位它......上面提到......这是正常的吗？

# javascript - 当导航到某个输入字段时，如何自动生成新的输入字段？

> ID：13800298
> 
> 赞同：0
> 
> 时间：2012-12-10T11:43:43.610
> 
> 标签：javascript, jquery, html, javascript-events

受[Chrome Postman 扩展](https://chrome.google.com/webstore/detail/postman-rest-client/fdmmgilgnpjigdojojpjoooidkmcomcm)的启发，我想通过在导航到某个字段时自动添加一个新的输入字段来实现一个多字段表单部分，并将焦点放在新字段上。下面的屏幕截图显示了这在 Postman 中是如何工作的；最下面的行包含几个输入，当导航到这些输入时，会导致在其上方添加一个新行，可以输入该行。

![邮差](../Images/2f0c470604217ff756dbab0ac2c7ecf9.png)

如何在 JavaScript/jQuery 中实现这种行为？为了简化问题，我每行只需要一个输入字段。我创建了一个[小提琴](http://jsfiddle.net/aknuds1/zRrAh/)，它应该作为解决方案的起点。

示例 HTML：

```
<div id="last-row">
  <input name="multifield" placeholder="Value"></input>
</div> 
```

​</p>

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-10T13:53:35.803

看看我会怎么做：http: [//jsfiddle.net/jCMc8/8/](http://jsfiddle.net/jCMc8/8/)

html:

```
<section>
    <div id="initRow">
        <input name="multifield" placeholder="Value">
    </div>
</section>​ 
```

javascript:

```
function addRow(section, initRow) {
    var newRow = initRow.clone().removeAttr('id').addClass('new').insertBefore(initRow),
        deleteRow = $('<a class="rowDelete"><img src="http://i.imgur.com/ZSoHl.png"></a>');

    newRow
        .append(deleteRow)
        .on('click', 'a.rowDelete', function() {
            removeRow(newRow);
        })
        .slideDown(300, function() {
            $(this)
                .find('input').focus();
        })
}

function removeRow(newRow) {
    newRow
        .slideUp(200, function() {
            $(this)
                .next('div:not(#initRow)')
                    .find('input').focus()
                    .end()
                .end()
                .remove();
        });
}

$(function () {
    var initRow = $('#initRow'),
        section = initRow.parent('section');

    initRow.on('focus', 'input', function() {
        addRow(section, initRow);
    });
}); 
```

​ ​</p>

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-10T13:42:30.133

我就是这样做的。

**HTML：**

```
<table>
    <tbody>
        <tr class="item">
            <td><input name="multifield" placeholder="Value" /></td>
            <td><i class="icon delete"></i></td>
        </tr>

        <tr class="item inactive">
            <td><input name="multifield" placeholder="Value" /></td>
            <td><i class="icon delete"></i></td>
        </tr>
    </tbody>
</table> 
```

**JavaScript：**

```
$("table")
    .on("click focus", ".item.inactive", function(e) {
        var curRow = $(this);
        curRow.clone().appendTo("table tbody");
        curRow.removeClass("inactive").find("input:first").focus();
    })
    .on("click", ".icon.delete", function(e) {
        $(this).closest("tr").remove();
    }); 
```

请参阅[jsFiddle 上的测试用例](http://jsfiddle.net/mekwall/Y8Vh9/)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-10T11:43:43.610

我提出了一个迄今为止似乎可行的解决方案，但我有兴趣听取其他人关于它是否是一个好的解决方案。我所做的是捕捉最后一个输入字段的焦点事件，添加一个新行并将焦点放在该行中的输入字段上。请参阅[此小提琴](http://jsfiddle.net/aknuds1/VeP8e/)以获取工作代码。

HTML：

```
<div id="last-row">
    <input name="multifield" placeholder="Value">
</div> 
```

JavaScript：

```
var lastRow = $('#last-row');
var lastInput = lastRow.find('input');

function addRow() {
    var newRow = $('<div><input name="multifield" placeholder="Value"><a class="row-delete"><img src="http://i.imgur.com/ZSoHl.png" /></a></div>');
    var newInput = newRow.find('input');
    lastRow.before(newRow);
    newInput.focus();

    var newDelete = newRow.find('a');
    newDelete.click(function() {
        newRow.remove();
    });
}

lastInput.focus(function() {
    addRow();
}); 
```

# push - Xtify 缺少 api 密钥

> ID：13800302
> 
> 赞同：0
> 
> 时间：2012-12-10T11:44:00.180
> 
> 标签：push, api-key, xtify

[我正在尝试使用来自https://github.com/xtifyTools/xtifyTools/tree/master/PHPScripts](https://github.com/xtifyTools/xtifyTools/tree/master/PHPScripts)的示例代码从 php 服务器发送推送

我输入了“ADD_YOUR_APIKEY_HERE”Google API 密钥和“ADD_YOUR_APPKEY_HERE”来自 xtify 的应用程序密钥，消息是：

{"apiKey":"AIza....","appKey":"71....","sendAll":true,"content":{"subject":"prueba desde servidor","message": "mensaje, mensaje!!","action":{"type":"DEFAULT","data":"","label":""}}}

但我收到错误缺少 API 密钥。问题出在哪里？

我从 xtify 控制台发送推送并收到它，但是尽管应用程序正在开发中，但设备并未出现在测试实施中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T01:50:12.797

您在示例中的 API 密钥片段不正确。使用该类时，请确保设置您在 xtify 控制台中创建的 API 密钥：[https ://console.xtify.com/api-keys-manager](https://console.xtify.com/api-keys-manager)

# asp.net - 有一个主数据表类

> ID：13800303
> 
> 赞同：0
> 
> 时间：2012-12-10T11:44:08.467
> 
> 标签：asp.net, datatable

我正在尝试创建一个数据表，我可以在我的 Web 应用程序中与所有 aspx.cs 一起使用它，而不是我当前在每个页面的页面 loadf 上创建一个新表的方法。

有什么办法我可以做到这一点。我提出了一个概念，即拥有一个 MakeTable.cs 类，该类将创建一个表，然后所有 aspx.cs 文件调用该类并将数据行添加到该表中并保存。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T11:46:04.550

您可以在母版页上加载数据表并存储在会话中

# php - 如何将现有项目添加到 git 裸存储库？

> ID：13800306
> 
> 赞同：1
> 
> 时间：2012-12-10T11:44:34.970
> 
> 标签：php, eclipse, git, deployment, continuous-deployment

我正在尝试设置 git 以进行自动部署。这就是我在做什么..

1.  我在托管在 xyz.com 上的 repos 服务器上创建了一个空的裸存储库。
2.  然后在使用 EGit 的 Eclipse 中，我克隆了新创建的裸存储库。
3.  在我的本地机器上，我有一个 php 项目。
4.  现在我想创建 3 个分支开发、登台、生产，并想将我的项目添加到开发分支。

也许我做错了什么或错过了一些设置。任何人都可以指导我进行 git 设置吗？

所有帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T12:03:59.887

要创建 3 个分支，您可以从 git 命令行执行以下操作（使用您喜欢的任何名称）：

```
git checkout -b prod
git checkout -b stage
git checkout -b dev 
```

要将您的项目添加到 dev 分支，请将您的项目文件复制到文件系统上的 git 工作目录中 - 这将是包含“.git”目录的目录（即不是“.git”目录本身）。

然后从命令行运行：

```
git status 
```

它应该为您提供您复制的文件的列表 - 它们将位于标题“未跟踪的文件：”下。

现在运行以下命令将它们添加到 dev 分支（用适当的提交消息替换“MyCommitMessage”）：

```
git add .
git commit -m "MyCommitMessage" 
```

此时您可以使用

```
git push --all 
```

将远程裸存储库与本地存储库同步。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T11:59:44.900

由于您已从托管存储库克隆，因此您应该配置一个名为 'origin' 的 git 'remote'，它指的是您的托管存储库。

当您在本地分支（例如 master）上工作和提交时，您可以使用 `git push origin :' 将其推送到另一个存储库上的分支：

```
git push origin master:development 
```

这假设您有一个可用的 git 命令行客户端。你应该可以用你的图形客户端做同样的事情，主要概念是你将一个具有特定名称的分支推送到另一端具有特定名称的分支。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-10T12:08:35.493

我不确定你对 git 命令行有多舒服，但因为这是我使用它的方式，所以它是这样的：

1.  而不是克隆你的远程仓库，去你的代码文件夹并创建一个新的本地仓库

    `git init`

2.  向您的本地主分支提交一些内容以正确初始化它

    `echo "first commit" > README.txt`
    `git add README.txt`
    `git commit -m "first commit"`

3.  现在你可以创建你的三个分支

    `git branch development`
    `git branch staging`
    `git branch production`

4.  更改到开发分支，并添加所有代码

    `git checkout development`
    `git add .`
    `git commit -m "code commit"`

5.  最后，添加您的远程存储库并推送您的分支

    `git remote add origin <url_to_your_remote_repo>`
    `git push -u origin --all`

# sharepoint - Microsoft Dynamics 2011 SharePoint 2011 集成模拟

> ID：13800307
> 
> 赞同：1
> 
> 时间：2012-12-10T11:44:37.297
> 
> 标签：sharepoint, sharepoint-2010, dynamics-crm, microsoft-dynamics

在 CRM 2011 中集成 SP 2010 时，CRM`Listwebpart`使用安装`WebPart`.

这意味着与通过 上传的文档相关的每个`modified by`或属性都带有.`created by``WebPart``system account`

我们如何在 SharePoint 中将操作模拟为特定的 CRM 用户？

我在网上找不到任何关于它的信息。

# redis - 使用 Redis MQ 的 CQRS

> ID：13800311
> 
> 赞同：5
> 
> 时间：2012-12-10T11:44:55.643
> 
> 标签：redis, nservicebus, servicestack, cqrs

在过去的 9 个月里，我一直在从事 CQRS 项目（我的第一个项目），这是一个沉重的学习曲线。我目前在我的写入模型中使用 JOliver 出色的 EventStore，并在我的读取模型中使用 PostGresSql。

我的读数据库和写数据库都在同一台机器上，这意味着当对写数据库进行更改时，在同一个同步调用中对读模型进行更改。

当我学习 CQRS 时，我觉得这是最好的方法，因为我没有使用过 MassTransit、NServiceBus 等消息队列/服务总线框架的经验。

现在，我的大部分架构都已到位，可以引入消息队列框架。

今天，我遇到了 Redis MQ，它是 ServiceStack 的一部分，因为我们已经将 ServiceStack 用于基于 Rest 的 HTTP 客户端，这似乎是正确的方法。

我的问题更多是关于了解我需要知道什么（或者如果我有任何误解）来实现 Redis MQ 以及 Redis MQ 是否是正确的选择？

现在据我了解，我将使用 Redis MQ 作为写入和读取数据库之间的持久队列。一旦我的事件存储记录了我的域中发生的事情，它就会发布到 Redis MQ。侦听事件/消息的服务将从 Redis MQ 接收事件/消息，一旦它处理了它（即更新或写入读取模型），通知/响应将返回到事件存储以告诉事件存储消息已被侦听器/订阅者接收并处理。

这听起来正确吗？

Redis MQ 架构也能给我 NSB、RavenDB、MassTransit 等提供的一切吗？

此外，我将部署到 Windows 2008 和 2003 服务器。Redis 对于这些操作系统是否稳定？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-20T15:23:27.947

我认为 Redis 中消息队列的 ServiceStack 实现更适合作业队列场景——它将消息推送到 Redis 列表的末尾，然后使用 Redis pub-sub 通知监听订阅者有一条消息要从队列。任何消费者都会竞争消息。

对于事件溯源，您可能对 RabbitMQ 提供的一种扇出或基于主题的消息拓扑更感兴趣，但这并不妨碍您自己使用 Redis 数据结构构建这类东西。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-24T21:59:55.060

你可能对我在 GitHub 上的一个小项目感兴趣，它是一个使用 Redis 的 NServiceBus 的队列和持久性实现。[https://github.com/mackie1001/NServicebus.Redis](https://github.com/mackie1001/NServicebus.Redis)

我不会称它为生产就绪，我想将它移植到 NSB 4 并进行一些彻底的测试，但它的实质已经完成。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-10T17:57:11.903

> 现在据我了解，我将使用 Redis MQ 作为写入和读取数据库之间的持久队列。

是的，这是正确的。

> 一旦我的事件存储记录了我的域中发生的事情，它就会发布到 Redis MQ。

是的，这可以通过多种方式完成。它可以作为持续到事件存储的事务的一部分发生，或者您可以有一个带外进程，该进程不断地从事件存储发布事件。

> 通知/响应返回到事件存储，告诉事件存储消息已被侦听器/订阅者接收和处理。

返回给事件发布者的响应通常被省略。这真正将发布者与订阅者分离。您假设一旦消息发布，所有感兴趣的订阅者都会处理它。如果发生了什么事，应该记录一个错误。

> Redis MQ 架构也能给我 NSB、RavenDB、MassTransit 等提供的一切吗？

我没有运行 Redis MQ 的经验，但我知道 Redis 支持 pub/sub，这是 NSB 和 MassTransit 的价值主张之一（而不是说准系统 MSMQ）。MT 和 NSB 在 pub/sub 之外提供的是[sagas](http://kellabyte.com/2012/05/30/clarifying-the-saga-pattern/)，而且 Redis MQ 似乎至少不支持那些开箱即用的东西。你可能永远不需要 sagas，所以这不应该自动成为一种威慑。RavenDB 不是消息队列，因此不适用于此处。

> 此外，我将部署到 Windows 2008 和 2003 服务器。Redis 对于这些操作系统是否稳定？

我在 2008 R2 上运行过 Redis，它一直很稳定，所以我认为 Redis MQ 也会很稳定。

# android - 手机锁定时AlarmManager不工作

> ID：13800313
> 
> 赞同：2
> 
> 时间：2012-12-10T11:45:00.603
> 
> 标签：android

`AlarmManager`例如，当手机被锁定时，我的广播接收器不会启动。我搜索并尝试了许多解决方案，但没有一个有效：

```
 AlarmManager mgr = (AlarmManager)context.getSystemService(Context.ALARM_SERVICE);
      Intent i = new Intent(context, OnAlarmReceiver.class);
      PendingIntent pi=PendingIntent.getBroadcast(context, 0, i, 0);

      mgr.setRepeating(AlarmManager.ELAPSED_REALTIME_WAKEUP,
                        SystemClock.elapsedRealtime()+60000,
                        PERIOD,
                        pi); 
```

但从`OnAlarmReceiver`未被解雇！

我也尝试`WakeLock`：

```
@Override
    public void onReceive(Context context, Intent intent) {
PowerManager pm = (PowerManager) context.getSystemService(Context.POWER_SERVICE);
        PowerManager.WakeLock wl = pm.newWakeLock(PowerManager.PARTIAL_WAKE_LOCK, "");
        wl.acquire();
// code
wl.release();
 } 
```

但也不工作。为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T12:09:27.393

> 但 OnAlarmReceiver 永远不会被解雇！

它应该是。[这是一个示例项目](https://github.com/commonsguy/cw-omnibus/tree/master/AlarmManager/Wakeful)，显示了类似的用法，`AlarmManager`当屏幕关闭并且手机被锁定时，它工作得非常好。在我的示例中，“真正的工作”是由 a 完成的`WakefulIntentService`，通过 a `BroadcastReceiver`，所以`BroadcastReceiver`绝对得到了控制。

# mysql - 如何“推进”具有给定值的记录？

> ID：13800333
> 
> 赞同：1
> 
> 时间：2012-12-10T11:46:19.107
> 
> 标签：mysql, ruby-on-rails, ruby, ruby-on-rails-3

我正在使用 Ruby on Rails 3.2.9 和 MySQL。我有一个`Article`带有`user_id`属性的模型（此属性代表外键 -`id`用于关联作者用户），我想检索订购那些“为”给定作者的文章。也就是说，鉴于我有以下记录：

```
<#Article id: 1, title: "Title 1", user_id: 1>
<#Article id: 2, title: "Title 2", user_id: 2>
<#Article id: 3, title: "Title 3", user_id: 1>
<#Article id: 4, title: "Title 4", user_id: 3>
<#Article id: 5, title: "Title 5", user_id: 1>
...
<#Article id: N, title: "Title N", user_id: M> 
```

`id` `1`当我查找使用( )为作者“为”订购的文章时`user_id = 1`，返回的文章应按如下顺序排列：

```
<#Article id: 1, title: "Title 1", user_id: 1>
<#Article id: 3, title: "Title 3", user_id: 1>
<#Article id: 5, title: "Title 5", user_id: 1>
<#Article id: 2, title: "Title 2", user_id: 2>
<#Article id: 4, title: "Title 4", user_id: 3>
...
<#Article id: N, title: "Title N", user_id: M> 
```

换句话说，我希望检索*所有*文章，但按此“优先级”*排序：**给定作者创建的文章首先返回，然后是所有其他文章*（也就是说，我想“推进”由给定的作者）。

我怎样才能做到这一点？

* * *

*注意*：我正在寻找一个 Ruby on Rails 实现，可能是通过该[`order`](http://guides.rubyonrails.org/active_record_querying.html#ordering)方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T11:49:40.360

您的示例并不那么清楚，因为您正在搜索 user_id 1 并且 user_id 的正常排序无论如何都会将它们放在首位。我相信你的意思是做这样的事情：

```
SELECT id, title, user_id
FROM myTable
ORDER BY CASE WHEN user_id = @search_id THEN 1 ELSE 2 END, user_id 
```

在你上面的例子中，`@search_id`应该是 1。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T11:53:05.117

尝试：

```
Article.where(user_id: 1).order("user_id ASC").order("id ASC") 
```

或这个：

```
Article.where(user_id: 1).order("user_id ASC, id ASC") 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-10T14:51:35.650

Rails 中的查询可能是这样的：

```
Article.order(Article.send(:sanitize_sql, ["IF(user_id = ?, 1, 2)", params[:user_id]])) 
```

`IF(user_id = ?, 1, 2)`返回 1 或 2 用于订购商品。`sanitize_sql`，一个私有方法，用于清理参数。

如果 params[:user_id] 始终是整数，则查询可以简化为：

```
Article.order("IF(user_id = #{params[:user_id].to_i}, 1, 2)") 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-10T11:48:34.363

尝试这个 ：：

```
Select 
*
from 
myTable
order by 
user_id, id 
```

对于给定的 user_id：

```
Select 
*
from 
myTable
where user_id='?'
order by 
user_id, id 
```

# wso2 - WSO2 ESB 4.5.1 兼容性

> ID：13800334
> 
> 赞同：0
> 
> 时间：2012-12-10T11:46:24.307
> 
> 标签：wso2, wso2esb, wso2dss

我们在中间件上使用 WSO2 ESB 1.5.2、AS 1.5.2 和 DSS 1.5.2。所有这些产品都从共享数据库中获取用户名信息。我们想将我们的 ESB 从 Stratos 1.5.2 升级到 ESB 4.5.1。当我安装新的 ESB 时，它将创建租户 ID 为 -1234 的新用户名。您认为在同一环境中使用这三个不同的产品版本会影响吗？

ps：据我所知，新产品上的超级租户 ID 已从 0 更改为 -1234。因此，它正在数据库上创建新用户名。您有任何理由更改超级租户 ID。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T15:41:06.383

WSO2 Stratos 1.5.2 和 WSO2 Stratos 1.6 (ESB 4.5.1) 不向后兼容。如果要从 1.5.2 迁移到基于 1.6 的平台，则需要进行数据迁移。

从 0 更改为 -1234 的原因是为了避免可能与超级租户和其他租户混淆而做出的设计决定。

# android - 验证字符串并根据结果调用活动

> ID：13800336
> 
> 赞同：0
> 
> 时间：2012-12-10T11:46:41.680
> 
> 标签：android

如果我的 String value(from) 为空，我想调用不同的活动，反之亦然：

```
 String[] from = new String[] { "name" };

    if (from.length >= 1)

    {
        int[] to = new int[] { R.id.countryTextView111};
        conAdapter = new SimpleCursorAdapter(CountryList.this, R.layout.countrylist, null, from, to);
        setListAdapter(conAdapter); // set adapter

    }   
    else 

    {

        Intent intent = new Intent(getApplicationContext(), EmailSettings.class);
        startActivity(intent);

    } 
```

出于某种原因，我的 Condition 无法正常工作，因此需要专家视图。

谢谢，

阿里

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T11:48:46.493

您正在检查**数组的****长度**，它包含一个条目，因此它的长度为**1** 如果您想检查第一个条目的长度，那么

 ****```
String[] from = new String[] { "name" };

if (from[0].length >= 1)

{
    int[] to = new int[] { R.id.countryTextView111};
    conAdapter = new SimpleCursorAdapter(CountryList.this, R.layout.emailsettings, null, from, to);
    setListAdapter(conAdapter); // set adapter

}   
else 

{

    Intent intent = new Intent(getApplicationContext(), EmailSettings.class);
    startActivity(intent);

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T11:59:29.703

```
String[] from = new String[] { "name" };

for(int i=0;i<from.length;i++)
   {
      if(from[i]>="conditon")
       {
         //try code this
       }
   } 
```****

# python - 带有 0.4893-6 个数字的 Python float() 错误

> ID：13800345
> 
> 赞同：0
> 
> 时间：2012-12-10T11:47:13.907
> 
> 标签：python

是否可以将字符串更改为使用没有 E 格式的数字浮动？

我在尝试时遇到错误`float("0.333-5")`。Python 中的浮点数带有`e`or `E`。任何的想法？如何轻松添加E？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T11:51:38.023

只需用 e 前面的减号替换减号

```
s = "0.333-5"
s = s.replace('-','e-')
float(s) 
```

如果你可以有偶数加号，你将不得不做一个双重替换

```
s.replace('-','e-').replace('+','e+') 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T11:59:06.523

使用以下正则表达式：

```
import re
re.sub('(.)([-+]\d)', r'\1e\2', number_string) 
```

哪里`number_string = 0.333-5`。这将适用于负数，也适用于`.5-5`.

# drupal-6 - 使用日期和时间单独的字段对 drupal 6 视图中的内容进行排序

> ID：13800347
> 
> 赞同：0
> 
> 时间：2012-12-10T11:47:18.377
> 
> 标签：drupal-6, drupal-views

我有两个单独的日期和时间字段，我在视图的排序部分添加了这些字段。当我看到结果时，结果与我预期的不同。示例如下。

具有这些关于日期和时间的值的内容我以相同的方式得到这个结果......

```
2012 年 1 月 12 日和时间下午 2:00
2012 年 1 月 12 日和时间下午 3:00
2012 年 1 月 13 日和时间下午 1:00
2012 年 2 月 12 日和时间凌晨 2:00
2012 年 3 月 12 日和时间下午 2:00

```

我想按日期和时间排序，结果应该是

```
2012 年 1 月 12 日和时间下午 1:00
2012 年 1 月 12 日和时间下午 2:00
2012 年 1 月 13 日和时间下午 3:00
2012 年 2 月 12 日和时间凌晨 2:00
2012 年 3 月 12 日和时间下午 2:00

```

请建议我如何在 drupal 视图中处理这种情况。

提前致谢....

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T14:03:54.663

在排序条件部分，添加“节点：发布日期”字段，然后选择升序单选按钮。

您将获得升序结果，或者您可以使用“表格”样式并选择 asc。

# android - 无法在未调用 Looper.prepare()-Alertdialogbox 的线程内创建处理程序

> ID：13800351
> 
> 赞同：0
> 
> 时间：2012-12-10T11:47:32.760
> 
> 标签：android, cordova

> **可能重复：**
> [无法在未调用 Looper.prepare() 的线程内创建处理程序](http://facebook.stackoverflow.com/questions/3875184/cant-create-handler-inside-thread-that-has-not-called-looper-prepare)

我想在线程中调用 alertdialogbox 如下

```
 public class connect implements Runnable
     {
     public void run()  //run method

    {

        AlertDialog.Builder alert = new AlertDialog.Builder(cordovaExample.activity);

        alert.setTitle("Confirm");
        alert.setMessage("Are you sure?");

        alert.setPositiveButton("YES", new DialogInterface.OnClickListener() {

            public void onClick(DialogInterface dialog, int which) {
                // Do nothing but close the dialog

                dialog.dismiss();
            }

        });

        alert.setNegativeButton("NO", new DialogInterface.OnClickListener() {

            public void onClick(DialogInterface dialog, int which) {
                // Do nothing
                dialog.dismiss();
            }
        });

        AlertDialog s = alert.create();
        alert.show();
       }
     } 
```

我从以下活动中调用此线程

```
public class cordovaExample extends DroidGap
{
    Context mcontext;

    public static cordovaExample activity;
private static MediaPlayer  music=null;
    @Override
    public void onCreate(Bundle savedInstanceState)

        {
            super.onCreate(savedInstanceState);

            activity=this;

                             super.init();

                   new Thread(new connect(this)).start();

                     }
                } 
```

但它给出的错误不能在没有调用 Looper.prepare() 的线程内创建处理程序

任何帮助将不胜感激

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T11:50:27.503

在 App UI 线程中写下这一行

```
 alert.show(); 
```

像这样的东西

```
MainActivity.this.runOnUiThread(new Runnable() {

        public void run() {
              alert.show();

        }
    }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T12:01:08.727

你不能在线程运行时在 ui 中进行更改。如果你想这样做，请使用 Handler 或 runOnUiThead 或最好的选择是使用 AsyncTask。

# java - 我是否应该明确地失败 scala 单元测试，其中 java 对应物抛出异常

> ID：13800358
> 
> 赞同：1
> 
> 时间：2012-12-10T11:48:11.030
> 
> 标签：java, unit-testing, scala, junit, junit4

我正在将 java jUnit 测试转换为 scala。由于 scala 不使用已检查的异常，因此此 java 代码：

```
@Test 
public void testException throws Exception = {
    throw new Exception
} 
```

可以在 scala 中重写为：

```
@Test def testException = {
    throw new Exception
} 
```

用 java 编写的测试将在线 throw new Exception 失败，但用 scala 编写的测试将通过，即使它也抛出一个 Exception

我可以将 scala 测试重写为如下所示的内容，因此如果抛出异常，我会通过调用 junits fail 方法显式强制测试失败：

```
@Test def testException = {
    try { 

    } catch {
           case e: Exception => {
                 fail("exception thrown "+e.getMessage());
            }
    }
} 
```

我应该这样写测试吗？换句话说，对于任何抛出异常的 java 测试，我是否应该重写测试的 scala 版本以显式捕获然后无法模仿测试的 java 版本的行为方式？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-10T11:55:24.347

不，你绝对不应该。它唯一能做的就是让你的测试更加冗长，并且有更糟糕的堆栈跟踪和断言消息。

> 用 java 编写的测试将在线 throw new Exception 失败，但用 scala 编写的测试将通过，即使它也抛出一个 Exception

不，任何抛出异常的 JUnit 测试都会失败，不管它是用什么语言编写的。

# hadoop - Hive：创建表和分区依据

> ID：13800360
> 
> 赞同：2
> 
> 时间：2012-12-10T11:48:13.157
> 
> 标签：hadoop, hive

我有一个加载数据的表，如下所示：

```
create table xyzlogTable (dateC string , hours string, minutes string, seconds string, TimeTaken string, Method string, UriQuery string, ProtocolStatus string) row format serde 'org.apache.hadoop.hive.contrib.serde2.RegexSerDe' with serdeproperties( "input.regex" = "(\\S+)\\t(\\d+):(\\d+):(\\d+)\\t(\\S+)\\t(\\S+)\\t(\\S+)\\t(\\S+)", "output.format.string" = "%1$s %2$s %3$s %4$s %5$s %6$s %7$s %8$s") stored as textfile;

load data local inpath '/home/hadoop/hive/xyxlogData/' into table xyxlogTable; 
```

总行数被发现超过 300 万。一些查询工作正常，一些进入无限循环。

在看到该*选择后，按*查询分组需要很长时间，有时甚至不返回结果，决定进行分区。

但是以下两个语句都失败了：

```
create table xyzlogTable (datenonQuery string , hours string, minutes string, seconds string, TimeTaken string, Method string, UriQuery string, ProtocolStatus string) partitioned by (dateC string); 
```

> 失败：元数据错误：AlreadyExistsException（消息：表 xyzlogTable 已存在）失败：执行错误，从 org.apache.hadoop.hive.ql.exec.DDLTask 返回代码 1

```
Alter table xyzlogTable (datenonQuery string , hours string, minutes string, seconds string, TimeTaken string, Method string, UriQuery string, ProtocolStatus string) partitioned by (dateC string); 
```

> 失败：解析错误：第 1:12 行无法识别更改表语句中的输入“xyzlogTable”

任何想法是什么问题！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-10T22:51:51.327

这正是我更喜欢在 Hive 中使用外部表的原因。您创建的表不是外部的（您使用`create table`而不是`create external table`）。对于非外部表，删除表、删除元数据（名称、列名、类型等）和 HDFS 中表的数据。相反，当一个外部表被删除时，只有元数据被删除，HDFS 中的数据仍然存在。

你有几个选择：

1.  如果导入成本很高并且数据已经没有分区。保留此表，但创建一个新表，例如 xyzlogTable_partitioned，它将是此表的分区版本。您可以使用Hive 中的[动态分区](https://cwiki.apache.org/confluence/display/Hive/DynamicPartitions)来填充这个新表。

2.  如果导入成本高但数据已经分区；例如，假设您已经在 HDFS 中的每个分区的单独文件中拥有数据。创建一个新的分区表并有一个bash脚本（或等效的），从未分区表对应的HDFS目录移动（或复制然后删除，如果你保守的话）到新的适当分区对应的目录桌子。

3.  If import is cheap: drop the entire table. Re-create a new partitioned table and re-import. Many times if the import process is not aware of the partitioning schema (in other words, if the import can't directly push data into appropriate partitions), it's a common use case to have an unpartitioned table (like the one you already have) as a staging table and then use a Hive query or dynamic partitioning to populate a new partitioned table which gets used in subsequent queries of the workflow.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T12:06:32.043

您应该首先删除已经创建的表，然后创建分区表。或者更改您的表名。

# silverlight - 在 Silverlight 应用程序中调用 SetBinding() 两次？

> ID：13800366
> 
> 赞同：2
> 
> 时间：2012-12-10T11:48:38.677
> 
> 标签：silverlight, binding

我有一个 Silverlight 4 应用程序，并以编程方式在对象上设置了一些绑定，例如：

```
 Binding bBorder = new Binding();
        bBorder.Source = CellItem;
        bBorder.Mode = BindingMode.OneWay;
        bBorder.Path = new PropertyPath("Border");
        appointmentItem.SetBinding(AppointmentItem.BorderBrushProperty, bBorder); 
```

无论任何最佳实践课程如何，如果这段代码运行两次，我最终会得到一个已注册两次的绑定，还是第一个绑定被正确删除？

谢谢，蒂姆

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-10T11:53:28.110

第一个绑定将被删除，并且只会注册一个绑定。

# c# - XAML 中的映射命名空间不起作用

> ID：13800369
> 
> 赞同：6
> 
> 时间：2012-12-10T11:49:03.467
> 
> 标签：c#, wpf, xaml, wpf-controls, wpfdatagrid

我创建了一个数据网格，它显示从数据库填充的记录表，并且希望在满足特定条件时为数据网格的单元格设置动画。为此，我创建了一个名为**BlinkConverter**的转换器类，它继承了 IValueConverter。

为了将此转换器投入使用，我已将项目命名空间映射到 xaml 编辑器

```
 xmlns:local="clr-namespace:BlinkApplication" 
```

***注意：*** *BlinkApplication 是我的项目的名称*

添加后，我正在尝试创建我的**BlinkConvertor**类的实例，以便与 Windows.Resources 集合绑定为

```
 <Window.Resources>
        <local:BlinkConverter x:key="Blink"></local:BlinkConverter>
        </Window.Resources> 
```

*在这里，我的 Intellisense 在我输入"local:"*后没有检测到 BlinkCoverter 类，即使我尝试输入，我也有一个错误，指出 "The type local:BlinkConverter was not found. 验证您是否缺少程序集引用并且所有已构建引用的程序集。”

即使我在我的 xaml 编辑器中的 xmlns 下添加了整个项目。这里有什么问题？我错过了任何参考吗？

我是否必须将 Converter 类添加为 MainWindow.xaml.cs 类的一部分，或者添加一个名为 Converter 的新类，然后将其映射到 MainWindow.xaml.cs 类？

因为在第一次尝试时，我在第一次尝试时添加了作为 Mainwindow.xaml.cs 的一部分，然后我的 Intellisense 没有检测到，但是当我添加一个单独的类作为 Converter.cs 时，我的 Intellisense 检测到但我不知道映射到我的 Mainwindow.xaml.cs 类的方式:(

转换器.cs

```
 public class Converter : IValueConverter
         {
         public object Convert(object value, Type targetType, object parameter,          CultureInfo culture)
       {
          string cellvalue = value.ToString();
          return cellvalue = ("Pass");
        }
      public object ConvertBack(object value, Type targetType, object parameter, CultureInfo culture)
      {
        return false;
      } 
```

主窗口.xaml.cs

```
 namespace BlinkApplication
   {
       public partial class MainWindow : Window
     {
          SqlConnection cn;
          SqlDataAdapter da;
          DataSet ds;
          public MainWindow()
     {
         InitializeComponent();
        DataContext = this;
        cn = new SqlConnection(@"Data Source=CZC0239ZWZ\SQLEXPRESS; Initial Catalog      =Student; Integrated Security=true");
        cn.Open();
    }

    private void Window_Loaded(object sender, RoutedEventArgs e)
    {
    da = new SqlDataAdapter("select * from dbo.View_StudentResults",cn);
    ds = new DataSet();
    da.Fill(ds);
    dataGrid1.ItemsSource=ds.Tables[0].DefaultView;

    }

  }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-11T10:00:51.093

解决方案是在 BlinkApplication.Converters 命名空间下将单​​独的类作为 myConverter 添加到我的项目后，构建项目并将该类添加到项目中正确命名空间的项目中，以便 xaml 解释器找到它。

然后在 MainWindow.xaml 中，在顶部添加转换器命名空间为

```
 xmlns:local="clr-namespace:BlinkApplication.Converters" 
```

请注意，它与 Converters.cs 文件中声明的命名空间匹配，该文件将“本地”标签与 BlinkApplication.Converters 命名空间相关联。

声明后，我可以在窗口或任何其他控制资源中使用它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T12:04:37.487

确保您的转换器定义为“公共”。

# php - Bootstrap：轮播显示问题内外的相同 ID 模型

> ID：13800373
> 
> 赞同：0
> 
> 时间：2012-12-10T11:49:18.327
> 
> 标签：php, javascript, mysql, twitter-bootstrap

我可以在这里粘贴我所有的代码，但认为它可能无济于事，所以我尝试粘贴重要的东西。我希望我能适当地提出问题，所以请随时指导我。我将解释下面的逻辑并显示什么不起作用。在 Bootstrap 中，我有一个[轮播](http://twitter.github.com/bootstrap/javascript.html#carousel)，其中[模型](http://twitter.github.com/bootstrap/javascript.html#modals)以下列方式动态创建。

一世。开始轮播

```
<div class="hero-unit" style="padding-right:30px; padding-left:30px; padding-top:30px; padding-bottom: 50px;">
  <div id="myCarousel" class="carousel slide">
    <div class="carousel-inner">
    </div>
  </div>
</div> 
```

ii. 动态创建指向模型的 href 链接

```
 <div class="hero-unit" style="padding-right:30px; padding-left:30px; padding-top:30px; padding-bottom: 50px;">
     <div id="myCarousel" class="carousel slide">
      <div class="carousel-inner">

       <?php $carouselClass = "active item";
       while($r = mysql_fetch_assoc($events)) 
       { 
         ?>
          <div class="<?php echo $carouselClass; ?>">
            <?php $carouselClass = "item"; ?>
            // Here, we create model dynamically
            <a role="button" data-toggle="modal" href="#myModel<?php echo $r['_id']; ?>" ><?php echo $r['_name'] ; ?></a>
            </div>
          </div>
        </div> 
```

iii. 在 PHP 中使用 partials 来改进 Don't Repeat Yourself (DRY) 操作

```
 <div class="hero-unit" style="padding-right:30px; padding-left:30px; padding-top:30px; padding-bottom: 50px;">
    <div id="myCarousel" class="carousel slide">
      <div class="carousel-inner">
       <?php $carouselClass = "active item";
       while($r = mysql_fetch_assoc($events)) 
       { 
         ?>
          <div class="<?php echo $carouselClass; ?>">

            <?php $carouselClass = "item"; ?>
            // Here, we create model dynamically
            <a role="button" data-toggle="modal" href="#myModel<?php echo $r['_id']; ?>" ><?php echo $r['_name'] ; ?></a>

            <?php require '_actualModel.php'; ?>
            </div>
          </div>
        </div> 
```

iv. _actualModel.php

```
 <div id="myModel<?php echo $r['_id']; ?>" class="modal hide fade" tabindex="-1" aria-labelledby="myModalLabel" aria-hidden="true">
    <div class="modal-header center">
      <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
     </div>
     <div class="modal-body">
       <?php echo $r['_body'];  
     </div>
     <div class="modal-footer">
       <button class="btn" data-dismiss="modal" aria-hidden="true">Close</button>
     </div>    </div> 
```

现在，这非常有效，因为轮播会循环播放内容并弹出模型。但是，假设在同一页面上，我想制作一个具有相同 id 但在轮播之外的模型。我会这样做。

```
// Here, we create model which would have the same id as one of them in the carousel
<a role="button" data-toggle="modal" href="#myModel<?php echo $r['_id']; ?>" ><?php echo $r['_name'] ; ?></a>
 <?php require '_actualModel.php'; ?> 
```

问题是在轮播外创建的模型（具有相同的 id）只有在轮播内的模型（具有相同的 id）在该时间点处于活动状态时才会弹出；也就是说，它正在显示中。如果它未激活或未在显示中，则背景将变灰，但弹出模型将不会出现。！[这是在轮播外单击具有相同 id 的模型而具有内部相同的 ID 未显示 - 尚无法上传图片 :) ][3]

*我可以说我让模型具有相同 ID 的原因是因为它们具有完全相同的信息，因此我正在尝试实施 DRY 实践。对缩进感到抱歉。*

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T12:54:12.463

想出了一个可能的解决方案。就像@Carsten 所说，拥有相同 ID 的元素是不对的。但是对于那些徘徊在同一问题上的人，这是一个解决方案；那是试图从旋转木马的内部和外部制作动态模态，如果使用上述方法（有问题），某些模态可能具有相同的 id。

诀窍是给轮播模式一个唯一的标识符，在轮播之外也是如此。

因此，在开始轮播之前，我可以分配：

```
$identifier = "carousel"; 
```

然后我将 $identifier 附加到href。那是：

```
<a role="button" data-toggle="modal" href="#myModel<?php echo $identifier . $r['_id']; ?>" ><?php echo $r['_name'] ; ?></a> 
```

当然模态会有

```
<div id="myModel<?php echo $identifier . $r['_id']; ?>" class="modal hide fade" tabindex="-1" aria-labelledby="myModalLabel" aria-hidden="true"> 
```

因此，要在外部动态创建类似的模态，我会制作 $identifier = "outside" 并使用相同的方法来创建 href 和模态。

希望这可以帮助某人。

# excel - VBS 将 Excel VBA 宏应用于当前目录中的所有文件

> ID：13800377
> 
> 赞同：0
> 
> 时间：2012-12-10T11:49:35.917
> 
> 标签：excel, vba, vbscript

我尝试将保存在 personl.xls 中的 VBA 宏应用于给定目录中的所有文件，但我在第 29 行遇到了一个错误。恐怕我把事情搞混了：

```
Option Explicit
On Error Resume Next

Dim xlApp
Dim xlBook

Dim No_Of_Files
Dim i
Dim File_Path

Set xlApp = CreateObject("Excel.Application")
xlApp.DisplayAlerts = True

File_Path = "C:\Dokumente und Einstellungen\kcichini\Eigene Dateien\Stuff\Test\"

With xlApp.FileSearch
  .NewSearch
  .LookIn = File_Path
  .Filename = "*.xls"
  .SearchSubFolders = False
  .Execute

  No_Of_Files = .FoundFiles.Count

  For i = 1 To No_Of_Files
    Set xlBook = xlApp.Workbooks.Open(.FoundFiles(i), 0, False) 
    xlApp.Run "'C:\Dokumente und Einstellungen\kcichini\Anwendungsdaten\Microsoft\Excel\XLSTART\PERSONL.XLS'!SASXLSFormat" 
    xlApp.ActiveWorkbook.Close
  Next i

End With

xlApp.Quit
Set xlBook = Nothing
Set xlApp = Nothing 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T12:45:01.277

我显然走错了路。但这似乎工作正常：

```
Option Explicit
On Error Resume Next

Dim xlApp
Dim xlBook
Dim sPath

Dim fso
Dim ObjFolder
Dim ObjFiles
Dim ObjFile

'make an object with the excel application 
Set xlApp = CreateObject("Excel.Application")
xlApp.DisplayAlerts = True

'Creating File System Object
Set fso = CreateObject("Scripting.FileSystemObject")

'Getting the Folder Object
Set ObjFolder = fso.GetFolder("C:\Dokumente und Einstellungen\kcichini\Eigene Dateien\Stuff\Test")

'Getting the list of Files
Set ObjFiles = ObjFolder.Files

'Running the macro on each file 
For Each ObjFile In ObjFiles
    'MsgBox (ObjFolder & "\" & ObjFile.Name)
    Set xlBook = xlApp.Workbooks.Open(ObjFolder & "\" & ObjFile.Name, 0, False) 
    xlApp.Run "'C:\Dokumente und Einstellungen\kcichini\Anwendungsdaten\Microsoft\Excel\XLSTART\PERSONL.XLS'!SASXLSFormat" 
    xlApp.xlBook.Close
Next

xlApp.Quit
Set xlBook = Nothing
Set xlApp = Nothing 
```

# html - 流体布局中的页脚实现

> ID：13800378
> 
> 赞同：0
> 
> 时间：2012-12-10T11:49:36.237
> 
> 标签：html, css, layout, fluid-layout

我在为我的网站实施页脚时遇到问题。正如您在下面的代码中看到的那样，
我在其中列出了两个`<ul>`列表。`inner_footer`但是当我放大时，`<ul>`div 元素中的列表是不可见的。这似乎是一个浮动问题，但我无法弄清楚它有什么问题。

**HTML：**

```
<div class="grid_16">
    <div class="footer">
        <div class="inner_footer">
            <ul>
                <li>Some content</li>
            </ul>
        <div>
            <ul>
                <li><a>Link 1</a></li>
                <li><a>Link 2</a></li>
                <li><a>Link 3</a></li>
                <li><a>Link 4</a></li>
                <li><a>Link 5</a></li>
                <li>Copyrights</li> 
            </ul>   
        </div>
    </div>
</div> 
```

**CSS：**

```
.footer {
    height:105px;
    position:relative;
    top:0;
    width:100%;
  }
.inner_footer {
    background:url(../images/layout_img/nav.jpg) 0 center repeat-x;
    font-size:12px;
    border-radius:4px;
    position:relative;
    width:inherit;
    height:31px;
    margin:0 auto;
}
.inner_footer ul {
    margin:0;
}
.inner_footer ul li {
    color:#FFF;
    font-family:calibri;
    font-size:13px;
    list-style-type:none;
    line-height:31px;
    text-decoration:none;
    padding:0 10px;
}
.inner_footer ul li a img {
    margin:2px 0 0 20px;
}
.inner_footer ul li a {
    color:#FFF;
    float:left;
    font-family:calibri;
    font-size:13px;
    list-style-type:none;
    line-height:31px;
    text-decoration:none;
    padding:0 10px;
}
.inner_footer div {
    float:right;
}
.inner_footer div ul li a {
    color:#FFF;
    float:left;
    font-family:calibri;
    font-size:13px;
    list-style-type:none;
    line-height:31px;
    text-decoration:none;
    padding:0 10px;
}
.inner_footer div ul li {
    color:#FFF;
    float:left;
    font-family:calibri;
    font-size:13px;
    list-style-type:none;
    line-height:31px;
    text-decoration:none;
    padding:0 10px;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T00:40:23.990

我相信问题出在您的html代码中。您忘记关闭 div 元素。代码应变为：

```
<div class="grid_16">
    <div class="footer">
        <div class="inner_footer">
            <ul>
                <li>Some content</li>
            </ul>
        </div>
        <div>
            <ul>
                <li><a>Link 1</a></li>
                <li><a>Link 2</a></li>
                <li><a>Link 3</a></li>
                <li><a>Link 4</a></li>
                <li><a>Link 5</a></li>
                <li>Copyrights</li> 
            </ul>   
        </div>
    </div>
</div> 
```

# sql - SQL 错误：ORA-00923：FROM 关键字未在预期位置找到

> ID：13800382
> 
> 赞同：0
> 
> 时间：2012-12-10T11:49:43.880
> 
> 标签：sql, oracle

我之前尝试过使用 LISTAGG 函数，但是由于输出可能会很长，甚至可能超过 4000 个字节。我一直收到字符串连接结果太长的错误。[我关注了 Tim 引用的关于返回 CLOB 的字符串聚合函数](http://asktom.oracle.com/pls/apex/f?p=100:11:0%3a%3a%3a%3aP11_QUESTION_ID:2196162600402#29842804516386)的实现的 AskTom 页面。

```
 CREATE TABLE FINAL_LOG AS
           SELECT SESSION_DT, C_IP, CS_USER_AGENT,
           concat_all_ot(WEB_LINK, ' ')
           WITHIN GROUP(ORDER BY C_IP, CS_USER_AGENT) AS "WEBLINKS"
               FROM weblog_views
               GROUP BY C_IP, CS_USER_AGENT, SESSION_DT
               ORDER BY SESSION_DT 
```

为此，我收到以下错误，

SQL 错误：ORA-00923：FROM 关键字未在预期位置找到

谁能告诉我我哪里出了问题？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-10T11:57:08.600

如果您使用的是用户定义的聚合函数，则可能需要省略该`WITHIN GROUP`子句。`ORDER BY`在语句中指定子句也没有意义，`CREATE TABLE`因为堆组织表中的数据本质上是无序的。此外，如果您使用该链接中的代码，则聚合函数的名称为`concat_all`. `concat_all_ot`是对象类型。所以你想要类似的东西

```
CREATE TABLE FINAL_LOG  AS   
  SELECT SESSION_DT, 
         C_IP, 
         CS_USER_AGENT,
         concat_all( concat_expr(WEB_LINK, ' ') ) AS "WEBLINKS"
    FROM weblog_views    
   GROUP BY C_IP, 
            CS_USER_AGENT, 
            SESSION_DT 
```

# php - 如何在css中使用php路径？

> ID：13800384
> 
> 赞同：0
> 
> 时间：2012-12-10T11:49:45.620
> 
> 标签：php, css

我试图通过 css 中的 php 变量为图像提供路径，如下所示：

```
<?php $path= "www.ghhelpline.com/hello/images/" ?>

    <style>
    .hello { 
        background-image: url("<?php echo $path;?>new.png");
    }
    </style> 
```

有没有可能？

如果不告诉我其他方法来做到这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T11:52:06.400

尝试这个：

```
<?php 
    $path= "http://www.ghhelpline.com/hello/images/"; //add http before link starts..
?>
<style>    
    .hello {
         background-image: url('<?php echo $path;?>new.png');
    }
</style> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T11:52:30.293

是的。（哇哦！）

为了使这成为可能，您的服务器需要解释该文件，因此要么修改设置，服务器也会查看 .css 文件，或者将其重命名为 .php。

另外，不要忘记 http://，否则路径将被解释为相对路径。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-10T11:53:08.777

这取决于文件的类型。如果您在 .php 文件中使用此代码，则可以这样做，但如果您在 .css 文件中使用它，则不能。

这是因为 PHP 解释器不解析这种类型的文件。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-12-10T11:52:45.350

添加协议...`http://`

```
<?php $path= "http://www.ghhelpline.com/hello/images/" ?> 
```

# javascript - JW Player javaScript API 不工作

> ID：13800386
> 
> 赞同：2
> 
> 时间：2012-12-10T11:49:48.253
> 
> 标签：javascript, api, google-chrome, jwplayer

我使用 jwplayer.version = '5.10.2295' 和浏览器 chrome 25。

我的代码：

```
jwplayer('container').setup({
    file: 'path...',
    width: '300px',
    height: '100px',
    autostart: true,
    modes: [
        { type: 'html5' },
        { type: 'flash', src: 'path...' }
    ]
}); 
```

加载页面时，我的资源（mp4 视频文件）开始正确显示 - 没关系。但是对简单的 jwplayer JS API 方法没有反应，例如 jwplayer().stop()。有些控件不可用（播放、顶部、搜索），但“全屏模式”按钮和音量按钮一样有效。

而且最有趣的是，js api和控制按钮在视频开始播放后的几秒钟内可用（如果浏览器缓存被清除），然后交互没有响应。但是某些方法始终正确工作（例如 jwplayer().setFullscreen()）。

ps 我看到了相关的[问题](https://stackoverflow.com/questions/9809438/javascript-api-not-working-for-chrome-or-safari-on-jw-player-5-9)，但答案对我来说不够深。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T10:10:36.813

我找到了解决方案。

我的视频文件在路径中没有指定的扩展名（我有'path/to/file'而不是'path/to/file.mp4'），这个事实破坏了jwPlayer的深处。我们需要指定我们操作的文件类型：

```
jwplayer('container').setup({
    file: 'path/to/file-with-no-extension',
    width: '300px',
    height: '100px',
    autostart: true,
    type: 'video',  //helps jwplayer to determine how to handle our resource with no extension
    modes: [
        { type: 'html5' },
        { type: 'flash', src: 'path...' }
    ]
}); 
```

这就是解决方案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-29T15:44:58.333

[从http://www.longtailvideo.com/jw-player/download/](http://www.longtailvideo.com/jw-player/download/)下载 jwplayer6

将这些文件放入特定目录：-

*   应用程序/资产/jwplayer/jwplayer.flash.swf
*   供应商/资产/javascripts/jwplayer.js
*   供应商/资产/javascripts/jwplayer.html5.js

**然后在application.js**中添加这些行

 **```
//= require jwplayer
//= require jwplayer.html5 
```

在您正在播放视频的页面上，添加这些行

```
<script type="text/javascript">jwplayer.key="YOUR_JWPLAYER_KEY";</script>
<div id="video">Loading the player ...</div>
<script type="text/javascript">
jwplayer("video").setup({
    flashplayer: "<%=asset_path('jwplayer.flash.swf')%>",
    file: "<%= file_path %>",
    height: 360,
    width: 640,
    analytics: {
        enabled: false,
       cookies: false
   }
}); 
```

[http://account.longtailvideo.com/#/home](http://account.longtailvideo.com/#/home)在这里您可以从**获取您的许可证密钥**部分注册时获得免费的自托管密钥。**

# ios - 视频从 ios 应用上传到 youtube 失败

> ID：13800388
> 
> 赞同：1
> 
> 时间：2012-12-10T11:49:52.763
> 
> 标签：ios, ipad, youtube, gdata-api

我正在尝试使用来自 ipad 应用程序的 GData 静态库将视频上传到 Youtube，如果我从创建 Youtube 帐户的同一位置上传，但如果位置更改，则从应用程序上传失败并且当我登录时，它工作正常通过该网站，它会显示一条消息： **有人试图登录您的帐户。那是你吗？**

我在我的应用程序中使用了客户端登录身份验证。

# javascript - 如何使用功能检测来检测 iOS6 设备

> ID：13800390
> 
> 赞同：2
> 
> 时间：2012-12-10T11:50:03.623
> 
> 标签：javascript

是否有任何通用方法可以使用功能检测来检测 iOS6 设备。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T12:01:17.160

您可以检查`FileReader`API，但当然这也适用于许多现代桌面浏览器（我不确定这是否会给您带来一些问题，但我对此表示怀疑）：

```
var iOS6 = false;
if(window.FileReader)
{
    iOS6 = true;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-10T12:01:37.677

我认为最好的方法始终是[*解析*用户代理字符串](https://stackoverflow.com/questions/12305566/what-is-the-ios-6-user-agent-string)，但您可以使用以前不支持的功能检测 iOS 6 引入的 Safari 版本（请参阅[本文](http://taitems.tumblr.com/post/24936855546/what-ios-6-mobile-safari-offers-front-end-devs)以获得更完整的列表，我将仅提供一个示例）。

基本上，您必须模仿[modernizr](http://www.modernizr.com/)使用的相同技术，使用这段代码，您将检查该`<input>`类型`file`是否受支持，如果支持，则您正在运行iOS 6 或更高版本的Safari。当然，仅使用功能您不能确定用户没有使用其他浏览器（这就是为什么如果您必须检测操作系统版本，我更喜欢用户代理字符串）。如需比较，请参阅[SO 上的这篇文章](https://stackoverflow.com/questions/12479897/detect-browser-file-input-support)。

```
function isNewVersion() {
    var elem = document.createElement("input");
    elem.setAttribute("type", "file");

    return elem.type !== "text";
} 
```

# java - 如何从 GWT 客户端的本地主机服务器获得响应？

> ID：13800393
> 
> 赞同：0
> 
> 时间：2012-12-10T11:50:41.420
> 
> 标签：java, url, gwt, http-response-codes

我有一个`WCF`基于 Web 服务并托管在用`c#`. 我想在我的`GWT client side`.

请检查以下代码：

```
url = "localhost:8089/request"
RequestBuilder builder = new RequestBuilder(RequestBuilder.GET, url);
Request response = builder.sendRequest(null, new RequestCallback() {
   @override
   public void onResponseReceived(Request request, Response response) {
       Window.alert(response + " ");
     }
 }); 
```

每次我尝试运行代码时，它都会显示“ `http://localhost:8089 is not allowed by Access-Control-Allow-Origin.`”

PS：我搜索了这个错误，但我不想禁用所有浏览器的网络安全。

是否有任何替代解决方案可以让`response`服务器`localhost`在同一台机器上的不同色情片上运行。这就是为什么我想在客户端调用一个 url。

请提出解决方案。

## 编辑

让我分点向您解释完整的场景：

```
GWT application is hosted on some server (www.abc.com)
WCF is a web service installed at each client.
A client open his/her browser and put the url (www.abc.com/page)
This page want to access the web services hosted on a client machine. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T12:36:28.040

你不能配置你的 WCF 服务来发送`Access-Control-Allow-Origin: www.abc.com`响应头吗？

否则，我猜你可以使用[*代理 servlet*](http://code.google.com/p/google-web-toolkit/issues/detail?id=3131)来`www.abc.com`代理对 的调用[`getRemoteAddr`](http://docs.oracle.com/javaee/6/api/javax/servlet/ServletRequest.html#getRemoteAddr%28%29)，假设中间没有代理。

# delphi - 为什么 ldap_connect 慢？

> ID：13800399
> 
> 赞同：0
> 
> 时间：2012-12-10T11:50:59.297
> 
> 标签：delphi, ldap

我正在使用 Windows 附带的 WinLDAP.DLL 连接到不同的 LDAP 服务器（1x OpenLDAP，1x Active Directory）。编程语言是 Delphi，但在这里可能不相关。

在几个配置中，当使用服务器名称而不是 IP 地址时，“ldap_connect”的调用非常慢（6-7 秒）。ping 或对同一台服务器进行 nslookup 并不慢。为什么只有 ldap 连接很慢？有什么我可以检查以确定问题的地方吗？

**编辑**：WMware 在我的电脑上安装了 2 个虚拟以太网适配器。如果我停用这些适配器，ldap_connect 会快 2-3 倍。它并不能完全解决问题，但它可能有助于找到解释。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T11:52:58.843

这几乎可以肯定是 DNS 配置错误。检查您的 nslookup 和反向查找时间。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T15:52:24.560

LDAP 服务器执行[反向 DNS 查找](http://www.openldap.org/lists/openldap-software/200105/msg00309.html)的机会很大。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-22T09:02:15.780

我仍然不知道，如果我使用服务器名称而不是 IP 地址，为什么连接会很慢。但是为了解决这个问题，我决定自己解决 IP 地址，而不是让 WINLDAP.dll 来解决。

它可以通过使用这样的函数来简单地实现：

```
function GetIPAddress(const HostName: AnsiString): AnsiString;
var
  HostEnt: PHostEnt;
  Host: AnsiString;
  SockAddr: TSockAddrIn;
begin
  Result := '';
  Host := HostName;
  if Host = '' then
  begin
    SetLength(Host, MAX_PATH);
    GetHostName(PAnsiChar(Host), MAX_PATH);
  end;
  HostEnt := GetHostByName(PAnsiChar(Host));
  if HostEnt <> nil then
  begin
    SockAddr.sin_addr.S_addr := Longint(PLongint(HostEnt^.h_addr_list^)^);
    Result := inet_ntoa(SockAddr.sin_addr);
  end;
end; 
```

# android - 3d 动画/相机转换和现代设备

> ID：13800401
> 
> 赞同：1
> 
> 时间：2012-12-10T11:51:00.450
> 
> 标签：android, animation, camera, transformation

在我的应用程序中，我通过 3d 转换`android.graphics.Camera`。在我尝试 Nexus 之前，它似乎工作正常。

我在 Nexus 7 (4.2.1) 和 Galaxy Nexus (4.1.2) 上安装了该应用程序，它们都根本不执行相机转换。我有两个不同的相机视图，都显示标准动画并且不应用相机转换。

谁能解释这样的行为？

UPD：相机代码

```
transformation.clear();     
transformation.setTransformationType(Transformation.TYPE_MATRIX);   
mCamera.save();     
final Matrix matrix = transformation.getMatrix();         
mCamera.translate(x,y,z);  
mCamera.getMatrix(matrix);  
matrix.preTranslate(-centerX, -centerY);        
matrix.postTranslate(centerX, centerY);         
mCamera.restore(); 
```

UPD2：与 Galaxy S3 (4.2) 相同，但与 S2 (4.0.4) 不同

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-24T06:20:13.803

只需添加到 getChildStaticTransformation 的末尾

```
if (android.os.Build.VERSION.SDK_INT >= 16 /*JellyBean*/) child.invalidate(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T15:55:13.800

Mikhail 提供的解决方案在`getChildStaticTransformation`.

唯一的问题是该`getChildStaticTransformation`方法将始终被调用。

我的解决方案是在每个项目的更新 x、y、z 值之后放置代码。

```
// items is a ArrayList of ControlItem for example
// x,y,z are custom property of ControlItem class

items.get(0).x = 250;
items.get(0).y = 100;
items.get(0).z = 0;

for ( ControlItem item : items )
{
    // Item must be invalidate with JellyBean and superior
    if ( android.os.Build.VERSION.SDK_INT >= 16 ) item.invalidate();
}

// getChildStaticTransformation() will be called after, transformation will be applied 
```

# extjs - Sencha Touch 2 - 文本重叠问题

> ID：13800402
> 
> 赞同：1
> 
> 时间：2012-12-10T11:51:05.430
> 
> 标签：extjs, sencha-touch, sencha-touch-2

我是 Sencha Touch 2 的新开发人员，我正在尝试使用其提供的 MVC 架构创建我的第一个应用程序。我发现在页面之间导航时工具栏/标题栏文本重叠的问题。看看这些截图：

[示例 1](https://i.imgur.com/FBCa5.png)

[示例 2](https://i.imgur.com/nrH3N.png)

我不太确定外面发生了什么。我正在使用 animateActiveItem 和路由方法在我的应用程序中移动。

**Users.js 控制器文件，登录方法**

```
// Ajax code here, not included here
// on ajax success:
this.redirectTo("login"); 
```

**Routes.js 控制器文件**

```
routeLoginPage: function() {
    console.log("routeLoginPage");
    Ext.Viewport.animateActiveItem({ xtype: "loginpage" }, { type: "slide", direction: "left" });
}, 
```

真的有人遇到过这样的问题吗？我不知道现在该怎么做，因为我试图解决这个问题 2 天+。

**编辑**

基本上我需要在定义为视图的页面之间移动。我在包含属性的不同文件中定义每个视图：扩展、要求、别名、配置和我定义的方法。每个配置属性都附加了标题栏作为其第一项。

当我尝试更改页面时，我通过更改地址哈希的控制器命令加载另一个视图。Routes 控制器然后触发 animateActiveItem 方法，该方法加载另一个视图（之前通过别名属性定义为 xtype）。

我正在使用 Miami Coder 的教程 (miamicoder.com/2012/how-to-create-a-sencha-touch-2-app-part-1/) 来学习 Sencha Touch 基础知识。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T12:05:36.123

我认为您的意思是标题栏而不是工具栏...

使用导航视图在视图之间导航而不是`Ext.Viewport.animateActiveItem` 它是一种更好的方法。要使用导航视图，请在 sencha 文档中使用本指南... Sencha 有一个陡峭的学习曲线，所以要准备好面对这样的挫折......

[导航 查看指南](http://docs.sencha.com/architect/2/#!/guide/navigationview)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T05:37:54.853

```
{
    xtype: 'navigationview',
    id: 'navView',
    navigationBar: {
        hidden: true
    }

} 
```

上面的代码将隐藏导航视图生成的标题栏...现在您需要像这样定义自己的标题栏

```
{
       xtype: 'titlebar',
       title: 'title',
       items: [
            {
                   xtype: 'button',
                   text: 'back',
                   listeners: [
                     {
                         fn: function(button){
                              Ext.getCmp('navView').pop();//this will pop the view and show previous view
                         },event: 'tap'

                     }
                   ]
            }
       ]

} 
```

希望能帮助到你...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-10T12:38:55.143

您可以在一个面板类中添加所需的视图，并使用

```
mainclass.setActiveItem(0) 
```

或者使用导航视图

# javascript - 在Javascript中检查和设置默认变量

> ID：13800404
> 
> 赞同：1
> 
> 时间：2012-12-10T11:51:11.433
> 
> 标签：javascript, oop, object

假设您有一个对象 TRACK，用于跟踪

```
TRACK = {};
TRACK.pageName = pageName || TRACK.buildPageName(); 
```

如果在它之前的某个地方有这个，这会很好用：

```
var pageName = "Home"; 
```

让我们假设解决此问题的方法是：

```
TRACK.pageName = (typeof pageName != 'undefined' ? pageName : TRACK.buildPageName()); 
```

使用大型 javascript 对象执行此操作是否有更好的做法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T11:55:51.470

如果您在浏览器中，则可以`window.pageName`检查 pageName 值。

```
TRACK.pageName = window.pageName !== undefined ? pageName : TRACK.buildPageName(); 
```

但这并不是真正的“更好”的做法。这只是第二种方法。使用`typeof`也很好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T11:56:49.460

你的例子：

```
TRACK.pageName = pageName || TRACK.buildPageName(); 
```

是正确的，但如果你想在`undefined`这里露营，有一种方法可以做到：

```
if (pageName !== undefined){...} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-10T11:58:46.610

我认为，你可以在 TRACK.buildPageName() 中实现这个 if 语句。如果 pageName 是全局变量，您可以从 TRACK.buildPageName() 内部访问它

```
{
...
    buildPageName: function() {
        this.pageName = (typeof pageName != 'undefined' ? pageName : TRACK.innerBuildPageName());
    }
} 
```

多亏了这一点，您只能隐藏和执行此 if 语句一次。

# c++ - 除了使用表达式之外，我可以访问 C++ 中的对象吗？

> ID：13800405
> 
> 赞同：7
> 
> 时间：2012-12-10T11:51:11.707
> 
> 标签：c++, expression, language-lawyer, data-manipulation

根据 C++03 3.10/1 *，每个表达式都是左值或右值*。当我使用`=`为变量分配新值时，分配左侧的变量名称是左值表达式。看起来无论我尝试对变量做什么，它仍然会使用一些表达式。

除了使用表达式之外，还有什么方法可以在 C++ 中操作变量？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T15:19:08.257

唯一的方法是通过一个语句，而不是通过作为这种语句一部分的表达式。一个例子是定义，`std::string x;`。这将调用默认 ctor on `x`。但这对你来说算作操纵吗？

实际上，没有那么多其他的说法。除了通过循环控制表达式的副作用之外，循环控制语句不能更改对象本身。`goto`，`break`而且`continue`根本做不到。`throw`是一个表达式，`catch()`不能改变任何东西，所以那对也无关紧要。我认为没有任何其他非表达语句。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-10T15:19:15.987

您可以在不使用表达式的情况下设置变量的值，但您无法真正选择它获得的值。我阅读 C++11 标准（语言语法）附录 A 的方式，**声明**不是表达式。如果您`int a;`在函数范围内编写，`a`将被分配一个不确定的值。如果您在文件范围内编写它，`a`将为其分配值 0。但您不能为其分配值或传递构造函数参数，因为这样做涉及表达式。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-10T15:05:20.720

不确定它是否严格回答了您的问题，但您可以间接操纵变量。例如：

```
int a;
int *pA = &a;
*pA = 5; 
```

此处的值`a`已更改，但没有任何涉及 的表达式`a`。该表达式仅涉及`pA`.

除此之外，不相关的操作可能会产生副作用，导致变量更改，无论是有意还是无意（例如无意更改某些变量的内存损坏）。

# google-chrome - webm 视频在播放期间不断在 Chrome 中调整大小

> ID：13800410
> 
> 赞同：0
> 
> 时间：2012-12-10T11:51:36.893
> 
> 标签：google-chrome, video, converter, playback, webm

我通过 Any Video Converter 将视频转换为 webm，它在 Firefox 中播放良好。但是，在 Chrome 中，它会在播放过程中不断调整自己的大小，我不知道为什么。

我以前使用过 Miro 转换器，但由于某种原因，该视频根本无法在 Firefox 中播放。当我按下播放时，它会立即跳到视频的结尾。当使用我的自定义设置时，它在 Chrome 中做了奇怪的调整大小的事情，但是当我使用默认设置再次导出它时，它在 Chrome 中正常播放，但在 Firefox 中仍然没有，所以我切换到使用 Any Video Converter，现在调整大小问题又回来了。我没有更改设置中的任何内容。

**这是链接： http:** [//kimkellermedia.com/videoTest.html](http://kimkellermedia.com/videoTest.html)

顺便说一句，我正在使用最新版本的 Firefox 和 Chrome。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T02:08:36.433

我从来没有完全弄清楚是什么导致了播放过程中大小的快速变化，但是这个链接推荐了一些我还没有尝试过的转换器。 [http://www.my-html-codes.com/html5-video-converters](http://www.my-html-codes.com/html5-video-converters)

我使用了**Free WebM Encoder** [http://webmsoft.com/free-webm-encoder.html](http://webmsoft.com/free-webm-encoder.html)，现在在所有浏览器上一切正常。所以，如果其他人看到这个奇怪的问题，我猜使用这个转换器。

首先知道是什么导致了这一切仍然很高兴，以防万一它再次发生，但至少现在一切都很好！顺便说一句，我已经删除了我在原始问题中提供的 videoTest 链接，因为我不再需要它了。

# image - Magento 以编程方式为多商店视图设置产品图像

> ID：13800413
> 
> 赞同：3
> 
> 时间：2012-12-10T11:51:45.020
> 
> 标签：image, magento, product

我正在从 Helper 函数动态创建产品。这很好。并为默认商店视图设置图像工作正常。但对于多商店视图，图像未选为“缩略图”、“小图像”或“图像”。

```
 $product = new Mage_Catalog_Model_Product();

        // Build the product
        //$product->setSku('pkg-sku-1');
        $product->setAttributeSetId(4); //default attribute-set
        $product->setTypeId('simple');
        $product->setName($pkg_data['pkg_name']);
        $product->setCategoryIds(array(7)); # some cat id's, my is 7

        $product->setWebsiteIDs(array(1)); # Website id, my is 1 (default frontend)
        $product->setDescription('EventPackageForOrder');
        $product->setShortDescription($pkg_id);
        $product->setPrice($pkg_data['pkg_price']); # Set some price

        //Default Magento attribute
        $product->setWeight(4.0000);
        $product->setVisibility(Mage_Catalog_Model_Product_Visibility::VISIBILITY_NOT_VISIBLE);
        $product->setStatus(1);
        $product->setTaxClassId(2); # Taxable goods
        $product->setStockData(array(
            'is_in_stock' => 1,
            'qty' => 5
        ));

        $im_url_path = Mage::getBaseUrl('media').'eventdiscpkgs/event_logo.jpeg'; 
        $im_absolute_path = Mage::getBaseDir('media') . DS . 'eventdiscpkgs/event_logo.jpeg';

        $product->setMediaGallery (array('images'=>array (), 'values'=>array ()));
        $product->addImageToMediaGallery($im_absolute_path, array ('thumbnail'), false, false);
        $product->addImageToMediaGallery($im_absolute_path, array ('small_image'), false, false);
        $product->addImageToMediaGallery($im_absolute_path, array ('image'), false, false);

        $product->setHasOptions(true);

        $product->setCreatedAt(strtotime('now'));
        try {

            $product->save();
        }
        catch (Exception $ex) {

            $ex->getMessage();
        } 
```

任何我可以改变的想法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T12:53:52.177

尝试为每个商店 ID 分配图像：

```
foreach($product->getStoreIds() as $storeId) {
    $product->setStoreId($storeId)
        ->setImage($im_absolute_path)
        ->setSmallImage($im_absolute_path)
        ->setThumbnail($im_absolute_path);
    $product->save()
} 
```

# javascript - 基于另一个单选按钮启用/禁用一个单选按钮

> ID：13800420
> 
> 赞同：-3
> 
> 时间：2012-12-10T11:52:10.783
> 
> 标签：javascript

我有两个单选按钮组：

```
<td valign="top" width="37.5%" colspan="3"> 
```

实际天数/月 仅工作日 仅工作日 + WH 仅工作日 + WH + PH

name 和 id 一样。我的要求是，如果我单击`ActualDays_Month`单选按钮，则必须禁用其他两个单选按钮。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T11:57:10.277

对于属于同一组的那些按钮，您需要具有相同的名称。

```
<input type="radio" name="salarycalenderyears" value="ActualDays_Month" checked="checked" id="salarycalenderyears">
<input type="radio" name="salarycalenderyears" value="OnlyWorkingDays" id="salarycalenderyears1">
<input type="radio" name="salarycalenderyears" value="OnlyWorkingDays_WH" id="salarycalenderyears2"> 
```

请注意，您不能为多个元素使用相同的 id。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T12:01:01.413

我不确定我是否完全理解你的问题。但问题是，您想使用单选按钮，它们必须具有相同的名称，并具有唯一的 ID 和值以用于标识。

# rdp - 跟踪 RDP 会话的互联网活动

> ID：13800421
> 
> 赞同：1
> 
> 时间：2012-12-10T11:52:11.917
> 
> 标签：rdp, terminal-services

我们的产品（网络取证和分析工具）需要剖析 Windows 200x 服务器上的 RDP 会话和

*   将每个会话映射到登录帐户。
*   跟踪所有访问 Internet 的 TCP/UDP 会话。
    *   访问过的网址
    *   外部服务器和连接的端口等。

我设计了一个代码，可以通过在每个终端服务器上安装 NT 服务来实现这一点。该服务将挖掘该服务器上的数据并将其推送到我的基于 linux 的设备。或者，它可以将信息记录到本地事件日志，然后我可以使用简单的 WMI 调用来检索此信息。

但是，我想知道是否有一种方法可以通过在外部（通过 WMI 或其他方式）轮询终端服务器并收集相同的信息来检索所有 TCP/UDP 连接。基本上，我正在尝试检查是否有办法避免在 Windows 终端服务器上安装任何东西。

谢谢，

-钱德拉

# android - 为什么 Android uiautomator 的 UiDevice#takeScreenshot 总是在模拟器上返回 false

> ID：13800437
> 
> 赞同：6
> 
> 时间：2012-12-10T11:53:03.697
> 
> 标签：android

使用**uiautomator**`takeScreenshot(File storePath)`时，无论我传入什么参数，总是返回 false。

我试图给`new File(dir_name, file_name)`or `new File(file_name)`，它们都不起作用（如果 dir_name 不存在，当然首先 mkdir ）。

每次它只返回 false 并且模拟器上的***/data/local/tmp/***是空的。

顺便说一句，我认为这不是权限问题，因为尝试类似`dumpWindowHierarchy`可能会在那里生成转储文件。

在此先感谢您的帮助。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-21T17:20:47.647

如果您使用模拟器运行测试，您应该**在 AVD 配置中打开“使用主机 GPU”**。在此更改之后，它对我有用。

如果您仍然遇到问题，您可以尝试截屏。它是用于截屏的命令行工具。它适用于两种模拟器设置。要将屏幕截图保存在给定*路径*中，请执行：

```
Process process = Runtime.getRuntime().exec("screencap <path>");
process.waitFor(); 
```

使用**/data/local/tmp**来避免权限问题。您也可以使用 SD 卡目录。它是异步的，所以等待进程用 waitFor() 完成。它将通过提供的文件的扩展名来识别所需的输出格式。

或者您可以在 InputStream 中获取 PNG（无需等待）：

```
Process process = Runtime.getRuntime().exec("screencap -p");
InputStream output = new BufferedInputStream(process.getInputStream()); 
```

如果您希望以 JPEG 格式获取文件，则可以省略 -p。它们的 JPEG 屏幕截图更大，但获取它们所需的时间更少。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-12-20T07:13:44.317

takeScreenshot() 方法适用于 4.2 及以上安卓版本设备

如果设备版本合适，则使用以下代码

```
File path = new File("/sdcard/filename.png");
    int SDK_VERSION = android.os.Build.VERSION.SDK_INT; 
    if (SDK_VERSION >= android.os.Build.VERSION_CODES.JELLY_BEAN_MR1) {
        mUiAutomatorTestCase.getUiDevice().takeScreenshot(PATH);
    } 
```

我们可以通过以下命令查看文件

```
$ adb shell ls -l /sdcard/name-of-file 
```

# joomla - 根据 Joomla 2.5 上加载的页面自动更改滑块的图像文件夹

> ID：13800442
> 
> 赞同：1
> 
> 时间：2012-12-10T11:53:12.727
> 
> 标签：joomla, slider, joomla2.5

我正在做一个网站，我有以下问题：

我必须展示很多产品，并且在每个产品的每个页面中我都有一个滑块，这个滑块必须为每个产品提供不同的图像。问题是，当我使用 joomla 2.5 的滑块组件/模块时，我需要为每个产品复制它（至少对于我对 joomla 了解的很少）。

没有其他方法可以自动为滑块提供图像，而无需复制模块/组件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T18:19:04.847

您可以使用插件在文章中轻松创建图像滑块。**[Nice Slide Show](http://extensions.joomla.org/extensions/photos-a-images/slideshow/image-mootools-slideshow/14970)**是一个付费扩展，可以满足您的目的。

[Simple Image Slider](http://www.dynatec.at/joomla-extensions-modules-plugins-components/simple-image-slider-sis-plugin-for-joomla-1-5)是一个免费插件，但找不到它的 2.5 版本。

还要检查这个插件：[滑动图像链接](http://falsinsoft-joomla.blogspot.in/2011/10/sliding-image-links.html)

希望能帮助到你

# gitorious - 去除严重的过度使用限制

> ID：13800444
> 
> 赞同：0
> 
> 时间：2012-12-10T11:53:29.313
> 
> 标签：gitorious

我已经安装了一个新的本地[gitorious](https://gitorious.org/)服务器，但是当我配置 users\projects\permissions 时，我得到：

```
Slow down!
Seems like you are just a tad busy, creating all those records that fast. Too much coffee?
To prevent abuse, we have denied your request due to excessive usage.
Feel free to contact us if you believe you have received this message in error. 
```

这很好，以后都可以了，但现在我真的需要配置一堆东西。我怎样才能解除这个限制？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T11:57:17.777

放：

```
disable_record_throttling: true 
```

在`gitorious.yml`

# ios - 核心数据删除操作后重新加载我的视图控制器

> ID：13800446
> 
> 赞同：0
> 
> 时间：2012-12-10T11:53:33.273
> 
> 标签：ios, core-data, refresh, nsmanagedobject

我有一个摘要页面控制器，用于显示数据库文件中的所有用户。

我正在使用核心数据环境。在此页面中，我有一个按钮可以从数据库中删除所有用户。这工作正常，但我无法在当前屏幕中反映这些变化。我需要重新加载我的视图控制器以在屏幕上反映这些更改。

这就是我所做的。

```
for (NSManagedObject * user in users) {
    [delegate.managedObjectContext deleteObject:user];
}

NSError *saveError = nil;
[delegate.managedObjectContext save:&saveError]; 
```

如何刷新我当前的屏幕？

# python - Python：创建多个列表的优雅和节省编码方式

> ID：13800448
> 
> 赞同：0
> 
> 时间：2012-12-10T11:53:43.543
> 
> 标签：python, list, optimization, coding-style

通常为了将结果存储在 python 中的多个列表中，我在循环之前创建相应的空列表。

```
A = []
B = []
c = []
D = []
E = []
F = []

for i in range(100):
  # do some stuff 
```

我有一种方法可以在单个代码行（或几个）中创建列表吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-10T11:59:32.407

如果列表在逻辑上相似（我希望如此，因为一百个不同的变量对程序员来说是暴力的），创建一个列表字典：

```
list_names = ['a', 'b', 'c' ]
d = {name:[] for name in list_names} 
```

这将创建一个字典：

```
d = {'a': [], 'b': [], 'c': []} 
```

您可以在其中访问个人列表：

```
d['a'].append(...) 
```

或同时处理所有这些：

```
for v in d.itervalues():
    v.append(...) 
```

与单个列表相比，另一个优点是您可以将整个 dict 传递给一个方法。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-10T11:57:08.743

您可以使用一个对象：

```
>>> from string import ascii_uppercase
>>> class MyLists(object):
    def __init__(self):
        for char in ascii_uppercase:
            setattr(self, char, [])

>>> l = MyLists()
>>> l.A
[]
>>> l.B
[] 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-10T11:57:57.927

```
a, b, c, d, e, f = [], [], [], [], [], [] 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-12-10T11:59:12.640

```
lists = ([] for _ in range(6))
lists[5].append(...) 
```

或者

```
A, B, C, D, E, F = ([] for _ in range(6)) 
```

或使用 defaultdict

```
d = defaultdict(list)
d['F'].append(...) 
```

# c++ - C ++ 11如何代理只有其名称和父类的类函数？

> ID：13800449
> 
> 赞同：4
> 
> 时间：2012-12-10T11:53:45.630
> 
> 标签：c++, boost, c++11, boost-mpl, boost-preprocessor

我想知道是否可以使用 boost::mpl/preprocessor 或一些 noce C++11 功能从类类型和函数名称创建函数代理。

假设我们有：

```
 inline void set_email(const ::std::string& value);
  inline void set_email(const char* value); 
```

课堂内电子邮件。我们知道它有 set_email 函数，我们想创建一个类似 API 的代理类

```
PROXY(Email, set_email, MyEmail)

Email * email = new Email();
MyEmail * myEmail = new MyEmail(email); 
```

并且能够调用任何 set_email 重载。是否有可能以及如何创建这样的类来代理不知道类型（仅名称）的任意数量的重载函数？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-14T19:28:07.300

这个怎么样：

## 代理宏.hpp

```
#include <type_traits>
#include <utility>

#define PROXY(proxified, member_function, proxy_name)                                                                           \
  class proxy_name                                                                                                              \
  {                                                                                                                             \
  private:                                                                                                                      \
    proxified & ref_;                                                                                                           \
                                                                                                                                \
  public:                                                                                                                       \
    proxy_name(proxified &ref)                                                                                                  \
      : ref_(ref)                                                                                                               \
      {                                                                                                                         \
      }                                                                                                                         \
                                                                                                                                \
    /* general version */                                                                                                       \
    template<typename ... Args>                                                                                                 \
    auto member_function(Args&& ... args)                                                                                       \
    -> typename std::enable_if<!std::is_void<decltype(ref_.member_function(std::forward<Args>(args)...))>::value,               \
                               decltype(ref_.member_function(std::forward<Args>(args)...))>::type                               \
      {                                                                                                                         \
        return (ref_.member_function(std::forward<Args>(args)...));                                                             \
      }                                                                                                                         \
                                                                                                                                \
    /* void return type version */                                                                                              \
    template<typename ... Args>                                                                                                 \
    auto member_function(Args&& ... args)                                                                                       \
    -> typename std::enable_if<std::is_void<decltype(ref_.member_function(std::forward<Args>(args)...))>::value,                \
                               void>::type                                                                                      \
      {                                                                                                                         \
        ref_.member_function(std::forward<Args>(args)...);                                                                      \
      }                                                                                                                         \
                                                                                                                                \
  }; 
```

这对我来说编译和工作正常`g++ 4.7`：

```
#include "proxy_macro.hpp"

#include <iostream>
#include <string>

class   Email
{
public:  
  void set_email(const ::std::string& value)
  {
    std::cout << value << std::endl;
  }

  void set_email(const char* value)
  {
    std::cout << value << std::endl;
  }

  int   set_email()
  {
    return (42);
  }

};

PROXY(Email, set_email, MyEmail)

int main(void)
{
  Email   mail;
  MyEmail my_mail(mail);

  std::string str = "test string";
  const char * ptr = "test char pointer";

  my_mail.set_email(str);
  my_mail.set_email(ptr);

  std::cout << "test return: " << my_mail.set_email() << std::endl;

  return (0);
} 
```

* * *

## 编辑（小版本感谢评论）

## 代理宏.hpp

```
#include <type_traits>
#include <utility>

#define PROXY(proxified, member_function, proxy_name)                \
  class proxy_name                                                   \
  {                                                                  \
  private:                                                           \
    proxified & ref_;                                                \
                                                                     \
  public:                                                            \
    proxy_name(proxified &ref)                                       \
      : ref_(ref)                                                    \
      {                                                              \
      }                                                              \
                                                                     \
    template<typename ... Args>                                      \
    auto member_function(Args&& ... args)                            \
    -> decltype(ref_.member_function(std::forward<Args>(args)...))   \
      {                                                              \
        return (ref_.member_function(std::forward<Args>(args)...));  \
      }                                                              \
  }; 
```

# ruby-on-rails - Ruby 中要分类的字符串

> ID：13800451
> 
> 赞同：0
> 
> 时间：2012-12-10T11:53:48.193
> 
> 标签：ruby-on-rails, ruby, json, class

我在 Ruby (on Rails) 中有一个类，如下所示：

```
class Good
  include MongoMapper::Document
  has_many :offers, :dependent => :destroy

  key :name,         String
  key :description,  String
  key :email,        String
  key :offers,       Array
  key :type,         String
end 
```

我正在从外部 URL 解析 JSON 对象并仅检索此类中的部分类型集，即，我只能检索名称、描述和类型。在我的服务器上，我已经有一个可以显示的页面和数据。我也想在页面上显示来自外部 URL 的数据。如何在不对代码进行太多更改的情况下做到这一点？我想到的一件事是让我检索到的字符串成为 Good 类的一部分，但我不知道该怎么做。

换句话说，检索到的名称、描述和类型将被转换为 Good 类型，然后将使用现有的页面来显示我们的商品，以显示我们的商品和检索到的商品。我怎样才能做到这一点？这是正确的方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T12:31:23.803

你的问题很不清楚，但我会试一试。你可以点个[`Struct`](http://www.ruby-doc.org/core-1.9.3/Struct.html)赞

```
ArbitraryGood = Struct.new(:name, :description, :type) 
```

然后，您可以将一组`Good`实例映射到此

```
@arbitrary_goods = Good.all.map { |g| ArbitraryGood.new(g.name, g.description, g.type) } 
```

然后，您可以收集 JSON 响应并向其附加新`ArbitraryGood`实例。

```
objects_from_json = ... # for you to implement
@arbitrary_goods += objects_from_json.map { |o| ArbitraryGood.new(o.name, o.description, o.type) } 
```

现在`@arbitrary_goods`包含一个列表，其中混合了来自两个`Good`实例的数据和已解析的外部 JSON，以便在您的视图中使用。

# android - 加载本地数据时，WebView 没有填满屏幕的整个宽度

> ID：13800455
> 
> 赞同：2
> 
> 时间：2012-12-10T11:54:08.327
> 
> 标签：android, webview, android-webview

我有一个带有单个 web 视图的简单布局。

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:orientation="vertical"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" >

    <WebView
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:id="@+id/webview" />

</RelativeLayout> 
```

我需要从本地资源将数据加载到 webview 中。我这样做：

```
String str = "100% valid html with doctype and other things";
view.loadDataWithBaseURL(null, str, "text/html", "utf-8", null); 
```

但有时它并没有填满整个宽度。您知道，在将数据加载到 webview 时会有滑入效果。因此，在加载时，它有时会滑动到屏幕的某个部分（通常是一半）并且不会滑动得更远，结果内容不会填满整个宽度。错误在许多设备上重现（截图来自索尼 Xperia S，在某些三星 Galaxy S2 上也稳定重现）。

打开硬件加速没有帮助。

**那么，为什么会出现这个错误呢？以及如何解决？**

![在此处输入图像描述](../Images/3b9c73e6911075caaa34dcbbc5b5a0a1.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-10T12:04:57.233

试试这个

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"

    android:layout_width="fill_parent"
    android:layout_height="fill_parent" >

    <WebView
        android:id="@+id/webview"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:layout_alignParentLeft="true"
        android:layout_alignParentTop="true"
        android:layout_alignParentRight="true"
        android:layout_alignParentBottom="true" />

</RelativeLayout> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-10T13:06:19.713

您需要将视口元数据定义为本地 html。为移动设备开发 html 需要更加仔细的考虑。

尝试阅读[此页面](http://developer.android.com/guide/webapps/targeting.html)。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2017-06-09T08:26:31.460

您可以尝试更改`RelativeLayout`为`LinearLayout`.

我有一个像你这样的问题，我通过做出改变来解决这个问题。

# php - PHP - 获取浮点变量内部值

> ID：13800456
> 
> 赞同：2
> 
> 时间：2012-12-10T11:54:10.337
> 
> 标签：php, floating-point-precision

我正在尝试在 PHP 中进行浮点比较时建立我需要的增量。**我想仔细看看我的变量，看看有什么不同。**

我有 2 个计算变量，$a，$b。

```
$a = some_function();

$b = some_other_function(); 
```

如何查看 PHP 使用的确切数字？

我想将它们与这个公式进行比较，我需要在其中指定增量：

```
$delta = 0.00001;
if (abs($a-$b) < $delta) {
  echo "identical";
} 
```

var_dump($a, $b) 返回 1.6215；1.6215。但我知道它们并不完全相等，因为

```
var_dump($a === $b); 
```

评估为假；

为什么不`var_dump()`打印内部值？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-10T11:54:10.337

在 PHP 中，浮点数的打印值取决于 PHP 配置的“精度”。

你可以改变它：

```
ini_set('precision', YOUR_DESIRED_PRECISION_AS_INTEGER); 
```

例如与：

```
ini_set('precision', 18); 
```

您的号码可能会显示如下内容：

> 浮动 1.62149999999999994
> 
> 浮动 1.6214999999999995

So now the difference between them is clearer.

So your delta may be: $delta = 0.00000000000001; It really depends of the precision you are looking for.

If you need to do exact mathematical calculations, do have a look at the [BC Math Functions.](http://php.net/manual/en/ref.bc.php)

* * *

**References / Sources**

[PHP - Floating point numbers](http://php.net/manual/pl/language.types.float.php)

[PHP - Floating point numbers - User Contributed Notes - deminy at deminy dot net](http://php.net/manual/pl/language.types.float.php#110766)

[Codepad](http://codepad.org/r2sWP5vc)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T12:17:38.587

If you don't want to edit your configuration file... you could use the `round(val, precision)` in your `some_function()` and `some_other_function()`. That way you can return the results to the precision you want. Check:
[http://php.net/manual/en/function.round.php](http://php.net/manual/en/function.round.php)

# android - 布局在运行时未正确显示

> ID：13800458
> 
> 赞同：0
> 
> 时间：2012-12-10T11:54:19.730
> 
> 标签：android, android-listview, expandablelistview

我使用 monodevelop ti android 开发。我想在从互联网加载的列表末尾添加一个加载项。我将此 xml 文件用于此提议：

```
 <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:orientation="vertical"
android:layout_width="fill_parent"
android:layout_height="125dp">
<RelativeLayout
    android:id="@+id/LoadingRealtive"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:padding="5dip"
    android:background="@drawable/List_Menu_Bg"
    >
    <ProgressBar
        android:id="@+id/loadingListItems"
        style="@style/GenericProgressIndicator"
        android:layout_centerVertical="true"
        android:layout_centerHorizontal="true" />
    <TextView
        android:text="Loading..."
        android:textAppearance="?android:attr/textAppearanceMedium"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_below="@id/loadingListItems"
        android:id="@+id/textView1"
        android:layout_centerHorizontal="true"
        android:textColor="#6b6b6b" />
</RelativeLayout>
<RelativeLayout
    android:id="@+id/MainRelative"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:padding="5dip"
    android:background="@drawable/List_Menu_Bg">...MyListItems    </RelativeLayout></LinearLayout> 
```

并在查看我的列表时使用了以下代码：

```
public override View GetView (int position, View convertView, ViewGroup parent)
    {
        View vi = convertView;

        try {

            if (convertView == null)
                vi = activity.LayoutInflater.Inflate (Resource.Layout.list_row, parent, false);

            RelativeLayout LoadingRelative=(RelativeLayout ) vi.FindViewById (Resource .Id.LoadingRealtive);
            RelativeLayout ContentRelative=(RelativeLayout ) vi.FindViewById (Resource .Id.MainRelative );

            if(Data [position ] == null)
            {
                ContentRelative .Visibility =ViewStates.Gone ;
                LoadingRelative .Visibility = ViewStates.Visible ;
            }else{
                ContentRelative .Visibility =ViewStates.Visible  ;
                LoadingRelative .Visibility = ViewStates.Gone  ;<...MyListCodes...>
            }
        } catch (Exception ex) {
            Common.HandleException (ex);
        }
        return vi;
    } 
```

它工作正常。问题是加载布局加载wrap_content，而它必须加载fill_parent。我不明白为什么会这样？有谁能够帮助我？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T12:03:10.977

当使用 linearlayout 作为 wrapperview 时，您应该将 android:weight 赋予其具有 fill_parent 属性的子视图。

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:orientation="vertical"
android:layout_width="fill_parent"
android:layout_height="125dp">
<RelativeLayout
    android:id="@+id/LoadingRealtive"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:padding="5dip"
    android:background="@drawable/List_Menu_Bg"
    android:weight="1"
    >
    <ProgressBar
        android:id="@+id/loadingListItems"
        style="@style/GenericProgressIndicator"
        android:layout_centerVertical="true"
        android:layout_centerHorizontal="true" />
    <TextView
        android:text="Loading..."
        android:textAppearance="?android:attr/textAppearanceMedium"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_below="@id/loadingListItems"
        android:id="@+id/textView1"
        android:layout_centerHorizontal="true"
        android:textColor="#6b6b6b" />
</RelativeLayout>
<RelativeLayout
    android:id="@+id/MainRelative"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:padding="5dip"
    android:background="@drawable/List_Menu_Bg"        
    android:weight="1" >
 </RelativeLayout> 
```

# c# - 欧元符号未在 Windows 窗体中查看

> ID：13800459
> 
> 赞同：0
> 
> 时间：2012-12-10T11:54:23.053
> 
> 标签：c#, .net, winforms, euro

我正在尝试使用以下代码在我的 Windows 窗体应用程序中打印欧元符号。它适用于所有其他字符和符号，但不显示 Euro(€)。

```
string input = ((char)128).ToString();
Font f = new System.Drawing.Font("Arial", 12f);
Graphics gr = this.CreateGraphics();
gr.DrawString(input, f, Brushes.Black, new PointF(0, 0)); 
```

128 - 是欧元符号的小数点有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-10T12:02:08.667

128 不是代表欧元符号的正确值。也许尝试：

```
string input = ((char)0x20AC).ToString(); 
```

因为`U+20AC`是欧元符号的 Unicode 代码点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T03:25:20.630

通过使用下面的代码，我在不使用 unicode 的情况下实现了打印欧元符号。

```
String input = Encoding.Default.GetString(new byte[] { 128 });
Font f = new System.Drawing.Font("Arial", 12f);
Graphics gr = this.CreateGraphics();
gr.DrawString(input, f, Brushes.Black, new PointF(0, 0)); 
```

这可能会帮助某人。

# iphone - windows safari 上的 iphone web 开发模式（检查元素）

> ID：13800460
> 
> 赞同：1
> 
> 时间：2012-12-10T11:54:25.147
> 
> 标签：iphone, safari, element, inspect

我找到了两种方法可以更轻松地为 iPhone 开发 Web 应用程序。

[http://moduscreate.com/enable-remote-web-inspector-in-ios-6/](http://moduscreate.com/enable-remote-web-inspector-in-ios-6/)

[http://webdesign.tutsplus.com/tutorials/workflow-tutorials/quick-tip-using-web-inspector-to-debug-mobile-safari/](http://webdesign.tutsplus.com/tutorials/workflow-tutorials/quick-tip-using-web-inspector-to-debug-mobile-safari/)

但我不能在 Windows 上做到这一点，因为 Windows 只有 Safari 5。你有什么想法我可以解决这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T18:04:16.073

恭喜你做了 iOS 开发！正如评论中所指出的，无论您是在开发本机应用程序还是 Web 应用程序，最好的选择是在 iOS 上开发时运行 Mac OS。就像您要开发一个需要运行 Microsoft Windows 的 Windows 应用程序一样，您将需要 Mac OS 来进行 iOS 开发。

祝你好运！

* * *

## 回答 #2

> 赞同：-6
> 
> 时间：2013-10-20T14:23:37.727

如果您想开发 Web 应用程序，这没什么大不了的，因为您所知道的只是一些 XHTML，我建议您使用 Dreamweaver 以获得更好的体验 :)

# perl - 如何在 xsd 中定义唯一约束？如何使用 xml-libxml 进行错误验证？

> ID：13800461
> 
> 赞同：2
> 
> 时间：2012-12-10T11:54:24.553
> 
> 标签：perl, xsd, xml-libxml

参考主题、 [Perl、LibXML 和 Schemas](https://stackoverflow.com/questions/658060/perl-libxml-and-schemas)

如果我想让 isbn 标签成为一个唯一的约束，那么 XSD 中需要的更改是什么。除此之外，如果我想使用 XML::LibXml 为唯一约束添加验证，我可以使用相同的代码实现验证检查吗？有人可以用示例示例解释 xml doc 中的唯一约束错误吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T12:51:18.167

*   关于强制密钥唯一性的 XSD 模式：使用`xs:unique`元素。[执行关联基数](http://www.xml.com/lpt/a/987)文章中的更多信息，并查看提供的[示例 XSD](http://www.xml.com/2002/06/26/examples/Restaurant.xsd.txt)；
*   Perl 中的 XML 模式验证可以使用[XML::Compile](https://metacpan.org/module/XML%3a%3aCompile)模块来实现，该模块将自身包装在 XML::LibXML 周围。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T12:57:38.210

xsd 允许出现项目的数量，将其添加到您的 isbn 元素 xsd 声明

```
minOccurs="0" maxOccurs="1" 
```

# wpf - WPF MVVM - 整个 ViewModel 上的共享数据对象

> ID：13800462
> 
> 赞同：0
> 
> 时间：2012-12-10T11:54:33.553
> 
> 标签：wpf, mvvm, properties

我构建了一个用户必须登录才能继续的应用程序。

已连接的用户，分配到当前 ViewModel 中的 CurrentAccountProperty。

现在，如何让与它及其数据交互的所有其他 ViewModel 可以访问这个当前连接的帐户？

例如，操纵其登录详细信息的 ViewModels，例如，将某些东西添加到其 RecentActivities 属性的 ViewModels 等等。

我应该持有对当前账户的引用吗？每个使用该对象的 ViewModel 中的 CurrentAccount 之类的东西？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T12:29:51.977

如果您使用（依赖注入/IOC 容器），我通常这样做的方式是使用依赖注入 - 创建一个 contextviewmodel 使其成为单例，然后将其注入需要使用它的每个 viewmodel 的构造函数中。因此，它在应用程序加载时创建，在您需要填充时填充，然后在整个应用程序中作为上下文持续存在。

因此，如果您使用的是 DI 和 IOC。如果您使用的是 Unity 之类的东西 - 使用 ControlledContainerLifetime() 选项使其成为单例。

您必须将 contextviewmodel 添加到容器中，并且（如果您使用统一等 - 解决它）所以第一次需要它时 - 注入它并更新您需要的登录属性。之后 - 如果您需要在另一个视图模型中使用它 - 只需使用 [Dependency] 属性或构造函数再次注入它。然后因为 contextviewmodel 是一个单例，它将包含与先前设置的属性相同的 contextviewmodel 实例。如果您需要代码示例，请告诉我。

只要您将此视图模型注入到您使用的任何其他类中 - 您就可以使用它，并且它将在您的应用程序的整个生命周期中持续存在。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T12:50:39.513

好吧，我通常`Export`在用户登录后设置（MEF）属性。

```
 /// <summary>
    /// Gets or sets LoggedUser.
    /// </summary>
    [Export]
    public UserInfo LoggedUser { get; set; } 
```

然后我`Import`到处都需要访问已登录的用户。

```
 /// <summary>
    /// Gets or sets LoggedUser.
    /// </summary>
    [Import]
    public UserInfo LoggedUser { get; set; } 
```

当然，您也可以使用任何 IoC 容器。当您谈论 MVVM 时，您应该使用某种 IoC。

# ruby - 在mac问题上安装指南针

> ID：13800475
> 
> 赞同：0
> 
> 时间：2012-12-10T11:56:25.690
> 
> 标签：ruby, macos, sass, compass-sass

我在mac上安装指南针。当我`gem install compass`在终端上运行命令时，我得到以下输出

![在此处输入图像描述](../Images/15ad5e7745339967b48e40e637a0c23d.png)

我已经`ruby 1.8.7 (2012-02-08 patchlevel 358) [universal-darwin11.0]`安装了红宝石。`ruby -v`在终端上发出命令后，我得到了这个输出。

如何解决上述问题或如何成功安装指南针？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T12:00:22.757

据我所知，在系统中使用 ruby​​ 时，您应该是安装 gems 的 root。使用 rvm 或类似工具而不是运行系统来运行 ruby​​ 是一个非常好的主意。

# composer-php - 作曲家更新忽略部门

> ID：13800481
> 
> 赞同：1
> 
> 时间：2012-12-10T11:57:05.000
> 
> 标签：composer-php

我如何告诉作曲家在运行更新时忽略某些部门？

我知道我可以更新某些软件包：

```
php composer.phar update vendor/package vendor/package2 
```

但是我想通过告诉作曲家更新除这些包之外的所有包来获得相反的效果。

在我的情况下，该命令将比上述命令短得多，因为我只想忽略一些实验包。而且我不想完全删除它，如果我从要求列表中清除捆绑包，这可能会发生。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-30T13:11:30.313

我认为目前这是不可能的。

但是，您可以尝试使用通配符缩短显式更新调用：

```
php composer.phar update doctrine/* 
```

如此处所述：http: [//getcomposer.org/doc/03-cli.md#update](http://getcomposer.org/doc/03-cli.md#update)

但是如果 composer 检测到，composer 会询问您是否要保留本地更改。

> ```
> The package has modified files:
> D code/controller/yourFile.php
> Discard changes [y,n,v,s,?]? 
> ```

您也可以使用 composer 中的 git repos 的 stash/apply 机制。 [https://github.com/composer/composer/pull/1188](https://github.com/composer/composer/pull/1188)

也很有帮助：
[Composer：直接在供应商包中开发](https://stackoverflow.com/questions/12624653/composer-develop-directly-in-vendor-packages)

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2017-02-06T08:23:30.673

也许当时不可能，但现在你可以这样做

```
composer update --ignore-platform-reqs vendor/package 
```

# asp.net - 在我的网络应用程序中访问 \\replace_with_server_name\PIPE\sql\query 的所有尝试是什么？

> ID：13800482
> 
> 赞同：3
> 
> 时间：2012-12-10T11:57:04.633
> 
> 标签：asp.net, .net, azure

我有一个 ASP.NET Web 应用程序，它使用带有 Telerik 控件和其他一些库的 Web 表单，在 Windows azure 上运行，并使用 sql azure。我正在使用 Process Monitor 来查看应用程序启动期间机器上发生的情况（试图诊断为什么初始启动需要大约 1 分钟，但这是一个单独的问题）。我从托管我的应用程序池的 w3wp.exe 进程中看到许多 CreateFile 事件，这些事件具有 Path =`\\replace_with_server_name\PIPE\sql\query`和 Result = `BAD NETWORK PATH`。这些是从哪里来的！？

我搜索了我的源代码，但在任何地方都找不到 replace_with_server_name。我将尝试搜索解决方案的所有引用的 dll，但有人认出这条路径并建议它可能来自哪里吗？

请注意，这`\\replace_with_server_name\PIPE\sql\query`是我在 Process Monitor 中看到的确切路径——我没有出于这个问题的目的对其进行修改。我猜我正在使用的一些库有这个值作为默认值，或者类似的东西。

更新 -

我搜索了我的 bin 目录中的所有 dll 和配置文件，以及 .NET Framework 目录中的所有 dll 以及 .NET Framework\Config 目录中的所有配置文件，但没有找到“replace_with_server_name”任何地方。我还搜索了各种位置，例如 c:\windows\system32 中的所有 .dll，c:\windows\Microsoft.NET 中的所有文件，但没有运气。关于我可以查看的其他地方的任何想法？我使用 HxD 编辑器进行了一些搜索，然后我找到了 PSPad，它将对多个文件进行十六进制搜索 - 更快。我使用 Windows、ANSI、UTF-8、UTF-16 LE 和 UTF-16 BE 进行了搜索，但没有运气......尽管我可能错过了几个变体。这个文本肯定在某个地方！？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-16T23:10:26.870

`CreateFile`Win32 API 用于打开许多流，包括命名管道。在我看来，您的代码中的某些内容正在尝试创建与 SQL Server 的命名管道连接，但连接字符串中指定的服务器名称默认为“replace_with_server_name”。

您可能需要查看配置文件和/或任何描述您要连接的 SQL 服务器名称的代码，并确保指定正确的服务器名称。

HTH。

# log4j - 将 logAnalyzer 与 log4j syslog appender 一起使用

> ID：13800487
> 
> 赞同：0
> 
> 时间：2012-12-10T11:57:16.637
> 
> 标签：log4j, syslog, rsyslog

我正在尝试将 syslog 消息从我的 Web 应用程序发送到 RSYSLOG，然后在 logAnalyzer 中查看它们。我设法查看日志，但主表中未显示以下字段：Facility、Sevirty、ProcessID。它们确实出现在消息中，但它们的列是空的。

我应该以什么格式向他们发送消息，以便 logAnalyser 能够正确解析它？我正在寻找正确的 log4j.appender.SYSLOG_LOCAL1.layout.conversionPattern 字符串以放置在我的 log4j.xml 文件中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-16T09:04:38.787

这是我的 log4j.properties 文件。我使用 LOCAL1 作为 SYSLOG 工具：

```
log4j.rootLogger=DEBUG, R, stdout ,SYSLOG_LOCAL1

log4j.appender.R=org.apache.log4j.RollingFileAppender
log4j.appender.R.File=${CATALINA_HOME}logs/mylweb.log
log4j.appender.R.MaxFileSize=10MB
log4j.appender.R.MaxBackupIndex=100
log4j.appender.R.layout=org.apache.log4j.PatternLayout
log4j.appender.R.layout.ConversionPattern=%p %t %c - %m%n

log4j.appender.stdout=org.apache.log4j.ConsoleAppender
log4j.appender.stdout.layout=org.apache.log4j.PatternLayout
log4j.appender.stdout.layout.ConversionPattern=%d %p [%c] - <%m>%n

log4j.category.org.springframework=INFO
log4j.category.org.directwebremoting=INFO
log4j.category.org.apache.http=INFO

log4j.appender.SYSLOG_LOCAL1=org.apache.log4j.net.SyslogAppender
log4j.appender.SYSLOG_LOCAL1.threshold=DEBUG
log4j.appender.SYSLOG_LOCAL1.syslogHost=localhost
log4j.appender.SYSLOG_LOCAL1.facility=Local1
log4j.appender.SYSLOG_LOCAL1.facilityPrinting=true
log4j.appender.SYSLOG_LOCAL1.layout=org.apache.log4j.PatternLayout
log4j.appender.SYSLOG_LOCAL1.layout.conversionPattern=%d %p [%c] - %m%n 
```

# visual-foxpro - 如何在visual fox pro中跳过读取命令

> ID：13800491
> 
> 赞同：0
> 
> 时间：2012-12-10T11:57:24.237
> 
> 标签：visual-foxpro

我通过调用一个旧的 vfp 程序`DO WITH PARA COMMANDS`

当命令执行时，它会显示一个表单并等待（读取命令）

我可以通过编程跳过这个阅读吗？这样它就不会等待..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T13:05:20.217

听起来像一个带有显式`"READ"`命令的非常旧的程序......如果你只是注释掉读取的内容，那对你有用吗？您是否试图以其他方式绕过基于参数的某些功能并让该功能继续运行？如果是这样，您可以`IF`只在需要它停止的条件下放置一个读取。

此外，如果表单是 a `"MODAL" (WindowState = Modal)`，它将保持在该表单上，直到它被关闭（或设置为隐藏）并返回调用源以继续执行。

显示表单的一些上下文，过程可能有助于其他选项。

# php - 检测移动设备，然后添加单独的样式表

> ID：13800492
> 
> 赞同：0
> 
> 时间：2012-12-10T11:57:31.647
> 
> 标签：php, mobile, stylesheet

在检测移动设备和平板电脑设备时，我在添加单独的样式表时遇到了一些问题。我目前在我的头文件顶部有以下内容来检测移动设备。

```
<?php if(strstr(strtolower($_SERVER['HTTP_USER_AGENT']), 'mobile') || strstr(strtolower($_SERVER['HTTP_USER_AGENT']), 'mobi') || strstr(strtolower($_SERVER['HTTP_USER_AGENT']), 'android')) { $browser = 'mobile'; } ?> 
```

但是，当我在头部标签中调用以下内容时，由于某种原因不会调用样式表。

```
<?php if($browser == 'mobile'){ ?><link rel="stylesheet" type="text/css" href="<?php bloginfo('template_directory'); ?>/stylesheets/mobile.css" /><?php } ?> 
```

我已经通过添加测试了我在这篇文章中编写的第一个 php 代码`echo 'This is a mobile browser';`，这显示得很好，所以第一个是工作的。只是不知道为什么不调用样式表。

这是 mobile.css 中一些 css 样式的示例

```
div{
clear:both !important;
display:block !important;
width:100% !important;
float:none !important;
margin:0 !important;
padding:0 !important;
position: static !important;
} 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T12:02:02.480

1.  使用更通用的东西，例如：[http ://code.google.com/p/php-mobile-detect/](http://code.google.com/p/php-mobile-detect/)
2.  使用 Firebug 或类似工具查看样式表路径是否正确并被浏览器识别。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T12:08:30.467

您还没有提到使用 CSS 媒体查询选择 CSS 的问题。他们有缺乏吗？

*   [http://webdesignerwall.com/tutorials/css3-media-queries](http://webdesignerwall.com/tutorials/css3-media-queries)
*   [将媒体查询用于移动设计的最佳方式](https://stackoverflow.com/questions/7364109/best-way-to-use-media-queries-for-mobile-designs)
*   [http://mobile.smashingmagazine.com/2010/07/19/how-to-use-css3-media-queries-to-create-a-mobile-version-of-your-website/](http://mobile.smashingmagazine.com/2010/07/19/how-to-use-css3-media-queries-to-create-a-mobile-version-of-your-website/)

# java - 如何端到端链接 ASM MethodVisitor

> ID：13800496
> 
> 赞同：0
> 
> 时间：2012-12-10T11:57:49.320
> 
> 标签：java, java-bytecode-asm

我正在尝试在 ASM 中实现一个转换，该转换需要对每种方法进行两次传递。第一个收集关于哪里需要插桩的信息（与跳转目标有关，这就是我需要两次通过的原因），第二个完成收集的信息并添加插桩。这也意味着我必须在开始第二遍之前完成第一遍（即处理所有指令）。这就是为什么手册中讨论的正常链接模式不起作用的原因。

我的问题是：有没有一种优雅而方便的方法来做到这一点？

到目前为止，我能想到的唯一解决方案是在第一个访问者中从 visitEnd() 调用第二个访问者。轮廓看起来像这样

```
public class Pass1Visitor extends MethodVisitor {
  ...
  public void visitEnd() {
    //do stuff the call the second visitor
    thisMethodNode.accept( new Pass2Visitor() );
  }
} 
```

我不太喜欢这个解决方案，因为我怀疑将来我将不得不链接更多的访问者，并且我可能希望能够挑选。这真的是不可能的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T04:35:20.713

如果您需要两次通过字节码，这就是您使用 ASM 的方式。树包（即 MethodNode）将保存所有访问事件，并在您调用 accept() 方法时可以重播它们。内联创建下一个访问者是一个坏主意，但是传递访问者并没有错。请参阅关于 ASM的[AOSD.07 论文](http://asm.ow2.org/current/asm-transformations.pdf)中“内联方法”部分的 JSRInlinerAdapter 的实现或示例[。](http://asm.ow2.org/asm40/javadoc/user/org/objectweb/asm/commons/JSRInlinerAdapter.html)

因此，您的示例将如下所示：

```
public class Pass1Visitor extends MethodNode {
  MethodVisitor nextVisitor;

  public Pass1Visitor(MethodVisitor nextVisitor) {
    this.nextVisitor= nextVisitor;
  }

  ...

  public void visitEnd() {
    //do stuff the call the second visitor
    thisMethodNode.accept( nextVisitor );
  }
} 
```

# json - 要求 Hogan 以及如何从 JSON 呈现 html 实体

> ID：13800502
> 
> 赞同：5
> 
> 时间：2012-12-10T11:58:10.017
> 
> 标签：json, requirejs, hogan.js

我正在为我的模板使用 Hogan js，并且需要 js 作为模块加载器。拥有必要的库，例如 jquery js、hogan js、require js。

index.html 在下面

```
<!DOCTYPE HTML>
<html lang="en-US">
<head>
    <meta charset="UTF-8">
    <title>RequireJS - AMD</title>
    <script data-main="main" src="require.js"></script>

    <!-- Template -->
    <script id="tmpl-heading" type="text">
        <h3>{{heading}}</h3>
        <p>{{article}}</p>
    </script>
</head>
<body>
</head>
<body>
    <div id="heading"></div>
</body>
</html> 
```

主要的js在下面，

```
require(['jquery', 'hogan'], function($, hogan){
        var headingData = {
            heading: "Some heading goes here",
            article: "<a href='http://www.lipsum.com'>Lorem ipsum</a> dolor sit amet, consectetur adipiscing elit. Donec varius, velit pulvinar sollicitudin auctor, nibh nibh mattis diam, vel elementum tortor urna ac diam. Sed tellus neque, gravida nec facilisis et, pellentesque quis enim."
        };

        var hSource = $("#tmpl-heading").html();

        var hTemplate = Hogan.compile(hSource);

        var hData = hTemplate.render(headingData);

        $("#heading").html(hData);

        //$("#heading").html(headingData.article);
}); 
```

**我的问题：**在浏览器上，锚标记中的文本未呈现为链接并呈现为文本。

但是，如果我不使用 hogan 等类似下面的内容，则结果符合预期。链接正确呈现。

```
require(['jquery', 'hogan'], function($, hogan){
        var headingData = {
            heading: "Some heading goes here",
            article: "<a href='http://www.lipsum.com'>Lorem ipsum</a> dolor sit amet, consectetur adipiscing elit. Donec varius, velit pulvinar sollicitudin auctor, nibh nibh mattis diam, vel elementum tortor urna ac diam. Sed tellus neque, gravida nec facilisis et, pellentesque quis enim."
        };

       $("#heading").html(headingData.article);
}); 
```

请指出我在使用 Hogan 时需要进行的必要更改（我确定我一定错过了一些重要的部分，但无法弄清楚），我应该能够将前端的锚点呈现为链接。提前致谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2015-07-03T06:16:13.207

如果要输出 html，请使用三重花括号。{{{html}}}

来自文档：

默认情况下，所有变量都是 HTML 转义的。如果要呈现未转义的 HTML，请使用三重胡须：{{{name}}}。

您还可以使用 & 取消转义特定变量。

[https://github.com/janl/mustache.js/](https://github.com/janl/mustache.js/)

# css - CSS：获取内部的每个元素 并为其赋值？

> ID：13800503
> 
> 赞同：-2
> 
> 时间：2012-12-10T11:58:26.820
> 
> 标签：css, css-selectors

我有一个明确的风格：

```
#style p {
    padding:10px;
} 
```

我不知道 p 里面会有什么元素。有没有办法说 p 内的所有元素也应该有 10px 的填充？就像是：

```
#style p everything {
    padding:10px;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-10T12:02:00.243

您可以使用通用选择器`*`

```
#style p * 
{
    padding:10px;
} 
```

它的字面意思是“一切”，所以这个选择器将选择你的 p 中的任何和所有元素。:)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-10T11:59:16.587

**习惯了这个**

```
#style p * {
    padding:10px;
} 
```

# titanium - 用钛在地图上画圆

> ID：13800504
> 
> 赞同：2
> 
> 时间：2012-12-10T11:58:30.163
> 
> 标签：titanium, titanium-mobile

android开发人员如何在钛中使用mapview在地图上绘制圆圈

```
var lat = 23.027608;
var lng = 72.551994;

var latlng = new google.maps.LatLng(lng, lat);
var latlng  = new g
// 200km radius
var circle = new google.maps.Circle({
radius : 200 * 1000,
center : latlng
});
circle.setCenter(map.getCenter());
circle.setMap(map); var lat = 23.027608;
var lng = 72.551994;

var latlng = new google.maps.LatLng(lng, lat);
var latlng  = new g
// 200km radius
var circle = new google.maps.Circle({
radius : 200 * 1000,
center : latlng
});
circle.setCenter(map.getCenter());
circle.setMap(map); 
```

在未找到谷歌时显示错误

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T00:33:20.610

该示例代码并非来自 Titanium（实际上，它看起来一点也不像 Titanium 代码）。

文档可以免费回答您的问题。

[http://docs.appcelerator.com/titanium/2.1/#!/api/Titanium.Map](http://docs.appcelerator.com/titanium/2.1/#!/api/Titanium.Map)

# internet-explorer-7 - IE7 在标准模式下忽略样式，但在 Quirks 模式下看起来很棒

> ID：13800505
> 
> 赞同：0
> 
> 时间：2012-12-10T11:58:35.127
> 
> 标签：internet-explorer-7

我遇到了一个问题，即 IE 7 样式在 Quirks 模式下看起来大多正确，但在标准模式下它忽略或看不到许多样式。quirks 模式版本看起来更接近它在 Chrome 和 Firefox 中的外观。

**更新**

我发现该文件在 CSS 文件中存在语法错误，导致 IE 7 忽略 CSS 中该点以下的所有内容。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T12:06:53.120

IE 7 呈现 Web 文件的方式与其他浏览器不同（其他版本的 IE 也是如此）。

要解决这个问题，您需要对每个 IE 版本使用 css hack：

```
<!--[if IE 7]>
    <link rel="Stylesheet" type="text/css"  href="styles/ie7_styles.css" />
<![endif]-->
<!--[if IE 8]>
    <link rel="Stylesheet" type="text/css"  href="styles/ie8_styles.css" />
<![endif]-->
<!--[if IE 9]>
    <link rel="Stylesheet" type="text/css"  href="styles/ie9_styles.css" />
<![endif]--> 
```

# java - 尝试在 Eclipse 下运行检票口应用程序时出错

> ID：13800508
> 
> 赞同：0
> 
> 时间：2012-12-10T11:58:58.473
> 
> 标签：java, eclipse, wicket

我正在尝试使用 wicket 构建 Web 应用程序。但是每当我尝试运行时，都会出现以下错误

```
 SEVERE: StandardWrapper.Throwable java.lang.NoSuchMethodError:
 org.apache.wicket.util.lang.Args.notNull(Ljava/lang/Object;Ljava/lang/String;)V
    at
 org.apache.wicket.request.resource.ResourceReference.<init>(ResourceReference.java:73)
    at
 org.apache.wicket.request.resource.ResourceReference.<init>(ResourceReference.java:89)
    at
 org.apache.wicket.request.resource.PackageResourceReference.<init>(PackageResourceReference.java:69)
    at
 org.apache.wicket.extensions.ajax.markup.html.form.upload.UploadProgressBar.<clinit>(UploadProgressBar.java:110)
    at
 org.apache.wicket.extensions.ajax.markup.html.form.upload.UploadProgressBar$ComponentInitializer.init(UploadProgressBar.java:92)
    at org.apache.wicket.extensions.Initializer.init(Initializer.java:36)
    at
 org.apache.wicket.Application.callInitializers(Application.java:788)
    at
 org.apache.wicket.Application.initializeComponents(Application.java:625)
    at
 org.apache.wicket.protocol.http.WicketFilter.init(WicketFilter.java:575)
    at
 org.apache.wicket.protocol.http.WicketServlet.init(WicketServlet.java:194)
    at javax.servlet.GenericServlet.init(GenericServlet.java:160)   at
 org.apache.catalina.core.StandardWrapper.initServlet(StandardWrapper.java:1266)
    at
 org.apache.catalina.core.StandardWrapper.loadServlet(StandardWrapper.java:1185)
    at
 org.apache.catalina.core.StandardWrapper.load(StandardWrapper.java:1080)
    at
 org.apache.catalina.core.StandardContext.loadOnStartup(StandardContext.java:5027)
    at
 org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:5314)
    at
 org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)
    at
 org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1559)
    at
 org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1549)
    at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:303)
    at java.util.concurrent.FutureTask.run(FutureTask.java:138)     at
 java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
    at
 java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
    at java.lang.Thread.run(Thread.java:619) 
```

任何人都可以解释错误的原因吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T08:56:49.970

由于您使用的是 Wicket-Extensions，因此请确保所有 Wicket 依赖项的版本匹配。即，如果一些额外的依赖项尚未更新，您应该降级您的主要 Wicket 版本。

# python - 无法使用子目录中的 ConfigParser 加载相关配置文件

> ID：13800515
> 
> 赞同：34
> 
> 时间：2012-12-10T11:59:17.737
> 
> 标签：python

我有以下目录结构：

```
my_program/
       foo.py
       __init__.py # empty
       conf/
          config.cfg
          __init__.py 
```

在 foo.py 我有这个：

```
import sys 
#sys.path.append('conf/')
import ConfigParser

config = ConfigParser.ConfigParser()
config.read( 'conf/config.cfg' ) 
```

在`conf/__init__.py`我有

```
__all__ = ["config.cfg"] 
```

我收到此错误，`foo.py`因为我可以通过提供完整路径来修复，但不是在我刚刚输入`conf/config.cfg`但我希望相对路径工作时：

```
ConfigParser.NoSectionError 
```

这实际上意味着无法加载文件（因此无法读取该部分）。

我试过评论/取消评论`sys.path.append('conf/')`，`foo.py`但它没有做任何事情。

有任何想法吗？

* * *

## 回答 #1

> 赞同：56
> 
> 时间：2012-12-10T12:04:20.803

路径是相对于*当前工作目录*的，它通常是您运行程序的目录（但当前目录可以由您的程序 [或模块] 更改，它通常*不是*您的程序文件的目录）。

`__file__`一个解决方案是通过Python 解释器为您创建的变量自动计算文件的路径`foo.py`：

```
import os
config.read(os.path.join(os.path.dirname(__file__), 'conf', 'config.cfg')) 
```

解释：`__file__`每个程序（模块）的变量都包含它的路径（可能是相对于加载时的当前目录，我猜——我在 Python 文档中找不到任何结论性的东西——例如，当`foo.py`从它自己的导入时会发生这种情况目录）。

这样，无论当前工作目录是什么，无论您将包放在哪里，导入都可以正常工作。

PS：旁注：`__all__ = ["config.cfg"]`不是你想要的：它告诉 Python 当你做`from conf import *`. 它应该被删除。

PPS：如果代码在加载配置读取模块和读取配置文件之间更改了当前工作目录，那么在更改当前目录之前，您需要先存储配置文件的*绝对*路径（带`os.path.abspath()`） , 这样即使在当前目录更改后也能找到配置。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2020-03-09T15:44:44.907

您可以`os`在 python 中使用包来导入配置文件的绝对或相对路径。这是一个具有相对路径的工作示例（我们假设在您的 python 脚本文件夹的子目录中`config.ini`的文件夹名称中）：`configuration`

```
import configparser
import os

path_current_directory = os.path.dirname(__file__)
path_config_file = os.path.join(path_current_directory, 'configuration', config.ini)
config = configparser.ConfigParser()
config.read(path_config_file) 
```

* * *

## 回答 #3

> 赞同：-5
> 
> 时间：2019-10-22T17:13:07.427

只需从变量加载路径，为什么这么复杂？

```
 from configparser import ConfigParser

 prsr=ConfigParser()
 configfile="D:\Dummy\DummySubDir\Dummy.ini"
 prsr.read(configfile)
 print(prsr.sections()) 
```

# android - 获取人与相机之间的距离

> ID：13800516
> 
> 赞同：1
> 
> 时间：2012-12-10T11:59:23.500
> 
> 标签：android, camera, android-camera

我想知道人形相机的距离。我正在使用安卓摩托罗拉平板电脑。

我正在使用 Android 的相机 API - API 级别 14。

**我正在使用以下公式：**

```
objectDistnance = ((objectheight(pixel) * focal-length(mm)) / imageheight(pixel); 
```

imageHeight 是我的预览屏幕的高度；
我从相机 api 获得的焦距：4.42 毫米；
我以毫米为单位输入的物体高度：1620mm

我想计算人与相机的距离。

通过使用这个公式，我得到了错误的距离，它给了我 60 毫米，但实际上它超过了 2500 毫米

所以请有人帮我解决这个问题我使用正确的公式吗？

我应该怎么做才能获得人与相机的正确距离

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T12:27:45.097

从[这里](https://photo.stackexchange.com/questions/12434/how-do-i-calculate-the-distance-of-an-object-in-a-photo)我得到以下公式：

```
distance to object (mm) = focal length (mm) * real height of the object (mm) * image height (pixels)
                          ---------------------------------------------------------------------------
                          object height (pixels) * sensor height (mm) 
```

因此，您似乎没有包含足够的参考变量。

让我们假设以下内容：

```
Focal Length: 4,42mm
Real Height of object: 1620mm
Image Height: 2048px
Object Height: 1024px
Sensor height: 24mm

4.42mm * 1620mm * 2048px
-----------------------
1024px * 24mm 
```

这样做的结果是`1193 mm` 因为我不知道你的所有变量，所以我无法重新计算你的情况。

*编辑* 我刚刚使用我的三星 Galaxy S 使用以下值检查了这个公式：

```
3.79mm focal length 
100mm real object height
2592px image height
1200px object height on image
4.54mm sensor height 
```

我从大约 200 - 250 毫米远的地方拍了一张照片（我没有测量确切的距离）。这个计算的结果是~200mm，适合这个测试。

# kendo-ui - 如何将 Kendo 网格与列模板一起使用

> ID：13800520
> 
> 赞同：1
> 
> 时间：2012-12-10T11:59:40.667
> 
> 标签：kendo-ui, kendo-grid

我正在尝试根据[此处的示例](http://docs.kendoui.com/getting-started/using-kendo-with/aspnet-mvc/helpers/grid/configuration#razor)将操作链接放置到网格单元中：

```
columns.Template(@<text>
    @Html.ActionLink("Edit", "Home", new { id = p.ProductID })
</text>); 
```

但没有成功。
由于示例中的错误，它无法编译。我试图替换为：

```
columns.Template(p => @<text>
    @Html.ActionLink("LinkTitle", "Edit", "Home", new { id = p.ProductID })
</text>); 
```

并得到：

> CS0201：只有赋值、调用、递增、递减、等待和新对象表达式可以用作语句

然后我尝试了：

```
columns.Template(p => {
    Html.ActionLink("LinkTitle", "Edit", "Home", new
    {
        id = p.ProductID
    });
}); 
```

并得到：

> System.NotSupportedException

那么我在哪里可以找到一个**稳定**而完整的使用 Kendo UI 网格的列模板的示例？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-10T13:56:24.537

您需要`item`在剃刀模板代表中使用。它是隐式变量名。将您的代码更改为：

```
columns.Template(@<text>
    @Html.ActionLink("Edit", "Home", new { id = item.ProductID })
</text>); 
```

您链接到的帮助主题是错误的，将很快修复。

# android - 使用 Google OAuth 2.0 进行 API 身份验证

> ID：13800524
> 
> 赞同：1
> 
> 时间：2012-12-10T11:59:53.213
> 
> 标签：android, api, authentication, oauth-2.0

我想开发一个可以从 android 应用程序访问的 REST API，但我需要授权客户端应用程序的用户。一个简单的解决方案是要求用户注册我的服务，然后使用该用户名/密码成功调用 REST API。但是，我更愿意坚持使用最先进的技术，这些技术似乎结合了注册的便利性和更好的安全性。因此，我决定与 Google OpenID 或 OAuth 2.0 集成以进行用户身份验证和授权。我知道这两个术语的区别和相应的技术，但我也发现使用 OAuth 2.0 的身份验证包括授权步骤。

在发布到这里之前，我做了很多研究，这让我找到了一个非标准的解决方案，我将在这里向您介绍。关于我的案例的一些背景知识：Rest API 将提供一些特定于应用程序的数据，这些数据可供移动应用程序用户使用，但应用程序的用户需要被唯一标识并被限制为一定数量的调用。

使用与 Android 应用程序用户关联的 Google 帐户似乎是与身份验证机制轻松集成的最佳选择。但是，客户端不会访问 Google API，而是访问我们自己的 REST API，而 REST API 不需要对 Google API 进行任何调用。但是使用Android SDK的AccountManager，我注意到我可以使用链接的google帐户的oauth access_token并将其发送到REST API，最后使用TokenInfo验证API来检查令牌的有效性。这样，我可以重用 Google 帐户的身份验证来授权和验证对我的 REST API 的访问。

如果这听起来不标准，或者您认为它在某种程度上违反了 OAuth 2.0 协议的规则/目的，您能否指导我正确使用该协议来满足我使用 Google 身份验证在我的 REST API 上对用户进行身份验证的要求？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T14:04:46.623

通常，OpenID 用于身份验证，OAuth 用于通过隐含身份验证和明确同意授权用户资源。

OAuth 授权您的应用程序（您的 REST API）从 Google 内的用户个人资料中检索某些信息。即使您不检索用户个人资料的任何详细属性，Google 中帐户的存在仍然是您可以用来在您的应用程序中建立唯一身份的信息。因此，您不会违反 OAuth 2.0 协议的任何“规则”或“目的”。

如果您的 android 应用程序可以访问设备上的 Google 帐户并使用 OAuth API，那么它应该适合您。如果您选择不使用令牌从 Google 中的用户个人资料中访问任何更多信息，则您没有使用更多信息，这是您的选择。但是，如果您想检索更多信息，则需要设置范围并获得用户的同意。

总之，您的方法会奏效，并且您将以有限的方式使用 OAuth。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-20T12:57:10.703

我在看同样的问题。到目前为止，我还没有找到任何合理的方法来做到这一点:(

您设法使其工作的解决方案（使用 AccountManager 获取令牌，将该令牌安全地发送到您的后端，然后使用此令牌通过 userinfo 服务进行验证，以检查电子邮件是否经过验证）有一个缺陷：它是仅限于匿名配额。您的后端在查询 userinfo 服务时没有使用 client_id 和 client_secret，您可能很快就会用完配额。

[您可以在API 控制台](https://code.google.com/apis/console/ "API 控制台")中注册您的应用程序以获取 client_id 和 client_secret，但它们与客户经理用于获取令牌的内容不匹配。

Google Play Services 为用户简化了开发流程和 UI 体验，但他们仍然会发出一个无效的令牌以传输到您的后端进行验证。在这种情况下，令牌是使用您的开发密钥签名获得的，因此它仅对您的应用程序有效。它相当于client_id或client_secret，但我不知道是否有办法以某种方式在服务器中复制此参数（前提是服务器可以访问用于签署Android应用程序的相同密钥）。

我正在考虑另外两种可能的解决方案：

*   在应用程序中使用 Web 服务器流。这有一个明显的缺点：您需要在应用程序中嵌入一个网站，用户体验远非理想。但它应该工作。
*   使用[Google App Engine 应用程序](http://blog.notdot.net/2010/05/Authenticating-against-App-Engine-from-an-Android-app)或 Google Cloud Endpoint 作为后端的入口，然后根据需要连接到您的真实后端。

任何其他想法或想法将不胜感激。

# php - 在 yii 中如何找出票数

> ID：13800528
> 
> 赞同：0
> 
> 时间：2012-12-10T12:00:04.300
> 
> 标签：php, yii

我正在 yii 中创建项目。我有 3 个表作为-poll Option Pollvote -PollId -optionId -voteId -PollQuestion -option -optionId -pollId -createdate

一个问题可能有 4 或 5 个选项。假设我有数据 - PollId=1 PollQuestion="Who is best Player" optionId=1 option=ABC optionId=2 option=DEF optionId=3 option=XYZ 现在这些选项的票数不同。我想显示最高投票选项。我设计了用于获取问题及其相关选项的功能 -

```
 public function actionpublishPollResult()
{
    $model=new Polloption();
    $json='{"pollId":1}';
    $obj=json_decode($json);
    $model->pollId=$obj->pollId;
    $record=Polloption::model()->findAllByAttributes(array('pollId'=>$model->pollId));
    foreach ($record as $option)
    {
        echo "option id :-".$option->optionId."<br>";

    } } 
```

它给我输出 - 选项 id ：-3 选项 id ：-5 选项 id ：-6 选项 id ：-7

那么现在如何访问单个 optionId 以及如何找出每个选项的票数。请帮我...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T00:06:11.503

如果您想按投票最多的选项排序，为什么不查询数据库中该 PollId 的所有选项，并按 votes_counter 列 DESC 排序？

然后在你看来只是循环它。

PS - 这是一个 php 设计问题。不是 yii 框架特定的问题。为了更好地获得帮助，您应该更好地标记您的问题。

# git - 如何从 master 合并到项目中，丢弃所有项目提交？

> ID：13800533
> 
> 赞同：1
> 
> 时间：2012-12-10T12:00:27.990
> 
> 标签：git

我有（或打算拥有！）这样的回购：

```
Master *-----*--*----------C---
        \                   \
Project1 \-*-------A----B----M2---A'--B'---
          \              \             \
Project2   \----------*---M1------------M2--- 
```

我想做合并M2**但**我希望完全**忽略****A**和**B。**然后，我将手动（例如挑选）重新创建**A'**和**B'**作为/如果有必要在来自 master 的新更改之上。

 ******Project2 基于 Master，但合并了 Project1 的更改。

期望的结果：

1.  我希望点**M2在文件方面是****C**的相同副本。

2.  我需要 Project1 有自己的线性历史，以便 Project2 可以从中合并。

上下文：Master 是 Drupal 的主要代码库。Project1 是我用来维护我希望与多个项目共享的特定补丁的分支。Project2（和许多其他）从 Project1 合并。

我考虑过：

1.  `git merge -s recursive -X theirs master``theirs`问题在于 AFAIK 只有在发生冲突时才会喜欢它。因此，如果 A 中的更改不冲突，它将出现在**M2**处，这意味着 A' 将不完整。

2.  `git revert B..A ; git merge C`这会起作用，但会给我留下一个混乱而漫长的历史。

3.  有`git merge -s ours`但似乎没有`git merge -s theirs`。

4.  我不想这样做，`git reset --hard C`因为这（我认为）会破坏将 Project1 合并到 Project2 的可能性。另一种方法是将 Project1 重新定位到 C 上，但同样，这意味着我无法合并到 Project2 中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T14:29:29.783

我会建议你反对你的计划——你试图愚弄 git。Git 不喜欢被愚弄。你也在“伪造”你的历史。M2、A' 和 B' 都应该是一个提交——合并。

但是，如果您想继续，请执行以下操作：

```
git merge --no-commit C
rm -rf *
git checkout C .
git commit 
```

如果您有任何要保留的 gitignored 文件，请在之前备份它们并在`rm`之后恢复它们。

或者，您也可以这样做（实际上更清洁）

```
git checkout C
git symbolic-ref HEAD refs/heads/Project1
git update-ref MERGE_HEAD C
git commit 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T14:57:29.523

这可以通过“管道”命令来完成：

```
$ git checkout Project1
$ git diff HEAD..master | patch -p1 
$ git add -A .
$ git commit-tree `git write-tree` -p master -p Project1 \
      -m "Merge to clean Master at v1.2"
0c5290081989cc28ff3977fbfe3951db7b7778b0
$ git reset --hard 0c5290081989cc28ff3977fbfe3951db7b7778b0 
```

`git diff HEAD..master`它将告诉我如何在一个大补丁中从我所在的位置（B **）**和我想成为的位置（**C**）开始，并且补丁当然会应用它。

`git add -A .`会将工作树中的所有更改添加到索引中。

然后我们使用下一行为此创建一个合并提交：`git-write-tree`从索引创建一个新的树对象，并将其 SHA1 作为参数输出到`git commit-tree`，它为它创建一个提交，它有两个父级，即 Project1 的当前负责人（**B**）和 master ( **C** )，并给它一个合适的消息。

Git 将创建提交对象，但不会更新任何分支以使用此提交。最后一行告诉 git，我们希望将当前分支 Project2 推进（快速转发）到它生成的提交 SHA1。

如有必要，您可以从那里重新创建（例如，可以尝试使用cherry-pick）补丁A'和B'。******

# javascript - HTML5 WebWorker 和 Rails 3 错误

> ID：13800538
> 
> 赞同：2
> 
> 时间：2012-12-10T12:00:44.923
> 
> 标签：javascript, ruby-on-rails-3

我正在尝试实现一个 HTML5 WebWorker，我正在使用 rails 3。我的 js 代码中有这个：

//当body(DOM)准备好时

```
$(function() { 
....
..
    //test html5 webworkers
    $('#test_html5_workers').click(function() {
      var worker=new Worker('play.js');
      worker.addEventListener('message', function(e) {
        console.log('Worker said: ', e.data);
      }, false);

      worker.postMessage('Hello World'); // Send data to our worker.
    });
..
....
)}; 
```

在另一个文件中我有这个（在 play.js 中）

```
self.addEventListener('message', function(e) {
  self.postMessage(e.data);
}, false); 
```

我目前收到此错误：

> 找不到脚本文件：play.js

我尝试过其他文件路径名，但没有成功。

任何想法为什么我得到这个，因为这两个文件都在同一个目录中，资产/javascripts？我正在使用 Firefox 17.0.1

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T17:14:09.273

javascript 文件 (play.js) 应该放在公用文件夹中，或者至少我是这样做的。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-10T13:34:29.230

这适用于我的。

```
(function() { 
    //test html5 webworkers
    $('#test').on('click', function(){
        if(window.Worker){
            var worker = new Worker('test.js');
            worker.onmessage = function(e){
                alert('worker said: ' + e.data);
            }
            worker.postMessage('start');
        }
    });
})();

//test.js
self.onmessage = function(e){
    if(e.data === 'start'){
        self.postMessage('booyeah');
    }
} 
```

# .net - 如何获取 winres.exe（.net 资源编辑器）工具？

> ID：13800539
> 
> 赞同：1
> 
> 时间：2012-12-10T12:00:44.557
> 
> 标签：.net, .net-4.0, .net-3.5, windows-xp

我想使用[Windows 窗体资源编辑器](http://msdn.microsoft.com/en-us/library/8bxdx003%28v=vs.90%29.aspx)，但在 C:\Program Files\Microsoft SDKs\Windows\v7.0A\bin 和 C:\Program Files\Microsoft SDKs\Windows\v6 中找不到 winres.exe 文件。 0A\bin 文件夹。我在整个磁盘中搜索了 winres.exe 文件，但它不存在。我已经重新安装了 .NET Framework 3.5，但它没有帮助。

我怎样才能得到这个文件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T12:08:00.287

您的意思是您已经安装了 .NET Framework SDK 还是仅安装了 Framework？它应该包含在 Framework SDK 中，一旦安装，您只需在命令提示符下键入`winres`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-08-21T05:06:43.787

如果您在 Win10 上使用 Visual Studio 2017，则打开`Developer Command Prompt for VS 2017`（Win​​+S 并输入相关关键字），`winres`无需调整环境即可访问。

# oracle-adf - af:query - 更改 where 子句

> ID：13800540
> 
> 赞同：0
> 
> 时间：2012-12-10T12:00:49.697
> 
> 标签：oracle-adf

在我的表单中，我有 af:query 基于视图。我还有一个复选框，指示从视图的“where 子句”中添加或删除 sql 语句。

例如：我的视图查询是“select * from employees where employees.kod_emp>0”我需要如果选中复选框，视图将如下所示：“select * from employees where employees.kod_emp>0 **and employees.kod_dept = :dept_id** " 并且当未选中该复选框时，视图将返回到原始查询。

我如何使用相同的 af:query 组件来实现它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T11:03:59.740

使复选框的“自动提交”属性为真并添加部分触发器。

# java - 使用递归实现编辑距离方法导致对象堆错误

> ID：13800541
> 
> 赞同：1
> 
> 时间：2012-12-10T12:00:57.387
> 
> 标签：java, recursion, heap-memory, dynamic-programming, edit-distance

```
 private static int editDistance(ArrayList<String> s1, ArrayList<String> s2) {
        if (s1.size()==0) {
            return s2.size();
        } 
        else if (s2.size()==0) {
            return s1.size();
        } 
        else {
            String temp1 = s1.remove(s1.size()-1);
            String temp2 = s2.remove(s2.size()-1);
            if (temp1.equals(temp2)) {
                return editDistance((ArrayList<String>)s1.clone(),(ArrayList<String>)s2.clone());
            } else {
                s1.add(temp1);
                int first = editDistance((ArrayList<String>)s1.clone(),(ArrayList<String>)s2.clone())+1;
                s2.add(temp2);
                s1.remove(s1.size()-1);
                int second = editDistance((ArrayList<String>)s1.clone(),(ArrayList<String>)s2.clone())+1;
                s2.remove(s2.size()-1);
                int third = editDistance((ArrayList<String>)s1.clone(),(ArrayList<String>)s2.clone())+1;
                if (first <= second && first <= third ) {
                    return first;
                } else if (second <= first && second <= third) {
                    return second;
                } else {
                    return third;
                }
            }
        }
    } 
```

例如，输入可以是`["div","table","tr","td","a"]`and `["table","tr","td","a","strong"]`，对应的输出应该是`2`。

我的问题是当任一输入列表的大小太大时，例如，列表中有 40 个字符串时，程序会产生`can't reserve enough space for object heap`错误。JVM 参数是`-Xms512m -Xmx512m`. 我的代码可能需要这么多堆空间吗？还是由于我的代码中的逻辑错误？

**编辑**：无论是否克隆列表，这种递归方法似乎都不起作用。有人可以帮助估计为我工作所需的总堆内存吗？我想这会令人震惊。无论如何，我想我必须改用动态编程方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T12:04:55.187

您在每次递归调用您的方法之前的`clone()`每个实例。`ArrayList`这实质上意味着您将获得整个列表的另一个副本及其每次调用的内容 - 它可以轻松地添加到非常大的内存量以实现大递归深度。

您应该考虑使用[`List#sublist()`](http://docs.oracle.com/javase/6/docs/api/java/util/List.html#subList%28int,%20int%29)而不是`clone()`，甚至向您的方法添加参数以将索引传递给一组初始`List`对象。

# android - 使用自定义数组适配器在android中编辑文本

> ID：13800543
> 
> 赞同：0
> 
> 时间：2012-12-10T12:01:00.923
> 
> 标签：android

我正在使用自定义数组适配器来显示一些产品的列表。在列表视图中有两个文本视图和一个编辑文本。当我单击它输入值时，编辑文本会集中在多个文本字段中。

我没有遇到实际问题。试了好几天了，请帮帮我。

```
<?xml version="1.0" encoding="utf-8"?>
    <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="horizontal" >

    <TextView
        android:id="@+id/txtBP"
        android:layout_width="match_parent"
        android:layout_height="fill_parent"
        android:layout_weight="1"
        android:gravity="center_vertical|center_horizontal"
        android:textColor="#000000"
        android:textSize="15sp" />

    <TextView
        android:id="@+id/txtMRP"
        android:layout_width="match_parent"`enter code here`
        android:layout_height="fill_parent"
        android:layout_weight="1"
        android:gravity="center_vertical|center_horizontal"
        android:textColor="#000000"
        android:textSize="15sp" />

    <EditText
        android:id="@+id/qty"
        android:layout_width="match_parent"
        android:layout_height="fill_parent"
        android:layout_weight="1"
        android:gravity="center_vertical|center_horizontal"
        android:hint="@string/texthint"
        android:inputType="number"
        android:maxLength="3" />

    </LinearLayout>

package com.example.order;

import android.app.Activity;
import android.content.Context;
import android.util.Log;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import android.widget.ArrayAdapter;
import android.widget.BaseAdapter;
import android.widget.EditText;
import android.widget.TextView;

    public class ModifiedAdapter extends BaseAdapter{

    Context context;
    int layoutResourceId;   
    Order data[] = null;`enter code here`

    public ModifiedAdapter(Context context, int layoutResourceId, Order[] data) {
        this.layoutResourceId = layoutResourceId;
        this.context = context;
        this.data = data;
    }

    @Override
    public View getView(int position, View convertView, ViewGroup parent) {
       // View row = convertView;
        OrderHolder holder = null;

        if(convertView == null)
        {
            LayoutInflater inflater = ((Activity)context).getLayoutInflater();
            convertView = inflater.inflate(layoutResourceId, parent, false);

            holder = new OrderHolder();
            holder.txtBP = (TextView)convertView.findViewById(R.id.txtBP);
            holder.txtMRP = (TextView)convertView.findViewById(R.id.txtMRP);
            holder.qty = (EditText)convertView.findViewById(R.id.qty);

            convertView.setTag(holder);
        }
        else
        {
            holder = (OrderHolder)convertView.getTag();
        }

        Order order = data[position];
        holder.txtBP.setText(order.BP);
        holder.txtMRP.setText(order.MRP);

        Log.d("data count : ", ""+getCount());

        return convertView;
    }

@Override
public int getCount() {
    // TODO Auto-generated method stub
    return data.length;
}

@Override
public Object getItem(int arg0) {
    // TODO Auto-generated method stub
    return arg0;
}

@Override
public long getItemId(int arg0) {
    // TODO Auto-generated method stub
    return arg0;
}

static class OrderHolder
{
    TextView txtMRP;
    TextView txtBP;
    EditText qty;
}

} 
```

上面提到的是我正在使用的 xml 和适配器 :) 而且我没有收到任何错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T12:31:54.060

替换你的 XML 并检查并告诉我

```
<TextView
    android:id="@+id/txtBP"
    android:layout_width="match_parent"
    android:layout_height="fill_parent"
    android:layout_weight="1"
    android:gravity="center_vertical|center_horizontal"
    android:textColor="#000000"
    android:textSize="15sp" />

<TextView
    android:id="@+id/txtMRP"
    android:layout_width="match_parent"
    android:layout_height="fill_parent"
    android:layout_weight="1"
    android:gravity="center_vertical|center_horizontal"
    android:textColor="#000000"
    android:textSize="15sp" />

<LinearLayout
    android:id="@+id/qtyLayout"
    android:layout_width="match_parent"
    android:layout_height="fill_parent"
    android:layout_weight="1"
     android:focusable="true" 
    android:focusableInTouchMode="true"  
    android:gravity="center_vertical|center_horizontal" >

    <EditText
        android:id="@+id/qty"
        android:layout_width="match_parent"
        android:layout_height="fill_parent"
        android:gravity="center_vertical|center_horizontal"
        android:hint="@string/texthint"
        android:inputType="number"
        android:maxLength="3" />
</LinearLayout> 
```

# html - 使用 html5 或 flash 在 Firefox 上播放流媒体视频

> ID：13800544
> 
> 赞同：0
> 
> 时间：2012-12-10T12:01:05.903
> 
> 标签：html, flash, firefox, video-streaming

我正在尝试在网络上流式传输视频文件。我的服务器是 httpd 2.2 runnin gon centos 5 64 位。到目前为止，它在 ie9、chrome、opera 上运行良好，但我在 firefox 上遇到了问题。我不能依赖用户安装某些插件。如果不支持，我希望视频能够在 html5 中播放，然后滚动到 Flash。以下是我拥有的当前代码。

```
<!DOCTYPE html>
<html>

<head>
<SCRIPT type="text/javascript" src="jquery-1.7.2.min.js"></SCRIPT>
<SCRIPT type="text/javascript" src="modernizr.custom.13466.js"></SCRIPT>
<script type="text/javascript" src="excanvas.js"></script>
<script type="text/javascript">

function supports_canvas() {
      return !!document.createElement('canvas').getContext;
    }

function supports_video() {
    console.log("supports video");
    console.log(document.createElement('video').canPlayType);
      return !!document.createElement('video').canPlayType;
    }

function supports_h264_baseline_video() {
      if (!supports_video()) { return false; }
      var v = document.createElement("video");
      return v.canPlayType('video/mp4; codecs="avc1.42E01E, mp4a.40.2"');
    }

function supports_ogg_theora_video() {
      if (!supports_video()) { return false; }
      var v = document.createElement("video");
      return v.canPlayType('video/ogg; codecs="theora, vorbis"');
    }

function supports_webm_video() {
      if (!supports_video()) { return false; }
      var v = document.createElement("video");
      return v.canPlayType('video/webm; codecs="vp8, vorbis"');
    }

</script>
</head>

<body>
    <script type="text/javascript">
$(document).ready(function() {  
    /*console.log("document ready");
    if ( !supports_video() ) { 
        console.log("false");   
        return false; 
    }
*/

    if (Modernizr.canvas) {
          // let's draw some shapes!
        } else {
          // no native canvas support available :(
        }
});
</script>

    <!-- first try HTML5 playback: if serving as XML, expand `controls` to `controls="controls"` and autoplay likewise -->
    <!-- warning: playback does not work on iOS3 if you include the poster attribute! fixed in iOS4.0 -->
    <video width="640" height="360" controls>
        <!-- MP4 must be first for iPad! -->
        <source src="movie.mp4" type="video/mp4" />
        <!-- Safari / iOS video    
        <source src="movie.ogv" type="video/ogg" />-->
        <!-- Firefox / Opera / Chrome10 -->
        <!-- fallback to Flash: -->
        <object width="640" height="360" type="application/x-shockwave-flash"
            data="movie.swf">
            <!-- Firefox uses the `data` attribute above, IE/Safari uses the param below -->
            <param name="movie" value="movie.swf" />
            <param name="flashvars"
                value="controlbar=over&amp;image=movie.jpg&amp;file=movie.mp4" />
            <!-- fallback image. note the title field below, put the title of the video there -->
            <img src="movie.jpg" width="640" height="360" alt="__TITLE__"
                title="No video playback capabilities" />
        </object>
    </video>
    <!-- you *must* offer a download link as they may be able to play the file locally. customise this bit all you want 
    <p>
        <strong>Download Video:</strong> Closed Format: <a
            href="movie.mp4">"MP4"</a> Open Format: <a href="movie.ogv">"Ogg"</a>
    </p>-->

</body>
</html> 
```

我已将以下内容放在 .htaccess 文件和 httpd conf

```
AddType video/mp4 mp4
AddType video/ogg ogg
AddType video/webm webm 
```

我还将以下内容加载到 httpd

```
AddHandler h264-streaming.extensions .mp4
LoadModule h264_streaming_module /usr/lib64/httpd/modules/mod_h264_streaming.so 
```

我得到的 Firefox 消息是：*firefox 没有支持格式的视频*

有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T13:06:55.763

火狐不支持 MP4。如果浏览器支持 HTML5 视频，它将寻找可以播放的文件。如果找不到，它不会自动回退到 Flash 版本，因此对于 Firefox（和 Opera，也不支持 MP4），您还需要提供 WebM 格式（如果是 Ogg你想支持 Firefox 3.6）。

# java - PhoneGap 在 android 和 iOS 上使用 java 类

> ID：13800550
> 
> 赞同：0
> 
> 时间：2012-12-10T12:01:39.867
> 
> 标签：java, android, ios

我可以在 Android 和 iOS 的 phonegap 中使用相同的 java 类吗？

例如，这个[例子](https://stackoverflow.com/questions/2727763/communication-between-android-java-and-phonegap-javascript)也适用于 iOS 吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T12:02:52.387

你根本不能在 iOS 上使用 Java。

您必须创建 Objective-C 代码来执行与 Java 类相同的操作，并且如果它们为 Phonegap 提供相同的接口，则至少可以共享 Javascript 代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T10:15:11.580

现在java可以在iOS上使用，请查看这个[链接](http://www.oracle.com/technetwork/developer-tools/adf/overview/adf-mobile-096323.html)。希望样品能回答你的问题。

# javascript - 将多个样式表应用于 selected.js 下拉列表？

> ID：13800559
> 
> 赞同：0
> 
> 时间：2012-12-10T12:02:18.477
> 
> 标签：javascript, jquery, jquery-chosen

我正在使用 selected.js 来实现 jQuery 下拉菜单... [https://github.com/harvesthq/chosen](https://github.com/harvesthq/chosen)

如果我想要多个样式不同的下拉菜单，有没有办法对每个下拉菜单应用不同的样式表？这里有一个线索，但我还没有弄清楚.. [https://github.com/harvesthq/chosen/issues/935](https://github.com/harvesthq/chosen/issues/935)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T16:50:39.257

如果 stof 的答案不起作用（来自提供的链接），我想您仍然可以将其包装在具有自定义类或 ID 的 div 中，不是吗？

```
<div class="myCustomStyledChosen">
    <select...
</div> 
```

然后在你的样式表中

```
.myCustomStyledChosen
{
    yourstyles..
} 
```

# spring - OpenSessionInView 的问题

> ID：13800561
> 
> 赞同：0
> 
> 时间：2012-12-10T12:02:20.273
> 
> 标签：spring, hibernate, lazy-loading, open-session-in-view

我已经为延迟加载实现了 Spring/Hibernate 的 OpenSessionInView 模式。我面临“没有 Sessoon”或“2 个或更多会话”的问题。如果我遗漏任何步骤，请告诉我：

以下是详细代码片段：

## Web.XML

```
 <context-param>
        <param-name>contextConfigLocation</param-name>
        <param-value>/WEB-INF/applicationContext.xml</param-value>
      </context-param>
  <listener>
    <listener-class>org.springframework.web.context.ContextLoaderListener</listener-class>
  </listener>
  <listener>
    <listener-class>org.springframework.web.context.request.RequestContextListener</listener-class>
  </listener>

      <filter>
        <filter-name>hibernateFilter</filter-name>
        <filter-class>org.springframework.orm.hibernate3.support.OpenSessionInViewFilter</filter-class>
        <init-param>
          <param-name>singleSession</param-name>
          <param-value>false</param-value>
        </init-param>
        <init-param>
          <param-name>flushModeName</param-name>
          <param-value>FLUSH_AUTO</param-value>
        </init-param>
        <init-param>
          <param-name>sessionFactoryBeanName</param-name>
          <param-value>sessionFactory</param-value>
        </init-param>
      </filter>

       <filter-mapping>
         <filter-name>hibernateFilter</filter-name>
         <url-pattern>/*</url-pattern>
         <dispatcher>REQUEST</dispatcher>
         <dispatcher>FORWARD</dispatcher>
       </filter-mapping> 
```

## 应用程序上下文.xml

```
<!-- Hibernate SessionFactory -->
<bean id="sessionFactory"
    class="org.springframework.orm.hibernate3.annotation.AnnotationSessionFactoryBean">
    <property name="dataSource" ref="dataSource" />
    <property name="packagesToScan"
        value="com.mypack.common.model, com.mypack.school.model" />
        .
        .
        <!-- Other properties -->
        .
</bean> 
```

## 客户.xhtml

XHTML 用户界面具有**显示客户代码的自动完成框**。自动完成查询使用 CompleteCustomer 方法，而 getCustomerbyCode 由转换器 bean 调用。

选择客户代码后，屏幕将由选定的客户详细信息填充。允许应用程序用户进行更改并将更新保存在数据库中。

## CustomerBean.java

```
@ManagedBean (name="customerBean")
@ViewScoped
public class CustomerBean implements Serializable {

    public List<Customer> completeCustomer(String query) {
        List<Customer> suggestions;

        suggestions = (List<Customer>) customerService.getCustomerslikeCodeOrName(query, authenticationBean.getTenantId());

        return suggestions;
    }

    public void saveCustomerDetails() {
        // Save or Update User Information in Database
        customerService.saveCustomer(custMaster);
        return;            
    } 
```

## CustomerServiceImpl.java

```
@Service("customerService")
@Transactional(readOnly = true, propagation=Propagation.REQUIRED)
public class CustomerServiceImpl implements CustomerService {

    @Autowired
    CustomerDAO custMasterDAO;

    @Override
    @Transactional(readOnly = false,propagation = Propagation.REQUIRED)
    public void saveCustomer(Customer custDetails) {
        custMasterDAO.saveCustomer(custDetails);
    }

    @Override
    public Customer getCustomerbyCode(String custCode, TenantId tenantId) {
        return custMasterDAO.getCustomerbyCode(custCode, tenantId);
    }

    @Override
    public List<Customer> getCustomerslikeCodeOrName(String custIDName, TenantId tenantId) {
        return custMasterDAO.getCustomerslikeCodeOrName(custIDName, tenantId);
    }
} 
```

## CustomerMasterDAO.java

```
 @SuppressWarnings("unchecked")
    @Override
    public List<Customer> getCustomerslikeCodeOrName(String custIDName, TenantId tenantId) {
        List<Customer> listCustomers = null;
        custIDName = "%" + custIDName + "%";

        Session session = SessionFactoryUtils.getSession(sessionFactory, false);
        Transaction tx = session.beginTransaction();

        try {   
            query = session.createQuery("from Customer " +
                    "where (custId like :codename " +
                    "or custFirstName like :codename " +
                    "or custMiddleName like :codename " +
                    "or custLastName like :codename)")
                .setParameter("codename", custIDName);
            listCustomers = query.list();

        } catch(Exception ex) {
            tx.rollback();
            System.out.println("*** getCustomerslikeCodeOrName ***" + ex.getMessage());
        }

        return listCustomers;
    }

    @SuppressWarnings("unchecked")
    @Override
    public Customer getCustomerbyCode(String custCode, TenantId tenantId) {
        List<Customer> list = null ;
        Query query;

        Session session = SessionFactoryUtils.getSession(sessionFactory, Boolean.FALSE);
        Transaction tx = session.beginTransaction();

        Filter sessionFilter = session.enableFilter("BankRecordFilter");
        sessionFilter.setParameter("bankCode", tenantId.getBankCode());

        try {
            query = session.createQuery("from Customer where custId = :custCode");
            list = query.setParameter("custCode", custCode).list();
        } catch (Exception ex) {
            tx.rollback();
            System.out.println("*** getCustomerbyCode ***" + ex.getMessage());
        }
        if (list == null || list.size() < 1){
//          System.out.println("No Records Found");
            return null;
        }
        return (Customer)list.get(0);
    }

    @Override
    public void saveCustomer(Customer custDetails) {
        Session session = getSessionFactory().getCurrentSession();  
        Transaction tx = session.beginTransaction();

        try {
            session.saveOrUpdate("bkCustomer", custDetails);
            session.getTransaction().commit();

        } catch (Exception e) {
            session.getTransaction().rollback();
            e.printStackTrace();
        }

    } 
```

表定义存储在 .hbm.xml 文件中。

我尝试了很多组合放置以下语句来获取会话： session = getSessionFactory().getCurrentSession(); 会话会话 = SessionFactoryUtils.getSession(sessionFactory, Boolean.FALSE);

也以不同的方式和不同的地点进行交易。我要么收到 No Session 的错误消息，要么收到两个或多个会话附加错误消息。

你能告诉我我的代码有什么问题吗？

问候，

希里什语

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T16:37:38.313

最后我可以使用 OpensessionInView。在这个问题上花了很多时间后，我观察到 LAZY 加载按预期工作，但是当我尝试保存日期时，Session 没有正确传播。

更新传播策略后，代码开始工作..这是更新的代码

```
@Transactional(readOnly = false,propagation = Propagation.NESTED)
@Override
    public void saveCustomer(Customer custDetails) {
        Session session = getSessionFactory().getCurrentSession();  
        Transaction tx = session.beginTransaction();

        try {
            session.saveOrUpdate("bkCustomer", custDetails);
            session.getTransaction().commit();

        } catch (Exception e) {
            session.getTransaction().rollback();
            e.printStackTrace();
        } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-15T20:59:28.377

您正在混合用于事务处理和编程事务处理的注释。看起来您的注释根本没有使用...

# silverlight - Silverlight 地图控制的长期替代品

> ID：13800562
> 
> 赞同：0
> 
> 时间：2012-12-10T12:02:37.057
> 
> 标签：silverlight, windows-phone-7, maps

微软正在回滚 Silverlight。我们非常喜欢他们的 silverlight 地图控制，但它没有在中国获得许可。关于替换的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T13:30:15.763

您可以将标准 Bing 地图组件与来自诺基亚地图或 OpenStreetMap 的数据一起使用。有关更多信息，请参阅[http://www.developer.nokia.com/Community/Wiki/Bing_map_API_with_Nokia_Map_and_OpenStreetMap](http://www.developer.nokia.com/Community/Wiki/Bing_map_API_with_Nokia_Map_and_OpenStreetMap)

# gwt - 有没有办法不向客户端公开方法？

> ID：13800564
> 
> 赞同：0
> 
> 时间：2012-12-10T12:02:40.967
> 
> 标签：gwt, rpc

我正在使用 GWT 2.5 和 RPC 在客户端和服务器之间交换信息。

我正在尝试定义扩展 RemoteService 的接口和另一个`CRUDService<T>`具有以下方法的接口（CRUD 方法）：

```
public Class<T> getDtoType(); 
```

但是此方法仅适用于服务器端的实现用户。

有没有办法不将此方法暴露给客户端（瞬态方法）？

否则我会得到一个错误，当我编译项目时，说`Class<T>`does not `implements Serializable`nor `IsSerializable`。

有人可以帮我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T15:08:21.853

不可能。至少不是没有破解 gwt-dev 和 rpc 相关代码来生成服务代理。

```
1) SampleService extends RemoteService, CrudService<String>
2) SampleService extends CrudService<String> ( where CrudService extends RemoteService ) 
```

在上述两种情况下，异步接口首先是婴儿床。如果你修复它，那么 GWT 代理生成器就会对序列化接口进行研究。

# java - 每隔几秒刷新一次 ListView

> ID：13800565
> 
> 赞同：0
> 
> 时间：2012-12-10T12:02:46.250
> 
> 标签：java, android

> **可能重复：**
> [使用计时器更新列表 UI](https://stackoverflow.com/questions/8968911/updating-the-list-ui-with-timer)

我正在尝试做一些类似提醒的事情。目前我有一个数据库，其中每条记录都有剩余时间。我将它们显示为自定义列表。我有两个清单：

*   一个用于来自 db 的活动记录（取决于时间设置）；
*   一个用于过期记录。

我需要每隔几秒（例如 3-5 秒）刷新一次列表，以检查哪些记录仍然处于活动状态。我读过，`notifyDataSetChanged();`但我想每 3-5 秒刷新一次。有什么简单的方法来做这个吗？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-12-10T12:13:40.170

在 javadoc 中查找 Timer。它允许您设置每隔几秒钟运行一次的任务。

# java - 检查外部长期 jar 是否启动成功的优雅方法

> ID：13800568
> 
> 赞同：1
> 
> 时间：2012-12-10T12:03:02.807
> 
> 标签：java, exception, process, jar, exit-code

我正在尝试从 java 应用程序执行外部 jar。

**检查进程是否已成功启动并运行的最优雅的方法是什么？**

ExtApp.jar 是长期运行的进程，所以我不能使用`Process.waiFor()`，因为它会阻塞我的应用程序。我想出了以下代码，背后的想法是如果进程尚未终止则`exitValue()`抛出。`IllegalThreadStateException`

```
boolean success = false;
try {
    Process process = Runtime.getRuntime().exec("java -jar ExtApp.jar");
    try {
        if (process.exitValue() == 0) 
            success = true;
    } catch (IllegalThreadStateException e) {
        success = true;
    }
} catch (Exception e) {}

System.out.println(success); 
```

但这是一种丑陋的解决方案。有更好的想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T12:23:04.027

这个问题似乎没有优雅的解决方案。例如，我在我的 PC 上运行了您的代码并获得了“成功”，尽管上面没有 ExtApp.jar。也就是说，从 Runtime.exec 的角度来看，进程 (java.exe) 成功启动，无论之后发生什么。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-10T12:07:51.090

以上似乎很可疑。您将生成您的流程，然后立即对其进行测试。进程本身可能无法确定它是否运行正常（例如，它何时实际检查 jar 文件 eixsts/是否可加载/是否有效？）

我认为你最好通过一个新线程生成进程，调用/阻塞该线程`Process.waitFor()`，然后在进程退出后通知父线程（通过任何方式 - 状态变量，`wait()`/ `notify()`，`java.util.concurrent.Future`等等）已经收集了退出状态。

[Apache Commons Exec](http://commons.apache.org/exec/)是用于执行此类工作的有用库，包括进程退出的异步生成/通知。有关详细信息，请参阅[DefaultExecuteResultHandler](http://commons.apache.org/exec/apidocs/org/apache/commons/exec/DefaultExecuteResultHandler.html)。

# batch-file - 使用批处理脚本删除子文件夹中的文件

> ID：13800575
> 
> 赞同：6
> 
> 时间：2012-12-10T12:03:49.497
> 
> 标签：batch-file

我必须从具有相同名称的子文件夹中删除文件。我的文件路径如下。

```
d:\test\test1\archive\*.txt
d:\test\try\archive\*.txt
d:\test\model\archive\*.txt 
```

我尝试`del`在批处理脚本中使用命令删除。但是文件夹“ *test* ”中有100多个文件夹。`del`因此，每条路径都很难使用。

除了“存档”文件夹的父文件夹名称外，所有路径的所有内容都保持不变。所以我想可能有一些简单的方法可以使用批处理脚本删除文件。

谁能指导我是否有任何简单的方法可以使用批处理脚本删除文件？或者我必须`del`为所有 100 个文件夹重复？

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-12-10T12:11:16.007

您也可以使用`/s`开关`del`来删除子文件夹。

例子

```
del D:\test\*.* /s 
```

将删除所有正在测试的文件，包括所有子文件夹中的所有文件。

要删除文件夹使用`rd`，同样的开关适用。

```
rd D:\test\folder /s /q 
```

`rd`虽然不支持通配符`*`，所以如果你想递归地删除`test`目录下的所有子文件夹，你可以使用`for`循环。

```
for /r /d D:\test %a in (*) do rd %a /s /q 
```

如果您`for`在批处理文件中使用该选项，请记住使用 2`%`而不是 1。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-02-21T20:44:01.027

在 bat 文件中使用 powershell

```
PowerShell Remove-Item c:\scripts\* -include *.txt -exclude *test* -force -recurse 
```

您还可以排除删除某些特定文件夹或文件：

```
PowerShell Remove-Item C:/*  -Exclude WINDOWS,autoexec.bat -force -recurse 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-10T15:27:21.283

*从已关闭的主题中移出*

```
del /s d:\test\archive*.txt 
```

这应该让你所有的文本文件

或者，

我修改了一个我已经写过的脚本来寻找某些文件来移动它们，这个应该去查找文件并删除它们。它允许您通过选择屏幕选择到哪个文件夹。

不过，请在使用之前在您的系统上进行测试。

```
@echo off
Title DeleteFilesInSubfolderList
color 0A
SETLOCAL ENABLEDELAYEDEXPANSION

REM ---------------------------
REM   *** EDIT VARIABLES BELOW ***
REM ---------------------------

set targetFolder=
REM targetFolder is the location you want to delete from    
REM ---------------------------
REM  *** DO NOT EDIT BELOW ***
REM ---------------------------

IF NOT DEFINED targetFolder echo.Please type in the full BASE Symform Offline Folder (I.E. U:\targetFolder)
IF NOT DEFINED targetFolder set /p targetFolder=:
cls
echo.Listing folders for: %targetFolder%\^*
echo.-------------------------------
set Index=1
for /d %%D in (%targetFolder%\*) do (
  set "Subfolders[!Index!]=%%D"
  set /a Index+=1
)
set /a UBound=Index-1
for /l %%i in (1,1,%UBound%) do echo. %%i. !Subfolders[%%i]!

:choiceloop
echo.-------------------------------
set /p Choice=Search for ERRORS in: 
if "%Choice%"=="" goto chioceloop
if %Choice% LSS 1 goto choiceloop
if %Choice% GTR %UBound% goto choiceloop
set Subfolder=!Subfolders[%Choice%]!
goto start

:start
TITLE Delete Text Files - %Subfolder%
IF NOT EXIST %ERRPATH% goto notExist
IF EXIST %ERRPATH% echo.%ERRPATH% Exists - Beginning to test-delete files...
echo.Searching for .txt files...
pushd %ERRPATH%
for /r %%a in (*.txt) do (
echo "%%a" "%Subfolder%\%%~nxa"
)
popd
echo.
echo.
verIFy >nul
echo.Execute^?
choice /C:YNX /N /M "(Y)Yes or (N)No:"
IF '%ERRORLEVEL%'=='1' set question1=Y
IF '%ERRORLEVEL%'=='2' set question1=N
IF /I '%question1%'=='Y' goto execute
IF /I '%question1%'=='N' goto end

:execute
echo.%ERRPATH% Exists - Beginning to delete files...
echo.Searching for .txt files...
pushd %ERRPATH%
for /r %%a in (*.txt) do (
del "%%a" "%Subfolder%\%%~nxa"
)
popd
goto end

:end
echo.
echo.
echo.Finished deleting files from %subfolder%
pause
goto choiceloop
ENDLOCAL
exit

REM Created by Trevor Giannetti
REM An unpublished work
REM (October 2012) 
```

如果你改变

```
set targetFolder= 
```

到您想要的文件夹，不会提示您输入该文件夹。*请记住，在放入基本路径时，格式末尾不包含“\”。例如 d:\test c:\temp

希望这可以帮助

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-03-30T00:05:12.687

我必须完成同样的任务，我使用了一个“for”循环和一个“del”命令，如下所示：

```
@ECHO OFF

set dir=%cd%

FOR /d /r %dir% %%x in (archive\) do (
    if exist "%%x" del %%x\*.txt /f /q
) 
```

您可以将 dir 变量设置为您想要的任何起始目录或使用当前目录 (%cd%) 变量。

这些是“for”命令的选项：

*   /d 对于目录
*   /r 用于递归

这些是“del”命令的选项：

*   /f 强制删除只读文件
*   /q 安静模式；禁止提示删除确认。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2015-07-07T19:41:20.203

`del parentpath`（或者只是将 .bat 文件放在父文件夹中）*.txt /s

这将删除父文件夹和所有子文件夹中的所有 .txt 文件。如果要删除多个文件扩展名，只需添加一个空格并执行相同的操作。前任。*.txt *.dll *.xml

# affinetransform - 为匹配的 asift 特征恢复模拟仿射变换（Morel 的实现）

> ID：13800578
> 
> 赞同：1
> 
> 时间：2012-12-10T12:04:01.817
> 
> 标签：affinetransform, feature-extraction, asift

有没有人尝试恢复 ASIFT 特征检测器的模拟仿射变换？（来自作者的实现）。在[原始论文](http://www.ipol.im/pub/art/2011/my-asift/ASIFT_SIIMS_final.pdf)中，方程 2.2 清楚地恢复了模拟仿射，但我似乎找不到执行此操作的明确点。有没有人尝试过？compute_asift_keypoints.cpp 中的函数 compare_affine_coor1 似乎是我正在寻找的，但比例似乎已标准化，而且执行转换的坐标中心对我来说并不清楚。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T10:10:27.500

它是在您提到的功能中执行的。中心坐标被移动是因为当你旋转图像时，左上角（原点）被移动，所以他们必须补偿它。而且规模根本没有变化。

# asp.net-mvc-3 - 在 asp.net mvc3 图表助手中不显示母版页

> ID：13800580
> 
> 赞同：0
> 
> 时间：2012-12-10T12:04:05.253
> 
> 标签：asp.net-mvc-3, charts

我正在尝试在 ASP.NET MVC3 中使用图表助手。但我面临的问题是，只显示相关图表而没有母版页。

我的代码是：

**控制器**

```
 public ActionResult Chart()
            {
                Chart chart = new Chart(width: 600, height: 400)
                       .AddTitle("Chart")
                    .AddSeries(
                    chartType: "line",
                    legend: "Rainfall",
                    xValue: new[] { "Jan", "Feb", "Mar", "Apr", "May" },
                    yValues: new[] { "20", "20", "40", "10", "10" }).AddSeries(chartType: "line", yValues: new[] { "30", "40", "50", "60", "70" }).Write("png");

                return null;

            } 
```

**看法**

```
@model dynamic
@{
    ViewBag.Title = "Chart";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<h2>Chart</h2>
<h2>About</h2>
<p><img src="@Url.Action("Chart")" alt="hello chart" /></p> 
```

请帮我找出我哪里出错了。

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T12:15:05.633

您需要将图表作为图像返回。尝试这个：

```
 public ActionResult Chart()
        {
            Chart chart = new Chart(width: 600, height: 400)
                   .AddTitle("Chart")
                .AddSeries(
                chartType: "line",
                legend: "Rainfall",
                xValue: new[] { "Jan", "Feb", "Mar", "Apr", "May" },
                yValues: new[] { "20", "20", "40", "10", "10" }).AddSeries(chartType: "line", yValues: new[] { "30", "40", "50", "60", "70" })
        .GetBytes("png");

            return File(chart, "image/png");

        } 
```

# unit-testing - 如何在 Grails 控制器单元测试用例中注入 TagLib MockObjects？

> ID：13800582
> 
> 赞同：1
> 
> 时间：2012-12-10T12:04:08.250
> 
> 标签：unit-testing, grails, taglib

```
i have tagLib like this: 
```

静态命名空间 = 'j2'

```
 def brandMessage = { attrs, body ->   
    def brand = ConfigurationHolder.config.j2.brand
    def messageCode = (brand ? brand+".":"") + attrs.code    
    def defaultCode = attrs.default ?: attrs.code
    out << message(code:messageCode,      default:message(code:attrs.code,default:defaultCode))
  } 
```

并使用：

```
public static def translate = {code,Object[] args->
      def dflt = (args.size()>0?args[0]:"");
        def taglib = ApplicationHolder.application?.getMainContext()?.getBean("com.j2.taglib.BrandMessageTagLib")
        def translatedValue = taglib?.brandMessage(code:code,default:dflt)?:""

        return translatedValue
      } 
```

在我们使用的控制器中：

```
flash.message = I18nUtils.translate('admin.groups.delete.success') 
```

在运行应用程序时它工作正常。但是当我们为控制器创建单元测试用例时，它会抛出如下错误消息：

```
org.springframework.beans.factory.NoSuchBeanDefinitionException: No bean named 'com.j2.taglib.BrandMessageTagLib' is defined 
```

但我在 Test 类中这样定义：

```
defineBeans {
                myService(BrandMessageTagLib)
            }
            def beanName=applicationContext.getBean("myService")

            log.info("beanName->"+beanName)

            def mockMyTagLib = mockFor(BrandMessageTagLib)
            mockMyTagLib.demand.brandMessage(1) {code, defaultMessage ->
                def defCode = new MarkupBuilder(new StringWriter())
                defCode.applyTemplate('<j2:brandMessage code="admin.groups.delete.success"')
            }
            controller.brandMessageTagLib = mockMyTagLib.createMock() 
```

即使这也是相同的错误消息抛出。

任何有想法的人都会很有帮助。

谢谢阿纳根德拉

# c# - 用房间编程 HTML5 websocket 聊天

> ID：13800585
> 
> 赞同：0
> 
> 时间：2012-12-10T12:04:26.237
> 
> 标签：c#, asp.net, html, websocket

我想创建基于 HTML5 websocket 的 html5 网络多房间聊天。但我需要一些帮助才能开始。

我想在 c# 中做服务器端代码，但我找不到任何教程如何在 c# 中使用多房间聊天 websocket 服务器。

是否有任何服务器已经在 .net 中实现，或者我可以更新到多房间聊天？

这是一个小项目，一个房间可容纳 10 人。你能帮我怎么开始吗？

非常感谢你 ！

我准备示例代码结构：

主服务器类：

```
 class Program
{

    // List of courses, which are currentli avalible ( REPRESENT CHAT ROOM) 
    protected static ConcurrentDictionary<Course, string> OnlineUsers = new ConcurrentDictionary<Course, string>();

    static void Main(string[] args)
    {
        // Initialize the server on port 81, accept any IPs, and bind events.
        var aServer = new WebSocketServer(81, IPAddress.Any)
        {
            OnReceive = OnReceive,
            OnSend = OnSend,
            OnConnected = OnConnect,
            OnDisconnect = OnDisconnect,
            TimeOut = new TimeSpan(0, 5, 0)
        };

        aServer.Start();

        // Accept commands on the console and keep it alive
        var command = string.Empty;
        while (command != "exit")
        {
            command = Console.ReadLine();
        }

        aServer.Stop();
    }

    // event when the clients connect to server 
    // Server send to client list of Lessons which are avalible, after 
    private static void OnConnect(UserContext context)
    {
        throw new NotImplementedException();
    }

    // event whent the client, want to disconnect from server
    private static void OnDisconnect(UserContext context)
    {
        throw new NotImplementedException();
    }

    // event, when client is sending some data
    private static void OnSend(UserContext context)
    {
        throw new NotImplementedException();
    }

    // event, when server receive data from client
    // client choose which room want to join and, we add cleint to list of lessons which he choose
    // another method ... Register, Rename, LogOff ...
    private static void OnReceive(UserContext context)
    {
        throw new NotImplementedException();
    }
} 
```

课程等级：（房间）

```
 class Course
{
    // Every course has list of active users
    protected static ConcurrentDictionary<User, string> OnlineUsers = new ConcurrentDictionary<User, string>();

    // Name of course
    public String CourseName { get; set; }

} 
```

用户等级：

```
 class User
{
    // Name of User
    public string Name = String.Empty;

    // UserContext  - Contains data we will export to the Event Delegates. 
    public UserContext Context { get; set; }
} 
```

这对我的目的来说是个好结构吗？我有很多课程（房间），有一位老师，一门课程可以是 20 名学生的例子..在一门课程中，学生可以使用聊天（网络套接字）和绘图板与技术人员交谈..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T14:04:20.860

**这就是我构建对象层次结构的方式：**

聊天服务器应该有一个`ChatRoom`s 列表。

每个都`ChatRoom`应该有一个`ChatUser`s 列表。

每个都`ChatUser`应该有一个或没有`ChatRoom`和一个出站套接字。

（这假设用户一次只在一个房间。允许多个房间会使事情变得更复杂一些）

**这就是房间选择的工作方式：**

当客户端连接时，`ChatUser`会创建一个。服务器做的第一件事是将聊天室列表发送给用户。然后，客户端用它想要加入的聊天室的名称进行响应。当该名称的聊天室不存在时，它会被创建并添加到房间的全局列表中。

然后将客户端添加到房间，并在客户端上设置房间。

**这就是聊天的工作方式：**

当用户的socket接收到聊天消息时，应该调用`SendToAllClients`用户当前所在房间的方法（当房间为空时，它应该向用户返回一个错误信息，用户必须先加入一个房间）。

然后房间的`SendToAll`方法应该调用`SendToClient`其用户列表中的所有用户。

然后该类的`SendToClient`方法会将聊天消息发送给客户端。

**如何为每个用户扩展多个聊天室**

要允许客户一次加入多个聊天室并在其中进行单独的对话，客户必须能够：

*   随时请求房间列表，而不仅仅是在启动时
*   随时加入房间，而不仅仅是在启动时
*   离开房间
*   发送消息时指定房间

这意味着客户端想要执行的操作无法从它当前所处的状态中推断出来。您需要将此信息添加到用户的消息中。例如，您可以将其用作前缀。像

```
!list 
```

请求房间列表

```
!join:asdf 
```

加入/创建房间 asdf

```
_asdf:Hello 
```

将消息 Hello 发送到房间 asdf。

来自服务器的消息应该具有相似的前缀，以便客户端可以推断消息是房间列表还是聊天消息以及它来自哪个房间。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T14:19:20.353

您应该尝试查看 SignalR for ASP.NET（例如：jabbr.net/）。这可能更有帮助和方便。

# c# - “对象”不包含“用户名”的定义

> ID：13800597
> 
> 赞同：0
> 
> 时间：2012-12-10T12:05:03.877
> 
> 标签：c#, asp.net-mvc-3

我`ExistingUsers`在 MVC 中创建了一个控制器：

```
 public ActionResult ExistingUsers()
    {
        MembershipUserCollection users = Membership.GetAllUsers();

        return View(users);
    } 
```

上述控制器的以下视图：

```
@model MembershipUserCollection

@{
    ViewBag.Title = "ExistingUsers";
}

<h2>ExistingUsers</h2>

<table>
    <tr>
        <th>
            Username
        </th>
        <th>
            CreationDate
        </th>
        <th>
            Email
        </th>
        <th>
        </th>
    </tr>
    @foreach (var item in Model)
    {
        <tr>
            <td>
                @Html.DisplayFor(modelItem => item.UserName)
            </td>
            <td>
                @Html.DisplayFor(modelItem => item.CreationDate)
            </td>
            <td>
                @Html.DisplayFor(modelItem => item.Email)
            </td>
            <td>
                <a href="/Account/DeleteUser?UserName=@item.UserName">Delete</a>
            </td>
        </tr>
        }
    }
</table> 
```

但是每当我向控制器发送请求时，都会发生异常：

```
Description: An error occurred during the compilation of a resource required to service this request. Please review the following specific error details and modify your source code appropriately. 

Compiler Error Message: CS1061: 'object' does not contain a definition for 'UserName' and no extension method 'UserName' accepting a first argument of type 'object' could be found (are you missing a using directive or an assembly reference?)

Source Error:

Line 25:         <tr>
Line 26:             <td>
Line 27:                 @Html.DisplayFor(modelItem => item.UserName)
Line 28:             </td>
Line 29:             <td> 
```

这里出了什么问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-10T12:10:01.757

您可能需要明确指定“for”循环中项目的类型 - 尝试：

```
@foreach (MembershipUser item in Model) 
```

# c# - 如何从 Windows 8 中的服务获取登录用户

> ID：13800601
> 
> 赞同：1
> 
> 时间：2012-12-10T12:05:21.927
> 
> 标签：c#, windows-services

我正在开发一个 C# windows 服务。

我需要知道（从服务中）谁是当前登录的用户。

我尝试使用以下代码来遵循[此处](https://stackoverflow.com/questions/5218778/how-to-get-currently-logged-username-from-windows-service-in-net)的答案：

```
ManagementObjectSearcher searcher = new ManagementObjectSearcher("SELECT UserName FROM Win32_ComputerSystem");
ManagementObjectCollection collection = searcher.Get();
string username = (string)collection.Cast<ManagementBaseObject>().First()["UserName"]; 
```

但问题是它只适用于 Windows 7，但在 Windows 8 上我得到一个空字符串。

WMI 是否在 Windows 8 中更改？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T12:26:59.773

问题不在于 Windows 8，而在于我使用了远程连接。此 WMI 不适用于远程连接。

# c# - 得到 12154: TNS:could not resolve the connect identifier specified error with .NET

> ID：13800602
> 
> 赞同：3
> 
> 时间：2012-12-10T12:05:30.727
> 
> 标签：c#, oracle, tnsnames

我在我的代码中编写了这个简单的连接：

```
OracleConnection con = new OracleConnection("Data Source=ORCL;User    
  ID=agapus;Password=agap");
con.Open(); 
```

然后我按 F5 运行我的应用程序并收到上述错误。无论是简单的控制台应用程序还是 ASP.NET 网站，都会发生此错误。我已经尝试过 Oracle.DataAccess 和旧的 windows oracle API。我尝试了几种 Oracle 服务，但都没有运气。我正在测试此连接的环境是 Windows Server 2008R2。我可以使用 SQLPlus 或 TOAD 轻松连接到任何数据库。我试过明确指定 TNS_NAMES.ORA 文件的位置，也不起作用。唯一有效的是当我在连接字符串中指定完整路径时。因此，如果我将上面的代码更改为下面的代码，它将起作用：

```
string conString = "user id=agapus;password=agap;data source=(DESCRIPTION=(ADDRESS=     
  (PROTOCOL=tcp)(HOST=172.16.0.121)(PORT=1521))(CONNECT_DATA=(SERVICE_NAME=ORCL)))";
  ID=agapus;Password=agap");
OracleConnection con = new OracleConnection(conString);
con.Open(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T12:24:26.967

如果您查看您的 sqlnet.ora 文件，相信您会发现默认域设置为 .world 。

这将使您的连接 ORCL.world 的正确名称。

在 TNSNAMES.ora 中，您的连接名称的末尾可能还包含 .world，而默认域则没有。

运行 tnsping 会得到什么？

# c - 关于使用 dup() 的困惑

> ID：13800606
> 
> 赞同：1
> 
> 时间：2012-12-10T12:05:36.050
> 
> 标签：c, pipe, dup

当我们使用 dup 将 STDOUT 重定向到管道时，我们这样做：

```
close(1); dup(fd[1]);
close(fd[0]);
close(fd[1]);
execlp("ls","-al",(char *) NULL); 
```

但我们正在关闭管道的两端。那么如何将 STDOUT 写入管道？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T12:07:34.653

因为一旦关闭了文件描述符编号 1（例如标准输出），该编号就可用于进一步`dup`或`open`调用。

您应该检查您的`close`和`dup`系统调用的结果。

当然，关闭管道的两端是没有意义的，除非您之前做了一些有用的事情（即在适当的末端读取或写入）。

请参阅[open(2)](http://www.kernel.org/doc/man-pages/online/pages/man2/open.2.html)、[dup(2)](http://www.kernel.org/doc/man-pages/online/pages/man2/dup.2.html)、[pipe(2)](http://www.kernel.org/doc/man-pages/online/pages/man2/pipe.2.html)、[close(2)](http://www.kernel.org/doc/man-pages/online/pages/man2/close.2.html)手册页。阅读《[高级 Linux 编程](http://advancedlinuxprogramming.com)》一书。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T18:32:00.553

在示例代码中，您没有关闭管道的两端。你正在关闭`fd[0]`和`fd[1]`。最初，关闭这些就足以关闭管道的两端，但不是在您复制`fd[0]`. 您还必须关闭重复的 fd 才能关闭对管道的所有引用。不过那会很愚蠢：您正在准确地保持一个结束，以便 ls 可以写入。

也许您的困惑即将`close()`结束？它关闭 fd，即对管道末端之一的引用。它不会关闭管道本身：这就是`shutdown()`会做的。（如果你不调用shutdown，当引用它的每个fd都关闭时，管道会自动关闭。）所以，因为复制的fd仍然打开，进程可以写入管道（它没有关闭，因为三个引用中只有两个被关闭）。

# drop-down-menu - 双列 CSS 下拉菜单

> ID：13800608
> 
> 赞同：0
> 
> 时间：2012-12-10T12:05:54.230
> 
> 标签：drop-down-menu, menu

我正在寻找两列 CSS 下拉菜单。你能告诉我在哪里可以获得源代码的网站吗？？？

示例：如果鼠标悬停在水平下拉菜单上，它应该显示两列。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T12:11:28.753

下面详细介绍了如何在 2 列中创建自己的下拉菜单。:-)

[http://www.ehow.com/how_12008977_make-dropdown-menu-two-columns.html](http://www.ehow.com/how_12008977_make-dropdown-menu-two-columns.html)

# javascript - 使用 Jquery 缩放图像后可拖动区域不正确

> ID：13800609
> 
> 赞同：8
> 
> 时间：2012-12-10T12:05:57.153
> 
> 标签：javascript, jquery, css, zooming

我正在使用 jquery.viewport 创建视口功能：我使用 jquery ui 创建滑块和自己编写的缩放功能来缩放图像。此外，使用此插件创建视口功能。

[http://borbit.github.com/jquery.viewport/](http://borbit.github.com/jquery.viewport/)

问题是，我缩放图像后，可拖动区域只是内容的一部分。这意味着我不能在它的某些区域拖动内容。有没有办法解决这个问题？谢谢

**html:**

```
<div id="view">
    <img src="demo/Web081112_P002_text.png" id = "largeText"/>
    <img src="demo/Web081112_P002_image.jpg" id = "largeImg"/>
</div>
<div id='slider' style='display:block;position:fixed;z-index:105;height:25%;right: 2%;top:25%;'></div> 
```

**Javascript**

```
<script>

    $(document).ready(function(){

        $("#view").css("height",$(window).height());
        $("#view").css("width",$(window).width());

        /*
        $("#box").css("height",$("#largeImg").height());
        $("#box").css("width",$("#largeImg").width());
        */

        //initiate the viewport
        var element = $('#view').viewport();
        var content = element.viewport('content');
        content.draggable({containment: 'parent'});
        content.scraggable({containment: 'parent'});

               $( "#slider" ).slider({
                orientation: "vertical",
                range: "min",
                min: 100,
                max: 200,
                value: 100,
                slide: function( event, ui ) {

                    $("#largeText").css("width",ui.value+"%");
                    $("

#largeImg").css("width",ui.value+"%");

                    $("#largeText").css("height",ui.value+"%");
                    $("#largeImg").css("height",ui.value+"%");

                    $("#largeText").css('top', ($("#view").height()/2-$("#largeText").height()/2) +'px');
                    $("#largeImg").css('top', ($("#view").height()/2-$("#largeImg").height()/2) +'px');

                    $('#largeText').css('left', ($("#view").width()/2 - $('#largeText').width()/2)+'px');
                    $('#largeImg').css('left', ($("#view").width()/2 - $('#largeImg').width()/2)+'px');

                    //element.viewport('update');
                    //Using this statement to update will occur error.

                 }
            });   

    });
    </script> 
```

**CSS：**

```
<style>
    #view {
        height:600px;
        width:350px;
    }

    #largeImg {     
            position:absolute;
            display:block;
            width: 1250px;
            height: 1500px;
            z-index: 100;
    }

    #largeText {
            position:absolute;
            display:block;
            width: 1250px;
            height: 1500px;
            z-index: 101;
    }

    body {
        width : auto;
        height: auto;
        overflow:hidden;
    }
</style> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-17T13:01:24.717

以下内容应根据您对问题的描述为您提供解决方案。我稍微简化了问题，但这仍然可以帮助您指出正确的方向。

此外，如果`$('#view').viewport('update');`无法正常工作，请提供您正在使用的浏览器和版本。

**解决方案示例：http:** [//jsfiddle.net/wA3eU/3/](http://jsfiddle.net/wA3eU/3/)

**HTML**

```
<link rel="stylesheet" href="http://code.jquery.com/ui/1.9.2/themes/base/jquery-ui.css" />    
<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.5.1/jquery.min.js"></script>
    <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.8.10/jquery-ui.min.js"></script>
    <script type="text/javascript" src="https://github.com/borbit/jquery.viewport/raw/master/jquery.viewport.js"></script>
    <script type="text/javascript" src="https://github.com/borbit/jquery.scraggable/raw/master/jquery.scraggable.js"></script>

<table id="SliderData">
    <tr><td>Scale: </td><td> <div id="UIVal">0</div></td><tr>
    <tr><td>Width: </td><td> <div id="Width">0</div></td><tr>
    <tr><td>Height: </td><td> <div id="Height">0</div></td><tr>
</table>
<div id="view">
    <img src="http://farm8.static.flickr.com/7108/6947221908_3675a27fe9.jpg" id = "largeImg"/>
</div>
<div id='slider'></div> 
```

**CSS**

```
#slider {
    display:block;
    position:fixed;
    z-index:105;
    height:25%;
    right:2%;
    top:25%; 
    margin:1em;
    background:#ccc;
}

#SliderData {
    float:left;
    display:block;
    position:fixed;
    z-index:105;
    padding: .5em;
    background: #ccc;
    opacity:0.4;
    filter:alpha(opacity=40); /* For IE8 and earlier */
}

#view {
    height:250px;
    width:250px;
}

#largeImg {     
        position:absolute;
        display:block;
        width: 500px;
        height: 500px;
        z-index: 100;
}

body {
    width : auto;
    height: auto;
    overflow:hidden;
}​ 
```

**jQuery**

```
$("#view").css("height",$(window).height());
$("#view").css("width",$(window).width());

//initiate the viewport
var element = $('#view').viewport();
var content = element.viewport('content');
content.draggable({containment: 'parent'});
content.scraggable({containment: 'parent'});

var defaultHeight = $("#largeImg").height();
var defaultWidth = $("#largeImg").width();

 $( "#slider" ).slider({
    orientation: "vertical",
    range: "min",
    min: 100, // 1x 
    max: 300, // 3x
    value: 100,
    slide: function(event, ui) {

        scale = ui.value/100.;

        $("#largeImg").css('width',defaultHeight * scale);
        $("#largeImg").css('height',defaultWidth * scale);     

        element = $('#view').viewport('update');

        $("#UIVal").text(scale);
        $("#Width").text($("#largeImg").width());
        $("#Height").text($("#largeImg").height());
     }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T12:13:48.327

您不能在浏览器中设置缩放手柄点 - 但是您可以通过更改宽度来模拟效果，然后通过减去添加宽度的一半来更改`left`位置（如果使用相对定位，则为负值）。`left-margin`

# iphone - UItextView 文本隐藏

> ID：13800612
> 
> 赞同：1
> 
> 时间：2012-12-10T12:06:14.283
> 
> 标签：iphone, ios, uiscrollview, uitextview

我是notes.app之类的应用程序。我将 UITextView 的 contentInset 设置为

```
myTextView.contentInset = UIEdgeInsetsMake(0, 25, 0, -25);
myTextView.contentSize = CGSizeMake(295, myTextView.contentSize.height); 
```

但这似乎不像我预期的那样工作。隐藏了两个字符。

我明白了![明白啦](../Images/060e1ad25138f6c1d28e23ab3ff709a4.png)

但如果我设置

```
myTextView.contentInset = UIEdgeInsetsMake(0, 25, 0, 0);
myTextView.contentSize = CGSizeMake(295, myTextView.contentSize.height); 
```

我得到实际的文字

![必需的](../Images/36b3962540a3dfaae45c1bad0cfa509d.png)

请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T13:35:10.717

fibnochi 您可以使用不同的方法来执行此操作。我在我的一个应用程序中使用了它，它工作正常

首先，您需要获取将携带所有数据的 UItextView 的大小，为此您需要使用 NSString 类委托函数

```
NSString* str = @"Your Entire string will come here";

CGSize size = [str sizeWithFont:[UIFont systemFontOfSize:17.0] constrainedToSize:CGSize(295, any large digit for maximum height say 10000) lineBreakMode:UILineBreakModeWordWrap];

textView.contentSize = size; 
```

这会解决你的问题吗。请告诉我

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T12:15:20.690

苹果的讨论 [在这里](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIKitDataTypesReference/Reference/reference.html)。

" 边缘插入值应用于矩形以缩小或扩展由该矩形表示的区域。通常，边缘插入在视图布局期间用于修改视图的框架。正值会导致框架被指定的插入（或缩小）数量。负值导致框架以指定的数量开始（或扩展）。“你可以像**UIEdgeInsetsMake(0,25,0,25** )

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-10T12:12:08.763

你能试试下面的吗？

```
myTextView.contentInset = UIEdgeInsetsMake(0, 25, 0, 25);
myTextView.contentSize = CGSizeMake(295, myTextView.contentSize.height); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-10T13:04:29.450

试试这个代码:)

```
myTextView.contentInset = UIEdgeInsetsMake(0, 25, 0, -25);
myTextView.contentSize = CGSizeMake(270, myTextView.contentSize.height); 
```

希望这会帮助你:)

# nosql - DynamoDB：通过比较查询非键值

> ID：13800613
> 
> 赞同：1
> 
> 时间：2012-12-10T12:06:13.693
> 
> 标签：nosql, amazon-dynamodb

假设我们有许多结构化为时间戳（哈希）-值对的数据表，其中值可以是例如温度或其他类型的各种测量数据。

要获取某些值的时间戳，我们可以使用 value(hash) - timestamp(range) 构建二级索引，但是如果我们想通过 GT、LT、BETWEEN 等比较操作查询该值以获取一系列值的时间戳怎么办？

显然，我想避免使用扫描。我想出的唯一方法是使用虚拟哈希键并将值+时间戳放入范围属性，但我猜这有其自身的问题（与扫描相比更好或更差？）。

有没有更好的解决方案，或者完全可以使用 DynamoDB 来完成？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T18:25:09.027

您需要知道 HASH，然后才能对 RANGE 执行查询。要解决这个问题，您需要对表进行非规范化，即创建一个键颠倒的副本。尽管这看起来有点让人头疼，但它是关键价值存储的所有性能优势有时需要的权衡之一。

这种情况的示例：两个密钥完全随机，那么你就不走运了。与其将 HASH 设置为虚拟值，不如尝试使用每月时间戳，这样您应该始终能够务实地计算出哈希应该是什么。然后，您还可以将范围设置为由连字符分隔的两个值的组合，即时间戳值，然后在非规范化表中值时间戳，这样您应该能够使用比较运算符而不会影响性能.

# php - 如何批处理需要很长时间才能执行的 PHP 脚本？

> ID：13800614
> 
> 赞同：3
> 
> 时间：2012-12-10T12:06:20.107
> 
> 标签：php, batch-processing, execution-time

我构建了一个 PHP 脚本，用于创建/恢复包含站点内容和数据库的备份。它在较小的站点上运行良好，但在较大的站点上会遇到麻烦。批处理这样的脚本的最佳方法是什么？基本上，它将文件从一个目录复制到另一个目录，创建数据库转储，然后压缩目录。

我做了一些研究，我需要使用 cron 作业吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-10T13:44:12.333

如果它是在固定的时间/时间表发生的事情，那么它应该是一个 cron 作业。这很容易设置。有很多教程。

另一方面，如果这是用户从 Web 浏览器触发的操作，则应该[fork](http://php.net/manual/en/function.pcntl-fork.php)和[exec](http://php.net/manual/en/function.exec.php)。您接受用户的输入、fork 和 exec，然后让用户知道在该过程完成后他将收到电子邮件。

# python - 获取 URL 时的多处理 python 3.2

> ID：13800617
> 
> 赞同：0
> 
> 时间：2012-12-10T12:06:30.217
> 
> 标签：python, api, url, multiprocessing, steam

我编写了一个脚本来从 Steam API 获取库存数据，但我对速度有点不满意。所以我读了一些关于 python 中的多处理的内容，但我根本无法理解它。该程序是这样工作的：它从列表中获取 SteamID，获取库存，然后将 SteamID 和库存附加到字典中，其中 ID 作为键，库存内容作为值。

我还了解到，在多处理时使用计数器存在一些问题，这是一个小问题，因为我希望能够从上次获取的库存而不是从头开始恢复程序。

无论如何，我所要求的实际上是一个具体示例，说明如何在打开包含库存数据的 URL 时进行多处理，以便程序一次可以获取多个库存，而不仅仅是一个。

到代码上：

```
with open("index_to_name.json", "r", encoding=("utf-8")) as fp:
    index_to_name=json.load(fp)

with open("index_to_quality.json", "r", encoding=("utf-8")) as fp:
    index_to_quality=json.load(fp)

with open("index_to_name_no_the.json", "r", encoding=("utf-8")) as fp:
    index_to_name_no_the=json.load(fp)

with open("steamprofiler.json", "r", encoding=("utf-8")) as fp:
    steamprofiler=json.load(fp)

with open("itemdb.json", "r", encoding=("utf-8")) as fp:
    players=json.load(fp)

error=list()
playerinventories=dict()
c=127480

while c<len(steamprofiler):
    inventory=dict()
    items=list()
    try:
        url=urllib.request.urlopen("http://api.steampowered.com/IEconItems_440/GetPlayerItems/v0001/?key=DD5180808208B830FCA60D0BDFD27E27&steamid="+steamprofiler[c]+"&format=json")
        inv=json.loads(url.read().decode("utf-8"))
        url.close()
    except (urllib.error.HTTPError, urllib.error.URLError, socket.error, UnicodeDecodeError) as e:
        c+=1
        print("HTTP-error, continuing")
        error.append(c)
        continue
    try:
        for r in inv["result"]["items"]:
            inventory[r["id"]]=r["quality"], r["defindex"]
    except KeyError:
        c+=1
        error.append(c)
        continue
    for key in inventory:
        try:
            if index_to_quality[str(inventory[key][0])]=="":
                items.append(
                    index_to_quality[str(inventory[key][0])]
                    +""+
                    index_to_name[str(inventory[key][1])]
                    )
            else:
                items.append(
                    index_to_quality[str(inventory[key][0])]
                    +" "+
                    index_to_name_no_the[str(inventory[key][1])]
                    )
        except KeyError:
            print("keyerror, uppdate def_to_index")
            c+=1
            error.append(c)
            continue
    playerinventories[int(steamprofiler[c])]=items
    c+=1
    if c % 10==0:
        print(c, "inventories downloaded") 
```

我希望我的问题很清楚，否则就这么说清楚。我最好避免使用 3rd 方库，但如果不可能，那就不可能了。提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T20:48:42.593

因此，您假设获取 URL 可能会减慢您的程序速度？您最好先检查该假设，但如果确实如此，则使用该`multiprocessing`模块是一个*巨大*的矫枉过正：对于 I/O 绑定的瓶颈，线程相当简单，甚至可能更快一些（它需要更多是时候产生另一个 python 解释器而不是产生一个线程了）。

查看您的代码，您可能会逃避将 while 循环的大部分内容粘贴在一个函数中`c`作为参数，并使用另一个函数从那里启动一个线程，例如：

```
def process_item(c):
    # The work goes here
    # Replace al those 'continue' statements with 'return'

for c in range(127480, len(steamprofiler)):
    thread = threading.Thread(name="inventory {0}".format(c), target=process_item, args=[c])
    thread.start() 
```

一个真正的问题可能是产生的线程数量没有限制，这可能会破坏程序。此外，Steam 的人可能不会因为被你的脚本重击而感到好笑，他们可能会决定与你解除好友关系。

更好的方法是`collections.deque`用你的列表填充一个对象，`c`然后启动一组有限的线程来完成工作：

```
def process_item(c):
    # The work goes here
    # Replace al those 'continue' statements with 'return'

def process():
    while True:
       process_item(work.popleft())

work = collections.deque(range(127480, len(steamprofiler)))

threads = [threading.Thread(name="worker {0}".format(n), target=process)
                   for n in range(6)]
for worker in threads:
    worker.start() 
```

请注意，我指望在我们失业时`work.popleft()`抛出一个，这将杀死线程。`IndexError`这有点偷偷摸摸，所以考虑使用 a`try...except`代替。

还有两件事：

1.  考虑使用出色的[Requests](http://docs.python-requests.org)库，而不是`urllib`（从 API 角度来看，它是迄今为止我使用过的整个 Python 标准库中最差的模块）。
2.  对于请求，有一个名为[grequests](https://github.com/kennethreitz/grequests)的附加组件，它允许您执行完全异步的 HTTP 请求。这将使代码更简单。

我希望这会有所帮助，但请记住，这都是未经测试的代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T15:11:12.180

最外层的 while 循环似乎分布在几个进程（或任务）上。

当您将循环分解为任务时，请注意您在进程之间共享`playerinventories`和对象。`error`您将需要`multiprocessing.Manager`用于共享问题。

[我建议您从这个代码片段](https://stackoverflow.com/a/6832693/1300095)开始修改您的代码。

# java - 应用程序关闭时调用方法

> ID：13800621
> 
> 赞同：1
> 
> 时间：2012-12-10T12:06:49.433
> 
> 标签：java, swing, servlets, awt

在我的 Swing 聊天应用程序中，我有一个注销按钮，用于注销用户，它工作正常。现在我需要在关闭 Swing 应用程序窗口时注销用户。

我在使用 JavaScript 关闭浏览器时在 Web 应用程序中执行了此操作，但现在我需要在 Swing 应用程序中执行此操作。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-10T12:11:04.290

*   称呼`JFrame.setDefaultCloseOperation(JFrame.DO_NOTHING_ON_CLOSE)`
*   [`WindowListener`](http://docs.oracle.com/javase/tutorial/uiswing/events/windowlistener.html)在框架中添加一个。
*   覆盖侦听器的适当方法以调用您的关闭方法，然后将框架设置为不可见并处理它。

例如

![对话框，检查框架退出](../Images/b90c834fe961bf7b4fe7f7201db18b07.png)

```
import java.awt.*;
import java.awt.event.*;
import java.net.URI;
import javax.swing.*;
import javax.swing.border.EmptyBorder;

class CheckExit {

    public static void doSomething() {
        try {
            // do something irritating..
            URI uri = new URI(
                    "http://stackoverflow.com/users/418556/andrew-thompson");
            Desktop.getDesktop().browse(uri);
        } catch(Exception e) {
            e.printStackTrace();
        }
    }

    public static void main(String[] args) throws Exception {
        Runnable r = new Runnable() {

            @Override
            public void run() {
                // the GUI as seen by the user (without frame)
                JPanel gui = new JPanel(new BorderLayout());
                gui.setPreferredSize(new Dimension(400, 100));
                gui.setBackground(Color.WHITE);

                final JFrame f = new JFrame("Demo");
                f.setLocationByPlatform(true);
                f.add(gui);

                // Tell the frame to 'do nothing'.
                f.setDefaultCloseOperation(JFrame.DO_NOTHING_ON_CLOSE);

                WindowListener listener = new WindowAdapter() {

                    @Override
                    public void windowClosing(WindowEvent we) {
                        int result = JOptionPane.showConfirmDialog(
                                f, "Close the application");
                        if (result==JOptionPane.OK_OPTION) {
                            doSomething();
                            f.setVisible(false);
                            f.dispose();
                        }
                    }
                };
                f.addWindowListener(listener);

                // ensures the frame is the minimum size it needs to be
                // in order display the components within it
                f.pack();
                // should be done last, to avoid flickering, moving,
                // resizing artifacts.
                f.setVisible(true);
            }
        };
        // Swing GUIs should be created and updated on the EDT
        // http://docs.oracle.com/javase/tutorial/uiswing/concurrency/initial.html
        SwingUtilities.invokeLater(r);
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T12:10:16.167

使用 JFrame 上的窗口事件，例如您可能需要的方法 (windowclosed();)。它是 WindowListener

编辑 ：

你可以说

```
setDefaultCloseOperation(JFrame.DO_NOTHING_ON_CLOSE); 
```

但是如果您按下 X（关闭按钮），您的 Windowlistener 仍然可以工作

在那里你用这个代码覆盖方法windowClosing

```
public void windowClosing(WindowEvent e) {
    int i = JOptionPane.showConfirmDialog(TestFrame.this, "do you really want to close?","test",JOptionPane.YES_NO_OPTION);
    if(i == 0) {
        System.exit(0);
    }
} 
```

这将完成工作

# php - 通过 curl 访问位于单独服务器上的脚本并操作会话/cookie 和数据库？

> ID：13800623
> 
> 赞同：0
> 
> 时间：2012-12-10T12:06:56.903
> 
> 标签：php, session, cookies, libcurl

我陷入了一个非常复杂的情况（可能只是我缺乏经验）。

*   我正在两个不同的服务器**服务器 A**和**服务器 B上工作**
*   从**服务器 A**上的脚本我需要访问位于**服务器 B上的脚本**
*   并通过位于**服务器 B上的脚本****将会话和查询字符串**数据从**服务器 A**的脚本插入到**服务器 B**的数据库中。

 **简单**的 include()**不适用于外部服务器，所以我使用**curl**但我很困惑

这个怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T13:07:16.560

您需要将会话和查询字符串从服务器 A 发送到服务器 B（最好通过 https 连接）。只需将会话和查询字符串形成为参数，进行 urlencode 并通过 GET 或 POST 将它们发送到服务器 B。服务器 B 可以响应一些数据 - 将这些数据放入数组并进行序列化或 json_encode。当您在服务器 A 上收到它时，请执行反序列化或 json_decode，您将从服务器 B 获取数据。**

# html - 在 HTML 中对齐四组中的复选框

> ID：13800625
> 
> 赞同：-2
> 
> 时间：2012-12-10T12:07:03.027
> 
> 标签：html, css

### HTML 代码

```
<div  id=checkbox>
    <div id=groupfour>
        <div id=groupone>
            <input type="checkbox"  checked="checked" name="Mapmashup" value="Jan" id="EJan">
            <label>Jan </label>
        </div>
        <div id=groupone>
            <input type="checkbox"  checked="checked" name="Mapmashup" value="Feb" id="EFeb">
            <label>Feb</label>
        </div>
        <div id=groupone>
            <input type="checkbox"  checked="checked" name="Mapmashup" value="Mar" id="EMar">
            <label>Mar</label>
        </div>
        <div id=groupone>
            <input type="checkbox"  checked="checked" name="Mapmashup" value="Apr" id="EApr">
            <label>Apr</label>
        </div>
    </div>

    <div id=groupfour>
        <div id=groupone>
            <input type="checkbox"  checked="checked" name="Mapmashup" value="May" id="EMay">
            <label>May</label>
        </div>
        <div id=groupone>
            <input type="checkbox"  checked="checked" name="Mapmashup" value="Jun" id="EJun">
            <label>Jun</label>
        </div>
        <div id=groupone>
            <input type="checkbox"  checked="checked" name="Mapmashup" value="Jul" id="EJul">
            <label>Jul </label>
        </div>
        <div id=groupone>
            <input type="checkbox"  checked="checked" name="Mapmashup" value="Aug" id="EAug">
            <label>Aug</label>
        </div>
    </div> 
```

### CSS 代码

```
#groupfour
{
    position:relative;
    vertical-align: bottom;
} 
```

我想将我的月份复选框分组为三行四个一组。这样它就出现在一个垂直的月份列表中。如果我删除内部 div 复选框并没有在所有三行中对齐。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T12:18:16.983

检查这个[JSBIN](http://jsbin.com/igivah/1/)

这是制作这个的非常非常基本的方法

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T12:13:48.437

**习惯** `white-space:nowrap` **和** `display:inline-block;`

像这样

```
#groupfour{
white-space:nowrap;
}

#groupfour #groupone{
display:inline-block;
} 
```

**[演示](http://jsfiddle.net/dPjBy/)**

**[演示-2](http://jsfiddle.net/dPjBy/2/)**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-10T12:16:50.587

您可以使用 css 来实现

```
<style>
.groupone{
    float: left;
}
.groupfour{
    clear: left;
}
</style> 
```

此外，由于您同时调用相同的 div，请将所有 'id' 更改为 'class'

```
<div class="groupfour">
                <div class="groupone">
                    <input type="checkbox"  checked="checked" name="Mapmashup" value="Jan" class="EJan">
                    <label>Jan </label>
                </div>
                <div class="groupone">
                    <input type="checkbox"  checked="checked" name="Mapmashup" value="Feb" class="EFeb">
                    <label>Feb</label>
                </div>
                <div class="groupone">
                    <input type="checkbox"  checked="checked" name="Mapmashup" value="Mar" class="EMar">
                    <label>Mar</label>
                </div>
                <div class="groupone">
                    <input type="checkbox"  checked="checked" name="Mapmashup" value="Apr" class="EApr">
                    <label>Apr</label>
                </div>
            </div>

            <div class="groupfour">
                <div class="groupone">
                    <input type="checkbox"  checked="checked" name="Mapmashup" value="May" class="EMay">
                    <label>May</label>
                </div>
                <div class="groupone">
                    <input type="checkbox"  checked="checked" name="Mapmashup" value="Jun" class="EJun">
                    <label>Jun</label>
                </div>
                <div class="groupone">
                    <input type="checkbox"  checked="checked" name="Mapmashup" value="Jul" class="EJul">
                    <label>Jul </label>
                </div>
                <div class="groupone">
                    <input type="checkbox"  checked="checked" name="Mapmashup" value="Aug" class="EAug">
                    <label>Aug</label>
                </div>
            </div> 
```

# mysql - MySQL 不识别虚拟列/字段

> ID：13800626
> 
> 赞同：2
> 
> 时间：2012-12-10T12:07:02.800
> 
> 标签：mysql, subquery, virtual, field

我正在尝试将子查询生成的两个虚拟字段操作到一个新字段中，但是 MySQL 告诉我“GP”是一个未知列，但它已经被声明了。请看一下我的查询：

```
SELECT *,

(SELECT COUNT(id_gol) FROM tb_gol as gol
INNER JOIN tb_jogo as jg ON(gol.fk_id_jogo = jg.id_jogo)
WHERE gol.ic_excluido != '*' AND gol.fk_id_equipe = e.id_equipe AND jg.fk_id_campeonato = g.fk_id_campeonato) as 'GP',

(SELECT COUNT(id_gol) FROM tb_gol as gol
INNER JOIN tb_jogo as jg ON(gol.fk_id_jogo = jg.id_jogo)
WHERE gol.ic_excluido != '*' AND gol.fk_id_equipe != e.id_equipe AND (jg.fk_id_equipe1 = e.id_equipe OR jg.fk_id_equipe2 = e.id_equipe) AND jg.fk_id_campeonato = g.fk_id_campeonato) as 'GC',

(SELECT COUNT(id_wo) as WOs FROM tb_wo as w INNER JOIN tb_jogo as j ON (w.fk_id_jogo = j.id_jogo) WHERE w.fk_id_equipe = e.id_equipe AND j.fk_id_campeonato = g.fk_id_campeonato) as 'WO',

(GP+(GC*-1)) as 'SALDO'

FROM tb_equipe as e
INNER JOIN tb_gruposEquipes as ge ON (e.id_equipe = ge.fk_id_equipe)
INNER JOIN tb_grupos as g ON (g.id_grupo = ge.fk_id_grupo)
WHERE g.fk_id_campeonato = 23
ORDER BY WO ASC 
```

如您所见，“SALDO”将是“GP-GC”的结果。但是 MySQL 不识别这些列

我该如何解决这个问题？

**解决方案**

非常感谢您的帮助，伙计们，但我发现了问题所在。“SALDO”不能通过减去GP的GC来创建，因为“GP”和“GC”在运行时不存在。

因此，当您需要在运行时操作虚拟字段时，您将不得不重复生成虚拟字段的代码。

然后，如果您有此选择：

```
SELECT *, (field1+1) as 'GP', (field2+1) as 'GC', (GP+GC) as 'SALDO' FROM (...) 
```

你需要用这个替换它：

```
SELECT *, (field1+1) as 'GP', (field2+1) as 'GC', ((field1+1)+(field2+1)) as 'SALDO' FROM (...) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T12:23:13.993

将内容推送到内部查询中

```
 SELECT core.*,
    (GP+(GC*-1)) as 'SALDO'

    from (

    (SELECT COUNT(id_gol) FROM tb_gol as gol
    INNER JOIN tb_jogo as jg ON(gol.fk_id_jogo = jg.id_jogo)
    WHERE gol.ic_excluido != '*' AND gol.fk_id_equipe = e.id_equipe AND jg.fk_id_campeonato = g.fk_id_campeonato) as 'GP',

    (SELECT COUNT(id_gol) FROM tb_gol as gol
    INNER JOIN tb_jogo as jg ON(gol.fk_id_jogo = jg.id_jogo)
    WHERE gol.ic_excluido != '*' AND gol.fk_id_equipe != e.id_equipe AND (jg.fk_id_equipe1 = e.id_equipe OR jg.fk_id_equipe2 = e.id_equipe) AND jg.fk_id_campeonato = g.fk_id_campeonato) as 'GC',

    (SELECT COUNT(id_wo) as WOs FROM tb_wo as w INNER JOIN tb_jogo as j ON (w.fk_id_jogo = j.id_jogo) WHERE w.fk_id_equipe = e.id_equipe AND j.fk_id_campeonato = g.fk_id_campeonato) as 'WO' ) 

    FROM tb_equipe as e

    ) as core 
    INNER JOIN tb_gruposEquipes as ge ON (core.id_equipe = ge.fk_id_equipe)
    INNER JOIN tb_grupos as g ON (g.id_grupo = ge.fk_id_grupo)
    WHERE g.fk_id_campeonato = 23
    ORDER BY WO ASC 
```

# php - symfony 2.1 日期在使用 ->modify 方法后不会持续存在

> ID：13800627
> 
> 赞同：1
> 
> 时间：2012-12-10T12:07:04.943
> 
> 标签：php, symfony, doctrine, symfony-2.1

我对 Symfony 2.1 和将日期持久化到数据库有疑问。我使用 PHP 5.3。我的代码如下：

```
public function moveAction()
    {
        $request = $this->getRequest();

        $id = $request->get('id');
        $daydelta = $request->get('daydelta');
        $minutedelta = $request->get('minutedelta');

        $em = $this->getDoctrine()->getManager();

        $entity = $em->getRepository('MedSystemTimetableBundle:Appointment')->find($id);

        if (!$entity) {
            throw $this->createNotFoundException('Unable to find Appointment entity.');
        }

            if (0 != $daydelta) {

            $day = ($daydelta > 0) ? '+'.$daydelta : $daydelta;
            $day .= (abs($daydelta) == 1) ? ' day' : ' days';

            $modifyFrom = $entity->getTimeFrom()->modify($day);
            $modifyTo = $entity->getTimeTo()->modify($day);

            $entity->setTimeFrom($modifyFrom);
            $entity->setTimeTo($modifyTo);
        }
        if (0 != $minutedelta) {

            $month = ($minutedelta > 0) ? '+'.$minutedelta : $minutedelta;
            $month .= (abs($minutedelta) == 1) ? ' minute' : ' minutes';

            $modifyFrom = $entity->getTimeFrom()->modify($month);
            $modifyTo = $entity->getTimeTo()->modify($month);        

            $entity->setTimeFrom($modifyFrom);
            $entity->setTimeTo($test);
        }

        $em->flush();

        return new Response('ok', 200);
    } 
```

我已经转储了新的时间值并且它正确更改了，但由于某种原因它没有保存到数据库中。但是，如果我将值设置为 new \DateTime 它就可以了。对于这种奇怪的行为有什么想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T19:42:42.433

我找到了解决方案。由于我一直在研究参考，因此该学说没有看到变化。答案是克隆对象，然后对其进行修改。这是正确的代码：

```
public function moveAction()
{
    $request = $this->getRequest();

    $id = $request->get('id');
    $daydelta = $request->get('daydelta');
    $minutedelta = $request->get('minutedelta');

    $em = $this->getDoctrine()->getManager();

    $entity = $em->getRepository('MedSystemTimetableBundle:Appointment')->find($id);

    if (!$entity) {
        throw $this->createNotFoundException('Unable to find Appointment entity.');
    }

        if (0 != $daydelta) {

        $day = ($daydelta > 0) ? '+'.$daydelta : $daydelta;
        $day .= (abs($daydelta) == 1) ? ' day' : ' days';

        $modifyFrom = clone $entity->getTimeFrom();
        $modifyTo = clone $entity->getTimeTo();

        $entity->setTimeFrom($modifyFrom->modify($day));
        $entity->setTimeTo($modifyTo->modify($day));
    }
    if (0 != $minutedelta) {

        $month = ($minutedelta > 0) ? '+'.$minutedelta : $minutedelta;
        $month .= (abs($minutedelta) == 1) ? ' minute' : ' minutes';

        $modifyFrom = clone $entity->getTimeFrom();
        $modifyTo = clone $entity->getTimeTo();        

        $entity->setTimeFrom($modifyFrom->modify($month));
        $entity->setTimeTo($test)->modify($month);
    }

    $em->flush();

    return new Response('ok', 200);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T09:26:37.540

我检查了你的代码。你错过了坚持。只需在您之前添加`flush()`

```
$em->persist($entity); 
```

希望它会有所帮助。

# html - 谷歌没有列出网站，但没有错误，内容看起来很丰富

> ID：13800628
> 
> 赞同：0
> 
> 时间：2012-12-10T12:07:29.723
> 
> 标签：html, seo, web-crawler, http-status-code-301, google-ranking

我们继承了一个大约 30,000 个页面（实际内容）的网站，每个页面都有独特的标题和丰富的内容。无论我们尝试什么，Google 似乎都不喜欢列出新站点，并且访问量下降了 80%（与旧站点和域相比）。

该网站最近重新开发并在那时更改了域，这无助于解决正在发生的事情，这标志着访问者的下降。旧域名注册于 2005 年 10 月，新域名注册于 2009 年，因此两者都有一定的年龄。在网站管理员工具中，最近提交了一个网站地址已更改的通知，可能还为时过早（12 月 7 日）看不到任何影响。

旧的 CMS 很难重定向，所以有一个非常大的 .htaccess 文件（1MB），这个文件应该有多大的重定向限制？我也许可以在 PHP 中编写一些代码来以编程方式处理 30,000 个重定向，但是旧的 URL 使用逗号分隔和其他符号非常奇怪。我使用了标题检查器，并且正在返回正确的 301。

我们还通过网站管理员工具提交了一个包含 25,000 个页面的站点地图，其中列出了 11 个！没有错误，正如我所说，页面内容包含丰富的描述性标题。

Google 在网站管理员工具中可以看到 68,000 个页面，但实际列出的只有 175 个，因此问题似乎相当严重，其他仍然“未选中”。“未选择”的曲线似乎反映了我们为获得站点列表所做的努力，但它们似乎没有被索引。

站点： [http](http://bit.ly/VKYClf) ://bit.ly/VKYClf （旧站点名称相同，但带有连字符）

我研究了很多，但到目前为止所有步骤都没有结果，列出的页面大约在 170 大关。

您能想出任何值得采取的具体步骤来确定阻止该网站列出的任何因素吗？

在此先感谢并乐意提供有关任何内容的更多信息。

**编辑：如果它对其他人有帮助，该网站是由 Wordpress 构建的，但使用自定义变量动态生成大量页面......因为 WP 2.9 添加了一个规范标签，但两者并没有很好地一起玩，他们是指向 WP 可以使用该 ID 找到的任何内容......现在已删除，希望事情正在向前发展**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T19:04:30.237

如果您刚刚提交了 25000 个 url，则需要一段时间才能完全编入索引，这可能需要几个月的时间。

我建议你登录谷歌网站管理员，去健康（以谷歌方式获取）你可以给个人网址抓取，谷歌应该在 24 小时内回复。如果您的索引页面仍然没有显示，那么您遇到了我无法帮助解决的重大问题。你每周获得 500 次。如果您希望您的网站立即编入索引，那么它可能是您唯一的选择。

# c# - 确定何时将 lambda 编译为实例方法

> ID：13800629
> 
> 赞同：5
> 
> 时间：2012-12-10T12:07:31.277
> 
> 标签：c#, lambda, closures, mvvm-light

*前言：*我试图在这里非常准确地描述这个场景。版本是“`TL;DR`我如何判断 lambda 将被编译为实例方法还是闭包”......

我在我的 WPF 项目中使用 MvvmLight，并且该库最近更改为使用`WeakReference`实例来保存传递到`RelayCommand`. 所以，实际上，我们在某处有一个对象，它持有 a`WeakReference`到 a `Action<T>`。

现在，自从升级到最新版本后，我们的一些命令停止了工作。我们有一些这样的代码：

```
ctor(Guid token)
{
    Command = new RelayCommand(x => Messenger.Default.Send(x, token));
} 
```

这导致生成一个关闭（如果我没有使用正确的术语，请纠正我）类 - 像这样：

```
[CompilerGenerated]
private sealed class <>c__DisplayClass4
{
    public object token;

    public void <.ctor>b__0(ReportType x)
    {
        Messenger.Default.Send<ReportTypeSelected>(new ReportTypeSelected(X), this.token); 
    }
} 
```

这在以前工作得很好，因为操作存储在`RelayCommand`实例中，并且无论它被编译为实例方法还是闭包（即使用'<>DisplayClass'语法）都保持活动状态。

但是，现在，因为它保存在 a 中`WeakReference`，所以代码仅在指定的 lambda 编译为实例方法时才有效。这是因为闭包类被实例化，传递到`RelayCommand`几乎立即进行垃圾收集，这意味着当命令开始使用时，没有要执行的操作。因此，必须修改上面的代码。将其更改为以下原因，例如：

```
Guid _token;
ctor(Guid token)
{
    _token = token;
    Command = new RelayCommand(x => Messenger.Default.Send(x, _token));
} 
```

这会导致编译后的代码产生一个成员 - 如下所示：

```
[CompilerGenerated]
private void <.ctor>b__0(ReportType x)
{
    Messenger.Default.Send<ReportTypeSelected>(new ReportTypeSelected(X), this._token);
} 
```

现在上述一切都很好，我明白为什么它以前不起作用，以及改变它是如何导致它起作用的。然而，我剩下的东西意味着我现在编写的代码必须根据我不知情的编译器决定在风格上有所不同。

**所以，我的问题是**- 这是在所有情况下都有记录的行为 - 还是行为会根据编译器的未来实现而改变？我是否应该忘记尝试使用 lambda 并始终将实例方法传递给`RelayCommand`? 或者我应该有一个约定，即动作总是被缓存到一个实例成员中：

```
Action<ReportTypeSelected> _commandAction;
ctor(Guid token)
{
    _commandAction = x => Messenger.Default.Send(x, token);
    Command = new RelayCommand(_commandAction);
} 
```

任何背景阅读指针也很感激地接受！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-10T12:20:28.363

无论您最终会在当前类上使用新类还是实例方法，都是您不应该依赖的实现*细节*。

从 C# 规范，第 7.15.2 章（强调我的）：

> 除了通过评估和调用 lambda 表达式或匿名方法表达式之外，是否有任何方法可以执行匿名函数块，这是明确未指定的。特别是，编译器**可以**选择通过合成一个或多个命名方法或类型来实现匿名函数。

-> 甚至没有指定它生成任何方法的事实。

鉴于这种情况，我会使用命名方法而不是匿名方法。如果这不可能，因为您需要从注册命令的方法中访问变量，您应该使用最后显示的代码。

* * *

`RelayCommand`在我看来，改变使用的决定`WeakReference`是一个糟糕的决定。它创造的问题比它解决的问题多得多。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-10T12:22:42.957

一旦 lambda 引用任何自由变量（又名捕获），就会发生这种情况，因为它需要一个公共位置（又名存储类/闭包）来引用（和/或分配给）它们。

读者的一个练习是确定为什么这些存储类不能只是静态的。

# php - MYSQL / PHP 语法错误 - 使用 POST 值

> ID：13800638
> 
> 赞同：0
> 
> 时间：2012-12-10T12:08:10.470
> 
> 标签：php, mysql

我收到以下关于我的语法的错误

您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以在第 1 行的 'replace='NOCOLOGY1' WHERE search='COMPANYNAME'' 附近使用正确的语法

```
$comp = "UPDATE msp_rereplacer SET replace='".addslashes($_POST[companyname])."' WHERE search='COMPANYNAME' "; 
```

谁能指出我错过了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T12:09:42.513

`replace`是 [保留字](http://dev.mysql.com/doc/refman/5.0/en/reserved-words.html)尝试 **反引号反**`replace`**引号**

和

```
 .addslashes($_POST[companyname]). 
```

应该

```
.addslashes($_POST['companyname']).

$comp = "UPDATE msp_rereplacer SET `replace`='".addslashes($_POST['companyname'])."' WHERE search='COMPANYNAME' "; 
```

相当

```
$comp = "UPDATE msp_rereplacer SET `replace`='".mysql_real_escape_string($_POST['companyname'])."' WHERE search='COMPANYNAME' "; 
```

**笔记**

`(mysql_*`不鼓励使用此扩展)。相反，[`MySQLi`](http://php.net/manual/en/book.mysqli.php) 或[`PDO`](http://php.net/manual/en/ref.pdo-mysql.php)

**好读**

[**`addslashes()`相对`mysql_real_escape_string()`**](http://shiflett.org/blog/2006/jan/addslashes-versus-mysql-real-escape-string)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T12:09:48.930

replace 是[MySQL 的保留字](http://dev.mysql.com/doc/refman/5.5/en/reserved-words.html).... 用反引号 (`) 引用它

# html - 带有 wcf REST Web 服务的 ajax 请求

> ID：13800639
> 
> 赞同：0
> 
> 时间：2012-12-10T12:08:15.947
> 
> 标签：html, ajax, web-services

我想从其他网站调用 Web 服务并使用 Ajax 调用在 html 页面中获得响应。

数据应该是 Web 服务的响应。我已经尝试了很多，但我没有得到任何解决方案。我也穿过浏览器，使用 ajax 请求调用 web 服务时出现问题。

我的网络服务代码：

```
 [ServiceContract]
    public interface IService
    {

        [WebInvoke(Method = "GET",RequestFormat=WebMessageFormat.Json, ResponseFormat = WebMessageFormat.Json, BodyStyle = WebMessageBodyStyle.Wrapped)]
        //[WebGet]
        [OperationContract]
        string GetData(string inputString); 
    }

It is implemented as:

    public string GetData(string inputString)
        {
            return "myData";
        }

Javascript code (From my other website):

 <script type="text/javascript">
            function click_btn() {
                $.ajax({
                    type: "GET",
                    url: "http://192.168.15.213/MyService.svc/GetData/inputString=e",
                    contentType: "application/json",
                    success: function (jsonData) {
                        alert('Data: ' + jsonData);
                 `enter code here`   },
                    Error: function (e) {
                        alert('err: ' + e);
                    }
                });
                return false;
            }
    </script> 
```

`404 method not allowed`当我从另一个网站调用 web 服务时出现错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T12:48:29.357

没错，您无法从客户端上下文执行来自不同域的请求。但是您可以做的是在您自己的服务器代码中从外部网站获取数据，然后将其作为服务提供给您的客户。事实上，通常您需要为来自外部源的数据提供一些上下文，因此无论如何您必须在将这些信息发送给客户端之前对其进行处理。

希望能帮助到你

# java - java - 如何在java中的HashMap中为相同的键值添加多个类对象？

> ID：13800640
> 
> 赞同：0
> 
> 时间：2012-12-10T12:08:21.050
> 
> 标签：java, android

我想将类的对象从arraylist存储到hashmap，一个键可能包含多个对象，怎么做

这是我的代码，

`Map<Integer, classObject> hashMap = new HashMap<Integer, classObject>();`

```
for(int i=0; i<arraylist.size(); i++)
            {
                sortID = arraylist.get(i).getID();
                if(!hashMap.containsKey(sortID))
                {
                    hashMap.put(sortID, arraylist.get(i));
                }
                hashMap.get(sortID).add(arraylist.get(i)); //i got error in add method
            } 
```

给出任何想法在哈希图中添加类对象以获得相同的键值......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-10T12:16:54.480

你可以试试：

```
Map<Integer, List<classObject>> hashMap = new HashMap<Integer, List<classObject>>();
    for(int i=0; i<arraylist.size(); i++)
    {
        sortID = arraylist.get(i).getID();
        List<classObject> objectList = hashMap.get(sortID);
        if(objectList == null)
        {
            objectList = new ArrayList<>();
        }
        objectList.add(arraylist.get(i));
        hashMap.put(sortID, objectList);
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T12:11:45.190

你可以做的是用对象列表映射键，即

```
Map<Integer, ArrayList<Class>> hashMap = new HashMap<Integer, ArrayList<Class>>(); 
```

然后添加一个新对象，你可以这样做：

```
hashMap.get(sortID).add(classObject); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-10T12:13:35.257

在键值对中，每个键都指向一个且只有一个对象。这就是为什么它被称为钥匙。

但是，如果您需要为同一个键存储多个对象，您可以创建一个`List`并使用单个键存储它。像这样的东西：

```
HashMap<Key, ArrayList<Object>> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-10T12:21:51.077

大多数时候使用 set 或 arraylist 作为值似乎有点开销并且不容易维护。一个优雅的解决方案是使用 Google Guava 的 MultiMap。

我建议通读 MultiMap 接口的 API： [http ://docs.guava-libraries.googlecode.com/git/javadoc/com/google/common/collect/Multimap.html](http://docs.guava-libraries.googlecode.com/git/javadoc/com/google/common/collect/Multimap.html)

**一个例子：**

```
ListMultimap<String, String> multimap = ArrayListMultimap.create();
for (President pres : US_PRESIDENTS_IN_ORDER) {
multimap.put(pres.firstName(), pres.lastName());
}
for (String firstName : multimap.keySet()) {
List<String> lastNames = multimap.get(firstName);
out.println(firstName + ": " + lastNames);
} 
```

**会产生如下输出：**

约翰：[亚当斯，亚当斯，泰勒，肯尼迪]

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-10T12:12:17.427

做到这一点的唯一方法是让您的价值成为您的对象列表，并在找到副本时添加到该列表中。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-10T12:31:42.983

如果您被允许使用第 3 部分库，我强烈建议您使用[Guava](http://code.google.com/p/guava-libraries/)和 [Multimap](http://guava-libraries.googlecode.com/svn/tags/release03/javadoc/com/google/common/collect/Multimap.html)。

# jquery - ASP.NET 强制页面重新加载并影响 jQuery

> ID：13800641
> 
> 赞同：0
> 
> 时间：2012-12-10T12:08:24.310
> 
> 标签：jquery, asp.net, vb.net

我在我的 ASP.NET 应用程序中使用 jQuery 来实现某些功能，但是每次触发 jQuery 事件时，结果都会显示一秒钟，然后页面会刷新。该代码将获取用户从选择框中选择的内容并将其放入文本框中，问题是它可以在 chrome 中运行，但对于我来说，我无法让它在 Firefox 中运行。我需要它在 fixfox 中工作，因为它将进入它。

我怎样才能让它在 Firefox 中工作：

```
<script type="text/javascript">
    $(function () {
        $('#mybkng').hide();
        $('#props').click(getProp);
    });

    function getProp() {
        var prop = $(this).val();
        $('#select').click(function () {
            event.preventDefault();
            $('#mybkng').show();
            $('#theproperty').val(prop);
        });
    }
</script> 
```

任何帮助将不胜感激，这让我发疯了。VB也可以做到这一点吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T12:23:33.097

我认为问题在于函数调用在按钮上的函数调用之前使用 return。
在函数中

```
function getProp() {
    var prop = $(this).val();
    $('#select').click(function () {
        event.preventDefault();
        $('#mybkng').show();
        $('#theproperty').val(prop);
    });
    return false
} 
```

以及在它之前调用 use return 的地方，如下所示

```
 OnClientClick="return getProp();" 
```

# javascript - SSRS - Javascript 报告加载事件

> ID：13800644
> 
> 赞同：4
> 
> 时间：2012-12-10T12:08:32.587
> 
> 标签：javascript, reporting-services, dom-events

我将报告嵌入到 iframe 中（使用 .NET ReportingServices 获取报告）

加载报告后，我想启动一个 Javascript 函数。

我试过：

```
window.addEventListener("load", ...) 
```

但由于报告结果是用 Javascript 加载的，`window.load`因此在报告有效加载之前触发。

是否有一些 Javascript 函数可以让我处理报告负载？像：

```
the_report.loaded(function () {
  alert(document.height);
}); 
```

顺便说一句，目的是获得最终呈现的文档高度。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-10T14:28:05.137

这正是我最终得到的结果（iframe 方面）

```
/* This will run only when all ReportingService JS is loaded */
Sys.Application.add_load(function () {
    /* Let's consider the report is already loaded */
    loaded = true;
    /* The function to call when the report is loaded */
    var onLoad = function () {
        alert(document.body.scrollHeight);
        /* Set the report loaded */
        loaded = true;
    };
    /* The report instance */
    var viewerReference = $find("ReportViewer1");

    /* The function that will be looped over to check if the report is loaded */
    check_load = function () {
        var loading = viewerReference.get_isLoading();
        if (loading) {
            /* It's loading so we set the flag to false */
            loaded = false;
        } else {
            if (!loaded) {
                /* Trigger the function if it is not considere loaded yet */
                onLoad();
            }
        }
        /* Recall ourselves every 100 miliseconds */
        setTimeout(check_load, 100);
    }

    /* Run the looping function the first time */
    check_load();
}) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-10T12:27:59.210

Javascript 支持充其量是最少的。可悲的是，这些控制在大多数方面仍然落后于时代。您可以在此处找到公开和记录的内容：

[http://msdn.microsoft.com/en-us/library/dd756405(VS.100).aspx](http://msdn.microsoft.com/en-us/library/dd756405(VS.100).aspx)

幸运的是，您可以调用 get_isLoading() 函数：

[http://msdn.microsoft.com/en-us/library/dd756413(v=vs.100).aspx](http://msdn.microsoft.com/en-us/library/dd756413(v=vs.100).aspx)

尝试这样的事情：

```
(function() {

    var onLoad = function() {
       // Do something...
    };
    var viewerReference = $find("ReportViewer1");

    setTimeout(function() {
        var loading = viewerReference.get_isLoading();

        if (!loading) onLoad(); 
    },100);

})(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-11-03T21:40:25.230

在 Pierre 的解决方案的基础上，我最终得到了这个。（简化为只调用一次，直到加载一次，因为它似乎在每次加载后运行）

注意：我的报告配置是 SizeToReportContent="true" AsyncRendering="false"，所以这可能是我可以简化它的部分原因。

```
Sys.Application.add_load(function () {
    var viewerReference = $find("ReportViewer1");
    check_load = function () {
        if (viewerReference.get_isLoading()) {
            setTimeout(check_load, 100);
        } else {
            window.parent.ReportFrameLoaded();
        }
    }
    check_load();
});
```

# android - 活动开始时如何隐藏键盘

> ID：13800645
> 
> 赞同：11
> 
> 时间：2012-12-10T12:08:32.253
> 
> 标签：android, android-activity, keyboard

我有很多编辑文本的活动。每当我加载该活动时，键盘就会出现并占据屏幕的一半，这使得该活动看起来很糟糕。那么当我加载该活动时，有什么方法可以隐藏键盘。

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2012-12-10T12:13:49.307

在你的 onCreate() 中使用这个..

```
this.getWindow().setSoftInputMode(WindowManager.LayoutParams.SOFT_INPUT_STATE_ALWAYS_HIDDEN); 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-12-10T12:14:27.097

在 RootLayout 的活动 XML 文件中添加这两行，即相对或线性（无论您采用什么）：

```
android:focusableInTouchMode="true" 
```

在活动清单文件中添加这一行

```
 android:windowSoftInputMode="stateHidden" 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2015-06-17T11:24:10.673

在你的 AndroidManifest.xml 添加属性 **android:windowSoftInputMode**：

```
<activity android:name="your.package.ActivityName"
      android:windowSoftInputMode="stateHidden"  /> 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2012-12-10T12:10:13.597

```
getWindow().setSoftInputMode(WindowManager.LayoutParams.SOFT_INPUT_STATE_HIDDEN); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-10T12:11:55.347

您可以使用 intputmethodmangare 执行此操作...使用以下代码..

```
InputMethodManager imm = (InputMethodManager)getSystemService(
      Context.INPUT_METHOD_SERVICE);

imm.hideSoftInputFromWindow(myEditText.getWindowToken(), 0); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-11-09T05:55:00.230

我创建了一个方法，我在 onCreate 事件中调用了所有必需的 Activity 类。在所有情况下都为我工作。

```
public class ClassLib {
        public static void hideKeyboard(Activity activity) {
        //Hide keyboard
        activity.getWindow().setSoftInputMode(WindowManager.LayoutParams.SOFT_INPUT_STATE_ALWAYS_HIDDEN);
    }
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-02-08T15:05:24.433

将此代码放在`onCrete`函数上：

`new Handler().postDelayed(new Runnable() { @Override public void run() { InputMethodManager imm =(InputMethodManager)getSystemService(Context.INPUT_METHOD_SERVICE); imm.hideSoftInputFromWindow(view.getWindowToken(), 0); view.clearFocus(); }}, 50);`

`view`你的 EditText在哪里

可运行是因为代码可能在`editText`渲染之前执行。

# haskell - Project Euler #37：我的解决方案太慢了

> ID：13800647
> 
> 赞同：1
> 
> 时间：2012-12-10T12:08:36.043
> 
> 标签：haskell, optimization, primes

我在玩项目欧拉问题37。问题说明如下：

> 数字 3797 有一个有趣的特性。作为素数本身，可以从左到右连续删除数字，并在每个阶段保持素数：3797、797、97 和 7。类似地，我们可以从右到左工作：3797、379、37 和 3。
> 
> 求从左到右和从右到左都可截断的仅有的 11 个素数之和。
> 
> 注意：2、3、5 和 7 不被视为可截断的素数。

这是我的代码：

```
import Data.Char

prime n
    | n < 2                                                                       = False
    | n == 2                                                                      = True
    | length [x | x <- [2..(floor . sqrt $ fromIntegral n)], n `mod` x == 0] == 0 = True
    | otherwise                                                                   = False

truncateList xs = take (length xs) $ iterate init xs

truncateSteps n = truncateList nn ++ truncateList rn
            where
                nn = map digitToInt $ show n
                rn = reverse nn

truncatablePrime n = and $ map (\ns -> prime $ foldl (\x y -> 10 * x + y) 0 ns) $ truncateSteps n

main = print $ sum $ take 11 $ [n | n <- [9,11..], notElem 5 $ map digitToInt $ show n, truncatablePrime n] 
```

我相信如果我的代码完成，它会产生正确的结果。简直太慢了。我已经优化了一些东西，比如不计算包含数字“5”的数字，只检查“素数”直到数字的平方根，但这还不够。

我想对我可以研究的其他优化提供一些提示。现在，请记住，我是 haskell 的新朋友，但请提出您认为值得一提的任何建议。

**更新** 这是完成的解决方案，在我的机器上运行大约 1 秒：[https ://gist.github.com/4250615](https://gist.github.com/4250615)

感谢所有优化指针！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T12:41:30.903

您的代码中有两个错误，首先

```
Prelude Data.Char Main> truncatablePrime 3797
False 
```

其次，您的列表理解条件不正确。（希望这不是太多的剧透。）

# extjs - 第二次设置 Displayfield 值需要很长时间

> ID：13800648
> 
> 赞同：1
> 
> 时间：2012-12-10T12:08:36.617
> 
> 标签：extjs, extjs4, extjs4.1

谁能告诉我第二次设置显示字段的值时，ExtJS 每个字段大约需要 300 毫秒来设置值？我已经尝试过使用`setRawValue()`，`setValue()`但它都是一样的。一个简单的分析表明，以下几行消耗了时间：

```
me.inputEl.dom.innerHTML = me.getDisplayValue();
me.updateLayout(); 
```

**编辑：** *进一步的 Prifiling 节目`me.updateLayout();`一直持续。*

知道如何加快速度吗？我用 ExtJS 4.1.3 对其进行了测试

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-10T12:52:13.080

[`Ext.suspendLayouts()`](http://docs.sencha.com/ext-js/4-1/#!/api/Ext-method-suspendLayouts)您可以通过在开始设置字段之前使用来提高性能。设置完所有字段后，使用[`Ext.resumeLayouts(true)`](http://docs.sencha.com/ext-js/4-1/#!/api/Ext-method-resumeLayouts)

# magento - 我正在尝试在管理网格中添加复选框-在自定义模块中编辑....出现错误

> ID：13800651
> 
> 赞同：0
> 
> 时间：2012-12-10T12:08:44.217
> 
> 标签：magento, magento-1.7

我正在尝试在管理网格中添加复选框-在自定义模块中编辑....出现错误“致命错误：在 /opt/lampp/htdocs/pragati-core-theme/magento/app/Mage 中找不到类'Mage_Form_Helper_Data'。 php 在线 546" 需要帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T05:35:39.577

我认为您正在使用-

```
Mage::helper('form')->somefunction(); 
```

在您的自定义模块中显示错误的某些位置。而不是这个，你需要使用 -

```
Mage::helper('custommodulename')->somefunction(); 
```

希望这会帮助你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T12:24:01.803

Mage_Form_Helper_Data 不是标准的 Magento 助手。在您初始化助手的部分中，您的自定义模块的 config.xml 文件中似乎存在错误。如果您发布 config.xml 文件的内容会更好。

# javascript - 钛金属手机防止视图消耗内存

> ID：13800653
> 
> 赞同：0
> 
> 时间：2012-12-10T12:08:49.033
> 
> 标签：javascript, titanium-mobile

在钛手机中，我正在创建一个游戏。一级之后，我想删除与一级相关的所有部分，并创建二级。我怎样才能做到这一点，同时确保第一级也从内存中删除。

我正在这样做，但我不知道视图是否仍在占用内存。

```
myView = Titanium.UI.createView()
view.remove(myView) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T00:46:08.847

是和不是。这取决于您的应用程序中是否仍引用您的 javascript 上下文。

执行 view.remove(myView) 时，您只是从视图“渲染堆栈”中删除 myView ...它将不再显示在视图中...但是，对象本身仍然存在于它所在的 javascript 上下文中被声明/初始化。您可以通过在删除语句之前和之后打印 myView 来检查这一点。

如果您还可以保证，在您的应用程序的任何地方都不再引用相同的上下文，那么垃圾收集器将丢弃并释放该对象的内存。

# google-drive-api - 在 Google 云端硬盘中存储文件的元数据

> ID：13800661
> 
> 赞同：1
> 
> 时间：2012-12-10T12:09:35.310
> 
> 标签：google-drive-api

存储在 Google Drive 中的图像文件具有[imageMediaMetadata](https://developers.google.com/drive/v2/reference/files#imageMediaMetadata)属性，其中包含有关文件的元数据。

是否可以将结构化元数据添加到其他文件类型，也许使用[schema.org](http://schema.org/)的属性？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T12:19:22.537

AFAIK，不，这还不可能。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-10T14:48:46.250

（其他答案很好，但只是补充）

抱歉，此功能目前不可用。然而，这是一个高优先级的功能，谷歌正在努力解决一些棘手的技术难题。它在 Google IO 2012 上宣布为“即将推出”，敬请期待。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-10T12:32:29.003

您可以为此使用[indexableText](https://developers.google.com/drive/v2/reference/files#resource)属性，您需要自己提供结构。

# mysql - 如何优化 MySQL 中的多个左连接？

> ID：13800663
> 
> 赞同：0
> 
> 时间：2012-12-10T12:09:39.257
> 
> 标签：mysql, sql, query-optimization, left-join

你能帮我让这个查询工作吗？

我有一个日志查询，它按天（表：，包括没有行的天数`log`）为每个活动用户（表：`user`，状态：（用于活动））计算记录的项目（表：）。`1``calendar`

以下查询需要 10 分钟才能运行！我怎样才能在几秒钟而不是几分钟内运行它？

```
SELECT
    c.day, COUNT(u.id) AS count
FROM calendar c
LEFT JOIN log l
    ON c.day = DATE_FORMAT(l.db_timestamp , '%Y-%m-%d')
LEFT JOIN user u
    ON l.user_id = u.id
    AND u.user_status_type_id = 1
WHERE
    c.day > '2012-12-01'
    AND c.day < '2013-01-01'
GROUP BY
    c.day 
```

表结构：

```
calendar (~3,000 rows)
day
===============================
2012-01-01
2012-01-02
2012-01-03
...
2020-01-01

log (~30,000 rows)
id  user_id  db_timestamp
================================
1   1        2012-01-01 01:01:01
1   2        2012-01-01 01:01:01
1   1        2012-01-01 01:01:01

user (~3,000,000 rows)
id  user_status_type_id
================================
1   1
1   0 
```

结果应如下所示：

```
Sample Expected Results
day         count
=================
2012-12-01  1
2012-12-02  0
2012-12-03  4
...
2012-12-31  0 
```

不幸的是，它需要永远运行。接下来我该怎么办？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T12:12:17.020

试试这个::`DATE()`加入时使用

```
 SELECT
        c.day, COUNT(u.id) AS count
    FROM calendar c
    LEFT JOIN log l
        ON c.day = DATE(l.db_timestamp)
    LEFT JOIN user u
        ON l.user_id = u.id
        AND u.user_status_type_id = 1
    WHERE
        c.day between '2013-01-01'
 AND '2012-12-01'
        GROUP BY
        c.day 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T14:07:46.650

对于您选择的列，您不需要任何连接。使用以下 sql

```
SELECT DATE_FORMAT(l.db_timestamp , '%Y-%m-%d') AS days, COUNT(l.id) AS COUNT 
FROM LOG l 
WHERE 
DATE_FORMAT(l.db_timestamp , '%Y-%m-%d') > '2012-12-01' 
AND DATE_FORMAT(l.db_timestamp , '%Y-%m-%d') < '2013-01-01'
GROUP BY days 
```

对于用户明智的计数

采用

```
GROUP BY days, l.user_id 
```

# qt - 如何通过 QTCPSocket 发送文件及其文件名？

> ID：13800664
> 
> 赞同：5
> 
> 时间：2012-12-10T12:09:40.377
> 
> 标签：qt, qtcpsocket, qtnetwork, qtcpserver

是否有任何简单的方法可以将包含文件名的文件发送到服务器，以便服务器和客户端中的文件名完全相同？

这是我的代码

# 发件人

```
QString path = QApplication::applicationDirPath()+"/belajardansa.bmp";
QFile inputFile(path);
QByteArray read ;
inputFile.open(QIODevice::ReadOnly);
while(1)
{
    read.clear();
    read = inputFile.read(32768*8);
    qDebug() << "Read : " << read.size();
    if(read.size()==0)
       break;
    qDebug() << "Written : " << socket->write(read);
    socket->waitForBytesWritten();
    read.clear();
}
inputFile.close(); 
```

# 接收者

```
QTcpSocket* socket = static_cast<QTcpSocket*>(sender());
QBuffer* buffer = buffers.value(socket);

QByteArray read = socket->read(socket->bytesAvailable());
qDebug() << "Read : " << read.size();

QFile file(  ???); // what should I put in the bracket???
if(!(file.open(QIODevice::Append)))
{
    qDebug("File cannot be opened.");
    exit(0);
}
file.write(read);
file.close(); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-10T13:12:26.770

1.  您可以创建自己的数据结构来表示文件内容及其文件名，并将其转换为 QByteArray，反之亦然。

2.  您可以发送两个请求：第一个带有文件名，第二个带有数据。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-12-10T13:34:51.023

没有真正简单的方法。您必须创建自己的协议。但是，该协议通常可以是非常非常简单的协议。

在写作结束时，简单的例子

1.  使用将 QString 文件名转换为 QByteArray`QString::toUtf8()`
2.  将 QByteArray 的长度作为二进制 int 写入套接字
3.  写入包含文件名的 QByteArray 中的套接字字节
4.  将文件长度作为二进制 int 写入套接字
5.  写入套接字文件中的字节
6.  关

在阅读结束时：

1.  读取整数告诉文件名的长度
2.  将那么多字节读取到 QByteArray
3.  使用将文件名从 QByteArray 转换为 QString`QString::fromUtf8()`
4.  读取整数告诉数据的长度
5.  继续读取字节并写入到文件，直到你得到那么多字节
6.  关

读写时，如果要在不同的计算机之间进行通信，应在写入前转换成网络字节序，读取后转换回主机字节序。您还可以决定定义，您使用“x86 字节排序”，并且任何使用不同 CPU 读取数据的人都需要转换...

# android - 如何在 android 中扫描 SD 卡以查找特定的文件扩展名？

> ID：13800667
> 
> 赞同：6
> 
> 时间：2012-12-10T12:09:49.473
> 
> 标签：android, sd-card, documents

我正在开发一个项目，该项目包含一个模块，用于从 sd 卡扫描 pdf、doc xls 文件并列出它们。我也想只列出文件夹。

因为我对android很陌生。任何人都有实现这一目标的想法。

这是我的代码：

```
public class MediaScannerWrapper implements  
MediaScannerConnection.MediaScannerConnectionClient {
    private MediaScannerConnection mConnection;
    private String mPath;
    private String mMimeType;

    // filePath - where to scan; 
    // mime type of media to scan i.e. "image/jpeg". 
    // use "*/*" for any media
    public MediaScannerWrapper(Context ctx, String filePath, String mime){
        mPath = filePath;
        mMimeType = mime;
        mConnection = new MediaScannerConnection(ctx, this);
    }

    // do the scanning
    public void scan() {
        mConnection.connect();
    }

    // start the scan when scanner is ready
    public void onMediaScannerConnected() {
        mConnection.scanFile(mPath, mMimeType);
        Log.w("MediaScannerWrapper", "media file scanned: " + mPath);
    }

    public void onScanCompleted(String path, Uri uri) {
        // when scan is completes, update media file tags
    }
} 
```

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-12-10T12:22:23.663

```
public void walkdir(File dir) {
    String pdfPattern = ".pdf";

    File[] listFile = dir.listFiles();

    if (listFile != null) {
        for (int i = 0; i < listFile.length; i++) {

            if (listFile[i].isDirectory()) {
                walkdir(listFile[i]);
            } else {
              if (listFile[i].getName().endsWith(pdfPattern)){
                              //Do what ever u want

              }
            }
        }
    }    } 
```

要搜索整个 sdcard，请使用此函数`walkdir(Environment.getExternalStorageDirectory());`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-10T12:24:05.633

使用[getExternalStorageDirectory()](http://developer.android.com/reference/android/os/Environment.html#getExternalStorageDirectory%28%29)获取 SD 卡路径。（不要硬编码）

遍历每个子文件夹，并检查具有所需扩展名的文件名。使用 String [endswith()](http://docs.oracle.com/javase/6/docs/api/java/lang/String.html#endsWith%28java.lang.String%29)方法检查文件名是否以扩展名结尾。

这是一个可能对您有所帮助[的示例代码。](http://www.mkyong.com/java/how-to-find-files-with-certain-extension-only/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-08-02T08:08:19.433

我建议使用 [`commons.io`](https://commons.apache.org/proper/commons-io/)处理符号链接和扩展解析的库。

扫描带有扩展名的文件的任务：

```
import android.os.AsyncTask;
import android.os.Environment;
import android.util.Log;
import org.apache.commons.io.FileUtils;

import java.io.File;
import java.util.ArrayList;
import java.util.List;

public class ScanTask extends AsyncTask<String,Void,ScanTask.Result> {

    @Override
    protected Result doInBackground(String... extensions) {

        if(extensions == null){
            extensions = new String[0];
        }

        List<File> files = new ArrayList<File>();
        boolean success = false;
        String status = "";

        if(Environment.getExternalStorageState().equals(Environment.MEDIA_MOUNTED)){
            try {
                files.addAll(FileUtils.listFiles(Environment.getExternalStorageDirectory(), extensions, true));
                success = true;
                status = "ok";
            } catch (Exception e) {
                Log.e("MyApp","File error:",e);
                success = false;
                status = "Scan error";
            }
        }else {
            success = false;
            status = "External storage not available";
        }

        return new Result(success,status,files);
    }

    public static class Result{
        public final boolean success;
        public final String message;
        public final List<File> files;

        public Result(boolean success, String message,List<File> files) {
            this.success = success;
            this.message = message;
            this.files = files;
        }
    }
} 
```

用法：

```
 ScanTask task = new ScanTask(){
        @Override
        protected void onPostExecute(Result result) {
            super.onPostExecute(result);

            if(result.success){
                List<File> files = result.files;
                //--do something with files--
            }else {
                String error = result.message;
                //--do something with error message--
            }
        }
    };

    task.execute("mp3","jpeg"); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-10-24T04:47:28.900

您可以使用此代码：
这是[链接](http://programondaspot.blogspot.com/2015/07/display-more-than-one-extension-files.html)。

```
/**
  * Class to filter files which are having .mp3 extension
  * */
//you can choose the filter for me i put .mp3
class FileExtensionFilter implements FilenameFilter {
    public boolean accept(File dir, String name) {
        return (name.endsWith(".pdf" ) || name.endsWith(".docs" )) || name.endsWith(".3gp" ) ;
    }
} 
```

# sql-server - 如何从 Db 中仅选择非空字段

> ID：13800679
> 
> 赞同：0
> 
> 时间：2012-12-10T12:10:19.430
> 
> 标签：sql-server, json

我正在编写一个依赖于 Ajax 请求从数据库中检索数据的应用程序，所需的信息在一组 Json 对象中传递，这意味着即使对于数据库的空字段，也会生成一对属性/值：

```
[{"field1":"value1","field2":"value2","field3":""},{"field1":"","field2":"","field3":""}] 
```

如何通过 SQL 仅从数据库中选择非空字段以避免生成和发送不必要的数据？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T12:28:30.153

像这样的东西

```
SELECT * FROM yourtable
WHERE LEN(valuefield) > 0 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T13:16:06.353

如果表中的数据为 NULL，那么您可以使用类似的方法选择适当的记录

```
SELECT [fieldList]
  FROM [tableName]
 WHERE [field_1] IS NOT NULL
    OR [field_2] IS NOT NULL
    OR [field_3] IS NOT NULL 
```

但是 - 如果您想从 JSON 中省略部分空记录的定义，例如

```
{"field1":"value1","field2":"value2","field3":""} 
```

被传送为

```
{"field1":"value1","field2":"value2"} 
```

然后，您需要通过自定义您正在使用的任何 JSON 序列化器来执行此操作。

# android - 从通知创建的活 动返回主活动

> ID：13800680
> 
> 赞同：40
> 
> 时间：2012-12-10T12:10:23.530
> 
> 标签：android

我正在尝试实现[此处](http://developer.android.com/design/patterns/navigation.html#into-your-app)描述的行为，其中通知（或其他）在您的应用程序中启动“内部”活动，然后当用户按下它时，它会转到我的“家庭”活动。

Android 文档说

> 在返回按钮的情况下，您应该***通过将完整的向上导航路径插入到任务的返回堆栈中来使导航更可预测到应用程序的最顶层屏幕***。这允许忘记如何进入您的应用程序的用户在退出之前导航到应用程序的最顶部屏幕。

有没有真正做到这一点的好方法？Stackoverflow 上的其他问题建议以告诉它开始内部活动的意图来启动主要活动，但这似乎是一个巨大的黑客攻击，我有点怀疑谷歌会在 Gmail 中使用它，我认为有一个不错的方法，给定他们提倡这种行为。

那么有没有一种非hacky的方法来做到这一点？

* * *

## 回答 #1

> 赞同：81
> 
> 时间：2012-12-10T12:42:00.207

啊哈，我只需要使用`PendingIntent.getActivities()`而不是`getActivity()`. 另外值得一提的是[`TaskStackBuilder`](http://developer.android.com/reference/android/support/v4/app/TaskStackBuilder.html)

这是一些代码：

```
 Intent backIntent = new Intent(ctx, MainActivity.class);
    backIntent.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK);

    Intent intent = new Intent(ctx, ConversationActivity.class);
    intent.putExtra("whatever", whatever);
    final PendingIntent pendingIntent = PendingIntent.getActivities(ctx, UNIQUE_REQUEST_CODE++,
            new Intent[] {backIntent, intent}, PendingIntent.FLAG_ONE_SHOT); 
```

刚刚测试过了。它就像一个魅力。我最初怀疑如果应用程序已经在运行，可能会出现问题，然后你去通知。即说你的活动堆栈是（最右边）：

```
[MainActivity] [SomeActivity] 
```

然后单击 的通知`ConversationActivity`。你会得到：？

```
[MainActivity] [SomeActivity] [MainActivity] [ConversationActivity] 
```

好吧，事实证明你神奇地得到了

```
[MainActivity] [SomeActivity] [ConversationActivity] 
```

这就是我想要的，但我不知道它是如何做到的。我没有对任何活动设置任何特殊选项。那好吧！

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2017-07-19T04:34:12.470

有一个关于如何做到这一点的新指南，它提出了一些与上述答案略有不同的做法：

[https://developer.android.com/guide/topics/ui/notifiers/notifications.html#NotificationResponse](https://developer.android.com/guide/topics/ui/notifiers/notifications.html#NotificationResponse)

请注意，实际上不要将`0`您的 requestCode 用于`getPendingIntent`. 对我来说，任何不是 0 的数字都有效，但 0 导致后退按钮只是转到启动器。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-12-10T12:34:40.317

我知道实现这一目标的两种方法：

1.  从通知开始`home activity`的活动开始。这可能会变得很棘手，因为您必须区分并跟踪各种可能的入口点。
2.  你总是从你开始，`home activity`它检查是否由通知启动，然后启动`notification activity`. 这确保了一致的入口点，并且当用户按下 Up 键时，返回堆栈将在那里。

问候。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2018-11-21T08:46:43.133

```
Intent displayIntent = new Intent(getApplicationContext(), TargetActivity.class);

displayIntent.putExtra("extra_id", "extra_key");

TaskStackBuilder stackBuilder = TaskStackBuilder.create(getApplicationContext());
stackBuilder.addParentStack(TargetActivity.class);
stackBuilder.addNextIntent(displayIntent);
stackBuilder.editIntentAt(1).putExtra("extra_id", "extra_key");

PendingIntent contentIntent = stackBuilder.getPendingIntent(0, PendingIntent.FLAG_UPDATE_CURRENT);

NotificationCompat.Builder mBuilder = new NotificationCompat.Builder(
        getApplicationContext(), "123").setSmallIcon(R.drawable.logo)
        .setContentTitle("GCM Notification")
        .setStyle(new NotificationCompat.BigTextStyle().bigText("Sample")).setContentText("sample text");

mBuilder.setContentIntent(contentIntent);

NotificationManager mNotificationManager = (NotificationManager) getSystemService(Context.NOTIFICATION_SERVICE);
mNotificationManager.notify(456, mBuilder.build());
stackBuilder.startActivities(); 
```

除了上述代码之外，还要在您的`AndroidManifest.xml`文件中提供适当的父类名称。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2021-01-26T16:25:10.213

答案在这个官方文档中非常适合我

[https://developer.android.com/training/notify-user/navigation#DirectEntry](https://developer.android.com/training/notify-user/navigation#DirectEntry)

[https://developer.android.com/training/notify-user/navigation#build_a_pendingintent_with_a_back_stack](https://developer.android.com/training/notify-user/navigation#build_a_pendingintent_with_a_back_stack)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2017-01-26T07:33:25.220

这个解决方案非常适合这个问题

```
android:noHistory="true" 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2014-01-10T18:18:34.870

好的。

但请注意，这在 3.0 之前（API 级别 11 之前）系统上不起作用，因为 PendingIntent.getActivities() 在那里不可用。

这与构造一个 backstack 以从通知（通过 Intent）访问活动并让后退按钮与您的应用程序一致（例如，详细活动返回到列表活动）是相同的。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2014-07-03T09:44:28.343

活动与一个任务相关联，该任务不过是后台堆栈中的一组活动。当您在单击通知时打开新活动时，该活动将作为独立活动打开并放入新任务中。这意味着只有通知活动和父活动存在。

只需在清单文件中将您的活动的启动模式指定为“标准”，它应该可以解决问题。

```
Intent resultIntent = new Intent(getApplicationContext(),
                        ResultActivity.class);

PendingIntent resultPendingIntent =
    PendingIntent.getActivity(getApplicationContext(),0,resultIntent,PendingIntent.FLAG_UPDATE_CURRENT);

mBuilder.setContentIntent(resultPendingIntent); 

NotificationManager mNotificationManager = (NotificationManager)
    getSystemService(Context.NOTIFICATION_SERVICE);
mNotificationManager.notify(notId, mBuilder.build()); 
```

显现：

```
<activity
            android:name="com.mns.exercisenotifications.ResultActivity"
            android:label="@string/app_name"
            android:launchMode="standard" >  <---
            <intent-filter>
                <action android:name="com.mns.exercisenotifications.ResultActivity" />
                <category android:name="android.intent.category.DEFAULT" />
            </intent-filter>

 </activity> 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2019-03-27T05:58:36.530

我知道我迟到了，但这可能会对某人有所帮助。
只需为要使用通知打开的活动创建一个意图。然后设置`Intent.FLAG_ACTIVITY_NEW_TASK`和`Intent.FLAG_ACTIVITY_CLEAR_TASK`作为标志。
然后您需要做的就是以`PendingIntent`您的意图作为参数创建一个。

这是一个代码示例：

```
Intent intent = new Intent(this, NotificationActivity.class);
intent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK | Intent.FLAG_ACTIVITY_CLEAR_TASK);
PendingIntent pendingIntent = PendingIntent.getActivity(this, 0, intent, 0); 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2019-03-20T20:03:40.220

只需将此行添加到您的清单中。

```
<activity
    android:name=".YourActivity"
    android:launchMode="singleTask"
    android:taskAffinity=""
    android:excludeFromRecents="true">
</activity> 
```

有关完整指南，请参阅[https://developer.android.com/training/notify-user/navigation](https://developer.android.com/training/notify-user/navigation)

# android - 使用通过 USB 连接的相机而不是内置相机

> ID：13800681
> 
> 赞同：10
> 
> 时间：2012-12-10T12:10:28.887
> 
> 标签：android, usb, android-camera

我想在 android 中创建一个应用程序，当将 USB 摄像头设备连接到 android 设备时，所有应用程序都应将外部摄像头检测为主摄像头。例如，如果我们打开相机应用程序，那么设备会从通过 USB 连接的设备中获取照片。有没有办法做到这一点？

请不要关闭这个问题，因为它不是一个真正的问题。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-24T13:43:41.947

你不能通过编写一个简单的应用程序来做到这一点，因为你不决定哪个是默认相机。这是由系统固件完成的，您无法通过 Android SDK 对其进行修改。

实现这一目标的唯一方法是在源代码级别自定义 Android，并添加代码以在可用时将默认摄像头自动切换到通过 USB 连接的摄像头。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-29T20:13:57.990

你可以使用 OpenCV，根据[这个文档](http://opencv.willowgarage.com/wiki/Android2.3.0#NativecamerasupportinOpenCV)，这很容易。

从默认凸轮捕获帧：

```
CvCapture* capture = cvCaptureFromCAM( CV_CAP_ANDROID + 0 ); 
```

从 USB 捕获帧：

```
CvCapture* capture = cvCaptureFromCAM( CV_CAP_ANDROID + 1 ); 
```

OpenCV 是开源的，你可以从[这里](http://sourceforge.net/projects/opencvlibrary/files/opencv-android/2.4.0/)获取源代码 ，你需要[Android cmake 项目](http://code.google.com/p/android-cmake/)

**编辑：**

android是一个基于linux的操作系统，你可以下载[安卓终端模拟器](https://play.google.com/store/apps/details?id=jackpal.androidterm&hl=en)和自定义你的音频和视频设置，就像在linux中一样，你可以在设备管理器中禁用内置摄像头或将设置更改为默认使用外部网络摄像头. 但我会完全亲自禁用内置摄像头。

# android - 从activitygroup tabhost android中的子标签组完成

> ID：13800685
> 
> 赞同：0
> 
> 时间：2012-12-10T12:11:00.327
> 
> 标签：android, android-tabhost

在 webview 中按下子活动的后退按钮时，我会强制关闭。我想完成孩子的活动并转到上一堂课。我的标签组活动如下

```
import java.lang.reflect.Field;

import java.util.ArrayList;

import java.util.Map;

import android.app.Activity;

import android.app.ActivityGroup;

import android.app.LocalActivityManager;

import android.content.Intent;

import android.os.Bundle;

import android.view.KeyEvent;

import android.view.Window;

/**
 * The purpose of this Activity is to manage the activities in a tab.

 * Note: Child Activities can handle Key Presses before they are seen here.

 * @author Eric Harlow

 */
public class TabGroupActivity extends ActivityGroup {

    private ArrayList<String> mIdList;

    @Override

    public void onCreate(Bundle savedInstanceState) {

        super.onCreate(savedInstanceState);       

        if (mIdList == null) mIdList = new ArrayList<String>();
    }

    /**
     * This is called when a child activity of this one calls its finish method. 
     * This implementation calls {@link LocalActivityManager#destroyActivity} on the child activity
     * and starts the previous activity.
     * If the last child activity just called finish(),this activity (the parent),
     * calls finish to finish the entire group.
     */

  @Override

  public void finishFromChild(Activity child) {

      LocalActivityManager manager = getLocalActivityManager();

      int index = mIdList.size()-1;

      if (index < 1) {

          finish();

          return;

      }
      System.out.println("Destroy called");

      boolean rt=destroy(mIdList.get(index),manager);

      System.out.println("Destroy called"+rt);

//      manager.destroyActivity(mIdList.get(index), true);

      mIdList.remove(index); index--;

      String lastId = mIdList.get(index);

      Intent lastIntent = manager.getActivity(lastId).getIntent();

      Window newWindow = manager.startActivity(lastId, lastIntent);

      setContentView(newWindow.getDecorView());
  }

  /**
   * Starts an Activity as a child Activity to this.

   * @param Id Unique identifier of the activity to be started.

   * @param intent The Intent describing the activity to be started.

   * @throws android.content.ActivityNotFoundException.
   */

  public void startChildActivity(String Id, Intent intent) {   

      Window window = 

getLocalActivityManager().startActivity(Id,intent.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP));

      if (window != null) {

          mIdList.add(Id);

          setContentView(window.getDecorView()); 
      }    
  }

  /**
   * The primary purpose is to prevent systems before android.os.Build.VERSION_CODES.ECLAIR

   * from calling their default KeyEvent.KEYCODE_BACK during onKeyDown.

   */

  @Override

  public boolean onKeyDown(int keyCode, KeyEvent event) {

      if (keyCode == KeyEvent.KEYCODE_BACK) {

          //preventing default implementation previous to 

android.os.Build.VERSION_CODES.ECLAIR

          return true;
      }

      return super.onKeyDown(keyCode, event);
  }

  /**
   * Overrides the default implementation for KeyEvent.KEYCODE_BACK 

   * so that all systems call onBackPressed().

   */
  @Override

  public boolean onKeyUp(int keyCode, KeyEvent event) {

      if (keyCode == KeyEvent.KEYCODE_BACK) {

          onBackPressed();

          return true;
      }

      return super.onKeyUp(keyCode, event);

  }

  /**
   * If a Child Activity handles KeyEvent.KEYCODE_BACK.

   * Simply override and add this method.

   */

  public void  onBackPressed() {

      int length = mIdList.size();

      if ( length > 1) {

          Activity current = getLocalActivityManager().getActivity(mIdList.get(length-1));

          System.out.println("Activity Being close"+current.getLocalClassName());

          this.finishFromChild(current);
      }  
  }

  public boolean destroy(String id,LocalActivityManager activityManager) {

    if(activityManager != null){

      activityManager.destroyActivity(id, false);

      // http://code.google.com/p/android/issues/detail?id=12359

      // http://www.netmite.com/android/mydroid/frameworks/base/core/java/android

/app/LocalActivityManager.java

      try {

        final Field mActivitiesField = 

LocalActivityManager.class.getDeclaredField("mActivities");

        if(mActivitiesField != null){

          mActivitiesField.setAccessible(true);

          @SuppressWarnings("unchecked")

          final Map<String, Object> mActivities = (Map<String, 

Object>)mActivitiesField.get(activityManager);

          if(mActivities != null){

            mActivities.remove(id);
          }

          final Field mActivityArrayField = 
LocalActivityManager.class.getDeclaredField("mActivityArray");

          if(mActivityArrayField != null){

            mActivityArrayField.setAccessible(true);

            @SuppressWarnings("unchecked")

            final ArrayList<Object> mActivityArray = 
(ArrayList<Object>)mActivityArrayField.get(activityManager);

            if(mActivityArray != null){

              for(Object record : mActivityArray){

                final Field idField = record.getClass().getDeclaredField("id");

                if(idField != null){

                  idField.setAccessible(true);

                  final String _id = (String)idField.get(record);

                  if(id.equals(_id)){

                    mActivityArray.remove(record);

                    break;
                  }

                }

              }
            }

          }
        }

      } catch (Exception e) {

        e.printStackTrace();
      }

      return true;

    }

    return false;
  }

} 
```

我使用了finish（），this.finish（），但它导致强制关闭错误。

我的日志如下。

在 ...TabGroupActivity.finishFromChild(TabGroupActivity.java:54)

第 54 行位于

```
 String lastId = mIdList.get(index); 
```

有人可以帮我解决这个问题。我坚持了半天。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T12:14:35.447

实现您自己的 WebView 并覆盖它的 onBackPress。这是伪代码

1) 实现一个类 ABC 扩展 WebView

2) 在 ABC .. 覆盖 onBackPress

3) 在 onBackPress() {finish(); }

# git - Post-receive hook does not recognize arguments

> ID：13800689
> 
> 赞同：0
> 
> 时间：2012-12-10T12:11:16.380
> 
> 标签：git

I use ssh to access a remote git repository. I add such a simple post-receive script in hooks directory:

```
#/bin/sh
REPO="$1"
REV="$2"
echo $REPO $REV >> /var/log/gitlog 
```

I changed the code in local PC and push many times, and I saw nothing in `/var/log/gitlog`. I have checked the permission of post-receive. Its file mask has been set to 777\. All users can execute the script on the console.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T12:13:40.327

That may be because that hook (**`post-receive`**) doesn't take any argument.

See [gitHooks](http://git-scm.com/docs/githooks#post-receive):

> This hook is invoked by git-receive-pack on the remote repository, which happens when a git push is done on a local repository. It executes on the remote repository once after all the refs have been updated.
> 
> This hook executes once for the receive operation. **It takes no arguments, but gets the same information as the `pre-receive` hook does on its standard input**.

[This answer](https://stackoverflow.com/a/4807486/6309) mentions:

> You have to use the `read` command.

```
#!/bin/sh
read oldrev newrev refname
... 
```

# mobile - 移动调查应用程序的架构

> ID：13800695
> 
> 赞同：11
> 
> 时间：2012-12-10T12:11:45.720
> 
> 标签：mobile, architecture

我即将启动一个用于调查的移动应用程序。将有 2 个用户：**Surveyor**和**Survey_Taker**。调查员将设计调查并将其发送给调查员。调查员完成调查并将其发回给调查员。

现在我需要在网络上托管一个数据库来同步来自调查员手机的数据，然后将其发送回调查员。或者我可以不用它吗？

想知道我是否可以发送带有将调查数据存储在文本文件中的功能的调查？那会有什么后果呢？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-18T14:03:05.677

进行调查的另一种选择是使用 Google 表单 [http://www.labnol.org/software/google-docs-forms-for-surveys/10056/](http://www.labnol.org/software/google-docs-forms-for-surveys/10056/)

确保：

*   在移动设备上观看良好
*   发送带有结果的电子邮件

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-10T12:51:45.990

您完全可以不用数据库，例如通过电子邮件将调查结果发送给调查员。但是，分析结果可能有点不舒服。因此，您对数据库的需求主要取决于您的报告要求。那么：你想用这些数据做什么？

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-12-18T08:29:00.700

作为一个移动应用程序，我肯定会考虑以下功能：

*   为调查添加书签
*   将调查存储在我的手机中以供以后完成
*   离线回答调查
*   将调查发送到服务器
*   核对收到的调查（以防调查的问题同时发生变化）

话虽如此，我会在移动设备上使用本地（文件？）存储，在服务器上使用数据库。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-12-18T13:17:58.300

我会建议一个瘦服务器负责存储和聚合一些报告数据。让服务器在客户端类型之间进行同步将被证明更加健壮。存储可以在文件中完成，比如 JSON 格式。或者，根据扩展需求，可以将存储切换到 NoSQL db。为了快速开始，您可以拥有一个 Node.js 服务器。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-19T14:21:10.293

先说小问题：

是的，您可以使用文本文件，但我认为 JSON 更简单。当印刷精美、明确且不受特殊字符影响时，它是人类可读的。

您可以拥有自己的简单 RESTful 数据库，可以使用一些大型应用程序网站（google 网站/fb / 等），甚至可以来回发送电子邮件，这取决于您。

您想要 HTML5 的客户端。

但是，您的系统最重要的方面 (*) 是对大多数用户的可用性 - 调查接受者。

考虑这个可怕的例子：

```
What is your age:
[ ] between 1 and 5
[ ] between 6 and 10
etc. 
```

然后考虑一下，绝对的调查杀手：

```
How much do you agree with the following:
                          not at all / not really / neutral / somewhat / a lot
My cat likes red              [ ]        [ ]          [ ]        [ ]      [ ]
Eggs are better than ham      [ ]        [ ]          [ ]        [ ]      [ ]
I don't take a bus            [ ]        [ ]          [ ]        [ ]      [ ]
I hate politics               [ ]        [ ]          [ ]        [ ]      [ ]
Fish is expensive             [ ]        [ ]          [ ]        [ ]      [ ]
Pollution is good             [ ]        [ ]          [ ]        [ ]      [ ]
Manager helped me a lot       [ ]        [ ]          [ ]        [ ]      [ ]
Repairman was not helpful     [ ]        [ ]          [ ]        [ ]      [ ]
Supervisor knows his shit     [ ]        [ ]          [ ]        [ ]      [ ]
Salesmen were friendly        [ ]        [ ]          [ ]        [ ]      [ ]
Office smells and looks nice  [ ]        [ ]          [ ]        [ ]      [ ] 
```

首先，您的用户对选择感到不知所措，许多人放弃了

然后有些混淆哪个框指的是哪个问题

然后有些人没有得到双重否定“不同意修理工没有帮助”

最终，完成您的调查的唯一用户是那些随机选择答案的用户和少数有强烈感受的用户。无论哪种方式，结果都是纯粹的垃圾——随机性和夸张性混合在一起。

现在考虑一个设计更好的调查界面：

```
What was your impression?
[smiley]<====[slider]====>[angry]

How far do you live from our store?
[house]<=====[slider]=====>[mountain]

# slider icon changes as you drag it:
# house/block/road/highway/city/mountain 
```

当您的调查快速而切题时，您将获得更多答案。

一个好的调查还有很多内容，例如问题不应该是暗示性的（您有多*喜欢*我们的服务？），问题必须是明确的（我们的新部分怎么样？），问题不能太个人化（什么时候做你的孩子死了吗？）等等。我想很多书都是关于这个主题的，但你不能轻易地在你的系统中强制执行这一点。

(*) 我假设选择参加您的调查的普通用户，我不考虑用户被迫参加的情况，例如学校考试。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-05-11T17:40:02.480

对于移动调查，请查看[http://askmeqr.com](http://askmeqr.com) - 它是 Google 表单生成器的移动版本。

# drupal - Drupal - 2 个单独的提要更新同一组节点（提要模块）

> ID：13800697
> 
> 赞同：3
> 
> 时间：2012-12-10T12:11:46.520
> 
> 标签：drupal, drupal-7, drupal-feeds

我正在使用提要模块将一组出版物拉入 Drupal 内容类型。它们被设置为使用 cron 定期运行。我有两个单独的提要，它们的工作方式如下：

*   Feed 1 (pure_feed) - 拉入大部分字段
*   Feed 2 (harvard_format) - 访问单独的 url 源并更新内容类型的一个字段。

我遇到的问题是提要 2 总是创建一组新节点，而不是更新现有节点（使用提要 1 创建的节点）。我在 /import 中使用了调试选项，可以看到提要 2 的 GUID 与提要 1 的 GUID 匹配，但它仍然创建 2 组节点，而不是更新 1 组节点。

以下是 feeds_items 数据库表的摘录：

![饲料 1](../Images/cf0a95ff6f79cded63fa02f781dca55e.png)

![饲料 2](../Images/27a4e0efb27144ff7d38f102179c063f.png)

如您所见，它们都具有相同的 GUID，但它们被映射到不同的节点。有没有办法让第二个提要映射到与第一个提要相同的节点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T16:55:40.173

我拼凑了一些东西，使我的第二个提要能够从我的第一个提要更新节点。不确定这是否是正确的做事方式，但它确实有效。以下是我所做的，以防将来对其他人有所帮助：

*   创建了一个扩展 FeedsNodeProcessor 的自定义处理器
*   将 FeedsNodeProcessor 的所有函数复制到新类。
*   按如下方式覆盖了 existingEntityId 函数（harvard_format 是我的辅助提要，pure_feed 是我的主要提要）：

受保护的函数existingEntityId（FeedsSource $source，FeedsParserResult $result）{

```
if($source->id == 'harvard_format') {

  $query = db_select('feeds_item')
    ->fields('feeds_item', array('entity_id'))
    ->condition('feed_nid', $source->feed_nid)
    ->condition('entity_type', $this->entityType())
    ->condition('id', 'pure_feed');

  // Iterate through all unique targets and test whether they do already
  // exist in the database.
  foreach ($this->uniqueTargets($source, $result) as $target => $value) {
    switch ($target) {
      case 'url':
        $entity_id = $query->condition('url', $value)->execute()->fetchField();
        break;
      case 'guid':
        $entity_id = $query->condition('guid', $value)->execute()->fetchField();
        break;
    }
    if (isset($entity_id)) {
      // Return with the content id found.
      return $entity_id;
    }
  }
  return 0;
}
elseif ($nid = parent::existingEntityId($source, $result)) {
  return $nid;
} else {

  // Iterate through all unique targets and test whether they do already
  // exist in the database.
  foreach ($this->uniqueTargets($source, $result) as $target => $value) {
    switch ($target) {
      case 'nid':
        $nid = db_query("SELECT nid FROM {node} WHERE nid = :nid", array(':nid' => $value))->fetchField();
        break;
      case 'title':
        $nid = db_query("SELECT nid FROM {node} WHERE title = :title AND type = :type", array(':title' => $value, ':type' => $this->config['content_type']))->fetchField();
        break;
      case 'feeds_source':
        if ($id = feeds_get_importer_id($this->config['content_type'])) {
          $nid = db_query("SELECT fs.feed_nid FROM {node} n JOIN {feeds_source} fs ON n.nid = fs.feed_nid WHERE fs.id = :id AND fs.source = :source", array(':id' => $id, ':source' => $value))->fetchField();
        }
        break;
    }
    if ($nid) {
      // Return with the first nid found.
      return $nid;
    }
  }
  return 0;
} 
```

}

*   从 FeedsProcessor 跨 Process 和 newItemInfo 函数复制。
*   重写 newItemInfo 如下：

受保护的函数 newItemInfo($entity, $feed_nid, $hash = '') {

```
$entity->feeds_item = new stdClass();
$entity->feeds_item->entity_id = 0;
$entity->feeds_item->entity_type = $this->entityType();
// Specify the feed id, otherwise pure_feed's entries in the feeds_item table will be changed to harvard_format
$entity->feeds_item->id = ($this->id == "harvard_format") ? "pure_feed" : $this->id; 
$entity->feeds_item->feed_nid = $feed_nid;
$entity->feeds_item->imported = REQUEST_TIME;
$entity->feeds_item->hash = $hash;
$entity->feeds_item->url = '';
$entity->feeds_item->guid = ''; 
```

}

# opengl - OpenGL，目标聚光灯“在房间里跟着我”！

> ID：13800700
> 
> 赞同：0
> 
> 时间：2012-12-10T12:11:53.310
> 
> 标签：opengl, glsl, light

我正在实施目标聚光灯。我有光锥，衰减和所有这些都可以正常工作。问题是当我围绕空间中的某个点旋转相机时，灯光似乎跟随它，即无论相机在哪里，光总是相对于相机处于相同的角度。

这是我在顶点着色器中所做的：

```
void main()
{
    // Compute vertex normal in eye space.

    attrib_Fragment_Normal = (Model_ViewModelSpaceInverseTranspose * vec4(attrib_Normal, 0.0)).xyz;

    // Compute position in eye space.

    vec4 position = Model_ViewModelSpace * vec4(attrib_Position, 1.0);

    // Compute vector between light and vertex.

    attrib_Fragment_Light = Light_Position - position.xyz;

    // Compute spot-light cone direction vector.

    attrib_Fragment_Light_Direction = normalize(Light_LookAt - Light_Position);

    // Compute vector from eye to vertex.

    attrib_Fragment_Eye = -position.xyz;

    // Output texture coord.

    attrib_Fragment_Texture = attrib_Texture;

    // Return position.

    gl_Position = Camera_Projection * position;
} 
```

我有一个由 Light_Position 和 Light_LookAt 定义的目标聚光灯（注视当然是聚光灯正在注视的空间点）。position 和 lookAt 都已经在眼睛空间中。我通过从它们两者中减去相机位置来计算眼睛空间 CPU 端。

然后，在顶点着色器中，我继续制作从灯光位置到灯光lookAt 点的光锥向量，它通知像素着色器光锥的主轴在哪里。

在这一点上，我想知道我是否也必须转换向量，如果是的话，怎么做？我已经尝试过视图矩阵的逆转置，但没有成功。

谁能带我完成这个？

这是完整性的像素着色器：

```
void main(void)
{   
    // Compute N dot L.

    vec3 N = normalize(attrib_Fragment_Normal);
    vec3 L = normalize(attrib_Fragment_Light);  
    vec3 E = normalize(attrib_Fragment_Eye);
    vec3 H = normalize(L + E);

    float NdotL = clamp(dot(L,N), 0.0, 1.0);
    float NdotH = clamp(dot(N,H), 0.0, 1.0);

    // Compute ambient term.

    vec4 ambient = Material_Ambient_Colour * Light_Ambient_Colour;

    // Diffuse.

    vec4 diffuse = texture2D(Map_Diffuse, attrib_Fragment_Texture) * Light_Diffuse_Colour * Material_Diffuse_Colour * NdotL;

    // Specular.

    float specularIntensity = pow(NdotH, Material_Shininess) * Material_Strength;

    vec4 specular = Light_Specular_Colour * Material_Specular_Colour * specularIntensity;

    // Light attenuation (so we don't have to use 1 - x, we step between Max and Min).

    float d = length(-attrib_Fragment_Light);

    float attenuation = smoothstep( Light_Attenuation_Max, 
                                    Light_Attenuation_Min, 
                                    d);

    // Adjust attenuation based on light cone.

    vec3 S = normalize(attrib_Fragment_Light_Direction);

    float LdotS = dot(-L, S);
    float CosI = Light_Cone_Min - Light_Cone_Max;

    attenuation *= clamp((LdotS - Light_Cone_Max) / CosI, 0.0, 1.0);

    // Final colour.

    Out_Colour = (ambient + diffuse + specular) * Light_Intensity * attenuation;    
} 
```

感谢以下回复。我仍然无法解决这个问题。我现在正在将光转换为眼睛空间 CPU 端。所以不需要对光进行变换，但它仍然不起作用。

```
// Compute eye-space light position.

Math::Vector3d eyeSpacePosition = MyCamera->ViewMatrix() * MyLightPosition;

MyShaderVariables->Set(MyLightPositionIndex, eyeSpacePosition);

// Compute eye-space light direction vector.

Math::Vector3d eyeSpaceDirection = Math::Unit(MyLightLookAt - MyLightPosition);

MyCamera->ViewMatrixInverseTranspose().TransformNormal(eyeSpaceDirection);

MyShaderVariables->Set(MyLightDirectionIndex, eyeSpaceDirection); 
```

...在顶点着色器中，我正在这样做（如下）。据我所知，光在眼睛空间中，顶点被转换为眼睛空间，光照矢量（attrib_Fragment_Light）在眼睛空间中。然而向量永远不会改变。原谅我有点厚！

```
// Transform normal from model space, through world space and into eye space (world * view * normal = eye).

attrib_Fragment_Normal = (Model_WorldViewInverseTranspose * vec4(attrib_Normal, 0.0)).xyz;

// Transform vertex into eye space (world * view * vertex = eye)

vec4 position = Model_WorldView * vec4(attrib_Position, 1.0);

// Compute vector from eye space vertex to light (which has already been put into eye space).

attrib_Fragment_Light = Light_Position - position.xyz;

// Compute vector from the vertex to the eye (which is now at the origin).

attrib_Fragment_Eye = -position.xyz;

// Output texture coord.

attrib_Fragment_Texture = attrib_Texture; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T13:55:11.823

您不能仅通过减去相机位置来计算眼睛位置，您必须乘以模型视图矩阵。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T15:29:10.267

看起来你在这里减去`Light_Position`，我假设你想成为一个世界空间坐标（因为你似乎对它当前在眼睛空间中感到沮丧），从`position`，这是一个眼睛空间向量。

```
// Compute vector between light and vertex.
attrib_Fragment_Light = Light_Position - position.xyz; 
```

如果要减去两个向量，它们必须都在同一个坐标空间中。如果你想在世界空间中进行光照计算，那么你应该使用世界空间位置向量，而不是视图空间位置向量。

That means multiplying the `attrib_Position` variable with the **Model** matrix, not the **ModelView** matrix, and using this vector as the basis for your light computation.

# c++ - 流式传输到 HTTP 响应的 Word 文档导致 401 身份验证需求

> ID：13800711
> 
> 赞同：0
> 
> 时间：2012-12-10T12:12:41.260
> 
> 标签：c++, iis-7, asp-classic, iis-7.5

大家早上好，

我有一个使用经典 ASP 的 Web 应用程序，托管在 IIS 7.5 上。我需要创建一个 word 文档并流回客户端进行显示，但是当文档流式传输到响应中时（IIS 设置？）导致 401 错误 - 我无法追踪它。

一位同事非常友好地为我提供了一些处理文档构建和流式传输的 C++ 代码以及一个构建 COM 对象并进行调用等的 ASP 页面。

该文档作为模板在我的 ASP 应用程序外部的 IIS 虚拟目录中开始使用。我们制作一个副本，执行一些查找和替换操作，然后使用正确的 MIME 类型将其流式传输到响应中，以便浏览器以它认为合适的方式处理它。

似乎一旦发生流式传输（通过调用`ASPTypeLibrary::IResponsePtr piResponse->BinaryWrite()`），就会发回 401 响应，直到那一刻响应看起来很好。

该站点使用表单身份验证，此时我已登录，我在提琴手中看到的请求肯定具有有效的会话数据，并且站点的其余部分对我的身份验证感到满意。

有任何想法吗？（他带着绝望的语气问道）

ps 我意识到我没有列出所有的代码，如果有帮助的话我可以......

* * *

剧情变厚了……

我已经成功地使用 ASP 页面使用和`ADODB.Stream`对象将文件流式传输到输出中。

当这成功时，Fiddler 拾取两个 HTTP 请求/响应；第一个请求返回 401，然后浏览器发送另一个带有不同 cookie 数据的请求，返回成功结果。

当使用我的 COM 对象时，会发生两个请求，但第二个请求也会收到 401...

指向与 COM 对象有关的一些安全设置？我没有添加到 COM 对象的响应中？

* * *

根据我对 Eric 的回复，我的同事施展了一些魔法，让事情顺利进行，但我仍然有点困惑为什么会这样……

魔术阿尔改变的那一行是这样的：

```
piResponse->AddHeader( _T("Content-Length"), (LPCTSTR)Length ); 
```

在建立响应时调用它，他所做的就是将其注释掉。

显然，他注意到由 写入的`BinaryWrite`长度比文件的长度大 13 个字节。他告诉我这可能是因为它正在写出`Variant`它给出的保留字块。

所以响应头有点乱，结果是我忽略的提琴手中的 HTTP 违规错误，并且在客户端和 COM 对象之间的某个地方，损坏的 200 响应被替换为 401。

我想这个故事的寓意是您应该始终注意提琴手的错误并确保您的错误`Content-Length`是正确的。

我的新问题是为什么 401？为什么不是500？什么可能会抛出这个？它来自 IIS 吗？

这是用于交换的 HTTP 文本提琴手注册：

```
GET GET [The page address - its on localhost and is an ASP page] HTTP/1.1
Accept: text/html, application/xhtml+xml, */*
Accept-Language: en-GB
User-Agent: Mozilla/5.0 (compatible; MSIE 9.0; Windows NT 6.1; WOW64; Trident/5.0)
Accept-Encoding: gzip, deflate
Connection: Keep-Alive
Host: localhost
Cookie: SessionUID={E41F5378-FBE2-475E-8F9A-6416AFE2BAA0}; DisplayMethod=0; ShowDataTips=1; LOGONUSER={UserName Info}ASPSESSIONIDQARAQRBD={Session ID}  Authorization: Negotiate YH8GBisGAQUFAqB1MHOgMDAuBgorBgEEAYI3AgIKBgkqhkiC9xIBAgIGCSqGSIb3EgECAgYKKwYBBAGCNwICHqI/BD1OVExNU1NQAAEAAACXsgjiCwALADIAAAAKAAoAKAAAAAYBsR0AAAAPRE9DREVWLUpDV0RFVkVMT1BNRU5U

HTTP/1.1 401 Unauthorized
Content-Type: text/html; charset=us-ascii
Server: Microsoft-HTTPAPI/2.0
WWW-Authenticate: Negotiate oYIBYTCCAV2gAwoBAaEMBgorBgEEAYI3AgIKooIBRgSCAUJOVExNU1NQAAIAAAAWABYAOAAAABXCieJQEtMwe36vajD3zwEAAAAA9AD0AE4AAAAGAbEdAAAAD0QARQBWAEUATABPAFAATQBFAE4AVAACABYARABFAFYARQBMAE8AUABNAEUATgBUAAEAFABEAE8AQwBEAEUAVgAtAEoAQwBXAAQAOABEAGUAdgBlAGwAbwBwAG0AZQBuAHQALgBEAG8AYwB1AG0AYQB0AGkAbwBuAC4AYwBvAC4AdQBrAAMATgBEAE8AQwBEAEUAVgAtAEoAQwBXAC4ARABlAHYAZQBsAG8AcABtAGUAbgB0AC4ARABvAGMAdQBtAGEAdABpAG8AbgAuAGMAbwAuAHUAawAFACAARABvAGMAdQBtAGEAdABpAG8AbgAuAGMAbwAuAHUAawAHAAgAKRk7jhfZzQEAAAAA
Date: Thu, 13 Dec 2012 09:52:25 GMT
Content-Length: 341
Proxy-Support: Session-Based-Authentication

<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN""http://www.w3.org/TR/html4/strict.dtd">
<HTML><HEAD><TITLE>Not Authorized</TITLE>
<META HTTP-EQUIV="Content-Type" Content="text/html; charset=us-ascii"></HEAD>
<BODY><h2>Not Authorized</h2>
<hr><p>HTTP Error 401\. The requested resource requires user authentication.</p>
</BODY></HTML>

------------------------------------------------------------------

GET [The page address - its on localhost and is an ASP page] HTTP/1.1
Accept: text/html, application/xhtml+xml, */*
Accept-Language: en-GB
User-Agent: Mozilla/5.0 (compatible; MSIE 9.0; Windows NT 6.1; WOW64; Trident/5.0)
Accept-Encoding: gzip, deflate
Connection: Keep-Alive
Cookie: SessionUID={E41F5378-FBE2-475E-8F9A-6416AFE2BAA0}; DisplayMethod=0; ShowDataTips=1; LOGONUSER={UserName Info}ASPSESSIONIDQARAQRBD={Session ID}
Authorization: Negotiate oXcwdaADCgEBoloEWE5UTE1TU1AAAwAAAAAAAABYAAAAAAAAAFgAAAAAAAAAWAAAAAAAAABYAAAAAAAAAFgAAAAAAAAAWAAAABXCiOIGAbEdAAAAD4GPyFfTAkcs1KpJqG4eT0ujEgQQAQAAAPUXp1AtIpqEAAAAAA==
Host: localhost

HTTP/1.1 401 Unauthorized
Cache-Control: private
Content-Type: text/html; charset=utf-8
Server: Microsoft-IIS/7.5
WWW-Authenticate: Negotiate
WWW-Authenticate: NTLM
X-Powered-By: ASP.NET
Date: Thu, 13 Dec 2012 09:52:27 GMT
Content-Length: 6630
Proxy-Support: Session-Based-Authentication

<HTML Page telling you about the error which gets displayed when you cancel the authentication dialog.> 
```

# java - 一天工作后发现httpclient泄漏

> ID：13800713
> 
> 赞同：0
> 
> 时间：2012-12-10T12:12:48.390
> 
> 标签：java, android, memory-leaks, urlconnection

如果在我的应用程序中使用此源代码，则第一次没有问题，但是如果我关闭 wifi 并尝试从 Web 服务获取一些资源，我的应用程序会抛出异常状态：发现泄漏，我使用 httpclient 的关闭方法，但没有任何变化，在使用此代码的两天后，会引发异常。

堆栈打印：

```
10-17 16:42:00.524: ERROR/AndroidHttpClient(931): Leak found
10-17 16:42:00.524: ERROR/AndroidHttpClient(931): java.lang.IllegalStateException: AndroidHttpClient created and never closed 
```

代码 ：

```
public String getRequest(String url, ArrayList<NameValuePair> nameValuePairs){
    String resp = "";

        HttpParams httpParameters = new BasicHttpParams();
        HttpProtocolParams.setContentCharset(httpParameters, HTTP.UTF_8);
        HttpProtocolParams.setHttpElementCharset(httpParameters, HTTP.UTF_8);

        AndroidHttpClient httpclient = null;

        try {

            httpclient  = AndroidHttpClient.newInstance("V");

            httpclient.getParams().setParameter("http.protocol.content-charset", HTTP.UTF_8);

            HttpPost httppost = new HttpPost(url);

            httppost.setEntity(new UrlEncodedFormEntity(nameValuePairs,HTTP.UTF_8));  

            HttpResponse response = httpclient.execute(httppost);

            HttpEntity entity = response.getEntity();
            InputStream instream = entity.getContent();

            Reader reader = new InputStreamReader(instream, HTTP.UTF_8);

            StringBuilder buffer = new StringBuilder("");

            char[] tmp = new char[1024];
            int l;
            while ((l = reader.read(tmp)) != -1) {
                buffer.append(tmp, 0, l);
            }

            reader.close();

            resp = buffer.toString().replace("&quot;", "\"");

            Log.d("V", "RESPONSE:-----\n" + resp + "\n--------------");

        } catch (IOException e){

            Log.e("V IOException [Send Request]","IO Exception");
            if((e != null) && (e.getMessage() != null)){
                Log.e("V",e.getMessage().toString());
            }

        } catch (Exception e) { 

            Log.e("V Exception [Send Request]","Exception Requester");
            if((e != null) && (e.getMessage() != null)){
                Log.e("V",e.getMessage().toString());
            }

        }finally {
            if (httpclient != null && httpclient.getConnectionManager() != null) {
                httpclient.close();
                httpclient = null;
            }
        }

        return resp;

    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T12:29:37.960

试试：httppost.abort(); 在最后。另外，我不认为为每个请求创建一个 httpclient 是一个好主意，我认为最好将 http 客户端创建为实例变量并为每个请求重用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-07T14:12:02.227

我可能会建议使用 EntityUtils 类来做你正在做的事情，而不是你正在尝试做的事情。它将解决大部分问题

# android - 如何从一个活动导航到另一个活动 onPreferenceClick

> ID：13800715
> 
> 赞同：-1
> 
> 时间：2012-12-10T12:13:08.537
> 
> 标签：android, android-intent, sharedpreferences

```
customPref.setOnPreferenceClickListener(new OnPreferenceClickListener() {

                public boolean onPreferenceClick(Preference preference) {

                     Toast.makeText(getBaseContext(),
                     "The custom preference has been clicked",
                     Toast.LENGTH_LONG).show();
                     SharedPreferences customSharedPreference =
                     getSharedPreferences(
                     "myCustomSharedPrefs", Activity.MODE_PRIVATE);
                     SharedPreferences.Editor editor =
                     customSharedPreference
                     .edit();
                     editor.putString("myCustomPref",
                     "The preference has been clicked");
                     editor.commit();
                    return true;
                }

            }); 
```

上面的代码工作正常

但是当我尝试使用以下

```
customPref.setOnPreferenceClickListener(new OnPreferenceClickListener() {

                public boolean onPreferenceClick(Preference preference) {

                    Intent int1 = new Intent(getBaseContext(),
                            termandcondition.class);
                    getBaseContext().startActivity(int1);

                    return true;
                }

            }); 
```

它给出了错误，请告诉我如何实现它

日志

```
12-10 15:34:20.405: E/AndroidRuntime(377): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.adodis.taxmann/com.adodis.taxmann.termandcondition}: java.lang.NullPointerException  Error is coming 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T12:15:05.940

利用

```
 Intent int1 = new Intent(Current_Activity.this,
                            termandcondition.class);
                    Current_Activity.this.startActivity(int1); 
```

代替

```
 Intent int1 = new Intent(Current_Activity.this,
                            termandcondition.class);
                    Current_Activity.this.startActivity(int1); 
```

用于开始新的活动使用`Current Activity`或`getApplicationContext()`上下文而不是`getBaseContext()`上下文

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T12:17:44.470

尝试从 xml 文件中执行它..这样：

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
      package="com.mycompany.myapp" android:versionName="1.3" android:versionCode="4">

...

    <activity android:name=".termandcondition" 
              android:label="@string/my_activity_title"
              android:theme="@android:style/Theme.Black.NoTitleBar">
        <intent-filter>
           <action android:name=".termandcondition" />
           <category android:name="android.intent.category.DEFAULT" />
       </intent-filter>
    </activity> 
```

然后在 Preferences xml 文件中：

```
<?xml version="1.0" encoding="utf-8"?>
<PreferenceScreen xmlns:android="http://schemas.android.com/apk/res/android" >

<ListPreference
    android:entries="@array/listOptions"
    android:entryValues="@array/listValues"
    android:key="listpref"
    android:summary="Sharing Taxmann Application"
    android:title="Share Application" />

<PreferenceCategory>
    <ListPreference
        android:entries="@array/listOptions2"
        android:entryValues="@array/listValues2"
        android:key="listprefrefresh"
        android:summary="set Refresh The Applciation"
        android:title="Set TIme Intervale" />
</PreferenceCategory>
<PreferenceCategory>
    <ListPreference
        android:entries="@array/listOptions3"
        android:entryValues="@array/listValues3"
        android:key="listtaxmann"
        android:summary="About Taxmann"
        android:title="Taxmann" />
</PreferenceCategory>

<PreferenceCategory
        android:title="@string/my_activity_title">
    <PreferenceScreen
                android:key="customPref"
        android:title="Term and Condition"
        android:summary="END-USER LICENCE AGREEMENT FOR USING WWW.TAXMANN.COM"
        <intent android:action=".termandcondition"/>
    </PreferenceScreen>
</PreferenceCategory> 
```

# javascript - 如何在 Microsoft crm Dynamics 2011 中设计复杂的 sql 查询

> ID：13800719
> 
> 赞同：0
> 
> 时间：2012-12-10T12:13:26.410
> 
> 标签：javascript, sql, dynamics-crm

我正在尝试从 Microsoft CRM Dynamics 2011 后端数据库获取我网站上的数据。我需要做一个加入声明，但我不知道如何在 CRM 中实现它。

# iphone - 按下按钮时更改语言 Xcode

> ID：13800727
> 
> 赞同：0
> 
> 时间：2012-12-10T12:13:43.393
> 
> 标签：iphone, objective-c, ios, multilingual

我想让我的应用程序多语言。我知道该怎么做。但问题是，用户应先更改手机语言，然后才能进行翻译。

我想要做的是：我有 3 个按钮。荷兰语、英语、法语。当用户按下按钮时。应用程序的语言更改为适当的语言。但手机的语言保持不变。

希望任何人都可以帮助我！

亲切的问候

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T12:56:05.350

但是不同的翻译成不同的文件。根据用户触摸的按钮加载所需的文件。

如果这不能回答您的问题，请更具体地说明您的问题是什么。

# android - 自定义 ArrayAdapter 的 getView() 不被叫

> ID：13800736
> 
> 赞同：0
> 
> 时间：2012-12-10T12:14:11.973
> 
> 标签：android, android-listview

我的自定义适配器如下。我的目标是在一个中显示，即将到来的和过去的约会`ListView`。所以我决定一起去`Custom ArrayAdapter`。但我不知道为什么 getView() 没有被调用。也覆盖`getCount()`了 50 作为大小`items`

```
public class AppointmentListAdapter extends ArrayAdapter<Item> {

    List<Item> items;
    private Context context;    
    private LayoutInflater vi;
    public static boolean pastApptSectionDrawn = false;
    private int healowUserId, portalUserId;

    public AppointmentListAdapter(Context context, List<Item> items, int healowUserId, int portalUserId){
        super(context, 0, items);
        this.context = context;
        this.items = items;
        vi = (LayoutInflater)context.getSystemService(Context.LAYOUT_INFLATER_SERVICE);     
        this.healowUserId = healowUserId;
        this.portalUserId = portalUserId;
    }

    @Override
    public int getCount() {
        return this.items.size();
    }   

    @Override
    public View getView(int position, View convertView, ViewGroup parent){
        System.out.println("getView of AppointmentListAdapter...");
        View v = convertView;
        final Item item = items.get(position);      
        if(item != null){
            if(item.isSection()){
                ApptListSection si = (ApptListSection)item;
                String title = si.getTitle();
                v = vi.inflate(R.layout.appointment_list_section, null);
                v.setOnClickListener(null);
                v.setOnLongClickListener(null);
                v.setLongClickable(false);
                View apptSectionShape = v.findViewById(R.id.apptSectionShape);
                TextView apptSectionTitle = (TextView) v.findViewById(R.id.apptSectionTitle);
                if(apptSectionShape != null)
                    apptSectionShape.setBackgroundResource(si.getBgResourceId());
                if(apptSectionTitle != null)
                    apptSectionTitle.setText(si.getTitle());

                final TextView sectionView = (TextView) v.findViewById(R.id.list_item_section_text);                
                sectionView.setText(title);
                if(Global.NO_UPCOMING_APPT.equals(title)){
                    final LinearLayout sectionItemLayout = (LinearLayout) v.findViewById(R.id.section_item_layout);
                    sectionItemLayout.setMinimumHeight(CommonUtilities.getDPEquivalentPixels(this.context, 60F));                   
                    sectionItemLayout.setBackgroundColor(Color.WHITE);
                    sectionItemLayout.setGravity(Gravity.CENTER);
                    sectionView.setTextSize(18);
                    sectionView.setTextColor(Color.BLACK);
                    sectionView.setBackgroundColor(Color.WHITE);
                    sectionView.setGravity(Gravity.CENTER);                 
                }
            }else{
                Appointment appt = (Appointment)item;
                v = vi.inflate(R.layout.list_items_appointments_loading, null);
                final TextView appointmentDate = (TextView) v.findViewById(R.id.appointmentDate);
                final TextView practiceName = (TextView) v.findViewById(R.id.txtApptProviderName);
                final TextView apptReason = (TextView) v.findViewById(R.id.txtApptReason);
                final TextView txtDayOfMonth = (TextView) v.findViewById(R.id.txtDayOfMonth);
                final TextView txtMonthYear = (TextView) v.findViewById(R.id.txtMonthYear);
                final TextView txtDayOfWeek = (TextView) v.findViewById(R.id.txtDayOfWeek);
                final TextView txtApptTime = (TextView) v.findViewById(R.id.txtApptTime);
                int colorIndCode;
                if(appt.isPastAppointment()){
                    colorIndCode = Color.parseColor("#e4a83c");                  
                }else{
                    colorIndCode = Color.parseColor("#69cbd8");
                }

                txtDayOfMonth.setTextColor(colorIndCode);
                txtDayOfWeek.setTextColor(colorIndCode);

                if(appointmentDate != null){
                    Calendar cal = Calendar.getInstance();                  
                    Date startDateTime = appt.getStartDateTime();
                    cal.setTime(startDateTime);

                    //StringBuilder timeBuilder = new StringBuilder(new SimpleDateFormat("MMM").format(startDateTime)+ " " + cal.get(Calendar.DAY_OF_MONTH)+ ", " + cal.get(Calendar.YEAR)+ " ");
                    StringBuilder timeBuilder = new StringBuilder("");
                    int hour = cal.get(Calendar.HOUR);
                    timeBuilder.append(((hour<10)?"0":"") + hour + ":");
                    int mins = cal.get(Calendar.MINUTE);
                    timeBuilder.append(((mins<10)?"0":"") + mins + " ");
                    timeBuilder.append(cal.get(Calendar.AM_PM) == Calendar.AM ? "AM":"PM");

                    appointmentDate.setText(timeBuilder.toString());
                    txtDayOfMonth.setText((cal.get(Calendar.DAY_OF_MONTH)));
                    String month_year = new SimpleDateFormat("MMM").format(startDateTime) + " " + cal.get(Calendar.YEAR);
                    txtMonthYear.setText(month_year);
                    txtDayOfWeek.setText(new SimpleDateFormat("EEEE").format(startDateTime));
                    txtApptTime.setText(timeBuilder.toString());

                }

                if(practiceName != null){
                    practiceName.setText(appt.getUfname() + " " + appt.getUlname());
                }

                if(apptReason != null){
                    apptReason.setText(appt.getReason());
                }               

                //Write the code to decide on note & reminder symbol 

            }
        }           
        return v;
    }

}` 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T12:16:20.820

嘿，请检查您传递 0 的自定义适配器构造函数。在那里您应该将列表项对象传递给超类构造函数。根据您的代码，这是我发现的错误。

如果您需要两个不同的视图，那么您做错了，您应该覆盖 AdapterClass 中的 getViewTypeCount() 和 getItemViewType() 以在 ListView 中显示两个不同的视图。

您可以在 getView() 中调用 getItemViewType() 来确定需要哪个视图，而不是检查 InSection。

在下面的链接中有参考。

[在具有 2 种不同布局的 Android Listview 中重用视图](https://stackoverflow.com/questions/13297299/reusing-views-in-android-listview-with-2-different-layouts)

[http://logc.at/2011/10/10/handling-listviews-with-multiple-row-types/](http://logc.at/2011/10/10/handling-listviews-with-multiple-row-types/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-30T10:05:35.410

只是因为您的 getCount 可能返回零。检查 getCount 的返回值，这是默认的覆盖方法，您必须将数组适配器的计数返回给 this.Preveiously 它正在调用为零的超级 getCount。请覆盖它

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-30T10:27:31.740

您的适配器看起来不错，我认为如果没有在您的活动中看到适配器相关代码，我们将无法帮助您。

但请确保您不要忘记`yourAdapter.notifyDataSetChanged()`在对项目列表进行任何修改后调用。

# c++ - 如何打印矢量的数据

> ID：13800741
> 
> 赞同：1
> 
> 时间：2012-12-10T12:14:23.100
> 
> 标签：c++, visual-c++

我在互联网上搜索了很多，找不到简单的例子来打印矢量数据..

我试图像数组一样打印它，虽然它没有用......

这是我尝试过的：

```
using namespace std ;
.....
const int MAX = 255 ;

vector <string> testersName[MAX];
cout << testersName[i] << endl; 
```

错误仅在 cout 行中，第一行得到遵守，一切顺利..

我在 testersName 中获得了数据，尽管我收到了这个错误：

> “错误 1 ​​错误 C2679：二进制 '<<'：未找到采用 'std::vector<_Ty>' 类型的右侧操作数的运算符（或没有可接受的转换）”

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-10T12:16:09.020

`vector <string> testersName[MAX];`声明一个向量数组，试试简单`vector <string> testersName(MAX);`- 这声明一个带有`MAX`元素的向量。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T12:17:07.123

您必须**遍历**向量的元素，然后对每个元素进行 brint：

```
vector <string> testersName;
// Fill your vector
for (int i = 0; i < testersName.size(); ++i) {
    cout << testersName[i] << endl;
} 
```

此外，我不认为这条线`vector <string> testersName[MAX];`做你认为它做的事情。不必为向量指定大小，因为它会在填充时动态增长。如果您仍想给出大小，请使用括号：`(MAX)`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-10T12:32:22.723

我发现打印矢量的最佳方法是使用某种包装器：

让我们从以下开始：

```
template< typename T >
class ConstVecFormat
{
   private:
      std::vector<T> const& vec_;
      const std::string prefix_, delim_, suffix_;

   public:
      explicit ConstVecFormat( std::vector<T> const& vec, prefix="", delim=",", suffix="" ) :
          vec_(vec), prefix_(prefix), delim_(delim), suffix_(suffix_)
      {
      }

      std::ostream& print( std::ostream& os ) const
      {
         typename std::vector<T>::const_iterator iter = vec_.begin(), end=vec_.end();
         os << prefix_;
         if( iter != end )
              os << *iter;
         else 
           while( ++iter != end )
           {
             os << delim_ << *iter;
           }

         os << suffix_;
         return os;
      }
 };

 template< typename T >
 std::ostream & operator<<( std::ostream & os, ConstVecFormat<T> const& format )
 {
     return format.print( os );
 } 
```

这正朝着成为上一个主题的副本的方向发展，在该主题中，我们对这个模板进行了很多增强，以产生一个更通用的打印集合。

# php - 将页面重定向到另一个 html 脚本并在后台执行 php 脚本

> ID：13800742
> 
> 赞同：0
> 
> 时间：2012-12-10T12:14:23.647
> 
> 标签：php, javascript, html, forms

我有一个要求，用户需要上传文件并在上传页面后单击提交。点击提交后，一个php脚本在后台运行。我想要的是页面应该被重定向到另一个 PHP 页面，而 script.php 脚本应该在后台执行。

```
<form action=script.php method='POST'> 
```

我想要的是 script.php 脚本应该仍然运行并且页面应该被重定向到一些 result.html 页面。任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T12:18:27.167

你可以使用Jquery文件上传方法吗？因此，当 ajax 上传文件时，您可以在后台 div 中显示其他内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T12:19:12.347

你可以做一个 header("Location: foo.php"); 在要运行的脚本之后。如果您的脚本不输出任何标头，这很好，它会在脚本完成时重定向。

如果脚本非常耗时，您将需要在提交表单时对 PHP 脚本执行异步调用（可能通过 ajax），然后表单目标可以是您希望重定向的位置。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-10T12:17:41.967

据我了解您的问题，您需要一个消息队列工具。将请求保存在 sql 表中或作为文件系统上的作业并从控制台运行脚本。

否则你会阻止一些 Web 服务器实例。

像rabbitmq这样的东西

一切顺利

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-12-10T12:15:49.137

```
header('location:'sumthng.php'); 
```

在你的操作页面中给出这个

# asp.net - 使用模板字段在代码后面动态创建gridview

> ID：13800763
> 
> 赞同：0
> 
> 时间：2012-12-10T12:15:28.950
> 
> 标签：asp.net, gridview, templatefield

我需要动态创建特定设计的gridviews（只有4列），第一列有一个复选框，其余的是boundfields，我如何创建它，并绑定动态创建的gridview，是否也可以绑定复选框（我为此有一个布尔列）。

稍后我需要检查和取消选中行，然后单击按钮我将能够访问这个动态创建的 gridview 以查找选中和未选中的行。

编辑：我有一个数据集，其中包含许多（未知数）具有 4 列的数据表，我需要为用户提供一个 UI 以在此 DS 中更改数据。

# sql - 拆分单词并将其插入新表并计算这些单词

> ID：13800764
> 
> 赞同：3
> 
> 时间：2012-12-10T12:15:31.773
> 
> 标签：sql, plsql, group-by, split, oracle11g

我有愚蠢的表格和数据。我需要： 1-将每行中的每个句子拆分为新行 2-根据 soundex 函数根据句子的最后一部分计算每行中的单词

```
create table a (id number(9), words varchar(500));
insert into a values(1,'UK,LONDON,YEMEN,JOHN,CAIRO,OMAR ALI,EGYPT,Cairo,YEMAN,OMAR AMR ALI,LONDAN');
insert into a values(2,'UK,SUDAI,SUDAIN,AYHAM SHAHER YAFOOZ,ALI YAFOOZ');
insert into a values(3,'MALAYSIA, AHMED ALI,MALYSIAN'); 
```

延长输出

创建表 temp_words(id number(9),words varchar2(100), count_words number(9));

```
id            words                count_words
1              UK                     1
1            LONDON                   2
1            YEMEN                    2
1            CAIRO                    2
1            OMAR ALI                 2
1             JOHN                    1
2              UK                     1
2              SUDAI                  2
2          AYHAM SHAHER YAFOOZ        2
3               MALAYSIA              2
3              AHMED ALI              1 
```

问候

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T13:16:43.270

# 这是一个[SQLFiddle 演示](http://sqlfiddle.com/#!4/a90d3/53)

```
select id,words,

case when i=0 then
SUBSTR(words,
   1,
case when INSTR(words,',', 1, 1)=0 
       then 100000
       else
       INSTR(words,',', 1, 1)-1
       end

   )    
ELSE

SUBSTR(words,
   INSTR(words,',', 1, i)+1,

   case when INSTR(words,',', 1, i+1)=0 
       then 100000
       else
       INSTR(words,',', 1, i+1)-INSTR(words,',', 1, i)-1 
       end

   )
END word,
i+1 COUNTWORDS

from a,
(
select * from
(
select 0 i from dual 
union 
select 1 i from dual 
union 
select 2 i from dual 
union 
select 3 i from dual
union 
select 4 i from dual 
union 
select 5 i from dual 
union 
select 6 i from dual
union 
select 7 i from dual
union 
select 8 i from dual
union 
select 9 i from dual
union 
select 10 i from dual
union 
select 11 i from dual
union 
select 12 i from dual
 )
  )
table_i

where 
  case when i>0 then INSTR(words,',', 1, i) 
  else 100000 end <>0 
order by id,i 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T13:26:51.423

另一种方法（使用`regexp_count`和`regexp_substr`正则表达式函数）：

```
SQL> with Occurence(oc) as(
  2    select level
  3      from ( select max(regexp_count(words, '[^,]+')) ml
  4               from a
  5            ) t
  6     connect by level <= t.ml
  7  )
  8  select id
  9       , word
 10       , count(word) over(partition by id, soundex(word) order by id) as count_words
 11    From ( select a.id
 12                , regexp_substr(words, '[^,]+', 1, o.oc) as word
 13             from occurence o
 14            cross join a
 15          ) s
 16            where s.word is not null
 17  order by id
 18  ;

        ID WORD                 COUNT_WORDS
---------- -------------------- -----------
         1 Cairo                          2
         1 CAIRO                          2
         1 EGYPT                          1
         1 JOHN                           1
         1 LONDAN                         2
         1 LONDON                         2
         1 OMAR ALI                       1
         1 OMAR AMR ALI                   1
         1 UK                             1
         1 YEMEN                          2
         1 YEMAN                          2
         2 ALI YAFOOZ                     1
         2 AYHAM SHAHER YAFOOZ            1
         2 SUDAI                          1
         2 SUDAIN                         1
         2 UK                             1
         3  AHMED ALI                     1
         3 MALAYSIA                       1
         3 MALYSIAN                       1

19 rows selected 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-10T13:07:50.873

要根据需要拆分数据，您可以使用“连接方式”作为行生成器。

```
SQL> with src as (select id,',' || words || ',' as words,
  2                      length(words) - length(translate(words, '.,', '.')) + 1 no_of_words
  3                 from a)
  4  select a.id,
  5         substr(a.words,
  6                instr(words, ',', 1, r) + 1,
  7                instr(words, ',', 1, r + 1) - instr(words, ',', 1, r) - 1) word,
  8         a.no_of_words
  9    from (select level r
 10            from dual
 11          connect by level <= (select max(no_of_words) from src)) d
 12         inner join src a
 13                on d.r <= a.no_of_words
 14   where a.no_of_words is not null
 15   order by a.id, d.r
 16  /

        ID WORD                 NO_OF_WORDS
---------- -------------------- -----------
         1 UK                            11
         1 LONDON                        11
         1 YEMEN                         11
         1 JOHN                          11
         1 CAIRO                         11
         1 OMAR ALI                      11
         1 EGYPT                         11
         1 Cairo                         11
         1 YEMAN                         11
         1 OMAR AMR ALI                  11
         1 LONDAN                        11
         2 UK                             5
         2 SUDAI                          5
         2 SUDAIN                         5
         2 AYHAM SHAHER YAFOOZ            5
         2 ALI YAFOOZ                     5
         3 MALAYSIA                       3
         3  AHMED ALI                     3
         3 MALYSIAN                       3

19 rows selected.

SQL> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-10T12:51:23.420

您需要将数据作为单独的记录插入。如果您愿意，您可以将它们保留为连接字符串，但这只会让您的生活变得非常困难。所以：

```
create table words (
  id number,
  w  varchar2(100),
  s  varchar2(4)
);

create or replace trigger words_auto
  before insert or update on words
  for each row
begin
  select trim(upper(:new.w)), soundex(:new.w)
  into   :new.w,              :new.s
  from   dual;
end;

insert into words (id, w) values (1, 'UK');
insert into words (id, w) values (1, 'LONDON');
...
insert into words (id, w) values (3, ' AHMED ALI');
insert into words (id, w) values (3, 'MALYSIAN'); 
```

您可以编写一个过程来拆分连接的字符串并`words`适当地填充表格。请注意，我创建了一个触发器，它将您的输入规范化为大写，删除所有无关的空格并自动生成 Soundex 代码。

现在有一个问题：您想按它们的 Soundex 代码对单词进行分组；但是，您如何确定基线？例如，“LONDON”和“LONDAN”都有代码“L535”，但你怎么知道哪条记录是“主”记录？...如果没有进一步的查找表，你不能！因此，您能做的最好的事情就是按 Soundex 代码进行分组。这不必存储在表中，作为视图更有意义：

```
create or replace view word_counts as
  select   id,
           s soundex,
           count(w) count_rows
  from     words
  group by id,
           s; 
```

请注意，我调用了 count 字段`count_rows`，因为它计算记录，而不是不同的行。也就是说：'LONDON'、'LONDAN' 和 'LONDON' 的记录将以 3 的计数显示，而不是 2（您可能会期待）。无论如何，使用您的数据，视图将如下所示：

```
id    soundex   count_rows
----- --------- -----------
1     U200      1
1     L535      2
...   ...       ...
3     M420      2
3     A534      1 
```

正如我所说，这确实是您可以期待的最好的，无需进一步的基础设施。

# java - JPA 未在单个事务中考虑更新

> ID：13800767
> 
> 赞同：0
> 
> 时间：2012-12-10T12:15:32.833
> 
> 标签：java, hibernate, jpa

在事务服务方法中，我循环查询数据库以获取具有条件的实体 A 的前 10 个。

我更新列表中的每个 A 实体，使它们不再符合条件，并调用 flush() 以确保进行了更改。

循环内对查询的第二次调用返回完全相同的 A 实体集。

为什么不考虑实体上的刷新更改？

我将 JPA 2.0 与 Hibernate 4.1.7 一起使用。与 Hibernate 相同的过程似乎只在工作。我已经关闭了二级缓存和查询缓存，无济于事。

我正在使用一个相当简单的配置，JpaTransactionManager，Spring over JPA over Hibernate。使用@Transactional 注释的主要方法。

代码将是这样的：

```
do {
    modelList = exportContributionDao.getContributionListToExport(10);
    for (M m : modelList) {
        //export m to a file
    m. (false);
    super.flush();
    }
} while (modelList.size() == 10); 
```

对于循环的每次迭代，Dao 方法总是返回相同的 10 个结果，JPA 没有考虑更新的 'isToBeExported' 属性。

我不是想解决问题，而是想了解为什么 JPA 在这里没有按预期运行。我希望这是一个“经典”问题。毫无疑问，如果在每次迭代时都提交事务，它将得到解决。

ASAIK，缓存 L1，即以 Hibernate 作为底层 JPA 提供者的 Session，应该是最新的，并且第二次迭代查询应该考虑更新的 Entities，即使更改尚未持久化。所以我的问题是：为什么不是这样？配置错误或知道行为？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T12:36:35.157

刷新不一定提交数据库上的更改。你想达到什么目标？据我了解，你做某事。喜欢：

1.  循环实体
2.  在循环内，更改实体
3.  在实体上调用“刷新”
4.  再次读取实体
5.  你想知道为什么数据库上的数据没有改变吗？

如果这是正确的，您为什么要重新阅读更改而不使用这些元素？离开事务后，更改将自动持久化。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T11:03:34.237

这绝对应该有效。

这是我们的配置问题。

为这个问题道歉，我们很难找出原因，但我希望答案至少对某些人有用：

JPA 肯定会考虑在单个事务中对实体所做的更改。

# javascript - jQuery - 从动态 RSS 提要链接将外部网页加载到 div 中

> ID：13800768
> 
> 赞同：2
> 
> 时间：2012-12-10T12:15:36.283
> 
> 标签：javascript, jquery, ajax, rss, loading

我的网页包含来自一些随机站点的一些 RSS 提要。

这些提要中的链接可将您带到这些网站。无论如何将这些网页加载到我页面上的 div 中？

我遇到的问题是这些 RSS 链接是在我创建 RSS 提要时动态创建的。

有人有什么建议吗？

```
function showLTab(key)
{
    var myObject = science[key];
    var stage = $("#leftFeed").children('#tabContent');

    //forming the query
    //LIMT controls amount of tabs displayed in each feed
    var query = "select * from feed where url='"+myObject.feed+"' LIMIT 5";

    //changing URL to YQL
    var url = "http://query.yahooapis.com/v1/public/yql?q="+encodeURIComponent(query)+"&format=json&callback=?";

    $.getJSON(url,function(data){

        //removes any previous feeds
        stage.empty();

        //item exists in RSS
        $.each(data.query.results.item || data.query.results.entry,function(){
                stage.append(myObject['function'](this));
        })
    });

    $("#leftFeed").children('#activeTab').text(key);
}

function showLeftDropDown()
{
    var activeTab = $("#leftFeed").children('#activeTab');
    //creating drop down div
    var dropDown = $('<div>').addClass('dropDownList').css({'top': 10, 'width': activeTab.width()}).hide().appendTo('#leftFeed');

    $.each(science,function(i){
        // populates dropdown div
        if(i==activeTab.text()) return true;
            $('<div>').text(i).appendTo(dropDown);
    })
    dropDown.slideDown('fast');
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T12:20:32.547

如果您知道您感兴趣的页面的 URL（也就是说，这个问题是关于页面的显示而不是链接的检索）并且只是想将结果吐出到容器中，例如 a `div`，您可以这样做：

```
$("#myDiv").load("page url"); 
```

这会将 Ajax 请求传递给给定的 url，并将内容加载到选定的元素中。有关详细信息，请参阅[http://api.jquery.com/load/](http://api.jquery.com/load/)。

另一种选择是使用`iframes`. 您可以使用 JavaScript 创建一个`iframe`然后将`src`属性设置为您感兴趣的 url：

```
document.getElementById("myIframe").src = "page url"; 
```

* * *

好的，所以如果您不知道 URL 但有可以解析的提要，请尝试使用正则表达式。鉴于链接看起来像这样：

```
<link>http://www.someexamplerssdomain.com/main.html</link> 
```

您可以使用此代码将它们全部解析成一个数组：

```
var regex = /<link>(.*?)<\/link>/gi;
var matches = new Array();

var match = regex.exec(rssInput);
while (match != null) {
    matches.push(match[1]);
    match = regex.exec(rssInput);
} 
```

然后，您可以使用我最初建议的两种方法中的任何一种来检索它们的内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T12:23:37.050

使用这个 jquery [https://github.com/sdepold/jquery-rss](https://github.com/sdepold/jquery-rss)

它会帮助你

# .htaccess - 重写一级url目录

> ID：13800771
> 
> 赞同：0
> 
> 时间：2012-12-10T12:15:55.557
> 
> 标签：.htaccess, mod-rewrite, url-rewriting

我正在寻找重写 url 字符串的第一个目录并让请求的其余部分仍然有效。

例如：我想要它，所以当用户单击链接时：`/products/category/item.php` 它实际上抓取了文件：`/shop/category/item.php`但仍显示为`/products/category/item.php`URL

这将是动态的，所以它应该像`/products/$` `/shop/$1`我猜的那样。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T12:32:47.523

您不需要 mod_rewrite。[何时避免 mod_rewrite](http://httpd.apache.org/docs/current/rewrite/avoid.html)。

将 url 目录映射到文件目录是 Apache 的一项基本功能，由**[mod_alias](http://httpd.apache.org/docs/current/mod/mod_alias.html)**模式处理（您肯定已经有了）。

所以基本上你有[Alias](http://httpd.apache.org/docs/current/mod/mod_alias.html#alias)和[AliasMatch](http://httpd.apache.org/docs/current/mod/mod_alias.html#aliasmatch)指令。在您的情况下，第一个就足够了：

```
Alias /products/ /path/to/web/document/root/shop/ 
```

映射仅在服务器端完成，因此最终用户看到的 url 永远不会被修改。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T12:22:42.870

试试这个：

```
RewriteEngine On
RewriteRule ^products/(.*)  shop/$1 [L] 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-10T12:26:54.910

通过启用 mod_rewrite 和 .htaccess `httpd.conf`，然后将此代码放在您`.htaccess`的`DOCUMENT_ROOT`目录下：

```
Options +FollowSymLinks -MultiViews
# Turn mod_rewrite on
RewriteEngine On
RewriteBase /

RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^products/(.+)$ /shop/$1 [L,NC] 
```

# java - 查找 JList 的选中项并实时显示

> ID：13800775
> 
> 赞同：16
> 
> 时间：2012-12-10T12:16:17.310
> 
> 标签：java, swing, jlist

我有一个`JList`，我在其中显示一些 ID。我想捕获用户单击的 ID 并将其显示在`JLabel`.

```
String selected = jlist.getSelectedItem().toString(); 
```

上面的代码给了我选择的`JList`值。但是这段代码必须放在按钮事件中，当我单击按钮时，它将获取 JList 值并将其分配给`JLabel`.

但是，我想要做的是，一旦用户点击其中的一个项目来实时`JList`更新。`JLabel`（无需单击按钮来触发操作）

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-12-10T12:26:57.770

一个简单的例子就像下面使用listselectionlistener

```
import java.awt.Dimension;
import java.awt.FlowLayout;

import javax.swing.JFrame;
import javax.swing.JLabel;
import javax.swing.JList;
import javax.swing.event.ListSelectionEvent;
import javax.swing.event.ListSelectionListener;

public class JListDemo extends JFrame {

    public JListDemo() {

        setSize(new Dimension(300, 300));
        setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        setLayout(new FlowLayout());
        final JLabel label = new JLabel("Update");
        String[] data = { "one", "two", "three", "four" };
        final JList dataList = new JList(data);

        dataList.addListSelectionListener(new ListSelectionListener() {

            @Override
            public void valueChanged(ListSelectionEvent arg0) {
                if (!arg0.getValueIsAdjusting()) {
                  label.setText(dataList.getSelectedValue().toString());
                }
            }
        });
        add(dataList);
        add(label);

        setVisible(true);

    }

    public static void main(String args[]) {
        new JListDemo();
    }

} 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-12-10T12:18:13.660

你为什么不在你的,`ListSelectionListener`上`JList`加上你上面的代码。

我假设您已经知道如何根据您的问题在 JButtons 上创建侦听器，因此您只需对其进行调整以创建一个`ListSelectionListener`，然后将侦听器分配给您的`JList`使用`jlist.addListSelectionListener(myListener);`

[这里](http://docs.oracle.com/javase/tutorial/uiswing/events/listselectionlistener.html)有一个很好的教程可以帮助你入门，或者参考[文档](http://docs.oracle.com/javase/1.4.2/docs/api/javax/swing/event/ListSelectionListener.html)

你应该瞄准这样的东西......

```
jlist.addListSelectionListener(new ListSelectionListener() {
    public void valueChanged(ListSelectionEvent event) {
        if (!event.getValueIsAdjusting()){
            JList source = (JList)event.getSource();
            String selected = source.getSelectedValue().toString();
        }
    }
}); 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-12-10T12:19:46.390

使用`ListSelectionListener`：

```
JList list = new JList(...);
list.addListSelectionListener(new ListSelectionListener() {
  public void valueChanged(ListSelectionEvent evt) {
    if (!evt.getValueIsAdjusting()) {
      // code here
    }
  }
}); 
```

# ms-word - 选择word文档中的所有图片

> ID：13800779
> 
> 赞同：7
> 
> 时间：2012-12-10T12:16:27.530
> 
> 标签：ms-word

我需要在 Word 文档中进行一些格式更改。为此，我需要选择文档中的所有图像。

有人可以为我提供一个宏/选项，以选择 Word 文档中的所有图像（我使用的是 MS Office 2007）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-15T01:24:09.177

我不相信有一种简单的方法可以一次选择所有图像，除非它们都**In Line with Text**。如果是，那么您可以使用以下示例循环它们以进行格式更改：

```
Dim iShape As InlineShape

For Each iShape In ActiveDocument.InlineShapes
    With iShape
        .Width = InchesToPoints(2)
        .Height = InchesToPoints(1.5)
    End With
Next iShape 
```

我不确定你是否要格式化图片或图片周围的一些文字，但你可以做任何一个（或两者）。

如果图像不是全部**In Line with Text**，那么您可能想要围绕以下内容构建一些东西，这会将您移至下一个图形：

```
Selection.GoTo What:=wdGoToGraphic, Which:=wdGoToNext, Count:=1, Name:="" 
```

此代码的不同之处在于它将光标放在下一个图形的前面，但实际上并没有选择它，因此您需要添加它。如果你想遍历整个文档，这里有一些代码可以做到这一点。它会找到每个图形并在它之前键入单词“Test”......直到找不到更多图形。

```
Selection.HomeKey unit:=wdStory
Do Until ActiveDocument.Bookmarks("\Sel") = ActiveDocument.Bookmarks("\EndOfDoc")
    Selection.GoTo What:=wdGoToGraphic, Which:=wdGoToNext, Count:=1, Name:=""
    Selection.MoveRight unit:=wdWord, Count:=1, Extend:=True
        If Selection.Type = 7 Then
            Selection.Collapse wdCollapseStart
            Selection.TypeText Text:="TEST"
            Selection.MoveRight unit:=wdWord, Count:=1, Extend:=False
        Else
            Exit Sub
        End If
Loop 
```

如果我们确切地知道您要做什么，那将会有所帮助。

# xml - 使用 Groovy HttpBuilder 发布 XML

> ID：13800782
> 
> 赞同：0
> 
> 时间：2012-12-10T12:16:31.577
> 
> 标签：xml, groovy, httpbuilder

我正在尝试使用 Groovy 的 HttpBuilder 发布一些 xml 数据。 [使用 Groovy HTTPBuilder POST XML 数据](https://stackoverflow.com/questions/11017126)回答了关于如何生成属性的问题（如下 id）

```
<person id="1"></person> 
```

但不建议如何为此节点指定值。我尝试过诸如

```
apicall{
  user "userName"
  person(name:"name") "personName"
} 
```

生成一个 XML

```
<apicall>
  <user>userName</user>
  <person name='name'></person>
</apicall> 
```

但是 personName 不见了！请建议我在这里缺少什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T12:24:50.760

请参阅：[http](http://www.javaworld.com/community/node/3017) ://www.javaworld.com/community/node/3017 。他们使用

```
body: {
  widget(id:'129033'){
    type("TFR")
  }
} 
```

这将被编码为

```
<widget id='129033'>
  <type>TFR</type>
</widget> 
```

# arrays - Cakephp 模型自加入以及如何检索正确的数组

> ID：13800784
> 
> 赞同：0
> 
> 时间：2012-12-10T12:16:34.103
> 
> 标签：arrays, cakephp, hash, model, self-join

我有以下模型：

```
App::uses('AppModel', 'Model');
class Sync extends AppModel {
    public $belongsTo = array(
        'Unit' => array(
            'className' => 'Sync',
            'foreignKey' => 'parent_id'
        )
    );

    public $hasMany = array(
        'Consultant' => array(
            'className' => 'Sync',
            'foreignKey' => 'parent_id'
        )
    );
} 
```

如果我这样做，`$this->Sync->find('all')`我几乎可以按照我想要的方式返回一个数组：

```
Array
(
    [0] => Array
        (
            [Sync] => Array
                (
                    [id] => 22222
                    [parent_id] => 22222
                    [statistic_date] => 2012-11-14 00:00:00
                )

            [Unit] => Array
                (
                    [id] => 22222
                    [parent_id] => 22222
                    [statistic_date] => 2012-11-14 00:00:00
                )

            [Consultant] => Array
                (
                    [0] => Array
                        (
                            [id] => 11111
                            [parent_id] => 22222
                            [statistic_date] => 2011-12-15 00:00:00
                        )

                    [1] => Array
                        (
                            [id] => 33333
                            [parent_id] => 22222
                            [statistic_date] => 2011-12-14 00:00:00
                        )
                )
      )
) 
```

问题是我想对顾问做一个条件。像这样：

```
$this->Sync->Consultant->find('all', array(
    'conditions' => array(
        'Consultant.statistic_date BETWEEN ? AND ?' => 'array(
            '2011-12-01 00:00:00', '2011-12-31 00:00:00'
         )'
    )
)) 
```

但是它并没有给我一个想要的数组：

```
Array
(
    [0] => Array
        (

            [Unit] => Array
                (
                    [id] => 22222
                    [parent_id] => 22222
                    [statistic_date] => 2012-11-14 00:00:00
                )

            [Consultant] => Array
                (
                        [id] => 11111
                        [parent_id] => 22222
                        [statistic_date] => 2011-11-15 00:00:00
                )
      )

    [1] => Array
        (

            [Unit] => Array
                (
                    [id] => 22222
                    [parent_id] => 22222
                    [statistic_date] => 2012-12-14 00:00:00
                )

            [Consultant] => Array
                (
                        [id] => 33333
                        [parent_id] => 22222
                        [statistic_date] => 2011-12-14 00:00:00
                )
      )
) 
```

我想要这个表格：

```
Array
(
    [0] => Array
        (

            [Unit] => Array
                (
                    [id] => 22222
                    [parent_id] => 22222
                    [statistic_date] => 2012-11-14 00:00:00
                )

            [Consultant] => Array
                (
                    [0] => Array
                        (
                            [id] => 11111
                            [parent_id] => 22222
                            [statistic_date] => 2011-12-15 00:00:00
                        )
                    [1] => Array
                        (
                            [id] => 33333
                            [parent_id] => 22222
                            [statistic_date] => 2011-12-14 00:00:00
                        )
                )
      )
) 
```

你如何做到这一点？我能想到的可能解决方案是使用包含或 Hash:: 类，但不知道如何。

对于此事的任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T13:49:28.363

必须在 Sync 模型上进行查找才能获得所需的效果，我会先尝试包含。按照此页面上的说明将模型设置为可包含。[http://book.cakephp.org/2.0/en/core-libraries/behaviors/containable.html](http://book.cakephp.org/2.0/en/core-libraries/behaviors/containable.html)

然后你会有这样的东西。

```
$this->Sync->find('all', 
 array(
    'contain'=> 
         array('Consultant'=>
                       array(
                         'conditions' => 
                           array(
                              'Consultant.statistic_date BETWEEN ? AND ?' => 'array(
                                 '2011-12-01 00:00:00', '2011-12-31 00:00:00'
                                 )'
                                )
                            )

              )
      )
); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-18T12:06:41.853

好的，我解决了这个问题。这就是我所做的。我动态绑定模型：

```
App::uses('AppModel', 'Model');

    class Sync extends AppModel {
    function unit() {
        $this->bindModel(array(
            'hasMany' => array(
                'Consultant' => array(
                    'className' => 'Sync',
                    'conditions' => array(
                        'Consultant.statistic_date BETWEEN ? AND ?' => array('2011-12-01 00:00:00', '2011-12-31 00:00:00')
                    ),
                    'foreignKey' => 'parent_id'
                )
            )
        ));

        return $this->find('all', array(
            'conditions' => array(
                'Sync.id = Sync.parent_id'
            )
        ));
    }
} 
```

这给了我：

```
Array
(
    [0] => Array
        (

            [Sync] => Array
                (
                    [id] => 22222
                    [parent_id] => 22222
                    [statistic_date] => 2012-11-14 00:00:00
                )

            [Consultant] => Array
                (
                    [0] => Array
                        (
                            [id] => 11111
                            [parent_id] => 22222
                            [statistic_date] => 2011-12-15 00:00:00
                        )
                    [1] => Array
                        (
                            [id] => 33333
                            [parent_id] => 22222
                            [statistic_date] => 2011-12-14 00:00:00
                        )
                )
      )
) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-11T12:30:55.227

好的，我减少了同步中的行数，这就是它给我的：

```
array(
(int) 0 => array(
    'Sync' => array(
        'id' => '11111',
        'parent_id' => '11111',
        'statistic_date' => '2012-12-11 00:00:00'
    ),
    'Unit' => array(
        'id' => '11111',
        'parent_id' => '11111',
        'statistic_date' => '2012-12-11 00:00:00'
    ),
    'Consultant' => array(
        (int) 0 => array(
            'id' => '11111',
            'parent_id' => '11111',
            'statistic_date' => '2012-12-11 00:00:00'
        ),
        (int) 1 => array(
            'id' => '22222',
            'parent_id' => '11111',
            'statistic_date' => '2011-12-14 00:00:00'
        ),
        (int) 2 => array(
            'id' => '33333',
            'parent_id' => '11111',
            'statistic_date' => '2011-12-15 00:00:00'
        )
    )
),
(int) 1 => array(
    'Sync' => array(
        'id' => '22222',
        'parent_id' => '11111',
        'language_code' => null,
        'statistic_date' => '2011-12-14 00:00:00'
    ),
    'Unit' => array(
        'id' => '11111',
        'parent_id' => '11111',
        'statistic_date' => '2012-12-11 00:00:00'
    ),
    'Consultant' => array()
),
(int) 2 => array(
    'Sync' => array(
        'id' => '33333',
        'parent_id' => '11111',
        'statistic_date' => '2011-12-15 00:00:00'
    ),
    'Unit' => array(
        'id' => '11111',
        'parent_id' => '11111',
        'language_code' => null,
        'statistic_date' => '2012-12-11 00:00:00'
    ),
    'Consultant' => array()
) 
```

)

这更接近我想要实现的目标，但不完全是。我不想显示 Sync 模型，我只显示数组 [0]，而不是其余的。

使用 Hash::extract($data '{n}.Consultant') 给出：

```
 array(
(int) 0 => array(
    (int) 0 => array(
        'id' => '11111',
        'parent_id' => '11111',
        'statistic_date' => '2012-12-11 00:00:00'
    ),
    (int) 1 => array(
        'id' => '22222',
        'parent_id' => '11111',
        'statistic_date' => '2011-12-14 00:00:00'
    ),
    (int) 2 => array(
        'id' => '33333',
        'parent_id' => '11111',
        'statistic_date' => '2011-12-15 00:00:00'
    )
),
(int) 1 => array(),
(int) 2 => array() 
```

)

此外，如果只有 id = parent_id 的行不存在，则对此的 Hash::filter() 将给出令人满意的结果。

Hash::filter() 给出：

```
array(
(int) 0 => array(
    (int) 0 => array(
        'id' => '11111',
        'parent_id' => '11111',
        'statistic_date' => '2012-12-11 00:00:00'
    ),
    (int) 1 => array(
        'id' => '22222',
        'parent_id' => '11111',
        'statistic_date' => '2011-12-14 00:00:00'
    ),
    (int) 2 => array(
        'id' => '33333',
        'parent_id' => '11111',
        'statistic_date' => '2011-12-15 00:00:00'
    )
) 
```

)

# jquery - 避免另一个异步服务器调用 jqGrid

> ID：13800789
> 
> 赞同：3
> 
> 时间：2012-12-10T12:16:48.607
> 
> 标签：jquery, jqgrid

我是新手，通过调用`jqGrid`从 Servlet 填充数据并显示在. 这工作正常没问题。但是，在我的情况下，列名是动态的，因为我将日期显示为列名。`Ajax``jqGrid`

所以，我在搜索 Dynamic `colModel`for时发现了下面的代码`jqGRid`。

但是，这会导致两个 Ajax 调用。有没有人使用过动态列标题？

```
<script type="text/javascript"> 

    var grid = $("#rowsList");
    var url = '/getRowList?Id=9371&fromDate=2011-12-06&toDate=2012-12-06';
    jQuery().ready(function (){ 
        $.ajax({
            url: url,
            dataType: 'json',
            success: function(response) {
                prepareGrid(response);
            },
            error: function(request, textStatus, errorThrown) {
                alert(textStatus + " : " + request.responseText);
            }
        });
    });

    function prepareGrid(response){
        if (response) {
            if (!response.Error) {
                var colData = getColumnsData(response.columnData);
                colData = eval('{' + colData + '}');

                grid.jqGrid({ // This makes second server call
                    url: url,
                    datatype: 'json',
                    mtype: 'POST',
                    colModel: colData,
                    colNames: response.columnData,
                    height : 'auto',
                    pager: '#pager',
                    viewrecords: true,
                    loadtext: 'Loading',
                    sortorder: "asc",
                    gridview: true,
                    altRows: true,
                    cellEdit: false,
                    caption: 'Data List' 
                });
            }
        }
    }

    /**
     * Creates column data for jqgrid
     */
    function getColumnsData(Data) {
        // return column data array in jqGrid compatible format
        // This works fine
    }

</script> 
```

我的另一个选择是在第一次调用和设置中只返回列名，`colModels`但如果它可以在单个服务器调用中完成会更好。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T13:10:14.540

我想警告您减少 Ajax 调用的数量。如果您是 jqGrid 的新手，了解 jqGrid 使用中的一些常见问题很重要：

*   jqGrid 需要**在**调用`grid.jqGrid({...});`.
*   jqGrid将**多次**`url`使用。

 **网格在寻呼机中有一些常见的用户界面元素（见[答案](https://stackoverflow.com/a/5766189/315935)）

![在此处输入图像描述](../Images/02cc09ff0edc861d260749edd3b67be0.png)

![在此处输入图像描述](../Images/7078dd81319b957f169fc1cf5b44c442.png)

用户可以使用它与 j​​qGrid 进行交互。因此，如果用户单击“下一页”按钮，更改显示的行数或更改排序列（或排序方向）向服务器发送新请求，`url`将被发送。使用用户界面的其他元素（如搜索工具）非常实用：

![在此处输入图像描述](../Images/3ca9716200afcbb75f5ea4a4703e2967.png)

这也会产生`url`带有修改参数的新请求。收到服务器响应后，**只有网格体将被替换**。网格的其他部分将保持不变。您可以使用`GridUnload`方法重新创建整个网格（请参见[此处](https://stackoverflow.com/a/4920612/315935)的示例）

因此，如果您每次都将列定义与网格的数据一起传输，您将发送不需要的数据，这会降低性能而不是提高您想要的性能。**

# ios - UIWebView 已经加载一次后如何使其变为空白？

> ID：13800793
> 
> 赞同：0
> 
> 时间：2012-12-10T12:16:53.970
> 
> 标签：ios, ios5, uiwebview, uiwebviewdelegate

我在 viewDidLoad 中分配和初始化 UIWebView，我在 viewDidAppear 中加载 webview。

所以我想通过单击按钮来清除 UIWebView 的内容。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T12:23:23.237

```
 [_webView loadRequest:[NSURLRequest requestWithURL:[NSURL URLWithString:@"about:blank"]]]; 
```

在按钮单击时加载空白。

# excel - excel：如何将 .bas 文件转换为 vbscript/exe 或从命令行运行？

> ID：13800794
> 
> 赞同：2
> 
> 时间：2012-12-10T12:17:04.363
> 
> 标签：excel, vbscript, wsh, vba

如何将 .bas 文件转换为 vbscript/exe 或从命令行运行？我通过 MS Visual Basic for Aplications 在 Excel 中编写了脚本，但我只能在 Excel 下运行此脚本。我怎样才能使这个脚本成为 .vbs 或 .exe ？?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-10T12:51:27.877

恐怕简短的回答是你不能，至少不能直接。VBA 和 VBS 是轻微的变体，虽然您可以将代码保存到 .vbs 文件中，但我非常怀疑它是否会在不将其更改为 VB 脚本的情况下做任何事情。

要制作 .exe，您将需要 Visual Studio 之类的东西。即使这样，您也可能需要重新编写代码以使其正常工作。

我想这取决于你的代码做什么。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-10T14:06:58.513

我认为最简单的选择是`.bas`使用扩展名保存文件`.vbs`并将代码修改为 VBScript；然后在 Windows Script Host (WSH) 下运行它。请记住，在 Excel 下的 VBA 中，您可以访问许多内置对象；在 WSH 下的 VBScript 中，您必须使用or函数自己创建或访问这些对象（请参阅[此答案](https://stackoverflow.com/a/13446037/111794)） 。（WSH 有自己的一组内置对象。）对于 Excel，您需要从以下内容开始：`CreateObject``GetObject`

```
Dim xlApp
Set xlApp = CreateObject("Excel.Application") 
```

请记住，在 VBScript 中，变量没有类型，因此所有语句，例如：

```
Dim i As Integer
Dim wks As Excel.Worksheet 
```

需要`As`删除该子句：

```
Dim i
Dim wks 
```

* * *

有关两者之间差异的详细信息，请参阅[INFO：Visual Basic for Applications 功能不在 VBScript](http://support.microsoft.com/kb/190273)和[INFO：VBScript 功能不在 Visual Basic for Applications](http://support.microsoft.com/kb/190274)中。

* * *

VBA 有一个内置的 IDE 和调试器，这是在 WSH 下运行代码时所没有的，但是您可以使用 Visual Sudio 来调试脚本文件。（如果您无法安装 VS 2015 社区版，Visual Studio 集成 shell 也可以工作 - [2013](http://www.microsoft.com/en-us/download/details.aspx?id=40777)、[2012](http://www.microsoft.com/en-us/download/details.aspx?id=30663)、[2010](https://chocolatey.org/packages/VS2010.ShellIntegratedRedist)。

通过从命令行调用脚本来调试脚本，如下所示：

```
cscript yourscript.vbs //D //X 
```

或者：

```
wscript yourscript.vbs //D //X 
```

如果您安装了 Office 2007 或更早版本，则可以使用 Microsoft 脚本编辑器进行调试；无需下载和安装 VS。尽管如此，VS 还是比 Microsoft Script Editor 和 VBA 调试器强大得多。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-12-12T05:21:32.177

我认为每个人都在这里提出了很好的观点，但我没有看到这会成为一个大问题的一件事是，使用 VBA 和 Visual Basic，您可以使用 On Error GoTo 命令并使用诸如 MainErrorHandler 之类的东西设置错误行：在函数的底部。VB 脚本不允许这样做，您需要使用 On Error GoTo 0 或 On Error Resume next，这在 VBA 和 Visual Basic 中都是允许的。然而，所有 VB 语言都允许在 VB 脚本中进行错误处理。

# groovy - 无需编译即可动态加载 groovy 类/脚本？

> ID：13800795
> 
> 赞同：0
> 
> 时间：2012-12-10T12:17:05.757
> 
> 标签：groovy, classloader

我在包层次结构中有一组 groovy 脚本。我有 1 个主要脚本，我想从中调用其他人。例如，我有这些脚本（其中包含同名的公共类/接口）：

```
package.MainScript
package.MyInterface;

package.utils.MyInterfaceImpl1 //implements MyInterface
package.utils.MyInterfaceImpl2 //implements MyInterface 
```

有没有办法**在编译时不知道调用的类名的情况下**从另一个脚本调用一个脚本？我的意思是做一些像动态类加载这样的事情：

```
class MainScript {
  public static void main (String[] args) {
      MyInterface instance = Class.forName("package.utils.Util1");
  }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T13:18:32.740

是的！Groovy 是一种动态语言。您可以[动态创建类实例](http://mrhaki.blogspot.com.es/2010/06/groovy-goodness-create-class-instance.html)。

```
package.MyInterface
class MyInterfaceImpl1 {
    def greet() {
        "Hello"
    }    
}

package.MyInterface
class MyInterfaceImpl2 {
    def greet() {
        "Hi!"
    }   
}

def name = 'MyInterfaceImpl1' // Choose whatever you want at runtime
def className = Class.forName("MyInterface.$name")
def instance = className.newInstance()
assert instance.greet() == 'Hello' 
```

# file-upload - 将文件与 Rspec 进行比较。some_uploaded_file.should eq some_local_file

> ID：13800798
> 
> 赞同：1
> 
> 时间：2012-12-10T12:17:14.440
> 
> 标签：file-upload, rspec, comparison

使用 cucumber 和 rspec 我想确定某个文件是否已正确更新和/或覆盖。文件是图像。

作为一个人，我会简单地在视觉上比较图像。Rspec 显然无法做到这一点。

比较原始的、未缩放或裁剪的图像很好。

我试图下载图像然后比较内容。

```
url = "http://audrey:3000/#{camping.image.url}"
online_file = open(url).read
local_file = IO.binread(File.join(Rails.root, "spec", "fixtures", image)) 
```

这种方法有太多错误。获取绝对 url 并不容易或可移植，通过网络获取速度很慢，比较二进制文件似乎很难看。

我应该如何比较图像？

# windows - 如何获得 W32 句柄访问权限？

> ID：13800800
> 
> 赞同：1
> 
> 时间：2012-12-10T12:17:19.147
> 
> 标签：windows, winapi

说，我做到了

```
HANDLE h = CreateFileA ("foobar", GENERIC_READ | GENERIC_WRITE, 0, NULL, 
    OPEN_ALWAYS, 0, NULL); 
```

现在句柄`h`有 GENERIC_READ | GENERIC_WRITE 访问（如果调用成功）。

**问题**：我应该调用什么函数`h`来恢复其访问模式（即 GENERIC_READ | GENERIC_WRITE）？

**示例**：`GetStdHandle (STD_INPUT_HANDLE)`返回*一些**以某种方式*最终成为您的标准输入的句柄。您不知道它是文件、管道还是其他东西（有一些方法可以获取句柄类型，但这不是重点）。它可能具有任何访问权限（`CreateProcess`不检查您提供的句柄`STARTUPINFO`）。有没有办法获得它的访问掩码（除了尝试对其进行适当的调用）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T12:20:39.427

呼叫[`NtQueryObject`](http://msdn.microsoft.com/en-us/library/bb432383.aspx)传递`ObjectBasicInformation`。

# c++ - 生成数独谜题所需的时间

> ID：13800801
> 
> 赞同：0
> 
> 时间：2012-12-10T12:17:25.517
> 
> 标签：c++, performance, debugging, sudoku

我正在编写数独拼图生成器，但是当我编译和运行程序时，我看到的只是一个空白的控制台终端。我已经等了 1 小时，但它仍然是一个空白的控制台终端。我想知道是因为任何逻辑错误还是因为它仍在处理中。请注意，我的整个代码都超长。如果它是性能问题，我该如何优化它

谢谢

```
#include <iostream>
#include <ctime>
#include <cstdlib>
#include <cmath>

using namespace std;
bool checkrow(int row,int value,int array[][9]);

void producearray(int array[][9]);

bool checksquare(int row,int col,int value,int array[][9]);
bool checkcol(int col,int value,int array[][9]);
void populatearray(int array[][9]);

void printarray(int array[][9]);

int main()
{
int array[9][9];
populatearray( array);
producearray(array);
printarray(array);

system("PAUSE");

}

bool checkrow(int row,int value,int array[][9])// checks the entire row, returns false if any two numbers in the row are the same
{
for (int j=0;j<9;j++)
{
    if (value==array[row][j])
    {
        return false;

    }

}

return true;

}

bool checkcol(int col,int value,int array[][9]) // check if any two numbers in the same column are the same
{
for (int j=0;j<9;j++)
{
    if (value==array[j][col])
    {
        return false;

    }

}

return true; 
```

}

```
bool checksquare(int row,int col,int value,int array[][9]) //checks if the number within the same square are the same
{
if  ( ( row>=0 &&  row<=2) && (col>=0 && col<=2) )
{
    for (int i=0;i<=2;i++)
    {
        for (int j=0;j<=2;j++)
        {
            if (array[i][j]== value)
            {
                return false;

            }

        }

    }

    return true;

}

 else if  ( ( row>=0 &&  row<=2) && (col>=3 && col<=5) )
{
    for (int i=0;i<=2;i++)
    {
        for (int j=3;j<=5;j++)
        {
            if (array[i][j]== value)
            {
                return false;

            }

        }

    }

    return true;

}

else if  ( ( row>=0 &&  row<=2) && (col>=6 && col<=8) )
{
    for (int i=0;i<=2;i++)
    {
        for (int j=6;j<=8;j++)
        {
            if (array[i][j]== value)
            {
                return false;

            }

        }

    }

    return true;

}

 else if  ( ( row>=3 &&  row<=5) && (col>=0 && col<=2) )
{
    for (int i=3;i<=5;i++)
    {
        for (int j=0;j<=2;j++)
        {
            if (array[i][j]== value)
            {
                return false;

            }

        }

    }

    return true;

}

else if  ( ( row>=3 &&  row<=5) && (col>=3 && col<=5) )
{
    for (int i=3;i<=5;i++)
    {
        for (int j=3;j<=5;j++)
        {
            if (array[i][j]== value)
            {
                return false;

            }

        }

    }

    return true;

}

 else if  ( ( row>=3 &&  row<=5) && (col>=6 && col<=8) )
{
    for (int i=3;i<=5;i++)
    {
        for (int j=6;j<=8;j++)
        {
            if (array[i][j]== value)
            {
                return false;

            }

        }

    }

    return true;

}

else if  ( ( row>=6 &&  row<=8) && (col>=0 && col<=2) )
{
    for (int i=6;i<=8;i++)
    {
        for (int j=0;j<=2;j++)
        {
            if (array[i][j]== value)
            {
                return false;

            }

        }

    }

    return true;

}

 else if  ( ( row>=6 &&  row<=8) && (col>=3 && col<=5) )
{
    for (int i=6;i<=8;i++)
    {
        for (int j=3;j<=5;j++)
        {
            if (array[i][j]== value)
            {
                return false;

            }

        }

    }

    return true;
}

 else if  ( ( row>=6 &&  row<=8) && (col>=6 && col<=8) )
{
    for (int i=6;i<=8;i++)
    {
        for (int j=6;j<=8;j++)
        {
            if (array[i][j]== value)
            {
                return false;

            }

        }

    }

    return true;
}

}

void producearray(int array[9][9]) //produces the array
{
bool isrow;
bool iscol;
bool issquare;

for (int i=0;i<9;i++)
{
    for (int j=0;j<9;j++)
    {
        do
        {
        array[i][j]=rand()%9+1;
         isrow=checkrow(i,array[i][j],array);
         iscol=checkcol(j,array[i][j],array);
         issquare=checksquare(i,j,array[i][j],array);

        }
           while(isrow==false || iscol==false || issquare==false);

    }

} 
```

}

```
void populatearray(int array[][9]) // populate the arary
{
for (int i=0;i<9;i++)
{

    for (int j=0;j<9;j++)
    {
        array[i][j]=0;

    }

}

}

void printarray(int array[][9]) //prints the array
{
for (int i=0;i<9;i++)
{

    for (int j=0;j<9;j++)
    {
        cout<<array[i][j]
            <<"\t";

    }
    cout<<endl;

}

} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-10T12:28:12.747

**你这样做是不对的。**您的代码尝试通过一个一个地随机化每个字段来生成有效的数独，检查是否存在冲突。这很可能导致当数独的一部分已经被填满时，就没有有效的解决方案了。这样的僵局无时无刻不在发生。现有的数字不冲突，但没有办法填补其余的。只需从报纸上取出任何数独并随机填写几个字段，这样它们就不会立即发生冲突。很可能，您将无法再完成数独。

这个问题使数独成为谜题，而您的程序忽略了它——所以它一定会失败（除非随机生成器今天真的、*真的*、**真的很**幸运）。

生成数独的一个更好的方法是从一个已知的有效数独开始，而不是交换行和列（总是在 3 行/列块内）、三行/列的整个块和交换数（例如，每 3与 7 并同时每 7 与 3)，以便每次交换保持整个数独有效。

# jakarta-ee - ServletContext 在部署时初始化了两次

> ID：13800802
> 
> 赞同：0
> 
> 时间：2012-12-10T12:17:29.010
> 
> 标签：jakarta-ee, servlets, glassfish-3

当我将 Web 项目部署到 Glassfish 3.1 中时，ServletContextListener->contextInitialized 方法被调用了两次。据我所知，每个 Web 应用程序只有一个 ServletContext。ServletContext 将在部署应用程序时创建，因此 ServletContextListener 只需调用一次。我认为问题是因为我的本地机器上安装了 Glassfish。当我将相同的war文件部署到另一台机器上下文时，它像往常一样只初始化一次，因此它可以正常工作。

**这是 web.xml**

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xmlns="http://java.sun.com/xml/ns/javaee" xmlns:web="http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd"
xsi:schemaLocation="http://java.sun.com/xml/ns/javaee 
http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd"
id="WebApp_ID" version="2.5">

<display-name>JavaServerFaces</display-name>

<!-- Change to "Production" when you are ready to deploy -->
<context-param>
    <param-name>javax.faces.PROJECT_STAGE</param-name>
    <param-value>Development</param-value>
</context-param>

<!-- Welcome page -->
<welcome-file-list>
    <welcome-file>faces/index.xhtml</welcome-file>
</welcome-file-list>

<!-- JSF mapping -->
<servlet>
    <servlet-name>Faces Servlet</servlet-name>
    <servlet-class>javax.faces.webapp.FacesServlet</servlet-class>
    <load-on-startup>1</load-on-startup>
</servlet>

<!-- Map these files with JSF -->
<servlet-mapping>
    <servlet-name>Faces Servlet</servlet-name>
    <url-pattern>/faces/*</url-pattern>
</servlet-mapping>
<servlet-mapping>
    <servlet-name>Faces Servlet</servlet-name>
    <url-pattern>*.jsf</url-pattern>
</servlet-mapping>
<servlet-mapping>
    <servlet-name>Faces Servlet</servlet-name>
    <url-pattern>*.faces</url-pattern>
</servlet-mapping>
<servlet-mapping>
    <servlet-name>Faces Servlet</servlet-name>
    <url-pattern>*.xhtml</url-pattern>
</servlet-mapping>

<listener>
    <listener-class>com.mkyong.base.BootStrapper</listener-class>
</listener> 
```

**类文件**

```
 import javax.servlet.ServletContextEvent;
   import javax.servlet.ServletContextListener;

   public class BootStrapper implements ServletContextListener{

@Override
public void contextDestroyed(ServletContextEvent arg0) {
    System.out.println("JavaServerFaces context destroyed.");               
}

@Override
public void contextInitialized(ServletContextEvent arg0) {
    System.out.println("JavaServerFaces context initialized.");
    try {
        throw new Exception();
     }
     catch (Exception e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
     }
}

   } 
```

**服务器日志**

```
[#|2012-12-10T14:50:59.030+0200|INFO|glassfish3.1.1|javax.enterprise.resource.webcontainer.jsf.config|_ThreadID=25;_ThreadName=Thread-2;|Initializing Mojarra 2.1.3 (FCS b02) for context '/JavaServerFaces'|#]

[#|2012-12-10T14:50:59.114+0200|INFO|glassfish3.1.1|org.hibernate.validator.engine.resolver.DefaultTraversableResolver|_ThreadID=25;_ThreadName=Thread-2;|Instantiated an instance of org.hibernate.validator.engine.resolver.JPATraversableResolver.|#]

[#|2012-12-10T14:50:59.278+0200|INFO|glassfish3.1.1|org.primefaces.webapp.PostConstructApplicationEventListener|_ThreadID=25;_ThreadName=Thread-2;|Running on PrimeFaces 3.4.2|#]

[#|2012-12-10T14:50:59.280+0200|INFO|glassfish3.1.1|javax.enterprise.system.std.com.sun.enterprise.server.logging|_ThreadID=25;_ThreadName=Thread-2;|JavaServerFaces context initialized./JavaServerFaces|#]

[#|2012-12-10T14:50:59.280+0200|SEVERE|glassfish3.1.1|javax.enterprise.system.std.com.sun.enterprise.server.logging|_ThreadID=25;_ThreadName=Thread-2;|java.lang.Exception
    at com.mkyong.base.BootStrapper.contextInitialized(BootStrapper.java:17)
    at org.apache.catalina.core.StandardContext.contextListenerStart(StandardContext.java:4750)
    at com.sun.enterprise.web.WebModule.contextListenerStart(WebModule.java:550)
    at org.apache.catalina.core.StandardContext.start(StandardContext.java:5366)
    at com.sun.enterprise.web.WebModule.start(WebModule.java:498)
    at org.apache.catalina.core.ContainerBase.addChildInternal(ContainerBase.java:917)
    at org.apache.catalina.core.ContainerBase.addChild(ContainerBase.java:901)
    at org.apache.catalina.core.StandardHost.addChild(StandardHost.java:733)
    at com.sun.enterprise.web.WebContainer.loadWebModule(WebContainer.java:2000)
    at com.sun.enterprise.web.WebContainer.loadWebModule(WebContainer.java:1651)
    at com.sun.enterprise.web.WebApplication.start(WebApplication.java:109)
    at org.glassfish.internal.data.EngineRef.start(EngineRef.java:130)
    at org.glassfish.internal.data.ModuleInfo.start(ModuleInfo.java:269)
    at org.glassfish.internal.data.ApplicationInfo.start(ApplicationInfo.java:294)
    at com.sun.enterprise.v3.server.ApplicationLifecycle.deploy(ApplicationLifecycle.java:462)
    at org.glassfish.deployment.admin.CreateApplicationRefCommand.execute(CreateApplicationRefCommand.java:311)
    at com.sun.enterprise.v3.admin.CommandRunnerImpl$1.execute(CommandRunnerImpl.java:355)
    at com.sun.enterprise.v3.admin.CommandRunnerImpl.doCommand(CommandRunnerImpl.java:370)
    at com.sun.enterprise.v3.admin.CommandRunnerImpl.doCommand(CommandRunnerImpl.java:1045)
    at com.sun.enterprise.v3.admin.CommandRunnerImpl.access$1200(CommandRunnerImpl.java:96)
    at com.sun.enterprise.v3.admin.CommandRunnerImpl$ExecutionContext.execute(CommandRunnerImpl.java:1244)
    at com.sun.enterprise.v3.admin.CommandRunnerImpl$ExecutionContext.execute(CommandRunnerImpl.java:1232)
    at org.glassfish.admin.rest.ResourceUtil.runCommand(ResourceUtil.java:202)
    at org.glassfish.admin.rest.ResourceUtil.runCommand(ResourceUtil.java:195)
    at org.glassfish.admin.rest.resources.TemplateListOfResource.createResource(TemplateListOfResource.java:148)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at com.sun.jersey.spi.container.JavaMethodInvokerFactory$1.invoke(JavaMethodInvokerFactory.java:60)
    at com.sun.jersey.server.impl.model.method.dispatch.AbstractResourceMethodDispatchProvider$ResponseOutInvoker._dispatch(AbstractResourceMethodDispatchProvider.java:205)
    at com.sun.jersey.server.impl.model.method.dispatch.ResourceJavaMethodDispatcher.dispatch(ResourceJavaMethodDispatcher.java:75)
    at com.sun.jersey.server.impl.uri.rules.HttpMethodRule.accept(HttpMethodRule.java:288)
    at com.sun.jersey.server.impl.uri.rules.SubLocatorRule.accept(SubLocatorRule.java:134)
    at com.sun.jersey.server.impl.uri.rules.RightHandPathRule.accept(RightHandPathRule.java:147)
    at com.sun.jersey.server.impl.uri.rules.SubLocatorRule.accept(SubLocatorRule.java:134)
    at com.sun.jersey.server.impl.uri.rules.RightHandPathRule.accept(RightHandPathRule.java:147)
    at com.sun.jersey.server.impl.uri.rules.SubLocatorRule.accept(SubLocatorRule.java:134)
    at com.sun.jersey.server.impl.uri.rules.RightHandPathRule.accept(RightHandPathRule.java:147)
    at com.sun.jersey.server.impl.uri.rules.SubLocatorRule.accept(SubLocatorRule.java:134)
    at com.sun.jersey.server.impl.uri.rules.RightHandPathRule.accept(RightHandPathRule.java:147)
    at com.sun.jersey.server.impl.uri.rules.ResourceClassRule.accept(ResourceClassRule.java:108)
    at com.sun.jersey.server.impl.uri.rules.RightHandPathRule.accept(RightHandPathRule.java:147)
    at com.sun.jersey.server.impl.uri.rules.RootResourceClassesRule.accept(RootResourceClassesRule.java:84)
    at com.sun.jersey.server.impl.application.WebApplicationImpl._handleRequest(WebApplicationImpl.java:1469)
    at com.sun.jersey.server.impl.application.WebApplicationImpl._handleRequest(WebApplicationImpl.java:1400)
    at com.sun.jersey.server.impl.application.WebApplicationImpl.handleRequest(WebApplicationImpl.java:1349)
    at com.sun.jersey.server.impl.application.WebApplicationImpl.handleRequest(WebApplicationImpl.java:1339)
    at com.sun.jersey.server.impl.container.grizzly.GrizzlyContainer._service(GrizzlyContainer.java:182)
    at com.sun.jersey.server.impl.container.grizzly.GrizzlyContainer.service(GrizzlyContainer.java:147)
    at org.glassfish.admin.rest.adapter.RestAdapter.service(RestAdapter.java:184)
    at com.sun.grizzly.tcp.http11.GrizzlyAdapter.service(GrizzlyAdapter.java:168)
    at com.sun.enterprise.v3.server.HK2Dispatcher.dispath(HK2Dispatcher.java:117)
    at com.sun.enterprise.v3.services.impl.ContainerMapper.service(ContainerMapper.java:238)
    at com.sun.grizzly.http.ProcessorTask.invokeAdapter(ProcessorTask.java:828)
    at com.sun.grizzly.http.ProcessorTask.doProcess(ProcessorTask.java:725)
    at com.sun.grizzly.http.ProcessorTask.process(ProcessorTask.java:1019)
    at com.sun.grizzly.http.DefaultProtocolFilter.execute(DefaultProtocolFilter.java:225)
    at com.sun.grizzly.DefaultProtocolChain.executeProtocolFilter(DefaultProtocolChain.java:137)
    at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:104)
    at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:90)
    at com.sun.grizzly.http.HttpProtocolChain.execute(HttpProtocolChain.java:79)
    at com.sun.grizzly.ProtocolChainContextTask.doCall(ProtocolChainContextTask.java:54)
    at com.sun.grizzly.SelectionKeyContextTask.call(SelectionKeyContextTask.java:59)
    at com.sun.grizzly.ContextTask.run(ContextTask.java:71)
    at com.sun.grizzly.util.AbstractThreadPool$Worker.doWork(AbstractThreadPool.java:532)
    at com.sun.grizzly.util.AbstractThreadPool$Worker.run(AbstractThreadPool.java:513)
    at java.lang.Thread.run(Thread.java:662)
|#]

[#|2012-12-10T14:50:59.370+0200|INFO|glassfish3.1.1|javax.enterprise.resource.webcontainer.jsf.config|_ThreadID=25;_ThreadName=Thread-2;|Initializing Mojarra 2.1.3 (FCS b02) for context '/JavaServerFaces'|#]

[#|2012-12-10T14:50:59.432+0200|INFO|glassfish3.1.1|org.hibernate.validator.engine.resolver.DefaultTraversableResolver|_ThreadID=25;_ThreadName=Thread-2;|Instantiated an instance of org.hibernate.validator.engine.resolver.JPATraversableResolver.|#]

[#|2012-12-10T14:50:59.510+0200|INFO|glassfish3.1.1|org.primefaces.webapp.PostConstructApplicationEventListener|_ThreadID=25;_ThreadName=Thread-2;|Running on PrimeFaces 3.4.2|#]

[#|2012-12-10T14:50:59.511+0200|INFO|glassfish3.1.1|javax.enterprise.system.std.com.sun.enterprise.server.logging|_ThreadID=25;_ThreadName=Thread-2;|JavaServerFaces context initialized./JavaServerFaces|#]

[#|2012-12-10T14:50:59.511+0200|SEVERE|glassfish3.1.1|javax.enterprise.system.std.com.sun.enterprise.server.logging|_ThreadID=25;_ThreadName=Thread-2;|java.lang.Exception
    at com.mkyong.base.BootStrapper.contextInitialized(BootStrapper.java:17)
    at org.apache.catalina.core.StandardContext.contextListenerStart(StandardContext.java:4750)
    at com.sun.enterprise.web.WebModule.contextListenerStart(WebModule.java:550)
    at org.apache.catalina.core.StandardContext.start(StandardContext.java:5366)
    at com.sun.enterprise.web.WebModule.start(WebModule.java:498)
    at org.apache.catalina.core.ContainerBase.addChildInternal(ContainerBase.java:917)
    at org.apache.catalina.core.ContainerBase.addChild(ContainerBase.java:901)
    at org.apache.catalina.core.StandardHost.addChild(StandardHost.java:733)
    at com.sun.enterprise.web.WebContainer.loadWebModule(WebContainer.java:2000)
    at com.sun.enterprise.web.WebContainer.loadWebModule(WebContainer.java:1651)
    at com.sun.enterprise.web.WebApplication.start(WebApplication.java:109)
    at org.glassfish.internal.data.EngineRef.start(EngineRef.java:130)
    at org.glassfish.internal.data.ModuleInfo.start(ModuleInfo.java:269)
    at org.glassfish.internal.data.ApplicationInfo.start(ApplicationInfo.java:294)
    at com.sun.enterprise.v3.server.ApplicationLifecycle.deploy(ApplicationLifecycle.java:462)
    at org.glassfish.deployment.admin.CreateApplicationRefCommand.execute(CreateApplicationRefCommand.java:311)
    at com.sun.enterprise.v3.admin.CommandRunnerImpl$1.execute(CommandRunnerImpl.java:355)
    at com.sun.enterprise.v3.admin.CommandRunnerImpl.doCommand(CommandRunnerImpl.java:370)
    at com.sun.enterprise.v3.admin.CommandRunnerImpl.doCommand(CommandRunnerImpl.java:1045)
    at com.sun.enterprise.v3.admin.CommandRunnerImpl.access$1200(CommandRunnerImpl.java:96)
    at com.sun.enterprise.v3.admin.CommandRunnerImpl$ExecutionContext.execute(CommandRunnerImpl.java:1244)
    at com.sun.enterprise.v3.admin.CommandRunnerImpl$ExecutionContext.execute(CommandRunnerImpl.java:1232)
    at org.glassfish.admin.rest.ResourceUtil.runCommand(ResourceUtil.java:202)
    at org.glassfish.admin.rest.ResourceUtil.runCommand(ResourceUtil.java:195)
    at org.glassfish.admin.rest.resources.TemplateListOfResource.createResource(TemplateListOfResource.java:148)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at com.sun.jersey.spi.container.JavaMethodInvokerFactory$1.invoke(JavaMethodInvokerFactory.java:60)
    at com.sun.jersey.server.impl.model.method.dispatch.AbstractResourceMethodDispatchProvider$ResponseOutInvoker._dispatch(AbstractResourceMethodDispatchProvider.java:205)
    at com.sun.jersey.server.impl.model.method.dispatch.ResourceJavaMethodDispatcher.dispatch(ResourceJavaMethodDispatcher.java:75)
    at com.sun.jersey.server.impl.uri.rules.HttpMethodRule.accept(HttpMethodRule.java:288)
    at com.sun.jersey.server.impl.uri.rules.SubLocatorRule.accept(SubLocatorRule.java:134)
    at com.sun.jersey.server.impl.uri.rules.RightHandPathRule.accept(RightHandPathRule.java:147)
    at com.sun.jersey.server.impl.uri.rules.SubLocatorRule.accept(SubLocatorRule.java:134)
    at com.sun.jersey.server.impl.uri.rules.RightHandPathRule.accept(RightHandPathRule.java:147)
    at com.sun.jersey.server.impl.uri.rules.SubLocatorRule.accept(SubLocatorRule.java:134)
    at com.sun.jersey.server.impl.uri.rules.RightHandPathRule.accept(RightHandPathRule.java:147)
    at com.sun.jersey.server.impl.uri.rules.SubLocatorRule.accept(SubLocatorRule.java:134)
    at com.sun.jersey.server.impl.uri.rules.RightHandPathRule.accept(RightHandPathRule.java:147)
    at com.sun.jersey.server.impl.uri.rules.ResourceClassRule.accept(ResourceClassRule.java:108)
    at com.sun.jersey.server.impl.uri.rules.RightHandPathRule.accept(RightHandPathRule.java:147)
    at com.sun.jersey.server.impl.uri.rules.RootResourceClassesRule.accept(RootResourceClassesRule.java:84)
    at com.sun.jersey.server.impl.application.WebApplicationImpl._handleRequest(WebApplicationImpl.java:1469)
    at com.sun.jersey.server.impl.application.WebApplicationImpl._handleRequest(WebApplicationImpl.java:1400)
    at com.sun.jersey.server.impl.application.WebApplicationImpl.handleRequest(WebApplicationImpl.java:1349)
    at com.sun.jersey.server.impl.application.WebApplicationImpl.handleRequest(WebApplicationImpl.java:1339)
    at com.sun.jersey.server.impl.container.grizzly.GrizzlyContainer._service(GrizzlyContainer.java:182)
    at com.sun.jersey.server.impl.container.grizzly.GrizzlyContainer.service(GrizzlyContainer.java:147)
    at org.glassfish.admin.rest.adapter.RestAdapter.service(RestAdapter.java:184)
    at com.sun.grizzly.tcp.http11.GrizzlyAdapter.service(GrizzlyAdapter.java:168)
    at com.sun.enterprise.v3.server.HK2Dispatcher.dispath(HK2Dispatcher.java:117)
    at com.sun.enterprise.v3.services.impl.ContainerMapper.service(ContainerMapper.java:238)
    at com.sun.grizzly.http.ProcessorTask.invokeAdapter(ProcessorTask.java:828)
    at com.sun.grizzly.http.ProcessorTask.doProcess(ProcessorTask.java:725)
    at com.sun.grizzly.http.ProcessorTask.process(ProcessorTask.java:1019)
    at com.sun.grizzly.http.DefaultProtocolFilter.execute(DefaultProtocolFilter.java:225)
    at com.sun.grizzly.DefaultProtocolChain.executeProtocolFilter(DefaultProtocolChain.java:137)
    at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:104)
    at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:90)
    at com.sun.grizzly.http.HttpProtocolChain.execute(HttpProtocolChain.java:79)
    at com.sun.grizzly.ProtocolChainContextTask.doCall(ProtocolChainContextTask.java:54)
    at com.sun.grizzly.SelectionKeyContextTask.call(SelectionKeyContextTask.java:59)
    at com.sun.grizzly.ContextTask.run(ContextTask.java:71)
    at com.sun.grizzly.util.AbstractThreadPool$Worker.doWork(AbstractThreadPool.java:532)
    at com.sun.grizzly.util.AbstractThreadPool$Worker.run(AbstractThreadPool.java:513)
    at java.lang.Thread.run(Thread.java:662)
|#]

[#|2012-12-10T14:50:59.516+0200|INFO|glassfish3.1.1|javax.enterprise.system.container.web.com.sun.enterprise.web|_ThreadID=25;_ThreadName=Thread-2;|WEB0671: Loading application [JavaServerFaces] at [/JavaServerFaces]|#] 
```

**显示第一个和第二个调用日志的 Server.log 的摘要**

```
 [#|2012-12-10T14:50:59.280+0200|SEVERE|glassfish3.1.1|javax.enterprise.system.std.com.sun.enterprise.server.logging|_ThreadID=25;_ThreadName=Thread-2;|java.lang.Exception
            at com.mkyong.base.BootStrapper.contextInitialized(BootStrapper.java:17)

    [#|2012-12-10T14:50:59.511+0200|SEVERE|glassfish3.1.1|javax.enterprise.system.std.com.sun.enterprise.server.logging|_ThreadID=25;_ThreadName=Thread-2;|java.lang.Exception
    at com.mkyong.base.BootStrapper.contextInitialized(BootStrapper.java:17) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T14:23:52.397

这可能是由于您的应用程序被分配给 glassfish 配置中的多个虚拟服务器。

了解虚拟服务器如何在 glassfish 中工作：

[http://docs.oracle.com/cd/E18930_01/html/821-2416/ggncs.html#gixku](http://docs.oracle.com/cd/E18930_01/html/821-2416/ggncs.html#gixku)

# mysql - 如何在 C#/XAML 项目中使用 MySQL

> ID：13800804
> 
> 赞同：0
> 
> 时间：2012-12-10T12:17:33.940
> 
> 标签：mysql, xaml

我一直在网上搜索，试图找出如何在 XAML 项目中使用 MySQL。我已经看到了一堆使用诸如 MySqlConnection(...) 之类的函数的示例，但是没有一个提到是否需要特定的程序集，或者是否需要先下载它——比如 dll。需要这样的东西，因为它不能立即工作。

有人知道吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T12:23:56.530

您必须下载并安装 MySql .Net 连接器。MySql 提供的连接.net 的工具。这将具有用于将 .Net 应用程序连接到 MySql 的程序集。

# colors - 使用 THREE.js 淡化颜色

> ID：13800808
> 
> 赞同：1
> 
> 时间：2012-12-10T12:17:43.387
> 
> 标签：colors, three.js, webgl

我在 THREE.js 中有一个简单的立方体：

```
 var cubeMaterial = new THREE.MeshLambertMaterial({color: 0xCC0000});

    var cube = new THREE.Mesh(
        new THREE.CubeGeometry(100, 100, 100),
    cubeMaterial);
    cube.position.set(0.7,1.95,-0.1);
    cube.scale.x = cube.scale.y = cube.scale.z = 0.002;
    scene.add(cube); 
```

关于如何即时更改材料颜色的任何建议？我想要实现的是平滑淡入淡出（例如从红色到绿色）并且能够动态淡化颜色。所以我的猜测是它需要在渲染循环中不断地重新渲染，然后以某种方式改变颜色，使其逐渐淡化为目标颜色。但我不确定如何在代码中做到这一点..

提前致谢！

安德斯

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-10T14:04:45.010

您可以使用 TWEEN.js：[https ://github.com/sole/tween.js/](https://github.com/sole/tween.js/)

在这个 Stackoverflow 问题中有一个很好的解决方案：[How to tween between two colors using three.js?](https://stackoverflow.com/questions/12504449/how-to-tween-between-two-colours-using-three-js)

# entity-framework - 一个项目可以有两个不同的 EF 数据模型引用同一个表吗？

> ID：13800814
> 
> 赞同：1
> 
> 时间：2012-12-10T12:18:04.977
> 
> 标签：entity-framework, entity-framework-4.1

我的系统有一个主要的数据模型来执行大部分工作。

该模型有很多表，当我开始向应用程序添加管理功能时[，考虑到性能，我决定使用第二个单独的数据模型。](http://www.codeproject.com/Articles/38922/Performance-and-the-Entity-Framework)

一切正常，直到我的第二个数据模型需要访问一个也在主数据模型中的表。现在，通过挖掘我可以看到[这可能会导致问题](https://stackoverflow.com/questions/4761201/ef4-two-models-one-database-possible)。

我想出的两种可能的解决方法是：

1.  将数据模型放在单独的项目中。
2.  需要时使用视图/存储过程来访问相关表。

方法 1 似乎最简单，但我担心是否会有任何性能损失。方法 2 似乎有点混乱，并且没有使用 EF。

在我使用方法 1 之前，我可以使用更简单的解决方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T14:56:25.623

最后，我决定将这两个数据模型放入单独的项目中，并且我没有注意到任何放缓（我没有进行任何基准测试，但它通过了感知测试）。

在她的一个在线教程中，EF 大师 Julie Lerman 说无论如何你都应该将你的[数据模型放在一个单独的项目中](http://msdn.microsoft.com/en-gb/data/ff628208.aspx)，所以我认为这不是一个糟糕的解决方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-02-06T14:44:36.020

我在同一个项目中使用 2 个模型，因为我连接到 2 个不同的数据库。我在 *.tt 文件上使用“自定义工具命名空间”放置了不同的命名空间，但这不是必需的。它通常可以工作，但是当具有相同名称的实体（表）在两个模型中时，它无法处理。当您保存一个模型时，具有相同名称的实体将从第二个模型中删除。

# php - 带有动态加载的 JQuery 分页

> ID：13800816
> 
> 赞同：2
> 
> 时间：2012-12-10T12:18:07.513
> 
> 标签：php, jquery, pagination

我目前正在为我的一个朋友创建一个网站，他希望在首页上有一个“博客”类型的系统，这对我来说很好，我可以做到。

我目前正在使用稍微修改的[分页类](http://www.catchmyfame.com/2011/10/23/php-pagination-class-updated-version-2/)以删除“全部”选项（以及与之相关的不必要的输出）。

但是，我希望能够动态加载每个页面而不是重定向到每个页面（如果需要重写分页类，我不介意这样做，只要我能大致了解如何去做吧...）

[JPaginate 之](http://www.catchmyfame.com/2011/10/23/php-pagination-class-updated-version-2/)类的解决方案对我不起作用，因为最后，页面可能会加载大量文本（消息正文存储在 LargeText 表中）并且我不想在源代码中包含所有文章（以前的经验实际上告诉我将这么多文本加载到网络浏览器中并不是最聪明的事情）

需要注意的几点，连接是 MySQLi（Pagination 类只附加了 Sql 的限制代码），我不太了解 Javascript，我仍然认为自己是 php 的菜鸟。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T12:20:37.730

你可以使用这样的东西：

[http://www.9lessons.info/2009/09/pagination-with-jquery-mysql-and-php.html](http://www.9lessons.info/2009/09/pagination-with-jquery-mysql-and-php.html)

[http://www.9lessons.info/2010/10/pagination-with-jquery-php-ajax-and.html](http://www.9lessons.info/2010/10/pagination-with-jquery-php-ajax-and.html)

# c - 代码工作了一段时间然后就停止了

> ID：13800824
> 
> 赞同：0
> 
> 时间：2012-12-10T12:18:32.033
> 
> 标签：c, multithreading, sockets

我制作了一个应用程序，它监视接口并每秒返回一个数据包读数，但在执行时它运行良好大约 30 秒，直到我打开一个 YouTube 页面让计数器运行得有点高。几秒钟后，应用程序冻结并且什么也不做。这发生在不规则的时间间隔内，所以我猜测它与计数有关，有代码，它是用 C 编写的。

```
#include <stdio.h>
#include <pcap.h>
#include <sys/socket.h>
#include <netinet/in.h>
#include <arpa/inet.h>
#include <time.h>
#include <pthread.h>

void callThreads(u_char *useless, const struct pcap_pkthdr* pkthdr, const u_char* packet);
void *packetcalc(void *threadid);

static struct timespec time1, time2;
static int t = 0, i = 0;
static long rc;
static pthread_t threads[1];

int main(int argc, char *argv[]){

    pcap_t* descr;
    char errbuf[PCAP_ERRBUF_SIZE];

    descr = pcap_open_live("eth0", BUFSIZ, 1, -1, errbuf);

    if(descr == NULL){
        printf("Error: pcap_open_live()\n");
        return 1;
    }
    clock_gettime(CLOCK_PROCESS_CPUTIME_ID, &time1);
    pcap_loop(descr, 0, callThreads, NULL);
    return 0;
}

void callThreads(u_char *useless, const struct pcap_pkthdr* pkthdr, const u_char* packet){
    if(i >= 2147483647){
        //In case i gets full from counting too many packets        
        i = 0;
        time1.tv_sec = 0;
    }

    ++i;
    rc = pthread_create(&threads[t], NULL, packetcalc, (void *) t); 
}

void *packetcalc(void *threadid){

    static int j;
    static int temp = 0;

    clock_gettime(CLOCK_PROCESS_CPUTIME_ID, &time1);
    if(temp != time1.tv_sec){
        j = (i / time1.tv_sec);
        printf("Packets: %d/sec\t(%d)\t(%d)\n", j, i, (int)time1.tv_sec);
        temp = time1.tv_sec;
    }

    pthread_exit(NULL);
} 
```

编辑：是否也可能是我在一个由于多线程而只分配了 1 个 CPU 的 VM 中运行此代码？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T13:16:24.920

您正在为每个数据包创建一个线程，这是一个可怕的想法。只需从您提供的回调函数中打印出您需要的任何计数器就足够了[`pcap_loop(3)`](http://www.manpagez.com/man/3/pcap_loop/)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T12:53:39.773

您的代码有几个问题。首先，您使用默认线程属性创建线程，这意味着它们被创建为可连接线程，即您必须`pthread_join()`稍后调用，否则线程控制结构将继续存在。因此，您的代码中存在内存泄漏。可能您应该检查返回值`pthread_create`以检测何时发生错误，例如系统无法创建新线程并且您的数据包计数例程已停止调用。您还可以使用以下代码创建处于分离状态的新线程：

```
pthread_attr_t attr;

pthread_attribute_init(&attr);
pthread_attribute_setdetachstate(&attr, PTHREAD_CREATE_DETACHED);

pthread_create(&threadid, &attr, packetcalc, (void *) t);

pthread_attribute_destroy(&attr); 
```

分离的线程不需要稍后加入。他们在线程退出时释放所有资源。

其次，您的线程使用一些全局变量，就好像它们是私有的，而实际上它们是共享的。这包括全局的`time1`，以及局部的`j`和`temp`，它们被声明`static`并因此在线程之间共享。

请注意，创建线程是一项昂贵的操作。当您的代码等待`pthread_create`完成时，新数据包可能会到达并填满由 使用的循环缓冲区，`libpcap`因此您可能会丢失一些数据包。事实上，每个数据包使用一个线程是一个非常糟糕的主意。而是只使用两个线程 - 一个运行`pcap`循环，另一个定期计算数据包数量并计算和打印数据包速率。

# jsf - WebSphere Web 容器线程在加载 JSF 表达式工厂时被阻塞

> ID：13800828
> 
> 赞同：2
> 
> 时间：2012-12-10T12:18:51.417
> 
> 标签：jsf, jsf-2, websphere

我正在使用 WAS 8、JSF 2 (Apache MyFaces) 在性能测试期间，我们注意到一些 Web 容器线程在加载 JSF 表达式工厂时被阻塞。从线程转储中找到下面的日志

任何关于如何避免这种情况的建议都会很有用。为什么 JSF 为 javax.el.expressionfactory 的每个新实例创建加载类？

```
java/lang/ClassLoader.loadClass(ClassLoader.java:627(Compiled Code)) at
javax/el/ExpressionFactory.newInstance(ExpressionFactory.java:175(Compiled Code)) at
javax/el/ExpressionFactory.newInstance(ExpressionFactory.java:107(Compiled Code)) at
javax/el/BeanELResolver.invoke(BeanELResolver.java:404(Compiled Code)) at
javax/el/CompositeELResolver.invoke(CompositeELResolver.java:137(Compiled Code)) at
org/apache/el/parser/AstValue.getValue(AstValue.java:162(Compiled Code)) at
org/apache/el/ValueExpressionImpl.getValue(ValueExpressionImpl.java:283(Compiled Code)) at
org/apache/myfaces/view/facelets/el/TagValueExpression.getValue(TagValueExpression.java:85(Compiled Code)) at
org/apache/el/parser/AstIdentifier.getValue(AstIdentifier.java:67(Compiled Code)) at
org/apache/el/ValueExpressionImpl.getValue(ValueExpressionImpl.java:283(Compiled Code)) at
org/apache/myfaces/view/facelets/el/ELText$ELTextVariable.toString(ELText.java:202(Compiled Code)) at
org/apache/myfaces/view/facelets/el/ELText$ELTextComposite.toString(ELText.java:134(Compiled Code)) at
org/apache/myfaces/view/facelets/compiler/AttributeInstruction.write(AttributeInstruction.java:51(Compiled Code)) at
org/apache/myfaces/view/facelets/compiler/UIInstructions.encodeBegin(UIInstructions.java:46(Compiled Code)) at
org/apache/myfaces/view/facelets/compiler/UILeaf.encodeAll(UILeaf.java:214(Compiled Code)) at
javax/faces/component/UIComponent.encodeAll(UIComponent.java:622(Compiled Code)) at
javax/faces/component/UIComponent.encodeAll(UIComponent.java:622(Compiled Code)) at
org/apache/myfaces/view/facelets/FaceletViewDeclarationLanguage.renderView(FaceletViewDeclarationLanguage.java:1320(Compiled Code)) at
org/apache/myfaces/application/ViewHandlerImpl.renderView(ViewHandlerImpl.java:263(Compiled Code)) at
org/apache/myfaces/lifecycle/RenderResponseExecutor.execute(RenderResponseExecutor.java:85(Compiled Code)) at
org/apache/myfaces/lifecycle/LifecycleImpl.render(LifecycleImpl.java:239(Compiled Code)) at
javax/faces/webapp/FacesServlet.service(FacesServlet.java:191(Compiled Code)) at
com/ibm/ws/cache/servlet/ServletWrapper.serviceProxied(ServletWrapper.java:307(Compiled Code)) at
com/ibm/ws/cache/servlet/CacheHook.handleFragment(CacheHook.java:562(Compiled Code)) at
com/ibm/ws/cache/servlet/CacheHook.handleServlet(CacheHook.java:255(Compiled Code)) at
com/ibm/ws/cache/servlet/ServletWrapper.service(ServletWrapper.java:259(Compiled Code)) at
com/ibm/ws/webcontainer/servlet/ServletWrapper.service(ServletWrapper.java:1224(Compiled Code)) at
com/ibm/ws/webcontainer/servlet/ServletWrapper.handleRequest(ServletWrapper.java:774(Compiled Code)) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T15:40:42.503

这似乎是最近解决的（但尚未在修订包中提供）APAR PM78648。

[http://www-01.ibm.com/support/docview.wss?uid=swg24034243&myns=swgws&mynp=OCSSEQTP&mync=R](http://www-01.ibm.com/support/docview.wss?uid=swg24034243&myns=swgws&mynp=OCSSEQTP&mync=R)

我建议向 IBM 开一张票并请求临时修复，以便您可以继续进行性能测试。

# jms - 当多个 MessageConsumer 连接到同一个队列（Websphere MQ）时，如何对消息消费者进行负载均衡？

> ID：13800829
> 
> 赞同：1
> 
> 时间：2012-12-10T12:18:55.587
> 
> 标签：jms, websphere, load-balancing, ibm-mq

我正在使用 WebSphere MQ 7，我有两个客户端连接到同一个 QMgr 并使用来自同一个队列的消息，如下面的代码：

```
 while (true) {
        TextMessage message = (TextMessage) consumer.receive(1000);
        if (message != null) {
            System.out.println("*********************" + message.getText());
        }
    } 
```

我发现只有一个客户端总是检索消息。有什么方法可以让两个客户端中的消费消息负载平衡？MQ 服务器端的任何配置选项？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-10T17:54:44.347

在管理队列句柄时，WMQ 将它们放入堆栈而不是 LIFO 队列要快得多。因此，如果消息到达队列的速度比处理它们的速度慢，那么一个实例可能会处理该消息并执行另一个 GET，WMQ 会将其下推到堆栈上。结果是只有一个实例会在低容量用例中看到消息。

在有许多实例在等待消息的较大环境中，活动可能会在这些实例的一部分之间循环，而其他实例则需要消息。例如，队列中有 10 个 GETter，您可能会看到 3 条正在处理的消息和 7 条空闲消息。

尽管这对于 MQ 来说要快得多，但对于不了解其内部工作原理的客户来说，这会让人感到困惑，因此他们会打开 PMR 来询问这个确切的问题。IBM 必须在以下几个备选方案中进行选择：

*   添加多个代码路径以在完全加载时由堆栈管理以提高性能，而在轻负载时由 LIFO 管理以实现明显的平衡。这使代码膨胀，添加了许多新的决策点来引入错误，并解决了一个感知问题，而不是可靠性或性能问题。
*   让客户了解它是如何工作的。当然，一旦你记录了它，你就不能改变它。我发现这一点的方式是参加 IMPACT 的“WMQ Internals”演示文稿。它不在 Infocenter 中，因此 IBM 可以更改它，但它可供客户使用。
*   没做什么。尽管从代码设计的角度来看这是最好的结果，但这种行为是违反直觉的。用户需要了解为什么事情没有按预期运行，并且会浪费时间尝试找到导致所需行为的配置，或者打开 PMR。

我不确定它是否仍然以这种方式工作，但我希望它确实如此。我过去测试它的方法是一次将许多消息放在队列中，然后查看它们是如何分布的。如果您在一个工作单元中将大约 50 条消息放入队列中，您应该会看到两个实例之间的分布更好。

如何一次将 50 条消息放到队列中？首先在应用程序关闭或备用队列的情况下生成它们。如果您在目标队列中生成它们，请使用[Q 程序](http://ibm.co/SupptPacMA01)将它们移动到备用队列。现在启动应用程序并确保队列的`IPPROC`计数等于您启动的应用程序实例的数量。再次使用 Q，将所有消息复制到单个工作单元中的原始队列。由于它们都立即在队列中可用，因此您的两个应用程序实例都应立即传递一条消息。如果您使用复制而不是移动，则可以根据需要多次重复此操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T12:36:07.497

您的客户端没有做太多事情，因此一个实例可能可以处理全部负载。尝试实现一个更现实的工作负载，或者更简单，在客户端中放置一个 Thread.sleep。

# php - PHP/Symfony2 表单复选框字段

> ID：13800832
> 
> 赞同：6
> 
> 时间：2012-12-10T12:19:01.333
> 
> 标签：php, symfony, checkbox

奥姆

```
My\SampleBundle\Entity\Subject:
    type: entity
    id:
        id:
            type: integer
            generator: { strategy: AUTO }
    fields:

        // ...

        motion:
            type: smallint
            unsigned: true 
```

类型

```
public function buildForm(FormBuilderInterface $builder, array $options)
{
    // ...

    $builder->add('motion', 'checkbox', array(
        'required'  => false
    ));

    // ...
} 
```

错误

> 给定“布尔”、“整数”类型的预期参数

* * *

我想通过复选框打开和关闭。value 是按 0 和 1 分配的。
即使给了 value 参数也没有用。

```
$builder->add('motion', 'checkbox', array(
    'value'     => 1,
    'required'  => false
)); 
```

我应该怎么做？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-10T12:51:36.403

在您的 ORM 映射定义中，您必须定义`motion`为布尔值而不是 smallint。仅供参考，Symfony 将 TINYINT 解释为布尔值，将任何其他整数 SQL 类型解释为整数。

```
My\SampleBundle\Entity\Subject:
    type: entity
    id:
        id:
            type: integer
            generator: { strategy: AUTO }
    fields:

        // ...

        motion:
            type: boolean 
```

# actionscript-3 - 调用 ExternalInterface.addCallback 后，我需要删除它吗？

> ID：13800836
> 
> 赞同：1
> 
> 时间：2012-12-10T12:19:10.267
> 
> 标签：actionscript-3, apache-flex

打电话`ExternalInterface.addCallback`后，我需要吗

```
ExternalInterface.addCallback("foo", null); 
```

因为我会使用`ExternalInterface.call`很多次？

这是我的方法

```
 public static function javascript(jsFunctionYouWantCall:String, jsFunctionToBindResponse:String, onResponse:Function, jsFunctionYouWantCallParam:Object = null):Boolean
    {
        if (!ExternalInterface.available)
            return false;

        try
        {
            ExternalInterface.addCallback(jsFunctionToBindResponse, function response(param:Object):void
            {
                //ExternalInterface.addCallback(jsFunctionToBindResponse, null);
                onResponse(param);
            });
            ExternalInterface.call(jsFunctionYouWantCall, jsFunctionYouWantCallParam);
        }
        catch(error:Error) 
        {
            onResponse(error);
        }

        return true;
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T13:49:15.007

不，如果您打算让页面通过相同的 js 函数调用再次访问 swf，请不要删除它。如果它不存在，您的外部 javascript 调用将不起作用。

你为什么担心删除它？

# android - 在 CountryList 类中再添加一个文本框不显示值

> ID：13800842
> 
> 赞同：-1
> 
> 时间：2012-12-10T12:19:43.010
> 
> 标签：android

这是我的最后一篇文章，请告诉我如何在此代码中添加 1 个文本框？？？我添加了新的文本框私有 EditText LocationEd；但是当我保存数据时，没有值显示这段代码有什么问题？我从这个网址复制这段代码[http://vimaltuts.com/android-tutorial-for-beginners/android-sqlite-database-example](http://vimaltuts.com/android-tutorial-for-beginners/android-sqlite-database-example)

**添加编辑国家**

```
public class AddEditCountry extends Activity {

 private long rowID; 
 private EditText nameEt;
 private EditText capEt;
 private EditText codeEt;

 private EditText LocationEd;

   @Override
   public void onCreate(Bundle savedInstanceState) 
   {
      super.onCreate(savedInstanceState); 
      setContentView(R.layout.add_country);

      nameEt = (EditText) findViewById(R.id.nameEdit);
      capEt = (EditText) findViewById(R.id.capEdit);
      codeEt = (EditText) findViewById(R.id.codeEdit);

      LocationEd = (EditText) findViewById(R.id.LocationEdit);

      Bundle extras = getIntent().getExtras(); 

      if (extras != null)
      {
         rowID = extras.getLong("row_id");
         nameEt.setText(extras.getString("name"));  
         capEt.setText(extras.getString("cap"));  
         codeEt.setText(extras.getString("code"));  
         LocationEd.setText(extras.getString("Location"));  
      }

      Button saveButton =(Button) findViewById(R.id.saveBtn);
      saveButton.setOnClickListener(new OnClickListener() {

          public void onClick(View v) 
          {
             if (nameEt.getText().length() != 0)
             {
                AsyncTask<Object, Object, Object> saveContactTask = 
                   new AsyncTask<Object, Object, Object>() 
                   {
                      @Override
                      protected Object doInBackground(Object... params) 
                      {
                         saveContact();
                         return null;
                      }

                      @Override
                      protected void onPostExecute(Object result) 
                      {
                         finish();
                      }
                   }; 

                saveContactTask.execute((Object[]) null); 
             }

             else
             {
                AlertDialog.Builder alert = new  
 AlertDialog.Builder(AddEditCountry.this);
                alert.setTitle(R.string.errorTitle); 
                alert.setMessage(R.string.errorMessage);
                alert.setPositiveButton(R.string.errorButton, null); 
                alert.show();
             }
          } 
     });
   }

   private void saveContact() 
   {
      DatabaseConnector dbConnector = new DatabaseConnector(this);

      if (getIntent().getExtras() == null)
      {
          dbConnector.insertContact(nameEt.getText().toString(),
                  capEt.getText().toString(),
                  codeEt.getText().toString(),   
  LocationEd.getText().toString());
      }
      else
      {
         dbConnector.updateContact(rowID,
            nameEt.getText().toString(),
            capEt.getText().toString(), 
            codeEt.getText().toString(), 
            LocationEd.getText().toString());
      }
   }
} 
```

**国家名单**

```
 public class CountryList extends ListActivity {

 public static final String ROW_ID = "row_id";
 private ListView conListView;
 private CursorAdapter conAdapter;

   @Override
   public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    conListView=getListView();
    conListView.setOnItemClickListener(viewConListener);

    // map each name to a TextView
    String[] from = new String[] { "name" };
    int[] to = new int[] { R.id.countryTextView };
    conAdapter = new SimpleCursorAdapter(CountryList.this, R.layout.country_list,   
  null, from, to);
    setListAdapter(conAdapter); // set adapter
    }

@Override
protected void onResume() 
{
    super.onResume();  
    new GetContacts().execute((Object[]) null);
  } 

 @Override
 protected void onStop() 
  {
   Cursor cursor = conAdapter.getCursor();

   if (cursor != null) 
      cursor.deactivate();

   conAdapter.changeCursor(null);
   super.onStop();
   }    

 private class GetContacts extends AsyncTask<Object, Object, Cursor> 
 {
   DatabaseConnector dbConnector = new DatabaseConnector(CountryList.this);

   @Override
   protected Cursor doInBackground(Object... params)
   {
      dbConnector.open();
      return dbConnector.getAllContacts(); 
   } 

   @Override
   protected void onPostExecute(Cursor result)
   {
      conAdapter.changeCursor(result); // set the adapter's Cursor
      dbConnector.close();
   } 
 } 

 @Override
 public boolean onCreateOptionsMenu(Menu menu) 
 {
   super.onCreateOptionsMenu(menu);
   MenuInflater inflater = getMenuInflater();
   inflater.inflate(R.menu.country_menu, menu);
   return true;
 }   

@Override
public boolean onOptionsItemSelected(MenuItem item) 
{
   Intent addContact = new Intent(CountryList.this, AddEditCountry.class);
   startActivity(addContact);
   return super.onOptionsItemSelected(item);
}

 OnItemClickListener viewConListener = new OnItemClickListener() 
  {
   public void onItemClick(AdapterView<?> arg0, View arg1, int arg2,long arg3) 
   {         
      Intent viewCon = new Intent(CountryList.this, ViewCountry.class);
      viewCon.putExtra(ROW_ID, arg3);
      startActivity(viewCon);
   }
};    

 } 
```

**数据库连接器**

```
 public class DatabaseConnector {

private static final String DB_NAME = "WorldCountries";
private SQLiteDatabase database;
private DatabaseOpenHelper dbOpenHelper;

public DatabaseConnector(Context context) {
    dbOpenHelper = new DatabaseOpenHelper(context, DB_NAME, null, 1);
}

   public void open() throws SQLException 
   {
      //open database in reading/writing mode
      database = dbOpenHelper.getWritableDatabase();
   } 

   public void close() 
   {
      if (database != null)
         database.close();
   }       

   public void insertContact(String name, String cap, String code, String  
     LocationEd) 
           {
              ContentValues newCon = new ContentValues();
              newCon.put("name", name);
              newCon.put("cap", cap);
              newCon.put("code", code);

              newCon.put("Location",LocationEd);

              open();
              database.insert("country", null, newCon);
              close();
           }

           public void updateContact(long id, String name, String  
     cap,String code,String LocationEd) 
           {
              ContentValues editCon = new ContentValues();
              editCon.put("name", name);
              editCon.put("cap", cap);
              editCon.put("code", code);
              editCon.put("Location", LocationEd);

              open();
              database.update("country", editCon, "_id=" + id, null);
              close();
           }

           public Cursor getAllContacts() 
           {
              return database.query("country", new String[] {"_id",  
    "name"}, 
                 null, null, null, null, "name");
           }

           public Cursor getOneContact(long id) 
           {
              return database.query("country", null, "_id=" + id, null,  
  null, null, null);
           }

           public void deleteContact(long id) 
           {
              open(); 
              database.delete("country", "_id=" + id, null);
              close();
           }
   } 
```

**数据库OpenHelper**

```
 public class DatabaseOpenHelper extends SQLiteOpenHelper {

public DatabaseOpenHelper(Context context, String name,
        CursorFactory factory, int version) {
    super(context, name, factory, version);
}

@Override
public void onCreate(SQLiteDatabase db) {
    String createQuery = "CREATE TABLE country (_id integer primary key  
    autoincrement,name,cap,code,Location);";                 
    db.execSQL(createQuery);        
}

@Override
public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {

}

  } 
```

**查看国家**

```
 public class ViewCountry extends Activity {

   private long rowID;
   private TextView nameTv;
   private TextView capTv;
   private TextView codeTv; 

   private TextView Locationlb; 

   @Override
   public void onCreate(Bundle savedInstanceState) 
   {
      super.onCreate(savedInstanceState);
      setContentView(R.layout.view_country);

      setUpViews();
      Bundle extras = getIntent().getExtras();
      rowID = extras.getLong(CountryList.ROW_ID); 
   }

   private void setUpViews() {
       nameTv = (TextView) findViewById(R.id.nameText);
       capTv = (TextView) findViewById(R.id.capText);
       codeTv = (TextView) findViewById(R.id.codeText);

       Locationlb = (TextView) findViewById(R.id.Location_lbl);
   }

   @Override
   protected void onResume()
   {
      super.onResume();
      new LoadContacts().execute(rowID);
   } 

   private class LoadContacts extends AsyncTask<Long, Object, Cursor> 
   {
      DatabaseConnector dbConnector = new DatabaseConnector(ViewCountry.this);

      @Override
      protected Cursor doInBackground(Long... params)
      {
         dbConnector.open();
         return dbConnector.getOneContact(params[0]);
      } 

      @Override
      protected void onPostExecute(Cursor result)
      {
         super.onPostExecute(result);

         result.moveToFirst();
         // get the column index for each data item
         int nameIndex = result.getColumnIndex("name");
         int capIndex = result.getColumnIndex("cap");
         int codeIndex = result.getColumnIndex("code");

         int LocationIndex = result.getColumnIndex("Location");

         nameTv.setText(result.getString(nameIndex));
         capTv.setText(result.getString(capIndex));
         codeTv.setText(result.getString(codeIndex));
         Locationlb.setText(result.getString(LocationIndex));

         result.close();
         dbConnector.close();
      }
   } 

   @Override
   public boolean onCreateOptionsMenu(Menu menu) 
   {
      super.onCreateOptionsMenu(menu);
      MenuInflater inflater = getMenuInflater();
      inflater.inflate(R.menu.view_country_menu, menu);
      return true;
   }

   @Override
   public boolean onOptionsItemSelected(MenuItem item) 
   {
      switch (item.getItemId())
      {
         case R.id.editItem:
            Intent addEditContact =
               new Intent(this, AddEditCountry.class);

            addEditContact.putExtra(CountryList.ROW_ID, rowID);
            addEditContact.putExtra("name", nameTv.getText());
            addEditContact.putExtra("cap", capTv.getText());
            addEditContact.putExtra("code", codeTv.getText());

            addEditContact.putExtra("Location", Locationlb.getText());
            startActivity(addEditContact); 
            return true;

         case R.id.deleteItem:
            deleteContact();
            return true;

         default:
            return super.onOptionsItemSelected(item);
      } 
   }

   private void deleteContact()
   {

      AlertDialog.Builder alert = new AlertDialog.Builder(ViewCountry.this);

      alert.setTitle(R.string.confirmTitle); 
      alert.setMessage(R.string.confirmMessage); 

      alert.setPositiveButton(R.string.delete_btn,
         new DialogInterface.OnClickListener()
         {
            public void onClick(DialogInterface dialog, int button)
            {
               final DatabaseConnector dbConnector = 
                  new DatabaseConnector(ViewCountry.this);

               AsyncTask<Long, Object, Object> deleteTask =
                  new AsyncTask<Long, Object, Object>()
                  {
                     @Override
                     protected Object doInBackground(Long... params)
                     {
                        dbConnector.deleteContact(params[0]); 
                        return null;
                     } 

                     @Override
                     protected void onPostExecute(Object result)
                     {
                        finish(); 
                     }
                  };

               deleteTask.execute(new Long[] { rowID });               
            }
         }
      );

      alert.setNegativeButton(R.string.cancel_btn, null).show();
   }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T13:09:50.100

查看您的代码，似乎一切都是正确的。您是否在更改数据库后卸载了 + 重新安装了应用程序？数据库CREATE语句只在数据库第一次初始化时调用，所以如果不清除数据或者卸载+重新安装应用程序，新`Location`列就不存在了。

# csv - JavaFX 2\. 将外部 CSV 加载到 TableView

> ID：13800846
> 
> 赞同：1
> 
> 时间：2012-12-10T12:20:06.717
> 
> 标签：csv, tableview, javafx

我对 Java 很陌生，我在 Internet 上搜索一种将外部 csv 加载到 JavaFX TableView 的简单方法。我能够将 CSV 解析为一个数组，但我现在不知道如何处理它。然后我在玩 DataFX 库。但是再次无法将解析的 csv 传递到我的表中。我想我不太了解 ObservableLists 我认为这是必要的吗？你知道一个好的教程，或者你能解释一下解析文件后的下一步是什么吗？谢谢

编辑：这就是我所做的

```
import javafx.application.Application;  
import javafx.scene.SceneBuilder;  
import javafx.scene.control.TableColumn;  
import javafx.scene.control.TableView;  
import javafx.stage.Stage;  
import org.javafxdata.datasources.reader.FileSource;  
import org.javafxdata.datasources.provider.CSVDataSource; 

public class CSVTableSample extends Application {  
  @SuppressWarnings("unchecked")  
  @Override  
  public void start(Stage stage) throws Exception {  
       stage.setTitle("Test App");  
       // Just loading the file...  
       FileSource fs = new FileSource("test.csv");  
       // Now creating my datasource 
       CSVDataSource dataSource = new CSVDataSource(  
                 fs, "order-id", "order-item-id");  
       @SuppressWarnings("rawtypes")  
       TableView table1 = new TableView();  
       TableColumn<?, ?> orderCol = dataSource.getNamedColumn("order-id");  
       TableColumn<?, ?> itemCol = dataSource.getNamedColumn("order-item-id");    
       table1.getColumns().addAll(orderCol, itemCol);  
       table1.setItems(dataSource);  
       stage.setScene(SceneBuilder.create().root(table1).build());  
       stage.show();  
  }  
  public static void main(String[] args) {  
       Application.launch(args);  
  }  
} 
```

eclipse 说 for table1.setItems(dataSource);

TableView 类型中的方法 setItems(ObservableList) 不适用于参数（CSVDataSource）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T23:53:22.703

这里有一个用于制表符分隔文件的[示例解决方案。](https://forums.oracle.com/forums/thread.jspa?messageID=10729570)一个 csv 文件可以类似地处理。

该示例通过声明 的类型来工作，`TableView`使得`TableView<ObservableList<StringProperty>>`中的每一行`TableView`都是`ObservableList`字符串属性，其中每个属性表示 csv 文件中的一个字段。的列表是此类列表的列表 `TableView`。s 为每一列设置从支持该单元格的行中提取该列的正确单元格值。`items``cellValueFactory``ObservableList<StringProperty>`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T21:57:38.113

> TableView 类型中的方法 setItems(ObservableList) 不适用于参数（CSVDataSource）

改变你的线路

```
table1.setItems(dataSource); 
```

到

```
table1.setItems(dataSource.getData()); 
```

使用 DataFX 的示例代码：

```
DataSourceReader dsr1 = new FileSource("your csv file path");
String[] columnsArray // create array of column names you want to display 
CSVDataSource ds1 = new CSVDataSource(dsr1,columnsArray);
TableView tableView = new TableView();
tableView.setItems(ds1.getData());
tableView.getColumns().addAll(ds1.getColumns()); 
```

如果你想用标准的 javafx 方式来做：[看这里](https://stackoverflow.com/questions/13332212/javafx-tableview-dynamic-column-and-data-values/13335161#13335161)

# java - 通过json使用java（eclipse）从MySQL-DB中检索字符串

> ID：13800847
> 
> 赞同：1
> 
> 时间：2012-12-10T12:20:09.597
> 
> 标签：java, android, eclipse, json

我正在尝试为 Android （在 Eclipse 中）编写登录系统，并且必须从外部 MySQL-DB 获取数据。

来源我拿了它的代码：[连接到 MySQL 数据库](http://www.helloandroid.com/tutorials/connecting-mysql-database)

我试图从中获取数据的网站在[这里](http://winklermarkus.at/appconnection.php)。（我知道有一些安全问题，blabla，这不是我现在的问题^^）

我遇到的问题是，当我尝试运行应用程序时，出现“未找到密码”错误。此错误在此代码中捕获：

```
ArrayList<String> passwort = new ArrayList<String>();
ArrayList<String> benutzer = new ArrayList<String>();
try{
  jArray = new JSONArray(result);
  JSONObject json_data=null;
  for(int i=0;i<jArray.length();i++){
         json_data = jArray.getJSONObject(i);
         passwort.add(json_data.getString("pw"));
         benutzer.add(json_data.getString("benutzer"));

     }
  Intent intent = new Intent(this, MainActivity.class);
  intent.putExtra("arrayBenutzerExtra", benutzer);
  intent.putExtra("arrayPasswortExtra", passwort);
  startActivity(intent);

    }
    catch(JSONException e1){
      Toast.makeText(getBaseContext(), "No Password found" ,Toast.LENGTH_LONG).show();
    } catch (ParseException e1) {
        e1.printStackTrace();
} 
```

另外，这是我与网站连接的代码，但这似乎不是问题，尽管我没有收到有关此的错误消息！

```
try{
 HttpClient httpclient = new DefaultHttpClient();
 HttpPost httppost = new HttpPost("http://winklermarkus.at/appconnection.php");
 httppost.setEntity(new UrlEncodedFormEntity(nameValuePairs));
 HttpResponse response = httpclient.execute(httppost);
 HttpEntity entity = response.getEntity();
 is = entity.getContent();
   }catch(Exception e){
     Log.e("log_tag", "Error in http connection"+e.toString());
   } 
```

.php 文件的代码在这里：

```
$sql_pw = "SELECT ". "Passwort ". "FROM ". "benutzerdaten ";
    $result_pw = mysql_query ($sql_pw); 
    $data_pw = mysql_fetch_array ($result_pw);
    $pw = $data_pw["Passwort"];

    $sql_benutzer = "SELECT ". "Email ". "FROM ". "benutzerdaten ";
    $result_benutzer = mysql_query ($sql_benutzer); 
    $data_benutzer = mysql_fetch_array ($result_benutzer);
    $benutzer = $data_benutzer["Email"];

print(json_encode($pw));
print(json_encode($benutzer));

mysql_close();
?> 
```

as Perception mentioned, I don't get valid JSON output, could this possibly be in relation with me, trying to transmit 2 strings at once?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T14:59:27.150

Your PHP code is not doing what you think it's doing. I cannot recommend a fix to it as you've created a ***significant*** security hole.

As an alternative strategy, instead of sending all the passwords and all the emails to the client (in an unassociated fashion no less), send the clients hashed password and email to the service (over SSL). Then on the service side query if you have the combination of email/pass in the database. If you do return login success, otherwise return login failed.

# iphone - 在不使用 Segue 的情况下将数据从一个视图控制器传递到另一个视图控制器

> ID：13800849
> 
> 赞同：1
> 
> 时间：2012-12-10T12:20:20.697
> 
> 标签：iphone, objective-c, ios, cocoa, tableview

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T14:51:26.737

您可以通过两种方式呈现新屏幕。

1）使用界面生成器，在这里您使用 segue 将某些内容传递到新屏幕上。

2）手动实例化它，实例化后你可以直接展示它。

考虑到您不想使用方法一，您可以像这样使用方法二：

```
ScreenBClass *screenB = [self.storyboard instantiateViewControllerWithIdentifier:@"screenB"];

screenB.objectPointerInOtherClass = self.objectIWantToPass;

[self screenB animated:YES]; 
```

# c++ - 另一个模板循环依赖问题

> ID：13800850
> 
> 赞同：0
> 
> 时间：2012-12-10T12:20:22.230
> 
> 标签：c++, templates, metaprogramming, circular-dependency

我正在尝试创建一个基于通用图形结构的面向对象模板，但是在我的设计中我遇到了一个可能的循环依赖，我不确定如何避免。

我将我的顶点和边类定义如下：

```
template <class label_type, class edge_type>
class basic_vertex { .. }

template <class vertex_type, class weight_type = std::int32_t>
class basic_edge { .. } 
```

在顶点类中，我通过将指向它们的指针存储在 std::list 中来跟踪连接到节点的内边和外边。

在边缘对象中，我保留 2 个引用来表示源顶点和目标顶点。

如果我要填写顶点模板参数，我需要知道边的类型。为了知道边的类型，我需要知道顶点的类型。

知道如何解决这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T12:22:29.000

您可以在使用它之前预先宣布一个类来解决循环依赖，如下所示：

```
class basic_vertex; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T21:10:40.693

不管它的模板与否，它与类的循环依赖相同的问题。您的一个类必须能够仅使用指向另一个类的指针/引用。前向声明类 Edge；在 basic_vertex 中使用 Edge* 在 Edge 中使用 basic_vertex

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-12-28T20:47:19.497

有一种解决方案可以解决类模板之间的相互依赖关系。但在考虑之前，我通常会问自己：“我不应该解耦吗？” 事实上，这可能是一个糟糕的设计。但有时，它是模型的一部分。你的情况，图表，就是一个例子。

该解决方案基于概念级别的解耦，并引入一个中间模板类型，该类型将嵌入并了解两种类型（顶点和边）a 并打破循环。

```
template <typename T_graph, typename T_label>
struct vertex_tmpl {
    typedef typename T_graph::edge_t edge_t;
    edge_t* edge;
    // .... maybe some more edges ....
};

template <typename T_graph, typename T_weight>
struct edge_tmpl {
    typedef typename T_graph::vertex_t vertex_t;
    vertex_t* vertex;
};

template < template <typename, typename> class T_vertex,
           template <typename, typename> class T_edge,
           typename T_weight = int,
           typename T_label = int >
struct graph_tmpl {
    typedef graph_tmpl< T_vertex, T_edge> self_t;
    typedef T_vertex<self_t, T_label> vertex_t;
    typedef T_edge<self_t, T_weight> edge_t;
};

int main() {
    typedef graph_tmpl< vertex_tmpl, edge_tmpl> graph_t;
    typedef typename graph_t::edge_t basic_edge;
    typedef typename graph_t::vertex_t basic_vertex;

    basic_edge edge;
    basic_vertex vertex;
    vertex.edge = &edge;
    edge.vertex = &vertex;
} 
```

[http://ideone.com/FrBqcb](http://ideone.com/FrBqcb)

您将在[那些关于高级 C++ 技术的非常好的讲义](http://www.mpi-inf.mpg.de/~kettner/courses/lib_design_03/notes/advanced.html#CyclicTemplates)中找到对解决方案的广泛解释。

# google-app-engine - Memcached：缓存对象总是好的？（GAE 客观化）

> ID：13800852
> 
> 赞同：2
> 
> 时间：2012-12-10T12:20:26.087
> 
> 标签：google-app-engine, caching, memcached, objectify

**上下文：**使用 Memcached。（使用 Google App Engine 和 Objectify，但这无关紧要）

我将创建一个简单的示例，一个包含两个实体 Player 和 Game 的游戏。用户通常可以查询单个请求打开的游戏甚至是玩家资料。可能有开放的 100 场比赛或 3000000 场比赛。

**(1)**对所有实体使用缓存是个好主意吗？如果我有未使用的 RAM，为什么不将其用于游戏或播放器？这有不好的情况吗？（除了几乎没有时间缓存访问数据）

**（2）**另外一个问题是，在加载对象的时候，是不是应该分区优化存储的对象呢？并缓存？例如：

```
player {
  email
  pass

  punctuation          // This data will change quite frequently
  numGamesClosed       // This data will change quite frequently
} 
```

可能更好：

```
 @Entity     //DataStore entity
 player {
    email
    pass
 }

 @Cache     //The entity will be cached into Memchached
 @Entity    //DataStore entity
 DatosJugador
 {
    @Parent Key <Player> owner;
    punctuation
    numGamesClosed      
 } 
```

非常感谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-10T12:25:55.797

memcache 使用的“ram”不是来自您的应用程序，而是来自共享的 GAE 通用的 memcached 内存池。您的应用程序的所有实例“看到”相同的内存缓存。

您放入内存缓存的内容**不计入**您的应用程序内存使用量。

然而，memcache 的内容可以随时被驱逐，恕不另行通知。所以真的没有理由（除了你可以放入memcache的对象大小的上限）不缓存所有内容，只要你可以回退到数据存储区，如果它在你请求的时候不在缓存中.

# java - VPN 处于活动状态时无法接收 UDP 多播

> ID：13800856
> 
> 赞同：1
> 
> 时间：2012-12-10T12:20:38.000
> 
> 标签：java, udp, netty, vpn

我正在使用 ConnectionlessBootstrap 为本地网络中的多播创建 UDP 套接字。只要我的 VPN 不活动，通道就会接收多播数据包。一旦 VPN 被激活，通道将不再接收多播数据包。在我关闭 VPN 连接后，通道再次开始接收数据包（无需重新启动）。
我创建通道如下：

```
DatagramChannel channel;
channel = (DatagramChannel) bootstrap.bind( new InetSocketAddress( localPort ) );
channel.joinGroup( multicastAddress.getAddress() ); 
```

我认为可能是 netty 不小心选择了错误的网络接口，所以我在引导选项中手动配置了它。

```
NetworkInterface multicastInterface = ...
bootstrap.setOption( "networkInterface", multicastInterface ); 
```

不幸的是，这并不能解决问题。
我用wireshark检查了当VPN处于活动状态时是否在本地接口上实际接收到数据包 - 数据包仍然被接收但没有到达通道。

*即使在 VPN 连接处于活动状态时，有人知道我如何接收多播数据包吗？*

# c++ - std::vector::push_back 一个不可复制的对象给出编译器错误

> ID：13800858
> 
> 赞同：10
> 
> 时间：2012-12-10T12:20:56.753
> 
> 标签：c++, c++11, g++

尝试使用不可复制（私有复制构造函数）但可移动的对象时，出现编译错误`g++ (GCC) 4.7.2`但未出现编译错误。对我来说，我的示例看起来与 SO 和其他地方的许多其他示例相同。错误消息使它看起来像结构不是“直接可构造”的问题 - 我不知道这意味着什么，所以我不确定为什么一个对象需要“直接构造”才能被推回。`MSVC-2012``std::vector::push_back`

```
#include <vector>
#include <memory>

struct MyStruct
{

    MyStruct(std::unique_ptr<int> p);
    MyStruct(MyStruct&& other);
    MyStruct&  operator=(MyStruct&& other);

    std::unique_ptr<int> mP;

private:
            // Non-copyable
    MyStruct(const MyStruct&);
    MyStruct& operator=(const MyStruct& other);
};

int main()
{

    MyStruct s(std::unique_ptr<int>(new int(5)));
    std::vector<MyStruct> v;

    auto other = std::move(s);       // Test it is moveable
    v.push_back(std::move(other));   // Fails to compile

    return 0;
} 
```

给出错误

```
/usr/lib/gcc/x86_64-redhat-linux/4.7.2/../../../../include/c++/4.7.2/type_traits: In instantiation of ‘struct std::__is_direct_constructible_impl<MyStruct, const MyStruct&>’:
... snip ...
/usr/lib/gcc/x86_64-redhat-linux/4.7.2/../../../../include/c++/4.7.2/bits/stl_vector.h:900:9:   required from ‘void std::vector<_Tp, _Alloc>::push_back(std::vector<_Tp, _Alloc>::value_type&&) [with _Tp = MyStruct; _Alloc = std::allocator<MyStruct>; std::vector<_Tp, _Alloc>::value_type = MyStruct]’
main.cpp:27:33:   required from here
main.cpp:16:5: error: ‘MyStruct::MyStruct(const MyStruct&)’ is private 
```

**各种答案的简单解决方法：**

*   使用`MyStruct(const MyStruct&) = delete;`而不是`private ctor`破解
*   继承`boost::noncopyable`（或另一个具有私有 ctor 的类）

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-12-10T22:50:30.803

失败是由于 G++ 4.7 的限制，它没有实现[DR 1170](http://www.open-std.org/jtc1/sc22/wg21/docs/cwg_defects.html#1170)，在 C++11 标准化过程中很晚才更改，说访问检查应该作为模板参数推导的一部分进行。

根本原因是`vector`如果移动操作保证不会抛出（即声明为`noexcept`or `throw()`），libstdc++ 将移动元素，否则如果类型是可复制的，则元素将被复制，否则如果类型不可复制但确实有可能-抛出 move 操作然后它将被移动（如果抛出异常，则结果~~未定义~~未指定。）这是通过检查`is_nothrow_move_constructible`和`is_copy_constructible`类型特征来实现的。在您的情况下，该类型不是 nothrow move 可构造的，因此`is_copy_constructible`会检查该特征。您的类型有一个复制构造函数，但它不可访问，因此该`is_copy_constructible`特征会在 G++ 4.7 中产生编译器错误，因为在模板参数推导期间未进行访问检查。

如果您创建移动构造函数和移动赋值运算符`noexcept`，则类型将被移动并且不需要可复制，因此`is_copy_constructible`不使用失败的特征，并且代码编译正常。

或者，（也如评论中所述）如果您删除了复制构造函数，那么`is_copy_constructible`特征会得到正确的结果。

另一种选择是使用`boost::noncopyable`隐式删除复制构造函数的方法，以便`is_copy_constructible`特征正常工作（并且也适用于不正确支持删除函数的旧编译器，如 MSVC）。我不知道您所说的无法找到错误是什么意思，MSVC 是否没有向您显示编译器错误的完整上下文？

> 结论：在适当的地方使用 unique_ptr 但不要使类显式可移动

我不同意这个结论，太极端了。相反，尽可能让你的类不能移动。此外，如果可能，使用已删除的函数来使类型不可复制，而不是私有+未实现的函数，可能使用宏来移植到旧编译器，例如

```
#if __cplusplus >= 201103L
#define NONCOPYABLE(TYPE) \
  TYPE(const TYPE&) = delete; TYPE& operator=(const TYPE&) = delete
#else
// must be used in private access region
#define NONCOPYABLE(TYPE) \
  TYPE(const TYPE&); TYPE& operator=(const TYPE&)
#endif

struct MyStruct
{
...
private:
    NONCOPYABLE(MyStruct);
}; 
```

# macos - 什么决定了 NSTask 默认路径 - 为什么它与终端不同

> ID：13800859
> 
> 赞同：0
> 
> 时间：2012-12-10T12:21:01.007
> 
> 标签：macos, cocoa

我试图从 Cocoa 程序启动的 NSTask /bin/sh 执行命令行工具（BBEdit 的“bbdiff”）。

这失败了，即使我可以从终端成功启动。

我追查了原因；`bbdiff`在`/usr/local/bin`.

终端中使用的 PATH 是

```
/usr/bin:/bin:/usr/sbin:/sbin:/usr/local/bin 
```

但是 NSTask 启动的 bash shell 中使用的 PATH 只是

```
/usr/bin:/bin:/usr/sbin:/sbin 
```

为什么有区别？我以为`/usr/bin:/bin:/usr/sbin:/sbin:/usr/local/bin`是 UNIX 使用的正常路径

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T18:02:11.563

正如 NSTask 文档所说（强调）：

> 任务在由几个项目的当前值定义的环境中运行：当前目录、标准输入、标准输出、标准错误和任何**环境变量**的值。默认情况下，NSTask 对象从启动它的进程继承其环境。

因此，您的 NSTask 获取用于启动 Cocoa 应用程序的 PATH。

# iphone - 动态 UITextView 作为 IOS 原生短信应用？

> ID：13800860
> 
> 赞同：1
> 
> 时间：2012-12-10T12:21:03.700
> 
> 标签：iphone, ios, uiview, uiviewcontroller, uitextview

我现在正在尝试开发一种聊天功能，例如 iPhone SMS-app 中的原生聊天功能。我已遵循本指南：[https](https://github.com/HansPinckaers/GrowingTextView) ://github.com/HansPinckaers/GrowingTextView如何创建一个根据其中文本数量缩放高度的 TextView。

当然，我想将它与我现有的内置故事板（它是一个 tableView）的 UIViewController 集成，而不是像本教程中那样通过代码自定义一个新的：[https ://github.com/HansPinckaers/GrowingTextView/blob/master/示例/类/GrowingTextViewExampleViewController.m](https://github.com/HansPinckaers/GrowingTextView/blob/master/example/Classes/GrowingTextViewExampleViewController.m)

```
- (void)loadView {
self.view = [[UIView alloc] initWithFrame:[[UIScreen mainScreen] applicationFrame]];
self.view.backgroundColor = [UIColor colorWithRed:219.0f/255.0f green:226.0f/255.0f blue:237.0f/255.0f alpha:1];
.......................................... etc

[self.view addSubview:containerView];
...........................................etc
} 
```

现在，如果我想将上面的 self.view = [[UIView alloc] 代码替换为故事板中的 self.view = my viewController 我应该输入什么？我试图删除代码：

```
//self.view = [[UIView alloc] initWithFrame:[[UIScreen mainScreen] applicationFrame]]; 
```

但是我在尝试添加子视图代码时遇到错误的访问错误 [self.view addSubview:containerView]; 到情节提要中的 UIViewController，因为 self.view 如果未设置为其他内容，则应参考情节提要？当它设置为自定义的 UIView 代码时，它可以工作：

```
self.view = [[UIView alloc] initWithFrame:[[UIScreen mainScreen] applicationFrame]];
self.view.backgroundColor = [UIColor colorWithRed:219.0f/255.0f green:226.0f/255.0f blue:237.0f/255.0f alpha:1]; 
```

所以...总结一下，如何将 subView (containerView) 添加到我现有的 StoryBoard UIViewController 中？这也是我的错误访问错误的图片：[http ://tinypic.com/view.php?pic=21acqvb&s=6](http://tinypic.com/view.php?pic=21acqvb&s=6)

# c# - 在 C# 中烘焙可选参数和 WebService 调用？

> ID：13800861
> 
> 赞同：-1
> 
> 时间：2012-12-10T12:21:04.260
> 
> 标签：c#, .net, web-services, optional-parameters

AFAIK：

> 将可选参数添加到从另一个程序集调用的公共方法需要重新编译两个程序集——就好像该参数是必需的一样。

在这种情况下，我想知道 WebService 。

我呢 - 使用`added optional param webservice method`?

例如 ：

假设谷歌的网络服务方法是：

```
void DoWork(int a , int b) 
```

它被改为

```
void DoWork(int a , int b  , isDefault=false) 
```

*   作为消费者，我必须重新创建代理文件吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-10T12:37:15.690

我的理解是可选参数是语法糖。

您仍然会得到一个将所有参数都作为强制参数的重载，但是当编译器遇到没有指定可选参数的方法调用时，编译器会自动将可选参数的默认值插入到 IL 中的调用站点中。

这如何影响 Web 服务取决于可选参数如何通过代理传播。

如果它是对 WSDL 的非破坏性更改，那么我的猜测是它不会产生影响，您不需要重新生成代理，并且现有代理生成的请求仍然有效WSDL 契约的观点。

但是，如果它是对 WSDL 的重大更改，那么您显然需要重新生成代理，并且任何调用站点到代理方法都需要重新编译。

# ios - 清除 UIViewController

> ID：13800865
> 
> 赞同：0
> 
> 时间：2012-12-10T12:21:57.410
> 
> 标签：ios, memory, uiviewcontroller, didreceivememorywarning, purge

我目前有一堆 UIViewController，每个都是在前一个之上呈现的模态 ViewController。我的问题是我不需要一堆 UIViewControllers，我只需要最后一个。所以当一个新的 UIViewControllersis 出现时，它的父级应该被清除，从内存中完全删除。我的应用程序再也不需要那些视图控制器了。

我读过这个：http: [//developer.apple.com/library/ios/#featuredarticles/ViewControllerPGforiPhoneOS/ViewLoadingandUnloading/ViewLoadingandUnloading.html](http://developer.apple.com/library/ios/#featuredarticles/ViewControllerPGforiPhoneOS/ViewLoadingandUnloading/ViewLoadingandUnloading.html)

但是这种模式只在应用程序收到内存警告时才关心内存释放。并且不会清除视图控制器，只会清除它们的内容。我想以更手动的方式来做......这可能吗，或者这不是iOS中的常见做法，我应该只依赖内存警告消息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T12:45:23.757

最简单的方法是首先避免创建堆栈。与其在现有的模态控制器上显示新的模态控制器，不如让您的根控制器首先关闭现有的模态控制器并呈现每个新的模态控制器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T14:33:55.327

我可能已经找到了一个不错的解决方案。应该使用 UINavigationController，并手动管理其 viewContollers 属性（即 UIViewController 的堆栈）。在加载新的 UIViewController 之后（或之前），您可以从堆栈中删除旧的 UIViewController，从而将其从内存中清除。

这篇文章有帮助： [如何从 UINavigationController 弹出视图并在一次操作中将其替换为另一个视图？](https://stackoverflow.com/questions/410471/how-can-i-pop-a-view-from-a-uinavigationcontroller-and-replace-it-with-another-i)

这样你就可以创建一个程序流，只有当 UIViewController 一次在内存中时，当你需要一个新的 UIViewController 时替换它们。

# ruby - Databasedotcom 在 Ruby 中实现自定义对象

> ID：13800867
> 
> 赞同：0
> 
> 时间：2012-12-10T12:22:02.993
> 
> 标签：ruby, databasedotcom-gem

我想将 SOQL 查询的结果作为 JSON 返回，但数据似乎是作为字符串返回的。

```
client = SFDC_Adapter.login
data = client.query("SELECT  MarkupAmount__c, 
                        MarkupPercent__c,
                        Product_Type_Id__c,
                        Product_Type__c 
                        FROM Product_Type__c 
                        WHERE Product_Type_Id__c = #{product_type_id}")
p data

=> [#&lt;Product_Type__c:0x00000001c356f8 @Id=nil, @OwnerId=nil, @IsDeleted=nil, @Name=nil, @CreatedDate=nil, @CreatedById=nil, @LastModifiedDate=nil, @LastModifiedById=nil, @SystemModstamp=nil, @MarkupPercent__c=5.0, @Subscription__c=nil, @Product_Type__c="Research Trip", @MarkupAmount__c=nil, @Product_Type_Id__c=36.0&gt;]

    puts data
=> #&lt;Product_Type__c:0x00000001c356f8&gt;

    puts data.to_json
=> ["#&lt;Product_Type__c:0x00000001c356f8&gt;"] 
```

如何将这些结果具体化为 JSON 对象以在 Restful 服务中使用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T15:31:45.953

我不知道那个宝石，但是从查看您的输出并查看您的结果来看，您似乎得到了一个`Product_Type`对象。

当您使用`p`or`puts`时，`inspect`正在使用，通过在其上使用 HTML 编码，将实例转换为网页中可查看的内容。这就是您在输出中看到`&lt;`和的原因。`&gt;`

相反，您需要访问对象中的值。根据[文档](https://github.com/heroku/databasedotcom)，您可以使用标准 getter 或使用`hash[key]`表单来执行此操作：

```
联系人 = Contact.find("contact_id") #=> #
contact = Contact.find_by_Name("John Smith") #=> 动态查找器！
contacts = Contact.all #=> 一个 Databasedotcom::Contact 实例的集合
contacts = Contact.find_all_by_Company("IBM") #=> 一个 Databasedotcom::Collection of matching Contacts
contact.Name #=> 联系人的姓名属性
联系人[“姓名”] #=> 相同的东西
contact.Name = "new name" #=> 更改联系人的 Name 属性，在内存中
联系人[“名称”] =“新名称”#=>相同的东西
contact.save #=> 将更改保存到数据库
contact.update_attributes "名称" => "新名称",
  "Phone" => "4156543210" #=> 一次更改多个属性并保存
contact.delete #=> 从数据库中删除联系人

```

尝试`data['Product_Type_Id']`，你应该得到`36.0`. 做同样事情的另一种方法是`data.Product_Type_Id`.

一旦确定了访问器，就可以使用简单的散列或散列数组生成 JSON。这将生成一个哈希：

```
require 'json'

hash = {
    'Id'               => data.Id,
    'OwnerId'          => data.OwnerId,
    'IsDeleted'        => data.IsDeleted,
    'Name'             => data.Name,
    'CreatedDate'      => data.CreatedDate,
    'CreatedById'      => data.CreatedById,
    'LastModifiedDate' => data.LastModifiedDate,
    'LastModifiedById' => data.LastModifiedById,
    'SystemModstamp'   => data.SystemModstamp,
    'MarkupPercent'    => data.MarkupPercent,
    'Subscription'     => data.Subscription,
    'Product_Type'     => data.Product_Type,
    'MarkupAmount'     => data.MarkupAmount,
    'Product_Type_Id'  => data.Product_Type_Id,
  }

puts hash.to_json 
```

我没有看到一个`to_h`或`to_hash`方法会是一个捷径。

# c - 如何从 c 中的 bind() 获取参数？

> ID：13800870
> 
> 赞同：-2
> 
> 时间：2012-12-10T12:22:07.363
> 
> 标签：c, windows, listener, bind

我正在`C`（在 Windows 32 位上）编写一个监听特定端口的程序。（使用本[指南](http://www.tenouk.com/Winsock/Winsock2example2.html)）

客户端以这种方式连接：“http://127.0.0.1:port/?param1=a¶m2=b...”

我（作为服务器）想要获取他输入的所有参数。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T12:30:51.460

该`bind()`函数不接收参数，或者客户端指定的有关您的通信的任何内容；它只是绑定到端口。`write()`一旦绑定了一个端口并最终建立了一个活动连接，您的应用程序协议（在您的情况下可能是 HTTP）在决定哪些数据（或其他更高级别的功能）到该端口的意义上接管。

考虑到这一点，您的问题实际上与套接字毫无关系。相反，它与了解您正在使用的应用程序协议有关。我建议您使用 Google 如何使用 HTTP 协议，查看可用的无数开源 HTTP 库之一，或者就这一点而言，只需 printf() 您从客户端收到的输入。

# linq - WP7 - 内存和 LINQ 数据库查询

> ID：13800872
> 
> 赞同：1
> 
> 时间：2012-12-10T12:22:17.973
> 
> 标签：linq, windows-phone-7, memory

得到一个更改数据库中布尔值的查询。

```
 private void optFavorit_ManipulationCompleted(object sender, ManipulationCompletedEventArgs e)
    {
        var opt_query = (from q in db.TableBarcode where q.IdBarcode == selectedItem select q).First();
        Database.Barcode currentBarcode = new Database.Barcode();

        if (opt_query.Favorit == true) 
        {
            currentBarcode.Update(selectedItem, false, opt_query.Scanned, opt_query.Titel, opt_query.Inhalt);
            optFavorit.Content = "Fav. adden";
        }
        else if (opt_query.Favorit == false)
        {
            currentBarcode.Update(selectedItem, true, opt_query.Scanned, opt_query.Titel, opt_query.Inhalt);
            optFavorit.Content = "Fav. entf."; 
        }
    } 
```

并且它有效，除了我执行查询的 XAML 页面之外的所有其他页面上都会显示和更新正确的结果。此外，如果我返回执行查询的页面，它将不允许我再次更改该值。

好像是内存有问题。如果我重新启动完整的应用程序，正确的结果也会显示在我执行查询的页面上，但我只能对每个对象执行 1x 次查询，从这里开始我再次陷入循环。

任何想法？帮助将不胜感激。

* * *

编辑：

好吧，即使我不明白有什么大的区别，也找到了解决方案。

```
 private void optFavorit_ManipulationCompleted(object sender, ManipulationCompletedEventArgs e)
    {
        // Komischer weise sind 2 Abfragen nötig! Nicht opt_query.Favorit im if verwenden!
        var opt_query = (from q in db.TableBarcode where q.IdBarcode == selectedItem select q).First();
        var isFavo = (from q in db.TableBarcode where q.IdBarcode == selectedItem select q.Favorit).First();
        Database.Barcode currentBarcode = new Database.Barcode();

        if (isFavo == true) 
        {
            currentBarcode.Update(selectedItem, false, opt_query.Scanned, opt_query.Titel, opt_query.Inhalt);
        }
        else if (isFavo == false)
        {
            currentBarcode.Update(selectedItem, true, opt_query.Scanned, opt_query.Titel, opt_query.Inhalt);
        }
    } 
```

也许有人可以解释我，但至少现在可以了：）

# ios - 如何显示 MPMoviePlayer 的导航栏

> ID：13800876
> 
> 赞同：0
> 
> 时间：2012-12-10T12:22:26.537
> 
> 标签：ios, xcode, navigation, mpmovieplayercontroller

我有一部电影在单击按钮时全屏在 MPMovieplayerViewcontroller 中播放。但 MPMoviePlayerViewController 顶部不显示导航栏。如何在播放电影时使导航栏可见？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T12:28:42.507

`MPMoviePlayerViewcontroller`是一个标准`UIViewController`，所以只需将其呈现为 a 的 rootViewController`UINavigationController`

IE

代替

```
[self presentViewController:myMoviePlayerViewController animated:YES completion:nil]; 
```

做：

```
UINavigationController *movieNavController = [[UINavigationController alloc] initWithRootViewController:myMoviePlayerViewController];
[self presentViewController:movieNavController animated:YES completion:nil]; 
```

# javascript - 使用ajax检查网站的响应时间

> ID：13800882
> 
> 赞同：3
> 
> 时间：2012-12-10T12:22:47.877
> 
> 标签：javascript, ajax, jquery

嗨，我想检查网站的响应时间。这是我的代码，我得到了一些值，但没有显示现实。这些代码有什么问题。它与缓存有关吗？此外，如何显示页面是否不退出或不可用。

```
<script type="text/javascript" src="jquery.min.js"></script> <script type="text/javascript">
 var start = new Date();
 $.ajax ({
 url: 'http://www.example.com',
 complete : function()
 {
  alert(new Date() - start)
 },
        }); 
</script> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-10T12:26:25.847

假设代码与正在检查的代码在同一源上运行，则代码本身很好；除非两端（客户端和服务器）都支持并且正在使用[CORS](http://www.w3.org/TR/access-control/) ，否则您[不能使用 ajax cross-origin](http://en.wikipedia.org/wiki/Same_origin_policy)。

它可能是缓存，是的，您必须参考浏览器工具（任何体面的浏览器在其开发人员工具中都有网络选项卡或类似选项）才能确定。您还可以通过`cache: false`在`ajax`调用中设置来禁用缓存（有关详细信息，请参阅[`ajax`文档](http://api.jquery.com/jQuery.ajax/)），尽管这是一种综合的方法。更好的方法是确保您在此时间使用的任何 URL 都响应缓存标头，告诉浏览器（和代理）不要缓存它。

`error`您可以通过挂钩函数并查看它为您提供的信息来判断页面是否不存在或“不可用”（无论这意味着什么） ：

```
var start = new Date();
$.ajax ({
    url: 'http://www.example.com',
    error : function(jqxhr, status, ex) {
        // Look at status here
    },
    complete : function()
    {
        alert(new Date() - start)
    },
}); 
```

给出的参数`error`也在上面链接的文档中进行了描述。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-10T12:29:12.133

由于相同的原产地政策，您不能这样做。

一个技巧是创建一个图像并测量直到 onerror 事件触发的时间。

```
var start = new Date();

var img = new Image();

img.onerror = function() {
    alert(new Date() - start);
};

img.src = 'http://www.example.com/'; 
```

将随机数附加到 url 以防止缓存。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-10T12:40:27.810

我会使用诸如 Firebug 或 Chrome 开发者工具之类的浏览器扩展来测量 Ajax 响应时间。

# liferay - 在 Liferay 中渲染 Alloy UI 表单时出错

> ID：13800885
> 
> 赞同：0
> 
> 时间：2012-12-10T12:23:07.800
> 
> 标签：liferay, alloy-ui

这是我的 Liferay portlet 中的一个表单。

```
<aui:form method="post" action="<%=loginURL%>">
    <aui:fieldset>      
        <aui:input name="userName" label="Usernam">
            <aui:validator name="required">             
            </aui:validator>
        </aui:input>    
        <aui:input name="password" label="Password" type="password"></aui:input>
        <aui:button type="submit" value="Login"></aui:button>
    </aui:fieldset>
</aui:form> 
```

当我部署 portlet 并转到包含此表单的页面时，我收到此错误：

> aui:validator 标签声明它接受动态属性但不实现所需的接口。

我不明白这个问题。我该如何解决？提前感谢任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T08:19:24.077

> 我不明白这个问题。

这个[答案](https://stackoverflow.com/a/13651436/468763 "form:form 标签声明它接受动态属性但没有实现所需的接口")将帮助您详细了解问题，尽管答案是针对 spring 标记的，但它仍然适用于为 JSP 创建的所有自定义标记。

> 我该如何解决？

您可以通过引用正确的更新 jar ( ) 并在您的自定义 portlet 中`util-taglib.jar`包含正确的 TLD ( `aui.tld`)来修复它。`WEB-INF/tld/`

# c# - 如何防止阴影和促进给定的方法？

> ID：13800887
> 
> 赞同：2
> 
> 时间：2012-12-10T12:23:16.663
> 
> 标签：c#, inheritance, shadowing

在 C++ 中，它是通过“使用”完成的，而在 C# 中呢？

```
public class foo
{
   public void print(string s) {...}
}

public class bar : foo
{
   // shadowing
   public void print(object o) {...}
} 
```

如何提升`foo.print`，所以`foo.print`和`bar.print`编译器的“级别”相同（`bar`当然）？

## 更新 1

最初我添加了一段关于阴影和覆盖之间常见混淆的段落，但后来我删除了它，因为我认为它会冒犯读者。

阴影就像跨越继承树的重载。阴影**不是**压倒一切的。

## 更新 2

`foo.print`解决重载方法时不再考虑后阴影`print`。提升`foo.print`会让它重新进入流程——所以当我调用`bar_object.print("hello")`该方法时，它`foo.print`会被调用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-10T12:36:41.880

在您的具体示例中，`bar.print(object)`确实“阴影”更具体`foo.print(string)`：

```
new bar().print("i am a string"); 
```

这将调用定义在 on 上`bar`的方法，尽管 on 方法`foo`会有一个更好地匹配类型的参数。
这里发生的情况如下：编译器找到一个`bar`具有正确名称（“print”）、正确数量的参数（1）和传入参数可转换为的参数类型（`string`可以转换为`object`）的方法.
因此，编译器没有理由进一步查找继承链。

据我所知，没有类似于 C++ 的`using`.
如果要使用基类上定义的方法，基本上有三种选择：

1.  在调用方：将`bar`实例转换为`foo`：

    ```
    var bar = new bar();
    var foo = (foo)bar;
    foo.print("i am a string"); // Will call foo.print(string) 
    ```

2.  在 calee 方面：内部`bar.print(object)`检查传递参数的类型：

    ```
    public void print(object o)
    {
        var s = o as string;

        if(s != null)
            base.print(s);
        else
        {
            // Other code.
        }
    } 
    ```

3.  这将最接近 C++ `using`：实际上覆盖或隐藏派生类中的原始方法：

    ```
    public class bar : foo
    {
        public new void print(string s)
        {
            base.print(s);
        }

        public void print(object o)
        {
            // some code
        }
    } 
    ```

# c - C: char 逻辑运算符不工作

> ID：13800894
> 
> 赞同：0
> 
> 时间：2012-12-10T12:23:40.343
> 
> 标签：c, io, logical-operators

使用代码

```
 sscanf(argv[1], "%d", &num1);
    sscanf(argv[2], "%c", &op);
    sscanf(argv[3], "%d", &num2);

        if ((op != '-')||(op != '*')||(op != '/')||(op != '+'))
    {
        puts("Error:");
        printf("'%c' is not a valid operator", op);
        return 0;
    } 
```

编译良好。

但是，不适用于任何输入。例如当输入是 4 + 7

控制台打印：

> 错误：
> 
> '+' 不是有效的运算符

编辑：没有这个错误检查代码，程序的其余部分可以正常运行，包括基于 op! 的 switch 语句。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-10T12:25:26.003

有道理，因为你的条件总是正确的。

```
 (op != '-')||(op != '*')||(op != '/')||(op != '+') 
```

甚至

```
 (op != '-')||(op != '*') 
```

将始终评估为`true`.

你基本上是在说“如果`op`不是`-` **或** `op`不是`*`......做任何事情”。

您可能打算`&&`改用。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-10T12:27:42.757

你有一个逻辑问题。您应该使用 AND (&&) 更改 OR (||) 运算符

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-10T12:26:29.143

你要

```
 if ((op != '-')&&(op != '*')&&(op != '/')&&(op != '+')) 
```

# javascript - 获取 webview WinRt 中的导航 url

> ID：13800898
> 
> 赞同：2
> 
> 时间：2012-12-10T12:24:09.603
> 
> 标签：javascript, webview, windows-8, microsoft-metro

我正在注入此 JS 以在运行时获取`navigating url`( )。`destination`我收到 JS 异常。怎么了？

```
 static String NAVIGATING_FUNCTION = "window.onbeforeunload = function(){ window.external.notify(' + location.href + ''); };";
     webView.InvokeScript("eval", new String[] { NAVIGATING_FUNCTION }); 
```

另外请告诉我如何`cancel the navigation`使用这个 JS 返回上一页？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T21:00:07.643

如果我理解正确，由于我还没有使用WebView（还），你想在离开之前报告当前位置然后取消它？

你可以试试这个：

```
window.onbeforeunload = function(){ window.external.notify(location.href); return false; }; 
```

我不知道你为什么在那里引用；`location.href`将在该 Web 视图中，并将作为字符串传递。

另外，请查看[对此线程](http://social.msdn.microsoft.com/Forums/en-US/winappswithnativecode/thread/ac390a6a-d4ad-408c-8b13-93f9694cbabe)的回复。其中一位说：

> 你的问题解决了吗？在 Release Preview 中，您需要添加一些如下所示的代码：

```
 List<Uri> allowedUris = new List<Uri>();
        allowedUris.Add(e.Uri);
        allowedUris.Add(new Uri("http://www.bing.com"));
        Browser.AllowedScriptNotifyUris = allowedUris; 
```

另一件事，这个线程：[我可以获取 Metro WebView 控件的当前 HTML 或 Uri 吗？](https://stackoverflow.com/questions/8597232/can-i-get-the-current-html-or-uri-for-the-metro-webview-control?rq=1)，谈论 LoadCompleted 事件处理程序。

看看是否有帮助。

# android - 如何使用 apk 附加 SD 卡文件

> ID：13800901
> 
> 赞同：0
> 
> 时间：2012-12-10T12:24:33.613
> 
> 标签：android, android-sdcard, apk, android-install-apk

我的项目在 SD 卡中有多个文件。但是当我在手机上安装apk文件时它不起作用。

请告诉我如何用 apk 附加这些文件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T12:26:37.327

您的 sdcard 文件不能成为 APK 文件的一部分，如果您希望这些文件附加到您的 apk，请将它们插入`asset`文件夹或`raw`文件夹中。

编辑：

如果您将文件放在原始目录中，则：

```
com.your.package:raw/yourFile 
```

像这样：

```
int resourceId = context.getResources().getIdentifier("com.your.package:raw/somefile.txt");
File f = new File(context.getResources().openRawResource(resourceId)); 
```

这是有人用`assets`文件夹做的：

带有子文件夹的 Android 资产

```
InputStream is = getAssets().open("subfolder/somefile.txt"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T12:26:23.853

创建一个 sqlite 数据库并存储您要存储在 sdcard 上的任何文件的路径。您也可以根据文件的类型将它们存储在资产文件夹中，但这不是许多人所说的好习惯。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-10T12:27:45.913

您可以将支持文件存储在 Web 服务器上，并让应用程序在首次运行时将文件下载到 sdcard。这也是很多游戏的做法。Google Play 还为应用程序提供免费的文件存储。

这是关于大型 APK 的 Google 博客文章

[http://android-developers.blogspot.fr/2012/03/android-apps-break-50mb-barrier.html](http://android-developers.blogspot.fr/2012/03/android-apps-break-50mb-barrier.html)

# php - Fullcalendar codeigniter 1.7.2

> ID：13800903
> 
> 赞同：0
> 
> 时间：2012-12-10T12:24:43.073
> 
> 标签：php, codeigniter, fullcalendar

我有一个使用 fullcalendar jQuery 的日历事件，我会在 codeigniter 1.7.2 中实现吗

当我实现这样的功能时 fullcalendar `getEvenByCategory`，甚至根本没有出现

这是我的控制器 [kalender.php]

```
function json_kategori($id) {
    header("Content-Type: application/json");
    echo $this->MKalender->jsonEventsByKategori();
}

function kategori($id) {
    $query = $this->db->query("
            SELECT
                COUNT(*) as jml from kalender
            WHERE
                `IDKategori` = '$id'
            ");
    foreach ($query->result() as $row) {
        $row = $row->jml;
    }
    $config['base_url'] = base_url() . 'kalender/kategori/' . $id . '/';
    $config['total_rows'] = $row;
    $config['per_page'] = '4';
    $config['uri_segment'] = 4;
    $config['first_link'] = 'Awal';
    $config['last_link'] = 'Akhir';
    $config['next_link'] = 'Selanjutnya';
    $config['prev_link'] = 'Sebelumnya';
    $this->pagination->initialize($config);
    $data['kalender'] = $this->MKalender->getAllKalenderByKategori($id,
                    $config['per_page'], $this->uri->segment(4));

    $data['kategori'] = $this->MKategoriKalender->getKategori($id);
    $data['title'] = $data['kategori']['kategori'];
    $data['main'] = 'kalender/kalender_kategori';
    $this->load->vars($data);
    $this->load->view('layout/template');
} 
```

这是我的模型 [mkalender.php]

```
function jsonEventsByKategori($catid) {
    $sql = "
        SELECT
                *
        FROM
                kalender
        WHERE
                IDKategori = $catid
        ORDER BY
                TanggalMulai";
    $query = $this->db->query($sql);
    // echo $sql;
    return $query->result_array();
    $jsonevents = array();
    foreach ($query as $entry) {
        $jsonevents[] = array(
            'id' => $entry->IDKalender,
            'start' => $entry->TanggalMulai,
            'end' => $entry->TanggalAkhir,
            'title' => $entry->judul,
            'body' => $entry->konten,
            'multi' => 0,
            'allDay' => false,
            'extension_id' => 2
        );
    }
    return json_encode($jsonevents);
} 
```

在我看来 [kalender/kalender_kategori.php]

```
<script type='text/javascript'>
$(document).ready(function() {
    var date = new Date();
    var d = date.getDate();
    var m = date.getMonth();
    var y = date.getFullYear();
    $('#calendar').fullCalendar({
        firstDay:'1',
        theme:true,
        header: {
            left: 'prev,next today',
            center: 'title',
            right: 'month,agendaWeek,agendaDay'
        },
        editable: true,
        events: '<?= base_url(); ?>kalender/json_kategori'
    });
});</script>

<div id="main"><div id='calendar'></div></div> 
```

所以我的问题是，模型中的应用程序代码如何按类别事件显示日历事件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T13:07:19.620

1）你错过了一个 `jsonEventsByKategori`被调用的参数。

```
function json_kategori($id) {
  header("Content-Type: application/json");
   echo $this->MKalender->jsonEventsByKategori(jsonEventsByKategori); //here
} 
```

2）在您的模型中，由于您已经返回了 result_array .... 该`jsonevents[]`部分将不会被执行...所以您可以在模型中返回 result_array() 并在控制器中执行 foreach 循环...

# javascript - 从另一个输入字段的值更改 Alt 值

> ID：13800911
> 
> 赞同：1
> 
> 时间：2012-12-10T12:25:31.003
> 
> 标签：javascript, html, forms, input

我在一个表单中有两个输入字段，并希望使用 onkeyup 将第一个输入字段的值添加到第二个输入字段的 alt 属性中。

如何使用 Javascript 来完成？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T12:28:15.087

我建议使用 jQuery

```
$('#field1').keyup(function(){
  $('#field2').attr('alt', $(this).val());
}); 
```

应该做你想做的。

# java - 对 Grails 服务使用类型有什么影响？

> ID：13800912
> 
> 赞同：0
> 
> 时间：2012-12-10T12:25:31.460
> 
> 标签：java, grails, groovy

在 groovy 中编程时，我发现自己避免使用 def 关键字，因为我喜欢使用类型的明确性。我想知道使用类型与使用 def 注入服务有什么含义？我想它对模拟注入的可测试性有潜在的影响。还要别的吗？

[我看到文档](http://grails.org/doc/latest/guide/services.html)中提到的两种方法。

人们现在认为最佳实践是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T19:15:42.513

当使用显式类型声明时（对于 2.0 之前的 grails），重新加载注入其他服务的服务曾经存在问题。我在 grails jira 中没有看到任何关于此的最新信息，因此这可能已在更新的版本中得到修复。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T12:51:53.367

`def`是类型名称的替代品。在变量定义中，它用于表示您不关心类型。[用'def'声明变量和用已知类型声明它有什么区别吗？](https://stackoverflow.com/q/8671695/462015)

```
def num = 1
Integer number = 2

assert num.class == Integer
assert number.class == Integer 
```

我更喜欢使用`def`依赖注入，我认为这是 Grails 中最常见的。

# html - 颜色透明在 IE 中不起作用

> ID：13800913
> 
> 赞同：1
> 
> 时间：2012-12-10T12:25:38.060
> 
> 标签：html, css

我可以在 Firefox 和 chrome 中获得此功能。但在下面的代码中，文本显示在 IE 中。该文本不应显示。

```
<a target="_blank" href="#">edit</a> 
<style>
    a {
        background: url("../images/edit1.gif") no-repeat scroll 0 0 transparent;
        color: transparent !important;
      }
</style> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T12:30:52.400

大多数 IE 5-8 不支持透明度属性。但是 IE 9 会支持它。

在搜索我的博客时，我发现了以下方法

```
.transparent {
/* Required for IE 5, 6, 7 */
/* ...or something to trigger hasLayout, like zoom: 1; */
width: 100%; 

/* Theoretically for IE 8 & 9 (more valid) */   
/* ...but not required as filter works too */
/* should come BEFORE filter */
-ms-filter:"progid:DXImageTransform.Microsoft.Alpha(Opacity=50)";

/* This works in IE 8 & 9 too */
/* ... but also 5, 6, 7 */
filter: alpha(opacity=50);

/* Older than Firefox 0.9 */
-moz-opacity:0.5;

/* Safari 1.x (pre WebKit!) */
-khtml-opacity: 0.5;

/* Modern!
/* Firefox 0.9+, Safari 2?, Chrome any?
/* Opera 9+, IE 9+ */
opacity: 0.5;
} 
```

和

```
.transparent {
zoom: 1;
filter: alpha(opacity=50);
opacity: 0.5;
} 
```

我在[博客 1](http://vivekdragon.wordpress.com/)和[博客 2中提到了这一点](http://css-tricks.com/css-transparency-settings-for-all-broswers/)

# list - 在Scala中将元素从一个列表复制到另一个列表

> ID：13800914
> 
> 赞同：4
> 
> 时间：2012-12-10T12:25:42.743
> 
> 标签：list, scala, copy

我想在 Scala 中创建通用（不变）方法，它将元素从源列表复制到目标列表。在 Java 中有**java.util.Collections 中的****复制**方法（参见[http://docs.oracle.com/javase/1.4.2/docs/api/java/util/Collections.html#copy%28java.util.List， %20java.util.List%29](http://docs.oracle.com/javase/1.4.2/docs/api/java/util/Collections.html#copy%28java.util.List,%20java.util.List%29) )。我知道 Scala List 是不可变对象，所以我想创建并返回新列表。

 **我编写了以下代码：

```
def copy[T](dest:List[T], src:List[T]):List[T] = {
    if(dest.length<src.length) throw new Exception("IndexOutOfBoundsException")
    else if(src==Nil) dest
    else {
        var ret = dest
        ret = dest.updated(0, src.first)
        var i=1
        val f:(T=>Unit) = a => {
            if(i<src.length) ret=ret.updated(i, src(i))
            i+=1
            ()
        }
        dest.foreach(f)
        ret
    } 
} 
```

但我认为它可以写得更好。你能帮我写出更好的代码吗？提前致谢。

**编辑**：也许我表达不清楚我想做什么。我有两个列表 (scala.collection.immutable.List)，例如**src** (length=x) 和**dest** (length=y>=x)。我想用**src列表中的元素替换****dest**列表的前**x 个**元素。

 ***** * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-10T12:52:13.600

你的意思是`scala.collection.immutable.List`？它是不可变的。无需复制它们。不可变意味着没有什么可以改变它，所以你可以在不同的线程中使用它。

在 Scala 中创建集合的通用方法是 builder。你可以从`CanBuildFrom`对象中得到一个。或者，您可以从`genericBuilder`集合实例的方法中获取它。

```
scala> val list = List(1, 2, 3)
list: List[Int] = List(1, 2, 3)

scala> val b = list.genericBuilder[Int]
b: scala.collection.mutable.Builder[Int,List[Int]] = ListBuffer()

scala> list.foreach{ b += _ }

scala> val result = b.result // this code is useless. `val result = list` is enough
result: List[Int] = List(1, 2, 3) 
```

如果要基于现有集合创建不同类型的新集合，可以使用[`collection.breakOut`](https://stackoverflow.com/a/1716558/406435)如下方法：

```
scala> val list = List('a', 'b', 'c')
list: List[Char] = List(a, b, c)

scala> val result: String = list.map{identity}(collection.breakOut)
result: String = abc 
```

**更新**

```
require(src.length <= dest.length, "IndexOutOfBoundsException")
src ++ dest.drop(src.length) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-10T12:58:28.423

你的想法太程序化了，说你想要什么而不是怎么做......

怎么样：

```
val src = List(1,2,3)
val dest = src map {x => x} 
```

如果你真的想发挥它的作用

```
def copy[T](src: List[T]): List[T] = src map {x => x} 
```

**响应OP的更新：（**其他人也提出了）

```
def copy[T](src: List[T], dest: List[T]): List[T] = src ++ dest.drop(src.length) 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-10T13:01:24.583

如果您想获得更新的列表，您可以在列表中使用地图。Map 通过将函数应用于列表中的每个元素并返回更新的列表来工作。

[http://www.brunton-spall.co.uk/post/2011/12/02/map-map-and-flatmap-in-scala/](http://www.brunton-spall.co.uk/post/2011/12/02/map-map-and-flatmap-in-scala/)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-12-10T12:31:02.163

你可以使用：

```
if(dest.length <= src.length) dest ::: src.drop(dest.length)
else dest.dropRight(dest.length - src.length) //or throw exception... 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-12-10T14:00:03.273

也许你想要类似的东西

```
 def copy[T](dest: Seq[T], src: Seq[T]): Seq[T] = {
   require(dest.length >= src.length)
   src ++ (dest drop src.length)
 } 
```

我推广到`Seq`s，但它`List`当然适用于 s

如果在运行时未完成，该`require`方法将抛出`IllegalArgumentException`

然后您只需`y-x`要将目标列表的最后一个 ( ) 元素附加到源列表（其中 x = src.length；y = dest.length）

您可以通过从 中*删除* `x`元素`dest`并将其余元素*附加*到`src`.

这就是你从 REPL 中得到的

```
scala> val src = List(1, 2, 3, 4)
src: List[Int] = List(1, 2, 3, 4)

scala> val dst = List(10, 20)
dst: List[Int] = List(10, 20)

scala> val dst2 = List(10, 20, 30, 40, 50, 60)
dst2: List[Int] = List(10, 20, 30, 40, 50, 60)

scala> copy(dst, src)
java.lang.IllegalArgumentException: requirement failed
        at scala.Predef$.require(Predef.scala:221)
        at .copy(<console>:8)
        at .<init>(<console>:11)
        at .<clinit>(<console>)
        at .<init>(<console>:7)
        at .<clinit>(<console>)
        <...>

scala> copy(dst2, src)
res1: Seq[Int] = List(1, 2, 3, 4, 50, 60) 
```******

# java - 暂停循环直到按钮动作 - Java

> ID：13800917
> 
> 赞同：-2
> 
> 时间：2012-12-10T12:25:49.640
> 
> 标签：java, loops, button, sleep

我正在制作一个游戏，比如“谁想成为亿万富翁？” 我的困难是，我想暂停一个循环，直到用户按下底部提交答案。如果用户按下“提交”按钮，我的框架必须刷新并且必须进行下一个问题。

我阅读了 Stackoverflow 上的所有帖子（带有答案 thread.sleep()），但我无法在我的游戏中找到好的结果！

此外，我想要一个循环，因为我不知道任何其他方式来刷新我的框架上的问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T12:43:14.233

使用循环是错误的方法，句号。您必须用一个对象替换循环。将循环中使用的所有局部变量更改为对象的实例变量。在每次要“取消暂停循环”时调用的对象上定义一个方法。该方法将执行您当前在单个循环迭代中执行的所有代码。

# c# - 在另一个 Listview 的 EmptyDataTemplate 中显示 Listview

> ID：13800920
> 
> 赞同：1
> 
> 时间：2012-12-10T12:26:20.697
> 
> 标签：c#, asp.net, listview, web-controls

有没有办法将列表视图显示为另一个列表视图的空数据模板。我只是把它放在下面。但它不会显示列表视图或者它是空数据文本。仅显示“空数据优先列表视图”文本

```
<asp:ListView ID="searchResults" runat="server" ItemPlaceholderID="placeholder">
    <EmptyDataTemplate>
        empty data first listview
        <asp:ListView ID="suggestions" runat="server" ItemPlaceholderID="placeholder" DataSource="<%#Model.SearchSuggestions %>">
            <EmptyDataTemplate>
                empty data second listview</EmptyDataTemplate>
            <LayoutTemplate>
                <span class="suggestionList">
                    <asp:PlaceHolder ID="placeholder" runat="server"></asp:PlaceHolder>
                </span>
            </LayoutTemplate>
            <ItemTemplate>
                <%# Container.DataItem %>
            </ItemTemplate>
            <ItemSeparatorTemplate>
                ,</ItemSeparatorTemplate>
        </asp:ListView>
    </EmptyDataTemplate>
    <LayoutTemplate>
       *************
    </LayoutTemplate>
</asp:ListView> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T14:22:12.240

我复制并粘贴了您的代码，并且能够通过在代码隐藏中手动对其进行数据绑定来使其工作。我对您的 aspx 代码所做的唯一修改是删除对模型的引用，以简化我的设置。我在下面包含了我丑陋/过于简单的测试代码。

```
protected void Page_Load(object sender, EventArgs e)
{
    searchResults.DataBind();
    searchResults.Controls[0].DataBind();
} 
```

# objective-c - KVC 用于 NSDictionary 中的条目

> ID：13800923
> 
> 赞同：1
> 
> 时间：2012-12-10T12:26:24.367
> 
> 标签：objective-c, cocoa, cocoa-bindings, key-value-coding

我有一个`NSDictionary`字符串映射到数字，其中包含要在 UI 中编辑的对象的属性，例如

*   `Length`：`1`
*   `Height`：`2`

现在尝试使用键路径中字典中项目的键将 UI 中的文本字段绑定到字典中的条目会失败，因此尝试使用`valueForKey:`like简单地访问字典中的条目

```
NSLog(@"KVC: %@", [self valueForKey:@"keysAndValues"]); 
```

**--> OK** , Dump 显示`Length`存储在字典中。

```
NSLog(@"KVC: %@", [self valueForKey:@"keysAndValues.Length"]); 
```

**[<YourClass 0x114608de0> valueForUndefinedKey:]：
此类对于键 keysAndValues.Length 不符合键值编码。**

关于如何使用非常通用的模型设置 UI 绑定的任何建议，并将其所有内容存储在字典中？我很确定我已经读过带有访问字典中单个条目的路径的 KVC/KVO 确实有效-但再也找不到该主题了。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-10T12:36:25.033

您想使用`valueForKeyPath:`，它采用以句点分隔的键列表。只是使用`valueForKey`不能像代码中那样包含一系列键。

# php - 日期显示不符合条件

> ID：13800930
> 
> 赞同：-2
> 
> 时间：2012-12-10T12:26:41.637
> 
> 标签：php, html, date

我正在创建一个时间表，它会在其中检查上一个日期。

条件是时间表将显示今天和昨天的日期。如果今天是星期一，它应该将昨天的日期显示为星期五，而不是星期日。

但它不起作用。代码是：

```
$dateToday = date('d-M-Y');
$datePrevious = date("d-M-Y", strtotime((date('D') == 'MON' ? "-3 day" : "-1 day"))); 
```

但它不起作用。请帮助我哪里出错了？

它在星期一和星期日放映。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T12:29:54.497

您需要使用`Mon`not`MON`进行比较，`date('D')`因为字符串比较区分大小写并`date('D')`返回第一个字符为大写的小写。

```
$dateToday = date('d-M-Y');
$datePrevious = date("d-M-Y", strtotime((date('D') == 'Mon' ? "-3 day" : "-1 day"))); 
```

或者，您可以使用`date('w') == '1'`.

# html - css3 圆形聊天气泡，带有右“箭头”和边框

> ID：13800934
> 
> 赞同：0
> 
> 时间：2012-12-10T12:26:58.407
> 
> 标签：html, css, chat

我正在努力创建一个带有聊天气泡的聊天窗格。

我的 HTML 结构：

```
<div id="container">
  <div class="bubble"> 
```

看看这里的一个例子：

[小提琴示例在这里](http://jsfiddle.net/qBSnb/)

我的问题是我不知道如何将第二个引号“箭头”向右转。

另外，如何添加边框以便它也可以包含“箭头”？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T12:39:23.627

添加这些

```
 <div class="arrowright"></div>

  .arrowright 
  {
  background: #2C2C2C;
  font-size: 12px;
  position: relative;
  width: 1em;
  height: 1em;
  margin-left: -0.7em;
  }

  .arrowright::before {
  bottom: -0.666em;
  left: 0.8em;
  position: absolute;
  border-left: 1.2em solid #2C2C2C;
  border-top: 1.2em solid rgba(44, 44, 44, 0);
  border-bottom: 1.2em solid rgba(44, 44, 44, 0);
  content: "";
  } 
```

# java - 文件在Java中是否是符号链接

> ID：13800937
> 
> 赞同：1
> 
> 时间：2012-12-10T12:27:11.317
> 
> 标签：java, symlink

> **可能重复：**
> [Java 1.6 - 确定符号链接](https://stackoverflow.com/questions/813710/java-1-6-determine-symbolic-links)

我有 2 个文件：

1.  /usr/local/sam/icc/tmp/indus_history.txt

2.  /osp/psmf/service/indus/tmp/indus_history2.txt

文件 1 的父目录是文件 2 的父目录的符号链接，即：

/usr/local/sam/icc/tmp/ --> /osp/psmf/service/indus/tmp/

此外，“文件 1”是“文件 2”的符号链接，即：

```
indus_history.txt --> /osp/psmf/service/indus/tmp/indus_history2.txt
getAbsoluteFile() on "File 1" returns /usr/local/sam/icc/tmp/indus_history.txt
getCanonicalFile() on "File 1" returns /osp/psmf/service/indus/tmp/indus_history2.txt 
```

这是对的。

但是，如果我删除“文件 1”和“文件 2”之间的符号链接，并在 /usr/local/sam/icc/tmp/ 创建一个物理“文件 1”，那么结果是：

```
getAbsoluteFile() on "File 1" returns /usr/local/sam/icc/tmp/indus_history.txt
getCanonicalFile() on "File 1" returns /osp/psmf/service/indus/tmp/indus_history.txt 
```

这是因为“文件 1”的父目录是符号链接。

那么如何检查“文件1”是物理文件还是其父目录中的符号链接（即/usr/local/sam/icc/tmp/）？

注意：我知道它在 JAVA 1.7 中很简单，但是如何使用早期版本的 JAVA 呢？

# android - 在视图中添加布局时 ProgressDialog 冻结

> ID：13800938
> 
> 赞同：0
> 
> 时间：2012-12-10T12:27:12.380
> 
> 标签：android, android-layout, progressdialog

从 AsyncTask 的 onPost 在布局中添加大视图时，进度对话框冻结。我们必须添加一个动态布局，所以我们从 onPost 调用它，（在从 doInBackground 调用时发生错误，所以我们从 opPost 调用它）但是现在加载该布局时进度对话框冻结。

请帮忙...

我创建了一个单独的类并调用了该类方法

```
protected void onPostExecute(Void unused)
        {

            eLayout=new ExcelLayout(viewScreenActivity);
            eLayout.LinearLayoutXLSView(ROW_HEIGHT, COL_WIDTH, ROW_Title_Width,NUM_COLS, NUM_ROWS, cols, rows, data);

            progressdialog.dismiss();
        } 
```

任务完成后进度对话框冻结并消失。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T12:31:27.710

当在主 UI 线程中发生诸如绘制视图之类的巨大过程时，就会出现此问题。进度对话框是非常轻量级的过程，当其他一些进程优先时，它们就会停在那里而不旋转（简单地说），这使得它看起来像挂起。但实际原因是，还有一些其他进程比显示进度对话框更优先。

在您的情况下，优先考虑的是视图创建。所以你要做的是，在开始绘制布局之前关闭对话框。

但是，如果您正在寻找一种在绘制视图时显示进度对话框的方法，那么根据我迄今为止的经验，恐怕这是不可能的。

**编辑**

很明显，您的主 UI 做了很多工作。你可以试试这个，但我不确定这能工作多远。除了在progressdialog.dismiss() 之后立即调用方法，您还可以使用dismiss 侦听器并从那里调用方法。例如，

```
progressDialog.setOnDismissListener(new OnDismissListener(){

  public void onDismiss(DialogInterface dialog) {

   eLayout=new ExcelLayout(viewScreenActivity);
        eLayout.LinearLayoutXLSView(ROW_HEIGHT, COL_WIDTH, ROW_Title_Width,NUM_COLS, NUM_ROWS, cols, rows, data);
  }}); 
```

所以只有当进度对话框的progressdialog.dismiss(); 时才会调用它。叫做。所以它应该可以工作。

# python - 在 O(logn) 中从 python heapq 中删除

> ID：13800947
> 
> 赞同：6
> 
> 时间：2012-12-10T12:28:01.943
> 
> 标签：python

我有一个像这样的堆（python，heapq 模块）-

```
>>> h = []
>>> heappush(h, (5, 'write code'))
>>> heappush(h, (7, 'release product'))
>>> heappush(h, (1, 'write spec'))
>>> heappush(h, (3, 'create tests')) 
```

如何在 O(logn) 中删除项目值为“创建测试”的元组并保留堆属性？

这就是我能想到的（不是 O(logn)）

```
for i in range(len(h)):
   if h[i][1] == "create tests":
      h[i], h[-1] = h[-1], h[i]
      popped = h.pop()
      heapq.heapify(h)
      break 
```

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-12-10T12:50:57.837

如果您确实需要从其中取出一个项目`heap`但又想保留它，`heap`您可以懒惰地做它并在项目自然出现时丢弃它，而不是在列表中搜索它。

如果您将要删除的项目存储在黑名单`set`中，则每次`heapq.heappop`检查该项目是否在`set`. 如果它存在，`heappop`请再次丢弃它，直到您得到未列入黑名单的内容，或者`heap`为空

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2017-07-14T03:12:26.583

如果多个删除的元素具有相同的值，则黑名单集会出现问题。而是`heap_remove`使用 tombstone-counting-dict 实现：

```
def heap_remove(heap, value):
  tombstones[value] = tombstones.get(value, 0) + 1
  while len(heap) and heap[0] in tombstones and tombstones[heap[0]]:
      heappop(heap) 
```

正如预期的那样，您已经摊销了 O(1) 删除时间，并且`top`只要您不在`popping`其他地方的堆中，您的堆总是准确的。

考虑一下这个数字列表，它们首先被全部推入堆中，然后以相同的顺序“删除”（不弹出）：

> [3、3、2、7、1、4、2]

插入按预期工作：

```
After inserting 3 into heap, top = 3
After inserting 3 into heap, top = 3
After inserting 2 into heap, top = 2
After inserting 7 into heap, top = 2
After inserting 1 into heap, top = 1
After inserting 4 into heap, top = 1
After inserting 2 into heap, top = 1 
```

但是删除是通过增加对象的墓碑来完成的。如果堆的顶部设置了墓碑，则移除该对象并减少墓碑计数器。

```
Called remove( 3 )
  Marking 3 for deletion
Called remove( 3 )
  Marking 3 for deletion
Called remove( 2 )
  Marking 2 for deletion
Called remove( 7 )
  Marking 7 for deletion
Called remove( 1 )
  Marking 1 for deletion
  Deleting top 1
    Updated heap is: [2, 2, 3, 7, 3, 4]
  Deleting top 1
    Updated heap is: [2, 3, 3, 7, 4]
Called remove( 4 )
  Marking 4 for deletion
Called remove( 2 )
  Marking 2 for deletion
  Deleting top 2
    Updated heap is: [3, 3, 4, 7]
  Deleting top 3
    Updated heap is: [3, 7, 4]
  Deleting top 3
    Updated heap is: [4, 7]
  Deleting top 4
    Updated heap is: [7]
  Deleting top 7
    Updated heap is: [] 
```

请注意，当第二个`heap_remove(3)`被称为@GP89 ​​的解决方案时，就像`3`在墓碑集中一样。

[您可以在此处](https://repl.it/J12n/0)探索此示例。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2018-10-09T05:30:37.687

有了以上两个想法，这里有一个完整的演示：我会尽快让它简洁明了。

```
from heapq import heappush, heappop

class Solution:

  def demo():

    deleted = {}
    h = [0]

    heappush(h, 789)
    heappush(h, 101)
    heappush(h, 101)

    self.remove(h, 101, deleted)

    max_val = self.peek(h, deleted)

  def remove(self, h, y, deleted):
    deleted[y] = deleted.get(y, 0) + 1
    while len(h) > 0 and h[0] == y and deleted[y] > 0:
        heappop(h)
        deleted[y] -= 1

  def peek(self, h, deleted):
    while len(h) > 0 and deleted.get(h[0],0) > 0:
        deleted[h[0]] -= 1
        heappop(h)
    return h[0] 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-03-29T09:23:40.353

在这种方法中，我基本上是在跟踪字典中的元素。所以，每当我删除它时，搜索过程就变成了 O(1)。

```
class RemoveHeap:
    def __init__(self):
        self.h = []
        self.track = collections.defaultdict(collections.deque)
        self.counter = itertools.count()

    def insert_item(self, val):
        count = next(self.counter)
        item = [val, count, 'active']
        self.track[val].append(item)
        heapq.heappush(self.h, item)

    def delete_item(self, val):
        if val in self.track:
            items = self.track[val]
            for item in items:
                if item[2] == 'active':
                    item[2] = 'deleted'
                    break

    def pop_item(self):
        while len(self.h) > 0:
            item = heapq.heappop(self.h)
            item_track = self.track[item[0]]
            item_track.popleft()
            if len(item_track) == 0:
                del self.track[item[0]]
            else:
                self.track[item[0]] = item_track
            if item[2] == 'active':
                return item[0]

    def peek_item(self):
        item = self.h[0]
        if item[2] == 'deleted':
            x = self.pop_item()
            self.insert_item(x)
            return x
        return item[0] 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-10T12:42:47.943

恐怕只有 heapq 没有这种方法。由于从堆中搜索元素需要`O(n)`.

但是您可以将它与类似的东西一起使用`dict`，这`O(1)`为搜索条目提供了时间。

**更新：**

> 我尝试使用 dict 进行簿记，但是如何在插入“create test”时获取索引？– Prakhar 3 小时前

一种天真的方法是：

```
# remember to update this hdict when updating the heap.
hdict = { h[i][1]: i for i in range(len(h)) } 
```

然后，您可以通过访问它`hdict`而不是`O(n)`线性搜索来获取给定字符串的索引。

# macos - MACOSX下jenkins用户的密码是多少？

> ID：13800948
> 
> 赞同：11
> 
> 时间：2012-12-10T12:28:03.880
> 
> 标签：macos, jenkins, jenkins-plugins

我正在尝试使用 TestFlight、Jenkings、GitHub、Sonar 为 iOS（iPhone 和 iPad）创建一个 CI……我下载了 macosx jenkings 包/向导。它似乎为我的 Mac 创建了一个用户。它的密码是什么？因为我的钥匙串有问题，我想这是因为我是我自己的用户而不是詹金斯个人资料。亲切的问候，里卡多。

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-12-13T21:42:32.927

我总是`sudo su jenkins -`在命令行上以 Jenkins 用户的身份工作，这也应该在 Mac 上工作。那么你根本不需要密码。

我现在没有 MacBook 来测试这个，但是在我当前的 linux 服务器上，jenkins 用户是使用 shell /bin/false 创建的。我将 /etc/passwd 中的 shell 更改为 /bin/bash，之后我可以以`su`Jenkins 用户身份登录以设置 ssh-keys 等...

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2014-03-23T03:11:23.473

默认情况下，没有为 user 设置密码`jenkins`。您需要通过执行来设置它`sudo passwd jenkins`

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2017-03-23T14:56:22.853

```
cat /Users/[username]/.jenkins/secrets/initialAdminPassword 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-11T00:00:58.023

如果我没记错的话，默认情况下它没有设置（空）。

阅读这篇文章（如何从命令行更改 OS X 中的密码）： http: [//osxdaily.com/2011/09/19/change-password-mac-os-x-10-7-lion-without-knowing-当前密码/](http://osxdaily.com/2011/09/19/change-password-mac-os-x-10-7-lion-without-knowing-current-password/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-02-01T05:30:17.957

您可以在此处找到初始密码 /Users/{username}/.jenkins/secrets/initialAdminPassword

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-10-01T11:36:26.930

在最新版本的 Jenkins 中更改了默认密码位置。

```
sudo cat /Users/Shared/Jenkins/Home/secrets/initialAdminPassword 
```

# ruby-on-rails - 通过 ajax rails 2 向 rails 3 提交表单

> ID：13800949
> 
> 赞同：0
> 
> 时间：2012-12-10T12:28:09.433
> 
> 标签：ruby-on-rails, ruby, ajax, jquery, ruby-on-rails-3.2

我正在将我的 ruby​​ on rails 应用程序从 rails 升级`2.3.14`到 rails `3.2.6`。在我的 ajax 表单提交中，我收到以下错误。

```
WARNING: Can't verify CSRF token authenticity
Completed 500 Internal Server Error in 9ms 
```

有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T12:40:17.307

将此添加到您的表单中：

```
<%= token_tag nil %> 
```

# iphone - 将新值设置为具有先前值的 NSString 变量

> ID：13800953
> 
> 赞同：2
> 
> 时间：2012-12-10T12:28:12.507
> 
> 标签：iphone, objective-c, ios, automatic-ref-counting

我正在使用最新的 SDK 和 XCode 开发一个 iOS 应用程序。

这是一个简单的问题，但我不知道该怎么做，因为我不希望我的代码有任何内存泄漏。

我在我的项目中使用**ARC**，并且我有以下标头声明：

```
@interface UserPreferences : NSObject
{
    NSUserDefaults* prefs;
}

@property (nonatomic, readonly) NSString* appLanguage;

// More code

- (void) setAppLanguage:(NSString *)appLanguage;

// More code
@end 
```

这就是我实施的方式`- (void) setAppLanguage:(NSString *)appLanguage;`。

```
- (void) setAppLanguage:(NSString *)newAppLanguage
{
    [prefs setObject:appLanguage forKey:APP_LANGUAGE_KEY];
    appLanguage = [NSString stringWithString:newAppLanguage];
} 
```

是否`appLanguage = [NSString stringWithString:newAppLanguage];`正确？

我不知道`appLanguage`当我为它设置一个新值时它会有价值。

**我的代码正确吗？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T12:39:18.400

您的代码没有任何泄漏；ARC 会自动为您释放之前的值`appLanguage`。我会写`appLanguage = [newAppLanguage copy]`而不是使用`stringWithString:`，但效果是一样的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T12:49:22.813

除非你省略了一些代码，否则这是行不通的......

您已经为 创建了一个实例变量`NSUserDefaults`，但从未使用值对其进行实例化。当你打电话`[prefs setObject:appLanguage forKey:APP_LANGUAGE_KEY];` `prefs`时`nil.`

在某些时候，在使用之前`prefs`，您需要执行以下操作：`prefs = [NSUserDefaults standardUserDefaults];`

如果您在其他地方实例化了首选项，您仍然会遇到此逻辑的问题。据推测，您正在尝试将 NSUserDefaults 更改为传入的新语言。在这种情况下，该方法应该是：

```
- (void) setAppLanguage:(NSString *)newAppLanguage {
    _appLanguage = newAppLanguage; // implicit synchronize will set the ivar as _appLanguage
    [prefs setObject:newAppLanguage forKey:APP_LANGUAGE_KEY];
    [prefs synchronize];
} 
```

由于`_appLanguage`实例变量`strong`默认设置为，ARC 会自动添加必要的`release`代码`retain`，防止内存泄漏。

此外，如果您尝试创建私有 setter 方法，请`- (void) setAppLanguage:(NSString *)appLanguage;`退出接口。如果您不想创建私有 setter，`readonly`请从属性声明中删除。

# actionscript-3 - Flash CS6 导入声音

> ID：13800954
> 
> 赞同：1
> 
> 时间：2012-12-10T12:28:14.017
> 
> 标签：actionscript-3, flash, flash-cs6

我正在 CS6 中开发一个 Flash 项目，需要将声音导入到我的库中，但我遇到了无穷无尽的问题。我在 Actionscript 3.0 中使用外部文件（例如，我无法执行 URLRequest，因为它无法在外部工作，需要导入） , 这仅在 MP3 文件中的 32 处。我将它转换为 AIFF，没有成功，WAV？没有成功。如果是 MP3，我只会得到“无法导入”如果是 AIFF 或 WAV，我会得到“一个或多个文件未导入，因为读取它们时出现问题”

Adobe 建议您需要 160kbps 以下的文件，都设置为 32kbps 以确保安全。另一个建议是您需要 Quicktime 7.7.1（或更新版本）和 iTunes 10.5.5.3（或更新版本）才能处理 MP3 文件。我有 Quick 7.7.3 和 iTunes 11.0，所以我真的不知道这个问题。

谁能帮忙，这个项目需要尽快完成。

谢谢。约翰。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-12-04T01:48:35.073

可能与比特率有关。

我遇到了一些使用 Audacity 从 wav 转换而来的 mp3 文件的问题。这是一些特定的不起作用的，所以我回到 Audacity 并将产生工作 mp3 的 wav 与不工作的 wav 进行了比较。我注意到工作 wav 的比特率为 44100Hz，非工作 wav 的比特率为 48000Hz。在导出之前将项目速率（左下角）设置为 44100Hz，生成的 mp3 可以毫无问题地导入到 flash 中。

简而言之：

*   48000赫兹=**淘气**
*   44100赫兹=**不错**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-21T05:44:56.373

这篇文章有点老了，但我想在遇到同样的问题后我会发布一个答案。我也在 CS6 中使用 Flash Pro。您要做的是将声音嵌入到您的 FLA 中，这样当您的 SWF 被编译时，声音就会随之而来。哈立德的回答很好，但这个问题需要更多的 TLC。

对我有用的是获得一个编辑声音剪辑的应用程序。我下载了开源“Audacity”。在 Audacity 的左下角，您可以编辑项目速率。将其降至约 1600 或更低。然后保存项目并将声音导出为 mp3。

最后，确保您的声音剪辑与您的 FLA 位于同一文件夹中。导入您的 FLA（现在应该可以使用）并通过右键单击库中的声音，转到属性来导出您的声音以用于操作脚本。将类的名称更改为您想要的任何名称（至少从类名中删除“.mp3”）。

然后使用以下代码（不同于典型的声音 URL 加载器）：

```
//sound is a constructor variable under your document class
public class DocumentClass extends MovieClip 
{
var yourSound:yourSoundClass;
public function DocumentClass()
{
init();
}
function init():void
{
yourSound = new yourSoundClass();
}
} 
```

然后使用 yourSound.play() 播放声音；这种技术会将您的声音嵌入到 SWF 中，因此无论 SWF 走到哪里，它都会去到哪里。我希望能帮助任何遇到这个问题的人。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-10T16:34:15.760

这是一个奇怪的问题，这是一个加载和播放 MP3 声音的简单代码片段，AS3 本身不支持 WAV：

```
//sound object
var sound:Sound = new Sound(new URLRequest("music.mp3"))
var soundChannel:SoundChannel = sound.play(); 
```

希望这有帮助:)

# c# - 如何将此 winforms 应用程序转换为控制台应用程序？

> ID：13800958
> 
> 赞同：-8
> 
> 时间：2012-12-10T12:28:21.353
> 
> 标签：c#

下面的代码在 Windows 窗体应用程序中运行良好，但我需要在控制台中运行它。

```
namespace TelnetApp
{
    public partial class TelnetForm : Form
    {
        public TelnetForm()
        {
            InitializeComponent();
        }

        private Socket clientSocket;

        IPAddress hostAddress;
        public void telnetSocketAsyncEventArgs_Completed(object sender, SocketAsyncEventArgs e)
        {    
            try
            {    
                if (e.SocketError == SocketError.Success)
                {

                    if (e.LastOperation == SocketAsyncOperation.Connect)
                    {    
                        MessageBox.Show("Service Is Running", hostAddress.ToString(),
                            MessageBoxButtons.OK, MessageBoxIcon.Information);    
                    }    
                }    
                else
                {    
                    MessageBox.Show("Service Is not Running", e.SocketError.ToString(),
                       MessageBoxButtons.OK, MessageBoxIcon.Error);

                }    
            }

            catch (SocketException ex)
            {    
                MessageBox.Show(ex.Message, "Service Is not Running",    
                    MessageBoxButtons.OK, MessageBoxIcon.Error);    
            }
        }

        private void TelnetButton_Click(object sender, EventArgs e)
        {
            try
            {
                if (string.IsNullOrEmpty(IPTextBox.Text))
                    return;   
                if (string.IsNullOrEmpty(PortTextBox.Text))    
                    return;
                int port;    
                hostAddress = IPAddress.Parse(IPTextBox.Text);
                int.TryParse(PortTextBox.Text, out port);
                clientSocket = new Socket(AddressFamily.InterNetwork, SocketType.Stream, ProtocolType.Tcp);
                SocketAsyncEventArgs telnetSocketAsyncEventArgs = new SocketAsyncEventArgs();
                telnetSocketAsyncEventArgs.RemoteEndPoint = new IPEndPoint(hostAddress,port);
                telnetSocketAsyncEventArgs.Completed += new
                EventHandler<SocketAsyncEventArgs>(telnetSocketAsyncEventArgs_Completed);
                clientSocket.ConnectAsync(telnetSocketAsyncEventArgs);

            }    
            catch (SocketException ex)
            {    
                MessageBox.Show(ex.Message, "Service Is not Running",    
                    MessageBoxButtons.OK, MessageBoxIcon.Error);

            }    
            finally
            {

            }                   
          }    
       } 
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T12:35:18.000

创建一个新的 Console 应用程序项目，将代码复制到其中并将来自按钮单击事件的代码放入 main 方法中。您可能需要更改其他方法签名以包含`static`.

删除对 的调用`MessageBox`并将其替换为对 的调用`Console.WriteLine`。此外，由于您没有供用户输入数据的文本框，因此您需要解析命令行参数，这很容易，因为它们以`static void Main(string[] args)`.

然后，启动调试器并检查是否有问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T12:40:05.233

只需将代码复制到控制台应用程序中，然后添加对 using 指令的引用`System.Windows.Forms`并添加`using System.Windows.Forms;`到您的 using 指令中即可保留消息框。

如果您不想要消息框，请`Console.WriteLine`改用。

# php - 具有动态值的 Jqgrid 和自定义按钮

> ID：13800960
> 
> 赞同：0
> 
> 时间：2012-12-10T12:28:28.340
> 
> 标签：php, jquery, jqgrid

我有一个小问题，也许你们可以帮助我。我想向网格添加一个按钮，该按钮根据行更改值，即：

```
onSelectRow: function(id)
{
 jQuery('#organismos').jqGrid('navButtonAdd', '#pager1',{caption: "", buttonicon: "ui-icon-image", title: "AO",onClickButton: function() {window.open('Hierarquia/tree_objetivos.php?idorg=' + id, '_blank');
} 
```

问题是它会继续添加按钮。我想要的是让他改变价值，所以每次你选择一行。谷歌搜索并在论坛中寻求帮助，没有人帮助我 jqgrid。有人可以帮助我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T14:38:10.523

我建议只添加一次按钮（在初始化网格之后）并从 jqGrid 选项中获取选定的行 ID：

```
jQuery('#organismos').jqGrid('navButtonAdd', '#pager1', {
    caption: '',
    buttonicon: 'ui-icon-image',
    title: 'AO',
    onClickButton: function() {
        var selectedRowId = jQuery('#organismos').jqGrid('getGridParam', 'selrow');
        if (selectedRowId) {
            window.open('Hierarquia/tree_objetivos.php?idorg=' + encodeURIComponent(selectedRowId), '_blank');
        } else {
            alert('You need to select a row first!');
        }
    }
}); 
```

# rabbitmq - Java 和 .NET 之间的 RabbitMQ RPC

> ID：13800962
> 
> 赞同：1
> 
> 时间：2012-12-10T12:28:34.307
> 
> 标签：rabbitmq

是否可以使用 RabbitMQ .NET 库在 Java（充当客户端）和 .NET 应用程序（服务器/工作者）之间实现 RabbitMQ RPC？

似乎应该是可能的，因为 RabbitMQ 代理处理队列并且在方和 RabbitMQ 代理之间建立了套接字连接。

这样做有什么实际的考虑吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-10T15:24:38.267

简短的回答是肯定的。事实上，我的公司正是出于这个原因使用 RabbitMQ——它提供了一种平台中立（无论如何都尽可能接近）的方式来在不同的应用程序之间进行通信。所以理论上，我可以让 Java 应用程序在 Linux 上运行，而 .NET 应用程序在 Windows 上运行，一切都可以很好地协同工作。

你需要为你的消息提供一个通用的序列化格式；我推荐使用 JSON，因为每种主要的编程语言都有 JSON 库。

如果您对 RabbitMQ .NET 库有任何疑问，请随时发布更多问题 :-)

# perl - 匹配 File2 中 File1 中的一个字符串，并将 File1 中的字符串替换为 File2 中对应的匹配字符串

> ID：13800963
> 
> 赞同：-1
> 
> 时间：2012-12-10T12:28:34.620
> 
> 标签：perl, awk

标题可能令人困惑，这就是我想要做的：

> ```
> File1 
> 12=921:5,895:5,813:5,853:5,978:5,807:5,1200:5,1067:5,827:5
> 
> File2 
> Tom 12 John 921 Mike 813
> 
> Output 
> Tom=John:5,Mike:5 
> ```

file2 具有 file1 中数字的值，我想用字符串值匹配和替换数字。我在 awk 知识有限的情况下尝试了这个，但做不到。

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T13:51:09.530

这是使用`GNU awk`. 像这样运行：

```
awk -f script.awk file1 file2 
```

内容`script.awk`：

```
BEGIN {
    FS="[ =:,]"
}

FNR==NR {
    a[$1]=$0
    next
}

$2 in a {
    split(a[$2],b)
    for (i=3;i<=NF-1;i+=2) {
        for (j=2;j<=length(b)-1;j+=2) {
            if ($(i+1) == b[j]) {
                line = (line ? line "," : "") $i ":" b[j+1]
            }
        }
    }
    print $1 "=" line
    line = ""
} 
```

结果：

```
Tom=John:5,Mike:5 
```

或者，这是单线：

```
awk -F "[ =:,]" 'FNR==NR { a[$1]=$0; next } $2 in a { split(a[$2],b); for (i=3;i<=NF-1;i+=2) for (j=2;j<=length(b)-1;j+=2) if ($(i+1) == b[j]) line = (line ? line "," : "") $i ":" b[j+1]; print $1 "=" line; line = "" }' file1 file2 
```

解释：

> 将 awk 的字段分隔符更改为空格、等号、冒号或逗号。
> 
> 'FNR==NR { ... }' 仅适用于参数列表中的第一个文件。
> 
> 因此，在处理 file1 时，awk 会将列 '1' 添加到数组中，并将整行作为值分配给该数组元素。
> 
> 'next' 将简单地跳过处理脚本的其余部分，并读取下一行输入。
> 
> 当 awk 读完 file1 中的输入后，它会继续读 file2。但是，这也会将“FNR”重置为“1”，因此 awk 将跳过处理 file2 的“FNR==NR”块，因为它不再为真。
> 
> 所以对于file2：如果可以在上面提到的数组中找到列'2'：
> 
> > 将数组元素的值拆分为另一个数组。这实质上拆分了 file1 中的整行。
> > 
> > 现在创建两个循环。
> > 
> > > 第一个将遍历 file2 中的所有名称
> > > 
> > > 第二个将遍历（第二个）数组中的所有值（这实际上是遍历 file1 中的所有字段）。
> > 
> > 现在，当 file2 中的名称后面的值等于 file1 中的键号之一时，创建一个类似于：'name:number_following_key_number_from_file1'的行结构。
> > 
> > 当在循环中找到更多名称和值时，四元构造 '( ... ? ... : ...)' 将这些元素添加到行尾。这就像一个 if 语句；如果已经有一行，则在其末尾添加一个逗号，否则不执行任何操作。
> > 
> > 完成所有循环后，打印出列“1”和行。然后清空行变量，以便它可以再次使用。

HTH。祝你好运。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T12:48:01.137

以下可以作为模板：

```
skrynesaver@busybox ~/ perl -e '$values="12=921:5,895:5,813:5,853:5,978:5,807:5,1200:5,1067:5,827:5";
$data = "Tom 12 John 921 Mike 813";
($line,$values)=split/=/,$values;
@values=split/,/,$values;
$values{$line}="=";
map{$_=~/(\d+)(:\d+)/;$values{$1}="$2";}@values;
if ($data=~/\w+\s$line\s/){
  $data=~s/(\w+)\s(\d+)\s?/$1$values{$2}/g;
}
print "$data\n";
'
Tom=John:5Mike:5
skrynesaver@busybox ~/ 
```

# c - 如何将对话框置于主程序窗口位置的中心？

> ID：13800966
> 
> 赞同：3
> 
> 时间：2012-12-10T12:28:47.700
> 
> 标签：c, winapi, window, win32gui

我有这段代码可以打开一个在 DLL 上定义的 InputBox，该 DLL 获得 HMODULE，我在主程序调用时保存在 hInstance 变量中。如何将其置于主程序窗口的中心？它发生不起作用并在屏幕左上角或程序窗口左上角随机显示对话框。

```
#include <windows.h>
#include "resource.h"

char IB_res[10];
double defaultValue = 0;
BOOL CALLBACK InputBox_WndProc(HWND hwnd, UINT msg, WPARAM wParam, LPARAM lParam)
{
    switch(msg)
    {
    case WM_INITDIALOG:
        if (defaultValue != -1)
            SetDlgItemText(hwnd, IDC_EDIT, (LPCSTR)(my_printf("%f", defaultValue).c_str()));
        else
            SetDlgItemText(hwnd, IDC_EDIT, (LPCSTR)"");
        return TRUE;
    case WM_COMMAND:
        switch(LOWORD(wParam))
        {
        case IDOK:
            if (!GetDlgItemText(hwnd, IDC_EDIT, IB_res, 10))
                *IB_res = 0;
        case IDCANCEL:
            EndDialog(hwnd, wParam);
            break;
        }
        break;
    default:
        return FALSE;
    }
    return TRUE;
}

DWORD processId;
HWND hwndParent;
BOOL CALLBACK enumWindowsProc(HWND hwnd, LPARAM lParam)
{
    DWORD procid;
    GetWindowThreadProcessId(hwnd, &procid);
    if (procid == processId)
        hwndParent = hwnd;
    return TRUE;
}

HINSTANCE hInstance;
const char* InputBox(double def_value)
{
    defaultBetValue = def_value;
    processId = GetCurrentProcessId();
    EnumWindows(enumWindowsProc, 0);
    INT_PTR ret = DialogBox(hInstance, MAKEINTRESOURCE(IDD_IB), hwndParent, InputBox_WndProc);
    DWORD error = GetLastError();
    if (ret != IDOK)
        *IB_res = 0;

    return IB_res;
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2014-09-19T11:09:11.443

从：

[http://msdn.microsoft.com/en-gb/library/windows/desktop/ms644996(v=vs.85).aspx](http://msdn.microsoft.com/en-gb/library/windows/desktop/ms644996(v=vs.85).aspx)

```
case WM_INITDIALOG: 

// Get the owner window and dialog box rectangles. 

if ((hwndOwner = GetParent(hwndDlg)) == NULL) 
{
    hwndOwner = GetDesktopWindow(); 
}

GetWindowRect(hwndOwner, &rcOwner); 
GetWindowRect(hwndDlg, &rcDlg); 
CopyRect(&rc, &rcOwner); 

// Offset the owner and dialog box rectangles so that right and bottom 
// values represent the width and height, and then offset the owner again 
// to discard space taken up by the dialog box. 

OffsetRect(&rcDlg, -rcDlg.left, -rcDlg.top); 
OffsetRect(&rc, -rc.left, -rc.top); 
OffsetRect(&rc, -rcDlg.right, -rcDlg.bottom); 

// The new position is the sum of half the remaining space and the owner's 
// original position. 

SetWindowPos(hwndDlg, 
             HWND_TOP, 
             rcOwner.left + (rc.right / 2), 
             rcOwner.top + (rc.bottom / 2), 
             0, 0,          // Ignores size arguments. 
             SWP_NOSIZE); 

if (GetDlgCtrlID((HWND) wParam) != ID_ITEMNAME) 
{ 
    SetFocus(GetDlgItem(hwndDlg, ID_ITEMNAME)); 
    return FALSE; 
} 
return TRUE; 
```

# css - 为什么 Twitter Bootstrap 在定义 IE 后立即禁用渐变？

> ID：13800968
> 
> 赞同：2
> 
> 时间：2012-12-10T12:28:57.607
> 
> 标签：css, internet-explorer, twitter-bootstrap

Twitter Bootstrap 2.2.0 版指定了以下 CSS 规则`.btn`

```
filter: progid:DXImageTransform.Microsoft.gradient(startColorstr='#ffffffff', endColorstr='#ffe6e6e6', GradientType=0);
filter: progid:DXImageTransform.Microsoft.gradient(enabled=false); 
```

为什么它在应用过滤器后立即禁用过滤器？如果我查看 IE7 和 IE9 中的 Bootstrap 主页，我可以看到按钮上没有渐变。他们为什么要费心定义渐变？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T12:35:01.007

Bootstrap 现在使用[Less](http://lesscss.org/)而不是纯 CSS。我的猜测是他们正在使用 mixin 来生成跨浏览器渐变，因此是第一行。

专有`filter`的不能很好地使用`border-radius`（只有 IE9+ 中支持两者的问题），所以它们禁用了这些浏览器中的过滤器，因此在第二行中覆盖。

# c# - 有没有办法使用滚动条一起滚动 3 个不同的文本框？

> ID：13800973
> 
> 赞同：0
> 
> 时间：2012-12-10T12:29:36.947
> 
> 标签：c#, wpf, textbox, scrollbar

我想滚动 3 个不同的`TextBoxes`.

我在[这里](https://stackoverflow.com/questions/3823188/how-can-i-sync-the-scrolling-of-two-multiline-textboxes)找到了一些方法。但在 VS2012 中我不能使用`Windows.Forms`非常烦人的。我确实尝试添加引用，但我发现没有`Windows.Form`，这是屏幕截图：

![在此处输入图像描述](../Images/5b6d2d8552d9df15a1584a35c0844fc8.png) ![在此处输入图像描述](../Images/ea07b3ab1e9751bb412b263809a3a571.png)

所以我找到了一个使用滚动条的想法，可以吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T12:47:46.067

为了使用`windows.forms`命名空间，您需要将`System.windows.forms`库添加到项目中：右键单击`References`（解决方案资源管理器）-> `Add Reference`-> `.NET`-Tab -> 选择`System.Windows.Forms`并单击确定。

然后，您可以在需要的每个文件中导入 System.Windows.Forms 命名空间。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T12:54:32.073

[http://www.gbogea.com/2009/07/08/how-to-keep-two-scrollviewers-in-sync-in-wpf](http://www.gbogea.com/2009/07/08/how-to-keep-two-scrollviewers-in-sync-in-wpf)

有代码。如果站点出现故障，将在此处复制粘贴作为镜像：

```
<Grid>
    <Grid.ColumnDefinitions>
        <ColumnDefinition Width="1*" />
        <ColumnDefinition Width="1*" />
        <ColumnDefinition Width="1*" />
    </Grid.ColumnDefinitions>
<ScrollViewer Grid.Column="0" Name="scrollViewerLeft" ScrollChanged="scrollViewerLeft_ScrollChanged">
    <ListBox>
        <ListBoxItem>1</ListBoxItem>
        <ListBoxItem>2</ListBoxItem>
        <ListBoxItem>3</ListBoxItem>
        ...
        <ListBoxItem>100</ListBoxItem>
    </ListBox>
</ScrollViewer>
<ScrollViewer Grid.Column="1" Name="scrollViewerMiddle">
    <ListBox>
        <ListBoxItem>1</ListBoxItem>
        <ListBoxItem>2</ListBoxItem>
        <ListBoxItem>3</ListBoxItem>
        ...
        <ListBoxItem>100</ListBoxItem>
    </ListBox>
 </ScrollViewer>
 <ScrollViewer Grid.Column="2" Name="scrollViewerRight">
    <ListBox>
        <ListBoxItem>1</ListBoxItem>
        <ListBoxItem>2</ListBoxItem>
        <ListBoxItem>3</ListBoxItem>
        ...
        <ListBoxItem>100</ListBoxItem>
    </ListBox>
 </ScrollViewer>
</Grid> 
```

以及背后的代码：

```
private void scrollViewerLeft_ScrollChanged(object sender, ScrollChangedEventArgs e)
{
    scrollViewerMiddle.ScrollToVerticalOffset((sender as ScrollViewer).VerticalOffset);
    scrollViewerRight.ScrollToVerticalOffset((sender as ScrollViewer).VerticalOffset);
}
private void scrollViewerMiddle_ScrollChanged(object sender, ScrollChangedEventArgs e)
{
    scrollViewerLeft.ScrollToVerticalOffset((sender as ScrollViewer).VerticalOffset);
    scrollViewerRight.ScrollToVerticalOffset((sender as ScrollViewer).VerticalOffset);
}
private void scrollViewerRight_ScrollChanged(object sender, ScrollChangedEventArgs e)
{
    scrollViewerLeft.ScrollToVerticalOffset((sender as ScrollViewer).VerticalOffset);
    scrollViewerMiddle.ScrollToVerticalOffset((sender as ScrollViewer).VerticalOffset);

} 
```

# mysql - 将 Delta 从一个数据库移动到另一个数据库

> ID：13800975
> 
> 赞同：1
> 
> 时间：2012-12-10T12:29:40.260
> 
> 标签：mysql, sql, database-migration

我在 MySQL 中有两个相同（几乎）的数据库，但在两台不同的服务器上，我需要从数据库 1 导出**Delta**并将其导入数据库 2，架构具有 M:N 关系，那么完成这项繁忙任务的最佳方法是什么. 是否有任何**迁移**工具可以在其上施加某些条件并使其保持数据的完整性？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T13:00:59.933

I don't seen any free tool to sync dbs for your situation. SQLYog can sync db's but with full tables. But You can use SQLYog to created insert.sql files for selected rows and dump them to other db.

1.  run query.
2.  press ctrl + shift + E. wizard comes to save selected data.
3.  select sql option
4.  select only data option
5.  select file to save and click export.
6.  now import the created sql into the target db.

# apache - RewriteCond 被忽略？

> ID：13800976
> 
> 赞同：1
> 
> 时间：2012-12-10T12:29:44.743
> 
> 标签：apache, mod-rewrite

我正在尝试在 Ubuntu 12.04 服务器上使用 mod_rewrite 以使我的 URL 更具可读性，但是我想为图像和 css 文件添加一个例外。

我的输入 URL 采用格式`\controller\action`，然后将其重写为`index.php?controller=controller&action=action`. 我想添加一个例外，以便如果指定了图像或 css 文件，则不会重写 URL，例如`\images\image.jpg`不会重写。

我的 .htaccess 代码如下：

```
RewriteEngine on
RewriteCond %{REQUEST_URI} !(\.gif|\.jpg|\.png|\.css)$ [NC]
RewriteRule  ^([a-zA-z]+)/([a-zA-z]+)$ test.php?controller=$1&action=$2 [L]
RewriteRule  ^([a-zA-z]+)/([a-zA-z]+)/([^/]*)$ test.php?controller=$1&action=$2&$3 [L] 
```

我的重写代码工作正常，并且 URL 按预期出现，但是即使我请求图像，URL 仍在重写。看来我的 RewriteCond 被忽略了，有人对这可能的原因有什么建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T12:50:48.780

rewriteCond 规则仅适用于下一个 RewriteRule。

所以你至少需要为你的第二个 RewriteRule 重复 rewriteCond。

不，当然还有更好的事情要做。例如，一种常用的方法是测试 url 是否匹配真正的静态资源。如果您的所有 php 代码都在 web 目录之外（在库目录中，除了 index.php），那么文档根目录上直接可用的所有 styatic 资源只能是 js 文件、css 文件或图像文件。

所以这是通常的做法：

```
RewriteEngine on
RewriteCond %{REQUEST_FILENAME} !-f
RewriteRule ^([a-zA-z]+)/([a-zA-z]+)$ test.php?controller=$1&action=$2 [L]
RewriteCond %{REQUEST_FILENAME} !-f
RewriteRule  ^([a-zA-z]+)/([a-zA-z]+)/([^/]*)$ test.php?controller=$1&action=$2&$3 [L] 
```

但这是一个起点。我们当然可以找到一些东西来避免为此做 2 条规则（也许我稍后会看看）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T12:52:14.697

RewriteCond 仅适用于您的第一个 RewriteRule，它应该为第二个规则复制。但是，我认为最好在之前添加一个非重写规则以排除现有的东西。

```
# Do nothing for files which physically exist
RewriteCond %{REQUEST_FILENAME} -f [OR]
RewriteCond %{REQUEST_FILENAME} -d
RewriteRule .* - [L]

# your MVC rules
RewriteRule  ^([a-zA-z]+)/([a-zA-z]+)$ test.php?controller=$1&action=$2 [L]
RewriteRule  ^([a-zA-z]+)/([a-zA-z]+)/([^/]*)$ test.php?controller=$1&action=$2&$3 [L] 
```

# python - 如何编写高效的python代码？cpp代码和python代码逻辑相同，执行效率相差10倍以上

> ID：13800980
> 
> 赞同：1
> 
> 时间：2012-12-10T12:30:02.640
> 
> 标签：python, performance

我正在解决一个面试街的问题，我写的cpp代码通过了所有的测试用例，但是具有相同逻辑的python代码需要10倍以上的cpu时间才能执行。
问题是[僵尸游行](https://www.interviewstreet.com/challenges/dashboard/#problem/4ff1484963063)，代码在[这里作为一个要点](https://gist.github.com/4245599)
我想知道如何编写高效的 p​​ython 代码，也就是如何优化这个 python 代码块

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-15T19:16:14.923

诀窍是用 C 或 C++ 编写时间关键部分。当问题包含 CPU 绑定目标时，这是使 python 更快的标准方法。

看[这里](http://docs.python.org/2/extending/extending.html)用 C 或 C++ 模块扩展 Python

看[这里](http://docs.python.org/2/library/ctypes.html)将 C dll 加载到 python 中并执行函数。

就我个人而言，我会选择第二个选项。我发现使用 C++ 类编写核心模块并使用一些外部 c 函数将它们公开到 DLL 中并直接在 python 中使用该 DLL 非常容易。

# django - Django 芹菜先进先出

> ID：13800988
> 
> 赞同：1
> 
> 时间：2012-12-10T12:30:15.493
> 
> 标签：django, redis, celery, fifo

因此，我将这 2 个应用程序与 REST API（json 消息）连接起来。一个用 Django 编写，另一个用 Php 编写。我在两边都有一个精确的数据库副本（使用 mysql）。

当我在其中一个上按“提交”时，我希望将该数据保存在当前的应用程序数据库中，并使用 celery/redis 启动一个 cron 作业，以使用 rest 更新另一个应用程序的远程数据库。

***我的问题是，我如何将同一个工人分配给我的任务以保持先进先出顺序？***

我需要我的数据保持一致，FIFO 非常重要。

好的，我将详细说明我想进一步做的事情：

所以我有这个 django 应用程序，当我在填写表格后按下提交时，我的芹菜工人醒来并负责处理提交的数据并将其发布到远程服务器。我可以毫无问题地做到这一点。

现在，想象一下我的互联网在那个确切的时间出现故障，我的 celery 工作人员不断重试发送，直到它成功但是想象我在提交之前的数据之前再次提交，我的数据在另一个远程服务器上不会是一致的。

现在这是我的问题。我无法使用 celery 提供的重试选项使这个请求成为 FIFO，所以我需要一些帮助来解决这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T14:41:05.990

这是我从另一个论坛得到的答案：

在 celery 中使用命名队列：http: [//docs.celeryproject.org/en/latest/userguide/workers.html#queues](http://docs.celeryproject.org/en/latest/userguide/workers.html#queues)

使用单个工作人员启动工作进程：http: [//docs.celeryproject.org/en/latest/django/first-steps-with-django.html#starting-the-worker-process](http://docs.celeryproject.org/en/latest/django/first-steps-with-django.html#starting-the-worker-process)

将此工作人员设置为从适当的队列中消费：http: [//docs.celeryproject.org/en/latest/userguide/workers.html#queues-adding-consumers](http://docs.celeryproject.org/en/latest/userguide/workers.html#queues-adding-consumers)

对于先进先出部分，我可以在发送请求之前按先进先出顺序对我的芹菜经纪人进行排序

# ruby-on-rails - Rails：嵌套资源问题

> ID：13800989
> 
> 赞同：0
> 
> 时间：2012-12-10T12:30:21.087
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, routes, nested-resources

这些是我的路线：

```
 resources :forums, :shallow=>true do
    resources :topics, :shallow=>true do
      resources :posts
    end
  end 
```

在`topics/show.html.erb`我添加了一个表格来发表帖子（`Post`就像一个评论`Topic`）

```
<%= form_for [@topic, @post] do |f| %>
    <div class="field">
    <%= f.label "content" %><br />
    <%= f.text_area :content %>
  </div>
  <div class="actions">
    <%= f.submit %>
  </div>
<% end %> 
```

问题是`:topic_id`模型中的字段`Post`保持为空。它不应该自动获取主题的ID吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T14:01:54.060

topic_id 不在您的 PostsController 的创建操作中的 params[:post] 内。因此，您需要手动分配 topic_id 以在操作中发布，如下所示：

```
...
@post = Post.new(params[:post])
@post.topic_id = params[:topic_id]
if @post.save
  flash.notice "Post created successfully"
else
  flash.error "Error saving post"
end
... 
```

# visual-c++ - CList 的使用 列表名称;

> ID：13800991
> 
> 赞同：1
> 
> 时间：2012-12-10T12:30:28.187
> 
> 标签：visual-c++, mfc, generic-list, clist

我写了一个函数

```
CList<GroupData *,GroupData *> funcationName(CString arg1,CString arg2); 
```

我正在连接数据库并在 GroupData Bean 类中添加数据库结果。像这样：

```
GroupData* grpData;
grpData->setGRGRID(groupid); 
```

之后我在 CList grpList 中添加 grpData；

```
grpList.AddHead(grpData); 
```

我收到编译错误

> 无法访问 cobject 类的私有成员

在编译器生成的文件 afxtempl.h 中。

我的班级有一个公共构造函数。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T22:09:47.390

您正在尝试在函数中返回 CList 对象：

```
CList funcationName(CString arg1,CString arg2); 
```

我认为对您来说最好的选择是像这样更改函数签名：

```
void funcationName(CString arg1, CString arg2, CList<GroupData *,GroupData *> &listData); 
```

然后，您需要在调用函数中初始化一个空的 CList 并将其作为第三个参数传递给上述函数