# StackOverflow 问答 14664000-14664999

# javascript - Dojo - “尝试使用 id==centerPane 注册小部件，但该 id 已注册”

> ID：14664007
> 
> 赞同：2
> 
> 时间：2013-02-02T16:34:11.643
> 
> 标签：javascript, html, css, dojo

我在使用 Dojo 中的内容窗格时遇到问题，它出现了一秒钟，然后内容消失了。我收到以下错误：

```
 Uncaught ReferenceError: dijit is not defined index.php:22
    dojo/parser::parse() error 
    Error
    arguments: undefined
    get stack: function () { [native code] }
    message: "Tried to register widget with id==centerPane but that id is already registered"
    set stack: function () { [native code] }
    type: undefined
    __proto__: d 
```

我已经找到答案，您可以在其中销毁所有已注册的 ID，但是当我尝试它们时仍然出现错误。

```
var ids = ["contentPane"];
dijit.registry.forEach(function(w){ 
   if(dojo.indexOf(ids,id)){
        w.destroyRecursive();
   }
}); 
```

和

```
var ids = ["contentPane"];

dijit.registry.forEach(function(w){ 
   if(dojo.indexOf(ids,1)){ // 1 will be yourid it will get destroy
        w.destroyRecursive();
   }
}); 
```

我该如何解决这个错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-02T16:40:46.027

解决了它，这很简单，但我会坚持回答，以防其他人犯我的错误。我的原始代码：

```
 <script>
      require(["dojo/parser", "dijit/layout/BorderContainer", "dijit/layout/ContentPane"],
        function (parser) {
        parser.parse();
      });
</script> 
```

固定代码：

```
<script>
  require(["dojo/parser", "dijit/layout/BorderContainer", "dijit/layout/ContentPane"]);
</script> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-11-17T16:55:52.840

当 parseOnLoad 设置为 true 时，我遇到了这个问题。据我了解，它启用了小部件注册。一旦我禁用错误就消失了。

```
<script type="text/javascript">
    var dojoConfig = {          
        parseOnLoad:false, 
```

......

# jsf - 如何在加载 div 时显示“正在加载..”

> ID：14664018
> 
> 赞同：2
> 
> 时间：2013-02-02T16:34:40.663
> 
> 标签：jsf, jsf-2, primefaces

我有一个 JSF 页面，其中包含不支持 AJAX 的图表。我注意到加载图表的时间非常慢。例如，是否可以加载 JSF 页面的正文并在加载图表时图表所在的 DIV 内显示“正在加载...”？我使用 Primefaces 生成图表。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T12:17:43.150

您可以尝试使用 BlockUI 和图表的 preRenderComponent 事件。请参阅此链接[如何在加载 PF 图表时显示“正在加载”](https://stackoverflow.com/questions/14655048/how-to-display-loading-while-loading-pf-chart)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-03-01T09:11:40.490

您可以在尝试加载时使用这个 prime-faces ajax 代码

```
<p:ajax event="page" update=":statusbar"  onstart="statusDialog.show();" oncomplete="statusDialog.hide();" onerror="statusDialog.hide();"/> 
```

从 ajax 你正在调用这个对话框

```
 <p:dialog widgetVar="statusDialog" id="statusbar" modal="true" showHeader="false" closable="false" width="250" resizable="false">
          <h:form>
//You can also give loading image here
            <div class="ft-row ft-center"><img src="#{request.contextPath}/resources/images/loding.gif" /></div>
            <h5>Please wait..</h5>
          </h:form>
        </p:dialog> 
```

# asp.net - 如果池和数据库服务器交换机中有一些连接会发生什么

> ID：14664025
> 
> 赞同：0
> 
> 时间：2013-02-02T16:35:13.143
> 
> 标签：asp.net, ado.net, oracle11g, connection-pooling

如果数据库服务器切换，我有一个关于应用程序池活动连接会发生什么的小问题。

我正在使用托管在 IIS 7.5 上的 asp.net 4.o 和在 linux 上运行的 oracle 服务器。
使用 ado.net 连接 oracle 服务器。

# wordpress - Wordpress 分类页面 url 重写

> ID：14664028
> 
> 赞同：0
> 
> 时间：2013-02-02T16:35:18.797
> 
> 标签：wordpress, taxonomy

我有分类法`lang`，可以选择`en`，`ru`当我选择分类法`en`页面网址时，可以做`sitename.com/en/page-name`吗？我尝试使用Types插件但没有这个功能，也许可以自己编写这个功能

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T19:23:25.497

要使您的自定义多语言解决方案正常工作，需要做很多工作。您必须挂钩 get_permalink() 函数才能正确重写输出到导航菜单、内容和模板的永久链接。如果我是你，我会选择现成的解决方案。例如。[qTransalte](https://wordpress.org/extend/plugins/qtranslate)、[WPML](http://wpml.org/)或[Stella](http://wordpress.org/extend/plugins/stella-free/)。如果您对这些插件有什么不满意的地方，请继续开发自己的多语言插件，否则您只是在重新发明轮子。

# java - 在 java 中使用 continue 选项连接 while 循环

> ID：14664031
> 
> 赞同：1
> 
> 时间：2013-02-02T16:35:59.123
> 
> 标签：java, while-loop, validation

我正在研究带有数据验证的贷款计算器。我已经写了一切，一切顺利。我唯一不知道的是如何在询问用户“继续y/n？：”的地方编写一个while循环，然后让程序仅在用户键入y/Y时继续，程序仅在用户结束时结束类型 n/N，任何其他输入都应给出错误消息，例如“无效，您只能输入 Y 或 N”。因此，如果用户输入“x”，它应该会显示错误消息。

我尝试过 else if 子句，我也尝试过使用我在程序其余部分中使用的方法来验证数据，但我根本不知道如何验证字符串。我只能用原始数据类型来做到这一点。

这是我现在知道如何编写循环的唯一方法，问题是它只会以除 Y 之外的任何内容结束程序。

分配的一个选项是使用 JOptionPane 但我不知道如何将其合并到 while 循环中并让它显示一个是和一个否按钮。

```
 String choice = "y";

    while (choice.equalsIgnoreCase("y")) {

    // code here

    System.out.print("Continue? (y/n): ");
        choice = sc.next();
    }
   } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-02T16:40:54.387

```
while(true) {
    //Do something
    String choice;
    boolean validChoice = false;
    boolean breakLoop = false;
    while(!validChoice) {
        System.out.print("Stay in loop(Y/N)?");
        choice = sc.next();
        if(choice.equalsIgnoreCase("Y")) {
            validChoice = true;
        }
        if(choice.equalsIgnoreCase("N")) {
            validChoice = true;
            breakLoop = true;
        }
        if(!validChoice) {
            System.out.print("Error! Pick only Y/N");
        }
    }
    if(breakLoop) {
        break;
    }
    //Do something
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-02T16:39:29.133

关于什么

```
while(true) {
   // do something
   // get user input (Y or N)
   if(input.equals("Y") {
      continue;
   } else if(input.equals("N")) {
      break;
   } else {
       System.out.println("entered option not valid, please use Y or N");
   }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-02T16:49:08.207

本质上，您需要两个循环：一个执行工作，另一个在内部提示用户验证。

```
boolean isContinuing = true;

while (isContinuing) {
    // do work

    boolean inputIsInvalid = true;
    while (inputIsInvalid) {
      System.out.print("Continue? (y/n): ");

      String choice = sc.next();

      if ("y".equalsIgnoreCase(choice)) {
          inputIsInvalid = false;
      }
      else if ("n".equalsIgnoreCase(choice)) {
          inputIsInvalid = false;
          isContinuing = false;
      }
      else {
          System.err.print("Error: Only valid answers are Y/N.");
      }
    }
} 
```

节点：我使用布尔变量而不是`break`语句，它使代码更直接和可读。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-02T16:49:39.270

我发现最好的方法是引入一种解释方法。

```
while (userWantsToContinue()) {
    // do another round
} 
```

理想情况下，您甚至可以在作为 UI 抽象的接口上将此方法设为：

```
while (user.wantsToContinue()) {
    // do another round
} 
```

将行为与 UI 实现分离。

# email - 为什么我的网站电子邮件会进入垃圾邮件箱？

> ID：14664033
> 
> 赞同：4
> 
> 时间：2013-02-02T16:36:16.013
> 
> 标签：email, gmail, spam, email-spam

我的网站发送的所有电子邮件都会发送到 Gmail 中的垃圾邮件箱（我尚未测试其他电子邮件服务器）。

我正在使用自己的域（通过 Google Apps）通过 Gmail 发送电子邮件。[我使用PHPMailer](http://code.google.com/a/apache-extras.org/p/phpmailer/)库发送电子邮件：

```
$mail = new PHPMailer();
$mail->IsSMTP();
$mail->SMTPAuth = true;
$mail->SMTPSecure = "ssl";
$mail->Host = "smtp.gmail.com";
$mail->Port = 465;
$mail->Username = "myuser@example.com";
$mail->Password = "mypassword";
$mail->From = "noreply@example.com";
$mail->FromName = $websiteName;
$mail->Subject = $subject;
$mail->AddAddress($to, "Client");
if ($html) {
    $mail->MsgHTML($content);
    $mail->AltBody = strip_tags($content);
    $mail->IsHTML(true);
} else {
    $mail->Body = $content;
}
if (isset($options['content-type'])) {
    $mail->ContentType = $options['content-type'];
}
if (isset($options['charset'])) {
    $mail->CharSet = $options['charset'];
}

return $mail->Send(); 
```

电子邮件按预期发送，但始终落入垃圾邮件箱。它发生在包含 HTML 的电子邮件和像这样的原始文本的电子邮件中：

> 你好约翰史密斯，
> 
> 非常感谢您对我们的信任。
> 
> 要完成您的购买，您应该将 XX 美元存入帐号：
> 
> IBAN XXXX - XXXX XXXX XX XX XXXXXX
> 
> 一旦我们收到您的转账，我们将激活您的许可证并通过电子邮件发送所有文件（合同副本、发票、有关应用程序的用户指南）。您有 15 天的时间审查所有材料和申请本身，如果您对购买的产品不完全满意，我们将退还您的款项。
> 
> 如果您需要代理的帮助，您可以回复此电子邮件。
> 
> 问候

那么这条消息可能包含一些可以激活垃圾邮件过滤器的单词，但它也会发生在这样的消息中：

> 你好
> 
> 您的收件箱中有一条新消息：
> 
> ```
> Meeting about next holidays (17:40-18:20). 
> ```
> 
> 我们希望能很快见到你！
> 
> [http://example.com/](http://example.com/)

怎么了？通过gmail发送电子邮件而不会受到惩罚的最佳策略是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-02T16:56:27.553

确保您有与您的域相关联的 SPF 记录，请查看此处： http: [//support.google.com/a/bin/answer.py ?hl=en-uk&hlrm=en&answer=33786](http://support.google.com/a/bin/answer.py?hl=en-uk&hlrm=en&answer=33786)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-02T16:50:37.070

Gmail 根据以下条件过滤电子邮件

*   他们的内容
*   电子邮件接收者的行为

内容不应有“付款、金钱、传销、机会、银行、金钱”之类的字眼。每个想要获得成功的垃圾邮件发送者都会说出人们想听的话，而这些正是这些东西。

此外，如果有太多人将您的电子邮件标记为垃圾邮件，那么在一定数量+百分比的负面“投票”组合后，您的电子邮件地址将被标记为不安全。

# perl - Perl 使用 TIEHASH 自动存活

> ID：14664034
> 
> 赞同：1
> 
> 时间：2013-02-02T16:36:28.797
> 
> 标签：perl, hash, overriding, autovivification, tie

这是要处理的绑定哈希的预期和直观行为`$h{a}++`：

```
$ perl -E'
    sub DESTROY {}
    sub AUTOLOAD { say "$AUTOLOAD @_"; bless {} }
    tie %h, main;
    $h{a}++;
'
main::TIEHASH main
main::FETCH main=HASH(0x7fb6c982a188) a
main::STORE main=HASH(0x7fb6c982a188) a 140423041558889 
```

这也有望处理嵌套 case `$h{a}{b}++`，但是我无法弄清楚为什么，最重要的是，如何覆盖此行为：

```
$ perl -E'
    sub DESTROY {}
    sub AUTOLOAD { say "$AUTOLOAD @_"; bless {} }
    tie %h, main;
    $h{a}{b}++;
'
main::TIEHASH main
main::FETCH main=HASH(0x7fbff102a188) a 
```

我在测试[Tie::CHI](http://cpan.me/Tie%3a%3aCHI)时偶然发现了这一点。它显然能够存储复杂的对象：

```
$ perl -MDateTime -MTie::CHI -E'
    tie %c, "Tie::CHI", { driver => "File", root_dir => "." };
    $c{a} = DateTime->now;
' 
```

Perl 能够从深度嵌套的结构中检索任何数据，此外：

```
print Dumper $c{json}->{results}[0]{geometry}{location}; 
```

但是在嵌套结构中存储在任何 tie() 的哈希中都不起作用：

```
$c{json}->{results}[0]{geometry}{location} = [0, 0]; 
```

可以修补 Tie::CHI 以使用更多 DWIMmery 处理这种情况吗？如果没有，有什么替代方案？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-02T16:42:32.937

你是否意识到

```
$h{a}{b} 
```

与

```
$h{a}->{b} 
```

那是由两个单独的哈希查找组成的吗？基本上是一样的

```
my $anon = $h{a};
$anon->{b} 
```

您想`%{ $h{a} }`成为一个已绑定的哈希，但`$h{a}`( `FETCH`) 返回了一个对未绑定哈希的引用。更改它以返回绑定的哈希。

```
$ perl -E'
    sub DESTROY {}
    sub FETCH { say "FETCH @_"; tie my %h, main; \%h; }
    sub AUTOLOAD { say "$AUTOLOAD @_"; bless {} }
    tie %h, main;
    $h{a}{b}++;
'
main::TIEHASH main
FETCH main=HASH(0x8006c030) a
main::TIEHASH main
FETCH main=HASH(0x80071e28) b
main::TIEHASH main
main::STORE main=HASH(0x80071e28) b 2147952185 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-03T02:37:27.680

正如 ikegami 的回答所得出的那样，要在[Tie::CHI中正确实现嵌套的](http://cpan.me/Tie%3a%3aCHI)*HashRefs* ，有必要创建一个递归转换器，该转换器遍历使用接口包装散列/数组引用的数据结构。一点都不酷。`tie()`

幸运的是，有不止一种方法可以做到这一点，[DBM::Deep将自己展示为整个](http://cpan.me/DBM%3a%3aDeep)[CHI](http://cpan.me/CHI)命名空间的坚如磐石的替代品。

```
#!/usr/bin/env perl
use strict;
use warnings;

use Data::Dumper;
use DBM::Deep;

tie my %c, 'DBM::Deep', 'test.db';

$c{json}->{results}[0]{geometry}{location} = [0, 0];
print Dumper \%c; 
```

通过将每个引用封装为`DBM::Deep::(Array|Hash)`：

```
$VAR1 = {
    'json' => bless( {
            'results' => bless( [
                    bless( {
                            'geometry' => bless( {
                                    'location' => bless( [
                                            '0',
                                            '0'
                                        ], 'DBM::Deep::Array' )
                                }, 'DBM::Deep::Hash' )
                        }, 'DBM::Deep::Hash' )
                ], 'DBM::Deep::Array' )
        }, 'DBM::Deep::Hash' )
}; 
```

而且，除了`::File`引擎，DBM::Deep 也支持`::DBI`引擎。

# actionscript-3 - 无效音频文件错误

> ID：14664045
> 
> 赞同：0
> 
> 时间：2013-02-02T16:37:28.773
> 
> 标签：actionscript-3, flash, audio, actionscript

我正在开发一个 Flash 音频播放器，我得到了它，以便它可以播放 mp3 文件。现在，我想添加一个错误处理程序，以便我可以知道我尝试播放的文件何时/是否无效。例如，如果尝试播放损坏的 mp3 文件甚至 jpeg，它的行为就像播放一样，但没有任何反应。

我尝试添加一个 IOError 侦听器`_sound.addEventListener(IOErrorEvent.IO_ERROR,handleIOError);`，但这只让我知道何时发生 404 错误或其他 HTTP 错误。

这是我用来播放音频的代码：

```
_sound=new Sound();

_sound.addEventListener(IOErrorEvent.IO_ERROR,handleIOError);
_sound.addEventListener(ProgressEvent.PROGRESS,handleLoadProgress);

_urlRequest=new URLRequest(_url);
_sound.load(_urlRequest,createSoundLoaderContext());

_soundChannel=_sound.play(_position,0,createSoundTransform()); 
```

我已经尝试了我能想到的一切。有谁知道我如何找出我尝试播放的文件不是有效的音频文件？任何变通方法都会有所帮助，即使它们涉及轮询属性。

# qt - 在 QT 的头文件中声明变量导致程序意外完成

> ID：14664047
> 
> 赞同：-1
> 
> 时间：2013-02-02T16:37:36.553
> 
> 标签：qt

我在 QtCreator 上有一个基于 QWidget 的项目“Cybaware_ver1”，一切正常。我有一个包含公共和私有变量和函数的类的头文件。但是，自从有一天我尝试在头文件中声明一个新变量，甚至是一个“int”变量并运行项目时，我得到

```
The program has unexpectedly finished.
/home/devdeep/Cybaware_ver1-build-Desktop_Qt_5_0_0_GCC_64bit_SDK-Debug/Cybaware_ver1       exited with code 0 
```

以前我可以毫无问题地在头文件中添加变量。目前，我可以添加新功能、修改 UI 等。只是我无法将变量添加到头文件中。我找到了在 cpp 文件中将这些变量声明为静态的临时解决方案。但是，我想找到解决此问题的方法。我已尝试重新安装 Qt，但问题仍然存在。我在 Ubuntu Linux 上运行它。请让我知道是否有解决此问题的方法。另外，我不确定我可以提供哪些其他信息。所以请让我知道。

**更新：**好的。我使用了调试器，它说错误是分段错误。它指向 qdebug.h 的以下部分和由 qt_message_output 标记的行。

```
public:
inline QDebug(QIODevice *device) : stream(new Stream(device)) {}
inline QDebug(QString *string) : stream(new Stream(string)) {}
inline QDebug(QtMsgType t) : stream(new Stream(t)) {}
inline QDebug(const QDebug &o):stream(o.stream) { ++stream->ref; }
inline QDebug &operator=(const QDebug &other);
inline ~QDebug() {
    if (!--stream->ref) {
        if(stream->message_output) {
            QT_TRY {
                qt_message_output(stream->type,
                                  stream->context,
                                  stream->buffer);
            } QT_CATCH(std::bad_alloc&) { /* We're out of memory - give up. */ }
        }
        delete stream;
    }
} 
```

我想这是一个内存不足的错误。可能，关闭其他程序可能会有所帮助？

**UPDATE2：**调用“运行 qmake”没有帮助。这是我的头文件：

```
#ifndef MAINVIEW_H
#define MAINVIEW_H

#include <QWidget>
#include <QGraphicsScene>
#include <QGraphicsRectItem>
#include <QGraphicsLineItem>
#include <QGraphicsEllipseItem>
#include <QGraphicsSimpleTextItem>
#include <list>
#include <QMouseEvent>
#include <QEvent>
#include <QString>
#include <boost/thread.hpp>
#include <qcustomplot.h>
#include <QTimer>
namespace Ui {
class MainView; 
}

class MainView : public QWidget
{
Q_OBJECT

public:
int num_missions;
int num_services;
int timer;

int* num_servpermission;
int missionstartx;
//boost::thread pt;
QGraphicsScene mynewscene;
QGraphicsRectItem* myrect;
QGraphicsRectItem** missionline;
QGraphicsLineItem** missionplayline;
QGraphicsRectItem** playrect;
std::list<QGraphicsLineItem**> missionticks;
std::list<QGraphicsEllipseItem**> missionservices;
std::list<QGraphicsSimpleTextItem**> missionservicesno;
std::list<QGraphicsLineItem**>::iterator ti;
std::list<QGraphicsSimpleTextItem**>::iterator ssi;
//std::list<QGraphicsEllipseItem**>::iterator si;

int* missionlength;
int** missionplayxy;
int* missiontickscount;
int* missioniteration;
int missionselected;
int missiontickselected;
int missiontickoffset;
bool isrepeated;

int temp;

QCustomPlot** customPlot;
QTimer dataTimer;

explicit MainView(QWidget *parent = 0);
void playthread();

bool eventFilter(QObject*, QEvent*);
void testfunc();
void clearview();
void test1();

~MainView();

private slots:
void on_startButton_clicked();
void realtimeDataPlot();

void on_pushButton_clicked();

private:
Ui::MainView *ui;

};

#endif // MAINVIEW_H 
```

程序在添加任何变量时崩溃。例如，我刚才添加了变量*int temp*，它会崩溃。添加任何新内容都会使其崩溃，例如取消注释声明*std::list::iterator si* ;。我把它拿出来，一切正常。

**UPDATE3：** 我的外部头文件 qcustomplot.h 位于同一目录中。我也在使用 boost，但我使用 apt-get 进行设置。这是堆栈跟踪：

0 MainView::playthread mainview.cpp 530 0x418fa1
1 boost::_mfi::mf0::operator() mem_fn_template.hpp 49 0x424690
2 boost::_bi::list1 >::operator(), boost::_bi::list0 > bind.hpp 253 0x424600
3 boost::_bi::bind_t, boost::_bi::list1 > >::operator() bind_template.hpp 20 0x4245af
4 boost::detail::thread_data, boost::_bi::list1 > > >::run thread.hpp 61 0x42431c
5 thread_proxy /usr/lib/libboost_thread.so.1.46.1 0x7ffff7bcfba9
6 start_thread /lib/x86_64-linux-gnu/libpthread.so.0 0x7ffff6557efc
7 clone /lib/x86_64- linux-gnu/libc.so.6 0x7ffff5af159d
8 ??

上述跟踪中的第 0 个点指向 ui->missionview->invalidateScene() 此处图形视图从绑定到 boost 线程的函数*playthread更新。*但是我不确定为什么在头文件中添加变量会出现问题，因为我没有在 cpp 文件中的任何地方使用该变量。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2021-03-18T20:48:32.723

进入项目文件夹并删除 *.pro.user 文件。下次打开项目时，您只需重新配置它（即选择合适的构建工具包）。

我知道这是一个旧线程，但我自己也遇到了同样的问题。每次我尝试向头文件添加变量时，都会导致堆损坏错误。我没有在堆上分配内存，甚至没有为此声明指针变量。这非常令人沮丧，因为我一开始不知道它是什么。我最终将其缩小到将变量添加到导致崩溃的头文件中。根据 doomguy 的经验，我知道它在构建文件夹中是持久的，因为他说重新安装 Qt 不起作用。我很高兴我读到了这篇文章，因为如果我重新安装这个庞然大物但它仍然无法正常工作，我会很生气。根据之前的经验，.user 文件中的损坏可能会导致问题，删除它可以让您从头再来。故事的寓意：如果你

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-02T17:18:53.887

不确定问题是否是由这个引起的，但如果标头包含 QObject 派生类，您应该*运行 qmake*并在此之后构建您的应用程序。

LE：如果不是这种情况，我建议您向我们展示更多代码（您的代码，而不是 Qt 代码）

# ruby-on-rails - Rails：将 API 请求限制为 JSON 格式

> ID：14664049
> 
> 赞同：25
> 
> 时间：2013-02-02T16:37:58.700
> 
> 标签：ruby-on-rails, json, redirect, restriction, rails-api

我想限制对所有 API 控制器的请求被重定向到 JSON 路径。我想使用重定向，因为 URL 也应该根据响应而改变。
一种选择是使用 a`before_filter`将请求重定向到相同的操作，但强制使用 JSON 格式。该示例还没有工作！

```
# base_controller.rb
class Api::V1::BaseController < InheritedResources::Base
  before_filter :force_response_format
  respond_to :json
  def force_response_format
    redirect_to, params[:format] = :json
  end
end 
```

另一种选择是限制路线设置中的格式。

```
# routes.rb
MyApp::Application.routes.draw do
  namespace :api, defaults: { format: 'json' } do
    namespace :v1 do
      resources :posts
    end
  end
end 
```

我希望所有请求都以 JSON 请求的形式结束：

```
http://localhost:3000/api/v1/posts
http://localhost:3000/api/v1/posts.html
http://localhost:3000/api/v1/posts.xml
http://localhost:3000/api/v1/posts.json
... 
```

您会推荐哪种策略？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-02-02T17:14:23.313

在您的路由中设置默认值不会将所有请求都转换为 JSON 请求。

您想要的是确保您呈现的任何内容都是 JSON 响应

您几乎在第一个选项中拥有它，除非您需要这样做

```
before_filter :set_default_response_format

private
  def set_default_response_format
    request.format = :json
  end 
```

这将在您的 Base API 控制器下进行，因此当您执行实际操作时，格式将始终为 JSON。

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2013-02-02T20:39:45.743

如果要返回 404，或者如果格式不是 RouteNotFound 则引发错误`:json`，我将添加如下路由约束：

需要 JSON 格式：

```
# routes.rb
MyApp::Application.routes.draw do
  namespace :api, constraints: { format: 'json' } do
    namespace :v1 do
      resources :posts
    end
  end
end 
```

更多信息可以在这里找到： [http ://edgeguides.rubyonrails.org/routing.html#request-based-constraints](http://edgeguides.rubyonrails.org/routing.html#request-based-constraints)

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-02-02T17:08:03.693

第二种选择，使用路线格式。如果用户明确请求 XML 格式，他不应该收到 JSON 响应。他应该收到一条消息，指出此 URL 不响应 XML 格式或 404。

顺便说一句，在我看来，对所有你应该做的事情做出回应是相当容易的。

```
class FooController
  respond_to :xml, :json
  def show
    @bar = Bar.find(params[:id])
    respond_with(@bar)
  end
end 
```

# javascript - 第 N 个子 CSS 属性正在计算显示属性设置为无的 html 元素。如何改变它？

> ID：14664050
> 
> 赞同：3
> 
> 时间：2013-02-02T16:38:18.930
> 
> 标签：javascript, jquery, html, css, css-selectors

我有使用无序列表的简单画廊。

```
 <h1>Projects</h1>
    <hr>

    <!-- Projects gallery as unordered list -->

    <ul class="gallery">

      <li class="item residential">
        <img src="Projects/01-HighTorEast-EarlShilton/01-thumbnail.jpg" width="212" height="119" alt="High Tor East, Earl Shilton">
        <h2><a class="info" href="Projects/01-HighTorEast-EarlShilton/info.php">High Tor East, Earl Shilton</a></h2>
        <h3><a class="cat" href="residential">Residential</a></h3>
      </li>

      <li class="item modernisation">
        <img src="Projects/02-Hollycroft-Hinckley/02-thumbnail.jpg" width="212" height="119" alt="Hollycroft, Hinckley">
        <h2><a class="info" href="Projects/02-Hollycroft-Hinckley/info.php">Hollycroft, Hinckley</a></h2>
        <h3><a class="cat" href="modernisation">Modernisation & Domestic Extensions</a></h3>
      </li>

      <li class="item residential">
        <img src="Projects/03-SpaLane-Hinckley/03-thumbnail.jpg" width="212" height="119" alt="Spa Lane, Hinckley">
        <h2><a class="info" href="Projects/03-SpaLane-Hinckley/info.php">Spa Lane, Hinckley</a></h2>
        <h3><a class="cat" href="residential">Residential</a></h3>
      </li>

      <li class="item residential">
        <img src="Projects/04-Farnhambridge-Rothley/04-thumbnail.jpg" width="212" height="119" alt="Farnhambridge Farm, Rothley">
        <h2><a class="info" href="Projects/04-Farnhambridge-Rothley/info.php">Farnhambridge Farm, Rothley</a></h2>
        <h3><a class="cat" href="residential">Residential</a></h3>
      </li>

      <li class="item modernisation">
        <img src="Projects/05-NetherfieldClose-BroughtanAstley/05-thumbnail.jpg" width="212" height="119" alt="Netherfield Close, Broughtan Astley">
        <h2><a class="info" href="Projects/05-NetherfieldClose-BroughtanAstley/info.php">Netherfield Close, Broughtan Astley</a></h2>
        <h3><a class="cat" href="modernisation">Modernisation & Domestic Extensions</a></h3>
      </li>

      <li class="item modernisation">
        <img src="Projects/06-Bridlepath-Elmesthorpe/06-thumbnail.jpg" width="212" height="119" alt="Bridlepath, Elmesthorpe">
        <h2><a class="info" href="Projects/06-Bridlepath-Elmesthorpe/info.php">Bridlepath, Elmesthorpe</a></h2>
        <h3><a class="cat" href="modernisation">Modernisation & Domestic Extensions</a></h3>
      </li>

      <li class="item residential">
        <img src="Projects/07-Bridlepath-Elmesthorpe/07-thumbnail.jpg" width="212" height="119" alt="Bridlepath, Elmesthorpe">
        <h2><a class="info" href="Projects/07-Bridlepath-Elmesthorpe/info.php">Bridlepath, Elmesthorpe</a></h2>
        <h3><a class="cat" href="residential">Residential</a></h3>
      </li>

      <li class="item feasibility">
        <img src="Projects/08-GrangeCroft-Ullesthorpe/08-thumbnail.jpg" width="212" height="119" alt="Grange Croft, Ullesthorpe">
        <h2><a class="info" href="Projects/08-GrangeCroft-Ullesthorpe/info.php">Grange Croft, Ullesthorpe</a></h2>
        <h3><a class="cat" href="feasibility">Feasibility layouts</a></h3>
      </li>

      <li class="item master">
        <img src="Projects/09-RailwayInn-Sileby/09-thumbnail.jpg" width="212" height="119" alt="The Railway Inn, Sileby">
        <h2><a class="info" href="Projects/09-RailwayInn-Sileby/info.php">The Railway Inn, Sileby</a></h2>
        <h3><a class="cat" href="master">Master planning</a></h3>
      </li>

    </ul>

  </section> 
```

比在我的 css 中，我将 .item 类的每四个孩子的右边距值设置为零。我这样做是为了在我的页面上将四个项目保持在一行中，并且在不删除边距的情况下我只能容纳三个。

```
ul.gallery { clear:both; list-style:none; margin:0; padding:0; width:940px; }
.gallery a:hover { text-decoration:underline; }
li.item { display:inline; margin:30px 20px 30px 0px; padding:0px; height:178px; width:220px; float:left; background:#ededed url('../Images/featuredline.png') repeat-x 0% 100%; overflow:hidden; }
li.item:nth-child(4n+4) { margin:30px 0px 30px 0px; } 
```

接下来，我编写了小的 jQuery 代码来按类别对项目进行排序。因此，如果有人点击“住宅”链接，它将隐藏具有不同类别的元素。

```
 $('.cat').bind('click', function(e) {
    var cat = $(this).attr('href');
    $('.item').each(function () {
    var itemClass = $(this).attr('class');
    if (itemClass != 'item '+cat) {
        $(this).css({"display":"none"});
    };

    });
    e.preventDefault(); 
```

我的问题是：当我使用上面的 jQuery 脚本对画廊项目进行排序时，似乎 .item:nth-child 属性仍在计算显示属性设置为无的元素。我不知道怎么咬它。我需要 css .item:nth-child 属性来计算 jQuery 插件触发后的可见元素。

网站可在此处获得[http://www.damianwojtczak.com/avd2/projects.php](http://www.damianwojtczak.com/avd2/projects.php)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-02T16:57:42.493

移除你的 nth-child CSS 样式，每次你改变布局时，调用这个：

```
$("li.item:visible").each(function(i) {
    if((i+1)%4==0) $(this).css("margin","30px 0");
    else $(this).css("margin","30px 20px 30px 0");
}) 
```

刚刚在你的网站上用萤火虫测试了它，并得到了款待。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-02T17:01:30.923

一种解决方案是将`nth-child`css 选择器更改为类并使用 jQuery 切换类。

```
li.item.marginClass { margin:30px 0px 30px 0px; } 
```

JS：

```
$(function(){
    var $items=$('li.item');
    function toggleMargin(}{
        $items.removeClass('marginClass').filter(':visible').addClass(function(index){
              return index % 4 ===0 && index !=0 ? 'marginClass' : '';
        });
    }
    /* call for page loaded items*/
    toggleMargin(};

    $('.cat').bind('click', function (e) {
        /* filtering code here*/

        /* adjust class*/
         toggleMargin(};

    })

}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-02T17:03:21.713

当你隐藏你的节点时，设置一些“isHidden”属性标志`$(this).attr('isHidden')`，当你显示你的节点时，删除这个标志`.removeAttr('isHidden')`，然后你可以更新你的选择器

```
li.item:not([isHidden]):nth-child(4n+4) { margin:30px 0px 30px 0px; } 
```

如果您不想使用额外的属性，可以将其添加为类名，如[Tomalak 的回答](https://stackoverflow.com/a/14664239/1615483)中所示。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-02T17:08:18.040

**CSS**

代替

```
li.item:nth-child(4n+4) { margin:30px 0px 30px 0px; } 
```

采用

```
li.item.split { margin:30px 0px 30px 0px; } 
```

**jQuery**

```
reorderColumns  =   function(ev) {
    $('li.item').removeClass('split');
    $('li.item:visible:nth-child(4n+4)').addClass('split');
    ev.preventDefault();
};

$('.cat').on('click',reorderColumns); 
```

# java - 每 2 分钟将序列化文件从一个文件夹复制到另一个文件夹

> ID：14664051
> 
> 赞同：0
> 
> 时间：2013-02-02T16:38:26.540
> 
> 标签：java

请不要将此问题视为重复问题，我在文件夹 ter 中的文件很少，即 ter 文件夹位于 c: 驱动器中，它包含一个名为 gfr.ser 的序列化文件，因此完整路径为 (C:\ter\gfr .ser) ，现在我希望将此 gfr.ser 文件复制到 C 内的另一个文件夹中：本身名为 bvg 所以我希望将文件复制到路径 (C:\bvg\gfr.ser) 下面是 java 类，请告知我能达到同样的效果吗，请指教

```
import java.util.TimerTask;
import java.util.Date;
import java.util.Timer;

// Create a class extends with TimerTask
public class ScheduledTask extends TimerTask {

    // Add your task here
    public void run() {
        Runtime.getRuntime().exec("cmd.exe /c start c:\\ter\\gfr.ser");
    }
}

//Main class
public class SchedulerMain {
    public static void main(String args[]) throws InterruptedException {

        Timer time = new Timer(); // Instantiate Timer Object
        ScheduledTask st = new ScheduledTask(); // Instantiate SheduledTask class
        time.schedule(task, now ,TimeUnit.SECONDS.toMillis(2));

    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T17:07:57.647

我想说，对您来说更简单的选择可能是我在评论中的链接的第一个选择（您不必将其他库下载到您的项目中）。这是您可以在应用程序中使用的简单代码

```
Path source = new File("C:\\ter\\gfr.ser").toPath();
Path target = new File("C:\\bvg\\gfr.ser").toPath();
Files.copy(source, target, StandardCopyOption.REPLACE_EXISTING); 
```

`C:\bvg`但是在开始复制之前确保该文件夹存在。

* * *

由于您使用的是 JDK 1.6 [，因此此](http://www.mkyong.com/java/how-to-copy-file-in-java/)示例更好。我假设您正在尝试用新文件替换旧文件。您可以这样做：

```
import java.io.*;
import java.util.*;
import java.util.concurrent.TimeUnit;

class ScheduledTask extends TimerTask {

    public void run() {
        InputStream inStream = null;
        OutputStream outStream = null;

        try {
            File targetDirectory = new File("C:\\bvg");
            if (!targetDirectory.exists()) targetDirectory.mkdirs();

            File source = new File("C:\\ter\\gfr.ser");
            File target = new File("C:\\bvg\\gfr.ser");

            inStream = new FileInputStream(source);
            outStream = new FileOutputStream(target);

            byte[] buffer = new byte[1024];

            int length;
            // copy the file content in bytes
            while ((length = inStream.read(buffer)) > 0) {
                outStream.write(buffer, 0, length);
            }

            inStream.close();
            outStream.close();

            System.out.println("File is copied successful!");

        } catch (IOException e) {
            e.printStackTrace();
        }
    }
}

// Main class
public class SchedulerMain {

    public static void main(String args[]) throws InterruptedException {

        Timer time = new Timer();
        ScheduledTask task = new ScheduledTask();

        time.schedule(task, new Date(), TimeUnit.MINUTES.toMillis(2));

    }
} 
```

# asp.net - 如何解决“无法将'ASP.addtoroster_aspx'类型的对象转换为'System.Web.UI.WebControls.GridViewRow'错误？

> ID：14664054
> 
> 赞同：0
> 
> 时间：2013-02-02T16:38:39.140
> 
> 标签：asp.net, vb.net

我们在 gridview 中有一个从数据库中填充的下拉列表。

此下拉列表旁边还有一个文本框。

如果用户正在寻找的选项不在下拉列表中，则将该值输入到文本框中，当提交到数据库时，现在将在下拉列表中。

我遇到以下错误：

```
Unable to cast object of type 'ASP.addtoroster_aspx' to type 'System.Web.UI.WebControls.GridViewRow'. 
```

错误在这一行：

`Dim parentRow As GridViewRow = DirectCast(button.NamingContainer, GridViewRow`)

我相信会发生此错误，因为我在标记上使用图像按钮提交到数据库。

```
<asp:ImageButton ID="btnSave" runat="server" ImageUrl="images/save.png" 
                                             onmouseout="this.src='images/save.png'" 
                                             onmouseover="this.src='images/save.png'"

 OnClick="btnSave_Click" alt="Save Data" /> 
```

知道如何解决这个问题吗？

即使这是 vb，我也欢迎使用 c# 中的解决方案（如果有）。

谢谢！

```
Protected Sub btnSave_Click(ByVal sender As Object, ByVal e As EventArgs)
    ' Try
    SetRowData()
    Dim table As DataTable = TryCast(ViewState("CurrentTable"), DataTable)

    If table IsNot Nothing Then
        For Each row As DataRow In table.Rows
            Dim txLName As String = TryCast(row.ItemArray(1), String)
            Dim txName As String = TryCast(row.ItemArray(2), String)
            Dim txEmail As String = TryCast(row.ItemArray(3), String)
            Dim txRole As String = TryCast(row.ItemArray(4), String)
            Dim txPhone As String = TryCast(row.ItemArray(5), String)
            Dim drpEmpl As String = TryCast(row.ItemArray(6), String)
            Dim txVIP As String = TryCast(row.ItemArray(7), String)
            Dim drpLCB As String = TryCast(row.ItemArray(8), String)

            'Find the button
            Dim button As Button = DirectCast(sender, Button)
            'Find parent row
            Dim parentRow As GridViewRow = DirectCast(button.NamingContainer, GridViewRow)
            'find DropDownlist and textbox
            Dim ddl As DropDownList = TryCast(parentRow.FindControl("txtLoginName"), DropDownList)
            Dim txtNewUser As TextBox = TryCast(parentRow.FindControl("txtNewUser"), TextBox)
            If txtNewUser IsNot Nothing AndAlso ddl IsNot Nothing Then
                'add new listitem here
                Dim customItem As New ListItem(txtNewUser.Text, txtNewUser.Text)
                ddl.Items.Add(customItem)
            End If

            Dim ddlvalue As String = ""
            Dim idx As Integer = grvStudentDetails.EditIndex

            If drpEmpl = "Other" Then
                ddlvalue = DirectCast(grvStudentDetails.FindControl("txtOther"), TextBox).Text

                '   Else
                '      ddlvalue = drpEmpl
            End If

            If txLName IsNot Nothing OrElse txLName IsNot Nothing OrElse txEmail IsNot Nothing OrElse txRole IsNot Nothing OrElse txPhone IsNot Nothing OrElse drpEmpl IsNot Nothing OrElse txVIP IsNot Nothing OrElse drpLCB IsNot Nothing Then
                ' Response.Write(String.Format("{0} {1} {2} {3} {4} {5} {6} {7} <br/>", txLName, txName, txEmail, txRole, txPhone, drpEmpl, txVIP, drpLCB))

                'Try
                Dim dateentered As String = DateTime.Now.ToString("MM/dd/yyyy HH:mm:ss")
                'Response.Write(dateentered)
                'Response.End()

                Dim s As String
                Dim count As Integer

                'If LoginName already exists, alert user
                s = "SELECT Count(*) FROM Employee_Roster WHERE login_id = " & txLName
                'Response.Write(s)
                'Response.End()
                Dim connSt As String = ConfigurationManager.ConnectionStrings("allstringconstrng").ConnectionString
                Dim connc As New OleDbConnection(connSt)
                Dim cmdc As New OleDbCommand(s, connc)
                'cmdc.Parameters.AddWithValue("login_id", txtLoginName.SelectedValue)
                connc.Open()
                ' cmdc.ExecuteNonQuery()
                count = cmdc.ExecuteScalar()

                '   Now let's see if we found existing record
                If count > 0 Then
                    'Display some feedback to the user to let them know it was processed
                    lblResult.ForeColor = System.Drawing.Color.Green
                    lblResult.Text = "User already is in the Excel Sheet!"
                Else
                    s = "INSERT INTO Employee_Roster(login_id, FullName, Email_Address, Role_Dept,Phone,Employer,VP,entryDate,Notes) VALUES "
                    s += "('" & txLName & "', '" & txName & "', '" & txEmail & "', '" & txRole & "', '" & txPhone & "', '" & ddlvalue & "','" & txVIP & "','" & dateentered & "', '" & drpLCB & "')"
                    Response.Write(s)
                    Response.End()
                    Dim connStr As String = ConfigurationManager.ConnectionStrings("allstringconstrng").ConnectionString
                    Dim conn As New OleDbConnection(connStr)
                    Dim cmd As New OleDbCommand(s, conn)
                    conn.Open()
                    cmd.ExecuteNonQuery()
                    conn.Close()

                    'Display some feedback to the user to let them know it was processed
                    lblResult.ForeColor = System.Drawing.Color.Green
                    lblResult.Text = "Record successfully saved!"

                    'Clear the form
                    txLName = ""
                    txLName = ""
                    txEmail = ""
                    txRole = ""
                    txPhone = ""
                    txVIP = ""
                End If
                ' Catch

                'If the message failed at some point, let the user know
                lblResult.ForeColor = System.Drawing.Color.Red
                lblResult.Text = "Your record failed to save, please try again."

                ' End Try

            End If
        Next
    End If
    '  Catch ex As Exception
    'Throw New Exception(ex.Message)
    ' End Try
End Sub 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-02T17:53:44.780

Its very clear that your controls are residing inside your page and casting `button.NamingContainer` to `GridViewRow` is invalid.

The solution is that you don't need to use the `FindControl` if your controls have this property set `runat="server"`. Just use the ID you give to them.

One more thing to point out is you need to use parametrized queries. Your queries are prone to [SQL Injection](http://en.wikipedia.org/wiki/SQL_injection) . check [How do I create a parameterized SQL query? Why Should I?](https://stackoverflow.com/q/542510/799558)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-02T17:47:39.640

```
Dim parentRow As GridViewRow = DirectCast(button.NamingContainer, GridViewRow) 
```

这个按钮在外面`Gridview`，这个按钮属于`ASP.addtoroster_aspx`

but when you say `button.NamingContainer` it points `ASP.addtoroster_aspx` as it holds that

button,so casting is failing.

# accurev - 是否可以将 AccuRev 配置为使用 WinMerge 作为其差异/合并工具？

> ID：14664055
> 
> 赞同：3
> 
> 时间：2013-02-02T16:38:41.510
> 
> 标签：accurev, winmerge

我在 AccuRev 的差异*/合并*首选项选项卡中看到差异和合并工具可以切换到第三方工具的预定义列表。

这些是我的选择：

**差异**

*   AccuRev
*   TkDiff
*   阿拉西斯
*   超越比较 V1
*   超越比较 V2
*   吉菲

**合并**

*   AccuRev
*   TkDiff
*   阿拉西斯
*   吉菲

是否可以将 WinMerge 添加到这些列表中？如果是这样，怎么做？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-13T10:14:41.583

您不仅可以从列表中选择，还可以插入您需要运行的任何命令行，因此您可以挂钩任何支持使用参数调用的 diff/merge 工具。例如，我用它来区分：

```
NxNMerge.exe %1% %2% /title1:"%3%" /title2:"%4%" 
```

有关参数的描述，请打开 AccuRev 中的工具->首选项->差异/合并，然后单击帮助按钮。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-13T22:19:07.790

船只的回答非常准确。但要记住的一件事是 WinMerge 不是 3 路合并工具，因此使用 AccuRev 最接近的共同祖先 3 路算法将无法正常工作。Diff 应该没问题，但我不建议将它用于 Merge ...

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-22T18:11:44.757

正如@vessel 所说，您可以将任何命令行插入到编辑字段中。WinMerge 的命令行如下：

```
WinMergeU.exe /dl "%3%" /dr "%4%" %1% %2% 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-06-14T08:51:48.313

更好的选择是 KDiff3，它也支持 3 路合并。以下两个命令： 差异：

```
"c:\Program Files\KDiff3\kdiff3.exe" %1% %2% 
```

合并：

```
"c:\Program Files\KDiff3\kdiff3.exe" %1% %2% %a% -o %o% 
```

# css - disable margin-right gutter-width value when using the span-columns set at total-columns?

> ID：14664062
> 
> 赞同：0
> 
> 时间：2013-02-02T16:39:56.773
> 
> 标签：css, sass, susy-compass

Using the susy compass addon, when use the `span-columns` mixin to be set to `$total-columns` how can I disable the margin-right value being set by `$gutter-width`?

At the moment my code is:

```
.element{
@include span-columns(12);
} 
```

results in

```
.element{
width: 100%
margin-right: 2.12766%;
} 
```

ideally i would like margin-right not to exist?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T19:29:17.287

There is no reason to use `span-columns()` at all in this case. Block elements span 100% width by default, and there is no reason for any of the other properties (float & margin) that are part of the mixin.

That said, simply add `omega` and the right margin will go away. Still, it's a bulky way to achieve any of the goals you might be after. If you need it to clear other elements, you should use the simple `clear: both;`. If you need it to wrap internal floats, use a clearfix (Compass has several).

# ruby-on-rails - 当图像存在并预编译时，为什么会有 ActionView::Template::Error？

> ID：14664064
> 
> 赞同：0
> 
> 时间：2013-02-02T16:40:20.123
> 
> 标签：ruby-on-rails, heroku

我在 heroku (cedar) 上部署了一个对 Ruby on Rails 应用程序的更改，其中包含一个新图像。

更新：如果我切换到生产模式，我可以在本地重现问题。我说的其余部分是准确的。

当我导航到带有`image_tag`该图像的页面时，我收到以下错误：

```
ActionView::Template::Error (image_name.png  isn't precompiled) 
```

到目前为止，这是我为诊断/解决问题所做的工作：

*   我跑来`heroku run rake assets:precompile RAILS_ENV=production`确保资产预编译没有错误。一切看起来都很好。
*   我还在本地编译资产并使用预编译的所有内容进行部署（heroku 在部署期间注意到了这一点），但收到了相同的错误。
*   其他图还好。
*   当我导航到[http://appname.com/assets/dir/image_name.png](http://appname.com/assets/dir/image_name.png)我可以很好地看到图像。

会是什么呢？我有兴趣解决这个问题，并在现在解决问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T17:39:46.727

在`config/environments/production/rb`：

```
config.assets.compile = true 
```

这不应该是必要的，但会创建一个备用计划 Rails 认为不存在这样的资产。目前尚不清楚为什么问题会首先发生。

# android - Google plus for android 错误访问令牌

> ID：14664065
> 
> 赞同：1
> 
> 时间：2013-02-02T16:40:22.200
> 
> 标签：android, api, google-plus, access-token

我一直在关注[入门](https://developers.google.com/+/mobile/android/getting-started)并[登录](https://developers.google.com/+/mobile/android/sign-in)以获取用户的 access_token。

我确实获得了访问令牌，但是在使用它时出现此错误：

```
{
 "error": {
  "errors": [
   {
    "domain": "global",
    "reason": "authError",
    "message": "Invalid Credentials",
    "locationType": "header",
    "location": "Authorization"
   }
  ],
  "code": 401,
  "message": "Invalid Credentials"
 }
} 
```

当我要去[apis-explorer](https://developers.google.com/apis-explorer/#p/plus/v1/plus.people.get)并使用他们的令牌时，它工作得很好。任何想法我错过了什么？

这就是我正在尝试的 URL。

[https://www.googleapis.com/plus/v1/people/me?key=](https://www.googleapis.com/plus/v1/people/me?key=) {my_api_key}&access_token=my_access_token

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T22:30:49.580

这些令牌有 1 小时的有效期。

# php - cookie 的值可以是数组吗？我可以将它作为数组传递吗？php?

> ID：14664067
> 
> 赞同：0
> 
> 时间：2013-02-02T16:40:38.133
> 
> 标签：php, arrays, cookies

我正在做这样的事情，它似乎不起作用！

```
<?php 
    //cookie for saving recently viewed products list
    //global $post;
    //echo $post->ID;
    if (!$_COOKIE['mediSHOPrecentlyViewedlist']) {
        setcookie("mediSHOPrecentlyViewedlist", $post->ID, strtotime('+6 days'), "/");
    } else {
        $cookie_value = htmlspecialchars($_COOKIE['mediSHOPrecentlyViewedlist']);
        $cookie_value = explode(",",$cookie_value);
        array_unshift($cookie_value, $post->ID);
        setcookie("mediSHOPrecentlyViewedlist", $cookie_value, strtotime('+6 days'), "/");

        print_r($cookie_value);
    }
?> 
```

$cookie_value 是一个数组。这可能吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-02T16:44:12.873

当然可以，但您应该考虑以下几点：

Cookie 旨在存储最少的数据，因为用户可以更改这些数据。在这里存储大量数据并不安全。您应该存储用户 ID、密码哈希和次要的重要内容，并让您的脚本处理其余的事情。

但是，如果你想存储数组，一个想法可能是`json_encode`存储之前的数据`json_decode`和抓取它时的内容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-02T16:43:13.640

[`serialize()`](http://us3.php.net/manual/en/function.serialize.php)数组：

```
array_unshift($cookie_value, $post->ID);
$cookie_value = serialize($cookie_value); 
```

然后读取它的值，[`unserialize()`](http://us3.php.net/manual/en/function.unserialize.php)它：

```
$cookie_value = unserialize($_COOKIE['mediSHOPrecentlyViewedlist']); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-02T16:45:38.570

你需要`serialize()`它和`unserialize()`它。

# ruby-on-rails - 如何重命名资源路线？

> ID：14664076
> 
> 赞同：0
> 
> 时间：2013-02-02T16:41:24.093
> 
> 标签：ruby-on-rails, resources, routes

如何重命名其中一些路由...例如，下面我想在我的控制器中使用 signup_path 而不是 signup_sessions_path ...

```
 resources :sessions, only: [] do
        collection do
          post    :signup, :as => :signup
          post    :login
          delete  :logout
        end
      end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-02T16:52:53.647

尽量不要将路由嵌套在 resources :sessions 下，而是使用 to: 选项，如下所示：

```
post :signup, to: 'sessions#signup', as: :signup, on: :collection 
```

不太确定你在那里的收藏，但我相信你明白它的要点

## 更新

根据您的评论，截至今天，我不知道有什么方法可以从嵌套资源路由的路径名中删除嵌套路由资源名。换句话说，任何嵌套都是故意使用资源的范围，因此除了将其从资源块中取出之外，没有其他选项可以恢复该行为。

# android - Android - 记事本作为数据库存储

> ID：14664086
> 
> 赞同：-1
> 
> 时间：2013-02-02T16:42:47.197
> 
> 标签：android, eclipse, sqlite, notepad

我得到了一个英语单词数据库，但它们位于 .txt 文件中。不是一个 sql 文件。我的教授告诉我，我可以将它用作我的字典应用程序的数据库，而不是使用 sqlite。

谁能告诉我如何访问记事本？

我需要将 inputWord 与记事本文件进行比较，如果找到，它将从记事本复制 inputWord 的定义并将其显示在屏幕上。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-02T17:00:38.910

记事本文件中存储了 UTF-8 文本字符串，您需要做的是读取整个文件，解析关键字及其定义，然后在列表中搜索任何关键字。一个伪代码如下所示：

```
FileInputStream fis = new FileInputStream("the_file_name");
BufferedReader br = new BufferedReader(new InputStreamReader(fis, Charset.forName("UTF-8")));
StringBuilder builder = new StringBuilder();
String line = null;
do  {
         line = br.readLine();
         builder.append(line);
 } while (line != null);
 parseFile(builder.toString);

 public void parseFile(String txt){
.......  code to parse the txt from file and pass it to variables to use in the comparison 
```

}

# javascript - 根据输入的字符数更改字体

> ID：14664090
> 
> 赞同：0
> 
> 时间：2013-02-02T16:43:22.140
> 
> 标签：javascript, html

如何根据输入的字符数在输入字段上使用 JavaScript 更改字体大小。例如，默认字体大小是 16px，但如果我添加超过 10 个字符，字体大小将变为 12px。

HTML：

```
<div class="phone-input">
    <input readonly="readonly" type="text" id="tocall" value=""> 
```

和CSS：

```
input#tocall {
    width: 145px;
    padding: 6px 3px;
    color: #424242;
    font-size: 16px;
    border: 1px solid rgb(224, 224, 224);
    font-weight: bold;
    letter-spacing: 0.1em;
} 
```

我不熟悉使用 JavaScript，所以请帮助我。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-02T17:01:02.077

您可以在下面的代码段中执行类似的操作，如果您只是离开`readonly`您的`input`，现在您无法在其中输入任何内容。

```
var input = document.getElementById('tocall');
input.addEventListener('keyup', function (e) {
    if (e.target.value.length > 10) {
        e.target.style.fontSize = '12px';
    } else {
        e.target.style.fontSize = '16px';
    }
    return;
}, false); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-02T16:49:30.443

像这样...

在 JavaScript 中，访问文本为

```
myInput = document.getElementById('tocall');
myText = myInput.value; 
```

然后找到文本的大小为

```
len = myText.length 
```

现在，检查此值并使用 CSS 更改字体大小。

```
if (len > 10) {
    myInput.style.fontSize = "10px";
} 
```

# apache - 将域上的所有请求重定向到特定 URL

> ID：14664094
> 
> 赞同：1
> 
> 时间：2013-02-02T16:43:32.277
> 
> 标签：apache, .htaccess, mod-rewrite, redirect

自从我使用 Apache 已经很长时间了（*很*长一段时间），即便如此，我并没有真正做太多的 URL 重写或类似的事情，只是简单的托管。但现在我正在尝试为重新命名为新域的小型企业拼凑一个简单的重定向。

它的设置方式是旧域的主机有一个基于 Web 控制面板的重定向到特定 URL，这是“寻找旧的我们？” 新域上的页面。所有请求都会被重定向，但它们会携带整个请求路径，这会在新站点上导致 404。

我一直在查看一些 Apache 文档和一些我可以在网上找到的示例，但我还没有完全做到。到目前为止我离开的地方是这样的：

```
RewriteCond %{REQUEST_URI} .*looking-for-blah.* [NC]
RewriteRule ^ http://newsite.com/looking-for-blah [L,R=301] 
```

这个想法是，任何对`looking-for-blah`包含`http://newsite.com/looking-for-blah`. 因此，当旧主机将某人重定向到：

```
http://newsite.com/looking-for-blah/foo/baz 
```

他们被新站点重定向到：

```
http://newsite.com/looking-for-blah 
```

但是，它似乎没有捕获传入的请求并重定向它们。我是否遗漏了一些基本概念`RewriteCond`？也许有更好的方法来做到这一点，我什至没有考虑过？

**编辑：**这是整个 .htaccess 的当前状态：

```
# BEGIN WordPress
<IfModule mod_rewrite.c>
RewriteEngine On
RewriteBase /
RewriteRule ^index\.php$ - [L]
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule . /index.php [L]
</IfModule>

# END WordPress
# BEGIN WordPress
<IfModule mod_rewrite.c>
RewriteEngine On
RewriteBase /
RewriteRule ^index\.php$ - [L]
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule . /index.php [L]
</IfModule>

# END WordPress

# BEGIN custom redirect
<IfModule mod_rewrite.c>
RewriteEngine On
RewriteRule looking-for-icamp http://empow.me/looking-for-icamp [L,R=301]
</IfModule>
# END icamp redirect 
```

但是做一个简单`wget`的`http://empow.me/looking-for-icamp/foo`结果是 404 而不是所需的 301。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-02T17:17:05.983

Wordpress 默认的包罗万象的路由在到达之前会匹配您的规则，因此您的规则需要放在任何 Wordpress 重写*之上。*我还添加了一个`RewriteCond`比你的`.+`技巧更明确地避免循环重写的方法，这对我来说似乎有点笨拙，并且在以后的阅读中很难理解。

```
<IfModule mod_rewrite.c>
RewriteEngine On
RewriteBase /

# BEGIN custom redirect

# This must take place before the Wordpress redirect to index.php
# Added condition to avoid circular rewrite
RewriteCond %{REQUEST_URI} !^/looking-for-icamp$ 
RewriteRule looking-for-icamp http://empow.me/looking-for-icamp [L,R=301]
# END icamp redirect

# Note - you had two identical WP blocks. I've removed one.

# BEGIN WordPress
RewriteRule ^index\.php$ - [L]
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d

# This rule was the one blocking your custom rule earlier....
RewriteRule . /index.php [L]

# END WordPress
</IfModule> 
```

# paradigms - 语言必须具备哪些属性才能支持递归？

> ID：14664098
> 
> 赞同：7
> 
> 时间：2013-02-02T15:16:09.813
> 
> 标签：paradigms

我正在研究递归，我遇到了这个问题：

```
FORTRAN implementations do not permit recursion because

a. they use static allocation for variables

b. they use dynamic allocation for variables

c. stacks are not available on all machines

d. it is not possible to implement recursion on all machines. 
```

我发现答案是（a）

但我想知道编程语言支持递归的所有特性。

有人可以解决我的疑问吗

提前致谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-05T16:21:52.640

函数或子程序中的局部变量（包括其返回地址）在被调用时应该是一个新的副本。

通常这是使用堆栈架构完成的。每当调用一个函数时，它的参数被压入堆栈，然后它的返回地址被压入，然后一块内存也被“压入”（通过将堆栈指针减少足够的量）。一个特殊的寄存器，“帧指针”被设置为指向该内存，并且该函数通过引用该寄存器来引用它的所有局部变量。

其他语言不使用物理硬件堆栈，而是使用链表实现的逻辑堆栈，但原理是一样的。

由于最初的 Fortrans 没有这个概念，并且将所有变量存储在固定的全局位置，因此递归调用会崩溃或挂起。例如，如果A调用B调用C调用B，那么B返回C，C返回B，C返回C，无限循环，因为B只能记住一个返回地址。

```
calls:  A -> B -> C -> B

returns:     B <- C <- B
             B -> C 
```

更重要的是，当第二次调用 B 时，第一次调用 B 的所有局部变量和参数都被破坏了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-01T19:44:23.593

提问者提出的多项选择题是一个误导性问题，因为虽然该语言的最古老版本缺乏递归支持，但 FORTRAN 语言的现代版本确实允许递归。

语言实现是否支持递归应该被视为语言方言定义功能的方式以及实现的一致性程度的问题。

# r - 如何在 R 中重新格式化条件密度图？

> ID：14664100
> 
> 赞同：0
> 
> 时间：2013-02-02T16:43:59.210
> 
> 标签：r, graphics, plot

以下可重现的示例创建了一个[条件密度图](http://stat.ethz.ch/R-manual/R-patched/library/graphics/html/cdplot.html)，描述了各个方面的变化。我在示例中包含了 NoData，因为我的原始数据集也包含 NoData。

```
aspect = c("N", "N", "E", "S", "SW", "SW", "E", "W", "N", "N")
change = c(-1, NA, 1, NA, 1, 1, -1, 1, -1, NA)
mydata = data.frame(aspect,change)

x = factor(mydata$change)

cdplot(x~mydata$aspect) 
```

![在此处输入图像描述](../Images/657d7a2b7308c9a852319b79e0839951.png)

相关问题：

*   如何将 X 轴上的数值替换为相关的文本值（例如 N、SW 等）？
*   是否可以控制 X 轴上文本值的顺序？我相信，默认情况下，X 轴上的值对应于“方面”中按字母顺序排列的文本值。
*   如何将 X 轴上的“NA”替换为“No Change”？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-02T18:25:05.223

只是为了显示@Roland 在评论中所说的内容，您以错误的方式使用了该功能。

```
aspect = c("N", "N", "E", "S", "SW", "SW", "E", "W", "N", "N")
change = sample(rep(c(-1,1,NA), each = 100),100,replace=T)
mydata = data.frame(aspect,change,stringsAsFactors=T)
str(mydata)
'data.frame':   100 obs. of  2 variables:
 $aspect: Factor
$change: num 
h <- cdplot(aspect~change, data = mydata) 
```

![在此处输入图像描述](../Images/ac0d4d56792dc56bc5ec52eea8654980.png)

现在 h 包含方面水平上的条件密度函数。

```
str(h)
List of 4
 $ E :function (v)  
 $ N :function (v)  
 $ S :function (v)  
 $ SW:function (v) 
```

例如

```
h$E(-Inf)
[1] 0.21875
h$E(Inf)
[1] 0.25 
```

# java - AppEngine 将我的 POST 请求处理为 GET

> ID：14664108
> 
> 赞同：0
> 
> 时间：2013-02-02T16:45:21.767
> 
> 标签：java, google-app-engine, servlets, post, web.xml

我遇到了一个奇怪的东西，我已经为此苦苦挣扎了一段时间。Google AppEngine 将我的 POST 请求作为 GET 处理。我尝试了 3 个不同的 REST 客户端，它们产生了相同的错误（一个 html 文档说 GET 不适用于指定的 URL；但看在上帝的份上，我发送了一个 POST！）。我正在使用 Java，并且我已经正确设置了 web.xml 文件。请注意，这不是项目中第一个响应 POST 的 servlet，其他的 servlet 都正常工作。更复杂的是，当我在本地开发 appengine 服务器上运行应用程序时，这个相同的 servlet 会正常响应 POST。我已经多次清理和重建项目，甚至更改了 servlet 的 URL，但问题仍然存在。有什么帮助吗？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-02T23:32:19.543

最常见的原因是您的 POST 由于某种原因被重定向，并且重定向始终是 GET。日志控制台说什么？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-31T18:03:43.923

我使用的是非安全 url，它将 POST 重定向到 GET。使用 https 解决了这个问题。

# monotouch.dialog - 如何设置 RootElement 样式

> ID：14664111
> 
> 赞同：1
> 
> 时间：2013-02-02T16:45:36.267
> 
> 标签：monotouch.dialog

我需要一种设置 Monotouch Dialogs RootElement 样式的方法。我需要更改背景和字体颜色。

我已经创建了一个自定义 RootElement 如下

```
public class ActivityRootElement : RootElement
{
    public ActivityRootElement (string caption) : base (caption)
    {

    }

    public ActivityRootElement(string caption, Func<RootElement, UIViewController> createOnSelected) : base (caption, createOnSelected)
    {
    }

    public ActivityRootElement(string caption, int section, int element) : base (caption, section, element)
    {
    }

    public ActivityRootElement(string caption, Group group) : base (caption, group)
    {
    }

    public override UITableViewCell GetCell (UITableView tv)
    {
        tv.BackgroundColor = Settings.RootBackgroundColour;
        return base.GetCell (tv);
    }

    protected override void PrepareDialogViewController(UIViewController dvc)
    {
        dvc.View.BackgroundColor =  Settings.RootBackgroundColour;
        base.PrepareDialogViewController(dvc);
    }

} 
```

然后我调用自定义根元素，如下所示传入自定义 DialogController

```
 section.Add (new ActivityRootElement(activity.Name, (RootElement e) => {
                return new ActivityHistoryDialogViewController (e,true);
            })); 
```

未应用根元素样式。任何帮助将不胜感激！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T17:34:14.863

如果您希望颜色是您在 TableViewController 中看到的唯一内容，则需要将 BackgrounView 设置为 null。顶部有一个视图来应用样式，它将隐藏您正在寻找的颜色。

尝试这个：

```
public override UITableViewCell GetCell (UITableView tv)
{
    tv.BackgroundColor = Settings.RootBackgroundColour;
    tv.BackgroundView = null;
    return base.GetCell (tv);
}

protected override void PrepareDialogViewController(UIViewController dvc)
{
    dvc.TableView.BackgroundColor =  Settings.RootBackgroundColour;
    dvc.TableView.BackgroundView = null;
    base.PrepareDialogViewController(dvc);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-19T22:02:12.100

为了让它工作，我必须重写该`MakeViewController`方法并将通常返回的 UIViewController 转换为 UITableViewController，然后进行编辑。

```
protected override UIViewController MakeViewController()
{
    var vc = (UITableViewController) base.MakeViewController();

    vc.TableView.BackgroundView = null;
    vc.View.BackgroundColor = UIColor.Red; //or whatever color you like
    return vc;
} 
```

# box2d - box2d 从另一个幻灯片体

> ID：14664115
> 
> 赞同：0
> 
> 时间：2013-02-02T16:46:07.420
> 
> 标签：box2d

我正在尝试连接两个主体，允许一个从另一个滑动，这里的插图：

![在此处输入图像描述](../Images/767b94d64fce5e5bdc10bdde4865c041.png)

如你所见，橙色的身体可以左右滑动到一定的极限（初始状态和最终状态）

这是此类“功能”的真实示例-起重机臂：

![在此处输入图像描述](../Images/16d3e5541b70acd3c1c96733489137eb.png)

手臂彼此滑动，延伸整个手臂长度。

将不胜感激的想法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-02T17:22:36.757

为此目的有[棱柱接头。](https://www.iforce2d.net/b2dtut/joints-prismatic)

# apache - Apache 缓存 url，RewriteEngine 导致问题

> ID：14664117
> 
> 赞同：0
> 
> 时间：2013-02-02T16:46:26.093
> 
> 标签：apache, mod-rewrite

我正在尝试 Apache Rewrite Engine，但遇到了问题，因为它缓存了它的响应。现在，如果我更改文件，它不会按照文件中的说明执行操作，而是执行我之前尝试相同 url 时执行的操作。

例如，我尝试输入

```
localhost/api 
```

但我还没有制定与之匹配的规则。服务器给了我一个 404 错误。我试图添加一个适用于这个 url 的规则：

```
RewriteRule api/? api.php [L] 
```

但它仍然给了我同样的错误。如果我尝试添加规则之前没有输入的 localhost/lapi 之类的地址，它会起作用。有没有办法清除这个缓存并重新启动？我尝试使用重新启动apache `apachectl -k restart`，`apachectl -k graceful`但我仍然遇到同样的问题。有谁知道如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-03T00:01:32.057

首先，根据您的规则的上下文，您可能需要一个前导斜杠，如下所示：

`RewriteRule api/? /api.php [L]`

关于缓存，你启用了[mod_cache吗？](http://httpd.apache.org/docs/2.2/mod/mod_cache.html)如果是这样，请禁用它并重新启动服务器。mod_rewrite 自己不做任何缓存。还要确保完全清除浏览器缓存，并注意如果您没有通过同一本地网络访问服务器，则可能会在此过程中发生其他缓存。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-19T14:01:05.063

此问题也可能是由该`MultiViews`选项引起的，请参阅[Apache doc](http://httpd.apache.org/docs/current/content-negotiation.html#multiviews)。尝试省略或添加`Option MultiViews`到.`httpd.conf``Options -MultiViews``.htaccess`

（该`MultiViews`选项使 Apache 能够根据 HTTP 请求中存在的文件扩展名和内容偏好（即您可能不希望发生的事情）在文件的多个版本之间自动选择。它可能导致这种奇怪的失败当重写规则只是删除脚本的扩展名时。）

# javascript - 将 GeoIP City 插入 html 表单

> ID：14664124
> 
> 赞同：2
> 
> 时间：2013-02-02T16:47:01.473
> 
> 标签：javascript

搜索并找不到有关此问题的答案。我不是一个编码员，对javascript知之甚少。希望这里有人可以帮助我。我需要获取用户的 geoip 城市，然后将其作为值插入到表单中。我有这个用于获取 geoip 城市的脚本......

```
<script src="http://j.maxmind.com/app/geoip.js"></script>
<script type="text/javascript">document.write(geoip_city());</script> 
```

我需要将那个城市放入表格的价值部分

关于如何做到这一点的任何想法？

表格看起来像这样...

```
<input type="hidden" name="custom_City" id="city" value="NEED CITY IN HERE"></input> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-02T17:19:21.047

*标记后*使用此脚本：

```
document.getElementById("city").value = geoip_city(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-20T13:18:32.573

您给出了错误的实时 js 路径，它应该像 [http://js.maxmind.com/js/geoip.js](http://js.maxmind.com/js/geoip.js)

# java - 重构后 Git 是否足够智能以进行合并

> ID：14664128
> 
> 赞同：1
> 
> 时间：2013-02-02T16:48:31.903
> 
> 标签：java, git

## 假设我有一堂课。

```
package org.my.domain;

public class BestClassEver{} 
```

* * *

## 我的工作流程

**通过一些重构，我改变了这个类的包。**

```
package org.another.domain;

public class BestClassEver{} 
```

**我使用 git 将其提交到本地存储库并将其推送到远程存储库。**

```
git add .
git commit -m "Refactoring"
git push origin master 
```

* * *

## 另一个开发人员的工作流程

**另一位开发人员修改了该类，而没有拉动我的更改。**

```
package org.my.domain;

public class BestClassEver{
    private String something;
} 
```

**然后提交并推送到远程存储库**

```
git add .
git commit -m "Some Changes"
git push origin master 
```

* * *

## 问题

1.  Git 会将其他开发人员的更改合并到类中吗？
2.  如果没有，会发生什么？
3.  这个工作流程是否需要在团队之间进行协调？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-02T16:51:44.187

1.  Git 不允许其他开发人员在没有拉取的情况下推送他的更改。

它将抛出两个 ref 不匹配的错误，因此需要使用远程 ref 更新他的本地分支。

这几乎就是所有关于它的知识。如果远程仓库有变化，除非你强制推送，否则如果远程有变化，git 将不允许你推送变化。

**编辑**

一旦他拉出，如果文件中有任何冲突，开发人员将不得不纠正任何冲突，提交它们，然后他才能推送。

如果没有冲突，git 将自动合并这些更改，开发人员将能够在拉取后推送。

**再次编辑**

我没有意识到你正在移动文件。在任何情况下，运行`git status`都会让您了解拉取后本地存储库的状态。如果有任何冲突，您可以更正它们。

**笔记**

On `git rebase`or`git pull --rebase`通常用于为您提供更清晰的提交历史记录，因为它们几乎会将任何本地更改应用到已拉出的任何其他更改之上。

另一方面，`git pull`通常`git merge`会进行额外的提交以链接分支上的更改。

有关更多信息，请查看本指南[Git Rebasing](http://git-scm.com/book/en/Git-Branching-Rebasing)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-02T16:55:26.120

让人们处理程序的不同部分总是一个好主意。

在这种情况下合并或变基应该是全自动的，但在现实世界中它总是有点戏剧性，有时会出现一些冲突。当然，这种合并/变基将在服务器拒绝推送蜜蜂非快进后完成。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-02T17:10:54.087

当这样的事情失败时，一些解决方法包括：

1.  只需在合并之前在另一个分支中重复“重构”；
2.  将工作转换为补丁（`git format-patch`），编辑补丁（将“重构”应用到它）并应用编辑后的补丁（`git am`）。这就像手动变基。

我认为最好将合并复杂的重构（例如，涉及重命名的重构）和通常的次要重构分开。

有时，对于合并复杂的重构，可以编写脚本（例如`find -name '*.c' -exec sed 's/something/anything/g' -i '{}' ';'`）。该脚本用于在需要时在不同的地方多次重复重构，从而避免将重构的代码与未重构的代码合并。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-04-13T22:16:03.023

是的。Git 能够识别这些更改。我正在我自己的 fork 上使用 git 进行一个项目（从起源分叉）。与此同时，另一位开发人员在原始分叉上重构了代码库，其中包括更改包结构。

我使用了以下命令：

*   git stash save // 这会将您的所有工作保存到个人存储中
*   git pull // 获取主分支上的所有最新更改并合并
*   git stash apply stash@{0} // 或者任何你保存个人工作的 stash

现在您将拥有重构的代码库+您的更改。您现在可以提交而不会发生任何冲突，并且包装不会更改。

请注意，在我的情况下，我等待原始分叉被重构，然后我提交了我的更改，这些更改只是对少数文件的更改，而不是重新打包。

另请注意，如果您添加了新文件，则可能需要编辑一些导入以确保导入正确。例如。导入 org.my.domain；现在应该编辑为：import org.another.domain；

# android - 无论如何要从 JSON 中检索或映射数据以在不遍历 JSONArray 的情况下进行访问？

> ID：14664132
> 
> 赞同：0
> 
> 时间：2013-02-02T16:49:08.770
> 
> 标签：android, arrays, json

我在具有以下条目的 Android 应用程序中有一个 JSONArray，例如，

```
[start : 0.100 ,  stop : 2.312]
[start : 2.313 ,  stop : 4.565]  
[start : 4.566 ,  stop : 7.898]
...
...
...
[start 85.123 ,   stop : 97.659] 
```

现在给一个值= 86.235，我想得到这个数字大于和小于的索引

开始 <= 值 <= 停止

每次我想查找条目时都不需要遍历整个数组？这是否可以通过将其映射到不同的数据结构来实现，或者我是否每次都必须遍历数组以找出数组中的哪个项目大于和小于？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-02T16:57:51.127

如果是排序的。最快的是二分搜索。符合要求的

> 每次我想查找条目时都不需要遍历整个数组？

由于 O (logn) < n 。

# raspberry-pi - 树莓派运动网络摄像头“数据过早结束”

> ID：14664138
> 
> 赞同：4
> 
> 时间：2013-02-02T16:50:06.413
> 
> 标签：raspberry-pi, motion

我正在尝试让我的网络摄像头在树莓派上运行。我正在为笔记本电脑使用 logictech quickcam。通过 lsusb 我看到设备已连接。当我开始运动时，我收到此错误“损坏的 JPEG 数据：数据段的过早结束”。我也尝试了 fswebcam，但我只是从中得到黑色图片。有什么建议吗？（我应该使用其他程序/不适用于覆盆子吗？）

提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-19T21:51:29.203

我的老式 Logitech QuickCam Express 也有问题，但问题不同。首先确保您至少有一个场景可以让您的网络摄像头正常工作。你问过其他程序。试试例如

```
mplayer tv:// 
```

或者

```
cheese 
```

或者

```
guvcview 
```

从您的 X 桌面。我收到错误，表明 video4linux v2 不支持我的 cam，只有 v1，我必须添加

```
LD_PRELOAD=/usr/lib/arm-linux-gnueabihf/libv4l/v4l1compat.so 
```

在启动失败的命令之前。（我在[http://ubuntuforums.org/showthread.php?t=1476423 找到它。](http://ubuntuforums.org/showthread.php?t=1476423.)）但是，我再次没有遇到与您相同的错误（我的错误是调色板格式）。但不同的网络摄像头可能会引发不同的症状，即使问题的根源相同或相似。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-20T22:55:26.383

我不确定您是否还需要这方面的帮助。我发现：A）使用经过验证的 Pi 外围设备列表是第一个关键：我有一个糟糕的无名网络摄像头，它就是无法工作。我最终使用了 Microsoft HD3000。

B) 有源 USB 集线器是必要的，并且解决了很多问题。

在默认的 motion.conf 文件中，您会注意到默认分辨率类似于 352x288。它确实以 640 运行，但给小 pi 带来了很大的负担。最后，我将分辨率调回默认值，直到其他所有部分都正常工作，然后在我准备好坐下来拍摄视频时将其调高。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-02T23:52:32.343

我用我便宜的网络摄像头就有了。当我选择要捕获的不同图像尺寸时，错误消失了。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-13T15:34:48.773

如果您还没有这样做，我建议您浏览[Raspberry Pi 论坛](http://www.raspberrypi.org/phpBB3/index.php)。许多其他人以前曾为此苦苦挣扎。从尽可能小的分辨率开始，并尝试不同的调色板。也可能是您正在运行 USB 相关问题（请参阅链接论坛中的 USB redux 线程以进行进一步讨论）。确保拥有最新的固件。

# c# - 在 WinForm 应用程序 C# 中使用 Request.QueryString

> ID：14664142
> 
> 赞同：1
> 
> 时间：2013-02-02T16:50:42.873
> 
> 标签：c#, httpwebrequest

如何`Request.QueryString`在 winform 中使用我的代码是 c# 我知道`HttpContext.Current.Request.QueryString`这是一个解决方案，但我无法理解我的示例是

```
OAuthTokenResponse accessTokenResponse = OAuthUtility.GetAccessToken(consumerKey, consumerSecret, Request.QueryString["oauth_token"],Request.QueryString["oauth_verifier"]); 
```

# python - python 等高线图

> ID：14664143
> 
> 赞同：0
> 
> 时间：2013-02-02T16:50:58.703
> 
> 标签：python, matplotlib

我有一个看起来像这样的文件：

```
1237665126927237227 7.49126127875 1500 7.0
1237665126927237227 6.64062342139 1750 7.0
1237665126927237227 5.79903397289 2000 7.0
1237665126927237227 7.24807646775 1500 7.5
1237665126927237227 6.51250095795 1750 7.5
1237665126927237227 5.74908888515 2000 7.5
1237665126927237227 6.91915170741 1500 8.0
1237665126927237227 6.29638684709 1750 8.0
1237665126927237227 5.62891381033 2000 8.0
1237665126927237227 6.54437390102 1500 8.5
1237665126927237227 5.98359412299 1750 8.5
1237665126927237227 5.43512459898 2000 8.5 
```

ETC

我需要创建一个以`3rd`列作为`x`轴，以`4th`列作为`y`轴的图，以`2nd`列作为其上的轮廓，等高线在`1,2,3,4`等等。

我正在尝试做一些类似的事情，

```
from pylab import *

ChiTable= np.loadtxt('ChiTableSingle.txt')

xlist = linspace(ChiTable[2]) 
ylist = linspace(ChiTable[3]) 
X, Y = meshgrid (xlist, ylist)

Z =partsChi[1] 

figure()
CP1 = contour(X, Y, Z)
clabel(CP1, inline=True, fontsize=10)

pl.show() 
```

但我只是让自己完全被这一切弄糊涂了。我收到一个错误，说 z 输入需要是一个 2d 数组，我可以理解为什么我将 X,Y 变成了一个 2d 数组，而 z 需要是与之匹配的值，但我不知道 id 是怎么回事那。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-02T16:55:25.123

你需要`reshape`你的数据，而不是使用`meshgrid`.

就像是：

```
xdim = 3
ydim = 3
X = np.asarray(ChiTable[2]).reshape((xdim, ydim))
Y = np.asarray(ChiTable[3]).reshape((xdim, ydim))
Z = np.asarray(ChiTable[1]).reshape((xdim, ydim))

contour(X, Y, Z) 
```

`meshgrid`接收两个一维数组并返回它们的交叉，将元素总数`reshape`的数组更改为元素数相同但形状不同的数组。`N`

# ruby-on-rails - Ruby on rails 默认日期格式

> ID：14664144
> 
> 赞同：0
> 
> 时间：2013-02-02T16:51:01.823
> 
> 标签：ruby-on-rails

是否可以创建一列或更改一列以使用默认格式键入日期？就像是：

```
def change
    change_column :mytable, :mydate, :date [:default]="%d/%m/%Y"
end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T16:59:36.720

据我所知没有。但是你到底为什么要这样做呢？

Rails 会提取一个日期并自动将其设为日期/时间（根据您的列类型）对象。如果您需要以不同的方式显示您的日期，我强烈建议您使用 strftime，如下所示：

```
@foo.created_at.strftime('%F') 
```

以下是不同选项的列表：[http ://www.ruby-doc.org/core-1.9.3/Time.html#method-i-strftime](http://www.ruby-doc.org/core-1.9.3/Time.html#method-i-strftime)

## 更新

在 Draper 中使用装饰器：[https ://github.com/drapergem/draper](https://github.com/drapergem/draper)

我建议重命名该方法，但现在如果您不想这样做，可以简单地覆盖它：

```
# app/decorators/article_decorator.rb
class ArticleDecorator < Draper::Decorator
  delegate_all

  def published_at
    source.published_at.strftime("%A, %B %e")
  end
end 
```

你会喜欢这样：

```
@article.decorate.published_at 
```

在默认状态下，返回的日期不会被格式化，这很好。

如果你必须这样做`where("date.strftime('%d/%m/%Y') >= ?",fdate`，那你就做错了。再次，坚持默认格式。

# c - libgcrypt 安全内存

> ID：14664147
> 
> 赞同：0
> 
> 时间：2013-02-02T16:51:11.573
> 
> 标签：c, cryptography, libgcrypt

从 libgcrypt 手册：

> Libgcrypt 使用称为安全内存的概念，它是为存储敏感数据而预留的内存区域。因为这样的内存是稀缺资源，所以需要提前设置为固定大小。此外，大多数操作系统对如何使用安全内存都有特殊要求。例如，可能需要将应用程序安装为“setuid(root)”以允许分配此类内存。[...] 如果您必须保护您的密钥或内存中的其他信息不被换出到磁盘并启用自动覆盖已使用和释放的内存，您需要 [...]

我对这种安全内存的工作方式有点困惑。
我正在开发一个执行 aes256-cbc 文件加密的软件，它还计算 IV+CIPHERTEXT 的 MAC（带有 sha512 的 hmac），所以我**必须使用**安全内存来存储敏感信息。
我对“安全内存”的概念不了解的是：

1.  假设我有这个：`unsigned char *key; key = malloc(32);`。库如何知道该变量希望安全内存被“分配”？
2.  *“释放内存的自动覆盖”*意味着`free(key)`将被删除，所以我不需要在释放指针之前对内存进行 memset 吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-02T20:07:20.453

继续阅读您复制和粘贴的同一页面：[http ://www.gnupg.org/documentation/manuals/gcrypt/Initializing-the-library.html](http://www.gnupg.org/documentation/manuals/gcrypt/Initializing-the-library.html)

有关于如何初始化库的示例。

一般来说，安全内存是用 mlock 锁定的，所以它不能被调出。

该库当然不知道您程序的其他地方的 malloc 调用，请查看其文档以了解如何使用它。

# c++ - QPlainTextEdit - 它可以包含多少行？

> ID：14664148
> 
> 赞同：0
> 
> 时间：2013-02-02T16:51:22.713
> 
> 标签：c++, qt, qt4, qplaintextedit

是否可以在溢出并显示垂直滚动条之前以某种方式计算适合 QPlainTextEdit 控件（具有一定大小）的行数？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T22:11:24.060

获取盒子的高度和宽度然后计算它呢？您可以（手动）尝试为此找到一些合理的数字 - 取决于字体格式。

# .net - 如何开始使用温莎城堡？

> ID：14664152
> 
> 赞同：19
> 
> 时间：2013-02-02T16:51:45.300
> 
> 标签：.net, castle-windsor

我对 IoC/windsor 完全陌生。我从谷歌开始学习它，但不幸的是，我没有合适的文档来让我更容易理解。所以我带着这样的标题/问题来到这里。

每个文档/页面（网络），开始类似这样的东西

> “我们应该从注册类/接口开始，然后解决它......”

但没有一个页面显示有关如何实现这一目标的完整文档，我也尝试制作一个简单的项目，但我未能运行它。我不知道如何解析容器，在哪里/如何调用 install()，我完全搞砸了。

任何人都可以帮助我提供一个包含注册/安装完整演示的示例项目吗？

提前致谢 ：）

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-02-02T21:04:31.480

[Mark Seemann 的 .NET 中的 Dependency Injection](http://www.amazon.ca/Dependency-Injection-NET-Mark-Seemann/dp/1935182501)一书也是一个很好的起点。写得很好，专门有一章关于温莎城堡。

他们也有一些[关于代码项目的很好的教程](http://www.codeproject.com/Articles/9055/Castle-s-DynamicProxy-for-NET)，我以前用过：

**更新**

好吧，最简单的教程如下：

1）在VS2010中创建新的控制台应用程序

2）右击“References”，选择“Manage NuGet Packages”，安装Castle.Windsor

3) 对 Program.cs 使用以下代码：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using Castle.MicroKernel.Registration;
using Castle.Windsor;

namespace ExploringCastleWindsor
{
    internal class Program
    {
        interface ILogger
        {
            void Log(string message);
        }

        class Logger : ILogger
        {
            public void Log(string message)
            {
                Console.WriteLine(message);
            }
        }

        static void Main(string[] args)
        {
            // Registering
            var container = new WindsorContainer();
            container.Register(Component.For<ILogger>().ImplementedBy<Logger>());
            // Resolving
            var logger = container.Resolve<ILogger>();
            logger.Log("Hello World!");
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-03-07T18:02:26.327

如果您正在寻找教程，请查看此[链接](https://www.codeproject.com/Articles/543810/Dependency-Injection-and-Unit-Of-Work-using-Castle)

它在一个示例中解释了 CastleWindsor、Nhibernate 和 UnitOfWork。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-06-17T14:27:19.857

您也可以使用添加温莎城堡

工具 --> NuGet 包管理器 --> 包管理器控制台。

而不仅仅是输入**Install-Package Castle.Windsor**

完成组装后，您就可以开始使用代码了。**Sebastian K**提供了一个很好的工作代码示例。

# java - 现实世界的用户代理——它们是什么？如何设置它们？- 爪哇

> ID：14664156
> 
> 赞同：3
> 
> 时间：2013-02-02T16:52:07.873
> 
> 标签：java, url

我正在使用这条线在我的 java 程序中打开一个流，但我认为由于我的真实世界用户代理，我被阻止了。

```
private InputStream is = new URL(a).openStream(); 
```

其中 a 是包含 url 的字符串。

我可以设置用户代理的最简单方法是什么？我才刚刚了解它们，所以任何进一步的信息将不胜感激。例如：我想将其设置为 Mozilla/5.0。我需要添加任何进一步的信息吗？如果是这样，应该包括什么以及如何？另外，这是否严格允许，因为我是否应该担心有关设置用户代理的任何法律问题？抱歉，如果这个问题没有意义，那只是因为我对用户代理（基本上是程序发送它们）并不了解，而且我不确定您是否必须注册或其他什么 - 我已经看到我 Mac 上的 Safari 添加： Mozilla/5.0 (Macintosh; Intel Mac OS X 10_8_2) AppleWebKit/536.26.17 (KHTML, like Gecko) 版本/6.0.2 Safari/536.26.17

谢谢

Ps 我已经阅读了一个类似的问题，但我对答案的理解并不多——我是一名 java 初学者，才刚刚开始尝试打开文件和 url 的流。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-02T16:58:03.007

> 我可以设置用户代理的最简单方法是什么？

```
URLConnection urlConnection = new URL(a).openConnection();
urlConnection.addRequestProperty("User-Agent", "Mozilla/5.0");
InputStream is = urlConnection.getInputStream(); 
```

> 我想将其设置为 Mozilla/5.0。我需要添加任何进一步的信息吗？

您可以将其设置为任何您想要的。识别您的应用程序实际上是一个好主意，否则所有 Java 程序都会简单地发送：

```
User-Agent: Java/1.7.0_11 
```

> 另外，这是否严格允许，因为我是否应该担心有关设置用户代理的任何法律问题？

不，您可以随意使用任何用户代理。此外，伪造用户代理并不*违法。*但是，如果一个网站基于 做出任何决定（尤其是关于安全性）`User-Agent`，那将是非常糟糕的，因为它几乎是非法的；-)（请参阅：[Java - Not getting html code from a URL](https://stackoverflow.com/questions/8142039)）。

# objective-c - NSFetchedResultsController -> 如何实现部分？

> ID：14664158
> 
> 赞同：1
> 
> 时间：2013-02-02T16:52:17.897
> 
> 标签：objective-c, xcode, uitableview, sections, nsfetchedresultscontroller

我无法让 NSFetchedResultsController 的部分正常工作。我有一个实体，比如“Employee”和一个字符串属性，比如“name”。现在我想使用 NSFetchedResultsController 在 UITableView 中显示所有员工的姓名......没问题，这是我的代码：

```
if (_fetchedResultsController == nil) {

    NSManagedObjectContext *moc = [appDelegate managedObjectContext];

    NSFetchRequest *request = [NSFetchRequest new];
    NSEntityDescription *entity = [NSEntityDescription entityForName:@"Employee" inManagedObjectContext:moc];
    NSSortDescriptor *sortDescriptor = [NSSortDescriptor sortDescriptorWithKey:@"name" ascending:YES];

    [request setEntity:entity];
    [request setSortDescriptors:[NSArray arrayWithObject:sortDescriptor]];

    _fetchedResultsController = [[NSFetchedResultsController alloc] initWithFetchRequest:request managedObjectContext:moc sectionNameKeyPath:@"name" cacheName:@"root"];

    NSError *error;
    [_fetchedResultsController performFetch:&error];

    if (error != nil) {
        NSLog(@"Error: %@", error.localizedDescription);
    }
} 
```

但是 NSFetchedResultsController 为每个实体创建一个部分。所以当我有 200 名员工时，它会创建 200 个部分。为什么？

以及如何正确实施这些方法：

```
- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView
{
    // Return the number of sections.
   return [[_fetchedResultsController sections] count];
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
     // Return the number of rows in the section.
     return [[[_fetchedResultsController sections] objectAtIndex:section] numberOfObjects];
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"Cell";
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if (cell == nil) {
         cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];
    }

    // Configure the cell...

    cell.textLabel.text = [[_fetchedResultsController objectAtIndexPath:indexPath] valueForKey:@"name"];

    return cell;
} 
```

我可以把整个概念理解错吗？[_fetchedResultsController section] 和 [_fetchedResultsController sectionIndexTitles] 的区别在哪里？

我希望你能帮助我，并提前感谢！

编辑：我忘了告诉你最重要的事情：我想让部分由“名称”属性的第一个字母分隔。（如音乐应用程序）。

缺口

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T17:09:10.923

在初始化你的 NSFetchedResultsController 时`nil`作为你的传递。`sectionNameKeyPath`

如果您通过`name`，您基本上会说“请为每个名称创建一个部分”。通过时`nil`，您告诉它只创建一个部分。

您的 tableview 方法实现对我来说很合适。

`[_fetchedResultsController sections]`为您提供一个包含对象的数组，您可以询问诸如某个部分中的对象数量之类的内容。相比之下，`[_fetchedResultsController sectionIndexTitles]`主要是这样您就可以知道`NSFetchedResultsController`要使用哪个节标题（即，您可以将其设置为一个数组，每个节都有一个字符串）。在你的情况下，你可以忽略它。

# properties - JUnit 的 Buildr JVM 属性设置在 JVM 内部而不是外部

> ID：14664159
> 
> 赞同：0
> 
> 时间：2013-02-02T16:52:18.973
> 
> 标签：properties, junit, jvm, buildr

使用 JUnit 时，我们将用于记录的目录作为 JVM 属性传递。这在命令行和 Eclipse 中运行良好。但是，当我们将相同的属性传递给 Buildr 测试任务时，它就不起作用了。

```
test.using :properties => { :"server.name" => "tester", :"log.dir" => log_dir} 
```

我们知道为什么会发生这种情况。该属性是从 JVM 内部而不是外部设置的。这意味着在运行时（加载静态日志记录类时）该属性尚未设置。如果我们稍后查询该属性（例如在单元测试中），那么我们会看到它设置正确。

有谁知道解决方法？

顺便说一句，我们使用的是 log4J，但这个问题适用于任何需要访问 Buildr 设置的 JVM 属性的静态类。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T17:44:11.687

假设您使用的是 JUnit，您可以通过以下方式确保测试在分叉的 JVM 中运行

```
test.using :fork => :once 
```

但是我认为这是默认行为？你是否以某种方式覆盖它？（见 [http://buildr.apache.org/languages.html](http://buildr.apache.org/languages.html)）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-09T10:37:37.977

此[代码](https://github.com/tofferoma/l4j-buildr-properties)在 log4j.properties 文件中定义 log.dir 并将其设置在 buildfile 通过

```
test.using :properties => { :"log.dir" => '/tmp'} 
```

我的设置是

*   建造者 1.4.7
*   红宝石 1.9.3

hth

# python - 为什么没有单元测试正在运行？

> ID：14664163
> 
> 赞同：0
> 
> 时间：2013-02-02T16:52:33.053
> 
> 标签：python, unit-testing

我创建了一些单元测试，但它们没有运行。为什么会这样。

```
 if __name__ == '__main__':
        import unittest
        unittest.main()

class TestInversion(unittest.TestCase):

    def setUp(self):
        pass

    def test_1(self):
        self.assertEqual(1, 2)

    def test_2(self):
        self.assertEqual(2, 2)

    def test_3(self):
        self.assertEqual(3, 3)

    def test_4(self):
        self.assertEqual(4, 4) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-02T16:54:51.323

您可能想要移动：

```
if __name__ == '__main__':
    unittest.main() 
```

到班级下面。

`import unittest`正如 Martijn Pieters 指出的那样，需要保持领先地位。

这是因为python解释器是`unittest.main()`先执行然后再解析类。（因为这是您编写代码的顺序。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-02T16:54:59.160

将`if __name__`测试移动到底部（将`import unittest`部分留在顶部）：

```
import unittest

class TestInversion(unittest.TestCase):

    def setUp(self):
        pass

    def test_1(self):
        self.assertEqual(1, 2)

    def test_2(self):
        self.assertEqual(2, 2)

    def test_3(self):
        self.assertEqual(3, 3)

    def test_4(self):
        self.assertEqual(4, 4)

if __name__ == '__main__':
    unittest.main() 
```

然后它会工作：

```
$ python test.py 
F...
======================================================================
FAIL: test_1 (__main__.TestInversion)
----------------------------------------------------------------------
Traceback (most recent call last):
  File "test.py", line 9, in test_1
    self.assertEqual(1, 2)
AssertionError: 1 != 2

----------------------------------------------------------------------
Ran 4 tests in 0.000s

FAILED (failures=1) 
```

在`main()`执行的时候，你需要定义你的测试用例；如果您`main()`在顶部调用，则*尚未*定义任何测试。

# ios - 使用带有数组的 NSDictionary 创建 JSON 文件

> ID：14664165
> 
> 赞同：1
> 
> 时间：2013-02-02T16:52:57.180
> 
> 标签：json, nsdictionary, ios, objective-c, arrays, json, nsdictionary

我正在尝试创建[json](/questions/tagged/json "显示标记为“json”的问题")数据以通过 HTTP POST 请求发送到服务器。[服务器](http://www.mandrill.com)只会接受特定格式的 JSON，否则会返回错误。我可以成功创建 JSON 文件并将其上传到服务器，但是我收到以下错误，因为我没有错误地格式化我的 JSON：

```
JSON Error Message: {
    code = "-2";
    message = "Validation error: {\"message\":{\"to\":[\"Please enter an array\"]}}";
    name = ValidationError;
    status = error;
} 
```

如您所见，服务器需要具有值和键数组的复杂 JSON 格式，但我不知道该怎么做。以下是我当前创建 JSON 数据的代码：

```
//Create Array With TO Values
NSDictionary *toField = @{@"email" : emailField.text};
//Create Dictionary Values                
NSDictionary *messageContent = @{@"subject" : @"APPNAME Registration Complete", @"from_email" : @"email@domain.com", @"to" : toField};
NSDictionary *mandrillValues = @{@"key" : @"APPKEY",
                                 @"redirect_url" : @"PRIVATE-URL",
                                 @"template_name" : @"app-registration",
                                 @"template_content" : [NSNull null],
                                 @"message" : messageContent
                                };

NSData* jsonData = [NSJSONSerialization dataWithJSONObject:mandrillValues options:NSJSONWritingPrettyPrinted error:nil]; 
```

根据服务器，我需要一个包含键和值的数组，类似于[nsdictionary](/questions/tagged/nsdictionary "显示标记为“字典”的问题")。**但是，当我使用 NSArray 时，我无法添加值/键。关于我应该如何做这件事的任何想法？**下面是服务器将接受[的 JSON 格式的示例](https://mandrillapp.com/api/docs/messages.html#method=send-template)，我是否正确地遵循这种格式？如果没有，我需要更改什么以匹配格式？

```
{
"key": "example key",
"template_name": "example template_name",
"template_content": [
    {
        "name": "example name",
        "content": "example content"
    }
],
"message": {
    "text": "example text",
    "subject": "example subject",
    "from_email": "message.from_email@example.com",
    "from_name": "example from_name",
    "to": [
        {
            "email": "example email",
            "name": "example name"
        }
    ],
}} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-02T16:57:41.000

看起来“to”字段需要一个数组。除非该变量`toField`是一个 NSArray，其中包含具有所描述的键和值的字典，否则您将获得一个与您想要的不完全一样的 JSON。

我建议输出传出 JSON 的描述，以准确查看存在差异的地方。

**更新** 我看到了你的问题的补充 -

```
NSDictionary *toField = @{@"email" : emailField.text}; 
```

不创建数组。尝试：

```
NSArray *toField = @[@{@"email" : emailField.text}]; 
```

# .net - 从弹出窗口以编程方式聚焦父窗口

> ID：14664170
> 
> 赞同：0
> 
> 时间：2013-02-02T16:53:59.287
> 
> 标签：.net, wpf, xaml, focus

我目前遇到 WPF 弹出窗口问题，其中对所述弹出窗口的操作希望将焦点返回到应用程序的主窗口。

通常，当您单击窗口上的某个位置时，弹出窗口会关闭，这是所需的行为。但是，**我发现没有任何编程方式可以以几乎相同的方式将焦点从弹出窗口内的操作带回窗口**。

以下代码概述了该问题：

*xml:*

```
<Window x:Class="PopupFocusEtc.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="MainWindow" Height="350" Width="525" x:Name="_wdw">
    <Grid>
      <Grid.RowDefinitions>
        <RowDefinition Height="Auto" />
        <RowDefinition Height="Auto" />
        <RowDefinition />
      </Grid.RowDefinitions>
      <Grid.ColumnDefinitions>
        <ColumnDefinition /><ColumnDefinition />
      </Grid.ColumnDefinitions>
        <TextBox x:Name="_txt" Text="Test" 
                 Grid.ColumnSpan="2" />
        <Button Grid.Row="1" x:Name="_btnOpen" 
                Click="OpenPopup" 
                Content="Open Popup" Grid.ColumnSpan="2" />
        <Popup x:Name="_popup" 
               Placement="Bottom" 
               HorizontalOffset="10"
               PlacementTarget="{Binding ElementName=_btnOpen}"
               StaysOpen="False">
          <Button Click="SwitchFocus" 
                  MinHeight="100" MinWidth="100" 
                  Margin="5"
                  Content="Focus" />
        </Popup>
        <Rectangle Grid.Column="1" Grid.Row="2" 
                   Fill="DarkOliveGreen">
          <Rectangle.Style>
            <Style TargetType="Rectangle">
              <Style.Triggers>
                <Trigger Property="IsMouseOver" Value="True">
                  <Setter Property="Cursor" Value="Hand" />
                </Trigger>
              </Style.Triggers>
            </Style>
          </Rectangle.Style>
        </Rectangle>
    </Grid>
</Window> 
```

*代码隐藏：*

```
using System.Windows;
using System.Windows.Input;

namespace PopupFocusEtc
{
    public partial class MainWindow : Window
    {
        public MainWindow()
        {
            InitializeComponent();
        }

        private void OpenPopup(object sender, RoutedEventArgs e)
        {
            _popup.IsOpen = true;
        }

        private void SwitchFocus(object sender, RoutedEventArgs e)
        {
            _txt.Focus();
            Keyboard.Focus(_txt);
            _txt.SelectAll();
            _wdw.Activate();
        }
    }
} 
```

![正在运行的应用程序的屏幕截图](../Images/9db32ed178c1a190314a86fa48053d8a.png) ![弹出窗口正在打开](../Images/58225a19170821f3b88f8891e87e67e4.png)

当我单击弹出窗口中的按钮时，会发生文本框正确聚焦，我什至可以输入文本，但弹出窗口**保持打开状态**。此外，请注意将光标切换为手的矩形上的 MouseOver 效果。即使窗口有焦点，**效果也不起作用**。

只有当我**单击窗口**时，弹出窗口才会消失，效果会再次起作用，等等。

我的问题是：**鉴于这种情况，我如何让主窗口再次激活，就像我会点击它一样？**

**更新**

我知道在给定的示例中，我可以简单地*关闭代码隐藏中的弹出窗口*。这是一个简化的示例 - 在另一个应用程序中，从 Popup UI 内开始的操作*不知道它存在于 Popup 上*，并且主窗口上发生的任何事情*也不知道弹出*窗口。

因此，在 UI 中引入更多耦合之前，我想知道当您单击窗口时运行的机制是否可以以某种方式以编程方式触发......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-02T17:04:10.163

我不清楚您上面提供的示例是否模仿了所需的方法，但如果您只是添加以下行：

```
 _popup.IsOpen = false; 
```

在`SwitchFocus`方法中（我会把它放在 之前`_wdw.Activate()`，但它也可以在之后工作），然后当您单击按钮时弹出窗口关闭，并且`TextBox`接收焦点。

这是你要找的吗？

# php - 使用 PHP / ASPX 缓存 JSON 提要

> ID：14664172
> 
> 赞同：0
> 
> 时间：2013-02-02T16:54:13.647
> 
> 标签：php, asp.net, caching

我正在使用 wunderground api 创建一个天气应用程序，因为它将您每天/分钟可以发出的请求数量限制为每天 500 个和每分钟 10 个，我需要使用 ASPX 或 PHP 实现某种形式的缓存，以便我保留在那个限度内。

此外，不幸的是，我无法访问数据库，我考虑过生成一个文本文件，但我担心它可能会在写入过程中尝试获取数据并导致错误。

在处理可能出现的任何并发问题时，为单个位置缓存此数据的最佳方法是什么？

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-02T19:59:03.457

ASP.NET 具有可用于您的目的的缓存 - 请参阅类[http://msdn.microsoft.com/en-us/library/system.web.httpcontext.cache.aspx](http://msdn.microsoft.com/en-us/library/system.web.httpcontext.cache.aspx)。

缓存值 10 分钟，您可以使用它，然后缓存值自动过期，并且可以重新加载实际值：

```
Cache.Insert(cache_key, value, null, DateTime.Now.AddMinutes(10),
  Cache.NoSlidingExpiration); 
```

通过以下方式检索缓存值：

```
return Cache[cache_key]; 
```

对于缓存值的锁定（在重新加载期间），您可以使用 lock 关键字，可以在此处找到更多详细信息：[在 ASP.NET 中正确锁定](https://stackoverflow.com/questions/5578744/doing-locking-in-asp-net-correctly)

# libssh2 - 在多通道应用程序中读取数据的推荐方式

> ID：14664173
> 
> 赞同：2
> 
> 时间：2013-02-02T16:54:20.817
> 
> 标签：libssh2

使用 libssh2 实现“从哪个通道首先读取数据”原语的推荐方法是什么？例如，我有一个简单的两选项卡终端程序，其中每个选项卡对应一个 LIBSSH2 通道。我想等到 2 个通道中的任何一个获得数据然后打印它。

单通道示例以非阻塞方式使用 libssh2_channel_read()，如下所示：

```
while(not done) {
    1\.  Try reading with libssh2_channel_read()
    2\.  If returned LIBSSH2_ERROR_EAGAIN, wait with select()
} 
```

将此扩展到双通道情况的简单方法是：

```
while(not done) {
    1\.  Try reading channel 1
    2\.  Try reading channel 2
    3\.  If BOTH channels returned LIBSSH2_ERROR_EAGAIN, wait with select()
} 
```

当包含通道 1 的一些数据的数据包在读取通道 2 之前到达时，这会导致一个罕见的错误。然后两个调用都返回 LIBSSH2_ERROR_EAGAIN，但由于尝试读取通道 2 实际上是接收通道 1 的数据，因此选择（ ) 现在将挂起。

我目前使用的解决方法包括为套接字保留原始数据计数器并使用它们来确定 libssh2 是否使用了任何新数据，但我觉得为一个相当简单的问题制定了一个非常复杂的解决方法。我错过了什么吗？是否有某种 libssh2_session_read_any_channel()？

# c# - 请求 Win32_ComputerSystem 类远程

> ID：14664174
> 
> 赞同：1
> 
> 时间：2013-02-02T16:54:38.753
> 
> 标签：c#, wmi

有人有一些关于如何使用主机名、用户名和密码从远程系统检索 Win32_ComputerSystem WMI 类的对象的示例 C# 代码吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-02T17:18:19.320

连接：

```
try
        {
            rcOptions = new ConnectionOptions();
            rcOptions.Authentication = AuthenticationLevel.Packet;
            rcOptions.Impersonation = ImpersonationLevel.Impersonate;
            rcOptions.EnablePrivileges = true;
            rcOptions.Username = servername + @"\" + username;
            rcOptions.Password = password;

            mScope = new ManagementScope(String.Format(@"\\{0}\root\cimv2", servername), rcOptions);
            mScope.Connect();
            if (mScope.IsConnected == true) { MessageBox.Show("Connection Succeeded", "Alert"); } else { MessageBox.Show("Connection Failed", "Alert"); }
            if (mScope.IsConnected == true) { lblConnectionStateWarning.Text = "Connected"; } else { lblConnectionStateWarning.Text = "Disconnected"; } //I have a label that displays connectionstate, you can leave that out

        }
        catch (Exception ex) { MessageBox.Show(ex.Message); } 
```

使用方法获取查询，加载到字典并返回到列表视图

```
private void FindWMI(string servername, string classSelection, ConnectionOptions rcOptions, ListView listView)
        {
            try
            {
                var dct = new Dictionary<string, string>();
                List<ListViewItem> itemsList = new List<ListViewItem>();
                oQuery = new ObjectQuery("select * from " + classSelection);
                moSearcher = new ManagementObjectSearcher(mScope, oQuery);
                moCollection = moSearcher.Get();

            Invoke(new MethodInvoker(() =>
            {
                listView.Items.Clear();
            }));

            foreach (ManagementObject mObject in moCollection)
            {
                if (mObject != null)
                {
                    foreach (PropertyData propData in mObject.Properties)
                    {
                        if (propData.Value != null && propData.Value.ToString() != "" && propData.Name != null && propData.Name != "")
                            dct[propData.Name] = propData.Value.ToString();
//Don't forget this, when the result is an array, you want all the strings in that array..
if (propData.Value is Array) { dct[propData.Name] = ""; foreach (string stringArray in (string[])propData.Value) { dct[propData.Name] += stringArray + "\n"; } }
                    }
                }
            }

            foreach (KeyValuePair<string, string> listItem in dct)
            {
                ListViewItem lstItem = new ListViewItem(listItem.Key);
                lstItem.SubItems.Add(listItem.Value);
                itemsList.Add(lstItem);
            }

            Invoke(new MethodInvoker(() =>
            {
                listView.Items.AddRange(itemsList.ToArray());
            }));
        }
        catch (Exception) { }
    } 
```

# php - 大量类似文件的归档服务

> ID：14664177
> 
> 赞同：0
> 
> 时间：2013-02-02T16:54:47.947
> 
> 标签：php, mysql, database

我想建立一种归档服务。我的想法是我向服务发送一个文档（大约 10 KB 的 HTML），它给我发回一个简短的标识符，然后我可以使用该标识符来检索文档。许多文件彼此非常相似；对于任何一个文档，可能有 1000 个其他文档与它重叠 95%。因此，每次我发送文档时，归档服务都应该尝试找到一个相似的文档，并仅存储差异。

是否已经存在这样的系统？如果可能的话，我更喜欢基于 PHP/MySQL 的东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-03T01:22:33.283

CouchDB 从您的用例中浮现。了解他们如何将文档存储为 JSON 以及如何对文档进行修订（存储在 _rev 字段中）。

[http://guide.couchdb.org/draft/documents.html](http://guide.couchdb.org/draft/documents.html)

但是，它不会为您进行比较。通过一个简单的 CouchDB 实现，这个责任将落在您身上，但它确实可以很好地为您处理版本。

不幸的是，我不知道任何开箱即用的数据库可以比较文档，然后找到相似的东西并替换它们。

# php - 想在一行中显示 4 张图像

> ID：14664183
> 
> 赞同：0
> 
> 时间：2013-02-02T16:55:25.917
> 
> 标签：php, mysql

此代码用于从数据库中检索图像，它可以很好地检索图像，但我想在一行中显示 4 张图像..并且在其他情况下显示错误。请任何人帮助我。

```
$page_title = 'animals';
include('includes/header.php'); 
?>
<link rel="stylesheet" type="text/css" href="css/secondary.css"/>

<?php
    $tbl_name=$db_prefix."images";
    $adjacents = 3;
    $query = "SELECT COUNT(*) as num FROM $tbl_name";
    $total_pages = mysql_fetch_array(mysql_query($query));
    $total_pages = $total_pages['num'];
    $targetpage =$base_url . 'animal.php'; 
    $limit = 50; 

    if(!isset($_REQUEST['page']))
        { 
          $page=1;
            }
    else 
        {
            $page=$_REQUEST['page'];
        }

    if($page) 
        $start = ($page - 1) * $limit;  
        else
        $start = 0;

$query="SELECT image_id, image_name, image_desc, image_size, image_title FROM " . $tbl_name . " WHERE image_category IN (1)  LIMIT ".      $start.",". $limit;

$result=mysql_query($query) or die("Invalid query: " . mysql_error());

 if ($page == 0) $page = 1;
        $prev = $page - 1;
        $next = $page + 1;
        $lastpage = ceil($total_pages/$limit);
        $lpm1 = $lastpage - 1;
        $pagination = "";
if($lastpage > 1)
    {   
        $pagination .= "<div class='pagination'>";

         if ($page > 1) 
            $pagination.= "<a href='$targetpage?page=$prev'>Previous </a>";
        else
            $pagination.= "<span class='disabled'>Previous </span>";    

            if ($lastpage < 7 + ($adjacents * 2))

            {   
            for ($counter = 1; $counter <= $lastpage; $counter++)
            {
                if ($counter == $page)
                    $pagination.= "<span class=\"current\">$counter</span>";
                else
                    $pagination.= "<a href=\"$targetpage?page=$counter\">$counter</a>";                 
            }

            }
        elseif($lastpage > 5 + ($adjacents * 2))

        {
            if($page < 1 + ($adjacents * 2))        
            {
                for ($counter = 1; $counter < 4 + ($adjacents * 2); $counter++)

                {
                    if ($counter == $page)
                        $pagination.= "<span class=\"current\">$counter</span>";
                    else
                        $pagination.= "<a href=\"$targetpage?page=$counter\">$counter</a>";                 
                }
                $pagination.= "...";
                $pagination.= "<a href=\"$targetpage?page=$lpm1\">$lpm1</a>";
                $pagination.= "<a href=\"$targetpage?page=$lastpage\">$lastpage</a>";       
            }

            elseif($lastpage - ($adjacents * 2) > $page && $page > ($adjacents * 2))
            {   
                $pagination.= "<a href=\"$targetpage?page=1\">1  </a>";
                $pagination.= "<a href=\"$targetpage?page=2\">2  </a>";
                $pagination.= "...";
                for ($counter = $page - $adjacents; $counter <= $page + $adjacents; $counter++)
                {
                    if ($counter == $page)
                        $pagination.= "<span class=\"current\">$counter</span>";

                        else
                        $pagination.= "<a href=\"$targetpage?page=$counter\">$counter</a>";                 
                }
                $pagination.= "...";
                $pagination.= "<a href=\"$targetpage?page=$lpm1\">$lpm1</a>";

                $pagination.= "<a href=\"$targetpage?page=$lastpage\">$lastpage</a>";       
            }

            else
            {    
                $pagination.= "<a href=\"$targetpage?page=1\">1  </a>";
                $pagination.= "<a href=\"$targetpage?page=2\">2  </a>";
                $pagination.= "...";
                for ($counter = $lastpage - (2 + ($adjacents * 2)); $counter <= $lastpage; $counter++)

                {
                    if ($counter == $page)
                        $pagination.= "<span class=\"current\">$counter</span>";
                    else
                        $pagination.= "<a href=\"$targetpage?page=$counter\">$counter</a>";                 
                }
            }
        }

        if ($page < $counter - 1) 
            $pagination.= "<a href=\"$targetpage?page=$next\">Next  </a>";
        else
            $pagination.= "<span class=\"disabled\">Next  </span>";
        $pagination.= "</div>\n";       
    }
?>
<?php echo $pagination; ?>
<br /><br /><br /><br /><br /><br />
<p id="categoryheading">Animals</p>
<br />

<div id="searchphoto">
<table >

<?php 
$count=0;
do
{

?>
<tr>
<?php 
if($count==4)
{?>
</tr>
<tr>
<td style="width: 150; " >
<a href="animal_pg2.php?image_id=<?php echo base64_encode($row['image_id']); ?>"><img src="<?php echo  'thumbnail_images/' . $row['image_name'];?>"/></a>

</td>
<?php
$count++;   
    }
    ?>

<?php
else
{
    ?>
<td style="width: 150; " >
<a href="animal_pg2.php?image_id=<?php echo base64_encode($row['image_id']); ?>"><img src="<?php echo  'thumbnail_images/' . $row['image_name'];?>"/></a>
</td>
<?php
$count++;
?>

<?php
}
?>

 <input type="hidden" name="image_id" value="<?php echo $image_id; ?>" >

   <?php    
    }

while($row=mysql_fetch_assoc($result));
?>
 </table>
<?php echo $pagination; ?>      

</div>
<br /><br /><br /><br /><br /><br /><br />
<?php include('includes/footer.php');?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T17:06:25.930

尝试这个

```
$page_title = 'animals';
include('includes/header.php'); 
?>
<link rel="stylesheet" type="text/css" href="css/secondary.css"/>

<?php
    $tbl_name=$db_prefix."images";
    $adjacents = 3;
    $query = "SELECT COUNT(*) as num FROM $tbl_name";
    $total_pages = mysql_fetch_array(mysql_query($query));
    $total_pages = $total_pages['num'];
    $targetpage =$base_url . 'animal.php'; 
    $limit = 50; 

    if(!isset($_REQUEST['page']))
        { 
          $page=1;
            }
    else 
        {
            $page=$_REQUEST['page'];
        }

    if($page) 
        $start = ($page - 1) * $limit;  
        else
        $start = 0;

$query="SELECT image_id, image_name, image_desc, image_size, image_title FROM " . $tbl_name . " WHERE image_category IN (1)  LIMIT ".      $start.",". $limit;

$result=mysql_query($query) or die("Invalid query: " . mysql_error());

 if ($page == 0) $page = 1;
        $prev = $page - 1;
        $next = $page + 1;
        $lastpage = ceil($total_pages/$limit);
        $lpm1 = $lastpage - 1;
        $pagination = "";
if($lastpage > 1)
    {   
        $pagination .= "<div class='pagination'>";

         if ($page > 1) 
            $pagination.= "<a href='$targetpage?page=$prev'>Previous </a>";
        else
            $pagination.= "<span class='disabled'>Previous </span>";    

            if ($lastpage < 7 + ($adjacents * 2))

            {   
            for ($counter = 1; $counter <= $lastpage; $counter++)
            {
                if ($counter == $page)
                    $pagination.= "<span class=\"current\">$counter</span>";
                else
                    $pagination.= "<a href=\"$targetpage?page=$counter\">$counter</a>";                 
            }

            }
        elseif($lastpage > 5 + ($adjacents * 2))

        {
            if($page < 1 + ($adjacents * 2))        
            {
                for ($counter = 1; $counter < 4 + ($adjacents * 2); $counter++)

                {
                    if ($counter == $page)
                        $pagination.= "<span class=\"current\">$counter</span>";
                    else
                        $pagination.= "<a href=\"$targetpage?page=$counter\">$counter</a>";                 
                }
                $pagination.= "...";
                $pagination.= "<a href=\"$targetpage?page=$lpm1\">$lpm1</a>";
                $pagination.= "<a href=\"$targetpage?page=$lastpage\">$lastpage</a>";       
            }

            elseif($lastpage - ($adjacents * 2) > $page && $page > ($adjacents * 2))
            {   
                $pagination.= "<a href=\"$targetpage?page=1\">1  </a>";
                $pagination.= "<a href=\"$targetpage?page=2\">2  </a>";
                $pagination.= "...";
                for ($counter = $page - $adjacents; $counter <= $page + $adjacents; $counter++)
                {
                    if ($counter == $page)
                        $pagination.= "<span class=\"current\">$counter</span>";

                        else
                        $pagination.= "<a href=\"$targetpage?page=$counter\">$counter</a>";                 
                }
                $pagination.= "...";
                $pagination.= "<a href=\"$targetpage?page=$lpm1\">$lpm1</a>";

                $pagination.= "<a href=\"$targetpage?page=$lastpage\">$lastpage</a>";       
            }

            else
            {    
                $pagination.= "<a href=\"$targetpage?page=1\">1  </a>";
                $pagination.= "<a href=\"$targetpage?page=2\">2  </a>";
                $pagination.= "...";
                for ($counter = $lastpage - (2 + ($adjacents * 2)); $counter <= $lastpage; $counter++)

                {
                    if ($counter == $page)
                        $pagination.= "<span class=\"current\">$counter</span>";
                    else
                        $pagination.= "<a href=\"$targetpage?page=$counter\">$counter</a>";                 
                }
            }
        }

        if ($page < $counter - 1) 
            $pagination.= "<a href=\"$targetpage?page=$next\">Next  </a>";
        else
            $pagination.= "<span class=\"disabled\">Next  </span>";
        $pagination.= "</div>\n";       
    }
?>
<?php echo $pagination; ?>
<br /><br /><br /><br /><br /><br />
<p id="categoryheading">Animals</p>
<br />

<div id="searchphoto">
<table >

<?php 
$count=0;
do
{

?>
<tr>
<?php 
if($count==4)
{?>
</tr>
<tr>
<td style="width: 150; " >
<a href="animal_pg2.php?image_id=<?php echo base64_encode($row['image_id']); ?>"><img src="<?php echo  'thumbnail_images/' . $row['image_name'];?>"/></a>

</td>
<?php
$count++;   
    }

else
{
    ?>
<td style="width: 150; " >
<a href="animal_pg2.php?image_id=<?php echo base64_encode($row['image_id']); ?>"><img src="<?php echo  'thumbnail_images/' . $row['image_name'];?>"/></a>
</td>
<?php
$count++;
?>

<?php
}
?>

 <input type="hidden" name="image_id" value="<?php echo $image_id; ?>" >

   <?php    
    }

while($row=mysql_fetch_assoc($result));
?>
 </table>
<?php echo $pagination; ?>      

</div>
<br /><br /><br /><br /><br /><br /><br />
<?php include('includes/footer.php');?> 
```

# caching - 在获取高分辨率卫星图像以在 ArcGIS 中对要素进行数字化时需要帮助？

> ID：14664188
> 
> 赞同：0
> 
> 时间：2013-02-02T16:56:15.597
> 
> 标签：caching, memcached, gis, arcgis

我想在 ArcGIS 中将我所在城市的一些地方数字化。我找到了 ArcGIS 'World Imagery' 图层，我可以将其用作数字化的底图。但问题是它仅在连接互联网时才有效。有没有办法以特定的缩放级别保存图层的缓存，以便即使在我重新启动计算机后我也可以离线处理它。如果不是，请告诉我任何其他方式——可能是使用谷歌或必应图像，我需要将城市的重要特征数字化。所以我需要房屋级别的解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T15:10:04.453

一种快速而肮脏的方法是截取屏幕截图，保存它，将其添加为数据，然后使用“地理参考”工具栏对其进行地理参考。我不确定如何保存缓存或可能需要多少内存。如果您在固定比例下工作并且可以找到所需的图像（例如 google 或 bing），那么请截取屏幕截图，或者使用 Snagit 之类的程序（如果有的话）以最佳分辨率捕获您想要的范围。

# html - 移动 Safari - 从水平视图变为垂直视图 - 身体的奇怪行为

> ID：14664194
> 
> 赞同：0
> 
> 时间：2013-02-02T16:56:48.683
> 
> 标签：html, css, mobile-safari, responsive-design

通过调整窗口大小和使用模拟器在浏览器中测试我的响应式网页时，一切都很好。现在我刚刚在我真正的 iPhone 4S 上测试了这个页面，结果很奇怪。

当以垂直视图加载页面时，一切都很好，切换到水平视图也不成问题。但是当我再次转动手机使其再次进入垂直视图时，发生了一些奇怪的事情。显示垂直版本，但似乎`body`没有正确调整大小。我在右侧有一个大的空白区域和一个垂直滚动条，而网页上的元素显示在左侧。截图：

**垂直 #1**
![在此处输入图像描述](../Images/98b2ced046e125a1221c7d024070da13.png)

**水平的**
![在此处输入图像描述](../Images/18b613c114d1be6921adec73e54ed69d.png)

**垂直 #2**
![在此处输入图像描述](../Images/79fe1fe25e4484099e739feb1f64395a.png)

这是我身上的 CSS 代码（注意：我还在做那个项目，所以颜色和字体只是暂时这样写）：

```
body {
    margin: 0;
    background-color: grey;
    color: black;
    font-family: Georgia, serif;
    line-height: 1.5;
    background-image: url(../img/bg.png);
} 
```

而且我还使用基于 em 的媒体查询，例如：

```
@media only screen and (min-width: 30em) {
   /* Stuff */
} 
```

在媒体查询中，我不会更改正文上的任何内容。

在我的 HTML 文件的头部，我有

`<meta name="viewport" content="width=device-width, initial-scale=1.0">`

一些调试向我展示了`body`元素正确调整大小，但`html`元素没有。

你知道什么会导致这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T20:00:36.603

html:

```
<meta name="viewport" content="initial-scale=1.0"> 
```

尝试添加CSS：

```
@media only screen and (-webkit-min-device-pixel-ratio : 2) and (orientation:portrait),
only screen and (min-device-pixel-ratio : 2)  and (orientation:portrait) 
```

和，

```
@media only screen and (-webkit-min-device-pixel-ratio : 2) and (orientation:landscape),
only screen and (min-device-pixel-ratio : 2)  and (orientation:landscape) 
```

用于视网膜显示器。

也许这个链接可以帮助你[https://developer.mozilla.org/en-US/docs/CSS/Media_queries](https://developer.mozilla.org/en-US/docs/CSS/Media_queries)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T23:25:38.227

好的，我终于想通了！看到这个问题，这是我遇到的确切问题。
[HTML5占位符文本在Safari中添加宽度导致滚动条和闪烁](https://stackoverflow.com/questions/13791013/html5-placeholder-text-adding-width-in-safari-causing-scrollbars-and-flickering)

# internet-explorer - 文本溢出：省略号在 IE 上不起作用

> ID：14664195
> 
> 赞同：28
> 
> 时间：2013-02-02T16:56:53.887
> 
> 标签：internet-explorer, overflow, css

在[此](http://luigisettembrini.gov.it/listituto/presentazione/)页面中，左侧边栏中的一些链接被裁剪为：

```
.widget-area .textwidget li {
    overflow: hidden;
    text-overflow: ellipsis;
    white-space: nowrap;
} 
```

在 Firefox/Chrome 中正确显示： ![来自 Firefox/Chrome 的屏幕截图](../Images/a826bee0241f8ac7baeaca8786fb0434.png)

不幸的是 Internet Explorer 8/9/10...： ![来自 IE 10 的屏幕截图](../Images/f7ec3a47c0ebe67a0cc874688936793b.png)

问题不在于 IE 10 对 text-overflow:ellipsis 的支持。例如，[这](http://jsfiddle.net/x4Pxk/1/)也适用于 IE 10！我的实施有什么问题？我还尝试添加 -ms-text-overflow:ellipsis，但没有任何运气。

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2013-02-02T18:17:58.757

删除该`word-wrap: break-word`属性应该会有所帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-02T17:15:02.280

将 width 属性添加到您的 CSS 代码..这会有所帮助..

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-02T17:09:57.220

对于 IE，您应该添加一些额外的代码..比如更改您的宽度属性..或尝试使用 dotdotdot jquery 插件..这将是一个替代解决方案.. 像这样

[http://dotdotdot.frebsite.nl](http://dotdotdot.frebsite.nl)

编辑：点击此链接

[Quirksmode textoverflow](http://www.quirksmode.org/css/textoverflow.html)

它告诉您为 IE 设置 **宽度：100%** ..

# php - 如何计算array_map函数中的两个值

> ID：14664196
> 
> 赞同：1
> 
> 时间：2013-02-02T16:56:55.777
> 
> 标签：php, arrays, array-map

如何计算一个包含少量值的字符串的值？

例如，

```
$toPluck = 'price';
$arr = $gamesWorth;
$plucked = array_map(function($item) use($toPluck) {
    echo $item[$toPluck];
}, $arr); 
```

网页显示 2、20 和 50。

我想计算它们并回显到第 72 页。

我试图在网络和该网站上找到解决方案，但我找不到它..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-02T17:13:13.590

似乎是[array_reduce的工作](http://php.net/manual/en/function.array-reduce.php)

```
$toPluck = 'price';
$arr = array(
    array('price' => 2),
    array('price' => 20),
    array('price' => 50),
);

echo array_reduce($arr, function($sum, $item) use($toPluck) {
    return $sum + $item[$toPluck];
}, 0); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-02T17:11:16.587

有几种方法可以处理它，但是对现有代码的简单修改是对您的`return`值进行修改，`array_map()`然后将结果数组与[`array_sum()`](http://us3.php.net/manual/en/function.array-sum.php).

```
$toPluck = 'price';
$arr = $gamesWorth;
$plucked = array_map(function($item) use($toPluck) {
    // Uncomment this if you want to print individual values
    // Otherwise the array_map() produces no output to the screen
    // echo $item[$toPluck];

    // And return the value you need
    return $item[$toPluck];
}, $arr);

// $plucked is now an array
echo array_sum($plucked); 
```

# jquery - 使用电话间隙广告

> ID：14664197
> 
> 赞同：0
> 
> 时间：2013-02-02T16:56:56.657
> 
> 标签：jquery, cordova, mobile, ads

我一直在开发使用 JqueryMobile 和 Phonegap 构建的应用程序。有谁知道当您使用 Phonegap 时在您的应用中展示广告的最佳方式是什么。我可以使用 adMob 或 Google 广告吗？或者我应该使用什么。

谢谢/约翰内斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T11:13:12.583

I don't the best way of integrating ads ......but google ads works pretty good with phonegap applications. I personally have used google ads in phonegap application.

# playframework-2.0 - 类型 controllers.ReverseProducts 无法解析

> ID：14664200
> 
> 赞同：2
> 
> 时间：2013-02-02T16:57:24.197
> 
> 标签：playframework-2.0

当我编译我的播放应用程序时，它给了我错误：

> [错误] E:\play\apps\warehouse\app\controllers\Products.java:56: `}' 预期但发现 eof。

在 Eclipse 中，它给出了一个错误：

> 无法在包名称上解析类型 controllers.ReverseProducts。

# php - 清理上传文件的名称

> ID：14664201
> 
> 赞同：1
> 
> 时间：2013-02-02T16:57:27.367
> 
> 标签：php, regex, file-upload

我正在尝试清理上传文件的文件名。

我想替换不是数字或字母的所有内容，并将空格替换为 -

我有：

```
$finalName = preg_replace('/[^a-z0-9][ ]/', '-', strtolower(substr($finalName, 0, strpos($finalName, '.')))) ; 
```

这是行不通的。

有人可以帮我解决我的正则表达式吗？

注意：

```
substr($finalName, 0, strpos($finalName, '.')) 
```

就是这样它适用于文件名而不是点或扩展名。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T16:59:55.907

您忘记使用**或**在正则表达式中

```
/[^a-z0-9]+|[ ]+/
           ^ 
```

# python - Python .split() 没有'u

> ID：14664209
> 
> 赞同：8
> 
> 时间：2013-02-02T16:58:34.137
> 
> 标签：python, unicode-string

在 Python 中，如果我有如下字符串：

```
a =" Hello - to - everybody" 
```

我愿意

```
a.split('-') 
```

然后我得到

```
[u'Hello', u'to', u'everybody'] 
```

这只是一个例子。

我怎样才能得到一个没有那个烦人的简单列表？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-02-02T17:00:07.630

这`u`意味着它是一个 unicode 字符串 - 您的原始字符串也必须是一个 unicode 字符串。通常，将字符串保留为 Unicode 是一个好主意，因为尝试转换为普通字符串可能会由于没有等效字符的字符而失败。

纯粹用于让您知道它是表示形式中的`u`unicode 字符串 - 它不会影响字符串本身。

通常，unicode 字符串与普通字符串完全一样，因此将它们保留为 unicode 字符串应该没有问题。

在 Python 3.x 中，unicode 字符串是默认的，并且没有`u`前置（相反，`bytes`（相当于旧字符串）前置`b`）。

如果您*真的*，**真的**需要转换为普通字符串（这种情况很少发生，但如果您使用的是不支持 unicode 字符串的扩展库，则可能会出现问题），请查看[`unicode.encode()`](http://docs.python.org/2/library/stdtypes.html#str.encode)and [`unicode.decode()`](http://docs.python.org/2/library/stdtypes.html#str.decode)。您可以在拆分之前执行此操作，也可以在拆分之后使用[列表推导](http://www.youtube.com/watch?v=pShL9DCSIUw)执行此操作。

# javascript - 随机化 JavaScript 视频加载器

> ID：14664210
> 
> 赞同：0
> 
> 时间：2013-02-02T16:58:49.220
> 
> 标签：javascript, jquery, arrays, html5-video

我有 BigVideo.js 在几个客户端网站上工作，最近有人问我是否可以加载 3 或 4 个视频，并让它们在每次访问时随机加载。我是 JavaScript 的初学者，但我明白了。首先，我想写一个视频源数组，然后是一个随机函数等......

问题是，如果正在使用 firefox，则存在 if firefox 条件来显示 .ogg 视频源。我真的不知道如何在这种情况下加载数组，所以我将不胜感激任何建议

这里是大视频js > [http://dfcb.github.com/BigVideo.js/](http://dfcb.github.com/BigVideo.js/)

这是显示视频的索引页面的代码：

```
<script>
$(function() {
var BV = new $.BigVideo({useFlashForFirefox:true});
BV.init();
BV.show('http://clients.kevinhowbrook.com/nw/bigvideo/vids/video1.mp4',{ambient:true},     {altSource:'http://clients.kevinhowbrook.com/nw/bigvideo/vids/video1.ogv'});
});
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T14:26:12.673

您可以创建一个包含可能出现的多个视频的数组，并从数组中随机选择一个成员：

```
var videos = ['http://clients.kevinhowbrook.com/nw/bigvideo/vids/video1.mp4',
              'some other video',
              'some third video'];
var index = Math.floor(Math.random() * videos.length);
BV.show(videos[index], params); 
```

您可能还需要数组中的 alt 源：

```
var videos = [
    {source: 'http://clients.kevinhowbrook.com/nw/bigvideo/vids/video1.mp4', alt: 'http://clients.kevinhowbrook.com/nw/bigvideo/vids/video1.ogv'},
    {source: 'some other video', alt: ''},
    {source: 'some third video', alt: ''}
];
var index = Math.floor(Math.random() * videos.length);
BV.show(videos[index].source, params); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-21T07:47:38.363

只是更新这个......康斯坦丁的回答是正确的（如标记）但这是另一种方法

```
var aryFiles = ["http://localhost:8888/_websites/davesims/wp-content/themes/david/video/vids/river.mp4", "http://localhost:8888/_websites/davesims/wp-content/themes/david/video/vids/dock.mp4"];
var idx = Math.floor(aryFiles.length * Math.random());
var BV;
$(function() {
     // initialize BigVideo
    BV = new $.BigVideo();
    BV.init();
    BV.show(aryFiles[idx], {
         ambient: true
     });
 }); 
```

# c# - 如何使用 Excel 表包含 C# 代码中的函数？

> ID：14664216
> 
> 赞同：0
> 
> 时间：2013-02-02T16:59:45.393
> 
> 标签：c#, excel, vba

我有一个 excel 文件，其中包含我认为用 VB 编写的一些方法。我想知道任何方式让我在 C# 代码中使用这些方法。我尝试使用 ( `System.Data.Odbc.OdbcConnection`) 与文件建立连接，然后`UPDATE`通过 using 使用语句`Command`，但发生错误。那么有人知道如何做到这一点吗？

我将文件上传到： [下载 Excel 文件](http://www.mediafire.com/view/?j4e9yothhodj2uo)

我想更改`C20`and `C21`，然后从`C22:C29` 谢谢中获取数据

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-02T17:43:10.140

您正在查看的可能不是 VB.NET，而是 VBA（Visual Basic for Applications）。VBA 是 VB.NET 的祖先，也是用于 Excel 宏的语言。对您来说坏消息是，VBA 不是 .NET 语言，您不能将 C# 用于“附加”到工作簿的宏。

如果您真的有使用 C# 的动力，最好的选择是查看[ExcelDNA](http://exceldna.codeplex.com/)，它允许您从 Excel 调用 .NET dll。

但是，鉴于您描述的问题，我真的会质疑转换为 C# 的必要性。VBA 是轻量级 Excel 自动化的“自然”语言，并且相当容易理解。如果您有现有代码，只需修改它。Excel VBA 的一个不错的功能是宏记录器，它允许您将与 Excel 的交互记录为 VBA 代码，这是了解对象模型中如何使用事物的好方法。

# backbone.js - Backbone.Marionette Layout + Region + View 插入一个额外的元素，打破 Bootstrap 样式

> ID：14664217
> 
> 赞同：0
> 
> 时间：2013-02-02T16:59:50.393
> 
> 标签：backbone.js, twitter-bootstrap, marionette

我在让 Backbone.Marionette 与 Twitter Bootstrap 合作时遇到了问题。Bootstrap 期望标记符合预定义的模式才能工作，但是 Backbone 和 Marionette 处理事情的方式，似乎不可能使用 a`Marionette.Layout`为带有嵌入式下拉菜单的导航栏生成符合 Bootstrap 的标记。

这是问题所在：

假设我有一个`Marionette.Layout`代表导航栏，并且我想要一个`region`，我将在其中放置`CollectionView`or`CompositeView`来管理下拉列表中的项目。是`region`一个选择器，所以在这种情况下，如果我们有：

```
<div class="navbar">
  <ul class="nav">
    <li>Static item</li>
    <li id="dynamic-dropdown"></li>
  </ul>
</div> 
```

然后布局将指定动态下拉列表的区域，如下所示：

```
Marionette.Layout.extend({
  regions: {
    dropdown: '#dynamic-dropdown'
  }
...
}); 
```

然后我会有一个`CompositeView`负责渲染下拉项目模型，为 Bootstrap 下拉菜单指定额外标记等。问题是似乎不可能`#dynamic-dropdown`成为`$el`for the `CompositeView`，因为 Backbone 总是插入一个额外的`div`（或您在 中指定的任何内容`tagName`）。为了使下拉菜单按预期显示，我需要去掉那个额外的元素并让视图的 root 成为`#dynamic-dropdown`。

[我整理了一个 jsfiddle 来](http://jsfiddle.net/7auhR/5/)说明我的意思。

tl;dr 如何使 a`View`的根元素成为 a 中指定的区域`Marionette.Layout`？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-02T19:36:08.517

您只需要确保最终生成的标记符合 Bootstrap 的要求（使用控制台进行调试）。

所需的标记如下：

![在此处输入图像描述](../Images/124a899ade1bb2a82725b0757ad88385.png)

您的代码生成的标记存在以下问题：

![在此处输入图像描述](../Images/ead4cb85b4e4446a29a148b591587e1f.png)

因此，要修复它，您必须将`nav`模板更改为：

```
<script type="text/html" id="nav">
  <div class="navbar">
    <ul class="nav" id="dropdown">
    </ul>
  </div>
</script> 
```

并且您的视图要渲染`<li>`而不是`<div>`

```
var DropdownItem = Marionette.ItemView.extend({
     tagName: 'li',
     template: "#dropdown-item"
});

var DropdownView = Marionette.CompositeView.extend({
    template: "#dropdown-collection",
    className: 'dropdown',
    tagName: 'li',
    itemView: DropdownItem,
    itemViewContainer: '#dropdown-items'
}); 
```

这是工作版本：http: [//jsfiddle.net/7auhR/6/](http://jsfiddle.net/7auhR/6/)

# eclipse - 从 jGRASP 但不是从 Eclipse 或 IntellliJ IDEA 运行时播放音频 (.wav)

> ID：14664219
> 
> 赞同：1
> 
> 时间：2013-02-02T17:00:02.257
> 
> 标签：eclipse, audio, intellij-idea, jgrasp

此代码工作正常，并在 jGRASP 中播放声音，但是当它从 IDEA 或 Eclipse 中的项目运行时，没有声音播放。我怎样才能让它在所有 IDE 上工作？

```
public void playClip( String clipPlay ){
    AudioClip clip = null;
    File filePlay = new File( clipPlay );

    try{
        clip = Applet.newAudioClip( filePlay.toURI().toURL() );
    }
    catch( MalformedURLException ex ){
        System.err.println( ex.getMessage() );           
    }

    clip.play();
} 
```

# node.js - 新贵：不同核心上的每个进程

> ID：14664222
> 
> 赞同：0
> 
> 时间：2013-02-02T17:00:28.060
> 
> 标签：node.js, upstart

我正在尝试使用 upstart 来启动 node.js 的多个实例-每个实例都在不同的 cpu 核心上侦听不同的端口。

**启动配置：**

```
start on startup

task

env NUM_WORKERS=2

script
  for i in `seq 1 $NUM_WORKERS`
  do
    start worker N=$i
  done
end script 
```

**工人配置：**

```
instance $N

script
    export HOME="/node"

    echo $$ > /var/run/worker-$N.pid
    exec sudo -u root /usr/local/bin/node /node/server.js >> /var/log/worker-$N.sys.log 2>&1
end script 
```

如何指定每个进程应在单独的核心上启动以在盒子内扩展 node.js？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T22:36:45.473

`taskset`允许您为任何 Linux 进程设置 CPU 亲和性。但是 Linux 内核已经倾向于将进程保持在同一个 CPU 上以优化性能。

# android - 将 Android 应用程序导入另一个 android 应用程序

> ID：14664226
> 
> 赞同：0
> 
> 时间：2013-02-02T17:00:59.767
> 
> 标签：android, android-intent

有时，当一个应用程序 (A) 需要另一个应用程序 (B) 来执行某些功能时，必须将应用程序 (B) 导入到应用程序 (A) 中。这是在用户之前没有安装应用程序 (B) 的情况下。

如果手机本身已经安装了应用程序 B，但用户想要安装应用程序 A（当然其中已经导入了 B），会发生什么情况？

是否会遇到任何问题？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-03T00:43:03.870

我可以想到两个选项，具体取决于两个应用程序的交互方式。

1.  检查是否安装了 B。如果没有，请将用户重定向到 Google Play 进行安装。然后使用 A 中的 Intent 与 B 进行通信。

2.  如果您有 B 的源代码，请将共享代码移至 Android 库项目，将其命名为 C。然后更新 A 和 B 以导入 C 并直接使用其代码。

# sql - SQL - 比较两行和两列

> ID：14664229
> 
> 赞同：0
> 
> 时间：2013-02-02T17:01:15.440
> 
> 标签：sql, compare, rows

我正在研究 SQL，但似乎找不到这个练习的答案。

*练习：对于同一评论者对同一部电影两次评分并且第二次给它更高评分的所有情况，返回评论者的姓名和电影的标题。*

我不知道如何比较 2 行然后获得更高的评分。

表的模式是：

*   电影 ( mID, title, year, director ) 英文：有一部电影，ID号为mID，有片名，上映年份，导演。
*   Reviewer ( rID, name ) 英文：ID号为rID的reviewer有一定的名字。
*   评分 ( rID, mID, stars, ratingDate ) 英文：评论者 rID 在某个 ratingDate 给电影 mIDa 星级评分 (1-5)。*

就这一点而言，我在论坛中进行了研究：

```
select *
from rating a
join Reviewer rv on rv.rid = a.rid
where 1 < (select COUNT(*) from rating b
            where b.rid = a.rid and b.mid = a.mid) 
```

我很高兴也能得到代码的解释。因为即使是上面的代码也让我很困惑。

```
/* Create the schema for our tables */
create table Movie(mID int, title text, year int, director text);
create table Reviewer(rID int, name text);
create table Rating(rID int, mID int, stars int, ratingDate date);

/* Populate the tables with our data */
insert into Movie values(101, 'Gone with the Wind', 1939, 'Victor Fleming');
insert into Movie values(102, 'Star Wars', 1977, 'George Lucas');
insert into Movie values(103, 'The Sound of Music', 1965, 'Robert Wise');
insert into Movie values(104, 'E.T.', 1982, 'Steven Spielberg');
insert into Movie values(105, 'Titanic', 1997, 'James Cameron');
insert into Movie values(106, 'Snow White', 1937, null);
insert into Movie values(107, 'Avatar', 2009, 'James Cameron');
insert into Movie values(108, 'Raiders of the Lost Ark', 1981, 'Steven Spielberg');

insert into Reviewer values(201, 'Sarah Martinez');
insert into Reviewer values(202, 'Daniel Lewis');
insert into Reviewer values(203, 'Brittany Harris');
insert into Reviewer values(204, 'Mike Anderson');
insert into Reviewer values(205, 'Chris Jackson');
insert into Reviewer values(206, 'Elizabeth Thomas');
insert into Reviewer values(207, 'James Cameron');
insert into Reviewer values(208, 'Ashley White');

insert into Rating values(201, 101, 2, '2011-01-22');
insert into Rating values(201, 101, 4, '2011-01-27');
insert into Rating values(202, 106, 4, null);
insert into Rating values(203, 103, 2, '2011-01-20');
insert into Rating values(203, 108, 4, '2011-01-12');
insert into Rating values(203, 108, 2, '2011-01-30');
insert into Rating values(204, 101, 3, '2011-01-09');
insert into Rating values(205, 103, 3, '2011-01-27');
insert into Rating values(205, 104, 2, '2011-01-22');
insert into Rating values(205, 108, 4, null);
insert into Rating values(206, 107, 3, '2011-01-15');
insert into Rating values(206, 106, 5, '2011-01-19');
insert into Rating values(207, 107, 5, '2011-01-20');
insert into Rating values(208, 104, 3, '2011-01-02'); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-02T17:11:34.553

类似的东西应该有效（它们也是其他方式）

```
SELECT rev.name, m.title
FROM Reviewer rev
INNER JOIN Rating r1 on r1.rID = rev.rID
INNER JOIN Rating r2 on r2.rID = rev.rID and r2.mID = r1.mID
INNER JOIN Movie m on m.mID = r1.mID
WHERE r2.ratingDate > r1.ratingDate and r2.stars > r1.stars 
```

或者在这种情况下，您可以在 join 中执行所有操作（而不是 WHERE 子句）

```
SELECT rev.name, m.title
FROM Reviewer rev
INNER JOIN Rating r1 on r1.rID = rev.rID
INNER JOIN Rating r2 
  on r2.rID = rev.rID 
  and r2.mID = r1.mID
  and r2.ratingDate > r1.ratingDate
  and r2.stars > r1.stars
INNER JOIN Movie m on m.mID = r1.mID 
```

[SqlFiddle](http://sqlfiddle.com/#!2/625c8/4)（带有您的示例数据）

解释：我想你知道 JOIN 语法，所以

诀窍是两次加入Rating。然后 WHERE 部分检查是否存在一条线，其中一个评级（来自同一部电影的同一评论者）具有更大的 ratingDate 和更多的星星。检查：“第二次给它更高的评价”。

然后我们只按评论者姓名和电影标题分组（这部分是为了避免重复，如果我们有 3 个评论，第二个比第一个多，第三个比第二个多）：使用您的示例数据，GROUP BY 不是需要，但是...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-02T17:13:03.263

首先让所有审查过两次的审查员开始：

```
select rid
from rating r
group by rid
having count(*) = 2 
```

现在的问题是：它们是相同的还是第二个更大？为此，请重新加入评级，但还包括两个日期：

```
from (select rid, min(ratingdate) as minratingdate, max(ratingdate) as maxratingdate
      from rating r
      group by rid
      having count(*) = 2
     ) twotimes join
     rating r1
     on r1.rid = twotimes.rid and r1.ratingdate = twotimes.minratingdate join
     rating r2
     on r2.rid = twotimes.rid and r2.ratingdate = twotimes.maxratingdate 
```

这带来了关于这两个评论的信息。您可以从这里完成查询。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-02T17:16:52.303

您可以使用`GROUP BY`和`HAVING`：

```
SELECT m.mId, m.Title, r.Name, ra.stars
FROM Movie m 
   JOIN (SELECT mId, rId, MAX(stars) stars
        FROM Rating 
        GROUP BY mId, rId
        HAVING COUNT(*) > 1) ra ON m.mId = ra.mId
   JOIN Reviewer r ON ra.rId = r.rId
GROUP BY m.mId, m.Title, r.Name, ra.stars 
```

这将为您返回任何具有来自同一评论者的多个评论且星数最多的电影。

这是用于测试的[SQL Fiddle 。](http://sqlfiddle.com/#!2/d19da/1)

祝你好运。

# javascript - 使用 CDATA 是否正确替换 <

> ID：14664230
> 
> 赞同：1
> 
> 时间：2013-02-02T17:01:25.943
> 
> 标签：javascript, html, xhtml

我是否在下面的代码中正确使用了 CDATA，因为我没有收到任何错误，但是`<`从这里开始的开始标签上收到警告...

```
var $tbody = $('#qandatbl_onthefly > tbody');
var $tr = $("<![CDATA[<tr class='optionAndAnswer' align='center'>]]");
var $qid = $("<![CDATA[<td width='5%' class='qid'></td>]]").text(qnum);
var $options = $("<![CDATA[<td><table class='option'><tbody><tr><td class='opt'>1\. Option Type:</td></tr></tbody></table></td>]]");
var $video = $("<![CDATA[<td width='17%' class='video'></td>]]");
var $endtr = $("<![CDATA[</tr>]]");
var $questionType = ''; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-02T17:09:41.797

您可能不需要 CDATA 部分，但您拥有的部分是不完整的。最后缺少一个额外的>：

```
<![CDATA[ ... ]]>

<![CDATA[ <div>...</div> ]]> 
```

您提供的示例中缺少尾部尖括号。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-02T17:13:29.317

我认为**您不需要在这里使用 CDATA**。当**您从 XML 获取数据以识别它是 HTML 内容时使用它**

# python - 如何强制 SAX 解析器不转换 XML 实体？

> ID：14664232
> 
> 赞同：2
> 
> 时间：2013-02-02T17:01:46.840
> 
> 标签：python, xml-parsing, sax, saxparser

我正在使用 SAX 来解析大型 xml 文件。但是它将每个[XML 代码](http://www.ascii.cl/htmlcodes.htm)转换为它的符号版本。

如何防止 SAX 这种行为。

示例`with_amp.xml`：

```
<?xml version="1.0" encoding="utf-8"?>
<root>
  <title>One Two</title>
  <title>One &amp;mdash;  Two</title>
</root> 
```

蟒蛇处理程序：

```
from xml.sax import handler, parse

class Handler(handler.ContentHandler):
    def characters(self, content):
        if content.isspace(): return
        print(content)

if __name__ == "__main__":
    parse(open('with_amp.xml', 'r'), Handler()) 
```

我希望输出为：

```
One Two
One &amp;mdash;  Two 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-04-10T14:31:41.343

使用 saxutils，我设法做到了。 [https://docs.python.org/2/library/xml.sax.utils.html#module-xml.sax.saxutils](https://docs.python.org/2/library/xml.sax.utils.html#module-xml.sax.saxutils)

例如，您的信息：

```
print(content) 
```

会变成

```
print(saxutils.escape(content)) 
```

（不过，您需要将 saxutils 添加到您的导入中：然后整体将是

```
from xml.sax import handler, parse, saxutils

class Handler(handler.ContentHandler):
    def characters(self, content):
        if content.isspace(): return
        print(saxutils.escape(content))

if __name__ == "__main__":
    parse(open('with_amp.xml', 'r'), Handler()) 
```

# c# - 泛型接口引用如何接受非泛型对象？

> ID：14664233
> 
> 赞同：1
> 
> 时间：2013-02-02T17:02:02.830
> 
> 标签：c#, .net, generics

我有代码

```
IEnumerable<card> any_object = new card[] { }; 
```

where`card`是一个没有实现的类`IEnumerable`。我无法理解这段代码是如何工作的？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-02T17:08:27.330

从 C# 规范：

> 在 .NET Framework 2.0 版中，Array 类实现 System.Collections.Generic.IList、System.Collections.Generic.ICollection 和 System.Collections.Generic.IEnumerable 泛型接口。

所以数组确实（隐式）继承自`IEnumerable<card>`.

我不太明白关于`card`类未实现的评论`IEnumberable`。该类`card`不需要，它是您分配变量的数组，它必须实现接口，而不是其中的值*。*

# ios6 - iOS Google Analytics 缺少第一个 UIViewController

> ID：14664235
> 
> 赞同：2
> 
> 时间：2013-02-02T17:02:10.547
> 
> 标签：ios6, google-analytics

BLUF：Google Analytics iOS v2 beta 4 错过了跟踪我的第一个`UIViewController`在后续成功点击时加载的内容`UIViewControllers`（使用 子类化`GAITrackedViewController`）

AppDelegate.m

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    // Override point for customization after application launch.

    // Optional: automatically send uncaught exceptions to Google Analytics.
    [GAI sharedInstance].trackUncaughtExceptions = YES;
    // Optional: set Google Analytics dispatch interval to e.g. 20 seconds.
    [GAI sharedInstance].dispatchInterval = 0;
    // Optional: set debug to YES for extra debugging information.
    [GAI sharedInstance].debug = YES;
    // Create tracker instance.
    [[GAI sharedInstance] trackerWithTrackingId:@"UA-########-1"];    // id<GAITracker> tracker = 

    return YES;
} 
```

主视图控制器.m

```
- (void)viewDidLoad
{
    NSLog(@"viewDidLoad");
    [super viewDidLoad];
    self.trackedViewName = @"First Screen";
    //[[GAI sharedInstance] dispatch];
    ...
} 
```

我不会在 working 上手动调用 dispatch `UIViewController`，并且我尝试过调用和不调用 non-working。但这是一个谜。如果我不手动调用它，则不会生成日志。当我手动调用调度时，我收到以下信息：

> GoogleAnalytics 2.0b4 -[GAIDispatcher initialDispatch:retryNumber:] (GAIDispatcher.m:481) 调试：没有待处理的命中。

提前致谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-02T17:36:51.567

事实证明，你**真的**应该确保如果你覆盖任何方法，你应该确保在它们上调用 super ...

我已经编写了自己的`viewDidAppear`方法，但没有调用`[super viewDidAppear:animated];`. 我想这就是 GoogleAnalytics 发挥魔力的地方。希望这将帮助其他人*不*要这样做。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-11-15T08:51:48.957

在我的案例中，我确实调用了超级方法，但它在某些页面上不起作用。我只是改变了顺序，让 GA 在超级方法之前，它现在确实有效。

```
- (void)viewDidAppear:(BOOL)animated {
    self.screenName = @"mainMenu";
    [super viewDidAppear:animated];
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-06-23T08:48:55.393

```
Contrary to Shu Zhang answer: super should be called first and then you should add other code: 

- (void)viewDidLoad
{
    [super viewDidLoad];
    self.screenName = @"YourViewControllerName";
    //your implementation here
}

- (void) viewDidAppear:(BOOL)animated {

    [super viewDidAppear:animated];
    ///your implementation here...
} 
```

# asp.net-optimization - 使用 System.Web.Optimizations 对特定包进行条件压缩

> ID：14664236
> 
> 赞同：4
> 
> 时间：2013-02-02T17:02:11.090
> 
> 标签：asp.net-optimization

我在我的项目中使用 System.Web.Optimizations BundleConfig。我在我的网站上使用的特定 jQuery 插件遇到问题。如果我将文件添加到我的 ScriptBundle 中，它在调试模式下工作正常，但在我处于发布模式时抛出 JavaScript 错误（即设置 Web.config debug=false）。我在想某些东西没有被正确地缩小。

所有其他脚本都没有给我带来任何问题，所以我不想影响所有捆绑包的行为，但是有没有办法为特定捆绑包定制，告诉它在调试中使用特定版本，在发布时使用最小版本。

我知道它的默认行为是查找 .min 文件，但我似乎无法让它工作。谁能告诉我这里可能缺少什么？谢谢你的帮助。

这是我自己拆分的示例。这在调试中有效，但在我在 web.config 中设置 debug=false 时无效

```
ScriptBundle layoutBundle = new ScriptBundle("~/jsbundles/jquery/layout"); 
layoutBundle.Include("~/Scripts/plugins/jquery.layout-latest.js"); 
bundles.Add(layoutBundle); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-01T18:50:00.810

如果您只想关闭一个捆绑包的缩小，您可以简单地切换到普通捆绑包而不是 ScriptBundle，它不会被缩小。然后它将以您包含的任何形式提供该捆绑包，而无需通过缩小运行它。

# javascript - 循环中的事件监听器

> ID：14664241
> 
> 赞同：1
> 
> 时间：2013-02-02T17:03:33.140
> 
> 标签：javascript

所以我有这个调用类的 eventListner，就像一个魅力，但只有一次，因为 inte 调用索引为 0 的 add 类。

我试图创建一个循环来调用脚本中的每个添加类，但我无法获得循环......

这是没有循环的事件监听器

```
var AddEvent = "add";
var addClass = document.getElementsByClassName(AddEvent)[0]
addClass.addEventListener("click", addDiceEvent, false);
function addDiceEvent() {
      dicesides_funcfunc();
} 
```

这就是我试图创造的。

```
function AddDice(){
        for (i = 0; i < 5; i++) {
            var addClass =  document.getElementsByClassName("add");
            addClass.addEventListener("click", addDiceEvent, false);
            function addDiceEvent(){
            dicesides_funcfunc();
            }
        }

}  AddDice(); 
```

有任何想法吗 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-02T17:07:29.730

希望这项工作.......

```
var addClassArr= document.getElementsByClassName(AddEvent);

for (var x in addClassArr)
 {
var addClass = addClassArr[x];

addClass.addEventListener("click", addDiceEvent, false);

}

function addDiceEvent() {
      dicesides_funcfunc();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-02T17:19:34.247

您需要在 for 循环中创建新的 skope，试试这个：

```
function AddDice(){
        for (i = 0; i < 5; i++) {

            (function(){       
            var addClass =  document.getElementsByClassName("add");

                addClass.addEventListener("click", function(){
                    dicesides_funcfunc();
                }, false);
            })();
        }
} 
```

# themes - 如何减少 Tumblr 照片集帖子的大小并保持原始的 ph 集布局？

> ID：14664242
> 
> 赞同：-1
> 
> 时间：2013-02-02T17:03:35.307
> 
> 标签：themes

我想将它们减小到最大 200 像素宽度，并保持与照片具有 10 像素间距的相同布局。此外，我不想将帖子设置为那么宽并使用溢出：隐藏只会切断照片集。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T17:36:59.123

# jQuery 解决方案

对于此解决方案，您将需要最新版本的[jQuery](http://jquery.com/ "jQuery 官方网站")和 jQuery 插件[imagesLoaded](https://github.com/desandro/imagesloaded "imagesLoaded jQuery 插件")包含在`head`以下主题之前：

```
<script type="text/javascript">
    $(document).ready(function() {
        $('iframe.photoset').each(function() {
            var i = this;
            $(i).attr("onload", "ps_resize(this)");
            var s = $(i).attr("src");
            s = s.replace(/\/500\//, "/200/");
            $(i).attr("src", s);
        });
     });
    function ps_resize(i) {
        $(i).contents().find("body").imagesLoaded(function() {
            $(i).attr("width", 200);
            $(i).attr("height", $(this).height());
         });
         return false;
    }
</script> 
```

## 什么解决方案

1.  DOM 准备好后，找到所有照片集 iFrame
2.  对于每个 iFrame...
    *   将“onload”属性设置为您的框架调整功能
    *   获取框架的源 url，将大小（例如 500）更改为 200
    *   设置框架的源网址（这将导致它重新加载较小的照片集）
3.  在调整大小功能...
    *   等待图片加载
    *   将框架宽度设置为 200
    *   将框架高度设置为照片集的新高度

## 无限滚动的附加代码

如果你使用[Infinite Scroll](https://github.com/paulirish/infinite-scroll "Github 上的无限滚动") jQuery 插件，你需要在你的`success`回调函数中额外包含这个：

```
...
$(newElements).find('iframe.photoset').each(function() {
    var i = this;
    $(i).attr("onload", "ps_resize(this)");
    var s = $(i).attr("src");
    s = s.replace(/\/500\//, "/200/");
    $(i).attr("src", s);
 });
... 
```

显然，如果您使用的是 Infinite Scroll，我建议您`function`在初始加载和滚动时定义在每个 iFrame 上调用的，这样您就无需维护重复的代码。

# c# - 我将使用 C# 中的什么数据类型在 Visual Studio Forms 中将英语翻译成猪拉丁语？

> ID：14664244
> 
> 赞同：0
> 
> 时间：2013-02-02T17:03:59.410
> 
> 标签：c#

我将使用 C# 中的什么数据类型在 Visual Studio Forms 中将英语翻译成猪拉丁语？是字符串还是什么。我只需要知道将使用什么类型的数据类型。我只需要翻译一个单词。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-02T17:13:39.720

`string`会很好：

```
 string english = "wall";
       string pigLatin = "";
       string firstLetter;
       string restOfWord;
       string vowels = "AEIOUaeiou";
       int letterPos;

      foreach (string word in english.Split())
      {
          firstLetter = word.Substring(0, 1);
          restOfWord = word.Substring(1, word.Length - 1);
          letterPos = vowels.IndexOf(firstLetter);
          if (letterPos == -1)
          {
              //it's a consonant
              pigLatin = restOfWord + firstLetter + "ay";
          }
          else
          {
              //it's a vowel
              pigLatin = word + "way";
          }
        }        
//pigLatin should be "allway", I think. 
```

# java - 一键在2页之间来回切换

> ID：14664249
> 
> 赞同：0
> 
> 时间：2013-02-02T17:04:27.960
> 
> 标签：java, android, android-layout, android-viewpager, android-button

我有一个按钮，我想在`ViewPager`. 我知道如何使按钮转到特定页面。我只想用同一个按钮返回上一页`OnClick.`，让他们在 3 页中的 2 页之间循环。

这是我已经拥有的。

我确信这很容易做到，但由于我仍然是一个 java 菜鸟，任何代码示例都会很棒！

```
settingsButton = (ImageButton) findViewById(R.id.settingsButton);
    settingsButton.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View v) {
            mPager.setCurrentItem(0, true);
        }
    }); 
```

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T17:10:04.350

使用 [ViewPager.getCurrentItem()](http://developer.android.com/reference/android/support/v4/view/ViewPager.html#getCurrentItem%28%29)从 ViewPager 获取当前项目，然后将其移至下一个或上一个：

```
settingsButton = (ImageButton) findViewById(R.id.settingsButton);
    settingsButton.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View v) {
             // get Current Item from ViewPager
            int currentpage=mPager.getCurrentItem();
            switch(currentpage){

             case 0:
             mPager.setCurrentItem(1, true);
             break;
             case 1:
             mPager.setCurrentItem(0, true); 
             break;
            }
        }
    }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-02T17:10:31.767

您可以使用一个简单的 switch-case 来检查您所在的页面并更改为所需的页面：

```
switch(mPager.getCurrentItem()) {
case 0:
    //First page. Change to whatever page you want
    break;
case 1:
    //Second page. Change to whatever page you want
    break;
default:
    //Neither of the first two pages. Do whatever you want
    break;
} 
```

# windows-phone-7 - 为什么我不能在不将孩子的背景设置为透明的情况下点击/单击 Border/ContentControl 内的空白区域？

> ID：14664251
> 
> 赞同：3
> 
> 时间：2013-02-02T17:04:37.020
> 
> 标签：windows-phone-7, xaml, silverlight-4.0

我终于能够创建一个“简单”的透明按钮控件，基于`ContentControl`. 但是，有人可以解释为什么在将子元素的背景设置为透明之前，我无法单击/点击控件的任何空白区域吗？我也遇到了这个问题：

*   我尝试使用边框
*   我设置了按钮的*ControlTemplate*而不是*ContentTemplate*。

这是我的“按钮”类：

```
public class TransparentButton : ContentControl {
    public TransparentButton() {            
        HorizontalContentAlignment = HorizontalAlignment.Stretch;
    }

    public override void OnApplyTemplate() {
        var child = Content as Grid;

        if (child != null) {
            child.Background = new SolidColorBrush(Colors.Transparent);
        }

        base.OnApplyTemplate();
    }
} 
```

在使用（假设是 Grid 孩子）时，它非常特定于我的案例，但它可以工作。我使用它的原因是启用了 TiltEffect 的列表（非 ListBox）。

问题的背景：

```
<ItemsControl x:Name="Items" toolkit:TiltEffect.IsTiltEnabled="True">
    <ItemsControl.ItemTemplate>
        <DataTemplate>
            <controls:TransparentButton 
                cal:Message.Attach="[Event Tap] = [Action Go($dataContext)]">
                <Grid>
                    <StackPanel HorizontalAlignment="Left">
                        <TextBlock Text="{Binding Test}" />                            
                    </StackPanel>
                    <StackPanel HorizontalAlignment="Right">
                        <TextBlock Text="{Binding Test2}" />                            
                    </StackPanel>
                </Grid>
            </controls:TransparentButton>
        </DataTemplate>
    </ItemsControl.ItemTemplate>
</ItemsControl> 
```

如果您在项目内的 StackPanel 之间单击，则不会触发任何事件，也不会发生任何事情。只有当网格的背景是`Transparent`“占用空间”时。

我来自网络背景，所以这很混乱；即使未设置背景，包含元素也应该是“可测试的”。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-03T09:26:07.857

在 XAML 术语中，没有背景的对象通常称为空心或不可命中的。所以必须设置一个背景来使物体响应点击。要实现对透明对象的命中测试，您应该将背景设置为透明。

有关命中测试的更多信息

[http://msdn.microsoft.com/en-us/library/ms752097.aspx](http://msdn.microsoft.com/en-us/library/ms752097.aspx)

# jquery - zWeatherFeed jquery 包括

> ID：14664256
> 
> 赞同：1
> 
> 时间：2013-02-02T17:05:05.727
> 
> 标签：jquery

在我的网站上，我包含了这些 jquery 脚本：

```
<script language="javascript" type="text/javascript" src="js/jquery.js"></script>
<script language="javascript" type="text/javascript" src="js/jquery.easing.js"></script>
<script language="javascript" type="text/javascript" src="js/script.js"></script>
<script type="text/javascript" src="js/jquery.countdown.js"></script>   
<script type="text/javascript" src="js/jquery.mousewheel.js"></script>
<script type="text/javascript" src="js/jquery.jscrollpane.min.js"></script>
<script type="text/javascript" src="js/jwplayer.js"></script> 
```

我想使用 zWeatherFeed：[http ://www.zazar.net/developers/jquery/zweatherfeed/](http://www.zazar.net/developers/jquery/zweatherfeed/)

我应该在我的站点标题中包含此代码：

```
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js" type="text/javascript"></script>
<script src="jquery.zweatherfeed.min.js" type="text/javascript"></script> 
```

但是当我包含 jquery.min.js 时，一些 javascripts，例如：jscroll 窗格不起作用，另一个问题是这样的：

在我插入的正文中：

```
<div id="test"></div> 
```

加载网站后：

```
<div id="test" class="weatherFeed"></div> created but not load sub divs for example: 
   <div class="weatherItem odd day">
    <div class="weatherCity">... (city) ...</div>
    <div class="weatherCountry">... (country) ...</div>
    <div class="weatherTemp">... (temperature) ...</div>
    <div class="weatherDesc">... (condition) ...</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T17:08:26.913

在没有 jquery.min.js 的情况下尝试它，因为您已经从存储中包含了完整的 jquery.js ...

# svn - 如何修复错误的 SVN 目录结构？

> ID：14664259
> 
> 赞同：0
> 
> 时间：2013-02-02T17:05:08.757
> 
> 标签：svn, directory-structure

我正在做一个名为`InvSim`. 我使用 SVN 进行版本控制和备份我的文件。不幸的是，当我第一次设置存储库时，我将项目直接放入`trunk`文件夹中。换句话说，我目前的目录结构如下：

```
trunk
    src
    input
    lib 
```

我想做的是让目录结构看起来像这样：

```
trunk
    InvSim
        src
        input
        lib 
```

据我了解，这是组织 SVN 存储库的常规方式。有什么办法可以修复目录结构吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-02T17:07:25.987

在您的工作副本中，您可以使用`svn mkdir InvSim`创建一个新目录。然后，您可以使用 eg 依次`svn mv src InvSim/`移动每个原始目录。然后做一个`svn commit`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-02T17:09:07.920

在主干下创建一个新目录，并将您拥有的所有内容移至该目录。但是您当前的结构并非不合常规，可能没有理由改变它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-02T17:08:55.387

尝试使用 SVN 重命名选项重命名文件夹。右键单击文件夹 -> SVN -> 重命名

安装Visual SVN，这个很方便

# java - Java：指向通用对象的非通用指针的含义？

> ID：14664261
> 
> 赞同：0
> 
> 时间：2013-02-02T17:06:00.500
> 
> 标签：java, generics

我对Java（和英语）很陌生，所以请多多包涵。

试图写出类似...

```
Container con = new Container<Book>();
con.insert(new Book());
con.insert(new Car()); 
```

...并且没有收到任何类型的错误。但是像...这样的线条

```
Car c = con.remove(); // removes the last inserted element for simplicity 
```

说“错误：不兼容的类型”，所以我把它改成了

```
Object carObj = (Car) con.remove(); 
```

它奏效了。我的问题是：当我说

```
new Container<Book>(); 
```

我创建了一个只能容纳 Book 类型对象的容器，但是由于指针（它是非泛型的？）我可以突然将任何类型的对象放入我的容器中。这里发生了什么？指针仅在容器中的任何内容中看到对象个性，但我不知道指针允许容器中的每个具有对象个性的对象主要创建为通用（我的公式可能是错误的）。所以当我有一个非泛型指针时，我是创建一个泛型容器还是非泛型容器都没有关系？它总是被认为是一个非通用容器（当我删除它们时我必须在其中投射对象）？

```
new Container<Book>().insert(new Car()); // compiler error as excepted 
```

好奇并使问题变得更糟（也许）。

```
Container<Car> cars = new Container();
cars.insert(new Book()); // compiler error: required Car, found Book 
```

现在指针只看到容器中的汽车个性。但是即使我将容器创建为非通用容器，它也不允许我放入一本书。为什么？

```
new Container().insert(new Car()); // works fine 
```

不得不说，既迷人又刺激……

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-02T17:17:08.993

您的容器是原始容器，而不是通用容器。它被声明为`Container`. 它应该被声明为`Container<Book>`.

完成后，线

```
con.insert(new Car()); 
```

不会再编译了。

在 Java 中，对象的泛型类型只是编译时的东西。在运行时，由于擦除，它只是一个容器。因此，如果您不将容器声明为`Container<Book>`Container，您将拥有一个原始 Container 并且编译器不会检查您存储在其中的对象类型的任何内容。

为了更清楚（至少我希望如此），这条线

```
Container con = new Container<Book>(); 
```

相当于

```
Container con = (Container) (new Container<Book>()); 
```

它将对 a`Container<Book>`的引用转换为对原始 Container 的引用，破坏了它的类型安全性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-02T17:11:50.707

您正在对引用进行操作：引用的类型将在编译时使用。将 a`Book`插入 a`Container<Car>`显然是错误的，就像将 a`Book`或 a`Car`插入 a没有任何问题一样`Container`。

同样，当引用完全不正确时，期望 a`Container.remove`返回 a是不正确的，因为没有理由期望返回的对象是 a ——它可能是 a或 fish。`Car``<Container>``Car``Book`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-02T19:28:03.020

在已经有很多没有泛型编写的代码之后，Java 添加了泛型。泛型的设计者希望将标准库容器更改`List`为 into `List<X>`，但已经编写了很多代码`List`，如果他们要求所有用途都成为用途，那么这些代码将不再编译`List<X>`。此外，他们希望人们使用他们自己的遗留库，例如，要求 a`List`并希望它只包含`String`能够传入 a 的实例`List<String>`。

他们处理这个问题的方法是为每个泛型类型引入“原始类型”的概念，这基本上只是通过不在泛型类型之后写尖括号而获得的类型（例如`List`，而不是`List<String>`）。原始类型与它们的非原始等价物有不同的类型检查规则；例如，如果您有 a那么它对任何进入它`List`都是合法的，但是当您返回某些东西时，它会以您需要向下转换的形式返回，而 a只会允许您进入a ，但作为回报，您不需要向下转换' s 结果得到了回报。`add``Object``get``Object``List<String>``add``String``get``String`

不幸的是，由于语言设计者制定的向后兼容规则，他们允许您编写类似的表达式

```
List rawList = new ArrayList<String>();
rawList.add(new PeanutButterSandwich()); 
```

没有编译时错误。你甚至可以做更糟糕的事情，比如

```
List<String> stringList = new ArrayList<String>();
stringList.add("string");
List rawList = stringList;
List<PeanutButterSandwich> sandwichList = (List<PeanutButterSandwich>) rawList;
PeanutButterSandwich sandwich = sandwichList.get(0); 
```

编译（带有关于未经检查的转换的警告，这意味着您从原始类型转换为泛型类型，但编译器不知道它是合法的）。当然，这段代码肯定会在运行时引发异常，因为位置 0 的元素是 a `String`，而不是 a `PeanutButterSandwich`。

重要的是要记住原始类型只是为了向后兼容，你不应该在新代码中使用它们。此外，如果您曾经处理原始类型，在将它们转换为泛型类型时要非常小心，因为编译器无法阻止您做错事。

# notepad++ - 快速替换 Notepad++ 中的字符

> ID：14664266
> 
> 赞同：1
> 
> 时间：2013-02-02T17:06:29.050
> 
> 标签：notepad++

我正在使用*`Notepad++`*. 我有一些条目如下：

```
001:0> class Item
002:1>   def initialize(id)
003:2>     @id = id
004:2>   end 
```

无论如何，现在是否可以`001:0>,002:1>...`一次性快速删除它们并获得它们，如下所示：

```
 class Item
   def initialize(id)
     @id = id
   end 
```

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-02T17:42:13.500

使用`Replace`对话框，然后选中`Regular Expressions`底部的框。

![在此处输入图像描述](../Images/274ee59ed2f245b4b14202856027aca3.png)

寻找：

```
^(\d+?:\d+?>)(.*) 
```

[RegexBuddy 的](http://regexbuddy.com)解释树：

*   选项： ^ 和 $ 匹配换行符
*   在行首断言位置（在字符串开头或换行符之后）«^»
*   匹配下面的正则表达式并将其匹配捕获到反向引用编号 1 «(\d+?:\d+?>)»
*   匹配单个数字 0..9 «\d+?»
*   在一次和无限次之间，尽可能少，根据需要扩展（懒惰）«+？»
*   匹配字符“：”字面意思«：»
*   匹配单个数字 0..9 «\d+?»
*   在一次和无限次之间，尽可能少，根据需要扩展（懒惰）«+？»
*   匹配字符“>”字面意思«>»
*   匹配下面的正则表达式并将其匹配捕获到反向引用编号 2 «(.*)»
*   匹配任何不是换行符«.*»的单个字符
*   在零次和无限次之间，尽可能多次，根据需要回馈（贪婪）«*»

代替：

```
\2 
```

这将整个匹配替换为捕获组的内容`2`（见上文）

点击`Replace All`

![在此处输入图像描述](../Images/42c087062b038512990108ede7560776.png)

请注意，查找部分的正则表达式也将匹配格式`00:0>`为 、`0000:00>`、`00000000:00000000>`等的数字。如果这对您不起作用，请将正则表达式更改为：

```
 ^(\d{3}+:\d>)(.*) 
```

# android - 如何在 Socketeq 的 windowsandroid 中更改分辨率（不是密度）？

> ID：14664267
> 
> 赞同：0
> 
> 时间：2013-02-02T17:06:40.810
> 
> 标签：android, android-emulator, resolution, android-x86

主要问题在标题中。我在 init.rc，build.prop 中搜索参数非常困难。搜索了哪些文件负责设置分辨率，但一无所获。

也许有人知道如何即时在纵向和横向模式之间切换？

这个模拟器有热键资源吗？我曾经在 Oracles VM 上运行 Android，它的热键在 socketeq 模拟器中不起作用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T22:19:33.243

有趣的事实是，我告诉您以下内容，因为这个答案帮助了我；但是，这可能会对您有所帮助：将以下行添加到您的“build.prop”文件中，以覆盖这些设置，也许？无论如何，它是：

[ro.sf.lcd_density=120](http://www.reddit.com/r/Android/comments/1773hv/android_403_ported_to_windows_78_natively/c83oytf)

（点击它会带你到我找到它的reddit页面）。

这对我有用，但我的实际主页和其他“桌面”屏幕仍然小得多……我希望 XDA Developers 的一些人会在这方面发布一些新内容；同时，我还希望目前与 WindowsAndroid 兼容的少数应用程序中的一些可能包含视频内容，例如 Youtube、Netflix、Hulu、系统视频播放器，并且这些应用程序在全屏模式下可能会更好地填充空间.

希望这对您有所帮助-您提出问题的方式肯定对我有所帮助。

谢谢，迈克丹尼

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T15:58:46.703

程序的分辨率取决于 WindowsAndroid 窗口的大小。如果您的桌面分辨率很高（1366 x 768 或更高），WindowsAndroid 将在平板电脑模式下运行，如果您的分辨率较低，则在手机模式下运行。

# c# - WPF：我应该使用哪种绑定将文本框与代码中声明的依赖对象相关联？

> ID：14664269
> 
> 赞同：1
> 
> 时间：2013-02-02T17:06:48.143
> 
> 标签：c#, wpf, data-binding

我有一个 DependencyObject 类

```
public class TestDependency : DependencyObject
{
    public static readonly DependencyProperty TestDateTimeProperty ...

    public DateTime TestDateTime {get... set..}
} 
```

我的窗户是这样的

```
public partial class MainWindow : Window{

    public TestDependency td;
    public MainWindow()
    {
        InitializeComponent();
        td = new TestDependency();
        td.TestDateTime = DateTime.Now;
    }
} 
```

如果我想将 MainWindow 的依赖对象 td (public TestDependency td;) 的 TestDateTime 属性绑定到 Xaml 中的文本框，我该如何绑定它？这就是我现在正在做的

`<TextBlock Name="tb" Text="{Binding Source = td, Path=TestDateTime, TargetNullValue=novalue}"/>`

它根本不起作用。有谁知道我需要改变什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-02T17:13:48.907

首先，您需要定义`td`为属性而不是字段，因为您只能绑定到属性：

```
public TestDependency td { get; private set; } 
```

然后，确保在窗口的构造函数中设置数据上下文：

```
public MainWindow()
{
    td = new TestDependency();
    td.TestDateTime = DateTime.Now;
    this.DataContext = this;

    InitializeComponent();
} 
```

最后，在 XAML 中设置绑定：

```
<TextBlock Name="tb" Text="{Binding Path=td.TestDateTime}" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-02T17:09:11.810

我想你忘了`DataContext`在你的 MainWindow 中设置。

```
public MainWindow()
{
    InitializeComponent();
    td = new TestDependency();
    td.TestDateTime = DateTime.Now;

    DataContext = this;
} 
```

使用属性而不是字段`td`：

```
public TestDependency td { get; set; } 
```

并且不要`Source`用于您的绑定，请使用`Path`：

```
<TextBlock Name="tb" Text="{Binding Path= td.TestDateTime, TargetNullValue=novalue}"/> 
```

# jquery - 按背景 url 字母排序

> ID：14664270
> 
> 赞同：0
> 
> 时间：2013-02-02T17:06:50.953
> 
> 标签：jquery

试图将其调整为按href url而不是href文本按字母顺序排列...

Javascript

```
function sortUsingNestedText(parent, childSelector, keySelector) {
var items = parent.children(childSelector).sort(function (a, b) {
    var vA = $(keySelector, a).text();
    var vB = $(keySelector, b).text();
    return (vA < vB) ? -1 : (vA > vB) ? 1 : 0;
});
parent.append(items);
}

$(function () { sortUsingNestedText($('.searchresults'), "div", ".title a"); }); 
```

HTML

```
<div class="title"><a href="../url/thisiswhatiwantsorted/default.html">Link</a></div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T17:24:07.170

改变这个：

```
var vA = $(keySelector, a).text();
var vB = $(keySelector, b).text(); 
```

至：

```
var vA = $(keySelector, a).attr("href");
var vB = $(keySelector, b).attr("href"); 
```

并按 url 的最后一部分排序：

```
var vAURL = $(keySelector, a).attr("href").split('/');
var vA = vAURL[vAURL.length-1];
var vBURL = $(keySelector, b).attr("href").split('/');
var vB = vBURL[vBURL.length-1]; 
```

# java - 从另一个 Activity 调用一个 Activity 中的静态方法

> ID：14664271
> 
> 赞同：0
> 
> 时间：2013-02-02T17:06:58.593
> 
> 标签：java, android

我在 X.class 中有这些方法：

```
 public void sendMessage(String message) {
    // Check that we're actually connected before trying anything
    if (mChatService.getState() != BluetoothChatService.STATE_CONNECTED) {
        Toast.makeText(this, R.string.not_connected, Toast.LENGTH_SHORT).show();
        return;
    }

    // Check that there's actually something to send
    if (message.length() > 0) {
        // Get the message bytes and tell the BluetoothChatService to write
        byte[] send = message.getBytes();
        mChatService.write(send);

        // Reset out string buffer to zero and clear the edit text field
        mOutStringBuffer.setLength(0);
        //mOutEditText.setText(mOutStringBuffer);
    }
}

public static void sendMessage1(String message1){

    call1.sendMessage(message1);
} 
```

我有以下toggleSwitch，我从另一个活动即Y.class单击它：

```
tb3.setOnClickListener(new OnClickListener() {
        public void onClick(View v){
            if (tb3.isChecked()){
                String message = "u";
                X.sendMessage1(message);
                //clearer();
            } else if (!tb3.isChecked()){
                String message = "y";
                //clearer();
            }
        }
    }); 
```

虽然我在编码时没有收到任何错误，但是当我在 Android 上加载应用程序然后单击此切换开关时，我的应用程序会死掉吗？

日志：

```
E/AndroidRuntime( 4866): java.lang.NullPointerException
E/AndroidRuntime( 4866):    at com.winacro.andRHOME.andRHOME.sendMessage1(andRHOME.java:282)
E/AndroidRuntime( 4866):    at com.winacro.andRHOME.EECA2$1.onClick(EECA2.java:57)
E/AndroidRuntime( 4866):    at android.view.View.performClick(View.java:3534)
E/AndroidRuntime( 4866):    at android.widget.CompoundButton.performClick(CompoundButton.java:104)
E/AndroidRuntime( 4866):    at android.view.View$PerformClick.run(View.java:14263)
E/AndroidRuntime( 4866):    at android.os.Handler.handleCallback(Handler.java:605)
E/AndroidRuntime( 4866):    at android.os.Handler.dispatchMessage(Handler.java:92)
E/AndroidRuntime( 4866):    at android.os.Looper.loop(Looper.java:137)
E/AndroidRuntime( 4866):    at android.app.ActivityThread.main(ActivityThread.java:4441)
E/AndroidRuntime( 4866):    at java.lang.reflect.Method.invokeNative(Native Method)
E/AndroidRuntime( 4866):    at java.lang.reflect.Method.invoke(Method.java:511)
E/AndroidRuntime( 4866):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
E/AndroidRuntime( 4866):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
E/AndroidRuntime( 4866):    at dalvik.system.NativeStart.main(Native Method)
W/ActivityManager(  273):   Force finishing activity com.winacro.andRHOME/.EECA2 
```

# java - 无论字符串大小如何，如何在 Java 中获取字符串中的字符

> ID：14664273
> 
> 赞同：-2
> 
> 时间：2013-02-02T17:07:10.143
> 
> 标签：java, string

让我们有这个字符串，例如：

```
"C:\Users\User\workspace\Iterator\src\Iterate_Choose.java"
"C:\Users\User\workspace\Iterator\src\testing.java" 
```

如何在 src\ 之后和 .java 之前获取字符串。输出应该是这样的：

```
Iterate_choose
testing 
```

我尝试寻找正则表达式，但找不到符合这种情况的正则表达式。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T09:12:40.643

我会使用正则表达式：

```
 String outStr = Pattern.compile(".+src\\([^.]+)\.java")
                           .matcher("...\src\Iterate_Choose.java")
                           .find() ? m.group(1) 
                                   : null; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-02T17:12:32.907

如果不需要，请不要使用正则表达式。

```
String getFileName(String path) {
    int lastSlashIndex = path.lastIndexOf("\\");
    int dotIndex = path.indexOf(".", lastSlashIndex);

    return path.substring(lastSlashIndex, dotIndex)
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-02T17:13:24.010

您可以使用正则表达式或查找相关部分的位置：

```
 int pos1 = s.indexOf("src\\");
    int pos2 = s.lastIndexOf(".java");
    String result = s.substring(pos1 + 4, pos2); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-02T17:13:24.633

您可以使用子字符串：

```
String s1 = "C:\Users\User\workspace\Iterator\src\Iterate_Choose.java";
String s = s1.substring(s1.lastIndexOf("\\"),s1.lastIndexOf(".")); 
```

是不是很简单。

# php - 匹配正则表达式中的字符序列

> ID：14664277
> 
> 赞同：0
> 
> 时间：2013-02-02T17:07:40.807
> 
> 标签：php, regex

我想匹配字符串中的一系列字母。例如，如果我有字母 TBEI 想要匹配所有以字母 T 开头并包含字母 B 和 E 至少一次的字符串。第二个字母必须出现在第三个之前，并且字母之间可能有无数个字符。

也就是说，字母 TBE 将匹配字符串 Table、Trouble 和 Terrible 但不匹配 Teb。

我正在尝试通过使用在 php 中对此进行编码

```
$A = 'T';
$B = 'B';
$C = 'E';

$matches = preg_grep('/^'.$A.'.+'.$B.'.+'.$C.'/', $words); 
```

其中 words 是一个包含单词列表的数组。以我的算法工作，但我无法找到 $A $B 或 $C 之间没有字母的单词。

我将如何使用正则表达式来解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-02T17:12:39.553

您无法找到 $A $B 或 $C 之间没有字母的单词的原因是因为您正在使用`.+`它试图匹配 $A $B 或 $C 之间的至少 1 个字符。

使用`.*`代替`.+`

# android - Android 需要帮助从网络上对保存的图像进行排序

> ID：14664278
> 
> 赞同：-2
> 
> 时间：2013-02-02T17:07:52.773
> 
> 标签：android, image, gallery, datecreated

从网络保存图像时出现问题。

我创建新文件夹并将所有图像保存到此。问题是我希望这个文件夹首先按最后一个下载图像排序，但是当我打开图库时，该文件夹按创建的图像日期排序，下载图像中创建的日期不是我下载的时间，而是它第一次创建的时间. 我已经在 stack over flow 上进行了搜索，发现 java 无法将图像中创建的日期修改为我下载它的时间。

任何人有解决方案？（抱歉英语不好）

谢谢你的评论。我将解释更多细节。

首先，我从网上下载图片到缓存目录

```
HttpURLConnection localHttpURLConnection = (HttpURLConnection) new java.net.URL(urldisplay).openConnection(); 
localHttpURLConnection.setConnectTimeout(30000);
localHttpURLConnection.setReadTimeout(30000);
localHttpURLConnection.setInstanceFollowRedirects(true);
InputStream in = localHttpURLConnection.getInputStream();
File localFile = Constans.fileCache.getCacheFile(urldisplay);
FileOutputStream fos = new FileOutputStream(localFile);
Utils.CopyStream(in, fos); // simple copy by trunks
fos.close(); 
```

其次，我将下载的图像复制到外部存储

```
File toFile = new File(Environment.getExternalStorageDirectory() + "/folder", "folder_" + System.currentTimeMillis() + ".png");
FileOutputStream fos = new FileOutputStream(toFile);
Utils.CopyStream(new FileInputStream(fromFile), fos);
fos.close();

// Scan image to display when open with gallery otherwise it couldn't see in gallery
Intent mediaScanIntent = new Intent(Intent.ACTION_MEDIA_SCANNER_SCAN_FILE);
Uri contentUri = Uri.fromFile(toFie);
mediaScanIntent.setData(contentUri);
mContext.sendBroadcast(mediaScanIntent); 
```

最后，我看到那个画廊在我下载的时候没有对我的图像进行排序。这就是我要解决的问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T18:11:04.110

不确定我是否理解，但让我们尝试一下。

首先，您提到的问题比 java 代码问题更具体到 Gallery 应用程序。我假设图库使用 EXIF 信息按拍摄日期排序图片，而不是下载/复制它们。不幸的是，画廊不提供任何选项来对其他订单中的图片进行排序。

也许您可以尝试使用另一个资源管理器，它允许您按其他顺序对图片进行排序（也许 ESFileExplore 有更多选项？）

终极解决方案：您可以尝试使用 java EXIF 库更改图片中的 EXIF 以修改图片拍摄日期，这应该会更改它们在画廊中出现的顺序（但非常丑陋的解决方案......）。谷歌 5 秒后的一些随机 EXIF 库：http: [//drewnoakes.com/code/exif/](http://drewnoakes.com/code/exif/) [http://www.toanthang.net/modules.php?name=News&new_topic=2&catid=7](http://www.toanthang.net/modules.php?name=News&new_topic=2&catid=7)

希望这有助于蒂埃里

# mysql - 简单的 MySQL 函数错误

> ID：14664280
> 
> 赞同：0
> 
> 时间：2013-02-02T17:07:58.920
> 
> 标签：mysql, sql

我正在尝试编写一个 MySQL 函数，它返回用户名是否在我的表中。如下：

```
CREATE FUNCTION UserExists (pUserName VARCHAR(40))
RETURNS BIT DETERMINISTIC

BEGIN

DECLARE rVal BIT;

IF EXISTS (SELECT * FROM Users WHERE userName = pUserName)
THEN SET rVal = 1;
ELSE SET rVal = 0;
END IF;

RETURN rVal;

END; 
```

但是，我得到一个错误。有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-02T17:15:37.477

尝试这个

```
 IF(EXISTS(SELECT * FROM Users WHERE userName = pUserName)) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-02T17:12:09.847

如何使用用户定义变量？

```
DELIMITER $$

CREATE FUNCTION UserExists (pUserName VARCHAR(40))
RETURNS BIT DETERMINISTIC
BEGIN

    DECLARE rVal BIT;
    SET @recCount := (SELECT COUNT(*) FROM Users WHERE userName = pUserName);
    IF @recCount > 0 THEN 
        SET rVal = 1;
    ELSE 
        SET rVal = 0;
    END IF;
    RETURN rVal;

END $$

DELIMITER ; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-03T03:20:18.413

在查询你的 mysql 数据库之前，你需要使用 %mysql sudo -u -p 然后给出你的命令。

# java - 杰克逊的 JsonIgnore

> ID：14664282
> 
> 赞同：4
> 
> 时间：2013-02-02T17:08:04.157
> 
> 标签：java, json, jackson

JsonIgnore 注释似乎对我不起作用。任何想法为什么？

```
public class JsonTest implements Serializable {

    @JsonIgnore
private static JsonTest instance = null;

@JsonIgnore
private transient Set<String> set = new CopyOnWriteArraySet<String>();

private JsonTest() {}

@JsonIgnore
public static JsonTest getInstance() {
    if (instance == null)
        instance = new JsonTest();
    return instance;
}

public void setSet(Set<String> set) {
    this.set = set;
}

@JsonIgnore
public Set<String> getSet() {
    return set;
}

public String toString() {
    ObjectMapper mapper = new ObjectMapper();
    mapper.configure(SerializationConfig.Feature.FAIL_ON_EMPTY_BEANS, false);
    try {
        return mapper.writeValueAsString(this);
    } catch (Exception e) {
        e.printStackTrace();
        return null;
    }
}

public static void main(String[] args) {
    HashSet<String> set = new HashSet<String>();
    set.add("test");
    JsonTest.getInstance().setSet(set);
    System.out.println(JsonTest.getInstance().toString());
} 
```

}

输出：{"set":["test"]}

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-11-28T01:01:51.877

瞬态意味着该字段不会被序列化。您不需要在那里添加 @JsonIgnore 注释，因为该字段无论如何都会被排除在外。

您至少可以在 org.codehaus.jackson:jackson-mapper-asl:1.9.13 和 com.fasterxml.jackson.core:jackson-annotations:2.4.3 中找到@JsonIgnore 注释（这是我使用的）。ObjectMapper 在 jackson-mapper-asl 工件中的位置。这里有趣的部分是，如果我使用来自 jackson-annotations (com.fasterxml.jackson.annotation.JsonIgnore) 的@JsonIgnore - 即使我将 ObjectMapper 配置为仅使用属性，它也不起作用（'set' 作为响应） . 可能是fastxml实现中的一个错误，但我没有找到。

因此，如果您将使用 codehaus 而不是 fastxml（我添加了配置以仅使用字段），那么它工作正常：

```
import org.codehaus.jackson.annotate.JsonAutoDetect;
import org.codehaus.jackson.annotate.JsonIgnore;
import org.codehaus.jackson.map.ObjectMapper;
import org.codehaus.jackson.map.SerializationConfig;

import java.io.Serializable;
import java.util.HashSet;
import java.util.Set;
import java.util.concurrent.CopyOnWriteArraySet;

public class JsonTest implements Serializable {
    @JsonIgnore
    private static JsonTest instance = null;

    private transient Set<String> set = new CopyOnWriteArraySet<String>();

    private JsonTest() {}

    @JsonIgnore
    public static JsonTest getInstance() {
        if (instance == null)
            instance = new JsonTest();
        return instance;
    }

    public void setSet(Set<String> set) {
        this.set = set;
    }

    @JsonIgnore
    public Set<String> getSet() {
        return set;
    }

    public String toString() {
        ObjectMapper mapper = new ObjectMapper();
        mapper.configure(SerializationConfig.Feature.FAIL_ON_EMPTY_BEANS, false);
        mapper.setVisibilityChecker(mapper.getSerializationConfig().getDefaultVisibilityChecker()
                .withFieldVisibility(JsonAutoDetect.Visibility.ANY)
                .withGetterVisibility(JsonAutoDetect.Visibility.NONE)
                .withSetterVisibility(JsonAutoDetect.Visibility.NONE)
                .withCreatorVisibility(JsonAutoDetect.Visibility.NONE));
        try {
            return mapper.writeValueAsString(this);
        } catch (Exception e) {
            e.printStackTrace();
            return null;
        }
    }

    public static void main(String[] args) {
        HashSet<String> set = new HashSet<String>();
        set.add("test");
        JsonTest.getInstance().setSet(set);
        System.out.println(JsonTest.getInstance().toString());
    }
} 
```

# php - 如何通过 post 方法将文本区域内容发送到下一页？

> ID：14664283
> 
> 赞同：1
> 
> 时间：2013-02-02T17:08:07.587
> 
> 标签：php

我有一个文本区域，其中包含一些 html 代码。我想通过 post 方法将这个 textarea 的内容发送到下一页而不做任何更改。

```
<html>
<form id="myform" name="myform" action="./getdata.php" method="post">

<td><textarea rows="7" cols="15" name="outputtext" style="width: 99%;"></textarea></td>

<input type="submit">

</form>
</html> 
```

和我的 php 代码：

```
<?
$file_contents = $_POST['outputtext'];
?>
<textarea rows="30" cols="150"><?PHP  print_r($file_contents); ?></textarea> 
```

我的代码的问题是我的第一个 textarea 的原始内容在发送到下一页时发生了变化！例如：

```
<a href="/season/episodes.php?name=ok&id=1"> 
```

变成：

```
<a href=\"/season/episodes.php?name=ok&id=1\"> 
```

你们能不能保留原始的 html 内容而不在下一页更改？（请注意我在第二页中的所有 html 内容更改，我不想更改）。我在第二页中的第二个 textarea 用于测试目的，我实际上想要解析 $file_contents 的原始值，但由于某种原因它改变了！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-02T17:22:36.850

在您的第二个 PHP 脚本中，只需使用 strip_slashes 删除传递文本中的多余斜杠：

```
<?
$file_contents = stripslashes($_POST['outputtext']);
?>
<textarea rows="30" cols="150"><?PHP  print_r($file_contents); ?></textarea> 
```

# ruby-on-rails - 在 rails admin 中编辑/更新密码，使用 devise

> ID：14664285
> 
> 赞同：1
> 
> 时间：2013-02-02T17:08:17.693
> 
> 标签：ruby-on-rails, devise

我在创建新用户或通过 rails admin 编辑现有用户时遇到问题。用户模型使用设计，密码字段可见但只读。我在初始化程序中覆盖了它，这使得字段可编辑，但验证表明“密码”不能为空。似乎它应该是 attr_accessible 但我有那个设置。似乎是使用 Devise 和 rails admin 的一些技巧，但不确定是什么。导轨 3.2.11

这是我的用户模型设置：

```
devise :database_authenticatable, :trackable, :validatable, :lockable
attr_accessible :email, :password, password_confirmation 
```

在我的 rails_admin.rb （初始化程序）

```
config.model User do

edit do
    field :email
    field :password
    field :password_confirmation
end
end 
```

我也尝试过 edit do field :password do read_only false end do 使字段可编辑，但无法保存，因为它认为密码为空。

# c# - 如何使用 for 循环迭代地链接 IEnumerable.Where()？

> ID：14664290
> 
> 赞同：1
> 
> 时间：2013-02-02T17:08:30.523
> 
> 标签：c#, .net, linq, lambda, ienumerable

考虑以下代码（虽然有点做作，但它是对现实世界程序的主要简化）：

```
string[] strings = { "ab", "abcd", "abc", "ac", "b", "abcde", "c", "bc" };
string[] filters = { "a", "b", "c" };

// iteratively apply each filter
IEnumerable<string> filteredStrings = strings.ToArray();
foreach (string filter in filters)
{
    // in my real-world program lots of processing and stuff
    // happens here, hence why i need the enclosing foreach loop

    filteredStrings = filteredStrings.Where(s => s.Contains(filter));
} 
```

如您所见，代码迭代地将字符串数组过滤为较小的字符串集。当 for-each 循环完成时，`filteredStrings`应该是通过所有过滤器的字符串子集。在这个例子中，这将是：

```
{ "abcd", "abc", "abcde" } 
```

但是，我得到的输出是：

```
{ "abcd", "abc", "ac", "abcde", "c", "bc" } 
```

它似乎只是过滤掉那些不包含的字符串`"c"`，我认为这与它是最后一个过滤器有关。我想我一定没有以`IEnumerable.Where()`正确的方式链接。这里发生了什么，我怎样才能得到正确的输出？

是的，根据我的代码中的注释，该 foreach 循环需要保持不变。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-02T17:13:47.790

where 委托没有以您期望的方式捕获局部变量。变量`filter`正在发生变化，它在所有 where 中都使用最后一个结果，因为 Linq 会进行惰性求值。

将迭代变量复制到本地变量，我相信它会捕获您期望的方式。

```
foreach (string filter in filters)
{
    string localFilter = filter;
    filteredStrings = filteredStrings.Where(s => s.Contains(localFilter));
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-02T17:14:59.423

您正在使用在循环中修改的变量：`filter`

创建它的副本：

```
foreach (string filter in filters)
{
    // in my real-world program lots of processing and stuff
    // happens here, hence why i need the enclosing foreach loop

    string f = filter;
    filteredStrings = filteredStrings.Where(s => s.Contains(f));
} 
```

# java - 绘制 unicode java

> ID：14664291
> 
> 赞同：1
> 
> 时间：2013-02-02T17:08:32.833
> 
> 标签：java

我在paint方法中陷入了Java。打印出特殊字母`System.out`会起作用，但如果我试图用`g.drawString()`.

这将起作用：

```
System.out.println("\u2197"); 
```

这不会：

```
g.drawString("\u2197", 20, 20); 
```

我的屏幕上只有矩形，但没有标志。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-02T17:15:51.757

您应该使用具有您要显示的符号的字体。

# regex - Vim 用 unicode 字符替换

> ID：14664293
> 
> 赞同：4
> 
> 时间：2013-02-02T17:08:57.663
> 
> 标签：regex, unicode, vim

我已经看到有关如何使用 :help regexp 和 \%u 在 vi​​m 中搜索 unicode 字符的提示，但我无法弄清楚如何用十六进制定义的 unicode 字符替换文本。

特殊情况是 DefaultKeyBindings.dict 需要将在注释中打印在该行中映射的字符的注释。

开始：

```
blah blah...\U2234 
```

命令：

```
:s/\v.*\\U(\d{4})/& \/\*\\\\%u\1 \*\/ 
```

结果：

```
blah blah...\U2234 /*\%u2234 */ 
```

目标：

```
blah blah...\U2234 /* ∴ */ 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-02T18:26:34.987

您需要将十六进制 Unicode 值的字符串表示形式转换为它所表示的实际字符。这是 的任务`nr2char()`，可以通过以下方式嵌入到替换中`:help sub-replace-expression`：

```
:substitute+\v.*\\U(\d{4})\zs+\='/* '.nr2char(str2nr(submatch(1),16)).' */'+ 
```

Protip：使用不同的分隔符（我选择`+`了 over `/`），那么你不需要逃避。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-02T18:26:01.303

您可以在替换文本中使用表达式`\=`。将此与`nr2char()`功能相结合以获得可行的解决方案。这是一个开始：

```
s^.*\\U\(\d\{4}\)^\=submatch(0).' // '.nr2char(printf('%d','0x'.submatch(1))) 
```

这将转换行

```
Bla bla ... \U2234 
```

到

```
Bla bla ... \U2234 // ∴ 
```

我根据函数`printf()`的要求用于从十六进制数到十进制数的转换`nr2char()`。我确信这可以改进。

请注意，您必须设置`'encoding'`为 UTF-8 才能使其正常工作，请参阅[`:h nr2char()`](http://vimdoc.sourceforge.net/htmldoc/eval.html#nr2char%28%29).

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-05-29T19:10:12.363

几乎没有那么优雅，但包括在这里供未来的读者阅读。

```
:%s#\U2234#/* ∴ */# 
```

并键入 Control-V u 2 2 3 4 以在表达式中创建角色。

字符上的相关注释“ga”将告诉您 Unicode 值以及键入它的二合字母方法（如果可用）。

# linux - Linux访问内存跟踪过程

> ID：14664295
> 
> 赞同：1
> 
> 时间：2013-02-02T17:09:05.063
> 
> 标签：linux, linux-kernel, linux-device-driver, archlinux

我正在为学术目的编写一个小型跟踪机制。该程序使用 ptrace 跟踪另一个进程，我需要比较不同的方式来访问其内存以检索系统调用参数等信息。

你能告诉我在哪里可以找到一个完整的列表，或者只是告诉我存在哪些不同的机制。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T06:50:50.080

我正在做一个类似的项目。您可以尝试使用它们提供的[Vmtrace](http://linux-mm.org/VmTrace)或[PageTrace](http://linux-mm.org/PageTrace) 以及每个进程访问的页面

# email - 可以使用服务器来收集和分发邮件

> ID：14664302
> 
> 赞同：2
> 
> 时间：2013-02-02T17:09:53.307
> 
> 标签：email, pop3

我们目前在我所在的地方有 POP3 邮件帐户，并尽我所能说服我的经理我们应该使用托管 IMAP 或 Exchange，他不会因为成本而让步。工作人员大多不在办公室，所以这里没有域服务器，但是，我们确实有一个专用服务器，我想知道我是否可以用它来收集邮件并以某种方式从那里分发。

实际上，我要做的是确保邮件存储在最终用户机器以外的其他地方，因为目前备份取决于用户。在此服务器上使用托管 Exchange 或 Exchange 会很简单，但我的经理不会为此付出代价。我见过名为 MailEnable 和 Axigen 的免费邮件服务器，但不确定它们是否能胜任这项工作。抱歉，这似乎是一个简单或愚蠢的问题，但以前从未需要这样做。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T19:12:51.303

I am assuming due to the reference to Exchange that you are on Windows.

If you have an old box lying around that works, you could install linux on it and then choose from a number of different imap servers. Dovecot and Courier are both good choices and I have worked with them before.

You could use fetchmail to then pick up the mailboxes and then deliver to the imap boxes or get them deliver directly.

Setting up such a linux server for email was one of the first things I ever did on Linux. While initially daunting, once you get the hang of it, it is pretty straightforward and there are plenty of resources out there to help.

Ubuntu is probably the easiest to get used to. CentOs is also a reasonable choice.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T19:13:08.993

如果您不愿意管理自己的服务器，则不应该运行自己的服务器，如果您不知道自己在做什么（例如，您搞砸了并且被利用发送垃圾邮件），它们*也不*容易配置）。

查看类似[mailgun](http://www.mailgun.com/)的服务。在我的应用程序中，我们使用它们转发到 REST 端点以及另一个 SMTP 服务器。

最终无法满足我的需求但可能满足您需求的竞争对手包括 Dyn、email yak、Sendgrid 等。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-27T19:31:06.690

为什么不直接设置邮件客户端将他们的邮件文件存储在标准网络驱动器或共享上？我认为这种情况在您看来非常愚蠢 - 100％因为您被要求在其中工作的荒谬限制：我同样会发现我建议的解决方案通常很荒谬；但在这种情况下，这似乎是您问题的一个简单答案 - 用集中式存储和备份代替分布式邮件存储和备份。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-02-27T19:45:37.633

POP3 电子邮件客户端不能选择在服务器上保留副本吗？我的当然可以。请参阅图片上的第二个复选框。![电子邮件](../Images/a3ebc946ae99623e135bab87239b9954.png)

然后，您可以定期备份来自服务器的所有电子邮件，以防止它被阻塞。

# php - 以字符串格式比较两个日期

> ID：14664308
> 
> 赞同：0
> 
> 时间：2013-02-02T17:10:28.710
> 
> 标签：php, string, date, compare

我可以比较像数字这样的字符串中的两个日期吗？或者我应该将它们重新输入为整数？

这段代码可以吗？

```
<?php
$date1 = "20130102";
$date2 = "20151012";

if ($date1 < $date2){
    echo "date1 < date2";
} elseif ($date1 > $date2){
    echo "date1 > date2";
} else {
    echo "date1 = date2";
}
?> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-02T17:14:24.797

在以下条件下，您的代码是安全且正确的：如果您的日期格式类似于 Ymd（根据 php 的[日期函数](http://php.net/manual/en/function.date.php)）

这样做的原因是，在我可以想象的所有字符集中，字符 0-9 的排序与数字 0-9 的排序完全相同。如果你然后使用前导 0，你的字符串排序就像数字一样。

请注意，使用字符串作为日期的数据类型是一种代码异味。见此[页](http://www.codinghorror.com/blog/2012/07/new-programming-jargon.html)（第 7 期）

# python - '尝试在非包中进行相对导入'尽管包在一个目录中具有 __init__.py

> ID：14664313
> 
> 赞同：36
> 
> 时间：2013-02-02T17:10:58.047
> 
> 标签：python, python-2.7, python-import

我有一个名为的模块`extended.py`，其中包含以下行：

```
from .basic import BasicModule 
```

并且该文件`basic.py`与`__init__.py`. 但是，当我尝试将其运行为：

```
python extended.py 
```

我得到错误：

```
ValueError: Attempted relative import in non-package 
```

还添加以下行：

```
from __future__ import absolute_import 
```

不能解决问题。也许我太累了，看不到明显的东西-但我看不到这里的问题。

* * *

## 回答 #1

> 赞同：56
> 
> 时间：2013-02-02T17:14:14.727

相对导入仅适用于包，但是当您导入时，`extended.py`您正在运行*顶级模块*。

当前目录可能包含一个`__init__.py`文件，但它还没有成为`exended.py`包的一部分。

对于要被视为包的东西，您需要导入*目录名称*。以下将起作用：

```
main.py

packagename\
    __init__.py
    basic.py
    extended.py 
```

然后输入`main.py`：

```
import packagename.extended 
```

*然后*才`extended`成为包的一部分并进行相对导入工作。

相对导入现在有一些相*对于*`packagename`父级的东西。

# django - Shopify Python API - 如何搜索产品

> ID：14664319
> 
> 赞同：1
> 
> 时间：2013-02-02T17:11:45.540
> 
> 标签：django, shopify

我已经构建了一个 django 应用程序，它是我产品的主要商店。由此，我将产品发布到我的 Shopify 商店。现在我的 django 应用程序首先知道我的产品何时缺货。

问题：使用 Python API 搜索产品时，我有哪些选项？我可以按标题、变体 SKU 搜索吗？

在发布时存储生成的 ID 是以后获取产品句柄的*唯一方法吗？*

我想这样做 - 例如，我可以在批处理中将产品标记为缺货。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-02T23:50:45.470

存储产品的 id 是以后获取产品句柄的最简单方法。

但是，[产品 API](http://api.shopify.com/product.html#index)显示您可以按供应商、句柄、product_type、collection_id、published_status、updated_at、created_at 或 published_at 过滤产品。

使用[shopify python API](http://wiki.shopify.com/Using_the_shopify_python_api#Receive_a_list_of_all_Products)页面展示了如何通过 find 类方法的关键字参数使用这些过滤器，例如`shopify.Product.find(collection_id=841564295)`列出特定集合中的产品。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-01-08T05:10:02.360

您可以使用官方的[shopify python API](https://github.com/Shopify/shopify_python_api)来查找具有 id 的产品：

```
shopify.Product.exists(product.id)  # => True
product = shopify.Product.find(292082188312) 
```

使用产品标题搜索产品，您可以使用[GraphQL API](https://shopify.dev/docs/admin-api/graphql/reference/products-and-collections/product)

# php - 将 file_get_contents 保存在数据库中

> ID：14664321
> 
> 赞同：0
> 
> 时间：2013-02-02T17:11:53.247
> 
> 标签：php, mysql, loops

我想在我网站的数据库中保存 10.000 个页面。

当我运行该文件时，每个页面都会发生此错误。

> 您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以在 '_trackPageLoadTime']);(function() {var ga = document.createElement("script"); ga' 在第 1 行附近使用正确的语法

我认为有一些字符会导致错误。

保存的.php

```
<?php 
include "conexao.php";

for ($nr=1; $nr<=10000; $nr++){
    $url = "http://www.site.com/u$nr";
    $html = file_get_contents($url);

    set_time_limit(120);

    $tabela_bd = "paginas";

    $sql = mysql_query("INSERT INTO $tabela_bd(html) VALUES('$html')");
    if ($sql) {echo "Cadastrado com sucesso!!";
} else {
echo "Falha ao cadastrar.".mysql_error();
}

}

?> 
```

@edit 解决了我的字符问题，但现在有些表格被保存而没有内容。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-02T17:22:18.080

不要使用已弃用的 mysql_* 函数。请改用 mysqli_* 函数。

更好的是，使用支持占位符的抽象库，例如 PDO。这会根据需要自动应用转义。看：

[http://php.net/manual/en/book.pdo.php](http://php.net/manual/en/book.pdo.php)

占位符的使用示例：

[http://www.php.net/manual/en/pdo.prepare.php](http://www.php.net/manual/en/pdo.prepare.php)

在你的情况下，也许是这样的：

```
$stmt = $pdo->prepare("insert into $tabela_bd( html ) values ( :html )");
$stmt->bindValue('html', $html);
$stmt->execute(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-02T17:17:36.710

您的文件中似乎有转义字符，例如`\`或`;`。您需要做的是确保这些字符不会干扰查询。

用这个

```
$html = mysql_real_escape_string($html);
$sql = mysql_query("INSERT INTO $tabela_bd(html) VALUES('$html')"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-02T17:16:22.687

您没有转义 html 中的特殊字符。尝试 mysql_escape 或类似的东西。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-02T17:17:12.973

您需要转义 $html 变量：

```
$sql = mysql_query("INSERT INTO $tabela_bd(html) VALUES('" . mysql_real_escape_string($html) . "')"); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-02T17:20:11.727

您应该在您的情况下使用[mysql_real_escape_string](http://php.net/manual/en/function.mysql-real-escape-string.php)，如下所示。

```
<?php 
include "conexao.php";

for ($nr=1; $nr<=10000; $nr++){
    $url = "http://www.power-pixel.net/u$nr";
    $html = file_get_contents($url);

    // escape the string
    $html = mysql_real_escape_string($html);

    set_time_limit(120);

    $tabela_bd = "paginas";

    $sql = mysql_query("INSERT INTO $tabela_bd(html) VALUES('$html')");
    if ($sql) {
      echo "Cadastrado com sucesso!!";

    } else {
      echo "Falha ao cadastrar.".mysql_error();
    }

}

?> 
```

# c++ - C++11 数学库变了？

> ID：14664325
> 
> 赞同：1
> 
> 时间：2013-02-02T17:12:10.877
> 
> 标签：c++, c++11

> **可能重复：**
> [round() 用于 C++ 中的浮点数](https://stackoverflow.com/questions/485525/round-for-float-in-c)

我在笔记本电脑上使用了 mingw 和 eclipse 以及 c++98。但是在我的电脑上我有vs2012。

现在我有一个小问题，数学库似乎完全不同。

在 c++98 中，我可以访问`round`和`M_PI`使用`math.h`. 但是在vs2012中它不再存在了。我进行了谷歌搜索，发现以下参考[http://en.cppreference.com/w/cpp/numeric/math/round](http://en.cppreference.com/w/cpp/numeric/math/round)

但`round`不在 cmath 中，也不在 math.h 中。我也找不到`M_PI`

还有其他数学库吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-02T17:23:11.433

`round()`确实在`<cmath>`：[http ://en.cppreference.com/w/cpp/numeric/math/round](http://en.cppreference.com/w/cpp/numeric/math/round)

`M_PI`不是 C 或 C++ 标准的一部分，而是在兼容 POSIX 的系统上提供的。MinGW 试图模仿 POSIX 环境，所以它提供了这个。

你可以得到一个很好的近似值`double pi = 4 * std::atan(1);`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-02T17:19:31.360

`round` *应该*在`<cmath>`标头中（参见 C++11 标准的第 26.8 节，表 119），如果不是，则它是一个实现错误。但是，该`M_PI`常量**不是**C++11 标准的一部分（参见相同的表 119），尽管某些实现确实提供了它。

例如，使用 GCC 4.7.2 和附带的 libstdc++ 实现，此代码编译：

```
#include <cmath>

int main()
{
    int x = std::round(M_PI);
} 
```

确保您`std::`使用`round()`.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-02T17:20:45.273

这些是 C++11 中的新功能。MinGW 之前有它是因为 C 兼容，但是 VS2012 不是 C99 编译器。M_PI 可能是同一个故事。IOW，您依赖于 MinGW 的特定于实现的行为，现在它是标准行为，但 VS 尚未完全升级。

# c# - P/Invoke - 如何使用 ac 函数的结果访问双精度数，该函数将地址返回到双精度数组

> ID：14664331
> 
> 赞同：1
> 
> 时间：2013-02-02T17:12:37.260
> 
> 标签：c#, c, pinvoke

如何从函数 fann_run() 获取浮点数组

这是它的 C 版本。

```
fann_type *calc_out;
fann_type input[2];
struct fann *ann = fann_create_from_file("xor_float.net");
input[0] = -1;
input[1] = 1;
calc_out = fann_run(ann, input);
printf("xor test (%f,%f) -> %f\n", input[0], input[1], calc_out[0]);
fann_destroy(ann); 
```

我正在 C# 中尝试这样做

```
[DllImport("fannfloat.dll", EntryPoint = "fann_run")]
public static extern IntPtr fann_run(IntPtr _ann, float[] _input);

IntPtr ann = FANN.fann_create_from_file("Arial.net");
IntPtr result = FANN.fann_run(ann,input600); 
```

现在我想使用“结果”访问花车。我怎样才能做到这一点 ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-02T17:30:36.033

如果您知道元素的数量，您可以使用[Marshal.Copy 方法](http://msdn.microsoft.com/en-us/library/a53bd6cz.aspx)将值从非托管内存复制到托管数组中：

```
float[] output = new float[7];
Marshal.Copy(result, output, 0, output.Length); 
```

完成后不要忘记释放`result`。

# python - 一维列表索引python：增强MaskableList

> ID：14664333
> 
> 赞同：3
> 
> 时间：2013-02-02T17:12:50.520
> 
> 标签：python, list, sorting, numpy, indexing

我的一个常见问题如下：

作为输入我有（`n`是一些 int `>1`）

```
W = numpy.array(...)
L = list(...) 
```

在哪里

```
len(W) == n
>> true
shape(L)[0] == n
>> true 
```

我想对`L`关于值`W`和比较器的列表进行排序。我的想法是执行以下操作：

```
def my_zip_sort(W,L):
    srt = argsort(W)
    return zip(L[srt],W[srt]) 
```

这应该像这样工作：

```
a = ['a', 'b', 'c', 'd']
b = zeros(4)
b[0]=3;b[1]=2;b[2]=[1];b[3]=4
my_zip_sort(a,b)
>> [(c,1)(b,2)(a,3)(d,4)] 
```

但这不是，因为

```
TypeError: only integer arrays with one element can be converted to an index 
```

因此，我需要做另一个循环：

```
def my_zip_sort(W,L):
    srt = argsort(W)
    res = list()
    for i in L:
        res.append((L[srt[i]],W[srt[i]]))
    return res 
```

我找到了一个关于 a的[线程](https://stackoverflow.com/questions/10274774/python-elegant-and-efficient-ways-to-mask-a-list/10274990)`MaskableList`，但这对我不起作用（正如您可以在评论中看到的那样），因为我不仅需要保留或丢弃列表中的特定值，还需要重新排序它们：

```
a.__class__
>> msk.MaskableList
srt = argsort(b)
a[srt]
>> ['a', 'b', 'd'] 
```

## 结论：

我想找到一种方法来`list`通过约束对对象进行排序`array`。我自己找到了一种方法，除了列表索引之外，这有点好。你能帮我写一个同样适用`MaskableList`于这个任务的类，它有很好的性能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-02T20:36:09.307

您无需扩展即可`list`避免`for`-loop。如果您期望新的A`list-comprehension`就足够了，并且可能是您在这里可以做的最好`list`的`tuples`：

```
def my_zip_sort(W, L):
    srt = argsort(W)
    return [(L[i], W[i]) for i in srt] 
```

例子：

```
n = 5
W = np.random.randint(10,size=5)
L = [chr(ord('A') + i) for i in W]

L # => ['A', 'C', 'H', 'G', 'C']

srt = np.argsort(W)
result = [(L[i], W[i]) for i in srt]

print result
[('A', 0), ('C', 2), ('C', 2), ('G', 6), ('H', 7)] 
```

# jquery-ui - 将函数名称附加到 JQuery 对话框按钮

> ID：14664334
> 
> 赞同：1
> 
> 时间：2013-02-02T17:12:51.280
> 
> 标签：jquery-ui, jquery-ui-dialog

我正在使用 JQuery Dialog 创建一个对话框插件。以下是可以传递的参数。它包括用户想要添加的按钮文本和回调函数名称，该名称将在单击该按钮时执行。

```
 var settings = $.extend({
        message: 'Your action is successful',
        title: 'Message',
        showButton: true,
        buttonText: 'OK',
        onButtonClick: 'OnButtonClick',
        allowClose: true
    }, options); 
```

我在将该函数名称附加到按钮的单击事件时遇到问题。我正在尝试执行以下操作，但会引发错误。

```
 $('#dialog-message').dialog({
        buttons: [{
            text: settings.buttonText,
            click: window[settings.onButtonClick]()

        }],
        closeOnEscape: true,
        close: function (e) {
            $(this).empty();
            $(this).dialog('destroy');
    }
    }); 
```

任何建议我如何才能将该函数名称附加到单击事件，因为我只有函数名称。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T17:21:54.990

插件的调用者应该为`onButtonClick`选项提供回调而不是字符串。像这样：

```
function OnButtonClick(){
   //does some cool stuff
}

var settings = $.extend({
    message: 'Your action is successful',
    title: 'Message',
    showButton: true,
    buttonText: 'OK',
    onButtonClick: OnButtonClick,
    allowClose: true
}, options); 
```

然后你可以像这样绑定传入的函数：

```
$('#dialog-message').dialog({
    buttons: [{
        text: settings.buttonText,
        click: settings.onButtonClick
    }],
    closeOnEscape: true,
    close: function (e) {
        $(this).empty();
        $(this).dialog('destroy');
    }
}); 
```

这是可能的，因为该`onButtonClick`变量现在包含对插件用户通过`settings`他们用于初始化插件提供的回调（而不是字符串）的引用。

希望有帮助！

# ruby - SQLite3 自动递增最后更新项目的值

> ID：14664339
> 
> 赞同：0
> 
> 时间：2013-02-02T17:13:21.733
> 
> 标签：ruby, sqlite

我创建了自己的 SQLite3 库，它运行良好。

现在我在找出条目的自动增量值时遇到了一些麻烦。

我的条目有一个名为 id 的 auto_increment 值，直到我上传条目才设置。

上传 SQLite3 分配给我上传条目的 auto_increment 值后，如何直接获取？

你的，

乔恩

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T21:07:30.073

在 C API 中，最后插入记录的 ID 由[sqlite3_last_insert_rowid() 函数](http://www.sqlite.org/c3ref/last_insert_rowid.html)返回。你的图书馆应该这样称呼。

# linux - 每个应用程序是否都实现了自己的网络堆栈？

> ID：14664342
> 
> 赞同：0
> 
> 时间：2013-02-02T17:13:27.867
> 
> 标签：linux, networking, network-programming, tcp-ip

我想知道是否每个应用程序都有自己的完整 ip 堆栈，或者系统中有一个堆栈并且所有应用程序都使用它。或者，对于每个应用程序，可能有些层是独立的，例如应用程序层，而其余的层是通用的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-02T17:28:44.983

这完全取决于应用程序。简短的回答是，已经有常见的全栈网络实现，每个应用程序都尽可能少地重新实现。尤其：

*   许多现代应用程序中的网络仅限于调用库函数，这些函数接受一个 URL 并返回一个文件，或者可能是一个解析的 JSON 对象，该 URL 的内容。这些应用程序基本上都在第 7 级应用程序层之上运行。整个网络堆栈是共享的。

*   需要对传递的 HTTP 进行更多控制的应用程序（例如 Django Web 应用程序）将实现额外的 HTTP 处理。它们在第 7 级应用程序层运行，其他一切都留给公共库和操作系统。

*   像数据库这样的应用程序，在 HTTP 太笨拙或不够快的情况下，将在 TCP 之上实现它们自己的更高级别的协议。例如，MySQL 网络协议。这些应用程序在第 6 层表示层上运行。

*   诸如 Skype 和某些 VPN 之类的通信应用程序具有 TCP 无法支持的特殊网络要求，例如延迟。所以这些应用程序必须实现它们自己的第 5 层会话，甚至可能是第 4 层传输协议。操作系统处理其他所有事情。

*   调试工具，如 Wireshark 数据包转储器，需要在第 3 层网络和第 2 层数据链路级别运行。其他需要在这个级别上工作的应用程序包括尝试编写新网络协议的人。但这对于大多数应用程序来说是不值得的大量工作。

*   最后，还有一些非常专业的应用领域，比如高频股票交易，甚至以太网都被认为是不够的，整个网络堆栈一直被替换为 1 级物理，采用不同的实现方式，例如使用[Infiniband](http://en.wikipedia.org/wiki/InfiniBand)光纤、自定义协议和自定义开关。

第 1 层物理实现通常固定在硬件中。通过第 5 层会话的第 2 层数据链路通常在操作系统内核中实现，但应用程序可以在它们需要的任何级别“插入”。并且有许多用于第 6 层表示的标准库，例如 OpenSSL，以及用于第 7 层应用程序的标准库。因此，大多数程序共享它们的整个网络堆栈，或几乎所有堆栈，但具有特殊要求的应用程序可以自定义实现任何层，甚至所有层。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-03T07:29:21.510

应用层及以上是在应用程序中。

其余的不是。

# android - 谷歌地图：android.view.InflateException

> ID：14664345
> 
> 赞同：1
> 
> 时间：2013-02-02T17:13:33.543
> 
> 标签：android, google-maps

全部：

我是安卓的新手。现在我要运行一个 Android Maps V2 项目。我按照[https://docs.google.com/document/pub?id=19nQzvKP-CVLd7_VrpwnHfl-AE9fjbJySowONZZtNHzw](https://docs.google.com/document/pub?id=19nQzvKP-CVLd7_VrpwnHfl-AE9fjbJySowONZZtNHzw)中的描述一步一步地进行操作，失败并尝试了很多次，但我不断遇到以下问题：

```
02-03 01:48:48.783: E/AndroidRuntime(11547): FATAL EXCEPTION: main
02-03 01:48:48.783: E/AndroidRuntime(11547): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.example.googlemapdemo/com.example.googlemapdemo.MainActivity}: android.view.InflateException: Binary XML file line #7: Error inflating class fragment
02-03 01:48:48.783: E/AndroidRuntime(11547):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1968)
02-03 01:48:48.783: E/AndroidRuntime(11547):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1993)
02-03 01:48:48.783: E/AndroidRuntime(11547):    at android.app.ActivityThread.access$600(ActivityThread.java:127)
02-03 01:48:48.783: E/AndroidRuntime(11547):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1159)
02-03 01:48:48.783: E/AndroidRuntime(11547):    at android.os.Handler.dispatchMessage(Handler.java:99)
02-03 01:48:48.783: E/AndroidRuntime(11547):    at android.os.Looper.loop(Looper.java:137)
02-03 01:48:48.783: E/AndroidRuntime(11547):    at android.app.ActivityThread.main(ActivityThread.java:4507)
02-03 01:48:48.783: E/AndroidRuntime(11547):    at java.lang.reflect.Method.invokeNative(Native Method)
02-03 01:48:48.783: E/AndroidRuntime(11547):    at java.lang.reflect.Method.invoke(Method.java:511)
02-03 01:48:48.783: E/AndroidRuntime(11547):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:790)
02-03 01:48:48.783: E/AndroidRuntime(11547):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:557)
02-03 01:48:48.783: E/AndroidRuntime(11547):    at dalvik.system.NativeStart.main(Native Method)
02-03 01:48:48.783: E/AndroidRuntime(11547): Caused by: android.view.InflateException: Binary XML file line #7: Error inflating class fragment
02-03 01:48:48.783: E/AndroidRuntime(11547):    at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:697)
02-03 01:48:48.783: E/AndroidRuntime(11547):    at android.view.LayoutInflater.rInflate(LayoutInflater.java:739)
02-03 01:48:48.783: E/AndroidRuntime(11547):    at android.view.LayoutInflater.inflate(LayoutInflater.java:489)
02-03 01:48:48.783: E/AndroidRuntime(11547):    at android.view.LayoutInflater.inflate(LayoutInflater.java:396)
02-03 01:48:48.783: E/AndroidRuntime(11547):    at android.view.LayoutInflater.inflate(LayoutInflater.java:352)
02-03 01:48:48.783: E/AndroidRuntime(11547):    at com.android.internal.policy.impl.PhoneWindow.setContentView(PhoneWindow.java:271)
02-03 01:48:48.783: E/AndroidRuntime(11547):    at android.app.Activity.setContentView(Activity.java:1835)
02-03 01:48:48.783: E/AndroidRuntime(11547):    at com.example.googlemapdemo.MainActivity.onCreate(MainActivity.java:18)
02-03 01:48:48.783: E/AndroidRuntime(11547):    at android.app.Activity.performCreate(Activity.java:4465)
02-03 01:48:48.783: E/AndroidRuntime(11547):    at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1052)
02-03 01:48:48.783: E/AndroidRuntime(11547):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1932)
02-03 01:48:48.783: E/AndroidRuntime(11547):    ... 11 more
02-03 01:48:48.783: E/AndroidRuntime(11547): Caused by: java.lang.RuntimeException: API key not found.  Check that <meta-data android:name="com.google.android.maps.v2.API_KEY" android:value="your API key"/> is in the <application> element of AndroidManifest.xml
02-03 01:48:48.783: E/AndroidRuntime(11547):    at maps.y.z.a(Unknown Source)
02-03 01:48:48.783: E/AndroidRuntime(11547):    at maps.y.z.a(Unknown Source)
02-03 01:48:48.783: E/AndroidRuntime(11547):    at maps.y.z.a(Unknown Source)
02-03 01:48:48.783: E/AndroidRuntime(11547):    at maps.y.ae.a(Unknown Source)
02-03 01:48:48.783: E/AndroidRuntime(11547):    at maps.y.bu.a(Unknown Source)
02-03 01:48:48.783: E/AndroidRuntime(11547):    at maps.y.p.onCreateView(Unknown Source)
02-03 01:48:48.783: E/AndroidRuntime(11547):    at com.google.android.gms.maps.internal.IMapFragmentDelegate$Stub.onTransact(IMapFragmentDelegate.java:107)
02-03 01:48:48.783: E/AndroidRuntime(11547):    at android.os.Binder.transact(Binder.java:297)
02-03 01:48:48.783: E/AndroidRuntime(11547):    at com.google.android.gms.maps.internal.IMapFragmentDelegate$a$a.onCreateView(Unknown Source)
02-03 01:48:48.783: E/AndroidRuntime(11547):    at com.google.android.gms.maps.MapFragment$b.onCreateView(Unknown Source)
02-03 01:48:48.783: E/AndroidRuntime(11547):    at com.google.android.gms.internal.d$4.a(Unknown Source)
02-03 01:48:48.783: E/AndroidRuntime(11547):    at com.google.android.gms.internal.d.a(Unknown Source)
02-03 01:48:48.783: E/AndroidRuntime(11547):    at com.google.android.gms.internal.d.onCreateView(Unknown Source)
02-03 01:48:48.783: E/AndroidRuntime(11547):    at com.google.android.gms.maps.MapFragment.onCreateView(Unknown Source)
02-03 01:48:48.783: E/AndroidRuntime(11547):    at android.app.FragmentManagerImpl.moveToState(FragmentManager.java:806)
02-03 01:48:48.783: E/AndroidRuntime(11547):    at android.app.FragmentManagerImpl.moveToState(FragmentManager.java:1010)
02-03 01:48:48.783: E/AndroidRuntime(11547):    at android.app.FragmentManagerImpl.addFragment(FragmentManager.java:1108)
02-03 01:48:48.783: E/AndroidRuntime(11547):    at android.app.Activity.onCreateView(Activity.java:4243)
02-03 01:48:48.783: E/AndroidRuntime(11547):    at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:673)
02-03 01:48:48.783: E/AndroidRuntime(11547):    ... 21 more 
```

这是我的项目，它非常基本且简短。也许有一个很常见的错误，但如果你能指出我，我将非常感激！

活动主.xml：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    tools:context=".MainActivity" >

    <fragment
        android:id="@+id/map"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        class="com.google.android.gms.maps.MapFragment" />

</RelativeLayout> 
```

AndroidMenifest.xml：

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.example.googlemapdemo"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk
        android:minSdkVersion="8"
        android:targetSdkVersion="17" />
    <permission
        android:name="com.example.googlemapdemo.permission.MAPS_RECEIVE"
        android:protectionLevel="signature"/>
    <uses-permission android:name="com.example.googlemapdemo.permission.MAPS_RECEIVE"/>
    <!-- Copied from Google Maps Library/AndroidManifest.xml. -->
    <uses-permission android:name="android.permission.INTERNET"/>
    <uses-permission android:name="com.google.android.providers.gsf.permission.READ_GSERVICES"/>
    <!-- External storage for caching. -->
    <uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE"/>
    <!-- My Location -->
    <uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION"/>
    <uses-permission android:name="android.permission.ACCESS_FINE_LOCATION"/>
    <!-- Maps API needs OpenGL ES 2.0\. -->
    <uses-feature
        android:glEsVersion="0x00020000"
        android:required="true"/>
    <!-- End of copy. -->

    <application
        android:allowBackup="true"
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:theme="@style/AppTheme" >
        <activity
            android:name="com.example.googlemapdemo.MainActivity"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
            <meta-data
               android:name="com.google.android.maps.v2.API_KEY"
               android:value="xxxx"/>
        </activity>
    </application>

</manifest> 
```

MainActivity.java：

```
package com.example.googlemapdemo;
import com.google.android.gms.maps.GoogleMap;
import com.google.android.gms.maps.MapFragment;
import com.google.android.gms.maps.SupportMapFragment;

import android.os.Bundle;
import android.app.Activity;
import android.support.v4.app.Fragment;
import android.support.v4.app.FragmentActivity;
import android.view.Menu;

public  MainActivity extends Activity  {

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        mGMap = ((MapFragment)  getFragmentManager().findFragmentById(R.id.map))
               .getMap();
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        // Inflate the menu; this adds items to the action bar if it is present.
        getMenuInflater().inflate(R.menu.activity_main, menu);
        return true;
    }
    private GoogleMap mGMap;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-02T17:16:55.337

您正试图`SupportMapFragment`在`FragmentActivity`. 这行不通。要么转换`MainActivity`为 extend `FragmentActivity`，要么使用`MapFragment`代替`SupportMapFragment`. 后一种方法会将您的应用程序限制在 API 级别 11 或更高级别。

此外，正如堆栈跟踪告诉您的那样，`<meta-data>`您的清单中没有包含 API 密钥的元素。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-11-13T03:12:12.513

此链接包含启动 gmaps v2 的步骤： [https ://developers.google.com/maps/documentation/android/start#getting_the_google_maps_android_api_v2](https://developers.google.com/maps/documentation/android/start#getting_the_google_maps_android_api_v2)

在布局中将这些行添加到应用程序中：

```
<meta-data
    android:name="com.google.android.gms.version"
    android:value="@integer/google_play_services_version" /> 
```

# objective-c - 将对象插入 NSMutableArray 时出现意外行为

> ID：14664346
> 
> 赞同：0
> 
> 时间：2013-02-02T17:13:36.057
> 
> 标签：objective-c, cocoa, nsmutablearray

因此，我一直在研究 Objective-C 中的 Project Euler 问题 25，但遇到了[NSDecimalNumber](https://stackoverflow.com/questions/14657802/using-nsdecimalnumber-for-fibonacci-series-with-binets-formula/)的大小限制。因此，在尝试使用其他代码库后，我决定重新表示我的斐波那契数，首先是 s 的数组，`int`然后`NSArray`是 s 的`NSNumber`s。数组中的每个单元格都是一个数字。然后我可以将大数逐位相加，直到第 1000 位。不幸的是出了点问题，我的进位是正确的，但最后一个进位之前的数字似乎总是为零。

我试过计算第 8 个斐波那契数和第 12 个斐波那契数并得到相同的行为。我没有得到 13 和 144，而是得到 10 和 104。我正确地对数字求和，但是

```
[nextFib insertObject: [NSNumber numberWithInt:digitSum] atIndex: arrayIndex]; 
```

似乎没有做我期望的事情。digitSum 在这两种情况下都是 3 和 4，但是一旦我的方法将下一个斐波那契数作为 NSArray 返回，我就会得到一个 0，而我预计是 3 或 4。我已经尝试过它，但我很困惑。它似乎在某些时候有效，但其他时候我动态创建的 NSNumber 没有我期望的值。这是我的整个方法：

```
+ (NSArray*) nextBigFibonancci: (NSArray*) fibZero After: (NSArray*) fibOne
{
  // It's come to manually adding digits in one thousand count arrays.
  // I can't return or pass arrays... will have to use NSArrays for everything, version at least 4.0
  // Since XCode 4.5 I can use array[i] and other array literals... Lets just get it working...

  // Works for Fib 1 and Fib 2 and Fib 3, but not Fib 12...

  int fibZeroDigits = [fibZero count];
  int fibOneDigits = [fibOne count];
  NSMutableArray*  nextFib = [NSMutableArray arrayWithCapacity:1000];
  NSArray* number;
  int arrayIndex = 999;
  int cellCount = fibZeroDigits - 1;
  int digitZero, digitOne, digitSum;

  // There is an Objective-c loop structure for looping through all objects in array, but stick to this...
  for (int j = 0; j < 1000; j++)
  {
    // All the integers must be zero.
    [nextFib insertObject: [NSNumber numberWithInt:0] atIndex: j];
  }

  for (int i = fibOneDigits; i > 0; i--)
  {
    digitZero = [[fibZero objectAtIndex: cellCount] intValue];
    digitOne = [[fibOne objectAtIndex: i - 1] intValue];
    NSLog(@"arrayIndex is: %i", arrayIndex); // arrayIndex seems correct why am I getting 104?
    if (digitZero + digitOne < 10)
    {
        digitSum = digitZero + digitOne + [[nextFib objectAtIndex: arrayIndex] intValue];
        [nextFib insertObject: [NSNumber numberWithInt:digitSum] atIndex: arrayIndex];
    }
    else
    {
        digitSum = digitZero + digitOne - 10 + [[nextFib objectAtIndex:arrayIndex] intValue];
        // This isn't working the second time, though digitSum is added correctly...
        // Getting 1,0,4 for fibTwelve instead of 144
        // Doesn't work for fibEight get 1,0 instead of 13...
        [nextFib insertObject: [NSNumber numberWithInt:digitSum] atIndex: arrayIndex]; 
        [nextFib insertObject: [NSNumber numberWithInt: 1] atIndex: arrayIndex -1];
    }
    arrayIndex = arrayIndex - 1;
    cellCount = cellCount - 1;
  }
  // Must carry the last digit in fibOne if arrays are of different sizes...

  if (fibZeroDigits < fibOneDigits)
  {
    // fibOne has one extra digit
    digitSum = [[fibOne objectAtIndex:0] intValue] + [[nextFib objectAtIndex:arrayIndex - 1] intValue];
    [nextFib insertObject:[NSNumber numberWithInt:digitSum] atIndex:arrayIndex -1];
  }

  // Shouldn't return nextFib, but only the signifigant, ie non zero integers

  // Find first non zero digit and then the range from there until the end of the array nextFib
  for(int n = 0; n < 1000; n++)
  {
    if ([[nextFib objectAtIndex: n] intValue] > 0)
    {
        // First non zero digit.
        NSRange theRange;

        theRange.location = n;
        theRange.length = 1000 - n;

        number = [nextFib subarrayWithRange:theRange];
        break; // Could set n = 1000 which would also break...
     }
   }

  return number;
} 
```

任何想法为什么`digitSum`和`NSNumber`我用它创建的东西在需要携带时没有按预期存储？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T20:34:43.917

正如上面提到的，我发现了自己的错误和更多错误。insertObjectAtIndex 向 NSMutableArray 添加了一个全新的对象，我想用新计算的数字替换前一个数字的 replaceObjectAtIndexWith。

XCode 刚刚更新添加了从调试器中查看 NSArrays 的功能，正如我在上面提到的那样，这本来会很好。这是添加两个 1000 位数字的方法，它可以修改为添加更大的数字，它们甚至不必是斐波那契数。

```
+ (NSArray*) nextBigFibonancci: (NSArray*) fibZero After: (NSArray*) fibOne
{    
    int fibZeroDigits = [fibZero count];
    int fibOneDigits = [fibOne count];
    int loops = fibZeroDigits - 1;
    int fibOneIndex = loops;
    NSMutableArray*  nextFib = [NSMutableArray arrayWithCapacity:1000];
    NSArray* number;
    int arrayIndex = 999;
    int digitZero, digitOne, digitSum;

    // There is an Objective-c loop structure for looping through all objects in array, but I'll just stick to this...
    for (int j = 0; j <= arrayIndex; j++) 
    {
        // All the integers start at zero.
        [nextFib insertObject: [NSNumber numberWithInt:0] atIndex: j];
    }

    if (fibOneDigits > fibZeroDigits)
    {
        fibOneIndex++;
    }

    for (int i = loops; i >= 0; i--)
    {
        digitZero = [[fibZero objectAtIndex: i ] intValue];
        digitOne = [[fibOne objectAtIndex: fibOneIndex ] intValue];
        // Have to use replaceObjectAtIndex not insertObjectAtIndex!
        digitSum = digitZero + digitOne + [[nextFib objectAtIndex: arrayIndex] intValue];
        if (digitSum < 10)
        {
            [nextFib replaceObjectAtIndex: arrayIndex withObject: [NSNumber numberWithInt:digitSum]];
        }
        else
        {
            digitSum = digitSum - 10;
            [nextFib replaceObjectAtIndex: arrayIndex withObject: [NSNumber numberWithInt:digitSum]];
            [nextFib replaceObjectAtIndex: arrayIndex -1 withObject: [NSNumber numberWithInt:1]];
        }
        arrayIndex = arrayIndex - 1;
        fibOneIndex = fibOneIndex -1;
    }
    // Must carry the last digit in fibOne if arrays are of different sizes...

    if (fibZeroDigits < fibOneDigits)
    {
        // fibOne has one extra digit
        digitSum = [[fibOne objectAtIndex:0] intValue] + [[nextFib objectAtIndex:arrayIndex] intValue];
        [nextFib replaceObjectAtIndex: arrayIndex withObject: [NSNumber numberWithInt:digitSum]];
    }

    // Shouldn't return nextFib, but only the signifigant, ie non zero integers
    // Find first non zero digit and then the range from there until the end of the array nextFib
    for(int n = 0; n < 1000; n++)
    {
        if ([[nextFib objectAtIndex: n] intValue] > 0)
        {
            // First non zero digit.
            NSRange theRange;

            theRange.location = n;
            theRange.length = 1000 - n;  

            number = [nextFib subarrayWithRange:theRange];
            break; // Could set n = 1000 which would also break...
        }
    }

    return number;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-02T20:41:58.480

我还使用了 NSNumbers 的 NSArray 来解决这个问题。如果您以相反的顺序存储斐波那契数字的数字，则可以使用更少的代码。

我创建了一个带有 2 个参数的方法，两个 NSArrays 都代表斐波那契数，它返回一个代表下一个数字的 NSArray。因此，要通过将 89 和 144 相加来计算第 13 个斐波那契数，方法两个参数的值是 [9, 8] & [4, 4, 1]，它返回 [3, 3, 2]。

我认为您会发现以这种方式“携带”更简单。如果您是天才数学家，显然[还有一种方法可以在纸上解决这个问题。](http://www.mathblog.dk/project-euler-25-fibonacci-sequence-1000-digits/)

# ruby-on-rails-3 - 如何创建原始 sql 种子迁移

> ID：14664347
> 
> 赞同：3
> 
> 时间：2013-02-02T17:13:38.520
> 
> 标签：ruby-on-rails-3, rails-migrations

我创建了城市模型，并且我将所有需要存储在 .sql 文件中的城市表中的城市。这个 sql 文件有所有需要的“插入”语句。

所以，我想创建一个种子文件来从 sql 文件中添加所有城市。如何使用 sql 命令为数据库播种？

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-02T17:18:09.937

使用以下代码，您将实现您想要的

```
connection = ActiveRecord::Base.connection();
connection.execute("SQL COMMANDS") 
```

那将需要进入您的 seed.rb 文件

然后你需要执行`rake db:seed`

# asp.net - 为 Con.htm 创建 301 重定向

> ID：14664358
> 
> 赞同：0
> 
> 时间：2013-02-02T17:14:36.207
> 
> 标签：asp.net, html, iis-7

CON 是 Windows 文件系统中的保留字。我有一个从许多地方链接的文件 Con.htm。不幸的是，由于文件系统命名限制，我实际上无法上传具有此名称的文件。所以我想创建一个从 Con.htm 到 Con_.htm 的 301 永久移动。但我无法创建文件来执行 HTML 重定向。所以我在我的 Web Config 中尝试了 urlMappings

```
<urlMappings enabled="true">
    <add url="~/0/Con.htm" mappedUrl="~/0/Con_.htm" />
</urlMappings> 
```

但这行不通。所以我为 IIS 7.5 安装了 URL 重写模块。我创建了一个映射条目：

原始值：/0/Con.htm 新值：/0/Con_.htm

这对我也不起作用。我对使用的方法并不特别。任何人都可以提出不同的解决方案或纠正我做错了什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-02T17:59:16.843

不是最实用的，但您可以在 global.asax 中执行此操作。将事件处理程序添加到 Application_BeginRequest，然后执行以下操作：

```
var url = Request.Url.ToString();
if (url.Contains("/con.html"))
   Response.RedirectPermanent("final URL"); 
```

[在此处查看有关 RedirectPermanent 的](http://msdn.microsoft.com/en-us/library/system.web.httpresponse.redirectpermanent.aspx)更多信息。

# apache - 服务器发送事件连接未与 Apache/Thin/Sinatra 保持打开状态

> ID：14664362
> 
> 赞同：2
> 
> 时间：2013-02-02T17:15:06.003
> 
> 标签：apache, sinatra, thin, server-sent-events

我正在尝试使用 Apache/Thin/Sinatra 设置基本的服务器端事件功能。当我直接运行瘦服务器时，一切都按预期工作。当我使用 RackBaseURI 配置设置通过 Apache 运行瘦服务器时，一切仍然有效，但连接没有保持。它经历了一个打开的周期，将一些数据写入浏览器并立即关闭。似乎是 Apache 配置问题？

我已经浏览了 Apache 配置，没有看到任何看起来会阻止打开连接的东西。因为我不确定错误在哪里，所以我不想发布无休止的配置数据，所以如果我遗漏了一些东西，我可以包含更多......

sinatra (1.3.4)、thin (1.5.0)、Apache/2.2.22 (Ubuntu)、ruby 1.8.7

JavaScript...

```
$j(function(){

  console.log("Starting...");

  var es = new EventSource("/stream_event");

  es.addEventListener('message', function(e) {
    console.log(e.data);
  }, false);

  es.addEventListener('open', function(e) {
    console.log("Connection Open");
  }, false);

  es.addEventListener('error', function(e) {
    console.log("error = " + e.eventPhase)
    if (e.eventPhase == EventSource.CLOSED) {
      console.log("Connection Closed");
    }
  }, false);
} 
```

服务器端 sinatra/ruby..

```
set :server, :thin
connections = []

get '/' do
  content_type 'text/event-stream'
  stream(:keep_open) { |out| 
    connections << out
    out << "data: hello\n\n" 
  }
end

get '/post_message' do
  connections.each { |out| out << params[:message] << "\n" }
  "message sent"
end 
```

编辑：

这是我在浏览器控制台中看到的输出......

```
Connection Open
hello
error = 2
Connection Closed
Connection Open
hello
error = 2
Connection Closed 
Connection Open
hello
error = 2
Connection Closed 
Connection Open
hello
error = 2
Connection Closed 
Connection Open
hello
error = 2
Connection Closed 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-03T16:54:07.463

似乎与 RackBaseURI 配置设置有关。通过删除该属性并使用 Apache 的代理功能将流量引导到我的 Sinatra 应用程序，我能够让事情正常工作......

```
ProxyPass /stream_event http://127.0.0.1:9292
ProxyPassReverse /stream_event http://127.0.0.1:9292 
```

这里的主要缺点是我需要使用其他进程手动启动和监控正在运行的 Sinatra 应用程序。

# android - webChromeClient 在浏览器中打开链接

> ID：14664363
> 
> 赞同：20
> 
> 时间：2013-02-02T17:15:13.043
> 
> 标签：android, webchromeclient

我已经搜索并阅读了很多帖子，但无法弄清楚如何在我的代码中做到这一点。

我想在我的应用程序中使用地理定位，并且需要在 webChromeClient 中查看，而不是我现在用于 html 文件的 webViewClient，并且链接确实保持在同一个视图中。

当我将其更改为 webChromeClient 时，html 链接，如`<a href="http://url/file.php?q=123"`，突然在浏览器中打开！

我怎样才能防止这种情况？

```
myWebView = new WebView(this);  
myWebView.getSettings().setJavaScriptEnabled(true);   
myWebView.getSettings().setLoadWithOverviewMode(true);
myWebView.getSettings().setUseWideViewPort(true);
myWebView.getSettings().setGeolocationEnabled(true);
myWebView.setWebChromeClient(new WebChromeClient() {
public void onGeolocationPermissionsShowPrompt(String origin, android.webkit.GeolocationPermissions.Callback callback) { 
        callback.invoke(origin, true, false); }
});
myWebView.loadUrl("file:///android_asset/HTML/index.html");
setContentView(myWebView); 
```

* * *

## 回答 #1

> 赞同：75
> 
> 时间：2014-04-07T16:58:40.243

[WebChromeClient](http://developer.android.com/reference/android/webkit/WebChromeClient.html)不包含 shouldOverrideUrlLoading 方法，WebViewClient 包含。请记住，如果指定，“WebView”可以并且确实同时使用 WebViewClient 和 WebChromeClient。WebViewClient 添加了对您不可用且未分配客户端的方法（在 Web 视图中保持导航）。与 WebChromeClient 相同，它具有可以使用的特定方法（例如在加载时获取页面标题）。

所以你可以像这样构建你的代码：

```
WebView web = (WebView)findViewById(R.id.web);
WebSettings webSettings = web.getSettings();
webSettings.setJavaScriptEnabled(true);
webSettings.setGeolocationEnabled(true);
webSettings.setSupportMultipleWindows(true); // This forces ChromeClient enabled.    

web.setWebChromeClient(new WebChromeClient(){
    @Override
    public void onReceivedTitle(WebView view, String title) {
         getWindow().setTitle(title); //Set Activity tile to page title.
    }
});

web.setWebViewClient(new WebViewClient() {
    @Override
    public boolean shouldOverrideUrlLoading(WebView view, String url) {
        view.loadUrl(url);
        return false;
    }
}); 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-03-13T22:09:53.240

除了 WebChromeClient 之外，我还可以通过设置一个虚拟的 WebViewClient 来解决这个问题。不知道为什么，但是当我取出这条线时，网页又开始在浏览器中打开。

```
mBrowser.setWebViewClient(new WebViewClient()); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-02T21:28:53.990

要在浏览器中打开链接，您可以使用`intent`in`shouldOverrideUrlLoading`方法在浏览器中启动 URL，而不是使用 your`webview`来处理链接：

```
webView.setWebViewClient(new WebViewClient(){
    public boolean shouldOverrideUrlLoading(WebView view, String url) {
        if (url != null && url.startsWith("http://")) {
            view.getContext().startActivity(
                new Intent(Intent.ACTION_VIEW, Uri.parse(url)));
            return true;
        } else {
            return false;
        }
    }
} 
```

如果要在 webview 中加载，请使用：

```
WebViewClient yourWebClient = new WebViewClient()
{
   // Override page so it's load on my view only
   @Override
   public boolean shouldOverrideUrlLoading(WebView  view, String  url)
   {
         // This line we let me load only pages with an anchor tag
         if ( url.contains("url") == true )
           //Load new URL Don't override URL Link
        return false;

   // Return true to override url loading (In this case do nothing).
   return true;
    }
}; 
```

# php - 将一个值插入多个表

> ID：14664368
> 
> 赞同：1
> 
> 时间：2013-02-02T17:15:39.310
> 
> 标签：php, mysql

好的，我正在尝试将 php 表单中的值提交到多个表中。我的 php 代码工作正常，但是诸如`patientID`插入到“ `patients`”中的值例如：`PatientID; 100`很好，但是相同的值`PatientID`没有将相同的唯一值插入到另一个表中，例如：“ `Disease`”表。难道我做错了什么？

**修改后的问题

我不确定我是否正确分配了表之间的关系。以下是表格和它们之间的关系。

```
Patient Attends Accident & Emergency 
Patient seen_by Nurse
Nurse assesses disease of patient 
{{nurse assigns priority to patient}} Priority linked to patient and nurse
{{nurse gives patient waiting time}} Time linked to nurse and patient 
{{doctor will see patient based on their waiting time and priority}} Doctor linked to both time and priority. 
Accident & Emergency; (ID(PK), PatientID(FK) Address, City, Postcode, Telephone)
Patient (ID(PK), Forename, Surname, Gender, Dateofbirth, Address, Patienthistory, illness, 
Nurse(ID(PK) Forename, surname)
Assesses(ID(PK)NurseID(FK), PatientID(FK))
Disease(ID(PK), illness, symptoms, diagnosis, treatment) {{nurse assesses disease of patient (these tables should all be linked}}
Priority (ID, NurseID(FK), PatientID(FK), DoctorID(FK), Priority)
Time(ID,NurseID, PatientID, DoctorID, Arrival Time, Expected waiting time, Discharge time)
Doctor (ID,Firstname, Surname) 
```

修改后的 PHP 代码。ID 没有插入到表中；例如：PatientID 未插入到疾病表中。

```
<?php
$con = mysql_connect("localhost","root","") or die('Could not connect: ' . mysql_error());
mysql_select_db("a&e", $con) or die('Could not select database.');

//get NURSE values from form
$nurse_ID = $_POST['nurse_ID'];
$nurse_name = $_POST['nurse_name'];
$nurse_lastname = $_POST['nurse_lastname'];

//get Disease values from form
$disease_ID = $_POST['disease_ID'];
$symptoms = $_POST['symptoms'];
 $diagnosis = $_POST['diagnosis'];
$treatment = $_POST['treatment'];

//get Patient values from form 
$patient_id = $_POST['patient_id'];
$patient_name = $_POST['patient_name'];
$patient_lastname = $_POST['patient_lastname'];
$gender = $_POST['gender'];
 $dateOfBirth = $_POST['dateOfBirth'];
$monthOfBirth = $_POST['monthOfBirth'];
$yearOfBirth = $_POST['yearOfBirth'];
$address = $_POST['address'];
$history = $_POST['history'];
$illness = $_POST['illness'];
$priority = $_POST['priority'];
$priority_id = $_POST['priority_id'];

// Validate
$date = $dateOfBirth.'-'.$monthOfBirth.'-'.$yearOfBirth;

$sql ="INSERT INTO Nurse(Forename, Surname)
VALUES('$nurse_name', '$nurse_lastname')";
mysql_query($sql,$con) or die('Error: ' . mysql_error());
echo "$nurse_ID"; mysql_insert_id(); //get the assigned id for a nurse

$sql ="INSERT INTO Disease(Illness, Symptoms, Diagnosis, Treatment, PatientID)
   VALUES('$illness', '$symptoms', '$diagnosis', '$treatment', '$patient_id')";
mysql_query($sql,$con) or die('Error: ' . mysql_error());
echo "$patient_id"; mysql_insert_id(); //get the assigned id for a patient 

//use nurse_id and patient_id
$sql ="INSERT INTO Priority(NurseID, PatientID, Priority)
   VALUES('$nurse_ID', '$patient_id', '$priority')";
mysql_query($sql,$con) or die('Error: ' . mysql_error());
echo "$priority_id"; mysql_insert_id(); //get the assigned id for priority
echo "$patient_id"; mysql_insert_id(); //get the assigned id for a patient

$sql="INSERT INTO Patient(Forename, Surname, Gender, Date_Of_Birth, Address, Patient_History, Illness, Priority)
  VALUES     ('$patient_name', '$patient_lastname', '$gender', '$date', '$address', '$history', '$illness', '$priority')";
 mysql_query($sql,$con) or die('Error: ' . mysql_error());
 echo "$patient_id"; mysql_insert_id(); //get the assigned id for a patient

echo "1 record added";
 // close connection 
 mysql_close($con);
 ?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T17:49:47.333

虽然我不完全理解您的系统应该如何工作，但您可以在以下代码中看到它永远不会为疾病 ID 和患者 ID 插入不同的 ID：

```
$sql ="INSERT INTO Disease(ID, Illness, Symptoms, Diagnosis, Treatment, PatientID)
VALUES('$id', '$illness', '$symptoms', '$diagnosis', '$treatment', '$id')"; 
```

基本上，您插入的疾病 ID 与患者 ID 完全相同。您可能希望为这些变量设置不同的变量。

**关于我上面的评论：**

您可以像这样过滤：

```
$id = intval($_POST['ID']);
$name = filter_input(INPUT_GET | INPUT_POST, $_POST['name']); // works in PHP 5.2.x and above 
```

关于 MySQL，请参阅这篇文章： [为什么我不应该在 PHP 中使用 mysql_* 函数？](https://stackoverflow.com/questions/12859942/why-shouldnt-i-use-mysql-functions-in-php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-02T18:09:23.827

1.  您需要为不同的实体（护士、患者、疾病等）使用唯一的 ID、姓名和姓氏。`INSERT`然后在语句中适当地使用它们。请参阅下面的修订代码。
2.  在脚本的开头只选择一次你的数据库`mysql_select_db`（如果你打算坚持使用 mysql_*）。
3.  在插入之前对用户的输入进行清理和验证。
4.  按正确（逻辑）顺序（护士、患者、疾病、优先级）插入您的记录。
5.  现在你所有的 id 都是通过 POST 来的。您可以考虑在 mysql 中使用 id 自动更新。
6.  你有一个缺失的变量`$priority_id`。我已经把它放在修改后的代码中，假设你通过`POST`.
7.  做正确的错误处理不仅仅是`die()`.
8.  最好考虑切换到 PDO 或 mysqli_* 并使用准备好的语句。

修改后的代码（**更新**）：

假设是为每个表的列`auto_increment`启用。`id`

```
$con = mysql_connect("localhost","root","") or die('Could not connect: ' . mysql_error());
mysql_select_db("a&e", $con) or or die('Could not select database.');

//get NURSE values from form
//We don't need to post an id for a Nurse since mysql will assign it for us
//$nurse_id = $_POST['nurse_id'];
$nurse_name = $_POST['nurse_name']; 
$nurse_lastname = $_POST['nurse_lastname'];

//get Disease values from form
// We don't need to post an id for a Disease since mysql will assign it for us
//$disease_id = $_POST['disease_id'];
$symptoms = $_POST['symptoms'];
$diagnosis = $_POST['diagnosis'];
$treatment = $_POST['treatment'];

//get Patient values from form
//We don't need to post an id for a Patient since mysql will assign it for us
//$patient_id = $_POST['patient_id'];
$patient_name = $_POST['patient_name'];
$patient_lastname = $_POST['patient_lastname'];
$gender = $_POST['gender'];
$dateOfBirth = $_POST['dateOfBirth'];
$monthOfBirth = $_POST['monthOfBirth'];
$yearOfBirth = $_POST['yearOfBirth'];
$address = $_POST['address'];
$history = $_POST['history'];
$illness = $_POST['illness'];
$priority = $_POST['priority'];

//We don't need to post an id for a Priority entity since mysql will assign it for us
//missing variable
//$priority_id = $_POST['priority_id'];

//Sanitize and validate your input here 
// ...skipped
// Validate
$date = $dateOfBirth.'-'.$monthOfBirth.'-'.$yearOfBirth;

//We don't provide an id for a Nurse since mysql will assign it for us
$sql ="INSERT INTO Nurse(Forename, Surname)
       VALUES('$nurse_name', '$nurse_lastname')";
mysql_query($sql,$con) or die('Error: ' . mysql_error());
$nurse_id = mysql_insert_id(); //get the assigned id for a nurse

//We don't provide an id for a Patient since mysql will assign it for us
$sql="INSERT INTO Patient(Forename, Surname, Gender, Date_Of_Birth, Address, Patient_History, Illness, Priority)
      VALUES('$patient_name', '$patient_lastname', '$gender', '$date', '$address', '$history', '$illness', '$priority')";
mysql_query($sql,$con) or die('Error: ' . mysql_error());
$patient_id = mysql_insert_id(); //get the assigned id for a patient

//We don't provide an id for a Disease since mysql will assign it for us
$sql ="INSERT INTO Disease(Illness, Symptoms, Diagnosis, Treatment, PatientID)
       VALUES('$illness', '$symptoms', '$diagnosis', '$treatment', '$patient_id')";
mysql_query($sql,$con) or die('Error: ' . mysql_error());

//We don't provide an id for a Priority since mysql will assign it for us
//But we use $nurse_id and $patient_id that we get earlier
$sql ="INSERT INTO Priority(NurseID, PatientID, Priority)
       VALUES('$nurse_id', '$patient_id', '$priority')";
mysql_query($sql,$con) or die('Error: ' . mysql_error());

echo "1 record added";
// close connection 
mysql_close($con); 
```

# java - Java中是否有像C++这样的成员初始化列表语法？

> ID：14664374
> 
> 赞同：6
> 
> 时间：2013-02-02T17:16:40.657
> 
> 标签：java, c++, language-design

我是一名 Java 程序员，目前正在阅读有关设计模式的 GoF 书籍，其中示例以 C++ 和 Smalltalk 语法给出。我在 C++ 中遇到了一种特殊的语法，我发现它被称为[成员初始化列表](https://stackoverflow.com/questions/1711990/what-is-this-weird-colon-member-syntax-in-the-constructor)。从给出的答案看来，使用成员初始化列表似乎比使用成员变量赋值是一种好习惯（效率更高）。Java中有类似的东西吗？如果不是，那么 Java 设计者没有加入这个特性应该是有充分理由的。您对此有何看法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-02T18:19:07.900

谢天谢地，在 C++ 中需要它的原因不适用于 Java。

字段只是引用或原语，因此您不必担心正在构造字段对象并对它们执行赋值操作。

Java 允许在构造函数主体中只分配一次 final 字段（尽管这方面的规范非常冗长）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-02T17:20:52.463

不，您需要在其声明、构造函数或从构造函数调用的初始化方法中初始化成员。

（假设成员需要超出其默认值的初始化。）

# xcode - 在 Xcode 中调试目录和文件创建

> ID：14664378
> 
> 赞同：0
> 
> 时间：2013-02-02T17:17:06.350
> 
> 标签：xcode, file, debugging, directory, save

我用了

```
NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask,YES); 
```

保存文件并在应用程序中创建一些目录。是否可以在调试器中查看这些文件和目录？就像到达断点后，我可以查看应用程序的 Document 文件夹。`NSFileManager`我能想到的唯一可能的解决方案是使用各种方法进行大规模 NSLogging 。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T12:03:47.380

哦，没关系，我已经找到了。转到管理器->设备->单击您的设备->应用程序->单击您的应用程序

文件夹将在下面填充。但是它不会自动更新，您必须单击其他位置并返回才能查看更新的结果。

# ruby - 在 Grape APi 示例代码中执行 rake db:setup 时出错

> ID：14664382
> 
> 赞同：0
> 
> 时间：2013-02-02T17:17:31.890
> 
> 标签：ruby, api, rest, grape-api

这是打字的错误`rake db:setup`

```
git://github.com/leftbee/em-postgresql-adapter.git (at master) is not checked out. Please run `bundle install` 
```

所以我尝试运行捆绑安装，但之后仍然出现此错误。我正在关注这个入门帖子

```
https://github.com/djones/grape-goliath-example 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T18:55:18.473

试试`bundle exec rake db:setup`吧。

# c++ - 当我希望调用基类构造函数时，如何在派生类中初始化成员 const 引用？

> ID：14664390
> 
> 赞同：0
> 
> 时间：2013-02-02T17:18:05.827
> 
> 标签：c++, class, reference, constants, derived

我什至在任何地方都找不到这个问题......所以这让我相信我在这里做错了什么......

假设我有一个基类 A，它带有一个接受 int 参数的构造函数。在我的派生类 B 中，我希望调用该构造函数，但还要初始化 B 的构造函数中传递的成员引用。我怎样才能做到这一点？如果我调用基类构造函数，我找不到添加初始化列表的语法。这可能吗？

可以说我有：

```
Class Object
{
   Object(){}
}

Class A
{
   A(int number) : m_number(number){}

public:
   int m_number;
} 
```

现在，如果我想调用 A 的非默认构造函数，我将如何初始化 m_obj？

例如

```
Class B : Class A
{
   B(int number, const Object& objRef) : A(number)
   {
       m_obj = objRef; //error, : must be initialized in constructor base/member  
                       // initializer list...but I cannot access an initializer list!!
   }

private: 
   const Object& m_obj;
} 
```

正如我所说，我的意图在这里可能都是错误的，但如果它是有效的，我在谷歌上找不到任何语法示例。

对我放轻松... :)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-02T17:23:20.370

在构造函数的初始化列表中：

```
B(int number, const Object& objRef) : A(number), m_obj(objRef)
{} 
```

（注意，这与 this 作为子类无关。您始终需要使用初始化列表来初始化作为引用的成员变量。）

# javascript - 如何使选项对象被选为默认值

> ID：14664391
> 
> 赞同：0
> 
> 时间：2013-02-02T17:18:06.290
> 
> 标签：javascript, json, dom

以下代码在页面加载之前触发。现在我已经设法用值填充选择。但我不确定如何使第一个值成为默认选择值。

```
$(document).on('pagebeforeshow', '#searchpage',
//This function is the whole function that runs when the pagebefore event occurs
function () {
    //This reads the universities from the api we created
    $.getJSON(AddressAccess + "Home/university/format/json",

    function (data) {
        //The data is sent back in a collection of objects. We need to extract each object and do relative operations
        for (var i = 0; i < data.length; i++) {
            var university = data[i];
            var SelectDropDown = document.getElementById("searchuniversity");
            var NewOption = new Option(university.Name, university.UniverstiyID);

            if (i == 1) {
                SelectDropDown.add(NewOption, Selected);
            } else {
                SelectDropDown.add(NewOption);
            }

        };
    });
}); 
```

现在，如果我使用`SelectDropDown.add(NewOption,Selected);`只有一个选项作为选择中的一个选项，我想要的只是将从我的 json 数据中读取的第一个选项作为出现在选择中的默认选项。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T17:24:14.557

设置`selectedIndex`为`SelectDropDown`1：

```
if (i == 1) {
  SelectDropDown.add(NewOption);
  SelectDropDown.selectedIndex = 1;
} 
```

如果您真的在谈论选项列表中的*第一个*`selectedIndex`选项，则应该为 0。元素的`options`数组`select`从零开始。

[**编辑**]根据您的评论：
也许`select`已经包含一个空白选项。尝试：

```
if (i < 1) {
  SelectDropDown.options.length = 0;
  SelectDropDown.add(NewOption);
  SelectDropDown.selectedIndex = 0;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-02T18:36:18.093

只需将[`defaultSelected`元素的属性](https://developer.mozilla.org/en-US/docs/DOM/HTMLOptionElement)设置为 true：

```
var newOption = new Option(university.Name, university.UniverstiyID);
newOption.defaultSelected = true; 
```

或者使用[`Option`构造函数](https://developer.mozilla.org/en-US/docs/DOM/Option)的参数：

```
var newOption = new Option(university.Name, university.UniverstiyID, true, true); 
```

# android - Android中的动态嵌套视图在旋转后无法正确恢复布局

> ID：14664396
> 
> 赞同：2
> 
> 时间：2013-02-02T17:18:23.797
> 
> 标签：android, nested, android-viewpager, fragment, android-framelayout

我在 Tab-Viewpager 中创建了一个 MasterDetailFlow 片段。你可以在这里找到源代码： [https ://github.com/M1cha/android_MasterDetailFlow_with_tabs](https://github.com/M1cha/android_MasterDetailFlow_with_tabs)

基本上，ViewPager 中的 Fragment 通过 Inflater 加载布局并动态添加嵌套的 Fragment。

布局包含一个（静态）FrameLayout，在单击 ListItem 后将插入另一个片段。问题是旋转屏幕后这个 FrameLayout 是不可见的。我只能看到动态插入的 ListFragment。

有任何想法吗？

# php - 函数及其返回值的问题

> ID：14664399
> 
> 赞同：0
> 
> 时间：2013-02-02T17:18:59.397
> 
> 标签：php, function

我制作了这种积分系统，用户可以在其中使用积分。用户积分确实会被扣除。我没有包括很多变量，但它们都还可以。问题发生在`return($success)`和`return($error_message)`。

这是代码：

```
function died($error) {
    header("Location: error_points_on.php?error=" . $error);
    die();
}

function success($success) {
    header("Location: success_points_on.php?success=" . $success);
    die();
}
function quote_smart($value, $handle) {

if (get_magic_quotes_gpc()) {
$value = stripslashes($value);
}

if (!is_numeric($value)) {
$value = "'" . mysql_real_escape_string($value, $handle) . "'";
}
return $value;
}

function product($price,$points, $name, $uname, $error_message, $success_message) {

    $user_name = "cencord";
    $pass_word = "cencord";
    $database = "cencord";
    $server = "cencord";

    $db_handle = mysql_connect($server, $user_name, $pass_word);
    $db_found = mysql_select_db($database, $db_handle);

 if ($db_found) { // connect to DB

            $uname = quote_smart($uname, $db_handle);
            $SQL = mysql_query("SELECT points FROM members WHERE username=$uname");
            $points = mysql_fetch_row($SQL);

            $points = $points[0]; // make it a variable rather then an array

    if ($points >= $price) {

         $points = $points-$price; // fjern points

         $points = quote_smart($points, $db_handle);

         mysql_query("UPDATE members SET points=$points WHERE username = $uname");

         $success_message .= "The " . $name . " has been mailed to your E-mail, please allow 5 minutes for it to arrive.<br />";
         return($success_message);
    }

        else if ($points < $price) {

        $error_message .= "You have " . $points . " you need " . $price . " points to purchase a " . $name;
        return($error_message);
        }

else if (!$db_found) {
$error_message .= "Could not connect to the database, please contact support";
return($error_message);
    }
}
}

  if($Checked1 == true) {
      product(400, $points, "Some string", $uname,     $error_message, $success_message); //price and name
}
  if($Checked2 == true) {

      product(400, $points, "Some string", $uname,     $error_message, $success_message);
}

 if(strlen($error_message) > 0) {
    died($error_message);
  }
 if(strlen($success_message) > 0) {
    success($success_message);
  }

echo "error didnt pass at all"; 
```

我可以添加

```
header("Location: success_points_on.php?success=" . $success); 
```

而不是退货，但我希望用户能够购买多件商品（添加它而不是退货确实有效）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T17:52:15.400

我同意@leftclickben 上面所说的一切，但想再补充一点。我似乎在调用 之后的代码中使用了`$error_message`和的值，但是要让函数改变它们的值，你必须通过引用传递它们，使用符号。`$success_message``product()``&`

将您的函数原型更改为

```
function product($price,$points, $name, $uname, &$error_message, &$success_message) { 
```

并且值的更改将在函数返回后可用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-02T17:47:31.757

你的逻辑嵌套是错误的。去掉胆量，只留下 if 语句，你的`product()`函数中有：

```
function product($price,$points, $name, $uname, $error_message, $success_message) {
    if ($db_found) { // connect to DB
        if ($points >= $price) {
            $success_message = "blah";
            return($success_message);
        } 
        else if ($points < $price) {  // This if () part is redundant, btw
            $error_message = "blah";
            return($error_message);
        }
        else if (!$db_found) {
            $error_message .= "blah"; // This should be = instead of .=
            return($error_message);
        }
    }
} 
```

你想要的是：

```
function product($price,$points, $name, $uname, &$error_message, &$success_message) {
    if ($db_found) { 
        if ($points >= $price) {
            $success_message = "blah";
            return($success_message); // this is redundant actually
        } else {
            $error_message = "blah";
            return($error_message);  // this is redundant actually
        }
    } else {
        $error_message = "blah";
        return($error_message);  // this is redundant actually
    }
} 
```

我强烈建议使用一些工具，例如 IDE，它可以使您的代码保持正确格式，这将使这些类型的问题更容易看到。

编辑

我也刚刚注意到您没有通过引用传递 $error_message 和 $success_message ，这将导致进一步的问题。上面所做的更改（在第二个示例中）但此代码仍然不是我所说的最佳实践。

# java - 如何从字符中检查 J2ME 中的字母

> ID：14664401
> 
> 赞同：5
> 
> 时间：2013-02-02T17:19:11.437
> 
> 标签：java, java-me

如何从字符中检查 J2ME 中的字母

在 J2SE 中，我们可以使用 Character.isLetter(c)

我想用这个： `if (Character.isLetter(c) && Character.isUpperCase(c)){}` 还有`else if(Character.isSpace(c))`

IN JAVA MOBILE Platform 有什么办法使用吗？？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-03T06:04:33.497

看到你不能使用`Character.isLetter(c)`，我只是在功能上模仿它。我会通过使用字符的[ASCII 值](http://en.wikipedia.org/wiki/ASCII#ASCII_printable_characters)将字符视为“数字”来做到这一点。

```
public static boolean isLetter(char c) {
    return (c > 64 && c < 91) || (c > 96 && c < 123);
}

//Not necessary but included anyways
public static boolean isUpperCase(char c) {
    return c > 64 && c < 91;
}

public static boolean isSpace(char c) {
    //Accounts for spaces and other "space-like" characters
    return c == 32 || c == 12 || c == 13 || c == 14;
} 
```

编辑：感谢@Nate 的建议/更正

# mysql - 在不存在的地方插入选择

> ID：14664404
> 
> 赞同：2
> 
> 时间：2013-02-02T17:19:26.663
> 
> 标签：mysql

您好我仍在为以下代码而苦苦挣扎

```
INSERT INTO m4zbv_mt_cfvalues (cf_id, link_id,value) 
    SELECT 87,link_id,1
    FROM m4zbv_mt_links WHERE Upper(`link_name`) like'%#VMWARE APPLIANCE DEFAULT PASSWORDS%'
    WHERE NOT EXISTS(select cf_id, link_id from m4zbv_mt_cfvalues where cf_id=87 and link_id=m4zbv_mt_links.link_id) 
```

这部分工作正常：

```
INSERT INTO m4zbv_mt_cfvalues (cf_id, link_id,value) 
    SELECT 87,link_id,1
    FROM m4zbv_mt_links WHERE Upper(`link_name`) like'%#VMWARE APPLIANCE DEFAULT PASSWORDS%' 
```

我不确定如何`m4zbv_mt_links.link_id`从第一个选择中传递值以及如何集成`WHERE NOT EXISTS`

谢谢你的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T17:25:30.123

它应该`and`代替`where`：

```
INSERT INTO m4zbv_mt_cfvalues (cf_id, link_id,value) 
SELECT 87,link_id,1
FROM m4zbv_mt_links WHERE Upper(`link_name`) like'%#VMWARE APPLIANCE DEFAULT PASSWORDS%'
and NOT EXISTS
               (select cf_id, link_id 
                from m4zbv_mt_cfvalues 
                where cf_id=87 and link_id=m4zbv_mt_links.link_id) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-02T17:25:57.313

如果您要做的只是避免重复，只需 INSERT IGNORE （并删除 WHERE NOT EXISTS 子句）

# svg - SVG：Drop-Shadow 过滤器在移动 Safari 上对 SVG 进行像素化

> ID：14664407
> 
> 赞同：4
> 
> 时间：2013-02-02T17:19:38.123
> 
> 标签：svg, safari, mobile-safari, vector-graphics, svg-filters

`img`我在使用标签嵌入的 SVG 文件中使用投影过滤器。在我的 MacBook 上，它在 Safari 中看起来不错。但是，在移动版 Safari 中，图像会变得非常像素化并失去其所有清晰度。未应用过滤器时，SVG 呈现良好。除了传递过滤器之外，还有什么方法可以解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2020-02-04T12:53:57.977

不幸的是，我为此尝试了所有建议的解决方法，但都没有奏效，唯一对我有用的是将 svg 内联，而不是作为 img 标签。

很惊讶这个问题似乎已经存在了这么久！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-03T05:34:11.923

您应该尝试将过滤器的[“filterRes”](https://developer.mozilla.org/en-US/docs/SVG/Attribute/filterRes)属性显式设置为与视网膜显示匹配的值。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-09-10T01:54:18.080

这个问题在 2018 年仍然存在，我已经找到了解决方案。您可以复制您提供过滤器的元素，将其放置在实际元素下方，并仅在其上保留过滤器，而不在元素上使用任何过滤器。这样，Safari 和其他浏览器在调整大小时只会对带有阴影的元素进行光栅化，但它会被锐利的矢量元素隐藏。[您可以在此处](https://github.com/artdecocode/daily-log/blob/master/shadow.md)查看示例并阅读更多内容。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2021-04-21T08:29:30.063

现在是 2021 年，它仍然很重要。我找到了一个对我有用的解决方法：您可以放大 svg，然后使用 css-transform 将其缩小：

```
.section_logo img {
    height: 500%;
    transform-origin: top left;
    transform: scale(0.2);
} 
```

# php - 在php中解析子域的字符串

> ID：14664408
> 
> 赞同：3
> 
> 时间：2013-02-02T17:19:39.923
> 
> 标签：php, parsing

如果不存在方案/主机，我如何查找字符串是否存在子域。

例如：`$url="sub.main.com/images/sample.jpg";`

我正在尝试解析图像的 url，并且我在`parse_url`大多数情况下都在使用。

但是鉴于 url 字符串可以有不同的风格，例如：

```
/images/sample.jpg
//main.com/images/sample.jpg
images/sample.jpg 
```

等等，我试图一一解决不同的情况。现在，我发现很难检测字符串是否存在子域。

所以对于像 $url="sub.main.com/images/sample.jpg";` 这样的字符串，我想提取子域，对于像 images/sample.jpg 这样的字符串，我想找出没有子域

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-02T19:51:53.923

有趣的问题。我已经摆弄了一段时间；这种方法不可避免地并不完美，但它可能会让你走上正确的道路。

我的解决方案从这个存储库中的两个源文件开始：[https ://github.com/usrflo/registered-domain-libs/tree/master/PHP](https://github.com/usrflo/registered-domain-libs/tree/master/PHP)

首先，如果您的 php 版本中不推荐使用 split ，您可能需要修改 regDomain.inc.php 以更改 to 的实例`$signingDomainParts = split('\.', $signingDomain);`。`$signingDomainParts = preg_split('/\./', $signingDomain);`

一旦你保存了这些，试试这个测试代码，我把线程中提到的所有 URL 作为测试用例：

```
<?php
require_once("effectiveTLDs.inc.php");
require_once("regDomain.inc.php");
$tests = Array("/images/sample.jpg","//main.com/images/sample.jpg","images/sample.jpg", "sub.main.com/images/sample.jpg", "http://www.example.com/www.google.com/sample.jpg", "amazon.co.uk/images/sample.jpg", "amazon.com/images/sample.jpg", "http://sub2.sub.main.co.uk/images/sample.jpg", "sub2.sub.main.co.uk/images/sample.jpg");
foreach($tests as $test)
{
    echo "Attempting $test.<BR/>";
    $one = parse_url($test);
    if(!array_key_exists("host", $one))
    {
        echo "Converting to: http://$test";
        echo "<BR/>";
        $one = parse_url("http://$test");
    }
    if(!$one){echo "<BR/>";continue;}
    echo "parse_url parts: ";
    print_r($one);
    echo "<BR/>";
    if($one && array_key_exists("host", $one))
    {
        $domain = getRegisteredDomain($one["host"], $tldTree);
        if(sizeof($domain))
        {
            $two = explode(".", $domain);
            echo "domain parts: ";
            print_r($two);
            echo "<BR/>";
            if(sizeof($two))
            {
                $three = array_diff(explode(".", $one["host"]), $two);
                if(sizeof($three))
                {
                    echo "Hark! A subdomain!: ";
                    print_r($three);
                    echo "<BR/>";
                }
            }
        }
    }
    echo "<BR/>";

}

?> 
```

此代码将以下测试用例标识为具有子域：

```
Attempting sub.main.com/images/sample.jpg.
Hark! A subdomain!: Array ( [0] => sub ) 

Attempting http://www.example.com/www.google.com/sample.jpg.
Hark! A subdomain!: Array ( [0] => www ) 

Attempting http://sub2.sub.main.co.uk/images/sample.jpg.
Hark! A subdomain!: Array ( [0] => sub2 [1] => sub ) 

Attempting sub2.sub.main.co.uk/images/sample.jpg.
Hark! A subdomain!: Array ( [0] => sub2 [1] => sub ) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-02T18:00:45.020

试试这个代码

```
<?php
$url = 'sub.main.com/images/sample.jpg';    
$arr = explode('/',$url);

$domain = $arr[0];
$string = $arr[1];

$arr2 = explode('.',$domain);

if(count($arr2)>2) {
    $subdomain = $arr2[0];
    echo $subdomain;
}
?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-02T19:01:53.183

```
<?php
$url = 'http://sub.main.com/images/sample.jpg';
$arr = explode('/',$url);

$pieces = parse_url($url);

$domain = isset($pieces['host']) ? $pieces['host'] : '';
if (preg_match('/(?P<domain>[a-z0-9][a-z0-9\-]{1,63}\.[a-z\.]{2,6})$/i', $domain, $regs)) 
{ 
  $main_domain=$regs['domain'];
}

$host=$pieces['host'];
$path=$pieces['path'];

if($host != $main_domain)
{
    $arr2 = explode('.',$host); 
    $subdomain = $arr2[0];
    echo $subdomain;
}

$string=substr($path,1,strlen($path));

?> 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-02-02T17:35:20.650

尝试以下操作：

```
<?php
$url="sub.main.com/images/sample.jpg";

preg_match('@^(?:http://)?([^.]+).?([^/]+)@i',$url, $hits);
print_r($hits);
?> 
```

这应该输出如下内容：

```
Array ( [0] => sub.main.com [1] => sub [2] => main.com ) 
```

# php - fread 的下载速度比 readfile 慢很多

> ID：14664409
> 
> 赞同：4
> 
> 时间：2013-02-02T17:19:43.193
> 
> 标签：php, download, fopen, readfile

我通过 PHP 脚本从 URL 向我的用户提供下载。使用时，`readfile()`我获得了我的连接可以支持的最大下载速度（大约 2.5MB/s），但是当我使用`fopen, fread, fclose`路由时，下载速度非常非常慢（大约 1-2KB/s）。

这是我的代码：

```
header('Content-Description: File Transfer');
header('Content-Type: application/octet-stream');
header('Content-Disposition: attachment; filename=' . $filename);
header('Content-Transfer-Encoding: binary');
header('Expires: 0');
header('Cache-Control: must-revalidate');
header('Pragma: public');
header('Content-Length: ' . $filesize);
ob_clean();
flush();

$file = fopen($url, 'rb');

while(!feof($file)) {
    echo fread($file, 2014);
} 
```

并且 readfile 代码很简单`readfile($link);`。

我不能只使用这个`readfile()`功能有两个原因，一个是我想限制用户的下载速度（我可以`fread`通过只读取这么多的数据来做到这一点），我还想跟踪用户正在下载多少（我可以做到这一点，`readfile()`但它不计算部分下载）。

有谁知道为什么会发生这种情况或我该如何解决？据我所知`readfile()`，这只是一个包装，`fopen, fread and fclose`所以我不知道出了什么问题。

编辑：为此最终选择了 cURL。

```
$curl = curl_init();
$options = array(
    CURLOPT_URL => $rdLink,
    CURLOPT_FAILONERROR => true,
    CURLOPT_BINARYTRANSFER => true,
    CURLOPT_RETURNTRANSFER => true,
    CURLOPT_WRITEFUNCTION => 'readResponse'
);
curl_setopt_array($curl, $options);

if(!curl_exec($curl)) {
    header('Location: http://whatever.com');
    exit;
}
curl_close($curl);

function readResponse($ch, $data) {
    $length = mb_strlen($data, '8bit');

    echo $data;

    return $length;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-03T08:34:11.920

使用[stream_context_create()](http://www.php.net/manual/en/function.stream-context-create.php)和[stream_get_contents()](http://www.php.net/manual/en/function.stream-get-contents.php)

```
$context = stream_context_create();
$file = fopen($url, 'rb', FALSE, $context);
while(!feof($file))
{
    //usleep(1000000);
    echo stream_get_contents($file, 2014);
} 
```

您还可以尝试使文件读取长度更大并放入 usleep() 以减慢执行速度。无论如何，对于最新版本的 PHP，似乎建议使用流函数而不是 fread。您可能还想在 fread() 或 stream_get_contents() 前面添加一个 @ 以抑制任何错误，至少在生产中是这样。没有它，还有一点点小事故，你就有了一个损坏的文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-03T08:51:39.070

它可能在 PHP 或 Apache 的某个地方进行缓冲（甚至可能是速率限制）。尝试改变：

```
while(!feof($file)) {
   echo fread($file, 2014);
} 
```

至：

```
while(!feof($file)) {
   $s=fread($file, 2014);
   if($s===false)break;  //Crude
   echo $s;
   @ob_flush();@flush();
} 
```

（`@`前缀是因为他们可能会抱怨空缓冲区。）

正如 mr.freshwater 所说，你应该对你的`fread`电话进行错误检查，所以我在上面添加了一些基本的东西。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-07-20T12:59:20.597

原因是 2014 年。操作系统获得 4096 字节数据部分的速度比其他操作系统快。但是如果你写的是 2014 年，那么操作系统会尝试从文件中读取一个字节的数据来计算它。这就是为什么需要这么长时间。将 2014 更改为 4096

# jquery - jQuery 只加载某些 div 内容，而不是父 div

> ID：14664410
> 
> 赞同：2
> 
> 时间：2013-02-02T17:19:46.163
> 
> 标签：jquery, html, load

```
<div id="value">
 10.00

  <div id="text">hello!</div>
</div>

<script>
setInterval(function(){
    $("#value").load("value.php #value");
}, 5000);
</script> 
```

这是我文件的内容。

我如何防止脚本加载`<div id="text">`呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-02T17:35:33.840

您可以使用 load 然后使用 load 的回调，只需删除不需要的 div 即可。请注意，您应该尽量避免使用重复 ID，因为看起来您正在加载的 div 具有值的 ID，而您从中加载的文件也具有值的 Id。

```
$('#value').load("value.php #value", function () {
    $('#text').remove();
}); 
```

**[jsFiddle 示例](http://jsfiddle.net/j08691/L4ZRD/)**（注意本示例使用 jsFiddle 的 AJAX echo API 来模拟调用）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-02T17:29:23.330

您无法阻止这种情况，因为`load`会获取整个文件。

您可以改用`ajax`函数，加载数据，操作字符串，然后将其放入 div 中。

或者加载完成后移除子元素：

```
<script>
setInterval(function(){
    $("#value").load(
         "value.php", 
         function() {
            $('#text').remove();
         }
    );
}, 5000);
</script> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-02T17:39:24.527

正如我理解你的问题，你想`#value`从页面加载 div 的内容`value.php`，你不希望这样`<div id="text">`：

```
setInterval(function(){
    var content = $("<span id='content'/>").load("value.php #value");
    $('#value').html(content);
}, 5000); 
```

# progress-bar - C++ builder - 无法对进度条进行样式化

> ID：14664411
> 
> 赞同：0
> 
> 时间：2013-02-02T17:19:50.857
> 
> 标签：progress-bar, c++builder, styling

进度条具有“BackgroundColor”、“BarColor”、“Smooth”等属性，但它们都不能在 Windows XP 机器上运行。进度条只是忽略它们。如何正确使用这些属性？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T19:37:00.443

当您在 XP 及更高版本的应用程序中启用 ComCtrl v6 视觉样式时，相关属性将不起作用。Windows`PBM_...`会忽略使用的相关消息。MSDN 记录了这种行为。没有办法解决这个问题，视觉主题控制外观和感觉，你不能覆盖它。因此，您要么需要禁用主题，要么找到支持您需要的第三方进度条（或自己制作）。

# jquery - 在运行第一个函数后调用函数

> ID：14664415
> 
> 赞同：1
> 
> 时间：2013-02-02T17:20:27.503
> 
> 标签：jquery

我想通过单击页面上的某个位置来隐藏 div，但前提是首先通过单击预览显示 div。

我有这个 ：

```
$(function() {  
    $("#videopreview").click(function() {
    $("#videolarge").css({ display: 'block' });
    $("#videopreview").css({ display: 'none' });

        $("#videolarge").click(function(){ return false; });
        $(document).one("click", function() { 
        $("#videolarge").css({ display: 'none' });
        $("#videopreview").css({ display: 'block' });

        });
    });
}); 
```

它同时运行这两个功能，所以什么也没发生:)

更新：

```
$(function() {  
$("#videopreview").click(function() {
    $("#videolarge").css({ display: 'block' });
    $("#videopreview").css({ display: 'none' });
});
$("#videolarge").click(function(){ return false; });
$("#videopreview").click(function(){ return false; });
$(document).click(function() { 
    $("#videolarge").css({ display: 'none' });
    $("#videopreview").css({ display: 'block' });
});
}); 
```

我可以使用 remove() 但是一旦隐藏我就不能再次运行它（这是有道理的）。我该如何处理？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T17:30:37.563

您不应该在另一个事件函数中使用该事件。那是行不通的。

请改用此代码：

```
$(function() {  
    $("#videopreview").click(function() {
        $("#videolarge").css({ display: 'block' });
        $("#videopreview").css({ display: 'none' });
    });
    $("#videolarge").click(function(){ return false; });
    $(document).one("click", function() { 
        $("#videolarge").css({ display: 'none' });
        $("#videopreview").css({ display: 'block' });
    });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-02T17:45:28.127

如果您从一开始就附加两个处理程序，但在 document.click 处理程序中，在尝试执行任何操作之前检查大视频是否可见，并检查是否不是单击的视频预览。就像是：

```
$(function()
{  
    $("#videopreview").on('click', function()
    {
        $("#videolarge").css({ display: 'block' });
        $("#videopreview").css({ display: 'none' });
    });

    $(document).on("click", function(e)
    {
        if ($("#videolarge").is(":visible") && e.target.id !== "videopreview")
        {
            $("#videolarge").css({ display: 'none' });
            $("#videopreview").css({ display: 'block' });
        }
    });
}); 
```

旁注：与其直接设置两个元素的 CSS 属性，不如拥有可以添加或删除的适当 CSS 类可能更简洁、更快捷。

# android - 适用于 IOS 和 Android 的应用程序的 jquery mobile？

> ID：14664416
> 
> 赞同：2
> 
> 时间：2013-02-02T17:20:28.707
> 
> 标签：android, jquery, ios, jquery-mobile

我对我在网上阅读的信息感到很困惑。

有人说对于 IOS 应用程序，

> Apple 限制开发人员使用由 iPhone OS WebKit 引擎执行的 Objective-C、C、C++ 或 JavaScript 编写 iPhone 应用程序。
> 
> 应用程序必须最初以其中一种语言编写，并且只能以 Apple 规定的方式使用文档化 API。只有用 Objective C、C 或 C++ 编写的代码才能编译并直接链接到文档化 API。

而 Android 应用程序使用 Java。

然后我还遇到了跨平台的jquery mobile。所以我不确定我应该采取哪条路线来开发应用程序。我当然更喜欢 jquery mobile，因为我认为使用两种不同的语言来开发应用程序并不理想。学习 Java 和 Objective-C 需要时间。

所以我想知道 - 我可以只使用 jquery mobile 为 IOS 或 Android 开发应用程序吗？

下面是使用 jquery mobile 开发应用程序的教程， [http: //www.noupe.com/tutorial/jquery-mobile-tutorial-creating-a-restaurant-picker-web-app.html](http://www.noupe.com/tutorial/jquery-mobile-tutorial-creating-a-restaurant-picker-web-app.html)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-02T17:56:30.647

看看我与这个主题相关的其他答案：

1.  **混合应用与原生应用**：[混合与原生应用/](http://www.gajotres.net/hybrid-vs-native-apps/)
2.  **移动应用程序与网络应用程序 - 苹果不再接受网络应用程序？**：[https ://stackoverflow.com/a/14436328/1848600](https://stackoverflow.com/a/14436328/1848600)

3.  **教程**：[https ://stackoverflow.com/a/14375842/1848600](https://stackoverflow.com/a/14375842/1848600)

长话短说。混合应用程序在 Apple 应用程序商店中仍然更受欢迎，您只需要接受一些准则，例如：

*   应用程序必须具有原生外观
*   不要使用第三方支付系统
*   不要使用服务器端技术来呈现页面内容，而是使用 ajax

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-09-04T01:35:14.910

在决定走哪条路之前，您应该考虑一系列变量，因为您对业务战略和 IT 驱动因素了解得越多，就越能更好地决定走哪条路。喜欢

*   表现
*   可用性
*   可维护性
*   预算
*   上市时间
*   资源

尽管像 LinkedIn 和 Facebook 这样的大公司正在放弃 Hybrid，但它们实际上并不是 [与此问题无关的另一场辩论]。此外，许多中小型公司都有自己的短期和长期计划，涵盖混合和原生。

就像人们会说的那样，如果您的预算很少，那么就选择 Hybrid，因为您将能够在多个平台上发布，但另一方面，您必须考虑长期成本和上述许多其他参数。

列出的最好的文章是以下，真正发人深省的 [https://pixyflux.wordpress.com/2015/09/03/how-much-native-binary-vs-spectrum/](https://pixyflux.wordpress.com/2015/09/03/how-much-native-binary-vs-spectrum/)

# php - XML - 获取特定属性

> ID：14664420
> 
> 赞同：0
> 
> 时间：2013-02-02T17:20:52.823
> 
> 标签：php, xml

我是使用 XML 文件的新手，并且知道我可能对我想要得到的东西有错误的术语。

这就是我需要的，我试图从返回的 XML 文件属性中获取一些信息，但似乎无法使其工作，特别是每个视图元素中 ns1:href 的值。

文件

```
<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<ns3:MediaGallery xmlns:ns1="http://www.w3.org/1999/xlink" xmlns:ns3="urn:media.services.chrome.com">
<view backgroundDescription="Transparent" shotCode="02" height="240" width="320" ns1:type="resource" ns1:href="http://media.carbook.com/MediaGallery/media/MjkyNzU4Xk1lZGlhIEdhbGxlcnk/cl7mfC4mn7ScF7PMs7UmWf4ugY-UxsNwkkEiGHPXygftzkCsGogn9A/2011CAD001a_320_02.png"/>
</ns3:MediaGallery> 
```

现在，我已经能够遍历并获取属性 backgroundDescription、shotCode、height、width 等，但我需要的是 ns1:href 值。

我怎样才能做到这一点 ？这让我发疯了，我一直无法在网上找到答案。对此的任何帮助，加上一个很好的学习资源，将不胜感激。

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T17:36:32.347

呸！仍然不明白，但似乎这有效。

```
$xml =      new SimpleXMLElement($xml);
foreach ($xml as $img)
{
$attr = $img->attributes('ns1', true);
echo $attr['href'];
echo "<p>";
} 
```

任何人都有一个很好的资源，我可以在其中了解有关 XML 文件的更多信息？

# python - python中的Errno 10061，我不知道该怎么办

> ID：14664424
> 
> 赞同：4
> 
> 时间：2013-02-02T17:21:29.017
> 
> 标签：python, sockets

我在python中学习了套接字。当我尝试在一台计算机上编写套接字脚本时，它可以工作，但是当我尝试用两台不同的计算机编写套接字脚本并打开带有连接的套接字时，它不起作用。

一台计算机（服务器）：

```
import socket

s = socket.socket()

host = socket.gethostname()
port = 1234
s.bind((host, port))

s.listen(5)
while True:
    c, addr = s.accept()
    print 'Got connection from', addr
    c.send('Thank you for connecting')
    c.close() 
```

第二台计算机（客户端）：

```
import socket

s = socket.socket()

host = raw_input("The ip you want to connect to: ")
port = 1234

s.connect((host, port))
print s.recv(1024) 
```

错误：

```
socket.error: [Errno 10061] 
```

脚本中有什么问题？为什么它不起作用？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-02T17:27:37.687

错误号 10061：

这意味着您尝试连接的服务器没有等待。

*   确保您已打开端口号。
*   尝试杀死所有 python 进程并再次启动服务器。

**更新**

代替

```
host = socket.gethostname() 
```

利用

```
host = "" 
```

# javascript - PhoneGap/Cordova 2.3.：如何在 InAppBrowser 中打开所有外部链接？

> ID：14664425
> 
> 赞同：2
> 
> 时间：2013-02-02T17:21:51.983
> 
> 标签：javascript, cordova, sencha-touch-2, cordova-2.0.0

我正在使用 Sencha Touch 2 和 Cordova 2.3.0 开发一个移动应用程序。我希望能够将所有外部链接（从动态加载的 HTML）打开到新的 InAppBrowser。

有没有办法实现这一点，而无需修改所有外部链接以包含 target="_blank"？

我想拦截对外部链接的点击，并使用 InAppBrowser 的 window.open API 打开它们。由于我同时针对 iOS 和 Android，我想 JavaScript 解决方案会更好地避免单独的代码（Java 和 Objective-C）。

谢谢！

更新：我刚刚发现： [https ://gist.github.com/4694032](https://gist.github.com/4694032)

唯一的问题是我没有在我的应用程序中使用 jQuery。仅仅为了这件事而包含它是否值得？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-02T23:01:38.370

```
Ext.each(Ext.query('a'), function(el) {
    el = Ext.get(el);
    el.on('click', function(e) {
        e.preventDefault();
        console.log('clicked', el.getAttribute('href'));
    });
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-12-17T23:08:40.957

您还可以使用正则表达式专门为以“http”开头的属性（href）添加此事件：

```
Ext.Viewport.element.dom.addEventListener('click', function (e) {
    if (e.target.tagName !== 'A') {
        return;
    };

    var url = e.target.getAttribute('href');
    var containsHttp = new RegExp('http\\b'); 

    //if href value begins with 'http'
    if(containsHttp.test(url)) { 
        e.preventDefault();
        window.open(url, "_system"); // For iOS
        navigator.app.loadUrl(url, {openExternal: true}); //For Android
    }
    else {
        return;
    }
}, false); 
```

然后你可以同时为 android 和 iOS 构建。

# jpa - 具有辅助表和复合键的子实体分布在两个表中

> ID：14664427
> 
> 赞同：0
> 
> 时间：2013-02-02T17:21:56.997
> 
> 标签：jpa, persistence, eclipselink

在为国际化数据库设计选择方法进行了多次辩论之后，我决定为每个需要翻译的表设置两个表。在以下情况下，我在使用 ORM 时遇到了一些问题。

所以我有以下表格：

```
cat          cat_t               subcat            subcat_t 
------       -------             ----------        ------------
id (pk)      cat_id(pk,fk)       id(pk)             subcat_id(pk,fk)
             locale(pk)          cat_id(fk)         locale(pk)
             name                                   name 
```

```
@Entity 
@Table(name = "cat")
@SecondaryTable(name = "cat_t",
    pkJoinColumns = @PrimaryKeyJoinColumn(name = "cat_id", 
                                          referencedColumnName = "id"))
@IdClass(TranslationKey.class)
public class Category {
    @Id 
    private long id;

    @Id
    @Column(table = "cat_t")
    private String locale;

    @Column(table = "cat_t")
    private String name;

    @OneToMany(fetch = FetchType.LAZY)
    private List<SubCategory> subCategories;

    // getters and setters
 } 
```

```
@Entity
@Table(name = "subcat")
@SecondaryTable(name = "subcat_t",
    pkJoinColumns = @PrimaryKeyJoinColumn(name = "subcat_id", 
                                          referencedColumnName = "id"))
@IdClass(TranslationKey.class)
public class SubCategory{

    @Id
    private long id;

    @Id
    @Column(table = "subcat_t")
    private String locale;

    @Column(table = "subcat_t")
    private String name;

    @Column(name = "cat_id")
    private long categoryId;

    // getters and setters
} 
```

```
public class TranslationKey implements Serializable {

    private long id;
    private String locale;

    // getters and setters
} 
```

我的目标是让子类别只拉回父级区域设置的子类别。我想我有一些选择，包括分别查询子类别并使字段瞬态或拉回所有内容（所有语言的所有子类别），然后过滤掉我想要的那些。

我遇到的问题`@JoinColumn`是语言环境是 cat can subcat 的辅助表的一部分，所以当我尝试时`referencedColumn`可能不允许，因为它不在同一个表中？我正在使用 EclipseLink，但我并没有真正绑定到 JPA 提供程序。

非常感谢任何帮助/指导

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T13:57:42.233

cat 似乎与 cat_t 具有一对多的关系，因为 cat_t 中可以有许多行用于单个 cat 条目。这在单个实体中并不理想，因为这意味着您将拥有共享数据的实例，并且如果您进行更改会带来无尽的麻烦。

使更新成为可能的更好方法是将 cat 和 cat_t 映射到单独的实体，其中 Cat 具有 Cat_t?Local 实例的集合。到 cat_t 的实体映射可以使用本地及其指向 Cat 的 ManyToOne 反向指针作为其 Id：

```
@Entity
@IdClass(TranslationKey.class)
public class Local {
  @ID
  private String locale;
  @ID
  @ManyToOne
  private Cat cat;
}

public class TranslationKey{
  string local;
  long cat;
} 
```

# c# - Ormlite 未使用 ServiceStack MVC 分析器进行分析

> ID：14664431
> 
> 赞同：1
> 
> 时间：2013-02-02T17:22:14.930
> 
> 标签：c#, servicestack, ormlite-servicestack

我的服务堆栈 Web 服务中有 MVC 分析器，我看到请求被记录到 Nlog。

但是，当我尝试分析我的 PostgreSQL 数据库时，不会生成任何日志。

我的 global.asax.cs 中有：

```
 var dbConnectionFactory = new OrmLiteConnectionFactory(
            "Server=127.0.0.1;Port=5432;Database=mydatabase;User 
                                          Id=id;Password=password;")

                                      {
                                          ConnectionFilter = x => new 
                                      ProfiledDbConnection(x, Profiler.Current)
                                      };

        builder.RegisterInstance(dbConnectionFactory).
                         ExternallyOwned().As<IDbConnectionFactory>();

         var autofacContainer = builder.Build();
        //set Autofac as default Dependency Resolver for application
        DependencyResolver.SetResolver(new 
                                  AutofacDependencyResolver(autofacContainer)); 
```

和

```
 protected void Application_BeginRequest()
    {
        if (Request.IsLocal)
        {
            Profiler.Start();
        } 
    }

    protected void Application_EndRequest(object src, EventArgs e)
    {
        if (Profiler.Current != null)
        {
            Logger.Debug("profiling result id:{0}\nresult:{1}", Profiler.Current.Id,Profiler.Current.Render());
        }
        Profiler.Stop();
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T00:05:25.533

MiniProfiler 与日志无关，它控制所分析的结果是否在 MiniProfiler 查看器上可见（即在[ServiceStack 的自动生成的 HTML5 报告页面](https://github.com/ServiceStack/ServiceStack/wiki/HTML5ReportFormat)上）。

您在这里没有显示任何日志记录代码（我假设您正在使用带有 NLog 适配器的[ServiceStack.Logging ）。](https://github.com/ServiceStack/ServiceStack.Logging)配置它的最佳位置是在初始化 AppHost 之前，因此所有静态构造函数都使用配置的 Logging 提供程序，即：

```
LogManager.LogFactory = new NLogFactory();
(new AppHost()).Init(); 
```

# c - 在 C 中读/写多数组数据结构

> ID：14664438
> 
> 赞同：-1
> 
> 时间：2013-02-02T17:23:15.850
> 
> 标签：c, arrays

我抽象出一个我需要保存在 C 中的排序列表。一种方式最适合阅读，另一种方式最适合写作。

```
WRITE: search KeyNumeric then KeyAlpha and write *Data

Key1 : [ KeyA, *Data1A, KeyB, *Data1B, KeyC, *Data1C ]
Key2 : [ KeyA, *Data2A, KeyB, *Data2B, KeyC, *Data2C ]
Key3 : [ KeyA, *Data3A, KeyB, *Data3B, KeyC, *Data3C ]

READ: search KeyAlpha then KeyNumeric and read *Data

KeyA : [ Key1, *Data1A, Key2, *Data2A, Key3, *Data3A ]
KeyB : [ Key1, *Data1B, Key2, *Data2B, Key3, *Data3B ]
KeyC : [ Key1, *Data1C, Key2, *Data2C, Key3, *Data3C ] 
```

有谁知道在内存中表示这种数据结构的最有效方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-02T18:30:41.857

如果我理解正确：

*   您的数据有一个由数字和某种字母组成的复合键（您不会说它是字符还是字符串）。
*   有时你有字母键，需要搜索数字，有时反之亦然（它恰好被读取和（覆盖）写入，但这可能不是重点）。
*   插入和删除很少见，但需要支持。

我还将假设数据键是稀疏的，因此直接的“[N][A]”数组对您不起作用。

由于您希望数据被双索引，我建议您需要某种链接结构：列表或树。

要使用链表，您的 C 结构可能如下所示：

```
struct stuff {
  int num_key;
  char alpha_key;

  /* The number-first lists.  */
  struct {
    struct stuff *next_num;
    struct stuff *next_alpha;
  } num_list;

  /* The alpha-first links.  */
  struct {
    struct stuff *next_alpha;
    struct stuff *next_num;
  } alpha_list;

  struct data Data;
}; 
```

因此，如果您有数据项，`1A, 1B, 1C, 2A, 2B, 2C, 3A, 3B, 3C`这些链接将像这样工作：

*   `1A num_list.next_num`指向`2A`.
*   `1A num_list.next_alpha`指向`1B`.
*   `1A num_alpha.next_alpha`指向`1B`.
*   `1A num_alpha.next_num`指向`2A`.
*   `2B num_list.next_num`是`NULL`。
*   `2B num_list.next_alpha`指向`2C`.
*   `2B num_alpha.next_alpha`是`NULL`。
*   `2B num_alpha.next_num`指向`3B`.

所以，用文字来说，`num_list.next_num`总是指向带有下一个数字的东西，但第*一个*字母可用。同样，`alpha_list.next_alpha`总是指向带有下一个字母的东西，但第*一个*数字可用。如果您不查看辅助列表的头部，那么指向主列表的指针是`NULL`因为您永远不想以这种方式遍历数据，并且在那里维护真正的指针会导致错误，或者导致插入或删除的额外维护.

您可以将其视为两个列表列表：

*   `num_list.next_num`是列表头的`num_list.next_alpha`列表。
*   `aplha_list.next_alpha`是列表头的`alpha_list.next_num`列表。

要查找一个项目，您首先要在一个主要列表中移动，`num_list.next_num`或`aplha_list.next_alpha`，然后向下移动一个辅助列表，`num_list.next_alpha`或`num_alpha.next_num`。

* * *

因此，显然存在一些效率问题：

*   所有这些小数据块的 malloc 都是低效的。
*   列表是 O(n) 访问。

如果您正在处理大量数据，我会做两件事：

1.  使用某种平衡树而不是平面列表。'列表的头部'然后成为'树的根'。

2.  分配一个固定大小的数组`struct stuff`并使用数组索引作为链接，而不是指针。然后只需维护一个未使用插槽的“空闲列表”。如果您的数据超出数组，则使用`realloc`或分配第二个内存块并记住哪些索引位于哪个块中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-04T18:23:49.193

处理您所询问的多个索引的一个很好的通用方法是使用对哈希表和可交换哈希函数，其中字母和数字键的顺序无关紧要：

```
typedef struct hash_node_s {
  struct hash_node_s *next;
  char *keyAlpha;
  unsigned keyNumeric;
  void *data
} HASH_NODE, *HASH_NODE_PTR;

#define HASH_TABLE_SIZE 997
typedef HASH_NODE_PTR HASH_TABLE[HASH_TABLE_SIZE];

// Hash a string and integer in one value.
unsigned hash(char *keyAlpha, unsigned keyNumeric) {
  unsigned h = 0;
  for (int i = 0; keyAlpha[i]; i++) {
    h = h * 31 ^ keyAlpha[i] ^ keyNumeric;
    keyNumeric *= 31;
  }
  return h;
}

static HASH_NODE *find_or_insert(HASH_TABLE tbl, char *keyAlpha, unsigned keyNumeric) {
  unsigned h = hash(keyAlpha, keyNumeric) % HASH_TABLE_SIZE;
  for (HASH_NODE *p = tbl[h]; p; p = p->next)
    if (strcmp(keyAlpha, p->keyAlpha) == 0 && keyNumeric == p->keyNumeric)
      return p;
  HASH_NODE *n = safe_malloc(sizeof *n);
  n->next = tbl[h];
  n->keyAlpha = safe_strdup(keyAlpha);
  n->keyNumeric = keyNumeric;
  n->data = NULL;
  tbl[h] = n;
  return n;
}

void insert(HASH_TABLE tbl, char *keyAlpha, unsigned keyNumeric, void *data) {
  find_or_insert(keyAlpha, keyNumeric)->data = data;
}

void write(HASH_TABLE tbl, unsigned keyNumeric, char *keyAlpha, void *data) {
  find_or_insert(keyAlpha, keyNumeric)->data = data;
}

void *read(HASH_TABLE tbl, char *keyAlpha, unsigned keyNumeric) {
  return find_or_insert(keyAlpha, keyNumeric)->data;
}

void delete(HASH_TABLE tbl, char *keyAlpha, unsigned keyNumeric)
{
  unsigned h = hash(keyAlpha, keyNumeric) % HASH_TABLE_SIZE;
  for (HASH_NODE *q = NULL, *p = tbl[h]; 
       p; 
       q = p, p = p->next)
    if (strcmp(keyAlpha, p->keyAlpha) == 0 && keyNumeric == p->keyNumeric) {
      if (q) 
        q->next = p->next;
      else 
        tbl[h] = p->next;
      safe_free(p->keyAlpha);
      safe_free(p);
      return;
    }
} 
```

此代码未经测试，但除了轻微的拼写错误外，它应该是可靠的。

所有操作的成本大致相同。计算哈希函数取决于密钥长度。除此之外，所有操作的概率都是 O(1)，这意味着除非遇到哈希函数不会产生伪随机结果的坏情况，或者让表负载变得过高，否则这确实会非常快。

这段代码的弱点是它每个元素存储两个键，字符串键可能任意大。但这可以通过使用单独的字符串表（字符串的哈希表）来解决，以便重复的字符串由相同的指针表示。字符串表插入和删除（当引用计数达到零时）将替换`safe_strdup`and`free`调用。在所有其他情况下，代码将保持不变。有了这个，存储开销是一个整数和每个数据项的指针。

# cluster-analysis - 根据结果 选择聚类方法

> ID：14664441
> 
> 赞同：0
> 
> 时间：2013-02-02T17:23:27.513
> 
> 标签：cluster-analysis, weka, recommendation-engine, k-means, dbscan

我在论文中使用 WEKA，并且有超过 1000 行数据。该数据库包括人口统计信息（年龄、位置、状态等），然后是产品名称（值 1 或 0）。最终结果是一个推荐系统。我使用了两种聚类方法，`K-Means`和`DBScan`。

使用时`K-means`我尝试了 3 个不同数量的集群，而使用时`DBscan`我选择了 3 个不同的 epsilon（Epsilon 3 = 48 个集群，忽略了 17% 的数据，Epsilone 2.5 = 19 个集群，而集群 0 包含 229 个项目，忽略了 6%。）意思是我有相同数据的 6 个不同聚类结果。

如何选择最适合我的数据的内容？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-02T22:47:17.827

# 什么是“最好”？

正如一些聪明人注意到的那样：

> 聚类的有效性通常在旁观者的眼中

聚类没有客观上的“更好”，或者您没有进行聚类分析。

即使结果实际上在某些*数学*度量上“更好”，例如分离、轮廓，甚至在使用标签进行监督评估时 - 它仍然只是在优化某些数学目标方面更好，*而不是针对您的用例*。

K-means 找到给定 k 的局部最优平方和分配。（如果增加 k，则存在更好的分配！） DBSCAN（实际上正确拼写为全大写）总是为给定的 MinPts/Epsilon 组合找到最佳的密度连接分量。然而，两者都只是针对某些数学标准进行优化。**除非此标准符合您的要求，否则它毫无价值**。所以没有最好的，直到你知道你需要什么。但是，如果您知道自己需要什么，就不需要进行聚类分析。

## 那么该怎么办？

尝试不同的算法和不同的参数，并**使用您的领域知识分析输出，如果它们可以帮助您解决您要解决的问题**。如果他们帮助您解决问题，那么他们很好。如果他们没有帮助，请再试一次。

随着时间的推移，你会积累一些经验。例如，如果平方和对您的域没有意义，请不要使用 k-means。如果您的数据没有有意义的密度，请不要使用基于密度的聚类，例如 DBSCAN。并不是这些算法失败了。他们只是不解决*您的*问题，他们解决了您不感兴趣的*不同*问题。而且他们可能真的很擅长解决其他问题......

# php - move_uploaded_file 失败且没有错误

> ID：14664446
> 
> 赞同：1
> 
> 时间：2013-02-02T17:24:03.243
> 
> 标签：php, file-upload, permissions

类似地问过这个问题几次，但这些答案不适用于我遇到的问题。我都检查过了。

基本上，函数 move_uploaded_file 每次都返回 false，即使我觉得我所有的鸭子都排成一排。没有错误，它只是返回false。

我检查了正在上传的文件，它没有错误。

可能是权限问题，我尝试将上传图片的目录更改为使用 chmod(dir, 0777)。如果这是权限问题，我不确定这是否会解决它。编辑 - 检查目录的 iswritable(dir) 并且它说它是可写的。

我的表单中确实设置了 enctype="multipart/form-data" 属性。

这是我的代码：

```
 function uniqueName()
    {
    $target = dirname(__FILE__) . '/TestProject/';
    $uid = uniqid();
    $ext = pathinfo($_FILES['photo']['name'], PATHINFO_EXTENSION);

    $_FILES['photo']['name'] = $uid . "." . $ext;

    if(move_uploaded_file($_FILES['photo']['name'], $target . $_FILES['photo']['name']))
        echo("upload succeeded");
    else {
        echo("upload failed");
    }

    return $target . $_FILES['photo']['name'];
    } 
```

我错过了什么吗？任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-02T18:48:15.420

修复它， move_uploaded_files() 的第一个参数需要 tmp_name，而不是名称。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-02T17:28:26.600

首先，我有时会忘记确保您的表单如下所示：

```
<form id="myform" name="myform" action="#" method="post" enctype="multipart/form-data"> 
```

这其中的关键部分是

```
enctype="multipart/form-data"> 
```

就上传而言，我使用以下内容，并且每次都有效：

```
if ($_FILES["fuImg"]["error"] > 0)
    {
    echo "Error: " . $_FILES["fuImg"]["error"] . "<br>";
    }
else
    {
       move_uploaded_file($_FILES["fuImg"]["tmp_name"], "../img/bands/" . $_FILES["fuImg"]["name"]);
    } 
```

# php - 带有 PHP 参数的 onkeyup 函数

> ID：14664450
> 
> 赞同：-1
> 
> 时间：2013-02-02T17:24:36.990
> 
> 标签：php, javascript

如何在 onkeyup 函数中添加 PHP？

```
<input type="text" onkeyup="if($_SESSION['user'] == TRUE) do.this else do.that"> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-02T17:31:31.117

我想你的意思是这样的：

```
<input type="text" onkeyup="<?php if($_SESSION['user'] == TRUE) ?> do.this <?php else ?> do.that"> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-02T19:35:49.623

你的问题不清楚。Php是服务器端编程语言，javascript是客户端（但它也可以是服务器端:)但不是你的情况）

但是要解决您需要在标头中包含 jquery 的问题（只是为了方便 ajax 调用）

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.9.0/jquery.min.js"></script> 
```

添加将调用服务器的脚本

```
 <script>
    function callServer(){
$.ajax({  url: "serverSide.php" })
.done(function() {
  alert("Server called");
});
    }
    </script> 
```

然后为 keyup 添加事件处理程序

```
<input type="text" onkeyup="callServer()"> 
```

然后创建 serverSide.php 并在那里添加你的逻辑。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-02T17:37:23.203

```
<input type="text" <?php echo $_SESSION['user']==TRUE ? "onkeyup=('Do This')" : "onkeyup=('Do That')" /> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-02T17:27:39.870

添加 PHP 标签：

```
<input type="text" onkeyup="if(<?php $_SESSION['user'] == TRUE ?>) do.this else do.that"> 
```

# mysql - 1046 - 没有为触发器选择数据库

> ID：14664451
> 
> 赞同：1
> 
> 时间：2013-02-02T17:24:48.800
> 
> 标签：mysql, triggers

我尝试在 mysql 上使用**触发器**在同一台服务器上复制用户但使用不同的数据库。

**我的请求 SQL ：**

```
 CREATE TRIGGER `insert_user_from_test1`  AFTER INSERT ON `wordpress_test1`.`wp_users`
    FOR EACH ROW BEGIN
    INSERT INTO `wordpress_test2`.`wp_users` (
    ID,
    user_login,
    user_pass,
    user_nicename,
    user_email,
    user_url,
    user_registered,
    user_activation_key,
    user_status,
    display_name
    )
    VALUES (
    New.ID, New.user_login, New.user_pass, New.user_nicename, New.user_email, 
    New.user_url, New.user_registered, New.user_activation_key, New.user_status, 
    New.display_name
    );
    END; 
```

**我得到了那个错误：**

```

    #1046 - No database selected

```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-02T17:27:15.230

如果您通过从命令行工具执行 mysql 来编写该触发器并且尚未选择数据库/模式，那么您需要先指定/选择数据库/模式。

所以尝试先执行这个命令：

```
use your_database_name; 
```

您也可以尝试指定数据库/模式名称以及触发器名称：

```
CREATE TRIGGER `your_database_name`.`insert_user_from_test1`..... 
```

# api - Instagram API 返回 Callback_Url 错误的无效格式

> ID：14664452
> 
> 赞同：5
> 
> 时间：2013-02-02T17:24:53.377
> 
> 标签：api, instagram, callbackurl

我正在使用[Instagram API](http://instagram.com/developer/api-console/)。

我正在为订阅请求尝试一个简单的帖子，并且我不断收到

> “'callback_url' 的格式无效。URL 必须以 http:// 或 https:// 开头”。

它显然是从那开始的。

我在网上找不到遇到同样问题的人。

尝试使用明确的回调 url 发布帖子：

```
http://api.instagram.com/v1/subscriptions/?client_id={client_id}&client_secret={secret}&object=tag&aspect=media&object_id=skateboarding&callback_url=http://skateparkoftampa.com/spot/instagram_callback.aspx 
```

并使用 HTML 编码的回调`URL`：

```
http://api.instagram.com/v1/subscriptions/?client_id={client_id}&client_secret={secret}&object=tag&aspect=media&object_id=skateboarding&callback_url=http%3A%2F%2Fskateparkoftampa.com%2Fspot%2Finstagram_callback.aspx 
```

还尝试了 GET 和 POST，也通过简单地填写参数字段等让 API 控制台创建请求。我觉得我错过了一些非常明显的东西，但我被卡住了。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-10-25T07:59:39.500

正如[端点页面](https://instagram.com/developer/endpoints/)上所说：

> 所有端点只能通过**https访问**

你应该使用你自己的`CLIENT-ID`and `SECRET-ID`（`callback url`所以不要使用`API console`）。

您`callback url`可能没有`https`.

只需使用链接`https`：

```
https://api.instagram.com/v1/subscriptions/ 
```

[尝试此页面](https://instagram.com/developer/realtime/)中的示例

您应该使用`POST`request 来订阅和取消订阅，并`GET`获取订阅列表。请准确阅读[文档。](https://instagram.com/developer/realtime/)

# php - 将查询数据传递给方法的正确方法？

> ID：14664453
> 
> 赞同：0
> 
> 时间：2013-02-02T17:25:04.477
> 
> 标签：php

我有一个用户类，我想知道处理插入的“最推荐”方式是什么？

选项 1：使用现有对象

```
// insert a new user and return the user id
public function insert() {
    $sql = "INSERT INTO users (username, password, email, avatar, subscribe, created, last_login, valid) VALUES
                              (?, ?, ?, ?, ?, ?, ?, ?)";
    $sth = $this->db->prepare($sql);
    $sth->bindParam(1, $this->username, PDO::PARAM_STR);
    $sth->bindParam(2, $this->password, PDO::PARAM_STR);
    $sth->bindParam(3, $this->email, PDO::PARAM_STR);
    $sth->bindParam(4, $this->avatar, PDO::PARAM_STR);
    $sth->bindParam(5, $this->subscribe, PDO::PARAM_STR);
    $sth->bindParam(6, $this->created, PDO::PARAM_STR);
    $sth->bindParam(7, $this->last_login, PDO::PARAM_STR);
    $sth->bindParam(8, $this->valid, PDO::PARAM_STR);
    $sth->execute();

    return $this->db->lastInsertId();
} 
```

选项2：将信息作为数组传递

```
// insert a new user and return the user id
public function insert(array $fields = array()) {
    if(!empty($fields)) {
        $sql = "INSERT INTO users (username, password, email, avatar, subscribe, created, last_login, valid) VALUES
                                  (:username, :password, :email, :avatar, :subscribe, :created, :last_login, :valid)";
        $sth = $this->db->prepare($sql);
        $sth->execute($fields);

        return $this->db->lastInsertId();
    }
} 
```

另外一个选项？它有什么不同吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T17:28:51.787

两种方式都可以，但我个人建议第二种选择

# asp.net-mvc - 如何从保留“默认”约束值的数据库创建模型

> ID：14664454
> 
> 赞同：1
> 
> 时间：2013-02-02T17:25:19.187
> 
> 标签：asp.net-mvc

我现有的表包含近 50 列，其中大多数具有“默认”约束。

我已经基于这个数据库表创建了模型。一切似乎都很好，直到我尝试插入新行。我有一个 sql server 错误，指出某些列不能为空。似乎从数据库创建模型并没有保留默认约束。

我手动编辑了模型，添加了所有默认值，之后插入没有失败。

所以我的问题是，我如何创建一个自动获取与列关联的默认约束的模型？

使用 mvc4、visual studio 2010、sql server 2008 r2。

谷歌搜索没有意义，因为所有人似乎都在谈论与我需要的不同的东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-01-09T15:21:48.010

[很确定我从可能的默认日期时间字段到 GETDATE() 的](https://stackoverflow.com/questions/8594431/possible-to-default-datetime-field-to-getdate-with-entity-framework-migrations/21024108#21024108)答案与实体框架迁移？也会为你工作。通过使用修改后的 MigrationCodeGenerator 类并遍历操作列表，您可以更新列并根据您需要的任何规则添加 DefaultValueSql 值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-02T17:41:39.350

好吧，你有很多选择。您可以在模型的默认构造函数中设置默认值。我认为这是更好的解决方案。

如果您的数据库中必须有默认约束，您可以`defaultValueSql`像这样在数据迁移中设置：

```
AddColumn("ExistingTable", "NewColumn",c => c.Int(nullable: false, defaultValueSql: "0")); 
```

# mysql - INT(3) 列未将值裁剪为适当的长度并允许插入完整值 - MySQL

> ID：14664463
> 
> 赞同：0
> 
> 时间：2013-02-02T17:27:08.877
> 
> 标签：mysql, int, unsigned

我有一个 INT(3) UNSIGNED 列。如果我插入一个字符长度大于 3 的值，它不会剪切该值而是插入它。

发生了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-02T17:32:20.983

FROM [MySQL 的 int(size) 中的“size”是什么意思？](http://alexander.kirk.at/2007/08/24/what-does-size-in-intsize-of-mysql-mean/)

> 最后，让我们来到手册中最能说明数字含义的地方：
> 
> 一些数据类型描述使用这些约定：
> 
> M 表示整数类型的最大显示宽度。对于浮点和定点类型，M 是可以存储的总位数。对于字符串类型，M 是最大长度。M 的最大允许值取决于数据类型。
> 
> 这与显示宽度有关。不过，奇怪的是，例如，如果您在一个显示宽度为 4 位的字段中的值为 5 位，则显示宽度不会减少一个数字。
> 
> 如果该值的位数少于显示宽度，则也不会发生任何事情。所以看起来显示在现实生活中没有任何影响。
> 
> Now2 ZEROFILL 开始发挥作用。这是一个简洁的功能，可以用零填充（在这里）小于指定显示宽度的值，这样您将始终收到指定长度的值。例如，这对于发票 ID 很有用。
> 
> 因此，得出结论：大小既不是位也不是字节。它只是显示宽度，当字段指定了 ZEROFILL 时使用。

```
mysql> create table a ( a tinyint );
Query OK, 0 rows affected (0.29 sec)
mysql> show columns from a;
+-------+------------+------+-----+---------+-------+
| Field | Type | Null | Key | Default | Extra |
+-------+------------+------+-----+---------+-------+
| a | tinyint(4) | YES | | NULL | |
+-------+------------+------+-----+---------+-------+
1 row in set (0.26 sec)

mysql> alter table a change a a tinyint(1);
Query OK, 0 rows affected (0.09 sec)
Records: 0 Duplicates: 0 Warnings: 0

mysql> insert into a values (100);
Query OK, 1 row affected (0.00 sec)

mysql> select * from a;
+-----+
| a |
+-----+
| 100 |
+-----+
1 row in set (0.00 sec)

2 Some code to better explain what I described so clumsily.
mysql> create table b ( b int (4));
Query OK, 0 rows affected (0.25 sec)

mysql> insert into b values (10000);
Query OK, 1 row affected (0.00 sec)

mysql> select * from b;
+-------+
| b |
+-------+
| 10000 |
+-------+
1 row in set (0.00 sec)

mysql> alter table b change b b int(11);
Query OK, 1 row affected (0.00 sec)
Records: 1 Duplicates: 0 Warnings: 0

mysql> select * from b;
+-------+
| b |
+-------+
| 10000 |
+-------+
1 row in set (0.00 sec)

mysql> alter table b change b b int(11) zerofill;
Query OK, 1 row affected (0.00 sec)
Records: 1 Duplicates: 0 Warnings: 0

mysql> select * from b;
+-------------+
| b |
+-------------+
| 00000010000 |
+-------------+
1 row in set (0.00 sec)

mysql> alter table b change b b int(4) zerofill;
Query OK, 1 row affected (0.08 sec)
Records: 1 Duplicates: 0 Warnings: 0

mysql> select * from b;
+-------+
| b |
+-------+
| 10000 |
+-------+
1 row in set (0.00 sec)

mysql> alter table b change b b int(6) zerofill;
Query OK, 1 row affected (0.01 sec)
Records: 1 Duplicates: 0 Warnings: 0

mysql> select * from b;
+--------+
| b |
+--------+
| 010000 |
+--------+
1 row in set (0.00 sec) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-02T17:33:32.153

实际上`3`有一个*显示宽度*适用于`ZEROFILL`右侧的零填充。它不限制整数的容量，因为它`4294967295`从零开始存储。

例子，

```
CREATE TABLE tableName
(
    x INT(3) ZEROFILL NOT NULL, 
    y INT NOT NULL
);

INSERT INTO tableName (x,y) VALUES
(1, 1),
(12, 12);

SELECT x, y FROM tableName; 
```

结果：

```
 x          y
001          1
012         12 
```

使用 `display width`对数据的存储方式没有影响。它只影响它的显示方式。

*   [整数类型（精确值）](http://dev.mysql.com/doc/refman/5.0/en/integer-types.html)

# android - SQLite DB 在 Android 设备上创建失败，/data/data/ 没有 rw 权限

> ID：14664471
> 
> 赞同：1
> 
> 时间：2013-02-02T17:27:44.443
> 
> 标签：android, sqlite

当大约 1% 的新用户尝试启动我们的应用程序时，我们的数据库创建失败。主要发生在中国，有时在俄罗斯和其他地区。无法在我的任何设备上重现它，但我从日志上传中收集了信息。

我注意到一件事：当 db create 失败时，我们的包目录 /data/data/com.lootworks.swords 的文件权限是 --x 即无法读/写。这与我的具有 rwx 访问权限的测试设备不同。

包目录上的 --x 是 db create 失败的原因吗？这对我来说肯定听起来很糟糕，除非当 SQLite 尝试访问它时操作系统会做一些时髦的事情，比如更改权限。有没有人见过这个？

更多信息：

*   该应用程序使用子类 SQLiteOpenHelper，非常常规（不复制准备好的 db 文件或类似的东西）
*   对 getWritableDatabase() 的初始调用发生在 Application.onCreate() 期间
*   该调用在调用我们的 SQLiteOpenHelper.onCreate() 方法之前失败

第一次调用 getWritableDatabase() 时出现异常。这应该回调我们的 onCreate 但在此之前它失败了：

```
Caused by: android.database.sqlite.SQLiteException: unable to open database file
at android.database.sqlite.SQLiteDatabase.dbopen(Native Method)
at android.database.sqlite.SQLiteDatabase.<init>(SQLiteDatabase.java:1880)
at android.database.sqlite.SQLiteDatabase.openDatabase(SQLiteDatabase.java:851)
at android.database.sqlite.SQLiteDatabase.openOrCreateDatabase(SQLiteDatabase.java:885)
at android.database.sqlite.SQLiteDatabase.openOrCreateDatabase(SQLiteDatabase.java:878)
at android.app.ContextImpl.openOrCreateDatabase(ContextImpl.java:599)
at android.content.ContextWrapper.openOrCreateDatabase(ContextWrapper.java:234)
at android.database.sqlite.SQLiteOpenHelper.getWritableDatabase(SQLiteOpenHelper.java:149)
at com.lootworks.swords.db.SwSqlDbOpenHelper.getDb(SourceFile:379)
at com.lootworks.swords.db.SwSqlDbOpenHelper.getOpenHelper(SourceFile:88)
at com.lootworks.swords.db.SwSqlDb.prepareDatabase(SourceFile:66)
at com.lootworks.swords.SwApplication.onCreate(SourceFile:291)
at android.app.Instrumentation.callApplicationOnCreate(Instrumentation.java:1004)
at android.app.ActivityThread.handleBindApplication(ActivityThread.java:3372)
at android.app.ActivityThread.access$2200(ActivityThread.java:155)
at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1031)
at android.os.Handler.dispatchMessage(Handler.java:130)
at android.os.Looper.loop(SourceFile:351)
at android.app.ActivityThread.main(ActivityThread.java:3818)
at java.lang.reflect.Method.invokeNative(Native Method)
at java.lang.reflect.Method.invoke(Method.java:538)
at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:901)
at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:659)
at dalvik.system.NativeStart.main(Native Method) 
```

我已经检查过的事情：

*   一些用户被侧载（一些CN文件共享的东西？）但有安装程序是com.android.vending（GPlay）的例子

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-02T20:13:51.613

> 包目录上的 --x 是 db create 失败的原因吗？

那将是我的猜测。您的进程甚至无法查看是否`databases/`存在，更不用说创建它了。

> 一些用户被侧载（一些CN文件共享的东西？）但有安装程序是com.android.vending（GPlay）的例子

请记住，Play 商店被盗版了很多，所以仅仅因为声称由 Google Play 安装的应用程序并不意味着该设备与 Play 商店兼容。

# python - dict.get() 方法的效率

> ID：14664474
> 
> 赞同：1
> 
> 时间：2013-02-02T17:27:52.793
> 
> 标签：python, methods, dictionary, get

我刚开始学习python，担心如果我使用 dict.get(key,default_value) 或者我为它定义自己的方法....那么它们有什么区别吗：

【第一种方法】：

```
dict={}
for c in string:
    if c in dict:
        dict[c]+=1
    else:
        dict[c]=1 
```

和 python 提供的另一个 dict.get() 方法

```
for c in string:
    dict[c]=dict.get(c,0)+1 
```

它们在效率或速度上是否有任何差异......或者它们是相同的，第二个只是节省了编写更多代码行......

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-02T17:30:21.870

对于这种特定情况，请使用 a[`collections.Counter()`](http://docs.python.org/2/library/collections.html#collections.Counter)或[`collections.defaultdict()`](http://docs.python.org/2/library/collections.html#collections.defaultdict)object 代替：

```
import collections

dct = collections.defaultdict(int)

for c in string:
     dict[c] += 1 
```

或者

```
dct = collections.Counter(string) 
```

两者都是标准`dict`类型的子类。该`Counter`类型添加了一些更有用的功能，例如将两个计数器相加或列出已计数的最常见实体。该类`defaultdict`也可以被赋予其他默认类型；`defaultdict(list)`例如，用于将事物收集到每个键的列表中。

当您想比较两种不同方法的性能时，您需要使用[`timeit`模块](http://docs.python.org/2/library/timeit.html)：

```
>>> import timeit
>>> def intest(dct, values):
...     for c in values:
...         if c in dct:
...             dct[c]+=1
...         else:
...             dct[c]=1
... 
>>> def get(dct, values):
...     for c in values:
...         dct[c] = dct.get(c, 0) + 1
... 
>>> values = range(10) * 10
>>> timeit.timeit('test(dct, values)', 'from __main__ import values, intest as test; dct={}')
22.210275888442993
>>> timeit.timeit('test(dct, values)', 'from __main__ import values, get as test; dct={}')
27.442166090011597 
```

这表明使用`in`速度有点快。

但是，还有*第三种*选择可以考虑；捕捉`KeyError`异常：

```
>>> def tryexcept(dct, values):
...     for c in values:
...         try:
...             dct[c] += 1
...         except KeyError:
...             dct[c] = 1
... 
>>> timeit.timeit('test(dct, values)', 'from __main__ import values, tryexcept as test; dct={}')
18.023509979248047 
```

这恰好是最快的，因为 10 个案例中只有 1 个用于新密钥。

最后但并非最不重要的一点是，我提出了两种选择：

```
>>> def default(dct, values):
...     for c in values:
...         dct[c] += 1
... 
>>> timeit.timeit('test(dct, values)', 'from __main__ import values, default as test; from collections import defaultdict; dct=defaultdict(int)')
15.277361154556274
>>> timeit.timeit('Counter(values)', 'from __main__ import values; from collections import Counter')
38.657804012298584 
```

所以`Counter()`类型是最慢的，但`defaultdict`确实*非常*快。`Counter()`虽然 s 做了更多的工作，而且额外的功能可以在其他地方带来易于开发和执行速度的好处。

# python - 如何在新的 Python 版本中使用 pip？

> ID：14664476
> 
> 赞同：0
> 
> 时间：2013-02-02T17:27:59.527
> 
> 标签：python, pip, distribute

我将 python2.6 作为我的默认 python，并且我一直在使用分发 easy_install 在`~/.local`. easy_install 有很多问题，我想切换到 pip，同时从 python2.6 升级到 python2.7。我现有的 pip 版本与 python2.6 相关联，并且总是在`~/.local/lib/python2.6`寻找包。这意味着我必须使用 Python2.7 再次安装 pip，但使用现有的 python2.6 pip 似乎无法做到这一点，对吧？

因此我尝试下载 pip 并像这样安装它：

```
python2.7 setup.py install --prefix=~/.local 
```

请注意，我没有root，所以我必须在本地安装pip。当我尝试这个时，我得到：

```
Traceback (most recent call last):
  File "setup.py", line 5, in <module>
    from setuptools import setup
ImportError: No module named setuptools 
```

我该如何解决这种情况？我显然不能用 pip 安装 setuptools，因为我不能安装 pip ......我要做的就是将 pip 与 python2.7 链接，升级 pip 然后用 pip 安装所有东西，忘记easy_install和旧的python2.6及其包。

当我尝试下面的答案时，我得到：

```
The installation directory you specified (via --install-dir, --prefix, or
the distutils default setting) was:

    /home/user/.local/lib/python2.7/site-packages

This directory does not currently exist.  Please create it and try again, or
choose a different installation directory (using the -d or --install-dir
option). 
```

我必须手动创建（使用`mkdir`）目录：

```
~/.local/lib/python2.7/site-packages 
```

这似乎坏了......一旦我这样做了，它就起作用了，但为什么它需要手动创建目录？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-02T17:40:39.157

您需要先安装 setuptools；它有自己的[安装脚本](http://pypi.python.org/pypi/setuptools#installation-instructions)（它是 egg 文件的一部分）：

```
wget "http://pypi.python.org/packages/2.7/s/setuptools/setuptools-0.6c11-py2.7.egg"
sh setuptools-0.6c11-py2.7.egg --prefix=~/.local 
```

请注意，它也支持一个`--prefix=`选项。它会找到您的`python2.7`二进制文件（而不是 2.6 版本），因为您下载了`2.7`egg 版本。

# nhibernate - 如何在 NHibernate 更新中使用 SQL 函数？

> ID：14664483
> 
> 赞同：0
> 
> 时间：2013-02-02T17:29:11.280
> 
> 标签：nhibernate

如果出现某些情况，我想将一个字段设置为 MySQL 函数的值 `NOW()`。条件可在更新前不久确定（例如`IInterceptor.OnSave`或`Session.SaveOrUpdate(myObj)`）。此操作应该发生在 NHibernate 的 Update 语句中，其中其他字段也被更新。

生成的 SQL 可能与此类似：

```
UPDATE myTable 
SET myStringCol = 'someVal', myDateCol = NOW() 
WHERE myId = 123; 
```

应满足以下约束条件，但我将采用所有可行的解决方案：

*   在更新之前进行查询`NOW()`会使服务器充满不必要的请求
*   不幸的是，无法使用 SP 或触发器
*   无法使用.Net DateTime.Now，它必须是服务器时间
*   由于这些条件，无法对表列使用默认值
*   我知道用于创建、更新和删除的自定义 SQL 的可能性（nhforge.org/doc/nh/en/index.html 17.3），但是如何实现条件？
*   使用 MySQL 5.1 / 5.5 / 5.6
*   使用最新的 NH 3.3.2

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T17:58:24.600

您可以将生成的属性用于 INSERT 和 UPDATE 请参阅文档，第 5 章 [http://nhibernate.info/doc/nh/en/index.html#mapping-generated](http://nhibernate.info/doc/nh/en/index.html#mapping-generated)

# clojure - 在profiles.clj 中为*print-length* 提供默认值的正确方法是什么？

> ID：14664486
> 
> 赞同：5
> 
> 时间：2013-02-02T17:29:27.410
> 
> 标签：clojure, leiningen

对于那些不知道`*print-length*`代表什么的人：

如果您在 REPL 中`(set! *print-length* 200)`进行评估`(range)`，这通常会导致打印无限的数字列表，则只会打印前 200 个数字。

我正在尝试将此设置为我所有 REPL 中的默认值`profiles.clj`。现在我得到了这个，但它不起作用：

```
{:user {:plugins [[lein-swank "1.4.4"]
                  [lein-catnip "0.5.0"]]
        :repl-options {*print-length* 200}} 
 :dev {:dependencies [[clj-ns-browser "1.2.0"]
                      [org.clojure/tools.trace "0.7.5"]]}} 
```

这有什么问题？

**更新。**Tnx Michal 回答了这个问题。我的固定`profiles.clj`现在看起来像这样。请注意，它仅适用于项目内部。

```
{:user {:plugins [[lein-swank "1.4.4"]
                  [lein-catnip "0.5.0"]]
        :repl-options {:init (set! *print-length* 200)}} 
 :dev {:dependencies [[clj-ns-browser "1.2.0"]
                      [org.clojure/tools.trace "0.7.5"]]}} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-02T17:40:59.883

`:repl-options`需要是 Leiningen`repl`任务支持的选项图；其他任何内容都将被忽略。`*print-length*`不是一个有效的选项（也不是`nil`；我必须检查以确定是否在此处评估了键，但这两种方式都不起作用）。

相反，您应该使用类似的东西

```
:repl-options {:init (set! *print-length* 200)} 
```

有关可用选项（包括）的描述，请参阅`sample.project.clj`Leiningen 存储库的根目录。`:init`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-09-24T20:29:33.707

现在 project.clj 也支持这一点：

```
:global-vars {*print-length* 20} 
```

# asp.net - 带有文件名的 ASP.net MVC4 WebApi 路由

> ID：14664488
> 
> 赞同：36
> 
> 时间：2013-02-02T17:29:35.497
> 
> 标签：asp.net, asp.net-mvc, asp.net-web-api, asp.net-mvc-routing

我正在尝试让以下（和类似的）网址在我的 ASP.net MVC4/WebApi 项目中工作：

```
http://127.0.0.1:81/api/nav/SpotiFire/SpotiFire.dll 
```

负责此 url 的路由如下所示：

```
 config.Routes.MapHttpRoute(
            name: "Nav",
            routeTemplate: "api/nav/{project}/{assembly}/{namespace}/{type}/{member}",
            defaults: new { controller = "Nav", assembly = RouteParameter.Optional, @namespace = RouteParameter.Optional, type = RouteParameter.Optional, member = RouteParameter.Optional }
        ); 
```

如果我删除 . 在文件名中，或者如果我在 URL 后面添加一个斜杠，但这也意味着我不能使用`Url.Route`-methods 等。我得到的错误是一个通用的 404 错误（下图）。

![在此处输入图像描述](../Images/cecc0bca281cb97d81fc3c1aa1d6329f.png)

我尝试添加`<httpRuntime targetFramework="4.5" relaxedUrlToFileSystemMapping="true" />`到我的 web.config，并且我也尝试添加

```
<compilation debug="true" targetFramework="4.5">
  <buildProviders>
    <remove extension=".dll"/>
    <remove extension=".exe"/>
  </buildProviders>
</compilation> 
```

而且似乎都不起作用。所以我的问题基本上是，我怎样才能让这个 URL 正常工作并正确映射？

* * *

## 回答 #1

> 赞同：52
> 
> 时间：2013-02-02T17:52:27.947

您可以将以下处理程序添加到`<handlers>`您的部分`<system.webServer>`：

```
<add 
    name="ManagedDllExtension" 
    path="api/nav/*/*.dll" 
    verb="GET" 
    type="System.Web.Handlers.TransferRequestHandler" 
    preCondition="integratedMode,runtimeVersionv4.0" 
/> 
```

这将使包含的所有请求都`.dll`通过托管管道提供服务。另请注意，我如何将它们限制为 GET 动词以限制性能影响。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2013-02-02T17:47:23.107

找到了。需要的是这个（也许是我在原帖上面添加的一些东西）：

```
<system.webServer>
  <modules runAllManagedModulesForAllRequests="true" />
</system.webServer> 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2016-09-27T11:27:30.527

我的权衡是附加`/end`到路线的尽头。`.`的在最后一个之前被忽略`/`。

等效的 URL 是*http://127.0.0.1:81/api/nav/SpitiFire/SpitiFire.dll/end*。

好处是您的资产不会受到性能影响。

# jquery - 如何在点击时同时过滤和处理项目

> ID：14664491
> 
> 赞同：1
> 
> 时间：2013-02-02T17:29:42.687
> 
> 标签：jquery, html, jquery-plugins, jquery-selectors, jquery-isotope

我正在使用 jQuery isotope 插件根据其类别过滤一组结果。我试图更进一步，同时对过滤后的结果进行重新排序（对于每个类别，项目将具有不同的排序顺序）。

单击类别时，项目将被过滤为具有匹配类别的项目作为一个类。在下面的示例中，有两个项目：两者都被归类为“类别演讲者”和“类别支持者”，因此当我在过滤器导航中单击其中任何一个类别时，都会出现这两个项目。我现在想做的是根据视图中的类别对这些项目进行不同的排序。

选择“Speakers”时，首先显示“post-1”。选择“支持者”时，将首先显示“post-2”。排序将基于项目中的附加类（sort-speakers-1、sort-speakers-2、sort-supporters-1、sort-supporters-2 等）。

我希望这是有道理的！我尝试使用 getSortData 选项，但我做错了。同位素文档很有意义，我能够单独过滤和排序。但同时没有运气。

下面的简化过滤器代码

HTML：

```
<!-- Grid of filterable/sortable items -->
<div id="Grid">

    <div id="post-1" class="category-supporters category-speakers item sort-speakers-1 sort-supporters-2" data-slug="lorem-ipsum-dolor">
        <div class="itemButton format-standard"></div>
        <div class="small-info" data-permalink="http://external-link.com" data-title="Lorem Ipsum">
            <div class="entry-image clearfix">
                <div class="hover-content zoom">
                    <a title="Lorem Ipsum" href="http://external-link.com" class="preload imgSmall item-preview iconPost" rel="">
                        <img src="logo.jpg" alt="" />
                    </a>
                </div>
            </div>
        </div>
    </div>

    <div id="post-2" class="category-speakers category-supporters item sort-speakers-2 sort-supporters-1" data-slug="lorem-ipsum-dolor">
        <div class="itemButton format-standard"></div>
        <div class="small-info" data-permalink="http://external-link.com" data-title="Lorem Ipsum">
            <div class="entry-image clearfix">
                <div class="hover-content zoom">
                    <a title="Lorem Ipsum" href="http://external-link.com" class="preload imgSmall item-preview iconPost" rel="">
                        <img src="logo2.jpg" alt="" />
                    </a>
                </div>
            </div>
        </div>
    </div>        

</div> 
```

JavaScript：

```
jQuery(document).ready(function(){

    $container = jQuery('#Grid');

    $container.isotope({
        itemSelector : '.item',
        transformsEnabled: false,
        masonry: {
            columnWidth: 160
        }
    });

   $optionLinks.click(function(){
        var $this = jQuery(this);

        var $optionSet = $this.parents('.option-set');
        $optionSet.find('.selected').removeClass('selected');
        $this.addClass('selected');        
        $this.parent().parent().prev('a').addClass('selected');

        // make option object dynamically, i.e. { filter: '.my-filter-class' }
        var options = {},
        key = $optionSet.attr('data-option-key'),
        value = $this.attr('data-option-value');

        // parse 'false' as false boolean
        value = value === 'false' ? false : value;
        options[ key ] = value;
        if ( key === 'layoutMode' && typeof changeLayoutMode === 'function' ) {
            // changes in layout modes need extra logic
            changeLayoutMode( $this, options )
        } else {
            // otherwise, apply new options
            $container.isotope( options );
        }
        return false;
    });    

}); 
```

关于如何修改 JavaScript 以每次使用的任何建议？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-03T17:43:32.843

> 同位素文档是有道理的，我可以单独过滤和排序.. 但同时没有运气。

我目前也在从事一个同位素项目。我发现一次排序和过滤没有问题。

我建议将您的排序值放在数据属性中：

```
<div data-sort-speaker="1"> 
```

这使得检索值更容易（但这只是我）。然后：

```
$.container.isotope({ 
    // all your other initialization options here.
    getSortData: { 
        speakers: function ($elem) {
            return $elem.data('sort-speaker'); // will return 1 in this example.
        } 
    } 
});

// On button click:
$.container.isotope({filter: '.category-speakers', sortBy: 'speakers'}); 
```

> 关于如何每次修改 JS 的任何建议？

你可以试试打电话

```
 $.container.isotope('reLayout'); 
```

每一次。但是，如果您每次都修改过滤器或排序选项，则不需要这样做。

# localization - 如何将 Drupal 7 站点从英语翻译成希伯来语？

> ID：14664493
> 
> 赞同：1
> 
> 时间：2013-02-02T17:29:45.533
> 
> 标签：localization, drupal-7, translate, hebrew

我有一个 Drupal 7 网站。请告诉我如何将它翻译成希伯来语？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-02T17:38:28.790

您可以将此链接放在您的标题中，该链接会将用户带到谷歌翻译页面

```
 <a href="http://translate.google.com/translate?u=%lookup~url:current%">Translation</a> 
```

或访问[此链接](http://fosiao.com/content/add-google-translate-drupal)以获取代码片段

# c++ - 为什么向量的多参数构造函数采用未标记为“显式”的构造参数？

> ID：14664494
> 
> 赞同：10
> 
> 时间：2013-02-02T17:29:49.990
> 
> 标签：c++, c++11, constructor, explicit, equivalence

我在标准 C++ 库中观察到以下向量构造函数

```
explicit vector(size_type n);
vector(size_type n, const T& value, const Allocator& = Allocator()); 
```

没有标记第二个构造函数是否有原因`explicit`？这编译，让我感觉不好

```
void f(vector<string>);

int main() {
  f({10, "foo"});
} 
```

虽然如果我省略`"foo"`，它不会编译，当我将一个 int 和一个字符串的对（复合）值传递给一个需要字符串向量的函数时，这就是我所期望的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-02T18:06:27.470

`{ ... }`我想知道在创建临时对象时期望始终代表容器元素列表是否合法。这似乎是你的假设。**IMO需要**声明单参数构造函数`explicit`以避免意外的*转换序列*或无意义的分配，例如：

```
vector<int> x = 3; 
```

另一方面，对于双参数版本，在创建临时文件时调用此构造函数的*唯一方法*是使用花括号，并且程序员很清楚他在其中放入了什么。例如，我很清楚，`10`并且`"hello"`并不意味着表示容器元素列表，因为`10`它不是字符串。

如果我真的想传入一个初始化为 10 个元素的向量`"hello"`，我会因为不得不写`f(vector(10, "hello"))`而不是只做`f({10, "hello"})`.

所以总结一下：虽然需要将单参数构造函数声明为`explicit`，但我相信这对于双参数值不是强制性的，因为并非一对花括号内的所有内容都应解释为容器列表元素。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-02T17:43:50.023

> 虽然如果我省略“foo”，它不会编译，这就是我将 int 和字符串的对（复合）值传递给需要字符串向量的函数时所期望的。

不，您没有传递一对 int 和一个字符串，而是创建了一个大小为 10 的向量，其中包含诸如“foo”之类的字符串内容。它没有任何问题！我可以想出一些情况，从一开始就创建一个包含相等字符串的向量可能很有用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-02T20:47:10.610

> 当我将 int 和字符串的一对（复合）值传递给需要字符串向量的函数时，这就是我所期望的。

嗯，有你的问题。

`{...}`不是“复合值”。它不是一个列表。它说，“使用这些值初始化一个对象”。如果有问题的对象是一个聚合，它将使用聚合初始化。如果所讨论的对象是非聚合类型，它将根据类型的匹配构造函数和 C++11 中花括号初始化列表的各种规则来选择要调用的构造函数。

您不应该将其`{10, "foo"}`视为两个值的列表。它是一个包含两个值的初始化程序。它可以与 a 一起使用`std::pair<int, const char *>`，依此类推。

的构造函数不显式的原因`std::vector`正是为了*允许*这种构造。单参数构造函数是显式的，否则，隐式转换规则将允许这样做：

```
std::vector<T> v = 5; //??? 
```

或者，更重要的是：

```
void Foo(const std::vector<T> &v);

Foo(5); //??? 
```

我们不希望整数可以隐式转换为`std::vector`s。但是，当您使用初始化程序时，允许更广泛的“隐式”转换更合理，因为您可以在`{}`那里看到语法。

对于单参数情况，不清楚用户的意思。使用 {} 语法，用户的意思*很*清楚：初始化对象。

```
Foo({10, "foo"}); //Initializes the first argument given the values. 
```

# d3.js - 带有模拟数据的“实时”图 d3.js

> ID：14664496
> 
> 赞同：0
> 
> 时间：2013-02-02T17:29:59.957
> 
> 标签：d3.js

我创建了一个简单的折线图，其中包含来自 mySQL 数据库的数据，使用 PHP 以 JSON 格式返回数据。

[https://gist.github.com/5fc4cd5f41a6ddf2df23](https://gist.github.com/5fc4cd5f41a6ddf2df23)

我想模拟“实时”更新类似于此示例的内容，但不太复杂： [http ://bl.ocks.org/2657838](http://bl.ocks.org/2657838)

我一直在寻找关于如何像 D3 一样简单地实现这一点的示例 - 无济于事。

我查看了 Mike Bostock 的[http://bost.ocks.org/mike/path/](http://bost.ocks.org/mike/path/)路径转换，但不确定如何使用 json 数据实现这一点。

任何人都可以提供一个例子或一些关于我如何做到这一点的指导吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-02T18:38:38.823

在 SVG 中进行这种线转换很棘手，因为稍微移动大量*点*并重新渲染整条线会损害性能。

对于与每个数据点的交互性不是最重要并且时间序列可以增长到包含任意数量的点的情况，请考虑使用[Cubism](http://square.github.com/cubism/)。它是一个基于 d3 的库，但专门用于有效地可视化时间序列数据。为了防止 SVG 重新渲染，它在画布上绘制点，允许在新数据到达时进行廉价的逐像素转换。

# c++ - 类型同名的成员

> ID：14664497
> 
> 赞同：1
> 
> 时间：2013-02-02T17:30:06.250
> 
> 标签：c++

我想创建一个与返回类型同名的成员函数。例子：

```
class A { };

class B {
public:
    A& A() { return *a; }
private:
    A* a;
}; 
```

但是，编译器不会让我这样做。我试图将成员返回类型的类型更改为`::A`(as sugested [here](https://stackoverflow.com/a/12944488/105398 "这里")，但无济于事。我知道我可以更改成员名称，但我只想了解为什么它有这个限制，以及我的解决方法是什么.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-02T17:40:05.517

如果您声明一个名为的成员，`A`您将无法再使用`A`没有显式命名空间的类型。您需要将每次出现的类型 A 更改为`::A`.

更正后的代码如下所示：

```
class A { };

class B {
    public:
        ::A& A() { return *a; }
    private:
        ::A* a;
}; 
```

## 键盘上的固定代码：

[http://codepad.org/cilF9rKm](http://codepad.org/cilF9rKm)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-02T17:35:12.200

那是因为与类同名的成员是构造函数。但是，您尝试使用类型声明一个，这是一个错误。您只能按照语言想要的方式定义构造函数（没有明确的返回类型）。

例如，如果你有一个方法`B`说

```
A x = A(); 
```

无论您是在调用`B::A()`还是在构造一个新的 A 对象，都是模棱两可的。

# c++ - 申报基础/名称介绍

> ID：14664498
> 
> 赞同：-3
> 
> 时间：2013-02-02T17:30:21.493
> 
> 标签：c++

好的，我最近读了一些文章，上面说：

在 c++ 中声明的每个名称都有与之关联的类型。例如

```
int a; //type of a int 
void foo(); //type is void(*)()
class bar; //what is type of bar here then ? 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T17:33:03.543

它没有传统意义上的“类型”，而是一种类型。虽然在 Ruby 或 Objective-C 等一些语言中，类是对象（类的对象`Class`），但在 C++ 中，类除了作为类型之外没有其他类型。它们确实有一个关联的`type_info`，但这不是类本身，而只是一些必须通过 访问的信息`typeid`。

`bar`不是类型`bar`。`bar`甚至不是一个对象。Bar 是一种类型，如前所述，在 C++ 中，它没有类型。

# java - 如何查看 2 个可运行的进程之间的通信

> ID：14664500
> 
> 赞同：0
> 
> 时间：2013-02-02T17:30:26.423
> 
> 标签：java, multithreading, swing, runnable, jprogressbar

我有 2 个类 .java

主要的 ：

```
public class Controller extends javax.swing.JFrame
{   
    public static void updateProgressBar(int i) {
        jProgressBar1.setValue(i);
        jProgressBar1.repaint();
    }

    public static void main(String args[]) {

        /* Create and display the form */
        java.awt.EventQueue.invokeLater(new Runnable() {
            public void run() {
                Controller app = new Controller();
                app.setVisible(true);
                app.setResizable(false);
            }
        });
    }

    private void jButton2ActionPerformed(java.awt.event.ActionEvent evt) {
        ChildModel model = new ChildModel();
        Thread t1 = new Thread(model);
        t1.start();
    }

    private javax.swing.JProgressBar jProgressBar1; //Initialized with Netbeans builder
} 
```

我的 ChildModel (ChildModel.java) 计算一些代码（大约需要 10-20 秒），我想显示父类 (Controller.java) 的进度。

这是我的 ChildModel ：

```
public class ChildModel implements Runnable
{
    public ChildModel(){ /* Something */ }

    public void complexMath()
    {
        //Lots of logic here
        Controller.updateProgression(purcent);
    }

    @Override
    public void run() {
        complexMath();
    }
} 
```

问题显然是我的静态 void updateProgressBar 无法修改非静态变量。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-02T17:40:11.553

该`jProgressBar1`变量是一个实例变量，因此您无法从静态方法访问它。并且该方法不应该是静态的：您想要更新控制器中的进度，而不是所有控制器实例。

将控制器的引用传递给 ChildModel，并使用 ChildModel 中的此引用来更新进度条。还要记住，所有 Swing 交互都必须在 EDT 中完成，而不是在后台线程中。所以代码应该是这样的：

```
public class Controller extends javax.swing.JFrame
{   
    public void updateProgressBar(int i) {
        jProgressBar1.setValue(i);
        // no need for repaint. The progress bar knows it must be repainted 
        // when its value changes
    }

    public static void main(String args[]) {

        /* Create and display the form */
        java.awt.EventQueue.invokeLater(new Runnable() {
            public void run() {
                Controller app = new Controller();
                app.setVisible(true);
                app.setResizable(false);
            }
        });
    }

    private void jButton2ActionPerformed(java.awt.event.ActionEvent evt) {
        ChildModel model = new ChildModel(this);
        Thread t1 = new Thread(model);
        t1.start();
    }

    private javax.swing.JProgressBar jProgressBar1; //Initialized with Netbeans builder
}

public class ChildModel implements Runnable
{

    private Controller controller;

    public ChildModel(Controller controller){
        this.controller = controller;
    }

    public void complexMath()
    {
        //Lots of logic here
        SwingUtilities.invokeLater(new Runnable() {
            @Override
            public void run() {
                controller.updateProgression(percent);
            }
        });
    }

    @Override
    public void run() {
        complexMath();
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-02T17:37:39.020

Swing 有自己的[并发机制](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/index.html)来处理更新组件。在这里，您可以使用[Swing Timer](http://docs.oracle.com/javase/tutorial/uiswing/misc/timer.html)并更新`JProgressBar`. 您可以使用 a作为类成员变量并传入您的 instance ，而不是使用`ChildModel`implement ，以便在需要时调用。`Runnable``Timer``jProgressBar1``setValue`

# javascript - DOM中的项目不清除，如何清除缓存

> ID：14664501
> 
> 赞同：1
> 
> 时间：2013-02-02T17:30:26.790
> 
> 标签：javascript, jquery, caching, browser-cache, cache-control

我有一个网站，当我使用砖石类型效果时，项目被加载到 DOM 中的页面上。

现在，用户可以随时删除这些项目，如果他们愿意，可以同时删除许多项目。

问题是，删除后，我通过重新加载刷新显示项目的页面，并且项目仍然存在。即使我离开页面并返回项目仍然存在。但是它们肯定已经从数据库表中删除了。从页面中清除它们的唯一方法是 CTRL+R，完全刷新

如何清除 DOM 缓存或强制刷新？还是有更好的方法来做到这一点？

我使用 PHP 作为主要的后端语言。我也在使用 Jquery。

不知道要标记什么，但认为 JS 和 Jquery 问题，所以将从那个开始。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-02T17:35:59.440

这既不是 JavaScript 也不是 jQuery 问题。这是一个缓存问题。您需要配置您的 Web 服务器以设置正确的缓存控制标头（`Expires`和类似标头），以便浏览器知道重新获取页面。[`header`（如果您需要使用函数](http://uk3.php.net/manual/en/function.header.php)在页面之间改变它们，您也可以在 PHP 响应中设置它们。）

我不会挑出一个特定的链接，但如果你搜索“缓存控制”，你会找到一百万个教程。:-)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-03T09:10:44.533

为 ajax 调用添加了时间戳，因此它首先不会缓存，当您向后考虑时真的很简单！

非常感谢其他答案/评论

# c++ - 访问违规写入位置？

> ID：14664510
> 
> 赞同：2
> 
> 时间：2013-02-02T17:31:18.950
> 
> 标签：c++

我正在尝试编写一个函数来反转字符串，但是当我这样做时遇到了这样的异常： *str++ = *end; 谁知道是什么原因？提前致谢。

```
void reverse(char* str)
 {
    char *end = str;
    char temp;
    if(str)
    {
      while(*end)
       {
     end++;
       }
    end--;

    while(str<end)
    {
       temp = *str;
       *str++ = *end;
       *end--=temp;
    }
   }
 } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-02T17:33:23.220

很有可能，您使用字符串文字调用了该函数：

```
 reverse("ablewasiereisawelba"); 
```

您不能在不调用未定义行为的情况下修改字符串文字，并且崩溃是对尝试修改字符串文字的有效响应。确保您传递一个非常量数组：

```
 char palindrome[] = "ablewasiereisawelba";
 reverse(palindrome); 
```

C++ 2011 标准 ISO/IEC 14882:2011 说：

> ### 2.14.5 字符串文字 [lex.string]
> 
> ¶12 尝试修改字符串文字的效果是未定义的。

通常，字符串文字被放置在只读内存中，并且尝试修改一个会导致“崩溃”。这当然是对调用未定义行为的完全合法的回应。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-02T17:40:23.317

所以你需要这样做：

```
 char str[] = "My string to reverse!";

 reverse(str); 
```

这意味着`str`存储在可修改的内存中。大多数现代编译器都将文字字符串存储在只读内存中（即“引号内的任何内容”，因为您不打算修改原始字符串）。

# c++ - 从 Arduino 以太网客户端 Get 中删除标头信息

> ID：14664511
> 
> 赞同：2
> 
> 时间：2013-02-02T17:31:20.883
> 
> 标签：c++, arduino

我想知道我是否错过了这个技巧。

因此，在 arduino 上，您可以从 Web 服务中获取：

```
if (client.connect("google.com", 80)) {
client.println("GET /service/v2/time HTTP/1.1");
client.println("Host:nimbits-02.appspot.com");   
client.println();
delay(1000);
while(client.connected() && !client.available()) delay(1); 
while (client.available()) {
  c = client.read();
  Serial.print(c);
}

client.stop();
client.flush(); 
```

}

工作得很好（调用 nimbts 时间服务）

这个调用的内容是我需要的，打印上面的结果给我：

```
> HTTP/1.1 200 OK Date: Sat, 02 Feb 2013 17:24:38 GMT Content-Type:
> text/html Server: Google Frontend Content-Length: 13
> 
> 1359825878036 
```

一切都很好 - 但我必须在 arduino 上进行一些昂贵的字符串处理才能获取消息正文。我只想要 1359825878036。有没有办法告诉以太网客户端不读取标头？那会很方便。

到目前为止，我最好的解决方案是假设消息正文总是在最后一个换行符之后，这似乎容易出错：

```
if (client.connect("google.com", 80)) {
      client.println("GET /service/v2/time HTTP/1.1");
      client.println("Host:nimbits-02.appspot.com");   
      client.println();
      delay(1000);
      while(client.connected() && !client.available()) delay(1); 
      while (client.available()) {
        c = client.read();
        response= response + c;
      }
     int contentBodyIndex = response.lastIndexOf('\n');
     if (contentBodyIndex > 0) {
        Serial.print(response.substring(contentBodyIndex));
     }

      client.stop();
      client.flush();
    } 
```

谢谢，本 - nimbits.com

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-02T19:08:19.187

他们是一把钥匙。标头以双 CRLF 结尾：

```
Response = Status-Line
    *(( general-header        
   | response-header        
   | entity-header ) CRLF)  
   CRLF
   [ message-body ] 
```

见[W3 文档](http://www.w3.org/Protocols/rfc2616/rfc2616-sec6.html#sec6)

# mysql - 为什么这个 MySQL 查询会产生错误的行号？

> ID：14664516
> 
> 赞同：1
> 
> 时间：2013-02-02T17:32:29.400
> 
> 标签：mysql

给出以下查询

```
SET @num :=0, @current_shop_id := NULL, @current_product_id := NULL;

SELECT * FROM (

SELECT products.shop_id, products.product_id, @num := IF(@current_shop_id=shops.shop_id, IF(@current_product_id=products.product_id,@num,@num+1),0) AS row_number, @current_shop_id := shops.shop_id AS shop_dummy, @current_product_id := products.product_id AS product_dummy

    FROM
    favorites fav1 INNER JOIN
    products ON
    fav1.product_id=products.product_id AND 
    fav1.current=1 AND
    fav1.closeted=1 AND 
    fav1.user_id=30  INNER JOIN

    shops ON
    shops.shop_id = products.shop_id

    ORDER BY shops.shop ASC, products.product_id DESC

) AS rowed_results WHERE rowed_results.row_number>=0 AND rowed_results.row_number<(20) AND shop_id=130 
```

我期待表单的 row_number 值

```
+---------+------------+------------+------------+---------------+
| shop_id | product_id | row_number | shop_dummy | product_dummy |
+---------+------------+------------+------------+---------------+
|     130 |    1153746 |          0 |        130 |       1153746 |
|     130 |    1153736 |          1 |        130 |       1153736 |
|     130 |    1139944 |          2 |        130 |       1139944 |
|     130 |    1098296 |          3 |        130 |       1098296 |
|     130 |    1017455 |          4 |        130 |       1017455 |
|     130 |     551953 |          5 |        130 |        551953 |
|     130 |     551914 |          6 |        130 |        551914 |
+---------+------------+------------+------------+---------------+ 
```

（即，与给定 shop_id 值关联的所有唯一 product_id 值都获得唯一的行号，从 0 开始）。相反，我得到

```
+---------+------------+------------+------------+---------------+
| shop_id | product_id | row_number | shop_dummy | product_dummy |
+---------+------------+------------+------------+---------------+
|     130 |    1153746 |          1 |        130 |       1153746 |
|     130 |    1153736 |          0 |        130 |       1153736 |
|     130 |    1139944 |          0 |        130 |       1139944 |
|     130 |    1098296 |          0 |        130 |       1098296 |
|     130 |    1017455 |          0 |        130 |       1017455 |
|     130 |     551953 |          1 |        130 |        551953 |
|     130 |     551914 |          0 |        130 |        551914 |
+---------+------------+------------+------------+---------------+ 
```

我究竟做错了什么？

编辑：

Michael Berkowski 的解决方案（使用三个查询，一个用于检索数据，一个用于添加行号，一个用于按行限制）有效（语法略有变化）：

```
SET @num :=0, @current_shop_id := NULL, @current_product_id := NULL;

#limit by row

SELECT * FROM (

    #add row

    SELECT limit_query.*, @num := IF(@current_shop_id=shop_id, IF(@current_product_id=product_id,@num,@num+1),0) AS row_number, @current_shop_id := shop_id AS shop_dummy, @current_product_id := product_id AS product_dummy FROM (

        #retrieve data

        SELECT row_query.* FROM (

            SELECT products.shop_id, products.product_id

            FROM
            favorites fav1 INNER JOIN
            products ON
            fav1.product_id=products.product_id AND 
            fav1.current=1 AND
            fav1.closeted=1 AND 
            fav1.user_id=30  INNER JOIN

            shops ON
            shops.shop_id = products.shop_id

        ) AS row_query ORDER BY shop_id ASC, product_id DESC

    ) AS limit_query

) AS rowed_results WHERE rowed_results.row_number>=0 AND rowed_results.row_number<(20) AND shop_id=130; 
```

纯粹出于教育兴趣，我想知道为什么不能同时添加行号和限制行号，如下面的（非功能性）示例

```
SET @num :=0, @current_shop_id := NULL, @current_product_id := NULL;

#limit by row

SELECT rowed_results.*, @num := IF(@current_shop_id=shop_id, IF(@current_product_id=product_id,@num,@num+1),0) AS row_number, @current_shop_id := shop_id AS shop_dummy, @current_product_id := product_id AS product_dummy FROM (

    #retrieve data

    SELECT row_query.* FROM (

        SELECT products.shop_id, products.product_id

        FROM
        favorites fav1 INNER JOIN
        products ON
        fav1.product_id=products.product_id AND 
        fav1.current=1 AND
        fav1.closeted=1 AND 
        fav1.user_id=30  INNER JOIN

        shops ON
        shops.shop_id = products.shop_id

    ) AS row_query ORDER BY shop_id ASC, product_id DESC

) AS rowed_results WHERE row_number>=0 AND row_number<(20) AND shop_id=130; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-02T17:37:09.873

要使行增加，应该像将`@num`计算移到外部查询中一样简单。在这种情况下，`@current_product_id`不应该需要，因为`@num`可以直接增加。

```
SET @num :=0, @current_shop_id := NULL, @current_product_id := NULL;

SELECT 
  *,
  /* Perform the row increment in the outer query so it acts on the final rowset */
  @num := @num+1 AS row_number
FROM (
    SELECT products.shop_id, products.product_id, @current_shop_id := shops.shop_id AS shop_dummy, @current_product_id := products.product_id AS product_dummy

    FROM
    favorites fav1 INNER JOIN
    products ON
    fav1.product_id=products.product_id AND 
    fav1.current=1 AND
    fav1.closeted=1 AND 
    fav1.user_id=30  INNER JOIN

    shops ON
    shops.shop_id = products.shop_id

    ORDER BY shops.shop ASC, products.product_id DESC

) AS rowed_results 
WHERE
  rowed_results.row_number>=0
  AND rowed_results.row_number<(20)
  AND shop_id=130 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-02T17:41:55.893

您的逻辑会检查商店 ID 和产品 ID。如果它们相同，则计数器递增，否则重置为零。尽管您的结果集具有所有相同的商店 ID，但它具有不同的产品 ID。

# nosql - cassandra 数据库设计

> ID：14664519
> 
> 赞同：1
> 
> 时间：2013-02-02T17:32:57.863
> 
> 标签：nosql, cassandra, cql, cql3

考虑以下情况：

我有一个页面，它将包含以下字段：

```
pageid, title, content, like, follow, field1, field2..., field100, pagecomments, images 
```

喜欢和关注是计数器字段，每次点击都会增加。

现在我正在考虑通过`Cassandra`以下方式设计它：

```
**TYPE A** page_table { 
    page_id, 
    title, 
    content, 
    like, 
    follow,
    posted_by,
    datetime,
    image1,
    image2,
    field1,
    field2..., 
    field100
}

page_comments {
    commentid, 
    page_id,text, 
    comment_like, 
    posted_by,
    datetime
}

**TYPE B** page_table {
    page_id, 
    title, 
    content,
    posted_by,
    datetime,
    image1,
    image2,
    field1,
    field2...,
    field100
}

page_like {
    page_id, 
    like
}
page_follow {
    page_id, 
    follow
}

page_comments {
    commentid, 
    page_id,
    text, 
    comment_like, 
    posted_by,
    datetime
} 
```

哪一个是最好的方法？或者为此建议一些好的`Cassandra`数据库设计，使用`CQL`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-03T01:20:47.830

您可能想阅读一些 noSQL 模式

[https://github.com/deanhiller/playorm/wiki/Patterns-Page](https://github.com/deanhiller/playorm/wiki/Patterns-Page)

如果您要从页面中获取所有评论，我看不到评论的任何 FK，您将需要在`page_table`精简版中，该页面缺少模式。我将添加哪个是`toMany`经常`nosql`嵌入在行中的，而不是有一个索引。所以你在很多设计中都有这个。

```
page_table {  
    page_id, 
    title, 
    content, 
    like, 
    follow,
    posted_by,
    datetime,
    image1,
    image2, 
    fktocomment1, 
    fktocomment2, 
    fktocomment3 
} 
```

通常所做的`fktocomment1`是以单词“comment”为前缀的，因此您可以通过剥离注释部分并在末尾使用 fk 来找到所有 fk（没有价值！）。这是一个复合名称模式，你可以用谷歌搜索。

**编辑：**模式页面编辑/添加了它很常见的模式，我以前从未想过添加它。

# git - zf2 git 供应商模块丢失。如何将它们包含到 git repo 中？

> ID：14664520
> 
> 赞同：0
> 
> 时间：2013-02-02T17:32:58.190
> 
> 标签：git, zend-framework2

我对 git 和 zf2 很陌生。我刚刚在我的服务器上创建了一个新的新 git 存储库并将一个 zf2 应用程序推入其中。但是供应商文件夹不会被推送，也不会推送其中的模块。我如何让 git 推送供应商和模块文件夹？

我认为问题是因为供应商模块来自 git，并且其中包含 .git 文件夹和 .gitignore 文件。尝试从中删除 .gitignore 文件，但这不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T10:21:13.110

是的，我认为您在“我认为问题是因为供应商模块来自 git 并且其中包含 .git 文件夹和`.gitignore`文件”这一点上是正确的。可能是您在删除时错过了一些文件吗？

有以下子模块：

```
vendor/
vendor/doctrine/common
vendor/doctrine/dbal
vendor/doctrine/doctrine-module
vendor/doctrine/orm 
```

如果您要推送所有供应商，那么您可以从上述所有目录中删除`.gitignore`和`.gitmodules`（如果存在）并从 projectroot/ 编辑`.gitignore`和删除`.gitmodules`，然后再次将整个供应商添加到父 git。它应该工作。

# c++ - VisualStudio 2012 - 两个项目 -> 链接器错误（C++）

> ID：14664521
> 
> 赞同：0
> 
> 时间：2013-02-02T17:33:00.277
> 
> 标签：c++, visual-c++, linker, visual-studio-2012, linker-errors

首先是我的简单设置：我有 2 个 VS2012 项目。现在我想在项目 A 中使用项目 B 中的类。我将项目 B 添加到 A 的项目依赖列表中，并在必要时导入了标题。(例如#include"..\src-pool\Coords.h";)。

到目前为止，一切都很好 - 没有编译器错误。但是当我尝试构建项目时，我得到了一些链接器错误：

```
Fehler  1   error LNK2019: Verweis auf nicht aufgelöstes externes Symbol ""public: __thiscall Coords::Coords(double,double)" (??0Coords@@QAE@NN@Z)" in Funktion ""public: void __thiscall TileDownloader::calculateBounds(double *,int)const " (?calculateBounds@TileDownloader@@QBEXPANH@Z)".  C:\Users\username\documents\visual studio 2012\Projects\CPPHA\project\TileDownloader.obj 
```

对不起，这是德文版的VS。“Verweis auf nicht aufgelöstes externes Symbol”的意思是：链接到未解析的外部符号。

有任何想法吗？=)

* * *

完成这个（这是我要导出并在其他项目中使用的类）

坐标.h

```
#pragma once
#include <iostream>
#ifdef EXPORT_MYCLASS
#define MYCLASSEXPORT __declspec(dllexport)
#else
#define MYCLASSEXPORT __declspec(dllimport)
#endif

class  MYCLASSEXPORT  Coords
{
public:
    Coords(double lat, double lon);
    ~Coords(void);
    double getLon() const;
    void setLon(double val);
    double getLat() const;
    void setLat(double val);

    void printInfos() const;

private:
    double lat, lon;

}; 
```

但我收到警告“不一致的 dll 导出”和相同的错误。抱歉，我是 C++ 新手

* * *

我想像这样使用它

```
#include "..\src-pool\Coords.h"

class TileDownloader
{
public:
    TileDownloader(void);
    ~TileDownloader(void);

    void  calculateBounds(double* array, int zoomLevel) const;
    void  downloadTiles() const;

private:
    double maxLat, maxLon, minLat, minLon;

}; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-02T17:37:47.673

链接器需要做 3 件事才能找到类方法：

1.  您引用了正确的 dll/项目
2.  您在该 dll/项目中有该方法的实现。
3.  它通过 dll 导出 ( **[__declspec(dllexport)](http://msdn.microsoft.com/en-us/library/a90k134d%28v=vs.80%29.aspx)** )暴露在外部

在标头中声明导出的常见做法：

```
#ifdef EXPORT_MYCLASS
#define MYCLASSEXPORT __declspec(dllexport)
#else
#define MYCLASSEXPORT __declspec(dllimport)
#endif

class MyClass
{
     MYCLASSEXPORT MyClass();
} 
```

然后，您可以在导出 dll 的预处理器定义中定义该预处理器参数。

在 Visual Studio 中：
项目属性 -> 配置属性 -> C/C++ -> 预处理器 -> 预处理器定义

# mysql - 在 SELECT 期间确定另一个表中的相关行数 (0 - n)

> ID：14664526
> 
> 赞同：0
> 
> 时间：2013-02-02T17:33:30.853
> 
> 标签：mysql, sql

****编辑****

**我使用了第一个答案中的查询，但最终不得不修改它，因为它不会在没有任何会话的情况下返回多个调查。我终于解决了这个查询：**

```
(SELECT i.id AS id, i.title AS title, c.title AS ctitle, c.color AS ccolor,
                     i.active AS active, i.length AS length, i.redirect AS redirect,
                     COUNT(s.sid) AS number
                FROM survey_info i
                LEFT JOIN survey_sessions s ON s.sid = i.id
                INNER JOIN survey_category c ON i.category = c.id
                WHERE s.sid IS NOT NULL
                GROUP BY s.sid)
                UNION ALL
                (SELECT i.id AS id, i.title AS title, c.title AS ctitle, c.color AS ccolor,
                       i.active AS active, i.length AS length, i.redirect AS redirect,
                       0 AS number
                FROM survey_info i
                LEFT JOIN survey_sessions s ON s.sid = i.id
                INNER JOIN survey_category c ON i.category = c.id
                WHERE s.sid IS NULL)
                ORDER BY 2 
```

**解释一下，从下面获取查询，并仅返回具有会话（已进行）的调查，然后使用 UNION ALL 子句将这些结果与仅检索没有会话（尚未进行的调查）的 SELECT 相结合.) 最后，它按第二列（调查标题）对组合结果进行排序**

**我希望这可以帮助其他人。**

**-------------------------------------------------- ------------------------------------------**

我一直在研究一项调查计划，让人们可以创建和管理调查。昨天我问了一个关于存储结果的问题，并意识到我做错了（为每个调查*不寒而栗*创建额外的表格）

我现在有一个新的表结构，它工作得更好，让我始终保持 6 个表。我有一个新的困境，我整夜都在努力，希望有人能指出我正确的方向。

我的表格现在如下：

**调查信息**

```
id(bigint)        PK
title(varchar)
category(bigint)
length(bigint)
active(tinyint) 
```

**调查类别**

```
id(bigint)        PK
title(varchar)
color(varchar) 
```

**调查会话**

```
id                PK
timestamp(bigint) 
```

我最初使用以下 SQL 来收集调查及其会话数（所用时间）

```
SELECT i.id AS id, i.title AS title, c.title AS ctitle, c.color AS ccolor,
       i.active AS active, i.length AS length, i.redirect AS redirect,
       COUNT(s.sid) AS number
FROM survey_info i, survey_category c, survey_sessions s
WHERE i.category = c.id AND s.sid = i.id
GROUP BY s.sid 
```

但是，正如您可能已经猜到的那样，这意味着每当我创建一个新的调查（从未进行过）时，它都不会出现在这个列表中，因为在survey_session 表中没有它的条目。

当survey_sessions中没有行时，是否可以使用MySQL中的条件语句返回0来代替“COUNT(s.sid) AS number”？我已经阅读了很多关于 LEFT JOIN 的信息，但我认为它们不会起作用，因为没有任何东西可以将新调查连接到survey_sessions 表。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-02T17:41:01.723

这是您的查询重写为`LEFT JOIN`on `survey_sessions`。您应该能够轻松地检查它是否适合您。

```
SELECT i.id AS id, i.title AS title, c.title AS ctitle, c.color AS ccolor,
    i.active AS active, i.length AS length, i.redirect AS redirect,
    COUNT(s.sid) AS number
FROM survey_info i
INNER JOIN survey_category c ON i.category = c.id
LEFT JOIN survey_sessions s ON s.sid = i.id
GROUP BY s.sid 
```

# scala - 如何将两个排序列表中的相似对象配对？

> ID：14664528
> 
> 赞同：1
> 
> 时间：2013-02-02T17:33:39.390
> 
> 标签：scala, list

我正在尝试学习 Scala (2.10)。在这个练习中，我有一个案例类：

```
case class Entry(name: String, version: String) { } 
```

我有两个按名称属性排序的此类对象序列：

```
S1 = E1, E3, E4
S2 = F1, F2, F4 
```

我想构建一个新序列：

```
S3 = (E1, F1), (None, F2), (E3, None), (E4, F4) 
```

通过它们的名称属性对它们进行配对，最好不必对每个列表进行多次迭代。

我对这个问题的所有解决方案在风格上都变得非常必要（例如，有条件地增加两个整数并使用.get()）。我希望某个善良的灵魂可以提出一种更实用的方法。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-02T17:48:50.530

你的意思是他们的`version`属性，从例子来看？

您可以使用列表和递归：

```
def pair(s1: List[Entry], s2: List[Entry]): List[(Option[Entry], Option[Entry])] =
  (s1, s2) match {
    case (Entry(_, v1) :: _, Entry(_, v2) :: _) if v1 == v2 =>
      (Some(s1.head), Some(s2.head)) :: pair(s1.tail, s2.tail)
    case (Entry(_, v1) :: s1t, Entry(_, v2) :: s2t) =>
      if (v1 < v2) (Some(s1.head), None) :: pair(s1.tail, s2)
      else (None, Some(s2.head)) :: pair(s1, s2.tail)
    case (Nil, s2) => s2.map(entry => (None, Some(entry))
    case (s1, Nil) => s1.map(entry => (Some(entry), None)
  } 
```

本质上，您会进入列表比较他们的头，如果版本相同，则取两个头，或者只取较小的一个。然后，您递归地对列表的尾部执行相同的操作。如果其中一个列表为空，您只需将另一个列表的剩余元素映射成对`None`和条目。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-03T02:57:39.863

我无法在我的 ipad 上显示详细信息；），但如果数字中没有太多空白，您可以扫描每个列表，通过使用像 axel22 这样的递归算法显示，然后将集合压缩在一起。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-02T17:47:22.733

如果我理解正确，`EX`则表示`name="E"`and `version="X"`，并且您想将事物与相同的版本配对。这是我的解决方案，不幸的是这需要平方时间，所以如果效率很重要，请不要使用它......

```
val versions = (S1 ++ S2) map { _.version } groupBy (identity) keys
val sortedVersions = versions.toSeq.sorted
sortedVersions map { ver => (S1 find { _.version==ver }, S2 find { _.version==ver }) } 
```

或者如果您事先知道可能的版本是什么，只需制作一个序列并执行最后一行。

```
Seq("1", "2", "3", "4") map { ver => (S1 find { _.version==ver }, S2 find { _.version==ver }) } 
```

结果：

```
 ArrayBuffer((Some(Entry(E,1)),Some(Entry(F,1))), (None,Some(Entry(F,2))), (Some(Entry(E,3)),None), (Some(Entry(E,4)),Some(Entry(F,4)))) 
```

请注意，而不是`(None, F2)`我在`(None, Some(F2))`这里，因为配对似乎更一致`None`。`Some`

顺便说一句，`case class(...)`就足够了，您不需要`{ }`在其后添加空括号。

# c# - 选项卡<->窗口组件？

> ID：14664529
> 
> 赞同：1
> 
> 时间：2013-02-02T17:33:45.727
> 
> 标签：c#, winforms

我想知道是否有开箱即用的 winforms UI 小部件可以从容器（如 google chrome 选项卡）中拖出到新的相同容器窗口中（如果需要，将来可以与其他此类选项卡连接）。总而言之，我想知道是否有灵活的选项卡<->窗口组件？如果没有，我想知道是否有一个自由开源许可证？

# c++ - 链表，添加前检查列表内是否重复

> ID：14664532
> 
> 赞同：-4
> 
> 时间：2013-02-02T17:34:12.533
> 
> 标签：c++

我试图在添加到列表之前检查重复项，但我不知道什么时候出错了。希望你们能帮帮我。我生成一个随机字符串来打印出 Sign[k]，例如“驴”。

```
while (temp1 != NULL)
{
    if (strcmp (static_cast <char *>((temp1 -> data)), temp)== 0)
        return false;

    temp1 -> next = head;
    head = temp1;
}

return true;

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-02T17:41:16.490

在您的函数`testSimilar`中，而不是：

```
temp1 -> next = head;
head = temp1; 
```

你可能的意思是：

```
 temp1 = temp1 -> next; 
```

# sql - 存储过程/存储函数：PostgreSQL 中的 SELECT

> ID：14664533
> 
> 赞同：1
> 
> 时间：2013-02-02T17:34:19.810
> 
> 标签：sql, postgresql, plpgsql, postgresql-9.1, composite-types

我在 PostgreSQL 中使用简单的 SELECT 创建了一个存储过程/函数：

```
CREATE FUNCTION select_proc2()
RETURNS SETOF procedure AS
$DELIMETER$
SELECT * FROM procedure;
$DELIMETER$
LANGUAGE 'sql' 
```

这个可行，但是当我尝试像这样具体时：

```
CREATE FUNCTION select_proc2(INT)
RETURNS SETOF procedure AS
$DELIMETER$
SELECT "Fname" FROM procedure where "Id" = $1;
$DELIMETER$
LANGUAGE 'sql' 
```

它返回一个错误：

```
错误：声明为返回过程的函数中的返回类型不匹配
详细信息：最终语句返回字符而不是整数
第 1 列. 上下文：SQL 函数“select_proc2”

```

我尝试了任何我能想到的解决方案。这里有人知道如何解决这个错误吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T22:33:45.213

您需要使`RETURN`类型适应实际返回的内容：

```
CREATE OR REPLACE FUNCTION select_proc2(int)
  RETURNS SETOF text AS
$func$
SELECT "Fname" FROM procedure WHERE "Id" = $1;
$func$ LANGUAGE sql 
```

在您的第二个版本中，您只返回一列。从我推导出数据类型的名称`text`，但这只是一个猜测。

如果`"Id"`是主键列`procedure`或以其他方式定义`UNIQUE`，则只能返回一行，您可以简化为：

```
 RETURNS text 
```

也不要引用语言名称。`sql`是这里的标识符，而不是字符串文字。它只是出于历史原因而被容忍，但在未来的版本中可能会出现错误。

关于您的列名：我的建议是在 Postgres 中专门使用不带引号的小写标识符。首先阅读[“标识符和关键词”](http://www.postgresql.org/docs/current/interactive/sql-syntax-lexical.html#SQL-SYNTAX-IDENTIFIERS)一章，了解`"id"`、或作为列名的意义。`"Id"``ID``id`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-02T17:57:07.160

删除字段名称周围的引号（不带“）：

```
 CREATE FUNCTION select_proc2(INT)
  RETURNS SETOF procedure AS
  $DELIMETER$
  SELECT Fname FROM procedure where Id = $1;
  $DELIMETER$
  LANGUAGE 'sql' 
```

# c++ - C++11 正则表达式查找捕获组标识符

> ID：14664537
> 
> 赞同：5
> 
> 时间：2013-02-02T17:34:53.277
> 
> 标签：c++, regex, c++11

我查看了 C++11 的新 regex 库的许多来源，但其中大多数更关注语法，或者更基本的使用，如 regex_match 或 regex_search。虽然这些文章帮助我开始使用正则表达式库，但我很难找到有关捕获组的更多详细信息。

我想要完成的是找出匹配属于哪个捕获组。到目前为止，我只找到了一种方法来做到这一点。

```
#include <iostream>
#include <string>
#include <regex>

int main(int argc, char** argv)
{
    std::string input = "+12 -12 -13 90 qwerty";
    std::regex pattern("([+-]?[[:digit:]]+)|([[:alpha:]]+)");

    auto iter_begin = std::sregex_token_iterator(input.begin(), input.end(), pattern, 1);
    auto iter_end = std::sregex_token_iterator();

    for (auto it = iter_begin; it != iter_end; ++it)
    {
        std::ssub_match match = *it;
        std::cout << "Match: " << match.str() << " [" << match.length() << "]" << std::endl;
    }

    std::cout << std::endl << "Done matching..." << std::endl;
    std::string temp;
    std::getline(std::cin, temp);

    return 0;
} 
```

在更改 的第四个参数的值时`std::sregex_token_iterator`，我可以控制它将保留哪个子匹配，并告诉它丢弃其余的子匹配。因此，要找出匹配属于哪个捕获组，我可以简单地遍历捕获组以找出特定组没有丢弃哪些匹配。

*但是*，这对我来说是不可取的，因为除非在后台进行一些缓存，否则我希望每个构造都`std::sregex_token_iterator`传递输入并再次找到匹配项（如果这是错误的，请有人纠正我，但这是最好的我可以得出的结论）。

**有没有更好的方法来找到匹配所属的捕获组？还是迭代子匹配是最好的做法？**

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-02T19:26:56.803

改为使用`regex_iterator`。您将有权访问`match_results`每个匹配项，其中包含所有`sub_match`es，您可以在其中检查匹配项属于哪个捕获组。

# lua - 发生 SWIG_RuntimeError 的行号

> ID：14664541
> 
> 赞同：0
> 
> 时间：2013-02-02T17:35:19.370
> 
> 标签：lua, swig, quantlib-swig

我正在通过 swig 使用 C++ 库运行 Lua。当发生 swig 运行时错误时，我想知道导致问题的行。我收到的错误消息没有此信息。

如何找到 Lua 代码中的哪一行触发了错误？

例如，假设我有一个 swig 函数“swigstringcount”，它需要一个字符串：

```
local n=4
local m=swigstringcount(n)
print (m,n) 
```

这个（显然是错误的）代码在第二行产生了一个错误。目前我得到的只是

```
error:SWIG_RuntimeError: swigstringcount requires a string 
```

我想让它告诉我第 2 行产生了错误，就像标准的 Lua 错误消息一样。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T19:11:50.403

基于这种[从 Lua C API 获取调试信息的方法，](https://stackoverflow.com/questions/2555856/current-line-number-in-lua)我整理了一个（有点混乱）示例，说明如何将其集成到 SWIG 接口中：

```
%module test

%{
#undef SWIG_fail_arg
#define SWIG_fail_arg(func_name,argnum,type) \
  {lua_Debug ar;\
  lua_getstack(L, 1, &ar);\
  lua_getinfo(L, "nSl", &ar);\
  lua_pushfstring(L,"Error (%s:%d) in %s (arg %d), expected '%s' got '%s'",\
  ar.source,ar.currentline,func_name,argnum,type,SWIG_Lua_typename(L,argnum));\
  goto fail;}
%}

%include <std_string.i>

%inline %{
void func(const std::string& str) {}
%} 
```

这基本上将默认`SWIG_fail_arg`宏替换为修改后的宏，该宏获取并打印一些调试信息。

我用最新的 SWIG 主干对其进行了测试（我认为您可能使用的是旧版本，因为我看到的文本不太匹配），但我能够做到：

```
Lua 5.1.4  Copyright (C) 1994-2008 Lua.org, PUC-Rio
> require('test')
> local n=4
> test.func(n)
Error (=stdin:1) in func (arg 1), expected 'std::string const &' got 'nil'
stack traceback:
        [C]: in function 'func'
        stdin:1: in main chunk
        [C]: ? 
```

不过，我似乎已经有更多的调试信息（即完整的堆栈跟踪）。

# r - R脚本的调试

> ID：14664543
> 
> 赞同：2
> 
> 时间：2013-02-02T17:35:23.037
> 
> 标签：r

我有一个在 Basic 上编写的脚本，它获取输入 CSV 文件并计算输入数据随机拆分之间的冲突。这个脚本在[这里](http://pastebin.com/gPvpke5j "这里")。我需要在 R 上重新实现它。我写过[这样](http://pastebin.com/dF2xHUb0)的脚本。[这](http://pastebin.com/mceaiuxA)是输入数据。

但在条件

```
if(nentries==nrows*ncolumns)    
{  
    print("Columns, rows, and entries check; we're good to go.")  
}  
else  
{  
    print("Columns, rows, and entries don't check; please look at your data file to make sure each line has equal no. of entries.")  
} 
```

出现错误

```
source("path\\to\\script.r")
error in source("path\\to\\script.r") : 
D:\projects\basicToR\target.r:19:1: Unexpected 'else'
18:         }
19: else
    ^ 
```

为什么这里有错误？R文件中还有其他错误吗？

**更新** 我忘记写关于错误的问题

seq.default(1, firstsofar, 1) 中的错误：无效的符号“by”参数

在代码片段中

```
for (q in seq(1,firstsofar,1)) {
    if( randnum[i]==randnum[q]) {taken="yes"}
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-02T17:36:55.570

重写为

```
if(nentries==nrows*ncolumns)    {
     print("Columns, rows, and entries check; we're good to go.")
}else{
     print("Columns, rows, and entries don't check; please look at your data file to make sure each line has equal no. of entries.")
} 
```

您需要将 else 与“if”的右大括号放在同一行

来自[R 语言定义](http://cran.r-project.org/doc/manuals/R-lang.html#if)

> else 子句是可选的。语句 if(any(x <= 0)) x <- x[x <= 0] 是有效的。当 if 语句不在块中时，else（如果存在）必须与语句 2 的结尾出现在同一行。否则 statement2 末尾的新行完成 if 并产生一个被评估的语法完整语句。一个简单的解决方案是使用括在大括号中的复合语句，将 else 与标记语句结束的右大括号放在同一行。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-02T17:37:15.693

由于我不完全理解的原因，当 R`else`与之前的右花括号不在同一行时，R 会发疯。尝试：

```
if(nentries==nrows*ncolumns)    {
     print("Columns, rows, and entries check; we're good to go.")
}else{
     print("Columns, rows, and entries don't check; please look at your data file to make sure each line has equal no. of entries.")
} 
```

# windows - 简单的 goroutine 在 Windows 上不起作用

> ID：14664545
> 
> 赞同：8
> 
> 时间：2013-02-02T17:35:40.193
> 
> 标签：windows, go, goroutine

我正在用 goroutine 做一些测试，只是为了了解它们是如何工作的，但它们似乎根本没有运行。我做了一个非常简单的测试：

```
package main

import (
    "fmt"
)

func test() {
    fmt.Println("test")
}

func main() {
    go test()
} 
```

我希望这会打印“测试”，但它根本不做任何事情，没有消息但也没有错误。我还尝试`for {}`在程序末尾添加 a 以让 goroutine 有时间打印一些东西，但这并没有帮助。

知道可能是什么问题吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-02T17:56:21.233

> 程序执行不等待调用的函数完成
> 
> [Go 语句](http://golang.org/ref/spec#Go_statements)

等一会儿。例如，

```
package main

import (
    "fmt"
    "time"
)

func test() {
    fmt.Println("test")
}

func main() {
    go test()
    time.Sleep(10 * time.Second)
} 
```

输出：

```
test 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-02-05T13:38:38.757

我知道它已回答，但为了完整起见：

**频道**

```
package main

import (
    "fmt"
)

func test(c chan int) {
    fmt.Println("test")

    // We are done here.
    c <- 1
}

func main() {
    c := make(chan int)
    go test(c)

    // Wait for signal on channel c
    <- c
} 
```

# c#-4.0 - 获取 TFS 中两个修订版之间的差异

> ID：14664546
> 
> 赞同：0
> 
> 时间：2013-02-02T17:35:54.643
> 
> 标签：c#-4.0, tfs, visual-studio-2012

> **可能重复：**
> [在控制台中查看 TFS 变更集详细信息](https://stackoverflow.com/questions/8006806/view-tfs-changeset-details-in-console)

我需要一份关于 TFS 项目中两个修订版本之间差异的报告。

我正在构建一个简单的补丁系统，并从我在[#AltDevBlogADay](http://www.altdevblogaday.com/2012/11/12/a-simple-system-to-patch-your-game-content/ "#AltDevBlogADay")上阅读的一篇文章中描述了这个系统。它说，如果你能得到上一个补丁版本和需要分发补丁的当前版本之间的差异，那么所有文件应该很容易拾取/添加/删除。

我试过谷歌搜索，甚至是 tf.exe 命令行调用上的 MSDN 帮助，但都没有帮助。我正在使用该`tf hist . -r /version:C1~C3`命令，但它只生成提交者的名称、变更集编号和变更集留下的注释，但没有关于各个文件的详细信息，以及它们是添加、创建还是删除的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T01:46:47.680

您可以使用***tf diff***提取差异并将它们输出到文件中，如下所示：

> tf diff FabrikamFiber.CallCenter\fabrikamfiber.web\controllers\ /version: c7~c26 >c:\Radwan.txt

有关更多信息，我创建了一个描述如何执行该命令的视频。

[TF.exe 快速概览](http://mohamedradwan.wordpress.com/2013/02/03/tf-exe-fast-overview/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-02T19:07:11.243

看看 MSDN 中的[差异](http://msdn.microsoft.com/en-us/library/6fd7dc73%28v=vs.100%29.aspx)命令。[此外， Team Foundation Sidekicks](http://www.attrice.info/cm/tfs/)是比较文件、工作空间和更改集或文件历史的一个很好的工具。这个工具是免费的而且非常强大。

# lucene.net - 使用 Lucene Analyzer 解析字符串

> ID：14664549
> 
> 赞同：3
> 
> 时间：2013-02-02T17:36:07.723
> 
> 标签：lucene.net

如何使用分析器“分析”字符串，并返回分析后的字符串？

我正在尝试在此站点上找到的以下代码，但它抛出了一个`ArgumentException`- “此 AttributeSource 没有属性 Lucene.Net.Analysis.Tokenattributes.TermAttribute”

```
 public static string AnalyseString(Analyzer analyser, string stringToAnalyse)
    {

        MemoryStream ms = new MemoryStream();
        StreamWriter sw = new StreamWriter(ms);
        sw.Write(stringToAnalyse);
        sw.Flush();
        ms.Seek(0, SeekOrigin.Begin);
        StreamReader sr = new StreamReader(ms);

        TokenStream tokenStreamResult = analyser.TokenStream(null,sr);
        StringBuilder sb = new StringBuilder();
        //Lucene.Net.Analysis.Token t = new Lucene.Net.Analysis.Token();

        while (tokenStreamResult.IncrementToken())
        {
            var attrib = tokenStreamResult.GetAttribute<TermAttribute>();

            string t2 = tokenStreamResult.GetAttribute<TermAttribute>().Term;

            sb.Append(t2 + " ");

        }
        return sb.ToString();
    } 
```

我正在使用最新的 Lucene.Net 版本（3.0.3.0），并且正在使用`SimpleAnalyzer`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-09T05:40:59.900

尝试 tokenStreamResult.GetAttribute< **ITermAttribute** >() 代替

# python - 使 Python 包与 virtualenv 兼容

> ID：14664554
> 
> 赞同：2
> 
> 时间：2013-02-02T17:36:36.590
> 
> 标签：python, virtualenv, pip, easy-install, distribute

`setup.py`使用distutils 的通常设置（包含`scripts`要执行的脚本的设置）编写的 Python 包如何与`virtualenv`和兼容`pip`？在以与虚拟环境兼容的方式编写包时，是否有注意事项指南或注意事项？或者是否有任何 setuptools 包保证可以使用`virtualenv`？谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-02T17:48:48.413

除非你在 setup.py 中做了一些非常不寻常的事情，否则它可以在 virtualenv 和 pip 中正常工作。这是因为 setup.py 首先是非常声明性的（尽管它是一个可执行程序），并且 virtualenv 和 pip 旨在与在它们存在之前编写的现有包一起使用。

# sqlite - Windows Phone 应用程序中数据库的 SQLite 连接

> ID：14664555
> 
> 赞同：0
> 
> 时间：2013-02-02T17:36:43.917
> 
> 标签：sqlite, windows-phone-8

我有一个 SQLite 数据库 database.sqlite。如果更新选项，我使用了 Build Action = Content 和 Copy to Output Directory。

我在 Windows Phone 8 应用程序中使用 SQLite DB。我在 GitHub 中使用了 SQLite For WP8 扩展、SQLite-NET 和 SQLite-NET-WP8 项目。

我正在使用以下语句进行连接：

`var conn = new SQLiteConnection("Data Source=database.sqlite;Version=3")`连接到数据库。

我收到一个神秘的错误 - 找不到这样的表。

看起来这是一个连接问题。有关如何在 Windows phone 8 App 中设置与 SQLite 数据库的连接的任何指示。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-05T13:54:25.850

这里有一个关于使用 SQL Lite 的很好的教程[……](http://www.spikie.be/blog/post/2013/01/29/SQLite-in-Windows-Phone-8.aspx)希望对您有所帮助！

# arrays - fJava中如何释放数组占用的内存

> ID：14664558
> 
> 赞同：0
> 
> 时间：2013-02-02T17:37:06.117
> 
> 标签：arrays

我有一个数组 Arr。我想在使用后释放数组占用的内存。

```
int Arr[] ={1,2,3,4,5};
for(int i=0;i<5;i++)
{
System.out.println(Arr[i]);
} 
```

现在，在打印完所有数组值后，我想释放数组占用的内存。这在Java中怎么可能。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T17:42:52.800

一旦你排列 Arr 超出范围，垃圾收集器就会处理它，并根据它的需要和策略释放内存。尽管如此，如果 Arr 将在更长的时间范围内，您可以告诉垃圾收集器该数组不再使用：

```
Arr = null; 
```

但是这种情况清楚地表明您的代码中存在严重错误。

# c++ - 错误 C2146 试图在 C++ 中编译基本的 HLSL 着色器

> ID：14664562
> 
> 赞同：0
> 
> 时间：2013-02-02T17:37:18.890
> 
> 标签：c++, hlsl

我刚刚开始使用 C++ 学习 HLSL 的基础知识，我按照书中的教程进行操作，第一个基本着色器是：

```
float4 VS_Main( float4 pos:POSITION):SV_POSITION
{

return pos;
} 
```

但我在编译时遇到很多错误：

错误 C2146：语法错误：';' 在标识符“VS_Main”之前丢失

错误 C4430：缺少类型说明符，假定为 int。注意：不再支持 default-int

错误 C2146：语法错误：在标识符“pos”之前缺少“)”

错误 C2059：语法错误看起来像一个函数定义，但没有形参列表。

错误 C2059：语法错误：'{'

看起来编译器根本无法处理 HLSL……也许 VS2012 express 不支持 HLSL？

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-02T17:52:19.377

HLSL 不是 C++。你应该用着色器编译器编译着色器，用 C++ 编译器编译 C++——不要混用。编译 HLSL 有两种选择。

1.  `fxc.exe`使用DirectX SDK 中包含的命令行实用程序（文档和用法[见 MSDN](http://msdn.microsoft.com/ru-ru/library/windows/desktop/bb509710%28v=vs.85%29.aspx)）。它会生成一个文件，您应该通过[此处](http://msdn.microsoft.com/ru-ru/library/windows/desktop/bb509633%28v=vs.85%29.aspx)描述的某些方式在运行时加载该文件。
2.  使用 [D3DCompileFromFile](http://msdn.microsoft.com/ru-ru/library/windows/desktop/hh446872%28v=vs.85%29.aspx)函数在运行时编译着色器。

每个变体都有优点和缺点。简而言之，在构建时进行预编译可以让您在运行时获得一些时间，而在运行时编译在开发阶段更加灵活和舒适（无需记住重新编译或使用构建后脚本），但更容易出错 -易于。自己选择。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-02T22:18:32.270

HLSL 的代码看起来不错。如果您想从 VS2012 中编译它，请将“.fx”文件设置为使用 HLSL 着色器编译器进行构建。右键单击文件选择属性。然后选择 General 和 Item Type 应该设置为 HLSL 编译器。

如果您真的想使用 C++ 制作着色器，您可以查看 C++AMP 以查看它是否适合您的需求。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-02T17:41:27.403

> 看起来编译器根本无法处理 HLSL……也许 VS2012 express 不支持 HLSL？

没有 C++ 编译器可以。它不应该由编译器处理。

您需要将其转换为资源并使用构建后脚本将其复制到 bin 目录中，并在运行时加载 HLSL。

另见：[http ://www.directxtutorial.com/Lesson.aspx?lessonid=11-4-5](http://www.directxtutorial.com/Lesson.aspx?lessonid=11-4-5)

# database - 数据库的负载和性能测试

> ID：14664569
> 
> 赞同：4
> 
> 时间：2013-02-02T17:38:31.493
> 
> 标签：database, load-testing, performance-testing, stress-testing, database-testing

这是第一次，我的团队要求我对数据库进行一些我不知道如何处理的测试。通过对数据库进行测试，我的意思是，我需要看看它可以多快将记录插入其中。直到它可以承受多大的压力。就像数据库的负载和性能测试一样。我们将要使用的数据库是[XPRESSmp](http://www.ucirrus.com/#/xpressmp/4568626621)。

那么当我们需要测试数据库时，任何人都可以帮助我进行什么样的测试，以及我可以研究哪些工具。我看到的大多数文章大多与 Oracle 和 MySQL 有关。但这完全是一个新数据库。

我能想到的一种方法是编写一个具有 X 个线程的多线程程序，它将以非常高的速度将数据泵入 XMP。并继续测量每个线程花费了多少时间。我还能做些什么来测试数据库？

我的团队要求我通过您的测试来破坏数据库，但我们应该知道它在什么情况下被破坏以及背后的原因是什么。

以及在进行数据库测试时我应该了解和考虑哪些要点。

PS 我将在单独的 LnP 机器上进行此测试。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-23T10:07:00.480

通常，SysBench 用于测试 MySQL 上的查询性能。不过，它不仅适用于 MySQL。我对它只有一个基本的了解，所以我建议你不要问我并阅读文档： [http ://sysbench.sourceforge.net/](http://sysbench.sourceforge.net/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-02-17T18:46:24.643

您可以使用这些工具：

**HammerDB**是一个开源数据库负载测试和基准测试工具，适用于 Oracle、SQL Server、TimesTen、PostgreSQL、Greenplum、Postgres Plus Advanced Server、MySQL 和 Redis。HammerDB 是自动化的、多线程的且可通过动态脚本支持进行扩展。HammerDB 包括基于行业标准基准的完整内置工作负载以及 Oracle 数据库的捕获和重放。

下载或查看更多信息，请访问[http://hammerora.sourceforge.net/](http://hammerora.sourceforge.net/)

**p单元**

描述：

由 Andrew Zhang 在 GPL 许可下发起的用于单元测试和性能基准测试的开源框架。p-unit 支持以单线程或多线程运行相同的测试，跟踪内存和时间消耗，并以纯文本、图像或 pdf 文件的形式生成结果。 [http://p-unit.sourceforge.net/](http://p-unit.sourceforge.net/)

**DBMonster**

描述：

DBMonster 是一个生成随机数据的应用程序，用于在重负载下测试 SQL 数据库驱动的应用程序。 [http://sourceforge.net/projects/dbmonster/](http://sourceforge.net/projects/dbmonster/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-07-19T10:45:46.910

[此处](https://stackoverflow.com/a/68438856/446317)回复，使用[k6 SQL扩展](https://github.com/imiric/xk6-sql)。

# ruby-on-rails - [Rails]Routes 不适用于某些名词

> ID：14664572
> 
> 赞同：2
> 
> 时间：2013-02-02T17:38:41.903
> 
> 标签：ruby-on-rails, routing

（我是法国人）我的 Rails (3.2.11) 应用程序有问题。当我用一些名词设置路线时，它不起作用！我解释：

```
Way::Application.routes.draw do
  scope(:path_names => { :new => "nouveau", :edit => "edition" }) do

    scope "/admin" do
      resources :news, except: [:show, :index], path: '/articles'
      resources :users, except: [:show]
      resources :pages, except: [:show]
      resources :events, except: [:show, :index]
      resources :projects, except: [:show,:index], path: '/projets'
      resources :galleries, except: [:index, :show] do 
        resources :paintings, except: [:index, :show]
      end
   end
end 
```

结尾

当我将资源设置为“/projets”时，资源：projects 不起作用。不起作用的是：当我想在我的表单中创建一个新项目时，我点击提交，它只是将我重定向到“/projets”，而不做任何事情！但是，例如，当我将路线设置为“/ poneys”时，它可以工作！我真的不明白。谢谢你的帮助。

[https://github.com/khcr/way](https://github.com/khcr/way)

```
class ProjectsController < ApplicationController

  def new
   @project = Project.new
   render layout: 'admin'
  end

  def create 
    @project = Project.new(params[:project])
    if @project.save
      flash[:success] = "Projet créé"
      redirect_to project_path(@project)
    else
      render 'new', layout: 'admin'
    end
  end
end 
```

# python - 如何避免python中包上下文中的模块名称冲突（不重命名）？

> ID：14664574
> 
> 赞同：0
> 
> 时间：2013-02-02T17:38:59.263
> 
> 标签：python, namespaces, package

> **可能重复：**
> [具有相同名称的 Python 模块（即，在包中重用标准模块名称）](https://stackoverflow.com/questions/10501473/python-modules-with-identical-names-i-e-reusing-standard-module-names-in-pack)

从包内的模块中，有没有办法忽略给定导入的包上下文？因为包包含另一个与要从系统而不是包中导入的模块同名的模块。

有没有办法在不重命名其他模块的情况下解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-02T18:30:33.550

你有没有尝试过...

```
import mypackage.vim as mypvim
import vim 
```

您可以使用“as”语句为您导入的内容提供另一个别名。

# c# - 如何验证文本框？

> ID：14664575
> 
> 赞同：1
> 
> 时间：2013-02-02T17:39:15.197
> 
> 标签：c#, winforms, validation

我有一个文本框，用户将在其中按以下方式输入数据。例如 1.2-2012-2 但也可能是；**12.5** -2010-4（强调第一部分）我的第一个方法是 a`MaskedTextBox`但由于第一部分没有确定的大小，我不能使用它。现在我想验证文本框。即我会让用户输入他/她想要的内容，但最后我想知道他/她是否以正确的方式输入了它。例如，如果用户键入 a12.4/2012^14（这是不正确的）我会知道。我不知道如何将这个想法转换为代码，所以请有人指导我。如果有替代方法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-02T17:55:12.963

我猜匹配的文本框不能匹配不一致的输入，所以最好在这里使用正则表达式..

你可以使用这个正则表达式

```
^\d+(\.\d+)?-\d+-\d+$ 
```

然后您可以检查输入

```
if(Regex.IsMatch(input,regex))
     //valid 
```

* * *

`^`描述字符串的开头

`\d`代表一个数字，即 0-9

`+`匹配前面的字符 1 到很多次..so`\d+`将匹配 1 到多个数字

`?`匹配前面的字符 0 到 1 time.so`(\.\d+)?`匹配`.`后跟 1 到多个数字**可选**

`$`描绘了字符串的结尾

和我们指定输入的开始和结束，否则它可以匹配介于两者之间的输入`^`..`$`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-02T18:56:12.653

您可以使用`TextChanged`事件和`Regex`表达式：

```
private void textBox1_TextChanged(object sender, EventArgs e)
{
    var myRegex = new Regex(@"^(\d)+\.\d-(\d){4}-\d$");

    if (myRegex.IsMatch(textBox1.Text))
    {
        //Validation is ok
    }
    else
    {
        //Validation isn't ok
    }
} 
```

我已经测试了这段代码。其作品。唯一我不完全了解您的模式，但以上应该可以工作。

如果 。是可选的，然后使用此模式：`@"^(\d)+(\.\d)*-(\d){4}-\d$"`

# google-bigquery - BigQuery SQL 运行总计

> ID：14664578
> 
> 赞同：13
> 
> 时间：2013-02-02T17:39:25.610
> 
> 标签：google-bigquery

知道如何在 BigQuery SQL 中计算运行总数吗？

```
id   value   running total
--   -----   -------------
1    1       1
2    2       3
3    4       7
4    7       14
5    9       23
6    12      35
7    13      48
8    16      64
9    22      86
10   42      128
11   57      185
12   58      243
13   59      302
14   60      362 
```

对于使用相关标量查询的传统 SQL 服务器来说不是问题：

```
SELECT a.id, a.value, (SELECT SUM(b.value)
                       FROM RunTotalTestData b
                       WHERE b.id <= a.id)
FROM   RunTotalTestData a
ORDER BY a.id; 
```

或加入：

```
SELECT a.id, a.value, SUM(b.Value)
FROM   RunTotalTestData a,
       RunTotalTestData b
WHERE b.id <= a.id
GROUP BY a.id, a.value
ORDER BY a.id; 
```

但我找不到让它在 BigQuery 中工作的方法......

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2013-12-09T21:08:39.200

**2018 年更新：原问题中的查询现在无需修改即可工作。**

```
#standardSQL
WITH RunTotalTestData AS (
  SELECT * FROM UNNEST([STRUCT(1 AS id, 1 AS value),(2,0),(3,1),(4,1),(5,2),(6,3)]) 
)

SELECT a.id, a.value, (SELECT SUM(b.value)
                       FROM RunTotalTestData b
                       WHERE b.id <= a.id) runningTotal
FROM   RunTotalTestData a
ORDER BY a.id; 
```

## [![在此处输入图像描述](../Images/60d5709b5e94288a441f2712b6b76583.png)](https://i.stack.imgur.com/KRiZo.png)

2013 更新：您可以使用 SUM() OVER() 计算运行总计。

在您的示例中：

```
SELECT id, value, SUM(value) OVER(ORDER BY id)
FROM [your.table] 
```

一个工作示例：

```
SELECT word, word_count, SUM(word_count) OVER(ORDER BY word)
FROM [publicdata:samples.shakespeare]
WHERE corpus  = 'hamlet'
AND word > 'a' LIMIT 30; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-05T23:43:59.977

你可能已经想通了。但这是一种，不是最有效的方法：

JOIN 只能使用相等比较来完成，iebid <= a.id 不能使用。

[https://developers.google.com/bigquery/docs/query-reference#joins](https://developers.google.com/bigquery/docs/query-reference#joins)

如果你问我，这很蹩脚。但是有一个解决方法。只需对一些虚拟值使用相等比较来获得笛卡尔积，然后将 WHERE 用于 <=。这是非常不理想的。但是，如果您的桌子很小，这将起作用。

```
SELECT a.id, SUM(a.value) as rt 
FROM RunTotalTestData a 
JOIN RunTotalTestData b ON a.dummy = b.dummy 
WHERE b.id <= a.id 
GROUP BY a.id 
ORDER BY rt 
```

您也可以手动限制时间：

```
SELECT a.id, SUM(a.value) as rt 
FROM (
    SELECT id, timestamp RunTotalTestData 
    WHERE timestamp >= foo 
    AND timestamp < bar
) AS a 
JOIN (
    SELECT id, timestamp, value RunTotalTestData 
    WHERE timestamp >= foo AND timestamp < bar
) b ON a.dummy = b.dummy 
WHERE b.id <= a.id 
GROUP BY a.id 
ORDER BY rt 
```

更新：

您不需要特殊属性。你可以使用

```
SELECT 1 AS one 
```

并加入其中。

随着计费的进行，连接表在处理中计数。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-03T10:31:09.387

问题在于第二个查询，BigQuery 将联合 FROM 表达式中的 2 个表。

我不确定第一个，但 bigquery 可能不喜欢 Select 表达式中的子选择，仅在 FromExpression 中。因此，您需要将子查询移动到 from 表达式中，并 JOIN 结果。

另外，您可以尝试一下我们的 JDBC 驱动程序： [Starschema BigQuery JDBC 驱动程序](http://code.google.com/p/starschema-bigquery-jdbc/)

只需将其加载到 Squirrel SQL、RazorSQL 或任何支持 JDBC 驱动程序的工具中，确保通过设置打开查询转换器：

> 转换查询=真

在属性或 JDBC url 中，每个信息都可以在项目页面中找到。完成此操作后，尝试运行第二个查询，它将转换为与 BigQuery 兼容的联接。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2022-01-25T09:50:04.203

如果我们允许使用窗口功能，这很容易。

[https://cloud.google.com/bigquery/docs/reference/standard-sql/analytic-function-concepts](https://cloud.google.com/bigquery/docs/reference/standard-sql/analytic-function-concepts)

有了它，我们可以这样做：

```
WITH RunTotalTestData AS (
  SELECT * FROM UNNEST([STRUCT(1 AS id, 1 AS value),(2,0),(3,1),(4,1),(5,2),(6,3)]) 
)

select *, sum(value) over(order by id) as running_total
from RunTotalTestData 
```

[![在此处输入图像描述](../Images/8b9267aa5d46cd175b9bf0874949c416.png)](https://i.stack.imgur.com/VxtUH.png)

# java - 有没有办法在java中重用套接字以避免为新的TCP连接分配内存？

> ID：14664579
> 
> 赞同：-1
> 
> 时间：2013-02-02T17:39:27.567
> 
> 标签：java, sockets

我正在尝试在 java 中构建一个简单的转发服务器，它只分配最少量的内存并且很少命中 gc。我可以使用预分配的缓冲区将数据复制到输出流和输入流，但每个新连接似乎分配了大约 10k 的内存。是否有一种简单的方法可以在关闭连接后重用 Socket 对象以避免这种情况（这是假设 Socket 在重用时不需要在内部分配额外的内存）？

澄清一下，“套接字”是指 java 类，而不是套接字的通用概念。“重用”是指我想重用对象分配的内存，以避免通过垃圾收集回收该内存。这样做的动机是创建一个简单、响应迅速的服务器，不需要为垃圾收集而暂停（我知道我可以使用 C/C++ 或专有 JVM，但我正在尝试探索这个解决方案作为一种可能性） .

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-02T17:47:13.613

不，一旦关闭，Socket 就不能在 Java 中重用。

# gdal - 如何使用 Visual Studio 在 QT 中制作 GUI？

> ID：14664580
> 
> 赞同：2
> 
> 时间：2013-02-01T07:14:02.973
> 
> 标签：gdal, c++, visual-studio, user-interface, qt

我有 c++ 代码，它使用 GDAL 库在图像中执行一些操作（如坡度、坡向、山体阴影等）。现在，我想制作一个 GUI，我想在其中从目录中获取图像。之后我想对图像应用操作（假设为斜率 - c++ 代码），然后我应该得到输出。

很多人建议我使用 Qt。我已经在我的 Visual Studio 2010 中成功构建并安装了 Qt。

请帮助我如何继续使用 GUI。我有 C++ 编程的中级技能和 GUI 应用程序的新技能。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-02T06:34:49.983

这很难回答。那里有很多教程，例如，[我的第一个 Qt GUI 应用程序](http://sector.ynet.sk/qt4-tutorial/my-first-qt-gui-application.html)以及其他通用[Qt4](http://zetcode.com/gui/qt4/)和[Qt5](http://zetcode.com/gui/qt5/)教程。即使在 YouTube 上，您也会找到很多视频，例如[Visual Studio 的 Qt C++ 框架简介](https://www.youtube.com/watch?v=81MMrkkdD2c)（使用 Microsoft Visual Studios 和 Qt 5.4）和[Qt 计算器 GUI 教程第 1 部分](https://www.youtube.com/watch?v=FhV1ZEVNK08)（使用 Apple 的 Xcode 和 Qt 5.7）。

主要思想是您使用该软件以所见即所得 (WYSIWYG) 模式创建 GUI。然后你必须使用创建的文件和类。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-10T13:35:30.293

我已经解决了这个问题。感谢所有帮助过我的人。这就是我所做的。使用 Visual Studio 成功安装 Qt 后，创建一个新的 Qt 项目，您将在其中找到三个文件（.ui、.h 和 .cpp）。单击 ui 文件，将创建新窗口，您可以在其中看到按钮和框。根据要求使用它并阅读QT教程以设置和使用对象名称。单击 .h 文件，您将在其中通过单击按钮类创建函数调用。单击 .cpp 文件，在 .h 文件中调用的类中编写代码。编译并享受解决方案:)

# mysql - mysql 0 终止的字符串在 XML 中显示为 Unicode 0x0

> ID：14664584
> 
> 赞同：0
> 
> 时间：2013-02-02T17:39:52.267
> 
> 标签：mysql, xml, unicode

在将一些应用程序从 PHP 和 Delphi 迁移到 Java-RS 的过程中，一些列条目此时正在破坏演出。

在使用 JPA 从 mySQL 读取数据到 Java Pojos 之后，使用 JaxB 将结果转换为 XML 并尝试将结果读回 JQuery / jqGrid 失败。

在浏览器中，问题只是显示为“格式不正确”。使用 Eclipse XML 编辑器查看详细信息会给出错误消息：

```
An invalid XML character (Unicode 0x0) was found in the element content of the document 
```

现在我想继续并修复原始数据。

1.  SQL 查询将如何查找具有无效条目的行？
2.  修复这些行的 SQL 查询看起来如何？

假设有问题的列是“客户”表中的“名称”

对于问题 #1，我发现： SELECT name from customer where hex(name) like "%00";

去工作。对于问题 #2，我假设使用左子字符串的更新可能有效。在这种情况下，我不确定长度。看起来 length(name) 将返回包括终止零字符的长度。在这种情况下，left(length(name)-1) 的更新会正常工作吗？

我不确定数据库的备份和恢复是否会保持当前有些损坏的数据库的形状。因此，了解如何使用故意创建空终止字符串的插入语句来重现这种情况也会很有帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-02T18:02:47.350

我认为你应该能够用类似的`HEX()`东西来改变

```
UPDATE customer SET name=UNHEX(REPLACE(HEX(name), '00', '')); 
```

或者干脆

```
UPDATE customer SET name=REPLACE(name, CHAR(0), ''); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-02T17:46:53.767

```
update customer set name=left(name,length(name)-1) where hex(name) like "%00"; 
```

# wordpress - 如何在 XAMPP 中的 Ubuntu 上安装新的 WordPress 主题？

> ID：14664585
> 
> 赞同：2
> 
> 时间：2013-02-02T17:39:52.810
> 
> 标签：wordpress, wordpress-theming

我是 WordPress 新手。我刚刚在我的 Ubuntu 上安装了 XAMPP 在本地主机而不是实时服务器上。

我的 WordPress 版本是 3.5.1。

现在，当我尝试安装新主题时，它会显示以下消息

> 要执行请求的操作，WordPress 需要访问您的 Web 服务器。请输入您的 FTP 凭据以继续。如果您不记得您的凭据，您应该联系您的网络托管服务商。

并提示输入主机名、ftp 用户名和 ftp 密码。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-02T17:54:22.463

您是想通过网络安装主题还是拥有它的本地副本？

您可以查看在某种程度上描述您的问题的此链接：

[http://www.jasong-designs.com/2012/01/14/ubuntu-linux-permissions-and-a-local-wordpress-install/](http://www.jasong-designs.com/2012/01/14/ubuntu-linux-permissions-and-a-local-wordpress-install/)

这也是：

[http://www.chrisabernethy.com/why-wordpress-asks-connection-info/](http://www.chrisabernethy.com/why-wordpress-asks-connection-info/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-01-03T11:48:43.173

将此添加到您的 wp-config.php

```
define('FS_METHOD','direct'); 
```

由于 linux 具有这样一个限制性更强的文件系统，这将使您能够直接写入文件夹。

这将解决安装新插件或主题时的 ftp 问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-02-10T04:04:20.433

尝试使用用户名：**nobody**和密码：**xampp**或**root**或**toor**或**

> 您的本地主机密码 [如果不是空白]

**

# c++ - 可变参数模板代码在 GCC 4.6 上编译，但在 clang 或 GCC 4.7 上不编译

> ID：14664589
> 
> 赞同：9
> 
> 时间：2013-02-02T17:40:24.610
> 
> 标签：c++, c++11, variadic-templates

我有这个代码（从更复杂的版本简化）：

```
template <class... A1> class Test {
    public:
    template <class... A2> void print (void(*function)(A2...,A1...)) {

    }
};

void test_print (int a, float b, double c) {

}

int main () {
    Test<float,double> test;
    test.print<int> (&test_print);
} 
```

如果我在 GCC 4.6.3 上使用`g++ -std=c++0x filename.cpp`它编译它可以正常编译，但是在 clang 3.0 上使用`clang++ -std=c++0x filename.cpp`它会引发以下错误：

```
filename.cpp:14:10: error: no matching member function for call to 'print'
    test.print<int> (&test_print);
    ~~~~~^~~~~~~~~~
filename.cpp:3:33: note: candidate template ignored: failed template argument deduction
    template <class... A2> void print (void(*function)(A2...,A1...)) {
                                ^
1 error generated. 
```

在 GCC 4.7.2 上也有一个错误：

```
filename.cpp: In function 'int main()':
filename.cpp:14:33: error: no matching function for call to 'Test<float, double>::print(void (*)(int, float, double))'
filename.cpp:14:33: note: candidate is:
filename.cpp:3:33: note: template<class ... A2> void Test::print(void (*)(A2 ..., A1 ...)) [with A2 = {A2 ...}; A1 = {float, double}]
filename.cpp:3:33: note:   template argument deduction/substitution failed:
filename.cpp:14:33: note:   mismatched types 'float' and 'int' 
```

现在的问题是：为什么它会失败或者我做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-03T13:35:22.947

作为解决[http://www.open-std.org/jtc1/sc22/wg21/docs/cwg_defects.html#1399](http://www.open-std.org/jtc1/sc22/wg21/docs/cwg_defects.html#1399)的一部分，决定不可演绎的参数包不参与演绎，因此保留参数列表中显式指定的参数，但不干扰后续参数与后续函数参数的匹配。但是，在比较类型时，这些添加的规则不一定适用于推导（这是对函数调用的参数进行参数集推导的子算法）。

我认为该决议也应适用于您的情况，并将其视为规范不完全清楚的一个领域。您可能希望向各自的编译器发送错误报告，他们可能希望向 WG21 发送问题报告以要求澄清这一点（尽管我不确定我是否会说这是一个规范性规范问题 -标准在其他地方说不可演绎的上下文不参与演绎）。

注意 as`A1`是封闭类模板的参数（因此在实例化类时成为普通参数），就模板参数推导而言，您可以省略它们并保持相同的含义

```
class Test {
    public:
    template <class... A2> void print (A2..., float, double) {

    }
};

int main () {
    Test test;
    test.print<int> (1, 1.0f, 1.0); // works
} 
```

# mysql - 错误 1093：MySQL 无法在 FROM 子句中指定要更新的目标表

> ID：14664591
> 
> 赞同：1
> 
> 时间：2013-02-02T17:40:37.677
> 
> 标签：mysql, sql, triggers, mysql-workbench, mysql-error-1093

**`error 1093: MySQL can’t specify target table 'SENTIERO' for update in FROM clause`**

这是我的触发器：

```
CREATE TRIGGER lunghezza_sentiero_datoderivato_INSERT
AFTER INSERT ON SENTIERO_HA_TAPPA
FOR EACH ROW

BEGIN

UPDATE SENTIERO
SET lunghezza= (SELECT SUM(lunghezza)
                FROM TAPPA, SENTIERO as S2, SENTIERO_HA_TAPPA
                WHERE NEW.IDsentiero=S2.IDsentiero
                and SENTIERO_HA_TAPPA.IDtappa=TAPPA.IDtappa);
WHERE IDsentiero IN (SELECT IDsentiero
                     FROM TAPPA, SENTIERO, SENTIERO_HA_TAPPA
                     WHERE SENTIERO_HA_TAPPA.IDsentiero=SENTIERO.IDsentiero
                     and NEW.IDtappa=SENTIERO_HA_TAPPA.IDtappa);
END$$ 
```

**我发现这篇**关于这个问题的文章，在
[http://verysimple.com/2011/03/30/mysql-cant-specify-target-table-for-update-in-from-clause/上查看](http://verysimple.com/2011/03/30/mysql-cant-specify-target-table-for-update-in-from-clause/)

这是我唯一的机会吗？**请帮我**

**编辑:: 我刚刚添加了“WHERE”子句，但它向我发出“错误语法”的信号……为什么？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-02T18:02:47.380

试试这个：

```
UPDATE SENTIERO s
INNER JOIN
(
   SELECT IDsentiero, TheSum
   FROM
   (
      SELECT S2.IDsentiero, SUM(s2.lunghezza) AS TheSum
      FROM SENTIERO AS S2 
      INNER JOIN SENTIERO_HA_TAPPA AS st ON st.IDsentiero = S2.IDsentiero
      INNER JOIN TAPPA             AS  t ON st.IDtappa    = t.IDtappa
      GROUP BY S2.IDsentiero
   ) AS Sub
) AS s2 ON s.IDsentiero  = s2.IDsentiero 
SET s.lunghezza = s2.TheSum
WHERE S2.IDsentiero = NEW.IDsentiero; 
```

* * *

## 更新：

您必须`lunghezza`从`TAPPA`表中而不是从中获取值的总和`SENTIERO`，这就是您获取`NULL`值的原因。所以最终的`CREATE TRIGGER`代码应该是这样的：

```
CREATE TRIGGER lunghezza_sentiero_datoderivato_INSERT
AFTER INSERT ON SENTIERO_HA_TAPPA
FOR EACH ROW

BEGIN

  UPDATE SENTIERO s
  INNER JOIN
  (
     SELECT IDsentiero, TheSum
     FROM
     (
        SELECT S2.IDsentiero, SUM(t.lunghezza) AS TheSum
        FROM SENTIERO AS S2 
        INNER JOIN SENTIERO_HA_TAPPA AS st ON st.IDsentiero = S2.IDsentiero
        INNER JOIN TAPPA             AS  t ON st.IDtappa    = t.IDtappa
        GROUP BY S2.IDsentiero
     ) AS Sub
  ) AS s2 ON s.IDsentiero  = s2.IDsentiero 
  SET s.lunghezza = s2.TheSum;

END 
```

## [SQL 小提琴演示](http://sqlfiddle.com/#!2/452a5/1)

**请注意：**此触发器将更新`lunghezza`表中的值`SENTIERO`，当任何行被插入到表中时，表中`SENTIERO_HA_TAPPA` ***的所有`IDsentiero`***`SENTIERO`值，而不仅仅是新插入的值`IDsentiero`。

要仅更新表`lunghezza`中新插入的值的值，请将 a 添加到触发器的语句中。像这样：`IDsentiero``SENTIERO_HA_TAPPA``WHERE S2.IDsentiero = NEW.IDsentiero``UPDATE`

```
CREATE TRIGGER lunghezza_sentiero_datoderivato_INSERT
AFTER INSERT ON SENTIERO_HA_TAPPA
FOR EACH ROW

BEGIN

  UPDATE SENTIERO s
  INNER JOIN
  (
     SELECT IDsentiero, TheSum
     FROM
     (
        SELECT S2.IDsentiero, SUM(t.lunghezza) AS TheSum
        FROM SENTIERO AS S2 
        INNER JOIN SENTIERO_HA_TAPPA AS st ON st.IDsentiero = S2.IDsentiero
        INNER JOIN TAPPA             AS  t ON st.IDtappa    = t.IDtappa
        GROUP BY S2.IDsentiero
     ) AS Sub
  ) AS s2 ON s.IDsentiero  = s2.IDsentiero 
  SET s.lunghezza = s2.TheSum
  WHERE S2.IDsentiero = NEW.IDsentiero;

END; 
```

例如，如果您创建三个表，然后将数据插入到表中，然后创建该触发器。然后像这样插入表中`SENTIERO_HA_TAPPA`：

```
INSERT INTO `SENTIERO_HA_TAPPA` (`IDtappa`, `IDsentiero`) VALUES (14, 4); 
```

然后触发器将更新`IDsentiero = 4`表中唯一`SENTIERO`的值，而不是它的所有值。而`lunghezza`其他`IDsentiero`人的值将是`NULL`s：

*   [**更新了 SQL Fiddle 演示**](http://sqlfiddle.com/#!2/f75f4/1)。

因此，您必须在任何插入之前创建表和触发器。然后对表进行插入，以便获得一致的数据。这就是它应该如何工作的方式。

就像在下面的演示中一样：

*   [**SQL 小提琴演示**](http://sqlfiddle.com/#!2/543f93/1)。

* * *

^(**请注意：**^(在这个答案的所有演示中，我只使用了与触发器相关的三个表，我还修改了两个字段`inizio`，`fine`在表中可以为空`TAPPA`，因为您在该表中的插入子句具有`NULL`这些列的值。))

# javascript - 将表单值发布到 html

> ID：14664593
> 
> 赞同：1
> 
> 时间：2013-02-02T17:40:46.880
> 
> 标签：javascript, html, forms, post

我想发布表单值并使用 Javascript 在另一个 html 页面上显示它们。不应使用服务器端技术。我有一个发布值的函数，但要将值读取到另一个 html 页面，我想我遗漏了一些东西。下面是代码。有什么帮助吗？提前致谢。

```
<html xmlns="http://www.w3.org/1999/xhtml" >
<head>
<title>Untitled Page</title>
<script type="text/javascript">

function post_to_page(path, params, method) {
  method = method || "post"; // Set method to post by default, if not specified.
  var form = document.createElement("form");
   form.setAttribute("method", method);
   form.setAttribute("action", path);
   form.setAttribute("target", "formresult");

    for (var key in params) {
        if (params.hasOwnProperty(key)) {
            var hiddenField = document.createElement("input");
            hiddenField.setAttribute("type", "hidden");
            hiddenField.setAttribute("name", key);
            hiddenField.setAttribute("value", params[key]);
            form.appendChild(hiddenField);
        }
    }

    document.body.appendChild(form);
    // creating the 'formresult' window with custom features prior to submitting the form
    window.open('target.htm', 'formresult', 'scrollbars=no,menubar=no,height=600,width=800,resizable=yes,toolbar=no,status=no');

    form.submit();

}

</script>

</head>
<body>
<form id="form1" action="target.htm" method="post">
<div>
USB No: <input name="usbnum" id="usbnum" type="text"/><br />
USB Code: <input name="usbcode" id="usbcode" type="text"/>
</div>
<button onclick="post_to_page()">Try it</button>
</div>
</form>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-02T18:12:29.437

这是一个将数据从一个*窗口*移动到另一个窗口的简单[**示例**](http://jsfiddle.net/TGd7V/)

 *```
<!-- HTML -->
<textarea id="foo"></textarea><br/>
<input id="bar" value="click" type="button"/> 
```

以及使其工作的真实代码，假设您通过了[相同的原产地政策](https://developer.mozilla.org/en-US/docs/JavaScript/Same_origin_policy_for_JavaScript)

```
// JavaScript
var whatever = 'yay I can share information';

// in following functions `wnd` is the reference to target window
function generateWhatever(wnd, whatever) { // create the function actually doing the work
    return function () {wnd.document.getElementById('foo').innerHTML = whatever};
} // why am I using a generator? You don't have to, it's a choice

function callWhenReady(wnd, fn) { // make sure you only invoke when things exist
    if (wnd.loaded) fn(); // already loaded flag (see penultimate line)
    else wnd.addEventListener('load', fn); // else wait for load
}

function makeButtonDoStuff() { // seperated button JS from HTML
    document
    .getElementById('bar')
    .addEventListener('click', function () {
        var wnd = window.open(window.location); // open new window, keep reference
        callWhenReady(wnd, generateWhatever(wnd, whatever)); // set up function to be called
    });
}

window.addEventListener('load', function () {window.loaded = true;}); // set loaded flag (do this on your target, this example uses same page)
window.addEventListener('load', makeButtonDoStuff); // link button's JavaScript to HTML when button exists 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-02T18:26:39.590

您不需要 POST 请求即可将数据从一页发送到另一页。只需使用 LocalStorage 即可。只需在表单提交时调用 Javascript 函数。这可能会有所帮助：

HTML：

```
<form id="form1" action="target.htm" method="post">
    <div>
        USB No: <input name="usbnum" id="usbnum" type="text"/><br />
        USB Code: <input name="usbcode" id="usbcode" type="text"/>
    </div>
    <button onclick="post_to_page()">Try it</button>
</form> 
```

Javascript：

```
function post_to_page() {
    localStorage.value = "Your content here";
    window.location = "nextpage.html";
} 
```

这将在本地保存数据并转到下一页。在下一页中，只需调用此函数即可检索存储的数据：

```
function get_stored_data() {
    alert(localStorage.value);
} 
```

您可以简单地将其分配给 div、文本框和其他 Javascript 变量。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-02T17:44:06.333

如果您使用的是 html5，则可以使用 localStorage。否则，查询字符串或 cookie 是您的其他选择。

你说你不想让服务器参与进来……你为什么要调用提交？

[编辑] @Paul S 的评论/答案看起来很有帮助。但是，如果您需要跨浏览器兼容，您可能会查看 jQuery PostMessage 插件之类的东西。

[http://benalman.com/projects/jquery-postmessage-plugin/](http://benalman.com/projects/jquery-postmessage-plugin/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-02T17:44:22.067

您无法使用 JavaScript 获取 POST 值。您可以使用 GET 方法来传递值。*

# android - 将音乐播放器控件添加到 Android 中的通知

> ID：14664594
> 
> 赞同：1
> 
> 时间：2013-02-02T17:40:52.940
> 
> 标签：android, android-mediaplayer, android-notifications

我为我的 Android 应用程序创建了一个带有音乐播放器控件的通知（如下所示，Android 2.3.3）。但是，我面临一个问题。为了确保所有受支持平台（Android 2.2 - 4.2+）的标准行为，我将通知背景设置为黑色。我也无法使用：

```
 style="@android:style/TextAppearance.StatusBar.EventContent.Title"
        style="@android:style/TextAppearance.StatusBar.EventContent" 
```

用于文本样式，因为它们在 Android 2.2 中不可用。这是一种合适的设计方法还是有更好的选择？

![在此处输入图像描述](../Images/05079b6c76cf43f5b1ccb9686a3651d9.png)

# jquery - 可拖动地图 - JQuery 或 HTML5

> ID：14664599
> 
> 赞同：1
> 
> 时间：2013-02-02T17:41:18.757
> 
> 标签：jquery, html

有人知道一个 JQuery 插件（可能是 HTML5 中的东西）来创建一个包含可拖动元素的地图？

喜欢图片![在此处输入图像描述](../Images/22c02ec7b54b0bf751b44f45d2805f40.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-02T17:44:27.083

这是这个奇妙的 jQuery：[Arbor.js](http://arborjs.org/)

除此之外（取决于您的使用）：

[图像映射器](https://github.com/jamietre/ImageMapster)

[拉斐尔](http://raphaeljs.com/)

不过，您需要一些时间来适应它。

# c - 为什么在尝试使用 DDD 打开文件时出现此错误？

> ID：14664604
> 
> 赞同：3
> 
> 时间：2013-02-02T17:41:49.677
> 
> 标签：c, debugging, ddd-debugger

**调试器：DDD。**

**64 位 Ubuntu Precise Pangolin 系统。**

每当我尝试在 ddd 中打开一个非常简单的 C 程序时，我都会收到以下错误：

```
Warning: This program is an suid-root program or is being run by the root user.
The full text of the error or warning message cannot be safely formatted
in this environment. You may get a more descriptive message by running the
program as a non-root user or by removing the suid bit on the executable.
Warning: Cannot convert string "%s" to type %s
Warning: Could not load font "-*-lucidatypewriter-medium-*-*-*-*-120-*-*-*-*-iso8859-*", using font "fixed" instead
Warning: Could not load font "-*-lucidatypewriter-medium-r-*-*-*-120-*-*-*-*-iso8859-*", using font "fixed" instead
Warning: Could not load font "-*-lucidatypewriter-bold-*-*-*-*-120-*-*-*-*-iso8859-*", using font "fixed" instead
Warning: XmStringGetNextComponent: unknown type 26933216

Warning: XmStringGetNextComponent: unknown type 26664160

Warning: XmStringGetNextComponent: unknown type 26721536

Warning: XmStringGetNextComponent: unknown type 27713552

Warning: XmStringGetNextComponent: unknown type 26719456

Warning: XmStringGetNextComponent: unknown type 26994752

Warning: XmStringGetNextComponent: unknown type 27761616 
```

此外，在终端上显示所有这些错误后，ddd 可以正常打开，但没有我要调试的源文件。我在网上找不到解决方案！谢谢。

编辑：

以root身份运行时出现上述错误。以普通用户身份运行时，我得到以下信息：

```
Warning: Cannot convert string "-*-helvetica-medium-r-*-*-*-100-*-*-*-*-iso8859-*" to type FontStruct
Warning: Cannot convert string "-*-lucidatypewriter-medium-r-*-*-*-120-*-*-*-*-iso8859-*" to type FontStruct
Warning: Cannot convert string "-*-lucidatypewriter-bold-r-*-*-*-120-*-*-*-*-iso8859-*" to type FontStruct
Warning: Cannot convert string "-*-helvetica-bold-r-*-*-*-120-*-*-*-*-iso8859-*" to type FontStruct
Warning: Cannot convert string "-*-helvetica-medium-*-*-*-*-120-*-*-*-*-iso8859-*" to type FontStruct
Warning: Cannot convert string "-*-helvetica-bold-*-*-*-*-120-*-*-*-*-iso8859-*" to type FontStruct
Warning: Cannot convert string "-*-helvetica-bold-r-*-*-*-180-*-*-*-*-iso8859-*" to type FontStruct
Warning: Cannot convert string "-*-symbol-*-*-*-*-*-120-*-*-*-*-adobe-*" to type FontStruct
Warning: Could not load font "-*-lucidatypewriter-medium-*-*-*-*-120-*-*-*-*-iso8859-*", using font "fixed" instead
Warning: Could not load font "-*-lucidatypewriter-medium-r-*-*-*-120-*-*-*-*-iso8859-*", using font "fixed" instead
Warning: Could not load font "-*-lucidatypewriter-bold-*-*-*-*-120-*-*-*-*-iso8859-*", using font "fixed" instead
Warning: XmStringGetNextComponent: unknown type 27122480

Warning: XmStringGetNextComponent: unknown type 27125120

Warning: XmStringGetNextComponent: unknown type 27119296

Warning: XmStringGetNextComponent: unknown type 27109856

Warning: XmStringGetNextComponent: unknown type 27150160

Warning: XmStringGetNextComponent: unknown type 27132208 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-02T19:14:25.890

我想我是在@Fredrik 的帮助下弄明白的。

UTF-8 不兼容似乎是 ddd 中长期存在的 bug。许多人报告了它，但似乎没有人修复它。

我的代码没有在 ddd 中显示的原因是因为我`-g`在编译时没有使用该选项。

# java - java帮助将字符串数组转换为双数组

> ID：14664606
> 
> 赞同：-4
> 
> 时间：2013-02-02T17:42:08.447
> 
> 标签：java

我在字符串中有一个完整的一维数据数组。我需要将此一维数组转换为双数组以进行计算。但我无法弄清楚。如果我能弄清楚，那就太好了。我不确定，但如果我可以在数据文件中读取双精度并解析数据之间的空白，那也很棒。ps 数据被排列为坐标而不是如下所示的聚束，但我这样做的方式不会被读取为 x 和 y，而只会被读取为 1d 数组线。

代码：

```
file = new File("subtractedvectors.txt");
    scan = new Scanner(file);

    String [] subarray = new String[40];

    for(int row = 0; row < subarray.length; row++)
    {
        subarray[row] = scan.nextLine();
    }

    for(int row = 0; row < subarray.length; row++)
    {
        System.out.println(subarray[row] + " ");
    } 
```

数据：

```
-0.2869350880499999 0.01840283447500002 
-0.3356446340499999 -0.422276631525 
-1.0879343110499997 -0.311055704525 
-1.8794583530499998 1.268985311475 
-2.0487925240499996 -3.404131234525 
-0.7463400580499997 -0.05142237152500001 
1.2400316559500002 2.965222622475 
1.1715767139500004 -1.1113755165249999 
-0.4877369190499996 0.020307310475000007 
-0.8296528740499998 -0.611436447525 
0.43321626695000015 1.483144874475 
-0.4486841620499997 -4.199991639525 
-0.5980551060499999 -0.180287944525 
-0.9379483020499997 -1.605169775525 
0.15643726595000018 -2.591523262525 
2.19071678095 -1.041180241525 
-0.035047204049999614 0.107759270475 
-0.2796619480499998 1.174812069475 
-0.36357588404999985 -1.952647147525 
-0.1541381710499996 4.825189096475 
-0.5386256110499996 -0.129932855525 
-0.45958803605 1.054999589475 
0.5778822969500004 -1.580357584525 
2.1483562569500005 2.572258306475 
1.27904823795 1.228401456475 
0.9637480429500003 -1.766055860525 
0.33140834695 -0.18790365852500002 
-0.047555686049999935 2.585936438475 
1.2005633959500002 0.22278022747500004 
-1.4305940340499999 -1.694298031525 
-0.41707550904999957 -1.004148960525 
0.3517812019500002 0.599364130475 
-0.4172730140499996 3.248876134475 
-1.0244646370499997 2.770375020475 
-0.9653208200499999 -3.841495616525 
-0.7291669410499997 1.323124606475 
2.3113769619500006 -2.065505287525 
2.0595313709500003 1.454475365475 
-1.0216935320499998 1.511419720475 
1.15528856295 -0.683638613525 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-02T17:54:42.307

你可以试试这段代码。
这段代码的作用是读取字符串数组。
根据两个数字之间的单个空格将其拆分为两部分
，然后将其解析为加倍

```
String [] subarray = new String[40];
for(int row = 0; row < subarray.length; row++)
{
  subarray[row] = scan.nextLine();
}
double [][] myDoubleArray = new double[40][2];
for(int row = 0; row < subarray.length; row++)
{
  String s = subarray[row].split();//assuming that two doubles are seperated by a space  
  myDoubleArray[row][0] = Double.parseDouble(s[0]);
  myDoubleArray[row][1] = Double.parseDouble(s[1]);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-02T17:58:40.517

您使用的`Scanner`with 支持寻找`Double`带有特定分隔符的 a。

```
String input = "-1.25 1.65\n 1.47 5.72";

Scanner scanner = new Scanner(input);
scanner.useLocale(Locale.US);
scanner.useDelimiter("[\\r\\n\\s]+");

while (scanner.hasNextDouble()) {
   System.out.println(scanner.nextDouble());
} 
```

输出：

```
-1.25
1.65
1.47
5.72 
```

我的示例中的分隔符应该根据您问题中的示例数据为您工作。我可以建议一个而不是使用一个数组`List`吗？

# c# - WPF 应用程序中的 MediaPlayer

> ID：14664607
> 
> 赞同：0
> 
> 时间：2013-02-02T17:42:11.443
> 
> 标签：c#, wpf, media-player

我正在尝试创建一个 MediaPlayers 数组，但在尝试运行以下代码时得到一个 TargetInvocationException。为什么它不起作用？

作品：

```
MediaPlayer _mediaPlayer00 = new MediaPlayer();

MediaPlayer _mediaPlayer01 = new MediaPlayer();

_mediaPlayer00.Open("...");

_mediaPlayer01.Open("..."); 
```

不工作：

```
MediaPlayer[] _mediaPlayers= new MediaPlayer[2];

_mediaPlayers[0].Open("...");

_mediaPlayer[1].Open("..."); 
```

另一个问题。是否可以只使用一个媒体播放器播放多种声音？如果是的话怎么办？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T17:50:54.683

据我所知，这是因为数组`MediaPlayer`中的每个元素都是第一次初始化的，所以你必须先初始化元素。`MediaPlayer[]``null`

```
_mediaPlayers[0] = new MediaPlayer();
_mediaPlayers[1] = new MediaPlayer();

_mediaPlayers[0].Open("..."); 
```

或者

```
foreach(MediaPlayer p in _mediaPlayers)
p = new MediaPlayer(); 
```

# django - 如何从表单 django admin 编辑数据

> ID：14664609
> 
> 赞同：0
> 
> 时间：2013-02-02T17:42:31.217
> 
> 标签：django, django-forms, django-admin

我正在学习 Django 框架，我有一个问题。为了帮助您理解，我将尝试使用以下示例进行解释：

假设我们在 db 中有一些表，如下所示：

```
CREATE TABLE names (id INT NOT NULL PRIMARY KEY AUTO_INCREMENT, name VARCHAR(100)); 
```

我在**Django Admin**中的表单是：

```
<form>
    <textarea name="names"></textarea>
    <input type="submit" name="sbt" value="Submit">
</form> 
```

用户在表单的输入中输入了一些`names`内容并提交了它。然后一个脚本捕获这些数据并将其拆分为一个数组 ( `str.split("\n")`) 并循环添加到表名中！

我有很多疑问：

1.  我如何将表单添加到 Django Admin？
2.  我如何捕获表单数据并将这些数据添加到数据库中的 somethink 表中？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-03T05:00:45.583

首先，您必须创建一个 django 模型。

将此代码放入`models.py`.

```
class Names(models.Model):
    name = models.CharField(max_length = 100) 
```

然后您必须创建管理模型。

将此代码放入`admin.py`.

```
class NamesAdmin(admin.ModelAdmin):
    list_display = ['name']
    # whatever you want in your admin panel like filter, search and ...

admin.site.register(Names, NamesAdmin) 
```

我认为它符合您的要求。对于拆分名称，您可以覆盖保存模型方法并在其中拆分名称。但是如果你想要一个额外的表单，你可以很容易地创建一个 django 模型表单。

将代码放在类似`admin.py`,`views.py`或`forms.py`

```
class NamesForm(forms.ModelForm)
    class Meta:
        model = Names 
```

那是你的模型和形式。因此，如果您想将表单添加到 django 管理面板，您必须在 django admin 中为其创建一个视图。为此，请创建一个常见的视图。

将代码放入您的`admin.py`or`views.py`中。

```
def spliter(req):
    if req.method == 'POST':
        form = NamesForm(req.POST)
        if form.is_valid():
            for name in form.cleaned_data['names'].split(' '):
                Names(name = name).save()
                return HttpResponseRedirect('') # wherever you want to redirect
        return render(req, 'names.html', {'form': form})
    return render(req, 'names.html', {'form': NamesForm()}) 
```

请注意，您必须创建`names.html`并将以下代码放入您的 html 页面中。

```
{% extends 'admin/base_site.html' %}

{% block content %}
    <!-- /admin/names/spliter/ is your url in admin panel (you can change it whatever you want) -->
    <form action="/admin/names/spliter/" method="post" >{% csrf_token %}
        {{ form }}
        <input type="submit" value="'Send'" >
    </form>
{% endblock %} 
```

这是您的视图，您可以在任何地方使用它。但是，如果您希望只有管理员有权查看此页面，则必须将此方法也添加到您的`NamesAdmin`类中。

```
def get_urls(self):
    return patterns(
        '',
        (r'^spliter/$', self.admin_site.admin_view(spliter)) # spliter is your view
    ) + super(NamesAdmin, self).get_urls() 
```

而已。我希望这可以帮助你。

# mysql - ActiveRecord 搜索具有条件的字段

> ID：14664615
> 
> 赞同：1
> 
> 时间：2013-02-02T17:43:40.483
> 
> 标签：mysql, sql, ruby-on-rails, ruby-on-rails-3, rails-activerecord

我对 Rails 和 ActiveRecord 比较陌生。我将电话号码存储在 ActiveRecord 字段 (phone_number) 中，可以采用多种格式“+1 928 929 3829”或“393 938 0293”或“392-937-9283”（你明白了）。

后来我捕获了一个 10 位数的电话号码（所以它总是像“3939380293”），然后尝试将它与我的 ActiveRecord 电话号码字段匹配。我要做的操作是匹配 phone_number 的最后 10 个数字字符。

我尝试查看可以在查询中使用的不同 SQL 类型的查询约束，但我无法准确找到我需要的内容或进行逻辑飞跃。

有人可以在这里提供一些建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T17:56:45.280

我会做以下事情

1 - 具有电话号码的 VARCHAR 字段，它将以任何格式保存号码（例如：“+1 928 929 3829”或“393 938 0293”或“392-937-9283”）

2 - 有一个 Activerecord 选择带有[正则表达式](https://stackoverflow.com/questions/8059770/how-to-specify-ruby-regex-when-using-active-record-in-rails)的电话号码。

我最喜欢的正则表达式编写器是[rubular](http://rubular.com/)、[regexper](http://www.regexper.com/)

# ruby-on-rails - Rspec 测试控制器搜索方法

> ID：14664618
> 
> 赞同：1
> 
> 时间：2013-02-02T17:43:50.973
> 
> 标签：ruby-on-rails, search, rspec, controller

我正在尝试在我的控制器中测试自定义搜索方法的行为：

```
 #RecordingsController
    def search
      # raise params.inspect
      @search = params[:search]
      searches = []
      searches2 = []
      for n in 1..5
        searches << @search["date(#{n}i)"].to_i
        searches2 << @search["date2(#{n}i)"].to_i
      end
      start_date = date_format(*searches)
      end_date = date_format(*searches2)
      conditions = []
      conditions << "agent like '%#{@search["agent"]}%'" unless @search["agent"].blank?
      conditions << "phone like '%#{@search["phone"]}%'" unless @search["phone"].blank?
      conditions << "date between '#{start_date}' and '#{end_date}'"

      @recordings = Recording.where(conditions.join(" AND ")).order('date ASC')
      if @recordings.blank?
        redirect_to("/", alert: "No results were found for this search. Please try again.")
      else
        render "recordings/search"
      end
    end 
```

使用以下布局：

```
 #recordings_controller_spec.rb
    describe RecordingsController do
      describe "POST #search" do
        context "with valid attributes" do
          it "assigns a new search to @search" do
            search = @recording_search
            get :search, @recording_search
            assigns(:search).should eq(search)
          end
          it "populates an array of recordings"
          it "renders the :search view"
        end
      end
    end 
```

我得到的最远的是尝试构建一个哈希来模仿我的 params 哈希将用于表单

```
 #params hash
    params = {"search" => { "date_1i" => "2012", "date_2i" => "1", ... "date2_5i" => "00" } } 
```

其中 date_#{n}i 是开始日期 [年、月、日、小时、分钟]，而 date2_#{n}i 是结束日期。我正在尝试遵循[此处](http://www.ruby-forum.com/topic/207254)发布的答案，仅使用常规哈希来模仿 params 哈希。正如您从我的控制器中看到的那样，我实际上并没有将参数传递给我的#search 方法。我可以做？或者有没有办法在 rspec 测试中模拟 params 哈希并确定我`@search`的`@recordings`、 和`redirect_to`/`render`变量/操作是否正在执行？我已经在我的请求规范中测试了渲染/重定向，但如果可以的话，我想全面测试这个方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-02T18:53:53.863

您应该能够生成一个控制器规范，该规范使用给定的一组参数获取搜索操作。这将导致这些参数可用于 params 哈希。然后，您可以验证搜索是如何构建的以及返回了哪些结果。

```
describe RecordingsController do
  describe '#search' do
    it 'should return results' do
      get :search, "search" => { "date_1i" => "2012", "date_2i" => "1", ... "date2_5i" => "00" }
      response.should be_ok
      @recordings.map(&:name).should == ['expected1', 'expected2']
    end
  end
end 
```

此示例使用一些搜索条件作为查询参数执行搜索，验证响应是否成功（http 200 状态），然后提取返回的录音列表并尝试将它们映射到友好的录音名称列表（您可以使用任何键在此模型上）将它们与预期的结果列表进行比较。

如果您在此控制器中分离关注点，则编写/测试此代码会更容易 - 您可以编写一个帮助程序来处理查询参数并构建一个搜索过滤器，然后将其传递给控制器​​中的 Recording 模型：

```
class RecordingController
  def search
    @search_filter = SearchFilter.for_params(params[:search])
    @recordings = Recording.where(@search_filter).order('date ASC')
    render "recordings/search"
  end
end

class SearchFilter
  # Return search params as a hash for given request params hash
  def self.for_params(params)
    ...
  end
end 
```

这将允许您为生成搜索过滤器的逻辑编写单元测试，并且只验证控制器是否正在执行更简单的操作，即在搜索逻辑和 Recording 模型集合之间传递信息。我还建议将有关显示空结果的逻辑移到结果页面上的视图中并移出控制器。

# python - Python字典详细信息

> ID：14664620
> 
> 赞同：1
> 
> 时间：2013-02-02T17:44:09.703
> 
> 标签：python, dictionary, hashtable, language-features

我想知道python字典的源代码在哪里。我知道源代码可能很难阅读，所以我只是在粗略描述了实现和使用的哈希例程之后。

是否有人知道使用哪种算法以及它们如何处理冲突，如果使用链接或重建表。

我知道这个问题有点含糊，所以请指出正确的方向会有所帮助。如果有人知道关于 python 字典的任何好的文档，那就太好了。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-02T17:45:18.440

它位于[`Objects/dictobject.c`](http://hg.python.org/cpython/file/tip/Objects/dictobject.c)文件中。那里也有一个[`dictnotes.txt`文件](http://hg.python.org/cpython/file/ab4b8da79a5f/Objects/dictnotes.txt)，可以指导您了解来源。

Python 字典使用带有开放寻址的哈希表将键映射到槽。通过“扰动”密钥来解决冲突；一种从大步开始的算法，然后使用越来越小的步长，直到它扫描表以查找下一个空槽。

网上有几篇文章，包括[这篇博](http://www.laurentluce.com/posts/python-dictionary-implementation/)文；您还可以阅读 Beautiful Code 这本书，以获得出色的代码曝光率。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-02T17:52:02.687

还.. 。这是一个`dict`更有效的活动状态配方（`from 3 to 24 times more space efficient than regular dictionaries`）！.否则前两个答案很棒！
[http://code.activestate.com/recipes/578375-proof-of-concept-for-a-more-space-efficient-faster/?in=user-178123](http://code.activestate.com/recipes/578375-proof-of-concept-for-a-more-space-efficient-faster/?in=user-178123)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-02T17:46:46.107

源代码树有关于字典如何工作的很好的文档：http: [//hg.python.org/cpython/file/ab4b8da79a5f/Objects/dictnotes.txt](http://hg.python.org/cpython/file/ab4b8da79a5f/Objects/dictnotes.txt)

# css - 有没有办法在没有 javascript 的情况下使用 JQuery Mobile CSS？

> ID：14664622
> 
> 赞同：0
> 
> 时间：2013-02-02T17:44:12.433
> 
> 标签：css, jquery-mobile, angularjs

在尝试让 JQuery Mobile 和 AngularJS 路由一起工作的许多天徒劳无功之后，我正在考虑我的替代选择..

有没有办法在不依赖 JQuery 的 javascript 的情况下使用 JQM CSS？

或者是否有推荐的替代 CSS 包？包含 JQM 中可用的所有页眉/页脚和列表的东西？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-02T17:54:14.587

当然，你下载的包里有一个CSS文件。但是所有网站功能和移动适配都将被破坏。您可以重命名类和 id 或直接使用 css 文件中的类。问候

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-02T18:13:20.990

有相当多的 jQueryMobile 功能完全依赖于 CSS 文件，例如。网格。你不会得到交互，但所有按钮的外观、形状和颜色在没有 JS 的情况下都是完全有用的。

仍然 - 取决于您的期望。

当这样使用它时，您需要了解一点 JQM 是如何工作的，以了解预期的类和 html 结构，因为其中一些是由 javascript 生成的。

**[题外话]**

但也许你只是不喜欢 jquerymobile 有多大？

然后你可能想使用： http: [//jquerymobile.com/download-builder/](http://jquerymobile.com/download-builder/)只获取你需要的东西，并在这里使用 tte themeroller：http: [//jquerymobile.com/themeroller/index.php](http://jquerymobile.com/themeroller/index.php)只创建一个主题（全局）并删除其他主题（A、B、C）

这就是你如何让它变得更小。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-02T18:03:52.020

JQS 提供对 ui 动画和用户体验增强的支持。删除库将使您无法访问由 javascript 创建和使用的 CSS 内容，以便“管理”前端设计。——</p>

是的，您可以使用 jquery 移动主题并使其适应您的需求。刚刚阅读了适合您情况的适配器版本：[https ://groups.google.com/forum/?fromgroups#!topic/angular/oIxRxpkn3L0](https://groups.google.com/forum/?fromgroups#!topic/angular/oIxRxpkn3L0)

也许 css 包的替代品已记录在案。关于更重的 JQM 模板和使用，有一些介绍，你需要看看像 adobe [theme-control-jquery-mobile.html](http://www.adobe.com/devnet/dreamweaver/articles/theme-control-jquery-mobile.html) ..

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-02T18:12:52.010

你可以重用他下载的JQM包里面的CSS文件。可以包含文件 jquery.mobile-1.xxcss，但请确保也包含 images 文件夹并将其放在目的地的相同位置。

如果您不确定要包含哪些类用于哪个目的，您可以通过检查 JQM 演示页面来找出它（由于 JQM javascript，查看源代码将不起作用）。

# c# - 如何在 C# 中使用 webbrowser 通过文件输入框上传文件

> ID：14664626
> 
> 赞同：5
> 
> 时间：2013-02-02T17:44:22.520
> 
> 标签：c#, webbrowser-control

可能是这个问题在过去被问过，但我已经搜索并没有找到它的解决方案。

我已经尝试了到目前为止我发现的所有选项，但都是徒劳的。SendKeys 不起作用，因为它没有用要上传的文件路径填充文件输入框。无法设置文件输入框“SetAttribute”值，因为没有可用的值属性：

就这样。

如果我使用 element.focus() 它会弹出“选择要上传的文件”对话框，现在我不知道如何以编程方式填充它并在文件输入框中打开它。

我希望它自动完成，以便用户不必与应用程序交互。应用程序应从给定文件路径的硬盘中选择文件并填写表单的其他字段然后开始上传，所有这些都使用 Windows 表单应用程序中的 webbrowser 控件。

没有找到解决方案！

有人可以帮忙吗？（这是我关于stackoverflow的第一个问题，因此如果我做错了什么，请指导，我的意思是如果我不允许发布这样的问题！）

这是代码：

```
 HtmlElementCollection heCollection = doc.GetElementsByTagName("input");
        foreach (HtmlElement heSpan in heCollection)
        {
          string strType = heSpan.GetAttribute("type");
          string strName = heSpan.GetAttribute("name");
          if (strType.Equals("file") && strName.Equals("file"))
          {
            heSpan.Focus();
            //heSpan.SetAttribute("value", "test.jpg");
            SendKeys.Send("C:\\1.txt");
            //heSpan.InnerText = "c:\\1.txt";
          }

          //Title for the attachment
          if (strName.Equals("field_title"))
          {
            heSpan.InnerText = "1.txt";
          }
        } 
```

执行此代码时，光标在精细输入框中开始闪烁（因为我已设置 heSpan.focus()）但文件路径未显示在文件输入框中。如果我实现 heSpan.InvokeMember("click"); 它打开选择一个文件上传对话框/弹出窗口，我卡住了，因为我不知道如何动态填充该弹出窗口，然后在文件输入框中插入文件路径。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T10:37:41.497

尝试在将焦点设置到输入字段之前将焦点设置到 WebBrowser 控件。这对我有用。

# google-app-engine - 在 GAE 上使用 jinja2 显示图像

> ID：14664631
> 
> 赞同：2
> 
> 时间：2013-02-02T17:44:40.333
> 
> 标签：google-app-engine, jinja2

我有一个图像数据库。我想使用 jinja2 模板显示数据库中的所有图像。

我发送数据库对象如下：

```
class Default_tiles(db.Model):
  name = db.StringProperty()
  image = db.BlobProperty(default=None)

class MainPage(webapp2.RequestHandler):
  def get(self):

    # get all the default tiles in the database 
    default_tiles_query = Default_tiles.all()
    defaultTiles = default_tiles_query.fetch(10)

    template_values = {
        'defaultTiles': defaultTiles  # contain all the defaut tiles to be displayed 
    }

    template = jinja_environment.get_template('index.html')
    self.response.out.write(template.render(template_values)) 
```

在 Default_tiles 中显示每个对象中每个图像的 jinja2 模板是：

```
<body>  
  {% for defaultTile in defaultTiles %}
    {{ defaultTile.image }}
  {% endfor %}
</body> 
```

当它运行时，我得到以下错误日志：

**顶级模板代码 {{ defaultTile.image }} UnicodeDecodeError: 'ascii ' 编解码器无法解码位置 0 中的字节 0x89：序数不在范围内（128）**

我怀疑我的线路有问题`{{ defaultTile.image }}`

感谢大家的帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-02T17:52:02.713

您不能只是将二进制数据放入 html 并显示图像，您需要使用[IMG](http://www.w3schools.com/tags/tag_img.asp)元素显示图像。

您需要使用处理程序提供图像或使用[内联 base64 数据](http://www.sweeting.org/mark/blog/2005/07/12/base64-encoded-images-embedded-in-html)显示图像。

# playframework-2.0 - kundera Cassandra 和 Play 框架上的连接和 CRUD 操作

> ID：14664632
> 
> 赞同：1
> 
> 时间：2013-02-02T17:44:44.837
> 
> 标签：playframework-2.0, cassandra, crud, kundera

我正在尝试将 Cassandra 1.1.9 over Kundera 与 Play 2.0 框架连接起来。我在 GitHub 上尝试了示例*Getting-Started-in-5-minutes 。*但我得到了这个例外：

`[PersistenceLoaderException: com.impetus.kundera.utils.InvalidConfigurationException: Duplicate persistence-units for name: cassandra_pu. verify your persistence.xml file]`

我刚刚将*kundera-cassandra-2.2.1-jar-with-dependencies.jar*添加到项目构建路径中。我应该向 application.conf 添加任何内容吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T12:47:28.550

AFA Kundera 担心我已经为这个错误回复了你的另一个帖子。请求您加入[http://groups.google.com/group/kundera-discuss/subscribe](http://groups.google.com/group/kundera-discuss/subscribe)以获得对此类错误的快速支持。

-维维克

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-03T01:15:44.293

另一个选择是 PlayOrm for cassandra 和 playframework，它有自己的内存中 nosql，这通常是 playframework 在开发中用于提高编码速度并且没有服务器重新启动的方式；）（它会在您更改代码时保留该数据，就像内存中的 RDBMS 选项给你。还有一个 1.2.x 的 playframework 插件，因为如果你在 java 中，1.2.x 版本的效率会更高（在 scala 中，它的开发速度可能一样慢，因为scala编译器的缓慢......我希望他们能越来越快，因为我确实喜欢scala）。

院长

# windows - Windows Batch：使用文件夹中的所有文件执行应用程序，随机排序

> ID：14664633
> 
> 赞同：0
> 
> 时间：2013-02-02T17:44:48.443
> 
> 标签：windows, batch-file, media-player

我使用媒体播放器经典播放视频。我可以制作一个批处理文件来播放播放列表，如下所示：

```
mpc.exe video1.avi video2.avi video3.avi ... 
```

有用。

现在我想制作一个批处理文件，播放随机排序的文件夹中的所有视频。

任何想法？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T20:00:51.563

下面的代码假定您正在播放当前目录中的文件，并且假定您的 .avi 文件名都不是以`=`. 消除这些限制并不需要太多。

如果您的文件夹中有太多文件，那么最终命令长度将超过允许的最大长度 8191 字节。

```
@echo off
setlocal disableDelayedExpansion
for /f "delims==" %%A in ('set file. 2^>nul') do set "%%A="
for /f "tokens=1* delims=:" %%A in (
  'dir /b /a-d *.avi^|findstr /n "^"'
) do (
  set "file.%%A=%%B"
  set "cnt=%%A"
)
set "cmd=mpc.exe"
for /l %%N in (%cnt% -1 1) do call :buildCmd %%N
%cmd%
exit /b

:buildCmd
set /a N=%random% %% %1
set "skip="
if %N% gtr 0 set "skip=skip=%N%"
for /f "%skip% tokens=1* delims==" %%A in ('set file.') do (
  set cmd=%cmd% "%%B"
  set "%%A="
  exit /b
) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-02T21:31:59.307

The Batch file below will fail if the name of any video file have exclamation marks. This may be fixed, if needed.

```
@echo off
setlocal EnableDelayedExpansion

rem Store the file names into an array
set cnt=0
for %%a in (*.avi) do (
   set /A cnt+=1
   set file[!cnt!]=%%a
)

rem Insert the names in the command line in random order
set cmd=mpc.exe
for /L %%a in (%cnt%,-1,1) do (
   set /A i=%%a*!random!/32768+1
   for %%i in (!i!) do set cmd=!cmd! "!file[%%i]!"
   set file[%%i]=!file[%%a]!
)

%cmd% 
```

Antonio

# php - 脚本问题查看网站

> ID：14664638
> 
> 赞同：0
> 
> 时间：2013-02-02T17:45:23.213
> 
> 标签：php, ajax

我在任何地方都找不到这个问题，而且我看不到任何真正相关的东西。我有一个我购买的 URL 缩短脚本，这个脚本在我的第一台服务器上运行良好，安装了数据库，FTP 文件，并且全部设置和缩短 URL。

但是从那以后我把它移到了一个 VPS 服务器上，我用 Centos 5.6 设置了完全相同的服务器。安装脚本，一切正常。但我发现唯一不起作用的是缩短过程。我不知道为什么它不起作用。我对 Ajax 和 JavaScript 知之甚少，我认为这是问题所在。

这是ajax.php

```
 <?php
require_once '../config.php';

function url_exist($url)
{
    $c=curl_init();
    curl_setopt($c,CURLOPT_URL,$url);
    curl_setopt($c,CURLOPT_HEADER,1);
    curl_setopt($c,CURLOPT_NOBODY,1);
    curl_setopt($c,CURLOPT_RETURNTRANSFER,1);
    if(!curl_exec($c)){
        return false;
    }else{
        return true;
    }
}

function shorteURLFromID ($integer)
{
    $base = '0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ';
    $length = strlen($base);
    $out = '';

    while($integer > $length - 1)
    {
        $out = $base[fmod($integer, $length)] . $out;
        $integer = floor( $integer / $length );
    }
    return $base[$integer] . $out;
}

if(isset($_POST['url']))
{
    $l_type = (string) $db->escape(trim(strip_tags($_POST['type'])));

    $url = trim(strip_tags($_POST['url']));
    $url = str_replace(array("http://"), array(''), $url);

    if(strlen($url) < 3) {
        print '<style>.alert-300{width:325px;margin-left:182px;}</style>';
        die("<div class='alert alert-error alert-300'>".translate('empty_url_error')."</div>");
    }

    if(stristr($url, $_SERVER['SERVER_NAME'])) {
        print '<style>.alert-300{width:325px;margin-left:182px;}</style>';
        die("<div class='alert alert-error alert-300'>".translate('same_site_error')."</div>");
    }

    if(url_exist($url))
    {
        //check if exists for this user
        $rs = $db->get_row("SELECT string FROM links WHERE uID = '".$usersObject->ID()."' AND 
                            destination = '".mysql_real_escape_string($url)."' LIMIT 1");
        if(count($rs)) {
            $string = $rs->string;
            print "http://".$_SERVER['SERVER_NAME']."/".$string;
        }else{
            $rs = $db->query("INSERT INTO links (destination, added, ip, uID, type) VALUES 
                            ('".$db->escape($url)."', '".time()."', '".ip2long($_SERVER['REMOTE_ADDR'])."', 
                            '".$usersObject->ID()."', '".$l_type."')");
            if($rs) {
                $string = shorteURLFromID($db->insert_id);
                $rs = $db->query("UPDATE links SET string = '$string' WHERE linkID = '".mysql_insert_id()."'");
                print "http://".$_SERVER['SERVER_NAME']."/".$string;
            }else{
                print '<style>.alert-300{width:325px;margin-left:182px;}</style>';
                print "<div class='alert alert-error alert-300'>Could not create shortened link ".mysql_error()."</div>";
            }
        }

    }else{
        print '<style>.alert-300{width:325px;margin-left:182px;}</style>';
        print "<div class='alert alert-error alert-300'>".translate('invalid_url_error')."</div>";
    }
}else{
    print '<style>.alert-300{width:325px;margin-left:182px;}</style>';
    print '<div class="alert alert-error alert-300">'.translate('invalid_url_error').'</div>';
}

?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-02T17:49:58.383

在没有进一步信息（或脚本来源）的情况下，唯一想到的是您正在使用的 PHP 版本。它与旧服务器的不同吗？如果是这样，它是 5.2 之前的版本吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-02T19:11:46.130

尝试添加此选项：

> curl_setopt($c, CURLOPT_SSL_VERIFYPEER, 0);

看起来默认值已通过 cURL 7.10 更改为 true，因此 PHP 5.2.17 可能使用的是 7.10 之前的版本。

列维

# actionscript-3 - 我的动作脚本 3 代码和我的 red5 媒体服务器有什么问题？

> ID：14664640
> 
> 赞同：0
> 
> 时间：2013-02-02T17:45:35.727
> 
> 标签：actionscript-3, flash, red5

我的问题是我正在建立一个需要实时视频流的网站。我们有一个来自 arvixe 的 VPS，安装了 red5，但我无法使用 rtmp 连接到 red5。我需要知道这是否是我的代码错误，或者我是否只需要帮助在我的操作脚本 3 中找到要连接的正确 rtmp 地址。

到目前为止，这是我的代码：

```
import flash.media.Camera;
import flash.media.Video;
import flash.media.Microphone;
import flash.net.URLVariables;
import flash.net.URLRequest;
import flash.net.URLLoader;
import flash.events.*;
import flash.display.MovieClip;
import flash.net.*;
import flash.text.*;

var nc:NetConnection = new NetConnection();
nc.connect("rtmp://198.58.95.110:1935/");
var ns:NetStream = new NetStream(nc);
var camera:Camera = Camera.getCamera();
var video:Video = new Video();
video.smoothing = true;
video.attachCamera(camera);
ns.attachCamera(camera);
ns.publish("cam1");
addChild(video); 
```

然后我把它改成这样：

```
import flash.media.Camera;
import flash.media.Video;
import flash.media.Microphone;
import flash.net.URLVariables;
import flash.net.URLRequest;
import flash.net.URLLoader;
import flash.events.*;
import flash.display.MovieClip;
import flash.net.*;
import flash.text.*;

var nc:NetConnection = new NetConnection();
var ns:NetStream = new NetStream(nc);
var camera:Camera = Camera.getCamera();
var video:Video = new Video();
video.smoothing = true;
video.attachCamera(camera);
nc.addEventListener(NetStatusEvent.NET_STATUS, netStatusHandler);
nc.connect("rtmp://cam320.arvixevps.com:5080");

function netStatusHandler(event:NetStatusEvent):void {
 if (event.info.code == "NetConnection.Connect.Success") {
      ns.attachCamera(camera);
      ns.publish("livecam1");
 }
} 
```

我尝试的下一个代码：

```
import flash.media.Camera;
import flash.media.Video;
import flash.media.Microphone;
import flash.net.URLVariables;
import flash.net.URLRequest;
import flash.net.URLLoader;
import flash.events.*;
import flash.display.MovieClip;
import flash.net.*;
import flash.text.*;

var nc:NetConnection = new NetConnection();
nc.connect("rtmp://cam320.arvixevps.com/webapps/oflaDemo");
var ns:NetStream = new NetStream(nc);
var camera:Camera = Camera.getCamera();
var video:Video = new Video();
video.smoothing = true;
video.attachCamera(camera);
nc.addEventListener(NetStatusEvent.NET_STATUS, publish);
addChild(video);
function publish(event:NetStatusEvent):void {
if (event.info.code == "NetConnection.Connect.Success"){
ns.attachCamera(camera);
ns.publish("cam1");
}
} 
```

red5.log 文件如下所示：

```
2013-02-02 14:07:34,612 [main] INFO  org.red5.server.Launcher - Red5 Server 0.9.0 $Rev: 4030 $ (http://code.google.com/p/red5/)
2013-02-02 14:07:34,726 [main] INFO  o.s.c.s.FileSystemXmlApplicationContext - Refreshing org.springframework.context.support.FileSystemXmlApplicationContext@5ff06dc3: startup date [Sat Feb 02 14:07:34 PST 2013]; root of context hierarchy
2013-02-02 14:07:35,281 [main] INFO  o.s.b.f.c.PropertyPlaceholderConfigurer - Loading properties file from class path resource [red5.properties]
2013-02-02 14:07:35,293 [main] INFO  o.s.b.f.s.DefaultListableBeanFactory - Pre-instantiating singletons in org.springframework.beans.factory.support.DefaultListableBeanFactory@69d95da8: defining beans [placeholderConfig,red5.common,red5.core,context.loader,pluginLauncher,tomcat.server]; root of factory hierarchy
2013-02-02 14:07:35,326 [main] INFO  o.s.c.s.FileSystemXmlApplicationContext - Refreshing org.springframework.context.support.FileSystemXmlApplicationContext@7cf01771: startup date [Sat Feb 02 14:07:35 PST 2013]; root of context hierarchy
2013-02-02 14:07:35,546 [main] INFO  o.s.b.f.c.PropertyPlaceholderConfigurer - Loading properties file from class path resource [red5.properties]
2013-02-02 14:07:35,552 [main] INFO  o.s.b.f.s.DefaultListableBeanFactory - Pre-instantiating singletons in org.springframework.beans.factory.support.DefaultListableBeanFactory@1118fa47: defining beans [placeholderConfig,red5.server,jmxFactory,jmxAgent,serializer,deserializer,statusObjectService,rtmpCodecFactory,rtmptCodecFactory,remotingCodecFactory,streamableFileFactory,filePersistenceThread,sharedObjectService,streamService,providerService,consumerService,bandwidthFilter,schedulingService,warDeployService,remotingClient,object.cache,keyframe.cache,flv.impl,flvreader.impl,mp4reader.impl,mp3reader.impl,org.springframework.beans.factory.config.MethodInvokingFactoryBean#0,org.springframework.beans.factory.config.MethodInvokingFactoryBean#1,streamExecutor,playlistSubscriberStream,clientBroadcastStream]; root of factory hierarchy
2013-02-02 14:07:35,717 [main] WARN  o.s.b.GenericTypeAwarePropertyDescriptor - Invalid JavaBean property 'enableRmiAdapter' being accessed! Ambiguous write methods found next to actually used [public void org.red5.server.jmx.JMXAgent.setEnableRmiAdapter(java.lang.String)]: [public void org.red5.server.jmx.JMXAgent.setEnableRmiAdapter(boolean)]
2013-02-02 14:07:35,717 [main] WARN  o.s.b.GenericTypeAwarePropertyDescriptor - Invalid JavaBean property 'enableSsl' being accessed! Ambiguous write methods found next to actually used [public void org.red5.server.jmx.JMXAgent.setEnableSsl(java.lang.String)]: [public void org.red5.server.jmx.JMXAgent.setEnableSsl(boolean)]
2013-02-02 14:07:35,717 [main] WARN  o.s.b.GenericTypeAwarePropertyDescriptor - Invalid JavaBean property 'enableMinaMonitor' being accessed! Ambiguous write methods found next to actually used [public void org.red5.server.jmx.JMXAgent.setEnableMinaMonitor(java.lang.String)]: [public void org.red5.server.jmx.JMXAgent.setEnableMinaMonitor(boolean)]
2013-02-02 14:07:36,400 [main] INFO  org.red5.server.service.WarDeployer - War deployer service created
2013-02-02 14:07:36,493 [main] INFO  o.s.c.s.FileSystemXmlApplicationContext - Refreshing org.springframework.context.support.FileSystemXmlApplicationContext@9c6a99d: startup date [Sat Feb 02 14:07:36 PST 2013]; parent: ApplicationContext 'red5.common'
2013-02-02 14:07:36,683 [main] INFO  o.s.b.f.c.PropertyPlaceholderConfigurer - Loading properties file from class path resource [red5.properties]
2013-02-02 14:07:36,691 [main] WARN  o.s.b.f.c.CustomEditorConfigurer - Passing PropertyEditor instances into CustomEditorConfigurer is deprecated: use PropertyEditorRegistrars or PropertyEditor class names instead. Offending key [java.net.SocketAddress; offending editor instance: org.apache.mina.integration.beans.InetSocketAddressEditor@77a9f87c
2013-02-02 14:07:36,695 [main] INFO  o.s.b.f.s.DefaultListableBeanFactory - Pre-instantiating singletons in org.springframework.beans.factory.support.DefaultListableBeanFactory@7bbf68a9: defining beans [customEditorConfigurer,placeholderConfig,rtmpMinaConnManager,rtmpHandler,rtmpMinaIoHandler,rtmpTransport,rtmpMinaConnection,rtmptConnManager,rtmptHandler,rtmptServlet,rtmptConnection,rtmpsMinaIoHandler,rtmpsTransport]; parent: org.springframework.beans.factory.support.DefaultListableBeanFactory@1118fa47
2013-02-02 14:07:36,718 [main] INFO  o.r.s.net.rtmp.RTMPMinaTransport - RTMP Mina Transport bound to /0.0.0.0:1935
2013-02-02 14:07:36,719 [main] INFO  o.r.s.net.rtmp.RTMPMinaTransport - RTMP Mina Transport Settings
2013-02-02 14:07:36,719 [main] INFO  o.r.s.net.rtmp.RTMPMinaTransport - Connection Threads: 4
2013-02-02 14:07:36,719 [main] INFO  o.r.s.net.rtmp.RTMPMinaTransport - I/O Threads: 16
2013-02-02 14:07:36,785 [main] INFO  o.r.s.net.rtmp.RTMPMinaTransport - TCP No Delay: true
2013-02-02 14:07:36,785 [main] INFO  o.r.s.net.rtmp.RTMPMinaTransport - Receive Buffer Size: 65536
2013-02-02 14:07:36,785 [main] INFO  o.r.s.net.rtmp.RTMPMinaTransport - Send Buffer Size: 271360
2013-02-02 14:07:36,795 [main] INFO  o.s.b.f.s.DefaultListableBeanFactory - Destroying singletons in org.springframework.beans.factory.support.DefaultListableBeanFactory@7bbf68a9: defining beans [customEditorConfigurer,placeholderConfig,rtmpMinaConnManager,rtmpHandler,rtmpMinaIoHandler,rtmpTransport,rtmpMinaConnection,rtmptConnManager,rtmptHandler,rtmptServlet,rtmptConnection,rtmpsMinaIoHandler,rtmpsTransport]; parent: org.springframework.beans.factory.support.DefaultListableBeanFactory@1118fa47
2013-02-02 14:07:36,796 [main] INFO  o.s.b.f.s.DefaultListableBeanFactory - Destroying singletons in org.springframework.beans.factory.support.DefaultListableBeanFactory@69d95da8: defining beans [placeholderConfig,red5.common,red5.core,context.loader,pluginLauncher,tomcat.server]; root of factory hierarchy
2013-02-02 14:07:36,796 [main] INFO  o.s.c.s.FileSystemXmlApplicationContext - Closing ApplicationContext 'red5.common': startup date [Sat Feb 02 14:07:35 PST 2013]; root of context hierarchy
2013-02-02 14:07:36,796 [main] INFO  o.s.b.f.s.DefaultListableBeanFactory - Destroying singletons in org.springframework.beans.factory.support.DefaultListableBeanFactory@1118fa47: defining beans [placeholderConfig,red5.server,jmxFactory,jmxAgent,serializer,deserializer,statusObjectService,rtmpCodecFactory,rtmptCodecFactory,remotingCodecFactory,streamableFileFactory,filePersistenceThread,sharedObjectService,streamService,providerService,consumerService,bandwidthFilter,schedulingService,warDeployService,remotingClient,object.cache,keyframe.cache,flv.impl,flvreader.impl,mp4reader.impl,mp3reader.impl,org.springframework.beans.factory.config.MethodInvokingFactoryBean#0,org.springframework.beans.factory.config.MethodInvokingFactoryBean#1,streamExecutor,playlistSubscriberStream,clientBroadcastStream]; root of factory hierarchy
2013-02-02 14:09:12,350 [NioProcessor-1] INFO  o.red5.server.net.rtmp.RTMPHandler - Connecting to: [WebScope@218c6982 Depth = 1, Path = '/default', Name = 'installer']
2013-02-02 14:09:39,316 [NioProcessor-1] INFO  o.red5.server.net.rtmp.RTMPHandler - Connecting to: [WebScope@218c6982 Depth = 1, Path = '/default', Name = 'installer']
2013-02-02 14:15:10,259 [NioProcessor-1] INFO  o.red5.server.net.rtmp.RTMPHandler - Connecting to: [WebScope@218c6982 Depth = 1, Path = '/default', Name = 'installer']
2013-02-02 14:34:34,089 [NioProcessor-1] INFO  o.red5.server.net.rtmp.RTMPHandler - Scope webapps/oflaDemo not found on cam320.arvixevps.com
2013-02-02 14:34:36,935 [Red5_Scheduler_Worker-11] WARN  o.r.server.net.rtmp.RTMPConnection - Closing RTMPMinaConnection from 184.63.74.33 : 11053 to cam320.arvixevps.com (in: 3433 out 3266 ), with id 415926013 due to long handshake
2013-02-02 14:34:55,728 [NioProcessor-1] INFO  o.red5.server.net.rtmp.RTMPHandler - Scope webapps/oflaDemo not found on cam320.arvixevps.com
2013-02-02 14:34:58,998 [Red5_Scheduler_Worker-12] WARN  o.r.server.net.rtmp.RTMPConnection - Closing RTMPMinaConnection from 184.63.74.33 : 11081 to cam320.arvixevps.com (in: 3433 out 3266 ), with id 814254349 due to long handshake
2013-02-02 15:59:32,847 [NioProcessor-1] INFO  o.red5.server.net.rtmp.RTMPHandler - Scope webapps/oflaDemo not found on cam320.arvixevps.com
2013-02-02 15:59:35,845 [Red5_Scheduler_Worker-10] WARN  o.r.server.net.rtmp.RTMPConnection - Closing RTMPMinaConnection from 184.63.74.33 : 13181 to cam320.arvixevps.com (in: 3433 out 3266 ), with id 2104928456 due to long handshake
2013-02-02 16:00:27,050 [NioProcessor-1] INFO  o.red5.server.net.rtmp.RTMPHandler - Scope webapps/oflaDemo not found on cam320.arvixevps.com
2013-02-02 16:00:30,974 [Red5_Scheduler_Worker-11] WARN  o.r.server.net.rtmp.RTMPConnection - Closing RTMPMinaConnection from 184.63.74.33 : 13226 to cam320.arvixevps.com (in: 3433 out 3266 ), with id 9885998 due to long handshake 
```

在将网络连接和网络流代码添加到我的操作脚本之前，仍然没有运气让它工作以及网络摄像头曾经出现的位置。当然，我一直试图弄清楚几天，但没有运气。我认为问题出在 nc.connect("rtmp://cam320.arvixevps.com:5080"); 但不确定 red5 的默认 rtmp 的正确地址是什么，所以不知道该放什么。另外我不确定我的代码中是否有任何错误，因为我已经很久没有使用动作脚本了。不幸的是，我有一个截止日期来建立这个网站，而且我的时间不多了。但如果有人能至少指出我正确的方向或告诉我我做错了什么，我可以修复它并完成这个网站。哦，VPS 正在运行 linux centos 5。我希望有人可以在这里帮助我。这个 red5 rtmp 连接问题让我很生气。我只想知道如何解决这个问题并使其正确连接到 red5 而无需在 flex 中创建 webapp。我应该能够使用 Actionscript3 连接到 red5 然后流式传输实时视频，而不必使用 flex 创建应用程序。我应该说，除了 red5 和我的动作脚本之外，我还需要什么来流式传输实时网络摄像头视频吗？在 cam320.arvixevps.com 上找不到范围 weapps/oflaDemo 的真正含义是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T20:35:02.710

red5 uses port 1935 for rtmp. Port 5080 is for http access (red5 control panel and rtmpt).

# java - 如何使方法识别传递的文本参数是文件名？

> ID：14664643
> 
> 赞同：0
> 
> 时间：2013-02-02T17:46:21.727
> 
> 标签：java, file-io, html-parsing, awt

我创建了两个类，“HtmlParser”用于解析 html 标签和“ConvertToText”类来接受源 html 文件名。HtmlParser 类有一个名为 htmlTextParser(Filename) 的方法。我写

HtmlParser.htmlTextParser(textfieldname.getText());

从 ConvertToText 类调用 HtmlParser 类的语句，这样当我在文本字段中输入 html 文件名时，需要将其传递给 htmlTextParser() 方法。这里的问题是，文本必须被接受为文件名。

我得到的错误是 htmlTextParser(String) 未为类 HtmlParser 定义。请帮助

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-03T03:55:27.470

> htmlTextParser(String) 未为类 HtmlParser 定义

所以它不存在。所以你还没写。所以写吧。但我建议你把它设为 File 参数，而不是 String 参数，这样你就不会这样糊涂了。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-02T17:48:36.287

是的，

`new File(name).isFile()``name`如果存在并且是文件（例如，不是目录），将返回 true

# autohotkey - 如何保持 SplashImage 始终开启？

> ID：14664646
> 
> 赞同：1
> 
> 时间：2013-02-02T17:46:50.987
> 
> 标签：autohotkey

我有使用 AutoHotKey 的以下代码，它将在特定 X 和 Y 坐标的屏幕上显示图像。

但它只会持续 5 秒或我输入多少秒。

有没有办法让它不飞溅？

```
SplashImage, On
SplashImage, C:\Users\unknown\Desktop\9xm.jpg, b X250 Y250 fs30, 35
Sleep, 5000 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-02T18:18:56.477

启动图像应该（将）保持在它被`Off`（可以是另一个）脚本或打开之前，*我认为这可能是您的情况*，当脚本以 eg 关闭时`ExitApp`。

当我按 运行以下代码时`F8`，图像会停留在屏幕顶部，直到我重新启动 AutoHotKey（或通过 关闭它`SplashImage, Off`）。

```
F8::
    SplashImage, C:\Users\Robert\Downloads\dialect.jpg
Return 
```

哦，顺便说一句，即使有你的论点，这个图像仍然保持在顶部，直到我重新启动 AutoHotKey。

# ios - 带有 flex 问题的 facebook 移动应用程序请求对话框

> ID：14664649
> 
> 赞同：0
> 
> 时间：2013-02-02T17:47:09.767
> 
> 标签：ios, facebook, apache-flex

我正在 flex mobile 中创建一个 webviewstage 以显示 facebook 的对话框应用程序请求 url，但是当我在文本输入中写入以自动完成我的朋友时，它永远不会加载任何人......发生了什么......？还有另一种方法可以邀请朋友加入我在 flex mobile 中的应用程序吗？...我正在使用 IOS。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T12:09:48.913

两周前我遇到过类似的问题，但我设法创建了一个原生扩展，这是一个嵌入到你的 flex 项目中的 iOS 库，它显示带有应用请求的 FB 对话框以及你建议的朋友列表，你可以做同样的事情，如果您需要更多帮助，请告诉我。

# ios - 从（到）“挑选”图像获取 URL，iOS

> ID：14664654
> 
> 赞同：1
> 
> 时间：2013-02-02T17:47:25.633
> 
> 标签：ios, url, uiimagepickercontroller

使用下面的代码，我可以从图像中提取元数据（预先添加到我的项目中），并将信息呈现为文本。这正是我想做的。`SYMetadata`是通过 URL 指向图像来创建的。`initWithAbsolutePathURL`. 我想对 UIImage 或者正在加载到 UIImage 的图像做同样的事情。如何获取选择器选择的图像的 URL？或者我如何从这个传入的图像创建一个“资产”？

该文档描述了`initWithAsset`. 不过，还没有弄清楚如何使用它，或者这是否是实现我的目的的正确方法。非常感谢任何帮助。

```
NSURL *imageURL = [[NSBundle mainBundle] URLForResource:@"someImage" withExtension:@"jpg"];
SYMetadata *metadata = [[SYMetadata alloc] initWithAbsolutePathURL:imageURL];
[textView setText:[[metadata allMetadatas] description]]; 
```

**注意**：我尝试`imageURL = [info valueForKey:@"UIImagePickerControllerReferenceURL"];`在“pickerDidFinish”方法中添加这样的 NSURL，但是在我将此 URL 添加到上述代码后元数据为空。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-02T18:19:56.540

如果您使用 imagePickerController，委托方法将为您提供所需的

```
- (void) imagePickerController:(UIImagePickerController *)picker
 didFinishPickingMediaWithInfo:(NSDictionary *)info
{
    if ([[info allKeys] containsObject:UIImagePickerControllerReferenceURL]){
        // you will get this key if your image comes from a library
        [self setMetaDataFromAssetLibrary:info];
    } else if ([[info allKeys] containsObject:UIImagePickerControllerMediaMetadata]){
        // if the image comes from the camera you get the metadata in it's own key
        self.rawMetaData = [self metaDataFromCamera:info];
    }
} 
```

来自资源库 - 请记住，它需要时间来完成并且有一个异步完成块，因此您可能需要添加一个完成标志以确保您在更新之前不会访问该属性。

```
- (void) setMetaDataFromAssetLibrary:(NSDictionary*)info
{
    NSURL *assetURL = [info objectForKey:UIImagePickerControllerReferenceURL];

    ALAssetsLibrary *library = [[ALAssetsLibrary alloc] init];
    [library assetForURL:assetURL
             resultBlock:^(ALAsset *asset)  {
                 self.rawMetaData = asset.defaultRepresentation.metadata;
             }
            failureBlock:^(NSError *error) {
                NSLog (@"error %@",error);
            }];
} 
```

从相机：

```
 - (NSDictionary*)metaDataFromCamera:(NSDictionary*)info
   {
        NSMutableDictionary *imageMetadata = [info objectForKey:UIImagePickerControllerMediaMetadata];
       return imageMetadata;
   } 
```

这是从 UIImage 获取元数据的方法

```
 - (NSDictionary*)metaDataFromImage:(UIImage*)image
   {
        NSData *jpegData = [NSData dataWithData:UIImageJPEGRepresentation(image, 1.0)];
        return [self metaDataFromData:jpegData];
    } 
```

但请注意 - UIImage 已经可以从原始数据中删除大部分元数据。您最好从用于创建 UIImage 的 NSData 获取元数据...

```
 - (NSDictionary*)metaDataFromData:(NSData*)data
{
    CGImageSourceRef source = CGImageSourceCreateWithData((__bridge CFDataRef)data, NULL);
    CFDictionaryRef imageMetaData = CGImageSourceCopyPropertiesAtIndex(source,0,NULL);
    return (__bridge NSDictionary *)(imageMetaData);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-02T17:59:18.900

如果您有 ALAsset（在我的示例 _detailItem 中），您可以通过以下方式获取元数据：

```
NSDictionary *myMetadata = [[_detailItem defaultRepresentation] metadata]; 
```

# android - 如何设置scrollView scrollBy传感器x，y？

> ID：14664659
> 
> 赞同：0
> 
> 时间：2013-02-02T17:47:50.503
> 
> 标签：android, scrollview, accelerometer

我想要 srcollView 通过运动传感器 y、x 滚动。如果我向上倾斜我的设备，它会向上滚动，如果我向下倾斜我的设备，scrollView 会向下滚动。

可能吗？对不起，如果我的问题很愚蠢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-03T06:18:19.620

是的，这是可能的。`ScrollView`有多种滚动方式，`x`运动[传感器教程](http://developer.android.com/guide/topics/sensors/sensors_motion.html)向您展示了如何跟踪用户倾斜设备。不过，您可以将加速度计或重力传感器的输出转换为 x 和 y 输入以进行滚动。`y``z`

# javascript - 停止在 JS 中执行委托功能

> ID：14664661
> 
> 赞同：0
> 
> 时间：2013-02-02T17:48:02.713
> 
> 标签：javascript, jquery, javascript-events

首先，感谢您阅读。
我确实遇到了停止执行函数的问题，我会尝试解释我想要做什么以及我是如何尝试做的。
例如，我在元素上绑定了一些事件`a or button`，我希望用户不会再次单击它，我的意思是他可以单击它，但在一段时间内（比如一秒钟）不会调用所有操作。

所以，这里有一些例子：

在 HTML 中

```
1st example 
<ul>
   <li><a href="some url" class='button'>Click me</a></li>
   <li><a href="some url" class='button'>Click me</a></li>
   <li><a href="some url" class='button'>Click me</a></li>
</ul>

2nd example somewhere else:
<section id='someid'>
   some info
   some articles - doesn't matter
   <button class='button iLoadComments'>Load more comments</button>
</section> 
```

在 JavaScript 中：

```
$("ul").on("click","a.button",function(){
   ... here some code or ajax request, whatever
   return false;
});
$("section").on("click","iLoadComments",function(){
   ... some ajax request
   return false;
}) 
```

我不想让执行它。我想用 1 个函数覆盖所有代码..

所以，我做了什么：全局我定义了新的事件侦听器并将属性添加`disabled`到该元素

```
$("body").on("mousedown", ".button", function(e){
    var $this=$(this);
    if ($this.attr("disabled")) {
        var event = e || window.event;
        if (event.stopPropagation) {
                event.stopPropagation();
        } else {
                event.cancelBubble = true;
        }
        event.preventDefault();
        setTimeout(function () {
           $this.removeAttr("disabled");
        }, 1000); 
        return false;
    }else{
       $this.attr("disabled", true);

    }
}); 
```

但问题是被删除的函数将以任何方式执行（（

有人可以帮忙吗，这是更好的做法吗？或纠正这种方式的方法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-02T17:52:13.183

```
var click_enabled  = true;
$("body").on("click",".button",function(){
   if (click_enabled) {
        click_enabled = false;
        setTimeout(function() {
            click_enabled =  true;
        }, 1000);
   } 
   return false;
});

$("ul").on("click","a.button",function(){
    if (!click_enabled)
        return false;
   //... here some code or ajax request, whatever
});
$("section").on("click",".iLoadComments",function(){
    if (!click_enabled)
        return false;
   //... some ajax request
}); 
```

[http://jsfiddle.net/EAhK4/](http://jsfiddle.net/EAhK4/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-02T17:50:21.900

您可以使用[`.one`](http://api.jquery.com/one/)而不是`.on`. 这样，您的处理程序将只运行一次：

```
$("ul").one("click","a.button",function(){
   //... here some code or ajax request, whatever
   return false;
}); 
```

# json - 尝试访问 JSON 值时收到第 n 个字符

> ID：14664662
> 
> 赞同：1
> 
> 时间：2013-02-02T17:48:02.933
> 
> 标签：json

无法访问由 php 数组形成的 json 值

```
var latlag = '<?php echo json_encode($coordinates); ?>'; 
```

`alert(latlng)`产生：

```
[{
  "1280":{"lat":"-1.197070","lng":"-1.197070"},
  "1239":{"lat":"-1.222410","lng":"-1.222410"},
  "1258":{"lat":"-1.153020","lng":"-1.153020"},
...
}] 
```

我已经尝试了各种方法来访问特定 ID 的 lat 和 lag，除了 undefined 之外的唯一结果是第 n 个字符，`latlng`就好像它被当作字符串一样对待？！

```
alert(latlng[10]); # {
alert(latlng[1280]['lat]); # undefined 
alert(latlng['1280'].lat); # undefined 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-02T17:49:30.380

您不想将 JSON 放在引号中，因此：

```
var latlag = <?php echo json_encode($coordinates); ?>; 
```

*（从技术上讲，这根本不是 JSON，它是一个 JavaScript 对象初始化器。不过没关系，JSON 是初始化器语法的子集，因此所有有效的 JSON 文本也是有效的 JavaScript 初始化器。）*

如果结构确实如您所引用的那样，则它是一个包含**一个**条目的数组，它是一个具有名为`1280`and`1258`的属性的对象，其值是具有名为`lat`and的属性的对象`lng`。所以你会访问这样的：

```
alert(latlng[0]["1280"].lat); 
```

`latlng`是数组，`latlng[0]`是它拥有的一个对象，并且`latlng[0]["1280"]`是`{"lat":"-1.197070","lng":"-1.197070"}`对象。

您可能想知道为什么我在`1280`上面使用引号。这是因为这些键显然是作为字符串给出的（在 JSON 中是必需的，尽管在 JavaScript 初始化程序中不是），所以我不能确定没有像`"0012"`. 即使不写成字符串，属性名称也*始终*`latlng[0][1280]`是字符串，所以and`latlng["0"]["1280"]`都表示相同的意思（因为 the`0`和 the`1280`被转换为字符串 [yes, really]），但自然`latlng[0]["0012"]`不一样，`latlng[0][12]`因为后者使用`"12"`, not `"0012"`, as属性名称。如果你*知道*你不会有前导零，你可以放弃引号。

# android - Android 应用在 Play 商店中显示为不兼容

> ID：14664667
> 
> 赞同：0
> 
> 时间：2013-02-02T17:48:53.603
> 
> 标签：android, google-play, simple-framework

我发布了我的应用程序的新更新。发布后会收到类似“警告：您的活动 APK 支持的设备比之前的 APK 少。某些用户不会获得更新”之类的警告。

所以我比较了当前和以前的 APK 的细节。只有一个区别：新的有附加条目“Native Platform: simple-xml.2.6.9.jar”。

你认为它有问题吗？Acutally 我已经将 .jar 集成到我的 android 项目中。

![应用程序的详细信息](../Images/7ab3bcdde102168d01c3dfdfbe212208.png)

此外，开发人员控制台向我显示该应用程序现在与 0 个设备兼容……如果我搜索某个设备，我会收到通知，这是因为我的清单设置。

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
package="edu.kit.aifb.nukit"
android:versionCode="8"
android:versionName="@string/app_versionName" >

<uses-permission android:name="android.permission.INTERNET" />
<uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" />
<uses-permission android:name="android.permission.VIBRATE"/>

<uses-sdk
    android:minSdkVersion="7" 
    android:targetSdkVersion="17" />

<application
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"
    android:theme="@style/Theme.KIT.Styled"
    android:allowBackup="true" >    

    <activity
        android:name="edu.kit.aifb.nukit.gui.SplashScreenActivity"
        android:label="@string/app_name"
        android:screenOrientation="portrait"
        android:theme="@style/Theme.Sherlock.Light.NoActionBar"
        android:clearTaskOnLaunch="true" >

        <intent-filter>
            <action android:name="android.intent.action.MAIN" />
            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>

    </activity>

    <activity 
        android:name="edu.kit.aifb.nukit.gui.ChooseCourseActivity"
        android:screenOrientation="portrait"></activity>

    <activity 
        android:name="edu.kit.aifb.nukit.gui.QuestioningAndVotingActivity"
        android:screenOrientation="portrait"
        android:windowSoftInputMode="stateHidden"></activity>

    <activity 
        android:name="edu.kit.aifb.nukit.gui.AnswerQuestionActivity"
        android:screenOrientation="portrait"></activity>

    <activity 
        android:name="edu.kit.aifb.nukit.gui.ShowResultsActivity"
        android:screenOrientation="portrait"></activity>

    <activity 
        android:name="edu.kit.aifb.nukit.gui.ImpressumActivity"
        android:screenOrientation="portrait"></activity>

    <activity 
        android:name="edu.kit.aifb.nukit.gui.LicensesActivity"
        android:screenOrientation="portrait"
        android:hardwareAccelerated="false"></activity>

    <activity 
        android:name="edu.kit.aifb.nukit.gui.survey.SurveyListActivity"
        android:screenOrientation="portrait"></activity>

    <activity 
        android:name="edu.kit.aifb.nukit.gui.survey.QuestionActivity"
        android:screenOrientation="portrait"
        android:parentActivityName=".SurveyListActivity" >
        <meta-data
            android:name="android.support.PARENT_ACTIVITY"
            android:value=".SurveyListActivity" />
    </activity>

    <activity 
        android:name="edu.kit.aifb.nukit.gui.survey.SurveyResultsActivity"
        android:label="SurveyResultsActivity"
        android:parentActivityName=".SurveyListActivity">
        <meta-data
            android:name="android.support.PARENT_ACTIVITY"
            android:value=".SurveyListActivity" />
    </activity>

</application> 
```

如果我直接在我的设备上安装 apk，它工作正常。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-02T19:06:40.727

这可能是由于您在 Android 清单中所做的与最大和最小 sdk 版本相关的更改

```
<uses-sdk android:minSdkVersion="integer" 
      android:targetSdkVersion="integer"
      android:maxSdkVersion="integer" /> 
```

如果此 SDK 版本范围已更改，您新更新的应用程序可能支持较少数量的设备。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T13:08:40.953

好吧，我修好了。

问题是实际上只有 SurveyLib.jar 使用的是 simple-xml-2.6.9.jar，而 simplexml.jar 包含在 SurveyLib.jar 中。所以我认为在surveylib.jar 中对simplexml.jar 进行索引存在问题。

我在没有 simplexml.jar 的情况下再次创建了surveylib.jar，但将 simplexml.jar 包含到了我的应用程序的 libs 文件夹中。

现在它工作正常。感谢大家的帮助。

# java - Android OnBootReceiver 崩溃异常 NullPointer

> ID：14664670
> 
> 赞同：1
> 
> 时间：2013-02-02T17:49:20.567
> 
> 标签：java, android, cursor, broadcastreceiver

我的启动接收器不断崩溃：

```
 01-06 03:20:13.861: E/AndroidRuntime(15832): FATAL EXCEPTION: main
01-06 03:20:13.861: E/AndroidRuntime(15832): java.lang.RuntimeException: Unable to start receiver com.example.prva.OnBootReceiver: java.lang.NullPointerException
01-06 03:20:13.861: E/AndroidRuntime(15832):    at android.app.ActivityThread.handleReceiver(ActivityThread.java:2043)
01-06 03:20:13.861: E/AndroidRuntime(15832):    at android.app.ActivityThread.access$2400(ActivityThread.java:132)
01-06 03:20:13.861: E/AndroidRuntime(15832):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1098)
01-06 03:20:13.861: E/AndroidRuntime(15832):    at android.os.Handler.dispatchMessage(Handler.java:99)
01-06 03:20:13.861: E/AndroidRuntime(15832):    at android.os.Looper.loop(Looper.java:143)
01-06 03:20:13.861: E/AndroidRuntime(15832):    at android.app.ActivityThread.main(ActivityThread.java:4277)
01-06 03:20:13.861: E/AndroidRuntime(15832):    at java.lang.reflect.Method.invokeNative(Native Method)
01-06 03:20:13.861: E/AndroidRuntime(15832):    at java.lang.reflect.Method.invoke(Method.java:507)
01-06 03:20:13.861: E/AndroidRuntime(15832):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
01-06 03:20:13.861: E/AndroidRuntime(15832):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
01-06 03:20:13.861: E/AndroidRuntime(15832):    at dalvik.system.NativeStart.main(Native Method)
01-06 03:20:13.861: E/AndroidRuntime(15832): Caused by: java.lang.NullPointerException
01-06 03:20:13.861: E/AndroidRuntime(15832):    at com.example.prva.DatabaseManager.getAllData(DatabaseManager.java:91)
01-06 03:20:13.861: E/AndroidRuntime(15832):    at com.example.prva.OnBootReceiver.onReceive(OnBootReceiver.java:32)
01-06 03:20:13.861: E/AndroidRuntime(15832):    at android.app.ActivityThread.handleReceiver(ActivityThread.java:2028)
01-06 03:20:13.861: E/AndroidRuntime(15832):    ... 10 more 
```

广播接收器：

```
@Override
    public void onReceive(Context context, Intent intent) {
        // TODO Auto-generated method stub
        Calendar c2 = Calendar.getInstance();               
        int hour = c2.get(Calendar.HOUR_OF_DAY);
        int minute = c2.get(Calendar.MINUTE);
        int sek = c2.get(Calendar.SECOND);

        int dan;
        int dodaj;

        milivreme = ((hour * 60 * 60 * 1000)+ (minute * 60 * 1000) + (sek * 1000));

        Cursor cursor = DatabaseManager.getAllData();

        cursor.moveToFirst();
        if (!cursor.isAfterLast())
        {
            do
            {               
        milibaza = cursor.getInt(2);
        razlika = milibaza - milivreme;

        Intent intent1 = new Intent(context, AlarmReceiver.class);
        PendingIntent pendingintent = PendingIntent.getService(context, 3, intent1, PendingIntent.FLAG_CANCEL_CURRENT);
        AlarmManager am = (AlarmManager) context.getSystemService(context.ALARM_SERVICE);

        am.set(AlarmManager.RTC_WAKEUP, System.currentTimeMillis() + razlika, pendingintent);
            }
            while (cursor.moveToNext());
        }
        cursor.close(); 
    } 
```

getAllData 方法：

```
public static Cursor getAllData() {

        return db.query(TABLE_NAME, new String[] { TABLE_COLUMN_ID, TABLE_COLUMN_ONE, TABLE_COLUMN_TWO }, 
                null, null, null, null, null);       

    } 
```

数据库有记录：

我有一个按钮，它在 textview 中显示数据库中的最后一个值：

```
public void onClick(View v) {
                // TODO Auto-generated method stub
                String BazaDan;
                int BazaVrijeme;
                DatabaseManager.Cursoric();

                BazaDan = DatabaseManager.getDan();
                BazaVrijeme = DatabaseManager.getVrijeme();
                textbaza.setText(new StringBuilder(BazaDan).append(", ").append(BazaVrijeme).toString());
            }
        }); 
```

该按钮正在使用的光标方法：

```
public static void Cursoric(){

        Cursor cursor;
        cursor = db.query
                (
                        TABLE_NAME,
                        new String[] { TABLE_COLUMN_ID, TABLE_COLUMN_ONE, TABLE_COLUMN_TWO },                       
                        null, null, null, null, null
                );
        cursor.moveToFirst();
        if (!cursor.isAfterLast())
        {
            do
            {
                BazaDan = cursor.getString(1);
                BazaVrijeme = cursor.getInt(2);
            }
            while (cursor.moveToNext());
        }    

        cursor.close(); 
    } 
```

如您所见，它与我在 BroadcastReceiver 中使用的几乎相同。该按钮单击后的文本视图从数据库中显示（我上次测试）：

```
1, 12120000 
```

它的天数和毫秒。

因此记录被存储在数据库中，并且可以检索它们，但是 OnBootReceiver 在启动时不断收到空指针异常，而他用光标和那个按钮做几乎相同的事情。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-02T19:06:34.127

首先，我会将您的所有代码移至另一个程序 -**广播接收器最多运行 10 秒（当前）然后终止**！[有关更多信息，请参阅此](https://stackoverflow.com/questions/7460284/broadcastreceiver-vs-service)。 [而这](https://developer.android.com/reference/android/content/BroadcastReceiver.html)。任何未处理的代码都将保持不变。在执行数据库操作时理解这一点尤其重要。

您的空指针异常可能是您的光标，但您需要测试以确定什么是空的。在进行无法完成或引发错误的调用时（例如数据库操作），您可能还希望将代码包装在错误陷阱中。

只是一些建议可以帮助您解决问题并使代码更稳定。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-02T19:17:17.797

如日志：

> 引起：java.lang.NullPointerException

因为 db 实例在`getAllData`方法内部为空，所以在将其用作之前进行空检查：

```
public static Cursor getAllData()
{
       Cursor cursor=null;
    if(db!=null)
    {
      cursor=db.query(TABLE_NAME, new String[] 
              { TABLE_COLUMN_ID, TABLE_COLUMN_ONE, 
              TABLE_COLUMN_TWO }, null,
               null, null, null, null);
    }

return cursor;
} 
```

并且在使用它之前检查游标是否为`onReceive`NULL`BroadcastReceiver`

# php - PHP - 连接对象类名

> ID：14664671
> 
> 赞同：5
> 
> 时间：2013-02-02T17:49:22.323
> 
> 标签：php, concatenation

是否可以连接对象的名称？下面的好像不行。。

试图调用 $node->field_presenter_en;

```
$lang = 'en';

$node->field_presenter_.$lang;

${$node->field_presenter_.$lang}; 
```

谢谢！

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-02-02T17:51:06.147

尝试：

```
$field_presenter = 'field_presenter_'.$lang;
$node->$field_presenter; 
```

这称为可变变量。更多信息在这里： http: [//php.net/manual/en/language.variables.variable.php](http://php.net/manual/en/language.variables.variable.php)

编辑：用户 nickb 在下面提出了一个更优雅的解决方案，我将把它合并到这个答案中以便于阅读（nickb：如果你想让我删除它，请告诉我）：

```
$node->{'field_presenter_'.$lang} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-02T17:53:19.797

```
$field_presenter = 'field_presenter_'.$lang;
$node->$field_presenter; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-02T17:53:26.737

```
<?php
class A {
    public $prop = 'hello';
}

$a = new A();
echo $a->{'pro' . 'p'}; // hello 
```

# mongodb - RESTful API 相关对象和非规范化 (MongoDB)

> ID：14664674
> 
> 赞同：1
> 
> 时间：2013-02-02T17:49:44.763
> 
> 标签：mongodb, rest, database-design, architecture, denormalization

我正在使用 node.js 和 MongoDB 构建一个 RESTful Web 应用程序。

我有一个**人模型**

```
Person
  id:         '12345'
  name:       'John'
  likes:      [ {id: '54321', name: 'Mary'} ]
  isLikeydBy: []

Person
  id:         '54321'
  name:       'Mary'
  likes:      []
  isLikeydBy: [ {id: '12345', name: 'John'} ] 
```

**模拟“喜欢”和“isLikedBy”关系的最佳方式是什么？**由于我使用的是 MongoDB，我认为这是对关系建模的好方法，因为只需一次访问数据库即可获取有关一个人的所有数据。

**如何为这种关系创建一个 REST api？**如果“约翰”不再喜欢“玛丽”怎么办。服务器只接收到下面的 put 请求。

```
 Person
  id:         '12345'
  name:       'John'
  likes:      []
  isLikeydBy: [] 
```

但是服务器也应该更新“玛丽”，因为现在她不再被“约翰”喜欢了。（我知道 MongoDB 不直接支持事务，我必须自己实现它们。）

**我的想法：**

**1.**每次更新 Person（它的 'likes' 和 'isLikedBy' 字段）时，从数据库中获取此人并将他们的 'likes' 和 'isLikedBy' 字段与请求进行比较。这种方法有一些开销，而且我不知道它是否符合 RESTful API 的精神。

**2.**让客户端发送原始的 'likes' 和 'isLikedBy' 字段以及新更新的字段（或仅发送 diff）。这似乎与 RESTful 设计相去甚远，因为客户端现在必须知道哪些数据最后一次成功保存到服务器。

**3.**创建一个包含关系信息的单独对象（3 个字段：id、me、whoILike）。但这意味着每次我想要获取有关某人的数据时，我都需要 2 个查询，一个用于该人，一个用于关系，然后将数据组合成一个对象。

我应该怎么办？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-03T04:33:55.737

在我的公司使用 Mongo 和跟踪点赞时，我们也遇到过同样的问题。

经过多次讨论，我们决定将点赞数与实体一起存储——在这种情况下，将点赞数与人一起存储。

对您的选择的意见：

1.  进行额外查询的开销可能是个坏主意。特别是因为“喜欢”的东西被用户视为轻量级操作。换句话说，您可能会发现用户喜欢大量的东西，这意味着大量的写入——在这种情况下，每次写入都会附带一两次额外的读取。

2.  这是开发人员要做的大量工作，而且很容易出错。

3.  我觉得没关系，但我还是更喜欢和这个人一起存储喜欢的东西。Mongo 不像你提到的那样擅长加入。

我认为您应该将喜欢/喜欢的字段与个人文档一起存储。我唯一要改变的是正在进行的 REST 调用。

也许是这样的：

`PUT [http://www.rest.com/person/123/likes/456](http://www.rest.com/person/123/likes/456)`

这会说“人 123 喜欢 456”。然后您的 REST 调用确保数据已更新。它将更新 Person 123 对象*和*Person 456 对象。

删除类似的东西：

`DELETE [http://www.rest.com/person/123/likes/456](http://www.rest.com/person/123/likes/456)`

请记住，每次有人进行 REST 调用时，更新不必更新整个文档。您可以使用修改后的喜欢对 Person 文档进行部分更新。您还可以轻松地在文档中添加/删除数组。

# azure - 无法加载程序集 - 部署到 Azure - Microsoft.Activities.Extensions

> ID：14664676
> 
> 赞同：0
> 
> 时间：2013-02-02T17:49:54.067
> 
> 标签：azure, workflow-foundation-4, assembly-resolution

我的解决方案中有一个工作流项目，它引用了 Microsoft.Activies.Extensions.dll 2.0.2.16

我使用 NuGet 包管理器升级到当前版本 2.0.6.9

将引用工作流项目 .dll 的 Web 角色部署到云中，我得到：

```
 Could not load file or assembly 'Microsoft.Activities.Extensions, PublicKeyToken=23b0c89d0d5ad43f' or one of its dependencies. The system cannot find the file specified. 
```

我远程桌面到 VM 并检查`F:/approot/bin`以查看*没有部署任何*版本的程序集。

由于这是一个 NuGet 包，我可以在我的`<Solution root>/Packages folder`. 我看到了 NuGet 创建的新文件夹，但也看到了旧版本的文件夹，尽管程序集不在里面。我删除了该文件夹并在我的 web.config 中放置了一个程序集重定向：

```
<dependentAssembly>
    <assemblyIdentity name="Microsoft.Activities.Extensions" publicKeyToken="23b0c89d0d5ad43f" />
    <bindingRedirect oldVersion="2.0.2.12" newVersion="2.0.6.9" />
  </dependentAssembly> 
```

通过 Publish 进行清理、构建、重新部署。

错误仍然存​​在，再次挖掘 approot/bin 显示该程序集仍未部署。

当然，我将 Copy Local 设置为 true。

为什么没有部署？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T18:15:18.853

好的，从找到这篇文章解决：

[http://weblogs.asp.net/albertpascual/archive/2008/12/16/the-cloud-for-a-fast-deployment-of-proof-of-concepts.aspx](http://weblogs.asp.net/albertpascual/archive/2008/12/16/the-cloud-for-a-fast-deployment-of-proof-of-concepts.aspx)

结果表明，当 Web 角色引用程序集而不是引用其他程序集时，即使 Copy Local = true，也不会部署这些程序集。

解决方案是直接在 web-role 项目中引用这些子依赖项，并将 Copy Local 设置为 true。

只有这样，它们才会在部署时出现在我的 approot/bin 中。

# java - 简单的菜鸟应用程序每次都会崩溃..（空）？

> ID：14664678
> 
> 赞同：0
> 
> 时间：2013-02-02T17:49:58.877
> 
> 标签：java, android

我觉得

```
Button bTutorial1 = (Button) findViewById(R.layout.tutorial1);
    bTutorial1.setOnClickListener(new View.OnClickListener() { 
```

等于“空”。

（我在某处读过它，但没有看到修复它）

如果这不是问题请我不知道..

谢谢我能得到的任何帮助。

真诚的，罗宾

**活动主代码：**

```
 <RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    tools:context=".MainActivity" >

    <ImageView
        android:id="@+id/imageView1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentTop="true"
        android:layout_centerHorizontal="true"
        android:src="@drawable/ic_launcher" />

    <Button
        android:id="@+id/gotoKanal2"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_above="@+id/gotoKanal3"
        android:layout_alignParentLeft="true"
        android:layout_marginBottom="14dp"
        android:text="@string/tv_2" />

    <Button
        android:id="@+id/gotoKanal3"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_above="@+id/tutorial1"
        android:layout_alignParentLeft="true"
        android:layout_marginBottom="14dp"
        android:text="@string/tv_3" />

    <Button
        android:id="@+id/tutorial1"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_above="@+id/tutorial2"
        android:layout_alignParentLeft="true"
        android:layout_marginBottom="14dp"
        android:text="TUTORIALONE" />

    <Button
        android:id="@+id/tutorial2"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_above="@+id/gotoKanal6"
        android:layout_alignParentLeft="true"
        android:layout_marginBottom="14dp"
        android:text="-||- 2" />

    <Button
        android:id="@+id/gotoKanal6"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_alignParentBottom="true"
        android:layout_alignParentLeft="true"
        android:layout_marginBottom="14dp"
        android:text="@string/tv_6" />

    <Button
        android:id="@+id/gotoKanal1"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_above="@+id/gotoKanal2"
        android:layout_alignParentLeft="true"
        android:layout_marginBottom="14dp"
        android:text="@string/tv_1" />

</RelativeLayout> 
```

**mainifest 代码：**忽略所有 .tv

```
 <?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.Robin.Robin"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk
        android:minSdkVersion="8"
        android:targetSdkVersion="17" />

    <application
        android:allowBackup="true"
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:theme="@android:style/Theme.NoTitleBar.Fullscreen" >
        <activity
            android:name="com.Robin.Robin.MainActivity"
            android:label="@string/app_name"
            android:theme="@android:style/Theme.NoTitleBar" >
            <intent-filter >
                <action android:name="android.intent.action.MAIN"/>
                <category android:name="android.intent.category.LAUNCHER"/>
            </intent-filter>
        </activity>
         <activity
            android:name="myMenu"
            android:label="@string/app_name"
            android:theme="@android:style/Theme.Black.NoTitleBar" >
            <intent-filter >
                <action android:name="com.Robin.Robin.CLEARSCREEN"/>
                <category android:name="android.intent.category.DEFAULT"/>
            </intent-filter>
        </activity>
          <activity
            android:name=".tutorialOne"
            android:label="@string/app_name"
            android:theme="@android:style/Theme.Black.NoTitleBar" >
            <intent-filter >
                <action android:name="com.Robin.Robin.TUTORIALONE"/>
                <category android:name="android.intent.category.DEFAULT"/>
            </intent-filter>
        </activity>
        <activity
            android:name=".tv2"
            android:label="@string/app_name"
            android:theme="@android:style/Theme.Black.NoTitleBar" >
            <intent-filter >
                <action android:name="com.Robin.Robin.tv2"/>
                <category android:name="android.intent.category.DEFAULT"/>
            </intent-filter>
        </activity>
        <activity
            android:name=".tv3"
            android:label="@string/app_name"
            android:theme="@android:style/Theme.Black.NoTitleBar" >
            <intent-filter >
                <action android:name="com.Robin.Robin.tv3"/>
                <category android:name="android.intent.category.DEFAULT"/>
            </intent-filter>
        </activity>
        <activity
            android:name="com.Robin.Robin.tv4"
            android:label="@string/app_name"
            android:theme="@android:style/Theme.Black.NoTitleBar" >
            <intent-filter >
                <action android:name="com.Robin.Robin.tv4"/>
                <category android:name="android.intent.category.DEFAULT"/>
            </intent-filter>
        </activity>
        <activity
            android:name=".tv5"
            android:label="@string/app_name"
            android:theme="@android:style/Theme.Black.NoTitleBar" >
            <intent-filter >
                <action android:name="com.Robin.Robin.tv5"/>
                <category android:name="android.intent.category.DEFAULT"/>
            </intent-filter>
        </activity>
        <activity
            android:name=".tv6"
            android:label="@string/app_name"
            android:theme="@android:style/Theme.Black.NoTitleBar" >
            <intent-filter >
                <action android:name="com.Robin.Robin.tv6"/>
                <category android:name="android.intent.category.DEFAULT"/>
            </intent-filter>
        </activity>
    </application>

</manifest> 
```

**飞溅代码：**

```
 <?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >

    <ImageView
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:src="@drawable/default_320x480" />

</LinearLayout> 
```

**myMeny.java 代码：**

```
 package com.Robin.Robin;

    import android.app.Activity;
    import android.content.Intent;
    import android.os.Bundle;
    import android.view.View;
    import android.widget.Button;

    public class myMenu extends Activity{

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        Button bTutorial1 = (Button) findViewById(R.layout.tutorial1);
        bTutorial1.setOnClickListener(new View.OnClickListener() {

            @Override
            public void onClick(View v) {
                // TODO Auto-generated method stub
                startActivity(new Intent("com.Robin.Robin.TUTORIALONE"));
            }
        });

            Button bgotoKanal4 = (Button) findViewById(R.id.gotoKanal4);
            bgotoKanal4.setOnClickListener( new View.OnClickListener() {

                @Override
                public void onClick(View v) {
                    // TODO Auto-generated method stub
                    startActivity (new Intent ("package com.Robin.Robin.tv4"));

                    Button bgotoKanal2 = (Button) findViewById(R.id.gotoKanal2);
                    bgotoKanal2.setOnClickListener( new View.OnClickListener() {

                        @Override
                        public void onClick(View v) {
                            // TODO Auto-generated method stub
                            startActivity (new Intent ("package com.Robin.Robin.tv2"));

                            Button bgotoKanal3 = (Button) findViewById(R.id.gotoKanal3);
                            bgotoKanal3.setOnClickListener( new View.OnClickListener() {

                                @Override
                                public void onClick(View v) {
                                    // TODO Auto-generated method stub
                                    startActivity (new Intent ("package com.Robin.Robin.tv3"));

                                    Button bgotoKanal1 = (Button) findViewById(R.id.gotoKanal1);
                                    bgotoKanal1.setOnClickListener( new View.OnClickListener() {

                                        @Override
                                        public void onClick(View v) {
                                            // TODO Auto-generated method stub
                                            startActivity (new Intent ("package com.Robin.Robin.tv1"));

                                            Button bgotoKanal5 = (Button) findViewById(R.id.gotoKanal5);
                                            bgotoKanal5.setOnClickListener( new View.OnClickListener() {

                                                @Override
                                                public void onClick(View v) {
                                                     TODO Auto-generated method stub
                                                    startActivity (new Intent ("package com.Robin.Robin.tv5"));

                                                    Button bgotoKanal6 = (Button) findViewById(R.id.gotoKanal6);
                                                    bgotoKanal6.setOnClickListener( new View.OnClickListener() {

                                                        @Override
                                                        public void onClick(View v) {
                                                            // TODO Auto-generated method stub
                                                            startActivity (new Intent ("package com.Robin.Robin.tv6"));

                                                        }
                                                    } );
                                                }
                                            } );
                                        }
                                    } );
                                }
                            } );
                        }
                    } );
                }
            } );

        }

    } 
```

**主要活动代码：**

```
package com.Robin.Robin;

import android.content.Intent;
import android.media.MediaPlayer;
import android.os.Bundle;
import android.app.Activity;

public class MainActivity extends Activity {

MediaPlayer mpSplash;

@Override
protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);
    setContentView(R.layout.splash);

    mpSplash = MediaPlayer.create(this, R.raw.javaintro);
    mpSplash.start();

    Thread logoTimer = new Thread(){
        public void run(){
            try{
                int logoTimer = 0;
                while(logoTimer < 5000){
                    sleep(100);
                    logoTimer = logoTimer + 100;
                }
                startActivity(new Intent("com.Robin.Robin.CLEARSCREEN"));
            }
            catch (InterruptedException e){
                e.printStackTrace();
            }
            finally{
                finish();
            }
        }

    };
    logoTimer.start();
}

@Override
protected void onDestroy() {
    // TODO Auto-generated method stub
    super.onDestroy();
    mpSplash.release();
}

@Override
protected void onPause() {
    // TODO Auto-generated method stub
    super.onPause();
    mpSplash.pause();
}

@Override
protected void onResume() {
    // TODO Auto-generated method stub
    super.onResume();
    mpSplash.start();
}

@Override
protected void onStart() {
    // TODO Auto-generated method stub
    super.onStart();
}

@Override
protected void onStop() {
    // TODO Auto-generated method stub
    super.onStop();
}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-02T17:52:02.370

```
Button bTutorial1 = (Button) findViewById(R.layout.tutorial1); 
```

应该

```
Button bTutorial1 = (Button) findViewById(R.id.tutorial1); 
```

因为您在 xml 中的 Button 被定义为

```
 <Button
        android:id="@+id/tutorial1"
        android:layout_width="match_parent"
        ... 
```

将在 中定义哪个`R.id`，因此，您将其检索为`R.id.tutorial1`
**除了**问题之外，您是否忘记关闭 OnClickListener？

```
bgotoKanal2.setOnClickListener( new View.OnClickListener() {

                        @Override
                        public void onClick(View v) {
                            // TODO Auto-generated method stub
                            startActivity (new Intent ("package com.Robin.Robin.tv2"));
                      });//closes the listener, add it to each one. 
```

# ios - 按钮上的 iOS alertview 操作

> ID：14664679
> 
> 赞同：2
> 
> 时间：2013-02-02T17:50:01.097
> 
> 标签：ios, xcode, alertview

我在菜单中有一个按钮，当触摸它时，会弹出一条带有两个按钮的警报消息：“ `Cancel`”和“ `Yes`”。这是我的警报代码：

```
UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"Exit game"
                                                message:@"Are you sure?"
                                               delegate:nil
                                      cancelButtonTitle:@"Cancel"
                                      otherButtonTitles:@"Yes", nil];
[alert show]; 
```

是否可以向按钮“ `Yes`”添加操作？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-02T18:04:33.360

在您的代码中设置 UIAlertView 委托：

```
UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"Exit game" message:@"Are you sure?" delegate:self cancelButtonTitle:@"Cancel" otherButtonTitles:@"Yes", nil]; [alert show]; 
```

由于您已将委托设置为 self，请在同一类中编写委托函数，如下所示：

```
- (void)alertView:(UIAlertView *)alertView clickedButtonAtIndex:(NSInteger)buttonIndex{
if (buttonIndex == 1) { // Set buttonIndex == 0 to handel "Ok"/"Yes" button response
    // Cancel button response
    }} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-02T17:54:46.117

您需要实施`UIAlertViewDelegate`

并添加以下...

```
- (void)alertView:(UIAlertView *)alertView didDismissWithButtonIndex:(NSInteger)buttonIndex {
    if (buttonIndex == 1) {
        // do stuff
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-02T18:00:36.767

是的，这很容易。看到您现在设置为 nil 的名为“delegate”的参数了吗？将其设置为一个对象......如果您从视图控制器调用它，通常是“self”，然后为 UIAlertViewDelegate 实现选择器。

您还需要声明您的视图控制器符合 UIAlertViewDelegate 协议。这样做的好地方是在视图控制器的“私有”延续类中。

```
@interface MyViewController() <UIAlertViewDelegate>
@end

- (void)alertView:(UIAlertView *)alertView clickedButtonAtIndex:(NSInteger)buttonIndex
{
   NSLog(@"Button pushed: %d", buttonIndex);
} 
```

# java - Java 2D数组从A点到B点的最短路径有障碍物

> ID：14664680
> 
> 赞同：0
> 
> 时间：2013-02-02T17:50:12.700
> 
> 标签：java, arrays, path, dijkstra, shortest

目标：找到到达目的地所需的最少移动量。

场景：在 2D Array 8*8 中，包含以下元素：

```
*......B
........
****.**.
.A....*.
........
....**..
........
....*... 
```

在哪里

*   “A”代表起点。
*   “B”代表目的地点。
*   “*”表示障碍物。
*   “.”代表一个空单元格。

目前我已经完成了以下代码：

```
import java.io.BufferedReader;
import java.io.DataInputStream;
import java.io.FileInputStream;
import java.io.FileNotFoundException;
import java.io.IOException;
import java.io.InputStreamReader;

class main
{
    public static void main(String args[]) throws FileNotFoundException,IOException
    {   
        FileInputStream FS = new FileInputStream("path.in");
        DataInputStream DS = new DataInputStream(FS);
        BufferedReader buffer = new BufferedReader(new InputStreamReader(DS));

        String strLine = buffer.readLine();             
        int testCase = Integer.parseInt(strLine);

        int R,C;

        for(int i = 0;i < testCase;i++)
        {           

            strLine = buffer.readLine();                    
            String input[] = strLine.split(" ");

            R = Integer.parseInt(input[0]);
            C = Integer.parseInt(input[1]);

            char[][] array = new char[R][C];

            int sCoordX = 0;
            int sCoordY = 0;
            int eCoordX = 0;
            int eCoordY = 0;

            for(int j = 0; j < R ; j++)
            {
                strLine = buffer.readLine();        

                for(int k = 0;k < C;k++)
                {                               
                    array[j][k] = strLine.charAt(k);
                    if(array[j][k] == 'A')
                    {
                        sCoordX = j;
                        sCoordY = k;
                    }

                    if(array[j][k] == 'B')
                    {
                        eCoordX = j;
                        eCoordY = k;
                    }
                }   
            }

            boolean reached = false;
            int counter = 0;
            int posX = sCoordX;
            int posY = sCoordY;
            while(!reached)
            {
                if(array[posX][posY] == 'B')
                {
                    reached = true;
                    System.out.println("You are in goal!");
                    System.out.println(array[posX][posY]);
                    System.out.println("Number of steps:"+counter);
                }

                if(!reached && posX > eCoordX)
                {
                        posX--;
                        counter++;                  
                }
                else if(!reached && posX < eCoordX)
                {
                    posX++;
                    counter++;                  
                }

                if(!reached && posY > eCoordY)
                {
                    posY--;
                    counter++;          
                }
                else if(!reached && posY < eCoordY)
                {
                    posY++;
                    counter++;              
                }
            }
        }   
    }
} 
```

它的工作是找到到达目的地所需的“最短”步数，但是它将任何/障碍视为可以移动到的空单元。

我目前无法找到一种方法来对其进行编码，使其能够识别下一个动作的正确决定。

我正在考虑使用数组列表和一些算法，但是我尝试阅读一些算法，例如[Dijkstra 的算法](http://en.wikipedia.org/wiki/Dijkstra%27s_algorithm)，但它看起来真的很混乱，有人可以帮助我以一种非常简单的方式理解它以在 java 中实现它吗？

//-(对不起我的编码技能，我还是个初学者)-

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-02T18:07:15.667

您不需要任何特殊算法来完成此任务，只需要在图中进行广度优先搜索。将一步可到达的点视为图形的第一级，将两步可到达的点（这些点连接到任何第一级点，但不连接到源点）作为第二级，等等。

先访问源点直接可达的点，再访问二级点，再访问三级点。您可以通过将节点存储在列表中来实现此目的。首先，您访问源，并将相邻节点推送到列表的末尾。然后您访问列表中的每个节点，并将它们的相邻节点推到列表的末尾，如果它们到目前为止不在列表中。一旦你到达目标节点，你就完成了。您可以存储每个节点的级别，也可以存储前一个节点，这样您就可以找到从目标节点向后的路径。

需要注意的一件重要事情：不要在您的列表中添加障碍物，这样就不会有路线穿过该点。

# java - 设置属性时出现 NullPointException 错误

> ID：14664683
> 
> 赞同：0
> 
> 时间：2013-02-02T17:50:19.207
> 
> 标签：java, exception-handling, nullpointerexception

我在以下代码的**`lblNewLabel.setVisible(false);`** 第 65 行调用了第 77 行的 NullPointerException 错误。**`runTest();`**（这是我写的一个虚拟项目来模拟我在一个更大的项目中遇到的问题）。我要做的是根据项目中各个位置的用户操作来更改几个字段、按钮等的属性。我想将所有更改分组到一个单独的方法中，该方法可以从各种其他方法中调用。我仍然是 Java 新手，具有一些 Visual Basic 和 Pascal 经验。似乎我想做的事情应该是直截了当的，但现在，我不知所措。提前感谢您的建议。

```
package woodruff;

import java.awt.EventQueue;
import javax.swing.JFrame;
import javax.swing.JPanel;
import javax.swing.border.EmptyBorder;
import javax.swing.JLabel;
import javax.swing.JButton;
import javax.swing.SwingConstants;
import java.awt.event.ActionListener;
import java.awt.event.ActionEvent;
import javax.swing.JTextField;
import java.awt.event.FocusAdapter;
import java.awt.event.FocusEvent;

public class MyTest extends JFrame {

    private JPanel contentPane;
    private JTextField txtHasFocus;
    private JLabel lblNewLabel;

    /**
     * Create the frame.
     */
    public MyTest() {
        initialize();
    }

    private void initialize() {
        setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        setBounds(100, 100, 237, 161);
        contentPane = new JPanel();
        contentPane.setBorder(new EmptyBorder(5, 5, 5, 5));
        setContentPane(contentPane);
        contentPane.setLayout(null);
        final JLabel lblNewLabel = new JLabel("This is a label.");
        lblNewLabel.setHorizontalAlignment(SwingConstants.CENTER);
        lblNewLabel.setHorizontalTextPosition(SwingConstants.CENTER);
        lblNewLabel.setBounds(10, 25, 202, 14);
        contentPane.add(lblNewLabel);

        JButton btnShow = new JButton("Show");
        btnShow.addActionListener(new ActionListener() {
            public void actionPerformed(ActionEvent arg0) {
                lblNewLabel.setVisible(true);
            }
        });
        btnShow.setBounds(10, 50, 89, 23);
        contentPane.add(btnShow);

        JButton btnHide = new JButton("Hide");
        btnHide.addActionListener(new ActionListener() {
            public void actionPerformed(ActionEvent e) {
                lblNewLabel.setVisible(false);
            }
        });
        btnHide.setBounds(123, 50, 89, 23);
        contentPane.add(btnHide);

        txtHasFocus = new JTextField();
        txtHasFocus.addFocusListener(new FocusAdapter() {
            @Override
            public void focusGained(FocusEvent arg0) {
                // Following results in NullPointerException error
                // at woodruff.MyTest.runTest(MyTest.java:77)
                runTest();
            }
        });
        txtHasFocus.setHorizontalAlignment(SwingConstants.CENTER);
        txtHasFocus.setText("Has Focus?");
        txtHasFocus.setBounds(67, 92, 86, 20);
        contentPane.add(txtHasFocus);
        txtHasFocus.setColumns(10);
    }

    private void runTest() {
        lblNewLabel.setVisible(false);
    }

    /**
     * Launch the application.
     */
    public static void main(String[] args) {
        EventQueue.invokeLater(new Runnable() {
            public void run() {
                try {
                    MyTest frame = new MyTest();
                    frame.setVisible(true);
                } catch (Exception e) {
                    e.printStackTrace();
                }
            }
        });
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-02T17:51:47.243

在该`initialize()`方法中，您为 创建了一个`local`变量`JLabel`，因此没有初始化`instance field`，这是它保持初始化为 的原因`null`，因此是`NPE`。

```
final JLabel lblNewLabel = new JLabel("This is a label."); 
```

将上面的行更改为： -

```
lblNewLabel = new JLabel("This is a label."); 
```

# javascript - 谷歌将圆映射到折线坐标数组

> ID：14664685
> 
> 赞同：4
> 
> 时间：2013-02-02T17:50:22.453
> 
> 标签：javascript, google-maps, geometry, polyline

如何从`google.maps.Circle`对象中获取折线坐标数组

![在此处输入图像描述](../Images/960b5b24f0132c24abd7e6b423ae144c.png)

没有关于此的 api 文档条目

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-02-02T17:58:39.800

google.maps.Circle 不包含坐标数组。如果您想要一个形状像圆形的 google.maps.Polygon，您需要制作一个。

```
function drawCircle(point, radius, dir) { 
  var d2r = Math.PI / 180;   // degrees to radians 
  var r2d = 180 / Math.PI;   // radians to degrees 
  var earthsradius = 3963; // 3963 is the radius of the earth in miles

  var points = 32; 

  // find the raidus in lat/lon 
  var rlat = (radius / earthsradius) * r2d; 
  var rlng = rlat / Math.cos(point.lat() * d2r); 

  var extp = new Array(); 
  if (dir==1) {
     var start=0;
     var end=points+1; // one extra here makes sure we connect the path
  } else {
     var start=points+1;
     var end=0;
  }
  for (var i=start; (dir==1 ? i < end : i > end); i=i+dir)  
  { 
     var theta = Math.PI * (i / (points/2)); 
     ey = point.lng() + (rlng * Math.cos(theta)); // center a + radius x * cos(theta) 
     ex = point.lat() + (rlat * Math.sin(theta)); // center b + radius y * sin(theta) 
     extp.push(new google.maps.LatLng(ex, ey)); 
  } 
  return extp;
}

var circle = new google.maps.Polygon({
               map: map,
               paths: [drawCircle(new google.maps.LatLng(-33.9,151.2), 100, 1)],
               strokeColor: "#0000FF",
               strokeOpacity: 0.8,
               strokeWeight: 2,
               fillColor: "#FF0000",
               fillOpacity: 0.35
}); 
```

[例子](http://www.geocodezip.com/v3_polygon_example_donut.html)

**代码片段：**

```
function drawCircle(point, radius, dir) {
  var d2r = Math.PI / 180; // degrees to radians 
  var r2d = 180 / Math.PI; // radians to degrees 
  var earthsradius = 3963; // 3963 is the radius of the earth in miles

  var points = 32;

  // find the raidus in lat/lon 
  var rlat = (radius / earthsradius) * r2d;
  var rlng = rlat / Math.cos(point.lat() * d2r);

  var extp = new Array();
  if (dir == 1) {
    var start = 0;
    var end = points + 1
  } // one extra here makes sure we connect the
  else {
    var start = points + 1;
    var end = 0
  }
  for (var i = start;
    (dir == 1 ? i < end : i > end); i = i + dir) {
    var theta = Math.PI * (i / (points / 2));
    ey = point.lng() + (rlng * Math.cos(theta)); // center a + radius x * cos(theta) 
    ex = point.lat() + (rlat * Math.sin(theta)); // center b + radius y * sin(theta) 
    extp.push(new google.maps.LatLng(ex, ey));
    bounds.extend(extp[extp.length - 1]);
  }
  // alert(extp.length);
  return extp;
}

var map = null;
var bounds = null;

function initialize() {
  var myOptions = {
    zoom: 10,
    center: new google.maps.LatLng(-33.9, 151.2),
    mapTypeControl: true,
    mapTypeControlOptions: {
      style: google.maps.MapTypeControlStyle.DROPDOWN_MENU
    },
    navigationControl: true,
    mapTypeId: google.maps.MapTypeId.ROADMAP
  }
  map = new google.maps.Map(document.getElementById("map_canvas"),
    myOptions);

  bounds = new google.maps.LatLngBounds();

  var donut = new google.maps.Polygon({
    paths: [drawCircle(new google.maps.LatLng(-33.9, 151.2), 100, 1),
      drawCircle(new google.maps.LatLng(-33.9, 151.2), 50, -1)
    ],
    strokeColor: "#0000FF",
    strokeOpacity: 0.8,
    strokeWeight: 2,
    fillColor: "#FF0000",
    fillOpacity: 0.35
  });
  donut.setMap(map);

  map.fitBounds(bounds);
}
google.maps.event.addDomListener(window, 'load', initialize);
```

```
html,
body,
#map_canvas {
  width: 100%;
  height: 100%;
  padding: 0px;
  margin: 0px;
}
```

```
<script src="https://maps.google.com/maps/api/js?key=AIzaSyCkUOdZ5y7hMm0yrcCQoCvLwzdM6M8s5qk"></script>
<div id="map_canvas"></div>
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2021-05-28T00:04:24.387

我在自动完成中实现了这个，但是，无法理解：var points = 32; 如何计算这个变量？

```
createAutocomplete() {
    var drawer = this.drawCircle;
    var MAPS = window.Heatmap.Maps;
    const center = MAPS.map.center;
    const defaultBounds = {
        north: center.lat + 0.1,
        south: center.lat - 0.1,
        east: center.lng + 0.1,
        west: center.lng - 0.1,
    };
    let input = document.getElementById("search");
    const options = {
        bounds: defaultBounds,
        componentRestrictions: {country: "us"},
        fields: ["address_components", "geometry", "icon", "name"],
        origin: MAPS.map.center,
        strictBounds: false,
        types: ['(cities)'],
    };
    MAPS.autocomplete = new google.maps.places.Autocomplete(input, options);
    google.maps.event.addListener(MAPS.autocomplete, 'place_changed', function () {
        const selectedIndex = document.getElementById("distance").selectedIndex;
        let distance = document.getElementsByTagName("option")[selectedIndex].value;
        if (MAPS.circle.instance) {
            MAPS.circle.instance.setMap(null);
            MAPS.marker.collection['searchMarker'].setMap(null);
        }

        let place = MAPS.autocomplete.getPlace();
        var center = {lat: place.geometry.location.lat(), lng: place.geometry.location.lng()};
        MAPS.map.instance.panTo(center);
        MAPS.map.instance.setZoom(7);

        MAPS.marker.collection['searchMarker'] = new google.maps.Marker({
            position: center,
            map: MAPS.map.instance,
            icon: {
                url: "http://maps.google.com/mapfiles/ms/icons/yellow-dot.png"
            }
        });

        MAPS.circle.instance = new google.maps.Polygon({
            map: MAPS.map.instance,
            paths: [drawer(center, distance, 1)],
            strokeColor: "#0000FF",
            strokeOpacity: 0.8,
            strokeWeight: 2,
            fillColor: "#FF0000",
            fillOpacity: 0.35
        });
        console.log(MAPS.circle.instance.getPath())
    });
}

drawCircle(point, radius, dir) {
    var d2r = Math.PI / 180;
    var r2d = 180 / Math.PI;
    var earthsradius = 3963;
    var points = 32;
    var rlat = (radius / earthsradius) * r2d;
    var rlng = rlat / Math.cos(point.lat * d2r);
    var extp = [];
    var start = null;
    var end = null;
    if (dir === 1) {
        start = 0;
        end = points + 1;
    } else {
        start = points + 1;
        end = 0;
    }
    for (var i = start; (dir === 1 ? i < end : i > end); i = i + dir) {
        var theta = Math.PI * (i / (points / 2));
        var ey = point.lng + (rlng * Math.cos(theta));
        var ex = point.lat + (rlat * Math.sin(theta));
        extp.push(new google.maps.LatLng(ex, ey));
    }
    return extp;
} 
```

# data-structures - OpenCL 中不相交集和 Kruskal 算法（和其他数据结构）的实现

> ID：14664688
> 
> 赞同：0
> 
> 时间：2013-02-02T17:50:49.503
> 
> 标签：data-structures, opencl, kruskals-algorithm, disjoint-sets

我想在 OpenCL 中实现不相交集数据结构和 Kruskal 算法。我在 OpenCL 中实现了一些代码，但不知道如何开始使用 OpenCL 中的数据结构。Aftab Munshi 书中给出的 Djkstra 算法很难理解。任何人都可以建议其他来源...？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T05:08:10.647

我建议您从算法的简单 C 版本开始，例如：

[http://prabhakargouda.hubpages.com/hub/Kruskal-algorithm-implementation-in-C](http://prabhakargouda.hubpages.com/hub/Kruskal-algorithm-implementation-in-C)

评估可以并行完成的工作。在上面的代码中，有几个嵌套的 for 循环可以并行执行。与树中的指针相比，邻接矩阵是一种很好的并行结构。所以试着利用它。

请记住，并非算法的所有阶段都可以并行完成。因此，从最里面的 for 循环开始，分阶段实施。

另外，请注意没有与上述代码相关的版权或许可。所以小心你如何使用它。请记住在应有的地方提供版权。

# vector - 如何在旋转场景中查找对象的全局位置 THREE.JS

> ID：14664696
> 
> 赞同：1
> 
> 时间：2013-02-02T17:51:26.480
> 
> 标签：vector, position, three.js, webgl, scene

我正在使用这个：[http](http://leapmotion.com) ://leapmotion.com 开发一个 3D 网格操纵器。到目前为止，我已经能够很好地操纵这些点，通过“抓取”和移动它们，但是我现在希望能够旋转网格并在相反的面上工作。我所做的是添加一个名为“可旋转”的额外对象，如下所示：

```
scene=new THREE.Scene();
camera = new THREE.PerspectiveCamera(70,window.innerWidth/window.innerHeight,1,8000)
renderer=new THREE.WebGLRenderer( { clearColor: 0x000000, clearAlpha: 1, maxLights:5 } )

//This is the 'Mesh Scene'
rotatable = new THREE.Object3D()
scene.add(rotatable)

//Mesh we are altering
var material = new THREE.MeshNormalMaterial()
material.side=2

var geom = new THREE.SphereGeometry(200,10,10); 
var sphere = new THREE.Mesh(geom, material)

rotatable.add(sphere) 
```

然后我试图改变这个球体的顶点，但要这样做，我需要做一个“碰撞测试”以查看顶点是否被“抓取”这涉及检查顶点位置并查看它是否与一个重合你的手指位置（下面的伪代码）

```
if(finger.x == vertex.x && finger.y == vertex.y && finger.z == vertex.z){
    vertex.grabbed = true 
} 
```

当可旋转对象的旋转为零时，这可以正常工作，但是当它开始旋转时，碰撞测试仍将测试未旋转的顶点位置（这是有道理的）。我的问题是如何在“场景/全局”位置找到顶点的位置。到目前为止，我能想到的唯一方法是计算“可旋转”的旋转并使用这个向量来计算新的顶点位置。

我对数学一无所知，所以这可能不是要走的路，即使是这样，我也将不得不如此努力地挣扎，以至于我永远不会知道我是否只是做错了数学，或者这不是不是我应该去计算它的方式。显然我愿意完成这项工作，但只是想确保这是这样做的方法，而不是另一种更简单的方法。

如果对代码有任何其他问题，请告诉我，并提前感谢您的宝贵时间！

艾萨克

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-02T18:20:54.747

要获取在本地坐标中指定的顶点的世界位置，请将对象的世界变换应用于顶点，如下所示：

```
vertex.applyMatrix4( object.matrixWorld ); 
```

（我不熟悉跳跃运动，所以希望它不会影响这个答案。）

提示：`maxLights`不再需要。并且最好避免`material.side = 2`。改为使用`material.side = THREE.DoubleSide`。

你可以在这里找到常量：[https ://github.com/mrdoob/three.js/blob/master/src/Three.js](https://github.com/mrdoob/three.js/blob/master/src/Three.js)

三.js r.55

# objective-c - NSDictionary 计算键的数量

> ID：14664698
> 
> 赞同：1
> 
> 时间：2013-02-02T17:51:39.360
> 
> 标签：objective-c, nsdictionary

我正在尝试创建一个`NSDictionary`唯一键，每个值都是唯一键的计数。

IE

给定数组`[apple, apple, banana, apple, pear, banana]`我会得到字典......

```
{
    apple : 3,
    banana : 2,
    pear : 1
} 
```

我敢肯定我之前看过代码，你可以在其中执行类似...

```
NSMutableArray *uniqueKeys = [NSMutableArray array];

for (NSString *string in myArray) {
    uniqueKeys[string]++;
} 
```

但我不记得确切的语法是什么。

我知道我可以通过提取`NSNumber`并更改它并将其放回原处来完成它，但如果可能的话我想使用这种方法。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-02T18:02:17.800

似乎您可以使用 NSCountedSet。如果“apple”和“apple”相等，您将能够知道计数集中有多少个“水果”以及该集中有多少个“苹果”。

苹果的文档：

> NSCountedSet 类声明了一个可变的、无序的模糊对象集合的编程接口。计数集也称为袋子。
> 
> 每个插入到 NSCountedSet 对象中的不同对象都有一个与之关联的计数器。NSCountedSet 跟踪对象插入的次数，并要求删除对象的次数相同。因此，即使对象已多次添加到集合中，NSSet 对象中也只有一个对象实例。超类NSSet定义的count方法具有特殊意义；它返回不同对象的数量，而不是对象在集合中表示的总次数。NSSet 和 NSMutableSet 类分别用于元素不同的静态和动态集。

**更新**

这是一个例子：

```
NSCountedSet * fruits = [[NSCountedSet alloc] initWithArray:@[@"apple", @"apple", @"banana", @"apple", @"pear", @"banana"]];
NSLog(@"fruit count = %d", [fruits count]);
NSLog(@"num apples = %d", [fruits countForObject:@"apple"]);
NSLog(@"num bananas = %d", [fruits countForObject:@"banana"]);
NSLog(@"num pears = %d", [fruits countForObject:@"pear"]);
NSLog(@"num oranges = %d", [fruits countForObject:@"orange"]); 
```

这将输出：

```
2013-02-02 13:07:59.058 test[46614:c07] fruit count = 3
2013-02-02 13:07:59.059 test[46614:c07] num apples = 3
2013-02-02 13:07:59.062 test[46614:c07] num bananas = 2
2013-02-02 13:07:59.062 test[46614:c07] num pears = 1
2013-02-02 13:07:59.063 test[46614:c07] num oranges = 0 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-02T19:02:05.623

NSCountedSet 提供了一个非常优雅的解决方案，但是如果有人出于任何原因需要字典而不是集合，那么创建这个“长手”并不是*那么*麻烦。（例如，如果您需要一次性遍历所有键和值，这可能会很有用）。

```
NSMutableDictionary *dictionaryWithKeysAndNumbers = [[NSMutableDictionary alloc] init];

for (NSString *key in keysArray) {
    if ([dictionaryWithKeysAndNumbers valueForKey:key]) {
        NSNumber *numberOfKeyInstances = [dictionaryWithKeysAndNumbers valueForKey:key];
        NSInteger newValue = numberOfKeyInstances.intValue +1;
        [dictionaryWithKeysAndNumbers setValue:[NSNumber numberWithInt:newValue] forKey:key];
    }
    else{
        [dictionaryWithKeysAndNumbers setValue:[NSNumber numberWithInt:1] forKey:key];
    }
} 
```

# django-cms - Django-cms：save_model 和 api.create_page

> ID：14664701
> 
> 赞同：0
> 
> 时间：2013-02-02T17:51:50.313
> 
> 标签：django-cms

我有一个外部应用程序，其模型如下：

```
class Society(models.Model):
    name = models.CharField(max_length=200)

class Office(models.Model):
    society = models.ForeignKey(Society)
    name = models.CharField(max_length=200) 
```

我需要，每次创建和保存办公室时，自动创建一个带有办公室名称的页面。我正在考虑Office（models.Model）上的def save-model，插入一个cms.api create_page，但我无法完成它。任何人都可以帮助我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-14T18:44:03.600

也许像这样？

```
import cms

parent_page = Page.objects.get(pk=1)   # you will want something more valid than this
approval_user = User.objects.get(pk=1) # again, just selecting the first user, 
                                       # do something better
                                       # like maybe the current request.user?

try:
    page = create_page(title=office.name,
            template=cms.constants.TEMPLATE_INHERITANCE_MAGIC,
            language='en',
            parent=parent_page,
            published=True) # May not want to auto publish?
except Exception, err:
    pass
    # need some handling if the creation fails 
```

# ruby-on-rails-3 - 多租户 (acts_as_tenant) 与 Devise（用户默认范围为子域）中断会话

> ID：14664708
> 
> 赞同：5
> 
> 时间：2013-02-02T17:52:15.587
> 
> 标签：ruby-on-rails-3, session, devise, scope, multi-tenant

# 宝石

```
ruby 1.9.3
rails 3.2.11
devise 2.2.3
acts_as_tenant 0.2.9 
```

# 代码

我所有的模型都由 domain_id 限定：

```
class User < ActiveRecord::Base
  acts_as_tenant(:domain)
  #...
end 
```

然后，在我的 application_controller 中，我从域中设置当前租户：

```
class ApplicationController < ActionController::Base
  set_current_tenant_through_filter
  before_filter :set_tenant
  protect_from_forgery
  #...

  def set_tenant
    #...
    @domain = Domain.find_or_create_by_name(request.host)
    set_current_tenant(@domain)
  end
end 
```

**除了会话之外，所有模型都适用于所有模型：**每次加载页面时，它将注销第一个与另一个租户一起加载页面的用户。通过加载此页面，它将注销第一个 [... 等]

**假设：**当 Alice 访问一个域时，Rails 加载 current_tenant=alice_domain (ok)。一切都按预期工作，直到 Bob 访问另一个域，加载 current_tenant=bob_domain。当 Alice 刷新她的页面时，Rails 仍然有 current_tenant==bob_domain。Rails 检查会话：Alice 在 bob_domain 范围内不存在，因此 Devise 强制 Alice 注销。然后 application_controller 设置 current_tenant=alice_domain... 注销 Bob。

**肮脏的解决方法：**不要在用户模型中使用acts_as_tenant，在每个控制器中按域自己限定用户，然后覆盖设计以按域限定登录和注册。而且我不确定如何让设计了解会话内容中的当前域。顺便说一句，在用户中用手动 default_scope 替换acts_as_tenant 也会遇到同样奇怪的错误。走这条路似乎很脏。

我几天来一直在寻找一个干净的解决方案。如果有任何帮助，我将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-03T16:25:48.300

固定，在`application_controller`，改变

```
before_filter :set_tenant 
```

到

```
prepend_before_filter :set_tenant 
```

为了在设计检查用户会话之前对包括用户在内的所有内容进行 default_scope。

# javascript - JavaScript YouTube API 在其他暂停时播放视频 - 多个 iframe

> ID：14664715
> 
> 赞同：0
> 
> 时间：2013-02-02T17:52:43.543
> 
> 标签：javascript, youtube, youtube-api, youtube-javascript-api

我得到了以下[jsfiddle](http://jsfiddle.net/QdUTy/)，它基本上有 2 个 imgs 和 2 个 iframe。
每个 img 和 iframe 都在不同的 div 中（成对）。

iframe 是隐藏的，而 img 不是。
当您单击 img 时，img 消失，而 iframe 变为可见（**并立即开始播放视频**）

如果我点击第二个 img，第一个应该再次可见而不是 iframe，**并且视频应该暂停，而第二个的视频开始播放**

我上面的小提琴只在前两次出现时按我想要的那样工作，之后我收到一个错误：

```
Error: TypeError: player.pauseVideo is not a function 
```

并且视频不播放。

急需帮助，尝试了大约 7 个小时，但没有成功。
谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-03T20:01:03.017

单击img时通过添加播放器解决此问题，然后检查此img是否存在播放器，如果存在则播放存在

```
if (typeof players[index] == 'undefined') {
    players.push(new YT.Player(iframe[0], {
        events: {
            'onReady': function (event) {
                event.target.playVideo();
            }
        }
    }));
} else {
    players[index].seekTo(0).playVideo();
} 
```

[jsfiddle](http://jsfiddle.net/QdUTy/2/)

# assembly - 在 SPARC 汇编语言中输入一个整数时间值，后跟“:”

> ID：14664717
> 
> 赞同：0
> 
> 时间：2013-02-02T17:52:51.687
> 
> 标签：assembly, sparc

我试图要求用户按此顺序输入时间值`hours:min`- 例如用户可以输入`3:45`. 现在，我想获取小时值并对其进行处理，然后我想获取分钟值并对其进行其他处理。

我`mov %o0, %time`用来存储时间值。但是，有两个问题：

*   `:`如果用户在下班后进入，程序将不会运行。
*   我不知道如何分别获取小时和时间的值。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T23:38:09.660

使用您拥有的任何服务来接受字符串输入，然后找到分隔符并解析每侧的两个数字。

* * *

**更新**：这是一个示例实现。

```
! parse time in hh:mm format
! in: %o0 pointer to zero-terminated buffer
! out: %o0 hours, %o1 minutes
gettime:
    save %sp, -64, %sp
    ! look for the colon in the string
    ! for simplicity, assume it always exists
    mov %i0, %o0            ! use %o0 for pointer
colon_loop:
    ldub [%o0], %o1         ! load next byte
    cmp %o1, ':'
    bne colon_loop
    add %o0, 1, %o0
    ! ok, now we have start of minutes in %o0
    ! replace the colon by a zero
    ! and convert the minutes part
    call atoi
    stb %g0, [%o0-1]
    ! we now have the minutes in %o0, save it
    mov %o0, %i1
    ! convert the hours
    call atoi
    mov %i0, %o0
    ! we now have hours in %o0
    ! return with hours,minutes in %o0,%o1 respectively
    ret
    restore %o0, %g0, %o0

! simple atoi routine
! in: %o0 pointer to zero-terminated string of digits
! out: %o0 the converted value
atoi:
    mov %g0, %o1            ! start with zero
atoi_loop:
    ldub [%o0], %o2         ! load next character
    cmp %o2, 0              ! end of string?
    be atoi_done
    sub %o2, '0', %o2       ! adjust for ascii
    ! now multiply partial result by 10, as 8x+2x
    sll %o1, 3, %o3         ! 8x
    sll %o1, 1, %o1         ! 2x
    add %o1, %o3, %o1       ! 10x
    ! now add current digit and loop back
    add %o2, %o1, %o1
    b atoi_loop
    add %o0, 1, %o0
atoi_done:
    retl
    mov %o1, %o0 
```

# linux - 组内用户的 SSH 密钥认证

> ID：14664723
> 
> 赞同：2
> 
> 时间：2013-02-02T17:53:55.133
> 
> 标签：linux, ssh, private-key

我的问题是通过带有密钥身份验证的 ssh 登录。到目前为止，这项工作非常好：使用例如 putty 登录到服务器可以正常工作。公钥存储在~/.ssh 目录中，私钥是正确的。

但是，如果我将一个用户添加到我想登录的用户的组中，那么到目前为止登录是不可能的。我看到密码提示并鼓励为用户输入密码，但我的私钥不再使用。在我输入正确的密码后，它也可以工作。

如果我再次从 /etc/group 中删除用户，则用户可以再次使用密钥登录。

仅当用户组中至少有一个用户时，ssh 密钥登录不再起作用。

如果有人有建议并会在此处发布，那将非常好。

问候

斯文

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-02T18:54:01.513

检查 .ssh 目录和 authorized_keys 文件的权限。如果组中有多个用户并且目录是组可写的，则不再使用密钥。您可以从 /var/log/auth.log 在服务器上看到它，其中 sshd 代理应该报告类似“身份验证被拒绝：所有权或模式错误”之类的信息

.ssh 目录应该有 700 的权限（只有用户可以读、写和执行）。对于文件 600（只有用户可以读写）是最好的权限。在一些实现中，主目录也不能是组可写的。

这一切的原因是，如果文件可以按组写入，则该组中的任何人都可以添加自己的密钥并以您的身份登录。

# php - 过滤大型 PHP 数组

> ID：14664727
> 
> 赞同：2
> 
> 时间：2013-02-02T17:54:26.720
> 
> 标签：php, arrays, filter

此数据是从 Flickr API 返回的。它包含 1000 个带有照片细节的数组。数组如下所示...

```
Array
(
    [0] => Array
        (
            [id] => 8437769421
            [owner] => 10817753@N03
            [secret] => 9eccf2d244
            [server] => 8056
            [farm] => 9
            [title] => [Group 1]-XR6A1835_XR6A1840-6 images-E.jpg
            [ispublic] => 1
            [isfriend] => 0
            [isfamily] => 0
            [description] => Array
                (
                    [_content] => Stitched Panorama
                )

            [dateupload] => 1359826577
            [datetaken] => 2012-12-24 10:32:04
            [datetakengranularity] => 0
            [ownername] => Ulf Bodin
            [tags] => mist fog landscape spain ray rays andalusia andalusien spanien landskap salobreÃ±a dimma canoneos5dmarkiii canonef70200mmf28lisiiusm
            [latitude] => 36.743055
            [longitude] => -3.588651
            [accuracy] => 16
            [context] => 0
            [place_id] => qvlfaYpWVbiHFTA
            [woeid] => 772523
            [geo_is_family] => 0
            [geo_is_friend] => 0
            [geo_is_contact] => 0
            [geo_is_public] => 1
        )

    [1] => Array
        (
            [id] => 8437770275
            [owner] => 69309429@N02
            [secret] => 1805477eb0
            [server] => 8078
            [farm] => 9
            [title] => #Newfoundlanddogs #squirellhatersclub #landseer #newfie #dogs #newfiesofinstagram #instadogs #drool #newfiesarethebestdogsever
            [ispublic] => 1
            [isfriend] => 0
            [isfamily] => 0
            [description] => Array
                (
                    [_content] => 
                )

            [dateupload] => 1359826595
            [datetaken] => 2013-02-02 09:36:35
            [datetakengranularity] => 0
            [ownername] => chefwaiterhater
            [tags] => square squareformat normal iphoneography instagramapp uploaded:by=instagram
            [latitude] => 0
            [longitude] => 0
            [accuracy] => 0
            [context] => 0
        )
        .....
        .....
        .....
    [999] => Array
        (
            [id] => 8438855962
            [owner] => 23123736@N00
            [secret] => ab5b4dbf4d
            [server] => 8092
            [farm] => 9
            [title] => Dusky drama - drive home
            [ispublic] => 1
            [isfriend] => 0
            [isfamily] => 0
            [description] => Array
                (
                    [_content] => 
                )

            [dateupload] => 1359826602
            [datetaken] => 2013-02-02 17:36:42
            [datetakengranularity] => 0
            [ownername] => angee09
            [tags] => square squareformat iphoneography instagramapp xproii uploaded:by=instagram
            [latitude] => 0
            [longitude] => 0
            [accuracy] => 0
            [context] => 0
        )

); 
```

我想过滤仅包含`latitude`我编写此程序的数组...

```
function onlyLatLng($items)
{
    $filters = array();

    foreach ($items as $item) {
        if (!in_array($item['latitude'], array('0', '', 'NULL'))) {
            $filters[] = $item;
        }
    }
    return $filters;
}

$latlngs = onlyLatLng($above_big_array); 
```

这是正确的做法吗？或者有更好的方法来过滤数组？提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-02T18:00:58.627

您可以使用[array_filter](http://php.net/manual/en/function.array-filter.php)函数：

```
$latlngs = array_filter($items, function ($item) {
    return !in_array($item['latitude'], array('0', '', 'NULL')));
}); 
```

# c# - 为 DSA 生成 40 个字符的指纹

> ID：14664728
> 
> 赞同：4
> 
> 时间：2013-02-02T17:54:30.140
> 
> 标签：c#, encryption, fingerprint, dsa

当您有 P、Q、G、Y 和 X 时，.NET Framework (C#) 中是否有生成 40 个字符（公共？）指纹的现有方法，如下所示？

或者有人知道如何实现这一目标吗？

指纹：81F68001 29D928AD BEE41B78 AA862106 CAEAC892

编辑：这是我正在尝试做的一个例子：

```
 string P = "00F35DBCD6D4C296D2FE9118B659D02608B76FAC94BB58B10283F20390E2B259BAC602466162E9EF3E6A1590702CAE49B681A75A878E266F1AFAE0FA89DA5CA44A1551B517A3F80A9D6C630F9E7D239B437F7402DF8055069735894CD9D4708F8777B5E4F3E6A8B2D4EEE50DB2C96BA16D3C81FEB923697D649A8B7771B10E5B3F";
    string Q = "00B5AF039839043410E04C35BDDB30679969EBAC8B";
    string G = "00F300A68E54DE33A09001E28EC09F2ABF5DAF208774F2514D878D5587D870C91C6DE42B4705078C6F4438765050039C2950B6DE85AFC0D12A7A5C521782CB760918DF68F385A7F177DF50AA6BA0284090454106E422FCAE5390ADC00B859A433430019E970BFA614374DE1FB40C600345EF19DC01A122E4676C614DC29D3DC2FE";
    string Y = "00A5317849AF22BA6498F1EF973158C8BDA848BEB074CB141E629C927B18F29C8CE99815001BAAB2931F339B5C52A79BC3DCB0C5962C302707BA6FF1807EEB91D751BA723BB7512C20689AC5E67A1B656CDFD1BA2D4F6A44308509486AA8754B47784FC4C03E546897200388656BA5834A2CC0E18E58454FF60C1BA5411D6F50FD"; 
```

我错过了这个中间部分的代码。如何将 P、Q、G、Y 转换为指纹。我尝试了不同的方法，但未能成功生成我在尝试重新创建的应用程序中看到的指纹。

```
 /* convert public key (bigIntKey) into fingerprint */
        var bigIntHash = new BigInteger(SHA1.Create().ComputeHash(key.ToByteArray()));
        byte[] hash = bigIntHash.ToByteArray();

        if (hash.Length != 20)
        {
            throw new IndexOutOfRangeException();
        }

        for (int i = 0; i < 5; i++)
        {
            int lf = BitConverter.ToInt32(hash, i * 4);
            Debug.Write(lf.ToString("X") + " ");
        } 
```

编辑2：

我试过这个，但这不起作用

```
 // switch P, Q, G, Y and separately to make it work.

        byte[] pArr = StringToByteArray(P);
        pArr = Tools.Endian.ReverseBytes(pArr);

        byte[] qArr = StringToByteArray(Q);
        qArr = Tools.Endian.ReverseBytes(qArr);

        byte[] gArr = StringToByteArray(G);
        gArr = Tools.Endian.ReverseBytes(gArr);

        byte[] yArr = StringToByteArray(Y);
        yArr = Tools.Endian.ReverseBytes(yArr);

        byte[] xArr = StringToByteArray(X);
        xArr = Tools.Endian.ReverseBytes(xArr);

        byte[] arr = Combine(pArr, qArr, gArr, yArr);

        DSACryptoServiceProvider dsa = new DSACryptoServiceProvider();
        DSAParameters par = new DSAParameters();
        par.P = pArr;
        par.Q = qArr;
        par.G = gArr;
        par.Y = yArr;
        par.X = xArr;
        dsa.ImportParameters(par);
        var xml = dsa.ToXmlString(true); 
```

它将在 ImportParameter 上失败。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-02T18:10:58.847

[MSDN 在此页面](http://msdn.microsoft.com/en-us/library/system.security.cryptography.dsacryptoserviceprovider%28v=vs.71%29.aspx)上提到了您需要做的工作。[然后，从这个 SO page](https://stackoverflow.com/questions/7545877/c-sharp-generate-a-public-and-private-keys-for-the-dsa-encryption-algorithm?rq=1)看看这个答案。接受的答案给出了以下代码（我引用）：

```
var dsa = new DSACryptoServiceProvider();            
var privateKey = dsa.ExportParameters(true); // private key
var publicKey = dsa.ExportParameters(false); // public key 
```

我认为您拥有一切所需的一切。

干杯！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-03T11:30:54.600

您需要遵循 OTR 规范，其中说密钥的组件使用 MPI 编码，它指定为长度（32 位大端）后跟整数（大端，无前导零）

```
void Main()
{
    string P = "00F35DBCD6D4C296D2FE9118B659D02608B76FAC94BB58B10283F20390E2B259BAC602466162E9EF3E6A1590702CAE49B681A75A878E266F1AFAE0FA89DA5CA44A1551B517A3F80A9D6C630F9E7D239B437F7402DF8055069735894CD9D4708F8777B5E4F3E6A8B2D4EEE50DB2C96BA16D3C81FEB923697D649A8B7771B10E5B3F";
    string Q = "00B5AF039839043410E04C35BDDB30679969EBAC8B";
    string G = "00F300A68E54DE33A09001E28EC09F2ABF5DAF208774F2514D878D5587D870C91C6DE42B4705078C6F4438765050039C2950B6DE85AFC0D12A7A5C521782CB760918DF68F385A7F177DF50AA6BA0284090454106E422FCAE5390ADC00B859A433430019E970BFA614374DE1FB40C600345EF19DC01A122E4676C614DC29D3DC2FE";
    string Y = "00A5317849AF22BA6498F1EF973158C8BDA848BEB074CB141E629C927B18F29C8CE99815001BAAB2931F339B5C52A79BC3DCB0C5962C302707BA6FF1807EEB91D751BA723BB7512C20689AC5E67A1B656CDFD1BA2D4F6A44308509486AA8754B47784FC4C03E546897200388656BA5834A2CC0E18E58454FF60C1BA5411D6F50FD";

    var publicKey = 
                ToMPI(HexToBytes(P))
        .Concat(ToMPI(HexToBytes(Q)))
        .Concat(ToMPI(HexToBytes(G)))
        .Concat(ToMPI(HexToBytes(Y)))
        .ToArray();

    var fingerprint=BitConverter.ToString(SHA1.Create().ComputeHash(publicKey)).Replace("-","");
    fingerprint.Dump();
}

byte[] ToMPI(byte[] data)
{
    //Truncate leading 0 bytes
    data = data.SkipWhile(b=>b==0).ToArray();

    //Length prefix - 32 bit big-endian integer
    var lenBytes=new byte[4];
    lenBytes[0]=(byte)(data.Length>>24);
    lenBytes[1]=(byte)(data.Length>>16);
    lenBytes[2]=(byte)(data.Length>>8);
    lenBytes[3]=(byte)(data.Length>>0);

    return lenBytes.Concat(data).ToArray();
}

// from http://stackoverflow.com/questions/311165/how-do-you-convert-byte-array-to-hexadecimal-string-and-vice-versa
public static byte[] HexToBytes(String hex)
{
  int NumberChars = hex.Length;
  byte[] bytes = new byte[NumberChars / 2];
  for (int i = 0; i < NumberChars; i += 2)
    bytes[i / 2] = Convert.ToByte(hex.Substring(i, 2), 16);
  return bytes;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-04-07T16:10:28.420

我已经使用这个类来生成 OTR DSA 密钥： [https ://github.com/mohamedmansour/OTRLib/blob/master/Src/OTR/OTRUtilities/DSASigner.cs](https://github.com/mohamedmansour/OTRLib/blob/master/Src/OTR/OTRUtilities/DSASigner.cs)

使类公开并在没有构造函数参数的情况下调用。

```
var signer = new DSASigner();
var  _des_key_object = signer.GetDSAKeyParameters(); 
```

稍后重用相同的密钥：

```
string _dsa_key_1_p = _des_key_object.GetHexParamP();
string _dsa_key_1_q = _des_key_object.GetHexParamQ();
string _dsa_key_1_g = _des_key_object.GetHexParamG();
string _dsa_key_1_x = _des_key_object.GetHexParamX(); 
```

// 这可以是用于存储的 JSON。

```
var keysArray = new string[] { _dsa_key_1_p, _dsa_key_1_q, _dsa_key_1_g, _dsa_key_1_x };
_des_key_object = new DSAKeyParams(_des_key_objectJson[0], _des_key_objectJson[1], _des_key_objectJson[2], _des_key_objectJson[3]); 
```

# php - 使用会话上传和显示消息后重定向到页面？

> ID：14664729
> 
> 赞同：0
> 
> 时间：2013-02-02T17:54:33.823
> 
> 标签：php, redirect

有人可以帮助我使用我正在使用的这个图像上传脚本，它工作正常，但我正在尝试将这部分代码添加到底部：

```
$_SESSION['dashboard_intro']="<div class=\"user_settings_box_home\"><strong>Welcome to your new profile</strong> - This is your Dashborad.</div><div class=\"infobox-close4\"></div>"; 
header('Location: dashboard.php'); 
```

这个想法是，在用户上传图像并运行上传脚本后，用户将被重定向到另一个页面，并使用会话显示一条消息。

但是上传图片后什么都没有发生，页面没有重定向，也没有显示任何消息，请有人告诉我我哪里出错了。

```
<?php
    session_start()
    ?>
    <?

    // LOG
    $log = '=== ' . @date('Y-m-d H:i:s') . ' ===============================' . "\n"
            . 'FILES:' . print_r($_FILES, 1) . "\n"
            . 'POST:' . print_r($_POST, 1) . "\n";
    $fp = fopen('upload-log.txt', 'a');
    fwrite($fp, $log);
    fclose($fp);

    // Result object
    $r = new stdClass();
    // Result content type
    header('content-type: application/json');

    // Maximum file size
    $maxsize = 10; //Mb
    // File size control
    if ($_FILES['xfile']['size'] > ($maxsize * 1048576)) {
        $r->error = "Max file size: $maxsize Kb";
    }

    // Uploading folder
    $folder = '../'. '../'. 'data/'. 'photos/'. $_SESSION['user_id'] . '/';
    if (!is_dir($folder))
        mkdir($folder);

    // If specifics folder 
    $folder .= $_POST['folder'] ? $_POST['folder'] . '/' : '';
    if (!is_dir($folder))
        mkdir($folder);

    // PASS USER_ID HERE
    $folder2 = '../'. '../'. 'data/'. 'photos/'. $_SESSION['user_id'] . '/';
    if (!is_dir($folder2))
        mkdir($folder2);

    // New directory with 'files/USER_SESSION_ID/'
    $folder = $newDir . $folder2;

    // If the file is an image
    if (preg_match('/image/i', $_FILES['xfile']['type'])) {

        $filename = $_POST['value'] ? $_POST['value'] :
                $folder . '_default.jpg';
    } else {

        $tld = split(',', $_FILES['xfile']['name']);
        $tld = $tld[count($tld) - 1];
        $filename = $_POST['value'] ? $_POST['value'] :
                $folder . sha1(@microtime() . '-' . $_FILES['xfile']['name']) . $tld;
    }

    // Supporting image file types
    $types = Array('image/png', 'image/gif', 'image/jpeg');
    // File type control
    if (in_array($_FILES['xfile']['type'], $types)) {
        // Create an unique file name    
        // Uploaded file source
        $source = file_get_contents($_FILES["xfile"]["tmp_name"]);
        // Image resize
        imageresize($source, $filename, $_POST['width'], $_POST['height'], $_POST['crop'], $_POST['quality']);
    } else
    // If the file is not an image
    if (in_array($_FILES['xfile']['type'], $types)) 
        move_uploaded_file($_FILES["xfile"]["tmp_name"], $filename);

    // File path
    $path = str_replace('welcome_upload.php', '', $_SERVER['SCRIPT_NAME']);

    // Result data
    $r->filename = $filename;
    $r->path = $path;
    $r->img = '<img src="' . $path . $filename . '" alt="image" />';

    // Return to JSON
    echo json_encode($r);

    // Image resize function with php + gd2 lib
    function imageresize($source, $destination, $width = 0, $height = 0, $crop = false, $quality = 80) {
        $quality = $quality ? $quality : 80;
        $image = imagecreatefromstring($source);
        if ($image) {
            // Get dimensions
            $w = imagesx($image);
            $h = imagesy($image);
            if (($width && $w > $width) || ($height && $h > $height)) {
                $ratio = $w / $h;
                if (($ratio >= 1 || $height == 0) && $width && !$crop) {
                    $new_height = $width / $ratio;
                    $new_width = $width;
                } elseif ($crop && $ratio <= ($width / $height)) {
                    $new_height = $width / $ratio;
                    $new_width = $width;
                } else {
                    $new_width = $height * $ratio;
                    $new_height = $height;
                }
            } else {
                $new_width = $w;
                $new_height = $h;
            }
            $x_mid = $new_width * .5;  //horizontal middle
            $y_mid = $new_height * .5; //vertical middle
            // Resample
            error_log('height: ' . $new_height . ' - width: ' . $new_width);
            $new = imagecreatetruecolor(round($new_width), round($new_height));
            imagecopyresampled($new, $image, 0, 0, 0, 0, $new_width, $new_height, $w, $h);
            // Crop
            if ($crop) {
                $crop = imagecreatetruecolor($width ? $width : $new_width, $height ? $height : $new_height);
                imagecopyresampled($crop, $new, 0, 0, ($x_mid - ($width * .5)), 0, $width, $height, $width, $height);
                //($y_mid - ($height * .5))
            }
            // Output
            // Enable interlancing [for progressive JPEG]
            imageinterlace($crop ? $crop : $new, true);

            $dext = strtolower(pathinfo($destination, PATHINFO_EXTENSION));
            if ($dext == '') {
                $dext = $ext;
                $destination .= '.' . $ext;
            }
            switch ($dext) {
                case 'jpeg':
                case 'jpg':
                    imagejpeg($crop ? $crop : $new, $destination, $quality);
                    break;
                case 'png':
                    $pngQuality = ($quality - 100) / 11.111111;
                    $pngQuality = round(abs($pngQuality));
                    imagepng($crop ? $crop : $new, $destination, $pngQuality);
                    break;
                case 'gif':
                    imagegif($crop ? $crop : $new, $destination);
                    break;
            }
            @imagedestroy($image);
            @imagedestroy($new);
            @imagedestroy($crop);

            $_SESSION['dashboard_intro']="<div class=\"user_settings_box_home\"><strong>Welcome to your new profile</strong> - This is your Dashborad.</div><div class=\"infobox-close4\"></div>"; 
    header('Location: dashboard.php');
        }
    }

    ?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-02T18:28:08.983

你需要把 exit(); 在您的标头重定向之后，否则您刚刚将两页内容加载到一页中。

还要确保你有 session_start(); 在所有脚本的顶部。

如果它解决了，那么好吧，否则也试试这个，或者你可能需要将两者结合起来，但不费吹灰之力。

在dashboard.php 中创建一个div，用于显示类似的消息

```
session_start();
<?php if(isset($_SESSION['dashboard_intro'])){?>
    <div class="user_settings_box_home"><strong><?php echo $_SESSION['dashboard_intro']?></strong> -  - This is your Dashborad.</div><div class="infobox-close4"></div>
<?php } ?> 
```

并设置`$_SESSION['dashboard_intro'] = "Welcome to your new profile";`

成功上传文件并重定向到dashboard.php之后

```
header('Location: dashboard.php');exit(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-02T18:03:42.147

在标头之前，您不能回显空格、换行符等任何内容。它会阻止标题在您的代码上像这样工作

```
?>
<? 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-02-02T18:10:23.600

```
<script type="text/javascript">
  var url = "<?php echo $link; ?>";
  window.location.href = url;
</script>
<noscript>
    JavaScript is turn off. Try redirect <a href="<?php echo $link; ?>">manyaly</a>.
</noscript> 
```

# html - 脸书注册表整合

> ID：14664731
> 
> 赞同：0
> 
> 时间：2013-02-02T17:54:43.620
> 
> 标签：html, facebook, integration, registration

我有一个网站，我想使用 Facebook Developers 包含一个 Facebook 注册表单。我创建了一个帐户并制作了一个应用程序。当我复制并粘贴注册表单的 html 时，我在我的应用程序 ID 中输入（在代码中）并输入了重定向 url（登录页面显示：您已经创建了一个帐户或其他内容）。当我输入代码时，会出现以下文本：无法加载开发人员站点的注册表单。您之前可能在 Facebook 上屏蔽了此应用。转到您的 Facebook 隐私设置以取消阻止此应用。（错误：'redirect_uri' 应该是一个绝对网址。）我进入我的隐私设置，没有任何内容被阻止。谁能帮助理解为什么这样说？如果有帮助，我的网站是[http://waybored.com 。](http://waybored.com)谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-02T18:01:32.290

这就是您的代码实际的样子：

```
<div id="283932682341116322" align="left" style="width: 100%; overflow-y: hidden;" class="wcustomhtml"><iframe src="https://www.facebook.com/plugins/registration?
             client_id=113869198637480&
             redirect_uri=
             fields=name,birthday,gender,location,email"
        scrolling="auto"
        frameborder="no"
        style="border:none"
        allowTransparency="true"
        width="100%"
        height="330">
</iframe></div> 
```

`src`您为 iframe 提供的值中有换行符和大量空格。

并且您没有为`redirect_uri`参数提供任何值也是错误消息中所说的。

# android - android按钮自定义颜色和圆角

> ID：14664733
> 
> 赞同：1
> 
> 时间：2013-02-02T17:54:52.450
> 
> 标签：android, button, colors

我正在制作一个绘图应用程序，用户可以在其中选择自定义颜色。选择颜色后，customBtn 将通过以下代码将其颜色更改为所选颜色：

```
 customBtn.setBackgroundColor(Color.argb(alphaSeekBar.getProgress(), redSeekBar.getProgress(), 
        greenSeekBar.getProgress(), blueSeekBar.getProgress())); 
```

但是，这会使按钮变成方角。

我希望它是圆角的，当按下时，它会变成灰色。

已经存在`selector.xml`并显示如下，但是我怎么能将所有的东西合并在一起，这样

1.  它会在未按下时显示自定义颜色，圆角，和
2.  按下时它变成灰色（并保持圆角）？

## 选择器：

```
<item android:state_pressed="true" >         
    <shape xmlns:android="http://schemas.android.com/apk/res/android"> 
        <stroke android:width="2dp" android:color="@color/black" />
        <solid android:color="@color/grey"/>
        <padding android:left="5dp" android:top="2dp" 
            android:right="5dp" android:bottom="2dp" /> 
        <corners android:radius="5dp" /> 
    </shape>    
</item>

<item>
    <shape xmlns:android="http://schemas.android.com/apk/res/android"> 
        <stroke android:width="2dp" android:color="@color/black" />
        <solid android:color="@color/???-- how to amend---??"/>
        <padding android:left="5dp" android:top="2dp" 
            android:right="5dp" android:bottom="2dp" /> 
        <corners android:radius="5dp" /> 
    </shape>
</item> 
```

## 编辑：以编程方式设置圆角，因为定制颜色不是静态的，用户可以根据要求更改定制颜色

```
 customColorCode = Color.argb(alphaSeekBar.getProgress(), redSeekBar.getProgress(), 
         greenSeekBar.getProgress(), blueSeekBar.getProgress());         

 RoundRectShape rs = new RoundRectShape(new float[] { 10, 10, 10, 10, 10, 10, 10, 10}, null, null);
 ShapeDrawable sd = new ShapeDrawable(rs);
 customBtn.setBackgroundDrawable(sd);
 customBtn.setBackgroundColor(customColorCode); 
```

## 编程问题：

选择自定义颜色前的按钮完美显示圆角，选择自定义颜色后设置为方形颜色，可能是因为setBackgroundColor行放在最后一个代码。然而我已经尝试将它向上移动，但仍然是方形颜色。如何修改？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T20:17:55.157

由于您不支持普通按钮（聚焦、禁用、按下、活动等）等全范围状态，因此默认状态和按下状态之间的唯一区别是纯色。也许一个`[PorterColorFilter][1]`会工作。我认为您可以按原样设置按下状态，并将默认状态设置为白色。然后将颜色过滤器应用到具有设置自定义颜色的按钮。您可能需要尝试一些过滤模式，但我认为`DST_ATOP`会替换白色，而不是黑色边框。`MotionEvent`当按钮上触发按下时（也称为触发按下状态），您可能希望使用手势检测器来移除颜色过滤器。

简短的回答是，Android 按钮不能很好地满足您的需求。它们往往需要静态可绘制对象来定义它们在不同状态下的外观。

一种选择是限制颜色选择并为每种颜色创建一个drawable，并根据用户的选择设置drawable。我不知道您的按钮出现在什么上下文中，但建议您按照普通按钮的触摸反馈示例为用户提供一致性。

注意：`setBackgroundColor`具有误导性，它只是将 Button drawable 设置为 color drawable，它正在替换您的圆角矩形 drawable。这就是为什么当你这样做时它会变成一个矩形。

# c# - 在 EF5 中运行 add-migration 命令时在 DbGeography 类型上使用 IsRequired 时出错

> ID：14664736
> 
> 赞同：2
> 
> 时间：2013-02-02T17:55:38.843
> 
> 标签：c#, entity-framework-5, entity-framework-migrations

我有一个流畅的 API 映射类，用于在 EF 5 中进行代码优先迁移。当我添加以下内容时：

```
 this.Property(t => t.LocationGeography)
            .IsRequired(); 
```

尝试在 PM 控制台中运行 add-migration 命令时出现错误。错误是“字典中不存在给定的键。”

注意：我的任何其他必需列都没有这个问题，所以我认为这与在 EF5 的迁移中如何处理 DbGeography 有关。如果我在映射文件中省略了此属性的 IsRequired 方法，它会成功地将 SQL 中的列创建为地理类型，但它可以为空（我试图使其不可为空）。

更新：我决定手动将数据库更新为所需，然后使用 EF 电动工具对我所做的进行逆向工程，以了解他们如何尝试完成此任务。映射文件未向属性添加必需的属性或映射。应用时，它可以为空。我开始认为这还不被支持。

# android - 限制共享android应用apk

> ID：14664738
> 
> 赞同：4
> 
> 时间：2013-02-02T17:55:44.203
> 
> 标签：android, apk

我是安卓新手。我有一个应用程序，我必须限制应用程序的 .apk 文件被用户共享给其他手机的 android 手机持有者。

就像如果我将 .apk 文件保存在自己的网站中，那么我希望用户可以从我的网站下载 .apk，但不能与其他人共享相同的 .apk。我想将 apk 的共享限制在多部手机上。每次用户想要安装应用程序时，他/她必须从游戏或通过我的网站安装，但无法安装共享的 .apk。

另外我想问一下我们是否可以区分应用程序是分发安装还是从播放安装。

那么你能告诉我这样做的一些方法吗？

提前致谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-02T19:55:51.997

1）如果用户在存储中有apk，您不能阻止用户转发您的apk，您可以做的是在您的应用程序安装后将其删除（您应该通过一些api搜索它，如果发现删除它），**限制**：- apk可以安装前共享。

并且市场上存在声称将已安装的应用程序转换为apk的工具/应用程序，然后可以将其转发到其他设备。

[关于 apk 前向锁定的类似问题](https://stackoverflow.com/questions/2711298/programmatically-forward-lock-an-android-apk?rq=1)

2）虽然您不能阻止用户转发您的*apk*，但可以阻止其他用户使用它，如果他们从其他来源收到此应用程序，那么您的*网络*，就像我自己之前所做的那样，通过*客户端服务器通信*，其中密钥是在基于移动**IMEI**的服务器上生成，因此将根据**IMEI**号码为特定移动设备激活此应用程序。因此，如果其他用户尝试使用它，您可以检查此**IMEI**是否已注册，并采取相应措施。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-02T18:17:06.213

除非用户在 ROOTED 手机上使用 USB 电缆/Astro 文件管理器之类的实用程序，否则他将无法将 apk 提取出来并传输到另一部手机。而且知道如何root设备的用户百分比非常低。所以这个问题不应该出现。

即使假设用户可以很容易地提取一个 apk（一般用户无法做到），问题也会减少到在每个 apk 上生成一个唯一的标识符字符串，然后将其打包到这个 apk 中。现在，当它被提取并安装在另一台设备上时，应用程序可以检查标识符并在显示“禁止复制”消息后关闭。

请注意，标识符应绑定到唯一的字符串，例如设备 IMSI 号码或电话号码，或两者的组合。并且这个字符串需要写入一个在复制 apk 时传输的文件，为此我建议在 apk 内的 assets 文件夹中使用一个属性文件。希望这可以帮助

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2016-05-09T10:39:07.333

如果我们设法以某种方式将应用程序数据文件夹与该应用程序的该 APK.file 附加在一起，那么我们的问题将很容易得到纠正。就像如果您将应用程序的文件夹发送给某人，那么应用程序会自动将您的数据加载给其他用户。如果他不能将这两个东西（APP的apk.文件和APP的数据文件夹）分开。希望对你有帮助……我也是……

# r - 如何针对 R 中的任意分布测试小样本的 GOF

> ID：14664740
> 
> 赞同：1
> 
> 时间：2013-02-02T17:56:10.740
> 
> 标签：r, design-patterns

我想针对定义的分布对一小组数据（大约 50 个样本）进行 GOF 测试。任何建议，将不胜感激。

示例分布：

```
n <- 50
time.vec <- 1:n 
alpha <- 0.6
test.dist.vec <- 1/(time.vec^alpha) 
```

适合 test.dist.vec 的示例数据：

```
my.jitter <- runif(n, min=-0.05, max=0.1) 
test.data <- test.dist.vec + my.jitter 
```

鉴于上述情况，如何测试 test.data 对 test.dist.vec 的重要性？

此外，给定一个样本 test.data 的 n 很小（大约 50 - 但 min 到底是多少？），我如何估计 alpha？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T18:22:01.150

Kolmogorov-Smirnov 测试是否适合您。如是：

```
ks.test(test.data,test.dist.vec) 
```

事实上，有很多这样的测试。

# wordpress - Wordpress - 重写假网址

> ID：14664741
> 
> 赞同：1
> 
> 时间：2013-02-02T17:56:14.850
> 
> 标签：wordpress, mod-rewrite

我在 wordpress 中创建了一个假页面，我使用以下代码捕获了该页面：

```
if ($_GET['fake_page'] == "myfakepage") {
  add_filter('the_title','plugin_myown_title');
  add_filter('the_content','plugin_myown_content');
  add_action('template_redirect', 'plugin_myown_template');
} 
```

这工作正常。现在我想做的是重写这样的这个网址

```
my_site?fake_page=myfakepage 
```

在

```
my_site/product/myfakepage 
```

其中 product 是从 wordpress 仪表板创建的现有页面。

我遵循了本指南：

[http://statichtml.com/2010/mod-rewrite-baseon-on-query-string.html](http://statichtml.com/2010/mod-rewrite-baseon-on-query-string.html)

并定义了这个规则：

```
RewriteEngine On
RewriteCond %{QUERY_STRING}     ^fake_page=(.*)$    [NC]
RewriteRule ^/$       my_site/product/%1      [NC,L,R=301] 
```

但我得到的是

```
my_site/product?fake_page=myfakepage 
```

问题出在哪里？此外，我想知道是否在浏览器中输入：

```
my_site/product/myfakepage 
```

我可以让 wordpress 把它当作

```
 my_site?fake_page=myfakepage 
```

没有任何重定向。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-02T19:13:17.207

从您的functions.php中尝试此代码：

```
add_action( 'generate_rewrite_rules', 'my_rewrite_rules' );
function my_rewrite_rules( $wp_rewrite )
{
    $wp_rewrite->rules = array(
        'product/myfakepage/?$' => $wp_rewrite->index . '?fake_page=myfakepage',
    ) + $wp_rewrite->rules;
} 
```

注意：您不需要该自定义 .htaccess。顺便说一句：您永远不会直接修改 .htaccess 。WordPress 中有一个广泛的[重写 API](https://codex.wordpress.org/Rewrite_API)，它允许您应用自定义规则。

# json - 在 CouchDB 中，您如何从 REST 调用中获取参数

> ID：14664744
> 
> 赞同：1
> 
> 时间：2013-02-02T17:56:25.163
> 
> 标签：json, rest, couchdb

嗨，所以我是 CouchDB 的新手，到目前为止看起来很棒，但真的很努力做**必须简单的事情！**

我的文件结构如下：

```
{
   "_id" : "245431e914ce42e6b2fc6e09cb00184d",
   "_rev": "3-2a69f0325962b93c149204aa3b1fa683",
   "type": "student",
   "studentID": "12345678",
   "Name": "Test",
   "group: "A"
} 
```

并希望通过诸如`http://couchIP/student?group=A`或类似的查询来访问它们。视图是我在这里需要的吗？我不明白如何从 Views 的 Map 函数中的查询中获取参数。例子：

```
function(doc,req) {
   if(req.group==='A'){
        emit(doc.id, doc.name);
   } 
} 
```

我对 Couch 如何工作的理解是错误的还是我的问题是什么？在此先感谢，我确定这是 Couch 101

已经阅读了[http://guide.couchdb.org/](http://guide.couchdb.org/)但它并没有真正回答这个问题！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-02T18:13:51.680

您需要进一步阅读视图以及它们返回键/对值的相关性。

目前还不清楚你想从视图中返回什么，所以我猜。如果您想返回整个文档，您将创建一个如下视图：

```
function (doc) { emit(doc.group, doc) }; 
```

这会将组名作为您可以查找的键发出，当您查找时，整个文档将作为值返回。

如果您只想访问这些用户的名称，您可以执行以下操作：

```
function (doc) { emit(doc.group, doc.name) }; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-03T20:21:55.550

您的问题源于对 a`view`作用的误解。视图用于`map/reduce`生成数据的表示。您无法控制查询中视图的输出，因为视图仅根据数据库文档中的更改进行更新。

使用 a`list`也不是一个好的选择。您似乎可以`list`根据查询参数在您的请求中使用您的请求知识来生成不同的输出，但这是错误的，因为 couchdb`ETags`用于缓存，这意味着大多数时候无论您的列表参数如何，您都会得到相同的答案，因为基础文件不会改变。在这种情况下，虽然有一个技巧可以欺骗 couchdb，这意味着使用两个不同的交替用户，但我什至不会尝试这种方式，因为肯定有更简单的方法可以实现您的目标，并且您可以使用`group`作为密钥来解决您的问题你的地图功能。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-04T05:21:06.290

您需要视图来实现所需的结果。

在设计文档的视图中定义以下地图函数。（让我们将视图命名为“byGroup”并假设它存在于名为“_design/students”的设计文档中）

```
function(doc) {
   if(doc.group){
    emit(doc.group,null);
   } 
} 
```

可以从以下网址获取结果

```
http://couchIP:5984/dbname/_design/students/_view/byGroup?startkey="A"&endkey="A"&include_docs=true 
```

拥有友好的 url couchdb 还提供了 url 重写选项。

# php - 根据设定的价格和月份计算日期之间的价格

> ID：14664746
> 
> 赞同：1
> 
> 时间：2013-02-02T17:56:30.723
> 
> 标签：php, mysql

我现在有点卡住了，感谢一些帮助。我有一个带有 2 列“月”和“价格”的 Mysql 表，即 1 月 >> 5（欧元）；二月>> 7（欧元）等等。在网站的预订表格上，用户可以选择到达日期和离开日期。如果用户选择一个介于其间的日期，例如 20.01.2013-12.04.2013，如何计算其间的完整月份（02 和 03）？

这是我必须计算到达和离开月份的天数：

```
 ...
 $query="SELECT * FROM pricecal";
 $result=mysql_query($query);
 $num=mysql_numrows($result);

 $i=0;

 while ($i < $num)
  {

$month=mysql_result($result,$i,"month");
$price=mysql_result($result,$i,"price");

$i++;

$a = $_POST['dropToDay'];
$b = $_POST['dropToMonth'];
$c = $_POST['dropToYear'];
$d = $_POST['dropOffDay'];
$e = $_POST['dropOffMonth'];
$f = $_POST['dropOffYear'];

$days_to = (date('t',mktime(0, 0, 0, $a,(date($b) +1), date($c))) - $a +1);
$off_month_dif = (date('d-m-Y',mktime(0, 0, 0, $d,(date($e)), date($f))) - $d);
$days_off = (date('d-m-Y',mktime(0, 0, 0, $d,(date($e)), date($f))) - $off_month_dif);
$days = (date($f.$e.$d) - date($c.$b.$a));
$days_all = ($days+1);

if($b==$e AND $b==$month)
 {
  $b = $month;
  $pricing = $days_all*$price;
  echo 'Price for '.$days_all.' days is '.$pricing.' EUR.';
 }

if($b == $month AND $b != $e)
 {
  $pricing1 = $days_to*$price;
 }
if($e == $month AND $b != $e)
 {
  $pricing = $days_off*$price;
  $pricings_all = $pricing+$pricing1;
  echo 'Price for booking time: '.$pricings_all.' EUR';
 }
 ..... 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T18:41:37.717

只是大声假设。这是你想要的？这条路有什么？

[SQLFIDDLE MYSQL 演示](http://www.sqlfiddle.com/#!2/f2741/20)

```
select months, price
from demo, (select @i:=-1) r
where months = 
  date_format(
    Date_Add(Date '2013.01.13',
             interval @i:=@i+1 month),'%b')
having @i <= period_diff(date_format
(Date '2013-04-12', '%Y%m'),
date_format(Date '2013-01-20', '%Y%m'))
;

| MONTHS | PRICE |
------------------
|    Jan |     5 |
|    Feb |     7 |
|    Mar |     9 |
|    Apr |    10 | 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-02T21:28:40.950

构建一个月份和价格数组（我假设您存储的是*数字*月份）：

```
$price = array();
$query = "SELECT month, price FROM pricecal";
$result = mysql_query($query) or die(mysql_error()); 
while($row = mysql_fetch_assoc($result)) {
    $price[$result["month"]] = $result["price"];
}
// array(
// 1 => 5,
// 2 => 7,
// ...
// ) 
```

接下来，构建两个时间戳，遍历它们并求和：

```
$ts1 = mktime(0, 0, 0, $_POST['dropToMonth'],  $_POST['dropToDay'],  $_POST['dropToYear']);
$ts2 = mktime(0, 0, 0, $_POST['dropOffMonth'], $_POST['dropOffDay'], $_POST['dropOffYear']);

for($ts = $ts1, $sum = 0; $ts <= $ts2; $ts = strtotime("+1 day", $ts)) {
    $sum += $price[date("n", $ts)];
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-02T21:59:42.233

这将使您在单个查询中获得两个日期之间的总费用。最里面的子查询看起来有点吓人，但它只是为范围之间的每一天创建一行。然后按月分组。

**演示：** [http ://sqlfiddle.com/#!2/53b3b/1](http://sqlfiddle.com/#!2/53b3b/1)

### 输出：

```
447 
```

### 询问：

```
SET @beginDate = '2013-01-20';
SET @endDate   = '2013-04-12';

SELECT
    SUM( days.days * rate.price ) AS fee

FROM
    rate

    INNER JOIN
    ( SELECT 
        MONTH( a.Date ) AS month,
        COUNT( * )      AS days

    FROM (
        select @endDate - INTERVAL (a.a + (10 * b.a) + (100 * c.a)) DAY as Date
        from (select 0 as a union all select 1 union all select 2 union all select 3 union all select 4 union all select 5 union all select 6 union all select 7 union all select 8 union all select 9) as a
        cross join (select 0 as a union all select 1 union all select 2 union all select 3 union all select 4 union all select 5 union all select 6 union all select 7 union all select 8 union all select 9) as b
        cross join (select 0 as a union all select 1 union all select 2 union all select 3 union all select 4 union all select 5 union all select 6 union all select 7 union all select 8 union all select 9) as c
        ) a

    WHERE 
        a.Date BETWEEN @beginDate AND @endDate 

    GROUP BY
        MONTH( a.Date )

    ) AS days
    ON rate.month = days.month 
```

### 架构：

```
CREATE TABLE 
    rate 
    (
    month INT, 
    price INT
    );

INSERT INTO 
    rate
    ( 
    month, 
    price
    )

VALUES
    ( 1, 5 ),
    ( 2, 7 ),
    ( 3, 5 ),
    ( 4, 3 ); 
```

# c# - 声明作为函数委托的属性的正确方法是什么

> ID：14664750
> 
> 赞同：0
> 
> 时间：2013-02-02T17:57:06.480
> 
> 标签：c#

我的程序中有一个类，`SortableObservableCollection<T>`它继承自`ObservableCollection<T>`. 它有一个名为`Sort`：

```
public void Sort<TKey>( Func<T, TKey> keySelector, int skip = 0 ) 
{
   // . . .
} 
```

我想声明一个名为`Key1`type的属性`Func<T, TKey>`。我试过了：

```
public Func<T, TKey> Key1<T, TKey> { get; set; } 
```

但是我在左大括号上遇到语法错误。该错误表明编译器需要一个左括号。我试过让它成为一个字段声明：

```
public Func<T, TKey> Key1<T, TKey>; 
```

但是编译器在分号上给了我同样的信息。

声明此属性的正确语法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-02T17:57:55.673

首先，您需要扩展类定义以包含泛型参数，`TKey`而不仅仅是在`Sort()`方法级别：

```
public class SortableObservableCollection<T, TKey>
{
} 
```

之后，您将不再需要第二组泛型参数：

```
public Func<T, TKey> Key1 { get; set; } 
```

您还可以从`Sort()`方法中删除泛型参数。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-02T18:25:43.897

您正在尝试创建通用属性，但属性不能是通用的。你必须以某种方式解决这个问题。我能想到几个选择：

1.  将委托声明为`object`-returning：

    ```
    public Func<T, object> Key1 { get; set; } 
    ```

2.  将属性变成一个方法（或两个方法，如果您还需要一个 getter）。这样做的问题是您需要将委托存储在非通用字段中，之后很难使用它：

    ```
    private Delegate key1;

    public void SetKey1<TKey>(Func<T, TKey> key1)
    {
        this.key1 = key1;
    } 
    ```

3.  如果排序键的类型不会改变，请将其作为类的类型参数：

    ```
    public class SortableObservableCollection<T, TKey>
    {
        public Func<T, TKey> Key1 { get; set; }

        …
    } 
    ```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-02T18:16:43.983

您在这里有 2 个选项。首先，您可以将 TKey 作为通用参数添加到类中。

```
public class SortableObservableCollection<T, TKey> : ObservableCollection<T>
{
    public void Sort(Func<T, TKey> keySelector, int skip = 0)
    {
        //...
    }
    public Func<T, TKey> Key1 { get; set; }
} 
```

现在，如果您不能或不想向类添加另一个通用参数，那么您的第二个选择是避免一起使用 Key1 的属性。

```
public class Sort2<T> : ObservableCollection<T>
{
    Type keyType;
    object key1;

    public void Sort<TKey>(Func<T, TKey> selector, int skip = 0)
    {
        //...
    }

    public void SetKey<TKey>(TKey val)
    {
        keyType = typeof(TKey);
        key1 = val;
    }
    public TKey GetKey<TKey>()
    {
        return (TKey)key1;
    }

    public Type GetKeyType()
    {
        return keyType;
    }

} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-02T18:01:35.283

试试这个：

```
public class SortableObservableCollection<T, TKey>:ObservableCollection<T>
{
    public Func<T,TKey> Key1 {get; set;}
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-05T15:28:04.567

虽然每个人的答案都会奏效，但它们并不完全是我试图解决的问题。最初，我有一个名为的类的方法`Sort:`

```
public void Sort<TKey>( Func<T, TKey> keySelector, . . . ) {
    // . . .
} 
```

这很好用，但后来我在我的 UI 中发现了一个与多次调用 Sort 方法有关的错误。排序本身有效，这不是问题。该错误令人费解且难以解释，我宁愿不深入探讨。但最简单的解决方案是确保集合仅在正确的键上排序一次。问题是键会根据集合绑定到的特定下拉列表而有所不同。所以我需要一种方法来封装集合中的排序标准，这样它就可以第一次也是唯一一次进行正确的排序。

由于我已经有了`Sort`上面提到的方法，我认为最简单的方法是将 keySelector 参数放入类的属性中。事实证明，语言不允许你这样做，现在我知道并理解为什么了。

我最终要做的就是用`Func`对实现的对象的引用替换属性`IComparer<T>`。我很容易声明这个属性，并且很容易声明一个类，为`T`集合声明中作为参数传递的每个类型实现它。我只是在分配集合对象后初始化属性，然后我重写了`Sort`方法，所以它看起来像这样：

```
public void Sort() {
    if ( Comparer != null ) {
        InternalSort( Items.Skip( RowsToSkip ).OrderBy( item => item, Comparer ) );
    } else { 
        InternalSort( Items.Skip( RowsToSkip ).OrderBy( item => item ) );
    }
} 
```

`RowsToSkip`是类的一个`int`属性，它指定要跳过集合开头的行数。这让我可以在列表的开头添加一个类似“选择一个选项”的条目，而不是让排序移动它。

# ruby - 对外部块的屈服调用感到困惑

> ID：14664752
> 
> 赞同：1
> 
> 时间：2013-02-02T17:57:08.533
> 
> 标签：ruby

**代码-I**

```
def sample
  x = "hi"
  puts " #{x}"
  x = yield
  puts " #{x}"
end 
```

在下面的代码`block {}`中 =>`sample {"hellooo"}`调用 `yield`并将“hellooo”分配给`x`. 看起来不错，符合预期。

```
sample{'helloo'}
# >>  hi
# >>  helloo 
```

**代码-II**

```
o = Object.new
def o.each
  x = yield
  p x
  x = yield
  p x
  x = yield
  p x
end
e = o.to_enum # => #<Enumerator: #<Object:0x007fd1d20494e8>:each> 
```

**为什么在下面的调用中没有发生同样的情况`e.next "sample"`，因为 p 没有打印任何东西？**

```
e.next {"sample"} # => nil
e.next # => nil
# >> nil 
```

**编辑**（这里是如何`enum#feed`在 的帮助下改变的`yield`？）

```
o = Object.new
=> #<Object:0x2299d88>
def o.each
x = yield         
p x       
x = yield
p x 
x = yield
p x 
end
=> nil
e=o.to_enum
=> #<Enumerator: #<Object:0x2299d88>:each>
e.next
=> nil
e.feed "hi"
=> nil
e.next
"hi"
=> nil 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-02T18:13:06.420

`next`不占用块。因此，如果您通过它，它只会忽略它。

`next`使用枚举器的方法时，无法模拟从块返回的内容。使用 时`to_enum`，分配给该`each`方法的块将始终返回`nil`，除非该`feed`方法先前提供了一个值。

# python - 如何只在程序的另一个地方阻止进入一个部分？

> ID：14664753
> 
> 赞同：0
> 
> 时间：2013-02-02T17:57:10.000
> 
> 标签：python, multithreading, python-multithreading

我有两段代码：

```
section_a

# some code

section_b 
```

仅当执行**section_b**时，我才需要阻止**section_a**。如果**section_b中没有块，则****section_a**可以由多个线程执行。

 ******当**section_b**开始执行时，我需要向其他线程发送一个信号，不要进入**section_a**（在它之前等待）。当最后一个线程离开**section_a**时，必须执行**section_b 。**

如果我使用条件锁定 (threading.Condition.acquire(), threading.Condition.release()) 来解决问题，我很困惑如何允许多个线程同时进入**section_a**。当我们在**section_a**之前调用 condition.acquire() 时，其他线程也会被阻塞以进入该部分。

```
while True:

    condition.acquire() # other threads that would enter point_a can't do that after this acquire()
    #section_a, point_a
    condition.release()

# another place of a program
while True:
    condition.acquire() # I'd like threads can't enter section_a after this acquire, but not after acquire before point_a
    #section_b
    condition.release() 
```

如果**section_a**由任何线程执行，我需要阻止**section_b 。**

 **你能告诉我正确的结构吗？

执行我，我对多线程没有经验。可能有一个完全不同的结构。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-02T18:24:33.773

您可以使用[threading2](http://pypi.python.org/pypi/threading2)`SHLock`中的（共享锁），这似乎完全符合您的要求。

它的`acquire`方法有一个`shared`参数，如果传入 as `true`，则将其锁定为共享模式，如果传入 as `false`，则将其锁定为独占模式。

在您的示例中，您将`acquire`在进入 section_a 时以共享模式调用，这将允许任意数量的线程进入 section_a。当您进入 section_b 时，您将锁定在独占模式，这将防止任何同时共享模式锁定（即任何人在您持有锁定的同时进入 section_a）********

# python - 询问：漂亮的汤 + 一个 href 模式没有像我想要的那样刮

> ID：14664755
> 
> 赞同：0
> 
> 时间：2013-02-02T17:57:28.780
> 
> 标签：python, python-2.7, beautifulsoup

我有以下 html 模式，我想使用 BeautifulSoup 报废。html模式是：

```
<a href="link" target="_blank" onclick="blah blah blah">TITLE</a> 
```

我想获取 TITLE 和链接中显示的信息。也就是说，如果您单击该链接，则会有 TITLE 的描述。我想要那个描述。

我开始尝试使用以下代码获取标题：

```
import urllib
from bs4 import BeautifulSoup
import re

webpage = urrlib.urlopen("http://urlofinterest")

title = re.compile('<a>(.*)</a>')
findTitle = re.findall(title,webpage)
print findTile 
```

我的输出是：

```
% python beta2.py
[] 
```

因此，这显然甚至找不到标题。我什至尝试过`<a href>(.*)</a>`，但没有奏效。根据我对文档的阅读，我认为 BeautifulSoup 会抓取我给它的符号之间的任何文本。在这种情况下，我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-02T18:02:40.777

你为什么要导入beautifulsoup，然后根本不使用它？

```
webpage = urrlib.urlopen("http://urlofinterest") 
```

您需要从中读取数据，以便：

```
webpage = urrlib.urlopen("http://urlofinterest").read() 
```

Something like (should get you to a point to go further):

```
>>> blah = '<a href="link" target="_blank" onclick="blah blah blah">TITLE</a>'
>>> from bs4 import BeautifulSoup
>>> soup = BeautifulSoup(blah) # change to webpage later
>>> for tag in soup('a', href=True):
    print tag['href'], tag.string

link TITLE 
```

# openlayers - 如何覆盖 OpenLayers.Protocol.HTTP 的 url？

> ID：14664759
> 
> 赞同：0
> 
> 时间：2013-02-02T17:57:43.493
> 
> 标签：openlayers, javascript

如何覆盖 OpenLayers.Protocol.HTTP 的 url？我试过

> searchformPanel.protocol.url

它可以工作（使用console.log检查），但最后会发送原始url（在下面的代码中：url：'/fs/'）（见附图）。

![萤火虫的输出](../Images/7d8484eb1c74c3bdf84df5daa2c1ecef.png)

这是代码：

```
var searchformPanel = new GeoExt.form.FormPanel({
  border: false,
  width: 250,
  protocol: new OpenLayers.Protocol.HTTP({
    url: '/fs/',
    format: new OpenLayers.Format.GeoJSON()
  }),
  items:[{
    xtype: 'combo',
    id: 'idcombo',
    store: new Ext.data.SimpleStore({
      fields:['fsclass','ollayer'],
      data:[["Boreholes","Boreholes"],["All_layers","All layers"]]
    }),
    displayField: 'ollayer',
    valueField: 'fsclass',
    fieldLabel: 'Layer',
    emptyText: 'select a layer',
    submitValue: false,
    selectOnFocus: true,
    mode: 'local',
    typeAhead: true,
    editable: false,
    forceSelection: true,
    triggerAction: 'all'
  },{
    xtype: 'textfield',
    id: 'idtextfield',
    fieldLabel: 'Find features',
    emptyText: 'enter word',
    name: 'comments__like',
    allowBlank: false
  }],
  listeners:{
    actioncomplete: function(form, action){
      searchShowTip(action.response.features);
    }
  },
  buttons:[{
    text: 'search',
    listeners:{
      click: function(){

        var comboLayer = Ext.getCmp('idcombo').getRawValue();
        var keyword = Ext.getCmp('idtextfield').getRawValue();

        var newUrl = '/fs/' + comboLayer + '?format=GeoJSON&comments__ilike=' + keyword + '&queryable=comments';
        console.log('1:' + newUrl);

        //this gets '/fs/' from the searchformPanel
        console.log('2:' + searchformPanel.protocol.url);

        searchformPanel.protocol.url = newUrl;
        console.log('3:' + searchformPanel.protocol.url);

        searchformPanel.search();
      }
    }
  }] 
```

});

非常欢迎对此的任何支持，谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T18:01:11.323

您的数据格式不正确：

```
data: [["Boreholes","Boreholes"],["All_layers","All layers"]] 
```

应该是这样的：

```
data: { "Boreholes": "Boreholes", "All_layers": "All layers" } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T15:53:41.063

终于成功了！！！！！！！！！诀窍是将协议放在 formPanel 之外，并将 newUrl 替换为“protocol.options.url = newUrl;”。在检查 OpenLayers 的 HTTP.js 的第 180 行之前，我不知道这个“选项”，因为我尝试使用 protocol.read() 并且收到指向该行的错误（如此[处](https://stackoverflow.com/questions/14865195/typeerror-this-options-is-null-in-openlayers-protocol-http)所述）。此外，我正在重新发送 formPanel 的“评论”和“可查询”（所以我删除了上面的“关键字”），因为它是我自己在这个原始问题中发布的。这是一段代码，简单而漂亮：

```
buttons: [{
    text: 'Search',
    handler: function() {
        comboLayer = Ext.getCmp('idcombo').getValue();
        newUrl = '/fs/' + comboLayer + '?format=GeoJSON';
        protocol.options.url = newUrl;
        formPanel.search();
        }
    }] 
```

另外，我对变量和局部/全局范围如何协同工作感到困惑，我想我想出了这个解决方案，因为我知道在“函数”中写东西（因为以上所有内容都在处理程序中调用的 function() 中）使变量在函数声明之前和之后被另一个变量读取，不确定我之前解释的内容是否清楚，但确保[这个链接](http://www.dustindiaz.com/javascript-function-declaration-ambiguity)解释得更好。

希望这可以帮助更多的人，尤其是像我这样的 javascript 和 openlayers 新手！

# ios - NSData 的内容到 NSArray/NSDictionary

> ID：14664760
> 
> 赞同：1
> 
> 时间：2013-02-02T17:57:43.710
> 
> 标签：ios, json, nsarray

我有这个：

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view, typically from a nib.

    NSURL *url = [NSURL URLWithString:@"http://www.xyz.com/ios/responseScript.php"];

    NSError *error = nil;

    NSURLRequest *request = [NSURLRequest requestWithURL:url];

    NSData *data = [NSURLConnection sendSynchronousRequest:request returningResponse:NULL error:&error];

    NSString *dataString = [[NSString alloc] initWithData:data encoding:NSUTF8StringEncoding];

} 
```

当我打印 dataString 时，它完全显示了我的期望，即

> ["Bannana","Apple","SomeCheese"]

我想把它处理成 NSMutableArray。我怎样才能做到这一点？

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-02T18:03:29.970

试试这个：

```
NSDictionary *dictionary = [NSJSONSerialization JSONObjectWithData:returnData options:kNilOptions error:&error];
NSMutableArray *array = [[NSMutableArray alloc] init];
for(NSString *key in dictionary) {
    [array addObject:[dictionary objectForKey:key]];
} 
```

# android - 在 Twitter 上分享 Android

> ID：14664763
> 
> 赞同：14
> 
> 时间：2013-02-02T17:58:06.353
> 
> 标签：android, twitter

如何在 Twitter 上分享字符串消息？我想让用户在多个字符串消息之间进行选择，然后单击其中一个以通过 Twitter 共享。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-02-02T18:09:51.893

有很多方法可以实现这一点。一种可能是简单地打开[http://twitter.com](http://twitter.com)并以单一意图共享推文，例如..

```
Intent tweet = new Intent(Intent.ACTION_VIEW);
tweet.setData(Uri.parse("http://twitter.com/?status=" + Uri.encode(message)));//where message is your string message
startActivity(tweet); 
```

或者，

```
Intent tweet = new Intent(Intent.ACTION_SEND);
tweet.putExtra(Intent.EXTRA_TEXT, "Sample test for Twitter.");
startActivity(Intent.createChooser(share, "Share this via")); 
```

或者，

```
String tweetUrl = "https://twitter.com/intent/tweet?text=WRITE YOUR MESSAGE HERE &url="
                    + "https://www.google.com";
Uri uri = Uri.parse(tweetUrl);
startActivity(new Intent(Intent.ACTION_VIEW, uri)); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-02-02T18:13:35.690

为了通过 twitter 分享，我在 Util 类中使用了我自己的自定义静态函数，如下所示：

```
public class Util
{
    public static Intent getTwitterIntent(Context ctx, String shareText)
    {
        Intent shareIntent;

        if(doesPackageExist(ctx, "com.twitter.android"))
        {           
            shareIntent = new Intent(Intent.ACTION_SEND);
            shareIntent.setClassName("com.twitter.android",
                "com.twitter.android.PostActivity"); 
            shareIntent.setType("text/*");
            shareIntent.putExtra(android.content.Intent.EXTRA_TEXT, shareText); 
            return shareIntent;
       }
       else
       {
           String tweetUrl = "https://twitter.com/intent/tweet?text=" + shareText;
           Uri uri = Uri.parse(tweetUrl);
           shareIntent = new Intent(Intent.ACTION_VIEW, uri);
           return shareIntent;
       }
   }
} 
```

此功能的优点是，如果安装了 twitter 应用程序，它会使用它，否则，它会使用基于 Web 的 twitter 页面。将要发送推文的文本被传递到函数中。

在您的场景中，当用户从消息中进行选择时，将所选消息传递给函数。然后它会给你一个 Intent，你可以像这样插入 startActivity() 函数：

```
startActivity(Util.getTwitterIntent(context, "Text that will be tweeted")); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-02T18:29:10.393

您可以使用库[Twitter4J](http://twitter4j.org/en/index.html)。下载它并添加到 java bulid 路径。代码示例：

*   添加新推文：

    `Twitter twitter = TwitterFactory.getSingleton();`

    `Status status = twitter.updateStatus(latestStatus);`

*   使用 OAuth 登录（Java 代码，编辑它）：

    ```
    Twitter twitter = TwitterFactory.getSingleton();
    twitter.setOAuthConsumer("[consumer key]", "[consumer secret]");
    RequestToken requestToken = twitter.getOAuthRequestToken();
    AccessToken accessToken = null;
    BufferedReader br = new BufferedReader(new InputStreamReader(System.in));
    while (null == accessToken) {
      System.out.println("Open the following URL and grant access to your account:");
      System.out.println(requestToken.getAuthorizationURL());
      System.out.print("Enter the PIN(if aviailable) or just hit enter.[PIN]:");
      String pin = br.readLine();
      try{
         if(pin.length() > 0){
           accessToken = twitter.getOAuthAccessToken(requestToken, pin);
         }else{
           accessToken = twitter.getOAuthAccessToken();
         }
      } catch (TwitterException te) {
        if(401 == te.getStatusCode()){
          System.out.println("Unable to get the access token.");
        }else{
          te.printStackTrace();
        }
      }
    }
    //persist to the accessToken for future reference.
    storeAccessToken(twitter.verifyCredentials().getId() , accessToken);
    Status status = twitter.updateStatus(args[0]);
    System.out.println("Successfully updated the status to [" + status.getText() + "].");
    System.exit(0); 
    ```

    }

    `private static void storeAccessToken(int useId, AccessToken accessToken){` `//store accessToken.getToken()` `//store accessToken.getTokenSecret()` `}`

    *   获取推文：

        ```
        Twitter twitter = TwitterFactory.getSingleton();
        Query query = new Query("source:twitter4j yusukey");
        QueryResult result = twitter.search(query);
        for (Status status : result.getStatuses()) {
            System.out.println("@" + status.getUser().getScreenName() + ":" + status.getText());
        } 
        ```

*   获取时间线：

    ```
     Twitter twitter = TwitterFactory.getSingleton();
       List<Status> statuses = twitter.getHomeTimeline();
      System.out.println("Showing home timeline.");
       for (Status status : statuses) {
          System.out.println(status.getUser().getName() + ":" +
                           status.getText());
    } 
    ```

    * * *

我希望我有所帮助

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-03-05T11:33:38.927

如果您需要成功响应和推文 ID，您可以使用 twitter SDK 状态服务在 Twitter 上发布推文。你可以使用这个发布文本。

```
 StatusesService statusesService = TwitterCore.getInstance().getApiClient().getStatusesService();
    Call<Tweet> tweetCall = statusesService.update(text, null, false, null, null, null, false, false, null);
    tweetCall.enqueue(new Callback<Tweet>() {
        @Override
        public void success(Result<Tweet> result) {
            Log.d("result", result.data.idStr);
        }

        @Override
        public void failure(TwitterException exception) {
            hideProgressDialogResult();
            exception.printStackTrace();

        }
    }); 
```

您也可以上传带有描述的图像，但在此之前您必须使用 twitter 媒体服务创建图像的媒体 ID，并将此媒体 ID 传递给状态服务。

# powershell - 将参数传递给 Start-Job 脚本块？

> ID：14664764
> 
> 赞同：6
> 
> 时间：2013-02-02T17:58:12.663
> 
> 标签：powershell, powershell-2.0

我想设置一个 cmdlet 来启动和停止 mysql，我正在尝试使用 Start-Job 来实现。我的 Powershell 配置文件中有以下内容：

```
$mysqlpath = "C:\Program Files\MySQL\MySQL Server 5.5\bin"
Function Start-Mysql
{
    Start-Job -ScriptBlock { & "$mysqlpath\mysqld.exe" }
} 
```

但是，该变量似乎没有在 job 命令中扩展？我一定错过了某种范围规则。有人可以建议吗？谢谢！

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-02T18:21:17.407

你必须使用`-argumentlist`参数见[get-help start-job](http://technet.microsoft.com/en-us/library/hh849698.aspx)：

```
 start-job  -ScriptBlock { & $args[0] } -ArgumentList @($mysqlpath ) 
```

请注意，在 V3 中，您只需`using:`在 varname ex 之前使用前缀：

```
 Start-Job -ScriptBlock { & "$using:mysqlpath\mysqld.exe" } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2021-08-31T17:15:25.930

[Loïc MICHEL 的回答](https://stackoverflow.com/a/14664983/584676)是正确的，但是如果您发现很难记住哪个位置参数是 中的哪个`ScriptBlock`，我想提供一个使用`param`关键字的技巧。在 , 中`ScriptBlock`，以您对高级函数的方式开始正文`param`，并将您的代码也放在后面，就好像它是一个函数一样：

> **注意：**名称`ScriptBlock` `param`在当前会话中不需要相同`ScriptBlock`，可以相同或完全不同。重要的是您在`-ArgumentList`.

```
Start-Job { param( $mysqlpath ) & "$mysqlpath\mysqld.exe" } -ArgumentList $mysqlpath 
```

这是有效的，因为 a`ScriptBlock`只是一个未命名的函数，因此您可以以与定义适当函数时*几乎*相同的方式定义参数。in中的参数按提供的顺序`-ArgumentList`传递给`ScriptBlock`作为位置参数，因此默认情况下，参数传递的顺序与它们绑定到命名参数 in 的顺序相同。

虽然`$using:`范围在语法上更易于使用，但这种方法可以让您在这里获得最好的结果，因为`$using:`范围不能在当前会话中使用。这是非常有用的`ScriptBlock`，您需要能够在*任何*上下文中执行，并且它足够复杂以至于通过索引引用参数变得难以管理。这种方法允许您命名参数并`ScriptBlock`在*所有*执行上下文中使用任何参数，无论是`Start-Job`、`Invoke-Command`、还是使用调用运算符`powershell.exe`执行 a 。`ScriptBlock``&`

`$args[i]`如果您想使用命名变量而不是引用每个变量，这是（如果不是）最可移植的解决方案之一。

# php - PHP类型提示错误？

> ID：14664765
> 
> 赞同：7
> 
> 时间：2013-02-02T17:58:12.887
> 
> 标签：php, php-5.3, type-hinting

我刚收到这个致命错误

> 可捕获的致命错误：传递给 File::__construct() 的参数 1 必须是整数的实例，整数给定，在第 9 行的 /home/radu/php_projects/audio_player/index.php 中调用并在 /home/radu/php_projects 中定义/audio_player/php/File.php 在第 7 行

所以，有课

```
class File{        
        public $id;
        public $name;
        public $file_paths;
        public function __construct(integer $id=null, string $name=null, array $file_paths=null)
        {
            foreach(func_get_args() as $name => $val)
            {
                $this->$name = $val;
            }
        }
    } 
```

这是触发错误的代码

```
$file = new File(1, "sound", array()); 
```

我是否遗漏了什么或者这个 PHP 类型提示有什么不好的地方？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2017-09-26T11:58:41.843

因为这可能会产生误导，而且这个答案在搜索引擎中仍然很高。

**PHP 7 确实为标量类型引入了类型提示**

PHP 5 中没有标量类型提示，因此`integer`类型提示被认为是类类型提示。

更多参考[http://php.net/manual/en/functions.arguments.php#functions.arguments.type-declaration](http://php.net/manual/en/functions.arguments.php#functions.arguments.type-declaration)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-02T18:04:01.867

据我所知，您不能在 PHP 中使用整数类型提示。但是，PHP.net 中的某个人有这样有用的评论：

[http://www.php.net/manual/en/language.oop5.typehinting.php#83442](http://www.php.net/manual/en/language.oop5.typehinting.php#83442)

如果您确实需要此功能，这显然是一种适合您的解决方法。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-06-11T15:44:42.090

您不能强制参数为整数。

看这里[language.oop5.typehinting](http://php.net/manual/en/language.oop5.typehinting.php)：

> PHP 5 引入了类型提示。函数现在能够强制参数为对象 [...]、接口、数组（自 PHP 5.1 起）或可调用（自 PHP 5.4 起）。
> 
> [...]
> 
> 类型提示**不能用于标量类型**，例如 int 或 string。[...]

在这里[language.types.intro](http://docs.php.net/manual/en/language.types.intro.php)，PHP 标量类型是：

> ```
> - 布尔值
> - 整数
> - float（浮点数，又名双精度）
> - 细绳
> 
> ```

# c# - 获取解决方案中的所有主题

> ID：14664767
> 
> 赞同：1
> 
> 时间：2013-02-02T17:58:31.437
> 
> 标签：c#, asp.net, .net

如何从`App_Themes`我的 Web 项目中获取所有主题？

我想获得所有这些并放入下拉列表中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-02T18:05:48.397

类似的东西会给你主题名称列表：

```
var path = Server.MaPPath("~/App_Themes");
var list = Directory.GetDirectories(path)
                    .Select(folder => new DirectoryInfo(folder).Name)
                    .ToList(); 
```

# java - 在spring mongodb中索引复合对象

> ID：14664770
> 
> 赞同：0
> 
> 时间：2013-02-02T17:58:48.877
> 
> 标签：java, spring, mongodb, annotations

我有一个复合对象，我希望存储在 mongodb 中（使用 spring 注释）。对象如下：

```
@Document(collection="person")
class Person {

@Id
private String id;

private Address address;

private String name;

} 
```

和复合类地址：

```
@Document
class Address {

@Indexed
private Long countryId;

private String street;

@Indexed
private String city
} 
```

我需要将国家和城市作为人员集合的一部分进行索引。唉，没有为他们创建索引。任何想法如何创建索引？

我尝试了以下方法，但并不优雅：

```
@Document(collection="person")
@CompoundIndexes({
    @CompoundIndex(name = "countryId", def = "{'address.countryId': 1}")
})
class Person { 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T17:03:03.190

You can set up multiple [secondary indexes](http://docs.mongodb.org/manual/core/indexes/#secondary-indexes), if you wish. This would be a good place to start.

# objective-c - 优化动态 UILabel 创建

> ID：14664774
> 
> 赞同：2
> 
> 时间：2013-02-02T17:59:30.293
> 
> 标签：objective-c, xcode, optimization, for-loop, uilabel

假设我正在运行以下代码。我正在动态创建添加到 UIScrollview 的 1000 个 UILabel。然而，这段代码运行得非常慢，因为每次循环出现时我都必须创建一个新的 UILabel。我不能移动线 UILabel *dayLabel = [[UILabel alloc] init]; 在循环之前，因为它只创建 1 个 UILabel。关于如何优化这段代码的任何想法？

```
for (int i=0; i<1000; i++) {
    UILabel *dayLabel = [[UILabel alloc] init];
    dayLabel.multipleTouchEnabled = YES;
    dayLabel.frame = CGRectMake(0,  40 * i, 40, 40);
    [_scroller addSubview:dayLabel];
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-02T18:10:20.983

解决创建对象问题的唯一方法是不创建它们。或者至少还没有创建它们。

所有 1000 个标签都不适合屏幕，因此您只需创建一组适合的标签。然后您观察滚动事件，并动态创建可见的标签。同时，您可以在标签从屏幕上滚动时删除它们。保留这些标签：您可以重复使用回收列表中的旧标签，而不是每次都创建一个新标签。

现在你可能想知道你是否在某个地方看到过这个方案。你是对的，它与 UITableView 用于其单元格的方案相同。这是一段复杂的代码，所以如果你可以用一个表格替换一个满是标签的滚动视图，你会为自己节省很多工作。

# android - PhoneGap app - JSONP Request happening in browser, but not on device (Android)

> ID：14664780
> 
> 赞同：2
> 
> 时间：2013-02-02T18:00:23.493
> 
> 标签：android, cordova, jsonp

I am trying to make a JSONP call in my PhoneGap application. It works fine in my desktop browser, but not in the device. I thought it might be an issue with the jQuery Mobile, so I even tried disabling it, but doesn't help.

Android version: 3.0

This is my code:

```
<link rel="stylesheet"  href="css/themes/default/jquery.mobile-1.1.0.css" />
<script src="js/jquery.js"></script>
<script src="js/jquery.mobile-1.1.0.js"></script>
<script src="cordova-2.1.0.js" type="text/javascript" charset="utf-8"></script>
<script type="text/javascript">
    function cancelclicked() {
        window.location.href="index.html";
    }

     function jsonp_call()
        {
            // The call request here
        }
        function parseRequest(response)
        {
            // Parse the response here
        }
</script> 
```

```
<div data-role="page" class="type-interior">

<div data-role="header" data-theme="b">
    <h1>Login</h1>
</div>
<div data-role="content">
    <div class="content-primary">
            <div data-role="fieldcontain">
             <label for="name">Username:</label>
             <input type="text" id="uname" />
            </div>

            <div data-role="fieldcontain">
             <label for="name">Password:</label>
             <input type="password" name="name" id="pass"  />
            </div>
            <div data-role="fieldcontain">
                <label for="name" id="invalidlogin"></label>
            </div>
            <div class="ui-body ui-body-b">
            <fieldset class="ui-grid-a">
                    <button type="submit" onclick="return jsonp_call()" data-theme="e" rel="external">Login</button>
                    <!--</form>-->
                    <button type="submit" onclick="cancelclicked()" data-theme="d">Cancel</button>
            </fieldset>
            </div>
    </div>
</div> 
```

What am I missing here? It works fine on a browser, so I'm quite sure that the JSONP code is correct. It fails on the emulator and the device as well.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-02T20:03:51.360

Did you add the domain name into the Cordova config file? It is under res/xml/config.xml

```
<access origin="bla.bla.domain.com" /> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-03-22T18:49:48.460

For me the access origin setting was already set. But still i got the problem.

It turns out to be a couple of missing closing HTML tags. (in my case closing A HREF tags ) When i only changed this, it was working again on Android. Chome automatically fixed the missing closing tags.

Quite a headache, because i had no problems during testing in my webbrowser, and i thought it had to do with the jsonp implementation, or security/signing issues.

# javascript - javascript中的嵌套for循环

> ID：14664784
> 
> 赞同：0
> 
> 时间：2013-02-02T18:00:49.547
> 
> 标签：javascript, for-loop, nested

我只是想知道是否可以就javascript中嵌套for循环遇到的问题获得一些指导。

我目前有以下嵌套的 for 循环

```
for (var i = 0; i <= score; i++)
{
    for (var j = 0; j <= i; j++)
    {
        var stsc = '<img src="./images/star.png"/>';
    }
} 
```

目的是让变量 stsc 根据 score 变量的计数显示星星的数量。

目前，无论 score 的值是多少，它都只会显示 1 星。我尝试在嵌套循环之外添加 stsc 无济于事。无论我做什么，它只会显示 1 颗星。

你能否指出我正确的方向，如何让它显示正确的星数（如果得分为 3，则为 3 星，如果得分为 0，则为 0 星等......）

谢谢大家

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-02T18:09:12.207

```
var stsc="";
var score=0;
for (var i = 1; i <= score; i++)
{

        stsc = stsc +'<img src="./images/star.png"/>';

} 
```

[http://jsfiddle.net/m5Btd/1295/](http://jsfiddle.net/m5Btd/1295/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-02T18:06:42.383

你只需要一个正常的`for`循环和[字符串连接](https://developer.mozilla.org/en-US/docs/JavaScript/Guide/Expressions_and_Operators#String_operators)：

```
var stsc = '';

for (var i = 0; i < score; i++) {
    stsc += '<img src="./images/star.png"/>';
} 
```

想一想：你想创造`n`星星，`n`分数的价值在哪里。因此，您必须重复创建 HTML 字符串的过程`n`。这就是`for`循环正在做的事情，重复某些事情直到满足条件。而不是在每次迭代中*覆盖*变量，您必须*添加*它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-02T18:26:56.980

您不需要*任何* `for`循环：

```
var stsc = score === 0 ? "" : new Array(score + 1).join("<img src=./images/star.png>"); 
```

# java - Java：为什么我不能将数组声明为简单对象？

> ID：14664790
> 
> 赞同：12
> 
> 时间：2013-02-02T18:01:11.733
> 
> 标签：java, arrays, multidimensional-array

在Java中，我可以编译

```
Object[] obj = {new Object[1], new Object[2]}; 
```

但我无法编译

```
Object obj = {new Object(), new Object()}; 
```

在第一个示例中，我声明 a `one-dimensional array`of`Objects`并为其分配 a `two-dimensional array`。在第二个中，我声明一个`Object`并为其分配一个一维数组。

如果 Java 数组 extends `Object`，为什么第二个代码片段不编译？为什么是第一个？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-02-02T18:05:18.253

将数组分配给对象不是问题，但是您必须像这样创建数组

```
Object obj = new Object[] { new Object(), new Object[2] }; 
```

否则编译器不会知道它是一个对象数组而不是其他类型的数组。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-02-02T18:04:02.847

因为`Array`不仅仅是`Object`. 数组还具有[语言级别的语义和语法](http://docs.oracle.com/javase/specs/jls/se7/html/jls-10.html)。

另外，您的第二个示例引出了一个问题：对象将在哪里存储您尝试初始化它的那两个东西？您刚刚声明了一个对象，但它没有命名字段，并且缺少数字索引的插槽数组。

您的第一个示例可以编译，因为您已经声明了一个数组`Object`（也就是说，对象引用），并且您为其初始化该数组的元素是对象引用（对您通过创建的单元素数组的引用`new Object[1]`）。

这也可能有所帮助：Java 并没有真正的二维数组，尽管有一些方便的语法使它看起来像它。它具有（一维）数组的（一维）数组（……你明白了）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-02T22:01:08.900

问题是，当您使用初始化程序创建数组时，编译器需要通过根据提供的类型检查元素的类型来确保初始化程序中的所有元素都具有相同的提供类型。

也就是说，在初始化数组时总是需要提供类型信息。否则，编译器不知道如何验证数组初始化是否有效，从而给出`illegal initializer error`.

将数组分配给对象没有问题。例如，您可以执行以下操作：

```
int[] arr = {1,2};
Object obj = arr; 
```

以下代码将无法编译：

```
Object obj = {1,2}; 
```

因为您没有明确提供编译器需要验证初始化程序中的值的元素类型。这是 Java 中数组初始化所必需的。

以下代码将编译：

```
Object[] obj = {1,2}; 
```

因为提供了元素的类型（即`Object`），编译器将根据类型检查`1`,`2`的类型`Object`（由于`Integer`是 的子类型，因此成功`Object`）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-02T18:05:43.067

你不能编译

```
Object obj = {new Object(), new Object()}; 
```

因为 obj 不是数组，所以这样声明

```
Object[] obj = {new Object(), new Object()}; 
```

或者

```
Object obj = new Object[] { new Object(), new Object() }; 
```

在以下对话后编辑

# android - 如何提高我的应用程序的设备兼容性？

> ID：14664791
> 
> 赞同：2
> 
> 时间：2013-02-02T18:01:19.577
> 
> 标签：android, android-manifest, compatibility

我发现在我们的任何新 Android 手机（Galaxy Note 和 HTC Evo 4g lte）上都无法在 google play 上找到我的应用程序。我认为这与我的清单有关。

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
package="com.example"
android:versionCode="7"
android:versionName="1.15" >

<uses-sdk
    android:minSdkVersion="8"
    android:targetSdkVersion="17" />

<uses-permission android:name="android.permission.INTERNET" />
<uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" />
<compatible-screens>
    <screen android:screenSize="small" android:screenDensity="ldpi"/>
    <screen android:screenSize="normal" android:screenDensity="mdpi"/>
    <screen android:screenSize="large" android:screenDensity="hdpi"/>
    <screen android:screenSize="xlarge" android:screenDensity="xhdpi"/>
</compatible-screens>
<supports-screens android:xlargeScreens="true" android:smallScreens="true" android:anyDensity="true" android:resizeable="true" android:normalScreens="true" android:largeScreens="true"/>

<application
    android:allowBackup="true"
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"
    android:theme="@style/AppTheme" >
    <!-- AdMobActivity definition -->
<activity android:name="com.google.ads.AdActivity"
android:configChanges=    "keyboard|keyboardHidden|orientation|screenLayout|uiMode|screenSize|smallestScreenSize"/>
    <activity
        android:name="com.example.MainActivity"
        android:label="@string/app_name"
        android:configChanges="orientation|keyboardHidden|keyboard" >

        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
</application>

</manifest> 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-02T18:04:43.477

```
<compatible-screens>
    <screen android:screenSize="small" android:screenDensity="ldpi"/>
    <screen android:screenSize="normal" android:screenDensity="mdpi"/>
    <screen android:screenSize="large" android:screenDensity="hdpi"/>
    <screen android:screenSize="xlarge" android:screenDensity="xhdpi"/>
</compatible-screens> 
```

这限制了您对小屏幕和 ldpi 设备的兼容性。所以不支持带 mdpi 的小屏幕。我会删除这个块，`<supports-screens>`应该足以让它对那里的所有设备可见。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-02T18:04:25.010

> 我认为这与我的清单有关。

那是正确的。

我将首先删除您的`<compatible-screens>`元素，或者至少扩展尺寸/密度组合的列表。就目前而言，在 16 种可能性中，您声称仅支持其中的 4 种，并且有些（例如`small`/ `ldpi`）相当不受欢迎。如果您想说您支持所有尺寸和密度，请删除该`<compatible-screens>`元素。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-02-03T08:29:43.927

它与您的清单文件无关。例如，您可以通过智能手机上的“搜索”选项找到应用程序，即使该应用程序仅适用于平板电脑。

您找不到您的应用程序的原因是它不够受欢迎，无法显示在您的结果中，它会出现在许多应用程序页面之后。

要查看您的应用程序，只需键入应用程序的包而不是名称。例如：com.example.myapp

# windows-phone-8 - 运行 Windows Phone 8 资源密集型任务的任何提示？

> ID：14664796
> 
> 赞同：4
> 
> 时间：2013-02-02T18:02:05.550
> 
> 标签：windows-phone-8, background-agents

在部署到手机几天后，我一直试图让资源密集型任务后台代理以发布模式运行，但从未见过它运行。有没有人让它在调试器之外工作？在它运行之前您需要等待多长时间？

我能够使用 LaunchForTest 启动并成功运行资源密集型任务，但从未让它在发布模式下运行，即使任务显示它已被安排。我已经按照样品进行了操作，手机应该已经满足了发布的要求。我也已将清单设置为自动上传，因此不需要为任务设置到期日期。

手机已插入并正在充电，电池电量为 100%。手机有wifi接入。手机处于锁定屏幕上，并以这种方式放置了 2 晚。

我在诺基亚 Lumia 920 和 HTC699OL 上都试过这个

我能够运行定期任务，但不能运行资源密集型任务。如果定期运行，我假设我已经在 WMAppManifest 中正确配置了所有内容，并且资源密集型任务应该在某个时候运行？

资源密集型任务显示以下内容：

*   IsEnabled = 真
*   IsShceduled = 真
*   LastScheduledTime: 1/1/0001 12:00:00
*   到期时间：12/31/9999 11:59:59
*   最后退出原因：无

该应用程序显示在“设置”>“后台任务”>“高级”中。

运行 Store Kit 测试显示电话应用程序没有 API 调用问题，并且我从主电话应用程序项目中引用了代理项目。

这是代理的 WMAppManifest 设置：

```
<ExtendedTask Name="BackgroundTask">
    <BackgroundServiceAgent Name="SML.Sync.WP8.Agent" Specifier="ScheduledTaskAgent" Source="SML.Sync.WP8.Agent" Type="SML.Sync.WP8.Agent.BackgroundUploadAgent" />
</ExtendedTask> 
```

根据此处的 MSDN 文档，这似乎是正确的：[MSDN Task Element documentation](http://msdn.microsoft.com/en-us/library/windowsphone/develop/ff769509%28v=vs.105%29.aspx#BKMK_TASKSelement)

这是自动上传扩展，它位于 Tokens 节点之后：

```
<Extensions>
  <Extension ExtensionName="Photos_Auto_Upload" ConsumerID="{5B04B775-356B-4AA0-AAF8-6491FFEA5632}" TaskID="_default" />
</Extensions> 
```

我也在没有自动上传设置的情况下尝试过它，并且得到了从未运行过的相同结果。

我也尝试从这里获取示例[http://msdn.microsoft.com/en-us/library/windowsphone/develop/hh202941(v=vs.105).aspx](http://msdn.microsoft.com/en-us/library/windowsphone/develop/hh202941%28v=vs.105%29.aspx)运行但删除 debug_agent 并部署为发布模式，我看到了同样的问题，即使它说它是预定的，也永远不会运行 - 定期运行只是不是资源密集型的。

我知道文档说它可能永远不会运行，但似乎 2 天过去了并且满足任务要求应该可以工作。我需要等一个星期才能看到这个吸盘是否运行？

如果您已获得**资源密集型任务**以在发布模式下实际运行，将非常感谢任何指导或提示。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-11T21:25:38.910

我在 2013 年 2 月 4 日向 Microsoft 发起了支持事件，并在 2 月 5 日收到了他们的回复，内容如下：

> 我与内部 Windows Phone 开发人员合作并确认了以下内容：
> 
> 1.  ResourceIntensiveTask（即Resource Intensive Agent）在Windows Phone 8 操作系统的Release Mode 中不会被触发。
> 2.  仅供参考，自动上传使用 ResourceIntensiveTasks，因此它在 WP8 中也不起作用。
> 3.  计划在未来的 Windows 操作系统更新中包含一个修复程序，最有可能在今年春天晚些时候。该修复程序需要通过构建 Windows Phone 8 操作系统的硬件特定版本的 OEM 进行传播。
> 4.  没有已知的即时/官方解决方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-09-11T05:38:55.167

最近的 GDR2 更新已解决此问题。我验证了资源密集型任务正在我的手机上运行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-07T12:23:36.407

如果你想在后台上传一些东西，也许你甚至不需要这个任务。你可以试试这个：

[http://msdn.microsoft.com/en-us/library/windowsphone/develop/hh202955%28v=vs.105%29.aspx](http://msdn.microsoft.com/en-us/library/windowsphone/develop/hh202955%28v=vs.105%29.aspx)

样品在这里：

[http://msdn.microsoft.com/en-us/library/windowsphone/develop/hh202959%28v=vs.105%29.aspx](http://msdn.microsoft.com/en-us/library/windowsphone/develop/hh202959%28v=vs.105%29.aspx)

# css - 如何使所有浏览器中的文本位置相同？

> ID：14664799
> 
> 赞同：0
> 
> 时间：2013-02-02T18:02:17.377
> 
> 标签：css, image, text, position

在页面上，文本的水平位置因浏览器而异。这是网站：[http](http://www.nyestateslawyer.com/) ://www.nyestateslawyer.com/ ，有问题的文字是红框中的两个电话号码。我希望有人能帮帮忙。提前致谢！

* * *

## 这是CSS：

```
<pre><code>
#phone_text_manhattan
{
z-index:100;
position:absolute;
color:white;
font-size:15px;
left:777px;
top:263px;
}

#phone_text_bkln
{
z-index:100;
position:absolute;
color:white;
font-size:15px;
left:985px;
top:263px;
}
</code></pre> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T18:28:06.340

将该组件放在一个 div 中，并将其相对于该 div 定位。这意味着`position:relative;` 现在最多也这样做，并在根标记处根据浏览器窗口的宽度和高度指定它。这样所有的对齐方式都是一样的。希望这会帮助你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-03T04:25:17.603

感谢 Dipak 的提示。将位置更改为相对并将文本放置在其父 div 中。作品。

# php - 跟踪横幅视图

> ID：14664801
> 
> 赞同：0
> 
> 时间：2013-02-02T18:02:34.087
> 
> 标签：php, javascript

我想要一些关于使用 PHP 和 JS 跟踪横幅视图的方法的帮助。我知道如何跟踪横幅点击，但我看不到跟踪视图的方法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-02T18:13:18.717

如果您的横幅是图像，您可以将其 URL 替换为记录视图并返回图像的 PHP 脚本。

例如：`<img src="http://img.com/img.png">`--> 在 PHP 脚本上重写 --> 日志 --> 返回图像

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-02T18:30:25.297

如果您想永久存储已查看横幅/图像的次数，请修改数据库中包含图像 ID 的表。

表横幅

`id`| `path`| `clicks`|`views`

**www.example.org/products.php?products=type_a**

```
<?php
// other code
$type = $_GET["products"];
// sanitize $type
$views;
$products_selected = get_product_ids_from_type($type);
$query = "..."; // use $products_selected to create a query that will help to get image records from table
while($row = mysql_fetch_row(...)) { 
  echo "<img src='".$row[1]."' />";
  $views[$row[0]] = $row[3]; // get the old number of views
}
foreach($products_selected as $id) {
$query = "insert into `table-banner` (`views`) values ('".($views[$id] + 1)."') where id=`".$id."`;";
// perform the query
} 
```

* * *

这意味着当有人点击链接**www.example.org/products.php?products=type_a**时，请求会转到服务器，因为`type_a`选择了产品，您的 .php 文件将使用该类型来获取 id 和显示相应的图像，并在获取这些图像进行显示时，同时更新每个图像记录的视图列

如果您还想使用 JavaScript（这不是必需的），您可以

```
<script>
var selected_ids = [
<?php
  foreach($products_selected as $v) {
    echo $v.",";
  }
?>
];</script>
<script>
  $(function() {
   for(x in selected_ids) {
    $.ajax({
      type: "POST",
      url: "ajax.php",
      data: { id: selected_ids[x] }
    }).done(function( msg ) {
      alert( selected_ids[x] + " now has views : " + msg );
    });
   }
  });
</script> 
```

**www.example.org/ajax.php**

```
$id = $_POST["id"];
// create connection
$view = 0;
$query = ...; // get old views from id and store in $view
// perform the query to insert new view
$query = "insert into `table-banner` (`views`) values ('".($view + 1)."') where id = `".$id."`;";
echo $view; 
```

# java - jLabel 中的刷新计数器

> ID：14664805
> 
> 赞同：2
> 
> 时间：2013-02-02T18:02:44.053
> 
> 标签：java, swing, jlabel

单击按钮时，有什么方法可以刷新 jLabel 中的计数器？我已经尝试过 repaint()、revalidate() 方法，但都不起作用。

当喜欢按钮点击时：

```
 jButton_like.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent e) {
                int count = 1;
                eForumLikeCounter likeAmount = new eForumLikeCounter(
                        userName, topicId, count);
                if (likeAmount.checkLikeAmount() == true) {
                    JOptionPane
                            .showMessageDialog(null,
                                    "Unable to perform like on the same thread by the same user");
                } else if (likeAmount.checkDislikeExists() == true) {
                    JOptionPane
                            .showMessageDialog(null,
                                    "You can only either like or dislike this thread");
                } else {
                    likeAmount.likeCounter();
                }
            }
        });
    } 
```

为数据库设置：

```
 public void SetUpLikeDislikeAmount() {
    int likes = 0;
    int dislike = 0;
    // Set Up Database Source
    db.setUp("IT Innovation Project");
    String sql = "Select likeDislike_likes,likeDislike_dislike from forumLikeDislike WHERE likeDislike_topics = "
            + topicId + "";
    ResultSet resultSet = null;
    // Call readRequest to get the result
    resultSet = db.readRequest(sql);
    try {
        while (resultSet.next()) {
            likes += resultSet.getInt("likeDislike_likes");
            dislike += resultSet.getInt("likeDislike_dislike");
        }
        resultSet.close();
    } catch (Exception e) {
        System.out.println(e);
    }
    jLabel_like.setText(Integer.toString(likes));
    jLabel_dislike.setText(Integer.toString(dislike));
} 
```

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-02T18:05:41.353

只需`setText()`使用`JLabel`. 大概是这样的：

```
counter.setText(""); 
```

或者

```
counter.setText("0"); 
```

# json - 使用 Knockout JS/JQuery 将表单数据作为 Json 发布

> ID：14664809
> 
> 赞同：0
> 
> 时间：2013-02-02T18:03:12.663
> 
> 标签：json, jquery, knockout.js

当我尝试将 Json 格式的表单数据发布到服务器时，我正在运行一些错误。我的代码如下。

```
permissionRequestModel.requestPermission = function () {
if ($("#permissionRequestForm").valid()) {
  $.ajax({
          url: "",
          type: "POST",
          data: ko.toJSON(this),
          processData:false,
          contentType: "application/json",
          dataType:"json",
          success: function (result) {
                    alert("Success");
                     },
         error: function (result) {
             alert(result.responseText);
                 }
           });
          }
    else {
        }
        }; 
```

淘汰赛模型如下

```
//Model
var permissionRequestModel = {
coNumber: ko.observable(''),
employName: ko.observable(''),
fromDate: ko.observable(''),
toDate: ko.observable(''),
checkFullDay: ko.observable(false),
fromTimeHH: ko.observable(''),
fromTimeMM: ko.observable(''),
toTimeHH: ko.observable(''),
toTimeMM: ko.observable(''),
permissionTypeOne: ko.observable(''),
permissionTypeTwo: ko.observable(''),
approverList: ko.observableArray([]),
reasonLeave: ko.observable('')
}; 
```

在某些地方阅读可能是因为 Json 可能在发送到服务器之前被编码，但即使设置 processData 也无法解决它。请指导。

错误信息

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-03T05:51:38.233

更改`this`为`permissionRequestModel`...您`this`不是模型，因为您不再处于模型的上下文中。你在一个函数中，并且`this`将返回该函数。

```
permissionRequestModel.requestPermission = function () {
if ($("#permissionRequestForm").valid()) {
  $.ajax({
          url: url,
          type: "POST",
          data: ko.toJSON(permissionRequestModel),
          processData:false,
          contentType: "application/json",
          dataType:"json",
          success: function (result) {
                    alert("Success");
                     },
         error: function (result) {
             alert(result.responseText);
                 }
           });
          }
    else {
        }
        }; 
```

# javascript - 将 DOM 元素放在其他元素旁边

> ID：14664811
> 
> 赞同：0
> 
> 时间：2013-02-02T18:03:20.227
> 
> 标签：javascript, html, dom

我正在使用`stats.js`，我想把它放在页面`stats.domElement`右上角的旁边`canvas`。

```
stats.domElement.style.position = "absolute";
stats.domElement.style.left = "20px";
stats.domElement.style.top = "20px"; 
```

现在，这是我的代码，但我认为它必须是“相对的”。我检查了 MDN 文档以搜索有关 domElement 相对定位的更多信息，但找不到太多信息。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T18:10:21.920

怎么样：

```
stats.domElement.style.right = "20px"; 
```

# javascript - 为跨域请求重写 XMLHttpRequest

> ID：14664813
> 
> 赞同：2
> 
> 时间：2013-02-02T18:03:41.343
> 
> 标签：javascript, cross-domain

我想知道是否有一个 JavaScript 库，它覆盖`XMLHttpRequest`并允许透明地处理所有跨域请求并通过我的同源服务器端代理无缝转发它们。

我想要的是有一个通用的解决方案，它可以与**任何**JavaScript 库一起使用以发出跨域请求（例如使用 cross-domain `jQuery.ajax()`）。

使用此类库是否有任何缺点（安全问题、HTTPS 访问等）？

**更新：**

如果这样的库已经由某人创建，那么我只是不想重新发明轮子并再次处理所有极端情况。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-02T18:23:19.687

如果您只需要将每个请求重定向到特定代理，您可以简单地自己编写它，类似于

```
XMLHttpRequest.prototype.oldOpen = XMLHttpRequest.prototype.open;
var newOpen = function(args) {
   //overwrite arguments changing the original url to the proxy one, 
   //and add a parameter/header to send the original url to the proxy
   this.oldOpen(args);    
}
XMLHttpRequest.prototype.open = newOpen; 
```

由于代理在同一个域中（如果要允许 x 域代理请求，只需添加 Access-Control-Allow-Origin 标头），它不会发送任何远程域的 cookie（你不会有无论如何，因为 x-domains cookie 被阻止 - 只要您不输入带有标题 Access-Control-Allow-Credentials 的字段）。

一些安全隐患相当明显：

*   您正在代理请求，因此无论加密如何，代理本身都可以访问所有内容
*   将要求代理进行 HTTPS 处理（如果远程 url 是安全的），客户端将无法（或者，另一方面，如果要求代理，则不需要）直接验证服务器证书

更复杂的（相同域，完全支持 cookie）代理实现甚至可以为重写标头的跨域请求提供基本会话处理：

1.  客户端从*www.mydomain.com*请求*www.remotedomain.com/querystring*没有 cookie
**   请求被重写为*proxy.mydomain.com/www.remotedomain.com/querystring**   代理向*www.remotedomain.com/querystring*发出请求，该请求以标头响应

    ***设置 Cookie：名称=值；路径=/; 2012 年 12 月 31 日星期一 23:59:59 GMT 到期***

    *   客户端收到带有标头的响应

    ***设置 Cookie：名称=值；路径=/www.remotedomain.com；2012 年 12 月 31 日星期一 23:59:59 GMT 到期***

    *   在下一个请求中，客户端将发送 cookie，代理将它们转发到远程服务* 

 *但我可能离题太多了。:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-02T19:28:20.813

我不会使用 JS 来满足这种需求......只需将所有 AJAX 调用调用到服务器上充当代理的 PHP 文件（或其他文件）即可。

它只需要接收你要调用的url，POST或GET参数，然后向外部服务器生成一个cURL。

作为回报，它将打印 cURL 请求的输出。*

# list - Scala 列表中的对象类型

> ID：14664822
> 
> 赞同：1
> 
> 时间：2013-02-02T18:04:15.687
> 
> 标签：list, scala, types

我的印象是 Scala List 中的每个对象都必须具有相同的类型，如果我们需要拥有不同类型的集合，则应该使用元组。

从 Scala 的[文档](http://www.scala-lang.org/api/current/index.html#scala.collection.immutable.List)中，`List`是

> 不可变链表的类，表示类型元素的有序集合。

```
scala> val l1 = List(1,2,3)
l1: List[Int] = List(1, 2, 3)

scala> val l1 = List(1,2,3, "oh really?!")
l1: List[Any] = List(1, 2, 3, oh really?!) 
```

情况似乎并非如此。毕竟`Any`它本身就是一个有效的`Scala`类型，一切都可以简化为它。

请说清楚

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-02T18:26:35.220

您没有明确指定列表的类型，而是放入了两种类型的对象，将其设为“Any”类型的列表并且不违反规则似乎很方便。如果您说`val l1: List[Int] = List(1,2,3, "oh really?!")`这将是另一种情况（例如：它会告诉您类型不匹配）

它也不总是只解决 Any 。假设您有一个名为 Vehicle 的类和两个从它继承的名为 Bike 和 Car 的类。

```
val car = new Car
val bike = new Bike
val vehicleList = List(car, bike) 
```

vehicleList 现在将是 Vehicle 类型。如果你只在里面放了一辆汽车或一辆自行车，那么它就会是那种特定的类型。

可选背景信息：Scala 中的 List 是协变的，这意味着如果 Int 和 String 是 Any 的子类型，则 List[Int] 和 List[String] 也是 List[Any] 的子类型。这意味着您可以拥有一个包含整数和字符串的列表，这就是您的语句有效并自动生成 List[Any] 的原因。顺便说一句，这并不总是一个给定的事实，如果列表是可变的，实际上可能会导致麻烦。幸运的是，Scala 中的默认列表不是。如果您想了解更多，可以在[Covariance, Invariance 和 Contravariance 中找到更详细的解释，用简单的英语解释？](https://stackoverflow.com/questions/8481301/covariance-invariance-and-contravariance-explained-in-plain-english)

# matlab - matlab：二维线图水平线

> ID：14664823
> 
> 赞同：2
> 
> 时间：2013-02-02T18:04:17.413
> 
> 标签：matlab, plot, 2d, histogram

这实际上是非常基本的，我以前（很久以前）做过，但现在找不到；我有一个数据点向量，我想用线图绘制；但是我希望线条是水平的并在每个点之间跳跃，这样它基本上看起来像一个直方图。我以为我可以使用具有特定 linespec 的*plot()*，但我找不到适合的。想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-02T19:16:07.957

我相信您正在寻找的功能是`stairs`：

```
x = linspace(-2*pi,2*pi,40);
stairs(x,sin(x)) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-02T19:05:37.230

让`x`和`y`是要使用 绘制的两个相同大小的向量`plot(x,y)`。怎么样

```
yy = reshape( [y(:) y(:)]', 1, [] );
yy(end) = []; % discard last element
xx = reshape( [x(:) x(:)]', 1, [] );
xx(1) = []; % discard first element
plot( xx, yy );
title('does this do the trick for you?'); 
```

# emacs - Emacs/AUCTeX 前缀参数

> ID：14664829
> 
> 赞同：3
> 
> 时间：2013-02-02T18:04:38.480
> 
> 标签：emacs, latex, elisp, auctex

在 LaTeX 模式下`C-c C-c`必须：

```
(TeX-command-master &optional OVERRIDE-CONFIRM) 
```

通常这个交互函数运行一个命令，也许是一个 LaTeX 编译，*要求确认*。

其中`tex-buf.el`写道：

> 如果给出了前缀参数 OVERRIDE-CONFIRM，则确认将取决于它是肯定的，而不是 `TeX-command-list' 中的条目。

这对我来说有点神秘，阅读`C-h v TeX-command-list`没有帮助。

如何将前缀参数传递给“TeX-command-master”，以避免*所有*确认请求？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T02:14:56.977

看来，谜团`OVERRIDE-CONFIRM`还在继续。同时有位小伙伴建议，如果我们无法管理`TeX-command-master`，我们可以简单地重写它。

在我的版本中，基于他的，如果不修改缓冲区，则启动外部查看器；如果缓冲区被修改，则运行编译器。没有确认保存或运行给定命令的所有内容。

```
(defun my-run-latex ()
  (interactive)
  (if (buffer-modified-p)
      (progn  
        (setq TeX-save-query nil) 
        (TeX-save-document (TeX-master-file))
        (TeX-command "LaTeX" 'TeX-master-file -1))
    (TeX-view))) 
```

当然，可以绑定`my-run-latex`到任何键绑定。

从用户的角度来看，这是我自己问题的解决方案。我是否单击关闭标签？好吧，从好奇的人的角度来看，我仍然有兴趣了解神秘的`TeX-command-master`技术细节。

如果有人碰巧知道...

PS 是`TeX-save-query`的，覆盖保存文件请求，也带有`TeX-command-master`，即`C-c C-c`. 但仍会要求您确认命令操作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-03T00:04:37.213

查看[Emacs 的文档](http://www.gnu.org/software/emacs/manual/html_node/emacs/Arguments.html)以了解前缀参数。通常，您可以向命令传递一个前缀参数，`C-u`后跟一个数字。对于一位数字，您也可以只键入`Meta`后跟数字。因此，要将正前缀参数传递给`TeX-command-master`您可以键入：

`M-1 C-c C-c`

但是，这实际上会*添加*另一个 minibuffer 确认，即关于用于编译 LaTeX 源的 shell 命令。如果没有前缀参数，则使用依赖于命令的默认值。

如果您想避免有关要使用的命令的问题，可以通过以下方式将未记录的变量绑定`TeX-command-force`到“LaTeX”：

```
(setq TeX-command-force "LaTeX") 
```

但是，这将具有您基本上绑定到“latex”命令的缺点，您`C-c C-c`不能使用任何其他命令，例如“bibtex”或“view”。

除此之外，LaTeX 模式不允许对`C-c C-c`. 您最好的选择是[建议](https://www.gnu.org/software/emacs/manual/html_node/elisp/Advising-Functions.html)函数`TeX-command-query`或绑定`C-c C-c`到包装函数以`TeX-command-force`动态设置。如果您还想自动保存缓冲区，后者可能是首选选项。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-05T22:08:53.427

## 构建和查看

同样，此解决方案不是修改 的行为，而是`TeX-command-master`重写它。该命令的重写版本名为`build-view`，遵循相当简单的逻辑。

1.  如果 LaTeX 文件缓冲区未修改，则运行默认查看器；
2.  如果缓冲区脏了，它会运行默认的 LaTeX 编译器，并在构建之后在默认查看器中打开输出。

这是代码：

```
(defun build-view ()
  (interactive)
  (if (buffer-modified-p)
      (progn  
    (let ((TeX-save-query nil)) 
    (TeX-save-document (TeX-master-file)))
    (setq build-proc (TeX-command "LaTeX" 'TeX-master-file -1))
    (set-process-sentinel  build-proc  'build-sentinel))
    (TeX-view)))

(defun build-sentinel (process event)    
  (if (string= event "finished\n") 
      (TeX-view)
    (message "Errors! Check with C-`"))) 
```

您现在可以键入`M-x build-view`并启动指定的构建视图过程或将其与新的键绑定相关联，例如“F2”：

```
(add-hook 'LaTeX-mode-hook '(lambda () (local-set-key (kbd "<f2>") 'build-view))) 
```

注意：正如 Tyler 所建议的，`TeX-save-query`变量是在本地更改的，因此旧的`C-c C-c`/`TeX-command-master`不受影响，并且会继续询问确认。

请编辑此代码以使其更好或更易于阅读！

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-02-04T03:30:34.097

我对 OVERRIDE-CONFIRM 位困惑了一会儿，不知道它应该如何工作。如果你想在你的文件上自动运行 Latex，而不用担心先保存它，或者确认你想要 Latex（而不是查看、bibtex 等），你可以使用这样的函数：

```
(defun my-run-latex ()
  (interactive)
  (TeX-save-document (TeX-master-file))
  (TeX-command "LaTeX" 'TeX-master-file -1)) 
```

`C-c C-c`将此绑定到方便的东西，当您想使用默认处理命令时，您仍然可以使用。`TeX-command`如果“Latex”不是您要调用的处理器，您可能需要修改该行。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-27T21:31:39.040

如果您只是想在没有确认对话框的情况下编译乳胶源，只需将以下内容添加到您的 .emacs 中：

```
(setq TeX-command-force "") 
```

然后您可以使用 Cc Cc 编译源代码，它不会要求确认。此解决方案的唯一问题是您无法再更改命令，但对于大多数文档，您将不想这样做。我可能会建议您同时将其添加到您的 .emacs 以获得更大的灵活性，从而为您提供与前一种行为等效的 Cc Cc ：

```
(define-key LaTeX-mode-map "\C-c\C-a"   
   ;;; 'a' for ask, change to anything you want 
  (lambda (arg) (interactive "P") 
    (let ((TeX-command-force nil)) 
      (TeX-command-master arg)))) 
```

然后，您可以直接处理您的文档，执行 Cx Cs、Cc Cc 和 Cc Cv 来查看它。就像其他人建议的那样，您也可以对 save 命令执行相同的操作，并让它在保存时自动编译，但是我的一些文档在 CVS 中，所以我避免在上面加上钩子。

感谢 Ivan 在这方面提供了一些帮助 - 不知道他是否在 StackOverflow 上

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-02-14T12:33:20.793

我认为这个问题的要点是“如何在没有所有按键和确认的情况下从 AUCTeX 快速编译我的 TeX 文档？”

我对此的回答是使用 latexmk 命令，而不是试图强迫 AUCTeX 这样做。

latexmk -pdf -pvc myfile.tex

latexmk 将监视有问题的文件，并在您保存后立即重建它。如果您使用好的 pdf 查看器，它会注意到 PDF 的变化并立即重新显示。在 OS X 上，skim 可以很好地解决这个问题。

# c++ - 错误“令牌不是预处理器子表达式中的有效二元运算符”

> ID：14664830
> 
> 赞同：2
> 
> 时间：2013-02-02T18:04:39.663
> 
> 标签：c++, qt, qt5

如果我构建并运行一个项目，基本上是由 Mac OS 10.6 上的 Qt 框架生成的存根，我会得到以下错误输出：

```
/Users/home/Qt5.0.1/5.0.1/clang_64/include/QtCore/qisenum.h:53: Error:token is not a valid binary operator in a preprocessor subexpression
#    if __has_extension(is_enum)
    ~~~~~~~~~~~~~~~^ 
```

我找不到解决方案，尽管我读到其他 Mac 用户似乎也有同样的问题。任何人都知道如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T14:24:59.860

我找到了解决方案。[只需从此处](https://codereview.qt-project.org/#change,20748)复制最新的 qisenum.h 文件并将其替换到您的创建者安装的`clang_64/include/QtCore`文件夹中，它就可以正常工作。`Qt`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-27T16:37:44.103

此问题已在[此论坛帖子](http://comments.gmane.org/gmane.comp.lib.qt.user/4899)中解决。

这基本上是您的clang版本的问题

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-11-26T01:14:13.100

> ```
> #    if __has_extension(is_enum)
>          ~~~~~~~~~~~~~~~^ 
> ```

那是一个叫做[特性检查宏的 Clang](http://clang.llvm.org/docs/LanguageExtensions.html#feature-checking-macros)[语言扩展](http://clang.llvm.org/docs/LanguageExtensions.html#feature-checking-macros)。对于 Clang，他们已经存在了很长时间。GCC 从 GCC 5.0, IIRC 开始提供它们。

`__has_extension`可以作为预处理器宏进行测试。因此，您首先测试宏是否存在，然后测试该功能：

```
#if defined(__has_extension)
# if __has_extension(is_enum)
   ...
# endif
#endif 
```

`__has_extension(is_enum)`必须在单独的行上。

它也适用于包含文件。来自 Crypto++ 项目的[rdrand.cpp 文件](https://www.cryptopp.com/docs/ref/rdrand_8cpp_source.html#l00130)：

```
# include <immintrin.h> // rdrand, MSC, ICC, and GCC
# if defined(__has_include)
#  if __has_include(<x86intrin.h>)
#   include <x86intrin.h> // rdseed for some compilers, like GCC
#  endif
# endif 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-03-22T16:40:29.163

在我的情况下，相同错误的原因是目标构建设置中的预处理器宏名称包含连字符“-”，类似于 TEST-DEBUG=1。

[带有连字符 ('-') 的 Xcode 构建配置名称会导致 pod 构建失败](https://github.com/CocoaPods/CocoaPods/issues/2608)

# algorithm - 递归二叉树遍历算法的调用栈模拟

> ID：14664835
> 
> 赞同：0
> 
> 时间：2013-02-02T18:04:56.557
> 
> 标签：algorithm, binary-tree, simulation

有没有人链接到递归二叉树遍历算法的良好调用堆栈模拟。到目前为止我有[这个，但不包括调用堆栈模拟。](http://www.qmatica.com/DataStructures/Trees/AVL/AVLTree.html)我会很感激与[此类似的东西](http://www.animatedrecursion.com/simple/fact.html) **请注意：后一个链接要求您运行一个 java 小程序，这可能是一个安全风险，因为客户端 java 仍然容易受到攻击**

我曾尝试逐步浏览 Netbeans 中的代码，但一步一步的可视化演示将有助于更好地理解。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T19:51:46.190

其中之一是[BTree 模拟](http://www.cosc.canterbury.ac.nz/mukundan/dsal/BTree.html)。

# c++ - 了解奇怪的模板行为

> ID：14664846
> 
> 赞同：0
> 
> 时间：2013-02-02T18:05:49.357
> 
> 标签：c++, templates

我需要导出一个模板化方法及其专业化。它当前位于源文件中，并且工作正常。我正在尝试将代码移动到标题。不幸的是，一旦我这样做了，这些专业就不再起作用了。

这是目前的情况：

```
struct klass
{
  template<typename T> method(T&);
  template<typename T> method(std::vector<T>&);
};

template<typename T>
void klass::method(T& value)
{
}

template<typename T>
void klass::method(std::vector<T>& value)
{
}

template<>
void klass::method<std::string>(std::string& value)
{
} 
```

我认为这应该工作的方式很清楚。

如果我没记错的话，我应该可以将所有模板和部分特化直接导出到标题中。

非部分特化不能在头文件中，需要留在源文件中。但这不应该很重要，因为因为它是实例化的，所以每次使用 klass::method 都应该已经使用了特化。

当然，这不会发生：如果我在标题中移动模板和部分特化，则保留在源文件中的非部分特化将被完全忽略。

请您向我解释一下这需要怎么做？我是否需要在标题中移动专业化以及如何移动？

我正在使用 gcc。如果有什么关于与 msvc 的兼容性我应该知道的，我也很感兴趣。

# c# - 如何阅读谷歌的定义部分？

> ID：14664847
> 
> 赞同：4
> 
> 时间：2013-02-02T18:06:09.707
> 
> 标签：c#, webpage

这是一个非常具体的问题。

我想要做的是阅读这部分谷歌搜索，如果它存在：

![在此处输入图像描述](../Images/53c6dc89923bb1ed242b8ddf828675d5.png)

我想基本上阅读那个确切的部分并将其吐回给用户。我已经完成了程序的大部分其余部分，我只需要最后一部分。我什至找不到元素 ID，这就是我在这里问的原因。我用来获取它的代码是：

```
var text = browser.Document.GetElementById("ID HERE");
//Browser is the name of my WebBrowser control
MessageBox.Show("The result was: " + text, "MyProgramName", MessageBoxButtons.OK, MessageBoxIcon.Information); 
```

另外，我这样做有效率吗？有没有更好的方法来做到这一点？我在这里没有使用任何类型的多线程。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-02T18:17:57.827

该元素没有 ID。

![在此处输入图像描述](../Images/d4377b960d68b96de94929a498f0fee0.png)

可能是为了让人们更难做这种事情。

## 更新

如果您仍在研究如何执行此操作（您是否只是想获得一个词的定义？）那么也许您可以使用维基词典。他们有一个你可以使用的 API，这里有很好的记录：[http](http://en.wiktionary.org/w/api.php) ://en.wiktionary.org/w/api.php和这里：[https ://www.mediawiki.org/wiki/API:Main_page](https://www.mediawiki.org/wiki/API:Main_page)

# django - 一次运行 Scrapy 脚本、处理输出并加载到数据库中？

> ID：14664849
> 
> 赞同：1
> 
> 时间：2013-02-02T18:06:20.470
> 
> 标签：django, scrapy

我设法编写了一个从网页抓取数据的 Scrapy 项目，当我`scrapy crawl dmoz -o items.json -t json`在命令行中使用 调用它时，它成功地将抓取的数据输出到 JSON 文件。

然后，我编写了另一个脚本，获取该 JSON 文件，加载它，更改数据的组织方式（我不喜欢它的默认组织方式），并将其作为第二个 JSON 文件输出。然后我使用 Django 的`manage.py loaddata fixture.json`命令将第二个文件的内容加载到 Django 数据库中。

现在，我感觉到我会因为分三个单独的步骤执行此操作而被笑到大楼外，但我不太确定如何将它们放在一个脚本中。对于初学者来说，我不能让我的 Scrapy 项目以我想要的确切方式输出我的数据，这似乎真的很愚蠢。但是我在哪里放置代码来修改`Feed exports`输出数据的“默认”方式？它会放在我的`pipelines.py`文件中吗？

其次，我想从 python 脚本中调用刮板，然后该脚本还将生成的 JSON 固定装置加载到我的数据库中。这就像放一些东西一样简单：

```
from twisted.internet import reactor  
from scrapy.crawler import Crawler
from scrapy.settings import Settings
from scrapy import log
from testspiders.spiders.followall import FollowAllSpider

spider = FollowAllSpider(domain='scrapinghub.com')
crawler = Crawler(Settings())
crawler.configure()
crawler.crawl(spider)
crawler.start()
log.start()
reactor.run() 
```

在我的脚本的顶部，然后在它后面加上类似的东西：

```
from django.something.manage import loaddata

loaddata('/path/to/fixture.json') 
```

? 最后，相对于我的 Django 项目和 Scrapy 项目，该脚本是否必须位于任何特定位置才能正常工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-02T19:52:10.523

1.  正是这样。在 pipelines.py 中定义一个自定义的 item 管道，根据需要输出 item 数据，然后在 settings.py 中添加管道类。scrapy 文档有一个可能有用的[JSONWriterPipeline 示例](https://scrapy.readthedocs.org/en/latest/topics/item-pipeline.html?highlight=pipelines#write-items-to-a-json-file)。
2.  好吧，基于您示例中的脚本取自 scrapy 文档，它应该可以工作。你试过了吗？
3.  只要所有必要的导入都有效，位置应该无关紧要。您可以通过在所需位置触发 Python 解释器然后一一检查所有导入来测试这一点。如果它们都运行正确，那么脚本应该没问题。

如果出现任何问题，请在此处发布另一个问题，其中包含相关代码和尝试过的内容，我相信有人会很乐意提供帮助。:)

# java - Spring AOP 参数化注解

> ID：14664851
> 
> 赞同：0
> 
> 时间：2013-02-02T18:06:33.620
> 
> 标签：java, spring, aop, aspectj

我是 Spring AOP 的新手，正在努力实现以下目标。

我想定义一个注释@RequirePermission，它接受参数字符串或枚举，并基于该字符串/枚举我将在建议中进行一些计算。因此，应首先验证 Controller 中定义的具有 @RequiredPermissions 的任何方法。到目前为止，这是我的代码。

方面：

```
package com.myapp.aspect;
import org.aspectj.lang.JoinPoint;
import org.aspectj.lang.annotation.Aspect;
import org.aspectj.lang.annotation.Before;
import org.aspectj.lang.annotation.Pointcut;
import org.springframework.stereotype.Component;
import com.myapp.security.RequirePermissionType;
import com.myapp.security.RequirePermission;
@Aspect
public class RequirePermissionAspect {

    @Pointcut("within(@org.springframework.stereotype.Controller *)")
    public void controllerBean() {}

    @Pointcut("execution(@com.myapp.security.RequirePermission * com.myapp.controller.*.*(..))")
    public void methodPointcut() {}

    @Before("controllerBean() && methodPointcut() ")
    public void afterMethodInControllerClass(com.myapp.security.RequirePermissionType name) {
        System.out.println("before advice..");
        System.out.println("before advice.."+name.name());
    } 
```

注解：

```
package com.myapp.security;

public enum RequirePermissionType {
    VIEW, MANAGE, IMPORT, SUPER;
}

@Documented
@Target(ElementType.METHOD )
@Retention(RetentionPolicy.RUNTIME)
@Inherited
public @interface RequirePermission {
    /**
     * 
     * @return
     */
    RequirePermissionType name() default RequirePermissionType.VIEW ;
} 
```

现在，如果在控制器方法中使用注释，如下代码可以工作：

```
 @RequestMapping(value={"create"})
    @RequirePermission
    public String createRegion(Model model){
    } 
```

但以下不起作用：

```
 @RequestMapping(value={"create"})
    @RequirePermission(name=RequirePermissionType.VIEW)
    public String createRegion(Model model){
    } 
```

任何人都可以指导我缺少什么以及如何实现这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T20:34:23.870

@vamslip 这里是更新的方面类。其余一切都保持不变。更新方面：

```
package com.myapp.aspect;
import org.aspectj.lang.JoinPoint;
import org.aspectj.lang.annotation.Aspect;
import org.aspectj.lang.annotation.Before;
import org.aspectj.lang.annotation.Pointcut;
import org.springframework.stereotype.Component;
import com.myapp.security.RequirePermissionType;
import com.myapp.security.RequirePermission;
@Aspect
public class RequirePermissionAspect {

@Pointcut("within(@org.springframework.stereotype.Controller *)")
public void controllerBean() {}

@Pointcut("execution(@com.myapp.security.RequirePermission * com.myapp.controller.*.*(..)) && @annotation(name)") 
public void methodPointcut(com.myapp.security.RequirePermission name) {} 

@Before("controllerBean() && methodPointcut(name) ") 
public void afterMethodInControllerClass(com.myapp.security.RequirePermissionType name) { 
    System.out.println("before advice.."); 
    System.out.println("before advice.."+name.name()); 
}
} 
```

# java - 是否可以访问尚未启用驱动器 sdk 的用户的谷歌驱动器文件

> ID：14664853
> 
> 赞同：0
> 
> 时间：2013-02-02T18:07:03.667
> 
> 标签：java, google-drive-api

我正在使用 java 创建一个用于谷歌驱动器的客户端应用程序，我已阅读[https://developers.google.com/drive/quickstart-java](https://developers.google.com/drive/quickstart-java)并已使用 gogle drive sdk 启动。但我的意图是让用户（将使用我的客户端应用程序）从“他们的”谷歌驱动器帐户上传/下载文件。如果他们没有从谷歌 api 控制台启用驱动 sdk，是否有可能。（用户不能这样做，因为他们不是开发人员，他们不知道）或者有什么方法可以为他们的账户启用 sdk（通过 java 代码）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T19:45:13.423

您的应用程序用户无需在 API 控制台中启用 Drive SDK。只有应用程序需要启用它。

# css - CSS：如何将我的幻灯片计数器定位到幻灯片中

> ID：14664854
> 
> 赞同：0
> 
> 时间：2013-02-02T18:07:09.813
> 
> 标签：css

我一直在与这个 CSS 问题作斗争。

[这是](http://surety.lfwebz.com/)我工作的网站。[学习drupal，css等，所以忽略设计]，请看幻灯片下方的图像计数器，现在只有1、2。我希望该计数器显示在图像中，右下角。

我已经尝试了所有我能想到的东西，定位、填充、底部。

如何将计数器向上移动到图像中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-02T18:11:02.177

更改计数器的边距。在这种情况下，诸如 margin-top: -50px, margin-left:20px, z-index:999, position:relative （不是确切的数字）之类的东西应该可以达到您想要的效果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-02T18:30:01.453

还添加了光标点`cursor:pointer;`享受。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-02T18:12:43.487

这行得通。

```
.views-slideshow-controls-bottom{
    position: relative;
    top: -35px;
    left: 50px;
    z-index: 999;
} 
```

# regex - 允许的 HTML 4.01 id 值正则表达式

> ID：14664860
> 
> 赞同：11
> 
> 时间：2013-02-02T18:07:53.890
> 
> 标签：regex, attributes, w3c

您能帮我构建一个匹配有效 W3C HTML 4.01`id`值的正则表达式吗？

根据 W3C 规范：

> ID 和 NAME 标记必须以字母 ([A-Za-z]) 开头，后跟任意数量的字母、数字 ([0-9])、连字符 ("-")、下划线 ("_") , 冒号 (":") 和句点 (".")。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-02-02T18:10:17.433

你可以使用这个正则表达式

```
^[a-zA-Z][\w:.-]*$ 
```

`^`描述字符串的开头

`[a-zA-Z]`匹配大写**或**小写字母

`*`匹配前面的字符 1 到多次

`\w`类似于`[a-zA-Z\d_]`

`$`是字符串的结尾

# stl - STL unordered_map 因 __m128 值而崩溃

> ID：14664862
> 
> 赞同：5
> 
> 时间：2013-02-02T18:08:17.730
> 
> 标签：stl, sse, unordered-map

我跟踪了一个使用 __m128（SSE 向量）作为 std::unordered_map 中的值的错误。这会导致 mingw32 g++4.7.2 出现运行时分段错误。

请看下面的例子。有什么理由会失败吗？或者，是否有解决方法？（我尝试将值包装在一个类中，但没有帮助。）谢谢。

```
#include <unordered_map>
#include <xmmintrin.h>          // __m128
#include <iostream>

int main()
{
    std::unordered_map<int,__m128> m;
    std::cerr << "still ok\n";
    m[0] = __m128();
    std::cerr << "crash in previous statement\n";
    return 0;
} 
```

编译设置：g++ -march=native -std=c++11

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-02T22:57:55.960

关于对齐有2个问题：

ABI 是否确保`__m128`变量始终在堆栈上对齐？

全局`new`运算符是否返回适合`__m128`类型对齐的内存？即，返回 16 字节对齐的内存。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-11T00:36:49.123

C++ 目前不处理过度对齐类型的动态分配。对于通常的 x86 ABI，标准对齐方式为 8，而 __m128 的对齐方式为 16 字节，因此过度对齐。使用通常的 x86_64 ABI，标准对齐是 16，这使得 __m128 安全（但 __m256 再次因其 32 字节对齐而变得不安全）。

请参阅本文以了解下一个标准的可能更改，这将使事情“正常工作”： [http ://www.open-std.org/jtc1/sc22/wg21/docs/papers/2012/n3396.htm](http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2012/n3396.htm)

同时，您可以指定自己的分配器，例如基于aligned_alloc (C11)、posix_memalign (unix)、_aligned_malloc (Microsoft) 等。

# javascript - KnockoutJS - 计算的 abservable 和 js 对象

> ID：14664863
> 
> 赞同：1
> 
> 时间：2013-02-02T18:08:20.497
> 
> 标签：javascript, knockout.js

我试图返回一个可观察的属性，但似乎遗漏了一些东西。

```
self.SelectedAccountTypeID = ko.computed(function () {
    return self.selectedAccountType.AccountTypeID();
}); 
```

我正在尝试返回 selectedAccountType 的 AccountTypeID 属性，但这不起作用

当我尝试

```
self.SelectedAccountTypeID = ko.computed(function () {
    return self.selectedAccountType();
}); 
```

它可以工作，但返回一个 javascript 对象

这是代码 [http://jsfiddle.net/qafrD/的小提琴](http://jsfiddle.net/qafrD/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-02T18:16:19.267

你走在正确的轨道上，因为你`selectedAccountType`是一个可观察的，你需要使用它来访问它的值`selectedAccountType()`

所以正确的语法：`self.selectedAccountType().AccountTypeID;`

但是，因为`self.selectedAccountType()`可以为 null，您需要先检查它，然后再访问`AccountTypeID`它：

```
self.SelectedAccountTypeID = ko.computed(function () {
    if (self.selectedAccountType())
        return self.selectedAccountType().AccountTypeID;
}); 
```

演示[小提琴](http://jsfiddle.net/BmSfL/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-02T18:16:26.697

这是因为这`self.selectedAccountType`是一个可观察的含义，您需要像调用函数一样调用它来检索其当前值。然而，属性“AccountTypeID”不是可观察的，因此您不需要在此处使用括号。

```
self.SelectedAccountTypeID = ko.computed(function () {
    // Retrieve the value of the observable
    var selectedAccountType = self.selectedAccountType();

    // The value may be "undefined" or "null" if there has not yet been
    // anything stored in the observable
    if (selectedAccountType && typeof selectedAccountType.AccountTypeID != "undefined") {
        return selectedAccountType.AccountTypeID;
    }

    // Return a default value otherwise
    return null;
}); 
```

演示：http: [//jsfiddle.net/qafrD/1/](http://jsfiddle.net/qafrD/1/)

# iphone - iOS 6 上的定位方法

> ID：14664864
> 
> 赞同：0
> 
> 时间：2013-02-02T18:08:21.107
> 
> 标签：iphone, ios, objective-c, ios6

> **可能重复：**
> [ios 6 定位方法](https://stackoverflow.com/questions/14656070/ios-6-orientation-methods)

iOS 6 中的方向方法发生了变化。我在纵向模式下的整个应用程序有许多视图控制器（不是标签栏视图控制器）我只想在我旋转时将我的视图控制器之一旋转到横向模式（它实际上显示一个 webView） device.the 下面的方法在 xcode 4.4 中工作，但它不在 Xcode.4.5 中

```
 - (BOOL)shouldAutorotateToInterfaceOrientation:
       (UIInterfaceOrientation)interfaceOrientation {
       return (interfaceOrientation == UIInterfaceOrientationPortrait ||
       interfaceOrientation == UIInterfaceOrientationLandscapeLeft || 
    interfaceOrientation == UIInterfaceOrientationLandscapeRight ); 
```

上述方法在 xcode 4.5 中不起作用，因此我更改了以下方法，但即使它不起作用....请提供任何建议，谢谢。

```
 - (BOOL) shouldAutorotate{
     [[UIApplication sharedApplication] setStatusBarOrientation:                        UIInterfaceOrientationPortrait];
    return self.modalViewController.shouldAutorotate;
     }  
     -(NSUInteger)supportedInterfaceOrientations
       {
         return UIInterfaceOrientationMaskLandscape;
          } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T22:14:25.340

您是否也在实施supportedInterfaceOrientations？你可能想要。

# ruby-on-rails - Rails 3：API PUT 请求失败，记录未更新

> ID：14664866
> 
> 赞同：1
> 
> 时间：2013-02-02T18:08:32.573
> 
> 标签：ruby-on-rails, api, put

我有一个带有更新艺术家的 API 的应用程序和一个尝试与 API 交互以更新艺术家的客户端。问题是，每当我尝试执行 PUT 请求时，记录都不会更新，并且请求失败并出现`Completed 204 No Content in 14ms (ActiveRecord: 0.0ms)`错误。

这是 API 控制器：

```
class Api::V1::ArtistsController < Api::V1::BaseController
  respond_to :json

  def show
    respond_with Artist.find_by_id(params[:id])
  end

  def update
    artist = Artist.find_by_id(params[:id])
    respond_with artist.update_attributes(params[:artist])
  end
end 
```

从客户端模型进行 API 调用的方法：

```
def update_artist_attributes
  self.class.put("/api/artists/#{self.artist_id}.json", { body: {
    artist: {
      bio: self.artist_attributes_copy[:bio],
      phone_number: self.artist_attributes_copy[:phone_number],
      country: self.artist_attributes_copy[:country],
      city: self.artist_attributes_copy[:city]
    }
  } })
end 
```

服务器日志（API 端）：

```
Started PUT "/api/artists/1.json" for 127.0.0.1 at 2013-02-02 19:00:00 +0100
Processing by Api::V1::ArtistsController#update as JSON
  Parameters: {"artist"=>{"bio"=>"NERVO sisters are not lesbians and they're hot! And they're single too!", "phone_number"=>"218391", "country"=>"Afghanistan", "city"=>"dnajksakd"}, "id"=>"1"}
  Artist Load (0.4ms)  SELECT "artists".* FROM "artists" WHERE "artists"."id" = 1 LIMIT 1
   (0.2ms)  BEGIN
  Artist Exists (0.4ms)  SELECT 1 AS one FROM "artists" WHERE "artists"."access_token" = 'EqHG8SGh9ldl3W-U5PBECw' LIMIT 1
  Artist Exists (0.6ms)  SELECT 1 AS one FROM "artists" WHERE (LOWER("artists"."access_token") = LOWER('EqHG8SGh9ldl3W-U5PBECw') AND "artists"."id" != 1) LIMIT 1
  Artist Exists (0.5ms)  SELECT 1 AS one FROM "artists" WHERE ("artists"."email" IS NULL AND "artists"."id" != 1) LIMIT 1
   (0.3ms)  ROLLBACK
Completed 204 No Content in 14ms (ActiveRecord: 0.0ms) 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-02T18:22:31.240

发生 204 问题是因为`update_attributes`不返回模型实例。您希望更新方法为：

```
artist = Artist.find_by_id(params[:id])
artist.update_attributes(params[:artist])
respond_with artist 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-02T18:27:11.067

`update_attributes`根据操作的成功返回`true`或返回。`false`

您将此结果传递给`respond_with`，所以我认为这就是您获得 204 代码（“无内容”）的原因 - 无论结果如何，请求都被视为成功`update_attributes`，但不返回任何内容。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-02T18:29:27.593

提交的两个答案是有效的，但问题的核心是我有验证错误，所以模型对象没有得到更新......

# mysql - 具有多个操作的 Mysql 触发器

> ID：14664867
> 
> 赞同：0
> 
> 时间：2013-02-02T18:08:39.960
> 
> 标签：mysql, sql, triggers

我想在 phpmyadmin 中插入 table 之前更新两个表`table1`，但 phpmyadmin 在创建此触发器后显示错误（MySQL 语法错误）。

这有效：

```
CREATE TRIGGER `my_trig`   
BEFORE INSERT ON `table1` 
FOR EACH ROW 
update table2 
set 
attr = attr+NEW.attr
where table2.id = NEW.id; 
```

这也有效（当然，没有第一个触发器）：

```
CREATE TRIGGER `my_trig`   
BEFORE INSERT ON `table1` 
FOR EACH ROW 
update table3 
set 
attr = attr+NEW.attr
where table3.id = NEW.id; 
```

`BEGIN- update1; update2; -END`但是无法创建使用它。任何想法如何创建这种类型的触发器？在此先感谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-02T18:12:32.790

set 语句后有多余的逗号

```
attr = attr + NEW.attr, 
```

使固定，

```
CREATE TRIGGER `my_trig`   
BEFORE INSERT ON `table1` 
FOR EACH ROW 
UPDATE   table2 
SET     attr = attr + NEW.attr // <=== removed
WHERE   table2.id = NEW.id; 
```

使用`BEGIN-END`

```
DELIMITER $$ 
CREATE TRIGGER `my_trig`   
BEFORE INSERT ON `table1` 
FOR EACH ROW
BEGIN 
    UPDATE   table2 
    SET     attr = attr + NEW.attr
    WHERE   table2.id = NEW.id;
END $$ 
DELIMITER ; 
```

*   [MySQL 触发器示例](http://net.tutsplus.com/tutorials/databases/introduction-to-mysql-triggers/)

# jsf - 如何从 bean 调用函数

> ID：14664869
> 
> 赞同：1
> 
> 时间：2013-02-02T18:09:09.703
> 
> 标签：jsf, primefaces

一个非常简单的问题，但我无法解决，

我的 xhtml 页面有

```
 <p:commandButton action="#{NaviagationBean.buttonToUploadText}" value="Submit" icon ="ui-icon-arrowstop-1-n"/> 
```

我想从存储在 richard.fileupload 中的 NavigationBean.java 调用代码来调用此代码：

```
 public String buttonToUploadText() {
    System.out.println("buttonToUploadText invoked");
    return "/upload/uploadText.xhtml";
} 
```

基本上我需要在我的 xhtml 中调用什么操作？打电话给这个？

由于代码 atm 显示此错误：

```
 WARNING: #{NavigationBean.buttonToUploadText}: javax.el.PropertyNotFoundException: /GUI/index.xhtml @61,130 action="#{NavigationBean.buttonToUploadText}": Target Unreachable, identifier 'NavigationBean' resolved to null
javax.faces.FacesException: #{NavigationBean.buttonToUploadText}: javax.el.PropertyNotFoundException: /GUI/index.xhtml @61,130 action="#{NavigationBean.buttonToUploadText}": Target Unreachable, identifier 'NavigationBean' resolved to null
    at com.sun.faces.application.ActionListenerImpl.processAction(ActionListenerImpl.java:118)
    at javax.faces.component.UICommand.broadcast(UICommand.java:315)
    at javax.faces.component.UIViewRoot.broadcastEvents(UIViewRoot.java:794)
    at javax.faces.component.UIViewRoot.processApplication(UIViewRoot.java:1259)
    at com.sun.faces.lifecycle.InvokeApplicationPhase.execute(InvokeApplicationPhase.java:81)
    at com.sun.faces.lifecycle.Phase.doPhase(Phase.java:101)
    at com.sun.faces.lifecycle.LifecycleImpl.execute(LifecycleImpl.java:118)
    at javax.faces.webapp.FacesServlet.service(FacesServlet.java:593)
    at org.apache.catalina.core.StandardWrapper.service(StandardWrapper.java:1550)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:343)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:217)
    at org.primefaces.webapp.filter.FileUploadFilter.doFilter(FileUploadFilter.java:79)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:256)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:217)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:279)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:175)
    at org.apache.catalina.core.StandardPipeline.doInvoke(StandardPipeline.java:655)
    at org.apache.catalina.core.StandardPipeline.invoke(StandardPipeline.java:595)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:161)
    at org.apache.catalina.connector.CoyoteAdapter.doService(CoyoteAdapter.java:331)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:231)
    at com.sun.enterprise.v3.services.impl.ContainerMapper$AdapterCallable.call(ContainerMapper.java:317)
    at com.sun.enterprise.v3.services.impl.ContainerMapper.service(ContainerMapper.java:195)
    at com.sun.grizzly.http.ProcessorTask.invokeAdapter(ProcessorTask.java:860)
    at com.sun.grizzly.http.ProcessorTask.doProcess(ProcessorTask.java:757)
    at com.sun.grizzly.http.ProcessorTask.process(ProcessorTask.java:1056)
    at com.sun.grizzly.http.DefaultProtocolFilter.execute(DefaultProtocolFilter.java:229)
    at com.sun.grizzly.DefaultProtocolChain.executeProtocolFilter(DefaultProtocolChain.java:137)
    at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:104)
    at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:90)
    at com.sun.grizzly.http.HttpProtocolChain.execute(HttpProtocolChain.java:79)
    at com.sun.grizzly.ProtocolChainContextTask.doCall(ProtocolChainContextTask.java:54)
    at com.sun.grizzly.SelectionKeyContextTask.call(SelectionKeyContextTask.java:59)
    at com.sun.grizzly.ContextTask.run(ContextTask.java:71)
    at com.sun.grizzly.util.AbstractThreadPool$Worker.doWork(AbstractThreadPool.java:532)
    at com.sun.grizzly.util.AbstractThreadPool$Worker.run(AbstractThreadPool.java:513)
    at java.lang.Thread.run(Thread.java:722)
Caused by: javax.faces.el.EvaluationException: javax.el.PropertyNotFoundException: /GUI/index.xhtml @61,130 action="#{NavigationBean.buttonToUploadText}": Target Unreachable, identifier 'NavigationBean' resolved to null
    at javax.faces.component.MethodBindingMethodExpressionAdapter.invoke(MethodBindingMethodExpressionAdapter.java:95)
    at com.sun.faces.application.ActionListenerImpl.processAction(ActionListenerImpl.java:102)
    ... 36 more
Caused by: javax.el.PropertyNotFoundException: /GUI/index.xhtml @61,130 action="#{NavigationBean.buttonToUploadText}": Target Unreachable, identifier 'NavigationBean' resolved to null
    at com.sun.faces.facelets.el.TagMethodExpression.invoke(TagMethodExpression.java:107)
    at javax.faces.component.MethodBindingMethodExpressionAdapter.invoke(MethodBindingMethodExpressionAdapter.java:88)
    ... 37 more 
```

编辑

当我这样做时它工作正常：

```
 <p:commandButton action="#{userBean.buttonToUploadText}" value="Submit" icon ="ui-icon-arrowstop-1-n"/> 
```

使用 UserBean.java 中的代码

堆栈跟踪是：

```
WARNING: #{NavigationBean.buttonToUploadText}: javax.el.PropertyNotFoundException: /GUI/index.xhtml @61,130 action="#{NavigationBean.buttonToUploadText}": Target Unreachable, identifier 'NavigationBean' resolved to null
javax.faces.FacesException: #{NavigationBean.buttonToUploadText}: javax.el.PropertyNotFoundException: /GUI/index.xhtml @61,130 action="#{NavigationBean.buttonToUploadText}": Target Unreachable, identifier 'NavigationBean' resolved to null
    at com.sun.faces.application.ActionListenerImpl.processAction(ActionListenerImpl.java:118)
    at javax.faces.component.UICommand.broadcast(UICommand.java:315)
    at javax.faces.component.UIViewRoot.broadcastEvents(UIViewRoot.java:794)
    at javax.faces.component.UIViewRoot.processApplication(UIViewRoot.java:1259)
    at com.sun.faces.lifecycle.InvokeApplicationPhase.execute(InvokeApplicationPhase.java:81)
    at com.sun.faces.lifecycle.Phase.doPhase(Phase.java:101)
    at com.sun.faces.lifecycle.LifecycleImpl.execute(LifecycleImpl.java:118)
    at javax.faces.webapp.FacesServlet.service(FacesServlet.java:593)
    at org.apache.catalina.core.StandardWrapper.service(StandardWrapper.java:1550)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:343)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:217)
    at org.primefaces.webapp.filter.FileUploadFilter.doFilter(FileUploadFilter.java:79)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:256)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:217)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:279)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:175)
    at org.apache.catalina.core.StandardPipeline.doInvoke(StandardPipeline.java:655)
    at org.apache.catalina.core.StandardPipeline.invoke(StandardPipeline.java:595)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:161)
    at org.apache.catalina.connector.CoyoteAdapter.doService(CoyoteAdapter.java:331)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:231)
    at com.sun.enterprise.v3.services.impl.ContainerMapper$AdapterCallable.call(ContainerMapper.java:317)
    at com.sun.enterprise.v3.services.impl.ContainerMapper.service(ContainerMapper.java:195)
    at com.sun.grizzly.http.ProcessorTask.invokeAdapter(ProcessorTask.java:860)
    at com.sun.grizzly.http.ProcessorTask.doProcess(ProcessorTask.java:757)
    at com.sun.grizzly.http.ProcessorTask.process(ProcessorTask.java:1056)
    at com.sun.grizzly.http.DefaultProtocolFilter.execute(DefaultProtocolFilter.java:229)
    at com.sun.grizzly.DefaultProtocolChain.executeProtocolFilter(DefaultProtocolChain.java:137)
    at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:104)
    at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:90)
    at com.sun.grizzly.http.HttpProtocolChain.execute(HttpProtocolChain.java:79)
    at com.sun.grizzly.ProtocolChainContextTask.doCall(ProtocolChainContextTask.java:54)
    at com.sun.grizzly.SelectionKeyContextTask.call(SelectionKeyContextTask.java:59)
    at com.sun.grizzly.ContextTask.run(ContextTask.java:71)
    at com.sun.grizzly.util.AbstractThreadPool$Worker.doWork(AbstractThreadPool.java:532)
    at com.sun.grizzly.util.AbstractThreadPool$Worker.run(AbstractThreadPool.java:513)
    at java.lang.Thread.run(Thread.java:722)
Caused by: javax.faces.el.EvaluationException: javax.el.PropertyNotFoundException: /GUI/index.xhtml @61,130 action="#{NavigationBean.buttonToUploadText}": Target Unreachable, identifier 'NavigationBean' resolved to null
    at javax.faces.component.MethodBindingMethodExpressionAdapter.invoke(MethodBindingMethodExpressionAdapter.java:95)
    at com.sun.faces.application.ActionListenerImpl.processAction(ActionListenerImpl.java:102)
    ... 36 more
Caused by: javax.el.PropertyNotFoundException: /GUI/index.xhtml @61,130 action="#{NavigationBean.buttonToUploadText}": Target Unreachable, identifier 'NavigationBean' resolved to null
    at com.sun.faces.facelets.el.TagMethodExpression.invoke(TagMethodExpression.java:107)
    at javax.faces.component.MethodBindingMethodExpressionAdapter.invoke(MethodBindingMethodExpressionAdapter.java:88)
    ... 37 more 
```

编辑2：

```
 <p:commandButton action="#{NaviagationBean.buttonToUploadText()}" value="Submit" icon ="ui-icon-arrowstop-1-n" ajax="False"/> 
```

给了我相同的堆栈跟踪，但现在将我带到一个页面`javax.el.PropertyNotFoundException: /GUI/index.xhtml @61,146 action="#{NaviagationBean.buttonToUploadText()}": Target Unreachable, identifier 'NaviagationBean' resolved to null`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-02T18:41:44.807

消息*Target Unreachable, identifier 'NavigationBean' resolved to null*意味着 JSF 框架找不到您的托管 bean。确保您已按如下方式编写 bean：

```
@ManagedBean(name="NavigationBean")
@RequestScope
public class NavigationBean {

    public NavigationBean() {
    }

    public String buttonToUploadText() {
        System.out.println("buttonToUploadText invoked");
        return "/upload/uploadText.xhtml";
    }

    //other methods...
} 
```

或者，如果您使用 CDI

```
@Named("NavigationBean")
@RequestScope
public class NavigationBean {

    //...
} 
```

另一种解决方案是在 EL中使用`navigationBean`而不是：`NavigationBean`

```
<p:commandButton action="#{navigationBean.buttonToUploadText}" value="Submit"
    icon ="ui-icon-arrowstop-1-n" /> 
```

# windows - 我可以使用什么 api 在 Windows 8 中查找系统的制造商？

> ID：14664873
> 
> 赞同：2
> 
> 时间：2013-02-02T18:09:42.473
> 
> 标签：windows, api

> **可能重复：**
> [Windows VC++ 获取机器型号名称](https://stackoverflow.com/questions/9628948/windows-vc-get-machine-model-name)

我看到 box.net 在 Windows 8 中检测 PC 制造商并为用户提供额外空间。我可以使用哪个 api 来找出制造商？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-02T18:19:34.920

您可以使用[Windows Management Instrumentation](http://msdn.microsoft.com/en-us/library/aa393964%28v=VS.85%29.aspx)

这个例子是用 C# 编写的，希望它对你有用。

```
string manufacturer = string.Empty;
ManagementClass mc = new System.Management.ManagementClass("Win32_BIOS");
ManagementObjectCollection moc = mc.GetInstances();
foreach (ManagementObject mo in moc)
{
    if (string.IsNullOrEmpty(result))
    {
        try
        {
            if (mo["Manufacturer"] != null) 
                 manufacturer = mo["Manufacturer"].ToString();
            break;
        }
        // Show the exception (just for test purpose)
        catch(Exception ex)
        {
            MessageBox.Show(ex.Message)
        }
    }
}
Console.WriteLine(manufacturer.Trim()); 
```

# iphone - 如何在 Table View ViewDidLoad 方法中调用自定义单元格中声明的 UISwitch？

> ID：14664874
> 
> 赞同：0
> 
> 时间：2013-02-02T18:09:48.390
> 
> 标签：iphone, ios, xcode, tableview, uiswitch

我有一个`TableView`带有自定义 Cell`UILabel`和`UISwitch`. UISwitch 在自定义单元格中声明。我想在`ViewDidLoad`TableView 中调用这个开关。我想`NSUserDefaults`用来保存 UISwitch 的状态。要加载值，我必须在 ViewDidLoad 中编写代码。

```
@interface LabelSwitchCustomCell : UITableViewCell {
    IBOutlet UILabel  *mainLabel;
    IBOutlet UISwitch *switchButton;
}

@property (nonatomic, retain) IBOutlet UILabel  *mainLabel;
@property (nonatomic, retain) IBOutlet UISwitch *switchButton;

@end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-02T20:27:57.997

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexpath
{
    LabelSwitchCustomCell *switchCell = (LabelSwitchCustomCell *)[tableView dequeueReusableCellWithIdentifier:@"YOUR_CELL_IDENTIFIER"];
    switchCell.switchButton.on = [[NSUserDefaults standardUserDefaults] boolForKey:@"SwitchState"];
} 
```

然后，在 Interface Builder 中，将开关与在您的自定义单元类中声明和实现的此操作连接：

```
- (IBAction)switchFlipped:(id)sender
{
    [[NSUserDefaults standardUserDefaults] setBool:self.switchButton.on forKey:@"SwitchState"];
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-02T18:38:03.137

您可以从代码中的任何位置将 UISwitch 的状态保存在 NSUserDefaults 中。您可以通过这种方式设置/加载开关状态：

```
 - (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
    {
//Set switch states
    if (indexPath.row == 0) 
                cell.switchBtn.on = [[NSUserDefaults standardUserDefaults] boolForKey:@"Switch1State"];
            else if(indexPath.row == 1)
                cell.switchBtn.on = [[NSUserDefaults standardUserDefaults] boolForKey:@"Switch2State"];
            else if(indexPath.row == 2)
                cell.switchBtn.on = [[NSUserDefaults standardUserDefaults] boolForKey:@"Switch3State"];
// Set switch states

// Set action for your switch
[cell.switchBtn addTarget:self action:@selector(switchingBtn:) forControlEvents:UIControlEventValueChanged];
    } 
```

# ios - 使用 cocos2D 在塔防游戏中存储玩家等级解锁的好方法是什么？

> ID：14664876
> 
> 赞同：-1
> 
> 时间：2013-02-02T18:09:53.187
> 
> 标签：ios, cocos2d-iphone, store

我想要的只是像愤怒的小鸟一样存储级别提升。什么是最好的方法 ？

该游戏适用于iOS设备。

存储核心数据的最佳方式是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T18:32:19.920

很少有做某事的“最佳”方式。如果您已经在您的应用程序中使用 Core Data，那么将状态保存在那里会很容易。其他解决方案是使用 NSUserDefaults 甚至写入 Documents 文件夹中的文件。

# android - 以编程方式添加多个图像视图

> ID：14664881
> 
> 赞同：0
> 
> 时间：2013-02-02T18:10:21.303
> 
> 标签：android, android-layout

我基本上是在尝试实现拖放功能..

我正在尝试的是我在屏幕上提供图像序列，如果我单击`images`将添加到`Mains screen`. 但是我遇到的问题是，当我将新视图添加到其中时`Main Screen`，其他所有视图`views`也都移到了左上角。

你能告诉我是什么问题吗...？或者请给我一个教程或链接，我可以在其中找到解决方案....或如何实现这一点？

我正在使用`Framelayout`，所以我也实现了图像重叠......

![在此处输入图像描述](../Images/adc6f001195d33129babfeed1ab5f207.png)

这是所有代码都在其中工作的类：

```
public class drag extends Activity implements OnClickListener, OnTouchListener
{
ImageView img1;
Button btn,btn2;
FrameLayout layout;
LayoutParams params;
ImageView im , im2, im3 ,im4;
@Override
public void onCreate(Bundle savedInstanceState)
{
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    layout = (FrameLayout) findViewById(R.id.vg);
    layout.setDrawingCacheEnabled(true);
    im  = (ImageView)findViewById(R.id.img1);
    im.setDrawingCacheEnabled(true);
    im.setOnTouchListener(this);
    im.setOnClickListener(this);

    btn  = (Button)findViewById(R.id.btn1);
    btn.setDrawingCacheEnabled(true);
    btn.setOnClickListener(this);
    btn.setOnTouchListener(this);

    btn2  = (Button)findViewById(R.id.btn2);
    btn2.setDrawingCacheEnabled(true);
    btn2.setOnClickListener(this);
    btn2.setOnTouchListener(this);

    params = new LayoutParams(LayoutParams.WRAP_CONTENT,
            LayoutParams.WRAP_CONTENT);

    btn.setOnClickListener(new OnClickListener()
    {
        @Override
        public void onClick(View v) 
        {
            im2 = new ImageView(drag.this);
            Bitmap bm  = BitmapFactory.decodeResource(getResources(), R.drawable.image);
            im2.setImageBitmap(bm);
            im2.setOnTouchListener(drag.this);
            im2.setOnClickListener(drag.this);
            layout.addView(im2, params);

        }
    });

    btn2.setOnClickListener(new OnClickListener()
    {
        @Override
        public void onClick(View v) 
        {
            Bitmap bm  = BitmapFactory.decodeResource(getResources(), R.drawable.image);                
            saveImage(bm);

        }
    });
}

public  void saveImage(Bitmap myBitmap) 
{
    MediaStore.Images.Media.insertImage(getContentResolver(), myBitmap, "mmsImage" , "mmsimage");       
}

int l, t, r, b;
int oldLeft, oldTop;
PointF p, curr;

@Override
public boolean onTouch(View view, MotionEvent me) 
{

    if (me.getAction() == MotionEvent.ACTION_DOWN) 
    {           
        //status = START_DRAGGING;
        Log.i("status"," AAA dOWN");
        img1 = new ImageView(this);
        view.setDrawingCacheEnabled(true);
        Bitmap mmsImage = Bitmap.createBitmap(view.getDrawingCache());

        img1.setImageBitmap(mmsImage);
        img1.setOnTouchListener(drag.this);
        img1.setOnClickListener(drag.this);

        oldLeft = (int)view.getLeft();
        oldTop = (int)view.getTop();

        p = new PointF(me.getRawX(), me.getRawY());

    }
    if (me.getAction() == MotionEvent.ACTION_MOVE) 
    {
        Log.i("status"," AAA draging");

        int xDiff = (int)(me.getRawX() - p.x);
        int yDiff  = (int)(me.getRawY() - p.y);

        p.x = me.getRawX();
        p.y = me.getRawY();

        l = view.getLeft();
        t = view.getTop();
        r = view.getRight();
        b = view.getBottom();

        view.layout(l + xDiff, t + yDiff , r + xDiff, b + yDiff);

    }
    if (me.getAction() == MotionEvent.ACTION_UP) 
    {
        Log.i("status"," AAA UP");
        //captureUserMove(view);
    } 

    return false;
} 
```

}

这是 XML：

```
<FrameLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:id="@+id/vg"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:background="@android:color/white" >

<ImageView
    android:id="@+id/img1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_gravity="center"
    android:src="@drawable/ic_launcher" />

<Button
    android:id="@+id/btn1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_gravity="center" />

<Button
    android:id="@+id/btn2"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_gravity="bottom" />

</FrameLayout> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-02T19:09:23.300

您设置`params`，但未指定如何定位添加的视图。尝试这个：

在`onCreate()`

```
params = new LayoutParams(LayoutParams.WRAP_CONTENT,
            LayoutParams.WRAP_CONTENT);

params.gravity = Gravity.LEFT | Gravity.TOP; // you need this for margins to work 
```

在点击监听器中：

```
// your x and y where you want the new view    
params.leftMargin = x;
params.topMargin = y; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-25T11:59:39.877

推杆

```
params = new LayoutParams(LayoutParams.WRAP_CONTENT,
  LayoutParams.WRAP_CONTENT); 
```

里面

```
@Override
    public void onClick(View v) 
    {
} 
```

将工作。

# java - 如何在 JLabel 中显示 JTextField 的输入？如何修复反射中的错误？

> ID：14664885
> 
> 赞同：0
> 
> 时间：2013-02-02T18:10:45.950
> 
> 标签：java, swing, reflection, jlabel, jtextfield

我必须这样做：我有一个 JTextField 和按钮。当我写入该 TextField 输出时，必须在 JLabel 中显示结果。

1.  要求用户提供类的名称。
2.  使用 Class.forName() 来访问 Java 反射 API。
3.  使用默认构造函数创建类的新实例（即对象）。
4.  在表单中查找并显示类的所有字段，包括继承的字段：

field_type field_name: (field_value(JTextField))(Set(Button))

field_value 必须是一个文本框，以便用户可以通过按“设置”按钮来更改值。新值必须更新为对象。如果字段包含复杂类型（对象、集合等）的值，则不应创建文本框和“设置”按钮。

1.  查找并显示类的所有方法，包括继承的方法：return_type method_name (param_type1 (param_value1(JTextField)), param_type2(param_value2(JTextField)) , ..) (Invoke(Button))

如果方法具有复杂类型的参数（对象、集合等），则仅显示参数的类型，跳过 param_values 的文本框和“调用”按钮。当用户按下“调用”按钮时，应用程序必须调用该方法。确保如果该方法更改了字段的值，这些更改会显示出来。

我的代码在这里：

```
 import java.awt.FlowLayout;
     import java.awt.event.ActionEvent;
     import java.awt.event.ActionListener;
     import java.lang.reflect.Constructor;
     import java.lang.reflect.Field;
     import java.lang.reflect.InvocationTargetException;
     import java.lang.reflect.Method;
     import java.lang.StringBuffer;
     import java.util.Scanner;
     import javax.swing.JButton;
     import javax.swing.JFrame;
     import javax.swing.JLabel;
     import javax.swing.JPanel;
     import javax.swing.JTextField;

     public class ReflectionTest {

private String class_name = "java.lang.StringBuffer";

public ReflectionTest() throws ClassNotFoundException, InstantiationException, IllegalAccessException, NoSuchMethodException, SecurityException, IllegalArgumentException, InvocationTargetException{
    JLabel jl1 = null, jl2, jl3, jl4;
    JFrame jf = new JFrame("New");
    JPanel jp = new JPanel();
     JTextField jtf = new JTextField(20);
     JButton jb = new JButton("Press");
     jtf.setVisible(true);
     jp.add(jb);
     jp.add(jtf);

     jf.add(jp);
     jf.setVisible(true);
     jf.setSize(400, 550);
     jf.setResizable(false);

     String text = jtf.getText().toString();

     Class cs = Class.forName(text);

     jb.addActionListener(
                new ActionListener() {
                    public void actionPerformed(ActionEvent e) {
                         // THIS CODE IS EXECUTED WHEN RETURN IS TYPED
                    }
                }
            );

    for(Constructor c: cs.getConstructors()){
        for(Class p: c.getParameterTypes())
            System.out.print(p.getName()+" ");
        System.out.println();
    }

    Constructor c = cs.getConstructor(new Class[]{String.class});
    Object list = c.newInstance("AA");

    Field pub_fields[] = cs.getFields();
    Field all_fields[] = cs.getDeclaredFields();
    System.out.println("Public fields:");
    for(Field f:pub_fields){

        //Showing public fields
        System.out.println();
        jl1 = new JLabel(f.getType().getName() + " " + f.getName());
        jp.add(jl1);
        jl1.setVisible(true);
                }
    System.out.println("All declared fields:");
    for(Field f:all_fields){

        //Showing all declared fields

        jl2 = new JLabel(f.getType().getName() + " "+f.getName()+" ");
        jp.add(jl2);
        jl2.setVisible(true);

        f.setAccessible(true);
        Object val = f.get(list);
        if (val != null){
            //System.out.println(val.toString());
            jl3 = new JLabel(val.toString());
            jp.add(jl3);
            jl3.setVisible(true);
            System.out.println();
            }
        else{
            System.out.println("NULL");
        //f.get(list1);
    }
    }

}

/**
 * @param args
 * @throws ClassNotFoundException 
 */
public static void main(String[] args) {
    try{
    // TODO Auto-generated method stub
        new ReflectionTest();
    }
    catch (Exception e){
        e.printStackTrace();
    }
}
  } 
```

我有错误。Eclipse 在这一行中显示它： Class cs = Class.forName(text);

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-02T18:31:19.220

如果您在异常发生之前测试文本字符串，例如通过打印出来：

```
 System.out.printf("text = \"%s\"%n", text);
  Class cs = Class.forName(text); 
```

返回：

```
text = ""
java.lang.ClassNotFoundException: 
    at java.lang.Class.forName0(Native Method)
    at java.lang.Class.forName(Unknown Source)
    at pkg.ReflectionTest.<init>(ReflectionTest.java:42)
    at pkg.ReflectionTest.main(ReflectionTest.java:102) 
```

您会看到文本 String 为空，`""`. 这是因为您在调用时没有文本，`Class cs = Class.forName(text);`因为它是在呈现 GUI 之前被调用的，更不用说给用户输入文本的时间了。仅在由于用户生成的某种事件（例如 ActionListener 的 actionPerformed 方法）而调用的代码中调用它。

换句话说，将关键代码添加到***您自己***的评论中您声明应该添加代码的位置：

```
 jb.addActionListener(new ActionListener() {
     public void actionPerformed(ActionEvent e) {
        // THIS CODE IS EXECUTED WHEN RETURN IS TYPED  // *********!!!!
     }
  }); 
```

我支持您应该显示有关异常的所有信息的评论。请不要让我们猜测问题是什么。

**编辑**
此外，在匿名内部侦听器类中使用局部变量（包括 JLabels 和 JTextField）时会遇到问题。解决这个问题的最简单和最好的方法是让需要在这个监听器私有类字段中访问的变量。因此，从构造函数中删除它们的声明，而是将它们移动到类本身。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-02T18:31:10.240

真的是错误还是“黄线”？`Class`是参数化类型，如果您不使用泛型，则 eclipse 将显示警告。

要消除这样的警告，只需执行

```
Class<?> cs = Class.forName(text); 
```

通配符是可以的，因为你真的不知道你要加载哪个“类型”的 Class。

# java - Java - H2 数据库 - getGeneratedKeys() 不返回任何结果

> ID：14664888
> 
> 赞同：5
> 
> 时间：2013-02-02T18:11:00.007
> 
> 标签：java, sql, database, jdbc, h2

好吧，我错过了什么？

我有一张这样的桌子：

```
CREATE TABLE PUBLIC.RESULTS
(RESULTID IDENTITY NOT NULL,
SOURCEID INTEGER NOT NULL,
PARENTID INTEGER,
NAME VARCHAR(25) NOT NULL,
VALUE CLOB NOT NULL,
PRIMARY KEY (RESULTID)) 
```

我尝试让 RESULTID 既是带有 AUTO_INCREMENT 的 INTEGER，又是 IDENTITY 类型。

我正在使用准备好的语句，无论我做什么，我在尝试设置 a 的值时都会抛出“无数据”异常：

```
String sql = "INSERT INTO RESULTS (SOURCEID, PARENTID, NAME, VALUE) VALUES (?, ?, ?, ?)";
PreparedStatement stmt = null;
stmt = conn.prepareStatement(sql, Statement.RETURN_GENERATED_KEYS);
... {Truncated setting of values} ...

stmt.executeUpdate();
conn.commit();
ResultSet rs2 = stmt.getGeneratedKeys();
rs2.next();
Integer a = rs2.getInt(1); 
```

当我实际查看数据库时，数据已正确插入，为 RESULTID 字段设置下一个值就好了，我似乎无法返回该值。

我必须做一些愚蠢的事情，因为这应该有效。有任何想法吗？

由于有人问完整的堆栈跟踪如下：

```
org.h2.jdbc.JdbcSQLException: No data is available [2000-170]
    at org.h2.message.DbException.getJdbcSQLException(DbException.java:329)
    at org.h2.message.DbException.get(DbException.java:169)
    at org.h2.message.DbException.get(DbException.java:146)
    at org.h2.message.DbException.get(DbException.java:135)
    at org.h2.jdbc.JdbcResultSet.checkOnValidRow(JdbcResultSet.java:2957)
    at org.h2.jdbc.JdbcResultSet.get(JdbcResultSet.java:2963)
    at org.h2.jdbc.JdbcResultSet.getInt(JdbcResultSet.java:307)
    at com.cigital.db.DefaultDb.storeValue(DefaultDb.java:147)
    at com.cigital.db.DefaultDb.processResult(DefaultDb.java:115)
    at com.cigital.db.DefaultDb.importScan(DefaultDb.java:84)
    at com.cigital.gui.Default.jButImportActionPerformed(Default.java:373)
    at com.cigital.gui.Default.access$400(Default.java:26)
    at com.cigital.gui.Default$6.actionPerformed(Default.java:131)
    at javax.swing.AbstractButton.fireActionPerformed(AbstractButton.java:1995)
    at javax.swing.AbstractButton$Handler.actionPerformed(AbstractButton.java:2318)
    at javax.swing.DefaultButtonModel.fireActionPerformed(DefaultButtonModel.java:387)
    at javax.swing.DefaultButtonModel.setPressed(DefaultButtonModel.java:242)
    at javax.swing.plaf.basic.BasicButtonListener.mouseReleased(BasicButtonListener.java:236)
    at java.awt.AWTEventMulticaster.mouseReleased(AWTEventMulticaster.java:272)
    at java.awt.Component.processMouseEvent(Component.java:6289)
    at javax.swing.JComponent.processMouseEvent(JComponent.java:3267)
    at java.awt.Component.processEvent(Component.java:6054)
    at java.awt.Container.processEvent(Container.java:2041)
    at java.awt.Component.dispatchEventImpl(Component.java:4652)
    at java.awt.Container.dispatchEventImpl(Container.java:2099)
    at java.awt.Component.dispatchEvent(Component.java:4482)
    at java.awt.LightweightDispatcher.retargetMouseEvent(Container.java:4577)
    at java.awt.LightweightDispatcher.processMouseEvent(Container.java:4238)
    at java.awt.LightweightDispatcher.dispatchEvent(Container.java:4168)
    at java.awt.Container.dispatchEventImpl(Container.java:2085)
    at java.awt.Window.dispatchEventImpl(Window.java:2478)
    at java.awt.Component.dispatchEvent(Component.java:4482)
    at java.awt.EventQueue.dispatchEventImpl(EventQueue.java:644)
    at java.awt.EventQueue.access$000(EventQueue.java:85)
    at java.awt.EventQueue$1.run(EventQueue.java:603)
    at java.awt.EventQueue$1.run(EventQueue.java:601)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.security.AccessControlContext$1.doIntersectionPrivilege(AccessControlContext.java:87)
    at java.security.AccessControlContext$1.doIntersectionPrivilege(AccessControlContext.java:98)
    at java.awt.EventQueue$2.run(EventQueue.java:617)
    at java.awt.EventQueue$2.run(EventQueue.java:615)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.security.AccessControlContext$1.doIntersectionPrivilege(AccessControlContext.java:87)
    at java.awt.EventQueue.dispatchEvent(EventQueue.java:614)
    at java.awt.EventDispatchThread.pumpOneEventForFilters(EventDispatchThread.java:269)
    at java.awt.EventDispatchThread.pumpEventsForFilter(EventDispatchThread.java:184)
    at java.awt.EventDispatchThread.pumpEventsForHierarchy(EventDispatchThread.java:174)
    at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:169)
    at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:161)
    at java.awt.EventDispatchThread.run(EventDispatchThread.java:122) 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-02T22:08:04.380

您需要在提交连接*之前*而不是之后获取生成的密钥。

# iphone - Objective C - 多线程问题

> ID：14664893
> 
> 赞同：0
> 
> 时间：2013-02-02T18:11:16.373
> 
> 标签：iphone, ios, objective-c, xcode, multithreading

在我的应用程序中，当用户按下 中的其中一个选项卡`UITabBar`时，加载视图并将其显示给用户需要花费太多时间，因此可能会造成混淆（这是因为我在 中从网络加载图像`UITableView`）。所以，我决定在所有图像完成加载之前使用多线程来显示视图。

我正在使用这段代码：

```
- (UITableViewCell *)tableView:(UITableView *)tableView
           cellForRowAtIndexPath:(NSIndexPath *)indexPath {
    static NSString *CellIdentifier = @"Cell";
    cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if (cell == nil) {
        cell = [[SetsCustomCell alloc] initWithFrame:CGRectZero];
    }
    // getting url
    NSURL* imgUrl = [[NSURL alloc]initWithString:[[mainArray objectAtIndex:
                       indexPath.row]valueForKey:@"imageURL"]];
    //put this url and current cell in the dictionary
    NSDictionary* params = [NSDictionary dictionaryWithObjectsAndKeys:
                    imgUrl,@"localUrl",cell,@"localCell", nil];
   // multithreading time (calling loadImageWithParams method)
    [self performSelectorInBackground:@selector(loadImageWithParams:)
                           withObject:params];
    return cell;
}
-(void)loadImageWithParams:(NSDictionary*)params {
    NSURL* url = [params objectForKey:@"localUrl"];
    cell = [params objectForKey:@"localCell"];
    UIImage* thumb = [UIImage imageWithData:[NSData dataWithContentsOfURL:url]];
    NSDictionary* backParams = [NSDictionary dictionaryWithObjectsAndKeys: 
                   cell,@"localCell",thumb,@"thumb", nil];
    [self performSelectorOnMainThread:@selector(setImage:)
                        withObject:backParams waitUntilDone:YES];
}
-(void)setImage:(NSDictionary*)params{
    cell = [params objectForKey:@"localCell"];
    UIImage* thumb = [params objectForKey:@"thumb"];
    [cell.imageView setImage:thumb];
    cell.imageView.hidden = NO;
    [cell setNeedsLayout];
} 
```

我只有两个单元格，`UITableView`问题是只有第二个单元格加载它的图像。第一个单元格仍然是空的。但是，如果我滚动`UITableView`直到第一个单元格不再可见，然后`cellForRowAtIndexPath:`再次调用，第一个单元格将获取其图像。

我也尝试过使用多线程，`NSOperationQueue`但`GCD`结果相同。

似乎我不清楚多线程是如何工作的，但如果有人指出我的错误，我将非常感激。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-02T18:21:49.287

我过去这样做的方法是创建一个 NSObject 子类来存储图像。然后 UITableView 的数据存储是这些对象的数组，而不是 URL 路径。

然后你可以像这样延迟加载图像......

对象模型.h

```
@property (nonatomic, strong) UIImage *image; 
```

对象模型.m

```
- (UIImage*)image
{
    if (_image == nil) {
        [self downloadImage];
        return [UIImage imageNamed:@"placeholderImage"];
    }
    return _image;
}

- (void)downloadImage
{
    //Put your async stuff here to download the image then reload the tableView when it's done.
} 
```

通过这样做，您将图像存储在数据存储中，同时也在其自己的类中管理下载内容并保持 TVC 清洁。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-02T18:24:56.847

看起来你把这个复杂化了——我真的不明白你在用 params 字典做什么。为什么不显示控制器，然后在 viewDidAppear 中开始下载。当结果回来时，用它们填充你的数组，然后调用 reloadData。除了可以立即加载的图像之外，这些单元格中是否还有其他内容？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-02T18:49:22.140

典型的做法是实现一个在后台下载/加载图像的 LazyUIImage 类。在下载图像时，显示类似于 UIActivityIndi​​cator 的内容。当图像到达 LazyUIImage 时，发出通知并停止活动指示符（并可能将其从视图中删除）。对于每个包含 LazyUIImage 的视图控制器，处理该通知，例如，执行 [myTable reloadData]。在 LazyUIImage 中，编写一个名为 getImage 的方法，该方法在加载图像时返回 nil，并在加载图像后返回图像。

编辑：实际上，如果您将 LazyUIImage 实现为 LazyUIImageView 那么您不需要在包含视图控制器中重新加载任何内容：在 LazyUIImageView 中放置一个顶级背景视图，然后切换出实际 UIImageView 的 UIActivityIndi​​cator 子视图图片下载完成。

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2013-02-02T18:30:03.537

你需要做延迟加载的东西。使用 NSOperationQueue 搜索延迟加载。

# c++ - 在 c++ 中，从 unsigned int 到 int 的转换总是保留位模式吗？

> ID：14664896
> 
> 赞同：13
> 
> 时间：2013-02-02T18:12:06.207
> 
> 标签：c++, casting, language-lawyer

从标准（4.7）看来，从 int 到 unsigned int 的转换，当它们都使用相同的位数时，纯粹是概念性的：

> 如果目标类型是无符号的，则结果值是与源整数一致的最小无符号整数（模 2 n，其中 n 是用于表示无符号类型的位数）。[ 注意：在二进制补码表示中，这种转换是概念性的，位模式没有变化（如果没有截断）。——尾注]

所以在这个方向上，转换保留了位掩码。我不确定标准是否保证从 unsigned int 到 int 的转换相同（再次假设使用相同的位数）。这里的标准说：

> 如果目标类型是有符号的，如果它可以在目标类型（和位域宽度）中表示，则值不变；否则，该值是实现定义的。

这里的“目标类型”到底是什么意思？例如 2^32-1 不能用 32 位整数表示。这是否意味着它不能在目标类型中表示，因此不能假设位模式将保持不变？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-02T18:29:30.777

`int`在这种情况下是目标类型。正如您所说，2^32-1 在这种情况下无法表示，因此它是特定于实现的。虽然，我只见过它保留位模式。

编辑：我应该补充一点，在嵌入式世界中，当一个存储位置需要多个位对位相同的表示时，我们经常使用联合。

所以在这种情况下

```
union FOO {
    int32_t signedVal;
    uint32_t unsignedVal;
} var; 
```

`var`可以访问`var.signedVal`以将 32 位存储为有符号整数，`var.unsignedVal`并将 32 位存储为无符号值。在这种情况下，位将被保留。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-02T18:30:38.130

你不能假设*任何事情*。

第一个引号没有说明位掩码保持不变。它可能在二进制补码中相同，但在一个补码或其他表示中不同。

其次，实现定义的意思是实现定义的，你不能假设任何东西。

理论上，每次转换后表示可以完全不同。就是这样。

* * *

If you look at it in a realistic way things come more concrete. Usually, int's are stored in two's complement and signed->unsigned preserves the pattern as unsigned->signed does (since the value can be implementation-deﬁned, the cheapest way is doing nothing).

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-02T18:28:18.320

“目标类型”是指您分配/转换到的类型。

整个段落意味着`unsigned int`转换为 32 位的 32 位`signed int`将保持原样，因为该值适合`signed int`. 如果它们不适合，则取决于它的实现（例如截断）。这意味着它实际上取决于位是否保留或是否更改（无法保证）。

或者换句话说：如果`unsigned int`使用它的最高有效位，则结果不再是可预测的。否则没有任何变化（除了改变“盒子上的名字”）。

# java - 测量java短时间运行线程执行时间

> ID：14664897
> 
> 赞同：6
> 
> 时间：2013-02-02T18:12:08.307
> 
> 标签：java, multithreading, precision

我目前正在开发某种数据库基准应用程序。基本上，我要做的是使用线程模拟一定数量的客户端，这些客户端在特定时间段内都对数据库重复相同的操作（例如：读取操作）。
在此期间，我想在每个线程中测量从数据库中获取答案的平均延迟。

我的第一选择是依靠 ThreadMXBean 的 getThreadCpuTime() 方法（[http://docs.oracle.com/javase/7/docs/api/java/lang/management/ThreadMXBean.html](http://docs.oracle.com/javase/7/docs/api/java/lang/management/ThreadMXBean.html)）但关键是操作完成太快无法测量（操作前的 getThreadCpuTime() 等于操作后的 getThreadCpuTime()）。

我做了一个小实验来理解和说明问题：

```
public class ExampleClass {
class LongRunningThread extends Thread {
    private int n;
    public LongRunningThread(int n) {
        this.n = n;
    }
    public void run() {
        ArrayList l = new ArrayList();
        for (int i = 0; i < n; i++) {
            l.add(new Object());
        }
        long time = ManagementFactory.getThreadMXBean().getThreadCpuTime(this.getId());
        System.out.println("Long running thread " + this.getId() + " execution time: " + time);
    }
}

class MyThread extends Thread {
    int n;
    public MyThread(int n) {
        this.n = n;
    }
    public void run() {
        ArrayList l = new ArrayList();
        for (int i = 0; i < n; i++) {
            l.add(new Object());
        }
        long time = ManagementFactory.getThreadMXBean().getThreadCpuTime(this.getId());
        System.out.println("My thread " + this.getId() + " execution time: " + time);
    }
}

public static void main(String [] args) {
        System.out.println("Cpu time supported? " + ManagementFactory.getThreadMXBean().isThreadCpuTimeSupported());
    System.out.println("Cpu time enabled? " + ManagementFactory.getThreadMXBean().isThreadCpuTimeEnabled());
    for (int i = 1; i < 10; ++i) {
        new LongRunningThread(i*1000000).start();
    }

    for (int i = 1; i < 10; ++i) {
        new MyThread(i*100).start();
    }
}

Output:
Cpu time supported? true
Cpu time enabled? true
My thread 18 execution time: 0
My thread 26 execution time: 0
My thread 20 execution time: 0
My thread 22 execution time: 0
My thread 24 execution time: 0
My thread 21 execution time: 0
My thread 25 execution time: 0
My thread 19 execution time: 0
My thread 23 execution time: 0
Long running thread 9 execution time: 15600100
Long running thread 10 execution time: 15600100
Long running thread 11 execution time: 46800300
Long running thread 12 execution time: 31200200
Long running thread 14 execution time: 78000500
Long running thread 13 execution time: 78000500
Long running thread 17 execution time: 124800800
Long running thread 15 execution time: 140400900
Long running thread 16 execution time: 109200700 
```

我无法获得所有`MyThread`实例的执行时间，但实例没有问题`LongRunningThread`。就像我说的，我的假设是第一个线程完成的操作发生得太快而无法实际测量。有什么办法可以实现我想要做的事情吗？是否可以测量如此短时间运行的线程的执行时间？

提前感谢您的帮助:)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-02T18:25:06.597

您是否考虑过这个框架[http://metrics.codahale.com/](http://metrics.codahale.com/)。它非常非常好，并且内置了通过 JMX 公开指标的支持

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-02T20:11:06.667

> Is it possible to measure the execution time for such short time running threads?

Without measuring wall-clock times with the nano-second clock, the answer may be no. For small loops, the measured CPU time may be smaller than the precision of the method. The [javadocs for `ThreadMXBean.getThreadCpuTime(...)`](http://docs.oracle.com/javase/6/docs/api/java/lang/management/ThreadMXBean.html#getThreadCpuTime%28long%29) say:

> Returns the total CPU time for a thread of the specified ID in nanoseconds. The returned value is of nanoseconds precision but not necessarily nanoseconds accuracy.

One thing to consider would be to take the CPU time if it is > 0 and take the wall-clock time if it is == 0.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-02T18:43:31.883

作为更简单的解决方案，您可以使用下一个：

```
class MyThread extends Thread {
    int n;
    public MyThread(int n) {
        this.n = n;
    }
    public void run() {
        long startTime = System.nanoTime();
        ArrayList l = new ArrayList(n);
        for (int i = 0; i < n; i++) {
            l.add(new Object());
        }
        long time = System.nanoTime() - startTime;
        System.out.println("My thread " + this.getId() + " execution time: " + time + " ns");
    }
} 
```

如果您不需要纳秒精度，则可以`System.currentTimeMillis()`改用。

# ruby - 在 Ubuntu 12.04 上编译 Postgres pg gem 时出错

> ID：14664904
> 
> 赞同：4
> 
> 时间：2013-02-02T18:12:39.287
> 
> 标签：ruby, postgresql, rubygems, ubuntu-12.04, pg

> **可能重复：**
> [无法在 ubuntu 上安装 pg gem - 找不到 'libpq-fe.h 标头](https://stackoverflow.com/questions/6040583/unable-to-install-pg-gem-on-ubuntu-cant-find-the-libpq-fe-h-header)

这是尝试做的错误`bundle install`

```
Building native extensions.  This could take a while...
ERROR:  Error installing pg:
    ERROR: Failed to build gem native extension.

        /usr/bin/ruby1.8 extconf.rb
checking for pg_config... no
No pg_config... trying anyway. If building fails, please try again with
 --with-pg-config=/path/to/pg_config
checking for libpq-fe.h... no
Can't find the 'libpq-fe.h header
*** extconf.rb failed ***
Could not create Makefile due to some reason, probably lack of
necessary libraries and/or headers.  Check the mkmf.log file for more
details.  You may need configuration options.

Provided configuration options:
    --with-opt-dir
    --without-opt-dir
    --with-opt-include
    --without-opt-include=${opt-dir}/include
    --with-opt-lib
    --without-opt-lib=${opt-dir}/lib
    --with-make-prog
    --without-make-prog
    --srcdir=.
    --curdir
    --ruby=/usr/bin/ruby1.8
    --with-pg
    --without-pg
    --with-pg-dir
    --without-pg-dir
    --with-pg-include
    --without-pg-include=${pg-dir}/include
    --with-pg-lib
    --without-pg-lib=${pg-dir}/lib
    --with-pg-config
    --without-pg-config
    --with-pg_config
    --without-pg_config

Gem files will remain installed in /var/lib/gems/1.8/gems/pg-0.14.1 for inspection.
Results logged to /var/lib/gems/1.8/gems/pg-0.14.1/ext/gem_make.out 
```

我正在使用 ubuntu 12.04.Can 任何一点可能是错的

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-02T18:37:03.647

看起来您需要为 postgres 安装开发库：

```
sudo apt-get install libpq-dev 
```

# javascript - 用于在生产/部署之间切换 URL/变量的 Javascript 构建工具

> ID：14664916
> 
> 赞同：1
> 
> 时间：2013-02-02T18:13:29.537
> 
> 标签：javascript, python, build

我正在开始我的第一个大型 javascript 项目！我有一个关于部署的问题。我正在使用对 Web 服务的 ajax 调用。为了进行设置，我有一个静态 JS 文件，其代码如下：

```
var API_URL_ROOT = 'http://api.example.com/';

var IN_DEVELOPMENT = True;
if (IN_DEVELOPMENT) {
  API_URL_ROOT = 'http://localhost.com/api';
}

$.get(API_URL_ROOT) 
```

我正在使用 python/fabric 进行部署。 **我想知道是否有任何预构建的工具来处理 javascript 文件的静态分析/操作。**, 现在它留给提交者来切换

我正在计划一个部署过程，例如：

1.  发出部署命令
2.  “构建” JS，通过将所有值设置为生产值（即。`IN_DEVELOPMENT = False`）
3.  缩小 JS
4.  将代码部署到生产服务器

我正在考虑只使用 sed 或其他东西来进行`IN_DEVELPMENT = False`替换。我查看了一些流行的缩小工具，但似乎没有一个提供这种功能。

我认为这对于应用程序来说是一个非常常见的问题。一般是怎么处理的？任何帮助，将不胜感激。谢谢

我最近从 Mozilla 阅读了[一篇](https://shanetomlinson.com/2013/testing-javascript-frontend-part-1-anti-patterns-and-fixes/)关于hackernews 的文章：

> 在 Mozilla Persona 代码库中，我们经常将难以测试的私有函数暴露给公共接口，清楚地将额外的函数标记为测试 API 的一部分。虽然其他开发者仍然可以调用这些私有函数，但作者的意图很明确。

```
...
publicFunction: function() {
  return "publicFunction can be invoked externally but " 
             + privateFunction();
}

// BEGIN TESTING API
,
privateFunction: privateFunction
// END TESTING API
};

// privateFunction is now accessible via the TESTING API
function privateFunction() {
... 
```

> 可以在构建过程中删除 // BEGIN TESTING API 和 //END TESTING API 伪标记之间的代码以用于生产。

所以其他公司肯定也在这样做。是否有预制工具来促进可以删除此代码的 JS 构建过程？我在 github 上浏览了他们的一些项目，但没有看到任何项目。谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-06T17:45:26.867

我们正在使用道场

在 dojo 中，您可以对 js 的构建版本使用条件排除，以排除您在构建 js 中不需要的部分代码。希望这可以帮助。

例如：

```
var API_URL_ROOT = 'http://api.example.com/';

//>>excludeStart("dev",!pragmas.dev);
    var IN_DEVELOPMENT = True;
//>>excludeEnd("dev");

if (IN_DEVELOPMENT) {
  API_URL_ROOT = 'http://localhost.com/api';
}

$.get(API_URL_ROOT) 
```

# java - 抛出 IOE 时 JUnit 期望 IOException，将测试标记为失败

> ID：14664918
> 
> 赞同：0
> 
> 时间：2013-02-02T18:13:49.207
> 
> 标签：java, junit, tdd, ioexception

我有一些测试方法的行为与我预期的不同。在这些场景中，我将日志消息写入文本文件。

这两种方法都是关于关闭文件的输出链接并尝试写入文件。显然，这意味着我希望`IOException`这也反映在我的代码中。

这是我说的两种测试方法

```
@Test(expected = IOException.class)
public void writeToClosedConnection() throws IOException {
    LogHandler.getInstance().createNewChatlog("Jack");
    LogHandler.getInstance().stopLogging(); // Closes the bufferedWriter
    LogHandler.getInstance().writeToChatLog(new Message("Jim", "CAN'T WORK"));
}

@Test(expected = IOException.class)
public void closeStream() throws IOException {
    log = new ChatLog(new GregorianCalendar(), "STANDARDTESTLOG", directory);
    log.closeLogFile(); // Closes the bufferedWriter
    log.addMessage(new Message("Jim", "CAN'T WORK"));
} 
```

两种写消息的方法都属于同一个路由。`writeToChatLog`invokes `addMessage`，它将依次调用该`writeToLogFile`方法。

最后一种方法定义为

```
protected void writeToLogFile(String message) {
    try {
        if (logging) {
            bWriter.write(message);
            bWriter.newLine();
            bWriter.flush();
        } else {
            throw new ForbiddenActionException("Logging is disabled");
        }
    } catch (IOException e) {
        OutputUtil.showErrorMessage("Couldn't write to logfile", "IO error");
        e.printStackTrace();
    }
} 
```

手头的问题是，即使抛出 IO 错误（两次：）

```
java.io.IOException: Stream closed
    at java.io.BufferedWriter.ensureOpen(Unknown Source)
    at java.io.BufferedWriter.write(Unknown Source)
    at java.io.Writer.write(Unknown Source)
    at io.Log.writeToLogFile(Log.java:41)
    at io.ChatLog.addMessage(ChatLog.java:16)
    at tests.ChatLogTest.closeStream(ChatLogTest.java:76) 
```

并且显示了弹出消息 ( `Couldn't write to logfile`)，我仍然得到一个 assertionError ( `java.lang.AssertionError: Expected exception: java.io.IOException`)。

JUnit 是第 4 版。

为什么会这样？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-02T18:17:30.213

`writeToLogFile()`不会抛出 IOException。如果是这样，则必须将其声明为

```
protected void writeToLogFile(String message) throws IOException { 
```

您明确地*捕获*了任何 IOException 可能从`writeToLogFile()`. 捕获异常正是为了避免抛出异常。

不要捕获 IOException，在方法声明中声明 IOException，测试就会通过：

```
protected void writeToLogFile(String message) throws IOException {
    if (logging) {
        bWriter.write(message);
        bWriter.newLine();
        bWriter.flush();
    } else {
        throw new ForbiddenActionException("Logging is disabled");
    }
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-02T18:17:40.333

你从来没有真正扔过`IOException`。在里面`writeToLogFile`你抓住它，记录它，什么都不做。从你外部世界的角度来看，没有发生任何错误：

```
protected void writeToLogFile(String message) {
    try {
        //...
    } catch (IOException e) {
        //...
        e.printStackTrace();
    }
} 
```

你看，就算`IOException`被扔了，也被压制了。因此它永远不会*脱离*方法，`writeToClosedConnection()`所以 JUnit 看不到它。它没有通过测试。一个快速的解决方案是传播异常，不幸的是这需要修改您的签名：

```
protected void writeToLogFile(String message) throws IOException {
    try {
        //...
    } catch (IOException e) {
        //...
        throw e;
    }
} 
```

# user-interface - 可以在不重定向到 Dwolla 网站的情况下使用 Dwolla 的付款按钮吗？

> ID：14664922
> 
> 赞同：1
> 
> 时间：2013-02-02T18:14:27.677
> 
> 标签：user-interface, paypal, payment-gateway, user-experience, dwolla

我对 Dwolla 的“支付按钮”和他们的“异地网关”之间的区别感到困惑。Payment Button 的目标是将用户重定向到 Dwolla 的网站，而使用 Off-site Gateway 可以让用户在整个交易过程中留在商家的网站上？从[Dwolla 的文档](https://developers.dwolla.com/dev/docs)中并不清楚。

如果用户无法在**不**重定向到 Dwolla 网站的情况下向商家付款，我强烈建议将此作为功能请求。

作为一种中间解决方案，如果使用 Dwolla 支付按钮 (oAuth) 时的工作流程可以从两步压缩为一个，那就太好了。目前，一个人必须登录然后提供他们的密码，这需要提交两份表格。如果这只是一种形式，那就更好了。这将是一个更好的用户体验，并进一步与 Paypal 提供的差距。

# php - 如何限制用户下载或保存 pdf 文件？

> ID：14664923
> 
> 赞同：0
> 
> 时间：2013-02-02T18:14:29.637
> 
> 标签：php, javascript, jquery, symfony-1.4

> **可能重复：**
> [阻止 PDF 文件下载和打印](https://stackoverflow.com/questions/4930914/prevent-pdf-file-from-downloading-and-printing)

在我当前的 symfony 项目中（在管理部分）我上传了 pdf 文件并使用 JavaScript 打开它，但我想限制用户下载或保存该 pdf？

那么我可以限制用户下载或保存pdf吗？

我的意思是用户只能查看该 pdf 的内容，我想禁用该 pdf 的所有浏览器的下载或保存选项。

pdf 文件只能从服务器打开。

## 动作文件代码：

```
echo "<span onclick=\"clickme('$pdf_name')\";>view</span>"; 
```

## 成功文件代码：

```
<script type="text/javascript">
   function clickme(file_name){
     window.open(file_name); 
   }   
</script> 
```

提前谢谢你。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-02T18:17:06.540

几乎不可能阻止人们下载任何东西，更不用说 PDF 了。恐怕您将不得不使用替代方案，例如仅显示文档的预览或使用水印。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-02T18:56:49.813

简单的事实是，如果用户正在查看 PDF 文件，他们已经将其下载到计算机上的临时目录中。

我经常看到这样的问题（主要是针对 GIF/JPEG），但您必须明白，完全不可能避免这种情况的解决方案，因为当您将 PDF 发送到用户的机器时，您已经输掉了游戏。

您所能期望的最好的结果就是让用户难以做到这一点，但只要付出足够的努力，就无法阻止他们。例如，您将如何防止他们截取图像，或者直接从浏览器缓存中获取它？

您可以通过在 PDF 文件本身中设置[安全标志来](http://www.ehow.com/how_5856162_restrict-_save_-_save-as_-pdf.html)阻止不精通的用户。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-02T18:24:36.987

是的，它可以通过文件标题中的强制浏览器

它强制浏览器下载而不是查看它已关闭通过 Htaccess 并且您也可以通过 PHP 执行

```
<FilesMatch "\.(?i:pdf)$">
   ForceType application/octet-stream
   Header set Content-Disposition attachment
</FilesMatch> 
```

看下面的链接希望对你有帮助

[链接1](http://www.tipsandtricks-hq.com/forum/topic/force-a-file-to-download-instead-of-showing-up-in-the-browser)

[链接2](http://drupal.org/node/417866)

[链接3](http://megarush.net/force-file-download/)

# javascript - 包含每个选项内容的下拉列表 (, ) I just try to make a Dropdown List. When I'm clicking at one option, I want, that for each option a specific content (text) appears. But I have no idea, how I can do this. Here's the code:

> ID：14664924
> 
> 赞同：1
> 
> 时间：2013-02-02T18:14:36.027
> 
> 标签：javascript, html, drop-down-menu, option

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-02T18:28:42.850

使用 jquery .. 将 ID 分配给您的选择元素并使用以下代码

```
$('#select-id').change(function() {
    //piece of code to do when option changes
}) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-02T19:10:21.013

我认为这会成功。我们将隐藏所有其他不需要的块，并将出现我们唯一需要的块

```
<html>
    <head>
      <style>
        .yourContentHere {
            display: none;
        }
        .activeContent {
           display: block;
        }
      </style>
      <script src="http://code.jquery.com/jquery-1.8.3.min.js"></script>
    </head>
    <body>

     <form name="dropdown-list">

      <select>

       <option value="1" selected="selected">1</option>

       <option value="2">2</option>

       <option value="3">3</option>

      </select>

     </form>

    <div id="yourDropdownChoiceContent">
      <div class="yourContentHere activeContent">This wiil appear if we click dropdown 1</div>
      <div class="yourContentHere">This wiil appear if we click dropdown 2</div>
      <div class="yourContentHere">This wiil appear if we click dropdown 3</div>
    </div>
    <script>
    $('select').change(function(){
        var chosenOption = $('select option:selected').index()
        $('.yourContentHere').removeClass('activeContent')
        $('.yourContentHere').eq(chosenOption).addClass('activeContent')
    });
    </script>
 </body>
</html> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-02T18:47:03.953

我认为您需要使用Javascript。

# security - 基于表单的登录 java web 应用程序

> ID：14664925
> 
> 赞同：0
> 
> 时间：2013-02-02T18:14:40.870
> 
> 标签：security, jsf, authentication, jboss

我正在尝试对 Web 应用程序执行基于表单的登录。我正在使用 JSF 和 JBoss v7.1.1。我已按照网页 [http://docs.oracle.com/javaee/6/tutorial/doc/bncbx.html#bncby的说明进行操作](http://docs.oracle.com/javaee/6/tutorial/doc/bncbx.html#bncby)

这是我的登录页面：

登录以访问安全页面：

```
 <h:panelGrid columns="2">
        <h:outputLabel value="Username: " />
        <input type="text" id="j_username" name="j_username" />

        <h:outputLabel value="Password: " />
        <input type="password" id="j_password" name="j_password" />

        <h:outputText value="" />
        <h:panelGrid columns="1">
            <input type="submit" name="submit" value="Login" />
        </h:panelGrid>
    </h:panelGrid>
    <br />
</form> 
```

我已经设法执行了身份验证，但是当用户被重定向到受限资源时，我需要知道用户使用的登录数据（例如，用于成功执行登录的用户名）。有谁知道如何访问此信息？我想在 JSF 页面的 ManagedBean 类中使用它。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-03T02:05:45.787

远程用户位于可用的 JSF bean 中[`ExternalContext#getRemoteUser()`](http://docs.oracle.com/javaee/6/api/javax/faces/context/ExternalContext.html#getRemoteUser%28%29)。

```
String remoteUser = FacesContext.getCurrentInstance().getExternalContext().getRemoteUser();
 // ... 
```

这是从 中获得的[`HttpServletRequest#getRemoteUser()`](http://docs.oracle.com/javaee/6/api/javax/servlet/http/HttpServletRequest.html#getRemoteUser%28%29)，因此也意味着它在 JSF 视图中可用，如下所示：

```
<p>You're logged in as #{request.remoteUser}.</p> 
```

或者，更详细：

```
<p>You're logged in as #{facesContext.externalContext.remoteUser}.</p> 
```

# twitter-bootstrap - 不能跨越 Twitter Bootstrap hero div 中的 12 列

> ID：14664926
> 
> 赞同：0
> 
> 时间：2013-02-02T18:14:56.047
> 
> 标签：twitter-bootstrap, html

我试图在一个英雄中跨越 12 列，但它不起作用。如果我跨越文本 8 列和图像 4 ，右侧的图像会一直低于我的`h1`和文本。`p`

如果我跨越文本 6 列和图像 4 一切都很好。下面是我的代码：

```
 <div class="hero-unit">
        <div class="row">
          <div class="span8">
          <h1>MISSION</h1>
          <p>Providing our clients with superior service.</p>
          <p><a class="btn btn-primary btn-large">Learn more &raquo;</a></p>
        </div>
        <div class="span4">
        <img src="img/american-flag.jpg" alt="American Flag" />
      </div>
        </div>
      </div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T11:15:48.647

您是否尝试过查看有关偏移列的文档？我用宽度为 301px 的图像尝试了您的代码，并且似乎可以移动

```
 <div class="hero-unit">
    <div class="row">
      <div class="span8">
      <h1>MISSION</h1>
      <p>Providing our clients with superior service.</p>
      <p><a class="btn btn-primary btn-large">Learn more &raquo;</a></p>
    </div>
    <div class="span4 offset6">
    <img src="images/facebook_logo.jpg" alt="American Flag" class="test"/>
  </div>
    </div>
  </div> 
```

* * *

然后我进入我的CSS并做了其中之一：

```
.test           {
                 margin-top: -100px;
} 
```

用于向上移动图像

# python - Python pickle.load 抛出 __init___ 错误

> ID：14664928
> 
> 赞同：2
> 
> 时间：2013-02-02T18:15:19.890
> 
> 标签：python, exception, python-3.x, pickle, init

在 python 3.3 中，我编写了一些代码来尝试腌制用户定义类的实例。酸洗似乎进展顺利，但在 unpickling 时出现此错误：

```
Traceback (most recent call last):
  File "C:\Users\Bobby\Desktop\Python Programs\Conway's Game Of Life\GameOfLife.py",                 
line 172, in <module>
    main()
  File "C:\Users\Bobby\Desktop\Python Programs\Conway's Game Of Life\GameOfLife.py", 
line 156, in main
    newGrid = browseSaves()
  File "C:\Users\Bobby\Desktop\Python Programs\Conway's Game Of Life\GameOfLife.py", 
line 71, in browseSaves
    return loadGrid(choice)
  File "C:\Users\Bobby\Desktop\Python Programs\Conway's Game Of Life\GameOfLife.py", 
line 64, in loadGrid
    g = pickle.load(f)
TypeError: __init__() takes at most 4 positional arguments (5 given) 
```

我的印象是 __ init __ 没有调用 unpickling。我不知道是什么导致了这个错误。任何帮助表示赞赏，任何问题都会得到解答。

我想腌制的类，网格类，可以在这里找到：http: [//pastebin.com/LQwsvJkh](http://pastebin.com/LQwsvJkh)

更新：我尝试向网格类的 init 添加一些填充参数，但错误仍然显示“4 个参数”。它可能不引用该类的 init。

# c - 在没有 IDE 的 Microsoft Windows 7 上进行本机 C 编程

> ID：14664929
> 
> 赞同：2
> 
> 时间：2013-02-02T18:15:24.443
> 
> 标签：c, windows

有没有办法从 Windows 命令提示符编写、编译和运行 C 程序？我的意思是就像使用 gcc 编译器从 Linux 终端中实现的一样。

具体来说，我想知道微软的“cl.exe”C 编译器是如何工作的。我该如何安装它？是否可以简单地在记事本等文本编辑器中编写 C 程序，然后使用命令提示符中的 cl.exe 编译它并从那里运行它？

注意：我不希望在 Windows 上使用任何其他类型的 C 编程解决方案，例如使用 Turbo-C、DevC++ 等 3rd 方编译器，或使用 MingGW 等 Unix 模拟器，甚至是 Visual Studio、Eclipse 等 IDE 解决方案.我已经知道这些了。

我想要的是使用本机 Windows 平台使用微软自己的 cl.exe 编译器和标准 Windows 库进行控制台应用程序编程。可能吗？

抱歉，如果我听起来太复杂了:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-02T18:16:59.180

[这](http://msdn.microsoft.com/en-us/library/610ecb4h%28v=vs.80%29.aspx)解释了如何使用 cl.exe 命令行选项。您可能需要正确设置 PATH 变量才能使其正常工作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-02T18:17:20.190

您提出并回答您自己的问题 - 除了下载 SDK 并使用开发人员命令行编译文件 ( `cl hello.c`) 之外，没有什么比这更重要的了。通过使用开发人员命令行的快捷方式，您的 PATH 和其他环境变量已正确设置，您可以立即开始编译。

这是[完整的 cl 文档](http://msdn.microsoft.com/en-us/library/610ecb4h%28v=vs.80%29.aspx)。

# php - 我的 URL 的查询字符串不起作用

> ID：14664931
> 
> 赞同：2
> 
> 时间：2013-02-02T18:15:27.370
> 
> 标签：php, webmatrix-2

目前我正在使用 web matrix2 来构建我的 php 应用程序。我正在测试使用 GET 将查询字符串传递给另一个 php

场景 1：我在 index.php 中有 index.php 和 test.php
：我在 test.php 中有一个 php 语句`include("/test.php");`
：我运行时只有 2 条语句`echo "hi"; and echo $_GET["msg"];` ，浏览器中没有任何内容

当我摆脱 时`echo $_GET["msg"];`，它再次起作用。

场景 2：我在 index.php 中有 index.php 和 test.php
：我有一个 php 语句`include("/test.php?msg=hihihi")`；
在 test.php 中：我只有 2 条语句`echo "hi"; and echo $_GET["msg"]`；当我运行它时，我的浏览器中什么也没有出现

即使我尝试输入 Url `http://localhost:port/test.php?msg=hihihi`，也没有出现任何内容..~

然后我尝试使用链接对其进行测试

```
<a href="http://localhost:62878/menu/AddCat.php?msg=hihihi">link</a> 
```

AddCat.php 页面上仍然没有显示任何内容。

我已经在 EasyPhp 中尝试过...~ EasyPHP 中显示的错误是
Fatal error: require(): Failed opening required 'test.php?msg=hihi' (include_path='.;C:\php\pear') in C:\Program Files\EasyPHP-12.1\www\testing\index.php 位于第 2 行
，如果我将查询字符串与 php 包含语句中的 url 放在一起。

我不确定为什么我的代码以前无法正常工作，但现在修复了。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-02T18:21:34.113

不要将您在浏览器 URI 中看到的路径与服务器上的文件路径混淆。该`include()`语句引用服务器上的文件系统，并且`/test.php`将是文件系统顶部的文档（您不太可能写入的地方）。

假设`test.php`与您尝试从中包含的脚本位于同一目录中，您可以简单地使用`include("test.php")`

如果存在运行时/语法错误，那么 PHP 会将其记录在 Apache 错误日志中，请务必查看它。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-02T18:35:00.757

请运行

```
index.php?msg=hihihi 
```

它会告诉你结果

# c# - 返回 FilePath 的操作方法有时不起作用。为什么？

> ID：14664932
> 
> 赞同：0
> 
> 时间：2013-02-02T18:15:30.660
> 
> 标签：c#, asp.net, asp.net-mvc, asp.net-mvc-3

我有这个：

```
[AllowAnonymous]
public FilePathResult GetImage(string user)
{
    var path = AppDomain.CurrentDomain.BaseDirectory + "files\\uploads\\users\\" + user + "\\avatar\\";
    var ext = this.GetImageExtension(path, user);
    return ext != null ? File(path + user + "." + ext, "image/" + ext, user + "." + ext) : File(AppDomain.CurrentDomain.BaseDirectory + "files\\commonFiles\\users\\avatar\\noavatar.png", "image/png", "noavatar.png");
} 
```

在我的观点中，我有这个：

```
<img src="/MyAccount/GetImage/?user=@User.Identity.Name" 
     alt="@User.Identity.Name" /> 
```

现在，每当我在我的 Web 开发人员服务器中使用它时，它都可以正常工作。但是当我在我的服务器上发布我的网站时，它甚至没有尝试执行该操作。为什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-02T18:16:41.407

> 为什么？

因为您已将 url 硬编码到控制器操作，而不是使用 url 助手：

```
<img src="@Url.Action("GetImage", "MyAccount", new { user = User.Identity.Name })" alt="@User.Identity.Name" /> 
```

您永远不应该在 ASP.NET MVC 应用程序中硬编码 url，而应始终使用 url 帮助程序。

同样将当前登录的用户作为查询字符串参数传递看起来像一个可怕的安全问题。没有什么可以阻止用户传递他喜欢的任何用户名并查看该*用户*的图像。您应该在控制器操作中读取当前经过身份验证的用户。

所以首先摆脱这个查询字符串参数：

```
<img src="@Url.Action("GetImage", "MyAccount")" alt="@User.Identity.Name" /> 
```

然后在您的控制器操作中，您始终可以使用以下`User.Identity.Name`属性检索当前登录的用户：

```
[Authorize]
public FilePathResult GetImage()
{
    string user = User.Identity.Name;
    var path = Server.MapPath(
        string.Format("~/files/uploads/users/{0}/avatar/", user)
    );
    var ext = this.GetImageExtension(path, user);
    if (string.IsNullOrEmpty(ext))
    {
        return File(
            Server.MapPath("~/files/commonFiles/users/avatar/noavatar.png"), 
            "image/png", 
            "noavatar.png"
        );
    }
    var file = Path.ChangeExtension(Path.Combine(path, user), ext);
    return File(file, "image/" + ext, user + "." + ext);
} 
```

我还用`[Authorize]`属性修饰了这个控制器动作，使它只有经过身份验证的用户可以访问。如果这不是您的情况，您仍然可以保留该`[AllowAnonymous]`属性，但`User.Identity.IsAuthenticated`在尝试访问他的用户名之前进行检查。

# opencl - 在 OpenCL 内核中传递的内存对象和其他参数

> ID：14664933
> 
> 赞同：0
> 
> 时间：2013-02-02T18:15:35.403
> 
> 标签：opencl

在 OpenCL 中，我们如何在内核中发送内存对象或其他参数的地址（在设置内核参数时）并且在内核声明期间不接受它们作为指针？如何将地址分配给非指针数据类型，如下所示：

//在主机代码中设置内核参数：

```
errNum = clSetKernelArg(kernel, 0, sizeof(cl_mem), &imageObjects[0]);
errNum |= clSetKernelArg(kernel, 1, sizeof(cl_mem), &imageObjects[1]);
errNum |= clSetKernelArg(kernel, 2, sizeof(cl_sampler), &sampler);
errNum |= clSetKernelArg(kernel, 3, sizeof(cl_int), &width);
errNum |= clSetKernelArg(kernel, 4, sizeof(cl_int), &height); 
```

// 内核声明：

__kernel void gaussian_filter(__read_only image2d_t srcImg, __write_only image2d_t dstImg, sampler_t sampler, int width, int height)

该代码是 OpenCl Book Sample on Google Code 中给出的“ImageFilter”代码的一部分。

我有两个疑问：

1）这里的imageObjects[0]已经包含了输入图像的地址，那为什么还要把&imageObjects[0]传给内核呢？如果地址被传递，为什么不接受它们作为指针

2) args 高度和宽度的地址被传递，但没有一个 args 被接受为指针，而且如果它们被接受为指针，则在编译时给出错误。为什么会这样。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-02T23:00:35.567

`ImageObjects[0]`是一个`cl_mem`对象。这不是输入图像的地址。在这种情况下，您传递给的`clSetKernelArg`内容和内核实际获得的内容是不同的。

使用大小和地址的`clSetKernelArg`语法允许使用相同的 API 调用传递任何类型（包括 OpenCL 对象，如内存对象、采样器等）。

# c++ - 尝试创建链表时未定义头部

> ID：14664935
> 
> 赞同：-1
> 
> 时间：2013-02-02T18:16:11.747
> 
> 标签：c++, linked-list

我正在尝试为项目创建链接列表。我有这两个文件（一个.h 和一个.cpp）。我不确定如何制作一个复制构造函数，所以我不确定这是否与它有关。我想如果有人也想指出我正确的方向，那会很有帮助。谢谢你。

```
#include <iostream>
#include "studentList.h"

using namespace std;

// Default Constructor for StudentList
// Creates Dummy Head Node for a new empty list
StudentList::StudentList ()
{
// Create the dummy head node
Node* Head;             // Creates Head Node
Head = new Node;        
Head->next = NULL;      // Sets pointer to NULL by default
}

//Copy Constructor
StudentList::StudentList(const StudentList& list)
{

}

void StudentList::addStudentList(Student newStudent)
{ 
```

在这里得到错误！！！！！！

```
if (Head->next == NULL)
{
    Head->next->student = newStudent;
    Head->next->prev = Head;
    Head->next->next = NULL;
}
} 
```

这是.h文件

```
#include <iostream>
#include "Student.h"

using namespace std;

class StudentList{

public:
//Default Constructor
StudentList();
//Copy Constructor
StudentList(const StudentList& list);
//Add Student Method
void addStudentList(Student);

private:
// Node struct to hold Student data and with pointers to a previous and next node in linked list
struct Node {
Student student;
Node* prev;
Node* next;
};

}; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-02T18:20:22.570

`Head`应该是会员。您创建的指针`Head`具有自动存储功能。当构造函数完成时，它会超出范围，并且您会得到一个悬空引用。

```
class StudentList{

public:
//Default Constructor
  StudentList();
//Copy Constructor
  StudentList(const StudentList& list);
//Add Student Method
  void addStudentList(Student);

private:
// Node struct to hold Student data and with pointers to a previous and next node in linked list
  struct Node {
    Student student;
    Node* prev;
    Node* next;
  };

  Node* Head;

};

StudentList::StudentList ()
{
  Head = new Node;        
  Head->next = NULL;      // Sets pointer to NULL by default
} 
```

附带说明一下，您应该缩进放在花括号之间的代码。它使人类读者更容易将相关元素组合在一起，从而发现代码块。

至于复制 c'tor，如您所见，它采用对现有对象的引用，并从中构造一个新对象。编译器提供的默认复制 c'tor 执行浅复制。含义是`a`和`b`是列表，比`a.Head`和`b.Head`指向相同的起始元素。您可以使用以下内容覆盖它以进行深层复制：

```
StudentList::StudentList(const StudentList& list)
{
  Node* Head = new Node;
  Node* tmp = Head;
  Node* iter = list.Head;
  while (iter)
  {
    *tmp = *iter;
    tmp->next = NULL;
    if (iter->next)
      tmp->next = new Node;
    tmp = tmp->next;
    iter = iter->next;
  }
} 
```

我当然忽略了`tmp->prev`，但这是符号链表的一般想法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-02T18:20:51.727

这里

```
StudentList::StudentList ()
{
// Create the dummy head node
Node* Head;             // Creates Head Node
Head = new Node;        
Head->next = NULL;      // Sets pointer to NULL by default
} 
```

正在构造 ctor 中的局部变量，该变量在构造 StudentList 后不再存在。您需要将其移出以`Head`使其成为类成员，即在头文件中声明它

```
class StudentList {
..
Node* Head;
}; 
```

所以你的构造函数看起来像

```
StudentList::StudentList ()
{
// Create the dummy head node
Head = new Node;        
Head->next = NULL;      // Sets pointer to NULL by default
} 
```

# javascript - 确定文件何时被拖出窗口 - Safari 6 OS X

> ID：14664936
> 
> 赞同：6
> 
> 时间：2013-02-02T18:16:13.297
> 
> 标签：javascript, html, safari, osx-mountain-lion

我目前能够确定用户何时将文件拖出所有其他浏览器的浏览器窗口，除了 OS X 上的 Safari。所有其他浏览器似乎都在 dragleave 事件中提供了一些提示。例如，在 Chrome 中，event.clientX 和 event.clientY 设置为 0。在 Firefox 中，event.relatedTarget 为空。但是，在 OS X 上的 Safari 中似乎不存在这样的线索。有谁知道我如何确定用户何时将文件拖出浏览器窗口（在将文件拖入窗口后）？

# ruby - Ruby-require 抛出错误

> ID：14664940
> 
> 赞同：0
> 
> 时间：2013-02-02T18:16:39.863
> 
> 标签：ruby, rubygems

我正在尝试加载 ruby​​write 并运行其中一个示例，但这给我带来了以下错误：-

```
/usr/local/lib/site_ruby/1.9.1/rubygems/custom_require.rb:36:in `require': cannot load such file -- rubywrite/exceptions (LoadError)
    from /usr/local/lib/site_ruby/1.9.1/rubygems/custom_require.rb:36:in `require'
    from /home/ankit/Downloads/Studies/PLI/Assignment2/RubyWrite/lib/rubywrite.rb:1:in `<top (required)>'
    from pcc.rb:4:in `require_relative'
    from pcc.rb:4:in `<main>' 
```

我不确定需要做什么。我的 Ruby 版本是：

`- ruby 1.9.3p194 (2012-04-20 revision 35410) [x86_64-linux]`

我的宝石环境是：-

```
RubyGems Environment:
  - RUBYGEMS VERSION: 1.8.25
  - RUBY VERSION: 1.9.3 (2012-04-20 patchlevel 194) [x86_64-linux]
  - INSTALLATION DIRECTORY: /usr/lib/ruby/gems/1.9.1
  - RUBY EXECUTABLE: /usr/bin/ruby1.9.1
  - EXECUTABLE DIRECTORY: /usr/bin
  - RUBYGEMS PLATFORMS:
    - ruby
    - x86_64-linux
  - GEM PATHS:
     - /usr/lib/ruby/gems/1.9.1
     - /home/ankit/.gem/ruby/1.9.1
  - GEM CONFIGURATION:
     - :update_sources => true
     - :verbose => true
     - :benchmark => false
     - :backtrace => false
     - :bulk_threshold => 1000
  - REMOTE SOURCES:
     - http://rubygems.org/ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-02T18:24:37.097

默认情况下，当前目录不包含在库包含路径中。

`-I`您可以使用以下选项在 Ruby 命令行上显式添加它：

```
ruby -I. the_file.rb 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-02T21:52:19.567

使用“require_relative”并指定要包含的文件的完整路径。问题是'require' 只查看Ruby 库路径中的文件。另请参阅：[Ruby 中的 require_relative 和 require 有什么区别？](https://stackoverflow.com/questions/3672586/what-is-require-relative-in-ruby)

# c++ - 并发无锁单链表 C++：并发会影响接口吗？迭代器还有意义吗？

> ID：14664947
> 
> 赞同：1
> 
> 时间：2013-02-02T18:17:10.863
> 
> 标签：c++, list, concurrency, stl, containers

我即将在 C++ 上实现一个并发链接（单独）列表，并想与以前可能遇到类似挑战的人澄清一些观点。背景：最初该列表计划成为跳跃列表的一部分，而跳跃列表又是内存索引的一部分。当我开始实现这个时，我会想为什么不创建一个通用解决方案（以类似 stl 的方式），它可以在跳过列表之外使用。但似乎并发容器的工作方式可能与单线程容器有很大不同。例如，插入和删除操作将迭代器作为 std::list 中的输入参数，但在并发实现的情况下，如果另一个线程修改其附近的列表，则迭代器将变得无效。

如果列表是跳过列表的“层”，这不是问题，因为在这种情况下它是排序的，并且可以避免迭代器。但是我很好奇是否有人尝试实施通用解决方案来解决问题。

另一个问题.. 让这样的容器与 stl 算法兼容是否值得？似乎它们中的大多数可能由于并发而失败。

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T20:17:12.060

创建实现接口的并发链表容器非常容易`std::list`，并且完全兼容stl算法。您只需为每个操作锁定整个事物。当然，这不是无锁的，这不是你想要的。

关键是并发性并不会天生就无法`std::list`实现——让它变得困难的是特定的实现细节，而您的无锁标准可能会让这变得困难。`std::list`只有在有意义的情况下，您才应该完全做到这一点；因为这个接口特别要求所有迭代器在列表的整个修改过程中都必须保持有效，所以这里的事情可能会有点麻烦。我不知道你用什么无锁算法来实现这个，所以我不能评论。

只要满足迭代器保证，即使容器没有实现`std::list`，容器也将与 stl 算法兼容，所以听起来你的问题是确保满足这些迭代器*保证*。

# html - Twitter Bootstrap 按钮下拉菜单在 IE9 中不起作用

> ID：14664948
> 
> 赞同：4
> 
> 时间：2013-02-02T18:17:13.320
> 
> 标签：html, css, button, drop-down-menu, twitter-bootstrap

**更新：**好的，我找到了原因。按钮所在的灰色区域是导航的 div。它具有固定位置和高 z-index 以使其浮动在其他元素之上。这就是造成问题的原因。如果我删除父 DIV 的 z-index，它工作正常。但我不能这样做，因为其他元素将与固定导航 div 重叠。

**它应该是什么样子（FIREFOX）**

![它应该是什么样子（FIREFOX）](../Images/77670a88aefa8c81a09bba6223321de5.png)

**在 IE 中是如何呈现的（9）**

![在 IE 中是如何呈现的（9）](../Images/784eef071e2f43675dbcb06225b99e0f.png)

完整代码：

```
<div class="btn-group pull-right">
    <a class="btn btn-primary btn-large dropdown-toggle" style="font-weight: bold; margin-top:15px" data-toggle="dropdown">
    Hi @User.Identity.Name!
    <span class="caret"></span>
    </a>
    <ul class="dropdown-menu">
        <li><a href="@Url.Action("Index","Lab")">Open the Lab</a></li>
        <li class="divider"></li>
        <li><a href="/Account/LogOff">Log-out</a></li>
    </ul>
</div> 
```

任何人有任何想法或解决方法/覆盖我需要放入 CSS 来解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-12T05:08:32.620

我在 bootstrap 3 中遇到了同样的问题。从 .navbar 类中删除 filter 属性对我有用。

```
.navbar {
  /*filter: progid:DXImageTransform.Microsoft.gradient(startColorstr='#ffffffff', endColorstr='#fff8f8f8', GradientType=0);*/
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-02T18:33:14.450

```
.dropdown-menu{
z-index:99;
} 
```

应该做的伎俩...虽然取决于 IE 的版本有一些警告。

# extjs - Ext JS 4：无法看到组合框的动态数据

> ID：14664959
> 
> 赞同：0
> 
> 时间：2013-02-02T18:18:23.623
> 
> 标签：extjs

我正在尝试在网格内呈现可编辑的组合。下面是我的代码片段

```
columns: [
         {
             text     : 'Account Name',
             name      : 'accountName', 
             width     : 80,    
             flex     : 4,                                      
             sortable : true,
             dataIndex: 'accountName'
          },
          {
             text     : 'Account Number',
                 name      : 'accountNumber',
             flex     : 2,                                        
             sortable : false,                               
             dataIndex: 'accountNumber',
             editor      : {'combobox',
                     typeAhead       : true,
                     selectOnTab     : true,
                     lazyRender      : true,
                     triggerAction   : 'all',
                     listClass       : 'x-combo-list-small',
                      queryMode       : 'local',
                      store           : emptyStore,

            },                                              

                    displayField    : 'acctNumber',
                    valueField      : 'acctNumber',
                    listeners: {
                            afterrender: function(comboField, eOpts)
                             {
                                // have to add two sub accounts - 1\. account number of column 2.account number of column + "1" 
                               // first try with hard coded values
          var employeesStore = new Ext.data.ArrayStore({

          fields:['acctNumber'],
          data:[{acctNumber: '123456'},{acctNumber: '23456'}]
          })

         comboField.bindStore(employeesStore);
            }  
           }

         }

      }, 
```

但是，当我跑步时，我得到了两个空行的下拉菜单

有人能帮我吗？

谢谢塔拉汉

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T18:54:32.910

这样做的原因是因为列上的 dataIndex 没有映射到绑定到网格的存储中的任何字段。如果更改`dataIndex: 'accountNumber'`为`dataIndex: 'acctNumber'`，您将看到数据。此外，您在商店中没有绑定到网格的“accountName”字段，因此在您将字段（和相应的数据）添加到商店之前，您不会看到任何数据。

# model-view-controller - Backbone.js 视图

> ID：14664962
> 
> 赞同：0
> 
> 时间：2013-02-02T18:18:58.183
> 
> 标签：model-view-controller, backbone.js, view

可以说我正在创建一种社交网络。一方面，您可以搜索显示个人资料列表的人员；另一方面，您可以单击“我的朋友”按钮，该按钮也会显示个人资料列表。因此，在这两种情况下，您都会获得一个配置文件列表，但略有不同，例如，您在 srcnd 列表中没有“交朋友”按钮或每个列表项中没有任何其他差异。

我的问题是：在这种情况下，我是否应该为两个列表创建一个视图，例如“listOfProfiles”？如果是，我该如何处理这些问题或我想在两者之一中显示的任何其他内容？如果不是，为什么？

我知道这是一个普遍的问题。只是我一般是主干或 MVC 的新手，我想了解这个概念。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T19:48:12.057

Backbone.js 的优点之一是模型实例可以同时存在于多个集合中，因此，当一个模型在 1 个集合中更新时，同一个实例在另一个集合中更新，触发两个集合的事件和两种型号。

这意味着您应该并且可以在您的应用程序范围内创建一个“全局”UsersCollection，您可以将所有用户实例推送到其中。

```
var UserCollection = Backbone.Collection.extend({});
var userCollection = new UserCollection();
    userCollection.update([models], {remove: false}); 
```

下次初始化第二个 UserCollection 时，可以在“parse”方法上添加一个方法来获取或获取全局 usersCollection 中的模型实例，这样就不会两次实例化具有相同 id 的模型。

我会将这些集合彼此分开，因为每个集合可能都有一个不同的比较器附加到它上面。想象一个按字母顺序列出的用户（朋友）视图和一个按另一种状态列出的用户列表。

在多个集合中使用模型的单个实例的强大功能，尝试通过全局集合保持模型同步。那将是我前进的方向。

# php - 如何在课堂上保存最后一个ID？

> ID：14664964
> 
> 赞同：1
> 
> 时间：2013-02-02T18:19:08.537
> 
> 标签：php, pdo, lastinsertid

有一种方法可以将 $id 保存在类中，以便下次运行该函数时可以使用它？

到目前为止，在执行查询后，我在函数内部得到了正确的 $id，但是当我重新运行函数时，我再次得到一个未初始化的 $id。

```
class ShortURL {
    public $id;
    public $val2;

    function insert() {

        $conn = new PDO( DB_DSN, DB_USER, DB_PASS );
        $sql = "INSERT INTO art ( val1, val2 ) VALUES ( :val1, :val2 )";
        $st = $conn->prepare( $sql );
        $st->bindValue( ":val1", self::hash ( $this->id+1 ), PDO::PARAM_STR );
        $st->bindValue( ":val2", $this->val2, PDO::PARAM_STR );     
        $st->execute();
        $this->id = $conn->lastInsertId();
        $conn = null;
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T20:10:49.840

如果在执行函数之前创建类的新实例，则变量将被重置。因此，当您执行以下操作时：

```
$insert = new ShortURL();
$insert->insert();
echo $insert->id;
//You should see your value correctly
$insert = new ShortURL();
echo $insert->id;
//Now that you initialized the function again, the value is cleared 
```

尝试创建您的类，然后重用该类的相同实例。

# c# - BitmapImage 的延迟加载

> ID：14664967
> 
> 赞同：1
> 
> 时间：2013-02-02T18:19:28.520
> 
> 标签：c#, .net, windows-phone-8, windows-phone, bitmapimage

我试图在 Windows Phone 8 的 ListBox 中加载 BitmapImages 并看到奇怪的行为。第一次显示页面时，ListBox 显示为空，但如果我返回，则返回图像加载的页面。对我来说，似乎没有在需要时加载图像。这是我正在使用的代码（通过转换器）：

```
 BitmapImage img = null;
        StreamResourceInfo res = Application.GetResourceStream(new Uri("/MyAssembly;component/Resource/images/myimage.png", UriKind.Relative));
        Stream s = res.Stream;
        using (s) {
            img= new BitmapImage();
            img.SetSource(s);
        }
        img.CreateOptions = BitmapCreateOptions.None; 
```

我试过尝试创建选项无济于事。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-02T20:27:51.117

听起来可能是在设置源后视图没有刷新。您加载一个空列表框。然后加载所有图像。什么都没有显示！但是当你回到页面时，神奇！它们都在那里，因为整个视图都被重绘了（现在有了图像源）。如果您在返回之前终止应用程序，您应该会再次看到一个空列表框，因为必须重置源。我不确定这在 Windows 8 中是如何工作的，但你应该能够调用 listbox.RefreshView() 之类的东西来强制它重新绘制自己。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-03T10:47:22.400

我实际上需要调用`RaisePropertyChanged`ViewModel 中的属性来强制更新，[如此处所述，](https://stackoverflow.com/questions/5280624/binding-to-observablecollection-with-mvvm-light)但您的回答为我指明了正确的方向。谢谢@teabaggs。

奇怪的是，当我将 Pivot 控件作为根元素时，这很有效，但切换到全景图一定会改变事件顺序。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-07-16T07:44:22.220

使用这个：img.CreateOptions = BitmapCreateOptions.BackGround;

`private void BitmapImage_ImageFailed(object sender, ExceptionRoutedEventArgs e) { BitmapImage img = new BitmapImage(); img.UriSource = new Uri("Your local Image", UriKind.Relative); }` 并在您的本地图像中分配 。无论如何，渲染图像需要时间，这是我迄今为止发现的最好和最快的方法

# javascript - 是否有使用 Backbone 模型的图形库？

> ID：14664970
> 
> 赞同：1
> 
> 时间：2013-02-02T18:19:35.390
> 
> 标签：javascript, backbone.js, graph, state-machine

我一直在做一个项目，我希望有一系列事件。事件流是一种有限状态机，只是状态和转换最初是未知的。例如：

```
Event A --[ do nothing ]--> Event B --[ do nothing ]--> Event D
    \                          ^                         ^
     \                [do something else]               /
      \                        |                       /
       \--[do something]--> Event C --[time  passes]--/ 
```

我一直将此作为学习的机会`Backbone.js`（除其他外），我想知道**是否有使用 Backbone 模型的图形库？**

我看过`Workflow.js`，但似乎它适用于最初知道图形的情况。

# jquery - 在 css 文件/JQuery 最佳实践中包含所有类名的任何原因

> ID：14664971
> 
> 赞同：0
> 
> 时间：2013-02-02T18:19:41.963
> 
> 标签：jquery, css, razor

我是 JQuery 的新手，正在编写一堆选择器，这些选择器可以在会话列表中打开和关闭会议会话。例如，我有三种类型的会话，并且我已将一个类名与这三种类型相关联。我生成的 html 看起来有点像：

```
<ul>
  <li class="technicalClass sessionTitle">my tech class1</li>
  <li class="technicalClass sessionTitle">my tech class2</li>
  <li class="businessClass sessionTitle"> my bus class1</li>
</ul> 
```

我有什么理由需要将 TechnicalClass 和 businessClass 放在我真正的 CSS 文件中吗？我不打算做任何事情，而是选择它。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-02T18:23:00.423

如果我理解您的问题是正确的，那么您是在询问您添加到 DOM 以进行 javascript-jQuery 操作的类。

不，您不需要将它们添加到 CSS 文件中，这样做没有任何好处。

R# 出于某种原因标记了您添加到 DOM 的类，如果它们在 CSS 文件中没有定义，它可能会很有帮助和烦人，如果它困扰您，您可以将其关闭。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-02T18:24:19.227

我在我的应用程序中一直使用 CSS 类作为 JQuery 标记，而没有在 CSS 文件中定义它们。这样做完全没有问题；这是使用 JQuery 完成某些任务的一种非常常见的方式。HTML 和 CSS 在这种情况下非常灵活；它们不像 JavaScript，如果未定义成员，则会引发错误。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-02T18:24:40.780

你真的不需要所有的课程。你可以做：

```
<ul id="sessionTitle">
  <li class="technicalClass">my tech class1</li>
  <li class="technicalClass">my tech class2</li>
  <li class="businessClass"> my bus class1</li>
</ul> 
```

甚至更好：

```
<ul id="sessionTitle">
  <li>my tech class1</li>
  <li>my tech class2</li>
  <li>my bus class1</li>
</ul> 
```

并通过 jQuery 访问它

```
$('#sessionTitle li') 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-02T18:22:22.477

如果没有办法单独选择技术类或业务类，那么您应该只在 .sessionTitle 属性上选择它们。

# macos - 在 Excel for Mac 中读取有多少单元格具有某种颜色

> ID：14664975
> 
> 赞同：0
> 
> 时间：2013-02-02T18:20:36.410
> 
> 标签：macos, excel

我在 Excel 应用程序中使用 Office 2011 for Mac，是否有可能以某种方式读取一行中有多少个单元格是红色的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-02T19:32:55.273

这是一个 AppleScript，它返回具有红色填充的单元格的列号和行号。或者您正在寻找 AppleScript 以外的语言？

```
tell application "Microsoft Excel"
    tell active sheet
        set lastColumn to used range's last column's first column index
        set lastRow to used range's last row's first row index

        set redCells to {}
        repeat with columnCounter from 1 to lastColumn
            repeat with rowCounter from 1 to lastRow
                if column columnCounter's row rowCounter's interior object's color is {255, 0, 0} then
                    copy {columnCounter, rowCounter} to end of redCells
                end if
            end repeat
        end repeat

        return redCells
    end tell
end tell 
```

我敢打赌，像这样的单行脚本`tell application "Microsoft Excel" to tell active sheet to return every cell of used range whose interior object's color is {255, 0, 0}`会运行得更快，但我无法弄清楚确切的措辞。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-03T22:18:02.187

这可以使用带有以下代码的 VBA。将它放在一个模块中并从您要检查的工作表中运行它。

```
Sub GetRedCells()
    Dim rCell As Range, rRowRange As Range, iRow As Integer, iInteriorColour As Integer, iFontColour As Integer

    iRow = Application.InputBox("Enter Row Number")

    If iRow > 0 Then
        Set rRowRange = ActiveSheet.Range(ActiveSheet.Cells(iRow, "A"), ActiveSheet.Cells(iRow, ActiveSheet.UsedRange.Columns.Count))

        For Each rCell In rRowRange
            If rCell.Interior.Color = vbRed Then iInteriorColour = iInteriorColour + 1
            If rCell.Font.Color = vbRed Then iFontColour = iFontColour + 1
        Next rCell

        MsgBox "You have " & iInteriorColour & " cell(s) that have a red interior " & vbCr & "and " & iFontColour & " cell(s) with a red font."
    End If
End Sub 
```

# java - Java中的PL/SQL过程调用

> ID：14664981
> 
> 赞同：0
> 
> 时间：2013-02-02T18:20:57.837
> 
> 标签：java, stored-procedures, jdbc, plsql

DB初学者在这里。我有一个名为“mkdir”的程序，它应该模仿 bash 命令：

```
create or replace 
PROCEDURE "MKDIR" 
(
  id_p in number
, name in varchar2  
) as 
begin
  insert into folders(name,id_p) values(name,id_p);
  dbms_output.put_line('Created folder: '||name);

exception
when DUP_VAL_ON_INDEX then
  dbms_output.put_line('Folder with the same name already exists!');
when NO_DATA_FOUND then
  dbms_output.put_line('Parent id not found!');

end mkdir; 
```

这是我的 Java 程序的一部分：

```
String sql = "begin mkdir(var1=>?, " +"var2=>?); end;";

st = conn.prepareCall(sql);
st.setInt(1,1);             
st.setString(2, "hello");

st.execute(); 
```

我试过切换变量的顺序，但它不起作用。我意识到这是一个非常愚蠢的错误，但我无法终生解决它。

```
ORA-06550: line 1, column 7:
PLS-00306: wrong number or types of arguments in call to 'MKDIR'
ORA-06550: line 1, column 7:
PL/SQL: Statement ignored 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T18:23:12.087

它应该是 String sql = "exec mkdir .......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-03T18:06:33.263

问题是这一行：

```
String sql="begin mkdir(var1=>?, " +"var2=>?); end;"; 
```

您的存储过程不采用名为`var1`和的参数`var2`。您收到错误是因为您试图为这些不存在的过程参数提供值。

尝试

```
String sql="begin mkdir(id_p=>?, " +"name=>?); end;"; 
```

反而。

# iphone - 从不同的视图控制器访问来自 NSJSONSerialization 的数据

> ID：14664989
> 
> 赞同：0
> 
> 时间：2013-02-02T18:22:20.143
> 
> 标签：iphone, ios, json, uiviewcontroller, nsmutablearray

我又回来了，这将是我今天的第二个问题。

无论如何，我正在使用`NSJSONSerialization`从我的网站解析数据。数据是数组格式，所以我使用`NSMutableArray`. 问题是，我无法访问存储在`NSMutableArray`不同视图控制器中的数据。

第一视图.h

```
#import <UIKit/UIKit.h>

@interface FirstViewController : UIViewController

@property (nonatomic, strong) NSMutableArray *firstViewControllerArray;

@end 
```

第一视图.m

```
- (void)ViewDidLoad
{
    [super viewDidLoad];

    NSURL *url = [NSURL URLWithString:@"http://j4hm.t15.org/ios/jsonnews.php"];
    NSMutableURLRequest *request = [NSMutableURLRequest requestWithURL:url];
    NSOperationQueue *queue = [[NSOperationQueue alloc]init];

    [NSURLConnection sendAsynchronousRequest:request queue:queue completionHandler:^(NSURLResponse *response, NSData *data, NSError *error) {
            self.firstViewControllerArray = [NSJSONSerialization JSONObjectWithData:data options:0 error:&error];
    }];

    [self loadArray];
}

- (void)loadArray
{
    NSMutableArray *array = [NSMutableArray arrayWithArray:[self firstViewControllerArray]];

    //I also tried codes below, but it still won't work.
    //[[NSMutableArray alloc] initWithArray:[self firstViewControllerArray]];
    //[NSMutableArray arrayWithArray:[self.firstViewControllerArray mutableCopy]];

    NSLog(@"First: %@",array);

    SecondViewController *secondViewController = [[SecondViewController alloc] init];
    [secondViewController setSecondViewControllerArray:array];
    [[self navigationController] pushViewController:secondViewController animated:YES];
} 
```

第二个.h

```
#import <UIKit/UIKit.h>

@interface SecondViewController : UIViewController

@property (nonatomic, strong) NSMutableArray *secondViewControllerArray;

@end 
```

秒.m

```
- (void)viewDidLoad
{
    [super viewDidLoad];

    NSLog(@"Second: %@", [self secondViewControllerArray]);
} 
```

**输出**

将`NSLog(@"First: %@",array);`输出数组，因此它不会向 SecondViewController 传递`(null)`数组的值。

但是，`NSLog(@"Second: %@", [self secondViewControllerArray]);`将输出`(null)`. 我错过了什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-02T18:30:47.323

在您将新视图控制器推送到堆栈上之前，我不相信您的下载已完成，并且还设置了该视图控制器的数组属性。现在，您在告诉 NSURLConnection 异步下载数据后立即调用 -loadArray。此下载将在您尝试访问数组属性很久之后完成。

尝试将调用移动到异步完成块中的 -loadArray（如下所示）。由于下载完成时会调用此块，因此您应该在推送第二个视图控制器时获得数据。

```
[NSURLConnection sendAsynchronousRequest:request queue:queue completionHandler:^(NSURLResponse *response, NSData *data, NSError *error) {
        self.firstViewControllerArray = [NSJSONSerialization JSONObjectWithData:data options:0 error:&error];

        dispatch_async(dispatch_get_main_queue(), ^{

            [self loadArray];

        });
}]; 
```