# StackOverflow 问答 13552000-13552999

# android - GLU.gluOrtho2D 翻转我的纹理

> ID：13552005
> 
> 赞同：1
> 
> 时间：2012-11-25T14:36:45.757
> 
> 标签：android, opengl-es

由于堆栈溢出，我非常接近解决我一直遇到的许多问题。这个周末我又买了一份。

我有一个名为 GameObject2D 的对象，它基本上是一个带有一些纹理的正方形。以 3D 投影此对象时，一切正常。我使用一种名为 prepare3Ddrawing 的方法来执行此操作。然后我想做二维绘图，所以我有一个我正在使用一种方法来为二维绘图准备投影矩阵。我已经尝试了两种不同版本的 prepare2Ddrawing 并且无法缝合以使其正常工作。首先是我的 3d 准备...

```
private void prepare3Ddrawing(GL10 gl)
    {   
        gl.glLoadIdentity();
        gl.glViewport(0, 0, getWidth(), getHeight());
        gl.glDisable(GL10.GL_DITHER);
        gl.glEnable(GL10.GL_DEPTH_TEST);
        gl.glMatrixMode(GL10.GL_PROJECTION);
        gl.glLoadIdentity();
        GLU.gluPerspective(gl, 45.0f, (float)getWidth()/(float)getHeight(),0.1f,100.0f);    
    } 
```

这是我的 2D 版本，它把原点放在左下角而不是左上角......

```
private void prepare2Ddrawing(GL10 gl)
    {   
        gl.glDisable(GL10.GL_DEPTH_TEST);
        gl.glLoadIdentity();
        gl.glMatrixMode(GL10.GL_PROJECTION);
        gl.glLoadIdentity();
        GLU.gluOrtho2D(gl,0,getWidth(), 0, getHeight());
        gl.glMatrixMode(GL10.GL_MODELVIEW);
        gl.glLoadIdentity();
    } 
```

我相信我需要正确的 GLU.gluOrtho2D(gl...) 组合才能获得正确的结果。有任何想法吗？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T07:06:17.043

GLU.gluOrtho2D(gl,0,getWidth(), 0, getHeight()) 具有参数 left、right、bottom、top。如果您想要“类似屏幕”的坐标，您需要将顶部设置为“0.0”，底部设置为“getHeight()”。此方法基本上用于设置您的坐标系。例如，如果您需要绘制一些图形，您希望 (0,0) 在中心，如果 (-1,0) 和顶部是 (0,1) 则在左侧，因此参数将是 (-1, 1,- 1, 1) 但是如果你想拥有像最常见的屏幕坐标系一样的东西，你会希望在左上角有 (0,0)，在右下角有 (width, height) (0, width, height, 0) . 或者为了简单起见：只需在视图的左上角和右下角插入所需的坐标。

# java - 无法将 java 类的对象放在另一个类中

> ID：13552009
> 
> 赞同：2
> 
> 时间：2012-11-25T14:37:12.850
> 
> 标签：java

我在一个包中有两个 java 类。我想将一个类的对象创建到另一个类中，但它给出了错误消息 ERROR：找不到符号。

```
package pckg;
public class aa{
   private String name;
   public aa(){} //Constructor of aa class
   public void setName(String name){this.name=name;}
   public String getName(){return name;}
}

package pckg;
public class bb{
   aa obj = new aa(); //This line gives error message

   public bb(){} //Constructor of bb class

} 
```

这两个类都在同一个文件夹 pckg 中。

错误信息：

```
D:\Java\mypack>cd..

D:\Java>cd pckg

D:\Java\pckg>set path=d:\java\jdk1.5\bin

D:\Java\pckg>javac aa.java

D:\Java\pckg>javac bb.java
bb.java:3: cannot find symbol
symbol  : class aa
location: class pckg.bb
aa obj = new aa(); //This line gives error message
^
bb.java:3: cannot find symbol
symbol  : class aa 
location: class pckg.bb
aa obj = new aa(); //This line gives error message
            ^
2 errors 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T14:39:03.403

您的代码没有问题，可能与您的包中的其他一些类存在名称冲突。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-25T15:00:25.210

```
D:\Java\ > javac -classpath . pckg\aa.java
D:\Java\ > javac -classpath . pckg\bb.java 
```

如果不指定类路径，javac 不知道在哪里可以找到已编译的类。

此外，Java 中的类应以大写字母开头。而且我会避免对源文件和类文件使用相同的目录。您最好将源代码放在 d:\Java\src 中，将类放在 D:\Java 类中。然后，使用以下命令一次编译所有内容：

```
D:\Java\ >javac -cp classes -d classes src\pckg\*.java 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-25T15:03:47.017

尝试

`javac -cp . *.java`

假设您在“pckg”目录中。

我想@JB Nizet 已经回答了。

# objective-c - Objective C 的自定义单元格

> ID：13552015
> 
> 赞同：-1
> 
> 时间：2012-11-25T14:37:34.447
> 
> 标签：objective-c, storyboard, cells

我是使用 Objective C 编码的新手。最初我将一串数据引入到我的 tableView 中，并且我在逐行分隔所有内容方面遇到了非常艰难的时期。所以我只需要一些指导来判断我是否朝着正确的方向前进。我决定制作一个包含多个视图的自定义单元格。因此，如果我将每条数据分别输入到每个视图中，是否可以使每一行相互对齐？我是否需要在每个视图中添加其他内容，即标签？另外我应该如何从逻辑上考虑这段代码？我不确定如何将数据发送到每个单独的视图？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-25T14:43:36.670

由于您是 Obj-C 编码的新手，请浏览此[示例应用程序](http://dl.dropbox.com/u/58723521/XMLParse.zip)。

此示例代码演示了从服务器获取 xml 格式的数据、解析 xml 响应并显示在表格中，它还使用自定义单元格显示解析的数据。

# open-source - 如何通过本地更改将 OSS 升级到新版本？

> ID：13552024
> 
> 赞同：1
> 
> 时间：2012-11-25T14:38:08.190
> 
> 标签：open-source, merge, orchardcms

我正在做一个使用[Orchard CMS](http://orchardproject.net/)的项目。

我们为 CMS 制作了一些我们自己的模块和主题，并且还必须在 Orchard 源代码中进行一些代码更改。这当然不是一个很好的做法，因为这些更改会在升级 CMS 或类似的东西时消失。但是，当时进行这些更改是不可避免的，因为默认功能无法按照我们客户的要求运行。

现在，所有这些更改都是在旧版本 1.5.1 上进行的，现在我们需要继续使用新版本（目前为 1.6）。通过这样做，我们将丢失我们对 Orchard 资源所做的所有更改。

我已经将我们对默认源所做的所有更改捆绑在 1 个变更集中，因此将它们合并到新版本的 CMS 中变得更容易一些。但是，在我看来，这并不是一个非常好的工作流程。

我们可以选择 fork 项目并在 fork 中进行更改，但是在升级时我们会遇到同样的困难，因为我们在升级 fork 时仍然需要合并所有更改。创建拉取请求也不是一个真正的选项，因为更改可能不会在主存储库中进行，或者并非所有用户都会喜欢这些更改。

我们可以在这个项目中使用其他一些常见的做法吗？

**注意：**目前我正在为我正在处理的项目提出这个问题，但我想知道一般情况下如何使用 OSS 项目，您需要更改项目的源并仍然想获得最新版本偶尔。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-25T16:59:19.367

只要您克隆了 Orchard 存储库，您就可以随时从中提取更改。您可能必须使用比较工具解决一些冲突，在该工具中，您更改了一个文件，该文件在您最近一次合并后在果园存储库中也发生了更改。虽然它相对无痛。

我在 bitbucket 上保留了我的 repo 的副本，并在他们发布新版本时从 orchard repo 中提取。通常我需要解决解决方案文件的冲突，以及这里和那里的一些事情。一旦解决了这些冲突，您就无需在每次更新时再次处理它们。这只会发生在您和 Orchard 都在更改文件的情况下。（如解决方案文件）

# objective-c - 使用自定义字体计算 NSString 的高度

> ID：13552027
> 
> 赞同：5
> 
> 时间：2012-11-25T14:38:19.530
> 
> 标签：objective-c, ios

我正在尝试解决这个问题一个星期，并且我已经测试了我脑海中的很多想法，但我无法正确计算`NSString`自定义字体的大小。

我有`UITextView`一个包含文本和一个`UIView`在其上绘制行号的`UITextView`. 问题是`NSString` `UIKit`Additions 在计算`NSString`.

在图片中，您可以在第 7 行清楚地看到，这是在渲染时带有换行符的行`UITextView`，之后所有行都受到影响。

![模拟器截图](../Images/a9bb63c20053b902584be1b20609e4c9.png)

我使用的字体是[Adob​​e Source Code Pro](https://github.com/adobe/source-code-pro)。

我已经尝试了`NSString` `UIKit`Additions 中的所有方法，但均未成功。

```
sizeWithFont

sizeWithFont:forWidth:lineBreakMode:

sizeWithFont:minFontSize:actualFontSize:forWidth:lineBreakMode: 
```

我还尝试用四个空格替换字符串中的所有制表符，它有帮助，但它仍然不能一直工作。对于某些行，它有帮助，但对于某些行则没有。

任何建议如何`NSString`正确计算高度？`CoreText`也许？

一张小纸条。我也尝试通过使用来自`UITextInput`协议的几何命中测试方法来解决这个问题，当它们工作时，模拟器上的 cpu 负载是 100%，所以在真实设备上它会杀死应用程序，特别是如果我加载大约 1500+ 的文件代码行。

这是我用于[LineNumbersView.m](https://gist.github.com/22259bce9ceea480335e)的代码要点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T21:42:02.170

假设`UITextView`和 Core Text 总是完全一致，那么后者绝对是一个解决方案，尽管对于这个问题并不是非常简单。

你：

1.  在主视图中创建文本的属性字符串，并在整个范围内设置适当的字体；
2.  为属性字符串创建一个合适的框架设置器（使用[`CTFramesetterCreateWithAttributedString`](https://developer.apple.com/library/mac/documentation/Carbon/Reference/CTFramesetterRef/Reference/reference.html#//apple_ref/c/func/CTFramesetterCreateWithAttributedString)）；
3.  创建一个`CGPath`描述字符串将被绘制到的绘图区域（作为 a`UIBezierPath`然后获取[CGPath](http://developer.apple.com/library/ios/documentation/uikit/reference/UIBezierPath_class/Reference/Reference.html#//apple_ref/occ/instp/UIBezierPath/CGPath)属性或通过创建一个并使用[`CGPathAddRect`](https://developer.apple.com/library/mac/documentation/graphicsimaging/Reference/CGPath/Reference/reference.html#//apple_ref/c/func/CGPathAddRect)）；
4.  因此，从 framesetter 加上路径加上您感兴趣的字符串的子范围创建一个框架，这可能就是全部（参见 参考资料[`CTFramesetterCreateFrame`](https://developer.apple.com/library/mac/documentation/Carbon/Reference/CTFramesetterRef/Reference/reference.html#//apple_ref/c/func/CTFramesetterCreateFrame)）；
5.  然后，您可以从框架中获取`CFArray`它将输出的单个行（使用[`CTFrameGetLines`](https://developer.apple.com/library/mac/documentation/Carbon/Reference/CTFrameRef/Reference/reference.html#//apple_ref/c/func/CTFrameGetLines)），尽管这些是屏幕上的排版行而不是您的源代码行；
6.  对于每一行，您可以获得它包含的原始字符串的范围（使用[`CTLineGetStringRange`](https://developer.apple.com/library/mac/documentation/Carbon/Reference/CTLineRef/Reference/reference.html#//apple_ref/c/func/CTLineGetStringRange)），允许您确定在原始换行符之后立即开始的字符串，而不是由于自动换行；
7.  您还可以获得一个由`CGPoint`s 组成的 C 数组，其中每个代表屏幕上一行 ( [`CTFrameGetLineOrigins`](https://developer.apple.com/library/mac/documentation/Carbon/Reference/CTFrameRef/Reference/reference.html#//apple_ref/c/func/CTFrameGetLineOrigins)) 的原点；通过使用您在 (6) 中学到的内容来查找位置，您可以获得相关行的屏幕原点。

为了增加乐趣，Core Text 的像素输出在 OS X 和 iOS 上是相同的。但是 OS X 认为屏幕的原始位置是左下角，就像方格纸一样。iOS 将其视为左上角，如英语阅读顺序。粗略的净效果是在 iOS Core Text 上颠倒绘制。所以你需要考虑到这一点。在 iOS 术语中，您显然会看到第一行位于框架的最底部，第二行位于其上方的一行，依此类推。您需要翻转这些坐标。

即使你跳过了这么多圈，它也可能最终只有一百行左右的代码。

# google-app-engine - 谷歌应用引擎收件人邮寄费用

> ID：13552028
> 
> 赞同：0
> 
> 时间：2012-11-25T14:38:35.097
> 
> 标签：google-app-engine

我有一个在应用引擎上运行的应用。现在我没有达到任何免费限制，除了通过电子邮件发送的收件人。我的问题是，我可以支付只增加 1 个限制吗？我阅读了谷歌提供的有关定价的信息，但我找不到我的具体问题的答案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-25T14:59:54.870

不，但你为什么想要那个？即使您启用计费，您仍然拥有所有免费配额。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-25T14:54:50.417

你不能。但是您可以使用其他服务来发送邮件，例如 Amazon SES。我是应用引擎的忠实粉丝。邮件服务除外，因为它会为您提供有关邮件传递的反馈。看到这个问题。 [http://code.google.com/p/googleappengine/issues/detail?id=1800](http://code.google.com/p/googleappengine/issues/detail?id=1800) 我在这个问题上添加了一些代码，以使用 SES。

# objective-c - 如何阻止objective-c中的特定URL？

> ID：13552029
> 
> 赞同：6
> 
> 时间：2012-11-25T14:38:36.470
> 
> 标签：objective-c, macos, url, block

我一直在网上搜索一种方法来阻止对 OS X 的 Objective-c 中特定 URL 地址的访问，但我只遇到了更改主机文件的方法。这不是一个很好的解决方案，因为我的应用程序需要定期更改被阻止的网站，并且每次应用程序更改文件时主机方法都需要管理员密码。

那么除了使用主机文件之外，还有人知道阻止特定 URL 的方法吗？

提前谢谢你，拉斯穆斯。

# mysql - 加入 2 个 mysql 表并按 1 个表中的相同行数排序

> ID：13552030
> 
> 赞同：3
> 
> 时间：2012-11-25T14:38:46.530
> 
> 标签：mysql, sql, join

我需要一些有关 mysql 查询的帮助。

我有2张桌子，

## 表 1 - 照片（photo_id、photo_url）

1----- www.someurl.com
2----- www.someurl.com
3----- www.someurl.com
4----- www.someurl.com

## 表 2 - 收藏夹（favorite_id、user_id、photo_id）

1--------5--------1
2--------5-----2
3--------6--------1
4- ------6--------3
5--------7-----2
6--------7------3
7--- --8--------3
7--------8-----4

我想从最喜欢的用户数量的照片表中获得结果。

正确的顺序必须是：

1) Photo-3 (3 票)
2) Photo-2 (2 票)
2) Photo-1 (2 票)
2) Photo-4 (1 票)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T14:41:11.267

```
SELECT  a.photo_url, COUNT(b.photo_ID) totalVotes
FROM    table1 a
        LEFT JOIN table2 b
            ON a.photo_ID = b.photo_id
GROUP BY a.photo_url
ORDER BY totalVotes DESC 
```

*   [SQLFiddle 演示](http://sqlfiddle.com/#!2/80411/1)

# c - 我的第一个 Windows 命名管道，不知道出了什么问题

> ID：13552033
> 
> 赞同：0
> 
> 时间：2012-11-25T14:39:15.737
> 
> 标签：c, named-pipes

**编辑：这是整个代码，忽略罗马尼亚语注释。还有 2 或 3 个名字未翻译自罗马尼亚语： http: [//pastebin.com/JjtayvXX](http://pastebin.com/JjtayvXX)**

我正在尝试学习操作系统的基础知识，现在我正在使用 Windows 下的命名管道，但我不知道出了什么问题。

老实说，我正在研究一个朋友做过的例子，但他和我一样糟糕，如果不是更糟的话。虽然 hi 的程序有效（尽管它做了其他事情），但他无法解释任何事情，很可能只是从某个地方复制的，仍然......不重要，我想说的是我从示例中学习，而不是专业的.

服务器从客户端接收消息，返回最大和最小数字。

服务器.c：

```
#include "windows.h"
#include "stdio.h"

struct Msg {
int numbers[20];
int length;
};

...

int main () {

HANDLE inputPipe, outputPipe; 
Msg msg;

while (true) {

inputPipe = CreateNamedPipe ("\\\\.\\pipe\\Client2Server",
                 PIPE_ACCESS_INBOUND,
                 PIPE_TYPE_BYTE | PIPE_READMODE_BYTE | PIPE_WAIT, 
                 PIPE_UNLIMITED_INSTANCES,
                 0, //Numb of output bytes
                 sizeof(Msg),  // Numb of input bytes
                 0, // Wait forever
                 NULL); // Don't know how to use security

ConnectNamedPipe (inputPipe,NULL);

    // Here is where the server dies
    ReadFile (inputPipe, &msg,sizeof(Msg),NULL,NULL); 
```

现在Client.c：

```
struct Msg {
int numbers[20];
int length;
};

int main () {

HANDLE outputPipe, inputPipe;
Msg msg;

    // @misc: read data from keyboard, create msg   

outputPipe = CreateFile ("\\\\.\\pipe\\Client2Server",
            GENERIC_WRITE,
            FILE_SHARE_READ, // * comment after code
            NULL, // again, I know nothing about security attributes
            CREATE_ALWAYS, // either create or overwrite
            0,
            NULL);

// Here is where it dies
WriteFile (outputPipe, &msg, sizeof(Msg), NULL, NULL); 
```

我得到访问冲突写入位置 0x00000000。不知道为什么。

*   我希望这个进程只写，而另一个进程（服务器）只读。`FILE_SHARE_READ`可以吗？

另外我不知道如何处理 CreationDisposition / FlagsAndAttributes （最后 2 个参数`CreateFile`），它们可以吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T15:27:31.953

编辑：添加实际答案，参考其他主题，自己尝试过

`WriteFile()'s`第四个参数（指向将存储字节数的变量的指针）不应为空。根据 API 描述，如果第五个参数 , 不为空，则此参数只能为`lpOverlapped`空。

在此处查看类似主题： [为什么 WriteFile 在写入标准输出时会崩溃？](https://stackoverflow.com/questions/8195608/why-does-writefile-crash-when-writing-to-the-standard-output)

* * *

您可以检查/打印`ReadFile()`(failed if return = `0`or `FALSE`) 和 client.c `CreateFile()`(failed if returns `INVALID_HANDLE_VALUE`) 的返回值，看看它们是否成功？

如果失败，能否`GetLastError()`在调用后立即打印出返回的值，以便我们看到具体的错误？

# linq - 使用 lambda 表达式的相关查询

> ID：13552035
> 
> 赞同：0
> 
> 时间：2012-11-25T14:39:41.500
> 
> 标签：linq, lambda

如何将此 LINQ 查询从查询​​语法转换为方法语法？我正在执行一个共同相关的查询操作。

```
 var query = (from r in objEntities.Employee
              where r.Location == (from q in objEntities.Department 
                                   where q.Location == r.Location 
                                   select q.Location).FirstOrDefault()
              select new
              {
                  FirstName = r.FirstName,
                  LastName = r.LastName,
                  Age = r.Age,
                  Location = r.Location
              });
 GridView1.DataSource = query;
 GridView1.DataBind(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T16:17:30.353

我认为您正在尝试将查询转换为基于方法的查询而不是基于语法的查询。

```
var query = objEntities.Employee
                       .Where(e => e.Location == objEntities.Department
                                                            .Where(d => d.Location == r.Location)
                                                            .Select(d => d.Location)
                                                            .FirstOrDefault())
                       .Select(e => new {
                                            FirstName = e.FirstName,
                                            LastName = e.LastName,
                                            Age = e.Age,
                                            Location = e.Location
                                        }); 
```

我也很确定你在`where`子句中的内在表达可以用类似的东西代替：

```
 .Where(e => objEntities.Department.Any(d => d.Location == e.Location) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-25T16:24:17.010

Nested queries always have performance issue instead you should use join:

In the lambda expression query should be

```
var query = objEntities.Employee.Join(objEntities.Department, E => E.Location,
                                 D => D.Location,
                                (E,D) => new {                                          
                                                FirstName = E.FirstName,
                                                LastName = E.LastName,
                                                Age = E.Age,
                                                Location = E.Location
                                             }); 
```

# f# - F#为二叉搜索树制作ToString方法

> ID：13552039
> 
> 赞同：3
> 
> 时间：2012-11-25T14:39:52.403
> 
> 标签：f#, binary-tree

我目前正在 F# 中构建我的二叉树，我快完成了。我正在完成这项任务的最后一项任务，我应该在其中制作二叉树的字符串表示形式。这意味着树应该像这样呈现：

示例：`("node" "value" ("node" "value" "Empty" "Empty") Empty)`<- 具有根节点的树，该树具有一个左子树，一个节点具有两个空子树和一个空右子树。

我的树看起来像这样：

```
 type Btree<'a when 'a: comparison> = 
 |Node of  'a * Btree<'a> *Btree<'a> 
 |Leaf of 'a 
 |EmptyTree 
```

这是我已经走了多远：

```
let rec treeToString bintree = 
    match bintree with
    |EmptyTree -> "Empty" //Check if the tree is empty
    |Node(inner, left, right) when inner = 0 -> "Empty"
    |Leaf x-> "Node"+x.ToString() //Returns "Node" and its value
    |Node(inner, left, right) when inner <> 0-> treeToString left //Need some kind of output here, but what?
    |Node(inner, left, right) when inner <> 0->treeToString right 
```

我的方法只返回一个值，所以我的解决方案的实际问题是让递归部分正确。

所以我的问题是：我在这里做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-25T14:54:39.037

联合案例`Leaf of 'a`是多余的，因为`Leaf(a)`可以用 建模`Node(a, Empty, Empty)`。类型声明可以简化为：

```
type BinTree<'a when 'a: comparison> = 
    | Empty 
    | Node of 'a * BinTree<'a> * BinTree<'a> 
```

从输出样本`("node" "value" ("node" "value" "Empty" "Empty") Empty)`中，您应该首先显示节点元素的值，然后递归显示左分支和右分支：

```
let rec treeToString bintree = 
    match bintree with
    | Empty -> "Empty"
    | Node(value, left, right) -> 
      sprintf "(Node %O %s %s)" value (treeToString left) (treeToString right) 
```

`ToString()`您可以通过覆盖方法进一步推动这一点

```
type BinTree<'a> with
override x.ToString() = treeToString x 
```

这样该类型就可以使用`sprintf "%O" bintree`等。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-25T14:49:23.483

声明一个函数`rec`只允许函数调用自己——它实际上并没有实现遍历策略（在你的例子中，你的二叉树的遍历）。

您需要实现树的中[序遍历](https://en.wikipedia.org/wiki/Tree_traversal#Inorder)，如下所示：

```
let rec treeToString bintree = 
    match bintree with
    | EmptyTree -> "Empty" //Check if the tree is empty
    | Leaf x -> "Node" + x.ToString() //Returns "Node" and its value
    | Node(inner, left, right) when inner = 0 -> "Empty"
    | Node(inner, left, right) when inner <> 0 ->
        // Traverse the tree recursively
        treeToString left
        treeToString inner
        treeToString right 
```

# iphone - cocos2d-iphone 精灵表加载

> ID：13552040
> 
> 赞同：1
> 
> 时间：2012-11-25T14:39:56.440
> 
> 标签：iphone, ios, cocoa-touch, cocos2d-iphone

我在为我的游戏创建按钮类时遇到问题。我的按钮图像在精灵表中，女巫是我在 Zwoptex 中创建的。问题是程序在加载精灵时崩溃。

这是Buttons.h：

```
#import "CommonProtocols.h"
#import "GameObject.h"

@interface Buttons : CCSprite
{
    CCSprite *buttonSprite;
    ButtonTypes *buttonType;
    CCSpriteBatchNode *buttonsNode;
}
+(id)button;
-(id)initButtonWithType:(ButtonTypes)bType;

@property (readwrite,assign)CCSpriteBatchNode* buttonsNode;
@property (readwrite,assign)CCSprite *buttonSprite;
@property (readonly)ButtonTypes *buttonType;
@end 
```

这是实现：

```
#import "Buttons.h"

@implementation Buttons
@synthesize buttonSprite;
@synthesize buttonsNode;
@synthesize buttonType;
-(void)dealloc
{
    [buttonSprite release];
    [super dealloc];
}
+(id)button
{
    return [[[self alloc] init] autorelease];
}

-(id)initButtonWithType:(ButtonTypes)btype 
{
    if(self=[super init]){

    buttonsNode = [CCSpriteBatchNode batchNodeWithFile:@"Buttons.png"];
    [[self parent] addChild:buttonsNode];

    [[CCSpriteFrameCache sharedSpriteFrameCache] addSpriteFramesWithFile:@"Buttons.plist"];

    switch (btype)
    {
        case kFireButton:
            [self setButtonSprite:[CCSprite spriteWithSpriteFrameName:@"firebutton.png"]];
            [buttonsNode addChild:[self buttonSprite]];
            return self;
            break;

        case kLeftButton:
            [self setButtonSprite:[CCSprite spriteWithSpriteFrameName:@"leftbutton.png"]];
            [buttonsNode addChild:[self buttonSprite]];
            return self;
            break;

        case kRightButton:
            [self setButtonSprite:[CCSprite spriteWithSpriteFrameName:@"rightbutton.png"]];
            [buttonsNode addChild:[self buttonSprite]];
            return self;
            break;

        case kReplayButton:
            [self setButtonSprite:[CCSprite spriteWithSpriteFrameName:@"replaybutton.png"]];
            [buttonsNode addChild:[self buttonSprite]];
            return self;
            break;

        default:
            NSLog(@"NO button");
            break;

        }

    }
return self;
}
@end 
```

当我在其他地方调用此方法时程序崩溃：

```
 Buttons *myButton = [[Buttons button] initButtonWithType:kFireButton];
        [self addChild:myButton]; 
```

这是程序输出的内容：

```
cocos2d: CCSpriteFrameCache: Frame 'firebutton.png' not found

*** Assertion failure in +[CCSprite spriteWithSpriteFrameName:], 
```

最后是 Zwoptex 生成的 plist：

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE plist PUBLIC "-//Apple//DTD PLIST 1.0//EN" "http://www.apple.com/DTDs/PropertyList-1.0.dtd">
<plist version="1.0">
<dict>
    <key>frames</key>
    <dict>

        <key>firebutton.png</key>
        <dict>
            <key>aliases</key>
            <array>

            </array>
            <key>spriteColorRect</key>
            <string>{{1, 2}, {38, 40}}</string>
            <key>spriteOffset</key>
            <string>{0, 2}</string>
            <key>spriteSize</key>
            <string>{38, 40}</string>
            <key>spriteSourceSize</key>
            <string>{40, 48}</string>
            <key>spriteTrimmed</key>
            <true/>
            <key>textureRect</key>
            <string>{{51, 1}, {38, 40}}</string>
            <key>textureRotated</key>
            <false/>
        </dict>

        <key>leftbutton.png</key>
        <dict>
            <key>aliases</key>
            <array>

            </array>
            <key>spriteColorRect</key>
            <string>{{1, 0}, {46, 47}}</string>
            <key>spriteOffset</key>
            <string>{0, -0}</string>
            <key>spriteSize</key>
            <string>{46, 47}</string>
            <key>spriteSourceSize</key>
            <string>{48, 47}</string>
            <key>spriteTrimmed</key>
            <true/>
            <key>textureRect</key>
            <string>{{1, 52}, {46, 47}}</string>
            <key>textureRotated</key>
            <false/>
        </dict>

        <key>replaybutton.png</key>
        <dict>
            <key>aliases</key>
            <array>

            </array>
            <key>spriteColorRect</key>
            <string>{{1, 0}, {46, 47}}</string>
            <key>spriteOffset</key>
            <string>{0, -0}</string>
            <key>spriteSize</key>
            <string>{46, 47}</string>
            <key>spriteSourceSize</key>
            <string>{48, 47}</string>
            <key>spriteTrimmed</key>
            <true/>
            <key>textureRect</key>
            <string>{{49, 52}, {46, 47}}</string>
            <key>textureRotated</key>
            <false/>
        </dict>

        <key>rightbutton.png</key>
        <dict>
            <key>aliases</key>
            <array>

            </array>
            <key>spriteColorRect</key>
            <string>{{1, 0}, {46, 47}}</string>
            <key>spriteOffset</key>
            <string>{0, -0}</string>
            <key>spriteSize</key>
            <string>{46, 47}</string>
            <key>spriteSourceSize</key>
            <string>{48, 47}</string>
            <key>spriteTrimmed</key>
            <true/>
            <key>textureRect</key>
            <string>{{1, 1}, {48, 49}}</string>
            <key>textureRotated</key>
            <false/>
        </dict>

    </dict>
    <key>metadata</key>
    <dict>
        <key>version</key>
        <string>1.5.5</string>
        <key>format</key>
        <integer>3</integer>
        <key>size</key>
        <string>{128, 128}</string>
        <key>name</key>
        <string>Buttons</string>
        <key>premultipliedAlpha</key>
        <false/>
        <key>target</key>
        <dict>
            <key>name</key>
            <string>default</string>
            <key>textureFileName</key>
            <string>Buttons</string>
            <key>textureFileExtension</key>
            <string>.png</string>
            <key>coordinatesFileName</key>
            <string>Buttons</string>
            <key>coordinatesFileExtension</key>
            <string>.plist</string>
            <key>premultipliedAlpha</key>
            <false/>
        </dict>
    </dict>
</dict>
</plist> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T15:50:28.910

嗯……我觉得还可以。可能找不到 .plist 。验证 .plist 是否是目标的成员，并且文件名大小写在资源目录中是否正确。

此外，在这一行：

```
[[self parent] addChild:buttonsNode]; 
```

不确定调用 init 方法时是否设置了 parent。

编辑：在您从 plist 添加精灵帧的行上放置一个断点。在 CCSpriteFrameCache 的代码中进入它，直到你在这里：

```
-(void) addSpriteFramesWithFile:(NSString*)plist
{
    NSAssert(plist, @"plist filename should not be nil");

    if( ! [loadedFilenames_ member:plist] ) {

        NSString *path = [[CCFileUtils sharedFileUtils] fullPathFromRelativePath:plist];
        NSDictionary *dict = [NSDictionary dictionaryWithContentsOfFile:path];

        NSString *texturePath = nil;
.... 
```

并验证 dict 不为零。cocos2d 用于静默加载目录的方法“失败”，即如果文件不存在则返回 nil Dictionary 对象。如果文件存在，则问题是其他问题。如果 dict 为 nil，那么...继续查看您的项目设置，直到找到问题，或者使用文件命名（请注意项目中的文件名和 finder 中的文件名的大小写：必须相同），或者文件是不是您的目标的成员。此外，如果您为项目启用了高清，请确保 plist 是“Buttons-hd.plist”，与纹理 (Buttons-hd.png) 相同。同样，CCSpriteBatchNode 在缺少纹理的情况下“什么都不做”，静默失败。

# c# - 如何创建将实数转换为二进制数的程序

> ID：13552041
> 
> 赞同：-3
> 
> 时间：2012-11-25T14:39:58.793
> 
> 标签：c#, java

我希望有人在这方面帮助我并请向我解释。这不仅是我想要的答案，而且我也想理解它。我进行了研究，但似乎找不到与我发布的问题相似或相关的答案。我不太擅长编程，但我想知道并了解更多这是怎么回事。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T14:51:24.683

在 Java 中，执行此操作的标准方法是[`Integer.toBinaryString`](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/Integer.html). 但是，如果你想创建自己的方法，你可以看看这个：

```
public static String toBinaryString(int n) {
    String s = "";  // you can also use a StringBuilder here
    do {
        s = (n % 2) + s;  // add to front: 0 if n is divisible by 2,
                          // 1 if n is not divisble by 2.
        n /= 2;  // divide n by 2 to obtain next digit of
                 // binary representation in next iteration
    } while (n != 0);
    return s;
} 
```

尽管这是用 Java 编写的，但几乎任何语言都可以采用类似的方法。

* * *

这`Integer.toBinaryString`归结为（实际上这个方法调用了另一个辅助方法）：

```
public static String toBinaryString(int i) {  
    char[] buf = new char[32];
    int charPos = 32;
    do {
        buf[--charPos] = digits[i & 1];
        i >>>= 1;  // i.e. i /= 2
    } while (i != 0);

    return new String(buf, charPos, (32 - charPos));
} 
```

其中`digits`定义为

```
final static char[] digits = { '0', '1', '2', '3', '4', '5', '6', '7',
        '8', '9', 'a', 'b', 'c', 'd', 'e', 'f', 'g', 'h', 'i', 'j',
        'k', 'l', 'm', 'n', 'o', 'p', 'q', 'r', 's', 't', 'u', 'v',
        'w', 'x', 'y', 'z' }; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-25T14:46:41.307

对于 Java，请通过 API 并阅读 Integer。已经有一种方法可以为您执行此操作，称为`toBinaryString(int i)`

[http://docs.oracle.com/javase/7/docs/api/java/lang/Integer.html#toBinaryString(int](http://docs.oracle.com/javase/7/docs/api/java/lang/Integer.html#toBinaryString(int) )

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-25T14:48:15.443

对于 C#：

```
int startVal = 7;
int base = 2;
string binary = Convert.ToString(startVal, base); 
```

如果你想要 C++ 中的算法：

```
int i, n, a[100], m=0;
while(n!=0)
{
a[m++] = n%2;
n /= 2;
}
for(i=m-1;i>=0; --i)
cout<<a[i]; 
```

# sql - SQL查询优化推荐产品

> ID：13552044
> 
> 赞同：2
> 
> 时间：2012-11-25T14:40:37.627
> 
> 标签：sql, optimization

我现在将尝试更好地解释以下问题和查询的目的。假设我们正在谈论电子商务环境和数据库。除其他外，我们有三个表：products、orders 和 orders_data。ORDERS 表将处理所有已下订单，而我们称之为 ORDERS_DATA 的子表将存储订单中记录的所有产品。

按照表定义，我的问题没有那些无用的字段：

```
 ORDERS (*id*, date, totale, ...);
    ORDERS_DATA (id_order, id_product, ...);
    PRODUCTS (id, name, ...); 
```

*ORDERS*中的主键是**id**，而 ORDERS_DATA 中的主键是**(id_order, id_product)**。

我想对查询做的是检索，给定一个**产品 ID**（同时在产品页面或购物车页面上浏览），基于 ORDERS_DATA 表的建议产品。查询将返回存在于这些订单中的所有 id_product，其中，这些产品中至少有一个是给定的**PRODUCT ID**

为了简洁起见，我将举一个例子。假设我们在 ORDERS_DATA 中有这些 ROW：

```
R1(1, 1); R2(1, 2); R3(1, 3); R4(2, 2), R5(2, 5); R6(3, 3); 
```

我想要关于产品 id = 2 的建议。我的查询将返回 ids：1 和 3（来自 R1 和 R3 - 它们共享相同的订单 ID，并且该订单还有产品 2 - 来自 R2 - 顺便说一句它的产品）和产品 5，感谢订单号 2。订单号 3 将被忽略。

这是我写的查询，但我很确定它不是性能和风格最好的查询。

```
SELECT 
    A.id_product, COUNT( A.id_product ) AS num
FROM  
    orders_data A, orders_data B
WHERE 
    A.id_order = B.id_order
    AND B.id_product IN  (*IDs-HERE*)
    AND A.id_product NOT IN (*IDs-HERE*)
GROUP BY A.id_product 
```

我已经使用了 INNER JOIN 语法，但性能没有任何变化。查询耗时 0,0022 秒，IN 子句中只有一个产品 ID。性能将随着多个产品 ID 呈指数下降（例如在购物车页面期间，购物篮中有更多产品）。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T15:02:04.270

尝试用`JOIN`测试替换`EXISTS`：

```
SELECT
   id_product,
   COUNT(1) As num
FROM
   orders_data As A
WHERE
   id_product NOT IN (*IDs HERE*)
And
   Exists
   (
      SELECT 1
      FROM orders_data As B
      WHERE B.id_order = A.id_order
      And B.id_product IN (*IDs HERE*)
   )
GROUP BY
   id_product 
```

# php - 在数组上添加元素

> ID：13552051
> 
> 赞同：0
> 
> 时间：2012-11-25T14:42:07.600
> 
> 标签：php, class, constructor

我正在开发一个图形数据结构，但我遇到了一个问题：

```
<?php  
class Graph
{
    var $graph_arr = array();

    function Graph()
    {
        $this->graph_arr = array();
        //initialization of nodes, mythical for now
        $n = new Node("A", array("B", "C"));
        $this->graph_arr[] = $n;
        $n = new Node("B", array("A", "D"));
        $this->graph_arr[] = $n;
        $n = new Node("C", array("A", "E", "F"));
        $this->graph_arr[] =$n; 
        $n = new Node("D", array("B"));
        $this->graph_arr[] = $n;
        $n = new Node("E", array("C"));
        $this->graph_arr[] = $n;    
        $n = new Node("F", array("C"));
        $this->graph_arr[] = $n;
    }
};

class Node
{
    var $node_name;
    var $adjacent_nodes;
    var $is_visited;

    function Node($node_name, $adjacent_nodes)
    {
        $this->node_name = $node_name;
        $this->adjacent_nodes = $adjacent_nodes;
    }
    /** returns array of adjacent nodes **/

    function getAdjacentNodes()
    {
        return $this->adjacent_nodes;
    }

    function getNodeName()
    {
        return $this->node_name;
    }

    function isVisited()
    {
        return $this->is_visited;
    }

    function setVisited()
    {
        $this->is_visited = true;
    }
};

?> 
```

好吧，当我创建 Graph 对象时，数组的大小为 0。我无法添加新节点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T14:47:08.813

尝试像这样更改您的 Graph 类：

```
class Graph
{
  var $graph_arr = array();

  function __construct() {
     $this->graph_arr = array();

   //initialization of nodes, mythical for now
   $n = new Node("A", array("B", "C"));
   $this->graph_arr[] = $n;
   $n = new Node("B", array("A", "D"));
   $this->graph_arr[] = $n;
   $n = new Node("C", array("A", "E", "F"));
   $this->graph_arr[] =$n; 
   $n = new Node("D", array("B"));
   $this->graph_arr[] = $n;
   $n = new Node("E", array("C"));
   $this->graph_arr[] = $n;    
   $n = new Node("F", array("C"));
   $this->graph_arr[] = $n;   
 }
} 
```

# stemming - 词干算法

> ID：13552052
> 
> 赞同：0
> 
> 时间：2012-11-25T14:42:13.343
> 
> 标签：stemming, porter-stemmer

我有一个关于 Porter Stemmer 算法的问题，我在互联网上研究过，

但我找不到词干不足和词干过度之间的区别。

波特算法是低估还是过度？

你有想法吗？

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T14:54:32.857

当截止后缀太长时会发生过度提取，这会导致不相关单词的虚假匹配。

Understemming 是相反的——例如，一个不会切断任何本质上understems 的词干分析器。

我怀疑 Porter Stemmer 会不时犯两种类型的英语错误。请注意，其他语言的实现可能会表现得非常不同（谈到 Snowball，它具有针对多种语言的用户提供的算法）。它们甚至可能在词干的语言定义上有所不同。

# android - android中的后台服务

> ID：13552055
> 
> 赞同：1
> 
> 时间：2012-11-25T14:42:24.340
> 
> 标签：android, android-service

我实际上想在 5 分钟后触发活动意图，在此期间，我将在启动后台服务后终止当前活动。但是我怎样才能通过服务触发 5 分钟的延迟来触发该活动？

# php - 动态填充数组 PHP

> ID：13552062
> 
> 赞同：0
> 
> 时间：2012-11-25T14:43:05.907
> 
> 标签：php, arrays, foreach

我想用从这个 foreach 获得的链接填充一个数组。我怎样才能做到这一点？

```
foreach($html->find('a') as $link) {
       echo $link->href; //output: link1.html link2.html link3.html......
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T14:44:58.237

所有你需要的是

```
$links = array_map(function($v){return $v->href;}, $html->find('a')); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-25T14:53:35.873

我会说[array_map()](http://php.net/manual/en/function.array-map.php)是最好的方法：

```
$links = array_map(function($link) { return $link->href; }, $html->find('a')); 
```

它获取给定数组中的所有内容（在本例中为`$html->find('a')`），并使用您提供的函数（在本例中为 ）基于映射返回一个新数组`function($link) { return $link->href; }`。它将该函数应用于给定数组中的每个元素，以创建返回数组中的每个元素。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-25T14:44:43.083

与`array_push`. 看到[这个链接](http://php.net/manual/en/function.array-push.php)

```
<?php
$stack = array();
foreach($html->find('a') as $link) {
   array_push($stack, $link->href); 
}
print_r($stack);
?> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-25T14:44:48.347

**很简单，试试这个：-**

```
$dataArray = array();
foreach($html->find('a') as $link) {
       $dataArray[] = $link->href; 
}

echo '<pre>';
print_r($dataArray);
 echo '</pre>'; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-25T14:45:46.470

将其放入循环中： $links[]=$link->href;

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-25T15:10:51.883

```
$hrefs=array();
foreach($html->find('a') as $link) {
       $hrefs[]= $link->href; //output: link1.html link2.html link3.html......
} 
```

那应该这样做。

# xml - xpath，在其他元素之后选择元素

> ID：13552063
> 
> 赞同：1
> 
> 时间：2012-11-25T14:43:17.573
> 
> 标签：xml, xpath

我无法从 xml 文档中选择恰好在其他元素之后的元素。在这个示例中，我想选择`<c/>`恰好在元素之后的`<a/>`元素。

```
<root>
  <object>
   <a/>
   <b/>
   <c id="1" />
  </object/>
  <object>
    <a/>
    <c id="2"/>
  </object>
</root> 
```

我想获取`<c id="2"/>` 我尝试过的元素 //object/c[ position()-1= (../a[position()]) ] 但不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T15:19:36.733

使用`//object/c[preceding-sibling::*[1][self::a]]`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-25T15:40:48.440

**使用**：

```
//a/following-sibling::*[1][self::c] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-25T14:52:17.133

你可以做到`//c[local-name(preceding-sibling::*[1]) = 'a']`。我必须对您的 XML 文件进行一些更正 -`c`元素没有关闭，并且元素的结束标记`root`丢失。

# java - RichFaces：a4j:region 内的 c:forEach

> ID：13552064
> 
> 赞同：1
> 
> 时间：2012-11-25T14:43:26.467
> 
> 标签：java, jsf, richfaces

我有一个`a4j:region`

为什么`c:forEach`with `rich:tab`s inside 不会在 Richfaces 容器标签（`a4j:region`、`rich:panel`等）中呈现？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-25T19:32:32.970

`c:forEach`未在正确的生命周期中执行以供您使用，您可以在此处获得更多信息：[c:forEach vs ui:repeat in Facelets](https://rogerkeays.com/jsf-c-foreach-vs-ui-repeat)

# asp.net-mvc - 带有 JSON 返回的 MVC REST API 状态代码 500

> ID：13552069
> 
> 赞同：1
> 
> 时间：2012-11-25T14:43:47.847
> 
> 标签：asp.net-mvc, rest, httpexception

我正在 MVC3 上开发一个休息 API。
每当验证出现问题时，我想抛出 500 +描述错误的**json**（json 可以是未验证字段的列表）。
问题是 json 在包含整个`HttpExeption`( `Server Error in '/' Application.`)的 html 中返回
如果我把`filterContext.ExceptionHandled = true;`消息清除干净，但客户端看不到他身边的 500 错误。这种情况：[https](https://stackoverflow.com/a/4707762/936651) ://stackoverflow.com/a/4707762/936651实际上是html并将干净的json提供给客户端，但也消除了500错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T15:53:07.947

您可以在您拥有的自定义错误处理程序中将状态代码设置为 500 [`seen here`](https://stackoverflow.com/questions/4707755/asp-net-mvc-ajax-error-handling/4707762#4707762)：

```
filterContext.RequestContext.HttpContext.Response.StatusCode = 500; 
```

在客户端：

```
$.ajax({
    url: '/home/foo',
    success: function (result) {
        alert('success');
    },
    error: function (jqXHR, textStatus, errorThrown) {
        var json = $.parseJSON(jqXHR.responseText);
        // TODO: do something with the json that was returned from the server
    }
}); 
```

# c - 在 For 中设置进程

> ID：13552070
> 
> 赞同：0
> 
> 时间：2012-11-25T14:43:52.143
> 
> 标签：c, fork

我有这个功能：

```
 void set_background(int n){
       int i;
       for(i=0;i<n;i++)
          fork();
  } 
```

这个进程必须设置 n 个进程和一个 fork。如果我们将有父进程和子进程并且 i=1 有 4 个进程等等，我如何通过将 fork() 设置为 i=0 来设置 for 中的 n 个进程？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-25T14:48:42.003

您将需要监视来自`fork()`.

```
void set_background(int n)
{
    for (int i = 0; i < n; i++)
    {
         pid_t pid;
         if ((pid = fork()) < 0)
             ...process error...
         else if (pid == 0)
         {
             ...do childish things...
             exit(EXIT_FAILURE);
         }
    }
    /* If here, must be parent */
} 
```

如果您确保“幼稚”的处理永远不会返回，您就可以简化控制流程。我已经通过`exit(EXIT_FAILURE);`电话强制执行了。

请注意，在原始代码中，父代在循环的第一次迭代中分叉，因此您有两个进程在循环结束时运行。在第二次迭代之后，父子节点都分叉了，所以你有 4 个进程正在运行。在第 N 次迭代之后，您有 2 ^N个进程正在运行。这很少是想要的效果。这种无界循环版本被称为“叉形炸弹”，它能够让机器瘫痪。

# c++ - 变量周围的堆栈已损坏

> ID：13552071
> 
> 赞同：2
> 
> 时间：2012-11-25T14:43:58.353
> 
> 标签：c++, stack, stack-corruption

我知道这个主题有很多问题，但它们似乎都特定于代码。

我有这个功能-

```
Point2 ITCS4120::operator* (const Matrix3x3& m, const Point2& p) {
   Point2 result;
   for(int i=0;i<3;i++) {
       result[i] = (m[i][0]*p[0]) + (m[i][1]*p[1]) + (m[i][2]);
       }
   return result; //error here
   } 
```

它在返回语句上给我一个错误，说“运行时检查失败 #2 - 变量‘结果’周围的堆栈已损坏。”

我看不出该功能有什么问题。Matrix3x3 的数组只是 -

```
float array[3][3]; 
```

Point2的数组是

```
float array [2]; 
```

Matrix3x3 和 Point2 类都有这个代码 -

```
/** Write access for element in row [i] */
inline Scalar* operator[](int i) {return array[i];}
/** Read access for element in row [i] */
inline const Scalar* operator[](int i)const {return array[i];} 
```

这段代码是给我的，我之前有过一些关于点、矩阵和向量的算术作业。我的代码通过了所有测试，所以我假设我的 Point2 ITCS4120::operator* (const Matrix3x3& m, const Point2& p) 代码是正确的。但也许我需要以不同的方式使用 [] 运算符？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-25T14:54:40.160

看来您的观点包含两个`float`，但您正在写三个。

# .net - 在 .NET 中序列化复杂对象层以进行缓存的最简单方法是什么？

> ID：13552075
> 
> 赞同：1
> 
> 时间：2012-11-25T14:44:27.737
> 
> 标签：.net, serialization, memcached, protobuf-net, msgpack

试图在 IIS 下运行具有复杂对象层（和 WCF 服务层，这里不是重点）的应用程序的中间层引入缓存/状态持久化。已经选择 memcached/enyim 作为缓存架构，现在需要为它高效地序列化这些对象（速度和空间）。

对象层在对象之间有很多指针和相互依赖关系，大致如下：

```
internal class SomeObj
{
    private string attr1;
    private int attr2;
    private OtherObj otherObj;
    private List<OtherOtherObj> otherObjs;
}

internal class OtherObj
{
    //...more attributes
}

internal class OtherOtherObj
{
    // you get the idea
} 
```

请注意，所有字段都是私有的。另外值得注意的是，大多数对象都是内部的，许多属性要么是只读的（没有设置），要么从用户角度使用设置（即使对象“脏”），因此不能用于补液。我有几十种需要缓存的类型。

我喜欢 protobuf-net 和 msgpack 的外观，但我需要尽可能快地完成序列化，尽可能少地改变现有架构（效果很好），而且看起来两者都是对对象层次结构的支持有限。我很了解 DTO 类型的序列化，但是对于规划正确的方法来为缓存序列化对象是新手。这些工具之一可以为我工作吗？我是否坚持使用内置的 .NET 二进制文件来使用构造函数，并根据自己的条件重新填充属性和对象？

编辑：只是为了澄清最后一个问题——如果它读作“我是否坚持使用内置的 .NET 二进制文件*以便我可以控制*构造函数并按照我自己的条件重新填充属性和对象？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T15:05:22.440

我不能对 msgpack 发表评论，但是可以：protobuf-net 可以做你提到的所有事情，包括：

*   序列化非公共类型
*   序列化私有字段
*   序列化树
*   构造函数跳过或用户提供的工厂（或只是无参数构造函数）
*   序列化完整/循环图（通过将受影响的显式标记为引用）
*   属性使用，或运行时配置，完全不改变 DTO（坦率地说，属性通常更容易）
*   快速紧凑的输出
*   继承支持

在给定示例的情况下，最简单的“它是否有效”测试将只使用 [ProtoContract] 制作类型（该属性中有一个用于构造函数跳过的可选设置），并将字段标记为 [ProtoMember(n )]，例如 n=1,2,3,...（在每个类型中唯一，但不需要在类型之间唯一）

除了我们使用 Redis+BookSleeve 而不是 memcached+enyim 之外，这正是我们在 Stack Exchange 中为对象缓存所做的。好吧，我们还为大对象做一个推测性的 gzip - 如果有很多字符串数据，gzip 可以帮助减少一些额外的字节。

# php - 在 PHP 中使用正则表达式模式中的变量

> ID：13552076
> 
> 赞同：3
> 
> 时间：2012-11-25T14:44:28.457
> 
> 标签：php, regex

我有这个正则表达式：

```
'/^files\/(.+\..+)$/'; 
```

但我想用运行时变量替换“files/”部分。

我试过这个：

```
$filePath = "files/";
'/^'.$filePath.'(.+\..+)$/'; 
```

这不起作用，还有这个：

```
$filePath = preg_quote("files/");
'/^'.$filePath.'(.+\..+)$/'; 
```

但我仍然在 preg_match 行的这个循环中得到一个错误，说“（”是一个未知的修饰符。

```
foreach (glob(FILE_PATH."*.*") as $filename) {
    preg_match($pattern, $filename, $matches);
    echo "<option class='file' value='".$matches[1]."'>".$matches[1]."</option>";
} 
```

任何帮助将不胜感激，谢谢。

**编辑**

这有效...

```
$filePath = 'files\/'; 
```

...但在实际使用中，我正在尝试使用在另一个文件中声明的常量。

所以：

```
define('FILE_PATH', 'files/'); 
```

...然后尝试使用该常量。它不能嵌入转义字符，因为应用程序的某些其他部分在没有转义字符的情况下需要它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-25T14:46:32.837

您需要传递[`preg_quote`](http://php.net/manual/en/function.preg-quote.php)分隔符：

```
$filePath = preg_quote("files/", '/'); 
```

由于您可以使用[很多字符](http://www.php.net/manual/en/regexp.reference.delimiters.php)作为分隔符，`preg_quote`因此无法知道您将要使用`/`，因此默认情况下它不会转义它。这就是第二个（可选）参数的用途。

否则，您的第二种方法（使用`preg_quote`的方法）是可行的方法。

# android - 如何制作一个按钮以在点击时创建一个新的微调器

> ID：13552081
> 
> 赞同：1
> 
> 时间：2012-11-25T14:44:55.157
> 
> 标签：android

我想创建一个表单，允许用户选择他\她知道的尽可能多的语言（至少一种）我不想创建无限数量的 Spinner，我想创建一个按钮（“+”按钮）当用户点击它时，它将创建一个新的微调器，允许用户选择另一种语言。我该怎么做？tnx

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T14:51:32.863

```
button.setOnClickListener(new onClickListener()
{
    onClick(View v)
    {
        Spinner spinner = new Spinner(YourActivity.this);
        layout.addView(spinner);
    }
}); 
```

布局 - 你的父布局

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-25T14:47:48.470

也可以实现`Spinner`，但是`setVisibility(GONE)`当您单击按钮时，会更改`visibility`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-25T14:50:58.763

您可以将语言数据填充到一个数组中，并使用该数组设置对话框项。

![在此处输入图像描述](../Images/d256f2e46f65d381d878b080d93458c7.png)

```
@Override
public Dialog onCreateDialog(Bundle savedInstanceState) {
    AlertDialog.Builder builder = new AlertDialog.Builder(getActivity());
    builder.setTitle(R.string.pick_color);
           .setItems(R.array.colors_array, new DialogInterface.OnClickListener() {
               public void onClick(DialogInterface dialog, int which) {
               // The 'which' argument contains the index position
               // of the selected item
           }
    });
    return builder.create();
} 
```

# java - Eclipse 始终构建工作区

> ID：13552082
> 
> 赞同：38
> 
> 时间：2012-11-25T14:44:57.683
> 
> 标签：java, eclipse

通常，当我们自动检查 Project->Build 时，它会在我们的项目源发生更改时构建，但是当我检查此选项时，我的 Eclipse 总是在构建 - 大约每 2 或 3 秒 - 无论它是否有变化。我可以从右下角的状态栏中看到“正在构建工作区......”。

令人讨厌的是，这种行为使我的 eclispe 非常缓慢，并且 CPU 始终处于高使用率状态。

我正在为 java EE 开发人员使用 eclipse 3.7、m2e、用于 WTP 的 maven 集成、git 插件、subclipse 和用于 eclipse、checkstyle、findbugs 等的 Google 插件。

有任何想法吗？

PS我在Win 7上，8GB RAM

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-11-25T15:00:15.943

我以前在基于 ant 的构建中看到过这种效果。

您的 maven 构建中可能有一些输出到源文件夹之一或其子目录之一的内容。Eclipse 检测到文件已更改并开始新的构建。

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2017-11-16T17:48:40.970

我刚刚禁用了我的项目以自动构建。陷入那种无休止的循环真的很烦人。

**去：**

> 项目->自动构建

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2016-02-22T14:42:43.143

**`Preferences -> Workspace -> Refresh on access`**在 Eclipse 中，由于 Rudy Vissers 的评论让我走上了正确的道路，我不得不禁用它。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2014-04-16T21:04:01.360

我有同样的问题。

在一个“Project X”中，我使用“Project->Properties->Android->Library->Add...”添加了一个 Library-Reference。

Library-Project 设置为“Is Library”=true。在这个 Library-Project 中，我在“Project->Properties->Project References”下选择了另一个“Project X”。

因此，这两个项目相互引用，并在自动构建时导致无限循环。

删除其中一个引用以停止这个无休止的建筑。也许这可以帮助某人。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2016-04-15T14:05:55.760

A source of this problem could be a target folder that marked as a source folder.

To check and resolve this: Right click on **project -> Preferences -> Java Build Path -> Source**

Remove target folder from the list if present

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2019-07-18T15:12:41.943

将 javaPlease42 答案扩展为

> 项目-> 属性-> 工作区-> 自动构建

取消选中然后“应用并关闭”

* * *

与上述答案无关，我已按项目移动到 C 盘，我发现我的共享驱动器访问速度太慢，这也是以缓慢的过程一次又一次显示构建的原因之一

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2014-11-12T15:20:15.297

Both projects are referenced to each other.

Go to "Project->Properties->Project References" and check the references on both projects, that causes like an endless loop when building automatically.

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2015-02-18T19:57:27.720

我们发现，在使用 Chrome 进行调试时，我们最终会运行大量 chromedriver .exe 进程。它们中的大量似乎会导致日食窒息。

重新启动计算机将解决此问题，但您也可以运行命令来杀死它们。在我当前的测试系统上，驱动程序是：

*chromedriver-win32-2.14.exe*

用于杀死进程的所有正在运行的副本的命令提示符 kill 命令是：

> *taskkill /F /IM*

所以，对我来说，要杀死有问题的进程：

> 打开命令提示符
> 
> 进入：
> 
> ```
> taskkill /F /IM chromedriver-win32-2.14.exe 
> ```

消除虚假进程后，eclipse 恢复为快乐的小狗……直到下一次生成过多的进程。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2019-03-07T14:58:47.840

在这种情况下，问题是由在目标目录中生成 JAXB 类（这很好）但使用项目的主 JAVA 包引起的。所以说项目的主要 JAVA 包是 com.proj 然后 JAXB 类有 com.proj.schema 包。这不知何故混淆了 Eclipse（詹金斯很好）。将 JAXB 类的包从 com.proj.schema 更改为 schema 就可以了。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2022-01-11T16:00:53.283

如果您生成需要包含在构建路径中的代码，那么您可以将以下内容添加到您的 pom.xml 中，以便 Eclipse Maven Builder 跳过相关插件的生成步骤。请参阅 <ignore/> 部分。

在下面的示例中，是 openapi-generator-maven-plugin 导致重新生成目标/生成源，并且由于该文件夹被添加到构建路径中，它导致 Eclipse 再次重新生成代码， 然后再次...

您仍然可以随时通过菜单 Run As-> Maven generate-sources 手动生成代码

```
 <pluginManagement>
            <plugins>
                <!--This plugin's configuration is used to store Eclipse m2e settings only. It has no influence on the Maven build itself.-->
                <plugin>
                    <groupId>org.eclipse.m2e</groupId>
                    <artifactId>lifecycle-mapping</artifactId>
                    <version>1.0.0</version>
                    <configuration>
                        <lifecycleMappingMetadata>
                            <pluginExecutions>
                                <pluginExecution>
                                    <pluginExecutionFilter>
                                        <groupId>org.openapitools</groupId>
                                        <artifactId>openapi-generator-maven-plugin</artifactId>
                                        <versionRange>[0.1,)</versionRange>
                                        <goals>
                                            <goal>generate</goal>
                                        </goals>
                                    </pluginExecutionFilter>
                                    <action>
                                        <ignore></ignore>
                                    </action>
                                </pluginExecution>

                            </pluginExecutions>
                        </lifecycleMappingMetadata>
                    </configuration>
                </plugin>
            </plugins>
        </pluginManagement> 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2019-03-28T09:19:51.457

我想我已经找到了一种方法来启用`Refresh using native hooks or polling`,`Refresh on access`和`Build automatically`，而不需要无限的编译循环。

请按照以下步骤操作

> 右键项目->Properties->C/C++ Build->Refresh Policy选项卡->只添加Debug或Release目录，不添加整个项目。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2017-09-04T05:53:46.453

**对我来说，它在Eclipse Kepler**中的工作方式如下。

**右键单击项目/单击项目菜单 -> 属性 -> Java 构建路径 -> 选择源选项卡 -> 删除目标文件夹（如果存在）**

上面的那个为我完成了这项工作，但在此之前我尝试了以下不起作用的方法。

*   结束eclipse进程并重新启动
*   重启`java.exe`进程
*   重启我的电脑

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2017-10-25T15:44:41.053

我在 Ubuntu Linux 上遇到了同样的问题。当它发生时，我的包开始显示为文件夹，而不是带有方形图标的单个包名称。

当我查看 eclipse 文件夹时，我有一个名为`C:`. 这是我的计算机文件夹结构的镜像，安装了 eclipse 文件夹。我刚刚删除了这个文件夹并重新启动，它就像一个魅力。

如果您看到额外的文件夹，请尝试一下。当然，删除需要您自担风险。

* * *

## 回答 #14

> 赞同：-1
> 
> 时间：2017-12-14T17:50:23.863

请参阅上面的 Rudy Vissor，我取消选择“使用本机挂钩或轮询刷新”和“访问时刷新”，问题立即得到解决。使用 Eclipse Oxygen 4.7.1

# objective-c - CGContext 中的透明度

> ID：13552085
> 
> 赞同：0
> 
> 时间：2012-11-25T14:45:25.757
> 
> 标签：objective-c, xcode, core-graphics

我正在尝试为 CGContext 设置透明背景，但不断得到：

```
CGBitmapContextCreateImage: invalid context 0x0 
```

这就是我所拥有的。如果我将 kCGImageAlphaLast 切换到 kCGImageAlphaNoneSkipFirst 它可以工作，但 alpha 通道被完全忽略。我对这种颜色和上下文的东西很陌生-有什么想法吗？

```
-(BOOL) initContext:(CGSize)size {
int bitmapByteCount;
int bitmapBytesPerRow;

bitmapBytesPerRow = (size.width * 4);
bitmapByteCount = (bitmapBytesPerRow * size.height);

cacheBitmap = malloc( bitmapByteCount );
if (cacheBitmap == NULL){
    return NO;
}

cacheContext = CGBitmapContextCreate (NULL, size.width, size.height, 8, bitmapBytesPerRow, CGColorSpaceCreateDeviceRGB(), kCGImageAlphaLast);

CGContextSetRGBFillColor(cacheContext, 1.0, 1.0, 1.0f, 0.5);
CGContextFillRect(cacheContext, self.bounds);

return YES;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T20:18:46.823

[`CGBitmapContext`仅支持某些可能的像素格式。](https://developer.apple.com/library/mac/documentation/graphicsimaging/Conceptual/drawingwithquartz2d/dq_context/dq_context.html#//apple_ref/doc/uid/TP30001066-CH203-BCIBHHBB)你可能想要`kCGImageAlphaPremultipliedLast`.

（这是[对预乘 alpha 的解释](http://en.wikipedia.org/wiki/Alpha_compositing)。）

另请注意：

*   无需 malloc `cacheBitmap`。由于您将`NULL`作为第一个参数传递给`CGBitmapContextCreate`，因此位图上下文将进行自己的分配。

*   根据您的代码，`self.bounds`可能不是要填充的正确矩形。使用会更安全`CGRectMake(0.f, 0.f, size.width, size.height)`。

# .htaccess - htaccess 重定向到其他目录中的文件

> ID：13552087
> 
> 赞同：0
> 
> 时间：2012-11-25T14:45:27.117
> 
> 标签：.htaccess, url, url-rewriting

`.htaccess`如果在请求的 URL 中找不到该文件，我如何从另一个目录（使用）加载请求的文件？

例如：

**请求：**：（`mysite.com/samples/image_requested.jpg`不存在）

**输出：（** `mysite.com/samples/missing/image_requested.jpg`未在浏览器中显示确切的 url）

我试过这个，但它给了我一个`500 Internal Error`：

```
RewriteEngine On
RewriteCond %{REQUEST_URI} ^/samples/
RewriteCond %{REQUEST_URI} !^/samples/missing/
RewriteRule ^samples/(.+)$ /samples/missing/$1 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T07:04:14.550

这是 jpg、png 和 gif 文件的示例。它将始终显示请求的 URL ( */samples/file.jpg* )，而不是真实的 URL ( */samples/missing/file.jpg* )：

```
RewriteEngine On
RewriteCond %{REQUEST_FILENAME} !-f
RewriteRule samples/(.*\.(jpg|png|gif)) samples/missing/$1 [L] 
```

# java - 定时器已取消

> ID：13552088
> 
> 赞同：18
> 
> 时间：2012-11-25T14:45:37.367
> 
> 标签：java, multithreading, timer, timertask

我有两个计时器来管理来自 FIFO 队列的输入（入队）和输出（出队），但我不断收到出队 java.lang.IllegalStateException: 计时器已取消的异常。我无法停止调试声称错误发生在第 83 行的行。我不知道我缺少什么，因此将不胜感激。

```
import java.util.Random;
import java.util.Timer;
import java.util.TimerTask;

/**
 * RunSim
 */
public class RunSim {
    private double arrivalRate = 600;
    private double y;
    private Timer t;
    private Timer t2;
    private Queue fifoQueue;
    private long xy;
    private long fact = 10;
    private int count;
    private int pId;

    public RunSim() {
        Random r = new Random();
        long n = System.currentTimeMillis();
        r.setSeed(n);
        double i = r.nextDouble();
        y = ((1 / arrivalRate) * (Math.log(i)));
        xy = (long) y;
        t = new Timer();
        t2 = new Timer();
        fifoQueue = new Queue();
        count = 0;
        pId = 0;

    }

    public static void main() {
        RunSim rs = new RunSim();
        rs.start();
    }

    public void start() {
        class sendPacket extends TimerTask {
            public void run() {
                Packet p = new Packet();
                p.setId(pId);
                fifoQueue.insert(p);
                p.setArrivalTime();
                System.out.println("ID: " + p.getId() + " Arrival Time: "
                        + p.getArrivalTime() / fact);
                pId++;

            }
        }

        class removePacket extends TimerTask {
            public void run() {
                fifoQueue.first().setDepartureTime();
                System.out.println("ID: " + fifoQueue.first().getId()
                        + " Departure Time: "
                        + fifoQueue.first().getDepartureTime() / fact);
                fifoQueue.remove();
            }
        }

        while (count < 1000) {
            long v = fact * (1 + Math.abs(xy));
            t.schedule(new sendPacket(), 0, v);
            count++;
            t2.schedule(new removePacket(), 5, 5);

        }
    }
} 
```

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-11-25T14:51:10.657

在安排所有计时器后，您立即取消它们。这不像`ExecutorService`您可以安排所有需要然后调用的地方那样工作`shutdown`- 这实际上取消了计时器和所有计划的任务。

您的代码的另一个问题是您立即调用`System.exit`，没有给计划任务实际运行的任何机会。

除了这些问题之外，`Timer already canceled`如果之前的任务引发异常，您可能会遇到异常。该异常不会在任何地方看到，但它会取消计时器。请务必将您的计时器任务包装到一个包罗万象的 try 语句中。

# garbage-collection - 对象删除对自身的引用

> ID：13552089
> 
> 赞同：7
> 
> 时间：2012-11-25T14:45:42.080
> 
> 标签：garbage-collection, python

Python 解释器能否优雅地处理对象实例删除对自身的最后一个引用的情况？

考虑以下（诚然无用的）模块：

```
all_instances = []

class A(object):
    def __init__(self):
        global all_instances
        all_instances.append(self)

    def delete_me(self):
        global all_instances
        self.context = "I'm still here"
        all_instances.remove(self)
        print self.context 
```

现在的用法：

```
import the_module
a = the_module.A()
the_deletion_func = a.delete_me
del a
the_deletion_func() 
```

这仍然会打印`I'm still here`，但是 Python 的垃圾收集器是否存在竞争条件，即将收集对象实例？
对对象函数的引用是否节省了时间？
解释器是否保留对当前正在执行其代码的对象的引用，直到它完成？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-25T14:47:38.227

不，没有任何这样的竞争条件。*您正在清除引用，因此引用计数下降到 1，并且一旦您删除方法引用*，该对象将被清除。

引用指向一个方法，该`the_deletion_func`方法指向实例（以及类），所以那里仍然有一个引用。

当前执行的方法有一个局部变量`self`，它也是对实例的引用，但大多数情况下它是提供该引用的方法包装器。

# drupal - 如何在 Drupal 7.x 中使用 i18n 创建模块多语言

> ID：13552091
> 
> 赞同：1
> 
> 时间：2012-11-25T14:45:47.733
> 
> 标签：drupal, internationalization

我想在已经安装 i18n 的 drupal 7.x 中创建一次模块多语言。请帮助我一步一步地创建它，

提前谢谢，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T09:29:28.987

所有 Drupal 本地化的主页现在是[http://localize.drupal.org/](http://localize.drupal.org/)。这是开始阅读有关国际化和翻译的好地方。

作为开发人员，您还应该查看 kristen 的 Drupal 7 i18n 文章：[http](http://www.kristen.org/drupal7-i18n-articles) ://www.kristen.org/drupal7-i18n-articles ，

另请阅读有关 .po 文件的信息：http: [//drupal.org/node/1814954](http://drupal.org/node/1814954)

作为开发人员你需要知道的非常简短的版本 :-) 是你应该将要翻译的字符串包装在 translate (t()) 函数中，如下所示：http: [//hojtsy.hu/blog /2011-jan-25/drupal-7039s-new-multilingual-systems-part-3-localization-and-language-apis](http://hojtsy.hu/blog/2011-jan-25/drupal-7039s-new-multilingual-systems-part-3-localization-and-language-apis)，然后通过下述方式之一将字符串翻译成您感兴趣的语言：

如果您的可翻译字符串是 Drupal 官方项目的一部分，那么在下次更新翻译时，贡献给[http://localize.drupal.org/](http://localize.drupal.org/)的翻译将显示在您的网站上（似乎最多延迟 24 小时）[http://localize.drupal.org/](http://localize.drupal.org/)接受翻译到更新生效时）。更新可以配置为通过本地化更新自动发生：http: [//drupal.org/project/l10n_update](http://drupal.org/project/l10n_update)

对于自定义模块，您可以通过同一模块的管理界面上传自己的翻译（本地化更新）。

# mysql - Mysql如何撤销文件

> ID：13552093
> 
> 赞同：4
> 
> 时间：2012-11-25T14:46:04.597
> 
> 标签：mysql, grant

我在 mysql 终端中尝试了以下语句：

```
revoke file on *.* to 'john'@'localhost'; 
```

但我得到了错误：

```
ERROR 1064 (42000): You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'to 'john'@'localhost'' at line 1 
```

revoke 语句的正确语法是什么？我尝试阅读 mysql 文档但不明白。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-25T14:50:19.617

在您的查询中，将单词替换`to`为`from`。像这样：

```
revoke file on *.* from 'john'@'localhost'; 
```

有关此命令的更多信息，请参阅[REVOKE 的 MySQL 文档。](http://dev.mysql.com/doc/refman/5.6/en/revoke.html)

# html - 使一个元素居中并使另一个元素向右浮动的最简单方法

> ID：13552094
> 
> 赞同：2
> 
> 时间：2012-11-25T14:46:14.040
> 
> 标签：html, css, layout

贝娄是我试图实现的

```
|                                 link | link | link             a,b,c search:  | 
```

`link-link-link`居中，向右`a,b,c search`浮动。
我尝试使用最简单的 CSS+HTML 来实现这一点

我有的：

```
<header>
<nav><a href="aaa">fff</a> | <a href="aaa">fff</a> | <a href="aaa">fff</a></nav>
<ul><li>a</li><li>b</li><li>c</li><li>search: </li></ul>
</header> 
```

我`text-align: center`在`header`.
我`display:block; float: right`在`ul`

这几乎给了我正确的东西，除了 UL 是下面的一行......我可以通过给`ul`.

想知道是否有更好的解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-25T14:52:05.703

您可以给出`ul`绝对位置并将其固定在右侧，例如：

```
head { 
    position: relative;
}

ul {
    position: absolute;
    right: 0px;
    top: 0px;
} 
```

这将让它显示在与`nav`. 不利的一面是，如果用户将浏览器的大小调整为较窄的宽度，它将与居中的文本重叠。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-25T14:52:16.500

我建议使用`div`elements 和 to use `display:table`，`display:table-row`并`display:table-cell`让单元格的内容根据需要对齐。就像是：

```
<style>
.table-div{display:table; width:100%}
.table-div > div{display:table-row}
.table-div >div>div{display:table-cell; vertical-align:middle}

.l{text-align:left}
.c{text-align:center}
.r{text-align:right}

</style>

<div class="table-div">
  <div style="display:table-row">
     <div class="l">|</div>
     <div class="c"> link | link | link</div>
     <div class="r">a,b,c search:  |</div>
  <div>
</div> 
```

我知道，这不是最简单的方法，但即使窗口将重新调整大小（这对某人来说不应该是一个优势），也会让事情按照你的需要出现。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-25T14:54:59.577

最简单的方法：`position: absolute; top: 0; right: 0;`在`<ul>`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-25T15:14:23.317

将一个 jsfiddle 放在一起总结所有上述答案，包括将列表项浮动到左侧以使其显示与您的示例完全相同。

[http://jsfiddle.net/jonezy/qQGUQ/1/](http://jsfiddle.net/jonezy/qQGUQ/1/)

```
header {text-align:center;position:relative;}
header ul {position:absolute;top:0;right:0;}
header ul li {float:left;} 
```

希望有帮助。

# c# - 每个继承和存储库的表

> ID：13552097
> 
> 赞同：0
> 
> 时间：2012-11-25T14:46:24.120
> 
> 标签：c#, entity-framework

我正在使用按层次结构表（TPH）。例如，我们有一个所有实体的基类：

```
public abstract class Entity
    {
        public virtual int Id { get; set; }

        public virtual bool IsTransient()
        {
            return Id == default(int);
        }
    } 
```

以及几个实体的基类：

```
public abstract class Event:Entity
    {
        [MaxLength(50)]
        [Required]
        public string Name { get; set; }

        [Required]
        public string Description { get; set; }

        [Required]
        [MaxLength(100)]
        public string ShortDescription { get; set; }

        [Required]
        public DateTime PublishDate { get; set; }

        public int  Duration { get; set; }
    }

public class Film:Event
    {
        public string Director { get; set; }

        public string ActorList { get; set; }

        public override string ToString()
        {
            return Name;
        }
    }

public class Concert:Event
    {
        public string Genre { get; set; }

        public override string ToString()
        {
            return Name;
        }
    } 
```

我的背景：

```
public class MyContext:DbContext
    {
        public MyContext():base(ConfigurationManager.ConnectionStrings["MyContext"].ConnectionString)
        {
        }

        public DbSet<Event> Events { get; set; }

        public virtual void Commit()
        {
            base.SaveChanges();
        }

    } 
```

这是基本存储库：

```
public class GenericRepository : IRepository
{
  //...   

    public IEnumerable<TEntity> GetAll<TEntity>() where TEntity : class
            {
                return GetQuery<TEntity>().AsEnumerable();
            } 

    public IQueryable<TEntity> GetQuery<TEntity>() where TEntity : class
            {          
                var entityName = GetEntityName<TEntity>();
                return ((IObjectContextAdapter)DbContext).ObjectContext.CreateQuery<TEntity>(entityName);
            }

private string GetEntityName<TEntity>() where TEntity : class
        {
            string entitySetName = ((IObjectContextAdapter)DbContext).ObjectContext
                 .MetadataWorkspace
                 .GetEntityContainer(((IObjectContextAdapter)DbContext).ObjectContext.DefaultContainerName, DataSpace.CSpace)  
                 .BaseEntitySets.First(bes => bes.ElementType.Name == typeof(TEntity).Name).Name;

            return string.Format("{0}.{1}", ((IObjectContextAdapter)DbContext).ObjectContext.DefaultContainerName, entitySetName);
        }

    } 
```

接下来，创建上下文和存储库：

```
var context = new MyContext();
EventRepository repository = new EventRepository(context);
var films = repository.GetAll<Film>(); 
```

但是我得到了异常（在`GetEntityName`方法中）：序列没有元素。
我认为是因为`Film`数据库中没有表。如何解决这个问题呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-25T20:22:13.287

我`GetEntityName`在您显示的存储库中看不到需要。因为`GetQuery`你可以`DbContext`直接使用 API 而不需要访问底层的`ObjectContext`or `MetadataWorkspace`：

```
public IQueryable<TEntity> GetQuery<TEntity>() where TEntity : class
{          
    return DbContext.Set<TEntity>();
} 
```

这将返回一个`DbSet<TEntity>`（它是一个`IQueryable<TEntity>`）。我不是 100% 确定如果`TEntity`派生，这是否也有效，但[MSDN 文档`DbSet<TEntity>`](http://msdn.microsoft.com/en-us/library/gg696460%28v=vs.103%29.aspx)说：“*该类型可以是派生类型以及基类型。* ”所以，我希望该`Set<TEntity>()`方法也允许用于派生类型。

# c# - 获取按下的键

> ID：13552099
> 
> 赞同：1
> 
> 时间：2012-11-25T14:46:30.060
> 
> 标签：c#, keyboard, buffer

我试图从另一个应用程序中获取用户按下的键，但我能得到的只是在没有键盘条件（大写/小写/按下 shift）的情况下按下的键的位置，我想获取实际的键

我的代码：

```
 private const int WH_KEYBOARD_LL = 13;
    private const int WM_KEYDOWN = 0x0100;
    private static LowLevelKeyboardProc _proc = HookCallback;
    private static IntPtr _hookID = IntPtr.Zero;
    private static int enteredChar;
    public static int EnteredChar
    {
        get { return enteredChar; }
    }
    public static void start()
    {
        _hookID = SetHook(_proc);
        Application.Run();

        UnhookWindowsHookEx(_hookID);
    }

    private static IntPtr SetHook(LowLevelKeyboardProc proc)
    {

        using (Process curProcess = Process.GetCurrentProcess())
        using (ProcessModule curModule = curProcess.MainModule)
        {
            return SetWindowsHookEx(WH_KEYBOARD_LL, proc,
                GetModuleHandle(curModule.ModuleName), 0);
        }
    }

    private delegate IntPtr LowLevelKeyboardProc(
        int nCode, IntPtr wParam, IntPtr lParam);

    private static IntPtr HookCallback(
        int nCode, IntPtr wParam, IntPtr lParam)
    {
        if (nCode >= 0 && wParam == (IntPtr)WM_KEYDOWN)
        {
            //  char letter=(char) Marshal.ReadByte(lParam);
           enteredChar = Marshal.ReadInt32(lParam);
              Console.WriteLine((Keys)enteredChar);

        }

        return CallNextHookEx(_hookID, nCode, wParam, lParam);

    }
    public static int returnKey()
    {
        return enteredChar;
    } 
```

# java - Java：添加元素 ArrayList

> ID：13552111
> 
> 赞同：-1
> 
> 时间：2012-11-25T14:47:45.903
> 
> 标签：java, generics, arraylist, nullpointerexception

`NullPointerException`我有这段代码可以准确地告诉我`inizializza()`在线的方法：

```
valori[y].add(new Record(matriceBinaria[i][j], j)); 
```

`valori`如果没有这种例外，我怎样才能将项目添加到？

[代码java](http://pastebin.com/xuxA3hCP)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T14:55:03.617

您还必须按如下方式初始化数组中的每个元素：

```
if (valori[y] == null)
    valori[y] = new ArrayList();

valori[y].add(new Record(matriceBinaria[i][j], j)); 
```

`ArrayList[size]`实际上是一个数组，其中每个元素都是`ArrayList`对象。由于`ArrayList`不是原语，因此您必须使用`new`. 因此，当您`valori[y]`在代码中执行此操作时，您正在访问一个未初始化的（空）对象

# c# - 在两个数组上分布数组

> ID：13552113
> 
> 赞同：-2
> 
> 时间：2012-11-25T14:47:50.027
> 
> 标签：c#

我有一个不同数字（整数）的数组。该数组的长度未设置，因此每次运行程序时它都不同。然后我有另外两个数组，我希望程序评估将第一个数组分配到其他两个数组的所有可能性。例如：

```
Array 1: 1,3,5 
```

现在程序应该制作另外两个数组，例如：

```
Array 2: 1,3
Array 3: 5 
```

或者像这样：

```
Array 2: 1,5
Array 3: 3 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-25T15:07:35.107

将项目的位置视为二进制数字，然后您会看到与项目数具有相同位数的所有二进制数表示所有可能的组合。

因此，对于三个项目，您有 8 种可能的组合：

```
000: [1,3,5], []
001: [3,5], [1]
010: [1,5], [3]
011: [5], [1,3]
100: [1,3], [1]
101: [3], [1,5]
110: [1], [3,5]
111: [], [1,3,5] 
```

您可以使用 计算可能组合的数量`1 << theArray.Length`。

您可以使用以下方法获得特定组合（0 到可能-1）：

```
public static void GetArrays(int[] arr, int combination, out int[] arr1, out int[] arr2) {
  List<int> a = new List<int>();
  List<int> b = new List<int>();
  foreach (int value in arr) {
    if ((combination & 1) == 1) {
      b.add(value);
    } else {
      a.add(value);
    }
    combination >>= 1;
  }
  arr1 = a.ToArray();
  arr2 = b.ToArray();
} 
```

# android - 需要使用上下文 android 解决我的错误

> ID：13552117
> 
> 赞同：0
> 
> 时间：2012-11-25T14:48:33.173
> 
> 标签：android

我有与 web 服务连接的应用程序。当我启动应用程序时，我调用类：

```
public class CaApplication extends Application {

    @Override
    public void onCreate() {
        // TODO Auto-generated method stub
        super.onCreate();
        DataRetrieve dr ;
        ProgressDialog progressBar;

            progressBar = new ProgressDialog(this);

            //progress bar orientation
            progressBar.setProgressStyle(ProgressDialog.STYLE_HORIZONTAL);

            // Text that will appear on the progress bar dialog
            progressBar.setMessage("Loading...");

        //set whether the progress bar is cancelable or not
            progressBar.setCancelable(false);
            progressBar.show();
         dr = new DataRetrieve();
    }
} 
```

我得到错误：

```
11-25 15:39:36.698: E/AndroidRuntime(30429): Caused by: 11-25 15:39:36.698: E/AndroidRuntime(30429): java.lang.RuntimeException: Unable to create application com.example.storeclientdropdown.CambiumApplication: android.view.WindowManager$BadTokenException: Unable to add window -- token null is not for an application
11-25 15:39:36.698: E/AndroidRuntime(30429):    at android.app.ActivityThread.handleBindApplication(ActivityThread.java:3974)
11-25 15:39:36.698: E/AndroidRuntime(30429):    at android.app.ActivityThread.access$1300(ActivityThread.java:127)
11-25 15:39:36.698: E/AndroidRuntime(30429):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1196)
11-25 15:39:36.698: E/AndroidRuntime(30429):    at android.os.Handler.dispatchMessage(Handler.java:99)
11-25 15:39:36.698: E/AndroidRuntime(30429):    at android.os.Looper.loop(Looper.java:137)
11-25 15:39:36.698: E/AndroidRuntime(30429):    at android.app.ActivityThread.main(ActivityThread.java:4441)
11-25 15:39:36.698: E/AndroidRuntime(30429):    at java.lang.reflect.Method.invokeNative(Native Method)
11-25 15:39:36.698: E/AndroidRuntime(30429):    at java.lang.reflect.Method.invoke(Method.java:511)
11-25 15:39:36.698: E/AndroidRuntime(30429):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
11-25 15:39:36.698: E/AndroidRuntime(30429):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
11-25 15:39:36.698: E/AndroidRuntime(30429):    at dalvik.system.NativeStart.main(Native Method)
11-25 15:39:36.698: E/AndroidRuntime(30429): Caused by: android.view.WindowManager$BadTokenException: Unable to add window -- token null is not for an application
11-25 15:39:36.698: E/AndroidRuntime(30429):    at android.view.ViewRootImpl.setView(ViewRootImpl.java:517)
11-25 15:39:36.698: E/AndroidRuntime(30429):    at android.view.WindowManagerImpl.addView(WindowManagerImpl.java:301)
11-25 15:39:36.698: E/AndroidRuntime(30429):    at android.view.WindowManagerImpl.addView(WindowManagerImpl.java:215)
11-25 15:39:36.698: E/AndroidRuntime(30429):    at android.view.WindowManagerImpl$CompatModeWrapper.addView(WindowManagerImpl.java:140)
11-25 15:39:36.698: E/AndroidRuntime(30429):    at android.app.Dialog.show(Dialog.java:278)
11-25 15:39:36.698: E/AndroidRuntime(30429):    at com.example.storeclientdropdown.CambiumApplication.onCreate(CambiumApplication.java:35)
11-25 15:39:36.698: E/AndroidRuntime(30429):    at android.app.Instrumentation.callApplicationOnCreate(Instrumentation.java:969)
11-25 15:39:36.698: E/AndroidRuntime(30429):    at android.app.ActivityThread.handleBindApplication(ActivityThread.java:3971)
11-25 15:39:36.698: E/AndroidRuntime(30429):    ... 10 more 
```

在 DataRetrive 中，我从 web 服务获取所有数据，然后调用 MainActivity。出了什么问题以及如何修复此错误。我尝试：`progressBar = new ProgressDialog(this);`, `progressBar = new ProgressDialog(getApplicationContext());`，`progressBar = new ProgressDialog(getBaseContext);`但没有结果。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-25T14:53:17.677

`Application`不是`Context`，您不能将其用作对话框的基础。

您应该在 MainActivity（即运行的第一个活动）中启动 ProgressBar，而不是在 Application 级别执行此操作。

尝试阅读[开发者网站上的一些优秀文档](http://developer.android.com/reference/android/widget/ProgressBar.html#ProgressBar%28android.content.Context%29)

***编辑：***

据我了解，您正在尝试创建一个启动屏幕，该屏幕将在实际应用程序启动之前起作用。

这是一件非常简单的事情，应该这样做：

```
public class SplashScreen extends Activity {
    @Override
    public void onCreate() {
        super.onCreate();
        DataRetrieve dr ;
        ProgressDialog progressBar;

        progressBar = new ProgressDialog(this);

        //progress bar orientation
        progressBar.setProgressStyle(ProgressDialog.STYLE_HORIZONTAL);

        // Text that will appear on the progress bar dialog
        progressBar.setMessage("Loading...");

       //set whether the progress bar is cancelable or not
        progressBar.setCancelable(false);
        progressBar.show();
        dr = new DataRetrieve(); // THIS SHOULD BE DONE IN AN AsyncTask
        // WHEN DATA IS DONE RETRIEVING
        progressBar.dismiss();
        Intent startApp = new Intent(SplashScreen.this, MainActivity.class);
        startActivity(startApp);
        finish();
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-25T15:07:42.670

正如@thepoosh 提到的，应用程序不是上下文。此外，如果您只想在应用程序启动时执行此操作，则将此代码放在默认活动中的一个函数中（将出现的第一个函数），然后在`onCreate()`. 另外，如果它是您正在执行的阻塞任务，则将其放入另一个`Thread`中，并在您完成计算或下载后关闭 ProgressDialog。

如果您只想在应用程序第一次启动时执行此操作，而不是每次您的第一个活动打开时（由于用户来回遍历），请维护一个静态标志，该标志在下载完成后设置，并且不更新直到需要再次下载。

# javascript - 使用 jQuery UI 的 Javascript 自动完成电子邮件的域

> ID：13552118
> 
> 赞同：2
> 
> 时间：2012-11-25T14:48:33.513
> 
> 标签：javascript, jquery-ui, jquery-autocomplete, jquery-ui-autocomplete

我需要帮助，我一直在尝试使以下案例场景起作用：您有电子邮件输入字段，您输入：foo@y - 它应该弹出自动完成框，提供 yahoo.com（例如）。如果你接受这个建议，最终值应该变成：foo@yahoo.com

我已经编写了这段代码（修改了另一个 jquery UI 示例）：

```
 $( "#tags" )
            // don't navigate away from the field on tab when selecting an item
            .bind( "keydown", function( event ) {
                if ( event.keyCode === $.ui.keyCode.TAB &&
                        $( this ).data( "autocomplete" ).menu.active ) {
                    event.preventDefault();
                }
            })
            .autocomplete({
                minLength: 3,
                source: function( request, response ) {
                            var mail_regex = /^([\w.]+)@([\w.]+)$/;
                            var match = mail_regex.exec(request.term);
                            if (match)
                                var matcher = new RegExp( "^" + match[2], "i" );
                            response( $.grep( availableTags, function( item ){
                                return matcher.test( item );
                            }) );
                 },
                focus: function() {
                    // prevent value inserted on focus
                    return false;
                },
                select: function( event, ui ) {
                    var terms = split( this.value );
                    // remove the current input
                    terms.pop();
                    // add the selected item
                    terms.push( ui.item.value );
                    // add placeholder to get the comma-and-space at the end
                    terms.push( "" );
                    this.value = terms.join( ", " );
                    return false;
                }
            }); 
```

完整的工作交互示例：http: [//jsfiddle.net/rRF2s/3/](http://jsfiddle.net/rRF2s/3/)

但是，它仅用 yahoo.com 替换了 foo@ - 我一生都无法弄清楚如何覆盖这种行为......

任何 Javascript/jQuery 大师 - 请帮助！如何实现这个目标？我试过这样做：return match[1]+matcher.test(item)，但这不起作用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-25T15:06:45.603

这是完整的代码：

```
$(function() {
    var availableTags = [
        "Yahoo.com",
        "Gmail.com"
    ];
    function extractLast( val ) {
        if (val.indexOf("@")!=-1){
            var tmp=val.split("@");
            console.log(tmp[tmp.length-1]);
            return tmp[tmp.length-1];
        }
        console.log("returning empty");
        return "";
    }

    $( "#tags" )
        // don't navigate away from the field on tab when selecting an item
        .bind( "keydown", function( event ) {
            if ( event.keyCode === $.ui.keyCode.TAB &&
                    $( this ).data( "autocomplete" ).menu.active ) {
                event.preventDefault();
            }
        })
        .autocomplete({
            minLength: 1,
            source: function( request, response ) {
                        var mail = extractLast(request.term);
                        if(mail.length<1){return;}
                        var matcher = new RegExp( "^" + mail, "i" );
                        response( $.grep( availableTags, function( item ){
                            return matcher.test( item );
                        }));
             },
            focus: function() {
                // prevent value inserted on focus
                return false;
            },
            select: function( event, ui ) {
                var terms = this.value.split(", ");
                // remove the current input
                var ml=terms[terms.length-1].split("@")[0];
                terms.pop();
                // add the selected item
                terms.push( ml+"@"+ui.item.value );
                // add placeholder to get the comma-and-space at the end
                terms.push( "" );
                this.value = terms.join( ", " );
                return false;
            }
        });
}); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-25T15:07:30.813

该`select`函数将结果值分配给`this.value =`。但是，它完全替换了输入值，而不是将其附加到下拉值中。

如果没有对以下内容进行大量测试，简化的功能似乎可以按要求工作：

```
select: function( event, ui ) {
    this.value = this.value.substring(0, this.value.indexOf('@') + 1) + ui.item.value;
    return false;
} 
```

这是取已输入值的第一部分，例如`foo@`用于输入`foo@ya`，然后从下拉列表中添加所选项目的值。

您可能希望在有人输入`@`符号时触发下拉菜单（对我来说似乎更直观），如果是这样，此功能可能还需要修改以正确提取用户输入的值。

# java - 检查字符串是否包含错误 404

> ID：13552124
> 
> 赞同：1
> 
> 时间：2012-11-25T14:49:40.387
> 
> 标签：java

检查字符串是否包含的简单方法是`error 404`什么？该字符串是从 HttpGet 构建的。

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-25T15:04:05.653

您最好检查状态码，如果状态为 404，则不能保证 HTTP 请求的结果字符串包含错误码。

如果它是 Apache HTTP 客户端（看起来像，因为你提到了`HttpGet`）：

```
get = new HttpGet("http://www.google.com");
response = client.execute(get);
if (response.getStatusLine().getStatusCode() == 404) {
    System.out.println("404 - Not found!");
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-25T14:52:18.900

String 方法[contains](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/String.html#contains%28java.lang.CharSequence%29)怎么样？没有绒毛。如果您想做一些更高级的搜索，可能需要正则表达式。

代码：

```
String s = "Foo error 404 bar";
System.out.println(s.contains('error 404'); 
```

打印`true`。

请注意，这不是查找错误的好方法（例如，请参阅 Udo Klimaschewski 的答案）。

# php - php图像不显示

> ID：13552127
> 
> 赞同：-4
> 
> 时间：2012-11-25T14:50:28.093
> 
> 标签：php, mysql

为什么以下 php 脚本不显示图像。我检查了数据库连接正常，Mysql Query 也正常。

**php代码：**

```
$upload_directory = "uploaded"; //set upload directory

$getimages = mysql_query("SELECT * FROM property_step3 WHERE propertyid =  
'$propertyid' AND active =1 AND uname = '$uname'"); 

$re2 = mysql_fetch_array($getimages)
$images = mysql_real_escape_string(htmlspecialchars(trim($re2['imgname'])));

echo '<img src="$upload_directory/$images" width="98" height="68"  /></a>'; 
```

也许我错了..

**我不明白为什么有些人投票给我 DOWN ??!!**

更新：

```
<?php
 $uname = $_SESSION['uname'];
 $check = mysql_query("SELECT * FROM property_step1 WHERE uname = '$uname' AND active 
 = 1");
 $num = mysql_num_rows($check);

if($num == 0)
{

echo "<h3>You didn't upload any property. Click <a href='publishadvert.php'>here</a> 
to publish your property</h3>";

}
else
{
    echo "<h3>You have $num published property.</h3>";

    echo "<table width='1020' cellpadding='0' cellspacing='0'>";
        echo "<tr>";
    echo "<td class='tabletr3'><b>Property Title</b></td>";
    echo "<td class='tabletr3'><b>Area</b></td>";
    echo "<td class='tabletr3'><b>State</b></td>";
        echo "<td class='tabletr3'><b>City</b></td>";
    echo "<td class='tabletr3'><b>Country</b></td>";            
    echo "<td class='tabletr3'><b>Images</b></td>";         
    echo "<td class='tabletr3'><b>Action</b></td>";         
    echo "</tr>";

    while($re = mysql_fetch_array($check))
    {
$propertyid = (int) $re['propertyid'];  
$country = mysql_real_escape_string(htmlspecialchars(trim($re['pro_country'])));
$state = mysql_real_escape_string(htmlspecialchars(trim($re['pro_state'])));
$area = mysql_real_escape_string(htmlspecialchars(trim($re['pro_area'])));
$city = mysql_real_escape_string(htmlspecialchars(trim($re['pro_city'])));
$title = mysql_real_escape_string(htmlspecialchars(trim($re['pro_title'])));

 $getimages = mysql_query("SELECT * FROM property_step3 WHERE propertyid = 
 '$propertyid' AND active =1 AND uname = '$uname'");

    $upload_directory = dirname(__file__) . '/uploaded/'; //set upload directory    
while($re2 = mysql_fetch_array($getimages))
{
$images = mysql_real_escape_string(htmlspecialchars(trim($re2['imgname'])));
}

        echo "<tr>";
            echo "<td class='tabletr2'>$title</td>";
            echo "<td class='tabletr2'>$country</td>";
            echo "<td class='tabletr2'>$state</td>";
            echo "<td class='tabletr2'>$city</td>";
            echo "<td class='tabletr2'>$area</td>";     
                  echo '<img src="'.$upload_directory.'/'.$images.'" width="98" 
 height="68"  /></a>';      

echo "<td class='tabletr2'><img src='uploaded/$images' 
/></td>";                               
echo "<td class='tabletr2'><a href='editproperty.php?propertyid=$propertyid&
uname=$uname'>Edit</a> | <a href='deleteproperty.php?propertyid=$propertyid'>Delete</a>
</td>";
    echo "</tr>";
    }  
    echo "</table>";

     }
 ?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T15:17:59.823

**错误 1**：Waqar Alamgir 所说的，但更明确。尝试在单引号中使用变量。

```
echo '<img src="$upload_directory/$images" width="98" height="68"  /></a>'; 
```

将输出

```
<img src="$upload_directory/$images" width="98" height="68"  /></a> 
```

然而

```
echo "<img src=\"$upload_directory/$images\" width=\"98\" height=\"68\"  /></a>"; 
```

或者

```
echo '<img src="'. $upload_directory . '/' . $images .'" width="98" height="68"  /></a>'; 
```

或者

```
echo '<img src="', $upload_directory, '/', $images, '" width="98" height="68"  /></a>'; 
```

将输出

```
<img src="uploaded/theimagename.jpg" width="98" height="68"  /></a> 
```

哪里`$images`等于`theimagename.jpg`

**错误 2：（**由 Pankaj Khairnar 发现）

```
$re2 = mysql_fetch_array($getimages) 
```

缺少一个分号。这会破坏你的脚本。

```
$re2 = mysql_fetch_array($getimages); 
```

**错误 3** (c/o Michael Berkowski)

不要在输出数据上调用 mysql_real_escape_string()

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-25T15:00:27.240

像这样使用

```
$upload_directory = "uploaded"; //set upload directory
$getimages = mysql_query("SELECT * FROM property_step3 WHERE propertyid =  
'$propertyid' AND active =1 AND uname = '$uname'"); 

$re2 = mysql_fetch_array($getimages);
$images = trim($re2['imgname']);
echo '<img src="'.$upload_directory.'/' .$images. '" width="98" height="68"  /></a>'; 
```

还 ; 最后在您的声明中丢失

```
$re2 = mysql_fetch_array($getimages) 
```

应该是这样的

```
$re2 = mysql_fetch_array($getimages); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-25T15:06:09.847

引号问题您不能在单个 ' 中使用变量

```
$upload_directory = "uploaded";
$getimages = mysql_query("SELECT imgname FROM property_step3 WHERE propertyid =  
'$propertyid' AND active =1 AND uname = '$uname'"); 
$re2 = mysql_fetch_assoc($getimages)
$images = $re2['imgname'];
echo 'Debug image: ',$images;

echo '<a href="#"><img src="',$upload_directory,'/',$images,'" width="98" height="68"  /></a>'; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-25T15:10:45.220

也许您需要完整的网址来显示图像，例如添加

`http://localhost/.../uploaded/50b11aefaad43font-8.jpg`

我不确定您机器上的目录层次结构。

我假设“上传”文件夹位于您的 htdocs 根目录中。

# javascript - 如何在没有 jquery 的情况下使这个（可滚动的 div）工作？

> ID：13552134
> 
> 赞同：0
> 
> 时间：2012-11-25T14:51:35.420
> 
> 标签：javascript

我一直在制作一个网页，并且我有一个需要一些 javascript 的功能（使固定的 div 可滚动），我找到了一种让它与 jquery 一起工作但没有它就无法工作的方法。任何帮助，将不胜感激。这是代码：

```
<script type='text/javascript' src='http://code.jquery.com/jquery-1.6.1.min.js'></script>
<script type='text/javascript'>
  // A globar variable to save to last element that the following class was applied to
  var Last;
  // This adds the class "ttth" so that tt the class "tt" will be displayed.
  $(".tttw").live('touchstart', function() {
    if (Last) Last.removeClass('ttth');
    $(this).addClass("ttth");
    Last=$(this);
  });
  // Test if we have a touchdevice.
  function isTouchDevice(){
    try{
      document.createEvent("TouchEvent");
      return true;
    }catch(e){
      return false;
    }
  }
  // This function makes a fixed div on touch devices scrollable.
  function touchScroll(selector) {
    if (isTouchDevice()) {
      var scrollStartPosY=0;
      var scrollStartPosX=0;
      $('body').delegate(selector, 'touchstart', function(e) {
        scrollStartPosY=this.scrollTop+e.originalEvent.touches[0].pageY;
        scrollStartPosX=this.scrollLeft+e.originalEvent.touches[0].pageX;
      });
      $('body').delegate(selector, 'touchmove', function(e) {
        if ((this.scrollTop < this.scrollHeight-this.offsetHeight &&
          this.scrollTop+e.originalEvent.touches[0].pageY < scrollStartPosY-5) ||
          (this.scrollTop != 0 && this.scrollTop+e.originalEvent.touches[0].pageY > scrollStartPosY+5))
          e.preventDefault();
        if ((this.scrollLeft < this.scrollWidth-this.offsetWidth &&
          this.scrollLeft+e.originalEvent.touches[0].pageX < scrollStartPosX-5) ||
          (this.scrollLeft != 0 && this.scrollLeft+e.originalEvent.touches[0].pageX > scrollStartPosX+5))
          e.preventDefault();
        this.scrollTop=scrollStartPosY-e.originalEvent.touches[0].pageY;
        this.scrollLeft=scrollStartPosX-e.originalEvent.touches[0].pageX;
      });
    }
  }
  // Touch is being initialised.
  $(document).ready(function(){
    touchScroll('.tt');
  });
</script> 
```

这段代码已经在工作，但为了减少加载时间，我想摆脱 jQuery。怎么做？例如 - 我如何选择所有类“tttw”并添加一个事件监听器？

任何帮助，粗略的方向等都会很棒！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T22:14:05.247

好的 - 我自己找到了答案。我是这样做的：

```
function touchScrolli(selector) {
    if (isTouchDevice()) { 
    var scrollStartPosY=0;
    var scrollStartPosX=0;
    var list = document.querySelectorAll(selector);
    for (var i = 0; i < list.length; i++) {
    list[i].addEventListener('touchstart', function (e) {
    scrollStartPosY=this.scrollTop+e.touches[0].pageY;
    scrollStartPosX=this.scrollLeft+e.touches[0].pageX;
    e.preventDefault();
    }, false);
    list[i].addEventListener('touchmove', function (e) {
    if ((this.scrollTop < this.scrollHeight-this.offsetHeight &&
    vthis.scrollTop+e.touches[0].pageY < scrollStartPosY-5) ||
    (this.scrollTop != 0 && this.scrollTop+e.touches[0].pageY > scrollStartPosY+5))
    e.preventDefault();
    if ((this.scrollLeft < this.scrollWidth-this.offsetWidth &&
    this.scrollLeft+e.touches[0].pageX < scrollStartPosX-5) ||
    (this.scrollLeft != 0 && this.scrollLeft+e.touches[0].pageX > scrollStartPosX+5))
    e.preventDefault();
    this.scrollTop=scrollStartPosY-e.touches[0].pageY;
    this.scrollLeft=scrollStartPosX-e.touches[0].pageX;
    });
    }
    }
} 
```

只需要知道如何在没有 jQuery 的情况下选择所有类。

# c - C 编程：数组和指针

> ID：13552140
> 
> 赞同：0
> 
> 时间：2012-11-25T14:52:34.283
> 
> 标签：c, pointers

> **可能重复：**
> [数组名称是 C 中的指针吗？](https://stackoverflow.com/questions/1641957/is-array-name-a-pointer-in-c)

如果我定义：

```
int tab[4]; 
```

tab 是一个指针，因为如果我显示选项卡：

```
printf("%d", tab); 
```

上面的代码将显示内存中第一个元素的地址。

这就是为什么我想知道为什么我们不定义如下数组：

```
int *tab[4]; 
```

因为 tab 是一个指针。

感谢您的任何帮助！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-25T14:54:18.483

> tab 是一个指针

不，`tab`是一个数组。一个`int[4]`要具体。但是，当您将它作为参数传递给函数（以及在许多其他上下文中）时，数组将转换为指向其第一个元素的指针。您可以看到数组和指针之间的区别，例如当您调用`sizeof array`vs.`sizeof pointer`时，当您尝试分配给数组时（不会编译）等等。

```
int *tab[4]; 
```

声明一个由四个指向`int`. 我看不出这与数组和指针之间的混淆有什么关系。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-25T14:55:54.510

`tab`不是指针，它是一个由 4 个整数组成的数组，当传递给函数时，它*会衰减*为指向第一个元素的指针：

```
int tab[4]; 
```

这是另一个数组，但它包含 4 个整数指针：

```
int *tab[4]; 
```

最后，为了完整起见，这是一个指向 4 个整数数组的指针，如果你取消引用它，你会得到一个 4 个整数数组：

```
int (*tab)[4]; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-25T15:00:11.733

你并没有完全错，这意味着你的陈述是错误的，但你离事实并不远。

C下的数组和指针共享相同的算法，但主要区别在于数组是容器，指针就像任何其他原子变量一样，它们的目的是存储内存地址并提供有关指向值类型的信息。

我建议阅读一些关于`pointer arithmetic`

*   [指针算术](https://stackoverflow.com/questions/394767/pointer-arithmetic)
*   [http://www.learncpp.com/cpp-tutorial/68-pointers-arrays-and-pointer-arithmetic/](http://www.learncpp.com/cpp-tutorial/68-pointers-arrays-and-pointer-arithmetic/)

* * *

考虑到[Steve Jessop 的评论](https://stackoverflow.com/questions/13552140/c-programming-arrays-and-pointers#comment18562945_13552201)，我想添加一个片段，可以向您介绍指针运算的简单而有效的世界：

```
#include <stdio.h>

int main()
{
  int arr[10] = {10,11,12,13,14,15,16,17,18,19};
  int pos = 3;

  printf("Arithmetic part 1 %d\n",arr[pos]);

  printf("Arithmetic part 2 %d\n",pos[arr]);

  return(0);
} 
```

数组的行为可以像指针，甚至在您的情况下看起来像指针，您可以应用相同类型的算术，因为它们不是指针。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-25T14:54:17.883

```
int *tab[4]; 
```

这个定义意味着`tab`数组包含`pointers of int`而不是`int`

来自[C 标准](http://www.coding-guidelines.com/cbook/cbook1_0b.pdf)

> **编码指南**
> 
> 数组对象到指向其第一个元素的指针的隐式转换对于尝试在 C 中为数组制定更强大的类型检查是一个很大的不便。在 C 语言中，缺乏经验的开发人员有时将数组和指针等同于比这允许的更接近要求（适用于表达式中的使用，而不是声明）。例如，在：

**文件_1.c**

```
extern int *a; 
```

**文件_2.c**

```
extern int a[10]; 
```

> 开发人员有时错误地认为 a 的两个声明是兼容的。很难看出什么样的指南推荐会克服不正确的开发人员假设（或培训不足）。如果遵循指定单点声明的指南建议，则不会出现在一个文件中声明的 419.1 标识符。与函数指示符的用法不同，开发人员熟悉这样一个事实，即具有转换为 typetype 的数组函数指示符的对象会隐式转换为指向其第一个元素的指针。将一元 & 运算符应用于具有数组类型的操作数是否会为读者提供有用的视觉提示，或者让他们怀疑作者的意图（“那个冗余运算符在那里做什么？”）尚不清楚。

例子

```
static double a[5];

void f(double b[5])
{
    double (*p)[5] = &a;
    double **q = &b; /* This looks suspicious, */

    p = &b; /* and so does this. */
    q = &a;
} 
```

如果数组对象具有寄存器存储类，则行为未定义

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-25T18:23:39.770

在大多数情况下，数组类型的*表达式*将被转换（“衰减”）为指针类型的表达式，表达式的值将是数组中第一个元素的地址。此规则的例外情况是数组表达式是 、 或一元运算符的操作数`sizeof`，`_Alignof`或者`&`是用于在声明中初始化另一个数组的字符串文字。

```
int tab[4]; 
```

if定义`tab`为 4 元素数组`int`。在声明中

```
printf("%d", tab); // which *should* be printf("%p", (void*) tab); 
```

*表达式* `tab`从类型“4 元素数组”转换为`int`“指针`int`”。

# git - 更改 Git 历史记录中的电子邮件地址

> ID：13552143
> 
> 赞同：12
> 
> 时间：2012-11-25T14:53:08.573
> 
> 标签：git, git-filter-branch

我已经在 git 存储库上工作了一段时间并做了一些提交。我一直在我的 php 文件中使用文档块，包括我的私人电子邮件地址，如下所示：

```
/**
 * Bla bla bla.
 * 
 * @author:      Nic <foo@bar.com>
 */ 
```

现在我创建了一个新的电子邮件地址并更新了文档块，用新地址替换了旧地址。但是这种更改仅适用于我更改文档之后的提交。

如何从 git 的历史记录中完全删除旧的电子邮件地址并用新地址替换所有实例？

我曾尝试使用[此博客文章](http://kvz.io/blog/2009/11/08/git-migration-remove-passwords-from-history/)使用 git filter-branch但没有成功。我得到以下结果：

```
git filter-branch --tree-filter 'git ls-files -z "*.php" |xargs -0 perl -p -i -e "s#old-email@example.com#new-email@foobar.com#g"' -- --all
Usage: git core\git-filter-branch [--env-filter <command>] [--tree-filter <command>]
        [--index-filter <command>] [--parent-filter <command>]
        [--msg-filter <command>] [--commit-filter <command>]
        [--tag-name-filter <command>] [--subdirectory-filter <directory>]
        [--original <namespace>] [-d <directory>] [-f | --force]
        [<rev-list options>...] 
```

会不会是电子邮件地址的特殊字符（@ 和 .）弄乱了正则表达式？除此之外，我不知道出了什么问题，任何帮助表示赞赏！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-25T15:02:47.420

另一种选择是以这种方式尝试过滤器分支：

```
git filter-branch --commit-filter 'if [ "$GIT_AUTHOR_NAME" = "Nick NLD" ];
  then export GIT_AUTHOR_EMAIL=your_new_email@example.com;
  fi; git commit-tree "$@"' 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2020-09-06T18:48:58.063

看到Git开始显示

```
WARNING: git-filter-branch has a glut of gotchas […] use an
     alternative filtering tool such as 'git filter-repo'
     (https://github.com/newren/git-filter-repo/) instead. 
```

[等效](https://htmlpreview.github.io/?https://github.com/newren/git-filter-repo/blob/docs/html/git-filter-repo.html#CALLBACKS)的命令是：

```
git-filter-repo --email-callback \
    'return email.replace(b"old@dusty.tld", b"new@shiny.tld")' 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-11-25T15:36:43.500

我不知道您为什么会收到使用情况消息。复制并粘贴您的命令让过滤器分支为我运行。但是，它实际上并没有修改任何文件。这确实是因为`@`电子邮件地址中的字符导致 perl 将`@email`其视为列表变量并将其替换为（不存在的）内容。所以正则表达式正在寻找`old-email.com`.

这可以通过使用`\@`代替`@`perl 命令中的符号来解决。旧`.`电子邮件地址中的 是正则表达式的特殊字符，但它会与其他任何内容一起匹配自身。在这种情况下，模式的其余部分可能足够严格以至于这无关紧要，所以你可能真的不需要逃避它。

# iphone - 打开 SSL 和 P12

> ID：13552147
> 
> 赞同：0
> 
> 时间：2012-11-25T14:53:32.757
> 
> 标签：iphone

我正在尝试使用服务电话差距构建，他们要求提供 p.12 文件。我目前似乎只有一个证书文件。

我从 Mac 获得了这个文件，并且我正在尝试从 Windows PC 上传。

有人对此有任何指导吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-25T14:57:03.450

您可以通过在 mac 上打开钥匙串访问并从左侧列表中选择证书来创建 p12 文件找到您的证书，右键单击并选择导出。我希望这能解决问题:)

# ios - 是否可以更改调用 didOutputSampleBuffer 委托的速率？

> ID：13552149
> 
> 赞同：0
> 
> 时间：2012-11-25T14:53:53.763
> 
> 标签：ios, camera

我正在尝试处理回调返回的相机帧`didOutputSampleBuffer`，并且我想要高帧率来捕捉图像中的突然变化（如闪光灯熄灭）。调用回调的速率似乎与为连接设置的帧速率无关。即使我将帧速率设置为 60 via `videoOut.minFrameDuration = CMTimeMake(1, 60);`，两个连续的 didOutputSampleBuffer 之间的间隔似乎在 60 - 80mS 左右（这是大约 17 - 12fps 的帧速率。为什么会这样？是否可以增加它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T11:24:27.580

看起来我已经找到了问题的答案。基本上，帧速率受用于选择图像分辨率的预设的影响。因此对于 1MP 分辨率，您可以获得比 8MP 等更快的帧速率。因此，即使您尝试将 minFrameDuration 设置为 160，硬件也会根据您的分辨率设置（可能为 15 或更低的 fps）为您提供所能提供的功能。

因此，要增加 FPS，请在增加 minFrameDuration 属性的同时降低分辨率。

# matlab - [ab]=cholcov 函数为对称正定矩阵返回 a=[] 和 b=NaN

> ID：13552150
> 
> 赞同：0
> 
> 时间：2012-11-25T14:53:59.690
> 
> 标签：matlab, matrix, decomposition

我有这个矩阵：

```
S=   6.84370358358718e-006    -7.45833473076585e-007
    -7.45833473076565e-007     7.11723106043725e-006 
```

它是对称的：

```
S-S'=                     0    -2.00111533788828e-020
      2.00111533788828e-020                         0 
```

并且是正定的：

```
eig(S)= 6.22219831321029e-006    and     7.73873633081414e-006 
```

当我使用`[a b]=cholcov(S)`时，它返回返回`a=[]`和`b=NaN`。它是用 MatLab 帮助编写的`[T,num] = cholcov(SIGMA)`...`If SIGMA is not square and symmetric, num is NaN and T is empty.`

当然，`chol(S)`函数分解这个函数没有任何错误。我不知道和之间的区别`chol`并不`cholcov`重要，因为我没有任何选择。`mvnrnd(zeros(1,2),S)`当我尝试生成一些随机数时，错误来自函数：

`??? Error using ==> mvnrnd at 118
SIGMA must be a symmetric positive semi-definite matrix.`

谁能告诉我这里有什么问题？谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-25T15:09:30.490

它几乎是对称的。你自己承认它不是对称的。几乎怀孕和怀孕一样吗？你证明了 S~=S'。修复很容易。

```
S = (S + S')/2; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-25T15:09:15.117

你写了：

```
S-S'=                     0    -2.00111533788828e-020
      2.00111533788828e-020                         0 
```

这就是说 S*不是*对称的。它几乎是对称的。但是……不完全是。如果这是由于数字引起的，您可以通过以下方式解决此问题：

```
symmetricS = mean(cat(3,S,S'),3); 
```

# java - 更新和处理在 JSF 2.0 Primefaces 3.4 中无法正常工作

> ID：13552159
> 
> 赞同：0
> 
> 时间：2012-11-25T14:54:46.027
> 
> 标签：java, jsf, jsf-2, primefaces

在此页面中，我将让用户通过单击复选框使密码可见。实际上，两个输入 ( `password`, `conPassword`) 应该隐藏，另一个输入 (passwordV) 应该显示。所有这 3 个输入具有相同的值，并且需要在用户在这两种状态之间切换时保持它们的值：（具有两个可见的秘密字段或具有一个纯文本字段）

我把页面和bean代码放在​​这里：

JSF 页面：

```
<?xml version='1.0' encoding='UTF-8' ?> <!DOCTYPE composition PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"> <ui:composition xmlns:ui="http://java.sun.com/jsf/facelets"
                template="./templates/main_template.xhtml"
                xmlns:p="http://primefaces.org/ui"
                xmlns:h="http://java.sun.com/jsf/html"
                xmlns:f="http://java.sun.com/jsf/core"
                xmlns="http://www.w3.org/1999/xhtml">

  <ui:define name="subTitle">
    :: #{lbls.newEntry}   </ui:define>

  <ui:define name="content">
    <p:panel rendered="#{current.loggedIn}" header="#{lbls.newEntry}" >
      <h:form id="frmEntry">
        <h:panelGrid columns="3">

          <h:panelGroup>
            <h:outputLabel for="title" value="#{lbls.title}:"/>
            <p:focus for="title"/>
          </h:panelGroup>
          <p:inputText id="title" value="#{entry.passwordEntry.title}" maxlength="100" label="#{lbls.title}" required="true"/>
          <p:message for="title"/>

          <h:outputLabel for="description" value="#{lbls.description}:"/>
          <p:inputTextarea id="description" value="#{entry.passwordEntry.description}" maxlength="500" rows="3" cols="40" label="#{lbls.description}"/>
          <p:message for="description"/>

          <p:spacer height="10"/>
          <p:spacer height="10"/>
          <p:spacer height="10"/>

          <h:outputLabel for="username" value="#{lbls.username}:"/>
          <p:inputText id="username" value="#{entry.passwordEntry.username}" maxlength="100" label="#{lbls.username}"/>
          <p:message for="username"/>          

          <h:outputLabel for="password" id="lblPassword" value="#{lbls.password}:"  styleClass="#{entry.showPasswords ? 'none' : ''}" />  
          <p:password id="password" feedback="true" value="#{entry.passwordEntry.password}" match="conPassword" maxlength="100" 
                      label="#{lbls.password}" promptLabel="#{lbls.strengthPromp}" weakLabel="#{lbls.weakPassword}"  
                      goodLabel="#{lbls.goodPassword}" strongLabel="#{lbls.strongPassword}" styleClass="#{entry.showPasswords ? 'none' : ''}"
                      />
          <p:message id="msgPassword" for="password" class="#{entry.showPasswords ? 'none' : ''}"/>

          <h:outputLabel id="lblConPassword" for="conPassword" value="#{lbls.conPassword}:"
                         styleClass="#{entry.showPasswords ? 'none' : ''}"/>  
          <p:password id="conPassword" value="#{entry.passwordEntry.password}" label="#{lbls.conPassword}" maxlength="100"
                      styleClass="#{entry.showPasswords ? 'none' : ''}"/>
          <p:message id="msgConPassword" for="conPassword" class="display: #{!entry.showPasswords ? 'none' : ''}"/>

          <h:outputLabel id="lblPasswordV" for="passwordV" value="#{lbls.password}:" 
                         styleClass="#{!entry.showPasswords ? 'none' : ''}"/>  
          <p:inputText id="passwordV" value="#{entry.passwordEntry.password}"  maxlength="100" 
                       label="#{lbls.password}" 
                       styleClass="#{!entry.showPasswords ? 'none' : ''}"/>
          <p:message id="msgPasswordV" for="passwordV" 
                     class="#{!entry.showPasswords ? 'none' : ''}"/>

          <h:outputLabel for="showPasswords" value="#{lbls.showPasswords}:"/>
          <p:selectBooleanCheckbox id="showPasswords" label="#{lbls.showPasswords}" value="#{entry.showPasswords}">  
            <p:ajax process="password passwordV conPassword" update="password passwordV conPassword lblPassword lblPasswordV lblConPassword msgPassword msgConPassword msgPasswordV"/>
          </p:selectBooleanCheckbox>
          <h:outputText/>

          <p:spacer height="10"/>
          <p:spacer height="10"/>
          <p:spacer height="10"/>

          <h:outputLabel for="url" value="#{lbls.url}:"/>
          <p:inputText id="url" value="#{entry.passwordEntry.url}" maxlength="255" label="#{lbls.url}"/>
          <p:message for="url"/>

          <h:outputLabel for="ip" value="#{lbls.ip}:"/>
          <p:inputText id="ip" value="#{entry.passwordEntry.ip}" maxlength="255" label="#{lbls.ip}"/>
          <p:message for="ip"/>

          <p:spacer height="10"/>
          <p:spacer height="10"/>
          <p:spacer height="10"/>

          <h:outputLabel for="tags" value="#{lbls.tags}:"/>
          <p:autoComplete id="tags" value="#{entry.selectedTags}" 
                          completeMethod="#{entry.selectTag}" converter="PasswordEntry" multiple="true"
                          var="tag" itemLabel="#{tag.title}" itemValue="#{tag}" />  
          <p:message for="tags"/>

          <p:spacer height="10"/>
          <p:spacer height="10"/>
          <p:spacer height="10"/>

          <h:outputText/>
          <h:panelGroup layout="block" styleClass="right-align">
            <p:commandButton value="#{lbls.save}" actionListener="#{entry.save(event)}" 
                             update=":growl messages"/>
          </h:panelGroup>

          <f:facet name="footer">
            <p:messages id="messages"/>
          </f:facet>
        </h:panelGrid>
      </h:form>
    </p:panel>

    <ui:include src="/templates/not_logged_in.xhtml" rendered="!#{current.loggedIn}"/>   </ui:define>

</ui:composition> 
```

**和豆：**

```
package package;

@ManagedBean(name = "entry")
@ViewScoped
public class PasswordEntryBean implements Serializable {

  //<editor-fold defaultstate="collapsed" desc="FIELDS">   
  private static final Logger logger = LogUtil.getLogger(PasswordEntryBean.class);
  private PasswordEntry passwordEntry;
  @ManagedProperty(value = "#{current}")
  private CurrentSessionBean current;
  private Database database;
  private List<PasswordTag> selectedTags = new ArrayList<PasswordTag>();
  private Set<PasswordTag> tags;
  private boolean showPasswords;
  //</editor-fold>  

  //<editor-fold defaultstate="collapsed" desc="CONSTRUCTORS">    
  public PasswordEntryBean() {
    passwordEntry = new PasswordEntry();
  }

  @PostConstruct
  public void init() {
  }
  //</editor-fold>

  //<editor-fold defaultstate="collapsed" desc="PROPERTIES">    
  public PasswordEntry getPasswordEntry() {
    return passwordEntry;
  }

  public Database getDatabase() {
    return database;
  }

  public boolean getShowPasswords() {
    return showPasswords;
  }

  public void setShowPasswords(boolean showPasswords) {
    this.showPasswords = showPasswords;
  }

  public void setDatabase(Database database) {
    this.database = database;
  }

  public Set<PasswordTag> getTags() {
    return tags;
  }

  public void setTags(Set<PasswordTag> tags) {
    this.tags = tags;
  }

  public List<PasswordTag> getSelectedTags() {
    return selectedTags;
  }

  public void setSelectedTags(List<PasswordTag> selectedTags) {
    this.selectedTags = selectedTags;
  }

  public void setPasswordEntry(PasswordEntry passwordEntry) {
    this.passwordEntry = passwordEntry;
  }

  public CurrentSessionBean getCurrent() {
    return current;
  }

  public void setCurrent(CurrentSessionBean current) {
    this.current = current;
  }
  //</editor-fold>
} 
```

* * *

更新代码

* * *

我只是写了一个更简单的代码，以便您更容易理解我的问题：

JSF：

```
<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:p="http://primefaces.org/ui"
      xmlns:f="http://java.sun.com/jsf/core">
  <h:head>
    <title>Facelet Title</title>
    <style type="text/css">
      .none {
        display: none;
      }
    </style>
  </h:head>
  <h:body>
    <h1>Register</h1>
    <h:form id="frmRegistration">
      <h:panelGrid columns="3">
        <h:outputLabel value="Username:" for="username"/>
        <p:inputText label="username" id="username" value="#{testBean.username}" required="true"/>
        <p:message for="username"/>

        <h:outputLabel value="Password:" id="lblPassword" for="password" styleClass="#{!testBean.visiblePassword ? '' : 'none'}"/>
        <p:password label="password" id="password" value="#{testBean.password}" 
                        styleClass="#{!testBean.visiblePassword ? '' : 'none'}"/>
        <p:message for="password" id="msgPassword" class="#{!testBean.visiblePassword ? '' : 'none'}"/>

        <h:outputLabel value="Confirm Password:" id="lblCpassword" for="cpassword" styleClass="#{!testBean.visiblePassword ? '' : 'none'}"/>
        <p:password label="confirm password" id="cpassword" value="#{testBean.password}" 
                        styleClass="#{!testBean.visiblePassword ? '' : 'none'}"/>
        <p:message for="cpassword" id="msgCpassword" class="#{!testBean.visiblePassword ? '' : 'none'}"/>

        <h:outputLabel value="Password:" id="lblVpassword" for="vpassword" styleClass="#{testBean.visiblePassword ? '' : 'none'}"/>
        <p:inputText label="password" id="vpassword" value="#{testBean.password}" 
                        styleClass="#{testBean.visiblePassword ? '' : 'none'}"/>
        <p:message for="vpassword" id="msgVpassword" class="#{testBean.visiblePassword ? '' : 'none'}"/>

        <h:outputLabel value="Show password"/>
        <p:selectBooleanButton value="#{testBean.visiblePassword}" 
                               onLabel="Yes" offLabel="No">
          <p:ajax update="messages password cpassword vpassword lblPassword lblCpassword lblVpassword msgPassword msgCpassword msgVpassword"
                   process="messages password cpassword vpassword" listener="#{testBean.addMessage}" />
        </p:selectBooleanButton>

        <f:facet name="footer">
          <p:commandButton actionListener="#{testBean.save(event)}" value="Save" update="messages"/>
          <p:messages id="messages"/>
        </f:facet>
      </h:panelGrid>
    </h:form>
  </h:body>
</html> 
```

和豆：

```
import javax.faces.application.FacesMessage;
import javax.faces.bean.ManagedBean;
import javax.faces.bean.ViewScoped;
import javax.faces.context.FacesContext;
import javax.faces.event.ActionEvent;

@ManagedBean
@ViewScoped
public class TestBean {

  private String username;
  private String password;
  private boolean visiblePassword;

  public void addMessage() {
    String summary = visiblePassword ? "Checked" : "Unchecked";

    FacesContext.getCurrentInstance().addMessage(null, new FacesMessage(summary));
  }

  public TestBean() {
  }

  public void save(ActionEvent event) {
  }

  public String getUsername() {
    return username;
  }

  public void setUsername(String username) {
    this.username = username;
  }

  public String getPassword() {
    return password;
  }

  public void setPassword(String password) {
    this.password = password;
  }

  public boolean isVisiblePassword() {
    return visiblePassword;
  }

  public void setVisiblePassword(boolean visiblePassword) {
    this.visiblePassword = visiblePassword;
  }
} 
```

如果我不向标签添加**进程**属性，此代码可以隐藏两个字段并正确显示第三个字段`<p:ajax`。但是，当用户在两种模式之间切换时，需要此属性以使这些字段保持其值（2 个秘密字段/1 个纯文本字段）

**但它失败了！**

==================================================== ========

**第二次更新**

我使用了重新显示并解决了空值的问题，但输入仍然不会隐藏/显示，除非我将`update`and`process`设置`@form`为不适合我的情况。

```
<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:p="http://primefaces.org/ui"
      xmlns:f="http://java.sun.com/jsf/core">
  <h:head>
    <title>Facelet Title</title>
    <style type="text/css">
      .none {
        display: none;
      }
    </style>
  </h:head>
  <h:body>
    <h1>Register</h1>
    <h:form id="frmRegistration">
      <h:panelGrid columns="3">
        <h:outputLabel value="Username:" for="username"/>
        <p:inputText label="username" id="username" value="#{testBean.username}" required="true"/>
        <p:message for="username"/>

        <h:outputLabel value="Password:" id="lblPassword" for="password" rendered="#{!testBean.visiblePassword}"/>
        <p:password redisplay="true" label="password" id="password" value="#{testBean.password}" 
                        rendered="#{!testBean.visiblePassword}"/>
        <p:message for="password" id="msgPassword" rendered="#{!testBean.visiblePassword}"/>

        <h:outputLabel value="Confirm Password:" id="lblCpassword" for="cpassword" rendered="#{!testBean.visiblePassword}"/>
        <p:password redisplay="true" label="confirm password" id="cpassword" value="#{testBean.password}" 
                        rendered="#{!testBean.visiblePassword}"/>
        <p:message for="cpassword" id="msgCpassword" rendered="#{!testBean.visiblePassword}"/>

        <h:outputLabel value="Password:" id="lblVpassword" for="vpassword" rendered="#{testBean.visiblePassword}"/>
        <p:inputText label="password" id="vpassword" value="#{testBean.password}" 
                        rendered="#{testBean.visiblePassword}"/>
        <p:message for="vpassword" id="msgVpassword" rendered="#{testBean.visiblePassword}"/>

        <h:outputLabel value="Show password"/>
        <p:selectBooleanButton value="#{testBean.visiblePassword}" 
                               onLabel="Yes" offLabel="No">
          <p:ajax update="messages password cpassword vpassword lblPassword lblCpassword lblVpassword msgPassword msgCpassword msgVpassword"
                   process="password cpassword vpassword" listener="#{testBean.addMessage}" />
        </p:selectBooleanButton>

        <f:facet name="footer">
          <p:commandButton actionListener="#{testBean.save(event)}" value="Save" update="messages"/>
          <p:messages id="messages"/>
        </f:facet>
      </h:panelGrid>
    </h:form>
  </h:body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T15:11:09.387

问题是您将同一个变量绑定`entry.passwordEntry.password`到 2 个或更多字段，因此当提交`<h:form>`这些字段中的唯一一个值时，将设置为`entry.passwordEntry.password`，其他值将被丢弃。

解决此问题的最佳方法是为您在表单上拥有/需要的每个字段设置不同的变量。通过查看您的代码，看起来可以通过`PasswordEntry`在 bean 中具有 3 个属性来实现：

```
@ManagedBean(name = "entry")
@ViewScoped
public class PasswordEntryBean implements Serializable {
    //other attributes...
    private PasswordEntry passwordEntry;
    private PasswordEntry passwordEntryV;
    private PasswordEntry conPasswordEntry;

    //<editor-fold defaultstate="collapsed" desc="CONSTRUCTORS">    
    public PasswordEntryBean() {
        passwordEntry = new PasswordEntry();
        passwordEntryV = new PasswordEntry();
        conPasswordEntry = new PasswordEntry();
    }

    //getters and setters...
} 
```

JSF 代码：

```
<p:password id="password" feedback="true" value="#{entry.passwordEntry.password}"
    match="conPassword" maxlength="100" label="#{lbls.password}"
    promptLabel="#{lbls.strengthPromp}" weakLabel="#{lbls.weakPassword}"
    goodLabel="#{lbls.goodPassword}" strongLabel="#{lbls.strongPassword}"
    styleClass="#{entry.showPasswords ? 'none' : ''}" />

<p:password id="conPassword" value="#{entry.conPasswordEntry.password}"
    label="#{lbls.conPassword}" maxlength="100"
    styleClass="#{entry.showPasswords ? 'none' : ''}"/>

<p:inputText id="passwordV" value="#{entry.passwordEntryV.password}"
    maxlength="100" label="#{lbls.password}"
    styleClass="#{!entry.showPasswords ? 'none' : ''}"/> 
```

如果您希望/需要在 2 或 3 个位置具有相同的值，则必须考虑到绑定不应位于相同的位置`<h:form>`，否则您将遇到相同的问题。您可以使用纯 JavaScript（毕竟，will be和will be ）或在服务器端执行操作时*同步*变量值，即在您的.`<p:password>``<input type="password">``<p:input>``<input type="text">``<p:selectBooleanCheckbox>`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-26T12:39:14.637

您的主要错误是您在客户端使用 CSS 切换输入字段的可见性，而不是在服务器端使用 JSF。所以 JSF 基本上永远不知道显示/隐藏哪一个。它所知道的只是显示了这两个字段。所以它将处理这两个字段。当您将两个字段的值绑定到同一个属性时，它总是会得到最后处理的字段的值。

您需要在服务器端使用 JSF 显示/隐藏输入字段。您可以使用为此提供的`rendered`属性。

```
rendered="#{testBean.visiblePassword}" 
```

# ruby-on-rails - 回形针丢失的路径.png

> ID：13552167
> 
> 赞同：3
> 
> 时间：2012-11-25T14:55:47.567
> 
> 标签：ruby-on-rails, ruby-on-rails-3, image, amazon-s3, paperclip

使用回形针的默认/标准配置，没有图像的模型将导致有路径`http://localhost:3000/avatars/thumb/missing.png`

我正在使用带有 S3 的回形针，我想使用`missing.png`我存储中的一个。

有没有办法通过s3设置missing.png的路径？

我知道，`:default_url`但它似乎不适用于其他图像使用的 s3 信息

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-25T18:23:06.020

`'default_url'`是图像为 时使用的 url `nil`。

另一种情况是附件的 url 存在，但它在位置或 s3 中不存在，在这种情况下，**前端**尝试查找文件但返回**错误**为无法找到文件。

因此，这里的解决方案可能是您通过 javascript 将所有丢失的 url 文件替换为一些资产文件，如下所示：[jQuery/JavaScript to replace broken images](https://stackoverflow.com/q/92720/985051)

# sql - 具有 3 个条件的 SQL 'select' 查询

> ID：13552180
> 
> 赞同：5
> 
> 时间：2012-11-25T14:57:56.163
> 
> 标签：sql

```
SELECT * 
FROM REVIEW 
WHERE REVIEWERID =5 AND APPRAISEECONFIRMYN='Y' AND HRCONFIRMYN = NULL 
```

是否允许这样的 2 个“与”条件？我没有得到正确的输出。数据库中有 2 条记录满足上述条件。当我删除最后一个条件`'HRCONFIRMYN = NULL'`并执行时，我得到了正确的输出。

如何解决？我需要在搜索记录时检查所有 3 个条件。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-11-25T14:59:24.967

要比较这些[**`NULL`**](http://en.wikipedia.org/wiki/Null_%28SQL%29)值，您必须使用`IS NULL`谓词而不是`= NULL`像这样：

```
SELECT * 
FROM REVIEW 
WHERE REVIEWERID = 5 
  AND APPRAISEECONFIRMYN = 'Y' 
  AND HRCONFIRMYN IS NULL 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-25T14:59:09.147

*   `OR`改为使用
*   分组你的情况
*   `IS NULL`与 NULL 比较时使用

询问，

```
SELECT * 
FROM REVIEW 
WHERE (REVIEWERID =5 AND APPRAISEECONFIRMYN='Y') OR
      HRCONFIRMYN IS NULL 
```

# java - 向数组添加/追加元素 - Java

> ID：13552181
> 
> 赞同：0
> 
> 时间：2012-11-25T14:58:05.163
> 
> 标签：java

我正在构建一个以十进制数数组和十进制阈值作为参数的方法。该方法应输出列表中大于阈值的所有数字。

我的计划是执行一个 for 循环并检查数组中的每个数字，如果该数字 (i) 大于阈值 (x)，则附加到我的结果列表中。我的问题是我无法添加/追加到结果列表中。

我`System.out.println("Nothing here");`只是想帮我看看它是否真的通过了 for 循环，但我的 IDE 说调用`list.add(a[i]);`是错误的。我是一个初级程序员，不知道如何解决这个问题。这是我的代码：

```
public class a10 {

    public static void main(String[] args) {
        double a[] = {42, 956, 3,4};
        threshold(a, 2);
    }

    public static void threshold(double[] a, double x){
        double list[] = {};

        for (double i:a){
            if (i<22){
                list.add(a[i]);
            }else{
                System.out.println("Nothing here");
            }
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-25T15:02:14.877

您的列表实际上是一个数组 ( `double[]`)，它***不是***具有方法的对象`add`。您应该将其视为常规数组（在您的情况下，您已初始化为空数组，这意味着您不能在其中设置任何元素）。

您应该做的是使用 Lis 的实际实现（例如 an `ArrayList`），然后您可以实际使用该`add`方法：

```
 List<Double> result = new ArrayList<Double>();
 for (double i:a){
      if (i>x){ 
          list.add(a[i]);
      }else{
          System.out.println("Nothing here");
      }
 } 
```

另请注意，您已经硬编码了数字“22”（您应该使用`x`）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-25T15:02:15.457

Java中没有`add`数组的方法。您应该将列表声明为：

```
List<Double> list = new ArrayList<Double>(); //or some other type of list 
```

# c# - 无法从 TCP 服务器获得完整响应

> ID：13552183
> 
> 赞同：1
> 
> 时间：2012-11-25T14:58:27.240
> 
> 标签：c#, .net, tcp, tcpclient

我正在尝试使用端口 2628 连接到 dict.org 服务器，但无法从服务器获得完整响应。代码如下所示：

```
TcpClient client = new TcpClient("216.18.20.172", 2628);
            try
            {
                Stream s = client.GetStream();
                StreamReader sr = new StreamReader(s);
                StreamWriter sw = new StreamWriter(s);
                sw.AutoFlush = true;
                Console.WriteLine(sr.ReadLine());
                while (true)
                {
                    Console.Write("Word: ");
                    string msg = Console.ReadLine();
                    sw.WriteLine("D wn {0}", msg);
                    if (msg == "") break;

                    Console.WriteLine(sr.ReadLine());
                }
                s.Close();
            }
            finally
            {
                client.Close();
                Console.ReadLine();
            } 
```

当我为这个词输入“hello”时，它只会得到 1 行响应，然后如果我输入任何内容并按 enter，它将显示下一行，依此类推。如何一次显示完整的响应？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T15:17:28.583

这就是我想出的：

```
 static void Main(string[] args)
    {
        TcpClient client = new TcpClient("216.18.20.172", 2628);
        try
        {
            Stream s = client.GetStream();
            StreamReader sr = new StreamReader(s);
            StreamWriter sw = new StreamWriter(s);
            sw.AutoFlush = true;
            Console.WriteLine(sr.ReadLine());
            while (true)
            {
                Console.Write("Word: ");
                string msg = Console.ReadLine();
                sw.WriteLine("D wn {0}", msg);
                if (msg == "") break;

                var line = sr.ReadLine();
                while (line != ".") // The dot character is used as an indication that no more words are found
                {
                    Console.WriteLine(line);
                    line = sr.ReadLine();
                }
                sr.ReadLine();
            }
            s.Close();
        }
        finally
        {
            client.Close();
            Console.ReadLine();
        }
    } 
```

您还需要解决其他响应类型。当没有找到任何单词时，我的解决方案会挂起，但这可以通过注意特定的响应类型数字而不是点字符来轻松解决。

快乐编码！

编辑：这绝不是一个优雅的解决方案，我只是想说明原理。

# java - Sparql 查询，获取输出

> ID：13552184
> 
> 赞同：1
> 
> 时间：2012-11-25T14:58:33.307
> 
> 标签：java, netbeans, sparql, semantic-web

我正在尝试获取在端点linkedlifedata.com/sparql 上进行的查询的结果集，而我要获取的对象是“指示”，它是一个段落。我如何在netbeans中打印它？代码是： -

```
String qs1 = "PREFIX skos: <http://www.w3.org/2004/02/skos/core#>"+
"PREFIX drugbank: <http://www4.wiwiss.fu-berlin.de/drugbank/resource/drugbank/>"+
"select ?indication"+
"where {"+
"?drug drugbank:indication ?indication."+
"?drug drugbank:genericName ?drugname."+
"filter(regex(?drugname, 'Omalizumab','i'))"+
"}LIMIT 100 ";

com.hp.hpl.jena.query.Query query = QueryFactory.create(qs1);
QueryExecution qexec = QueryExecutionFactory.sparqlService("http://linkedlifedata.com/sparql", query);
String o;
try{
ResultSet results = qexec.execSelect(); 
for ( ; results.hasNext() ; )
{
QuerySolution soln = results.nextSolution() ;
o = soln.get("indication").toString();
System.out.println(o);
}
} 
finally {
qexec.close();
}
} 
```

我应用了上述方法。但它显示空指针异常。查询运行良好（在端点上检查）。我之前使用 isLiteral() 函数获得了药物名称（一个小字符串），但是对于作为段落的“指示”，它没有发生。PLZ帮助，这是紧急的。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-25T17:05:56.717

直到我运行它，我才发现它。你的问题是这样的：

```
"select ?indication"+
"where {"+ 
```

选择行的末尾没有空格，所以查询实际上是：

```
... select ?indicationwhere { ... } 
```

因此没有绑定`?indication`, 和一个空指针异常。在其中粘贴换行符或空格。

# php - 所有 Ajax 响应的通用处理程序

> ID：13552190
> 
> 赞同：1
> 
> 时间：2012-11-25T14:58:52.467
> 
> 标签：php, jquery, ajax

我在页面中有十几个 ajax 调用，它们都有不同的目的。我想知道我是否可以编写一个函数来捕获页面上任何 ajax 调用的响应。如果响应是文本“Catch me”，该函数会阻止默认的 ajax 成功功能并提醒“Caught”；如果没有，它遵循默认的成功函数。

基本上，我可以编写一个函数来捕获页面上的所有 ajax 调用并检查它们的响应文本。

一个乏味的方法是编辑每个 ajax 调用，但我试图避免这种情况。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T15:11:39.747

查看jQuery 中的[全局 AJAX 事件处理程序。](http://api.jquery.com/category/ajax/global-ajax-event-handlers/)该页面说：

> ***当页面上的任何 AJAX 请求发生**某些事件（例如初始化或完成）时，这些方法注册要调用的处理程序。**如果 jQuery.ajaxSetup() 中的全局属性为 true（默认情况下为 true），则**在每个 AJAX 请求上触发全局事件。注意：无论 global 的值如何，都不会为跨域脚本或 JSONP 请求触发全局事件。*

所以你的代码应该看起来像这样（我使用了随机选择器，没有必要使用“body”）：

```
$("body").ajaxComplete(function(e, xhr, settings){ alert(xhr.responseText); });​​​​​​​ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-25T15:58:50.830

我看到您正在尝试创建在成功事件**之前在响应上执行的全局处理程序。**接下来，根据某些条件，打破默认行为（通过在您的情况下显示警报），或进一步传递流程（到自定义成功事件，因为您的每个 ajax 调用可以有不同的逻辑来运行成功）。

为此，您应该稍微修改一下 jQuery 提供的 ajax 处理程序：

```
var ns = {};
(function(ctx) {
    ctx.ajax = function(options, callback){
        var defaults = {
            success: function (data) {
                if (data != "Catch me") {
                    callback(data);
                } else {
                    alert("Catched");
                }
            }
        };
        $.extend(options, defaults);
        $.ajax(options);
    };   
})(ns); 
```

应该像下面那样调用 ajax 调用：

```
ns.ajax(options, function (data) {
    alert("success, inside callback");
}); 
```

# json - 如何在谷歌 API 中获取 JSON 值

> ID：13552192
> 
> 赞同：0
> 
> 时间：2012-11-25T14:59:02.027
> 
> 标签：json, google-api

我有谷歌 API，它返回一个 JSON 文件

[http://maps.googleapis.com/maps/api/geocode/json?latlng=10.75,106.667&sensor=false](http://maps.googleapis.com/maps/api/geocode/json?latlng=10.75,106.667&sensor=false)

我想得到“long_name”：“Hồ Chí Minh”，“long_name”：“Việt Nam”和“short_name”：“VN”

我不知道 JSON，我喜欢这个

```
var API = 'http://maps.googleapis.com/maps/api/geocode/json?latlng=10.75,106.667&sensor=false';
var obj = eval("(" + API + ")");
var obj2 = eval("(" + obj + ")");
document.getElementById("City").innerHTML = obj.results[0].obj2.address_components[0].long_name; 
```

但它不起作用

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T16:08:29.717

我认为你应该阅读更多关于 javascript 的内容。您必须使用http get请求来获取json，有两种方法可以做到这一点，使用同步请求或ajax请求。
尝试这个 ：

```
//the json url
var API = 'http://maps.googleapis.com/maps/api/geocode/json?atlng=10.75,106.667&sensor=false';
//this function add the long_name
function addLongName(data){
    var long_name = data.results[0].address_components[5].long_name;
    document.getElementById("City").appendChild(document.createTextNode(long_name));
} 
```

使用同步请求

```
var xmlHttp = new XMLHttpRequest();
xmlHttp.open("GET", API, false);
try {
    xmlHttp.send(null);
    responseText = xmlHttp.responseText;
    var data = JSON.parse(responseText);
     addLongName(data);
} catch (ex) {
    console.error(ex);
} 
```

使用ajax请求

```
var ajax = $.ajax({
    type : "GET",
    url : API,
    dataType: 'jsonp',
    success:  function(data) {
        addLongName(data);
    }
}); 
```

# php - 从文本文件中读取复杂结构并放入数据库

> ID：13552194
> 
> 赞同：1
> 
> 时间：2012-11-25T14:59:12.200
> 
> 标签：php, text

我在文本文件中有以下结构：

```
class Thing1
{
    pos[]={120.03,121,134.0987};
    heading=-92.049;
    anotherthing=19;
    foo="thing";
    kind="This_item";
    foo=0.293333;
    foo="this thing";
};
class Thing2
{
 ...
} 
```

我想用 PHP 文档阅读我网站上的结构并将其放入数据库中。我需要有 'pos[]'、'heading' 和 'kind' 值并且需要将它们添加到一行中。那么我怎样才能得到这些值并将它们变成一个变量以便我可以使用它们呢？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T15:45:00.150

我已经制作了以下解决方案：

```
$lines = file('your_file.txt',FILE_IGNORE_NEW_LINES | FILE_SKIP_EMPTY_LINES);

foreach($lines as $ky => $line) {
   $lines[$ky] = explode('=',$line);
   $lines[$ky][0] = trim($lines[$ky][0]);
   if (isset($lines[$ky][1])) {
      $lines[$ky][1] = trim($lines[$ky][1], '";\'{}');
   }
}
foreach($lines as $line){
   if ($line[0] == 'pos[]') {
      echo 'pos[] = ' . $line[1]; //echoing post[] value
   }
   if ($line[0] == 'kind') {
      echo 'kind = ' . $line[1]; //echoing kind value
   }
   if ($line[0] == 'heading') {
      echo 'heading = ' . $line[1]; //echoing heading value
   }
} 
```

我已经用您的示例文本对其进行了测试，并且效果很好:-)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-25T15:21:17.633

```
$FileArray = file("yourfile.txt");
$QueryArray = array();
foreach($FileArray as $Line) {
    if (count($LineArray = explode('=', $Line)) > 1) {
        $QueryArray[$LineArray[0]] = trim($LineArray[1], ";");
    }
} 
```

从那里您可以执行检查并构建查询以根据您的需要将值插入数据库。像这样的东西：

```
$QueryString = "INSERT INTO {$DbName} (";
foreach($QueryArray as $Key=>$Val) {
    if ($Key == "whatever") {
        $KeyStr .= $Key.', ';
        $ValStr .= $Val.', ';
    }
}
$KeyStr = trim($KeyStr, ", ");
$ValStr = trim($ValStr, ", ");
QueryString .= "{$KeyStr}) VALUES ({$ValStr});" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-25T17:17:37.633

我为这个问题写了一个函数：

```
<?php
$array = parse_my_file("file.txt");

print_r($array);

function parse_my_file($file){
    if(file_exists($file)){
        $data = file_get_contents($file);
        $class = explode("class ", $data);
        unset($class[0]);
        $class_sanitized = array_map(function($v){
            $temp = explode(PHP_EOL . "{" . PHP_EOL, substr($v, 0, -4), 2);
            $temp[1] = array_filter(explode(PHP_EOL, $temp[1]));
            $temp[1] = array_map(function($w){
                $value = explode("=", trim(substr($w, 0,-1), " "));
                return($value);
            }, $temp[1]);
            return($temp);
        }, $class);

        $return_array = array();
        foreach($class_sanitized as $value){
            $return_array[$value[0]] = array_map(function($z){
            if(substr($z[1], 0, 1) == '"' AND substr($z[1], -1) == '"'){
                $z[1] = substr($z[1], 1, -1);
            }
                return(array($z[0] => $z[1]));
            }, $value[1]);
        }
        return $return_array;
    }else{
        return array("Deze bestand bestaat niet");
    }
}
?> 
```

输出是：

```
Array
(
    [Thing1] => Array
        (
            [0] => Array
                (
                    [pos[]] => {120.03,121,134.0987}
                )

            [1] => Array
                (
                    [heading] => -92.049
                )

            [2] => Array
                (
                    [anotherthing] => 19
                )

            [3] => Array
                (
                    [foo] => thing
                )

            [4] => Array
                (
                    [kind] => This_item
                )

            [5] => Array
                (
                    [foo] => 0.293333
                )

            [6] => Array
                (
                    [foo] => this thing
                )

        )

    [Thing2] => Array
        (
            [0] => Array
                (
                    [pos[]] => {220.03,221,234.0987}
                )

            [1] => Array
                (
                    [heading] => -292.049
                )

            [2] => Array
                (
                    [anotherthing] => 219
                )

            [3] => Array
                (
                    [foo] => thing2
                )

            [4] => Array
                (
                    [kind] => This_item2
                )

            [5] => Array
                (
                    [foo] => 2.293333
                )

            [6] => Array
                (
                    [foo] => this thing2
                )

        )

) 
```

要回显一个值：

```
echo $array["Thing1"][2]["anotherthing"]; // Result 19 
```

希望这会有所帮助。

# android - 触发Android的警报短信

> ID：13552196
> 
> 赞同：1
> 
> 时间：2012-11-25T14:59:25.270
> 
> 标签：android, sms

先生，我想在用户收到包含特定关键字的短信时触发警报，然后为用户提供警报对话框以回复预定义的消息。在我的代码中，我似乎无法让警报正常工作。它只显示警报对话框。另外，如果可能的话，我想使用手机的默认闹钟，即使在静音模式下也可以将其关闭。我想用警报代替收到的短信铃声。请帮我。提前致谢。

```
public class EAlarmReceiver extends BroadcastReceiver {

public static String sender;
public void onReceive(Context context, Intent intent) {
    // TODO Auto-generated method stub
    Bundle bundle = intent.getExtras(); 
    Object[] pdusObj = (Object[]) bundle.get("pdus"); 
    SmsMessage[] messages = new SmsMessage[pdusObj.length]; 
    for (int i = 0; i<pdusObj.length; i++) 
    { 
            messages[i] = SmsMessage.createFromPdu ((byte[]) 
            pdusObj[i]); 
            sender = messages[i].getOriginatingAddress();
    } 

    for (SmsMessage msg : messages) {
        if (msg.getMessageBody().contains("firealert")) {

            Vibrator v = (Vibrator) context.getSystemService(Context.VIBRATOR_SERVICE);
            v.vibrate(300);

            Uri alert = RingtoneManager
                    .getDefaultUri(RingtoneManager.TYPE_NOTIFICATION);
            MediaPlayer mMediaPlayer = new MediaPlayer();

            try {
                mMediaPlayer.setDataSource(context, alert);
            } catch (IllegalArgumentException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            } catch (SecurityException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            } catch (IllegalStateException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            } catch (IOException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }

            final AudioManager audioManager = (AudioManager) context.getSystemService(Context.AUDIO_SERVICE);
            int maxVolume = audioManager.getStreamMaxVolume(AudioManager.STREAM_ALARM);

            audioManager.setStreamVolume(AudioManager.STREAM_ALARM, maxVolume,AudioManager.FLAG_REMOVE_SOUND_AND_VIBRATE);
            if (audioManager.getStreamVolume(AudioManager.STREAM_ALARM) != 0) 
            {
                mMediaPlayer.setAudioStreamType(AudioManager.STREAM_ALARM);
                mMediaPlayer.setLooping(false);
                //mMediaPlayer.prepare();
                mMediaPlayer.start();
                Toast.makeText(context.getApplicationContext(), "alarm started", Toast.LENGTH_LONG).show();
            }//end if

            Intent openInterface = new Intent("proj.receiver.RECEIVERINTERFACE");
            openInterface.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
            context.startActivity(openInterface);

        }//end if
    }//end for

}// end onreceive 
```

# c# - Game1.GraphicsDevice 和 graphics.GraphicsDevice 的区别

> ID：13552199
> 
> 赞同：2
> 
> 时间：2012-11-25T14:59:54.337
> 
> 标签：c#, graphics, xna

在 XNA 4.0 中，我的游戏类的 GraphicsDevice 属性和“graphics”变量的 GraphicsDevice 属性有什么区别？顺便说一句，“图形”的类型是 GraphicsDeviceManager。

如果这很重要，我正在使用 Visual Studio 2010。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-25T15:09:11.873

没有。自己试试：

```
Console.WriteLine(ReferenceEquals(graphics.GraphicsDevice, this.GraphicsDevice)); 
```

把它放在里面的某个地方`LoadContent`。你会发现它输出`true`. 它们都指向同一个对象。

为了可读性，您通常应该使用`Game.GraphicsDevice`.

* * *

基本行为是`GraphicsDeviceManager`一个`IGraphicsDeviceService`（提供一个`GraphicsDevice`成员）。当您创建`GraphicsDeviceManager`时，它会将自己添加到`Game.Services`其构造函数中（请参阅如何将引用传递给您`Game`的构造函数）。

`Game`从其列表中`GraphicsDevice`的任何成员中设置其成员。这样，您可以用自己的实现类替换- 如果您碰巧疯了;)`IGraphicsDeviceService``Services``GraphicsDeviceManager``IGraphicsDeviceService`

`GraphicsDeviceManager`也是一个`IGraphicsDeviceManager`，它`Game`以类似的方式（通过`Game.Services`）使用来管理创建图形设备。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-25T15:09:34.177

GraphicsDeviceManager 管理 GraphicsDevice，你不应该直接使用 GraphicsDevice。如果需要，可以更改它，而不是只使用 GraphicsDeviceManager.GraphicsDevice 属性。

# javascript - 为什么我的 for 循环只显示数组的最后一个值？

> ID：13552200
> 
> 赞同：-4
> 
> 时间：2012-11-25T15:00:08.493
> 
> 标签：javascript, arrays, jquery-mobile, for-loop

当我使用这个 for 循环时，它只输出我的数组的最后一个值。为什么会这样？

```
fouteAntwoorden = [];
for (i = 0; i < fouteAntwoorden.length; i++) { 
        document.getElementById('antwoorden').innerHTML = fouteAntwoorden[i] + '<br>';      
    } 
```

如果您想查看我的整个项目，请查看 JSFiddle。 [http://jsfiddle.net/yTZbP/1/](http://jsfiddle.net/yTZbP/1/)

编辑：

使用我的应用程序，您必须将单词分配给 dativ 或 accusativ。如果错了，我想让你错的字显示在result_page上。但我的 for 循环只显示最后一个错误的答案。你能帮我吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-25T15:01:46.453

这一行：

```
document.getElementById('antwoorden').innerHTML = fouteAntwoorden[i] + '<br>'; 
```

`antwoorden`在每次迭代时重新分配标签的内容。也许你的意思是`+=`：

```
document.getElementById('antwoorden').innerHTML += fouteAntwoorden[i] + '<br>'; 
```

如果您想在内部包含多个带有单独单词的元素，为什么不创建单独的元素来存储文本呢？

```
for (i = 0; i < fouteAntwoorden.length; i++) {
    p = document.createElement("p");
    p.innerHTML = fouteAntwoorden[i] + '<br>';
    document.getElementById("SomeContainer").appendChild(p);
} 
```

# c++ - 在 C++ 中使用向量的奇怪模板错误

> ID：13552205
> 
> 赞同：-6
> 
> 时间：2012-11-25T15:00:34.167
> 
> 标签：c++, vector

我现在正在为 lua 制作一个多线程库，如果没有这个奇怪的问题，一切都会编译。我有一个容器对象来保存我创建的线程对象类。这是此对象的标头：

```
 #include "stdafx.h"
    ;

using namespace std;
class LuaThreadManager {
public:  
    LuaThreadManager(int size);
    Thread& get(int id);
        int add(Thread& t);
void remove(int id);
protected: 
     vector <Thread&> T; 
     int numoccupied; 
} 
```

当我编译时，我从这个头文件中得到三个错误（我会注意到它们都在我声明我的头文件的那一行）：

第 12 行：错误 C2143：语法错误：缺少 ';' 在'<'之前

第 12 行：错误 C4430：缺少类型说明符 - 假定为 int。注意：C++ 不支持默认整数

第 (12) 行：错误 C2238：“;”之前的意外标记

这是我的问题：我到底做错了什么？（此外，您将在向量声明中看到标识符 Thread；它是我创建的线程对象） 编辑：我得到的所有答案都没有奏效。这不是因为我没有包含向量库（我确实通过将它包含在 stdafx.h_ 中来包含它，或者因为我使用了向量的引用（已修复，没有修复我的错误）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-25T15:38:08.860

`std::vector`不能专门用于引用类型。向量的元素需要是可分配的，而引用不是。

最接近的等价物可能是 a `std::vector<std::reference_wrapper<Thread>>`，具体取决于它是否适合您的设计。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-25T15:03:35.527

你不包括`<vector>`标题。:)

（从风格上讲，您做错的另一件事是放入`using namespace std`头文件。不要那样做）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-25T15:26:05.870

你错过了终结者；在你的类 LuaThreadManager 的右大括号之后

# mysql - 仅在一个数据库上授予文件

> ID：13552206
> 
> 赞同：37
> 
> 时间：2012-11-25T15:00:59.317
> 
> 标签：mysql

我想为 john mysql 用户允许 LOAD DATA 命令。所以我以root身份登录mysql终端并发出以下语句：

```
grant file on johndatabase.* to 'john'@'localhost'; 
```

但我收到以下错误：

```
ERROR 1221 (HY000): Incorrect usage of DB GRANT and GLOBAL PRIVILEGES 
```

如果我替换`johndatabase.*`为`*.*`，那么一切正常。但并不`*.*`意味着所有数据库？我想将 john mysql 用户限制为 johndatabase。

* * *

## 回答 #1

> 赞同：62
> 
> 时间：2012-11-25T15:06:48.927

您不能仅授予单个数据库的 FILE 权限。这在逻辑上没有任何意义。考虑一下[文档](http://dev.mysql.com/doc/refman/5.5/en//privileges-provided.html#priv_file)所说的：

> FILE 权限允许您使用 LOAD DATA INFILE 和 SELECT ... INTO OUTFILE 语句和 LOAD_FILE() 函数在服务器主机上读取和写入文件。拥有 FILE 权限的用户可以读取服务器主机上的任何文件，这些文件要么是世界可读的，要么可以被 MySQL 服务器读取。（这意味着用户可以读取任何数据库目录中的任何文件，因为服务器可以访问这些文件中的任何一个。）

因此，FILE 权限是一个*全局*权限。它影响服务器上的所有文件，并且只允许访问全局命令（例如`LOAD DATA INFILE`，等等...），而不是任何数据库。授予 FILE 权限的唯一方法是在所有数据库上，使用以下语法：

```
GRANT FILE ON *.* TO 'john'@'localhost'; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-25T15:07:29.560

使用 FILE 权限，您可以授予用户访问 mysql 服务器可以访问的文件系统的权限。因此，将其限制为特定数据库是没有用的，因为用户将能够访问文件系统级别的所有数据库。这就是为什么，它只能设置为`*.*`。

# android - USB_DEVICE_ATTACHED Intent 未触发 - 没有 HID 设备，没有设备过滤器

> ID：13552207
> 
> 赞同：0
> 
> 时间：2012-11-25T15:01:19.023
> 
> 标签：android, usb

我在捕捉 USB_DEVICE_ATTACHED 意图时遇到了一些问题。在 AndroidManifest 我没有指定任何设备过滤器，只有功能

```
<uses-feature android:name="android.hardware.usb.host" />
<uses-sdk
    android:minSdkVersion="12"
    android:targetSdkVersion="15" /> 
```

根据[文档](http://developer.android.com/guide/topics/connectivity/usb/host.html)。此外，我的设备不是 HID 设备，并且我已经正确设置了 USB_DEVICE_ATTACHED 意图，但它永远不会触发。

我不想使用 getDeviceList() 函数列出连接的设备，因为我不知道调用它的正确时间。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T07:27:08.437

您需要提供设备过滤器；在您链接到的文档中已说明：

> 如果您希望您的应用程序收到连接的 USB 设备的通知，请在主活动中为意图指定一个`<intent-filter>`和`<meta-data>`元素对。`android.hardware.usb.action.USB_DEVICE_ATTACHED`

# c# - 从数据库创建类对象

> ID：13552214
> 
> 赞同：2
> 
> 时间：2012-11-25T15:01:59.807
> 
> 标签：c#, database, class

你如何创建一个新的类对象并从数据库中添加数据？

我在数据库中有一个表（tblCars），想遍历每一行（使用 sqldatareader？）并创建一个以主键（注册号）命名的新对象，然后从其他列向其中添加数据。

所以代替这个：

```
carClass car1 = new carClass();
car1.registration = "RT11 HWY";
car1.make = "Ford"; 
```

它会是这样的：

```
//connection and reader stuff
carClass <registration> = new carClass();
<registration>.registration = column1;
<registration>.make = column2; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-25T15:10:59.107

您可以为这种映射使用一些轻量级的 ORM。看看**[这里](http://csharp-source.net/open-source/persistence)**，有很多免费的解决方案。微软做的也至少有两个，**[LINQ to SQL](http://msdn.microsoft.com/en-us/library/bb425822.aspx)**和**[Entity Framework](http://msdn.microsoft.com/en-us/library/aa697427%28v=VS.80%29.aspx)**

# c# - 如何确定通过单击将哪个表单置于最前面？

> ID：13552216
> 
> 赞同：0
> 
> 时间：2012-11-25T15:01:59.907
> 
> 标签：c#, forms

我有一个包含子窗体对象的面板的应用程序。当我单击其中一个子窗体时，它会显示在前面。我想知道现在哪个在前面...我查看了事件列表，但找不到合适的事件形式我的目的:(

这些方法不起作用：

```
 protected void OpenedFileForm_Enter(object sender, EventArgs e)
    {
        MessageBox.Show("enter");
    }

    protected void OpenedFileForm_Click(object sender, EventArgs e)
    {
        MessageBox.Show("click");
    }

    protected void OpenedFileForm_Activated(object sender, EventArgs e)
    {
        MessageBox.Show("activated");
    }

    protected void OpenedFileForm_MouseClick(object sender, MouseEventArgs e)
    {
       MessageBox.Show("mouse click");
    }

    protected void OpenedFileForm_Shown(object sender, EventArgs e)
    {
        MessageBox.Show("shown");
    } 
```

![在此处输入图像描述](../Images/4be7b831f43da07226ebaf793140a7ac.png)

```
 OpenFileDialog openFile1 = new OpenFileDialog();

        openFile1.DefaultExt = "*.txt";
        openFile1.Filter = "TXT Files|*.txt|RTF Files|*.rtf";

        if (openFile1.ShowDialog() == System.Windows.Forms.DialogResult.OK &&
           openFile1.FileName.Length > 0)
        {

            switch (Path.GetExtension(openFile1.FileName))
            {

                case ".txt":
                    txtForm childTXT = new txtForm();
                    this.childForms.Add(childTXT);
                    childTXT.Parent = this.mainPanel;              
                    childTXT.richTextBox1.LoadFile(openFile1.FileName, RichTextBoxStreamType.PlainText);                                               
                    childTXT.Show();
                    break;
            }

        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T15:04:27.253

你试过`Form.Activated`事件吗？

[http://msdn.microsoft.com/en-us/library/system.windows.forms.form.activated(v=vs.80).aspx](http://msdn.microsoft.com/en-us/library/system.windows.forms.form.activated(v=vs.80).aspx)

编辑：

如果您在 MDI 应用程序中，则可能需要使用`MdiChildActivate`。

[http://msdn.microsoft.com/en-us/library/system.windows.forms.form.mdichildactivate.aspx](http://msdn.microsoft.com/en-us/library/system.windows.forms.form.mdichildactivate.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-25T16:04:00.747

仅当您将 Form.TopLevel 属性设置为 false 时，此代码才能工作。这使它变成了一个子控件，与 UserControl 几乎没有区别。

This has many side-effects, for one there is no notion of "front" anymore. The Z-order of child controls is determined by their position in their parent's Controls collection. And it affects the events it fires, Activated and Deactivated will never fire. Furthermore, the Form class was designed to be a container control, it doesn't like taking the focus itself. Its child controls get the focus, the Form class doesn't have any use for focus. Which is why the Enter, Click and MouseClick events don't fire, they are events that require focus.

Long story short, what you are trying to do doesn't make a wholeheckofalot of sense. If it is strictly the Z-order you want to fix then write an event handler for the MouseDown event:

```
 void OpenedFileForm_MouseDown(object sender, MouseEventArgs e) {
        var frm = (Form)sender;
        frm.BringToFront();
    } 
```

您可以添加 frm.Select() 以触发 Enter 事件，但只有在表单本身不包含任何可聚焦控件时才这样做。请注意，有证据表明您没有在代码中正确分配事件。Shown 事件*确实会*触发。将 FormBorderStyle 设置为 None 也很重要，标题栏不能再指示激活状态。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-25T15:48:06.730

好的，我明白了！谢谢大家的帮助。你给了我一个提示，让我考虑一下我奇怪的 MDI 想法的公平性，其中 Panel 是其他表单的父级。我删除了包含 Panel 的 SplitContainer，只是做了标准的 MDI 应用程序，其中 Forms 是主 Form 的 MDIChildren。childTXT.MdiParent = 这个；

# c# - 在 .Net 中使用 IE 设置中的代理自动配置

> ID：13552227
> 
> 赞同：12
> 
> 时间：2012-11-25T15:03:41.537
> 
> 标签：c#, .net, proxy, pac

我无法让 IE 选项中的代理自动配置 (PAC) 使用 .Net WebRequest 按预期工作。

根据这篇文章：
[代理检测通过 .NET 中的自动配置减轻用户的负担](http://web.archive.org/web/20120329222856/http://msdn.microsoft.com/en-gb/magazine/cc300743.aspx)

默认情况下，应为每个 WebRequest 设置系统代理。

这就是 proxy.js pac 文件的样子：

```
function FindProxyForURL(url, host)
{
  return "PROXY ProxyServerName:3118; DIRECT;";
} 
```

我还看了这篇文章：[我应该如何设置默认代理以使用默认凭据？](https://stackoverflow.com/questions/299940/how-should-i-set-the-default-proxy-to-use-default-credentials)

这建议将其添加到 app.config 中：

```
<system.net>
  <defaultProxy useDefaultCredentials="true" />
</system.net> 
```

添加这个没有帮助。

我创建了一个小型控制台应用程序来测试它.. 这里是：

```
static void Main(string[] args)
{
    HttpWebRequest request = null;
    try
    {               
        String resolvedAddress = WebRequest.DefaultWebProxy.GetProxy(new Uri("http://www.google.com")).ToString();
        Console.WriteLine("Proxy for address is: " + resolvedAddress);

        Uri m_URLToTest = new Uri("http://www.google.com");
        request = WebRequest.Create(m_URLToTest) as HttpWebRequest;
        request.Method = "GET";
        request.KeepAlive = false;
        request.Timeout = 5000;
        request.Proxy = WebRequest.DefaultWebProxy;
        WebResponse response = request.GetResponse();
        StreamReader reader = new StreamReader(response.GetResponseStream());
        string message = reader.ReadToEnd();
    }
    catch (Exception ex)
    {
        Console.Write("Exception");
    }

} 
```

输出：地址的代理是[http://www.google.com](http://www.google.com)

代替地址的代理是 ProxyServerName:3118

仅在使用自动配置脚本时才会发生...

我错过了什么吗？请帮忙！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-26T09:54:46.407

找到了解决方案！

PAC 文件的 mime 类型非常重要：[Content-type: application/x-ns-proxy-autoconfig]

其他 mime 类型可能不起作用。

确保使用适合的 mime 类型的 fiddler2（禁用缓存）。某些配置可能会显示 Content-Type: text/plain 这是不好的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-10-08T06:12:36.340

`Internet (Client & Server)`确保您已`Private Networks (Client & Server)`在`Package.appxmanifest`.

[![看到这个](../Images/32c4abf24b69c921a5821b903ca6791b.png)](https://i.stack.imgur.com/f2jcM.jpg)

[[来源]](https://social.msdn.microsoft.com/Forums/en-US/b57c6625-84ca-4281-8de2-14311014aecf/consume-web-services-from-metro-apps-c?forum=winappswithcsharp)

# java - 如何使用按键事件

> ID：13552229
> 
> 赞同：2
> 
> 时间：2012-11-25T15:03:48.183
> 
> 标签：java, swing, keylistener

我正在编写小型图形编辑器，我想在按 Ctrl+A 时捕获事件

我使用这样的代码（这是测试版本）：

```
@Override
public void keyPressed(KeyEvent e) {
    System.out.println("Press");
    switch (e.getKeyCode()){
        case KeyEvent.VK_A :
            System.out.println("A");
            break;
    }
} 
```

但我不知道如何捕捉 Ctrl+a

我尝试过这样的事情

```
 case KeyEvent.VK_CONTROL+KeyEvent.VK_A :
        System.out.println("A+CTRL");
        break; 
```

但是此代码`KeyEvent.VK_CONTROL+KeyEvent.VK_A`返回 int 并且可能另一个组合键返回相同的数字

所以有人可以帮助我吗

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-25T15:08:35.750

您可以使用`isControlDown()`方法：

```
switch (e.getKeyCode())
{
        case KeyEvent.VK_A :
            if(e.isControlDown())
               System.out.println("A and Ctrl are pressed.");
            else
                System.out.println("Only A is pressed");
            break;
        ...
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-25T15:05:44.437

试试这个.....

```
f.addKeyListener(new KeyListener() {

        @Override
        public void keyTyped(KeyEvent e) {
        }

        @Override
        public void keyPressed(KeyEvent e) {
            if ((e.getKeyCode() == KeyEvent.VK_A) && ((e.getModifiers() & KeyEvent.CTRL_MASK) != 0)) {
                System.out.println("woot!");
            }
        }

        @Override
        public void keyReleased(KeyEvent e) {
        }
    }); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-25T15:06:37.907

尝试`isControlDown`方法`KeyEvent`：[http ://docs.oracle.com/javase/6/docs/api/java/awt/event/InputEvent.html#isControlDown%28%29](http://docs.oracle.com/javase/6/docs/api/java/awt/event/InputEvent.html#isControlDown%28%29)

# coq - 在 Coq 中证明一个定理

> ID：13552234
> 
> 赞同：0
> 
> 时间：2012-11-25T15:04:39.593
> 
> 标签：coq, theorem

我试图在 Coq 中证明一个定理，但我无法解决出现的问题。我正在尝试解决：

```
 forall A B C: Prop, A\/(B\/C)->(A\/B)\/C.
Proof.
intros.
destruct H as [H1 | [H2 | H3 ]].
Case H1.
and in this last line I get the following error "Error: The reference Case was not found in the current environment." 
```

我是 Coq 的新手，所以我不知道这到底意味着什么。我在互联网上做了一些研究，但我没有设法找到解决方案。有谁知道这个问题来自哪里？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-25T15:23:48.373

你已经破坏了假设，所以你已经在分析每个案例。

使用`left`and`right`来操纵结论中的析取，`assumption`当假设和结论相同时。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-26T03:01:14.940

编辑：嗯...我可能误解了您实际上在这里尝试做的事情...

* * *

您正在使用并且可能已经在`Case`其他地方看到使用的不是 Coq 构建的，而是一个在 Coq 生态系统中漂浮的库。

我可以在这里找到它的参考：[http](http://coq.inria.fr/cocorico/Case%20(tactic) ://coq.inria.fr/cocorico/Case%20(tactic )

我个人也用过。要使用它，您需要将该链接中的定义复制到文件中的某个位置，或者复制到`MyCaseModule.v`您导入的另一个文件中：

```
Require Import MyCaseModule. 
```

* * *

作为旁注，Coq 8.4 似乎提供了另一种使用项目符号构建证明的方法。我不知道具体细节，因为其他原因我一直使用 8.3。但是，您可能仍然更喜欢 Case/SCase/... 因为它能够为不同的案例命名。

# c - 管道和叉子，不会显示在标准输出上

> ID：13552236
> 
> 赞同：2
> 
> 时间：2012-11-25T15:04:56.463
> 
> 标签：c, linux, fork, stdout, pipe

我正在做我的作业，即在 C 中复制 unix 命令 shell。

我已经实现了后台运行（&）的单个命令执行。

现在我正处于实现管道的阶段，我面临这个问题，对于大于 1 的管道，带有管道的子命令已完成，但最终输出不会显示在 stdout 上（最后一个命令的 stdin 被替换为 read最后一个管道）

```
dup2(pipes[lst_cmd], 0); 
```

`fflush(STDIN_FILENO)`我也在父母那里试过。

我的程序的出口是 CONTROL-D，当我按下它时，会显示输出（也退出，因为我在 CONTROL-D 上的操作是退出（0））。

我认为管道的输出在标准输出缓冲区中，但没有显示。除了 fflush 之外，还有其他方法可以将缓冲区中的内容发送到标准输出吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-25T17:02:58.787

看过代码（不公平的优势）后，主要问题是流程结构与未彻底关闭管道相结合。

管道的流程结构`ps | sort`是：

```
main shell
    - coordinator sub-shell
        - ps
        - sort 
```

主 shell 正在创建 N 个管道（N = 1 for `ps | sort`）。然后创建了协调器外壳；它将启动 N+1 个孩子。然而，它并没有等待它们终止，也没有关闭它的管道副本。主外壳也没有关闭它的管道副本。

更正常的流程结构可能没有协调器子外壳。有两种生成子代的机制。传统上，主 shell 会派生一个子进程；它会协调管道中的前 N ​​个进程（包括首先创建管道），然后执行管道中的最后一个进程。主 shell 等待一个子进程完成，管道的退出状态是子进程（也就是管道中的最后一个进程）的退出状态。

最近，`bash`提供了一种机制，通过该机制，主 shell 可以获取管道中每个子 shell 的状态；它负责协调。

主要修复（除了一些主要是次要的编译警告）是：

1.  主壳在分叉协调器后关闭所有管道。
2.  main shell 等待协调器完成。
3.  协调器在分叉管道后关闭所有管道。
4.  协调器等待管道中的所有进程完成。
5.  协调员退出（而不是返回提供决斗双重提示）。

更好的解决方法是消除协调器子外壳（它的行为类似于所描述的经典系统）。

# xml - 在元素 XML 中使用多个模式

> ID：13552237
> 
> 赞同：1
> 
> 时间：2012-11-25T15:04:56.817
> 
> 标签：xml, xsd

我需要定义一个具有多种模式的元素，例如`gDay`, `gMonth`, `gYear`,`dateTime`等。如何在**XSD**中定义一个限制来做到这一点？

像这样：

```
<dates>
    <out>2012</out>
</dates>

<xs:complexType name="infodates">
        <xs:sequence>
            <xs:element name="out" type="xs:dateTime"&"xs:gMonth"/>
        </xs:sequence>
</xs:complexType> 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T05:57:09.017

这可以通过将自定义模式作为 TYPE.. 来完成，例如：

```
 <xs:simpleType name="CRNDATETIME">
        <xs:restriction base="xs:string">
          <xs:pattern value="|(((01|02|03|04|05|06|07|08|09|10|11|12)/(01|02|03|04|05|06|07|08|09|10|11|12|13|14|15|16|17|18|19|20|21|22|23|24|25|26|27|28|29|30|31)/[1-2][0-9][0-9][0-9][ ](00|01|02|03|04|05|06|07|08|09|10|11|12|13|14|15|16|17|18|19|20|21|22|23)[:][0-5][0-9][:][0-5][0-9])|
                             ((01|02|03|04|05|06|07|08|09|10|11|12)/(01|02|03|04|05|06|07|08|09|10|11|12|13|14|15|16|17|18|19|20|21|22|23|24|25|26|27|28|29|30|31)/[1-2][0-9][0-9][0-9][ ](01|02|03|04|05|06|07|08|09|10|11|12)[:][0-5][0-9][:][0-5][0-9] [aApP][mM]))"/>
        </xs:restriction>
      </xs:simpleType> 
```

这接受以下模式的日期时间值
1\. MM/DD/YYYY hh:mm:ss aAmM/pPmM ..
2\. MM/DD/YYYY HH:mm:ss
也接受空值..

我知道这会有点困难，而不是非常困难..但可以实现..

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-26T12:23:06.413

简短的回答：xml 模式不能连接简单的数据类型。

无论如何，它可能不是您想要的：`xs:gMonth`需要一个双连字符前缀（例如“--05”），并且`xs:gDay`需要一个三连字符（例如“---31”）。不是我所期望的！以下是[每个简单数据类型的示例](http://www.w3.org/TR/xmlschema-0/#CreatDt)。还有一些内置的组合类型：`gYearMonth`等`gMonthDay`。

沿着这些思路，[`xs:dateTime`](http://www.w3.org/TR/2004/REC-xmlschema-2-20041028/datatypes.html#dateTime-lexical-representation)有一个很长的定义：`'-'? yyyy '-' mm '-' dd 'T' hh ':' mm ':' ss ('.' s+)? (zzzzzz)?` 只能省略三个部分，因此需要`yyyy-mm-ddThh:mm:ss`-您的示例`<out>2012</out>`对此无效。

* * *

长答案：但是，xml 模式*可以*`union`通过（如选择）和`list`（相同类型的空格分隔列表）组合简单的数据类型。因此，您可以执行以下操作`(gDay|gMonth|gYear|dateTime)*`：（不是有效的 xsd 语法，只是说明性的）。这不是有序的并且允许重复，因此例如“---31 --05 --05”是有效的。这是 xsd 语法：

```
$ cat catDatatypes.xsd 
<xs:schema xmlns:xs="http://www.w3.org/2001/XMLSchema">
  <xs:element name="eg" type="myString_Type"/>
  <xs:simpleType name="myString_Type">
    <xs:list>
      <xs:simpleType>
        <xs:union>
          <xs:simpleType>
            <xs:restriction base="xs:gDay"/>
          </xs:simpleType>
          <xs:simpleType>
            <xs:restriction base="xs:gMonth"/>
          </xs:simpleType>
          <xs:simpleType>
            <xs:restriction base="xs:gYear"/>
          </xs:simpleType>
          <xs:simpleType>
            <xs:restriction base="xs:dateTime"/>
          </xs:simpleType>
        </xs:union>
      </xs:simpleType>
    </xs:list>
  </xs:simpleType>
</xs:schema>

$ xmllint --schema catDatatypes.xsd catDatatypes.xml 
<eg>2012 --12 ---01 --12 ---31 --05 --05</eg>
catDatatypes.xml validates 
```

结论：您不能以您（和我）想要的方式重用内置数据类型，而且它们看起来也不是很好。您最好自己明确定义它，就像 InfantProgrammer'Aravind 的回答一样。（或者，您可以为每个组件使用单独的属性 - 这也将使解析它的人更容易）。

* * *

为了好玩，我尝试缩短 InfantProgrammer'Aravind 的答案（尽管这是否使它更清晰是有争议的......）。它保留了上午/下午的 12 小时与没有上午/下午的 24 小时的检查（但不接受空的又名空值）。

```
 <xs:simpleType name="CRNDATETIME2">
    <xs:restriction base="xs:string">
      <xs:pattern value="(0[1-9]|1[012])/(0[1-9]|[12]\d|3[01])/([12]\d{3}) ((0\d|1[012])(:[0-5]\d){2}|(0\d|1[012])(:[0-5]\d){2} [aApP][mM])"/>
    </xs:restriction>
  </xs:simpleType> 
```

这是XSD 中正则表达式的[简要指南；](http://www.w3.org/TR/xmlschema-0/#regexAppendix)这是一个[长](http://www.w3.org/TR/2004/REC-xmlschema-2-20041028/datatypes.html#regexs)的。

顺便说一句：原来你可以将“[1-9]”表示为“[\d-[0]]”，这是一个[“字符类*减法*”](http://www.w3.org/TR/2004/REC-xmlschema-2-20041028/datatypes.html#nt-charClassSub)，而不是一个范围。

# windows-phone-8 - 在 Visual Studio 2012 Pro 的 Windows Phone 8 应用程序开发中无法加载设计窗格

> ID：13552246
> 
> 赞同：1
> 
> 时间：2012-11-25T15:05:42.330
> 
> 标签：windows-phone-8

Windows 8 中 Visual Studio 2012 中的 Windows Phone 8 应用程序开发的设计页面未加载，即文件 MainPage.xaml 仅显示以下错误：

发生了未处理的异常

System.TypeInitializationException .......

单击重新加载设计器也不会重新加载

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T20:21:16.937

上周我也遇到了同样的问题，幸运的是我的情况（我希望你也是）在更新我的免费 Windows 8 开发人员许可证时问题得到了解决。为此，请以管理员身份运行 power shell 并执行 Show-WindowsDeveloperLicenseRegistration，这将启动许可证更新过程。完成后，单击 VS2012 设计器界面上的重新加载按钮，设计器应该会成功加载。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-21T11:54:15.410

下载vs2012更新2 ..它将解决问题..

# javascript - ReferenceError：未定义“文档”

> ID：13552250
> 
> 赞同：2
> 
> 时间：2012-11-25T15:06:25.573
> 
> 标签：javascript, google-apps-script, google-sites, referenceerror

我是 JavaScript 新手，对 Google Apps 脚本更是陌生。我正在尝试一个简单的函数来显示当前日期（仅显示日期、月份 e 和全年），但 Google 脚本显示错误 ReferenceError: "document" is not defined。

我的目标是在 Google 网站中使用此功能。这是代码：

```
function Data()
{
var d=new Date();
var dia=d.getDate();
var mes=d.getMonth();
var ano=d.getFullYear();
var DataCompleta=dia + "/" + mes + "/" + ano
document.write(DataCompleta);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-25T15:18:11.303

作为 Google Apps 脚本运行的代码不会在浏览器中运行，因此您不能将 Web 浏览器 API 与它一起使用。如果要将内容输出到 Google 站点，则需要使用[API for Sites](https://developers.google.com/apps-script/service_sites)。

大概您会想要类似的东西[`createWebPage`](https://developers.google.com/apps-script/class_site#createWebPage)，然后使用[结果对象上的方法](https://developers.google.com/apps-script/class_page)将内容添加到其中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-25T15:27:15.937

如前一个答案所述，您不能直接在浏览器中执行功能，您必须选择一个所谓的“[容器](https://developers.google.com/apps-script/execution_methods)”来从中运行您的功能。我建议您阅读[文档](https://developers.google.com/apps-script/your_first_script)，并尝试一些[简单的教程](https://developers.google.com/apps-script/articles)来了解如何执行 GAS。

* * *

**编辑：**根据您的评论，随时查看使用 UiApp 构建的[此脚本](https://script.google.com/d/1I23ey7VM-N2_UbxSEIngF1RuGlCKknb7-gjH9kcKix93npqHawMI1VrO/edit)，结果可[在此处](https://script.google.com/macros/s/AKfycbzqfGfsJ9ugtAvIBvJDZSg1LfAcX1jGNnW8erYUfKjOddJHlJs/exec)查看并显示您想要的内容：**“您好，今天是 25/10/2012”**

# java - monad 的一般情况可以在 java 6 中表达吗？

> ID：13552254
> 
> 赞同：5
> 
> 时间：2012-11-25T15:06:57.093
> 
> 标签：java, generics, haskell, monads, higher-kinded-types

monad 的一般情况可以在 Java 6 中表达吗？注意“一般情况”这个词——monad 的一般情况可能是不可表达的，尽管 monad 的许多特殊情况（即许多特定的 monad）是可以表达的。

这里的问题是（缺乏）[Java 中的高级泛型](https://stackoverflow.com/questions/876948/higher-kinded-generics-in-java/876966)；但是，我看到示例 Haskell 代码确实使用[https://stackoverflow.com/a/877036/1123502](https://stackoverflow.com/a/877036/1123502)（即`public class Fix<F extends Fix<F>>`）之类的方法移植到了 Java。

当然，非类型安全的实现（如使用 Object 和向下转换）并不有趣。

**更新：**有 2 个常见的 monad 定义：join-fmap 和 bind-return。尽管它们（在数学上）是等价的，但它们可能不是等价的，因为一种定义可以用 Java 表达，而另一种则不是（但是，在我看来，不等价的可能性不大）。所以我的问题涉及这两个定义。

底线：是否有人克服了所有障碍并在 Java 6 中编写了“一般情况”单子？或者，或者，请指出一篇论文，或一篇详尽的博客文章，或彻底解释为什么不可能。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-25T17:38:33.917

并非没有肮脏的铸造技巧。正如您已经注意到的那样，Java 不支持类型级别的多态性（在 Scala 领域中也称为“高级类型”）。

这是一种方法：假设您要实现一个仿函数。您想写`Functor<F<A>>`，`F`例如 a`List`或`Maybe`，但这是行不通的。但是你可以`Base<X,Y>`为更高级的东西设置一个“基类”。`X`必须是您真实班级的“见证人”，例如`List`. `Y`是通常的通用参数。现在你的仿函数变成`Functor<Base<F,A>>`了，但是所有想要与它一起使用的类，都需要实现`Base<X,Y>`：

```
class List<A> implements Base<List.Witness,A> {
   public class Witness{}
   ...
}

public interface Functor<F> {
    public <A, B> Base<F, B> map(F1<A, B> fn, Base<F, A> nestedA);
}

public class ListFunctor implements Functor<List.Witness> {
    public <A, B> Base<List.Witness, B> map(F1<A, B> fn, Base<List.Witness, A> nestedA) {
       ...
    }  
} 
```

当然要付出的代价是你得到一个`Base<List.Witness,B>`，而不是一个`List<B>`。如果您留在那个更高种类的域中，这可能会很好，当然您可以为方便起见使用转换功能，但它仍然不是很好。

有关实现，请参阅我的不太严重的项目[highJ](http://code.google.com/p/highj/)。请注意，我正在开发一个更接近上面示例的完全重写且稍微方便的版本。

对于严肃的代码，请考虑用 Scala 编写这样的东西（或使用 Scalaz）。

# java - 线程调度 - 共享数组

> ID：13552255
> 
> 赞同：3
> 
> 时间：2012-11-25T15:06:58.037
> 
> 标签：java, multithreading, jpf

我需要两个线程来编写一个共享的整数数组。两个线程都需要写入该数组的所有元素。每个线程将写入 1 或 7，结果应类似于 171717171（或 71717171）。为此，我将第一个 Thread1 写入位置 0，然后等待。Thread2 现在写入位置 0 和 1，通知 Thread1，然后等待。Thread1 在位置 1 和 2 写入，通知 Thread2 并等待，等等。使用以下代码，我得到正确的输出，尽管当使用 JPF 运行时它发现死锁。它变得非常令人沮丧，因为我找不到它有什么问题。任何意见，将不胜感激。

```
import java.util.logging.Level;
import java.util.logging.Logger;

public class WriterThreadManager {

    private int[] array = {0, 0, 0, 0, 0, 0, 0, 0, 0, 0};
    private Thread thread7;
    private Thread thread1;

    public static void main(String[] args) {
        WriterThreadManager mng = new WriterThreadManager();
        mng.exec();

    }

    public WriterThreadManager() {
        thread7 = new Thread(new WriterRunnable(this, 7));
        thread1 = new Thread(new WriterRunnable(this, 1));
    }

    public void overwriteArray(int pos, int num) {
        array[pos] = num;
        printArray();
    }

    private  void printArray() {
        for (int i = 0; i < array.length; i++) {
            System.out.print(array[i]);
        }
        System.out.println("");
    }

    public synchronized void stopThread() {
        try {
            this.wait();
        } catch (InterruptedException ex) {
            Logger.getLogger(WriterThreadManager.class.getName()).log(Level.SEVERE, null, ex);
        }
    }

    public synchronized void wakeUpThread() {
        notifyAll();
    }

    private void exec() {
        thread7.start();
        thread1.start();
    }

    public int length() {
        return array.length;
    }
}

public class WriterRunnable implements Runnable {

    private WriterThreadManager mng;
    private int numberToWrite;
    private static boolean flag = true;

    @Override
    public void run() {
        int counter = 0;
        int j = 0;

        //first thread to get in should write only at 
        //position 0 and then wait.
        synchronized (mng) {
            if (flag) {
                flag = false;
                mng.overwriteArray(0, numberToWrite);
                j = 1;
                waitForOtherThread();
            }
        }
        for (int i = j; i < mng.length(); i++) {
            mng.overwriteArray(i, numberToWrite);
            counter++;
            if (i == mng.length() - 1) {
                mng.wakeUpThread();
                break;
            }
            if (counter == 2) {
                waitForOtherThread();
                counter = 0;
            }
        }
    }

    private void waitForOtherThread() {
        mng.wakeUpThread();
        mng.stopThread();
    }

    public WriterRunnable(WriterThreadManager ar, int num) {
        mng = ar;
        numberToWrite = num;
    }
} 
```

ps：执行示例：

```
1000000000
7000000000
7700000000
7100000000
7110000000
7170000000
7177000000
7171000000
7171100000
7171700000
7171770000
7171710000
7171711000
7171717000
7171717700
7171717100
7171717110
7171717170
7171717177
7171717171 
```

JPF 的错误快照如下：

```
thread java.lang.Thread:{id:1,name:Thread-1,status:WAITING,priority:5,lockCount:1,suspendCount:0}
  waiting on: WriterThreadManager@152
  call stack:
    at java.lang.Object.wait(Object.java)
    at WriterThreadManager.stopThread(WriterThreadManager.java:43)
    at WriterRunnable.waitForOtherThread(WriterRunnable.java:53)
    at WriterRunnable.run(WriterRunnable.java:45)

thread java.lang.Thread:{id:2,name:Thread-2,status:WAITING,priority:5,lockCount:1,suspendCount:0}
  waiting on: WriterThreadManager@152
  call stack:
    at java.lang.Object.wait(Object.java)
    at WriterThreadManager.stopThread(WriterThreadManager.java:43)
    at WriterRunnable.waitForOtherThread(WriterRunnable.java:53)
    at WriterRunnable.run(WriterRunnable.java:45) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-30T21:47:57.200

我相信比赛是由于这种方法：

```
private void waitForOtherThread() {
    mng.wakeUpThread();
    mng.stopThread();
} 
```

虽然个人`wakeUpThread()`和`stopThread()`方法是同步的，但您有机会在这些调用之间进行意外的线程调度。

考虑：

```
thread7 - notify thread1 to wakup
thread1 - wake up
thread1 - work to completion
thread1 - notify thread7 to wakeup
thread1 - wait to be notified to wakeup
thread7 - wait to be notified to wakeup 
```

在这种情况下，您已经死锁，因为 thread1 在 thread7 有机会 wait() 之前发送了它的 notifyAll()。

在不同的环境中运行可能会打乱您的时间并导致出现这些类型的行为。

为了避免这种情况，我建议这样做：

```
private void waitForOtherThread() {
    synchronized(mng) {
        mng.wakeUpThread();
        mng.stopThread();
    }
} 
```

或者更好的是，按照@KumarVivekMitra 的建议使用信号量。信号量结合了通知系统和计数器，因此通知和等待的顺序无关紧要。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-25T15:19:48.707

**-**我认为这里更好的方法是`java.util.Semaphores`，这将帮助您一次通过特定数量的线程来决定对对象资源的访问。

**-**好吧，您也可以使用`SingleThreadExecutor`来解决这个问题，它会在继续执行第二个任务之前启动并完成一个任务，因此**您这边不需要同步。**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-26T07:15:54.627

我认为你在这里不需要任何形式的协调。只需让一个线程写入偶数位置，另一个线程写入奇数位置。让他们俩尽可能快地走。完毕！

# javascript - 谷歌地图干扰 Twitter Bootstrap

> ID：13552257
> 
> 赞同：2
> 
> 时间：2012-11-25T15:07:04.317
> 
> 标签：javascript, google-maps-api-3, twitter-bootstrap

我有一个使用引导程序的页面，并添加了一个地图（API v3）。

起初它工作正常，但是当我折叠地图时 - 我无法重新打开它。

我查看了类似的 SO 问题，但找不到解决此问题的问题。

我的 HTML：

```
<div id="mapHeader" data-toggle="collapse" data-target="#map">
    Header
</div>
<div id="map" class="collapse in">
    <div id="map_canvas"></div>
</div> 
```

CSS：

```
#map_canvas { height: 100% }
#map {height: 30em; width: 50%;max-height:100%;} 
```

Javascript 只加载地图。

[一个小提琴来演示](http://jsfiddle.net/jnfsmile/kS9jh/3/)

[似乎相关，但我无法实施相同的解决方案](https://stackoverflow.com/questions/10197128/google-maps-api-v3-not-rendering-competely-on-tabbed-page-using-twitters-bootst)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-25T15:34:36.333

问题是引导折叠插件没有为您的地图画布注册尺寸，因此它不知道将其展开到什么高度。要解决此问题，请向您的喜欢添加一些尺寸`#map_canvas`：

```
#map_canvas { height: 30em; width: 100%; } 
```

**编辑**：正如 OP 在下面评论的那样，`#map_canvas`容器上需要一个特定的高度，以允许可折叠容器的正确展开。

# eclipse - 即使项目是最新的，Subclipse 也会显示脏装饰器

> ID：13552259
> 
> 赞同：1
> 
> 时间：2012-11-25T15:07:23.690
> 
> 标签：eclipse, svn, subclipse

我有一个使用 subversion 和 subclipse 的 eclipse 项目。目前，项目的顶级文件夹显示脏装饰器，即使当我执行“比较 -> 来自存储库的最新”时，响应是“所选输入之间没有差异”。此外，命令行中的“svn diff”没有显示任何差异。

这是一个成绩单：

```
[ollie@devdataload workspace]$ svn diff DataLoadEagleOliver

Property changes on: DataLoadEagleOliver
___________________________________________________________________
Added: svn:mergeinfo
   Merged /FinancialReport/trunk/Java/DataLoadEagle:r1178-1186

[ollie@devdataload workspace]$ 
```

这是预期的行为，我错过了一些东西，还是 subclipse 的已知问题？

我正在使用 subclipse 1.6.18 和 Eclipse Indigo。接下来我要尝试将 subclipse 升级到最新版本。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-25T15:19:52.747

确实显示`svn diff`了一个区别：`svn:mergeinfo`属性。当您进行比较时，这可能不会出现，但这是一个区别，您可能应该提交它。

每当您从另一个分支合并时，该属性就会自动更改。它会跟踪哪些修订已经被合并，因此它可以在您下次从同一个分支合并时跳过它们。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-26T15:22:43.453

提交或恢复选项是查看哪些路径发生更改的好方法。当仅对属性进行更改时，这些对话框将有一个装饰器来显示这一点。Eclipse 比较选项专注于文件内容，因此您无法真正看到这些编辑器中的属性差异。

# json - Nodejs将json写入文件

> ID：13552261
> 
> 赞同：9
> 
> 时间：2012-11-25T15:07:29.807
> 
> 标签：json, node.js

我刚开始学习nodejs。我目前正在使用套接字并制作聊天程序。

我想将整个聊天保存到 json 文件中。目前我的代码是这样的：

```
 socket.on('chat', function  (data) {
    message = {user : data.message.user, message : data.message.message};
    chat_room.sockets.emit('chat', {message: message});

    jsonString = JSON.stringify(message);

    fs.appendFile("public/chat.json", jsonString, function(err) {
        if(err) {
            console.log(err);
        } else {
            console.log("The file was saved!");
        }
    }); 

  }); 
```

这目前工作完美，但写入文件的 json 是错误的。

这给了我一个错误的json

`{"user":"niraj","message":"hw r u?"}{"user":"ntechi","message":"hello"}{"user":"ntechi","message":"hw r u?"}`

触发消息时调用上述代码。我想要这种格式的json

`{"user":"awd","message":"hw r u?","user":"ntechi","message":"hello","user":"ntechi","message":"hw r u?"}`

任何人都可以帮助我吗？提前致谢

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-25T15:12:55.053

第一组错误的 JSON 被创建，因为您每次收到消息时都将一段 JSON 附加到文件中。

第二组 JSON 也是错误的 - 每个属性名称都必须是唯一的。

大概你想要类似的东西：

```
[
{"user":"niraj","message":"hw r u?"},
{"user":"ntechi","message":"hello"},
{"user":"ntechi","message":"hw r u?"}
] 
```

在这种情况下，您需要使用的逻辑是：

1.  从文件中读取数据
2.  将数据解析为 JSON 并分配给变量
3.  如果发生错误，请为该变量分配一个空数组
4.  `push`将消息对象放到数组的末尾
5.  对数组进行字符串化
6.  用新字符串覆盖文件

# eclipse - Eclipse 工作区：为什么？

> ID：13552266
> 
> 赞同：150
> 
> 时间：2012-11-25T15:07:58.427
> 
> 标签：eclipse, workspace

我已经看到、阅读和思考过使用 Workspaces 的不同方式（每个项目、每个应用程序（是否拥有多资产）、每个程序语言、每个目标（Web 开发、插件等）等等），我我仍然怀疑最好的方法是什么。

任何人都可以对此进行详细但不是一页长的见解吗？

这涉及很多子问题，可以这么说，我不知道我应该问的所有具体子问题，因为我确信我不知道 Eclipse（和工作区）的所有方面，但我我会尝试举一个我正在寻找的例子：

*   做什么的？
*   Eclipse 开发团队希望它用于什么？
    *   其他/大多数人怎么想？
    *   你怎么看？
    *   ... ?
*   为什么？
*   是否存在配置冲突与共享优点？
*   任何文件空间原因？
*   表现？
*   ... ?

我说的是使用不同语言和协议的开发人员的最小用例，**不一定**所有这些都在一个项目中（例如，某些项目的 Php、Javascript 和 XML，其他项目的 C#，还有其他项目的 Java 和 SQL，等等..)

> 编辑 2012-11-27：不要误会我的意思。我不怀疑 Workspaces 的使用，我只想按原样使用它，或者如果有人认为它更好的话。所以“为了什么？” 意思是：最好的用途是什么？“为什么？” 实际上是针对“为什么？”，换句话说：告诉我你回答的原因。

* * *

## 回答 #1

> 赞同：47
> 
> 时间：2014-12-23T20:47:24.140

我将向您提供我对 Java 世界感到非常不舒服的人的看法，我认为这也是您的情况。

# **这是什么**

工作区是组合在一起的概念：

1.  一组（不知何故）相关的项目
2.  与所有这些项目有关的一些配置
3.  Eclipse 本身的一些设置

这是通过创建一个目录并将其放入（您不必这样做，它为您完成）文件来实现的，这些文件设法告诉 Eclipse 这些信息。您所要做的就是选择将放置这些文件的文件夹。而且这个文件夹不需要和你放置源代码的地方一样——最好不会。

探索上面的每个项目：

> 1.  一组（不知何故）相关的项目

Eclipse 似乎总是与特定的工作区关联打开，即，如果您在*工作区 A*中并决定切换到*工作区 B*（文件 > 切换工作区），Eclipse 将自行关闭并重新打开。*与工作区 A*关联的所有项目（并出现在项目资源管理器中）将不再出现，与*工作区 B*关联的项目现在将出现。因此，要在 Eclipse 中打开的项目似乎*必须*与工作区相关联。

请注意，这并不意味着项目源代码必须在工作区中。不知何故，工作区将与磁盘中项目的物理路径有关（有人知道怎么做吗？我在工作区内部查看了一些指向项目路径的文件，但没有成功）。

这样，一个项目一次可以位于多个工作区中。因此，将工作空间和源代码分开似乎很好。

> 2.  与所有这些项目有关的一些配置

我听说一些东西，比如 Java 编译器版本（比如 1.7，例如 - 我不知道“版本”是否是这里的词），是工作区级别的配置。如果您的工作空间中有多个项目，并在 Eclipse 中编译它们，那么它们都将使用相同的 Java 编译器进行编译。

> 3.  Eclipse 本身的一些设置

有些东西，比如你的键绑定，也存储在工作区级别。因此，如果您定义 ctrl+tab 将以智能方式切换选项卡（而不是堆叠它们），则这只绑定到您当前的工作区。如果您想在另一个工作区中使用相同的键绑定（我认为您想要！），似乎您必须在工作区之间导出/导入它们（如果这是真的，这个 IDE 是在一些非常奇怪的前提下构建的）。[这是关于此的链接](http://mcuoneclipse.com/2012/04/04/copy-my-workspace-settings/)。

似乎工作空间在不同的 Eclipse 版本之间也不一定兼容。[本文](http://eclipse.dzone.com/articles/eclipse-workspace-tips)建议您将工作空间命名为包含 Eclipse 版本的名称。

而且，更重要的是，一旦您选择了一个文件夹作为您的工作区，请不要触摸其中的任何文件，否则您会遇到一些麻烦。

# **我认为如何使用它的好方法**

（实际上，在我写这篇文章时，我不知道如何以一种好的方式使用它，这就是我寻找答案的原因——我试图在这里组装）

1.  为您的项目创建一个文件夹：
    `/projects`

2.  为每个项目创建一个文件夹，并将项目的子项目分组在其中：
    `/projects/proj1/subproj1_1`
    `/projects/proj1/subproj1_2`
    `/projects/proj2/subproj2_1`

3.  为您的工作区创建一个单独的文件夹：
    `/eclipse-workspaces`

4.  为您的项目创建工作区：
    `/eclipse-workspaces/proj1`
    `/eclipse-workspaces/proj2`

* * *

## 回答 #2

> 赞同：38
> 
> 时间：2012-11-26T04:32:19.957

工作区的全部意义在于将一组相关的项目组合在一起，这些项目通常构成一个应用程序。工作区框架归结为`eclipse.core.resources`插件，它在设计上自然是有意义的。

项目具有性质，构建器附加到特定项目，并且当您更改一个项目中的资源时，您可以在同一工作区中的项目中实时看到编译或其他问题。因此，我建议的策略是为您从事的不同项目设置不同的工作区，但在 Eclipse 中没有工作区，就不会有项目和配置集合的概念，毕竟它是一个 IDE 工具。

如果这没有意义，请问 Net Beans 或 Visual Studio 如何解决这个问题？这是同一个主题。Maven 就是一个很好的例子，将一组相关的 maven 项目签出到一个工作区可以让您实时开发和查看错误。如果不是工作空间，您还有什么建议？RCP 应用程序可以是不同的野兽，具体取决于它的用途，但在真正的 IDE 意义上，我不知道什么是比工作区或项目上下文更好的解决方案。只是我的想法。- 邓肯

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-12-31T17:03:22.213

基本上，工作空间的范围分为两点。

第一点（也是主要的）是它自己的eclipse，它与设置和元数据配置（插件ctr）有关。每次创建项目时，eclipse 都会收集所有配置并将它们存储在该工作区中，如果以某种方式在同一个工作区中存在冲突项目，您可能会失去 eclipse 自身的某些功能甚至稳定性。

第二个（次要）发展战略可以采用的点。一旦满足（并掌握了）主要范围并且需要对项目关系（如库、透视 ctr）进行进一步调整，然后根据开发习惯或可能的语言/框架“行为”启动单独的工作区可能是合适的。例如，DLTK 是一头野兽，应该被关在一个单独的笼子里。论坛上有很多抱怨它停止工作（正常或根本不工作），建议的解决方案是从当前工作区清除等效插件的设置。

就个人而言，我发现自己在涉及与使用插件的当前状态所带来的已知问题相关的单独工作区时更倾向于语言区别。最好我将它们保持在最低数量，因为当项目变得...很多时，这会导致更少的挫败感，而且版本控制不是您保留项目的唯一版本。最后，如果由于存在不相关的项目而加载了大量（不必要的）插件，加载速度和性能可能会出现问题。底线；没有一个解决方案可以解决每个问题，也没有解决问题的大师蓝图。这是随着经验而增长的东西，但少即是多！

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-10-29T22:05:15.577

尽管我已经使用 Eclipse 多年，但这个“答案”只是推测（我今晚将尝试）。如果它被否决了，那么显然我错了。

Oracle 依靠 CMake 为其 MySQL 连接器 C 源代码生成 Visual Studio“解决方案”。解决方案中包含可以单独或集体（由解决方案）编译的“项目”。每个项目都有自己的 makefile，使用与其他项目不同的设置来编译解决方案的一部分。

同样，我希望 Eclipse 工作区可以容纳我相关的 makefile 项目 (Eclipse)，并带有一个主项目，其依赖项将各种唯一的 makefile 项目编译为构建其“解决方案”的先决条件。（我的文件夹结构将如@Rafael 所述）。

所以我希望使用 Workspaces 的一个好方法是模拟 Visual Studio 将*不同*项目组合成解决方案的能力。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2022-01-18T20:20:41.153

它只是用于构建项目的功能。显然，Eclipse 设计人员试图避免对 Eclipse 进行全局设置，并决定将它们放入工作区。每个 Eclipse 应用程序都依赖于每个工作区设置。这是一个好的决定吗？我认为并非如此。它缺乏灵活性。期望可以避免全局设置是天真的。它不允许您拥有单个项目（这对 Eclipse 设计人员来说可能是一个惊喜，但它经常发生）。但它仍然有效。许多人使用它。有时他们会受苦，但更多时候一切都很好。

# ios - 在 Airplay 上的 UIWebview 背景中播放视频

> ID：13552267
> 
> 赞同：4
> 
> 时间：2012-11-25T15:08:06.807
> 
> 标签：ios, airplay, apple-tv

我有一个应用程序可以在 UIWebView 中播放多个网络视频，例如 Youtube 和 Vimeo。当视频播放时，可以通过 AirPlay 将其发送到 Apple TV。

目前，在通过 AirPlay 播放期间，当我暂停应用程序并将其移至后台时，视频会停止。

**我想要的结果是视频将继续在 Apple TV 上播放。**

经过一番研究，我发现我必须将`Required background modes`Info.plist 中的 设置为`App plays audio`. 不幸的是，这不起作用。

因此，当应用程序移至后台时，需要设置什么来保持视频通过 AirPlay 播放。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-10T09:10:24.610

我已经在 iOS6 上使用 UIWebView 加载视频网页[对此](https://stackoverflow.com/questions/11616001/uiwebview-html5-audio-pauses-in-ios-6-when-app-enters-background/12414719)进行了测试，它完成了这项工作。需要设置音频会话才能`AVAudioSessionCategoryPlayback`在后台播放。

```
[[AVAudioSession sharedInstance] setCategory:AVAudioSessionCategoryPlayback error:nil]; 
```

# c# - Dns.GetHostEntry 不转换包含 IP 的字符串

> ID：13552268
> 
> 赞同：1
> 
> 时间：2012-11-25T15:08:12.780
> 
> 标签：c#, system.net, system.net.sockets

该函数`Dns.GetHostEntry`不`ipaddresses`作为字符串处理，例如`127.0.0.1`，但如果我作为参数传递`google.de`，它工作得很好。

难道我做错了什么 ？

```
public static Socket connSock(string Server, int Port)
{
        Socket s = null;            
        IPHostEntry ipHE = Dns.GetHostEntry(Server);
        //IPAddress[] ipA = null;
        IPEndPoint ipE = null;

        foreach (IPAddress address in ipHE.AddressList)
        {

            ipE = new IPEndPoint(address, Port);
            Socket tempSocket = new Socket(ipE.AddressFamily, SocketType.Stream, ProtocolType.Tcp);

            tempSocket.Connect(ipE);

            if (tempSocket.Connected)
            {
                s = tempSocket;
                break;
            }
            else
            {
                continue;
            }
        }

        return s;
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T15:18:54.287

这可能意味着您的系统无法获取主机条目。当没有为给定 IP 定义 PTR 记录时，就会发生这种情况（例如）。

# cocos2d-iphone - 使用 box2d GetUserData 和 SetUserData 时的 EXC_BAD_ACCESS

> ID：13552270
> 
> 赞同：0
> 
> 时间：2012-11-25T15:08:55.400
> 
> 标签：cocos2d-iphone, box2d, exc-bad-access

这几天我一直在纠结这个问题，我迫切需要你的帮助。由于我一直在关注 Ray Wenderlich 的教程，当我尝试从 ContactListener 中的 b2Body 获取用户数据时，我仍然收到 EXC_BAD_ACCESS 错误，因此**WHContactListener.h**：

```
#import <Foundation/Foundation.h>
#import "cocos2d.h"
#import "Box2D.h"

class WHContactListener : public b2ContactListener
{
private:
    void BeginContact(b2Contact* contact);
    void EndContact(b2Contact* contact);
}; 
```

**WHContactListener.mm**

```
#import "WHContactListener.h"
#import "cocos2d.h"
#import "ExSprite.h"

void WHContactListener::BeginContact(b2Contact *contact)
{

    b2Body *bodyA = contact->GetFixtureA()->GetBody();
    b2Body *bodyB = contact->GetFixtureB()->GetBody();

    /*The problem occurs here, while it returns a non-null value it just crashes when I implement any method here, such as NSLog */

    ExSprite *spriteB = (ExSprite*)bodyB->GetUserData();
    NSLog(@"output %@", spriteB);

}

void WHContactListener::EndContact(b2Contact *contact)
{

} 
```

精灵类**ExSprite.h**

```
#import <Foundation/Foundation.h>
#import "cocos2d.h"
#import "Box2D.h"

@interface ExSprite : CCSprite {

    BOOL _exploded;
    b2Body *_explBody;
}

@property (nonatomic, readwrite) BOOL exploded;
@property (nonatomic, assign) b2Body *explBody;

-(void)setPhysicsBody:(b2Body*)body;

@end 
```

**ExSprite.mm**

```
#import "ExSprite.h"
#import "HelloWorldLayer.h"

#pragma mark - ExSprite
@implementation ExSprite

@synthesize exploded = _exploded;
@synthesize explBody = _explBody;

-(void)setPhysicsBody:(b2Body *)body
{
    _explBody = body;
    _explBody->SetUserData(self);
}

// this method will only get called if the sprite is batched.
// return YES if the physics values (angles, position ) changed
// If you return NO, then nodeToParentTransform won't be called.
-(BOOL) dirty
{
    return YES;
}

// returns the transform matrix according the Chipmunk Body values
-(CGAffineTransform) nodeToParentTransform
{   
    b2Vec2 pos  = _explBody->GetPosition();

    float x = pos.x * PTM_RATIO;
    float y = pos.y * PTM_RATIO;

    if ( ignoreAnchorPointForPosition_ ) {
        x += anchorPointInPoints_.x;
        y += anchorPointInPoints_.y;
    }

    // Make matrix
    float radians = _explBody->GetAngle();
    float c = cosf(radians);
    float s = sinf(radians);

    if( ! CGPointEqualToPoint(anchorPointInPoints_, CGPointZero) ){
        x += c*-anchorPointInPoints_.x + -s*-anchorPointInPoints_.y;
        y += s*-anchorPointInPoints_.x + c*-anchorPointInPoints_.y;
    }

    // Rot, Translate Matrix
    transform_ = CGAffineTransformMake( c,  s,
                                       -s,  c,
                                       x,   y );    

    return transform_;
}

-(void) dealloc
{
    // 
    [super dealloc];
}

@end 
```

最后是我使用的层**HelloWorld.h**

```
#import <GameKit/GameKit.h>

// When you import this file, you import all the cocos2d classes
#import "cocos2d.h"
#import "Box2D.h"
#import "GLES-Render.h"
#import "WHContactListener.h"

//Pixel to metres ratio. Box2D uses metres as the unit for measurement.
//This ratio defines how many pixels correspond to 1 Box2D "metre"
//Box2D is optimized for objects of 1x1 metre therefore it makes sense
//to define the ratio so that your most common object type is 1x1 metre.
#define PTM_RATIO 32

// HelloWorldLayer
@interface HelloWorldLayer : CCLayer <GKAchievementViewControllerDelegate, GKLeaderboardViewControllerDelegate>
{
    CCTexture2D *spriteTexture_;    // weak ref
    b2World* world;                 // strong ref
    GLESDebugDraw *m_debugDraw;     // strong ref
    WHContactListener* contactListener;
    CCRenderTexture *target;
    CCSprite *brush;

    b2Body *groundBody;
    NSMutableArray *shapeVert;
}

@property (nonatomic, readwrite)b2Body *groundBody;
@property (nonatomic, assign)NSMutableArray *shapeVert;

// returns a CCScene that contains the HelloWorldLayer as the only child
+(CCScene *) scene;

@end 
```

和**HelloWorld.mm**

```
#import "HelloWorldLayer.h"
// Needed to obtain the Navigation Controller
#import "AppDelegate.h"
#import "PhysicsSprite.h"
#import "ExSprite.h"

enum {
    kTagParentNode = 1,
};

#pragma mark - HelloWorldLayer

@interface HelloWorldLayer()
-(void) initPhysics;
-(void) addNewSpriteAtPosition:(CGPoint)p;

@end

@implementation HelloWorldLayer

@synthesize groundBody = groundBody_;
@synthesize shapeVert = shapeVert_;

+(CCScene *) scene
{
    // 'scene' is an autorelease object.
    CCScene *scene = [CCScene node];

    // 'layer' is an autorelease object.
    HelloWorldLayer *layer = [HelloWorldLayer node];

    // add layer as a child to scene
    [scene addChild: layer];

    // return the scene
    return scene;
}

-(id) init
{
    if( (self=[super init])) {

        // enable events

        self.isTouchEnabled = YES;
        self.isAccelerometerEnabled = YES;
        CGSize s = [CCDirector sharedDirector].winSize;

        // init physics
        [self initPhysics];

        target = [CCRenderTexture renderTextureWithWidth:s.width height:s.height pixelFormat:kCCTexture2DPixelFormat_RGBA8888];
        [target retain];
        [target setPosition:ccp(s.width/2, s.height/2)];
        [self addChild:target z:0];

        brush = [CCSprite spriteWithFile:@"bird.png"];
        [brush retain];

        [self scheduleUpdate];
    }
    return self;
}

-(void) dealloc
{
    delete world;
    world = NULL;
    delete contactListener;
    contactListener = NULL;
    delete m_debugDraw;
    m_debugDraw = NULL;

    [super dealloc];
}   

-(void) initPhysics
{

    CGSize s = [[CCDirector sharedDirector] winSize];

    b2Vec2 gravity;
    gravity.Set(0.0f, -10.0f);
    world = new b2World(gravity);

    // Do we want to let bodies sleep?
    world->SetAllowSleeping(true);

    world->SetContinuousPhysics(true);

    contactListener = new WHContactListener();
    world->SetContactListener(contactListener);

    m_debugDraw = new GLESDebugDraw( PTM_RATIO );
    world->SetDebugDraw(m_debugDraw);

    uint32 flags = 0;
    flags += b2Draw::e_shapeBit;
    //      flags += b2Draw::e_jointBit;
    //      flags += b2Draw::e_aabbBit;
    //      flags += b2Draw::e_pairBit;
    //      flags += b2Draw::e_centerOfMassBit;
    m_debugDraw->SetFlags(flags);       

    // Define the ground body.
    b2BodyDef groundBodyDef;
    groundBodyDef.position.Set(s.width/2/PTM_RATIO, s.height/2/PTM_RATIO); // bottom-left corner

    //SET USERDATA

    //groundBodyDef.userData = groundBody;

    // Call the body factory which allocates memory for the ground body
    // from a pool and creates the ground box shape (also from a pool).
    // The body is also added to the world.
    groundBody = world->CreateBody(&groundBodyDef);

    // Define the ground box shape.
    b2EdgeShape groundBox;      

    float32 x1 = 2*cosf(0.0f * b2_pi/180);
    float32 y1 = 2*sinf(0.0f * b2_pi/180);    

    for(int32 i=1; i<=18; i++){
        float32 x2 = 2*cosf((i*20) * b2_pi / 180);
        float32 y2 = 2*sinf((i*20) * b2_pi / 180);

        groundBox.Set(b2Vec2(x1,y1), b2Vec2(x2,y2));
        groundBody->CreateFixture(&groundBox, 0);

        x1 = x2;
        y1 = y2;
    }

}

-(void) draw
{
    //
    // IMPORTANT:
    // This is only for debug purposes
    // It is recommend to disable it
    //
    [super draw];

    ccGLEnableVertexAttribs( kCCVertexAttribFlag_Position );

    kmGLPushMatrix();

    world->DrawDebugData(); 

    kmGLPopMatrix();
}

-(void) addNewSpriteAtPosition:(CGPoint)p
{
    //CCLOG(@"Add sprite %0.2f x %02.f",p.x,p.y);
    CCNode *parent = [self getChildByTag:kTagParentNode];

    //We have a 64x64 sprite sheet with 4 different 32x32 images.  The following code is
    //just randomly picking one of the images
    int idx = (CCRANDOM_0_1() > .5 ? 0:1);
    int idy = (CCRANDOM_0_1() > .5 ? 0:1);

    //PhysicsSprite *sprite = [PhysicsSprite spriteWithTexture:spriteTexture_ rect:CGRectMake(32 * idx,32 * idy,32,32)];
    ExSprite *sprite = [ExSprite spriteWithTexture:spriteTexture_ rect:CGRectMake(32*idx, 32*idy, 32, 32)];

    [parent addChild:sprite];

    sprite.position = ccp( p.x, p.y);

    // Define the dynamic body.
    //Set up a 1m squared box in the physics world
    b2BodyDef bodyDef;
    bodyDef.type = b2_dynamicBody;
    bodyDef.position.Set(p.x/PTM_RATIO, p.y/PTM_RATIO);
    //USERDATA set
    //bodyDef.userData = sprite;
    b2Body *body = world->CreateBody(&bodyDef);

    // Define another box shape for our dynamic body.
    b2PolygonShape dynamicBox;
    dynamicBox.SetAsBox(.5f, .5f);//These are mid points for our 1m box

    // Define the dynamic body fixture.
    b2FixtureDef fixtureDef;
    fixtureDef.shape = &dynamicBox;
    fixtureDef.density = 1.0f;
    fixtureDef.restitution = 0.0f;
    //fixtureDef.density = rand() * 20.0f;
    fixtureDef.friction = 0.3f;
    body->CreateFixture(&fixtureDef);

    [sprite setPhysicsBody:body];

    //NSLog(@"here %@", body->GetUserData());
}

-(void) update: (ccTime) dt
{
    //It is recommended that a fixed time step is used with Box2D for stability
    //of the simulation, however, we are using a variable time step here.
    //You need to make an informed choice, the following URL is useful
    //http://gafferongames.com/game-physics/fix-your-timestep/

    int32 velocityIterations = 8;
    int32 positionIterations = 1;

    // Instruct the world to perform a single step of simulation. It is
    // generally best to keep the time step and iterations fixed.
    world->Step(dt, velocityIterations, positionIterations);    
}

- (void)ccTouchesEnded:(NSSet *)touches withEvent:(UIEvent *)event
{
    //Add a new body/atlas sprite at the touched location
    for( UITouch *touch in touches ) {
        CGPoint location = [touch locationInView: [touch view]];

        location = [[CCDirector sharedDirector] convertToGL: location];

        [self addNewSpriteAtPosition: location];
    }
}

-(void)ccTouchesMoved:(NSSet *)touches withEvent:(UIEvent *)event
{
    /*UITouch *touch = (UITouch*)touches.anyObject;
    CGPoint start = [touch locationInView:[touch view]];
    start = [[CCDirector sharedDirector] convertToGL:(start)];
    CGPoint end = [touch previousLocationInView:[touch view]];
    end = [[CCDirector sharedDirector] convertToGL:end];
    [target begin];

    float distance = ccpDistance(start, end);

    for(int i =0; i < distance; i++){
        float difx = end.x - start.x;
        float dify = end.y - start.y;
        float delta = (float)i / distance;
        [brush setPosition:ccp(start.x + (difx*delta), start.y + (dify * delta))];

        [brush visit];
    }

    [target end];
    */
}

#pragma mark GameKit delegate

-(void) achievementViewControllerDidFinish:(GKAchievementViewController *)viewController
{
    AppController *app = (AppController*) [[UIApplication sharedApplication] delegate];
    [[app navController] dismissModalViewControllerAnimated:YES];
}

-(void) leaderboardViewControllerDidFinish:(GKLeaderboardViewController *)viewController
{
    AppController *app = (AppController*) [[UIApplication sharedApplication] delegate];
    [[app navController] dismissModalViewControllerAnimated:YES];
}

@end 
```

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T08:51:07.010

我发现了问题。似乎我没有声明 CCNode，当我将带有 UserData 的主体附加到不可用的 CCNode 时，当我在 contactlistener 类中检索它时它会崩溃

# android - 适用于 Android 和 iOS 的游戏开发

> ID：13552271
> 
> 赞同：1
> 
> 时间：2012-11-25T15:09:03.473
> 
> 标签：android, ios, game-engine, unreal-development-kit

我们可以在 Unreal Development Kit 上为 Android 和 iOS 开发游戏吗？我打算为这两个平台制作游戏，所以我的问题是：

*   我需要为不同的平台单独制作游戏吗？
*   为移动平台开发游戏与为 PC 开发游戏有什么不同？

我为PC制作了一个小游戏。移动平台的游戏开发流程是否相同

我知道这是一个菜鸟问题，但我想澄清自己。

问候

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T15:28:52.480

您可以在 iOS 和 Android 平台上使用 UDK，有关详细信息，您可以参考我的这个答案。关于游戏开发也提出了同样的问题。

[https://gamedev.stackexchange.com/a/23222/4781](https://gamedev.stackexchange.com/a/23222/4781)

对于您的第二个问题，是的，开发是不同的，但只有控件会改变，因为对于您没有键盘或鼠标作为输入的移动设备，但在另一端，您可以探索陀螺仪、加速度计和触摸作为输入。

休息一切都将保持不变。

请注意，纹理将更改为 UDK 中的 png 文件，而不是包。在 UDK 的模型对象中有一个小设置，您可以设置移动纹理，您可以在该网站和许多地方找到有关 UDK 的信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-25T15:15:27.403

不，您不必为不同的平台单独制作游戏。您可以使用[Unity - 游戏引擎](http://unity3d.com/)。该引擎允许您为以下平台开发跨平台游戏：Windows、Xbox 360、Windows RT、Windows Phone、Mac、iOS、Android、Nintendo Wii、PlayStation 3、Adobe Flash Player。

# visual-c++ - 编译成功编译成功但是exe不能在vc++中运行？

> ID：13552276
> 
> 赞同：1
> 
> 时间：2012-11-25T15:09:31.333
> 
> 标签：visual-c++

我想使用 opencv 在 vc++ 中显示图像。我的程序编译和构建成功，但没有任何显示。怎么可能喜欢？

# string - 编译器是否优化字符串连接？

> ID：13552278
> 
> 赞同：4
> 
> 时间：2012-11-25T15:09:32.773
> 
> 标签：string, delphi, delphi-xe2, concatenation, compiler-optimization

在我的代码中有一些情况，我正在构建大量文本字符串，例如复杂的 SQL 语句。我打算将这段文字连续多次放在一起，每次都有一些略有不同的参数。我已经养成使用名为 just 的子程序的习惯，`procedure A(const S: String);`它只是将文本 ( `S`) 附加到较大的字符串`Text := Text + S + #10 + #13;`

我想知道这是否会阻碍性能而不是使用传统的字符串连接？我开始认为编译器会优化这样的东西：

```
Text := 'some' + ' ' + 'text' + ' ' + 'and' + ' ' + 'such'; 
```

到

```
Text := 'some text and such'; 
```

这是真的？编译器是否优化了这种情况？如果是这样，我可能会决定将所有内容更改为以下内容：

```
Text := 'select something from sometable st'+#10+#13+
  'join someothertable sot on sot.id = st.sotid'+#10+#13+
  'where sot.somevalue = 1'+#10+#13+
  'order by sot.sorting'; 
```

理论上这会比

```
Text:= Text + 'select something from sometable st'+#10+#13;
Text:= Text + 'join someothertable sot on sot.id = st.sotid'+#10+#13;
Text:= Text + 'where sot.somevalue = 1'+#10+#13;
Text:= Text + 'order by sot.sorting'; 
```

或者我通常是怎么做的：

```
A('select something from sometable st');
A('join someothertable sot on sot.id = st.sotid');
A('where sot.somevalue = 1');
A('order by sot.sorting'); 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-25T15:15:55.757

像这样的表达

```
'a' + 'b' 
```

在编译时进行评估。这意味着一个任务

```
str := 'a' + 'b'; 
```

产生相同的编译代码

```
str := 'ab'; 
```

另一方面，对于

```
str := 'a';
str := str + 'b'; 
```

连接是在运行时执行的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T09:41:47.073

请注意，当使用非常量表达式时，将所有连接放在一个表达式中仍然更有效。考虑这段代码：

```
 A := '*';
  B := 'person';
  C := 'first_name=''Jerry''';

  Q := 'select ';
  Q := Q + A;
  Q := Q + ' from ';
  Q := Q + B;
  Q := Q + ' where ';
  Q := Q + C; 
```

上面的六个语句将执行 5 个单独的连接。然而：

```
 Q := 'select ' + A + ' from ' + B + ' where ' + C; 
```

将执行单个连接。Delphi 将为结果分配必要的空间并将六个值中的每一个复制到该空间中。

# symfony - 应该选中的多对多复选框未选中

> ID：13552280
> 
> 赞同：0
> 
> 时间：2012-11-25T15:09:34.627
> 
> 标签：symfony

我有一个带有一堆多对多复选框的表单。表单*保存*得很好（我检查了数据库以确保），但是复选框未*与*数据库一致。

我需要做一些特别的事情来让复选框保持选中状态吗？

这是我的表单定义：

```
<?php

namespace VNN\PressboxBundle\Form;

use Symfony\Component\Form\AbstractType;
use Symfony\Component\Form\FormBuilder;

class PreferencesSportsICareAboutType extends AbstractType
{
    public function buildForm(FormBuilder $builder, array $options)
    {   
        $builder->add('interestingSports', 'entity', array(
            'multiple'      => true,
            'expanded'      => true,
            'property'      => 'name',
            'class'         => 'VNN\PressboxBundle\Entity\Sport',
            'query_builder' => function(\VNN\PressboxBundle\Repository\SportRepository $er) {
                return $er->createQueryBuilder('s')
                    ->orderBy('s.name', 'ASC');
            },  
        )); 
    }   

    public function getName()
    {   
        return 'vnn_pressboxbundle_preferencessportsicareabouttype';
    }   
} 
```

这是我模板的相关部分：

```
{% block form %}
    <h2>Sports I Care About</h2>
    <form action="{{ path('user_update_preferences', { 'sectionName': sectionName }) }}" method="post" {{ form_enctype(form) }} novalidate class="clearfix">

        {% for error in errors %}
            error: {{ error.messageTemplate }}
        {% endfor %}

        {% for field in form.interestingSports %}
           <li>
             {{ form_widget(field) }}
             {{ form_label(field) }}
           </li>
        {% endfor %}

        {{ form_rest(form) }}

        <p><button type="submit">Submit</button></p>

    </form>
{% endblock %} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T15:52:31.440

看起来您的类型和模板定义明确。您应该检查您的实体关系。

我已经实现了[相同的行为](https://gist.github.com/4144126)，但使用了一对多关系。

**由 OP 编辑​​：**

这是实体关系。我需要改变这个

```
/** 
 * @ORM\ManyToMany(targetEntity="UserSportInterest", inversedBy="sports")
 * @JoinTable(name="user_sport_interest",
 *      joinColumns={@JoinColumn(name="user_id", referencedColumnName="id")},
 *      inverseJoinColumns={@JoinColumn(name="sport_id", referencedColumnName="id")}
 *      )
 */
private $sports; 
```

对此（注意`targetEntity`更改）

```
/** 
 * @ORM\ManyToMany(targetEntity="Sport", inversedBy="sports")
 * @JoinTable(name="user_sport_interest",
 *      joinColumns={@JoinColumn(name="user_id", referencedColumnName="id")},
 *      inverseJoinColumns={@JoinColumn(name="sport_id", referencedColumnName="id")}
 *      )
 */
private $sports; 
```

在那之后，它工作得很好。

# jquery - 如何将表单数据从 fancybox iframe 传递到父表单

> ID：13552281
> 
> 赞同：0
> 
> 时间：2012-11-25T15:09:42.080
> 
> 标签：jquery, ajax, fancybox

我在帖子表单字段集中使用 fancybox 来显示包含复选框选项的表单。我想将 iframe 复选框表单中的数据传递给父表单以进行数据库查询。

我怎么能做到这样的事情？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-25T15:18:09.870

尝试这样的事情：

```
var iframeValue = $("iframeText").val();
$(parent).find("parentElementId").val(iframeValue); 
```

希望这会有所帮助。

# windows - 检测windows中的文件句柄冲突

> ID：13552283
> 
> 赞同：2
> 
> 时间：2012-11-25T15:09:46.840
> 
> 标签：windows, file, filesystems, handle

删除打开的文件等操作会导致文件句柄冲突。如果我需要检测此类文件句柄冲突，过滤器驱动程序（或微过滤器驱动程序）是唯一的选择吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T17:54:43.583

我认为您要求的是：我有一个已打开文件的守护程序。当另一个进程想要访问该文件时，我希望通知守护程序并允许他关闭该文件，如果可能的话，以允许另一个进程继续。这需要守护进程使用“oplocks”。请参阅有关 oplocks 的 MSDN 文档。

# asp.net-mvc - 将值复制到 EditorFor ASP.Net MVC

> ID：13552286
> 
> 赞同：0
> 
> 时间：2012-11-25T15:10:22.797
> 
> 标签：asp.net-mvc, editorfor

使用 ASP.Net MVC。在编辑模式下，我有这个：

```
 <div class="editor-field">
        <%: Html.EditorFor(model => model.Date) %>
        <%: Html.ValidationMessageFor(model => model.Date) %>
    </div> 
```

我有一个使用 Jquery 的 DatePicker。

```
<rhp:DatePicker ID="DatePicker1" runat="server"></rhp:DatePicker> 
```

我可以得到日期选择器的文本：DatePicker1.Text

当用户选择日期时，我希望将选择的日期复制到 model.Date 并保存到数据库。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-25T18:11:55.517

如果您不想创建自定义 EditorTemplate，最简单的方法是删除`Html.EditorFor(m => m.Date)`并使用 DatePicker 作为编辑器：

```
<div class="editor-field">
    <rhp:DatePicker ID="Date" runat="server"></rhp:DatePicker>
    <%: Html.ValidationMessageFor(model => model.Date) %>
</div> 
```

请注意，DatePicker 控件的 ID 是`Date`，这应该允许模型绑定器将值绑定到`Date`模型的属性。

# hibernate - 条件查询多对多

> ID：13552288
> 
> 赞同：2
> 
> 时间：2012-11-25T15:10:41.247
> 
> 标签：hibernate

我已经创建了下面提到的 SQL 的 HQL，但我无法通过 Criteria 和 Sub 查询执行它。请帮助我通过 Criteria 执行以下查询（SQL 和 HQL）。**提前**谢谢...

**SQL：**

```
SELECT * FROM app_interface ain WHERE ain.id IN (SELECT ai.id FROM app_interface ai INNER JOIN app_module_interface ami ON ami.interface_id = ai.id INNER JOIN app_module am ON am.id = ami.module_id WHERE am.id = :id 
```

**总部：**

```
FROM AppModule oam WHERE oam.id IN(SELECT am.id FROM AppModule am INNER JOIN am.appRoles ar WHERE ar.id = :id) 
```

通过需要的标准……..?????

设想：

```
public class AppModule implements java.io.Serializable {
@Id
@GeneratedValue(strategy = GenerationType.AUTO)
@Column(name = "id", unique = true, nullable = false)
private Integer id;

@ManyToMany(cascade = CascadeType.ALL, fetch = FetchType.LAZY, mappedBy = "appModules")  
private Set<AppRole> appRoles = new HashSet<AppRole>(0); 
```

}

公共类 AppRole 实现 java.io.Serializable {

```
@Id
@GeneratedValue(strategy = GenerationType.AUTO)
@Column(name = "id", unique = true, nullable = false)
private Integer id;

@ManyToMany(cascade = CascadeType.ALL, fetch = FetchType.LAZY)
@OrderBy("name")
@JoinTable(name = "app_role_module", joinColumns = {
@JoinColumn(name = "role_id", nullable = false, updatable = false)}, inverseJoinColumns = {
    @JoinColumn(name = "module_id", nullable = false, updatable = false)})
private Set<AppModule> appModules = new HashSet<AppModule>(0); 
```

}

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-25T15:22:54.950

好吧，首先，您的查询太复杂了。可以改写为

```
select distinct am from AppModule am 
inner join am.appRoles ar 
WHERE ar.id = :id 
```

我不知道你为什么要使用条件而不是这个简单易读的 HQL 查询，但如果你真的想要，那么使用

```
Criteria c = session.createCriteria(AppModule.class, "am");
c.createAlias("am.appRoles", "ar");
c.add(Restrictions.eq("ar.id", theRoleId));
c.setResultTransformer(Criteria.DISTINCT_ROOT_ENTITY); 
```

编辑：

如果要实现查询

```
from AppModule oam WHERE oam.id not in (
    select am.id from AppModule am inner am.appRoles ar where ar.id = :id) 
```

，那么您可以使用以下代码：

```
DetachedCriteria dc = DetachedCriteria.forClass(AppModule.class, "am");
dc.createAlias("am.appRoles", "ar");
dc.add(Restrictions.eq("ar.id", theRoleId));
dc.setProjection(Projections.id());

Criteria c = session.createCriteria(AppModule.class, "oam");
c.add(SubQueries.propertyNotIn("oam.id", dc)); 
```

# javascript - 在渲染之前获取 IMG 元素宽度

> ID：13552289
> 
> 赞同：1
> 
> 时间：2012-11-25T15:10:42.533
> 
> 标签：javascript, jquery, html

我编写了这个脚本，以便在调整窗口大小时，我网站上的壁纸（对象的图片）定位正确并居中。现在它按我想要的方式工作，但只有当窗口调整大小时，在正常情况下，当窗口没有调整大小时，它显然无法获得 img 元素的宽度，因为它不会减去它的一半左侧的 CSS 属性。我如何得到它？

HTML：

```
<div class="wallpaper" id="wallpaper">
    <img src=@bgImage.img id="wallpaperImg" style="height:100%; width: auto; position: fixed;">
</div> 
```

JS：

```
<script type="text/javascript">
    var screenWidth;
    var screenHight;
    var totalHeight;
    var aspectRatio;

    var blah = false; //Ugly hack

    var navbarSize = 41;
    var wallpaper = $("#wallpaperImg");

    function getAspectRatio(h,w){
        return (h-1)/w; //Ugly hack
    }

    function resizeWallpaper(w,h){
        if(typeof(aspectRatio)==='undefined') aspectRatio = @bgImage.aspectRatio; //delivered by server framework

        totalHeight = (h-navbarSize).toString() + 'px';
        wallpaper.css("height",totalHeight);
        wallpaper.css("width","auto");
        wallpaper.css("left",(w/2)-(wallpaper.width()/2)+'px');
        wallpaper.css("top",'41px');

        if(getAspectRatio(wallpaper.height(),wallpaper.width()) > aspectRatio && blah){
            wallpaper.css("width",(w).toString() + 'px')
            wallpaper.css("height","auto")
            wallpaper.css("top",((h/2)-(wallpaper.height()/2))+20.5+'px');
            wallpaper.css("left",'0px');
        }
    }

    resizeWallpaper($(window).width(),$(window).height());
    blah = true;

    $(window).resize(function() {
        resizeWallpaper($(window).width(),$(window).height());
    });
</script> 
```

快速上传我正在谈论的内容：[网站](http://workshop0182.herokuapp.com/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T15:13:57.810

您必须等待图像下载后才能调整其大小。在负载处理程序中包围初始调用：

```
wallpaper.on('load', function() {
    resizeWallpaper($(window).width(),$(window).height());
}); 
```

# python - 如何在 PyQt 中发送 UI 事件？

> ID：13552295
> 
> 赞同：2
> 
> 时间：2012-11-25T15:11:33.333
> 
> 标签：python, user-interface, pyqt4

我想在我的程序中自动化 UI 操作：它可以显示菜单、打开另一个表单等。我在我的 python 应用程序中使用`.py`文件和文件。`.ui`我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-26T09:34:39.373

几乎所有的 GUI 框架都有一个事件的概念，它通常由用户操作（按钮单击、窗口拖动等）生成并发送到您的处理程序。

但是事件通常也可以直接发送到事件循环。就您而言，我假设您使用的是 Digia 的 PyQt 和 Qt 工具包。

[PyQt 文档`QCoreApplication.sendEvent`](http://pyqt.sourceforge.net/Docs/PyQt4/qcoreapplication.html#sendEvent)看起来是个不错的起点：

> `bool QCoreApplication.sendEvent (QObject receiver, QEvent event)`
> 
> 使用 notify() 函数将事件事件直接发送到接收者接收者。返回从事件处理程序返回的值。
> 
> 发送事件后不会删除该事件。正常的做法是在堆栈上创建事件，例如：
> 
> ```
> QMouseEvent event(QEvent.MouseButtonPress, pos, 0, 0, 0);
> QApplication.sendEvent(mainWindow, &event); 
> ```
> 
> 另见 postEvent() 和 notify()。

不要忽略 和 的`postEvent`又见`notify`。

更多信息也将在[Digia 的 postEvent 的 Qt 文档中](http://doc.qt.digia.com/qt/qcoreapplication.html#postEvent)

# math - 覆盖在一组 3D 数据点上的 2D 路径的均匀采样

> ID：13552296
> 
> 赞同：1
> 
> 时间：2012-11-25T15:11:35.283
> 
> 标签：math, opengl, 3d, geometry, spline

想象一下，你有一个函数 z = f(x, y) 的样本点网格，其中 1 < x < N 和 1 < y < N。没有给出公式，只给出了原始数据，例如图像的灰度。

我想找到，给定一个点 A，它的 x 和 y 坐标是给定的（并且 z 从数据中已知，所以 A 是表面的一个顶点）位于圆的圆周上的 M 个点以 A 为中心，半径为 R，它们是覆盖在数据点描述的假想表面上的圆形“布”的良好近似值。还可以想象表面的边缘是三角形网格。

近似值的最大限制是生成的多边形的边长度之和始终为 R * 2 * PI，因此将 A 点移动到曲面上只会改变 M 点，但不会改变它们倒数的总和距离。悬垂不需要完美，但最好尽可能靠近表面，或者总是在表面的一侧，上方或下方。

任何人都可以给我一个指向一些关于这个的东西吗？这是一个已知问题吗？

我觉得这个问题没有完全制定，我已经需要一些帮助来给出一个完整的描述。

# wordpress - Cufonttext 被 cufon 替换后没有隐藏在 IE 中

> ID：13552298
> 
> 赞同：1
> 
> 时间：2012-11-25T15:11:39.257
> 
> 标签：wordpress, internet-explorer, cufon

这是我的网站：http: [//travel.web2c.eu](http://travel.web2c.eu)

这是一个 wordpress 安装，主题使用 cufon 字体。问题是在主页（希腊语）中，cufonttext 被cufon 替换时并没有隐藏。因此，当页面加载时，我会看到每个标题两次。这只发生在主页上。内页虽然使用与主页相同的模板，但显示正确。

当我启用一些插件（如 WP UI、GT 选项卡、社交、性感书签等）时会显示错误。我试图避免导致问题的插件，但几乎 80% 的 wp 插件都会导致此问题，所以我决定寻找解决方案.

我在主题支持页面上发布了错误，但仍然没有答案。这是链接： http: [//support.ait-themes.com/discussion/4172/display-error-in-ie9-probably-with-the-fonts](http://support.ait-themes.com/discussion/4172/display-error-in-ie9-probably-with-the-fonts) 你可以看到两个截图，第一个是大多数插件被禁用，第二个启用了 GT 选项卡（这是站点的当前状态）。

如果有人能提供帮助，我将不胜感激。提前致谢。

# javascript - 咖啡脚本加权随机数

> ID：13552299
> 
> 赞同：2
> 
> 时间：2012-11-25T15:11:55.437
> 
> 标签：javascript, random, coffeescript

我想在 CoffeeScript 中创建一个加权随机数生成器。

这是Javascript代码：

```
// init
var chances = {
        red: 1,
        blue: 4,
        yellow: 10
    },
    bag = [];

// fill the bag with the values
for (var chance in chances) {
    for (var i=0; i<chances[chance]; ++i) {
        bag.push(chance);
    }
}

// get random element
var index   = Math.floor(Math.random()*bag.length,
    element = bag[index]; 
```

当然，我可以用一种不太优雅的方式创建它（没有变量 init）：

```
for chance, value of chances
    for [1..value]
        bag.push(chance)

index   = Math.floor(Math.random()*bag.length;
element = bag[index]; 
```

我想简化代码，并创建最好的解决方案，但我被困住了：

```
bag = ((k for [1..v]) for k, v of chances) 
```

这段代码创建了一个数组，其中包含所需的值，但显然不是我想要的，我不知道如何以一种好的方式做到这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T15:53:59.323

我认为你正在寻找的是这样的：

```
bag = [].concat.apply [], ((k for [1..v]) for k, v of chances) 
```

但是，我个人认为这条路径根本不会导致更简单的代码（正如你所写的那样，你试图达到）。您第一次使用两个 for 循环很简单，所有程序员都可以直接理解。我会坚持下去。

```
for chance, value in chances
    for [1..value]
        bag.push chance 
```

另请注意，如果您查看这些解决方案生成的 Javascript 代码，则双 for 循环要简单得多。

# java - JMockit：模拟接口时“在此处检测到错误的参数匹配器”

> ID：13552300
> 
> 赞同：1
> 
> 时间：2012-11-25T15:12:07.857
> 
> 标签：java, unit-testing, mockito, jmockit

以下是测试代码：

```
package a.b.c.concurrent.locks;

import static org.mockito.Matchers.any;
import static org.mockito.Matchers.anyLong;
import static org.mockito.Mockito.when;

import java.util.concurrent.TimeUnit;
import java.util.concurrent.locks.Lock;

import mockit.Mocked;

import org.apache.log4j.ConsoleAppender;
import org.apache.log4j.Logger;
import org.apache.log4j.PatternLayout;
import org.junit.BeforeClass;
import org.junit.Test;

public class TestLockConcludesProperly {

    private static LockProxy lockProxy;

    @BeforeClass
    public static void setUpBeforeClass() throws Exception {
        Logger.getRootLogger().addAppender(new ConsoleAppender(new PatternLayout()));
    }

    @Test
    public void testAquireLockInFirstIteration(@Mocked Lock mockLock) throws Exception {

        when(mockLock.tryLock(anyLong(), any(TimeUnit.class))).thenReturn(true);

        lockProxy = new LockProxy(mockLock, 2, TimeUnit.MILLISECONDS);

        lockProxy.lock();

    }
} 
```

我得到并且无法弄清楚的错误，虽然它可能是我的一些错误配置，是：

```
Tests in error: 
  testAquireLockInFirstIteration(a.b.c.concurrent.locks.TestLockConcludesProperly): 
Misplaced argument matcher detected here:

-> at a.b.c.concurrent.locks.TestLockConcludesProperly.testAquireLockInFirstIteration(TestLockConcludesProperly.java:34)
-> at a.b.c.concurrent.locks.TestLockConcludesProperly.testAquireLockInFirstIteration(TestLockConcludesProperly.java:34)

You cannot use argument matchers outside of verification or stubbing.
Examples of correct usage of argument matchers:
    when(mock.get(anyInt())).thenReturn(null);
    doThrow(new RuntimeException()).when(mock).someVoidMethod(anyObject());
    verify(mock).someMethod(contains("foo"))

Also, this error might show up because you use argument matchers with methods that cannot be mocked.
Following methods *cannot* be stubbed/verified: final/private/equals()/hashCode(). 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-25T16:00:24.970

**我的错...**

好像我混淆了 JMockit API 和 Mockito 的 API。

为了模拟`Lock`界面，我需要做的就是：

```
 @Test
    public void testAquireLockInFirstIteration() throws Exception {

        Lock mockLock = Mockito.mock(Lock.class);
        when(mockLock.tryLock(anyLong(), any(TimeUnit.class))).thenReturn(true);

        lockProxy = new LockProxy(mockLock, 2, TimeUnit.MILLISECONDS);

        lockProxy.lock();

    } 
```

# django - Django：Apache虚拟主机给出500服务器错误

> ID：13552301
> 
> 赞同：1
> 
> 时间：2012-11-25T15:12:19.617
> 
> 标签：django, apache, wamp, virtualhost

我不知道为什么会收到此错误：

```
500 - Internal Server Error 
```

在我的 httpd.conf 中，我输入了以下代码：

```
<VirtualHost *:80>
    WSGIScriptAlias / "/var/django/projects/blunne/blunne/wsgi.py"
    ServerName teste.blunne.com
    Alias /static "/var/django/projects/blunne/static/"
    <Directory "/var/django/projects/blunne/">
        Options Indexes FollowSymLinks MultiViews
        AllowOverride all
        Order allow,deny
        Allow from all
    </Directory>
</VirtualHost> 
```

这段代码有什么问题？

blunne 是我的应用程序的名称，它在开发服务器上运行良好。

我尝试更改路径，将代码不带引号，在路径中制作自定义wsgi：“/var/django/projects/blunne.wsgi”，代码如下

```
import os, sys
sys.path.append(os.sep.join(os.path.abspath('/var/django/projects/blunne/').split(os.sep)))
os.environ.setdefault("DJANGO_SETTINGS_MODULE", "blunne.settings")
from django.core.wsgi import get_wsgi_application
application = get_wsgi_application() 
```

但总是同样的错误......如果我删除虚拟主机 Apache 会正常

.

**编辑：**在我的带有 wamp（Windows 7）的本地主机中，我可以使用以下命令运行 django：

.

文件：httpd-vhosts.conf

```
# httpd.conf includes conf/extra/httpd-vhosts.conf
<VirtualHost *:80>
WSGIScriptAlias / "C:/Django/projects/blunne.wsgi"

ServerName beta.blunne.com
Alias /static "C:/Django/projects/blunne/static/"

<Directory "C:/Django/projects/blunne/">
    Options Indexes FollowSymLinks MultiViews
    AllowOverride all
    Order allow,deny
    Allow from all
</Directory>
</VirtualHost> 
```

文件：C:/Django/projects/blunne.wsgi

```
import os, sys
#sys.path.append(os.sep.join(os.path.abspath(__file__).split(os.sep)[:-2]))
sys.path.append(os.sep.join(os.path.abspath('C:/Django/projects/blunne/').split(os.sep)))
os.environ.setdefault("DJANGO_SETTINGS_MODULE", "blunne.settings")
from django.core.wsgi import get_wsgi_application
application = get_wsgi_application() 
```

然后我将主机配置为

```
127.0.0.1 beta.blunne.com 
```

我不知道该怎么办。

# html - 如何用css分离html标题和内容并使内容可滚动

> ID：13552304
> 
> 赞同：1
> 
> 时间：2012-11-25T15:13:00.230
> 
> 标签：html, css, scroll

我对 html 和 css 非常陌生，但我需要为我的课程制作一个简单的 html 页面。我面临的问题是我的页面上的内容没有正确滚动。如果你看看这个页面：[http](http://clubnights.square7.ch/impr.html) ://clubnights.square7.ch/impr.html你会明白我在说什么。这应该是愚蠢的新手错误，所以如果有人能告诉我我做错了什么，我将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T15:19:27.917

只需将高度更改为`max-height:75%`而不是`height:100%`.

```
#content {
    max-height: 75%;
    overflow: auto;
    text-align: center;
    width: 100%;
} 
```

希望它会帮助你。

# algorithm - 获取覆盖所有节点的路径并在特殊节点处开始和结束

> ID：13552305
> 
> 赞同：0
> 
> 时间：2012-11-25T15:13:22.993
> 
> 标签：algorithm, graph, graph-algorithm

我有这个图表问题，我有许多节点（公交车站）和一些特殊节点（公交车站），我必须覆盖所有节点 - 分配覆盖所有节点的公交路线 - 在车站开始和结束时我对可以使用的总线数量有一些限制，我应该如何开始？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T15:20:38.360

寻找连接所有节点的最短路径（有公共汽车站限制）的问题可以从[旅行推销员问题](http://en.wikipedia.org/wiki/Travelling_salesman_problem)减少：给定一个 TSP 问题，用 1/2 个车站/“特殊节点创建这个问题的实例"（取决于你是否可以回到同一个车站）。

使用这种减少 - 如果这个问题是多项式可解决的 - TSP 也是如此。

因此 - 问题是[NP-Hard](http://en.wikipedia.org/wiki/NP-hard)，并且**没有已知的多项式解决方案**（[假设是 - 一个不存在，尽管尚未证明](http://en.wikipedia.org/wiki/P_versus_NP_problem)）

一些替代方法是启发式算法，例如[遗传算法](http://en.wikipedia.org/wiki/Genetic_algorithm)和[爬山](http://en.wikipedia.org/wiki/Hill_climbing)算法，近似算法或指数算法（如果数据相对较小，可用于找到最佳解决方案），例如动态规划或[分支定界](http://en.wikipedia.org/wiki/Branch_and_bound)。

**编辑：（**回复已编辑的问题）

即使您可以使用多条总线 - 但*数量有限*- 问题仍然是 NP-Hard，因为（假设总线的数量是恒定的/在一元编码中给出）：您可以将图形“复制”到`k`不同的组件（有限数量的公共汽车在哪里`k`） - 每个组件都有一个新的 TSP 问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-25T15:23:54.293

这是一个简单的想法：

1.  从图中删除开始和结束节点。
2.  搜索最小生成树
3.  将起始节点连接到生成树。

有了它，您可以获得最小的封面解决方案。

当然，如果您需要访问每个节点一次，那么如上所述，这是一个 NP-Hard 问题。

# c# - 如何根据我的场景将数据集保存在数据库中？

> ID：13552310
> 
> 赞同：1
> 
> 时间：2012-11-25T15:14:26.170
> 
> 标签：c#, database, telerik, dataset, telerik-scheduler

我正在做我最后一年的项目我使用了telerik rad调度程序并且他们无法在约会表上保存约会数据我在更新按钮中使用了这个代码

```
tableAdapterManager1.AppointmentsTableAdapter.Update(this.schedulerData1DataSet.Appointments);
tableAdapterManager1.ResourcesTableAdapter.Update(this.schedulerData1DataSet.Resources);
tableAdapterManager1.AppointmentsResourcesTableAdapter.Update(this.schedulerData1DataSet.AppointmentsResources);
tableAdapterManager1.UpdateAll(schedulerData1DataSet); 
```

我在数据集上保存更改我已经看到我的数据集“可视化器数据集”，在那里我看到我所做的所有更改都很好，但是在约会表中我没有做任何更改:(他们非常紧张请帮助我在 c# 中是初学者而不是关于适配器的好概念请仔细解释并告诉我代码以及我应该在哪里进行更改以解决我的问题

谢谢沙阿；

# linux - 禁用 apache 日志记录到 access.log

> ID：13552312
> 
> 赞同：21
> 
> 时间：2012-11-25T15:14:39.987
> 
> 标签：linux, apache, logging

我一直在阅读有关禁用 apache 服务器日志记录的信息，这对我来说至关重要，因为我正在对其进行大量测试，并且它会填满磁盘。

我尝试过更改 http.conf 并将内容定向到 /dev/null，但都没有奏效，因为其中大部分是错误日志记录。

有人知道吗？

谢谢

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2012-11-25T15:21:44.320

只需评论设置日志记录的区域即可。

上，

```
httpd.conf
virtual hosts configurations (virtual.conf, domain.conf etc) 
```

对于类似的东西

```
CustomLog logs/access_log common
ErrorLog logs/error_log 
```

做就是了，

```
#CustomLog logs/access_log common
#ErrorLog logs/error_log 
```

# jquery - 背景图像单选按钮

> ID：13552315
> 
> 赞同：-4
> 
> 时间：2012-11-25T15:15:08.473
> 
> 标签：jquery, css, user-interface

是否可以使用 jQuery 为每个单选按钮提供自己的背景图像？我的意思是：

![示例图片](../Images/f117e9a3d52a24bf00be925d555b6fd5.png)

```
<form id="tiepspiel" name="tiepspiel" action="#" method="POST">
        <ul id="sortable">
        <?php
        $count = 5;
        $i = 1;
        while ($i <= $count) {
            echo '<li><ul class="elements">
        <li class="selectable">
            <label class="stein"><input type="radio" name="selected__'.$i.'" value="stein</label>
            <span></span>
        </li>
        <li class="selectable">
            <label class="schere"><input type="radio" name="selected_'.$i.'" value="schere"></label>
            <span></span>
        </li>
        <li class="selectable">
            <label class="papier"><input type="radio" name="selected_'.$i.'" value="papier"></label>
            <span></span>
        </li>
    </ul>
                    </li>';
            $i++;
        }
        ?>
        <hr>
        <button>Submit</button>
        </ul>
        </form> 
```

我正在尝试将 CSS 添加到每个类中。例如：

```
.papier {
    background-image: url("../images/papier_blue.png");
    width: 82px;
    height: 82px;
    cursor: pointer;
    margin-right: 50px;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T15:42:32.903

背景图像不能很好地与单选按钮本身配合使用。您可以做的是将它们分别包装在 a`<label>`中，如下所示：

```
<ul class="elements">
    <li class="selectable">
        <label class="stein"><input type="radio" name="stein" value="stein"></label>
        <span></span>
    </li>
    <li class="selectable">
        <label class="schere"><input type="radio" name="schere" value="schere"></label>
        <span></span>
    </li>
    <li class="selectable">
        <label class="papier"><input type="radio" name="papier" value="papier"></label>
        <span></span>
    </li>
</ul> 
```

然后，您的 CSS 应该按原样工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-25T15:23:58.927

您将背景样式放在错误的类上。把它们放在你的`.selectable`类定义中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-25T20:35:06.820

我猜你需要一种“假单选按钮”。有很多方法可以做到这一点，包括 jquery，或者您可以使用 css 轻松做到这一点。`span`正如有人所说，您必须用or包裹单选按钮`label`。默认情况下，它们不是 'block' 元素，例如 'div'，因此除非您不将其归因（ display:block; 或 display:inline-block; ），否则您无法获得结果。也不要忘记设置宽度和高度（我的意思是跨度/标签）并将不透明度 0 设置为单选按钮。我建议你看看[http://ajaxian.com/archives/custom-css-inputs](http://ajaxian.com/archives/custom-css-inputs)或者你也可以看看[http://www.iamntz.com/625/frontend-developer/formulare- custom-checkbox-radio-v-2/](http://www.iamntz.com/625/frontend-developer/formulare-custom-checkbox-radio-v-2/)（不管它是不是罗马尼亚语，

没有火箭科学，你只需要照顾一些东西。

# php - 将变量值存储到用户断开连接

> ID：13552323
> 
> 赞同：0
> 
> 时间：2012-11-25T15:16:21.483
> 
> 标签：php, symfony, session-variables

我想将变量的内容从一页发送到另一页。变量由用户输入。

```
$session =$this->get('request')->getSession();
$typeRapport = $session->get('typeRapport'); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T10:32:21.900

看来你什么都做了！您的问题是：“我想将变量的内容从一页发送到另一页”。

如果您能够获取 Session 对象，为什么不在其中设置一个参数呢？例如

第一页控制器：

```
use Symfony\Component\HttpFoundation\Request;

...

public function firstPageAction(Request $request){
  $myValue = ....; // value to be passed
  $session = $request->getSession();
  $session->set('typeRapport', $myValue);    
...
} 
```

然后，在第二页的控制器中：

```
use Symfony\Component\HttpFoundation\Request;

...

public function secondPageAction(Request request){
  $session = $request->getSession();
  $typeRapport = $session->get('typeRapport');
} 
```

# python - 无法在 NAT 路由器后面接收 UDP 数据包

> ID：13552324
> 
> 赞同：3
> 
> 时间：2012-11-25T15:16:25.290
> 
> 标签：python, networking, network-programming, nat

我读过一些关于[端口翻译](http://en.wikipedia.org/wiki/Network_address_translation#Methods_of_Port_translation)的东西，现在我想测试一下。

我在 NAT 路由器后面有一台本地机器和一台具有外部 IP 地址的服务器。

这就是我将数据包从机器上的第 5000 个端口发送到服务器上的第 4000 个端口的方式。

```
import socket
import sys

UDP_IP = #external server IP address
UDP_PORT = 4000
MESSAGE = "Hi!"

sock = socket.socket(socket.AF_INET, # Internet
                     socket.SOCK_DGRAM) # UDP
sock.bind(('0.0.0.0', 5000))
sock.sendto(MESSAGE, (UDP_IP, UDP_PORT)) 
```

在那之后我开始在本地机器上听 5000th

```
import socket
import sys

UDP_IP = #my ip address in the local network
UDP_PORT = 5000

sock = socket.socket(socket.AF_INET, # Internet
                     socket.SOCK_DGRAM) # UDP
sock.bind((UDP_IP, UDP_PORT))

while True:
    data, addr = sock.recvfrom(1024)
    print "received message:", data 
```

在服务器上，当我看到传入的 UDP 时，`(someIP, somePort)`我将响应发送到相同的 `someIP`和`somePort`（使用具有其他端口和地址的相同脚本）。但我从来没有在我的本地机器上收到这个响应。为什么？

此外，当服务器在本地网络中时，此代码可以正常工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T16:47:45.100

问题是您在 NAT 后面，您发送到服务器（NAT 外部）的数据包将具有 NAT 服务器的源 IP。外部服务器将发送的回复将具有 NAT 的目标 IP。当回复到达 NAT 时，它不知道如何处理该数据包，因为没有可用的地址/端口映射。
您应该在 NAT 上创建一个映射，说明如下
`NAT Address:5000 <---> localaddress:5000`

在这种情况下，NAT 会知道如果它在端口 5000 接收到一个数据包，它必须将该数据包发送到您的本地计算机。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-11-24T14:04:59.853

我遇到过类似的情况（当客户端位于 NAT 后面时，没有通过 UDP 从服务器获得响应），在我的情况下，帮助发送来自请求已发送到的服务器的**同一端口的响应。**不同类型的 NAT 工作方式不同，在我的情况下，路由器必须建立严格的映射`client:CLIENT_PORT <---> server:SERVER_PORT`，因此来自同一服务器不同端口的“响应”被拒绝。也许你的情况也是如此。

# ruby-on-rails - 为什么我的主页链接试图将我带到“/root_path”而不是“/”？

> ID：13552328
> 
> 赞同：1
> 
> 时间：2012-11-25T15:16:49.557
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3.2

我正在完成本教程-> [http://ruby.railstutorial.org/chapters/filling-in-the-layout](http://ruby.railstutorial.org/chapters/filling-in-the-layout)

你可以在这里遇到问题-> [strong-dusk-3202.herokuapp.com/](http://intense-dusk-3202.herokuapp.com/)

当我单击标题中的“主页”链接时，它会尝试带我去，`http://intense-dusk-3202.herokuapp.com/root_path`而不仅仅是`http://intense-dusk-3202.herokuapp.com/`

这是我的路线.rb

```
SampleApp::Application.routes.draw do
  get "users/new"

  root :to => 'static_pages#home'

match '/signup', to: 'users#new'

  match '/help', to: 'static_pages#help'

  match '/about', to: 'static_pages#about'

  match '/contact', to: 'static_pages#contact'

end 
```

这是我的 app/views/layouts/_header.html.erb 文件：

```
<header class="navbar navbar-fixed-top navbar-inverse">
  <div class="navbar-inner">
    <div class="container">
      <%= link_to "sample app", 'root_path', id: "logo" %>
      <nav>
        <ul class="nav pull-right">
          <li><%= link_to "Home",    'root_path' %></li>
          <li><%= link_to "Help",    'help_path' %></li>
          <li><%= link_to "Sign in", '#' %></li>
        </ul>
      </nav>
    </div>
  </div>
</header> 
```

在你帮助我之前，你还需要看什么吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-25T15:18:55.057

你不应该引用这些助手：

```
<header class="navbar navbar-fixed-top navbar-inverse">
  <div class="navbar-inner">
    <div class="container">
      <%= link_to "sample app", root_path, id: "logo" %>
      <nav>
        <ul class="nav pull-right">
          <li><%= link_to "Home",    root_path %></li>
          <li><%= link_to "Help",    help_path %></li>
          <li><%= link_to "Sign in", '#' %></li>
        </ul>
      </nav>
    </div>
  </div>
</header> 
```

`root_path`, `help_path`, 和所有其他命名的路由助手实际上是 ruby​​ 方法。直接打电话给他们，不要在他们周围加上引号。

# dojo - Dojo 图表：我可以根据值更改线条的颜色吗？

> ID：13552329
> 
> 赞同：1
> 
> 时间：2012-11-25T15:16:53.220
> 
> 标签：dojo, dojox.charting

我有一个 Dojo 1.8 的工作图表。

```
chart1 = new dojox.charting.Chart2D("chart1");
chart1.addPlot("default", {type: "Lines", ...
chart1.addSeries("Series A", [{ x: 1, y: 2.3, tooltip: "Value 1"}, ... 
```

我的系列数据正确显示为行，整行（系列）的颜色为“绿色”。我知道如何更改整个系列的颜色，但是线条是否有可能根据数据值改变颜色？让我们假设 x 轴是一个时间轴，我需要线（系列）直到今天是绿色的，然后是红色的未来值。这可能吗？如何？（我正在使用值的标记。如果这些可以根据值改变就足够了）

我在文档中发现了类似的东西：

```
chart.addSeries("Series A", [
    {y: 4, color: "red"},
    {y: 2, color: "green"},
    {y: 1, color: "blue"},
    {y: 1, text: "Other", **color: "white", fontColor: "red"**}
]); 
```

但它仅适用于 PIE 图表，不适用于 LINES 图表。

先感谢您。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-30T20:13:21.623

你可以试试这个[http://jsfiddle.net/jUS54/](http://jsfiddle.net/jUS54/)

在 addPlot 方法中使用 styleFunc 更改标记颜色：

```
 var chart1 = new Chart("simplechart");
    chart1.addPlot("default", {type: Lines, markers:true, styleFunc: function(item {
    if(item <= 2){ 
      return { fill : "red" };
    }else if(item > 3){
      return { fill: "green" };
    }
    return {};
  }}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-07T16:43:25.530

您可以通过向图表数据添加“填充”来更改颜色。基本上，在为 chartData 构建 JSON 时，循环遍历您的输入数据来决定设置填充的内容。

```
var chartData = [{y: 10000,fill: "red"},{y:9200,fill: "yellow"},{y:11811,fill: "green"},{y:12000,fill: "blue"},{y:7662,fill: "blue"},{y:13887,fill: "black"},{y:14200,fill: "gray"},{y:12222,fill: "purple"},{y:12000,fill: "green"},{y:10009,fill: "purple"},{y:11288,fill: "green"},{y:12099,fill: "blue"}]; 
```

[http://jsfiddle.net/goinoff/QnNk2/1/](http://jsfiddle.net/goinoff/QnNk2/1/)

# emacs - (declare (indent *)) 是如何工作的？

> ID：13552332
> 
> 赞同：3
> 
> 时间：2012-11-25T15:17:15.640
> 
> 标签：emacs, elisp

信息页面没有提到这个声明。我发现它设置为 1、2 或 3 的用途，但还有哪些其他选项是可能的？它究竟是做什么的？

从表面上看，数字似乎意味着宏名称之后的行数，以进一步向右缩进，但在这种情况下，我如何告诉它将所有形式缩进为第一个？

例子：

`(declare (indent 1))`做这个：

```
(-iter 
    (with (a b c))
  (for i from 0 to 5)
  (collect i)
  (message "i: %s" i)) 
```

`(declare (indent 2))`做这个：

```
(-iter 
    (with (a b c))
    (for i from 0 to 5)
  (collect i)
  (message "i: %s" i)) 
```

`(declare (indent 256))`（或任何足够大的数字）这样做：

```
(-iter 
    (with (a b c))
    (for i from 0 to 5)
    (collect i)
    (message "i: %s" i)) 
```

我想做最后一个，除了提供一个任意大的数字。有没有办法告诉“全部”或某些事情？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-25T20:20:36.070

它[在手册中](http://www.gnu.org/s/emacs/manual/html_node/elisp/Indenting-Macros.html)：

`C-h``i``g` `(elisp) Indenting Macros` `RET`

链接到 的索引条目`declare`，仅供参考。(Emacs 24.2.1)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2019-03-22T07:18:59.737

由于接受的答案实际上并没有回答问题，而且手册相当迟钝，让我指出[这个博客](https://oremacs.com/2015/01/28/notes-on-elisp-indentation/)，它揭示了一个值`0`实际上在这里有效，并且是`defun`.

但是，缩进级别没有数字那么高。检查：

有`(indent nil)`或没有`(indent ...)`声明：

```
(-iter
 (with (a b c))
 (for i from 0  to 5)
 (collect i)
 (message "i: %s" i)) 
```

使用`(indent defun)`或`(indent 0)`：

```
(-iter
  (with (a b c))
  (for i from 0 to 5)
  (collect i)
  (message "i: %s" i)) 
```

与`(indent 256)`：

```
(-iter
    (with (a b c))
    (for i from 0 to 5)
    (collect i)
    (message "i: %s" i)) 
```

与`(indent (lambda (x y) 4))`您获得与 for 相同的结果`(indent 256)`。不过，硬编码缩进可能与使用 指定不同缩进样式的机制略有冲突`lisp-indent-function`。

# php - 我的 csv 文件只有一行

> ID：13552333
> 
> 赞同：1
> 
> 时间：2012-11-25T15:17:16.417
> 
> 标签：php

我正在将一个临时表输出到一个 csv 文件，但它只有一行？

这是代码

```
$fileName = fopen('cmv_sailings.csv', 'w');

while ($i = mysql_fetch_assoc($export)) {
    $ship = $i['code'];
    $title = $i['title'];
    $sailDate = $i['sailDate'];
    $fromPort = $i['fromport'];
    $nights = $i['nights'];
    $grade = $i['type'];
    $fare = $i['fare'];
    $offer = $i['offerFare'];
    $deposit = $i['deposit'];

    $content = $ship.','.$title.','.$sailDate.','.$fromPort.','.$nights.','.$grade.','.$fare.','.$offer.','.$deposit.'\n';

    fwrite($fileName, $content);
}

fclose($filename); 
```

我现在一点头绪都没有。我试图使用 fputcsv 但我也无法让它工作

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-25T15:19:50.433

在您的代码中，在`$content`变量赋值结束时，更改`'\n'`为`"\n"`. 在 php 中，使用单引号时不会插入转义序列。它们在使用双引号时被插值。你得到一个文字反斜杠，后跟一个文字`n`而不是你正在寻找的换行符。

至于 using [`fputcsv()`](http://php.net/manual/en/function.fputcsv.php)，由于为您的平台使用了不正确的换行符，这可能对您不起作用。这发生在 Mac 上。如果这是您的问题，请尝试在[`auto_detect_line_endings`](http://php.net/manual/en/filesystem.configuration.php#ini.auto-detect-line-endings)文件解析代码之前打开。您可以在运行时使用[`ini_set()`](http://php.net/manual/en/function.ini-set.php)如下方式执行此操作：

```
ini_set('auto_detect_line_endings', '1'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-25T15:29:53.480

```
$content = $ship. ... .'\n'; 
```

您正在将反斜杠和 n 添加到文件中，而不是换行符。试试这个：

```
$content = $ship. ... ."\n"; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-25T15:35:17.407

像这样使用，我在你的代码中看到的主要问题是使用单引号 \n 这就是为什么没有在你的 csv 文件中添加换行符并且你在一行中得到你的结果

```
$content = $ship.','.$title.','.$sailDate.','.$fromPort.','.$nights.','.$grade.','.$fare.','.$offer.','.$deposit."\n";
fwrite($fileName, $content); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-25T15:39:19.530

1.  使用 mysql_ 不是一个好主意，目前还可以，但将来，迁移到 PDO 或 mysqli
2.  手动准备 CSV，不是一个好主意，特殊字符必须转义，[这里使用 fputcsv 描述](http://php.net/manual/en/function.fputcsv.php "fputcsv")
3.  为什么您的 CSV 中只有一行，我认为是因为一些格式问题（或缺少格式），来自您的格式设置方式。

# shell - 如何通过管道将某些内容从命令行传输到新的 Github gist？

> ID：13552335
> 
> 赞同：25
> 
> 时间：2012-11-25T15:17:24.763
> 
> 标签：shell, github, gist

我不知道这是否存在，但我很想能够做到：

```
$ cat mygist.js | gh new gist 
```

并让它返回 URL（并可能将其复制到剪贴板/在浏览器中打开它）。

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-11-25T15:43:56.353

似乎 GitHub 有一个简单的 REST API，包括[创建 Gists](http://developer.github.com/v3/gists/#create-a-gist)的方法。只是为了好玩：

```
$ curl -X POST \
    --data-binary '{"files": {"file1.txt": {"content": "Hello, SO"}}}' \
    https://api.github.com/gists 
```

这成功地创建了[这个 Gist](https://gist.github.com/6f4892ca28b69df58bb1)。我想这足以让你开始。

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2013-10-09T10:52:32.297

试试这个宝石：[https ://github.com/defunkt/gist](https://github.com/defunkt/gist)

为我工作^_^

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-07-25T19:57:20.320

这是一个简单的 bash 脚本，它采用文件名并使其成为要点。

```
function msg() {
  echo -n '{"description":"","public":"false","files":{"file1.txt":{"content":"'
  awk '{gsub(/"/,"\\\""); printf "%s\\n",$0}' "$1"
  echo '"}}'
}

[ "$#" -ne 1 ] && echo "Syntax: gist.sh filename" && exit 1
[ ! -r "$1" ] && echo "Error: unable to read $1" && exit 2

msg "$1" | curl -v -d '@-' https://api.github.com/gists 
```

仅供参考：要点回复帖子正文，所以如果文件很大，也许 grep 只是回复的相关部分。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-05-05T09:27:04.883

正如 Ronie 上面所说，有一个 gist gem 提供了一个 gist 命令，您可以从终端使用该命令将内容上传到[https://gist.github.com/](https://gist.github.com/)

要上传 a.rb 的内容，只需：

```
gist a.rb 
```

更多信息 [http://defunkt.io/gist/](http://defunkt.io/gist/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-12-20T02:32:16.333

有同样的愿望，我找到了[https://www.npmjs.com/package/gistup](https://www.npmjs.com/package/gistup)并将存储库 fork 到[https://github.com/CrandellWS/mkg](https://github.com/CrandellWS/mkg)因为开发人员不想支持 Windows，这是操作系统当时使用。所以我重新设计了 npm 包以在 windows 以及 linux 和苹果上工作......

GitHub 上提供了完整源代码： [https ://github.com/CrandellWS/mkg](https://github.com/CrandellWS/mkg)

使用 npm 安装很简单

```
npm install -g mkg 
```

使用在 npmjs 包页面上描述： [https ://www.npmjs.com/package/gistup](https://www.npmjs.com/package/gistup)

一旦安装`cd`到您想要从中制作要点的每个目录...（请记住，没有带有要点的子文件夹）

并运行命令：

```
mkg 
```

它将在浏览器中打开您的新要点...此外，您将能够像普通 git 一样从那里控制它...只是没有子文件夹...

[https://stackoverflow.com/a/41233970/1815624](https://stackoverflow.com/a/41233970/1815624)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-07-08T19:26:19.290

我喜欢用一个超级简单的命令来制作`diff`s 的要点是：

`git diff origin master -U15 | gist -t diff`

`15`更改前后的行距在哪里（因此更容易看到较大文件中的差异。）

`-t`是`type`旗帜。

# jquery - CORS：总是通过 jQuery.ajax 从 Mojolicious::Lite 获得空响应

> ID：13552337
> 
> 赞同：1
> 
> 时间：2012-11-25T15:17:35.907
> 
> 标签：jquery, cors, mojolicious, mojolicious-lite

我正在使用 jQuery 从`Mojolicious::Lite`我正在构建的 API 中获取一些数据。但我无法通过 Ajax 从 API 接收任何数据。我可以通过`curl`虽然获取数据。

**更新**：我可以在同一个域上通过 Ajax 获取数据。这是一个CORS问题。

这是我的客户代码：

```
$.ajax({
  type: 'POST',
  url:  'http://localhost:3000/path',
  data: JSON.stringify({ foo: 'foo', bar: 'bar' }),
  dataType: 'json',
  contentType: 'application/json',
  beforeSend: function(xhr){
    xhr.setRequestHeader('Accept', 'application/json');
  }
}); 
```

这是API代码：

```
#!/usr/bin/perl -w

use Mojolicious::Lite;
use strict;

options '*' => sub {
  my $self = shift;

  $self->res->headers->header('Access-Control-Allow-Origin'=> 'http://localhost:7000');
  $self->res->headers->header('Access-Control-Allow-Credentials' => 'true');
  $self->res->headers->header('Access-Control-Allow-Methods' => 'GET, OPTIONS, POST, DELETE, PUT');
  $self->res->headers->header('Access-Control-Allow-Headers' => 'Content-Type, X-CSRF-Token');
  $self->res->headers->header('Access-Control-Max-Age' => '1728000');

  $self->respond_to(any => { data => '', status => 200 });
};

post '/path' => sub {
  return $_[0]->render( json => {hello => "world"} );
};

app->start; 
```

以下是所有请求的标头和数据：

`OPTIONS /path`：

```
Request headers:

OPTIONS /path HTTP/1.1
Host: localhost:3000
User-Agent: Mozilla/5.0 (X11; Ubuntu; Linux x86_64; rv:20.0) Gecko/20.0 Firefox/20.0
Accept: text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8
Accept-Language: pt-br,en-us;q=0.7,en;q=0.3
Accept-Encoding: gzip, deflate
DNT: 1
Origin: http://localhost:7000
Access-Control-Request-Method: POST
Access-Control-Request-Headers: content-type
Connection: keep-alive
Pragma: no-cache
Cache-Control: no-cache

Response headers:

HTTP/1.1 200 OK
Connection: keep-alive
Access-Control-Allow-Headers: Content-Type, X-CSRF-Token
Access-Control-Allow-Credentials: true
X-Powered-By: Mojolicious (Perl)
Date: Sun, 25 Nov 2012 14:45:19 GMT
Access-Control-Allow-Origin: http://localhost:7000
Access-Control-Allow-Methods: GET, OPTIONS, POST, DELETE, PUT
Content-Length: 0
Access-Control-Max-Age: 1728000
Content-Type: text/html;charset=UTF-8
Server: Mojolicious (Perl) 
```

`POST /path`：

```
Request headers:

POST /path HTTP/1.1
Host: localhost:3000
User-Agent: Mozilla/5.0 (X11; Ubuntu; Linux x86_64; rv:20.0) Gecko/20.0 Firefox/20.0
Accept: application/json
Accept-Language: pt-br,en-us;q=0.7,en;q=0.3
Accept-Encoding: gzip, deflate
DNT: 1
Content-Type: application/json; charset=UTF-8
Referer: http://localhost:7000/
Content-Length: 24
Origin: http://localhost:7000
Connection: keep-alive
Pragma: no-cache
Cache-Control: no-cache

Response headers:

HTTP/1.1 200 OK
Connection: keep-alive
Content-Type: application/json
X-Powered-By: Mojolicious (Perl)
Date: Sun, 25 Nov 2012 14:45:19 GMT
Content-Length: 17
Server: Mojolicious (Perl)

Request data: {"foo":"foo","bar":"bar"}
Response data: 
```

不知道问题出在我的 JS 还是 Perl 代码上。

**更新**：可能在 JS 代码上。 **更新**：~~CORS 似乎没问题。~~

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-04T21:14:16.010

很确定您还需要`Allow-*`在响应中包含与 CORS 相关的标头`POST`，而不仅仅是`OPTIONS`.

有关更多信息，请参阅此帖子： [无法在 JQuery 1.6.4 中使用 CORS 进行 PUT/POST/DELETE HTTP 调用](https://stackoverflow.com/questions/7587812/unable-to-make-put-post-delete-http-call-using-cors-in-jquery-1-6-4)

# java - 不能在父项目中使用外部 jar 文件的自动装配类

> ID：13552341
> 
> 赞同：1
> 
> 时间：2012-11-25T15:18:20.397
> 
> 标签：java, spring, jar, external, autowired

我的项目使用自动装配选项作为独立的工作正常，我从这个项目创建了一个 jar 文件。问题出现在我将此 jar 添加到父项目之后，当我尝试在我的父项目中使用外部 jar 文件的类时，出现类似“异常线程“主”java.lang.NullPointerException...”。

但是，如果我不在我的外部 jar 文件中使用自动装配选项并手动编写代码填充上下文。那么外部 jar 文件适用于我的父项目。

**带有自动装配类的外部 Jar 文件**

```
public class UserService {

@Autowired 
UserRepository userRepository;

@Autowired
Movie2Repository movieRepository;

@Autowired
PersonRepository personRepository;

ConfigurableApplicationContext context;
public UserService(){
    // context = new ClassPathXmlApplicationContext("META-INF/spring/application-context.xml");
}

public void closeApp(){

    //context.close();
}

public void  insert(){
     //userRepository = context.getBean(UserRepository.class);
     System.out.println("user vvvv");
     User u = new User();
     u.firstname="dede";
     userRepository.save(u);
     System.out.println("user eklendi"); 
```

**来自外部 jar 文件的 ApplicationContext 文件**

```
<beans xmlns="http://www.springframework.org/schema/beans"
xmlns:neo4j="http://www.springframework.org/schema/data/neo4j"
xmlns:mongo="http://www.springframework.org/schema/data/mongo"
xmlns:aop="http://www.springframework.org/schema/aop" 
xmlns:context="http://www.springframework.org/schema/context"
xmlns:jee="http://www.springframework.org/schema/jee" 
xmlns:tx="http://www.springframework.org/schema/tx"
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
xmlns:jpa="http://www.springframework.org/schema/data/jpa"
xsi:schemaLocation="http://www.springframework.org/schema/jee http://www.springframework.org/schema/jee/spring-jee-3.0.xsd
    http://www.springframework.org/schema/aop http://www.springframework.org/schema/aop/spring-aop-3.0.xsd
    http://www.springframework.org/schema/data/mongo http://www.springframework.org/schema/data/mongo/spring-mongo.xsd
    http://www.springframework.org/schema/data/neo4j http://www.springframework.org/schema/data/neo4j/spring-neo4j.xsd
    http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
    http://www.springframework.org/schema/data/jpa http://www.springframework.org/schema/data/jpa/spring-jpa-1.0.xsd
    http://www.springframework.org/schema/tx http://www.springframework.org/schema/tx/spring-tx-3.0.xsd
    http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-3.0.xsd">

<!-- JPA -->

<context:property-placeholder
    location="/META-INF/spring/database.properties" />

<import resource="/database.xml"/>

<bean id="transactionManager" class="org.springframework.orm.jpa.JpaTransactionManager">
    <property name="entityManagerFactory" ref="entityManagerFactory" />
</bean>

 <bean id="jpaVendorAdapter"
    class="org.springframework.orm.jpa.vendor.HibernateJpaVendorAdapter">
    <property name="showSql" value="false" />
    <property name="database" value="MYSQL" />
</bean>

<bean id="entityManagerFactory" class="org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean">
    <property name="dataSource" ref="dataSource" />
    <property name="persistenceUnitName" value="persistenceUnit" />
    <property name="jpaVendorAdapter" ref="jpaVendorAdapter" />
</bean>

<jpa:repositories base-package="org.springframework.data.example.jpa" /> 
```

**父项目包文件**

```
package abcdef;
import org.springframework.data.example.*; 
import org.springframework.data.example.jpa.UserService;
import org.springframework.data.example.jpa.UserService2;

public class abcde {

        public static void main(String[] args) {
            // TODO Auto-generated method stub
            UserService u= new UserService();
            u.insert();

        }

} 
```

**来自父项目的 ApplicationContext 文件**

```
<!-- JPA -->

<context:property-placeholder
    location="/META-INF/spring/database.properties" />

<import resource="/database.xml"/>

<import resource="classpath*:/META-INF/spring/*.xml" />

<bean id="transactionManager" class="org.springframework.orm.jpa.JpaTransactionManager">
    <property name="entityManagerFactory" ref="entityManagerFactory" />
</bean>

 <bean id="jpaVendorAdapter"
    class="org.springframework.orm.jpa.vendor.HibernateJpaVendorAdapter">
    <property name="showSql" value="false" />
    <property name="database" value="MYSQL" />
</bean>

<bean id="entityManagerFactory" class="org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean">
    <property name="dataSource" ref="dataSource" />
    <property name="persistenceUnitName" value="persistenceUnit" />
    <property name="jpaVendorAdapter" ref="jpaVendorAdapter" />
</bean>

<jpa:repositories base-package="org.springframework.data.example.jpa" /> 
```

在我们运行父项目的代码后，我收到以下错误：

```
 user vvvv
Exception in thread "main" java.lang.NullPointerException
    at org.springframework.data.example.jpa.UserService.insert(UserService.java:47)
    at abcdef.abcde.main(abcde.java:13) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T16:24:38.397

Pretty simple. Your `UserService` isn't wired because you created it with `new` and didn't retrieved it from the spring context.

```
public class abcde {

    public static void main(String[] args) {
        ApplicationContext ctx = new ClassPathXmlApplicationContext("META-INF/spring/application-context.xml");
        UserService u = ctx.getBean("userService");
        u.insert();

    }
} 
```

or something like that.

However your `UserService` is lacking its xml configuration or the `@Component` and depending configuration that spring would actually wire it. You should probably create your local spring configuration file that imports the one from the external jar.

# fancybox - 花式盒子加载

> ID：13552342
> 
> 赞同：0
> 
> 时间：2012-11-25T15:18:23.730
> 
> 标签：fancybox, onload-event

我想在页面加载时加载我的 fancybiox iframe：

```
 <script type="text/javascript">
                $(document).ready(function(){

    $("a.various2").fancybox({ 
        padding: 0,
        margin: 0,
        width: 400,
        height: 350,
        autoSize    : true,
        closeClick  : false,
        openEffect  : 'none',
        closeEffect : 'none'
    });

                    });
        </script>

</head>

<body>
<a class="various2" data-fancybox-type="iframe" href="nlpumc.html">Iframe</a> 
```

该脚本通过单击链接工作。但是它如何与准备好的文件一起工作？我测试：

```
$("a.various2").fancybox.open({ 
```

这不正确吗？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-15T15:48:31.233

**这是HTML...**

```
<a class="fancybox" href="http://fancyapps.com/fancybox/demo/1_b.jpg"><img src="http://fancyapps.com/fancybox/demo/1_s.jpg" alt=""/></a>

<a class="fancybox" href="http://fancyapps.com/fancybox/demo/2_b.jpg"><img src="http://fancyapps.com/fancybox/demo/2_s.jpg" alt=""/></a> 
```

**这是JS...**

```
// Activate fancyBox
$(".fancybox")
    .attr('rel', 'gallery')
    .fancybox({
        padding : 0
    });

// Launch fancyBox on first element
$(".fancybox").eq(0).trigger('click'); 
```

**现在 JSFiddle ......**

点击[这里](http://jsfiddle.net/Py2RA/)。

奇迹般有效！

# android - 谷歌地图安卓搜索位置

> ID：13552344
> 
> 赞同：0
> 
> 时间：2012-11-25T15:18:27.983
> 
> 标签：android, google-maps

我正在尝试按地址进行 Google 地图搜索

这是我的 cari.java 代码

```
import java.io.IOException;
import java.util.ArrayList;
import java.util.List;
import java.util.Locale;

import org.apache.http.NameValuePair;
import org.apache.http.message.BasicNameValuePair;
import org.json.JSONArray;
import org.json.JSONException;
import org.json.JSONObject;

import com.google.android.maps.GeoPoint;
import com.google.android.maps.MapController;
import com.google.android.maps.MapView;
import com.google.android.maps.Overlay;

import android.app.Activity;
import android.app.AlertDialog;
import android.content.Intent;
import android.location.Address;
import android.location.Geocoder;
import android.os.Bundle;
import android.util.Log;
import android.view.View;
import android.widget.EditText;
import android.widget.TextView;

public class cari extends com.google.android.maps.MapActivity {

       TextView error,pt;
       EditText cm;
       String i,returnStringLancar,stat;
       Geocoder geoCoder;
       GeoPoint p;
       MapController controller;
       MapView map;
        /** Called when the activity is first created. */

       @Override

        public void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);
            setContentView(R.layout.search);

            pt=(TextView)findViewById(R.id.peta);
            cm=(EditText)findViewById(R.id.cariMap);

       }

       public void clickHandler(View view){
           Intent a = null;
            switch (view.getId()){
            case R.id.show:
                geoCoder = new Geocoder(getApplicationContext(),
                        Locale.getDefault());
                List<Address> addresses;
                try {
                    addresses = geoCoder.getFromLocationName(cm.getText().toString(),5);
                if(addresses.size() > 0)
                {
                     p = new GeoPoint( (int) (addresses.get(0).getLatitude() * 1E6), 
                                      (int) (addresses.get(0).getLongitude() * 1E6));

                       controller.animateTo(p);
                       controller.setZoom(12);

                       MapOverlay mapOverlay = new MapOverlay();
                     List<Overlay> listOfOverlays = map.getOverlays();
                     listOfOverlays.clear();
                     listOfOverlays.add(mapOverlay);

                       map.invalidate();
                       cm.setText("");
                }
                else
                {
                        AlertDialog.Builder adb = new AlertDialog.Builder(cari.this);
                        adb.setTitle("Google Map");
                        adb.setMessage("Please Provide the Proper Place");
                        adb.setPositiveButton("Close",null);
                        adb.show();
                }
            } catch (IOException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
                break;
       }
       }

    @Override
    protected boolean isRouteDisplayed() {
        // TODO Auto-generated method stub
        return false;
    }
} 
```

这是我的 MapOverlay.java

```
import com.google.android.maps.GeoPoint;
import com.google.android.maps.MapView;

import android.app.Activity;
import android.content.Context;
import android.graphics.Bitmap;
import android.graphics.BitmapFactory;
import android.graphics.Canvas;
import android.graphics.Point;
import android.os.Bundle;

class MapOverlay extends com.google.android.maps.Overlay
{
    Context context;
    GeoPoint p;
    public boolean draw(Canvas canvas, MapView mapView, 
    boolean shadow, long when) 
    {
        super.draw(canvas, mapView, shadow);                   

        //---translate the GeoPoint to screen pixels---
        Point screenPts = new Point();
        mapView.getProjection().toPixels(p, screenPts);

        //---add the marker---
        Bitmap bmp = BitmapFactory.decodeResource(
            context.getResources(), R.drawable.icon);            
        canvas.drawBitmap(bmp, screenPts.x, screenPts.y-32, null);         
        return true;
    }
} 
```

这是我的布局 xml：

搜索.xml

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:orientation="vertical"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    >
<TextView  
    android:layout_width="fill_parent" 
    android:layout_height="wrap_content" 
    android.autoText="true"
    />

<EditText 
android:text="Enter your address" 
android:id="@+id/address" 
android:layout_width="fill_parent" 
android:layout_height="wrap_content">
</EditText>
<Button 
android:text="Search" 
android:id="@+id/launchmap" 
android:layout_width="150px" 
android:layout_height="wrap_content">
</Button>

</LinearLayout> 
```

我想要的是当我在editText中写下一条街道的名称（例如：1152 1st Avenue）并按下搜索按钮时，它将在谷歌地图上显示位置（1152 1st Avenue）。

当我运行这个程序时，它说

“ java.lang.RuntimeException：无法实例化活动 ComponentInfo{udin.googlemap2/udin.googlemap2.GoogleMap2}：”

和这个

“java.lang.ClassNotFoundException：加载程序dalvik.system.PathClassLoader中的udin.googlemap2.GoogleMap2 [/system/framework/com.google.android.maps.jar:/data/app/udin.googlemap2-2.apk]”

你能帮我吗？任何帮助我都会感激....还是谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-15T05:32:02.500

检查是否`<uses-library android:name="com.google.android.maps" />`在清单中给出..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-25T15:28:01.193

为此，您可以使用 Android 的地理编码器。它可以从给定的位置名称返回“已知地址”列表。然后，您可以在每个地址上使用`getLatitude()`and`getLongitude()`来获得适合您的地址。

在这`getFromLocationName()`方面是有用的。[在这里](http://developer.android.com/reference/android/location/Geocoder.html#getFromLocationName%28java.lang.String,%20int%29)查看详细信息。

获得经纬度后，您可以使用[本教程](https://developers.google.com/maps/documentation/android/hello-mapview)在地图上的该位置添加叠加项目。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-25T15:29:38.073

看这个帖子：[关于按街道名称在地图上显示位置的咨询](https://stackoverflow.com/questions/13100028/consultation-about-show-location-on-map-by-street-name/13101238#13101238)

关于`EditText`，`Button`你可以在这里阅读：[developer.android.com](http://developer.android.com/guide/topics/ui/controls.html)

# performance - 如何在 PyQt 中调整小部件的大小时禁用多个自动重绘？

> ID：13552345
> 
> 赞同：5
> 
> 时间：2012-11-25T15:18:28.317
> 
> 标签：performance, qt, pyqt, pyqt4, qpainter

我有一个带有小部件的 PyQt4 程序，其内容重绘非常缓慢（没关系，因为我的任务）。当我尝试调整这些小部件的大小时，程序会在未释放鼠标的情况下尝试重绘很多次。这是很多冻结。

我想禁用自动重绘并将 PyQt 配置为仅在释放鼠标时重绘所有小部件（这意味着每次调整大小都会重绘一次）。

怎么做？

**编辑1。**我会很简单地看到它，就像这样：你拖动线，当你拖动时，所有小部件都站立。当您释放它时，小部件会重绘。但我真的不确定在 PyQt4 中是否可行。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-25T20:14:09.943

首先，我建议确保如果您在小部件中使用自定义绘制事件，那么您不会在每个事件中做太多的工作，而只是寻找一个创可贴的解决方案。如果是这种情况，请尝试找到一种方法来缓存或减少工作。否则...

是否绘制不透明的决定是由您平台的窗口管理器做出的。据我所知，没有一个简单的属性可以切换此功能。与此类似的东西存在于[`QSplitter`](http://www.riverbankcomputing.co.uk/static/Docs/PyQt4/html/qsplitter.html#setOpaqueResize)仅在释放句柄后才绘制的内容。

我可以提供一种解决方法，即延迟更新，直到一段时间内没有调整大小。这将为您的应用程序提供一些喘息的空间来减少绘制事件。

```
from PyQt4 import QtCore, QtGui
import sys

class DelayedUpdater(QtGui.QWidget):

    def __init__(self):
        super(DelayedUpdater, self).__init__()
        self.layout = QtGui.QVBoxLayout(self)
        self.label = QtGui.QLabel("Some Text")
        self.layout.addWidget(self.label, QtCore.Qt.AlignCenter)

        self.delayEnabled = False
        self.delayTimeout = 100

        self._resizeTimer = QtCore.QTimer(self)
        self._resizeTimer.timeout.connect(self._delayedUpdate)

    def resizeEvent(self, event):
        if self.delayEnabled:
            self._resizeTimer.start(self.delayTimeout)
            self.setUpdatesEnabled(False)

        super(DelayedUpdater, self).resizeEvent(event)

    def _delayedUpdate(self):
        print "Performing actual update"
        self._resizeTimer.stop()
        self.setUpdatesEnabled(True)

if __name__ == "__main__":
    app = QtGui.QApplication(sys.argv)
    win = QtGui.QMainWindow()
    view = DelayedUpdater()
    win.setCentralWidget(view)
    win.show()
    view.delayEnabled = True
    app.exec_() 
```

您会注意到，当您快速调整主窗口大小时，自定义小部件不会发生更新，因为我们已在调整大小事件中将其关闭。QTimer 试图每 100 毫秒触发一次以执行更新并自行停止。但是每次发生另一个调整大小事件时，它都会重新启动该计时器。效果是计时器将继续被重置。禁用更新，直到出现延迟。

尝试按住鼠标，稍微调整大小，等待，然后再调整大小。即使您的鼠标按下但您没有调整大小，更新也应该发生。调整延迟以适应。您可以使用 bool 标志控制打开和关闭该功能。

这个例子也可以重新设计成`DelayedUpdater`一个 QObject，它接受一些 QWidget 实例作为参数。然后它将自己设置`eventFilter`为该对象的 并监视其`resizeEvent`. 这样，您不必为了添加它而对普通小部件进行子类化。您只需创建一个实例`DelayedUpdater`并将其用作实用程序对象来监视小部件。

以下是使其成为辅助对象的示例：

```
class MainWindow(QtGui.QMainWindow):

    def __init__(self, parent=None):
        super(MainWindow, self).__init__(parent)
        self.someWidget = QtGui.QWidget()
        self.setCentralWidget(self.someWidget)

        self.layout = QtGui.QVBoxLayout(self.someWidget)
        self.label = QtGui.QLabel("Some Text")
        self.layout.addWidget(self.label, QtCore.Qt.AlignCenter)

        self.delayer = DelayedUpdater(self.someWidget)

class DelayedUpdater(QtCore.QObject):

    def __init__(self, target, parent=None):
        super(DelayedUpdater, self).__init__(parent)
        self.target = target
        target.installEventFilter(self)

        self.delayEnabled = True
        self.delayTimeout = 100

        self._resizeTimer = QtCore.QTimer()
        self._resizeTimer.timeout.connect(self._delayedUpdate)

    def eventFilter(self, obj, event):
        if self.delayEnabled and obj is self.target:
            if event.type() == event.Resize:
                self._resizeTimer.start(self.delayTimeout)
                self.target.setUpdatesEnabled(False)

        return False

    def _delayedUpdate(self):
        print "Performing actual update"
        self._resizeTimer.stop()
        self.target.setUpdatesEnabled(True) 
```

请注意，我们只是在主窗口内的一些任意小部件上使用它。我们用这一行添加一个延迟更新器：

```
self.delayer = DelayedUpdater(self.someWidget) 
```

监视目标小部件的`DelayedUpdater`调整大小事件，并执行延迟更新。您可以扩展`eventFilter`以监视其他事件，例如移动。

# javascript - 根据 Javascript 请求 3D 渲染静止图像

> ID：13552347
> 
> 赞同：0
> 
> 时间：2012-11-25T15:18:49.037
> 
> 标签：javascript, image, 3d, rendering

我正在尝试制作一项服务，该服务需要在服务器上快速渲染简单的 3D 场景，然后将它们作为 JPEG 返回。

我怎么能在 HTML javascript 中申请工作？它对大众用户是否可扩展，websockets 会这样做吗？

```
function renderBlender(){
// 1\. Send out a job
// ?? put something

// 2\. Take result
// Get json and add it to HTML.
loadResult("Result.json");
//strImageList += "<a href=\"#\">";
//strImageList += "<img src='" + the location  + "' />"; 
```

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-25T15:53:54.020

这个客户端不需要任何特殊的东西。您的渲染图像在客户端与任何服务器图像都无法区分。一个简单的`<img src="renderer.php?id=fa24da98">`就足够了。要使其成为 ajaxy，您可以在需要时将图像的 src 设置为渲染器的 URL。

服务器端是所有神奇之处。这就是您必须渲染图像的地方（从客户端发送给您的任何参数），然后使用正确的标头在合适的 HTTP 响应中返回它。

Websockets 在单个请求每个客户端的情况下不会帮助您；但是对于每个客户端的恒定请求流场景，它们可以使事情变得更快、更轻。在这种情况下，上面的代码

可扩展性主要取决于服务器——负载、硬件、网络服务器以及它的配置方式等等。

# python - 在 AWS 上将 localhost:8080 (PubSubHubBub hub) 暴露给 Internet

> ID：13552352
> 
> 赞同：1
> 
> 时间：2012-11-25T15:19:11.017
> 
> 标签：python, google-app-engine, publish-subscribe, atom-feed

> **可能重复：**
> [可以在 Mountain Lion 中使用 GAE over LAN 测试网站吗？](https://stackoverflow.com/questions/13277538/possible-to-test-website-with-gae-over-lan-in-mountain-lion)

[从这个](http://www.liangeugene.com/2011/02/running-pubsubhubbub-on-ubuntu-10-04-python-2-6/)示例中，我有一个在 localhost 上运行的集线器。但由于我的`lynx`-browser 在脚本上不太热`jQuery`，我需要将管理控制台暴露在互联网上。在 Internet 上访问我的 AWS 服务器不起作用（即`ec2-13-13-341-3.aws.amazon.com:80/8080`）。

我如何转发/无论 localhost:8080 在 :80 从外部访问什么？

谢谢。

（另外，如果有人知道在 Amazon AWS 的 Ubuntu 机器上使用 Python 设置 PubSubHubBub Hub 的任何好的教程，请不要犹豫，让我知道！；）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T15:31:39.110

如果您可以访问“系统”，因为缺少更好的词，`http://localhost:8080`那么您应该也可以从计算机的本地 IP 访问它。例如`192.168.1.5:8080`在我的电脑上。然后，您可以从网络上的任何计算机访问它。请注意，您必须将 IP 地址更改为本地 IP。

这不会解决将端口 80 重定向到 8080 的问题，但我相信路由器上的端口转发可以帮助解决这个问题。

# actionscript-3 - Actionscript：使用种子创建伪随机数

> ID：13552354
> 
> 赞同：2
> 
> 时间：2012-11-25T15:19:30.713
> 
> 标签：actionscript-3, random, perlin-noise

我正在创建一个在 Flash 中返回 Perlin 噪声数的函数。对于这个函数，我必须有一个从静态种子返回随机数的函数。不幸的是，Actionscript 中的默认 Math.random 不能做到这一点。

我在互联网上搜索了很长时间，但找不到适合我的 perlin-noise 函数的解决方案。

我尝试了以下代码：

```
public static var seed:int = 602366;
public static function intNoise(x:int, y:int):Number {
    var n:Number = seed * 16127 + (x + y * 57);
    n = n % 602366;
    seed = n | 0;
    if (seed <= 0) seed = 1;
    return (seed * 0.00000166) * 2 - 1;
} 
```

此函数确实创建了一个随机数，但种子一直在变化，因此这不适用于 perlin 噪声。

```
public static function intNoise(x:int, y:int):Number {
    var n:Number = x + y * 57;
    n = (n<<13) ^ n;
    return ( 1 - ( (n * (n * n * 15731 + 789221) + 1376312589) & 0x7fffffff) / 1073741824.0);  
} 
```

我从我遵循的 Perlin Noise 教程中获得了这个函数：[Perlin Noise](http://freespace.virgin.net/hugo.elias/models/m_perlin.htm)，但它似乎只返回 1。

## 如何创建一个在使用相同种子调用时始终返回相同伪随机数的函数？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T07:14:16.827

我查看了链接中提到的随机数生成器，它看起来像这样：

```
function IntNoise(32-bit integer: x)
    x = (x<<13) ^ x;
    return ( 1.0 - ( (x * (x * x * 15731 + 789221) + 1376312589) & 7fffffff) / 1073741824.0);
end IntNoise function 
```

我是这样翻译的：

```
package
{
    import flash.display.*;

    public class Main extends Sprite {

        private var seeds:Array =
            [ -1000, -999, -998, 7, 11, 13, 17, 999, 1000, 1001 ];

        public function Main() {
            for ( var i:int = 0; i < 10; i++ )
                trace( intNoise( seeds[ i ] ) );

            // Outputs: 1, 0, 0, -0.595146656036377, -0.1810436248779297,                                 
            // 0.8304634094238281, -0.9540863037109375, 0, 0, 1
        }

        // returns floating point numbers between -1.0 and 1.0
        // returns 1 when x <= -1000 || x >= 1001 because b becomes 0
        // otherwise performs nicely
        public function
        intNoise( x:Number ):Number {
            x = ( uint( x << 13 ) ) ^ x;
            var a:Number = ( x * x * x * 15731 + x * 789221 );
            var b:Number =  a & 0x7fffffff;
            return 1.0 - b / 1073741824.0; 
        }
    }
} 
```

# android - 没有启动器图标

> ID：13552361
> 
> 赞同：2
> 
> 时间：2012-11-25T15:20:04.810
> 
> 标签：android, menu, icons, launcher, invisible

我有一个有趣的问题——至少对我来说。我不希望我的应用程序在菜单中有启动器图标 - 我远程启动它，我不想在菜单中显示它。

我该如何解决？

我的想法是从清单中删除以下内容：

```
<intent-filter>
     <action android:name="android.intent.action.MAIN" />
     <category android:name="android.intent.category.LAUNCHER" />
</intent-filter> 
```

这会解决我的问题吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-25T16:05:49.230

删除：

```
 <category android:name="android.intent.category.LAUNCHER" /> 
```

而且您不会有启动器图标。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-25T15:53:05.537

这就是我会做的。这定义了您的应用程序的网关活动，并且不影响功能。如果没有活动具有此过滤器，则不会有手动启动它的图标，这正是您想要的。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2017-01-05T13:43:42.733

[https://stackoverflow.com/a/13552763/6481542](https://stackoverflow.com/a/13552763/6481542)是正确的，但是要解决注释中提到的Android Studio编译问题，您需要修改Android Studio中的Run Configuration：

*   转到运行-> 编辑配置
*   在启动选项下，将启动从更改`Default Activity`为任何其他选项。与您的一项活动一起使用`Specified Activity`是一种合适的方法。

这适用于 Android Studio 2.2.3。

# java - SSL可以用java中的一个密钥加密和解密吗

> ID：13552369
> 
> 赞同：0
> 
> 时间：2012-11-25T15:21:20.887
> 
> 标签：java, ssl, aes, des

我有将数据从客户端传输到服务器的项目，我在 java 中使用 ssl，我使用一个密钥来加密和解密我使用 keytool 创建密钥

服务器 Security.addProvider(new Provider());

```
 //Specifying the Keystore details
        System.setProperty("javax.net.ssl.keyStore","testkeystore.ks");
        System.setProperty("javax.net.ssl.keyStorePassword","mypass");

        // Enable debugging to view the handshake and communication which happens between the SSLClient and the SSLServer
        // System.setProperty("javax.net.debug","all");
    }

            // Initialize the Server Socket
            SSLServerSocketFactory sslServerSocketfactory = (SSLServerSocketFactory)SSLServerSocketFactory.getDefault();
            sslServerSocket = (SSLServerSocket)sslServerSocketfactory.createServerSocket(intSSLport); 
```

客户端 System.setProperty("javax.net.ssl.trustStore", "/home/lap/NetBeansProjects/Dionaea-001/testkeystore.ks");

```
 {
        // Registering the JSSE provider
        Security.addProvider(new Provider());
    }

    try {
        // Creating Client Sockets
        SSLSocketFactory sslsocketfactory = (SSLSocketFactory)SSLSocketFactory.getDefault();
        SSLSocket sslSocket = (SSLSocket)sslsocketfactory.createSocket(strServerName,intSSLport); 
```

我的问题可以在 SSL 中使用一个密钥吗？我如何知道加密 AES 或 DES 的类型？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T19:17:20.820

服务器密钥库中的证书和私钥仅用于验证服务器。

使用 SSL/TLS，加密密钥是在握手期间协商的共享密钥。

[您可以从密码套件](http://docs.oracle.com/javase/7/docs/technotes/guides/security/SunProviders.html#SunJSSEProvider)中查看使用的加密算法，`SSLSession`一旦建立连接，您就可以从中获得。（您可以从 获取会话`SSLSocket`。）

# c# - 树视图过滤不返回所有文件

> ID：13552370
> 
> 赞同：0
> 
> 时间：2012-11-25T15:21:28.080
> 
> 标签：c#, asp.net

我的树视图由文件夹和文件填充。我使用下面的代码来过滤树视图，但它不会返回所有匹配字符串的文件，只返回一个文件。例如字母“f”在 3 个文件中，但当我搜索时它只返回 1 个文件。

```
private TreeNode FindNodeByValue(TreeNodeCollection nodes, string searchstring)
{

    // Loop through the tree node collection
    foreach (TreeNode node in nodes)
    {
        // Does the value match the search string?
        if (node.Value.ToUpper().Contains (searchstring.ToUpper()))
            // Yes it does match - return it
            return node;
        else
        {
            // No it does not match - search any child nodes of this node
            TreeNode childNode = SearchChildNodes(node, searchstring);
            // If the childNode is not null it was a match
            if (childNode != null)
                // Return the matching node
                return childNode;
        }
    }
    // If the matching node is not found return null
    return null;
}

/// <summary>
/// This method searches a node's ChildNodes collection to find a matching value
/// with the incoming search string
/// It will iteratively call itself as it drills into each nodes child nodes (if present)
/// </summary>
/// <param name="parentNode">Parent node to search for a match</param>
/// <param name="searchstring">string to be matched with the Nodes Value property</param>
/// <returns>Treenode of the matching node if found.  If not found it will be null</returns>
private TreeNode SearchChildNodes(TreeNode parentNode, string searchstring)
{
    // Loop through the child nodes of the parentNode passed in
    foreach (TreeNode node in parentNode.ChildNodes)
    {
        // Does the value match the search string?
        if (node.Value.ToUpper().Contains(searchstring.ToUpper()))
            // Yes it does match - return it
            return node;
        else
        {
            // No it does not match - recursively search any child nodes of this node
            TreeNode childNode = SearchChildNodes(node, searchstring);
            // If the childNode is not null it was a match
            if (childNode != null)
                // Return the matching node
                return childNode;
        }
    }
    // If the matching node is not found OR if there were no child nodes then return null
    return null;
}

protected void Button1_Click(object sender, EventArgs e)
{
    TreeNode trnode=FindNodeByValue(TreeView1.Nodes, fieldFilterTxtBx.Text);
    if (trnode != null)
    {
        TreeView1.Nodes.Clear();
      //  TreeNode newnode = new TreeNode("Detail Engineering");
       // TreeView1.Nodes.Add(newnode);
        TreeView1.Nodes.Add(trnode);
        TreeView1.ExpandAll();
    }
    else

{

Label1.Text = "No file found";

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-25T15:30:09.283

它只返回一个值，因为如果没有找到文件，该函数只会递归调用自身。您还需要将递归添加到 SearchChildNodes 中 if 语句的此分支：

```
if (node.Value.ToUpper().Contains(searchstring.ToUpper()))
// Yes it does match - return it
    return node;
else 
```

您可能还需要将文件名添加到数组或 Generic.List 以便一次存储多个文件。

# php - 我可以使用 PHP CLI 执行“cd”命令来更改目录吗？

> ID：13552373
> 
> 赞同：0
> 
> 时间：2012-11-25T15:21:45.730
> 
> 标签：php, command-line-interface, cd

我使用 PHP CLI 创建了一个脚本，我想让`cd`我根据我的命令行输入进入一个目录。

虽然我可以让 PHP 执行命令来回显输出（例如 echo `ls -al`），但我无法让它们运行`cd`。

我在网上搜索了很多以找到解决方案，但都没有找到。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-25T15:34:28.960

您不能使用`cd`它，因为它会在子 shell 中运行，并且当您在发出下一个命令之前返回 PHP 时，更改的工作目录将会丢失。

改为使用[`chdir`](http://php.net/manual/en/function.chdir.php)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-25T15:33:13.120

您需要`chdir`从 php 运行`cd`，从`exec, system, shell_exec`等运行。只更改 php 调用的子进程中的目录，每个新的系统调用都将从 php 当前工作目录开始。

# c# - DAL 在 .NET 中生成 SQL（为用户定义的模型构建查询）

> ID：13552374
> 
> 赞同：1
> 
> 时间：2012-11-25T15:21:49.957
> 
> 标签：c#, .net, sql, orm, data-access-layer

在大多数情况下，类是事先知道的（例如 Customer、Order）；使用可视化设计器、代码或配置文件中的属性为 ORM（例如实体框架、LINQ to SQL、NHibernate、BLToolkit）描述了它们。例如，当您需要使用 Customer 类的对象时，您可以编写如下强类型查询：

```
db.Customers
  .Where(c => c.FirstName == "John")
  .Select(c => new { c.Id, c.LastName })
  .GroupBy(c => c.Id) 
```

但是，在我的应用程序中，输入数据将被处理为用户在运行时定义的模型。用户将能够添加和删除属性，因此我无法在代码中定义模型。这将需要手动生成字符串 SQL 查询的想法让我感到恐惧。我希望能够编写这样的代码：

```
db.Tables["Customers"]
  .Where("c.FirstName = :FirstName")
  .Select(new[] { "c.Id", "c.LastName" })
  .GroupBy("c.Id")
  .Param(":FirstName", "John") 
```

（只是示例发明的语法。）

**问题：**是否有一个 .NET 库可以帮助构建复杂的 SQL 查询，而无需先在代码中定义模型？

PS 看起来像这样的库存在，只是不适用于 .NET。我很想看到 SQLAlchemy、Ruby on Rails ActiveRecord、PHP Yii ActiveRecord、Django 模型等。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T16:17:23.800

Rob Conery 的[大量](https://github.com/robconery/massive)可能对您有所帮助。它是一种轻量级的动态 DAL，具有您正在寻找的临时功能，同时仍为您提供 DAL 的一些好处。

因为它是动态的，所以它不会为您提供编译时检查或它的一些其他好处]，但它是一个非常方便的小工具，跨越了完整的 DAL 和原始 SQL 之间的空间。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-25T15:58:03.673

你现在很痛苦——这通常被视为一种反模式。它实际上是，但有时它是必需的（你可能只有其中一个应用程序）。坏消息是 - 没有任何 ORM 等的支持。

大多数 ORM 可以从数据库生成模型，但这是一个“开发时间”操作，因此当您的数据模型完全不存在时，就不可能明智地使用它。那就是说-我不确定这样的应用程序甚至会如何工作。

我不知道有任何应用程序 - 基本上有两个极端：作为字符串的 SQL，通常被任何有线索的人认为是不好的，以及强类型对象。从要求来看，您的应用程序介于两者之间，我认为这是不支持的。

您面临的一个问题是 LINQ 是 - 编译时检查操作，这被认为是巨大的优势，但现在它会咬你。您可以通过将“实体”对象作为 DYNAMIC 的基类来工作，然后从那里获取它（因为编译器不会抱怨动态对象上的任何内容）。从理论上讲，这可以让您在没有编译时检查的情况下为 LINQ 构建对象查询集成，但同样 - 由于缺乏“常见使用场景”，IIRC 不存在这样的事情。例如，我会因为没有编译时检查而窒息。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-12T12:00:52.267

问题的解决方案：[Mark Rendle的](https://github.com/markrendle/Simple.Data)[**Simple.Data**](https://github.com/markrendle/Simple.Data)。它允许在不定义任何类或属性的情况下编写这样的代码：

```
Database.Open().Users.FindAllByEmail(email).FirstOrDefault() 
```

[（在Rob Conery 庞大的](https://github.com/robconery/massive)图书馆的描述中提到过。）

# database-design - 如何知道我是否达到了正确的 Canonical Cover？

> ID：13552375
> 
> 赞同：1
> 
> 时间：2012-11-25T15:22:12.003
> 
> 标签：database-design, relational-database, database-schema, functional-dependencies

我知道如何通过一些步骤获得规范封面。

但是，我如何确保这是最小且正确的规范封面？

这是我尝试的示例：

```
R = {A, B, C, D, E}
F = {A->BC, CD->E, B->D, E->A} 
```

这是我所做的：

只需一步，我就完成了：

`C`是无关的`CD->E`

我的`Fc = {A->BC, D->E, B->D, E->A}`

但我不能走得更远。我也无法相信结果！

编辑：我还有另一个解决方案，即：`{A->BCE, B->D}`

编辑：我还有另一个解决方案，即：`{A->BCED}`

哪一个是正确的？

# objective-c - 并行使用两个嵌套的 dispatch_async？

> ID：13552376
> 
> 赞同：0
> 
> 时间：2012-11-25T15:22:23.540
> 
> 标签：objective-c, ios, grand-central-dispatch

有人可以向我解释为什么我在调试控制台中的第一个 NSLog(text count) 之前得到第二个 NSLog(images count) 吗？

我拥有两个并行`dispatch_async`（每个都是嵌套的）的目的是使用核心数据将文本和图像分别下载到表格视图中。请注意，图像数据比文本大得多。

我首先尝试在一个嵌套中下载文本和图像`dispatch_async`（当然，跳回主队列进行映射和提交文本和图像）。但是，我注意到在屏幕上显示单元格时出现了明显的延迟。我认为必须有一些更好的方法来做到这一点。任何建议都值得赞赏。

```
-(void)doSometing
{   
    dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT,0),^{
        // download text data
        [document.managedObjectContext performBlock:^{  
            NSLog(@"Text count is %d \n\n",[text count]);
            // insert text data to context
            // commit text data
        }];
    });

    // see if I can shorten wait time by download image separately
    //
    dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT,0), ^{
        // download image

        [document.managedObjectContext performBlock:^{
            NSLog(@"Images count is %d \n\n",[images count]);
            // insert images into context
            // commit images     
        }];
    });

} 
```

# java - 矩阵成 JTable

> ID：13552377
> 
> 赞同：0
> 
> 时间：2012-11-25T15:22:48.393
> 
> 标签：java, swing, file, matrix, jtable

我需要用静态二维数组填充 JTable。我为以下对象创建了这个模型`JTable`：

```
 public class InsertMatToJTable extends AbstractTableModel{

   String titre[] = {"age real", "sex real", "chest real", "resting_blood_pressure real","serum_cholestoral real","fasting_blood_sugar real","resting_electrocardiographic_results real","maximum_heart_rate_achieved real","exercise_induced_angina real","oldpeak real","slope real","number_of_major_vessels real","thal real", "class"};

   String line;

    float mat[][]= new float[270][13];

    float matrice_normalise[][];

    int i = 0,j=0;

    public void InsertMatToJTable()
    {

try {
        FileInputStream fis = new FileInputStream("fichier.txt");
            BufferedReader br = new BufferedReader(new InputStreamReader(fis));

            while ((line = br.readLine()) != null) {
                            StringTokenizer st1 = new StringTokenizer(line, " ");
                            while (st1.hasMoreTokens())
                            {mat[i][j]=Float.valueOf(st1.nextToken()).floatValue(); 
                                                        j++;

                           if (st1.hasMoreTokens()!=true)   i++;
                            }      
            }
            br.close();
      }catch(Exception e) {
                    e.printStackTrace();}

      Normalisation norm = new Normalisation(mat);

   // for(i=0;i<270;i++)
    //{for(j=0; j<14;j++)
    //{matrice_normalise[i][j]=norm.mat_normalised[i][j];
    //}
      matrice_normalise=norm.mat_normalised;

    }
 @Override
   public int getRowCount() {
    return 270*13;
  }

 @Override
public int getColumnCount() {
    return 13;
}

@Override
public Object getValueAt(int rowIndex, int columnIndex) {
    return  matrice_normalise[rowIndex][columnIndex];
}

public String getColumnName(int columnIndex) {
    return titre[columnIndex];

}
    } 
```

基本上，这段代码从一个文本文件中读取，每行包含 13 个数值，并将它们存储到一个静态矩阵中，然后应用一些称为“规范化”的其他处理。

这里的问题似乎出在“getValueAt”函数中。我每次都有这个错误：

```
 Exception in thread "AWT-EventQueue-0" java.lang.NullPointerException
         at prodm.InsertMatToJTable.getValueAt(InsertMatToJTable.java:62) 
```

首先，我需要知道这段代码是否真的像我认为的那样，将数据存储在矩阵中，就像存储在文本文件中一样。

其次，我真的不知道 getValueAt 函数有什么问题？

另外，我还注意到了一些其他的事情。这部分肯定有问题：

```
 while ((line = br.readLine()) != null) {
                            StringTokenizer st1 = new StringTokenizer(line, " ");
                            while (st1.hasMoreTokens())
                            {mat[i][j]=Float.valueOf(st1.nextToken()).floatValue(); 
                                                        j++;
                                                       if (j==13) {i++;j=1;}
                            } 
```

它从文件中读取数据，但没有按应有的方式存储数据。基本上，它引入了一个“转变”，从第二行开始。例如，应该存储在 [1][0] 的是 [1][1]，[2][0] 是 [2][2]...等。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-25T22:45:40.813

问题是你写了：

```
public void InsertMatToJTable() 
```

但你应该写：

```
public InsertMatToJTable() 
```

请注意，`void`第二个片段中没有。

您已经声明了一个名为的方法`InsertMatToJTable`，而不是同名类的构造函数。因此，当您调用时，您`new InsertMatToJTable()`会调用默认的无参数构造函数并且您的代码永远不会运行，从而使您的矩阵保持未初始化状态，因此`NullPointerException`.

为避免此类错字问题，请将日志添加到您的代码中并使用调试器来查找问题。

这是一个工作代码的示例演示。

```
import java.util.Random;

import javax.swing.JFrame;
import javax.swing.JScrollPane;
import javax.swing.JTable;
import javax.swing.SwingUtilities;
import javax.swing.table.AbstractTableModel;

public class TestTables {

    private static final int ROWS = 270;
    private static final String titre[] = { "age real", "sex real", "chest real", "resting_blood_pressure real", "serum_cholestoral real",
            "fasting_blood_sugar real", "resting_electrocardiographic_results real", "maximum_heart_rate_achieved real",
            "exercise_induced_angina real", "oldpeak real", "slope real", "number_of_major_vessels real", "thal real", "class" };

    public static class InsertMatToJTable extends AbstractTableModel {

        private float[][] matrice_normalise;

        public InsertMatToJTable(float[][] matrice_normalise) {
            this.matrice_normalise = matrice_normalise;
        }

        @Override
        public int getRowCount() {
            return matrice_normalise.length;
        }

        @Override
        public int getColumnCount() {
            return titre.length;
        }

        @Override
        public Object getValueAt(int rowIndex, int columnIndex) {
            return matrice_normalise[rowIndex][columnIndex];
        }

        @Override
        public String getColumnName(int columnIndex) {
            return titre[columnIndex];

        }
    }

    public static void main(String[] args) {
        SwingUtilities.invokeLater(new Runnable() {
            @Override
            public void run() {
                JFrame frame = new JFrame(TestTables.class.getSimpleName());
                frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
                float[][] matrix = new float[ROWS][titre.length];
                Random random = new Random();
                for (int i = 0; i < matrix.length; i++) {
                    for (int j = 0; j < matrix[i].length; j++) {
                        matrix[i][j] = random.nextFloat() * 100;
                    }
                }
                InsertMatToJTable model = new InsertMatToJTable(matrix);
                JTable table = new JTable(model);
                JScrollPane scroll = new JScrollPane(table);
                frame.add(scroll);
                frame.pack();
                frame.setVisible(true);
            }
        });
    }
} 
```

# android - 如何显示 rss 阅读器的项目

> ID：13552380
> 
> 赞同：-1
> 
> 时间：2012-11-25T15:23:00.950
> 
> 标签：android, rss

我正在尝试制作一个 rss 应用程序。我已设法检索 RSS 提要，将它们存储到我的自定义集合（ArrayList）中并将它们显示在列表视图中。为此，我正在使用我制作的 setter/getter 方法我的“项目”类。现在，每次在我的列表中选择一个项目时，我都想加载一个新活动并显示所选的 rss 帖子。我使用可序列化接口将“ArrayList”传递给我的新活动，但我的设置器/获取器不是可访问，我无法显示 RSS 帖子。那我能做什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-25T15:45:38.480

你说你创建了一个项目类。在您的活动中创建一个对象并从该类中检索信息。

# iphone - 将用户名/密码发送到服务器时，AppStore 是否需要使用 SSL

> ID：13552384
> 
> 赞同：0
> 
> 时间：2012-11-25T15:23:18.073
> 
> 标签：iphone, objective-c, login, passwords

自从 Apple 取消了 OpenSSL（为主要的操作系统构建服务器）以来，我现在正在做一场噩梦。

我的应用程序上有一个登录屏幕，它将用户名和密码发送到服务器（C++ boost），然后返回会话密钥。

我应该怎么做才能将密码发送到服务器并让苹果接受我的应用程序？SSL是唯一的方法吗？如果是这样，有人可以为我指出一个好的指南或 iphone 上 SSL 套接字的 xcode 项目的方向。网上似乎没有太多关于它的信息，但几乎所有应用程序都必须这样做。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-25T15:29:00.843

没有严格要求 SSL，但我不会信任任何不使用安全通信的应用程序。

# c# - 如何获取所选幻灯片的 ID

> ID：13552385
> 
> 赞同：2
> 
> 时间：2012-11-25T15:23:19.977
> 
> 标签：c#, .net, vsto, powerpoint, office-interop

我需要用户在左窗格中选择的幻灯片的 ID。

在下图中，它将是 1 和 3。

有没有我可以使用的方法，或者我需要遍历所有幻灯片并检查一些属性？

![PowerPoint 2013 幻灯片窗格](../Images/44170938f87f672713d073629acbee85.png)

**更新：**基于 Steve Rindsberg 的 VBA 解决方案的解决方案。

```
foreach (PowerPoint.Slide sld in Application.ActiveWindow.Selection.SlideRange)
{
  int s = sld.SlideNumber;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-25T18:02:00.263

你会在 VBA 中这样做

```
 Dim oSl As Slide
    For Each oSl In ActiveWindow.Selection.SlideRange
        Debug.Print oSl.SlideID
    Next 
```

# sql - SQL NOSQL 混合可能与否？

> ID：13552386
> 
> 赞同：7
> 
> 时间：2012-11-25T15:23:34.590
> 
> 标签：sql, nosql

我在关系数据库上有一个应用程序，需要更改以保留更多数据。我的问题是只有 2 个表将存储更多数据（多达数十亿个条目），其中一个表由 fk“链接”到其他表。我可以放弃这些表的关系模型。我想保持数据库的其余部分完好无损，只更改这两个表。我还在这些表上做很多查询——从简单的选择到分组和子查询——所以那里有更多的问题。

我在 NoSQL 方面的经验是有限的，所以我在问它的​​哪一个（如果有的话）适合我的需求： - 庞大的数据 - 复杂的查询 - 与 SQL 数据库的集成。这不像前两个重要，如果值得的话，我可以将我的整个数据库迁移到等效的数据库。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-25T20:56:09.563

关系数据库和 NoSQL 方法都可以处理具有数十亿数据点的数据。根据所提供的信息，很难做出有意义和具体的建议。了解更多关于您尝试对数据执行的操作、关于硬件和网络拓扑的选择等信息会很有帮助。

我假设由于您当前使用的是关系数据库，您可能已经考虑过分区或以其他方式构建较大的表，以便您的查询性能令人满意。这项活动本身可能不是微不足道的，但恕我直言，在明确需要探索替代方案之前，具有优化 sql 的良好数据库设计可以带您走很长一段路。

但是，如果您的数据使用看起来像一次写入、经常读取、连接依赖项是可管理的，并且您需要对数据集执行一些聚合，那么您可能会开始寻找替代方法，例如 Hadoop 或 MongoDB——但是这些选择在性能、功能、平台要求、延迟等方面进行权衡。如果没有两者之间的一些数据重复，您关于 NoSQL 存储库和 SQL 数据库在查询级别的集成的特定问题可能无法实现。例如，MongoDB 不喜欢连接 (http://stackoverflow.com/questions/4067197/mongodb-and-joins)，因此您必须在设计持久性模型时考虑到这一点，这可能涉及数据重复。

我想说的是——确定“正确”的方法将取决于你的具体目标和限制。

# object - 在ngRepeat中对哈希对象的值进行排序 - angularJS

> ID：13552387
> 
> 赞同：8
> 
> 时间：2012-11-25T15:23:45.407
> 
> 标签：object, hash, angularjs

我有一个这样的对象：

```
$scope.phones = new Object();
$scope.phones['id1'] = {
    "name":"Phone Name1",
    "dateReleased":"2012-1-09 15:48:24"
};
$scope.phones['id2'] = {
    "name": "Phone Name2",
    "dateReleased":"2012-3-12 15:32:11"
};
$scope.phones['id3'] = {
    "name": "Phone Name3",
    "dateReleased":"2012-2-10 13:53:32"
}; 
```

我正在使用 ngRepeat 显示这个。我无法订购`dateReleased`。此外，反向排序不起作用。我的 ngRepeat 看起来是这样的：

```
<li ng-repeat="phone in phones | orderBy:dateReleased:true">
    <p>{{phone.name}}</p>
    <p>{{phone.dateReleased}}</p>
</li> 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-09-17T19:19:07.830

虽然 ngRepeat 可以迭代哈希对象，就像`$scope.phones`在您的示例中一样，但内置`orderBy`过滤器将不起作用。我相信这是由于对象的存储方式。正如其他人所指出的，您需要将散列转换为数组。虽然您可以使用上面建议的方法来执行此操作，但我更喜欢使用自定义过滤器来执行此操作。这给了我不必直接更改我的哈希的好处，并且让我可以将过滤器与其他哈希一起重用。

```
yourApp.filter('orderObjectBy', function() {
  return function(items, field, reverse) {
    var filtered = [];
    angular.forEach(items, function(item) {
      filtered.push(item);
    });
    filtered.sort(function (a, b) {
      return (a[field] > b[field] ? 1 : -1);
    });
    if(reverse) filtered.reverse();
    return filtered;
  };
}); 
```

此过滤器将对象转换为标准数组并按您指定的字段对其进行排序。您可以`orderObjectBy`完全像使用过滤器一样`orderBy`，在字段名称后包含一个布尔值来指定是否应反转顺序。换句话说，`false`是上升的，`true`是下降的。

```
<li ng-repeat="phone in phones | orderObjectBy:'dateReleased':true">
  <p>{{phone.name}}</p>
  <p>{{phone.dateReleased}}</p>
</li> 
```

我的[博客上](http://justinklemm.com/angularjs-filter-ordering-objects-ngrepeat/)有一篇关于这个主题的帖子。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-25T18:12:38.547

如果您查看[文档](http://docs.angularjs.org/api/ng.filter%3aorderBy)，它会说 orderBy 中的表达式可以是**function**、**string**或**Array**。因此，您需要**dateReleased**是一个字符串：'dateReleased'

你还需要你的手机对象是一个实际的数组。

尝试：

```
$scope.phones = [{
        "name":"Phone Name1",
        "dateReleased":"2012-1-09 15:48:24"
    },{
        "name": "Phone Name2",
        "dateReleased":"2012-3-12 15:32:11"
    },{
        "name": "Phone Name3",
        "dateReleased":"2012-2-10 13:53:32"
    }];

<li ng-repeat="phone in phones | orderBy:'dateReleased':true">
    <p>{{phone.name}}</p>
    <p>{{phone.dateReleased}}</p>
</li> 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-27T00:10:39.337

其他两个答案都可以让您成功，但并非一路...

您需要在作用域上创建一个函数，将对象转换为数组，如下所示：

```
$scope.phonesArray = function() {
    var result = [];
    angular.forEach($scope.phones, function(phone, id) {
      result.push(phone);
    });
    return result;
}; 
```

然后你会在你的 ngRepeat 中调用它而不是你的对象：

```
<li ng-repeat="phone in phonesArray() | orderBy:'dateReleased':true">
    <p>{{phone.name}}</p>
    <p>{{phone.dateReleased}}</p>
</li> 
```

另外：请注意这`'dateReleased'`是一个字符串，因此它知道 $eval 该字符串脱离当前项目，否则它将检查不存在的父 $scope.dateReleased。

[这是我认为您正在尝试做的事情](http://plnkr.co/edit/4LN37w)

编辑：如果您担心这样做的功能太“昂贵”，您也可以将对象“转换”为数组并将其存储在 $scope 上，但这不应该成为问题，因为您为一个用户重新开发客户端应用程序，而不是为许多用户开发服务器应用程序，这意味着您有一点“昂贵”的回旋余地。（反正不会这样）

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-11-25T18:11:20.170

首先，您需要了解这一点`ng:filter`并`ng:orderBy`使用数组（项目的有序集合），但您试图在 Object（_un_ordered 项目集合）上使用它们。一种可能的方法是将所有对象收集到一个数组中，然后继续处理`ng-repeat`它。像这样：

```
<ul ng-init="phones = [
      {name:'Phone Name 1', dateReleased:'2011-1-09 15:48:24'}
    , {name:'Phone Name 2', dateReleased:'2012-3-12 15:32:11'}
    , {name:'Phone Name 3', dateReleased:'2012-2-10 13:53:32'}]; 
    pred = '-dateReleased';" >
    <li ng-repeat="phone in phones | orderBy:pred">
        <p>{{phone.name}}</p>
        <p>{{phone.dateReleased}}</p>
    </li>
</ul> 
```

# sprite - andengine 移除像 Sprites 这样的可收集对象

> ID：13552393
> 
> 赞同：1
> 
> 时间：2012-11-25T15:24:26.000
> 
> 标签：sprite, andengine, tmx

我正在使用 andangine 以及 tmx 和 body2d 扩展开发游戏。我在创建地图时创建对象（精灵），例如硬币的特定位置。我使用contactlistener来检查玩家是否与硬币碰撞。

我怎样才能删除这个精灵？我怎样才能最好地组织我的精灵？谢谢 =)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T21:57:15.627

我假设你创建一个`PhysicsConnector`连接你的精灵和身体。创建这些物理连接器的列表，当您决定应该移除一个主体（及其精灵）时，请执行以下操作：

```
Body bodyToRemove = //Get it from your contact listener
for(PhysicsConnector connector : mPhysicsConnectors) //mPhysicsConnectors is the list of your coins physics connectors.
    if(connector.getBody() == bodyToRemove)
        removeSpriteAndBody(connector); //This method should also delete the physics connector itself from the connectors list. 
```

关于精灵组织：硬币是可重复使用的精灵，你不应该每次都重新创建它们。您可以使用对象池，[这里](https://stackoverflow.com/questions/13253535/keeping-track-of-unnamed-objects)有一个关于这个主题的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T14:00:31.383

我建议你设置一个身体的用户数据。在您的碰撞处理程序中，您将能够使用它。小例子：

```
body.setUserData(...); 
```

..

```
 public void postSolve(Contact contact, ContactImpulse impulse) {

            ... bodyAType = (...) bodyA.getUserData();
            ... bodyBType = (...) bodyB.getUserData();
            if (bodyAType != null && bodyBType != null) {
               if (bodyAType.getUserData.equals(...)) {
                   //.......do what you need
               }
            }
    } 
```

# ruby - 如何在 Ruby 中获取与给定单例（或特征）类对应的对象？

> ID：13552394
> 
> 赞同：3
> 
> 时间：2012-11-25T15:24:29.027
> 
> 标签：ruby, eigenclass

假设以下代码：

```
class A
end

a = A.new

As = class << a
    self
end

# or:
# As = a.singleton_class 
```

有什么办法可以从中得到`a`吗`As`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-25T15:32:27.733

这里有一个技巧给你：

```
class A
end

a = A.new

As = a.singleton_class

a2 = ObjectSpace.each_object.select{|obj| obj.singleton_class == As}.first

a2 == a # => true 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-25T15:47:30.000

我认为这很简单：

```
ObjectSpace.each_object(As).first
# => #<A:0x000000029a7c50> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-05T20:55:28.047

[Sawa](https://stackoverflow.com/users/314166/sawa)的解决方案不适用于类的特征类。通过解析返回的字符串，可以通过`Object#to_s`和方法获得通用方法，请参见[atalon.cz](http://atalon.cz/rb-om/ruby-object-model/#object-to-string-map-tos)。然而，这个解决方案并不是 100% 可靠的，因为在 Ruby 中，可以重新分配/删除常量。`Module#to_s`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-25T15:34:17.393

这只是我的有根据的猜测，所以 YMMV，但我认为“a”需要定义为类变量（即“@@a = A.new”），然后您将拥有适当的访问器方法来返回类实例。

话虽如此，您是否考虑过使用[Singleton](http://www.ruby-doc.org/stdlib-1.9.3/libdoc/singleton/rdoc/Singleton.html)模块（假设您使用的是 1.9.3）？

# iphone - Check if NSNumber has trailing .00 digits or not

> ID：13552400
> 
> 赞同：2
> 
> 时间：2012-11-25T15:25:32.600
> 
> 标签：iphone, objective-c, ios, nsnumber, nsnumberformatter

I have a method that creates a money style string from an NSNumber.

```
+ (NSString *)formatShortPayment: (NSNumber *)payment {

    if (![payment isEqual: [NSNull null]]) {

        // Set locale to GB
        NSLocale *locale = [[NSLocale alloc] initWithLocaleIdentifier:@"en_GB"];
        NSNumberFormatter *formatter = [[NSNumberFormatter alloc] init];
        [formatter setLocale: locale];
        [formatter setNumberStyle: NSNumberFormatterCurrencyStyle];

        // If the payment is 1000 or over, get rid of fraction numbers
        if ([payment doubleValue] >= 1000.0) {
            [formatter setMaximumFractionDigits: 0];
            payment = [NSNumber numberWithFloat:([payment floatValue] / 1000)];
        }

        else {
            // Here's where I want to check if the value ends with .00 or not
        }

        // Return clean number
        return [formatter stringFromNumber: payment];

    }

    return nil;
} 
```

This works great, but if the value is < 1000.0 I'd like to check what the trailing digits are and remove them if they equal .00.

For example: 25.00 => 25 13.29 => 13.29

I'm not sure how best to accomplish this. Any suggestions?

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-25T15:37:47.163

```
if (([payment doubleValue] - floor([payment doubleValue]) < 0.01) {
    [formatter setMaximumFractionDigits: 0];
} 
```

This should work.

# c++ - C ++：将常量对象分配给非常量对象时的不同结果

> ID：13552401
> 
> 赞同：0
> 
> 时间：2012-11-25T15:25:38.500
> 
> 标签：c++

我有一堂有两个二传手的课。一、参数是常数，一不是。

```
class  Author
{
  string name;
  Book* book;
public:
  void setName(const string& name) { this->name = name; }  // no error
  void setBook(const Book* book) { this->book = book; } // error: value of const Book* cannot assign to Book*
} 
```

我的问题是：为什么在`setName`方法中，我可以使参数保持不变而没有错误，但不能在`setBook`.

谢谢 ：）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-25T15:27:21.413

因为您可以在将对象`*book`指向 分配给 之后对其进行修改`this->book`，从而规避`const`了论点的本质。

（您必须将其显式转换为指向非常量对象的指针）

换句话说，

*   声明`setBook(const Book* book)`意味着指向的对象`book`不会被修改（这是对调用函数的“承诺”）。
*   然而，该字段`this->book`以一种您可以轻松修改它所指向的对象的方式声明。

`this->book`通过函数参数的赋值，`book`您稍后可以修改函数参数最初指向的对象`book`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-25T15:33:00.667

`const Book*`是指向 (const Book) 的指针，而不是 (const pointer to) Book。（我相信你期待后者）。

您应该使用类型定义的指针类型来避免此类错误。看看它是如何在 windows.h 中完成的：

```
typedef ULONG *PULONG; 
```

这样就没有混乱了。我的建议：`typedef Book *PBook;`在类 Book 声明之后立即编写，并且永远不要在实际代码中输入“Book*”。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-25T16:08:31.867

假设你可以做到，那么你可以编写如下代码：

```
// definition of Book
struct Book {
    int pages;
}

// inside Author, member function
void setBook(const Book* abook) { 
    this->book = abook;
    this->book->pages = 1; // modify the object pointed to by abook
}

// calling code that uses Author class
const Book b = {0}; // a const object
myAuthor->setBook(&b); // modifies a const object 
```

const 系统的要点是防止您修改 const 对象，除非您的代码包含强制转换（即删除 const）。因此，它禁止您将指针到常量类型的值分配给类型为非常量指针的变量。

# java - Java：将变量的引用作为方法的参数传递

> ID：13552405
> 
> 赞同：1
> 
> 时间：2012-11-25T15:26:11.203
> 
> 标签：java, methods, reference, arguments, argument-passing

当将对象作为方法的参数传递时，方法内部参数发生的所有更改也会影响“原始”对象。那是因为参数是对对象的引用。

但我也想对变量做同样的事情——我希望方法内部发生的所有变化都会影响“原始”变量。但我不知道怎么做。我想这样做，因为有时需要以相同的方式处理多个局部变量。

如何将变量的引用作为方法的参数传递？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-25T15:28:24.590

除了将变量存储在对象中并传递对象之外，别无选择。在 Java 中，所有参数都是按值传递的。

对象可以是`this`（即变量实际上是当前对象的一个​​字段）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-25T15:29:25.150

你能澄清一下“变量”这个词是什么意思吗？您的意思是方法内部的本地引用、传入的原语还是其他？

Java 引用和原语是按值传递的。无论你多么想改变它们，你都无法改变它们。

# java - JSF 报告呈现较低的线程优先级

> ID：13552407
> 
> 赞同：0
> 
> 时间：2012-11-25T15:26:40.253
> 
> 标签：java, jsf, seam

我用 facelts、Excel 和 PDF 生成巨大的报告，

使用 JSF 1.2、Seam 2.2.3

如果我能以某种方式降低这些 JSF 页面上的线程优先级，那会很痛苦，因为只要不干扰系统的其他部分，花费多长时间并不重要。

就像现在当我生成 1 个文件、pdf 或 excel 时一样，因为它需要大约 30 秒左右，它也会减慢系统的其余部分。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-25T15:37:33.180

[您可以创建一个新线程来创建您的报告，并使用setPriority()](http://docs.oracle.com/javase/6/docs/api/java/lang/Thread.html#setPriority%28int%29)为其设置低优先级。但是我不确定确切的行为。它可能会降低其他线程的优先级。它可能不会与在操作系统层设置优先级具有相同的效果。

# ruby-on-rails - 除非名称已经存在，否则将名称推送到结果？

> ID：13552409
> 
> 赞同：0
> 
> 时间：2012-11-25T15:26:57.123
> 
> 标签：ruby-on-rails

我的标签控制器中有以下内容（`params[:q]`来自此插件： http: [//loopj.com/jquery-tokeninput/](http://loopj.com/jquery-tokeninput/)）。这基本上是此截屏视频的略微修改产品：[http](http://railscasts.com/episodes/258-token-fields) ://railscasts.com/episodes/258-token-fields 。

**tags_controller.rb：**

```
class TagsController < ApplicationController
  def index
    @tags = Tag.where("name like ?", "%#{params[:q]}%")
    results = @tags.map(&:attributes)
    results << {:name => "Add: #{params[:q]}", :id => "CREATE_#{params[:q]}_END"}

    respond_to do |format|
      format.html
      format.json { render :json => results }
    end
  end 
```

我只想`results << {:name => "Add: #{params[:q]}", :id => "CREATE_#{params[:q]}_END"}`在名称中不存在的情况下才这样做`@tags`。因为现在，它看起来像这样：

> 编程#输入字段
> 
> 编程#下拉菜单
> 
> 添加：编程#下拉菜单

我希望它像这样显示

> 编程#输入字段
> 
> 添加：编程#下拉菜单

如何做到这一点？

**编辑：**

这是模型和 JavaScript 以防万一：

**应用程序.js**

```
$(function() {
  $("#post_tag_tokens").tokenInput("/tags.json", {
    crossDomain: false,
    prePopulate: $("#post_tag_tokens").data("pre"),
    preventDuplicates: true,
    theme: "facebook"
  });
}); 
```

**post.rb:**

```
 def tag_tokens=(ids)
    ids.gsub!(/CREATE_(.+?)_END/) do
      Tag.find_or_create_by_name(:name => $1).id
    end
    self.tag_ids = ids.split(",")
   end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T15:37:43.563

你可以这样做：

```
 @tag = Tag.find_by_name(params[:q]) 
```

或者

```
 @tag = Tag.name_like(params[:q])   #For this you need to install gem [searchlogic][1]

 if @tag.blank?
   # Do you things
 end 
```

# arduino - 清除特定中断掩码时是否会推迟或忽略中断？

> ID：13552412
> 
> 赞同：2
> 
> 时间：2012-11-25T15:27:21.000
> 
> 标签：arduino, interrupt, avr

我在 Arduino (Avr) 中有*一段代码*，我想在不被中断中断的情况下执行它，*该中断也对这段代码中使用的变量进行操作*。我不希望在执行代码时丢失该中断；相反，我想让中断被推迟一小段时间。我只想推迟这一次中断，而不是所有中断。

现在*我正在清除该中断掩码并*在代码完成后再次设置它。这管用吗？这是代码的样子：

我不想被那个中断打断的一段代码（在这种情况下是 timer1 溢出中断）：

```
 TIMSK1 = 0; //Set Timer1 Mask off. Just postponed ???? I hope so.
  int c = buffer[reading_pointer]; 
  reading_pointer = (reading_pointer + 1)%SIZE_OF_BUFFER;
  something_on_buffer = false;
  //buffer and something_on_buffer are set on Timer1 interrupt. 
  TIMSK1 |= (1 << TOIE1); //Enable timer1 again. 
```

`something_on_buffer` 并且也设置在 Timer1 上，如果在读取缓冲区和设置这段代码`buffer`的中间执行中断会发生冲突，这就是我想为这几行代码推迟 Timer1 中断的原因。`something_on_buffer`只是要确定。这个怎么做？这是正确的方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-02T03:58:51.947

你的方法看起来不错。

通常，处理器有一个用于中断的标志寄存器和一个用于启用中断的寄存器。在每一步，处理器检查标志位和使能位，看它是否应该运行中断。也就是说，启用位不控制是否设置标志，只有在设置标志引起中断运行时。

如果通过设置该位启用中断并且标志已经设置，则中断在下一条机器指令之前运行。

如果中断没有使能，标志位仍然可以由条件设置。

# java - 依赖于抽象。不要依赖具体的类

> ID：13552413
> 
> 赞同：4
> 
> 时间：2012-11-25T15:27:23.543
> 
> 标签：java, oop, design-patterns

当我在阅读工厂时，首先在设计模式书上抽象了工厂设计模式。它提到了这句话。

你能否举一个基本的例子和解释来澄清它。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-11-25T15:37:51.687

**依赖倒置原则**；五个[面向对象设计原则](http://en.wikipedia.org/wiki/SOLID_%28object-oriented_design%29)之一。查看这个问题的答案；[“什么是依赖倒置原则，为什么它很重要？”](https://stackoverflow.com/questions/62539/what-is-the-dependency-inversion-principle-and-why-is-it-important) - 那里有一些非常好的信息。

> 在传统的应用程序架构中，较低级别的组件被设计为由较高级别的组件使用，从而能够构建越来越复杂的系统。在这种组合中，高级组件直接依赖于低级组件来完成某些任务。这种对低层组件的依赖限制了高层组件的重用机会。

用“*简单*”的术语来说，这意味着当您依赖对象的具体实例时 - 您正在构建对代码的依赖关系（尽管没有这种意图），这会限制重用它的能力。

请记住，**具体类型**是可以实例化的类类型，而**抽象类型**是不能实例化的类型；即一个界面。（见[分类分类](http://en.wikipedia.org/wiki/Class_%28computer_programming%29#Abstract_and_Concrete)）

如果您对特定的具体类进行编码，那么您将始终需要该类。但是，如果您对接口（*抽象*）进行编码，则可以调整您的代码以与任意数量的类一起使用；只要他们实现了那个通用接口。

因此，在 Java 中，这意味着您应该尽可能对接口进行编码 - 并避免使您的代码依赖于特定项目。这通常就像传递`Interface`类型作为参数和返回类型一样简单；与具体类相反。

更少的依赖 = 更多的代码重用能力。更多的依赖=更多的要求能够重用代码。

**当您学习设计模式时，这将是一个反复出现的主题！**

[维基百科上的依赖倒置原则](http://en.wikipedia.org/wiki/Dependency_inversion_principle)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-25T15:31:57.500

因为工厂是虚拟构造函数。它们使您能够在运行时返回不同的类型。工厂依赖于多态性。

如果你返回具体类型，你就不能做任何这样的事情。

```
public interface IFoo {
    void execute();
}

public class Bar implements IFoo {
    public void execute() { System.out.println("Bar does one thing"); }
}

public class Baz implements IFoo {
    public void execute() { System.out.println("Baz does another"); }
}

public class FooFactory { 
    private static final FooFactory instance = new FooFactory(); 

    private FooFactory() {}

    public static final FooFactory getInstance() { return instance; }

    public IFoo create(Class clazz) { 
        return clazz.newInstance();
    }
} 
```

很明显，如果您`Bar`从 create 方法返回 a ，则 a`Baz`是不可能的，反之亦然。界面是关键。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-25T15:35:02.403

依赖抽象可能会帮助您在类之间获得*松耦合*。这就是为什么它被建议。考虑一个示例`Animal`类。如果您可以通过其定义保留许多抽象，那么当您定义更具体的类（例如`Dog`和）时，您将具有更大的弹性`Bird`。如果你把一个具体的特性`Dog`放在里面`Animal`，那么你在尝试编写`Bird`扩展时就会发生冲突`Animal`。所以总是将事物抽象到类层次结构的上层。

# c - linux C字符串到int

> ID：13552421
> 
> 赞同：-1
> 
> 时间：2012-11-25T15:28:18.537
> 
> 标签：c, linux, strtol

我正在尝试将此字符串转换`"09195462965"`为 int，但遇到了问题。

我的代码片段：

```
int n, p, pnum=0;
char buffer[256];
char *endptr;
long pnumber;

bzero(buffer,256);
p = read(sock,buffer,255);

    pnumber = strtol(buffer, &endptr, pnum);

printf("n: %ld",pnumber);

p = write(sock,buffer,sizeof(buffer)); 
```

客户端发送一个字符串，`"09195462965"`然后服务器接收它。

现在在服务器上，该字符串必须转换为`int`ie `09195462965`。

注意：服务器将数字作为字符串发送。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-25T15:50:40.690

您使用`strtol()`不正确，最后一个参数应该是您想要的基础。例如，如果您想以 10 为底（十进制）存储该数字：

```
long pnumber;
pnumber = strtol("09195462965", NULL, 10); //nst char *nptr is "09195462965"
                                           //char **endptr  is null
                                           //int base       is 10 for decimal
printf("n: %ld",pnumber);

>> 9195462965 
```

确保您阅读了您正在使用的功能的[手册页。](http://linux.die.net/man/3/strtol)

传递`pnum`（设置为`0`）作为你对最后一个参数所做的事情会导致它吐回“0”，因为你传入的数字。

09195462965 有 0-9 的数字（所以我假设你想要 dec）如果你传入“0”到`strtol()`然后它会首先看到它`0`并且会处理这个数字有八进制，问题是八进制数字从 0- 7，因此对于八进制数来说，9 是“超出范围”的，因此会`strtol()`吐回 0。

像这样的数字： ，当它是 0 时`07175462765`你可以传入。`pnum`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-25T15:30:46.537

那太大了，装不下`int`。尝试`strtoumax`将其存储在`uintmax_t`.

```
uintmax_t pnumber = strtoumax(buffer, &endptr, 10);
if (pnumber == UINTMAX_MAX && errno == ERANGE)
    /* Too big. */ 
```

或者，如果你没有，`strtoumax`你可以试试`strtoull`et al。

# ios - 现有的 iOS 表单框架

> ID：13552422
> 
> 赞同：29
> 
> 时间：2012-11-25T15:28:22.620
> 
> 标签：ios, iphone, ipad, uitableview, xlform

您好，我在 iPhone 和 iPad 应用程序中一遍又一遍地构建表单：

*   带有输入的标签的自定义 UITableViewCells
*   标签、占位符文本和节标题的本地化
*   将单元格标记为红色或其他内容的验证，如果表单不完整，则不允许“提交”
*   单击单元格可激活可编辑文本框
*   下一个/上一个按钮
*   跨设备、方向、iOS 版本可靠

我无法想象我是唯一这样做的人。有没有*成熟*的框架或者什么可以放进去使用的？您能否评论一下您如何将此库与具有您自己的颜色等的 vanilla UITableViews 以外的设计一起使用？

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2013-01-19T23:21:26.180

看看 IBAForms - Itty Bitty Apps 的一个开源项目。我自己还没有使用过它，但是我相信它可以满足您的大部分需求，除了验证。这是 github 页面：[IBA 表格](https://github.com/ittybittydude/IBAForms)

它已经有一段时间没有维护了，但是如果您正在寻找一个表单库 - 它已经成熟并且有效。至少，这可能是您进一步发展的起点。

*   更新：还有 Chris Miles 的[EZForm](https://github.com/chrismiles/EZForm)库，非常好。

*   更新#2：也开始检查[QuickDialog](https://github.com/escoz/quickdialog)，这似乎很受欢迎。

*   **更新 #3：Nick Lockwood 创建了一个名为[FXForms](https://github.com/nicklockwood/FXForms)**

*   更新 #4：Martin Barreto 创建了一个名为[XLForm](https://github.com/xmartlabs/XLForm)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-25T17:51:27.567

我不知道这是否算作一个答案，但我为此经常使用[Sensible Cocoa - Sensible TableView (STV) 。](http://sensiblecocoa.com/)它本身不是一个“表单”框架（在 UITableView 之上），但它可以以非常灵活的方式用于此目的。它仍然需要一些编码来构建一个完整的表单，但是 UITableView/UITableViewController 样板代码被减少到最低限度。不幸的是，开发人员将 3.0 版的价格标签提高了相当高，所以我现在实际上正在寻找 STV 的替代品。（如果不是因为价格，我会坚持使用 STV！）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-12T06:22:22.577

我不知道有什么东西可以结合所有这些功能，但我最近在 github 上开源了我的验证库[PMValidation](https://github.com/poetmountain/PMValidation "PM验证")，我用它来开发 iPhone 应用程序[Imprints](https://itunes.apple.com/app/imprints/id577195548?mt=8)。PMValidation 带有许多适用于验证表单的基本类型，事实上，这正是我最初构建它的目的。

使用 PMValidationManager 类，您可以轻松地收听 UITextViews 或 UITextFields，并通过通知更新您想要的任何图形小部件。如果您有更多独特的需求，它非常模块化且易于扩展。它在麻省理工学院许可下。

# c# - WPF 中的 ComboBox 标题内容

> ID：13552423
> 
> 赞同：0
> 
> 时间：2012-11-25T15:28:23.537
> 
> 标签：c#, wpf, xaml

我有一个`ComboBox`定义在`XAML, WPF`.

我想在标题中设置一张图片。

根据定义 - 标题`ComboBox`包括所选项目。

如何更改它以显示图片并在按下时将其更改为不同的图片？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-25T17:21:05.563

您的意思是要在组合框图像而不是文本中制作项目吗？如果是，这就是答案：

```
<Grid>
    <ComboBox Margin="166,32,173,348">
        <ComboBoxItem IsSelected="True">
            <ComboBoxItem.Content>
                <Image Source="/WpfApplication1;component/Images/Unpassed.png" />
            </ComboBoxItem.Content>
        </ComboBoxItem>
        <ComboBoxItem>
            <ComboBoxItem.Content>
                <Image Source="/WpfApplication1;component/Images/passed.png" />
            </ComboBoxItem.Content>
        </ComboBoxItem>
    </ComboBox>
</Grid> 
```

![在此处输入图像描述](../Images/236d2f7ec7fd918d415578650ebf47da.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-25T15:31:29.417

您需要将组合框的模板修改为新的。

这是有关如何执行此操作的一个很好的[MSDN 链接。](http://msdn.microsoft.com/en-us/library/ms752094%28v=vs.85%29.aspx)

# c++ - C ++中的矩阵相邻元素组合

> ID：13552430
> 
> 赞同：0
> 
> 时间：2012-11-25T15:28:54.437
> 
> 标签：c++, recursion, matrix

我有这个矩阵：

```
A B C

D E F

G H I 
```

我想获得长度为**3的****相邻**单元格和**对角**单元格的所有可能组合，例如：

 **从A开始：

```
 - *ABC* right right
 - *ABE* right down
 - *ABF* right diagonal-right
 - *ABD* right diagonal-left
 - ecc ecc 
```

我试图创建一个名为“letera”的新类，将字母作为键，并使用一个成员来指示指向右、左、下、上 ecc 的指针。还有一个叫做“sequenza”的成员，一个连接它接触到的每个字母的字符串。

例如，如果 a 有作为键，“B”，我有 B->down == *E，B->left == *A，B->right == *C 等等......而且它有效。然后我为每个字母设置一个计数器：当它到达 3 时，它应该停止确定组合。

然后是问题的核心：每个字母要遵循的路径......我尝试创建一个递归函数，但它确实有效。

你能帮我看这个或建议我另一种方式吗？

非常感谢。

编码：

```
 void decisione(lettera *c) {

            if (c == nullptr) return ;

            c->count++;
            c->sequenza = c->sequenza + c->key;

            if (c->count == 2) 
                    cout << "\n" << c->sequenza; 
                 //the sequence of letters accumulated in every call
            decisione(c->Up);
            decisione(c->Down);

        } 
```

它给了我例如 AAA 和 BBB，然后它崩溃了 =(

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T15:52:11.053

从A开始，你能去哪里？B和D。假设你去B，现在，你能去哪里？A、C 和 E。你已经在 A 并且不想返回，所以你只有 C 和 E。假设你选择 C，因为你已经选择了三个字母，所以函数停止然后你选择 E等等（我没有选择对角线邻居），这是程序：

```
#include <cstdio>
#include <cstdlib>

int a[] = {-1,-1,-1,0,0,1,1,1}, b[] = {-1,0,1,-1,1,-1,0,1},cont;
char s[3],mat[3][3];
bool flag[9];

void display() {
  for(int i = 0; i < 3; ++i) printf("%c",s[i]);
  puts("");
}

void show(int x,int y) {//You are in mat[x][y]
  s[cont] = mat[x][y];
  if(cont == 2) {
    display();
    return;
  }
  flag[mat[x][y] - 'A'] = true;
  int xx,yy;
  for(int i = 0; i < 8; ++i) {
    xx = x + a[i], yy = y + b[i];
    if(0 <= xx and xx < 3 and 0 <= yy and yy < 3 and !flag[mat[xx][yy] - 'A']) {
      ++cont;
      show(xx,yy);
      --cont;
    }
  }
  flag[mat[x][y] - 'A'] = false;

}

int main() {
  cont = 0;
  for(int i = 0; i < 3; ++i) {
    for(int j = 0; j < 3; ++j) {
      mat[i][j] = ('A' + 3*i + j);
    }
  }
  for(int i = 0; i < 3; ++i) {
    for(int j = 0; j < 3; ++j) {
      show(i,j); //You start from mat[i][j]: {'A','B','C',...,'I'}
    }
  }
  return 0;
} 
```**

# javascript - 在 Chrome 开发工具控制台中记录 jQuery 对象时显示元素？

> ID：13552432
> 
> 赞同：16
> 
> 时间：2012-11-25T15:29:17.520
> 
> 标签：javascript, jquery, google-chrome, google-chrome-devtools

Chrome 开发工具最近似乎发生了一些变化。记录一个 jQuery 对象，`console.log`用于在控制台中显示 DOM 节点的元素。像这样的东西：

```
[<a href="#employees">Employees</a>] 
```

现在它已经变成了一个像这样的可点击对象：

```
[<a>, context: <a>] 
```

有没有办法回到旧式的对象日志记录，甚至是不同的方法来调用`console`？

我目前正在使用版本`23.0.1271.64`。不确定究竟是哪个版本带来了变化。

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-11-26T15:15:11.283

如果你想让 console.log() 吐出 DOM 元素，你需要记录 DOM 元素而不是 jQuery 对象。DOM 元素始终可以作为 jQuery 选择器的第 0 个元素访问。因此，您从 jQuery 选择器访问实际 DOM 元素的方式是这样的：

```
 $("#someSingleDOMObjectSelector")[0] 
```

为了让 DOM 元素以您希望的方式出现在日志中，您可以这样做：

```
 console.log($("#someSingleDOMObjectSelector")[0]); 
```

对于包含/返回多个 DOM 元素的 jQuery 选择器，您可以循环它们，如下所示：

```
 $('.someMultipleDOMObjectSelector').each(function(){
           //console.log($(this)[0]); //or -->
           console.log(this);
   }); 
```

至于为什么 Chrome 的开发工具会这样做，我只能猜测它是这样做的，因为将 jQuery 对象记录为对象更有意义。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-11-27T22:45:31.023

我发现这很有帮助：

```
console.log.apply(console, $("a")); 
```

此外，如果你`console.log = inspect;`从控制台内部运行，事情会以旧方式输出，但如果你只是从代码中执行它就行不通，它必须来自控制台。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-17T16:36:22.833

这在 11 月 12 日被 Chrome 开发人员打破，直到今天的 Canary 仍未修复。

使用[https://github.com/pimvdb/jquery.chromelog](https://github.com/pimvdb/jquery.chromelog)恢复以前的行为作为解决方法。

语法略有不同：

```
$('a').log() 
```

但它旨在反映 Chrome 的旧工作行为。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-26T15:27:16.493

这是否回答了您的问题`console.dir( element )`..？

**更新：**
不要这样做

```
console.dir( $("el") ); // Dont do this 
```

但是使用：

```
console.dir( document.getElementById("el") ); // Do this 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-27T14:53:03.127

这似乎不会在最近的将来得到解决。Chrome Canary 仍然有这个问题。我喜欢带有对象预览的新控制台行为，但我想要 jQuery 对象的例外。

您可以“修补”`console.log`一点，使其像以前一样显示 jQuery 对象。可以将 jQuery 对象“转换”为单独的参数列表。例如：

```
$('div'); 
```

在控制台中可以显示如下：

```
console.log('[', div[0], div[1], ..., ']'); 
```

我编写的脚本将`console.log`只修改 jQuery 对象的参数：

```
(function(){
    var arraySlice = Array.prototype.slice;
    var originalFunction = console.log;

    var replaceObject = function(sourceArray, objectIndex) {
        var currentObject = sourceArray[objectIndex];
        var spliceArguments = Array.prototype.slice.apply(currentObject);

        if(currentObject.length) {
            // add commas and brackets
            for(var i = spliceArguments.length - 1; i > 0; i--) {
                spliceArguments.splice(i, 0, ',');
            }
            spliceArguments.splice(0, 0, objectIndex, 1, '[');
            spliceArguments.splice(spliceArguments.length, 0, ']');

            // patch source array
            sourceArray.splice.apply(sourceArray, spliceArguments);
        } else {
            sourceArray.splice(objectIndex, 1, '[]');
        }
    };

    var fixFunction = function() {
    if(typeof jQuery === 'function' && jQuery.fn) {
        var newArgs = Array.prototype.slice.apply(arguments);
        for (var i = newArgs.length - 1; i >= 0; i--) {
            if(newArgs[i] instanceof jQuery) {
                replaceObject(newArgs, i);
            }
        }
        originalFunction.apply(console, newArgs);
    } else {
        originalFunction.apply(console, arguments);
    }
    };

    fixFunction.toString = function() {
        return originalFunction.toString();
    };

    console.log = fixFunction;
}()) 
```

现在您可以在您的页面中包含此脚本以覆盖控制台行为，但这不是解决此问题的好方法，因此我将其包装在[Chrome 扩展程序](https://chrome.google.com/webstore/detail/jquery-console-fix/jlmkkpkcgomkdpfhgjlpaaonhafnjgob)中，它将自动为所有页面执行此操作。

# objective-c - 无法发布服务请求

> ID：13552438
> 
> 赞同：0
> 
> 时间：2012-11-25T15:29:53.870
> 
> 标签：objective-c, ios, nsurlconnection, nsurl, nsurlrequest

出于某种原因，我总是得到`Endpoint not found.`，但是当我将它放在浏览器中时，它可以完美运行。我肯定做错了什么..

```
- (void)requestLoad:(NSString *)req_udid Age:(NSString *)req_age Gender:(NSString *)req_gender CheckBoxes:(NSString *)req_checkBoxes
{
    NSString *post = [NSString stringWithFormat:@"/UpdatePersonalInterests/%@/%@/%@/%@/0",req_udid, req_age, req_gender, req_checkBoxes];
    NSData *postData = [post dataUsingEncoding:NSUTF8StringEncoding allowLossyConversion:YES];

    //set up the request to the website
    NSMutableURLRequest *request = [[NSMutableURLRequest alloc] init];

    [request setURL:[NSURL URLWithString:NSLocalizedStringFromTable(@"kServiceURL", @"urls", nil)]];
    [request setHTTPMethod:@"POST"];
    [request setValue:@"application/x-www-form-urlencoded" forHTTPHeaderField:@"Content-Type"];
    [request setValue:[NSString stringWithFormat:@"%d", [postData length]] forHTTPHeaderField:@"Content-Length"];
    [request setHTTPBody:postData];

    NSError *error;
    NSURLResponse *response;

    NSData *urlData = [NSURLConnection sendSynchronousRequest:request returningResponse:&response error:&error];
    NSString *result = [[NSString alloc]initWithData:urlData encoding:NSUTF8StringEncoding];

    NSLog(@"%@",result);
} 
```

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-25T16:57:27.090

看起来您正在使用自定义服务方案。您是否在 Target -> info - URLS Types 中注册了它？请参阅 Apple 文档或注册自定义 URL 方案：[实施自定义 URL 方案](http://developer.apple.com/library/ios/#documentation/iphone/conceptual/iphoneosprogrammingguide/AdvancedAppTricks/AdvancedAppTricks.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-01T08:25:49.760

所以我设法用 NSURLConnection 和异步请求用这段代码做到了这一点：

```
- (void)getIntrests
{
    NSString *req_udid = [PROUtils createOrLoadUserIdentifier];
    NSString *webaddress = [kServiceBaseURL stringByAppendingString:[NSString stringWithFormat:@"/GetPersonalInterestsForUdid/%@",req_udid]];

    NSURLRequest *request = [[NSURLRequest alloc] initWithURL:[NSURL URLWithString:webaddress] cachePolicy:NSURLRequestReloadIgnoringCacheData timeoutInterval:20];

    [NSURLConnection sendAsynchronousRequest:request queue:[NSOperationQueue mainQueue] completionHandler:
     ^(NSURLResponse* response, NSData* data, NSError* error) {
         NSString* dataString = [[NSString alloc] initWithData:data encoding:NSUTF8StringEncoding];

         [[NSNotificationCenter defaultCenter] postNotificationName:kGotMediaFromServer object:dataString];

         NSLog(@"Update response completed: %@ with data: %@ error: %@",response,dataString,error);
     }];
} 
```

希望它对某人有用。

# delegates - 创建一个协议以将数据从 UINavigationController 检索到 UIViewController

> ID：13552440
> 
> 赞同：1
> 
> 时间：2012-11-25T15:30:09.937
> 
> 标签：delegates, protocols, viewcontroller, navigationcontroller

我有一个父 UIViewController，从中我呈现一个嵌入 UINavigationController 的 UITableViewController，我必须从中选择一些行（在我的情况下为带有人名的行），将它们添加到 mutableArray 中，我必须将其发送回 UIViewController。

我尝试了一个正常的协议：

```
@class TableViewController
@protocol TableViewDelegate <NSObject>
-(void)sendFrom:(TableViewController *)controller theList:(NSMutableArray *)list;
@end
... 
@proprety (nonatomic, strong) id<TableViewDelegate> delegate;
... 
```

然后在 TableViewController.m ... -(IBAction)dissmisController:(id)sender { [self.delegate sendFrom:self theList:_theListOfPersons]; [自我dismissViewControllerAnimated：是完成：无]；}

然后是 ViewController.h

```
 #import "TableViewController.h" 
```

然后我添加代表

```
 <TableViewDelegate> 
```

然后我实现协议的方法

```
-(void)sendFrom:(TableViewController *)controller theList:(NSMutableArray *)list
{
     NSLog(@"the list of persons is %@", list);
} 
```

运行应用程序之前的最后一件事是将委托设置为 segue [[segue destinationViewController] setDelegate:self];

问题是我的委托方法永远不会被调用。而且，如果我签入 TableViewController.m viewDidLoad，委托就像

```
NSLog(@"%@", self.delegate); 
```

答案是：（空）

谁能解释一下？

# windows - 环境变量的值不断消失

> ID：13552441
> 
> 赞同：0
> 
> 时间：2012-11-25T15:30:17.847
> 
> 标签：windows, visual-studio, environment-variables

最近我遇到了这个奇怪的问题。我添加了一个路径到 windows 环境变量的 lib 用户变量。

我通过右键单击我的计算机 -> 属性 -> 高级 -> 环境变量 -> 双击“lib”并`;`在最后添加所需的路径来做到这一点。

我正在添加以下内容：`D:\Program Files\Microsoft SDK\Lib;C:\Program Files\Microsoft Visual Studio\VC98\Lib`

一切正常（我很久以前做过），但突然间，最近每隔几分钟，在运行 Visual Studio 之后，我添加的路径消失了，我无法编译我的程序，直到我再次添加路径. （我正在运行哪个程序并不重要。）

为什么会这样？有解决办法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T14:58:26.783

> 为什么会这样？

看起来 Visual Studio 重置了“lib”变量？从一开始就使用“lib”变量是一个坏主意。

> 有解决办法吗？

不要为此使用“lib”环境变量。

如果您只需要在本地构建项目，只需在项目设置中的附加库路径下引用绝对路径即可。

如果您并不孤单和/或拥有构建服务器：

对于 Windows SDK，安装程序应该已经为您创建了 WindowsSdkDir 变量。

对于您引用的 Visual Studio 的史前版本，您可以定义自己的用户变量“VC98LIB”，设置为“C:\Program Files\Microsoft Visual Studio\VC98\Lib”。

然后，在项目设置的附加库路径下引用这些变量（即“$(WindowsSdkDir)”和“$(VC98LIB)”）。

# facebook-graph-api - 哪个覆盖面更广：app stream_publish 还是 page post？

> ID：13552448
> 
> 赞同：0
> 
> 时间：2012-11-25T15:31:46.427
> 
> 标签：facebook-graph-api, facebook-apps, facebook-page, facebook-stream-story

我注意到如果用户以前喜欢某个页面，则会为用户显示页面提要，并且该帖子符合 FB 解释的其他一些因素。

这些相同的因素是否也会影响应用程序 stream_publish？或者这是联系用户及其朋友的更有效方式？

# php - 从网站创建屏幕截图的用户友好方式

> ID：13552462
> 
> 赞同：0
> 
> 时间：2012-11-25T15:33:19.423
> 
> 标签：php, javascript, html, image, web

我的访问者希望能够将一些网站保存为图像文件，以便他们可以随时离线查看。他们使用不同的设备（平板电脑、手机、个人电脑......）和不同的浏览器访问我的网站，因此依赖第三方软件不是一个好的选择。（顺便说一句，图像文件格式几乎无关紧要）

我希望我的服务器为用户完成这项任务；最好使用 javascript、ajax、php 或者其他任何东西，如果它很容易的话。这些页面是动态创建的，但相对简单的 html、一些文本、一些 jpg 图像、没有 css - 没有什么花哨的（如动画 gif 或 flash）。动态创建不需要会话 cookie 或其他东西，只需要 url（并且可能获取）信息。

我不知道如何做到这一点 - 当我用谷歌搜索时，我只是为最终用户找到解决方案，而不是为我。我现在知道的唯一可能性是使用 php-png 功能。这样，我的访问者可以单击链接并被定向到他们可以下载的动态 png 文件。但是我必须手动“编写”png，php-png不能将html转换为png，可以吗？

我只尝试过一次 php-png，大约 5 年前；我记得有点费力。有没有更简单和扩展功能的库？

一切都归结为一个问题：从 html 网站制作图像的最简单方法是什么？对用户来说应该尽可能简单，然后对我来说。

;) 额外积分：以防我找到可以动态创建图像的东西。如何让任何浏览器自动在下载目录中永久下载图片，而不是仅显示临时保存的预览？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-25T19:26:48.153

PDF 将是一个更好的解决方案，因为它们是可扩展的并且可以包含超链接。该过程将是使用无头浏览器呈现页面并输出呈现的 PDF。一个快速的谷歌揭示了一些有趣的可能性：

1.  dompdf：[http ://code.google.com/p/dompdf/](http://code.google.com/p/dompdf/)
2.  基于 WebKit/KHTML 的渲染器：[https ://github.com/mreiferson/php-wkhtmltox](https://github.com/mreiferson/php-wkhtmltox)
3.  Google Chrome Webkit 支持： http: [//phantomjs.org/](http://phantomjs.org/) + [https://github.com/diggin/php-PhantomjsRunner](https://github.com/diggin/php-PhantomjsRunner)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-25T15:44:24.440

如果您希望人们下载为图像的页面是您自己的，并且您控制为它们提供服务的服务器，则可以使用[php-imagemagick](http://php.net/manual/en/book.imagick.php)构建服务器端的“屏幕截图”图像（因此用户可以选择 HTML版本和单图像版本；或单击 HTML 版本中的按钮以下载图像版本）。首先定义一个画布，然后在其上渲染文本块和图像，最后将其保存为 PNG 或 JPG 图像。

Imagemagick 在字体方式上没有提供太多的灵活性。您可能希望改为使用[imagegetttftext](http://php.net/manual/en/function.imagettftext.php)渲染文本块，然后将它们添加到 imagemagick 图像中。

由于以这种方式构建图像在服务器端可能会很昂贵，因此您需要缓存结果。

# php - 从 MySQL 填充的 PHP 多维数组

> ID：13552468
> 
> 赞同：-1
> 
> 时间：2012-11-25T15:33:56.887
> 
> 标签：php, html, mysql, multidimensional-array, html-table

我正在创建一个假期报告工具来帮助我跟踪我的远程工作人员，同时也以此为借口，因为我正在学习编码作为一种爱好。

我需要在表格中创建每个人的假期摘要（顶部的个人日期，侧面的名称）但我卡住了，需要一些帮助。

我有两个表，一个包含用户详细信息，另一个存储使用用户 ID 捆绑在一起的假期记录。我只记录该期间的开始和结束日期，并且正在努力理解如何将所需的信息放入多维数组中以从中构建 HTML 表。

我确定它使用了一个 for each 循环，但我无法理解它，有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-25T15:48:06.543

MySQL：

如果您的日期是时间戳或日期时间，您可以使用类似：

```
SELECT SUBSTRING(birthdays.your_date_field, 6, 5) AS bday, GROUP_CONCAT(users.nickname)
FROM birthdays
JOIN users USING (user_id)
GROUP BY SUBSTRING(birthdays.your_date_field, 6, 5)
ORDER BY bday ASC 
```

`,`您将获得每个不同日期的一行，并且所有用户的生日都用逗号 ( )分隔。

关于此请求的一些说明：

*   `SUBSTRING(birthdays.your_date_field, 6, 5)`：如果你`your_date_field`是日期时间或时间戳，它将包含一个带`YYYY-MM-DD hh:mm:ss`格式的日期，所以我们需要剪切这个字符串来获取`MM-DD`格式。

*   `GROUP_CONCAT(users.nickname)`表示如果多行进入同一组，列将使用逗号 ( `,`) 连接，而不是仅使用进入组的第一行。

*   `GROUP BY`将使用一列对您的结果进行分组，以便将同一天生日的所有用户分组在一起。如果您想在单个请求中对列的不同值进行计算（例如 COUNT、SUM、...），这也很有用。

例子 ：

```
CREATE TABLE users (
  id int,
  nickname varchar(32)
);

insert into users ( id , nickname )
values ( 1, 'mike' ), ( 2, 'jack' ), ( 3, 'santa' ), (4, 'mario');

CREATE TABLE birthdays (
  id int,
  birthday datetime
);

insert into birthdays ( id , birthday )
values ( 1, '1982-01-01' ), ( 2, '1983-03-11' ), ( 3, '1984-01-01' ), ( 4, '2011-06-04' ); 
```

结果 ：

```
mysql> SELECT SUBSTRING(birthdays.birthday, 6, 5) AS bday, GROUP_CONCAT(users.nickname)
    -> FROM birthdays
    -> JOIN users USING (id)
    -> GROUP BY SUBSTRING(birthdays.birthday, 6, 5)
    -> ORDER BY bday ASC;
+-------+------------------------------+
| bday  | GROUP_CONCAT(users.nickname) |
+-------+------------------------------+
| 01-01 | mike,santa                   |
| 03-11 | jack                         |
| 06-04 | mario                        |
+-------+------------------------------+
3 rows in set (0.00 sec) 
```

演示：[点击这里](http://sqlfiddle.com/#!2/6a637/1)

* * *

PHP：

获得这些结果的 PHP 实现可能是：

```
$dbh = new PDO("mysql:host=localhost;dbname=your_base", 'username', 'password');

$request = <<< EOT
  SELECT SUBSTRING(birthdays.birthday, 6, 5) AS bday, GROUP_CONCAT(users.nickname) AS nickname
  FROM birthdays
  JOIN users USING (id)
  GROUP BY SUBSTRING(birthdays.birthday, 6, 5)
  ORDER BY bday ASC;
EOT;

$rows = $dbh->query($request)->fetchAll(PDO::FETCH_ASSOC);

var_dump($rows); 
```

会给你 ：

```
array(3) {
  [0]=>
  array(2) {
    ["bday"]=>
    string(5) "01-01"
    ["nickname"]=>
    string(10) "mike,santa"
  }
  [1]=>
  array(2) {
    ["bday"]=>
    string(5) "03-11"
    ["nickname"]=>
    string(4) "jack"
  }
  [2]=>
  array(2) {
    ["bday"]=>
    string(5) "06-04"
    ["nickname"]=>
    string(5) "mario"
  }
} 
```

现在，如果你想要数组数组而不是逗号分隔的值，你可以分解[它们](http://php.net/manual/en/function.explode.php)（如果昵称当然不包含逗号）。

就像是 ：

```
$days = array();
foreach ($rows as $row)
{
  $days[$row['bday']] = explode(",", $row['nickname']);
}
var_dump($days); 
```

给你 ：

```
array(3) {
  ["01-01"]=>
  array(2) {
    [0]=>
    string(4) "mike"
    [1]=>
    string(5) "santa"
  }
  ["03-11"]=>
  array(1) {
    [0]=>
    string(4) "jack"
  }
  ["06-04"]=>
  array(1) {
    [0]=>
    string(5) "mario"
  }
} 
```

我认为你得到了一切，祝你实施顺利。

# android - 如何在android中存储和检索sqlite表中的数据？

> ID：13552474
> 
> 赞同：-3
> 
> 时间：2012-11-25T15:34:47.487
> 
> 标签：android, sqlite

我想在表格中插入日期、月份、年份和事件，并在从日期选择器中选择日期时检索特定日期的事件！

我一直在寻找它，但没有令人信服的想法！

请如果有人可以帮助我...

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T15:54:28.587

通过执行查询来创建 SQLite 数据库表，以根据您的约束创建一个新表。

```
db.execSQL("CREATE TABLE "+employeeTable+" 
    ("+colID+" INTEGER PRIMARY KEY AUTOINCREMENT, "+
        colName+" TEXT, "+colAge+" Integer, "+colDept+" 
    INTEGER NOT NULL ,FOREIGN KEY ("+colDept+") REFERENCES 
    "+deptTable+" ("+colDeptID+"));"); 
```

使用[ContentValues](http://developer.android.com/reference/android/content/ContentValues.html)在表中更新/插入数据。

```
SQLiteDatabase db=this.getWritableDatabase();
ContentValues cv=new ContentValues();
   cv.put(colDeptID, 1);
   cv.put(colDeptName, "Sales");
   db.insert(deptTable, colDeptID, cv);

   cv.put(colDeptID, 2);
   cv.put(colDeptName, "IT");
   db.insert(deptTable, colDeptID, cv);
   db.close(); 
```

和[光标](http://developer.android.com/reference/android/database/Cursor.html)从表中检索数据。

```
Cursor getAllDepts()
  {
   SQLiteDatabase db=this.getReadableDatabase();
   Cursor cur=db.rawQuery("SELECT "+colDeptID+" as _id, 
    "+colDeptName+" from "+deptTable,new String [] {});

   return cur;
  } 
```

**来源：** [本教程](http://www.codeproject.com/Articles/119293/Using-SQLite-Database-with-Android)更详细地解释了所有内容。

**免责声明：**这个答案只是为了帮助您了解如何使用 SQLite（正如您所说，您还没有遇到任何令人信服的想法）。您需要编写自己的代码来处理根据 DatePicker 中选择的日期检索事件的逻辑，但我认为这应该不是什么大问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-25T15:50:42.700

这是一个很好的 sqlite 教程，如果您阅读并按照说明进行操作，它将起作用。不要忘记以格式 ("yyyy-MM-dd kk:mm") 插入日期，否则如果您需要，sqlite 将无法按降序或升序对日期进行排序。

祝你好运

[http://www.androidhive.info/2011/11/android-sqlite-database-tutorial/](http://www.androidhive.info/2011/11/android-sqlite-database-tutorial/)

# md5 - 可以对截断的 MD5 哈希进行暴力破解吗？

> ID：13552478
> 
> 赞同：2
> 
> 时间：2012-11-25T15:35:34.943
> 
> 标签：md5, brute-force

如果我生成一个字符串的 MD5 哈希，然后将其截断为 25 个字符，是否有可能对其进行暴力破解？像加盐一样安全吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T19:54:27.780

我不是加密专家，但我想截断会有点类似于加盐。当你加盐时，你用随机数据填充你的输入数据，然后生成一个哈希值。所以本质上，

```
hash = md5(pass + salt) 
```

这种随机盐显然会影响返回的哈希值，因此如果您将“密码”作为密码，使用盐，您的哈希值将与从密码派生的哈希值完全不同，“密码”没有添加盐。话虽如此，攻击需要猜测加盐是如何实施的，然后暴力破解盐/密码组合。所以攻击者必须知道盐在字符串中的位置，所以它是......

```
hash = md5(salt + pass) or hash = md5(pass + salt) ? 
```

如果他们能以某种方式猜到，那么他们将需要暴力破解密码 + 盐值。

```
hash = md5(password + 1)
hash = md5(password + 2)
hash = md5(password + 3)
....
hash = md5(password + ;fioja4ofu4fioaejfio)
....
hash = md5(password2 + 1)
.... 
```

计算量非常大！

所以如果你截断你的哈希，仍然有一些猜测工作要做，尽管可能没有那么多工作。考虑一下你得到的 md5 哈希值，你只改变了几个字符，你的哈希看起来就完全改变了。

例如，

```
cat = d077f244def8a70e5ea758bd8352fcd8
cat1 = a980d10665f268b0ec6c13ebea43034f 
```

可以肯定地说，大多数输入都将具有唯一的哈希值。如果你的截断是静态的，比如说，从 32 个字符截断到 25 个字符。攻击者需要知道截断发生在哪里以及如何发生。是从末端切还是从前面切？从哈希中随机挑选？但是，鉴于哈希值通常会非常不同，您可以实现一些概率。

例如，以 cat 哈希为例。我从末尾截断了 7 个字符...

```
cat = d077f244def8a70e5ea758bd8352fcd8
cat = d077f244def8a70e5ea758bd8 
```

鉴于这些散列通常完全不同，截断不会有很大帮助。我可以编写一个简短的脚本，将您截断的哈希值与随机输入数据的完整哈希值进行比较，以查看是否存在 ax% 匹配或其他内容。如果我对 cat 进行哈希处理，并且您的截断哈希与我的 cat 哈希的 32 个字符中的 25 个匹配，我会非常肯定地说，您的截断哈希是针对单词 cat 的，我会用我的其余部分填充截断的部分猫哈希。

我在这里所说的一切只是我在脑海中吐痰。无论如何，我都不是加密/安全专家。我只是涉足随机安全的东西。接受或离开它:) 希望它能带来一些清晰。

Soooo，我宁愿实施自己的盐渍解决方案，也不愿截断。如果您希望截断以节省几个字节的空间，请实施盐而不是截断！

# javascript - 在 iOS 上的 html 中嵌入背景音频

> ID：13552480
> 
> 赞同：-1
> 
> 时间：2012-11-25T15:36:05.503
> 
> 标签：javascript, html, ios

我尝试了几个代码，但没有一个起作用。传统的播放音频标签也不起作用。我想简单地在 html 页面上嵌入背景音频，我不想看到播放器图形。我想我需要Javascript。我需要一个以“将这段代码添加到 html 文件的标题部分”开头的代码帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-25T23:38:01.960

答案是你不能这样做，没有用户操作。

您使用 JavaScript 查看的普通脚本不会在 ios 设备上自动播放。您需要有一个用户操作，例如开始播放音频的单击开始按钮。

# c++ - Visual Studio C++ 2010 如何将 ICON 添加到控制台应用程序

> ID：13552481
> 
> 赞同：5
> 
> 时间：2012-11-25T15:36:10.200
> 
> 标签：c++, visual-studio-2010, visual-c++, icons

我在 Visual Studio C++ 2010 中创建了一个控制台应用程序，但我无法添加图标。我基本上到处搜索，但所有提示和提示似乎都不起作用，因为我什至找不到我读过的提示中建议的所有菜单（可能适用于旧版本的 VC++ 2010）。

有没有人对如何简单地将自定义图标添加到我自己的控制台应用程序有一个很好的提示？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-25T16:02:08.920

只需创建一个资源文件 (.rc)，然后添加一个图标资源。如果其中只有一个图标，它将自动用作应用程序的符号描述。

# css - CSS通知设计问题

> ID：13552482
> 
> 赞同：0
> 
> 时间：2012-11-25T15:36:23.193
> 
> 标签：css, html, notifications

请看看这个：http: [//jsfiddle.net/z9vGK/](http://jsfiddle.net/z9vGK/)

通知必须出现在主页图标的前面。问题是，现在它显示为单独的 div 并修改了整个导航 div 的高度。如何在不更改导航 div 高度的情况下将此通知位置设置为主页图标的右上角？我错过了什么？

![在此处输入图像描述](../Images/539a27549d44ca08338ab5c45bdd9e39.png)

这是HTML：

```
<div id="nav">
        <ul class="navUl">
            <li><a data-original-title="Home Page" rel="tooltip" data-placement="bottom" href="?page=main" class="curPage"> <img src="http://goo.gl/1d2SO"></a></li>
            <li><a data-original-title="Categories" rel="tooltip" data-placement="bottom" href="?page=categories">
                    <img src="http://goo.gl/1d2SO"></a></li>
            <li>
                <div class="iOSnotifications">1</div>                <a data-original-title="History" rel="tooltip" data-placement="bottom" href="?page=history">
                    <img src="http://goo.gl/1d2SO">
                </a>
            </li>
            <li><a data-original-title="Settings" rel="tooltip" data-placement="bottom" href="?page=settings">
                    <img src="css/images/nav/settings.png"></a>
            </li>
            <li><a data-original-title="FAQ" rel="tooltip" data-placement="bottom" href="?page=faq">
                <img src="css/images/nav/help.png"></a>
            </li>
        </ul>

        <div id="langSelect"><ul>    <li><a href="?action=setlang&amp;lang=az&amp;page=main"><img src="https://ecruting.az/css/images/flags/az.png"></a></li>
        <li><a href="?action=setlang&amp;lang=en&amp;page=main"><img src="https://ecruting.az/css/images/flags/en.png" class="curLang"></a></li>
        <li><a href="?action=setlang&amp;lang=ru&amp;page=main"><img src="https://ecruting.az/css/images/flags/ru.png"></a></li>
    </ul></div>

    </div>​ 
```

和 CSS：

```
@charset "UTF-8";
#nav {
    font-family: "Helvetica Neue" , Helvetica , "Lucida Sans Unicode", "Lucida Grande", sans-serif;
    font-size:12px;
    text-transform:uppercase;
    padding:0px;
    margin:0px;
    width:740px;
    clear:both;
    border:1px solid #bdbdbd;
    float:left;
    background:url(http://goo.gl/CeWJN) repeat-x bottom #fff;

    border-radius:5px;
    -moz-border-radius:5px;
    -webkit-border-radius:5px;

    box-shadow:0 0px 5px 0px rgba(0,0,0, 0.23);
    -webkit-box-shadow:0 0px 5px 0px rgba(0,0,0, 0.23);

    -moz-box-shadow:0 0px 5px 0px rgba(0,0,0, 0.23);

    text-shadow: #fff  0px 1px 0px ;
}
#nav ul.navUl
{
    padding:0px;
    margin:0px;
    list-style:none;
    float:left;
}

#nav ul.navUl li 
{
    padding:0px;
    margin:0px;
    list-style:none;
    float:left;
    font-weight:bold;
    line-height:45px;

}
#nav ul.navUl a img
{
    height: 35px;
}

#nav ul.navUl a
{
    color:#205dd5;
    text-decoration:none;
    padding-left:30px;
    padding-right:30px;
    display:block;
    background:url(images/divider.jpg) right bottom no-repeat;
}
#nav ul.navUl a:hover
{
    background:url(images/NavHoverbg.jpg) no-repeat right top;
    color:#5585e4;
}
#nav ul.navUl li:first-child  a
{
    border-radius:5px;
    -moz-border-radius:5px;
    -webkit-border-radius:5px;

}
a.curPage
{
    background:url(images/NavHoverbg.jpg) no-repeat right top !important;
}

/*Notification*/

.notif_container {
    display:inline-block;
    margin-right:15px;
    list-style-type:none;
}

.iOSnotifications {
    display: block;
    width: 18px;
    height: 16px;
    border-radius:15px;
    background: -webkit-gradient(linear, left top, left bottom, from(#f89ba5), to(#cc0006));
    background: -moz-linear-gradient(top,#f89ba5,#cc0006);
    border:2px solid #fff;
    box-shadow: 0 2px 3px rgba(100, 100, 100, 0.5);
    text-shadow:none;
    color:#fff;
    text-align:center;
    line-height: 16px;
    font-size:11px;
    font-weight:bold;
    position: relative;
    top: 0px;
    left: 50px;
}​ 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-25T15:42:45.263

您必须将 .iOSnotifications 设置为

```
{
position: absolute;
top: 0;
right: 0;
} 
```

这将使它位于右上角，并且边界 div（它应该位于右上角的 div）到：

```
{
position: relative;
} 
```

所以 css*知道*它是一个边界框。我在这里改变了你的小提琴：http: [//jsfiddle.net/dasZj/](http://jsfiddle.net/dasZj/)

# javascript - json 字符串和 django 模板的问题

> ID：13552485
> 
> 赞同：2
> 
> 时间：2012-11-25T15:36:48.410
> 
> 标签：javascript, django, json

我正在尝试查询数据列表，将其转换为 json 对象，然后将其传递给我的 javascript，以便可以在那里对其进行评估：

```
var data = '{{ passed_list|jsonify }}';

# This evaluates to:

var news = '[{&quot;pk&quot;: 133, &quot;model&quot;: &quot;Article.article
    &quot;,&quot;fields&quot;: 
```

但是，这不起作用，因为我正在尝试访问元素。

例如，

```
var object = data[0].pk;
In my view source, this does not evaluate to 133 as expected but it evaluates
to ... data[0].pk ... which is a bit confusing. 
```

这是我的jsonify：

```
 if isinstance(object, QuerySet):
    return serialize('json', object)
return simplejson.dumps(object, ensure_ascii=False) 
```

任何帮助将不胜感激，谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T15:39:40.547

django 默认会转义 html 字符

**如果您完全信任数据**（即它来自您的代码，并且内容的任何部分都不能来自用户），您可以使用

```
var data = '{{ passed_list|jsonify|safe }}'; 
```

告诉 django 不要逃避它

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-05T02:09:11.833

```
var data = '{{ portfolio|jsonify|escapejs|safe }}'; 
```

*在jsonify*之后放置的过滤器*escapejs*使用特殊字符解决了问题，例如：*'*

# css - Jquery Mobile - 如何更改列表视图的高度

> ID：13552489
> 
> 赞同：0
> 
> 时间：2012-11-25T15:37:06.060
> 
> 标签：css, jquery-mobile

要更改 listView 的高度，我使用了这个：

```
.ui-li .ui-btn-inner a.ui-link-inherit, .ui-li-static.ui-li {
             padding-top:10px;
             padding-bottom:10px;
} 
```

这使得每个listView的高度都改变了。好的，一切都很好。但是它也改变了选择字段的弹出选项列表值的高度。![身高变小了](../Images/ed84ab64a30881d6a7b14afdeb0f5055.png)

我可以添加内部 CSS 来修复它，但这需要处理很多页面。现在我想知道有没有办法为列表视图和选择菜单编写更好的非覆盖 CSS？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T03:50:15.383

为了在不覆盖它的情况下更改列表视图的高度：

*   您应该找到导致它的类的来源。
*   使用 jquery 删除类
*   用你自己的类替换它

**替换类**

```
$("p").removeClass(".ui-li .ui-btn-inner a.ui-link-inherit, .ui-li-static.ui-li ").addClass(".whatever .your .class .is"); 
```

你必须详细而具体。

# c++ - opengl中的有界框碰撞检测

> ID：13552490
> 
> 赞同：3
> 
> 时间：2012-11-25T15:37:19.673
> 
> 标签：c++, opengl, collision-detection

这是程序的覆盖图。我在 Visual Studio 10 中工作，使用 opengl/glut 的 c++。我正在尝试创建一个迷宫（我从输入文件生成）。然后我使用 obj loader(glm) 从 3dstudio max 导入两个模型。其中一个模型（mo）将在迷宫中移动。所以我在他周围和迷宫的墙壁周围添加了一个边界框。我还在 mo 周围画了一个盒子，它似乎随着角色移动/旋转。但是由于某种原因（也许我没有在正确的地方做）碰撞测试从来没有检测到任何东西。我会让代码来说话，如果您有任何问题，我很乐意解决它们。现在准备代码。

```
//bounding boxes
struct BoundingBox
{
    Vector3D max;
    Vector3D min;
};
BoundingBox *box_mo;
BoundingBox *static_box[400];

void initbox(BoundingBox *b){
    b->min.x=100000;
    b->min.y=100000;
    b->min.z=100000;
    b->max.x=-100000;
    b->max.y=-100000;
    b->max.z=-100000;
}

BoundingBox *CreateCollisionBox(GLMmodel *model,GLMgroup *object){
/* GLM doesn't store each vertex together with the object that owns it. It doesn't have that notion. In GLM object don't have vertex, they have triangles. And each triangle is actually an index in the triangle list of the object.*/
    BoundingBox *boxx=(BoundingBox*)malloc(sizeof(BoundingBox));
    initbox(boxx);
    for(int i=0;i<object->numtriangles;i++){
// for each vertex of the triangle pmodel1->triangles[object->triangles[i]]
// calculate min and max
        for(int j=0;j<3;j++){
            GLuint index=model->triangles[object->triangles[i]].vindices[j];
            GLfloat x = model->vertices[index*3 +0];
            GLfloat y = model->vertices[index*3 +1];
            GLfloat z = model->vertices[index*3 +2];
            if(boxx->min.x>x) boxx->min.x =x;
            if(boxx->min.y>y) boxx->min.y =y;
            if(boxx->min.z>z) boxx->min.z =z;

            if(boxx->max.x<x) boxx->max.x =x;
            if(boxx->max.y<y) boxx->max.y =y;
            if(boxx->max.z<z) boxx->max.z =z;
        }
    }
    return boxx;
}

void AddCollisionBox(GLMmodel *model,GLMgroup *object){
    //box[boxindex]=CreateCollisionBox(model,object);
    box_mo=CreateCollisionBox(model,object);
    //boxindex++;
}
// A GLMmodel has a chained list of groups, each group representing an object. 
// Each object has a name (the name you gave it in 3D Studio Max or Gmax).
// Let's you have 10 walls in your scene a few other objects as well and you want to 
// create collision boxes just for the walls and you do not want to make a collision box 
// for one of your objects. You could name all your walls
// like this: Wall1, Wall2, ..., Wall10\. If you wanted to add collision boxes just to them 
// you could go through all objects in the scene and if their name contains "Wall" add them.
// with this one: strstr
// Basicly this function does just that: if you want to add boxes for the walls you would call it like this: DefineCollisionBoxes(model,"Wall"); 
void DefineCollisionBoxes(GLMmodel *model,char *name){
    GLMgroup *group = model->groups;
    while(group){
        if(strstr(group->name,name))
            AddCollisionBox(model,group);
        group=group->next;
    }
}

bool Collision(BoundingBox *b,GLfloat x,GLfloat y,GLfloat z){
    return x <= b->max.x && x>= b->min.x && y<= b->max.y && y>= b->min.y && z<= b->max.z && z >= b->min.z;
}

bool CollisionTest(BoundingBox *a,BoundingBox *b){
    /*bool collision=false;
    for(int i=0;i<static_boxes;i++){
        for(float x=static_box[i]->min.x, y=static_box[i]->min.y,z=static_box[i]->min.z ;x<=static_box[i]->max.x && y<=static_box[i]->max.y && z<=static_box[i]->max.z;x+=0.1,y+=0.1,z+=0.1){
            if(Collision(a,x,y,z) == true)
                collision=true;
        }
    }
    return collision;*/
    if(a->min.x <= b->max.x && a->max.x >= b->min.x && a->min.z <= b->max.z && a->max.z >= b->min.z && a->min.y <= b->max.y && a->max.y >= b->min.y)
        return true;
    return false;
}

void drawBox(BoundingBox *b){
    glColor3f(1,1,1);
    glBegin(GL_LINE_LOOP);
    glVertex3f(b->max.x,b->max.y,b->min.z);
    glVertex3f(b->min.x,b->max.y,b->min.z);
    glVertex3f(b->min.x,b->min.y,b->min.z);
    glVertex3f(b->max.x,b->min.y,b->min.z);
    glEnd();

    glBegin(GL_LINE_LOOP);
    glVertex3f(b->max.x,b->min.y,b->max.z);
    glVertex3f(b->max.x,b->max.y,b->max.z);
    glVertex3f(b->min.x,b->max.y,b->max.z);
    glVertex3f(b->min.x,b->min.y,b->max.z);
    glEnd();

    glBegin(GL_LINE_LOOP);
    glVertex3f(b->max.x,b->max.y,b->min.z);
    glVertex3f(b->max.x,b->max.y,b->max.z);
    glVertex3f(b->min.x,b->max.y,b->max.z);
    glVertex3f(b->min.x,b->max.y,b->min.z);
    glEnd();

    glBegin(GL_LINE_LOOP);
    glVertex3f(b->max.x,b->min.y,b->max.z);
    glVertex3f(b->min.x,b->min.y,b->max.z);
    glVertex3f(b->min.x,b->min.y,b->min.z);
    glVertex3f(b->max.x,b->min.y,b->min.z);
    glEnd();
}

//display function
void display(){
    glClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT);
    //setup view
    glMatrixMode(GL_MODELVIEW);
    glLoadIdentity();
    camera.render
    //read from file, create walls and characters 
    //place model mo in front of the third person camera always
    Vector3D positionn;
    positionn = camera.position + camera.forward*5;

    glPushMatrix();
    glColor3f(0.88f,0.75f,0.49f);
    //here i move my character and calculate bounding box at each frame for him
    glTranslatef(positionn.x,-0.42f,positionn.z);
    glScalef(0.7f,0.7f,0.7f);
    glRotatef(angle,0,1,0);
    drawMo();
    DefineCollisionBoxes(pmodel1,"body"); // actual function call
    drawBox(box_mo); //draw bounding box
    glPopMatrix();

    //test if the character collides with any of the walls - not working
    for(int i=0;i<static_boxes;i++){
        if(CollisionTest(box_mo,static_box[i]) == true){
            printf("collision");
        }
    }

    //swap buffers
    glutSwapBuffers();
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-27T22:05:40.703

我将尝试概述如何解决碰撞问题。为简单起见，我将做出以下假设：

1.  我们有一个迷宫所在的坐标系。
2.  相机和模型都转换到这个坐标系中。
3.  为了使墙壁到达该坐标系，对墙壁执行的唯一转换是纯平移，无需任何旋转或缩放。
4.  字符将被平移、旋转和缩放。
5.  您不想检查是否会发生碰撞，而是要检查是否发生了碰撞。
6.  您拥有或将编写或获取向量和矩阵库

如果我们使用这些假设，我们可以使用 3d 中的矩形来表示每面墙。而且由于我们假设迷宫既不旋转也不缩放，我们可以只做一次，然后将其存储在数组或 B-tree 或其他任何东西中。（请注意，选择正确的数据结构来存储您的世界进行计算可以大大提高性能）

角色在迷宫中移动，我们假设它可以旋转和缩放。确定角色是否与任何物体发生碰撞的最简单方法是计算对象的边界球。一旦你有了碰撞检测，你可以只存储两点。球体的中心点和球体上的任意点。

一旦角色被带到迷宫中的正确位置，您就可以对提到的两个点应用完全相同的变换。您可以使用矩阵库执行此操作，也可以在转换字符后查询 MODELVIEW 矩阵。您可以像这样调用“glGetFloatv”来做到这一点：

```
GLfloat model[16]; 
glGetFloatv(GL_MODELVIEW_MATRIX, model); 
```

一旦你变换了这两个点，你就可以找到它们之间的距离——这将是一个物体必须远离变换后的中心点以避免碰撞的距离。

现在要做的最后一件事是检查相关平面并使用转换后的中心点和计算的距离检查点到平面的距离。然后，您需要确保投影到平面的中心落在矩形内。

这是程序的概要（这里没有真正的代码，只有注释和函数抽象）

```
void drawCharacter(Matrix4f const & charMatrix);
void drawMaze(Matrix4f const & mazeMatrix);
//Will return MAX_FLT to indicate out of rectangle condition
float distanceToRectangle(Vector3f const & point, Rectangle3df const & plane);
vector<Rectangle3df> wallPlanes;
Vector3f centerOfCharSphere;
Vector3f pointOnCharSphere;
//Initialization
/*
1\. Go Over maze create planes for all walls
2\. Calculate character sphere and extract two points: The center of the sphere and a point on the sphere
*/

//Render
/*
Calculate the charMatrix - The matrix that takes the character from object CRS to maze CRS
Calculate the translation matrix for the maze (mazeMatrix) - the matrix that translates the maze into place
*/

Vector3f transformedSphereCenter = charMatrix.transform(centerOfCharSphere);
Vector3f transformedPointOnSphere = charMatrix.transform(pointOnCharSphere);
Vector3f R = transformedPointOnSphere - transformedSphereCenter;
float safeDistance = R.length();
for(vector<Plane3f>::const_iterator it = wallPlanes.begin(); it != wallPlanes.end(); it++)
{
    if(distanceToRectangle(transformedSphereCenter, *it) <= safeDistance)
       printf("collided\n");
}

/*
Setup projection matrix
Setup the modelview matrix for the camera
*/
drawMaze(mazeMatrix);
drawCharacter(charMatrix); 
```

我希望这能让你走上正轨

# zend-form - 如何在 Zend 表单显示组下的 Legend 之后放置 Description

> ID：13552491
> 
> 赞同：2
> 
> 时间：2012-11-25T15:37:26.877
> 
> 标签：zend-form

我在将描述放在图例之后和 zend 表单显示组中的元素之前遇到问题。

这是我用过的

```
$form->addDisplayGroup(array($username, $password), 
                        'userLogin', 
                        array(
                        'description' => 'user login description',
                        'legend' => 'user login legend',                                
                        ));

$form->getDisplayGroup('userLogin')
        ->addDecorators(array('Description' , 'FieldSet')); 
```

上面的代码片段在元素（用户名和密码）之后而不是图例之后附加了描述。

知道如何使用 Zend_form 装饰器将描述放在图例之后:-？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T10:09:54.790

我有一个类似的代码，但我在元素之前打印了描述。我在中间包含了一个装饰器（*FormElements*），所以也许这就是原因。

```
$form->addDisplayGroup(array($username, $pass), 'userLogin', array(
    'legend' => 'User Login',
    'description' => "Lorem ipsum... "
))->setDisplayGroupDecorators(array('Description', 'FormElements', 'Fieldset')); 
```

# c++ - 如何获取 DLL 的版本？

> ID：13552498
> 
> 赞同：2
> 
> 时间：2012-11-25T15:38:02.280
> 
> 标签：c++, winapi, dll, resources, versioning

我正在从 system32 (shell32.dll) 打开一个 DLL，我想接收它的版本。我该怎么做？我开始写它，但只是不知道如何继续：

我还看到有这样的功能： GetFileVersionSize ，有没有办法使用它们？

这是代码，如果有人可以帮助我继续它并提供线索，我真的很喜欢它

谢谢！

```
#define PATH    "C:\\Users\\rachel\\Desktop\\shell32.dll"

PVERSION dll_getVersion(PCHAR pDllPath)
{
 PVERSION       version             =   NULL;
 HINSTANCE      dllLoad             =   NULL;
 HRSRC          resourceHandle      =   NULL;
 HGLOBAL            loadResourceHandle  =   NULL;
 LPVOID         lockResourceHande   =   NULL;
 DWORD          sizeOfResource      =   0;

 //LPCTSTR  lptstrFilename = NULL;
 //DWORD    dfHandle = 0;
 //DWORD dwLen = 0;
 //LPVOID   lpData = NULL;
 //BOOL test = FALSE;

 //DWORD fileVersionSize = 0;
 //unsigned long u = 0;
 //fileVersionSize = GetFileVersionInfoSize(PATH , &u);

 //test = GetFileVersionInfo(PATH, dfHandle , dwLen ,lpData);

if (NULL == pDllPath)
{
    printf("error #1 : dllPath is invalid \n");
    return version;
}

version = (PVERSION)calloc(1,sizeof(VERSION));
if (NULL == version)
{
    printf("the allocation failed \n");
    return version;
}

//opening the dll using the path */
dllLoad = LoadLibrary(pDllPath);
if (NULL == dllLoad)
{
    printf("failed to load the dll ! \n");
    printf("the last error is : %d\n" , GetLastError());
    free(version);
    version = NULL;
    return version;
}

resourceHandle          =    FindResource(dllLoad ,MAKEINTRESOURCE(16) , RT_VERSION);
if (NULL == resourceHandle)
{
    printf("problem with find resource!!!! \n");
    return NULL;
}
loadResourceHandle      =    LoadResource(dllLoad , resourceHandle);

if (NULL == loadResourceHandle)
{
    printf("problem with load resource function! \n");
    return NULL;
}

lockResourceHande = LockResource(loadResourceHandle);
if (NULL == lockResourceHande)
{
    printf("error in lock resource function \n");
    return NULL;
}

sizeOfResource = SizeofResource(dllLoad, resourceHandle); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-25T15:45:44.127

[这里](http://msdn.microsoft.com/en-us/library/windows/desktop/ms647464%28v=vs.85%29.aspx)，给你一个例子，希望对你有帮助。调用 GetFileInfoSize，分配一个该大小的缓冲区，然后将您分配的缓冲区传递给 GetFileInfo，然后在 VerQueryValue 中使用您传递给 GetFileInfo 的初始化缓冲区。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-25T18:38:53.500

实际上有两种方法可以获取 DLL 的版本。许多系统 DLL 导出一个[`DllGetVersion()`](http://msdn.microsoft.com/en-us/library/windows/desktop/bb776404.aspx)函数。对于不这样做的 DLL，您必须回退到[`GetFileVersionInfo()`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms647003.aspx)相关函数。以下文章向您展示了使用两者的示例：

[确定 DLL 或可执行文件的版本号](http://msdn.microsoft.com/en-us/library/windows/desktop/ms647003.aspx)

# asp.net-mvc - 图片未发布到控制器

> ID：13552507
> 
> 赞同：0
> 
> 时间：2012-11-25T15:39:20.253
> 
> 标签：asp.net-mvc, file-upload, image-uploading, image-upload

> **可能重复：**
> [MVC。HttpPostedFileBase 始终为空](https://stackoverflow.com/questions/8159725/mvc-httppostedfilebase-is-always-null)

我希望用户能够上传图像并将其存储在服务器上以供以后参考。

这是一些代码：

**SliderController.cs：**

```
public ActionResult Create()
{
  return View(new SliderImageViewModel());
}

[HttpPost]
public ActionResult Create(SliderImageViewModel sliderImage)
{
  if (ModelState.IsValid)
  {
    var slider = new SliderImage();
    var lastSortOrder =
      Context.SliderImages.Select(p => p.SortOrder).DefaultIfEmpty(0).Max();
    slider.SortOrder = lastSortOrder + 1;

    //TODO: upload image to server and get physical path (GUID)
    //slider.ImageUrl = physical path

    Context.SliderImages.Add(slider);
    Context.SaveChanges();
    return RedirectToIndex();
  }
  else
    return View(sliderImage);
}

public class SliderImageViewModel
{
  [RequiredValue]
  public HttpPostedFileBase Image { get; set; }
  private string _Content;
  public string Content
  {
    get
    {
      if (string.IsNullOrWhiteSpace(_Content))
        return null;
      else
        return _Content;
    }
    set { _Content = value; }
  }
} 
```

**创建.cshtml：**

```
@using (Html.BeginForm("Create", "Slider", FormMethod.Post))
{
  @Html.ValidationSummary(true)

  <fieldset>
    <legend>Page</legend>

    <div class="editor-label">
      @Html.Label("Content")
    </div>
    <div class="editor-field">
      @Html.TextBox("content")
    </div>

    <div class="editor-label">
      @Html.Label("Image")
    </div>
    <div class="editor-field">
      @Html.TextBox("image", null, new { type = "file", accept = "image/*" })
    </div>

    <p>
      <input type="submit" value="Save" />
    </p>

  </fieldset>
} 
```

当我提交表单时，参数中的`Image`属性`sliderImage`为空（`Content`有效），我应该如何解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-25T15:40:32.680

如果您希望能够上传文件，则需要在表单上设置`enctype`属性：`multipart/form-data`

```
@using (Html.BeginForm("Create", "Slider", FormMethod.Post, new { enctype = "multipart/form-data" }))
{
    ...
} 
```

查看[`following article`](http://haacked.com/archive/2010/07/16/uploading-files-with-aspnetmvc.aspx)更多详细信息。

# facebook - 创建 Facebook 自动发布

> ID：13552516
> 
> 赞同：-2
> 
> 时间：2012-11-25T15:39:49.373
> 
> 标签：facebook, post

我想创建一个使用 Facebook Auto post 的网站。

当用户点击视频或文章时，他将被重定向到 Facebook 应用登录页面。然后当他与 Facebook 连接时，该网站将在用户的墙上发布。

我按照以下说明操作：[https ://developers.facebook.com/docs/howtos/login/server-side-login/](https://developers.facebook.com/docs/howtos/login/server-side-login/)

我的代码如下所示：

```
$app_id = "xxxxx";
$app_secret = "xxxx";
$my_url = "http://xxxx.com/";

session_start();

$code = $_REQUEST["code"];

if(empty($code)) {
    $_SESSION['state'] = md5(uniqid(rand(), TRUE)); // CSRF protection
    $dialog_url = "https://www.facebook.com/dialog/oauth?client_id=" 
        . $app_id . "&redirect_uri=" . urlencode($my_url) . "&state="
        . $_SESSION['state'] . "&scope=publish_actions";

   echo("<script> top.location.href='" . $dialog_url . "'</script>");
} 
```

如何嵌入自动邮政编码？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T06:01:26.870

这应该可以正常工作：

```
$attachment = array(
   'message' => "Your post message goes here",
   'access_token' => $accessToken // the obtained access token with publish_stream permission
);

$result = $facebook->api('/me/feed/', 'post', $attachment);

var_dump($result); // echo the post_id 
```

# c# - 使用实体框架创建对象时未出现 tt 文件

> ID：13552517
> 
> 赞同：1
> 
> 时间：2012-11-25T15:40:11.797
> 
> 标签：c#, asp.net, entity-framework, visual-studio-2012

我是 Entity Framework 的新手，我可以添加`.edmx`文件，然后它会自动生成对象，但我没有看到`.tt`教程中显示的文件出现在任何地方，这就是它的外观

![在此处输入图像描述](../Images/563039514e41f39d93cefaede0185d34.png)

我不确定我做错了什么，但我在代码中的任何地方都看不到`DbSet`，或类似的东西。

将不胜感激任何帮助。

```
NOTE : This is database first 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T01:21:58.077

代码生成策略在 RC 之后发生了变化。VS 2012 Beta 和 RC 版本使用了以前版本的 Visual Studio 中使用的代码生成策略。他们没有公开 T4 模板并生成基于 ObjectContext 的上下文和基于 EntityObject 的实体。Post VS 2012 RC 代码生成已更改为生成基于 DbContext 的上下文和 POCO 实体 - 全部使用 T4 模板。这些教程使用的是 VS2012 RTM 版本，因此您会看到 T4 模板和 POCO 实体。您需要使用 VS2012 RTM（首选）或 EF5 代码生成器，您可以从 VS 库 - [http://visualstudiogallery.msdn.microsoft.com/da740968-02f9-42a9-9ee4-1a9a06d896a2](http://visualstudiogallery.msdn.microsoft.com/da740968-02f9-42a9-9ee4-1a9a06d896a2)获得。VS 库页面包含一些博客文章的链接，这些文章展示了如何替换项目使用的代码生成策略。

# python - python，从影子获取加密的用户密码

> ID：13552520
> 
> 赞同：4
> 
> 时间：2012-11-25T15:40:28.223
> 
> 标签：python, crypt, pwd

我正在尝试获取加密的系统用户密码，以便将其与另一个 sha512 加密的密码进行比较。我试过 pwd，但似乎这个模块不处理用户密码，或者使用的系统对它来说“太现代了”（debian 挤压）。这是我得到的：

```
import pwd
username = 'root' #or another user
pwd_struct = pwd.getpwnam(username)
print pwd_struct

>>>pwd.struct_passwd(pw_name='root', pw_passwd='x', pw_uid=0, pw_gid=0, pw_gecos='root', pw_dir='/root', pw_shell='/bin/bash') 
```

其中 pw_passwd='x' 而不是 sha512 字符串。

打算将此与 python crypt 模块一起使用（[例如此处](http://docs.python.org/2/library/crypt.html)），我得到了异常“对不起，目前不支持影子密码”，这是正常的，因为我的 pw_passwd = 'x'。

是否有另一种获取散列密码的正确方法，或者我应该为 /etc/shadow 使用自己的解析器？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-25T16:08:45.740

试试[spwd 模块](http://docs.python.org/2/library/spwd.html)

平台：Unix

2.5 版中的新功能。

该模块提供对 Unix 影子密码数据库的访问。它适用于各种 Unix 版本。

您必须有足够的权限才能访问影子密码数据库（这通常意味着您必须是 root）。

影子密码数据库条目报告为类似元组的对象，其属性对应于 spwd 结构的成员（属性字段见下文）：

```
>>> import spwd
>>> spwd.getspnam('root')
spwd.struct_spwd(sp_nam='root', sp_pwd='!', sp_lstchg=15238, sp_min=0, sp_max=99999, sp_warn=7, sp_inact=-1, sp_expire=-1, sp_flag=-1) 
```

请记住，您需要具有读取权限`/etc/shadow`才能使其正常工作

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-25T16:13:05.567

在 google 上搜索术语“python”和“shadow”会返回 spwd 库作为第一个结果。

由于引入影子密码是为了防止普通用户对密码文件进行暴力攻击，因此您只能使用 root 等特权用户帐户访问影子密码。

# ios - 如何使用 Objective-C (iOS) 在 UIImageView 上放置字符串

> ID：13552522
> 
> 赞同：-1
> 
> 时间：2012-11-25T15:40:31.920
> 
> 标签：ios, fonts, uiimageview, uiimage, font-size

我正在为 iOS 计划一个简单的绘图应用程序。因为我希望能够使用不同的字体、大小、样式（粗体、斜体等）和不同的颜色放置用户定义的字符串。但我不知道应该怎么做。请帮我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T15:43:38.717

> 因为我希望能够使用不同的字体、大小、样式（粗体、斜体等）和不同的颜色放置用户定义的字符串。

最简单的方法是将一些 UILabel 放在图像视图的顶部。然后，您可以根据需要设置每个标签的文本、大小、字体、颜色等。

另一种方法是创建自己的 UIView 子类来绘制图像和您想要的任何文本。

> 我正在为 iOS 计划一个简单的绘图应用程序......但我不知道应该怎么做。

首先要真正了解视图系统的工作原理、如何创建自己的视图类以及如何在视图中绘制。Apple 提供了大量关于这些主题的文档；[View Programming Guide](http://developer.apple.com/library/ios/#documentation/windowsviews/conceptual/viewpg_iphoneos/Introduction/Introduction.html)是一个很好的起点。

# c++ - SIGABRT 在异常类的析构函数中

> ID：13552529
> 
> 赞同：1
> 
> 时间：2012-11-25T15:41:31.217
> 
> 标签：c++, exception, destructor, sigabrt, throw

我与这个问题斗争了 2 天。我有一个解决方法，但我想了解更多会发生什么。那么让我们开始吧。我有一个非常原始的异常类，它将错误消息作为指向字符数组的指针（我知道 std::string 的利润）。我知道“三法则”，所以它看起来像：

*全局异常.hpp*

```
class FatalError {
    public:
        const char* errorMessage;
        /* WARNING:
         * "Rule of three". You see it below.
         */
        FatalError(const char* pErrorMessage);
        FatalError(const FatalError& rhs);
        FatalError& operator=(const FatalError& rhs);
        ~FatalError();
}; 
```

*全局异常.cpp*

```
FatalError::FatalError(const char *pErrorMessage):
    errorMessage(pErrorMessage)
{}

FatalError::FatalError(const FatalError& rhs){
    char* buf = new char[strlen(rhs.errorMessage)+1];
    strcpy(buf, rhs.errorMessage);
    errorMessage = buf;
}

FatalError& FatalError::operator =(const FatalError& rhs){
    if (this == &rhs)
        return *this;
    delete[] errorMessage;
    char* buf = new char[strlen(rhs.errorMessage)+1];
    strcpy(buf,rhs.errorMessage);
    errorMessage = buf;
    return *this;
}

FatalError::~FatalError(){
    delete[] errorMessage;
} 
```

但投掷时：

```
int Config::readConfig(int argc_p, char *argv_p[])
{
    if ( argc_p != 2 )
    {
        throw FatalError ("Sick usage. Try: <file.ini>\n");
    } 
```

我得到“SIGABRT”。

一些valgrind分析：

```
Invalid free() / delete / delete[] / realloc()
  in FatalError::~FatalError() in globalexceptions.cpp:26
Address 0x413980 is not stack'd, malloc'd or (recently) free'd  1: operator delete[](void*) in /tmp/buildd/valgrind-3.7.0/coregrind/m_replacemalloc/vg_replace_malloc.c:490
  2: FatalError::~FatalError() in <a href="file:///home/gumba/Projects/cpp/backup_helper/backup_helper-build-desktop-Qt_4_8_2_in_PATH__System__Debug/../backup_helper/globalexceptions.cpp:26" >globalexceptions.cpp:26</a>
  3: /usr/lib/x86_64-linux-gnu/libstdc++.so.6.0.17
  4: main in <a href="file:///home/gumba/Projects/cpp/backup_helper/backup_helper-build-desktop-Qt_4_8_2_in_PATH__System__Debug/../backup_helper/main.cpp:35" >main.cpp:35</a> 
```

我做了一些研究，发现了以下信息和建议：

*   （**OK：Catch by reference**）“从技术上讲，即使你通过引用捕获异常，编译器仍然使用按值传递。这是因为catch永远不会将控制权返回给调用者，因此负责清理-向上”
*   （**OK：有复制构造函数**）“抛出的对象必须有一个可公开访问的复制构造函数。编译器可以生成复制抛出的对象任意次数的代码，包括零次。但是，即使编译器从未实际复制抛出的对象，它必须确保异常类的复制构造函数存在并且可以访问”

根据 GDB，不调用复制构造函数。SIGABRT 发生在*delete[] errorMessage*上。我不明白为什么。errorMessage 似乎已正确初始化。

SIGABRT 的原因是什么？

**谢谢！**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-25T15:47:42.220

问题在这里：

```
FatalError::FatalError(const char *pErrorMessage):
    errorMessage(pErrorMessage)
{} 
```

您不应该只存储它`const char*`，您应该在您的成员中分配足够的大小`errorMessage`，并将其复制到那里。否则，在析构函数中，您将获得`delete`字符串文字的地址，这将导致未定义的行为。

无论如何，你不应该在这里使用指针。只需使用`std::string`，它会为您处理内存：

```
class FatalError {
public:
    FatalError(const char *msg) : errorMessage(msg) {}
    // Add an overload for std::strings
    FatalError(const std::string &msg) : errorMessage(msg) {}

    std::string errorMessage;
}; 
```

无需实现复制赋值运算符、复制构造函数或析构函数。

更好的解决方案是使用`std::runtime_error`，它与您实现的完全相同，并且在标准库中提供：

```
#include <stdexcept>

int Config::readConfig(int argc_p, char *argv_p[])
{
    if ( argc_p != 2 )
    {
        throw std::runtime_error("Sick usage. Try: <file.ini>\n");
    }
    // ....
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-05-29T15:34:35.577

当 C++ 程序抛出异常，并且它正在由异常处理程序处理时，该处理程序（一个`catch`块）**不能**抛出**另一个**异常，因为这将需要同时处理**两个**异常，这也是一个桥梁甚至对于 C++ 来说也是如此。但是，如果处理程序确实引发了异常，则对违规的惩罚是`std::terminate`，这可能会转换为您所看到的 SIGABRT。

使用诸如您定义的用于抛出异常的复杂类是有风险的，因为禁止双重异常，而且是不必要的：正如 mfontanini 指出的那样，您可以只使用`std::runtime_error`.

# ajax - JSF 语言切换器和 ajax 更新

> ID：13552531
> 
> 赞同：3
> 
> 时间：2012-11-25T15:41:49.193
> 
> 标签：ajax, jsf, primefaces, facelets

[这个问题是JSF 2](https://stackoverflow.com/questions/10204001/language-switcher-implementation-in-jsf)中较旧的语言切换器实现的后续问题。

问题的实质仍然有效，尽管 PrimeFaces 发布了一些更新的版本，而且我的 JSF 知识比以前好一点。

总而言之，我有一个完全 ajaxified 的 xhtml 页面。

语言切换器是这样的：

```
<h:form id="selectLanguage" >
    <p:commandLink action="#{languageSwitcher.setLanguage('it')}" rendered="#{languageSwitcher.language!='it'}" >
        <h:graphicImage library ="images" name="it.gif" title="it" />
    </p:commandLink>
    <p:commandLink action="#{languageSwitcher.setLanguage('en')}" rendered="#{languageSwitcher.language!='en'}" >
        <h:graphicImage library ="images" name="en.gif" title="en" />
    </p:commandLink>
</h:form> 
```

我希望当**`it`**被选中时，只**`en`**显示标志，反之亦然。我希望网页中的所有内容都使用资源包翻译进行更新。

特别是，我有一些`p:dialog`S 的标头属性也需要更新。对话框表单位于每个对话框内：

```
<p:dialog header="#{msgs.myHeader}"  ... >
    <h:form .... />
</p:dialog > 
```

页面的其余部分是`<p:layout>`包含一些 layoutUnits 的。每个都`layoutUnit`包含一个带有其他组件的表单，这些组件也需要翻译。

LanguageSwitcher 是一个`SessionScoped` `JSF Managed Bean`.

我已经尝试了以下所有方法：

1.  `<f:ajax render="@all" />``p:commandLink`大括号里面
2.  `update="@all"`里面的属性`p:commandLink`
3.  `<p:ajax update="@all" />``p:commandLink`大括号里面

不幸的是，它们都不起作用。

我已经尝试过`@all`，虽然我可以插入表单的 id，但它们并不多。问题是对话框标题没有以这种方式更新。

我正在使用 PrimeFaces 3.4.1 - Mojarra 2.1.13

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T20:33:03.483

`update="@all"`到目前为止，所有 PrimeFaces 版本（3.4.2）都在 IE 中失败。与 ajax 响应一起交付的任何 JavaScript 代码都未正确初始化。

这在[此 PrimeFaces 论坛主题](http://forum.primefaces.org/viewtopic.php?f=3&t=18937&start=20)中进行了讨论，并报告为[问题 4731](http://code.google.com/p/primefaces/issues/detail?id=4731)。

在他们修复它之前，最好的办法是通过在每个（可能）包含`update="@all"`命令的视图上加载以下 JavaScript 片段来解决它：

```
var originalPrimeFacesAjaxResponseFunction = PrimeFaces.ajax.AjaxResponse;
PrimeFaces.ajax.AjaxResponse = function(responseXML) {
   var newViewRoot = $(responseXML.documentElement).find("update[id='javax.faces.ViewRoot']").text();

    if (newViewRoot) {
       $('head').html(newViewRoot.substring(newViewRoot.indexOf("<head>") + 6, newViewRoot.indexOf("</head>")));
       $('body').html(newViewRoot.substring(newViewRoot.indexOf("<body>") + 6, newViewRoot.indexOf("</body>")));
    } else {
        originalPrimeFacesAjaxResponseFunction.apply(this, arguments);
    }
}; 
```

以 JS 文件的形式提供此文件，该文件由`<h:outputScript target="head">`内部加载，`<h:body>`以强制执行正确的加载顺序。

```
<h:body>
    <h:outputScript name="script.js" target="head" />
    ...
</h:body> 
```

# android - java.lang.SecurityException：无法找到调用者 android.app.Application 的应用程序

> ID：13552534
> 
> 赞同：4
> 
> 时间：2012-11-25T15:41:59.967
> 
> 标签：android

我有一个错误，只是猜测它是什么意思。我有一个应用程序可以运行很长时间并且可能会被整个进程杀死所以我的猜测是执行的代码的一部分尝试向不存在的部分发送一些消息（坦率地说它存在但在另一个进程中，因为它被重新创建）

你能告诉我这个错误是什么意思吗？

**更新**

```
E/AndroidRuntime(28461): FATAL EXCEPTION: main
E/AndroidRuntime(28461): java.lang.SecurityException: Unable to find app for caller android.app.ApplicationThreadProxy@42b3bcc0 (pid=28461) when publishing content providers
E/AndroidRuntime(28461): at android.os.Parcel.readException(Parcel.java:1327)
E/AndroidRuntime(28461): at android.os.Parcel.readException(Parcel.java:1281)
E/AndroidRuntime(28461): at android.app.ActivityManagerProxy.publishContentProviders(ActivityManagerNative.java:2325)
E/AndroidRuntime(28461): at android.app.ActivityThread.installContentProviders(ActivityThread.java:4021)
E/AndroidRuntime(28461): at android.app.ActivityThread.handleBindApplication(ActivityThread.java:3963)
E/AndroidRuntime(28461): at android.app.ActivityThread.access$1300(ActivityThread.java:128)
E/AndroidRuntime(28461): at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1199)
E/AndroidRuntime(28461): at android.os.Handler.dispatchMessage(Handler.java:99)
E/AndroidRuntime(28461): at android.os.Looper.loop(Looper.java:137)
E/AndroidRuntime(28461): at android.app.ActivityThread.main(ActivityThread.java:4517)
E/AndroidRuntime(28461): at java.lang.reflect.Method.invokeNative(Native Method)
E/AndroidRuntime(28461): at java.lang.reflect.Method.invoke(Method.java:511)
E/AndroidRuntime(28461): at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:993)
E/AndroidRuntime(28461): at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:760)
E/AndroidRuntime(28461): at dalvik.system.NativeStart.main(Native Method) 
```

# python - 在 python3 中的数组对象旁边添加一些东西

> ID：13552535
> 
> 赞同：1
> 
> 时间：2012-11-25T15:42:00.520
> 
> 标签：python, arrays, python-3.x

我有一个像这样的字符串：

```
A="2+3+4" 
```

我想拆分它，所以我需要在 + 旁边添加空白

```
A="2 + 3 + 4"
A=A.split()
A=["2","+","3","+","4"] 
```

如何添加空格？谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-25T15:47:47.093

您可以将“+”替换为“+”并将其拆分为一个列表：

```
A="2+3+4"
A=A.replace('+', " + ")
A=A.split() 
```

或者更简单：

```
A="2+3+4"
A=list(A) 
```

但是请注意，第二种方法将每个字符彼此分开。

所以这样做 for`A="123+456"`会导致`['1','2','3','+','4','5','6']`而不是`['123','+','456']`，所以第一个可能更适合你。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-25T16:07:16.577

```
>>> print (A.replace('+',' + ').split()),
['2', '+', '3', '+', '4'] 
```

为什么：拆分方法：Python 3.2.2

```
>>> A="2+3+4"
>>> print (A.split()),     Org result = ['2+3+4'] 
```

你想要的结果是`['2','+','3','+','4']`

你会得到 Org 结果，因为默认`split`字符是空格，参考： [http ://www.tutorialspoint.com/python/string_split.htm](http://www.tutorialspoint.com/python/string_split.htm)

如果您将“+”指定为拆分字符怎么办？

```
>>> print (A.split('+')),   ['2', '3', '4']   almost but not quite !

>>> print (A.replace('+',' + ')),    2 + 3 + 4 
```

所以如果我们把它们结合起来......

```
>>> print (A.replace('+',' + ').split())
['2', '+', '3', '+', '4'] 
```

这就是我想你想要的结果。

# c - 在内核模块中获取当前时间（以秒为单位）

> ID：13552536
> 
> 赞同：15
> 
> 时间：2012-11-25T15:42:02.950
> 
> 标签：c, time, linux-kernel, kernel-module

在内核模块中以秒为单位（自纪元以来）获取当前时间的标准方法是什么？

我见过涉及获取 xtime 的技术，这些技术非常冗长并且涉及 while 循环和锁。一定会有更好的办法。

[这不是重复的。我已经查看了之前关于 SO 的问题。其中许多的答案要么没有指定使用的函数，要么错误地引用了内核中不允许的 time.h]

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-11-25T15:46:38.603

你可以使用`getnstimeofday`它。

```
/* getnstimeofday - Returns the time of day in a timespec */
void getnstimeofday(struct timespec *ts) 
```

哪里`struct timespec`是：

```
struct timespec {
    time_t  tv_sec;     /* seconds */
    long    tv_nsec;    /* nanoseconds */
}; 
```

是的，你需要`#include <linux/time.h>`.

# asp.net - 将 JSON 从一个 asp.net Web 应用程序发送到另一个

> ID：13552537
> 
> 赞同：3
> 
> 时间：2012-11-25T15:42:08.030
> 
> 标签：asp.net, asp.net-mvc, jquery, asp.net-development-serv

我的解决方案包含两个 asp.net MVC 项目。一个是 Web 服务，另一个是普通网站，从前面提到的 Web 服务获取数据。

我的网络服务主控制器中有以下方法：

```
...
public JSONResult GetTeacher(){
   return JSON(new {TeacherName = this.teacher.name });
} 
```

我正在尝试使用此 $.ajax 方法从其他 Web 应用程序（将成为网站）访问此方法：

```
$.ajax({
    type: 'GET',
    url: 'localhost:11370/Home/GetTeacher',
    contentType: 'application/json; charset=utf-8',
    success: function (response) {
        alert(JSON.stringify(response));
        $('#results').html('Welcome, ' + response.Name);
    },
    error: function (error) {
        alert(JSON.stringify(error));
    }
}); 
```

当我开始调试我的解决方案时，它会打开两个 Web 开发服务器，它们都在不同的端口上。结果，当 $.ajax 调用发生时，我会收到一个包含以下信息的弹出窗口：

```
the page at localhost:11510 says:
"readystate":0, "responsetext": "" , "status":0, "statustext":"error" 
```

当我尝试直接在 google chrome 控制台中运行脚本时，我收到以下消息：

```
XMLHttpRequest cannot load http://localhost:11370/Home/GetTeacher. 
Origin http://localhost:11510 is not allowed by Access-Control-Allow-Origin. 
```

任何有关如何使用 $.ajax 实际访问该方法的帮助将不胜感激。

编辑：我还尝试制作一个简单的 html 文件，看看如果我调用网络服务会发生什么。结果相同。此外，当我只输入该方法的 url 时，它可以正常工作并显示老师的姓名。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-25T15:44:52.193

由于[`same origin policy restriction`](http://en.wikipedia.org/wiki/Same_origin_policy)内置浏览器，您无法发送跨域 AJAX 请求。一种可能的解决方法是使用[`CORS`](http://en.wikipedia.org/wiki/Cross-origin_resource_sharing)，但由于并非所有浏览器都支持它，如果您想要一个跨浏览器解决方案，您可以考虑使用[`JSONP`](http://en.wikipedia.org/wiki/JSONP).

你可以看看[`this custom JsonpResult`](https://stackoverflow.com/a/7547814/29407)我写的来说明如何使用来自不同域的控制器操作。需要注意的是，jQuery 的 JSONP 实现仅适用于 GET 请求。您不能 POST 到跨域的控制器操作。如果您需要这样做，实现此目的的唯一可靠方法是在主域上编写一个服务器端脚本，该脚本将充当两个域之间的桥梁。然后，您会将 AJAX 请求发送到这个新脚本，该脚本会将请求委托给远程域并返回结果。

# python - 谷歌应用引擎任务队列

> ID：13552538
> 
> 赞同：1
> 
> 时间：2012-11-25T15:42:19.940
> 
> 标签：python, google-app-engine

在谷歌应用引擎中使用任务队列时遇到一些问题。我尝试在此站点中执行相同的操作： [https ://developers.google.com/appengine/docs/python/taskqueue/overview-push](https://developers.google.com/appengine/docs/python/taskqueue/overview-push)

但似乎我的任务从未执行，我收到此错误：

警告 2012-11-25 15:29:21,258 taskqueue_stub.py:1978] 任务 task1 未能执行。此任务将在 12.800 秒后重试

除了这些之外，代码基本相同：

```
class CounterWorker(webapp.RequestHandler):
  def init(self): # should run at most 1/s
    def txn():
      logging.info("bla")
    db.run_in_transaction(txn) 
```

我只是添加这样的任务：

```
taskqueue.add(url='/worker') 
```

我真正想要的只是运行一段不会超时的代码。所以我读到我可以使用任务队列。但我似乎无法让它发挥作用。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-25T16:09:58.547

默认情况下，任务队列将 POST 请求发送到映射到 URL 的任何处理程序（在您的情况下是 /worker，它应该映射到 CounterWorker）。因此，您需要在 CounterWorker 方法中定义一个 post 方法。

```
class CounterWorker(webapp.RequestHandler):
  def post(self):
    def txn():
      logging.info("bla")
    db.run_in_transaction(txn) 
```

您的评论表明任务应该只运行 1/s。您可以在[queue.yaml 配置文件](https://developers.google.com/appengine/docs/python/config/queue#Defining_Push_Queues_and_Processing_Rates)中定义它。

此外，任务队列有 10 分钟的超时时间，因此它们不会永远运行。要纠正这个问题，请尝试链接它们或使用[延迟 API](https://developers.google.com/appengine/articles/deferred)。对于长时间运行的进程，[后端 API](https://developers.google.com/appengine/docs/python/backends/overview)可能更合适。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-25T16:11:21.950

如果您只想执行“香草”任务，请查看延迟函数。

[延迟库的后台工作](https://developers.google.com/appengine/articles/deferred)

```
from google.appengine.ext import deferred

  def do_something_expensive(a, b, c=None):
      logging.info("Doing something expensive!")
      # Do your work here

  # Somewhere else
  deferred.defer(do_something_expensive, "Hello, world!", 42, c=True) 
```

您不需要 url/webapp 处理程序，因为您可以直接传递函数。

# codeblocks - CodeBlocks 中是否有任何类型的“智能感知”？

> ID：13552539
> 
> 赞同：1
> 
> 时间：2012-11-25T15:42:31.960
> 
> 标签：codeblocks, code-completion, allegro5

我想知道 CodeBlocks 中是否有任何 Intellisense 行为。我问这个的原因是因为我正在使用 allegro 5 进行编码并且无法让代码完成插件与 allegro 5 库一起使用...谢谢

# haskell - 在 Haskell 中将函数从 LET 迁移到 WHERE

> ID：13552544
> 
> 赞同：3
> 
> 时间：2012-11-25T15:43:19.587
> 
> 标签：haskell

为了提高我的 Haskell 技能，我决定查看一些示例代码并尝试以不同的方式重写。

这是初始函数：

```
quicksort :: (Ord a) => [a] -> [a]  
quicksort [] = []  
quicksort (x:xs) =   
    let smallerSorted = quicksort [a | a <- xs, a <= x]  
        biggerSorted = quicksort [a | a <- xs, a > x]  
    in  smallerSorted ++ [x] ++ biggerSorted 
```

这是迁移的功能：

```
quicksort :: (Ord a) => [a] -> [a]  
quicksort [] = []  
quicksort (x:xs) = smallerSorted ++ [x] ++ biggerSorted 
    where smallerSorted = quicksort [a | a <- xs, a <= x]  
        biggerSorted = quicksort [a | a <- xs, a > x] 
```

但是在我看来它不起作用。有什么不对？使用 LET 的函数可以移植到 WHERE 吗？

这是我的错误输出：

```
/Users/graph/Documents/Uni/Haskell/hey.hs:43:5:
    parse error on input `biggerSorted'
Failed, modules loaded: none. 
```

非常感谢！

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-11-25T15:49:06.837

您需要匹配`where`子句中表达式的缩进，例如

```
quicksort :: (Ord a) => [a] -> [a]  
quicksort [] = []  
quicksort (x:xs) = smallerSorted ++ [x] ++ biggerSorted 
    where smallerSorted = quicksort [a | a <- xs, a <= x]  
          biggerSorted = quicksort [a | a <- xs, a > x] 
```

或者

```
quicksort :: (Ord a) => [a] -> [a]  
quicksort [] = []  
quicksort (x:xs) = smallerSorted ++ [x] ++ biggerSorted 
    where
        smallerSorted = quicksort [a | a <- xs, a <= x]  
        biggerSorted = quicksort [a | a <- xs, a > x] 
```

# algorithm - 最大堆和插入

> ID：13552545
> 
> 赞同：3
> 
> 时间：2012-11-25T15:43:28.790
> 
> 标签：algorithm, data-structures, heap, binary-tree, max-heap

我有一个大小为 10 的整数数组。我需要绘制完整的二叉树。现在我需要使用 siftup 过程插入其他三个元素。显示每次插入后的最大堆。

我不确定每次插入后显示的最大堆是什么。这是否意味着每次插入一个元素时我都需要显示最大堆的大小？

定义（最大堆） HEAP(X) 令 X 是一个完全有序的集合。X 上的堆要么是空的，∅，要么是一棵完全二叉树，t，包含 nt ≥ 1 个节点，每个节点都分配有 X 的值，这样：节点 i 的值 ≤ 节点 i 的父节点的值, 我 = 2,3,...,nt。堆的大小是树中节点的数量。当且仅当它的大小为 0 时，堆是空的。

最大堆的定义是这样的，但对我来说似乎有点模棱两可。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-25T19:57:16.477

您需要在每次插入后显示生成的树。我的意思是，如果最初你有一个堆

```
 3
  / \
 1   2 
```

然后插入一个 5，它将从最后一个堆位置开始，并会冒泡到堆头：

```
 3           5
   / \         / \
  1   2  =>   3   2
 /           /
5           1 
```

类似地，如果你插入一个 4，那么：

```
 5           5
   / \         / \
  3   2  =>   4   2
 / \         / \
1   4       1   3 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-25T17:10:22.573

简而言之，最大堆是父项的值大于其任何子项的值的堆。当您绘制初始完整二叉树时，它是否已经采用最大堆的形式？筛选（在我的大学里，我们称它为起泡，但除此之外）在这样的线程上解释起来有点复杂，所以我同意@DanteisnotaGeek。维基百科文章很好地说明了筛选过程的工作原理。插入后显示最大堆要求您绘制二叉树，以便在每次插入后满足最大堆属性。所以最后，你应该有你的初始树，一棵树有你的第一个插入，第二个插入和第三个插入，所以总共有 4 棵树。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-03-24T02:03:01.657

**在堆中，在任何时刻，从根节点到叶节点都是有序且线性的：**

[![在此处输入图像描述](../Images/3111ab1075c807570bf01c7334fee38c.png)](https://i.stack.imgur.com/84JyM.png)

**当您将元素插入堆中的下一个插槽时，该行的顺序将被更改**： [![在此处输入图像描述](../Images/cf08c9b1854e831c16de6037a558a020.png)](https://i.stack.imgur.com/ZLkOe.png)

所以，插入的最后一步变成了对线性数据结构进行重新排序：**冒泡排序**

# html - 交替 DIV 和 P 垂直对齐

> ID：13552546
> 
> 赞同：1
> 
> 时间：2012-11-25T15:43:37.453
> 
> 标签：html, css, alignment

这个看似简单的问题困扰了我整整 10 年。（好吧，不是每天！）

它在 IE 中可以正常工作，但在 FF 和 Chrome 中却不行，这通常表明代码有问题......我想在两边都有 DIV 框（它们实际上是各种大小的 IMG，所以不要t 继续使用表格），文本对齐。在不同的窗口宽度下尝试这个例子。在 FF 中，第 3 行显示 ABOVE ABOVE 前面的 DIV。为什么 ？

基本上，这个想法是 DIV 应该沿着窗口的每一侧堆叠，文本在中间。如果文本太多，下一个 div 就会被下推。在 IE 中运行良好。

```
<HTML>
<HEAD>
<TITLE>Align test</TITLE>
<STYLE TYPE="text/css">
  .DL { float:left;  clear:left;  width:10em; height:10em; background:red;   margin:2; display:inline; }
  .DR { float:right; clear:right; width:10em; height:10em; background:green; margin:2; display:inline; }
  .PL { text-align:left;  background:#F0E0E0;  }
  .PR { text-align:right; background:#E0F0E0;  }
</STYLE>
</HEAD>
<BODY>
<DIV CLASS=DL></DIV><P CLASS=PL>This is the 1st line.</P>
<DIV CLASS=DR></DIV><P CLASS=PR>This is the 2nd line.</P>
<DIV CLASS=DL></DIV><P CLASS=PL>This is the 3rd line which should align with the 2nd red square (*)</P>
<DIV CLASS=DR></DIV><P CLASS=PR>This is the 4th line which should align with the 2nd green square.</P>

<P>(*) No, I don't want a clear:right in here. And adding a float:left works fine if the text is short, but moves the right image down if it reaches it, and it moves the whole line down below the left image if it reaches the right border. Which I don't want.</P>
</BODY>
</HTML> 
```

附加问题：如果我用 SPAN 替换 P，那就更糟了。为什么 P 和 SPAN 之间有这么大的区别？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T00:50:14.643

由于您的 div 左右浮动，因此`<p>`元素位于中间不符合任何内容。它们既不与左侧 div 也不与右侧 div 对齐。

通常代码中实际上存在一系列基本缺陷，所以我将它们全部列出，我们可以纠正它们以使行为正确：

1.  如果您想保持左 div 和 p 对齐，请考虑将它们包装在父 div 容器中。
2.  考虑给 p 元素一个高度，以确保它们彼此保持对齐。
3.  使用浮动两个元素应该在哪里设置父 div。
4.  不要忘记将您的 HTML 属性用引号括起来（即`<div class="dl">`- 这比其他任何东西都更整洁）。

无论如何，我得到了这个解决方案，它比以前工作得更好，但它仍然不完美。我不知道你为什么要在同一条线上有一个左右区域，而不是在左右两边交替。这种布局不太可能非常美观。在这里查看：http: [//jsfiddle.net/z26JM/](http://jsfiddle.net/z26JM/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T13:18:12.707

好的，我找到了解决方案：从 DIV/IMG 中取出 clear:left/right 并将其放在 DIV 之前的 P 中。像这样： `<P STYLE="clear:left;"></P>` `<IMG STYLE="float:left;">` `<P STYLE="text-align:left;">...</P>` 然后另一边： `<P STYLE="clear:right;"></P>` `<IMG STYLE="float:right;">` `<P STYLE="text-align:right;">...</P>` 重复......

# javascript - MAC 上的 Aptana Studio 编辑器问题

> ID：13552549
> 
> 赞同：1
> 
> 时间：2012-11-25T15:43:47.767
> 
> 标签：javascript, aptana

Aptana Studio 3 是用于简单项目的不错的 JavaScript IDE。但我经常遇到同样的问题 - 代码编辑器会定期在屏幕上重复代码行（虽然不是在文件中），并且不允许将光标移动到最后一行代码下方。我似乎在互联网上找不到任何关于这种行为的抱怨。我是唯一一个有这种经历的人吗？有什么治疗方法吗？

我使用的是 MAC OS Mountain Lion，但在 Snow Leopard 中也是如此。

# php - 无法使用 PHP 中的 xpath() 函数从 XML 中检索数据

> ID：13552551
> 
> 赞同：1
> 
> 时间：2012-11-25T15:43:50.407
> 
> 标签：php, xml, xpath

我想解析[这个](http://copac.ac.uk/search?isn=0471644544&rn=1&format=XML+-+MODS)xml 文件并使用 XPATH 检索一些字段（[这](http://img689.imageshack.us/img689/875/copacchrome.png)是我看到 xml 文件的方式，你可以从[这里](http://mehmedean.com/files/so/copac-search.xml)下载）：

我尝试使用以下代码来获取该书的版本：

```
$file_copac = "http://copac.ac.uk/search?isn=$isbn&rn=1&format=XML+-+MODS";
$xml = simplexml_load_file($file_copac) or die("cannot_get_data");
$temp = $xml->xpath('//edition');
var_dump($temp); 
```

我也尝试了“版本”，但结果都是空数组：

```
array(0) { } 
```

我尝试使用以 XPATH 错误结束的 '/mods/originInfo[1]/edition' 的完整路径。我用这个符号解决了问题：

```
$edition = (string)$xml->mods->originInfo[1]->edition; 
```

但是我想知道xpath的问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-25T16:36:48.707

看起来默认（空）命名空间有问题，解决方法：

```
$namespaces = $xml->getDocNamespaces(); 
$xml->registerXPathNamespace('__DEFAULT_NS__', $namespaces['']);
$r = $xml->xpath('//__DEFAULT_NS__:edition');

var_dump((string)$r[0]); //string(8) "8th. ed." 
```

# java - XOM 规范化耗时过长

> ID：13552555
> 
> 赞同：2
> 
> 时间：2012-11-25T15:44:08.400
> 
> 标签：java, xml, performance, canonicalization, xom

我有一个 1GB 大的 XML 文件。我正在使用 XOM 来避免 OutOfMemory 异常。

我需要规范化整个文档，但规范化需要很长时间，即使对于 1.5 MB 的文件也是如此。

这是我所做的：

我有这个示例 XML 文件，我通过复制 Item 节点来增加文档的大小。

```
<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<Packet id="some" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
<Head>
<PacketId>a34567890</PacketId>
<PacketHeadItem1>12345</PacketHeadItem1>
<PacketHeadItem2>1</PacketHeadItem2>
<PacketHeadItem3>18</PacketHeadItem3>
<PacketHeadItem4/>
<PacketHeadItem5>12082011111408</PacketHeadItem5>
<PacketHeadItem6>1</PacketHeadItem6>
</Head>
<List id="list">
    <Item>
        <Item1>item1</Item1>
        <Item2>item2</Item2>
        <Item3>item3</Item3>
        <Item4>item4</Item4>
        <Item5>item5</Item5>
        <Item6>item6</Item6>
        <Item7>item7</Item7>
    </Item>
</List>
</Packet> 
```

我用于规范化的代码如下：

```
private static void canonXOM() throws Exception {
    String file = "D:\\PACKET.xml";
    FileInputStream xmlFile = new FileInputStream(file);

    Builder builder = new Builder(false);
    Document doc = builder.build(xmlFile);

    FileOutputStream fos = new FileOutputStream("D:\\canon.xml");
    Canonicalizer outputter = new Canonicalizer(fos);

    System.out.println("Query");
    Nodes nodes = doc.getRootElement().query("./descendant-or-self::node()|./@*");

    System.out.println("Canon");
    outputter.write(nodes);

    fos.close();
} 
```

尽管此代码适用于小文件，但在我的开发环境（4gb ram，64bit，eclipse，windows）上，1.5mb 文件的规范化部分需要大约 7 分钟

任何指向此延迟原因的指针都非常感谢。

PS。我需要对整个 XML 文档以及整个文档本身的段进行规范化。因此，使用文档本身作为论据对我不起作用。

最好的

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T10:37:49.300

![记忆不受限制](../Images/baec941817a11f9bebd0f2e33f90ce45.png)

```
memory is not restriction 
```

![主线程为绿色且无阻塞](../Images/a07e7d41c8c6bc02efdd2c826fb5a7c2.png)

```
main thread is green and no blocking. it is using as much cpu as it can. 
because my machine has multi-cores , so the CPU total usage is not full.
But it will be full for a single CPU the main thread is running on. 
```

![Nodes.contains 是最忙的](../Images/e1fe3ca1e0711c4f385d55ba5e9b4e6a.png)

```
Nodes.contains is the most busy one 
```

内部节点在 List 中管理，并进行线性比较。列表中的项目越多，“包含”会变慢。

```
private final List nodes;
public boolean contains(Node node) {
    return nodes.contains(node);
} 
```

所以

*   尝试修改 lib 的代码以使用 HashMap 来保存节点。
*   或者使用多线程来利用更多的 CPU，如果您的 XML 可以拆分成小的 xml。

工具：JVisualVM。[http://docs.oracle.com/javase/6/docs/technotes/guides/visualvm/index.html](http://docs.oracle.com/javase/6/docs/technotes/guides/visualvm/index.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T13:58:34.360

Since you want the whole document serialized, can you just replace

```
Nodes nodes = doc.getRootElement().query("./descendant-or-self::node()|./@*");
outputter.write(nodes); 
```

with

```
outputter.write(doc); 
```

?

It looks like `Canonicalizer` does extra work (such as the `nodes.contains()` calls mentioned by whunmr) when given a node list instead of just a root node to canonicalize.

If that doesn't work or is not enough, I would fork `Canonicalizer` and make optimizations there as suggested by profiling.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-06T14:12:11.190

如果您愿意放弃 XOM，我可能会解决您的问题。我的解决方案包括使用[XPath API](http://docs.oracle.com/javase/7/docs/api/javax/xml/xpath/XPath.html)和[Apache Santuario](http://santuario.apache.org/)。

性能上的差异令人印象深刻，但我认为提供一个比较会很好。

对于测试，我使用了您在问题中提供的 XML 文件，大小为 1.5MB。

## XOM 测试

```
FileInputStream xmlFile = new FileInputStream("input.xml");

Builder builder = new Builder(false);
Document doc = builder.build(xmlFile);

FileOutputStream fos = new FileOutputStream("output.xml");
nu.xom.canonical.Canonicalizer outputter = new nu.xom.canonical.Canonicalizer(fos);

Nodes nodes = doc.getRootElement().query("./descendant-or-self::node()|./@*");
outputter.write(nodes);

fos.close(); 
```

## XPath/Santuario 测试

```
org.apache.xml.security.Init.init();

DocumentBuilderFactory domFactory = DocumentBuilderFactory.newInstance();
domFactory.setNamespaceAware(true);
DocumentBuilder builder = domFactory.newDocumentBuilder();
org.w3c.dom.Document doc = builder.parse("input.xml");

XPathFactory xpathFactory = XPathFactory.newInstance();
XPath xpath = xpathFactory.newXPath();

org.w3c.dom.NodeList result = (org.w3c.dom.NodeList) xpath.evaluate("./descendant-or-self::node()|./@*", doc, XPathConstants.NODESET);

Canonicalizer canon = Canonicalizer.getInstance(Canonicalizer.ALGO_ID_C14N_OMIT_COMMENTS);
byte canonXmlBytes[] = canon.canonicalizeXPathNodeSet(result);

IOUtils.write(canonXmlBytes, new FileOutputStream(new File("output.xml"))); 
```

## 结果

![图形结果](../Images/84ac3a7e5cd73b28ad0256bed5fe4351.png)

下面是一个以秒为单位的结果表。测试进行了 16 次。

```
╔═════════════════╦═════════╦═══════════╗
║      Test       ║ Average ║ Std. Dev. ║
╠═════════════════╬═════════╬═══════════╣
║ XOM             ║ 140.433 ║   4.851   ║
╠═════════════════╬═════════╬═══════════╣
║ XPath/Santuario ║ 2.4585  ║  0.11187  ║
╚═════════════════╩═════════╩═══════════╝ 
```

性能差异很大，这与[XML Path Language](http://www.w3.org/TR/xpath/)的实现有关。使用 XPath/Santuario 的缺点是它们不像 XOM 那样简单。

## 测试详情

机器：Intel Core i5 4GB RAM
SO：Debian 6.0 64bit
Java：OpenJDK 1.6.0_18 64bit
XOM：1.2.8
Apache Santuario：1.5.3

# ruby-on-rails - Compass 不会编译任何样式表

> ID：13552559
> 
> 赞同：1
> 
> 时间：2012-11-25T15:44:31.150
> 
> 标签：ruby-on-rails, compass-sass

我最近在 rails 3.0x 应用程序中实现了指南针。我在我的 gemfile 中创建了一个资产组并添加了 compass-rails：

```
group :assets do
  gem "compass-rails"
end 
```

然后我`bundle exec compass init rails .`从我的应用程序的根目录运行。它创建了`print.css`,`ie.css`等。

但是，它似乎没有编译我的更改。最重要的是，我还有一个需要编译的现有 .scss 文件。但他们都没有被监视。当我编辑我的 scss 文件时，我需要做什么才能更新我的 css 文件？

我的 .scss 文件存储在`app/assets/stylesheets`，我的 css 文件存储在`public/stylesheets`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-25T18:38:25.107

从[gem 文档](https://github.com/Compass/compass-rails#rails-30-caveats)中：

**Rails 3.0 警告**

如果您希望 rails 编译您的样式表（而不是使用 compass watcher），您需要编辑`config/application.rb`和更改：

```
Bundler.require(:default, Rails.env) if defined?(Bundler) 
```

对此：

```
Bundler.require(:default, :assets, Rails.env) if defined?(Bundler) 
```

# javascript - 将图片和文字“合并”为一个实体

> ID：13552561
> 
> 赞同：1
> 
> 时间：2012-11-25T15:44:37.140
> 
> 标签：javascript, html

我正在尝试“组合”图像和文本，以使它们可以作为一个实体进行操作。因此，我应该能够，例如，整体单击实体（图像或文本），并将其剪切/粘贴到文本框中的其他位置，或者通过单次按键（退格键或 DEL 键）将其删除，等等。我我不确定 HTML 支持哪些功能，但是否有一个功能相当于将图片和文本“合并”为一个的容器/包装器？（有点像 MS Word 中的“文本框”）

我在网上发布了我的代码，请随意看看。[http://need-help-with-text-editor.atspace.co.uk/](http://need-help-with-text-editor.atspace.co.uk/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T15:29:53.257

`figure`标签处理这样的事情。它为带有标题（文本）的图表、照片等提供了一个容器。

 `````
<figure>
    <img src="my_image.png" alt="My Image">
    <figcaption>This is my first image</figcaption>
</figure> 
`````

# mysql - 字符集服务器和mysql的配置文件

> ID：13552563
> 
> 赞同：7
> 
> 时间：2012-11-25T15:44:39.510
> 
> 标签：mysql, utf-8

我正在运行`mysql -u root -p`（在 Ubuntu 12.05 上），并且不断收到以下错误消息：

```
mysql: unknown variable 'character-set-server=utf8' 
```

事实上，在我的`my.cnf`文件中我设置了它，因为我在设置时出现了一条消息`default-set-server=utf8`，现在已弃用。这是我的`my.cnf`文件：

```
[client]
  port            = 3306
  socket          = /var/run/mysqld/mysqld.sock
  character-set-server = utf8
[mysqld]
  #
  # * Basic Settings
  #
  user            = mysql
  pid-file        = /var/run/mysqld/mysqld.pid
  socket          = /var/run/mysqld/mysqld.sock
  port            = 3306
  basedir         = /usr
  datadir         = /var/lib/mysql
  tmpdir          = /tmp
  skip-external-locking
  collation-server = utf8_unicode_ci
  character-set-server = utf8
  init-connect='SET NAMES utf8' 
```

有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-04-25T18:25:39.417

你需要`character-set-server = utf8`在你已经有一个的客户端下删除，`[mysqld]`并确保在更改 cnf 文件后重新启动 SID

# kinect - 如何将 kinect 骨架移动到另一个位置

> ID：13552564
> 
> 赞同：8
> 
> 时间：2012-11-25T15:44:48.070
> 
> 标签：kinect, kinect-sdk

我正在研究一种扩展方法，将一个骨架移动到 kinect 场操作系统视图中的所需位置。

我的代码接收要移动的骨骼和命运位置，我计算接收到的骨骼髋关节中心和要找到的命运位置之间的距离`how much to move`，然后在关节中迭代应用这个因素。我的代码，实际上看起来像这样。

```
public static Skeleton MoveTo(this Skeleton skToBeMoved, Vector4 destiny)
    {
        Joint newJoint = new Joint();

        ///Based on the HipCenter (i dont know if it is reliable, seems it is.)
        float howMuchMoveToX = Math.Abs(skToBeMoved.Joints[JointType.HipCenter].Position.X - destiny.X);
        float howMuchMoveToY = Math.Abs(skToBeMoved.Joints[JointType.HipCenter].Position.Y - destiny.Y);
        float howMuchMoveToZ = Math.Abs(skToBeMoved.Joints[JointType.HipCenter].Position.Z - destiny.Z);
        float howMuchToMultiply = 1;

        // Iterate in the 20 Joints
        foreach (JointType item in Enum.GetValues(typeof(JointType)))
        {
            newJoint = skToBeMoved.Joints[item];

            // This adjust, try to keeps the skToBeMoved in the desired position
            if (newJoint.Position.X < 0)
                howMuchToMultiply = 1; // if the point is in a negative position, carry it to a "more positive" position
            else
                howMuchToMultiply = -1; // if the point is in a positive position, carry it to a "more negative" position

            // applying the new values to the joint
            SkeletonPoint pos = new SkeletonPoint()
            {
                X = newJoint.Position.X + (howMuchMoveToX * howMuchToMultiply),
                Y = newJoint.Position.Y, // * (float)whatToMultiplyY,
                Z = newJoint.Position.Z, // * (float)whatToMultiplyZ
            };

            newJoint.Position = pos;
            skToBeMoved.Joints[item] = newJoint;

            //if (skToBeMoved.Joints[JointType.HipCenter].Position.X < 0)
            //{
            //    if (item == JointType.HandLeft)
            //    {
            //        if (skToBeMoved.Joints[item].Position.X > 0)
            //        {

            //        }
            //    }
            //}
        }

        return skToBeMoved;
    } 
```

实际上，只考虑 X 位置。

现在，问题：

如果我站在消极的位置，然后把手移到积极的位置，就会有一种奇怪的行为，看看这张图片

![在此处输入图像描述](../Images/ef07c3c154f9f1d283eb60b953fbde8b.png)

要重现此行为，您可以使用此代码

```
using (SkeletonFrame frame = e.OpenSkeletonFrame())
        {
            if (frame == null)
                return new Skeleton();

            if (skeletons == null || skeletons.Length != frame.SkeletonArrayLength)
            {
                skeletons = new Skeleton[frame.SkeletonArrayLength];
            }
            frame.CopySkeletonDataTo(skeletons);

            Skeleton skeletonToTest = skeletons.Where(s => s.TrackingState == SkeletonTrackingState.Tracked).FirstOrDefault();

            Vector4 newPosition = new Vector4();
            newPosition.X = -0.03412333f;
            newPosition.Y = 0.0407479f;
            newPosition.Z = 1.927342f;
            newPosition.W = 0; // ignored

            skeletonToTest.MoveTo(newPosition);
        } 
```

我知道，这是简单的数学运算，但我无法弄清楚为什么会发生这种情况。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-25T23:02:30.577

**问题解决了。这是代码**

```
public static Skeleton MoveTo(this Skeleton skToBeMoved, Vector4 destiny)
    {
        Joint newJoint = new Joint();

        ///Based on the HipCenter (i dont know if it is reliable, seems it is.)
        float howMuchMoveToX = (skToBeMoved.Joints[JointType.HipCenter].Position.X - destiny.X) * -1;
        float howMuchMoveToY = (skToBeMoved.Joints[JointType.HipCenter].Position.Y - destiny.Y) * -1;
        float howMuchMoveToZ = (skToBeMoved.Joints[JointType.HipCenter].Position.Z - destiny.Z) * -1;

        // Iterate in the 20 Joints
        foreach (JointType item in Enum.GetValues(typeof(JointType)))
        {
            newJoint = skToBeMoved.Joints[item];

            // applying the new values to the joint
            SkeletonPoint pos = new SkeletonPoint()
            {
                X = (float)(newJoint.Position.X + (howMuchMoveToX)),
                Y = (float)(newJoint.Position.Y + (howMuchMoveToY)),
                Z = (float)(newJoint.Position.Z + (howMuchMoveToZ))
            };

            newJoint.Position = pos;
            skToBeMoved.Joints[item] = newJoint;
        }

        return skToBeMoved;
    } 
```

# drupal - 持久复选框无法使用 hook_form_alter 进行更改

> ID：13552566
> 
> 赞同：2
> 
> 时间：2012-11-25T15:44:59.107
> 
> 标签：drupal, drupal-6

我正在尝试使用 hook_form_alter 更改选中的复选框：

```
$form['foo']['#attributes'] = array(); 
```

和/或

```
$form['foo']['#default_value'] = '0'; 
```

基本上，表单的当前输出是这样的：

```
[foo] => array (
   [#type] => [checkbox]
   [#attributes] => array (
       [checked] => [checked]
      )
) 
```

这是一个默认选中的复选框。现在我想取消选中该框并将其保存为该框。

我设法默认取消选中该框，但该值根本不保存。表单仍在提交中，复选框已选中。

我错过了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T06:14:13.303

试试这个 $form['foo']['#default_value'] = array('0');

复选框的默认值始终是一个值数组。记住它的值而不是表单上显示的字符串。

# html - CSS3列布局中项目的动画位置

> ID：13552568
> 
> 赞同：2
> 
> 时间：2012-11-25T15:45:23.520
> 
> 标签：html, css, css-transitions

我创建了一个 CSS 列布局，`divs`里面有一些矩形。**[这是我的代码。](http://jsfiddle.net/AQ7bp/21/)**

当用户点击它们中的每一个时，它应该被删除。我已经向它添加了 CSS3 过渡：

```
-webkit-transition: all 0.3s ease-in; /*Safari & Chrome*/
-moz-transition: all 0.3s ease-in; /* Firefox 4 */
-o-transition: all 0.3s ease-in; /* Opera */
transition: all 0.3s ease-in; 
```

现在单击的项目会有效删除，但其他矩形（在此 div 之后）会更改它们的位置而没有任何影响。

换地方时如何给其他物品添加效果？CSS3 Columns 可以吗？如果不是，我应该更喜欢哪种方法？如何？

* * *

*注意：我将创建类似 Windows 8 开始菜单的东西；当您移除其中的图块时，其他项目将通过动画移动到新位置。*

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-25T17:04:55.233

我制作了 div`display: block`并给了它们`float: left`，这就是你想要的效果吗？[http://jsfiddle.net/AQ7bp/22/](http://jsfiddle.net/AQ7bp/22/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-25T15:50:55.997

我会用一个容器围绕你的每个盒子，用

```
{
overflow: hidden
max-height: 999px
display: inline-block
} 
```

`max-height: 0`并在移除盒子时为该容器设置动画。你可以用“父母”得到周围的盒子。然后你让你的盒子变成动画：

```
surrounding-container {
transition: all 0.2s linear;
[..]
} 
```

这样就会得到效果。

编辑：这是小提琴：http: [//jsfiddle.net/sTBjn/](http://jsfiddle.net/sTBjn/)

# jquery - 如何限制 droppable 只包含完整的可拖动

> ID：13552570
> 
> 赞同：1
> 
> 时间：2012-11-25T15:45:31.063
> 
> 标签：jquery, jquery-ui, draggable, droppable

那么如何将 droppable 限制为仅包含完整的可拖动？

看这个例子.. [http://jsfiddle.net/jWNkh/1/](http://jsfiddle.net/jWNkh/1/) .. 尝试将可拖动对象拖动到可放置对象，即使可拖动对象只有一半，您也会看到可放置对象接受。

如果可拖动的只有一半，如何让它不接受？仅当可拖动对象完全位于可放置对象中时，如何使其接受？

你可以在 jsfiddle 中看到，但我的 JS 代码是

```
$('#drag').draggable({ revert: "invalid"});
$('#drop').droppable();​ 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-25T16:19:13.963

利用`tolerance: "fit"`

```
$('#drop').droppable({ tolerance: "fit" });​ 
```

[工作演示](http://jsfiddle.net/jWNkh/2/)

你可以在[这里找到文档](http://api.jqueryui.com/droppable/#option-accept)

# sql - 用于表登录的 SQL 语言

> ID：13552571
> 
> 赞同：-1
> 
> 时间：2012-11-25T15:45:32.803
> 
> 标签：sql, conditional-statements

我想在这里向所有大师问一些问题，我有 1 个表 tuser，其中包含字段 id、用户名、密码、名称和状态。

我正在做这个查询

```
select * from tuser where status = 'on' order by nama asc 
```

我列出了在页面上“打开”并工作的数组。

在这种情况下，我想列出用户但不列出他/她自己。

例如： john and ray，当 john 和 ray 登录时，john 看到自己的列表，我不希望 john 出现。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T15:47:12.977

`WHERE`在您的条款上添加附加条件

```
select * 
from tuser 
where status = 'on'  AND
      username <> 'john'         -- or name. i don't know what columnName is it
order by nama asc 
```

# makefile - GNU Make 模式在与 src 不同的目录中构建输出

> ID：13552575
> 
> 赞同：30
> 
> 时间：2012-11-25T15:45:47.447
> 
> 标签：makefile, gnu-make

我正在尝试创建一个 Makefile，它将我的`.o`文件放在与源文件不同的目录中。我正在尝试使用模式规则，因此我不必为每个源文件和目标文件创建相同的规则。

我的项目结构类似于：

```
project/
 + Makefile
 + src/
   + main.cpp
   + video.cpp
 + Debug/
   + src/       [contents built via Makefile:]
     + main.o
     + video.o 
```

我的 Makefile 看起来像：

```
OBJDIR_DEBUG = Debug
OBJ_DEBUG = $(OBJDIR_DEBUG)/src/main.o $(OBJDIR_DEBUG)/src/video.o

all: $(OBJ_DEBUG)

$(OBJ_DEBUG): %.o: %.cpp
    $(CXX) $(CFLAGS_DEBUG) $(INC_DEBUG) -c $< -o $@ 
```

这不起作用，因为它在`Debug/src/*.cpp`.

我尝试了以下方法：

```
# Broken: make: *** No rule to make target `Debug/src/main.cpp', needed by `Debug/src/main.o'.  Stop.
# As a test, works if I change "%.cpp" to "Debug/src/main.cpp", though it obv. builds the wrong thing

# Strip OBJDIR_DEBUG from the start of source files
$(OBJ_DEBUG): %.o: $(patsubst $(OBJDIR_DEBUG)/%,%,%.cpp)
    $(CXX) $(CFLAGS_DEBUG) $(INC_DEBUG) -c $< -o $@ 
```

```
# Broken:
#   Makefile:70: target `src/main.o' doesn't match the target pattern
#   Makefile:70: target `src/video.o' doesn't match the target pattern

# Add OBJDIR_DEBUG in target rule
OBJ = src/main.o src/video.o

$(OBJ): $(OBJDIR_DEBUG)/%.o: %.cpp
    $(CXX) $(CFLAGS_DEBUG) $(INC_DEBUG) -c $< -o $@ 
```

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-11-25T15:45:47.447

在重新阅读[有关静态模式规则的文档](http://www.gnu.org/software/make/manual/html_node/Static-Usage.html#Static-Usage)后，我得出了以下似乎有效的模式规则。

```
$(OBJ_DEBUG): $(OBJDIR_DEBUG)/%.o: %.cpp
    $(CXX) $(CFLAGS_DEBUG) $(INC_DEBUG) -c $< -o $@ 
```

我不确定这是最好的方法，我愿意接受建议。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-01-09T15:44:53.387

您可以尝试从另一个目录中的源代码构建对象，而不是在另一个目录中构建对象：将您的 makefile 放在对象将要存在的目录中，并告诉 make 使用 VPATH 在其他地方查找源代码。如果所有目标文件都应该在同一个目录中结束，这将最有效。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-02-06T14:48:07.893

通过在每个源上运行 GCC，在单独的构建目录中“复制”源树的 Makefile - [https://stackoverflow.com/a/41924169/4224163](https://stackoverflow.com/a/41924169/4224163)

# solr - Solr - 使用枢轴分面时的字段别名

> ID：13552577
> 
> 赞同：2
> 
> 时间：2012-11-25T15:45:56.327
> 
> 标签：solr, facet

我想知道是否有一个选项可以重命名使用 facet.pivot 方法时返回的字段。我尝试使用 {!key=my_alias} 字段名 - 没用 谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T13:06:17.397

Solr 不支持重命名枢轴分面返回的字段，但您可以重命名枢轴分面本身：

`facet.pivot={!key=product}make,model`

# php - 使用 jQuery 循环浏览网站上的图像的缺点

> ID：13552580
> 
> 赞同：3
> 
> 时间：2012-11-25T15:46:15.670
> 
> 标签：php, jquery

我创建了一个漫画网站[http://www.hittingtreeswithsticks.com/](http://www.hittingtreeswithsticks.com/)，如果您单击漫画缩略图，它将带您进入图像的全尺寸（viewimage.php 模板）。

在 viewimage.php 模板上，我使用 javascript/jquery 循环浏览存储在数组中的图像，这样用户就不必每次都重新加载页面。

**这似乎有两个问题：**

1）我还想添加一个“喜欢/不喜欢”功能......这样您就可以为每张图片投票，以及一个 Facebook 喜欢按钮（这样用户就可以喜欢每张图片）。目前，由于 jQuery 在图像中循环，它不会更新您单击的图像的 id。（在这张图片中，如果我按右箭头键进入下一步，id 应该增加到 35）。

![在此处输入图像描述](../Images/5210abc5c9a57755e57174691bfc7f29.png)

![在此处输入图像描述](../Images/52b81de47a3cbf004f254a4aeeb25ee6.png)

2) 最终我想从广告收入中赚钱。消息来源说，如果我使用 jQuery 获取下一张图片，而不是重新加载页面，广告将不会被刷新……而且我会产生更少的广告收入。

所以，我的问题是...... Jquery 是否可以处理这些问题，或者我是否必须刷新页面以增加 ID 并刷新广告？

谢谢！

编辑：我添加了

```
window.history.pushState(null, null, 'http://www.hittingtreeswithsticks.com/?action=viewimage&site=comics&id=imgIndex'); 
```

代码（这似乎不起作用，实际上阻止了“下一个”代码的工作）

```
 $("#next").click(function() {
        imgIndex++;
            if (imgIndex > imgArray.length-1) 
            {
                imgIndex = 0;
            }
            img.src = imgArray[imgIndex];
            window.history.pushState(null, null, 'http://www.hittingtreeswithsticks.com/?action=viewimage&site=comics&id=imgIndex');
    }); 
```

更新：

错误：

![在此处输入图像描述](../Images/01d3412f4a5b1828c5685d625f7a83fd.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-25T15:55:53.083

关于您的第一个问题，您可以使用[pushState()](https://developer.mozilla.org/en-US/docs/DOM/Manipulating_the_browser_history#The_pushState%28%29.C2.A0method)。在更换图片的同时，也可以更新 url。这会添加一个新的历史记录条目并替换浏览器中的 url，但实际上并不会重新加载页面。例子：

```
window.history.pushState(null, null, 'http://www.hittingtreeswithsticks.com/?action=viewimage&site=comics&id=N&cat=&title=TITLE'); 
```

（只需在此处适当地替换 N 和 TITLE 即可）。这样就解决了。请注意，这不是 jQuery 功能，而是原生 javascript。

关于问题 2，这取决于您的广告是如何设置的，但这可能是它们不会自动重新加载的情况。在大多数情况下，您也可以通过 javascript 重新加载广告，但具体取决于您的广告投放方式的详细信息；您可能应该发布一个单独的问题，询问如何通过 javascript 异步加载广告，并详细说明您的广告服务器是如何工作的。

# c - 将数组项放入列表并打印出 C 中的列表项

> ID：13552582
> 
> 赞同：1
> 
> 时间：2012-11-25T15:46:23.040
> 
> 标签：c, pointers

在这个程序中，我想将元素放在列表中而不是数组中。最后打印出清单。

例如。西蒙 22 苏西 24
...

但是，我并不真正了解如何操作列表，以及如何构建堆并检索它。我做了一些关于如何做到这一点的研究。这就是我想出的。并且出现了一些错误，我不知道如何解决。

```
error: 'ptr' undeclared (first use in this function)
arrays.c:37:5: note: each undeclared identifier is reported only once for each function     it appears in
arrays.c: In function 'main':
arrays.c:62:9: error: expected identifier or '(' before '=' token
arrays.c:69:5: warning: passing argument 1 of 'insert' from incompatible pointer type
arrays.c:28:13: note: expected 'struct Record *' but argument is of type 'struct Record **'

#include <stdio.h>
#include <stdlib.h>

/* these arrays are just used to give the parameters to 'insert',
   to create the 'people' array */
char *names[7]= {"Simon", "Suzie", "Alfred", "Chip", "John", "Tim",
          "Harriet"};
int ages[7]= {22, 24, 106, 6, 18, 32, 24};

/* declare your struct for a person here */
/* */
typedef struct Record{
    char *names;
    int ages;
    struct Record *next;
}  Record;

char getname(Record *names){
    return names;
}

int getage(Record *ages){
    return ages;  
}

static void insert (Record *p, char *s, int n) {

//p[(*)] = malloc(sizeof(person));

/*static int nextfreeplace = 0;*/
    Record *headptr = NULL;

    while(!reached_eof(p)){

/* allocate heap space for a record */
        ptr =(Record*) malloc(sizeof(Record));

        if(ptr == NULL){  
            abort();
            printf("memory allocation fail"); 
            exit(1);  
        }
        else{
            printf("memory allocation to person  - %s - \n", s);      
        }

        ptr->name = getname(p);
        ptr->age = getage(p);

        /* link new object into the list */
        ptr->next = headptr;
        headptr = ptr;

    }
}       

int main( int argc, char **argv) {

    /* declare nextinsert */
    int  = 0;            

    /* declare the people array here */
    Record *p, *headptr;
    headptr = NULL;

    //insert the members and age into the unusage array. 
    for ( int i=0 ; i < 7; i++) {
        insert (p, names[i], ages[i]);

        /* do not dereference the pointer */
    }

    /* print out a line before printing the names and ages */
     printf("\n");

    /* print the people array here*/
    for (int i=0; i < 7; i++) {
        printf("The name is: %s, the age is:%i\n", p[i]->names, p[i]->ages);
    }

    /* This is the third loop for call free to release the memory allocated by malloc */
    /* the free()function deallocate the space pointed by ptr. */
    for(int i=0; i<7;i++){
        free(p[i]);
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-25T15:51:15.900

首先

下面的代码很奇怪

```
char getname(Record *names){
  return names;
}

int getage(Record *ages){
  return ages;  
} 
```

我认为对上述功能没有任何实际需求。

甚至这些台词

```
ptr->name=getname(p);
ptr->age=getage(p); 
```

您可以将它们替换为

```
ptr->name=s;
ptr->age=n; 
```

以下函数包含许多错误和奇怪的代码：

```
static void insert (Record *p, char *s, int n) {

//p[(*)] = malloc(sizeof(person));

/*static int nextfreeplace = 0;*/
   Record *headptr = NULL;

   while(!reached_eof(p)){
/* allocate heap space for a record */
ptr =(Record*) malloc(sizeof(Record));

if(ptr == NULL){  
   abort();
   printf("memory allocation fail"); 
   exit(1);  
}else{
   printf("memory allocation to person  - %s - \n", s);      
} 
```

为什么要使用 while 循环。并且您错过了 ptr 指针的定义，并且您注意到在函数末尾传达了新的标头。在你如何修复它之后：

```
static void insert (Record **header, char *s, int n) {

   Record *ptr;
   ptr =(Record*) malloc(sizeof(Record));

    if(ptr == NULL){  
       abort();
       printf("memory allocation fail"); 
       exit(1);  
    }else{
       printf("memory allocation to person  - %s - \n", s);      
    }
    ptr->name=s;
    ptr->age=n;

    /* link new object into the list */
    ptr->next=*header;
    *headptr=ptr;
} 
```

**在你的主要功能中：**

```
int main(int argc, char **argv) {

   int  i= 0;
  Record *p, *headptr=NULL;

for (int i=0; i < 7; i++) {
insert (&headptr, names[i], ages[i]);
/* do not dereference the pointer */
  }

 for (int i=0; i < 7; i++) { /* this will print from array*/
    printf("From array  The name is: %s, the age is:%i\n", p[i]->names, p[i]->ages);
}

for (p=headptr; p!=NULL; p=p->next) {  /* this will print from linked list*/
    printf("From linked list The name is: %s, the age is:%i\n", p->names, p->ages);
}

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-25T15:50:10.460

我想唯一的错误是你在使用 malloc 函数之前错过了定义指针。将指针定义为

```
Record *ptr ; 
```

在您的代码中某处有以下文本：

```
int = 0; 
```

这是第二个错误。

你正在传递一个 NULL 指针`p`来插入你的 for 循环中的函数

编辑这些，他们现在必须修复错误。

# ruby - 在 Ruby 中跨类的多个实例存储数据的好方法是什么？

> ID：13552585
> 
> 赞同：5
> 
> 时间：2012-11-25T15:46:55.143
> 
> 标签：ruby, object, instance, instance-variables, memoization

考虑：生成数据的对象的许多实例。每次运行只生成一次该数据会很棒。

```
class HighOfNPeriods < Indicator
  def generate_data
    @indicator_data = DataStream.new
    (0..@source_data.data.count - 1).each do |i|
      if i < @params[:n_days]
      ...
      @indicator_data.add one_data
    end
  end 
```

`HighOfNPeriods`with different`params`和 different有不同的实例`@source_data`。

以下是指标的使用方法：

```
class Strategy
  attr_accessor :indicators

  def initialize params
    ...
  end 
```

该方法`HighOfNPeriods.generate_data`是从内部调用的`Strategy`。每个`Strategy`都有一个 的新实例`HighOfNPeriods`，因此不可能将其作为某种全局值提取出来。除此之外，它不应该是全球性的。

`unless @indicator_data`不会工作，因为数据需要在多个`HighOfNPeriods`.

所以，问题是：

```
What is a good way to memoize the instance variable `indicator_data` 
or the object `HighOfNPeriods` when there are many different instances, 
some of which have different data? 
```

一种解决方案是使用 ActiveRecord 存储数据，但这并不是我现在真正想要的方式，因为：

1.  并不是所有生成的数据都可以提前生成，因为params的排列太多了。查看之前是否已生成，然后根据需要生成（并保存）会更有意义。
2.  生成数据不需要很长时间。它可能会生成一次并每次运行使用数百次。
3.  从对象内部访问数据比从数据库中提取数据要快。

红宝石 1.9.3

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-25T15:59:06.620

如果您无法在实例级别上记住它，请上一层并使用类实例。

```
class Foo
  # I used *args here for simplicity of the example code.
  def generate_data *args
    if res = self.class.cache[args]
      puts "Data in cache for #{args.inspect} is #{res}"
      return res
    end

    puts "calculating..."
    p1, p2 = args
    res = p1 * 10 + p2
    self.class.cache[args] = res
    res
  end

  def self.cache
    @cache ||= {}
    @cache
  end
end

puts Foo.new.generate_data 1, 2 
puts Foo.new.generate_data 3, 4
puts Foo.new.generate_data 1, 2
# >> calculating...
# >> 12
# >> calculating...
# >> 34
# >> Data in cache for [1, 2] is 12
# >> 12 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-25T15:57:02.823

创建一个类变量`@@indicator_data`，它是一个散列，`[@params,@source_data]`作为键和`@indicator_data`作为值。然后，在创建时，对`@@indicator_data[[@params,@source_data]]`.

```
class HighOfNPeriods < Indicator
  @@indicator_data = {}
  def generate_data
    @indicator_data = @@indicator_data[[@params, @source_data]] ||= DataStream.new
    ...
  end
end 
```

# jquery - 悬停在子级上与悬停在父级上不同

> ID：13552591
> 
> 赞同：0
> 
> 时间：2012-11-25T15:47:46.503
> 
> 标签：jquery, html, hover

想象一下以下场景：您有一个包含多个项目的菜单（顺便说一句，wordpress 菜单），并且您希望在其下方显示一个带有一些链接的白条，但仅当您将鼠标悬停在一个特定菜单项上时。然后，当您离开菜单项并将鼠标悬停在菜单正下方的白条本身上时，它应该仍然存在，因为您希望能够单击其中的链接。只有当鼠标既没有悬停在菜单项上，也没有悬停在白条本身或任何包含的元素上时，白条才应再次淡出。

这是我想出的：

```
$("#menu-item-62").hover(function(){ //this is the menu item
    $(".white_bar_artists").show(); //this is the white bar that shall be shown
}, function(){
    if(!$(".white_bar_artists").is(":hover")){ //the white bar should only disappear, if the user hovers neither over it nor the menu item
        $(".white_bar_artists").hide();
    }
}); 
```

到现在为止还挺好。唯一的问题是，当我将鼠标悬停在菜单项之外时，白条只会再次消失，而不是当我将鼠标悬停在白条本身之外时。这就是我添加以下代码的原因：

```
$(".white_bar_artists").find("*").mouseout(function(){
    $(".white_bar_artists").hide();
    $(".white_bar").show();
}); 
```

有趣的是，即使我使用`find("*")`检索白条内的所有元素，只要将鼠标悬停在其中一个上，白条就会消失。尽管如此，这第二组代码似乎是使白条消失所必需的，不仅在悬停在菜单项之外时。

如何改进任一代码片段以使其满足以下两个要求：

*   将鼠标悬停在菜单项和白条本身上时，白条保持不变
*   当没有将鼠标悬停在自身、包含的元素之一和菜单项上时，白条会消失

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T15:56:20.777

也将悬停动作绑定到白条。菜单项失去悬停触发隐藏，但白条到那时触发显示悬停。

```
$("#menu-item-62, .white_bar_artists").hover(function(){
    $(".white_bar_artists").show(); //this is the white bar that shall be shown
}, function(){
    $(".white_bar_artists").hide();
});​ 
```

我假设您显示了两个元素，因此鼠标可以从一个元素移动到另一个元素而没有间隙。

# lambda - 在 Scheme 中对函数进行 n 次柯里化

> ID：13552597
> 
> 赞同：3
> 
> 时间：2012-11-25T15:48:13.470
> 
> 标签：lambda, scheme, currying

我无法找到一种方法来将函数咖喱指定次数。也就是说，我给函数一个自然数n和一个函数fun，它对函数进行了n次curry。例如：

```
(curry n fun) 
```

功能和可能的应用是：

```
(((((curry 4 +) 1) 2) 3) 4) 
```

这将产生 10 个。

我真的不确定如何正确实施它。有人可以帮帮我吗？谢谢 ：）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T15:44:38.107

```
;;; no curry
;;; (Int, Int, Int) => Int

(define sum
  (lambda (x y z)
    (+ x y z) ) )

(sum 1 2 3)

;;; curry once
;;; (Int) => ((Int x Int) => Int)

(define sum
  (lambda (x)
    (lambda (y z)
      (+ x y z) ) ) )

(define sum+10 (sum 10))

(sum+10 10 20)

;;; curry 2 times
;;; (Int) => (Int => (Int => Int) )

(define sum
  (lambda (x)
    (lambda (y)
      (lambda (z)
        (+ x y z) ) ) ) )

(define sum+10+20 ((sum 10) 20))

(sum+10+20 30) 
```

;;; 现在我们将从这些示例开始进行概括：

```
(define (curry n f)
  (if (= n 0)
      (lambda (x) x)
      (lambda (x) (f ((curry (- n 1) f) x))))) 
```

`1+`;;;示例：对初始数字 10应用 11 次函数，结果为 21：

```
((curry 11 (lambda (x) (+ x 1))) 10) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-25T16:16:05.720

`n-curry`您可以通过重复调用来编写自己的过程`curry`：

```
(define (n-curry n func)
  (let loop ([i 1] [acc func])
    (if (= i n)
        acc
        (loop (add1 i) (curry acc))))) 
```

如果您在 Racket 中，则可以使用`for/fold`迭代更简单地表达它：

```
(define (n-curry n func)
  (for/fold ([acc func])
    ([i (in-range (sub1 n))])
    (curry acc))) 
```

无论如何使用它：

```
(((((n-curry 4 +) 1) 2) 3) 4)
=> 10 
```

# c# - 如何在 WPF 中将 MessageBox 窗口保留在前台

> ID：13552602
> 
> 赞同：0
> 
> 时间：2012-11-25T15:48:34.423
> 
> 标签：c#, wpf, messagebox, folderbrowserdialog

我需要显示一个文件夹对话框，以便用户可以在我的应用程序运行之前选择一个路径。我一切正常，但我似乎无法将错误消息框保持在前台。如果用户选择了错误的路径，则会弹出一个消息框，但它会留在桌面上任何打开的窗口后面的背景中。

我是 WPF 的新手，使用此应用程序的 winforms 版本，我可以指定 fdb.ShowDialog(this)，它会将错误消息框保持在前台。但使用 WPF 时，消息框窗口始终位于所有其他打开的窗口之后。

关于如何解决这个问题的任何想法？谢谢。

```
 while (!found)
    {
        if (fbd.ShowDialog() == System.Windows.Forms.DialogResult.OK)
        {
            if ((File.Exists(Path.Combine(fbd.SelectedPath, "user.exe"))))
                return fbd.SelectedPath;
            else                   
                System.Windows.Forms.MessageBox.Show("Cannot find user.exe in the selected path! Please try again.", "File Error", System.Windows.Forms.MessageBoxButtons.OK, System.Windows.Forms.MessageBoxIcon.Error);

        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T16:43:19.577

将您的代码移动到`Window_Loaded`事件而不是从构造函数调用它 -

```
<Window Loaded="Window_Loaded"/> 
```

背后的代码 -

```
private void Window_Loaded(object sender, RoutedEventArgs e)
{
    // Your code here
} 
```

Since, your window is not loaded yet as the code execution haven't get passed the constructor yet and in the meanwhile error message pops up. So, once the window gets loaded it will comes over the message box.

# c - c 如何找到有间隙的子串？

> ID：13552605
> 
> 赞同：1
> 
> 时间：2012-11-25T15:48:45.840
> 
> 标签：c

说我有一个字符串：

```
a,b,c,d,e-f,g,h, 
```

我想检查它是否包含`abcdefgh`跳过 1 个字符的子字符串。我可以稍后将其更改为不同的跳过计数，甚至检查字符之间是否存在不同跳过的匹配。

解决这个问题的最佳方法是什么？c语言中有什么我可能遗漏的东西吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-25T16:11:59.657

一个简单的 for 循环就可以了：

```
const char *d = "abcdefgh";
const char *s = "a,b,c,d,e-f,g,h,";
int len = strlen(s);

for (i=0; i<len; i+=2) {
    if (s[i] != d[i/2]) {
        /* not equal */
        break;
    }
} 
```

注意：您应该首先检查字符串的长度至少是另一个长度的两倍。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-25T16:07:00.347

您可以对字符串“abcdefgh”（点匹配任何字符）进行正则快速搜索。您可以将其概括为使用以下正则表达式使用长度为一个或多个字符的分隔符字符串：“a.+b.+c.+d.+e.+f.+g.+h”（将 + 更改为 *使用长度为零或多个字符的分隔符）。以下是在 C 中使用 RE 的一些指导：C 中的[正则表达式：示例？](https://stackoverflow.com/questions/1085083/regular-expressions-in-c-examples)

使用 RE 可能会更容易一些，但在运行时性能方面的成本也会更高。更快的解决方案是编写一个函数，该函数采用搜索字符串、分隔符和要搜索的字符串并查找搜索字符串，同时跳过分隔符字符。这是 C 编程中的一个很好的练习——即使你找到了一种更简单的方法，我想你也会从自己编写这个函数中得到很多。

# c++ - 运算符<< 不匹配

> ID：13552610
> 
> 赞同：1
> 
> 时间：2012-11-25T15:48:59.943
> 
> 标签：c++, stream, operators

我有一个这样的代码片段：

```
class track {

public:

struct time {
    unsigned minutes, seconds;

    std::ostream& operator<<(std::ostream& o) {
        o << minutes << "minute(s) " << seconds << " second(s)";
        return o;
    }
};

...

std::ostream& operator<<(std::ostream& o) {
    o << "title: " << title << " performer: " << performer << " length: " << length << std::endl;
    return o;
}

private:
std::string performer, title;
time length;
}; 
```

但是，如果我编译这段代码，我得到了这个错误：

```
no match for 'operator<< ...' 
```

你能告诉我这段代码有什么问题吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-25T15:54:35.847

如果您希望您`obj`的类对象`T`支持典型的流式传输（例如`cout << obj`），您必须在全局范围内定义一个运算符：

```
std::ostream& operator<<(std::ostream& o, const T& obj) {
  ...
} 
```

（如果函数需要访问私有字段，可以声明为好友）

如果像在您的代码中一样，您将运算符声明为成员

```
std::ostream& T::operator<<(std::ostream& o) 
```

你本质上是在定义这个：

```
std::ostream& operator<<(T& obj, std::ostream& o) 
```

你可以像这样使用它：`obj << cout`，但这可能不是你想要的！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-25T15:53:27.037

您应该将运算符声明为非成员函数：

```
std::ostream& operator<<(std::ostream& o, const track::time& t) {
    return o << t.minutes << "minute(s) " << t.seconds << " second(s)";
}

std::ostream& operator<<(std::ostream& o, const track& t) {
    return o << "title: " << t.title << " performer: " << t.performer << " length: " << t.length;
} 
```

您必须将后者设为 a`friend`才能访问私有数据成员。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-25T15:53:30.783

你想在你的班级之外有这个运算符：

```
std::ostream& operator<<(std::ostream& o, const track &t) {
    return o << "title: " << t.title() << " performer: " << t.performer()
      << " length: " << t.length() << std::endl;
} 
```

而且，当然，您需要向您的类添加适当的 getter 函数`track`，或者，使操作员成为该类的朋友，`track`以便它可以`track`直接访问 的私有成员。

# java - 有没有办法在java中线程方法，而不是整个类？

> ID：13552612
> 
> 赞同：0
> 
> 时间：2012-11-25T15:49:23.377
> 
> 标签：java, multithreading

所以我一直在想，最近，在学校里，我们一直在学习 java 线程..

与大多数其他语言不同，我还没有找到一种在 java 中线程化函数的方法，而这正是我正在寻找的......

我知道可以使用 run 类，但想象一个类有 3 个函数，每个函数都有自己的参数，如果可能的话，我希望能够调用这些函数并单独线程化它们......

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-25T15:57:06.573

```
new Thread(new Runnable() {
    public void run() 
    {
         functionToThread();
    }
}).start(); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-25T16:03:31.690

在 Java 中实现多线程的正确方法是实现`Runnable`. 扩展`Thread`类只是一种方便的稍微简单的方法，但实现`Runnable`接口是最好的，因为它为您提供了`run()`可以调用函数的方法，还允许您扩展其他类而不是`Thread`.

但是，您无权访问的是您在另一个线程中执行的函数的返回值。为此，您可以使用[`Future`](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/Future.html)which 为您提供一个对象，该对象将在其他线程执行该函数后立即填充您的返回值。而不是实现`Runnable`你实现[`Callable`](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/Callable.html)，这是非常相似的，它的方法被称为`call()`而不是`run()`，并允许你通过泛型指定返回类型。`Future`对象也可以与线程池和任务执行器一起使用。查看[`Future`](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/Callable.html)类的javadoc中的示例，它有一个很好的示例和解释。

还要记住，在一个方法中你可以创建一个匿名类，所以如果你只是在那之后你只需在你想要在一个单独的线程中执行的方法中内联（扩展`Runnable`或）。`Callable`（正如 Cruncher 在他的回答中指出的那样）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-25T15:54:15.847

您必须创建单独的包装类来实现`Runnable`或扩展线程并调用您的函数。

顺便说一句，即使 java 有像 C 这样的方法指针，你仍然需要一些知道要传递给函数的参数值的包装器。

# vim - 为什么我可以通过使用井号 (#) 来打破 vim 用户函数命名规则

> ID：13552614
> 
> 赞同：9
> 
> 时间：2012-11-25T15:49:29.920
> 
> 标签：vim

vimscript 帮助文件声明在定义用户函数时：

> 函数名必须以大写字母开头，以避免与内置函数混淆。

除了我通过查看其他代码发现的以下情况外，这是强制执行的。

```
"This should not work.
"But it does as long as the function is in a file called 'overrides.vim'.
function! overrides#name() abort
  echo 'Test overrides\name'
endfunction

"This should not work either.
"But it does as long as the file above is in a folder called 'plugin'.
function! plugin#overrides#name() abort 
  echo 'Test plugin\overrides\name'
endfunction

let stupid = {}
"This should not work.
"But it does aslong as the stupid Dictionary is defined.
function! stupid.name() abort
  echo 'Test stupidname'
endfunction

call overrides#name()
call plugin#overrides#name()
call stupid.name() 
```

我到处寻找可以解释这种语法的任何东西。我知道这现在有效。我很好奇的是，对于那些使用过这种语法的人来说，你是从哪里了解到它的？

是否还有其他在帮助文件中未提及的 vimscript 功能？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-25T15:56:13.967

此命名语法适用于`autoload`函数。键入`:help autoload-functions`寻求帮助。

```
AUTOMATICALLY LOADING FUNCTIONS ~
                                                          *autoload-functions*
When using many or large functions, it's possible to automatically define them
only when they are used.  There are two methods: with an autocommand and with
the "autoload" directory in 'runtimepath'. 
```

# scala - Scala Swing ComboBox 可编辑

> ID：13552615
> 
> 赞同：2
> 
> 时间：2012-11-25T15:49:36.540
> 
> 标签：scala, scala-swing

一个简单的问题（但仍然找不到任何答案:()。Java 的 Swing 有一个可编辑的属性，[`ComboBox`](http://docs.oracle.com/javase/tutorial/uiswing/components/combobox.html)因此用户可以键入以查找值。我检查了 Scala 的`ComboBox`实现，并且有一个可编辑的[属性](http://www.scala-lang.org/api/current/index.html#scala.swing.ComboBox)。

所以问题是，如何`ComboBox`在 Scala 的 Swing 中将 's editable 设置为 true（或 false）？

之前谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-25T16:11:37.233

有[makeEditable](https://github.com/scala/scala/blob/v2.9.2/src/swing/scala/swing/ComboBox.scala#L201)方法，但我找不到任何逆向方法，因此您必须使用底层组件（scala swing 只是 java swing 的一个薄包装器）将可编辑性设置为 false：

```
mycombo.peer.setEditable(false) 
```

# c - 访问函数中动态分配的数组时出现分段错误

> ID：13552616
> 
> 赞同：1
> 
> 时间：2012-11-25T15:49:37.367
> 
> 标签：c, malloc

我正在尝试创建一个用数据填充多个数组的函数。问题是，每当我尝试输入超过 2 个数字时，都会出现分段错误。当我不使用双指针时它工作正常。

```
#include <stdio.h>
#include <stdlib.h>

int readInput(int **array); 

int main()
{
    int *array;
    readInput(&array);
    free(array);
    return 0;
}

int readInput(int **array)
{
    int n,i;
    printf("Enter n:\n");
    scanf("%d",&n);
    *array = (int*) malloc(n*sizeof(int));
    for(i=0;i<n;i++)
    {
        scanf("%d",array[i]);
    }

    return 0; 
```

}

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-25T15:57:13.743

```
scanf("%d",array[i]); 
```

由于数组是一个`int**`，`array[i]`是一个`int*`（即索引0是指向您刚刚分配的数组的指针，其余的是随机未分配的内存）

`(*array)[i]`可能更像您正在寻找的东西。

# wordpress - WP Single.php If 和 elseif 语句执行

> ID：13552620
> 
> 赞同：0
> 
> 时间：2012-11-25T15:50:00.300
> 
> 标签：wordpress

```
<?php if (in_category('3')) {
        $args = array(
        'cat' => 'Japan',
        'orderby' => 'meta_value_num', 
        'meta_key' => 'japan_id',
        'order' => 'ASC',
        );
        $the_query = new WP_Query( $args );

        } elseif (in_category('5')) {
        $args = array(
        'cat' => 'Borneo',
        'orderby' => 'meta_value_num', 
        'meta_key' => 'borneo_id',
        'order' => 'ASC',
        );
        $the_query = new WP_Query( $args );}?>

        <?php while ( $the_query->have_posts() ) : $the_query->the_post();?> 
        <?php $status = get_post_meta($post->ID, 'status', true); ?><?php $finishdate = get_post_meta($post->ID, 'finishdate', true); ?>
        <a href="<?php the_permalink(); ?> " rel="favourite" title="<?php the_title(); ?>"><?php the_post_thumbnail('featured-thumbnail'); ?></a>
        <?php endwhile; ?>
        <?php
       // Reset Post Data
       wp_reset_postdata();?> 
```

大家好，我正在尝试做一个 if 和 elseif 来检查：

*   如果这篇文章属于第 3 类
*   获取此帖子的信息（类别名称，按此 meta_key 的元值编号按 ASC 顺序排列
*   否则，如果这篇文章属于第 5 类
*   获取此帖子的信息...按 ASC 顺序

但是，我不断收到错误消息“致命错误：在...在线的非对象上调用成员函数 have_posts()....”我想显示来自的所有帖子的所有精选缩略图与 Single Post 相同的类别。

[单个帖子的示例： http](http://ethanlimphotos.com/2012/04/19/orangutan-grabs-legs) ://ethanlimphotos.com/2012/04/19/orangutan-grabs-legs 特色缩略图滚动应该像这样显示[http://ethanlimphotos.com](http://ethanlimphotos.com) 我想要索引页面上的特色缩略图滚动也可以在单页上工作。请帮忙，谢谢！:D

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-25T16:32:13.043

我真的不明白为什么几乎每个人都在想要进行自定义循环时创建一个新对象:) 这是因为这是您看到示例的方式，还是您有不同的原因（我真的很好奇 :)） .

无论如何，当我需要自定义循环时，我的方式是调用`query_posts()`，使用正常`have_posts()`，`the_post()`然后使用 .reset 重置查询变量`wp_reset_query()`。因此，当您使用该方法时，您的代码将如下所示：

```
<?php if (in_category('3')) {
    $args = array(
    'cat' => 'Japan',
    'orderby' => 'meta_value_num', 
    'meta_key' => 'japan_id',
    'order' => 'ASC',
    );
    query_posts( $args );
} elseif ( in_category( '5' ) ) {
    $args = array(
        'cat' => 'Borneo',
        'orderby' => 'meta_value_num', 
        'meta_key' => 'borneo_id',
        'order' => 'ASC',
    );
    query_posts( $args );
}?>

<?php while ( have_posts() ) : the_post(); ?> 
    <?php $status = get_post_meta($post->ID, 'status', true); ?><?php $finishdate = get_post_meta($post->ID, 'finishdate', true); ?>
    <a href="<?php the_permalink(); ?> " rel="favourite" title="<?php the_title(); ?>"><?php the_post_thumbnail('featured-thumbnail'); ?></a>
<?php endwhile; ?>
<?php
// Reset the query data
wp_reset_query();?> 
```

# c# - 查询抛出“IndexOutOfRange”

> ID：13552625
> 
> 赞同：2
> 
> 时间：2012-11-25T15:50:30.580
> 
> 标签：c#, sql, sql-server, tsql

我觉得这很奇怪，我有这个代码：

```
string getBatchesQuery = "SELECT DISTINCT CONVERT(VARCHAR(8), time, 4) AS Batch FROM Calls ORDER BY Batch";
SqlCommand getBatchesQueryCom = new SqlCommand(getBatchesQuery, connection);

SqlDataReader getBatchesQueryReader = myCom.ExecuteReader();

List<string> allBatches = new List<string>();

while (getBatchesQueryReader.Read())
{

    allBatches.Add(getBatchesQueryReader["Batch"].ToString());

}
getBatchesQueryReader.Close(); 
```

现在怎么可能`Batch`不存在呢？也许是因为我这样命名它？

我应该怎么办？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-25T15:55:44.763

该列不存在，因为您运行了错误的命令。更改`myCom`为`getBatchesQueryCom`。

```
SqlDataReader getBatchesQueryReader = getBatchesQueryCom.ExecuteReader(); 
```

# android - 使用 JSOUP 在 android 中解析 HTML

> ID：13552631
> 
> 赞同：0
> 
> 时间：2012-11-25T15:51:02.003
> 
> 标签：android, html-parsing, jsoup

我正在尝试从网站解析一些 html。我在 AsyncTask 中连接到一个网站。我尝试使用 JSOUP 解析器解析检索到的 HTML。

```
website= task.get();
            String items="";
            Document doc = Jsoup.parse(website);
            Element content = doc.getElementById("rtable");
            Elements links = content.getElementsByTag("tr");
            for (Element link : links) {
             items=items+ link.child(2).text()+link.child(3).text()+ link.child(0).getElementsByTag("a").attr("href");

            }
            mDateDisplay.setText(items); 
```

如果我在普通的 java 项目中解析 html，它可以正常工作，但不能在 Android 项目中。我在该行中得到一个空指针异常：

```
Element content = doc.getElementById("rtable"); 
```

错误的输出：

```
11-25 16:42:30.674: W/System.err(972): java.lang.NullPointerException
11-25 16:42:30.684: W/System.err(972):  at com.example.seminarska.Prevozi.onCreate(Prevozi.java:89)
11-25 16:42:30.684: W/System.err(972):  at android.app.Activity.performCreate(Activity.java:5008)
11-25 16:42:30.684: W/System.err(972):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1079)
11-25 16:42:30.684: W/System.err(972):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2023)
11-25 16:42:30.694: W/System.err(972):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2084)
11-25 16:42:30.694: W/System.err(972):  at android.app.ActivityThread.access$600(ActivityThread.java:130)
11-25 16:42:30.694: W/System.err(972):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1195)
11-25 16:42:30.731: W/System.err(972):  at android.os.Handler.dispatchMessage(Handler.java:99)
11-25 16:42:30.734: W/System.err(972):  at android.os.Looper.loop(Looper.java:137)
11-25 16:42:30.734: W/System.err(972):  at android.app.ActivityThread.main(ActivityThread.java:4745)
11-25 16:42:30.761: W/System.err(972):  at java.lang.reflect.Method.invokeNative(Native Method)
11-25 16:42:30.764: W/System.err(972):  at java.lang.reflect.Method.invoke(Method.java:511)
11-25 16:42:30.764: W/System.err(972):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:786)
11-25 16:42:30.764: W/System.err(972):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:553)
11-25 16:42:30.774: W/System.err(972):  at dalvik.system.NativeStart.main(Native Method) 
```

哦，我要解析的网站是[这个](https://prevoz.org/?f=&fc=SI&t=&tc=SI&d=0000-00-00#results)。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T16:27:02.150

```
String url = "http://www.google.com";
List<String> images = new ArrayList<String>();
Document doc = Jsoup.connect(url).get();
Elements img = doc.select("img");
for (Element el : img)
{
    String imageUrl = el.attr("src");
    images.add(imageUrl);
} 
```

# c++ - Visual C++ 2012 中的编译器错误？（混乱的跳转地址）

> ID：13552637
> 
> 赞同：3
> 
> 时间：2012-11-25T15:51:52.543
> 
> 标签：c++, visual-studio, visual-c++, compiler-construction

完全编译而不优化

```
void Add(T data)
{
    node<T> *pNode = new node<T>;
    pNode->m_pNext = NULL;
    pNode->m_data = data;

    uint32_t cPushes;
    uint32_t cPops;
    node<T> *pTail;

    while (true)
    {
        cPushes = m_cPushes;
        cPops = m_cPops;
        pTail = (node<T>*)m_pTail;
        if (cPushes != m_cPushes)
            continue;

        if (!pTail)
            if (CAS2(&m_pTail, NULL, cPushes, (uint32_t)pNode, cPushes +1))
                break;
        else if (CAS(&pTail->m_pNext, NULL, (uint32_t)pNode))
                break;
        else
            CAS2(&m_pTail, (uint32_t)pTail, cPushes, (uint32_t)pTail->m_pNext, cPushes + 1);
    }

    CAS2(&m_pHead, NULL, cPops, (uint32_t)pNode, cPops + 1);
    CAS2(&m_pTail, (uint32_t)pTail, cPushes, (uint32_t)pNode, cPushes + 1);
} 
```

反汇编：[http://pastebin.com/7EaH3whu](http://pastebin.com/7EaH3whu)（pastebinned 因为它很大，而且它以某种方式破坏了 SO 的代码标签）

如果你看一下，几乎每条跳转指令的地址都混淆了

例如，如果这个语句失败：'if (!pTail)'，而不是在 'else if' 处继续，它会跳回到循环的开头（实际上，它会跳转到跳转到环形）

完整代码： http: [//pastebin.com/U5qGgT0E](http://pastebin.com/U5qGgT0E)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-25T15:54:28.713

```
 if (!pTail)
        if (CAS2(&m_pTail, NULL, cPushes, (uint32_t)pNode, cPushes +1))
            break;
    else if (CAS(&pTail->m_pNext, NULL, (uint32_t)pNode))
            break;
    else
        CAS2(&m_pTail, (uint32_t)pTail, cPushes, (uint32_t)pTail->m_pNext, cPushes + 1); 
```

是真的

```
 if (!pTail) {
        if (CAS2(&m_pTail, NULL, cPushes, (uint32_t)pNode, cPushes +1)) {
            break;
        } else if (CAS(&pTail->m_pNext, NULL, (uint32_t)pNode)) {
            break;
        } else {
            CAS2(&m_pTail, (uint32_t)pTail, cPushes, (uint32_t)pTail->m_pNext, cPushes + 1);
        }
    } 
```

跳跃是这样做的吗？我打赌。

# javascript - javascript/css 覆盖内联块

> ID：13552639
> 
> 赞同：0
> 
> 时间：2012-11-25T15:51:59.727
> 
> 标签：javascript, css, block, cover

我在网页顶部有一些带有 css display:inline-block 属性样式的文本。我使用这个属性是因为它实现了我想要的布局目标。（实际代码比下面要复杂一些，块元素使它能够正确显示。）

但是，我现在为下拉菜单添加了一些 javascript 和 css，它应该覆盖下面的页面。它覆盖了下面的页面，除了上面显示的 inline-block 元素。

任何人都可以建议一种方法来覆盖这个元素。

这是我目前拥有的代码。

标头中的 javascript 和 css

```
<style type="text/css">
    #results {display: block;
        padding: 4px;
        position:absolute;
        text-align:left;
        border-top-style:none; 
        background-color:white;
        opacity:1.0;
        filter:alpha(opacity=100); 
    }
    .username {
        position:relative;
        display: inline-block;
    }
</style>

function search() {
    //retrieve input from webpage
    document.getElementById("results").innerHTML=xmlhttp.responseText; //populate results div
    //ajax to get resposetext from serve
} 
```

html

```
<table>
    <tr>
        <td>
            <input type="text" onkeyup="searh(this.value)">
            <div id="results" style="position:absolute"></div>
            <div class="username">Username</div>
        </td>
    </tr>
</table> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T15:56:07.587

尝试将`z-index`下拉菜单设置为较高的值，例如`9999`

# c# - 从文件中获取图像大小（以像素为单位）

> ID：13552640
> 
> 赞同：1
> 
> 时间：2012-11-25T15:52:02.177
> 
> 标签：c#, wpf

我是 C# 新手，我将构建一个小型应用程序作为个人挑战。我在应用程序中处理了很多图像，并且已经到了需要获取图像大小来计算它们的比例的地步。所有的图像都是 .png 格式（我最喜欢的图像格式有很多原因）。我如何能够从文件中返回以像素为单位的宽度和高度？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T17:07:40.903

此代码可以帮助您：

```
BitmapImage bit = new BitmapImage(new Uri(@"C:\myImage.png"));
var h = bit.PixelHeight;
var w = bit.PixelWidth; 
```

# c - 注册一个函数处理程序

> ID：13552642
> 
> 赞同：1
> 
> 时间：2012-11-25T15:52:10.273
> 
> 标签：c, signals

我不知道如何用这个赋值来做一个方法，`func`当信号`sig`作为参数给出时，它必须调用函数。

```
 void set_sig_handler(int sig,void (*func)(int)){ 
```

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T16:00:47.030

您可以使用[sigaction()](http://www.kernel.org/doc/man-pages/online/pages/man2/sigaction.2.html)，处理程序必须具有以下签名之一：

```
/* this one matches your function */
void (*sa_handler)(int);

/* use thhis one If SA_SIGINFO is specified */
void (*sa_sigaction)(int, siginfo_t *, void *); 
```

例子：

```
#include <signal.h>
....
void set_sig_handler(int sig, void (*func)(int))
{
    struct sigaction act= {0};

    /* set signal handler */
    act.sa_handler = func;

    if (sigaction(sig, &act, NULL) < 0) {
        perror ("sigaction");
        return 1;
    }
} 
```

# google-maps - 如何在谷歌地图api中从鼠标标记画线到固定点？

> ID：13552644
> 
> 赞同：0
> 
> 时间：2012-11-25T15:52:21.933
> 
> 标签：google-maps

**我想使用google maps api**从鼠标光标到固定点画一条线

 **我找到了那个代码...

我可以定义固定点，但我无法定义鼠标位置

```
<!DOCTYPE html>
<html>
<head>
<script
src="http://maps.googleapis.com/maps/api/js?key=AIzaSyCwID2UsBJvwVKEMx_U53brmIC8EOLsBFo&sensor=false">
</script>

<script>
 var bounds = new google.maps.LatLngBounds();
    var length = markers.length;
    for (var i = 0; i < length; i++) {
        bounds.extend(new google.maps.LatLng(markers[i].lat, markers[i].lng));
        map.fitBounds(bounds);
    }

var x=new google.maps.LatLng(52.395715,4.888916);
var stavanger=new google.maps.LatLng(markers[i].lat, markers[i].lng);
var london=new google.maps.LatLng(51.508742,-0.120850);

function initialize()
{
var mapProp = {
  center:x,
  zoom:4,
  mapTypeId:google.maps.MapTypeId.ROADMAP
  };

var map=new google.maps.Map(document.getElementById("googleMap"),mapProp);

var myTrip=[stavanger,london];
var flightPath=new google.maps.Polyline({
  path:myTrip,
  strokeColor:"#0000FF",
  strokeOpacity:0.9,
  strokeWeight:2
  });

flightPath.setMap(map);
}

google.maps.event.addDomListener(window, 'load', initialize);
</script>
</head>

<body>
<div id="googleMap" style="width:500px;height:380px;"></div>
</body>
</html> 
```

如何检索鼠标坐标？

例如 [http://apps.qiblalocator.com/ext/embed/?address=usa](http://apps.qiblalocator.com/ext/embed/?address=usa)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T16:23:23.823

您可以像这样检索鼠标坐标（假设您有一个元素 id 为“latlgn”的 div）。

```
 google.maps.event.addListener(map, "mousemove", function(pt) { 
      document.getElementById("latlgn").innerHTML = pt.latLng; 
    }); 
```

[从谷歌地图 api v3 组](https://groups.google.com/group/google-maps-js-api-v3/browse_thread/thread/26076491927f6c85)的这个线程中的示例**

# python - 使用 Flask 在 Heroku 上为 .htc 文件添加 MIME 类型

> ID：13552646
> 
> 赞同：2
> 
> 时间：2012-11-25T15:52:33.207
> 
> 标签：python, heroku, flask, pie-chart

我试图在我的 css 中包含 PIE.htc (http://www.css3pie.com/) 文件以解决 IE 中的一些问题。我包括这条线

```
behavior: url(/static/pie/PIE.htc); 
```

对于相关的类。这似乎没有加载。

从阅读中，似乎我需要添加 MIME 类型

```
text/x-component 
```

对于我使用 Flask 的 Heroku 应用程序上的 .htc 文件。

有人对如何做到这一点有任何想法吗？

谢谢。

更新：

我认为可能类似于以下内容的东西会起作用，但似乎不行。

```
@app.route('/PIE.htc')
def pie():
    handle = open('static/pie/PIE.htc','r+')
    return Response(handle, mimetype = 'text/x-component') 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T00:32:04.463

你的代码对我有用。这是我完整的测试应用程序：

```
import flask

app = flask.Flask(__name__)

@app.route('/')
def index():
    handle = open(__file__, 'r+') 
    return flask.Response(handle, mimetype='test/x-component')

if __name__ == "__main__":
    app.run(debug=True) 
```

`Content-Type: test/x-component`这在 HTTP 响应中为自己提供所需的标头。

运行我的测试应用程序：

```
(test)day@office:~/test$ python test.py
 * Running on http://127.0.0.1:5000/
 * Restarting with reloader 
```

在另一个终端中，使用[curl](http://curl.haxx.se/docs/manpage.html)仅针对标头发出 HEAD 请求：

```
day@office:~$ curl -Is http://127.0.0.1:5000/
HTTP/1.0 200 OK
Content-Type: test/x-component
Connection: close
Server: Werkzeug/0.8.3 Python/2.7.3
Date: Fri, 30 Nov 2012 00:29:39 GMT 
```

如果这在本地运行时也适用于您，那么它可能与 Heroku 运行时环境有关？我对 Heroku 不熟悉，但也许他们在反向代理后面运行您的应用程序，该代理使用未配置为处理的 Content-Types？

# jquery - 将“活动”类分配给父问题

> ID：13552648
> 
> 赞同：1
> 
> 时间：2012-11-25T15:52:53.887
> 
> 标签：jquery

我有一个三层深的菜单，我想要的是活动类在父 li 上，下面的代码在两个层次上工作，它显示顶部菜单项为活动的，下面的一个，但是当转到页面时在第三级 (ul ul ul li) 最后一个 ul 菜单中的所有列表项都处于活动状态。有任何想法吗。我对 jQuery 很陌生，所以请善待 ;-)

```
$(document).ready(function(){
  var path = location.pathname.substring(1);
  if ( path ) {
   $('#main_menu li a[href$="' + path + '"]').parents('li').addClass('active');
  }
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T16:28:36.730

编辑：啊，你想要最古老的祖先，所以在 parents() 之后添加 last()。

```
$('#main_menu li a[href$="' + path + '"]').parents('li').last().addClass('active'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-25T16:11:46.400

如果你想成为比当前父母更高的父母，你可以做 .parents('li').parents('li')。如果更高的父母有一个班级，例如`<li class="grandparents">`你可以使用 .closest('.grandparents')

# php - Wordpress 按类别列出与标签匹配的帖子？

> ID：13552653
> 
> 赞同：0
> 
> 时间：2012-11-25T15:53:23.970
> 
> 标签：php, wordpress-theming, wordpress

我需要按类别列出帖子，但仅限于具有给定标签（或标签）的帖子。到目前为止，我有以下代码，可以很好地列出按类别分组的所有帖子，但我不确定如何修改它以仅选择具有给定标签的帖子。我应该改变什么？

```
 <?php           
        // get all the categories from the database
        $cats = get_categories(); 

            // loop through the categries
            foreach ($cats as $cat) {
                // setup the cateogory ID
                $cat_id= $cat->term_id;
                // Make a header for the cateogry
                echo "<h2>".$cat->name."</h2>";
                // create a custom wordpress query
                query_posts("cat=$cat_id&post_per_page=100");
                // start the wordpress loop!
                if (have_posts()) : while (have_posts()) : the_post(); ?>

                    <?php // create our link now that the post is setup ?>
                    <a href="<?php the_permalink();?>"><?php the_title(); ?></a>
                    <?php echo '<hr/>'; ?>

                <?php endwhile; endif; // done our wordpress loop. Will start again for each category ?>
            <?php } // done the foreach statement ?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T16:24:22.527

您需要做的就是编辑您的查询以包含标签，即 `query_posts("cat=$cat_id&tag=tag1+tag1&showposts=100");`

请注意，您需要所有`tag1+tag1`

# text - 如何在textarea中垂直居中文本？

> ID：13552655
> 
> 赞同：6
> 
> 时间：2012-11-25T15:53:26.967
> 
> 标签：text, textarea, center, vertical-alignment, text-alignment

有没有办法垂直居中在已知宽度和高度的文本区域中输入的文本？我有一个固定大小的文本区域，应该在其中键入文本，并且我希望文本在您键入时从中心开始。水平居中可以用 text-align:center 完成，但我找不到任何水平对齐的方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-11-12T03:47:17.940

我认为您不能直接进行垂直对齐。您应该在文本区域上创建另一个 div 并使用它使文本垂直对齐，并将用户的输入输入到 textarea 并使用 JS 将其传输到 div。

并使 textarea 仅不可见。

# git - 如何将 git repo 从 Windows 迁移到 Linux？（CRLF - LF 问题）

> ID：13552658
> 
> 赞同：2
> 
> 时间：2012-11-25T15:53:41.757
> 
> 标签：git, newline, lf

我在一台 Windows 机器上启动了一个 git 仓库，然后我换成了一台 Linux 机器。一切正常，但每次我提交时，我都会收到警告`warning: CRLF will be replaced by LF in [file]`。我知道我可以关闭自动转换，但是有没有将所有行尾转换为 Linux 形式的命令？我不会再在 Windows 中使用这个项目了。提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-25T16:30:31.050

有一个 dos2unix 命令可以将文本文件从 dos 格式（使用 CR LF）更改为 unix 格式（仅使用 LF）。使用它，您可以轻松地执行类似的操作

```
dos2unix *.c *.h 
```

# c# - 转义换行符

> ID：13552661
> 
> 赞同：2
> 
> 时间：2012-11-25T15:53:50.173
> 
> 标签：c#, outlook, newline, icalendar

我正在尝试创建一个 Outlook 日历事件，但我的部分文本在 Outlook 中消失了。

```
private List<ICalEvent> _events;

public override void ExecuteResult(System.Web.Mvc.ControllerContext context)
{
    StringBuilder str = new StringBuilder();
    var _with1 = str;

    foreach (var _event in _events)
    {
        _with1.AppendLine("BEGIN:VCALENDAR");
        _with1.AppendLine("VERSION:2.0");
        _with1.AppendLine("BEGIN:VEVENT");
        _with1.AppendLine(string.Format("DTSTART:{0}", _event.start.ToUniversalTime().ToString("yyyyMMdd\\THHmmss\\Z")));
        _with1.AppendLine(string.Format("DTEND:{0}", _event.end.ToUniversalTime().ToString("yyyyMMdd\\THHmmss\\Z")));
        _with1.AppendLine(string.Format("SUMMARY:{0}", _event.summary));
        _with1.AppendLine(string.Format("DESCRIPTION:{0}", _event.description));
        _with1.AppendLine(string.Format("LOCATION:{0}", _event.location));
        _with1.AppendLine("END:VEVENT");
        _with1.AppendLine("END:VCALENDAR");
    }

    context.HttpContext.Response.ContentType = "text/calendar";
    context.HttpContext.Response.AddHeader("Content-disposition", string.Format("attachment; filename={0}", "newFile"));
    context.HttpContext.Response.Write(str.ToString());
} 
```

当我在`description`. 例如，如果它包含文本**“New\r\nLine”**，我只会在 Outlook 日历描述中看到“New”。**"\r\n"**之后的部分消失。

我已经尝试了所有这些但结果相同：

*   `_event.description.Replace("\r\n", "\n\n")`
*   `_event.description.Replace("\\", "\\\\")`
*   `_event.description.Replace("\r\n", Environment.NewLine)`

有人有类似的问题吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-25T16:41:39.410

您需要在行尾写上 '=0D=0A'。

# objective-c - 如何使用 NSDictionnary 中包含的数据在 UItableView 中添加行？

> ID：13552668
> 
> 赞同：1
> 
> 时间：2012-11-25T15:54:19.130
> 
> 标签：objective-c, uitableview, nsdictionary

我想管理与消息的聊天（作为本机 iphone 应用程序），其中第一次只显示十条消息。然后，我希望能够在 UItableview 中加载和显示其他十条消息。我找到了一种在数组中添加对象的方法，然后在 tableView 中添加对象：

```
-(IBAction)addCity:(id)sender
{
    [dataArray addObject:@"City"];
    NSArray *paths = [NSArray arrayWithObject:[NSIndexPath indexPathForRow:[dataArray count]-1 inSection:1]];
    [[self tableView] insertRowsAtIndexPaths:paths withRowAnimation:UITableViewRowAnimationTop];
    [tableView reloadData];
} 
```

但我的数据包含在 NSDictionnary（头像、消息、名称）中。我可以对 NSDictionnary 使用相同的方法吗？如何 ？还有其他方法吗？

感谢大家的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-25T16:11:39.437

基本问题是，当您被要求提供单元格信息时，您必须能够使用两个数字找到它：一个数字与表中的某个部分匹配，另一个与该部分中的一行匹配。字典不太擅长按数字查找内容。数组是。

从您所写的内容来看，听起来每条消息都在字典中。这表明 - 假设您的表格只有一个部分 - 您需要一个字典数组，以便可以通过行号找到字典，然后将消息部分放入表格单元格中。

# android - 阿拉伯数字显示不正确

> ID：13552675
> 
> 赞同：2
> 
> 时间：2012-11-25T15:55:08.530
> 
> 标签：android, arabic

我正在使用阿拉伯语文本。我使用阿拉伯语 Reshaper，reshaper 不会正常显示数字。你能帮我们解决这个问题吗 ![在此处输入图像描述](../Images/2ae7180d04093dcf7ecdcf8fea3e1c89.png)

我用[这个](https://github.com/agawish/Better-Arabic-Reshaper/tree/master/src/org/amr/arabic)整形器

```
 View v = inflater.inflate(R.layout.ebookfragment, container,false);
            Typeface typeface = Typeface.createFromAsset(getActivity().getAssets(),"pdms_islamicfont1.2.ttf");
            tv = (TextView ) v.findViewById(R.id.tv);
            tv.setTypeface(typeface);

            tv.setBackgroundColor(Color.WHITE);
    //        tv.setGravity(Gravity.RIGHT);
            tv.setTextColor(Color.BLACK);
            tv.setTextSize(textSize);

            Spanned spanned = Html.fromHtml("<p> ٣١  عَنْ أَبِي هُرَيْرَةَ  </p>");
            tv.setText(ArabicUtilities.reshape(spanned.toString())); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-10-29T12:39:56.417

我找到了这个：

```
String filename = 123.doc
String message = string1 + "\u202A" + fileName + "\u202C" + string2; 
```

其中 string1 和 string2 是 RtL 语言中的字符串。

# c# - 我的程序创建的数据库在哪里？

> ID：13552684
> 
> 赞同：0
> 
> 时间：2012-11-25T15:56:01.747
> 
> 标签：c#, .net, database, configuration, sql-server-express

我有一个 ASP .NET MVC 应用程序。“MovieDBContext”是控制器的一种方法，它返回有关视图中电影列表的一些基本信息。我知道数据库正在工作，因为我可以使用 Code First 和 Entity Framework 输入新电影并删除它们等。

这是 web.config 文件连接设置：

```
<configuration>
  <connectionStrings>
    <add name="MovieDBContext"
        connectionString="data source=.\SQLEXPRESS;Integrated Security=SSPI;database=MvcMovie;AttachDBFilename=|DataDirectory|aspnetdb.mdf;User Instance=true"
        providerName="System.Data.SqlClient" />
    <add name="ApplicationServices"
         connectionString="data source=.\SQLEXPRESS;Integrated Security=SSPI;AttachDBFilename=|DataDirectory|aspnetdb.mdf;User Instance=true"
         providerName="System.Data.SqlClient" />
  </connectionStrings> 
```

我在 SQL Server Management Studio 中查看了我的数据库列表，但它不存在。我在 Visual Studio 2010 中单击了 App_Data 文件，但这并没有打开任何数据库。我想要一种方法来查看数据库中的数据，而不是通过程序本身，最好是管理工作室。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-25T16:01:56.460

数据库文件将在`App_Data`文件夹中创建。这将在您开始向其写入内容时发生，而不是在应用程序运行时发生。例如，如果您注册一个新用户，则将创建数据库文件。

# objective-c - components:NSQuarterCalendarUnit 给出两个日期之间的总季度数？

> ID：13552689
> 
> 赞同：0
> 
> 时间：2012-11-25T15:56:25.730
> 
> 标签：objective-c, nsdate, nsdatecomponents

```
 NSDateComponents *result = [[NSCalendar currentCalendar] components:NSQuarterCalendarUnit fromDate:start toDate:end options:0];

      NSInteger numberOfQuaters = [result quarter]; 
```

为什么这段代码总是返回 0 ？

那不应该给我 NSDate start 和 NSDate end 之间的季度数吗？

例如，如果开始是 2012 年 1 月 1 日，结束是 2013 年 6 月 3 日，我应该有 numberOfQuarters = 6

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-01T14:44:13.773

我找到了这个解决方案，而奇怪的 Apple 错误仍然存​​在：

> numberOfQuarters = (4 - startQuarter) + ((endYear -1 - startYear) * 4) + endQuarter;

# r - 每隔一行读取 ASCII 数据文件

> ID：13552690
> 
> 赞同：0
> 
> 时间：2012-11-25T15:56:37.720
> 
> 标签：r, dataframe

我有一个文本文件

*   25行标题信息
*   变量名的标题行
*   每隔一行一个空行

数据集可以在[这里](http://www.jmulti.de/download/datasets/GermanM1System.dat)找到。如何将这些数据读入 R data.frame？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-25T16:01:28.190

`read.table`自动忽略空行。所以这应该工作：

```
read.table("http://www.jmulti.de/download/datasets/GermanM1System.dat",skip=27,header=TRUE) 
```

# javascript - Javascript/Html ReplaceChild Url btn

> ID：13552692
> 
> 赞同：-1
> 
> 时间：2012-11-25T15:56:40.240
> 
> 标签：javascript, html

代码可以在以下位置查看：

```
 http://fxv4.com/js/java.html 
```

（来源：查看源：http://fxv4.com/js/java.html）

问题是里面的代码不会改变url。问题不大，但是如果您删除标签，该功能将不起作用。倒计时也不行。我只想让 js btn 中的 url 像普通的提交/js btn 一样隐身。

我很感激任何帮助，谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-25T16:20:46.310

您必须重新排列代码并了解 HTML/JS 的基础知识。请记住以下几点：

1.  您应该只将 HTML 元素`<body>`放在`head`.
2.  更改 HTML 元素的 JavaScript 代码必须在 DOM 文档加载后执行。

例子：

```
<html>
  <head>
    <script type="text/javascript">

      // (2) Run JavaScript after DOM document has loaded.

      window.onload = function() {

          var message = document.getElementById('message');
          var button = document.getElementById('button');
          var counter = 5;

          var interval = setInterval(function() {
              if (counter === 0) {
                  button.style.display = 'block';
                  message.style.display = 'none';
                  clearInterval(interval);
              }
              message.innerHTML = 'You can view the url in ' + (counter--) + ' seconds.';
          }, 1000);

          button.onclick = function() {
              window.location = 'http://google.ch/';
          };

      };​

    </script>
    <style type="text/css">
      button { display:none; }​
    </style>
  </head>
  <body>
    <!-- (1) HTML element live inside the body. -->
    <span id="message">...</span>
    <button id="button">Visit Page Now</button>​
  </body>
</html> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-25T16:02:46.227

您当前的代码：

```
<a href="http://fxv4.com/js/java.html" id="download" class="button"> 
  <button onclick="window.location='http://URL undefined';">Visit Page Now</button>
</a> 
```

添加到按钮onclick返回语句false，所以点击事件不会被发送到父元素：

```
<a href="http://fxv4.com/js/java.html" id="download" class="button"> 
  <button onclick="window.location='http://URL undefined';return false">Visit Page Now</button>
</a> 
```

# xtext - 当我使用 xText 基于以前的元模型编写模型时，如何解决此错误？

> ID：13552693
> 
> 赞同：0
> 
> 时间：2012-11-25T15:56:45.543
> 
> 标签：xtext, metamodel

我在 xText 项目中编写了这个元模型：

```
Screen:
"Screen name: " name = ID
    "Level: " level = STRING
    "End: " end = INT
    background = [Background]
    character = [Character]
    (enemies+=Enemy)*
    (elements+=Element)*

Background:
"Background{
    Id: " id = ID
    "Image: " image = [Image]
"}";
... 
```

您在那里看到的所有元类（背景、角色、敌人等）我在 ecore 中创建元模型没有任何问题，但是当我尝试定义这样的特定模型时（使用 Ctrl+Space）：

```
Screen name: s1
Level: "easy"
End: 1000 
```

我收到一个错误：**预期 RULE_ID 的 INPUT 不匹配**，我无法继续使用 Ctrl+Space 进行写入。任何想法为什么这不起作用？谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-25T19:04:46.163

语法片段的问题是对交叉引用和包含引用的误解。您没有在示例文件中的某处定义背景，但语法需要对背景的引用。如果您将定义更改为以下内容，它将起作用：

```
Screen:
"Screen name: " name = ID
    "Level: " level = STRING
    "End: " end = INT
    background = Background
    character = Character
    (enemies+=Enemy)*
    (elements+=Element)*

Background:
"Background{
    Id: " id = ID
    "Image: " image = [Image]
"}"; 
```

但是，我希望您实际上想要在给定屏幕中使用交叉引用而不是包含背景。因此，在屏幕中使用它之前，您必须提供完整的语法或定义背景。

# c - 程序不会打印 txt 文件中的所有行

> ID：13552698
> 
> 赞同：0
> 
> 时间：2012-11-25T15:57:35.433
> 
> 标签：c, printf, scanf

编写了这个程序，它应该能够打印出 txt 文件中的所有行，但它只打印一个，现在已经看了 1 个小时，我找不到错误，任何帮助都会得到帮助！:)

1 16.07.2011 吉隆坡。17.00 OB - FCN 2 - 0 6.965
1 17.07.2011 kl。14.00 FCM - SIF 1 - 2 5.370
1 17.07.2011 kl。16.00 ACH - HBK 3 - 0 2.227
1 17.07.2011 kl。16.00 SDR - FCK 0 - 2 4.992
前 4 行。

```
#include <stdio.h>
#include <stdlib.h>
#define MAX_LINE_LGT 200
#define NAME_MAX 200
#define TEAM_MAX 200

struct team{
char name[NAME_MAX];
int five_or_more_goals;
};
typedef struct team team;

void read_data_1(const char *file_name, team teams[]){
FILE *ifp;
char team1[NAME_MAX];
char team2[NAME_MAX];
int goal1, goal2;
int dag, month, year;
double clock;
int attendance;
int round;
team local_match;

ifp = fopen(file_name, "r");

while (fscanf(ifp, "%d %d.%d.%d kl. %lf %4s - %4s %d - %d %d\n", &round, &dag, &month, &year, &clock, team1, team2, &goal1, &goal2, &attendance) == 10){
    printf("runde %d den %d %d %d klokken %.2lf, mellem %s og %s endte %d - %d %d så kampen\n", round, dag, month, year, clock, team1, team2, goal1, goal2, attendance);
    }

fclose(ifp);

   }

  int main(void) {
  team all_matches_teams[TEAM_MAX];
  read_data_1("superliga-2011-2012", all_matches_teams);

 return 0;
 } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T16:56:16.293

您在每行输入末尾的出勤值导致您出现问题。您需要将其解析为浮点数或由句点分隔的两个小数，而不仅仅是一个小数。它应该与下面的代码更改一起工作，假设出席率永远不会达到一百万：

```
int valuesRead;
int attendance;
int attend1, attend2;
[...]
while ((valuesRead = fscanf(ifp, "%d %d.%d.%d kl. %lf %4s - %4s %d - %d %d.%d\n", &round, &dag, &month, &year, &clock, team1, team2, &goal1, &goal2, &attend1, &attend2)) >= 10){
    if (valuesRead == 11)
        attendance = attend1 * 1000 + attend2;
    else
        attendance = attend1;
    printf("runde %d den %d %d %d klokken %.2lf, mellem %s og %s endte %d - %d %d så kampen\n", round, dag, month, year, clock, team1, team2, goal1, goal2, attendance);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-25T17:13:01.887

感谢您的输入，我现在可以正常工作了，只需将出勤变量更改为双精度，它就可以正常工作，再次提供代码，如果有人有任何技巧可以更聪明地编写它，请告诉我！:)

```
#include <stdio.h>
#include <stdlib.h>
#define MAX_LINE_LGT 200
#define NAME_MAX 200
#define TEAM_MAX 200

struct team{
char name[NAME_MAX];
int five_or_more_goals;
};
typedef struct team team;

void read_data_1(const char *file_name, team teams[]){
FILE *ifp;
char team1[NAME_MAX];
char team2[NAME_MAX];
int goal1, goal2;
int dag, month, year;
double clock;
double attendance;
int round;
team local_match;

ifp = fopen(file_name, "r");

while (fscanf(ifp, "%d %d.%d.%d kl. %lf %4s - %4s %d - %d %lf\n", &round, &dag, &month, &year, &clock, team1, team2, &goal1, &goal2, &attendance) == 10){
    printf("runde %d den %d %d %d klokken %.2lf, mellem %s og %s endte %d - %d %.3lf så kampen\n", round, dag, month, year, clock, team1, team2, goal1, goal2, attendance);
    }

fclose(ifp);

    }

  int main(void) {
  team all_matches_teams[TEAM_MAX];
  read_data_1("superliga-2011-2012", all_matches_teams);

  return 0;
  } 
```

# javascript - 使用 Deferreds 获取位置并显示地图

> ID：13552703
> 
> 赞同：1
> 
> 时间：2012-11-25T15:58:05.417
> 
> 标签：javascript

我试图用一个（我认为是一个）简单的例子来理解 Revealing Module Pattern 和 jQuery Deferreds。

我想要做的是调用一个模块来获取用户的位置，以及该调用*何时以及是否*成功在谷歌地图上显示该位置。

这两个操作本身使用一堆函数和回调对我来说没有问题，但我试图以更“馄饨”而不是“意大利面条”的方式来做。

我发现虽然 deferred 运行良好，但我的模块的公共属性不包含我在操作期间设置的值以获取位置。

这是我的“地理模块”

```
var geoModule = function () {
    var lat;
    var lng;

    var init = function () {
    return $.Deferred(function (def) {
        getCurrentPositionDeferred({})
        .fail(function () { def.reject(); })
        .done(function (location) {
            lat = location.coords.latitude;
            lng = location.coords.longitude;
            logger.log("Got location : " + lat + " : " + lng);
            def.resolve();
        });
    }).promise();
    };

    var getCurrentPositionDeferred = function(options) {
    var deferred = $.Deferred();

    navigator.geolocation.getCurrentPosition(deferred.resolve, deferred.reject, options);

    return deferred.promise();
    };

    return { lat: lat, lng: lng, init: init };
}(); 
```

这是我的'mapModule'

```
var mapModule = function (mapId) {
    var mapElement = document.getElementById(mapId);
    var map;
    var initMap = function (lat, lng) {
    logger.log("init map: " +lat + " : " + lng);
    var myOptions = {
        zoom: 14,
        center: new google.maps.LatLng(lat, lng),
        mapTypeId: google.maps.MapTypeId.ROADMAP
    };

    map = new google.maps.Map(mapElement, myOptions);
    };

    return { initMap: initMap };
}('map'); 
```

当我像这样把它们放在一起时：

```
$.when(geoModule.init())
    .done(function () {
        logger.log("location done " + geoModule.lat + " : " + geoModule.lng);
        mapModule.initMap(geoModule.lat, geoModule.lng);
    }); 
```

geoModule.lat 和 geoModule.lng 未定义，即使在 geoLocation 中设置它们的代码运行成功。

我在[http://jsfiddle.net/faG4J/4/](http://jsfiddle.net/faG4J/4/)创建了一个完整的示例，显示了日志输出。我可能正在做一些非常愚蠢的事情，所以任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T18:32:59.930

您设置的那些变量不是模块的属性 - 它们只是局部变量。*您已将它们的值*导出到模块对象，但有一次没有设置它们。

但是，这根本不是您应该这样做的方式。不要对正在设置的某些对象的某些属性做出承诺，而是对这些值做出承诺。

由于只有一个功能的模块对我来说似乎毫无用处，我在这里省略了它们：

```
function getPosition() {
    var deferred = $.Deferred();
    navigator.geolocation.getCurrentPosition(deferred.resolve, deferred.reject);
    // pipe the output of the deferred through this logging and transformation function
    return deferred.then(function (location) {
        var lat = location.coords.latitude;
        var lng = location.coords.longitude;
        logger.log("Got location : " + lat + " : " + lng);
        return {lat: lat, lng: lng};
    });
} 
```

然后使用类似`getPosition.done(createMap)`.

# javascript - 如何在 JavaScript/HTML5 上收听重复的键盘输入而不暂停？

> ID：13552708
> 
> 赞同：3
> 
> 时间：2012-11-25T15:58:37.597
> 
> 标签：javascript, html

我知道`keypress`即使在 上也有这个`Window`，如果你按住键，它会重复，但在重复开始之前它会有轻微的停顿。我不想要这种停顿。我正在编写一个游戏，我希望玩家立即做出反应，而不是在暂停之后。

处理基于网络的游戏的键盘事件的首选方法是什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-25T16:30:44.587

听“keydown”，而不是“keypress”。Keydown 会不断触发，直到您放手为止。

***但：***

不要只做类似的事情：

```
window.addEventListener("keydown", function (evt) {
    if (evt.keyCode === 32) { player.fire(); }
}); 
```

你最终会发现有些人每秒发射 15 次，有些人每秒发射 60 次，甚至有些人每秒发射 120 次。

相反，有一个 Keyboard 对象，它在 n 事件触发时随时更新：

```
var Keyboard = {
    keys : {},
    keyPress : function (evt) {
        if (this.keys[evt.keyCode] > 0) { return; }
        this.keys[evt.keyCode] = evt.timeStamp || (new Date()).getTime();
    },
    keyRelease : function (evt) {
        this.keys[evt.keyCode] = 0;
    }
};
window.addEventListener("keydown", Keyboard.keyPress.bind(Keyboard));
window.addEventListener("keyup", Keyboard.keyRelease.bind(Keyboard)); 
```

然后，在你的更新周期中，让角色检查`Keyboard`它想要的密钥。
作为额外的奖励，他们的键有一个第一次按下的时间戳，以防你想添加充电镜头，或者按住按钮跳得更高。

然后，您的单位应该在他们自己的更新区域内跟踪诸如允许他们多久开火的频率，以及最后一次是什么时候。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-25T16:03:00.813

正如史蒂夫所说，这是不可能的。您应该监听 keydown / keyup 事件并跟踪按下了哪些按钮：

```
var pressedKeys = {};
$(window)
    .bind("keydown", function(e) {
        pressedKeys[e.keyCode] = true;
    })
    .bind("keyup", function(e) {
        delete pressedKeys[e.keyCode];
    })
; 
```

我认为对于游戏来说，在某处处理所有这些事件的主循环很常见：

```
setInterval(function() {
    if (pressedKeys[38]) { // if up is pressed
        // do stuff
    }
}, 50); 
```

# android - ADB 无法在 debian 上运行

> ID：13552715
> 
> 赞同：0
> 
> 时间：2012-11-25T15:59:43.747
> 
> 标签：android, debian, port, adb, x86-64

我正在使用 debian wheezy amd64，我无法启动`ADB`。我知道关于这些主题有几个线程，但这些试验都没有成功。

我总是有相同的结果：

```
`---> sudo ./adb start-server
<br> 
* daemon not running. starting it now on port 5037 *
<br>
cannot bind 'tcp:5037'
<br>
ADB server didn't ACK
<br>
* failed to start daemon *` 
```

端口 5037 上没有运行任何东西。我检查了`netstat -a`没有任何 adb 进程`ps aux | grep adb`

通行证出口良好。我对 adb 文件有很好的权利。我不知道该怎么办了。

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T23:59:54.847

如果只需要 ADB，可以试试 Debian 包[`adb`](http://packages.debian.org/adb)（原 android-tools-adb）。

主要优点是这个 ADB 是从您运行平台的源代码编译的（我想是 amd64）。因此，您不会有任何“32 位库”问题。

# haskell - 使用 Haskell / Persistent 连接到 Sqlite3 数据库

> ID：13552721
> 
> 赞同：3
> 
> 时间：2012-11-25T16:00:19.910
> 
> 标签：haskell, sqlite, libraries, hackage

请原谅这个问题有多简单。

谷歌搜索、[文档](http://hackage.haskell.org/package/persistent)和[Yesod 书似乎只解释了如何](http://www.yesodweb.com/book/persistent)*使用*数据库做事，但我还没有看到关于如何实际*连接*到数据库的直接解释。

任何正确方向的帮助或指导将不胜感激。

**编辑**：我[简化了](http://subtlearray.tumblr.com/post/43845818836)Yesod 书中的代码示例，使其更易于阅读和使用。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-25T16:18:44.610

持久包的“主页”有一个示例显示如何连接到 sqlite 的内存实例：

[http://www.yesodweb.com/book/persistent](http://www.yesodweb.com/book/persistent)

似乎您只需要更改`withSqliteConn`通话即可。

# r - 查找最接近整数列表的值

> ID：13552725
> 
> 赞同：1
> 
> 时间：2012-11-25T16:00:50.470
> 
> 标签：r, function

我怎样才能创建一个向量`S`，

`S[i] = 1, if Tv[i]`是最接近整数的数`I<- 6:10` `S[i] = 0 else`

```
Tv <- c(5.946, 5.978, 
6.01, 6.043, 6.075, 6.109, 6.14, 6.173, 6.205, 6.239, 
6.273, 6.309, 6.344, 6.379, 6.415, 6.45, 6.486, 6.521, 6.556, 
6.59, 6.627, 6.665, 6.703, 6.741, 6.778, 6.816, 6.852, 6.891, 
6.928, 6.967, 7.005, 7.045, 7.084, 7.124, 7.161, 7.202, 7.24)

S <- getS(Tv)

> dput(S) 
c(0, 0, 1, 0, 0 ....) 
```

最终目标是有一个像尺子一样的列表，`1`其中的值最接近下一个整数值。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-25T16:18:21.533

这是一种方法：

```
I <- 6:10
S <- numeric(length(T))
S[sapply(I, function(i) which.min(abs(i - T)))] <- 1
S
[1] 0 0 1 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 1 0 0 0 0 0 1 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-25T16:30:28.540

这不需要你给`I`，而只是查找最接近最接近整数的值：

```
test <- c(5.946, 5.978,6.01, 6.043, 6.075, 6.109, 6.14, 6.173, 6.205, 6.239, 6.273, 6.309, 6.344, 6.379, 6.415,
       6.45, 6.486, 6.521, 6.556, 6.59, 6.627, 6.665, 6.703, 6.741, 6.778, 6.816, 6.852, 6.891,
       6.928, 6.967, 7.005, 7.045, 7.084, 7.124, 7.161, 7.202, 7.24)

res <- integer(length(test))
res[abs(test-round(test)) %in% c(by(test,round(test),
                                    FUN=function(test) min(abs(test-round(test)))))] <- 1
#[1] 0 0 1 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 1 0 0 0 0 0 0 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-25T16:34:45.483

一条线解决方案

```
diff(floor(c(T[1],T))) 
```

# database - 如何对 GPS 坐标进行分组以表示一个特定的 GPS 位置（数据挖掘）

> ID：13552726
> 
> 赞同：0
> 
> 时间：2012-11-25T16:00:58.677
> 
> 标签：database, gps, data-mining, k-means, nearest-neighbor

我有一个场景：我有一些 GPS 轨迹（经度、纬度）的数据，这些数据包含在 2 个部分中

第一部分包含作为旅程站的数据（经度和纬度）（这些是实际坐标，必须在巴士开始旅程时访问它们）

第二部分包含 GPS 坐标（经度和纬度），但可能是第一部分的 2 倍。每次巴士开始行程时，它都会停止这些车站（已给出坐标）。我想比较那辆公共汽车是否完成了它的旅程，或者不是通过比较它访问过的 GPS 站（实时坐标）与第一部分（预定坐标）。

## 但我的问题：

我在第二部分几乎有双坐标，所有坐标都非常接近，几乎 5-8 个坐标代表同一个站点..（例如 104578,105888）和（104579,105890）

什么是正确和可能的方式来宣布某些坐标代表同一个电台。这个问题可能可以通过某种方式使用 K 最近邻或 K 均值来解决。

这个问题似乎没有很好的定义..但我认为在查询时我会尝试解释更多。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T18:13:27.443

您可以将空间索引与 lat lng 对一起使用。然后，您可以在曲线上寻找接近点并将它们组合在一起。空间索引通常是空间填充曲线或四叉树。它使用四键来索引 2 维并将其减少到 1 维。它还保留了一些空间信息，可以用于许多事情。在 Nick 的空间索引四叉树 hilbert 博客中了解更多信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-25T16:20:21.193

可能使用缓冲区创建第二部分坐标的凸包多边形，因此它需要更大的区域，因此您可以考虑 GPS 错误并在多边形搜索中进行点。

或者只是使用以预定点为中心的半径距离。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-25T19:06:50.640

您是否考虑过使用简单的**阈值**方法？即合并一定距离内的坐标？看起来你很能选择这样的阈值。

聚类的问题在于它会尝试**发现**数据集中的结构。

您似乎感兴趣的是简单合并一定距离内的对象。没有你想发现的“结构”。您想要进行预处理，而不是聚类。

# android - GoogleTV 从状态栏通知调用另一个应用程序

> ID：13552731
> 
> 赞同：1
> 
> 时间：2012-11-25T16:01:35.063
> 
> 标签：android, google-tv

我是 Android GoogleTV 开发的新手。我的要求是我在后台运行的一项服务将为用户提供状态栏通知。从状态栏通知中，当用户单击它时，另一个内置应用程序/内置 chrome 浏览器（带有预定义的 URL）应该启动。

这可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T02:32:41.503

是的 - 当用户点击您的通知时，它可以启动您想要的任何意图。这是使用`Notification.Builder.SetContentIntent()`它可以是任何应用程序的意图来完成的。

# batch-file - ImageMagick 批处理文件停止工作

> ID：13552732
> 
> 赞同：2
> 
> 时间：2012-11-25T16:01:53.743
> 
> 标签：batch-file, imagemagick

我和另一个家伙正在尝试共同编写一个批处理文件，该文件将使用 ImageMagick 命令执行各种图像操作。

我们让它工作，我决定把它移到硬盘上的另一个位置。突然之间，脚本不再工作了。

它会创建“已修改”文件夹，但不执行图像转换。我可以从命令提示符执行转换命令，但不能使用脚本。

我换了电脑，过了一会儿又出现了！

我不知道发生了什么。我试图：

*   将其移回原始位置
*   按照 IT 人群中 Roy 的建议重新启动计算机
*   重新安装 ImageMagick
*   向 IT 上帝祈祷（他可能有很多名字：Gates、Jobs、Thorvald、null 等）

一点成功都没有！请帮助我提供任何有用的提示！

**环境：**

视窗 7 64 位

ImageMagick 6.8.0-6 Q16

**批处理文件具有以下内容：**

```
@echo off
    :: Drag and drop a folder of images on the BAT-file.
    :: A 

    Setlocal enabledelayedexpansion

    :: Removes the last slash if given in argument %1
    Set "Dir=%~1"
    IF "%DIR:~-1%" EQU "\" (Set "Dir=%DIR:~0,-1%")

     :: Create the output folder if don't exist
        MKDIR ".\modified" 2>NUL

  :: Set maximium image height
  SET /A "newHeight=780"

  :: Set portrate extent width
  SET /A "portrateWidth=585"

    :: Read all the png and jpg images from the directory
    FOR %%f IN ("%dir%\*.tif" "%dir%\*.jpg") DO (

        :: Set the variable width to the image width
        For /F %%# in ('identify -ping -format "%%[fx:w]" "%%f"') Do (SET /A "width=%%#")

        :: Set the variable height to the image height
        For /F %%# in ('identify -ping -format "%%[fx:h]" "%%f"') Do (SET /A "height=%%#")

        :: Check if the photo is portrate or landscape and run the relavant code
        IF  !height! LSS !width!  (
            convert "%%f" -trim -resize x!newHeight! "modified\%%~nf.jpg"
        ) ELSE (

  :: Only resize if height is over 780
  IF  !height! LSS !newHeight! (

            :: Calculation for portrate extent width
            SET /A "newWidth=!height! * 3/4"
            convert "%%f" -trim -resize x!height! -background blue -gravity center -extent !newWidth!x!height! "modified\%%~nf.jpg"
  ) ELSE (
   convert "%%f" -trim -resize x!newHeight! -background blue -gravity center -extent !portrateWidth!x!newHeight! "modified\%%~nf.jpg"
   )
            )
        )

PAUSE&EXIT 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-29T06:54:31.633

如果用括号括起来，set 命令将不起作用。还更改为 REM 而不是评论的双引号。

```
@echo off
Setlocal enabledelayedexpansion

REM Drag and drop a folder of images on the BAT-file.
REM A 

REM Set directory to that of dragged file
Set Dir=%~dp1

REM Create the output folder if don't exist
MKDIR "%~dp0modified" 2>NUL

REM Set maximium image height
SET /A "newHeight=780"

REM Set portrate extent width
SET /A "portrateWidth=585"

REM Read all the png and jpg images from the directory
FOR %%f IN ("%Dir%*.tif" "%Dir%*.jpg") DO (

REM Set the variable width to the image width
For /F %%# in ('identify -ping -format "%%[fx:w]" "%%f"') Do (SET /A "width=%%#")

REM Set the variable height to the image height
For /F %%# in ('identify -ping -format "%%[fx:h]" "%%f"') Do (SET /A "height=%%#")

REM Check if the photo is portrate or landscape and run the relavant code
IF  !height! LSS !width!  (
    convert "%%f" -trim -resize x!newHeight! "%~dp0modified\%%~nf.jpg"
) ELSE (

REM Only resize if height is over 780
    IF  !height! LSS !newHeight! (
        REM Calculation for portrate extent width
        SET /A "newWidth=!height! * 3/4"
        convert "%%f" -trim -resize x!height! -background blue -gravity center -extent !newWidth!x!height! "%~dp0modified\%%~nf.jpg"
    ) ELSE (
        convert "%%f" -trim -resize x!newHeight! -background blue -gravity center -extent !portrateWidth!x!newHeight! "%~dp0modified\%%~nf.jpg"
        )
    )
)

PAUSE&EXIT 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-25T16:23:52.870

A folder dropped on the batfile never end with a slash so you can delete that part.

Try this:

```
@echo off
Setlocal enabledelayedexpansion

:: First of all sets the imagemagick directory!
PUSHD "C:\IMAGEMAGICK DIRECTORY"

:: Drag and drop a folder of images on the BAT-file.
:: A 

REM :: Removes the last slash if given in argument %1
REM Set "Dir=%~1"
REM IF "%DIR:~-1%" EQU "\" Set "Dir=%DIR:~0,-1%"

:: Create the output folder if don't exist
MKDIR "%~dp0modified" 2>NUL

:: Set maximium image height
SET /A "newHeight=780"

:: Set portrate extent width
SET /A "portrateWidth=585"

:: Read all the png and jpg images from the directory
FOR %%f IN ("%~1\*.tif" "%~1\*.jpg") DO (

    :: Set the variable width to the image width
    For /F %%# in ('identify -ping -format "%%[fx:w]" "%%f"') Do (SET /A "width=%%#")

    :: Set the variable height to the image height
    For /F %%# in ('identify -ping -format "%%[fx:h]" "%%f"') Do (SET /A "height=%%#")

    :: Check if the photo is portrate or landscape and run the relavant code
    IF  !height! LSS !width!  (
        convert "%%f" -trim -resize x!newHeight! "%~dp0modified\%%~nf.jpg"
    ) ELSE (

    :: Only resize if height is over 780
        IF  !height! LSS !newHeight! (
            :: Calculation for portrate extent width
            SET /A "newWidth=!height! * 3/4"
            convert "%%f" -trim -resize x!height! -background blue -gravity center -extent !newWidth!x!height! "%~dp0modified\%%~nf.jpg"
        ) ELSE (
            convert "%%f" -trim -resize x!newHeight! -background blue -gravity center -extent !portrateWidth!x!newHeight! "%~dp0modified\%%~nf.jpg"
        )
    )
)

PAUSE&EXIT 
```

# java - 通过 VPN 访问 Java Web 服务客户端

> ID：13552735
> 
> 赞同：0
> 
> 时间：2012-11-25T16:01:57.833
> 
> 标签：java, web-services, vpn

我试图通过 VPn 访问 Web 服务，并且我的管理连接被拒绝。我可以 ping 地址，如果我不使用 VPN，我可以访问 Web 服务，但是这样我不能。当我在 VPN 中时，我需要做些什么吗？代码如下..

ps:SoapUI 也有同样的错误

> 块引用

```
 HelloWorldService stub = new HelloWorldServiceLocator();
    HelloWorld req = stub.getHelloWorld();
    req.hello(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-25T16:34:51.703

这与 java web 服务无关。这是一个网络问题。如果您在使用 VPN 时无法 ping 计算机，您应该查看您的网络拓扑和路由。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-12T08:52:15.043

某些 VPN（例如 CheckPoint Endpoint Security）会覆盖用户路由表并路由到不同的主机（特别是如果它在私有范围内），或者当您尝试从 VPN 访问它们时可能不可用。

# algorithm - 将 HyperLogLog 应用于总体样本

> ID：13552736
> 
> 赞同：14
> 
> 时间：2012-11-25T16:01:59.730
> 
> 标签：algorithm, estimation, hyperloglog, cardinality-estimation

Flajolet 等人的[HyperLogLog](http://algo.inria.fr/flajolet/Publications/FlFuGaMe07.pdf) 算法描述了一种仅使用少量内存来估计集合基数的巧妙方法。但是，它确实在计算中考虑了原始集合的所有 N 个元素。如果我们只能访问原始 N 的一小部分随机样本（例如 10%）怎么办？有没有研究过 HyperLogLog 或类似算法如何适应这种情况？

我知道这本质上是描述为*不同价值估计*的问题，对此存在大量研究（例如，请参阅[本文](http://www.vldb.org/conf/1995/P311.PDF)以获取概述）。然而，据我所知，对不同价值估计的研究使用了许多与 HyperLogLog 使用的方法非常不同的临时估计器。因此，我想知道是否有人已经考虑过将 HyperLogLog 用于不同的值估计问题。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-06T23:17:29.977

> 然而，据我所知，对不同价值估计的研究使用了许多与 HyperLogLog 使用的方法非常不同的临时估计器。

是的，因为他们正在解决一个非常不同的问题。

假设您刚刚没收了 1.000.000 张假钞，并且您想知道不同序列号的数量。

对其中的 100.000 个进行采样（使用 HyperLogLog，因为您的老式蒸汽驱动计数机只有 1k 内存）您可以计算 5000 个不同的序列号，每个序列号出现大约 20 次。然后你可以很确定整个存储区将只包含 5000 多个不同的序列号。

现在假设 1 个序列号出现 95.001 次，而 4999 个序列号只出现一次。显然，一些真正的钞票进入了你的藏匿处。现在，您可以确信藏匿处包含大约 5% 的真实钞票，因此整个藏匿处包含大约 50.000 个不同的序列号

请注意，样本中的频率分布用于推断整个存储中的分布。[这实际上在您引用的第二篇论文](http://www.vldb.org/conf/1995/P311.PDF)中被称为“临时”（您的话）方法之一（“基于采样的不同值数量的估计（..）”）：

> *参数估计器背后的想法是将概率分布拟合到* *观察到的不同属性值的相对频率。*

另请注意，HyperLogLog 和类似方法的结果对样本在其值上的分布完全不敏感。但是你的最终估计显然很大程度上取决于它！

我的建议：使用您选择的方法（如 HyperLogLog）来计算样本中不同值的数量，*然后*使用“基于采样的估计”中的一种方法来估计整个 multiset 中的值数量，或者使用您的先验知识与多重集的分布有关以计算估计值（也许您看到了造假者的印刷机，并且您知道它只能打印一个序列号）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-01T07:34:32.837

引文搜索是一件很棒的事情。我对提出的这两个问题不是很熟悉，所以这篇论文可能不是你的意思。至少他们肯定会谈论 HyperLogLog 及其与问题的关系，所以也许它会满足你的好奇心。

[异元素问题的一种最优算法](http://people.seas.harvard.edu/~minilek/papers/f0.pdf)

# php - Heroku 上托管的 SQLite 数据库自动重置

> ID：13552742
> 
> 赞同：2
> 
> 时间：2012-11-25T16:02:20.047
> 
> 标签：php, heroku

我在 Heroku 上托管了一个非常简单的 Facebook 应用程序，它使用 PHP 作为后端，使用 SQLite 进行存储。出于某种奇怪的原因，SQLite 数据库随机重置为我推送的最后一个版本。有人可以帮我理解这背后的原因吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-25T16:05:45.727

Heroku 有一个[临时文件系统](https://devcenter.heroku.com/articles/dynos#ephemeral-filesystem)，每次 dyno 重新启动时都会丢失任何更改，这种[情况经常发生](https://devcenter.heroku.com/articles/dynos#restarting)。您应该将 SQL lite 文件存储在 amazon 上或使用 Heroku 数据库。

# javascript - 阻止函数在 JavaScript 中工作？！如何？

> ID：13552745
> 
> 赞同：1
> 
> 时间：2012-11-25T16:02:38.220
> 
> 标签：javascript, html, css, forms

到目前为止，我已经开始使用单个 html 页面，使用单个表单 ( `<form> </form>`) 作为显示的内容，因此单击提交按钮将淡出当前表单，然后淡入新表单。这是使用下载的 JavaScript 演示完成的。

但问题是，对于我们的任务，我们需要使用表单验证，因此当电子邮件和密码字段为空时，它会出现警报。因此，当单击提交按钮时，会出现警报窗口，但问题是当它应该保留在当前登录表单上时，表单更改仍然会发生？

**这是登录表格**

```
<form class="login active" id="logform">
  <h3>Login</h3>
  <div>                         
    <label>Email:</label>                           
    <input id="email3" type="text" />                       
    <span class="error">This is an error</span> 
  </div>

  <div>                     
    <label>
      Password: <a rel="forgot_password" class="forgot linkform">Forgot your password?</a>
    </label>
    <input type="password" id="pass1" />                        
    <span class="error">This is an error</span>
  </div>

  <div class="bottom">                          
    <div class="remember"><input type="checkbox" /><span>Keep me logged in</span></div>
    <input id="logme" type="submit" onClick="ValidateLog();" rel="emailhome" class="linkform" value="Login"></input>`
    <a rel="register" class="linkform">You don't have an account yet? Register here</a>                   

    <div class="clear"></div>                       
  </div>                    
</form> 
```

**这是我试图将其切换到的形式**

```
<form id="homeform" class="emailhome">
  <h3>Welcome to CM Email</h3>
  <div>
  </div>
</form> 
```

****如果验证不正确，我只需要找出一种阻止表单更改的方法？我尝试使用删除属性类来阻止函数查找链接表单，但它仍然没有帮助！？****

```
function ValidateLog(){
  //EMAIL VALIDATION
  var emailblank = document.forms["logform"]["email3"].value;  
  if (emailblank==null || emailblank=="")
  {
    alert("Error: Please enter your email.");
    return false;
  }

  //PASS VALIDATION
  var passlog = document.forms["logform"]["pass1"].value;
  if (passlog==null || passlog=="")
  {
    alert("Error: Please enter your password.");
    return false;
  }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-25T16:08:04.827

您可以设置`onsubmit`表单的值：

**如果表单不**被执行，您的验证函数必须返回“false” 。一个例子：

```
function myValidateFunction() {
   if (<email is blank>) {
      return false;

   } else {
      return true;
   }
} 
```

另一种方法是，替换提交按钮：

```
<button onlick="myValidateFunction()" type="button">Submit</button> 
```

您必须将功能更改为：

```
function myValidateFunction() {
   if (<email is blank>) {
      // do nothing

   } else {
      document.getElementById("myForm").submit()
   }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-25T16:12:30.527

如果您使用的是 jQuery，因为您才刚刚开始学习，这会让您的事情变得更容易，那么您可以执行以下操作：

```
<script>
    $('#logform').submit(function(event){
        event.preventDefault(); // will stop redirect

        // now do your validation checks
        if ($('#email3').val() !== '') {
            alert("Error: Please enter your email.");
            return false; 
        } 
        if ($('#pass1').val() !== '') {
            alert("Error: Please enter your password."); 
            return false; 
        }

        // passed validation, do whatever's next...
    });
</script> 
```

jQuery：http: [//jquery.com/](http://jquery.com/)

# android - 列“名称”不存在

> ID：13552752
> 
> 赞同：0
> 
> 时间：2012-11-25T16:03:32.133
> 
> 标签：android, database, eclipse, sqlite

我正在开发一个应用程序，我遇到了这个问题，我做了一切，但仍然没有解决，它包含一个**`error = "column 'name' does not exist"`** 如果可能的话给我一些解决这个问题的提示我也删除了手机中的数据库，请帮助我提前谢谢。

```
public class DataBaseBON {
      String TAG;
      private  Context ourContext;
      private  dbhelper ourhelper;
      private  SQLiteDatabase ourdatabase;
      public final static String KEY_ID= "_id";
      public final static String KEY_NUMBER="blockednumbers";
      public final static String N_NAME="name";
      public final static String DATABASE_NAME="databasebon.db";          
      public final static String DATABASE_TABLE="tabledb";
      public final static int DATABASE_VERSION=2;
      private static final String DATABASE_CREATE = "create table "
                + DATABASE_TABLE + "(" + KEY_ID
                + " integer primary key autoincrement, " 
                + N_NAME + " text not null,"
                + KEY_NUMBER
                + " text not null);";

      public class dbhelper extends SQLiteOpenHelper{

          public dbhelper(Context context) {    //?
            super(context, DATABASE_NAME, null, DATABASE_VERSION);

        }

        @Override
        public void onCreate(SQLiteDatabase database) {
            database.execSQL(DATABASE_CREATE);
        }

        @Override
        public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
            Log.w(dbhelper.class.getName(),
                    "Upgrading database from version " + oldVersion + " to "
                            + newVersion + ", which will destroy all old data");
            db.execSQL("DROP TABLE IF EXISTS " + DATABASE_TABLE);
            onCreate(db);
        }

      }

      public DataBaseBON(Context c){

          ourContext =c ;
      }

      public DataBaseBON open() throws SQLException{
          ourhelper = new dbhelper(ourContext);
          ourdatabase = ourhelper.getWritableDatabase();
          ourdatabase=ourhelper.getReadableDatabase();
          return this;
      }

      public void close(){
          ourhelper.close();
      }

      public long creatEntry(String inputnumber , String name) {
        // TODO Auto-generated method stub
        ContentValues cv= new ContentValues();
        cv.put(KEY_NUMBER, inputnumber);
        cv.put(N_NAME, name);
        Log.v(inputnumber, "adding to Database");
        return ourdatabase.insert(DATABASE_TABLE, null, cv);

    }

      public Cursor getcursor() {

        String[] columns = new String[]{ N_NAME, KEY_NUMBER };
        Cursor c=ourdatabase.query(DATABASE_TABLE, columns, null, null, null, null, null);
        return c;}

    public String[]   getcloumns() {

        String[] columns = new String[]{ N_NAME, KEY_NUMBER };

        return columns ;
    }

    public int[]  getto() {
        String TAG = null;
        int[] to = new int[] { android.R.id.text1, android.R.id.text2  };
        Log.v(TAG, "get to is ok");
        return to ;
    }
     public String[]  getdata3(String[] result) {
        String TAG = null;
        String[] columns = new String[]{ N_NAME, KEY_NUMBER };
        Cursor c=ourdatabase.query(DATABASE_TABLE, columns, null, null, null, null, null);
        int iRow = c.getColumnIndex(N_NAME);
        int iName = c.getColumnIndex(KEY_NUMBER);
        for(c.moveToFirst(); !c.isAfterLast(); c.moveToNext()){
        @SuppressWarnings("unused")
        String[] result1= new String[] {c.getString(iName),c.getString(iRow)};
        Log.v(TAG, "is ok");
        }

        return result; 

             } 
```

错误 ：

```
11-25 23:49:33.633: E/AndroidRuntime(4072): java.lang.RuntimeException: Unable to startactivity 
ComponentInfo{vahid.engineer.com/vahid.engineer.com.BlackNumbersBlockDb}: 
            java.lang.IllegalArgumentException: column 'name' does not exist 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-25T17:15:31.127

您的 dbhelper 上需要此行

```
this.db = this.getWritableDatabase(); 
```

否则不会调用 onCreate。请注意，您也需要一个“数据库数据库”变量

[http://www.finalconcept.com.au/article/view/android-creating-a-sqlite-database](http://www.finalconcept.com.au/article/view/android-creating-a-sqlite-database)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-22T15:15:15.227

有点晚了，但总比没有好我有这样的问题，我正在使用内容提供程序，所以当你投影表的属性时，任何未投影的属性都不会对基本 uri 可见，因此要更正该问题，投影表的所有属性`projectionMap.put(Tablename.Attribute1, Tablename.Attribute1) ;`

# ms-access - 将 ms 访问 FORM 中的多条记录保存到另一张表中的一行

> ID：13552753
> 
> 赞同：1
> 
> 时间：2012-11-25T16:03:31.603
> 
> 标签：ms-access

我已经使用`tblQuestionDatabase`具有字段（`Questionno`、、、、、、、`question`）的向导创建了 MS Access FORM `Ans1`，现在当我打开表单时，所有记录 (10) 都会一一出现。`Ans2``Ans3``Ans4`

我添加了空白文本框名称`txtTypeAns`来输入正确答案，现在的问题是它`txtTypeAns`没有随着记录移动。

其次，我想将所有 10 条记录保存在另一个表字段的一行中（`Name`, `Date`, `Ans1`, `Ans2`....）

请提供可能的代码来完成这个项目，在此先感谢

# java - 在 Eclipse (3.7) 中调试时检查对象数据

> ID：13552756
> 
> 赞同：3
> 
> 时间：2012-11-25T16:04:09.173
> 
> 标签：java, android, eclipse

我刚开始在 Eclipse 中开发 Android 应用程序。我通常在 Visual Studio 中编写代码，但有一件事我只是不知道如何在 Eclipse 中完成：

例如，如果我有以下方法，并且想要检查变量`i`：

```
public void Foo()
{
    int i = 1;
} 
```

在 Visual Studio 中，我可以在关闭时设置断点`}`，并且可以检查变量：

```
public void Foo()
{
    int i = 1;
} // <-- Breakpoint here 
```

但在 Eclipse 中，我只能在变量本身上设置它：

```
public void Foo()
{
    int i = 1; //<-- Here
} 
```

这导致我无法检查变量，除非我添加另一行代码并稍后在方法中中断。

TL;DR：当我处于调试模式时，如何检查 Eclipse 中的变量？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T00:42:17.340

只需在允许的断点上按 F6 并在要检查的变量上按 cntrl+shift+i。乔布斯是个好人。右大括号是一行代码，因此调试器不会跳过该方法，从而丢失您的引用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-18T23:58:57.197

创建[方法退出断点](http://help.eclipse.org/galileo/index.jsp?topic=/org.eclipse.jdt.doc.user/reference/breakpoints/ref-exit_option.htm)而不是普通断点。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-25T16:09:53.943

在调试模式下，您可以右键单击变量，您将看到“观看”单击该变量。在表达式选项卡中，您将看到变量更改。如果您只想查看变量值，您可以在右键单击它后执行“检查”。

# dns - 网络流量分析器可以看到对 DNS 服务器的调用吗？

> ID：13552757
> 
> 赞同：0
> 
> 时间：2012-11-25T16:04:33.297
> 
> 标签：dns

我的机器上安装了一个网络流量分析器，可以查看所有传入和传出的流量。它显示了所有 TCP UDP 和所有其他连接，这些连接会导致流量进出我的机器。当我尝试访问一个网站时，我不应该看到对解析该网站的 DNS 服务器的调用吗？我无法看到这一点。我怎么能看到那个电话？什么端口号用于 DNS 服务调用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T16:47:40.200

它是 UDP（有时是 TCP）端口 53。

如果您最近访问过该网站，DNS 可能会缓存在您的机器上，因此不会有 DNS 请求。

# c - linux C服务器 - 识别/命名客户端

> ID：13552758
> 
> 赞同：2
> 
> 时间：2012-11-25T16:05:23.387
> 
> 标签：c, linux, sockets, recv, netbios

主机名是指客户端 PC 的名称。

我正在尝试识别服务器的每个连接的客户端。
像客户端->服务器。服务器说：`client hostname has connected.`
那么该客户端的所有进程都将使用主机名进行标记。我真的不知道该怎么做。

我的客户代码：

```
char hostname[1024];

gethostname(hostname, 1023);
send(sock, hostname, hostname, 0);
//now we are done sending the hostname of the client. 
```

我的服务器代码（循环）：

```
void clients (int sock)
{
    int n, p;
    char buffer[256];
    char request;
    FILE *file; 
    file = fopen("process.log","a+");

    //the stuff i added for the identification 
    char hostbuf[256];
    bzero(hostbuf,256);
    n = read(sock,hostbuf,255);
            printf("%s has connected.\n",buffer);

    //after the client has been identified then we tag all communications from that client as its hostname/identification.

    do
    {
    bzero(buffer,256);
    p = read(sock,buffer,255);
    if (p < 0) error("ERROR reading from socket");

    //the output i modified
    printf("%s sent: %s\n",hostbuf,buffer);

    n = write(sock,buffer,sizeof(buffer));

    if (n < 0) error("ERROR writing to socket");
    fprintf(file,"%s\n",buffer); /*writes*/ 

    }while(p == 11);

    fclose(file);
} 
```

- - - - - - 编辑 - - - - - -

一起使用了这两个建议

添加到代码中：

```
socklen_t len;
struct sockaddr_storage addr;
char ipstr[INET_ADDRSTRLEN];
int port;

   len = sizeof addr;
   getpeername(sock, (struct sockaddr*)&addr, &len);

   // deal with both IPv4 and IPv6:
if (addr.ss_family == AF_INET) {
  struct sockaddr_in *s = (struct sockaddr_in *)&addr;
  port = ntohs(s->sin_port);
  inet_ntop(AF_INET, &s->sin_addr, ipstr, sizeof ipstr);
} else { // AF_INET6
  struct sockaddr_in6 *s = (struct sockaddr_in6 *)&addr;
  port = ntohs(s->sin6_port);
 inet_ntop(AF_INET6, &s->sin6_addr, ipstr, sizeof ipstr);
}

char host[1024];

   getnameinfo(&addr, sizeof addr, host, sizeof host, NULL, NULL, 0); 
```

试图显示它：

```
printf("%s has connected from %s.", host,ipstr);
    //returned 'myip.myisp.net has connected from *.*.*.*.'
    //i want it to return my PC name.
    //my pc name is SashaGre-PC :)) 
```

它可以工作，但它不会返回我的 PC 名称，而是返回“ip.ispdomain.net”。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-25T16:17:15.413

此外，如果您想要客户端的主机名，请在`getnameinfo`每次获得新的客户端连接时从服务器使用`accept`. 这里有例子： [https ://beej.us/guide/bgnet/html/multi/getnameinfoman.html](https://beej.us/guide/bgnet/html/multi/getnameinfoman.html)

对于 Windows： http: [//msdn.microsoft.com/en-us/library/windows/desktop/ms738532 (v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/ms738532(v=vs.85).aspx)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-28T11:56:37.477

要查询主机的`NetBIOS`名称（您称之为“ *PC 名称*`NBT`”），您需要对相关主机执行查询。[NBT 代表基于 TCP/IP 的 NetBIOS](http://en.wikipedia.org/wiki/NetBIOS_over_TCP/IP)。

这不是一项微不足道的任务。

已经这样做的实现是[Samba 项目](http://samba.org)的一部分。

该库`libsmbclient`实现了一种称为`node_status_query()`执行 NBT 查询的方法。

通过查找`nmblookup`工具的来源可以找到有关如何使用此方法的示例。当使用`nmblookup`' 选项`A`以及要查询其 NetBIOS 名称的主机的 IP 地址时，将调用相关代码路径。

```
nmblookup -A <ip-address> 
```

两者都是 Samba 项目`libsmbclient`的`nmblookup`一部分。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-25T16:09:00.380

听起来您想在服务器上的每个传入连接上调用[getpeername来识别源地址。](http://linux.die.net/man/3/getpeername)

# c# - 动态下拉列表

> ID：13552766
> 
> 赞同：0
> 
> 时间：2012-11-25T16:06:02.713
> 
> 标签：c#, asp.net, ddl

我有 2 个问题：首先，我在我的 .aspx 中的转发器中放置了一个 DDL。这是我的代码：

```
<HeaderTemplate>
    <ul class ="horizontal">
  </HeaderTemplate>
  <ItemTemplate>
    <li>
<img src="<%# DataBinder.Eval(Container.DataItem, "ImagePath") %>" width="60" height="40" alt = "<%# DataBinder.Eval(Container.DataItem, "ProductName") %>"/>
        <p>ID: <asp:Literal ID="ProductIDLiteral" runat="server" Text='<%# DataBinder.Eval(Container.DataItem, "ProductID") %>'></asp:Literal></p>
        <p>
            <asp:Literal ID="NameLiteral" runat="server" Text="Name: "></asp:Literal><asp:Literal ID="ProductNameLiteral" runat="server" Text = '<%# DataBinder.Eval(Container.DataItem, "ProductName") %>'></asp:Literal>
        </p>
        <p>
            <asp:Literal ID="Literal1" runat="server" Text="Price: "></asp:Literal><asp:Literal ID="UnitPriceLiteral" runat="server" Text = '<%# DataBinder.Eval(Container.DataItem, "UnitPrice") %>'></asp:Literal>
         </p>
         <p> <asp:Literal ID="QuantityLiteralLiteral" runat="server" Text="Quantity: "></asp:Literal><asp:DropDownList ID="DDLQuantity" runat="server" ><asp:ListItem></asp:ListItem>
        </asp:DropDownList></p>
        <asp:Literal ID="Literal" runat="server"></asp:Literal>
 </li>
  </ItemTemplate>
  <FooterTemplate>
      <asp:Button ID="Button1" runat="server" Text="Validate!" />
    </ul>
  </FooterTemplate>
</asp:Repeater> 
```

那么，第一个问题是如何从后面的代码中填充我的 DDL？那么我该怎么做，用 <1-2-3-4> 填充 DDL 如果源值为 4。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-25T19:00:26.343

您可以使用该`Init`事件来填充`DropDownList`：

```
protected void DropDownList1_Init(object sender, EventArgs e)
{
    for (int i = 1; i <= 4; i++)
    {
        ((DropDownList)sender).Items.Add(i.ToString());
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T12:24:38.567

您需要使用中继器 ItemDataBound 事件。怎么绑定下拉？？？

```
protected void rep_ItemDataBound(object sender, RepeaterItemEventArgs e)
        {
            DropDownList dd = (DropDownList)e.Item.FindControl("control_id");
            dd.DataSource = "";
            dd.DataBind();

        } 
```

如果不同的逻辑适用于下拉菜单。

```
protected void rep_ItemDataBound(object sender, RepeaterItemEventArgs e)
        {

            /////////////
            //logic for source_value
            /////////////
            if (e.Item.ItemType == ListItemType.Item || e.Item.ItemType == ListItemType.AlternatingItem)
            {
                yourObj obj = (yourObj)e.Item.DataItem;
                if (yourObj.source_value == 4)
                {
                    dd.Items.Add("one");
                    dd.Items.Add("two");
                    dd.Items.Add("three");
                    dd.Items.Add("four");
                }
            }

        } 
```

# sql - 在一个脚本 postgresql 中创建数据库、表等

> ID：13552773
> 
> 赞同：14
> 
> 时间：2012-11-25T16:07:13.673
> 
> 标签：sql, postgresql, postgresql-9.1

我有一个脚本：

```
CREATE DATABASE ahop

GO

CREATE TABLE shop.dbo.TABLE1 ( 
); 

CREATE TABLE shop.dbo.TABLEN ( 
); 
```

但它似乎在 PostgreSQL 中不起作用。错误消息：“GO 附近出错”。我不明白，如何在 Postgresql 中创建脚本？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-11-25T16:07:59.007

将 T-SQL 批处理终止符`GO`替换为 PostgreSQL 批处理终止符`;`。
`GO`postgreSQL 不支持

*   [Ian Harding 的 Microsoft SQL Server 到 PostgreSQL 迁移](http://wiki.postgresql.org/wiki/Microsoft_SQL_Server_to_PostgreSQL_Migration_by_Ian_Harding)

您需要使用`\`. 例如，

```
 CREATE DATABASE testdatabase; 
 \c testdatabase 
 CREATE TABLE testtable (testcolumn int); 
```

*   [PostgreSQL for MySQL 用户](http://www.coderholic.com/postgresql-for-mysql-users/)

# ffmpeg - 像 CODEC_FLAG2_BPYRAMID 这样的 ffmpeg 标志在哪里？

> ID：13552776
> 
> 赞同：2
> 
> 时间：2012-11-25T16:07:35.953
> 
> 标签：ffmpeg, x264, libavcodec, libx264

我正在开发将 VS2010 与 ffmpeg 一起使用，并尝试了[此处](https://stackoverflow.com/questions/3553003/encoding-h-264-with-libavcodec-x264)的代码。但是VS说它找不到

1.  `CODEC_FLAG2_BPYRAMID+CODEC_FLAG2_MIXED_REFS+CODEC_FLAG2_WPRED+CODEC_FLAG2_8X8DCT+CODEC_FLAG2_FASTPSKIP; // flags2=+bpyramid+mixed_refs+wpred+dct8x8+fastpskip`
2.  `X264_PART_I8X8+X264_PART_I4X4+X264_PART_P8X8+X264_PART_B8X8`
3.  `avCodecContext.crf`

它们位于哪里？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T15:22:20.127

正如@RomanR 所说，一些标志和参数已被弃用。但是，我们仍然可以使用`av_opt_set`函数来设置它们。例如，要设置`crf=23`我们使用`av_opt_set(outStream->codec->priv_data, "crf", "23", 0);`

# c++ - 内联汇编跳转到标签

> ID：13552780
> 
> 赞同：1
> 
> 时间：2012-11-25T16:08:09.327
> 
> 标签：c++, c, assembly, inline-assembly

我无法跳转到标签。

我的代码：

```
 asm{
keypress: 
    ...
    cmp ax,0000
    jz keypress
} 
```

Borland 说：未定义标签“按键”

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-25T16:18:41.477

尝试将标签移到 asm 块之外（即，就在“asm{”行的上方）。这是根据这个[链接](http://www.tek-tips.com/viewthread.cfm?qid=972872)和这个[链接](http://computer-programming-forum.com/45-asm/352fc0aba350241b.htm)。

另请注意，显然您可能无法跳转到前向标签（根据[此处](https://stackoverflow.com/questions/209198/borland-x86-inlined-assembler-get-a-labels-address)），但这当然不是本示例中的问题。

# c# - 如何设置可用于测试与 Http 请求相关的功能的 Web 代理？

> ID：13552781
> 
> 赞同：1
> 
> 时间：2012-11-25T16:08:28.540
> 
> 标签：c#, .net, proxy, webrequest

我的应用程序的一位用户必须先连接到网络代理，然后才能连接到我们的网站。他告诉我，即使他指定了代理的 ip、端口、用户名和密码，他也会不断收到 401 错误。我无法测试此功能，因为我不需要使用代理连接到我们的网站。据我所知，这个问题与我制作 HttpRequest 的方式有关，但同样，我无法测试此功能。

如何设置允许我测试此功能的 Web 代理？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-25T16:12:29.123

你在 Windows 上，去获取 CC Proxy [http://www.youngzsoft.net/ccproxy/](http://www.youngzsoft.net/ccproxy/)并安装它。它是免费的，并且可以根据您的需要进行配置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-25T16:10:34.757

您可以[`Proxy`](http://msdn.microsoft.com/en-us/library/system.net.httpwebrequest.proxy.aspx)在[`HttpWebRequest`](http://msdn.microsoft.com/en-us/library/system.net.httpwebrequest.aspx).

例如，以下是使用默认网络凭据指定代理服务器的方法：

```
var request = WebRequest.Create("http://www.google.com");
request.Proxy = new WebProxy("http://proxy.mydomain.com", 8080);
request.Proxy.Credentials = CredentialCache.DefaultNetworkCredentials; 
```

# javascript - 为什么 ngModel 在 AngularJS 中作为 $resource 发送时没有正确更新我的变量？

> ID：13552789
> 
> 赞同：0
> 
> 时间：2012-11-25T16:09:04.177
> 
> 标签：javascript, rest, angularjs

下面是我如何定义我的 $resource：

```
app.factory('User', function($resource){
    return $resource('/api/user', {}, {
        get: { method:'GET'},
        update: { method:'PUT'},
    })
}) 
```

这是我的控制器：

```
function SettingsCtrl($scope, $http, User) {
    $scope.user = User.get(
        {}, //Params

        function(data) { //Successfully received data

        },
        function(data) { //Failure to receive data

        }
    );

    $scope.saveUser = function() {
        $scope.user.$update();
        console.log($scope.user);
    };
} 
```

`User.get()`控制器顶部的调用正确地从后端获取数据。在我的 HTML 中，我创建了一个调用该`$scope.saveUser`函数的按钮，并使用 创建了一些输入`ng-model`，看起来双向数据绑定工作正常。当我调用`console.log($scope.user)`该`$scope.saveUser`函数时，它完全按照我的预期返回用户对象，其中包含我在浏览器中所做的更改。但是，在我的 Node 后端，我记录了在 PUT 请求中收到的对象，它没有反映我在浏览器中所做的任何更改，它看起来与原始对象相同。单击浏览器中的按钮后，数据将重置为其原始值。到底是怎么回事？为什么它不会发送我在浏览器中输入的更新数据？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-25T20:23:14.607

根据您的评论：

> 这是`console.log($scope.user)`我编辑表单并点击保存（调用`saveUser`）后的浏览器：
> 
> ```
> {__v:0, _id:"50b1a966c12ef0c426000007", password:"NEW MODIFIED PASSWORD"} 
> ```
> 
> 这是 Node 记录的内容`console.log(req.user)`：
> 
> ```
> {__v:0, _id:"50b1a966c12ef0c426000007", password:"originalPassword"}) 
> ```

`req.user`通常是附加到请求对象的对象，用于指定当前登录的用户是谁，通常由中间件管理。由于您正在执行`PUT`请求，因此您正在寻找`req.body`.

# c# - StructureMap 删除单个实例

> ID：13552790
> 
> 赞同：3
> 
> 时间：2012-11-25T16:09:13.800
> 
> 标签：c#, dependency-injection, ioc-container, structuremap

有谁知道如何从对象缓存中删除单个实例？我有一个使用 StructureMap 获取实例的类。有时，一个实例可能会变得无效，所以我想将它从缓存中删除，以确保下次调用时`ObjectFactory.GetInstance`，我得到一个新创建的实例。这应该适用于不同类型的生命周期。

我不想删除该类型的所有实例，也不想删除其他类型的任何其他实例。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T21:48:34.867

当您因为损坏而需要用新服务替换已注册服务的实例时，这通常表明该实例的寿命过长。A`DataContext`就是一个很好的例子。A`DataContext`不应该比创建它的 (web) 请求长，因为它不是线程安全的。即使您不处理 Web 应用程序，通常也会有某种类型的请求在其中进行操作，并且每个请求都有自己的`DataContext`实例。

如果发生异常，您通常应该尽快中止整个操作。在大多数情况下，试图恢复和继续通常被认为是一件坏事。这是一个通用的软件原理，与 DI 无关。在大多数情况下，您并不确切知道出了什么问题，继续下去甚至会使事情变得更糟。继续不会使您的应用程序更健壮。它只会使查找错误变得更加困难。

长话短说：您`DataContext`最多应该在单个请求的生命周期内缓存 a ，并且不要在发生异常时尝试替换它。只需让请求失败（并记录查找错误并修复它所需的所有信息）。

如果您正在运行 ASP.NET 应用程序，则可以将`DataContext`实例配置为`HttpContextScoped`.

# facebook - Facebook 应用程序创建应用程序域错误

> ID：13552791
> 
> 赞同：49
> 
> 时间：2012-11-25T16:09:34.203
> 
> 标签：facebook, appdomain

我正在尝试创建 Facebook 应用程序。然而，在创作向导完成他的工作后，我就遇到了麻烦。

在创建的向导中没有更改任何内容我有一个错误：

```
Error
You have specified an App Domain but have not specified a valid integration URL.
secure-citadel-xxxx.herokuapp.com must be derived from one of: Site URL, Mobile
Site URL, Canvas URL, Secure Canvas URL, Page Tab URL or Secure Page Tab URL. 
```

我用谷歌搜索它并没有找到答案可能是什么..

添加`http://`等等只会导致域无效的另一个错误。

有谁知道如何处理它？

* * *

## 回答 #1

> 赞同：113
> 
> 时间：2014-01-26T05:36:05.970

Facebook 更改了开发者应用程序的用户界面，因此很难找到。对于未来访问的人：

1.  单击`Apps`，然后选择您的应用程序。
2.  单击`Settings`屏幕左侧的按钮。
3.  在`Basic`设置中，点击`Add Platform`设置配置下方的按钮。
4.  `Website`在平台对话框中选择。
5.  输入您的网址（`localhost`在此处有效）。
6.  在`App Domains`文本输入中，添加与 URL 中的域匹配的域。
7.  保存您的设置。

* * *

## 回答 #2

> 赞同：26
> 
> 时间：2012-11-25T18:34:51.647

该`App Domains`字段中唯一允许的值是您已经在至少一个`Select how your app integrates with Facebook`阻止中输入的 URL：

*   使用 Facebook 登录的网站 - URL
*   Facebook 上的应用程序 - 画布
*   等其他人

* * *

## 回答 #3

> 赞同：18
> 
> 时间：2014-02-21T16:07:20.150

您应该首先“添加平台”，输入您的网站网址，然后您就可以保存应用程序域

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-07-23T15:13:39.327

在“选择您的应用如何与 Facebook 集成”框中有一个名为“使用 Facebook 登录的网站”的选项卡。这是在基本信息容器下。将您的完整网址粘贴到“ [http://www.example.com/](http://www.example.com/) ”，然后将“example.com”放入“基本信息应用程序域”输入。

# c - 整数比较失败

> ID：13552798
> 
> 赞同：1
> 
> 时间：2012-11-25T16:10:12.547
> 
> 标签：c

我有一个节点结构的链接列表，并且在我的函数中搜索列表以查找具有匹配 id 的节点，当比较他传入的 id 和节点 id 时，if 语句似乎失败。if 语句位于下面函数的第 6 行。即使 *node_id* 和*id*具有相同的值，它也会失败。

```
NODE *node_id_search(int id, NODE *start) {
    NODE *result = NULL, *current = start;

    do {

        if(current->node_id == id) {
            result == current;
        }

        current = current->next;
    } while(current->next != NULL && result == NULL);

    return result;
} 
```

节点.h

```
typedef struct node {
    /*@{*/
    /**
     * The node id used to identify the node. The id is a positive integer.
     */
    int node_id;

    /**
     * The node type.
     */
    char node_type[10];

    /**
     * Pointer to the next node element.
     */
    struct node *next;
    /*@}*/
} NODE; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-25T16:21:57.490

除了上面提到的答案（我看不出它们与问题有什么关系），我看到的唯一问题是这段代码：

```
 if(current->node_id == id) {
        result == current; //which should be result = current;
    } 
```

将其更改为：

```
if(current->node_id == id){
     result = current;
     return result; // no need to search any further(hence optimized).
} 
```

* * *

除此之外，我认为您的代码没有任何问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-25T16:27:17.370

您的代码过于复杂。它可以简化为：

```
NODE *node_id_search(int id, NODE *ptr) {

    for( ; ptr; ptr = ptr->next) {
        if(ptr->node_id == id) return ptr;
        }

    return NULL;
} 
```

顺便说一句：上面的代码片段返回链中的*第一个匹配节点，原始节点返回最后一个。*

另外：如果指针参数（原件中的“开始”）为 NULL，则原件将取消引用 NULL 指针并崩溃（或返回废话）。这个带有 for(;;) 循环的版本只会返回 NULL。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-25T16:29:43.423

块中需要注意的 2 点

```
if(current->node_id == id) {
    result == current;
} 
```

1.  你不是在检查是否`current`是`NULL`。如果任何具有`node_id`等于的 节点`id`不存在，最终您将到达列表的末尾（其中`next`is `NULL`）并尝试评估`NULL->next`并崩溃。`printf()`在这个块之前放一个，看看会发生什么。

2.  你已经写`result == current`了，它对 没有任何作用`result`。它只是检查是否相等，并且`result`永远保持不变。它应该是`result = current`，它分配了`current`to的值`result`。

# java - 为什么在 Java 中使用默认的 Object equals 方法更好？

> ID：13552802
> 
> 赞同：5
> 
> 时间：2012-11-25T16:10:37.717
> 
> 标签：java, overriding, overloading, equals

为什么认为在 Java 中使用默认**Object`equals`**方法并对其进行修改以使其适用于特定类（通过`instanceof`使用类型转换进行验证和使用）会更好：

```
public boolean equals(Object otherObject)
{
   boolean isEqual = false;

   if ((otherObject != null) && (otherObject instanceof myClass))
      {
         myClass classObject = (myClass)otherObject;

         if (.....) //checking if equal
         {
            .....
} 
```

`equals`而不是用特定于每个需要使用的类的新方法重载它`equals`：

```
public boolean equals(myClass classObject) 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-25T16:17:19.463

的签名`Object.equals()`是`public boolean equals(Object)`。如果您定义一个方法`public boolean equals(MyClass)`，您将添加一个具有不同签名的新方法，而不是覆盖（或重新定义，如果您愿意）该`Object.equals()`方法。

由于所有集合都调用该`Object.equals()`方法，因此除了您自己的代码之外，任何人都不会调用您的新方法，因此几乎没有用处。例如，如果您创建 a `Set<MyClass>`，它将认为两个实例是不同的，尽管您的`equals(MyClass)`方法认为它们是相等的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-25T16:26:16.323

这是因为 Java 中的大多数类（列表、队列、地图等）都使用该`boolean equals(Object obj)`方法。在九十年代设计 Java 的时候，泛型还不存在。

使用例如[`Comparator`](http://docs.oracle.com/javase/7/docs/api/java/util/Comparator.html)or的比较方法[`Comparable`](http://docs.oracle.com/javase/7/docs/api/java/lang/Comparable.html)已更新为支持泛型，因此直接采用正确的类型（避免使用`instanceof`）。`Object.equals()`只需要一个通用的`Object`.

如果您`.equals()`使用新签名重载，其他集合将不知道您的新`equals()`方法，并且仍会调用由 提供的旧原始方法`Object`，因此您必须坚持使用`instanceof`. 请记住，重载与覆盖没有相同的效果。在覆盖子类方法时被调用，因为它具有完全相同的签名。在重载中，您只是提供具有不同签名的替代功能，因此调用者必须知道它。

或者，`equals()`您可以不使用该方法，而是稍微更改代码以使用带有泛型的较新比较方法。大多数集合已更新以支持泛型等`Comparator`。`Comparable`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-25T16:17:51.257

如果你这样做`public boolean equals(MyClass classObject)`，你就会**超载**。
所以你的方法不会被调用，因为它不会**覆盖**
你可以创建这样的方法，但你也需要`equal(Object)`为了让一切正常运行（集合等）。

您对这种方法感兴趣的唯一原因是性能。但我不认为现在你有使用问题`equals(Object)`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-25T16:19:25.127

你必须为你的类重写 equals 方法。当你重写一个方法时，你不能改变方法参数，不能改变返回类型，也不能使方法的可访问性更受限制。

# c# - 如何找出点击了哪个 DataGridView？

> ID：13552804
> 
> 赞同：0
> 
> 时间：2012-11-25T16:10:50.170
> 
> 标签：c#, .net, winforms

我已经创建了一个 DataGridViews 数组，并为每个 gridview DataGridViewCellEventHandler 添加，我想在单击时更改当前 DataGridView 单元格值，要更改单元格值，您必须从数组中知道当前 DataGridView 索引为 dataGridView[i].Rows [colIndex].Cells[rowIndex].Value，
如何找出点击了哪个DataGridView？

这是我的代码。

```
DataGridView[] altGridViews=new DataGridView[10];
for (int i = 0; i < 10; i++)
{
 altGridViews[i]=new DataGridView();
 altGridViews[i].RowCount = 3;
 altGridViews[i].ColumnCount = 3;
 altGridViews[i].AutoSizeColumnsMode = DataGridViewAutoSizeColumnsMode.Fill;
 altGridViews[i].CellClick += new         
 DataGridViewCellEventHandler(altGridView_Click);
 this.Controls.Add(altGridViews[i]);
} 
```

和 DataGridView 甚至处理程序

```
protected void altGridView_Click(object sender, DataGridViewCellEventArgs e)
{
     int colIndex = e.ColumnIndex;
     int rowIndex = e.RowIndex;
 //todo: change current cell value
 //altGridViews[i].Rows[colIndex].Cells[rowIndex].Value="something";
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-25T16:15:25.493

```
protected void altGridView_Click(object sender, DataGridViewCellEventArgs e)
{
    int colIndex = e.ColumnIndex;
    int rowIndex = e.RowIndex;
    var currentDataGridView = sender as DataGridView; //your grid
    currentDataGridView.Rows[colIndex].Cells[rowIndex].Value="something";
} 
```

# jquery - 如何从 jquery .click 中获得与 .hover 相同的功能？动画与 .hover 一起使用，但不是 .click

> ID：13552806
> 
> 赞同：1
> 
> 时间：2012-11-25T16:10:53.843
> 
> 标签：jquery, jquery-animate

我正在写一个手风琴式的，我希望它使用悬停来制作动画，但是，我真的希望它在单击而不是悬停时工作 - 当我将 .hover 换成 .click 时，不会发生动画。

我究竟做错了什么？

谢谢你的帮助！

-艾琳

这有效：

```
$('#productslider div.rum').hover(function(){
    $(this).animate({left:'90px'}, 500);
    $(".vodka").animate({left:'0px'}, 500);
  }, function(){
});

$('#productslider div.vodka').hover(function(){
    $(this).animate({left:'-90px'}, 500);
    $(".rum").animate({left:'575px'}, 500);
  }, function(){
}); 
```

这没有任何反应：

```
$('#productslider div.rum').click(function(){
    $(this).animate({left:'90px'}, 500);
    $(".vodka").animate({left:'0px'}, 500);
  }, function(){
});

 $('#productslider div.vodka').click(function(){
    $(this).animate({left:'-90px'}, 500);
    $(".rum").animate({left:'575px'}, 500);
  }, function(){
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T16:13:54.257

从您的点击事件中删除`}, function(){`这应该是

```
$('#productslider div.rum').click(function(){
   $(this).animate({left:'90px'}, 500);
   $(".vodka").animate({left:'0px'}, 500);
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-25T16:14:08.047

去掉第二个函数，`click`只接受一个参数..

```
$('#productslider div.rum').click(function(){
    $(this).animate({left:'90px'}, 500);
    $(".vodka").animate({left:'0px'}, 500);
}); 
```

# github - GitHub：多账户设置

> ID：13552809
> 
> 赞同：7
> 
> 时间：2012-11-25T16:11:25.817
> 
> 标签：github

自从 3 个多小时以来，我一直在尝试为 github 设置多个帐户并且有点累。我已经尝试了几乎所有可能的方式来描述这里、github 和文章，但都没有奏效。我也是 github 和 Unix 的新手。所以需要你的帮助来解决这个问题。下面是我在做什么

我使用的是 Windows 7，并为两个不同的帐户设置了两个 ssh 密钥。

1.  id_rsa
2.  id_rsa_ac2

比在`.ssh`用户目录中创建配置文件并添加以下代码

```
#Account one
Host github.com
    HostName github.com
    PreferredAuthentications publickey
    IdentityFile /c/Projects/.ssh/id_rsa

#Account two
Host ac2.github.com
    HostName github.com
    PreferredAuthentications publickey
    IdentityFile /c/Projects/.ssh/id_rsa_ac2 
```

现在我正在尝试使用以下代码添加遥控器

```
git remote add origin git@ac2.github.com:myaccount/my.git 
```

并使用以下代码推送

```
git push origin master 
```

但是当我试图推动它时，它给了我错误： `Error: Permission to myaccount/my.git denied to {account}. // where it is considering default user account and not for ac2 user account` `fatal: Could not read from remote repository.`

`Please make sure you have the correct access rights and the repository exists.`

非常感谢..

**附加信息：**

我已经测试`id_rsa_ac2`并给出了成功验证的消息。但奇怪的是使用原始帐户而不是`ac2`帐户用户名提供用户名

`Hi {username!} You've successfully authenticated, but GitHub does not provide shell access. //here user id should be from ac2 but it is showing userid from id_rsa and not from id_rsa_ac2`

# 信息：最终代码

@VonC 的答案有效，如果有人想使用，可以添加最终代码作为我的答案。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-26T15:21:03.527

所以根据@VonC's answer here我做了什么。

1.  我为另一个帐户生成了 ssh 密钥并添加了 id_rsa_ac2（其中 ac2 用于第二个帐户）
2.  不仅仅是交叉检查，它适用于`ssh -T ac2.github.com`
3.  在 /c/Users/yourname/.ssh/ 目录中创建**配置文件（无扩展名）**

这是我用于配置文件的代码

```
#Account one
Host github.com
    HostName github.com
    PreferredAuthentications publickey
    IdentityFile /c/Users/yourname/.ssh/id_rsa
    User git

#Account two
Host ac2.github.com
    HostName github.com
    PreferredAuthentications publickey
    IdentityFile /c/Users/yourname/.ssh/id_rsa_ac2
    User git 
```

因此，现在完成此操作后，您可以根据需要开始使用这两个帐户。

对于主帐户，我添加了远程作为来源，使用`git remote add origin git@github/youraccount/rep.git` 比推送使用`git push origin master`这将上传到您的第一个帐户。

为使用的第二个 (ac2) 帐户添加远程而`git remote add ac2 ac2.github/yoursecondaccount/rep.git` 不是推送使用`git push ac2 master`这将上传到第二个 (ac2) 帐户。

检查它是否添加了远程使用`git remote -v`，并以防万一您是否要删除任何人，而不是使用`git remote rm origin`origin 是您添加的远程。

希望这些信息对遇到同样问题的其他人有所帮助。

再次感谢@VonC

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-25T18:28:10.260

为了考虑到您的配置，您需要`Host`在远程地址中使用其名称：

```
git remote add origin ac2.github.com:myaccount/my 
```

如果您已将`HOME`环境变量（在 Windows 上默认未定义，但在使用[msysgit`git-cmd.bat`](https://stackoverflow.com/a/10122865/6309)时已定义）定义到您拥有 .ssh 目录及其`id_rsa_ac2`私钥和公钥的目录`id_rsa_ac2.pub`，则它会起作用的。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-12-23T03:42:05.947

这是一个脚本，用于自动将两个 GitLab 帐户添加到您的设置中。

[设置-gitlab.sh](https://gitlab.com/procyclinsur/Fedora-Environment/blob/master/Scripts/setup-gitlab.sh)

```
#!/bin/bash

# VERIFIED FOR FEDORA 27 MATE (Likely to work in others distros)
# Multi Account SSH for GitLab/OpenSSH Setup.
ROOT=root
if (( whoami == $ROOT ))
    then 
    echo "Run as standard user"
elif [[ -z $1 || -z $2 ]]
    then
    echo "command usage: setup-gitlab.bash workemail@domain.com homeemail@domain.com"
elif [[ ! $1 =~ .*@.*\..* ]]
    echo "Work email is not in the correct format. Must match regex .*@.*\..*"
elif [[ ! $2 =~ .*@.*\..* ]]
    echo "Home email is not in the correct format. Must match regex .*@.*\..*"
else
    HOMEEMAIL=$1
    WORKEMAIL=$2
    USRNAME=`whomai`

# /home/<username>/.ssh/
# ├── config
# ├── home-gitlab-key
# ├── home-gitlab-key.pub
# ├── known_hosts
# ├── work-gitlab-key
# └── work-gitlab-key.pub

#Executed to match the above directory.
    ssh-keygen -t rsa -C "$WORKEMAIL" -b 4096 -f work-gitlab -N ""
    ssh-keygen -t rsa -C "$HOMEEMAIL" -b 4096 -f home-gitlab -N ""

# Agent Configuration Setup (.ssh/config)
    cat >> ~/.ssh/config <<EOF
Host gitlab-work
  HostName gitlab.com
  User git
  IdentityFile /home/$USRNAME/.ssh/work-gitlab-key

Host gitlab-home
  HostName gitlab.com
  User git
  IdentityFile /home/$USRNAME/.ssh/home-gitlab-key
EOF

# Agent Setup (potentially optional???)
    cat >> ~/.bashrc <<'EOF'
eval "$(ssh-agent -s)"
for i in `ls ~/.ssh/*.pub` ; do ssh-add ${i::-4} ; done
EOF

    . .bashrc

fi 
```

运行脚本后，您需要将创建的两个公钥的内容分别复制到每个 GitLab 帐户。

另请注意，使用时应按如下方式`git clone git@gitlab.com:<account>/<project>.git`更换。`gitlab.com`

```
git clone git@gitlab-home:<account>/<project>.git 
```

和

```
git clone git@gitlab-work:<account>/<project>.git 
```

分别。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-07-26T16:07:17.390

我正在使用这个脚本，它可以切换缩进和其他所有必要的东西，比如 git 设置

[https://gist.github.com/milosjanda/a86ebc039293f22fabe723024ec42b46](https://gist.github.com/milosjanda/a86ebc039293f22fabe723024ec42b46)

```
if [[ -f ~/.ssh/.work ]]; then
  echo "swith to HOME"
  # mv ~/.ssh/id_rsa ~/.ssh/work; mv ~/.ssh/home ~/.ssh/id_rsa
  rm ~/.ssh 2> /dev/null
  ln -s ~/.ssh-work/home ~/.ssh
  git config --global user.email "my.name@gmail.com"
else
  echo "swith to WORK"
  # mv ~/.ssh/id_rsa ~/.ssh/home; mv ~/.ssh/work ~/.ssh/id_rsa
  rm ~/.ssh 2> /dev/null
  ln -s ~/.ssh-work/work ~/.ssh
  git config --global user.email "my.name@company.eu"
fi

# Delete all identities from ssh-agent
ssh-add -D

# Add new identity to ssh-agent
ssh-add 
```

# xml - 从 XSL 中的组合 XML 输出 XML

> ID：13552811
> 
> 赞同：0
> 
> 时间：2012-11-25T16:11:30.593
> 
> 标签：xml, xslt, xml-parsing, xslt-1.0

在弄清楚如何从导入两个 XML 并组合数据的 XSL 中输出干净的 XML 时，我遇到了一些巨大的问题。

我试图找到更多关于`<xsl:output method="xml" version="1.0" encoding="UTF-8" indent="yes"/>`我认为是我的解决方案的信息，但我不知道如何将所有这些信息放入一个可靠的 xml 文件中。当我从服务器脚本调用它时，它看起来不错，但它有一些`HTML`我不想要的标签和其他东西，我想这是因为它仍然是 XSL。

这是我的代码：

```
<?xml version="1.0" encoding="UTF-8" ?>  
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
  xmlns:ss="urn:schemas-microsoft-com:office:spreadsheet">

  <xsl:output method="xml" version="1.0" encoding="UTF-8" indent="yes"/>

  <xsl:param name="source-producenter" select="'Producers.xml'"/>
  <xsl:param name="source-positioner" select="'positioner.xml'"/>
  <xsl:variable name="producenter" select="document($source-producenter)"/>
  <xsl:variable name="Workbook" select="document($source-positioner)"/>

  <xsl:template match="/">
    <Producers>
      <xsl:for-each select="$producenter//producer">
        <producer>

          <id>
            <xsl:value-of select="id"/>
          </id>

          <name>
            <xsl:value-of select="name"/>
          </name>

          <address><xsl:value-of select="address"/></address>

          <postalcode>
            <xsl:value-of select="postalcode"/>
          </postalcode>

          <city>
            <xsl:value-of select="city"/>
          </city>

          <site>
            <xsl:value-of select="site"/>
          </site>

          <pic>
            <xsl:value-of select="img"/>
          </pic>
          <!--Store id from producent into storeId xsl variable -->
          <xsl:variable name="storedId" select="id"/>
          <!--Using filter to get correct Cells for latitude and longitude and checks if text() in number is equal to our storedId variable-->
          <xsl:variable name="selected"
            select="$Workbook//ss:Cell[@ss:Index='2']/ss:Data[@ss:Type='Number' and text() = $storedId]"/>
          <!--Gets the filtered values-->
          <latitude>
            <xsl:value-of select="$selected//../../ss:Cell[2]/ss:Data"/>
          </latitude>
          <longitude>
            <xsl:value-of select="$selected//../../ss:Cell[3]/ss:Data"/>
          </longitude>
        </producer>
      </xsl:for-each>
    </Producers>
  </xsl:template>
</xsl:stylesheet> 
```

我感谢所有答案，在此先感谢您！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T00:05:38.783

如果您正在转换由 MSExcel 生成的 XML（线索是某些元素上的 ss: 前缀），那么请注意 Excel 使用 @ss:Index 属性的方式。连续的单元格忽略此属性，但要跳过空白的中间单元格，后续单元格有一个@ss:index。重建部分填充的细胞矩阵的几何形状是相当痛苦的。我不太明白这是否与您的挑战有关。

# c++ - 无法解读来自链接器的错误

> ID：13552816
> 
> 赞同：0
> 
> 时间：2012-11-25T16:11:48.373
> 
> 标签：c++, gcc

我的代码在[这里](http://pastebin.com/WWWyNqGM)，在一个名为 new.cpp 的文件中

我在控制台收到以下错误：

```
[usr@host dir]$ gcc new.cpp
/usr/lib/gcc/x86_64-redhat-linux/4.7.2/../../../../lib64/crt1.o: In function `_start':
(.text+0x20): undefined reference to `main'
/tmp/ccVKDKZm.o: In function `__static_initialization_and_destruction_0(int, int)':
new.cpp:(.text+0x23): undefined reference to `std::ios_base::Init::Init()'
new.cpp:(.text+0x32): undefined reference to `std::ios_base::Init::~Init()'
collect2: error: ld returned 1 exit status 
```

我不知道如何调试这个 - 有什么想法吗？

非常感谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-25T16:15:04.630

您遇到的错误是链接错误，您的代码编译良好。该错误告诉您它无法链接到某些标准库元素。

你得到这个的原因是因为你是使用 gcc C 前端的编译器 C++，实际上 gcc 会将它编译为 C++，但不会将它与 C++ 标准库链接。

解决方法很简单，使用c++前端，g++

```
g++ new.cpp 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-25T16:14:10.030

```
int main(); 
```

声明 a `main`，但没有定义一个。尝试

```
int main() {} 
```

相反，它编译（但带有关于有符号/无符号比较的警告）并且在使用 g++ 编译时链接没有问题。

在第 37 行，您是否打算

```
queue >>= bsize; 
```

代替

```
queue >> bsize; 
```

?

# google-app-engine - 在 Google App Engine 中阻止请求处理程序

> ID：13552819
> 
> 赞同：0
> 
> 时间：2012-11-25T16:11:57.907
> 
> 标签：google-app-engine, queue, task, handlers

我正在使用 python 开发一个 GAE 应用程序，我希望它同时服务请求。为此，我将*threadsafe*设置为*true*。我在请求处理程序中定义了两种方法：

POST - 将拉取任务排入队列以异步执行，稍后将自己将拉取任务排入队列作为响应：

```
def post(self):
    message = self.request.body
    taskqueue.add(url='/process', params={'message': message}) #this task will enqueue a pull task as a response 
```

GET - 轮询拉取任务队列以获取响应，直到有可用的响应（我知道我应该找到一种方法来改进该循环，但我只是在尝试）：

```
def get(self):
    (...)
    tasks = queue.lease_tasks_by_tag(1, 100, tag)
    while tasks.__len__() == 0:
        time.sleep(1)
        tasks = queue.lease_tasks_by_tag(1, 100, tag) 
```

客户端应用程序调用 POST，然后调用 GET。我在 POST 方法排队的任务上放置了一个断点，但是当请求处理程序卡在循环中时，它永远不会被调用。我认为应用程序应该有多个线程为请求提供服务，那么它为什么不同时执行推送请求处理程序呢？我很感激这方面的任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T16:22:34.920

我怀疑您从开发服务器看到了问题中描述的行为，该服务器一次不能提供多个请求。因此，当您将断点放在 POST 方法中时，开发服务器实际上会暂停。要按预期查看此行为，请上传到 App Engine。

此外，不要使用 GET HTTP 请求进行轮询，而是尝试使用 App Engines [Channel API](https://developers.google.com/appengine/docs/python/channel/overview)。使用它，您可以直接从任务队列处理程序将响应推送回客户端，以通知该过程已完成（或其他）。

# java - 如何在 Android 项目中执行 System.out.print？

> ID：13552825
> 
> 赞同：4
> 
> 时间：2012-11-25T16:12:42.357
> 
> 标签：java, android

这是一个纯Java项目，检查客户端和服务器之间的连接是否建立，查看接收到的流是否转换为字符串等。我想检查这些步骤是否在我的Android项目中工作。`System.out.print`a或的等价物是什么`.println`？

```
public class TestConnect {

    static String result = "";

    public static void main(String[] args) {

        try {
            HttpClient httpclient = new DefaultHttpClient();
            HttpPost httppost = new HttpPost("http://127.0.0.1/index.php");

            HttpResponse response = httpclient.execute(httppost);
            HttpEntity entity = response.getEntity();
            InputStream is = entity.getContent();
            System.out.println(is);

            try {
                BufferedReader reader = new BufferedReader(
                        new InputStreamReader(is, "UTF-8"), 8);
                StringBuilder sb = new StringBuilder();
                String line = null;

                while ((line = reader.readLine()) != null) {
                    System.out.print(line);
                    sb.append(line + "\n");
                }

                is.close();
                result = sb.toString();
            } catch (Exception e) {
            }

            try {
                JSONArray jArray = new JSONArray(result);

                for (int i = 0; i < jArray.length(); i++) {
                    JSONObject json_data = jArray.getJSONObject(i);
                    json_data.getString("nom");
                    // json_data.getInt("Id_Patients");

                    System.out.println(json_data.getString("nom"));
                    // r.add(json_data.getString("categorie"));
                }
            } catch (Exception e) {
            }
        } catch (Exception e) {
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-25T16:17:47.280

使用内置[记录器](http://developer.android.com/reference/android/util/Log.html)

文档中的复制粘贴：通常，使用

*   日志.v()
*   日志.d()
*   日志.i()
*   日志.w()
*   日志.e()

方法。

详细程度从少到多的顺序是 ERROR、WARN、INFO、DEBUG、VERBOSE。除非在开发期间，否则永远不应将详细信息编译到应用程序中。调试日志被编译，但在运行时被剥离。始终保留错误、警告和信息日志。

提示：一个好的约定是在你的类中声明一个 TAG 常量：

`private static final String TAG = "MyActivity";`

并在后续调用日志方法中使用它。

提示：当您拨打电话时，请不要忘记

`Log.v(TAG, "index=" + i);`

当您构建要传递给 Log.d 的字符串时，编译器使用 StringBuilder 并且至少发生三个分配：StringBuilder 本身、缓冲区和 String 对象。实际上，还有另外一个缓冲区分配和复制，对gc的压力更大。这意味着如果您的日志消息被过滤掉，您可能会做大量工作并产生大量开销。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-25T16:18:45.827

使用[日志](http://developer.android.com/reference/android/util/Log.html)类。

```
Log.i("TAG", "info");
Log.d("TAG", "debug"); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-25T16:19:56.947

您*可以*使用`System.out.println()`它的行为与`Log.i(TAG, String);`

但是在 Android 中，您可以使用各种 Log 方法：

*   `Log.v()`- 详细
*   `Log.d()`- 调试
*   `Log.i()`- 信息
*   `Log.w()`- 警告
*   `Log.e()`- 错误

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-25T16:13:36.533

使用[Log](http://developer.android.com/reference/android/util/Log.html)在 LogCat 中打印所需的值。

```
Log.v(MYTAG, myString); 
```

**`MYTAG :`**您希望与日志消息关联的标签，以便您以后可以归档 LogCat 消息以仅检查所需的消息。

**`myString :`**您要写入日志的值，字符串格式。

您可以根据您希望将日志消息标记为的方式使用 Log.v()、Log.d()、Log.i()、Log.w()、Log.e() 中的任何日志方法。例如，如果要将日志消息标记为*调试*消息，请使用*Log.d()*。

# java - 从 JSP 访问 Struts ActionForm 中的值

> ID：13552826
> 
> 赞同：4
> 
> 时间：2012-11-25T16:12:43.167
> 
> 标签：java, struts, struts-action

我是 Struts 1.3.10 新手，我有一个问题，我的`Action`调用`RegistrationAction`如下：

```
 public final class RegistrationAction extends Action{

        @Override
        public ActionForward execute(ActionMapping mapping,
                                     ActionForm form,
                                     HttpServletRequest request,
                                     HttpServletResponse response)
        throws Exception{

           RegistrationForm formBean = (RegistrationForm) form;
           String userid = formBean.getUserid();
           String pwd = formBean.getPassword(); 
```

然后将用户 ID 和密码保存到`HashMap<String, String>`具有属性的`_userid`和`pwd`。

`RegistrationAction``userid`如果和的验证成功，则调用 JSP `password`。但我发现在 JSP 中，没有使用以下代码显示用户 ID：

```
 <h1>Hello  <bean:write name="RegistrationForm" property="_userid" />!</h1> 
```

匹配`ActionForm RegistrationForm`包含以下`_userid`字段：

```
 public final class RegistrationForm extends ActionForm{

        private String _userid = null;

        public String getUserid(){ return _userid; }
        public void   setUserid(String userid){ _userid = userid; }

        ... 
```

我知道`RegistrationForm`正在填充一个实例，因为我可以`_userid`通过以下方式检索输入：

```
 if(err == RegistrationModel.OK){
            System.out.println("Here " + model.getUserid()); 
```

我认为`RegistrationForm`在 JSP 中的引用，例如：

`<h1>Hello <bean:write name="RegistrationForm" property="_userid" />!</h1>`

会工作。

谁能建议我错在哪里？

感谢受访者。该页面现在可以使用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-25T16:22:02.347

JSP 标记和 JSP EL 访问 bean*属性*，而不是 bean*字段*。所以如果你通过`_userId`了，它会寻找一个叫做 getter 的方法`get_userId()`。由于要访问 getter `getUserId()`，因此需要`userId`在标签内使用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-25T16:22:17.630

尝试

```
<h1>Hello  <bean:write name="RegistrationForm" property="userid" />!</h1> 
```

formbean 的内部名称/编码是什么并不重要。重要的是如何命名 getter 和 setter。你的 getter 被命名`getUserid()`为 javabean 属性是`userid`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-25T16:24:41.753

1) 添加您的注册表以请求

```
request.setAttribute("RegistrationForm",formBean); 
```

2）从您的 _userId 变量中删除 _

# dojo - Dojo 预编译缓存？

> ID：13552832
> 
> 赞同：1
> 
> 时间：2012-11-25T16:13:08.673
> 
> 标签：dojo

我试图阻止 Dojo 再次编译整个基础。我想重用已编译的 Dojo 层/文件并仅添加一个薄的自定义层。

现在在构建配置文件中，您可以将“clean & release”设置为“action”。两者都会再次删除所有已编译的文件。

ps：我使用的是 Github 的 Dojo-Boiler 模板。

有可能吗？

谢谢

# c - 具有更多指向同一位置的指针的 C 内存管理

> ID：13552833
> 
> 赞同：2
> 
> 时间：2012-11-25T16:13:13.227
> 
> 标签：c, function, pointers, memory-management

我正在玩这段代码：

```
#include <stdlib.h>
#include <stdio.h>

void function(int *p){
    free(p);
}

int main(){
    int *i = calloc(3, sizeof(int));
    function(i);
    i[0] = 'a';
    printf("%c\n", i[0]);
    return 0;
} 
```

我希望得到一个错误，但它打印了'a'，如果'a'被释放，为什么它会打印它？如果 main()，函数（int *p）中发生的事情有什么影响？（如果可以，请解释那个“p”指针发生了什么）

假设我在同一个函数中有这两个：

```
int *a = malloc(...);
int *b = a; 
```

它们都指向同一块内存，但是当我必须释放它时，我应该对它们都调用 free 还是只调用其中一个？（如果可能，再次解释原因）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-25T16:14:56.757

那是未定义的行为。释放指针只是告诉操作系统分配的内存可以被覆盖。记忆还在那里……因为没有更好的词了。但是任何事情都可能发生......它现在可能会为您打印一个，有时它可能是另一个字符或数字，因为另一个程序已写入该内存位置......任何事情都可能发生。

对于您的最后一个问题.. a 和 b 只是地址的符号名称。在地址上免费拨打电话很重要，所以无论您是否这样做`free(a)`，`free(b)`您都是伟大的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-25T16:16:07.877

它打印'a'因为你很幸运。这是未定义的行为。它当前“取消分配”，这意味着它（内存位置）被标记为“覆盖”

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-25T16:17:00.770

您已将内存返回到堆中，但尚未重用内存。因此，有时内存内容保持不变，您可以读取和写入它，就好像它仍在使用中一样。

但是你永远不应该使用已经释放的内存，因为不能保证内存保持这种状态多久。

在您的第二部分`a = malloc(...); b = a`中，两个变量都指向相同的内存。由于这只是*一个*字节，因此您必须`free()`恰好*一次*。否则你有一个双重释放，这可能会破坏堆。

*@SSH*更新这是问题：**

 *`free(a)`只将内存返回到堆中。它不修改`a`或`b`。检查`if(a)`或`if(b)`评估为真，内存是否被释放。只有当您设置`a`or`b`为 null 时，检查才会评估为 false，无论内存是否被释放。

所以`free(a)`和`if(a)`是独立的操作。他们不互相影响。

```
a = malloc(10); /* assuming malloc doesn't return NULL */
if (a) {
    /* will be true, memory is NOT freed */
}

free(a);
if (a) {
    /* will be true, although memory is freed */
}

a = malloc(10); /* assuming malloc doesn't return NULL */
a = NULL;
if (a) {
    /* will NOT be true, although memory is NOT freed */
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-11-25T16:20:46.463

您的代码是错误的，但出现错误意味着某些东西正在检查它是否错误。C 中有很多你可以做的事情是错误的，但从未被检查过。这样做通常是因为进行检查会降低性能，或者检查起来非常困难。访问已释放的内存就是其中之一。通过 valgrind 之类的工具运行程序会报告更多此类问题，但程序运行速度会慢得多。

这是 valgrind 的输出：

```
==19080== Invalid write of size 4
==19080==    at 0x8048468: main (main.c:11)
==19080==  Address 0x403b028 is 0 bytes inside a block of size 12 free'd
==19080==    at 0x4006EED: free (vg_replace_malloc.c:366)
==19080==    by 0x8048434: function (main.c:5)
==19080==    by 0x8048463: main (main.c:10)
==19080== 
==19080== Invalid read of size 4
==19080==    at 0x8048472: main (main.c:12)
==19080==  Address 0x403b028 is 0 bytes inside a block of size 12 free'd
==19080==    at 0x4006EED: free (vg_replace_malloc.c:366)
==19080==    by 0x8048434: function (main.c:5)
==19080==    by 0x8048463: main (main.c:10)
==19080== 
```*

# python - 使用 vObject 创建多电话 vCard

> ID：13552836
> 
> 赞同：8
> 
> 时间：2012-11-25T16:13:30.780
> 
> 标签：python, vcf-vcard, vobject

我使用 vObject 创建 vCard。一切正常，除了我不能添加多个电话号码。

现在我正在这样做：

```
v.add('tel')
v.tel.type_param = 'WORK'
v.tel.value = employee.office_phone

v.add('tel')
v.tel.type_param = 'FAX'
v.tel.value = employee.fax 
```

由于它作为键值工作，因此工作电话被传真号码覆盖。

关于谁做对的任何想法？

谢谢！

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-02-06T22:45:20.777

该`add()`方法返回一个特定的对象，可用于填充更多数据：

```
import vobject

j = vobject.vCard()
o = j.add('fn')
o.value = "Meiner Einer"

o = j.add('n')
o.value = vobject.vcard.Name( family='Einer', given='Meiner' )

o = j.add('tel')
o.type_param = "cell"
o.value = '+321 987 654321'

o = j.add('tel')
o.type_param = "work"
o.value = '+01 88 77 66 55'

o = j.add('tel')
o.type_param = "home"
o.value = '+49 181 99 00 00 00'

print(j.serialize()) 
```

输出：

```
BEGIN:VCARD
VERSION:3.0
FN:Meiner Einer
N:Einer;Meiner;;;
TEL;TYPE=cell:+321 987 654321
TEL;TYPE=work:+01 88 77 66 55
TEL;TYPE=home:+49 181 99 00 00 00
END:VCARD 
```

# python - 从 Python 中的生成器获取多个单独的值

> ID：13552839
> 
> 赞同：3
> 
> 时间：2012-11-25T16:13:49.013
> 
> 标签：python, iterator, generator, itertools

**如何从迭代器中的不同索引位置获取多个任意值？**

[How to get the n next values of a generator in a list (python)](https://stackoverflow.com/q/4152376/596361) and [Get the nth item of a generator in Python](https://stackoverflow.com/q/2300756/596361)描述了[`itertools.islice`](http://docs.python.org/2/library/itertools.html#itertools.islice)用于从迭代器中获取任意元素或连续子集的用途。但是，如果我想要迭代器中不同位置的多个任意元素，你不能只使用`islice`'step 参数怎么办？

我正在尝试解决 Project Euler 的[问题 40](http://projecteuler.net/problem=40)。我生成了一串连接整数

```
iteration = (i for i in ''.join(map(str, (i for i in xrange(1,10**6))))) 
```

现在我想获取索引为 1、10、100、1000、10000、100000、1000000 的元素，从 1 开始计数。我不能`islice`在这里使用，因为每次调用都会`next`将当前值转移到右侧。例如

```
next(islice(iteration, 1, 2)) + next(islice(iteration, 3, 4)) 
```

产生“26”而不是“24”。

**更新 (25.11.12, 4:43 UTC+0)** :

感谢所有的建议。我当前的代码如下所示：

```
it = (i for i in ''.join(map(str, (i for i in xrange(1,10**6)))))
ds = [int(nth(it, 10**i-10**(i-1)-1)) for i in range(7)]
return product(ds) 
```

丑陋的论点`nth`是生成一个由 0、8、89、899、8999 等组成的序列。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-25T16:41:05.910

（请注意，有更快的方法来解决 Euler #40。）

我会以不同的方式工作。而不是使用`nth`：

```
>>> from itertools import chain, count, islice
>>> 
>>> it = chain.from_iterable(str(i) for i in count(1))
>>> wanted = {10**i for i in range(7)}
>>> scan_region = islice(it, max(wanted)+1)
>>> digits = [int(x) for i, x in enumerate(scan_region, 1) if i in wanted]
>>> digits
[1, 1, 5, 3, 7, 2, 1] 
```

这样我就不必做任何减法来确保我有正确的索引。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-25T16:24:29.910

这来自[itertools 文档的“食谱”部分](http://docs.python.org/2/library/itertools.html#recipes)。它返回 的`n`第一个元素`iterable`，并在运行时使用它：

```
def nth(iterable, n, default=None):
    "Returns the nth item or a default value"
    return next(islice(iterable, n, None), default) 
```

您可以通过顺序调用它来获取第 1 个、第 10 个、第 100 个等元素（注意迭代器被消耗，并且是零索引的）：

```
first = nth(iteration, 0)
tenth = nth(iteration, 8)  # since we've already taken one
hundredth = nth(iteration, 89)  # since we've already taken ten
# etc 
```

或者，您可以每次都使用`tee`和使用不同的迭代器。`nth`这样你就不必担心你的单个迭代器被消耗掉了。另一方面，如果您的迭代器很长，您可能会开始吞噬内存。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-25T16:37:51.777

除了`nth`如上所述 - 我会考虑简化您的生成器：

```
from itertools import count

def concat():
    for i in count(1):
        for j in str(i):
            yield int(j) 
```

# c# - How Access A Server-Side div In Code Behind (Inside Content Page)

> ID：13552842
> 
> 赞同：2
> 
> 时间：2012-11-25T16:13:55.273
> 
> 标签：c#, asp.net, visual-studio-2010, runatserver, content-pages

How to access a server-side div in code behind (inside content page)?
mean there is a div in content page like below:

```
<div id="MyDiv" runat="server">
</div> 
```

but the code below does not work:

```
 MyDiv.Style.Add("display", "none"); 
```

**EDIT**
I am so sorry and that was my mistake!
The codes upper are correct and work perfect and there is no problem about them. My mistake was about my css and after fixing it every thing was ok.
so really thanks for attention and answers.

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-25T16:34:26.473

to access element from content page you can use below code:

```
HtmlGenericControl myDiv = (HtmlGenericControl)MyDiv;
myDiv.Style.Add("Display", "none"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-25T16:28:42.710

try that code:

```
MyDiv.Style["display"] = "none"; 
```

some other variants here:[How do you change the style of a div programatically](https://stackoverflow.com/q/109134/1735047)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-25T18:42:53.497

What about:

```
MyDiv.Visible = false; 
```

Note that this causes the div not to render at all on the page, so you can't access it on the client side to make it visible later.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-06-22T14:04:43.447

note that if you set an id to your tag which includes non-allowed characters like (-) you will not be able to access it in code-behind.

```
<div id="myDiv" runat=server"> content goes here... </div> 
```

in code-behind:

```
myDiv.visible=false; 
```

that will work.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-07-20T20:12:08.253

For those using Amir answer getting the 'The name '(element id)' does not exist in the current context' try opening the designer.cs file of your asp page and manually add your html element: `protected global::System.Web.UI.HtmlControls.HtmlGenericControl elementidhere;`

# codeigniter - 如何更改网格中的记录数？

> ID：13552845
> 
> 赞同：0
> 
> 时间：2012-11-25T16:14:19.840
> 
> 标签：codeigniter

我正在使用 codeigniter 分页这是我的代码

```
$config['base_url'] = $this->config->base_url().'users/allusers/';
    $config['uri_segment'] = 3;
    $config['next_link'] = 'Next';
    $config['prev_link'] = 'Prev';
    $config['full_tag_open'] = '<div id="pagination">';
    $config['full_tag_close'] = '</div>';   
    $config['total_rows'] = $this->usersmodel->getUsersCount();
    $config['per_page'] = 20;   
    $this->pagination->initialize($config);     
    $data['paging']=$this->pagination->create_links();      
    $data['query']=$this->usersmodel->getAllusers($config['per_page'],$this->uri->segment(3)); 
```

现在我需要将记录号添加到网格中，这是我的网格代码。

```
    $i=1;
    foreach ($query->result() as $row){
     回声 $i;
         回声$行->用户名；
         回声$行->名称；
         回声$行->城市；
         回声$行->地址；        
     $i++;
     }
    ?>

```

即使我在第二页，这里的 $i 总是打印数字 1-20。实际上我需要打印 20-40 我需要知道我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T16:24:44.327

设置`$i`为页码乘以每页的行数。因此，当您循环到数组时，它将在第一页上从 0-20 开始，在第二页上从 20-40 开始。

但是，使用这种方法，您需要确保第一页为 0，第二页为 1，等等...

```
$i = ($page_number - 1) * $config['per_page']; 
// $page_number may be $this->uri->segment(3) from what I can determine from your code.

foreach ($query->result() as $row){
    echo $i; 
    echo $row->username;
    echo $row->name;
    echo $row->city;
    echo $row->address;        
    $i++;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-25T16:49:20.580

您必须将 $i 设置为当前页面的值减一，乘以页面中的行数：

代替：

```
$i=1; 
```

和

```
$i = ( $this->pagination->cur_page > 1 ) ? ( $this->pagination->cur_page - 1 )  * $config['per_page'] : 1 ; 
```

如果 cur_page 不可访问，请尝试使用以下方式扩展分页类：

创建一个名为 MY_Pagination.php 的文件并将其放入 application/libraries/

将此代码添加到扩展分页类；

```
class MY_Pagination extends CI_Pagination {

    public function __construct() {
        parent::__construct();
    }

    public function getCurrentPage() {
        return $this->cur_page;
    }
} 
```

不要忘记确保在 config.php 中将类扩展前缀正确设置为 MY_ （大约第 109 行）

然后你可以像这样访问它：

```
$i = ( $this->pagination->getCurrentPage() > 1 ) ? ( $this->pagination->getCurrentPage() - 1 )  * $config['per_page'] : 1 ; 
```

我使用并稍微修改了这个问题的一些内容：

[如何使用 codeigniter 分页库回显页码？](https://stackoverflow.com/questions/9376279/how-to-echo-page-number-with-codeigniter-pagination-library)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-25T17:17:27.080

您可以在任何地方使用此代码进行分页............

codeIgniter 提供了一个内置的分页类。您可以在用户指南中找到它。

在函数中定义一个起始索引变量，您希望在其中使用分页为零。

```
 public function pagination($start_index = 0) 
```

{

```
 $result = $this->model->get_results($data); //this $data is the argument which you are   passing to your model function. If you are using database to get results array.

 $items_per_page = 10;   //this is constant variable which you need to define

 $filtered_result = array_splice($result, $start_index, ITEM_PER_PAGE_USERS);

 $model['$filtered_result'] = $filtered_result;

 $total_rows = count($result);

$model['page_links'] = create_page_links  (base_url()."/controlelr_name/pagination",ITEM_PER_PAGE_USERS, $total_rows);

$this->load->view('controller_name/view_file_name', $model); 
```

}

```
 function create_page_links($base_url, $per_page, $total_rows) 
```

{

```
 $CI = & get_instance();
 $CI->load->library('pagination');

$config['base_url'] = $base_url;
$config['total_rows'] = $total_rows;
$config['per_page'] = $per_page; 

$CI->pagination->initialize($config); 

return $CI->pagination->create_links(); 
```

}

# elasticsearch - elasticsearch中_search的multi_match正在返回我的索引中的所有项目

> ID：13552846
> 
> 赞同：0
> 
> 时间：2012-11-25T16:14:37.237
> 
> 标签：elasticsearch

这是我的查询：

```
{
  "query": {
    "multi_match": {
      "use_dis_max": false,
      "query": "xxxinvalidqueryxxx",
      "fields": [
        "Title",
        "IsOriginalContent",
        "TextContent"
      ]
    }
  },
  "filter": {},
  "from": 0,
  "size": 5,
  "sort": [
    {
      "_score": "desc"
    }
  ]
} 
```

但是，无论我输入什么查询，它都会返回我索引中的所有项目。为什么是这样？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-25T16:14:37.237

因为`IsOriginalContent`是一个布尔字段。不知道为什么，但是当我删除它时，一切正常。就好像在布尔字段中搜索文本总是以非常低的分数返回“真”。

当我从字段列表中删除任何布尔字段时，查询按预期工作。

# css - 如何垂直居中未知高度的img

> ID：13552847
> 
> 赞同：0
> 
> 时间：2012-11-25T16:14:36.877
> 
> 标签：css, image, positioning, image-scaling

让我从展示我想要实现的结果的插图开始：http: [//jsfiddle.net/2DvF6/1/](http://jsfiddle.net/2DvF6/1/)

```
<div id="controler">
  <img id="i1" src="arrow1.png">
  <img id="i2" src="arrow1.png">
</div>

img{
  width:100%;
}
#i1{
  visibility:hidden;
}
#i2{
  position:absolute;
  top:-50%;
  left:0px;
}
#controler{
  position:absolute;
  width:100px;
} 
```

假设我只控制 div#controler 的宽度并且我不知道（也不想知道）图像的尺寸是多少。我使用 img 标签的好功能，如果未指定高度，则使用纵横比来计算它。现在，如何将图像向上移动 -50% 的高度，如示例所示？我尝试了 position:relative + top:-50% 但它没有任何好处。我提出的“解决方案”需要我放两张图片，一张不可见以强制 div 的大小，另一张可以使用 top:-50%。我试过 vertical-align:middle 但没有帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T06:22:00.423

**css**

```
 img{
      width:100%;
    }
    #i1{
      visibility:hidden;
        position: absolute;
    }
    #i2{

    }
#controler{
    position: absolute;
    width: 100px;
    top: 50px;
    left: 50px;
    border: 1px solid red;
} 
```

**html**

```
<div id="controler">      
    <img id="i1" src="http://vanisoft.pl/~lopuszanski/oblep/img/arrows/1_big.png">
    <img id="i2" src="http://vanisoft.pl/~lopuszanski/oblep/img/arrows/1_big.png">
</div>​ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-25T16:19:21.690

不使用`position: absolute;`，使用`vertical-align: middle;`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-26T19:39:53.053

**尝试使用[http://shipp.co/midway/](http://shipp.co/midway/)** 这是一个 JS 库，可以将任何内容垂直和水平居中。

HTML：

```
<div id="controller" class="centerHorizontal centerVertical">
 <img src="http://www.placehold.it/450x250" alt="Placeholder image">
</div>
<script src="http://code.jquery.com/jquery-1.9.1.min.js"></script>
<script src="midway.min.js" type="text/javascript"></script> 
```

这是一个带有代码的 jsbin：http: [//jsbin.com/apuyiq/2/edit](http://jsbin.com/apuyiq/2/edit)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-25T16:54:25.453

垂直对齐很难像那样工作。我要么把它放到一个表格单元格中，这个单元格处理起来很容易而且很好。或者使用jquery动态获取图片大小并正确定位。

# c# - Surface 上 Windows 8 上 C# 中的相机名称

> ID：13552855
> 
> 赞同：0
> 
> 时间：2012-11-25T16:15:07.330
> 
> 标签：c#, windows-runtime

我正在开发适用于 Windows 8 的应用程序。该应用程序依赖于设备的摄像头。特别是，我对 Microsoft Surface 上的相机名称非常感兴趣。我知道我可以使用 DeviceInformation 类获取设备上每个摄像头的名称。

我的问题是，Microsoft Surface 上的相机的名称是什么？我目前正在一台较旧的戴尔机器上进行开发。我的设备盖子上有一个摄像头。该相机名称中包含“WebCam”。我正在尝试了解是否应该寻找“前”和“后”或其他可能的相机名称。

有人可以告诉我吗？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-25T19:22:09.237

检查特定名称听起来是个很糟糕的主意，不是吗？Surface 不是唯一销售的 Windows 8/Windows RT 设备，而且很可能不是最常见的设备。您可以获得 device.EnclosureLocation。[如果 EnclosureLocation 不为空，则面板](http://msdn.microsoft.com/en-us/library/windows/apps/windows.devices.enumeration.panel)为您提供有关摄像头是前置摄像头还是后置摄像头的信息（如果该信息可用）。

如果您查看 WinRT XAML 工具包中的[CameraCaptureControl](http://winrtxamltoolkit.codeplex.com/SourceControl/changeset/view/54997eced4de#WinRTXamlToolkit/Controls/CameraCaptureControl.cs) - 它已经完成了一些工作以使用户能够选择前置或后置摄像头。

# javascript - 如何在 qooxdoo 桌面应用程序中设置浏览器窗口标题？

> ID：13552856
> 
> 赞同：1
> 
> 时间：2012-11-25T16:15:20.653
> 
> 标签：javascript, qooxdoo

我在文档中找不到任何信息。它默认为应用程序的名称，但如何更改标题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T07:12:17.347

原因是这就是普通的 DOM API。您可以只设置文档的标题属性，例如

```
document.title = "new title"; 
```

您可以在 MDN 文档中找到更多详细信息：[https ://developer.mozilla.org/en-US/docs/DOM/document.title](https://developer.mozilla.org/en-US/docs/DOM/document.title)

# facebook-graph-api - 获取任何人的朋友

> ID：13552858
> 
> 赞同：2
> 
> 时间：2012-11-25T16:15:50.237
> 
> 标签：facebook-graph-api

是否可以获取任何用户的朋友列表？在 facebook Graph API 中指定我们可以通过向 /PROFILE_ID/friends 发出 HTTP GET 来获取好友列表。

当我尝试时出现错误：

```
{
  "error": {
    "message": "Unsupported operation", 
    "type": "FacebookApiException", 
    "code": 100
  }
} 
```

允许这样的操作吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-25T17:57:56.310

不，这不对。

您只能查找使用“read_friendlists”权限授权您的应用的用户的朋友。即使他们的好友列表是公开的，您也无法获取其他用户的好友列表。似乎 FB 有意限制了这一点。

顺便说一下，错误代码 100 表示参数无效。所以，这说明这是不可能的。

# swing - 为什么在 Scala 中需要单独的 Swing API

> ID：13552860
> 
> 赞同：0
> 
> 时间：2012-11-25T16:15:56.070
> 
> 标签：swing, scala

Scala 内置了用于 Swing的单独[API 。](http://www.scala-lang.org/api/current/scala/swing/package.html)为什么语言设计者会做出这样的决定？

Java 的 swing 包可用作任何其他 java 库，以在 Scala 中构建 GUI 应用程序。那么当现有的包装器已经很流行时，需要一个新的包装器来解决这个问题。

PS：请具体回答！我们都知道 Scala 的一般优势。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-25T21:24:56.970

这涉及到“Scala 的一般优势”，但 Scala 减少了连接侦听器的痛点，这是 Swing 中组装的主体。

最近的问题示例[在这里](https://stackoverflow.com/questions/13199439/listeners-and-reactions-in-scala-swing/)。你可以使用 scala.react 更进一步。

# json - 用主干循环遍历json文件并用下划线模板显示

> ID：13552863
> 
> 赞同：0
> 
> 时间：2012-11-25T16:16:08.723
> 
> 标签：json, backbone.js, underscore.js

我正在使用backbone.js 和下划线模板系统来动态显示来自json 文件的数据。当我使用 <%console.log('template test') %> 控制台登录 html 时，我的模板不起作用 尝试使用下划线模板时我做错了什么？另外，如何遍历 json 文件并获取“价格”并与模板一起显示？

如果问题不清楚，我会尝试解释更多。任何帮助表示赞赏，谢谢！

如下所示的 json 文件示例

```
//addToCartResponce.json//

  {    
 "response":{
    "headers":{
       "store":"123",
        "id":"321"
     },
     "cart":{
        "message":"na",
       "orderId":"333",
        "orderItems":{
           "orderItem":[
               {
                "price":"$1.00",
                 "qty":"1",
                  "methods":{
                     "selectedMethod":{
                        "SelectedFFMCenter":"DDC",
                        "SelectedStore":"na"
                     }
                  }
               }
            ]
         }
      }
   }
} 
```

这是我的主干文件。

收藏

```
var cartCollection = Backbone.Collection.extend({
      el: this,
      url: function() {
          return window.location.href + '/assets/js/ajax/addToCartResponce.json'
       },
       parse: function(resp) {
           return resp.response;
       },
          initialize: function() {
                  this.fetch({
                    async: false
                   });

                  this.on('add',this.cartFunction());
                  var shoppingCart = this.pluck('cart'); 
                  console.log("this.pluck('cart')");
                  console.log(shoppingCart);

         }, // end of initialize

        cartFunction: function(){
           console.log('cart Functon');

        }

});  // The console logs in cartCollection are working. 
```

看法

```
cartContent = Backbone.View.extend({
            el: $('.cartContent'),
            initialize: function() {
               this.render();
         },

         render: function( ){
           this.collection = new cartCollection();
           var cart_template = _.template( $(".cartContentTemplate").html() ); 
           this.$el.html( cart_template );

               return this; 
              }
 });

   cartView = new cartContent(); 
```

HTML

```
<script type="text/template" class ="cartContentTemplate">  
    <div class="cartContent">
      <% console.log('template test'); %>
    </div>
</script> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-25T17:59:14.323

`_.template`返回一个函数。您需要将所需的数据（或什么都没有）传递给该函数以取回填充的 html。将渲染重写为

```
render: function () {
    this.collection = new cartCollection();
    var cart_template = _.template( $(".cartContentTemplate").html() ),
        html = cart_template();

    this.$el.html(html);

    return this; 
} 
```

**如何显示价格？**

您可以通过以下两个链接阅读有关编写下划线模板的更多信息：

[http://www.bennadel.com/blog/2411-Using-Underscore-js-Templates-To-Render-HTML-Partials.htm](http://www.bennadel.com/blog/2411-Using-Underscore-js-Templates-To-Render-HTML-Partials.htm)

[如何使用 underscore.js 作为模板引擎？](https://stackoverflow.com/questions/4778881/how-to-use-underscore-js-as-a-template-engine)

要回答你的问题，

```
<script type="text/template" id="cartContentTemplate">  
    <div class="cartContent">
      <% if (cart && cart.orderItems) { 
            _.each(cart.orderItems.orderItem, function (item) { %>

             <div> Price: <%- item.price %> </div>

      <% });
      } %>
    </div>
</script> 
```

另一个观察结果是，您正在使用类选择器获取模板脚本。脚本标签并不意味着具有类属性。它不是有效的 html。虽然它目前可能在某些浏览器中工作，但它也很容易在当前或将来的其他浏览器中不工作。您应该改用 id 选择器。重写你的模板如下：

```
<script type="text/template" id="cartContentTemplate">  
    <div class="cartContent">
      <% console.log('template test'); %>
    </div>
</script> 
```

并使用读入模板

```
var cart_template = _.template($("#cartContentTemplate").html()); 
```

# mozilla - NPAPI 教程，Gecko SDK

> ID：13552868
> 
> 赞同：0
> 
> 时间：2012-11-25T16:17:12.303
> 
> 标签：mozilla, npapi, geckosdk

嗨，我正在关注mozilla 开发人员网站上的[这个简单教程。](https://developer.mozilla.org/en-US/docs/Compiling_The_npruntime_Sample_Plugin_in_Visual_Studio)

我在构建阶段遇到了一些错误，而我在教程中无法遵循的一件事是在版本问题下

> 1.  如果您使用 Gecko SDK v1.9 及更高版本，您可能需要将文件夹 \plugin、\nspr 和 \java 添加为包含目录

从 C:\xulrunner-sdk\include 文件夹中，我找到了“nspr”文件夹，但没有名为“plugin”或“java”的文件夹。我找到了一个名为 C:\xulrunner-sdk\include\mozilla\plugin* *s* * 的文件夹。但是没有类似于 Java 的名称。任何人都知道它们在哪里，我从[这里](https://developer.mozilla.org/en/docs/Gecko_SDK)下载了 Gecko SDK ，那是教程中的链接。如果有人对此有更多经验并且可以提供帮助，那么感谢分享:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T10:12:02.207

可悲的是，那篇文章已经过时了；您不需要 Gecko SDK（我更新了文章，但只是快速解决了明显的问题，并没有检查引用的示例等）。

构建 NPAPI 插件所需的只是**[NPAPI SDK](http://code.google.com/p/npapi-sdk/)**中的标头。
[这个插件](https://github.com/bsmedberg/blue-fishmonger-testplugin)应该有一个正确配置的 VS 解决方案，尽管您可能必须采用 NPAPI SDK 的本地副本的包含路径。

# android - 如何在图像切换器中启用捏缩放？

> ID：13552874
> 
> 赞同：6
> 
> 时间：2012-11-25T16:17:31.163
> 
> 标签：android, pinchzoom, imageswitcher

应用程序的界面由以下项目组成。

1.  一个填满整个屏幕的图像切换器。
2.  一个`next`按钮。
3.  一个`previous`按钮。

**我怎样才能使用`pinch zooming`中的`image Switcher`？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T10:31:55.947

**实现捏缩放手势**

捏缩放手势类似于拖动手势，不同之处在于它在第二根手指按下屏幕时开始 ( `ACTION_POINTER_DOWN`)。

```
案例 MotionEvent.ACTION_POINTER_DOWN：
oldDist = 间距（事件）；
Log.d(TAG, "oldDist=" + oldDist);
if (oldDist > 10f) {
保存矩阵.set(矩阵);
中点（中点，事件）；
模式=缩放；
Log.d(TAG, "mode=ZOOM" );
}
休息;

案例 MotionEvent.ACTION_MOVE：
如果（模式==拖动）{
// ...
}
否则 if (mode == ZOOM) {
浮动 newDist = 间距（事件）；
Log.d(TAG, "newDist=" + newDist);
if (newDist > 10f) {
matrix.set(savedMatrix);
浮动比例 = newDist / oldDist;
matrix.postScale（规模，规模，mid.x，mid.y）；
}
}
休息;

```

当我们得到第二根手指的向下事件时，我们计算并记住两根手指之间的距离。在我的测试中，Android 有时会（错误地）告诉我有两个手指在几乎完全相同的位置被按下。因此，如果距离小于任意数量的像素，我添加了一个检查以忽略该事件。如果比那个大，我们记住当前的变换矩阵，计算两个手指的中点，开始缩放。

当我们在缩放模式下移动事件到达时，我们再次计算手指之间的距离。如果太小，则忽略该事件，否则我们恢复变换矩阵并围绕中点缩放图像。

比例尺只是新距离除以旧距离的比率。如果新的距离更大（即手指之间的距离更远），那么 scale 将大于 1，从而使图像更大。如果它更小（手指靠得更近），则比例将小于 1，从而使图像更小。当然，如果一切都相同，则比例等于 1，图像不会改变。

现在让我们定义spacing() 和midPoint() 方法。

**两点之间的距离**

为了找出两个手指之间的距离，我们首先构造一个向量 (x, y)，它是两点之间的差。

然后我们使用欧几里得距离的公式来计算间距：

```
私人浮动间距（MotionEvent 事件）{
浮动 x = event.getX(0) - event.getX(1);
浮动 y = event.getY(0) - event.getY(1);
返回 FloatMath.sqrt(x * x + y * y);
}

```

点的顺序无关紧要，因为当我们将它们平方时，任何负号都会丢失。请注意，所有数学都是使用 Java 的 float 类型完成的。虽然某些 Android 设备可能没有浮点硬件，但我们这样做的频率并不足以担心其性能。

**两点的中点**

计算两点中间的点更容易：

```
私人无效中点（PointF点，MotionEvent事件）{
浮动 x = event.getX(0) + event.getX(1);
浮动 y = event.getY(0) + event.getY(1);
点.set(x / 2, y / 2);
}

```

我们所做的只是取它们的 X 和 Y 坐标的平均值。为了避免可能导致应用程序明显暂停的垃圾收集，我们重用现有对象来存储结果，而不是每次都分配和返回一个新对象。现在尝试在您的手机上运行该程序。用一根手指拖动图像，并通过向内或向外捏合两指来放大图像。为了获得最佳效果，不要让您的手指之间的距离超过一英寸左右。否则，您将开始遇到我之前提到的 API 中的一些错误。

[这是实用书架出版的 Hello, Android 3rd edition 的节选。如需更多信息或购买平装本或 PDF 副本，请访问](http://www.zdnet.com/blog/burnette/how-to-use-multi-touch-in-android-2/1747) [http://www.pragprog.com/titles/eband3](http://www.pragprog.com/titles/eband3)

# symfony - Hostgator 共享主机上的 Symfony 2.1 控制台

> ID：13552878
> 
> 赞同：1
> 
> 时间：2012-11-25T16:18:02.100
> 
> 标签：symfony, console, command-line-interface, shared-hosting

我在 Hostgator 注册了一个共享主机包。到目前为止一切顺利，但我在通过 ssh 执行 Symfony 2.1 控制台命令时遇到了麻烦。

Hostgator 默认提供 php v5.2。经过一番谷歌搜索，我发现将以下行添加到文档根 .htaccess 文件将打开 php v5.3，这是 Symfony 的要求：

```
Action application/x-hg-php53 /cgi-sys/php53
AddType application/x-httpd-php53 .php
suPHP_ConfigPath /opt/php53/lib 
```

伟大的！Symfony 页面呈现时没有错误。唯一的问题是当我使用 CLI 控制台执行以下命令时：

```
app/console cache:clear 
```

或者

```
app/console doctrine:schema:update --force 
```

然后我得到典型的 PHP 版本兼容性错误：

```
Parse error: syntax error, unexpected T_STRING, expecting T_CONSTANT_ENCAPSED_STRING or '(' in /home/mysite/public_html/Symfony/app/console on line 13 
```

由 php 5.2 引擎解析的 php 5.3 “use”关键字引起。

在花了 1 小时试图说服 Hostgator 代表 Symfony 控制台脚本中没有语法错误，但他们的 CLI 正在运行 php 5.2 之后，我正在向你们寻求有关如何让 CLI 在 Hostgator 上运行 php 5.3 的帮助.

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-11T04:57:07.253

我做到了！

要在 hostgator 中使用 php5.3 运行命令，您必须执行：`/opt/php53/bin/php`

例如，symfony 控制台：

```
/opt/php53/bin/php app/console 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-05-28T16:41:24.207

我也有同样的问题。但是我使用 PHP 7，所以从我的 SSH 中我输入了一行：

```
/opt/php70/bin/php bin/console 
```

它正在工作。

# linux - 我可以从已知的 MAC 地址确定当前 IP 吗？

> ID：13552881
> 
> 赞同：37
> 
> 时间：2012-11-25T16:18:36.233
> 
> 标签：linux, networking

我有一个 shell 脚本，它使用 etherwake 唤醒本地网络上的一台机器。机器唤醒后，我不确定IP地址。

在尝试回答我自己的问题时，我想出了：

```
ip=$(ping -c 1 hostname | head -1 | awk '{print $3}' | sed 's/[()]//g') 
```

这个解决方案规定我知道远程机器的主机名，这不是那么繁琐。

如果我只知道 MAC 地址，有没有办法获取 IP？

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2012-11-25T16:44:46.847

我认为没有一个命令可以做到这一点。一种技巧是在子网上进行 ping 扫描或广播 ping，然后在 arp 表中查询 MAC 地址的 IP 地址。显然不是一个理想的解决方案。例子：

```
nmap -sP 192.168.1.0/24 >/dev/null && arp -an | grep <mac address here> | awk '{print $2}' | sed 's/[()]//g' 
```

这里 nmap 将执行 ping 扫描并填充您的 arp 缓存。扫描完成后，可以使用 arp 命令打印 arp 表，然后使用 grep/awk 提取 IP 地址。您可以尝试用广播 ping 替换 nmap，但这可能不那么可靠。

* * *

## 回答 #2

> 赞同：32
> 
> 时间：2016-04-01T22:38:44.037

我会简单地使用

```
ip neighbor | grep -i "00:1E:C9:56:3C:8E" | cut -d" " -f1 
```

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2017-03-01T00:08:13.593

这里介绍的其他方法不可靠，例如 的输出`ip neighbor`并不总是包含最近的状态，所以我最终使用 重新扫描网络`arp-scan`，因此我只是使用扫描的输出来获取给定的 IP 地址MAC地址。

要扫描单个网络接口，只需使用以下命令：

```
arp-scan -q -l --interface en4 2>/dev/null | grep "00:1E:C9:56:3C:8E" | cut -d$'\t' -f1 
```

以下命令一次扫描多个网络接口：

```
{ arp-scan -q -l --interface en0 2>/dev/null & arp-scan -q -l --interface en4 2>/dev/null } | grep "00:1E:C9:56:3C:8E" | cut -d$'\t' -f1 
```

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2017-12-13T13:06:01.483

您可以尝试 arp 命令并通过 mac 地址 grep

```
arp -a | grep "00:00:00:00:00:00" 
```

（用你自己的mac地址替换）

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2014-07-11T22:53:18.547

我写了一个可以做到这一点的python模块：

```
>>> from ethip import ethip
>>> print ethip.getip('00:1E:C9:56:3C:8E', '10.5.42.255')
10.5.42.3 
```

我只是发出快速的 arp 请求来查找 ip，然后缓存它找到的内容。代码在github上。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2020-08-20T05:45:54.473

我知道是旧的，但 linux 中最简单的方法是：

```
arp -a | grep "00:1E:C9:56:3C:8E" 
```

这样做的目的是忽略是否连接在一个或另一个网络中，同时每个设备都可以看到彼此。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2017-06-24T13:35:51.287

[尼尔的](https://stackoverflow.com/a/13553111/5480836)回答确实太长了。我必须让它在 60k+ IPs 范围内工作。完成这项工作的诀窍是在每次 ping 后检查 arp 表。这也解决了根本问题：不需要。我是用 Java 做的（参见[这里的 threadedScan()](https://gitlab.com/eaz/VMLauncher/blob/master/src/comp/src/liv/utils/NetworkUtils.java#L72)），因为我在 Windows 上，需要一个在尝试使用 start 命令 ping 时不会产生数千个 cmd 提示的解决方案。使用固定线程池，它的工作速度更快（我的 60k 范围约为 10 秒）。

# python - Django 对象版本

> ID：13552883
> 
> 赞同：1
> 
> 时间：2012-11-25T16:18:42.217
> 
> 标签：python, django

我希望能够使用版本将对象存储在我的数据库中。因此，每当对象发生更改时，都会创建一个具有更高版本的新对象。这允许来自其他模型的对象仍然使用旧版本的对象。

我不想对我的模型进行版本控制，而是对我的对象进行版本控制。

示例：假设对于网上商店，一种型号是商品，另一种型号是订单。如果某个客户下订单，他当然想购买他在下订单时看到的商品。但是，如果商品价格发生变化，这不应该对已经下的订单有任何影响，而只会影响未来的订单。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T16:55:24.727

我认为这不是网上商店示例的实用解决方案，因为您只需要某些数据保持冻结状态，并且通常将名称、SKU 和价格复制到订购的商品模型更实用。您很可能不需要冻结库存水平、详细描述或图像等内容。

但是，由于您一般都在问，您可能想看看：

[http://www.djangopackages.com/grids/g/versioning/](http://www.djangopackages.com/grids/g/versioning/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-25T16:58:46.357

基本上，如果您想在每次调用时创建新对象`save`，只需清除它的 pk。

```
class PersistentModel(models.Model) 
   def save(self):
        if self.pk is not None:
            self.pk = None
        return super(PersistentModel, self).save() 
```

# c++ - 尝试从托管类创建非托管线程

> ID：13552889
> 
> 赞同：0
> 
> 时间：2012-11-25T16:19:17.593
> 
> 标签：c++, multithreading, visual-c++, unmanaged, managed

这是我的场景。

```
void SecondThread
{
    //more code
}

private: System::Void Button_Click(System::Object^  sender, System::EventArgs^  e) 
{
    //where I click my button event
    CreateThread(NULL, 0, (LPTHREAD_START_ROUTINE)&SecondThread, 0, 0, NULL);
} 
```

如您所见，我正在尝试使用指向 .NET 函数中的非托管函数的指针。它给出了这个错误。

**“指向成员的指针对托管类无效。”**

有谁知道我怎样才能摆脱它？另外，**我对**启动线程不感兴趣，因为我需要使用非托管代码：

*ThreadStart *myThreadDelegate = new ThreadStart(this, repeat); trd->开始（）；*

谢谢，非常感谢。

# c# - 将地图叠加层绑定到 Windows Phone 8 中的集合

> ID：13552893
> 
> 赞同：0
> 
> 时间：2012-11-25T16:20:04.190
> 
> 标签：c#, windows-phone-8

我目前正在为 Windows Phone 8 开发应用程序，由于所有网络操作的异步性，我遇到了一些问题。

我有一个地理坐标项目列表，我从存储在我自己网站上的 XML 文件中检索到这些项目。这些点代表我想在地图上显示的路径。

此列表可以轻松更改为 MapOverlay 对象列表。但是，使用

```
map.Layers.Add(...); 
```

没有帮助，因为列表不是在调用时构建的（XML 加载和读取是异步的）。

查看文档后，看起来单个 MapOverlay XAML 项目可以轻松绑定到 GeoCoordinate 对象。但是，我找不到任何方法将 MapLayer XAML 项绑定到 GeoCoordinate 对象的集合，我认为这很有意义......我在 Internet 上找到的所有解决方案都仅适用于 Windows Phone 7。

如果有人有想法，我会很高兴听到。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-25T16:32:40.503

[在@ MapOverlay binding not working](https://stackoverflow.com/questions/13408379/mapoverlay-binding-not-working/13429841#13429841)上查看我对有关 XAML MapOverlay 集合绑定的相同问题的回答

如果这没有帮助，请告诉我。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T17:21:35.220

我最终决定通过代码添加叠加层。使用事件，这很容易做到，而且不那么难看。对于那些对事件感兴趣的人，本教程可能会很有用：[MSDN 事件教程](http://msdn.microsoft.com/en-us/library/aa645739%28v=vs.71%29.aspx)

# objective-c - xcode sql语句

> ID：13552894
> 
> 赞同：0
> 
> 时间：2012-11-25T16:20:05.200
> 
> 标签：objective-c, xcode

您好我想从表中的名称等于名称文本字段的表中选择一个密码，它给了我这个错误：“在 UIView 类型的对象上找不到属性文本”？

NSString *queryUser = [NSString stringWithFormat:@"SELECT Password from Customer_tbl WHERE name=\"%@\"",txtEmail.text];

。H

```
 #import <UIKit/UIKit.h>
#import "/usr/include/sqlite3.h"

@interface LoginViewController : UIViewController

{
  NSString *databasePath;

  sqlite3 *customerDB;

}

@property (weak, nonatomic) IBOutlet UIView *txtEmail;
@property (weak, nonatomic) IBOutlet UIView *txtPassword;
@property (weak, nonatomic) IBOutlet UIButton  *btnLogin;
@property (weak, nonatomic) IBOutlet UILabel *lblStatus;
@property (weak, nonatomic) IBOutlet UITextView *txtView;

- (IBAction)backGroundTouched:(id)sender;
- (IBAction)textFieldReturn:(id)sender;

-(IBAction)findUser;

    //.m

#import "LoginViewController.h"

@implementation LoginViewController
@synthesize txtEmail;
@synthesize txtPassword;
@synthesize btnLogin;
@synthesize lblStatus;
@synthesize txtView;

-(void) findUser
{

  const char *dbPath = [databasePath UTF8String];
  sqlite3_stmt *statement;

  if(sqlite3_open(dbPath, &customerDB)== SQLITE_OK)
  {
    NSString *queryUser = [NSString stringWithFormat:@"SELECT Password from Customer_tbl WHERE name=\"%@\"",txtEmail];

    const char *query_stmt = [queryUser UTF8String];

    if (sqlite3_prepare_v2(customerDB, query_stmt, -1, &statement, NULL)== SQLITE_OK) {
      if (sqlite3_step(statement)== SQLITE_ROW) {
        NSString *name = [[NSString alloc]initWithUTF8String:(const char *)sqlite3_column_text(statement,0)];
        txtView.text = name;
      }
    }
  }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-25T17:12:42.127

你已经定义了

```
@property (weak, nonatomic) IBOutlet UIView *txtEmail;
@property (weak, nonatomic) IBOutlet UIView *txtPassword; 
```

当我怀疑（根据您的描述）他们应该是

```
@property (weak, nonatomic) IBOutlet UITextField *txtEmail;
@property (weak, nonatomic) IBOutlet UITextField *txtPassword; 
```

# c# - 从字典中删除元素

> ID：13552898
> 
> 赞同：14
> 
> 时间：2012-11-25T16:20:26.577
> 
> 标签：c#, list, collections, dictionary

我有一个字典，其中项目是（例如）：

1.  “一”，4
2.  “乙”，44
3.  “再见”，56
4.  “C”，99
5.  “D”，46
6.  "6672", 0

我有一个清单：

1.  “一种”
2.  “C”
3.  “D”

我想从我的字典中删除所有键**不在**我列表中的元素，最后我的字典将是：

1.  “一”，4
2.  “C”，99
3.  “D”，46

我能怎么做？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-11-25T16:31:32.643

构造新 Dictionary 以包含列表中的元素更简单：

```
List<string> keysToInclude = new List<string> {"A", "B", "C"};
var newDict = myDictionary
     .Where(kvp=>keysToInclude.Contains(kvp.Key))
     .ToDictionary(kvp=>kvp.Key, kvp=>kvp.Value); 
```

如果修改现有字典很重要（例如，它是某个类的只读属性）

```
var keysToRemove = myDictionary.Keys.Except(keysToInclude).ToList();

foreach (var key in keysToRemove)
     myDictionary.Remove(key); 
```

注意 ToList() 调用 - 实现要删除的键列表很重要。如果您尝试在不实现 的情况下运行代码`keysToRemove`，您可能会遇到异常，说明“集合已更改”之类的内容。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-11-25T16:25:18.587

```
// For efficiency with large lists, for small ones use myList below instead.  
var mySet = new HashSet<string>(myList);

// Create a new dictionary with just the keys in the set
myDictionary = myDictionary
               .Where(x => mySet.Contains(x.Key))
               .ToDictionary(x => x.Key, x => x.Value); 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-11-25T17:24:14.367

```
dict.Keys.Except(list).ToList()
    .ForEach(key => dict.Remove(key)); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-25T16:25:41.760

**代码：**

```
public static void RemoveAll<TKey, TValue>(this Dictionary<TKey, TValue> target,
                                           List<TKey> keys)
{
    var tmp = new Dictionary<TKey, TValue>();

    foreach (var key in keys)
    {
        TValue val;
        if (target.TryGetValue(key, out val))
        {
            tmp.Add(key, val);
        }
    }

    target.Clear();

    foreach (var kvp in tmp)
    {
        target.Add(kvp.Key, kvp.Value);
    }
} 
```

**例子：**

```
var d = new Dictionary<string, int>
            {
                {"A", 4},
                {"B", 44},
                {"bye", 56},
                {"C", 99},
                {"D", 46},
                {"6672", 0}
            };

var l = new List<string> {"A", "C", "D"};

d.RemoveAll(l);

foreach (var kvp in d)
{
    Console.WriteLine(kvp.Key + ": " + kvp.Value);
} 
```

**输出：**

```
A: 4
C: 99
D: 46 
```

# genetic-algorithm - 有人知道关于种群内效应的任何事情吗？

> ID：13552899
> 
> 赞同：2
> 
> 时间：2012-11-25T16:20:33.623
> 
> 标签：genetic-algorithm, evolutionary-algorithm

对于我正在做的一个项目，我计划构建一个具有群体内效应的异步蜂窝 EA。最后一点（群体内效应）是我的问题所在。

我所说的群体内效应是指一个细胞中个体的适应度取决于相邻细胞中个体的工作方式。这并不意味着它取决于相邻细胞的**适应度，而****仅取决于它们的工作**。

因此，如果细胞中的个体通过进化改变它的参数，它的适应度可能会提高。个体的内部变化可能对相邻细胞中个体的适应度产生积极、消极或根本没有影响。同样，当某些个体的适应度下降时，相邻单元格中个体的适应度也会提高、下降或完全没有变化。

请注意，我不是在谈论邻居之间的传播效应。细胞中的个体可以与邻居交配，通过这种交配系统，邻居已经对彼此产生了影响。然而，在这种情况下，我具体谈论的是现有个体，如果其附近的个体改变他们的参数，则需要重新测试。

这会导致您永远无法完成对个体的测试，因为改变一个个体的一个参数可能会改变对相邻个体的工作。然而，这并不重要，因为它将是一个在生产中不断自我学习的系统。

我的问题来了：我已经阅读了很多关于蜂窝 EA 的文章，但我找不到关于这些群体内影响的任何信息。这个“人口内部”当然是我自己想到的一个词，所以我什至不知道我是否在寻找正确的东西。

有人知道这些人群内的影响吗？它是否存在于有关 EA 的文献中，还是会是一个全新的事物？欢迎所有提示！

# python - 将多个参数传递给python中的函数的方法

> ID：13552907
> 
> 赞同：8
> 
> 时间：2012-11-25T16:21:11.547
> 
> 标签：python, python-2.7, parameters, parameter-passing

我写了一个调用函数的python脚本。该函数将 7 个列表作为函数内部的参数，如下所示：

```
def WorkDetails(link, AllcurrValFound_bse, AllyearlyHLFound_bse, 
                AlldaysHLFound_bse, AllvolumeFound_bse, 
                AllprevCloseFound_bse, AllchangePercentFound_bse, 
                AllmarketCapFound_bse): 
```

除了`link`列表之外的所有参数。但这使我的代码看起来很丑陋。我将这些列表传递给此函数，因为该函数在所有这些列表中附加了很少的值。对于其他用户，我怎样才能以更易读的方式做到这一点？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2017-08-03T07:04:35.783

**测试功能：**

您可以使用表示的多个参数和表示并传递给函数的`*args`多个关键字：`**kwargs`

```
def test(*args, **kwargs):
    print('arguments are:')
    for i in args:
        print(i)

    print('\nkeywords are:')
    for j in kwargs:
        print(j) 
```

**例子：**

然后使用任何类型的数据作为参数，使用尽可能多的参数作为函数的关键字。该函数将自动检测它们并将它们分离为参数和关键字：

```
a1 = "Bob"      #string
a2 = [1,2,3]    #list
a3 = {'a': 222, #dictionary
      'b': 333,
      'c': 444}

test(a1, a2, a3, param1=True, param2=12, param3=None) 
```

**输出：**

```
arguments are:
Bob
[1, 2, 3]
{'a': 222, 'c': 444, 'b': 333}

keywords are:
param3
param2
param1 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-25T16:26:06.667

You can change it to:

```
def WorkDetails(link, details): 
```

Then invoke it as:

```
details = [ AllcurrValFound_bse, AllyearlyHLFound_bse, 
            AlldaysHLFound_bse, AllvolumeFound_bse, 
            AllprevCloseFound_bse, AllchangePercentFound_bse, 
            AllmarketCapFound_bse ]
workDetails(link, details) 
```

And you would get the different values out of details by:

```
AllcurrValFound_bse = details[0]
AllyearlyHLFound_bse = details[1]
... 
```

It would be more robust to turn `details` into a dictionary, with the variable names as keys, so take your pick between a few more lines of code vs. defensive programming =p

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-25T16:25:30.293

You could use `*args` if you don't need to use names for your lists:

```
def WorkDetails(link, *args):
    if args[0] == ... # Same as if AllcurrValFound_bse == ...
        ...

 # Call the function:
 WorkDetails(link, AllcurrValFound_bse, AllyearlyHLFound_bse, AlldaysHLFound_bse, AllvolumeFound_bse, AllprevCloseFound_bse, AllchangePercentFound_bse, AllmarketCapFound_bs) 
```

Or you could use a dictionary

```
def WorkDetails(link, dict_of_lists):
    if dict_of_lists["AllcurrValFound_bse"] == ...
        ...

# Call the function
myLists = {
    "AllcurrValFound_bse": AllcurrValFound_bse,
    "AllyearlyHLFound_bse": AllyearlyHLFound_bse,
    ...,
    ...
}
WorkDetails(link, myLists) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-25T18:50:46.490

我认为使用 **kwarg 更好。看这个例子：

```
def MyFunc(**kwargs):
    print kwargs

MyFunc(par1=[1],par2=[2],par3=[1,2,3]) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-05-29T02:46:20.070

您需要传递这么多列表表明您的函数不只做一件事，您应该通过将其分解为更小的函数和/或将其转换为类来重构它。您可以将参数作为关键字传递，或将任意数量的参数传递给函数，如[StackOverflow 页面](https://stackoverflow.com/questions/36901/what-does-double-star-and-star-do-for-parameters)所述，但如果您的函数不止做一件事，其他人仍然难以阅读和理解。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-03-13T12:07:30.230

通常，不建议向函数传递超过 3 个参数。这不是特定于 python，而是一般的软件设计。[您可以在此处](https://softwareengineering.stackexchange.com/q/145055/173639)阅读有关如何减少传递给函数的参数数量的更多信息。

遵循先前答案的观点，但从更一般的角度来看，我想补充一点，有几种方法可以使您的代码更具可读性：

*   将您的函数划分为具有较少参数的更简单的函数（定义一个接受变量的函数`link`, `specific_list`, `list_type`。通过这样做，您可以在`WorkDetails`函数中检测您传递的列表`list_type`并添加正确的元素`specific list`）
*   创建一个传递给您的函数的参数对象/数据结构（这是以前的答案建议使用[列表](https://stackoverflow.com/a/13552963/3301367)，[字典](https://stackoverflow.com/a/13552957/3301367)...）

希望这有帮助。

# swing - JTree自定义模型添加/删除/更改节点

> ID：13552909
> 
> 赞同：1
> 
> 时间：2012-11-25T16:21:34.283
> 
> 标签：swing, listener, jtree, treemodel

我遇到了这样的麻烦。我有一个覆盖数据库结构并使用 JTree 来显示项目。这是我对模型的简化视图：

```
public class MenuTreeModel implements TreeModel {
private MenuList ml;

public MenuTreeModel( MenuList ml ) {
    this.ml = ml;
}

@Override
public void addTreeModelListener(TreeModelListener l) {

}

@Override
public Object getChild(Object parent, int index) {
    if ( parent.getClass().hashCode() == MenuList.class.hashCode() ){
        return ((MenuList) parent).getStation(index);
    }
    if ( parent.getClass().hashCode() == MenuStations.class.hashCode() ){
        return ((MenuStations) parent).get(index);
    }
    return null;
}

@Override
public int getChildCount(Object parent) {
    if ( parent.getClass().hashCode() == MenuList.class.hashCode() ){
        return ((MenuList) parent).getSize();
    }
    if ( parent.getClass().hashCode() == MenuStations.class.hashCode() ){
        return ((MenuStations) parent).getSize();
    }
    return 0;
}

@Override
public int getIndexOfChild(Object parent, Object child) {
    if ( parent.getClass().hashCode() == MenuList.class.hashCode() ){
        return ((MenuList) parent).getIndexOf((MenuStations) child);
    }
    if ( parent.getClass().hashCode() == MenuStations.class.hashCode() ){
        return ((MenuStations) parent).getIndexOf((MenuCats) child);
    }
    return 0;
}

@Override
public Object getRoot() {
    return ml;
}

@Override
public boolean isLeaf(Object node) {
    return node.getClass().hashCode() == MenuCats.class.hashCode();
}

@Override
public void removeTreeModelListener(TreeModelListener l) {
    // TODO Auto-generated method stub

}

@Override
public void valueForPathChanged(TreePath path, Object newValue) {
    // TODO Auto-generated method stub

} 
```

当我从**ml**或其内部项目中删除某些内容时，树结构不会改变。我找不到像**fireTreeModelChanged**这样的方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T16:28:34.077

`fireTreeModelChanged()`如果您的模型扩展了包含此类方法的类，您只会找到一个方法。但与`TableModel`具有关联`AbstractTableModel`包含`fireXxx()`方法的 不同，树没有这样的类。您最好的选择是使用`DefaultTreeModel`, 或定义您自己的事件触发方法。

当然，为了能够实现它们，您需要在`addTreeModelListener()`方法中实际添加侦听器，而不是什么都不做。

代码中应该更改的另一件事是您对哈希码的比较。这样做没有任何意义。顺便说一句，两个不同的类可能具有相同的哈希码。只需使用

```
parent.getClass().equals(MenuList.class) 
```

或者

```
parent instanceof MenuList 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-25T16:50:32.550

您的一段代码不足以解决您的问题。但这是动态树的一个很好的例子。

[DynamicTreeDemo](http://docs.oracle.com/javase/tutorial/uiswing/examples/components/index.html#DynamicTreeDemo)来自`docs.oracle.com`

下载类`DynamicTreeDemo.java`然后`DynamicTree.java`运行它。

# visual-studio-2012 - 如何强制 resharper 处理 .cs 文件，而不是 VisualAssistX？

> ID：13552910
> 
> 赞同：1
> 
> 时间：2012-11-25T16:21:41.727
> 
> 标签：visual-studio-2012, resharper, visual-assist-x

我安装了 Resharper 和 VisualAssistX。我正在使用几乎相同的快捷方式。例如，为“查找用法”设置一个热键非常方便。问题是当我尝试在 .cs 文件中“查找用法”时，VisualAssistX 会尝试这样做而不是 Resharper。

我希望 Resharper 可以在 .cs 文件中使用它并且我希望 VAx 可以在 .cpp 文件中使用它。如何达到这个效果？

# python - 如何将python中的列表打印到文件中

> ID：13552912
> 
> 赞同：1
> 
> 时间：2012-11-25T16:21:47.370
> 
> 标签：python, python-3.x

我有一个包含多行的数据列表，我从 Excel 文件中读取了这些数据，然后将其读入列表。现在，我想将此列表打印到另一个文本文件并保存，然后将 html 打印到另一个文件。然后我想制作一个html文件，这样我就可以制作一个表格，让它有4行，每行包含一个数据单元格。

注意：我使用的是 python 3。

到目前为止我已经尝试过了，但它似乎不起作用。

```
data = ['Course name', 'Course Type', 'Tutor']
       ['English',    , 'Languages' , 'Mr A']
       ['Geography'   , 'Humanities', 'Mr B']
       ['Civil Engineering' , 'Engineering', 'Mr C']

f = open("SomeData.csv", 'w')
for row in mylist:
    print(row,file=f) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-25T16:27:05.087

您的代码列表初始化转换为：

```
data = ['Course name', 'Course Type', 'Tutor']

['English',    , 'Languages' , 'Mr A']             # Just a statement
['Geography'   , 'Humanities', 'Mr B']             # Just a statement
['Civil Engineering' , 'Engineering', 'Mr C']      # Just a statement 
```

但你需要列出一个列表：

```
data = [
    ['Course name', 'Course Type', 'Tutor'],
    ['English', 'Languages' , 'Mr A'],
    ['Geography', 'Humanities', 'Mr B'],
    ['Civil Engineering', 'Engineering', 'Mr C']
] 
```

接下来，您可以将数据写入文件：

```
f = open("output.txt", "w")
for row in data:
    print(", ".join(row), file=f)
f.close() 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-25T16:58:46.463

按照上述答案中的说明正确组装列表后，您可以按照所述执行输出部分，或者像这样：

```
f = open("SomeData.csv", 'w')
for row in data:
    f.write(",".join(row)+",")
f.close() 
```

这里是关于以与 CSV 部分相同的方式执行 HTML 输出部分的简单方法的提示。

```
f = open("output.html", 'w')
f.write("<html><table>")
for row in data:
    f.write("<tr><td>"+"</td><td>".join(row)+"</td></tr>")
f.write("</table></html>")
f.close() 
```

还有一个 python csv 库可以帮助满足更深入的 CSV 需求：[http ://docs.python.org/3.3/library/csv.html](http://docs.python.org/3.3/library/csv.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-25T18:55:46.987

```
#!/usr/bin/env python3
# -*- coding: utf-8 -*-

import csv

class CoolFileWriter:
    """reads a csv file and writes a text or html file"""
    def __init__(self, csv_file, txt_out='out.txt', html_out='out.html'):
        self.csv_file = csv_file
        self.txt_out = txt_out
        self.html_out = html_out
        self.content = []

    def read_csv(self):
        with open(self.csv_file, newline='') as f:
            reader = csv.reader(f)
            for row in reader:
                self.content.append(row)

    def write_txt(self):
        f = open(self.txt_out, 'w')
        for row in self.content:
            f.write(', '.join(row) + '\n')
        f.close()

    def write_html(self):
        html_pre="""
<!DOCTYPE HTML>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Table Data</title>
<style>
#newspaper-a
{
    font-family: "Lucida Sans Unicode", "Lucida Grande", Sans-Serif;
    font-size: 12px;
    margin: 45px;
    width: 480px;
    text-align: left;
    border-collapse: collapse;
    border: 1px solid #69c;
}
#newspaper-a th
{
    padding: 12px 17px 12px 17px;
    font-weight: normal;
    font-size: 14px;
    color: #039;
    border-bottom: 1px dashed #69c;
}
#newspaper-a td
{
    padding: 7px 17px 7px 17px;
    color: #669;
}
</style>
</head>
<body>
<table id="newspaper-a">
"""
        html_post="""
</table>
</body>
</html>
"""
        f = open(self.html_out, 'w')
        f.write(html_pre)
        th=True
        for row in self.content:
            if (th):
                f.write("<tr>\n\t<th>"+"</th>\n\t<th>".join(row)+"</th>\n</tr>\n")
                th=False
            else:
                f.write("<tr>\n\t<td>"+"</td>\n\t<td>".join(row)+"</td>\n</tr>\n")
        f.write(html_post)
        f.close()

f = CoolFileWriter('excel.csv', 'data.txt', 'data.html')

f.read_csv()
f.write_txt()
f.write_html() 
```

餐桌风格来自[这里](http://coding.smashingmagazine.com/2008/08/13/top-10-css-table-designs/)。:-)

# numpy - Numpy 和 Biopython 必须集成？

> ID：13552916
> 
> 赞同：5
> 
> 时间：2012-11-25T16:22:12.940
> 
> 标签：numpy, scipy, bioinformatics, biopython

例如...我有两个脚本用于查看**（多序列比对）MSA**是否有超过 50 列且间隙少于 50% 的列。

第一次使用**BioPython**在 16281 个序列的 MSA 中需要**4.2 秒**，有 609 列（Pfam 的 PF00085，fasta 格式）。*[Biopython的Multiple Sequence Alignment对象的getitem方法耗费大量时间]*

第二个使用简单的 IO 生成带有 MSA的**2D Numpy 数组**，在相同的对齐中只需要**1.2 秒。**

**我认为 MSA 对象的 Numpy 方法可能更有用、更快。**例如，您可以使用布尔 numpy 数组来选择特定的行和列。实际上，列的删除和选择（例如，用于消除具有超过 50% 间隙的列）非常耗时，并且在 Biopython 中没有很好地实现。我认为这对于 PDB 坐标的 nx3 numpy 数组也很有用。

## 我有五个想法，也许只有一两个有用：

1 -基于 numpy 而不是 str创建一个 Seq 和多序列比对对象 ( **Bio.Align.MultipleSeqAlignment )。**这可能是兼容性问题......也许这不是一个好主意。我不知道。

2 - 在 Biopython 中创建一个更快的方法来从 Biopython 对象获取 numpy 数组版本。我尝试为 Multiple Sequence Alignment 对象生成 numpy 数组，但这会多次调用*getitem 方法*，并且比单独使用 Biopython 更耗时。但是，也许有更多编程技能的人可以做得更好。

3 - 为 numpy 或 scipy 创建一个模块，并为对齐和 PDB 提供 IO 支持。也许更简单和有用的想法。

4 - 创建另一个完整的 Bio 模块，但基于 numpy。也许在 scipy 或 numpy 里面。

5 - 像想法 2 和 3 一样，创建模块和方法，以便在 Biopython 和 numpy 对象之间更快、更有效地兼容。

**你怎么看？哪些想法更好？你有更好的主意吗？能不能做点什么？我想与 Biopython 项目合作......我认为与 numpy 的集成可能是一个好的开始。**

非常感谢 ;）

PD：我的两个脚本...慢的，基于 Biopython：

```
#!/usr/bin/python2.7

from sys import argv
from Bio import AlignIO
aln = AlignIO.read(open(argv[1],"r"), "fasta")
longitud = aln.get_alignment_length()
if longitud > 150:
    corte = 0.5 * len(aln)
    j = 0
    i = 0
    while j<50 and i<longitud:    
        if aln[:,i].count("-") < corte:
            j += 1
        i += 1
    if j>=50:
        print argv[1] 
```

最快的基于 numpy 数组：

```
#!/usr/bin/python2.7

from sys import argv
import numpy as np

with open(argv[1],'r') as archivo:
    secuencias=[]
    identificadores=[]
    temp=[]
    for linea in archivo:
        if linea[0]=='>':
            identificadores.append(linea[1:].replace('\n',''))
            secuencias.append(list(temp))
            temp=""
        else:
            temp += linea.replace('\n','')
    secuencias.append(list(temp))

sec = np.array(secuencias[1:])
ide = np.array(identificadores)

if len(ide)>150:
    corte = len(ide) * 0.5
    if np.sum(np.sum(sec=='-',1) < corte) >= 50:
        print argv[1] 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-25T18:43:16.150

如果您要对 MSA 对象执行大量操作，将它们视为字符数组很有用，那么我将使用 Biopython 的 AlignIO 加载对齐，然后将其转换为 NumPy 字符数组。例如：

```
import numpy as nump
from Bio import AlignIO
filename = "opuntia.aln"
format = "clustal"
alignment = AlignIO.read(filename, format)
align_array = numpy.array([list(rec) for rec in alignment], numpy.character) 
```

该快速示例可以作为 to_array 方法轻松添加到对齐对象中，或者包含在教程中。有帮助吗？

当然，您仍然需要支付所有对象创建的开销（Seq 对象、SeqRecord 对象、空注释字典、对齐对象等），但这是 AlignIO 接口的缺点 - 它适用于相对较重的对象模型。这对于 FASTA 和 Clustal 等简单格式并不真正需要，但对于 Stockholm 等丰富的对齐格式更有用。

# flash - Flash Professional CS6 或 Flash Builder 4.6

> ID：13552922
> 
> 赞同：0
> 
> 时间：2012-11-25T16:22:48.467
> 
> 标签：flash, flash-builder, flash-cs6

最近我一直在研究 Flash Professional CS6 和 Flash Builder 4.6。我试图找出最适合我的方法，但我不知道。当我创建我的应用程序时，我会使用许多图形和许多代码行来完成所有的图形和编码:)。我也喜欢漂亮的界面，所以我希望它包含一种创建界面的简单方法。

如果你能给我任何关于我应该得到什么程序的建议，那就太好了。

谢谢，RMK-雅各布

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-25T21:20:56.123

flash pro 最大的优点是它便于开发人员与艺术家合作。对于艺术家来说，这是一个很好的 IDE，可以在其中构建他们的图形和动画，但它以开发人员可以访问的方式实现。如果你*是*艺术家，那么好处就少得多。它们都能够将所有相同的功能输出到相同的最终产品中，但是 flash builder 为您提供了更多更好的工具来完成它。如果您只能获得一个，请获得闪存生成器...

# php - MySQL 查询仅返回 1 行

> ID：13552927
> 
> 赞同：0
> 
> 时间：2012-11-25T16:23:33.213
> 
> 标签：php, mysql

所以，我的 MySQL 查询有问题。它只显示来自变量的数据列表的第一个结果。这是我所拥有的

```
$Data='1,2,3'

$fetch = mysql_query("SELECT email FROM data WHERE uid IN ($Data) ");

if (mysql_num_rows($fetch)) {
    $emaildata = mysql_fetch_assoc($fetch);
    foreach($emaildata as $fetch2){
        echo $fetch2;
    }
} else {
    echo Failed;
} 
```

现在，它只提取 3 的第一个结果，而不是 3 的每个单独的电子邮件。任何帮助表示赞赏，这对整个事情来说有点新。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-25T16:25:34.670

Use as below because you have iterate `$fetch` through while loop which is easier

```
while($emaildata = mysql_fetch_assoc($fetch)){
   echo  $emaildata['email']
} 
```

Recommendations:

1.Learn to prevent from MySQL Injections: [Good Link](https://stackoverflow.com/questions/60174/best-way-to-prevent-sql-injection-in-php)

2.Mysql extension is not recommended for writing new code. Instead, either the mysqli or PDO_MySQL extension should be used. More reading: [PHP Manual](http://www.php.net/manual/en/mysqlinfo.api.choosing.php)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-25T16:26:33.517

Fetch array instead of fetching associative, and use `mysqli_()` instead of `mysql_()` which is no longer maintained by the community, also use `while` loop instead of `foreach` and use `index` name if any

```
while($emaildata = mysql_fetch_array($fetch)) {
     echo $emaildata; //Use index name if any
   }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-25T16:30:07.597

您应该使用 while 循环，只要有下一行，您就可以进行迭代：

```
while($row = mysqli_fetch_row($fetch)){
      echo  $row['email']
 } 
```

注意!!!：`mysqli_fetch_row`不`mysql_fetch_row`推荐使用

# java - 合并文本字段，如 Windows 7 计算器中所示

> ID：13552928
> 
> 赞同：1
> 
> 时间：2012-11-25T16:23:32.727
> 
> 标签：java, swing, awt, textfield, custom-component

如何制作一个“组合”文本字段（下面用红色勾勒出来），如 Windows Calculator 中所示？

![Windows 7 计算器中的组合输出字段](../Images/3508723d2c4a85bea60bbc4c717c850f.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-25T23:33:01.203

这些领域都不是可聚焦的。两个堆叠在一起的标签应该可以做到这一点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-06T03:40:40.583

当然，Window 计算器在容器底部有一个带有“正在计算”的输入区域，在它的顶部有一个显示区域（它显示输入的数字序列）。只需在一个新容器（例如 JPanel）中创建一个组件，然后用一个 JTextField 填充它以用于显示，一个 JTextField 用于输入数据。将两个 JTextField 的边框设置为“无”，将背景颜色设置为“白色” 对容器执行此操作，但为其提供所需的任何边框和颜色。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-02-06T04:08:49.497

我之前忘记了。我主要谈到了 NetBeans，但同样是手动发生的。如果您对计算器的构造感兴趣，请访问以下站点： [http](http://www.youtube.com/watch?v=XVYH8MEaQ1U) ://www.youtube.com/watch?v=XVYH8MEaQ1U ，您可以在其中下载。以及他在 youtube 上展示应用程序构建的网站： [http ://www.mediafire.com/?nde1i53tdyqc8tc](http://www.mediafire.com/?nde1i53tdyqc8tc)

# objective-c - 如何隐藏导航栏的标题保持返回按钮

> ID：13552930
> 
> 赞同：2
> 
> 时间：2012-11-25T16:23:38.227
> 
> 标签：objective-c, cocoa-touch, ios5, ios4

如何隐藏导航栏的标题但保留带有“Back”字样的后退按钮？我注意到在objective-c中，当我没有为导航控制器设置标题时，后退按钮不会出现。我想隐藏标题（因为我使用自定义背景），并保留带有单词“Back”的后退按钮。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T16:28:47.797

后退按钮的标题设置在视图控制器的导航项上，该导航项在当前控制器*之前*被推入堆栈，而不是当前控制器的导航项上。这有点不直观。

在界面构建器中，转到后退按钮指向的视图，选择其导航项或添加新的导航项，转到“后退”按钮属性，然后输入您希望在后退按钮上显示的文本。现在转到您希望没有标题的控制器，并删除其导航项的“标题”属性中的文本。

# c# - 如何使用 StreamWriter 在 C# 中编辑文本文件？

> ID：13552938
> 
> 赞同：3
> 
> 时间：2012-11-25T16:24:01.463
> 
> 标签：c#, text-files, streamreader, streamwriter

我有一种方法可以从文本文件文件中编辑一个单词并将其显示在命令提示符下。现在我试图制作一种方法来编辑文本文件中的单词并将其写入新文件。我还想提一下，我不能使用 File 或 Regex 类，因为我不允许将它用于我的作业。这是我的 StreamReader 代码：

```
public void EditorialControl(string fileName, string word, string replacement)
{            
    List<string> list = new List<string>();
    using (StreamReader reader = new StreamReader(directory + fileName))
    {
        string line;
        while ((line = reader.ReadLine()) != null)
        {                    
            line = line.Replace(word, replacement);
            list.Add(line);
            Console.WriteLine(line);
        }
        reader.Close();
    }      
} 
```

到目前为止，这是我的 StreamWriter 代码：

```
public void EditorialResponse(string fileName, string word, string replacement, string saveFileName)
{
    using (StreamWriter writer = new StreamWriter(directory + saveFileName, true))
    {
        {
            string input = directory + fileName;
            string line = input.Replace(word, replacement);
            writer.Write(line);                     
        }
        writer.Close();
    }
} 
```

我可以添加什么来使 StreamWriter 打开文件、编辑单词并将其写入新文件，或者可能使用 StreamReader 方法在 StreamWriter 中进行这些更改？谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-09-17T15:56:01.120

这里...

```
public void EditorialResponse(string fileName, string word, string replacement, string saveFileName)
{
    StreamReader reader = new StreamReader(directory + fileName);
    string input = reader.ReadToEnd();

    using (StreamWriter writer = new StreamWriter(directory + saveFileName, true))
    {
        {
            string output = input.Replace(word, replacement);
            writer.Write(output);                     
        }
        writer.Close();
    }
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-25T17:13:39.533

```
public IList<string> GetEditedContent(string fileName, string word, string replacement)
{            
    List<string> list = new List<string>();
    using (StreamReader reader = new StreamReader(directory + fileName))
    {
        string line;
        while ((line = reader.ReadLine()) != null)
        {                    
            line = line.Replace(word, replacement);
            list.Add(line);
            Console.WriteLine(line);
        }
        reader.Close();
    }      
    return list;
}

    // Example how write list to a file. 
 using (System.IO.StreamWriter file = new System.IO.StreamWriter(@"C:\Users\Public\TestFolder\WriteLines2.txt"))
    {
        foreach (string listItem in list)
        {
            file.WriteLine(listItem);

        }
    } 
```

[C# 编程指南中有关](http://msdn.microsoft.com/en-us/library/67ef8sbd.aspx)[StreamWriter](http://msdn.microsoft.com/en-us/library/system.io.streamwriter.aspx)的示例

*[如何：写入文本文件（C# 编程指南）](http://msdn.microsoft.com/en-us/library/8bh11f1k.aspx)*

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-06-20T08:05:05.220

您可以只使用这个简单的代码，它应该编辑您的“filename.txt”并附加新文本。

```
using (System.IO.StreamWriter file = new System.IO.StreamWriter(@"C:\TestFolder\filename.txt", true))
{
file.WriteLine("text to edit / append ...");
} 
```

# c# - 如何从数据库中提取图像和数据？

> ID：13552939
> 
> 赞同：0
> 
> 时间：2012-11-25T16:24:06.727
> 
> 标签：c#, asp.net, sql

我正在尝试使用 C#.net 从数据库中提取数据并使用 Foreach 循环使其在页面上可见。每次我运行代码时，当我知道数据库中至少有 7 个项目时，我只会显示一个项目。我已经为 C# 放置了下面的代码。

```
SqlConnection oConnection = new SqlConnection(ConfigurationManager.ConnectionStrings["HomeGrownEnergyConnectionString"].ToString());
    string sqlEnergy = "Select * from Product p where p.ProductTypeId=3";
    SqlCommand oCmd = new SqlCommand(sqlEnergy, oConnection);
    DataTable dtenergy = new DataTable();
    SqlDataAdapter oDa = new SqlDataAdapter(oCmd);
    try
    {
        oConnection.Open(); ;
        oDa.Fill(dtenergy);
    }
    catch (Exception ex)
    {
        lblnodata.Text = ex.Message;
        return;
    }
    finally
    {
        oConnection.Close();
    }
    DataTableReader results = dtenergy.CreateDataReader();

    if (results.HasRows)
    {
        results.Read();
        foreach(DataRow result in dtenergy.Rows)
        {
            byte[] imgProd = result["ThumnailLocation"] as byte[];
            ID.Text = result["ProductID"].ToString();
            Name.Text = result["Name"].ToString();
            price.Text = FormatPriceColumn(result["Price"].ToString());

        }
    } 
```

这是asp.net的代码。

```
<div>
<asp:Image ID="imgProd" CssClass="ProdImg" runat="server" />
<asp:Label runat="server" ID="ID"  />
<asp:Label runat="server" ID="Name" />
<asp:Label runat="server" ID="price" />
<asp:TextBox ID="txtQty" MaxLength="3" runat="server" Width="30px" />
<asp:Button runat="server" ID="Addtocart" Text="Add To Cart" CommandName="AddToCart" ItemStyle-CssClass="btnCol" /> 
```

如果有人可以帮助我，那将非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T16:58:33.600

您应该将数据库中的图像列类型设置为 byte[] 并使用此方法来获取和设置图像：

```
public BitmapImage ImageFromBuffer(Byte[] bytes)
{
    MemoryStream stream = new MemoryStream(bytes);
    BitmapImage image = new BitmapImage();
    image.BeginInit();
    image.StreamSource = stream;
    image.EndInit();
    return image;
}

public Byte[] BufferFromImage(BitmapImage imageSource)
{
    Stream stream = imageSource.StreamSource;
    Byte[] buffer = null;
    if (stream != null && stream.Length > 0)
        {
            using (BinaryReader br = new BinaryReader(stream))
                {
                    buffer = br.ReadBytes((Int32)stream.Length);
                }
        }

    return buffer;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-25T16:56:43.950

我认为您的问题标题应该更像“如何在我的页面上显示数据库结果集”。

答案是您应该为此使用数据绑定。通过这种方式，您可以设置数据项在页面上的外观。然后你可以将一组记录/对象扔到这个列表中（使用它的布局），它们都按照你的布局中的定义进行渲染。

这是一个小例子：

在您的 aspx 代码中：

```
<asp:DataList id="dlItems" runat="server">
         <ItemTemplate>
            <%# Eval("ID") %>
            <%# Eval("Name") %>
            <%# Eval("price") %>
         </ItemTemplate>
</asp:DataList> 
```

在你的cs代码中：

```
dlItems.DataSource = dtenergy;
dlItems.DataBind(); 
```

对于您的问题的图像部分，请参阅其他类似的线程：[Display image from database in ASP.net with C#](https://stackoverflow.com/questions/6987433/display-image-from-database-in-asp-net-with-c-sharp)

有关数据绑定的更多详细信息，您可以查看此处：http: [//msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.datalist.itemdatabound.aspx](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.datalist.itemdatabound.aspx)

# java - Deleting from binary file

> ID：13552942
> 
> 赞同：0
> 
> 时间：2012-11-25T16:24:14.243
> 
> 标签：java, file

In Java, how can I delete content from a binary file? Do I need to copy everything excluding the removed portion in a temporary file and rename it as existing file?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-25T16:29:49.003

您不能直接在磁盘上删除文件的一部分。将要删除的部分以外的文件内容复制到临时文件中。现在删除原始文件并重命名临时文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-25T16:33:28.660

如果格式不合适，您可以用 0 覆盖，否则您将不得不创建一个新文件并替换原始文件。这对于任何语言都是一样的

# java - twilio tutorial problems

> ID：13552949
> 
> 赞同：1
> 
> 时间：2012-11-25T16:24:55.223
> 
> 标签：java, twilio

i followed the tutorial at [https://www.twilio.com/docs/quickstart/java/twiml/record-caller-leave-message](https://www.twilio.com/docs/quickstart/java/twiml/record-caller-leave-message) and am getting stuck at the recording. the twilio logs indicate "Problem accessing /handle-key. with a 404." i am set up with localtunnel, and i configured my number to point to the [http://43v8.localtunnel.com/myapp/twilio](http://43v8.localtunnel.com/myapp/twilio) url. the greeting works, i only have trouble when picking 1 or 2 on my dial pad. i would appreciate any help.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-05-09T22:59:03.770

TwilioHandleRecordingServlet：

```
package com.twilio;
import javax.servlet.http.HttpServlet;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;
import java.io.IOException;
import java.util.HashMap;

import com.twilio.sdk.verbs.TwiMLResponse;
import com.twilio.sdk.verbs.TwiMLException;
import com.twilio.sdk.verbs.Say;
import com.twilio.sdk.verbs.Play;
import com.twilio.sdk.verbs.Dial;

public class TwilioHandleRecordingServlet extends HttpServlet {

    public void service(HttpServletRequest request, HttpServletResponse response) throws IOException {

        String recordingUrl = request.getParameter("RecordingUrl");
        TwiMLResponse twiml = new TwiMLResponse();
        if (recordingUrl != null) {
            try {
                twiml.append(new Say("Thanks for howling... take a listen to what you howled."));
                twiml.append(new Play(recordingUrl));
                twiml.append(new Say("Goodbye"));
            } catch (TwiMLException e) {
                e.printStackTrace();
            }
        } else {
            response.sendRedirect("/twiml");
            return;
        }

        response.setContentType("application/xml");
        response.getWriter().print(twiml.toXML());
    }
} 
```

# javascript - JavaScript equivalent of PHP's isset

> ID：13552951
> 
> 赞同：0
> 
> 时间：2012-11-25T16:24:57.183
> 
> 标签：javascript, variables, undefined

> **Possible Duplicate:**
> [php isset() equivalent in javascript](https://stackoverflow.com/questions/5436953/php-isset-equivalent-in-javascript)

PHP example: [http://codepad.viper-7.com/vo4wGI](http://codepad.viper-7.com/vo4wGI)

```
<?php
var_dump( isset($something['deep']->property) ); // false
# because well, there is no such thing defined at all 
```

JS kind of equivalent: [http://jsfiddle.net/psycketom/Lp83m/](http://jsfiddle.net/psycketom/Lp83m/) but doesn't work, because browsers appear to lookup the value first before trying to resolve it's type, and, if it's not found, you get

```
console.log( typeof something['deep'].property ); // Uncaught ReferenceError: something is not defined 
```

Is there a native function in JavaScript to properly resolve deep undefined properties?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-25T17:13:42.513

`var`如果您必须检查变量， 这应该可以工作..

```
 if (typeof(var) != 'undefined' && var != null ) {
       //do something
    } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-25T16:42:29.660

您可以编写一个检查对象本身和属性的函数：

```
function isset(obj, prop) {
  return typeof obj !== 'undefined' ? obj.hasOwnProperty(prop) : false;
} 
```

你会这样称呼它：

```
myObj = {
  "myprop1": "myvalue1"
};

isset(myObj, "myprop1"); // returns true
isset(myObj, "anotherprop"); // returns false
isset(); // returns false 
```

编辑：要回答您的问题，没有本机函数可以这样做，如果您希望深入检查对象（如果该属性存在于对象内部的某个位置），您必须自己编写它。你可以递归地做。但我认为这样做没有任何意义，因为您不知道该属性存在于哪个“级别”（您可以返回它，但是您没有带有布尔返回值的 isset 函数）

# c++ - Strange thing in D3D9 2D animation -- high FPS while still not smooth

> ID：13552953
> 
> 赞同：0
> 
> 时间：2012-11-25T16:25:05.677
> 
> 标签：c++, animation, graphics, directx, 2d

The animation is quite simple: display a picture full-screen and move the picture out of the screen horizontally in 1 second, just like the slide show switching effect in MS PowerPoint.

I'm using the D3D9 surface to realize the animation, because I want the program to be compatible with Windows XP and I might also need some 3D effects of displaying pictures.

When I turn on the VSYNC(d3dpp.PresentationInterval = D3DPRESENT_INTERVAL_DEFAULT), the fps stays at 60 but I can still see the picture moving discontinuously(very obvious). When I turn off the VSYNC, the fps stays around 1600, the picture moves more smoothly(but still lags a little).

The strange part for both cases is that I can see a zig-zag border of the picture and rupture in the picture:

```
 ##########
    ##########
     #########
     #########
      ######## 
```

I have no exprience in either DX or 2D-animation, so I need your help.

The key part of the code is as follows:

```
D3DPRESENT_PARAMETERS d3dpp = {0};
d3dpp.BackBufferCount       = 3; 
d3dpp.Windowed              = TRUE; 
d3dpp.SwapEffect            = D3DSWAPEFFECT_DISCARD; 
d3dpp.BackBufferFormat      = D3DFMT_UNKNOWN;
d3dpp.PresentationInterval  = D3DPRESENT_INTERVAL_IMMEDIATE; //VSYNC off
//  d3dpp.PresentationInterval  = D3DPRESENT_INTERVAL_DEFAULT; //VSYNC

......
if(FAILED(D3DXLoadSurfaceFromFile(g_pSurface, NULL, NULL, PICPATH, NULL, D3DX_FILTER_NONE, 0, NULL)))
    return E_FAIL;
......
 while(1)
{
    if (PeekMessage(&msg, NULL, 0, 0, PM_REMOVE))
    {
        if (msg.message == WM_QUIT)
            break ;
        TranslateMessage (&msg) ;
        DispatchMessage (&msg) ;
    }
     else DxRender();
}

VOID DxRender() 
{ 

LPDIRECT3DSURFACE9 pBackBuffer = NULL;
g_pd3dDevice->Clear(0, NULL, D3DCLEAR_TARGET, D3DCOLOR_XRGB(0,0,0), 1.0f, 0 ); 

static int offs = 0;
static float StartTime = timeGetTime() * 0.001f;
float CurTime = timeGetTime() * 0.001f;
offs = CurTime - StartTime * g_cxClient / ANIMATION_TIME_S;
// ANIMATION_TIME_S = 1.0f
if(offs >= g_cxClient)
{
    StartTime = CurTime;
    offs -= g_cxClient;
}

RECT srcrect1 = {0,0,g_cxClient-1-offs,g_cyClient-1}; 
POINT dstpt1 = {offs,0};

if( SUCCEEDED( g_pd3dDevice->BeginScene() ) ) 
{ 

    if(FAILED(g_pd3dDevice->GetBackBuffer(0,0, D3DBACKBUFFER_TYPE_MONO, &pBackBuffer)))
    {
        MessageBox(NULL, TEXT("GetBackBuffer"), TEXT("Error"), MB_OK); 
    }
    g_pd3dDevice->UpdateSurface(g_pSurface, &srcrect1, pBackBuffer, &dstpt1);
    ShowFPS();

    g_pd3dDevice->EndScene(); 
} 

g_pd3dDevice->Present( NULL, NULL, NULL, NULL ); 
    if(pBackBuffer != NULL)
        pBackBuffer->Release();
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T22:13:54.840

您的动画不流畅可能是由于分辨率不足造成的`timeGetTime()`。[这可能会导致这些问题（请参阅timeGetTime()](http://msdn.microsoft.com/de-de/library/windows/desktop/dd757629%28v=vs.85%29.aspx)的 MSDN ），因为在高 FPS 下，一帧可能短于一毫秒。您可以尝试`QueryPerformanceCounter()`使用更高频率的计时器（MSDN 到[QueryPerformanceCounter()](http://msdn.microsoft.com/en-us/library/windows/desktop/ms644904%28v=vs.85%29.aspx)）。那么它不应该落后。我无法想象，为什么在 60 FPS 时会出现锯齿形，但 D3DPRESENT_INTERVAL_IMMEDIATE 破裂是正常的，因为屏幕无法跟上刷新。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T13:29:30.487

我有一个使用世界矩阵转换纹理的解决方案，关键步骤如下

*   从文件创建纹理
*   显示纹理
*   更新世界矩阵
    *   如果经过的时间少于 2 秒，则显示纹理
    *   否则将纹理向右平移直到它离开屏幕，平移矩阵是基于时间的，您可以更新矩阵。_41 文件。

完整代码如下，将纹理文件替换为本地文件即可查看效果，具体翻译请参见函数SetupMatrix中的代码。

```
#include <d3dx9.h>

LPDIRECT3D9             g_pD3D              = NULL ; // Used to create the D3DDevice
LPDIRECT3DDEVICE9       g_pd3dDevice        = NULL ; // Our rendering device
LPDIRECT3DVERTEXBUFFER9 g_pVB               = NULL ; // Vertex buffer
LPDIRECT3DTEXTURE9      g_pTexture          = NULL ; // Texture

D3DXMATRIX g_worldMatrix ;

float                   g_ShowTimeInterval  = 2.0f;  // How long will the picture displays.
float                   g_totalShowTime     = 0.0f;  // Time elapsed since the picture start to display.

#define SAFE_RELEASE(P) if(P){ P->Release(); P = NULL;}

struct Vertex
{
    float x, y, z ; // Vertex position
    float u, v ;    // Texture coordinates
};

#define VertexFVF D3DFVF_XYZ | D3DFVF_TEX1

HRESULT InitD3D( HWND hWnd )
{
    DWORD ScreenW = 0;
    DWORD ScreenH = 0;

    DEVMODE devMode ;
    devMode.dmSize = sizeof(devMode) ;
    DWORD iModeNum = 0 ;
    DWORD r = 1 ;

    while(r != 0)
    {
        r = EnumDisplaySettings(NULL, iModeNum, &devMode) ;
        // Store the maximum resolution currently
        if(devMode.dmPelsWidth >= ScreenW && devMode.dmPelsHeight >= ScreenH)
        {
            ScreenW = devMode.dmPelsWidth ;
            ScreenH = devMode.dmPelsHeight ;
        }

        //OutputModeInfo(iModeNum, devMode) ;
        iModeNum++ ;
    }

    // Create the D3D object.
    if( NULL == ( g_pD3D = Direct3DCreate9( D3D_SDK_VERSION ) ) )
        return E_FAIL;

    // Set up the structure used to create the D3DDevice
    D3DPRESENT_PARAMETERS d3dpp;
    ZeroMemory( &d3dpp, sizeof(d3dpp) );

    d3dpp.Windowed               = FALSE;
    d3dpp.SwapEffect             = D3DSWAPEFFECT_DISCARD; 
    d3dpp.BackBufferWidth        = ScreenW; 
    d3dpp.BackBufferHeight       = ScreenH;
    d3dpp.BackBufferFormat       = D3DFMT_X8R8G8B8; 

    // Create device
    if( FAILED( g_pD3D->CreateDevice( D3DADAPTER_DEFAULT, D3DDEVTYPE_HAL, hWnd,
        D3DCREATE_SOFTWARE_VERTEXPROCESSING,
        &d3dpp, &g_pd3dDevice ) ) )
    {
        MessageBoxA(NULL, "Create D3D9 device failed!", "Error", 0) ;
        return E_FAIL;
    }

    // Disable lighting, since we didn't specify color for vertex
    g_pd3dDevice->SetRenderState( D3DRS_LIGHTING , FALSE );  

    D3DXMatrixIdentity(&g_worldMatrix);

    // Create Texture
    HRESULT hr ;
    hr = D3DXCreateTextureFromFile(g_pd3dDevice, "../Common/Media/chessboard.jpg", &g_pTexture) ;
    if (FAILED(hr))
    {
        MessageBoxA(NULL, "Create Texture failed!", "Error", 0) ;
    }

    return S_OK;
}

// Prepare vertex buffer
void InitVB()
{
    Vertex Quad[] = 
    {
        {-5.0f,  5.0f, 0,    0,    0},  // 1
        { 5.0f,  5.0f, 0, 1.0f,    0},  // 2
        {-5.0f, -5.0f, 0,    0, 1.0f},  // 4
        { 5.0f, -5.0f, 0, 1.0f, 1.0f},  // 3
    } ;

    // Create vertex buffer
    HRESULT hr ;
    hr = g_pd3dDevice->CreateVertexBuffer(6 * sizeof(Vertex), D3DUSAGE_WRITEONLY, 
        VertexFVF, D3DPOOL_MANAGED, &g_pVB, NULL) ;
    if (FAILED(hr))
    {
        MessageBoxA(NULL, "Create vertex buffer failed!", "Error", 0) ;
    }

    // Copy data
    Vertex* v ;
    g_pVB->Lock(0, 0, (void**)&v, 0) ;
    memcpy(v, Quad, 6 * sizeof(Vertex)) ;
    g_pVB->Unlock() ;
}

VOID Cleanup()
{
    SAFE_RELEASE(g_pTexture) ;

    SAFE_RELEASE(g_pVB) ;

    SAFE_RELEASE(g_pd3dDevice) ;

    SAFE_RELEASE(g_pD3D) ;
}

void SetupMatrix(float timeDelta)
{
    g_totalShowTime += timeDelta;
    if(g_totalShowTime > g_ShowTimeInterval)
    {
        g_worldMatrix._41 += timeDelta * 10;
        g_pd3dDevice->SetTransform(D3DTS_WORLD, &g_worldMatrix) ;
    }
    else
    {
        D3DXMatrixTranslation(&g_worldMatrix, 0.0f, 0.0f, 0.0f) ;
        g_pd3dDevice->SetTransform(D3DTS_WORLD, &g_worldMatrix) ;
    }

    // set view
    D3DXVECTOR3 eyePt(0.0f, 0.0f, -15.0f) ;
    D3DXVECTOR3 upVec(0.0f, 1.0f, 0.0f) ;
    D3DXVECTOR3 lookCenter(0.0f, 0.0f, 0.0f) ;

    D3DXMATRIX view ;
    D3DXMatrixLookAtLH(&view, &eyePt, &lookCenter, &upVec) ;
    g_pd3dDevice->SetTransform(D3DTS_VIEW, &view) ;

    // set projection
    D3DXMATRIX proj ;
    D3DXMatrixPerspectiveFovLH(&proj, D3DX_PI / 4, 1.0f, 1.0f, 1000.0f) ;
    g_pd3dDevice->SetTransform(D3DTS_PROJECTION, &proj) ;
}

void SetupTexture()
{
    // Create Texture
    HRESULT hr ;
    hr = D3DXCreateTextureFromFile(g_pd3dDevice, "../Common/Media/crate.jpg", &g_pTexture) ;
    if (FAILED(hr))
    {
        MessageBoxA(NULL, "Create Texture failed!", "Error", 0) ;
    }

    // Setup texture
    g_pd3dDevice->SetTexture(0, g_pTexture) ;
    g_pd3dDevice->SetSamplerState(0, D3DSAMP_MAGFILTER, D3DTEXF_LINEAR);
    g_pd3dDevice->SetSamplerState(0, D3DSAMP_MINFILTER, D3DTEXF_LINEAR);
    g_pd3dDevice->SetSamplerState(0, D3DSAMP_MIPFILTER, D3DTEXF_LINEAR);
    g_pd3dDevice->SetSamplerState( 0, D3DSAMP_ADDRESSU,  D3DTADDRESS_WRAP );
    g_pd3dDevice->SetSamplerState( 0, D3DSAMP_ADDRESSV,  D3DTADDRESS_WRAP );
}

void RenderQuad()
{
    SetupTexture();

    // Set stream source
    g_pd3dDevice->SetStreamSource(0, g_pVB, 0, sizeof(Vertex) );
    g_pd3dDevice->SetFVF(VertexFVF) ;
    g_pd3dDevice->DrawPrimitive(D3DPT_TRIANGLESTRIP, 0, 2) ;

}

VOID Render(float timeDelta)
{
    SetupMatrix(timeDelta) ;

    g_pd3dDevice->Clear( 0, NULL, D3DCLEAR_TARGET, 0, 1.0f, 0 );

    // Begin the scene
    if( SUCCEEDED( g_pd3dDevice->BeginScene() ) )
    {
        RenderQuad() ;

        // End the scene
        g_pd3dDevice->EndScene();
    }

    // Present the back-buffer contents to the display
    g_pd3dDevice->Present( NULL, NULL, NULL, NULL );
}

LRESULT WINAPI MsgProc( HWND hWnd, UINT msg, WPARAM wParam, LPARAM lParam )
{
    switch( msg )
    {
    case WM_KEYDOWN:
        {
            switch( wParam )
            {
            case VK_ESCAPE:
                SendMessage( hWnd, WM_CLOSE, 0, 0 );
                break ;
            default:
                break ;
            }
        }
        break ;

    case WM_DESTROY:
        Cleanup();
        PostQuitMessage( 0 );
        return 0;
    }

    return DefWindowProc( hWnd, msg, wParam, lParam );
}

INT WINAPI wWinMain(HINSTANCE hInstance, HINSTANCE hPrevInstance, LPWSTR szCmdLine, int iCmdShow)
{
    WNDCLASSEX winClass ;

    winClass.lpszClassName = "ScreenQuad";
    winClass.cbSize        = sizeof(WNDCLASSEX);
    winClass.style         = CS_HREDRAW | CS_VREDRAW;
    winClass.lpfnWndProc   = MsgProc;
    winClass.hInstance     = hInstance;
    winClass.hIcon         = NULL ;
    winClass.hIconSm       = NULL ;
    winClass.hCursor       = LoadCursor(NULL, IDC_ARROW) ; // to avoid busy cursor
    winClass.hbrBackground = NULL ;
    winClass.lpszMenuName  = NULL ;
    winClass.cbClsExtra    = 0;
    winClass.cbWndExtra    = 0;

    RegisterClassEx (&winClass) ;  

    HWND hWnd = CreateWindowEx(NULL,  
        winClass.lpszClassName,     // window class name
        "ScreenQuad",               // window caption
        WS_OVERLAPPEDWINDOW,        // window style
        32,                         // initial x position
        32,                         // initial y position
        600,                        // initial window width
        600,                        // initial window height
        NULL,                       // parent window handle
        NULL,                       // window menu handle
        hInstance,                  // program instance handle
        NULL) ;                     // creation parameters

    // Create window failed
    if(hWnd == NULL)
    {
        MessageBoxA(hWnd, "Create Window failed!", "Error", 0) ;
        return -1 ;
    }

    // Initialize Direct3D
    if( SUCCEEDED(InitD3D(hWnd)))
    { 
        InitVB() ;

        // Show the window
        ShowWindow( hWnd, SW_SHOWDEFAULT );
        UpdateWindow( hWnd );

        // Enter the message loop
        MSG    msg ; 
        ZeroMemory( &msg, sizeof(msg) );
        PeekMessage( &msg, NULL, 0U, 0U, PM_NOREMOVE );

        static DWORD lastTime = timeGetTime();

        while (msg.message != WM_QUIT)  
        {
            if( PeekMessage(&msg, NULL, 0U, 0U, PM_REMOVE) != 0)
            {
                TranslateMessage (&msg) ;
                DispatchMessage (&msg) ;
            }
            else // Render the game if there is no message to process
            {
                DWORD currentTime = timeGetTime();
                float timeDelta = (currentTime - lastTime) * 0.001f;

                Render(timeDelta) ;

                lastTime = currentTime;
            }
        }
    }

    UnregisterClass(winClass.lpszClassName, hInstance) ;
    return 0;
} 
```

# sql - sql attribute name

> ID：13552954
> 
> 赞同：1
> 
> 时间：2012-11-25T16:25:05.933
> 
> 标签：sql, oracle, attributes

I have a table with five columns and there is an attribute with the name `NoOfCreditCards`. This attribute's data type is varchar with length 2\. When the table is shown in the SQL command line the name of the `NoOfCreditCards` column appears only as `No`, the rest part of the name does not appear. I have tried to use "set lin" with different sizes, but it did not work. How can i resolve this issue?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-25T20:56:22.743

您必须在 select 语句中命名列。像这样的东西：

```
SELECT NoOfCreditCards "NoOfCreditCards"
FROM TABLE
WHERE ...; 
```

# c# - The Vigenere algorithm in C# explanation

> ID：13552959
> 
> 赞同：2
> 
> 时间：2012-11-25T16:25:35.887
> 
> 标签：c#, algorithm, vigenere

I came across this code:

[Byte Vigenere Cipher, error with decryption](https://stackoverflow.com/questions/13369178/byte-vigenere-cipher-error-with-decryption)

But trying to follow the rules I made a new question about it.

The following algorithm is used and I'm trying to get a better understanding into it:

```
Byte[] result= new Byte[plaintext.Length];

key = key.Trim().ToUpper();

int keyIndex = 0;
int keylength = key.Length;

for (int i = 0; i < plaintext.Length; i++)
{
    keyIndex = keyIndex % keylength;
    int shift = (int)key[keyIndex] - 65;
    result[i] = (byte)(((int)plaintext[i] + shift) % 256);
    keyIndex++;
} 
```

Am I right in thinking the key needs to be trimmed as it is in Unicode? therefore subtracting 65 from a capital produces a common character/symbol?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T16:30:25.490

大写字母A 的 ASCII 值为 65。 中的所有字符`key`都转换为大写，这将简单地返回 中每个字母的字母索引`key`。

以这种方式将每个字母`key`转换为一个数字，并且原始字符串中的每个字母都“向上移动”该位置数。

如果您的键是`BAD`，这将变成数字 1、0 和 3，然后应用到“hello world”，如下所示：

```
Hello world
10310310310 <-- added to each character
Ieomo#xoumd 
```

您可以通过在您的下方添加以下代码来证明这一点：

```
StringBuilder demonstration = new StringBuilder();
foreach (byte b in result)
{
    demonstration.Append((char)b);
}
Console.WriteLine(demonstration.ToString()); 
```

# r - grep: How can i search through my data using a wildcard in R

> ID：13552964
> 
> 赞同：0
> 
> 时间：2012-11-25T16:26:14.850
> 
> 标签：r, wildcard

I have recently started using R. So now I am trying to get some data out of it. However, the results I get are quite confusing. I have datas from the year 1961 to 1963 of everyday in the format 1961-04-25\. I created a vector called: date

So when I try to use grep to just search for the period between April 10 and May 21 and display the dates I used this command:

```
date[date >= grep("196.-04-10", date, value = TRUE) & 
       date <= grep("196.-05-21", date, value = TRUE)] 
```

The results I get is are somehow confusing as it is making 3 days steps instead of giving me every single day... see below.

```
[1] "1961-04-10" "1961-04-13" "1961-04-16" "1961-04-19" "1961-04-22" "1961-04-25" "1961-04-28" "1961-05-01" "1961-05-04" "1961-05-07" "1961-05-10"
[12] "1961-05-13" "1961-05-16" "1961-05-19" "1962-04-12" "1962-04-15" "1962-04-18" "1962-04-21" "1962-04-24" "1962-04-27" "1962-04-30" "1962-05-03"
[23] "1962-05-06" "1962-05-09" "1962-05-12" "1962-05-15" "1962-05-18" "1962-05-21" "1963-04-11" "1963-04-14" "1963-04-17" "1963-04-20" "1963-04-23"
[34] "1963-04-26" "1963-04-29" "1963-05-02" "1963-05-05" "1963-05-08" "1963-05-11" "1963-05-14" "1963-05-17" "1963-05-20" 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-25T17:55:38.587

我认为该`grep`策略被误导了，但也许这样的事情会起作用......基本上，我正在计算一年中的一天（朱利安日期，`yday()`）并使用它进行比较。

```
z <- as.Date(c("1961-04-10","1961-04-11","1961-04-12",
               "1961-05-21","1961-05-22","1961-05-23",
               "1963-04-09","1963-04-12","1963-05-21","1963-05-22"))
library(lubridate)
z[yday(z)>=yday(as.Date("1961-04-10")) & yday(z)<=yday(as.Date("1961-05-21"))]
## [1] "1961-04-10" "1961-04-11" "1961-04-12" "1961-05-21" "1963-04-12"
## [6] "1963-05-21"yz <- year(z) 
```

实际上，这个解决方案对于闰年来说是脆弱的......更好（？）：

```
yz <- year(z)
z[z>=as.Date(paste0(yz,"-04-10")) & z<=as.Date(paste0(yz,"-05-21"))] 
```

（你一定要自己测试这个，我没有仔细测试过！）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-26T00:31:06.770

对变量使用日期格式是最好的选择。

```
## set up some test data
datevar <- seq.Date(as.Date("1961-01-01"),as.Date("1963-12-31"),by="day")
test <- data.frame(date=datevar,id=1:(length(datevar)))
head(test)

## which looks like:
> head(test)
        date id
1 1961-01-01  1
2 1961-01-02  2
3 1961-01-03  3
4 1961-01-04  4
5 1961-01-05  5
6 1961-01-06  6

## find the date ranges you want
selectdates <-  
    (format(test$date,"%m") == "04" & as.numeric(format(test$date,"%d")) >= 10) |
    (format(test$date,"%m") == "05" & as.numeric(format(test$date,"%d")) <= 21)

## subset the original data
result <- test[selectdates,]

## which looks as expected:    
> result
          date  id
100 1961-04-10 100
101 1961-04-11 101
102 1961-04-12 102
103 1961-04-13 103
104 1961-04-14 104
105 1961-04-15 105
106 1961-04-16 106
107 1961-04-17 107
108 1961-04-18 108
109 1961-04-19 109
110 1961-04-20 110
111 1961-04-21 111
112 1961-04-22 112
113 1961-04-23 113
114 1961-04-24 114
115 1961-04-25 115
116 1961-04-26 116
117 1961-04-27 117
118 1961-04-28 118
119 1961-04-29 119
120 1961-04-30 120
121 1961-05-01 121
122 1961-05-02 122
123 1961-05-03 123
124 1961-05-04 124
125 1961-05-05 125
126 1961-05-06 126
127 1961-05-07 127
128 1961-05-08 128
129 1961-05-09 129
130 1961-05-10 130
131 1961-05-11 131
132 1961-05-12 132
133 1961-05-13 133
134 1961-05-14 134
135 1961-05-15 135
136 1961-05-16 136
137 1961-05-17 137
138 1961-05-18 138
139 1961-05-19 139
140 1961-05-20 140
141 1961-05-21 141
465 1962-04-10 465
... 
```

# oracle - PL/SQL statement ignored, cannot display

> ID：13552969
> 
> 赞同：1
> 
> 时间：2012-11-25T16:26:47.867
> 
> 标签：oracle

I keep getting these problems when all I wanted was to display the maximum salary of an employee in a job id

```
ORA-06550: line 12, column 6:
PL/SQL: ORA-00933: SQL command not properly ended
ORA-06550: line 8, column 6:
PL/SQL: SQL Statement ignored

```

Here's my code:

```
DECLARE
    lvc_jb_id VARCHAR2;
    lvn_max_sal NUMBER;
BEGIN
    SELECT max(salary), job_id
    INTO lvn_max_sal, lvc_jb_id
    FROM EMPLOYEES 
    group by job_id
    DBMS_OUTPUT.PUT_LINE('MAX SALARY for job_id is'|| lvn_max_sal);
    DBMS_OUTPUT.PUT_LINE('job id '|| lvc_jb_id);
END; 
```

Can anyone tell what I did wrong?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-25T16:34:44.187

指定字符串的大小。例如：lvc_jb_id VARCHAR2(50);

用分号结束选择查询。现在它应该可以工作了。

# objective-c - RestKit 0.10.3 - 对象管理器 deleteObject

> ID：13552970
> 
> 赞同：0
> 
> 时间：2012-11-25T16:26:57.300
> 
> 标签：objective-c, restkit

我想知道来自“DELETE /api/myEntity/1”请求的“默认”响应是 RestKit 期望的。

我当前的 Web 服务返回 OK (200) 状态代码，正文为空。表示对象已成功删除。

RestKit 触发 onDidFailWithError 方法，并将一些消息记录到调试输出：

```
restkit.network:RKObjectLoader.m:300 Unable to find parser for MIME Type 'text/plain'
restkit.network:RKObjectLoader.m:329 Encountered unexpected response with status code: 200 (MIME Type: text/plain -> 
```

网络服务由我们开发。所以我们可以返回其他任何东西，我们只是认为返回“OK”就足够了。

请指教。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-01T17:48:52.090

对于所有空响应，要返回的正确状态代码应为**204 No Content**。

RestKit 声明也可以正确处理**200 OK**但我也遇到了一些问题**delete**。我发现在标记 v0.10.3 之后完成了一些错误修复（[请参见此处](https://github.com/RestKit/RestKit/commit/fc36d69475fe6e5a7bb21834dbf6df9aadc3dc50)），因此我建议您升级到更新的提交。

请小心更新到较新的**v0.20**，因为它是一个艰难的重构并且很多东西都被改变了！

# object - How to map an object in jsf from backing bean?

> ID：13552972
> 
> 赞同：0
> 
> 时间：2012-11-25T16:27:02.137
> 
> 标签：object, jsf-2, mapping, backing-beans

I am getting error while running this snippet as `/facelet/crew/objectMapGossip.xhtml @14,94 value="#{objcetMapBean.searchCrewParam.staffNum}": Property 'staffNum' not readable on type java.lang.String` please help me out from this small error .. I am new to jsf so stucking at things basic ... Thanks in advance :-)

This is my backing bean... import javax.faces.bean.ManagedBean;

```
@ManagedBean(name = "objcetMapBean")

public class ObjectMapGossip {
private SearchCrew1 searchCrewParam = new SearchCrew1("212","kart","asd");

public SearchCrew1 getSearchCrewParam() {
    return searchCrewParam;
}

public void setSearchCrewParam(SearchCrew1 searchCrewParam) {
    this.searchCrewParam = searchCrewParam;
}

public String search() {
    return "success";
}

}

class SearchCrew1 {

public SearchCrew1() {
    super();
}
 /**
 * @param staffNum
 * @param surName
 * @param rank
 */
public SearchCrew1(String staffNum, String surName, String rank) {
    super();
    this.staffNum = staffNum;
    this.surName = surName;
    this.rank = rank;
}

private String staffNum;

private String surName;

private String rank;

public String getStaffNum() {
    return staffNum;
}

public void setStaffNum(String staffNum) {
    this.staffNum = staffNum;
}

public String getSurName() {
    return surName;
}

public void setSurName(String surName) {
    this.surName = surName;
}

public String getRank() {
    return rank;
}

public void setRank(String rank) {
    this.rank = rank;
} 
```

}

This is my jsf page

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:f="http://java.sun.com/jsf/core"
    xmlns:ui="http://java.sun.com/jsf/facelets">
<h:body>
    <ui:composition template="/facelet/layout/mainlayout.xhtml">
        <ui:define name="content">
            <h:form>
                <div align="left">
                    <h:outputText value="Staff Number: " />
                    <h:inputText id="staffnum" size="6" value="#    {objcetMapBean.searchCrewParam.staffNum}" />
                    <h:outputText value="Surname: " />
                    <h:inputText id="surname" size="10" maxlength="25"  value="# {objcetMapBean.searchCrewParam.surName}"  />
                    <h:outputText value="Rank: " />
                    <h:inputText id="rank" size="3"  value="#{objcetMapBean.searchCrewParam.rank}"  />
                    <h:commandButton value="Search" action="#{objcetMapBean.search}" />
                </div>
        </h:form>
        </ui:define>
    </ui:composition>
    </h:body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T16:08:09.910

我们可以`h:dataTable`轻松地使用 from jsf 标记和映射。 [http://www.mkyong.com/jsf2/jsf-2-datatable-example/](http://www.mkyong.com/jsf2/jsf-2-datatable-example/)

# ruby - 如何获得 Ruby 类中未定义方法的列表？

> ID：13552974
> 
> 赞同：2
> 
> 时间：2012-11-25T16:27:15.117
> 
> 标签：ruby, reflection

在玩了一下 Ruby 时，我编写了以下代码：

```
class A
end

A.singleton_class.instance_eval do
    undef_method :new
end

# or
# class << B
#   undef_method :new
# end

A.new

> NoMethodError: undefined method `new' for A:Class
>         from (irb):8
>         from /home/mmsequeira/.rvm/rubies/ruby-1.9.3-p327/bin/irb:16:in `<main>' 
```

这很酷。但是我怎么知道给定类中哪些方法是未定义的呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-25T17:13:54.963

你不能默认。取消定义方法会将其从存在中删除。但是，您可以在它们被删除时记录它们。这可以通过[方法挂钩](https://stackoverflow.com/a/5168554/211563)来完成，以捕获所有内容并避免丑陋的别名方法链接：

```
class Module
  def method_undefined name
    (@undefined_methods ||= []) << name
  end

  def singleton_method_undefined name
    (@undefined_methods ||= []) << name
  end

  def undefined_methods
    @undefined_methods || []
  end
end 
```

`undef_method`这将通过or捕获未定义的方法`undef`：

```
class C
  def foo; end
  def bar; end

  undef foo
  undef_method :bar
end

C.undefined_methods  #=> [:foo, :bar]
C.singleton_class.instance_eval { undef new }
C.singleton_class.undefined_methods  #=> [:new] 
```

当然，您必须在 Module 中包含钩子方法，然后才能捕获任何内容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-25T16:48:40.203

也许你需要重新定义`Module#undef_method`.

```
class Module
  alias original_undef_method :undef_method
  @@undef_methods = {}
  def undef_method *methods
    methods.each{|method| @@undef_methods[[self, method]] ||= true}
    original_undef_method(*methods)
  end
  def self.undef_methods; @@undef_methods.keys end
end 
```

然后，你得到：

```
class A
end
A.singleton_class.instance_eval do
    undef_method :new
end
Module.undef_methods
# => [[#<Class:A>, :new]] 
```

# c# - 登录页面，如何检查 3 个表的 ID 和密码

> ID：13552985
> 
> 赞同：0
> 
> 时间：2012-11-25T16:28:37.450
> 
> 标签：c#, asp.net, visual-studio-2010

我正在使用 Visual Studio 2010在&`login`中为我的 Web 应用程序创建一个页面。`ASP.net``C#`

我的`login`页面是空的，只有 2 个`text boxes`和`username`一个`password`，每个控件`submit button`都有一些必填字段`validations`。

我正在使用`SQL Server 2012`并在其中有 3 个表**`Student`**，**`Staff`**、 和**`Admins`**，每个表都有两列用于`Username`和`password`。

我想做的是当用户按下`submit`按钮时，它会检查学生表中的`username`和`password`，如果它不存在，它会检查`staff`，然后`admins`。如果它不在其中任何一个中，则`error`表明登录失败。

我在页面上放了一个从表格中`SQLdatasource`提取`username`和它们等于文本的页面。`password``student``textboxes`

我需要`sqldatasources`为每个页面添加 3 个`table`吗？在那之后我该怎么办？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-25T17:10:05.347

好吧-我同意您也许应该重构，但要回答您的问题：

由于您只读取数据，您可以在您的选择中对您的三个表使用联合。

[来自http://msdn.microsoft.com/en-us/library/ms180026.aspx](http://msdn.microsoft.com/en-us/library/ms180026.aspx)的示例

```
SELECT ProductModelID, Name
FROM Production.ProductModel
WHERE ProductModelID NOT IN (3, 4)
UNION
SELECT ProductModelID, Name
FROM dbo.Gloves
ORDER BY Name;
GO 
```

并`SelectCommand`在您的数据源中修改。

# ruby-on-rails - Rails 3 链接到嵌套的多态资源

> ID：13552990
> 
> 赞同：0
> 
> 时间：2012-11-25T16:29:00.007
> 
> 标签：ruby-on-rails

我正在以 ryanb 在[https://github.com/railscasts/154-polymorphic-association/tree/master/revised/blog-after](https://github.com/railscasts/154-polymorphic-association/tree/master/revised/blog-after)中描述的方式尝试评论系统。

[它使用在routes.rb](https://github.com/railscasts/154-polymorphic-association/blob/master/revised/blog-after/config/routes.rb)中看到的 Rails 3 嵌套资源路由：

```
resources :articles do
  resource :comments
end 
```

评论由父母类型和 id 加载，如[articles_controller.rb](https://github.com/railscasts/154-polymorphic-association/blob/master/revised/blog-after/app/controllers/articles_controller.rb)和[comments_controller.rb](https://github.com/railscasts/154-polymorphic-association/blob/master/revised/blog-after/app/controllers/comments_controller.rb)所示：

```
class ArticlesController < ApplicationController
  ...
  def show
    @article = Article.find(params[:id])
    @commentable = @article
    @comments = @commentable.comments
    @comment = Comment.new
  end

class CommentsController < ApplicationController
  before_filter :load_commentable

  def index
    @comments = @commentable.comments
  end
  ...
private

  def load_commentable
    resource, id = request.path.split('/')[1, 2]
    @commentable = resource.singularize.classify.constantize.find(id)
  end
  ...
end 
```

我将如何在评论的视图模板中添加评论编辑或销毁操作的链接？

[_comments.html.erb：](https://github.com/railscasts/154-polymorphic-association/blob/master/revised/blog-after/app/views/comments/_comments.html.erb)

```
<% @comments.each do |comment| %>
  <div class="comment">
    <%= simple_format comment.content %>
    <%= link_to "Delete", comment, method: :delete %>
  </div>
<% end %> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T17:50:20.807

将资源作为数组传递：

```
<%= link_to "Delete", [@article, @comment], method: :delete %> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-25T20:00:16.393

借助 jdoes 的建议，我更深入地研究了数组传递并注意到 routes.rb 缺少资源中的一个 s ：comments。固定版本：

```
 resources :articles do
    resources :comments do
    end
  end 
```

现在，只需将链接作为数组提供，模板就可以完美地工作。

```
<% @comments.each do |comment| %>
  <div class="comment">
    <%= simple_format comment.content %>
    <%= link_to "Delete", [@commentable, comment], method: :delete %>
  </div>
<% end %> 
```

# python - 获取当前路线而不是 Pyramid 中的 route_path

> ID：13552992
> 
> 赞同：8
> 
> 时间：2012-11-25T16:29:16.857
> 
> 标签：python, pyramid

我有导航栏，例如：

```
<div id="nav">
 <ul>
  <li
  % if request.current_route_path == "somepath":
  class="current"
  % endif
  > <a href='/page1"> 1 </a></li>
  <li
  % if request.current_route_path == "another_test":
  class="current"
  %endif
  > <a href="/page2"> 2 </a> <li>
  </ul>
</div> 
```

我想添加一些代码来测试当前是什么，`route`以便我可以决定要突出显示哪个栏（`class="current"`）。

我知道 Pyramid 有一种方法`current_route_path`可以获取当前 URL 的路径。但是，我认为最好使用**route name**而不是**route path**。有人对此有想法吗？

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-11-25T17:37:43.663

你想要的是使用[`matched_route`](http://docs.pylonsproject.org/projects/pyramid/en/1.4-branch/narr/urldispatch.html#matched-route).

```
if request.matched_route.name == 'my_route_name': 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-25T17:03:12.633

我想你正在寻找这样的东西：

```
% if request.url == request.route_url('my_route_name')
##do stuff
%endif 
```

其中 request.url 是当前 url，request.route_url('my_route_name') 是命名路由的 url