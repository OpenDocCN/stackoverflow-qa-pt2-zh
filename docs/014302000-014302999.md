# StackOverflow 问答 14302000-14302999

# java - 在 sender.send 中放置什么 - 适用于 Android 的 Google Cloud Messaging

> ID：14302001
> 
> 赞同：2
> 
> 时间：2013-01-13T08:49:59.717
> 
> 标签：java, android, cordova, push-notification, google-cloud-messaging

我不明白变量registrationId应该是什么

```
registrationId=?
Result result = sender.send(message, registrationId, 5); 
```

有人可以向我解释吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-13T11:26:46.423

> 什么是**registrationId**？

[Google Doc](https://developer.android.com/google/gcm/gcm.html)说：“GCM 服务器发给 Android 应用程序的 ID，允许它接收消息。一旦 Android 应用程序拥有注册 ID，它就会将其发送到 3rd 方应用程序服务器，后者使用它来识别每个设备已注册以接收给定 Android 应用程序的消息。换句话说，注册 ID 与在特定设备上运行的特定 Android 应用程序相关联。”

您可以将其`registrationId`视为`device token`特定于设备的设备，即设备的唯一标识。此唯一标识令牌或`registrationId`将帮助您仅发送`message`到指定设备。

当您从 注册`GCM`服务`android app`时，注册过程会返回此唯一 ID，该 ID 称为“registrationId”。

# android - 633632 字节分配内存不足

> ID：14302004
> 
> 赞同：1
> 
> 时间：2013-01-13T08:50:36.260
> 
> 标签：android, http, drawable, inputstream, out-of-memory

这是我的代码。开始时的目标是将图像抓取到动态列表视图中，基本上就像我自己数据库中的 RSS 提要一样。我所做的是抓取http链接并将其转换为drawable，然后从那里将drawable从动态列表视图设置为imageview。

这是问题所在。当我进入应用程序时，第一次加载是好的。但是当我点击刷新按钮时，我将收到“633632 字节分配时内存不足”错误，然后是更详细的错误版本，其中包含所有已分配的堆大小限制。

我该如何解决这个问题？

```
package com.whatstherex.sam;

import java.io.InputStream;
import java.net.URL;
import java.util.ArrayList;
import java.util.Vector;

import org.apache.http.NameValuePair;

import android.app.Activity;
import android.app.ProgressDialog;
import android.graphics.drawable.Drawable;
import android.os.AsyncTask;
import android.os.Bundle;
import android.os.StrictMode;
import android.view.View;
import android.widget.Button;
import android.widget.ListView;

public class Snapshots extends Activity implements View.OnClickListener {
Button bBackSnapshots, bRefreshSnapshots, bSnapshotsSnapshots;
ListView snapshotsDynamicListView;
Vector<SnapshotsData> snapshotsInputs = new Vector<SnapshotsData>();
SnapshotsCustomFeedAdaptor adaptor;
String username, snapshotsList;
String[] feed;

@Override
protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);
    StrictMode.ThreadPolicy policy = new StrictMode.ThreadPolicy.Builder().permitAll().build();
    StrictMode.setThreadPolicy(policy);
    setContentView(R.layout.snapshots);

    initialize();
}

public void initialize() {
    bBackSnapshots = (Button) findViewById(R.id.bBackSnapshots);
    bRefreshSnapshots = (Button) findViewById(R.id.bRefreshSnapshots);
    bSnapshotsSnapshots = (Button) findViewById(R.id.bSnapshotsSnapshots);

    bBackSnapshots.setOnClickListener(this);
    bRefreshSnapshots.setOnClickListener(this);
    bSnapshotsSnapshots.setOnClickListener(this);                           

    getInformations();
}

private AsyncTask<String, Void, String> task;
private AsyncTask<String, Void, String> task1;
private AsyncTask<String, Void, InputStream[]> task2;

public void getInformations(){
    task = new AsyncTask<String, Void, String>() {
        ProgressDialog dialog;
        Bundle bundle;
        String res;
        @Override 
        protected void onPreExecute(){
            dialog = new ProgressDialog(Snapshots.this, ProgressDialog.STYLE_SPINNER);
            dialog.setMessage("Loading Data...");           
            dialog.setCancelable(false);
            dialog.setCanceledOnTouchOutside(false);    

            dialog.show();
        }

        @Override
        protected String doInBackground(String... arg0) {
            bundle = getIntent().getExtras();
            res = bundle.getString("Username");
            return res;
        }

        @Override
        protected void onPostExecute(String result) {
            dialog.dismiss();
            username = result;      

            task1 = new AsyncTask<String, Void, String>() {
                ProgressDialog dialog1;
                ArrayList<NameValuePair> postParameters;
                String response1;
                String res1;
                @Override 
                protected void onPreExecute(){
                    snapshotsDynamicListView = (ListView) findViewById(R.id.lvSnapshots);                       

                    postParameters = new ArrayList<NameValuePair>();

                    dialog1 = new ProgressDialog(Snapshots.this, ProgressDialog.STYLE_SPINNER);
                    dialog1.setMessage("Loading Data...");          
                    dialog1.setCancelable(false);
                    dialog1.setCanceledOnTouchOutside(false);   

                    dialog1.show();
                }

                @Override
                protected String doInBackground(String... arg0) {
                    try {
                        response1 = CustomHttpClient.executeHttpPost("http://whatstherex.info/getS.php", postParameters);

                        res1 = response1.toString();

                        res1 = res1.replaceAll("null", "");

                        snapshotsList = res1.toString();

                        return snapshotsList;
                    }catch(Exception e){
                        res1 = e.toString();
                        return res1;
                    }
                }

                @Override
                protected void onPostExecute(String result1) {
                    feed = result1.split("[_]");

                    task2 = new AsyncTask<String, Void, InputStream[]>() {          
                        ProgressDialog dialog2;
                        InputStream[] is = new InputStream[50];
                        Drawable[] d = new Drawable[50];
                        String[] res2 = new String[50];
                        Drawable p4, p5, p9, p10, p14, p15, p19, p20, p24, p25, p29, p30, p34, p35, p39, p40, p44, p45, p49, p50, p54, p55, p59, p60, p64, p65, p69, p70, p74, p75, p79, p80, p84, p85, p89, p90, p94, p95, p99, p100, p104, p105, p109, p110, p114, p115, p119, p120, p124, p125;
                        @Override 
                        protected void onPreExecute(){
                            dialog2 = new ProgressDialog(Snapshots.this, ProgressDialog.STYLE_SPINNER);
                            dialog2.setMessage("Loading Data...");          
                            dialog2.setCancelable(false);
                            dialog2.setCanceledOnTouchOutside(false);   

                            dialog2.show();
                        }

                        @Override
                        protected InputStream[] doInBackground(String... src) {
                            for(int i = 0; i<50; i++){
                                res2[i] = src[i];
                            }
                            for(int i = 0; i<50; i++){
                                try {
                                    is[i] = (InputStream) new URL(res2[i]).getContent();                                        
                                } catch (Exception e) {
                                    e.toString();
                                }
                            }
                                return is;
                        }

                        @Override
                        protected void onPostExecute(InputStream[] result2) {
                            for(int i = 0; i<50; i++){
                                try {
                                    d[i] = Drawable.createFromStream(result2[i], "src name");
                                } catch (Exception e) {
                                    e.toString();
                                }
                            }

                            p4 = d[0];
                            p5 = d[1];
                            p9 = d[2];
                            p10 = d[3];
                            p14 = d[4];
                            p15 = d[5];
                            p19 = d[6];
                            p20 = d[7];
                            p24 = d[8];
                            p25 = d[9];
                            p29 = d[10];
                            p30 = d[11];
                            p34 = d[12];
                            p35 = d[13];
                            p39 = d[14];
                            p40 = d[15];
                            p44 = d[16];
                            p45 = d[17];
                            p49 = d[18];
                            p50 = d[19];
                            p54 = d[20];
                            p55 = d[21];
                            p59 = d[22];
                            p60 = d[23];
                            p64 = d[24];
                            p65 = d[25];
                            p69 = d[26];
                            p70 = d[27];
                            p74 = d[28];
                            p75 = d[29];
                            p79 = d[30];
                            p80 = d[31];
                            p84 = d[32];
                            p85 = d[33];
                            p89 = d[34];
                            p90 = d[35];
                            p94 = d[36];
                            p95 = d[37];
                            p99 = d[38];
                            p100 = d[39];
                            p104 = d[40];
                            p105 = d[41];
                            p109 = d[42];
                            p110 = d[43];
                            p114 = d[44];
                            p115 = d[45];
                            p119 = d[46];
                            p120 = d[47];
                            p124 = d[48];
                            p125 = d[49];

                            snapshotsInputs.add(new SnapshotsData(feed[1].toString(), feed[2].toString(), feed[3].toString(), p4, p5));
                            snapshotsInputs.add(new SnapshotsData(feed[6].toString(), feed[7].toString(), feed[8].toString(), p9, p10));
                            snapshotsInputs.add(new SnapshotsData(feed[11].toString(), feed[12].toString(), feed[13].toString(), p14, p15));
                            snapshotsInputs.add(new SnapshotsData(feed[16].toString(), feed[17].toString(), feed[18].toString(), p19, p20));
                            snapshotsInputs.add(new SnapshotsData(feed[21].toString(), feed[22].toString(), feed[23].toString(), p24, p25));
                            snapshotsInputs.add(new SnapshotsData(feed[26].toString(), feed[27].toString(), feed[28].toString(), p29, p30));
                            snapshotsInputs.add(new SnapshotsData(feed[31].toString(), feed[32].toString(), feed[33].toString(), p34, p35));
                            snapshotsInputs.add(new SnapshotsData(feed[36].toString(), feed[37].toString(), feed[38].toString(), p39, p40));
                            snapshotsInputs.add(new SnapshotsData(feed[41].toString(), feed[42].toString(), feed[43].toString(), p44, p45));
                            snapshotsInputs.add(new SnapshotsData(feed[46].toString(), feed[47].toString(), feed[48].toString(), p49, p50));
                            snapshotsInputs.add(new SnapshotsData(feed[51].toString(), feed[52].toString(), feed[53].toString(), p54, p55));
                            snapshotsInputs.add(new SnapshotsData(feed[56].toString(), feed[57].toString(), feed[58].toString(), p59, p60));
                            snapshotsInputs.add(new SnapshotsData(feed[61].toString(), feed[62].toString(), feed[63].toString(), p64, p65));
                            snapshotsInputs.add(new SnapshotsData(feed[66].toString(), feed[67].toString(), feed[68].toString(), p69, p70));
                            snapshotsInputs.add(new SnapshotsData(feed[71].toString(), feed[72].toString(), feed[73].toString(), p74, p75));
                            snapshotsInputs.add(new SnapshotsData(feed[76].toString(), feed[77].toString(), feed[78].toString(), p79, p80));
                            snapshotsInputs.add(new SnapshotsData(feed[81].toString(), feed[82].toString(), feed[83].toString(), p84, p85));
                            snapshotsInputs.add(new SnapshotsData(feed[86].toString(), feed[87].toString(), feed[88].toString(), p89, p90));
                            snapshotsInputs.add(new SnapshotsData(feed[91].toString(), feed[92].toString(), feed[93].toString(), p94, p95));
                            snapshotsInputs.add(new SnapshotsData(feed[96].toString(), feed[97].toString(), feed[98].toString(), p99, p100));
                            snapshotsInputs.add(new SnapshotsData(feed[101].toString(), feed[102].toString(), feed[103].toString(), p104, p105));
                            snapshotsInputs.add(new SnapshotsData(feed[106].toString(), feed[107].toString(), feed[108].toString(), p109, p110));
                            snapshotsInputs.add(new SnapshotsData(feed[111].toString(), feed[112].toString(), feed[113].toString(), p114, p115));
                            snapshotsInputs.add(new SnapshotsData(feed[116].toString(), feed[117].toString(), feed[118].toString(), p119, p120));
                            snapshotsInputs.add(new SnapshotsData(feed[121].toString(), feed[122].toString(), feed[123].toString(), p124, p125));

                            adaptor = new SnapshotsCustomFeedAdaptor(Snapshots.this, R.layout.snapshotsdata, snapshotsInputs);
                            snapshotsDynamicListView.setAdapter(adaptor);

                            dialog2.dismiss();  
                        }
                    };                      
                    task2.execute(feed[4], feed[5], feed[9], feed[10], feed[14], feed[15], feed[19], feed[20], feed[24], feed[25], feed[29], feed[30], 
                            feed[34], feed[35], feed[39], feed[40], feed[44], feed[45], feed[49], feed[50], feed[54], feed[55], feed[59], feed[60], 
                            feed[64], feed[65], feed[69], feed[70], feed[74], feed[75], feed[79], feed[80], feed[84], feed[85], feed[89], feed[90], 
                            feed[94], feed[95], feed[99], feed[100], feed[104], feed[105], feed[109], feed[110], feed[114], feed[115], feed[119], 
                            feed[120], feed[124], feed[125]);

                    dialog1.dismiss();
                }
            };
            task1.execute();
        }
    };
    task.execute();
}

@Override
public void onClick(View v) {
    switch (v.getId()){
    case R.id.bBackSnapshots:
        finish();
        break;
    case R.id.bRefreshSnapshots:
        finish();
        startActivity(getIntent());
        break;
    case R.id.bSnapshotsSnapshots:

        break;
    }
}       
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-13T10:51:49.300

为什么要将大量的 Drawables 添加到内存中。这就是问题所在。应用程序内存限制仅为 ~16MB（每个设备的变化）。然而，看起来你正在加载 100 个可绘制对象，很可能超过了这个。

您应该仅在列表请求新视图时加载可绘制对象。它会在不需要时将其丢弃。

编辑：

您可以做的是覆盖适配器类。并指定一个图片的网址。然后在 getView 方法中，从给定的 Url 加载图像。这会按需处理异步加载。

参见例如：

[https://stackoverflow.com/a/3068012/940834](https://stackoverflow.com/a/3068012/940834)

[http://www.androidhive.info/2012/02/android-custom-listview-with-image-and-text/](http://www.androidhive.info/2012/02/android-custom-listview-with-image-and-text/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-13T09:19:37.923

它不是引发错误的分配通常是问题，除非它的大小是兆字节。您正在使用的所有其余内存都是一个问题。你几乎可以肯定泄漏了一些东西。使用该应用程序并获取堆栈的 hprof 转储，查找应删除的内容而不是删除的内容或创建的对象过多。

# python-2.7 - 在 wxPython 中获取“NotImplementedError”

> ID：14302005
> 
> 赞同：-1
> 
> 时间：2013-01-13T08:50:39.100
> 
> 标签：python-2.7, wxpython

每当我运行我的 wxpython 代码时，我都会收到此错误。

```
 Traceback (most recent call last):
      File "musicplayer.py", line 203, in <module>
        MyPanel(frame, -1)
      File "musicplayer.py", line 17, in __init__
        self.mc = wx.media.MediaCtrl(self, style=wx.SIMPLE_BORDER)
      File "/usr/lib/python2.7/dist-packages/wx-2.8-gtk2-unicode/wx/media.py", line 96, in __init__
        _media.MediaCtrl_swiginit(self,_media.new_MediaCtrl(*args, **kwargs))
    NotImplementedError 
```

我的程序是在 wxpython 中创建一个音乐播放器。

这是代码：

```
 import wx

    import wx.media

    import os

    from wx.lib.wordwrap import wordwrap

    class MyPanel(wx.Panel):

    def __init__(self, parent, id):

    wx.Panel.__init__(self, parent, id)

    self.SetBackgroundColour("white")

    self.Center()

    self.panel = wx.Panel(self, wx.ID_ANY)

    #self.CreateStatusBar()

        try:

            self.mc = wx.media.MediaCtrl(self, style=wx.SIMPLE_BORDER)

        except NotImplementedError:

            self.Destroy()

            raise

        loadButton  = wx.BitmapButton(self, -1, wx.Bitmap('icons/stock_media-file.png'),pos=(10,2))

        loadButton.Bind(wx.EVT_LEFT_DOWN, self.onLoadFile, loadButton)

    #   self.sb = self.CreateStatusBar()

        playlistButton  = wx.BitmapButton(self, -1, wx.Bitmap('icons/stock_media-list.png'),pos=(80,2))

        #playlistButton.Bind(wx.EVT_ENTER_WINDOW, self.OnWidgetEnter)

        helpButton  = wx.BitmapButton(self, -1, wx.Bitmap('icons/stock_media-help.png'),pos=(150,10))

        helpButton.Bind(wx.EVT_BUTTON, self.onHelp, helpButton)

        #sb.SetStatusText("blabla")

        playButton  = wx.BitmapButton(self, -1, wx.Bitmap('icons/stock_media-play.png'),pos=(50,140))

        playButton.Bind(wx.EVT_LEFT_DOWN, self.onPlay, playButton)

        pauseButton  = wx.BitmapButton(self, -1, wx.Bitmap('icons/stock_media-pause.png'),pos=(130,140))

        pauseButton.Bind(wx.EVT_ENTER_WINDOW, self.onPause, pauseButton)

        stopButton = wx.BitmapButton(self, -1, wx.Bitmap('icons/stock_media-stop.png'),pos=(170,140))

        stopButton.Bind(wx.EVT_LEFT_DOWN, self.onStop, stopButton)

        volumeButton = wx.BitmapButton(self, -1, wx.Bitmap('icons/stock_media-volume.png'),pos=(1200,140))

        volumeButton.Bind(wx.EVT_LEFT_DOWN, self.mute, volumeButton)

        nextButton=wx.BitmapButton(self, -1, wx.Bitmap('icons/stock_media-next.png'),pos=(90,140))

        nextButton.Bind(wx.EVT_LEFT_DOWN, self.playForward, nextButton)

        previousButton=wx.BitmapButton(self, -1, wx.Bitmap('icons/stock_media-previous.png'),pos=(10,140))

        previousButton.Bind(wx.EVT_LEFT_DOWN, self.playBack, previousButton)

                # layout ...

        hsizer = wx.BoxSizer(wx.HORIZONTAL)

        # also creates a border space

        vsizer = wx.BoxSizer(wx.VERTICAL)

        vsizer.Add(hsizer, 2, wx.EXPAND|wx.ALL, border=-10)

        vsizer.Add(self.mc,6, wx.EXPAND|wx.ALL, border=30)

        self.SetSizer(vsizer)

        #slider

    self.slider = wx.Slider(self,-1,pos=(10,100),size = (1350,-1))

        self.slider.Bind(wx.EVT_SLIDER,self.Seek)

    self.info_pos = wx.StaticText(self,-1,pos=(1300,125),size=(450,-1))

    sizer= wx.GridBagSizer(5,5)

    sizer.Add(self.slider,(1,1),(1,4))

        self.Show()

        #volumeslider

        currentVolume = 50

        global slider1

        slider1 = wx.Slider(self,pos=(1250,150),size = (100,-1))

        slider1.SetRange(0, 100)

        slider1.SetValue(currentVolume)

        slider1.Bind(wx.EVT_SLIDER, self.setVol,slider1)

        #Timer

        self.timer = wx.Timer(self)

        self.Bind(wx.EVT_TIMER, self.onTimer)

        self.timer.Start(100)

        start_image = wx.Image("Logo.gif") 

    start_image.Rescale(320, 300) 

    image = wx.BitmapFromImage(start_image) 

    mypic = wx.StaticBitmap(self, -1, image, pos=(550,300), style=wx.BITMAP_TYPE_PNG)

        ext = ("~~~Title~~~")

        self.file = wx.StaticText(self, -1, ext,size=(355,-1),pos=(600,175))

    def onLoadFile(self, evt):

        dlg = wx.FileDialog(self, message="Choose a media file",

            defaultDir=os.getcwd(), defaultFile="",

            style=wx.OPEN|wx.CHANGE_DIR )

        if dlg.ShowModal() == wx.ID_OK:

            path = dlg.GetPath()

            self.doLoadFile(path)

        dlg.Destroy()

    def doLoadFile(self, path):

        if not self.mc.Load(path):

            wx.MessageBox("Unable to load %s: Unsupported format?" % path,

                "ERROR", wx.ICON_ERROR | wx.OK)

        else:

            folder, filename = os.path.split(path)

            self.file.SetLabel('%s' % filename)

            self.GetSizer().Layout()

            self.mc.Play()

    def onPlay(self,event):

        self.mc.Play()

        self.slider.SetRange(0, self.mc.Length())

        self.mc.SetLabel('length: %d seconds' % (self.mc.Length()/1000))

    def onPause(self, evt):

        self.mc.Pause()

        self.sb.SetStatusText('Load file')

        event.Skip()

    def onStop(self, evt):

        self.mc.Stop()

    def Seek(self,event):

       self.mc.Seek(self.slider.GetValue())    

    def onTimer(self,event):

        current = self.mc.Tell()

        self.info_pos.SetLabel(" %i seconds" % (int(current)/1000))

        self.slider.SetValue(current)

    def setVol(self, event):

        currentVolume = slider1.GetValue()

        print int(currentVolume)

        self.mc.SetVolume(currentVolume)

    def mute(self, event):

        currentVolume=0

        self.mc.SetVolume(currentVolume)

    def playForward(self,event):

        playbackrate=16

        self.mc.SetPlaybackRate(playbackrate)

    def playBack(self,event):

        playbackrate=-4

        self.mc.SetPlaybackRate(playbackrate)

    def OnWidgetEnter(self,e):

        name = e.GetEventObject().GetClassName()

        sb.SetStatusText(name+'widget')

        e.skip()

    def onHelp(self, event):

        info = wx.AboutDialogInfo()

        info.Name = "Media 89 Help and Support"

        info.Description = wordwrap(

            "This is an example of a help description of how to  "

            "use this music player!"

            "1.You can load your file "

            "2.You can play music"

            "3.Can check the playlist",

            350, wx.ClientDC(self.panel))

        info.WebSite = ("http://homes.soi.rp.edu.sg/101193/home.html", "Online Help")

        info.play = ["media 89 group"]

        info.do = wordwrap("created by media 89!", 500,

                                wx.ClientDC(self.panel))

        wx.AboutBox(info)

app = wx.PySimpleApp()

style=wx.DEFAULT_FRAME_STYLE^wx.RESIZE_BORDER

frame = wx.Frame(None, -1, "Media 89",style=style,size = (1500,1800) )

MyPanel(frame, -1)

frame.Show(True)

app.MainLoop() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T19:19:12.343

wxMediaCtrl 是构建的可选部分，如果 wxWidgets 的配置脚本无法找到正确的依赖库或未安装它们的 -devel 包，它将自动被排除。当 wxPython 是使用没有 wxMediaCtrl 的 wxWigets 构建时，它会创建一个存根类，如果你尝试使用它，它只会引发 NotImplementedError。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T23:14:15.883

什么版本的 wxPython？

在 Linux 上，使用 python2.7 和 wxPython 2.8.12.1，我进入我的 shell 并启动 python 解释器并发出一些测试命令：

```
python
>>> import wx.media
>>> app = wx.App()
>>> frm = wx.Frame(None)
>>> mc = wx.media.MediaCtrl(frm, style=wx.SIMPLE_BORDER)
>>> 
```

没有错误，尽管在最后一行按回车键并返回 python 提示后花了大约 20 秒。你可以在你的命令外壳上做同样的事情，看看你是否仍然得到错误，如果是这样，试试不使用 style 参数？

# c++ - 无法检测静态附加到 C++ 程序的 DLL 中的内存泄漏

> ID：14302008
> 
> 赞同：0
> 
> 时间：2013-01-13T08:51:11.037
> 
> 标签：c++, memory, dll, memory-leaks, detect

我有一个主机程序隐式（使用库及其 DLL）加载 DLL。当我故意进行内存泄漏时，在我的主机程序中，`CrtDbg*`函数会检测到泄漏。当我故意在其中一个 DLL 中发生内存泄漏时，不会检测到泄漏。

注意：在我的主机中，我`_CrtDumpMemoryLeaks`在主功能终止后激活该功能。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-13T09:18:08.010

您的 DLL 很可能静态链接到 CRT。（或者它们是零售版本，但您的 EXE 是调试版本）。不管怎样，你有不止一个堆。当您调用 _CrtDeumpMemoryLeaks 时，它只能跟踪发出调用的二进制文件的未释放内存分配。你有两个选择。

*   更改所有代码（DLL 和 EXE）以链接到相同的 MSVCRT DLL，而不是静态链接。在每个二进制文件的项目设置中，选择“多线程调试 DLL”或“多线程 DLL”作为 CRT 的链接类型。不要选择静态的。然后所有 DLL 和 EXE 将共享同一个堆。

**或者**

*   从每个 DLL 中导出一个名为“DetectMemoryLeaks”的函数（或其他 DLL 的类似命名函数，因此不存在命名冲突）。这个函数只调用_CrtDumpMemoryLeaks。在您的 EXE 中，在您调用 _CrtDumpMemoryLeaks 的同时调用此函数。每个 DLL 中的每个堆都将被检查是否存在泄漏。

# javascript - 组织小型 javascript 应用程序的好方法

> ID：14302012
> 
> 赞同：1
> 
> 时间：2013-01-13T08:52:10.867
> 
> 标签：javascript

我基本上在寻找的是是否有更好的方法来**组织**和学习。这是我在这里粘贴的代码。想象一个 1800 行长的 javascript 文件，其中包含大约 50 个类似的绑定。

我有一个用于基本单页应用程序的 Java EE 支持的 REST Api。我正在使用 jQuery，下划线用于模板，jQueryUI 用于自动完成和 Blueimp 的 jQuery 文件上传。呈现的 JSP 有 940 行，其中包括`<script id="template"></script>`for 模板，总共大约 630 个 DOM 元素。

**对于平均计算机配置上的浏览器来说，大约 70 个事件是否非常昂贵？我应该重写所有这些以委托给容器元素吗？超出此范围不会增长太多。**

jsp 文件在使用 JSTL 加载之前使用服务器上的大部分内容呈现，而不是加载然后执行 ajax 调用，因为没有太多动态内容不断更新。对于任何重大更新，我都会刷新页面，否则它只是 DOM 附加。

我看到有人说 10k 行代码被认为是一个大应用程序，所以我离得很近。我所有的模板都在`<script id="tpl_xxx"></script>`代码中的标签内，它们应该被插入到代码中。我的假设是更容易看到将插入它们的模板，因此将来要对这些模板进行更改的人不必去寻找它们。 **我应该将它们放在外部 .html 文件中，然后在运行时加载它吗？**

随着所有这些 MVC 框架（如骨干网等）的出现，是否值得重写此代码以置于其中之一？会有显着的好处吗？

目前的代码非常混乱，全局范围内有一大堆变量（缓存的 dom 元素、常量、其他缓存），它基本上破坏了 JSLint，它放弃了大约 6% 的文件扫描。我意识到这很糟糕，但我想知道它是否值得为不是很大的代码付出努力。它针对 IE7+（客户端要求）进行了全面测试，并且运行良好，因此这纯粹是一个开发人员/可维护性/效率/编码实践问题。我希望我可以在这里粘贴代码，但我不能，所以即使是关于我应该瞄准的模糊建议也会有很好的帮助。

代码基本上是下面的 x50，在全局范围内有大量常量用于用户消息、模板名称、缓存的 dom 元素等。

```
$('#contact-form').submit(function(e) {
    e.preventDefault();
    var $frm = $(this);
    var $submitBtn = $frm.find('a.submit-btn');
    var $errorBox = $frm.find('div.error');
    var frmSerialized = $frm.serializeObject();
    var validStatus = validateContact(frmSerialized);

    $frm.find('input, select, textarea').bind("keydown change", function() {
        $errorBox.hide();
    });

    if (validStatus == true) {
        busyCursor('show', $submitBtn);
        var jsonReq = JSON.stringify(frmSerialized);
        $.post($frm.attr('action'), jsonReq, function(data) {
            busyCursor('hide', $submitBtn);
            if (data.status == ResponseStatus.SUCCESS) {
                $('#contact-form-div').addClass('no-display');
                $('#contact-confirm').removeClass('no-display');
            } else {
                if (data.status == ResponseStatus.ERROR) {
                    showError($errorBox, data.message);
                } else {
                    showError($errorBox, UserMessages.serverException);
                }
            }
        });
    } else {
        showError($errorBox, validStatus);
    }
});
$('#submit-contact').click(function(e) {
    e.preventDefault();
    $('#contact-form').submit();
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T06:37:09.070

我几乎在所有项目中都使用骨干网，但我会尽量保持中立。我认为您首先要问自己是否有时间和金钱来重写应用程序？其次，您认为该应用程序在未来会增长吗？如果您确实看到应用程序在增长并且愿意投资于重写，那么现在可能是这样做的最佳时机。

我将骨干视为构建应用程序的一种方式，而不是实际的框架。它肯定不是固执己见，而且有很多方法可以让你在骨干中做事。习惯在主干中编写应用程序可能需要一些时间和反复试验。

Backbone 也不一定会减少您编写的代码量。在您的情况下，您可能会发现您最终会编写更多代码。但是如果做得好，您将能够在整个应用程序中重用模块，并且您的应用程序将来会变得更容易维护。它还将提供结构，因此您的应用程序将有增长空间。

所以最后，在骨干网中重写你的应用程序不应该掉以轻心。但是，如果您确实有时间花时间学习该框架，我认为您不会失望。如果做得好，您将缓解上面列出的大部分问题（流氓事件和全局变量），而且您将看到一个更易于维护、发展和引以为豪的应用程序。

# c++ - C++ .NET 内存泄漏？

> ID：14302018
> 
> 赞同：0
> 
> 时间：2013-01-13T08:52:35.887
> 
> 标签：c++, .net, image, memory, memory-leaks

我一直在使用 .NET 和 C++，而且我当然不是使用指针的初学者（尽管我不完全确定 HANDLES 在内存中的使用方式）。

我最担心的是：我编写了一些代码，可以在自定义表单（关闭按钮）上呈现图像。我发现每次将按钮悬停在任务管理器上时，程序都会消耗越来越多的内存。

我对登录按钮也有类似的问题。代码如下：

```
private: void signinbutton_VirtualPaint() {
    if(in_signin && !on_signin) //variables for if the mouse is in range
        signinbutton->BackgroundImage = img_signin_hover;
    else if(in_signin && on_signin)
        signinbutton->BackgroundImage = img_signin_click;
    else
        signinbutton->BackgroundImage = img_signin;
} 
```

图像定义如下：

```
img_signin = (cli::safe_cast<System::Drawing::Image^  >(rm->GetObject("btn_signin"))); 
```

使用一个`Resources::ResourceManager`对象。将鼠标悬停在该按钮上会导致越来越多的内存被消耗（尽管增加很小，但确实会发生）。

`'gcnew'`这让我对这些物体产生了怀疑。我需要对`gcnew`对象调用 delete 吗？之类的东西`img_signin`呢？我开始看到很多 .NET 对象和函数导致我认为是内存泄漏，我不确定如何处理该区域。

# html - 左栏的问题

> ID：14302019
> 
> 赞同：0
> 
> 时间：2013-01-13T08:52:40.667
> 
> 标签：html, css, gradient

我正在为我的网站使用左栏。基本上左边栏由三个`div`元素组成`id="profile"`。我也将`child div`元素向左浮动。

我面临的问题：

我在mozilla firefox中分析了firebug的问题，每个的宽度都等于父元素但我不知道如何。

其次，元素的高度`child div`不等于父元素。我尝试将元素设置为`height`or ，但这并不能解决问题。`div``100%``34px`

第三，我添加了渐变作为左栏的背景，但背景显示为一些纯色。我在正常渐变背景之前添加了供应商前缀。但我真的不知道为什么会这样。

我[**为此**](http://jsbin.com/ivuqon/2/edit)示例添加了一个 jsbin 演示

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T09:36:36.580

Firefox 的 CSS 语法必须更改为：

```
-moz-linear-gradient(bottom, rgb(213,213,213) 0%, rgb(237,237,237), rgb(213,213,213) 100%); 
```

高度只是设置为图像容器，而不是左栏，将左栏设置为高度 34（和/或使用 line-height 将其垂直居中）：

```
.leftbar{
  widh:70%;
  color:#000;
  font-family:Calibri;
  font-size:12px;
  font-weight:700;
  text-decoration:none;
  text-align:center;
  height:34px;
  line-height:34px;
  float:left;
} 
```

# java - 选择特定组合框项时将空值插入数据库

> ID：14302021
> 
> 赞同：0
> 
> 时间：2013-01-13T08:52:56.540
> 
> 标签：java, sql, jdbc

当我选择一个特定的组合框项目时，我想在数据库中输入空值，以便我可以获得该列的行数，留下空行

```
String bnn = (txtboxno.getText().trim() == null || 
              txtboxno.getText().equals("")) ? "null" : txtboxno.getText();
Object nsn = (cbnotstat.getSelectedItem() == null || cbnotstat.getSelectedItem().equals("")) ? "0" : cbnotstat.getSelectedItem();

PreparedStatement stmt = con.prepareStatement("select COUNT(box_no)as total from soil_det WHERE rm_id = ?");
ResultSet rs;
String rm = tf_rm_id.getText();
stmt.setLong(1, Long.parseLong(rm));
rs = stmt.executeQuery();

while (rs.next()) {
    tf_boxno.setText(rs.getString("total"));
} 
```

我在上面尝试过，但它显示输入字符串“null”错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T09:06:03.963

同样，您需要检查 rm_id

```
String rm = tf_rm_id.getText();
rm = rm == null || rm.isEmpty() ? 0 : rm ; // consider 0 is valid here
long value ;
try {
  value = Long.parseLong(rm) ;
  stmt.setLong(1, value);
} catch(NumberFormatException  ee) {
  System.out.println("Praser exception, invalid input");
} 
```

# .htaccess - 尝试访问插件脚本时 wordpress 出现 404 错误

> ID：14302022
> 
> 赞同：0
> 
> 时间：2013-01-13T08:52:57.060
> 
> 标签：.htaccess, url, redirect

我有一个 wordpress 插件，我在其中使用 ajax 脚本来调用将文件保存到本地服务器的内部脚本。这在我工作的所有情况下都很好。但是现在在新服务器中，当我尝试通过 ajax 调用调用插件助手 url 时，会导致 404 错误 - 暗示 ajax 调用的目标插件脚本不可用 - url 在[**这里**](http://mydomain.com/wp-content/plugins/myplugin/add/upload.php)

我知道这是由于 .htaccess 文件中的一些 url 重定向过程，但我无法解决它。如果没有这个 ajax 调用工作，我就会遇到严重的问题。

以下是我的 htaccess 文件的内容，该文件位于 public_html 文件夹中

```
# BEGIN WordPress
<IfModule mod_rewrite.c>
RewriteEngine On
RewriteBase /
RewriteRule ^index\.php$ - [L]
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule . /index.php [L]
</IfModule>
# END WordPress 
```

如果您可以建议一种将我的脚本从 htaccess 重定向中排除的方法，以便 ajax 调用在我的插件脚本中工作，那将非常棒。

谢谢， 阿努贾

# sql - 字母数字初级

> ID：14302025
> 
> 赞同：1
> 
> 时间：2013-01-13T08:54:10.940
> 
> 标签：sql, sql-server

我打算用“LIBBOOKS-1214”作为主键，但我做不到。每当我输入另一个信息时，我都想要它，它将生成它作为我的主键。

这是我的代码：

```
CREATE TABLE tblBookInfo
(
AccessionNumber NVARCHAR(MAX)
DECLARE @RandomNumber NVARCHAR(10);
DECLARE @AccNo NVARCHAR(MAX)
DECLARE @Upper INT;
DECLARE @Lower INT

SET @Lower = 1
SET @Upper = 9999

Select @RandomNumber = Round (((@Upper - @Lower -1)* RAND() + @Lower), 0)

SET @AccNo = 'LIBBOOKS' + @RandomNumber
SELECT @AccNo

Set AccessionNumber = @AccNo
SELECT AccessionNumber
) 
```

谢谢您的帮助！非常感激。我仍然是 SQL-Server 的新手。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T10:03:33.433

在 SQL Server 中执行此操作的最简单方法是：

*   一个列 if 类型`INT IDENTITY`，它通过在将行插入表中时生成序列号来自动处理标识符的数字部分

    ```
    CREATE TABLE dbo.tblBookInfo
     ( ID INT IDENTITY(1,1) NOT NULL,
        .... other columns here.....
     ) 
    ```

*   一个**计算的、持久**的列，它结合了该字母数字前缀和标识列 - 类似于

    ```
    ALTER TABLE dbo.tblBookInfo
    ADD AlphaNumID AS 'LIBBOOKS-' + CAST(ID AS VARCHAR(5)) PERSISTED 
    ```

您是否将主键定义在`ID`列上（这将是我的偏好——实际上没有必要将该前缀包含在每个索引条目中并多次存储）或者您是否真的必须将它放在列上，这取决于您`AlphaNumID`柱子。为了加快搜索速度，您也可以随时在 上放置一个单独的非聚集索引`AlphaNumID`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-13T09:11:55.607

一种选择是使用由 2 列组成的连接主键，一个将保存 Alpha 字符串，另一个保存数字。然后，您的数字列可以使用 MarkD 建议的识别字段。

另一种选择是使用 varchar 字段并编写一个函数来确定字母数字字符串的数值。例如，你传入函数'LIBBOOKS'，它返回一个字符串'LIBBOOKS- 然后你插入它。您可以在每次插入时触发的触发器中执行此操作。

在您的伪代码中，您将创建表和函数的开头混合以创建一个字母数字字符串。如果你完成了这条路径，照常创建你的表，然后编写一段代码来创建主键。最后将它们组合在一起，例如创建一个触发器来调用代码以创建主键或在您的应用程序中执行此操作等，具体取决于您的设计。

如果您要使用随机值，请记住在尝试插入之前检查是否唯一性。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-13T09:04:13.093

如果你想建立一个生成它自己的表`PRIMARY KEYS`，你需要做这样的事情：

```
USE tempdb
GO

IF OBJECT_ID('tempdb.dbo.MyTable') IS NOT NULL DROP TABLE MyTable

CREATE TABLE MyTable
(
    BookID  INT IDENTITY(1,1) NOT NULL,
    Title   VARCHAR(50) NULL,
    CONSTRAINT PK_MyTable PRIMARY KEY CLUSTERED 
    (
        BookID ASC
    )
) ON [PRIMARY]

INSERT INTO MyTable (Title) VALUES
('SQL Syntax Explained'),
('Sensible Posting explained')

SELECT *
FROM MyTable 
```

应该注意的是，a`CLUSTERED INDEX`将建立在as 是通过 create table 工作时`PRIMARY KEY`的默认行为。这不是强制性的。`SQL Server``SSMS GUI`

真的很难猜出你想用你的代码实现什么。如果你能解释得更好一点，我们当然可以帮助你。

作为一个脚注`PRIMARY KEYS`，许多人认为使用整数类型数字 ( `TINYINT`, `SMALLINT`, `INT`, `BIGINT`) 作为您的`PK`. 当你这样做时，据说你正在创建一个**人工主键**。简而言之，它们是可管理的价值观，在平等方面`INDEX`表现良好且表现良好。`JOINS`

# android - 选择时如何调整图像大小以适合左半屏并在后半部分显示列表视图？

> ID：14302028
> 
> 赞同：1
> 
> 时间：2013-01-13T08:54:30.317
> 
> 标签：android, image, android-layout

在过去的 20 天里，我一直在努力实现这一目标，但我找不到任何解决方案。我必须显示将从 URL 获取的两列图像。选择任何图像时，所有图像都应调整大小并位于左半边。同时在右半部分，我必须在图像调整大小和下半部分细节到来时显示带有过渡效果的所选图像的细节。

下面是两个屏幕的屏幕截图。我能够创建第一个屏幕，但我不知道如何实现第二个屏幕。

![屏幕1](../Images/be3a722a4cb4e37a9982a05c51b1571d.png)

![屏幕 2](../Images/358791a662e95bbde465ff5cb6ea22ce.png)

# iphone - 两个日期之间缺少月份名称

> ID：14302038
> 
> 赞同：1
> 
> 时间：2013-01-13T08:56:00.237
> 
> 标签：iphone, ios, nsdate, nscalendar

我正在使用此代码

```
int unitFlags =  NSMonthCalendarUnit;   
NSDateComponents *comps = [gregorian components:unitFlags fromDate:startDate toDate:endDate options:0];    
int months = [comps month]; 
```

我实际上想要缺少任何想法的月份的名称？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-13T09:04:10.430

我已经通过两种方式解决了这个问题，我不知道哪个更好：（我期待人们对我的答案发表评论）

由于您想要开始日期和结束日期之间的所有月份名称，您可以执行以下操作：

**方法一：**

```
NSString *startString=@"23 Jun 2012";
NSString *endString=@"23 Dec 2013";

NSDateFormatter *dateFormatterDDMMMYYYY=[NSDateFormatter new];
[dateFormatterDDMMMYYYY setDateFormat:@"dd MMM yyyy"];

NSDate *startDate=[dateFormatterDDMMMYYYY dateFromString:startString];
NSDate *endDate=[dateFormatterDDMMMYYYY dateFromString:endString];

NSMutableArray *betweenMonths=[NSMutableArray new];
NSDate *tempDate=startDate;
while (tempDate<endDate) {
    NSDateFormatter *dateFormatterMMM=[NSDateFormatter new];
    [dateFormatterMMM setDateFormat:@"MMM"];
    NSString *monthName=[dateFormatterMMM stringFromDate:tempDate];
    [betweenMonths addObject:monthName];

    //tempDate is calculted after storing because you not need the last month.
    NSCalendar *calendar=[[NSCalendar alloc] initWithCalendarIdentifier:NSGregorianCalendar];
    NSDateComponents *components=[NSDateComponents new];
    components.month=1;
    tempDate=[calendar dateByAddingComponents:components toDate:tempDate options:0];
}
NSLog(@"Month Name : %@",betweenMonths); 
```

**方法二：**

```
NSString *startString=@"23 Jun 2012";
NSString *endString=@"23 Dec 2013";

NSDateFormatter *dateFormatterDDMMMYYYY=[NSDateFormatter new];
[dateFormatterDDMMMYYYY setDateFormat:@"dd MMM yyyy"];

NSDate *startDate=[dateFormatterDDMMMYYYY dateFromString:startString];
NSDate *endDate=[dateFormatterDDMMMYYYY dateFromString:endString];

NSInteger month = [[[NSCalendar currentCalendar] components: NSMonthCalendarUnit
                                                   fromDate: startDate
                                                     toDate: endDate
                                                    options: 0] month];

NSDateFormatter *dateFormatterMMM=[NSDateFormatter new];
[dateFormatterMMM setDateFormat:@"MMM"];
NSString *startMonth=[dateFormatterMMM stringFromDate:startDate];

NSArray *months=@[@"Jan",@"Feb",@"Mar",@"Apr",@"May",@"Jun",@"Jul",@"Aug",@"Sep",@"Oct",@"Nov",@"Dec"];

NSInteger startDateMonth=[months indexOfObject:startMonth];

for (NSInteger i=startDateMonth+1; i<startDateMonth+month; i++) {
    NSLog(@"Moths : %@",months[i%12]); //%12 for checking if i goes beyond 11, as endDate may be more then one year span long

} 
```

# email - Zend_Mail 在我的帐户中不起作用

> ID：14302043
> 
> 赞同：0
> 
> 时间：2013-01-13T08:56:37.027
> 
> 标签：email, zend-framework

我已经使用 zend 框架编写了 php 应用程序

我有应该发送一些电子邮件的操作，我已将以下代码放入操作中

```
$mail = new Zend_Mail();
$mail->setBodyText('This is an example message body');
$mail->setFrom('chris@example.com', 'Chris Hope');
$mail->addTo('john@example.com', 'John Smith');
$mail->setSubject('This is an example subject');
$mail->send(); 
```

此操作运行时未收到错误，但我从未收到电子邮件

但是当我注释掉上面的代码并使用 php mail() 时，它会发送电子邮件，我也收到了电子邮件。

请告诉我如何设置，我有hostgator帐户

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-13T11:01:39.327

这是我对 Google 帐户的标准设置，所以也许您需要为您的电子邮件提供商设置该配置。

```
$mail = new Zend_Mail();
$mail->setBodyHtml('.. body ...');
$mail->setFrom('from@email.com');
$mail->addTo('to@email.com');
$mail->setSubject('... subject ...');

// Config
$config = array(
    'auth'      => 'login',
    'username'  => 'username@gmail.com',
    'password'  => 'your-password',
    'port'      => '587',
    'ssl'       => 'tls'
);

$tr = new Zend_Mail_Transport_Smtp('smtp.gmail.com', $config);
Zend_Mail::setDefaultTransport($tr);

// Send email
$mail->send(); 
```

# android - 使用 Hashmap 使用数据库填充多列 listView

> ID：14302047
> 
> 赞同：0
> 
> 时间：2013-01-13T08:57:04.640
> 
> 标签：android, sqlite, listview, android-listview, hashmap

我想将我的表的所有列放在数据库中的列表视图中，我想使用 Hashmap 来制作列，但我不知道在哪里放置一个循环来制作地图的新对象并放入一个列表视图，当我运行我的应用程序时，只出现第一列，似乎还没有创建其他地图！你能帮我吗？提前致谢！

这是我的布局：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:orientation="vertical"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:background="#86868a"
    >
 <ListView 
    android:id="@android:id/list"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    style="@style/CodeFont"
     >
    </ListView>
 <RelativeLayout android:layout_width="wrap_content"
     android:layout_height="wrap_content"
     >  
 <Button 
     android:id="@+id/DeleteSelectedGoodsButton"
     android:layout_width="wrap_content"
     android:layout_height="wrap_content"
     android:text="@string/DeleteSelectedGoods"
     android:layout_alignParentTop="true"
     android:layout_alignParentLeft="true"/>
 <Button 
     android:id="@+id/ConfirmDelete"
     android:layout_width="wrap_content"
     android:layout_height="wrap_content"
     android:text="@string/ConfirmDeleteButton"
     android:layout_alignParentTop="true"
     android:layout_centerHorizontal="true"
     />
 <Button 
     android:id="@+id/CancelButton"
     android:layout_width="wrap_content"
     android:layout_height="wrap_content"
     android:text="@string/CancelButton"
     android:layout_alignParentTop="true"
     android:layout_alignParentRight="true"
     />
 </RelativeLayout>
</LinearLayout> 
```

网格.xml

```
<?xml version="1.0" encoding="utf-8" ?>
<LinearLayout
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_height="wrap_content"
    android:layout_width="fill_parent"
    android:paddingTop="4dip"
    android:paddingBottom="6dip"
    android:orientation="horizontal"
    >
    <TextView 
        android:id="@+id/GOOD_ID_CELL"
        android:layout_width="50dip"
        android:layout_height="wrap_content"
        android:layout_weight="1"

        />
    <TextView 
        android:id="@+id/CART_ID_CELL"
        android:layout_width="70dip"
        android:layout_height="wrap_content"
        android:layout_weight="1"
        />
    <TextView 
        android:id="@+id/GOOD_NAME_CELL"
        android:layout_width="60dip"
        android:layout_height="wrap_content"
        android:layout_weight="1"
        />
     <TextView 
        android:id="@+id/GOOD_UNITPRICE_CELL"
        android:layout_width="60dip"
        android:layout_height="wrap_content"
        android:layout_weight="1"
        />
      <TextView 
        android:id="@+id/QUANTITY_CELL"
        android:layout_width="60dip"
        android:layout_height="wrap_content"
        android:layout_weight="1"
        />

    </LinearLayout> 
```

SQL 助手：

```
package com.example.nfc;

import java.io.FileOutputStream;
import java.io.IOException;
import java.io.InputStream;
import java.io.OutputStream;

import android.content.ContentValues;
import android.content.Context;
import android.database.Cursor;
import android.database.SQLException;
import android.database.sqlite.SQLiteDatabase;
import android.database.sqlite.SQLiteOpenHelper;
import android.util.Log;

public class ExternalDbOpenHelper extends SQLiteOpenHelper {

    //-----------------------------------------------------
    public static String DB_PATH;
    //-----------------------------------------------------
    public static String DB_NAME;
    public SQLiteDatabase database;
    public final Context context;
    /////Adapted From spinner
     /** A constant, stores the the table name */

    private static final String TABLE_NAME = "Tbl_Goods";
    private static final String GOOD_ID = "Good_ID";
    private static final String CART_ID = "Cart_ID";
    private static final String GOOD_NAME = "Good_Name";
    private static final String GOOD_UNITPRICE = "Good_UnitPrice";
    private static final String QUANTITY = "Quantity";
    ////---------------------------

    public SQLiteDatabase getDb() {
        return database;

    }

    public ExternalDbOpenHelper(Context context, String databaseName) {
        super(context, databaseName, null, 1);
        this.context = context;
        //-------------------------------------------------
        String packageName = context.getPackageName();
        DB_PATH = String.format("//data//data//%s//databases//", packageName);
        DB_NAME = databaseName;
        openDataBase();
    }

    //--------------------------------------------------------------------------------
    public void createDataBase() {
        boolean dbExist = checkDataBase();
        if (!dbExist) {
            this.getReadableDatabase();
            try {
                copyDataBase();
            } catch (IOException e) {
                Log.e(this.getClass().toString(), "Copying error");
                throw new Error("Error copying database!");
            }
        } else {
            Log.i(this.getClass().toString(), "Database already exists");
        }
    }
    //--------------------------------------------------------------
    private boolean checkDataBase() {
        SQLiteDatabase checkDb = null;
        try {
            String path = DB_PATH + DB_NAME;
            checkDb = SQLiteDatabase.openDatabase(path, null,
                    SQLiteDatabase.OPEN_READONLY);
        } catch (SQLException e) {
            Log.e(this.getClass().toString(), "Error while checking db");
        }
        //---------------------------------------------------
        if (checkDb != null) {
            checkDb.close();
        }
        return checkDb != null;
    }
    //-----------------------------------------------------
    private void copyDataBase() throws IOException {
        // ----------------------------------------------
        //------------------- assets----------------------
        InputStream externalDbStream = context.getAssets().open(DB_NAME);

        // ----------------------------------------------------------
        String outFileName = DB_PATH + DB_NAME;

        // -------------------------------------------------
        OutputStream localDbStream = new FileOutputStream(outFileName);

        //------------------------------------
        byte[] buffer = new byte[1024];
        int bytesRead;
        while ((bytesRead = externalDbStream.read(buffer)) > 0) {
            localDbStream.write(buffer, 0, bytesRead);
        }
        // -----------------------------
        localDbStream.close();
        externalDbStream.close();

    }

    public SQLiteDatabase openDataBase() throws SQLException {
        String path = DB_PATH + DB_NAME;
        if (database == null) {
            createDataBase();
            database = SQLiteDatabase.openDatabase(path, null,
                SQLiteDatabase.OPEN_READWRITE);
        }
        return database;
    }
    @Override
    public synchronized void close() {
        if (database != null) {
            database.close();
        }
        super.close();
    }

    ////-----------------------Adapted From SQLSpinner
    /** Inserts a new contact to the table contacts */
    public long insert(ContentValues contentValues){
        long rowID = database.insert(TABLE_NAME, null, contentValues);
        return rowID;

    }

    /** Updates a contact */
    public int update(ContentValues contentValues,String contactID){
        int cnt = database.update(TABLE_NAME, contentValues, "_id=" + contactID, null);
        return cnt;
    }

    /** Deletes a contact from the table */
    public int del(String contactID){
        int cnt = database.delete(TABLE_NAME, "_id="+contactID, null);      
        return cnt;
    }

    /** Returns all the contacts in the table */
    public Cursor getAllContacts(){
        return database.query(TABLE_NAME, new String[] { GOOD_ID,  CART_ID , GOOD_NAME,GOOD_UNITPRICE,QUANTITY } , null, null, null, null, GOOD_NAME + " asc ");
    }

    /** Returns a contact by passing its id */
    public Cursor getContactByID(String contactID){
        return database.query(TABLE_NAME, new String[] {  GOOD_ID,  CART_ID , GOOD_NAME,GOOD_UNITPRICE,QUANTITY} , "_ID="+contactID, null, null, null, GOOD_NAME + " asc ");
    }

    ////-----------------------------------
    @Override
    public void onCreate(SQLiteDatabase db) {}
    @Override
    public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {}
} 
```

主.java：

```
package com.example.nfc;

import java.util.ArrayList;
import java.util.HashMap;
import java.util.Map;
import android.app.ListActivity;
import android.content.Intent;
import android.database.Cursor;
import android.database.sqlite.SQLiteDatabase;
import android.os.Bundle;
import android.support.v4.widget.SimpleCursorAdapter;
import android.view.KeyEvent;
import android.view.View;
import android.view.WindowManager;
import android.view.View.OnClickListener;
import android.widget.AdapterView;
import android.widget.AdapterView.OnItemClickListener;
import android.widget.ArrayAdapter;
import android.widget.Button;
import android.widget.ListView;
import android.widget.SimpleAdapter;
import android.widget.TextView;
import android.widget.Toast;

public class PrepopSqliteDbActivity extends ListActivity {
    private static final String DB_NAME = "NFC.sqlite";
    //------------------------------------------------------------
    private static final String TABLE_NAME = "Tbl_Goods";
    private static final String GOOD_ID = "Good_ID";
    private static final String CART_ID = "Cart_ID";
    private static final String GOOD_NAME = "Good_Name";
    private static final String GOOD_UNITPRICE = "Good_UnitPrice";
    private static final String QUANTITY = "Quantity";

    private SQLiteDatabase database;
    private ListView listView;
    //private ArrayList<String> goods;

    ///Adapted from MultiLevel

    ArrayList<HashMap<String, String>> goods=new ArrayList<HashMap<String,String>>();
    HashMap<String, String> map;

    //////-----------------Adapted From SQLSpinner
    ArrayAdapter mAdapter;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.table_row);

        //-------------------------------------------------------
        ExternalDbOpenHelper dbOpenHelper = new ExternalDbOpenHelper(this, DB_NAME);
        database = dbOpenHelper.openDataBase();
        //--------------------------------------

        fillgoods();

        setUpList();  
  //////Cancel Button

        Button btnCancel=(Button)findViewById(R.id.CancelButton);
        btnCancel.setOnClickListener(new OnClickListener() {

            public void onClick(View arg0) {

                finish();
            }
        });

    }

    private void setUpList() {
        ///////////////////////////////////Multi
        //SimpleAdapter mSchedule=new SimpleAdapter(this, goods, R.layout.grids,
                //new String[]{"train","from","to"},
                //new int[]{R.id.TRAIN_CELL,R.id.FROM_CELL,R.id.TO_CELL});

        setListAdapter(new SimpleAdapter(this, goods, R.layout.grids,
                new String[]{GOOD_ID,CART_ID,GOOD_NAME,GOOD_UNITPRICE,QUANTITY},
                new int[]{R.id.GOOD_ID_CELL,R.id.CART_ID_CELL,R.id.GOOD_NAME_CELL,R.id.GOOD_UNITPRICE_CELL,
                R.id.QUANTITY_CELL}));

        //---------------------------------layout------------------------------------

        //setListAdapter(new ArrayAdapter<HashMap<String, String>>(this,
                    //  android.R.layout.simple_list_item_single_choice, goods));

        listView = getListView();
        listView.setChoiceMode(ListView.CHOICE_MODE_SINGLE);

        //---------------------------------------------------------------------------
        listView.setOnItemClickListener(new OnItemClickListener() {
            public void onItemClick(AdapterView<?> parent, View view,
                                int position,long id) {
                Toast.makeText(getApplicationContext(),
                            ((TextView) view).getText().toString(),
                             Toast.LENGTH_SHORT).show();                
            }

        });

    }

    //--------------------------------------------------------------------
    private void fillgoods() {
        goods = new ArrayList<HashMap<String, String>>();
        Cursor goodCursor = database.query(TABLE_NAME,
                                             new String[] 
                                             {GOOD_ID,CART_ID,GOOD_NAME,GOOD_UNITPRICE,QUANTITY},
                                             null, null, null, null
                                             , GOOD_NAME);

        String[] g=new String[] 
                 {GOOD_ID,CART_ID,GOOD_NAME,GOOD_UNITPRICE,QUANTITY};
        goodCursor.moveToFirst();
        if(!goodCursor.isAfterLast()) {
            do {
                int i=0;
                String name1 = goodCursor.getString(i+1);
                 map=new HashMap<String, String>();
                 map.put(g[i],name1);
                 goods.add(map);
                i=i+1;
            } while (goodCursor.moveToNext());
        }
        //goods.add(map);
        goodCursor.close();
    }

    //////////////Home And Back Button
    @Override
    public void onAttachedToWindow() {
       this.getWindow().setType(WindowManager.LayoutParams.TYPE_KEYGUARD);
      super.onAttachedToWindow();

    }

    @Override
    public boolean onKeyDown(int keyCode, KeyEvent event) {
       if(keyCode == KeyEvent.KEYCODE_HOME)

           BackToMainIntent();

     else if(keyCode==KeyEvent.KEYCODE_BACK)
       {
         BackToMainIntent();
      }
       return false;
    }

    public void BackToMainIntent()
    {
        Intent intent = new Intent(this, Main.class);
           intent.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
           startActivity(intent);
      }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T10:54:38.307

如果您只是在循环中遇到问题，那么将您的旧代码更改为这个。

**在 do-while 循环之前声明“i”以获取所有行。**您已经在 do-while 循环中声明了它，这就是它只返回第一行的原因。

```
 if(!goodCursor.isAfterLast()) {
       int i=0; //declare "i" here.
                do {
                    //int i=0;
                    String name1 = goodCursor.getString(i+1);
                     map=new HashMap<String, String>();
                     map.put(g[i],name1);
                     goods.add(map);
                    i=i+1;
                } while (goodCursor.moveToNext());
            } 
```

希望这会给你一些关于如何循环记录的提示。

# data-binding - 另一个foreach循环淘汰赛中的数据绑定文本

> ID：14302048
> 
> 赞同：0
> 
> 时间：2013-01-13T08:57:11.733
> 
> 标签：data-binding, foreach, knockout.js

在 foreach 循环内绑定相同模型的文本，但该文本不是该数组的一部分。

```
function SmsViewModel(data,id) {
    var self = this;

    // Editable data
    self.Sms = ko.observableArray(JSON.parse(data));
    self.Num = ko.observable('Send SMS');
    self.removeNumber = function(item){
    }
    self.myPostProcessingLogic = function(elements) {
 if ($(id).children().length === ko.toJS(self.Sms).length) {
        // Only now execute handler
    jq();
    }
}   

} 
```

当我显示短信数据时，它工作正常，但我无法在同一个 foreach 中显示 sel.Num

```
<div class="modalbox_content" data-bind="foreach: {data: Sms,afterRender: myPostProcessingLogic}" id="KnockOutSmsData">

              <!-- ko if: FromAddress === '+18038004697' && TypeOfMassage === 'I' -->
                <div class="message_container" >

                  <div class="message_user_photo"><img src="images/user_pic.png" width="40" height="40"/></div>
                  <div class="message_cell_number"><span data-bind="text: FromAddress"></span></div>
                  <div class="recieved_message_container">
                    <div class="recieved_message_arrow"></div>
                    <div class="recieved_message_box">
                      <p><span data-bind="text: Body"></span></p>
                      <div class="forwd_message"><a href="#"><img src="images/frwd_msg.png"/></a></div>
                      <span data-bind="text: MsgDateTime"></span></div>

                  </div>

                </div>
                <!-- /ko -->
                <!-- close message container -->
                <!-- ko if: ToAddress === '+18038004697' && TypeOfMassage === 'S' -->
                <div class="message_container" >

                  <div class="sent_message_user_photo"><img src="images/user_pic.png" width="40" height="40"/></div>
                  <div class="sent_message_cell_number"><span data-bind="text: ToAddress"></div>
                  <div class="sent_message_container">
                    <div class="sent_message_arrow"></div>
                    <div class="sent_message_box">
                      <p><span data-bind="text: Body"></span></p>
                      <span data-bind="text: MsgDateTime"></span></div>
                  </div>

                </div>
                <!-- /ko -->
                <!-- close message container --> 

              </div> 
```

我只想比较

```
<!-- ko if: FromAddress === self.Num && TypeOfMassage === 'I' --> 
```

这个 self.Num 是

```
self.Num = ko.observable('Send SMS'); 
```

和 FromAddress 是

```
 self.Sms = ko.observableArray(JSON.parse(data)); 
```

提前谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T09:02:17.403

我认为您正在寻找`$parent` [绑定上下文](http://knockoutjs.com/documentation/binding-context.html)变量，您可以使用它访问 a 中的“父”对象`foreach`：

```
<!-- ko if: FromAddress === $parent.Num() && TypeOfMassage === 'I' --> 
```

请注意，您需要 write `$parent.Num()`（例如 with `()`）因为`Num`是`ko.observable`

这是一个 大致基于您的代码的[演示小提琴。](http://jsfiddle.net/nemesv/4mn6G/2/)

# jquery - 根据屏幕分辨率改变宽度，与dailymotion视频相同

> ID：14302053
> 
> 赞同：0
> 
> 时间：2013-01-13T08:58:05.157
> 
> 标签：jquery, css, browser, screen

我在日常动态视频中看到一个很酷的在 URL 下方打开的视频，在视频顶部有一个*“关灯”*选项，除了视频之外，所有内容都将是黑色的。

很酷的事情是调整窗口分辨率，即使黑色调光器动态变化，任何人都知道他们是如何做到这一点的。

我想根据 jquery 或 javascript 中的窗口调整大小来实现类似[**的东西。**](http://www.dailymotion.com/video/xwpyhs_twinkle-twinkle-little-star_music?search_algo=2#.UPJ15eimDWY)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T09:21:19.493

将此样式应用于视频 -

```
#video{
z-index:3;
} 
```

并制作一个黑色层 -

```
<div id="bl">
</div> 
```

黑层的风格——

```
#bl{
background-color:black;
opacity:0.9;
z-index:2;
visibility:hidden;
width:100%;height:100%;
} 
```

和 JS -

```
$('#btn').click(function(){ 
  $('#bl').css('visibility','visible'); 
}); 
```

其中#btn 是关灯按钮的ID。

请在每个问题中选择正确答案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-13T09:02:00.667

有一个事件。

```
$(window).resize(function(evt) { 
   // your handling code here 
}); 
```

# android - FragmentActivity中没有图库的Android Image Slider

> ID：14302056
> 
> 赞同：2
> 
> 时间：2013-01-13T08:58:54.127
> 
> 标签：android, android-layout

我正在尝试创建一个 Tabed 应用程序，其中一个选项卡最多可容纳 25-30 张图像。我希望图像能够滑动到下一个/上一个并且没有画廊。

我一直在四处寻找，试图找到某种滑块示例，但只找到了很多使用 Gallery 的滑块，女巫似乎在 ICS 及更高版本中也被弃用了。

![首选外观](../Images/78bfd837f818890b40a8bec8f45874f2.png)

到目前为止，我得到的是实际的片段：

```
public class ImageTab extends Fragment {

  @Override
  public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {
    return inflater.inflate(R.layout.image_layout, container, false);
  }

  @Override
  public void onViewCreated(View view, Bundle savedInstanceState) {
    super.onViewCreated(view, savedInstanceState);
  }

} 
```

如果有人能指出我正确的方向，那将不胜感激。

最好的，亨里克

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T20:37:31.697

> @Hiny：我正在尝试创建一个 Tabed 应用程序，其中一个选项卡最多可容纳 25-30 张图像。

将 FragmentActivity 与 tabhost 或 actionbar 选项卡导航一起使用，其中一个选项卡包含一个带有[ViewPager](http://developer.android.com/reference/android/support/v4/view/ViewPager.html)的 Fragment 。

```
mViewPager.setAdapter(new MyImagesPagerAdapter(getChildFragmentManager())); 
```

> @Hiny：我希望图像能够滑动到下一个/上一个并且没有画廊。

ViewPager 将为您提供此功能，并且很容易添加页面指示器。

> 来自 Android 开发者网站的引用：[嵌套片段](http://developer.android.com/about/versions/android-4.2.html#NestedFragments)
> 
> “例如，如果您使用 ViewPager 创建左右滑动并占用大部分屏幕空间的片段，您现在可以将片段插入每个片段页面。”

从 Android 1.6 开始，它通过 Android 支持库得到了支持。

> @Hiny：如果有人能指出我正确的方向，那将不胜感激。

有关代码示例，请查看[https://github.com/marsucsb/nested-fragments](https://github.com/marsucsb/nested-fragments)

# django - 我应该如何在 dotcloud 中使用 postgre 处理 wsgi 杀死线程？

> ID：14302058
> 
> 赞同：0
> 
> 时间：2013-01-13T08:59:22.060
> 
> 标签：django, multithreading, postgresql, python-multithreading, dotcloud

我已经将带有多线程模块的 django 应用程序部署到 dotcloud。该线程将一些缓慢的东西放入数据库（通常需要大约 3-5 秒）。

当我在我的虚拟环境中测试它时 - 一切正常。

这是我的 dotcloud.yml：

```
www:
  type: python
  config:
    python_version: v2.7
    uwsgi_enable_threads: true
db:
  type: postgresql
data:
  type: mongodb 
```

这是我的点云日志：

```
[www.0] Process Process-1:
[www.0] Traceback (most recent call last):
[www.0]   File "/usr/lib/python2.7/multiprocessing/process.py", line 258, in _bootstrap
[www.0]     self.run()
[www.0]   File "/usr/lib/python2.7/multiprocessing/process.py", line 114, in run
[www.0]     self._target(*self._args, **self._kwargs)
[www.0]   File "/home/dotcloud/current/usn/views.py", line 416, in sync_countdown
[www.0]     put_current_data_to_db(user_name)
[www.0]   File "/home/dotcloud/current/usn/views.py", line 429, in put_current_data_to_db
[www.0]     current_client = Client.objects.get(user_name=user_name)
[www.0]   File "/home/dotcloud/env/local/lib/python2.7/site-packages/django/db/models/manager.py", line 131, in get
[www.0]     return self.get_query_set().get(*args, **kwargs)
[www.0]   File "/home/dotcloud/env/local/lib/python2.7/site-packages/django/db/models/query.py", line 361, in get
[www.0]     num = len(clone)
[www.0]   File "/home/dotcloud/env/local/lib/python2.7/site-packages/django/db/models/query.py", line 85, in __len__
[www.0]     self._result_cache = list(self.iterator())
[www.0]   File "/home/dotcloud/env/local/lib/python2.7/site-packages/django/db/models/query.py", line 291, in iterator
[www.0]     for row in compiler.results_iter():
[www.0]   File "/home/dotcloud/env/local/lib/python2.7/site-packages/django/db/models/sql/compiler.py", line 763, in results_iter
[www.0]     for rows in self.execute_sql(MULTI):
[www.0]   File "/home/dotcloud/env/local/lib/python2.7/site-packages/django/db/models/sql/compiler.py", line 818, in execute_sql
[www.0]     cursor.execute(sql, params)
[www.0]   File "/home/dotcloud/env/local/lib/python2.7/site-packages/django/db/backends/util.py", line 40, in execute
[www.0]     return self.cursor.execute(sql, params)
[www.0]   File "/home/dotcloud/env/local/lib/python2.7/site-packages/django/db/backends/postgresql_psycopg2/base.py", line 52, in execute
[www.0]     return self.cursor.execute(query, args)
[www.0] DatabaseError: server closed the connection unexpectedly
[www.0]     This probably means the server terminated abnormally
[www.0]     before or while processing the request. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T01:02:22.740

解决 django 线程中数据库问题的常用方法对我有用 - 我刚刚添加了：

```
django.db.connection.close() 
```

在开始我的话题之前

*简短说明：*

然后 django 分叉新线程，子进程使用与 DB**相同的**连接，作为父进程。

如果我们关闭连接，孩子将创建一个新的。

# html - html5 创建事件处理程序 onclick 事件

> ID：14302059
> 
> 赞同：1
> 
> 时间：2013-01-13T08:59:54.530
> 
> 标签：html, css, event-listener

我正在解决 Microsoft 的试卷：使用 JavaScript 和 CSS3 在 HTML5 中编程。我没有找到这个问题的答案

**问题**

您正在创建一个显示 Web 应用程序名称的 JavaScript 函数。您声明以下按钮元素。当用户单击按钮时，必须调用名为 About 的 JavaScript 函数。您需要创建一个在单击按钮时调用 About 函数的事件处理程序。您可以使用哪两个代码段？（每个正确答案都代表一个完整的解决方案。选择两个。）

**选项**

```
 A. var button=document.getElementById("About");
    ScriptEngine.call(button,About());

 B. var button=document.getElementById("About");
    ScriptEngine.bind(button,About());

 C. var button=document.getElementById("About");
    button.addEventListener("click",About);

 D. var button=document.getElementById("About");
    button.attachEvent("onclick",About); 
```

哪些是正确的选项？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-13T09:05:27.793

选项 C 和 D 是正确答案。

请参阅：[addEventListener 和 attachEvent](http://www.javascripter.net/faq/addeventlistenerattachevent.htm) 以及 [更多这里](https://developer.mozilla.org/en/docs/DOM/element.addEventListener)

# c# - 优化文本转换为整数列表

> ID：14302061
> 
> 赞同：0
> 
> 时间：2013-01-13T09:00:20.153
> 
> 标签：c#, string, .net-4.0

我正在编写一个接受用户输入的 UI 应用程序 -

最多 50,000 个条目，他粘贴到 a`Textbox`中，我需要将其转换为`List<Uint32>`（不同）

在此过程中，我在“文本框”中显示 Disistict 列表（输出）。

我正在拆分文本并将其转换为 Uint32 的不同列表然后我将列表转换为数组。

```
private List<UInt32> ConvertTextToList(string TextBoxText)
{
string[] TextBoxSplitted = TextBoxText.Split(new string[] { Environment.NewLine},StringSplitOptions.RemoveEmptyEntries); //Fast
            var TextBoxSplittedAsList = TextBoxSplitted.ToList<string>(); //Fast
            List<UInt32> lp = TextBoxSplittedAsList.ConvertAll(new Converter<string, UInt32>(element => Convert.ToUInt32(element))); //Fast
            List<UInt32> uintList = lp.Distinct<UInt32>().ToList<UInt32>(); //Fast
            UInt32[] uintListArray = uintList.ToArray(); //Fast

            //Slow part (measured 15 sec on core2duo 2.53GHz)
            StringBuilder builder = new StringBuilder();
            Array.ForEach(uintListArray, x => builder.Append(x));                
            //Done slow part

            SomeTextBox.text = builder.ToString();

            return uintList;
} 
```

首先我尝试了 -`ListOfHeliostatsText.Text = string.Join(",", uintListArray);`

哪个更慢（比 using 慢约 25% `StringBuilder`）

我感觉我的函数设计错了，两次多次转换。

有没有办法提高这个功能的性能？

**编辑：** 我的错，慢的部分是 ListOfHeliostatsText.Text = builder.ToString();

我将继续阅读答案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T09:58:14.380

你测量不正确。缓慢的部分**不是**：

```
StringBuilder builder = new StringBuilder();
Array.ForEach(uintListArray, x => builder.Append(x)); 
```

缓慢的部分是：

```
SomeTextBox.Text = builder.ToString(); 
```

问题是您正在向文本框输入一大行。如果您将每个字符串放在自己的行中......

```
Array.ForEach(uintListArray, x => builder.AppendLine(x.ToString())); 
```

...您将观察到大约 50 倍的加速。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-13T09:05:57.910

你能试试这个吗：

```
private List<UInt32> ConvertTextToList(string TextBoxText)
{
   ....
    var TextBoxSplittedAsList = TextBoxSplitted.ToList<string>(); //Fast

    TextBoxSplittedAsList.Select(int.Parse).ToList();
    TextBoxSplittedAsList.Distinct().ToList(); // to get the distinct values 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-13T09:28:14.990

由于可能有这么多条目，我认为使用字符串拆分操作将中间值放入中间数组不会有帮助。这是很多开销。如果速度和效率是您的目标，您应该通过在读取项目时有效地阅读生成项目的字符串来对其进行标记。这样，您将不需要也不需要保存所有这些值的中间数组。

如果要获取所有不同的值，可以将所有内容放入`HashSet<T>`. 但是，我将在这里展示的示例将使用一些 LINQ 和`Distinct()`方法（它有自己的开销）。

```
// a naive tokenizing iterator
IEnumerable<string> Tokenize(string str, string separator)
{
    var current = 0;
    while (current < str.Length)
    {
        // we're effectively scanning through the string
        var next = str.IndexOf(separator, current);
        if (next == -1)
        {
            next = str.Length;
        }
        var token = str.Substring(current, next - current);
        yield return token;
        current = next + 1;
    }
}

List<uint> ConvertTextToList(string text)
{
    return Tokenize(text, ",")
        .Select(token => Convert.ToUInt32(token))
        .Distinct()
        .ToList();
} 
```

并接受我的建议，不要让该方法做任何事情，而不仅仅是生成该列表。您可以在该函数之外填充该文本框，它不属于那里。

# android - 如何在启用时更新小部件布局？

> ID：14302064
> 
> 赞同：4
> 
> 时间：2013-01-13T09:00:57.237
> 
> 标签：android

我正在为我的应用程序创建三个小部件，当我将三个小部件拖动到主屏幕时，我得到相同的小部件布局，但更新时小部件布局会改变，

*拖动到主屏幕后，如何立即更新三个小部件布局？*

这是我的代码：

```
public class FullWidgetProvider extends AppWidgetProvider {

    private int widgetID;
    private static SimpleDateFormat formatter = new SimpleDateFormat("dd MMM yyyy  hh:mm:ss a");
    static String strWidgetText = "";

    @Override
    public void onDeleted(Context context, int[] appWidgetIds) {
        // TODO Auto-generated method stub
        //super.onDeleted(context, appWidgetIds);
    //  Toast.makeText(context, "onDeleted()", Toast.LENGTH_LONG).show();
    }

    @Override
    public void onDisabled(Context context) {
        // TODO Auto-generated method stub
        //super.onDisabled(context);
        //Toast.makeText(context, "onDisabled()", Toast.LENGTH_LONG).show();
    }

    @Override
    public void onEnabled(Context context) {
        // TODO Auto-generated method stub
        super.onEnabled(context);

    }

    @Override
    public void onUpdate(Context context, AppWidgetManager appWidgetManager,
            int[] appWidgetIds) {
        // TODO Auto-generated method stub
        super.onUpdate(context, appWidgetManager, appWidgetIds);

        final int N = appWidgetIds.length;
        for (int i=0; i<N; i++) {
            int appWidgetId = appWidgetIds[i];
            updateAppWidget(context, appWidgetManager, appWidgetId);

        }

    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-10-17T05:20:07.750

这是我的代码的一部分，但你可以得到一个想法

```
@Override 
public void onEnabled(Context context) {
    super.onEnabled(context);

    AppWidgetManager appManager = AppWidgetManager.getInstance(context); 
    ComponentName thisWidget = new ComponentName(context, ExampleAppWidgetProvider.class);
    RemoteViews updateViews = new RemoteViews(context.getPackageName(), R.layout.widget1);
    updateViews.setTextColor(R.id.widget1label, Color.YELLOW);
    appManager.updateAppWidget(thisWidget, updateViews); } 
```

# java - 如何解码使用 jid3lib-0.5.4 获取的 ID3V2 标签

> ID：14302067
> 
> 赞同：2
> 
> 时间：2013-01-13T09:01:29.663
> 
> 标签：java, character-encoding, id3v2

我正在尝试使用 Java 中的 jid3lib 从 MP3 文件中查找 ID3V2 标签。但我得到了凌乱的字符串。这是我的代码：

```
import org.farng.mp3.MP3File;
import org.farng.mp3.id3.AbstractID3v2;

public class NewClass {
    public static void main(String [] args){
        try{
            MP3File file = new MP3File("c:\\2.mp3");
            AbstractID3v2 tag = file.getID3v2Tag();
            String str = tag.getAuthorComposer();
            System.out.println("Lenght: "+str.length());
            for(int i = 0; i < str.length(); i++){
                char ch = str.charAt(i);
                System.out.println(i+": "+"'"+(ch)+"' : "+((int)ch));
            }
            System.out.println(str);

        }catch(Exception e){
            e.printStackTrace();
        }
    }
} 
```

我得到以下输出：

```
Lenght: 35
0: '�' : 65533
1: '�' : 65533
2: 'H' : 72
3: ' ' : 0
4: 'i' : 105
5: ' ' : 0
6: 'm' : 109
7: ' ' : 0
8: 'e' : 101
9: ' ' : 0
10: 's' : 115
11: ' ' : 0
12: 'h' : 104
13: ' ' : 0
14: ' ' : 32
15: ' ' : 0
16: 'R' : 82
17: ' ' : 0
18: 'e' : 101
19: ' ' : 0
20: 's' : 115
21: ' ' : 0
22: 'h' : 104
23: ' ' : 0
24: 'a' : 97
25: ' ' : 0
26: 'm' : 109
27: ' ' : 0
28: 'm' : 109
29: ' ' : 0
30: 'i' : 105
31: ' ' : 0
32: 'y' : 121
33: ' ' : 0
34: 'a' : 97
��H i m e s h   R e s h a m m i y a 
```

但在 Windows 资源管理器中，它显示正确的“Himesh Reshammiya”。

我怎样才能在java中得到这个正确的字符串，或者任何解码这个字符串的解决方案？

我认为这可能是一些字符编码。提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T09:23:52.313

我会冒险猜测该库不支持 UTF-16 编码文本，这似乎是（输出中列出的前两个字符是 BOM）。

您可能应该使用此处列出的库之一：http: [//id3.org/Implementations](http://id3.org/Implementations)

浏览 Java 的，这可能是一个不错的选择： [https ://github.com/mpatric/mp3agic](https://github.com/mpatric/mp3agic)

它说它在页面上支持 Unicode。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-13T09:23:26.530

可能的解决方法：

```
replaceAll("\\s","") 
```

这将删除所有空格和不可见字符。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-09T13:13:30.003

3: ' ' : 0 你的问题是我看到的吗？

只需将这个 ' ' 字符（没有空格）放在一个新的 Integer() 中，它必须等于 0。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-10-19T12:31:02.100

使用 mp3agic .. 它真棒..... [http://mpatric.github.io/mp3agic/](http://mpatric.github.io/mp3agic/)

# msbuild - 在构建期间限制 NuGet 存储库

> ID：14302068
> 
> 赞同：0
> 
> 时间：2013-01-13T09:01:44.237
> 
> 标签：msbuild, nuget

我们在这样一个环境中工作，开发人员在测试和评估各种 alpha 包时在他们的工作空间中设置本地存储库并不少见。通常会检查他们的 nuget.configs 以及他们的代码更改，这会破坏我们的 CI 构建。更糟糕的是，当此类构建提交到黄金构建服务器时，它会产生更多问题，因为构建会在那里中断，或者如果开发人员使用黄金构建服务器可见的存储库，则 alpha 包将包含在黄金构建中。

有没有一种方法可以强制 NuGet 忽略除 %appdata% 中的配置文件之外的任何配置文件？或者，是否有一种方法可以自定义 NuGET 电动工具包中的 msbuild 目标来实现这一目标？

我们在 TFS 2010 和 VS 2010/2012 环境中工作，并且可以修改默认的构建工作流程，以放入构建过程中可能需要的任何自定义。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-06-24T07:59:37.273

根据[文档](http://docs.nuget.org/docs/reference/nuget-config-settings)，您应该能够通过明确指定存储库来限制它们。以下仅应使官方包源处于活动状态。

```
<packageSources>
    <add key="NuGet official package source" value="https://nuget.org/api/v2/" />
    <add key="TestSource" value="C:\Temp" />
</packageSources>
<disabledPackageSources />
<activePackageSource>
    <add key="NuGet official package source" value="https://nuget.org/api/v2/" />
</activePackageSource> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-05T22:57:45.877

你可以：

1.  通过启用 NuGet 还原，在您的解决方案中禁用 NuGet 源代码控制集成。

2.  为您的构建使用 MsBuild proj 文件并添加一个预构建阶段，该阶段从给定的源列表恢复解决方案中的包，例如 nuget.org + 内部稳定 NuGet 包源（[命令行参考](http://docs.nuget.org/docs/reference/command-line-reference#Restore_command)）。如果总是有一个版本至少比 packages.config 文件中列出的预发布版本高，这应该可以工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-28T13:02:39.933

在这里聚会有点晚了，但希望它对某人有用......

我曾在类似的环境中工作过，为了解决这个问题，我们在 nuget.config 中添加了一个本地存储库（*例如 c:\localpackages*），以及由所有人共享的远程存储库（包括构建服务器）。然后，任何开发人员都可以使用这个本地存储库来添加他们正在处理（或想要测试）的包。

这意味着永远不需要更改 nuget.config 文件。但这并没有完全解决问题，因为开发人员可以提交一个引用从本地存储库安装的包的项目文件（这通常会破坏构建）。为了解决这个问题，我们不得不改变我们的代码审查流程来检查这种情况。

# r - r igraph：从两组向量中删除边

> ID：14302075
> 
> 赞同：0
> 
> 时间：2013-01-13T09:03:25.983
> 
> 标签：r, igraph

我正在尝试通过我的出版网络建立我的合作网络。我使用了非常适合它的 igraph。然而，由于我的顶点（在网络中代表我的那个）到所有共同作者都有边，我最终得到了一个非常紧凑的图。我想从我的顶点删除一些仅与另一位作者相关的作者的边。基本上是我只是合着的作者。无论如何，我已经确定了这些顶点并且我知道我的顶点。现在我找不到一种方法来删除仅将这组边缘链接到我的边缘。

更一般地，您如何从两组向量中删除边缘，例如 V(g)[a] 和 V(g)[b]？

谢谢，

这是一个例子：

```
au1 <- c('deb', 'art', 'deb', 'seb', 'deb', 'deb', 'mar', 'mar', 'joy', 'deb')
au2 <- c('art', 'deb', 'soy', 'deb', 'joy', 'ani', 'deb', 'deb', 'nem', 'mar')
au3 <- c('mar', 'lio', 'mil', 'mar', 'ani', 'lul', 'nem', 'art', 'deb', 'tat')

tata <- data.frame(au1, au2, au3)
xaulist2 <- levels(factor(unlist(tata[,])))
xaulist <- levels(as.factor(xaulist2))
xaulist_att <- c(rep('prime', 2), 'main', 'second', 'second', rep('prime', 3), 'second', rep('prime', 3))
au_att <- data.frame(au_name=xaulist, level=xaulist_att)

# matrix list preparation
tutu <- matrix(NA, nrow=length(xaulist), ncol=dim(tata)[1]) # row are authors and col are papers
for (i in 1:length(xaulist))
{
  for (j in 1:dim(tata)[1])
  {
  ifelse('TRUE' %in% as.character(tata[j,]==xaulist[i]), tutu[i,j] <- 1,  tutu[i,j] <- 0)
  }
}
tutu[is.na(tutu)] <- 0

tutu[tutu>=1] <- 1 # change it to a Boolean matrix
termMatrix <- tutu %*% t(tutu)

# build a graph from the above matrix
g <- graph.adjacency(termMatrix, weighted=T, mode = 'undirected')
g <- simplify(g) # remove loops
V(g)$label <- xaulist # set labels of vertices
V(g)$degree <- degree(g) # set degrees of vertices
V(g)[xaulist_att=='second']$color <- 'red'
V(g)[xaulist_att=='main']$color <- 'blue'
set.seed(112) # set seed to make the layout reproducible
plot(g) 
```

所以问题是如何从具有“第二”属性的作者到具有“主要”属性的作者中删除边缘，即从红色到蓝色？

再次感谢，

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-13T15:37:24.300

这是一种方法，它认为它非常可读：

```
g2 <- delete.edges(g, E(g)[ V(g)[xaulist_att == 'second'] %--% 
                            V(g)[xaulist_att == 'main'  ] ])

## plot the results
coords <- layout.auto(g)
layout(rbind(1:2))
plot(g, layout=coords, main="g")
plot(g2, layout=coords, main="g2") 
```

详情请参阅`?iterators`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-13T09:17:46.140

如果没有可重复的示例，我不确定我是否了解您想要的内容。但这应该可以帮助您：

```
##deletes from g edge 1->2.
g <- delete.edges(g, E(g, P=c(1,2))) 
```

# php - 问题 Codeigniter 重定向（）缓存

> ID：14302077
> 
> 赞同：0
> 
> 时间：2013-01-13T09:03:29.070
> 
> 标签：php, codeigniter, caching, redirect

[用户在我的网站http://www.theindianclassified.com](http://www.theindianclassified.com)上注销后，我正在使用 Codeigniter`redirect()`重定向页面。

当用户访问 url [http://www.theindianclassified.com/logout](http://www.theindianclassified.com/logout)时，他在退出系统后被重定向到主页。但是，如果用户登录并再次单击注销，则用户未注销，但他被重定向到主页。我认为使用 Codeigniter`redirect()`方法的重定向是由浏览器缓存的。

请帮助我，在上述情况下如何实现。我希望浏览器不要缓存重定向。

注销功能如下。

```
function logout() {
    $this->session->sess_destroy();
    redirect('');
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T18:30:11.880

您应该检查您的登录功能以确保不存在故障。如果我猜它会在那里。如果这不起作用，请尝试逐个“取消设置”会话变量。

# colors - 如何在 matplotlib 中添加自定义颜色字母？

> ID：14302079
> 
> 赞同：2
> 
> 时间：2013-01-13T09:03:47.487
> 
> 标签：colors, matplotlib

Matplotlib 仅定义以下基本颜色：

```
•b: blue
•g: green
•r: red
•c: cyan
•m: magenta
•y: yellow
•k: black
•w: white 
```

我想定义更多自定义颜色字母，例如

```
mc1 = RGB(164,106,228)
mc2 = RGB(220,170,114)
mc3 = RGB(249,85,132) 
```

然后我可以定义

```
my_color_list = ['g','r','y','b','c','m','k', 'mc1','mc2','mc3'] 
```

然后`my_color_list`可以用于下面的演示：

```
import matplotlib.pyplot as plt
dt = [1,2,3,4,5,6,7,8,9]
my_color_list = ['g','r','y','b','c','m','k', 'mc1','mc2','mc3'] # not valid 
bar(range(len(dt)),dt,color=my_color_list)
plt.show() 
```

那么如何在 matplotlib 中定义自定义颜色字母呢？或者，如果我有一个 RGB 元组列表，如何将 RGB 元组与基本颜色字母组合在一起并分配给 'plot'/'bar' 命令的 'color' 参数？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-13T10:51:29.707

matplotlib 支持多种指定颜色的方法。除了基本颜色之外，您还可以使用 CSS 颜色十六进制代码、Web 颜色名称和 RGB 值。

*   十六进制代码：一个 Python 字符串，例如`'#d2691e'`.
*   Web 颜色名称：一个 Python 字符串，例如`'chocolate'`.
*   RGB 值：一个 Python 元组，按 RGB: 的顺序排列`(0.824, 0.412, 0.118)`。组件应归一化以落在 [0, 1] 范围内。
*   灰度：给出灰度的 Python 字符串，例如`'0.7'`.

无论何时需要一种颜色，这些形式都可以像标准的单字母颜色名称一样使用。

见： http: [//matplotlib.org/api/colors_api.html](http://matplotlib.org/api/colors_api.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-08-18T02:56:29.837

您还可以定义自己的颜色字典，如下面的 MWE 所示。

```
import matplotlib.pyplot as plt

col = {'azure':(0.2,0.4,0.6), 'grey':(0.69,0.69,0.69), 'hotpink':(0.68,0.14,0.37), 'babyblue':(0.87,0.94,0.94)}

ch = 'grey'
plt.plot([1,2,3,4],color=col[ch])
plt.show() 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-10-28T02:29:04.510

另一种可能性是直接编辑 matplotlib 颜色列表，使用

```
import matplotlib
matplotlib.colors.ColorConverter.colors['mc1'] = (0.976,0.333,0.518) 
```

不过，我会小心使用这个选项，因为它会破坏一些有用的 matplotlib 语法。例如，将颜色称为“mo”可能会混淆它，因为“o”可以表示标记样式，“m”可以表示洋红色。最好坚持使用当前未使用的单个字母，例如 a、ej 等。

# python - 简单：Python 要求输入两次

> ID：14302085
> 
> 赞同：0
> 
> 时间：2013-01-13T09:04:42.633
> 
> 标签：python, python-3.3

这是我的代码：

```
def calculator(value1,value2):

    function=input("Function?")
    if function=="*":
     return value1*value2
    if function=="/":
     return value1/value2
    if function=="+":
     return value1+value2
    if function=="-":
     return value1-value2
a=float(input("value 1:"))
b=float(input("value 2:"))
calculator(a,b)
print(calculator(a,b)) 
```

Python Shell 上的输出

```
value 1:5
value 2:5
Function?/
Function?/
1.0 
```

所以我只是想知道为什么它要求输入函数两次，而不是一次。这可能是一个愚蠢的问题，但感谢您的回答。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-13T09:06:16.333

这两行导致您的问题：

```
calculator(a,b)
print(calculator(a,b)) 
```

你打`calculator`了两次电话，所以它要求你输入两次。

要修复您的代码，只需将结果存储`calculator(a, b)`在一个变量中，然后将其打印出来：

```
result = calculator(a, b)
print(result) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-13T09:06:39.677

您要求 Python `print(calculator(a,b))`- 这意味着 Python 必须对函数进行两次评估。如果您只想输入一次，请存储`calculator(a,b)`在一个变量中并打印该变量。

# unicode - 字符集比较

> ID：14302098
> 
> 赞同：0
> 
> 时间：2013-01-13T09:06:32.340
> 
> 标签：unicode, character-encoding, normalization, unicode-normalization, text-normalization

我需要紧急帮助。我无法比较字符集字符串。写入数据库table1的字符串`utf-8 charset`看起来还是很奇怪： ＳＡＤＩ 但是写入同一个数据库的table2的字符串`SADI`是正常的。每当我比较两者时，它都会给出错误的结果。

1.  知道如何进行比较吗？（实际上比较应该给出真实的结果）

2.  知道如何将 ＳＡＤＩ 插入`SADI`数据库。

两者都有望成为解决方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-13T10:12:20.603

# php - 在 CakePHP 中更改元素的文本

> ID：14302105
> 
> 赞同：0
> 
> 时间：2013-01-13T09:07:21.250
> 
> 标签：php, cakephp

我`userbar`在每个页面上都调用了一个元素 - 它告诉用户他/她是否登录。我创建了这个元素并在 default.ctp 中回显了它：

```
<?php echo $this->element('userbar', array('text' => 'You are not logged in.')); ?> 
```

现在它显示在每一页上。但是，我[在任何地方都找不到](http://book.cakephp.org/2.0/en/views.html#elements)如何更改此文本。例如，我想从某个控制器访问此元素并对其进行更改。如何？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T09:11:55.730

您设置一个视图变量，然后使用它。

```
<?php
class MyController extends AppController
{
    function myaction () {
        $this->set ('my_var', 'You are not logged in');
    }
}
?> 
```

然后在视图中：

```
<?php echo $this->element ('userbar', array ('text' => $my_var)); ?> 
```

考虑到这是你在每个页面请求上都会做的事情，最好把它放在`AppController::beforeFilter()`.

[还有其他方法可以做到这一点](http://www.tiplite.com/element-content-within-controller/)。但是如果你在控制器中渲染元素，你仍然需要设置一个视图变量并在视图中回显它。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-13T11:53:17.567

我认为 vanneto 在非常具体地回答了这个问题方面做得很好。但根据我的观点，这里发生的事情是一个设计缺陷。这就是为什么我添加这个答案，以便为您提供有关如何解决这个问题的另一种选择。因为我看到了这种解决方案，从长远来看，它们会导致问题。

案例是登录或注销的文本。

假设您使用 Auth 组件：

[http://book.cakephp.org/2.0/en/core-libraries/components/authentication.html](http://book.cakephp.org/2.0/en/core-libraries/components/authentication.html)

我们将从控制器开始，您可能在 AppController 中有这样的内容：

```
public function beforeFilter() {
    parent::beforeFilter();
    $this->set('userIsLoggedIn', AuthComponent:: loggedIn());
    $this->set('loggedInUser', AuthComponent::user());
} 
```

那么这是做什么的：在每次请求时，它都会将登录的用户发送到视图。现在您可以说控制器可以有一个 if 语句来检测应该发送哪些文本，但这并不是必需的。

在你的元素中，你也可以这样做。

所以在你的元素中放一些类似的东西：

```
if($userIsLoggedIn) {
    echo 'User is logged in.';
}else{
    echo 'You are not logged in!';
} 
```

通常，我们会更多地使用 helper 来实现这种逻辑，因为它们是具有更多样式编码选项的类。但它也可以简单地使用一个元素。

所以现在你得到了正确的文本。然后你就明白了：静态文本是否属于元素？不，不是的。那么改进它的方法是像这样实现它：

```
if($userIsLoggedIn) {
    echo __('User is logged in');
}else{
    echo __('User is not logged in');
} 
```

这样您就可以将静态文本放入您的 .po 文件中。如果你不知道它们是什么：

[http://book.cakephp.org/2.0/en/core-libraries/internationalization-and-localization.html](http://book.cakephp.org/2.0/en/core-libraries/internationalization-and-localization.html)

例如，如果您的网站变为多语言，现在也可以使用该元素。或者您可以让您的文本编写者在不接触源代码的情况下编辑文本。

如您所见，这是一种不同的方法，但我认为它将为您提供更清晰的代码。它解耦了代码，控制器执行他的任务，元素执行他的任务并且文本也被分离出来，因为它不属于视图中的硬编码。

就代码而言，它不多，所以我强烈建议一些看起来像这样的解决方案。也可以通过助手来完成。

关于这种方法的一些来源：

[http://en.wikipedia.org/wiki/Object-oriented_programming#Decoupling](http://en.wikipedia.org/wiki/Object-oriented_programming#Decoupling)

[http://en.wikipedia.org/wiki/Single_responsibility_principle](http://en.wikipedia.org/wiki/Single_responsibility_principle)

# jquery - 动画/任何函数内的条件语句

> ID：14302108
> 
> 赞同：2
> 
> 时间：2013-01-13T09:07:30.570
> 
> 标签：jquery, if-statement, jquery-animate

我想知道是否可以`animate`根据某些标准在 jQuery 中设置一个属性。例子：

```
var condition = offL > ((wW / 2) - $this.width());
tooltip.css(function() {
  if (condition) {
    return '"right", "auto"';
  } else {
    return '"left", "auto"';
  }
}).animate({
  "top": $this.offset().top + (posT / 2) - (tooltip.height() / 2),
  if (condition) {
    return '"left":"offL - tooltip.width() - 30"';
  } else {
    return '"right", "offR - tooltip.width() - 30"';
  }
}, 300).fadeTo(200, 1); 
```

（`tooltip`和其他变量在前面定义。）

这显然是行不通的。但是，如果他们需要在函数中使用条件参数，该怎么办？

另一个问题，我对我的条件的使用`var`是否正确？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-13T09:14:46.577

只是在动画之前做出了决定。例如：

```
var properties = {}
if(condtion) {
  properties = {left: someThing};
else
  properties = {prop1: value1, prop2: value2};
$(obj).animate(properties,'fast'); 
```

是的，您对条件的使用是正确的。

```
var condition = offL > ((wW / 2) - $this.width()); 
```

将被评估为真或假，因为它的条件;）

# event-handling - javafx自定义事件：事件类、触发事件、事件处理程序？

> ID：14302113
> 
> 赞同：1
> 
> 时间：2013-01-13T09:08:24.367
> 
> 标签：event-handling, javafx-2

用例是：重负载任务通常安排在单独的线程上。任务完成后，该线程将触发一个事件（甚至包含返回的结果），然后主线程和其他线程将捕获该事件并执行其他操作。

问题是：如何在 Javafx 中实现这一点？如何定义自定义事件（不是 UI 事件），并从一个线程触发它，从另一个线程捕获？

我用谷歌搜索，但没有找到具体的方法。有人可以帮忙吗？谢谢。

# php - php将i:s分秒转秒的最正确方法

> ID：14302114
> 
> 赞同：1
> 
> 时间：2013-01-13T09:08:28.057
> 
> 标签：php, function, date, time, seconds

date('i:s',600) 将显示十分钟：10:00。美好而完美。我不在乎时间。

我需要从字符串中获取 600 的反向函数`'10:00'`吗？

所以，我正在**寻找`date('i:s',$secs)`**.

`$secs`可以是任何**正确**的分钟和秒时间，显示为从“00:00”到“59:59”的字符串。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-13T09:11:31.770

```
function reverse($secs) {
  list($i, $s) = explode(':', $secs);
  return $i*60 + $s;
} 
```

任何更多的东西都是矫枉过正的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-13T09:24:18.047

不确定效率如何`strtotime`，但您可以这样做：

```
function seconds($time)
{
    return (strtotime("00:" . $time) - strtotime("00:00:00"));
} 
```

# c#-4.0 - mvc4 vs2012上的剑道设置

> ID：14302115
> 
> 赞同：0
> 
> 时间：2013-01-13T09:08:30.843
> 
> 标签：c#-4.0, asp.net-mvc-4, kendo-ui

如何使用 mvc4 设置剑道 ui。我想在我的 Web 应用程序中使用它的主题和网格以及所有控件。

我已经使用[http:](http://demos.kendoui.com/themebuilder/web.html) //demos.kendoui.c​​om/themebuilder/web.html 但我如何在我的网站中应用生成的主题。我对剑道有点困惑，我是新手。请建议我如何在 mvc4 上配置 kendo 并使用它的所有功能。

使用：-MVC 4、html 5 和 c#

谢谢！！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-13T09:29:00.027

> 我如何使用 mvc4 设置剑道 ui

与使用 PHP 设置它的方式完全相同。或者使用 Java Servlet。KendoUI 是一个与服务器端无关的客户端框架。您使用哪种服务器端技术并不重要。

> 我想在我的 Web 应用程序中使用它的主题和网格以及所有控件。

太好了，继续。前往[文档](http://docs.kendoui.com/getting-started/changes-and-backward-compatibility)，阅读它，卷起袖子并集成到您的应用程序中。

1.  使用 Empty 模板创建一个新的 ASP.NET MVC 4 应用程序
2.  添加一个 HomeController 来提供一个视图：

    ```
    public class HomeController : Controller
    {
        public ActionResult Index()
        {
            return View();
        }
    } 
    ```

3.  当然还有相应的`~/Views/Home/Index.cshtml`视图：

    ```
    @{
        Layout = null;
    }

    <!DOCTYPE html>

    <html>
    <head>
        <meta name="viewport" content="width=device-width" />
        <title>Index</title>
        <link rel="stylesheet" href="//cdn.kendostatic.com/2012.2.710/styles/kendo.common.min.css" />
        <link rel="stylesheet" href="//cdn.kendostatic.com/2012.2.710/styles/kendo.default.min.css" />
    </head>
    <body>
        <input id="dropDownList" />

        <script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>
        <script type="text/javascript" src="//cdn.kendostatic.com/2012.2.710/js/kendo.all.min.js"></script>
        <script type="text/javascript">
            $("#dropDownList").kendoDropDownList({
                dataTextField: "text",
                dataValueField: "value",
                dataSource: [
                    { text: "Item1", value: "1" },
                    { text: "Item2", value: "2" }
                ]
            });
        </script>
    </body>
    </html> 
    ```

正如您所看到的，这里绝对没有任何特定于 MVC 的内容。您可以从任何服务器端框架提供此标记。您只需选择一个主题，从 Kendo CDN 引用它，从 CDN 引用位于 DOM 末尾的 Kendo 脚本并开始使用它。

但是，如果您想取得一些进展，最重要的是[`RTFM`](http://docs.kendoui.com/getting-started/changes-and-backward-compatibility)Telerik 的人（以及我的同事）花了很多时间来记录您需要知道的所有内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-13T20:22:54.663

Kendo Docs 网站上有一个教程，将逐步引导您完成它。

[你好剑道用户界面 - 添加剑道用户界面](http://docs.kendoui.com/tutorials/ASP.NET/Hello%20Kendo%20UI/asp-net-hello-kendo-ui-part-1#add-kendo-ui)

和

[剑道音乐商店 - 项目设置](http://docs.kendoui.com/tutorials/ASP.NET/Kendo%20Music%20Store/Music%20Store%20Web/kendo-music-store-web-setup)

# maven - Maven 程序集：包含一个与 baseDirectory 同级的文件

> ID：14302116
> 
> 赞同：2
> 
> 时间：2013-01-13T09:08:39.200
> 
> 标签：maven, maven-assembly-plugin

我正在使用程序集插件将我的 Swing 应用程序与 artifactId killer-app 和自定义程序集描述符打包在一起。

该程序集工作正常，我可以`/killer-app/`在程序集内的目录中包含我想要的任何内容。

```
killer-app-archive.zip
 \- killer-app
    \- whatever ... 
```

问题是我必须`/killer-app/`在存档内的文件夹的同一级别包含另一个文件。

```
killer-app-archive.zip
 \- killer-app
 |  \- whatever ...
 \- launch.bat 
```

我一直在尝试玩

> <includeBaseDirectory>false</includeBaseDirectory>

但这只是删除了`/killer-app/`我必须保留的文件夹。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-13T09:59:22.183

三个步骤可以解决您的问题：

*   更改`baseDirectory`为`../`
*   使用[FileSets](http://maven.apache.org/plugins/maven-assembly-plugin/assembly.html#class_fileSet)添加额外的文件。
*   使用[DependencySet](http://maven.apache.org/plugins/maven-assembly-plugin/assembly.html#class_dependencySet)添加项目工件（useProjectArtifact = true）

这应该可以解决您的问题。这是一个例子：

```
<?xml version="1.0" encoding="UTF-8"?>
<assembly
    xmlns="http://maven.apache.org/plugins/maven-assembly-plugin/assembly/1.1.2"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://maven.apache.org/plugins/maven-assembly-plugin/assembly/1.1.2 http://maven.apache.org/xsd/assembly-1.1.2.xsd">
    <id>my-assembly</id>
    <baseDirectory>../</baseDirectory>
    <formats>
        <format>zip</format>
    </formats>
    <includeBaseDirectory>false</includeBaseDirectory>
    <dependencySets>
        <dependencySet>
            <unpack>true</unpack>
            <useProjectArtifact>true</useProjectArtifact>
        </dependencySet>
    </dependencySets>
    <fileSets>
        <fileSet>
            <directory>path/to/resource</directory>
            <includes>
                <include>**/*.bat</include>
            </includes>
            <outputDirectory>/</outputDirectory>
        </fileSet>
    </fileSets>
</assembly> 
```

# php - 根据用户 ID 更新行

> ID：14302119
> 
> 赞同：0
> 
> 时间：2013-01-13T09:09:03.063
> 
> 标签：php, mysql, database, phpmyadmin, dreamweaver

我有一个包含列的用户表：用户 ID、用户名、密码、电子邮件、同意_1、评论_1、同意_2、评论_2、......

我用它来更新表格：

```
UPDATE users SET Agree_1=%s, comment_1=%s, Agree_2=%s, comment_2=%s, Agree_3=%s, comment_3=%s, Agree_4=%s, comment_4=%s, Agree_5=%s, comment_5=%s, Agree_6=%s, comment_6=%s, Agree_7=%s, comment_7=%s, Agree_8=%s, comment_8=%s, Agree_9=%s, comment_9=%s, Agree_10=%s, comment_10=%s, Agree_11=%s, comment_11=%s, Agree_12=%s, comment_12=%s, Agree_13=%s, comment_13=%s, Agree_14=%s, comment_14=%s, Agree_15=%s, comment_15=%s, Agree_16=%s, comment_16=%s, Agree_17=%s, comment_17=%s, WHERE id=%s",
                   GetSQLValueString($_POST['grp_1'], "text"),
                   GetSQLValueString($_POST['text_1'], "text"),
                   GetSQLValueString($_POST['grp_2'], "text"),
                   GetSQLValueString($_POST['text_2'], "text"),
                   GetSQLValueString($_POST['grp_3'], "text"),
                   GetSQLValueString($_POST['text_3'], "text"),
                   GetSQLValueString($_POST['grp_4'], "text"),
                   GetSQLValueString($_POST['text_4'], "text"),
                   GetSQLValueString($_POST['grp_five'], "text"),
                   GetSQLValueString($_POST['text_five'], "text"),
                   GetSQLValueString($_POST['grp_six'], "text"),
                   GetSQLValueString($_POST['text_six'], "text"),
                   GetSQLValueString($_POST['grp_seven'], "text"),
                   GetSQLValueString($_POST['text_seven'], "text"),
                   GetSQLValueString($_POST['grp_eight'], "text"),
                   GetSQLValueString($_POST['text_eight'], "text"),
                   GetSQLValueString($_POST['grp_nine'], "text"),
                   GetSQLValueString($_POST['text_nine'], "text"),
                   GetSQLValueString($_POST['grp_ten'], "text"),
                   GetSQLValueString($_POST['text_ten'], "text"),
                   GetSQLValueString($_POST['grp_eleven'], "text"),
                   GetSQLValueString($_POST['text_eleven'], "text"),
                   GetSQLValueString($_POST['grp_twelve'], "text"),
                   GetSQLValueString($_POST['text_twelve'], "text"),
                   GetSQLValueString($_POST['grp_thirteen'], "text"),
                   GetSQLValueString($_POST['text_thirteen'], "text"),
                   GetSQLValueString($_POST['grp_fourteen'], "text"),
                   GetSQLValueString($_POST['text_fourteen'], "text"),
                   GetSQLValueString($_POST['grp_fifteen'], "text"),
                   GetSQLValueString($_POST['text_fifteen'], "text"),
                   GetSQLValueString($_POST['grp_sixteen'], "text"),
                   GetSQLValueString($_POST['text_sixteen'], "text"),
                   GetSQLValueString($_POST['grp_seventeen'], "text"),
                   GetSQLValueString($_POST['text_seventeen'], "text"),
                   GetSQLValueString($_POST['id'], "int")); 
```

我的表单有一个隐藏字段，我称之为 id，当我使用上面的查询更新时，它是成功的，但是当我创建另一个 id 为 2 的用户时，使用他的信息登录，使用上面的查询更新用户，它继续更新 id 为 1 的用户，请问我如何让它更新我创建的任何用户。请帮忙。下面是我用来从数据库中选择的查询集：

```
$query_draft1b_query = sprintf("SELECT id, Agree_1, comment_1, Agree_2, comment_2, Agree_3, comment_3, Agree_4, comment_4, Agree_5, comment_5, Agree_6, comment_6, Agree_7, comment_7, Agree_8, comment_8, Agree_9, comment_9, Agree_10, comment_10, Agree_11, comment_11, Agree_12, comment_12, Agree_13, comment_13, Agree_14, comment_14, Agree_15, comment_15, Agree_16, comment_16, Agree_17, comment_17, Agree_18, comment_18, Agree_19, comment_19, Agree_20, comment_20, Agree_21, comment_21, Agree_22, comment_22, Agree_23, comment_23, Agree_24, comment_24, Agree_25, comment_25, Agree_26, comment_26, Agree_27, comment_27, Agree_28, comment_28, Agree_29, comment_29, Agree_30a, comment_30a, Agree_31a, comment_31a, Agree_30b, comment_30b, Agree_31b, comment_31b, Agree_32, comment_32, Agree_33, comment_33, Agree_34, comment_34, Agree_35, comment_35, Agree_36, comment_36, Agree_37, comment_37, Agree_38, comment_38, Agree_39, comment_39, Agree_40, comment_40, Agree_41, comment_41, Agree_42, comment_42, Agree_43, comment_43, Agree_44, comment_44, Agree_45, comment_45, Agree_46, comment_46, Agree_47, comment_47, Agree_48, comment_48, Agree_49a, comment_49a, agree_49b, comment_49b, Agree_50, comment_50 FROM users WHERE id = %s", GetSQLValueString($colname_draft1b_query, "int"));$draft1b_query = mysql_query($query_draft1b_query, $NAWFIA_1) or die(mysql_error());$row_draft1b_query = mysql_fetch_assoc($draft1b_query);$totalRows_draft1b_query = mysql_num_rows($draft1b_query); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T09:15:30.910

请使用结构

```
UPDATE [table] SET [Column] = [Value] WHERE id = [id] 
```

解决你的问题

```
Update users Set .... WHERE id = 2 
```

但我认为你的数据库设计不好。请将其拆分为两个表（评论、用户）。在评论中，对用户使用外键。

# asp.net - 授予 IIS 以管理员身份运行的权限（以便从写入文件夹的 web .exe 运行）

> ID：14302123
> 
> 赞同：5
> 
> 时间：2013-01-13T09:09:56.120
> 
> 标签：asp.net, iis

我在通过**“进程”**类`mvc4`调用 .exe 文件中有一个 API。 此 .exe 使用**log4net**，并运行另一个将文件导出到目录和子目录的 .exe。在进程结束时，.exe 发布到 http API。

 ****```
Process p = new Process();
p.StartInfo.FileName = ConfigurationManager.AppSettings["ExtractToolPath"];
p.StartInfo.Arguments = this.strcommand;
p.StartInfo.RedirectStandardOutput = true;
p.StartInfo.UseShellExecute = false;
p.StartInfo.Verb = "runas";
p.StartInfo.RedirectStandardInput = true;
p.Start();
string s = p.StandardOutput.ReadToEnd();
p.WaitForExit(); 
```

字符串`'s'`以“”（空白字符串）返回。

`s`参数获取打印到控制台窗口的内容。我在 .exe 的开头做了一个打印，因此我知道它甚至没有启动这个过程。

**重要提示：**当我删除 log4net 记录器时，`'s'`参数会得到一些输出，但是当尝试执行任何需要写权限的命令时它会失败。

我试图授予 IIS 可执行权限，并使用管理员用户名和密码进行模拟。我把我的目录“分享”给每个人。没有任何帮助。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-15T08:08:04.350

您是否尝试将应用程序池标识设置为管理员？或者将目录的写权限授予应用程序池身份？

用于写入的凭证是应用程序池身份中的凭证。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-05-25T13:33:02.737

当部署在 IIS 上的 ASP.NET Core 应用程序必须从（显然是在 Web 应用程序文件夹之外）启动一个进程（带有一些参数）时，我有类似的上下文，该进程`Program Files`在用户配置文件中的某个目录中输出数据（也是在 Web 应用程序文件夹之外） ）。

从命令提示符运行时，该命令需要提升（用户帐户控制）。

为了使它从 IIS 运行：

*   `IIS AppPool\YourPool`必须能够写入输出目录
*   我*在 Web 应用程序目录*中创建了一个 bat 文件，其中包含要发出的命令
*   `IIS AppPool\YourPool`未包含**在**管理员用户组中

这是在 Windows 7 x64 上测试的。****

# java - Java jList1.getSelectedValue() 返回一个对象。我需要来自所选列表项的字符串。

> ID：14302124
> 
> 赞同：0
> 
> 时间：2013-01-13T09:09:56.630
> 
> 标签：java, string, swing, object, jlist

我是 Java 的二年级学生，我正在利用自己的时间学习各种东西。其中之一是`JList`。

```
jList1.getSelectedValue(); 
```

上面的代码返回一个`Object`，而不是一个`String`。我需要一个`String`选定的列表项。`Adding/removing`列表框中的模型不是问题。列表的内容不断变化（随着模型），因此`.getSelectedIndex()`不希望将其用作解决方法。

帮助？

**编辑：**我确实有一个为 . 工作的听众`jList`，我只需要解决这个问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-13T09:19:02.180

只需使用演员表，或安德鲁在评论中提到的 toString 方法：

```
String val = (String)jList1.getSelectedValue(); 
```

或者：

```
String val = jList1.getSelectedValue().toString(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-13T09:59:43.703

`getSelectedValue()`类[JList](http://docs.oracle.com/javase/7/docs/api/javax/swing/JList.html)中的方法返回您添加的选定对象`ListModel`。它可以是字符串、整数或任何其他对象。

如果您生成这样的 JList

```
String[] data = {"one", "two", "three", "four"};
JList myJList = new JList(data); 
```

select 方法`myJList.getSelectedValue();`显然返回一个字符串。

如果您添加自己的对象，例如`Student`or `Department`，则在选择时会得到相同的对象，并且当您尝试打印它时，将打印对象的 hashCode 引用，除非您`toString()`在自己的类中覆盖方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-13T10:26:16.567

您可以将返回的对象转换为字符串，因为您已经用字符串值填充了列表。或者，您可以通过 ListModel 处理列表，但可以使用 DefaultListModel（也将数据作为对象处理）或实现您自己的 ListModel 以提供您需要的任何功能，例如将列表数据类型限制为 String。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-12-11T18:58:38.597

我使用`.toString()`或转换为字符串，但我收到了选择的地址，而不是值。所以我尝试了这段代码，它确实有效：

```
private class ButtonListener implements ActionListener
{
         public void actionPerformed(ActionEvent e)
        {
        String a[] = new String[20];// To save the selections
        int i = 0, j = 0;

            // Get the selected values.
            Object[] selections = array2List.getSelectedValues();

        // To save the selections in array
        for(Object selections : sugCoursesList.getSelectedValues())
        {
            for(String t : array2)
            {
                if (selections == t)
                {
                    a[i] = t;
                    i++;
                    System.out.println(selections);     
                }   
            }
        }

        for(String s: a)
            System.out.println("a " + s);
  } 
```

我已经比较了列表中的数组以检查它是否被选中，如果是，则将其保存在数组 a 中。

# c# - 如何使用 EventWaitHandler 挂起某些线程

> ID：14302125
> 
> 赞同：-1
> 
> 时间：2013-01-13T09:10:03.190
> 
> 标签：c#, multithreading, event-wait-handle

我有这个过程，其中有两个线程。和一个带有按钮（开始、暂停、暂停、恢复）的表单。每当我暂停使用`EWH.WaitOne()`整个应用程序时都会冻结（暂停）并且我无法再按下恢复按钮

有没有办法仅在表单继续运行时暂停 2 个线程？（我的代码中的线程 1 和 2）

```
 public partial class Form1 : Form
    {
        public static System.Timers.Timer timer;
        static Thread Thread1;
        static Thread Thread2;
        private static EventWaitHandle ewh = new EventWaitHandle(false, EventResetMode.AutoReset);

        static void timer_Elapsed(object sender, System.Timers.ElapsedEventArgs e)
        {
            using (var writer = File.AppendText("WriteTo.txt"))
            {
                writer.AutoFlush = true;
                writer.WriteLine(e.SignalTime);
            }

        }
        static void method1()
        {
            string text = "";
            using (FileStream fs = File.Open("C:\\Users\\Wissam\\Documents\\Visual Studio 2010\\Projects\\Proc1\\Proc1\\bin\\Debug\\MyFile.txt", FileMode.Open, FileAccess.Read, FileShare.None))
            {
                int length = (int)fs.Length;
                byte[] b = new byte[length];
                UTF8Encoding temp = new UTF8Encoding(true);

                while (fs.Read(b, 0, b.Length) > 0)
                {
                    text += temp.GetString(b);
                }
                using (FileStream fs1 = File.Open("C:\\Users\\Wissam\\Documents\\Visual Studio 2010\\Projects\\Proc1\\Proc1\\bin\\Debug\\MyFile1.txt", FileMode.Open, FileAccess.Write, FileShare.None))
                {
                    fs1.Write(temp.GetBytes(text), 0, temp.GetByteCount(text));
                    Thread.Sleep(1000);
                }

            }
        }
        static void method2()
        {
            timer = new System.Timers.Timer(1000);
            timer.Elapsed += new System.Timers.ElapsedEventHandler(timer_Elapsed);
            timer.Interval = 1000;
            timer.Enabled = true;

        } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-13T09:25:47.013

直接暂停线程基本上是一个冒险的提议 - 从另一个线程，您无法判断“目标”线程何时处于关键事件的中间。例如，您不想挂起一个线程，而它拥有一个您想从另一个线程获取的锁。

[`ManualResetEvent`](http://msdn.microsoft.com/en-us/library/system.threading.manualresetevent.aspx)您当然可以使用等待句柄 -在这种情况下我建议。*控制*线程将调用[`Set`](http://msdn.microsoft.com/en-us/library/system.threading.eventwaithandle.set.aspx)为其他线程开绿灯，并[`Reset`](http://msdn.microsoft.com/en-us/library/system.threading.eventwaithandle.reset.aspx)“要求”它们暂停。然后其他线程将[`WaitOne`](http://msdn.microsoft.com/en-us/library/57deze2z.aspx)定期调用（通常作为循环的第一部分），在未设置事件时阻塞。

您可能希望在等待调用上设置一个超时，以便您可以定期检查其他事情的状态（例如是否完全退出） - 这取决于您的情况。使用 的返回值`WaitOne`来确定事件是否实际发出信号，或者您是否只是超时。

另一种选择是使用`Monitor.Pulse`//来指示状态变化`Monitor.PulseAll`，`Monitor.Wait`并保留一个单独的标志来说明线程是否应该工作。您需要小心内存模型，以检查您的线程是否看到彼此写入的更改。

鉴于您似乎每秒做一次工作，另一种选择 - 可能更简单的方法是在一个计时器中完成*所有*工作，您只需适当地启用和禁用该计时器。

# c++ - CreateProcess() 启动子应用程序

> ID：14302127
> 
> 赞同：2
> 
> 时间：2013-01-13T09:10:10.870
> 
> 标签：c++, c, visual-c++

我想通过`CreateProcess`以下步骤使用函数从主应用程序启动子应用程序：

1.  `.exe`从没有子程序窗口的主程序启动子程序
2.  等待`rand Sleep`
3.  然后先终止子应用程序，然后终止主应用程序。

在下面我的示例代码中，但子程序与窗口一起运行（在本例中为记事本），我无法终止子程序。

```
#include "stdafx.h"
#include <windows.h>
#include <conio.h>
#include <strsafe.h>
#include <direct.h>
#include <string.h>

int main(int argc, char* argv[])
{   

HWND                hWnd;
STARTUPINFO         sInfo;
PROCESS_INFORMATION pInfo;

ZeroMemory(&sInfo, sizeof(sInfo));
sInfo.cb = sizeof(sInfo);
ZeroMemory(&pInfo, sizeof(pInfo));

if (CreateProcess("C:\\WINDOWS\\System32\\notepad.exe", NULL, NULL, NULL, false, CREATE_NO_WINDOW, NULL, NULL, &sInfo, &pInfo))
{
    printf("Sleeping 100ms...\n");
    Sleep(100);

    DWORD dwExitCode;
    GetExitCodeProcess(pInfo.hProcess, &dwExitCode);

    CloseHandle(pInfo.hThread);
    CloseHandle(pInfo.hProcess);

    }

system("pause");

return 0;

 } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-13T09:40:44.680

记事本窗口显示的原因是它不是控制台应用程序。MSDN这样说`CREATE_NO_WINDOW`：

> 该进程是一个在没有控制台窗口的情况下运行的控制台应用程序。因此，未设置应用程序的控制台句柄。 **如果应用程序不是控制台应用程序**，或者与 CREATE_NEW_CONSOLE 或 DETACHED_PROCESS 一起使用，则忽略此标志。

相反，使用`STARTUPINFO`你传入的：

```
sInfo.dwFlags = STARTF_USESHOWWINDOW;
sInfo.wShowWindow = SW_HIDE; 
```

我相信这会影响`WinMain`记事本 main 函数中的最后一个参数，但我不确定。

至于为什么记事本不关闭，`GetExitCodeProcess`实际上并没有结束进程，它只是检索状态。您可以`TerminateProcess`改用：

```
TerminateProcess(pInfo.hProcess, 0); 
```

# android - 将列表视图中的项目添加到收藏列表

> ID：14302129
> 
> 赞同：0
> 
> 时间：2013-01-13T09:10:31.350
> 
> 标签：android

我正在寻找一个好主意来制作列表视图的收藏列表。ListView 是从网站服务器解析的。我添加了新的星形图像，一旦它点击它就会变成黄色作为“收藏夹”，我想要的是如何将这个点击的项目保存到收藏夹列表中的想法......我想到的是让本地xml 文件并将我单击的每个项目添加到此 xml 并在收藏夹列表活动中对其进行解析，这看起来是个好主意吗？或者有更好的方法来做到这一点！谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T17:04:57.837

这个想法很好，但最好使用 SQLite DB 而不是 XML 文件。这将使代码更容易，因为不需要解析或生成 XML，并且对 DB 的数据访问更加灵活，例如，如果必须获取特定项目。

# javascript - 将 tinymce 与 asp .net MVC 4.0 集成

> ID：14302131
> 
> 赞同：8
> 
> 时间：2013-01-13T09:11:17.840
> 
> 标签：javascript, jquery, asp.net-mvc-4, tinymce

使用**ASP .NET MVC 4.0**，**VS2012**。

在我的一个页面中，我尝试集成一个所见即所得的编辑器“ **TinyMCE** ”。为了整合，我遵循了以下 URL：[.tugberkugurlu.com](http://www.tugberkugurlu.com/archive/tinymce-html-text-editior-and-asp-net-mvc-setting-it-up-has-become-easy-with-nuget)

我的**视图页面**是这样的：

```
@model AboutModels
@using FileUploadDemo.Models
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.js"></script>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
<script src="Scripts/tinymce/jquery.tinymce.js" type="text/javascript"></script>

@{
    ViewBag.Title = "About";
}

@using (Html.BeginForm()) {

@Html.ValidationSummary(true)

<fieldset>
    <legend>About</legend>

    <div class="editor-label">
        @Html.LabelFor(model => model.Title)
    </div>
    <div class="editor-field">
        @Html.EditorFor(model => model.Title)
        @Html.ValidationMessageFor(model => model.Title)
    </div>

    <div class="editor-label">
        @Html.LabelFor(model => model.PostedOn)
    </div>
    <div class="editor-field">
        @Html.EditorFor(model => model.PostedOn)
        @Html.ValidationMessageFor(model => model.PostedOn)
    </div>

    <div class="editor-label">
        @Html.LabelFor(model => model.Tags)
    </div>
    <div class="editor-field">
        @Html.EditorFor(model => model.Tags)
        @Html.ValidationMessageFor(model => model.Tags)
    </div>

    <div class="editor-label">
        @Html.LabelFor(model => model.Content)
    </div>
    <div class="editor-field">
        @Html.EditorFor(model => model.Content)
        @Html.ValidationMessageFor(model => model.Content)
    </div>

    <p>
        <input type="submit" value="Create" />
    </p>

    <p>
        Posted Content : @ViewBag.HtmlContent
    </p>

</fieldset>
} 
```

这里我的**模型**是这样的：

```
public class AboutModels 
{
    public string Title { get; set; }
    public DateTime PostedOn { get; set; }
    public string Tags { get; set; }

    [UIHint("tinymce_jquery_full"), AllowHtml]
    public string Content { get; set; }

} 
```

我的关于页面加载了所有功能。

```
"@html.EditorFor(model=>model.content)" 
```

加载也很好。但是没有加载“所见即所得”窗格（我不知道它叫什么，该窗格用于编辑我在 textarea 中写入的文本（HTml.editorFor())）。在运行时，在**jquery.tinymce.js**文件中抛出异常。

**错误信息 ：**

```
`Unhandled exception at line 86, column 11 in http://localhost:1706/Home/About

0x800a01b6 - Microsoft JScript runtime error: Object doesn't support this property or method` 
```

并给我两个选择，**Continue**或**Break**。如果我继续，页面会加载我前面提到的功能。如果我中断，那么它会保留在带有黄色文本背景的**jquery.tinymce.js文件中。**

我没有使用 Javascript/jquery 的经验。ASP .NET MVC 4.0 中的新功能，实际上这是我在 .net 中第一次尝试 Web 应用程序。

我从 nuGet 更新了 jquery。有什么可能的方法来解决它？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-11-13T03:50:15.183

此页面需要更新。Tinymce 现在很容易融入到几乎任何东西中，MVC4 也不例外。

您将 Tinymce 提供的地址和一行脚本放入 _layout 文档的头部，以表明您希望它更改文本框：

```
@Scripts.Render("//tinymce.cachefly.net/4.0/tinymce.min.js")
<script>
    tinymce.init({ selector: 'textarea' });
</script> 
```

然后，您要做的就是确保在表单上呈现一个文本框，然后它将显示 Tinymce。

```
[AllowHtml]
[DataType(DataType.MultilineText)]
public string YourInputText { get; set; } 
```

但是，如果 tinymce.cachefly.net 上的站点已关闭，那么这确实意味着没有人能够使用 tinymce 界面。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-13T12:03:02.243

**首先**这是两个相同的 jquery 文件（但最小 - 缩小版本）：

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.js"></script>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script> 
```

**第二**：只需转到 _Layout 底部并添加：

```
 @Scripts.Render("~/bundles/jquery")
        @RenderSection("scripts", required: false)
        <script src="@Url.Content("~/Scripts/tinymce/jquery.tinymce.js")" type="text/javascript"></script> 
```

**第三**：在 Views/Shared/EditorTemplates/tinymce_jquery_full.cshtml 上删除

```
<script src="@Url.Content("~/Scripts/tinymce/jquery.tinymce.js")" type="text/javascript"></script> 
```

让我知道这是否对您有帮助。

雅罗斯拉夫

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-13T09:17:19.980

结合 url 和脚本路径时

```
http://localhost:1706/Home/About
<script src="Scripts/tinymce/jquery.tinymce.js" type="text/javascript"></script> 
```

这表明 jquery.tinymce.js 应该位于 /Home/About/Scripts/tinymce/jquery.tinymce.js 中。我认为这是不正确的。尝试将脚本路径更改为

```
<script src="/Scripts/tinymce/jquery.tinymce.js" type="text/javascript"></script>
//or
<script src="~/Scripts/tinymce/jquery.tinymce.js" type="text/javascript"></script> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-30T14:41:47.570

在 MVC3 中一切正常.. 但在 MVC4 中却没有。（至少对我来说..）

最后我让它工作了。

在 _Layout.cshtml 我不得不移动底线：

```
 @Scripts.Render("~/bundles/jquery")
    @RenderSection("scripts", required: false) 
```

到顶部（在 head 标签内），在以下行之前：

```
 @Styles.Render("~/Content/css")
    @Scripts.Render("~/bundles/modernizr") 
```

并留下：

```
<script src="@Url.Content("~/Scripts/tinymce/jquery.tinymce.js")" type="text/javascript"></script> 
```

在 EditorTemplate tinymce_jquery_full.cshtml 文件中。

现在它像在 MVC3 中一样工作正常 :) 希望我能提供帮助。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-09-08T16:50:32.977

您可以在模型本身上添加数据注释以告诉它使用 tinymce。这是完整富文本编辑器的示例。

```
[Display(Name = "Condition"), UIHint("tinymce_jquery_full"), AllowHtml]
public string ExampleCondition { get; set; } 
```

请记住，这样做将始终使此模型呈现富文本编辑器以进行新的或编辑操作。所以你需要在这些视图上有正确的脚本引用。

您还需要在模型中使用正确的 using 语句来使用 System.ComponentModel.DataAnnotations。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2013-03-05T05:53:40.617

你必须使用“@html.Raw(model=>model.content)”

# postgresql - 选择计数 postgres 间隔时间

> ID：14302137
> 
> 赞同：0
> 
> 时间：2013-01-13T09:11:53.563
> 
> 标签：postgresql

我正在使用它来计算过去 75 分钟内发送的数据，但我总是得到 0，同时在过去 75 分钟内发送了数据

```
select count(*) as result 
from data.data 
where last_send_date > (clock_timestamp() - interval '75 minutes')''; 
```

我的错误所在的任何提示（db engine postgres）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T09:17:49.453

这个怎么样？

```
SELECT count(*) as results
FROM data
WHERE last_date BETWEEN (now() '- 45 minute'::interval)::timestamp
AND now(); 
```

# android - 如何插入具有 .gif 格式的图像？

> ID：14302140
> 
> 赞同：1
> 
> 时间：2013-01-13T09:12:17.870
> 
> 标签：android, eclipse

你能给一些项目如何在android上插入这样的图像吗？我想在我的xml中添加那个图像。

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="match_parent"
android:layout_height="match_parent" >

</RelativeLayout> 
```

如何显示我的图像？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T09:19:05.747

您可以使用 ImageView：

```
<ImageView
    android:id="@+id/logo_small"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentRight="true"
    android:layout_alignParentTop="true"
    android:src="@drawable/logo" /> 
```

并将您的图像文件放入`res/drawable/logo.gif`（或特定分辨率的可绘制目录中）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-13T09:49:03.253

如果要显示动态 GIF 则没有直接的方法，您必须尝试一种方法，请参阅下面的链接以获取更多详细信息。

Android 中的REF [GIF](http://droid-blog.net/2011/10/14/tutorial-how-to-use-animated-gifs-in-android-part-1/)

或者，您可以在 Web 视图中加载图像并显示它。（网页视图应该能够显示动画）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-13T09:15:18.393

使用 ImageView。它采用所有标准格式。

# php - 使用 PHP 更新时 MySQL 数据库更新为空值

> ID：14302141
> 
> 赞同：0
> 
> 时间：2013-01-13T09:12:29.057
> 
> 标签：php, mysql

我是 php 新手，我尝试过这种编码 我在下拉列表中选择一个值 我想要更新相应的值，我的数据库中有用户名列表和他们的 ID，我正在显示用户名和当我想更新时，我编写了一个 sql 查询来查找成员 ID 并更新到数据库，但它插入了一个空值。这是我的代码。

**下拉列表代码**

```
<?
session_start();

if(!isset($_SESSION[''])){
header("location:");
 }
 ?>
  <?php include('dbconnect.php'); ?>
  <?php
    $ed=$_GET['ed'];

 $query=mysql_query("select * from table1 where id='$ed'");

 $query2= "select * from table2";

            $row=mysql_fetch_assoc($query);

        if($_POST['Submit'])
        {
            $mem= $_POST['memid'];

            $memname =mysql_query("select memid from table2 where name='$mem'");

$memname1= mysql_fetch_assoc($memname);
$tot_count = mysql_fetch_assoc($ro_count);

            $date=date("d-m-Y");    

            $status="Active";

            $onamo=mysql_real_escape_string($_POST['onamo']);
            $heid = mysql_real_escape_string($_POST['memname1']);
         if($_POST['heid']=='')
            {
                $namo1="*Required";
                $ok=1;

            }
            if($_POST['onamo']=='')
            {
                $onamo1="*Required";
                $ok=1;

            }

        $insert=mysql_query("update table1 set oname='$onamo', heid='$heid'  where id='$ed'") or die('error');  

                if($insert)
                {
                    header("Location");

                }

        }

        ?>

  <body>
 <div id="main_container"><br />
 <div class="main_content">
  <div class="center_content">
  <div class="right_content">            
  <div class="form">      
   <form  action="" method="post" name="fomo" enctype="multipart/form-data" onsubmit="return fall();" class="niceform">

        <h1 align="center">Edit Referal Partner  </h1>

          <? 

        if($_GET['val']==1) { echo "<h1 class='FeatureBlockHeader' >Member Added Successfully</h1>"; } ?>

        <fieldset>

          <dl><dt><label for="Owner Name">Referal Partner Name</label></dt><dd><input name="onamo" type="text" size="53"   id="onamo" value="<?=$row['oname']?>"/><b style="color:#CA0000"><?=$onamo1?></b></dd></dl>

        <dl><dt><label for="">Health Executives</label>
        <?php $result1 = mysql_query($query2);
 echo'<select name="memid" >';
   while($row = mysql_fetch_assoc( $result1 )) { 
    echo '<option value="'.$row['name'].'">' . $row['name'] . '</option>';   
  }
  echo '</select>'; ?>
  </b></dd></dt>
         <dl><dt><label for="submit"></label></dt><dd> <input type="submit" name="Submit" value="Submit"></dd></dl></fieldset>  

        </table>

       </form> 
       ' 
```

我的数据库用空字符串更新，如果我直接传递下拉值 Name 它更新正常。但我想将相应的 memberid 更新到我的表中。请帮我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T07:41:06.967

**阶段1：**

如果该字段为空白，您不执行任何操作。（另外，你对 $ok 的逻辑有误）。

建议的代码是：

```
$ok = 1;  // assume ok unless we have an error
if($_POST['heid']=='')
{
    $namo1="*Required";
    $ok=0;    // Set to "0" to say "Not Ok"
}
if($_POST['onamo']=='')
{
    $onamo1="*Required";
    $ok=0;    // Set to "0" to say "Not Ok"
}
if ($ok)
{
    // Do your update
    $insert = mysql_query("update table1 set oname='$onamo', heid='$heid'  where id='$ed'") or die('error');  

    if($insert)
    {
        header('location: ???');
        exit();  // ALWAYS exit after a header redirect, otherwise the rest of the code will continue to work, then the redirect happens!
    }
    $ok = 0;
    $error = 'Failed to update database'
}

// If you get here, you have an error condition. 
```

** 第 2 阶段：**

您应该`isset($_POST['onamo'])`在获取变量之前进行检查。否则它会抛出一个警告。这可能会给你错误。您在“heid”和“memname1”之间存在差异！:)

```
$ok = 1;  // assume ok unless we have an error
if(!isset($_POST['heid']) || $_POST['heid']=='')  // Or is it $_POST['memname1']?
{
    $namo1="*Required";
    $ok=0;    // Set to "0" to say "Not Ok"
}
if(!isset($_POST['onamo']) || $_POST['onamo']=='')
{
    $onamo1="*Required";
    $ok=0;    // Set to "0" to say "Not Ok"
}
if ($ok)
{
    $onamo=mysql_real_escape_string($_POST['onamo']);
    $heid = mysql_real_escape_string($_POST['memname1']);   // Or is it $_POST['heid'] ??

    // Do your update
    $insert = mysql_query("update table1 set oname='$onamo', heid='$heid'  where id='$ed'") or die('error');  

    if($insert)
    {
        header('location: ???');
        exit();  // ALWAYS exit after a header redirect, otherwise the rest of the code will continue to work, then the redirect happens!
    }
    $ok = 0;
    $error = 'Failed to update database'
}

// If you get here, you have an error condition. 
```

# sql - 外连接多于 1 个表

> ID：14302147
> 
> 赞同：2
> 
> 时间：2013-01-13T09:13:39.577
> 
> 标签：sql, oracle, outer-join

假设我有 5 个表，如下所示：

```
CREATE TABLE T1 (
FIRST_NAME VARCHAR2(100),
LAST_NAME VARCHAR2(100),
CITY NUMERIC,
SALARY NUMERIC);

CREATE TABLE T2 (
CITY NUMERIC,
DISTRICT  NUMERIC);

CREATE TABLE T3 (
DISTRICT NUMERIC,
DOMAIN NUMERIC);

CREATE TABLE T4 (
DOMAIN NUMERIC,
DETAILS_BOOK NUMERIC);

CREATE TABLE T5 (
DETAILS_BOOK NUMERIC,
FIRST_NAME VARCHAR2(100),
LAST_NAME VARCHAR2(100),
EMAIL VARCHAR2(100));

INSERT INTO T1 VALUES ('john', 'doe',1001,1000); 
INSERT INTO T1 VALUES ('jack', 'jill',1001,2000);
INSERT INTO T1 VALUES ('jeff', 'bush',1001,1500);

INSERT INTO T2 VALUES (1001,1);

INSERT INTO T3 VALUES (1,543);

INSERT INTO T4 VALUES (543,22);

INSERT INTO T5 VALUES (22,'john', 'doe','john@22.com');
INSERT INTO T5 VALUES (44,'john', 'doe','john@44.com');
INSERT INTO T5 VALUES (22,'jeff', 'bush','jeff@22.com');
INSERT INTO T5 VALUES (44,'jeff', 'bush','jeff@44.com'); 
```

现在，我想要来自 t1 的所有记录，包括他们的薪水和电子邮件，对应于表 t2、t3 和 t4，这样结果应该是：

```
FIRST_NAME | LAST_NAME | SALARY | EMAIL
--------------------------------------------------
john       | doe       |  1000  | john@22.com
jeff       | bush      |  1500  | jeff@22.com
jack       | jill      |  2000  | (NULL) 
```

到目前为止我得到的是：

```
SELECT T1.FIRST_NAME, T1.LAST_NAME,T1.SALARY,T5.EMAIL
FROM T1,T2,T3,T4,T5
WHERE   T1.FIRST_NAME = T5.FIRST_NAME (+)
and     T1.LAST_NAME = T5.LAST_NAME(+)
AND     T1.CITY = T2.CITY
AND     T2.DISTRICT = T3.DISTRICT
AND     T3.DOMAIN = T4.DOMAIN
AND     T4.DETAILS_BOOK = T5.DETAILS_BOOK 
```

它只返回前两行。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-13T09:16:55.757

试试这个：

```
SELECT 
  T1.FIRST_NAME, 
  T1.LAST_NAME,
  T1.SALARY,
  T5.EMAIL
FROM T1
LEFT JOIN T2  ON T1.CITY         = T2.CITY
LEFT JOIN T3  ON T2.DISTRICT     = T3.DISTRICT
LEFT JOIN T4  ON T3.DOMAIN       = T4.DOMAIN
LEFT JOIN T5  ON T4.DETAILS_BOOK = T5.DETAILS_BOOK
             AND T1.FIRST_NAME   = T5.FIRST_NAME
             AND T1.LAST_NAME    = T5.LAST_NAME; 
```

## [SQL 小提琴演示](http://www.sqlfiddle.com/#!4/91d45/1)

这会给你：

```
| FIRST_NAME | LAST_NAME | SALARY |       EMAIL |
-------------------------------------------------
|       john |       doe |   1000 | john@22.com |
|       jeff |      bush |   1500 | jeff@22.com |
|       jack |      jill |   2000 |      (null) | 
```

问题是`INNER JOIN`after`OUTER JOIN`使您的联接像 一样工作`INNER`，因为内部联接消除了来自外部联接的那些不匹配的行。

**请注意：**我使用了 ANSI SQL-92 显式语法，而不是您在查询`LEFT OUTER JOIN`中使用的旧的隐式`OUTER`和连接语法。`INNER`

请尝试使用 the`LEFT OUTER JOIN`而不是旧的外连接语法，并避免使用`INNER JOIN`after `OUTER JOIN`s。

有关更多详细信息，请参阅以下内容：

*   [**要改掉的坏习惯：使用老式的 JOIN。**](https://sqlblog.org/2009/10/08/bad-habits-to-kick-using-old-style-joins).

*   [**要改掉的坏习惯：使用表别名，如 (a, b, c) 或 (t1, t2, t3)**](https://sqlblog.org/2009/10/08/bad-habits-to-kick-using-table-aliases-like-a-b-c-or-t1-t2-t3)

* * *

**更新：**

当`FROM`子句中有许多表引用时`JOIN`，每个表都与从`FROM`子句^(**1**)请求的下一个表连​​接，产生一个临时结果集，然后这个临时结果集与下一个表连​​接，依此类推。在 的情况下 `OUTER JOIN`，有左或右：

*   `LEFT JOIN`将包括左表中那些不匹配的行，其中，
*   `RIGHT JOIN`将包括右表中那些不匹配的行。

根据您要选择的数据，您必须注意运算符两侧的那些表格`JOIN`及其顺序。

* * *

^(**1：**^(这只是逻辑查询处理顺序，但实际顺序始终由查询优化器决定。))

# c# - 如何模拟 DbSet 的 Include 方法？

> ID：14302150
> 
> 赞同：5
> 
> 时间：2013-01-13T09:13:55.307
> 
> 标签：c#, unit-testing, nunit, moq

我的存储库中有以下方法

```
public IQueryable<T> QueryWithInclude(String include)
        {
            return _dbSet.Include(include);
        } 
```

我如何模拟我正在使用 Moq 的这种方法。我似乎找不到正确的方法。

例如，我可以为

```
public IQueryable<T> Query()
            {
                return _dbSet;
            }

mockrepository.Setup(_ => _.Query()).Returns(foo.AsQueryable()); 
```

此外，如果最终证明这种方法的模拟很困难，那么考虑替代实现/解决方法是否明智？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-13T09:29:03.147

只要您的抽象返回`IQueryable`（如`DbSet`），那么您就可以创建自己的`Include`扩展`IQueryable`. 您的代码将自动调用您的新 Include 扩展方法。当用于返回 a 的抽象时`DbQuery`，它将调用正确的 Invoke，否则如果它是一个`IQueryable`实例，它将什么也不做。添加这个新的扩展方法意味着您当前的代码*应该*无需任何更改即可编译。

像这样：

```
 /// see: http://msdn.microsoft.com/en-us/library/ff714955.aspx
    ///     
    /// The method has been modified from version that appears in the referenced article to support DbContext in EF 4.1 ->
    /// 
    /// </summary>
    public static class ModelExtensions {
        public static IQueryable<T> Include<T>
                (this IQueryable<T> sequence, string path) where T : class {
            var dbQuery = sequence as DbQuery<T>;
            if (dbQuery != null) {
                return dbQuery.Include(path);
            }
            return sequence;
        }
    } 
```

因此，如果您的单元测试使用虚假`IQueryable`列表，则 Include 将不会执行任何操作。

我必须补充一点，对于为什么模拟 EntityFramework 是不好的和毫无价值的，我有强烈的意见。如果您还没有看到它们，那么检查它们可能是值得的。

# ios - 如果我的类是单例类，我如何创建指向 NSArray 的复制指针？

> ID：14302151
> 
> 赞同：0
> 
> 时间：2013-01-13T09:14:01.840
> 
> 标签：ios, objective-c, cocoa-touch

我有一个单身课程。在这堂课上，我拿着一系列的歌曲。这个数组不应该改变！在我的应用程序中，当我从歌曲列表中选择一首歌曲时，当前歌曲会插入到另一个变量中。这个 var 是 Song 类型（数组是歌曲数组）。所以当我写作的时候

```
_myDataMgr._currSong = [_myDataMgr.songArray objectAtIndex:index]; 
```

每次我将更改此 currSong 变量时，songArray 都会更改，因为 currSong 指向此数组。所以我的问题是如何创建这个 currSong 的副本？我知道一些东西，`NSCopy`但我真的不知道如何使用它。谢谢你们。PS：`_myDataMgr`是单例

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-13T09:18:38.920

你应该让你的类符合`NSCopying`协议。

```
@interface Song : NSObject <NSCopying> 
```

然后，实现方法`copyWithZone:`

```
- (id)copyWithZone:(NSZone *)zone
{
    id copy = [[[self class] alloc] init];

    if (copy) {
        // Copy properties here...
    }

    return copy;
} 
```

当您需要实例的副本时，只需调用`copy`. *（我建议在将歌曲插入单例类的数组时调用它。）*

```
[myArray insertObject:[song copy]]; 
```

# php - 将 memcached 用于 PHP 会话的优缺点

> ID：14302152
> 
> 赞同：7
> 
> 时间：2013-01-13T09:14:15.637
> 
> 标签：php, session, memcached

除了重新启动时`memcached`所有会话丢失和用户注销的缺点之外，`memcached`用于存储 PHP 会话数据而不是文件的任何其他缺点是什么。有什么安全问题吗？`memcached`使用而不是磁盘上的标准文件性能更好吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-13T14:38:11.367

虽然，许多人已经能够通过使用 Memcached 来优化数据库性能，但它可能不是所有情况的最佳解决方案。

Memcached 的一些缺点：

1.  尺寸要求
2.  没有太多的文档支持
3.  波动性（如果 Memcached 服务器实例崩溃，则存储在会话中的任何对象数据都将消失）
4.  安全性（Memcached 中没有内置身份验证）。

但是，由于以下原因，Memcached 在许多应用程序中仍然是一个不错的选择：

1.  Memcached 可以弥补 ACID 属性的不足，并且它从不阻塞。
2.  Memcached 是跨平台的
3.  跨数据库管理系统
4.  它便宜

让我们看看光明的一面！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-13T14:27:03.663

不是特定于将 memcached 用于会话的安全问题，而是我经常遇到的问题：您绝对必须确保您的 memcached 实例使用 unix 套接字，或者 - 如果它们绑定到某个部分 - 它们的端口被阻止。否则，人们只能远程登录并查看、修改和删除（会话）数据。

此外，顾名思义，它是一种缓存解决方案，而不是存储解决方案。因此，如果您决定将 memcached 用于会话存储，则应该将其备份为数据库或文件存储，因此如果存在缓存未命中（由于超时、手动删除、刷新或分配内存已满并被修剪），它可以在说“不，它不存在”之前检查更持久的存储类型。

# scala - 最佳实践：“如果不是不可变的创建副本”-模式

> ID：14302156
> 
> 赞同：3
> 
> 时间：2013-01-13T09:15:01.280
> 
> 标签：scala, immutability, scala-collections

我有一个函数，它以 a`Seq[_]`作为参数并返回一个不可变的类实例，并将 this`Seq`作为 val 成员。如果`Seq`是可变的，我显然想创建一个防御性副本以保证我的返回类实例不能被修改。

这种模式的最佳实践是什么？首先，我很惊讶*无法*重载函数

```
 def fnc(arg: immutable.Seq[_]) = ...
  def fnc(arg: mutable.Seq[_]) = ... 
```

我也可以进行模式匹配：

```
 def fnc(arg: Seq[_]) = arg match {
    case s: immutable.Seq[_] => { println("immutable"); s}
    case s: mutable.Seq[_] => {println("mutable"); List()++s }
    case _: ?
  } 
```

但我不确定这个`_`案子。是否保证`arg`是`immutable.Seq`或`mutable.Seq`？我也不知道是否`List()++s`是正确的转换方法。我在 SO 上看到了很多帖子，但其中大多数是针对 2.8 或更早版本的。

Scala-Collections 是否足够“智能”，以至于我总是可以（没有模式匹配）编写`List()++s`，如果不可变，我得到相同的实例，如果可变，我得到一个深拷贝？

推荐的方法是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-13T17:46:26.993

如果要同时支持两者，则需要进行模式匹配。的代码`Seq() ++`不*保证*（作为其 API 的一部分）如果它是不可变的，它不会复制其余部分：

```
scala> val v = Vector(1,2,3)
v: scala.collection.immutable.Vector[Int] = Vector(1, 2, 3)

scala> Seq() ++ v
res1: Seq[Int] = List(1, 2, 3) 
```

它可能会在某些特殊情况下进行模式匹配，但您知道自己想要的情况。所以：

```
def fnc[A](arg: Seq[A]): Seq[A] = arg match {
  case s: collection.immutable.Seq[_] => arg
  case _ => Seq[A]() ++ arg
} 
```

您不必担心`_`; 这只是说你不关心类型参数是什么（不是你可以检查），如果你这样写，你不会：如果不可变则通过，否则复制。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-13T09:39:06.117

> 这种模式的最佳实践是什么？

如果你想保证不变性，最好的做法是制作一个防御性副本，或者 require `immutable.Seq`。

> 但我不确定 _ 案。是否保证 arg 是 immutable.Seq 或 mutable.Seq？

不一定，但我相信每个继承自的*标准库*集合`collection.Seq`也继承自这两者之一。然而，自定义集合理论上可以继承自`collection.Seq`. 有关模式匹配解决方案的改进，请参阅 Rex 的答案。

> Scala-Collections 是否足够“智能”，以至于我可以总是（没有模式匹配）编写 List()++s，如果不可变，我得到相同的实例，如果可变，我得到一个深拷贝？

似乎它们在*某些*情况下是，但在其他情况下不是，例如：

```
val immutableSeq = Seq[Int](0, 1, 2)
println((Seq() ++ immutableSeq) eq immutableSeq) // prints true
val mutableSeq = mutable.Seq[Int](0, 1, 2)
println((Seq() ++ mutableSeq) eq mutableSeq) // prints false 
```

`eq`引用相等在哪里。请注意，上述内容也适用于`List() ++ s`，但是正如 Rex 指出的那样，它不适用于所有集合，例如`Vector`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-13T15:53:12.547

你当然可以用那种方式超载！例如，这编译得很好：

```
object  MIO
{
  import collection.mutable

  def f1[A](s: Seq[A]) = 23
  def f1[A](s: mutable.Seq[A]) = 42

  def f2(s: Seq[_]) = 19
  def f2(s: mutable.Seq[_]) = 37
} 
```

在 REPL 中：

```
Welcome to Scala version 2.10.0 (Java HotSpot(TM) 64-Bit Server VM, Java 1.6.0_37).
Type in expressions to have them evaluated.
Type :help for more information.

scala> import rrs.scribble.MIO._; import collection.mutable.Buffer
import rrs.scribble.MIO._
import collection.mutable.Buffer

scala> f1(List(1, 2, 3))
res0: Int = 23

scala> f1(Buffer(1, 2, 3))
res1: Int = 42

scala> f2(List(1, 2, 3))
res2: Int = 19

scala> f2(Buffer(1, 2, 3))
res3: Int = 37 
```

# php - 匹配外部文件的输入

> ID：14302160
> 
> 赞同：0
> 
> 时间：2013-01-13T09:15:39.813
> 
> 标签：php

我设计了一个注册页面，现在我需要从登录页面获取输入并将其与外部文件匹配。（我知道 MySQL 更容易，但这是一个项目，我*根本不能*使用 MySQL。）

我在外部文件上有：

```
fname, sname, username, password, e-mail 
```

我需要验证我的 txt 文件中的用户名和密码。我的登录页面如下所示：

```
<form action="logon.php" method="POST">
    <p>Username: <input type="text" name="username"/></p>
    <p>Password:  <input type="password" name="password"/></p>
    <input type="submit" value="Submit">
</form>
<a href="register.php">Register Here</a>
<?php               
$username= $_POST['username'];
$password= $_POST['password'];
$contents = file_get_contents($file);
$arrangefile = preg_split( '/\n/' , $contents );
$found = false;

foreach ( $arrangefile as $items ) {
   $data = explode ( ',' , $items );
}
} ?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T09:25:22.973

嗯......除了不得不说这样做是一个奇怪的想法之外，你可以`file_get_contents()`用`file()`. 它一次生成一个包含一行文件的数组。这将使解析变得容易得多。在您`foreach`中，您需要标记该行并提取用户名和密码。然后你可以匹配它们。

它可能看起来像这样：

```
<?php               
$username= $_POST['username'];
$password= $_POST['password'];
$contents = file($file);
$found = false;

foreach ($file as $line) {
   $data = explode(', ', $line);
   if (($username === $data[2]) && ($password === $data[3])) {
      $found = true;
   }
 }
 ?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-13T09:27:57.653

你可以这样做：

```
<form action="logon.php" method="POST">
    <p>Username: <input type="text" name="username"/></p>
    <p>Password:  <input type="password" name="password"/></p>
    <input type="submit" value="Submit">
</form>
<a href="register.php">Register Here</a>
<?php               
$username= $_POST['username'];
$password= $_POST['password'];
$lines = file ($file);
$found = false;

foreach ($lines as $line) {
    $line = str_replace (' ', '', $line);
    $cols = explode (',', $line);

    $_username = $cols[2];
    $_password = $cols[3];

    if ($username == $_username && $password == $_password) {
        $found = true;
        break;
    }
}

// Do something with $found
if ($found) {
    // yay
}
else {
    // aww :(
}
?> 
```

编辑：多一点解释。`file()`将文件的所有行放入`array()`. 每个元素代表文件中的一行。你说你有`a, b, c`格式的数据。您使用`str_replace()`删除所有空格以使其`explode()`更容易。然后它只是一个`explode()`数据和比较结果的问题。

希望这可以帮助。

# mysql - Drupal查询数据库表

> ID：14302167
> 
> 赞同：1
> 
> 时间：2013-01-13T09:16:20.543
> 
> 标签：mysql, drupal

我是 Drupal 的新手，我在 drupal 数据库中有一个表。我想查询它的所有内容并以表格格式显示。每当我执行查询时，链接都会将我定向到空白页面，但什么也没有出现。我已附上 PhP 代码以供参考。任何帮助将不胜感激。

```
 <?php
  $header = array('Name', 'Age', 'Sex','University');
  $rows = array();

  $sql = 'SELECT Name, Age, Sex,University FROM {data_pulling} ORDER BY Name';
  $res = db_query($sql);
  while ($row = db_fetch_array($res)) {
    $rows[] = $row;
  }

  print theme('table', $header, $rows);
?> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-13T10:30:46.040

猜测您正在使用 Drupal 7，但正在尝试使用 Drupal 6 中的 API 函数。

试试这个

```
foreach ($res as $row) {
  $rows[] = (array) $row;
}

print theme('table', array('rows' => $rows, 'header' => $header)); 
```

查看[db_query](http://api.drupal.org/api/drupal/includes%21database%21database.inc/function/db_query/7)和[theme_table](http://api.drupal.org/api/drupal/includes%21theme.inc/function/theme_table/7)的文档以获取更多信息

# c++ - std::vector 内存操作的安全性

> ID：14302168
> 
> 赞同：1
> 
> 时间：2013-01-13T09:16:23.400
> 
> 标签：c++, casting

我有以下代码

```
size_t returnSize(const char* s)
{
       string string(s);
       return string.size();
};

size_t returnSize(const int& i)
{
       return sizeof(i);
};

template<typename T>
vector<char> Serialize(const T& t)
{
    T* pt = new T(t);
    vector<char> CasttoChar;

    for (int i =0 ;i<returnSize(t);i++)
    {
        CasttoChar.push_back(reinterpret_cast<const char*>(pt)[i]);
    }
    delete pt;
    return CasttoChar;
};
template<typename T>
T DeSerialize(const vector<char> cstr)
{
    T* a = (T*)(&cstr[0]);

    return *a;
}

int _tmain(int argc, _TCHAR* argv[])
{
    int x = 97;
    vector<char> c = Serialize(x);
    cout << DeSerialize<int>(c) << endl;

    string k = "blabla";
    vector<char> c3 = Serialize(k.c_str());
    cout << DeSerialize<const char*>(c3) << endl;

    system("PAUSE");
    return EXIT_SUCCESS;
}

//output is 
//97
//blabla 
```

这条线路`T* a = (T*)(&cstr[0]);`安全吗？

另外，我尝试`reinterpret_cast<T*>(&cstr[0]);`了，`T* a = (T*)(&cstr[0]);`但编译器抱怨无法将 const char* 转换为 int*。那么为什么 C 风格的演员表会起作用呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-13T09:27:15.307

参考标准

**为什么 reinterpret_cast 失败？**

> 5.2.10 重新解释演员表 [expr.reinterpret.cast]
> 
> reinterpret_cast 运算符不应抛弃 constness (5.2.11)。整数、枚举、指针或指向成员类型的表达式可以显式转换为它自己的类型；这样的强制转换会产生其操作数的值。

**我应该使用 C Cast 吗？** 不，使用 C Cast 而不是 C++ Cast 总是不安全的。您正在尝试删除作为 UB 的对象的常量。使用 reinterpret_cast，实际上会捕获此错误，并在编译期间告知您潜在的陷阱。

你应该`const_cast`在这种情况下实际使用。`const`将对象转换为非`const`对象的唯一合法方法

**但是为什么 C Cast 有效**

引用问题[何时应使用 static_cast、dynamic_cast 和 reinterpret_cast？](https://stackoverflow.com/questions/332030/when-should-static-cast-dynamic-cast-and-reinterpret-cast-be-used)

> C 样式转换被定义为以下成功的第一个：
> 
> ```
> const_cast
> static_cast
> static_cast, then const_cast
> reinterpret_cast
> reinterpret_cast, then const_cast 
> ```

幸运的是，它尝试了`const_cast`第一个。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-13T09:25:50.913

C 风格的演员表之所以有效，是因为它需要许多步骤才能使演员表成功。它使用以下成功的第一个：

```
const_cast
static_cast
static_cast + const_cast
reinterpret_cast
reinterpret_cast + const_cast 
```

在这种情况下，它正在执行最“强大”的演员阵容， a `reinterpret_cast`to`const int *`后跟`const_cast`to `int*`。

单独不会编译，`reinterpret_cast`因为你正在抛弃 const-ness。`const_cast`需要强制转换为`int*`。但是，做一个`reinterpret_cast`to`const int*`会很好。

顺便说一句，您所做的通常是不安全的，除非您使用编译器扩展来确保您要反序列化的任何用户定义类型都不会被填充。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-13T09:25:32.397

C ++ 中的 C 样式强制转换并不是一个好主意，因为您通过了阻止您删除 const 或任意更改类型的检查。如果你想让代码按原样工作，你首先需要 const_cast 然后 reinterpret_cast，但**要**尽量避免 const 强制转换。为了避免使用 reinterpret_cast 的警告，只需将 a 声明为`const T*`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-13T09:26:29.633

坚持使用 C++ 强制转换。不起作用的原因`reinterpret_cast`是你抛弃了 constness，这并不酷；您必须为此使用 a `const_cast`，而您不应该这样做。C 强制转换忽略了这一点。

话虽如此，你想在这里实现什么？您可以有效地转换为`char`数组并`memcpy`ing，而不会带来效率。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-13T10:23:34.633

很抱歉在这里插话，但你的代码在几个方面被破坏了，演员表只是其中之一。关于强制转换，一旦您在不仅仅是一个简单的 int 左右但需要构造函数的东西上使用从/到向量的转换，它就会失败。无论如何，不​​幸的是，从`char const*`到`void const*`到的两步转换`T const*`是必要的。

现在，其他问题：

*   用一个零大小的字符串尝试整个事情。这现在也应该完全回答您的实际问题：不，这不安全。
*   您正在返回一个指向 char 的指针`DeSerialize<char const*>()`。该指针指向给定向量所拥有的内存，该向量按值传递，从该函数返回后不复存在！它似乎起作用是纯粹的运气。
*   即使您设法以某种方式`char const*`从函数中返回 a，请考虑现在谁拥有该内存。关键是这个所有者也必须释放内存。考虑使用模板的特殊化`std::string`并使变体不编译。`char const*`
*   一般来说，如果你是认真的说这段代码，请开始添加单元测试。它现在可能会减慢您的速度，但可以避免在您离开时出现错误，从而总体上节省时间。搜索“测试驱动开发”。
*   没有任何东西可以保证字符串是 NUL 终止的。
*   除非必须，否则不要使用 new/delete，更喜欢“普通”堆栈变量。如果这样做，请注意在发生异常时正确释放内存（来自 push_back()）。使用 auto_ptr (C++98) 或 unique_ptr (C++11) 确保内存被正确释放。

# emacs - 使用邪恶键绑定时，emacs 中的 Ctrl+U

> ID：14302171
> 
> 赞同：49
> 
> 时间：2013-01-13T09:16:51.600
> 
> 标签：emacs, elisp, evil-mode

我正在使用美妙的 evil 包进行 emacs 中的 vim 绑定。

一个不正确的键是`Ctrl`+ `U`。它仍然是 emacs 前缀，而不是“up”。

有人在我的 .emacs 的一些 lisp 代码中对此有解决方案吗？

谢谢。

* * *

## 回答 #1

> 赞同：56
> 
> 时间：2013-09-17T13:58:41.063

有一个变量可以添加到您的`.emacs`

```
(setq evil-want-C-u-scroll t) 
```

它需要出现在调用 to 之前`(require 'evil)`。

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2014-05-17T20:10:22.933

或者，定义自己的键绑定很容易，并且`evil`API 足够丰富，可以让它超级简单：

```
(define-key evil-normal-state-map (kbd "C-u") 'evil-scroll-up)
(define-key evil-visual-state-map (kbd "C-u") 'evil-scroll-up)
(define-key evil-insert-state-map (kbd "C-u")
  (lambda ()
    (interactive)
    (evil-delete (point-at-bol) (point)))) 
```

我不得不走这条路，因为`evil-want-C-u-scroll`对我来说功能不正常。

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2016-10-03T07:46:16.877

为了让[bling](https://stackoverflow.com/a/18851955/1293385)的答案适用于使用 John Wiegley 的[use-package](https://github.com/jwiegley/use-package)的任何人，请确保在该`:init`部分中定义它，如下所示：

```
(use-package evil
 :ensure t
 :init
 (setq evil-want-C-u-scroll t)
 :config
 (evil-mode 1)
 ;; snip...
) 
```

高温高压

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2013-05-02T02:11:35.267

Vim`C-u`是半屏向上翻页。我使用以下方法复制了它，

```
(define-key evil-normal-state-map (kbd "C-u") 'evil-scroll-up) 
```

从`C-h f evil-scroll-up`,

> （邪恶向上滚动 COUNT）
> 
> 向上滚动窗口和光标 COUNT 行。默认为屏幕的一半。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-13T15:49:27.973

vim`C-u`不是“上一行”，它更像是向上翻页。我不知道如何复制确切的行为，但您可以尝试`C-b`(evil-scroll-page-up) 或 map`C-k`上`C-j`/下 10 行。

```
(global-set-key (kbd "C-k") (lambda () (interactive) (previous-line 10)))
(global-set-key (kbd "C-j") (lambda () (interactive) (next-line 10))) 
```

密钥对`C-u`Emacs 也非常重要，因此您可能无论如何都不应该覆盖它。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2017-01-27T17:08:39.677

为了增加[melleb](https://stackoverflow.com/a/39826709/3199242)的答案，我还定义了 evil-want-Cu-scroll 时的组合键：

```
(use-package evil
:ensure t
:init
(setq evil-want-C-u-scroll t)

(when evil-want-C-u-scroll
   (define-key evil-insert-state-map (kbd "C-u") 'evil-scroll-up)
   (define-key evil-normal-state-map (kbd "C-u") 'evil-scroll-up)
   (define-key evil-visual-state-map (kbd "C-u") 'evil-scroll-up)
   (define-key evil-motion-state-map (kbd "C-u") 'evil-scroll-up))

:config
(evil-mode 1)
...
) 
```

这适用于 GNU Emacs 24.4.1

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-01-13T10:26:56.147

首先，回答你的问题：

```
(define-key evil-insert-state-map  "\C-u" 'previous-line)
(define-key evil-normal-state-map  "\C-u" 'previous-line)
(define-key evil-replace-state-map "\C-u" 'previous-line)
(define-key evil-visual-state-map  "\C-u" 'previous-line)
(define-key evil-motion-state-map "\C-u" 'previous-line) 
```

由于我无法真正测试自己（没有邪恶），如果这些不起作用，请尝试以下方法：

代替

```
(define-key evil-motion-state-map "\C-u" 'previous-line) 
```

和

```
(define-key evil-motion-state-map "cu" 'previous-line) 
```

为您想要的任何邪恶模式执行此操作/这是必要的。

此外，也许有一个“邪恶”版本的`up`，您可能想要绑定它。

另外，如果我错了，请纠正我，但我很确定邪恶的“船”在这些键绑定的某处带有功能/有用的“向上”，也许在某处阅读它。

# android - 水平类别视图

> ID：14302172
> 
> 赞同：0
> 
> 时间：2013-01-13T09:16:53.667
> 
> 标签：android, android-layout, android-view

我有一个类别列表。我想将它们添加到水平滚动类型的视图中。但反过来，我也希望该列表仅包含该类别的图像和文本。当我滑动时，它应该直接来到列表的一个对象，它不应该位于中间的某个地方。一个对象几乎涵盖了我应该如何实现它？

# c# - 使用 JSON 在局部视图中打开 Google 地图

> ID：14302174
> 
> 赞同：0
> 
> 时间：2013-01-13T09:17:00.820
> 
> 标签：c#, asp.net-mvc, razor, google-maps-api-3, partial-views

我正在尝试使用 JSON 在局部视图中显示 Google 地图。我已经在普通视图中尝试过代码，它工作得很好。

我有以下内容：-

局部视图 ShowMap.cshtml

```
@using Microsoft.Web.Helpers

<script src="~/Scripts/jquery-1.8.3.min.js"></script>
<div class="experienceRestrictedText">
    @Maps.GetGoogleHtml("1, Redmond Way, Redmond, WA", width: "400", height: "400")
</div> 
```

Index.cshtml（部分视图启动的地方）

```
 $('.modal_link_map').on('click', function (e) {
        $('.modal_part').show();
        var id = $(this).attr('data-id');
        var context = $('#tn_select').load('/Experience/ShowMap?id=' + id, function () {
            initSelect(context);
        });
        e.preventDefault();
        return false;
    }); 
```

控制器动作如下：-

```
 public ActionResult ShowMap()
        {
        _ItemID = Convert.ToInt32(Request.QueryString["id"]);

        viewModel.ExperienceViewModel.Experience =     unitOfWork.ExperienceRepository.GetByID(_ItemID);

        return PartialView(viewModel);
        } 
```

我是否需要包含其他任何内容才能使此地图正常工作？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-13T10:30:37.180

我不熟悉`@Maps.GetGoogleHtml`助手，但我担心这个助手包含以下脚本：

```
<script src="//maps.google.com/maps/api/js?sensor=false" type="text/javascript"></script> 
```

除了这个脚本不能异步加载，因为它用于`document.write()`加载实际的 API。要完成这项工作，您应该指定一个`callback`参数。这是您的部分内容的样子：

```
<div class="experienceRestrictedText">
    <script src="//maps.google.com/maps/api/js?sensor=false&callback=initialize" type="text/javascript"></script>
    <script type="text/javascript">
        function initialize() {
            var map = new google.maps.Map(document.getElementById("map"), { zoom: 14, center: new google.maps.LatLng(47.652437, -122.132424), mapTypeId: google.maps.MapTypeId['ROADMAP'] });
            new google.maps.Geocoder().geocode({ address: '1, Redmond Way, Redmond, WA' }, function (response, status) {
                if (status === google.maps.GeocoderStatus.OK) {
                    var best = response[0].geometry.location;
                    map.panTo(best);
                    new google.maps.Marker({ map: map, position: best });
                }
            });
        }
    </script>
    <div class="map" id="map" style="width:400px; height:400px;"></div>
</div> 
```

注意回调参数是如何传递给`http://maps.google.com/maps/api/js`脚本的，地图的实际初始化是在这个回调中完成的。

另请注意，我已从部分中删除了 jquery 脚本。我猜想 jQuery 已经加载到您的布局中，因为您似乎正在使用它来附加到`.on()`处理程序。

作为替代方案，您可以将 包含`<script src="//maps.google.com/maps/api/js?sensor=false" type="text/javascript"></script>`在主视图中，但是一旦您加载了部分， `@Maps.GetGoogleHtml`助手将再次包含它。

就我个人而言，我不是这类助手的忠实粉丝，因为它们完全掩盖了潜在的调用，使您无法控制和理解正在发生的事情。

# c# - 在后面的代码中存储变量的最佳方法是什么？

> ID：14302178
> 
> 赞同：4
> 
> 时间：2013-01-13T09:17:27.357
> 
> 标签：c#, asp.net

我正在使用 asp.net 和 c#。对于在不同方法和事件中使用的每个页面，我有一些变量，例如`CurrentCulture`, `SignedinUserEmail`，`MenuItemID`哪种方式最适合保存它们的值？

```
private string _CurrentCulture;
private string CurrentCulture
{
    get
    {
        return _CurrentCulture;
    }
    set
    {
        _CurrentCulture = value;
    }
} 
```

或者

```
private string CurrentCulture
{
    get
    {
        if (ViewState["CurrentCulture"] == null)
        {
            return "en-UK";
        }
        else
        {
            return ((string)ViewState["CurrentCulture"]);
        }
    }
    set
    {
        ViewState["CurrentCulture"] = value;
    }
} 
```

它们的值可能由查询字符串或其他局部变量分配。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-13T09:39:42.810

我们可以最好地将每一个用作：

*   如果您在回帖后需要它，请将其保存到 **viewstate 。**如果您不回帖，则没有理由将其保存在那里。
*   如果您想从页面中获取它，请将其保存**到变量**中，或者将其发送到页面上的其他自定义控件。
*   如果您想在其他页面上使用它，请将其保存**到会话中 - 例如，如果某些用户选择了喜欢的语言，则将该选择保存在会话中并在下一页中使用。**
*   如果您赢得了用户能够保存 url 并一起保留该参数，请使用 url参数**。**

,最好保存在会话中`CurrentCulture`，`SignedinUserEmail`因为您想在每次通话、每次页面查看时使用它，无论是否回发。

# mysql - 复杂的 SQL 查询：像树遍历一样选择

> ID：14302179
> 
> 赞同：2
> 
> 时间：2013-01-13T09:17:33.457
> 
> 标签：mysql, sql, sql-server, oracle, db2

考虑以下`(1:N)`关系：

`[entity: user] <------ rid key ------> [entity: rid]`.

将两个表中的数据视为：

```
select * from user;
user-id        rid-key
a-basa         a
b-basa         b
a.a-basa       a.a   
a.b-basa       a.b
a.a.a-basa     a.a.a
a.a.b-basa     a.a.b
a.b.a-basa     a.b.a
a.b.b-basa     a.b.b
a.b.b.a-basa   a.b.b.a
a.b.b.b-basa   a.b.b.b

select * from rid;

rid-key    parent-rid    enabled
a            null        true
b            null        true
a.a          a           true 
a.b          a           false
a.a.a        a.a         true
a.b.a        a.b         true
a.b.b        a.b         true
a.b.b.a      a.b.b       true
......
n rows 
```

我需要设计一个输入 a 的单个查询（不是存储过程）`user-id`，并考虑以下事实：

如果用户被授予对 a 的访问权限`rid`，那么它也可以访问`parent rid`给`rid`定的 -`rid`本身已启用`(enabled = true).`

这应该一直持续到我们到达`root rid`, 即。`parent rid`财产是`null`。

在上面的示例中，用户可访问的摆脱列表`'a.b.b.a-basa'`将是`:`

```
a.b.b.a
a.b.b
a.b 
```

和`a.a.a-basa`：

```
a.a.a
a.a
a 
```

我们可以使用单个查询获取此列表吗？任何 sql 供应商都可以。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T09:43:32.670

甲骨文解决方案：

```
SQL> select u.user_id, r.rid_key, r.parent_rid, r.enabled
  2    from users u
  3         inner join rid r
  4                 on r.rid_key = u.rid_key
  5   start with u.user_id = 'a.a.a-basa'
  6   connect by prior r.parent_rid = r.rid_key and prior enabled = 'true'
  7  /

USER_ID      RID_KEY PAREN ENABL
------------ ------- ----- -----
a.a.a-basa   a.a.a   a.a   true
a.a-basa     a.a     a     true
a-basa       a       null  true

SQL> select u.user_id, r.rid_key, r.parent_rid, r.enabled
  2    from users u
  3         inner join rid r
  4                 on r.rid_key = u.rid_key
  5   start with u.user_id = 'a.b.b.a-basa'
  6   connect by prior r.parent_rid = r.rid_key and prior enabled = 'true'
  7  /

USER_ID      RID_KEY PAREN ENABL
------------ ------- ----- -----
a.b.b.a-basa a.b.b.a a.b.b true
a.b.b-basa   a.b.b   a.b   true
a.b-basa     a.b     a     false 
```

[http://sqlfiddle.com/#!4/d529f/1](http://sqlfiddle.com/#!4/d529f/1)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-13T11:17:42.173

分层数据有多种模型。大多数模型（如**Adjacency List**）需要对某些查询进行某种递归。通过使用**物化路径**模型的设计，无需递归查询即可实现您想要的。

**[在SQL-fiddle test-mysql](http://sqlfiddle.com/#!2/355e0/6)**的 MySQL 中测试（没有递归查询）。如果您修改字符串连接部分，它可以很容易地转换为其他 DBMS：

```
SELECT 
     COUNT(*)-1 AS steps_up,
     rid2.rid_key AS ancestor_rid_key
FROM 
    u2 
  JOIN
    rid 
      ON u2.rid_key = rid.rid_key
      OR u2.rid_key LIKE CONCAT(rid.rid_key, '.%')
  JOIN
    rid AS rid2 
      ON rid.rid_key = rid2.rid_key
      OR rid.rid_key LIKE CONCAT(rid2.rid_key, '.%')
WHERE
    u2.userid = 'basa'
  AND
    u2.rid_key = 'a.b.b.a' 
GROUP BY 
    rid2.rid_key, rid2.enabled 
HAVING 
    COUNT(*) + (rid2.enabled = 'true') 
  = SUM(rid.enabled = 'true') + 1 ; 
```

它使用此视图，这不是严格需要的，但它表明正在存储您在列`user.user_id`中已有的数据。`rid_key`

```
CREATE VIEW u2 AS
SELECT 
    SUBSTRING_INDEX(user_id, '-', -1) AS userid
  , rid_key
FROM user ; 
```

还有一点需要注意的是，上面的查询根本不使用该`parent_rid`列。而且我确信它可以进一步改进。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-13T09:34:16.107

在 Oracle 中，您可以使用分层查询来实现此目的。搜索 CONNECT BY 或查看这篇[文章](http://psoug.org/reference/connectby.html)。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-13T09:34:28.973

这应该让你的球滚动。答案适用于 SQL Server 2005 及更高版本

```
DECLARE @UsersRIDkey VARCHAR(10) = 'a.a.a'
;WITH UserCTE (userid, ridkey) AS
(
    SELECT 'a-basa',         'a'        UNION ALL
    SELECT 'b-basa',         'b'        UNION ALL
    SELECT 'a.a-basa',       'a.a'      UNION ALL
    SELECT 'a.b-basa',       'a.b'      UNION ALL
    SELECT 'a.a.a-basa',     'a.a.a'    UNION ALL
    SELECT 'a.a.b-basa',     'a.a.b'    UNION ALL
    SELECT 'a.b.a-basa',     'a.b.a'    UNION ALL
    SELECT 'a.b.b-basa',     'a.b.b'    UNION ALL
    SELECT 'a.b.b.a-basa',   'a.b.b.a'  UNION ALL
    SELECT 'a.b.b.b-basa',   'a.b.b.b'  
)
,RidCTE (ridkey, parentrid,    isenabled) AS
(
    SELECT 'a',            null,        1   UNION ALL
    SELECT 'b',            null,        1   UNION ALL
    SELECT 'a.a',          'a',         1   UNION ALL
    SELECT 'a.b',          'a',         0   UNION ALL
    SELECT 'a.a.a',        'a.a',       1   UNION ALL
    SELECT 'a.b.a',        'a.b',       1   UNION ALL
    SELECT 'a.b.b',        'a.b',       1   UNION ALL
    SELECT 'a.b.b.a',      'a.b.b',     1   
)
,RidHierarchyCTE AS
(
    SELECT *
    FROM RidCTE
    WHERE ridkey = @UsersRIDkey
    UNION ALL
    SELECT R.ridkey, R.parentrid, R.isenabled
    FROM RidHierarchyCTE    H
    JOIN RidCTE             R ON R.ridkey = H.parentrid
)
SELECT ridkey
FROM RidHierarchyCTE 
```

# java - 如何在向 JFrame 添加组件之间添加时间延迟？

> ID：14302180
> 
> 赞同：2
> 
> 时间：2013-01-13T09:17:41.013
> 
> 标签：java, swing, timer, repaint, jcomponent

我创建了一个 JFrame，它包含一个 JPanel。我创建了许多 JLabel。我可以将 JLabels 添加到 JPanel，并正确显示它们。但我想实现它们，以便它们**按顺序显示**；每个要显示的 JLabel 之间的时间延迟。

搜索 StackOverfLow 后，我尝试了一些代码，但没有效果！**那么如何使用计时器通过设置时间延迟使组件（标签）一个接一个地显示。**

*我不想修复我的代码，尤其是在答案中。* **只是** *展示如何以延迟的方式显示任何类型的组件，每个组件在一段时间后显示。就这些。我提供了我的代码来展示我为解决问题所做的努力。*

首先，这是要使用的 JLabel 的子类：（没问题）

```
import java.awt.Color;
import java.awt.Dimension;
import java.awt.Font;
import java.awt.GradientPaint;
import java.awt.Graphics;
import java.awt.Graphics2D;
import javax.swing.BorderFactory;
import javax.swing.JLabel;

public class DLabel extends JLabel
{
    Dimension size = new Dimension(70, 75);
    Font font = new Font(Font.SANS_SERIF, 12, 35);

    public DLabel(String t)
    {
        this.setPreferredSize(size);
        this.setBorder(BorderFactory.createBevelBorder(1, Color.white, Color.black));
        this.setVerticalAlignment(JLabel.CENTER);
        this.setHorizontalAlignment(JLabel.CENTER);
        this.setText(t);
        this.setFont(font);
    }

    public void paintComponent(Graphics g)
    {
        super.paintComponent(g);
        Graphics2D g2d = (Graphics2D) g;
        Color color1 = new Color(226, 218, 145);
        Color color2 = color1.brighter();
        int w = getWidth();
        int h = getHeight();
        GradientPaint gp = new GradientPaint(
                0, 0, color1, 0, h, color2);
        g2d.setPaint(gp);
        g2d.fillRect(0, 0, w, h);
        super.paintComponent(g);
    }
} 
```

使用该类的另一个`DLabel`类：

```
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import javax.swing.JFrame;
import javax.swing.JLabel;
import javax.swing.JPanel;
import javax.swing.SwingUtilities;
import javax.swing.Timer;
import javax.swing.UIManager;

public class DelayedLabels extends JPanel
{

    static JFrame frame;
    Timer timer;   //timer to be used for dealy

    DLabel card_1;  //Defining the DLabels
    DLabel card_2;
    DLabel card_3;
    JLabel[] labelsArray;

    public DelayedLabels()
    {
        this.setLayout(null);

        card_1 = new DLabel("1");
        card_2 = new DLabel("2");
        card_3 = new DLabel("3");

        labelsArray = new DLabel[3]; //create the array

        createLabelsArray(); //add the Labels Objects to labelsArray
        setLabelsLocations(labelsArray); // set the locations of the Labels to be displayed on the JPanel
        addLabelsToPanel(labelsArray); //The adding of the Labels to the JPanel
    }

    private void createLabelsArray()
    {
        labelsArray[0] = card_1;
        labelsArray[1] = card_2;
        labelsArray[2] = card_3;
    }

    private void setLabelsLocations(JLabel[] labels)
    {
        int length = labels.length;
        int gap = 10;
        int counter = 10;
        for (int i = 0; i < length; i++)
        {
            labels[i].setBounds(170, counter, 60, 70);
            counter = counter + labels[i].getBounds().height + gap;

        }
    }

    private void addLabelsToPanel(JLabel[] labels)
    {
        for (int i = 0; i < labels.length; i++)
        {
            frame.revalidate();
            frame.repaint();
            this.add(labels[i]);
            timer = new Timer(1000, timerAction); //timer to use with 1000 milliseconds
            timer.start();
        }
    }
    private ActionListener timerAction = new ActionListener() //action to be invoked after each label added
    {
        @Override
        public void actionPerformed(ActionEvent ae)
        {
            frame.revalidate();
            frame.repaint();
        }
    };

    private static void createAndShowGUI()
    {
        frame = new JFrame();
        frame.setSize(600, 700);
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

        DelayedLabels demo = new DelayedLabels();
        demo.setOpaque(true);
        frame.add(demo);
        frame.setVisible(true);
    }

    public static void main(String[] args)
    {
        SwingUtilities.invokeLater(new Runnable()
        {
            @Override
            public void run()
            {
                UIManager.put("swing.boldMetal", Boolean.FALSE);
                createAndShowGUI();
            }
        });
    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-13T09:41:44.837

```
import java.awt.*;
import java.awt.event.*;
import javax.swing.*;

public class DelayedLabels extends JPanel {

    static JFrame frame;
    Timer timer;   //timer to be used for dealy
    JLabel card_1;  //Defining the JLabels
    JLabel card_2;
    JLabel card_3;
    JLabel[] labelsArray;
    ActionListener listener;

    public DelayedLabels() {
        listener = new ActionListener() {

            int i = 0;

            @Override
            public void actionPerformed(ActionEvent e) {
                Component c = DelayedLabels.this.getTopLevelAncestor();
                DelayedLabels.this.add(labelsArray[i++]);
                c.validate();
                c.repaint();
                if (i==labelsArray.length) {
                    timer.stop();
                }
            }
        };
        this.setLayout(new GridLayout(0, 1, 20, 20));

        card_1 = new JLabel("Label 1");
        card_2 = new JLabel("Label 2");
        card_3 = new JLabel("Label 3");

        labelsArray = new JLabel[3]; //create the array

        createLabelsArray(); //add the Labels Objects to labelsArray
        timer = new Timer(1000,listener);
        timer.start();
    }

    private void createLabelsArray() {
        labelsArray[0] = card_1;
        labelsArray[1] = card_2;
        labelsArray[2] = card_3;
    }

    private static void createAndShowGUI() {
        frame = new JFrame();
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

        DelayedLabels demo = new DelayedLabels();
        demo.setOpaque(true);
        frame.add(demo, BorderLayout.PAGE_START);
        frame.pack();
        frame.setSize(200, 150);
        frame.setVisible(true);
    }

    public static void main(String[] args) {
        SwingUtilities.invokeLater(new Runnable() {

            @Override
            public void run() {
                UIManager.put("swing.boldMetal", Boolean.FALSE);
                createAndShowGUI();
            }
        });
    }
} 
```

# html - 大礼包用户信息

> ID：14302181
> 
> 赞同：0
> 
> 时间：2013-01-13T09:17:42.820
> 
> 标签：html, ruby-on-rails, ruby, ruby-on-rails-3, spree

我正在使用 Spree 作为我正在构建并需要自定义布局的网站的电子商务解决方案，污损选项很棒，但我已经为我想要使用的应用程序的其余部分设置了布局，因此没有任何变化在我的网站的主要部分和商店之间。

在查看了 spree 源代码后，我已经能够将大部分基础架构转移到我自己的新模板中，但我遇到了一个绊脚石。在搜索框上方的默认模板中，有登录/帐户和注销链接，这些链接基于对代码的一些挖掘，呈现在“标题”部分中，该部分本身呈现导航栏，该导航栏呈现搜索栏部分，以及主导航栏它显示了指向主页和购物车的链接，但没有提到用户进/出的东西。注释掉标题部分的呈现会删除所有这些东西，但也会删除用户信息，据我所知，这些信息在任何地方都没有提到......

有谁知道它在默认狂欢布局中的哪个位置实现了此代码以显示登录/注销帐户链接，我可以通过基本链接相对简单地做到这一点，但宁愿了解 Spree 如何自己实现这一点，我试图保持我的布局与核心代码的任何更新兼容。

任何帮助将不胜感激，谢谢！

编辑：为清楚起见

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-07-16T16:58:11.790

在Spree 的**3.0.1**版和其他旧版本上，用户功能不是由核心本身处理的。用户由[Spree Auth (Devise)](https://github.com/spree/spree_auth_devise) Spree 扩展处理。此扩展程序默认包含在新的 Spree 应用程序中。该扩展使用[污损覆盖](https://github.com/spree/spree_auth_devise/blob/3-0-stable/app/overrides/auth_shared_login_bar.rb)来添加此功能。有趣的是，此覆盖使用的部分不是在扩展本身上，而是在 Spree 前端文件上。如果您希望实现自定义用户模块，我假设使该组件可重用。这是部分的代码：

```
<% if spree_current_user %>
  <li><%= link_to Spree.t(:my_account), spree.account_path %></li>
  <li><%= link_to Spree.t(:logout), spree.logout_path %></li>
<% else %>
  <li id="link-to-login"><%= link_to Spree.t(:login), spree.login_path %></li>
<% end %> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T11:19:58.653

在 RDR 主题中找到解释这一点的代码，仍然不确定为什么它没有出现在默认的狂欢代码中，也许是数据挂钩？

RDR 的做法：

```
<% if current_user %>
  <%= link_to t('logout'), destroy_user_session_path, :class => "cart" %>
  <%= link_to t('my_account'), account_path, :class => "cart" %>
<% else %>
  <%= link_to t('log_in'), login_path, :class => "cart" %>
<% end %> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-16T12:41:37.770

覆盖菜单

```
<% if current_user %>
    <%= link_to t(:logout), spree.destroy_user_session_path %>
    <%= link_to t(:my_account), spree.account_path %>
<% else %>
   <%= link_to t(:login), spree.login_path %>
<% end %> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-11-05T06:21:57.180

从**Spree 2.3.2**开始，同样的事情可以通过以下方式完成：

```
 <h2>Your Account</h2>
          <ul>
            <% if spree_current_user %>            
              <li><%= link_to t('My Account'), account_path, :class => "cart" %></li>       
            <% else %>                
              <li><%= link_to t('Log In'), login_path, :class => "cart" %></li>
              <li><%= link_to t('Sign Up'), registration_path, :class => "cart" %></li>
            <% end %>              
          </ul> 
```

# java - java秒表程序-一起使用System.nanoTime()和TimerTask

> ID：14302187
> 
> 赞同：0
> 
> 时间：2013-01-13T09:18:00.257
> 
> 标签：java, timertask

我正在用 Java 编写一个小程序以用作秒表，但我不确定我是否在效率和准确性方面使用了正确的方法。

从我在 stackoverflow 上读到的内容看来， System.nanoTime() 是测量经过时间时使用的最佳方法。是对的吗？它在多大程度上精确到最接近的纳秒、微秒、毫秒等。

此外，当我的秒表运行时，我希望它每秒显示当前经过的时间。为此，我计划使用 TimerTask 并安排它每秒报告时间（转换为秒）。这是最好的方法吗？这对准确性有影响吗？

最后，在我当前的设计中，这会占用大量计算机资源，例如处理时间。

PS 抱歉现在不能分享太多代码，因为我刚刚开始设计它。我只是不想将时间浪费在效率低下并制作不准确计时器的设计上。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-13T09:26:11.740

是的，您可以使用它定期运行`java.util.Timer`并`TimerTask`每秒更新您的视图。但是，我认为您不必处理 nono 秒，而实际上您只需要秒的分辨率。使用常规`System.currentTimeMillis()`.

# python - 链接 Python 文件帮助

> ID：14302189
> 
> 赞同：1
> 
> 时间：2013-01-13T09:18:20.880
> 
> 标签：python

我了解如何实际链接 python 文件，但是，我不明白如何从这些链接文件中获取变量。我试图抓住它们，但我不断收到 NameError。

我该怎么做呢？我想链接文件的原因是简单地整理我的脚本，而不是让它长 10000000000 行。另外，在导入的 python 脚本中，我是否必须再次导入所有内容？另一个问题，我在使用其他脚本函数时是否使用 self 函数？

IE;

主脚本：

```
import sys, os
import importedpyfile 
```

导入的 Py 文件

```
import sys, os 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-13T09:27:46.233

> 我了解如何实际链接 python 文件，但是，我不明白如何从这些链接文件中获取变量。我试图抓住它们，但我不断收到 NameError。

你是怎么做到的？发布更多代码。例如，以下工作：

文件1.py

```
#!/usr/bin/env python

from file2 import file2_func, file2_variable

file2_func()
print file2_variable 
```

文件2.py：

```
#!/usr/bin/env python

file2_variable = "I'm a variable!"

def file2_func():
    print "Hello World!" 
```

> 另外，在导入的 python 脚本中，我是否必须再次导入所有内容？

不，当 python 解释器读取该文件时，应该导入模块。

> 另一个问题，我在使用其他脚本函数时是否使用 self 函数？

不，这通常是为了访问班级成员。请参阅[python 自我解释](https://stackoverflow.com/questions/2709821/python-self-explained "蟒蛇自我解释")。

导入文件的方法也不止一种。有关一些解释，请参阅其他答案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-13T09:22:12.870

我认为您要问的是如何从 .py 文件访问全局变量，而无需处理命名空间。

在您的主脚本中，将调用替换为`import importedpyfile`这样说

```
from importedpyfile import * 
```

理想情况下，您按照自己的方式保留代码。但是，只需使用导入的pyfile 命名空间引用这些全局变量。

例如

```
import importedpyfile
importedpyfile.MyFunction()  # calls "MyFunction" that is defined in importedpyfile.py 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-13T09:22:03.080

在 C/C++ 将库链接到可执行文件的意义上，Python 模块不是“链接”的。Python**导入**操作会创建一个引用导入模块的名称；没有这个名字，就没有（直接）访问另一个模块的方法。

# ios - 从 Settings.bundle 获取切换

> ID：14302190
> 
> 赞同：2
> 
> 时间：2013-01-13T09:18:25.847
> 
> 标签：ios, settings, bundle

很简单的问题。如何从 settings.bundle 中获取值。在这种情况下，一个布尔值。我看过[这个链接](http://greghaygood.com/2009/03/09/updating-nsuserdefaults-from-settingsbundle)，但它很旧，我不知道把代码放在哪里。所以我自己做了一些实验并想出了这个：

```
NSUserDefaults *defaults = [NSUserDefaults standardUserDefaults];
[defaults synchronize];

id toggleSwitchValue = [defaults objectForKey:@"debuger"];
BOOL boolToggle = [toggleSwitchValue boolValue];

if (boolToggle) {

    NSLog(@"Developer: YES");

}

else {

    NSLog(@"Developer: NO");
} 
```

但这没有用。顺便说一句，我把它放在 Appdelegate.m 下

```
- (void)applicationDidBecomeActive:(UIApplication *)application 
```

我也尝试使用[来自苹果的这个示例代码，](https://developer.apple.com/library/ios/#samplecode/AppPrefs/Introduction/Intro.html#//apple_ref/doc/uid/DTS40007799)但它已经过时了，我跟着它并得到了一堆错误

问候

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-13T10:21:36.520

确保使用您在 中提供的相同密钥`Settings.bundle`。

```
id toggleSwitchValue = [defaults objectForKey:@"debugger"]; 
```

# visual-c++ - 创建了指针但如何在类中写入？

> ID：14302204
> 
> 赞同：0
> 
> 时间：2013-01-13T09:20:44.627
> 
> 标签：visual-c++

我已经初始化了队列 *q1, *q2; 但它无法在我的 Queue 类中创建 Queue

主要的

```
Queue *q1, *q2; // Global variable 
```

队列类

```
// codes......

Queue::Queue() { // default constructor
    size = 0;
    front = 0;
    rear = Q_MAX_SIZE -1;
}

Queue::~Queue() { 
    while(!isEmpty()) {
        dequeue();
    }
}

void Queue::enqueue(Car c) {
    if (!isFull()) {
        rear = (rear + 1) % Q_MAX_SIZE; // circular array
        carQueue[rear] = c;
        size++;
    } else {
        cout << "Queue is currently full.\n";
    }
}

// codes..... 
```

在调试模式下，我似乎无法使用默认构造函数初始化队列，它无法读取任何大小，前后。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T09:32:13.463

该声明： `Queue *q1, q2;`

创建一个指针变量 ( `Queue*`) 和一个类型为 的普通变量`Queue`。只有对于`q2`普通类型`Queue`的，构造函数才会被调用。您看不到构造函数被调用（在调试模式下），只是因为它被称为 BEFORE `main`，（或`WinMain`） - 因为它是全局变量。全局变量在`main`例程之前初始化。

您需要在构造函数本身上放置一个断点 - `Queue::Queue()`。

希望这可以帮助。

# java - 制作 Android 数据库的副本

> ID：14302207
> 
> 赞同：2
> 
> 时间：2013-01-13T09:21:10.133
> 
> 标签：java, android, database, android-sqlite

我一直在尝试创建应用程序数据库的副本并将其保存到手机的根目录，但没有运气。我的日志去：

**第一步**

**绝地求生**

显然`if (sd.canWrite())`是第一个错误？有人能帮忙吗？我的想法不多了。谢谢

```
public void save() {

        File data = Environment.getDataDirectory();
        File sd = new File(Environment.getExternalStorageDirectory().toString());
        sd.mkdirs();
        Log.d("XXXXXXXXXXXXXXXXXXX", "STEP ONE");
        if (sd.canWrite()) {
            Log.d("XXXXXXXXXXXXXXXXXXX", "STEP TWO");
            String currentDBPath = "/data/com.test.example/databases/example_db";
            String backupDBPath = "/mytest" + "version_two" + ".db";
            File currentDB = new File(data, currentDBPath);
            File backupDB = new File(sd, backupDBPath);
            Log.d("XXXXXXXXXXXXXXXXXXX", "STEP THREE");
            if (currentDB.exists()) {
                Log.d("XXXXXXXXXXXXXXXXXXX", "STEP FOUR");
                FileChannel src;
                try {
                    Log.d("XXXXXXXXXXXXXXXXXXX", "STEP FIVE");
                    src = new FileInputStream(currentDB).getChannel();
                    FileChannel dst = new FileOutputStream(backupDB)
                            .getChannel();
                    try {
                        Log.d("XXXXXXXXXXXXXXXXXXX", "STEP SIX");
                        dst.transferFrom(src, 0, src.size());
                        src.close();
                        dst.close();
                    } catch (IOException e) {
                        Log.d("XXXXXXXXXXXXXXXXXXX", "STEP ONE DEAD");
                        e.printStackTrace();
                    }
                } catch (FileNotFoundException e) {
                    Log.d("XXXXXXXXXXXXXXXXXXX", "STEP TWO DEAD");
                    e.printStackTrace();
                }
            }
        }else{
            Log.d("XXXXXXXXXXXXXXXXXXX", "STEP DEAD");
        }

    } 
```

**我的清单剪辑 - 我不知道怎么`android:allowBackup="true"`到那里**

```
 <uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" />

    <application
        android:allowBackup="true"
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:theme="@style/AppTheme" >
        <activity 
```

在模拟器输出上：

```
01-13 14:16:13.082: D/XXXXXXXXXXXXXXXXXXX(30105): STEP ONE
01-13 14:16:13.082: D/XXXXXXXXXXXXXXXXXXX(30105): STEP DEAD 
```

在设备输出上：

```
01-13 14:16:13.082: D/XXXXXXXXXXXXXXXXXXX(30105): STEP ONE
01-13 14:16:13.082: D/XXXXXXXXXXXXXXXXXXX(30105): STEP TWO
01-13 14:16:13.082: D/XXXXXXXXXXXXXXXXXXX(30105): STEP THREE
01-13 14:16:13.082: D/XXXXXXXXXXXXXXXXXXX(30105): STEP FOUR
01-13 14:16:13.082: D/XXXXXXXXXXXXXXXXXXX(30105): STEP FIVE
01-13 14:16:13.090: D/XXXXXXXXXXXXXXXXXXX(30105): STEP SIX 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T09:31:04.320

```
 File sd = new File(Environment.getExternalStorageDirectory().toString()); 
```

好吧，既然 Environment.getExternalStorageDirectory() 返回一个文件，你不需要创建一个新实例。你可以这样改变它：

```
 File sd = Environment.getExternalStorageDirectory(); 
```

*   `sd.mkdirs();``/`肯定会失败，因为您在and中没有写权限， 并且`/mnt`指向的目录也`sd`应该已经退出
*   写权限 - `WRITE_EXTERNAL_STORAGE`：您是否将其添加到您的 AndroidManifex 文件中？可能 canWrite() 返回 false 因为您忘记添加权限

# ruby-on-rails - Ruby on Rails - Windows 7 安装，用户名中的非英文字符

> ID：14302211
> 
> 赞同：0
> 
> 时间：2013-01-13T09:21:25.890
> 
> 标签：ruby-on-rails, windows-7, installation

我正在尝试在 Windows 7 上安装 Ruby on Rails，但在配置开始时我立即遇到了问题。这是我第一次尝试 RoR。

[我从http://railsinstaller.org/](http://railsinstaller.org/)下载了 RailsInsaller并成功安装。刚安装完需要配置环境的时候，在cmd中收到一个错误：

```
# Rails Environment Configuration.
open C:\\Users\\\246ero/.ssh/id_rsa failed: No such file or directory.
The system cannot find the path specified.
D:/ROR/RailsInstaller/scripts/config_check.rb:87:in `initialize': No such file o
r directory - C:\Users\|ero/.ssh/id_rsa.pub (Errno::ENOENT)
    from D:/ROR/RailsInstaller/scripts/config_check.rb:87:in `open'
    from D:/ROR/RailsInstaller/scripts/config_check.rb:87:in `<main>' 
```

这个问题的解决方案是什么？或者有没有其他方法可以在 Windows 7 上安装 RoR？谢谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-10-25T08:46:38.543

我知道这是一篇旧帖子，但我遇到了同样的问题，我想我已经找到了解决方案。ssh 试图访问的路径包含该字符“|” Ruby 不喜欢，那是因为你的用户名是“|ero”。

要解决此问题，您应该更改您的 Windows 用户名（这应该可以防止您在以后的设置中遇到很多麻烦），或者更改您的 HOME 环境变量，使其指向不包含任何重音、空格的文件夹或路径中的奇怪字符！然后重新安装 Ruby :)

希望能帮助到你！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-13T10:25:08.460

我已经在 Windows 7 中安装了 Ruby on Rails。要在 Windows7 上安装 ruby​​ on rails，请按照以下步骤操作：

1) 在 windows 7 上安装 ruby​​。下载地址：[http ://rubyinstaller.org/](http://rubyinstaller.org/)

2) 检查 ruby​​ 是否通过此命令正确安装，`ruby -v`如果这给出命令未找到错误，则在环境变量中设置 RUBY_HOME="path/to/ruby/bin"。

3）通过命令安装rails `gem install rails`。

你就完成了。在 Windows7 上享受 Ruby On Rails。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-08-02T16:24:59.157

我遇到了完全相同的问题并找到了解决方案 - 在 Windows XP Pro SP3 下。您应该手动生成 ssh 密钥对。从 bash shell 运行 ssh-keygen 以生成 id_rsa 和 id_rsa.pub。

这很容易，只需单击 3 次鼠标：

开始 - 程序 - Rails 安装程序 - Git Bash

在那里输入“ssh-keygen”。按 Enter 2 或 3 次。你完成了！现在问题消失了。

# java - 春季应用程序中的 CouchBase 日志记录

> ID：14302217
> 
> 赞同：1
> 
> 时间：2013-01-13T09:22:22.967
> 
> 标签：java, spring, couchbase

我在我的spring应用程序中使用couchbase java sdk 1.1，并且couchbase客户端记录到标准输出。

如何禁用 couchbase 客户端的日志记录？我使用 1 个 log4j.xml 文件来配置我的应用程序的所有模块中的日志记录，但 couchbase 客户端似乎忽略了该文件并无论如何都记录到 tomcat 标准输出。

我在 couchbase java sdk 手册中没有找到解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T17:14:54.747

您是否查看过此文档： http: [//www.couchbase.com/docs/couchbase-sdk-java-1.1/java-api-configuring-logging.html](http://www.couchbase.com/docs/couchbase-sdk-java-1.1/java-api-configuring-logging.html)

请务必设置

> net.spy.log.LoggerImpl 环境

可变为

> net.spy.memcached.compat.log.Log4JLogger

能够使用 Log4J。

您可以使用以下代码以编程方式执行此操作：

```
System.setProperty("net.spy.log.LoggerImpl", "net.spy.memcached.compat.log.Log4JLogger"); 
```

# php - 在 PhpStorm 中保存文件时运行单元测试

> ID：14302218
> 
> 赞同：17
> 
> 时间：2013-01-13T09:22:56.397
> 
> 标签：php, unit-testing, automation, phpunit, phpstorm

我已经用 PHPUnit 设置了 PhpStorm 5，我很好奇 PhpStorm 是否有一些功能可以在保存文件时自动运行单元测试。像守望者和守卫。我已经尝试搜索我们心爱的 www 和 PhpStorm 文档，但无法找到解决方案。

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2013-03-22T09:32:27.267

从版本 6 开始，PHPStorm 具有“文件观察器”

*   打开您的项目首选项。
*   从左侧选项列表中选择 File Watchers。
*   单击右侧空白面板底部的 + 符号。
*   选择`<custom>`

您必须为 PHPUnit 设置一个命令行，它不会是集成测试，但您可以将错误输出到控制台（这是一个好的开始！）

您可以使用各种宏选项，因此您可以`$FileNameWithoutExtension$Test.php`在传递给命令行的参数中包含（例如）。

我个人不得不设置两个观察者。第一个检测到对项目文件的修改，第二个检测到对测试文件的更改（第二个没有附加`Test.php`到文件名）我还创建了一个新的项目范围以从第一个观察者中排除测试目录。

您可能还想关闭立即同步，因为这会导致 PHPUnit 在 PHPStorm 自动保存文件时运行。

我的其他设置如下：

*   文件类型：`PHP files (PHP)`
*   范围：`Project excluding tests`
*   程序：`/path/to/php`
*   论据：`/path/to/phpunit --configuration /path/to/phpunit.xml.dist /path/to/tests/$FileNameWithoutExtension$Test.php`
*   工作目录：`$FileDir$`
*   输出路径：`$FileDir$`

未设置输出过滤器，启用语法错误检查，控制台显示错误。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-09-25T09:03:44.673

PHPUnit watcher 被命名为 hot phpunit runner

[https://github.com/slavahatnuke/hot-phpunit-runner](https://github.com/slavahatnuke/hot-phpunit-runner)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-05-16T19:01:35.513

你也可以看看[TDDRunner](https://github.com/Scyks/TDDRunner)

它是在文件更改时自动执行 PHPUnit 的控制台工具。您还可以通过仅执行一个文件或其他任何文件来配置 PHPUnit。

```
/usr/bin/tddrunner --group=test 
```

有[一篇德国文章](http://blog.secu-ring.de/software/call-again-phpunit-test-driven-development-watcher/)提供了更多细节。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-07-21T09:51:15.343

2017 年，Jetbrains 发布了一项允许自动运行测试的功能。它位于`Run`控制台中，因此它链接到运行设置，从而简化了此自动运行的设置。

见[https://blog.jetbrains.com/phpstorm/2017/07/autorun-phpunit-tests-in-phpstorm-2017-2/](https://blog.jetbrains.com/phpstorm/2017/07/autorun-phpunit-tests-in-phpstorm-2017-2/)

# android - Android LayoutInflater

> ID：14302219
> 
> 赞同：0
> 
> 时间：2013-01-13T09:23:11.190
> 
> 标签：android, android-layout

从[参考链接](http://developer.android.com/reference/android/view/LayoutInflater.html)中，以下两行都在做同样的事情。

```
LayoutInflater inflater = (LayoutInflater) context.getSystemService(Context.LAYOUT_INFLATER_SERVICE);  
LayoutInflater inflater = LayoutInflater.from(context); 
```

我不知道哪种方式正确或正确。有人可以指出我有什么区别。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T09:26:42.613

正如你所说，它们是等价的。`LayoutInflater.from(context)`只是前者的捷径，正如您在源代码中看到的那样：

```
public static LayoutInflater from(Context context) {
    LayoutInflater LayoutInflater =
            (LayoutInflater) context.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
    if (LayoutInflater == null) {
        throw new AssertionError("LayoutInflater not found.");
    }
    return LayoutInflater;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-13T09:31:46.100

这是从另一个类获取数据的正确方法

```
LayoutInflater inflater = (LayoutInflater) context.getSystemService(Context.LAYOUT_INFLATER_SERVICE); 
```

# visual-studio-2010 - 在 Visual Studio 2010 中更改启动项目

> ID：14302229
> 
> 赞同：2
> 
> 时间：2013-01-13T09:25:04.927
> 
> 标签：visual-studio-2010, source-control-explorer

我的解决方案资源管理器中有 2 个项目，其中一个与 windows 相关，另一个与 web 相关，现在我想运行 web 项目，但它以 windows 形式运行，所以我想知道如何更改控件以运行 web 项目？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-13T09:28:23.167

您需要将 Web 项目设为启动项目。右键单击 Web 项目并选择`Set As StartUp Project`.

# entity-framework - 在实体框架对象枚举中将虚拟 IList 强制转换为 IEnumerable 吗？

> ID：14302240
> 
> 赞同：0
> 
> 时间：2013-01-13T09:26:29.620
> 
> 标签：entity-framework, entity-framework-4

将以下`Order`对象视为实体框架实体。

`Order`如果我要将down的实例强制转换为`IOrder`，然后访问 上的`Lines`属性`IOrder`，这是否会导致虚拟`OrderLines`属性枚举并加载`OrderLine`数据库中的所有实体，从而返回内存中填充的 OrderLine 实体集合？

还是客户端代码只是获取对 OrderLines 集合的引用，一旦它被实际枚举（例如在 foreach 中），它将从数据库中加载实体？

```
 public interface IOrder
    {
        IEnumerable<OrderLine> Lines { get; }
    }

    public class Order : IOrder
    {
        public int OrderId { get; set; }

        public IEnumerable<OrderLine> Lines
        {
            get
            {
                return OrderLines;
            }
        }

        public virtual ICollection<OrderLine> OrderLines { get; set; }

        public Order()
        {
            OrderLines = new List<OrderLine>();
        }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T18:50:37.307

它将返回对该`OrderLines`对象的引用，但公开为`IEnumerable`. 这意味着只有客户端代码中的枚举才会真正枚举集合。这是*整个*集合：linq 过滤器 ( `Where`) 和投影 ( `Select`) 不会被转换为 SQL。

请注意，这两者都不是所希望的。首先，上下文必须是活动的以允许延迟加载，其次，集合可能是“大”的（尽管订单行可能不是重点）。根据应用程序的类型，最好将预先填充的 OrderDto 对象传输给客户端。

# asp.net-mvc - MVC 3 - DotNetOpenAuth OpenID 不返回经过身份验证的用户

> ID：14302242
> 
> 赞同：0
> 
> 时间：2013-01-13T09:26:33.643
> 
> 标签：asp.net-mvc, openid

我正在尝试创建 DotNetOpenAuth OpenID MVC 3 项目，但无法接收用户身份验证状态。我的 post 方法工作正常，但是当请求返回到 HttpGet 方法时，我检查了 User.Identity.IsAuthenticated 状态，当我成功登录到任何 openID 提供程序时它返回 false。

我已经在 webconfig dotNetOpenAuth untrustedWebRequest 中启用了与 localhost 的通信，但这并没有解决问题，我花了几个小时来寻找为什么用户没有作为经过身份验证的用户返回的答案。

一定有一些逻辑错误会导致用户无法从我的代码中经过身份验证的 openID 提供程序返回，但我找不到它。

感谢您对我的问题的任何答复！

我的控制器：

```
namespace DotNetOpenAuth_OpenID.Controllers
{
    public class UserController : Controller
    {
    private static OpenIdRelyingParty openid = new OpenIdRelyingParty();
    public IFormsAuthenticationService FormsService { get; set; }

    protected override void Initialize(RequestContext requestContext)
    {
        if (FormsService == null)
        {
            FormsService = new AuthenticationService();
        }

        base.Initialize(requestContext);
    }

    // **************************************
    // URL: /User/LogIn
    // **************************************
    [HttpGet]
    public ActionResult LogIn()
    {
        if (User.Identity.IsAuthenticated) <===== RETURNS FALSE
        {
            return RedirectToAction("Profile", "User");
        }

        Identifier id;
        if (Identifier.TryParse(Request.Form["openid_identifier"], out id))
        {
            try
            {
                var req = openid.CreateRequest(Request.Form["openid_identifier"]);
                return req.RedirectingResponse.AsActionResult();
            }
            catch (ProtocolException ex)
            {
                 //display error by showing original LogOn view
                //this.ErrorDisplay.ShowError("Unable to authenticate: " + ex.Message);
                return View("Login");
            }
           //return LogIn(new User { OpenID = id }, Request.Form["ReturnUrl"]);
        }
        return View("Login");
    }

    [HttpPost]
    public ActionResult LogIn(User model, string returnUrl)
    {

        string openID = ModelState.IsValid ? model.OpenID :       Request.Form["openid_identifier"];

        if (User.Identity.IsAuthenticated)
        {
            return RedirectToAction("Profile", "User");
        }
        else if (!string.IsNullOrEmpty(openID))
        {
            return Authenticate(openID, returnUrl);
        }
        else if (ModelState.IsValid)
        {
            ModelState.AddModelError("error", "The OpenID field is required.");
        }

        // If we got this far, something failed, redisplay form
        return View(model);
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T07:51:08.500

我正在关注一个可以在[http://codesprout.blogspot.com/search/label/openid](http://codesprout.blogspot.com/search/label/openid)找到的示例，并且还没有实现所有代码，这就是为什么从未返回经过身份验证的用户。我错过了对控制器中另一个名为 Authenticate 的方法中的 var response = openid.GetResponse() 的调用。整个代码的另一个来源可以在这里的 Stack Overflow 帖子中找到 Stack Overflow[真正使用的是什么 OpenID 解决方案？](https://stackoverflow.com/questions/5133921/what-openid-solution-is-really-used-by-stack-overflow/5133923#5133923)

# java - 非常初学者 Java：方法无法识别传递给它的用户输入字符串

> ID：14302244
> 
> 赞同：0
> 
> 时间：2013-01-13T09:26:44.840
> 
> 标签：java, string, methods, keyboard

> **可能重复：**
> [如何比较 Java 中的字符串？](https://stackoverflow.com/questions/513832/how-do-i-compare-strings-in-java)
> [Java中的字符串比较...？](https://stackoverflow.com/questions/8018538/string-comparison-in-java)

我正在研究我认为是一个非常简单的问题......
带有硬编码产品列表的基本 101 购物车（仅限练习题 - 我知道这不是真正的做法）

我希望用户输入一个字符串 - 一个产品代码，然后从 Description 方法中获取相关产品的描述

它返回一个 0 值，即方法中的 if 语句似乎无法识别用户输入的字符串。

硬编码字符串有效 - 键盘输入的字符串并没有让我难过，但我认为我只是错过了一些基本的东西

```
import java.util.*;

class CW1ShoppingCart1_2ShowProdAndGetChoice
{
public static void main(String[] args)

{
/*PART 1 Offer catalogue and get user choice*/

System.out.println("ITEMS AVAIALBLE TODAY: \n");
System.out.print("P4383"+ "\t"+ CW1ShoppingCart1GetProductDetails.Description("P4383"));
System.out.println("\t"+ "$"+ CW1ShoppingCart1GetProductDetails.Price("P4383"));
System.out.print("P4385"+ "\t"+ CW1ShoppingCart1GetProductDetails.Description("P4385"));
System.out.println("\t"+ "$"+ CW1ShoppingCart1GetProductDetails.Price("P4385"));
System.out.print("P4387"+ "\t"+ CW1ShoppingCart1GetProductDetails.Description("P4387"));
System.out.println("\t"+ "$"+ CW1ShoppingCart1GetProductDetails.Price("P4387"));
System.out.println("\nTO START SHOPPING ENTER A PRODUCT CODE AND HIT RETURN \n");

Scanner in = new Scanner (System.in);
String ProdCode =in.nextLine();

System.out.println("You Chose: "+ CW1ShoppingCart1GetProductDetails.Description(ProdCode));

}
}

class CW1ShoppingCart1GetProductDetails
{

static String Description(String ProdCode)
{

String Proddesc;

if(ProdCode=="P4387")Proddesc = "Little used helper monkey - 1 ";
else if(ProdCode=="P4385") Proddesc = "Chilli chocolate - 100g ";
else if(ProdCode=="P4383")  Proddesc = "State-owned Bank - real value - 1 entity ";
else Proddesc = "0";

return Proddesc;
}

static double Price(String ProdCode)
{

double ProdPrice;

if(ProdCode=="P4387")  ProdPrice = 1200;
else if(ProdCode=="P4385") ProdPrice = 3.27;
else if(ProdCode=="P4383")  ProdPrice = -0.08;
else ProdPrice = 0;

return ProdPrice;
}

} 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-13T09:28:16.900

问题是您正在使用`==`比较字符串。改为使用`equals`。

```
if(ProdCode.equals("P4387"))Proddesc = "Little used helper monkey - 1 "; 
```

等等

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-13T09:35:05.340

不要使用 == 来比较字符串。有时您也可能使用 '==' 得到正确的结果，但这是由于字符串池中存在相同的字符串。始终使用 String 类中可用的 equals 方法来比较字符串

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-13T09:47:58.287

作为替代解决方案，您可以使用枚举

像下一个

```
public enum ShoppingCart {
    P4387(1200, "Little used helper monkey - 1 "),
    P4385(3.27, "Chilli chocolate - 100g "),
    P4383(-0.08, "State-owned Bank - real value - 1 entity ");

    private final double price;
    private final String description;

    private ShoppingCart(double price, String description) {
        this.price = price;
        this.description = description;
    }

    public double getPrice() {
        return price;
    }

    public String getDescription() {
        return description;
    }
} 
```

使用类似的东西：

```
System.out.printf("Shopping card with name %s have price = %f and description %s",
        currentShoppingCart.name(),
        currentShoppingCart.getPrice(),
        currentShoppingCart.getDescription()); 
```

# c++ - 需要帮助调试简单的更新二进制文件功能

> ID：14302246
> 
> 赞同：0
> 
> 时间：2013-01-13T09:26:52.583
> 
> 标签：c++, debugging, binaryfiles

```
void updatebfile(char filename[MAX])
{

fstream writereadb;

char cont='y';
char filenameb [MAX];
int i=1;
int record;

student s;

strcpy(filenameb,filename);
strcat(filenameb,".dat");

writereadb.open(filenameb,ios::in | ios::out | ios::binary  );

cout<<"------------------------------"
    <<endl;

cout<<"Begin updating of binary file "
    <<filenameb
    <<endl
    <<endl;

cout<<"Information for student file"
    <<endl
    <<endl;

while ( writereadb.read (reinterpret_cast <char *>(&s), sizeof (s) ) )
{

    cout<<i
        <<'\t'
        <<s.identity
        <<" "
        <<s.name
        <<endl;

    i++;

}

do
{

cout<<endl
    <<"Update record: ";
cin>>record;

cout<<endl
    <<"Student id: ";

writereadb.seekg ((record - 1) * sizeof(s), ios::beg);//problem is here
writereadb.read (reinterpret_cast <char *>(&s), sizeof (s));//always reading last value

cout<<s.identity
    <<endl;

cout<<"Update the name: ";
cin>>s.name;

writereadb.seekp((record-1)*sizeof(student),ios::beg);  
writereadb.write (reinterpret_cast <const char *>(&s), sizeof (s));

cout<<"Any more update (y/n) :";
cin>>cont;

}while (cont=='y');

writereadb.close();

} 
```

我有这个简单的功能，我想在其中更新二进制文件。问题是我似乎无法设置 get 指针，当我 cout s.identity 时，我总是在读取二进制文件中的最后一个值

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-13T09:46:27.880

您总是尝试读取一个条目，并且仅在成功时才使用结果（这是完全正确的）。如果它没有成功，例如因为遇到 EOF，streamstate 将被设置为“fail”。这会导致读取循环终止，但也会导致对该文件流的任何后续操作失败，直到您明确重置流状态。因此，您需要`writereadb.clear()`在该循环之后调用。

还有一些注意事项：

*   传递 a`char filename[MAX]`不会将数组传递给函数！相反，它与 a 相同`char* filename`，即修改该参数将使其在调用函数中可见。使用`std::string`，使用它们的`c_str()`成员函数来获取`fstream`.
*   您没有读取最后一个值，您没有读取它！您的代码应该检测到这一点。此外，它似乎已经读取了最后一个值，因为您正在重用临时结构。一般来说，保持变量范围的大小尽可能小是个好主意。在函数开头声明所有变量的习惯属于旧时代（上个世纪），这对于 C 代码是必要的，但在 C++ 代码中则不然。在这种情况下，我什至可以想象将整个程序分成两个或三个函数。
*   Dumping structs to files is not portable between different computers, not even different compilers on the same computer sometimes. For that reason, there are multiple serialization libraries out there that do this correctly.

# python - 字典更新序列元素#0的长度为3；2 是必需的

> ID：14302248
> 
> 赞同：101
> 
> 时间：2013-01-13T09:27:20.870
> 
> 标签：python, odoo

我想通过其他对象向对象添加行`account.bank.statement.line`但我收到以下错误：

> “字典更新序列元素 #0 的长度为 3；需要 2”

这是我的代码：

```
def action_account_line_create(self, cr, uid, ids):
    res = False
    cash_id = self.pool.get('account.bank.statement.line')
    for exp in self.browse(cr, uid, ids):
        company_id = exp.company_id.id
        #statement_id = exp.statement_id.id
        lines = []
        for l in exp.line_ids:
            lines.append((0, 0, {
                'name': l.name,
                'date': l.date,
                'amount': l.amount,
                'type': l.type,
                'statement_id': exp.statement_id.id,
                'account_id': l.account_id.id,
                'account_analytic_id': l.analytic_account_id.id,
                'ref': l.ref,
                'note': l.note,
                'company_id': l.company_id.id
            }))

        inv_id = cash_id.create(cr, uid, lines,context=None)
        res = inv_id
    return res 
```

我改变了它，但后来我遇到了这个错误：

```
 File "C:\Program Files (x86)\OpenERP 6.1-20121029-003136\Server\server\.\openerp\workflow\wkf_expr.py", line 68, in execute
  File "C:\Program Files (x86)\OpenERP 6.1-20121029-003136\Server\server\.\openerp\workflow\wkf_expr.py", line 58, in _eval_expr
  File "C:\Program Files (x86)\OpenERP 6.1-20121029-003136\Server\server\.\openerp\tools\safe_eval.py", line 241, in safe_eval
  File "C:\Program Files (x86)\OpenERP 6.1-20121029-003136\Server\server\.\openerp\tools\safe_eval.py", line 108, in test_expr
  File "<string>", line 0   
   ^
SyntaxError: unexpected EOF while parsing 
```

**代码：**

```
def action_account_line_create(self, cr, uid, ids, context=None):
    res = False
    cash_id = self.pool.get('account.bank.statement.line')
    for exp in self.browse(cr, uid, ids):
        company_id = exp.company_id.id
        lines = []
        for l in exp.line_ids:
            res = cash_id.create ( cr, uid, {
                'name': l.name,
                'date': l.date,
                'amount': l.amount,
                'type': l.type,
                'statement_id': exp.statement_id.id,
                'account_id': l.account_id.id,
                'account_analytic_id': l.analytic_account_id.id,
                'ref': l.ref,
                'note': l.note,
                'company_id': l.company_id.id
            }, context=None)
    return res 
```

* * *

## 回答 #1

> 赞同：97
> 
> 时间：2013-01-14T04:38:16.057

出现此错误是因为您尝试`dict`使用错误的序列（`list`或`tuple`）结构来更新对象。

`cash_id.create(cr, uid, lines,context=None)`试图转换`lines`成 dict 对象：

```
(0, 0, {
    'name': l.name,
    'date': l.date,
    'amount': l.amount,
    'type': l.type,
    'statement_id': exp.statement_id.id,
    'account_id': l.account_id.id,
    'account_analytic_id': l.analytic_account_id.id,
    'ref': l.ref,
    'note': l.note,
    'company_id': l.company_id.id
}) 
```

从此元组中删除第二个零以将其正确转换为 dict 对象。

要自己测试它，请在 python shell 中尝试：

```
>>> l=[(0,0,{'h':88})]
>>> a={}
>>> a.update(l)

Traceback (most recent call last):
  File "<pyshell#11>", line 1, in <module>
    a.update(l)
ValueError: dictionary update sequence element #0 has length 3; 2 is required

>>> l=[(0,{'h':88})]
>>> a.update(l) 
```

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2018-11-18T17:05:33.337

当我使用错误的语法更新字典时出现此错误：

试试这些：

```
lineItem.values.update({attribute,value}) 
```

代替

```
lineItem.values.update({attribute:value}) 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2019-05-30T11:03:36.310

从等长元组创建字典的快速方法之一：

```
>>> t1 = (a,b,c,d)
>>> t2 = (1,2,3,4)
>>> dict(zip(t1, t2))
{'a':1, 'b':2, 'c':3, 'd':4, } 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2021-02-06T23:40:27.017

并不是对特定问题的真正答案，但如果有其他人，比如我，在 fastAPI 中遇到这个错误并最终出现在这里：

这可能是因为您的路由响应具有一个不能被 JSON 序列化的值`jsonable_encoder`。对我来说是 WKBElement：[https ://github.com/tiangolo/fastapi/issues/2366](https://github.com/tiangolo/fastapi/issues/2366)

就像在问题中一样，我最终只是从输出中删除了值。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-05-03T12:57:22.717

`dictionary update sequence element #0 has length 3; 2 is required`
当我试图将字典转换为列表时，我得到了`.values()`

通过使用解决了它`.items()`

```
list(dict(new_row.items())) 
```

# perl - 如何在 perl 中定义转义字符

> ID：14302251
> 
> 赞同：0
> 
> 时间：2013-01-13T09:27:45.140
> 
> 标签：perl

我想在 perl 中定义一个变量 /Test123 。我正在尝试这样的事情，但我得到了错误

```
 my $uriReference="Test123";

    ##Here is where i am  trying to create /Test123

    my $routingUrl = "\"/".$uriReference."\""; 
```

我想我在这里做错了需要帮助吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-13T09:31:16.083

您可以改用`qq()`模拟双引号插值：

```
my $url = qq("/$uriReference"); 
```

尽管我认为您的分配在技术上没有任何问题，但它应该分配`"/Test123"`给您的变量。所以也许错误是关于别的东西。我们会知道您是否在问题中包含了错误消息。您没有理由不应该在问题中包含错误消息。

你也应该知道你不需要分解你的报价，你可以这样做：

```
my $url = "\"/$uriReference\""; 
```

# php - php 自动加载在 5.2.17 版本上不起作用

> ID：14302255
> 
> 赞同：0
> 
> 时间：2013-01-13T09:28:06.470
> 
> 标签：php, autoload

在我的语言环境机器上 evr​​ything 可以工作，但是当我上传到 godaddy 服务器时，自动加载功能不起作用。godaddys php 版本为：5.2.17。我收到此错误：致命错误：__autoload() [function.require]：无法打开所需的'/home/content/b/r/e/me/html/classes/Shtigliz_Database.php'（include_path='.:/usr /local/php5/lib/php') 在第 52 行的 /home/content/b/r/e/me/html/config/bootstrap.php

据我检查，路径是正确的。godaddy 支持说它是我的代码，但它确实在我的本地机器上工作。

这是我的代码：

```
function __autoload($class){

if(file_exists(APP_DIR . "/models/$class.php")){

    require APP_DIR . "/models/$class.php";
    }else{

        require APP_DIR . "/classes/$class.php";

    } 
```

}

并且 APP_DIR 常量设置如下：

```
define('APP_DIR', realpath('.')); 
```

再次，就我的检查而言，路径是正确的。

php 5.2.17 版中的自动加载有问题吗？

此致

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T09:32:21.527

问题不在于自动加载。您的错误消息表明 PHP 无法找到您尝试包含的文件。该文件要么不存在，要么存在权限问题，PHP 脚本无法访问。

# html - css，匹配菜单顶部

> ID：14302265
> 
> 赞同：1
> 
> 时间：2013-01-13T09:29:10.480
> 
> 标签：html, css, menu, hover

我想知道是否可以通过纯 CSS 来做到这一点。

请查看我的示例[http://jsfiddle.net/fantill/72xjU/1/](http://jsfiddle.net/fantill/72xjU/1/)

现在，当我悬停菜单时，子菜单将显示在悬停菜单旁边。

我想设置，所有子菜单的顶部都匹配 2 级菜单的顶部。

```
--------------------------------------------------
|                                                |
|                                                |
--------------------------------------------------
|         |              |  <- 2nd one is selecting
|/////////|              |  <- top match 1st sub menu top
|         |              |  
----------|              |
          |              |
          |              |
          ---------------- 
```

非常感谢您的建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-13T09:43:47.997

没那么复杂。实际上，您只需从子菜单的列表元素中删除相对位置。更新的[小提琴](http://jsfiddle.net/VLBv9/)在这里：

```
.MM ul ul li {
   position:static;
} 
```

# c - 链表函数调用

> ID：14302266
> 
> 赞同：0
> 
> 时间：2013-01-13T09:29:10.127
> 
> 标签：c, linked-list

我正在尝试准备我的项目，但`void insertCourse(CourseNodePtr* cr, char* code);`函数给出了参数 2 的语法错误；switch case 1中的代码。任何人都知道它为什么不起作用？

```
 struct course{
       char code[10];
       char name[40]; 
       char instructor[40];
       char term[10];
       int year; 
       struct course *coursePtr; /* pointer to next node */
       }; 

typedef struct course Course; /* synonym for struct course  */
typedef Course *CourseNodePtr; /* synonym for CourseNodePtr* */

/* Function Prototypes */
void insertCourse(CourseNodePtr* cr, char* code);
char* deleteCourse(CourseNodePtr* cr, CourseNodePtr* inscr, char* code);
void insertStudent(FILE* filePtr, StudentNodePtr* cr, int id); 
int deleteStudent(FILE* filePtr, StudentNodePtr* cr, int id);
void displayStudent(FILE* filePtr, int id);
void displayClassNumbers(FILE* filePtr, int id);
void displayRecvCourse (FILE* filePtr, char* code, char* term, int year);
void registration(FILE* filePtr);
void instructions( void );

int main(void)
{
CourseNodePtr startPtr = NULL; /* initially there are no nodes */
StudentNodePtr startPtr1 = NULL; /* initially there are no nodes */
int choice; /* user's choice */

Course code;  
Student id; 
Course year;

instructions(); /* display the menu */
printf( "? " );
scanf( "%d", &choice );

while (choice != 9) {
      switch (choice) {
             case 1:

                  printf("Pls enter the course code to be inserted.\n");
                  scanf("%s", code); 
                  insertCourse( &startPtr, char* code);
                  break; 
                  /*

      printf( "? " );
      scanf( "%d", &choice );

printf( "End of run.\n" );

getch();  
return 0; /* indicates successful termination */
  } /* end main */

/* Insert course function  */
 void insertCourse(CourseNodePtr* cr, char* code)
 {
 CourseNodePtr newPtr;   /* New node pointer */
 CourseNodePtr previousPtr;   /* previous node pointer in list */
 CourseNodePtr currentPtr;    /* current node pointer in list */

 newPtr = malloc( sizeof(Course) );   /* memory allocation for new node */

 if (newPtr != NULL) {
           printf("Pls enter the code number of the course.\n");
           scanf("%s", &(newPtr->code));
           printf("Pls enter the course name.\n"); 
           scanf("%s", &(newPtr->name));
           printf("Pls enter the instructor name.\n"); 
           scanf("%s", &(newPtr->instructor));
           printf("Pls enter the term; Spring or Fall.\n"); 
           scanf("%s", &(newPtr->term));
           printf("Pls enter the year.\n"); 
           scanf("%s", &(newPtr->year));
           newPtr->coursePtr = NULL; 

           previousPtr = NULL; 
           currentPtr = *cr; 

           while ((currentPtr != NULL)  && (code > currentPtr->code)) {
                 previousPtr = currentPtr; 
                 currentPtr = currentPtr->coursePtr; 
           }  /* End While */

           if ( previousPtr == NULL ) {
                newPtr->coursePtr = *cr; 
                *cr = newPtr; 
           }   /* End if */
           else {
                previousPtr->coursePtr = newPtr; 
                newPtr->coursePtr = currentPtr; 
           }  /* End else */
       } /* End if */

    else {
         printf( " %c could not be inserted. Memory not enough...\n", code); 
    }  /* End else */
  } /* End function insert */ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T09:37:30.160

你不能进入这样的结构。`%s`读入字符串，而不是结构。您将不得不逐个阅读字段。或者将代码更改为字符串类型或动态分配的字符数组。

编辑：也在这里：

```
insertCourse( &startPtr, char* code); 
```

您不能将 char* 指定为`code`. 相反，你应该做一个演员：

```
insertCourse( &startPtr, (char*)code); 
```

# angularjs - 如何在控制器中使用过滤器？

> ID：14302267
> 
> 赞同：657
> 
> 时间：2013-01-13T09:29:54.373
> 
> 标签：angularjs, angular-filters, ng-controller

我编写了一个过滤器函数，它将根据您传递的参数返回数据。我希望我的控制器具有相同的功能。是否可以在控制器中重用过滤器功能？

这是我迄今为止尝试过的：

```
function myCtrl($scope,filter1)
{ 
    // i simply used the filter function name, it is not working.
} 
```

* * *

## 回答 #1

> 赞同：1056
> 
> 时间：2013-01-13T09:42:20.110

**将$filter**注入您的控制器

```
function myCtrl($scope, $filter)
{
} 
```

然后，无论您想在哪里使用该过滤器，都可以像这样使用它：

```
$filter('filtername'); 
```

如果要将参数传递给该过滤器，请使用单独的括号：

```
function myCtrl($scope, $filter)
{
    $filter('filtername')(arg1,arg2);
} 
```

`arg1`您要过滤的数组在哪里，并且`arg2`是用于过滤的对象。

* * *

## 回答 #2

> 赞同：255
> 
> 时间：2013-01-13T12:19:23.637

@Prashanth 提供的答案是正确的，但还有更简单的方法可以做到这一点。基本上，与其注入`$filter`依赖项并使用笨拙的调用它的语法（`$filter('filtername')(arg1,arg2);`），不如注入依赖项：过滤器名称加上`Filter`后缀。

以一个可以写的问题为例：

```
function myCtrl($scope, filter1Filter) { 
  filter1Filter(input, arg1);
} 
```

应该注意的是`Filter`，无论您使用什么命名约定，都必须附加到过滤器名称： foo 通过调用引用`fooFilter`
fooFilter 通过调用引用`fooFilterFilter`

* * *

## 回答 #3

> 赞同：80
> 
> 时间：2014-03-28T04:22:05.167

使用以下示例代码，我们可以按名称过滤角度控制器中的数组。这是基于以下描述。 [http://docs.angularjs.org/guide/filter](http://docs.angularjs.org/guide/filter)

**this.filteredArray = filterFilter(this.array, {name:'Igor'});**

JS：

```
 angular.module('FilterInControllerModule', []).
    controller('FilterController', ['filterFilter', function(filterFilter) {
      this.array = [
        {name: 'Tobias'},
        {name: 'Jeff'},
        {name: 'Brian'},
        {name: 'Igor'},
        {name: 'James'},
        {name: 'Brad'}
      ];
      this.filteredArray = filterFilter(this.array, {name:'Igor'});
    }]); 
```

HTML

```
<!doctype html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Example - example-example96-production</title>

  <script src="//ajax.googleapis.com/ajax/libs/angularjs/1.3.0-beta.3/angular.min.js"></script>
  <script src="script.js"></script>

</head>
<body ng-app="FilterInControllerModule">
    <div ng-controller="FilterController as ctrl">
    <div>
      All entries:
      <span ng-repeat="entry in ctrl.array">{{entry.name}} </span>
    </div>
    <div>
      Filter By Name in angular controller
      <span ng-repeat="entry in ctrl.filteredArray">{{entry.name}} </span>
    </div>
  </div>
</body>
</html> 
```

* * *

## 回答 #4

> 赞同：48
> 
> 时间：2015-09-09T12:22:21.157

`filter`这是在 Angular 控制器中使用的另一个示例：

```
$scope.ListOfPeople = [
    { PersonID: 10, FirstName: "John", LastName: "Smith", Sex: "Male" },
    { PersonID: 11, FirstName: "James", LastName: "Last", Sex: "Male" },
    { PersonID: 12, FirstName: "Mary", LastName: "Heart", Sex: "Female" },
    { PersonID: 13, FirstName: "Sandra", LastName: "Goldsmith", Sex: "Female" },
    { PersonID: 14, FirstName: "Shaun", LastName: "Sheep", Sex: "Male" },
    { PersonID: 15, FirstName: "Nicola", LastName: "Smith", Sex: "Male" }
];

$scope.ListOfWomen = $scope.ListOfPeople.filter(function (person) {
    return (person.Sex == "Female");
});

//  This will display "There are 2 women in our list."
prompt("", "There are " + $scope.ListOfWomen.length + " women in our list."); 
```

很简单，嘿？

* * *

## 回答 #5

> 赞同：40
> 
> 时间：2016-02-16T15:43:56.143

# 有三种可能的方法来做到这一点。

假设您有以下简单的过滤器，它将字符串转换为大写，并且只为第一个字符提供参数。

```
app.filter('uppercase', function() {
    return function(string, firstCharOnly) {
        return (!firstCharOnly)
            ? string.toUpperCase()
            : string.charAt(0).toUpperCase() + string.slice(1);
    }
}); 
```

* * *

**直接通过`$filter`**

```
app.controller('MyController', function($filter) {

    // HELLO
    var text = $filter('uppercase')('hello');

    // Hello
    var text = $filter('uppercase')('hello', true);

}); 
```

注意：这使您可以访问*所有*过滤器。

* * *

**分配`$filter`给一个`variable`**

此选项允许您使用`$filter`类似`function`.

```
app.controller('MyController', function($filter) {

    var uppercaseFilter = $filter('uppercase');

    // HELLO
    var text = uppercaseFilter('hello');

    // Hello
    var text = uppercaseFilter('hello', true);

}); 
```

* * *

**仅加载特定的`Filter`**

您可以通过在过滤器名称后附加 来仅加载特定过滤器`Filter`。

```
app.controller('MyController', function(uppercaseFilter) {

    // HELLO
    var text = uppercaseFilter('hello');

    // Hello
    var text = uppercaseFilter('hello', true);

}); 
```

* * *

您使用哪一个取决于个人喜好，但我建议使用第三个，因为它是最易读的选项。

* * *

## 回答 #6

> 赞同：15
> 
> 时间：2014-11-16T03:18:50.563

```
function ngController($scope,$filter){
    $scope.name = "aaaa";
    $scope.age = "32";

     $scope.result = function(){
        return $filter('lowercase')($scope.name);
    };
} 
```

> 控制器方法的第二个参数名称应该是“$filter”，那么只有过滤器功能才能用于这个例子。在这个例子中，我使用了“小写”过滤器。

* * *

## 回答 #7

> 赞同：12
> 
> 时间：2013-05-28T18:18:17.710

我有另一个例子，我为我的过程制作：

我得到一个像这样的带有值描述的数组

```
states = [{
    status: '1',
    desc: '\u2713'
}, {
    status: '2',
    desc: '\u271B'
}] 
```

在我的 Filters.js 中：

```
.filter('getState', function () {
    return function (input, states) {
        //console.log(states);
        for (var i = 0; i < states.length; i++) {
            //console.log(states[i]);
            if (states[i].status == input) {
                return states[i].desc;
            }
        }
        return '\u2718';
    };
}) 
```

然后，一个测试变量（控制器）：

```
function myCtrl($scope, $filter) {
    // ....
    var resp = $filter('getState')('1', states);
    // ....
} 
```

* * *

## 回答 #8

> 赞同：7
> 
> 时间：2016-05-17T18:00:42.207

AngularJs 允许您在模板或控制器、指令等内部使用过滤器。

在模板中，您可以使用此语法

```
{{ variable | MyFilter: ... : ... }} 
```

在控制器内部，您可以使用注入**$filter**服务

```
angular.module('MyModule').controller('MyCtrl',function($scope, $filter){
    $filter('MyFilter')(arg1, arg2);
}) 
```

如果您需要更多演示示例，这里是一个链接

[AngularJs 过滤器示例和演示](http://www.w3docs.com/snippets/angularjs/how-to-use-angularjs-filters.html)

* * *

## 回答 #9

> 赞同：6
> 
> 时间：2014-03-21T17:35:13.973

还有另一种评估过滤器的方法，它反映了视图中的语法。调用很麻烦，但您可以为它建立一个快捷方式。我喜欢字符串的语法与您在视图中的语法相同。看起来像这样：

```
function myCtrl($scope, $interpolate) { 
  $scope.$eval($interpolate( "{{ myvar * 10 | currency }} dollars." ))
} 
```

* * *

## 回答 #10

> 赞同：5
> 
> 时间：2017-06-08T14:09:33.517

似乎没有人提到您可以在**$filter('filtername')(arg1,arg2);中使用函数作为****arg2 ；**

 **例如：

```
$scope.filteredItems = $filter('filter')(items, function(item){return item.Price>50;}); 
```

* * *

## 回答 #11

> 赞同：2
> 
> 时间：2016-12-25T05:35:43.777

在控制器中使用 $filter 的简单日期示例是：

```
var myDate = new Date();
$scope.dateAsString = $filter('date')(myDate, "yyyy-MM-dd"); 
```

如此处所述 - [https://stackoverflow.com/a/20131782/262140](https://stackoverflow.com/a/20131782/262140)

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2017-11-29T10:16:20.750

如果我们想添加多个条件，而不是 javascript 角度过滤器中的单个值，请使用以下代码：

```
var modifiedArray = $filter('filter')(array,function(item){return (item.ColumnName == 'Value1' || item.ColumnName == 'Value2');},true) 
```

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2018-03-07T03:38:12.953

首先将 $filter 注入您的控制器，确保 ngSanitize 已加载到您的应用程序中，稍后在控制器中使用如下：

```
$filter('linky')(text, target, attributes) 
```

[始终查看 angularjs 文档](https://docs.angularjs.org/api/ngSanitize/filter/linky)

* * *

## 回答 #14

> 赞同：1
> 
> 时间：2018-11-16T09:13:08.070

如果你想**过滤**控制器中的对象试试这个

```
var rateSelected = $filter('filter')($scope.GradeList, function (obj) {
                        if(obj.GradeId == $scope.contractor_emp.save_modal_data.GradeId)
                        return obj;
                }); 
```

这将根据**if 条件返回过滤后的对象**

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2020-05-20T23:06:57.773

**重用 Angular.js 过滤器 - 视图/控制器**

此解决方案涵盖重用 Angular 过滤器。这是另一种过滤数据的方法，当我需要时，谷歌将我带到了这里；我喜欢分享。

**用例**

如果您已经在过滤，比如说在您的视图中的 ng-repeat（如下所示），那么您可能已经在控制器中定义了一个过滤器，如下所示。然后你可以像最后的例子一样重用。

**过滤器使用示例 - 在视图中过滤重复**

```
<div ng-app="someApp" ng-controller="someController">
    <h2>Duplicates</h2>
    <table class="table table-striped table-light table-bordered-light">
        <thead>
            <tr>
                <th>Name</th>
                <th>Gender</th>
            </tr>
        </thead>
        <tbody>
            <tr ng-repeat="person in data | filter: searchDuplicate:true">
                <td>{{person.name}}</td>
                <td>{{person.gender}}</td>
            </tr>
        </tbody>
    </table>
</div> 
```

**角度过滤器定义示例**

```
angular.module('someApp',[])
.controller('someController', function($scope, $filter ) {

    $scope.people = [{name: 'Bob', gender: 'male'  , hasDuplicate: true },
                     {name: 'Bob', gender: 'male'  , hasDuplicate: true },
                     {name: 'Bob', gender: 'female', hasDuplicate: false}];

    $scope.searchDuplicate = { hasDuplicate : true };
}) 
```

所以，这里的概念是你已经在使用为你的视图创建的过滤器，然后意识到你也想在你的控制器中使用它。

**在控制器示例 1 中使用过滤器函数**

```
var dup = $filter('filter')($scope.people, $scope.searchDuplicate, true) 
```

**在控制器示例 2 中使用过滤器函数**

仅在未找到重复项时才显示按钮，使用先前的过滤器。

**HTML 按钮**

```
<div ng-if="showButton()"><button class="btn btn-primary" ng-click="doSomething();"></button></div> 
```

**显示/隐藏按钮**

```
$scope.doSomething = function(){ /* ... */ };
$scope.showButton = function(){ return $filter('filter')($scope.people, $scope.searchDuplicate, true).length == 0; }; 
```

有些人可能会发现这个版本的过滤很容易，它是一个 Angular.js 选项。

在视图和 $filter 函数调用中使用的可选比较器参数“true”指定您需要严格比较。如果省略，则可以在多个列中搜索值。

[https://docs.angularjs.org/api/ng/filter/filter](https://docs.angularjs.org/api/ng/filter/filter)**

# ruby-on-rails-3.2 - ember.js registerBoundHelper：创建一个类似 if 的助手，通过 json 执行服务器端授权

> ID：14302268
> 
> 赞同：1
> 
> 时间：2013-01-13T09:30:02.720
> 
> 标签：ruby-on-rails-3.2, ember.js, cancan, handlebars.js, ember-data

javascript/coffeescript/ember.js/stackoverflow 新手在这里！

我正在尝试创建一个类似 if 的助手，它仅在服务器授权对象上的操作时才显示内容。基本上我想要`can?`来自 rails cancan gem 的方法。我想写这样的模板：

```
<h1>Viewing profile for {{email}}</h1>
<h2>Scores</h2>
{{#each score in scores}}
    <div class="summary">{{score.what}}  
        {{#can score action=destroy}}
            <a href="#" id="destroy">Destroyable</a>  
        {{/can}}
        {{#can score action=view}}
            <a href="#" id="view">Viewable</a>  
        {{/can}}
        {{#can score action=edit}}
            <a href="#" id="edit">Editable</a>  
        {{/can}}
    </div>
{{/each}} 
```

`can`ember.js 助手将使用如下所示的 json 请求查询服务器：

```
<site>/api/v1/authorization.json?action=destroy&cName=Score&id=1 
```

服务器会简单地返回 HTTP 状态码 200 或 401，而 ember 会根据状态码神奇地显示或隐藏内容。我必须以这种方式进行授权，因为必须在服务器上进行一些基于角色和对象的权限检查，并且我不想在 js 中复制授权逻辑。

到目前为止，我已经使用开箱即用的`if`帮助器作为示例来创建以下自定义绑定帮助器（coffeescript）。

```
Ember.Handlebars.registerBoundHelper 'can', (object, options) ->

    permission = EmberDeviseExample.Authorization.create
        action: options.hash.action
        object: object

    permission.authorize()

    options.contexts = [permission]

    Ember.Handlebars.helpers.boundIf.call(permission, "can", options) 
```

这是用户对象：

```
EmberDeviseExample.User = DS.Model.extend
  email:        DS.attr('string')
  scores:       DS.hasMany('EmberDeviseExample.Score')

EmberDeviseExample.store.adapter.serializer.map('EmberDeviseExample.User', {scores: {embedded: 'load'}}) 
```

这是授权对象：

```
EmberDeviseExample.Authorization = Ember.Object.extend
  action: ''
  object: null
  response: 401
  urlBase: ApiUrl.authorization_path

  can : (-> 
      return (this.get('response') == 200)
  ).property('response')

  authorize: ->
    # if object is an instance, include the id in the query params
    # otherwise, just include the class name
    obj = this.get('object')
    cName = obj.toString()
    id = null
    if Ember.typeOf(obj) == "instance"
      # cname looks something like "<namespace.name:embernumber>"
      # turn it into "name"
      cName = cName.split(':')[0].split('.')[1]
      id = obj.get('id')

    $.ajax 
       url : "#{this.get('urlBase')}.json"
       context : this
       type : 'GET'
       data : 
          action : this.get('action')
          cName : cName
          id : id

       complete : (data, textStatus, xhr) ->
          this.set('response', data.status)

    return this.get('can') 
```

在服务器端，authorization.json 代码如下所示（rails 3）。我正在使用 cancan gem 来控制授权：

```
class AuthorizationsController < ApplicationController
  respond_to :json
  def show
    id     = params[:id]
    cName  = params[:cName]
    action = params[:action]

    object = cName.capitalize.constantize

    object = object.find(id) unless id.blank?

    authorized = can? action, object

    render status: (authorized ? 200 : 401), json: {}
  end
end 
```

路线如下所示：

```
 scope "/api" do
    scope "/v1" do
      resource :authorization, only: [:show]
    end
  end 
```

当然，我的应用程序中还有其他代码，如果您需要查看，请告诉我。

当我删除`#can`助手时，我看到了渲染的模板。当我重新添加`#can`助手时，我收到一个 javascript 错误，Chrome 中的消息是`"Uncaught TypeError: Cannot read property '0' of null" @ ember.prod.js:2362.`

有谁知道如何构建一个接受对象和操作、运行服务器端授权检查并根据服务器结果显示/隐藏内容的助手？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-03-20T15:15:12.307

刚刚遇到你的问题，有点晚了，但可能我仍然可以提供帮助。

尽管查看错误的来源很复杂，但我在您的预期实现中发现了一个问题：您将自定义 if 助手绑定到属性“score”，而观察响应变化的属性称为“can” ，作为助手......（但是从助手那里没有观察到这个，也没有被约束！）

# visual-studio-2010 - 带有 Visual Studio Icon Patcher 的 Visual Studio 2012 中的解决方案资源管理器中的图标

> ID：14302269
> 
> 赞同：0
> 
> 时间：2013-01-13T09:30:06.903
> 
> 标签：visual-studio-2010, visual-studio, visual-studio-2012

我已经尝试过 Visual Studio Icon Patcher，并安装了 NiceVS.0.8.1.1 Beta.Full。但是 icnos 仍然是 VS2012 风格，见

![在此处输入图像描述](../Images/25ed1fcc2af98616b584b1fdb4e5a82f.png)

我的安装是：VS2012 -> VS2012 Update 1 -> VSIP -> NiceVS。我也试过：VS2012 -> VSIP -> NiceVS（没有更新 1）。

我提取后得到的“图像”文件夹有 189 个文件（1521834 字节）。

知道为什么解决方案资源管理器中的图标没有更改吗？有什么方法可以解决这个问题或任何其他方式来更改解决方案资源管理器中的图标？

# jquery - 横幅中需要连续循环

> ID：14302270
> 
> 赞同：0
> 
> 时间：2013-01-13T09:30:28.567
> 
> 标签：jquery, html, css

在我之前的帖子中，我询问了有关制作横幅的问题，经过一番搜索，我掌握了更多概念......

```
function animate(el)
{
var div = $(el);
return     div.css("display","block").animate({width:0},1).animate({width:1100},2000).delay(4000).hide(1);
}

$(document).ready(function(){
    var dfd = $.Deferred(), 
    chain = dfd;

 var slide = ['#img2'];

$.map(slide, function(el) {
    chain = chain.pipe(function() {
        return animate(el).promise();
    });
}); 

return dfd.resolve();                
}); 
```

这是我的代码，我想让它连续，当幻灯片数组完成时，它不再显示任何图片。我想重复整个序列。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T11:46:48.240

扩展 Chevi 的递归函数注释。

```
function recursiveFunction() {

    // execute the function's code (i.e. your banner animation)

    // recurse after 1 second
    setTimeout(recursiveFunction, 1000);
} 
```

这是使用带有计时器的递归的示例。
您当然必须修改它以适合您的代码。

# php - 检查字母、数字和空格？

> ID：14302277
> 
> 赞同：1
> 
> 时间：2013-01-13T09:31:50.667
> 
> 标签：php, forms, if-statement

我正在制作一个全名字段，并且只希望用户能够输入数字、字母和空格。在 if 语句中如何做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-13T09:34:56.510

您可以采取相反的方式并检查是否有任何*非法*字符使用，例如：

```
if (preg_match("/[^a-z\\d ]/i", $input))
    // illegal input 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-13T09:44:16.260

另一种解决方案，

```
if(preg_match('/[^\w\d ]/',$input)){
    //illegal input
} 
```

# emacs - Emacs ediff 模式

> ID：14302278
> 
> 赞同：-3
> 
> 时间：2013-01-13T09:31:53.430
> 
> 标签：emacs

> **可能重复：**
> [ediff-split-window-function Horizo​​ntal==vertical？](https://stackoverflow.com/questions/9705149/ediff-split-window-function-horizontal-vertical)

使用 GNU Emacs 23.4.1。和`M-x ediff-files`

1-如何使两个文件垂直并排。默认情况下，它们是一个顶部，一个向下。我要一左一右。

2-如何自动滚动到下一个差异？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-13T14:55:48.050

要并排拆分窗格：

```
(setq ediff-split-window-function 'split-window-horizontally
      ediff-window-setup-function 'ediff-setup-windows-plain) 
```

（您可以使用 探索 ediff 的设置`M-x customize-group RET ediff RET`。）

`n`并将`p`分别带您到下一个或上一个差异块。按下`?`以获得完整菜单，其中包括将更改从缓冲区 1 复制到缓冲区 2 的便捷键，反之亦然。

# string - 这些是什么 ？ه҈҉҉҉҉҉҉҉҉҉҉҉҉҉҉҉҉҉҉҉҉҉҉҉

> ID：14302283
> 
> 赞同：0
> 
> 时间：2013-01-13T09:32:53.150
> 
> 标签：string, encoding, character

这些“人物”看起来很有趣。它们是什么？我想了解更多关于它们的技术信息。谢谢！å҈҉҉҉҉҉҉҉҉҉҉҉҉҉҉҉҉҉҉҉҉҉҉҉҉҉҉҈҉҉҉҉҉҉҉҉҉҉҉҉҉҉҉҉҉҉҉҉҉҉҉҉҉҉҈҉҉҉҉҉҉҉҉҉҉҉҉҉҉҉҉҉҉҉҉҉҉҉҉҉҉҈҉҉҉҉҉҉҉҉҉҉҉҉҉҉҉҉҉҉҉҉҉҉҉҉҉҉

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-13T10:22:33.173

这只是一堆[组合标记](http://en.wikipedia.org/wiki/Combining_mark)。仅此一项就相当于 170 个组合标记。只需使用大量组合标记，您就可以完成各种[奇怪的渲染效果。](http://jsfiddle.net/YEJfr/2/)但在这种情况下，只使用[U+0489 COMBINING CYRILLIC MILLIONS SIGN](http://www.fileformat.info/info/unicode/char/489/index.htm)。

组合标记本身并不是独立的字符，而是修改前面的基本字母。例如`a`，组合分音符`¨`呈现为`ä`而不是`a¨`。在那里放更多的组合标记，它们都必须以某种方式与基本字符一起`a`渲染，从而产生有趣的渲染效果。

jsfiddle 中的代码（所以不允许我发布其他内容）：

```
var l = 1000;

var str = ":"

while(l--) {
    str += String.fromCharCode(0x300 + Math.floor((Math.random() * 0x20)))
}

document.write(str); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-13T09:34:19.143

这些是属于另一种字符集/语言（在本例中为西里尔文）的[unicode字符。](http://www.unicode.org/standard/WhatIsUnicode.html)可以使用字符映射工具查看此信息（在 Windows 上），该工具位于开始菜单的程序 -> 附件文件夹中。

# html - html5画布创建标尺

> ID：14302284
> 
> 赞同：0
> 
> 时间：2013-01-13T09:33:24.327
> 
> 标签：html, canvas

我想在顶部和左侧创建一个标尺，如图所示。我没有发现任何有用的东西。请指导我。

![在此处输入图像描述](../Images/275f71e8bdd368ffa6e1bce4d70752b2.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-30T16:00:35.460

我只需要对网页做同样的事情，并最终设计了一个简单的算法来完成任务：

代码背后：

```
 public partial class RulerGen : System.Web.UI.Page
 {
    protected void Page_Load(object sender, EventArgs e)
    {
        int RulerLengthMM = Int32.Parse(Request.QueryString["LenMM"]);
        int RulerLengthPixels = Int32.Parse(Request.QueryString["LenPx"]);
        int RulerHeightPixels = Int32.Parse(Request.QueryString["HeightPx"]);
        string sBC = Request.QueryString["BColour"];
        string sFC = Request.QueryString["FColour"];

        double dConversionFactor = (float)RulerLengthPixels / (float)RulerLengthMM;
        double dTolerance = 0.5;
        int iTextCount = 0;

        Bitmap b = new Bitmap(RulerLengthPixels, RulerHeightPixels);
        // Set to background colour
        for (int x = 0; x < RulerLengthPixels; x++)
        {
            for (int y = 0; y < RulerHeightPixels; y++)
            {
                b.SetPixel(x, y, Color.FromName(sBC));
            }
        }
        for (int x = 0; x < RulerLengthPixels; x++)
        {
            b.SetPixel(x, 0, Color.FromName(sFC));
            if (x % (dConversionFactor * 10) <= dTolerance || x % (dConversionFactor * 10) >= (dConversionFactor * 10) - dTolerance)
            {
                // Do this every 10 mm
                for (int y = 0; y < RulerHeightPixels*0.7; y++)
                {
                    b.SetPixel(x, y, Color.FromName(sFC));
                 }

                // Add text
                string sText = iTextCount++.ToString();
                var gr = Graphics.FromImage(b);

                gr.DrawString(sText, SystemFonts.DefaultFont, Brushes.Black, new Point(x, (int)(RulerHeightPixels * 0.5)));
            }
            if (x % (dConversionFactor * 10) == (dConversionFactor * 5) || (x % (dConversionFactor * 10) >= (dConversionFactor * 5) - dTolerance && x % (dConversionFactor * 10) <= (dConversionFactor * 5) + dTolerance))
            {
                // Do this every 5 mm
                for (int y = 0; y < RulerHeightPixels/2; y++)
                {
                    b.SetPixel(x, y, Color.FromName(sFC));
                }
            }
            if (x % (dConversionFactor) <= dTolerance || x % (dConversionFactor) >= dConversionFactor-dTolerance)
            {
                // Do this every 1 mm
                for (int y = 0; y < RulerHeightPixels/10; y++)
                {
                    b.SetPixel(x, y, Color.FromName(sFC));
                }
            }

        }

        // Convert the image to byte[]
        System.IO.MemoryStream stream = new System.IO.MemoryStream();
        b.Save(stream, System.Drawing.Imaging.ImageFormat.Gif);
        byte[] imageBytes = stream.ToArray();
        // Convert byte[] to Base64 String
        string base64String = Convert.ToBase64String(imageBytes);

        // set img tag src
        imgTest.Src = "data:image/gif;base64," +base64String;
        imgTest.Width = RulerLengthPixels;
        imgTest.Height = RulerHeightPixels;}} 
```

ASP 代码：

```
<%@ Page Language="C#" AutoEventWireup="true" CodeBehind="RulerGen.aspx.cs" Inherits="Kodit.TemplateDesigner.RulerGen" %>

<!DOCTYPE html>    
<html xmlns="http://www.w3.org/1999/xhtml">
<head runat="server">
<title></title>
</head>
<body>
<form id="form1" runat="server">
<div>
<img src="" runat="server" id="imgTest" />
</div>
</form>
</body>
</html> 
```

# eclipse - 无法理解 maven 如何与 Spring MVC 一起工作

> ID：14302292
> 
> 赞同：1
> 
> 时间：2013-01-13T09:34:36.777
> 
> 标签：eclipse, spring, jakarta-ee, maven, spring-mvc

我在springMVC中做了一个Hello word的例子。以下是我的步骤。

1.在eclipse中安装maven-eclipse整数。
2.下载maven并设置环境变量，JAVA_HOME等。 3.
通过cmd查看maven是否正在运行。
4.新建maven项目，在pom.xml中设置spring core,web,web-mvc依赖。
5.创建新的动态web项目，并在其属性->部署程序集下添加了maven项目。
6.在动态web项目lib文件夹中添加spring jars core、mvc、web、context等。

现在一切正常，但我无法理解工作。

之前，我试图通过将 jar 复制并粘贴到 lib、classpath 中，通过制作用户库并向其中添加 jar，然后将其添加到当前项目，但每次它都会给出一些错误，从而使其在没有 maven 的情况下工作。有时它是找不到类，有时它与上下文相关。

最后我通过搜索一些在线教程尝试了这个 maven 东西，它现在可以工作了。但我无法得到它。谁能详细解释我在开发和部署过程中是如何挑选这些弹簧罐的。maven 到底在做什么我以前没有做过的事情。我处于完全混乱的状态。我知道我的 mvc 项目的流程（控制器、视图等）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-13T09:38:40.713

Maven 在存储库中搜索库（它们在 Maven 语言中也称为工件）。在 Maven 中央存储库中托管了许多库 - [http://search.maven.org/](http://search.maven.org/)。Maven 在存储库中找到库后，会将它们缓存在本地存储库中。它在**${userDir}/.m2**下一次，Maven 将在您的本地存储库中查找，而不是从中央存储库再次下载。

PS 您可以指定许多不同于中央存储库的其他存储库。这是在你的`<repositories>`标签中完成的`pom.xml`。默认情况下始终搜索中央存储库。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-13T10:07:39.590

如果你不想使用 maven，你已经改变了你的项目设置。删除 pom.xml 并将所有需要的 jar 复制到 webapp/WEB-INF/libs 文件夹中。

从 Maven 构建（目标文件夹）中复制 jar。在这种情况下，您将所有东西都放在一起，而不会一一抓住它们。

# ios - wp8 ios 音频录制和播放兼容性

> ID：14302301
> 
> 赞同：0
> 
> 时间：2013-01-13T09:36:35.080
> 
> 标签：ios, audio, windows-phone-8, recording, aac

我想在 WP8 上播放来自 iOS 的录音，反之亦然。

在 iOS 上，我为此目的使用 AVAudioRecorder，配置如下：

```
NSString *tempPath = NSTemporaryDirectory();

NSURL *soundFileURL = [NSURL fileURLWithPath:[tempPath stringByAppendingPathComponent:@"sound.aac"]];

NSDictionary *recordSettings = [NSDictionary
                                dictionaryWithObjectsAndKeys:
                                [NSNumber numberWithInt:kAudioFormatMPEG4AAC],
                                AVFormatIDKey,
                                [NSNumber numberWithInt:AVAudioQualityMin],
                                AVEncoderAudioQualityKey,
                                [NSNumber numberWithInt:8000],
                                AVEncoderBitRateKey,
                                [NSNumber numberWithInt: 1],
                                AVNumberOfChannelsKey,
                                [NSNumber numberWithFloat:8000.0],
                                AVSampleRateKey,
                                [NSNumber numberWithInt:16],
                                AVEncoderBitDepthHintKey,
                                nil];

NSError *error = nil;

_audioRecorder = [[AVAudioRecorder alloc]
                  initWithURL:soundFileURL
                  settings:recordSettings
                  error:&error];

_audioRecorder.delegate = self; 
```

文件“sound.aac”包含 AAC 容器中的录音，播放录制的音频样本在 iOS 上效果很好。

将文件传输到 WP8 设备后，我无法在 WP8 上播放“sound.aac”。根据以下链接： http: [//msdn.microsoft.com/en-us/library/windowsphone/develop/ff462087](http://msdn.microsoft.com/en-us/library/windowsphone/develop/ff462087(v=vs.105).aspx#BKMK_AudioSupport) (v=vs.105).aspx #BKMK_AudioSupport WP8 应该可以播放该文件。我使用的 WP8 上的代码是：

```
try
{
    this.mediaPlayer = new MediaElement();
    mediaPlayer.MediaEnded += new RoutedEventHandler(mediaPlayer_MediaEnded);

    IsolatedStorageFile myStore = IsolatedStorageFile.GetUserStoreForApplication();
    IsolatedStorageFileStream mediaStream = myStore.OpenFile("sound.aac", FileMode.Open, FileAccess.Read);

    this.mediaPlayer.SetSource(mediaStream);
    this.messageTextBlock.Text = "Playing the message...";
    mediaPlayer.Play();
}
catch (Exception exception)
{
    MessageBox.Show("Error playing audio!");
    Debug.WriteLine(exception);
    return;
} 
```

在此之后，“sound.aac”无休止地播放，扬声器没有声音。显示消息“正在播放消息...”，没有抛出异常，没有 mediaPlayer_MediaEnded 调用。我能做的就是停止播放。

我不知道如何让它工作。

# ruby-on-rails - 网络应用协会

> ID：14302303
> 
> 赞同：0
> 
> 时间：2013-01-13T09:37:02.983
> 
> 标签：ruby-on-rails, ruby, associations

我是一名高中老师。每周我们都会决定哪些学生需要额外的课程。我一直在尝试做的是一个 Rails 应用程序，这样我们就可以轻松地为学生注册额外的课程。在我看来，最好的方法是为每个学生设置复选框，并为每个学生选择时间和老师，然后为每周的额外课程提交多条记录。

我有点 Web 开发的初学者，我认为这对我来说是完美的学习任务。我现在已经尝试过几次设置这个 upp，但我无法理解这些关联。更有经验的开发人员会如何设置它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T11:34:08.223

让我们将任务拆分为基本部分：您的流程中有许多对象：、、、`Student`和（如果我猜对了）a 。`Teacher``Subject``StudentSubject`

我会这样开始：

老师有很多科目；

一个学生有很多老师；

一个学生有很多科目；

总结：学生在星期一下午 13:00 由老师分配了一个科目。（这里是 StudentSubject 表）。我们走在正确的轨道上吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-13T10:35:09.797

Try [http://guides.rubyonrails.org/](http://guides.rubyonrails.org/) to learn and know about Ruby on Rails. Another way is to prefer book like "Agile Web Development with Rails"

# regex - 使用 RegEx（notepad++）删除重复的字符串/单词（不是行）

> ID：14302308
> 
> 赞同：4
> 
> 时间：2013-01-13T09:38:01.227
> 
> 标签：regex, string, text, notepad++

我想知道一种使用 notepad++ 正则表达式查找工具删除文本文件（不是行）中重复单词或字符串的方法。

我只看到了使用 TextFx 删除重复行的方法，这不是我想要的。

例子 -

123 / 789 123 / 321

删除 123 将导致

123 / 789 / 321

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-13T09:47:28.130

我不熟悉 Notepad++，但假设它使用标准语法，请替换

```
\b(\w+)\b([\w\W]*)\b\1\b 
```

和

```
$1$2 
```

# jquery - 使用 JQuery 进行正则表达式匹配

> ID：14302309
> 
> 赞同：0
> 
> 时间：2013-01-13T09:38:21.997
> 
> 标签：jquery

我收到一个字符串作为输入，如何获取 div 之间的值？例如：

```
var temp = "This is line one.<div>This is line two.</div><div><br></div><div>This is line three with a line break</div><div><br></div><div>&nbsp;</div><div><br></div><div>This is line four with a line break and space.</div>"; 
```

如何在数组中取出文本句子？我在 'div' 上尝试过 .filter 和 .each ，但他们都错过了第一个。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T09:50:49.767

要获取 div 之间的文本：

```
var lines = $('div').map(function(el) {
    return $(el).text();
}).get(); 
```

注意：这不会提取`"this is line one"`，因为它不在`div`.

但是，由于您想用 an 包装每个元素`li`并插入它们，您实际上可以跳过数组阶段：

```
$('div').each(function() {
    var text = $(this).text();
    $('<li>', {'class': 'ui-state-default', text: text}').appendTo('#container');
}); 
```

# response - 示例 RTSP SET_PARAMETER 响应

> ID：14302312
> 
> 赞同：1
> 
> 时间：2013-01-13T09:38:48.380
> 
> 标签：response, rtsp

我试图打包和解析不同的 rtsp 请求和响应。现在我正在尝试使用 rtsp`SET_PARAMETER`请求。我想知道 rtsp`set_parameter (success)`响应的样子。在 rtsp 规范中，给定的示例是

```
 C->S: SET_PARAMETER rtsp://example.com/media.mp4 RTSP/1.0
        CSeq: 10
        Content-length: 20
        Content-type: text/parameters

        barparam: barstuff

  S->C: RTSP/1.0 451 Invalid Parameter
        CSeq: 10
        Content-length: 10
        Content-type: text/parameters

        barparam 
```

这是请求的参数无效的情况。我正在寻找一个成功的`rtsp 200 ok`回应。如果有人知道它的外观，请帮助我。我尝试了谷歌搜索，但没有得到任何有用的结果。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-12T17:35:32.150

例如，从 AirPort Express 到 SET_PARAMETER(volume) 的有效 RTSP 响应如下所示：

```
RTSP/1.0 200 OK
Server: AirTunes/105.1
CSeq: 5
(empty line) 
```

请注意，这`(empty line)`只是一个空行，而不是文字字符串。stackoverflow 格式只是删除了一个尾随的空行。响应中*没有*正文。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-10-27T10:56:23.897

这是取自[此处的示例](http://www.axis.com/files/manuals/vapix_video_streaming_52937_en_1307.pdf)

有效请求：

```
SET_PARAMETER rtsp://myserver/axis-media/media.amp RTSP/1.0
CSeq: 7
Session: 12345678
Content-Type: text/parameters
Content-Length: 19 
```

回复：

```
RTSP/1.0 200 OK
CSeq: 7
Session: 12345678
Date: Wed, 16 Jul 2008 13:01:25 GMT 
```

和

无效的请求：

```
SET_PARAMETER rtsp://myserver/axis-media/media.amp RTSP/1.0
CSeq: 7
Session: 12345678
Require: com.axis.parameters-in-header 
```

回复：

```
RTSP/1.0 551 Option not supported
CSeq: 7
Session: 12345678
Unsupported: com.axis.parameters-in-header
Date: Wed, 16 Jul 2008 13:01:24 GMT 
```

# c++ - 由另一个数组中的值组成的数组

> ID：14302316
> 
> 赞同：2
> 
> 时间：2013-01-13T09:39:51.370
> 
> 标签：c++, arrays, multidimensional-array

如果我有一个看起来像这样的数组：

```
int map[21][28] =
{
    0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
    0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
    0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
    0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
    0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
    0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
    0, 0, 0, 0, 0, 0, 0, 2, 2, 1, 1, 1, 1, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
    0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
    0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
    0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
    0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
    0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
    0, 0, 0, 0, 0, 0, 0, 1, 1, 1, 1, 1, 1, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
    0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
    0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
    0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
    0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
    0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
    0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
    0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
    0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0
}; 
```

如何创建一个由该数组中的值组成的较小数组..？
有点像这样：

```
int zoomedMap[7][7] =
{

    2, 2, 1, 1, 1, 1, 1,
    1, 0, 0, 0, 0, 0, 1,
    1, 0, 0, 0, 0, 0, 1,
    1, 0, 0, 0, 0, 0, 1,
    1, 0, 0, 0, 0, 0, 1,
    1, 0, 0, 0, 0, 0, 1,
    1, 1, 1, 1, 1, 1, 1
}; 
```

我不知道这是否有帮助，但是：

*   我知道两个数组的确切尺寸
*   我希望可以移动较小的数组位置，最好只更改 X/Y 值

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T11:25:04.970

希望显而易见的是，您的子阵列实际上只不过是主阵列中的数据“块”（带有一些有趣的分区*）*。假设您正在检查您的边界并且不允许发生越界情况，您可以使用指针数学和有关主数组的一些基本信息来模拟您的子数组。

*   该块将*始终*与该位置有一些`[row][column]`偏移`[0][0]`，因此我们需要这些值（行和列）。
*   该块具有固定宽度，`column+width`不会超过您的主阵列宽度。我们需要那个宽度。
*   该块具有固定高度，因此`row+height`不会超过您的主阵列高度。我们需要那个高度。
*   我希望很明显我们需要作为主数组的基地址（在你的情况下`map`）。

这可能是最好的例子。以下不是一些最终的解决方案。它甚至可能无法满足您需要的 1/10。相反，它旨在让您了解如何仅使用指针、一些偏移量、一些大小和一些算术来获得您正在寻找的东西。没有*什么*可以阻止您超出可能有害的限制（就像普通数组一样），所以要小心。

```
// internal rerefential to a submatrix in a larger fixed matrix.
template<typename T>
class Sub2D
{
public:
    template<size_t R, size_t C>
    Sub2D(T(&ar)[R][C], int top, int left, int height, int width)
    : parent(ar[0])
    , row(top)
    , col(left)
    , max_row(R)
    , max_col(C)
    {
        if ((row+width) >= R || (col+height) >= C)
            throw std::out_of_range("");
    }

    // retrieve our subrow offset into the main 2D array
    T* operator [](size_t n)
    {
        // enable at your desire, but as Alex pointed out, all
        // the standard containers let you shoot yourself in the
        // foot with this operator. why not this one too =P
        //if (row+n >= max_row)
        //    throw std::out_of_range("");

        return parent + ((row+n)*max_col + col);
    }

private:
    T* parent;
    size_t row, col;
    size_t max_row, max_col;
}; 
```

像这样使用，假设您的问题中的数组是我们所基于的数组：

```
int main()
{
    // take the submatrix & [6][7] that is 7x7 in dimension.
    Sub2D<int> sub(map, 6,7, 7,7);
    for (size_t i=0;i<7;++i)
    {
        for (size_t j=0;j<7;++j)
            cout << sub[i][j] << ' ';
        cout << endl;
    }
    cout << endl;

    // update an element at location [1][1] of our sub-matrix.
    sub[1][1] = 9;

    // reprint the *entire* main array. it better have updated.
    for (size_t i=0;i<sizeof(map)/sizeof(map[0]);++i)
    {
        for (size_t j=0;j<sizeof(map[0])/sizeof(map[0][0]);++j)
            cout << map[i][j] << ' ';
        cout << endl;
    }
    cout << endl;

    return 0;
} 
```

产生以下输出。

```
2 2 1 1 1 1 1 
1 0 0 0 0 0 1 
1 0 0 0 0 0 1 
1 0 0 0 0 0 1 
1 0 0 0 0 0 1 
1 0 0 0 0 0 1 
1 1 1 1 1 1 1 

0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 
0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 
0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 
0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 
0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 
0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 
0 0 0 0 0 0 0 2 2 1 1 1 1 1 0 0 0 0 0 0 0 0 0 0 0 0 0 0 
0 0 0 0 0 0 0 1 9 0 0 0 0 1 0 0 0 0 0 0 0 0 0 0 0 0 0 0 
0 0 0 0 0 0 0 1 0 0 0 0 0 1 0 0 0 0 0 0 0 0 0 0 0 0 0 0 
0 0 0 0 0 0 0 1 0 0 0 0 0 1 0 0 0 0 0 0 0 0 0 0 0 0 0 0 
0 0 0 0 0 0 0 1 0 0 0 0 0 1 0 0 0 0 0 0 0 0 0 0 0 0 0 0 
0 0 0 0 0 0 0 1 0 0 0 0 0 1 0 0 0 0 0 0 0 0 0 0 0 0 0 0 
0 0 0 0 0 0 0 1 1 1 1 1 1 1 0 0 0 0 0 0 0 0 0 0 0 0 0 0 
0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 
0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 
0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 
0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 
0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 
0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 
0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 
0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 
```

请注意，现在 9 位于我们期望的位置。

显然，您可以向这样的模板类添加更多内容，包括更好的范围检查、移动指针、快照到其他内存缓冲区等，但重点是基本的 get-me-this 子矩阵指针和一些偏移量很难被击败，尤其是在性能方面。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-13T10:15:35.323

阅读 Boost 的[uBLAS](http://www.boost.org/doc/libs/1_52_0/libs/numeric/ublas/doc/index.htm)模块。它提供了 Matrix 和 MatrixRange 类，这正是您正在寻找的。

本质上，`zoomedMap`应该只是一个指向更大矩阵的智能指针，它知道如何取消引用并获得正确的结果。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-13T10:29:00.990

你总是可以用循环静态地做到这一点：

```
const int pos_x = 6, pos_y = 7, size_x = 7, size_y = 7;

int newMap[size_x][size_y] = {0};

for( int i = pos_x; i != pos_x+size_x; ++i ) {
    for( int j = pos_y; j != pos_y+size_y; ++j) {
        newMap[i-pos_x][j-pos_y] = map[i][j];
    }
} 
```

虽然这不是很安全，并且很难动态工作。您可能想用您想要的功能编写一个矩阵包装类；或找到一个已经存在并扩展它（我会开始研究现有矩阵类的 STL 或 Boost）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-13T13:38:08.707

根据您的要求，这可能就足够了：

```
int (*zoomedMap)[28] = reinterpret_cast<int (*)[28]>(&map[X][Y]); 
```

这为您提供了一个标识符，您可以像使用二维数组一样使用它：`zoomedMap[i][j]`. 您可以通过为其分配新地址轻松地在更大的数组中移动缩放的地图。

这取决于您的 C++ 实现，允许将指向浮点数的指针强制转换为指向浮点数数组的指针，前提是所有引用都保留在原始数组中。这很常见。

它`zoomedMap`指向与 相同的内存`map`。因此，你不能改变一个而不改变另一个。如果你想这样做，你需要制作一个副本。

# java - 恢复活动时 FPS 降低

> ID：14302322
> 
> 赞同：0
> 
> 时间：2013-01-13T09:40:48.410
> 
> 标签：java, android

我尝试制作我的第一个 android 应用程序。当我暂停然后恢复主要活动（基本上是在显示设置菜单时）时，它运行良好但奇怪的是，应用程序 FPS 降低了很多，我不知道为什么。

这是我的结构：
DrawView 是一个实现 View 类的类，它有一个“更新”方法，它在每一帧（计算和绘图）上做这些事情。
主要活动创建一个 DrawView（作为内容视图）并使用一个 Handler 和一个 Runnable 请求它每 10 毫秒刷新一次。

这是 Main.java 的（简化）代码：

```
public class Main extends Activity {
    DrawView drawView;
    private Handler myHandler;
    private Runnable myRunnable = new Runnable() {
        public void run() {
            drawView.update();
            myHandler.postDelayed(this, 10);
        }
    };

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        drawView = new DrawView(this);
        setContentView(drawView);
        myHandler = new Handler();
        myHandler.post(myRunnable);
    }

    @Override
    protected void onPause() {
        super.onPause();
        if(myHandler != null) myHandler.removeCallbacks(myRunnable);
    }

    @Override
    protected void onResume() {
        super.onResume();
        if(myHandler != null) myHandler.post(myRunnable);
    }

    @Override
    public boolean onOptionsItemSelected(MenuItem item) {
        switch(item.getItemId())
        {
        case R.id.menu_close:
            finish();
            break;
        case R.id.menu_settings:
            Intent settingsActivity = new Intent(getBaseContext(), Preferences.class);
            startActivity(settingsActivity);
        }
        return super.onOptionsItemSelected(item);
    }
} 
```

通过在 DrawView.update 方法中实现 FPS 计数器，我注意到 FPS 从开始时的 100+ 下降到打开然后关闭首选项 Activity 后的上限 60。

我不明白我的错误在哪里。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T14:41:02.523

原因很简单：您`Runnable`两次（在`onCreate`和`onResume`方法中）发布您的对象，`DrawView.update()`实际上每 10 毫秒会被调用一次而不是一次。

当`Activity`暂停时，您调用`myHandler.removeCallbacks(myRunnable)`它会删除先前添加的两个对象**。**`Activity`恢复后，您再次发布`Runnable`但仅发布一次（因为未调用“onCreate”）。

# php - 尝试使作曲家获取最新的软件包版本时如何解决未找到软件包的错误？

> ID：14302326
> 
> 赞同：3
> 
> 时间：2013-01-13T09:41:15.073
> 
> 标签：php, symfony, composer-php

我正在将 symfony2 与作曲家一起使用。[http://getcomposer.org/doc/04-schema.md](http://getcomposer.org/doc/04-schema.md)

我想要 composer.json 中的所有插件，我总是得到包的最新版本

我试过这个我得到错误

```
"php": ">=5.3.3",
        "symfony/symfony": "dev-master",
        "doctrine/orm": ">=2.2.3,<dev-master",
        "doctrine/doctrine-bundle": "dev-master",
        "twig/extensions": "dev-master*",
        "symfony/assetic-bundle": "dev-master",
        "symfony/swiftmailer-bundle": "dev-master",
        "symfony/monolog-bundle": "dev-master",
        "sensio/distribution-bundle": "dev-master",
        "sensio/framework-extra-bundle": "dev-master",
        "sensio/generator-bundle": "dev-master",
        "jms/security-extra-bundle": "dev-master",
        "jms/di-extra-bundle": "dev-master",
        "doctrine/doctrine-migrations-bundle": "dev-master",
        "jms/serializer-bundle": "dev-master",
        "genemu/form-bundle": "dev-master",
        "stof/doctrine-extensions-bundle": "dev-master",
        "friendsofsymfony/user-bundle": "*" 
```

错误是

```
Your requirements could not be resolved to an installable set of packages.

  Problem 1
    - The requested package twig/extensions dev-master* could not be found. 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-13T09:49:24.370

用于树枝/扩展的版本是`dev-master`，但您使用的是`dev-master*`. 最后删除通配符，它​​应该会更好。

# wix - 如何使用构建配置更改 .wxs 文件中的 url

> ID：14302331
> 
> 赞同：2
> 
> 时间：2013-01-13T09:41:53.707
> 
> 标签：wix, installation

我在 Visual Studio 2012 中有一个 Wix 安装项目，并且有一个类似的 xml 节点

```
<MsiPackage ... DownloadUrl="http://uat.mywebsite.com/MyMSI.msi"> 
```

我想根据构建配置更改 url。即在 uat 中，我希望它是[http://uat.mywebsite.com/](http://uat.mywebsite.com/) ...并在发布时[http://mywebsite.com/](http://mywebsite.com/) ...

这是可能的，如果可以，我该怎么做？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-14T17:07:37.613

您的 WiX 项目可以访问构建参数，例如配置 (`debug`或`release`)。您可以通过在组件声明中`DownloadUrl`引用有条件地包含正确的当前配置：`$(var.Configuartion)`

没有对此进行测试，但类似的东西应该可以工作：

```
 <?if $(var.Configuartion) = Release?>
 <?define DownloadUrl = "http://uat.mywebsite.com/" ?>
 <?elseif $(var.Configuartion) = Debug?>
 <?define DownloadUrl = "http://mywebsite.com/" ?>     
 <?endif ?>

 <MsiPackage ... DownloadUrl="$(var.DownloadURL)"> 
```

# php - 登录成功后Facebook不发送get参数

> ID：14302335
> 
> 赞同：0
> 
> 时间：2013-01-13T09:42:25.683
> 
> 标签：php, facebook, facebook-graph-api, facebook-php-sdk

我正在为我的 facebook 应用程序使用 php sdk。我正在使用以下代码作为登录网址

```
if (isset($username)) {
    $loginUrl = $facebook->getLoginUrl(
            array(
                'scope' => $scope,
                'redirect_uri' => 'http://www.mysite.com/redirect.php?username=' . $username
            ) 
```

我的问题是登录后，当 facebook 将页面重定向到 redirect.php 但它删除了`?username=ursername`. 登录后我需要用户名作为获取参数。我怎样才能做到这一点。请给我建议。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T10:18:18.487

您不能将用户名传递给 redirect_uri。这并不是真正的意思，但是`state`您可以传递一个返回给您的参数。

请参阅文档：

[https://developers.facebook.com/docs/reference/dialogs/oauth/](https://developers.facebook.com/docs/reference/dialogs/oauth/)

```
define('REDIRECT_URI',"YOUR-REDIRECT-URL-HERE");
    $user = null;

    $facebook = new Facebook(array(
        'appId' => FACEBOOK_APP_ID,
        'secret' => FACEBOOK_SECRET,
        'cookie' => true
    ));

    if (isset($username)) {
    $loginUrl = $facebook->getLoginUrl(
            array(
                'scope' => $scope,
                'redirect_uri' => REDIRECT_URI
            ) 
```

# java - 如何在多对多关系链接表中插入记录

> ID：14302336
> 
> 赞同：0
> 
> 时间：2013-01-13T09:43:06.090
> 
> 标签：java, mysql, jdbc

目前我正在做一个医院管理系统项目。我有两张表医生和病人，并在他们之间建立了一个链接表访问。医生表和病人表的主键分别是访问表的外键。我可以从我的代码更新医生表。每当向患者表中插入一条记录时，都会检查医生表以确定分配的医生是否存在，如果医生存在，则将其插入访问表中。为此，我在患者表上创建了一个触发器。现在，每当我尝试注册患者时，患者表都会更新，但代码会抛出一条`MySQLException`消息“列计数与第 1 行的值计数不匹配”。

代码

```
 this.stmt=this.mycon.createStatement();
         String query_add_patient="insert into patients values    ('"+nic+"','"+name+"','"+address+"','"+city+"',"+age+",'"+dob+"','"+telephone+"');";

        String query_select_employees="select * from employees where employee_type='Doctor' and employee_qualification='"+doctor+"'";
        ResultSet rs=this.stmt.executeQuery(query_select_employees);
        if(!rs.next()) {
            JOptionPane.showMessageDialog(this, "This Doctor is not available in this facility!!!","Admin Error",JOptionPane.ERROR_MESSAGE);
            return false;
        }
        rs.first();
        String pattern = "yyyy-m-d";
        SimpleDateFormat format = new SimpleDateFormat(pattern);
        String enic=rs.getString("employee_nic");
        System.out.println(enic);
        String query="insert into Visits (patient_nic,employee_nic) values ("+nic+","+enic+")";

        this.stmt.executeUpdate(query_add_patient);
        closeConnection();
        openConnection();
        this.stmt=mycon.createStatement();
        this.stmt.executeUpdate(query);
        return true; 
```

这里的“插入访问”语句会导致问题。我试图关闭并再次打开连接，但没有奏效。我的访问表的结构是

访问

```
 patient_nic (varchar(45)) FK  --> patient.patient_nic
  employee_nic (varchar(45)) FK --> employee-->employee_nic 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T10:08:02.923

确保每个列名都有一个匹配的值，反之亦然。

例如

```
 Good
   $query = "INSERT INTO table (first_name, last_name)
      VALUES(Mr,Kyaw)";
   Bad
   $query = "INSERT INTO table (first_name, last_name)
      VALUES(Mr,Kyaw,Thu)"; //can give Column Count Does Not Match Value Count At Row 1 exception 
```

# ruby - 字符串#包括？只检查第一个位置

> ID：14302345
> 
> 赞同：0
> 
> 时间：2013-01-13T09:44:45.743
> 
> 标签：ruby

我有一种方法可以检查一个单词是否包含某个字母。字符串#include? 如果字符串对象在任何位置包含字母，则方法应该返回 true。但是，我的方法只有在字母 (char_clicked) 和单词第一个位置的字母 (final_word) 匹配时才返回 true。例如，如果 final_word 参数是西班牙，则该方法仅在 "S" 是 char_clicked 时返回 true，如果 char_clicked 是 "_pain" 中的任何一个则返回 false

你能减轻我的痛苦并告诉我我做错了什么吗......

```
def correct_guess?(char_clicked, final_word)
      puts char_clicked, final_word      #p, Spain  
      puts final_word.is_a?(String)      #true
      puts "checking if string"
      puts final_word.include?(char_clicked)  #false
  final_word.include?(char_clicked)
end 
```

**更新**

即使我将字符串转换为数组并检查字母，我也会得到相同的结果

```
puts final_word.split("").include?(char_clicked) 
```

但是，如果我在该应用程序的控制台中使用包含，它工作正常

```
>> s = "brazil"
=> "brazil"
>> s.include?("z")
=> true 
```

* * *

看到这个问题的第一个回答证实了包括？应该按照我上面展示的方式工作，我提供了更多信息，希望能解释为什么它不能像预期的那样工作

final_word 在发送到 correct_guess 之前被拉出会话？检查方法。char_clicked 被拉出参数

```
def check 
    final_word = session[:word]
    char_clicked = params[:char_clicked]
    correct_guess = Game.correct_guess?(char_clicked, final_word)
    .... 
```

将 char_clicked 发送到上述检查方法的 Ajax 请求

```
$.ajax({
        url: "/check",
        type: "POST",
        data: {char_clicked: this.get("char_clicked")},
        success: function(response) {
          console.log(response);
          var json = $.parseJSON(response);

          if (response.incorrect_guesses >= _this.get("threshold")) _this.set({lost: true});
          if (response.win) _this.set({win: true});

          _this.trigger("guessCheckedEvent", response);
        }
      })
    }, 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T10:48:40.720

也许`include?`在某处被覆盖（monkeypatched）。下面的工作吗？

```
def correct_guess?(char_clicked, final_word)
  final_word =~ /#{char_clicked}/i
end 
```

regex-matcher 方法也不太可能被覆盖。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-13T18:39:37.987

这是一个高级问题。final_word 始终是一个专有名称，“巴西”，只有第一个字母大写。但是，char_clicked 始终是大写的。方法的相等匹配`include?`仅在有大小写匹配时才返回 true。如果我在检查它是否包含 char_clicked 之前更改了使 final_word 大写的方法，它会返回预期的 true 或 false

```
final_word.upcase.include?(char_clicked) 
```

# joomla - 成功时 Joomla 2.5 中的系统消息

> ID：14302346
> 
> 赞同：0
> 
> 时间：2013-01-13T09:44:48.640
> 
> 标签：joomla, system, backend

我在后端开发了一个组件，现在遇到了更新数据后看不到系统消息的问题。我想我错过了消息框或一些代码之类的东西，但仍然无法准确定义它是什么。谁能告诉我获取这些消息需要哪些数据？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T04:34:44.537

```
// Get a handle to the Joomla! application object
$application = JFactory::getApplication();

// Add a message to the message queue
$application->enqueueMessage(JText::_('SOME_ERROR_OCCURRED'), 'error');

/** Alternatively you may use chaining */
JFactory::getApplication()->enqueueMessage(JText::_('SOME_ERROR_OCCURRED'), 'error'); 
```

enqueueMessage 函数的第二个参数是消息的类型。默认值为“消息”，但“错误”会导致消息的样式不同。该消息将代替`jdoc:include`模板中的特殊声明显示。将以下内容放在模板中您希望消息出现的位置。

```
<jdoc:include type="message" /> 
```

[阅读更多](http://docs.joomla.org/Display_error_messages_and_notices)

# c++ - glReadPixels 与 glPixelStore 的使用

> ID：14302349
> 
> 赞同：1
> 
> 时间：2013-01-13T09:45:30.080
> 
> 标签：c++, opengl, glut, pixel, glreadpixels

我看了多个关于 glReadPixels 的教程，但我很困惑：

void glReadPixels(GLint x, GLint y, GLsizei 宽度, GLsizei 高度, GLenum 格式, GLenum 类型, GLvoid * 数据)

最后一个参数是无效的？我看到了教程，他们将参数声明为向量，无符号字符，GLubyte，......但它的真正含义是什么？你需要调用 glPixelStoref( , ) 吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-13T10:10:01.877

A`void*`是 C/C++ 表示“指向内存块的指针”。的目的`glReadPixels`是获取帧缓冲区的一部分并将像素数据写入内存。`data`参数是它写入的“你的记忆” 。

它写入的确切*内容*和多少取决于[像素传输参数](http://www.opengl.org/wiki/Pixel_Transfer)，`format`以及`type`。这就是为什么它需要一个`void*`; 因为它可能正在写入一个字节数组、一个整数数组、一个浮点数组等。这完全取决于这两个参数的含义。

# iphone - 从 iOS 6 地址簿获取社交资料

> ID：14302352
> 
> 赞同：2
> 
> 时间：2013-01-13T09:45:51.780
> 
> 标签：iphone, objective-c, facebook, social-networking, ios5

在模拟器/iPhone 5 中，我有一些从 Facebook 导入的联系人。现在我正在尝试使用 iPhone 通讯簿框架来阅读这些配置文件。不幸的是，它没有返回任何东西。下面是我目前正在使用的代码片段，

```
ABRecordRef person = ABAddressBookGetPersonWithRecordID(ABAddressBookCreate(), (ABRecordID)recordId)
ABMultiValueRef social = ABRecordCopyValue((__bridge ABRecordRef)person, kABPersonSocialProfileProperty);
//the count of 'social' is empty event there is a Facebook profile is attached to the contact.
if (social) {
    for (int i = 0 ; i < ABMultiValueGetCount(social); i++) {
         NSDictionary *socialDict = (NSDictionary *)ABMultiValueCopyValueAtIndex(social, i);
         NSString* service = [socialDict valueForKey:(NSString *)kABPersonSocialProfileServiceKey];
         NSString* username = [socialDict valueForKey:(NSString *)kABPersonSocialProfileUsernameKey];
         NSLog(@"service... %@, username... %@", service, username);
    }
}
CFRelease(social); 
```

任何帮助表示赞赏。

# javascript - javascript 循环链表

> ID：14302353
> 
> 赞同：0
> 
> 时间：2013-01-13T09:46:03.417
> 
> 标签：javascript, linked-list

这段代码有什么问题？我想做一些类似于循环链表的东西。

```
 <script type="text/javascript" charset="utf-8">
        function LinkedText(text, nextLinkedText) {
            this.text = text;
            this.next = nextLinkedText;
            this.AsNext= function() {
                this.text = this.next.text;
                this.next = this.next.next;
                return this;
            }
        }

        var first = new LinkedText('first')
        var last = new LinkedText('last', first);
        first.next = last;

        alert(first.text); //show 'firts'
        alert(first.AsNext().text); //show 'last'
        alert(first.AsNext().text); //show 'last' not 'first' why?
        alert(first.AsNext().text); //show 'last'
        alert(first.AsNext().text); //show 'last' not 'first' why?
    </script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T09:48:41.343

重写GetNext：

```
this.GetNext = function() {
    return this.next;
} 
```

当您只想获取链接节点并访问它的*text*时，在 GetNext中重新分配*this.text*是没有意义的。

 *你可以像这样使用它：

```
var i = 0            // avoid infinite loop below
var maxruns = 10;    // avoid infinite loop below

var node = first;
while(node){
    doSomethingWithNode(node);
    node = node.GetNext();

    // avoid an infinite loop
    i++;
    if (i > maxruns) {
        break;
    }
} 
```*

# ios6 - 使用 calendarItemWithIdentifier 查找日历事件

> ID：14302356
> 
> 赞同：1
> 
> 时间：2013-01-13T09:46:19.693
> 
> 标签：ios6, xcode4.5, eventkit

我正在尝试通过新的 iOS 方法 calendarItemWithIdentifier 查找日历事件。我不能使用 eventWithIdentifier，因为在事件与服务器同步后标识符发生了变化。calendarItemIdentifier 不是。

但是 calendarItemWithIdentifier 总是返回 (null)。

```
 EKEventStore *store = [[EKEventStore alloc] init];

[store requestAccessToEntityType:EKEntityTypeEvent completion:^(BOOL granted, NSError *error) {
    if (granted) {

        // Create event.
        EKEvent *event = [EKEvent eventWithEventStore:store];
        event.title = self.title;
        event.startDate = [[NSDate date] dateByAddingTimeInterval:3600];
        event.endDate = [[NSDate date] dateByAddingTimeInterval:7200];
        event.timeZone = [NSTimeZone defaultTimeZone];
        event.calendar = [store defaultCalendarForNewEvents];

        BOOL success = [store saveEvent:event span:EKSpanThisEvent commit:YES error:&error];
        if (success)
        {
            NSString *calendarItemIdentifier = event.calendarItemIdentifier;
            NSLog(@"Assigned identifier: %@", calendarItemIdentifier);

            // Look up the event in the calendar.
            event = (EKEvent *)[store calendarItemWithIdentifier:calendarItemIdentifier];
            if (event) {
                NSLog(@"FOUND");
            } else {
                NSLog(@"NOT FOUND");
            }
        }
    }

}]; 
```

从日志：

```
2013-01-13 10:32:52.042 CalendarIntegration[6095:1303] Assigned identifier: C5FD3792-EBF1-4766-B27D-2767E5C8F3BE
2013-01-13 10:32:52.043 CalendarIntegration[6095:1303] NOT FOUND 
```

帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-12T18:39:03.383

根据文档，这种行为符合预期，[链接](http://developer.apple.com/library/ios/documentation/EventKit/Reference/EKCalendarItemClassRef/Reference/Reference.html#//apple_ref/doc/uid/TP40010882-CH1-DontLinkElementID_2)，

> 与日历完全同步将丢失此标识符。你应该有一个计划来处理一个日历，它的标识符不再可以通过缓存它的其他属性来获取。

# php - jquery以纯文本查找http元素并将其转换为链接

> ID：14302357
> 
> 赞同：0
> 
> 时间：2013-01-13T09:46:21.917
> 
> 标签：php, jquery, jquery-selectors

我不知道这是否可能，但我有一段纯文本，其中始终包括：

```
http://www.royalmail/portal/etc/etc/track.php?trackNumber=123345323 
```

当从数据库拖到我的页面时，这显然不会呈现为链接。有什么方法可以选择这段文本（即`http://`通过`http://`例如“跟踪包裹”

应该注意的是，可能会同时循环出许多跟踪引用。

我的包含HTML如下

```
<div class="message_holder">
                <div class="mess_head" style="width:110px;">
                    <p><strong>Sender: </strong><? echo $row11['sender'];?></p>
                </div>
                <div class="mess_head" style="width:450px;">
                    <p><strong>Subject: </strong><span class="red"><? echo $row11['subject'];?></span></p>
                </div>
                <div class="mess_head" style="width:150px;">
                    <p><strong>Date Sent: </strong><? echo date('d/m/Y, H.ia', $row11['date_sent']);?></p>
                </div>
                <div class="mess_head" style="width:200px;">
                    <p><strong>Message ID: </strong><? echo $row11['message_id'];?></p>
                </div>
                <div class="mess_body">
                    <p><? echo html_entity_decode($row11['message']);?></p>
                </div>
            </div> 
```

纯文本链接都将显示在“mess_body”类中。我试过使用`html_entity_decode()`，但这并没有成功。如果有一种简单的方法可以通过 PHP 而不是 JQuery 做到这一点，它可能会更简单。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-13T09:56:39.247

我会用 PHP 做到这一点：

```
$text = preg_replace(
    '@(https?://([-\w\.]+)+(:\d+)?(/([\w/_\.]*(\?\S+)?)?)?)@', 
    '<a href="$1">$1</a>', /* or <a href="$1">Your TEXT</a> */
    $text
); 
```

如果我猜对了，url 可以在你的消息中，所以你的代码应该是这样的：

```
<?php 
    echo 
     preg_replace(
        '@(https?://([-\w\.]+)+(:\d+)?(/([\w/_\.]*(\?\S+)?)?)?)@smi', 
        '<a href="$1">$1</a>',
        html_entity_decode($row11['message'])
     );
 ?> 
```

# c - unix 域套接字的 tcp_nodelay 设置

> ID：14302363
> 
> 赞同：4
> 
> 时间：2013-01-13T09:48:14.583
> 
> 标签：c, linux, sockets, unix, tcp

我正在尝试在 unix 域套接字上设置标志 tcp_nodelay。我们可以设置它吗，或者为 UNIX 域套接字设置 tcp_nodelay 是否有意义，特别是在 Linux 上？

请指教。

谢谢

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-13T09:51:06.790

Unix 域套接字不使用 Nagle（显然也不使用 TCP）。此外，它被调用的事实`tcp_nodelay`表明它是一个仅限 TCP 的东西。

# iphone - iOS 6 Maps - Cannot Find Directions

> ID：14302369
> 
> 赞同：0
> 
> 时间：2013-01-13T09:48:54.533
> 
> 标签：iphone, ios, objective-c, mapkit, cllocationmanager

I am trying to direct my users to iOS 6 native maps for directions from their current location to a latitude, longitude location as follows:

```
MKPlacemark *placemark = [[MKPlacemark alloc] initWithCoordinate:placeLocation addressDictionary:nil];
MKMapItem *destination = [[MKMapItem alloc] initWithPlacemark:placemark];
MKMapItem *currentLocation = [MKMapItem mapItemForCurrentLocation];
NSArray *mapItems = @[destination, currentLocation];
NSDictionary *options = @{MKLaunchOptionsDirectionsModeKey:MKLaunchOptionsDirectionsModeDriving, MKLaunchOptionsMapTypeKey: [NSNumber numberWithInteger:MKMapTypeStandard], MKLaunchOptionsShowsTrafficKey:@YES};
[MKMapItem openMapsWithItems:mapItems launchOptions:options]; 
```

I have set my simulator to my latitude and longitude. What is wrong with my code here?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T10:47:32.693

the code is fine and works for me GIVEN there is a route possible

works when directions between currentLocation and destination can be given. if currentLocation is in the US, maps fails because it can't navigate from germany to the us. but if the currentLocation is in europe too, the maps app works fine :)

```
//placeMarkCoord fixed to germany
MKPlacemark *placemark = [[MKPlacemark alloc] initWithCoordinate:CLLocationCoordinate2DMake(51.0, 10.0) addressDictionary:nil];
MKMapItem *destination = [[MKMapItem alloc] initWithPlacemark:placemark];

//currentLocation must be reachable from destination!
//MKMapItem *currentLocation = [MKMapItem mapItemForCurrentLocation];
placemark = [[MKPlacemark alloc] initWithCoordinate:CLLocationCoordinate2DMake(51.0, 11.0) addressDictionary:nil];
MKMapItem *currentLocation = [[MKMapItem alloc] initWithPlacemark:placemark];

NSArray *mapItems = @[destination, currentLocation];
NSDictionary *options = @{MKLaunchOptionsDirectionsModeKey:MKLaunchOptionsDirectionsModeDriving, MKLaunchOptionsMapTypeKey: [NSNumber numberWithInteger:MKMapTypeStandard], MKLaunchOptionsShowsTrafficKey:@YES};
[MKMapItem openMapsWithItems:mapItems launchOptions:options]; 
```

# ios - iPhone 模拟器和真实设备上关于消息转发的不同行为

> ID：14302371
> 
> 赞同：6
> 
> 时间：2013-01-13T09:49:03.263
> 
> 标签：ios, objective-c, objective-c-runtime

我想使用消息转发让任何未实现的 getter 方法返回 0，而不是抛出无法识别的选择器异常。喜欢

```
MyClass *r = [[MyClass alloc] init];
NSNumber *n = (NSNumber *)r;
NSLog(@"%d", [n integerValue]); // output 0
NSLog(@"%f", [n doubleValue]); // output 0.00000
NSLog(@"%@", [n stringValue]); // output (null) 
```

所以我写了这个例子：

```
#pragma mark -
#pragma mark Application lifecycle

- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions {    

    NSNumber *n = (NSNumber *)self;
    NSLog(@"%d", [n integerValue]);
    NSLog(@"%f", [n doubleValue]);
    NSLog(@"%@", [n stringValue]);

    return YES;
}

- (NSMethodSignature *)methodSignatureForSelector:(SEL)aSelector {
    NSMethodSignature *ms = [super methodSignatureForSelector:aSelector];
    if(ms)
        return ms;

    // Q = uint64_t, so it should also works for double which is also 64bit
    return [NSMethodSignature signatureWithObjCTypes:"Q@:"];
}

- (void)forwardInvocation:(NSInvocation *)anInvocation {
    uint64_t ZERO64 = 0;
    [anInvocation setReturnValue:&ZERO64];
} 
```

真实设备上的输出结果是 0, 0.00000, (null)，但在模拟器上是 0, NaN, (null)

所以 double 类型不能按预期工作。我的第一个想法是将 NSMethodSignature 更改为“d@:”（d 是双倍的）

输出结果在设备和模拟器上都是正确的，但只有模拟器上发生了一些奇怪的事情。运行此代码，它将在第 6 次循环中崩溃，并出现某种 CALayer 异常：

```
#pragma mark -
#pragma mark Application lifecycle

- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions {    

    for(NSInteger i = 0; i < 100; i++) {
        NSInteger t = [(NSNumber *)self integerValue];

        UIViewController *view = [[UIViewController alloc] init];
        // it always crash on the 6th loop on this line**
        UINavigationController *nc = [[UINavigationController alloc] initWithRootViewController:view];
    }

    return YES;
}

- (NSMethodSignature *)methodSignatureForSelector:(SEL)aSelector {
    NSMethodSignature *ms = [super methodSignatureForSelector:aSelector];
    if(ms)
        return ms;

    // we change to return double
    return [NSMethodSignature signatureWithObjCTypes:"d@:"];
}

- (void)forwardInvocation:(NSInvocation *)anInvocation {
    uint64_t ZERO64 = 0;
    [anInvocation setReturnValue:&ZERO64];
} 
```

我很好奇两个问题，为什么在第一个示例中在模拟器上返回 NaN，以及在第二个示例中发生了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-13T11:47:45.480

对于您的第一个问题，这是我在模拟器上发现的

```
union {
    double d;
    uint64_t l;
} u;
NSNumber *n = (NSNumber *)self;
u.d = [n doubleValue];
NSLog(@"%f", u.d);  // nan
NSLog(@"%llx",u.l); // fff8000000000000
bzero(&u, sizeof(double));
NSLog(@"%f", u.d);  // 0.000000
NSLog(@"%llx",u.l); // 0 
```

很明显，返回的是 NAN(fff8000000000000) 而不是 0.0。

`[NSMethodSignature signatureWithObjCTypes:"d@:"]`要更深入地了解and之间的区别`[NSMethodSignature signatureWithObjCTypes:"Q@:"]`，请看这个

```
NSLog(@"%@\n%@", [[NSMethodSignature signatureWithObjCTypes:"Q@:"] debugDescription], [[NSMethodSignature signatureWithObjCTypes:"d@:"] debugDescription]); 
```

输出

```
<NSMethodSignature: 0x74a0950>
    number of arguments = 2
    frame size = 8
    is special struct return? NO
    return value: -------- -------- -------- --------
        type encoding (Q) 'Q'
        flags {}
        modifiers {}
        frame {offset = 0, offset adjust = 0, size = 8, size adjust = 0}
        memory {offset = 0, size = 8}
    argument 0: -------- -------- -------- --------
        type encoding (@) '@'
        flags {isObject}
        modifiers {}
        frame {offset = 0, offset adjust = 0, size = 4, size adjust = 0}
        memory {offset = 0, size = 4}
    argument 1: -------- -------- -------- --------
        type encoding (:) ':'
        flags {}
        modifiers {}
        frame {offset = 4, offset adjust = 0, size = 4, size adjust = 0}
        memory {offset = 0, size = 4}

<NSMethodSignature: 0x74a1e80>
    number of arguments = 2
    frame size = 8
    is special struct return? NO
    return value: -------- -------- -------- --------
        type encoding (d) 'd'
        flags {isFloat}    <<<<----- this flag should be set if the return value is float type
        modifiers {}
        frame {offset = 0, offset adjust = 0, size = 8, size adjust = 0}
        memory {offset = 0, size = 8}
    argument 0: -------- -------- -------- --------
        type encoding (@) '@'
        flags {isObject}
        modifiers {}
        frame {offset = 0, offset adjust = 0, size = 4, size adjust = 0}
        memory {offset = 0, size = 4}
    argument 1: -------- -------- -------- --------
        type encoding (:) ':'
        flags {}
        modifiers {}
        frame {offset = 4, offset adjust = 0, size = 4, size adjust = 0}
        memory {offset = 0, size = 4} 
```

您可以在第二个方法签名`flags {isFloat}`上看到返回值。我不是 x86 和 AMR 以及低级 ObjC 运行时方面的专家。但我认为 CPU 使用这个标志来识别返回值的类型。如果不在 x86 CPU 上设置它，预期的浮点返回值因此被解释为 NAN。

* * *

对于您的第二个问题，我认为这是因为您告诉运行时它将返回一个 64 位大小的值，因此堆栈上的 64 位大小的内存为零。但是，调用者期望返回大小为 32 位 (NSInteger)。因此发生了某种堆栈溢出并导致崩溃。

* * *

我实际上实现了类似的东西，旨在制作`NSNull`类似`nil`.

```
- (NSMethodSignature *)methodSignatureForSelector:(SEL)aSelector {
    NSMethodSignature *signature = [super methodSignatureForSelector:aSelector];
    if (signature)
        return signature;

    const Class forwardClasses[] = {[NSNumber class], [NSString class], [NSArray class], [NSOrderedSet class]}; // add new classes if you think the list is not enough

    for (int i = 0; i < sizeof(forwardClasses)/sizeof(Class); i++) {
        Class cls = forwardClasses[i];
        signature = [cls instanceMethodSignatureForSelector:aSelector];
        if (signature) {
            return signature;
        }
    }

    return signature;
}

- (void)forwardInvocation:(NSInvocation *)anInvocation {
    NSUInteger len = [[anInvocation methodSignature] methodReturnLength];
    char buff[len];
    bzero(buff, len);
    [anInvocation setReturnValue:buff];
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-13T14:17:39.850

如果您想使用消息转发让任何未实现的 getter 方法返回 0，而不是抛出无法识别的选择器异常，也许您可​​以改用 +resolveInstanceMethod ？

这是一个返回 NSString 的示例。您必须对其进行调整以返回原语。如果你有麻烦，请告诉我。

如果您使用的是 ARC，您还需要在 void* 上安装一个桥。

```
+ (BOOL)resolveInstanceMethod:(SEL)sel
{
    NSString* name = NSStringFromSelector(sel);

    IMP imp = imp_implementationWithBlock((void*) objc_unretainedPointer(^(id me, BOOL selected)
    {
        return @"Hello!";
    }));
    class_addMethod(self, sel, imp, "@"); //The type '@' is an object. For int use 'i'. Google "obj-c runtime types" 
    return YES;
} 
```

当我们使用 class_addMethod 时，第三个参数是类型代码。. . 解决它们的一个好方法是制作一个真正的方法，然后对其进行反省。这是一个实用程序，用于返回类上（真实）选择器的类型代码： [https](https://github.com/jasperblues/spring-objective-c/blob/master/Source/) ://github.com/jasperblues/spring-objective-c/blob/master/Source/ ... – user404201 6 分钟前

# php - 升级时 cakephp 模型类未找到错误

> ID：14302376
> 
> 赞同：-1
> 
> 时间：2013-01-13T09:50:45.480
> 
> 标签：php, cakephp, upgrade

我正在尝试将我的 CakePHP 应用程序从升级`1.3.6`到`2.2.4`

我根据官方 CakePHP 升级文档完成了所有升级步骤。

但我正在努力解决这个错误：

> 在第 20 行的 C:\wamp\www\cakephp-2.2.4\app\Controller\Component\OrderBaseComponent.php 中找不到类“内容”
> 
> 传递给 Component::__construct() 的参数 1 必须是 ComponentCollection 的实例，没有给出，在第 17 行的 C:\wamp\www\cakephp-2.2.4\app\Controller\Component\OrderBaseComponent.php 中调用并定义 [ CORE\Cake\Controller\Component.php，第 77 行]

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T12:30:27.867

对于第一个错误，请确保您**始终**App::uses() 您在代码中使用的每个类。因此，您的内容（无论它是什么类）也必须包含在内，然后才能实际使用它。

只有当它是一个你可以使用的模型时`ClassRegistry::init()`，否则将 sth like `App::uses('Content', '[TYPE]');`放在文件的顶部。

第二个错误是不言自明的！查看概述的“CORE\Cake\Controller\Component.php”文件并确保您的函数在您的自定义组件中确实具有完全相同的参数：

```
public function __construct(ComponentCollection $collection, $settings = array()) {
    //...
} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-13T11:33:58.637

我们没有任何相关的源代码，但通常您可以将其添加到顶部或组件文件中：

**第一的：**

```
 App::uses('Content', 'Model'); 
```

您可能必须在 init 或构造方法中添加类似的内容：

```
$this->Content = ClassRegistry::init('Content'); 
```

这应该可以解决第一个问题，或者对出了什么问题给出明确的解释。实际上，这段代码可能已经不是正确独立的功能。

我怀疑这取决于已经在另一段代码中加载的模型，这就是它可能起作用的原因。组件的工作不应依赖于其他代码，因此添加 App::uses、App::import 等语句可使代码始终工作。例如，当您在其他项目中重新使用它时。

**第二：**

第二个问题确实与迁移问题有关。检查模型是否首先扩展了 Component 类。

然后确保如果您实现了自定义方法 __construct() 以及 init() 例如，您检查是否应该添加对父级的调用。例如，这适用于 beforeFilter 控制器方法。

```
public function beforeFilter() {
    parent::beforeFilter();
} 
```

文档和代码示例来自：[http ://book.cakephp.org/2.0/en/controllers.html#the-app-controller](http://book.cakephp.org/2.0/en/controllers.html#the-app-controller)

相关文档：[http ://book.cakephp.org/2.0/en/appendices/2-0-migration-guide.html#components](http://book.cakephp.org/2.0/en/appendices/2-0-migration-guide.html#components)

# c++ - C++ 声明模板 上面的 int main()

> ID：14302378
> 
> 赞同：0
> 
> 时间：2013-01-13T09:50:50.813
> 
> 标签：c++, templates, main

我的主目录中有一个模板列表，其中有一个模板类对象。

```
List<serviceInfo<T>> priceList; 
```

为了让它正常工作，我必须在我的 main 上方声明模板

```
template <class T>
int main() 
```

这会给我以下错误：

> *LNK2019：函数 _* _tmainCRTStartup中引用的未解析的外部符号main

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-13T09:54:05.507

`main`永远不应该被模板化。

相反，您应该用实际类型替换`T`in 。`List<serviceInfo<T>>`如果您想`serviceInfo<T>`在列表中有不同类型的，请创建多个列表。

# visual-studio-2008 - 在不访问报告项目和文件的情况下调试报告问题

> ID：14302380
> 
> 赞同：0
> 
> 时间：2013-01-13T09:51:09.727
> 
> 标签：visual-studio-2008, reporting-services, reporting, reportviewer2008

我们公司有一个使用 SQL Reporting Service 的网站解决方案：解决方案中有一个 Reporting 项目，但解决方案中缺少该项目。所以我无权访问这些报告，但我知道它们在数据库中调用了哪些程序。目前*只有一份*报告存在生产问题，错误如下：

> 报表服务器发生内部错误。有关更多详细信息，请参阅错误日志。(rslInternalError) 有关此错误的详细信息，请导航到本地服务器计算机上的报表服务器，或启用远程错误。

我用谷歌搜索，我发现我应该查看 SQL Server 报告日志以查看问题所在，我搜索了更多，但对于所有遇到此错误的人，它会发生在所有报告中，而不仅仅是单个报告。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-13T12:19:09.933

该错误消息仅表明存在阻止报告运行的错误；虽然它可以指示实例范围的问题，但它仅与正在运行的实际报告相关，因此也可以仅与该报告相关。

你还没有说你是否搜索过日志文件——这是最好的起点。任何报告异常都将记录在这里。如果您还没有，您应该在这里检查 - 根据您的版本检查位于`%programfiles%\Microsoft SQL Server\<SQL Server Instance>\Reporting Services\LogFiles\`.

尝试获取更多信息的更多建议 - 这些都需要对报表服务器的不同级别的访问。

**启用远程错误**

[http://technet.microsoft.com/en-us/library/aa337165.aspx](http://technet.microsoft.com/en-us/library/aa337165.aspx)

这意味着将显示实际错误而不是您看到的一般错误消息，因此您可能会通过这种方式获得更多信息。

**运行底层存储过程**

数据库级别的错误通常会导致错误，例如除以零错误 - 当您运行存储过程时会发生什么？捕获通过 SQL Profiler 使用的确切参数非常有用，因此您可以准确复制报告正在执行的操作。

**从报表服务器获取报表代码**

您说您丢失了报告代码，但假设您可以从报告服务器获取服务器端报告 - 此链接包含几个不同版本的详细信息：

[http://sql-articles.com/blogs/download-export-rdl-files-from-report-server/](http://sql-articles.com/blogs/download-export-rdl-files-from-report-server/)

**报告查看器中的调试报告**

与下载上述报表定义类似，您可以从报表管理器网站的报表查看器应用程序中打开服务器端报表。这意味着您将能够在与 Visual Studio 类似的环境中查看报表设计器并检查报表代码，以及运行和调试报表。**对生产实例执行此操作时要非常小心 - 只能作为最后的手段**。

希望这会给你一些新的选择。拥有对报表服务器的管理员访问权限将是重要的，以允许您执行所有这些故障排除任务。

# vb.net - VB.NET - 用更少的代码处理许多文本框

> ID：14302386
> 
> 赞同：0
> 
> 时间：2013-01-13T09:52:15.897
> 
> 标签：vb.net

我在一个表单中有很多文本框（大约 10 个）。我希望文本框中的文本在获得焦点时被突出显示。代码如下：

```
Private Sub txtBillNo_GotFocus(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles txtBillNo.GotFocus
   HoverText(txtBillNo)
End Sub

Private Sub HoverText(ByRef ctrl as TextBox)
   ctrl.SelectAll()
End Sub 
```

它工作得很好，但我虽然可以在这里做一些**代码优化**。因为，我有大约 10 个文本框（以及许多其他包含多个文本框的表单），所以我必须`HoverText(TextBox)`在`Private Sub.. Handles TextBox.GotFocus`每个表单中的每个文本框中输入。

我寻找任何表单事件（或任何其他方式），当焦点通过 MouseClick 或 TAB 赋予表单中的另一个控件（文本框）时触发的任何表单事件（或任何其他方式），因此`HoverText(TextBox)`只需为表单编写一次。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-13T10:07:31.750

您可以在`Handles`子句中列出所有文本框：

```
Private Sub atextbox_GotFocus(ByVal sender As System.Object, ByVal e As _
 System.EventArgs) _
           Handles txt1.GotFocus, _
                   txt2.GotFocus, _
                   txt3.GotFocus, _
                   (...remaining text boxes..)
                   txt9.GotFocus, _
                   txt10.GotFocus 
```

或者您可以在加载表单时向所有文本框添加处理程序：

```
Private Sub Form1_Load(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles MyBase.Load
    For Each t In Me.Controls.OfType(Of TextBox)()
        AddHandler t.GotFocus, AddressOf HoverText
    Next
End Sub

Private Sub HoverText(ByVal sender As System.Object, ByVal e As System.EventArgs)
    DirectCast(sender, TextBox).SelectAll()
End Sub 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-13T10:30:39.073

.NET 改变类行为的方法是派生一个新类。VB.NET 和 Winforms 也很好地支持这一点。对于从 Control 派生的任何类，您可以通过覆盖受保护的 OnXxx 事件来拦截事件，其中 Xxx 是事件名称。顺便说一句，您应该使用 Enter 事件。使用 Project + Add Class 并使代码如下所示：

```
Public Class MyTextBox
    Inherits TextBox

    Protected Overrides Sub OnEnter(ByVal e As System.EventArgs)
        Me.Select(0, Me.Text.Length)
        MyBase.OnEnter(e)
    End Sub
End Class 
```

编译。返回您的表单并注意您现在在工具箱顶部有一个新控件。将它拖到表单上并注意它现在的行为方式是否符合您的要求，而无需在您的表单中编写任何代码或事件处理程序。

# java - JavaEE，Jboss，某处的空字符串

> ID：14302387
> 
> 赞同：-5
> 
> 时间：2013-01-13T09:52:26.730
> 
> 标签：java, mysql, jsp, jakarta-ee, jboss

真的很抱歉，但我需要在Java代码下面发布。尽管它是用 JAVA 编写的，但它不起作用。

请帮我找出那个错误，它可能放在 line 中`lista.add...`，描述为 Empty string, parse error。

```
List<Pair<Place,TicketType>> lista = new LinkedList();
for ( String pair: request.getParameter("miejsca").split(" ") )
{
    lista.add(new Pair<Place,TicketType>(place_local.getPlace(Integer.parseInt(pair.split(":")[0].trim())),tt_local.getTicketType(Integer.parseInt(pair.split(":")[1].trim()))));
}
try
{
    reservation_local.addReservation(lista,id,m.getUser((String)session.getAttribute("name")).id);
}
catch (MySQLException e)
{
    out.println(e.getMessage());
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T10:38:39.377

我建议您在迭代之前在单独的步骤中拆分字符串。此外，首先验证您确实确实收到了来自 HTTP 请求的预期参数。

# shell - 如何调用 shell 脚本并从另一个 shell 脚本传递参数

> ID：14302389
> 
> 赞同：17
> 
> 时间：2013-01-13T09:53:11.097
> 
> 标签：shell, unix

我正在从另一个 shell 脚本调用一个 shell 脚本，并且被调用的脚本需要一些输入（命令行）参数。
我有下面提到的代码，但这不起作用。我不知道为什么参数值没有传递给被调用的脚本。

```
script1.sh
=======================================
#!/bin/bash
ARG1="val1"
ARG2="val2"
ARG3="val3"
. /home/admin/script2.sh "$ARG1" "$ARG2" "$ARG3"

script2.sh
=======================================
#!/bin/bash
echo "arg1 value is: $1 ....."
echo "arg2 value is: $2 ....."
echo "arg3 value is: $3 ....." 
```

但是当我执行 script1.sh 时，我得到以下结果：

```
arg1 value is:  .....
arg2 value is:  .....
arg3 value is:  ..... 
```

我错过了什么？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-01-13T10:14:31.120

通过使用 采购第二个脚本`. /home/admin/script2.sh`，您实际上将其包含在第一个脚本中，因此您可以在`$@`. 如果你真的想用参数*调用*另一个脚本，那么做

```
/home/admin/script2.sh "$ARG1" "$ARG2" "$ARG3" 
```

（确保它是可执行的）。

# c# - C# 使用 MySql 数据库中的 true/false 来继续或显示错误

> ID：14302394
> 
> 赞同：0
> 
> 时间：2013-01-13T09:54:34.470
> 
> 标签：c#, mysql, boolean

我需要我的应用程序从数据库中获取真/假语句并对其进行处理。

在我的数据库中，我有一行名为“ban”，`TinyInt(1)`用于表示真/假语句。

如果用户键入他的许可证名称和许可证编号并单击一个按钮，我的应用程序会将输入数据与我的数据库中的特定行进行比较。所以如果ok = continue，如果不是ok，就显示错误。

此外，插入输入的真/假语句将被添加为 ListBox 项。

现在我开始工作了，但实际上我需要我的应用程序来做一些对或错的事情。

所以我需要从插入的输入中获取真或假，然后用它说*“如果为假，则打开新窗口，如果为真则在文本框中显示错误”*

显示错误没什么大不了的，我得到了它的工作。这里的主要内容是使用 true 或 false 来继续或不继续。

我知道它与布尔值有关，我只是不知道如何使用它。

到目前为止，这是我得到的：（不是完整的代码，但我认为这可以）

谢谢！

```
 public partial class MainWindow : Window
{
    string ConnectionString = Properties.Settings.Default.cloudpos_beheerCS;
    public MainWindow()
    {
        InitializeComponent();
    }

    private void Button_Click_1(object sender, RoutedEventArgs e)
    {
        string Naamtxt = Naam.Text;
        string Licentietxt = Licentie.Text;

        MySqlConnection conn = new MySqlConnection(ConnectionString);
        MySqlCommand cmdDatabase = conn.CreateCommand();
        MySqlDataReader rdr;
        cmdDatabase.CommandText = "SELECT * FROM cloudposgebruikers WHERE licentie = @licentie AND naam = @naam";
        cmdDatabase.Parameters.AddWithValue("@naam", Naamtxt);
        cmdDatabase.Parameters.AddWithValue("@licentie", Licentietxt);

        try
        {
            conn.Open();
        }
        catch (Exception)
        {
            ErrorVerbinding.Content = "Er kan geen verbinding gemaakt worden met de database.";
            return;
        }

        rdr = cmdDatabase.ExecuteReader();
        int ollema = rdr.GetOrdinal("ban");
        while (rdr.Read())
            ListBox1.Items.Add(rdr.GetString(ollema));

            conn.Close();
        }

    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-13T18:32:13.080

好的，我找到了解决方案。我不需要为该任务创建一个布尔值，只需 2 行代码就可以了。无论如何，谢谢你们！

```
 if (rdr.HasRows)
        {
            while (rdr.Read()) //Make sure this is added or it won't work.
            {
                if (rdr.GetBoolean("ban"))
                {
                    ErrorSuspend.Text = "Uw licentie is verlopen of geblokkeerd.                      Contacteer uw verdeler om een nieuwe licentie te bekomen.";
                    return;
                }

                else
                {
                    Login Login = new Login();
                    this.Content = Login;
                }
            }
        }
        else
        {
            ErrorLN.Content = "Licentie of naam incorrect.";
            return;
        }
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-13T10:51:16.033

试试这个 ：

```
bool ollema = (bool)rdr.GetValue(Index OF Ban Field);

while (rdr.Read())
           ListBox1.Items.Add(rdr.GetString(ollema));
            conn.Close();
        } 
```

# grails - 如何在 jwplayer 中生成 iframe 嵌入代码？

> ID：14302395
> 
> 赞同：0
> 
> 时间：2013-01-13T09:54:36.433
> 
> 标签：grails, iframe, jwplayer

我在我的 grails 应用程序中使用 jwplayer。我想生成 iframe 嵌入代码，以便我可以在我的其他网站中使用它并播放。如何从 jwplayer 生成 iframe 嵌入代码？我可以有需要生成的确切代码吗？任何帮助都会很好。

感谢 89 神经元

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T19:50:11.853

如果 jwplayer 在您的 grails 应用程序中运行，则 iframe 不会影响其活动。

就像是

```
<iframe src="http://www.yourgrails.com"/> 
```

在您的参考页面中就足够了

# asp.net-mvc-4 - Asp mvc：IControllerFactory.CreateController 和线程

> ID：14302400
> 
> 赞同：0
> 
> 时间：2013-01-13T09:55:54.037
> 
> 标签：asp.net-mvc-4

我正在实现一个自定义 IControllerFactory 来创建我的 asp.net mvc 控制器。在这个工厂的 CreateController 方法中，我依赖于创建控制器的线程是唯一的这一事实；这意味着在调用 ReleaseController 之前没有在该线程上创建其他控制器。

现在，在重负载测试下，我遇到了问题。假设我在线程 1、2、3 上创建了控制器，似乎在线程 1 上创建了一个新的控制器，在第一个控制器调用 IControllerFactory.ReleaseController 之前。

这是预期的行为吗？对控制器的每个请求都在单独的线程上处理，对吗？在调用 IControllerFactory 的 ReleaseController 方法之前，如何将同一个线程重用于不同的请求？

谢谢你的时间，科恩

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-13T10:36:01.750

> 在这个工厂的 CreateController 方法中，我依赖于创建控制器的线程是唯一的这一事实；这意味着在调用 ReleaseController 之前没有在该线程上创建其他控制器。

你绝对不能依赖这种行为。没有什么可以保证你。如果您使用异步控制器，情况可能会变得更糟。

> 这是预期的行为吗？

是的。

> 对控制器的每个请求都在单独的线程上处理，对吗？

不。

> 在调用 IControllerFactory 的 ReleaseController 方法之前，如何将同一个线程重用于不同的请求？

ASP.NET 使用线程池来处理请求。例如，从这个池中抽取一个线程来服务请求，然后这个线程返回到池中以供重用。所以你完全可以让同一个线程为两个完全独立的请求执行控制器代码。

您绝对不应该在 ASP.NET 应用程序中依赖线程。如果你想存储一些每个请求的特定信息，你应该使用 HttpContext 存储，而不是线程。如果您想要安全，请忘记 ASP.NET 应用程序中的线程。

# php - 使用 mysql 从数据库中抓取广告代码时出错

> ID：14302402
> 
> 赞同：0
> 
> 时间：2013-01-13T09:56:22.517
> 
> 标签：php, mysql, select

我试图从我的数据库中获取广告代码并将`echo`其放到页面上，但由于某种原因它没有显示？

```
$getad = ("SELECT * FROM ads WHERE place='non-mobile' AND who='adbrite' ");

while($rows = mysql_fetch_array($getad))
{
$code = $rows['code'];
}
$ad1 = $code; 
```

稍后在页面下方我像这样打印它。

```
<?php print $ad1 ?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T10:05:46.843

我认为你的问题是你实际上并没有执行查询，你只是将它保存在一个变量（$getad）中，然后尝试从我看到的包含字符串的数组中获取。如果我没记错的话，你必须像你一样将查询保存在一个变量中，然后输入

```
$getad = "SELECT * FROM ads WHERE place='non-mobile' AND who='adbrite' ";
$q = $db->query($getad);

// generate results:
while ($q->fetchInto($row)) {
    //display or store
} 
```

您还应该包括检查，例如此代码已提取至少一行，或者数据库连接是否正常，等等。

# java - 类信息

> ID：14302403
> 
> 赞同：1
> 
> 时间：2013-01-13T09:56:38.597
> 
> 标签：java, class, annotations

我正在为一个更大的项目编写一个系统，其中不同的类在一个 CommandHandler 中注册命令。命令是带有要执行的代码的类。
我的问题：CommandHandler 需要一些关于类、名称、权限和用法的信息。

我已经尝试过 @interfaces 但这总是给我**null**。我应该以其他方式执行此操作还是可以解决此问题？

代码：CommandHandler中的寄存器

```
 public void register(Class<? extends Command> c) {
    CommandInfo info = c.getAnnotation(CommandInfo.class);
    if (info == null) return;

    try {
        commands.put(info.pattern(), c.newInstance());
    }
    catch (Exception e) {
        e.printStackTrace();
    }
} 
```

@CommandInfo

```
@Retention(RetentionPolicy.RUNTIME)
public @interface CommandInfo
 {
/**
 * The actual name of the command. Not really used anywhere.
 */
public String name();

/**
 * A regex pattern that allows minor oddities and alternatives to the
 * command name.
 */
public String pattern();

/**
 * The usage message, i.e. how the command should be used.
 */
public String usage();

/**
 * A description of what the command does.
 */
public String desc();

/**
 * The permission required to execute this command.
 */
public String permission();
} 
```

还有一个命令：

```
public class SetPortPoint implements Command
{
    @CommandInfo(
        name = "setportpoint",
        pattern = "setportpoint|spp",
        usage = "/maa setportpoint <arena> <wavenumber>",
        desc = "set a Port point for a Arena at a given Wave",
        permission = "mobarenaaddon.porter.setportpoint"
    )   
    public boolean execute(){
        //The Code to do
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T11:33:50.043

您正在请求类上的注释，但您请求的内容已放在方法上。要么将注释放在类本身上，要么枚举其方法（`getMethods()`）并分别查询每个类的注释。当然，你做什么取决于你想要什么。

另请注意，注释不会继承到子类。

# cron - 检查目录中的文件数量，如果等于或大于 5 - 删除最旧的文件

> ID：14302407
> 
> 赞同：0
> 
> 时间：2013-01-13T09:57:13.733
> 
> 标签：cron, database-backups

我正在尝试创建一个 cron 作业来创建 mysql 备份。我希望能够首先检查目录中有多少文件，如果有 5 个或更多，请删除一个（最旧的）并创建一个新的 mysqldump。我知道如何创建 mysqldump，但不确定条件。我打算将过程存储在 .sh 文件中，并使用 cronjob 每天触发一次该文件。有人可以展示程序应该是什么样子的例子吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T22:57:17.657

您可以将以下内容包装在 shell 脚本中

用于`ls -1ta test* 中的file_to_delete | 尾 --lines=+6` ; 做回声“ENTER_CMD_HERE $file_to_delete”；完毕

其中
- test 是文件名（将其替换为 mysql bkp 文件的路径 + 名称）
- 将 ENTER_CMD_HERE 替换为 rm

# ms-access - 带有 dbEncrypt 的 CompactDatabase 返回“3001：无效参数”错误

> ID：14302409
> 
> 赞同：0
> 
> 时间：2013-01-13T09:57:32.907
> 
> 标签：ms-access, vb6, ms-access-2010, ms-jet-ace, compact-database

`3001: Invalid argument`尝试时出现错误：

`DbEngine.CompactDatabase "db1.accdb", "db2.accdb", , dbEncrypt`

我相信该功能正在使用`ACEDAO.DLL`版本 14.0.6016.1000

错误的原因可能是什么？它似乎只发生在`dbEncrypt`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T14:35:23.020

如Remou回答中提到的文章中所示，`dbEncrypt`需要密码：

```
CompactDatabase firstdb, seconddb, ";pwd=secret", dbEncrypt 
```

似乎也无法在同一个调用中完成升级，因此我需要两行代码将旧版本升级`MDB`为加密的`ACCDB`. 注意密码在每一行中的位置：

```
CompactDatabase oldMDB, encryptedDb, ";pwd=secret", dbEncrypt
CompactDatabase encryptedDb, upgradedDb, , dbVersion120, ";pwd=secret" 
```

以下不起作用并给出了`Invalid argument`错误：

`CompactDatabase oldMDB, encryptedAccdb, ";pwd=secret", dbEncrypt + dbVersion120`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-13T14:11:02.833

似乎是密码：[http ://social.msdn.microsoft.com/Forums/et-EE/accessdev/thread/317b025c-07ff-4c84-883f-5f602e88af9d](http://social.msdn.microsoft.com/Forums/et-EE/accessdev/thread/317b025c-07ff-4c84-883f-5f602e88af9d)

```
DbEngine.CompactDatabase "db1.accdb", "db2.accdb", ";pwd=apass" 
```

打开 db2.accdb 时，可以选择解密数据库。

# android - 按下按钮时被杀死

> ID：14302414
> 
> 赞同：0
> 
> 时间：2013-01-13T09:58:49.973
> 
> 标签：android, button, android-intent, listener

我一直在阅读并研究一些教程，例如 [this](http://manisivapuram.blogspot.com/2011/06/how-to-use-startactivityforresult.html)

但是我仍然遇到我的应用程序关闭的问题。所以我猜它与按钮交互部分有关，但我不确定如何解决它。（Gaemscreen1.class 是我的下一个活动）我是 Android 新手，我几乎无法打开我的测试应用程序。当我按下一个按钮，期待去另一个场景，但最终被强制关闭时，问题就来了。

这是我的测试代码：

```
package com.example.testandy04;

import android.os.Bundle;
import android.app.Activity;
import android.content.Intent;
import android.view.Menu;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;

public class Title extends Activity {

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_title);//set layout class
        init();
    }

    public void init(){
         Button start = (Button)findViewById(R.id.buttonT1);

         start.setOnClickListener(new OnClickListener(){                 
             public void onClick(View vv){                   
                // TODO Auto-generated method stub 
                 Intent intent = new Intent(Title.this, Gaemscreen1.class);
                 startActivityForResult(intent, 0);
             }
         });     
    }
} 
```

任何想法，任何人？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-13T10:02:20.110

您是否已在`Gaemscreen1`Activity 中声明了您的活动`AndroidManifest.xml`？

```
<manifest ... >
  <application ... >
      <activity android:name=".ExampleActivity" />
      ...
  </application ... >
  ...
</manifest > 
```

请查看官方[文档](http://developer.android.com/guide/components/activities.html)。

其他可能的问题是您没有`buttonT1`放置在`activity_title`布局 xml 中。

# java - 注释处理器可以用于代码生成吗？

> ID：14302418
> 
> 赞同：10
> 
> 时间：2013-01-13T09:59:25.570
> 
> 标签：java, annotations

假设我定义了一个名为`@MyAnnotation`.

有一个类`X`被声明为：

```
@MyAnnotation
class X { .... } 
```

现在在编译时，我想检查所有带有注释的类，`@MyAnnotation`并对需要在同一进程中编译的更多 java 源文件进行一些代码生成。

这可能使用java注释处理器或其他工具吗？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-10-29T20:51:22.967

在 Java 6 中，APT 工具已合并到 javac。[这](http://deors.wordpress.com/2011/09/26/annotation-types/)是一个更好的注释处理教程。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-01-13T10:14:38.443

你可以看看 Java 来做`apt (Annotation Processing Tool)`这样的事情。

您可以找到[入门页面，以及](http://docs.oracle.com/javase/1.5.0/docs/guide/apt/GettingStarted.html)[一篇](http://deors.wordpress.com/2011/10/31/annotation-generators/)关于如何使用它生成代码的精彩文章（[1、2、3](http://deors.wordpress.com/2011/10/08/annotation-processors/) [）](http://deors.wordpress.com/2011/09/26/annotation-types/)。

# mysql - 需要 Joomla 1.5 数据库查询示例

> ID：14302423
> 
> 赞同：1
> 
> 时间：2013-01-13T10:00:01.533
> 
> 标签：mysql, joomla, joomla1.5

我已经使用`mysql_*`方式进行了查询，这`select`是一些值`from`a `table`，`where`行`id`是`1`。然后我将所有这些值放入变量中，以便将它们回显到我的表单中。如何使用 Joomla 的数据库查询方式做同样的事情？

这是我的代码示例，使用`mysql_*`：

```
<?php // DATABASE QUERY
      $query="SELECT countdown_module, hometeam_header
                FROM jos_gm_nextmatch
               WHERE id = 1";
      $result=mysql_query($query);

      // DATABASE VARIABLES
      $countdown_module = mysql_result($result,$i,"countdown_module"); ?>
      $hometeam_header  = mysql_result($result,$i,"hometeam_header"); ?>

     <form action="" method="post" name="form">
     <input name="countdown_module" value="<?php echo $countdown_module ?>" type="text" />
     <input name="hometeam_header"  value="<?php echo $hometeam_header  ?>" type="text" />
     <input name="submit" type="submit" value="UPDATE" />
     </form> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T11:03:30.263

好的我找到了！！！这是一个例子......

```
<?php // DATABASE QUERY
      $db = JFactory::getDBO();
      $query="SELECT countdown_module, hometeam_header
                FROM jos_gm_nextmatch
               WHERE id = 1";
      $db->setQuery($query);
      $rows = $db->loadObjectList();
      $itemrow = $rows[0];

      // DATABASE VARIABLES
      $countdown_module = $itemrow->countdown_module;
      $hometeam_header  = $itemrow->hometeam_header; ?>

     <form action="" method="post" name="form">
     <input name="countdown_module" value="<?php echo $countdown_module ?>" type="text" />
     <input name="hometeam_header"  value="<?php echo $hometeam_header  ?>" type="text" />
     <input name="submit" type="submit" value="UPDATE" />
     </form> 
```

# jquery - JQuery DataTables 可编辑表单AddNewRow 对齐

> ID：14302429
> 
> 赞同：0
> 
> 时间：2013-01-13T10:01:27.833
> 
> 标签：jquery, jquery-datatables

我正在使用 JQuery-DataTables-Editable-1.3 和 DataTables-1.9.4。我可以添加 add_delete_toolbar。但是，单击添加按钮时，formAddNewRow 未与页面中心对齐。已经搜索并尝试了很多组合。

```
$('#example').dataTable( {
                "bJQueryUI": true,
                "sPaginationType": "full_numbers",
                "bProcessing": true,
                "bServerSide": true,                    
                "sAjaxSource": "scripts/prgrm_mstr.php",
                "aoColumns": [
                      { "mData": "0", sDefaultContent: "" },
                      { "mData": "1", sDefaultContent: "" }
                    ]                   
            } ).makeEditable({
                        sUpdateURL: function(value, settings)
                                         {
                                               return(value); //Simulation of server-side response using a callback function
                                         },
                        sAddURL: "scripts/AddData.php",                         
                        sDeleteURL: "scripts/DeleteData.php",
                        sAddDeleteToolbarSelector: ".dataTables_length",
                                oAddNewRowButtonOptions: {  label: "Add...",
                                                icons: {primary:'ui-icon-plus'} 
                                },
                                oDeleteRowButtonOptions: {  label: "Delete",
                                                icons: {primary:'ui-icon-trash'}
                                },
                                oAddNewRowFormOptions: {    
                                                title: 'Add a new program',
                                                show: "blind",
                                                hide: "blind",
                                                modal: true                                                 
                                }                                   
            }); 
```

表格如下——

```
<form id="formAddNewRow" action="#" title="Add new record">
                <label for="prgrm_id">Program ID</label>
                <input type="text" name="prgrm_id" id="prgrm_id" class="required" rel="0" />
                <label for="prgrm_nm">Program Name</label>
                <input type="text" name="prgrm_nm" id="prgrm_nm" class="required" rel="0" />
        </form> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T09:38:11.737

我通过进行以下 css 更改来管理 -

```
.ui-dialog { margin-top:-300px;margin-left:400px;} 
```

# string - 加载包含字符串和数字的数据集

> ID：14302432
> 
> 赞同：1
> 
> 时间：2013-01-13T10:01:51.740
> 
> 标签：string, matlab-load

我正在尝试加载以下[数据集](http://archive.ics.uci.edu/ml/machine-learning-databases/flags/flag.data)：

> 阿富汗,5,1,648,16,10,2,0,3,5,1,1,0,1,1,1,0,green,0,0,0,0,1,0,0,1, 0,0,黑色,绿色
> 
> 阿尔巴尼亚,3,1,29,3,6,6,0,0,3,1,0,0,1,0,1,0,red,0,0,0,0,1,0,0, 0,1,0,红色,红色
> 
> 阿尔及利亚,4,1,2388,20,8,2,2,0,3,1,1,0,0,1,0,0,green,0,0,0,0,1,1,0, 0,0,0,绿色,白色
> 
> ...

问题是它同时包含整数和字符串。我发现了一些关于如何只取出整数的信息。但是一直无法查看是否有任何方法可以获取所有数据。

我的问题是这可能吗？

如果那是不可能的，那么有没有办法找到每一行上的数字并将其他所有东西都扔掉而不必选择列？

我特别需要，因为我似乎不能`str2num`一次在整条线上使用。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-13T11:57:45.827

几乎一切皆有可能，您只需准确定义目标即可。

假设您的数据库存储为文本文件，您可以使用 逐行解析它[`textread`](http://www.mathworks.com/help/matlab/ref/textread.html;jsessionid=3bbcbc0667dda2ef2d7e79cfd998)，然后应用[`regexp`](http://www.mathworks.com/help/matlab/ref/regexp.html)仅过滤数字字段（这不需要有关列的先验知识）：

```
C = textread('database.txt', '%s', 'delimiter', '\n');
C = cellfun(@(x)regexp(x, '\d+', 'match'), C, 'Uniform', false); 
```

这里的结果是一个由字符串元胞数组组成的元胞数组，其中每个字符串对应于特定行中的一个数字字段。

由于数字仍然存储为字符串，您可能需要将它们转换为实际数值。有很多方法可以做到这一点，但您可以[`str2num`](http://www.mathworks.com/help/matlab/ref/str2num.html)以一种棘手的方式使用：它可以将分隔的字符串转换为数字数组。这意味着，如果将特定行中的所有字符串连接回一个字符串，并在其间放置空格，则可以`str2num`一次应用所有字符串，如下所示：

```
C = cellfun(@(x)str2num(sprintf('%s ', x{:})), C, 'Uniform', false); 
```

结果`C`是一个向量元胞数组，每个向量包含对应行中所有数值字段的值。要访问特定向量，您可以使用花括号 ( `{}`)。例如，要访问第二行的数字，您可以使用`C{2}`.

当然，在解析过程中会丢弃所有非数字字段。如果你也想保留它们，你应该使用不同的正则表达式`regexp`。

祝你好运！

# c++ - MS Visual Studio 2012 Express 是否同时包含 C#、Visual Basic、C++？

> ID：14302437
> 
> 赞同：3
> 
> 时间：2013-01-13T10:03:46.787
> 
> 标签：c++, visual-studio-2010, visual-studio, visual-c++, visual-studio-2012

我想下载更新版本的 VS Express，但在我看来 VS 2012 也包含 Basic、C# 和 C++，但我只需要 C++……不过我可以下载仅包含 C++ 的 VS 2010。（Visual C++ 速成版）

所以我不想用不必要的软件包浪费硬盘。2012 年是否包括所有这些语言？你会代替我做什么？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-13T12:35:55.803

VS2012 是 Visual Studio 的第一个版本，其中 Express 版本不再按语言偏好划分。猜测其中的原因，可能与这些 Express 版本之间目标平台的扩散有关。VS2012 中的新功能是桌面版、Windows 8 版和手机版之间的区别。如果他们保留语言选择，那将增加 8 个版本可供选择。

一定要选择正确的。除非您特别想针对 Windows 8 商店或手机，否则您很可能想要桌面版。VB.NET，C# 将伴随而来，JS 如果你选择商店或电话。

您可以在安装后删除 VB 和 C# 子目录，但这只会恢复很少的磁盘空间。这些语言共享 VS 中的许多管道。尤其是自从 C++ 被集成到构建系统中之后。他们的编译器实际上不是 VS 的一部分，它们是 .NET 的一部分

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-13T10:10:36.257

每个 Express 版本都针对一种语言/目的。

然而，完整的 Visual Studio 将所有内容组合到一个大包中。

* * *

**编辑**：使用它的 Chris 在评论中指出，Visual Studio Express 的[Dekstop 版](http://www.microsoft.com/visualstudio/eng/products/visual-studio-express-for-windows-desktop#product-express-desktop-details)确实支持多种语言。

# java - 使用java从数据库中读取具有oracle BFILE数据类型的文件

> ID：14302439
> 
> 赞同：0
> 
> 时间：2013-01-13T10:03:54.990
> 
> 标签：java, oracle10g

我有一个表，其中包含外部文件系统上文件的位置。用于包含文件位置的列的数据类型是 BFILE。

如何使用java从数据库中读取这些文件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-11-14T22:00:15.873

使用以下链接

[https://docs.oracle.com/cd/A97335_02/apps.102/a83724/oralob3.htm#1059336](https://docs.oracle.com/cd/A97335_02/apps.102/a83724/oralob3.htm#1059336)

在那里你会发现很多这样的例子

```
OraclePreparedStatement ops = (OraclePreparedStatement)conn.prepareStatement
                        ("INSERT INTO my_bfile_table VALUES (?,?)");
ops.setString(1,"one");
ops.setBFILE(2, bfile);
ops.execute(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-13T11:54:35.837

Hi please read following post and [this Link](http://docs.oracle.com/cd/A97335_02/apps.102/a83724/oralob3.htm#1059336) will be helpful

This sample demonstrates Oracle JDBC BFILE support. It illustrates filling a table with BFILEs and includes a utility for dumping the contents of a BFILE. For information on BFILEs.

```
/* 
 * This sample demonstrate basic File support
 */

import java.sql.*;
import java.io.*;
import java.util.*;

//including this import makes the code easier to read

import oracle.jdbc.driver.*;

// needed for new BFILE class

import oracle.sql.*;

public class FileExample{

public static void main (String args [])throws Exception{
// Register the Oracle JDBC driver
DriverManager.registerDriver(new oracle.jdbc.driver.OracleDriver());

// Connect to the database
// You can put a database name after the @ sign in the connection URL.
//
// The sample creates a DIRECTORY and you have to be connected as
// "system" to be able to run the test.
// I you can't connect as "system" have your system manager
// create the directory for you, grant you the rights to it, and
// remove the portion of this program that drops and creates the directory.
Connection conn =
  DriverManager.getConnection ("jdbc:oracle:oci8:@", "system", "manager");

// It's faster when auto commit is off
conn.setAutoCommit (false);

// Create a Statement
Statement stmt = conn.createStatement ();

try
{
  stmt.execute ("drop directory TEST_DIR");
}
catch (SQLException e)
{
  // An error is raised if the directory does not exist.  Just ignore it.
}
stmt.execute ("create directory TEST_DIR as '/tmp/filetest'");

try
{
  stmt.execute ("drop table test_dir_table");
}
catch (SQLException e)
{
  // An error is raised if the table does not exist.  Just ignore it.
}

// Create and populate a table with files
// The files file1 and file2 must exist in the directory TEST_DIR created
// above as symbolic name for /private/local/filetest.
stmt.execute ("create table test_dir_table (x varchar2 (30), b bfile)");
stmt.execute ("insert into test_dir_table values 
               ('one', bfilename ('TEST_DIR', 'file1'))");
stmt.execute ("insert into test_dir_table values 
               ('two', bfilename ('TEST_DIR', 'file2'))");

// Select the file from the table
ResultSet rset = stmt.executeQuery ("select * from test_dir_table");
while (rset.next ())
{
  String x = rset.getString (1);
  BFILE bfile = ((OracleResultSet)rset).getBFILE (2);
  System.out.println (x + " " + bfile);

  // Dump the file contents
  dumpBfile (conn, bfile);
}

// Close all resources
rset.close();
stmt.close();
conn.close();}

// Utility function to dump the contents of a Bfile

static void dumpBfile (Connection conn, BFILE bfile) throws Exception{

System.out.println ("Dumping file " + bfile.getName());

System.out.println ("File exists: " + bfile.fileExists());

System.out.println ("File open: " + bfile.isFileOpen());

System.out.println ("Opening File: ");

bfile.openFile();

System.out.println ("File open: " + bfile.isFileOpen());

long length = bfile.length();
System.out.println ("File length: " + length);

int chunk = 10;

InputStream instream = bfile.getBinaryStream();

// Create temporary buffer for read
byte[] buffer = new byte[chunk];

// Fetch data  
while ((length = instream.read(buffer)) != -1)
{
  System.out.print("Read " + length + " bytes: ");

  for (int i=0; i<length; i++)
    System.out.print(buffer[i]+" ");
  System.out.println();
}

// Close input stream
instream.close();

// close file handler
bfile.closeFile();}} 
```

# django - 如何在 django 应用程序中流式传输视频

> ID：14302440
> 
> 赞同：6
> 
> 时间：2013-01-13T10:03:57.907
> 
> 标签：django, apache, video-streaming, red5, wowza

我希望将视频流作为 django 应用程序的一部分，但我从未对视频做过任何事情，也不知道从哪里开始。我还没有项目的所有细节，但我期待一个或两个人上传的一个相当小的视频库（想想少于 100 个大约 5 分钟长度的视频）。

我正在寻找一种允许用户使用 django admin 上传视频的解决方案。我想覆盖大多数桌面浏览器（95%+），显然我想降低成本。说我确实喜欢使用某种基于云的 CDN 的想法（我不知道这是否可能/适合这种规模的项目）

我真的很想问是否有人可以指出我正确的方向（教程/服务/项目/代码），但我意识到这可能不够具体。

所以更具体地说 -

1.  是否可以仅使用 django 和 apache 网络服务器将视频流式传输到浏览器？
2.  哪些云托管服务提供商将支持与 django 应用程序的轻松集成？
3.  在准备好流式传输之前，我是否需要转换视频的格式？
4.  我可以将 Red5 与云托管解决方案一起使用吗？
5.  我想将项目托管在我用来托管其他几个（低流量）django 应用程序的 Ubuntu 服务器上 - 在具有现有站点的服务器上安装 Red5 会不会是一个错误。
6.  回想起来，服务器有 12GB RAM 和 4 个内核（在 1and1 uk 数据中心中）。我是否有足够的功率/带宽同时传输 3-5 个视频？（假设 red5 / wowza）。
7.  我对 Flash 不感兴趣，因为我支持 Apple。我是否需要重新评估我的偏见才能摆脱我的无知？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-13T10:24:33.087

我从未使用 Django/Python 流式传输视频，但我在前端应用程序中的流式视频领域有一些经验。我当然不能回答你所有的问题。根据我的经验，视频的托管位置并不重要，如果您想在全球范围内分发视频，CDN 就可以了。我个人认为你应该从关于如何在浏览器中播放视频的问题开始。选择一个合适的视频播放器（可能是 html5 视频），你就会知道什么可以播放，什么不能播放。

3) 格式取决于您要如何流式传输视频。渐进式下载（例如 mp4）？直播（非渐进式，例如 HLS）？您可以在线查找示例视频并测试您的视频播放器是否可以在您想要支持的平台上播放视频。

7) 如前所述，您需要检查在这种情况下使用哪个播放器。在我看来，HTML5 视频还没有得到足够广泛的支持，但可以在最现代的浏览器（Chrome、Safari）中播放大多数格式。

希望有帮助。

# facebook - Facebook 不请求权限

> ID：14302441
> 
> 赞同：0
> 
> 时间：2013-01-13T10:04:13.983
> 
> 标签：facebook, facebook-canvas

我正在开发一个 Facebook 画布应用程序，我正在测试整个权限是如何工作的。

有一件事引起了我的注意，我认为这有点奇怪：用户第一次进入应用程序时，Facebook 发送的 signed_request 没有 user_id 和访问令牌（如预期的那样）。然后我的应用程序重定向到登录对话框，因此用户可以授权应用程序并提供所要求的权限。

此时发生了一些奇怪的事情：Facebook 使用给定的权限（以及 user_id 和访问令牌）自动将用户重定向到我的应用程序，但没有提示用户授予权限。

我已经与测试用户和测试人员验证了这种行为。

这是正常的吗？是否可以“强制”（出于测试目的）“请求权限”屏幕？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T10:08:40.443

第二次或以后使用 Facebook 应用程序是正常的。

在启动应用程序之前从 Facebook 帐户中删除应用程序的权限，以返回请求权限屏幕。

# mobile - SignalR 和移动设备

> ID：14302442
> 
> 赞同：5
> 
> 时间：2013-01-13T10:04:14.483
> 
> 标签：mobile, signalr

SignalR 是否适用于移动设备？

我只发现这[SignalR 是否可以在移动设备上工作](https://stackoverflow.com/questions/12924292/does-signalr-work-on-mobile) 但是那里没有真正的答案 - 其中一个回复是指 web-socket 支持，但是如果不支持 web-socket，SignalR 应该恢复为长轮询。

有没有人在真正的跨平台应用程序中使用过这个？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-15T16:11:24.647

我们已经构建了一个运行在：

**赢 7**

*   谷歌浏览器
*   火狐
*   苹果浏览器
*   IE6/7/8/9/10

**赢 8**

*   谷歌浏览器
*   火狐
*   苹果浏览器
*   IE10

**操作系统**

*   火狐
*   谷歌浏览器
*   苹果浏览器

**iOS5（iPhone 4、iPad 2）**

*   苹果浏览器

**iOS6（iPhone 4/5、iPad 2、新 iPad）**

*   苹果浏览器

**Android Froyo - 当前的 Android**

*   默认浏览器

**视窗电话 7**

*   默认浏览器

SignalR 运行良好，并将为该设备/操作系统/浏览器使用最佳传输。我看到的唯一问题是在使用 Opera 浏览器时。

如果您在构建跨平台/浏览器应用程序时遇到任何问题，请告诉我，因为我已经看到了各种疯狂的错误！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-04-03T04:42:05.560

虽然对浏览器的支持很好，但对移动平台的支持却不是最新的。微软并没有专注于使 android 客户端 api 保持最新（反 Android 和 iOS？）。文档也很差。在一些非 Microsoft 资源的帮助下，我可以通过一些努力来完成它。

# android - 如何在 Android 中获取当前活动的对象

> ID：14302443
> 
> 赞同：1
> 
> 时间：2013-01-13T10:04:32.900
> 
> 标签：android, android-activity, task

我想`Bitmap`在我的应用程序中获取当前窗口的对象。但是我的应用程序在后台运行。

```
ActivityManager manager = (ActivityManager) BackGroundAppScreenActivity.this.getSystemService(ACTIVITY_SERVICE);

List<ActivityManager.RunningTaskInfo> infoList = manager.getRunningTasks(100);

RunningTaskInfo m = infoList.get(0);

String activityName = m.topActivity.getClassName(); 
```

通过这段代码，我得到了当前前台活动的名称..但我无法获得屏幕的位图..

# java - 将 C# X509Certificate2 转换为 java

> ID：14302444
> 
> 赞同：0
> 
> 时间：2013-01-13T10:05:04.377
> 
> 标签：java, certificate

我可以通过以下语句使用 c# 将 .p12 证书导入 Windows 个人商店：

```
X509Certificate2 cert2 = new X509Certificate2("certificate.p12" ,"p@ssword");
X509Store store2 = new X509Store(StoreName.My, StoreLocation.CurrentUser);
store2.Open(OpenFlags.MaxAllowed);
store2.Add(cert2);
store2.Close(); 
```

我需要用 JAVA 重写我的代码。如何将这些代码移植到Java？谢谢

# ios - 从自定义相册中删除图像

> ID：14302445
> 
> 赞同：1
> 
> 时间：2013-01-13T10:05:17.943
> 
> 标签：ios, iphone, alassetslibrary, alasset

有没有办法从自定义相册中删除图像？我不想从手机中永久删除资产，而只是简单地将 x 图像与 x 相册取消关联。

我正在尝试构建一个自动管理某些相册的应用程序。在某些情况下，需要从相册中删除图像并将其添加到其他相册中。我目前正在使用 ALAssetsLibrary 创建相册并向其中添加图像。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T13:43:05.530

没有公共 API 可以从自定义/用户创建的相册中删除图像。如果您将来想要该功能，请在[https://feedbackassistant.apple.com/](https://feedbackassistant.apple.com/)上申请。

# php - 查询 PHP 数组

> ID：14302453
> 
> 赞同：3
> 
> 时间：2013-01-13T10:07:36.093
> 
> 标签：php, arrays, adapter

考虑以下场景：您有一个小的 MogoDB 集合或一个小的 MySQL 表（例如包含 1000 条记录，它也可能是只读的），在您的应用程序中被广泛和重复使用。

您决定将其所有内容提取到 PHP 数组并使用该数组，而不是向 DB 发送大量查询。

在上述场景中，我们如何以类似于检索数据库表记录的有效方式检索一些数组项？用于阵列或任何其他类似设施的 PDO 适配器...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-13T10:31:26.607

有著名的用于 php 的 C# LINQ 库的端口。

它为您提供了灵活的 oo 接口来查询数据源。

[http://phplinq.codeplex.com/wikipage?title=Examples&referringTitle=Home](http://phplinq.codeplex.com/wikipage?title=Examples&referringTitle=Home)

简单的例子

```
// Create data source
$names = array("John", "Peter", "Joe", "Patrick", "Donald", "Eric"); 

$result = from('$name')->in($names)
            ->where('$name => strlen($name) < 5')
            ->select('$name'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-13T10:23:55.853

[虽然您可以结合使用 array_filter 和 php.net ( http://pl1.php.net/manual/en/function.array-filter.php#87912](http://pl1.php.net/manual/en/function.array-filter.php#87912) )提出的函数 niehztog ，但我相信即使使用少量数据您仍然会发现查询数据库比尝试通过数组处理实现相同的速度更快。

请记住，MySQL 会缓存查询结果——因此您只需使用重复查询而不是磁盘来访问内存。

# uilabel - UILabel 上的透视变换

> ID：14302456
> 
> 赞同：1
> 
> 时间：2013-01-13T10:07:56.393
> 
> 标签：uilabel, calayer, catransform3d, catransform3drotate

我正在尝试在 a 上添加一些透视图`UILabel`，以使其显示就好像它被画在一个有角度的脸上一样。

这是我的测试标签：

![描述](../Images/8e85b19d39b0ac20118aa7e5ebcf4173.png)

应用变换后：

![在此处输入图像描述](../Images/96433340f30082f93d06868cc633b493.png)

我的代码：

```
@implementation MyViewController

- (void)viewDidLoad {
    [super viewDidLoad];

    UILabel *label = [[UILabel alloc] initWithFrame:CGRectMake(100.f, 250.f, 100.f, 30.f)];
    label.text = @"Hello";
    label.textAlignment = NSTextAlignmentCenter;
    label.backgroundColor = [UIColor greenColor];
    [label tiltDegrees:20.f];
    [self.view addSubview:label];
    [label release];
}

@end

@implementation UIView (Perspective)

-(void) tiltDegrees:(CGFloat)degrees {
    CATransform3D aTransform = CATransform3DIdentity;
    CGFloat zDistance = 100; // affects the sharpness of the transform
    aTransform.m34 = 1.0 / -zDistance;
    aTransform = CATransform3DRotate(aTransform, degrees * M_PI / 180.0f, 1.0f, 0.0f, 0.0f);
    self.layer.transform = aTransform;
}

@end 
```

我遇到了一堆问题：

1.  标签内的文本似乎不像它`UILabel`本身那样应用转换。它超出框架（剪辑），未居中，并且几何形状似乎不正确。也许尺寸也是错误的？
2.  它是模糊的。如何在光栅化*之前对文本向量应用变换。*我认为这会产生清晰的结果。
3.  我似乎无法弄清楚旋转之间的协调`zDistance`，`degrees`因此它们会产生正确的视角。我怎样才能`zDistance`正确计算基于`degrees`？

任何帮助解决 (1) (2) (3) 将不胜感激。非常感谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-19T20:37:19.293

我不知道你是否已经解决了这个问题，但问题基本上是你的文本标签正在穿过它后面的灰色层，因此为什么它似乎夹在文本中间。

将文本层平移到相机以解决此问题。

# android - 安卓谷歌分析跟踪

> ID：14302460
> 
> 赞同：1
> 
> 时间：2013-01-13T10:08:47.027
> 
> 标签：android, google-analytics

我已经在一个测试项目中设置了 Google Analytics v2 beta，如下所示

**MainActivity.java**

```
public class MainActivity extends Activity {
    Context context;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        context = this;

        // Set Context to Google Analytics
        EasyTracker.getInstance().setContext(context);
    }

    @Override
    protected void onStart() {
        super.onStart();
        EasyTracker.getInstance().activityStart(this);

        EasyTracker.getInstance();
        Tracker myTracker = EasyTracker.getTracker();
        myTracker.sendView("harsha");
    }

    @Override
    protected void onStop() {
        super.onStop();
        EasyTracker.getInstance().activityStop(this);
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        // Inflate the menu; this adds items to the action bar if it is present.
        getMenuInflater().inflate(R.menu.activity_main, menu);
        return true;
    }

} 
```

分析.xml

```
<?xml version="1.0" encoding="utf-8"?>
<resources xmlns:tools="https://schemas.android.com/tools" tools:ignore="TypographyDashes">

    <!-- Replace placeholder ID with your tracking ID -->
    <string name="ga_trackingId">UA&#8211;37418075&#8211;1</string>

    <!-- Enable automatic activity tracking -->
    <bool name="ga_autoActivityTracking">true</bool>

    <!-- Enable automatic exception tracking -->
    <bool name="ga_reportUncaughtExceptions">true</bool>
    <bool name="ga_debug">true</bool>
    <!-- The screen names that will appear in your reporting -->
    <string name="com.m7.google_analytics_v2.BaseActivity">Home</string>

</resources> 
```

我一直在尝试将跟踪发送到 Google Analytics Server，但找不到任何点击或任何类型的活动。它需要时间来反映吗？

我在原木猫中找到了这个

```
01-13 15:16:52.360: I/GAV2(23176): Thread[GAThread,5,main]: putHit called
01-13 15:16:52.360: I/GAV2(23176): Thread[GAThread,5,main]: Sending hit to store
01-13 15:16:52.440: I/GAV2(23176): Thread[GAThread,5,main]: putHit called
01-13 15:16:52.440: I/GAV2(23176): Thread[GAThread,5,main]: Sending hit to store
01-13 15:16:53.825: I/GAV2(23176): Thread[GAThread,5,main]: putHit called
01-13 15:16:53.825: I/GAV2(23176): Thread[GAThread,5,main]: Sending hit to store
01-13 15:16:53.905: I/GAV2(23176): Thread[GAThread,5,main]: putHit called
01-13 15:16:53.905: I/GAV2(23176): Thread[GAThread,5,main]: Sending hit to store
01-13 15:16:57.840: I/GAV2(23176): Thread[GAThread,5,main]: putHit called
01-13 15:16:57.840: I/GAV2(23176): Thread[GAThread,5,main]: Sending hit to store
01-13 15:16:57.945: I/GAV2(23176): Thread[GAThread,5,main]: putHit called
01-13 15:16:57.945: I/GAV2(23176): Thread[GAThread,5,main]: Sending hit to store 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-13T16:33:15.240

这看起来不太好：

```
 <string name="ga_trackingId">UA&#8211;37418075&#8211;1</string> 
```

`&#8211;`(-) 是`&ndash`; 这是与 ASCII - (-) ( `&#45`) 不同的字符。我很确定 GA 只希望跟踪 ID 中有 ASCII。

除非在粘贴到堆栈溢出时刚刚插入。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-13T10:43:24.500

尝试在管理员下的谷歌分析上创建一个新的配置文件并将其设置为应用程序，它将为您提供一个新的跟踪号。

我有类似的问题，由于某些原因，Google Analytics v2 在我的旧 Google Analytics 项目上不起​​作用，所以我创建了新项目和新配置文件，相同的代码在 24-36 小时后开始报告数据。但是你也可以使用实时数据来检查它是否命中了谷歌分析服务器。

# database - 个人防护装备数据库结构

> ID：14302461
> 
> 赞同：0
> 
> 时间：2013-01-13T10:08:51.950
> 
> 标签：database, sql-server-2008, database-design

我的经理要求我使用 SQL Server 为采购部门设计一个个人防护设备数据库。在收集我对数据库的要求时，我提出了 5 个 PPE 类别：手、眼睛和面部、头部、身体、鞋类.

目前有一个存储所有上述类别的表，

**PPCatTable：* 手、眼睛和脸、头、身体、鞋**

对于每个类别，有几个有子集，即

**鞋类：* 抗电等级、HasSteelToe、颜色、高度**、

**手套：* Hazard, Degereeof hazard, ProtectiveMaterial**

但我对儿童表的结构应该是什么样子，如何存储每个类别的不同子集感到困惑。每个子集具有不同的数字属性，采购部门坚持捕获所有不同的属性。

我应该为每个子类别创建一个表吗？

应该为 PPEEOrderDetails 表引用孩子的主键什么字段？

我应该将相应的子属性作为 XML 数据类型存储在父类别表中吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T13:01:06.027

您想使用实体**超类型/子类型**技术来为您的项目建模。考虑以下数据模型：

![ERD](../Images/549eb36ae5f6a033cf5d4ac860e4a6c4.png)

您的各个类别都有自己的表格，因为它们具有不同的属性集。每个子类别都有一个作为其主键的列，该列也是超类型表的外键：`PPEQUIP`.

请注意，这*不是*`PPEQUIP`类别列表，例如您的. 包含每个子类型表中每个项目的记录。中的列将是公共标识符，而其中的列是指示哪个子类型适用于该项目的列。如果所有类型都有其他共同的属性，那么这些共同的属性也会进入.*`PPCatTable``PPEQUIP``PPEQUIP``partitioning attribute``PPEQUIP`*

 *现在，当您有一个需要引用设备的表时，无需具体考虑设备属于哪个类别，例如您`ORDER_DETAIL`的外键引用转到超类型表（即`PPEQUIP`）。另一方面，如果您只需要引用特定类别，那么您将在子类型级别执行此操作。*

# wordpress - 当页面具有特定模板时如何添加标题属性

> ID：14302462
> 
> 赞同：0
> 
> 时间：2013-01-13T10:08:51.977
> 
> 标签：wordpress, templates, attributes

在我的管理页面中，我可以将默认模板页面更改为另一个自定义模板。我需要的是：

在我的导航标题菜单中，我有许多链接，`a`当`a`标签指向将使用我的自定义模板而不是默认模板呈现的页面时，我必须设置标签的标题属性。例子：

```
<li><a hreh=".." title="myCustom">link1</a></li> //this title will be redirected with my custom template
<li><a hreh="..">link2</a></li> //this title will be redirected with default template
<li><a hreh="..">link3</a></li> //this title will be redirected with default template
<li><a hreh=".." title="myCustom">link4</a></li> //this title will be redirected with my custom template 
```

如果我打开`header.php`该链接是由以下人员创建的：

```
<?php $params = array( 
      'theme_location'  =>'primary',
      'limit'  => 5,
      'format' => 'custom',
      'link_before' => '<span>',
      'link_after'  => '</span>' );
       wp_nav_menu($params); 
?> 
```

我如何检查链接是由默认模板呈现还是由我的模板呈现？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T10:54:45.943

我不确定您要做什么，但是关于这`title`件事，您可以轻松地在后端添加它...外观>菜单。下面的示例图像..

![在此处输入图像描述](../Images/93e511152daefe0cfe863b901d4e211a.png)

* * *

我不确定这是否会有所帮助，但您是否尝试过阅读[创建自己的页面模板](http://codex.wordpress.org/Pages#Creating_Your_Own_Page_Templates)？

因此，当您创建页面时，您可以选择用于该特定页面的模板。就像下面这张图，

![在此处输入图像描述](../Images/eb0937a00c793e09041acb4b36715db6.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-13T15:41:03.500

如果您的主题正在使用函数*[body_class](http://codex.wordpress.org/Function_Reference/body_class)*，例如**`<body <?php body_class(); ?>>`**，您的 Html 已经在打印您需要的内容以仅在该页面中定位元素：

[![身体类](../Images/5735c0847324f5f17c8b91eee899f0b7.png)](https://i.stack.imgur.com/fIoeq.png)

此页面正在使用模板文件：`/twentytwelve/page-templates/front-page.php`.

您会看到那里有一个 StackOverflow 类；），这是通过：

```
add_filter('body_class', 'body_class_so_14302462');

function body_class_so_14302462( $classes ) 
{
    global $post;
    if( 'page' != $post->post_type )
        return $classes;

    $classes[] = 'STACKOVERFLOW';
    return $classes;
} 
```

您可以使用 完全覆盖它，而不是向数组中添加一个类，`$classes = 'custom-and-only-class';`还可以进行各种检查以微调输出。

# android - 无法导入 android.support.v4.apps.NavUtils

> ID：14302463
> 
> 赞同：4
> 
> 时间：2013-01-13T10:08:54.030
> 
> 标签：android, command-line, jar

在这里彻底搜索后，我发现以下问题准确地说明了我面临的问题。

[导入 android.support.v4 包时遇到问题](https://stackoverflow.com/questions/14164602/trouble-importing-android-support-v4-package)

但是，这种情况下的问题是导入的包是错误的。就我而言，包裹是正确的，但我面临同样的问题。

我已经浪费了几天时间试图找出解决方案。

我想补充的一件事是，我正在尝试学习命令行执行以实现自动化，所以我不想将 eclipse 用于相同的目的。

通过支持页面上的链接，他们谈论在 eclipse 中添加它，但没有提到如何通过命令行 [http://developer.android.com/tools/extras/support-library.html#SettingUp](http://developer.android.com/tools/extras/support-library.html#SettingUp)

我的 android 清单提到 minsdkversion = 4 和 targetsdkversion = 17，我已经将 android-support-v4.jar 文件复制到我的项目的“libs”文件夹中，但到目前为止我尝试的一切都是徒劳的。

我在带有 JDK 1.6 的 Windows 7 上运行它

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T13:23:50.113

愚蠢的错误在初学者中很常见，我也不例外。问题是应用程序中有一个额外的“s”。它应该是包名称中的 app。我需要做的就是改变调试的范围，并从我的代码移到显示问题的 ANT 脚本中。

令人惊讶的是，如何用文字表达问题为您提供了新的挖掘途径，这对我的情况有所帮助。我认为这对于任何试图开始学习新事物的人来说都是一个很好的教训。

我真诚地向所有试图找出问题的人道歉。希望你没有花很多时间在这上面。

感谢您的阅读：）

# php - 在没有 root/admin 权限的情况下通过 PHP 中的套接字 ping

> ID：14302468
> 
> 赞同：1
> 
> 时间：2013-01-13T10:10:36.507
> 
> 标签：php, iis-7.5, windows-server-2008-r2, ping

我正在尝试创建一个使用[socket_create(int $domain, int $type, int $protocol) ping 机器的函数。](http://php.net/manual/en/function.socket-create.php)

执行此操作的常用方法是使用 SOCK_RAW 类型——它允许绕过 OSI 传输层并制作您自己的 ICMPv4 数据包（协议编号 1 - ICMP）。这是一个例子： http: [//php.net/manual/en/function.socket-create.php#101012](http://php.net/manual/en/function.socket-create.php#101012)

现在显然自 Server 2008 以来，绕过传输层需要管理员权限。（我还在互联网上读到，在 UNIX 系统上，这也需要 root 凭据——但我并不关心，因为我正在运行 Server 2008。）

但这很令人困惑，因为 Windows 上 cmd 中的 ping 功能不需要管理员权限。那么它是如何工作的呢？**那么是否可以在 PHP 中编写一个不需要管理员权限的 ping 函数？**

# java - 需要有关如何在面板上方插入小文本短语的想法

> ID：14302469
> 
> 赞同：3
> 
> 时间：2013-01-13T10:10:42.740
> 
> 标签：java, swing, jpanel, border, title

我正在尝试在所附图像中插入以红色圈出的“益智游戏”文本。

我已经将 4 个蓝色按钮和文本字段都放在了 1 个 GridLayout 中。

我尝试将文本与 GridLayout 一起作为不可点击的按钮插入，但它不起作用，因为 GridLayout 中每个单元格的大小始终相同。

也尝试使用 setBounds ，但它甚至没有出现在 JFrame =/ 中。

![图片](../Images/eff6158ee51e70e1ac814b4b9ea7ac7f.png)

```
 // create a new panel - panel1
    JPanel panel1 = new JPanel();   
    // set layout of panel1
    panel1.setLayout(new GridLayout(3,2));
    panel1.setPreferredSize(new Dimension(500,200));

    // create new buttons - button1 to button4
    JButton button1  = new JButton("Start Game");
    JButton button2  = new JButton("Get History");
    JButton button3  = new JButton("Reset Game");
    JButton button4  = new JButton("Exit Game");

    // create label and text field for entering of player's names 
    JLabel label1 = new JLabel("Enter Player's name:",JLabel.CENTER);
    JTextField field1 = new JTextField();

    // add the labels and text field to panel1
    panel1.add(label1);
    panel1.add(field1);

    // adds button1 to button4 to panel1
    panel1.add(button1);
    panel1.add(button2);
    panel1.add(button3);
    panel1.add(button4);

    // create a new general panel to contain all panels containing components placed at the bottom
    JPanel btmGenP = new JPanel();
    this.add(btmGenP,BorderLayout.SOUTH);
    btmGenP.add(panel1,FlowLayout.LEFT);

    // create a new panel - panel2
    JPanel panel2 = new JPanel();
    panel2.setLayout(null);
        panel2.setBounds(50,50,50,50);
        this.add(panel2);     

    // add Jlabel text to panel2
    JLabel puzgame = new JLabel("~~Puzzle Game~~");
    panel2.add(puzgame); 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-13T10:24:10.630

试试这个：

```
panel1.setBorder(BorderFactory.createTitledBorder("~~Puzzle Game~~")); 
```

# javascript - javascript / jQuery 使用 var 作为属性 id

> ID：14302472
> 
> 赞同：0
> 
> 时间：2013-01-13T10:11:12.973
> 
> 标签：javascript, jquery, jquery-ui-dialog

我想在我的代码中使用翻译，它们来自 PHP/MySql 并被转换为 javascript 数组：

```
var translate = <?= json_encode($Object->translate);?>; 
```

翻译可用 Javascript（已测试）。

现在，我想在我的 Javascript 代码中使用它们，例如 Jquery UI 对话框：

```
$("#logoff").click(function(){  
    var action = "logoff"; 
    var btnLogoff = translate["dialog/buttonLogoff"]; // this gives the translation from the array
    var btnCancel = translate["dialog/buttonCancel"]; // this gives the translation from the array
    $("#dialog").dialog(
        {
            title: translate["dialog/titleLogoff"],
            modal: true,
            resizable: false,
            buttons: {
                btnLogoff : function() {
                        var loadUrl = "includes/_ajax/actions.ajax.php";
                        $.post(loadUrl,{action:action}, function(data) {
                            if(data)
                                location.reload();
                        });
                        $( this ).dialog( "close" );
                },
                btnCancel: function() {
                        $( this ).dialog( "close" );
                }
            }
        }
    );
    $("#dialog").html("<span class='ui-icon ui-icon-alert' style='float: left; margin: 0 7px 20px 0;'></span>" + translate["dialog/textLogoff"]);    
}); 
```

问题在于属性 btnLogoff 没有显示翻译后的文本，而是显示自身（“btnLogoff”）。

在最后一节中， translate["dialog/textLogoff"] 被翻译成应有的样子。我显然做错了什么。我可以使用 var 作为属性 ID 吗？如何？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T11:26:22.867

我认为您没有完全使用 jQuery.dialog API。请参阅[http://api.jqueryui.com/dialog/#option-buttons](http://api.jqueryui.com/dialog/#option-buttons)

尝试使用按钮配置的“文本”属性：

```
$("#dialog").dialog(
    {
        title: translate["dialog/titleLogoff"],
        modal: true,
        resizable: false,
        buttons: [
            {
                text : btnLogoff,
                click : function() {
                    var loadUrl = "includes/_ajax/actions.ajax.php";
                    $.post(loadUrl,{action:action}, function(data) {
                        if(data)
                            location.reload();
                    });
                    $( this ).dialog( "close" );
                }
            }
            ,
            {
                text : btnCancel,
                click: function() {
                    $( this ).dialog( "close" );
                }
            }
        ]
    }
); 
```

# php - VDI 调整大小 api 不起作用

> ID：14302475
> 
> 赞同：0
> 
> 时间：2013-01-13T10:11:40.827
> 
> 标签：php, api, sdk, xen

我正在用 Php 开发一个 Xen 管理 webapp。VDI（虚拟磁盘映像）重命名 API 和调整 API 大小的用法非常相同。我还没有成功调整 VDI 的大小。你认为我在这里做错了什么。

重命名功能：

```
function xenapi_set_vdi_name($session, $ref, $name)
{
    $conn = $session[0];
    $sess = new xmlrpcval($session[1]);
    $vdi = new xmlrpcval($ref);
    $name = new xmlrpcval($name);
    $msg = new xmlrpcmsg("VDI.set_name_label", array($sess, $vdi, $name));

    $res = $conn->send($msg);

    if ($res->faultcode())
        return false;
    $val = $res->value();
    $status = $val->structmem("Status");
    if ($status->scalarval() != "Success")
        return false;

    $value = $val->structmem("Value");
    return $value->scalarval();
} 
```

重命名工作用法：

```
...
xenapi_set_vdi_name($session, $vdi, "NewNameToMyVDI");
... 
```

调整大小功能：

```
function xenapi_set_vdi_virtual_size($session, $ref, $size)
{
    $conn = $session[0];
    $sess = new xmlrpcval($session[1]);
    $vdi = new xmlrpcval($ref);
    $size = new xmlrpcval($size);
    $msg = new xmlrpcmsg("VDI.set_virtual_size", array($sess, $vdi, $size));

    $res = $conn->send($msg);

    if ($res->faultcode())
        return false;
    $val = $res->value();
    $status = $val->structmem("Status");
    if ($status->scalarval() != "Success")
        return false;

    $value = $val->structmem("Value");
    return $value->scalarval();
} 
```

无法调整大小使用：

```
...
$size = '27011707392';
settype($size, "integer");
xenapi_set_vdi_virtual_size($session, $vdi, $size);
... 
```

新的大小值适用于物理服务器上的 XEN 命令，如下所示：

```
xe vdi-resize uuid="91fe671c-93e1-4162-8128-96fedc3c215c" disk-size="27011707392" 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T17:19:04.513

仅出于完整性考虑：此问题已重复（请参见下面的链接）并报告为已成功解决，因此我将在此处粘贴该问题的答案。

问题： [VDI 调整大小 api 不起作用](https://stackoverflow.com/questions/14325306/vdi-resizing-api-does-not-work)

回答：快速浏览一下：http: [//xen.org/files/XenCloud/ocamldoc/apidoc.html ?c=VDI](http://xen.org/files/XenCloud/ocamldoc/apidoc.html?c=VDI)

我认为您应该尝试使用“调整大小”或“在线调整大小”方法而不是“设置虚拟大小”。

使用“resize”方法报告为成功。

# internet-explorer - Internet Explorer 中的 CSS3 PIE（圆角）

> ID：14302477
> 
> 赞同：1
> 
> 时间：2013-01-13T10:12:07.570
> 
> 标签：internet-explorer, css, xhtml, css3pie

您好，我在所有带有圆角的 IE 中都有 CSS3 PIE 的问题。在 Opera、Firofox、Chrome 等...我的代码可以正常工作。但在 IE 中没有。我不知道为什么。从逻辑上讲，我尝试在互联网上找到原因。

我尝试过：
1\. 使用此代码“AddType text/x-component .htc”添加“.htaccess”，但我使用包含 PIE.php 并且使用此包含我不需要此文件，因为在 PIE.php 中我已包含饼图.htc。
2\. 我尝试将相对位置添加到 div，它使用 PIE 和我在[css3pie.com](http://css3pie.com/documentation/known-issues/)中找到的他的“父亲”，但没有什么新东西。

这是测试页面的链接（我在 localhost i IE7-9 和 IE6-IE9 的 IETester 上测试它）：[link](http://asasini.own.cz/_test/slash_home.php)

感谢您的回答，对不起我的英语。

**更新 14.02.2013（已解决）**
- 我很蹩脚的问题是在“行为”中，我使用了不正确的 PIE.php 链接（为什么 .php 和“不是 .htc”在顶部阅读）。

解决方案：
不正确：行为：url(../../funkce/PIE.php);
正确：行为：url（funkce/PIE.php）；

对于不同的人来说，什么是正确的，什么是不正确的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T10:35:32.640

解决方案：不正确：行为：url(../../funkce/PIE.php); 正确：行为：url（funkce/PIE.php）；

对于不同的人来说，什么是正确的，什么是不正确的。

=> 我关闭这个话题并接受这个答案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T12:47:45.327

我不确定 PIE 是如何工作的，但是您是否尝试过这种方式？

```
border-top-right-radius: ??px;
border-top-left-radius: ??px;
border-bottom-right-radius: ??px;
border-bottom-left-radius: ??px; 
```

# c++ - c++：理解动态数组

> ID：14302480
> 
> 赞同：0
> 
> 时间：2013-01-13T10:13:00.887
> 
> 标签：c++

我试图理解一个动态数组。在这种情况下 - 一个指针数组。

这个程序对我来说没问题 - 它正在运行，一切都很好。

困扰我的是数组在堆中的组织方式。

让我们启动它，这将是我们的示例：

```
pn 00456878
pn[0] 003AFB90
pn[1] 003AFB80
pn[2] 003AFB70 
```

请您帮我理解三个问题：

1) 为什么pn[0]的地址比pn[2]的地址高？我似乎在 pn[1] 和 pn[2] 之前分配了 pn[0]？

2) 我在堆中为 sizeof(POINT) 的 3 个元素分配了内存。sizeof(POINT) = 8\. 003AFB70 + 8 = 3AFB78。为什么下一个元素是 003AFB80？

3）我已经形成了一个观点，堆中的数组如下所示：

> ```
> pn->pn[0]
>     pn[1]
>     pn[2] 
> ```

pn 是基地址。pn[0] 的地址 = 基地址 + 0。从我在这里看到的情况来看，我们可以得出结论，基地址和第一个元素之间存在间隙。是为了一些辅助数据还是为了什么？

先感谢您。

我的代码是：

```
#include "stdafx.h"
#include <iostream>
using namespace std;
struct POINT 
{
    int x; 
    int y;
};

POINT ** pn;
POINT ** tmp;

int _tmain(int argc, _TCHAR* argv[])
{
    int counter = 3;
    POINT p_tmp;
    cout << "sizeof(POINT): " << sizeof(POINT) << endl;
    pn = new POINT * [counter];

    POINT a = {0, 0};
    POINT b = {1, 1};
    POINT c = {2, 2};

    pn[0] = &a;
    pn[1] = &b;
    pn[2] = &c;
    cout << "pn "<< pn << endl;

    cout << "pn[0] "<< pn[0] << endl;
    cout << "pn[1] "<< pn[1] << endl;
    cout << "pn[2] "<< pn[2] << endl;
    cin.get();

    POINT m = * pn[0];
    POINT n = * pn[1];
    POINT k = * pn[2];

    cout << m.x << ","<<m.y<< endl;
    cout << n.x << ","<<n.y<< endl;
    cout << k.x << ","<<k.y<< endl;
    cin.get();

    tmp = new POINT * [counter];
    memcpy(tmp, pn, (counter  * sizeof(POINT)));
    for (int i = 0; i < counter; i++)
    {
        cout << "tmp[" << i << "] "<< tmp[i] << endl;
    }
    cin.get();
    delete[] pn;
    pn = tmp;

    m = * pn[0];
    n = * pn[1];
    k = * pn[2];

    cout << m.x << ","<<m.y<< endl;
    cout << n.x << ","<<n.y<< endl;
    cout << k.x << ","<<k.y<< endl;
    cin.get();
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-13T10:16:01.897

您的困惑源于您的数组包含`POINT*`s 而不是`POINT`s 的事实。

> 为什么pn[0]的地址比pn[2]的地址高？我似乎在 pn[1] 和 pn[2] 之前分配了 pn[0]？

这不是您要打印的*地址*，`pn[0]`而是它的*值*。的*地址*由`pn[0]`表示`&pn[0]`。

```
POINT a = {0, 0};
POINT b = {1, 1};
POINT c = {2, 2};

pn[0] = &a;
pn[1] = &b;
pn[2] = &c; 
```

在这里，您输入您在**堆栈**中声明的和的`pn`地址。堆栈从高地址增长到低地址，因此> > 。`a``b``c``POINTS`**`&a``&b``&c`**

 **> 我在堆中为 sizeof(POINT) 的 3 个元素分配了内存。sizeof(POINT) = 8\. 003AFB70 + 8 = 3AFB78。为什么下一个元素是 003AFB80？

不，您在堆中为`sizeof(POINT*)`（指向的指针`POINT`，恰好也是 8 个字节）的 3 个元素分配了内存。*您在堆上*分配了一个由三个指针组成的数组，但指针*位于堆栈上*。

最后，您的数组如下所示：

```
(some address) pn-> (00456878) pn[0]-> (003AFB90) a
                    (00456880) pn[1]-> (003AFB80) b
                    (00456888) pn[2]-> (003AFB70) c 
```

该*指针* `pn`是静态内存，但*指向**堆上*的 3 个指针，这些指针指向*堆栈上的*3 个元素。

* * *

如果你想把所有东西都放在堆上，你可以这样做：

```
Point **pn = new POINT*[counter];

for (int i = 0; i < counter; ++i)
    pn[i] = new POINT; 
```

在此布局中，*指针* `pn`位于静态内存中，但*指向*堆上的 3 个指针*，这些指针指向堆上**的*3 个元素。**

# winapi - WINAPI：GetModuleHandle 和递增引用计数

> ID：14302483
> 
> 赞同：1
> 
> 时间：2013-01-13T10:13:09.890
> 
> 标签：winapi

如何增加`HMODULE`返回的引用计数`GetModuleHandle`？我可以`DuplicateHandle`，或者我需要通过跳跃，检索模块的路径，然后`LoarLibrary`在该路径上吗？简而言之，我想在`GetModuleHandleEx`不使用此功能（即 XP+）的情况下进行模拟。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T12:03:25.097

您不能在 HMODULE 上使用 DuplicateHandle()。[MSDN 库文章](http://msdn.microsoft.com/en-us/library/ms724251%28VS.85%29.aspx)在备注部分列出了 DH 将接受的句柄类型，模块句柄不是其中之一。

一个原因是 HMODULE 实际上根本不是句柄，它是一个*伪句柄*。这背后有历史，早在 16 位版本的 Windows 中，它们实际上就是句柄。但这在 32 位版本中消失了，它们现在只是模块在内存中加载的*地址。*将代码地址转换为模块句柄的一个非常标准的技巧是使用 VirtualQuery() 并将返回的 MEMORY_BASIC_INFORMATION.BaseAddress 转换为 (HMODULE)。有时非常方便。

是的，增加引用计数的唯一其他方法是使用 LoadLibrary()。

# joomla - Joomla Modal 并非在每一页上

> ID：14302484
> 
> 赞同：0
> 
> 时间：2013-01-13T10:13:14.367
> 
> 标签：joomla

我有一个较旧的 Joomla 安装，其中包含模式功能，但是我在源代码中注意到相关的 JS 和 CSS 仅加载在主索引页面上 - 它没有加载到所有其他页面上。

有没有办法在全球范围内包括这个？

一些建议将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T10:15:44.283

想通了 - 通过添加：

```
 <?php JHTML::_( 'behavior.modal' ); ?> 
```

# facebook - Facebook：为什么没有返回带有有效访问令牌的结果？

> ID：14302485
> 
> 赞同：1
> 
> 时间：2013-01-13T10:13:23.087
> 
> 标签：facebook, facebook-graph-api

根据 Facebook[文档](https://developers.facebook.com/docs/reference/api/page/#connections)，可以使用任何有效的访问令牌检索页面的一组帖子：

事实上，使用 Graph API Explorer 可以[证明这一点](https://developers.facebook.com/tools/explorer/?method=GET&path=redbull?fields=posts)。当我将此访问令牌复制到我的应用程序（使用考拉）时，我得到了相同的结果。到目前为止，一切都很好。

但是当我使用我的应用程序访问令牌发出相同的请求时，我得到一个空数组。

它似乎取决于页面，因为例如[这个](https://developers.facebook.com/tools/explorer/?method=GET&path=nike?fields=posts)页面没有显示相同的行为

知道为什么会这样吗？

（此外，API 似乎还显示了一种行为，如果您使用 'since' 和 'until' 指定历史时间段，它会返回比未指定时间段更多的结果。你能对此有所了解吗？）

**澄清**

我使用的“应用程序访问令牌”的格式为 MY_APP_ID|xXxXxXxXxXxXxXxXxXxXxXxXxXx，是按照 Facebook 的“[获取应用程序访问令牌](https://developers.facebook.com/docs/howtos/login/login-as-app/)”说明生成的

# excel - 这个excel函数的VB方法

> ID：14302486
> 
> 赞同：2
> 
> 时间：2013-01-13T10:13:27.603
> 
> 标签：excel, vba

这是功能，它可以正常工作

1.  **用空“”替换**单元格中出现的所有字符 160。
2.  **修剪**任何空白区域。
3.  **在前面再次将到达的数字与 char 160**连接起来。****

 **act 是引用的工作表的名称。

任何人都可以给出一个相当于这个的VB吗？

```
Range("a1").Value = "=+CONCATENATE(char(160),trim(substitute(" & act & "!RC[3],char(160),"""")))" 
```

我有一个电话索引，上面有类似线路上的数字以进行匹配。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-13T10:47:04.193

您可以使用以下任何一种

**一个**。*直接作为公式输入*

在这种情况下，您将替换`.Value`为`.Formula`

```
Range("A1").Formula = "=+CONCATENATE(char(160),trim(substitute(" & _
                      act & "!RC[3],char(160),"""")))" 
```

**乙**。*使用`Application.Evaluate`which 将让您使用与您拥有的相同的代码*

```
Range("A1").Value = Application.Evaluate("=CONCATENATE(char(160),trim(substitute(" & _
                    Sheets(act).Range("D1").Value & ",char(160),"""")))") 
```

**C** *使用 VBA 函数*

*串联*等效是`&`

*修剪*是`Trim`

*替代品*是`Replace`

*字符*是`Chr`

*RC[3]*是右侧的第三个单元格，`Range("D1")`在这种情况下

所以上面可以写成

```
Range("A1").Value = Chr(160) & _
                    Trim(Replace(Sheets(act).Range("D1").Value, Chr(160), "")) 
```**

# perl - perl - 调用 ref 没有返回任何东西

> ID：14302487
> 
> 赞同：1
> 
> 时间：2013-01-13T10:13:41.807
> 
> 标签：perl

有人可以解释为什么调用 ref 没有返回任何东西吗？

```
[pista@HP-PC ~]$ perl -wlae '$var=1; print ref($var)'

[pista@HP-PC ~]$ perl -wlae '@var=1; print ref(@var)'

[pista@HP-PC ~]$ perl -v

This is perl 5, version 14, subversion 3 (v5.14.3) built for x86_64-linux-thread-multi

Copyright 1987-2012, Larry Wall

Perl may be copied only under the terms of either the Artistic License or the
GNU General Public License, which may be found in the Perl 5 source kit.

Complete documentation for Perl, including FAQ lists, should be found on
this system using "man perl" or "perldoc perl".  If you have access to the
Internet, point your browser at http://www.perl.org/, the Perl Home Page.

 [pista@HP-PC ~]$ uname -a
Linux HP-PC 3.6.11-1.fc16.x86_64 #1 SMP Mon Dec 17 21:29:15 UTC 2012 x86_64 x86_64 x86_64 GNU/Linux 
```

我做错了什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-13T10:16:46.153

从[perldoc -f ref](http://perldoc.perl.org/functions/ref.html)：

```
ref EXPR
ref     Returns a non-empty string if EXPR is a reference, the empty
        string otherwise. 
```

您的值是标量和数组，它们不是引用，因此`ref`返回空字符串。如果你要这样做：

```
print ref \$var; 
```

你会得到输出：`SCALAR`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-13T10:16:53.853

`@var`不是 ref，它是一个数组。试试`ref(\@var)`。

# java - 过滤后JTable正确的行号

> ID：14302489
> 
> 赞同：5
> 
> 时间：2013-01-13T10:14:20.490
> 
> 标签：java, swing, user-interface, jtable

这是一个 try 块，用于过滤 table_job 以查找匹配关键字的行。但是，当表模型发生变化时，我很难获得正确的行索引。它总是选择第一行，即使过滤结果显示的行不是第一行。

我知道你可以用 做一些事情`fireTableDataChanged()`，但我不确定如何和在哪里做这件事，在`try`和`catch`块中或在`setLabelText()`将表格内容显示为的方法中`. JLabel`

```
try 
{
    sql = "SELECT Job.jobID as 'Job ID', Employer.name as'Company', Job.title as 'Role', Job.description as  'Description', Job.type as 'Type', Job.benefits as 'Benefits', Job.closing as 'Closing Date' FROM Job INNER JOIN Employer ON Job.employerID=Employer.employerID ORDER BY Employer.name";
    pst = conn.prepareStatement(sql);
    rs = pst.executeQuery();
    TableModel model = DbUtils.resultSetToTableModel(rs);
    table_job.setModel(model);
    final TableRowSorter<TableModel> sorter = new TableRowSorter<TableModel>(model);
    table_job.setRowSorter(sorter);               
    searchJob.addActionListener(new ActionListener()
    {

        public void actionPerformed(ActionEvent e) 
        {
            String text = keyword.getText(); 
            if (text.length() == 0) 
            {
                sorter.setRowFilter(null);
            } 
            else 
            {
                sorter.setRowFilter(RowFilter.regexFilter(text));
            }
        }             
    });
}
catch (Exception e) 
{
    e.printStackTrace();                
}

private void setLabelText() 
{
    try 
    {
        String table_click0 = (table_job.getModel().getValueAt(
                row, 0).toString());
        String sqlSt = "SELECT Employer.name, * FROM Job INNER JOIN Employer ON Job.employerID = Employer.employerID WHERE jobID='"+table_click0+"' ";
        //rest of code to Label text...
    } 
```

`String table_click0 = (table_job.getModel().getValueAt(row, 0).toString());`正在拾取错误的行，而不是更新的选定行。我怎样才能考虑到这一点？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-13T18:23:21.697

您可能需要将“行”值转换为模型索引值（如果您的`row`值是从“视图”角度检索的），使用`convertRowIndexToModel`. 所以只需更换

```
String table_click0 = (table_job.getModel().getValueAt(row, 0).toString()); 
```

和

```
String table_click0 = table_job.getModel().getValueAt(table_job.
                          convertRowIndexToModel(row), 0).toString()); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-09-28T15:12:10.100

快速修复：如何在过滤列表中获取实际行

```
int row=getjTable().getSelectedRow();
if (getjTable().getRowSorter()!=null) {
    row = getjTable().getRowSorter().convertRowIndexToModel(row);
} 
```

# mysql - 计算字符并附加mysql选择

> ID：14302501
> 
> 赞同：0
> 
> 时间：2013-01-13T10:16:04.080
> 
> 标签：mysql, substring

我正在使用以下内容仅从列中选择前 40 个字符

```
SELECT SUBSTRING(w.item_title,1,40) as title from tableName blah blah 
```

我真正想做的是：

如果`w.item_title`超过 40 个字符，则仅返回前 40 个字符并附加 ... 否则`w.item_title`按原样返回

这在`SELECT`阶段是可能的吗？应该在那里完成吗？还是应该事后处理？

我正在使用 JS 来显示结果。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T10:37:30.077

```
SELECT SUBSTR(INSERT(w.item_title, 41, 3, '...'), 1, 43)
  FROM ... 
```

有关示例，请参见[INSERT()](http://dev.mysql.com/doc/refman/5.1/en/string-functions.html#function_insert) String 函数的手册。

> **INSERT(str,pos,len,newstr)**
> 返回字符串 str，子字符串从位置 pos 开始，len 个字符 long 被字符串 newstr 替换。如果 pos 不在字符串的长度范围内，则返回原始字符串。如果 len 不在字符串其余部分的长度范围内，则从位置 pos 替换字符串的其余部分。如果任何参数为 NULL，则返回 NULL。

**EDIT**
Last parameter of `SUBSTR` should be `43` as pointed out by Joachim.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-13T10:24:23.157

询问：

```
SELECT CASE WHEN LENGTH(w.item_title)>40
            THEN SUBSTRING(w.item_title,1,40)
            ELSE w.item_title END as title 
from tableName w 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-13T10:26:25.633

您可以只使用“IF”来附加您的后缀；

```
SELECT CONCAT(SUBSTRING(w.item_title,1,40),
              IF(LENGTH(w.item_title)>40, '...', '')) as title 
FROM tableName w 
```

[SQLfiddle 演示在这里](http://sqlfiddle.com/#!2/24d24/1)。

关于它是否应该在数据库中完成，这是一个更棘手的问题，可以一如既往地用“它取决于”来回答。

如果您的文本很长（例如文章），如果您只需要前 40 个字符，那么您不想传输整篇文章是相当明确的，但如果文本很短，您可能希望从数据库。添加 Web 服务器很容易，但扩展数据库的成本很高。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-13T10:37:06.557

你也可以试试`Left`

```
SELECT CONCAT(Left(w.item_title,40),
              IF(LENGTH(w.item_title)>40, 'something', '')) as title 
FROM tableName w
; 
```

其他：

```
SELECT case when Length(w.item_title) > 40 then 
       Left(w.item_title,40) else
       CONCAT(coalesce(w.item_title,''), 'something') End as title 
FROM tableName w
; 
```

# ruby - 哈希键查找如何从后端递归地工作？

> ID：14302508
> 
> 赞同：0
> 
> 时间：2013-01-13T10:18:12.007
> 
> 标签：ruby, ruby-1.9.3

我正在玩哈希 h1 的不存在键。但是当我看到一些错误及其解决方案时感到惊讶。我想知道递归调用如何在内部完成工作以处理错误。

***第一部分***

在这里尝试 h1[2][3] 导致错误。好的，在下一部分我已经解决了。

```
irb(main):002:0> h1=Hash.new()
=> {}
irb(main):003:0> h1[2]
=> nil
irb(main):004:0> h1[2][3]
NoMethodError: undefined method `[]' for nil:NilClass
        from (irb):4
        from C:/Ruby193/bin/irb:12:in `<main>' 
```

***第二部分***

现在下面的 Hash 定义如何处理前面的错误。运行什么内部算法，这在第一部分是机器人可能的。我知道下面的 sysntx 解决了它，但我想看看内部屏幕它是如何完成工作的。

```
irb(main):005:0> h1 = Hash.new do |h,k|
irb(main):006:1*   h[k] = Hash.new()
irb(main):007:1> end
=> {}
irb(main):008:0> h1[2]
=> {}
irb(main):009:0> h1[2][3]
=> nil 
```

可以修复递归调用吗？说 h1[1][2][3] 和 h1[1][2][3][4] 等等。

当我通过 h1[2] 调用 Key 时，我知道这`2`是我正在寻找的密钥。现在 h1[1][2] - 在这种情况下，调用用 [1][2] 寻找密钥 - 我是正确的？如果我不正确，那么真实的事情是如何从后端工作的 - 想知道这一点。

任何人都可以在这里帮助我理解吗？

谢谢，

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-13T11:50:14.947

```
h = Hash.new{|h, k| h[k] = Hash.new(&h.default_proc)}
#demo:
p h[:a][:b][:c]=1 # =>{:a=>{:b=>{:c=>1}}} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-13T11:39:41.130

如果我正确理解您的问题，我认为您可以使用递归 Proc 做您想做的事情：

```
p = Proc.new { Hash.new { |hash, key| hash[key] = p.call } }
h = Hash.new { |hash, key| hash[key] = p.call } 
```

然后：

```
h[0][0][0] -> {} 
```

解释：

`p`是一个 Ruby Proc。Procs 类似于 Ruby 块，但它是成熟的对象，因此可以存储在变量中。

Procs 可以是递归的——它们可以调用自己，我们在这个例子中利用它来创建一个新的默认哈希值，无论我们调用的哈希树有多少层。该`Proc#call`方法调用 Proc。请注意，Proc 的主体可以访问在其范围之外定义的变量（它是一个闭包）。

steenslags 解决方案或多或少做同样的事情，但它是一种更优雅的单行方式，利用该`Hash#default_proc`属性来避免定义 Proc 变量的需要。

# jquery - 当请求没有收到响应时会发生什么？我看到重试

> ID：14302512
> 
> 赞同：26
> 
> 时间：2013-01-13T10:18:24.620
> 
> 标签：jquery, html, ajax, browser, request

我认为我的问题可能更多是与浏览器相关的问题，但这是一个非常基本的问题，我也想在我冒险构建 Web 应用程序时找到答案。

在我的客户端代码中，我正在`$.ajax`打电话。此帖子可能需要一段时间才能回复。我看到的是在一段时间后再次发送请求。

我以为是我的`$.ajax`调用再次发送它，但是无论我在服务器上看到多少次 POST 请求，我都只看到`beforeSend`调用了一次回调。我很确定我的代码不会多次发送它，所以我认为它是浏览器重试？

我知道我的服务器收到的请求不止一次，因为我运行了 Wireshark 并且可以多次看到发布请求。所以我的假设是这与 HTTP 有关吗？即，如果在一定时间内未收到响应，则重新发送请求？

下面是我的电话示例。

```
$.ajax({
                    async: false,
                    type: 'POST',
                    url: '<%= url_for('importDevice') %>',
                    data: { device: val },
                    retryLimit: 0,
                    //callback
                    success: function(data) {
                    alert('calling import');
                    if ( data == 'nomaster')
                    {
                            // Display a warning  toast, with a title
                            toastr.warning('You must set the Master Key first!', 'Warning');
                            $.ismasterset = false;
                            //reset the form contents after added
                    } else
                    {
                            $("div#content").html(data);
                    }
                    },
                     beforeSend: function(){
                    alert('in before send');
                    }
            }); 
```

这是所有相关代码，没有使用“retryLimit”，我只是没有从我的代码中删除它，是的，在我放入之前问题就在那里。

*使用客户端和服务器的输出进行编辑。*

好的，我安装了“Firefox 的 Live Http 标头”。

在“生成器”选项卡中，我看到了一个调用

```
'#request# POST http://testhost/importdevice' 
```

我没有`POST`在“标题”部分看到，也许是因为没有回应？

在我的网络服务器中，虽然我看到 2 个呼叫相隔大约 22 秒。

```
[Sun Jan 13 03:08:45 2013] [debug] POST /importdevice (Mozilla/5.0 (Macintosh; Intel Mac OS X 10.8; rv:17.0) Gecko/20100101 Firefox/17.0).

[Sun Jan 13 03:09:07 2013] [debug] POST /importdevice (Mozilla/5.0 (Macintosh; Intel Mac OS X 10.8; rv:17.0) Gecko/20100101 Firefox/17.0). 
```

我也可以在wireshark中看到这些相同的调用......

这就是为什么我问这是否是正常行为，如果响应没有返回，则尝试重新发送请求，类似于 TCP 握手和`SYN`重新传输。

**新更新**

它似乎与我的 Ajax 调用无关。如果我用一个简单的 HREF 创建一个按钮。

IE

```
<a href="/importdevice?device=serverA" class="btn btn-success">TestDirect</a> 
```

然后在我的“实时 HTTP 标头输出”中，我得到……只有一个实例。

```
#request# GET http://172.16.118.15/importdevice?device=serverA 
```

但是再次在我的服务器日志中我得到了。

```
[Sun Jan 13 03:20:25 2013] [debug] GET /importdevice (Mozilla/5.0 (Macintosh; Intel Mac OS  X 10.8; rv:17.0) Gecko/20100101 Firefox/17.0).
[Sun Jan 13 03:20:48 2013] [debug] GET /importdevice (Mozilla/5.0 (Macintosh; Intel Mac OS X 10.8; rv:17.0) Gecko/20100101 Firefox/17.0). 
```

在服务器上的wireshark中，我也看到了两次......而且正如预期的那样，我的服务器代码也被调用了两次......这对我来说真的很困惑。

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2013-01-15T19:34:44.540

查看这篇解释正在发生的事情的博客文章： [http ://geek.starbean.net/?p=393](http://geek.starbean.net/?p=393)

根据[HTTP/1.1 RFC 8.2.4](https://www.w3.org/Protocols/rfc2616/rfc2616-sec8.html#sec8.2.4)：

> 如果 HTTP/1.1 客户端发送的请求包含请求正文，但不包含期望为“100-continue”的 Expect 请求头字段，并且客户端未直接连接到 HTTP/1.1 源服务器，并且如果客户端在从服务器接收到任何状态之前看到连接关闭，客户端应该重试请求。

确保您设计的 Web 应用程序能够容忍这些额外的请求。而如果你想让 ajax 请求只做一次，比如向数据库写入一些东西，那么你需要将请求设计为幂等的。请参阅：[什么是幂等操作？](https://stackoverflow.com/questions/1077412/what-is-an-idempotent-operation)

此外，这突出了 GET 和 POST 操作之间的区别： [http ://www.cs.tut.fi/~jkorpela/forms/methods.html](http://www.cs.tut.fi/~jkorpela/forms/methods.html)

作为一般设计实践： -GET 操作应
设计为幂等
-POST 操作应用于写入数据库等。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-13T10:40:41.700

**如果您的请求不是**异步的，为什么要设置回调？

如果您想要一个同步过程，则在调用之前放置beforeSend 代码，并在*调用***之后**简单地调用**成功**回调。

 ***如果您想要异步方法，请设置**async: true**

这行代码也是错误的：

```
url: '<%= url_for('importDevice') %>', 
```

看引号：应该是

```
url: '<%= url_for("importDevice") %>', 
```

也许这些建议不会解决问题，但会为您指明正确的方向。问题可能出在发布的代码之外的其他地方......

回到你的问题：可能是浏览器吗？我不认为，但谁知道那里有什么！......浏览器是什么？你试过另一个吗？

我建议尝试使用 Firefox 并使用**Live httpHeaders**插件（非常易于设置和使用）。您将看到**从客户端**输出的内容，而不是从服务器端输入的内容。***

# c# - 我怎样才能在事情完成之前阻止它再次发生？

> ID：14302516
> 
> 赞同：1
> 
> 时间：2013-01-13T10:20:59.940
> 
> 标签：c#, windows-phone-7, windows-phone, windows-phone-8

我有这个故事板，其中有一个持续 3 秒的动画。它是由一个`Image` `Tap`事件触发的，但我不希望用户在它完成之前再次触发它。故事板有一个`Completed`事件。

有没有办法可以锁定情节提要`Begin`并解锁`Completed`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-13T13:58:37.097

您可以将控件包装到类中，将 bool IfRunning 属性添加到该类，并在每次用户再次点击时检查它。

您的代码将与此类似：

（点击事件引发）

```
if(IfRunning==false) 
{
IfRunning=true;
BeginAnimation();
} 
```

...（在 Completed 事件中加注）

```
EndAnimation(); 
IfRunning=false; 
```

# java - 具有特定频率的字符串的子字符串

> ID：14302518
> 
> 赞同：0
> 
> 时间：2013-01-13T10:21:04.113
> 
> 标签：java, string

考虑到以下字符串，我想以这种方式获取子字符串：

```
String str="abcdefghij" 
```

返回的子字符串：

```
 acegi 
```

也就是说第一个字符串str的每两个字符。然后以相同的推理，获取第一个字符串 str 的每三个字符的子字符串。

频率为 f 的同一个问题

这是我目前的方法，但实际上有一个错误：

```
 private static String subString(String str,int freq){
        String subStr=null;

        for(int i = 0; i < str.length(); freq++){
          subStr= subStr + str[i];
        }
     return subStr;
 } 
```

也可能有一些已经存在的方法来完成这些任务？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-13T10:29:11.430

我不知道这样做的内置方法。您可以使用 StringBuilder 来避免创建许多临时字符串，并使用正确的容量对其进行初始化：

```
private static String subString(String str, int freq) {
    //make it the right capacity to avoid reallocations
    StringBuilder subStr = new StringBuilder(str.length() / freq + 1);

    for (int i = 0; i < str.length(); i += freq) {
        subStr.append(str.charAt(i));
    }
    return subStr.toString();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-13T10:23:47.713

您需要`freq`字符串中的每一个字符。试试这个

```
 String subStr="";

    for(int i = 0; i < str.length(); i+=freq){
      subStr= subStr + str.charAt(i);
    } 
```

编辑：更好的主意是使用 StringBuilder，请参阅@asgoth 的答案

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-13T10:29:22.610

**请使用 StringBuilder 进行迭代！**我见过像你这样使用的结构，会炸毁应用程序服务器。

```
private static String subString(String str,int freq){
    StringBuilder out = new StringBuilder();

    for(int i = 0; i < str.length(); i+=freq){
      out.append(str.charAt(i));
    }
    return out.toString();
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-13T10:28:21.123

```
private static subString(String str, int freq){
String subStr;
for(int i=0;i<str.length();i+=freq){
  subStr=subStr+str.charAt(i);
}
return subStr;
} 
```

这是您请求的方法。没有内置的。

# android - Spinner：在 Android 中使用共享首选项存储和检索值

> ID：14302519
> 
> 赞同：1
> 
> 时间：2013-01-13T10:21:04.697
> 
> 标签：android

我无法检索微调器的选定值。有人可以帮助我吗？谢谢。

这就是我检索数据的方式。它在`onCreate()`方法内部。

```
mPrefs = getSharedPreferences(PREFS_NAME, MODE_PRIVATE);
SpinnerLang.setSelection(mPrefs.getInt(PREF_SPINNER, 0)); 
```

然后我将 Spinner 的值保存在一个按钮中，因此当用户从 Spinner 中选择并单击按钮时，将保存所选值。

```
//Listening to button event
btnDone.setOnClickListener(new View.OnClickListener() {
  public void onClick(View v) {
    Editor e = mPrefs.edit();
    int Spinnervalue = SpinnerLang.getSelectedItemPosition();
    e.putInt("PREF_SPINNER", Spinnervalue);
    e.commit();
  } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-13T10:40:59.523

使用 a`spinner.setOnItemSelectedListener()`优先存储所选项目的位置

```
 spinner.setAdapter(mySpinnerAdapter);   

    spinner.setOnItemSelectedListener(new AdapterView.OnItemSelectedListener() {

        /**
         * Called when a new item is selected (in the Spinner)
         */
        public void onItemSelected(AdapterView<?> parent,
            View view, int position, long id) {
            mPrefs.edit().putInt("PREF_SPINNER", position).commit();
        }

        public void onNothingSelected(AdapterView<?> parent) {
          // Do nothing.
        }
    }); // (optional)

    //UPDATE - When you are using a button onCLick()
    // to set the spinner selection:
    button.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View v) {
            spinner.setSelection(mPrefs.getInt("PREF_SPINNER", 0));

        }
    });

     // set the spinner selected item from preference after 
     // spinner.setAdapter(mySpinnerAdapter);
     // -or it will default to the first item
 //    spinner.setSelection(mPrefs.getInt(PREF_SPINNER, 0)); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-13T10:28:14.777

您可以使用这些方法，具体取决于您声明微调器的方式。

[获取选定项（）](http://developer.android.com/reference/android/widget/AdapterView.html#getSelectedItem%28%29)

[getSelectedItemPosition()](http://developer.android.com/reference/android/widget/AdapterView.html#getSelectedItemId%28%29)

[getSelectedItemId()](http://developer.android.com/reference/android/widget/AdapterView.html#getSelectedItemPosition%28%29)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-13T10:32:02.047

确保使用的常量 PREF_SPINNER 和“PREF_SPINNER”在您的代码中分配了相同的值

```
mPrefs.getInt(PREF_SPINNER, 0)
e.putInt("PREF_SPINNER", Spinnervalue); 
```

# c# - 读取节点内的多个值

> ID：14302520
> 
> 赞同：0
> 
> 时间：2013-01-13T10:21:06.327
> 
> 标签：c#, xml, linq, linq-to-xml

大家好，我正在尝试使用 linq.am 读取 xml 文档，遇到了一个问题，一个节点有两个同名的值，我怎样才能得到这两个值。我只能使用此代码获得第一个。

```
XDocument doc = XDocument.Load("Orders.xml");
var data = from item in doc.Descendants("Order")
           select new
           {
               OrderID = item.Element("OrderID").Value,
               POnumber = item.Element("PurchaseOrderNumber").Value,
               OrderDate = item.Element("OrderPlacedDate").Value,
               PFirstName = item.Element("purchasingContact").Element("FirstName").Value,
               Pid= item.Element("CurrentOrderDetails").Element("ProductsId").Value
           }; 
```

我只能获得产品 id 34 我怎样才能获得另一个？请帮助

```
<Order>
    <OrderID>123</OrderID>
    <PurchaseOrderNumber>12</PurchaseOrderNumber>
    <OrderPlacedDate>12/23/2012</OrderPlacedDate>
    <PurchasingContact>
     <FirstName>test</FirstName>
    </PurchasingContact>        
    <CurrentOrderDetails>
       <ProductsId>34</ProductsId>
       <OrderQuantity>2</OrderQuantity>
       <ProductsId>35</ProductsId>
       <OrderQuantity>2</OrderQuantity>
    </CurrentOrderDetails>
</Order>
<Order>
    .......
</Order> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T10:53:54.300

```
 XDocument doc = XDocument.Load("Orders.xml");
 var data = from item in doc.Descendants("Order")
            select new
            {
                OrderID = item.Element("OrderID").Value,
                POnumber = item.Element("PurchaseOrderNumber").Value,
                OrderDate = item.Element("OrderPlacedDate").Value,
                PFirstName = item.Element("purchasingContact").Element("FirstName").Value,
                Pids = item.Element("CurrentOrderDetails").Elements("ProductsId").Select(e => e.Value).ToList()
            }; 
```

但老实说 - 您应该考虑更改 XML 结构。`CurrentOrderDetails`应该看起来更像这样：

```
<CurrentOrderDetails>
    <Product id="34" quantity="2" />
    <Product id="35" quantity="2" />
</CurrentOrderDetails> 
```

或者

```
<CurrentOrderDetails>
    <Product>
        <Id>34</Id>
        <Quantity>2</Quantity>
    </Product>
    <Product>
        <Id>35</Id>
        <Quantity>2</Quantity>
    </Product>
</CurrentOrderDetails> 
```

这样可以更轻松地获取产品 ID 和数量。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-13T10:54:39.640

```
from o in doc.Descendants("Order")
let contact = o.Element("purchasingContact")
let details = o.Element("CurrentOrderDetails")
select new {
    OrderID = (int)o.Element("OrderID"),
    POnumber = (int)o.Element("PurchaseOrderNumber"),
    OrderDate = (DateTime)o.Element("OrderPlacedDate"),
    PFirstName = (string)contact.Element("FirstName"),
    Pids = details.Elements("ProductsId").Select(e => (int)e).ToList()
}; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-13T10:59:43.820

如果你想在你的结构中将 Pids 作为一个数组，你可以有

```
Pids = item.Element("CurrentOrderDetails")
    .Elements("ProductsId")
    .Select(e => e.Value).ToArray()
```

如果您希望所有条目都作为一个平面列表，那么要走的路是

```
var data = from item in doc.Descendants("Order")
           from product in item.Element("CurrentOrderDetails").Elements("ProductsId")
                     select new
                     {
                         OrderID = item.Element("OrderID").Value,
                         POnumber = item.Element("PurchaseOrderNumber").Value,
                         OrderDate = item.Element("OrderPlacedDate").Value,
                         PFirstName = item.Element("purchasingContact")
                             .Element("FirstName").Value,
                         Pid = product.Value
                      };
```

顺便说一句：XML 模型应该有一个围绕 productsid 和 orderquantity 的环绕元素，显式地对订单行进行建模。这将更具表现力和直观性。

# .htaccess - 默认情况下使用`.htaccess`访问`folder/index.php`？

> ID：14302521
> 
> 赞同：0
> 
> 时间：2013-01-13T10:21:08.340
> 
> 标签：.htaccess, rewrite, subdirectory

我想将其设为默认值：

从：

`mydomain.com/folder/folder/`

至：

`mydomain.com/folder/folder/index.php`

反正要做`.htaccess`什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T14:07:05.120

这会将所有两级文件夹从`/f1/f2/`to重定向`/f1/f2/index.php`并显示在地址栏中。它*不*重定向`/f1/f2`或`/f1/script.php`（没有斜杠）

```
RewriteEngine On
RewriteBase /
RewriteCond %{REQUEST_URI} !index\.php   [NC]
RewriteCond %{REQUEST_URI}  ^/(\w+)/(\w+)/$
RewriteRule .*       %1/%2/index.php               [R,L] 
```

# android - 如何将像素位置（x 和 y 坐标）从一台 Android 设备转换到其他 Android 设备？

> ID：14302522
> 
> 赞同：1
> 
> 时间：2013-01-13T10:21:09.407
> 
> 标签：android

如何将像素位置（x 和 y 坐标）从一台 Android 设备转换到具有不同屏幕尺寸和不同分辨率的其他 Android 设备？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-13T10:25:20.703

一种方法：将 x,y 除以屏幕宽度和高度，得到从 0.0 到 1.0 的浮点数，然后将这两个因子乘以第二个设备的屏幕宽度和高度。

# reverse-engineering - 过滤器驱动程序与直接串行通信

> ID：14302524
> 
> 赞同：1
> 
> 时间：2013-01-13T10:21:49.283
> 
> 标签：reverse-engineering, serial-communication, filter-driver

我正在对串行通信协议进行逆向工程。在我解码这些位之后，我应该为它编写一个接口。我的选择分为编写过滤器驱动程序以拦截传入和传出的数据或仅进行基本的串行直接通信。与使用另一种方法相比，使用一种方法有什么优势吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T11:40:25.997

嗯，有很大的不同：

*   调试过滤器驱动程序需要内核调试器。停止运行中的调试会话和编辑+构建代码的选项是有限的，通常需要重新启动操作系统。调试用户模式代码很简单
*   过滤器驱动程序中的错误将使操作系统崩溃。用户模式代码中的错误只会使程序崩溃
*   部署过滤器驱动程序通常需要安装程序。用户模式代码只是在构建时链接到程序中。

这些都是相当严重的缺点。我能想到的过滤器驱动程序的唯一优点是代码对用户模式程序员完全不可见。然而，这也是一种负担，当过滤器驱动程序行为不端时，这个程序员几乎无法帮助您获得诊断信息。

# java - RCP 注册按钮...如何？

> ID：14302526
> 
> 赞同：-1
> 
> 时间：2013-01-13T10:22:24.900
> 
> 标签：java, button, eclipse-rcp

我在创建原始按钮时遇到问题...

我在 preWindowOpen() 方法中创建了按钮：

```
 JButton btn1 = new JButton("Submit"); 
```

但是我如何在 plugin.xml 中注册它？添加到我的应用程序并使其可见我的意思是

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T13:39:02.360

首先你需要了解RCP的结构。我强烈向您推荐 vogella - Ecipe [4 RCP](http://www.vogella.com/articles/EclipseRCP/article.html)的教程。阅读内容很多，但您将了解 Eclipse RCP 的基础知识，而且它的编写方式非常用户友好。

# javascript - JavaScript 将 HTML 保存在变量中

> ID：14302527
> 
> 赞同：-1
> 
> 时间：2013-01-13T10:22:25.433
> 
> 标签：javascript, variables

我目前正在尝试将一些 HTML（来自 XML 文件）保存在一个变量中，但不知何故我得到了一些奇怪的错误。除此之外，浏览器似乎试图加载那段 HTML 代码中使用的图像，即使我不使用它。

这是代码：

```
// Load the data from the XML node.
var description = $(this).find('description').text();

var descriptionWithTags = description.replace('<p>','');
descriptionWithTags = descriptionWithTags.replace('</p>','########');

// Remove HTML Tags and add the Line-Breaks
var convertedString = $(descriptionWithTags).text();
convertedString = convertedString.replace('########','<br /><br />');
console.log("E");

// Save it in an array.
contentRSS[articleCount] = convertedString; 
```

编辑：如果我删除以下行，它会再次起作用，但我现在不知道为什么。

```
descriptionWithTags = descriptionWithTags.replace('<p>',''); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-13T10:27:50.500

您从没有 HTML 标记的文本开始：

```
var description = $(this).find('description').text(); // this removes HTML tags 
```

然后您尝试将其解析为 HTML ：

```
var convertedString = $(descriptionWithTags).text(); 
```

这是行不通的。您可能应该在第一行使用 html ：

```
var description = $(this).find('description').html(); 
```

# c - c printf函数动态类型判断

> ID：14302534
> 
> 赞同：3
> 
> 时间：2013-01-13T10:22:43.153
> 
> 标签：c, linked-list, stack, runtime, printf

我正在尝试使用 void 指针在 c 中实现一个通用堆栈来指向数据。结构看起来像这样

```
struct record{
  void* data;
  struct record* previousRecord; 
}; 
```

其中 void 指针数据是指向堆栈位置将保存的数据的指针。如果我实现这样的推送功能

```
struct record* push(struct record* tos, void* data){
  struct record* newtos = (struct record*)malloc(sizeof(struct record));
  newtos->data = data;
  newtos->previousRecord = tos;
  return newtos;
} 
```

并将几个整数指针和字符串指针推入堆栈，有什么方法可以打印这些指针引用的值。我的问题是，如果我使用 printf 函数，我必须在代码中指定要打印的值的数据类型，但存储在堆栈中的值只能在运行时确定

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-13T10:28:10.310

如果您想以正确的格式打印数据，您*必须*知道它的类型。

```
#include <stdio.h>

enum datatype
{
  DATATYPE_STRING, DATATYPE_INTEGER
};

struct record
{
  enum datatype type;
  void *data;
  struct record *next;
};

void print_record(struct record *p)
{
  switch (p->type)
  {
    case DATATYPE_STRING:
      printf("%s\n", (char *)p->data);
      break;
    case DATATYPE_INTEGER:
      printf("%d\n", *(int *)p->data);
      break;
  }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-13T10:28:26.243

有了地址，你怎么知道数据的类型，它可以是字符串或整数地址：

但是您可以在`record`定义中保留一个关于存储在中的值类型的额外字段`data part`，如下所示：

```
typedef enum { STRING, INT, CHAR} type;
struct record{
  type t;
  void* data;
  struct record* previousRecord; 
}; 
```

并编写一个通用的打印函数：

```
int print(struct record  *r){  

  switch(r->t){
     case CHAR:     return printf("%c", *((char*)(r->data)));
     case INT:      return printf("%d", *((int*)r->data));        
     case STRING:   return printf("%s", (char*)r->data);        
     default:       return printf("Error");
  }
} 
```

[这是一](http://www.cs.rit.edu/~ats/books/ooc.pdf)**本对用 C 编写通用代码非常有帮助的[**项目/A 书。**](http://www.cs.rit.edu/~ats/books/ooc.pdf)**

# php - 如何将带有while循环的数据库中的值添加到数组中？

> ID：14302536
> 
> 赞同：0
> 
> 时间：2013-01-13T10:22:48.693
> 
> 标签：php, mysql

附加信息 1) 我有多个记录（姓名、年龄、性别），（（约翰，10 岁，男），（莎莉，9 岁，女），（杰克，12 岁，男））。

2) 所有这些记录都在数据库中。

3）我想用while循环将这些记录自动添加到数组中。

我试图用这些问题提交我的代码，但它提示它的格式不正确。请帮忙。如果需要，欢迎您提供更多信息。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-13T10:24:49.083

尝试：

```
foreach ($con->query("SELECT * FROM table") as $row){
    $arr[] = array(
        "name" => $row['name'],
        "age" => $row['age'],
        "gender" => $row['gender']
    );
} 
```

你的连接在哪里`$con`，表是你的表名......

然后，如果`var_dump` `$arr`您会看到类似这样的数组结构 =>

```
array (size=n) // n number of array in $arr
  0 => 
    array (size=3)
      'name' => string 'John' (length=7)
      'age' => string '10' (length=2)
      'gender' => string 'Male' (length=4)
  1 => 
    array (size=3)
      'name' => string 'Sally' (length=7)
      'age' => string '10' (length=2)
      'gender' => string 'Female' (length=4)
  2 => 
    array (size=3)
      'name' => string 'Other' (length=7)
      'age' => string '10' (length=2)
      'gender' => string 'Male' (length=4)
  // etc ... 
```

# php - PHP 未在选择框和文本区域的表中显示 MySQL 中的值

> ID：14302537
> 
> 赞同：0
> 
> 时间：2013-01-13T10:23:25.130
> 
> 标签：php, mysql, sql-update

信息.php

```
<?php

if (empty($_POST)===false){
    $required_fields = array('first_name','last_name','gender','age','location','about_me');
    foreach($_POST as $key =>$value){
        if(empty($value) && in_array($key, $required_fields) === true){
            $errors = 'fillin';
            break 1;
        }
    }
}
if (empty($_POST)=== false && empty($errors) === true){

    $update_data = array(
        'first_name' => $_POST['first_name'],
        'last_name' => $_POST['last_name'],
        'gender' => $_POST['gender'],
        'age' => $_POST['age'],
        'location' => $_POST['location'],
        'about_me' => $_POST['about_me']
    );
    update_user($update_data);
    echo 'updated';
}else if (empty($errors) === false){
    echo $errors;
}
?>
        <form action = "" method = "POST">
        First Name: <input type = "text" name = "first_name" maxlength = "40" placeholder = "First Name" value = "<?php echo $user_data['first_name']; ?>"><br>
        Last Name: <input type = "text" name = "last_name" maxlength = "40" placeholder = "Last Name" value = "<?php echo $user_data['last_name']; ?>"><br>
        Gender: <select type = "text" name = "gender" value = "<?php echo $user_data['gender']; ?>"><option>Select</option><option name = "male" value = "Male">Male</option><option name = "female" value = "Female">Female</option><option name = "othergen" value = "Other">Other</option></select><br>
        Age: <input type = "text" name = "age" maxlength = "3" placeholder = "What's your age?" value = "<?php echo $user_data['age']; ?>"><br>
       Location: <input type = "text" name = "location" maxlength = "100" placeholder = "Your location?" value = "<?php echo $user_data['location']; ?>"><br>
        About Me: <textarea type = "text" name = "about_me" maxlength = "500" placeholder = "Say something about yourself!" value = "<?php echo $user_data['about_me']; ?>"></textarea><br>

        <input type = "submit" value = "submit">
        </form> 
```

主要问题是它没有显示文本区域的值和我通过 PHPmyadmin 手动更新的选择框，但它显示文本框中的值就好了。

更新：字段现在更新成功！甚至文本区域和选择框也在表格中更新。但是，该值未显示在文本区域或选择框中。所以问题依旧存在！

变量用户数据：

```
$user_data = user_data($session_user_id,'user_id','username','password','first_name','last_name','email','gender','age','location','about_me'); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T11:35:06.620

根据 W3C 的定义，[textarea](http://www.w3.org/TR/html401/interact/forms.html#h-17.7)没有`value`属性。相反，该值由`<textarea></textarea>`标签包装

```
<TEXTAREA name="thetext" rows="20" cols="80">
    First line of initial text.
    Second line of initial text.
</TEXTAREA> 
```

这对于文档类型[HTML5也有效](http://www.w3.org/TR/html-markup/textarea.html)

默认情况下， A`<select>..</select>`将始终提交第一个`<option>`。如果要预先选择另一个选项，则必须将属性添加`selected="selected"`到此选项。

[http://www.w3.org/TR/html401/interact/forms.html#h-17.6.1](http://www.w3.org/TR/html401/interact/forms.html#h-17.6.1)

Select 没有类型属性。

示例：如何`selected`在 PHP 模板中添加属性

```
<select name="fieldname">
    <option value="on select,submitted value" <?php echo $myValue == 'on select,submitted value' ? ' selected="selected"' : ''; ?>>displayed value</option>
    <option value="on select,submitted value 2" <?php echo $myValue == 'on select,submitted value 2' ? ' selected="selected"' : ''; ?>>displayed value</option>
</select> 
```

# heroku - Heroku 调度程序崩溃

> ID：14302539
> 
> 赞同：1
> 
> 时间：2013-01-13T10:23:41.363
> 
> 标签：heroku, scheduler

我在使用 Heroku 上的调度程序插件时遇到问题。我让它运行了很长时间，但现在它陷入了崩溃和重新启动的循环中。

我已经尝试通过运行 heroku ps:stop scheduler 来停止该进程，并且我已经删除了 scheduler 插件，但它仍然会不断重启。

它正在运行的任务是 rake:cron。我已经清空了该任务，因此它实际上并没有做任何事情，但是在运行它并显示以下消息后它仍然崩溃：

```
heroku[scheduler.5818]: State changed from up to crashed
heroku[scheduler.5818]: State changed from crashed to down
heroku[scheduler.5818]: State changed from down to starting
heroku[scheduler.5818]: Starting process with command `bundle exec rake cron`
heroku[scheduler.5818]: State changed from starting to up    
heroku[scheduler.5818]: Process exited with status 0
heroku[scheduler.5818]: State changed from up to crashed
heroku[scheduler.5818]: State changed from crashed to starting 
```

有没有其他方法可以强制终止 Heroku 上的进程？我担心我会为不断运行/崩溃的调度程序付费。

# spring - MongoTemplate中的Groupby返回空字段

> ID：14302544
> 
> 赞同：0
> 
> 时间：2013-01-13T10:24:30.297
> 
> 标签：spring, mongodb, spring-mvc

我有一个带有 fields 的集合`id, a-int, b-int, c-int, total-int`。我试图得到`a, b, c, total`，但我最终得到的只是字段值的总和，`total`其余字段值是`0, 0, 0`. 我该如何解决？以下数据样本的预期结果`10, 20, 30, 300`

谢谢

数据样本

```
id,   a,  b,  c, total
xid, 10, 20, 30, 100
xid, 10, 20, 30, 200

GroupBy groupBy = GroupBy.key("{a : 1, b : 1, c : 1}")
  .initialDocument("{ total: 0 }")
  .reduceFunction("function(obj, result) { result.total += obj.total; }");

GroupByResults<Grouped> results = mongoTemplate.group(Criteria.where("id").is(id),
TABLE, groupBy, Grouped.class); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-29T11:52:57.800

我得到了我认为您想要使用以下内容的结果：

```
GroupBy groupBy = GroupBy.key("a", "b", "c")
                         .initialDocument("{ total: 0 }")
                         .reduceFunction("function(obj, result) { " +
                                         "  result.a = obj.a; " +
                                         "  result.b = obj.b; " +
                                         "  result.c = obj.c; " +
                                         "  result.total += obj.total; " +
                                         "}"); 
```

请注意，您需要做的是告诉reduce 函数将什么放入a、b 和c 字段以及total 字段。

这给了我一个原始输出：

```
{ "a" : 10.0 , "b" : 20.0 , "c" : 30.0 , "total" : 300.0} 
```

由于您没有包含 Grouped 类，我不确定它是否完全映射到您想要的对象，但它可能会为您指明正确的方向。

# python - 是否可以使用正交投影使用 matplotlib 底图显示地球的“背面”？

> ID：14302547
> 
> 赞同：3
> 
> 时间：2013-01-13T10:24:51.907
> 
> 标签：python, matplotlib, matplotlib-basemap

基本上我想让地球的主体“透明”，这样一个物体（一个点或一个补丁等）及其对映图像可以同时显示在同一个正交地图上。这可能与 matplotlib 和底图有关吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-08T20:37:15.673

只绘制两个投影怎么样？这有点作弊，但给你：

```
import pylab as plt
from mpl_toolkits.basemap import Basemap
import numpy as np

front_central_lon = 70
m1 = Basemap(projection='ortho', lat_0=0, lon_0=front_central_lon)
m2 = Basemap(projection='ortho', lat_0=0, lon_0=front_central_lon + 180)

# m2.drawcoastlines(color='gray')
# m1.drawcoastlines()

m2.fillcontinents(color='coral', alpha=0.3)
m1.fillcontinents(color='coral', alpha=0.8)
m1.drawparallels(np.arange(-90.,91.,30.))
m1.drawmeridians(np.arange(-180.,181.,60.))

plt.show() 
```

![前后正交](../Images/d758932bbf4b6c8cfc9b0a662da1a098.png)

# asp.net-mvc-3 - IModelBinder 未在 MVC 3 上触发

> ID：14302549
> 
> 赞同：0
> 
> 时间：2013-01-13T10:25:09.990
> 
> 标签：asp.net-mvc-3, ninject, model-binding

我有这个控制器：

```
[HttpPost]
public JsonResult Execute(PaymentModel paymentModel){...} 
```

这是模型

```
public class PaymentModel
{
[Required]
[DisplayName("Full name")]
public string FullName { get; set; }
...
} 
```

这是绑定动作

```
 protected void Application_Start()
        {
            AreaRegistration.RegisterAllAreas();
            RegisterGlobalFilters(GlobalFilters.Filters);
            RegisterRoutes(RouteTable.Routes);
            ModelBinders.Binders.Add(typeof(PaymentModel), new PaymentModelsBinding());           
        } 
```

这是绑定的实现

```
public class PaymentModelsBinding : IModelBinder
    {
        public  object BindModel(ControllerContext controllerContext, ModelBindingContext bindingContext)
        {
//Cant get to here with the debugger
} 
```

我不知道这是否相关，但我正在使用 Ninject 向控制器构造函数注入。

**更新** 这是提交表单的方式：

```
 $.ajax({
                type: 'POST',
                url: $("#form").attr("action"),
                data: $("#form").serialize(),
                success: function (json) {
                    ...

                },
                dataType: "Json"
            }); 
```

我希望那是宁静的，这意味着我会以所有可能的 WEB 方式调用它。
浏览器 Ajax、浏览器经典表单提交、WebClient... 等等。

**更新** 这是我的 ninject 代码：

```
kernel.Components.Add<IInjectionHeuristic, CustomInjectionHeuristic>();

            kernel.Bind<IPaymentMethodFactory>().ToProvider<PaymentMethodFactoryProvider>().InSingletonScope();
            kernel.Bind<IDefaultBll>().To<DefaultBll>().InSingletonScope();

            kernel
                .Bind<IDalSession>()
                .ToProvider<HttpDalSessionProvider>()
                .InRequestScope(); 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T12:26:40.167

抱歉，我看不出你的代码有什么问题。这应该有效。作为概念证明，您可以尝试以下方法：

1.  使用 Internet 模板创建一个新的 ASP.NET MVC 3 应用程序
2.  定义视图模型：

    ```
     public class PaymentModel
        {
            [Required]
            [DisplayName("Full name")]
            public string FullName { get; set; }
        } 
    ```

3.  自定义模型绑定器：

    ```
    public class PaymentModelsBinding : IModelBinder
    {
        public object BindModel(ControllerContext controllerContext, ModelBindingContext bindingContext)
        {
            return new PaymentModel();
        }
    } 
    ```

4.  家庭控制器：

    ```
    public class HomeController : Controller
    {
        public ActionResult Index()
        {
            return View(new PaymentModel());
        }

        [HttpPost]
        public ActionResult Index(PaymentModel model)
        {
            return Json(new { success = true });
        }
    } 
    ```

5.  对应的视图 ( `~/Views/Home/Index.cshtml`)：

    ```
    @model PaymentModel

    @using (Html.BeginForm(null, null, FormMethod.Post, new { id = "form" }))
    {
        @Html.EditorFor(x => x.FullName)
        <button type="submit">OK</button>
    }

    <script type="text/javascript">
        $('#form').submit(function () {
            $.ajax({
                type: this.method,
                url: this.action,
                data: $(this).serialize(),
                success: function (json) {

                }
            });
            return false;
        });
    </script> 
    ```

6.  最后将模型绑定器注册到`Application_Start`：

    ```
    ModelBinders.Binders.Add(typeof(PaymentModel), new PaymentModelsBinding()); 
    ```

7.  在调试模式下运行应用程序，提交表单，然后自定义模型绑定器被命中。

所以现在的问题变成了：你做了什么不同的事情？

# c# - 无效的排名标识符

> ID：14302550
> 
> 赞同：2
> 
> 时间：2013-01-13T10:25:16.760
> 
> 标签：c#, syntax, multidimensional-array

我目前正在将我的 java 游戏引擎翻译成 c#。这是我的数组映射数据

```
char[][] mapdata = new char[MAP_WIDTH][MAP_HEIGHT];
                                       `````````` 
```

它显示了这个错误。

> > 无效的排名说明符：预期为 ',' 或 ']' (CS0178) - C:\Users\sriharshachilakapati...ne\Map.cs:74,39

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-13T10:27:01.200

多维数组是这样写的：

```
char[,] mapdata = new char[width, height]; 
```

`char[][]`是数组中的一个数组，这样使用：

```
char[][] mapdata = new char[width][];
for (int i = 0; i < mapdata.Length; i++)
{
    mapdata[i] = new char[height];
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-13T10:28:59.677

您正在尝试定义一个*[`multidimensional array`](http://msdn.microsoft.com/en-us/library/2yd9wwz4.aspx)*. 这是 C# 中的方法；

```
char[,] mapdata = new char[MAP_WIDTH, MAP_HEIGHT]; 
```

从[*`Compiler Error CS0178`*](http://msdn.microsoft.com/en-us/library/b6ax0bze%28v=vs.71%29.aspx)

> 数组初始化格式不正确。指定数组维度时，您可以指定以下内容：
> 
> *   括号中的数字
> *   空括号
> *   括号中的逗号

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-13T10:29:04.887

您不能在编译时初始化锯齿状数组的子行。

你必须这样做：

```
char[][] mapdata = new char[MAP_WIDTH][];

for (int = 0; i < mapdata.Length; ++i)
    mapdata[i]= new char[MAP_HEIGHT]; 
```

或者您可以改为使用多维数组：

```
char[,] mapdata = new char[MAP_WIDTH, MAP_HEIGHT]; 
```

# android - Dropbox 同步：如何管理 AndroidManifest 条目

> ID：14302552
> 
> 赞同：0
> 
> 时间：2013-01-13T10:25:31.750
> 
> 标签：android, android-manifest, dropbox

我正在使用 Eclipse 开发一个 Android 应用程序。我想在 Dropbox 上同步应用程序数据库，所以我使用的是 Dropbox sdk。我在 Dropbox 上创建了我的应用程序以获得应用程序密钥对，并在我的 AndroidManifest.xml 中编写了这个密钥：

```
<data android:scheme="db-xxxxxxxxxxx" /> 
```

我使用密钥对开发了上传功能，并且效果很好。

所以......我开发了一个活动，应用程序用户可以指定自己的密钥对。这对存储在 SharedPreferences 结构中。

我的问题是：此功能在 SharedPreferences 结构中编辑数据，但不在 AndroidManifest.xml 文件中，因此同步不起作用。如何管理这方面？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T08:41:35.367

我认为您不必修改清单中的密钥，因为它在用户的 Dropbox 中唯一标识您的应用程序。你想用这个操作做什么？

同步数据库的操作很复杂。我也在尝试用 DropBox 实现这个功能。如果您像我一样感兴趣，请关注这些帖子：[https :](https://forums.dropbox.com/topic.php?id=97600#post-532177) [//forums.dropbox.com/topic.php?id=97600#post-532177 Android 数据库与 Dropbox SyncAPI 同步](https://stackoverflow.com/questions/15203832/android-database-synchronize-with-dropbox-syncapi)

# css - HTML 布局中不需要的额外右侧空间

> ID：14302554
> 
> 赞同：1
> 
> 时间：2013-01-13T10:25:44.437
> 
> 标签：css, layout, html

我正在使用表格设计 HTML 布局。在左栏中，我想要一个顶部和底部都有 10 像素的图像。不幸的是，父级添加了几个像素`div`。我不知道为什么。我包括一张图片：

![在此处输入图像描述](../Images/d29acbb112ed34b41d06cfb8ad7fbbef.png)

我还创建了一个[JSFiddle](http://jsfiddle.net/rWUD9/)来复制这个问题。我无法在我的 CSS 中发现问题。有谁知道发生了什么？我错过了什么？解决办法是什么？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-13T10:30:18.643

That is due to your image actual `width` which is 161px approx. and your div width is 163px approx. You need to add `width:100%;` in your img style.

[***Working Fiddle***](http://jsfiddle.net/rWUD9/1/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-13T10:30:44.807

You just need to set the width of the image. `div.leftColAd` is 163px x 248px and your image is 160px x 239px

# highcharts - Highcharts - 使用范围选择器更改 x 轴标签

> ID：14302555
> 
> 赞同：1
> 
> 时间：2013-01-13T10:26:02.770
> 
> 标签：highcharts

我正在尝试使用 highstock 图表。我想根据从范围选择器中选择的范围更新 xAxis 标签。例如。如果它是 1 年的图表，我希望刻度在每个月的月底，标签为 Jan-12、Feb-12 等（默认情况下，它显示每个月为该月的月初）。如果它是月度图表，我希望标签定位在每个星期五，即。间隔 7 天。

有没有办法可以根据极端情况动态更改轴上显示的标签？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T09:27:11.523

您可以使用 tickPositioner ( [http://api.highcharts.com/highcharts#xAxis.tickPositioner](http://api.highcharts.com/highcharts#xAxis.tickPositioner) ) 或格式化程序来更改标签名称[http://api.highcharts.com/highcharts#xAxis.labels.formatter](http://api.highcharts.com/highcharts#xAxis.labels.formatter)

# android - 无法 adb 到 micromax funbook P300 平板电脑

> ID：14302557
> 
> 赞同：3
> 
> 时间：2013-01-13T10:26:17.213
> 
> 标签：android, drivers

谁能帮助我如何将 micromax funbook P300 连接到我的 windows 7 PC。

尝试使用驱动程序管理器更新平板电脑驱动程序，但它也无法在线找到平板电脑的驱动程序。

请让我知道将我的 micromax funbook 连接到 windows pc 所需的任何驱动程序。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-06T09:21:40.453

仅从[此处下载 adb 驱动程序...](http://forum.xda-developers.com/showthread.php?t=1662010)

下载后按照以下说明进行操作：

**右键**单击我的**计算机**>**管理**>**设备管理器**>**右键**单击**​​ Android** >**更新驱动程序软件**
转到**浏览我的计算机**并**输入上述文件夹的提取位置**..

如果要求安装未经认证的驱动程序，请单击继续

# android - 如果较早的意图未完成，Android 意图选择器不会显示列表

> ID：14302559
> 
> 赞同：0
> 
> 时间：2013-01-13T10:26:30.297
> 
> 标签：android, android-intent

使用下面的代码，我通过意图选择器从我的应用程序中共享一些文本。我的问题是，例如，如果我选择将文本作为消息共享，并且在消息应用程序中时，我只需点击主页按钮并将我的应用程序带回前面。然后，当我尝试启动一个新的意图选择器时，它会立即将我发送回未完成的消息应用程序。我宁愿它忘记这一切，并再次向我展示选择列表。

有没有办法让它忘记旧的选择？

```
Intent intent = new Intent(Intent.ACTION_SEND);
intent.setType("text/plain");
intent.putExtra(Intent.EXTRA_TEXT, text);
startActivity(Intent.createChooser(intent, "Share text as...")); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T13:50:34.847

添加以下内容

意图.setFlags（意图.FLAG_ACTIVITY_NEW_TASK|意图.FLAG_ACTIVITY_EXCLUDE_FROM_RECENTS）；

# vba - 使用 VBA 在辅助 X 轴上放置图表系列

> ID：14302560
> 
> 赞同：5
> 
> 时间：2013-01-13T10:26:52.347
> 
> 标签：vba, excel

我有一个折线图，我试图通过 VBA 在给定 Y 值处添加一条水平线。我正在关注[本指南](http://peltiertech.com/Excel/Charts/AddLineHorzSeries.html)，该指南建议在现有图表中添加一条线，然后将其类型更改为散点图，这会导致 Excel 自动将该系列放在辅助 X 轴上。然后可以进一步格式化。

我的问题是，当使用 VBA 执行此操作时，我不明白如何将一条线切换到辅助 X 轴上。默认情况下，所有新行都将在主 X 轴上。

例如，假设`chrt`是一个 Chart 对象：

```
' Enable secondary X axis (I think)
chrt.HasAxis(XlAxisType.xlCategory, XlAxisGroup.xlSecondary) = True

Dim se As Series
Set se = chrt.SeriesCollection.NewSeries
se.ChartType = xlXYScatterLinesNoMarkers

' Add a line at Y = 0
se.xValues = Array(0, 1)
se.values = Array(0, 0) 
```

现在，如何`se`进入辅助 X 轴？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-13T13:21:43.977

我按照[Excel 2003 的这个链接](http://www.andypope.info/tips/tip008.htm)记录了一个宏。请注意，对于 Excel 2007 图表有这样一个不幸的情况下录制宏。但是您再次在 Excel 2010 中走运。因此，如果您要基于宏执行此操作，请注意您的版本，然后复制代码...

根据您的更改工作表和图表名称。

```
With Sheets(3).ChartObjects("Chart 1")
     .SeriesCollection(2).AxisGroup = xlSecondary
     .HasAxis(xlCategory, xlPrimary) = True
     .HasAxis(xlCategory, xlSecondary) = True
     .HasAxis(xlValue, xlPrimary) = True
     .HasAxis(xlValue, xlSecondary) = True
     .Axes(xlCategory, xlPrimary).CategoryType = xlAutomatic
     .Axes(xlCategory, xlSecondary).CategoryType = xlAutomatic
  End With 
```

# vim - vimscript：使键映射仅在指定的缓冲区中有效

> ID：14302561
> 
> 赞同：0
> 
> 时间：2013-01-13T10:26:52.393
> 
> 标签：vim, keymapping

我正在写一个插件。我打开了一个缓冲区，并在其中放置了一些菜单项。我想在按下回车键时触发一些特殊功能。我使用了 nmap :func() ，但输入键也触发了其他缓冲区中的函数。谁能告诉我如何进行仅在指定缓冲区中有效的键映射？或者欢迎任何关于如何制作菜单的想法，我之前没有任何编写插件的经验。

提前致谢。问候，院长

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T08:50:09.360

您可以通过添加到映射来限制当前缓冲区的`<buffer>`键映射，如下所示：

`nmap <buffer> <CR> :call func()<CR>`

详情请参阅`:help map-arguments`。您可以通过以下命令
将菜单项添加到主菜单：`amenu`

`amenu &MyMenu.MyMenu&Item :call MyFunc()<CR>`

此命令将新菜单`MyMenu`和新菜单项`MyMenuItem`添加到 MyMenu。
您可以通过命令删除菜单项（或整个菜单）`aunmenu`。
有关详细信息，请参见`:help amenu`和`:help aunmenu`。

# c# - 为什么没有 string.Split(string) 重载？

> ID：14302564
> 
> 赞同：8
> 
> 时间：2013-01-13T10:27:31.183
> 
> 标签：c#, .net, string, split, code-design

是否有任何正当理由为什么没有[`String.Split`](http://msdn.microsoft.com/en-us/library/system.string.split%28v=vs.110%29.aspx)接受分隔符字符串和要拆分的文本的重载？

```
string[] Split(string delimiter) 
```

然后可以像这样使用

```
string input = "This - is - an - example";
string[] splitted = input.Split(" - ");
// results in:
//  { "This", "is", "an", "example" } 
```

我真的知道，我可以很容易地创建一个扩展方法，但必须有正当的理由为什么没有添加它。

请注意，我不是在寻找如何使用字符串分隔符拆分字符串的解决方案，而是在寻找解释，为什么这样的重载会导致问题。这是因为我不认为它真的会引起问题，而且我发现初学者很难理解为什么我们必须传递一个实际`string[]`而不是简单`string`的分隔符。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-13T11:20:52.720

将问题调整为“为什么在使用 String[] 参数调用 String.Split() 时必须使用 StringSplitOptions 参数？” 可能会为您的问题提供答案。

请注意，实际上没有接受单个字符的 String.Split() 重载。重载需要一个 Char[]，但由于它是一个 params 数组，您可以使用单个字符调用它，并且它被隐式转换为 Char[]。例如

```
"1,2,3,4,5".Split(','); 
```

调用相同的 Split() 重载

```
"1,2,3,4,5".Split(new[] { ',' }); 
```

如果 Split() 的重载接受了 String[] 的单个参数，那么您将能够通过传递单个字符串参数来调用 Split。

但是，重载不存在，并且在将 String[] 传递给 Split 时必须使用 StringSplitOptions。至于为什么 StringSplitOptions 是强制性的，我只能推理，但可能是当用字符串拆分时，算法处理复杂拆分的可能性显着增加。为了为这些情况提供预期的结果，最好定义方法的行为，当找到多个彼此相邻的分隔符时。即 StringSplitOptions 是强制性的。

您可能会争辩说您可能会`Split(String, StringSplitOptions)`过载，但是正如 Ilya Ivanov 在上面的答案中提到的那样，您需要在某个地方停下来，并且有一种非常好的方法可以传入单个字符串。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-01-13T10:40:14.170

```
string input = "This - is - an - example";
string[] splitted = Regex.Split(input," - ");
foreach (string word in splitted)
{
    MessageBox.Show(word);
} 
```

这不仅仅是空格的问题，它与你的`string`分隔符完全匹配，看

```
string input = "This,- is,- a,- complicated,- example";
string[] splitted = Regex.Split(input,",- ");
foreach (string word in splitted)
{
    MessageBox.Show(word);
} 
```

# node.js - 使用npm安装包后需要重启nodejs吗？

> ID：14302568
> 
> 赞同：0
> 
> 时间：2013-01-13T10:28:02.267
> 
> 标签：node.js

使用 npm 安装软件包后。然后我想使用这个包，我需要重启nodejs吗？如果是，为什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-13T11:23:52.680

是的。模块在第一次需要时被缓存，如果您使用在运行时更新的模块，`npm install`运行过程将继续使用缓存的版本。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-13T11:57:13.743

您可以使用 Node-dev 模块，它会在您进行任何更改时自动重新启动您的服务器

[https://github.com/fgnass/node-dev](https://github.com/fgnass/node-dev)

# c - 除法与移位的区别

> ID：14302573
> 
> 赞同：1
> 
> 时间：2013-01-13T10:28:21.690
> 
> 标签：c, floating-point, division, bit-shift

我正在阅读[这个](https://stackoverflow.com/questions/10681375/which-is-better-option-to-use-for-dividing-an-integer-number-by-2)问题。阅读第一个答案后，我无法理解`-5 >> 1 = -3`. 我还围绕它进行了更多调整。

您还可以在[此处](http://codepad.org/ESpuHZBR)查看代码和输出。这是我所做的：

```
#include<stdio.h>

int main(){

printf("5/2 = %d\n",5/2);
printf("5 >> 1 = %d\n",5 >> 1);
printf("5/2 = %lf\n",5/2);
printf("5 >> 1 = %f\n",5 >> 1);
printf("-5/2 = %d\n",-5/2);
printf("-5 >> 1 = %d\n",-5 >> 1);
printf("-5/2 = %f\n",-5/2);
printf("-5 >> 1 = %f\n",-5 >> 1);

return 0;
} 
```

输出 ：

```
5/2 = 2
5 >> 1 = 2
5/2 = 2.168831
5 >> 1 = 2.168831
-5/2 = -2
-5 >> 1 = -3
-5/2 = 2.168833
-5 >> 1 = 2.168833 
```

我无法理解`5/2 == 2.168831, 5 >> 2 == 2.168831, 5 >> 1 == -3`。

**为什么会这样？** *（答案可能非常基本，我错过了一些基本的东西，所以请指导我）。*

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-13T10:32:18.330

的结果`-5 / 2`是 a `int`，而不是 a`float`或 a `double`。但是，您的格式说明符是`%f`，因此您`int`被*解释*为 a `float`，这是没有意义的，因此值不稳定。您正在做的事情称为**未定义行为**：任何事情都可能发生。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-13T12:17:01.433

你看到你所做的结果的原因是：

当您传递一个`int`参数但使用 printf 说明符 for `double`（请记住，在这种情况下 a`float`被转换为 a `double`），然后大多数 C 实现`int`根据它们将`int`参数传递给可变参数函数（一个接受不同参数类型），但`printf`例程将机器状态解释为好像传递了一个`double`参数，如下所述。（这不一定总是发生；一旦您离开了 C 标准定义的行为，C 实现可能会做其他事情。特别是，可能会与优化器进行复杂的交互，从而导致令人惊讶的结果。然而，这就是发生的事情最常见的。你不能依赖它。）

每个计算平台都有一些关于如何传递参数的规则。一个平台可能会指定将所有参数从右到左推入堆栈，并且每个参数仅使用所需的字节数放入堆栈。另一个平台可能会指定从左到右将参数推入堆栈，或者将参数填充到下一个四个字节的倍数，以保持堆栈良好对齐。许多现代平台规定，一定大小以下的整数参数在通用寄存器中传递，浮点参数在浮点寄存器中传递，其他参数在堆栈中传递。

当`printf`看到`%f`并寻找一个`double`参数，但你已经通过了一个`int`，`printf`找到什么？如果此平台将两个参数都推入堆栈，然后`printf`找到您的位`int`，但它会将这些位解释为好像它们是`double`. 这导致`printf`打印一个由 your 确定的值`int`，但它与 your 没有明显关系，因为这些位在 for和 for`int`的编码中具有完全不同的含义。`int``double`

如果这个平台把一个`int`论点放在一个地方，而把一个`double`论点放在另一个地方，那么会发现一些与你的论点`printf`完全无关的部分。`int`它们是恰好遗留在例如`double`参数应该所在的浮点寄存器中的位。这些位只是以前工作的残余。相对于`int`您通过的值，您获得的值基本上是随机的。您还可以通过获取您传递的 4 个字节以及附近其他任何内容的 4 个`printf`字节来查找 a 的 8 个字节。`double``int`

当您多次运行该程序时，您通常会看到打印相同的值。发生这种情况有两个原因。首先，计算机是机械的。它们在很大程度上以确定性的方式运行，因此它们一遍又一遍地做同样的事情，即使这些事情并不是特别设计为按照您使用它们的方式使用。其次，操作系统在启动时传递给程序的环境在每次启动程序时基本相同。它的大部分内存要么被清除，要么从程序文件中初始化。一些内存或其他程序状态是从计算机中的其他环境初始化的。该数据可能因程序的运行而异。例如，当前时间明显地从运行到运行变化。您的命令历史记录也是如此，加上命令外壳放置在其环境变量中的值。有时多次运行一个程序会产生不同的结果。

When you use code whose behavior is not defined by some specification (which may be the C specification, a compiler specification, a machine and operating system specification, or other documents), then you cannot rely on the behavior of that code. (It is possible to rely on the behavior of code compiled by a particular C compiler that is specified by that C compiler even though it is not fully specified by the C standard.)

# javascript - VAST 2.0 插播广告和重叠式广告实施

> ID：14302575
> 
> 赞同：0
> 
> 时间：2013-01-13T10:28:35.883
> 
> 标签：javascript, html, ads, vast, ott

我们正在我们的视频播放器中实施 VAST 2.0 png/jpeg 横幅覆盖和插播视频广告。

**我的问题是：**何时（在电影或连续剧集观看期间）应该播放插播视频或应该显示覆盖横幅的时间信息来自哪里。我期待`VAST XML`已经包含该信息，但似乎它应该是玩家决定或来自其他来源 - 例如它是在从 OTT 服务器下载的电影元数据中指定的。

**第二个问题：**典型的插播视频行为是什么？广告是否在特定时间点播放，这意味着当用户跳入视频时（使用遥控器上的 FF/RW）我必须播放插播广告（这可能很烦人）或者我只是计算用户观看的时间视频，当它超过定义值时，将播放插播视频。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-09T09:36:05.643

该链接可能会有所帮助： [http://openx.openvideoads.org/openx/www/delivery/fc.php?script=bannerTypeHtml:vastInlineBannerTypeHtml:vastInlineHtml&zones=pre-roll:0.0-0%3D50&nz=1&source=&r=R0。 05822725687175989&block=1&format=vast&charset=UTF-8](http://openx.openvideoads.org/openx/www/delivery/fc.php?script=bannerTypeHtml:vastInlineBannerTypeHtml:vastInlineHtml&zones=pre-roll:0.0-0%3D50&nz=1&source=&r=R0.05822725687175989&block=1&format=vast&charset=UTF-8)

这是一个简单的 VAST xml 文件。此广告的 id 为“pre-roll:0.0-0”。测试显示可以从以下链接下载： [http ://www.longtailvideo.com/support/open-video-ads/ova-for-jw-player-5/22848/a-simple-example](http://www.longtailvideo.com/support/open-video-ads/ova-for-jw-player-5/22848/a-simple-example)

如您所见，播放器将此广告解析为前贴片广告。

因此，`VAST xml publisher`可以在广告 ID 标记中定义什么是：广告类型、前贴片广告、插播广告或后贴片广告。

也许，该类型可以在 VAST xml 的其他标签中定义。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-08-09T09:39:23.533

顺便说一句，另一个例子： [http :](http://static.openvideoads.org/tests/vast-wrapper-test.xml) [//static.openvideoads.org/qa/latest/ova.flowplayer/examples/xml-wrapper/example1-01.html http://static.openvideoads.org/tests/vast-wrapper-](http://static.openvideoads.org/qa/latest/ova.flowplayer/examples/xml-wrapper/example1-01.html) [测试.xml](http://static.openvideoads.org/tests/vast-wrapper-test.xml)

我认为您可以从这些链接和我上面的答案中的链接获取信息

# sql - java.sql.SQLException: ORA-03115: 不支持的网络数据类型或表示

> ID：14302577
> 
> 赞同：25
> 
> 时间：2013-01-13T10:28:39.960
> 
> 标签：sql, oracle, servlets

我正在使用 Oracle 11g 数据库。当我尝试从 db 访问数据时，它显示错误 java.sql.SQLException: ORA-03115: unsupported network datatype or representation。我不明白这个错误是什么意思..

我的代码是：

```
 String uname,pass;
    ResultSet rs = null;
    response.setContentType("text/html");
    PrintWriter out=response.getWriter();
  try
  {
    uname=request.getParameter("uname");
    pass=request.getParameter("pass");
    Connection con=prepareConnection();
    String Query="select uname from passmanager where pass=?";
    PreparedStatement ps=con.prepareStatement(Query);
    ps.setString(1,pass);
    rs=ps.executeQuery(Query);
    if (rs.next() && uname.equalsIgnoreCase(rs.getString("uname")) || uname.equalsIgnoreCase(rs.getString("email"))) {
    HttpSession session = request.getSession(true);
    session.setAttribute("uname", rs.getString(1));

    ServletContext context = getServletContext();
    RequestDispatcher dispatcher = context
                    .getRequestDispatcher("/profile");
    dispatcher.forward(request, response);
  } 
```

任何人都帮我解决这个问题..

* * *

## 回答 #1

> 赞同：86
> 
> 时间：2013-01-13T11:16:05.390

代替：

```
rs = ps.executeQuery(Query); 
```

你应该执行：

```
rs = ps.executeQuery(); 
```

否则，您将*取消准备*语句并丢失所有参数，因为您为其分配了一个新的 SQL 语句（即使它是相同的）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-13T10:39:39.370

添加电子邮件栏

```
select uname, email from passmanager where pass=? 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-20T11:43:55.543

当您尝试按名称（在您的情况下为 rs.getString("uname") ）获取不在结果集中的字段时，会出现此错误。

就像 igr 所说，您正在尝试获取电子邮件字段（使用 rs.getString("email") ）并且它不在查询中，所以这是您的错误。

我找到了这个对话，因为当我试图在字符串末尾获取一个带有空格的字段时，我在应用程序中遇到了同样的错误（ rs.getString("uname ") 而不是 rs.getString("uname" ） .

我只是使用从查询中获得的字段的正确名称来修复它。

我希望它有用！;)

# c - select() 超时后不返回

> ID：14302579
> 
> 赞同：0
> 
> 时间：2013-01-13T10:28:50.347
> 
> 标签：c, linux, select, fifo

我创建了一个名为“readmsg”的可执行文件。它的源代码如下。如果`select()`我只`readmsg`在 shell 中执行（我可以看到输出`timeout`）。

但是，如果我通过 command: 创建一个 FIFO 文件`mknod /tmp/message p`，并`readmsg < /tmp/message`在 shell 中执行。结果，`select()`如果我不在`/tmp/message`. 我的问题是：为什么我不能得到`timeout`输出？

“readmsg”的源代码：

```
 #define STDIN 0
    fd_set fds;
    struct timeval tv;
    while (1) {
        FD_ZERO(&fds);
        FD_SET(STDIN, &fds);
        tv.tv_sec = 1;
        tv.tv_usec = 0;
        ret = select(STDIN + 1, &fds, NULL, NULL, &tv);
        if (ret > 0) {
            printf("works\n");
            if (FD_ISSET(STDIN, &fds)) {
                // read ...
            }
        } else if (ret == 0) {
            printf("timeout!!\n");
        } else {
            printf("interrupt\n");
        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T12:36:49.503

谢谢@Mat。添加`printf()`close to后`main()`，也没有输出。即使没有`readmsg`when perform的进程ID `ps`。所以证明在`readmsg < /tmp/message`FIFO准备好写入之前，进程就被阻塞了。

没有任何错误。事实上，`readmsg`从重定向的 FIFO 文件中读取消息时效果很好。

# emacs - Emacs 将文本拉到外部控制台

> ID：14302584
> 
> 赞同：-4
> 
> 时间：2013-01-13T10:29:18.263
> 
> 标签：emacs

当我尝试从 Emacs 缓冲区复制文本`Esc-w`并尝试将其粘贴到外部控制台时，它失败了。为什么？有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T13:44:29.480

尝试`(setq x-select-enable-clipboard t)`

# asp.net - Asp.net 属性值在按钮单击时设置为零

> ID：14302585
> 
> 赞同：0
> 
> 时间：2013-01-13T10:29:21.360
> 
> 标签：asp.net

在我的 ASP.net 页面上，我将一个会话变量分配给一个私有属性`Page_Load`

```
private int userid{ get; set;} 

if (!IsPostBack)
{
   if (Session["userid"] != null)
   {
       userid= int.Parse(Session["userid"].ToString());
   }
} 
```

在我正在使用的添加按钮单击事件中`userid`

```
protected void btnAdd_Click(object sender, EventArgs e)
{
  doSomething(userid);
} 
```

最初，该值被检索并存储在`userid`属性中，但在 中`btnAdd_Click`，`userid`变为 0。我将代码移出`if(!IsPostBack)`块，这解决了问题，但让我想知道一旦我的`userid`属性已经在页面加载时设置为什么设置。`zero`不清楚按钮单击是否返回页面的新实例或什么？有什么指导吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T10:50:11.777

您可以从页面加载中删除这些内容，因为数据在会话中，只需将属性更改为以下内容：

```
private int userid{ get{ return int.Parse(Session["userid"].ToString()); } } 
```

# c++ - 输入/输出运算符的优先级

> ID：14302588
> 
> 赞同：1
> 
> 时间：2013-01-13T10:29:43.350
> 
> 标签：c++

运算符优先级表仅显示**按位移位运算符** `<<`和`>>`. 这些与输出运算符相同，对吧？

事实上，恰好 C++ 重载了这些相同的运算符来表示输入/输出，对吧？这更像是一种传统，而不是更严格的东西，不是吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-13T11:04:01.370

我确信使用`<<`和`>>`作为输出运算符的起源与两件事有关。

1.  看起来很明智。
2.  运算符`<<`and`>>`不是“常规代码”中常用的。所以它们是可用的。如果他们使用运算符 +、-、* 或 /，那将是一个真正的痛苦，因为您无法编写`cout + "The result is : x + y + endl;`并获得 x + y 作为输出。它比您写的要少得多`cout << "The result is : " << x << y << endl;`-在这种情况下，您必须使用括号：`cout << "The result is : " << (x << y) << endl;`

运算符优先级的顺序由语言定义，无论您如何使用运算符 - 这是您通常不想使用运算符重载来做“奇怪”事情的原因之一 - 因为很容易得到您不想要的东西'真的不期待...

# winusb - WDK, winusb, installing usb drivers for all ports

> ID：14302589
> 
> 赞同：0
> 
> 时间：2013-01-13T10:29:51.047
> 
> 标签：winusb

Every time I insert my USB device in a new port, the OS keep asking me to provide a driver and this is quite annoying since this is the same device. I read some similar posts over internet but I don't understands quite sure how my device should present itself to Windows XP and get the driver automatically after it has installed once.

Perhaps this is about serial number in descriptor (which in my case is missing since I've read this needs to be absolutely unique and this falls in another problem)?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T10:54:50.610

这是 Windows XP 的众所周知的问题，它似乎没有很好的解决方案（如果您使用未签名的驱动程序，这尤其令人讨厌）。

但是，Windows XP 应该只询问每个 USB 端口一次 - 第二次插入同一个 USB 端口不会触发驱动程序重新安装序列。

此问题已在 Windows 7 中修复（前提是您已为您的硬件签署了驱动程序）。

# http - Serve Binary Content Using Clojure Ring

> ID：14302598
> 
> 赞同：12
> 
> 时间：2013-01-13T10:30:56.960
> 
> 标签：http, clojure, webserver

I wish to serve a PDF (or any other binary file) in a Clojure Ring response. This works

```
(defn serve-file [request]
  {:status 200
   :headers {"Content-Type" "application/pdf"}
   :body (FileInputStream. "file.pdf")}) 
```

But I'm not explicitly closing the FileInputStream. Will this cause a memory leak, or is it closed by the underlying web server (Jetty). If not, how do I close it myself?

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-13T15:58:38.407

是的，ring 确实关闭了在正文键中传递的 InputStream 对象。

签出：[https ://github.com/mmcgrana/ring/blob/master/ring-servlet/src/ring/util/servlet.clj#L111](https://github.com/mmcgrana/ring/blob/master/ring-servlet/src/ring/util/servlet.clj#L111)

# entity-framework - Entityframework 4.3 codefirst using TPT and discriminator

> ID：14302602
> 
> 赞同：0
> 
> 时间：2013-01-13T10:31:27.583
> 
> 标签：entity-framework, ef-code-first, table-per-type, discriminator

I have these three models:

```
public class Equipment
{
    public int ID { get; set; }
    public string title { get; set; }

}

[Table("Vessels")]
public class Vessel:Equipment
{
    public string Size { get; set; }

}

[Table("Tubes")]
public class Tube : Equipment
{
    public string Pressure{ get; set; }

} 
```

I want to show a list of Equipments with 2 columns title and type.

for example:

```
Title        Type
------       -------
101-1        vessel
101-2        vessel
102-3        tube 
```

I don't know how to make a discriminator column in Equipments to show the type of each equipments.

**EDITED**

If I have a discriminator in Equipment entity like:

```
public class Equipment
{
    public int ID { get; set; }
    public string title { get; set; }
    public string type{ get; set; }  //as discriminator
} 
```

I can get the query in controller or repository like this:

```
var equipments=from e in db.Equipments
               select e; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T12:18:11.987

您不能根据 EF 映射创建鉴别器列 - TPT 继承不支持它，因为鉴别器是一个子表。您可以尝试使用类似的东西：

```
public abstract class Equipment
{
    public int ID { get; set; }
    public string title { get; set; }

    [NotMapped]
    public abstract string Type { get; }
} 
```

并覆盖`Type`子类型中的属性以获得正确的名称。您将无法在 Linq-to-Entities 查询中使用该属性，因为它没有被映射。

# android - Include Android Google Play Services failed?

> ID：14302605
> 
> 赞同：0
> 
> 时间：2013-01-13T10:32:03.503
> 
> 标签：android, google-maps-android-api-2, google-play-services

I'm trying to include [Google Play Services](http://developer.android.com/google/play-services/index.html) in my project to use [Google Maps Android API v2](https://developers.google.com/maps/documentation/android/), based on steps provided by Google in this link [Google Play Service Setup](http://developer.android.com/google/play-services/setup.html)

But unfortunately, the include process always ends with a red cross next to the included project as in the next image: ![enter image description here](../Images/d91dfeb09239ea23f4e1509187096a11.png)

**How to solve this ?**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T20:21:32.233

我知道这有点晚了，但我最近遇到了这个问题，解决我的问题只是确保库和项目在同一个分区上。一旦我把它们放在同一个分区上，它就开始正常工作了。

# php - the_content() for a Wordpress Theme Doesn't Produce Tags

> ID：14302610
> 
> 赞同：0
> 
> 时间：2013-01-13T10:32:27.787
> 
> 标签：php, wordpress, themes

For some reason, the theme I've made won't turn the double newlines (pressing enter in the Visual editor) into paragraph tags. I tried disabling all plugins and it still doesn't work. It does work if I change to a default theme though. Any ideas?

```
<?php while ( have_posts() ) : the_post(); ?>

      <div class="container">
        <h2>
            <?php the_title(); ?>
        </h2>
      </div> <!-- /container -->
    <div class="container contentArea">

        <?php the_content(); ?>

    </div>

<?php endwhile; // end of the loop. ?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T11:02:14.627

我认为这是由我认为默认启用的`wpautop`功能（请参阅[此处）完成的（请参阅](http://core.trac.wordpress.org/browser/tags/3.5/wp-includes/formatting.php#L174)[此处](http://core.trac.wordpress.org/browser/tags/3.5/wp-includes/default-filters.php#L130)）。

也许您可以手动将其添加到您的主题中？或者更好的是，找出它没有被启用的原因。

# c# - Kinect + Depth + 3D Projection Mapping

> ID：14302617
> 
> 赞同：0
> 
> 时间：2013-01-13T10:32:55.837
> 
> 标签：c#, kinect

I'm looking for a **C# sample** project, tutorial, assembly to perform a simple image projection on a given 3D surface using kinect.

*   Kinect provides a depth image that could be transform to 3D cloud of point
*   I 'd like to Map an image to this point of cloud

I assume Image should be stretch by a transformations matrix to fit correctly ?

For example: projecting a checkerboard on a table

# arrays - AS3：我的文本文件不想像其他所有文件一样加载到数组中

> ID：14302618
> 
> 赞同：2
> 
> 时间：2013-01-13T10:33:03.093
> 
> 标签：arrays, actionscript-3, datagrid, air, text-files

我有 6 个包含单词的 txt 文件，每个文件都在一个新行上，这些文件被读取并处理到各自的数组中。下面的代码适用于前 5 个数组，但不适用于最后一个，略有不同。

```
var loadFavourites: URLLoader = new URLLoader();;
    var arFavourites = new Array();
    loadFavourites.load(new URLRequest("Lists/Favourites.txt"));
    loadFavourites.addEventListener(Event.COMPLETE, onLoadedFavourites);
    function onLoadedFavourites(e6:Event):void {
        arFavourites = e6.target.data.split("\r\n");} 
```

我以完全相同的方式加载它，但没有运气。如果我跟踪 arFavourites.length 它给了我 0。我只需要它将每 5 个值加载到数据网格中。

```
var iC:int=0;
var iX:int=0; 

while (!iX==arFavourites.length-1)
{
    trace(iX);
    if (iC == 5) {
        dg.addItem({Place: arFavourites[iX-4],Subject:arFavourites[iX-3],Object:arFavourites[iX-2],Feeling:arFavourites[iX-1],Action:arFavourites[iX]});
        iC=0;
    } else {
        iC++;
        trace(iC);
    } 
    iX++;
} 
```

非常感谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T14:10:19.570

尝试做这样的事情：

**收藏夹.txt：**

```
1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20 
```

**代码：**

```
var loadFavourites: URLLoader = new URLLoader();;
var favouritesArray = new Array();

loadFavourites.addEventListener(Event.COMPLETE, onLoadedFavourites);
loadFavourites.load(new URLRequest("Favourites.txt"));

function onLoadedFavourites(event:Event):void
{
    favouritesArray = event.target.data.split("\r\n");

    for (var i:int = 0; i <= favouritesArray.length; i++)
    {
        if (i != 0 && i % 5 == 0)
        {
            trace(i - 4, i - 3, i - 2, i - 1, i);
        }
    }
} 
```

**输出：**

```
1 2 3 4 5
6 7 8 9 10
11 12 13 14 15
16 17 18 19 20 
```

# ios - UIBarButtonItem on UINavigationBar not responding on iPhone 5

> ID：14302619
> 
> 赞同：0
> 
> 时间：2013-01-13T10:33:09.707
> 
> 标签：ios, objective-c, xcode, appstore-approval, iphone-5

I have a problem - my app got rejected 3 times for the same reason, "Selecting the Action button does not produce an action". Apple said the "share button" isn't working as well. On my devices (ipod 4 + ipod 5) and the iphone simulation, the share button works, and opens an action sheet view with 3 options to choose from, and they all work fine.

The share button is a UIBarButtonItem and stand on the UINavigationBar. the back button and the star button work great, but still the share button is not responding and doesn't produce any action.

![enter image description here](../Images/13dd4ced6e1123786af0b89f5eab9b92.png) This is my app screenshot.

This is my button code:

```
UIButton *rightButton = [UIButton buttonWithType:UIButtonTypeCustom];
    rightButton.frame = CGRectMake(0, 0, 33, 22);
    [rightButton setBackgroundImage:[UIImage imageNamed:@"btn_share.png"] forState:UIControlStateNormal];
    [rightButton setBackgroundImage:[UIImage imageNamed:@"btn_shareSelect.png"] forState:UIControlStateHighlighted];
    [rightButton addTarget:self action:@selector(share) forControlEvents:UIControlEventTouchUpInside];
    UIBarButtonItem *rightItem = [[UIBarButtonItem alloc] initWithCustomView:rightButton];
    self.navigationItem.rightBarButtonItem=rightItem; 
```

What can I do? Is there a way to solve this?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T11:53:11.360

Can you reproduce the problem yourself? It would be a good start.

I think you may be having a problem because you're adding a target to the `UIButton` custom view and not the actual bar button item.

So please try setting the action and target properties on the `UIbarButtonItem` itself. Be sure to remove the `rightButton addTarget` line.

If that doesn't work, I'd then try not using a `UIbutton` for the custom view.

**Btw, why aren't you just using `UIBarButtonItem initWithBarButtonSystemItem:`?** i think the "action" style will give you the look you want, with less hassle.

# html - HTML 占位符属性不是有效属性

> ID：14302620
> 
> 赞同：1
> 
> 时间：2013-01-13T10:33:22.500
> 
> 标签：html, sharepoint-2010, placeholder, applicationpage

在 SharePoint 应用程序页面上，我使用`<input>`如下占位符：

```
<input type="text" id="name" name="name" placeholder="your name" /> 
```

但是占位符带有下划线并说：验证（XHTML 1.0 过渡）属性占位符不是有效的属性。但是当我输入时`runat = "server"`，错误就消失了

```
<input type="text" id="name" name="name" placeholder="your name" runat="server" /> 
```

现在，它的有效属性。我不明白为什么占位符属性在没有`runat = "server"`. 有人能说出原因吗？我不想使用`runat = "server"`.

我也在`<!DOCTYPE html>`应用程序页面的顶部添加了，但它仍然给出了同样的错误

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-13T10:36:22.847

您正在使用带有 XHTML 1.0 过渡文档类型的 HTML5 标记

占位符、文章、页脚等都是 HTML5

```
<!DOCTYPE html> 
```

以上是适用于 HTML5 的 DOCTYPE。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-13T10:38:28.397

placeholder 是一个 HTML5 属性，因此它在 xHTML 1.0 Transitional 下*应该*是无效的。至于`runat`改变行为的属性，很可能是系统的缺陷，或者只是由于某种原因被抑制。

# mysql - nothing references this table, but i still can't drop it, due to foreign key constraints

> ID：14302626
> 
> 赞同：0
> 
> 时间：2013-01-13T10:35:24.883
> 
> 标签：mysql, foreign-keys

Error 1217: Cannot delete or update a parent row: a foreign key constraint fails SQL Statement: drop table `s_a_user`.`main`

i used "rpl -Ris ..." to check the sql dumps, and it's not in there. i queried the information schema, and it's not in there either. i think this is a bug, but i may just not be finding an elusive reference to this table. screenshot below shows all info needed.

[http://tinypic.com/r/30lcu2t/6](http://tinypic.com/r/30lcu2t/6) - they resized it and it's hard to read, but the tables listed are s_a_user.resume, not s_a_user.main, so, in other words, it confirms there is nothing referencing this

==UPDATE==SOLVED==

this is a bug in mysql. "SHOW ENGINE INNODB STATUS" shows the error came from "s_a_mail.topic", which does not even exist [-_-] ...

to solve this: delete all innodb log files, delete the schema, delete the schema's directory, restart mysql with innodb_force_recovery=4 in your my.conf, remove the force recovery, restart mysql again, recreate the database schema, reimport the data backup, restart mysql with innodb_force_recovery=4 AGAIN, take out innodb_force_recovery=4 and restart AGAIN.

this fixes the foreign key problem, but now workbench crashes when accessing the s_a_user schema's tables, so now i get to investigate that... [-_-] i'm about to just build a new database system...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-01-13T17:41:48.587

```
SET FOREIGN_KEY_CHECKS=0; DROP TABLE ´your_table´; SET FOREIGN_KEY_CHECKS=1; 
```

这应该可以帮助你。

[Rune Kaagaard](https://stackoverflow.com/users/164449/rune-kaagaard)在[这个问题](https://stackoverflow.com/questions/11100911/cant-drop-table-a-foreign-key-constraint-fails/23293136#23293136)上的技巧

# algorithm - What is a minimum spanning forest?

> ID：14302628
> 
> 赞同：7
> 
> 时间：2013-01-13T10:35:45.657
> 
> 标签：algorithm, graph, graph-theory, minimum-spanning-tree

A minimum spanning tree gives the cheapest way an undirected graph. But what is a minimum spanning forest? Is it defined for connected graphs or unconnected graphs?

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-01-13T10:40:15.933

最小生成森林是对无连接图的最小生成树的推广。对于图的每个组件，取其 MST，得到的集合是最小生成森林。

# r - Updating embedded data, for example sysdata.rda

> ID：14302629
> 
> 赞同：10
> 
> 时间：2013-01-13T10:35:46.193
> 
> 标签：r, package

My latest submission to CRAN got bounced back because I have assignments to the global environment which is now frowned upon.

I have an embedded data set (sysdata.rda) that contains configuration parameters based upon state (as in United States) the user resides. I have wanted this embedded data set to be updatable when a new user uses the program. I previously updated this data in the initial function the user uses and made it accessible to the user via global assignment.

I am struggling to figure out how to update this embedded data and make it the default data that the user uses for the remainder of their session.

Previously I housed the data in /data and recently switched it to /R/sysdata.rda as it seemed more suited for that locale. Now I'm not so sure.

Any help greatly appreciated

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-13T20:21:09.250

关键是在全局环境之外的环境中进行分配。有两种基本技术，使用`local()`和`<<-`/或显式创建新环境：

使用显式环境很简单：创建环境，然后像列表一样分配给它：

```
my_opts <- new.env(parent = emptyenv())
set_state <- function(value) my_opts$state <- value
get_state <- function() my_opts$state 
```

使用`local()`有点复杂，需要一些技巧`<<-`

```
set_state <- NULL
get_state <- NULL

local({
  state <- NULL
  get_state <<- function() state
  set_state <<- function(value) state <<- value
}) 
```

有关如何`<<-`工作的更多信息，请参阅[https://github.com/hadley/devtools/wiki/environments](https://github.com/hadley/devtools/wiki/environments)，在“分配：将名称绑定到值”部分。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-13T11:42:58.690

为什么没有一个`foo.R`文件`/data`来加载数据并在用户调用时对其进行更新`data(foo)`？这是允许的选项之一`/data`，但请注意[编写 R 扩展中的以下内容](http://cran.r-project.org/doc/manuals/R-exts.html)

> 请注意，R 代码应该是“自给自足的”，而不是使用包提供的额外功能，这样数据文件也可以在无需加载包的情况下使用。

如果您可以忍受该限制，则`data(foo)`可以加载数据，更新它，并确保它位于特定的命名对象中，然后您可以在函数中引用该对象。

# javascript - 似乎无法理解这段 javascript 代码！如果（！this.class）

> ID：14302633
> 
> 赞同：3
> 
> 时间：2013-01-13T10:36:05.653
> 
> 标签：javascript

这里是 JavaScript 新手。

所以我一直在尝试学习使用 Raphael.js 并遇到了这个[http://jsfiddle.net/terryyounghk/AeU2r/](http://jsfiddle.net/terryyounghk/AeU2r/)代码片段。

现在，如果您查看第 167 行，我就是不明白这个“if”语句。

```
 Raphael.el.style = function (state, style, aniOptions)
    {
     if (!this.class)
     {
        this.class = style ? style : 'default';
        this.aniOptions = aniOptions ? aniOptions : null;

        // start assigning some basic behaviors
        this.mouseover(function () { this.style('hover'); });
    .... 
```

什么级别？它在返回什么？谁在退货？

它甚至在检查什么？那是一堂课？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-13T15:21:47.770

从[Raphael 文档](http://raphaeljs.com/reference.html#Raphael.el)中，`Raphael.el`是一种将自己的方法添加到`Raphael.element`类的方法。一般来说，这个类的目的是使操作 SVG 元素更容易。

`this.class`在代码示例中，与前面句子中使用的编程意义上的单词类无关。（据我所知）它也不是标准 Raphael 框架的一部分。它也不是指`class`HTML 和 SVG 元素可以具有的属性，并且通常在 javascript 中使用`element.className`or访问`element.setAttribute('class', '...')`。

`this`指的是元素包装器对象（ 的一个实例`Raphael.element`），看来编写此方法的人只是简单地使用该名称`class`在元素包装器中存储了一些附加信息。（正如评论中指出的那样，这可能是一个坏主意，因为`class`它是 javascript 中的保留关键字；但无论如何，它仍然有效。）

具体来说，在示例中，`this.class`最初是`undefined`因为在 Raphael 或代码中的其他任何地方都没有为它分配值。在`if`子句中，`!undefined`计算结果为`true`，并且在下一行中，没有值被传递给函数 for `style`，因此`style ? style : 'default'`计算结果为“默认”。因此`this.class`被分配了值“默认”。之后，如果您右键单击一个形状并选择*Use custom style*，该`class`形状的 'custom'。

请注意，javascript 很容易让您引用尚未在任何地方初始化的对象的属性并为其赋值。它不会抛出错误，但`undefined`如果没有分配任何值则简单地返回。

您可以通过在浏览器控制台中插入一行记录正在发生的事情来查看所有这些：

```
console.log('style', state, style, aniOptions, this, 'class:', this.class); 
```

然后使用浏览器的开发人员工具查看输出（[JSFiddle](http://jsfiddle.net/AeU2r/42/)）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-13T10:40:30.640

它检查是否`class`定义了属性，如果没有，它将分配给`style ? style : 'default'`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-13T10:42:20.537

您所看到的只是一个条件语句，将其视为一个缩写的 if-else-clause，它检查是否`style`评估为真或假，如果为真，则`this.Class`值为`style`，如果不是，则值为`'default'`。

我不知道 raphael.js 是如何工作的，但在我看来它只是一个 html 元素类。

# arrays - 如何计算最接近中位数的 k 个数字？

> ID：14302636
> 
> 赞同：4
> 
> 时间：2013-01-13T10:36:17.793
> 
> 标签：arrays, algorithm, median

我有一个包含 n 个成对不同元素的数组和一个 1<=k<=n 的数字 k。

现在我正在**寻找一种算法来计算与`k`数字数组的中位数绝对差最小的数字**。**我需要线性复杂度（`O(n)`）。**

**我的做法：**

我找到中位数：

*   我对数字进行排序
*   我得到中间元素，或者如果元素的数量甚至是中间和圆形中两个元素的平均值。

在那之后：

*   我取每个数字并找到与中位数的绝对距离。这些结果我保存在不同的数组中
*   我对新获得的数组进行排序。
*   我取结果数组的前 k 个元素，我就完成了。

我不知道我的解决方案是否在`O(n)`，也不知道我是否对这个想法正确。有人可以验证吗？有人可以告诉我如何在 O(n) 中解决它吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-13T11:24:02.077

你可以这样解决你的问题：

[您可以使用nth_element 算法](http://www.cplusplus.com/reference/algorithm/nth_element/)`O(n)`找到wg中的中位数。`O(n)`

您遍历所有元素，用一对替换每个元素：`<the absolute difference to the median>, <element's value>`。`n`你再一次用=做 nth_element `k`。应用此算法后，您可以保证`k`在新数组中首先具有绝对差的最小元素。你把他们的指数和完成！

另一方面，您的算法使用排序，这使得它`O(nlogn)`。

**编辑**：请求的示例：

设数组为`[14, 6, 7, 8, 10, 13, 21, 16, 23]`。

*   在找到中位数的步骤之后，它将被重新排序为：`[8, 7, 9, 10, 13, 16, 23, 14, 21]`，请注意数组未排序，但中位数 (13) 仍然正好在中间。
*   现在让我们做一下让你感到困惑的对替换：我们创建一个新的对数组：`[<abs(14-13), 14>, <abs(6-13), 6>, <abs(7-13), 7>, <abs(8-13), 8>, <abs(10-13), 10>, <abs(13-13), 13>, <abs(21-13), 21>, <abs(16-13), 16>, <abs(23-13), 23>`。这样我们就得到了数组：`[<1, 14>, <7, 6>, <6, 7>, <5, 8>, <3, 10>, <0, 13>, <8, 21>, <3, 16>, <10, 23>`
*   如果 eg`k`是 4，我们再做一次 nth_element（使用每对的第一个元素进行比较）并获得：`[<1, 14>, <3, 16>, <0, 13>, <3, 10>, <8, 21>, <7, 6>, <10, 23>, <6, 7>, <5, 8>]`所以您搜索的数字是前 4 对的第二个元素：`14`、`16`和`13``10`

# wpf - WPF：将主表单属性传递给用户控件

> ID：14302638
> 
> 赞同：2
> 
> 时间：2013-01-13T10:36:27.220
> 
> 标签：wpf, binding, parameter-passing, dependency-properties

我已经设置了自己的用户控件，其中包含两个 ComboBox，每个 ComboBox 项源都绑定到一个 DependencyProperty。我遇到的问题是将使用我的用户控件的表单中的属性传递给用户控件。

下面是我的用户控件：

```
public static readonly DependencyProperty ListOneProperty = DependencyProperty.Register
    ("ListOne", typeof(List<int>), typeof(LinkedComboBox), new PropertyMetadata(new List<int>()));
    public List<int> ListOne
    {
        get { return (List<int>)GetValue(ListOneProperty); }
        set { SetValue(ListOneProperty, value); }
    }

    public static readonly DependencyProperty ListTwoProperty = DependencyProperty.Register
        ("ListTwo", typeof(List<string>), typeof(LinkedComboBox), new PropertyMetadata(new List<string>()));
    public List<string> ListTwo
    {
        get { return (List<string>)GetValue(ListTwoProperty); }
        set { SetValue(ListTwoProperty, value); }
    }

    public LinkedComboBox()
    {

        InitializeComponent();
        FillListOne();
    } 
```

下面是我的 MainWindow xaml：

```
 <control:LinkedComboBox x:Name="LinkedBox" ListTwo="{Binding MyList}"/> 
```

和 MainWindow.xaml.cs：

```
 static List<string> _myList = new List<string>{"abc","efg"};
    public List<string> MyList 
    {
        get { return _myList; }
        set { _myList = value; } 
        }
    public MainWindow()
    {

        InitializeComponent();

    } 
```

我需要什么才能让用户控件接受来自主窗口的绑定？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-13T11:02:26.690

一切都很好，除了您需要`PropertyChangedCallback`处理您的财产。

这是一个简单的例子

```
 public static readonly DependencyProperty ListTwoProperty = DependencyProperty.Register
    ("ListTwo", typeof(List<string>), typeof(LinkedComboBox), new PropertyMetadata(new List<string>(), new PropertyChangedCallback(Changed)));

 private static void Changed(DependencyObject d, DependencyPropertyChangedEventArgs e) 
 {  
   //e.NewValue here is your MyList in MainWindow.
 } 
```

# javascript - 当一个元素被另一个元素覆盖时，有没有办法获得鼠标悬停事件？

> ID：14302639
> 
> 赞同：3
> 
> 时间：2013-01-13T10:36:32.957
> 
> 标签：javascript, jquery

无需计算元素的位置，然后触发您自己的“事件”。

[原始小提琴（可以用 z-index 修复）](http://jsfiddle.net/ckaPU/)

[更好的小提琴（z-index 无法工作的情况）](http://jsfiddle.net/PHXJ9/4/)

![例子](../Images/ad9fe27875428baf4e87c236dd656aff.png)

```
<div class='under'></div>
<div class='over'></div>

.over { 
  display:inline-block;
  position:absolute;
  height:100px;
  width:100px;
  background: rgba(0, 255, 0, .3);
}

.under {
  display:inline-block;
  position:absolute;
  height:26px;
  width:26px;
  top:37px;
  left:37px;
  background:rgba(0, 0, 255, 1);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-13T10:48:02.250

我不认为这是可能的，你可以在你的 css 中放一个 z-index：

```
.under {
    z-index:1;
 } 
```

然后修改你的JS：

```
under.on("mouseover", function() { 
                            blue.html("Y"); 
                            green.html("Y"); 
 }); 
```

**编辑** 错误的链接。

这是[小提琴](http://jsfiddle.net/gracedescending/qm6Fq/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-13T10:48:31.627

除非我错过了您的示例的要点，否则您可以在 CSS 中添加一个 z-index 属性：

```
.over 
{
    display:inline-block;
    position:absolute;
    height:100px;
    width:100px;
    background: rgba(0, 255, 0, .3);
    z-index:1;
}

.under 
{
    display:inline-block;
    position:absolute;
    height:26px;
    width:26px;
    top:37px;
    left:37px;
    background:rgba(0, 0, 255, 1);
    z-index:2;
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-13T10:48:46.530

添加`pointer-events:none;`到您的`over`div：

```
.over {
    display:inline-block;
    position:absolute;
    height:100px;
    width:100px;
    background: rgba(0, 255, 0, .3);
    pointer-events:none;
 } 
```

**演示：http:** [//jsfiddle.net/ckaPU/1/](http://jsfiddle.net/ckaPU/1/)

# wordpress - FeedWord Press - 媒体附件

> ID：14302640
> 
> 赞同：1
> 
> 时间：2013-01-13T10:36:36.653
> 
> 标签：wordpress

我安装了 FeedWordpress 插件，但我注意到它没有在提要的媒体附件中发布图像，而只是在文本中发布。我找到了一个对我有一点帮助的小脚本（图像被添加到自定义字段中而没有实际下载它们）。问题是我需要缩略图，当然.. 如果不下载图像，您将无法获得缩略图。

有什么办法可以自动下载媒体附件中的图像？或者，有没有其他方法可以修复我的缩略图？

我真诚地感谢任何帮助

RSS 提要：[http ://www.antena3.ro/rss/politica.xml](http://www.antena3.ro/rss/politica.xml)

我的网站：[http ://www.rolportal.info](http://www.rolportal.info)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T03:15:00.683

我是开发人员领域的主要支柱，但是，我的 PHP 人通过下载另一个名为 Auto Post Thumbnail 的插件来解决它，他们做了一个小黑客，所以它会不断检查特征图像。

您必须确保您的 CSS 人员告诉特征图像抓取器仅抓取特定大小的图像，并在必要时进行裁剪，这将防止它将社交媒体图标作为特征图像拉入 :)

**我最近确实遇到了重复图像问题，我禁用了解决问题的 Jetpack，但我想要 Jetpack 回来 :(

祝你好运，如果您需要更详细的信息，我会问我的开发人员。

真挚地，

溪

# mysql - Cakephp：仅查找一次包含关联的parent_id

> ID：14302645
> 
> 赞同：0
> 
> 时间：2013-01-13T10:36:55.907
> 
> 标签：mysql, cakephp

我无法摆脱此查询中的一些“重复”：

```
$data = $this->Collection->find('first', array(
        'conditions' => array('Collection.id' => $id),
        'Collection' => array(
            'fields' => array(
                'Collection.name'
            ),
        ),
        'contain' => array(
            'Product' => array(
                'fields' => array(
                    'id'
                ),
                'order' => 'lft ASC',
            ),
            'Product.Detail' => array(
                'fields' => array(
                    'product_id', // should occur only once
                    'image_1_zoom',
                    'image_1_slide',
                    'image_1_detail',
                    'image_1_thumb',
                ),
        )))); 
```

细节属于产品，产品有很多细节。我的问题是，我不想获得多个具有相同 product_id 的详细信息。我尝试了“组”但没有成功。DISTINCT 是不可能的，因为其他字段具有不同的内容并且不是“真正的”重复项。

任何想法都非常感谢！:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T15:13:21.953

尝试放入`'limit'=>1`您的`Product.Detail`阵列！

# wordpress - wordpress 允许目录 php 文件浏览

> ID：14302652
> 
> 赞同：0
> 
> 时间：2013-01-13T10:37:44.240
> 
> 标签：wordpress, .htaccess

我在我的根目录（www 文件夹内）中安装了 wp。在根目录中，我还创建了“scraper”文件夹，里面有几个文件。当我去 myblog.com/scraper/index.php 它说 not found 。但我可以访问 'scraper' 目录中的 js 和 css 文件。我在 SO 的 htaccess 文件中尝试了一些技巧，但没有运气。这就是现在的样子：

```
# BEGIN WordPress
<IfModule mod_rewrite.c>
   RewriteEngine On
   RewriteBase /
   RewriteRule ^index\.php$ - [L]
   RewriteCond %{REQUEST_FILENAME} !-f
   RewriteCond %{REQUEST_FILENAME} !-d
   RewriteRule . /index.php [L]
</IfModule>
# END WordPress 
```

# android - 在 android 中使用时间选择器和日期选择器进行 Prob

> ID：14302663
> 
> 赞同：0
> 
> 时间：2013-01-13T10:39:06.433
> 
> 标签：android, show-hide, android-ui, android-datepicker, android-timepicker

我的应用程序中有一个设置和`CheckBox`的可见性！代码看起来像这样`TimePicker``DatePicker`

```
public void onCheckBClicked(View v) {

    boolean checked = ((CheckBox) v).isChecked();

    if(checked==false)
    {
        mDateButton.setVisibility(View.INVISIBLE);
        mTimeButton.setVisibility(View.INVISIBLE);

    }
    else
    {
        mDateButton.setVisibility(View.VISIBLE);
        mTimeButton.setVisibility(View.VISIBLE);

    }

  } 
```

这工作得很好！但问题是，时间和日期默认设置为我手机上的时间和日期！我想要 TimePicker 和 DatePicker 上的空白值！我怎样才能做到这一点？？

# java - 将api源复制到android中的项目中

> ID：14302677
> 
> 赞同：-1
> 
> 时间：2013-01-13T10:41:26.070
> 
> 标签：java, android, shareactionprovider

我正在尝试修改 Android 中 ShareActionProvider 的行为，使其不显示历史记录。在这个过程中，我需要将 ShareActionProvider、ActivityChooserModel 和 ActivityChooserView 的源代码复制到我的 android eclipse 项目中。我面临解决问题，例如 eclipse 无法解决 R.attr.actionModeShareDrawable、ActivityChooserModel、ActivityChooserView。这发生在我从 api 源获得副本的所有类中。有没有办法解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T10:43:42.400

您还需要`attrs.xml`从 android 源代码中复制值

# java - 春季安全http 404错误

> ID：14302679
> 
> 赞同：2
> 
> 时间：2013-01-13T10:41:48.050
> 
> 标签：java, spring, jakarta-ee, spring-security

出于学习目的，我简单的 Spring-hibernate 应用程序。它具有一对多的数据库关联，您可以在其中添加一个仓库，并且可以为每个仓库添加项目。现在我想添加 spring-security 进行身份验证，但是当我尝试访问该站点时，我得到了 HTTP ERROR 404。

这是 web.xml 中的 spring-security 标准：

```
<context-param>
   <param-name>contextConfigLocation</param-name>
   <param-value>
        /WEB-INF/spring-security.xml
   </param-value>
</context-param>

<filter>
    <filter-name>springSecurityFilterChain</filter-name>
    <filter-class>org.springframework.web.filter.DelegatingFilterProxy</filter-class>
</filter>

<filter-mapping>
  <filter-name>springSecurityFilterChain</filter-name>
  <url-pattern>/*</url-pattern>
</filter-mapping> 
```

这是 spring-security.xml ：

```
<beans:beans xmlns="http://www.springframework.org/schema/security"
    xmlns:beans="http://www.springframework.org/schema/beans"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://www.springframework.org/schema/beans 
                    http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
                    http://www.springframework.org/schema/security 
                    http://www.springframework.org/schema/security/spring-security-3.1.xsd">

    <http use-expressions="true">
        <intercept-url pattern="/record/**" access="permitAll" />
        <form-login />
    </http>

    <authentication-manager>
        <authentication-provider>
            <user-service>
                <user name="admin" password="password" authorities="supervisor, teller, user" />
                <user name="dianne" password="emu" authorities="teller, user" />
                <user name="scott" password="wombat" authorities="user" />
                <user name="peter" password="opal" authorities="user" />
            </user-service>
        </authentication-provider>
    </authentication-manager>
</beans:beans> 
```

如果我将其更改`access="permitAll"`为 `access="hasRole('supervisor')" 当我尝试访问应用程序时，系统会要求我输入用户名和密码，但当我输入它们时，我也会收到 404 错误。没有spring-security，当我访问“http://localhost:8080/testapp/record/list”时，应用程序可以正常工作......我使用这个网站来了解spring security - [http://static.springsource.org/spring -security/site/tutorial.html](http://static.springsource.org/spring-security/site/tutorial.html)

这是我的主控制器：

```
@Controller
@RequestMapping("/record")
public class MainController {

    protected static Logger logger = Logger.getLogger("controller");

    @Resource(name="warehouseService")
     private WarehouseService warehouseService;

     @Resource(name="itemService")
     private ItemService itemService;

        @RequestMapping(value = "/list", method = RequestMethod.GET)
        public String getRecords(Model model) {
         logger.debug("Received request to show records page");

         // Retrieve all persons
         List<Warehouse> warehouses = warehouseService.getAll();

         // Prepare model object
         List<WarehouseDTO> warehousesDTO = new ArrayList<WarehouseDTO>();

         for (Warehouse warehouse: warehouses) {
          // Create new data transfer object
             WarehouseDTO dto = new WarehouseDTO();

       dto.setId(warehouse.getId());
       dto.setName(warehouse.getName());
       dto.setAddress(warehouse.getAddress());
       dto.setManager(warehouse.getManager());
       dto.setItems(itemService.getAll(warehouse.getId()));

       warehousesDTO.add(dto);
         }

         model.addAttribute("warehouses", warehousesDTO);

      return "records";
     } 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T10:54:49.467

尝试`default-target-url`在 form-login 标记中指定 a 。我猜您的身份验证和 Spring 安全性默认将请求路由到应用程序的根目录，该根目录未映射导致 404。

```
<form-login default-target-url="/record/list"/> 
```

如果失败尝试（不确定视图是如何映射的）：

```
<form-login default-target-url="/record/list/"/> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-13T10:49:29.853

听起来可能很愚蠢，但是您是否尝试将 pattern="/record/ **" 更改为 pattern="/testapp/record/** "？

通常安全访问问题会出现 403 错误（拒绝访问），而不是 404（未找到资源）。

# android - 将信息传递给 android 服务

> ID：14302683
> 
> 赞同：2
> 
> 时间：2013-01-13T10:43:00.910
> 
> 标签：android, service, parameters

我在android中有一个服务，我需要向它传递参数..我不知道该怎么做..

我试图 putExtra 但它不是一个意图......我使用了构造函数但它不适用于构造函数..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-13T10:58:05.963

从活动：

```
Intent intent = new Intent(this, YourService.class);
intent.putExtra("someKey", someData);
intent.putExtra("anotherKey", anotherData);
startService(intent); 
```

在 YourService 中：

```
public void onStartCommand(Intent data, int startId, int flags) {
    int data1 = data.getExtra("someKey");
    int data2 = data.getExtra("anotherKey");
} 
```

谢谢。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-13T10:46:42.320

```
public int onStartCommand(Intent intent, int flags, int startId) {
    String[] info = intent.getStringArrayExtra("information");
} 
```

# math - 计算差异

> ID：14302685
> 
> 赞同：-3
> 
> 时间：2013-01-13T10:43:13.743
> 
> 标签：math, average

我有 5 个值，例如这样：

```
3
11
8
5
8 
```

我想计算它们之间的平均差异。

如果我只有两个值，比如 3 和 11，则差值为 8。

但是当我有更多的值（例如我上面的例子中的五个）时，我该怎么做呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-13T10:48:23.817

我无法详细显示答案，因为我无法在此板上格式化数学。数学相关问题请参考[数学分板。](https://math.stackexchange.com/)

不完全确定你在追求什么，但它可能是[标准偏差](http://en.wikipedia.org/wiki/Standard_deviation) 标准偏差是衡量每个数字相对于整体平均值的相对偏差的量度。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-13T10:48:10.213

您可能正在寻找[Variance](http://www.mathsisfun.com/data/standard-deviation.html)或[Standard Deviation](http://www.investopedia.com/terms/s/standarddeviation.asp)。

[Variance](http://www.investopedia.com/terms/v/variance.asp) -> 衡量一组数据点在其平均值周围的离散程度。方差是与平均值的平均平方偏差的数学期望。

[估计方差](http://en.wikipedia.org/wiki/Variance#Estimating_the_variance)

# visual-studio-2012 - 如何配置 Visual Studio 以将所有 TypeScript 文件合并到一个 JavaScript 文件中？

> ID：14302686
> 
> 赞同：6
> 
> 时间：2013-01-13T10:43:14.783
> 
> 标签：visual-studio-2012, typescript, tsc

使用 tsc 命令就像运行一样简单：

```
tsc --out all.js js/*.ts 
```

在构建项目时如何配置 Visual Studio 来执行此操作？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-12-16T23:12:15.783

通过修改您正在构建的项目（.csproj / .vbproj）的构建属性，我找到了一个可能更简单的解决方案：

![项目构建打字稿设置](../Images/d2d88e5026e4e70550e3b2ec674e7f41.png)

我不确定在哪个版本的 Typescript 中引入了此功能。但这似乎比 svallory 的解决方案简单得多

资料来源：[http ://rostacik.net/2013/12/18/how-to-setup-post-build-event-in-visual-studio-to-combine-multiple-typescript-files-to-one-javascript-文件/](http://rostacik.net/2013/12/18/how-to-setup-post-build-event-in-visual-studio-to-combine-multiple-typescript-files-to-one-javascript-file/)

**编辑**：自 Visual Studio 2015 以来，现在很容易集成 Grunt/Gulp 任务并让它们在您的构建中运行。我个人非常喜欢使用 Gulp 来更精细地控制我构建和/或缩小的文件，我强烈推荐它。使用[本指南](http://weblogs.asp.net/dwahlin/creating-a-typescript-workflow-with-gulp)作为起点应该会有所帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-13T11:15:49.110

刚刚得到它。添加这一行：

```
<Exec Command="tsc --out all.js @(TypeScriptCompile ->'&quot;%(fullpath)&quot;', ' ')" /> 
```

到您的或文件的`BeforeBuild`目标，如下所示：`.csproj``.vbproj`

```
<Target Name="BeforeBuild">
    <Message Text="Compiling TypeScript files" />
    <Message Text="Executing tsc$(TypeScriptSourceMap) @(TypeScriptCompile ->'&quot;%(fullpath)&quot;', ' ')" />
    <Exec Command="tsc$(TypeScriptSourceMap) @(TypeScriptCompile ->'&quot;%(fullpath)&quot;', ' ')" />
    <Exec Command="tsc --out all.js @(TypeScriptCompile ->'&quot;%(fullpath)&quot;', ' ')" />
</Target> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-31T18:01:49.137

似乎建议的解决方案适用于打字稿 0.8.1.1 而不是 0.8.2

# c++ - C++\GLUT 窗口菜单栏

> ID：14302692
> 
> 赞同：2
> 
> 时间：2013-01-13T10:44:05.737
> 
> 标签：c++, opengl, visual-studio-2012, glut

我正在编写一个简单的 glut 应用程序，我的老师希望我创建一个顶部菜单栏，就像在任何 Windows 应用程序中一样（你知道，文件\编辑等，窗口顶部的标尺）。

我查看了过剩文档并用谷歌搜索，我只能找到一个用鼠标右键打开的弹出菜单 - 不是定义的。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-13T18:09:21.750

GLUT 库提供创建窗口、回调函数、定时器、鼠标事件和按键等服务。但是您想制作 GLUT 不提供内置功能的窗口菜单栏。GLUT 对游戏有用，对 GUI 没有模拟。为此，您必须使用 GUI 库。这是 GUI 库的最佳列表

1.  [FLTK](https://stackoverflow.com/tags/fltk/info)
2.  [GTK](https://stackoverflow.com/tags/gtk/info)
3.  [QT](https://stackoverflow.com/tags/qt/info)

其中我建议你使用QT，因为QT也是面向对象的，适合C++。[在qt-creator](https://stackoverflow.com/tags/qt-creator/info)的帮助下，您可以在一分钟内通过拖放制作 GUI。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-13T10:47:27.950

试试Crazy Eddie 的支持[菜单和弹出](http://www.cegui.org.uk/wiki/index.php/Menu_and_Popup)[窗口的 GUI 系统](http://www.cegui.org.uk/wiki/index.php/Main_Page)

> Crazy Eddie 的 GUI System 是一个免费库，为图形 API / 引擎提供窗口和小部件，这些功能本身不可用或严重缺乏。该库是面向对象的，用 C++ 编写，面向应该花时间创建出色游戏而不是构建 GUI 子系统的游戏开发人员！

# javascript - jQuery Load() 在 IMG.SRC 更改时导致无限循环

> ID：14302695
> 
> 赞同：1
> 
> 时间：2013-01-13T10:44:33.880
> 
> 标签：javascript, jquery, image, load

我有这样的功能：

```
$('img#foo').load(function(){
    // do something
    $(this).attr('src',newsrcurl) ;
}) ; 
```

SRC 变化导致重新调用加载函数，所以死循环！

如何停止加载绑定？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T12:19:08.773

附加“加载”处理程序`.one()`将确保它只触发一次。

```
$('img#foo').one('load', function(){
    // do something
    $(this).attr('src',newsrcurl) ;
}) ; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-13T11:14:45.417

只需在设置之前检查 URL 是否实际更改：

```
if ($(this).attr('src') !== newsrcurl) {
   $(this).attr('src', newsrcurl) ;
} 
```

# java - 使用超类私有成员 (Java)

> ID：14302696
> 
> 赞同：0
> 
> 时间：2013-01-13T10:44:37.077
> 
> 标签：java, inheritance

我已经从 Java 中的一个类构建了一个子类，该类具有我想在子类中访问的私有方法，我无法更改或编辑超类。问题当然是他们是私人的。假设我自己编写了超类，并且出于某些原因，这些方法必须是私有的。我可以复制子类中的代码。但是在编写子类时有没有更好的方法（不产生这么多代码行）来使用它们？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T11:16:28.800

忽略您想要这样做的原因可能非常糟糕（您没有使用私有变量的合同，因此无法保证它们不会改变或完全消失！）您可能可以使用反射做您想做的事：

使用：
[http](http://docs.oracle.com/javase/6/docs/api/java/lang/Class.html#getDeclaredField(java.lang.String) ://docs.oracle.com/javase/6/docs/api/java/lang/Class.html#getDeclaredField(java.lang.String )
[http://docs.oracle.com/javase/6/ docs/api/java/lang/reflect/AccessibleObject.html#setAccessible(boolean](http://docs.oracle.com/javase/6/docs/api/java/lang/reflect/AccessibleObject.html#setAccessible(boolean) )
[http://docs.oracle.com/javase/6/docs/api/java/lang/reflect/Field.html#get(java.语言](http://docs.oracle.com/javase/6/docs/api/java/lang/reflect/Field.html#get(java.lang.Object).对象)

```
Class c = object.getClass();
Field field = c.getDeclaredField("somePrivateInstanceVariable");
field.setAccessible(true);
Object someValue = field.get(object); 
```

我只是想强调一下，你应该考虑这样做的原因并决定反对它！如果您拥有要扩展的代码，请考虑是否应该改为使用该字段`protected`而不是`private`. 请记住，挂钩到您不应该访问破坏 OOP 原则的代码（您正在规避封装）并且不能保证您的应用程序所依赖的代码不会在库的更新中消失（所以您是也将自己锁定到lib的固定版本）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-13T10:46:53.580

制作超类方法的`protected`. 它只能从`sub-class`包中访问。

`private`修饰符只能在类中访问。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-13T10:48:43.877

因此，您尝试使用“扩展”从超类继承方法。当然它们是私有的，但你可以在 sublass 中使用它们。使它们抽象会迫使您私下重写每一个，我看不到其他选择。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-01-13T10:49:01.723

在您的情况下，您应该将私有方法声明为受保护。阅读[此](http://docs.oracle.com/javase/tutorial/java/javaOO/accesscontrol.html)内容以获取有关该主题的更多详细信息。

# javascript - javascript中的function.toString()

> ID：14302698
> 
> 赞同：3
> 
> 时间：2013-01-13T10:44:40.893
> 
> 标签：javascript, function, tostring

我不明白**f.toString**（*不调用它*）如何评估同一函数的返回结果？

```
function f(a){
    console.log(a + a);
    f.toString = function(){return a};// this part is       
//confusing.
    return f;
};

f(10) // 20
f(10)(20)// 20 40 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-13T10:47:59.020

如果您尝试在字符串上下文中使用对象，则将通过调用它的`toString()`方法将其转换为字符串。

见[规范第 48 页](http://www.ecma-international.org/publications/files/ECMA-ST/Ecma-262.pdf)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-13T11:06:35.803

事实上`f.toString`，在你的场景中甚至没有被调用。如果您将删除此行 - 结果将是相同的。

`f.toString()`如果您尝试执行将被调用`console.log(f);`

你的结果解释：

```
f(10) // 20 
```

`f`使用参数调用函数，`10`并打印到控制台`console.log(10 + 10);`

```
f(10)(20) // 20 40 
```

第一部分如上，但`f`函数也返回自身`return f;`，这意味着第二部分`(20)`将被视为对同一函数的再次调用并打印`console.log(20 + 20);`

# javascript - 使用 Grunt.js 运行 mocha 测试

> ID：14302702
> 
> 赞同：8
> 
> 时间：2013-01-13T10:45:53.647
> 
> 标签：javascript, phantomjs, mocha.js, gruntjs

我已经设置了 Grunt.js，并且我编写了我想使用 mocha-phantomjs 进行测试的测试。

我只需要帮助来编写一个可以运行的任务

```
$ mocha-phantomjs ./tests/index.html 
```

环顾四周后，我发现有一个运行 shell 命令的繁重任务，但没有更简单的方法吗？

我是新来的咕噜声。我看到他认出了这个`grunt qunit`命令。它是内置的吗？摩卡不能有类似的东西吗？我是否必须要求 child_process 并执行它？

更新：使用 child_process 并执行命令不会等待最终结果

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-13T10:54:22.000

您可以注册`test`到子进程（就像 Yeoman 对 Testacular 所做的那样）：

```
 // Alias the `test` task to run `mocha-phantomjs` instead
  grunt.registerTask('test', 'run mocha-phantomjs', function () {
    var done = this.async();
    require('child_process').exec('mocha-phantomjs ./tests/index.html', function (err, stdout) {
      grunt.log.write(stdout);
      done(err);
    });
  }); 
```

然后在终端中运行`grunt test`以执行测试。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-06-03T09:11:37.500

我知道这很旧，但是有一个`grunt-mocha`任务可以在 phantomjs 中运行 mocha 测试。

# objective-c - 我可以拦截电话拨号吗？

> ID：14302703
> 
> 赞同：0
> 
> 时间：2013-01-13T10:46:32.850
> 
> 标签：objective-c, iphone, phone-call, intercept

我想听用户的电话拨号。如果我认识到拨打的号码是我的应用程序定义为非真实呼叫的号码（例如以##### 开头），我想取消呼叫并启动我自己的应用程序。这在 Android 中是可行的。可以在 iPhone 上完成吗？

谢谢，西蒙

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T11:50:00.407

我明白你为什么要这样做。例如，拨打一个特殊号码以通过互联网服务而不是主网络来引导呼叫。

然而，在标准（即非越狱）iOS 上是不可能的。您可以通过 URL 方案获得类似的东西。

# android - 如何在服务器机器上集成 android 移动克隆

> ID：14302716
> 
> 赞同：2
> 
> 时间：2013-01-13T10:48:04.110
> 
> 标签：android, clone

我正在尝试在服务器上永久创建 android 移动设备的克隆并与设备同步。我的基本需求是有一个架构，使得客户端应用程序（设备中的 android 应用程序）应该与其驻留在服务器上的克隆进行通信。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T10:49:46.243

试试 Dalvik VM 查看维基百科的链接。它可能会帮助你。

# c# - 'System.UnauthorizedAccessException' 读取文件无扩展名

> ID：14302722
> 
> 赞同：1
> 
> 时间：2013-01-13T10:48:33.097
> 
> 标签：c#, windows-8

我正在尝试在 Windows 8 应用程序中读取 chrome 书签文件。问题是我收到“System.UnauthorizedAccessException”异常。所以基本上你必须在应用程序清单中注册一个文件类型关联，但该文件没有扩展名。

文件：`C:\Users\<User>\AppData\Local\Google\Chrome\User Data\Default\Bookmarks`

这在 Windows 8 应用程序中是否可行？

**更新**

这是我的文件访问代码：

```
 public async Task<string> ReadFile(string filename)
        {
            if (await FileExists(filename))
            {
                var file = await Windows.ApplicationModel.Package.Current.InstalledLocation.GetFileAsync(filename);
                var stream = await file.OpenReadAsync();
                var reader = new StreamReader(stream.AsStream());
                return await reader.ReadToEndAsync();
            }
            else return string.Empty;
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T16:04:28.733

一种解决方法是使用文件选择器。这允许最终用户手动选择文件系统上的文件。从文件选择器中获得 FileStorage 对象后，您就可以打开并读取该文件。

或者，您可以保存 StorageFile 以供以后使用，这意味着您的应用程序可以稍后访问该文件，而最终用户无需再次选择该文件。

有关 MSDN 的更多信息：

[文件打开选择器](http://msdn.microsoft.com/en-us/library/windows/apps/hh465174.aspx)

[如何跟踪最近使用的文件和文件夹](http://msdn.microsoft.com/en-us/library/windows/apps/xaml/Hh972344%28v=win.10%29.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-13T10:50:13.383

Windows 8 应用程序无法访问任何随机文件系统位置。它只能访问

*   应用程序文件夹（特定于您的应用程序）
*   常用文件夹，例如我的图片、我的视频和类似文件夹

有关完整的详细信息，请参阅[本文](http://msdn.microsoft.com/en-us/library/windows/apps/hh967755.aspx)

# tfs - TFS API：如何检查 TFS 服务器上的工作项是否已被删除或不存在？（如果它是可访问的，则不是）

> ID：14302732
> 
> 赞同：1
> 
> 时间：2013-01-13T10:49:25.487
> 
> 标签：tfs, workitem, tfs-sdk

我正在使用`TFS API`，我需要检查一个工作项是否已被删除或者它是否不存在。

如果我`WorkItemStore.GetWorkItem(Int32)`在此处使用并传递已删除工作项的 ID，则消息会显示“ `The work item does not exist`，或`you do not have permission to access it`。”

我只需要检查已删除的条件而不是不可访问的条件。
我在 API 中进行了搜索，但找不到任何方法来检查它。

我需要这个，因为我需要已删除的工作项列表。
在我的程序中，我列出了一些现有的工作项。然后我需要检查是否删除了这些工作项中的任何一个，但我不必关心登录的用户是否有权查看它。

在我的程序中，我需要绝对确定工作项已被删除，因为我必须对列表中每个已删除的工作项进行一些不可撤销的更改。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-13T12:02:14.500

你不能。如果您没有打开工作项的权限，则无法查询有关它的信息。这是一点鸡肉/鸡蛋。即使您确实拥有权限，您也不能确定工作项已被删除或尚未创建。

我会在具有项目集合级别权限或服务器级别权限以读取工作项的用户下的某处将您的工具作为服务运行。您还可以实现自己的网络服务，然后在您的工具中使用结果。

# c# - 如何修复“T”是“类型参数”，但用作“变量”编译错误

> ID：14302736
> 
> 赞同：15
> 
> 时间：2013-01-13T10:50:03.840
> 
> 标签：c#

我需要检查泛型类型参数`T`是`MyEntity`它还是它的子类。

下面的代码会导致此编译器错误：

```
'T' is a 'type parameter' but is used like a 'variable' 
```

怎么修？

```
public class MyEntity { }

static void Test<T>()
{
    // Error    34  'T' is a 'type parameter' but is used like a 'variable'
    if (T is MyEntity)
    {
    }
} 
```

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-01-13T10:52:15.190

您可以使用`IsAssignableFrom`方法 on`Type`检查是否`Type`可以将一个分配给另一个。

```
if (typeof(MyEntity).IsAssignableFrom(typeof(T))) 
```

注意：如果你想要它只能是`T`或者**它**`MyEntity`的子类，你可以定义通用约束，像这样：

```
static void Test<T>() where T : MyEntity
{

} 
```

而且像这样的代码`Test<object>()`甚至不会编译

* * *

您可以`IsAssignableFrom`使用以下代码进行检查：

```
public static void F<T>()
{
    var isAssignable = typeof(IEnumerable).IsAssignableFrom(typeof(T));

    Console.WriteLine ("{0} is {1} IEnumerable", typeof(T).Name, isAssignable ? "" : "not");
} 
```

例子：

```
F<IList>();       //prints IList is IEnumerable
F<IEnumerable>(); //prints IEnumerable is IEnumerable
F<object>();      //prints object is not IEnumerable 
```

# node.js - Node.js：如何在 mongoose.js 中执行 count 命令？

> ID：14302740
> 
> 赞同：0
> 
> 时间：2013-01-13T10:50:47.197
> 
> 标签：node.js, mongodb, count, mongoose

例如，我想执行如下计数命令：

```
db.test.count() 
```

还是团体？

里面怎么办`mongoose.js`？

顺便说一句，如何在猫鼬中执行聚合命令？好像没有`runCommand`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T03:29:14.240

在 mongodb 客户端上，您可以使用`db.<collection>.find().cound()`它来完成它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-13T17:08:45.013

Mongoose 建立在[“mongodb”nodejs 驱动程序之上](http://mongodb.github.com/node-mongodb-native/)。因此，Mongoose 的编码模式通常看起来更像这个驱动程序而不是 Mongo CLI。特别是大多数调用是异步的，需要回调才能获得结果。除了 almypal 在他的评论中的示例之外，这里还有一个[聚合示例](https://groups.google.com/forum/?fromgroups=#!topic/mongoose-orm/t9RfGqQvby8)。

# php - 表格中针对特定文本框长度的多个 div 标签

> ID：14302741
> 
> 赞同：3
> 
> 时间：2013-01-13T10:50:57.723
> 
> 标签：php, html, css, input, html-table

我有一张桌子有几个不同的`<input type = 'text'>`. 有些应该是 64 个字符，有些是 7 个字符，有些是 4 个字符。幸运的是，它们都组合在一起，所以我认为最好的方法是为每个部分设置多个 div 标签。但是，当我尝试调整 CSS 中的宽度时，没有任何输入发生变化。是什么赋予了？我有一个外部 CSS。表格代码和CSS代码如下

附带说明一下，我知道 64px != 64 个字符

编辑：修复了工作 html 代码。

桌子：

```
<?php
    require_once('auth.php');
    //Include database connection details
    require_once('config.php');
  ?>

    <html>
      <head>
        <title>Edit Profile</title>
        <link rel = 'stylesheet' type = 'text/css' href = 'default.css' />
      </head>
    <body>
      <div id = 'sideContainer'>
        <div id = 'navMain'>
          <?php include 'sidebar.html'; ?>
        </div>
      </div>
      <div id = 'content'>
        <?php
          $memberID = $_SESSION['SESS_MEMBER_ID'];
          $query = "SELECT * FROM memberData WHERE member_ID = '$memberID'";
          $result = mysql_query($query);
          while($row = mysql_fetch_assoc($result)){
            $vCode = $row['vCode'];
            $keyID = $row['keyID'];
            $mlYeild = $row['mlYeild'];
            $cycleTime = $row['cycleTime'];
            $veld = $row['veld'];
            $scor = $row['scor'];
            $pyro = $row['pyro'];
            $plag = $row['plag'];
            $omber = $row['omber'];
            $kern = $row['kern'];
            $jas = $row['jas'];
            $hemo = $row['hemo'];
            $gneiss = $row['gneiss'];
            $ochre = $row['ochre'];
            $spod = $row['spod'];
            $crok = $row['crok'];
            $bistot = $row['bistot'];
            $ark = $row['ark'];
            $merc = $row['merc'];

          }
        ?>
        <form id = 'editPlayerInfo' name = 'editPlayerInfo' method = 'post' action = 'editUser-exec.php'>
          <table border = '0'>
            <tr>
              <td colspan = '2'><h2>API stuff</h2></td>
            </tr>
            <tr>
              <td><h3>vCode</h3></td>
              <td><div id = 'vCode'><input type = 'text' name = 'vCode' value = '1234567812345678123456781234567812345678123456781234567812345678'></div></td>
            </tr>
            <tr>
              <td><h3>keyID</h3></td>
              <td><div id = 'keyID'><input name = 'keyID' type = 'text' value = '<?php echo $keyID; ?>'></div>
              </td>
            </tr>
          </table>
          <HR>
          <div id = 'refining'>
            <table>
              <tr>
                <td colspan  = '4'><h2>Mining Laser stuff</h2></td>
              </tr>
              <tr> 
                <td><h3>Mining Laser Yeild</h3></td>
                <td><input name = 'mlYeild' type = 'text' class = 'textfield' id = 'mlYeild' value = '<?php echo $mlYeild; ?>'/></td>
              </tr>
              <tr>
                <td><h3>Cycle Time</h3></td>
                <td><input name = 'cycleTime' type = 'text' class = 'textfield' id = 'cycleTime' value = '<?php echo $cycleTime; ?>'/></td>
              </tr>
            </table>
            <HR>
            <table>
              <tr>
                <td colspan  = '6'><h2>Yeild Specifics</h2></td>
              </tr>
                <td><h3>Veldspar Yeild</h3></td>
                <td><input name = 'veldYeild' type = 'text' class = 'textfield' id = 'veldYeild' value = '<?php echo $veld; ?>'/></td>
                <td><h3>Scordite Yeild</h3></td>
                <td><input name = 'scorYeild' type = 'text' class = 'textfield' id = 'scorYeild' value = '<?php echo $scor; ?>'/></td>
                <td><h3>Pyroxeres Yeild</h3></td>
                <td><input name = 'pyroYeild' type = 'text' class = 'textfield' id = 'pyroYeild' value = '<?php echo $pyro; ?>'/></td>            
              </tr>
              <tr>
                <td><h3>Plagioclase Yeild</h3></td>
                <td><input name = 'plagYeild' type = 'text' class = 'textfield' id = 'plagYeild' value = '<?php echo $plag; ?>'/></td>
                <td><h3>Omber Yeild</h3></td>
                <td><input name = 'omberYeild' type = 'text' class = 'textfield' id = 'omberYeild' value = '<?php echo $omber; ?>'/></td>
                <td><h3>Kernite Yeild</h3></td>
                <td><input name = 'kernYeild' type = 'text' class = 'textfield' id = 'kernYeild' value = '<?php echo $kern; ?>'/></td>
              </tr>
              <tr>
                <td><h3>Jaspet Yeild</h3></td>
                <td><input name = 'jasYeild' type = 'text' class = 'textfield' id = 'jasYeild' value = '<?php echo $jas; ?>'/></td>
                <td><h3>Hemorphite Yeild</h3></td>
                <td><input name = 'hemYeild' type = 'text' class = 'textfield' id = 'hemYeild' value = '<?php echo $hemo; ?>'/></td>
                <td><h3>Gneiss Yeild</h3></td>
                <td><input name = 'gneissYeild' type = 'text' class = 'textfield' id = 'gneissYeild' value = '<?php echo $gneiss; ?>'/></td>          
              </tr>
              <tr>
                <td><h3>Dark ochre Yeild</h3></td>
                <td><input name = 'ochreYeild' type = 'text' class = 'textfield' id = 'ochreYeild' value = '<?php echo $ochre; ?>'/></td>
                <td><h3>Spodumain Yeild</h3></td>
                <td><input name = 'spodYield' type = 'text' class = 'textfield' id = 'spodYield' value = '<?php echo $spod; ?>'/></td>
                <td><h3>Crokite Yeild</h3></td>
                <td><input name = 'crokYeild' type = 'text' class = 'textfield' id = 'crokYeild' value = '<?php echo $crok; ?>'/></td>
              </tr>
              <tr>
                <td><h3>Bistot Yeild</h3></td>
                <td><input name = 'bisYeild' type = 'text' class = 'textfield' id = 'bisYeild' value = '<?php echo $bistot; ?>'/></td>
                <td><h3>Arkonor Yeild</h3></td>
                <td><input name = 'arkYeild' type = 'text' class = 'textfield' id = 'arkYeild' value = '<?php echo $ark; ?>'/></td>
                <td><h3>Mercoxit Yeild</h3></td>
                <td><input name = 'mercYeild' type = 'text' class = 'textfield' id = 'mercYeild' value = '<?php echo $merc; ?>'/></td>
              </tr>
            </table>
            <table align = 'center'>
              <tr>
                <td><input type = 'submit' value = 'Make Changes'></td>
              </tr>
            </table>
          </form>
        </div>
      </div>
    </body>
  </html> 
```

CSS

```
 #sideContainer {float:left;}
#content {
  float:left;
  padding-left: 5px;
}
#content table {
  border-spacing:10;
  border-collapse:collapse;
}
#content h1 {
  vertical-align:top;
  height:40px; overflow:;
  color: #99CC00;
  margin: 0px 0px 5px;
  padding: 0px 0px 3px;
  font: bold 18px Verdana, Arial, Helvetica, sans-serif;
  border-bottom: 1px dashed #E6E8ED;
}
#content h2 {
  vertical-align:top;
  height:40px; overflow:;
  color: #336622;
  margin: 0px 0px 5px;
  padding: 0px 0px 3px;
  font: bold 24px Verdana, Arial, Helvetica, sans-serif;
  border-bottom: 1px dashed #E6E8ED;
}
#content h3 {
  text-align:bottom;
  height:30px; overflow:;
  color: #99CC00;
  margin: 0px 0px 5px;
  padding: 0px 0px 3px;
  font: bold 18px Verdana, Arial, Helvetica, sans-serif;
  border-bottom: 1px dashed #E6E8ED;
}
#content th {
  font-weight: bold;
  text-align: left;
}
#content a {
  color: #2D3954;
  font-size: 11px;
}
#content a:hover {
  color: #99CC00;
}
#userTable input{
  vertical-align:center;
  margin: 0px 0px 5px;
  padding: 0px 0px 3px;
  background: #ccffaa;
}
#vCode input{
  width: 10px;
}
#keyID input{
  width:100px;
}
#refining input{
  width:50px;
}

#sideTable {
  float:left;
  padding-left: 5px;
}

.err {
  color: #FF9900;
}

#navMain {
  margin-left:25px;
  color:#c3c3c3;
  font-family:Tahoma, Geneva, sans-serif;
}
#navMain h2{
  font-family:Trebuchet MS1, Helvetica, sans-serif;
} /*Change font of the title*/

#navMain ul{
  padding:0;
  margin:0;
  margin-left:25px;
  font-size:15;
  margin-right:20px;
} /*Reset the default padding/margin and set it as required*/

#navMain ul li a{
  font-size:15;
  text-decoration:none;
  color:#c3c3c3;
} /*Change color of link text and remove underline*/

#navMain ul li a:hover{
  color:#e0993e;
} /*Change color of hover text* 
```

边栏.html

```
<h2>Categories</h2>
<ul>
<li><a href="editUser-form.php">Edit Personal Info</a></li>
<li><a href="sellToCorp-form.php">Sell to Corp</a></li>
<li><a href="fleet-form.php">Fleet Log Parser</a></li>
<li><a href="theoreticalMining.php">Theoretical Mining</a></li>
<li><a href="theoreticalRefining.php">Theoretical Refining</a></li>
<li><a href="corpMail-form.php">Send Corp Mail - N/A</a></li>
<li><a href="setCorpRate-form.php">Set Corp Rate</a></li>
<li><a href="updateSkillList.php">Update Skills</a></li>
<li><a href="logout.php">logout</a></li>
</ul> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-13T11:08:38.773

您需要将 div 移动到 td 标签内。像这样的东西：

```
<div id='content'>some content is here
  <div id='userTable'>
    <table>
  <tr>
    <th>table header</th>
  </tr>
  <tr>
    <td>
      <div id='chars64'>
        <input type='text' value='1234567812345678123456781234567812345678123456781234567812345678'>
      </div>
    </td>
  </tr>
  <tr>
    <td>
      <div id='chars7'>
        <input type='text' value='1234567'>
      </div>
    </td>
  </tr>
  <tr>
    <td>
      <div id='chars4'>
        <input type='text' value='0.123'>
      </div>
    </td>
  </tr>
</table> 
```

这是它的 jsfiddle：http: [//jsfiddle.net/TM5Mk/](http://jsfiddle.net/TM5Mk/)

你也可以参考这些之前的讨论：

[div inside table](https://stackoverflow.com/questions/2974573/div-inside-table) [在表格单元格中放置一个 div](https://stackoverflow.com/questions/522492/placing-a-div-inside-a-table-cell)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-13T11:01:27.167

您没有有效的 HTML 表格。

您应该在`div`元素内包含`td`元素，然后设置输入样式。在元素`<div>`之前添加无效。`tr`

[***工作小提琴***](http://jsfiddle.net/jMqKe/)| | [***更新的工作小提琴***](http://jsfiddle.net/jMqKe/1/)

```
<div id = 'content'>
    some content is here
    <div id = 'userTable'>
        <table>
            <tr>
                <th>table header</th>
            </tr>
                <tr>
                    <td><div id = 'chars64'><input type = 'text' value = '1234567812345678123456781234567812345678123456781234567812345678'></div></td>
                    <td><div id = 'chars64'><input type = 'text' value = '1234567812345678123456781234567812345678123456781234567812345678'></div></td>
                    <td><div id = 'chars64'><input type = 'text' value = '1234567812345678123456781234567812345678123456781234567812345678'></div></td>
                    <td><div id = 'chars64'><input type = 'text' value = '1234567812345678123456781234567812345678123456781234567812345678'></div></td>
                </tr>
                <tr>
                    <td><div id = 'chars7'><input type = 'text' value = '1234567'</div</td>
                    <td><div id = 'chars7'><input type = 'text' value = '1234567'</div</td>
                    <td><div id = 'chars7'><input type = 'text' value = '1234567'</div</td>
                </tr>
                <tr>
                    <td><div id = 'chars4'><input type = 'text' value = '0.123'></div></td>
                    <td><div id = 'chars4'><input type = 'text' value = '0.123'></div></td>
                    <td><div id = 'chars4'><input type = 'text' value = '0.123'></div></td>
                </tr>
        </table>
    </div>
</div> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-13T11:02:06.377

我认为那是因为您的 HTML 是错误的。您可以将`<table>`元素放入`<div>`. 只需将输入包装在`<div>`.. 而不是整个`<tr>`. 这是：

```
<div id = "content">
    some content is here
    <div id = "userTable">
        <table>
            <tr>
                <th>table header</th>
            </tr>
                <tr>
                    <td> 
                        <div id = "chars64">
                            <input type = "text" value = "1234567812345678123456781234567812345678123456781234567812345678">
                        </div>
                    </td>  
                </tr>
                <tr>
                    <td> 
                        <div id = "chars7">
                            <input type = "text" value = "1234567">
                        </div>
                    </td>
                </tr>
                <tr>    
                    <td>
                        <div id = "chars4">
                            <input type = "text" value = "0.123"> 
                        </div>
                    </td>
                </tr>
        </table>
    </div>
</div> 
```

# r - 使用 Rmpfr 包将 bigq 转换为 mpfr

> ID：14302742
> 
> 赞同：0
> 
> 时间：2013-01-13T10:50:59.220
> 
> 标签：r, floating-accuracy, gmp

R 包的帮助文档`Rmpfr`声称，当参数为时，该`.bigq2mpfr()`函数使用正确表示所需的最小精度：`precB``NULL`

```
Description:

     Coerce from and to big integers (‘bigz’) and ‘mpfr’ numbers.

     Further, coerce from big rationals (‘bigq’) to ‘mpfr’ numbers.

Usage:

     .bigz2mpfr(x, precB = NULL)
     .bigq2mpfr(x, precB = NULL)
     .mpfr2bigz(x, mod = NA)

Arguments:

       x: an R object of class ‘bigz’, ‘bigq’ or ‘mpfr’ respectively.

   precB: precision in bits for the result.  The default, ‘NULL’, means
          to use the _minimal_ precision necessary for correct
          representation. 
```

然而，当转换`31/3`一个得到一个不好的近似值时：

```
> x <- as.bigq(31,3)
> .bigq2mpfr(x)
1 'mpfr' number of precision  8   bits 
[1] 10.31 
```

通过查看`.bigq2mpfr()`函数内部，我们可以看到详细的过程：

```
N <- numerator(x)
D <- denominator(x)
if (is.null(precB)) {
    eN <- frexpZ(N)$exp
    eD <- frexpZ(D)$exp
    precB <- eN + eD + 1L
}
.bigz2mpfr(N, precB)/.bigz2mpfr(D, precB) 
```

首先我不明白为什么`precB`采取如下方式。的`exp`输出`frexpZ()`是二进制分解中的指数：

```
> frexpZ(N)
$d
[1] 0.96875

$exp
[1] 5

> 0.96875*2^5
[1] 31 
```

在这里，我们得到`precB=8`，结果与以下内容相同：

```
> mpfr(31, precBits=8)/mpfr(3, precBits=8)
1 'mpfr' number of precision  8   bits 
[1] 10.31 
```

我的印象是应该替换`precB`为，`2^precB`但我想就此获得一些建议：

```
> mpfr(31, precBits=8)/mpfr(3, precBits=2^8)
1 'mpfr' number of precision  256   bits 
[1] 10.33333333333333333333333333333333333333333333333333333333333333333333333333329
> mpfr(31, precBits=8)/mpfr(3, precBits=2^9)
1 'mpfr' number of precision  512   bits 
[1] 10.3333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333329
> mpfr(31, precBits=8)/mpfr(3, precBits=2^7)
1 'mpfr' number of precision  128   bits 
[1] 10.33333333333333333333333333333333333332 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T16:02:53.073

我得到（注意我最初创建的区别）：

```
Rgames> fooq<-as.bigq(31/3)
Rgames> fooq
Big Rational ('bigq') :
[1] 5817149518686891/562949953421312
Rgames> .bigq2mpfr(fooq)
1 'mpfr' number of precision  104   bits 
[1] 10.3333333333333339254522798000835 
```

所有这些都强烈地向我表明，您的`bigq`数字的精度实际上是零位小数，即“31”和“3”中的每一个都具有这种精度。因此，您的`mpfr`转换非常正确，可以为您提供小数点后一位精度的结果。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-02-22T15:12:14.030

这已在更新版本的软件包中得到纠正：

```
> x <- as.bigq(31,3)
> .bigq2mpfr(x)
1 'mpfr' number of precision  128   bits 
[1] 10.33333333333333333333333333333333333332 
```

# r - 在 R 中创建对序列的好方法？

> ID：14302743
> 
> 赞同：1
> 
> 时间：2013-01-13T10:51:02.367
> 
> 标签：r

我想使用 runif 在 R 中创建一系列随机二维点。有什么好的方法可以做到这一点？

这是我当前的实现（不起作用）

```
getpoints <- function(n)
  {
    t <- 1:n;
    for (i in 1:n)
      {
        t[i] <- runif(2,-1,1)
      }
    return (t)
  } 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-13T10:57:45.473

```
n <- 200
o <- matrix(runif(2*n, min = -1, max = 1), ncol = 2) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-13T10:57:37.910

```
 n <- 5
 cbind(runif(n,-1,1),runif(n,-1,1))
            [,1]       [,2]
[1,] -0.68434317 -0.7772889
[2,] -0.91200792 -0.6408075
[3,] -0.01888610  0.7350491
[4,]  0.01782097  0.9674700
[5,] -0.56707264 -0.9991566 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-13T11:27:19.403

只需添加您在这里的众多答案。这个，像@Arun's 很容易在必要时处理超过 2 列。：

```
replicate(2, runif(100)) 
```

它可能几乎是基准测试时间。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-01-13T13:44:47.547

为了概述这个线程，首先我将展示与所使用的几种方法相关的速度（这样您就可以得出自己的结论来判断哪种方法最好），然后我将向您展示如何使用函数；即您可能希望您的功能的方式。

```
n <- 1000000

> system.time(cbind(runif(n, -1, 1), runif(n, -1, 1)))
   user  system elapsed 
   0.28    0.03    0.31 
> system.time(matrix(runif(2*n, min = -1, max = 1), ncol = 2))
   user  system elapsed 
   0.32    0.00    0.33 
> system.time(replicate(2, runif(n, -1, 1)))
   user  system elapsed 
   0.26    0.02    0.35 
```

这是函数和时间基准：

```
getPoints <- function (N) {
  pointMatrix <- matrix(1, nrow = 1000000, ncol = 2) 
  for (i in 1:N) {
    pointMatrix[i, ] <- runif(2, -1, 1) # it needs to run for all columns
  }
}

> system.time(getPoints(n))
   user  system elapsed 
  17.59    0.04   19.94 
> 
```

# ssis - SSIS 中的脚本组件显示为空的“VstaProjects”解决方案

> ID：14302749
> 
> 赞同：2
> 
> 时间：2013-01-13T10:51:40.417
> 
> 标签：ssis, sql-server-2012, script-component

我的 Windows 8 机器上安装了 SQL Server 2012 客户端工具。我目前正在编写一个包含很多脚本任务的 SSIS 项目。当我双击脚本任务，然后单击*编辑脚本...*按钮时，我观察到以下内容：

*   预期结果：脚本任务项目加载到 Visual Studio 2010 shell 中
*   实际结果：在 Visual Studio 2010 shell 中打开空解决方案“VstaProjects”

直到最后一天我都得到了预期的结果。我不知道是什么触发了这个问题。我重新安装了 SQL Server 2012 客户端工具，它确实解决了问题，但只是暂时的，问题再次出现，现在工作非常令人沮丧。

[这](http://social.msdn.microsoft.com/Forums/en-US/sqlintegrationservices/thread/c2fa4ac0-0852-4018-817e-d30933ce8b4d)与我的问题相同，但我没有看到可靠的解决方案。

有人可以帮我解决这个问题吗？

# asp.net-mvc-3 - 动态设置 UpdateTargetId 或更改 UpdateTargetId

> ID：14302750
> 
> 赞同：0
> 
> 时间：2013-01-13T10:51:47.450
> 
> 标签：asp.net-mvc-3

我有一个视图，我在哪里使用：-

```
@using (Ajax.BeginForm("Edit", "Files", new AjaxOptions
{
HttpMethod = "POST",
InsertionMode = InsertionMode.Replace,
UpdateTargetId = "divFile-" + Model.FileId,
OnSuccess = "editPrivilegeLevelForFileSuccess",
OnFailure = "editPrivilegeLevelForFileFailure"
}))
@Html.HiddenFor(model => model.FileId) 
```

这里的问题是UpdateTargetId：-

我的模型目前没有 FileId 值。我正在通过 jquery 方法设置隐藏字段的值，并且效果很好。

```
$("#FileId").val(fileId); 
```

但是如何在 UpdateTargetId 中设置相同的值？

谢谢你

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T12:00:25.533

如果仅在客户端知道此属性的值，则可以在 OnSuccess 回调中执行此操作。因此，`UpdateTargetId`从您的 AjaxOptions 中删除该属性，然后在`editPrivilegeLevelForFileSuccess`处理程序中您可以手动更新相应的部分：

```
function editPrivilegeLevelForFileSuccess(result) {
    var fileId = $('#FileId').val();
    $('#divFile-' + fileId).html(result);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-01-28T09:41:56.277

好吧，如果您查看如何从 Ajax.BeginForm 生成表单标记：

```
<form id="form0" action="/Redirects/Manage/List" method="post" novalidate="novalidate" data-ajax-update="#page" data-ajax-mode="replace" data-ajax="true"> 
```

您可以使用 jquery 来更改它，例如在下拉列表的 OnChange 事件中：

```
@Html.DropDownList("language", new SelectList(@Model.Locales, "Key", "Value"), new { onchange = "$(this.form).attr('data-ajax-update','#nowhere');$(this.form).submit();" } 
```

# c++ - 在二叉树中搜索

> ID：14302754
> 
> 赞同：2
> 
> 时间：2013-01-13T10:52:12.850
> 
> 标签：c++, search, binary-search-tree

我编写了以下函数来搜索存储整数值的二叉树中的值（该函数是更大程序的一部分）：

```
bool tree::search(int num)       //the function belongs to class 'tree'
{
   node *temp=head;      //'head' is pointer to root node

   while(temp!=NULL)
   {
      if(temp->data==num)
         break;

      if(num>temp->data)
         temp=temp->right;

      if(num<temp->data)
         temp=temp->left;
   }

   if(temp==NULL)
      return false;
   else if(temp->data==num)
         return true;   
} 
```

问题是：当我搜索树中存在的值时，它运行良好。但是如果我搜索树中不存在的值，程序就会挂起，我必须关闭它。还有一件事-我知道我们可以通过将 node *temp 作为参数传递来递归地实现搜索功能，而不是在内部声明它，我已经这样做了，这导致程序正确运行，但我想知道问题出在哪里在上面的代码中。

我在这里给出完整的程序，以防万一它使故障查找更容易（请注意，我只编写了两个函数）：

```
#include<iostream>
using namespace std;

struct node
{
int data;
node *left;
node *right;
};

class tree
{
public:
    node *head;    //pointer to root
    int count;     //stores number of elements in tree
    tree();
    void addnode(int);
    void deletenode(int);
    bool search(int);
    int minimum();
    int maximum();
    void inorder();
    void preorder();
    void postorder();
    void printtree();
    int mthlargest();     //finds 'm'th largest element
    int mthsmallest();    //finds 'm'th smallest element
    void convert();       //converts binary tree to linked list
};

tree::tree()
{
   head=NULL;
   count =0;
}

void tree::addnode(int num)
{
   node *temp= new node;
   temp->data=num;
   temp->left=NULL;
   temp->right=NULL;

   node **ptr=&head;          //double pointer

   while(*ptr!=NULL)
   {
      if(num>(*ptr)->data)
         ptr=&((*ptr)->right);

      if(num<(*ptr)->data)
         ptr=&((*ptr)->left);
   }

   *ptr=temp;
}

bool tree::search(int num)
{
   node *temp=head;

   while(temp!=NULL)
   {
      if(temp->data==num)
         break;

      if(num>temp->data)
         temp=temp->right;

      if(num<temp->data)
         temp=temp->left;
   }

   if(temp==NULL)
      return false;
   else if(temp->data==num)
      return true;   
}    

int main()
{
   tree ob;
   ob.addnode(2);

   ob.search(2);

   ob.search(3);

   ob.search(-1);
   ob.search(2);
   cout<<endl<<endl;

   system("pause");
   return 0;
} 
```

旁注：我正在使用 Dev C++ 编译器和 Windows 7 操作系统。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-13T10:59:02.090

放一个`else`，你的问题就会消失。

因为在`temp = temp->right;`您必须`temp`再次检查但在您的原始代码中之后，您会立即测试`temp->data`这可能不是一个有效的指针。

```
bool tree::search(int num)
{
    node *temp = head;

    while (temp != NULL)
    {
        if (temp->data == num)
            break;

        if (num > temp->data)
            temp = temp->right;
        else                  //  <--- Put this 'else' here
        if (num < temp->data)
            temp = temp->left;
    }

    if (temp == NULL)
        return false;

    if (temp->data == num)
        return true;

    return false;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-13T16:34:43.137

# `std::set`

使用[`std::set`](http://en.cppreference.com/w/cpp/container/set); 它基本上是 STL 的二叉树。如果要搜索某些内容，可以使用[`count`](http://en.cppreference.com/w/cpp/container/set/count),[`find`](http://en.cppreference.com/w/cpp/container/set/find)或[`lower_bound`](http://en.cppreference.com/w/cpp/container/set/lower_bound)。

实现基本数据结构是很好的练习，但在生产中，首先尝试使用 STL，因为它们是由具有相关编译器/平台特定知识的专业人员实现的。[Boost](http://www.boost.org/)是另一组很棒的数据结构和常用习语。

# android - ArrayIndexOutOfBoundException 仅当数组长度等于 1 时

> ID：14302757
> 
> 赞同：0
> 
> 时间：2013-01-13T10:52:34.463
> 
> 标签：android, arrays, listview, cursor, adapter

我有一个收集 rawQuery 结果的数组。它工作得很好，但是当它只有一个结果时会抛出这个异常。

```
public String [][] getList() {
        SQLiteDatabase db = this.getWritableDatabase();
        String [][] data;
        Cursor c = db.rawQuery("SELECT nombre FROM productos GROUP BY " +
            "nombre ORDER BY nombre", null);
        if (c.moveToFirst()) {
            data = new String[c.getCount()][1];
            int i = 0; char last = 1;
            do {
                data[i][0]=c.getString(c.getColumnIndex("nombre"));
                if(data[i][0].charAt(0)!=last) {
                            char [] a = {data[i][0].charAt(0)};
                String b = new String(a); 
                            data[i][1]=b; 
                            last = a[0];} else {
                    data[i][1]=null;
                }
                i++;
            } while ( c.moveToNext());
            db.close();
            return data;
        }
        data=new String[1][1]; data[0][0]="-1";
        db.close();
        return data;
    } 
```

该方法向自定义列表适配器提供了构建带有分隔符的 listView 所需的信息（这就是我在第二列中使用字符的原因）。你能帮助我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-13T10:55:03.307

您正在初始化`data`一个数组`new String[c.getCount()][1]`。这意味着最高有效的第二个下标是 0，而不是 1。您需要一个双元素数组：`new String[c.getCount()][2]`

# shell - Shell脚本检查变量是否包含空格

> ID：14302764
> 
> 赞同：1
> 
> 时间：2013-01-13T10:53:24.133
> 
> 标签：shell, unix

我是 shell 脚本的新手。我有一个包含特定文件路径的变量。我想检查这个变量中是否有空格。

我试过了

```
 if [[ ${VAR} = "${VAR% *}" ]] ; then
      echo "contains spaces"
  else
      echo "doesnot contain spaces"
  fi 
```

但它不起作用。任何帮助都会非常显着。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-14T02:09:09.510

或者

```
case ${VAR} in
  *\ * ) echo "VAR=$VAR has at least one space char" ;;
  * ) echo "VAR=$VAR has no space chars" ;;
esac 
```

IHTH

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-13T10:56:09.697

很好的解决方案，但您需要颠倒条件。`${VAR% *}`剥离到最后一个空格，所以如果它等于`${VAR}`则没有任何空格。

如果它是空`${VAR}`的，你也应该逃避第一个。`""`

```
if [[ "${VAR}" == "${VAR% *}" ]] ; then
    echo "doesn't contains spaces"
else
    echo "contains spaces"
fi 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-13T11:24:42.217

另一种解决方案：

```
echo $VAR | grep ".*\s.*" && echo "Space exists" || echo "No space exists" 
```

# php - 在 Dreamweaver 和 phpmyadmin 中更新许多不同的用户

> ID：14302765
> 
> 赞同：1
> 
> 时间：2013-01-13T10:53:35.220
> 
> 标签：php, mysql, database, phpmyadmin

我有一个用户表，其中包含以下列：用户 ID、用户名、密码、电子邮件、agreement_1、comment_1、agree_2、comment_2，............下面是由 DREAMWEAVER 生成的代码，它将限制对页面的访问，您只有在登录后才能访问。它还使用由 DREAMWEAVER 创建的记录集查询更新用户表

```
<?php 
if (!isset($_SESSION)) { session_start();
}
$MM_authorizedUsers = "";
$MM_donotCheckaccess = "true";

 // *** Restrict Access To Page: Grant or deny access to this page
function isAuthorized($strUsers, $strGroups, $UserName, $UserGroup) { 
 // For security, start by assuming the visitor is NOT authorized. 
 $isValid = False; 

// When a visitor has logged into this site, the Session variable MM_Username setequal to their username. 
// Therefore, we know that a user is NOT logged in if that Session variable is blank. 
if (!empty($UserName)) { 
// Besides being logged in, you may restrict access to only certain users based on an   ID established when they login. 
// Parse the strings into arrays. 
$arrUsers = Explode(",", $strUsers); 
$arrGroups = Explode(",", $strGroups); 
if (in_array($UserName, $arrUsers)) { 
  $isValid = true; 
} 
// Or, you may restrict access to only certain users based on their username. 
if (in_array($UserGroup, $arrGroups)) { 
  $isValid = true; 
} 
if (($strUsers == "") && true) { 
  $isValid = true; 
} 
} 
return $isValid; 
}

 $MM_restrictGoTo = "login.php";
 if (!((isset($_SESSION['MM_Username'])) && (isAuthorized("",$MM_authorizedUsers, $_SESSION['MM_Username'], $_SESSION['MM_UserGroup'])))) {   
 $MM_qsChar = "?";
 $MM_referrer = $_SERVER['PHP_SELF'];
 if (strpos($MM_restrictGoTo, "?")) $MM_qsChar = "&";
 if (isset($_SERVER['QUERY_STRING']) && strlen($_SERVER['QUERY_STRING']) > 0) 
 $MM_referrer .= "?" . $_SERVER['QUERY_STRING'];
 $MM_restrictGoTo = $MM_restrictGoTo. $MM_qsChar . "accesscheck=" .   urlencode($MM_referrer);
 header("Location: ". $MM_restrictGoTo); 
 exit;
 }
 ?>
 <?php
 if (!function_exists("GetSQLValueString")) {
 function GetSQLValueString($theValue, $theType, $theDefinedValue = "", $theNotDefinedValue = "") 
{
if (PHP_VERSION < 6) {
$theValue = get_magic_quotes_gpc() ? stripslashes($theValue) : $theValue;
}

$theValue = function_exists("mysql_real_escape_string") ?  mysql_real_escape_string($theValue) : mysql_escape_string($theValue);

 switch ($theType) {
 case "text":
  $theValue = ($theValue != "") ? "'" . $theValue . "'" : "NULL";
  break;    
 case "long":
case "int":
  $theValue = ($theValue != "") ? intval($theValue) : "NULL";
  break;
case "double":
  $theValue = ($theValue != "") ? doubleval($theValue) : "NULL";
  break;
case "date":
  $theValue = ($theValue != "") ? "'" . $theValue . "'" : "NULL";
  break;
case "defined":
  $theValue = ($theValue != "") ? $theDefinedValue : $theNotDefinedValue;
  break;
 }
 return $theValue;
 }
 }

 $editFormAction = $_SERVER['PHP_SELF'];
 if (isset($_SERVER['QUERY_STRING'])) {
 $editFormAction .= "?" . htmlentities($_SERVER['QUERY_STRING']);
 }

 if ((isset($_POST["MM_update"])) && ($_POST["MM_update"] == "form1")) {
 $updateSQL = sprintf("UPDATE users SET Agree_50=%s, comment_50=%s, Agree_51=%s,    comment_51=%s, Agree_52=%s, comment_52=%s, Agree_53=%s, comment_53=%s, Agree_54=%s, comment_54=%s, Agree_55=%s, comment_55=%s, Agree_56=%s, comment_56=%s, Agree_57=%s, comment_57=%s, Agree_58=%s, comment_58=%s, Agree_59=%s, comment_59=%s, Agree_60=%s, comment_60=%s, Agree_61=%s, comment_61=%s, Agree_62=%s, comment_62=%s, Agree_63=%s, comment_63=%s, Agree_64=%s, comment_64=%s, Agree_65=%s, comment_65=%s, Agree_66=%s, comment_66=%s, Agree_67=%s, comment_67=%s, Agree_68=%s, comment_68=%s, Agree_69=%s, comment_69=%s, Agree_70=%s, comment_70=%s, Agree_71=%s, comment_71=%s, Agree_72=%s, comment_72=%s, Agree_73=%s, comment_73=%s, Agree_74=%s, comment_74=%s, Agree_75=%s, comment_75=%s, Agree_76=%s, comment_76=%s, Agree_77=%s, comment_77=%s, Agree_78a=%s, comment_78a=%s, Agree_79a=%s, comment_79a=%s, Agree_78b=%s, comment_78b=%s, Agree_79b=%s, comment_79b=%s, Agree_80=%s, comment_80=%s, Agree_81=%s, comment_81=%s, Agree_82=%s, comment_82=%s, Agree_83=%s, comment_83=%s, Agree_84=%s, comment_84=%s, Agree_85=%s, comment_85=%s, Agree_86=%s, comment_86=%s, Agree_87=%s, comment_87=%s, Agree_88=%s, comment_88=%s, Agree_89=%s, comment_89=%s, Agree_90=%s, comment_90=%s, Agree_91=%s, comment_91=%s, Agree_92=%s, comment_92=%s, Agree_93=%s, comment_93=%s, Agree_94=%s, comment_94=%s, Agree_95=%s, comment_95=%s, Agree_96=%s, comment_96=%s, Agree_97=%s, comment_97=%s, Agree_98=%s, comment_98=%s, Agree_99=%s, comment_99=%s, Agree_100=%s, comment_100=%s WHERE id=%s",
                   GetSQLValueString($_POST['grp_50'], "text"),
                   GetSQLValueString($_POST['text_50'], "text"),
                   GetSQLValueString($_POST['grp_51'], "text"),
                   GetSQLValueString($_POST['text_51'], "text"),
                   GetSQLValueString($_POST['grp_52'], "text"),
                   GetSQLValueString($_POST['text_52'], "text"),
                   GetSQLValueString($_POST['grp_53'], "text"),
                   GetSQLValueString($_POST['text_53'], "text"),
                   GetSQLValueString($_POST['grp_54'], "text"),
                   GetSQLValueString($_POST['text_54'], "text"),
                   GetSQLValueString($_POST['grp_55'], "text"),
                   GetSQLValueString($_POST['text_55'], "text"),
                   GetSQLValueString($_POST['grp_56'], "text"),
                   GetSQLValueString($_POST['text_56'], "text"),
                   GetSQLValueString($_POST['grp_57'], "text"),
                   GetSQLValueString($_POST['text_57'], "text"),
                   GetSQLValueString($_POST['grp_58'], "text"),
                   GetSQLValueString($_POST['text_58'], "text"),
                   GetSQLValueString($_POST['grp_59'], "text"),
                   GetSQLValueString($_POST['text_59'], "text"),
                   GetSQLValueString($_POST['grp_60'], "text"),
                   GetSQLValueString($_POST['text_60'], "text"),
                   GetSQLValueString($_POST['grp_61'], "text"),
                   GetSQLValueString($_POST['text_61'], "text"),
                   GetSQLValueString($_POST['grp_62'], "text"),
                   GetSQLValueString($_POST['text_62'], "text"),
                   GetSQLValueString($_POST['grp_63'], "text"),
                   GetSQLValueString($_POST['text_63'], "text"),
                   GetSQLValueString($_POST['grp_64'], "text"),
                   GetSQLValueString($_POST['text_64'], "text"),
                   GetSQLValueString($_POST['grp_65'], "text"),
                   GetSQLValueString($_POST['text_65'], "text"),
                   GetSQLValueString($_POST['grp_66'], "text"),
                   GetSQLValueString($_POST['text_66'], "text"),
                   GetSQLValueString($_POST['grp_67'], "text"),
                   GetSQLValueString($_POST['text_67'], "text"),
                   GetSQLValueString($_POST['grp_68'], "text"),
                   GetSQLValueString($_POST['text_68'], "text"),
                   GetSQLValueString($_POST['grp_69'], "text"),
                   GetSQLValueString($_POST['text_69'], "text"),
                   GetSQLValueString($_POST['grp_70'], "text"),
                   GetSQLValueString($_POST['text_70'], "text"),
                   GetSQLValueString($_POST['grp_71'], "text"),
                   GetSQLValueString($_POST['text_71'], "text"),
                   GetSQLValueString($_POST['grp_72'], "text"),
                   GetSQLValueString($_POST['text_72'], "text"),
                   GetSQLValueString($_POST['grp_73'], "text"),
                   GetSQLValueString($_POST['text_73'], "text"),
                   GetSQLValueString($_POST['grp_74'], "text"),
                   GetSQLValueString($_POST['text_74'], "text"),
                   GetSQLValueString($_POST['grp_75'], "text"),
                   GetSQLValueString($_POST['text_75'], "text"),
                   GetSQLValueString($_POST['grp_76'], "text"),
                   GetSQLValueString($_POST['text_76'], "text"),
                   GetSQLValueString($_POST['grp_77'], "text"),
                   GetSQLValueString($_POST['text_77'], "text"),
                   GetSQLValueString($_POST['grp_78a'], "text"),
                   GetSQLValueString($_POST['text_78a'], "text"),
                   GetSQLValueString($_POST['grp_79a'], "text"),
                   GetSQLValueString($_POST['text_79a'], "text"),
                   GetSQLValueString($_POST['grp_78b'], "text"),
                   GetSQLValueString($_POST['text_78b'], "text"),
                   GetSQLValueString($_POST['grp_79b'], "text"),
                   GetSQLValueString($_POST['text_79b'], "text"),
                   GetSQLValueString($_POST['grp_80'], "text"),
                   GetSQLValueString($_POST['text_80'], "text"),
                   GetSQLValueString($_POST['grp_81'], "text"),
                   GetSQLValueString($_POST['text_81'], "text"),
                   GetSQLValueString($_POST['grp_82'], "text"),
                   GetSQLValueString($_POST['text_82'], "text"),
                   GetSQLValueString($_POST['grp_83'], "text"),
                   GetSQLValueString($_POST['text_83'], "text"),
                   GetSQLValueString($_POST['grp_84'], "text"),
                   GetSQLValueString($_POST['text_84'], "text"),
                   GetSQLValueString($_POST['grp_85'], "text"),
                   GetSQLValueString($_POST['text_85'], "text"),
                   GetSQLValueString($_POST['grp_86'], "text"),
                   GetSQLValueString($_POST['text_86'], "text"),
                   GetSQLValueString($_POST['grp_87'], "text"),
                   GetSQLValueString($_POST['text_87'], "text"),
                   GetSQLValueString($_POST['grp_88'], "text"),
                   GetSQLValueString($_POST['text_88'], "text"),
                   GetSQLValueString($_POST['grp_89'], "text"),
                   GetSQLValueString($_POST['text_89'], "text"),
                   GetSQLValueString($_POST['grp_90'], "text"),
                   GetSQLValueString($_POST['text_90'], "text"),
                   GetSQLValueString($_POST['grp_91'], "text"),
                   GetSQLValueString($_POST['text_91'], "text"),
                   GetSQLValueString($_POST['grp_92'], "text"),
                   GetSQLValueString($_POST['text_92'], "text"),
                   GetSQLValueString($_POST['grp_93'], "text"),
                   GetSQLValueString($_POST['text_93'], "text"),
                   GetSQLValueString($_POST['grp_94'], "text"),
                   GetSQLValueString($_POST['text_94'], "text"),
                   GetSQLValueString($_POST['grp_95'], "text"),
                   GetSQLValueString($_POST['text_95'], "text"),
                   GetSQLValueString($_POST['grp_96'], "text"),
                   GetSQLValueString($_POST['text_96'], "text"),
                   GetSQLValueString($_POST['grp_97'], "text"),
                   GetSQLValueString($_POST['text_97'], "text"),
                   GetSQLValueString($_POST['grp_98'], "text"),
                   GetSQLValueString($_POST['text_98'], "text"),
                   GetSQLValueString($_POST['grp_99'], "text"),
                   GetSQLValueString($_POST['text_99'], "text"),
                   GetSQLValueString($_POST['grp_100'], "text"),
                   GetSQLValueString($_POST['text_100'], "text"),
                   GetSQLValueString($_POST['id1'], "int"));

      mysql_select_db($database_NAWFIA_1, $NAWFIA_1);
     $Result1 = mysql_query($updateSQL, $NAWFIA_1) or die(mysql_error());

    $updateGoTo = "draft_chapter3_success.php";
   if (isset($_SERVER['QUERY_STRING'])) {
   $updateGoTo .= (strpos($updateGoTo, '?')) ? "&" : "?";
   $updateGoTo .= $_SERVER['QUERY_STRING'];
   }
   header(sprintf("Location: %s", $updateGoTo));
  }

  mysql_select_db($database_NAWFIA_1, $NAWFIA_1);
 $query_Recordset1 = "SELECT id, Agree_50, comment_50, Agree_51, comment_51, Agree_52, comment_52, Agree_53, comment_53, Agree_54, comment_54, Agree_55, comment_55, Agree_56, comment_56, Agree_57, comment_57, Agree_58, comment_58, Agree_59, comment_59, Agree_60, comment_60, Agree_61, comment_61, Agree_62, comment_62, Agree_63, comment_63, Agree_64, comment_64, Agree_65, comment_65, Agree_66, comment_66, Agree_67, comment_67, Agree_68, comment_68, Agree_69, comment_69, Agree_70, comment_70, Agree_71, comment_71, Agree_72, comment_72, Agree_73, comment_73, Agree_74, comment_74, Agree_75, comment_75, Agree_76, comment_76, Agree_77, comment_77, Agree_78a, comment_78a, Agree_79a, comment_79a, Agree_78b, comment_78b, Agree_79b, comment_79b, Agree_80, comment_80, Agree_81, comment_81, Agree_82, comment_82, Agree_83, comment_83, Agree_84, comment_84, Agree_85, comment_85, Agree_86, comment_86, Agree_87, comment_87, Agree_88, comment_88, Agree_89, comment_89, Agree_90, comment_90, Agree_91, comment_91, Agree_92, comment_92, Agree_93, comment_93, Agree_94, comment_94, Agree_95, comment_95, Agree_96, comment_96, Agree_97, comment_97, Agree_98, comment_98, Agree_99, comment_99, Agree_100, comment_100 FROM users WHERE users.id";
 $Recordset1 = mysql_query($query_Recordset1, $NAWFIA_1) or die(mysql_error());
  $row_Recordset1 = mysql_fetch_assoc($Recordset1);
  $totalRows_Recordset1 = mysql_num_rows($Recordset1);
  ?> 
```

这行得通。当我使用用户 id 1 登录时，表的评论行更新成功，但是当我注销并使用另一个用户登录时，用户 id 可能是 2 或 3，它仍然会更新用户 ID 1。请我需要帮助关于如何更新任何登录用户的行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T11:03:59.717

1.  您需要检查或确保发布的值是否`$id1`与您的 userId 对应。
2.  `WHERE id=%s`id 是整数，你可以使用`%d`.
3.  不推荐使用 mysql_query（不推荐使用，使用 PDO）。

建议在用户登录后将用户 ID 存储在会话变量中，以这样的方式

```
$_SESSION['user_id'] = $userId; 
```

并在更新查询中使用相同的内容。

# vim - 在 ScreenShellFocus 之后使用屏幕插件时将焦点返回到 vim？

> ID：14302766
> 
> 赞同：0
> 
> 时间：2013-01-13T10:53:44.067
> 
> 标签：vim, plugins, gnu-screen

[screen 插件](http://www.vim.org/scripts/script.php?script_id=2711)将vim 变成了一种梦幻般的东西，只是它要好得多，因为即使您有多个缓冲区和这些缓冲区中的特定文本，您也可以更好地控制发送的内容。

要按照我的环境设置，只需使用 vim 安装屏幕，然后在命令行中，执行`screen`，到达 shell，然后输入 vim。用它编辑某种 shell 脚本，然后在`:ScreenShell *shell type here, eg python/bash/irb*`下面生成一个 shell。如果没有选择，您可以使用`:ScreenShellSend`将视觉选择的文本发送到 shell 或整个文件。

我的问题是，假设我想重新启动我正在使用这个插件运行的 shell 并向它发送一些文本。我需要做的是`:ScreenShellFocus`，调用exit，然后重新启动它。但随后我需要能够返回到我正在影响的 shell 正上方的同一个 vim 会话。我意识到我可以使用 screen 来进入 vim 会话，但我现在唯一能做到的方法是用 ^a 1 选择它，它实际上只替换了下部，应该是外壳的那个，正在编辑的 vim 缓冲区。这很愚蠢，因为现在您在 vim 缓冲区之上有 vim 缓冲区。

所以我的问题是，如何在完成 :ScreenShellFocus 之后将光标返回到上面的 vim 会话？

（是的，我知道我杀死和重新启动 shell 的示例可能会被其他逻辑规避，但我对 GNU screen 实用程序并不熟悉，我认为有一种方法可以做到这一点，我认为这可以保留工作流程程序员）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T12:36:46.193

```
<C-a><Tab> 
```

是用于`screen`循环“区域”的映射。由于您只有两个，因此它将焦点转移到另一个区域。

由于您正在有效地使用`screen`，您应该学习如何使用它来使这个插件真正有用。

```
$ man screen 
```

# c# - wmi 不执行进程

> ID：14302768
> 
> 赞同：0
> 
> 时间：2013-01-13T10:54:08.500
> 
> 标签：c#, wmi, remote-access, remote-desktop, wmi-service

好吧，我正在尝试在远程计算机上运行“记事本”（例如），这是我的代码：

```
object[] theProcessToRun = { "notepad.exe" };
ConnectionOptions theConnection = new ConnectionOptions();
theConnection.Username = "My UserName";
theConnection.Password = "My Password";
ManagementScope theScope = new ManagementScope("\\\\" + ipAddress + "\\root\\cimv2", theConnection);
ManagementClass theClass = new ManagementClass(theScope, new ManagementPath("Win32_Process"), new ObjectGetOptions());
theClass.InvokeMethod("Create", theProcessToRun); 
```

（我能够连接到远程计算机）。什么都没有发生 - 程序正确退出，但遥控器上没有运行任何东西。

有任何想法吗？

谢谢！

# c# - 将当前单元格选择更改为行选择

> ID：14302775
> 
> 赞同：0
> 
> 时间：2013-01-13T10:54:38.520
> 
> 标签：c#, winforms, datagridview

我有一个 Windows 窗体，其中我们有一个`DataGridView`. 它的属性是单元格选择，我有`ContextMenustrip`一个菜单，其中有一个名为全选的菜单，当单击全选时，它应该`DataGridView`将所选单元格的属性更改为，`FullRowSelect`并且选择应该在我单击的同一行上. 问题是当我单击一个单元格时，默认属性是单元格选择，当我单击选择时，所有`ContextMenustrip`选定的单元格都没有被选中，我必须重新选择我想要的行，当表单打开时，当我单击时在特定单元格上，当我单击选择所有`ContextMenustrip`被单击时，应该选择我之前单击单元格的同一行，这是我的代码。

```
private void selectAllToolStripMenuItem_Click(object sender, EventArgs e)
{
    dataGridView1.SelectionMode = DataGridViewSelectionMode.FullRowSelect;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-13T11:06:18.423

如果我正确阅读了您的问题，您希望在单击上下文菜单的“全选”选项时选择整行。如果这是正确的，您可以尝试：

```
dataGridView1.SelectedCells[0].OwningRow.Selected = true; 
```

或者

```
foreach (DataGridViewCell cell in dataGridView1.SelectedCells)
    cell.OwningRow.Selected = true; 
```

您需要先删除以下行：

```
dataGridView1.SelectionMode = DataGridViewSelectionMode.FullRowSelect; 
```

上面的行将 DataGridView 置于全行选择模式，其中 SelectedCells 属性将不会被使用，然后当您单击上下文菜单中的 Select All 选项时，您将看到以下异常。

```
Index was out of range. Must be non-negative and less than the size of the collection. 
```

整个函数应该是这样的：

```
private void selectAllToolStripMenuItem_Click(object sender, EventArgs e)
{
    foreach (DataGridViewCell cell in dataGridView1.SelectedCells)
        cell.OwningRow.Selected = true;
} 
```

请注意，在右键单击以调出上下文菜单*之前*，用户需要（左）单击要选择其行的单元格。否则，选择不会改变，并且之前选择的单元格的行将被选中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-13T11:24:12.190

*在更改选择模式之前*获取选定的单元格，并在更改选择模式*后*选择这些单元格的行：

```
var selectedCells = dataGridView1.SelectedCells;            
dataGridView1.SelectionMode = DataGridViewSelectionMode.FullRowSelect;

foreach (DataGridViewCell cell in selectedCells)            
    dataGridView1.Rows[cell.RowIndex].Selected = true; 
```

为什么你必须这样做？因为`DataGridView`控制清除选择模式更改时的选择。请参阅msnd中有关[SelectionMode属性的备注：](http://msdn.microsoft.com/en-us/library/system.windows.forms.datagridview.selectionmode.aspx)

> 更改 SelectionMode 属性的值会清除当前选择。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-13T11:32:36.340

```
 private void employeesDataGridView_MouseUp(object sender, MouseEventArgs e)
    {
        DataGridView.HitTestInfo hitTestInfo;
        if (e.Button == MouseButtons.Right)
        {
            hitTestInfo = employeesDataGridView.HitTest(e.X, e.Y);
            if (hitTestInfo.Type == DataGridViewHitTestType.RowHeader || hitTestInfo.Type == DataGridViewHitTestType.Cell)
            {
                if (hitTestInfo.ColumnIndex != -1)
                    employeesDataGridView.CurrentCell = employeesDataGridView[hitTestInfo.ColumnIndex, hitTestInfo.RowIndex];
                contextMenuStrip1.Show(employeesDataGridView, employeesDataGridView.PointToClient(System.Windows.Forms.Cursor.Position));
            }
        }       
    }

    private void selectAllToolStripMenuItem_Click(object sender, EventArgs e)
    {
        employeesDataGridView.SelectionMode = DataGridViewSelectionMode.FullRowSelect;
        var current = employeesDataGridView.CurrentCell;
        if (current == null) return;
        if (current.ColumnIndex == -1)
            return;
        if (current.RowIndex == -1)
            return;
        employeesDataGridView[current.ColumnIndex, current.RowIndex].Selected = true;
    }

    private void contextMenuStrip1_Closed(object sender, ToolStripDropDownClosedEventArgs e)
    {
        employeesDataGridView.SelectionMode = DataGridViewSelectionMode.CellSelect;
    } 
```

# openerp - OpenERP 6.1 - 电子邮件模板默认为 html

> ID：14302779
> 
> 赞同：3
> 
> 时间：2013-01-13T10:54:49.680
> 
> 标签：openerp

我正在尝试使用右侧面板上的“发送邮件”菜单从合作伙伴窗口发送电子邮件。为此，我从配置菜单创建了一个模板电子邮件，将正文（文本）留空，并用以下内容填充正文（Rich/html）：

```
<p>Some text in <b>bold</b></p> 
```

当我从合作伙伴表单运行发送邮件时，邮件正文非常空，看起来它默认邮件正文为电子邮件模板中的正文（文本）选项卡。

当我查看字段子类型始终为“Plain”的表 email_template 时，这一点得到了证实。

我尝试通过将域值设置为 [('subtype','=','html')] 来设置特定于我的电子邮件模板的操作窗口，但它不会改变任何内容。我还将这段代码添加到大多数与电子邮件相关的操作窗口域中，但它也没有改变任何东西。

有谁知道如何从 OpenERP 默认发送 HTML 格式的电子邮件？

> **更新**：有没有人得到适用于他们的 HTML 代码示例，这意味着他们在电子邮件客户端中正确接收？
> 
> 我的问题是，如果我在模板中将纯文本留空，并且在 Rich/html 下有一些 html 标签，那么我会收到一封 html 格式的电子邮件，但它始终是空的。甚至源头也完全是空的。我想我的 html 语法有问题。也许我需要在结尾段落中加倍“/”，因为它可能是某个地方的转义字符，不知何故。我尝试了很多不同的语法，但显然不是正确的。
> 
> 因此，如果有人有一些适用于他们的 html 编码并且他们很乐意分享，在此先感谢！
> 
> **更新 2**，我在互联网上进行了快速培训后创建了一个 html 模板电子邮件。我已经用石蕊测试了我的代码，它准确地显示了我想看到的内容。然后我将这段完全相同的代码粘贴到 OpenERP 中，将电子邮件消息发送到我的电子邮件客户端，与石蕊上的相同，它完全是空的。但是，它说格式是 HTML。肯定在某个地方有问题，但我无法指出在哪里。OpenERP 似乎没有发送 html 代码。有没有人遇到过同样的问题？？？
> 
> 这是我用于测试并粘贴到 OpenERP 中的 html 基本代码：

```
<html>
<body leftmargin="0" marginwidth="0" marginheight="0" offset="0">
    <table width="100%" bgcolor="#cccccc" cellpading="10" cellspacing="10">
        <tr valign="top" align="center">
            <td>
                <table width="500" bgcolor="#ffffff" cellpading="0" cellspacing="0">
                    <tr>
                        <td>
                                liusuhflsb
                        </td>
                    </tr>
                </table>
            </td>
        </tr>       
    </table>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T10:23:35.573

**简短回答**：如果不使用第三方插件或自定义代码，您将无法在 6.1 中执行此操作。

**长答案**：
OpenERP 6.1 不提供开箱即用的所见即所得/富文本编辑器（OpenERP 7.0 引入了这一点）

因此，在 6.1 中，只要用户可以手动编辑电子邮件内容，就只使用模板的纯文本版本。实际上，要求用户在撰写电子邮件时手动编辑模板的 HTML 版本的源代码（不是所见即所得）会很尴尬。当您通过相应的侧栏操作基于模板撰写新电子邮件时就是这种情况`Send Mail`，因为您可以在发送电子邮件之前对其进行修改。

按预期使用模板的 HTML/富文本和纯文本版本的一种典型情况是，当电子邮件模板绑定到*营销活动*步骤（通过`marketing_campaign`模块）时 - 因为这些电子邮件是在没有任何编辑或任何手动用户操作。

> **更新：** 如果您对此感兴趣，营销活动将始终自动发送纯文本和 HTML 版本的电子邮件，收件人的邮件软件将根据用户偏好显示相关的邮件（对于大多数人来说，它会是 HTML 版本）。但是，您**不能使用***发送邮件*侧边栏按钮测试模板 ，因为这将只保留纯文本版本，如上所述。有两种推荐的方法来测试这些活动电子邮件：
> 
> 1.  使用模板上的*预览*按钮并选择一个示例记录来呈现模板。这将让您仔细检查将要生成的 HTML 的来源。
> 2.  在“手动”模式下试驾您的广告系列：让一个虚拟记录输入带有您的电子邮件地址的广告系列，然后使用“ *广告系列跟进”*菜单使其手动推进广告系列步骤。这不仅对验证您的电子邮件模板而且对您的营销活动的结构非常重要。另请参阅 [OpenERP 营销活动的基本介绍](http://www.slideshare.net/openobject/openerp-managing-marketing-campaigns-with-openerp)，来自 OpenERP Community Days 2012。

有一些社区模块将所见即所得的编辑功能添加到 OpenERP 6.1（在[OpenERP 应用程序](http://apps.openerp.com)上搜索[所见即所得](http://v6apps.openerp.com/?text_search=wysiwyg)），但我认为它们没有与模块集成以实现直接编写富文本。不过，做到这一点不会很困难。如果您有兴趣，请先阅读向导的源代码（[模块的](http://bazaar.launchpad.net/~openerp/openobject-addons/6.1/view/head:/mail/wizard/mail_compose_message.py)[原始版本](http://bazaar.launchpad.net/~openerp/openobject-addons/6.1/view/head:/mail/wizard/mail_compose_message.py)和[扩展](http://bazaar.launchpad.net/~openerp/openobject-addons/6.1/view/head:/email_template/wizard/mail_compose_message.py)），以了解模板字段的使用方式和位置。`email_template``mail.compose.message`[`mail`](http://bazaar.launchpad.net/~openerp/openobject-addons/6.1/view/head:/mail/wizard/mail_compose_message.py)[`email.template`](http://bazaar.launchpad.net/~openerp/openobject-addons/6.1/view/head:/email_template/wizard/mail_compose_message.py)

如果您不熟悉 OpenERP 开发，OpenERP 的开发[人员文档](http://doc.openerp.com/v6.1/developer/index.html#book-develop-link)和[技术备忘录](http://doc.openerp.com/memento/)将是有趣的起点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-13T13:23:39.403

发送的电子邮件同时包含以下内容：`plain`和`html`。电子邮件客户端根据其功能决定呈现其中一个。它有`html`能力，它将使用 HTML 版本，如果没有，`plain`将呈现该版本。

您应该在模板中为消息提供两个版本：`plain`和`html`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-03-25T08:45:28.343

这是一年多以前的事了，由于这种缺陷，我已经放弃了 OpenErp。无论我尝试什么，我都没有让 OpenERP 向我发送 HTML 格式的自动电子邮件。无论我使用哪种电子邮件客户端，它始终默认为文本。我想知道是否有其他人成功接收到与 OpenERP 中的营销活动相关的自动 html 电子邮件？

# mysql - 从 tbl1 中选择未在 tbl2 中列出

> ID：14302787
> 
> 赞同：2
> 
> 时间：2013-01-13T10:57:00.163
> 
> 标签：mysql, sql

我需要进行 MySQL 查询以`TBL1`从未列出的记录中选择记录`TBL2`，但不能使用我的查询。

```
SELECT deleted_guids.guid_type
     , HEX(data_table.guid_id) as guid_id
     , HEX(data_table.guid_type) as guid_type
FROM data_table 
LEFT JOIN deleted_guids 
     ON     data_table.guid_id = deleted_guids.guid_id 
        AND data_table.guid_type = deleted_guids.guid_type 
WHERE deleted_guids.guid_type = NULL; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-13T10:59:28.543

您需要更改`= NULL`为`IS NULL`最后；这是正确的语法。请参阅[使用`NULL`值](http://dev.mysql.com/doc/refman/5.5/en/working-with-null.html)。

# database - Symfony2 没有创建供应商表

> ID：14302788
> 
> 赞同：1
> 
> 时间：2013-01-13T10:57:12.050
> 
> 标签：database, symfony

我刚刚安装了 symfony2 并使用了这个语句

`php app/console doctrine:schema:create`

当我看到数据库表时，只有一张表，那是我的实体。我看不到任何基表。

这正常吗？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T11:01:28.980

框架本身没有任何“基表”。它仅保留您的实体。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-13T11:29:36.040

这是绝对正常的。Symfony 是一个框架，它不需要任何数据库表。它的所有设置都保存在可以在`/app/config`目录（应用程序配置文件）中找到的配置文件中。捆绑包的配置文件可以在`bundle_dir/Resources/config`

数据库仅适用于您的实体。请记住，如果您使用“Doctrine Migrations”，它确实会创建一个名为“doctrine_migrations”的数据库表。

# asp.net - 如何显示自定义按钮？

> ID：14302789
> 
> 赞同：1
> 
> 时间：2013-01-13T10:57:37.790
> 
> 标签：asp.net, vb.net, listview

我`ListView`在网络用户控件中使用以调查格式显示来自不同表格的数据，用户必须在其中给出答案，即从多个选项中选择或给出他自己的意见`TextBox`，我想在`ListView`数据寻呼机中添加一个自定义按钮作为提交按钮工作？

我不知道该怎么做？任何人的帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T11:49:46.363

您可以修改`ListView`内部的寻呼机`ListView` `LayoutTemplate`：

```
<asp:ListView runat="server" ID="ListView1" 
    DataSourceID="SqlDataSource1">
    <LayoutTemplate>
        <table runat="server" id=" table1">
          <tr runat="server" id="itemPlaceholder">
          </tr>
        </table>
        <!-- This is the pager. Define all necessary markup here. -->
        <asp:DataPager runat="server" ID="DataPager" PageSize="5">
            <Fields>
                <asp:TemplatePagerField>              
                    <PagerTemplate>
                        <!-- Pager template goes here -->
                    </PagerTemplate>
                </asp:TemplatePagerField>
            </Fields>
        </asp:DataPager>
    </LayoutTemplate>
</asp:ListView> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-24T17:30:27.780

[http://msdn.microsoft.com/en-us/library/bb398790%28v=vs.100%29.aspx](http://msdn.microsoft.com/en-us/library/bb398790%28v=vs.100%29.aspx)

```
 protected void CurrentRowTextBox_OnTextChanged(object sender, 
        EventArgs e)
    {
        TextBox t = (TextBox)sender;
        DataPager pager = 
            (DataPager)EmployeesListView.FindControl("EmployeesDataPager");
        pager.SetPageProperties(Convert.ToInt32(t.Text) - 1, 
             pager.PageSize, true);
    } 
```

# java - 使用触发器删除 Oracle 表中的行

> ID：14302796
> 
> 赞同：1
> 
> 时间：2013-01-13T10:58:09.870
> 
> 标签：java, sql, oracle, triggers

我想删除与外键连接的 Oracle 表中的行。为了从表中删除行，我有两个选择：

1.  两条 DML 语句必须按严格的顺序运行。

2.  Oracle 删除前在主键表上触发。

哪种方法更好？我正在使用带有 Java 7 的 JDBC Oracle 瘦驱动程序。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-13T11:27:52.350

不要触发。你不应该隐藏这样的重要东西。

CASCADE 是一个选项，但我个人会选择一个执行删除的存储过程。所以想要删除一行的人必须使用该过程，他（她）**知道**它也会删除子表中的行。

# codeigniter - codeigniter 加载语言添加空格

> ID：14302797
> 
> 赞同：0
> 
> 时间：2013-01-13T10:58:30.697
> 
> 标签：codeigniter

我正在开发一个多语言网站并使用会话来更改语言，我的问题是当我加载一种语言时，它会在页面顶部添加一个空格，我尝试了以下方法：

在构造函数中：

```
function __construct(){
    parent::__construct();
    $this->lang->load('main', $this->session->userdata('language')); 
} 
```

![顶部主体它添加了一个空白](../Images/80578bfd31a406bc0ff519915b26e73b.png) 顶部主体它添加了一个空白

当我签入“查看源代码”时，它不显示任何空白，但在萤火虫中我可以看到： ![在此处输入图像描述](../Images/0e49753b9dc9b76823d2f7d7158d7e89.png)

我也尝试在控制器和视图中加载语言，但效果相同。

编辑：我注意到它只是为英语以外的语言添加空间。在英语中它工作正常。

感谢您的任何支持。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T12:42:20.283

它在语言文件的顶部添加了一个字符，这解决了我的问题 [http://studentguru.gr/b/solidus/archive/2009/12/30/lt-php-include-gt-strange-extra-white-space -at-the-beginning-of-page.aspx](http://studentguru.gr/b/solidus/archive/2009/12/30/lt-php-include-gt-strange-extra-white-space-at-the-beginning-of-page.aspx)

# c# - 将数据插入数据库后如何刷新？

> ID：14302799
> 
> 赞同：0
> 
> 时间：2013-01-13T10:59:09.873
> 
> 标签：c#, ms-access, datagridview

我是 C# 的新手。将数据插入我的数据库后，我有一个表单，允许我查看我的数据，其中`DataGridView`将显示所有数据。但是，该表不显示正在插入数据库的新数据。

已经研究过`datagridview.refresh()`但它唯一的图形刷新。

以下是我的代码：（*不知道我是否在正确的轨道上）*

```
 private void button_refresh_Click(object sender, EventArgs e)
        {
            //DataGridView1.refresh(); 
            //DataSet1.GetChanges();
            //TableAdapter.Fill(DataSet1.table);
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T11:54:31.577

```
this.employeesTableAdapter.Fill(this.dataSet1.Employees); 
```

> `Where: Employees your table`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-13T11:16:33.070

让我们想象 d 是`DataSource`我拥有的

```
d.Add(new string[] {"a", "b", "c"});
dataGridView1.DataSource = d; 
```

现在我的 DataGridView 有**1**行

过了一会儿 ...

```
d.Add(new string[] { "1", "2", "3" });
d.Add(new string[] { "4", "5", "6" });
d.Add(new string[] { "x", "y", "z" });
dataGridView1.DataSource = null;
dataGridView1.DataSource = d;
dataGridView1.Refresh(); 
```

现在我的 DataGridView 有 4 行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-13T11:01:36.537

如果您不使用数据绑定，那么唯一的方法是删除所有行：

```
DataGridView1.Rows.Clear(); 
```

然后像最初一样再次读取并添加行

# c - 数据包嗅探器的原理

> ID：14302803
> 
> 赞同：1
> 
> 时间：2013-01-13T10:59:39.110
> 
> 标签：c, winapi, proxy, network-programming, tcp-ip

我想知道数据包嗅探器的原理。他们如何捕获其他应用程序的数据包？

我一直在考虑这个问题。我有一个理论。这与代理服务器的工作原理有关吗？一旦使用了一些特殊的API，所有的本地应用程序都会将它们的数据包发送到指定的IP而不是它们原来的IP。数据包嗅探器接收并复制，最后将它们发送回原始目的地。是对的吗？

你能解释一下数据包嗅探器的工作原理吗？提前谢谢你的帮助。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-13T11:07:40.073

网络接口（即硬件网络适配器卡）接收线路上的所有流量，无论它是否发给它们。

收到帧后，驱动程序会检查帧头中的接收者[MAC](http://en.wikipedia.org/wiki/Ethernet_frame#Structure)[地址](http://en.wikipedia.org/wiki/MAC_address)，并将其与接口的 MAC 进行比较。如果地址匹配，则将帧转发给操作系统以供使用；如果不是，则将其丢弃。

接口还提供了进入*[混杂模式](http://en.wikipedia.org/wiki/Promiscuous_mode)*的选项，其中*所有*帧都被转发到操作系统。这就是数据包嗅探器所做的事情：它们向驱动程序发送一个命令，将卡置于混杂模式，然后可以读取从网络物理到达的所有流量，无论它的地址是谁。

当然，混杂模式并不能保证您会收到网络上的*所有*流量；网络拓扑可以很容易地阻止发送给其他人的流量从一开始就到达您的系统（例如[，这就是交换机通常所做的](http://en.wikipedia.org/wiki/Network_switch#Layer_1_.28Hubs_versus_higher-layer_switches.29)）。

# c# - 当前上下文中不存在名称“枚举器”

> ID：14302805
> 
> 赞同：-4
> 
> 时间：2013-01-13T10:59:58.723
> 
> 标签：c#

使用系统；使用 System.Data；使用 System.Windows.Forms；使用 System.Data.SqlClient；使用 System.Linq；

```
namespace ProiectBDD
{
    public partial class AdaugaIntrebari : UserControl
    {
        private string connstring;

        public string Connstring
        {
            get { return connstring; }
            set { connstring = value; }
        }

        public AdaugaIntrebari(string p_connstring)
        {
            connstring = p_connstring;
            InitializeComponent();
            IncarcaCategorii();
        }

        private void button1_Click(object sender, EventArgs e)
        {
            if (enumerator.MoveNext())
            {
                label1.Text = enumerator.Current.Categorie;
            }
        }

        public void IncarcaCategorii()
        {
            DataClasses1DataContext dc = new DataClasses1DataContext();
            var q = from a in dc.GetTable<Categorii>()
                    select a;
            var enumerator = q.AsEnumerable().GetEnumerator();
        }
    }
} 
```

我在按钮事件处理程序方法中得到 Name `enumerator`does not exist in current context 错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T11:05:38.410

`button1_Click`不知道，`enumerator`因为它只存在于 IncarcaCategorii 您需要将其设为类字段

```
using System;
using System.Data;
using System.Windows.Forms;
using System.Linq;

namespace ProiectBDD
{
    public partial class AdaugaIntrebari : UserControl
    {
        private string connstring;
        private IEnumerator<DataRow> _enumerator;

        public string Connstring
        {
            get { return connstring; }
            set { connstring = value; }
        }

        public AdaugaIntrebari(string p_connstring)
        {
            connstring = p_connstring;
            InitializeComponent();
            IncarcaCategorii();
        }

        private void button1_Click(object sender, EventArgs e)
        {
            if (_enumerator == null) return;

            if (enumerator.MoveNext())
            {
                label1.Text = _enumerator.Current.Categorie;
            }
        }

        public void IncarcaCategorii()
        {
            DataClasses1DataContext dc = new DataClasses1DataContext();
            var q = from a in dc.GetTable<Categorii>()
                    select a;
            _enumerator = q.AsEnumerable().GetEnumerator();

        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-13T11:03:37.143

`enomerator`范围内不存在变量

看这个方法：

```
public void IncarcaCategorii()
{
    DataClasses1DataContext dc = new DataClasses1DataContext();
    var q = from a in dc.GetTable<Categorii>()
            select a;
    var enumerator = q.AsEnumerable().GetEnumerator();
} // This is where "enumerator" become subject to garbage collection 
```

`enumerator`变量需要以某种方式传入这里：

```
private void button1_Click(object sender, EventArgs e)
{
    if (enumerator.MoveNext())
    {
        label1.Text = enumerator.Current.Categorie;
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-13T11:06:26.317

```
label1.Text = enumerator.Current.Categorie.[FieldName]; 
```

或者您`IEnumerator`的当前位置可能与上下文无关，请再次选择对象

# iphone - 用逗号显示整数：30000 --> 30,000

> ID：14302808
> 
> 赞同：0
> 
> 时间：2013-01-13T11:00:59.297
> 
> 标签：iphone, objective-c, cocoa

如何在 UILabel 中用逗号显示整数？

像这样：30000 --> 30,000

我的英语不是那么好，所以我不知道要搜索什么。

谢谢您的回答。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-13T11:04:28.033

使用 NSNumberFormatter 并做一些事情：

```
NSInteger integerValue=30000;
NSNumberFormatter *numberFormatterComma = [NSNumberFormatter new];
[numberFormatterComma setNumberStyle:NSNumberFormatterDecimalStyle];
NSString *formatted = [numberFormatterComma stringFromNumber:[NSNumber numberWithInteger:integerValue]];
NSLog(@"--> %@",formatted); 
```

现在你可以把`formatted`字符串放到你的标签上。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-13T11:08:22.133

你想看看 NSNumberFormatter

这是一个例子

```
 self.numberFormat = [[NSNumberFormatter alloc] init];  

        //set up formatter for display text
    [self.numberFormat setNumberStyle:NSNumberFormatterDecimalStyle];
    [self.numberFormat setRoundingMode:NSNumberFormatterRoundFloor];
    [self.numberFormat setMinimumFractionDigits:0];
    [self.numberFormat setMinimumIntegerDigits:1];
    [self.numberFormat setMaximumFractionDigits:24];
    [self.numberFormat setMaximumSignificantDigits:24];

    NSString* formattedText = 
     [self.numberFormat stringFromNumber:[self.numberFormat numberFromString:rawString]]; 
```

注意不要经常分配/初始化它们，它们是很重的对象。最好创建一次并保存在一个属性中以供重复使用。如果您正在制作 OSX 应用程序（而不是 ios），您还可以在 Interface Builder 中获得格式化对象，您可以拖动它们并在属性检查器中设置它们的参数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-13T12:15:18.207

// 逗号分隔的数字转换

```
-(NSString*)convertNumericIntoCommaSeperatedValue:(NSString*)string{

NSNumberFormatter *frmtr = [[NSNumberFormatter alloc] init];

[frmtr setGroupingSize:3];

[frmtr setGroupingSeparator:@","];

[frmtr setUsesGroupingSeparator:YES];

NSString *commaSeperatedString = [frmtr stringFromNumber:[NSNumber numberWithLongLong:[string longLongValue]]];

[frmtr release],frmtr=nil;

return commaSeperatedString;
} 
```

# java - Java中的实时视频加密

> ID：14302813
> 
> 赞同：-2
> 
> 时间：2013-01-13T11:01:50.343
> 
> 标签：java, video, encryption, live

我想做一个关于流视频加密的java项目。我将在哪里使用两台 PC 1 充当媒体服务器，其他充当客户端。因此，客户端 PC 可以查看服务器 PC 中的视频文件（example.avi）。

我已经使用过套接字并且可以通过 LAN 发送文件。但在这里我的问题是-> 我想将加密的视频流发送到客户端 PC，然后客户端显示视频。

过程是这样的：

*   客户端请求视频文件
*   服务器打开视频文件（以文本模式或其他方式）并开始加密并发送给客户端。
*   现在客户端开始接收和解密数据。
*   并将解密后的数据显示为视频详细服务器
*   连接到客户端
*   打开视频文件
*   虽然不是 EOF
*   读取文件内容块
*   加密它
*   向客户端发送加密块
*   客户端结束
*   连接到服务器
*   虽然是真的（或类似的东西）
*   存储接收到的加密数据
*   解密它
*   将其显示为视频
*   结束时

我不需要任何源代码。我只想知道我可以从哪里开始这个项目。任何建议都会对我有所帮助。

*   可以连接两台电脑
*   可以读取文件
*   可以加密
*   可以通过 LAN 发送数据
*   可以解密

但是我怎样才能使用解密的数据并将其显示为视频呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-13T11:23:58.143

您不必在这里重新发明轮子，因为已经有一种标准化技术可以加密 TCP/IP 上的通信：[传输层安全](https://en.wikipedia.org/wiki/Transport_Layer_Security)性。

查看[SSLSocket](http://docs.oracle.com/javase/7/docs/api/javax/net/ssl/SSLSocket.html)、[SSLServerSocket](http://docs.oracle.com/javase/7/docs/api/javax/net/ssl/SSLServerSocket.html)、[SSLSocketFactory](http://docs.oracle.com/javase/1.4.2/docs/api/javax/net/ssl/SSLSocketFactory.html)和[SSLServerSocketFactory 类](http://docs.oracle.com/javase/7/docs/api/javax/net/ssl/SSLServerSocketFactory.html)。它们的行为就像普通的 Socket 类（它们扩展了它们，因此您甚至不必更改类型），但它们在后台加密数据并在收到时透明地解密，而无需您做太多事情。

# python - 使用格式规范迷你语言截断和填充

> ID：14302815
> 
> 赞同：6
> 
> 时间：2013-01-13T11:02:06.250
> 
> 标签：python, string-formatting

我目前正在使用 Python 的[格式规范迷你语言](http://docs.python.org/2/library/string.html#formatspec)编写用空格填充字符串的代码：

```
print('''{user:<10}, you're welcome!'''.format(user='John Doe')) 
```

输出是：

```
John Doe  , you're welcome! 
```

但是，如果用户的名字类似于'Jooooooooooooohn Doe'，我想输出：

```
Jooooooooo, you're welcome! 
```

有没有办法使用格式规范迷你语言执行截断和填充？

谢谢！

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-13T11:09:08.450

从您链接到的页面：

> 对于非数字类型，[精度] 表示最大字段大小 - 换句话说，从字段内容中将使用多少个字符。整数值不允许精度。

精度是由一个时期引入的

> `format_spec ::= [[fill]align][sign][#][0][width][,][.precision][type]`

所以正确的格式字符串是`{user:<10.10}`.

```
>>> '{0:<10.10}'.format('1234567')
'1234567   '

>>> '{0:<10.10}'.format('123456789034')
'1234567890' 
```

# api - Codeigniter API 错误返回

> ID：14302816
> 
> 赞同：0
> 
> 时间：2013-01-13T11:02:07.793
> 
> 标签：api, codeigniter, rest, php

嗨，有任何人有使用 Phil Sturgeons RESTFUL 库进行 codeigniter 的经验。我决定为我们的数据库创建一个 Web 服务，以便提供从多个应用程序对数据库的访问。该网站目前是在 Codeigniter 中开发的，因此它是使用其余 API 库的简单解决方案。

我遇到的问题是我试图在出现问题时返回特定错误。

目前我故意返回这样的错误：

```
require(APPPATH . 'libraries/REST_Controller.php');

class Settings_api extends REST_Controller {

    function settings_get()
    {
        $this->response(NULL, 404);
    }
} 
```

如果我直接访问 url，那么我只是收到一个空白页面，如果我用消息替换“NULL”，我可以返回一条消息，但没有什么可以说它是 404 错误，而如果我通过 php 调用页面使用下列的

```
$user = json_decode(file_get_contents('http://www.example.co.uk/api/settings_api/settings/'));

echo $user; 
```

然后它显示以下行

```
Message: file_get_contents(http://www.example.co.uk/api/settings_api/settings/) [function.file-get-contents]: failed to open stream: HTTP request failed! HTTP/1.1 404 
```

在这两种情况下，我都想返回 404 错误以及我提供的消息。这可能吗？如果可以，您能否指出我正确的方向。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-13T11:11:30.183

由 PHP 生成的错误消息，据我所知，您对此无能为力（除了使用`@`运算符，我不推荐）。因此，您唯一的选择是手动检查`file_get_content()`的返回值：

```
$response = file_get_contents('http://...');

if ($response === false) {
    // return whatever you feel is appropriate
} else {
    $user = json_decode($response);
    echo $user;
} 
```

**编辑**在您正在寻找的 Stackoverflow 上
找到了这个[答案。](https://stackoverflow.com/a/6718657/264395)

# c++ - 嵌入式 Python 值冲突

> ID：14302818
> 
> 赞同：0
> 
> 时间：2013-01-13T11:02:24.253
> 
> 标签：c++, python, c

我在我的 C 程序中使用嵌入式 python。python 脚本从在线资源中抓取一个文件并返回它收到的数据。

我的程序中包含这个特定脚本的 C 部分如下：

```
char* Drop::getFile(std::string path){
  PyObject *pValue;
  char* fileData = NULL;
  pFunc = PyObject_GetAttrString(pModule,"getFile");
  pArgs = PyTuple_New(1);
  PyTuple_SetItem(pArgs,0,PyString_FromString(path.c_str()));
  pValue = PyObject_CallObject(pFunc,pArgs);
  fileData = PyString_AsString(pValue); 
  Py_DECREF(pFunc);
  Py_DECREF(pArgs);
  return fileData;
} 
```

fileData 确实得到了一个值，但它指向的数据与从网上提取的 python 脚本不匹配。我正在测试的是一个pdf文件

> %PDF-1.4%âãÏÓ 194 0 obj<>endobj
> xref 194 28 0000000016 00000 n 0000001374 00000 n 0000001521 00000 n 0000001915 00000 n 0000002047 00000 n 0000002547 00000 n 0000002661 00000 n 0000002773 00000 n 0000002800 00000 n 0000003401 00000 n 0000003656 00000 n 0000004166 00000 n 0000005703 00000 n 0000006124 00000 n 0000006373 00000 n 0000006828 00000 n 0000006898 00000 n 0000007022 00000 n 0000031268 00000 n 0000031531 00000 n 0000032131 00000 n 0000056344 00000 n 0000079808 00000 n 0000080674 00000 n 0000085029 00000 n 0000085946 00000 n 0000001196 00000 n 0000000873 00000 n trailer <> <6F4E88EE2CFAE8419CCB5AF471C4A73F>]/上一页 241987/XRefStm 1196>> startxref 0 %%EOF
> 
> 221 0 obj<>stream hÞb ``b`YÇÀÆÀÀÆ È

但实际文件要长得多。我不知道为什么要削减数据。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T11:13:30.537

您需要使用`PyString_AsStringAndSize`和使用文件的长度以及返回的字节数。如果将返回的字节视为 c 字符串，则将第一个 0 字节解释为字符串的结尾。

通常，正是出于这个原因，在 C 中对二进制数据使用字符串函数时必须小心。

# android - bash 脚本中的 su -c 不会显示任何输出

> ID：14302821
> 
> 赞同：-1
> 
> 时间：2013-01-13T11:02:30.467
> 
> 标签：android, bash, su

一段时间以来，我一直在为这个问题挠头。它看起来很简单，但我就是无法让它工作。这是在一个有根的 android 平板电脑上，如果这有所作为的话。我试图模仿 sudo 在普通 linux 系统上的行为。在 bash 脚本方面我不是很有经验，所以这可能很简单。这是一个两部分的问题。

所以这里（部分）是一个名为 aliases 的 bash 脚本。它通常由 bashrc 提供。问题是我希望我的自定义 sudo 命令能够访问此脚本中定义的别名。

```
#! /system/xbin/bash

alias ls='busybox ls --color=auto'

function sudo() {
    su -c 'source /system/etc/bash/aliases && "$@"'
} 
```

因此，当我从 shell 调用 sudo 时，它绝对不会输出任何内容。上面脚本末尾的快速“echo ok”证明当我尝试 sudo 某些东西时正在执行源命令。但是在'&&'之后似乎什么也没做。甚至没有回声。甚至没有触及随机文件名的工作，所以它似乎不是标准输出被重定向或什么的。我试过用 '||' 代替 '&&' 但这也不起作用。

调试时出现了问题的第二部分。从 shell 调用以下命令：

```
su -c 'source /system/etc/bash/aliases && ls' 
```

... ls 输出没有颜色，即使别名文件是在调用 ls 之前立即获取的。现在我彻底糊涂了。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-13T13:55:15.203

您的直接问题是您已将命令括在单引号中：

```
su -c 'source /system/etc/bash/aliases && "$@"' 
```

单引号表示在函数`"$@"`内部**没有**展开，所以你正在运行文字命令......

```
source /system/etc/bash/aliases && "$@" 
```

...并且`"$@"`扩展为空字符串。如果您无需处理引用的参数就可以生活，您可以这样做：

```
 su -c "source /system/etc/bash/aliases && $*" 
```

请注意使用双引号 ( `"..."`) 而不是单引号。但是，这可能仍然无法满足您的需要，因为：

> 当 shell 不是交互式时，别名不会展开，除非 expand_aliases shell 选项使用 shopt 设置（参见下面 SHELL BUILTIN COMMANDS 下的 shopt 描述）。

一般来说，我尽量避免在 shell 脚本中使用别名，因为它使脚本严重依赖于您的环境（或者在这种情况下，是目标用户的环境）。使用 shell 脚本而不是别名来封装命令通常会产生更健壮和可移植的解决方案。

# javascript - 如何在元素的文本中动态添加空格？

> ID：14302823
> 
> 赞同：3
> 
> 时间：2013-01-13T11:03:02.867
> 
> 标签：javascript, html, dom

我想在 DOM 元素中插入空格。

例如，我想改变这个

```
<a></a> 
```

对此

```
<a> </a> 
```

如果我手动添加`&nbsp`到 DOM 元素，那么它会呈现`&nbsp`为空格。但是当我想动态添加它时，我使用`innerText`,

```
 a_element.innertText = "&nbsp" 
```

因此它不会转换`&nbsp`为空白并将其呈现为文本 ( `<a>&nbsp</a>`)。我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-13T11:08:10.660

根据需要使用`.innerHTML`编辑该特定链接的 HTML。

```
a_element.innerHTML = "&nbsp;" 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-01-13T11:10:31.337

HTML 实体引用仅在 HTML 解析中处理。无论如何，最好将字符直接放入内容中。如果您不知道如何在创作环境中键入不间断空格，您可以在 JavaScript 中使用`\xA0`or`\u00A0`转义：

```
a_element.innerText = "\u00A0"; 
```

顺便说一句，不间断空格不是 HTML 规范的[空白字符](http://www.w3.org/TR/REC-html40/struct/text.html#didx-white_space-1)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-04T08:16:01.543

您也可以只复制所需的空白字符并将其粘贴到您的 javascript 字符串中。例如，我的`&emsp;`html 中有一个；当我加载页面时，我复制了该空间并将其粘贴到我的 javascript 中的字符串中：

```
var myString = "Here is &emsp; --> &lt;--"; 
```

请注意，它在这里看起来像一个常规空间，但它呈现为复制的原始空白。

# android - 致命信号 11 android Visualizer

> ID：14302825
> 
> 赞同：3
> 
> 时间：2013-01-13T11:03:35.990
> 
> 标签：android, fatal-error, visualizer

我正在开发在单击按钮全部播放后播放音频文件列表的应用程序，在播放每个文件后，我从[https://github.com/felixpalmer/android-visualizer](https://github.com/felixpalmer/android-visualizer)重新创建了一个新的 VisualizerView 问题：有时我觉得这很讨厌致命错误 11 我有时在第二个项目之后无法弄清楚模式，有时它玩得很好 40 个项目没有问题。

```
mMediaPlayer = new MediaPlayer();
mMediaPlayer.setDataSource(afd.getFileDescriptor(), afd.getStartOffset(),
                    afd.getLength());
afd.close();
showVisualizer(mMediaPlayer);
mMediaPlayer.prepare();
mMediaPlayer.start();

public void showVisualizer(MediaPlayer mp) {
    if (!mShowVisualizer) {
        return;
    }
    //add new
    mVisualizerView = new VisualizerView(this);
    mVisualizerView.link(mp);
    mFrameVisualizer.addView(mVisualizerView);
    mFrameVisualizer.setVisibility(View.VISIBLE);

    if (visualizerType.equals(getString(R.string.visualizer_line))) {
        addLineRenderer(mVisualizerView);
    } else if (visualizerType.equals(getString(R.string.visualizer_bar))) {
        addBarGraphRenderers(mVisualizerView);
    } else {
        Log.e(TAG, "Unrecognized renderer");
    }
}

    public void hideVisualizer() {
    if (mFrameVisualizer.getVisibility() != View.GONE) {
        mFrameVisualizer.setVisibility(View.GONE);
        Log.d(TAG, mVisualizerView + " mVis vuew");
        if (mVisualizerView != null) {
            mFrameVisualizer.removeView(mVisualizerView);
            mVisualizerView.release();
            Log.d(TAG, mVisualizerView + " mVisualizerView released");
            mVisualizerView = null;
        }
    }
} 
```

更新：堆栈跟踪：

```
 01-13 21:21:56.416 30943   847 F libc    : Fatal signal 11 (SIGSEGV) at 0x44a00000 (code=2), thread 847 (Visualizer)
    01-13 21:21:56.471  2577  2577 I DEBUG   : *** *** *** *** *** *** *** *** *** *** *** *** *** *** *** ***
    01-13 21:21:56.471  2577  2577 I DEBUG   : Build fingerprint: 'samsung/m0xx/m0:4.1.2/JZO54K/I9300XXELLA:user/release-keys'
    01-13 21:21:56.471  2577  2577 I DEBUG   : pid: 30943, tid: 847, name: Visualizer  >>> com.iq.android <<<
    01-13 21:21:56.471  2577  2577 I DEBUG   : signal 11 (SIGSEGV), code 2 (SEGV_ACCERR), fault addr 44a00000
    01-13 21:21:56.951  2577  2577 I DEBUG   :     r0 5ae37ed0  r1 00010000  r2 00000000  r3 00000000
    01-13 21:21:56.951  2577  2577 I DEBUG   :     r4 44a00000  r5 60ecde48  r6 40bb4f54  r7 60ecde50
    01-13 21:21:56.956  2577  2577 I DEBUG   :     r8 5ae37ed0  r9 60ecde20  sl 40125a6c  fp 00000001
    01-13 21:21:56.956  2577  2577 I DEBUG   :     ip 40bb6bb0  sp 60ecde00  lr 40b8ac2d  pc 44a00000  cpsr 40000010
    01-13 21:21:56.956  2577  2577 I DEBUG   :     d0  000000c843480000  d1  0000000043480000
    01-13 21:21:56.956  2577  2577 I DEBUG   :     d2  0000000000000000  d3  44a0000000000000
    01-13 21:21:56.956  2577  2577 I DEBUG   :     d4  0000009200000000  d5  44a0000044340000
    01-13 21:21:56.956  2577  2577 I DEBUG   :     d6  449fe0004433c000  d7  0000000000000000
    01-13 21:21:56.956  2577  2577 I DEBUG   :     d8  0000000043020000  d9  0000000000000000
    01-13 21:21:56.956  2577  2577 I DEBUG   :     d10 0000000000000000  d11 0000000000000000
    01-13 21:21:56.956  2577  2577 I DEBUG   :     d12 0000000000000000  d13 0000000000000000
    01-13 21:21:56.956  2577  2577 I DEBUG   :     d14 0000000000000000  d15 0000000000000000
    01-13 21:21:56.956  2577  2577 I DEBUG   :     d16 7fffffffffffffff  d17 7fffffffffffffff
    01-13 21:21:56.956  2577  2577 I DEBUG   :     d18 0000000000000000  d19 20000008409dbe40
    01-13 21:21:56.956  2577  2577 I DEBUG   :     d20 3ffe000000000000  d21 3fee000000000000
    01-13 21:21:56.956  2577  2577 I DEBUG   :     d22 0000000000000000  d23 3fee000000000000
    01-13 21:21:56.956  2577  2577 I DEBUG   :     d24 3ff0000000000000  d25 0000000000000000
    01-13 21:21:56.956  2577  2577 I DEBUG   :     d26 0000000000000000  d27 0000000000000000
    01-13 21:21:56.961  2577  2577 I DEBUG   :     d28 0000000000000000  d29 0000000000000000
    01-13 21:21:56.961  2577  2577 I DEBUG   :     d30 0000000000000000  d31 0000000000000000
    01-13 21:21:56.961  2577  2577 I DEBUG   :     scr 20000013
    01-13 21:21:56.966  2577  2577 I DEBUG   : 
    01-13 21:21:56.966  2577  2577 I DEBUG   : backtrace:
    01-13 21:21:56.966  2577  2577 I DEBUG   :     #00  pc 01b26000  /dev/ashmem/dalvik-heap         (deleted)
    01-13 21:21:56.966  2577  2577 I DEBUG   :     #01  pc 0005ec2b  /system/lib/libmedia.so (android::Visualizer::getWaveForm(unsigned char*)+36)
    01-13 21:21:56.966  2577  2577 I DEBUG   :     #02  pc 0005edf9  /system/lib/libmedia.so (android::Visualizer::periodicCapture()+80)
    01-13 21:21:56.966  2577  2577 I DEBUG   :     #03  pc 0005ee87  /system/lib/libmedia.so (android::Visualizer::CaptureThread::threadLoop()+14)
    01-13 21:21:56.966  2577  2577 I DEBUG   :     #04  pc 0001104f  /system/lib/libutils.so (android::Thread::_threadLoop(void*)+114)
    01-13 21:21:56.966  2577  2577 I DEBUG   :     #05  pc 0004bc2b  /system/lib/libandroid_runtime.so (android::AndroidRuntime::javaThreadShell(void*)+66)
    01-13 21:21:56.966  2577  2577 I DEBUG   :     #06  pc 00010bb5  /system/lib/libutils.so
    01-13 21:21:56.971  2577  2577 I DEBUG   :     #07  pc 00012e00  /system/lib/libc.so         (__thread_entry+48)
    01-13 21:21:56.971  2577  2577 I DEBUG   :     #08  pc 00012558  /system/lib/libc.so (pthread_create+172) 
```

谢谢你的任何建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-02-24T03:15:51.777

我有一个非常相似的问题。每次打开新文件时，我都会根据会话 ID 创建一个新的 AudioTrack 并构建一个新的 Visualizer。在带有 4.4.2 的 Nexus 7 上构建 Visualizer 后不久随机获得致命信号 11 和 6，但不是带有 4.4.2 的 HTC One GPE。

虽然丑陋和莫名其妙，但为我解决的问题是：

```
Thread.sleep(100) 
```

在构造新的 Visualizer 之前，但在 AudioTrack 初始化之后（以及前一个 Visualizer 的 release()）。我欢迎更好的解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-05-19T14:45:14.793

我知道已经很晚了，但我现在解决了这个问题。我的解决方案是每次在启用可视化工具之前发布它。

*** 编辑 *** 一些进一步的测试表明问题仍然存在 - 抱歉

# python - Maya 变量串联

> ID：14302827
> 
> 赞同：0
> 
> 时间：2013-01-13T11:03:57.363
> 
> 标签：python, maya

有一些问题基本上是插入一堆由循环生成的标志：

```
def drawHelix(radius, length, coils): 
    numPoints = int(8)
    degrees = float((360 / numPoints))
    centerX = float(0)
    centerZ = float(0)
    xLoc = float(0)
    zLoc  = float(0)
    yLoc  = float(0)
    yOffset = float(((length / coils) / numPoints))
    vectorIndex = int(0)
    pointStr = ""
    knotStr = ""
    for i in range(1, (360 * coils), 20):
        t = i + degrees
        xLoc = centerX + (math.cos(t) * radius)
        zLoc = centerZ - (math.sin(t) * radius)
        pointStr = (pointStr + " p=(" + str(xLoc) + "," +  str(yLoc) + "," +  str(zLoc) + "),")
        knotStr = (knotStr + "k=(" + str(vectorIndex) + ")")
        vectorIndex = i + 1
        yLoc = yLoc + yOffset
    print pointStr        
    spiral = cmds.curve(d=float(1.0), pointStr, knotStr)
    cmds.rebuildCurve (spiral, ch=1, rpo=1, rt=0, end=1, kr=1, kcp=0, kep=0, kt=0, s=0, d=3, tol=0.001)
    return spiral 
```

然后我运行：`drawHelix (2.00, 3.00, 5.00)`

问题是 Maya 没有将“pointStr”识别为曲线命令的标志，当我打印 pointStr 时，它确实给了我想要的东西，但在如何实际完成这项工作上却苦苦挣扎！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-13T11:44:14.297

Python 解释器在调用函数之前不会扩展您的字符串（您可以使用来实现这一点，`eval`但这通常被认为是不好的做法——请参阅SO 上[的这篇文章](https://stackoverflow.com/questions/1832940/is-using-eval-in-python-a-bad-practice)）。

当将参数作为关键字的字典传递时，它应该可以工作。在这里查看：

*   [第 4.7 节更多关于](http://docs.python.org/tutorial/controlflow.html#more-on-defining-functions)在[官方 Python 教程中定义函数](http://docs.python.org/tutorial/index.html)
*   [PEP 3102 仅关键字参数](http://www.python.org/dev/peps/pep-3102/)
*   [Python 参考手册](http://docs.python.org/reference/index.html)中的[第 5.3.4 节调用](http://docs.python.org/reference/expressions.html#calls)

所以而不是：

```
pointStr = (pointStr + " p=(" + str(xLoc) + "," +  str(yLoc) + "," +  str(zLoc) + "),")
knotStr = (knotStr + "k=(" + str(vectorIndex) + ")") 
```

你应该做

```
kwargs['d'] = 1.0
kwargs['p'] = []
for i in range(1, (360 * coils), 20):
    ...
    kwargs['p'].append((xloc, yloc, zloc))
    kwargs['k'].append(vectorIndex)

spiral = cmds.curve(**kwargs) 
```

除此之外，您的代码中还有一些其他问题：

`float((360 / numPoints))`将在 Python2.x 和 Python3.x 中进行不同的评估。这是 2.x 中发生的情况：

```
In [5]: float(7 / 6)
Out[5]: 1.0

In [6]: 7\. / 6
Out[6]: 1.1666666666666667 
```

如果您想确保在您的案例中执行浮点除法，请使用`degrees = 360\. / numPoints`. 这行代码的潜在影响更糟：`yOffset = float(((length / coils) / numPoints))`.

您只需通过编写带或不带小数点的常量来声明`float`和常量。`int`无需将它们包装在对`float()`或的调用中`int()`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-13T12:36:11.187

我想这就是你的想法：

```
from maya import cmds
import math
def drawHelix(radius, length, coils): 
    numPoints = int(8)
    degrees = float((360 / numPoints))
    centerX = float(0)
    centerZ = float(0)
    xLoc = float(0)
    zLoc  = float(0)
    yLoc  = float(0)
    yOffset = float(((length / float(coils)) / float(numPoints)))
    vectorIndex = int(0)
    pointStr = []
    knotStr = []
    yLoc = 0
    for i in range(1, (360 * coils), 20):
        t = i + degrees
        xLoc = centerX + (math.cos(t) * radius)
        zLoc = centerZ - (math.sin(t) * radius)
        pointStr.append((xLoc, yLoc,zLoc))
        knotStr.append(vectorIndex)
        vectorIndex = i + 1
        yLoc = yLoc + yOffset
    print pointStr        
    spiral = cmds.curve(p= pointStr, k=knotStr,d=float(1.0))
    cmds.rebuildCurve (spiral, ch=1, rpo=1, 
                       rt=0, end=1, kr=1, kcp=0, kep=0, 
                       kt=0, s=0, d=3, tol=0.001)
    return spiral 
```

有一种更好的方法可以做到这一点。这就是你应该如何使用 Maya，使用节点来构建你的东西​​。所以这里是一个不必要的评论和冗长的版本：

```
from maya import cmds

def getHistoryShape(name):
    history = cmds.listHistory(name)
    filteredShape = cmds.ls(history, shapes=1)[0]
    return filteredShape 

def drawHelix(radius, length, coils): 
    cyl = cmds.cylinder( ch=True, radius=radius, ax=(0,1,0),
                         hr=float(length)/float(radius) )

    # build a curve on the cylinders surface
    crv = cmds.curveOnSurface(cyl[0], d=1, 
                              uv=[(0,0),(length, coils*4)],
                              k=[0,1]) 
    # make a duplicate that is visible 
    crv = cmds.duplicateCurve(ch=1, rn=0, local=1)

    # tell maya to ignore the cylinder as a piece of geometry
    shape = getHistoryShape(cyl[0])
    cmds.setAttr(shape+'.intermediateObject', 1)

    cmds.rename(cyl[0],'helix1')
    return crv 
```

现在您可以稍后更改螺旋参数，实时。您可以为用户公开参数半径、长度和线圈，以便它们可以动画。例如，请参见 Maya 工厂脚本。

# ios - gtm-oauth2 访问自己的服务器配置

> ID：14302830
> 
> 赞同：-1
> 
> 时间：2013-01-13T11:04:12.293
> 
> 标签：ios, symfony, callback, oauth-2.0, selector

短篇故事

使用适用于 iOS 的 gtm-oauth2 和 Symfony2 中的 FOSOAuthServerBundle 来实现我自己的 Oauth2 服务器，我没有得到`finishedSelector`要调用的回调。

这是创建“特殊” ViewController 的地方：

```
 GTMOAuth2ViewControllerTouch * viewController;
viewController = [[GTMOAuth2ViewControllerTouch alloc] initWithAuthentication:myAuth
                                                             authorizationURL:authURL
                                                             keychainItemName:nil
                                                                     delegate:self
                                                             finishedSelector:@selector(viewController:finishedWithAuth:error:)]; 
```

可能导致完成选择器（已实现的方法`viewController:finishedWithAuth:error`）不被调用的原因是什么？

我得到的行为是登录页面已正确呈现，但它充当整个 Web 应用程序的起点，在登录后呈现其余页面，而不是将控件返回到finishedSelector，最后，到必须管理 APP 工作流程延续的视图控制器。

很长的故事

在 Symfony2 中使用 gtm-oauth2 和 FOSOAuthServerBundle，我在尝试使架构捕获登录并从我的 iOS APP 加载经过身份验证的会话时遇到问题。

我正在遵循[gtm-oauth2 文档](http://code.google.com/p/gtm-oauth2/wiki/Introduction#Using_the_OAuth_2_Controllers)中描述的说明，特别是[登录到非 Google 服务](http://code.google.com/p/gtm-oauth2/wiki/Introduction#Signing_in_to_non-Google_Services)部分。

做那里描述的事情，我有这个创建`auth`对象的方法：

```
- (GTMOAuth2Authentication * ) authForMyAPP
{
    //This URL is defined by the individual 3rd party APIs, be sure to read their documentation
    NSString * url_string = @"http://myHost/oauth/v2/token";
    NSURL * tokenURL = [NSURL URLWithString:url_string];
    // We'll make up an arbitrary redirectURI.  The controller will watch for
    // the server to redirect the web view to this URI, but this URI will not be
    // loaded, so it need not be for any actual web page. This needs to match the URI set as the
    // redirect URI when configuring the app.
    NSString * redirectURI = @"http://myHost/oauth/v2/falseCallBack";
    GTMOAuth2Authentication * myAuth;
    myAuth = [GTMOAuth2Authentication authenticationWithServiceProvider:@"MyAPP"
                                                               tokenURL:tokenURL
                                                            redirectURI:redirectURI
                                                               clientID:kMyClientID
                                                           clientSecret:kMyClientSecret
              ];
    //[myAuth setTokenType:@"Bearer"];
    return myAuth;
} 
```

然后，这个方法创建了一个“特殊的”视图控制器，它应该处理登录页面的渲染并在登录时返回控制：

```
- (void)signInToMyAPP()
{
    GTMOAuth2Authentication *myAuth = [self authForMyAPP];
    NSString* auth_string = @"http://127.0.0.1/~pgbonino/Symfony/web/app.php/oauth/v2/auth";
    NSURL * authURL = [NSURL URLWithString:auth_string];
    // Display the authentication view

    // Creates the "special" viewController passing the `auth` object, the authorization URL and the finishedSelector
    GTMOAuth2ViewControllerTouch * viewController;
    viewController = [[GTMOAuth2ViewControllerTouch alloc] initWithAuthentication:myAuth
                                                             authorizationURL:authURL
                                                             keychainItemName:nil
                                                                     delegate:self
                                            finishedSelector:@selector(viewController:finishedWithAuth:error:)];

    [self.navigationController pushViewController:viewController animated:YES];
} 
```

最后，我有了用于finishedSelector 的方法。一旦正确执行登录并且身份验证成功（或出现错误），就应该调用它。这就是我没有完成的事情：

```
- (void)viewController:(GTMOAuth2ViewControllerTouch *)viewController
  finishedWithAuth:(GTMOAuth2Authentication *)myAuth
             error:(NSError *)error
{
    if (error != nil)
    {
        // Authentication failed
        UIAlertView *alertView = [ [UIAlertView alloc] initWithTitle:@"Authorization Failed"
                                                         message:[error localizedDescription]
                                                        delegate:self
                                               cancelButtonTitle:@"Dismiss"
                                               otherButtonTitles:nil];
        [alertView show];
    }
    else
    {
        // Authentication succeeded

        // Assign the access token to the instance property for later use
        //self.accessToken = myAuth.accessToken;
        [myAuth setShouldAuthorizeAllRequests:YES];
        [[Singleton sharedSingleton] setAuth:myAuth];

        // Display the access token to the user
        UIAlertView *alertView = [[UIAlertView alloc] initWithTitle:@"Authorization Succeeded"
                                                        message:[NSString stringWithFormat:@"Access Token: %@", myAuth.accessToken]
                                                       delegate:self
                                              cancelButtonTitle:@"Dismiss"
                                              otherButtonTitles:nil];
        [alertView show];
    }
} 
```

这一切都应该在网络视图中呈现我的登录页面并捕获成功登录以调用`viewController:finishedWithAuth:error`并将会话保存在某个共享对象中。

尽管如此，我得到的行为是我在 web 视图中呈现登录，我正确登录，而不是委托选择器被调用，它只是正常登录应用程序并在 web 视图中加载下一页，就像在普通浏览器中一样。因此不执行回调。

为什么我没有调用选择器？任何想法？

重要提示：Oauth2 服务器运行良好：如果我从 Safari 调用令牌 URL 和回调 URL，一切正常。令牌和授权码已正确保存在数据库中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T16:39:15.847

忘了它。

只是我。

当此参数设置为 true 时，OAuth2 将无法与 Symfony2 和 FOSUserBundle 一起使用`config.yml`：

```
always_use_default_target_path: false 
```

# php - 如何使用 PHP 制作审计跟踪/活动日志

> ID：14302831
> 
> 赞同：1
> 
> 时间：2013-01-13T11:04:15.303
> 
> 标签：php, mysql

是否已经有用于跟踪用户活动的 PHP/MySQL 模板？我已经有审计跟踪，但它只获取登录/注销的时间。不是他/她登录时所做的更改或活动。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-13T13:59:06.770

最好的 php 日志框架是[**log4php**](http://logging.apache.org/log4php/)，因为它来自 Apache 本身。log4php 可以灵活选择日志存储（mysaql、文本文件或电子邮件）

然而，用户活动跟踪的基本思想是这样的：

1.  在数据库表（操作）中定义您的网站用户执行的“操作”
2.  使用一个关系表 (user_action) 映射用户执行的操作

# mysql - 如何在vb6中基于Datagrid中的其他列显示来自访问的相应记录

> ID：14302832
> 
> 赞同：0
> 
> 时间：2013-01-13T11:04:25.553
> 
> 标签：mysql, ms-access, datagrid, vb6

我正在使用 Vb6 ！我有一个名为“Datagrid1”的数据网格，我从访问数据库的 Datagrid1 中名为“subjectcode”的表中显示某些内容，例如主题名、主题代码、理论实用。

我还有另一个名为“feedetail”的表。我的疑问是，如果“theory_practical”值是理论值，那么它应该显示名为 feedetail 的表中的理论费，或者如果“theroy_practical”值是实际值，那么它应该在名为“Fee”的新列中显示实际费用数据网格1。

我对 sql 语句和在 datagrid 中显示感到困惑！这是我使用的代码！

我想在 Theory_Practical 标题的下一栏中显示相应的费用！我无法附加屏幕截图文件，它显示错误！[所以这里是截图文件的链接](http://tinypic.com/r/2gwtdaq/6)！提前致谢 ！

```
 Public con As New ADODB.Connection
    Public rs As New ADODB.Recordset
    Public rs2 As New ADODB.Recordset

    Private Sub Command1_Click()
    Dim semesternew As String
    semesternew = semester.Caption
    Select Case semesternew
    Case "I"
    semester1 = 1
    Case "II"
    semester1 = 2
    Case "III"
    semester1 = 3
    Case "IV"
    semester1 = 4
    Case "V"
    semester1 = 5
    Case "VI"
    semester1 = 6
    End Select
    DataGrid1.ClearFields
    rs.Open "select Subjectcode,Subjectname,Theory_Practical from subjectcode as s where s.Degree='" & Degree & "' and s.Branch='" & course & "' and s.Year1='" & year1 & "' and s.Year2='" & year2 & "' and s.Semester='" & semester1 & "'  ", con, 1, 3
    Set DataGrid1.DataSource = rs
    End Sub

    Private Sub Command2_Click()
    examfee2.Hide
    examfee1.Show
    End Sub

    Private Sub Command4_Click()
    If rs!Theory_Practical = "theory" Then
    rs2.Open "select Theoryfee from Degreelevel", con, 1, 3
    Set DataGrid2.DataSource = rs2
    ElseIf rs!Theory_Practical = "practical" Then
    rs2.Open "select Practicalfee from Degreelevel", con, 1, 3
    Set DataGrid2.DataSource = rs2
    End If
    End Sub

    Private Sub Form_Load()
    Set con = New ADODB.Connection
    con.Open "Provider=Microsoft.Jet.OLEDB.4.0;Data Source=.\college.mdb;Persist Security Info=False"
    con.CursorLocation = adUseClient
    Set rs = New ADODB.Recordset
    End Sub 
```

* * *

费用表：

```
Heading(Year1,Year2,Theoryfee,Practicalfee) 
values (2001,2003,440,320) 
```

像这样的所有其他值只有不同的值！

主题代码表：

```
Heading(Year1,Year2,Subjectcode,Subjectname,Theory_Practical) 
values (2001,2003,RCCS10CS1,C programming, Theory) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T13:25:36.387

您可以使用如下查询：

```
SELECT subjectcode.Year1, subjectcode.Year2, 
       subjectcode.Subjectcode, subjectcode.Subjectname, 
       subjectcode.Theory_Practical, q.fee
FROM subjectcode 
INNER JOIN (
       SELECT fees.Year1, fees.Year2, "Theory" As FeeType, 
              fees.Theoryfee As Fee
       FROM fees
       UNION ALL
       SELECT fees.Year1, fees.Year2, "Practical" As FeeType, 
              fees.Practicalfee As Fee
       FROM fees)  AS q 
ON (subjectcode.Theory_Practical = q.FeeType) 
   AND (subjectcode.Year2 = q.Year2) 
   AND (subjectcode.Year1 = q.Year1) 
```

但是，您最好重新设计您的费用表以匹配内部 sql 返回的数据，即理论和实际费用的不同行：

```
Year1   Year2   FeeType     Fee
2001    2003    Theory      440
2001    2003    Practical   320 
```

# c++ - 何时在 C++11 中使类型不可移动？

> ID：14302834
> 
> 赞同：129
> 
> 时间：2013-01-13T11:05:05.923
> 
> 标签：c++, c++11, move-semantics, c++-faq

我很惊讶这没有出现在我的搜索结果中，我想有人会问过这个问题，考虑到 C++11 中移动语义的有用性：

### 我什么时候必须（或者对我来说是个好主意）在 C++11 中使一个类不可移动？

（也就是说，除了与现有代码的兼容性问题之外的原因。*）*

* * *

## 回答 #1

> 赞同：111
> 
> 时间：2013-01-13T14:52:52.540

Herb 的回答（在编辑之前）实际上给出了一个*不*应该移动的类型的好例子：`std::mutex`.

操作系统的本机互斥锁类型（例如`pthread_mutex_t`在 POSIX 平台上）可能不是“位置不变的”，这意味着对象的地址是其值的一部分。例如，操作系统可能会保留一个指向所有已初始化互斥对象的指针列表。如果`std::mutex`包含本机操作系统互斥体类型作为数据成员并且本机类型的地址必须保持固定（因为操作系统维护指向其互斥体的指针列表），那么要么`std::mutex`必须将本机互斥体类型存储在堆上，因此它将保持在在对象之间移动时相同的位置`std::mutex`或`std::mutex`不得移动。将它存储在堆上是不可能的，因为 a`std::mutex`有一个`constexpr`构造函数并且必须有资格进行常量初始化（即静态初始化），以便全局`std::mutex`保证在程序开始执行之前就已经构造好了，所以它的构造函数不能使用`new`. 所以剩下的唯一选择就是`std::mutex`不动。

相同的推理适用于包含需要固定地址的内容的其他类型。如果资源的地址必须保持固定，请不要移动它！

不移动还有另一个论点`std::mutex`，那就是很难安全地移动它，因为您需要知道在移动互斥体的那一刻没有人试图锁定它。由于互斥锁是您可以用来防止数据竞争的构建块之一，如果它们本身不能安全地对抗竞争，那将是不幸的！对于不动产`std::mutex`，你知道一旦它被构建并且在它被销毁之前任何人都可以对它做的唯一事情就是锁定它并解锁它，并且这些操作被明确保证是线程安全的并且不会引入数据竞争。同样的论点也适用于`std::atomic<T>`对象：除非它们可以原子地移动，否则不可能安全地移动它们，另一个线程可能正在尝试调用`compare_exchange_strong`在物体被移动的那一刻。因此，类型不应该是可移动的另一种情况是它们是安全并发代码的低级构建块，并且必须确保对它们的所有操作的原子性。如果对象值可能随时移动到新对象，则需要使用原子变量来保护每个原子变量，以便知道使用它是否安全或已被移动......以及要保护的原子变量那个原子变量，等等……

我想我会概括地说，当一个对象只是一块纯内存，而不是充当值持有者或值抽象的类型时，移动它是没有意义的。`int`不能移动的基本类型：移动它们只是一个副本。你不能从 a 中取出胆量`int`，你可以复制它的值，然后将其设置为零，但它仍然是`int`带有值的，它只是内存字节。但是an`int`仍然是*可移动的*在语言术语中，因为副本是有效的移动操作。然而，对于不可复制的类型，如果您不想或不能移动这块内存并且您也不能复制它的值，那么它就是不可移动的。互斥体或原子变量是内存的特定位置（使用特殊属性处理），因此移动没有意义，也不可复制，因此不可移动。

* * *

## 回答 #2

> 赞同：57
> 
> 时间：2013-01-13T11:47:41.800

简短的回答：如果一个类型是可复制的，它也应该是可移动的。然而，反之则不然：有些类型 like`std::unique_ptr`是可移动的，但复制它们没有意义；这些自然是只能移动的类型。

稍长的答案如下......

有两种主要类型（以及其他更特殊用途的类型，例如特征）：

1.  类似值的类型，例如`int`or `vector<widget>`。这些代表值，自然应该是可复制的。在 C++11 中，通常您应该将移动视为对复制的优化，因此所有可复制类型自然应该是可移动的......在您不这样做的常见情况下，移动只是一种有效的复制方式不再需要原始对象，并且无论如何都会破坏它。

2.  存在于继承层次结构中的类引用类型，例如基类和具有虚拟或受保护成员函数的类。这些通常由指针或引用保存，通常是`base*`or `base&`，因此不提供复制构造以避免切片；如果您确实想像现有对象一样获取另一个对象，您通常会调用一个虚函数，例如`clone`. 这些不需要移动构造或赋值，原因有两个：它们不可复制，并且它们已经具有更有效的自然“移动”操作——您只需复制/移动指向对象的指针，而对象本身不需要必须移动到一个新的内存位置。

大多数类型都属于这两个类别之一，但也有其他类型的类型也有用，只是比较少见。特别是在这里，表达资源的唯一所有权的类型，例如`std::unique_ptr`，自然是只能移动的类型，因为它们不是类似值的（复制它们没有意义）但是您确实可以直接使用它们（并不总是通过指针或引用），因此想要将这种类型的对象从一个地方移动到另一个地方。

* * *

## 回答 #3

> 赞同：18
> 
> 时间：2013-01-14T04:42:20.150

实际上，当我四处搜索时，我发现 C++11 中的一些类型是不可移动的：

*   所有`mutex`类型( `recursive_mutex`, `timed_mutex`, `recursive_timed_mutex`,
*   `condition_variable`
*   `type_info`
*   `error_category`
*   `locale::facet`
*   `random_device`
*   `seed_seq`
*   `ios_base`
*   `basic_istream<charT,traits>::sentry`
*   `basic_ostream<charT,traits>::sentry`
*   所有`atomic`类型
*   `once_flag`

显然有关于 Clang 的讨论：[https ://groups.google.com/forum/?fromgroups=#!topic/comp.std.c++/pCO1Qqb3Xa4](https://groups.google.com/forum/?fromgroups=#!topic/comp.std.c++/pCO1Qqb3Xa4)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-09-30T23:59:27.563

我发现的另一个原因 - 性能。假设您有一个包含值的“a”类。您想要输出一个界面，该界面允许用户在有限的时间内（对于范围）更改值。

实现此目的的一种方法是从“a”返回一个“范围保护”对象，该对象将值设置回其析构函数中，如下所示：

```
class a 
{ 
    int value = 0;

  public:

    struct change_value_guard 
    { 
        friend a;
      private:
        change_value_guard(a& owner, int value) 
            : owner{ owner } 
        { 
            owner.value = value;
        }
        change_value_guard(change_value_guard&&) = delete;
        change_value_guard(const change_value_guard&) = delete;
      public:
        ~change_value_guard()
        {
            owner.value = 0;
        }
      private:
        a& owner;
    };

    change_value_guard changeValue(int newValue)
    { 
        return{ *this, newValue };
    }
};

int main()
{
    a a;
    {
        auto guard = a.changeValue(2);
    }
} 
```

如果我让 change_value_guard 可移动，我必须在其析构函数中添加一个“if”，以检查保护是否已被移动——这是一个额外的 if，并且会影响性​​能。

是的，当然，它可能可以被任何理智的优化器优化掉，但是语言（这需要 C++17，但是为了能够返回不可移动类型需要保证复制省略）仍然很好如果我们不打算移动守卫，除了从创建函数中返回它（不为你不使用的东西付费原则），则支付这笔费用。

# iis-7 - 无法在 Windows server 2003 R2 上连接到 IIS7 中的本地主机？

> ID：14302840
> 
> 赞同：0
> 
> 时间：2013-01-13T11:06:39.277
> 
> 标签：iis-7, windows-server-2003

我正在尝试在 Windows server 2003 R2 上连接到 IIS7 中的本地主机，但是这个错误一直出现，你能给我一个解决方案吗？请检查：

![在此处输入图像描述](../Images/5d4414bff1dec90676ebba2661a855a8.png)

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T06:41:19.473

不幸的是，我不得不格式化 Windows server 2003 R2 并用 Windows server 2008 R2 替换它，现在它工作得很好。

# ajax - 如何刷新网页的特定部分？

> ID：14302842
> 
> 赞同：0
> 
> 时间：2013-01-13T11:06:41.770
> 
> 标签：ajax, jquery

我有一个自动刷新按钮，当按钮打开时，我的网页的特定部分应该刷新。例如，如果我有一个 DIV，当按钮打开时，该 DIV 中的内容应该重新加载。如果按钮关闭，则 DIV 应保持不变。

只有当自动刷新按钮打开时，我才有编码，整个页面都在刷新。是否可以刷新网页的特定部分？

这是我的编码：-

```
var int=self.setInterval(function(){refreshPage()},60000);
$(document).ready(function() {
   var hashTag = window.location.href.split('#');
   if (hashTag[1] == 'reload') {
      $('#refresh').addClass('refresh-on').html('');  
   }
   $('#refresh').on('click', function() { 
      $(this).toggleClass('refresh-on'); 
      if ($(this).hasClass('refresh-on'))
         $(this).html('Refresh On');
      else 
         $(this).html('Refresh Off');
   });
});

function refreshPage() {
   if ($('#refresh').hasClass('refresh-on')) {
      location.hash = 'reload';
      window.location.reload();
   } else
     location.hash = '';
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T11:43:57.943

如果可以将要刷新的内容保存在单独的页面中，则可以使用简单的 jquery 的 load() 方法。

将要刷新的内容放在'content.php'中

```
$("#refreshDIV").load("content.php"); 
```

您可以在需要时调用此方法，它可以动态加载。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-13T15:10:29.983

确实，jquery 的 load() 方法是使用外部脚本更新分离内容的好方法……
下面是一个包含 2 个 div 的小 html 页面的示例。
一个是每 1 秒刷新一次，另一个是每 3 秒刷新一次……
Div 正在使用 refreshDiv 函数进行刷新。
refreshDiv 函数接受 3 个参数：

*   **div_id**：这是要刷新的 div 的 id；
*   **script_file**：您要启动以刷新 div 的脚本；（脚本/目录）；
*   **data**：通过 GET 方法传递给脚本（PHP）的一些数据；

    ```
    <html>
    <head>
       <title>Stack OverFlow - 14302842</title>
       <script type="text/javascript" src="http://code.jquery.com/jquery-latest.js"></script>
       <script type="text/javascript">
          function refreshDiv(div_id, script_file, data) {
             var today = new Date();
             $("#"+div_id).load("scripts/"+script_file+"?_"+Math.random()+"&data="+data);           
          }

          $(document).ready(function () {
              refreshDiv('div1','ls.php','/tmp');
              refreshDiv('div2','ls.php','/home');

              setInterval(function() {
                  // Do something every 3 seconds
                  refreshDiv('div1','ls.php','/tmp');
              }, 3000);

              setInterval(function() {
                 // Do something every 1 seconds
                 refreshDiv('div2','ls.php','/home');
              }, 1000);

          });
       </script>
    </head>
    <body>
        <div id="div1" style="color: #F00; border: 1px solid #F00; text-align: center;">Some Text</div>
        <div id="div2" style="color: #00F; border: 1px solid #00F; text-align: center;">Some Text</div>
    </body>
    </html> 
    ```

# android - 获取从市场安装的应用程序列表

> ID：14302844
> 
> 赞同：0
> 
> 时间：2013-01-13T11:07:23.977
> 
> 标签：android, package, google-play

我有列出所有已安装应用程序的代码：

```
 final PackageManager pm = getPackageManager();
    //get a list of installed apps.
            List<ApplicationInfo> packages = pm
                    .getInstalledApplications(PackageManager.GET_META_DATA);

            for (ApplicationInfo packageInfo : packages) {

                Log.d("Tag", "Installed package :" + packageInfo.packageName); 

            } 
```

如何区分系统应用程序和从市场上安装的应用程序？我想我想出了在包名中搜索“android”并将其标记为系统应用程序的非常规方法。有没有一种传统的方法可以让我只找到第三方（来自市场）应用程序？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T11:19:27.320

您可以对检索到的所有软件包调用[getInstallerPackageName()](http://developer.android.com/reference/android/content/pm/PackageManager.html#getInstallerPackageName%28java.lang.String%29)。虽然这可以被篡改，但它应该足以满足您的目的。

你也可以使用类似的东西：

```
List<ApplicationInfo> apps = getPackageManager().getInstalledApplications(0);
for (int i=0; i < apps.size(); i++)
{
    if ((apps.get(i).applicationInfo.flags & ApplicationInfo.FLAG_SYSTEM) != 0)
    {
         //System app
   }
} 
```

# bash - 使用 ifdef 和 ifndef 指令

> ID：14302846
> 
> 赞同：2
> 
> 时间：2013-01-13T11:07:25.363
> 
> 标签：bash, makefile, gnu-make, conditional-compilation, ifndef

我正在尝试检查是否使用 定义了变量`ifndef/ifdef`，但我不断收到`not found`执行错误。我正在使用`GNU Make 3.81`，这是我所拥有的片段：

```
all: _images                 
    $(call clean, .)         
    $(call compile, .)       
    @$(OPENER) *.pdf &       

_images:                     
    $(call clean, "images")  
    $(call compile, "images")

define clean                                             
    @rm -f ${1}/*.log ${1}/*.aux ${1}/*.pdf              
endef                                                    

define compile                                           

    ifdef ${1}                                           
        dir = ${1}                                       
    else                                                 
        dir = .                                          
    endif                                                

    ifdef ${2}                                           
        outdir = ${2}                                    
    else                                                 
        outdir = ${1}                                    
    endif                                                

    @$(COMPILER) -output-directory ${outdir} ${dir}/*.tex

endef 
```

以及确切的错误：

```
$ make                       
ifdef  "images"              
/bin/sh: 1: ifdef: not found 
make: *** [_images] Error 127 
```

**编辑**：

考虑到 Barmar 的评论，得出以下结论：

define 的内容是 shell 命令行，而不是 make 指令；要在定义块内的命令内换行，必须对换行符进行转义 -- 使用 \; 此外，与单行命令对应的每个块都是单独执行的，每个块在不同的 shell 执行中执行，这意味着如果打算访问下一个单行块中的变量值，定义局部变量将不起作用。

感谢 Tripleee 的出色工作。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-13T13:20:15.007

您可以将 shell 的功能与 Make 结合起来以获得相当简洁的定义。

```
define compile
        @dir="${1}"; outdir="${2}"; outdir=$${outdir:-"$dir"}; \
        $(COMPILER) -output-directory "$${outdir}" "$${dir:-.}/*.tex 
```

double-dollar 是一种将单个美元符号传递给 shell 的转义。该构造`${variable:-value}`返回 的值，`$variable`除非它未设置或为空，在这种情况下它返回`value`。因为在 shell 计算这个表达式之前`${1}`and`${2}`被静态字符串替换，我们必须在检查它们之前采取迂回的路线将它们分配给变量。

这也演示了如何将两个“单行”组合成一个 shell 调用。分号是语句终止符（基本上相当于换行符），反斜杠和换行符的序列导致下一行与当前行合并为单个“逻辑行”。

这很复杂，我建议你省略前导`@`，但我把它留在里面只是为了显示它所属的位置。如果您想要静默操作，一旦您对其进行了正确调试，请使用`make -s`.

# c++ - 通用引用的语法

> ID：14302849
> 
> 赞同：27
> 
> 时间：2013-01-13T11:07:45.450
> 
> 标签：c++, c++11, language-design, rvalue-reference, forwarding-reference

这是一个右值引用：

```
void foo(int&& a); 
```

它不绑定到左值：

```
int i = 42;
foo(i);   // error 
```

这是一个通用参考：

```
template<typename T>
void bar(T&& b); 
```

它绑定到右值，也绑定到左值：

```
bar(i);   // okay 
```

这是一个右值引用：

```
template<typename T>
struct X
{
    void baz(T&& c);
}; 
```

它不绑定到左值：

```
X<int> x;
x.baz(i);   // error 
```

为什么通用引用使用与右值引用相同的语法？这不是不必要的混乱来源吗？委员会是否考虑过替代语法，例如,`T&&&`或（只是在开玩笑）？如果是这样，拒绝替代语法的原因是什么？`T&*``T@``T&42`

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-01-13T14:03:50.037

通用引用，例如`T&&`可以推断`T`为“*对象类型*”或“*引用类型*”

在您的示例中，它可以推断`T`为`int`传递右值时，因此函数参数是`int&&`，或者它可以推断`T`为`int&`传递左值时，在这种情况下，函数参数是`int&`（因为参考折叠规则说`std::add_rvalue_reference<int&>::type`is just `int&`）

如果`T`不是由函数调用推断出（如您的`X::baz`示例中），则不能推断为`int&`，因此该引用不是通用引用。

所以恕我直言，真的不需要新语法，它非常适合模板参数推导和引用折叠规则，只需稍加调整即可将模板参数推导出为引用类型（在 C++03 中，函数模板参数类型`T`或者`T&`总是推断`T`为对象类型。）

这些语义和这种语法是从一开始就提出的，当时提出了右值引用和对参数推导规则的调整作为转发问题的解决方案，请参阅[N1385](http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2002/n1385.htm#s7)。使用这种语法来提供完美的转发是在提出右值引用的同时提出的，目的是为了移动语义：[N1377](http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2002/n1377.htm)与 N1385在同一个邮件中。我认为从未认真提出过替代语法。

恕我直言，无论如何，另一种语法实际上会更加混乱。如果您有`template<typename T> void bar(T&@)`通用引用的语法，但语义与我们今天的语义相同，那么在调用`bar(i)`模板参数时`T`可以推断为`int&`or`int`并且函数参数的类型为`int&`or `int&&`...两者都不是“ `T&@`”（不管那个类型是什么。）所以你会有一个声明符的语言语法，`T&@`它不是一个永远存在的类型，因为它实际上总是引用其他类型，要么`int&`要么`int&&`。

至少我们得到的语法`T&&`是一个真正的类型，并且引用折叠规则并不特定于使用通用引用的函数模板，它们与模板之外的类型系统的其余部分完全一致：

```
struct A {} a;
typedef A& T;
T&& ref = a;    // T&& == A& 
```

或等效地：

```
struct A {} a;
typedef A& T;
std::add_rvalue_reference<T>::type ref = a;    // type == A& 
```

什么时候`T`是左值引用类型，`T&&`也是。我认为不需要新的语法，规则真的没有那么复杂或混乱。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2016-12-12T00:52:07.243

> 为什么通用引用使用与右值引用相同的语法？这不是不必要的混乱来源吗？委员会有没有考虑过替代语法......

是的，这很令人困惑，IMO（我在这里不同意@JonathanWakely）。我记得在一次关于整体功能早期设计的非正式讨论（我认为是午餐）中，我们确实讨论了不同的符号（Howard Hinnant 和 Dave Abrahams 在那里提出了他们的想法，EDG 人员就如何适应它提供了反馈在核心语言中；这早于 N1377）。我想我记得`&?`并被`&|&&`考虑过，但所有这些都是口头的；我不知道会议记录已被记录（但我相信这也是 John 建议使用`&&`用于右值引用）。然而，这些是设计的早期阶段，当时有很多基本的语义问题需要考虑。（例如，在同一次午餐讨论中，我们还提出了不具有两种引用，而是具有两种引用参数的可能性。）

在“类模板参数推导”(P0099R3) 的 C++17 特性中可以找到由此引起的混淆的最新方面。通过转换构造函数和构造函数模板的签名形成函数模板签名。对于类似的东西：

```
template<typename T> struct S {
  S(T&&);
}; 
```

函数模板签名

```
template<typename T> auto S(T&&)->S<T>; 
```

形成用于扣除声明之类的

```
int i = 42;
S s = i;  // Deduce S<int> or S<int&>? 
```

在这里推论`T = int&`是违反直觉的。因此，在这种情况下，我们必须添加“特殊扣除规则以禁用特殊扣除规则”:-(

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-12-17T13:10:35.000

作为一个只有几年 C++ 经验的开发人员，我必须同意通用引用令人困惑。在我看来，这些东西完全无法理解，更不用说在不阅读 Scott Meyers 和/或观看 YouTube 上的相关谈话的情况下积极使用。

不仅仅是 && 可以是右值引用或“通用引用”，它还是模板用于区分引用类型的方式。想象一下，您是一名从事软件开发的普通工程师。你读到了类似的东西：

```
template <typename T>
void foo (T&& whatever) {...} 
```

然后 foo 的函数体告诉你输入参数必须是在内部库中定义的非常特定的类类型。太好了，您认为，该模板在当前软件版本中已过时，可能是以前开发的遗留物，所以让我们摆脱它。

祝编译器错误好运……</p>

没有明确了解这一点的人不会假设您在这里将 foo 实现为函数模板，只是为了使用模板推导规则和引用恰好重合的折叠规则，以便您最终得到所谓的“完美转发”。它看起来真的比其他任何东西都更像是一个肮脏的黑客。我认为为通用引用创建语法会使事情变得更简单，并且曾经在旧代码库上工作的开发人员至少会知道这里有*一些*东西必须用谷歌搜索。只是我的两分钱。

# java - JAVA中的随机数生成

> ID：14302850
> 
> 赞同：3
> 
> 时间：2013-01-13T11:08:09.340
> 
> 标签：java, algorithm, data-structures

我知道 JAVA Random 类及其用途。但是我想生成一个不应该重复的随机数，直到该范围内的所有数字至少生成一次。谁能给我一些参考..？

在使用 Random 类时，我面临的问题是有些数字重复了 2 或 3 次，而有些则根本没有生成。在这种情况下，我的应用程序可能会失败，因为我有另一个线程根据生成的数字处理一些请求....当出现延迟并且下一个唯一数字不可用时，它会停止而不处理非生成的数字...

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-01-13T11:13:24.513

您可以生成范围内的所有值并将它们打乱。`Collections.shuffle()` 一旦你使用了每一个值，重复一遍。

想象一下你有一副牌，你拿一副牌，每张牌都有一次，你把它洗牌，你就会知道每张牌随机出现的顺序，只有一次。当一副牌完成后，您再次拿走所有牌并重新洗牌（或新牌组并洗牌）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-13T11:14:25.023

*   创建一个包含范围内所有可能随机数的列表。
*   不要使用随机数作为结果，而是使用随机整数来选择列表中的索引
*   将其从列表中删除并返回。

注意将随机整数的范围调整为当前列表大小（每次获得新数字时它会减一）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-13T11:14:31.573

您可以随身携带一份已经挑选出的所有数字的列表，并检查新的随机数是否在该列表中 这是一个提出相同问题的人[的示例](https://stackoverflow.com/questions/4040001/creating-random-numbers-with-no-duplicates)

# asp.net-mvc - 由于在 EF5、MVC4 应用程序中实验性选择错误的脚手架选项而产生的问题

> ID：14302862
> 
> 赞同：1
> 
> 时间：2013-01-13T11:09:47.720
> 
> 标签：asp.net-mvc, entity-framework, asp.net-mvc-4, entity-framework-5

我第一次使用 VS2012 和 EF5。我开发的应用程序就像 MVC3 、 EF4.1 应用程序一样，没有使用任何新功能。我已经有一个数据库，我创建了数据库上下文、模型、控制器和视图。每件事都运行良好。然后我在数据库中创建了一个新表 Directorate，在 dbcontext 中创建了它的模型和数据库映射。在创建它的控制器时，我选择了“**使用实体框架进行读/写操作的 MVC 控制器**”作为体验，看看会发生什么。我选择了我的上下文和模型。当我运行该应用程序时，它在 db 中创建了一个名为 DirectorateModel 的新表，并在上下文中插入了映射。由于我已经创建了表和映射，因此我删除了由于此操作而添加的每个新功能，即我删除了表、上下文映射、控制器和视图。

但是现在当我运行应用程序时，它会给出错误：

> 自创建数据库以来，支持**“ArchieveingDBContext”**上下文的模型已更改。考虑使用 Code First 迁移来更新数据库 (http://go.microsoft.com/fwlink/?LinkId=238269)

我访问了提到的 url，但它是关于我不想使用的代码优先迁移。任何人请帮助我如何解决这个问题，我想我必须删除由于选择错误的脚手架选项而创建的东西。

我只希望我的应用程序在以前的工作状态下运行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T00:02:36.150

您可以通过调用来修复它：

> Database.SetInitializer(null);

在 Global.asax 的 Application_Start 方法中

您不想在这样的现有数据库之上进行初始化。

见：[这个问题](https://stackoverflow.com/questions/3552000/entity-framework-code-only-error-the-model-backing-the-context-has-changed-sinc)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-13T12:28:44.303

您只需要设置正确的数据库初始化程序：

```
Database.SetInitializer<YourContextType>(new CreateDatabaseIfNotExists()) 
```

和这项工作

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-27T10:51:20.547

从您的 .EDMX 模型和您使用脚手架创建的控制器/视图中删除 Directorate 实体。

根据需要更改数据库，然后转到 VS 模型设计器（只需打开您的 .EDMX 模型）`Update model from database`并保存更改。

现在您可以通过脚手架添加视图/控制器，而无需担心......

# ajax - Balupton Ajaxify html5 主页问题

> ID：14302865
> 
> 赞同：3
> 
> 时间：2013-01-13T11:10:41.757
> 
> 标签：ajax, html, back-button, ajaxify

我正在使用 Balupton 的 ajaxify 要点：[https ://github.com/browserstate/ajaxify](https://github.com/browserstate/ajaxify)

我的主页包含拇指等帖子的链接。帖子内容正在加载到 ajax 容器中。所以主页内容保留在页面上，而其他内容加载到容器 div 中。

当我在主页并单击帖子链接时，它运行良好，帖子的内容在容器中加载没有问题。现在，如果我点击浏览器的后退按钮，主页将加载到容器中，因此我将主页的内容放在两个不同的 div 中。是否可以将主页排除在容器中加载？有没有人这样做过？

# gwt - 从 GWT 读取属性文件

> ID：14302866
> 
> 赞同：0
> 
> 时间：2013-01-13T11:11:08.830
> 
> 标签：gwt, properties, rpc

我得到了这种错误。尝试读取属性文件时它在开发模式下工作正常但是当我尝试将应用程序部署到 tomcat 时出现此错误。

```
SEVERE: Exception while dispatching incoming RPC call
com.google.gwt.user.client.rpc.SerializationException: Type 'java.io.FileNotFoundException' was not included in the set of types which can be serialized by this SerializationPolicy or its Class object     not found in the classpath
at com.google.gwt.user.server.rpc.impl.ServerSerializationStreamWriter.serialize(ServerSerializationStreamWriter.java:619)
at com.google.gwt.user.client.rpc.impl.AbstractSerializationStreamWriter.writeObject(AbstractSerializationStreamWriter.java:126)
at com.google.gwt.user.server.rpc.impl.ServerSerializationStreamWriter$ValueWriter$8.write(ServerSerializationStreamWriter.java:153)
at com.google.gwt.user.server.rpc.impl.ServerSerializationStreamWriter.serializeValue(ServerSerializationStreamWriter.java:539)
at com.google.gwt.user.server.rpc.RPC.encodeResponse(RPC.java:616)
at com.google.gwt.user.server.rpc.RPC.encodeResponseForFailure(RPC.java:390)
at com.google.gwt.user.server.rpc.RPC.invokeAndEncodeResponse(RPC.java:588)
at com.google.gwt.user.server.rpc.RemoteServiceServlet.processCall(RemoteServiceServlet.java:208)
at com.google.gwt.user.server.rpc.RemoteServiceServlet.processPost(RemoteServiceServlet.java:248)
at com.google.gwt.user.server.rpc.AbstractRemoteServiceServlet.doPost(AbstractRemoteServiceServlet.java:62)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:647)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:728)
at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:305)
at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:222)
at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:123)
at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:472)
at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:171)
at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:99)
at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:936)
at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:407)
at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:1004)
at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:589)
at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:312)
at java.util.concurrent.ThreadPoolExecutor.runWorker(Unknown Source)
at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)
at java.lang.Thread.run(Unknown Source) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T11:29:14.890

每当您进行 Rpc 调用时，所涉及的类都必须实现`java.io.Serializable`. 在你的情况下，这可能已经发生了。

在您的`service class`方法中，您在某处提到了`java.io.FileNotFoundException`未实现的参数或返回类型之一`java.io.Serializable`。因此它不能被序列化。

**编辑：**这可能会帮助您[在进行 RPC 调用时出现序列化异常](https://stackoverflow.com/questions/14303223/serialization-exception-while-making-an-rpc-call/14303313#14303313)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-13T19:25:25.327

每个可能进入客户端的异常都必须在接口的`throws`子句中声明。`RemoteService`

如果它在 DevMode 下工作，那可能是因为你没有这样的异常。你必须找到导致的原因`FileNotFoundException`。

# http - 部分应用程序的 Scalatra 基本身份验证

> ID：14302868
> 
> 赞同：1
> 
> 时间：2013-01-13T11:11:34.037
> 
> 标签：http, scala, basic-authentication, scalatra

我试图弄清楚如何编写一个为某些 URL 启用基本身份验证的应用程序。经过身份验证的部分不应具有基于表单的身份验证，只是我可以从 Javascript/JQuery 轻松完成的默认登录。我见过[一些看起来很复杂的](http://www.jaredarmstrong.name/2011/08/scalatra-an-example-authentication-app/) [例子](https://gist.github.com/660701)，当我尝试使用它们时，很多东西都被弃用了，一般来说，即使现在编译也需要做很多工作。

那么这些示例仍然是 Scalatra 必须提供的最好的，还是现在有更简单的方法？

我正在使用 Scalatra（带有 scalatra-auth）版本 2.1.1。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-13T12:46:05.150

找到了一个[更简单的示例](https://gist.github.com/2708163)并使以下代码正常工作。

```
package mc.nulty

import org.scalatra.auth.strategy.BasicAuthStrategy.BasicAuthRequest
import org.scalatra._
import scalate.ScalateSupport

class McNultyServlet extends ScalatraServlet with ScalateSupport {

  get("/") {
    basicAuth
    <html>
      <body>
        <h1>Hello, world!</h1>
        Say <a href="hello-scalate">hello to Scalate</a>.
      </body>
    </html>
  }

  notFound {
    // remove content type in case it was set through an action
    contentType = null
    // Try to render a ScalateTemplate if no route matched
    findTemplate(requestPath) map { path =>
      contentType = "text/html"
      layoutTemplate(path)
    } orElse serveStaticResource() getOrElse resourceNotFound()
  }

  protected def basicAuth() = {
    val req = new BasicAuthRequest(request)

    def notAuthenticated() {
      response.setHeader("WWW-Authenticate", "Basic realm=\"%s\"" format "mc-nulty")
      halt(401, "Unauthenticated")
    }

    if(!req.providesAuth) {
      notAuthenticated
    }
    if(!req.isBasicAuth) {
      halt(400, "Bad Request")
    }
    val user = DAO.validateLoginPassword(req.username, req.password)
    if (user != null)
      response.setHeader("REMOTE_USER", "user.id")
    else {
      notAuthenticated
    }
    Option(user)
  }

  object DAO {
    def validateLoginPassword(username: String, password: String) : User = {
      if (username.equals("foo")) new User()
      else null
    }
  }
  class User(val id:String = "dummyid") {}
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-03T14:55:46.503

现在有一个关于身份验证的 Scalatra 指南，它涵盖了您正在寻找的基本身份验证案例。见[http://scalatra.org/2.2/guides/http/authentication.html](http://scalatra.org/2.2/guides/http/authentication.html)

Scalatra 的身份验证集成不应在 Scalatra 2.1.1（您正在使用）和即将发布的 Scalatra 2.2.0 之间发生变化，因此该指南对您应该仍然有效。

# ruby-on-rails-3 - 了解 Rails / PG 解释

> ID：14302874
> 
> 赞同：0
> 
> 时间：2013-01-13T11:12:37.813
> 
> 标签：ruby-on-rails-3, postgresql, explain

我知道这是一个尴尬的问题..但我不明白什么`EXPLAIN`解释..

我的查询是`User.last`，花了超过 0.5 秒这可能是最简单的查询，但似乎解释解释它有困难..

我不明白什么是`QUERY PLAN` 宽度之后的任何内容？什么是成本？它如何解释查询在哪里花费了更多时间？

```
[40] pry(main)> User.last
  User Load (671.0ms)  SELECT "users".* FROM "users" ORDER BY "users"."id" DESC LIMIT 1
  EXPLAIN (39.0ms)  EXPLAIN SELECT "users".* FROM "users" ORDER BY "users"."id" DESC LIMIT 1
EXPLAIN for: SELECT  "users".* FROM "users"  ORDER BY "users"."id" DESC LIMIT 1
                             QUERY PLAN
--------------------------------------------------------------------
 Limit  (cost=1.08..1.08 rows=1 width=2861)
   ->  Sort  (cost=1.08..1.09 rows=5 width=2861)
         Sort Key: id
         ->  Seq Scan on users  (cost=0.00..1.05 rows=5 width=2861)
(4 rows) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-13T11:24:13.130

查询计划显示查询每个部分的性能成本。

例如：

*   *cost=0.00* - 估计的启动成本（输出扫描开始之前花费的时间，例如，在排序节点中进行排序的时间。）
*   *..1.05* - 估计总成本（如果要检索所有行，它们可能不是：例如，带有 LIMIT 子句的查询将停止支付限制计划节点的输入节点的总成本。）
*   *rows=5* - 此计划节点输出的估计行数（同样，仅当执行完成时。）
*   *width=2861* - 此计划节点输出的行的估计平均宽度（以字节为单位）

从[这里](http://www.postgresql.org/docs/8.1/static/performance-tips.html#USING-EXPLAIN)。

有关更多信息，请查看[这个](http://www.postgresql.org/docs/8.1/static/sql-explain.html)和[那个](http://www.postgresql.org/docs/8.1/static/performance-tips.html#USING-EXPLAIN)链接。

# android - 将 Rajawali 框架添加到项目时出错

> ID：14302875
> 
> 赞同：0
> 
> 时间：2013-01-13T11:12:42.860
> 
> 标签：android, rajawali

我计划测试 OpenGL 框架 Rajawali。当我按照有关如何设置它的教程进行操作时，我会执行以下操作：

1.  创建一个安卓项目。
2.  导入 Rajawali 源代码。一旦完成，我就会收到错误消息：

**“对于 WallpaperService.Engine Wallpaper.java /Rajawali-master/src/rajawali/wallpaper line 312 类型，方法 setOffsetNotificationsEnabled(boolean) 未定义”。**

和

**“Wallpaper.WallpaperEngine 类型的方法 setOffsetNotificationsEnabled(boolean) 必须覆盖或实现超类型方法 Wallpaper.java /Rajawali-master/src/rajawali/wallpaper line 310”。**

1.  当我尝试将 Rajawali 项目与我创建的项目链接时，出现错误：

**容器“Android Dependencies”引用了不存在的库“D:\Prosjekter\Rajawij\Rajawali-master\bin\rajawali-master.jar”。**

和

**“在解决构建路径错误之前无法构建项目”。**<--- 我猜应该在其他错误得到修复后立即消失。

任何人都有 Rajawali 的经验或对我如何解决问题有想法？

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T16:59:13.007

几个月来，我一直在广泛使用 Rajawali。我会确保你的所有谷歌 API 都安装到 4.2+ 也一定要从他们的 github 上获取最新的 Master 分支。教程页面上的链接已过期。[https://github.com/MasDennis/Rajawali](https://github.com/MasDennis/Rajawali)

他们不再使用已编译的 JAR，而是鼓励将其作为库链接到您的项目。当您这样做时，请务必清理所有项目并确保您的项目中没有任何文件或文件夹与 Rajawalis libs 文件夹中的文件或文件夹重复。

祝你好运，它是一个很棒的框架。

# ios - 正方体崩溃

> ID：14302877
> 
> 赞同：2
> 
> 时间：2013-01-13T11:12:50.993
> 
> 标签：ios, objective-c, xcode, tesseract

我在我的 iOS 设备上使用 tesseract，它一直正常工作，直到最近它开始在我身上崩溃。我一遍又一遍地使用相同的图像进行测试，在此之前我已经连续工作了大约 75 次。我唯一能想到的是我从我的 iOS 设备中删除了该应用程序，然后通过 Xcode 再次运行它。

我远不是 tesseract 方面的专家，我真的可以就下一步做什么提出一些建议，因为我无法再阅读图像，所以浪费了我所有的时间真的很失望。谢谢

这是此方法中的 tesseract 文件时出现的崩溃错误

```
- (BOOL)recognize {
int returnCode = _tesseract->Recognize(NULL); // here is where the arrow points on the crash
return (returnCode == 0) ? YES : NO;
 } 
```

这是崩溃的快照

![在此处输入图像描述](../Images/956643aa8734253b9c5e60c63ba2ef79.png)

# visual-c++ - 我可以从控制台应用程序中读取退出值吗？

> ID：14302883
> 
> 赞同：1
> 
> 时间：2013-01-13T11:13:51.787
> 
> 标签：visual-c++, operating-system, windows-xp

我想从我的控制台应用程序中读取退出值，以便在退出之前退出该应用程序的所有相关线程。

![在此处输入图像描述](../Images/c87d3dc1d4de042f693906ed59290e57.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T11:21:34.450

看看[https://stackoverflow.com/questions/298498/c-console-break](https://stackoverflow.com/questions/298498/c-console-breaking)。您需要使用的标准库是[csignal](http://en.cppreference.com/w/cpp/header/csignal)

您可以做的是注册强制您的应用程序关闭（SIGTERM）并在那里执行逻辑的信号，例如退出您的多个线程。[这篇文章表明这​​也适用于 Windows。](https://stackoverflow.com/a/181594/1520364)

[您还可以使用atexit](http://en.cppreference.com/w/cpp/utility/program/atexit)注册一个函数，该函数似乎可以从 main() 等中正常退出，但不确定关闭终端是否算作“正常退出”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-13T12:21:27.920

> 在 Windows 上为我工作 试试看

```
#include <csignal>
#include <iostream>
#include <ostream>
#include <string>
using namespace std;

namespace
{
    volatile sig_atomic_t exit;

    void signal_handler(int sig)
    {
        signal(sig, signal_handler);
        exit= 1;
    }
}

int main()
{
    signal(SIGINT, signal_handler);
    signal(SIGTERM, signal_handler);
#ifdef SIGBREAK
   signal(SIGBREAK, signal_handler);
#endif

   while (!exit)
   {
       /* do something */
   }
   // Catch signal here
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-13T11:21:41.410

*编辑：*好的，看来您希望在进程退出后立即收到通知。抱歉，由于“退出值”一词，我误读了您的问题。好吧，如果您通过`CreateProcess()`API 启动该过程，您应该可以`WaitForSingleObject()`在句柄上进行操作。此函数将阻塞，直到进程退出。因此，您可以放置​​在此调用后进程停止后要执行的所有代码，一切都应该没问题。

如果您实际上想要进程的退出代码（`return X`in `main()`）：

以编程方式，您可以`GetExitCodeProcess()`从 WinAPI 使用：

[http://msdn.microsoft.com/en-us/library/windows/desktop/ms683189(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/ms683189(v=vs.85).aspx)

在 shell 中，使用`%errorlevel%`变量。

# css - CSS样式-百分比vs em vs px？

> ID：14302884
> 
> 赞同：6
> 
> 时间：2013-01-13T11:14:05.690
> 
> 标签：css, pixel, em

在网上阅读了几篇文章后，我对何时使用`percent`,`em`或`px`for `div´s`, `input´s`,`font´s`等感到有点困惑`buttons`......

对于我正在开发的网站，我们不想添加响应式设计，根据我从不同文章中了解到的情况，百分比是采用`elements`和`div´s`. 但是我感到困惑，因为我认为即使我使用 för 布局，我也应该能够获得响应式设计，而不是根据设备/屏幕分辨率`px`设置不同的宽度、高度......？`px`

是否有什么时候使用什么的最佳实践？不仅适用于字体大小，还适用于`div´s`其他元素？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-13T11:26:16.783

使用 em 的主要优点是它的实际大小取决于用户的设置，即默认字体的大小。所以喜欢大字体的用户会增加这个值。百分比创建一种静态布局，即使它的大小灵活，结合最小和最大高度/宽度，这可以带来安静的好结果。如果你想有一个灵活的列布局，那么只有一个小屏幕，两个在大屏幕上，最多三个，你还必须使用结合了（最小/最大）宽度/高度的浮动。

一般来说，我不会从质疑最好的单元开始，而且我会开始一个关于布局应该如何工作的基本概念。有时事实证明，对整个 Layout 使用 javascript 是最快和最可靠的解决方案，但是，使用的单元取决于您的特殊目标，并且对于这个问题通常不存在“这是最好的解决方案”，即是什么状态。

问候..

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-13T11:23:39.387

据我所知，, , ,中的`length`值只是您在 CSS 布局中完成工作所必须应用的不同度量。完全没有使用它们的规则。`%``em``px``pt`

事实是，很难告诉你你必须用它们做什么，因为很难告诉你在每个布局中要实现什么。*布局是关于创造力的，你不能只是固定一种方法来适应所有这些。*

我能做的是告诉你基础知识，但你可能已经知道了：你会有一些**绝对值**（`cm`, `mm`, `in`, `pt`, `pc`, `px`）和一些**相对值**（基于文本的：`em`, `ex`, `ch`, `rem`; 基于视口的: `vw`, `vh`, `vmin`, `vmax`） . 相对度量随着它们“基础”的变化而变化。

我个人发现自己使用了很多常见的、绝对的。但我们永远无法说出你想要达到的目标。所以手头有[官方文档](http://www.w3.org/TR/css3-values/#lengths)是很好的，这样你总能找到应对每个布局挑战的最佳方法。

运气！

# java - 关闭 Jsoup 连接

> ID：14302886
> 
> 赞同：5
> 
> 时间：2013-01-13T11:14:06.653
> 
> 标签：java, android, jsoup, network-connection

我需要一点帮助来理解 Jsoup 的基础知识。以下代码有效，但我想知道是否需要以某种方式关闭连接。在 Jsoup 网站上找不到任何关于它的信息。如果在后台执行方法后应用程序保持不变，我每五分钟左右在 log cat 中收到一条消息，说“请求时间失败：java.net.SocketException：协议不支持地址族”。所以我想确保我没有不必要地消耗数据。谢谢你。

```
 protected String doInBackground(String... params) {
        // TODO Auto-generated method stub
        try {
        //  connect to web page based on user input
            Document doc = Jsoup.connect(routeURL).get();

        //  select relevant page elements
            Elements fareStageNumbers = doc.getElementsByClass("fare_stages_inner_table");

       //   test printing out fare stage numbers
            for(Element div : fareStageNumbers){

                Log.v(TAG, div.text());

            }

        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
        return null;
    } 
```

日志信息：

```
 01-12 20:58:28.755: D/SntpClient(78): request time failed: java.net.SocketException: Address family not supported by protocol
    01-12 21:03:28.765: D/SntpClient(78): request time failed: java.net.SocketException: Address family not supported by protocol
    01-12 21:08:28.775: D/SntpClient(78): request time failed: java.net.SocketException: Address family not supported by protocol 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-13T19:14:39.703

请求完成后，Jsoup 会自行关闭连接：

```
// from 'org.jsoup.helper.HttpConnection' class
static HttpConnection.Response execute(Connection.Request req, HttpConnection.Response previousResponse) throws IOException {
    // ...
    HttpURLConnection conn = createConnection(req);
    HttpConnection.Response res;
    try {
        // ...
    } finally {
        // per Java's documentation, this is not necessary, and precludes keepalives. However in practise,
        // connection errors will not be released quickly enough and can cause a too many open files error.
        conn.disconnect();
    }
    // ...
} 
```

例外：您的网址是否包含协议（网址以 eg. 开头`http://`）？

# python - Pycharm设置Mysql数据库驱动

> ID：14302887
> 
> 赞同：3
> 
> 时间：2013-01-13T11:14:07.733
> 
> 标签：python, mysql, django, pycharm

我正在尝试在 pycharm 中设置 mysql 数据库连接...我已经创建了架构并且它可以在 django 等中运行...我正在尝试将数据源直接导入到 pycharm 但我收到以下错误...

```
Connection to Exception in thread "main" java.lang.ClassNotFoundException: com.mysql.jdbc.Driver
    at java.net.URLClassLoader$1.run(URLClassLoader.java:217)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.net.URLClassLoader.findClass(URLClassLoader.java:205)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:321)
    at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:294)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:266)
    at java.lang.Class.forName0(Native Method)
    at java.lang.Class.forName(Class.java:186)
    at com.intellij.persistence.database.console.RemoteJdbcServer.main(RemoteJdbcServer.java:15)
 failed 
```

我应该怎么做才能使数据库连接成为可能？？？我已经为上面的类下载了mysql jar文件......我如何将它包含在pycharm中？？？（我点击了作为提示出现的安装驱动程序按钮，但没有任何反应）...... Thnx......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2016-02-09T10:24:36.943

在 MySQL 连接的属性中，在“常规”选项卡的“测试连接”按钮下方，您应该看到“MySQL”作为“驱动程序：”旁边的链接。点击那个。在下一个屏幕中，在“驱动程序文件”下方的白框中，它应该有一个“下载”链接。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-13T12:02:13.200

我认为你应该安装 MySQL 数据库驱动程序[MySQLdb](http://sourceforge.net/projects/mysql-python/)

PS：如果你使用的是64位windows，你应该去[这里](http://www.codegood.com/archives/4)获取MySQLdb

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-24T08:52:44.803

[查看此视频](http://www.youtube.com/watch?v=P3C0iO1yqhk)以获取示例配置步骤，如果您没有 JDBC 驱动程序，PyCharm 可以为您下载。

# arrays - Excel 根据另一张工作表中列表的内容清除单元格

> ID：14302891
> 
> 赞同：1
> 
> 时间：2013-01-13T11:14:24.813
> 
> 标签：arrays, excel, vba, cell

我有一个从 A1 到 T1 的一千行和 20 列的 Excel Sheet1。该范围内的每个单元格中都有一些数据，通常是一两个单词。在 Sheet2，A1 列中，我有一个包含 1000 个值的数据列表。

我正在使用 VBA 脚本从 Sheet1 中的 Sheet2 列表中查找单词并清除找到的单元格的值。

我现在有一个仅适用于 Sheet1 的 A1 列的 VBA 脚本，它只删除行。这是脚本：

```
Sub DeleteEmails() 
Dim rList As Range 
Dim rCrit As Range 

With Worksheets("Sheet1") 
    .Range("A1").Insert shift:=xlDown: .Range("A1").Value = "Temp Header" 
    Set rList = .Range("A1", .Cells(Rows.Count, 1).End(xlUp)) 
End With 
With Worksheets("Sheet2") 
    .Range("A1").Insert shift:=xlDown: .Range("A1").Value = "Temp Header" 
    Set rCrit = .Range("A1", .Cells(Rows.Count, 1).End(xlUp)) 
End With 

rList.AdvancedFilter Action:=xlFilterInPlace, CriteriaRange:=rCrit, Unique:=False 
rList.Offset(1).SpecialCells(xlCellTypeVisible).Delete shift:=xlUp 
Worksheets("Sheet1").ShowAllData 

rList(1).Delete shift:=xlUp: rCrit(1).Delete shift:=xlUp 

Set rList = Nothing: Set rCrit = Nothing 
End Sub 
```

有人可以帮我吗？我需要清除值，而不是删除行，这应该适用于 Sheet1 的所有列，而不仅仅是 A1。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-13T11:25:06.333

我现在手头没有 excel，所以这可能不是 100% 准确的公式名称，但我相信这条线需要改变：

```
rList.Offset(1).SpecialCells(xlCellTypeVisible).Delete shift:=xlUp 
```

到

```
rList.Offset(1).ClearContents 
```

一旦您将 rList 设置为所需的选择。`Delete`是您删除行而不清除它们的原因。`(1)`是您`A1`只做而不是整个范围的原因。

**编辑**

我测试的最终代码是（包括现在遍历所有列）：

```
Option Explicit

Sub DeleteEmails()
    Dim rList As Range
    Dim rCrit As Range
    Dim rCells As Range
    Dim i As Integer

    With Worksheets("Sheet2")
        .Range("A1").Insert shift:=xlDown
        .Range("A1").Value = "Temp Header"
        Set rCrit = .Range("A1", .Cells(Rows.Count, 1).End(xlUp))
    End With

    Set rCells = Sheet1.Range("$A$1:$T$1")

    rCells.Insert shift:=xlDown

    Set rCells = rCells.Offset(-1)

    rCells.Value = "Temp Header"

    For i = 1 To rCells.Count
        Set rList = Sheet1.Range(rCells(1, i).address, Sheet1.Cells(Rows.Count, i).End(xlUp))

        If rList.Count > 1 Then  'if a column is empty as is in my test case, continue to next column
            rList.AdvancedFilter Action:=xlFilterInPlace, CriteriaRange:=rCrit, Unique:=False
            rList.Offset(1).ClearContents
            Worksheets("Sheet1").ShowAllData
        End If
    Next i

    rCells.Delete shift:=xlUp
    rCrit(1).Delete shift:=xlUp

    Set rList = Nothing: Set rCrit = Nothing

End Sub 
```

PS：我可以要求你不要在vba中使用'：'。在 vba 的默认 IDE 中很难注意到它，我花了一段时间才弄清楚为什么事情会发生但没有意义！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-14T19:24:44.647

这是另一种使用数组的方法，通过最小化工作表（通过范围/单元格的迭代）和代码之间的流量。此代码不使用任何`clear contents`. 只需将整个范围放入一个数组，清理它并输入您需要的内容:) 只需单击一个按钮。

*   根据 OP 的要求进行编辑：添加评论并更改所需表格的代码。

代码：

```
Option Explicit

Sub matchAndClear()
    Dim ws As Worksheet
    Dim arrKeys As Variant, arrData As Variant
    Dim i As Integer, j As Integer, k As Integer

    '-- here we take keys column from Sheet 1 into a 1D array
    arrKeys = WorksheetFunction.Transpose(Sheets(1).Range("A2:A11").Value)
    '-- here we take to be cleaned-up-range from Sheet 2 into a 2D array
    arrData = WorksheetFunction.Transpose(Sheets(2).Range("C2:D6").Value)

    '-- here we iterate through each key in keys array searching it in 
    '-- to-be-cleaned-up array
    For i = LBound(arrKeys) To UBound(arrKeys)
        For j = LBound(arrData, 2) To UBound(arrData, 2)
                '-- when there's a match we clear up that element
                If UCase(Trim(arrData(1, j))) = UCase(Trim(arrKeys(i))) Then
                    arrData(1, j) = " "
                End If
                '-- when there's a match we clear up that element
                If UCase(Trim(arrData(2, j))) = UCase(Trim(arrKeys(i))) Then
                    arrData(2, j) = " "
                End If
        Next j
    Next i

    '-- replace old data with new data in the sheet 2 :)
    Sheets(2).Range("C2").Offset(0, 0).Resize(UBound(arrData, 2), _
    UBound(arrData)) = Application.Transpose(arrData)

End Sub 
```

*   请注意，您真正需要在这里设置的是范围：

    1.  按键范围
    2.  待清理范围

输出：（出于显示目的，我使用的是同一张工作表，但您可以根据需要更改工作表名称。

![在此处输入图像描述](../Images/c79c948d87528febbc52ca328df651a6.png)

根据 OP 对运行 OP 文件的请求进行编辑：

它没有清理所有列的原因是在上面的示例中只清理了两列，而你有 16 列。所以你需要添加另一个`for`循环来遍历它。性能下降不多，但有一点；）以下是运行您发送的工作表后的屏幕截图。除此之外没有什么可以改变的。

代码：

```
'-- here we iterate through each key in keys array searching it in
    '-- to-be-cleaned-up array
    For i = LBound(arrKeys) To UBound(arrKeys)
        For j = LBound(arrData, 2) To UBound(arrData, 2)
            For k = LBound(arrData) To UBound(arrData)
                '-- when there's a match we clear up that element
                If UCase(Trim(arrData(k, j))) = UCase(Trim(arrKeys(i))) Then
                    arrData(k, j) = " "
                End If
            Next k
        Next j
    Next i 
```

# c - 如何将 Atmel AVR 汇编程序代码转换为 C 语言代码

> ID：14302897
> 
> 赞同：3
> 
> 时间：2013-01-13T11:15:10.183
> 
> 标签：c, assembly, reverse-engineering, avr, disassembly

是否可以将 AVR 汇编程序代码转换为用 C 语言编写的原始代码？

如果是，要使用的软件名称是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-13T12:47:10.933

嗯，这个任务是相当 AI 完成的。这基本上是逆向工程的重点：给定一些反汇编代码，了解它的作用，并可能用高级编程语言表示它。有一些[工具试图自动化这个过程](http://boomerang.sourceforge.net/)，但通常不是很容易，有时甚至是不可能的。

因此，最好的办法是阅读程序集，了解它的作用并手动编写等效的 C 代码。如果您不是经验丰富的逆向工程师，这将不是一件容易的事。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-13T18:16:54.653

我相信 IDAPro 支持 AVR 汇编器，并且有一个 HexRay 反编译器可以将 ASM 转换为 C 代码。

但是，HexRay 真的很贵。

# ios - 对于假定的浮点值或双精度值，写 0.0、0.0f 或 .0f 而不是简单的 0 更好吗

> ID：14302898
> 
> 赞同：16
> 
> 时间：2013-01-13T11:15:11.387
> 
> 标签：ios, objective-c

你好，一切都在标题中。该问题尤其适用于所有可能类似于 的值`NSTimeInterval`，`CGFloat`或任何其他浮点或双精度变量。谢谢。

编辑：我要求赋值而不是字符串格式。

编辑 2：问题确实是`0`为 float 或 double 分配一个平原比任何有`f`结尾的东西都要糟糕。

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2013-01-13T11:17:21.213

基本区别如下：

`1.0`或者`1.`是一个双常数

`1.0f`是一个浮点常数

如果没有后缀，其中包含小数的文字 (123.0) 将被视为双精度浮点数。如果您将其分配或传递给单精度变量或参数，编译器将（应该）发出警告。附加`f`告诉编译器您希望将文字视为单精度浮点数。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-01-13T12:01:17.397

如果您正在初始化一个变量，那么它没有任何意义。编译器为您完成所有转换。

```
float a = 0; //Cast int 0 to float 0.0
float b = 0.0; //Cast 0.0 double to float 0.0 as by default floating point constants are double
float c = 0.0f // Assigning float to float. .0f is same as 0.0f 
```

但是，如果您在表达式中使用这些，那么这很有意义。

```
6/5 becomes 1
6/5.0 becomes 1.2 (double value)
6/5.0f becomes 1.2 (float value) 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-13T11:26:34.770

如果您想了解目标 CPU 运行代码或它执行的二进制代码是否有任何差异，您可以轻松地将编译代码的命令行之一从 XCode 复制到命令行，修复缺少的环境变量并添加-S。这样你就可以得到汇编输出，你可以用它来比较。如果您将所有 4 个变体放在一个小的示例源文件中，您可以在之后比较生成的汇编代码，即使您不熟悉 ARM 汇编。

根据我的 ARM 组装经验（好吧...... 6 年前和 GCC），我会打赌 1ct 类似对寄存器进行异或运算以将其内容刷新为 0。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-01-13T11:34:47.417

无论您使用 0.0、.0 还是 0.0f 甚至 0f 都没有太大区别。（有一些关于双精度和浮点数）您甚至可以使用 (float) 0。

但是 0 和一些浮点表示法之间存在显着差异。零总是某种类型的整数。当您可能需要浮点运算时，这可能会强制机器执行整数运算。

我没有一个方便的零的好例子，但我有一个一般的浮点/整数，前几天几乎让我发疯。

我习惯了 8-Bit-RGB 颜色 那是因为我作为摄影师的爱好以及我最近作为 html 开发人员的背景。所以我觉得很难适应可可风格的 0..1 分数的红色、绿色和黄色。为了克服这个问题，我想使用我习惯的值并将它们除以 255。

```
[CGColor colorWithRed: 128/255 green: 128/255 andYellow: 128/255]; 
```

那应该会给我一些不错的中灰色。但它没有。我尝试过的所有东西要么变成黑色，要么变成白色。首先，我认为这是由我使用此颜色的 UI 文本对象的一些未记录的缺陷引起的。花了一段时间才意识到这个常量值强制整数运算只能向上或向下舍入到 0 和 1。这个 expession 最终实现了我想要实现的目标：

```
[CGColor colorWithRed: 128.0/255.0 green: 128.0/255.0 andYellow: 128.0/255.0]; 
```

您可以使用更少的 .0 来实现相同的目标。但根据需要拥有更多它们并没有什么坏处。128.0f/(float)255 也可以。

编辑以响应您的“Edit2”：

```
float fvar; 
fvar = 0; 
```

对...

```
fvar = .0; 
```

最后，它根本没有任何区别。fvar 将包含一个接近（但不总是等于）0.0 的浮点值。对于 60 世纪和 70 世纪的编译器，我猜想存在与`fvar = 0`. 也就是说，编译器首先创建一个 int 0 ，然后必须在分配之前将其转换为 float 。今天的现代编译器应该比旧的编译器更好地自动优化。最后，我必须查看机器代码输出，看看它是否有所作为。但是，与`fvar = .0;`您一起始终在安全站点上。

# php - 在循环函数中返回结果

> ID：14302904
> 
> 赞同：1
> 
> 时间：2013-01-13T11:16:09.093
> 
> 标签：php

我有一个函数，我循环到它来构建一个 url。我需要的是在一个字符串中得到结果。这是代码。

```
// Create URL for accesories
function create_url($id) {
  global $db_categories;

  // Select category sublevels
  $sql_cat="SELECT parent_id, seo_id FROM $db_categories WHERE category_id = '".$id."'";
  $catres = mysql_query("$sql_cat") or die (mysql_error());

  while($selected_cat = mysql_fetch_array($catres)) {
    $cat_seo = $selected_cat['seo_id']. "/";
    $output .= $cat_seo;
    create_url($selected_cat['parent_id']);
  }      
  return $output;
}

// Call function
$result_cat = create_url($cat["category_id"]);
echo $result_cat; 
```

如果我使用 echo 并输出（我只使用 $depth 来跟踪结果），这工作正常

```
category1/
category2/
category3/
etc... 
```

问题是我不知道如何将结果返回到单个字符串而不是回显它。当我使用 return 它只输出第一个结果。像这样。

```
category1/ 
```

我想要返回输出。

```
category1/category2/category3/ 
```

我无法为我的生活找到解决方案。

谢谢

# javascript - 动态添加标志到 highcharts（不是 highstock）

> ID：14302908
> 
> 赞同：1
> 
> 时间：2013-01-13T11:16:33.830
> 
> 标签：javascript, highcharts

我找到了这个[jsfiddle](http://jsfiddle.net/highcharts/sH777/)，我想在创建系列之后实现它。我经常让用户更新图表，我通过将浮点数组发送到系列的 setData 函数来做到这一点。

例如：

```
//Build the area values
for (var i = 0; i < area.length; i++)
{
    areaValues.push(parseFloat(area[i]));
}

chart.series[2].setData(areaValues,false);
chart.redraw(); 
```

有没有办法在重绘之前添加标志而不重新创建图表？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T16:11:43.597

问题在于您的数据格式 - 标志应该是这个：

```
{
    x: 9,
    title: 'I',
    text: 'Information'
} 
```

不仅仅是一个数字。您可以通过两种方式实现您所需要的，或者通过设置新数据或添加新系列，请参阅两者的示例：http: [//jsfiddle.net/sH777/180/](http://jsfiddle.net/sH777/180/)

# linux - Linux - 按添加日期执行目录中的所有 Bash 脚本

> ID：14302909
> 
> 赞同：1
> 
> 时间：2013-01-13T11:16:36.630
> 
> 标签：linux, bash, shell, command-line

我正在寻找一个脚本，它将按照添加顺序执行给定目录中的所有 bash 脚本。例如，最早添加到目录的脚本将首先执行。

这就是我现在正在使用的，但它似乎没有按添加日期执行脚本。

```
for each in /dir/*.sh; 
do 
    bash $each > /dev/null 2>&1 ; 
    rm $each > /dev/null 2>&1 ; 
done ; 
```

让我知道如何修改它以按添加日期对目录中的文件进行排序。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-13T11:23:06.253

如果您的意思是“按创建顺序”：

```
ls -ctr /dir/*.sh | while read script
do
  bash $script > /dev/null 2>&1
  rm $script > /dev/null 2>&1
done 
```

# regex - 为什么正则表达式模式适用于 html 注释，但不适用于 php 和 js 注释？

> ID：14302910
> 
> 赞同：0
> 
> 时间：2013-01-13T11:17:03.007
> 
> 标签：regex, comments

我有这个问题：

我网站的各个页面（通常：html、php 和 js）都受到特洛伊木马（基于 NOD32 扫描的 JS/Kryptik.ADZ）的影响。

每种类型的页面中的代码是这样的：

PHP：

```
#336988#
echo "<script type=\"text/javascript\" language=\"javascript\" > CODE OF MALWARE </script>";
#/336988# 
```

JS：

```
/*336988*/
CODE OF MALWARE
/*/336988*/ 
```

HTML：

```
<!--336988-->
<script type="text/javascript" language="javascript" >CODE OF MALWARE</script>
<!--/336988--> 
```

所以我使用 Notepad++ 和正则表达式用空白文本替换恶意软件。我的正则表达式是这样的：`(<!--|\#|/\*)336988.+/336988(-->|\#|\*/)`

但是这个表达式只能找到 HTML。为什么？

我不明白。

如果我的英语和我对正则表达式的了解很差，我很抱歉。

谢谢

卡罗

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T14:17:18.703

试试这个，我遇到了同样的问题，它奏效了。

```
/#336988#(.*?)#\/336988#/ism 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-13T14:33:03.067

试试这个：

```
'^.*336988.*[\s\S]*.*336988.*$' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-22T11:31:14.857

[这](https://github.com/francodgstn/SimpleFixScanner/blob/master/SimpleFixScanner.php)是修复 336988、68c8c7、8f4d8e、a59dc4 的脚本。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-22T17:13:38.477

今天我遇到了同样的问题，但代码不同。此代码影响了 aspx、asp、htdocs、html、htm 和 js 文件。下面是我在 Powershell 中修复这些文件的代码。对于 JS 文件，您需要更改行：

```
 $regex = New-Object System.Text.RegularExpressions.Regex "<!--68c8c7-->((.|\n)*)<!--/68c8c7-->" 
```

至：

```
 $regex = New-Object System.Text.RegularExpressions.Regex "/\*68c8c7\*((.|\n)*)68c8c7\*/" 
```

和线

```
 Get-ChildItem . -Recurse -Include *.aspx,*asp,*.html,*.htm | where-object {$_.lastwritetime –gt $DateToCompare} |  %{Write-Host Examining file: $_.fullname; $_} | ForEach-Object { DoWork $_.Name $_.DirectoryName} 
```

至：

```
 Get-ChildItem . -Recurse -Include *.js | where-object {$_.lastwritetime –gt $DateToCompare} |  %{Write-Host Examining file: $_.fullname; $_} | ForEach-Object { DoWork $_.Name $_.DirectoryName} 
```

下面的代码（这个脚本将创建 Backup_* 文件，毕竟你可以删除这些文件）：

```
function tryFixFile($filepath, $filepathBackup)
{   
    $infile = [string]::join([environment]::newline, (get-content -path $filepath))
    $regex = New-Object System.Text.RegularExpressions.Regex "<!--68c8c7-->((.|\n)*)<!--/68c8c7-->"

    if($regex.IsMatch($infile))
    {
        $intAnswer = $WScriptObject.popup("File needs to be change: " + $filepath + " do you want to continue?", 0,"Change File",4)
        If ($intAnswer -eq 6) 
        {
            Write-Host "  Creating backup for file: "  $filepath
            Copy-Item $filepath $filepathBackup
            $replace = $regex.Replace($infile,"")
            $replace | out-file $filepath
        } else 
        {
            $a.popup("File " + $filepath + " won't be changed.")
        }
    }
}

function DoWork($filename, $directory)
{   
    $filepath = $directory + '\' + $filename
    $filepathBackup = $directory + '\' + "Backup_" + $filename

    $WScriptObject = new-object -comobject wscript.shell

    tryFixFile $filepath $filepathBackup
}

$pathToCheck = Read-Host 'WARNING!! Path to check/change?'
if (Test-Path $pathToCheck)
{
    Set-Location $pathToCheck

    #files were affected no longer that 2 days ago, you can change this
    $DateToCompare = (Get-date).AddDays(-2)

    Get-ChildItem . -Recurse -Include *.aspx,*asp,*.html,*.htm | where-object {$_.lastwritetime –gt $DateToCompare} |  %{Write-Host Examining file: $_.fullname; $_} | ForEach-Object { DoWork $_.Name $_.DirectoryName}
}else
{
    write-host "Path doesn't exist"
} 
```

# jquery - 在活动菜单链接上添加类

> ID：14302911
> 
> 赞同：0
> 
> 时间：2013-01-13T11:17:07.550
> 
> 标签：jquery, css, javascript-events

如果它属于当前 url，我需要从菜单中更改链接的外观。我不知道如何检测当前 url 并更改元素类。

我会使用 jQuery

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-13T11:50:21.930

What you can do is

1.  Get the location of the url
2.  use the `.indexOf('.html')` (Or your extension)
3.  Then use the `.substr(url.lastIndexOf('/'))` (this will give you the page name)
4.  Then use it with the `class` selector or `id` selector
5.  and fire the `active` class to that link on page load

How this will go see below:

lets suppose this is your url : `http://localhost/myWebsite/index.html`

```
 $(function(){ // this is done on doc ready function

    var url = window.location;
    var dUrl = url.substr(0, url.indexOf('.html'));
    var link = dUrl.substr(dUrl.lastIndexOf('/')+1);

    $('#'+link).addClass('active'); // on page load this will add the class to the corresponding link

 }); 
```

you can try this demo: [http://jsfiddle.net/K9YAz/](http://jsfiddle.net/K9YAz/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-13T11:19:13.037

```
$( document).ready(function (){
  $( function(){
    var url = window.location.pathname,
    urlRegExp = new RegExp(url.replace( /\/$/,'' ) + "$" );
    $('a').each( function(){
    if(urlRegExp.test(this .href.replace(/\/$/, ''))){
      $( this).addClass('active' );
    }
   });   
  });
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-13T11:19:30.587

您可以使用 的属性`window.location`来获取当前页面的 URL 或您需要的 URL 部分。然后，您可以选择菜单的每个锚点，遍历它们，将它们各自的 href 属性的值与当前页面的 URL 进行比较。如果它们相等，则将适当的类添加到元素中。

# php - 从 WP Headway 主题中删除评论已关闭

> ID：14302913
> 
> 赞同：0
> 
> 时间：2013-01-13T11:17:21.387
> 
> 标签：php, wordpress

我已阅读此页面上的帖子：[从没有评论的帖子中删除 Wordpress“评论已关闭”消息，可能吗？](https://stackoverflow.com/questions/12534264/remove-wordpress-comments-are-closed-message-from-posts-without-comments-poss)

但我仍然不确定如何在我的网站上实现完全相同的功能。IE。如果没有评论或未启用评论，我不希望出现“评论已关闭...”等。

我使用主题 Headway, v 2.0.13。谁能解释我是怎么做到的？我想我更改了 comments.php 中的代码，但需要关于需要删除、修改或添加的内容的确切说明。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T12:04:34.507

我似乎没有 comments.php 模板文件，但这是取自另一个。

```
<?php else : // comments are closed ?>
    <!-- If comments are closed. -->
    <p class="nocomments">Comments are closed.</p>

<?php endif; ?> 
```

只需删除这部分

```
 <p class="nocomments">Comments are closed.</p> 
```

我猜它在comments.php 的第50 行左右

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-08-12T14:21:22.667

我建议你使用[Hide Comments are Closed](https://wordpress.org/plugins/hide-comments-are-closed-text/)插件。这个插件没有设置。只需安装，文本将自动隐藏。

# c# - 如何使用 Mutex 创建锁？

> ID：14302915
> 
> 赞同：1
> 
> 时间：2013-01-13T11:17:51.680
> 
> 标签：c#, windows-phone-7

我在我的班级（全局）中定义了一个互斥锁：

```
static Mutex fooMutex; 
```

我想锁定一些东西，这样用户就不能看到每 3 秒点击一次图像的效果：

```
private void Image_Tap_1(...)
{
            bool isRunnng = true;
            try
            {
                Mutex.OpenExisting("foo");
            }
            catch
            {
                isRunnng = false;
                fooMutex = new Mutex(true, "foo");
            }

            if (!isRunnng)
            {
                fooFadeIn.Begin();
                fooFadeIn.Completed += fooFadeIn_Completed;
            } 
```

并在完成时处理：

```
private void fooFadeIn_Completed(...)
{
   fooMutex.Dispose() 
```

但这不起作用，有人知道吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-13T11:51:24.197

您可以只存储上次点击图像的时间，而不是使用互斥锁或计时器：

```
private DateTime lastTap;

private void Image_Tap_1(...)
{
    var now = DateTime.Now;

    if ((now - lastTap).TotalSeconds < 3)
    {
        return;
    }

    lastTap = now;

    // More than 3 seconds since last tap
    ...
} 
```

# wordpress - 将 htaccess 与永久链接 wordpress 解释结合时的重定向循环

> ID：14302916
> 
> 赞同：0
> 
> 时间：2013-01-13T11:18:08.933
> 
> 标签：wordpress, .htaccess, mod-rewrite, url-rewriting

我在使用 htaccess rewrite 重定向链接时遇到问题。最初我只有重写规则部分，没有下面的 WordPress 代码，它工作正常。现在，在我尝试使用 Wordpress 添加永久链接后，该链接给了我一个重定向循环问题。

基本上我想做的是让观众在输入“www.example.com”时直接进入“www.example.com/blog”

我想我错过了一些东西，因为我认为 rewriteRule 会停止那一刻

```
RewriteRule ^$ /blog [R=301,L] 
```

由于 [L] 标志而被处理，然后不会查看其他 RewriteRules。有人可以帮助我了解服务器实际上是如何执行以下代码的步骤的吗？

```
RewriteEngine on
RewriteRule ^$ /blog [R=301,L]

# BEGIN WordPress
<IfModule mod_rewrite.c>
RewriteEngine On
RewriteBase /blog/
RewriteRule ^index\.php$ - [L]
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule . /blog/index.php [L]
</IfModule>

# END WordPress 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T12:09:14.870

你需要把这条线：

```
RewriteRule ^$ /blog [R=301,L] 
```

在*文档根目录*的 htaccess 文件中，而不是`/blog`目录中。

# osgi - 为什么 org.vaadin.osgi 中的 VaadinOSGIApplicationManager 改为 An Activator

> ID：14302917
> 
> 赞同：0
> 
> 时间：2013-01-13T11:18:10.073
> 
> 标签：osgi, vaadin

org.vaadin.osgi_1.0.1.jar 在 VaadinOSGIApplicationManager 类中使用声明式服务。

github 上的更高版本现在使用 Activator 代替 ApplicationManager。

更改是出于 bndtools v2 目的还是出于其他原因？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T08:30:41.243

声明式服务并非安装在每个 OSGi 框架中。因此，我认为使用 Activator 可以使其开箱即用地在更多种类的平台上运行。

# c# - 如何在 C# 中调用另一个类中的变量

> ID：14302918
> 
> 赞同：3
> 
> 时间：2013-01-13T11:18:28.497
> 
> 标签：c#, oop

我来自 Java，我正在学习 C# 脚本，我已经遇到这个问题大约两天了，现在正在寻找解决方案，我尝试将类设置为实例和所有内容。这是我和一些朋友一起做的一个微型游戏项目。

无论哪种方式，我都有 StatHandler.cs 处理我们所有的统计点......然后我有 HealthManager.cs 应该处理所有与健康相关的东西。

问题是，我一生都无法弄清楚如何调用变量，例如

```
public int stamina, strength, agility, dexterity, wisdom; 
```

来自 StatHandler.cs

我知道在 Java 中它会像

```
maxHealth = StatHandler.stamina * 10; 
```

虽然，你不能用 C# 做到这一点，但在创建实例时，代码看起来像这样

```
maxHealth = StatHandler.instance.stamina * 10; 
```

这为我提供了错误

```
NullReferenceException: Object reference not set to an instance of an object 
```

我也尝试过继承，通过这样做

```
public class HealthHandler : StatHandler { 
```

**但它在 HealthHandler 类中将所有值设置为 0，它不读取任何内容。**

* * *

我真的只需要弄清楚如何从其他 C# 文件中提取变量，因为这让我慢了下来。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-13T11:22:16.623

它实际上与 Java 中的相同。对于非静态变量，您需要一个类实例：

```
StatHandler sh = new StatHandler();
maxHealth = sh.stamina * 10; 
```

或者您可以在类中将变量声明为静态，例如

```
public static string stamina = 10; 
```

然后访问它

```
maxHealth = StatHandler.stamina * 10; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-13T11:22:23.160

在 C# 中，您不能在未初始化的情况下使用值类型变量。

看起来`StatHandler.instance` 是`static`方法。您不能使用`int`没有任何分配的变量。为它们分配一些值。

例如

```
public int stamina = 1, strength = 2, agility = 3, dexterity = 4, wisdom = 5; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-13T11:22:23.960

> NullReferenceException：对象引用未设置为对象的实例

您需要正确初始化。似乎`StatHandler.instance`是静态的并且未初始化。

`static`您可以在构造函数中初始化它

```
class StatHandler
{

  static StatHandler()
  {
      instance = new Instance(); // Replace Instance with type of instance
  }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-11-26T00:32:34.100

你有两种方法可以去这里。

**全静态类**

```
public static class StatHandler
{
    public static Int32 Stamina = 10;
    public static Int32 Strength = 5;
} 
```

接着：

```
maxHealth = StatHandler.Stamina * 10; // get the value and use it
StatHandler.Stamina = 19; // change the value 
```

**单例实例**

```
public class StatHandler
{
    public static StatHandler Instance;

    public Int32 Stamina = 10;
    public Int32 Strength = 5;

    // this is called only the first time you invoke the class
    static StatHandler()
    {
        m_Instance = new Instance(); // Replace Instance with type of instance
    }
} 
```

接着：

```
maxHealth = StatHandler.Instance.Stamina * 10; // get the value and use it
StatHandler.Instance.Stamina = 19; // change the value

// replace the current instance:
StatHandler.Instance = new StatHandler();
StatHandler.Instance.Stamina = 19; // change the value 
```

我认为第一个总是最好的选择，结果相同，复杂性更低。

# android - Android：无法在 google+ 上共享文本和图像

> ID：14302924
> 
> 赞同：1
> 
> 时间：2013-01-13T11:19:45.283
> 
> 标签：android, google-plus

我正在使用此代码在 google+ 上分享：

```
 ShareCompat.IntentBuilder builder = ShareCompat.IntentBuilder.from(activity);
    builder.setType("text/plain");
    builder.setText(text);
    if (imageURI != null) {
        builder.setStream(imageURI)
               .setType("image/png");
    }

    Intent shareIntent = builder.getIntent()
            .setPackage("com.google.android.apps.plus");
    activity.startActivity(shareIntent); 
```

如果有图像 - 它共享没有文本的图像，如果没有图像 - 它成功共享文本。如何将文本和图像一起发布？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T11:01:08.667

我今天一直在尝试解决这个问题，我想我明白了 - 我希望你同时解决了它，但其他人可能会觉得这很有用。

```
File f = new File(your_file_path);
                ContentValues values = new ContentValues(2);
                values.put(MediaStore.Images.Media.MIME_TYPE, "image/png"); //or /jpeg or whatever
                values.put(MediaStore.Images.Media.DATA, f.getAbsolutePath());
                Uri uri = getContentResolver().insert(MediaStore.Images.Media.EXTERNAL_CONTENT_URI, values);
                Intent intent = new Intent(Intent.ACTION_SEND);
                intent.setType("image/png");
                intent.putExtra(Intent.EXTRA_STREAM, uri);
                intent.putExtra(Intent.EXTRA_TEXT, "blahblah");
                intent.setPackage("com.google.android.apps.plus");
                startActivity(intent); 
```

我认为您的代码的问题可能是您用图像“覆盖”了文本类型。不过，我没有使用过 IntentBuilders，所以请随时纠正我。

# html - 在灵活容器中时，您如何设置/选择第一行中的 inline-block 元素？

> ID：14302927
> 
> 赞同：0
> 
> 时间：2013-01-13T11:19:55.860
> 
> 标签：html, css

我知道这对于纯 CSS 可能是不可能的，但是......我怎样才能从一组元素中只选择第 n 行 -***当***这些元素位于灵活宽度的容器中并且元素本身是时`inline-block`；

例子：

*   一个包含 10 个元素的容器，每个 50px 宽，容器宽 200px - 选择器将抓取元素 1 到 4（从元素 5 开始被包裹在下一行）

*   一个包含 10 个元素的容器，每个 50px 宽，容器宽 250px - 选择器将抓取元素 1 到 5（元素 6 之后的元素被包裹在下一行）

注意：请参阅此小提琴以供参考： http: [//jsfiddle.net/y7qCJ/](http://jsfiddle.net/y7qCJ/) - 但显然 nth-child 不能这样工作，因此我的问题就在这里。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T12:41:50.700

简短的回答 - 不能用 CSS 完成

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-13T11:30:46.367

第 n 个孩子不是跨浏览器，因此您将返回手动选择：

```
.container > li:first-child,
.container > li:first-child+li,
.container > li:first-child+li+li,
.container > li:first-child+li+li+li,
.container > li:first-child+li+li+li+li
{
   border:1px solid red; 
} 
```

这显然将针对前 5 个。如果您的 html 是服务器生成的，那么您也可以在头部添加一些内联服务器端生成的 css 以添加此规则（因为它是可更改的）但如果您的 html 永远不会改变，那么您可以像往常一样将其添加到 .css .

看[小提琴](http://jsfiddle.net/y7qCJ/1/)

更新：

由于您似乎希望目标 LI 的数量取决于 FLUID 布局中浏览器的宽度，因此您必须执行一个 javascript 解决方案，其伪代码为：

```
on load/resize

  lielements[] = .container > li
  width = get .container width
  licount = abs(width/50)

  for(int i = 1; i < licount; ++i)
  {
     lielements[i].css = apply css class with width:50px to element
  } 
```

# scala - 在 Akka 中配置嵌套路由器

> ID：14302929
> 
> 赞同：3
> 
> 时间：2013-01-13T11:20:12.023
> 
> 标签：scala, routing, config, akka

我有一些嵌套路由器，应该创建`FromConfig()`。我想要的是这样的：

```
test {
  akka.actor.deployment {
    /worker {
      router = round-robin
      nr-of-instances = 5
      /slave {
        router = broadcast
        nr-of-instances = 4
      }
    }
  }
} 
```

但是如果我运行它，我会得到一个异常，告诉我，`[akka://test/user/worker/slave]`需要外部配置并建议 application.conf。

名称是正确的，并且没有它起作用的嵌套路由。我错过了什么？

**编辑**
我尝试了另一种配置方式：

```
test{
  akka.actor.deployment {
    /worker {
      router = round-robin
      nr-of-instances = 5
    }
    /worker/slave {
      router = broadcast
      nr-of-instances = 4
    }
  }
} 
```

这也不行。我也认识到，错误的实际位置不是`[akka://test/user/worker/slave]`，而是`[akka://test/user/worker/$a/slave]`。这让我更加奇怪。我明白，$a 是一个路由，但是我该如何配置它呢？

**编辑 2**
感谢您的快速回复。对我来说，这根本不起作用，因为我使用的是 scala 2.9.2 和 akka 2.0。有没有办法在akka 2.0中实现类似的东西？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T16:15:12.363

您可以在部署路径名称中使用通配符：`/worker/*/slave`

# ios - 如何将浮点值放入 UIAlertView

> ID：14302930
> 
> 赞同：0
> 
> 时间：2013-01-13T11:20:23.250
> 
> 标签：ios, objective-c, cocoa-touch, uialertview

我试图找到将浮点值放入`UIAlertView`. 我的`float`值仅用于检查另一个值，而不是传递给某处的字符串。

我想我可以将我的`float`值设置为标签并将其设置为`hidden`并将其传递给我的警报，但我确定这不是正确的方法，我们将不胜感激

```
float x = ([_continuityRingFinalR1.text floatValue]); /stringWithFormat:@"%.1f", x * y]]
float y = (1.67);

if ([_continuityRingFinalRn.text floatValue] > x * y ) {

         UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"Advisory Warning"
         message:[NSString stringWithFormat: @"Based on your value of %@  this value may not be acceptable. %@ would be acceptable",_continuityRingFinalR1.text, ]///<<< my float value here
         delegate:self cancelButtonTitle: @"Ignore" otherButtonTitles: @"Retest", nil];

    [alert show];
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-13T11:31:47.447

**%f**在 NSString 中用于浮点/双精度而不是 %@

```
 float x = ([_continuityRingFinalR1.text floatValue]); /stringWithFormat:@"%.1f", x * y]]
    float y = (1.67);
    float example;

    if ([_continuityRingFinalRn.text floatValue] > x * y ) {

             UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"Advisory Warning"
             message:[NSString stringWithFormat: @"Based on your value of %@  this value may not be acceptable. %f would be acceptable",_continuityRingFinalR1.text, example];
             delegate:self cancelButtonTitle: @"Ignore" otherButtonTitles: @"Retest", nil];

        [alert show];
    } 
```

这是一个有用的[链接](http://cocoadev.com/wiki/NSLog)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-13T11:24:11.180

我想你想要这个

```
message:[NSString stringWithFormat: @"Based on your value of %@  this value may not be acceptable. %0.2f would be acceptable",_continuityRingFinalR1.text, x*y ];
//Passing second argument as x*y 
```

# data-binding - WPF 数据绑定在以编程方式生成的 DataGrid 中未正确发生

> ID：14302934
> 
> 赞同：0
> 
> 时间：2013-01-13T11:21:18.493
> 
> 标签：data-binding, wpfdatagrid

在我的应用程序中，我以编程方式生成数据网格并将其与列表绑定。我能够看到数据网格中的数据，但是当我编辑单元格时，列表中的基础项目没有得到更新。这是代码

```
Window dateChangeWindow = new Window();
dateChangeWindow.WindowStartupLocation = WindowStartupLocation.CenterOwner;
dateChangeWindow.Owner = Application.Current.MainWindow;
dateChangeWindow.SizeToContent = SizeToContent.WidthAndHeight;
dateChangeWindow.Title = "Date Change";

StackPanel stackPanel = new StackPanel();
stackPanel.Orientation = Orientation.Vertical;

DataGrid requestGrid = new DataGrid();
requestGrid.CanUserResizeColumns = false;
requestGrid.CanUserResizeRows = false;
requestGrid.CanUserReorderColumns = false;
requestGrid.CanUserSortColumns = true;
requestGrid.AutoGenerateColumns = false;

DataGridTextColumn requestIdColumn = new DataGridTextColumn();
requestIdColumn.Header = "Request Id";
Binding idBinding = new Binding("RequestId");
idBinding.Mode = BindingMode.OneWay;
requestIdColumn.Binding = idBinding;
requestGrid.Columns.Add(requestIdColumn);

DataGridTemplateColumn startDateColumn = new DataGridTemplateColumn();
startDateColumn.Header = "Start Date";
Binding startDateBinding = new Binding("StartDate");
startDateBinding.Mode = BindingMode.TwoWay;
FrameworkElementFactory startDateFactory = new FrameworkElementFactory(typeof(DatePicker));
startDateFactory.SetBinding(DatePicker.SelectedDateProperty, startDateBinding);
DataTemplate startDateTemplate = new DataTemplate();
startDateTemplate.VisualTree = startDateFactory;
startDateColumn.CellTemplate = startDateTemplate;
startDateColumn.CellEditingTemplate = startDateTemplate;
requestGrid.Columns.Add(startDateColumn);

DataGridTemplateColumn endDateColumn = new DataGridTemplateColumn();
endDateColumn.Header = "End Date";
Binding endDateBinding = new Binding("EndDate");
endDateBinding.Mode = BindingMode.TwoWay;
FrameworkElementFactory endDateFactory = new FrameworkElementFactory(typeof(DatePicker));
endDateFactory.SetBinding(DatePicker.SelectedDateProperty, endDateBinding);
DataTemplate endDateTemplate = new DataTemplate();
endDateTemplate.VisualTree = endDateFactory;
endDateColumn.CellTemplate = endDateTemplate;
endDateColumn.CellEditingTemplate = endDateTemplate;
requestGrid.Columns.Add(endDateColumn);

requestGrid.ItemsSource = requestList;
requestGrid.Margin = new Thickness(0, 10, 0, 0);
requestGrid.HorizontalAlignment = HorizontalAlignment.Center;

stackPanel.Children.Add(requestGrid);

Button changeDoneBtn = new Button();
changeDoneBtn.Content = "Submit";
changeDoneBtn.Click += new RoutedEventHandler(changeDone_Click);
changeDoneBtn.Margin = new Thickness(0, 20, 0, 10);
changeDoneBtn.HorizontalAlignment = HorizontalAlignment.Center;

stackPanel.Children.Add(changeDoneBtn);

dateChangeWindow.Content = stackPanel;
dateChangeWindow.ShowDialog(); 
```

ItemsSource`requestList`在创建窗口之前填充。它被声明为

```
IList<DateChangeWrapper> requestList = new List<DateChangeWrapper>(); 
```

DateChangeWrapper 类看起来像这样

```
public class DateChangeWrapper : INotifyPropertyChanged
{
    public DateChangeWrapper(ResponseWrapper responseWrapper)
    {
        RequestId = responseWrapper.RequestId;
        ParentRequestId = responseWrapper.ParentRequestId;
        StartDate = responseWrapper.StartDate;
        EndDate = responseWrapper.EndDate;
    }

    private DateTime startDate;
    private DateTime endDate;

    public int RequestId { get; private set; }
    public int ParentRequestId { get; private set; }

    public DateTime StartDate
    {
        get { return startDate; }
        set
        {
            startDate = value;
            OnPropertyChanged("StartDate");
        }
    }

    public DateTime EndDate
    {
        get { return endDate; }
        set
        {
            endDate = value;
            OnPropertyChanged("EndDate");
        }
    }

    public event PropertyChangedEventHandler PropertyChanged;  

    private void OnPropertyChanged(string propertyName)
    {
        PropertyChangedEventHandler handler = PropertyChanged;
        if (handler != null)
        {
            var e = new PropertyChangedEventArgs(propertyName);
            handler(this, e);
        }
    }
} 
```

从代码中可以看出，我有两列 StartDate 和 EndDate ，它们显示为 DatePickers 。当我调试代码时，在调用 window.ShowDialog 的地方，我看到调用了 Dates 的 get 访问器。但是当我更改日期选择器中的值时，设置器不会被调用，我的列表仍然具有旧值。

请帮我

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T12:12:55.317

问题在于，由于 UpdateSourceTrigger，更改的值没有更新回底层源。默认情况下，它的值为 LostFocus。我将其更改为 PropertyChanged 并且它有效！:)

我在绑定中添加了以下代码行

```
startDateBinding.UpdateSourceTrigger = UpdateSourceTrigger.PropertyChanged; 
```

同样对于 EndDate

# xcode - OS X 上的无代码 kext

> ID：14302935
> 
> 赞同：3
> 
> 时间：2013-01-13T11:21:26.613
> 
> 标签：xcode, iokit, darwin, kernel-extension

好的，我正在开发一个 uController 项目（指针设备），我正在尝试编写用户空间驱动程序`IOkit.framework`。

使用 idProduct 和 idVendor 我可以得到`IOUSBInterfaceInterface300`obj

问题是当我尝试

> `kr = (*intf)->USBInterfaceOpen(intf);`

它失败了`kIOReturnExclusiveAccess`，很可能是因为`HID`经理已经打开了具有独占访问权限的设备。

这里说无代码的 kext 可以防止 HID 管理器接管设备

[在 Mac 上读取和写入 USB (HID) 中断端点](https://stackoverflow.com/questions/3368008/reading-and-writing-to-usb-hid-interrupt-endpoints-on-mac)

`idVendor`我用and创建了一个 kext`idProduct`并使用 kextload 来加载它。我从 kextload取回**“加载成功”**

但不知何故我仍然无法打开界面？难道我做错了什么？

我通过创建一个文件名 Info.plist （内容与调整了 idProduct 和 idVendor 的帖子相同）来创建 kext，并将其放在名为 MyUSBDeviceTest.kext 的文件夹中

然后将所有者更改为 root:wheel 然后将 kext 复制到`/System/Library/Extensions`then

```
sudo kextload -vt /System/Library/Extensions/MyUSBDeviceTest.kext 
```

我已尝试重新启动并重新连接设备，但我无法从`HID`系统中获取接口

# java - java 不能正确地从拉丁语转换为 utf8

> ID：14302937
> 
> 赞同：0
> 
> 时间：2013-01-13T11:21:35.140
> 
> 标签：java, mysql, utf-8, character-encoding, codepages

我从mysql中选择数据，数据库不在utf8中（unicode字符另存为拉丁文，例如unicode字符串`Đỗ Tiến`（正确形式）另存为`Äá»— Tiáº¿n`）。如果我使用 PHP 回显到 html，我只是设置`<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />`了正确的网页显示。如果我没有设置元标记，当被 Chrome 打开时，Chrome 检测到 windows-1258 编码，手动更改为 Unicode (utf-8)，网页正确显示。

问题是：当我使用 jdbc 从 mysql 中选择数据时，我会这样转换：

```
 byte[] asciiBytes1 = "Äá»— tiáº¿n".getBytes("Cp1258");
    byte[] asciiBytes2 = "Äá»— tiáº¿n".getBytes("ISO-8859-1");
    String unicode1 = new String(asciiBytes1, "UTF-8");
    String unicode2 = new String(asciiBytes2, "UTF-8");
    System.out.println(unicode1);//�?ỗ tiến
    System.out.println(unicode2);//Đ�? tiến 
```

结果，java**不能正确转换，我在**[http://docs.oracle.com/javase/1.4.2/docs/guide/intl/encoding.doc.html](http://docs.oracle.com/javase/1.4.2/docs/guide/intl/encoding.doc.html)尝试了许多编码，不仅是 Cp1258 和 ISO-8859 -1，但没有一个有效。2个简单的转换方法是使用`Äá»— tiáº¿n`我之前提到的带有字符串的html文件或使用notepad ++，设置编码ANSI，粘贴`Äá»— tiáº¿n`字符串然后更改为utf-8，它将显示`Đỗ Tiến`（是我想要的正确字符串）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T11:52:17.233

That's kinda complicated, it's in modified Windows-1252 where 0x81, 0x8d, 0x8f, 0x90 and 0x9d that are normally not assigned are replaced with respective C1 characters. It seems Java doesn't take this into account by default when using Windows-1252.

It is easiest to just fix your database and use UTF-8 everywhere.

Here's the code anyway

```
public static byte[] getBytesModifiedW1252( String str ) {
    final int[] windows1252 = {
            0x0000,0x0001,0x0002,0x0003,0x0004,0x0005,0x0006,0x0007,0x0008,0x0009,0x000A,0x000B,0x000C,0x000D,0x000E,0x000F
            ,0x0010,0x0011,0x0012,0x0013,0x0014,0x0015,0x0016,0x0017,0x0018,0x0019,0x001A,0x001B,0x001C,0x001D,0x001E,0x001F
            ,0x0020,0x0021,0x0022,0x0023,0x0024,0x0025,0x0026,0x0027,0x0028,0x0029,0x002A,0x002B,0x002C,0x002D,0x002E,0x002F
            ,0x0030,0x0031,0x0032,0x0033,0x0034,0x0035,0x0036,0x0037,0x0038,0x0039,0x003A,0x003B,0x003C,0x003D,0x003E,0x003F
            ,0x0040,0x0041,0x0042,0x0043,0x0044,0x0045,0x0046,0x0047,0x0048,0x0049,0x004A,0x004B,0x004C,0x004D,0x004E,0x004F
            ,0x0050,0x0051,0x0052,0x0053,0x0054,0x0055,0x0056,0x0057,0x0058,0x0059,0x005A,0x005B,0x005C,0x005D,0x005E,0x005F
            ,0x0060,0x0061,0x0062,0x0063,0x0064,0x0065,0x0066,0x0067,0x0068,0x0069,0x006A,0x006B,0x006C,0x006D,0x006E,0x006F
            ,0x0070,0x0071,0x0072,0x0073,0x0074,0x0075,0x0076,0x0077,0x0078,0x0079,0x007A,0x007B,0x007C,0x007D,0x007E,0x007F
            ,0x20AC,0x0081,0x201A,0x0192,0x201E,0x2026,0x2020,0x2021,0x02C6,0x2030,0x0160,0x2039,0x0152,0x008D,0x017D,0x008F
            ,0x0090,0x2018,0x2019,0x201C,0x201D,0x2022,0x2013,0x2014,0x02DC,0x2122,0x0161,0x203A,0x0153,0x009D,0x017E,0x0178
            ,0x00A0,0x00A1,0x00A2,0x00A3,0x00A4,0x00A5,0x00A6,0x00A7,0x00A8,0x00A9,0x00AA,0x00AB,0x00AC,0x00AD,0x00AE,0x00AF
            ,0x00B0,0x00B1,0x00B2,0x00B3,0x00B4,0x00B5,0x00B6,0x00B7,0x00B8,0x00B9,0x00BA,0x00BB,0x00BC,0x00BD,0x00BE,0x00BF
            ,0x00C0,0x00C1,0x00C2,0x00C3,0x00C4,0x00C5,0x00C6,0x00C7,0x00C8,0x00C9,0x00CA,0x00CB,0x00CC,0x00CD,0x00CE,0x00CF
            ,0x00D0,0x00D1,0x00D2,0x00D3,0x00D4,0x00D5,0x00D6,0x00D7,0x00D8,0x00D9,0x00DA,0x00DB,0x00DC,0x00DD,0x00DE,0x00DF
            ,0x00E0,0x00E1,0x00E2,0x00E3,0x00E4,0x00E5,0x00E6,0x00E7,0x00E8,0x00E9,0x00EA,0x00EB,0x00EC,0x00ED,0x00EE,0x00EF
            ,0x00F0,0x00F1,0x00F2,0x00F3,0x00F4,0x00F5,0x00F6,0x00F7,0x00F8,0x00F9,0x00FA,0x00FB,0x00FC,0x00FD,0x00FE,0x00FF
        };
    Map<Integer, Integer> map = new HashMap<Integer, Integer>();

    for( int i = 0; i < windows1252.length; ++i ) {
        map.put( windows1252[i], i);
    }
    byte replacement = (byte)0x003F;

    byte[] ret = new byte[str.length()];

    for( int i = 0; i < str.length(); ++i ) {
        int cp = str.charAt(i);
        Integer w1252 = map.get(cp);
        ret[i] = w1252 == null ? replacement : (byte)(int)w1252;
    }

    return ret;
}

public static void main(String args[]) throws UnsupportedEncodingException {
    byte[] bytes = getBytesModifiedW1252( "Äá»— tiáº¿n" );
    System.out.println(new String(bytes, "UTF-8"));
    //Đỗ tiến
} 
```

Here's the opposite:

```
public static String getStringModifiedW1252( byte[] bytes ) {

    final int[] windows1252 = {
            0x0000,0x0001,0x0002,0x0003,0x0004,0x0005,0x0006,0x0007,0x0008,0x0009,0x000A,0x000B,0x000C,0x000D,0x000E,0x000F
            ,0x0010,0x0011,0x0012,0x0013,0x0014,0x0015,0x0016,0x0017,0x0018,0x0019,0x001A,0x001B,0x001C,0x001D,0x001E,0x001F
            ,0x0020,0x0021,0x0022,0x0023,0x0024,0x0025,0x0026,0x0027,0x0028,0x0029,0x002A,0x002B,0x002C,0x002D,0x002E,0x002F
            ,0x0030,0x0031,0x0032,0x0033,0x0034,0x0035,0x0036,0x0037,0x0038,0x0039,0x003A,0x003B,0x003C,0x003D,0x003E,0x003F
            ,0x0040,0x0041,0x0042,0x0043,0x0044,0x0045,0x0046,0x0047,0x0048,0x0049,0x004A,0x004B,0x004C,0x004D,0x004E,0x004F
            ,0x0050,0x0051,0x0052,0x0053,0x0054,0x0055,0x0056,0x0057,0x0058,0x0059,0x005A,0x005B,0x005C,0x005D,0x005E,0x005F
            ,0x0060,0x0061,0x0062,0x0063,0x0064,0x0065,0x0066,0x0067,0x0068,0x0069,0x006A,0x006B,0x006C,0x006D,0x006E,0x006F
            ,0x0070,0x0071,0x0072,0x0073,0x0074,0x0075,0x0076,0x0077,0x0078,0x0079,0x007A,0x007B,0x007C,0x007D,0x007E,0x007F
            ,0x20AC,0x0081,0x201A,0x0192,0x201E,0x2026,0x2020,0x2021,0x02C6,0x2030,0x0160,0x2039,0x0152,0x008D,0x017D,0x008F
            ,0x0090,0x2018,0x2019,0x201C,0x201D,0x2022,0x2013,0x2014,0x02DC,0x2122,0x0161,0x203A,0x0153,0x009D,0x017E,0x0178
            ,0x00A0,0x00A1,0x00A2,0x00A3,0x00A4,0x00A5,0x00A6,0x00A7,0x00A8,0x00A9,0x00AA,0x00AB,0x00AC,0x00AD,0x00AE,0x00AF
            ,0x00B0,0x00B1,0x00B2,0x00B3,0x00B4,0x00B5,0x00B6,0x00B7,0x00B8,0x00B9,0x00BA,0x00BB,0x00BC,0x00BD,0x00BE,0x00BF
            ,0x00C0,0x00C1,0x00C2,0x00C3,0x00C4,0x00C5,0x00C6,0x00C7,0x00C8,0x00C9,0x00CA,0x00CB,0x00CC,0x00CD,0x00CE,0x00CF
            ,0x00D0,0x00D1,0x00D2,0x00D3,0x00D4,0x00D5,0x00D6,0x00D7,0x00D8,0x00D9,0x00DA,0x00DB,0x00DC,0x00DD,0x00DE,0x00DF
            ,0x00E0,0x00E1,0x00E2,0x00E3,0x00E4,0x00E5,0x00E6,0x00E7,0x00E8,0x00E9,0x00EA,0x00EB,0x00EC,0x00ED,0x00EE,0x00EF
            ,0x00F0,0x00F1,0x00F2,0x00F3,0x00F4,0x00F5,0x00F6,0x00F7,0x00F8,0x00F9,0x00FA,0x00FB,0x00FC,0x00FD,0x00FE,0x00FF
        };

    StringBuilder ret = new StringBuilder(bytes.length);

    for( int i = 0; i < bytes.length; ++i ) {
        ret.append( (char) windows1252[(bytes[i] < 0 ? 256 + bytes[i] : bytes[i] )] );
    }

    return ret.toString();

}

public static void main(String args[]) throws UnsupportedEncodingException {
    String str = "Đỗ tiến";
    String w1252 = getStringModifiedW1252( str.getBytes("UTF-8"));
    System.out.println(w1252);
    //Äá»— tiáº¿n
} 
```

You probably want to stash the map and array somewhere instead of creating them when the methods are called

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-13T11:27:48.290

尝试这个

```
byte[] asciiBytes1 = "Äá»— tiáº¿n".getBytes("Cp1258");
byte[] asciiBytes2 = "Äá»— tiáº¿n".getBytes("ISO-8859-1");
String unicode1 = new String(asciiBytes1, "Cp1258");
String unicode2 = new String(asciiBytes2, "ISO-8859-1");
System.out.println(unicode1);//�?ỗ tiến
System.out.println(unicode2);//Đ�? tiến 
```

# c - “C”中的 CPU 密集型操作

> ID：14302939
> 
> 赞同：-9
> 
> 时间：2013-01-13T11:21:56.950
> 
> 标签：c, linux

最近我遇到了这个问题，比如“C”编程中的各种 CPU 密集型操作是什么，我可以想到以下内容：

1.  数学运算
2.  Appropriate choice of data structures based on need like in certain scenarios linked list might not be appropriate to store thousand of records
3.  ...

感谢任何帮助？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-13T11:41:13.930

不涉及系统调用或从内存加载/存储大量数据的所有内容都是 CPU 密集型的。

这很简单，因为如果你不让 CPU 等待其他设备（内存、I/O），那么 CPU 会尽可能快地运行，所以一切都是 CPU 密集型的。

根据相同的标准，系统调用也可能是 CPU 密集型的：如果它们使用 CPU 而不是其他设备，它们就是 CPU 密集型的。一个例外是请求等待，它可以让 CPU “休息”，直到某些外部事件发生。

有一些操作和操作安排可能会导致 CPU 的更多部分同时工作，从而更多地使用 CPU。当然，这取决于处理器型号并且是一个复杂的话题。还有一些事情对处理器来说“更难”，并且由于计算机体系结构的问题，处理器可以比其他安排更快或更慢地执行一些操作安排。这也是一个复杂的话题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-13T11:24:12.520

虽然它本身不是 CPU*密集型*的，但是：内核和用户空间之间的上下文切换，即带有小缓冲区的 read() 或 write()

# android - 如何使图像视图的选择器仅更改背景而不更改图像源？

> ID：14302940
> 
> 赞同：3
> 
> 时间：2013-01-13T11:22:11.210
> 
> 标签：android, xml, imageview

我有一个同时设置了图像 src 和背景颜色的 ImageView。

此图像进入一个布局，即 gridview 项目布局。

I would to create an x​​ml selector that when the item is choosen, the image background change, but the image src not.

类似于带有文本图标的 android 主菜单，我只想突出显示图像。

我不会为对象的每个状态制作图像，我只想更改背景。

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >

    <ImageView
        android:id="@+id/img_0"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentTop="true"
        android:layout_centerHorizontal="true"
        android:layout_marginTop="30dp"
        android:background="@drawable/selector_categorie"
        android:src="@drawable/ic_launcher"/>

    <TextView
        android:id="@+id/text_1"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_below="@+id/img_0"
        android:layout_centerHorizontal="true"
        android:layout_marginTop="15dp"
        android:gravity="center"
        android:textAppearance="?android:attr/textAppearanceLarge" />

    <TextView
        android:id="@+id/text_2"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_below="@+id/text_1"
        android:layout_marginTop="15dp"
        android:gravity="center"
        android:textAppearance="?android:attr/textAppearanceMedium" />

    <TextView
        android:id="@+id/text_3"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_below="@+id/text_2"
        android:layout_marginTop="15dp"
        android:gravity="center"
        android:textAppearance="?android:attr/textAppearanceMedium" />

</RelativeLayout> 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-13T12:04:20.713

这可以通过[StateListDrawable](http://developer.android.com/reference/android/graphics/drawable/StateListDrawable.html)来实现。

`item_background.xml`在您的文件夹中创建一个背景可绘制资源，例如`/drawable`，包含如下内容：

```
<?xml version="1.0" encoding="utf-8"?>
<selector xmlns:android="http://schemas.android.com/apk/res/android">
  <item android:drawable="@color/color1" android:state_pressed="true"/>
  <item android:drawable="@color/color2" android:state_selected="true"/>
  <item android:drawable="@color/color3" android:state_activated="true"/>
  <item android:drawable="@color/color4"/>
</selector> 
```

然后在文件中提供颜色值`/values/colors.xml`：

```
<?xml version="1.0" encoding="utf-8"?>
<resources>
  <color name="color1">#DDff8800</color>
  <color name="color2">...</color>
  <!-- more colors... -->
</resources> 
```

最后，将该可绘制资源设置为布局中的项目背景，使用`android:background="@drawable/item_background"`.

`src`图像保持不变。

# android - 三星 Galaxy S2 仿真

> ID：14302946
> 
> 赞同：5
> 
> 时间：2013-01-13T11:22:33.853
> 
> 标签：android, android-emulator, avd

我正在尝试创建 Galaxy S2 AVD，以测试在该手机上呈现不佳的应用程序。我按照[此处](https://stackoverflow.com/questions/10641744/samsung-galaxy-s-ii-avd-android-virtual-device-basic-settings)提供的说明进行操作，包括 by`@mwalter`和 by `@Lloyd`。

我可以启动模拟器，但我在[这里](https://stackoverflow.com/questions/12386895/samsung-galaxy-s2-avd-official-skin-how-to-render-correct-dimensions)遇到了同样的显示问题。不幸的是，这个问题的解决方案需要改变`"abstract LCD density"`. 我在新 SDK 的 UI 上的*任何地方*都找不到它。

我`hw.lcd.density`在 AVD 中找到了一个参数`config.ini`，但更改它并没有任何区别。

如何使 S2 仿真的行为更像实际的 S2？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-05-31T22:01:37.313

您需要更改此设置：

```
hw.lcd.density 
```

位于：

```
<ANDROID_SDK_PATH>\sdk\platforms\android-<APIversion>\skins\<YourSkin>\hardware.ini 
```

从**300**到**218**。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-27T07:56:56.960

我从[这里](https://stackoverflow.com/questions/10641744/samsung-galaxy-s-ii-avd-android-virtual-device-basic-settings)得到了这个答案，这对我有帮助。将 config.ini 文件的内容替换为以下内容：

```
avd.ini.encoding=ISO-8859-1
abi.type=armeabi
hw.accelerometer=yes
hw.audioInput=yes
hw.battery=yes
hw.cpu.arch=arm
hw.device.hash=-1902399403
hw.device.manufacturer=Samsung
hw.device.name=Samsung Galaxy SII
hw.dPad=no
hw.gps=yes
hw.gsmModem=yes
hw.keyboard=no
hw.lcd.density=240
hw.mainKeys=yes
hw.ramSize=1024M
hw.sdCard=yes
hw.sensors.orientation=yes
hw.sensors.proximity=yes
hw.touchScreen=yes
hw.trackBall=no
image.sysdir.1=platforms\android-10\images\
skin.dynamic=yes
skin.name=galaxy_s2
skin.path=platforms\android-10\skins\GALAXY_S2
vm.heapSize=32
disk.dataPartition.size=2G
hw.camera.back=webcam0
sdcard.size=200M 
```

# jquery - 意外} - 但没有什么可关闭的

> ID：14302951
> 
> 赞同：0
> 
> 时间：2013-01-13T11:23:18.217
> 
> 标签：jquery, jquery-animate

我确实希望我的问题适合这里，因为我阅读了常见问题解答，但我不清楚是否应该在这里运行代码错误。无论如何，这个片段（从我工作的项目中提取）让我很难过。在检查[JSFiddle](http://jsfiddle.net/BramVanroy/CJSpg/)时，它​​告诉我它期望`}`关闭`animate({`但是 found `300`，但这没有意义，因为没有什么可匹配的，动画已经关闭。

然后控制台，告诉我之前的逗号`300`是意外的。我真的不明白它的问题！

```
var condition = offL > ((wW / 2) - $this.width()),
  propertiesAnim = [],
  propertiesCss = [];

if (condtion) {
  properties = "'left': offL - tooltip.width() - 25";
  propertiesCss = "'right', 'auto'";
} else {
  properties = "'right': offR - tooltip.width() - 25";
  propertiesCss = "'left', 'auto'";
}

tooltip.stop(true).css(propertiesCss).text(title).animate({
  "top": ($this.offset().top + (posT / 2) - (tooltip.height() / 2)),
  properties
}, 300).fadeTo(200, 1); // Error 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-13T11:27:19.107

没有为 中的值指定键`properties`。正确的语法（从严格的理论角度来看）是：

```
tooltip.stop(true).css(propertiesCss).text(title).animate({
  "top": (...),
  "someKey": properties
}, 300); 
```

当然这不会产生预期的结果，因为虽然在语法上有效，但从 jQuery 的角度来看它是没有意义的。为了使工作正常，您可以使用[`$.extend`](http://api.jquery.com/jQuery.extend/)：

```
// conditional properties
if (condition) {
  properties = { "left": offL - tooltip.width() - 25 };
} else {
  properties = { "right": offR - tooltip.width() - 25 };
}

// merging the above with default properties
$.extend(properties, {
    "top": (...),
});

tooltip.stop(true).css(propertiesCss).text(title).animate(properties, 300); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-13T11:27:30.743

您不能将字符串变量用作对象文字中语法的一部分。Javascript 引擎需要冒号和后面的值`properties`。它不将其视为变量，而是将其视为对象中属性的标识符。

同样，在调用函数时，不能使用包含两个值而不是两个属性的字符串。然而，该`css`函数可以采用一个对象而不是两个参数。

在语句之前创建对象`if`，以便您可以在其中设置属性：

```
var condition = offL > ((wW / 2) - $this.width()),
  propertiesCss,
  properties = {
    "top": ($this.offset().top + (posT / 2) - (tooltip.height() / 2))
  };

if (condtion) {
  properties.left = offL - tooltip.width() - 25;
  propertiesCss = { right: 'auto' };
} else {
  properties.right = offR - tooltip.width() - 25;
  propertiesCss = { left: 'auto' };
}

tooltip.stop(true).css(propertiesCss).text(title).animate(properties, 300).fadeTo(200, 1); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-13T11:30:05.000

您既不能添加到“属性”列表，也不能将变量插入到这样的字符串中。

首先，使用正确的对象文字语法来填充您的属性（需要将其声明为对象，而不是数组）

```
var properties = {}, css = {};

if (condtion) {
    properties = { left: offL - tooltip.width() - 25 };
    css = { right: 'auto' };
} else {
    properties = { right: offR - tooltip.width() - 25 };
    css = { left: 'auto' };
} 
```

然后，用于`$.extend`向现有对象添加新属性，或者直接添加所需的值，即

```
$.extend(properties, {
    top: $this.offset().top + (posT / 2) - (tooltip.height() / 2)
}); 
```

或者：

```
properties.top = $this.offset().top + (posT / 2) - (tooltip.height() / 2); 
```

然后：

```
...animate(properties); 
```

`$.extend()`如果您已经拥有一组对象属性并想要合并另一组的内容，则首选。对于仅添加一个属性，后一种方法更简单。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-13T13:52:44.710

对于非常不同的东西，您可能会考虑这种方法：

```
var propertiesCss = {},
    propertiesAnim = {
        "top": ($this.offset().top + (posT / 2) - (tooltip.height() / 2))
    },
    i = 0 + (offL > ((wW / 2) - $this.width())),//0 or 1
    ii = -(i-1),//1 or 0
    sides = ['left', 'right'],
    off = [offL : offR];

propertiesAnim[sides[i]] = off[i] - tooltip.width() - 25);
propertiesCss[sides[ii]] = 'auto';

tooltip.stop(true).css(propertiesCss).text(title).animate(propertiesAnim, 300).fadeTo(200, 1); 
```

这更像是一种“数学家”的方法，当您需要从基本方程的许多变体中进行选择时适用。在这种情况下，该模式节省了代码（尽管不是内存），并且可以提供良好的可扩展性。

# r - plot.survfit 中用于颜色或线型的组的顺序是什么？

> ID：14302960
> 
> 赞同：4
> 
> 时间：2013-01-13T11:24:10.657
> 
> 标签：r, plot, survival-analysis

我正在编写一个脚本，它将生成`plot(survfit(Surv(time, event)~factor))`.

不同的生存曲线会有不同的颜色。颜色的顺序是如何定义的？是`levels(factor)`吗？`unique(factor)`?

我的意思是我想自动编写图例标签和文本的脚本。我可以安全地`levels(factor)`用作图例文本吗？

我确定这在某处有记录，但帮助条目`?plot.survfit`不是很有帮助？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-13T11:31:20.507

是的，颜色的顺序取决于`levels(factor)`，是的，您可以将`levels(factor)`其用于图例文本。

每当您处理一个因素时，这都适用。如果需要，您还可以使用许多函数来操纵因子的水平，例如 check `?relevel`。

# php - PHP：1 个 int 变量内的 3 个 int ID

> ID：14302968
> 
> 赞同：0
> 
> 时间：2013-01-13T11:24:54.957
> 
> 标签：php

我必须在一个名为 $id 的数字字符串中传递 3 个变量（int）。为此，我使用填充创建 $id ，然后我可以分解以获取变量。它必须是数字，否则我会在变量之间使用下划线。我使用十一个零作为填充，因为我知道变量不会有那么多零。所以目前如果我有：

```
$int_one = 1;
$int_two = 2;
$int_three = 3; 
```

那将是：

```
$id = "1000000000002000000000003"; 
```

要创建我使用的新 ID：

```
$id = $int_one . "00000000000" . $int_two . "00000000000" . $int_three; 
```

并将我使用的 ID 分开：

```
$int_one = 0;
$int_two = 0;
$int_three = 0;
if (strpos($id,"00000000000") !== false) {
    $id = strrev($id); // Reversed so 0's in int's don't get counted
    $id = explode("00000000000", $id);
    // Set numbers back the right way
    $int_one = strrev($id[2]);
    $int_two = strrev($id[1]);
    $int_three = strrev($id[0]);
} 
```

当单个变量为 0 时，这会遇到问题。有没有办法克服这个问题，还是需要重新考虑？

**编辑：** `$id`应该是一个数字字符串而不是 int

需要处理 0 - 2147483647 之间的 int 变量

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-13T11:52:33.110

您可以使用一些字符串魔术来确保没有数字连续超过一个零，并使用“00”分隔值。无论整数的大小或组成如何，这都会生成一个可以唯一解码的*数字字符串。*

```
$a = 100;
$b = 0;
$c = 120;

// Encode;

$id = str_replace('0', '01', $a).'00'
     .str_replace('0', '01', $b).'00'
     .str_replace('0', '01', $c);

// $id = "101010001001201"

// Decode;

$tmp = split('00', $id);
$a2 = intval(str_replace('01', '0', $tmp[0]));
$b2 = intval(str_replace('01', '0', $tmp[1]));
$c2 = intval(str_replace('01', '0', $tmp[2]));

// $a2 = 100, $b2 = 0, $c2 = 120 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-13T11:27:09.420

> 有没有办法克服这个问题，还是需要重新考虑？

是的，你需要重新考虑这一点。为什么你需要这样做？只需创建一个具有三个参数的函数并将三个整数传入：

```
function foo($int1, $int2, $int3) {
} 
```

您的示例使用字符串，而不是整数，因此您甚至没有遵循自己的要求。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-13T11:42:43.913

你可以试试这个方法：

```
$int_one = 1;
$int_two = 2;
$int_three = 3;

$id = $int_one * 1000000000000 + $int_two * 1000000 + $int_three;
// This will create a value of 1000002000003 
```

要反转该过程：

```
// Get the modulo of $id / 1000000 --> 3
$int_three = $id % 1000000;

// Recalculate the base id - if you would like to retain the original id, first duplicate variable
// This would make $id = 1000002;
$id = ($id - $int_three) / 1000000;

// Again, get modulo --> 2
$int_two = $id % 1000000;

// Recalculate base id
$id = ($id - $int_two) / 1000000;

// Your first integer is the result of this division.
$int_one = $id; 
```

# java - 二维数组中的列总和

> ID：14302971
> 
> 赞同：3
> 
> 时间：2013-01-13T11:25:50.037
> 
> 标签：java, arrays, add

```
static double [][] initialArray = {{7.432, 8.541, 23.398, 3.981}, {721.859, 6.9211, 29.7505, 53.6483}, {87.901, 455.72, 91.567, 57.988}};

public double[] columnSum(double [][] array){
    int index = 0;
    double temp[] = new double[array[index].length];

    for (int i = 0; i < array[i].length; i++){
        double sum = 0;

        for (int j = 0; j < array.length; j++){
            sum += array[j][i];

        }
        temp[index] = sum;
        System.out.println("Index is: " + index + " Sum is: "+sum);
        index++;

    }

    return temp;
}

public static void main(String[] args) {
    arrayq test = new arrayq();
    test.columnSum(initialArray);

} 
```

我想获得所有列的总和，但我不断收到 outofbounds 异常。这是我得到的输出：

```
Index is: 0 Sum is: 817.192
Index is: 1 Sum is: 471.18210000000005
Index is: 2 Sum is: 144.7155
Exception in thread "main" java.lang.ArrayIndexOutOfBoundsException: 3
at NewExam.arrayq.columnSum(arrayq.java:11) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-13T11:37:20.663

您的外部 for 循环条件给您带来了问题。这是你的循环： -

```
for (int i = 0; i < array[i].length; i++) 
```

现在，当`i`达到 value时`3`，您正在尝试访问`array[3].length`. 这会给你抛出`IndexOutOfBounds`异常。

* * *

由于每个内部数组的大小相同，您可以**将循环更改为**： -

```
for (int i = 0; i < array[0].length; i++) 
```

或者，更好的是，只需事先将其存储`array[0].length`在某个变量中。但这不会有太大的不同。

* * *

我还建议您使用更好的方法来计算列的总和。避免首先迭代行。保持迭代正常，可能是这样的：-

```
public double[] columnSum(double [][] array){

    int size = array[0].length; // Replace it with the size of maximum length inner array
    double temp[] = new double[size];

    for (int i = 0; i < array.length; i++){
        for (int j = 0; j < array[i].length; j++){
            temp[j] += array[i][j];  // Note that, I am adding to `temp[j]`.
        }
    }

    System.out.println(Arrays.toString(temp));
    return temp;  // Note you are not using this return value in the calling method
} 
```

因此，您可以看到您的问题是如何高度简化的。我所做的是，我没有将值分配给数组，而是将 的新值添加`array[i][j]`到 的现有值中`temp[j]`。因此，逐渐地，`array[i][j]`for all的值`i's (rows)`被总结为`temp[j]`. 这样您就不必使用令人困惑的迭代。因此，只需将上面的代码添加到您的方法中，然后删除旧的。

这种方法也可以正常工作，即使你有`jagged-array`，即你的内部数组大小不同。但请记住`temp`仔细定义数组的大小。

另请注意，我使用`Arrays.toString(temp)`方法来打印数组。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-01-30T15:11:47.710

您的代码的问题是当它尝试获取时`arr[3].length`，因为不存在像`sum = sum+arr[i][j]`where`i`引用`row`和`j`引用这样的简单解决方案`column`。

```
int row = arr.length;
int col = arr[0].length;
for(int j = 0; j < cols; j++)
{
            int sum = 0;
            for(int i = 0; i < rows; i++)
            {
                sum = sum + input[i][j];
            }

        } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-13T11:34:38.247

for (int i = 0; i < array[i].length; i++)

```
for(int i=0;i<size;i++) 
```

`i`&`size`绝不能在循环中改变

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-13T11:36:31.067

很近。问题是您`array[i].length`在 for 循环中使用。我将它从 更改`array[i].length`为`array[0].length`并且您的问题消失了。你需要`j`那里，但实际上你还没有。

你可以做这样的事情，虽然如果你知道你将如何得到你的数组，那真的没有任何意义。不同大小的列表仍然会破坏计算总和的代码，但您也必须更改它。

```
for (int i = 0, j = 0; i < initialArray[j].length; i++) {
  for (; j < initialArray.length; j++) {
    System.out.println(i + " " + j);
  }
  j = 0;
} 
```

这是您修改后的程序。

```
public class Main {
  static double[][] initialArray = { { 7.432, 8.541, 23.398, 3.981 }, { 721.859, 6.9211, 29.7505, 53.6483 }, { 87.901, 455.72, 91.567, 57.988 } };

  public double[] columnSum(double[][] array) {
    int index = 0;
    double temp[] = new double[array[index].length];
    for (int i = 0; i < array[0].length; i++) {
      double sum = 0;
      for (int j = 0; j < array.length; j++) {
        sum += array[j][i];
      }
      temp[index] = sum;
      System.out.println("Index is: " + index + " Sum is: " + sum);
      index++;
    }
    return temp;
  }

  public static void main(String[] args) {
    new Main().columnSum(initialArray);
  }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-13T11:49:14.167

对于 index = 3，i 也等于 3，并且您的代码中有 array[i].length，但是 array 有 3 个项目，因此您在 array[3].length 表达式上得到异常

尝试一下

```
public double[] columnSum(double [][] array){
    double temp[] = new double[array[0].length];

    for (int i = 0; i < array[0].length; i++){
        double sum = 0;

        for (int j = 0; j < array.length; j++){
            sum += array[j][i];

        }
        temp[i] = sum;
        System.out.println("Index is: " + i + " Sum is: "+sum);

    }

    return temp;
} 
```

# javascript - 如何管理事件卸载

> ID：14302992
> 
> 赞同：0
> 
> 时间：2013-01-13T11:29:12.087
> 
> 标签：javascript, jquery

我想在我的页面中插入一个在窗口关闭或更改时触发的事件，除非是由特定提交的提交按钮触发的情况，该提交按钮引入了类似的页面。我尝试了以下操作，但它不起作用。（prova 是提交的名称）。

```
$(window).bind("unload", function (event) {
  alert('1');
  if (event.target.tagName != "prova") {
    alert('2');
    var postData = {
      'chat_message': "I left"
    };
    $.ajax({
      type: "POST",
      dataType: "json",
      url: base_url + "chat/ajax_add_message/" + chat_id + "/" + user_id,
      data: postData,
      success: function (data) {
        get_messages();
      }
    });

  }
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T11:42:24.230

你真的有带有标签“prova”的HTML元素吗？

```
 event.target.tagName != "prova" 
```

也许你需要检查`className`或`id`？

# hibernate - 解析 hibernate.cfg.xml 时出现异常

> ID：14302995
> 
> 赞同：2
> 
> 时间：2013-01-13T11:29:25.970
> 
> 标签：hibernate

您好正在使用注释编写一个简单的休眠程序，下面是我的 hibernate.cfg.xml 文件：

```
 <!DOCTYPE hibernate-configuration PUBLIC
    "-//Hibernate/Hibernate Configuration DTD 3.0//EN"
    "http://www.hibernate.org/dtd/hibernate-configuration-3.0.dtd">
<hibernate-configuration>
 <session-factory>

    <!-- Database connection settings -->
    <property name="connection.driver_class">oracle.jdbc.OracleDriver</property>
    <property name="connection.url">jdbc:oracle:thin:@127.0.0.1:1521:XE</property>
    <property name="connection.username">vikas</property>
    <property name="connection.password">vikas</property>>

    <!-- JDBC connection pool (use the built-in) -->
    <property name="connection.pool_size">1</property>

    <!-- SQL dialect -->
    <property name="dialect">org.hibernate.dialect.Oracle10gDialect</property>

    <!-- Disable the second-level cache  -->
    <!-- <property name="cache.provider_class">org.hibernate.cache.internal.NoCacheProvider</property> -->

    <!-- Echo all executed SQL to stdout -->
    <property name="show_sql">true</property>

    <!-- Drop and re-create the database schema on startup -->
    <property name="hbm2ddl.auto">create</property>

    <!-- Name the annotated Entity -->
    <mapping class="org.vikas.hibernate.dto.UserDetails"></mapping>
</session-factory> 
```

当我试图朗姆我的程序时，它会抛出以下异常：

```
 16:41:07.592 [main] ERROR org.hibernate.util.XMLHelper - Error parsing XML:         
/hibernate.cfg.xml(56) The content of element type "session-factory" must match "(property*,mapping*,(class-cache|collection-cache)*,event*,listener*)".
16:41:07.599 [main] ERROR org.hibernate.cfg.Configuration - problem parsing configuration/hibernate.cfg.xml
Exception in thread "main" org.hibernate.HibernateException: problem parsing configuration/hibernate.cfg.xml
    at org.hibernate.cfg.Configuration.doConfigure(Configuration.java:1222)
    at org.hibernate.cfg.Configuration.configure(Configuration.java:1161)
    at org.hibernate.cfg.Configuration.configure(Configuration.java:1147)
    at org.vikas.hibernate.dto.MainTest.main(MainTest.java:18)
Caused by: org.hibernate.MappingException: invalid configuration
    at org.hibernate.cfg.Configuration.doConfigure(Configuration.java:1218)
    ... 3 more
Caused by: org.xml.sax.SAXParseException; lineNumber: 56; columnNumber: 23; The content of element type "session-factory" must match "(property*,mapping*,(class-cache|collection-cache)*,event*,listener*)".
    at com.sun.org.apache.xerces.internal.util.ErrorHandlerWrapper.createSAXParseException(Unknown Source)
    at com.sun.org.apache.xerces.internal.util.ErrorHandlerWrapper.error(Unknown Source)
    at com.sun.org.apache.xerces.internal.impl.XMLErrorReporter.reportError(Unknown Source)
    at com.sun.org.apache.xerces.internal.impl.XMLErrorReporter.reportError(Unknown Source)
    at com.sun.org.apache.xerces.internal.impl.XMLErrorReporter.reportError(Unknown Source)
    at com.sun.org.apache.xerces.internal.impl.dtd.XMLDTDValidator.handleEndElement(Unknown Source)
    at com.sun.org.apache.xerces.internal.impl.dtd.XMLDTDValidator.endElement(Unknown Source)
    at com.sun.org.apache.xerces.internal.impl.XMLDocumentFragmentScannerImpl.scanEndElement(Unknown Source)
    at com.sun.org.apache.xerces.internal.impl.XMLDocumentFragmentScannerImpl$FragmentContentDriver.next(Unknown Source)
    at com.sun.org.apache.xerces.internal.impl.XMLDocumentScannerImpl.next(Unknown Source)
    at com.sun.org.apache.xerces.internal.impl.XMLNSDocumentScannerImpl.next(Unknown Source)
    at com.sun.org.apache.xerces.internal.impl.XMLDocumentFragmentScannerImpl.scanDocument(Unknown Source)
    at com.sun.org.apache.xerces.internal.parsers.XML11Configuration.parse(Unknown Source)
    at com.sun.org.apache.xerces.internal.parsers.XML11Configuration.parse(Unknown Source)
    at com.sun.org.apache.xerces.internal.parsers.XMLParser.parse(Unknown Source)
    at com.sun.org.apache.xerces.internal.parsers.AbstractSAXParser.parse(Unknown Source)
    at com.sun.org.apache.xerces.internal.jaxp.SAXParserImpl$JAXPSAXParser.parse(Unknown Source)
    at org.dom4j.io.SAXReader.read(SAXReader.java:465)
    at org.hibernate.cfg.Configuration.doConfigure(Configuration.java:1217)
    ... 3 more 
```

你能告诉我，我哪里出错了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T10:06:41.930

问题是文件中有一个错误字符或缺少字符。

例如在该行

```
 <property name="connection.password">vikas</property>> 
```

最后你有一个额外的'>'。我不知道这是错误还是您删除评论时发生的错误。如果这不是错误，请查看其他错误字符。这甚至可能是一个不可见的字符（但不是一个简单的空间，它们是无害的）。`</hibernate-configuration>`有一次它发生在我身上，错误是标签后缺少换行符。

# java - Android edittext gets cut off

> ID：14302997
> 
> 赞同：0
> 
> 时间：2013-01-13T11:29:30.947
> 
> 标签：java, android, android-edittext, ondraw

I created a custom EditText view in onDraw that is meant to have a red margin line. The problem is that when you scroll down, the line disappears. This code simply draws a margin whos width is pre-defined in the values folder and then colors it with a pre-defined color from colors.xml. Here's my code:

```
package com.lioncode.notepad;

import android.content.Context;
import android.content.res.Resources;
import android.graphics.Canvas;
import android.graphics.Color;
import android.graphics.Paint;
import android.graphics.Paint.Style;
import android.graphics.Rect;
import android.util.AttributeSet;
import android.widget.EditText;

Public class LinedEditText extends EditText {

private static Paint linePaint;

static {
    linePaint = new Paint();
    linePaint.setColor(Color.DKGRAY);
    linePaint.setStyle(Style.STROKE);
}

public LinedEditText(Context context, AttributeSet attributes) {
    super(context, attributes);
    init();
}

private Paint marginPaint;
private float margin;
private int paperColor;

private void init() {
    Resources myResources = getResources();

    marginPaint = new Paint(Paint.ANTI_ALIAS_FLAG);
    marginPaint.setColor(myResources.getColor(R.color.notepad_margin));

    paperColor = myResources.getColor(R.color.notepad_paper);
    margin = myResources.getDimension(R.dimen.notepaper_margin);

}

@Override
protected void onDraw(Canvas canvas) {
    Rect bounds = new Rect();
    int firstLineY = getLineBounds(0, bounds);
    int lineHeight = getLineHeight();
    int totalLines = Math.max(getLineCount(), getHeight() / lineHeight);

    for (int i = 0; i < totalLines; i++) {
        int lineY = firstLineY + i * lineHeight;
        canvas.drawLine(bounds.left, lineY, bounds.right, lineY, linePaint);
    }

    // draw margin
    canvas.drawLine(margin, 0, margin, getMeasuredHeight(), marginPaint);

    // move the text from along the margin
    canvas.save();
    canvas.translate(margin, 0);
    super.onDraw(canvas);
}

     } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T22:45:29.367

Replace total lines with a high number the user will probably never reach.