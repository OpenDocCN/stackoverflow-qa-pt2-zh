# StackOverflow 问答 14574000-14574999

# r - 使用python执行.R脚本

> ID：14574006
> 
> 赞同：3
> 
> 时间：2013-01-29T01:05:01.150
> 
> 标签：r, python-2.7

经过七个小时的谷歌搜索和重新阅读一些类似的问题，然后进行了大量的试验和错误，我现在很乐意寻求一些指导。

为了简化我的实际任务，我创建了一个非常基本的 R 脚本（名为 test_script）：

```
x <- c(1,2,3,4,5)
avg <- mean(x)
write.csv(avg, file = "output.csv") 
```

这按预期工作。

我是 python 新手，我只是想弄清楚如何执行 R 脚本，以便创建相同的 .csv 文件。

显着的结果来自：

```
subprocess.call(["C:/Program Files/R/R-2.15.2/bin/R", 'C:/Users/matt/Desktop/test_script.R']) 
```

这将打开一个带有典型 R 启动语句的 cmd 窗口，但有一条消息显示“ARGUMENT 'C:/Users/matt/Desktop/test_script.R' __ 已忽略 __”

和：

```
subprocess.call(['C:/Program Files/R/R-2.15.2/bin/Rscript', 'C:/Users/matt/Desktop/test_script.r']) 
```

这会闪烁一个 cmd 窗口并返回一个 0，但不会创建 .csv 文件。

否则，我已经尝试了我可以在本网站或任何其他网站上找到的所有建议。任何见解将不胜感激。提前感谢您的时间和努力。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-29T01:12:46.937

`R --help`在命令提示符下运行打印：

```
Usage: R [options] [< infile] [> outfile]
   or: R CMD command [arguments]

Start R, a system for statistical computation and graphics, with the
specified options, or invoke an R tool via the 'R CMD' interface.

Options:
  -h, --help            Print short help message and exit
  --version             Print version info and exit
  ...
  -f FILE, --file=FILE  Take input from 'FILE'
  -e EXPR               Execute 'EXPR' and exit

FILE may contain spaces but not shell metacharacers.

Commands:
  BATCH         Run R in batch mode
  COMPILE       Compile files for use with R
  ... 
```

尝试

```
call(["C:/Program Files/R/R-2.15.2/bin/R", '-f', 'C:/Users/matt/Desktop/test_script.R']) 
```

您还可以将其他一些命令行参数传递给 R，它们可能会有所帮助。运行`R --help`以查看完整列表。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-10-23T10:59:50.530

可能为时已晚，但希望对其他人有所帮助：

只需添加`--vanilla`通话列表即可。

```
subprocess.call(['C:/Program Files/R/R-2.15.2/bin/Rscript',  '--vanilla', 'C:/Users/matt/Desktop/test_script.r']) 
```

# java - 背景透明度 webview

> ID：14574007
> 
> 赞同：0
> 
> 时间：2013-01-29T01:05:05.463
> 
> 标签：java, android, transparency

我对 webview 的透明度有疑问，我阅读了一堆解决方案，但没有一个对我有用，我可能会错过好的一个。

```
webView = (WebView) findViewById(R.id.webView1);
WebSettings webSettings = webView.getSettings();
webSettings.getPluginState();
webSettings.setPluginState(PluginState.ON);

String customHtml = "<div style=\"padding:0;margin:0;background:transparent;border:none;position:relative;cursor:pointer;overflow:hidden; height:165px;\">    <object ggnoclick ggswfcid name=\"flashobj\" id=\"flashobj\" width=\"100%\" height=\"165\" data=\"http://c.gumgum.com/ads/com/cbs/55thgrammys/grammys_ca_rihanna.swf?modalURL=GGUID\" type=\"application/x-shockwave-flash\" allowscriptaccess=\"always\" wmode=\"transparent\" background=\"transparent\" style=\"background:transparent;\">        <param name=\"movie\" value=\"http://c.gumgum.com/ads/com/cbs/55thgrammys/grammys_ca_rihanna.swf?modalURL=GGUID\" />        <param name=\"AllowScriptAccess\" value=\"always\" />        <param name=\"wmode\" value=\"transparent\" />    </object></div>";

webView.loadData(customHtml, "text/html", "utf-8");
webSettings.setJavaScriptEnabled(true);
webView.setBackgroundColor(Color.TRANSPARENT);
webView.setBackgroundResource(color.transparent);
//webView.setLayerType(WebView.LAYER_TYPE_SOFTWARE, null); 
```

当我取消注释最后一行时，所有 webView 甚至我的内容都是透明的，但是如果我注释最后一行，则背景是白色且不透明。

有人有想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T06:24:27.530

这个对我有用（在 Android 2.1 设备和 Android 4.1 设备上测试）：

解决方案来自[这个线程](http://code.google.com/p/android/issues/detail?id=14749)。

```
public class MainActivity extends Activity {

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        WebView webview = (WebView) findViewById(R.id.webView1);
        if (webview!=null) {
            String content = "Hello World";
            String html = 
"<html>" +
"<body background=\"#00000000\" link=\"white\">" +
"<font color=\"white\">" + 
content + 
"</font>" +
"</body>" +
"</html>";
            webview.loadDataWithBaseURL(null, html, "text/html", "UTF-8", null);
            webview.setBackgroundColor(0x00000000);
            if (Build.VERSION.SDK_INT >= 11) {// Android v3.0+
                try {
                    Method method = View.class.getMethod("setLayerType", int.class, Paint.class);
                    method.invoke(webview, 1, new Paint()); // 1 = LAYER_TYPE_SOFTWARE (API11)
                } catch (Exception e) {
                    e.printStackTrace();
                }
            }
        }
    }
} 
```

# sql-server - 我将如何编写 SQL 查询来恢复所有级别的产品分类以适应未知数？

> ID：14574010
> 
> 赞同：0
> 
> 时间：2013-01-29T01:05:30.997
> 
> 标签：sql-server, tsql, relational-database, data-warehouse, rolap

我知道这个问题可能不太清楚，但我会尝试更好地解释事情：

我正在构建一个数据仓库，并且正在为我的 ROLAP 构建一个产品维度表。该维度将包括产品、品牌、客户。

因此，在 OLTP 中有一个 Product 表，它与 Brand 表相连，而 Brand 表与 Client 表相连。在数据输入过程中，有时产品未知但品牌已知，因此有时 ProductID 字段中有 NULLS。

因此，对于数据仓库，我在 OLTP 上创建视图，这些视图将通过 SSIS 用于加载 ROLAP。我有一个视图，它将创建一个包含其品牌和客户的所有产品的列表。我需要做的是找到一种方法将结果添加到该视图中，以适应产品或品牌为未知或 NULL 的情况。

我尝试使用交叉连接，但我得到的品牌有不正确的合同等。

*   产品（ID、产品名称、品牌 ID）
*   品牌（ID、BrandName、ClientID）
*   客户（ID、客户名称）

我要的最终结果是：

```
 [ProductID]  [ProductName]  [BrandID]  [BrandName]  [ClientID]  [ClientName]
      1           ProductA       1           BrandA        1          ClientA
      2           ProductB       1           BrandA        1          ClientA
      3           ProductC       2           BrandB        1          ClientA
      ....
      -2          Unknown        43          BrandABC      33         ClientXYZ
      -3          Unknown        -2          Unknown       34         ClientABC
      -1          Unknown        -1          Unknown       -1         Unknown 
```

您可能会问如果产品是未知的，品牌将如何被知晓？原因是这个系统是为客户来电咨询产品，有时来电者只知道他们打电话的品牌。

所以无论如何，我希望我能很好地解释自己，并且有人可以为我提供解决方案。将不胜感激！

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T01:21:46.310

您需要的是外部连接。就像是：

```
SELECT *
FROM Client AS C
LEFT OUTER JOIN Brand AS B
ON C.Id = B.ClientID
LEFT OUTER JOIN Product AS P
ON P.BrandId = B.Id; 
```

这样一来，如果所有客户都拥有品牌甚至产品，您就可以让他们独立。

有关 JOIN 的更多信息，请查看我的“ [A Join A Day](http://sqlity.net/en/1146/a-join-a-day-introduction/) ”系列。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T01:43:09.207

要跟进我的评论，请执行以下操作 - 您需要使用该`COALESCE`功能：

```
SELECT P.Id as ProductId, COALESCE(P.ProductName,'Unknown') ProductName,
   B.Id as BrandId, COALESCE(B.BrandName,'Unknown') BrandName,
   C.Id as ClientId, C.ClientName
FROM Client AS C
   LEFT OUTER JOIN Brand AS B
      ON C.Id = B.ClientId 
   LEFT OUTER JOIN Product AS P
      ON P.BrandId = B.Id; 
```

还有[SQL 小提琴](http://sqlfiddle.com/#!3/f4fa6/3)。

顺便说一句——如果你需要负值而不是 NULL，试试这个：

```
SELECT COALESCE(ProductId, productrn*-1) as ProductId, 
   ProductName, 
   COALESCE(BrandId, brandrn*-1) as BrandId,
   BrandName,
   ClientId, 
   ClientName
FROM (
SELECT 
   ROW_NUMBER() OVER(ORDER BY  P.Id) productrn, 
   ROW_NUMBER() OVER(ORDER BY  B.Id) brandrn, 
   P.Id as ProductId, COALESCE(P.ProductName,'Unknown') ProductName,
   B.Id as BrandId, COALESCE(B.BrandName,'Unknown') BrandName,
   C.Id as ClientId, C.ClientName
FROM Client AS C
   LEFT OUTER JOIN Brand AS B
      ON C.Id = B.ClientId 
   LEFT OUTER JOIN Product AS P
      ON P.BrandId = B.Id
  ) t; 
```

还有更多的[小提琴](http://sqlfiddle.com/#!3/f4fa6/13)。

祝你好运。

# c++ - 如何使对话框标题居中？

> ID：14574011
> 
> 赞同：2
> 
> 时间：2013-01-29T01:05:34.887
> 
> 标签：c++, dialog

我在资源文件中创建了 IDD_DIALOG。

我正在使用以下代码将 DIALOG 置于屏幕中间：

```
case WM_INITDIALOG:
    RECT Rect;
    ::GetWindowRect(hwndDlg, &Rect);
    ::SetWindowPos(hwndDlg, HWND_TOPMOST, (::GetSystemMetrics(SM_CXSCREEN)/2 - ((Rect.right - Rect.left)/2)), (::GetSystemMetrics(SM_CYSCREEN)/2 - ((Rect.bottom - Rect.top)/2)), (Rect.right - Rect.left), (Rect.bottom - Rect.top), SWP_SHOWWINDOW);
    return TRUE; 
```

我的问题是，我如何将标题（对话框标题）与我当前的代码放在一起？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-29T01:38:26.683

除非你真的需要，否则最好不要。

您可能需要绘制自定义边框/框架，这是 Office 等某些应用程序所做的，以便它们可以在标题栏中具有其他按钮小部件。（Office 还在其标题栏中将文本居中...）它非常复杂，另外还有两种不同的技术，具体取决于您是在 XP 之前的版本上运行，还是在启用 DWM 的 Vista 上运行。我发现一篇文章[总结了 Vista/DWM 案例中涉及的一些问题](http://msdn.microsoft.com/en-us/library/bb688195%28VS.85%29.aspx)。如果未启用 DWM，您可能需要支持旧技术、[处理和覆盖 WM_NCPAINT](http://msdn.microsoft.com/en-us/library/windows/desktop/dd145212%28v=vs.85%29.aspx)。

仅仅为了使标题栏居中就需要做*很多*工作！

事实证明，标题栏的理由随着时间的推移发生了变化：在 Win3.1 中，它是居中的；然后在 95 时代，它变成了左对齐（或从右到左的语言右对齐）。事实证明事情已经完全循环了，在桌面模式下，Windows 8 又恢复到居中。

所以也许最简单的答案是“如何使对话标题居中？” 是：升级到 Windows 8 :-)

# c# - 如何将 CSV 文件拖放到 C# WPF 中并使用数据表中的数据？

> ID：14574023
> 
> 赞同：0
> 
> 时间：2013-01-29T01:06:36.663
> 
> 标签：c#, wpf, drag-and-drop, datatable

我花了一些时间在网上搜索可能对我有帮助但找不到我真正需要的东西。我发现了很多关于 Windows 表单的例子，但没有发现 WPF 的例子。

我有一大堆 CSV 文件。每个文件仅包含一个数据表，并且该表仅包含两列。第一列包含标题（每个 CSV 文件都相同），第二列包含数据。我正在尝试编写一些东西，用户可以将最多 5 个 CSV 文件拖到表单上的一个区域中，并且应用程序将第一列可视化，然后将最多 5 列数据彼此相邻以进行比较。

任何能指出我正确方向的人都将不胜感激。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T02:09:53.773

这个问题至少有3个部分：

1.  在您的应用程序中启用拖放支持（请参阅 500 - 内部服务器错误对此的回答）
2.  读取选定的 CSV 文件。为此，您可以查看[Mike Stall 在 Github 上的 DataTable 项目](https://github.com/MikeStall/DataTable)
3.  在 WPF 中显示绑定到步骤 2 中返回的数据的 DataGrid。对于步骤 3，这些先前的 SO 问题可能对您有价值：

[在 WPF DataGrid 中动态生成列？](https://stackoverflow.com/questions/3564827/generating-columns-dynamically-in-the-wpf-datagrid)

[WPF DataGrid 好教程？](https://stackoverflow.com/questions/5572921/wpf-datagrid-good-tutorials)

[使用 TemplateColumns 将 WPF DataGrid 绑定到 DataTable](https://stackoverflow.com/questions/2677446/binding-wpf-datagrid-to-datatable-using-templatecolumns)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-29T01:15:32.563

我没有任何方便的方法可以轻松地将 CSV 数据导入数据库 - 也许其他人会加入。添加对拖放的支持是一件相当简单的事情，只需在目标容器上将 AllowDrop 设置为 true 和然后按照以下方式实现其 Drop 事件处理程序

```
 private void FilesDropped(object sender, DragEventArgs e)
        {
            if (e.Data.GetDataPresent(DataFormats.FileDrop))
            {

                string[] droppedFilePaths = e.Data.GetData(DataFormats.FileDrop, true) as string[];
... 
```

# ios - 仅提交 3.5 英寸屏幕尺寸的 iPhone 应用程序

> ID：14574024
> 
> 赞同：0
> 
> 时间：2013-01-29T01:06:37.140
> 
> 标签：ios, xcode, app-store-connect

我已经从我的项目中删除了 4" 默认黑屏，我上传了我的二进制文件，它仍然说我的应用程序支持 4" 屏幕。我的所有视图都没有设置为 4" 屏幕。那么是否有隐藏部分或我缺少的东西？一切都很完美，除了它要我上传 4" 屏幕截图的屏幕截图。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T01:22:27.960

每个项目都必须支持 3.5 英寸和 4 英寸。

黑屏只是为应用程序启动时显示的启动画面设置的。

在这种情况下，您的应用在 4 英寸设备上没有启动画面。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T01:23:13.373

itunesconnect.com 没有“检测到”您的应用程序想要使用 4" 屏幕，并且没有设置仅提交 3.5" 屏幕。现在 iPhone 5 出来了，苹果只是想让大家提交一张 4 英寸屏幕的截图。这有点痛苦，但没有办法解决。

# java - Installing Oracle JDK 6u38 on Fedora 17 in user home directory

> ID：14574026
> 
> 赞同：0
> 
> 时间：2013-01-29T01:07:02.010
> 
> 标签：java, linux, installation

In the older version of Java 6, Oracle provides the `tar.gz` distribution for their JDK, which can be extracted and run in user home directory without installing to system folder. However, the latest versions of Java are no longer distributed as `tar.gz` format for downloading anymore. **Does anyone know how to install the bin distribution in user folder without root privilege?**

I have tried to extract the bin files but it's not usable since most of the jar files are encrypted (or packaged) in some weird format (.pack), e.g. `rt.pack` instead of `rt.jar`. I have also tried to use `--prefix` in the rpm command line but it requires root permission. They seems to make it impossible to install java in user home directory.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T01:10:30.467

[Here](http://www.oracle.com/technetwork/java/javase/install-linux-64-self-extracting-142068.html) it says:

> The Java Development Kit files are installed in a directory called jdk.6.0_ in the current directory.

And it looks quite simple, it just says to give execution permissions and execute a bin file.

# c++ - 当文件太大时使用 FindFirstFile() 函数获取不同的文件大小

> ID：14574033
> 
> 赞同：-1
> 
> 时间：2013-01-29T01:07:40.253
> 
> 标签：c++, winapi

我使用了某人在stackoverflow上发布的以下代码来检查大文件（12gb）的大小。但是，当我检查此功能时，它会显示不同的大小（267 mb）。有人可以解释一下是什么问题吗？对于 2gb ， 3 gb 的文件大小，代码正确显示大小。

```
#include "stdafx.h"
#include <windows.h>
#include <tchar.h>
#include <stdio.h>

int _tmain(int argc, _TCHAR* argv[])
{
   WIN32_FIND_DATA FindFileData;
   HANDLE hFind;
   LPCTSTR  lpFileName = L"C:\\Foo\\Bar.ext";

   hFind = FindFirstFile(lpFileName , &FindFileData);
   if (hFind == INVALID_HANDLE_VALUE) 
   {
      printf ("File not found (%d)\n", GetLastError());
      return -1;
   } 
   else 
   {
      ULONGLONG FileSize = FindFileData.nFileSizeHigh;
      FileSize <<= sizeof( FindFileData.nFileSizeHigh ) * 8; 
      FileSize |= FindFileData.nFileSizeLow;
      _tprintf (TEXT("file size is %u\n"), FileSize);
      FindClose(hFind);
   }
   return 0;

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-29T01:11:33.223

程序的以下行*不*打印 64 位数字：

```
_tprintf (TEXT("file size is %u\n"), FileSize); 
```

在 Windows 中，您需要使用格式说明符`%I64u`来格式化 64 位（无符号）整数。

# python - 拆分器正则表达式取决于它之前的字母

> ID：14574035
> 
> 赞同：2
> 
> 时间：2013-01-29T01:07:45.837
> 
> 标签：python, regex

```
I have a couple of pets, e.g., cat, rat, and fish. What about you? 
```

我想按句点分割上面的文本。如果我使用正则表达式`\.`来拆分它，我会得到`["I have a couple of pets, e","g",", cat, rat, and fish"," What about you?"]`，这不是我想要的。

如何添加限制，`\.`以便字母前面的句点`e`不会`g`被视为拆分器？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-29T01:09:39.243

使用否定的向后看：

```
(?<!e|g)\. 
```

* * *

我不确定以上内容是否适用于 Python。如果没有，试试这个：

```
(?<!e)(?<!g)\. 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-29T01:18:48.997

如果您尝试拆分句子，则应使用以下正则表达式：

```
\.(?=\s) 
```

这将检测后跟空白字符的句点。

也许您还想检测`...`或分号？

那么你应该试试这个：

```
(\.|\.{3}|;)(?=\s) 
```

您还可以考虑结束一行的句点：

```
(\.|\.{3}|;)(?=(\s|$)) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-29T01:10:54.143

尝试消极的回顾。

```
(?<!e|g)\. 
```

供你参考：

[正则表达式环顾四周](http://www.regular-expressions.info/lookaround.html)

# node.js - 在 mongo 集合内的对象中搜索

> ID：14574036
> 
> 赞同：0
> 
> 时间：2013-01-29T01:07:46.123
> 
> 标签：node.js, mongodb, mongoose

我正在用 mongoose 玩 MongoDB，并在尝试在集合中的对象内实现搜索时遇到了一个小障碍。

所以我有一个如下模式：

```
var schema = mongoose.Schema({ 
  form_id: Number,
  author: Number,
  data: String,
  files: String,
  date: { type: Date, default: Date.now },
}); 
```

这`data`只是键/值的 JSON 对象。

记录的示例条目：

```
{
 "form_id" : 5, 
 "author" : 1,
 "data" : "
   {\"staff\":\"Joe Blow\", \"date\":\"25th Jan 2013\"}", 
 "_id" : ObjectId("5101fd4ee6ca550000000003"),
 "date" : ISODate("2013-01-25T03:34:38.377Z"),
 "__v" : 0
} 
```

如何在数据对象中搜索特定值？我正在尝试执行以下操作，但没有任何运气:(

```
db.forms.find({form_id: 5, data: '/Joe/i'}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T01:22:53.250

如果您省略正则表达式周围的单引号，它应该可以工作：

```
db.forms.find({form_id: 5, data: /Joe/i}); 
```

但是您确定要`data`包含 JSON 字符串而不是对象吗？一个对象会给你更多的灵活性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T07:31:11.653

也许你想要这个？

```
db.forms.find({form_id: 5, "data.staff": /Joe/i}); 
```

如果表单的“数据”属性是一个对象。而且好多了。

# php - MySQL ROLLBACK 实际上并没有回滚

> ID：14574037
> 
> 赞同：3
> 
> 时间：2013-01-29T01:07:46.267
> 
> 标签：php, mysql, pdo

我有以下 PHP 代码：

```
$dbh->beginTransaction();
$dbh->exec("LOCK TABLES
    `reservations` WRITE, `settings` WRITE");
$dbh->exec("CREATE TEMPORARY TABLE
        temp_reservations
    SELECT * FROM reservations");
$dbh->exec("ALTER TABLE
        `temp_reservations`
    ADD INDEX ( conf_num ) ; ");

// [...Other stuff here with temp_reservations...]

$dbh->exec("DELETE QUICK FROM `reservations`");
$dbh->exec("OPTIMIZE TABLE `reservations`");
$dbh->exec("INSERT INTO `reservations` SELECT * FROM temp_reservations");

var_dump(GlobalContainer::$dbh->inTransaction()); // true
$dbh->exec("UNLOCK TABLES");
$dbh->rollBack(); 
```

事务对于定期更新/插入工作正常，但由于某种原因上面的代码不是。当上面发生错误时，我只剩下一个完全空的`reservations`表。[我在PDO::beginTransaction](http://php.net/manual/en/pdo.begintransaction.php)页面上读到“*某些数据库，包括 MySQL，在事务中发出数据库定义语言 (DDL) 语句（例如 DROP TABLE 或 CREATE TABLE）时会自动发出隐式 COMMIT* ”。[MySQL手册](http://dev.mysql.com/doc/refman/5.1/en/sql-syntax-data-definition.html)有一个“数据定义语句”列表，我认为它与上面提到的DDL相同，`CREATE TABLE`但我只是创建一个临时表。有没有办法解决？

另外，我留下一个空表的事实是否表明查询**后**`reservations`发生了提交？**`DELETE QUICK FROM reservations`**

 ****编辑**：另外说明，该`INSERT INTO reservations`行还会产生以下错误：

> 在其他无缓冲查询处于活动状态时无法执行查询。考虑使用 PDOStatement::fetchAll()。或者，如果您的代码只针对 mysql 运行，您可以通过设置 PDO::MYSQL_ATTR_USE_BUFFERED_QUERY 属性来启用查询缓冲。

我试过这样做`$dbh->setAttribute( PDO::MYSQL_ATTR_USE_BUFFERED_QUERY , true);`，但这似乎并不影响它。我假设它与交易有关，但我不确定。谁能查明究竟是什么导致了这个错误？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T01:57:51.447

您的`OPTIMIZE TABLE`陈述导致隐式提交。

我不确定您到底要做什么，但看起来您可以将代码缩短为：

```
$dbh->exec("OPTIMIZE TABLE `reservations`"); 
```

所有其他代码只是使工作变得更加复杂，没有任何好处。

我还假设您使用的是 InnoDB 表，因为 MyISAM 表无论如何都不支持事务。MyISAM 表上的每个 DDL 或 DML 操作都会立即隐式提交。

顺便说一句，缓冲查询与事务无关。它们与一次提取一行的 SELECT 结果集有关，而不是在 PHP 中将整个结果集提取到内存中，然后遍历它。见解释： http: [//php.net/manual/en/mysqlinfo.concepts.buffering.php](http://php.net/manual/en/mysqlinfo.concepts.buffering.php)**

# javascript - HTML DOM NODE 丢失事件

> ID：14574040
> 
> 赞同：3
> 
> 时间：2013-01-29T01:08:00.603
> 
> 标签：javascript, dom, javascript-events, jquery

当我将一些 dom 节点从一个上下文移动到另一个上下文时，所有一些子节点都失去了它们的事件侦听器。

HTML

```
<div><lots of deep nodes .../><div>
<div>
   <div>
     <div#newNode></div>
   </div>
</div> 
```

JS

```
nodes = $('div').find('nodes')
$('#newNode').html(nodes) 
```

移动之后……所有移动的节点都丢失了它们的事件。

有什么想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T01:10:44.117

您正在复制 html，它没有任何事件信息。

你想用[`.clone(true)`](http://api.jquery.com/clone/)

```
$('.whatToCopy').clone(true).appendTo('#NewLocation'); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-29T01:13:38.990

重构或复制 HTML 会生成全新的 DOM 元素，这些元素没有任何先前节点的事件侦听器（这些元素是从头开始创建的，就像页面中的原始 HTML 创建的元素没有事件侦听器一样）。因此，很自然，除非您运行新代码向它们添加事件监听器，否则它们上不会有任何 jQuery 事件监听器。

如果您想移动节点，您可以直接将 DOM 元素移动到 DOM 中的不同位置，而无需使用 HTML（因此无需制作新的 DOM 元素），因此所有事件侦听器都保持连接状态。例如移动它们：

```
nodes = $('div').find('nodes');
$('#newNode').append(nodes); 
```

* * *

如果要复制附加了事件侦听器的节​​点，则可以使用`.clone(true, true)`它将克隆带有数据和事件的节点并进行深度克隆（包括子节点）：

```
nodes = $('div').find('nodes');
$('#newNode').append(nodes.clone(true, true)); 
```

有关更多信息，请参阅[jQuery 参考。`.clone()`](http://api.jquery.com/clone/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-29T01:13:19.177

尝试使用 append 或 prepend on `$('#newNode')`。 `.html()`重新创建标签，这样你就失去了所有的事件和东西

# java - Java：使用 Pattern 和 Matcher 查找特定模式

> ID：14574043
> 
> 赞同：1
> 
> 时间：2013-01-29T01:08:14.153
> 
> 标签：java, regex

这是我拥有的字符串：

`KLAS 282356Z 32010KT 10SM FEW090 10/M13 A2997 RMK AO2 SLP145 T01001128 10100 20072 51007`

这是一份天气报告。我需要从报告中提取以下数字：`10/M13`. 它是温度和露点，`M`表示负值。因此，字符串中的位置可能会有所不同，并且温度可能会显示为`M10/M13`或`10/13`或`M10/13`。

我已经完成了以下代码：

```
public String getTemperature (String metarIn){

    Pattern regex = Pattern.compile(".*(\\d+)\\D+(\\d+)");
    Matcher matcher = regex.matcher(metarIn);

    if (matcher.matches() && matcher.groupCount() == 1) {
        temperature = matcher.group(1);
        System.out.println(temperature);
    }

    return temperature;
} 
```

显然，正则表达式是错误的，因为该方法总是返回 null。我尝试了数十种变化，但无济于事。如果有人可以提供帮助，非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T01:20:59.760

这将提取您寻找的字符串，它只有一行代码：

```
String tempAndDP = input.replaceAll(".*(?<![M\\d])(M?\\d+/M?\\d+).*", "$1"); 
```

下面是一些测试代码：

```
public static void main(String[] args) throws Exception {
    String input = "KLAS 282356Z 32010KT 10SM FEW090 M01/M13 A2997 RMK AO2 SLP145 T01001128 10100 20072 51007";
    String tempAndDP = input.replaceAll(".*(?<![M\\d])(M?\\d+/M?\\d+).*", "$1");
    System.out.println(tempAndDP);
} 
```

输出：

```
M01/M13 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T01:18:17.353

正则表达式应如下所示：

```
M?\d+/M?\d+ 
```

对于 Java，这将如下所示：

```
"M?\\d+/M?\\d+" 
```

您可能希望在前端和末端添加空白检查：

```
"\\sM?\\d+/M?\\d+\\s" 
```

但这取决于您认为要在哪里找到该模式，因为如果它位于字符串的末尾，它将不会被匹配，因此我们应该使用：

```
"(^|\\s)M?\\d+/M?\\d+($|\\s)" 
```

这指定如果在结尾或前面没有任何空格，我们必须匹配字符串的结尾或字符串的开头。

用于测试的示例代码：

```
Pattern p = Pattern.compile("(^|\\s)M?\\d+/M?\\d+($|\\s)");

String test = "gibberish  M130/13 here";
Matcher m = p.matcher(test);
if (m.find())
    System.out.println(m.group().trim()); 
```

这将返回：`M130/13`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-29T01:24:03.297

尝试：

```
 Pattern regex = Pattern.compile(".*\\sM?(\\d+)/M?(\\d+)\\s.*");
    Matcher matcher = regex.matcher(metarIn);

    if (matcher.matches() && matcher.groupCount() == 2) {
        temperature = matcher.group(1);
        System.out.println(temperature);
    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-29T01:24:06.207

*正则表达式的替代方案。*

有时，正则表达式并不是唯一的解决方案。似乎在您的情况下，您必须获得第 6 个文本块。每个块由一个空格字符分隔。所以，你需要做的是计算块。

**考虑到每个文本块没有固定长度**

例子：

```
String s = "KLAS 282356Z 32010KT 10SM FEW090 10/M13 A2997 RMK AO2 SLP145 T01001128 10100 20072 51007";
int spaces = 5;
int begin = 0;
while(spaces-- > 0){
    begin = s.indexOf(' ', begin)+1;
}
int end = s.indexOf(' ', begin+1);
String result = s.substring(begin, end);
System.out.println(result); 
```

**考虑到每个文本块确实有固定长度**

```
String s = "KLAS 282356Z 32010KT 10SM FEW090 10/M13 A2997 RMK AO2 SLP145 T01001128 10100 20072 51007";
String result = s.substring(33, s.indexOf(' ', 33));
System.out.println(result); 
```

**更漂亮的替代品**，正如 Adrian 所指出的：

```
String result = rawString.split(" ")[5]; 
```

*请注意，拆分实际接收正则表达式模式作为参数*

# java - 复杂形状的碰撞检测

> ID：14574045
> 
> 赞同：24
> 
> 时间：2013-01-29T01:08:15.077
> 
> 标签：java, image, awt, collision, java-2d

我想制作一个从图像加载每个级别的游戏。我想在 Photoshop 中绘制整个关卡，然后将其设置为背景并允许玩家走过它。我想要另一个不可见的图像越过顶部，在我想要碰撞的所有地方都是黑色的。

我不想使用矩形碰撞等更容易的瓷砖的原因是因为会有复杂的角落，并不是所有的东西都是矩形的。

这是一个好主意，是否可以轻松做到？这会占用大量 CPU，还是有更好的方法来做到这一点？

## 水平图像

![水平图像](../Images/3c0ceaf8deb709d269fd258abdb62ca3.png)

## 障碍物以红色显示

![红色障碍物](../Images/d0c17e02277c6ec2d82f742c3aed8e45.png)

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2013-01-29T03:10:49.477

> ..会有复杂的角落，并不是所有的东西都是矩形的。

这可以通过绘制和处理`Shape`实例`Area`来实现。例如

*   黄色是一个小动画“播放器”。
*   图像的边界表示包含玩家路径的墙壁（它会从它们反弹）。
*   障碍物在不发生碰撞时涂成绿色，否则涂成红色。

![形状碰撞](../Images/0dc44c2cefa19d1a596ea1c17e41616b.png)

```
import java.awt.*;
import java.awt.event.*;
import java.awt.geom.*;
import java.awt.image.BufferedImage;
import javax.swing.*;

class ShapeCollision {

    private BufferedImage img;
    private Area[] obstacles = new Area[4];
    private Area walls;

    int x; 
    int y;
    int xDelta = 3;
    int yDelta = 2;

    /** A method to determine if two instances of Area intersect */
    public boolean doAreasCollide(Area area1, Area area2) {
        boolean collide = false;

        Area collide1 = new Area(area1);
        collide1.subtract(area2);
        if (!collide1.equals(area1)) {
            collide = true;
        }

        Area collide2 = new Area(area2);
        collide2.subtract(area1);
        if (!collide2.equals(area2)) {
            collide = true;
        }

        return collide;
    }

    ShapeCollision() {
        int w = 400;
        int h = 200;
        img = new BufferedImage(w, h, BufferedImage.TYPE_INT_RGB);
        final JLabel imageLabel = new JLabel(new ImageIcon(img));
        x = w/2;
        y = h/2;

        //circle 
        obstacles[0] = new Area(new Ellipse2D.Double(40, 40, 30, 30));

        int[] xTriangle = {330,360,345};
        int[] yTriangle = {60,60,40};
        //triangle 
        obstacles[1] = new Area(new Polygon(xTriangle, yTriangle, 3));

        int[] xDiamond = {60,80,60,40};
        int[] yDiamond = {120,140,160,140};
        //diamond 
        obstacles[2] = new Area(new Polygon(xDiamond, yDiamond, 4));

        int[] xOther = {360,340,360,340};
        int[] yOther = {130,110,170,150};
        // other 
        obstacles[3] = new Area(new Polygon(xOther, yOther, 4));

        walls = new Area(new Rectangle(0,0,w,h));

        ActionListener animate = new ActionListener() {

            @Override
            public void actionPerformed(ActionEvent e) {
                animate();
                imageLabel.repaint();
            }
        };
        Timer timer = new Timer(50, animate);

        timer.start();
        JOptionPane.showMessageDialog(null, imageLabel);
        timer.stop();
    }

    public void animate() {
        Graphics2D g = img.createGraphics();
        g.setRenderingHint(
                RenderingHints.KEY_ANTIALIASING, 
                RenderingHints.VALUE_ANTIALIAS_ON);

        g.setColor(Color.BLUE);
        g.fillRect(0, 0, img.getWidth(), img.getHeight());
        x+=xDelta;
        y+=yDelta;
        int s = 15;
        Area player = new Area(new Ellipse2D.Double(x, y, s, s));

        // Acid test of edge collision;
        if (doAreasCollide(player,walls)) {
            if ( x+s>img.getWidth() || x<0 ) {
                xDelta *= -1;
            } 
            if(y+s>img.getHeight() || y<0 ) {
                yDelta *= -1;
            }
        }
        g.setColor(Color.ORANGE);
        for (Area obstacle : obstacles) {
            if (doAreasCollide(obstacle, player)) {
                g.setColor(Color.RED);
            } else {
                g.setColor(Color.GREEN);
            }
            g.fill(obstacle);
        }

        g.setColor(Color.YELLOW);
        g.fill(player);

        g.dispose();
    }

    public static void main(String[] args) {
        Runnable r = new Runnable() {

            @Override
            public void run() {
                new ShapeCollision();
            }
        };
        // Swing GUIs should be created and updated on the EDT
        // http://docs.oracle.com/javase/tutorial/uiswing/concurrency/initial.html
        SwingUtilities.invokeLater(r);
    }
} 
```

## 编辑

> 让它检测所有红色并将其设置为碰撞边界

在启动时，使用[平滑锯齿路径](https://stackoverflow.com/q/7218309/418556)问题中看到的源来获取红色像素的轮廓（参见`getOutline(Color target, BufferedImage bi)`方法）。将其存储`Area`为启动时的唯一障碍。

# linux-kernel - Linux内核中的bio结构

> ID：14574052
> 
> 赞同：11
> 
> 时间：2013-01-28T18:51:12.443
> 
> 标签：linux-kernel, block-device

我正在阅读 Robert Love 的 Linux Kernel Development。我不明白这一段关于`bio`结构的内容：

> 内核中块 I/O 的基本容器是 bio 结构，它定义在`<linux/bio.h>`. 此结构将正在运行（活动）的块 I/O 操作表示为段列表。段是在内存中连续的一块缓冲区。因此，各个缓冲区在内存中不需要是连续的。通过允许以块的形式描述缓冲区，bio 结构为内核提供了执行块 I/O 操作的能力，甚至可以从内存中的多个位置执行单个缓冲区的块 I/O 操作。像这样的向量 I/O 称为分散-聚集 I/O。

1.  究竟是什么`flight(active)`意思？
2.  “作为细分列表”——我们是在谈论[这种](http://en.wikipedia.org/wiki/Memory_segmentation)细分吗？
3.  “通过允许缓冲区......在内存中”是什么意思？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-01-29T07:00:06.343

块设备是在 I/O 事务期间处理数据块（512、1024 字节）的设备。“struct bio”可用于来自内核空间的块 I/O 操作。这种结构常用于块设备驱动开发。

*Q1) flight(active) 到底是什么意思？*

块设备通常使用用于存储文件的文件系统来实现。现在，当用户空间应用程序启动文件 I/O 操作（读、写）时，内核依次通过文件系统管理器启动一系列块 I/O 操作。“结构生物”跟踪要处理的所有块 I/O 事务（由用户应用程序启动）。这就是这里所说的**飞行/活动**区域。

*“Q2）作为细分列表”——我们是在谈论这种细分吗？*

内核需要内存缓冲区来保存进出块设备的数据。

在内核中有两种分配内存的可能性。

1.  虚拟地址连续 - 物理地址连续（使用 kmalloc() - 提供良好的性能但大小有限）
2.  虚拟地址连续 - 物理地址不连续（使用 vmalloc() - 对于巨大的内存大小要求）

这里的段表示第一种类型，即用于块 IO 传输的连续物理内存。段列表表示一组这样的连续物理内存区域。请注意，列表元素是不连续的内存段。

*Q3）“通过允许缓冲区......在内存中”是什么意思？*

Scatter-gather 功能允许在单次（读/写事务）中从多个非连续内存位置向/从设备传输数据。这里的“struct bio”记录了要处理的多个段。每个段是一个连续的内存区域，而多个段彼此不连续。“struct bio”为内核提供执行分散收集功能的能力。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-28T22:02:40.887

1.  “进行中”是指已请求但尚未启动的操作。
2.  这里的“段”是指要读取或写入的内存范围，作为操作的一部分要传输的连续数据。
3.  “Scatter/gather I/O”是指*分散*操作，它在磁盘上获取连续范围的数据并将其分配到内存中，*收集*在内存中获取不同范围的数据并将它们连续写入磁盘。（在前面用一些合适的设备替换“磁盘”。）一些 I/O 机器能够在一次操作中完成此操作（这越来越普遍）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-28T18:55:04.833

1）“飞行中”是指“进行中” 2）否 3）不太确定 :)

# css - 在彩盒标题中，可以控制宽度吗？

> ID：14574056
> 
> 赞同：0
> 
> 时间：2013-01-29T01:09:44.473
> 
> 标签：css, colors, colorbox

我需要在图像下方有一些文本，但它必须从左到右对齐并且全宽。为了做到这一点，我想我必须在标题上加上一个宽度？我尝试将 width:100% 放在 CSS 中，但它似乎忽略了它。有人有什么想法我可以尝试吗？

# r - 按组折叠并使用 R 在 data.frame 中计算 n

> ID：14574059
> 
> 赞同：2
> 
> 时间：2013-01-29T01:10:12.723
> 
> 标签：r

我有一个包含三个变量的数据框：治疗、剂量和结果（正负）。我对每种治疗和剂量都有多个观察结果。我正在尝试输出一个列联表，该表将折叠数据以指示每个结果的数量作为治疗和剂量的函数，以及观察的数量。例如：

```
treatment dose outcome    
control 0 0
control 0 0
control 0 0
control 0 1
treatmentA 1 0
treatmentA 1 1
treatmentA 1 1
treatmentA 2 1
treatmentA 2 1 
treatmentA 2 1 
```

所需的输出将是：

```
treatment dose outcome n
control 0 0 1 4
treatmentA 1 2 3
treatmentA 2 3 3 
```

我一整天都在玩这个，除了能够为每次观察获得每个结果的频率之外，没有太多运气。任何建议将不胜感激（包括指出 R 手册和/或示例的哪些部分）我忽略了。

谢谢！

R

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-29T01:38:34.433

这是一个使用了不起的包的解决方案`data.table`：

```
library(data.table)
x <- data.table(read.table( text = "treatment dose outcome    
control 0 0
control 0 0
control 0 0
control 0 1
treatmentA 1 0
treatmentA 1 1
treatmentA 1 1
treatmentA 2 1
treatmentA 2 1 
treatmentA 2 1", header = TRUE)
x[, list(outcome = sum(outcome), count = .N), by = 'treatment,dose'] 
```

生产

```
 treatment dose outcome count
1:    control    0       1     4
2: treatmentA    1       2     3
3: treatmentA    2       3     3 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-29T01:36:37.680

如果您不想按照其他答案中的建议使用额外的库，可以尝试以下操作。

```
> df
    treatment dose outcome
1     control    0       0
2     control    0       0
3     control    0       0
4     control    0       1
5  treatmentA    1       0
6  treatmentA    1       1
7  treatmentA    1       1
8  treatmentA    2       1
9  treatmentA    2       1
10 treatmentA    2       1

> dput(df)
structure(list(treatment = structure(c(1L, 1L, 1L, 1L, 2L, 2L, 
2L, 2L, 2L, 2L), .Label = c("control", "treatmentA"), class = "factor"), 
    dose = c(0L, 0L, 0L, 0L, 1L, 1L, 1L, 2L, 2L, 2L), outcome = c(0L, 
    0L, 0L, 1L, 0L, 1L, 1L, 1L, 1L, 1L)), .Names = c("treatment", 
"dose", "outcome"), class = "data.frame", row.names = c(NA, -10L
)) 
```

现在我们使用`aggregate`函数来获取`outcome`列的计数和总和

```
> nObs <- aggregate(outcome ~ treatment + dose, data = df, length)
> sObs <- aggregate(outcome ~ treatment + dose, data = df, sum) 
```

适当更改聚合列的名称

> 名称（nObs）<-c（'治疗'，'剂量'，'计数'）

```
> names(sObs) <- c('treatment', 'dose', 'sum')

> nObs
   treatment dose count
1    control    0     4
2 treatmentA    1     3
3 treatmentA    2     3

> sObs
   treatment dose sum
1    control    0   1
2 treatmentA    1   2
3 treatmentA    2   3 
```

在这种情况下，用于`merge`将以上两个同名的所有列组合起来`treatment`。`dose`

```
> result <- merge(nObs, sObs)
> result
   treatment dose count sum
1    control    0     4   1
2 treatmentA    1     3   2
3 treatmentA    2     3   3 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-29T01:36:28.800

如果我理解正确，这对`data.table`图书馆来说很简单。首先，加载库并读取数据：

```
library(data.table)

data <- read.table(header=TRUE, text="
treatment dose outcome    
control 0 0
control 0 0
control 0 0
control 0 1
treatmentA 1 0
treatmentA 1 1
treatmentA 1 1
treatmentA 2 1
treatmentA 2 1 
treatmentA 2 1") 
```

接下来，`data.table`使用`treatment`和`dose`列作为表键（索引）创建一个。

```
data <- data.table(data, key="treatment,dose") 
```

`data.table`然后使用语法聚合。

```
data[, list(outcome=sum(outcome), n=length(outcome)), by=list(treatment,dose)]

    treatment dose outcome n
1:    control    0       1 4
2: treatmentA    1       2 3
3: treatmentA    2       3 3 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-01-29T04:35:22.727

这是另外几个选项（即使认为该`data.table`方法在语法简洁方面明显胜出）。

第一次使用`ave`. 可以将函数应用于由一个或多个变量分组的变量（提到的第一个变量）。在删除现在不必要的“结果”列后，我们将输出包装起来。`within``ave``unique`

```
unique(within(df, {
  SUM <- ave(outcome, treatment, dose, FUN = sum)
  COUNT <- ave(outcome, treatment, dose, FUN = length)
  rm(outcome)
}))
#    treatment dose COUNT SUM
# 1    control    0     4   1
# 5 treatmentA    1     3   2
# 8 treatmentA    2     3   3 
```

基础 R 中的第二个解决方案与@geektrader 的答案非常相似，除了它在一次调用聚合中`sum`计算两者。`length`但是有一个“缺点”：结果`cbind`是您的“列”`data.frame`实际上是一个矩阵。查看结果`str`以了解我的意思。

```
temp <- aggregate(outcome ~ treatment + dose, df, 
                  function(x) cbind(sum(x), length(x)))
str(temp)
# 'data.frame':  3 obs. of  3 variables:
#  $ treatment: Factor w/ 2 levels "control","treatmentA": 1 2 2
#  $ dose     : int  0 1 2
#  $ outcome  : int [1:3, 1:2] 1 2 3 4 3 3

colnames(temp$outcome) <- c("SUM", "COUNT")
temp
#    treatment dose outcome.SUM outcome.COUNT
# 1    control    0           1             4
# 2 treatmentA    1           2             3
# 3 treatmentA    2           3             3 
```

我提到存储结构是一个“缺点”，主要是因为当您尝试以您可能习惯的方式访问数据时，您可能无法获得预期的结果。

```
temp$outcome.SUM
# NULL

temp$outcome
#      SUM COUNT
# [1,]   1     4
# [2,]   2     3
# [3,]   3     3 
```

相反，您必须通过以下方式访问它：

```
temp$outcome[, "SUM"] ## or temp$outcome[, 1]
# [1] 1 2 3 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-01-29T01:19:16.307

恕我直言，sql被低估了。:)

```
# read in your example data as `x`
x <- read.table( text = "treatment dose outcome    
control 0 0
control 0 0
control 0 0
control 0 1
treatmentA 1 0
treatmentA 1 1
treatmentA 1 1
treatmentA 2 1
treatmentA 2 1 
treatmentA 2 1",h=T)

# load the sql data frame library
library(sqldf)

# create a new table of all unique `treatment` and `dose` columns,
# summing the `outcome` column and 
# counting the number of records in each combo
y <- sqldf( 'SELECT treatment, dose , 
                    sum( outcome ) as outcome , 
                    count(*) as n 
             FROM   x 
             GROUP BY treatment, dose' )

# check the results
y 
```

# c++ - HLSL：打包错误？

> ID：14574061
> 
> 赞同：1
> 
> 时间：2013-01-29T01:10:21.090
> 
> 标签：c++, graphics, hlsl

我正在传递一个具有以下布局的常量缓冲区：

```
struct 
{
    float spread;
    D2D1_POINT_2F dimension;
    D2D1_POINT_2F dimension2;
} m_constants; 
```

为了调试，维度和维度2具有相同的值。

在着色器中我有：

```
cbuffer constants
{
    float spread;
    float2 dimension;
    float2 dimension2;
};

float4 main(
    float4 pos      : SV_POSITION,
    float4 posScene : SCENE_POSITION,
    float4 uv0      : TEXCOORD0
    ) : SV_Target
{
    float width = dimension.x;
    float height = dimension.y;
    float2 uv2 = float2(posScene.x / width, posScene.y / height);
    color.rgb = float3(uv2.xy,  0);
    return color;
} 
```

理论上，这应该输出一个渐变，左下角是绿色，右上角是红色。它确实如此。但是，如果在着色器中我有宽度和高度来使用维度 2。我得到一个从左边的绿色到右边的黄色的水平渐变。

这是为什么？当我将 m_constants 传递给着色器时，两个维度都具有相同的值

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T20:56:57.523

默认情况下，常量缓冲区数据按 16 个字节对齐，因此这意味着：

```
cbuffer constants
{
    float spread;
    float2 dimension;
    float2 dimension2;
}; 
```

将会

```
cbuffer constants
{
    float spread; // 4 bytes
    float2 dimension; // 4 + 8 = 12 bytes
    float dummy; //12+8 = 20, which means we cross 16 for dimension 2, hence a dummy 4 bytes element is added
    float2 dimension2;
}; 
```

这是一个描述这一点的[链接](http://blog.signalsondisplay.com/?p=244)。

因此，安排结构的更好方法是：

```
struct 
{
    D2D1_POINT_2F dimension;
    D2D1_POINT_2F dimension2;
    float spread;
} m_constants; 
```

并相应地修改 hlsl 对应项：

```
cbuffer constants
{
    float2 dimension;
    float2 dimension2;
    float spread; // No more 16 bytes crossing problem
}; 
```

另一种方式，在不修改初始布局的情况下，在 c++ 端，要么声明你的结构，如：

```
#pragma pack(push)
#pragma pack(16) 
struct 
{
    float spread;
    D2D1_POINT_2F dimension;
    D2D1_POINT_2F dimension2;     
} m_constants;
#pragma pack(pop) 
```

这将强制结构以 16 个字节对齐。

您也可以使用 /Zp16 编译器标志，但这将应用于程序中的每个结构（这并不总是可取的）。在 Visual Studio 中，转到项目属性 -> c/c++ -> 代码生成，然后您可以选择“结构成员对齐”，您可以从中进行设置。

您也可以在 hlsl 端使用 packoffset，但这意味着 c++ 布局需要与打包的 hlsl 匹配（这意味着您在 hlsl 常量缓冲区中保持相同的顺序，但仍需要修改 c++ 版本）。

# android - ListActivity 的 IllegalStateException

> ID：14574065
> 
> 赞同：1
> 
> 时间：2013-01-29T01:10:29.607
> 
> 标签：android, sqlite, listactivity, listadapter, illegalstateexception

我正在编写一个 ListActivity，并且不断收到有关尝试重新打开已关闭对象的 IllegalStateException。（错误指向我的 setListAdapter() 方法。）有什么想法吗？我已经尝试使用 startManagingCursor() 以及在 onPause() 中调用 cursor.close()，但没有任何东西可以摆脱错误。

**NewsActivity.class**

```
package com.lakesidebaptist.lakesidelife.ui.Content;

import android.content.Intent;
import android.database.Cursor;
import android.os.Bundle;
import android.support.v4.widget.SimpleCursorAdapter;
import android.support.v4.widget.SimpleCursorAdapter.ViewBinder;
import android.view.View;
import android.widget.ListView;

import com.actionbarsherlock.app.ActionBar;
import com.actionbarsherlock.app.SherlockListActivity;
import com.actionbarsherlock.view.MenuItem;
import com.lakesidebaptist.lakesidelife.MainActivity;
import com.lakesidebaptist.lakesidelife.R;
import com.lakesidebaptist.lakesidelife.update.database.dbAdapter;

/**
 * The activity that shows all the news items.
 * 
 * @author andrew
 */
public class NewsActivity extends SherlockListActivity {

    private Cursor cursor = null;
    private SimpleCursorAdapter adapter = null;
    dbAdapter dba = null;

    // Arrays
    private static String[] FROM = {"title", "body"};
    private static int[] TO = {R.id.news_title, R.id.news_body};

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        ActionBar actionBar = getSupportActionBar();

        // Makes home button visible
        actionBar.setHomeButtonEnabled(true);

        // Allows home button to be used to navigate up
        actionBar.setDisplayHomeAsUpEnabled(true);
    }

    /*
     * This method is called when the user clicks the home button to go back. It
     * stops this activity and returns the user to the home screen.
     */
    @Override
    public boolean onOptionsItemSelected(MenuItem item) {
        Intent intent = new Intent(this, MainActivity.class);
        intent.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
        startActivity(intent);
        onStop();
        return true;
    }

    @Override
    protected void onPause() {
        super.onPause();
        //dba.close();
    }

    @Override
    protected void onResume() {
        super.onResume();

        //Setting up the database adapter
        dba = new dbAdapter(this);
        dba.open();

        // Getting the Cursor of the requested data
        cursor = dba.read("news", null, null);
        //startManagingCursor(cursor);
        adapter = new SimpleCursorAdapter(this, R.layout.news_list, cursor, FROM, TO, 0);
        setListAdapter(adapter);
        setTitle(R.string.news);
    }
} 
```

**日志猫**

```
01-27 21:41:42.330: E/AndroidRuntime(986): FATAL EXCEPTION: main
01-27 21:41:42.330: E/AndroidRuntime(986): java.lang.RuntimeException: Unable to resume activity {com.lakesidebaptist.lakesidelife/com.lakesidebaptist.lakesidelife.ui.Content.NewsActivity}: java.lang.IllegalStateException: attempt to re-open an already-closed object: android.database.sqlite.SQLiteQuery (mSql = SELECT * FROM 'news';) 
01-27 21:41:42.330: E/AndroidRuntime(986):  at android.app.ActivityThread.performResumeActivity(ActivityThread.java:3128)
01-27 21:41:42.330: E/AndroidRuntime(986):  at android.app.ActivityThread.handleResumeActivity(ActivityThread.java:3143)
01-27 21:41:42.330: E/AndroidRuntime(986):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2684)
01-27 21:41:42.330: E/AndroidRuntime(986):  at android.app.ActivityThread.access$2300(ActivityThread.java:125)
01-27 21:41:42.330: E/AndroidRuntime(986):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2033)
01-27 21:41:42.330: E/AndroidRuntime(986):  at android.os.Handler.dispatchMessage(Handler.java:99)
01-27 21:41:42.330: E/AndroidRuntime(986):  at android.os.Looper.loop(Looper.java:123)
01-27 21:41:42.330: E/AndroidRuntime(986):  at android.app.ActivityThread.main(ActivityThread.java:4627)
01-27 21:41:42.330: E/AndroidRuntime(986):  at java.lang.reflect.Method.invokeNative(Native Method)
01-27 21:41:42.330: E/AndroidRuntime(986):  at java.lang.reflect.Method.invoke(Method.java:521)
01-27 21:41:42.330: E/AndroidRuntime(986):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
01-27 21:41:42.330: E/AndroidRuntime(986):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
01-27 21:41:42.330: E/AndroidRuntime(986):  at dalvik.system.NativeStart.main(Native Method)
01-27 21:41:42.330: E/AndroidRuntime(986): Caused by: java.lang.IllegalStateException: attempt to re-open an already-closed object: android.database.sqlite.SQLiteQuery (mSql = SELECT * FROM 'news';) 
01-27 21:41:42.330: E/AndroidRuntime(986):  at android.database.sqlite.SQLiteClosable.acquireReference(SQLiteClosable.java:34)
01-27 21:41:42.330: E/AndroidRuntime(986):  at android.database.sqlite.SQLiteQuery.fillWindow(SQLiteQuery.java:64)
01-27 21:41:42.330: E/AndroidRuntime(986):  at android.database.sqlite.SQLiteCursor.fillWindow(SQLiteCursor.java:283)
01-27 21:41:42.330: E/AndroidRuntime(986):  at android.database.sqlite.SQLiteCursor.getCount(SQLiteCursor.java:264)
01-27 21:41:42.330: E/AndroidRuntime(986):  at android.support.v4.widget.CursorAdapter.getCount(CursorAdapter.java:202)
01-27 21:41:42.330: E/AndroidRuntime(986):  at android.widget.ListView.setAdapter(ListView.java:436)
01-27 21:41:42.330: E/AndroidRuntime(986):  at android.app.ListActivity.setListAdapter(ListActivity.java:267)
01-27 21:41:42.330: E/AndroidRuntime(986):  at com.lakesidebaptist.lakesidelife.ui.Content.NewsActivity.onResume(NewsActivity.java:77)
01-27 21:41:42.330: E/AndroidRuntime(986):  at android.app.Instrumentation.callActivityOnResume(Instrumentation.java:1149)
01-27 21:41:42.330: E/AndroidRuntime(986):  at android.app.Activity.performResume(Activity.java:3823)
01-27 21:41:42.330: E/AndroidRuntime(986):  at android.app.ActivityThread.performResumeActivity(ActivityThread.java:3118)
01-27 21:41:42.330: E/AndroidRuntime(986):  ... 12 more 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T01:27:24.223

```
attempt to re-open an already-closed object: android.database.sqlite.SQLiteQuery (mSql = SELECT * FROM 'news';) 
```

似乎您在这里返回了一个已经关闭的游标：

```
cursor = dba.read("news", null, null); 
```

检查您是否没有在 dbAdapter read() 方法中关闭游标。
如果您发布 dbAdapter 类，它会很有帮助。

# ruby-on-rails - Rails 2.3.16 升级中断 ActiveSupport::JSON.decode

> ID：14574071
> 
> 赞同：1
> 
> 时间：2013-01-29T01:11:14.600
> 
> 标签：ruby-on-rails, security, yaml, json

当我尝试将 Rails 从 2.3.15 升级到 2.3.16 时，`ActiveSupport::JSON.decode(response.body)`无法处理`NaN`. 我收到如下错误：`invalid character at "NaN,...`

有谁知道如何修理它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T04:05:37.493

`ActiveSupport::JSON.decode`在幕后使用`MultiJson`往往会忽略任何传入的选项（至少在 Rails 3 中，不确定 2.3）。这意味着您不能传入通常接受的`allow_nan`.

但是，如果您使用的是 Ruby 1.9+，则可以使用内置的[JSON](http://www.ruby-doc.org/stdlib-1.9.3/libdoc/json/rdoc/JSON.html#parse-method)解析器：

```
require 'json'
json_result = JSON.parse(response.body, allow_nan: true) 
```

# java - 解组有问题的文件。第2部分

> ID：14574074
> 
> 赞同：0
> 
> 时间：2013-01-29T01:11:42.243
> 
> 标签：java, unmarshalling

我已经完成了@Perception 所说的关于架构 URI 的内容，但现在我有另一个例外。有谁知道是什么问题？非常感谢。

我有来自方法 Git60Manager.doImportMod1GtFile 的这段代码，它使用 xsd 模板解组文件：

```
String schema = "///META-INF/templates/git60_data_mod1_def.xsd";
isr = new InputStreamReader(GIT60FileMod1.class.getResourceAsStream(schema));
Unmarshaller unmarshaller = new Unmarshaller(isr, main); 
```

这是 xsd 文件：

```
<xs:annotation>
<xs:documentation xml:lang="en">
  GIT60 schema Mod 1 (Data)
</xs:documentation>
</xs:annotation>

<xs:include id="git60_mod1_def.xsd" schemaLocation="./git60_mod1_def.xsd" />

<xs:element name="mainData" type="GIT60FileMod1Data" jrb:length="100" />

<xs:complexType name="GIT60FileMod1Data">
    <xs:sequence>
        <xs:element name="git60Tax" type="GIT60FileTaxMod1" minOccurs="1" maxOccurs="unbounded"/>
    </xs:sequence>
</xs:complexType> 
```

这是我运行应用程序时的异常，在我得到 java.net.MalformedURLException 之前：

```
 java.lang.NullPointerException
at java.io.Reader.<init>(Reader.java:61)
at java.io.InputStreamReader.<init>(InputStreamReader.java:55)
at com.samelan.gitim.core.service.io.account.impl.GIT60Manager.doImportMod1GtFile(GIT60Manager.java:1256)
at com.samelan.gitim.core.service.managers.GtFileProcessorManagerTest.testProcFilesNewTemplateGit60(GtFileProcessorManagerTest.java:717)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
at java.lang.reflect.Method.invoke(Method.java:592)
at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:44)
at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:15)
at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:41)
at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:20)
at org.springframework.test.context.junit4.statements.RunBeforeTestMethodCallbacks.evaluate(RunBeforeTestMethodCallbacks.java:74)
at org.springframework.test.context.junit4.statements.RunAfterTestMethodCallbacks.evaluate(RunAfterTestMethodCallbacks.java:83)
at org.springframework.test.context.junit4.statements.SpringRepeat.evaluate(SpringRepeat.java:72)
at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:231)
at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:50)
at org.junit.runners.ParentRunner$3.run(ParentRunner.java:193)
at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:52)
at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:191)
at org.junit.runners.ParentRunner.access$000(ParentRunner.java:42)
at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:184)
at org.springframework.test.context.junit4.statements.RunBeforeTestClassCallbacks.evaluate(RunBeforeTestClassCallbacks.java:61)
at org.springframework.test.context.junit4.statements.RunAfterTestClassCallbacks.evaluate(RunAfterTestClassCallbacks.java:71)
at org.junit.runners.ParentRunner.run(ParentRunner.java:236)
at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.run(SpringJUnit4ClassRunner.java:174)
at org.eclipse.jdt.internal.junit4.runner.JUnit4TestReference.run(JUnit4TestReference.java:49)
at org.eclipse.jdt.internal.junit.runner.TestExecution.run(TestExecution.java:38)
at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:467)
at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:683)
at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:390)
at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:197) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T01:44:34.543

`GIT60FileMod1.class.getResourceAsStream(schema)`正在返回 null。发生这种情况是因为它找不到该资源。值得浏览一下此方法的[文档](http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/ClassLoader.html#getResource%28java.lang.String%29)。

如果类单独运行或打包到 JAR 文件中，则会发生不同的事情。具体来说，它开始的根以及事物的打包方式将会改变。

# java - Magic Square 程序帮助 (Java)

> ID：14574079
> 
> 赞同：0
> 
> 时间：2013-01-29T01:12:17.433
> 
> 标签：java, for-loop, multidimensional-array, magic-square

这是我处理 2D 数组的 AP 计算机科学课的作业。基本上，程序所做的是将值输入到魔方（所有行、列和对角线加起来是相同的数字）并确定它是否是魔方。我的算法在检查它是否为 Magic 时会不断输出错误（根据 isMagic() 方法）。我相信我的 row() 和 column() 方法有问题，如果有人可以为我提供一个很棒的解决方案。

```
public class Square
{
  private int [][] sq;
  private int position = 0;

  public Square(int size)
  {
    sq = new int[size][size];
  }

  /**
   * adds value to the matrix at the given position, row,col
   */

  public void add(int value, int row, int col)
  {
    sq[row][col] = value;
    // fill in code here.

  }

  public boolean fullSquare()
  {
    int numcheck = 1;
    boolean found = false;
    while (numcheck < sq.length*sq.length)
    {
      for(int i = 0; i < sq.length; i++)
        for(int j = 0; j < sq.length; j++)
      {
        if(sq[i][j] == numcheck)
        {
          found = true;
        }
      }
      numcheck++;

      //use nested for loops to loop through array sq.
      //if the value in sq == numcheck, set found to true

      //After the loop, check to see if numcheck was found 
      //if not found, return false, otherwise set found to false
      //and increment numcheck to be ready to check the next number
    }
    if(found == false)
      return false;
    else
      return true;
  }

  public boolean isMagic()
  {
    int targetNum = 0;
    boolean stuff = false;

    for (int c = 0; c < sq[0].length; c++)
    {
      targetNum += sq[0][c];
    }
    if(column(targetNum) == true && row(targetNum) == true && diagonalLeft(targetNum) == true && diagonalRight(targetNum) == true && fullSquare() == true)
    {
      return true;
    }
    else
      return false;
    //if the rows, columns, diagonals and fullSquare are all
    //true, return true, otherwise, return false.

  }

  public boolean diagonalLeft(int tN)
  {
    int sum = 0;
    //write loop to see if the diagonal from 
    //lower left to upper right is the same as tN
     for(int d = 0; d < sq[0].length; d++)
    {
      sum = sum + sq[d][(sq.length-1) - d];
    }
    return (sum == tN);
  }

  public boolean diagonalRight (int tN)
  {
    int sum = 0;
   //write loop to see if the diagonal from upper left
    //to lower right is the same as tN
    for (int d = 0; d < sq[0].length; d++)
    {
        sum = sum + sq[d][d];
    }

   return (sum == tN);
  }

  public boolean column (int tN)
  {
    boolean same = true;
    int sum = 0;

    //write nested loops to check each column's sum
    //if the sum is not the same as tN, set same to false.
    for(int i = 0; i < sq[0].length; i++)
    {
      for(int j = 0; j < sq[0].length; j++)
      {
        sum = sum + sq[j][i];
      }
    }
    if(sum == tN)
      same = true;
    else
      same = false;

    return same;
  }

  public boolean row(int tN)
  {
   boolean same = true;
    int sum = 0;

    //write nested loops to check each column's sum
    //if the sum is not the same as tN, set same to false.
    for(int i = 0; i < sq[0].length; i++)
    {
      for(int j = 0; j < sq[0].length; j++)
      {
        sum = sum + sq[i][j];
      }
    }
    if(sum == tN)
      same = true;
    else
      same = false;

    return same;
  }

  public String toString()
  {
    String s = "";
    for (int r = 0; r < sq.length; r++)
    {
      for (int c = 0; c < sq[r].length; c++)
      {
        s += sq[r][c] + " ";
      }
      s+= "\n";
    }
    return s;
  }
  } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T01:21:38.007

```
for(int i = 0; i < sq[0].length; i++)
    {
      for(int j = 0; j < sq[0].length; j++)
      {
        sum = sum + sq[j][i];
      }
    } 
```

您没有重置外循环运行之间的总和。检查总和并将其重置，然后再转到下一列。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-29T01:26:49.567

您遇到的主要问题是您正在检查 for 循环之外的总和是否相同。我会这样重写它：

```
public boolean rowAndColumn(int tN)
{
  int rowsum = 0, colsum = 0;
  for(int i = 0; i < sq[0].length; i++)
  {
    for(int j = 0; j < sq[0].length; j++)
    {
      rowsum = rowsum + sq[i][j];
      colsum = colsum + sq[j][i];
    }
    if(rowsum != tN || colsum != tN)
      return false; //no point checking the rest if the sums doesn't match
    rowsum = 0; //reset row count
    colsum = 0; //reset col count
  }
  return true; //if it doesn't return by here, all the sums match
} 
```

编辑：fullSquare 也不会按预期工作。尝试这样的事情：

```
public boolean fullSquare()
{
  int numcheck = 1;
  boolean found = false;
  while (numcheck < sq.length*sq.length)
  {
    for(int i = 0; i < sq.length;
      for(int j = 0; j < sq.length; j++)
        if(sq[i][j] == numcheck)
          found = true;

    if (!found)
      return false; //if the number wasn't found, it's not a full square
    found = false;
    numcheck++;
  }
    //use nested for loops to loop through array sq.
    //if the value in sq == numcheck, set found to true

    //After the loop, check to see if numcheck was found 
    //if not found, return false, otherwise set found to false
    //and increment numcheck to be ready to check the next number
  return true;
} 
```

# javascript - Post deobfuscated Javascript code

> ID：14574082
> 
> 赞同：1
> 
> 时间：2013-01-29T01:12:42.130
> 
> 标签：javascript, obfuscation, deobfuscation

I used this tool [http://code.google.com/p/cremebrulee/](http://code.google.com/p/cremebrulee/) to make obfuscated code more readable and the output is looking quite nonsensical

`function ____(_O0){eval(unescape(_O0))} var l2=window.opera?1:0;function l3(l4){l5=/zc/g;l6=String.fromCharCode(0);l4=l4.replace(l5,l6);var l7=new Array(),l8=_1=l4.length,l9,lI,il=16256,_1=0,I=0,li='';do{l9=l4.charCodeAt(_1);lI=l4.charCodeAt(++_1);l7[I++]=lI+il-(l9<<7)}while(_1++<l8);var l1=new Array(),l0=new Array(),Il=128;do{l0[Il]=String.fromCharCode(Il)}while(--Il);Il=128;l1[0]=li=l0[l7[0]];ll=l7[0];_l=1;var l_=l7.length-1;while(_l<l_){switch(l7[_l]<Il?1:0){case 0 :l0[Il]=l0[ll]+String(l0[ll]).substr(0,1);l1[_l]=l0[Il];if(l2){li+=l0[Il]};break;default:l1[_l]=l0[l7[_l]];if(l2){li+=l0[l7[_l]]};l0[Il]=l0[ll]+String(l0[l7[_l]]).substr(0,1);break};Il++;ll=l7[_l];_l++};if(!l2){return(l1.join(''))}else{return li}};var lO='';for(ii=0;ii<OO0O.length;ii++){lO+=l3(OO0O[ii])};if(naa){document.write('<scr'+'ipt>'+lO+'</sc'+'ript>')};`

What might be the next step to do with this code?

update: this is the original code [http://pastebin.com/qG4DX7qy](http://pastebin.com/qG4DX7qy)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T01:15:43.603

This is how it looks like after processing by the [jsbeautifier](http://jsbeautifier.org/):

```
function ____(_O0) {
    eval(unescape(_O0))
}
var l2 = window.opera ? 1 : 0;

function l3(l4) {
    l5 = /zc/g;
    l6 = String.fromCharCode(0);
    l4 = l4.replace(l5, l6);
    var l7 = new Array(),
        l8 = _1 = l4.length,
        l9, lI, il = 16256,
        _1 = 0,
        I = 0,
        li = '';
    do {
        l9 = l4.charCodeAt(_1);
        lI = l4.charCodeAt(++_1);
        l7[I++] = lI + il - (l9 << 7)
    } while (_1++ < l8);
    var l1 = new Array(),
        l0 = new Array(),
        Il = 128;
    do {
        l0[Il] = String.fromCharCode(Il)
    } while (--Il);
    Il = 128;
    l1[0] = li = l0[l7[0]];
    ll = l7[0];
    _l = 1;
    var l_ = l7.length - 1;
    while (_l < l_) {
        switch (l7[_l] < Il ? 1 : 0) {
            case 0:
                l0[Il] = l0[ll] + String(l0[ll]).substr(0, 1);
                l1[_l] = l0[Il];
                if (l2) {
                    li += l0[Il]
                };
                break;
            default:
                l1[_l] = l0[l7[_l]];
                if (l2) {
                    li += l0[l7[_l]]
                };
                l0[Il] = l0[ll] + String(l0[l7[_l]]).substr(0, 1);
                break
        };
        Il++;
        ll = l7[_l];
        _l++
    };
    if (!l2) {
        return (l1.join(''))
    } else {
        return li
    }
};
var lO = '';
for (ii = 0; ii < OO0O.length; ii++) {
    lO += l3(OO0O[ii])
};
if (naa) {
    document.write('<scr' + 'ipt>' + lO + '</sc' + 'ript>')
}; 
```

The next step would be to go through every variable and function and give them better names (left as an exercise for the reader).

Of course this code is not complete - eg. some functions never get called, some arrays are never populated etc.

What this code does is put every element of the `OO0O` array through the `l3()` function (that decrypt the text that was encrypted using some naive home-brew encryption algorithm), joins them together and evaluates it all by putting `<script>`*result*`</script>` into the DOM using `document.write`. Since the `OO0O` array is not defined in the code you quoted we can't know anything what it does, because the actual (encrypted) code is in the `OO0O` array.

Actually you don't really need to know how the encryption algorithm works at all since all you need to do is step through this code with a debugger and examine the `l0` variable just before the call to `document.write` - and there you will have all of the actual code in a plain unencrypted form just before it is evaluated.

You can even put:

```
document.write = console.log; 
```

just before that script is called and see all of the code printed to your console instead of being evaluated. I did it with the code that you posted in the pastebin in the update to your question and there is so many "undefined" strings in it that I think it's broken or incomplete or something went wrong with the charset encoding.

Where did you get it from, anyway?

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T01:16:02.907

You can prettify your code:

[http://jsbeautifier.org/](http://jsbeautifier.org/)

But then you're on your own really. Any sense of legibility, variable/function names, etc. are lost forever. The only way around this is to get the original source.

# java - 将 java 项目从 netbeans 导出到可执行 jar

> ID：14574090
> 
> 赞同：1
> 
> 时间：2013-01-29T01:13:55.577
> 
> 标签：java, batch-file, export, executable-jar

过去在 java 编码中使用过 eclipse 并没有很多问题，但决定给 netbeans 一个爆炸

我正在尝试创建一个所有依赖项作为一个 jar 的 jar 文件，是的，我熟悉 java-web-start-option，而且一旦构建，该 jar 实际上就存在于我的 dist 文件夹中。

问题 1

一切都很好，我可以启动 jar，但似乎没有它的 lib 文件夹，其中包含：AbsoluteLayout.jar + beanbindings.jars。在我进行的过程中，我需要弄清楚一些事情。

我调用了一些批处理脚本来为我在 java 程序中完成不同的工作，例如找到内存量并在 JTextArea 中显示。当我在 netbeans ide 中使用该程序时，一切正常。

问题 2

当我启动 dist 文件夹中的 jar 文件时，它启动得很好，但根本找不到批处理/bash 脚本。下面是我在程序中使用的路径，正如我提到的，它在 IDE 中运行良好，只是想知道为什么它在 jar 中找不到相同的路径。

我假设当我像在 ecipe 中一样创建和构建时，它会使所有这些命令在我的 dist 文件夹（eclipse ofc 中的 bin）中的现有 jar 中工作？

```
 String[] filepath = {"cmd.exe", "/C", "..\\Enterprise\\src\\enterprise\\batch\\memory.bat"} 
```

任何建议，提前谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T01:21:33.687

试着改变你的路径。如果它在您的 ide 中，只需制作一个标志，然后选择此路径，如果没有，则使用另一条路径。尝试此链接以获取 java 中的应用程序路径。

[获取应用的路径](https://stackoverflow.com/questions/218061/get-the-applications-path)

# css - 如何强制 div 坐在其他两个 div 之下而不是两者之间？

> ID：14574103
> 
> 赞同：0
> 
> 时间：2013-01-29T01:16:18.787
> 
> 标签：css, html

尽管以前在这里问过这个问题，但我无法弄清楚这一点，我感到非常愚蠢。但谁能解释为什么我不能让滑块 div 直接位于图像 + 地图和文本内容 div 的下方（这两个应该在顶部，一个在左边，一个在右边）？很明显，我使用绝对定位的方式是不正确的。任何建议都会很棒。谢谢。

```
<style> 

#container .container_body .images {
    float: left;
}

#container .container_body .content {
    float: right;
    width: 355px;
}

#container .container_body {
    margin-bottom: 35px;
    background-color: pink;
    font-size: 22px;
}

.slider-container { 
    background-color: red;
    /*position: absolute;*/
}

.content {
    background-color: blue;
}

.images {
    background-color: green;
    /*position: absolute;*/
}

</style> <!-- /.style -->

<!-- container ALL -->
<div id="container">

  <!-- container BODY -->
  <div class="container_body">
    <p>container body here.</p>

    <!-- IMAGES -->
    <div class="images">
        <p>images here.</p>
    </div> <!-- /.images -->

    <!-- TEXT CONTENT -->
    <div class="content" style="width: 366px;">
          <p>text content here.</p>

          <!-- map -->
        <div class="map">
            <p>map media here.</p>
        </div><!-- /.map -->

    </div><!-- /.content -->
  </div> <!-- /.container_body -->

  <div class="slider-container"><!-- slider -->
     <p>slider here.</p>
  </div><!-- /.slider -->

</div><!-- /#container --> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-29T01:39:07.927

当您有浮动元素时，您必须将[`clear`](https://developer.mozilla.org/en-US/docs/CSS/clear)属性应用于要位于浮动元素下方的元素。如，

```
.slider-container {
   clear:both;
} 
```

just的值`both`表示向下移动元素以清除浮动的*左右*元素。在您上面的示例中，这应该涵盖`float:left;`和`float:right;`声明。

通过将上述样式应用于现有标记，滑块将按预期位于图像和文本下方。这是我的[jsfiddle 的副本。](http://jsfiddle.net/6aBWD/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-29T01:37:37.337

您的图像 div 向左浮动，因此 html 中可以显示在右侧的所有内容都将被显示。

然后你的下一个 div，内容，向右浮动。它显示在相同的 y 位置（因为前一个 div 向左浮动），但锚定在屏幕的右侧。因此，下一个 div，即您的滑块，由于浮动的工作方式，位于内容 div 的左侧和图像 div 的右侧。所以滑块最终在中间。

尝试对您的内容 div 使用正确的属性和相对定位，如下所示；

```
#container .container_body .content {
    /*    float: right;*/
    position:relative;
    right: 0px;
    width: 355px;
} 
```

这不是一个明确的解决方法（您必须为图像 div 添加宽度，否则我相信它可能会被覆盖），但它确实会按照您的要求强制您的滑块 div 在下方。

# java - 将 lenient 设置为 false 时的 SimpleDateFormat 异常

> ID：14574109
> 
> 赞同：8
> 
> 时间：2013-01-29T01:16:57.423
> 
> 标签：java, datetime, formatting

为什么这段代码会抛出无法解析的日期异常？

```
SimpleDateFormat f = new SimpleDateFormat("yyyy-MM-dd'T'HH:mm:ss'.000Z'");
f.setLenient(false);
String dateStr = "2012-03-11T02:46:01.000Z";
f.parse(dateStr); 
```

当 lenient 为真时，它工作正常。它奇怪地适用于输入日期' **2012-03-01T02:46:01.000Z** '，即使 lenient 为假。使用的默认时区：PST

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-29T01:38:06.993

因为您的默认时区中不存在该时间 - 这是夏令时更改日，时间从凌晨 2:00 跳到凌晨 3:00，所以那天早上没有 2:46。:P

由于您正在解析 UTC，请将`SimpleDateFormat`实例时区设置为 UTC，如下所示：

```
f.setTimeZone(TimeZone.getTimeZone("UTC")); 
```

你的问题就会消失。

# ruby-on-rails - Rails 不相关的表

> ID：14574110
> 
> 赞同：0
> 
> 时间：2013-01-29T01:16:57.493
> 
> 标签：ruby-on-rails

我有引用国家/地区表的客户表。插入客户端时，国家/地区会在下拉列表中提供给用户，从而在客户端表中插入国家/地区的 ID。您如何在客户端显示页面上显示国家/地区名称而不是 Id。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T01:25:08.093

我猜您的关联设置类似于下面，在这种情况下，您可以通过关联`@client.country.name`而不是`@client.country_id`（我在这里对变量和字段名称做出一些假设）来引用国家/地区名称。

协会将建立如下：

```
class Client < ActiveRecord::Base

  has_one :country

  ...

end

class Country < ActiveRecord::Base

  belongs_to :client

  ...

end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T01:25:48.600

就像是...

```
<%= select_tag 'country_id', options_from_collection_for_select(@countries, 'id', 'name') %> 
```

[http://apidock.com/rails/ActionView/Helpers/FormTagHelper/select_tag](http://apidock.com/rails/ActionView/Helpers/FormTagHelper/select_tag)

根据您在下面的评论，在 url 中获取单词的最简单方法是覆盖模式中的参数，如下所示：

```
def to_param
  "#{id}-#{name}".parameterize
end 
```

但这并不完美，并且灌输了一个数字。要摆脱数字，您将创建一个唯一的字符串，通常称为 slug，然后通过 slug 完成所有查找。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-29T02:11:43.603

在处理选择标签和数据库表时，我总是发现最好使用 collection_select [http://api.rubyonrails.org/classes/ActionView/Helpers/FormOptionsHelper.html#method-i-collection_select](http://api.rubyonrails.org/classes/ActionView/Helpers/FormOptionsHelper.html#method-i-collection_select)

您可以使用

```
collection_select :client, :country_id, Country.all, :id, :name 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-29T03:59:45.397

我放了这个，它现在似乎可以工作了。这是正确的解决方案吗？

```
<%= Country.find(@client.country_id).name %> 
```

# python - 订购查询集客户端，Django + TwitterBoostrap

> ID：14574111
> 
> 赞同：1
> 
> 时间：2013-01-29T01:17:02.577
> 
> 标签：python, django, twitter-bootstrap, django-templates

我有以下内容：

# 模型.py

```
class Person(models.Model):
    full_name = models.CharField(...)
    address = models.CharField(...) 
```

# 视图.py

```
def all_persons(request):
    persons = Person.objects.all()
    return render(
        request, 
        'my_template.html', 
        {
            'persons':persons
        }
    ) 
```

# my_template.html

```
<table class="table table-striped">
    <thead> 
    <tr> 
    <th>Person's Fullname</th>
    </tr>
    </thead> 
    <tbody>
    {% for person in persons %}
        <td>{{ person.full_name }}</td>
        <td>{{ person.address }}</td> 
```

好的，所以代码将在模板中显示一个无序列表的人员，当然我可以按人员的姓名或地址进行排序，我想让用户可以按任何字段进行排序，我想完成这在模板中表格的每一列上都有一个按钮。例如，全名顶部的按钮和地址顶部的按钮，如果其中任何一个被按下，则列表应根据按下的按钮进行排序。

非常感谢您的阅读，希望您能帮到我。

编辑：我使用 Twitter Boostrap 2，所以 tablesorter 和 DataTables JS 不会工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T01:47:00.503

查看这个用于 HTML 表的 JS 插件：[Datatables](http://datatables.net/)。带有排序，过滤，分页，很多插件。上手容易，但您可能会认为它有点臃肿。

另一种方法是让视图接受一个额外的参数（例如，一个表示字段的整数），按此字段对查询集进行排序并呈现模板。

# java - 奇怪的 Spring 事务行为

> ID：14574125
> 
> 赞同：2
> 
> 时间：2013-01-29T01:18:19.073
> 
> 标签：java, spring, hibernate, jpa

我很难理解 Spring Transactions。首先，我试图尽可能少地使用 Spring。基本上，我想在 JPA/Hibernate 中使用 @Transactional 和它的一些注入功能。我的事务使用在我的服务层。我试图将它们排除在测试用例之外。我使用 CTW 并且是弹簧配置的。我现在对我的包的根目录进行了组件扫描。我还在为我的数据源、JpaTransactionManager 和 EntityManagerFactory 使用 Java 配置。我对 JpaTransactionFactory 的配置使用：

```
 AnnotationTransactionAspect.aspectOf().setTransactionManager( txnMgr ); 
```

我不使用@EnableTransactionManagement。

不幸的是，我很难理解@Transactional 的规则，也找不到简单描述它们的简单页面。特别是关于会话使用。例如，如果我想在没有默认无参数构造函数的类上使用 @Transactional 怎么办？

我遇到的最奇怪的问题是，在某些 POJO 服务类中，Transacitonal 工作得很好，而在其他服务类中，我可以看到正在创建的事务，但操作最终会说“没有会话或会话已关闭”。我很抱歉没有代码来重现这个，我不能把它缩小到一个小集合。这就是为什么我正在寻找最好的资源，以便我自己弄清楚。

例如，我可以有一个方法来获取一个延迟获取的子集合，遍历它并将其放入一个 Set 并返回该集合。在一个类中它可以正常工作，而在另一个也标有@Transactional 的类中，它会在尝试遍历 PersistentSet 说没有会话（即使存在事务）时失败。

也许这是因为我在测试用例中创建了这两个服务对象，而第一个以某种方式劫持了会话？

对了，我已经通读了spring源码交易文档。我正在寻找一套清晰的规则和提示来调试此类问题。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T13:57:43.673

您确定您在尝试加载惰性子项的事务范围内加载了父实体吗？例如，如果它作为参数传入（即从您的`@Transactional`方法外部加载），那么它可能不再绑定到持久性上下文......

请注意，当没有`@Transactional`给出上下文时，任何与数据库相关的操作都可能会创建一个简短的 tx，然后立即关闭 - 禁用后续的延迟加载调用。这取决于您的[持久性上下文](https://stackoverflow.com/questions/2547817/what-is-the-difference-between-transaction-scoped-persistence-context-and-extend)和[自动提交](https://stackoverflow.com/questions/4453782/why-set-autocommit-to-true)配置。

简而言之，没有事务上下文的行为有时是出乎意料的，基本规则是总是有一个。如果您访问您的数据库，那么您给自己一个明确定义的 tx - 周期。使用 spring-tx，这意味着你所有的`@Repository`'s 和`@Service`s 都是`@Transactional`。这样你应该避免大多数与 tx 相关的问题。

# asp.net-membership - SQLite 与 WebMatrix.WebData.SimpleMembershipProvider Long to Int Cast 错误

> ID：14574126
> 
> 赞同：2
> 
> 时间：2013-01-29T01:18:22.577
> 
> 标签：asp.net-membership, membership-provider, webmatrix, simplemembership, webmatrix-2

我正在尝试使用`SimpleMembershipProvider`SQLite 在我的网站上启用身份验证。我已将其初始化`Global.aspx`并可以创建用户，但是我无法登录用户。尝试调用时出现以下错误`WebSecurity.Login([UserName], [Password])`：

```
Cannot implicitly convert type 'long' to 'int'. An explicit conversion exists (are you missing a cast?) 
```

堆栈跟踪如下（在我调用`Login`函数之后：

```
CallSite.Target(Closure , CallSite , Object ) +146
System.Dynamic.UpdateDelegates.UpdateAndExecute1(CallSite site, T0 arg0) +661
WebMatrix.WebData.SimpleMembershipProvider.VerifyUserNameHasConfirmedAccount(IDatabase db, String username, Boolean throwException) +315
WebMatrix.WebData.SimpleMembershipProvider.ValidateUser(String username, String password) +162
WebMatrix.WebData.WebSecurity.Login(String userName, String password, Boolean persistCookie) +32 
```

我知道 SQLite 只允许`Int64`数字列中的值（不是`float`）。问题是：我如何让值`SimpleMembershipProvider`与`Int64`值一起工作？我查看了堆栈跟踪中列出的违规例程的源代码，似乎所有数字在从其`Int32`函数返回之前都被显式转换。但是，我没有`System.Dynamic.UpdateDelegates.UpdateAndExecute1`or的来源`CallSite.Target`，所以我看不到那里发生了什么。更重要的是，这些可能是预编译的。所以，问题仍然存在，我怎样才能让它工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T08:15:21.923

SimpleMembership 提供程序仅支持 SQL Server 和 SQL Compact 4.0。不支持 SQLite。如果要使用 SQLite，则必须创建自己的 ExtendedMembershipProvider 实现。您可以或多或少地复制[SimpleMembershipProvider.cs](http://aspnetwebstack.codeplex.com/SourceControl/changeset/view/5cb74eb3b2f3#src/WebMatrix.WebData/SimpleMembershipProvider.cs)，只需修改出现数据类型冲突的位。

# javascript - javascript createElement/append child - 单击后新文本消失

> ID：14574128
> 
> 赞同：0
> 
> 时间：2013-01-29T01:19:06.017
> 
> 标签：javascript, html

我有一个javascript方法，可以在点击时创建一堆元素。当我从按钮调用它时，它只会在单击期间停留在屏幕上。但是，当我在控制台中输入完全相同的代码时，它会一直停留在页面上，直到我重新加载或导航离开（这正是我想要的）。

JavaScript 代码：（这是 js 文件中唯一的方法）

```
function post() {
var postTitle = document.createElement('h3');
var nodeTitle = document.createTextNode('Immigration is good.');
postTitle.appendChild(nodeTitle);
etc.... 
```

我在 html 中调用它的地方：

```
<input type="submit" id="post-button" value="Post" onclick="post()"> 
```

脚本标签位于 html 页面的页眉中。

如何让它在点击持续时间之后留在页面上？任何想法为什么它会立即被抹杀？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T01:22:53.997

您仍然需要取消表单的提交。A `return false;`from post（如果存在）将不起作用，因为该`onclick`属性正在调用`post()`但不返回任何内容。

您可以将其更改为`onclick="return post();"`，但最好直接附加处理程序，并附加到`submit`表单的`click`事件而不是按钮的事件（人们`Enter`有时会使用！）：

```
document.getElementById('some-form').onclick = post; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T01:22:37.243

看看按钮的作用。正在发帖！

当您单击按钮时，它会将您重定向回您当前所在的页面！看起来它正在出现并消失，但实际上正在发生的事情是页面正在刷新。

有几个选项可以做你想做的事。通过 Ajax 提交或让您的服务器使用 hashbang/cookie 集进行响应，以指导页面按照您的意愿进行操作。

# windows - Windows VBscript - XMLHttpRequest 返回旧内容

> ID：14574129
> 
> 赞同：1
> 
> 时间：2013-01-29T01:19:13.970
> 
> 标签：windows, vbscript, xmlhttprequest

在我的 vbscript 文件中，我使用 Microsoft.xmlhttp 对象来访问我的 Web 服务器上的 .txt 文件。我更改了文件的内容，但 vbscript 一直显示 .txt 文件的旧内容。我不知道是什么原因造成的，我用多个 vbscript 进行了尝试，所有问题都相同，但没有产生错误。

任何帮助深表感谢。

编辑：将请求发送到此 url：

```
url & "?t=" & Now() & " " & Timer() 
```

避免缓存。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T01:55:09.360

可能是数据被缓存了，如果你的 URL 没有改变，你会得到旧的缓存数据。尝试在您的 AJAX 调用中添加日期/时间参数：

```
objReq.open("GET", "[your url]?_t=" & Replace(CStr(CDbl(Now())), ".", ""), True) 
```

# android - Android 4.2 sdk - Nexus 7 - res/raw 中的 mp4 - 没有这样的文件 - 无法播放视频

> ID：14574132
> 
> 赞同：1
> 
> 时间：2013-01-29T01:19:22.740
> 
> 标签：android, file, video, resources

我似乎无法在我的设备（Nexus 7）上播放视频。我决定重新开始一个新项目来解决这个问题。

视频存储在 res/raw 中。
就是这个视频： http: [//www.howtodance.org/media/Lesson_2__9_lindy_demo_2__shoulder_pop_with_scoop_around.mp4](http://www.howtodance.org/media/Lesson_2__9_lindy_demo_2__shoulder_pop_with_scoop_around.mp4)

我已经尝试了许多在 stackoverflow 上建议的方法。这是我尝试过的最新方法：

```
 <!-- main.xml -->

    <?xml version="1.0" encoding="utf-8"?>
    <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
                  android:orientation="vertical"
                  android:layout_width="fill_parent"
                  android:layout_height="fill_parent"
            >
        <Button
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:text="New Button"
                android:id="@+id/button"
                android:layout_gravity="center"
                android:onClick="onButtonClick"
                />

    </LinearLayout> 
```

* * *

```
//MyActivity.java

package com.example.VideoTests;

import android.app.Activity;
import android.content.Intent;
import android.net.Uri;
import android.os.Bundle;
import android.util.Log;
import android.view.View;

import java.io.File;

public class MyActivity extends Activity {
    /**
     * Called when the activity is first created.
     */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
    }

    public void onButtonClick(View v){
        Log.d("working", "PlayVideo();");
        //  both of these urls don't seem to work
        //String uriString = "android.resource://com.example.VideoTests/raw/lesson_2__9_lindy_demo_2__shoulder_pop_with_scoop_around.mp4";
        String uriString = "android.resource://" + getPackageName() + "/" + R.raw.lesson_2__9_lindy_demo_2__shoulder_pop_with_scoop_around;

        //Uri video = Uri.parse(uriString);
        File file = new File(uriString); // video player selection dialog doesn't seem to load at all unless I send it through a file first.
        Intent intent = new Intent(Intent.ACTION_VIEW);
        intent.setDataAndType(Uri.fromFile(file), "video/mp4");
        startActivity(intent); // this is where it seems to crash
    }

} 
```

添加文件对象后，对话框终于出现了，但随后我收到一条消息“无法播放此视频”和以下错误：

```
ERROR/(128): Failed to open file '/android.resource:/com.example.VideoTests/2130968576'. (No such file or directory) 
```

如果我使用其他 uriString，它仍然给我这个错误：

```
ERROR/(128): Failed to open file '/android.resource:/com.example.VideoTests/raw/lesson_2__9_lindy_demo_2__shoulder_pop_with_scoop_around.mp4'. (No such file or directory) 
```

我也尝试将视频文件名更改为像“asdf.mp4”这样的短名称，但也会出现同样的错误

提前感谢大家的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-03T02:10:01.867

问题最终是我试图让他们选择他们想要使用哪个视频播放器来播放内部视频文件并且在本地存储上无法访问。我最终在子活动中使用了本地 VideoView。

# c++ - 在头文件 (.h) 中声明构造函数然后在类文件 (.cpp) 中定义 C++ 的语法

> ID：14574143
> 
> 赞同：23
> 
> 时间：2013-01-29T01:21:17.243
> 
> 标签：c++, constructor

如果有人能提出这个问题，我将不胜感激。我认为可行的示例（假设有所需的#include 语句）：

```
//.h file
class someclass(){}

//.cpp
someclass::
    someclass(){
         //implementation
         // of 
         //class
}; 
```

* * *

## 回答 #1

> 赞同：48
> 
> 时间：2013-01-29T01:25:34.763

someclass.h 文件

```
#ifndef SOME_CLASS_H
#define SOME_CLASS_H    

class someclass
{
public:
  someclass();  // declare default constructor

private:
  int member1; 
};

#endif 
```

某类.cpp

```
someclass::someclass()   // define default constructor
: member1(0)             // initialize class member in member initializers list
{
   //implementation
} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-29T01:23:25.320

标题：

```
//.h file
class someclass
{
    someclass();
}; // <-- don't forget semicolon here 
```

资源：

```
#include "someClass.h"
//.cpp
someclass::someclass()
{
    // Implementation goes here
} // <-- No semicolon here 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-01-29T01:22:42.483

如果要为其提供*定义*，则必须在类中*声明*构造函数。你只是在做第二件事。

 *此外，您的原始类定义包含一些错误：类名后不需要括号，最后一个花括号后需要分号。

```
class someclass
{
    someClass(); // Here you DECLARE your constructor
};

...

someclass::someclass() // Here you DEFINE your constructor
{
    ...
} 
```*

# android - 在android中：从表单中动态添加的字段中检索数据

> ID：14574144
> 
> 赞同：0
> 
> 时间：2013-01-29T01:21:29.753
> 
> 标签：android, dynamic, textfield, data-retrieval

我正在尝试开发一个用户输入表单，我在其中获取他的详细信息并将它们存储在我有他的姓名、电子邮件、地址、电话号码等字段的表单中。一个人可能有多个电子邮件或多个电话号码。他可以通过单击按钮来添加字段。

然后我想将用户输入的数据存储在共享首选项中。

我有个问题：

```
how do i retrieve data from dynamically added extra fields by the user?
I have maintained a count for dynamically added fields for each field criteria (like email, phone etc)

 but i am stuck at the point where i am supposed to retrieve the data when i need to store them in Shared Preferences. 
```

请帮忙！先感谢您。

是否可以使用 ParentViewGroup.getChildCount() 之类的东西或其他东西？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T01:32:43.153

当然，您可以使用`getChildCount()`和`getChildAt()`方法从`ViewGroup`.

但是，我认为更好的方法是在将它们添加到视图层次结构时保存对添加的视图的引用，并从这些引用中获取数据。

# postgresql - 插入失败的 PostgreSQL 异常

> ID：14574148
> 
> 赞同：1
> 
> 时间：2013-01-29T01:21:51.563
> 
> 标签：postgresql, exception-handling, plpgsql, postgresql-9.2

是否存在存储过程中insert语句失败**不会抛出异常***的*情况？

 **我在我的 PostgreSQL 存储过程中通过`EXCEPTION WHEN OTHERS THEN`. 我想知道这是否足以捕获所有失败的插入。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-29T01:41:20.417

那应该涵盖它。
我引用了[PL/pgSQL 中的 Trapping Errors](http://www.postgresql.org/docs/current/interactive/plpgsql-control-structures.html#PLPGSQL-ERROR-TRAPPING)手册：

> 特殊条件名称 OTHERS 匹配除 QUERY_CANCELED 之外的所有错误类型。（通过名称来捕获 QUERY_CANCELED 是可能的，但通常是不明智的。）**

# ruby-on-rails - 从长期运行的 Rails 控制器功能返回状态的最佳方法？

> ID：14574150
> 
> 赞同：0
> 
> 时间：2013-01-29T01:22:01.770
> 
> 标签：ruby-on-rails, ruby-on-rails-3

Rails 3 中为长时间运行的应用程序向用户发回状态的首选方式是什么？

泰，弗雷德

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T01:43:44.220

建议在后台进程中执行冗长的任务，并尽快/立即从主函数返回。

查看[Ruby on Rails 的答案：如何在后台运行？](https://stackoverflow.com/questions/897605/ruby-on-rails-how-to-run-things-in-the-background)和Rails 中的[后台处理，](https://stackoverflow.com/questions/2804947/background-processing-in-rails)以了解使用 Rails 进行后台处理的一些选项。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T01:50:58.773

让那个长时间运行的应用程序将其状态写入 Rails 可以读取的固定位置。状态通常有两种形式，一个在1-100范围内不断增加的数字，用于进度显示，或者一个状态，即“读、处理、写”。

然后你必须开发一个 AJAX 控制器动作来读取那个文件。创建 AJAX 操作触发时运行的相应 javaScript 文件。

即在 app/controllers/some_controller.rb

```
def get_status
  @status = File.open("#{Rails.root.to_s}/tmp/lrp_status.txt","rb") { |f| f.read } 
end 
```

然后在 app/views/some/get_status.js.erb 中：

```
$('#my_status_div').html('<p> the status is <%= @status %></p>'); 
```

然后你必须使用你喜欢的计时器 javascript thingy 设置一些 javascript。这里的重点是每隔（？1 秒），触发 get_status AJAX 调用。

# javascript - 强制一个元素永远不要失去对 HTML 的关注？

> ID：14574152
> 
> 赞同：0
> 
> 时间：2013-01-29T01:22:12.453
> 
> 标签：javascript, jquery, html, textarea

我正在编写一个在线编辑器。为了正确获取字符输入，我在 textarea 元素上使用 jQuery.onKeyPress 事件（从正文获取输入不起作用，因为退格等字符会激活某些浏览器快捷方式 - 此外，某些字符只能以这种方式正确提供）。该文本区域通过将其放置在窗口外而被隐藏（否则将不起作用）。

问题是：

1.  我正在做的事情有更好的设计吗？
2.  我如何保证这个元素永远不会散焦，除了设置一个定时器来不断地聚焦它？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-29T01:24:04.747

要确保元素始终处于焦点位置，请使用以下命令：

```
var $textarea = $('textarea');

$textarea.on('blur', function () {
    setTimeout(function () {
        $textarea.focus();
    }, 0);
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-08-24T16:53:58.623

上面答案的一个小变体：

**html:**

```
<input type="text" id="element"> 
```

## jQuery

* * *

```
$('#element').on('blur', function () {
    _this = this;
    setTimeout(function () {
        _this.focus();
    }, 0);
}); 
```

## 香草（纯 Js）

* * *

```
var theElement = document.getElementById("element");

theElement.addEventListener("focusout", function(){
    _this = this;
    setTimeout(function () {
        _this.focus();
    }, 0);
}); 
```

# plugins - 如何为 ollydbg 2.xx 设置插件？

> ID：14574155
> 
> 赞同：8
> 
> 时间：2013-01-29T01:22:29.957
> 
> 标签：plugins, assembly, reverse-engineering, ollydbg

我从其官方网站下载了最新的 ollydbg 2.x 版本，并从 tuts4you 下载了一些插件。但是如何启用/安装插件？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-29T09:59:02.710

*   要么将插件 dll 放在专用目录（例如`Plugins`）中，要么放在与 ollydbg.exe 相同的目录中
*   在`Options / Options... / Directories`面板中，`Plugin directory`根据您放置 dll 的位置相应地配置设置。如果把dll放在ollydbg.exe目录下，可以设置`.`
*   重启 OllyDbg
*   你应该有一个`plugins`菜单，插件添加他们的菜单入口点

这是一个通用程序，您可能需要适应特定的插件：例如，有些可能需要额外的 .txt 或 .ini 文件。这应该在插件包中进行描述。

此外，如果您已完成此设置但仍无法看到您的插件，请注意插件 API 最近对 2.01h 版本进行了重大升级。某些现有插件可能不再受支持。

如果您没有插件源代码或无法自己重建它，可以尝试修补插件 dll 以使其在 Olly 中加载。这很棘手，因为您需要修补版本号，可能还有插件 api 所涉及的 dll 中的回调。该过程[在截屏视频中进行了](http://sluganalysislab.blogspot.com/2012/10/ollydbg-2xx-plugin-compatibility.html)描述。

# c# - windows 手机摄像头冻结

> ID：14574156
> 
> 赞同：0
> 
> 时间：2013-01-29T01:22:31.423
> 
> 标签：c#, camera, windows-mobile, windows-mobile-6.5, windows-mobile-6

我正在开发一个允许用户拍摄图像并将其发送回服务器的 windows mobile 6 应用程序。它工作正常，但有时，用户告诉我，当他们按下打开相机对话框的按钮时，它确实打开了相机，但他们将无法看到任何东西，只是黑色。当他们按下并拍照时，闪光灯会打开，相机对话框会冻结。他们必须重新启动设备才能再次执行此操作。

任何想法？？

顺便说一句，我使用 CameraCaptureDialog.ShowDialog() 来初始化相机对话框，设备是 Honeywell Dolphin 6000

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T04:59:57.963

使用相机需要大量资源。如果您的应用程序消耗大量内存（每个进程的限制为 32MB），则可能会发生任何奇怪的事情。

我建议在新的过程中使用相机来克服这种内存限制。您的自定义应用程序可以启动第二个进程，然后监视图片目录中的文件更改或使用有关所拍摄图像的进程间通信。

[请参阅我在Slaying the memory monster](http://community.intermec.com/t5/General-Development-Developer/Slaying-the-virtual-memory-monster/m-p/16764)上关于虚拟内存的帖子。

另一种选择是在您初始化并显示 CameraDialog 之前在您的应用程序中释放尽可能多的内存。

〜问候

# javascript - jquery 定位多个标题属性

> ID：14574158
> 
> 赞同：0
> 
> 时间：2013-01-29T01:22:39.833
> 
> 标签：javascript, jquery

我有下面的代码可以正常工作。

```
 <div id="testdiv"></div>
    <table>
        <tr>
            <td class="test" title="two">2</td>
            <td class="test" title="one">1</td>
            <td class="test" title="three">3</td>
        </tr>
    </table>

    <script>
        if(jQuery("td[title='three']").length == 0) {
          jQuery('#testdiv').append('<p>no td</p>')
        }
        else
        {
          jQuery('#testdiv').append('<p>yes td</p>')
        }
    </script> 
```

但是我想说的是标题一或三是否存在。因此，我尝试将脚本的第一行编辑为如下所示。

```
if(jQuery("td[title='three']").length == 0 || jQuery("td[title='one']").length == 0) { 
```

但出于某种原因，似乎三个和一个都需要在那里才能使我的陈述成为真实？

但是如果我替换 || 与 && 它按我想要的方式工作？为什么 && 像 || 一样工作 在这里还是我在这里遗漏了什么？

[参见小提琴](http://jsfiddle.net/aaronk85/bRN3y/)例如

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T01:26:42.307

`||`意思是“包含或”。与`||`您说，如果`title=three`不存在*或* `title=one`不存在，请显示`no td`。也就是说，如果一个*确实*存在，它仍然会说`no td`。如果您以自己的方式使用，两者都需要存在`||`。我认为如果你颠倒条件，它可能对你更有意义：

```
 if(jQuery("td[title='three']").length > 0
       || jQuery("td[title='one']".length > 0
    ) {
      jQuery('#testdiv').append('<p>yes td</p>')
    }
    else
    {
      jQuery('#testdiv').append('<p>no td</p>')
    } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-29T01:29:32.867

`||`is OR, `&&`is AND 所以如果你需要同时满足*这两个*条件，你必须使用`&&`，但你可以把它缩短一点。我使用`$`是为了方便，但您可以替换为`jQuery`：

```
var exists = $('td[title=one],td[title=three]').length;
$('#testdiv').append('<p>'+ (exists ? 'yes' : 'no') +' td</p>'); 
```

# google-bigquery - 工作不会脱离“待定”状态

> ID：14574167
> 
> 赞同：0
> 
> 时间：2013-01-29T01:23:33.203
> 
> 标签：google-bigquery

我们的一项工作是阻止队列，因为它不会在 5 天内脱离“待处理”状态。作业 ID 是 apps_prod_orgsite_terracotta_lan_bigquery-data-2013-01-23_11-08-11-194_csv_gz

```
$ ./bq show -j apps_prod_orgsite_terracotta_lan_bigquery-data-2013-01-23_11-08-11-194_csv_gz
工作电话homedata：apps_prod_orgsite_terracotta_lan_bigquery-data-2013-01-23_11-08-11-194_csv_gz
  作业类型 状态 开始时间 持续时间 已处理字节数  
 ---------- --------- ------------ ---------- --------- --------
  加载待处理                                            

```

这应该发生吗？它至少应该失败或超时？

编辑：正确的jobid

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T20:55:11.980

看起来我们的作业处理服务出现了故障，影响了 22 个作业，这些作业于太平洋标准时间 1 月 23 日上午 10:55 到 11:30 之间开始。我们正在调查这个问题。可以重新运行作业吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T19:52:22.867

实际上，我认为有问题的工作 ID 是“apps_prod_orgsite_terracotta_lan_bigquery-data-2013-01-23_11-08-11-194_csv_gz”

# windows - 如何使用管道将一个命令的输出重定向到另一个命令的输入？

> ID：14574170
> 
> 赞同：53
> 
> 时间：2013-01-29T01:23:50.800
> 
> 标签：windows, pipe, command-prompt

我有一个将文本发送到 LED 标志的程序。

prismcom.exe

使用程序发送“Hello”：

```
prismcom.exe usb Hello 
```

现在，例如，我希望使用一个名为 Temperature 的命令程序。

```
temperature 
```

假设该程序为您的计算机提供温度。

```
Your computer is 100 degrees Fahrenheit. 
```

现在，我希望将温度的输出写入 prismcom.exe：

```
temperature | prismcom.exe usb 
```

这似乎不起作用。

是的，我已经为这个问题寻找了二十多分钟的解决方案。在所有情况下，它们要么是 kludges/hacks，要么是 Windows 命令行之外的解决方案。

我会很感激关于如何将输出从温度传输到 prismcom 的指导。

谢谢！

编辑：Prismcom 有两个论点。第一个永远是“usb”。之后出现的任何内容都将显示在标志上。

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2013-01-29T02:24:09.817

试试这个。将其复制到批处理文件中 - 例如 send.bat - 然后简单地运行`send.bat`以将消息从温度程序发送到 prismcom 程序。

```
temperature.exe > msg.txt
set /p msg= < msg.txt
prismcom.exe usb "%msg%" 
```

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2016-01-14T15:15:59.940

您还可以使用 PowerShell 在 Cmd.exe 命令行中运行完全相同的命令。为简单起见，我会采用这种方法...

```
C:\>PowerShell -Command "temperature | prismcom.exe usb" 
```

请阅读[了解 Windows PowerShell 管道](https://docs.microsoft.com/en-us/powershell/scripting/learn/understanding-the-powershell-pipeline?view=powershell-6)

您也可以`C:\>PowerShell`在命令行输入，它会立即让您进入`PS C:\>`模式，您可以直接开始编写 PS。

* * *

## 回答 #3

> 赞同：16
> 
> 时间：2013-01-29T02:12:38.247

这应该有效：

```
for /F "tokens=*" %i in ('temperature') do prismcom.exe usb %i 
```

如果在批处理文件中运行，则需要使用`%%i`而不是仅使用`%i`（在两个地方）。

* * *

## 回答 #4

> 赞同：-4
> 
> 时间：2019-08-02T15:58:20.533

不确定您是否正在编写这些程序，但这是一个简单的示例，说明您将如何进行。

程序1.c

```
#include <stdio.h>
int main (int argc, char * argv[] ) {
    printf("%s", argv[1]); 
    return 0;
} 
```

rgx.cpp

```
#include <cstdio>
#include <regex>
#include <iostream>
using namespace std;
int main (int argc, char * argv[] ) {
    char input[200];
    fgets(input,200,stdin);
    string s(input)
    smatch m;
    string reg_exp(argv[1]);
    regex e(reg_exp);
    while (regex_search (s,m,e)) {
      for (auto x:m) cout << x << " ";
      cout << endl;
      s = m.suffix().str();
    }
    return 0;
} 
```

编译两者然后运行`program1.exe "this subject has a submarine as a subsequence" | rgx.exe "\b(sub)([^ ]*)"`

操作员只需将`|`program1`printf`操作的输出从`stdout`流重定向到`stdin`流，它就坐在那里等待 rgx.exe 接收。

# json - Scala JSON 映射

> ID：14574172
> 
> 赞同：0
> 
> 时间：2013-01-29T01:23:58.617
> 
> 标签：json, list, scala, map

我有一个 JSON 文件，在我正在阅读的文件中是这样的

```
{
  "created_at": "Sun Jan 27 06:00:11 +0000 2013",
  "id": 295410858505420800,
  "id_str": "295410858505420800",
  "text": "RT @Iouis_tomlinson: gay marriage has been accepted in new york? cmon @harry_styles we're moving.",
  "source": "\u003ca href=\"http:\/\/twitter.com\/download\/iphone\" rel=\"nofollow\"\u003eTwitter for iPhone\u003c\/a\u003e",
  "truncated": false,
  "in_reply_to_status_id": null,
  "in_reply_to_status_id_str": null,
  "in_reply_to_user_id": null,
  "in_reply_to_user_id_str": null,
  "in_reply_to_screen_name": null,
  "user": {
    "id": 469129489,
    "id_str": "469129489",
    "name": "claudia",
    "screen_name": "wenqianmeow",
    "location": "wild and carefree",
    "url": null,
    "description": "Hey i'm the cool cat meow - KEY ",
    "protected": false,
    "followers_count": 62,
    "friends_count": 39,
    "listed_count": 0,
    "created_at": "Fri Jan 20 08:16:21 +0000 2012",
    "favourites_count": 18,
    "utc_offset": -32400,
    "time_zone": "Alaska",
    "geo_enabled": false,
    "verified": false,
    "statuses_count": 10153,
    "lang": "en",
    "contributors_enabled": false,
    "is_translator": false,
    "profile_background_color": "C0DEED",
    "profile_background_image_url": "http:\/\/a0.twimg.com\/profile_background_images\/663495104\/3ym43s5y51p6si2drotg.jpeg",
    "profile_background_image_url_https": "https:\/\/si0.twimg.com\/profile_background_images\/663495104\/3ym43s5y51p6si2drotg.jpeg",
    "profile_background_tile": true,
    "profile_image_url": "http:\/\/a0.twimg.com\/profile_images\/3131226365\/652a4d1995335bc686b813580b68ba52_normal.jpeg",
    "profile_image_url_https": "https:\/\/si0.twimg.com\/profile_images\/3131226365\/652a4d1995335bc686b813580b68ba52_normal.jpeg",
    "profile_banner_url": "https:\/\/si0.twimg.com\/profile_banners\/469129489\/1358749624",
    "profile_link_color": "FF0389",
    "profile_sidebar_border_color": "000000",
    "profile_sidebar_fill_color": "DDEEF6",
    "profile_text_color": "333333",
    "profile_use_background_image": true,
    "default_profile": false,
    "default_profile_image": false,
    "following": null,
    "follow_request_sent": null,
    "notifications": null
  },
  "geo": null,
  "coordinates": null,
  "place": null,
  "contributors": null,
  "retweeted_status": {
    "created_at": "Sun Jun 26 20:21:20 +0000 2011",
    "id": 85080221124001792,
    "id_str": "85080221124001792",
    "text": "gay marriage has been accepted in new york? cmon @harry_styles we're moving.",
    "source": "web",
    "truncated": false,
    "in_reply_to_status_id": null,
    "in_reply_to_status_id_str": null,
    "in_reply_to_user_id": null,
    "in_reply_to_user_id_str": null,
    "in_reply_to_screen_name": null,
    "user": {
      "id": 217118451,
      "id_str": "217118451",
      "name": "Louis Tomlinson",
      "screen_name": "Iouis_tomlinson",
      "location": "Doncaster",
      "url": null,
      "description": "This is NOT the real Louis Tomlinson yeah okay cool. This is just a for a laugh so don't hate appreciate, bitches. 1\/2 of a larry bromance.",
      "protected": false,
      "followers_count": 68985,
      "friends_count": 115,
      "listed_count": 66,
      "created_at": "Thu Nov 18 16:48:11 +0000 2010",
      "favourites_count": 5,
      "utc_offset": null,
      "time_zone": null,
      "geo_enabled": false,
      "verified": false,
      "statuses_count": 1105,
      "lang": "en",
      "contributors_enabled": false,
      "is_translator": false,
      "profile_background_color": "C0DEED",
      "profile_background_image_url": "http:\/\/a0.twimg.com\/images\/themes\/theme1\/bg.png",
      "profile_background_image_url_https": "https:\/\/si0.twimg.com\/images\/themes\/theme1\/bg.png",
      "profile_background_tile": false,
      "profile_image_url": "http:\/\/a0.twimg.com\/profile_images\/2604923677\/image_normal.jpg",
      "profile_image_url_https": "https:\/\/si0.twimg.com\/profile_images\/2604923677\/image_normal.jpg",
      "profile_link_color": "0084B4",
      "profile_sidebar_border_color": "C0DEED",
      "profile_sidebar_fill_color": "DDEEF6",
      "profile_text_color": "333333",
      "profile_use_background_image": true,
      "default_profile": true,
      "default_profile_image": false,
      "following": null,
      "follow_request_sent": null,
      "notifications": null
    },
    "geo": null,
    "coordinates": null,
    "place": null,
    "contributors": null,
    "retweet_count": 21584,
    "entities": {
      "hashtags": [

      ],
      "urls": [

      ],
      "user_mentions": [
        {
          "screen_name": "Harry_Styles",
          "name": "Harry Styles",
          "id": 181561712,
          "id_str": "181561712",
          "indices": [
            49,
            62
          ]
        }
      ]
    },
    "favorited": false,
    "retweeted": true,
    "lang": "en"
  },
  "retweet_count": 0,
  "entities": {
    "hashtags": [

    ],
    "urls": [

    ],
    "user_mentions": [
      {
        "screen_name": "Iouis_tomlinson",
        "name": "Louis Tomlinson",
        "id": 217118451,
        "id_str": "217118451",
        "indices": [
          3,
          19
        ]
      },
      {
        "screen_name": "Harry_Styles",
        "name": "Harry Styles",
        "id": 181561712,
        "id_str": "181561712",
        "indices": [
          70,
          83
        ]
      }
    ]
  },
  "favorited": false,
  "retweeted": false,
  "lang": "en"
} 
```

我想解析它并将其转换为地图，以便我可以提取我需要的名称、值对。我正在使用以下代码：

```
 val data = scala.io.Source.fromFile("search100.json").getLines.toList.map(x => x.split("\n").toList)
    print(data)
    val simple = [Map[String,Any]](data.mkString(""" """)) 
```

但是这似乎不起作用，有没有办法在不使用外部库的情况下将 JSON 转换为 Map？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T06:34:42.443

我认为这条线是错误的：

`val data = scala.io.Source.fromFile("search100.json").getLines.toList.map(x => x.split("\n").toList)`

应该是：

`val data = scala.io.Source.fromFile("search100.json").getLines`

getLines 已经剥离`\r|\n`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T06:18:16.627

听起来底层的 JSON 没有解析；即您提供的输入不是 JSON。很可能是一段文字，以字母“L”开头；例如，比如说，键入签名或其他东西。

# c# - SemaphoreSlim 的 Wait(Int32) 方法在传递为零时是否立即返回？

> ID：14574181
> 
> 赞同：7
> 
> 时间：2013-01-29T01:24:34.323
> 
> 标签：c#, .net-4.0, concurrency, semaphore

在 Semaphore 的 WaitOne(Int32) 方法的[MSDN 文档](http://msdn.microsoft.com/en-us/library/cc189907.aspx)中，它说给它一个零值将导致该方法立即返回，而无需等待插槽打开。[SemaphoreSlim](http://msdn.microsoft.com/en-us/library/dd289488%28v=vs.100%29.aspx)版本的文档并没有说同样的话。SemaphoreSlim 是否有这种行为？

我不确定如何保证自己测试的时间。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-05-07T12:35:14.503

如果通过了 0 的超时，那么`SemaphoreSlim.Wait`将始终在返回之前尝试获取一个插槽，它只是不会等待一个超过几个操作和一个`SpinOnce`.

**编辑：澄清：**这可能与`Semaphore`. 从文档中`Semaphore`：

> 它测试等待句柄的状态并立即返回

但是`SemaphoreSlim`，一旦您使用 Wait 方法，通过使用`SpinOnce`.

（结束编辑）

此外，`SemaphoreSlim`在尝试获取插槽之前运行一些操作。其中之一是 a `Monitor.Enter`，因此它可以在此时等待其他正在等待或释放的线程。因此，它不一定会立即返回。

据我所知，事件的顺序是：

1.  创建一个`CancellationTokenRegistration`
2.  **如果可用插槽计数为 0**，则`SpinWait.SpinOnce`（或跳过此如果`NextSpinWillYield`是`true`）（*编辑：我用粗体强调第 2 步与第 5 步进行相同的测试，使其有机会旋转并在最终测试并退出*）
3.  调用`Monitor.Enter`进入锁（Release和WaitAsync进入的同一个锁）
4.  将内部 waitCount 增加 1
5.  **如果可用槽计数为 0**，则将 waitCount 减 1 并退出锁，然后**返回`false`**
6.  **如果我们到达这里并且有一个空闲位置**：
    *   将可用槽数减 1（含义：获取槽）
    *   重置下的waitHandle `AvailableWaitHandle`，如果它正在被使用并且可用插槽计数现在再次为0
    *   将 waitCount 减 1
    *   退出锁
    *   处置`CancellationTokenRegistration`
    *   **返回`true`**

（请注意，使用非零超时的其他线程会通过调用间歇性地释放和获取用于保护计数器的锁`Monitor.Wait`，因此您不会永远等待超时为 0，而只是等待很短的时间。）

所以`SemaphoreSlim`似乎不会与 0 共享完全相同的超时行为`Sempahore`，因为它确实给了一个插槽打开的机会。（也许这就是为什么存在`Semaphore.WaitOne`和`SemaphoreSlim.Wait`- 仅通过更改信号量的实例化来导致代码在升级旧代码时无法编译，因此让我们检查行为）。

文章[Semaphore vs. SemaphoreSlim](http://msdn.microsoft.com/en-us/library/z6zx288a%28v=vs.110%29.aspx)并没有强调这种行为，只是两者之间的根本区别。

*边注：*

有趣的是，该参考资料还指出

> [SemaphoreSlim] 不*支持*...使用等待句柄进行同步

然而[SemaphoreSlim.AvailableWaitHandle](http://msdn.microsoft.com/en-us/library/system.threading.semaphoreslim.availablewaithandle.aspx)的文档却有不同的说法。

# multithreading - NHibernate：ThreadStaticSessionContext 和 WcfOperationSessionContext 之间有什么区别？

> ID：14574184
> 
> 赞同：0
> 
> 时间：2013-01-29T01:24:41.440
> 
> 标签：multithreading, wcf, nhibernate

**如您所见，如果我在非 WCF**场景中使用 WcfOperationSessionContext 会发生什么？

任何答案都会有所帮助！谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T05:00:13.113

在这种情况下，**自我描述**的名称`WcfOperationSessionContext`无法告诉您更多信息。此会话上下文实现仅适用于**WCF**方案。

如果您需要更多查看这里的实现：

*   [WcfOperationSessionContext.cs](https://github.com/nhibernate/nhibernate-core/blob/master/src/NHibernate/Context/WcfOperationSessionContext.cs)

课堂总结：

```
/// <summary>
/// Provides a <see cref="ISessionFactory.GetCurrentSession()">current session</see>
/// for the current OperationContext in WCF. 
/// Works only during the lifetime of a WCF operation.
/// </summary>
public class WcfOperationSessionContext : MapBasedSessionContext
... 
```

看看其他人，以更多地了解在您的多线程环境中适合您的内容：

*   [NHiberante 内置上下文](https://github.com/nhibernate/nhibernate-core/tree/master/src/NHibernate/Context)

线程会话上下文之一将是更好的选择

但是您可以在[文档 2.3 中阅读。上下文会话](http://nhforge.org/doc/nh/en/index.html#architecture-current-session)`ISession`，绑定和取消绑定实例始终由您决定：

*   NHibernate.Context.ThreadStaticSessionContext (...) 您负责使用 CurrentSessionContext 类的静态方法绑定和取消绑定 ISession 实例。

*   NHibernate.Context.WcfOperationSessionContext (...) 您负责使用 CurrentSessionContext 类的静态方法绑定和取消绑定 ISession 实例。

# templates - 从 CodeSmith 生成脚本，而不对数据库执行生成的脚本

> ID：14574187
> 
> 赞同：0
> 
> 时间：2013-01-29T01:24:59.237
> 
> 标签：templates, codesmith

我有一个相当简单的问题 - 如何从 CodeSmith 模板 (.cst) 生成脚本，而不针对目标数据库运行生成的脚本。

也就是说，我有一个 CodeSmith 模板文件，它通过以下命令生成 CRUD SQL Server 存储过程

cs.exe "GenerateCrud.csp" -p:TargetDB=mySqlServerDb -p:TargetServer=mySqlServerInstance

...其中 GenerateCrud.csp 调用针对两个参数 TargetDB 和 TargetServer 运行的模板

要求是在不对 TargetDB 和 TargetServer 运行脚本的情况下生成 CRUD 脚本。是否有一个命令行参数可以适应这个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T16:48:55.543

你用的是哪个模板？您可能会发现该 csp 文件中有一个属性，例如“AutoExecuteStoredProcedures”

您可以从命令行更改它，而无需编辑 csp 文件本身，就像使用其他属性一样，例如：

cs.exe "GenerateCrud.csp" -p:AutoExecuteStoredProcedures=false

# mysql - 由于许多连接错误，主机“X”被阻止

> ID：14574188
> 
> 赞同：3
> 
> 时间：2013-01-29T01:25:00.713
> 
> 标签：mysql, ruby-on-rails, timeout, database-connection, rails-activerecord

mysql 被该消息卡住了

> Mysql2::Error: Host 'X' 由于很多连接错误而被阻塞；使用 'mysqladmin flush-hosts' 解除阻塞

与此同时，我从 Rails 收到大量超时

> ActiveRecord::ConnectionTimeoutError: 无法在 5 秒内获得数据库连接（等待 5.00223 秒）。当前最大池大小为 5；考虑增加它。

mysql 每次都会被 ActiveRecord 击中吗？**Rails 超时会导致 mysql 锁定吗？**

或者这两个错误是由于尝试次数过多/资源不足的问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T01:31:27.523

首先增加连接池大小。

```
Connection Pool size

Server=myServerAddress;Database=myDataBase;Uid=myUsername;Pwd=myPassword;
MinimumPoolSize=10;maximumpoolsize=50; 
```

这是您可以尝试的其他一些连接字符串/ mysql 设置。[http://www.connectionstrings.com/mysql](http://www.connectionstrings.com/mysql)

# jquery - 将 jquery 中的类添加到 没有身份证

> ID：14574191
> 
> 赞同：0
> 
> 时间：2013-01-29T01:25:24.950
> 
> 标签：jquery, html, twitter-bootstrap

我有以下html：

```
<div class="well sidebar-nav">
        <ul class="nav nav-list">
          <li class="nav-header">head</li>
          <li><a href="index.html"><i class="icon-cog"></i> index</a></li>
          <li><a href="contacts.html"><i class="icon-globe"></i> contacts</a></li>
.... 
```

我想把`class='active'`其中之一放在`<li>`jquery 中。我知道我必须使用这样的东西：

```
function select() {
    $("li").addClass("active");
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T01:27:19.707

使用[`:eq()`](http://api.jquery.com/eq-selector/)选择器：

```
$('.nav-list li:eq(1)').addClass('active'); 
```

传递的数字应该从零开始，以便`li`使用 访问第二个`:eq(1)`。

* * *

为了获得更好的性能，您应该拆分选择器，并使用以下[`.eq()`](http://api.jquery.com/eq/)功能：

```
$('.nav-list').children().eq(1).addClass('active'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T01:28:20.670

```
$('li').on('click', function(){
    $('li').removeClass('active');
    $(this).addClass('active');
}); 
```

当您单击从所有中`li`删除类时，比将类添加到单击的。`active``li``active``li`

# postgresql - 哪个 CMS 提供强大的 Postgresql 支持，并为没有程序员技能的用户提供简单的 CRUD 表单设计和报告

> ID：14574196
> 
> 赞同：0
> 
> 时间：2013-01-29T01:25:44.370
> 
> 标签：postgresql, content-management-system

我正在寻找一个具有活跃社区的免费 CMS，用于在 PostgreSQL 数据库上构建 Intranet。主要目标是允许用户构建海关表格和报告以填写和咨询数据库，而无需任何程序员技能。

我对编程语言并没有什么偏好，而且 CMS 需要允许在 Windows Server 上进行部署。

非常感谢

艾蒂安

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T14:14:34.330

以防万一有人像我一样在 PostgreSQL 后端寻找一种简单的方法来构建 Web 表单和报告，SQLMaestro 的 PostgreSQL PHP 生成器是一个很棒的产品......

[http://www.sqlmaestro.com/products/postgresql/phpgenerator/](http://www.sqlmaestro.com/products/postgresql/phpgenerator/)

# java - 在 PHP 中传递数据时出错。

> ID：14574198
> 
> 赞同：-3
> 
> 时间：2013-01-29T01:25:49.983
> 
> 标签：java, php, android, mysql

大家好，我现在有错误，我不明白为什么会出现这个错误，你能指出我的问题吗？谢谢。这是错误：

**

```
01-29 20:14:46.738: E/AndroidRuntime(1827): FATAL EXCEPTION: main
01-29 20:14:46.738: E/AndroidRuntime(1827): java.lang.NullPointerException
01-29 20:14:46.738: E/AndroidRuntime(1827):     at com.example.projectthesis.Register.validation(Register.java:55)
01-29 20:14:46.738: E/AndroidRuntime(1827):     at com.example.projectthesis.Register$1.onClick(Register.java:49)
01-29 20:14:46.738: E/AndroidRuntime(1827):     at android.view.View.performClick(View.java:4084)
01-29 20:14:46.738: E/AndroidRuntime(1827):     at android.view.View$PerformClick.run(View.java:16966)
01-29 20:14:46.738: E/AndroidRuntime(1827):     at android.os.Handler.handleCallback(Handler.java:615)
01-29 20:14:46.738: E/AndroidRuntime(1827):     at android.os.Handler.dispatchMessage(Handler.java:92)
01-29 20:14:46.738: E/AndroidRuntime(1827):     at android.os.Looper.loop(Looper.java:137)
01-29 20:14:46.738: E/AndroidRuntime(1827):     at android.app.ActivityThread.main(ActivityThread.java:4745)
01-29 20:14:46.738: E/AndroidRuntime(1827):     at java.lang.reflect.Method.invokeNative(Native Method)
01-29 20:14:46.738: E/AndroidRuntime(1827):     at java.lang.reflect.Method.invoke(Method.java:511)
01-29 20:14:46.738: E/AndroidRuntime(1827):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:786)
01-29 20:14:46.738: E/AndroidRuntime(1827):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:553)
01-29 20:14:46.738: E/AndroidRuntime(1827):     at dalvik.system.NativeStart.main(Native Method) 
```

**

这是我的代码：

**

```
public class Register extends Activity {
    EditText inputFname;
    EditText inputLname;
    EditText inputEmail;
    EditText inputPassword;
    EditText inputCpassword;
    EditText inputCellno;
    Button btnRegister;
    private ProgressDialog pDialog;
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.register);

        inputFname = (EditText) findViewById(R.id.inputFname);
        inputLname = (EditText) findViewById(R.id.inputLname);
        inputEmail = (EditText) findViewById(R.id.inputEmail);
        inputPassword = (EditText) findViewById(R.id.inputPassword);
        inputCpassword = (EditText) findViewById(R.id.inputCpassword);
        inputCellno = (EditText) findViewById(R.id.inputCellno);

        Button btnRegister = (Button) findViewById(R.id.btnRegister);
        // button click event
        btnRegister.setOnClickListener(new View.OnClickListener() {
            @Override
            public void onClick(View view) {
                validation();
            }
        });
    }
    public void validation() {
        if (inputFname.getText().toString().equals("") || inputLname.getText().toString().equals("") || inputEmail.getText().toString().equals("")
                || inputPassword.getText().toString().equals("") || inputCpassword.getText().toString().equals("") || inputCellno.getText().toString().equals("")) {
            Toast.makeText(getApplicationContext(), "Fill Empty Fields",
                    Toast.LENGTH_SHORT).show();
        } else {
            new phpconnect().execute();
        }
    }
    class phpconnect extends AsyncTask<String, String, String> {
        @Override
        protected void onPreExecute() {
            super.onPreExecute();
            pDialog = new ProgressDialog(Register.this);
            pDialog.setMessage("Please Wait ...");
            pDialog.setIndeterminate(false);
            pDialog.setCancelable(true);
            pDialog.show();
        }
        @Override
        protected String doInBackground(String... params) {

            ArrayList<NameValuePair> postParameters = new ArrayList<NameValuePair>();
            postParameters.add(new BasicNameValuePair("fname", inputFname
                    .getText().toString()));
            postParameters.add(new BasicNameValuePair("lname", inputLname
                    .getText().toString()));
            postParameters.add(new BasicNameValuePair("eadd", inputEmail
                    .getText().toString()));
            postParameters.add(new BasicNameValuePair("password", inputPassword
                    .getText().toString()));
            postParameters.add(new BasicNameValuePair("cpassword", inputCpassword
                    .getText().toString()));
            postParameters.add(new BasicNameValuePair("cellno", inputCellno
                    .getText().toString()));
            // Passing Parameter to the php web service for authentication
            // String valid = "1";
            String response = null;
            try {
                response = CustomHttpClient
                        .executeHttpPost(
                                "http://10.0.2.2/TheCalling/index.php",
                                postParameters); // Enter Your remote PHP,ASP,
                                                    // Servlet
                                                    // file link
                // error.setText(res);
            } catch (Exception e) {
                return "0";
            }
            return response;
        }
        /**
         * After completing background task Dismiss the progress dialog
         * **/
        protected void onPostExecute(String result) {
            // dismiss the dialog once done
            pDialog.dismiss();
            String res = result.toString();
            String num = "1";
            res = res.trim();
            res = res.replaceAll("\\s+", "");
            if (res.equals(num)) {
                // Display Toast
                Toast.makeText(getApplicationContext(),
                        "Correct Username or Password", Toast.LENGTH_SHORT)
                        .show();
                Intent i = new Intent(Register.this, MainMenu.class);
                startActivity(i);
            } else {
                Toast.makeText(getApplicationContext(),
                        "Sorry!! Incorrect Username or Password",
                        Toast.LENGTH_SHORT).show();
            }
        }
    }
} 
```

**

单击我的按钮后会发生此错误，如果您想要我的 php 代码，这里是：

**

```
<?php
include("db_config.php");
$fname=($_POST['fname']);
$mname=($_POST['mname']);
$lname=($_POST['lname']);
$eadd=($_POST['eadd']);
$password=($_POST['password']);
$cpassword=($_POST['cpassword']);
$cellno=($_POST['cellno']);
$sql="INSERT INTO `users` SET `fname`='{$_POST['fname']}', `lname`='{$_POST['lname']}', `eadd`='{$_POST['eadd']}', `password`='{$_POST['password']}', `cpassword`='{$_POST['cpassword']}', `cellno`='{$_POST['cellno']}'";
$result=mysql_query($sql);
$row=mysql_fetch_array($result);
$count=mysql_num_rows($result);
if($count==1)
    {
    echo "1";
    //(If result found send 1 to android)
    }
else
    {
    echo "0";
    //(If result not found send o to android)
    }
?> 
```

**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T01:56:42.420

A`NullPointerException`表示您尝试访问 的方法或属性`null`。

根据堆栈跟踪，原因如下：

```
if (
    inputFname.getText().toString().equals("")
   || inputLname.getText().toString().equals("") 
   || inputEmail.getText().toString().equals("")
   || inputPassword.getText().toString().equals("") 
   || inputCpassword.getText().toString().equals("") 
   || inputCellno.getText().toString().equals("")) {
    //Some other code
} 
```

里面的东西是空的，可能是一个（或一些）或输入变量。值得花一些时间打印出这些值是什么，直到找到导致它的空值。

# jquery - 使用 jquery modal box 和 ajax 显示单元格表中的值

> ID：14574205
> 
> 赞同：1
> 
> 时间：2013-01-29T01:27:16.947
> 
> 标签：jquery, html, jquery-ui, grails, modal-dialog

我正在尝试通过使用 Jquery 模式对话框将值传递给控制器​​来执行 UPDATE 功能。但是，我在 HTML 表格框中显示我的值，有没有办法将表格行中的值传递到模式框？当我单击该行时，我想以某种方式执行此操作，值将显示在模态中。我也不确定如何将 jquery 对话框链接到表行。

这是桌子

![在此处输入图像描述](../Images/b8f93057eb90af7f4c5cfa4c4c023bda.png)

这些是它的代码

```
<form id="searchtable" >
               <%--List Table--%>
               <table border = 1 cellpadding = 2  cellspacing = 2 id="normal">
              <tr>
                 <th width=9.7%>ID</th>
                 <th width=24%>Username</th>     
                 <th width=13%>Account ID</th>
                 <th width=29%>Email</th>
                 <th width=10%>User ID</th>
                 <th width=12%>Device ID</th>         
              </tr>
         </table>

              <div style="height: 250px; overflow: scroll; width: 100%;">
              <table id="normal">
              <g:each in = "${result}">
              <tr>
              <td width=10%>${it.ID}</td>
              <td width=25%>${it.Username}</td>
              <td width=13.5%>${it.account_id}</td>
              <td width=30.5%>${it.email}</td>
              <td width=10.5%>${it.user_id}</td>
              <td width=13%>${it.device_id }</td>
              </tr>
              </g:each>

              </table>
         </div>        
    </form> 
```

这是应该如何显示的对话框的示例

![在此处输入图像描述](../Images/e133d8d9a2ecbb20dc7e903355d7bf11.png)

非常感谢你们。如果需要，我可以为你们提供代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T02:30:05.593

使用 .btn 类到您的 tr 并将您的用户名值附在

```
<span class="username">${it.username}</span> 
```

你的jQuery应该

```
$(document).ready(function() {
  $(".btn tr").live("click", function{
    var name = $(this).find(".username").text();
    ...put your code here that will update your table...
  });
}); 
```

如果您单击 tr，它将找到其具有“用户名”类的子项，并为您获取数据。

# numpy - ifft(fft(audio)) 只是噪音

> ID：14574208
> 
> 赞同：5
> 
> 时间：2013-01-29T01:27:42.093
> 
> 标签：numpy, fft, ifft

无论我只是嵌套它们（`iff(fft(audio))`）还是逐个窗口尝试（`window`音频，执行`fft`，执行`ifft`，然后反转窗口，用 eps 替换零，然后将样本合并回来（`abs`在管道中到处尝试））我只得到噪音。

我知道这与无限精度算术、无限多样本等`ifft`唯一相反`fft`（对吗？）我正在使用 64 位浮点和 44kHZ 采样率。但是，我希望至少能够听到原始音频。

我的错误是实际的还是理论上的？我可以给代码，如果它是一个错误。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-29T03:07:09.040

基于 JoeKington 的评论，我已经下载[了这个文件](http://www.villagegeek.com/downloads/webwavs/wahoo.wav)，并尝试了以下

```
>>> import scipy.io.wavfile
>>> rate, data = scipy.io.wavfile.read('wahoo.wav')
>>> data
array([134, 134, 134, ..., 124, 124, 124], dtype=uint8)
>>> data_bis = np.fft.ifft(np.fft.fft(data))
>>> data_bis
array([ 134\. +6.68519934e-14j,  134\. -4.57982480e-14j,
        134\. -1.78967708e-14j, ...,  124\. -2.09835513e-14j,
        124\. -1.61750469e-14j,  124\. -2.14867343e-14j])
>>> data_bis = data_bis.astype('uint8')
C:\Users\Jaime y Eva\Desktop\stack_exchange.py:1: ComplexWarning: Casting complex values to real discards the imaginary part
  # -*- coding: utf-8 -*-
>>> data_bis
array([134, 133, 133, ..., 123, 123, 123], dtype=uint8)
>>> scipy.io.wavfile.write('wahoo_bis.wav', rate, data_bis) 
```

结果文件的播放方式与原始文件完全相同。

因此，将返回的复数值转换为实数只是问题的一半（并且您可能希望使用`np.abs`而不是`data.real`，正如上面的代码隐式所做的那样），然后您还需要将浮点数重新转换`uint`为适当位的 s -深度。

# python - 如何用python忽略“FF FF FF FF”

> ID：14574210
> 
> 赞同：0
> 
> 时间：2013-01-29T01:27:48.147
> 
> 标签：python

我有一个大约 60 kb 的文件，我试图只提取数据。该文件中有很多“FF FF FF FF”，我正在尝试提取所有内容，但“FF FF FF FF”是一个示例：

```
46 0D 89 2E 16 FC 1E E6 10 C1 6D 4E 1B 74 5F 1F 
81 07 E2 E7 17 14 77 D4 EA AC BC 20 EA 98 27 FF 
FF FF FF FF FF FF FF FF FF FF FF FF FF FF FF FF 
FF FF FF FF FF FF FF FF FF FF FF FF FF FF FF FF 
```

这是我用来获取它的代码：

```
infile = open("file.bin", "rb") 
    new_pos = int("0xFC0000", 16)
    infile.seek(new_pos, 0)
    chunk = int("0x40000", 16)
    data = infile.read(chunk)
    with open("processed_file.bin", "wb") as outfile:
        outfile.write(data) 
```

它将读取文件并将其保存为“已处理的 file.bin”，但其中包含所有这些“FF FF”。有FF的实例，我需要它找到“FF FF FF FF”并将其从文件中删除，然后再将其保存为已处理的file.bin

任何意见将不胜感激。

编辑：为了进一步解释我的意思，这个十六进制的末尾有 FF，

```
81 07 E2 E7 17 14 77 D4 EA AC BC 20 EA 98 27 FF 
```

我需要在最后保留那个 FF，但删除任何 FF FF 或 FF FF FF FF 的实例。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T01:43:09.850

首先，删除 every`FF FF`显然会删除 every `FF FF FF FF`，因此您无需担心该部分。

如果您只想删除对齐`FF FF`的 s，显而易见的做法是将其分组为 2 字节的块。例如，使用`grouper`标准库的[itertools recipes](http://docs.python.org/2/library/itertools.html#recipes)：

```
data = infile.read(chunk)
data_words = grouper(2, data)
data_words_minus_ffff = (word for word in data_words if word != ('\xFF', '\xFF'))
out_data = flatten(data_words_minus_ffff)
with open("processed_file.bin", "wb") as outfile:
    outfile.write(''.join(out_data)) 
```

显然你可以写得更紧凑；为了清楚起见，我只是这样做（因此您可以尝试`list(…)`在每个步骤中打印出来以帮助理解它，以防不明显）。

但是，如果您不关心对齐，甚至想要删除奇数的 运行`FF`，只要它们长于 1 怎么办？好吧，那么您想将其分组为运行，并丢弃任何超过 1 的运行。您也可以这样做`itertools`：

```
data = infile.read(chunk)
groups = itertools.groupby(data, key=lambda x: x != '\xff')
groups_listified = ((key, list(group)) for key, group in groups)
groups_without_ff_runs = (group for key, group in groups_listified if key or len(group) > 1)
out_data = flatten(groups_without_ff_runs)
with open("processed_file.bin", "wb") as outfile:
    outfile.write(''.join(out_data)) 
```

这个有点难解释，但我还是把它写成一系列单独的步骤，所以你可以`print list(…)`在每个步骤之后看看它在做什么。

该`if key or len(group) > 1`位表示它是非 FF 字节的运行，或者是超过 1 个字节的运行。因此，如果您想将其更改为仅保留 2 字节的 FF 运行，而不是更长的运行，您可以`len(group) > 1`将`len(group) == 2`. 如果您只想保持均匀长度的运行，请使用`len(group) % 2 == 0`. 等等。任何你能描述的情况，你都可以放在那里。

或者，为了多样化，让我们明确地这样做：

```
data = infile.read(chunk)
run = 0
out_data = []
for byte in data:
    if byte == '\xFF':
        run += 1
    else:
        if run != 1:
            out_data.append('\xFF' * run)
        run = 0
        out_data.append(byte)
with open("processed_file.bin", "wb") as outfile:
    outfile.write(''.join(out_data)) 
```

同样，我们保持所有运行`FF`都超过 1 个字节。如果您想保留所有恰好为 2 个字节的运行，只需更改`run != 1`为`run == 2`. 等等。

# ssis - 如何在 ssis 中读取 csv 文件的动态文件命名？

> ID：14574212
> 
> 赞同：1
> 
> 时间：2013-01-29T01:28:09.870
> 
> 标签：ssis

嗨，我如何读取具有动态文件名的文件？在 ssis 中用于将 csv 数据导入我的数据库。

csv 文件命名约定可以是：File-ddmmyyyyhhmmss.txt

有人可以建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T11:11:50.430

将平面文件动态加载到目标的步骤。

*   使用`Foreach loop container`
*   在 Collection 选项卡中，选择 Enumerator as`Foreach File Enumerator`并按如下方式配置。

文件夹：源文件的位置

文件：`File-*.txt`[因为您的文件命名类似于 File-ddmmyyyyhhmmss.txt]

检索文件名：选择`Fully qualified Name`[这会带来文件的整个位置]

![在此处输入图像描述](../Images/f94c23076c4368b1882cd4a2f4982987.png)

*   在`Variable Mapping`中，创建一个变量来存储`Full file path` 和配置，如屏幕截图所示。

![在此处输入图像描述](../Images/7ff82a1a719cf70c3f0b1c1890d93d32.png)

*   创建`Flat file connection`使用示例文件。
*   选择一个平面文件并转到`properties`. 找到`expression property` 和`map the variable to the connection string`，如下面的屏幕截图所示。 ![在此处输入图像描述](../Images/51fe80b175eb260fba8b0f0cf50994ce.png)

> 重要的提示：

如果要在加载到目标表之前验证文件名和文件名的存在。使用里面的脚本组件`For each loop container`和验证。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T09:12:16.703

这是一步一步的指南

1.  使用`Foreach Loop Container`(File Enumerator type) ，将文件掩码设置为`File-??????????????.txt`
2.  映射字符串变量以捕获匹配文件。
3.  `Script Task`在此容器内添加一个以解析字符串变量以匹配实际的文件命名约定（提示：使用正则表达式）。任何成功的匹配都将起到过滤`Foreach Loop Container`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-08-16T04:01:25.453

请参阅 Microsoft 的此学习系列：

[https://docs.microsoft.com/en-us/sql/integration-services/lesson-2-adding-looping-with-ssis?view=sql-server-2017](https://docs.microsoft.com/en-us/sql/integration-services/lesson-2-adding-looping-with-ssis?view=sql-server-2017)

# git - 当我使用 GIT 进行版本控制时，如何忽略 c 代码的注释？

> ID：14574213
> 
> 赞同：1
> 
> 时间：2013-01-29T01:28:10.990
> 
> 标签：git

我正在为我们的项目建立 Git 环境。问题是，我们的项目包含生成的 SW 包（c 文件），其中包含注释中的生成时间信息。因此，每次我们生成 SW 包时，即使没有有效的更改，每个文件的内容也会更改。所以我不想跟踪 c 文件中被注释掉的部分。有什么办法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T07:01:48.150

正常的解决方案是将 sw/ 目录添加到 .gitignore 文件中忽略的元素列表中：

```
sw/ 
```

但是，如果由于结帐时的时间限制而*需要*
这些生成的文件，那么您可以首先将它们设为“assume-unchanged”： 参见“ [git update-index --assume-unchanged on directory](https://stackoverflow.com/questions/12288212/git-update-index-assume-unchanged-on-directory) ”。这样，即使更改
，这些文件也不会显示在 中；`git status`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T07:08:36.467

如果您真的想避免每个签出 repo 的人的生成时间过长，另一种选择是从生成的文件中删除注释，甚至只删除时间戳注释以避免虚假更改。当然，这有一个问题是源和生成的版本可能会变得不同步。

如果评论总是一行，并遵循一个简单的模式，很容易正则表达式（这似乎很可能），这不应该太难用`grep`or`sed`或什么的。

如果没有，您应该可以删除所有评论而不用更改任何其他内容[，`gcc -fpreprocessed -dD -E file.c`](https://stackoverflow.com/a/2394040/344821)尽管该页面上有一些其他答案说这并不总是有效并提供了一些其他选项。

# c# - 读取值并分配给 While 循环

> ID：14574218
> 
> 赞同：-2
> 
> 时间：2013-01-29T01:28:32.003
> 
> 标签：c#, wpf, textbox, while-loop, radio-button

目前我正在开发一个程序`WPF`，在显示屏上用户可以选择 2 个选项：

1.  全部 ( `RadiobtnAll`)
2.  数字 ( `RadiobtnText`)+( `TextboxNumber`)

这两个值应分配给“X”变量。

然后我将有一个`while`循环运行这两个条件的基础：

```
 for (int i = 1; i <= x ; i++)
  {
     //Do Stuff
  } 
```

我不确定我应该如何做这些，因为我完全是新手`WPF`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T01:34:09.143

似乎您正在编写此代码以使 while 循环不断运行以检查是否已分配 x。这不是您在 WPF 中的做法，而是您在视频游戏中的做法。

您要查看的是事件，这是 Microsoft 提供的一个很好的[教程](http://msdn.microsoft.com/en-gb/library/windows/apps/xaml/hh465336.aspx)，应该能够帮助您。

编辑：线程代码；

```
private int _x = 0;
public Main()
{
    InitializeComponent();

    var waitThread = new Thread(() =>
    {
        for (var i = 1; i <= _x; i++)
        {
            //Do Logic
        }
    });
    waitThread.Start();
} 
```

# c - 字符 * 与字符 []

> ID：14574219
> 
> 赞同：4
> 
> 时间：2013-01-29T01:28:40.180
> 
> 标签：c, char

> **可能重复：**
> [C 程序字符串文字](https://stackoverflow.com/questions/7774770/c-program-string-literals)
> [总线错误：10 错误](https://stackoverflow.com/questions/8716714/bus-error-10-error)

我想为 C 使用 Xcode 4.5.2

```
char * string = "abc";
string[0] = 'f'; 
```

和

```
char string[4] = "abc";
string[0] = 'f'; 
```

是等价的。但是第一行给了我一个错误：

> EXC_BAD_ACCESS（代码 = 2，地址 = 0x100 ...）

第二行没有给我任何错误。我认为这些在直 C 中是等价的。这是怎么回事？

```
int main (void) {
    char * string = "abc";   
    string[0] = 'f';
} // main 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-29T01:33:43.957

他们不一样。

```
char* s = "bla" 
```

上面有 s 指向存储字符串文字的内存位置。由于这是一个只读存储器（字面量是常量），因此写入它会失败。

```
char s[4] = "bla"; 
```

这将用文字的内容填充缓冲区`s`（在堆栈上分配）。您可以写入此缓冲区，因为它不是 const 内存。

第一种语法被认为是合法的并且不会引发与 const 正确性相关的错误的原因与保持与旧版本 c 的向后兼容性有关。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-29T01:30:15.167

这些与您发现的不同。第一个是未定义的行为，因为字符串常量是常量（即`const char * const`）。它们可能位于只读内存中（访问不正确，地址 0x100 是一个很好的线索），您正试图通过第一个`string`（即 a `char *`）对其进行修改。第二个`string`实际上是一个数组，`char`其中包含可以修改的存储（在本例中为堆栈）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-29T01:32:52.470

第一个指针指向一个受保护的内存，程序中的字符串在该内存中被加载。

第二个指针指向一个新分配的 4 个字符的字段。

因此，写入第一个字段会报告对内存的非法访问。

# r - 具有颜色渐变的 R 图

> ID：14574223
> 
> 赞同：3
> 
> 时间：2013-01-29T01:28:59.553
> 
> 标签：r, 3d

下面是使用 R 函数 persp3d 并指定颜色的 3D 曲线。

```
library(rgl)

y = seq(-5,25,by=0.1)
x = seq(5,20,by=0.2)

NAs <- rep(NA, length(x)*length(y))
z <- matrix(NAs, length(x), byrow = T)
for(i in seq(1,length(x))) {
    for(j in seq(1,length(y))) {
        val = x[i] * y[j]
        z[i,j] = val
        if(z[i,j] < 0.02) {
            z[i,j] = NA
        }

    }
}

col <- rainbow(length(x))[rank(x)]

open3d()
persp3d(x,y,z,color=col,xlim=c(5,20),ylim=c(5,10),axes=T,box=F,xlab="X Axis",ylab="Y Axis",zlab="Z Axis") 
```

它产生了这个图像：

![在此处输入图像描述](../Images/dde4a30b859bee2789c53d537ff84efc.png)

在当前版本中，对于 x 值为 15，无论 z 值如何，颜色都是蓝色。但我希望高 z 值是深蓝色，而低 z 值是浅蓝色，如果这有意义的话。我怎样才能做这样的事情，这样颜色不仅可以区分 x 值，还可以区分 z 值？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-29T03:53:11.370

为此，您将不得不使用 HSV 格式而不是 RGB 格式的颜色。我认为这样更容易。

请参阅下面的示例代码。

```
library(rgl)

y = seq(-5,25,by=0.1)
x = seq(5,20,by=0.2)

NAs <- rep(NA, length(x)*length(y))
z <- matrix(NAs, length(x), byrow = T)
for(i in seq(1,length(x))) {
  for(j in seq(1,length(y))) {
    val = x[i] * y[j]
    z[i,j] = val
    if(z[i,j] < 0.02) {
      z[i,j] = NA
    }

  }
} 
```

为 x 的每个值创建唯一的颜色。

```
col <- rainbow(length(x))[rank(x)] 
```

`col` `length(y)`通过重复时间创建颜色网格

```
col2 <- matrix(rep(col,length(y)), length(x))
for(k in 1:nrow(z)) {

  row <- z[k,]
  rowCol <- col2[k,]  
  rowRGB <- col2rgb(rowCol) #convert hex colors to RGB values
  rowHSV <- rgb2hsv(rowRGB) #convert RGB values to HSV values

  row[is.na(row)] <- 0
  v <- scale(row,center=min(row), scale=max(row)-min(row)) # scale z values to 0-1

  rowHSV['s',] <- v #update s or v values by our scaled values above
  # rowHSV['v',] <- v  # try changing either saturation or value i.e. either s or v

  newRowCol <- hsv(rowHSV['h',], rowHSV['s',], rowHSV['v', ]) #convert back to hex color codes
  col2[k,] <- newRowCol #Replace back in original color grid
}

open3d()
persp3d(x,y,z,color=col2,xlim=c(5,20),ylim=c(5,10),axes=T,box=F,xlab="X Axis",ylab="Y Axis",zlab="Z Axis") 
```

这应该给出以下内容。您可以调整饱和度或颜色值，以获得所需的阴影“亮度”或“暗度”。

![在此处输入图像描述](../Images/14bf915a531af06bd62cebe979eaf76d.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T01:35:18.857

您只需要更改一行：

```
library(rgl)

y = seq(-5,25,by=0.1)
x = seq(5,20,by=0.2)

NAs <- rep(NA, length(x)*length(y))
z <- matrix(NAs, length(x), byrow = T)
for(i in seq(1,length(x))) {
    for(j in seq(1,length(y))) {
        val = x[i] * y[j]
        z[i,j] = val
        if(z[i,j] < 0.02) {
            z[i,j] = NA
        }
    }
}

col <- rainbow(length(z))[rank(z)] # This line changed

open3d()
persp3d(x,y,z,color=col,xlim=c(5,20),ylim=c(5,10),axes=T,box=F,xlab="X Axis",ylab="Y Axis",zlab="Z Axis") 
```

# sitecore - Sitecore WFFM - 创建新的保存操作编辑器

> ID：14574230
> 
> 赞同：3
> 
> 时间：2013-01-29T01:29:51.297
> 
> 标签：sitecore, sitecore6, web-forms-for-marketers

我已经为营销人员的 WebForms 创建了一个自定义保存操作，并且已经对其进行了一些设置。保存操作设置为使用 control:Forms.MappingFields 作为控件，查询字符串为“Fields=EmailAddress|EmailAddress,Name|Name”

这对于指定哪些表单字段是电子邮件地址和名称非常有用，稍后将在 Campaign Monitor 时事通讯订阅中使用它们。**我现在要做的是为内容创建者提供指定活动监视器列表 ID（它是一个字符串）的能力，并允许该字符串对于使用此保存操作的每个表单都是不同的。**

我知道如何做到这一点的唯一方法是修改保存操作的编辑器。

使用[这篇文章](http://adeneys.wordpress.com/2012/06/29/custom-wfm-action-settings-ui/)，我开始制作一个新的编辑器 UI。但是，我有两个问题。

1.  我创建了一个新的 .cs 文件并使用了文章中提供的代码，但出现错误：*“System.Configuration.Provider.ProviderCollection”类型是在未引用的程序集中定义的。（第 48 行。）*我尝试添加一个 using for System.Configuration 但这样做并不能解决问题。

2.  更大的问题是我不知道如何处理文章提供的 XML。我[在 SDN 上找到了一篇关于创建 Sheer UI](http://sdn.sitecore.net/Articles/XML%20Sheer%20UI/My%20first%20XML%20application.aspx)的文章，但是这篇文章已经过时了。它引导我阅读[一篇关于 XML Application Creation 的文章](http://sdn.sitecore.net/SDN5/Articles/Customizing%20Sitecore%20Client/Creating%20XML%20Application.aspx)，但由于我使用的是 Sitecore 6.5，这也已经过时了。对于 Sitecore 6.5，屏幕截图显然不准确，并且上下文菜单中的*New XML Layout*选项不可用。

因此，我希望找到一个为营销人员保存操作的 WebForms 创建新编辑器的示例，该编辑器已针对 WFFM 2.3 和 Sitecore 6.5 进行了更新，它尚未假定我知道如何创建 XML 应用程序布局。要么是这样，要么是让内容创建者指定一个不同的字符串的更简单的方法。

谢谢你。

# android - Google Maps v2 的可变 API 密钥

> ID：14574231
> 
> 赞同：2
> 
> 时间：2013-01-29T01:29:55.420
> 
> 标签：android, google-maps, google-maps-android-api-2

曾几何时，在一片神奇的土地上，您可以通过将旧的 API 密钥`MapView`添加到它的构造函数中来设置它。这很有帮助，因为我可以有一些类似的东西：

```
mMapView = new MapView(getActivity(), Environment.GOOGLE_MAPS_API_KEY); 
```

这使我可以拥有一个可以根据代码是否为生产环境来更改的密钥（通过换出`Environment`其中包含许多其他可爱的东西）。

查看新的 Google maps API 文档、代码和相关帖子，似乎没有办法做到这一点或类似的事情。我确实有一个解决方法的想法，它要求我制作一个`strings.xml`文件以供`AndroidManifest`我也像我一样交换的文件读取，`Environment`但我更愿意只有一个“配置文件”而不是两个。

**所以我的问题是：**有没有办法以其他方式为这些新地图设置 API 密钥`AndroidManifest`？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-29T01:40:16.253

不，那里没有。但是，生产或不生产不同密钥的问题以另一种方式解决。通过[Google API 控制台](https://code.google.com/apis/console/)，您可以根据需要将任意数量的签名密钥 + 包名称对与相同的 API 密钥相关联。例如，您可以将调试和签名密钥注册到同一个 Map API 密钥，并且它们现在都使用相同的 API 密钥。

在`Key for Android apps`您的控制台中，单击右侧栏中的链接`Edit allowed Android apps...`并添加您的密钥（加上包名称）。

# delphi - 使用 Indy TidHttp 组件通过 sendgrid 发送邮件文件附件

> ID：14574235
> 
> 赞同：4
> 
> 时间：2013-01-29T01:30:24.733
> 
> 标签：delphi, indy, sendgrid

我正在使用 Indy **TIdHTTP**组件，并且能够使用以下函数通过 sendgrid API 成功发送电子邮件。sendgrid api 文档可以在[这里](http://sendgrid.com/docs/API_Reference/Web_API/mail.html)找到。

现在我的任务是包括文件附件。在 API 文档中它指出：**文件内容必须是多部分 HTTP POST 的一部分**

我试图修改我的函数以包含**TIdMultipartFormDataStream**，但没有成功。

我应该如何修改代码以支持文件附件？

```
procedure SendGridEmailProc;
var
  IdHTTP1: TIdHTTP;
  IdSSLIOHandlerSocket1: TIdSSLIOHandlerSocketOpenSSL;
  mString: string;
  mParams: TStringList;
  i: Integer;
begin
  try
    mParams := TStringList.Create;
    IdHTTP1 := TIdHTTP.create(nil);
    IdSSLIOHandlerSocket1 := TIdSSLIOHandlerSocketOpenSSL.create(nil);
    with IdSSLIOHandlerSocket1 do begin
      SSLOptions.Method := sslvSSLv3;
      SSLOptions.Mode :=  sslmUnassigned;
      SSLOptions.VerifyMode := [];
      SSLOptions.VerifyDepth := 2;
    end;
    with IdHTTP1 do begin
      IOHandler := IdSSLIOHandlerSocket1;
    end;

    mParams.Add('api_user=xxxxx');
    mParams.Add('api_key=xxxxx');
    mParams.Add('to=xxxxxx');
    mParams.Add('from=xxxxx');

    mParams.Add('subject=test:'+datetimetostr(now));

    mParams.Add('text=this is a test');

    IdHTTP1.Post('https://sendgrid.com/api/mail.send.xml',mParams);

  finally
    mParams.Free;
    idhttp1.free;
    IdSSLIOHandlerSocket1.Free;
  end;
end; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-29T01:54:58.017

尝试这样做（注意，它未经测试）：

```
uses
  IdException, IdHTTP, IdSSLOpenSSL, IdMultipartFormData;

procedure SendGridEmailProc;
var
  HTTPClient: TIdHTTP;
  Parameters: TIdMultiPartFormDataStream;
  SSLHandler: TIdSSLIOHandlerSocketOpenSSL;
begin
  HTTPClient := TIdHTTP.Create(nil);
  try
    SSLHandler := TIdSSLIOHandlerSocketOpenSSL.Create(nil);
    try
      SSLHandler.SSLOptions.Method := sslvSSLv3;
      SSLHandler.SSLOptions.Mode := sslmUnassigned;
      SSLHandler.SSLOptions.VerifyMode := [];
      SSLHandler.SSLOptions.VerifyDepth := 2;
      HTTPClient.IOHandler := SSLHandler;

      Parameters := TIdMultiPartFormDataStream.Create;
      try
        Parameters.AddFormField('api_user', 'xxxxx');
        Parameters.AddFormField('api_key', 'xxxxx');
        Parameters.AddFormField('to', 'xxxxxx');
        Parameters.AddFormField('from', 'xxxxx');
        Parameters.AddFormField('subject', 'test:' + DateTimeToStr(Now));
        Parameters.AddFormField('text', 'this is a test');

        // note, that you need to use the same file name for the files[]
        // identifier and that you should explicitly specify the content 
        // type for a file field to meet the HTTP dump shown in the help
        Parameters.AddFile('files[file.jpg]', 'c:\file.jpg', 
          'application/octet-stream');

        try
          HTTPClient.Post('https://sendgrid.com/api/mail.send.xml', 
            Parameters);
        except
          on E: EIdException do
            ShowMessage(E.ClassName + ': ' + E.Message);
        end;
      finally
        Parameters.Free;
      end;
    finally
      SSLHandler.Free;
    end;
  finally
    HTTPClient.free;
  end;
end; 
```

# javascript - 谷歌地图商店定位器多个类别

> ID：14574236
> 
> 赞同：0
> 
> 时间：2013-01-29T01:30:29.583
> 
> 标签：javascript, xml, google-maps, google-maps-api-3

我正在创建一个商店定位器（使用 Google Maps API v3），其中有 3 个复选框将标记过滤到类别中。我让它们与 if 语句分开工作，但无法弄清楚如何让它们一起工作。例如：如果我取消选中 Bar 但它也是一个 BottleShop（Bottleshop 已选中），则标记仍应显示在地图上。标记数据是从 XML 文件中提取的。三个过滤器类别是酒吧、瓶装商店和在线零售商。每个标记可以属于多个过滤器。例如：它可以是一家酒吧和酒瓶店。

我的 XML 示例

```
<marker name="John's Pizzeria" bar="TRUE" bottleshop="TRUE" onlineretailer="FALSE" address="260 W 44th St, New York, NY" lat="40.758072" lng="-73.987740" type=""/> 
```

我的 HTML

```
<div id="location"></div>
<div id="map" class="map" style="height:400px; width:600px;"></div>
<input id="addressInput" value="Enter location" />
<input id="radiusSelect" value="25" />
<input type="button" id="search" value="Search"/>
<form action="#">
    Bar: <input type="checkbox" id="bar" onclick="boxclick(this,'bar')" checked/>
    Bottle Shop: <input type="checkbox" id="bottleshop" onclick="boxclick(this,'bottleshop')" checked/>
    Online Stockist: <input type="checkbox" id="onlineretailer" onclick="boxclick(this,'onlineretailer')" checked/>
</form>  
<select id="locationSelect" class="span12"></select> 
```

我的 JavaScript

```
var map  = null;
var markers = []; 
var infoWindow;
var True = "TRUE";
var catBar = [];

jQuery(document).ready(function($){
    //Load Google Maps
    load();
    //When user clicks search, fire the search locations function
    $('#search').click(function() {
      searchLocations();
    });
});  

//On page load Create a google map in #map
//Set default cordinates & Map style to roadmap
function load() {

  var location = "Showing default location for map.";
  var locationSelect;
  //Set default Lat Long for when map loads
  var latlng = new google.maps.LatLng(43.907787,-79.359741);
  // If users location is found then overwrite latlng variable and use this location
  if (google.loader.ClientLocation) {
    zoom = 13;
    latlng = new google.maps.LatLng(google.loader.ClientLocation.latitude, google.loader.ClientLocation.longitude);
    location = "Showing IP-based location: <b>" + getFormattedLocation() + "</b>";
    address = getFormattedLocation();
    // Add users location to search input and load local stores
    document.getElementById('addressInput').value=address;
  }
  var myOptions = {
    zoom: 13,
    center: latlng,
    mapTypeControl: true,
    mapTypeControlOptions: {style: google.maps.MapTypeControlStyle.DROPDOWN_MENU},
    navigationControl: true,
    mapTypeId: google.maps.MapTypeId.ROADMAP
  }
  map = new google.maps.Map(document.getElementById("map"), myOptions); 
      document.getElementById("location").innerHTML = location;
  infoWindow = new google.maps.InfoWindow({ 
    size: new google.maps.Size(150,50)
  });
  locationSelect = document.getElementById("locationSelect");
  locationSelect.onchange = function() {
    var markerNum = locationSelect.options[locationSelect.selectedIndex].value;
    if (markerNum != "none") {
      google.maps.event.trigger(markers[markerNum], 'click');
    }
  };
  searchLocations();
}
//Format the location
function getFormattedLocation() {
  if (google.loader.ClientLocation.address.country_code == "US" &&
    google.loader.ClientLocation.address.region) {
    return google.loader.ClientLocation.address.city + ", " 
      + google.loader.ClientLocation.address.region.toUpperCase();
    } else {
      return  google.loader.ClientLocation.address.city + ", "
      + google.loader.ClientLocation.address.country_code;
  }
}
//Search for LAT/LNG of a place using its address using Google Maps Geocoder
function searchLocations() {
  var address = document.getElementById("addressInput").value;

  var geocoder = new google.maps.Geocoder();
  geocoder.geocode({address: address}, function(results, status) {
  if (status == google.maps.GeocoderStatus.OK) {
    //console.log('search worked');
    //console.log(results);
    searchLocationsNear(results[0].geometry.location);
    } else {
      alert(address + ' not found');
    }
  });
}

//Clears Previous location, in info box
function clearLocations() {
 infoWindow.close();
 for (var i = 0; i < markers.length; i++) {
   markers[i].setMap(null);
 }
 markers.length = 0;
 locationSelect.innerHTML = "";
 var option = document.createElement("option");
 option.value = "none";
 option.innerHTML = "See all results:";
 locationSelect.appendChild(option);
}

//Look for locations near by and loop through all data getting lat & lng of each marker
function searchLocationsNear(center) {
  clearLocations();
  searchLoc = center;
  var radius = document.getElementById('radiusSelect').value;
  //console.log(radius);
  var searchUrl = 'http://localhost:8888/starward/wp-content/themes/starward/map_request.php?lat=' + center.lat() + '&lng=' + center.lng() + '&radius=' + radius;
  downloadUrl(searchUrl, function(data) {
  var xml = parseXml(data);
  var markerNodes = xml.documentElement.getElementsByTagName("marker");
  var bounds = new google.maps.LatLngBounds();
  // alert(markerNodes.length);
  for (var i = 0; i < markerNodes.length; i++) {
    var name = markerNodes[i].getAttribute("name");
    var barValue = markerNodes[i].getAttribute("bar");
    var bottleshopValue = markerNodes[i].getAttribute("bottleshop");
    var onlineRetailerValue = markerNodes[i].getAttribute("onlineretailer");
    var address = markerNodes[i].getAttribute("address");
    var distance = parseFloat(markerNodes[i].getAttribute("distance"));
    var zoom = 13; //Infowindow Zoom level
    var latlng = new google.maps.LatLng(
    parseFloat(markerNodes[i].getAttribute("lat")),
    parseFloat(markerNodes[i].getAttribute("lng")));
    if (!distance) distance = google.maps.geometry.spherical.computeDistanceBetween(latlng, searchLoc);
    if (!address) address = latlng.toUrlValue(6);
    if (!name) name = "marker "+i;
    createOption(name, distance, i);
    bounds.extend(latlng);
    //Make sure paremeters are in correct order or values will be mixed up
    createMarker(latlng, name, address ,zoom, barValue, bottleshopValue, onlineRetailerValue);
  }
  //map.fitBounds(bounds);
  map.setZoom(13);
  map.setCenter(center);
  locationSelect.style.visibility = "visible";
  locationSelect.onchange = function() {
    var markerNum = locationSelect.options[locationSelect.selectedIndex].value;
    google.maps.event.trigger(markers[markerNum], 'click');
   };
 });
}

//Creates marker on the map
//Adds event for user when they click address info pops up
function createMarker(latlng, name, address, zoom, barValue, bottleshopValue, onlineRetailerValue) {
  // add the zoom links
  var html =  "<b>" + name + "</b> <br/>" + address 
  html += '<br><a  href="javascript: map.setCenter(new google.maps.LatLng('+latlng.toUrlValue(6)+'));map.setZoom('+zoom+');">Zoom To</a>';
  html += ' <a  href="javascript:map.setCenter(new google.maps.LatLng('+latlng.toUrlValue(6)+')); map.setZoom(parseInt(map.getZoom())+1);">[+]</a>';
  html += ' <a  href="javascript:map.setCenter(new google.maps.LatLng('+latlng.toUrlValue(6)+')); map.setZoom(parseInt(map.getZoom())-1);">[-]</a>';
  var marker = new google.maps.Marker({
    position: latlng,
    map: map,
  });
  google.maps.event.addListener(marker, 'click', function() {
    infoWindow.setContent(html);
    infoWindow.open(map, marker);
  });
  marker.barValue = barValue;
  marker.bottleshopValue = bottleshopValue;
  marker.onlineRetailerValue = onlineRetailerValue;
  marker.MyZoom = zoom;
  markers.push(marker);
}

function show(category) {
  //console.log(category);
  for (var i=0; i<markers.length; i++) {
    if (markers[i].barValue === 'TRUE' && "bar" === category) {
      markers[i].setVisible(true);
    } else if (markers[i].bottleshopValue === 'TRUE' && "bottleshop" === category) {
      markers[i].setVisible(true);
    } else if (markers[i].onlineRetailerValue === 'TRUE' && "onlineretailer" === category) {
      markers[i].setVisible(true);
    } else {

    }
  }
}

 //Hides markers not in current ticked category 
function hide(category) {
  //console.log('hide function');
  for (var i=0; i<markers.length; i++) {
    //console.log(markers[i].barValue);
    if (markers[i].barValue === "TRUE" && "bar" === category  ) {
      //console.log('hiding markers');
      markers[i].setVisible(false); 
    } else if (markers[i].bottleshopValue === "TRUE" && "bottleshop" === category ) {
       markers[i].setVisible(false); 
    } else if (markers[i].onlineRetailerValue === 'TRUE' && "onlineretailer" === category) {
      markers[i].setVisible(false);
    } else {

    }
  }
}

// == a checkbox has been clicked ==
function boxclick(box,category) {
  if (box.checked) {
    show(category);
  } else {
    hide(category);
  }
    // == rebuild the side bar
    // makeSidebar();
}
function createOption(name, distance, num) {
  var option = document.createElement("option");
  option.value = num;
  option.innerHTML = name + "(" + distance.toFixed(1) + ")";
  locationSelect.appendChild(option);
}
//Look up XML sheet to get data
function downloadUrl(url, callback) {
  var request = window.ActiveXObject ?
  new ActiveXObject('Microsoft.XMLHTTP') :
  new XMLHttpRequest;

  request.onreadystatechange = function() {
    if (request.readyState == 4) {
      callback(request.responseText, request.status);
    }
  };

  request.open('GET', url, true);
  request.send(null);
}

function parseXml(str) {
  if (window.ActiveXObject) {
    var doc = new ActiveXObject('Microsoft.XMLDOM');
    doc.loadXML(str);
    return doc;
  } else if (window.DOMParser) {
    return (new DOMParser).parseFromString(str, 'text/xml');
  }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T01:05:23.140

有人给了我这个答案，但答案已经消失了。有代码最终工作

```
function boxclick() {
    //create an array of the checked checkbox-IDs
    var c = j.grep(['onlineretailer','bottleshop','bar'],
        function(i) {
            return (j('#'+i.toLowerCase()+':checked').length);
            //console.log(i); i holds each value in the array in lowercase form
    });
    //console.log(c); // C holds all the checkbox values in an array

    //iterate over the markers and set their visibility
    //to true when at least 1 of the checkbox-values matches
    //otherwise to false
    j.each(markers,function(i,m) {
        this.setVisible(j.grep(c,function(v) {
            console.log(c,v,m); // c = checkboxes checked, v = value , m = marker
            return (m[v+'Value']=='TRUE')
        }).length>0);
    });  
} 
```

# android - 如何禁用最近的任务/应用程序按钮

> ID：14574239
> 
> 赞同：14
> 
> 时间：2013-01-29T01:30:59.893
> 
> 标签：android

我正在为 Android 构建一个儿童游戏应用程序。我需要在使用时禁用所有键。我已将应用程序设置为主页应用程序并禁用后退键（负责主页和后退按钮）。为了清除最近的任务列表，我创建了一个 Dummy Activity 列表，它在应用程序启动时开始然后结束。虚拟活动看起来像：

```
public class Dummy1 extends Activity
{
  public void onCreate(Bundle paramBundle)
  {
    super.onCreate(paramBundle);
   finish();
}
} 
```

然后在我执行的应用程序的 onCreate 中：

```
this.pm.setComponentEnabledSetting(new ComponentName(this, Dummy1.class),   PackageManager.COMPONENT_ENABLED_STATE_ENABLED, PackageManager.DONT_KILL_APP);

Intent localIntent1 = new Intent(this, Dummy1.class);
localIntent1.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
startActivity(localIntent1); 
```

当有人试图按住 Home 键以显示最近的任务时，这会照顾到我创建了 8 个这些任务并且它们都是空的，因此用户无法单击以更改应用程序。

现在我似乎无法禁用的唯一按钮是“最近的任务/应用程序”按钮（主要在 HTC 设备上可用，即 One X、One S 等）。此按钮似乎仍会显示所有最近的任务（即使创建了我的虚拟任务），并且我似乎无法为按下此按钮时触发的事件找到“挂钩”？

注意：我知道这是可行的，因为像 ToddlerLock 这样的应用程序已经做到了......我似乎无法弄清楚。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-06-13T19:48:52.783

这将关闭“RecentActivity”对话框。把它放在你的活动课上。

```
 @Override
    public void onWindowFocusChanged(boolean hasFocus) {
        super.onWindowFocusChanged(hasFocus);

        if (!hasFocus) {
            windowCloseHandler.postDelayed(windowCloserRunnable, 250);
        }
    }

    private void toggleRecents() {
        Intent closeRecents = new Intent("com.android.systemui.recent.action.TOGGLE_RECENTS");
        closeRecents.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK | Intent.FLAG_ACTIVITY_EXCLUDE_FROM_RECENTS);
        ComponentName recents = new ComponentName("com.android.systemui", "com.android.systemui.recent.RecentsActivity");
        closeRecents.setComponent(recents);
        this.startActivity(closeRecents);
    }

    private Handler windowCloseHandler = new Handler();
    private Runnable windowCloserRunnable = new Runnable() {
        @Override
        public void run() {
            ActivityManager am = (ActivityManager)getApplicationContext().getSystemService(Context.ACTIVITY_SERVICE);
            ComponentName cn = am.getRunningTasks(1).get(0).topActivity;

            if (cn != null && cn.getClassName().equals("com.android.systemui.recent.RecentsActivity")) {
                toggleRecents();
            }
        }
    } 
```

您需要在清单中添加以下权限。

```
 <uses-permission android:name="android.permission.GET_TASKS" /> 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-04-07T22:42:55.567

你试过这个代码吗？

```
public void onWindowFocusChanged(boolean hasFocus) {
    super.onWindowFocusChanged(hasFocus);

    Log.d("Focus debug", "Focus changed !");

if(!hasFocus) {
    Log.d("Focus debug", "Lost focus !");

    Intent closeDialog = new Intent(Intent.ACTION_CLOSE_SYSTEM_DIALOGS);
    sendBroadcast(closeDialog);
}
} 
```

来自：[http ://www.juliencavandoli.com/how-to-disable-recent-apps-dialog-on-long-press-home-button/](http://www.juliencavandoli.com/how-to-disable-recent-apps-dialog-on-long-press-home-button/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-01-08T15:51:12.557

实际上，您不能禁用任务按钮。当您按下它时，您的活动会调用`onPause()`方法，您可以在此方法中将任务移到前面。请参阅我对相关问题的[回答](https://stackoverflow.com/a/34680899/5506252)。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-29T02:34:30.267

据我所知，在没有用户确认的情况下，您无法覆盖主页按钮的行为（就像您可以覆盖 BACK 按钮的行为一样）。换句话说，当前处理主页按钮的应用程序的默认值 - 这是当前主页启动器的任何内容 - 必须首先清除。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-04-21T10:23:56.877

您可以禁用状态栏弹出窗口：

```
@Override
public void onWindowFocusChanged(boolean hasFocus) {
    super.onWindowFocusChanged(hasFocus);
    try {
        if (!hasFocus) {
            Object service = getSystemService("statusbar");
            Class<?> statusbarManager = Class.forName("android.app.StatusBarManager");
            Method collapse = statusbarManager.getMethod("collapse");
            collapse.setAccessible(true);
            collapse.invoke(service);
        }
    } catch (Exception e) {
        Log.e(TAG, "onWindowFocusChanged - " + e.getCause());
    }
} 
```

您还应该在 AndroidManifest.xml 中添加此权限

```
<uses-permission android:name="android.permission.EXPAND_STATUS_BAR" /> 
```

希望这可以帮助。

# javascript - HTML表格中的可点击单元格

> ID：14574240
> 
> 赞同：2
> 
> 时间：2013-01-29T01:31:13.997
> 
> 标签：javascript, html

我有一个 HTML 表格，大约有 20 列和 10 行。每列有一个字母，每行有一个数字。使每个单元格可点击的最佳方法是什么，以便它执行 JavaScript 函数并传递坐标？

我曾考虑过为每个单元格添加一个 id 或 onclick 属性对坐标进行硬编码，但是这会使将来扩展表格变得更加困难，而且似乎效率低下。

我认为获取单元格所在的行很容易，只需获取父元素即可。但我不知道如何获得专栏？

这是获取单元格的行和列的既定方法吗？

这是特别的页面：http: [//jonathanb.co.uk/papers/default.html](http://jonathanb.co.uk/papers/default.html)

我有一个链接列表，每个单元格对应一个链接。我计划允许重新排序行和列或至少隐藏一些。目前我正在使用 JavaScript 创建表格，但我认为最好使用 php.ini 来创建表格。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T01:41:56.900

`rowIndex`您可以使用and动态获取表格单元格的行和列`cellIndex`（假设您有一个名为 的元素`cell`）：

```
var rowNumber = cell.parentNode.rowIndex + 1;
var colNumber = cell.cellIndex + 1; 
```

# [**演示**](http://jsfiddle.net/9Q2bB/)

-查看开发者控制台输出-

添加点击监听器对你来说应该很容易（取决于你是否想使用 jQuery）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-29T02:49:13.977

您可以使表格可点击，并获取您点击的目标单元格的单元格和行索引。

```
<!doctype html>
<html lang="en">
<head>
<meta charset= "utf-8">
<title>cell row index</title>
<style>
table{background-color:white}
thead{background-color:green;color:white}
td,th{border:1px #000000 solid;font-size:1em;font-weight:500}
th{font-weight:bold}
h2{color:#191970}
#screenDiv{max-width:800px}    
</style>

<script>
function getCellRow(td){
    td= td? td.target:window.event? event.srcElement:'';
    var rc= [], pa= td.parentNode;
    if(pa.tagName== 'TR'){
        alert([pa.rowIndex, td.cellIndex]);
    }
}

window.onload= function(){
    document.getElementsByTagName('table')[0].onclick=getCellRow;
}
</script>

</head>
<body>
<div id="screenDiv">
<h1>Symbol Entities in HTML</h1>
<h2>Greek Alphabet</h2>
<table>
<thead><tr>
<th width="10%">Example</th><th width="20%">Named</th><th width="20%">Numeric</th><th width="50%">Description</th>
</tr></thead>
<tbody>
<tr><td>&Alpha;</td><td>&amp;Alpha;</td><td>&amp;#913;</td><td>capital alpha</td></tr>
<tr><td>&Beta;</td><td>&amp;Beta;</td><td>&amp;#914;</td><td>capital beta</td></tr>
<tr><td>&Gamma;</td><td>&amp;Gamma;</td><td>&amp;#915;</td><td>capital gamma</td></tr>
<tr><td>&Delta;</td><td>&amp;Delta;</td><td>&amp;#916;</td><td>capital delta</td></tr>
<tr><td>&Epsilon;</td><td>&amp;Epsilon;</td><td>&amp;#917;</td><td>capital epsilon</td></tr>
<tr><td>&Zeta;</td><td>&amp;Zeta;</td><td>&amp;#918;</td><td>capital zeta</td></tr>
<tr><td>&Eta;</td><td>&amp;Eta;</td><td>&amp;#919;</td><td>capital eta</td></tr>
<tr><td>&Theta;</td><td>&amp;Theta;</td><td>&amp;#920;</td><td>capital theta</td></tr>
<tr><td>&Iota;</td><td>&amp;Iota;</td><td>&amp;#921;</td><td>capital iota</td></tr>
<tr><td>&Kappa;</td><td>&amp;Kappa;</td><td>&amp;#922;</td><td>capital kappa</td></tr>
<tr><td>&Lambda;</td><td>&amp;Lambda;</td><td>&amp;#923;</td><td>capital lambda</td></tr>
<tr><td>&Mu;</td><td>&amp;Mu;</td><td>&amp;#924;</td><td>capital mu</td></tr>
<tr><td>&Nu;</td><td>&amp;Nu;</td><td>&amp;#925;</td><td>capital nu</td></tr>
<tr><td>&Xi;</td><td>&amp;Xi;</td><td>&amp;#926;</td><td>capital xi</td></tr>
<tr><td>&Omicron;</td><td>&amp;Omicron;</td><td>&amp;#927;</td><td>capital omicron</td></tr>
<tr><td>&Pi;</td><td>&amp;Pi;</td><td>&amp;#928;</td><td>capital pi</td></tr>
<tr><td>&Rho;</td><td>&amp;Rho;</td><td>&amp;#929;</td><td>capital rho</td></tr>
<tr><td>&Sigma;</td><td>&amp;Sigma;</td><td>&amp;#931;</td><td>capital sigma</td></tr>
<tr><td>&Tau;</td><td>&amp;Tau;</td><td>&amp;#932;</td><td>capital tau</td></tr>
<tr><td>&Upsilon;</td><td>&amp;Upsilon;</td><td>&amp;#933;</td><td>capital upsilon</td></tr>
<tr><td>&Phi;</td><td>&amp;Phi;</td><td>&amp;#934;</td><td>capital phi</td></tr>
<tr><td>&Chi;</td><td>&amp;Chi;</td><td>&amp;#935;</td><td>capital chi</td></tr>
<tr><td>&Psi;</td><td>&amp;Psi;</td><td>&amp;#936;</td><td>capital psi</td></tr>
<tr><td>&Omega;</td><td>&amp;Omega;</td><td>&amp;#937;</td><td>capital omega</td>
</tbody>
</table>  
</div>
</body>
</html> 
```

# file - Java 文本文件从特定字符读取并放入不同的 TextField

> ID：14574243
> 
> 赞同：0
> 
> 时间：2013-01-29T01:31:44.673
> 
> 标签：file, text, jtextfield

我正在尝试从文本文件中读取并插入文本文件是：

```
champ[34] = "ABC"; w1[34] = "Nick"; w2[34] = "SAM"; w3[34] = "Ronald";  
w4[34] = "Richeal"; w5[34] = "George"; w6[34] = "Sarah"; w7[34] = "Karin";  
w8[34] = "Chris"; w9[34] = "Christina"; 
```

我有 10 个文本字段。我想阅读文本文件，当阅读器检查是否有 (") 时，我将开始将 ABC 放入第一个 textField，然后第二个 textField 将尼克...

而且在文本文件中，它只有一行，但是当你阅读它时，它会出现 3 行，我在保存到文本文件时用“\n”设置它。

有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T14:23:08.593

将所有文件内容读入一个字符串变量。然后使用正则表达式获取匹配的子字符串。模式应该是这样的：**在=（可以有零到多个空格）”和“（可以有零到多个空格）之间获取最短的文本；**

阅读[http://docs.oracle.com/javase/6/docs/api/java/util/regex/Pattern.html](http://docs.oracle.com/javase/6/docs/api/java/util/regex/Pattern.html)了解更多详情。

例如：

```
 String str = "champ[34] = \"ABC\"; w1[34] = \"Nick\"; w2[34] = \"SAM\"; w3[34] = \"Ronald\"; w4[34] = \"Richeal\"; "
            + "w5[34] = \"George\"; w6[34] = \"Sarah\"; w7[34] = \"Karin\"; w8[34] = \"Chris\"; w9[34] = \"Christina\";";

    Pattern pattern = Pattern.compile("=\\s*\".*?\"\\s*;");
    Matcher matcher = pattern.matcher(str);

    while (matcher.find()) {
        System.out.print("Start index: " + matcher.start());
        System.out.print(" End index: " + matcher.end() + " ");
        System.out.println("group:" + matcher.group());
    } 
```

# javascript - 根据日期显示/隐藏 div，Dreamweaver 错误？

> ID：14574247
> 
> 赞同：1
> 
> 时间：2013-01-29T01:32:11.517
> 
> 标签：javascript, date, html, dreamweaver

我在[http://jsfiddle.net](http://jsfiddle.net)上创建了这段代码，在对工作代码感到满意后，我把它带到了 Dreamweaver。我无法让代码出现。这是代码：

HTML

```
    <script src="Java.js"></script>

    <div id="one" style="display:none">
    <p>在此处显示直到选定日期的项目。</p>
    </div>
    <div id="two" style="display:none">
    <p>选定日期</p>
    </div>

```

Javascript

```
    window.setInterval(函数()
      {
      var current = new Date();
      var expiry = new Date("这里的日期")

      if(current.getTime()>expiry.getTime()){
        $('#one').hide();
        $('#two').show();
      }

`}, 0000);

$('#one').show(); 
</pre>` 

我不明白为什么它会出现在小提琴而不是 Dreamweaver 中。

            回答 #1

赞同：1

时间：2013-01-29T01:35:25.690

您不能在主脚本中显示。您必须将其包装在 document.ready 或 jQuery $.ready() 函数中。

否则 DOM 没有加载并且没有 div 可以显示。我认为 jsFiddle 会自动包装你的代码。

这是 .ready() [http://api.jquery.com/ready/上的 jQuery 文档](http://api.jquery.com/ready/)

啊，是的，而且 jsFiddle 可能已经包含 jQuery --- 所以你必须在正文或标题的某个地方手动完成。

```
 <script src="pathtojquery.js" type="text/javascript"/> 
```

```

# android - 自定义用户代理字符串或标题，无需修改科尔多瓦库

> ID：14574248
> 
> 赞同：8
> 
> 时间：2013-01-29T01:32:21.433
> 
> 标签：android, cordova, http-headers, user-agent

我有一个与 ASP.NET MVC Web 应用程序交互的 Android Phonegap/Cordova 应用程序。我正在尝试检测**服务器端**是从浏览器还是从我的 Phonegap/Cordova 应用程序加载网页。

我考虑过几种方法：

1.  更改用户代理字符串。我找到[了这个 stackoverflow 链接](https://stackoverflow.com/questions/14406393/change-phonegap-cordova-user-agent-for-ajax)，它描述了一种使它工作的方法。不幸的是，它对我不起作用。请求对象没有自定义用户代理字符串。
2.  包括自定义标题值。这可以通过修改cordova库来完成（参见[这个stackoverflow链接](https://stackoverflow.com/questions/12243863/cordova-how-to-set-http-accept-header-when-calling-loadurl-in-android-app)。）但是，修改库通常是一个坏主意，因为它在未来会成为一个维护问题。（更新：此方法在第一次请求后不起作用。）
3.  在加载第一页时向查询字符串添加一些特殊的内容。然后可以设置一个cookie。与简单的标题更改相比，这是一种丑陋的解决方案。

我在用户代理字符串更改上做错了吗？还是有另一种方法可以做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2015-07-14T11:53:30.073

因此，对于 Cordova 5.1.1 及其平台版本的 Android 4.0.2（我目前使用 Cordova 5.1.1 时开箱即用的内容）这些答案不再有效。

经过一番艰难的摸索，上述版本的解决方案现在如下：

`MainActivity.java`在默认情况下由cordova创建并扩展的通常情况下`CordovaActivity`，覆盖该`makeWebViewEngine`方法：

```
@Override
    protected CordovaWebViewEngine makeWebViewEngine() {
        CordovaWebViewEngine cordovaWebViewEngine = super.makeWebViewEngine();
        WebSettings settings = ((SystemWebView) ((SystemWebViewEngine) cordovaWebViewEngine).getView()).getSettings();
        settings.setUserAgentString("MreaderMobile App / Android");
        return cordovaWebViewEngine;
    } 
```

将来，当他们升级 Android 平台的版本时，这应该更容易通过 config.xml 完成，但它不是一个选项 ATM，正如我在错误修复线程 CB-8960 上评论的那样

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-08T18:38:56.430

看起来有类似的请求请求（将“cordova/phonegap”添加到 UAS）
[https://github.com/apache/cordova-android/pull/10](https://github.com/apache/cordova-android/pull/10)

[这](https://github.com/apache/cordova-android/commit/5eb5fc03842c346ad3fe95af6c2db612ec519dec#L0R370)是它的核心。

所以我会扩展 DroidGap 并覆盖[public void init(CordovaWebView webView, CordovaWebViewClient webViewClient, CordovaChromeClient webChromeClient)](https://github.com/apache/cordova-android/blob/master/framework/src/org/apache/cordova/DroidGap.java#L317)：

```
...
WebSettings settings = this.appView.getSettings();
String userAgent = settings.getUserAgentString();
// can append or redefine here
userAgent += " PhoneGap/Cordova";
settings.setUserAgentString(userAgent);
... 
```

然后，您可以使用扩展的 DroidGap 并控制如何定义用户代理字符串。

刚刚确认这是可行的，这是使用当前 Cordova 实现的完整代码：

```
package com.focusatwill.androidApp;

import org.apache.cordova.CordovaChromeClient;
import org.apache.cordova.CordovaWebView;
import org.apache.cordova.CordovaWebViewClient;
import org.apache.cordova.DroidGap;
import org.apache.cordova.api.LOG;

import android.util.Log;
import android.view.View;
import android.view.ViewGroup;
import android.webkit.WebSettings;
import android.widget.LinearLayout;

public class DroidGapCustom extends DroidGap {

    /**
     * Initialize web container with web view objects.
     *
     * @param webView
     * @param webViewClient
     * @param webChromeClient
     */
    public void init(CordovaWebView webView, CordovaWebViewClient webViewClient, CordovaChromeClient webChromeClient) {
        LOG.d("EVENT", "Custom DroidGap.init()");

        // Set up web container
        this.appView = webView;

        // Custom addition of user agent string
        WebSettings settings = this.appView.getSettings();
        String userAgent = settings.getUserAgentString();
        // can append or redefine here
        userAgent += " PhoneGap/Cordova";
        settings.setUserAgentString(userAgent);

        this.appView.setId(100);

        this.appView.setWebViewClient(webViewClient);
        this.appView.setWebChromeClient(webChromeClient);
        webViewClient.setWebView(this.appView);
        webChromeClient.setWebView(this.appView);

        this.appView.setLayoutParams(new LinearLayout.LayoutParams(
                ViewGroup.LayoutParams.MATCH_PARENT,
                ViewGroup.LayoutParams.MATCH_PARENT,
                1.0F));

        // Add web view but make it invisible while loading URL
        this.appView.setVisibility(View.INVISIBLE);
        this.root.addView(this.appView);
        setContentView(this.root);

        // Clear cancel flag
        this.cancelLoadUrl = false;
    }

} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-09-11T06:40:28.020

@Peter 的答案就在那里，但您不需要覆盖整个 init 方法。这是一种更简单、更易于维护的方法：

```
 /***
     * This adds an actually useful user-agent string to the WebView.
     */
    @Override
    protected CordovaWebView makeWebView() {
        CordovaWebView wv = super.makeWebView();

        WebSettings settings = wv.getSettings();            
        String userAgent = settings.getUserAgentString();

        // can append or redefine here
        userAgent += " PhoneGap/Cordova Android";
        settings.setUserAgentString(userAgent);

        return wv;
    } 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-06-30T08:56:20.180

如果您使用的是最新版本的 cordova，请在他们的网站上查看此配置指南：http: [//cordova.apache.org/docs/en/dev/config_ref/index.html#Android%20Configuration](http://cordova.apache.org/docs/en/dev/config_ref/index.html#Android%20Configuration)

搜索用户代理。有 2 个设置允许您将某些内容附加到 User-Agent（AppendUserAgent 设置）或覆盖 User-Agent（OverrideUserAgent 设置）。

例如，在我的 android 项目中，在文件 res/xml/config.xml 中，我添加了设置

```
<preference name="AppendUserAgent" value=" [this is from my hybrid app]" /> 
```

应用此功能后，我的 User-Agent 将更改为：

```
Mozilla/5.0 (Linux; Android 5.0; SM-N9005 Build/LRX21V; wv) AppleWebKit/537.36 (KHTML, like Gecko) Version/4.0 Chrome/51.0.2704.81 Mobile Safari/537.36 [this is from my hybrid app] 
```

# spring-mvc - 访问根“/”时的 Spring Security 会话超时问题

> ID：14574251
> 
> 赞同：1
> 
> 时间：2013-01-29T01:32:48.547
> 
> 标签：spring-mvc, spring-security, timeout

我正在尝试使用 Spring Security 实现会话超时。我有 web.xml 和安全上下文设置，但是当用户尝试访问根目录“/”时我遇到了问题。Spring 认为这是一个无效会话（因为从技术上讲它是）并重定向到 /sessiontimeout。

由于用户尚未登录，是否有忽略此初始无效会话？或者区分过期会话和无效会话？

web.xml

```
<session-config>
    <session-timeout>1</session-timeout>
</session-config> 
```

安全上下文

```
<security:session-management invalid-session-url="/sessiontimeout" /> 
```

或者我可以采取简单的方法并在每个页面上添加一些 javascript...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T19:46:27.843

“无效会话”不是用户未经身份验证的会话。当浏览器为旧会话提交 JSESSIONID cookie 时，例如当它超时时，但也可能在用户注销但 cookie 仍然存在时。

这很可能就是您所看到的。您可以将 Spring Security 配置为在用户注销时尝试删除会话 cookie，如[参考手册中所述](http://static.springsource.org/spring-security/site/docs/3.1.x/reference/springsecurity-single.html#ns-session-mgmt)。

# android - 如何在app的页面中实现飘雪效果？

> ID：14574260
> 
> 赞同：1
> 
> 时间：2013-01-29T01:34:14.880
> 
> 标签：android, 2d

如何在已完成的活动中添加浮雪效果？

我使用 Canvas 和 2D 来制作浮雪效果。但我在主页中使用 main.xml。我用

```
http://ask.csdn.net/questions/1246 
```

但我在网上查了代码是

```
PetalView pv = new PetalView(this);
setContentView(pv); 
```

如何将两种视图混合在一起？

如何让效果置顶，不影响本活动页面的运行？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T02:49:26.747

从 a 开始`FrameLayout`（它允许您堆叠视图）：

```
 FrameLayout fl = new FrameLayout(this);        
    FrameLayout.LayoutParams params = new 
        FrameLayout.LayoutParams(FrameLayout.LayoutParams.FILL_PARENT, 
        FrameLayout.LayoutParams.FILL_PARENT); 
```

添加你的xml：

```
 LayoutInflater inflater = LayoutInflater.from(this);
    View mainView = inflater.inflate(R.layout.main, null);
    fl.addView(mainView); 
```

添加具有透明背景的动态视图：

```
 PetalView pv = new PetalView(this);
    pv.setBackgroundColor(0x00000000);
    fl.addView(pv);

    setContentView(fl); 
```

# mysql - 有条件地从 MySQL 中的 join 中获取第二行

> ID：14574261
> 
> 赞同：4
> 
> 时间：2013-01-29T01:34:22.743
> 
> 标签：mysql, sql, join

我有以下 3 个表：

```
mysql> explain runners;
+-------------+------------------+
| Field       | Type             |
+-------------+------------------+
| runner_id   | int(10) unsigned |
| name        | varchar(100)     |
+-------------+------------------+

mysql> explain runs;
+-------------+------------------+
| Field       | Type             |
+-------------+------------------+
| run_id      | int(10) unsigned |
| runner_id   | int(10) unsigned |
| race_id     | int(10) unsigned |
| position    | int(10)          |
+-------------+------------------+

mysql> explain races;
+-------------+------------------+
| Field       | Type             |
+-------------+------------------+
| race_id     | int(10) unsigned |
| date        | datetime         |
+-------------+------------------+ 
```

接下来，我必须显示给定跑步者参加的所有比赛，如下所示：

```
mysql> select runner.name, runs.run_id, runs.position, races.race_id
       from runners
       join runs on(runs.runner_id = runners.runner_id)
       join races on(races.race_id = run.run_id)
       where runners.runner_id = 1;
+------------------+--------+----------+---------+
| name             | run_id | position | race_id |
+------------------+--------+----------+---------+
| John Runner      |      1 |        1 |       1 |
| John Runner      |      7 |        3 |       2 |
| John Runner      |     15 |        2 |       3 |
................... more lines ...................
+------------------+--------+----------+---------+ 
```

现在我应该在这个查询中添加另一个名为“win/second”的列，如果当前跑步者的位置 = 1，它将显示第二名的跑步者的名字，如果当前跑步者的位置，则显示该比赛中获胜跑步者的名字!= 1，但我只是不知道如何让它工作，甚至不知道从什么开始。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T01:39:28.397

这将获得每场比赛的第一名和第二名。

```
SELECT r1.race_id,
       r1.runner_id AS First,
       r2.runner_id AS Second
FROM   runs r1
       INNER JOIN
       runs r2 ON r1.race_id=r2.race_id AND r1.position=1 AND r2.position=2 
```

你可以把它加入你的其他桌子以获得你想要的任何东西

好的 - 扩展。这是 SQL 服务器语法 - 它可能需要一些翻译

```
select runner.name,
       runs.run_id, 
       runs.position, 
       races.race_id,
       case runs.position
            when 1 then pos.Second
            else pos.First
       end AS [First/Second] 
from runners
     inner join runs on runs.runner_id = runners.runner_id
     inner join races on races.race_id = run.run_id
     inner join (SELECT r1.race_id,
                        r1.runner_id AS First,
                        r2.runner_id AS Second
                 FROM   runs r1
                 INNER JOIN
                 runs r2 ON r1.race_id=r2.race_id AND r1.position=1 AND r2.position=2) as pos
where runners.runner_id = 1; 
```

或者，简化

```
select runner.name,
       r1.run_id, 
       r1.position, 
       r1.race_id,
       r3.name AS [First/Second]
from runners
     inner join runs r1 on r1.runner_id = runners.runner_id
     inner join (SELECT runners2.name
                 FROM runners runners2
                 INNER JOIN
                 runs r2 ON r1.race_id=r2.race_id 
                         AND r2.position=CASE r1.position WHEN 1 THEN 2 ELSE 1 END) r3
where runners.runner_id = 1; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-29T01:42:08.397

以下查询通过预先计算第一个和第二个地名，然后将它们加入来解决这个问题：

```
select runner.name, runs.run_id, runs.position, races.race_id,
       (case when runs.position = 1 then SecondRunner else FirstRunner end) as FirstOrSecond
from runners join
     runs
     on runs.runner_id = runners.runner_id join
     races
     on races.race_id = run.run_id join
     (select runs.race_id,
             max(case when position = 1 then runners.name end) as FirstRunner,
             max(case when position = 2 then runners.name end) as SecondRunner
      from runs join
           runners
           on runs.runner_id = runners.runner_id
    ) fs
    on fs.race_id = races.race_id
where runners.runner_id = 1 
```

如果你想要简单，那么只需使用子查询：

```
 select runs.race_id,
             max(case when position = 1 then runners.name end) as FirstRunner,
             max(case when position = 2 then runners.name end) as SecondRunner
      from runs join
           runners
           on runs.runner_id = runners.runner_id 
```

我以为你也想要额外的信息。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-29T02:04:12.270

这应该可以满足您的需求：

```
select runners.name, 
   runs.run_id, 
   runs.position, 
   races.race_id,
   case
      when runs.position = 1
      then    runnerssecond.Name
      else    runnerswinner.Name
   end as NextColumn
from runners
   join runs on(runs.runner_id = runners.runner_id)
   join races on(races.race_id = runs.Race_Id)
   left join runs runswinner on runswinner.race_id = races.race_id and runswinner.Position = 1
   left join runners runnerswinner on runnerswinner.Runner_Id = runswinner.Runner_Id
   left join runs runsecond on runsecond.race_id = races.race_id and runsecond.Position = 2
   left join runners runnerssecond on runnerssecond.Runner_Id = runsecond.Runner_Id
where runners.runner_id = 1; 
```

还有[SQL 小提琴](http://sqlfiddle.com/#!2/99d13/4)。

祝你好运。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-29T01:38:36.087

开始：

*   第 1 步：将第一个作为第五列，将第二个作为第六列。
*   第 2 步：在位置列上使用 an`IF`来决定显示哪个表达式

# mongodb - 如何在mongodb mapreduce之后平整结果

> ID：14574262
> 
> 赞同：0
> 
> 时间：2013-01-29T01:34:24.587
> 
> 标签：mongodb, mapreduce

在用 MongoDB 玩过 MapReduce 之后，

文件看起来像：

```
{_id: { somecola : 123, somecolb : 456 }, value:10 } 
```

我想要这种格式：

```
{ _id : somerandomcode, somecola : 123, somecolb : 456, value :10 } 
```

新建一个集合，foreach+insert 可以，但是太慢了，怎么快速做？

谢谢

# symfony - 注册覆盖 - FosUser Bundle（CSRF 令牌无效）

> ID：14574271
> 
> 赞同：1
> 
> 时间：2013-01-29T01:35:27.560
> 
> 标签：symfony, fosuserbundle

当我使用标准逻辑时，它可以正常工作，注册没有任何问题。

```
<form action="{{ path('fos_user_registration_register') }}" {{ form_enctype(form) }} method="POST" class="fos_user_registration_register">

        {{ form_widget(form) }}

    <div>
        <input type="submit" value="{{ 'registration.submit'|trans({}, 'FOSUserBundle') }}" />
    </div>
</form> 
```

但是，当我手动覆盖这些字段时，它看起来像是在注册，但是，它没有注册，抛出的错误是 CSRF 令牌无效。我是否必须添加其他任何内容才能使此代码正常工作？

```
<form action="{{ path('fos_user_registration_register') }}" {{ form_enctype(form) }} method="POST" class="fos_user_registration_register">

        {{ form_widget(form.username) }}
        {{ form_widget(form.email) }}
        {{ form_widget(form.plainPassword.first) }}
        {{ form_widget(form.plainPassword.second) }}
        {{ form_widget(form.name) }}
        {{ form_widget(form.Position) }}
        {{ form_widget(form.Country) }}
        {{ form_widget(form.notification) }}

    <div>
        <input type="submit" value="{{ 'registration.submit'|trans({}, 'FOSUserBundle') }}" />
    </div>
</form> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-29T01:43:32.443

我发现了问题所在，只需要添加

```
{{ form_rest(form) }} 
```

> 这会呈现给定表单尚未呈现的所有字段。始终将它放在表单中的某个地方是个好主意，因为它会为您呈现隐藏字段并使您忘记呈现的任何字段更加明显（因为它会为您呈现字段）。

有关更多信息，请参阅[此处](http://symfony.com/doc/current/reference/forms/twig_reference.html)`form_rest()`的 symfony 文档

# javascript - 如何知道页面上是否全部加载？

> ID：14574272
> 
> 赞同：3
> 
> 时间：2013-01-29T01:35:33.433
> 
> 标签：javascript, dom, prototypejs

我正在构建一个包含大量 ajax 调用并动态创建 DOM 的页面。了解所有 ajax 调用是否已完成以及所有 DOM 元素是否已完成构建的最佳方法是什么？我尝试了以下prototype.js事件观察者：

```
Event.observe(window, 'load', function () {
 alert("Loaded!");
}); 
```

但似乎在警报触发后，某些元素仍在加载中。我正在 IE 上尝试这个。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T16:36:12.333

您需要查看`Ajax.Responders` [http://api.prototypejs.org/ajax/Ajax/Responders/](http://api.prototypejs.org/ajax/Ajax/Responders/)

这将为给定事件注册一个全局事件回调

还会`Ajax.activeRequestCount`告诉您有多少活动呼叫正在运行

```
var callback = {
  onComplete: function() {
    if(Ajax.activeRequestCount === 0){
        //all ajax calls are finished

        //If you only want to run this once make sure you unregister the event handlers
        Ajax.Responders.unregister(callback);
    }
  }
};
Ajax.Responders.register(callback); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T01:40:25.630

`success`您需要通过向其（或`complete`）处理程序添加代码来响应完成的 ajax 调用。

例如，假设您要进行三个 ajax 调用来填充 DOM。在每次 ajax 调用之后，将某个全局计数器加 1，然后调用一个函数来检查计数器是否为 3（这意味着所有 ajax 调用都已完成）。如果是，您将运行您的`alert('Loaded!');`.

`$.Deferred()`如果您使用 jQuery 进行 ajax 调用，这对对象来说更容易。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-29T01:43:32.123

如果您有很多 ajax 调用在您的页面上返回元素，那么知道它们何时全部完成的唯一方法是跟踪它们并使用它们的回调来计算它们何时全部加载。页面上的 load 或 ready 事件只关注通过 html 加载的资源，而不是通过异步请求加载的资源。`Asynchronous`是这里的关键。

如果我是你，我会有两个全局变量：`totalNumberOfCalls`&`finishedCalls`

在我的页面开始时，我会将 totalNumberOfCalls 设置为正确的数字，然后在每个回调中，我都会有一些类似于此的代码：

```
if (++finishedCalls == totalNumberOfCalls) console.log('Page Loaded');
else console.log( (finishedCalls / totalNumberOfCalls) * 100 + '% loaded'); 
```

通过这种方式，您可以轻松添加一个简单的计数器来计算进度。

如果您正在加载图像和其他外部元素，那么可能值得`load`对返回元素的事件进行计数，以便您获得实际完成的加载时间，而不是请求返回的时间，但没有任何关联的资源。

如果这一切看起来有点太多，那么只需进行 ajax 调用`synchronous`，这样你的页面就会在调用过程中停止。不过，这不是一个好习惯。

# c# - 通过按两次 Enter 退出控制台应用程序而不输入数据

> ID：14574273
> 
> 赞同：-1
> 
> 时间：2013-01-29T01:35:33.813
> 
> 标签：c#, asp.net

我想知道如何通过按`Enter`两次退出控制台中的应用程序

```
string userInput; // to display back the exact user input if format for the code has been incorrectly entered
        string morseInput;
        do
        {
            Console.WriteLine("Enter Morse Code: \n");
            userInput = Console.ReadLine();
            morseInput = userInput.Replace(" ","");
            bool isValid = Regex.IsMatch(morseInput, @"^[-.]+$"); // only allow dots and dashes
            if (isValid)
            {
                Console.WriteLine("\nAll permutations:");
                var charString = new List<string>(Permutate(morseInput));
                foreach (string character in charString)
                    Write(character);
            }
            else // Error for improper input format
            {
                if (morseInput.Length == 0)
                    Console.WriteLine("Morse can not be zero-length.");
                else
                {
                    Console.WriteLine("\nFormat of morse must be only dots and dashes");
                    Console.WriteLine("Parameter name: " + userInput + "\n");
                }
            }
            Console.WriteLine("\n");
        }
        while (true); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T13:42:17.870

只需测试一个空输入。无需等待双 <enter>：

```
while (true) {
    Console.Write("Enter Morse Code: \n");
    userInput = Console.ReadLine();
    if (userInput = "") {
        break;
    }
    // Process input here ....
} 
```

# jquery - 跨多个容器或父级的 jQuery UI 可排序 div

> ID：14574274
> 
> 赞同：3
> 
> 时间：2013-01-29T01:35:56.283
> 
> 标签：jquery, jquery-ui, containers, jquery-ui-sortable

我有一个对象列表，它分为两个容器，我想通过 jQuery 对其进行排序，但我不知道如何使一个对象能够添加到另一个容器列表中，反之亦然。因此，我希望能够将一个对象从一个容器拖到另一个容器中，并让代码将其视为一个列表。

下面是我的代码：

```
<!DOCTYPE html>
<html>
<head>
<meta content="text/html; charset=utf-8" http-equiv="Content-Type">
<title>Untitled 1</title>
<script type="text/javascript" src="jquery.min.js"></script>
<script type="text/javascript" src="jquery-ui/js/jquery-ui-1.8.22.custom.min.js"</script>
<link type="text/css" href="jquery-ui/css/smoothness/jquery-ui-1.8.22.custom.css" rel="stylesheet" />
<script type="text/javascript">
$(document).ready(function(){
$("#nowplaying_list, #nowplaying_history").sortable().disableSelection();
});
</script>
</head>
<body>
<div id="left_content" class="ui-droppable">
<div id="nowplaying_container" style="display:block;">
    <div id="nowplaying_wrapper">
        <div id="nowplaying_history" class="ui-sortable">
            <div class="object_container ui-draggable" >OBJECT 1</div>
            <div class="object_container ui-draggable" >OBJECT 2</div>
            <div class="object_container ui-draggable" >OBJECT 3</div>
        </div>
        <div id="nowplaying_list" class="ui-sortable">
            <div class="object_container ui-draggable" >OBJECT 4</div>
            <div class="object_container ui-draggable" >OBJECT 5</div>
            <div class="object_container ui-draggable" >OBJECT 6</div>
        </div>
    </div>
</div>
</div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-29T01:41:08.573

看一下[Sortable Portlets 示例](http://jqueryui.com/sortable/#portlets)，它似乎具有您想要的行为。

关键是`connectWith`选项，一旦你为两个容器分配了一个公共类，你就可以使用它：

```
$(".now-playing-block").sortable({
    connectWith: '.now-playing-block'
}); 
```

（为了清楚起见，我省略了链式`.disableSelection()`调用。）

# macos - 低功耗蓝牙 (BLE) 服务 - Mac OS X

> ID：14574278
> 
> 赞同：10
> 
> 时间：2013-01-29T01:36:14.507
> 
> 标签：macos, bluetooth, bluetooth-lowenergy, core-bluetooth

是否可以在 Mac OS X 上提供 BLE 服务？

从此处找到的 CoreBluetooth 文档[http://developer.apple.com/library/mac/#documentation/CoreBluetooth/Reference/CBCentralManager_Class/translated_content/CBCentralManager.html](http://developer.apple.com/library/mac/#documentation/CoreBluetooth/Reference/CBCentralManager_Class/translated_content/CBCentralManager.html)看起来您可以扫描并连接到外围设备。我正在寻找充当perisperhal。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-11-12T16:38:56.680

现在可以使用 OS X Mavericks (10.9)。适用于 iOS 的相同 CoreBluetooth CBPeripheralManager API 在 OS X 上可用。

一个例子可以在[这里](https://github.com/sandeepmistry/osx-ble-peripheral)找到。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-29T12:52:06.143

如果您查看 Xcode 中的 IOBluetooth 和 CoreBluetooth 框架头文件，您会注意到 CBCentralManager 存在，但与 iOS 不同的是，CBPeripheralManager 不存在。

因此，在 OS X 上，您可以充当 Central，但不能充当 Peripheral。

# knockout.js - Knockout.JS 验证和仅计算验证字段

> ID：14574279
> 
> 赞同：0
> 
> 时间：2013-01-29T01:36:14.997
> 
> 标签：knockout.js, knockout-validation

我开始玩 Knockout.JS，我试图计算我的视图模型中有效字段的“点”总和，但不知道如何去做。这个想法是，随着表格的填写，我可以根据每个已验证字段包含的点的完整值显示一个智能进度条。

我将如何设置*动态点*以始终包含字段的实时总和？

**视图模型的简短片段：**

```
myViewModel = ko.validatedObservable({
 fields: {
  firstname: {
        label: "First Name",
        value: ko.observable("").extend({
              required: true
            }),
        points: 100
  },
  lastname: {
        label: "LastName",
        value: ko.observable("").extend({
              required: true, 
              minLength: 2
            }),
        points: 200
  }
 }
 dynamicpoints: ko.computed { ??? }
}) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T07:57:52.630

淘汰赛验证用 ko.computed 'isValid' 扩展了可验证的 observables。

因此，您可以像这样解决：

```
var dynamicpoints = ko.computed(function(){
    var totalPoints = 0;

    if(!myViewModel.fields.firstname.value.isValid())
        totalPoints += field.points;

    if(!myViewModel.fields.lastname.value.isValid())
        totalPoints += field.points;

    return totalPoints;
}; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T03:40:49.403

尝试这个：

```
myViewModel = ko.validatedObservable({
    fields: {
        firstname: {
            label: "First Name",
            value: ko.observable("").extend({
                  required: true
                }),
            points: 100
        },
        lastname: {
            label: "LastName",
            value: ko.observable("").extend({
                  required: true, 
                  minLength: 2
                }),
            points: 200
        }
    },
    dynamicpoints: ko.computed(function(){
        var totalPoints = 0;

        if(!myViewModel.fields.firstname.value.error)
            totalPoints += field.points;

        if(!myViewModel.fields.lastname.value.error)
            totalPoints += field.points;

        return totalPoints;
    }
}); 
```

# sqlite - 在 SQLite 中使用自动增量键删除/插入表的最后一条记录

> ID：14574280
> 
> 赞同：1
> 
> 时间：2013-01-29T01:36:25.113
> 
> 标签：sqlite, insert, auto-increment

我在 sqlite 中有一个带有自动增量主键的表。假设我的表中有这些记录：

```
1 hi
2 hello
3 bye
4 goodbye 
```

如果我删除再见并添加另一条记录，新记录的 id 将为 5。但如果我删除再见并添加新记录，新记录的 id 将为 4。这样我将失去对最后一条记录的跟踪如果被一遍又一遍地删除和添加。无论如何我可以将新记录设为 5 而不是 4？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T07:54:07.150

你描述的是一个声明为的列[`INTEGER PRIMARY KEY`](http://www.sqlite.org/lang_createtable.html#rowid)。

你想要的是[`INTEGER PRIMARY KEY AUTOINCREMENT`](http://www.sqlite.org/autoinc.html).

* * *

例子：

```
sqlite> CREATE TABLE MyTable(ID INTEGER PRIMARY KEY AUTOINCREMENT);
sqlite> INSERT INTO MyTable DEFAULT VALUES;
sqlite> INSERT INTO MyTable DEFAULT VALUES;
sqlite> DELETE FROM MyTable WHERE ID = 2;
sqlite> INSERT INTO MyTable DEFAULT VALUES;
sqlite> SELECT * FROM MyTable;
1
3 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-12-18T18:47:28.557

为此，您只需编辑记录并说明它最初的记录编号。在 PHPmyadmin 中很容易做到，但不是在代码中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-08-24T11:19:24.580

让我们看一下 INTEGER PRIMARY KEY AUTOINCREMENT 定义：

> 在 INSERT 中，如果 ROWID 或 INTEGER PRIMARY KEY 列没有显式地给定一个值，那么它将自动填充一个未使用的整数，通常比当前使用的最大 ROWID 多一个。无论是否使用了 AUTOINCREMENT 关键字。

所以你应该忘记 INTEGER PRIMARY KEY AUTOINCREMENT 来实现你想要的。相反，你可以创建一个列 myKey，并使用一个静态方法设置该列的值，该方法保存表中插入的行数。

# vb.net - Excel，ThisAddIn.vb：为什么不为 =HYPERLINK() 调用 Application.SheetFollowHyperlink

> ID：14574281
> 
> 赞同：0
> 
> 时间：2013-01-29T01:36:26.010
> 
> 标签：vb.net, excel, ms-office

我正在尝试检测 Excel 中单击的超链接。Application.SheetFollowHyperlink 事件[声称](http://msdn.microsoft.com/en-us/library/office/ff821956.aspx)“当您单击 Microsoft Excel 中的任何超链接时”将调用它。

然而，尽管当单元格包含类似 url 时它会触发，但当`www.google.com`单元格包含`=HYPERLINK("http://www.google.com", "google")`.

如何检测对第二种超链接的点击？

* * *

例如，一个简单的excel add in：

```
Public Class ThisAddIn

    Private Sub ThisAddIn_Startup(ByVal sender As Object, ByVal e As System.EventArgs) Handles Me.Startup

    End Sub

    Private Sub ThisAddIn_Shutdown(ByVal sender As Object, ByVal e As System.EventArgs) Handles Me.Shutdown

    End Sub

    Private Sub Application_SheetFollowHyperlink(ByVal Sh As Object, ByVal Target As Microsoft.Office.Interop.Excel.Hyperlink) Handles Application.SheetFollowHyperlink
        MsgBox("Hyperlink Clicked")
    End Sub 
```

当您单击包含`www.google.com`但不包含`=HYPERLINK("http://www.google.com", "google")`.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T19:50:54.153

我似乎已经解决了这个问题，虽然我不确定为什么下面的代码有效，而我上面使用的代码没有：

```
Private HyperlinkFollower As Excel.DocEvents_FollowHyperlinkEventHandler

Private Sub CalledWhenHyperlinkClicked(ByVal Target As Excel.Hyperlink)
    Dim w As Microsoft.Office.Interop.Excel.Window = Globals.ThisAddIn.Application.ActiveWindow
    MsgBox("hyperlink clicked")
End Sub

EventDel_HyperlinkFollower = New Excel.DocEvents_FollowHyperlinkEventHandler(AddressOf CalledWhenHyperlinkClicked)

AddHandler worksheet.FollowHyperlink, EventDel_HyperlinkFollower 
```

# java - 检索 WebService 数组 Java(Android)

> ID：14574291
> 
> 赞同：1
> 
> 时间：2013-01-29T01:38:24.060
> 
> 标签：java, android, arrays, web-services

我必须检查用户是否输入了正确的代码才能检索这些信息。请帮忙！下面的代码是我的 SOAP 的样子：

```
<retrieveAudioInfoResponse xmlns="http://tempuri.org/">
          <retrieveInfoResult>
            <Info>
              <date>string</date>
              <name>string</name>
              <id>int</id>
              <description>string</description>
              <url>string</url>
            </Info> 
```

这是我为我的班级从网络服务获取数据所做的：

```
private void retrieveInfo(String code){

        SoapObject request = new SoapObject(NAMESPACE, METHOD_NAME);
        request.addProperty("code", code);

        SoapSerializationEnvelope envelope = new SoapSerializationEnvelope(SoapEnvelope.VER11);
        envelope.dotNet = true;     
        envelope.setOutputSoapObject(request);
        System.out.println(request);

        HttpTransportSE androidHttpTransport = new HttpTransportSE(URL);
        androidHttpTransport.debug = true;

        try {

               androidHttpTransport.call(SOAP_ACTION, envelope);
               SoapObject response = (SoapObject) envelope.getResponse();
               infoList = new String[response.getPropertyCount()];

               for(int i=0;i<response.getPropertyCount();i++){ 

               infoList[i] = response.getProperty(i).toString();
               Log.d("This is the response",infoList[i]);
      }      
} 
        catch (Exception e) {           
            e.printStackTrace();
        }       
    } 
```

我的网络服务：

```
POST /mobile/.../....asmx HTTP/1.1
Host: ...
Content-Type: text/xml; charset=utf-8
Content-Length: length
SOAPAction: "http://tempuri.org/retrieveInfo"

<?xml version="1.0" encoding="utf-8"?>
<soap:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/">
  <soap:Body>
    <retrieveInfo xmlns="http://tempuri.org/">
      <code>string</code>
    </retrieveInfo>
  </soap:Body>
</soap:Envelope>

HTTP/1.1 200 OK
Content-Type: text/xml; charset=utf-8
Content-Length: length

<?xml version="1.0" encoding="utf-8"?>
<soap:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/">
  <soap:Body>
    <retrieveInfoResponse xmlns="http://tempuri.org/">
      <retrieveInfoResult>
        <Info>
          <date>string</date>
          <name>string</name>
          <id>int</id>
          <description>string</description>
          <url>string</url>
        </Info>
        <Info>
          <date>string</date>
          <name>string</name>
          <id>int</id>
          <description>string</description>
          <url>string</url>
        </Info>
      </retrieveInfoResult>
    </retrieveInfoResponse>
  </soap:Body>
</soap:Envelope> 
```

我收到的错误是：

```
01-31 13:15:00.708: D/dalvikvm(13583): GC_FOR_ALLOC freed 85K, 3% free 13108K/13447K, paused 12ms
01-31 13:15:00.713: I/dalvikvm-heap(13583): Grow heap (frag case) to 15.312MB for 2457616-byte allocation
01-31 13:15:00.738: D/dalvikvm(13583): GC_CONCURRENT freed 1K, 3% free 15507K/15879K, paused 2ms+2ms
01-31 13:15:00.788: D/dalvikvm(13583): GC_FOR_ALLOC freed 0K, 3% free 15507K/15879K, paused 13ms
01-31 13:15:00.798: I/dalvikvm-heap(13583): Grow heap (frag case) to 19.476MB for 4367376-byte allocation
01-31 13:15:00.823: D/dalvikvm(13583): GC_CONCURRENT freed 0K, 2% free 19772K/20167K, paused 2ms+2ms
01-31 13:15:00.898: W/System.err(13583): android.os.NetworkOnMainThreadException
01-31 13:15:00.898: W/System.err(13583):    at android.os.StrictMode$AndroidBlockGuardPolicy.onNetwork(StrictMode.java:1099)
01-31 13:15:00.898: W/System.err(13583):    at java.net.InetAddress.lookupHostByName(InetAddress.java:391)
01-31 13:15:00.898: W/System.err(13583):    at java.net.InetAddress.getAllByNameImpl(InetAddress.java:242)
01-31 13:15:00.903: W/System.err(13583):    at java.net.InetAddress.getAllByName(InetAddress.java:220)
01-31 13:15:00.903: W/System.err(13583):    at libcore.net.http.HttpConnection.<init>(HttpConnection.java:71)
01-31 13:15:00.903: W/System.err(13583):    at libcore.net.http.HttpConnection.<init>(HttpConnection.java:50)
01-31 13:15:00.903: W/System.err(13583):    at libcore.net.http.HttpConnection$Address.connect(HttpConnection.java:351)
01-31 13:15:00.903: W/System.err(13583):    at libcore.net.http.HttpConnectionPool.get(HttpConnectionPool.java:86)
01-31 13:15:00.903: W/System.err(13583):    at libcore.net.http.HttpConnection.connect(HttpConnection.java:128)
01-31 13:15:00.903: W/System.err(13583):    at libcore.net.http.HttpEngine.openSocketConnection(HttpEngine.java:308)
01-31 13:15:00.903: W/System.err(13583):    at libcore.net.http.HttpEngine.connect(HttpEngine.java:303)
01-31 13:15:00.903: W/System.err(13583):    at libcore.net.http.HttpEngine.sendSocketRequest(HttpEngine.java:282)
01-31 13:15:00.903: W/System.err(13583):    at libcore.net.http.HttpEngine.sendRequest(HttpEngine.java:232)
01-31 13:15:00.903: W/System.err(13583):    at libcore.net.http.HttpURLConnectionImpl.connect(HttpURLConnectionImpl.java:80)
01-31 13:15:00.903: W/System.err(13583):    at org.ksoap2.transport.ServiceConnectionSE.connect(ServiceConnectionSE.java:75)
01-31 13:15:00.903: W/System.err(13583):    at org.ksoap2.transport.HttpTransportSE.call(HttpTransportSE.java:136)
01-31 13:15:00.903: W/System.err(13583):    at org.ksoap2.transport.HttpTransportSE.call(HttpTransportSE.java:90)
01-31 13:15:00.903: W/System.err(13583):    at com.example.loginws.second.WebServiceCallExample(second.java:80)
01-31 13:15:00.903: W/System.err(13583):    at com.example.loginws.second.onCreate(second.java:32)
01-31 13:15:00.908: W/System.err(13583):    at android.app.Activity.performCreate(Activity.java:4470)
01-31 13:15:00.908: W/System.err(13583):    at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1052)
01-31 13:15:00.908: W/System.err(13583):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1931)
01-31 13:15:00.908: W/System.err(13583):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1992)
01-31 13:15:00.908: W/System.err(13583):    at android.app.ActivityThread.access$600(ActivityThread.java:127)
01-31 13:15:00.908: W/System.err(13583):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1158)
01-31 13:15:00.908: W/System.err(13583):    at android.os.Handler.dispatchMessage(Handler.java:99)
01-31 13:15:00.908: W/System.err(13583):    at android.os.Looper.loop(Looper.java:137)
01-31 13:15:00.908: W/System.err(13583):    at android.app.ActivityThread.main(ActivityThread.java:4511)
01-31 13:15:00.908: W/System.err(13583):    at java.lang.reflect.Method.invokeNative(Native Method)
01-31 13:15:00.908: W/System.err(13583):    at java.lang.reflect.Method.invoke(Method.java:511)
01-31 13:15:00.908: W/System.err(13583):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:980)
01-31 13:15:00.908: W/System.err(13583):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:747)
01-31 13:15:00.913: W/System.err(13583):    at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T05:29:17.207

仅供参考，`android.os.NetworkOnMainThreadException`每当您在主 UI 线程上执行长时间运行的任务时都会发生。所以我确定您正在尝试直接`retrieveInfo()`在方法内部调用`onCreate()`。

最好的解决方案是`doInBackground()`在[`AsyncTask`](http://developer.android.com/reference/android/os/AsyncTask.html). 还有一件事，AsyncTask 在 android 中被称为**Painless Threading**，因为我们程序员一旦实现就不需要担心线程的管理。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T04:40:44.527

您要做的是制作一个 XML 模式来进行比较。
您可以针对 XML 模式运行 SOAP 消息验证。

# html - 使用 css 将表单居中

> ID：14574303
> 
> 赞同：1
> 
> 时间：2013-01-29T01:39:48.827
> 
> 标签：html, css, forms, center

我正在尝试使用 css 居中**（到页面中间）**一个 html 表单。

我已经阅读了其他成员的类似问题。但是，我无法弄清楚

这是 HTML 表单：

```
<html>
<head>
    <link rel="stylesheet" type="text/css" href="styles/form_style.css">
    <title>My Form</title>
</head>
<body>
    <form   action="#">
          <label for="name">Your Name:</label>
          <input type="text" name="name" id="name" /><br />

          <label for="email">Your Email:</label>
          <input type="text" name="email" id="email" /><br />

          <input type="checkbox" name="subscribe" id="subscribe" />
          <label for="subscribe" class="check">Subscribe</label>
    </form>
</div>
</body>
</html> 
```

这是CSS：

```
<style>
form{
  width: 700px ;
  margin-left: 0 auto;
}
label { 
    text-align:right; 
    width:100px; 
}
input { 
    margin-left: 10px; 
}
label.check, label.radio { 
    text-align:left; 
}
</style> 
```

我尝试了相当一段时间。但我仍然无法使表格居中。有什么指导吗？谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-29T01:40:13.437

速记属性是`margin`，不是`margin-left`。修复它，它将居中：

```
form {
  width: 700px ;
  margin: 0 auto;
} 
```

这是小提琴：http: [//jsfiddle.net/Tzr7D/](http://jsfiddle.net/Tzr7D/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-29T02:52:05.380

“大小：0 自动；” 将把你的表格从任何持有它的地方居中。您可能想要添加一些可以容纳您的表单的东西并设置该东西的宽度，以便它将您的表单设置为居中。比如说像这样的表

```
<html>
<head>
    <link rel="stylesheet" type="text/css" href="styles/form_style.css">
    <title>My Form</title>
</head>
<body>
<table>
<tr>
<td width="1024px">
    <form   action="#">
          <label for="name">Your Name:</label>
          <input type="text" name="name" id="name" /><br />

          <label for="email">Your Email:</label>
          <input type="text" name="email" id="email" /><br />

          <input type="checkbox" name="subscribe" id="subscribe" />
          <label for="subscribe" class="check">Subscribe</label>
    </form>
</td>
</tr>
</table>
</div>
</body>
</html> 
```

我在表格之前添加了表格。尝试一下。希望这可以帮助。

# javascript - 如何通过javascript/不刷新自动保存HTML5搜索输入

> ID：14574304
> 
> 赞同：15
> 
> 时间：2013-01-29T01:39:53.430
> 
> 标签：javascript, ajax, html

**问题：**
有什么方法可以从 javascript 触发 Webkit 的自动保存功能？如果不通过专用 API，是否至少有一种方法可以通过操作 cookie 来完成相同的功能？

**背景：**
我真的很喜欢 HTML5 中新的“搜索”输入类型，并希望让支持 Webkit 的用户能够轻松地回忆他们过去的搜索，而无需在我的数据库中存储所有这些搜索的开销（使用自动保存功能）。

我遇到的问题是，搜索词似乎只有在搜索输入封装在表单中并且该表单在提交时执行标准 POST 时才会保存。由于我的搜索输入用于过滤已经存在的结果，因此完全重新加载页面没有多大逻辑意义，因此我使用 AJAX 重新填充结果。如果我在我的 AJAX 函数中返回 false，则界面是干净且一致的，但这显然不会触发 POST [by design] 表单，因此浏览器（至少 Chrome）不会保存搜索词。返回 true 刷新整个页面，破坏我的 AJAX 注入内容和过滤器的整个点，但搜索词被保存。

```
$('#filter-form').submit(function(e) {
      var term = $('#filter').val();
      $.ajax({
        async: true,
        type: 'POST',
        url: '/Home/GetResults',
        data: {
          filter: term
        },
        success: function(returnData) {
          $('#result-list').html(returnData);
        }
      });
      return false;
    }
```

```
<form id="filter-form" name="filter-form" action="#">
  <input type="search" name="filter" id="filter" results="5" autosave="EluminitePreviousFilters" />
</form>
<div id="result-list"></div>
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2015-10-13T17:38:34.630

有一个技巧是使用连接到表单的隐藏 iframe：

```
<iframe id="hidden-frame" name="hidden-frame" style="display:none" src="about:blank"></iframe>

<form target="hidden-frame" method="post" action="about:blank">
  <input type="search" name="filter" id="filter" results="5" />
  <button type="submit">Submit</button>
</form> 
```

如果您的表单提交处理程序返回 true，则表单将被提交（但用户不会注意到），并且浏览器会将输入的值保存在自动完成列表中。

我在 JSBin 上创建了一个示例：http://jsbin.com/farelufaku/edit?html, [output](http://jsbin.com/farelufaku/edit?html,output)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-10-20T14:32:10.563

> **演示：** [https ://so.lucafilosofi.com/how-to-autosave-html5-search-input-through-javascript-without-refresh/](https://so.lucafilosofi.com/how-to-autosave-html5-search-input-through-javascript-without-refresh/)

嗨，Eluminite，我知道这可能是不可能的（？）但既然你说：

> *至少有一种方法可以通过操作 cookie 来完成相同的功能？*

如果我没记错的话，您的主要目标是不在数据库中存储数据；你实际上可以使用

> [Web Storage API](https://developer.mozilla.org/en-US/docs/Web/API/Web_Storage_API)提供了浏览器存储键/值对的机制，比使用 cookie 更直观。

如您所见，许多现代浏览器都支持它，而在不支持它的地方，您仍然可以使用 cookie...

有关使用 jQuery UI 自动完成的代码实现，请参阅我的演示。

> **注意：**当然有一些插件可以同时**处理**本地**存储**和**cookie** **，**例如[jQuery-Storage-API](https://github.com/julien-maurel/jQuery-Storage-API)、[jQuery Storage](http://yckart.github.io/jquery.storage.js/)和许多其他插件。只需搜索谷歌。

希望这有帮助。

# windows - 无法对在 Windows7 上作为服务运行的 Tomcat7 使用 JVisualVM 分析

> ID：14574308
> 
> 赞同：18
> 
> 时间：2013-01-29T01:40:15.117
> 
> 标签：windows, tomcat, profiling, visualvm, jvisualvm

我正在尝试使用本地运行的 JVisualVM（JDK 1.7.0 - 06、64 位）将在 Apache Tomcat（7.0.34）中运行的 Servlet 作为 Windows 7（64 位）上的服务进行分析。

最初，由于不同的“java.io.tmp”属性错误/功能，我遇到了 Tomcat 未显示在本地应用程序列表中的问题，但按照本论坛中几篇文章的建议解决了这个问题。

然而，尽管 Tomcat 进程现在在本地应用程序列表中显示为“本地应用程序”，但当我打开进程时，没有监视器、线程、采样器或配置文件的选项卡 - 只有 JVM 参数和系统属性子的概览选项卡-tabs 显示可怕的“此 jvm 不支持”消息。

我已经仔细检查了以下项目：

*   通过查看 JVisualVM 中的 JVM 属性（使用 Tomcat 的 JMX 连接），Tomcat 和 JVisualVM 都在运行相同版本的 Java
*   通过查看 JVisualVM 中的系统属性（再次使用 Tomcat 的 JMX 连接）并查看实际的 TMP/TEMP 目录并确认两者的 PID 文件，Tomcat 和 JVisualVM 都具有相同的“java.io.tmp”路径存在
*   文件系统是 NTFS
*   Windows 用户的名称中没有下划线（注意：用户的名称中确实有句点，因为我们使用的是“firstname.lastname”形式的网络登录，但是我在 JVisualVM 中查看其他 Java 应用程序没有问题所以不要认为这是一个问题）
*   通过查看任务管理器中的进程，Tomcat 和 JVisualVM 都作为同一个 Windows 用户执行

最后几点：

*   我需要分析**Servlet**，因此使用 JMX 是不够的
*   我能够在 Windows XP 机器（Java 7、Tomcat 7 即服务）上进行分析，所以这似乎是 Windows 7 / 64 位的东西？

如果有人已经解决了这个问题，显然这个解决方案将不胜感激。但是，如果其他人正在运行相同的配置（Windows 7 64 位、Java 7 64 位、Tomcat 7 作为服务运行），这将很有**用**。

**更新：**我没有作为服务运行，而是使用批处理文件运行 Tomcat，并且一切正常：作为服务运行有什么意义？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2014-01-27T16:46:45.867

正如我之前的评论中已经暗示的那样。我想简单的答案是**不可能的**。为了实现jconsole/jvisualvm与被监控进程之间的通信，Java使用了内存映射文件。最后归结为某个 Windows API 调用由于 Windows Vista 中添加的“Windows 服务强化”[1] 功能而失败，当然，Windows 7 和更高版本中也存在该功能。

失败的调用是对函数 OpenFileMapping 的调用，如 perfMemory_windows.cpp 第 1402 行 [2] 中所示。在我的实验中，该方法使用“hsperfdata_[username]_[process id]”形式的参数调用。正如微软对服务强化（参见 [3]）引入的差异的进一步详细说明，如果不使用名称前缀，通信将不起作用：“如果用户应用程序 [...] 通过创建或打开来与服务同步带有 Local\ 前缀（或无前缀，默认为 Local）的对象，应用程序不再按预期工作。”

如果有人想亲自看看。您可以使用 Windows 调试工具中包含的 Logger 工具 [4] 来跟踪 API 调用。

此外，Sysinternals Process Explorer 非常方便，因为它通过其“查找句柄或 DLL...”功能显示用于内存映射文件的全名。只需搜索包含“hsperf”的句柄。

附带说明：删除或以其他方式弄乱包含 hsperf 数据的临时目录的解决方法归结为要监视的进程和监视进程使用的用户名的大小写需要一致。但除了更改临时目录之外，您还可以轻松更改监控进程使用的 USERNAME 环境变量。您还可以在 perfMemory_windows.cpp 第 272 行 [2] 中查看它是如何使用的。

[1] [http://technet.microsoft.com/en-us/library/cc507844.aspx#EHF](http://technet.microsoft.com/en-us/library/cc507844.aspx#EHF)

[2] [http://hg.openjdk.java.net/jdk7/hotspot-rt/hotspot/file/5dce25362b8a/src/os/windows/vm/perfMemory_windows.cpp](http://hg.openjdk.java.net/jdk7/hotspot-rt/hotspot/file/5dce25362b8a/src/os/windows/vm/perfMemory_windows.cpp)

[3] [http://msdn.microsoft.com/en-us/windows/hardware/gg463353.aspx](http://msdn.microsoft.com/en-us/windows/hardware/gg463353.aspx)

[4] [http://msdn.microsoft.com/en-us/library/windows/hardware/ff560123(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/hardware/ff560123(v=vs.85).aspx)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-02-18T11:53:22.853

你几乎做到了“*我没有作为服务运行，而是使用批处理文件运行 Tomcat，并且一切运行良好：作为服务运行是什么*”现在剩下的唯一步骤是将 JVisualVM 作为服务运行 :)

参考这个

[https://blogs.oracle.com/nbprofiler/entry/monitoring_java_processes_running_as](https://blogs.oracle.com/nbprofiler/entry/monitoring_java_processes_running_as)

由于只能分析在与 VisualVM 相同的用户下运行的 Java 进程，因此分析 Windows 服务（默认情况下在系统帐户下运行）的唯一方法是将 VisualVM 本身作为 Windows 服务启动。请注意，由于安全限制默认情况下会阻止服务显示任何 UI，因此此方法在 Windows Vista 上不起作用。

另一种选择是运行 Run CMD.EXE as Local System ，请参阅下文。

[http://vicevoice.blogspot.in/2009/09/vaas-visualvm-as-service.html](http://vicevoice.blogspot.in/2009/09/vaas-visualvm-as-service.html)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-01-27T22:31:59.147

你不能只是通过网络连接，即启动JVM

```
 java 
  -Dcom.sun.management.jmxremote
  -Dcom.sun.management.jmxremote.port=1234 
  -Dcom.sun.management.jmxremote.local.only=false 
  -Dcom.sun.management.jmxremote.authenticate=false 
  -Dcom.sun.management.jmxremote.ssl=false 
  -jar my.jar` 
```

并在工具中创建到 localhost:1234 的网络连接

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-07-15T17:59:18.860

如果有人在 Windows 7 上有解决方案，我也很好奇。正如前面提到的，将 VisualVM 作为服务运行的技巧在 Vista 上不起作用，我假设相同的安全功能阻止它在 Win 7 上运行。

我唯一的解决方案是将您的应用服务器（Tomcat）设置为服务，这样如果服务器重新启动，它就会启动并可用。然后手动停止服务并从命令行启动您的应用服务器 (Tomcat) 并与 VisualVM 连接。只要服务器没有重新启动，你就可以得到很好的监控。

# php - 正则表达式@符号及其使用方式

> ID：14574310
> 
> 赞同：2
> 
> 时间：2013-01-29T01:40:16.940
> 
> 标签：php, regex

如果在某个地方回答了这个问题，我很抱歉我找不到它。这取自 preg_match 的 php 参考。

```
<?php
// get host name from URL
preg_match('@^(?:http://)?([^/]+)@i',
"http://www.php.net/index.html", $matches);
$host = $matches[1];

// get last two segments of host name
preg_match('/[^.]+\.[^.]+$/', $host, $matches);
echo "domain name is: {$matches[0]}\n";
?> 
```

我理解除了@^ 和@i 之外的所有这些。我已经搜索了大量的正则表达式参考，除了作为分隔符之外，没有看到任何提及 @ 符号的内容，这里不是这种情况。

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-29T01:43:08.573

`@`被用于代替更常见的`/`因为`/`在模式中使用。它只是让模式更具可读性，而不必转义它。

如下图（相同模式）：

```
@^(?:http://)?([^/]+)@i
/^(?:http:\/\/)?(^\/]+)/i 
```

并且`i`，正如其他人所提到的，使模式 CasE InsEnSative。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-29T01:41:36.773

`@` *是*这里的分隔符。`^`after first`@`表示匹配应该从字符串的开头开始，after `i`the 是一个开关，表示正则表达式不区分大小写。

任何非字母数字字符都可以用作分隔符。作者选择`@`分隔符而不是更标准的原因`/`是为了避免正则表达式中的斜线被转义。

* * *

您的正则表达式等效于以下内容：

```
'/^(?:http:\/\/)?([^\/]+)/i' 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-29T01:42:59.977

`@`定界符*就是*这里的情况。`@^`或没有什么特别之处`@i`。符号`@`、`^`和`i`都是独立的，表示：

1.  正则表达式分隔符（可以是任何其他非字母数字字符或 的组合`{}`）
2.  线的开始
3.  不区分大小写的修饰符

# c++ - 使用 Microsoft Visual C++ 2010 Express 时出现链接错误 LNK1123

> ID：14574313
> 
> 赞同：1
> 
> 时间：2013-01-29T01:40:25.620
> 
> 标签：c++, visual-studio, compiler-construction, express

每次我尝试构建和调试简单的 Hello World 代码时，都会收到一条错误消息，说明如下：

```
1>------ Build started: Project: helloworld, Configuration: Debug Win32 ------
1>  test.cpp
1>LINK : fatal error LNK1123: failure during conversion to COFF: file invalid or corrupt
========== Build: 0 succeeded, 1 failed, 0 up-to-date, 0 skipped ========== 
```

我使用这段代码：

```
#include <iostream>
using namespace std;
void main() {
cout << "Hello, World!" << endl;
} 
```

而且我认为每当我使用它时`Main()`，他们都会告诉我不要使用它或其他东西。帮助！！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T01:45:30.097

尝试制作它`int main()`并确保放在块`return(0);`的末尾`main()`。

# python-3.x - 将列表制作成这种格式

> ID：14574316
> 
> 赞同：0
> 
> 时间：2013-01-29T01:40:50.067
> 
> 标签：python-3.x, formatting

我在这个转变中遇到了很多麻烦。如何制作一个函数来获取列表并将其打印成类似于列表下方的格式？顺便说一下，这是在 python 3.3 中。

```
[[' ', ' ', ' ', ' ', ' ', ' '], [' ', ' ', ' ', ' ', ' ', ' '], [' ', ' ', ' ', ' ', ' ', ' '], [' ', ' ', ' ', ' ', ' ', ' '], [' ', ' ', ' ', ' ', ' ', ' '], [' ', ' ', ' ', ' ', ' ', ' '], [' ', ' ', ' ', ' ', ' ', ' ']] 
```

它应该看起来像一个 7x6 连接 4 游戏板：

```
0  1  2  3  4  5  6  
.  .  .  .  .  .  .
.  .  .  .  .  .  .
.  .  .  .  .  .  .
.  .  R  .  .  .  .
.  .  Y  R  .  .  .
.  R  R  Y  .  Y  . 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T01:56:57.410

因为这看起来像 python，所以你会得到一个 python 答案：

```
arr = [[1,2],[3,4]]
for rows in arr:
    rowString = ""
    for value in rows:
        rowString = rowString + str(value)
    print(rowString) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T02:02:11.747

您可以使用循环并`join`执行此操作：

```
for row in board:
    print ' '.join(cell for cell in cells if cell != ' ' else '.') 
```

# c# - 与列表中的 Webdriver 元素交互

> ID：14574320
> 
> 赞同：1
> 
> 时间：2013-01-29T01:41:18.283
> 
> 标签：c#, xpath, selenium, webdriver, selenium-webdriver

已经很晚了，我必须在这里遗漏一些简单的东西，但我就是想不通。

我正在尝试使用 Webdriver 自动化表单的用户输入。问题是表单是动态的并且有很多自定义字段。在这种情况下，我试图向表单上的所有文本输入框发送一个简单的字符串。我想我已经成功了一半；我能够使用 XPath 提取所有文本字段并将它们放入列表中。但是，我不确定一旦他们在那里如何与他们互动。这是我到目前为止的代码：

```
List<IWebElement> textfields = new List<IWebElement>();

var test = Driver.FindElements(By.XPath("//*[@type='text']"));

foreach (IWebElement fields in test)
{
    textfields.Add(fields);
} 
```

我与 WebDriver 交互的方式是这样的：

`Driver.FindElements(By.XPath(querygoeshere)).SendKeys("test");`.

但是，列表中的所有内容都是 IWebElement。接下来我该怎么做？我在这里走错路了吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T05:59:28.753

我不确定 C# 语法，但这样的方法应该会有所帮助：

```
List<IWebElement> textfields = new List<IWebElement>();
textfields = Driver.FindElements(By.XPath("//*[@type='text']"));

foreach (IWebElement field in textfields){
    field.SendKeys("test);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-29T10:01:00.447

请注意，您当前的 XPath 查询实际上不会选择所有文本框。它只会选择类型为`text`- 的元素，它只能是输入。

这将错过`textarea`元素。这对您来说可能没问题，但尽管如此：

```
var textBoxes = new List<IWebElement>();
textBoxes = Driver.FindElements(By.CssSelector("input[type='text']"));

foreach (IWebElement textBox in textBoxes)
{
    textBox.SendKeys("test");
} 
```

包括`textarea`元素：

```
var textBoxes = new List<IWebElement>();
var textAreas = new List<IWebElement>();

textBoxes = Driver.FindElements(By.CssSelector("input[type='text']"));
textAreas = Driver.FindElements(By.CssSelector("textarea"));

textBoxes.AddRange(textAreas);

foreach (IWebElement textBox in textBoxes)
{
    textBox.SendKeys("test");
} 
```

至少，如果你必须使用 XPath，那么要明确——`*`它将搜索所有元素，无论如何你只想要`input`元素——所以 make it `//input[@type='text']`。

# javascript - 如何将 if-else 语句更改为切换？

> ID：14574324
> 
> 赞同：3
> 
> 时间：2013-01-29T01:41:26.470
> 
> 标签：javascript, html, css

我有黑色文本，双击时会变成不同的颜色。我希望它能够通过双击变回黑色。现在，我有：

```
<script>
<h1 id="color"> I CHANGE COLORS! </h1>
<a href="javascript:void(0)" ondblclick="
        counter++;
        if(counter%2==1){color()} else {black()}
        ">Double click here</a>
</script> 
```

调用的两个函数是`color()`和`black()`。无论如何我可以使用切换而不是这个if-else和javascript吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T01:46:43.653

您可以使用`anchor`元素的属性之一为您携带切换值（例如它的`ID`）。然后您就可以在一个`ondoubleclick`事件中包含所有必要的代码，而无需事先声明切换变量：

```
<h1 id="color"> I CHANGE COLORS! </h1>
<script>
  function black(id) { document.getElementById(id).style.color = 'black' }
  function red(id)  { document.getElementById(id).style.color = 'red' }
</script>
<a id="toggle_uninitialized" href="javascript:void(0)" ondblclick="(this.id=='toggled') ? this.id='not_toggled' : this.id='toggled';(this.id=='toggled') ? red('color') : black('color');">Double click here</a> 
```

[更新的小提琴](http://jsfiddle.net/zPUnk/2/)

**编辑**：将 ID 更改为不包含空格字符。显然，可以采用此解决方案来使用代码中不需要（未使用）的***任何***其他现有`anchor element`属性作为切换开关。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-29T01:53:34.137

将函数存储在全局可访问的对象中：

```
functions = {};
functions[true] = black;
functions[false] = color;

black = true 
```

然后倒置你的州旗：

```
<a href="javascript:void(0)" ondblclick="
        black = !black;
        functions[black]();
        ">Double click here</a> 
```

虽然这可以满足您非常随意的要求，但它是一个可怕的解决方案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-29T01:49:37.983

您可以使用[三元运算符](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Operators/Conditional_Operator)：

```
this.style.color = this.style.color == '#000000' ? '#ff0000' : '#000000'; 
```

（最好不在内联事件处理程序中）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-29T01:53:46.540

[http://jsfiddle.net/t6BUE/](http://jsfiddle.net/t6BUE/)

```
<style> .black {color: black;} .red {color: red;}</style>
<div id="color" class="black">test</div>

<input type="button" name="button" value="Change"
onClick="document.getElementById('color').className = (document.getElementById('color').className=='red') ? 'black' : 'red';"> 
```

我建议不要检查该`style.color`值，因为显然浏览器可能会更改此值。（我刚刚在 Chrome 上进行了测试，它将 #FF0000 更改为 rgb(255,0,0); 这使得在不同的浏览器中检查该值是不可预测的。我建议改为检查该类。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-29T02:03:28.923

```
ondblclick='(toggle = ! toggle) ? alert("1") : alert("2");'>Double click here</a> 
```

在此之前，您需要将切换设置为 true 或 false

# scheme - 开发简单的功能

> ID：14574332
> 
> 赞同：1
> 
> 时间：2013-01-29T01:42:10.793
> 
> 标签：scheme, racket

```
(define-struct animal (name species age breakfasthour dinnerhour))
(define-struct attendant (name a1 a2 a3))

(define gorilla (make-animal "Koko" "Gorilla" 4 "8" "10"))
(define bat (make-animal "Bruce" "Bat" 1 "23" "5"))
(define mandrill (make-animal "Manny" "Mandrill" 5 "8" "7"))
(define crocodile (make-animal "Swampy" "Crocodile" 1 "10" "8"))
(define ocelot (make-animal "Ozzy" "Ocelot" 7 "7" "17"))
(define capybara (make-animal "Capy" "Capybara" 4 "6" "8"))
(define potto (make-animal "Spot" "Potto" 2 "2" "6"))
(define tapir (make-animal "Stripey" "Tapir" 3 "10" "6"))
(define vulture (make-animal "Beaky" "Vulture" 10 "9" "6"))

(define attendant1 (make-attendant "Dave" gorilla bat mandrill))
(define attendant2 (make-attendant "John" crocodile ocelot capybara))
(define attendant3 (make-attendant "Joe" potto tapir vulture)) 
```

我需要一个函数来接收动物并返回它的进餐时间，如果我吃大猩猩，那么晚餐时间是 10 点。这就是我所做的。忽略上面数字上的引号。

```
(define (meal-time? e1 e2)
  (string=? (animal-species e1)
            (animal-dinnerhour e2))) 
```

它运行，但 wnt 给我一个输出。为什么它不会给我一个输出？

编辑-`(meal-time? gorilla 10)`告诉我它需要一个动物，但给出了 10。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T02:35:12.620

你的`meal-time?`函数接受两个动物作为参数（因为你`animal-`在两个参数上都使用了访问器函数），但是你用一个动物和一个数字来调用它。因此，您会收到一条错误消息，告诉您第二个参数应该是动物。

如果你用两只动物作为参数调用你的函数，你就不会再得到错误了。你会得到`#f`. 你的函数所做的是：它检查第一个动物的物种是否等于第二个动物的晚餐时间。既然没有物种的名字是数字，那永远不会是真的。

# cocoa - 在 NSCollectionView 中双击

> ID：14574334
> 
> 赞同：8
> 
> 时间：2013-01-29T01:42:57.403
> 
> 标签：cocoa, nscollectionview

我试图让我的程序识别带有 NSCollectionView 的双击。我已经尝试遵循本指南：[http](http://www.springenwerk.com/2009/12/double-click-and-nscollectionview.html) ://www.springenwerk.com/2009/12/double-click-and-nscollectionview.html但是当我这样做时，没有任何反应，因为 IconViewBox 中的代表为空：

h 文件：

```
@interface IconViewBox : NSBox
{
    IBOutlet id delegate;
}
@end 
```

m 文件：

```
@implementation IconViewBox

-(void)mouseDown:(NSEvent *)theEvent {
    [super mouseDown:theEvent];

    // check for click count above one, which we assume means it's a double click
    if([theEvent clickCount] > 1) {
        NSLog(@"double click!");
        if(delegate && [delegate respondsToSelector:@selector(doubleClick:)]) {
            NSLog(@"Runs through here");
            [delegate performSelector:@selector(doubleClick:) withObject:self];
        }
    }
} 
```

第二个 NSLog 永远不会被打印，因为委托为空。我已经连接了 nib 文件中的所有内容并按照说明进行操作。有谁知道为什么或为什么要这样做？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-09-19T07:37:34.137

您可以通过子类化集合项的视图来捕获集合视图项中的多次单击。

1.  子类化`NSView`并添加一个`mouseDown:`检测多次点击的方法
2.  将笔尖中 NSCollectionItem 的视图从更改`NSView`为`MyCollectionView`
3.  `collectionItemViewDoubleClick:`在关联中实现`NSWindowController`

这是通过让`NSView`子类检测到双击并传递响应者链来实现的。调用响应者链中要实现的第一个对象`collectionItemViewDoubleClick:`。

通常，您应该`collectionItemViewDoubleClick:`在 associated 中实现`NSWindowController`，但它可以在响应者链中的任何对象中。

```
@interface MyCollectionView : NSView
/** Capture double-clicks and pass up responder chain */
-(void)mouseDown:(NSEvent *)theEvent;
@end

@implementation MyCollectionView

-(void)mouseDown:(NSEvent *)theEvent
{
    [super mouseDown:theEvent];

    if (theEvent.clickCount > 1)
    {
        [NSApplication.sharedApplication sendAction:@selector(collectionItemViewDoubleClick:) to:nil from:self];
    }
}

@end 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2019-03-08T01:14:12.450

另一种选择是覆盖`NSCollectionViewItem`并添加`NSClickGestureRecognizer`这样的：

```
- (void)viewDidLoad
{
    NSClickGestureRecognizer *doubleClickGesture = 
            [NSClickGestureRecognizer alloc] initWithTarget:self
                                                     action:@selector(onDoubleClick:)];
   [doubleClickGesture setNumberOfClicksRequired:2];
   // this should be the default, but without setting it, single clicks were delayed until the double click timed-out
   [doubleClickGesture setDelaysPrimaryMouseButtonEvents:FALSE];
   [self.view addGestureRecognizer:doubleClickGesture];
}

- (void)onDoubleClick:(NSGestureRecognizer *)sender
{
    // by sending the action to nil, it is passed through the first responder chain
    // to the first object that implements collectionItemViewDoubleClick:
    [NSApp sendAction:@selector(collectionItemViewDoubleClick:) to:nil from:self];
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-29T04:10:19.120

尽管您说了些什么，但您需要确保您遵循了教程中的第四步：

```
4\. Open IconViewPrototype.xib in IB and connect the View's delegate outlet with "File's Owner": 
```

如果您确实遵循了其余步骤，那应该可以。

# xcode - 如何区分 xcconfig 文件中的“Ad Hoc”和“App Store”代码签名身份？

> ID：14574340
> 
> 赞同：3
> 
> 时间：2013-01-29T01:43:21.053
> 
> 标签：xcode, jenkins, code-signing, xcodebuild, xcconfig

我正在尝试设置一个 Unity iOS 项目来通过 Jenkins 运行自动构建。到目前为止，我已经让 Jenkins 触发了一个 Unity 构建，它生成了一个 XCode 项目。然后，使用 xcodebuild 和 XCode 4.5.2，我试图生成一个 Ad-Hoc IPA 文件以在 Testflight 上分发。

为了在 XCode 项目中指定代码签名身份，我将一个非常简单的 xcconfig 文件传递​​给 xcodebuild。xcconfig 文件如下所示：

```
//:configuration = Release
CODE_SIGN_IDENTITY[sdk=iphoneos*] = iPhone Distribution: Company Name

//:completeSettings = none 
```

我遇到的问题是“iPhone Distribution：Company Name”不明确；它指的是“Ad Hoc”和“App Store”代码签名身份。当然，当我运行构建时，XCode 会选择 App Store 身份而不是 Ad-Hoc，这与我在这种情况下想要的相反。

有没有办法指定我想通过 xcconfig 文件使用 Ad-Hoc 身份？我无法以这种方式明确指定身份，这似乎真的很奇怪。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-05T11:39:40.837

我还没有使用 Unity 和 TestFlight。

但一般的解决方案是为 AdHoc 和 AppStore 使用两个不同的 AppId。这样 xCode 可以自动选择正确的。

# asp.net-mvc - SignalR 动态端点

> ID：14574341
> 
> 赞同：2
> 
> 时间：2013-01-29T01:43:26.857
> 
> 标签：asp.net-mvc, signalr

我正在开发一个协作文档编辑应用程序，客户可以在其中打开文档，通过网络服务发布编辑，并使用 SignalR 订阅对文档所做的更新。我正在试验我的 SignalR 设置，但不能完全得到我想要的。

我的直觉告诉我，我应该为每个文档都有一个名为“subscribe”的端点进行设置，因此完整路径将是文档 1 的“/documents/1/subscribe”和“/documents/2/subscribe” ” 对于文档 2。但是，据我所知，SignalR 希望我有一个端点，然后通过使用组或自己管理代码中文档的订阅者列表来管理哪些客户端获取更新并发送出去个别消息。

结果我有两个问题。

1.  有没有办法用 SignalR 做我想做的事情？
2.  我想做的事情是完全错误的和愚蠢的吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T05:59:18.163

除了“专用”、友好的 URL 之外，与仅使用组相比，我并没有真正看到任何价值。事实上，我能看到它做的唯一一件事就是增加了更多的开销，因为 SignalR 的消息总线内部在规模方面的工作方式。

如果您确实想尝试这个，那么您需要弄清楚的基本事情是在每个文档中动态注册路由，正如 Phil Haack 的[RouteMagic](https://github.com/Haacked/RouteMagic)为 MVC 所做的那样，我想 SignalR 路由配置可能是好。

# css - CSS 变换，chrome 中的锯齿状边缘

> ID：14574353
> 
> 赞同：1
> 
> 时间：2013-01-29T01:44:32.263
> 
> 标签：css, rotation, edges

i have a problem with jagged edges in chrome. Rest of browsers supporting this good but only chrome make this edges horible. Fiddle here: [http://jsfiddle.net/2HZ8A/](http://jsfiddle.net/2HZ8A/) I tried with `-webkit-backface-visibility: hidden;` and it was working, but... i'm using parallax effects on my website and fixed top menu, when i put `-webkit-backface-visibility: hidden;` to .row1 and .row2 then everything's is crashing.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-12-08T16:11:43.427

我知道这大约晚了一年，但这似乎有效。

```
[class*="row"] {
   outline: 1px solid transparent;
   -webkit-backface-visibility: hidden;
} 
```

[http://jsfiddle.net/JacobJWBurden/kkd5g5u7/](http://jsfiddle.net/JacobJWBurden/kkd5g5u7/)

# actionscript-3 - Flash：AS3 - 在电影中翻转时将符号置于前面

> ID：14574355
> 
> 赞同：0
> 
> 时间：2013-01-29T01:44:33.233
> 
> 标签：actionscript-3, flash, mouseover, rollover

我使用 AS3 在 Flash 中创建了一张欧洲地图。我是一个绝对的初学者。每个国家都被转换成电影（使用套索工具）。这些电影位于主时间线上的一层（可以看到轻微的轮廓）。在另一个主要时间线图层上是欧洲的原始轮廓图。

我已经设法做到了，所以当一个国家/地区翻转时，一个框会按比例调整为全尺寸（稍后插入文本）。

我需要做到这一点，以便当每个国家/地区翻转时，该国家/地区的文本框（出现在 Roll_Over 上）会出现在“最前面”。

目前有几个国家的文本框可以正常工作（即：填充为白色且完全可见），但大多数要么隐藏在主地图下方，要么随机穿过微弱的电影剪辑轮廓（位于前面）。

我猜这与显示列表有关。运作良好的国家可能处于领先地位。但是我如何才能使翻转的国家立即达到顶峰并在 Roll_Out 上返回？

这将完成我的地图，因此非常感谢任何帮助。

我使用了以下代码：

//第一帧

```
this.stop();
movieClip_6.addEventListener(MouseEvent.ROLL_OVER, fl_MouseOverHandler_15);
function fl_MouseOverHandler_15(event:MouseEvent):void
{
gotoAndPlay(2); 
}
movieClip_6.addEventListener(MouseEvent.ROLL_OUT, fl_MouseOutHandler_67);
function fl_MouseOutHandler_67(event:MouseEvent):void
{
gotoAndStop(1); 
} 
```

//下面的部分是我的问题

```
movieclip_6.addEventListener(MouseEvent.ROLL_OVER,Rollover,false,0,true);
function Rollover(event:MouseEvent): void
{ 
setChildIndex(MovieClip(e.target),this.numChildren-1);
} 
```

提前谢谢了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T01:56:53.263

您可以尝试再次向 DisplayObject/Movieclip 调用 addChild() 以将其置于最前面。代替：

```
setChildIndex(MovieClip(e.target),this.numChildren-1); 
```

尝试去：

```
addChild(MovieClip(e.target)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T23:06:42.393

您可以使用“层”将对象置于另一个对象之前。

构造函数：

```
//Create the front layer
var frontLayer:Sprite = new Sprite();

//put all text boxes into front layer
frontLayer.addChild(textbox1); //etc...

//Add layer to mc
addChild(frontLayer); 
```

翻转弹出：

```
textbox1.visible = true; 
```

弹出：

```
textbox1.visible = false; 
```

# android - AdMob API 中 AdRequest.addKeyword() 的行为

> ID：14574361
> 
> 赞同：2
> 
> 时间：2013-01-29T01:45:42.347
> 
> 标签：android, admob

是否`addKeyword()`将添加的关键字列入白名单或黑名单？文档没有说明是哪个。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-31T19:19:42.717

简短的回答 -**白名单**。

更长的答案 - AdMob 前置式广告目前未使用此信号。如果您启用了这些关键字，我们会将这些关键字传递到 AdSense 补余广告，但它们也可能不会使用该信号。所以现在使用 addKeyword 几乎没有效果，因此通常不使用。

# javascript - 点击事件 D3.js 仅在第一次工作

> ID：14574364
> 
> 赞同：1
> 
> 时间：2013-01-29T01:46:06.773
> 
> 标签：javascript, events, d3.js

我有一个有不同行的表。每一行都是不同的数据集。我有一个点击事件附加到当您点击特定行时提供额外图表的行。

但它只在第一次起作用。在您第一次单击特定行后，数据会显示在图表中，但如果您单击另一行，则图表不会更改。

这是我的一些代码：

```
 var chart = d3.select("body").append("svg")
          .attr("class", "chart")
          .attr("width", w * 24)
          .attr("height", h);

//saturday
var saturday = d3.select(".saturday")
        .selectAll("td")
        .data(d3.values(twitterDays[5][5]))
          .enter()
          .append("td")
          .attr("class", function(d) { return "hour h" + color(d); });

d3.select(".saturday").on("click", function() {
              chart.selectAll("rect")
                   .data(d3.values(twitterDays[5][5]))
                 .enter().append("rect")
                   .attr("x", function(d, i) { return x(i) - .5; })
                   .attr("y", function(d) { return h - y(d) - .5; })
                   .attr("width", w)
                   .attr("height", function(d) { return y(d); })

              chart.append("line")
                   .attr("x1", 0)
                   .attr("x2", w * d3.values(twitterDays[5][5]).length)
                   .attr("y1", h - .5)
                   .attr("y2", h - .5)
                   .style("stroke", "#000");
            });

//sunday
var sunday = d3.select(".sunday")
        .selectAll("td")
        .data(d3.values(twitterDays[6][6]))
          .enter()
          .append("td")
          .attr("class", function(d) { return "hour h" + color(d); });         

d3.select(".sunday").on("click", function() {
            chart.selectAll("rect")
                 .data(d3.values(twitterDays[6][6]))
               .enter().append("rect")
                 .attr("x", function(d, i) { return x(i) - .5; })
                 .attr("y", function(d) { return h - y(d) - .5; })
                 .attr("width", w)
                 .attr("height", function(d) { return y(d); })

            chart.append("line")
                 .attr("x1", 0)
                 .attr("x2", w * d3.values(twitterDays[6][6]).length)
                 .attr("y1", h - .5)
                 .attr("y2", h - .5)
                 .style("stroke", "#000");
          }); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-29T01:56:20.507

您只负责所谓的输入选择；这意味着在您的代码中只实现了矩形的创建，而不是矩形的更新或删除。

请参阅通用更新模式：[通用更新模式，I](http://bl.ocks.org/3808218 "一般更新模式，我")

```
 // DATA JOIN
  // Join new data with old elements, if any.
  var text = svg.selectAll("text")
      .data(data);

  // UPDATE
  // Update old elements as needed.
  text.attr("class", "update");

  // ENTER
  // Create new elements as needed.
  text.enter().append("text")
      .attr("class", "enter")
      .attr("x", function(d, i) { return i * 32; })
      .attr("dy", ".35em");

  // ENTER + UPDATE
  // Appending to the enter selection expands the update selection to include
  // entering elements; so, operations on the update selection after appending to
  // the enter selection will apply to both entering and updating nodes.
  text.text(function(d) { return d; });

  // EXIT
  // Remove old elements as needed.
  text.exit().remove();
} 
```

请务必查看 Mike 的[Thinking with Joins](http://bost.ocks.org/mike/join/ "用联接思考")。

# angularjs - 单击外部时隐藏AngularJS下拉指令

> ID：14574365
> 
> 赞同：44
> 
> 时间：2013-01-29T01:46:15.993
> 
> 标签：angularjs

我正在尝试使用复选框和过滤器选项创建一个多选下拉列表。我试图通过点击外部来隐藏列表，但无法弄清楚如何。感谢你的帮助。

[http://plnkr.co/edit/tw0hLz68O8ueWj7uZ78c](http://plnkr.co/edit/tw0hLz68O8ueWj7uZ78c)

* * *

## 回答 #1

> 赞同：72
> 
> 时间：2013-06-27T11:52:27.673

请注意，您的解决方案（问题中提供的 Plunker）在打开第二个弹出窗口（在具有多个选择的页面上）时不会关闭其他框的弹出窗口。

通过单击一个框打开一个新的弹出窗口，单击事件将始终停止。该事件永远不会到达任何其他打开的弹出窗口（关闭它们）。

我通过删除该`event.stopPropagation();`行并匹配弹出窗口的所有子元素来解决这个问题。

仅当事件元素与弹出窗口的任何子元素都不匹配时，弹出窗口才会关闭。

我将指令代码更改为以下内容：

**select.html（指令代码）**

```
link: function(scope, element, attr){

    scope.isPopupVisible = false;

    scope.toggleSelect = function(){
        scope.isPopupVisible = !scope.isPopupVisible;
    }

    $(document).bind('click', function(event){
        var isClickedElementChildOfPopup = element
            .find(event.target)
            .length > 0;

        if (isClickedElementChildOfPopup)
            return;

        scope.$apply(function(){
            scope.isPopupVisible = false;
        });
    });
} 
```

**我分叉了你的 plunker 并应用了更改：**

[Plunker：在外部点击时隐藏弹出 div](http://plnkr.co/edit/ybYmHtFavHnN1oD8vsuw?p=preview)

**截屏：**

![Plunker 截图](../Images/436b641252f53b4d4c591b141ed39cb2.png)

* * *

## 回答 #2

> 赞同：53
> 
> 时间：2015-04-15T22:37:29.583

这是一篇旧帖子，但如果这对这里的任何人有帮助，这里是一个点击外部的工作示例，它不依赖于任何东西，但有角度。

```
module('clickOutside', []).directive('clickOutside', function ($document) {

        return {
           restrict: 'A',
           scope: {
               clickOutside: '&'
           },
           link: function (scope, el, attr) {

               $document.on('click', function (e) {
                   if (el !== e.target && !el[0].contains(e.target)) {
                        scope.$apply(function () {
                            scope.$eval(scope.clickOutside);
                        });
                    }
               });
           }
        }

    }); 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2013-01-29T14:25:38.023

好的，我不得不调用 $apply() 因为事件发生在角度世界之外（根据文档）。

```
 element.bind('click', function(event) {
    event.stopPropagation();      
    });

    $document.bind('click', function(){
    scope.isVisible = false;
    scope.$apply();
    }); 
```

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2013-01-29T08:07:47.007

我通过监听全局点击事件来实现这一点，如下所示：

```
.directive('globalEvents', ['News', function(News) {
    // Used for global events
    return function(scope, element) {
        // Listens for a mouse click
        // Need to close drop down menus
        element.bind('click', function(e) {
            News.setClick(e.target);
        });
    }
}]) 
```

然后通过新闻服务广播事件本身

```
angular.factory('News', ['$rootScope', function($rootScope) {
    var news = {};
    news.setClick = function( target ) {
        this.clickTarget = target;
        $rootScope.$broadcast('click');
    };
}]); 
```

然后，您可以在任何需要的地方收听广播。这是一个示例指令：

```
.directive('dropdown', ['News', function(News) {
  // Drop down menu für the logo button
  return {
    restrict: 'E',
    scope: {},
    link: function(scope, element) {
      var opened = true;
      // Toggles the visibility of the drop down menu
      scope.toggle = function() {
        element.removeClass(opened ? 'closed' : 'opened');
        element.addClass(opened ? 'opened' : 'closed');
      };
      // Listens for the global click event broad-casted by the News service
      scope.$on('click', function() {
        if (element.find(News.clickTarget.tagName)[0] !== News.clickTarget) {
          scope.toggle(false);
        }
      });
      // Init
      scope.toggle();
    }
  }
}]) 
```

我希望它有帮助！

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2014-11-13T22:24:56.743

我对提供的答案并不完全满意，所以我自己做了。改进：

*   范围的更多防御性更新。将检查申请/摘要是否已经在进行中
*   当用户按下退出键时，div 也会关闭
*   当 div 关闭时，窗口事件未绑定（防止泄漏）
*   范围被销毁时，窗口事件未绑定（防止泄漏）

    功能链接（范围，$元素，属性，$窗口）{

    ```
    var el = $element[0],
        $$window = angular.element($window);

    function onClick(event) {
        console.log('window clicked');

        // might need to polyfill node.contains
        if (el.contains(event.target)) {
            console.log('click inside element');
            return;

        }

        scope.isActive = !scope.isActive;
        if (!scope.$$phase) {
            scope.$apply();
        }
    }

    function onKeyUp(event) {

        if (event.keyCode !== 27) {
            return;
        }

        console.log('escape pressed');

        scope.isActive = false;
        if (!scope.$$phase) {
            scope.$apply();
        }
    }

    function bindCloseHandler() {
        console.log('binding window click event');
        $$window.on('click', onClick);
        $$window.on('keyup', onKeyUp);
    }

    function unbindCloseHandler() {
        console.log('unbinding window click event');
        $$window.off('click', onClick);
        $$window.off('keyup', onKeyUp);
    }

    scope.$watch('isActive', function(newValue, oldValue) {
        if (newValue) {
            bindCloseHandler();
        } else {
            unbindCloseHandler();
        }
    });

    // prevent leaks - destroy handlers when scope is destroyed
    scope.$on('$destroy', function() {
        unbindCloseHandler();
    }); 
    ```

    }

我`$window`直接进入链接功能。但是，您无需完全执行此操作即可获得`$window`.

```
function directive($window) {
    return {
        restrict: 'AE',
        link: function(scope, $element, attributes) {
            link.call(null, scope, $element, attributes, $window);
        }
    };
} 
```

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2015-11-06T10:50:29.890

有一个很酷的指令叫做`angular-click-outside`. 你可以在你的项目中使用它。使用起来超级简单：

[https://github.com/IamAdamJowett/angular-click-outside](https://github.com/IamAdamJowett/angular-click-outside)

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2018-11-24T01:59:52.410

Danny F 发布的答案很棒而且几乎完整，但是 Thịnh 的评论是正确的，所以这是我修改后的指令，用于删除指令的 $destroy 事件的侦听器：

```
const ClickModule = angular
.module('clickOutside', [])
.directive('clickOutside', ['$document', function ($document) {
    return {
        restrict: 'A',
        scope: {
            clickOutside: '&'
        },
        link: function (scope, el, attr) {
            const handler = function (e) {
                if (el !== e.target && !el[0].contains(e.target)) {
                    scope.$apply(function () {
                        console.log("hiiii");
                        //  whatever expression you assign to the click-outside attribute gets executed here
                        //  good for closing dropdowns etc
                        scope.$eval(scope.clickOutside);
                    });
                }
            }

            $document.on('click', handler);

            scope.$on('$destroy', function() {
                $document.off('click', handler);
            });
        }
    }
}]); 
```

如果您在处理程序方法中放置一个日志，当元素从 DOM 中删除时，您仍然会看到它触发。添加我的小改动就足以将其删除。不是想抢走任何人的风头，但这是对优雅解决方案的修复。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2018-04-27T02:02:15.083

使用[angular-click-out](https://github.com/IamAdamJowett/angular-click-outside)

**安装：**

```
bower install angular-click-outside --save
npm install @iamadamjowett/angular-click-outside
yarn add @iamadamjowett/angular-click-outside 
```

**用法：**

```
angular.module('myApp', ['angular-click-outside'])

//in your html
<div class="menu" click-outside="closeThis">
...
</div>

//And then in your controller
$scope.closeThis = function () {
    console.log('closing');
} 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2020-10-27T19:33:28.050

[我在https://github.com/IamAdamJowett/angular-click-outside](https://github.com/IamAdamJowett/angular-click-outside)中发现了一些实现问题

例如，如果单击的元素从 DOM 中删除，则上面的指令将触发逻辑。这对我不起作用，因为我在模态中有一些逻辑，点击后，用 ng-if 删除了元素。

我重写了他的实现。未经实战测试，但似乎效果更好（至少在我的情况下）

```
angular
  .module('sbs.directives')
  .directive('clickOutside', ['$document', '$parse', '$timeout', clickOutside]);

const MAX_RECURSIONS = 400;

function clickOutside($document, $parse, $timeout) {
  return {
    restrict: 'A',
    link: function ($scope, elem, attr) {
      // postpone linking to next digest to allow for unique id generation
      $timeout(() => {
        function runLogicIfClickedElementIsOutside(e) {
          // check if our element already hidden and abort if so
          if (angular.element(elem).hasClass('ng-hide')) {
            return;
          }

          // if there is no click target, no point going on
          if (!e || !e.target) {
            return;
          }

          let clickedElementIsOutsideDirectiveRoot = false;
          let hasParent = true;
          let recursions = 0;

          let compareNode = elem[0].parentNode;
          while (
            !clickedElementIsOutsideDirectiveRoot &&
            hasParent &&
            recursions < MAX_RECURSIONS
          ) {
            if (e.target === compareNode) {
              clickedElementIsOutsideDirectiveRoot = true;
            }

            compareNode = compareNode.parentNode;
            hasParent = Boolean(compareNode);
            recursions++; // just in case to avoid eternal loop
          }

          if (clickedElementIsOutsideDirectiveRoot) {
            $timeout(function () {
              const fn = $parse(attr['clickOutside']);
              fn($scope, { event: e });
            });
          }
        }

        // if the devices has a touchscreen, listen for this event
        if (_hasTouch()) {
          $document.on('touchstart', function () {
            setTimeout(runLogicIfClickedElementIsOutside);
          });
        }

        // still listen for the click event even if there is touch to cater for touchscreen laptops
        $document.on('click', runLogicIfClickedElementIsOutside);

        // when the scope is destroyed, clean up the documents event handlers as we don't want it hanging around
        $scope.$on('$destroy', function () {
          if (_hasTouch()) {
            $document.off('touchstart', runLogicIfClickedElementIsOutside);
          }

          $document.off('click', runLogicIfClickedElementIsOutside);
        });
      });
    },
  };
}

function _hasTouch() {
  // works on most browsers, IE10/11 and Surface
  return 'ontouchstart' in window || navigator.maxTouchPoints;
} 
```

# windows-phone-7 - WP7视频画笔方向

> ID：14574366
> 
> 赞同：0
> 
> 时间：2013-01-29T01:46:22.513
> 
> 标签：windows-phone-7

我在这里和不同的门户网站上进行了几次问答，但无法正常工作...我的页面方向是纵向...

```
 <Rectangle x:Name="videoRectangle" Margin="0,0,0,0">
        <Rectangle.Fill>
            <VideoBrush x:Name="viewfinderBrush" AlignmentX="Left" AlignmentY="Top" Stretch="UniformToFill">
                <VideoBrush.RelativeTransform>
                    <CompositeTransform x:Name="videoBrushTransform" CenterX="0.5" CenterY="0.5" />
                </VideoBrush.RelativeTransform>
            </VideoBrush>
        </Rectangle.Fill>
    </Rectangle> 
```

ARPage_OrientationChanged 背后的代码永远不会被调用

```
 public ARPage()
    {
        InitializeComponent();

        this.OrientationChanged += ARPage_OrientationChanged;
    }

    void ARPage_OrientationChanged(object sender, OrientationChangedEventArgs e)
    {
        abc.Text = e.Orientation.ToString();

        switch (e.Orientation)
        {
            case PageOrientation.Landscape:
            case PageOrientation.LandscapeLeft:
                videoBrushTransform.Rotation = 0;
                break;
            case PageOrientation.LandscapeRight:
                videoBrushTransform.Rotation = -45;
                break;
            case PageOrientation.Portrait:
            case PageOrientation.PortraitUp:
                videoBrushTransform.Rotation = -270;
                break;
            case PageOrientation.PortraitDown:
                videoBrushTransform.Rotation = -90;
                break;
        }
    } 
```

视频画笔始终以横向模式显示视频...

我做错了什么

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T11:48:04.820

不必在构造函数中分配事件，您可以这样做：

```
public ARPage()
    {
        InitializeComponent();
    }

protected override void OnOrientationChanged(OrientationChangedEventArgs e)
        {
            abc.Text = e.Orientation.ToString();

            switch (e.Orientation)
            {
                case PageOrientation.Landscape:
                case PageOrientation.LandscapeLeft:
                    videoBrushTransform.Rotation = 0;
                    break;
                case PageOrientation.LandscapeRight:
                    videoBrushTransform.Rotation = -45;
                    break;
                case PageOrientation.Portrait:
                case PageOrientation.PortraitUp:
                    videoBrushTransform.Rotation = -270;
                    break;
                case PageOrientation.PortraitDown:
                    videoBrushTransform.Rotation = -90;
                    break;
            }

            base.OnOrientationChanged(e);
        } 
```

# javascript - 等待多个延迟对象完成

> ID：14574367
> 
> 赞同：2
> 
> 时间：2013-01-29T01:46:22.403
> 
> 标签：javascript, jquery, jquery-deferred

当等待多个延迟对象完成时，为什么：

```
$.when(tasks).then(function() {
    document.write("Completed all requests." + "<br/>");
}); 
```

立即执行，但

```
$.when.apply(null, tasks).then(function () {
    document.write("Completed all requests." + "<br/>");
}); 
```

等到任务完成。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-29T01:47:10.203

该[`when`](http://api.jquery.com/jQuery.when/)函数不采用延迟数组。相反，您将每个 deferred 作为单独的参数传递。这正是[`apply`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Function/apply)为你做的事情。

`null`传递给`apply`只是因为这是期望`apply`的：第一个参数是函数调用时应该设置的上下文，第二个参数始终是一个数组，它将被扩展以便函数被调用为如果数组中的所有项目都作为单独的参数传入。

因为就它的目的而言，`when`它被调用的上下文没有任何区别，它的`null`工作原理和其他任何东西一样好。我更喜欢将 jQuery 本身传递给它：

```
$.when.apply($, tasks).then(function () {
    // Whatever
}); 
```

因为我认为它看起来更干净，但这只是我。它没有任何区别。

* * *

如果您的浏览器支持原生 Promise（或者您正在使用[polyfill](https://github.com/getify/native-promise-only)），您可以改用它的`all`方法，该方法直接采用一组 Promise：

```
Promise.all(tasks).then(function (values) {
    // "values" is an array, with the results of each of the "tasks"
}); 
```

# javascript - 当 div 单击 JQuery 时需要帮助显示适当的内容

> ID：14574370
> 
> 赞同：1
> 
> 时间：2013-01-29T01:46:33.013
> 
> 标签：javascript, jquery

我正在尝试使用此方法显示适当的内容：确定单击的 div 的 id，而不是使用确定的 id + '-box' 打开 div 内容。但它不起作用。

# 不工作的jQuery：

```
$(".portfolio-apps section").click(function() {
    var currentID = '#' + $(this).attr('id');
    console&&console.log(currentID);
    var currentIDBox = currentID + "-box";
    console&&console.log(currentIDBox);
    $(currentID).click(function() {
        $('.portfolio-entry-text').hide('fast');
        var bcn = $(currentIDBox);
        if ($('.box-content').is(':visible')) {
            $('.box-content').hide();
            bcn.show();
        }
        else {
            $('.box-content').hide();
            bcn.slideToggle(200);
        }
    });
}); 
```

# 正在工作的类似 JQuery：

```
$("#gterminal").click(function() {
    $('.portfolio-entry-text').hide('fast');
    var bcn = $('#gterminal-box');
    if ($('.box-content').is(':visible')) {
        $('.box-content').hide();
        bcn.show();
    }
    else {
        $('.box-content').hide();
        bcn.slideToggle(200);

    }
}); 
```

# HTML

```
<div class="portfolio-apps clearfix">
         <section class="button" id="gterminal">
            <span>Google in Terminal</span>
         </section>
         <section class="button" id="MySQLToJSON">
            <span>MySQL to JSON</span>
         </section>
        </div>

<div id="wrapper" >
      <div class="box-content" id="gterminal-box">
          <p>BOX 1</p>
      </div>

      <div class="box-content" id="MySQLToJSON-box">
          <p>BOX 2</p>
      </div>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T01:50:38.933

您在`.click`内部绑定了一个事件，这意味着在`-box`第二次单击之前不会触发显示/隐藏。这对我来说没有意义。如果您只是删除内部`.click`绑定，它似乎工作得很好：

[http://jsfiddle.net/Th3wT/](http://jsfiddle.net/Th3wT/)

# ajax - Phpfox 使用 ajax 实现自动完成

> ID：14574375
> 
> 赞同：1
> 
> 时间：2013-01-29T01:47:03.157
> 
> 标签：ajax, phpfox

我的 javascript 文件中有这个

```
$("#searchPlaces" ).autocomplete({
    source:function( request, response ) {
        $.ajaxCall('mymodule.getcities', 'startsWith='+request.term);
    },
    autoFocus: true
}); 
```

这是在我的 ajax php 文件中。

```
public function getcities(){
    $cities = array("1" ,"2", "3", "4");
    $this->call(json_encode($cities));
} 
```

它将数组作为 json 返回就好了，但自动完成字段中没有显示任何内容。

有谁知道如何使用 ajaxCall 函数在 phpfox 中完成这项任务？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T01:57:13.453

所以我能够解决这个问题。问题是自动完成需要指定的响应。ajaxCall 没有真正的成功回调，因此无法使用返回的数据设置响应。我决定绕道而行，手动设置所有内容。这就是我想出的。

* * *

`include\component\controller\mycontroller.class.php`

`$this->template()->assign(array('token' => Phpfox::getService('log.session')->getToken());`

* * *

`template\default\somehtml.html.php`

`<input id="security_token" type="hidden" name="phpfox[security_token]" value="{$token}" />`

* * *

`static\jscript\myjavascript.js`

```
 $("#searchPlaces" ).autocomplete({
      source:function( request, response ) {
          $.ajax({ 
            url: "/static/ajax.php",
            minLength: 1,
            dataType: "json",
            data: {
                startsWith: request.term,
                'core[security_token]': $("#security_token").val(),
                'core[ajax]': true,
                'core[call]': 'mymodule.myfunction'
            },
            success: function( data ) {
                response( data );
            }
          });
      },
            autoFocus: true
  }); 
```

* * *

`include\component\ajax\ajax.class.php`

```
public function myfunction(){
        $yourdata = array("1" ,"2", "3", "4");
        $this->call(json_encode($yourdata ));
    } 
```

* * *

基本上，安全令牌是通过隐藏元素设置的。该 url 将始终是`url: "/static/ajax.php",`，因为这将负责为您调用 ajax 文件。`'core[call]': 'mymodule.myfunction'`这设置为您将如何使用`$.ajaxCall('mymodule.myfunction')`. 您需要做的就是找到您现在想要正常返回的自动完成项目。

希望这有助于以防其他人遇到同样的情况。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T14:27:09.187

默认的 phpfox $.ajaxCall 实际上返回一个 jQuery jqXHR 对象。

因此，与其手动重建整个 ajax 调用，人们仍然可以使用 phpfox 的 $.ajaxCall 并在 .done() 承诺回调中设置自动完成响应：

```
$("#searchPlaces" ).autocomplete({
    source:function( request, response ) {
        $.ajaxCall('mymodule.getcities', 'startsWith='+request.term)
            .done(function( data ) {
                response( $.parseJSON(data) );
            });
    },
    autoFocus: true
}); 
```

请注意，$.ajaxCall ajax 请求使用“脚本”作为数据类型，因此您需要自己解析返回的字符串，在这种情况下，它是一个 json 字符串，而 $.parseJSON() 可以解决问题。

# c# - TileControl Devexpress

> ID：14574381
> 
> 赞同：1
> 
> 时间：2013-01-29T01:47:36.617
> 
> 标签：c#, winforms, microsoft-metro, devexpress

我使用 TileControl 开发了一个应用程序，在单击 Tiles 时，它正在导航到表单。表单包含 GridControl，当我在 gridview 上执行双击事件时，它正在导航到另一个表单并显示结果。现在的问题是，当我单击 Tile Menu 的后退按钮时，它直接显示主菜单，而不是具有 GridControl 的表单。我想先显示 GridControl，然后再显示主菜单。请帮我解决。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T07:06:55.183

据我所知，您正在使用[DocumentManager](http://help.devexpress.com/#WindowsForms/CustomDocument11359)，它是[WindowsUIView](http://help.devexpress.com/#WindowsForms/CustomDocument11358)。

为了能够从当前屏幕（带有项目详细信息）导航回上层（带有网格），您应该通过[ContentConteiner.Parent](http://help.devexpress.com/#WindowsForms/DevExpressXtraBarsDocking2010ViewsWindowsUIBaseContentContainer_Parenttopic)属性使当前内容容器知道它的父容器。
因此，您的容器层次结构应如下所示：

```
// mainTileContainer(MainMenu) 
//  -> gridItemsPage(GridControl)
//    -> itemDetailPage(DetailForm)
//...
mainTileContainer.ActivationTarget = gridItemsPage;
gridItemsPage.Parent = mainTileContainer;
itemDetailPage.Parent = gridItemsPage; 
```

相关链接：

1.  [内容容器](http://help.devexpress.com/#WindowsForms/CustomDocument11771)
2.  [层次结构和屏幕](http://help.devexpress.com/#WindowsForms/CustomDocument11770)
3.  [如何：创建内容容器层次结构](http://help.devexpress.com/#WindowsForms/CustomDocument11812)

# jquery-ui - Jquery UI 日期选择器禁用启用星期日、星期四并禁用特定日期

> ID：14574386
> 
> 赞同：0
> 
> 时间：2013-01-29T01:48:03.213
> 
> 标签：jquery-ui, jquery-ui-datepicker

我试图只启用星期四和星期日，但也禁用某些特定的星期日或星期四。我正在尝试使用此功能，但它还没有工作：

```
<script>
    var unavailableDates = ["2013-03-31", "2013-03-24"];

    function disabledays(date) {

        ymd = date.getFullYear() + "-" + (date.getMonth() + 1) + "-" + date.getDate();
        if ($.inArray(ymd, unavailableDates) == 0) {
            return [false, "", "Unavailable"]
        } else {

        //Show only sundays and thuersdays
        var day = date.getDay();
        return [(day == 0 || day == 4)];

    }

$('#txtDate').datepicker({
    beforeShowDay: disabledays

})

</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T02:21:08.497

两个问题：

1.  构建日期字符串的代码不会将 a 添加`0`到月份部分。你可以改变你的`unavailableDates`阵列。

2.  您需要检查的返回值`$.indexOf`是否为`>=`0 而不是等于 0。

有了这两个变化：

```
var unavailableDates = ["2013-3-31", "2013-3-24"];

function disabledays(date) {
    var ymd = date.getFullYear() + "-" + (date.getMonth() + 1) + "-" + date.getDate();
    if ($.inArray(ymd, unavailableDates) >= 0) {
        return [false, "", "Unavailable"];
    } else {
        //Show only sundays and thuersdays
        var day = date.getDay();
        return [(day == 0 || day == 4)];
    }
}

$('#txtDate').datepicker({
    beforeShowDay: disabledays
}); 
```

**示例：http:** [//jsfiddle.net/XJKbV/](http://jsfiddle.net/XJKbV/)

# c++ - c++ 指针未声明

> ID：14574387
> 
> 赞同：0
> 
> 时间：2013-01-29T01:48:05.193
> 
> 标签：c++, pointers

我正在为一个类编写一个成员函数，我想根据传递给成员函数的字符串名称打印出一些动态分配的数组。以下代码以某种方式得到编译错误：

```
error: 'tmp' was not declared in this scope 
```

我应该如何进行编码？我的代码有什么问题？

```
void backgrnd::print(const char m[]){                                                                                      
    if (m == "interior")                                                       
        int* tmp = this->interior;                                             
    else if (m == "fB")                                                        
        float* tmp = this->fB;                                                 
    for (int i=0;i<this->n_vox;++i)                                         
        cout << tmp[i] << ' ';                                                 
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T01:49:20.850

如果您不熟悉编程，请使用大括号。这些变量在本地范围内。

```
if (m == "interior")         
{                                              
        int* tmp = this->interior;
}
....
tmp is out of scope.. 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-29T01:51:21.293

`tmp`变量仅在 if/else 范围内，在`for loop`.

但是，我建议使用更好的打印功能：

```
void backgrnd::print(const std::string& m)
{                                                                                      
    if (m == "interior")          
    {                                             
        std::cout << *interior << std::endl;                                             
    }
    else if (m == "fB")                                                        
    {
        std::cout <<fB << std::endl;                                                 
    }
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-29T02:10:22.667

您的代码存在一些问题。

您正在通过指针传递一个字符串（写入`const char []`与写入完全相同`const char *`- 顺便说一句，`const`是左关联的，您也可以编写它`char const *`）。

```
void backgrnd::print(const char m[]){ 
```

无论如何，在下一行中，您将此指针`m`与引用字符串文字常量的指针进行比较`"interior"`

```
 if (m == "interior") 
```

这*不是*您最可能想到的。此操作比较指针的值而不是字符串！如果您传递给函数的指针是相同的字符串字面量，那么指针只会比较相等，`"interior"`这种情况不太可能发生。如果它只是任何其他字符串，即使它也包含字符序列`interior`，它也不会比较相等。如果编译器和/或链接器没有将冗余字符串文字编辑为单个指针常量，也会发生这种情况。

当然，其他指针 - 字符串文字比较也会遇到同样的问题。

现在下一个问题是，您创建了一个作用域指针变量`tmp`，您使用一些相同类型的实例类成员指针变量对其进行初始化。但是一旦离开范围，该变量就不再可见......

```
 int* tmp = this->interior;                                             
    else if (m == "fB")                                                        
        float* tmp = this->fB; 
```

...而这个 for 循环再也看不到它了。现在这个循环本身就有问题，因为不清楚是什么`n_vox`意思。

```
 for (int i=0; i < this->n_vox; ++i) 
```

我猜你写上面是为了节省下面的一些代码重复。问题是：C++ 是一种静态类型的语言，所以下面的语句不能“动态”类型为`tmp`变量的类型。

```
 cout << tmp[i] << ' ';                                                 
} 
```

这里有一些建议：

使用 C++ 时，您应该使用*std::string*而不是裸字符数组。这也使相等运算符`==`执行您天真的期望的操作。如果您坚持使用 C 风格的 char 数组，请使用字符串比较函数，例如`strncmp`.

由于无论如何您都需要编写静态类型`cout<<`的语句，因此将该循环移动到`if`子句中。*使用花括号将它们括起来！*.

# java - 如何接收索引并显示其 ASCII 字符？

> ID：14574390
> 
> 赞同：1
> 
> 时间：2013-01-29T01:48:21.310
> 
> 标签：java, ascii

我有一个数字（0-127）的输入，并希望显示具有该索引的 ASCII 字符。到目前为止，我只用我自己的变量实现了这一点。有人可以解释一下如何用输入来代替吗？

我的代码：

```
import java.util.Scanner;

public class CharCode {
    public static void main (String [] args) {
        Scanner input = new Scanner(System.in);
        // obtain index
        System.out.print("Enter an ASCII code: ");
        String entry = input.next();
        // How do I get a char with the inputted ASCII index here?

        // I can do it with my own variable, but not with input:
        int i = 97;
        char c = (char) i; // c is now equal to 'a'
        System.out.println(c);
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T01:54:14.963

我认为您想输入用户任何 ASCII 值，它将以 char 值显示。为此，您需要更改，因为您必须对用户输入执行这些操作。

```
int entry = input.nextInt(); // get the inputted number as integer
// and
char c = (char) entry; 
```

**或者**

对于您当前的实施

```
//entry has to be String of numbers otherwise it will throw NumberFormatException.
char c = (char) (Integer.parseInt(entry)); // c will contain 'a' 
```

# javascript - JavaScript 多重继承和 instanceof

> ID：14574392
> 
> 赞同：6
> 
> 时间：2013-01-29T01:48:55.970
> 
> 标签：javascript, inheritance, prototype, multiple-inheritance, ecmascript-5

> **可能重复：**
> [Javascript 多重继承](https://stackoverflow.com/questions/7373644/javascript-multiple-inheritance)

JavaScript中有没有办法做到这一点：

```
Foo = function() {

};

Bar = function() {

};

Baz = function() {
    Foo.call(this);
    Bar.call(this);
};

Baz.prototype = Object.create(Foo.prototype, Bar.prototype);

var b = new Baz();
console.log(b);
console.log(b instanceof Foo);
console.log(b instanceof Bar);
console.log(b instanceof Baz); 
```

那么 Baz 既是 Foo 又是 Bar 的一个实例？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-29T01:54:33.883

JavaScript 没有多重继承。`instanceof`测试原型链，它是线性的。不过，您可以使用 mixins，这基本上就是您正在使用的`Foo.call(this); Bar.call(this)`. 但这不是继承；在 中`Object.create`，第二个参数只给出要复制的属性，而不是父级。

# c++ - C++ 排序算法

> ID：14574394
> 
> 赞同：2
> 
> 时间：2013-01-29T01:49:03.320
> 
> 标签：c++, algorithm, sorting, unordered-map, knuth

感谢您提前查看此问题。

我正在尝试订购以下物品清单：

```
Bpgvjdfj,Bvfbyfzc
Zjmvxouu,Fsmotsaa
Xocbwmnd,Fcdlnmhb
Fsmotsaa,Zexyegma
Bvfbyfzc,Qkignteu
Uysmwjdb,Wzujllbk
Fwhbryyz,Byoifnrp
Klqljfrk,Bpgvjdfj
Qkignteu,Wgqtalnh
Wgqtalnh,Coyuhnbx
Sgtgyldw,Fwhbryyz
Coyuhnbx,Zjmvxouu
Zvjxfwkx,Sgtgyldw
Czeagvnj,Uysmwjdb
Oljgjisa,Dffkuztu
Zexyegma,Zvjxfwkx
Fcdlnmhb,Klqljfrk
Wzujllbk,Oljgjisa
Byoifnrp,Czeagvnj 
```

变成如下顺序：

```
Bpgvjdfj
Bvfbyfzc
Qkignteu
Wgqtalnh
Coyuhnbx
Zjmvxouu
Fsmotsaa
Zexyegma
Zvjxfwkx
Sgtgyldw
Fwhbryyz
Byoifnrp
Czeagvnj
Uysmwjdb
Wzujllbk
Oljgjisa
Dffkuztu 
```

这是通过以下方式完成的：

1.  取第一对并将名称放入列表
2.  使用对的第二个名称，找到它用作名字的对
3.  将该对的第二个名称添加到列表中
4.  重复 2 & 3

我正在用这些对填充 unordered_map，然后对每个名称进行排序并将其添加到列表中。这可以在以下代码中看到：

```
westIter = westMap.begin();
std::string westCurrent = westIter->second;
westList.push_front(westCurrent);

for(int i = 0; i < 30; i++)
{
    if(westMap.find(westCurrent) != westMap.end())
    {
        //find pair in map where first iterator is equal to "westCurrent"
        //append second iterator of pair to list
    }
    westIter++;
} 
```

注意：我不确定此时“push_front”是否正确，因为我只插入了第一个值。

我的问题是有人可以给我一些关于如何解决这个问题的见解吗？因为我不确定最好的方法以及我的想法是否正确。任何见解将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T02:07:29.977

你的计划只有一个弱点。你需要首先找到连锁店的第一人，纽约先生。

你的算法假设这条线从第一个人开始。为此，您应该首先扫描整个地图以找到**不作为第二个元素出现的一个名称**。那是纽约先生，你可以从那里开始。`push_back`是你需要在这里使用的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-29T03:06:12.933

1.  创建一个存储链的数据结构，它的正面和背面。以 'back' 为键存储在哈希表中。
2.  创建一堆单例链（每个元素一个）
3.  迭代地，选择一个链，在哈希表中找到它的“前”（即找到另一个与“后”具有相同元素的链）并将它们合并
4.  这样做直到你只剩下一条链子

# javascript - 只允许一个“.” 在 KeyPress 期间使用 Javascript

> ID：14574395
> 
> 赞同：0
> 
> 时间：2013-01-29T01:49:15.277
> 
> 标签：javascript, keypress

如何只允许一个“。” **在按键**期间在**javascript**中？

 **我这里有一个代码：

```
function allowOneDot(txt) {

        if ((txt.value.split(".").length) > 1) {

          //here, It will return false; if the user type another "."

         } 
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-29T02:05:35.767

在回答之前，我将重申我在评论中所说的话：

> 如果用户粘贴了一堆句号怎么办？如果他们在控制台中编辑 javascript 以完全忽略此检查怎么办？确保您正确处理验证并且没有进行太多简化。

现在我们要自担风险，下面是您不允许用户`.`在文本框中输入多个（句点）的方法：

```
document.getElementById('yourTextboxIDHere').onkeypress = function (e) {
    // 46 is the keypress keyCode for period     
    // http://www.asquare.net/javascript/tests/KeyCode.html
    if (e.keyCode === 46 && this.value.split('.').length === 2) {
        return false;
    }
} 
```

[工作演示](http://jsfiddle.net/ygKHE/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-29T02:36:30.787

如果您真的想允许一个点，即使用户在其中粘贴文本，您也应该使用 keyup，而不是 keypress，并且您可以保留最后一个文本值以防需要恢复它。但缺点是输入值已经更改，并且您会在键入时看到它得到更正。

```
(function() {
    var txt = document.getElementById('txt');
    var prevValue = txt.value;

    function allowOneDot(e) {
        var dots = 0;
        var length = txt.value.length;
        var text = txt.value;
        for(var i=0; i<length; i++) {
            if(text[i]=='.') dots++;
            if(dots>1) {
                txt.value = prevValue;
                return false;
            }
        }
        prevValue = text;
        return true;
    }
    txt.onkeyup = allowOneDot;
})(); 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2020-09-30T09:29:34.647

```
<input type="text" id="test" onkeyup="floatOnly(this);"/>

<script>
function floatOnly(i){
{
  if ((i.value).length > 0){else{i.value = i.value.replace(".." , ".");i.value = i.value.replace("..." , ".");i.value = i.value.replace(/[^0-9\.]/g , "");}}else{i.value = i.value="0";}}<script> 
```**

# c# - WPF 后台工作线程

> ID：14574404
> 
> 赞同：-2
> 
> 时间：2013-01-29T01:50:14.347
> 
> 标签：c#, wpf, multithreading, user-interface, backgroundworker

> **可能重复：**
> [WPF 中的 DoEvent() 等价物](https://stackoverflow.com/questions/14471254/equivalent-of-doevent-in-wpf)

我几天前问了这些问题，但没有得到太多有用的评论，因为我在 WPF 中是全新的并且不知道线程但是我今天必须交付我的任务并且需要尽快完成这些，上次我使用 Windows 窗体和我的函数使用事件（）；因为我将我的程序移到 WPF 并做 Event 它不再支持我需要转换这些函数

PS：这些功能用于将数据发送到 com 端口和更新 UI

```
 private void Send(byte[] cmd)
        {
            bWaiting = true;
            MyResp = new byte[0];

            WriteOnPort(cmd);

            while (bWaiting == true) // here is a problem
            {
                System.Windows.Forms.Application.DoEvents();  // here is a problem
                System.Threading.Thread.Sleep(15);
            }
        } 
```

我真的需要在今天之前完成这些并且不知道如何解决任何帮助都会很棒

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T02:16:03.187

一个简单的选择是线程化`WriteOnPort`它的方式比破解 UI 更新更好。

根据您的需要，这里有 2 个示例

1.  简单的线程方法。

    ```
    private void Send(byte[] cmd)
    {
        ThreadPool.QueueUserWorkItem((o) => WriteOnPort(cmd));
    } 
    ```

2.  using `BackroundWorker`，因此您可以在完成`Completed`时使用该事件`WriteOnPort`

    ```
    private void Send(byte[] cmd)
    {
        var worker = new BackgroundWorker();
        worker.RunWorkerAsync(cmd);
        worker.DoWork += (s, e) =>
        {
           WriteOnPort(e.Argument as byte[]);
        };
        worker.RunWorkerCompleted += (cs, ce) =>
        {
           // do anything you need on completion
        };
    } 
    ```

`System.Windows.Forms.Application.DoEvents()`是一个可怕的；e hack，永远不应该在 winforms 中以这种方式使用，并且试图找到一种方法在 WPF 中做同样的 hack 只是愚蠢的，玩一玩`Threading`并找到正确的方法来做事情，否则就像黑客一样这有一天会回来困扰你。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-01-29T02:24:31.750

```
public static void DoEvents()
{
    Application.Current.Dispatcher.Invoke(DispatcherPriority.Background,                                        new Action(delegate { }));
} 
```

# list - lisp 方案列表

> ID：14574406
> 
> 赞同：-1
> 
> 时间：2013-01-29T01:50:25.580
> 
> 标签：list, lisp, scheme

为什么结果`(cons (list 1 2) (list 3 4))`是`((1 2) 3 4)`？

我想知道为什么结果长度是 3（3 个元素）。我的直觉让我觉得那 `(list 1 2)`是一个列表，`(list 3 4)`也是一个列表。通过使用`cons`过程，结果应该是两个元素，每个元素都是一个列表，但结果并不像我预期的那样。

谁能告诉我为什么？谢谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-29T02:02:13.587

`(list a b c)`等同于`(cons a (list b c))`定义（或者，如果您继续转换，`(cons a (cons b (cons c nil)))`.

所以如果你写`(cons 1 (list 3 4))`，这相当于`(cons 1 (cons 3 (cons 4 nil)))`, 或 to `(list 1 3 4)`。

现在，替换`1`为`(list 1 2)`，你会得到这个：`(cons (list 1 2) (cons 3 (cons 4 nil)))`，或者等效地`(list (list 1 2) 3 4)`（或者，完全写出，`(cons (cons 1 (cons 2 nil)) (cons 3 (cons 4 nil)))`）。

这里的关键是`cons`is not `append`, nor `list`（平等对待所有元素）：在处理列表时，它本质上是不对称的。左边的点持有元素（“头”）；右边的持有列表的其余部分（“尾巴”）。

# java - +/-/*/% 上的 Java 正则表达式匹配

> ID：14574407
> 
> 赞同：2
> 
> 时间：2013-01-29T01:50:29.070
> 
> 标签：java, regex

所以我有一个我想解析的字符串，我无法让我的正则表达式工作。我使用[https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/RegExp](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/RegExp)作为我的正则表达式指南。

我希望我的正则表达式匹配以下任何符号。

```
+ - * % / 
```

我的代码如下。输入字符串：`D[1]+D[0]`. 应该打印 true...*但*打印 false。

```
String tmp = "D[1]+D[0]";
if(tmp.matches("[\\+\\-\\*\\/\\%]"))
    System.out.println("true");
else
    System.out.println("false"); 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-29T01:55:10.000

这是因为`matches`希望匹配整个字符串，而不仅仅是它的任何部分。

您不需要转义方括号内的字符。

```
String str = "D[1]+D[0]";
Pattern p = Pattern.compile("[+-/*]");
Matcher m = p.matcher(str);
if (m.find()) {
    System.out.println("Found: " + m.group());
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T02:23:52.777

`matches()`必须匹配整个输入，但您需要做的就是添加`.*`到每一端：

```
if (tmp.matches(".*[-+*/%].*")) 
```

Note: Characters between `[]` don't need escaping *if* the hyphen is first or last.

# asp.net - .net 用户控制和页面绑定

> ID：14574417
> 
> 赞同：0
> 
> 时间：2013-01-29T01:53:15.477
> 
> 标签：asp.net, .net, vb.net, updatepanel, ascx

我有一段代码，其中包含我在 5 个不同的 .aspx 文件中重复使用的更新面板和网格视图。而不是试图维护所有 5 个。我希望创建一个可以包含在每个页面中的用户控件。

开始写之后，我意识到它可能行不通。问题是，我需要使用 Eval 将数据库数据绑定到用户控件内的更新面板和网格视图。但我认为这是不可能的，因为代码现在将位于 .ascx 文件中。

所以我想知道是否有办法解决这个问题。

谢谢！

# c++ - C++ String.substr 输出不正确

> ID：14574418
> 
> 赞同：0
> 
> 时间：2013-01-29T01:53:23.170
> 
> 标签：c++, string, substring

试图将字符串分成几部分。格式永远是这样的`name from number on date`

需要拆分`name`, `number`, 和`date`

代码：

```
string name, number, date;

size_t from = s.find(" from ");
size_t on = s.find(" on ");

name = s.substr(0, from);
number = s.substr(from + 6, on);
date = s.substr(on + 4);

cout << "name:" << name << ", num:" << number << ", date:" << date << endl; 
```

样本输入：`John Smith from N656 on 01012013`

样本输出：`name:John Smith, num: N656 on 01012013, date:01012013`

因此，在尝试创建子字符串时显然存在问题，`number`但我很好奇是什么原因造成的，因为其他两个正在工作。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-29T02:00:55.710

我认为您假设`s.substr`接受开始/结束索引。

这实际上是： `s.substr(pos, size)`

> **pos**第一个字符的位置以包含子字符串的
> **大小**长度

所以，以一种丑陋的方式：

```
name = s.substr(0, from);
number = s.substr(from + 6, on - (from + 6));
date = s.substr(on + 4); 
```

# sockets - 如何在只有 NAT 访问的机器上使用 UDP

> ID：14574424
> 
> 赞同：0
> 
> 时间：2013-01-29T01:54:02.900
> 
> 标签：sockets, udp, nat

我有一台没有外部 IP 地址的机器，它需要向外界发送 UDP 数据包。仅 NAT 访问。

这行得通吗？

在我们的环境中进行原型制作真的很困难。它仍在建设中。关于如何制作原型的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T12:11:27.247

世界上大多数家庭网络配置都是由具有内部 IP 的 PC 和具有对内部 IP 进行 NAT 的公共 IP 的路由器组成的。（独立于 UDP/TCP 或任何需要出去的协议）

我看不出有什么问题

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T02:07:32.463

它应该工作。

确保对于创建的套接字，将 TTL（生存时间）设置为足够大的值，以覆盖到达目的地的可能的路由器跃点数。对目标 IP 运行 traceroute 将使您大致了解跃点数。请注意，此值可能会根据网络条件而变化。因此，最好将其设置为更大的值。有关设置 TTL 的语法，请参阅套接字 IOCtl API 文档。

最后，请记住 UDP 不是可靠的协议。因此，即使采取了上述必要步骤，数据包也可能无法到达目的地。但是，如果整个网络（包括中间路由器）都在受控环境中，例如公司内部网，则丢包的可能性很小。

如果您想在 UDP 之上增加可靠性，您可以采用基于 NAK 的算法，其中数据包被标记有序列号。各种资源可能会建议您，如果您需要通过 UDP 增加可靠性，您应该考虑 TCP，但我的经验是，如果您的应用程序在受控环境中运行，丢包的可能性非常小，并且您需要快速连接设置和断开，在 UDP 上添加轻量级可靠性有其优点。此外，TCP 连接会占用操作系统内核中的宝贵空间，而 UDP 则不会。如果您想在受限环境中支持大量“连接”，这也可能是一个考虑因素。

归根结底，您需要进行一些实验以找出最适合您的方法。

作为原型，我会使用 Linux 之类的东西设置一个 NAT 服务器，然后从那里开始工作。您要模拟的真实世界流量场景将确定客户端和服务器在 NAT 两侧的位置。也就是说，如果流量应该通过 ISP 或全部在受控环境中。

高温高压

# jquery - jQuery表单插件重定向

> ID：14574427
> 
> 赞同：0
> 
> 时间：2013-01-29T01:54:29.830
> 
> 标签：jquery, ajax, forms

我正在使用来自[http://malsup.com/jquery/form/的 jQuery 表单插件](http://malsup.com/jquery/form/)

在我的测试页面上它工作得很好，但是对于我的最终页面上的一些动态生成的项目，表单正在提交到我的 ajax php，然后像传统的 html 表单一样将我重定向到那里。

这是每个表单的 html：

```
 <form class="comform" action="ajax/comment.php" method="post"> 
  <input type="hidden" name="postid" value="<? echo $id;?>">
  <textarea name="comment" cols="50" rows="2" class="commenttext" id="amazing"></textarea>
  <input type="submit" value="+" /> 
</form> 
```

和正在使用的脚本：

```
<script> 

    $(document).ready(function() { 

        $('.comform').ajaxForm(function() { 
            alert("working, change this later"); 
        }); 
    }); 
</script> 
```

正如我所说，这是通过 ajax 提交到 comment.php，但在具有多个评论框的真实页面上，它也重定向到 ajax/comment.php

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T02:17:03.263

您可能需要`return false`在回调中以防止浏览器的默认操作。

[在此处](http://malsup.com/jquery/form/#api)查看插件的 API 文档。

请注意，`ajaxSubmit`需要`return false`. 当然，这只是在您手动调用提交函数时，但它可能表明该插件默认情况下不会阻止事件传播。

# c++ - 为什么在 C++ 方法中使用 system("some.exe") 不像命令行那样工作？

> ID：14574430
> 
> 赞同：1
> 
> 时间：2013-01-29T01:54:34.507
> 
> 标签：c++, windows, command-line

我正在为 Windows 编写一个程序，该程序最终必须启动位于同一台计算机上的不同的预先存在的 .exe。它将多个参数传递给这个 .exe 文件。我正在阅读实际的命令和参数并构建命令，但我也尝试用相同的结果对其进行硬编码。这是硬编码版本（我从一个使用same.exe的旧C程序中挑选出来）：

`system("c://IQapture//dmon2_6_IHD -p2 c://IQapture//mon_table_101_Tx8.txt 11 0 0");`

所以在原程序里面`int _cdecl main(int argc, char**argv)`这种系统的使用是有效的。在我的 C++ 类方法中的 C++ 程序中，当我发出命令时，正确的程序会启动，但它会立即弹出一个错误对话框，指出发生了错误。我将用于启动 exe 的系统字符串回显到控制台。在它失败后，我复制并粘贴了与 echo'd 相同的行，这次 exe 运行没有错误。这是可重复的。如果与时间有关，我尝试在发出系统命令之前添加 10 秒延迟，但这没关系。加上原来的旧程序不需要延迟。这对我来说意味着字符串是正确的并且目标程序可以工作。不知何故，system() 调用与直接命令行调用不同。该程序编译并构建良好。我正在使用 Visual Studio 2010。

有没有人知道如何使 system() 调用像命令行调用一样工作？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-29T02:19:04.503

这看起来真的不像是 Windows 会喜欢的那种东西……试试用反斜杠代替：

```
system("c:\\IQapture\\dmon2_6_IHD -p2 c:\\IQapture\\mon_table_101_Tx8.txt 11 0 0"); 
```

如果这仍然不起作用，您很可能遇到以下问题之一：

*   您当前的工作目录错误；
*   缺少环境变量；
*   您的程序以错误的用户权限运行；
*   您的程序正在占用生成的进程所需的资源（*例如*，您没有关闭它需要作为输入的文件）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-29T02:16:07.757

有很多事情需要考虑——环境、运行程序的用户、父进程以及继承的内容……看看[CreateProcess](http://msdn.microsoft.com/en-us/library/ms682425.aspx)函数的参数。您的系统调用的调用可能与命令行的调用不匹配（尽管这可能不是问题，但更简单的事情更有可能。）

在深入研究诸如创建标志和安全属性之类的事情之前，我建议从错误开始向后排除简单的原因，例如环境、当前目录等。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-29T03:28:25.940

你有你的斜线向后。尝试：

```
system("c:/IQapture/dmon2_6_IHD -p2 c:/IQapture/mon_table_101_Tx8.txt 11 0 0"); 
```

您可以使用反斜杠`\`，但因为这是字符串中的转义序列起始符（对于 C/C++），这就是为什么您连续使用两个。由于编译器将转换`\\`为字符串中的单个斜杠：

因此：

```
system("c:\\IQapture\\dmon2_6_IHD -p2 c:\\IQapture\\mon_table_101_Tx8.txt 11 0 0");

// Is equivelent to the command line string:

> c:\IQapture\dmon2_6_IHD -p2 c:\IQapture\mon_table_101_Tx8.txt 11 0 0 
```

但是 Windows 支持这两种类型的斜线的时间比我记得的要长。所以下面的命令行是等价的。

```
> c:/IQapture/dmon2_6_IHD -p2 c:/IQapture/mon_table_101_Tx8.txt 11 0 0 
```

在字符串中使用“/”（在 C/C++ 中）不需要转义。所以你只需要按原样使用它：

```
system("c:/IQapture/dmon2_6_IHD -p2 c:/IQapture/mon_table_101_Tx8.txt 11 0 0"); 
```

# jquery - css改变jquery语法

> ID：14574431
> 
> 赞同：2
> 
> 时间：2013-01-29T01:54:35.243
> 
> 标签：jquery, css

对于我的网站，我正在尝试使用从向下箭头变为向上箭头的箭头。我想使用 css 更改，因为我觉得这是最简单的方法。我的代码是

```
$(".first1").on('click', 
  function () {
$('.arrow-down').css({"display" : "none"});
    $('.arrow-up').css({"display" : "inline"});
  },
  function () {
    $('.arrow-down').css({"display" : "inline"});
    $('.arrow-up').css({"display" : "none"});
  });
$(".last1").on('click', 
  function () {
    $('.arrow-down').css({"display" : "none"});
    $('.arrow-up').css({"display" : "inline"});
  },
  function () {
    $('.arrow-down').css({"display" : "inline"});
    $('.arrow-up').css({"display" : "none"});
  }); 
```

和

```
.arrow-up {
    width: 0; 
    height: 0; 
    border-left: 5px solid transparent;
    border-right: 5px solid transparent;
    border-bottom: 10px solid #FDFECD;
    display: none;
}
.arrow-down {
    width: 0; 
    height: 0; 
    border-left: 20px solid transparent;
    border-right: 20px solid transparent;
    border-top: 10px solid #FDFECD;
    display: inline;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T02:00:09.957

你不能像这样绑定两个点击事件。相反，您必须自己管理“点击状态”：

```
$(".first1, .last1").data('active', false);

$(".first1, .last1").on('click', function () {
   if ($(this).data('active')) {
      $('.arrow-down').css({"display" : "none"});
      $('.arrow-up').css({"display" : "inline"});
      $(this).data('active', false);
   }
   else {
     $('.arrow-down').css({"display" : "inline"});
     $('.arrow-up').css({"display" : "none"});
     $(this).data('active', true);
   }
}); 
```

# php - 为什么我需要 `str_pad('',4096)` 来使 PHP 刷新工作？

> ID：14574432
> 
> 赞同：2
> 
> 时间：2013-01-29T01:54:40.813
> 
> 标签：php, flush

例如，

这不起作用（Firefox 21、IE8）：

```
<?php
function flush_buffers(){
    ob_end_flush();
    ob_flush();
    flush();
    ob_start();
}  
ob_start();
echo 'Text 1<br />';
flush_buffers();
Sleep(2);
echo 'Text 2<br />';
flush_buffers();
Sleep(2);
echo 'Text 3<br />';
flush_buffers();
Sleep(2);
echo 'Text 4<br />';
?> 
```

但这一个有效：

```
<?php
function flush_buffers(){
    echo str_pad('',4096);
    ob_end_flush();
    ob_flush();
    flush();
    ob_start();
}  
ob_start();
echo 'Text 1<br />';
flush_buffers();
Sleep(2);
echo 'Text 2<br />';
flush_buffers();
Sleep(2);
echo 'Text 3<br />';
flush_buffers();
Sleep(2);
echo 'Text 4<br />';
?> 
```

我在 Win XP SP3 上运行 PHP 5.4.11 VC9 和 Apache 2.4.3 (apacheLounge)。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-29T02:04:34.523

一些浏览器包含自己的内部缓冲区，以便更有效地下载和显示，减少波动。在大多数情况下，此缓冲区为 4Kb，即 4096 字节。

什么`str_pad('',4096)`是将 4,096 个空格写入输出。由于它是 HTML，因此这些空间折叠成一个空间。

总体而言，不应依赖此行为。浏览器用于查看网页，而不是混入控制台终端。

还有，为什么要写`</br>`？没有结束`<br>`标签之类的东西，自动关闭的版本是`<br />`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-29T02:02:45.183

除了指定您的浏览器版本之外，您还应该指定 PHP 正在运行的 Web 服务器。毕竟，这就是输出缓冲可能发生的地方。

如果您阅读[有关 flush 的文档](http://php.net/manual/en/function.flush.php)，您会发现这不是保证操作。有点像磁盘写入，即使您有库和操作系统合作，仍然有磁盘硬件（可能）缓冲它。只有最细致（因此几乎不可能移植）的方法才能起作用，甚至不能保证这一点。

编辑：哦，是的，浏览器（或地狱，中间的一些路由器或 TCP 堆栈）也可以做到这一点。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-29T02:00:14.523

这是因为浏览器的渲染引擎在决定将内容渲染到屏幕时需要获取足够的数据。需要多少数据是由浏览器决定的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-07-01T21:17:10.757

对于慢速托管，请尝试以下操作：

```
$totalUsers = count_users();

echo 'There are ', $result['total_users'], ' total users<br />';
foreach($result['avail_roles'] as $role => $count)
    echo ', ', $count, ' are ', $role, 's';
echo '.';

$batchSize = 25;
$batchesCount = ceil($totalUsers['total_users'] / $batchSize);
$Users = array();
for ($count = 0; $count < $batchesCount; $count++) {
$args = array('number' => $batchSize, 'offset' => $count * $batchSize);
    $batchNewUsers = get_users($args);
    $Users = array_merge($Users, $batchNewUsers);
    sleep(1); # reduce load
    echo '.'.str_pad(' ',4096);# keep alive
}

echo '<br />All done.'; 
```

否则，您可能最好直接查询数据库，或者首先获取 ID 并按 ID 查询： [https ://wordpress.stackexchange.com/questions/231003/how-to-get-list-of-all-users -那里的元数据](https://wordpress.stackexchange.com/questions/231003/how-to-get-list-of-all-users-there-metadata)

# javascript - Rails 部分不支持 javascript 格式

> ID：14574433
> 
> 赞同：0
> 
> 时间：2013-01-29T01:54:42.277
> 
> 标签：javascript, ruby-on-rails, ujs

我之前已经多次添加 JavaScript 部分，但不可否认有一段时间。简而言之，我错过了一些愚蠢的东西。

当我尝试在此视图的末尾呈现部分“deleteme.js”时：

/app/views/projects/myview.html.slim：

```
h2 Stuff goes here

render partial: '/projects/thisworks' # Render html partial

render partial: '/projects/deleteme.js' # Render js partial...fails 
```

这使得这个部分：

/app/views/projects/_deleteme.js.erb：

```
console.log("Oh FFS, Work"); 
```

我得到：

> 项目中的 ActionView::MissingTemplate#show
> 
> 显示 /Users/aj/Web/Rails/sh3/app/views/projects/show.html.slim 其中第 5 行提出：
> 
> 缺少带有 {:locale=>[:en], :formats=>[:html], :handlers=>[:erb, :builder, :slim, :jbuilder, :coffee, :haml]} 的部分 /projects/deleteme . 搜索：* ...

罪魁祸首是它只搜索格式 => [:html]，但我认为附加 .js 会自动告诉 rails 搜索 javascript。如果有人对为什么找不到 JS 模板有任何想法，我将不胜感激。动作代码是一个非常基本的：

```
def show
  @project = Project.find(params[:id])
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T02:00:24.097

```
 /app/views/projects/_deleteme.js.erb: 
```

您将部分命名与 Javascript 动作命名交织在一起！

```
 /app/views/projects/deleteme.js.erb: 
```

重命名您的javascript文件，删除_

你必须确保你的节目响应 js

```
def show
  respond_to do |format|
    format.js
    format.html
  end
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T02:07:15.547

你在一个苗条的模板中调用一个部分，所以它希望找到

```
app/views/projects/_deleteme.js.slim 
```

# r - IPython rmagic 的 Unicode 错误；（%%R 似乎可以工作，但 %R 不能完全工作）

> ID：14574434
> 
> 赞同：0
> 
> 时间：2013-01-29T01:54:45.740
> 
> 标签：r, ipython, ipython-notebook

我正在尝试在 IPython Notebook rmagic 页面上重新创建演示示例。每次尝试使用 %Rpush 或尝试通过 Rpush 和 Rpull 机制（在 R 和 Py 命名空间之间推送/拉取数据）在 R 和 numpy 之间交换数据时，都会出现一个特定错误，我获得了部分成功

%%R 单元魔术效果相当好 - 我能够定义 R vecs X 和 Y 并执行 print (lm(X~Y)) ，它成功地在 IPython Notebook 中打印输出。这在 qtconsole 和终端上也同样有效。

现在，如果我在单元格内做一个 plot(X,Y) - 我成功地得到了一个情节。如果我开始一个新的 Notebook 行并尝试 plot(X,Y) 我得到以下错误

```
 [....]
 TypeError: coercing to Unicode: need string or buffer, dict found 
```

[http://pastebin.com/Pb56Tmgc](http://pastebin.com/Pb56Tmgc)上的完整堆栈跟踪

a）为什么这在细胞内成功但不能在一条线上工作？b) 有什么建议吗？

（环境：2010 MBP 15 上的 Python 2.7（Anaconda 2.7.3 CE）R 2.15 rpy2 2.3 MacOSX 10.7.5"

http://www.soundfrost.org/ >youtube 到 mp3

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T17:24:15.683

这是一个错误 - R 魔法将本地命名空间作为它期望单元格的参数。

深入研究`IPython.core.interactiveshell`with `git blame`，看起来它是几个月前作为[拉取请求 #2130的一部分修复的。](https://github.com/ipython/ipython/pull/2130)

# html - 自动布局时HTML表格中的CSS宽度属性是什么意思？

> ID：14574435
> 
> 赞同：0
> 
> 时间：2013-01-29T01:54:57.067
> 
> 标签：html, css, html-table

如果我为表格中的元素指定宽度，`<th>`如果未指定表格布局并且默认为自动，那么对于更宽的表格来说这意味着什么？这样的宽度是否指定了整列的最小宽度？如果是这样，这是在哪里指定的 - 我在 HTML/CSS 规范中找不到任何说明宽度以这种方式解释的内容，但 Firefox 和 IE 似乎都以这种方式解释宽度。

为了把它放在上下文中，想象一个一周中几天的数字数据表（例如产量）。工作日是列标题。我想应对两个条件：

*   没有特定日期的数据，但我不希望列的宽度折叠到某个丑陋的最小值。相反，我想设置该最小值。
*   当列中有大量数字时，我希望列的宽度自动扩大以完整显示数字。

当我指定一堆列宽如下...

```
<tr>
<th style="width:3em">Sun</th>
<th style="width:3em">Mon</th>
<th style="width:3em">Tue</th>
...etc
</tr> 
```

...我达到了我正在寻找的结果。但是，我可以依靠这个吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T06:04:25.373

是的，您可以依靠它；它在 CSS 规范中，浏览器在这里按本书播放。对于表格单元格，该`width`属性设置用于计算列宽的最小宽度。

这里的规范有些混乱，因为`width`属性的描述没有说这个，甚至没有参考描述（据我所知），但这在第 17.5.2.2 节[Automatic table layout](http://www.w3.org/TR/CSS21/tables.html#auto-table-layout)中有描述。第一个编号列表中的第 1 项说：“计算每个单元格的最小内容宽度 (MCW)：格式化的内容可以跨越任意数量的行，但不能溢出单元格框。如果单元格的指定“宽度”(W) 大于 MCW，则 W 是最小单元格宽度。'auto' 值意味着 MCW 是最小单元格宽度。”</p>

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-29T02:01:17.570

要设置允许的最小宽度并在需要时让字段扩展得更宽，请使用类似这样的东西

```
th {
  width: auto; /* This is default, but shown here for clarity */
  min-width: 100px; /* or whatever size need be */
} 
```

# emacs - 向 minibuffer-setup-hook 添加一个钩子会破坏键绑定

> ID：14574439
> 
> 赞同：0
> 
> 时间：2013-01-29T01:55:09.597
> 
> 标签：emacs, hook, elisp, key-bindings

我有一些我喜欢强制绑定到我熟悉的键的键，所以我使用了这个[SO 解决方案](https://stackoverflow.com/a/683575/774691)。

但我最近发现它对我不利。

[情况：在窗口模式下运行 24.2.1 作为 bob.parkland.org 上的 build 2012-08-27 时运行良好（即在http://emacsformacosx.com/](http://emacsformacosx.com/)上找到的预构建 emacs-for-mac 解决方案） .

但是在 Lion 上的终端中运行时它将不起作用，这是 b1006.apple.com 上 2012-01-12 的 22.1.1 (mac-apple-darwin)。

如果我注释掉添加钩子的调用，它工作正常。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T01:55:09.597

问题的部分原因是我将在上面的另一个链接中找到的代码字节编译成一个单独的可加载 .elc 文件......并且使用较新版本的 emacs 这样做。

当我回到 22.1.1 版本的 emacs 并使用该版本对其进行字节编译时，它在两个版本的 emacs 中都可以正常工作。

# vb.net - datagridview 未更新到绑定数据源

> ID：14574441
> 
> 赞同：1
> 
> 时间：2013-01-29T01:55:11.433
> 
> 标签：vb.net, datagridview, databound

当我更新数据源时，我试图让 datagridview 更新，但我没有任何运气。

这是我的绑定：

```
Private _dgbNews As SortableBindingList(Of SalesMessageRecord)

Private Sub SalesMessageScreen_Load(sender As System.Object, e As System.EventArgs) Handles MyBase.Load
  '_dgbNews.RaiseListChangedEvents = True
  _dgbNews = AllNews()
  BindingSource1.DataSource = AllNews()
  DataGridView1.DataSource = BindingSource1
  MassageDemRows()
End Sub 
```

这是`AllNews()`：

```
Public Function AllNews() As SortableBindingList(Of SalesMessageRecord)

  Dim sm = New SortableBindingList(Of SalesMessageRecord)
  Dim allnewsitems = News.GetAllNewsItems(Configuration.CompanyID).ToList()

  For Each allnewz As News In allnewsitems
    Dim smr = New SalesMessageRecord
    smr.Body = allnewz.NewsBody
    smr.CorporationId = CType(allnewz.CorporationId, Guid)
    smr.Expiration = allnewz.Expiration
    smr.IsActive = allnewz.IsActive
    smr.NewsId = allnewz.NewsId
    smr.Title = allnewz.NewsTitle
    smr.SortOrder = allnewz.OrderNumber
    smr.TokenId = allnewz.TokenId
    smr.IsNew = False
    sm.Add(smr)
  Next

  Return sm

End Function 
```

这就是我试图更新它的地方：

```
Private Sub button_Save_Click(sender As System.Object, e As System.EventArgs) Handles button_Save.Click
  If _currentRow < 0 Then
    Return
  End If

  _dgbNews(_currentRow).Expiration = datetimepicker_ExpirationDate.Value
  _dgbNews(_currentRow).SortOrder = CInt(numericupdown_SortNumber.Value)
  _dgbNews(_currentRow).IsActive = checkbox_Active.Checked
  _dgbNews(_currentRow).Body = richtextbox_Body.Text
  _dgbNews(_currentRow).Title = textbox_Title.Text

  DataGridView1.Refresh()

  News.UpdateNewsRecord(_dgbNews(_currentRow).NewsId,
                        _dgbNews(_currentRow).Expiration,
                        _dgbNews(_currentRow).SortOrder,
                        _dgbNews(_currentRow).IsActive,
                        _dgbNews(_currentRow).Body,
                        _dgbNews(_currentRow).Title)
End Sub 
```

数据库正在更新而没有问题，但 datagridview 不会更新。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-09-19T06:45:17.027

Me.TableAdapter1.Fill(Me.DataSet1.Table1)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-07T20:52:03.277

与 DataGridView 有类似问题没有显示来自我的数据源的任何数据，发现我的绑定类属性是常规的 int 或 string，而不是使用 get set 声明。

从改变

诠释兑换ID；

至

公共 int RedeemID { 获取；放; }

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-30T07:46:46.083

好的，我会解决这个问题。Bindingsources 与 DGV 一起使用时非常有用。然而，他们往往很害怕，因为他们不提供任何信息，为什么他们不工作。

首先我会说您的绑定源有错误的数据源。

```
_dgbNews = AllNews()
BindingSource1.DataSource = AllNews()
DataGridView1.DataSource = BindingSource1 
```

如您所见，您将 AllNews() 作为数据源。但是您将内容添加到 _dgbNews 并期望 Allnews() 发生变化。Protip，它没有。如果要将 DataSource 设置为此：

```
BindingSource1.DataSource = _dgbNews 
```

然后，至少您应该期望在更新列表时会发生一些变化。现在这就是你真正想念的。在按钮保存中单击您将项目添加到列表中，如果您完成了上述操作，现在就可以了。但是等等，数据源发生了变化，什么也没发生。这是因为您没有告诉 datagridview 进行更改。让 Bindingsource 告诉它连接到的所有内容以进行更新。有了这个：

```
BindingSource1.ResetBindings(True) 
```

这比 DGV.Refresh （现在可能工作）要好，因为您的绑定源可以附加到其他东西（我知道它不是，但供将来参考）。

试试这个，看看它是否会更好。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-04-28T07:36:30.123

尝试这个：

（从数据适配器执行更新命令后）

```
GRIDVIEW_NAME.DATABIND() 
```

# php - 如何使用带有此 url 格式的 $_GET site.com/extension/rar

> ID：14574444
> 
> 赞同：0
> 
> 时间：2013-01-29T01:55:43.197
> 
> 标签：php, get

我在大多数网站上都看到了这种 url 格式。

```
site.com/extension/rar 
```

我想知道他们如何使用 $_GET 获得 value='rar'。

我所知道的是 $_GET 可以在这里使用

```
site.com/extension/index.php?ext=rar 
```

现在我想改变调用变量的方式。

我想应用大多数网站所做的。

如何在前者中调用变量？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T02:01:13.970

也许这可以得到“rar”：

```
$name = basename($_SERVER['REQUEST_URI']); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T02:05:18.250

我很可能正在使用 .htaccess

它是一个 Apache 模块，允许您根据自己的规则集在引擎级别“重写”url。所以基本上它会即时重写 URL。

因此，在您的示例中，您可以有一个名为 .htaccess 的文件，其中包含以下内容：（可能还有其他选项）

```
RewriteEngine On
RewriteRule ^extension/([a-z0-9]+)$    somefile.php?extension=$1    [L] 
```

基本上，您是在说：如果有人正在寻找一个看起来像“extension/somenumbers-and-letters”的 URL，那么显示“somefile.php?extension=whatever-those-number-and-leters-are”的内容。

在 Apache mod_rewrite 上进行搜索以查找更多信息。

# python - Numexpr：如何使用“local_dict”和“global_dict”？

> ID：14574455
> 
> 赞同：6
> 
> 时间：2013-01-29T01:57:19.683
> 
> 标签：python, numpy, numexpr

我一直在尝试并尝试学习[Numexpr](http://code.google.com/p/numexpr/wiki/UsersGuide)包。关于如何使用它的例子充其量是稀疏的。有人可以给我一个关于如何使用“local_dict”和“global_dict”参数的简单例子吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-29T05:24:14.950

下面的例子可以稍微澄清一下。首先像这样设置场景：

```
import numpy as np
import numexpr as ne

a = np.arange(10)
b = np.arange(10, 20)
c = np.arange(20, 30) 
```

**不`dict`**

```
>>> def f0(a, b) :
...     a, b = 2 * a, 3 * b
...     return ne.evaluate('2*a + 3*b + c')
...
>>> f0(a, b)
array([110, 124, 138, 152, 166, 180, 194, 208, 222, 236])
>>> 4 * a + 9 * b + c
array([110, 124, 138, 152, 166, 180, 194, 208, 222, 236]) 
```

当您像这样运行它时，`a`并且`b`是局部变量，并且`c`是全局变量，正如预期的那样。

**`local_dict`**

```
>>> def f1(a, b) :
...     a, b = 2 * a, 3 * b
...     return ne.evaluate('2*a + 3*b + c',
...                        local_dict={'c' : np.arange(30, 40)})
...
>>> f1(a, b)
array([ 60,  66,  72,  78,  84,  90,  96, 102, 108, 114])
>>> 2*a + 3 * b + np.arange(30, 40)
array([ 60,  66,  72,  78,  84,  90,  96, 102, 108, 114]) 
```

因为我们已经重新定义了`local_dict`，`a`并且`b`不再作为局部变量出现在那里，所以使用全局变量的值来代替。并且因为`c`now 被定义为一个局部变量，所以全局变量的值被忽略了。

**`global_dict`**

```
>>> def f2(a, b) :
...     a, b = 2 * a, 3 * b
...     return ne.evaluate('2*a + 3*b + c',
...                        global_dict= {'c' : np.arange(30, 40)})
...
>>> f2(a, b)
array([120, 134, 148, 162, 176, 190, 204, 218, 232, 246])
>>> 4 * a + 9 * b + np.arange(30, 40)
array([120, 134, 148, 162, 176, 190, 204, 218, 232, 246]) 
```

在这种情况下，`a`and`b`取自默认的本地字典，而新`c`的将取代原来的全局字典。

# html - css 按钮（文本或图像）

> ID：14574457
> 
> 赞同：0
> 
> 时间：2013-01-29T01:57:36.387
> 
> 标签：html, css, browser, user-interface, web

我想知道是否应该为我的网站创建 CSS 按钮或图像按钮。什么是更好的？问题是文本是用 Helvetica Neue 格式化的（我非常喜欢那种字体），由于版权问题，我不能将它用作网络字体。

如果我在 CSS 中创建按钮，它们在浏览器中看起来很漂亮，但当用户为其浏览器选择不同的文本大小时，它们会调整大小。

图像按钮的优点是我可以嵌入我的字体，但看起来不如 CSS 按钮好。同样在那种情况下，我必须为按钮制作 Retina 版本（只是为了将来任何 PC 都有 Retina 显示器）。

有人可以在这种棘手的情况下帮助我吗？有谁知道 Helvetica Neue 的网络安全替代品？我应该禁用按钮 div 容器的大小调整吗？今天的网站按钮标准是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T02:19:54.503

Helvetica Neue 实际上可以作为网络字体获得许可：

[http://www.fonts.com/font/linotype/neue-helvetica?QueryFontType=Web#product_top](http://www.fonts.com/font/linotype/neue-helvetica?QueryFontType=Web#product_top)

我个人会远离图像按钮（出于您自己概述的原因），并且宁愿退回到类似的字体（例如Google Web Fonts 上的[Arimo](http://www.google.com/webfonts/specimen/Arimo)），而不必担心生成（和重新生成）一堆的图像。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2018-06-30T07:27:31.583

有一些令人惊叹的 CSS 按钮具有效果，尽管某些图像可能更适合您网站的主题。如果您想要一些 CSS 按钮，请[使用 CSS 样式设置按钮](https://stackoverflow.com/questions/6384304/styling-buttons-with-css/51112564#51112564)。

希望这可以帮助。

# javascript - Highcharts X 轴新值

> ID：14574458
> 
> 赞同：0
> 
> 时间：2013-01-29T01:57:40.133
> 
> 标签：javascript, highcharts

我正在使用 highcharts 绘制柱形图，如下所示：

```
var chart;
var count = 0;
$(function () {
$(document).ready(function() {
    chart = new Highcharts.Chart({
        chart: {
            renderTo: 'graph',
            type: 'column',
            margin: [ 50, 50, 100, 80]
        },
        title: {
            text: 'Random Data'
        },
        xAxis: {
            categories: [
                'T1',
                'T2'
            ],
            startOnTick: true,
            endOnTick: true,
            labels: {
                rotation: -45,
                align: 'right',
                style: {
                    fontSize: '13px',
                    fontFamily: 'Verdana, sans-serif'
                }
            }
        },
        yAxis: {
            min: 0,
            title: {
                text: 'Y-Axis'
            }
        },
        legend: {
            enabled: false
        },
        tooltip: {
            formatter: function() {
                return '<b>'+ this.x +'</b><br/>'+
                    'Tip is: '+ Highcharts.numberFormat(this.y, 1);
            }
        },
        series: [{
            name: 'Population',
            data: [34.4, 21.8],
            dataLabels: {
                enabled: true,
                rotation: -90,
                color: '#FFFFFF',
                align: 'right',
                x: 4,
                y: 10,
                style: {
                    fontSize: '13px',
                    fontFamily: 'Verdana, sans-serif'
                }
            }
        }]
    });
 });

}); 
```

我添加了以下函数以向图表添加新点

```
 function addPoints(name,acc)
 {
   var series = chart.series[0];
   series.addPoint(acc, false, true);
   categories = chart.xAxis[0].categories;
   categories.push(name+count);
   count++;
   chart.xAxis[0].setCategories(categories, false);
   chart.redraw();
 } 
```

**问题是**每次我添加一个新点时，都会有一列从图表中移出。我想保留图表视图中的所有列，所以当我添加一个新点时，图表只会缩小。

在[JSFiddle上查看](http://jsfiddle.net/CukYc/)

**提前致谢 ....**

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-29T02:25:18.217

`addPoint (Object options, [Boolean redraw], [Boolean shift], [Mixed animation])` `Add a point to the series after render time.`

**参数**

**选项**：`Number|Array|Object`
`The point options. If options isa single number, a point with that y value is appended to the series.If it is an array, it will be interpreted as x and y values respectively, or inthe case of OHLC or candlestick, as [x, open, high, low, close]. If it is an object, advanced options as outlined under series.data are applied.`

**重绘**：`Boolean`
`Defaults to true. Whether to redraw the chart after the point is added. When adding more thanone point, it is highly recommended that the redraw option beset to false, and instead chart.redraw() is explicitly calledafter the adding of points is finished.`

**班次**：`Boolean`
`Defaults to false. When shift is true, one point is shifted off the start of the series as one is appended to the end. Use this option for live charts monitoring a value over time.`

**动画**：`Mixed`
`Defaults to true. When true, the graph will be animated with default animationoptions. The animation can also be a configuration object with properties durationand easing.`

```
series.addPoint(acc, false, true);
                             /\ here's the problem, it should be false 
```

*参考*

*   [http://api.highcharts.com/highstock#Series](http://api.highcharts.com/highstock#Series)

[**更新的演示**](http://jsfiddle.net/CukYc/1/)

# java - iText 在 5440032 字节分配上内存不足

> ID：14574459
> 
> 赞同：-1
> 
> 时间：2013-01-29T01:57:40.947
> 
> 标签：java, android, itext

我从 PDF 中提取文本时遇到了问题。

**01-29 09:44:15.397: E/dalvikvm-heap(8037): 5440032 字节分配内存不足。**

我查看了页面的内容，它在文本上方有一个图像。我想知道的是如何捕获错误并跳过该页面？我努力了：

```
try {
        pages = new String[pdfPage];
        PdfReaderContentParser parser = new PdfReaderContentParser(reader);
        TextExtractionStrategy strategy;
        for (int pageNum = 1; pageNum <= pdfPage; pageNum++) {
            // String original_content = "";
            // original_content = PdfTextExtractor.getTextFromPage(reader,
            // pageNum, new SimpleTextExtractionStrategy());
            Log.e("MyActivity", "PageCatch: " + (pageNum + fromPage));
            strategy = parser.processContent(pageNum,
                    new SimpleTextExtractionStrategy());
            readPDF(strategy.getResultantText(), pageNum - 1);
        }
    } catch (Exception e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } 
```

上面的**try catch**没有捕捉到**strategy = parser.processContent(pageNum, new SimpleTextExtractionStrategy());的错误** 我已经尝试注释掉 for 循环中的所有行并且没有错误。但是当我忽略**strategy = parser.processContent(pageNum, new SimpleTextExtractionStrategy());** 它会出错。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T07:53:20.987

您想*捕获错误并跳过该页面*并尝试使用

```
try {
    ...
} catch (Exception e) {
    ...
} 
```

这没有成功。除非 DalvikVM 处理与 Java VM 完全不同的内存不足情况，否则这并不奇怪：`Throwable`Java 在这种情况下使用的 是的另一个大子类型`OutOfMemoryError`，即不是一个，`Exception`而是一个。因此，您可能想尝试`Error``Throwable`

```
} catch (OutOfMemoryError e) { 
```

或者

```
} catch (Error e) { 
```

甚至

```
} catch (Throwable e) { 
```

来处理你的问题。但是请注意，当`Error`抛出 an 时，这通常意味着正在发生一些不好的事情。因此，捕获和忽略它可能会导致奇怪的程序状态。

但是，显然，如果您（如您所说）只想尝试跳过单个页面并继续，您将不得不定位`try { ... } catch() { ... }`不同的位置，更具体地说，围绕单个页面的处理，即在循环内。

另一方面，删除对 PDF 库持有的对象的所有引用并重新打开 PDF 可能会有所帮助，请记住 Kevin在 iText-Questions 邮件列表中对您的问题[Search Text and Capacity of iText to read的回答。](http://itext-general.2136553.n4.nabble.com/Search-Text-and-Capacity-of-iText-to-read-tp4657270p4657271.html)按照该建议，您将在`try { ... } catch() { ... }`，您只需记住在某些外部变量中读取的最后一页。

`PdfReader`此外，您可以通过使用带有参数的构造函数来限制内存使用`RandomAccessFileOrArray`——以这种方式构造的阅读器不会将所有 PDF 保存在内存中，而只会保存交叉引用表和一些中心对象。其他所有内容按需阅读。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T02:07:33.373

正如我所了解的错误，当内存不足以容纳您正在读取的数据时，我相信您无法捕捉到该错误。

我强烈建议您删除一些旧数据，并确保在您的变量中只保留不太重的数据。

或参考这个

[由于要显示大量图像缩略图而导致内存不足错误](https://stackoverflow.com/questions/14569960/out-of-memory-error-due-to-large-number-of-image-thumbnails-to-display)

# node.js - 新闻文章分类（通过 NLP 进行主题/实体分析？）；最好在 Node.js 中

> ID：14574462
> 
> 赞同：3
> 
> 时间：2013-01-29T01:58:05.330
> 
> 标签：node.js, nlp

目标：一个 node.js 函数，可以传递新闻文章（标题、文本、标签等）并将返回该文章的类别（“技术”、“时尚”、“食品”等）

我对返回的确切类别并不挑剔，只要可能的结果列表是有限且合理的 (10-50)。

有一些 Web API 可以做到这一点（例如[alchemy](http://www.alchemyapi.com/)），但如果可能的话，我不希望产生额外的成本（包括外部 HTTP 请求和 $$）。

我看过节点模块“ [natural](https://github.com/NaturalNode/natural) ”。我对 NLP 有点陌生，但似乎我可以通过在合理的单词列表上训练贝叶斯分类器来实现这一点。这看起来像是一个好的/合乎逻辑的方法吗？你能想到更好的吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-05-07T19:59:58.173

我不知道您是否仍在寻找答案，但让我为碰巧回到这个问题的任何人提供两分钱。

在 NLP 工作过，我建议您研究以下方法来解决问题。不要寻找单一的包装解决方案。那里有很棒的包裹，毫无疑问有很多东西。但是当涉及到 NLP、ML 和优化等活跃的研究领域时，这些工具往往比学术界落后至少 3 或 4 次迭代。

来到核心问题。您要实现的是文本分类。实现这一点的最简单方法是 SVM 多类分类器。最简单的是，但也具有非常非常（参见双重强调）合理的分类准确性、运行时性能和易用性。

您需要处理的是用于表示您的新闻文章/文本/标签的功能集。您可以使用词袋模型。添加命名实体作为附加功能。您可以使用文章位置/时间作为特征。（尽管对于简单的类别分类，这可能不会给您带来太大的改进）。底线是。支持向量机工作得很好。他们有多种实现。在运行时，您实际上并不需要太多 ML 机器。另一方面，特征工程是非常特定于任务的。但是给定一些基本的特征集和良好的标记数据，您可以训练出一个非常不错的分类器。

这里有一些资源给你。 [http://svmlight.joachims.org/](http://svmlight.joachims.org/) SVM 多类是您感兴趣的。

这是 SVM zen 自己的教程！ [http://www.cs.cornell.edu/People/tj/publications/joachims_98a.pdf](http://www.cs.cornell.edu/People/tj/publications/joachims_98a.pdf)

我不知道它的稳定性，但从代码来看它是一个二进制分类器 SVM。这意味着如果您有一组已知的大小为 N 的标签要将文本分类到其中，则必须训练 N 个二进制 SVM 分类器。N 个类别标签各一个。

希望这可以帮助。

# actionscript - 如何通过 adobe flex 中的 actionscript 变量访问 mxml 组件？

> ID：14574464
> 
> 赞同：0
> 
> 时间：2013-01-29T01:58:20.510
> 
> 标签：actionscript

假设我有一个按钮

```
 <s:Button id = "button1" label="Click" click = "buttonHandler()"/> 
```

我有另一个按钮应该通过调用以下函数来删除这个按钮

```
 protected function remove_Button(event:MouseEvent):void
 {
      var button1:Button = ?????
      this.removeChild(button1);
 } 
```

如何首先将变量声明为 mxml 文件中的相同按钮？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T04:48:44.203

`button1`如果按钮和第二个按钮的相应代码在同一个 MXML 文档中，在这种情况下，您可以简单地通过分配给它的 ID 来引用第一个按钮。

示例.mxml：

```
<s:Button id = "button1" label="Click" click = "buttonHandler()"/>
<s:Button label="Remove 1st Button" click = "remove_Button(event)"/>

// this code appears inside a script block in Example.mxml
protected function remove_Button(event:MouseEvent):void
{
        // no need to declare button1 as a variable, that has already been
        // done in the 1st <Button> object above
        this.removeChild(button1);
} 
```

应该注意的是，您使用 MXML 标记声明的任何对象都是该 MXML 文档的公共变量。因此，如果第二个按钮位于不同的 MXML 文档/类中，那么您仍然可以通过您分配的 ID 访问它（即：）`button1`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T06:31:14.157

`this.removeElement(button1);`如果您的皮肤不支持功能，请在 remove_Button 函数中写入`this.removeChild`。

# php - MySQL 在文本中搜索行

> ID：14574465
> 
> 赞同：0
> 
> 时间：2013-01-29T01:58:34.487
> 
> 标签：php, mysql, sql

在 MySQL 中，每个用户都有一行，其中有一列包含由*\n*分隔的朋友姓名。

```
eg.
Friend1
Friend2
Friend3 
```

我希望能够快速搜索 Friends 字段包含 Friend2 的所有用户。

我发现`FIND_IN_SET`但这仅适用于逗号，并且数据可以包含逗号和外来字符。

显然用正则表达式搜索会很慢。我是整个交叉引用的新手，所以我希望获得一些关于构建数据的最佳方式的帮助，以便可以快速找到它。

提前致谢。

> 编辑：好的，我忘了提一点，数据来自一个游戏，其中朋友的名字存储在本地，并且没有指向另一个用户 ID 的链接。因此字符串。每次他们连接时，我都会得到他们朋友的名字转储，我在后台使用这些名字来帮助匹配游戏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T02:03:08.843

此类数据最常用的结构通常是添加一个额外的表。IE

```
user
    id,
    name
    email,
    e.t.c.

user_friend
    user_id
    friend_id 
```

查询这是查询表的问题。IE

列出所有用户的朋友姓名：

```
SELECT friend_id
FROM user_friend 
WHERE user_id = :theUser 
```

编辑：关于 OPs 编辑。也可以只存储名称。在这种情况下，表结构将变为：

```
user_friend
    user_id
    friend_name 
```

和查询：

```
SELECT friend_name 
FROM user_friend 
WHERE user_id = :theUser 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-29T02:04:18.997

你为什么将朋友的名字保留为文本？如果用户删除了朋友或更改了他们的名字，这将是低效的编辑。那是另一回事，您应该通过一些 auto_increment id 键在数据库中存储朋友姓名。搜索整数比搜索字符串要快得多，尤其是在非常大的数据库中。你应该设置一个朋友表，就像

```
 Column 1: connectionid auto_increment key
 Column 2: user1id int
 Column 3: user2id int
 Column 4: date added date 
```

等等...

然后，您可以在上面的连接表中搜索用户为 user1id 或 user2id 的所有行，并从中获取其他用户的列表。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-29T02:05:36.417

> 我的数据库还没有填满，所以我可以很容易地更改存储数据的格式和结构。

是的，您需要稍微规范一下您的数据库。使用当前结构，您的搜索将非常缓慢并占用更多空间。

查看此[wiki](http://en.wikipedia.org/wiki/1NF)以获取有关规范化的详细帮助。

您可以将朋友表和用户表分开，并通过外键约束或内部连接将它们链接起来。

结构将是：

## 用户表

*   id: AUTO_INCRMENT PK
*   姓名
*   其他栏目

## 朋友桌

*   id：AUTO_INCREMENT（不是必需的，但适合分区）
*   用户身份：
*   好友ID
*   添加日期
*   其他信息（如果需要）。

# sql - 使用 SQL Query 继续获取重复的结果

> ID：14574466
> 
> 赞同：-1
> 
> 时间：2013-01-29T01:58:37.060
> 
> 标签：sql, sql-server, sql-server-2000

我在想这可能是连接的问题？我试过 Group by 无济于事......任何建议都会被欣赏！我在下面放置了查询：

*抱歉缺少细节- Med_Prof_Record_No 是唯一值，我知道代码很乱-但这就是我到达这里时的内容 ;-) 这也是一个 sql 2000 盒子，所以新语法不起作用...我已经清理了连接，但不想偏离原始查询太远-

```
SELECT DISTINCT
    P.Last_name + ', ' + P.First_name AS Full_name,   
    P.Degree, 
    F.Med_Prof_Record_No, 
    F.Current_status, 
    F.Status_category, 
    F.Department_name, 
    F.Section, 
    F.SPHAffiliatedPhysiciansSurgeons AS Affiliated,
    S.Board_Name, 
    S.Specialty_Name,
    O.Office_name, 
    O.Address_1, 
    O.Address_2, 
    O.City, 
    O.State, 
    O.Zip_Code, 
    O.Phone_number_1, 
    O.Fax_number
FROM 
    Med_Prof P, Med_Prof_Facilities F, Med_Prof_Specialties S, Med_Prof_Offices O
WHERE         
    (F.Med_Prof_Record_No = P.Med_Prof_Record_No) AND 
    (F.Med_Prof_Record_No = S.Med_Prof_Record_No) AND
    (F.Med_Prof_Record_No = O.Med_Prof_Record_No) AND        
    <cfif URL.LastName is NOT "">(P.Last_name LIKE '#URL.LastName#%') AND</cfif>
    <cfif URL.Specialty is NOT "">(F.Section = '#URL.Specialty#') AND</cfif>
    <cfif URL.Group is NOT "">(O.Office_name LIKE '#URL.Group#%') AND</cfif>                
    (F.Status_category = 'active')
ORDER by Full_name 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T02:25:31.043

这是一个刺。这会假设您要如何决定要显示哪个办公室等（在这种情况下，它与任意性一样好），这`P.Med_Prof_Record_No`是唯一的并且仅代表一个人（起初我认为`Last_name`+`First_name`是唯一的，但这似乎很危险假设），并且您使用的是 SQL Server 2005 或更高版本。最后，[请使用适当限定的对象名称](https://sqlblog.org/2009/10/11/bad-habits-to-kick-avoiding-the-schema-prefix)，[请，请，请停止使用`FROM foo, bar, blat, splunge`各种](https://sqlblog.org/2009/10/08/bad-habits-to-kick-using-old-style-joins)惰性隐式连接。

```
;WITH x AS
(
  SELECT 
    P.Last_name + ', ' + P.First_name AS Full_name,   
    P.Degree, 
    F.Med_Prof_Record_No, 
    -- other columns from F,
    S.Board_Name, 
    S.Specialty_Name,
    O.Office_name,
    -- other columns from O,
    rn = ROW_NUMBER() OVER (PARTITION BY P.Med_Prof_Record_No
      ORDER BY F.Current_status, S.Board_name, O.Office_name)
  FROM 
    dbo.Med_Prof AS P
  INNER JOIN 
    dbo.Med_Prof_Facilities AS F
    ON P.Med_Prof_Record_No = F.Med_Prof_Record_No
  INNER JOIN
    dbo.Med_Prof_Specialties AS S
    ON F.Med_Prof_Record_No = S.Med_Prof_Record_No
  INNER JOIN
    dbo.Med_Prof_Offices AS O
    ON F.Med_Prof_Record_No = O.Med_Prof_Record_No
  WHERE         
    <cfif ... AND</cfif>
    -- other <cfif> clauses
    (F.Status_category = 'active')
)
SELECT * FROM x WHERE rn = 1
ORDER BY Full_name; 
```

# iphone - 隐藏和显示视图

> ID：14574467
> 
> 赞同：0
> 
> 时间：2013-01-29T01:58:40.750
> 
> 标签：iphone, ios, objective-c, uiview, uiscrollview

我有一个带有 UITextField 的小视图。我想让视图默认隐藏。当单击按钮时，它应该显示视图，并且必须向下滚动此子视图下方的主视图中的元素。任何想法？我附上截图![在此处输入图像描述](../Images/20874923f2c61312cc8f861ad0ba01dc.png)

![在此处输入图像描述](../Images/4fefcc3c8c3c91910ab78830d99abee8.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T02:06:51.343

从 InterfaceBuilder设置`UITextView`为`hidden`（您也可以从代码中设置它）。

在此之后将此操作处理程序附加到`UIButton`.

```
- (IBAction)showTextBar
{
    [textView setHidden:False];
    return;
} 
```

这将显示文本栏。如果要显示其他元素，则可以在此方法中添加它们。您也可以将此方法设置为切换。单击一次以显示元素，再次单击以隐藏它们。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-29T04:41:46.713

在动作内部你也可以使用

```
textView.hidden = NO; 
```

至于滚动使用 UIScrollView 之类的

```
[_scrollView setContentOffset:CGPointMake(0,_textView.center.y+168) animated:YES]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-29T04:53:24.123

//单击按钮时在隐藏和显示之间切换

```
 -(IBAction)showTextBar

     {

       if(textview.hidden)
        {
            [textView setHidden:False];
        }
        else
        {
            [textView setHidden:True];
        }

    } 
```

# javascript - 浏览器如何准确解析脚本标签？

> ID：14574471
> 
> 赞同：21
> 
> 时间：2013-01-29T01:59:08.290
> 
> 标签：javascript, html, html-parsing

我刚刚遇到了 HTML 解析的病态案例。我一直认为一个`<script>`标签会一直运行到第一个结束`</script>`标签。但事实证明*并非总是如此*。

这是有效的：

```
<script><!--
alert('<script></script>');
--></script> 
```

甚至这是有效的：

```
<script><!--
alert('<script></script>');
</script> 
```

但这不是：

```
<script><!--
alert('</script>');
--></script> 
```

这也不是：

```
<script>
alert('<script></script>');
</script> 
```

这种行为在 Firefox 和 Chrome 中是一致的。因此，尽管很难相信，浏览器似乎接受脚本标签内的 html 注释内的打开+关闭脚本标签。那么问题来了，浏览器是如何*真正*解析脚本标签的呢？这很重要，因为我正在使用的 HTML 解析库 Nokogiri 假定了明显（但不正确）的 until-the-first-close-tag 规则并且没有处理这种边缘情况。我想大多数其他图书馆也不会处理它。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-30T16:01:30.730

[在仔细研究了 Tim和 Jukka](http://www.w3.org/TR/html5/scripting-1.html#restrictions-for-contents-of-script-elements)[给出](http://www.whatwg.org/specs/web-apps/current-work/multipage/tokenization.html#script-data-state) 的链接后，我得到了以下答案：

*   在开始`<script>`标记之后，解析器进入*data1*状态
*   如果在*data1*`<!--`状态下遇到，则切换到*data2*状态
***   如果`-->`在任何状态下遇到，则切换到*data1*状态*   如果在*data2*`<script[\s/>]`状态下遇到，则切换到*data3*状态***   如果在*data3*`</script[\s/>]`状态下遇到，则切换到*data2*状态***   如果`</script[\s/>]`在任何其他状态下遇到，则停止解析******

 **** * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-29T06:42:44.720

根据 HTML 4.01 规范，所有示例都是无效的： 的内容`script`被声明为`CDATA`， 的描述[说](http://www.w3.org/TR/REC-html40/types.html#type-cdata)`CDATA`：

> “尽管 STYLE 和 SCRIPT 元素使用 CDATA 作为其数据模型，但对于这些元素，用户代理必须以不同方式处理 CDATA。标记和实体必须被视为原始文本并按原样传递给应用程序。字符序列“ `</`”（结束标记打开分隔符）的第一次出现被视为终止元素内容的结尾。在有效文档中，这将是元素的结束标记。”</p>

正如您所观察到的，在某些情况下，浏览器可能不会强制执行此规则，而是识别成对的开始和结束标记。从规范的角度来看，这是对无效文档的处理，即错误处理。目前尚不清楚他们究竟在这里做什么以及为什么。它似乎取决于 的存在`<!--`，它不应该对 HTML 4.01 解析产生任何影响（它*不是*内容中的评论开启器`CDATA`）。

在 XHTML 中，应用部分不同的规则，因为在 XHTML 中，`<!--`在元素的内容中打开注释`script`。

顺便说一句，所有示例都是无效的 HTML 4.01 和无效的 XHTML，`type`因为`script`. 该属性不是必需的（浏览器默认将内容视为 JavaScript），但这些规范需要它。

在 HTML5 中，其他规则适用。它们相当复杂，它们应该描述浏览器行为。除了[对内容施加限制](http://www.w3.org/TR/html5/scripting-1.html#restrictions-for-contents-of-script-elements)（禁止例如`<!--`没有匹配`-->`），HTML5 还指定了[解析规则](http://www.w3.org/TR/html5/syntax.html#parsing)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-29T02:16:57.017

标签的内容仍然是 HTML，除非您将其标记为不是 HTML。在 HTML 中，`<word>`被视为一个标签，`<`需要编写`&lt;`以避免这种行为。或者，您要制作`<script>`文本节点的内容；使用这个公式：

```
<script type="text/javascript">
//<![CDATA[
  // your code, with < and & and "", woohoo!
//]]>
</script> 
```

`<![CDATA[ ... ]]>`将文档的一部分描述为纯文本，没有标记。斜线是为了让 JavaScript 不会混淆；第一组斜线在 CDATA 之外，但它们是 HTML 安全的，所以没有问题。

编辑：刚刚意识到问题是关于解析，而不是编写 HTML。哎呀。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-29T02:32:21.697

假设，如果先解析标签，然后再解析注释，HTML 解析器会给你这些结果。

^(（我并不是说一定是这样，只是一种可能的解释。）)

**第一种情况**

```
<script><!--
alert('<script></script>');
--></script> 
```

`<script></script>`里面还有一套`<script></script>`。解析器可能会首先忽略标签的名称，只检查这些标签的正确打开和关闭。然后它解析评论。

```
<script><!--
--></script> 
```

所以这是有效的。

**第二种情况**

```
<script><!--
alert('<script></script>');
</script> 
```

`<script></script>`里面还有一套`<script></script>`。然后它解析评论。

```
<script><!-- 
```

注释一直延伸到文档的末尾。这不是严格有效的，但浏览器会正确处理它。

**第三种情况**

```
<script><!--
alert('</script>');
--></script> 
```

集合内有一个结束标记`<script></script>`。它在解析出`</script>`as 注释之前无效。

**第四种情况**

```
<script>
alert('<script></script>');
</script> 
```

`<script></script>`另一个里面有一组，`<script></script>`没有评论。第一遍是有效的，但它会真正查看标签以查看它们是什么。它可能不接受另一个标签内的一对`<script>`标签，因此会使案例无效。***

# android - 如何在 Android AXML 中实现这个简单的 XAML 网格布局？

> ID：14574474
> 
> 赞同：4
> 
> 时间：2013-01-29T01:59:40.897
> 
> 标签：android, xaml

我试图在 a 的上下文中了解 Android 布局`ListView`，如果我想在由名称和计数，如下所示：

![](../Images/8963c8c01decd394b02cf34544ce8a7a.png)

我会在 WP8 / WPF / Silverlight 中使用这种 XAML：

```
<Grid>
    <Grid.ColumnDefinitions>
        <ColumnDefinition Height="*" />
        <ColumnDefinition Height="Auto" />
    </Grid.ColumnDefinitions>

    <TextBlock Grid.Column="0" x:Name="Thing" />
    <TextBlock Grid.Column="1" x:Name="Count" />
</Grid> 
```

但是，Android Layout 似乎无法做到这一点 - 我尝试使用`RelativeLayout`，但似乎其中一个或另一个总是全尺寸，而另一个会被吃掉。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-29T02:07:50.330

你想要这样的东西吗？

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:orientation="vertical" >

    <TextView
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_centerVertical="true"
        android:text="Thing" />

    <TextView
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentRight="true"
        android:layout_centerVertical="true"
        android:text="Count" />

</RelativeLayout> 
```

或者您可以使用 a`LinearLayout`和 set `weights`：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:orientation="horizontal" >

    <TextView
        android:layout_width="0dp"
        android:layout_height="wrap_content"
        android:layout_weight="4"
        android:text="Thing" />

    <TextView
        android:layout_width="0dp"
        android:layout_height="wrap_content"
        android:layout_weight="1"
        android:text="Count" />

</LinearLayout> 
```

或者您可以使用`GridView`，developer.android.com 上有一个[很好的示例](http://developer.android.com/guide/topics/ui/layout/gridview.html)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-29T06:57:29.047

晚会迟到了。`GridView`我不是只有 2 列的超级粉丝。我建议在每个列表项布局中使用带有加权视图的 ListView。TableLayout 也可能适合，但我的示例由于某种原因无法滚动。单击初始屏幕上的按钮以进入 ListView 示例。

我很快更改了一些我放置的测试代码以适合您的示例 -[**请参见此处**](https://github.com/mike-marshall/androidlistexamples)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-29T02:26:16.820

事情就是这样。除了网格中每条记录的单个字符串之外的任何东西都需要一些特殊的东西。这无论如何都不是完美的代码，但它会有所帮助。

让我们从您的基本布局开始。

假设这是在名为 mainlist.xml 的东西中

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >

    <ListView
        android:id="@+id/itemList"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        />
</RelativeLayout> 
```

所以在这里你有一个带有 ListView 的亲戚。很基本吧？

在您的活动中，您将需要一些这样的代码。

```
@Override
public void onCreate(Bundle savedInstanceState) {
     super.onCreate(savedInstanceState);   
     setContentView(R.layout.mainlist);
     GetAndAssociateData();
}

public void GetAndAssociateData() {
      ListView list = (ListView)findViewById(R.id.itemList);
      final ArrayList<CountedItem> items;
      list.setAdapter(new CountedItemAdapter(getApplicationContext(), R.id.countedItemRow, items, this));   
 } 
```

该单个字符串项之外的任何内容不仅需要一个适配器，还需要每个项的布局。

CountedItemAdapter 在这种情况下是适配器（它告诉如何填充视图）。

countedItemRow 是每个项目的布局。

/src/CountedItemAdapter.java

```
public CountedItemAdapter(Context context,int textViewResourceId, ArrayList<CountedItem> objects,CountedItemActivity parentActivity) {
        super(context,  textViewResourceId, objects);
        this.context = context;
        this.items = objects;
        this.parentActivity = parentActivity;
        // TODO Auto-generated constructor stub
    }

public View getView(int position, View convertView, ViewGroup parent) {
    View view = convertView;
    if (view == null) {
        LayoutInflater inflater = (LayoutInflater) context.getSystemService(Context.LAYOUT_INFLATER_SERVICE);

        view = inflater.inflate(R.layout.countedItemRow, null);
    }
    if (items != null){
        CountedItem item = items.get(position);
        if (item != null) {
            TextView thing= (TextView) view.findViewById(R.id.thing);
            if (thing!= null)
            {
                thing.setText(item.GetThingText());
            }
            TextView thingCount = (TextView) view.findViewById(R.id.thingCount);
            if (thingCount != null)
            {
                thingCount .setText(item.GetThingCount());
            }

        }
    }

    return view;
} 
```

/res/layout/countedItemRow.xml

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/countedItemRow"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" >
<TextView
    android:id="@+id/thing"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_x="0dp"
    android:layout_y="0dp"
     />

<TextView
    android:id="@+id/thingCount"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_x="0dp"
    android:layout_y="150dp"
    />
</RelativeLayout> 
```

# c# - 如何使用 ApplyCurrentValues 更新整个实体列表？

> ID：14574475
> 
> 赞同：0
> 
> 时间：2013-01-29T01:59:42.143
> 
> 标签：c#, sql, entity-framework

行，

这是我更新单个对象的方法：

```
public void UpdateRespondent(Respondent changed)
{
    var respondent = db.Respondents.FirstOrDefault(r => r.RespondentId == changed.RespondentId);

    db.Respondents.ApplyCurrentValues(changed);
    db.SaveChanges();
} 
```

这将调用 1 次选择和 1 次更新（如果发生变化）。

现在，如果我有`List<Respondent>`数百个，我该怎么做，在循环中对每个调用 UpdateRespondent(changed)？这将导致数百 * 2 sql 语句。

或者有没有更有效的方法来做到这一点？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T02:30:46.263

EF 不支持批量更新。您可以考虑使用 EntityFramework 扩展库——我见过其他成功使用它的人：

[https://github.com/loresoft/EntityFramework.Extended](https://github.com/loresoft/EntityFramework.Extended)

来自上述链接的代码片段：

```
//update all tasks with status of 1 to status of 2
context.Tasks.Update(
    t => t.StatusId == 1, 
    t2 => new Task {StatusId = 2});

//example of using an IQueryable as the filter for the update
var users = context.Users.Where(u => u.FirstName == "firstname");
context.Users.Update(users, u => new User {FirstName = "newfirstname"}); 
```

或者，您可以直接使用 ADO.Net 并调用存储过程。

祝你好运。

# css - 特定网页上的 CSS 问题

> ID：14574476
> 
> 赞同：0
> 
> 时间：2013-01-29T01:59:47.917
> 
> 标签：css, html, templates

我们正在我们的网站上建立一种新的响应式 Web 模板设计，这种设计在除一个地方外的所有地方都运行良好（如果有帮助，我们在 Convio CMS 上）。这是它应该看起来的样子（右栏中的菜单和联系信息）：

[http://www.ucc.org/feed-your-spirit/practices/prayer-flags.html](http://www.ucc.org/feed-your-spirit/practices/prayer-flags.html)

但是，在此页面上：

[http://www.ucc.org/find/find-a-ucc-church.html](http://www.ucc.org/find/find-a-ucc-church.html)

该信息显示在此处。但是，在您使用查找功能后，信息会按原样显示在右侧。这真的让我很难过。

寻找教堂服务是一个可以放置在任何页面上的组件。

第二个问题 - 地图在 Firefox 的结果页面上不可见，但在当前页面 - www.ucc.org/find - 它是可见的。

欢迎任何解决方案、想法等！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T02:06:37.723

两个问题，都是 CSS。左边的 div，`ef-inner3`没有也`float:left`没有`width`指定。这会导致它太宽，将主题区域向下推。

您需要在其中添加这些 CSS 值。我不确定您如何使用特定的 CMS 系统来做到这一点。

因此，它向下移动的原因是：当您浮动两个元素时，它们的组合宽度不能大于其父元素的宽度。如果它们更大，则没有足够的空间，第二个浮动项目移动到第一个下方。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T02:05:10.390

棘手的一个！但我认为这可能不是 CSS。

我的第一反应是，也许 DIV 没有在某个地方正确关闭。

根据修复它的 Find 功能，也许你有一个`</div>`设置为与 Find 结果一起显示，所以在 Find 功能显示它之前它没有显示？

希望这是有道理的！如果可能，尝试搜索任何类型的 if/else 语句中的任何结束标记。

编辑 - 刚刚注意到 - 您的“查找教堂”页面中的许多内容似乎都在“四分之三”DIV 之后，并且在“清除”DIV 之后。如果您可以编辑源代码，请尝试将所有内容放回“四分之三”DIV 中，看看会发生什么。

# jquery - JQuery Mobile，以编程方式更改按钮文本时丢失格式

> ID：14574477
> 
> 赞同：0
> 
> 时间：2013-01-29T01:59:56.863
> 
> 标签：jquery, jquery-mobile, button, dynamic, formatting

我正在尝试以编程方式更改 jQuery Mobile 中按钮的文本。当我这样做时，按钮会丢失一些格式。下面是说明两次尝试的代码。任何人都可以提出一种不会阻塞浏览器的方法吗？

```
<script>
$(document).bind("pageinit", function(){

    $("#buttonId").text("New Text");
    $("#buttonId").button("refresh");
});

//Method #2
$(document).ready(function () {
    $("#buttonId").text("New Text");
    $("#buttonId").button("refresh");
});
</script>

<a  id="buttonId" href="" data-role="button">Old Text</a> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T08:58:13.413

这应该被使用：

```
$("#buttonId span span").text("New Text"); 
```

要更改文本，无需：

```
$("#buttonId").button("refresh"); 
```

将来也不要使用：**`$("#buttonId").button("refresh");`**，此功能仅用于增强动态创建/扩展的列表视图外观。

正确的方法是：

```
$("#buttonId").button(); 
```

按钮没有刷新方法。如果你想了解更多关于这个以及为什么在 jQuery Mobile 中使用动态创建的内容时要小心很重要，请查看我的博客**[文章](http://www.gajotres.net/jquery-mobile-and-how-to-enhance-the-markup-of-dynamically-added-content/)**。或者你可以在**[这里](https://stackoverflow.com/a/14550417/1848600)**找到它。

# sql - Perl 使用 SQL 语句按顺序重命名

> ID：14574481
> 
> 赞同：0
> 
> 时间：2013-01-29T02:00:20.037
> 
> 标签：sql, perl, hash

我正在执行 SQL 更新语句，但需要按顺序更新设备名称。

如果设备名称以 S01 结尾，则它们首先被重命名，然后是 p01，以此类推。

```
@order = qw(s01 s02 p02 r02);

While select * from #get device_name, suffix, etc

Foreach $i (@order) {
  If ($suffix eq $i) {
     Update table 
```

问题在于它会跳过与后缀不匹配的行。我尝试将选择输出绑定到哈希，但我认为我做得不对。哈希对我来说很难理解，除非它们很简单。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T05:07:48.180

此解决方案用于`grep`过滤掉您想要的名称。

```
my @order = qw(s01 s02 p02 r02);
my @device_names = qw(dev1s01 dev2s02 dev3p02 dev4r02);

foreach my $suffix (@order) {
    foreach my $device (grep /$suffix$/, @device_names) {
        # update table
    }
} 
```

# javascript - 动态调整 Div 及其内容的大小以适应浏览器高度

> ID：14574483
> 
> 赞同：-1
> 
> 时间：2013-01-29T02:00:51.543
> 
> 标签：javascript, jquery, css

我正在尝试优化我的网站以适应不同的屏幕和窗口大小。我希望 div 的内容占据浏览器高度的 100%，而不是更多，这样用户就不必向下滚动。我不知道如何实现这个，我试过这个

```
$(window).on('load resize', function(){
    $('.container-narrow').width($(this).width());
    $('.container-narrow').height($(this).height());
)}; 
```

但这似乎不起作用，内容仍然超过浏览器高度。我必须结束滚动

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T02:09:57.453

CSS 将在调整大小时重新计算。

```
<html>
<head>
<style>
body, html {
 height: 100%;
 margin: 0px;
 padding: 0px;
}
.body {
 height: 100%;
 margin-bottom: -100px;
}
.header {
 height: 100px;
 background-color: #CCCCCC;
 text-align: center;
}
.content {
 text-align: center;
}
.footer {
 height: 100px;
 text-align: center;
 background-color: #AAAAAA;
}
</style>
</head>
<body>
<div class="body">
    <div class="header">
    This is the header.
    </div>
    <div class="content">This is the content.</div>
</div>
<div class="footer">
This is the footer.
</div>
</body>
</html> 
```

# c++ - 显然缺少 getline() 的重载，使 RRef 在 GCC 4.7.2 和 Clang 3.2 中流式传输

> ID：14574486
> 
> 赞同：4
> 
> 时间：2013-01-29T02:01:06.247
> 
> 标签：c++, c++11, stream, getline, rvalue-reference

`getline()`尝试与临时流对象一起使用时遇到了意外的编译错误：

```
#include <iostream>
#include <string>
#include <sstream>

using namespace std;

int main()
{
    string input = "hello\nworld\nof\ndelimiters";

    string line;
    if (getline(stringstream(input), line)) // ERROR!
    {
        cout << line << endl;
    }
} 
```

看起来没有`getline()`接受对流对象的右值引用的存在重载。如果我更改`main()`为使用左值，它将按预期编译和运行：

```
int main()
{
    string input = "hello\nworld\nof\ndelimiters";

    string line;
    stringstream ss(inpupt);
    if (getline(ss, line)) // OK
    {
        cout << line << endl;
    }
} 
```

因此，我查看了 C++11 标准，发现（第 21.4.8.9 节）*应该*`getline()`存在对流对象进行右值引用的重载。

 *我是否遗漏了一些明显的东西，或者这是一个错误？GCC 4.7.2 和 Clang 3.2 都会出现该错误。我目前无法在 VC 上对此进行测试。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-29T02:03:50.320

如果我在 OS X 上使用以下行编译，则编译成功。您使用的是哪个版本的 libstdc++ 或 libc++？

```
clang++ -std=c++11 -stdlib=libc++ foo.cc 
```

libstdc++（以及 libc++）尚未完全实现 C++ 2011 标准库。这似乎是 libstdc++ 中缺少的功能之一。

可悲的是，我不知道有任何资源可以准确列出每个实现中缺少的内容。*

# php - 我想了解 Drupal 的结构

> ID：14574487
> 
> 赞同：0
> 
> 时间：2013-01-29T02:01:13.703
> 
> 标签：php, drupal, drupal-7

现在我想了解Drupal平台的结构。你能告诉我开始的书吗？我不知道从何开始，谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T07:54:23.810

检查[这个讨论](https://stackoverflow.com/q/1068556/863380)。也正如@CIGuy 建议的那样，看看[Drupal 结构](http://drupal.org/documentation/structure)。

# php - php数组在while循环中复制格式

> ID：14574492
> 
> 赞同：-2
> 
> 时间：2013-01-29T02:02:12.853
> 
> 标签：php

我想输出查询的结果，以便格式与以下内容相同：

```
$links = array(
'Link 1' => '/link1',
'Link 2' => '/link2'
); 
```

所以查询是

```
$query = "SELECT * FROM link";
$result = mysql_query($query, $connection) or die(mysql_error());
$row = mysql_fetch_assoc($result) 
```

需要输出的字段有：

```
$row['link_title'] and $row['url'] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T02:33:41.783

这可能比期望或必要的要复杂一些，但这对您有用吗：

```
$a = 0;
while ($row = mysql_fetch_assoc($result)) {
    foreach ($row as $k => $v) {
        // Assumes table column name is 'link_title' for the link title
        if ($k == 'link_title') {$title[$a] = $v;} 
        // Assumes table column name is 'url' for the URL
        if ($k == 'url') {$url[$a] = $v;}
    }
    $a++;
}
$i = 0;
foreach ($title as $t) {
    $links[$t] = $url[$i];
    $i++;
}
print_r($links); 
```

正如@Class 所说，如果`link_title`'**永远不会**重复，那么您可以执行以下操作：

```
while ($row = mysql_fetch_assoc($result)) {
    $array[$row['link_title']] = $row['url'];
} 
```

* * *

由于`link_title`' 是唯一的两个进程输出：

```
Array ( 
    [Moxiecode] => moxiecode.com 
    [Freshmeat] => freshmeat.com 
) 
```

数据库表+内容：

```
id | link_title |     url       |
---+------------+---------------|
1  | Moxiecode  | moxiecode.com |
---+------------+---------------|
2  | Freshmeat  | freshmeat.com | 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T02:16:46.297

您是否正在寻找这样的东西：

```
$links = array();
while(foo){
    $links[$row['link_title']] = $row['url'];
} 
```

或者，如果标题与上面的示例相同，您可以使用可能导致覆盖的

```
$link = array();
$title = array()
while($row = mysql_fetch_assoc($result)){
    array_push($title, $row['link_title']);
    array_push($link, $row['url']);
}

$links = array_combine($title, $link); 
```

也使用 PDO 或 mysqli 函数 mysql 已弃用。[这是PDO](http://wiki.hashphp.org/PDO_Tutorial_for_MySQL_Developers)的教程

**编辑：**示例：[http](http://codepad.viper-7.com/uKIMgp) ://codepad.viper-7.com/uKIMgp我不知道如何使用数据库创建示例，但它足够接近。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-29T03:16:58.250

你想呼应数组的结构吗？

```
foreach ($Array AS $Values => $Keys)
{
 echo "Array Key: <b>". $Keys ."</b>  Array Value:<b>". $Values ."</b>";
} 
```

这将呼应您的示例数组的结构

# excel - 如何创建一个 =IF(OR()) 语句来计算真/假条件值的数量？

> ID：14574494
> 
> 赞同：2
> 
> 时间：2013-01-29T02:02:16.450
> 
> 标签：excel, if-statement, ms-office

我叔叔要我帮助他的警察局修复他们的 Excel 表格。他们在一个看起来像这样的 excel 表中跟踪呼叫代码：

![这个](../Images/891460ba2605da84d23db0ef35734e15.png).

顶部图像中的行是根据呼叫主题按 ABC 40+（无线电信号，底部图像）中的数字分类的单个呼叫。在我的示例中，我在 Radio Signals 中的第 46 行和第 49 行中放置了 3 个呼叫信号。现在我希望看到 E46 和 E49 中的计数均为 3。

我遇到的问题是对 Excel 语句的编程知识有限。我知道我可以将 IF 语句与 AND 和 OR 语句结合使用，但这似乎非常冗长乏味。根据本文档的当前设置，我可以使用更有效的方法来获得属于该单元的信号计数吗？

任何帮助是极大的赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T02:18:29.963

使用 COUNTIFS 语句效果很好。下面的公式就像一个魅力，用于计算一系列单元格中多个条件的出现。

**对于 46-E 单元格**

```
=COUNTIFS(A7:A39,"=37")+COUNTIFS(A7:A39,"=56")+COUNTIFS(A7:A39,"=64")+COUNTIFS(A7:A39,"=65")+COUNTIFS(A7:A39,"=70")+COUNTIFS(A7:A39,"=81")+COUNTIFS(A7:A39,"=91") 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-29T06:50:28.627

假设您的调用列表在 Sheet1 A 列中，逗号分隔的列表在 Sheet2 中，请将以下公式放入 Sheet2：

```
=SUM(--ISNUMBER(SEARCH(" "&Sheet1!$A$:$A$&",",""&Sheet2!A46&",")))

```

输入公式时一定要按`Ctrl`- `Shift`- ！`Enter`

# ruby-on-rails-3 - 嵌套模型上的 Rails 3 JQuery 分页

> ID：14574495
> 
> 赞同：0
> 
> 时间：2013-01-29T02:02:18.913
> 
> 标签：ruby-on-rails-3, jquery, pagination, will-paginate

我看过关于[Pagination with AJAX](http://railscasts.com/episodes/174-pagination-with-ajax)的 railscasts 。我正在尝试使用嵌套模型复制他的方法。我似乎很困惑，因为我没有子模型或完全集成的控制器的视图。

假设产品 has_many Comments。如何使用 will_paginate 对产品视图中的评论进行相同的分页？

更新：

这是我的大部分尝试（我的尝试实际上使用了 kaminari，但它与 will_pagenate 基本相同）：

查看/产品/评论/_index.html.erb：

```
<div id="comments">
  <% comments.each do |comment| %>
    <%= f.fields_for :comments, comments do |comment_builder| %>
      <%= render 'products/comments/field', f: comment_builder %>
    <% end %>
  <% end %>
  <%= paginate comments %>
</div> 
```

查看/产品/评论/_field.html.erb：

```
<fieldset>
  <%= f.hidden_field :_id, :value => f.object._id %>
  <%= f.hidden_field :_destroy %>
  <%= f.object.text %>
  <%= link_to "remove", '#', class: "remove_field" %>
</fieldset> 
```

查看/产品/评论/_index.js.erb：

```
$("#comments").html("j render("products/comments/index")) %>"); 
```

资产/javascripts/product.js

```
$('.pagination a').live
  click: ->
    $(".pagination").html("Page is loading...")
    $.getScript(this.href)
    false 
```

控制器/comments_controller.rb

```
class CommentsController < ApplicationController
  before_filter :get_product

  def index
    @comments = @product.comments.desc(:created_at).page(params[:page]).per(10)
    respond_to do |format|
      format.html # index.html.erb
      format.json { render json: @comments }
    end
  end

private

  def get_product
    @product = Product.find(params[:product_id]) if params[:product_id]
    redirect_to root_path unless defined?(@product)
  end
end 
```

意见/产品/show.html.erb（摘录）

```
<%= render "products/comments/index", f: f, comments: @comments%> 
```

控制器/products_controller.rb

```
def show
  @product = Product.find(params[:id])

  @comments = @product.comments.desc(:created_at).page(params[:page]).per(1)

  respond_to do |format|
    format.html # show.html.erb
    format.json { render json: @product }
  end
end 
```

view/products/comments/_index.js.erb 永远不会被调用。还有一种更像rails的方式吗？

# python - 学习 Python 拆分和连接？

> ID：14574498
> 
> 赞同：1
> 
> 时间：2013-01-29T02:03:05.290
> 
> 标签：python, join, python-2.7, split, list-comprehension

我以为我正在理解 python 中的拆分和连接，但它不适合我。

让我们说的价值`inp[17] = 'Potters Portland Oregon school of magic'`

```
# a string of data I am pulling from a csv file, the data comes through just fine.
loc = inp[17] 

l = loc.split(' ') # I want to split by the space

# I want to filter out all these words say they don't always 
# come as "School of magic" so I cant just filter that out they 
# could be mixed around at times.

locfilter = ['Potters', 'School', 'of', 'magic']     
locname = ' '.join([value for value in l if l not in locfilter]) 
```

此时我的`locname`变量应该只包含`Portland Oregon`在其中，但它仍然`'Potters Portland Oregon school of magic'`没有过滤掉。

我做错了什么我认为问题出在我的`locname =`线上。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-29T02:06:30.430

这里的问题不是你的`split`or `join`，它只是你的列表理解中的一个愚蠢的错误（我们所有人一直犯的那种愚蠢的错误）：

```
locname = ' '.join([value for value in l if l not in locfilter]) 
```

显然`l`是从来没有在`locfilter`。如果你解决这个问题：

```
locname = ' '.join([value for value in l if value not in locfilter]) 
```

它工作正常：

```
'Portland Oregon school' 
```

请注意，这`'school'`仍然是输出的一部分。那是因为`'school'`不在`locfilter`；`'School'`曾是。如果要不区分大小写地匹配这些：

```
lowerfilter = [value.lower() for value in locfilter]
locname = ' '.join([value for value in l if value.lower() not in lowerfilter]) 
```

现在：

```
'Portland Oregon' 
```

# php - preg_replace php 正则表达式

> ID：14574502
> 
> 赞同：0
> 
> 时间：2013-01-29T02:03:44.187
> 
> 标签：php, regex, preg-replace, preg-match

好吧，我有两个问题。

第一。我真的很讨厌正则表达式，它无法进入我的脑海。任何想法如何思考或学习，任何好的教程？（我已经搜索并发现它们，因为它们是教程，太高级了。）

第二：

假设我得到了这 3 个字符串：

```
$string = "his";

$str1 = "hi";
$str2 = "s"; 
```

所以我想做的是一个寻找 hi 并替换它的正则表达式。但！如果字符串中有“s”，则不会被替换。像这样。

```
preg_replace('/'.$str1.'^['.$str2.']/',"replace it with this",$string); 
```

它不工作！（当然不是，正则表达式不是我的事！）

正如我所说，我没有用正则表达式得到这个。我想找到 str1，如果 str2 不在字符串中，它不会被替换。**任何人？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T02:06:51.490

```
$str = 'his';

$s1 = 'hi';
$s2 = 's';

$result = preg_replace('~' . preg_quote($s1) . '(?!' . preg_quote($s2) . ')~', 'replace with this', $str);
                      // ~hi(?!s)~
                      // this regex means:
                      //   "hi" string followed by anything but "s"

var_dump($result); 
```

活生生的例子：

1.  [http://ideone.com/XjX9n3](http://ideone.com/XjX9n3)
2.  [http://ideone.com/U2JdkL](http://ideone.com/U2JdkL)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T04:18:35.983

我认为您想制作多个过滤器，例如：`s`等`m`或更多..

```
$s = array('s', 'm');
$result = preg_replace('~hi(?!'. join('|', $s) .')~', 'replace with this', 'him');
print $result; // him
// and
$result = preg_replace('~hi(?!'. join('|', $s) .')~', 'replace with this', 'hiz');
print $result; // replace with thisz 
```

# java - 使用 .jar 嵌入多类小程序

> ID：14574506
> 
> 赞同：-1
> 
> 时间：2013-01-29T02:03:52.823
> 
> 标签：java, eclipse, applet

我有一个使用 Eclipse 作为 .jar 文件导出的多类小程序。jar 文件被调用`chess.jar`，我在 Eclipse 中编译和运行的类被调用`Chess.java`，二进制文件是`Chess.class`. 以下代码是我试图用来将此小程序嵌入我的网站的 HTML。

```
<APPLET CODE=Chess.class
ARCHIVE="chess.jar"
WIDTH=700
HEIGHT=700
CODEBASE="mywebsitewherethefilesarebeinghosted.com/"
ALT="Your browser understands the <APPLET> tag but isn't running the applet, for some   reason.">
Your browser is ignoring the <APPLET> tag!
</APPLET> 
```

我得到错误`ClassNotFoundException Chess.class`

[我之前做过小程序，这里](https://sites.google.com/site/tinybrozco/)只有一个类成功，并且我使用几乎完全相同的 HTML，除了`CODEBASE`我添加了`ARCHIVE`标签。

作为一个小程序，它没有主类。我对这个`MANIFEST.MF`文件不是很熟悉，我不确定是否需要为此目的使用它。我`Chess.class`打电话给其他一些班级，比如`Pawn.class`and`Knight.class`他们都在`chess.jar`. 任何帮助将不胜感激。

**编辑** 我创建了一个在本地运行 .jar 的本地 HTML 文件，它运行完美。

```
<html>
<applet code=Chess.class 
archive="chess.jar"
width=700 height=700>
</applet> 
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T05:38:23.530

我认为这是您的 HTML 内容的简单问题。我看到您有第二个开始标签，我认为这会使浏览器感到困惑。浏览器会认为第一个没有结束标签，这可能是它被忽略的原因。删除它，然后重试。

即使这不是问题，让标签像那样打开也是不好的做法。对于不知道applet标签是什么的可怜用户来说，您的错误消息也应该更有意义。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T02:26:50.837

与属性的情况不同，它似乎`CODEBASE`遵循`/`目录分隔符，因此请尝试用**/**分隔的正确目录结构替换您的值**`.`**`CODE``CODEBASE`

 **检查示例[here](https://forums.oracle.com/forums/thread.jspa?threadID=2455252&tstart=0)和[here](http://docstore.mik.ua/orelly/java/exp/ch03_05.htm)也**

# android - Android 应用中的 Facebook Graph API 字段扩展

> ID：14574509
> 
> 赞同：5
> 
> 时间：2013-01-29T02:04:12.470
> 
> 标签：android, facebook, facebook-android-sdk, facebook-field-expansion

Facebook 的 Android SDK 是否支持字段扩展？我在哪里可以找到一个例子？

关于 Graph APi 的字段扩展有很好的文档。但是，我找不到 android-sdk-3 的任何文档。是否支持？

当您想要执行以下操作时，问题就开始了：

```
/me?fields=name,birthday,photos.limit(10).fields(id, picture) 
```

在 Facebook android SDK 中，似乎将参数添加为字符串不起作用

例如

```
request = Request.newGraphPathRequest(session, "me/friendlists", new Request.Callback() {
    public void onCompleted(Response response) ...
}
Bundle parameters = new Bundle();
parameters.putString("fields","members.fields(id)", "list_type");
request.setParameters(parameters); 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2014-12-15T07:54:27.670

```
Session session = Session.getActiveSession();
    Bundle parameters = new Bundle(); 
    parameters.putString("fields","picture,description,source"); 
    new Request(session, /me/videos/uploaded, parameters, HttpMethod.GET,
            new Request.Callback() {
                public void onCompleted(Response response) {
                    GraphObject responseGraphObject = response
                            .getGraphObject();
                    JSONObject json = responseGraphObject
                            .getInnerJSONObject();
                    try {
                        JSONArray array = json.getJSONArray("data");
                        for (int i = 0; i < array.length(); i++) {
                            JSONObject main = array.getJSONObject(i);
                            String surce = main.optString("source");

                            String picture = main.optString("picture");

                            String videoname = main
                                    .optString("description");
                            System.out.println(surce);

                        }
                    } catch (JSONException e) {
                        e.printStackTrace();
                    }
                }
            }).executeAsync(); 
```

*通过graph api从faecbook获取视频数据，并将字符串放入bundle *

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-29T02:33:32.163

Android SDK 用于进行 Graph API 查询

[您使用与对 graph.facebook.com 进行原始 HTTP 调用或使用Graph API Explorer](https://developers.facebook.com/tools/explorer)工具时相同的参数和相同的返回值进行 API 调用-

[只需按照字段扩展](https://developers.facebook.com/docs/reference/api/field_expansion/)文档中的语法更改对 API 的现有调用以包含所需的其他字段，例如，如果您当前正在调用`/me/friends`，则可以将其更改为`/me/friends?fields=name,birthday`

# android - 如何配置proguard以保持案例类与lift-json一起使用？

> ID：14574514
> 
> 赞同：2
> 
> 时间：2013-01-29T02:04:51.933
> 
> 标签：android, json, scala, lift, proguard

我想在 Android 上使用 lift-json 来处理 JSON 对象。

下面的代码：

```
case class Msg(a:Int, s:Int)

implicit val formats = DefaultFormats
val msg = Msg(1, 1)
val jv = Extraction.decompose(m)
println(compact(render(jv))) // this print {} 
```

我的 proguard 配置是：

```
"-dontoptimize",
"-printseeds keep.log", "-printmapping obf.log",
"-keepparameternames",
"-dontskipnonpubliclibraryclasses",
"-dontskipnonpubliclibraryclassmembers",
"-keepattributes Exceptions,InnerClasses,Signature,Deprecated,SourceFile,LineNumberTable,*Annotation*,EnclosingMethod",
"-dontobfuscate",
"-keepclassmembers class * { ** MODULE$; }",
"-keep public class scala.ScalaObject",
"-keep public class scala.Function*",
"-keep public class scala.Tuple2",
"-keep public class scala.Tuple4",
"-keep class my.pkg.**",
"-keep interface my.pkg.**",
"-keepclasseswithmembers class my.pkg.** { *; }" 
```

我需要在 lift-json 库中保留哪些元素？

# windows-phone-8 - VS 2012 上不显示“将应用程序关联到商店”选项

> ID：14574517
> 
> 赞同：1
> 
> 时间：2013-01-29T02:05:11.377
> 
> 标签：windows-phone-8, windows-store-apps

我开发了一个 Windows Phone 8 应用程序。但是当我尝试将其添加到商店时，“将应用程序关联到商店”选项不显示（无法发布图片，因为我是新来的）。

当我右键单击项目时选项不会出现，并且当我单击 Visual Studio 2012 菜单项目 > 存储 > 时它也不起作用（关联应用程序的选项显示为禁用）

我也尝试在我的 WMAppManifest.xml 文件中手动添加标签，但也无济于事。在这种特殊情况下，应用程序不会在模拟器中启动。它永远在加载。

我的开发者帐户的当前状态是“需要验证” - 意思是：我需要等待信用卡交易弹出我的银行输入密码。是这样吗？这就是我无法关联该应用程序以及为什么它没有显示在 Visual Studio 2012 上的原因吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-29T03:08:48.760

该菜单仅适用于 Windows 8 应用程序，不适用于 Windows Phone 8 应用程序。您应该使用[http://dev.windowsphone.com](http://dev.windowsphone.com)进行所有 Windows Phone 商店活动。同样，VS2012 没有与 WP8 商店的任何内置集成，只有 Win8 商店。

# python - 使用 try 语句如何避免竞争条件？

> ID：14574518
> 
> 赞同：31
> 
> 时间：2013-01-29T02:05:18.167
> 
> 标签：python, race-condition

在确定文件是否存在时，使用 try 语句如何避免“竞争条件”？

我之所以问，是因为一个高度赞成的[答案](https://stackoverflow.com/a/85237/1217270)（更新：它已被删除）似乎暗示 using`os.path.exists()`创造了一个原本不存在的机会。

给出的例子是：

```
try:
   with open(filename): pass
except IOError:
   print 'Oh dear.' 
```

但我不明白与以下相比如何避免竞争条件：

```
if not os.path.exists(filename):
    print 'Oh dear.' 
```

调用如何`os.path.exists(filename)`允许攻击者对文件执行他们无法执行的操作？

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2013-01-29T04:08:56.297

竞争条件当然是在您的程序和在文件上运行的其他一些代码之间（竞争条件总是需要至少两个并行进程或线程，有关详细信息，请参阅[此](http://en.wikipedia.org/wiki/Race_condition)内容）。这意味着使用`open()`而不是`exists()`可能仅在两种情况下真正有帮助：

1.  您检查是否存在由某个后台进程创建或删除的文件（但是，如果您在 Web 服务器内运行，这通常意味着您的进程的许多副本并行运行以处理 HTTP 请求，因此对于 Web 应用程序来说即使没有其他程序也可能出现这种情况）。
2.  可能有一些恶意程序正在运行，它试图通过在您期望它存在的时刻破坏文件来使您的代码崩溃。

`exists()`只执行一次检查。如果文件存在，它可能会在`exists()`返回后一微秒被删除`True`。如果文件不存在，它可能会立即创建。

但是，`open()`不仅测试文件是否存在，而且还打开文件（并以原子方式执行这两个操作，因此在检查和打开之间不会发生任何事情）。通常文件在有人打开时无法删除。这意味着在里面`with`你可能完全确定：文件现在确实存在，因为它是打开的。虽然只有 inside 才是正确的`with`，并且文件仍然可以在`with`块退出后立即删除，但将需要文件存在的代码放在里面`with`保证代码不会失败。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-01-29T02:11:20.517

这是一个使用示例：

```
try:
    with open('filename') as f:
        do_stuff_that_depends_on_the_existence_of_the_file(f)
except IOError as e:
    print 'Trouble opening file' 
```

如果您以任何访问权限打开文件，则操作系统将保证该文件存在，否则它将因错误而失败。如果访问是独占的，则任何其他争用该文件的进程要么被您阻止，要么阻止您。

这`try`只是一种检测打开文件行为的错误或成功的方法，因为 Python 中的文件 I/O API 通常没有返回码（使用异常代替）。所以要真正回答你的问题，不是`try`避免竞争条件的，而是`open`. 它在 C（Python 所基于）中基本相同，但没有例外。阅读[此](https://stackoverflow.com/questions/82831/how-do-i-check-if-a-file-exists-using-python)内容以获取更多信息。

请注意，您可能希望执行取决于对 try 块内文件的访问权限的代码。关闭文件后，将无法保证其存在。

调用`os.path.exists`只是在文件可​​能存在或可能不存在的时刻给出快照，并且一旦`os.path.exists`返回，您就不知道文件的存在。恶意代码或意外逻辑可能会在您不期望的情况下删除或更改文件。这类似于在驶入道路之前转过头来检查道路是否畅通。一旦你转过头来，你就只能猜测你不再看的地方发生了什么。保持文件打开保证了扩展的一致状态，这在驾驶时是不可能的（无论好坏）。:)

`try/open`由于`os.path.exists`. _ 不幸的是，我不知道在所有情况下都无法阻止在目录中创建文件，所以我认为最好检查文件是否存在，而不是不存在。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-29T02:23:02.923

我认为您要问的是特定的比赛条件：

1.  文件被打开
2.  上下文被切换，文件被删除
3.  上下文被切换回并尝试对“打开的”文件进行文件操作

在这种情况下，您“受保护”的方式是将所有文件处理代码放在一个`try`块中，如果文件在任何时候变得不可访问/损坏，您的文件操作将能够通过该`catch`块“优雅地”失败。

请注意，现代操作系统无论如何都不会发生这种情况，当文件被“删除”时，删除不会发生，直到文件上的所有打开句柄都被解析（释放）

# jquery - jQuery 如何监听被触发的 DOM 事件？

> ID：14574523
> 
> 赞同：2
> 
> 时间：2013-01-29T02:05:36.203
> 
> 标签：jquery, dom, javascript-events, event-handling

jQuery 如何知道任何 DOM 事件何时发生？

```
$('body').on('click', function(e) {
    alert('working');
});

document.body.onclick; // null 
```

我太依赖这个库了。有人能告诉我它是如何知道身体被点击的吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-29T02:08:51.250

jQuery（感谢上帝）不使用`onclick`DOM 元素的属性或属性，而是使用`addEventlistener`IE-`attachEvent`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-29T02:11:20.797

`.on`换`jQuery.event.add`行（如果您查看第 2688 行的 jQuery 源代码）。

这尝试使用事件类型的缓存版本，但如果没有，最终归结为调用特定于浏览器的函数来附加事件（在第 2767 行左右）。

```
if ( elem.addEventListener ) {
    elem.addEventListener( type, eventHandle, false );
} else if ( elem.attachEvent ) {
    elem.attachEvent( "on" + type, eventHandle );
} 
```

对于这两种情况，它似乎都没有回退，因此`on*`永远不会写入属性。因此，`elem.onclick`如果您使用，将为空`jQuery.on`

供参考：[http ://code.jquery.com/jquery.js](http://code.jquery.com/jquery.js)

# python - 从父类调用时无法执行 json.loads(json_data)

> ID：14574530
> 
> 赞同：0
> 
> 时间：2013-01-29T02:06:41.677
> 
> 标签：python, json

我忘了提一下，我正在使用以下 CURL 来发送数据：

```
curl -i -H "Content-Type: application/json" -X GET "http://appdev1.ischoolcampus.com/api/assignments" -d '{"guid":"teacherones-class","isTeacher":0}' 
```

我有一个方法 Assignments.GET() 发送一些数据和数据格式（JSON、XML 等）到...

ClientRequest.Receive(data,method) 基于格式，将其发送到 ClientRequest 中的另一个方法...

JSON(data) 使用 iSCJSON.Decode(data) 解码数据...

json.loads(data) 应该将其作为字典吐出，但它却给了我以下错误：

```
AttributeError: 'NoneType' object has no attribute 'loads' 
```

每个类都在不同的模块中：

```
Assignments - imports:
  ClientRequest - imports:
    iSCJSON. 
```

我只是通过从作业中调用 iSCJSON.Decode(json_data) 来尝试过这个，它工作得很好。我已经检查以确保 json_data 一直向下钻取后实际上具有内容，并且确实如此。

但由于某种原因，我仍然收到错误消息。

有任何想法吗？

课程：

**作业**

```
import sys
sys.path.insert(1,'/Library/Server/Web/Data/Sites/iconnect/')

import web

if 'iSCModules.mod_ClientRequest' in sys.modules:  
    del(sys.modules["iSCModules.mod_ClientRequest"])

if 'iSCModules.mod_ServerResponse' in sys.modules:  
    del(sys.modules["iSCModules.mod_ServerResponse"])

from iSCModules.mod_ClientRequest import ClientRequest
from iSCModules.mod_ServerResponse import ServerResponse
#from iSCModules.mod_iSCJSON import iSCJSON

class Assignments:
    def GET(self):
        sentData = web.data()
        #query = iSCJSON.Decode(sentData)
        print "Sent Data is: " + sentData
        query = ClientRequest.Receive(sentData, 'JSON')
        # \/ Replace With Code \/
        print "Query from Assignments is: " + query
        data = query 
        # /\ Replace with Code /\
        return ServerResponse.Send(data, 'JSON') 
```

**客户请求**

```
import sys
sys.path.insert(1,'/Library/Server/Web/Data/Sites/iconnect/')

import web

#if 'iSCModules.mod_iSCJSON' in sys.modules:  
#    del(sys.modules["iSCModules.mod_iSCJSON"])

from mod_iSCJSON import iSCJSON

class ClientRequest:
    @staticmethod
    def Receive(data, method):
        #sentData = web.data() #Need to figure out why this doesn't work...
        # Remove method from parameters, Set method using logic to determine format of data sent from client. 
        query = getattr(ClientRequest, method)(data)
        if (query):
            print "Query from ClientRequest is: " + query
            return query

    @staticmethod
    def JSON(data):
        decodedData = iSCJSON.Decode(data)
        if (decodedData):
            return decodedData 
```

**iSCJSON**

```
import sys
sys.path.insert(1,'/Library/Server/Web/Data/Sites/iconnect/')

import json

class iSCJSON:
    @staticmethod
    def Encode(json_string, compact=False):
        if (compact):
            result = json.dumps(json_string,separators=(',',':'))
        else:
            result = json.dumps(json_string)
        if ( result ):
            return result

    @staticmethod
    def Decode(json_data, encoding=''):
        print "JSON Data is: " + json_data
        result = json.loads(json_data)
        print "Result of iSCJSON is: " + result
        if ( result ):
            return result 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T23:04:17.127

所以，我想出了一种方法来解决这个问题，将两个类组合成一个模块并减少方法的数量。我已经将 ClientRequest 和另一个类 ServerResponse 合并到一个名为 Server 的类中，这个类只用 Send 和 Receive 这两个方法来执行两者的功能。然后这两种方法决定调用哪个类：iSCJSON 或 iSCXML 来进行编码和解码。所以，我用更少的代码解决了这个问题而没有真正解决它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T14:40:35.173

错误消息暗示`json is None`. 也许您使用`json`作为变量名，隐藏同名模块？

# php - 来自 URL 的 ID 变量

> ID：14574537
> 
> 赞同：1
> 
> 时间：2013-01-29T02:07:38.857
> 
> 标签：php, url

好的，所以当有人在 URL 中输入这个时`mywebsite.com/?s1=affiliateid`

我想`affiliateid`从 URL 中删除部分。每个会员都会在地址中输入不同的用户名。

然后我想创建一个链接，将`differentwebsite.com/?id=affiliateid`基于输入到地址栏中的用户名指向。

现在到目前为止，我知道我必须拥有这样的东西才能获得会员 ID

```
$aff_id = $_GET['s1']; 
```

然后我可以使用该变量来创建链接或将其重定向到下一页

```
differentwebsite.com/?id=$aff_id 
```

我的问题是，我应该把这段代码放在哪里？`$aff_id = $_GET['s1'];`

我是否必须制作一个名为`?s1.php`或什么的页面？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T02:14:20.383

假设`s1`没有在其他任何地方使用，只是为了创建一个链接：

```
<?php
  $s1 = isset($_GET['s1']) && !empty($_GET['s1'])
      ? $_GET['s1'] // it's populated, use the passed value
      : '';         // default value in case it's not present

  //
  // Maybe check $s1 is indeed valid
  //

  $newurl = sprintf('http://differentwebsite.com/?id=%s', urlencode($_GET['s1']));
?> 
```

然后您可以在页面的某处输出该链接，例如：

```
<a href="<?= $newurl; ?>">New Url Here</a> 
```

[`urlencode`](http://php.net/manual/de/function.urlencode.php)将确保如果`s1`有像`&`, `=`, `?`, `/`（或其他）这样的字符，它不会破坏 url 的完整性。

如果您想要简洁的方法：

```
<a href="http://differentwebsite.com/?id=<?= urlencode($_GET['s1']); ?>">
  New Url Here
</a> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T02:10:40.710

将您从 mywebsite.com 获得的 $aff_id 附加到新网站的 url。据推测，$newurl = "differentwebsite.com/?id=".$aff_id.

编辑：

> 我必须制作一个名为 ?s1.php 的页面吗？

您需要创建一个用户在点击 url 时将登陆的页面：www.mywebsite.com/

我假设您正在运行一个可以处理 PHP 代码的 Web 服务器。代码可以进入服务器文档根目录中名为 index.php 的文件。如果您不知道这是什么，我建议您搜索特定服务器的“操作方法”指南。

从 url 中获取“s1”的值并将其存储在 $aff_id 中：

```
$aff_id = $_GET['s1']; 
```

如果您想将此变量传递到另一个接受“id”参数的网站，那么您只需将 $aff_id 附加到新的 Web URL 并将用户重定向到那里。

将用户重定向到 differentwebsite.com 并将 $aff_id 从 mywebsite.com 发送到另一个 URL：

```
header('Location: http://www.differentwebsite.com/?id='.$aff_id); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-29T02:11:41.730

您可以在任何地方`$aff_id = $_GET['s1']`放置您想要使用`$aff_id`的 . 我倾向于把类似的东西放在页面的顶部。

或者，简单地说。`"differentwebsite.com/?id=$_GET['id']"`

我建议您在尝试使用之前检查一下 URL 中是否存在 id 参数。甚至可以确保它是您期望的数据类型，整数、字符串等。因此，当您重定向用户时，您不会以损坏的方式将它们发送到其他地方。

如果您没有将其用于 SQL，则不会发生 SQL 注入 @BlackHatShadow。

# android - 聚焦时，ListView 中的 EditText 被键盘隐藏

> ID：14574546
> 
> 赞同：10
> 
> 时间：2013-01-29T02:09:02.943
> 
> 标签：android, listview, focus, android-edittext

我有一个 ListView，其中包含带有 EditText 的行。

当我单击 EditText 并且它尚未获得焦点时，它会获得焦点，键盘会出现并且 EditText 移动到 CandidateView 上方（所需的行为）。

但是，当我按下按键时，EditText 保持焦点并接收输入，但向下移动并被键盘遮挡（之前的移动相反）。

当我在没有显示键盘的情况下已经选择 EditText 时单击它，键盘会弹出，但 EditText 没有移动到正确的位置（CandidateView 上方）。它仍然接收输入。

我添加了一个包含 EditText 的标题视图，并且一切正常。

这是创建行视图的 ArrayAdapter 的代码：

```
View view = inflater.inflate(R.layout.row_profile_entry_text, null);

final String question = getItem(position);

TextView textViewQuestion = (TextView) view.findViewById(R.id.rpeq_TextViewQuestion);
textViewQuestion.setText(question);

final EditText editTextAnswer = (EditText) view.findViewById(R.id.rpeq_EditTextAnswer);

editTextAnswer.addTextChangedListener(new TextWatcher() {
    @Override
    public void onTextChanged(CharSequence s, int start, int before, int count) {
    }

    @Override
    public void beforeTextChanged(CharSequence s, int start, int count,
            int after) {
    }

    @Override
    public void afterTextChanged(Editable s) {
        mAnswers.put(question, s.toString());
    }
});

if (mAnswers.containsKey(question)) {
    editTextAnswer.setText(mAnswers.get(question));
}

return view; 
```

我还想强调一下，正如其他问题的大多数答案所暗示的那样，我已经添加
`android:windowSoftInputMode="adjustPan"`到 Manifest 和ListView 中。
`android:descendantFocusability="beforeDescendants"`

没有`adjustPan`EditText 根本无法获得焦点，但它并不能完全解决问题。

有人知道我做错了什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T05:56:18.393

尝试这个：

```
<activity name="YourActivity"
    android:windowSoftInputMode="stateVisible|adjustResize|adjustPan">
</activity> 
```

在清单文件中。

如果`adjustResize`您使用的是`ScrollView`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-02T22:24:13.153

在这个问题上花费了很多小时后，这是我的解决方案（适用于 Android < 4.2）：

1) 清单 => android:windowSoftInputMode="adjustPan"

2) Activity=> 创建 OnTouchListner 并传递给 Adapter

```
 private OnTouchListener exampleOnTouchListener = new OnTouchListener() {

    @SuppressLint("ClickableViewAccessibility")
    @Override
    public boolean onTouch(View v, MotionEvent event) {
        if (MotionEvent.ACTION_UP == event.getAction()) {
            int position = (Integer) v.getTag();
            myListView.setSelection(position);
        }
        return false;
    }
    }; 
```

3) 适配器

```
 if (exampleOnTouchListener!= null) {
        myEditText.setTag(position);
        myEditText.setOnTouchListener(exampleOnTouchListener);

        // if last element set padding bottom for spacing
        if (position == items.size() - 1) {
            LinearLayout myLinearLayout = (LinearLayout) convertView
                    .findViewById(R.id.ticketcontolProposedRealvalueLinearLayout);
            myLinearLayout.setPadding(0, 0, 0,SET_PADDING_BOTTOM);
        }
        } 
```

# ios - xcode 上的 chartboost 集成错误

> ID：14574547
> 
> 赞同：2
> 
> 时间：2013-01-29T02:09:03.140
> 
> 标签：ios, xcode, chartboost

我尝试使用以下代码在 xcode 中将 chartboost 集成到我的应用程序中：

```
Chartboost *cb = [Chartboost sharedChartboost];

cb.appId = @"Y51071e9d17ba47414f000000";
cb.appSignature = @"51071e9d17ba47414f000000";

// Begin a user session
[cb startSession];

// Show an interstitial
[cb showInterstitial]; 
```

在`applicationDidBecomeActive`.

但我得到这个错误：

> 架构 i386 的未定义符号：“_OBJC_CLASS_$_Chartboost”，引用自：AppDelegate.o ld 中的 objc-class-ref：未找到架构 i386 的符号 clang：错误：链接器命令失败，退出代码为 1（使用 -v查看调用）

我做错了什么，我该怎么办？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T08:38:58.803

是的，你明白了，确保 chartboost 库已添加到你的项目中，并且所有框架都已链接。

如果您遇到更多问题，请查看此处的示例项目：[https ://github.com/ChartBoost/client-examples](https://github.com/ChartBoost/client-examples)

# python - virtualenv 未访问内部 pypi 服务器

> ID：14574548
> 
> 赞同：0
> 
> 时间：2013-01-29T02:09:13.207
> 
> 标签：python, virtualenv

我正在尝试使用 virtualenv 进行测试。不幸的是，我碰到了一堵墙，

当我尝试从内部 pypi 服务器 pip 安装我的应用程序时，它失败了。我认为这是因为 virtualenv 使用的是自己的 pip 而不是全局的。

我怎样才能让它使用全局点子？

这就是我正在做的事情：

```
virtualenv ENV
source ENV/bin/activate
pip install django  <---- this works
pip install django-tyrell  <---- this cant be found 
```

这是输出

```
[localhost] run: pip install django-tyrell
[localhost] out: Downloading/unpacking django-tyrell
[localhost] out:   Could not find any downloads that satisfy the requirement django-tyrell
[localhost] out: No distributions at all found for django-tyrell
[localhost] out: Storing complete log in /tmp/tmpGLJUzf
[localhost] out: 

Fatal error: run() received nonzero return code 1 while executing!

Requested: pip install django-tyrell
Executed: /bin/bash -l -c "cd fabrics && source ENV/bin/activate && pip install django-tyrell" 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T02:12:59.780

想到的一种解决方案是使用完整路径运行 pip ，例如：

```
> /usr/bin/pip install django-tyrell 
```

示例假设您的全局`pip`位于`/usr/bin`.

要在评论中添加您的第二个问题 - 不，您不能避免`pip`安装`virtualenv`：

```
def create_environment(home_dir, site_packages=False, clear=False,
                       unzip_setuptools=False, use_distribute=False,
                       prompt=None, search_dirs=None, never_download=False):
    """
    Creates a new environment in ``home_dir``.

    If ``site_packages`` is true, then the global ``site-packages/``
    directory will be on the path.

    If ``clear`` is true (default False) then the environment will
    first be cleared.
    """
    home_dir, lib_dir, inc_dir, bin_dir = path_locations(home_dir)

    py_executable = os.path.abspath(install_python(
        home_dir, lib_dir, inc_dir, bin_dir,
        site_packages=site_packages, clear=clear))

    install_distutils(home_dir)

    if use_distribute:
        install_distribute(py_executable, unzip=unzip_setuptools,
                           search_dirs=search_dirs, never_download=never_download)
    else:
        install_setuptools(py_executable, unzip=unzip_setuptools,
                           search_dirs=search_dirs, never_download=never_download)

    install_pip(py_executable, search_dirs=search_dirs, never_download=never_download)

    install_activate(home_dir, bin_dir, prompt) 
```

从你所看到的，`install_pip()`被称为不管。

# javascript - Powershell 使用模态对话框自动进行网站测试

> ID：14574555
> 
> 赞同：0
> 
> 时间：2013-01-29T02:10:16.080
> 
> 标签：javascript, internet-explorer, powershell, showmodaldialog

使用快速 Powershell 脚本使用 IE 对象输入值并提交带有模式对话框的网页。我希望能够调用模态对话框，选中对话框上的一些框，然后将其关闭并返回页面。我可以调用模态对话框，但在调用对话框的行之后没有执行任何操作，直到它关闭。

电源外壳

```
$ie = new-object -com "InternetExplorer.Application"
$ie.visible = $true

$ie.navigate($url); do {sleep 1} until (-not ($ie.Busy)) 

$doc = $ie.Document
$books = $doc.getElementById(“searchBooks”).click(); 
```

Javascript

```
var ret = window.showModalDialog('selectBooks.aspx, books, ...); 
```

我需要一种在对话框上下文中调用命令的方法。尝试在后台运行并创建运行空间，但两种解决方案都没有乐趣

```
& {$books = $doc.getElementById(“searchBooks”).click();} 
```

（阻塞）

```
$rs = [Management.Automation.Runspaces.RunspaceFactory]::CreateRunspace()
$rs.Open()

$rs.SessionStateProxy.SetVariable("doc", $doc)
$p = $rs.CreatePipeline( { $books = $doc.getElementById(“searchBooks”).click(); } )
$p.Input.Close()
$p.InvokeAsync() 
```

（不阻塞，但我没有对话框元素的句柄）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T06:15:04.470

*这是模态*对话框的预期行为。如果您想与对话进行交互，也许这[`showModelessDialog()`](http://msdn.microsoft.com/en-us/library/ms536761%28v=VS.85%29.aspx)就是您想要的。

# .net - 如何访问对我的服务的请求的原始 xml 文本？

> ID：14574564
> 
> 赞同：1
> 
> 时间：2013-01-29T02:11:20.690
> 
> 标签：.net, wcf

我有一堆很棒的工作代码，可以访问各种 REST（有时是 SOAP）api。它都是基于 .NET 4.0 的 WCF。

但有时我访问的系统会返回错误的 xml（啊哈，用字符串构建 xml 的开发人员......坏人！）。

所以 XML 不好，WCF 抛出（应该）... system.invalidoperationexception ... xml 文档中的错误 ... [字符串 FOO 不是有效的布尔值] [或其他一些解析错误] ...

我需要记录 HTTP POST/GET 响应的完整原始 xml（反序列化失败的响应）。出于某种原因，我似乎无法弄清楚在 WCF 的什么地方可以找到这个。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T06:10:40.633

如果您需要访问请求的原始数据，您需要去的地方是自定义消息编码器。您可以做的是创建自己的编码器（可能包装现有的编码器），然后您将获得来自传输层的原始字节。[您可以在http://blogs.msdn.com/b/carlosfigueira/archive/2011/11/09/wcf-extensibility-message-encoders.aspx](http://blogs.msdn.com/b/carlosfigueira/archive/2011/11/09/wcf-extensibility-message-encoders.aspx)找到有关自定义编码器的更多信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T06:24:54.520

启用跟踪并查看哪里有问题。有一个不错的应用 AppFabric，您可以在其中轻松更改您的 tacing 设置并查看异常消息。请参阅[http://msdn.microsoft.com/en-us/library/ms751526.aspx](http://msdn.microsoft.com/en-us/library/ms751526.aspx)

# ios - NSXMLParser 由于 NSUnknownKeyException 而终止

> ID：14574569
> 
> 赞同：0
> 
> 时间：2013-01-29T02:11:49.467
> 
> 标签：ios, objective-c, xml, xcode, nsxmlparser

我在将 XML 文档解析到我的项目时遇到问题。我收到以下错误：

> 由于未捕获的异常“NSUnknownKeyException”而终止应用程序，原因：“[setValue:forUndefinedKey:]：此类不符合键变形的键值编码。”

这是我的 XML 文档的片段：

```
<?xml version="1.0" encoding="utf-8"?>
<CAS version="2.1" avatar="anna">
  <frames count="111" signCount="3">

<signStart index="0" gloss="mug" />

<frame index="0" isComplete="true" time="0" duration="20" boneCount="74"
    morphCount="51">
  <morph name="aaa" amount="0" />
  <morph name="ooo" amount="0" />
  <morph name="pout" amount="0" />
  <morph name="eee" amount="0" />
  <morph name="cgng" amount="0" /> 
```

这是我的 XMLParser.h 文件中的代码：

```
#import <Foundation/Foundation.h>

@class User;

@interface XMLParser : NSObject {
// an ad hoc string to hold element value
NSMutableString *currentElementValue;
// user object
User *user;
// array of user objects
NSMutableArray *times;
NSMutableArray *durations;
NSMutableArray *wheres;
}

@property (nonatomic, retain) User *user;
@property (nonatomic, retain) NSMutableArray *times;
@property (nonatomic, retain) NSMutableArray *durations;
@property (nonatomic, retain) NSMutableArray *wheres;

- (XMLParser *) initXMLParser;

@end 
```

和 XMLParser.m

```
#import "XMLParser.h"
#import "User.h"

@implementation XMLParser
@synthesize user, times, durations, wheres;

- (XMLParser *) initXMLParser {
self = [super init];

if(self){
    // init array of user objects
    times       = [[NSMutableArray alloc] init];
    durations   = [[NSMutableArray alloc] init];
//  wheres = [[NSMutableArray alloc] init];
}

return self;
}

- (void)parser:(NSXMLParser *)parser
didStartElement:(NSString *)elementName
  namespaceURI:(NSString *)namespaceURI
 qualifiedName:(NSString *)qualifiedName
    attributes:(NSDictionary *)attributeDict {

if(![elementName isEqual:@"frame"])
    return;
    NSLog(@"user element found – create a new instance of User class...");
    user = [[User alloc] init];

    //We do not have any attributes in the user elements, but if
    // you do, you can extract them here:
    NSString *time  = [attributeDict objectForKey:@"time"];
    NSString *duration = [attributeDict objectForKey:@"duration"];
    //NSString *where = [attributeDict objectForKey:@"where"];

    [times  addObject:time];
    [durations addObject:duration];
//      [wheres addObject:where];
}

- (void)parser:(NSXMLParser *)parser foundCharacters:(NSString *)string {
if (!currentElementValue) {
    // init the ad hoc string with the value
    currentElementValue = [[NSMutableString alloc] initWithString:string];
} else {
    // append value to the ad hoc string
    [currentElementValue appendString:string];
}
NSLog(@"Processing value for : %@", string);
}  

- (void)parser:(NSXMLParser *)parser
 didEndElement:(NSString *)elementName
  namespaceURI:(NSString *)namespaceURI
 qualifiedName:(NSString *)qName {

if ([elementName isEqualToString:@"CAS"]) {
    // We reached the end of the XML document
    NSLog(@"names array: %@", times);
    NSLog(@"prices array: %@", durations);
//        NSLog(@"wheres array: %@", wheres);

    return;
}

if ([elementName isEqualToString:@"frame"]) {
    // We are done with user entry – add the parsed user
    // object to our user array
    //[users addObject:user];
    //user = nil;
} else {
    // The parser hit one of the element values.
    // This syntax is possible because User object
    // property names match the XML user element names
    [user setValue:currentElementValue forKey:elementName];
}    
currentElementValue = nil;
} 
```

我认为它与我的 xml 文件有关，但不是 100% 的确切问题。

任何帮助将非常感激。

干杯，山姆

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T12:06:05.703

我发现问题是由于这行代码造成的：

```
[user setValue:currentElementValue forKey:elementName]; 
```

我暂时将它从我的代码中删除，直到我明白它为什么会让程序抛出异常

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T02:23:38.957

副手看起来你的用户对象实际上并没有一个名为“变形”的属性。仔细检查你的拼写是否正确，它实际上是运行时正确的类。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-29T02:23:55.673

您的用户类是否为键“变形”实现 KVO？

[您的 User 类需要被视为 KVC](http://developer.apple.com/library/ios/#documentation/cocoa/conceptual/KeyValueCoding/Articles/Compliant.html#//apple_ref/doc/uid/20002172)

你能发布你的用户类的接口和实现吗？那会很方便。

[更多关于实施 KVO](http://developer.apple.com/library/ios/#documentation/cocoa/conceptual/KeyValueObserving/Articles/KVOCompliance.html)

# css - 制作链接类

> ID：14574570
> 
> 赞同：0
> 
> 时间：2013-01-29T02:12:05.800
> 
> 标签：css, class, hyperlink

我已经制作了一个我想用样式链接制作的网站。我不想为所有链接设置通用样式。我想为他们开设不同的课程。

我已经尝试在测试仪页面上执行此操作，但无法使其正常工作。这是代码：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"     "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<title>Untitled Document</title>
<style type="text/css">
test: link {
    font-family: "Trebuchet MS", Arial, Helvetica, sans-serif;
    font-size: 1em;
    color: #C00;
}
test: hover {
    font-family: "Trebuchet MS", Arial, Helvetica, sans-serif;
    font-size: 1em;
    color: #6F0;
}
test: active {
    font-family: "Trebuchet MS", Arial, Helvetica, sans-serif;
    font-size: 1em;
    color: #90F;
}
test: visited {
    font-family: "Trebuchet MS", Arial, Helvetica, sans-serif;
    font-size: 1em;
    color: #FF0;
}
.test {
    font-family: "Trebuchet MS", Arial, Helvetica, sans-serif;
    font-size: 1em;
    line-height: 1em;
    color: #999;
}
</style>
</head>

<body>
Emily

<p>sdlkfjsldkfjsldkfjsldkfjsldkfjsldkfjsldkfjsldkfjsldkfjsldkfjsldkfjsldkfjsldkfjsldkfjlsdkf
sdlkfjsldkfjsldkfjsldkfjsldkfjsldkfjsldkfjsldkfjsldkfjsldkfjsldkfjsldkfjsldkfjsldkfjlsdkf
sdlkfjsldkfjsldkfjsldkfjsldkfjsldkfjsldkfjsldkfjsldkfjsldkfjsldkfjsldkfjsldkfjsldkfjlsdkf
sdlkfjsldkfjsldkfjsldkfjsldkfjsldkfjsldkfjsldkfjsldkfjsldkfjsldkfjsldkfjsldkfjsldkfjlsdkf

  <span class="test"><a href="http://www.ehow.com/how_2080242_style-link-css.html">rose</a> 

  <a href="http://www.ehow.com/how_2080242_style-link-css.html"> daisy</a> 

  <a href="http://www.ehow.com/how_2080242_style-link-css.html">tulip</a> 

  <a href="http://www.ehow.com/how_2080242_style-link-css.html"> cactus</a> </span>
<p>ldkfjsldkfjlsdkfsdlkfjsldkfjsldkfjsldkfjsldkfjsldkfjsldkfjsldkfjsldkfjsldkfjsldkfjsldkfjs    ldkfjsldkfjlsdkfsdlkfjsldkfjsldkfjsldkfjsldkfjsldkfjsldkfjsldkfjsldkfjsldkfjsldkfjsld

</body>
</html> 
```

有人可以告诉我我做错了什么。谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-29T02:17:57.187

这里很少出错。测试是一个类，这意味着它前面需要一个句点 - `.test`。其次，链接在测试范围内。因此，您应该必须`.test a`在测试跨度中指出一个链接。最后，您需要将链接标签放在`a`分号之前。没有空间。

[http://jsfiddle.net/vPBCB/](http://jsfiddle.net/vPBCB/)

```
.test a:link {
    font-family:"Trebuchet MS", Arial, Helvetica, sans-serif;
    font-size: 1em;
    color: #C00;
} 
```

# .net - 附加到正在运行的 Windows 进程

> ID：14574575
> 
> 赞同：0
> 
> 时间：2013-01-29T02:12:34.087
> 
> 标签：.net, windows, multithreading, profiling, internals

请在下面说明：

1) 附加到正在运行的本机 Windows 应用程序进程、获取线程列表并查看使用了哪些 DDL 的最简单方法是什么？

2) 附加到正在运行的 .NET 应用程序进程、获取线程列表并查看使用了哪些 DDL 的最简单方法是什么？

问候，罗恩

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T05:59:24.680

您可以使用[工具帮助库](http://msdn.microsoft.com/en-us/library/windows/desktop/ms686837(v=vs.85).aspx)，它可以让您更轻松地获取有关当前正在执行的应用程序的信息。

*   [线程行走](http://msdn.microsoft.com/en-us/library/windows/desktop/ms686780(v=vs.85).aspx)
*   [模块行走](http://msdn.microsoft.com/en-us/library/windows/desktop/ms684236(v=vs.85).aspx)

.Net[示例](http://www.pinvoke.net/default.aspx/kernel32/CreateToolhelp32Snapshot.html)或[搜索](https://stackoverflow.com/search?q=CreateToolhelp32Snapshot++%5B.net%5D)以查找更多信息。

* * *

[System.Diagnostics](http://msdn.microsoft.com/en-us/library/15t15zda.aspx)命名空间提供允许您与系统进程、事件日志和性能计数器交互的类。

*   [ProcessThreadCollection](http://msdn.microsoft.com/en-us/library/system.diagnostics.processthreadcollection.aspx)类提供了 ProcessThread 对象的强类型集合。
*   [ProcessModuleCollection](http://msdn.microsoft.com/en-us/library/system.diagnostics.processmodulecollection.aspx)类提供 ProcessModule 对象的强类型集合。

[搜索](https://stackoverflow.com/search?q=System.Diagnostics++%5B.net%5D)以找到更多

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T03:02:38.207

你使用 Visual Studio 吗？如果是这样，您可以使用 Debug | 将 VS 附加到任何正在运行的进程。附加到进程菜单项。然后，您可以进入进程并开始检查堆栈、线程、模块等。

如果您想深入研究，可以下载[Windows SDK](http://msdn.microsoft.com/en-us/windows/hardware/hh852363.aspx)并安装调试工具。这将为您提供 KD 和 WinDBG - 分别是控制台调试器和稍微友好的多窗格 MDI 样式调试应用程序。使用这些工具，您可以访问 Windows 中内置的大多数核心调试基础结构。

**但是**，请注意，这**不是**为了装腔作势，需要相当多的时间和精力才能掌握。要真正成为调试大师，您还需要深入了解内核和操作系统的架构以及许多核心操作系统数据结构。

因此，您可能会发现以下书籍很有用：

对于 .NET：

*   [为 .NET 和 Windows 调试应用程序](https://rads.stackoverflow.com/amzn/click/com/0735615365)
*   [CLR 通过 C#](https://rads.stackoverflow.com/amzn/click/com/0735667454)

对于 Windows 和/或 .NET：

*   [Windows 内部知识第 6 版卷。1](https://rads.stackoverflow.com/amzn/click/com/0735648735)
*   [Windows 内部知识第 6 版卷。2](https://rads.stackoverflow.com/amzn/click/com/0735665877)

用于高级 Windows 内部调试

*   [Windows 内部调试](https://rads.stackoverflow.com/amzn/click/com/0735662789)
*   [高级 Windows 调试](https://rads.stackoverflow.com/amzn/click/com/0321374460)

享受！:)

# visual-studio - 在 MSVS2012 中构建没有“自定义工具”的自定义文件

> ID：14574578
> 
> 赞同：0
> 
> 时间：2013-01-29T02:12:45.147
> 
> 标签：visual-studio, msbuild, visual-studio-2012, build-process

我喜欢做的是编译一个自定义文件来生成一个 C# 文件。我只需要在它被更改时编译它，但每次编译都可以。

当我环顾四周时，我一直在寻找对自定义工具的参考，并发现这篇[相当不错的文章](http://mnaoumov.wordpress.com/2012/09/26/developing-custom-tool-aka-single-file-generators-for-visual-studio-2012/)。我记得 2010 年之前我能够有一个扩展的构建规则，但它看起来不再存在了？它允许我指定扩展名和 bin+args 以在文件更改时运行。最接近的东西是什么？看起来它不再受支持，这正是我想要的

自定义工具需要我搞乱注册表，创建一个 dll 并需要 VS SDK。对于我过去轻松完成的事情，它的方式有点矫枉过正。

我如何让视觉工作室运行我的 exe 来构建自定义扩展源文件，而不会像上面的自定义工具那样过度杀伤？必须适用于 C# 项目，C++ 项目会很好但不是必需的。

# java - 打包为 jar 时，Java 反射性能下降

> ID：14574580
> 
> 赞同：7
> 
> 时间：2013-01-29T02:12:53.367
> 
> 标签：java, performance, class, reflection, jar

我这里真是让人头疼。我尝试了一切，到处搜索。它来自我继承的那个测试 JAR 的应用程序。

（它由一个 GUI 前端和一个执行实际检查的命令行应用程序组成。GUI 通过在其自身上启动一个新的 JVM [java -cp "itself.jar" com.different.mainClass] 来运行命令行应用程序。这是一个糟糕的设计，我知道，但可能是相关的。）

无论如何，这个程序包含一些嵌套在两个 for 循环中的反射调用。问题是当应用程序被 JARed 起来时，第一次反射调用每次迭代都需要一秒钟。但是当它从类中运行时，它需要几毫秒。

实际上，这意味着这个命令：

```
java -jar myjar.jar 
```

需要几个小时。

这个命令：

```
java -cp "...[bunch of jars];myjar.jar" com.myclasses.main 
```

需要几分钟。

被测试的 JAR 始终是一个 jar。不同之处仅在于测试应用程序。

非常感谢任何想法或追求的途径。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T07:00:46.023

[您可以考虑在诸如 Eclipse TPTP](http://www.eclipse.org/tptp/)或[YourKit](http://www.yourkit.com)之类的分析器下运行您的程序，并更准确地确定您的时间都花在了哪里。这很可能会指向您的代码中的错误，或者不太可能指向库中的错误。然后，如果您仍然无法弄清楚，请在此处发布相关代码，我们可以提供帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T13:28:22.010

正如其他人所提到的，您确实需要分析代码以查看它在哪里花费时间。

如果我不得不猜测，我会怀疑反射工作会导致重复查找类加载器，并且从 jar 文件中提取类时加载它的速度较慢。

但同样，这只是一种预感。您需要对其进行概要分析才能确定。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-29T03:06:42.853

我不知道这是否与您的问题有关，但是此命令中的“-cp”参数将被忽略：

```
$ java -cp "...[bunch of jars]" -jar myjar.jar 
```

“-cp”和“-jar”命令选项不能一起使用。可执行 JAR 文件从 JAR 清单中获取其类路径。

我不明白这如何解释您所看到的症状……但这确实意味着您尝试对可执行 JAR 执行的操作将不起作用，这可能会使您的问题变得毫无意义。

* * *

**跟进**

鉴于这只是问题中的一个错误......不是真正的问题......

我的建议是您使用第二种形式的 java 命令运行测试；即带有`-cp`选项和类路径。很难看出它会对您的测试制度的有效性产生什么影响。

我怀疑确定性能问题的根本原因需要详细检查测试器应用程序正在做什么。

# php - 用户 IP 更改时出现内部服务器错误（可能与 PHP 会话文件锁定有关）

> ID：14574583
> 
> 赞同：0
> 
> 时间：2013-01-29T02:13:24.643
> 
> 标签：php, session, timeout, internal-server-error

我有一个用 PHP 编写的网站。其中一位用户在一栋大楼中，他们有两个互联网连接，两个 ISP，但只有一个网络。因此，网络上的任何计算机都可以通过任一 Web 连接进行连接，并且似乎切换有时会发生在请求中间。有时这会导致我的脚本出现内部服务器错误。可悲的是，我共享主机上的日志似乎没有很多细节。

所以，这是我的猜测。我的脚本使用会话。用户使用 Internet 连接 1 发送请求，这将锁定会话文件。在处理该请求时，互联网连接 1 被关闭，互联网连接 2 被打开。Apache/PHP 不断尝试将响应发送回 Internet 连接 1（不再存在）。用户尝试通过 Internet 连接重新加载页面 2\. PHP 等待初始脚本退出并解锁会话文件，但它永远不会这样做，因此它最终因内部服务器错误而死。

那么，我该如何解决呢？如果自上次锁定以来已经过去了太多时间，有没有办法强制解锁会话文件？（没有脚本的执行时间超过 3 秒，因此如果锁定时间超过 15 秒，这意味着旧脚本正在等待将文件提供给错误的 IP 地址并且可能会被终止。 ） 谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T15:53:04.000

我想我解决了这个问题。所以，据我所知，问题是服务器没有解锁会话文件，如果请求已启动，但由于时髦的互联网连接而失败。因此，用户发送请求，调用 session_start() 并锁定会话文件，服务器开始向客户端发送响应，但客户端半消失。客户端通过新的 IP 地址发送一个新请求，调用 session_start() ，但必须等待会话文件被解锁，所以只是等待和等待，最终超时。但是，我为我的网站解决了这个问题。所以，这是我的网站的工作方式： 1\. 服务器获取请求。2\. 服务器处理请求并将用户信息存储在各种变量中，而不是随用随回的方法。3.然后我包含template.php，并且我保存的各种变量显示在正确的位置。因此，我的代码流首先进行所有处理，然后在处理完成后进行所有用户回显。因此，在 template.php 文件的开头，我现在包含了一个“session_write_close();”。在将响应发送给用户之前手动释放会话文件，而不是等到脚本结束。因此，如果用户在传输过程中消失，会话文件被解锁，用户可以发送新的请求，并且不会碰到锁定的会话文件。在将响应发送给用户之前手动释放会话文件，而不是等到脚本结束。因此，如果用户在传输过程中消失，会话文件被解锁，用户可以发送新的请求，并且不会碰到锁定的会话文件。在将响应发送给用户之前手动释放会话文件，而不是等到脚本结束。因此，如果用户在传输过程中消失，会话文件被解锁，用户可以发送新的请求，并且不会碰到锁定的会话文件。

自从我进行了那个修复，我没有再听到任何抱怨。（附带说明，用户确实对其他网站有问题，但我希望我的网站以最佳方式对低于标准的互联网连接做出反应。）

# sql - wm_concat 为 select 语句返回多个相同的

> ID：14574584
> 
> 赞同：1
> 
> 时间：2013-01-29T02:13:27.547
> 
> 标签：sql, oracle

我有这个选择语句：

```
select m.title, m.category_code, c.company_name, wm_concat(d.director_name),    
wm_concat(a.actor_name) as actors
from
actors a
inner join actor_in_movies aim
on aim.actor_id = a.actor_id
inner join movies m
on m.movie_id = aim.movie_id
inner join movie_directors md
on md.movie_id = m.movie_id
inner join directors d
on d.director_id = md.director_id
inner join companies c
on c.company_id = d.company_id
group by m.title, m.category_code, c.company_name; 
```

它为每个演员返回相同的导演姓名一次……有什么办法可以解决这种情况吗？

也试过这个：

```
select m.title, cat.description, c.company_name, wm_concat(d.director_name),      
wm_concat(a.actor_name) as actors
from
movie_categories cat
inner join movies m 
on m.category_code = cat.category_code
inner join movie_directors md
on md.movie_id = m.movie_id
inner join directors d
on d.director_id = md.director_id
inner join companies c
on c.company_id = d.company_id
inner join actor_in_movies aim
on aim.movie_id = m.movie_id
inner join actors a 
on a.actor_id = aim.actor_id
group by m.title, cat.description, c.company_name; 
```

结果相同

编辑：猜猜我只是需要多想，用不同的，明白了！

```
select m.title, cat.description, c.company_name, wm_concat(distinct      
d.director_name),      
wm_concat(a.actor_name) as actors
from
movie_categories cat
inner join movies m 
on m.category_code = cat.category_code
inner join movie_directors md
on md.movie_id = m.movie_id
inner join directors d
on d.director_id = md.director_id
inner join companies c
on c.company_id = d.company_id
inner join actor_in_movies aim
on aim.movie_id = m.movie_id
inner join actors a 
on a.actor_id = aim.actor_id
group by m.title, cat.description, c.company_name; 
```

# java - 将 JList 值从 JFrame 传递到 JDialog

> ID：14574586
> 
> 赞同：1
> 
> 时间：2013-01-29T02:13:39.450
> 
> 标签：java, swing, jframe, jdialog

我目前正在构建一个应用程序，它有一个`JFrame`和一个`JDialog`. 有`JFrame`一个`JList`叫：

`JList lstMainVenuesEvents = new JList();`

我正在尝试使用以下方法获取 lstMainVenuesEvents 的值：

`lstMainVenuesEvents.getSelectedIndex();`

我可以在 my 上获得完美的值`JFrame`，但是如何将其传递给 my `JDialog`？我想过在我的一个类文件中创建一个 setter 方法，然后从我的`JDialog`文件中获取该值，但肯定有一种简单的方法吗？是否有可能只有某种方法可以将数据从POST 传递`JFrame`到`JDialog`PHP 中的 POST 请求？

抱歉，如果我错过了任何重要的内容。

更新：这是我的 JList 和 JDialog 节目的代码。

```
JList lstMainVenuesEvents = new JList();
    lstMainVenuesEvents
            .addListSelectionListener(new ListSelectionListener() {
                public void valueChanged(ListSelectionEvent e) {
                    // stop from firing twice
                    if (e.getValueIsAdjusting()) {
                        EventModify evtWindow = new EventModify();
                        evtWindow.setVisible(true);
                    }
                }
            }); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T02:36:23.520

我不能确信它是“正确的”，但控制反转的方法通常会减少传递值。

假设该值`lstMainVenuesEvents.getSelectedIndex()`用于特定操作/事件中，`JDialog`您可以`ActionListener`从`JFrame`.

```
// some where in the JFrame
jDialog.setButtonPressed(new ActionListener() {
    public void actionPerformed(ActionEvent evt)
    {
        // lstMainVenuesEvents.getSelectedIndex() is accessible in this block
        // put code logic here where
    }
}); 
```

# ipython - 如何升级 kernmagic 以修复此 ipython 错误？

> ID：14574587
> 
> 赞同：5
> 
> 时间：2013-01-29T02:13:52.210
> 
> 标签：ipython

我最近升级了我的 Enthought Python 发行版

```
sudo easy_install -U ipython 
```

但是，当我使用命令启动 ipython 时`ipython`，出现错误：

```
David-Faux-MacBook-Air:core davidfaux$ ipython
Python 2.7.2 |EPD 7.2-2 (32-bit)| (default, Sep  7 2011, 09:16:50) 
Type "copyright", "credits" or "license" for more information.

IPython 0.13.1 -- An enhanced Interactive Python.
?         -> Introduction and overview of IPython's features.
%quickref -> Quick reference.
help      -> Python's own help system.
object?   -> Details about 'object', use 'object??' for extra details.
[TerminalIPythonApp] Error in loading extension: kernmagic
Check your config files in /Users/davidfaux/.ipython/profile_default
---------------------------------------------------------------------------
AttributeError                            Traceback (most recent call last)
/Library/Frameworks/Python.framework/Versions/7.2/lib/python2.7/site-packages/ipython-0.13.1-py2.7.egg/IPython/core/extensions.pyc in load_extension(self, module_str)
     90                 __import__(module_str)
     91         mod = sys.modules[module_str]
---> 92         return self._call_load_ipython_extension(mod)
     93 
     94     def unload_extension(self, module_str):

/Library/Frameworks/Python.framework/Versions/7.2/lib/python2.7/site-packages/ipython-0.13.1-py2.7.egg/IPython/core/extensions.pyc in _call_load_ipython_extension(self, mod)
    122     def _call_load_ipython_extension(self, mod):
    123         if hasattr(mod, 'load_ipython_extension'):
--> 124             return mod.load_ipython_extension(self.shell)
    125 
    126     def _call_unload_ipython_extension(self, mod):

/Library/Frameworks/Python.framework/Versions/7.2/lib/python2.7/site-packages/kernmagic/__init__.py in load_ipython_extension(ip)
     28 
     29 def load_ipython_extension(ip):
---> 30     activate(ip)
     31     activate_aliases(ip)

/Library/Frameworks/Python.framework/Versions/7.2/lib/python2.7/site-packages/kernmagic/__init__.py in activate(ip, *args)
     14             continue
     15         magic_name = name[len('magic_'):]
---> 16         ip.shell.define_magic(magic_name, getattr(mymagics, name))
     17 
     18 def activate_aliases(ip, *args):

AttributeError: 'TerminalInteractiveShell' object has no attribute 'shell' 
```

我四处搜索，我发现很多帖子都说在 ipython 配置文件中注释掉这一行。

```
c.TerminalIPythonApp.extensions = ['kernmagic'] 
```

我发现注释掉 ipython 文件很粗略……后来，我发现用 ipython`kernmagic` [解决了这个问题](https://bitbucket.org/robertkern/kernmagic/commits/50acfe7d30b0)。

如何`kernmagic`在我的 ipython 发行版中升级以使此错误消失？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-29T14:32:52.013

这对我有用：

```
hg clone https://bitbucket.org/robertkern/kernmagic
cd kernmagic
python setup.py build
python -c "import setuptools;execfile('setup.py')" bdist_egg
egginst dist/kernmagic-0.0.0-py2.7.egg 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-29T09:45:27.227

您可以在配置文件中注释/删除该行，如果您不使用 kernmagic，则没有问题。实际上 .ipython/profile_xxx 文件夹是为人们改变事物而创建的。

否则，如果您真的想升级kern magic，我建议您卸载，删除文件并从当前源重新安装。

此外，IIRC 的核心魔法问题并非仅与 EPD 一起出现在原始 IPython 中，因此您不必害怕将其从配置文件和系统中删除。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-08-19T21:12:13.823

对于那些没有运行 EPD 的 python 发行版的人（或者如果 Rich 的解决方案不起作用）：

首先，我在 Mac OS X 10.8.4 上运行 Python 2.7.5 |Anaconda 1.6.0 (x86_64)|。

正如马特所说，最简单的方法是简单地注释掉如下所示的行：

```
# A list of dotted module names of IPython extensions to load.
c.TerminalIPythonApp.extensions = ['kernmagic'] 
```

我发现这个：

```
~/.ipython/profile_default/ipython_config.py 
```

它应该位于向下的 1/3 左右。值得指出的是，这是一个临时解决方案——我不知道 kernmagic 是做什么的，也不知道它是否是一个重要的 ipython 扩展。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-09-17T18:55:39.397

我刚刚`kernmagic`为 python3 创建了一个快速而肮脏的端口。在 python-2.x 下出现此问题时，它也可能起作用。

[这是代码的链接](https://github.com/wesesque/kernmagic)。您需要做的就是将整个`kernlab`文件夹放到您的站点包目录中。它似乎是一个纯 python 库，所以它应该可以在任何平台上工作。

祝你好运！

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-08-14T18:34:35.663

Enthought 已经更新了 kernmagic，所以 Enthought`enpkg`在 EPD 7.3 和 ipython 0.13.1 上为我解决了同样的问题：

```
sudo enpkg kernmagic 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-05-15T02:28:59.377

我也遇到了这个问题，我在windows环境下，我发现那行

```
C:\Users\Li\.ipython\profile_default\ipython_config.py 
```

如前所述，最简单的方法是简单地注释掉如下所示的行：

```
# A list of dotted module names of IPython extensions to load.
c.TerminalIPythonApp.extensions = ['kernmagic'] 
```

# magento - magento 如何在谷歌分析中使用修改后的代码进行跟踪

> ID：14574590
> 
> 赞同：1
> 
> 时间：2013-01-29T02:14:09.543
> 
> 标签：magento, google-analytics

我看到很多教程只教在谷歌分析中获取数字并将其放入 magento，但我想更改分析中的默认代码。我的疑问是，只有分析提供的数字足以让 magento 看到我在跟踪代码中的更改，或者我需要像在普通站点中一样放置代码？除了谷歌为开发人员提供的指导方针之外，是否有一本很好的电子商务分析编码手册？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T02:25:14.230

将 Google Analytics 帐号放入 Admin -> System -> Configuration -> Sales -> Google API 就足够了。它将跟踪您的电子商务销售数据（此代码呈现在成功页面 - success.phtml 上）以及将一般跟踪代码放置在整个网站上。

# iphone - 如何从 xcode 显示 xcodebuild 命令行？

> ID：14574591
> 
> 赞同：9
> 
> 时间：2013-01-29T02:14:14.103
> 
> 标签：iphone, ios, xcode, ios-simulator, xcodebuild

我正在尝试从 xcodebuild 构建一个工作模拟器。编译工作，但最终产品在通过 WaxSim 安装时不会在模拟器上运行。如果我通过 Xcode GUI 构建，那么最终产品会从 WaxSim 安装而不会出现问题。

我的问题是，我如何才能看到xcode 用于构建工作模拟器构建的**确切xcodebuild 命令行。**我只需要将它复制到我的 shell 脚本中，但它被证明是难以捉摸的。我在 xcode 的构建日志中做了一个发现，但那里没有提到 xcodebuild。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-29T02:18:45.070

你不能。Xcode 本身不会`xcodebuild`在构建过程中调用。[这篇文章](https://stackoverflow.com/questions/5010062/xcodebuild-simulator-or-device)有更多关于`xcodebuild`为模拟器执行构建的信息。

# ios - iOS - 将我的 CATextLayer 框架添加到 UIScrollView 的问题

> ID：14574592
> 
> 赞同：1
> 
> 时间：2013-01-29T02:14:19.423
> 
> 标签：ios, text, uiscrollview, scroll, catextlayer

我正在尝试将我的 CATextLayer 框架添加到 UIScrollView 以获得一些滚动。我一直在尝试使用此处提到的技术（[如何使我的 CATextLayer 对象像 UITextView 一样可滚动？](https://stackoverflow.com/questions/13473646/how-can-i-make-my-catextlayer-object-scrollable-like-uitextview)）但没有成功。

实际上，由于（建议的）3 行我已添加到我的代码中，我的 CATextLayer 不再显示。

我在下面附上了我的代码并注意到了这 3 行。也许有人可以帮我解决这个问题，甚至提出一个更好的方法来解决这个问题:-)

```
// Create the scrool view (FIRST LINE ADDED)
UIScrollView* scrollLayer = [[UIScrollView alloc] initWithFrame:CGRectMake(0.0, 0.0, 500.0, 500.0)];

// Create the new layer object
boxLayer = [[CATextLayer alloc] init];

// Give it a size
[boxLayer setBounds:CGRectMake(0.0, 0.0, 500.0, 500.0)];

// Give it a location
[boxLayer setPosition:CGPointMake(300.0, 350.0)];

// Make half-transparent red the background color for the layer
UIColor *reddish = [UIColor colorWithRed:0.0 green:0.0 blue:0.0 alpha:0.1];

// Get CGColor object with the same color values
CGColorRef cgReddish = [reddish CGColor];
[boxLayer setBackgroundColor:cgReddish];

// Make it a sublayer on the view's layer
[self.view.layer addSublayer:boxLayer];

// Create string
NSString *text2 = @"The article was about employment.\nHe leafed through it in an instant.\nHis feeling of anxiety resurfaced and he closed the magazine.\n\n-Hm…, he breathed.\n\n-Have you been looking for work long?, asked the stranger at his side.\nThe article was about employment.\nHe leafed through it in an instant.\nHis feeling of anxiety resurfaced and he closed the magazine.\n\n-Hm…, he breathed.\n\n-Have you been looking for work long?, asked the stranger at his side.\nThe article was about employment.\nHe leafed through it in an instant.\nHis feeling of anxiety resurfaced and he closed the magazine.\n\n-Hm…, he breathed.\n\n-Have you been looking for work long?, asked the stranger at his side.";

// Set font type
[boxLayer setFont:@"MarkerFelt-Thin"];

// Set font size
[boxLayer setFontSize:20.0];

// Text is left justified
[boxLayer setAlignmentMode:kCAAlignmentLeft];

// Text is wrapped
boxLayer.wrapped = YES;

// Assign string to layer
[boxLayer setString:text2];

// Define the text size (SECOND LINE ADDED)
scrollLayer.contentSize = CGSizeMake(500, 1000);

// Set the text layer as a sub layer of the scroll view (THIRD LINE ADDED)
[scrollLayer.layer addSublayer:boxLayer]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T03:42:09.927

根据我们对另一个讨论的讨论，我想知道您是否应该添加`CATextLayer`对象。例如，您可以添加`UILabel`对象。`UILabel`例如，让我们在滚动视图中添加一系列对象：

```
- (void)viewDidAppear:(BOOL)animated
{
    [super viewDidAppear:animated];

    if (!self.addedLabels)
    {
        [self addLabelsToScrollView:self.scrollView];
        self.addedLabels = YES;
    }
}

- (void)addLabelsToScrollView:(UIScrollView *)scrollView
{
    NSArray *gettysburgAddress = @[
                                   @"Four score and seven years ago our fathers brought forth on this continent a new nation, conceived in liberty, and dedicated to the proposition that all men are created equal.",
                                   @"Now we are engaged in a great civil war, testing whether that nation, or any nation, so conceived and so dedicated, can long endure. We are met on a great battle-field of that war. We have come to dedicate a portion of that field, as a final resting place for those who here gave their lives that that nation might live. It is altogether fitting and proper that we should do this.",
                                   @"But, in a larger sense, we can not dedicate, we can not consecrate, we can not hallow this ground. The brave men, living and dead, who struggled here, have consecrated it, far above our poor power to add or detract. The world will little note, nor long remember what we say here, but it can never forget what they did here. It is for us the living, rather, to be dedicated here to the unfinished work which they who fought here have thus far so nobly advanced. It is rather for us to be here dedicated to the great task remaining before us—that from these honored dead we take increased devotion to that cause for which they gave the last full measure of devotion—that we here highly resolve that these dead shall not have died in vain—that this nation, under God, shall have a new birth of freedom—and that government of the people, by the people, for the people, shall not perish from the earth."
                                  ];

    CGFloat y = 0.0;
    UIFont *font = [UIFont fontWithName:@"MarkerFelt-Thin" size:20.0];
    CGSize maxSize = CGSizeMake(scrollView.frame.size.width, 10000.0);

    for (NSString *line in gettysburgAddress)
    {
        CGSize labelSize = [line sizeWithFont:font constrainedToSize:maxSize lineBreakMode:NSLineBreakByWordWrapping];
        CGRect labelFrame = CGRectMake(0.0, y, labelSize.width, labelSize.height);
        UILabel *label = [[UILabel alloc] initWithFrame:labelFrame];
        label.font = font;
        label.text = line;
        label.numberOfLines = 0;
        [scrollView addSubview:label];

        y += labelSize.height + 16.0;
    }

    scrollView.contentSize = CGSizeMake(scrollView.contentSize.width, y);
} 
```

甚至更简单，而不是添加`UILabel`对象到 a `UIScrollView`，你可以只使用 a `UITextView`：

```
- (void)updateTextView
{
    NSArray *gettysburgAddress = @[
                                   @"Four score and seven years ago our fathers brought forth on this continent a new nation, conceived in liberty, and dedicated to the proposition that all men are created equal.",
                                   @"Now we are engaged in a great civil war, testing whether that nation, or any nation, so conceived and so dedicated, can long endure. We are met on a great battle-field of that war. We have come to dedicate a portion of that field, as a final resting place for those who here gave their lives that that nation might live. It is altogether fitting and proper that we should do this.",
                                   @"But, in a larger sense, we can not dedicate, we can not consecrate, we can not hallow this ground. The brave men, living and dead, who struggled here, have consecrated it, far above our poor power to add or detract. The world will little note, nor long remember what we say here, but it can never forget what they did here. It is for us the living, rather, to be dedicated here to the unfinished work which they who fought here have thus far so nobly advanced. It is rather for us to be here dedicated to the great task remaining before us—that from these honored dead we take increased devotion to that cause for which they gave the last full measure of devotion—that we here highly resolve that these dead shall not have died in vain—that this nation, under God, shall have a new birth of freedom—and that government of the people, by the people, for the people, shall not perish from the earth."
                                  ];

    NSString *text = [gettysburgAddress componentsJoinedByString:@"\n\n"];

    self.textView.text = text;
    self.textView.font = [UIFont fontWithName:@"MarkerFelt-Thin" size:20.0];
    self.textView.editable = NO;
} 
```

这一切都取决于您是否真的需要使用`CATextLayer`.

# python - 如何选择曲线下的点？

> ID：14574595
> 
> 赞同：0
> 
> 时间：2013-01-29T02:14:33.317
> 
> 标签：python, dataset

我想做的是制作一个高斯函数图。然后在空间中的任意位置选择随机数，例如 y=[0,1]（因为它是标准化的）& x=[0,200]。然后，我希望它忽略曲线上方的所有值，只保留曲线下方的值。

```
 import numpy
   import random
   import math
   import matplotlib.pyplot as plt
   import matplotlib.mlab as mlab
   from math import sqrt
   from numpy import zeros
   from numpy import numarray

   variance = input("Input variance of the star:")
   mean = input("Input mean of the star:")

   x=numpy.linspace(0,200,1000)
   sigma = sqrt(variance)

   z = max(mlab.normpdf(x,mean,sigma))
   foo = (mlab.normpdf(x,mean,sigma))/z
   plt.plot(x,foo)

   zing = random.random()
   random = random.uniform(0,200)

   import random

   def method2(size):
       ret = set()
       while len(ret) < size:
           ret.add((random.random(), random.uniform(0,200)))
       return ret

   size = input("Input number of simulations:")

   foos = set(foo)
   xx = set(x)

   method = method2(size)

   def undercurve(xx,foos,method):
       Upper = numpy.where(foos<(method))
       Lower = numpy.where(foos[Upper]>(method[Upper]))
       return (xx[Upper])[Lower],(foos[Upper])[Lower] 
```

当我尝试打印欠曲线时，出现错误：

```
 TypeError: 'set' object has no attribute '__getitem__' 
```

我不知道如何解决它。

正如你们所看到的，我在 python 和编程方面还是很新的，但是任何帮助都非常感谢，如果有任何问题，我会尽力回答。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-29T02:57:33.227

您看到的错误的直接原因可能是这一行（应该通过完整的回溯来识别——发布它通常很有帮助）：

```
Lower = numpy.where(foos[Upper]>(method[Upper])) 
```

因为名称混淆的变量`method`实际上是 a `set`，由您的函数返回`method2`。实际上，再想一想，`foos`也是 a `set`，所以它可能首先失败了。集合不支持使用类似的索引`the_set[index]`；这就是抱怨的`__getitem__`意思。

我不完全确定您的代码的所有部分都打算做什么；像“foos”这样的变量名并没有真正的帮助。所以这就是我可能会做的你想做的事情：

```
# generate sample points
num_pts = 500
sample_xs = np.random.uniform(0, 200, size=num_pts)
sample_ys = np.random.uniform(0, 1, size=num_pts)

# define distribution
mean = 50
sigma = 10

# figure out "normalized" pdf vals at sample points
max_pdf = mlab.normpdf(mean, mean, sigma)
sample_pdf_vals = mlab.normpdf(sample_xs, mean, sigma) / max_pdf

# which ones are under the curve?
under_curve = sample_ys < sample_pdf_vals

# get pdf vals to plot
x = np.linspace(0, 200, 1000)
pdf_vals = mlab.normpdf(x, mean, sigma) / max_pdf

# plot the samples and the curve
colors = np.array(['cyan' if b else 'red' for b in under_curve])
scatter(sample_xs, sample_ys, c=colors)
plot(x, pdf_vals) 
```

![](../Images/dfb474d52bbd7e06c9966be5548b6421.png)

当然，你也应该意识到，如果你只想要曲线下的点，这相当于（但效率远低于）从正态分布中采样，然后`y`从 0 到 pdf 值均匀地为每个样本随机选择一个那里：

```
sample_xs = np.random.normal(mean, sigma, size=num_pts)
max_pdf = mlab.normpdf(mean, mean, sigma)
sample_pdf_vals = mlab.normpdf(sample_xs, mean, sigma) / max_pdf
sample_ys = np.array([np.random.uniform(0, pdf_val) for pdf_val in sample_pdf_vals]) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-29T02:53:10.903

很难阅读您的代码。无论如何，您无法使用 访问集合`[]`，即`foos[Upper]`,`method[Upper]`等都是非法的。我不明白你为什么将`foo`,转换`x`为 set. 此外，对于由 产生的点`method2`，例如 (x0, y0)，x0 很可能不存在于 中`x`。

我不熟悉 numpy，但这是我将为您指定的目的所做的：

```
def undercurve(size):
    result = []
    for i in xrange(size):
        x = random()
        y = random()
        if y < scipy.stats.norm(0, 200).pdf(x): # here's the 'undercurve'
        result.append((x, y))
    return results 
```

# syntax - 从 Bison 自动生成语法图

> ID：14574596
> 
> 赞同：1
> 
> 时间：2013-01-29T02:14:38.653
> 
> 标签：syntax, bison

我想找到一个从野牛源文件自动生成语法图的工具。有人知道这样的工具吗？这是一个类似的帖子，但答案给我留下了太多问题：

[https://stackoverflow.com/questions/3141317/creating-diagram-of-grammar-bison](https://stackoverflow.com/questions/3141317/creating-diagram-of-grammar-bison)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-29T05:06:18.850

有这个工具：[http](http://bottlecaps.de/rr/ui) ://bottlecaps.de/rr/ui但它需要 EBNF。公平地说，EBNF 使语法更加清晰，因为它允许直接表示必须从野牛源文件中推断出的项目序列。我相信也有一些工具会尝试进行这种推断。

还有这个工具：[https](https://github.com/tabatkins/railroad-diagrams) ://github.com/tabatkins/railroad-diagrams ，它要求您提供实际上是语法的 AST（理想情况下，按照前一个进行转换。）这可能是一个更好的选择，因为您可以使用 bison 轻松生成野牛语法的 AST :) 并且应该很容易推断出序列运算符，甚至标记它们。

可能还有其他工具在流传，但我怀疑它们都会有类似的问题。对于正常大小的语法，我列出的两个工具至少看起来不错（imo）。[您可以在Wikipedia](http://en.wikipedia.org/wiki/Syntax_diagram)上找到更多链接。

顺便说一句，我想你知道最近的野牛版本会生成`DOT`描述解析状态的文件吗？（使用该`-g`选项。）这些对于记录语法几乎没有用处，如果您的语法接近复杂，则需要大量空间，但它们也可以提供有关语法的一些有用信息。

# uiwebview - UIWebView 的 Monotouch 崩溃

> ID：14574599
> 
> 赞同：1
> 
> 时间：2013-01-29T02:15:06.150
> 
> 标签：uiwebview, xamarin.ios, xamarin

UIWebView 出现随机崩溃。我唯一拥有的是崩溃消息。希望这足以为导致它的原因提供线索。我正在使用我自己的 webview 委托和子类化 SizingSource。谢谢。

```
Stacktrace:

  at (wrapper managed-to-native) MonoTouch.UIKit.UIApplication.UIApplicationMain (int,string[],intptr,intptr) <IL 0x0009f, 0xffffffff>
  at MonoTouch.UIKit.UIApplication.Main (string[],string,string) [0x0004c] in /Developer/MonoTouch/Source/monotouch/src/UIKit/UIApplication.cs:38
  at app.Application.Main (string[]) [0x00000] in /Users/vbisbest/Projects/app/MineChat/Main.cs:17
  at (wrapper runtime-invoke) <Module>.runtime_invoke_void_object (object,intptr,intptr,intptr) <IL 0x00050, 0xffffffff>

Native stacktrace:

0   MineChat                            0x00095f7c mono_handle_native_sigsegv + 284
1   MineChat                            0x0000be98 mono_sigsegv_signal_handler + 248
2   libsystem_c.dylib                   0x9a6c759b _sigtramp + 43
3   ???                                 0xffffffff 0x0 + 4294967295
4   UIKit                               0x02914aad -[UIWebViewWebViewDelegate webView:resource:didFinishLoadingFromDataSource:] + 63
5   CoreFoundation                      0x0134a1bd __invoking___ + 29
6   CoreFoundation                      0x0134a0d6 -[NSInvocation invoke] + 342
7   CoreFoundation                      0x0134a24a -[NSInvocation invokeWithTarget:] + 74
8   WebKit                              0x06b88881 -[_WebSafeForwarder forwardInvocation:] + 257
9   CoreFoundation                      0x01345cf9 ___forwarding___ + 905
10  CoreFoundation                      0x0134594e _CF_forwarding_prep_0 + 14
11  CoreFoundation                      0x0134a1bd __invoking___ + 29
12  CoreFoundation                      0x0134a0d6 -[NSInvocation invoke] + 342
13  WebCore                             0x079c6483 _ZL11SendMessageP12NSInvocation + 35
14  WebCore                             0x079c5ff8 _ZL20HandleDelegateSourcePv + 104
15  CoreFoundation                      0x012d9f3f __CFRUNLOOP_IS_CALLING_OUT_TO_A_SOURCE0_PERFORM_FUNCTION__ + 15
16  CoreFoundation                      0x012d996f __CFRunLoopDoSources0 + 239
17  CoreFoundation                      0x012fc734 __CFRunLoopRun + 964
18  CoreFoundation                      0x012fbf44 CFRunLoopRunSpecific + 276
19  CoreFoundation                      0x012fbe1b CFRunLoopRunInMode + 123
20  GraphicsServices                    0x04d237e3 GSEventRunModal + 88
21  GraphicsServices                    0x04d23668 GSEventRun + 104
22  UIKit                               0x0273965c UIApplicationMain + 1211
23  ???                                 0x0e39bf15 0x0 + 238665493
24  ???                                 0x0e398b78 0x0 + 238652280
25  ???                                 0x0e397ea8 0x0 + 238649000
26  ???                                 0x0e39801e 0x0 + 238649374
27  MineChat                            0x00010252 mono_jit_runtime_invoke + 722
28  MineChat                            0x0017478e mono_runtime_invoke + 126
29  MineChat                            0x00178be4 mono_runtime_exec_main + 420
30  MineChat                            0x00178f55 mono_runtime_run_main + 725
31  MineChat                            0x0006ba65 mono_jit_exec + 149
32  MineChat                            0x0021f65d main + 2013
33  MineChat                            0x00003125 start + 53
34  ???                                 0x00000004 0x0 + 4

=================================================================
Got a SIGSEGV while executing native code. This usually indicates
a fatal error in the mono runtime or one of the native libraries 
used by your application.
=================================================================

        void HandleLoadFinished (object sender, EventArgs e)
        {
            try
            {
                // New message has been added, customize the cell and size it properly
                UIWebView webView = (UIWebView)sender;
                webView.ScrollView.ScrollEnabled = false;

                // Get the height of the content
                float height = float.Parse(webView.EvaluateJavascript("document.height"));

                // Redraw the webview frame to the size of the content
                webView.Frame = new RectangleF(0,0,this.View.Frame.Width, height);
                webView.AutoresizingMask = UIViewAutoresizing.FlexibleWidth;

                // Create the dialog element with the new view
                //UIViewElement viewElement = new UIViewElement("", webView ,false);    
                WebViewElement viewElement = new WebViewElement("", webView ,false);    
                string html = webView.EvaluateJavascript("document.body.innerHTML");
                viewElement.HTML = html;
                viewElement.WebView = webView;

                viewElement.Tapped += delegate() 
                {
                    if(MessageTapped!=null)
                    {
                        MessageTapped(viewElement.HTML);
                    }
                };

                // Add it to the section
                messageSection.Add(viewElement);

                CustomSizingSource customSizingSource = (CustomSizingSource)this.TableView.Source;
                if(customSizingSource.PinToBottom)
                {

                    var lastIndexPath = viewElement.IndexPath;
                    if(lastIndexPath!=null)
                    {
                        this.TableView.ScrollToRow( lastIndexPath, UITableViewScrollPosition.Bottom, true);
                    }
                }
            }
            catch(Exception ex)
            {
                Console.WriteLine("Error message finished loading: " + ex.Message);
            }
        } 
```

# c# - 可以从编辑器模板中调用显示模板吗？

> ID：14574601
> 
> 赞同：10
> 
> 时间：2013-01-29T02:15:20.680
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-3

我在`~/Views/Shared/DisplayTemplates`命名中创建了一个显示模板`ImpactMatrix.cshtml`。它接受一个可为空的 int 并呈现一个二维矩阵，其中选定的数字突出显示：

```
@model int?

@{
    var matrix = ImpactMatrix.GetMatrix();
}   

<div class="impactmatrix">
  <table>
    @for (int i = 0; i < matrix.GetLength(0); i++)
    { 
        <tr>
          @for (int j = 0; j < matrix.GetLength(1); j++)
          {
              var cell = matrix[i, j];
              <td data-color="@cell.Color" 
                class="matrix @(Model == cell.Value ? cell.Color.ToString() : "")">
                    @cell.Value
              </td>
          }
        </tr>
    }
    </table>
</div> 
```

它很容易重复使用并且效果很好。我可以像这样在我的视图中调用它：

```
@Html.DisplayFor(m=> m.ImpactFactor, "ImpactMatrix") 
```

现在我决定扩展它并使它成为一个编辑器。这个想法是为选定的数字添加一个隐藏的输入，并将输入与矩阵模板一起用一个 div 包装起来。从那里使用 Javascript 与我的显示网格交互并填充隐藏的输入应该是一件简单的事情。

我`ImpactMatrix.cshtml`在我的`~/Views/Shared/EditorTemplates`文件夹中创建了一个编辑器模板，也命名为 。这是代码：

```
@model int?

<div class="impactmatrix-editor">
    @Html.HiddenFor(m => m)
    @Html.DisplayFor(m => m, "ImpactMatrix")
</div> 
```

我的问题是隐藏输入正确呈现，但嵌套显示模板未在我的编辑器模板中呈现。我正在尝试做的事情可能吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-01T13:46:32.630

好像**目前不支持**。

但是，我找到了使用`Html.Partial`本文中的解决方案：[Nested @Html.DisplayFor(model => baseClass, "BaseClass") for base class template not rendering](https://stackoverflow.com/questions/5291808/nested-html-displayformodel-baseclass-baseclass-for-base-class-template)

像这样重写你的编辑器模板：

```
@model int?

<div class="impactmatrix-editor">
    @Html.HiddenFor(m => m)
    @Html.Partial("~/Views/Shared/DisplayTemplates/ImpactMatrix.cshtml", Model)
</div> 
```

*注意：@Paul Hadfield 在我上面提到的文章中评论了这个问题，这个问题已经在 ASP MVC 4 中得到修复。但是即使我在我的 PC 上运行这个版本，我也无法使嵌套模板工作。*

# hadoop - 原因：org.apache.hadoop.ipc.RPC$VersionMismatch

> ID：14574602
> 
> 赞同：0
> 
> 时间：2013-01-29T02:16:01.300
> 
> 标签：hadoop, rpc

当我尝试调用远程方法时出现此异常，

```
2013-01-28 16:46:09,911 ERROR org.apache.hadoop.security.UserGroupInformation: PriviledgedActionException as:training (auth:SIMPLE) cause:org.apache.hadoop.ipc.RPC$VersionMismatch: Protocol org.apache.hadoop.hdfs.protocol.ClientProtocol version mismatch. (client = 69, server = 1)
2013-01-28 16:46:09,912 INFO org.apache.hadoop.ipc.Server: IPC Server handler 1 on 8020, call org.apache.hadoop.hdfs.protocol.ClientProtocol.getFileInfo from 192.168.140.1:55126: error: org.apache.hadoop.ipc.RPC$VersionMismatch: Protocol org.apache.hadoop.hdfs.protocol.ClientProtocol version mismatch. (client = 69, server = 1)
org.apache.hadoop.ipc.RPC$VersionMismatch: Protocol org.apache.hadoop.hdfs.protocol.ClientProtocol version mismatch. (client = 69, server = 1) 
```

我正在使用 Cloudera CDH4 vm（版本 2.0.0-mr1-cdh4.1.2）

服务器端的 ClientProtocol 怎么会有“1”的版本？

# xml - 如何在 Web 输出中为目录指定 navtitle 但不在 pdf 输出中？

> ID：14574603
> 
> 赞同：0
> 
> 时间：2013-01-29T02:16:02.907
> 
> 标签：xml, xml-documentation, dita

鉴于 Web 输出的目录区域相当狭窄，我想假设 Web 的导航标题较小，但继续在 PDF 输出中呈现较长的主题标题。

以下标记似乎根本不起作用（有或没有`audience`属性）：

```
<task id="guid-76a10a16-9952-44fa-ad32-9b9cf2c3eee6">
    <title>Primary Topic Title</title>
    <titlealts audience="web">
        <navtitle>Short Title</navtitle>
    </titlealts>
</task> 
```

添加`locktitle="yes"`地图似乎也没有任何区别：

```
<topicref type="task" href="primary-topic-title.dita" locktitle="yes"/> 
```

以下适用于网络，但不幸的是在 PDF 目录中也显示了短标题：

```
<topicref type="task" href="primary-topic-title.dita" locktitle="yes">
    <topicmeta>
        <navtitle>Short Title</navtitle>
    </topicmeta>
</topicref> 
```

我尝试使用以下内容分别针对 Web 和 PDF，但这会导致在转换过程中发生错误，说明我试图引用处理上下文之外的主题。这适用于 Web，但在检查 PDF 输出时，会使用“file:/”协议而不是 PDF 文件中的交叉引用来链接到“.dita”文件。

```
<topicref audience="pdf" type="task" href="primary-topic-title.dita"/>

<topicref audience="web" type="task" href="primary-topic-title.dita" locktitle="yes">
    <topicmeta>
        <navtitle>Short Title</navtitle>
    </topicmeta>
</topicref> 
```

注意：我使用的是 XML Mind 的[Ditac](http://www.xmlmind.com/ditac)处理器

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T12:46:32.850

尽管我对 DITAC 工具并不特别熟悉，但我将描述可在 DITA Open Toolkit 和其他工具中使用的方法，这些工具为 DITA 规范提供全面支持。

你原来的方法是正确的：

```
<task id="guid-76a10a16-9952-44fa-ad32-9b9cf2c3eee6">
    <title>Primary Topic Title</title>
    <titlealts audience="web">
        <navtitle>Short Title</navtitle>
    </titlealts>
</task> 
```

您的处理必须对 PDF 和 Web 输出使用不同的数字文件。PDF 数字文件必须包括：

```
<prop action="exclude" att="audience" val="web" /> 
```

Web ditaval 文件必须包括：

```
<prop action="include" att="audience" val="web" /> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-29T18:51:21.103

不幸的是，DITA 只有`print`根据输出类型过滤的属性，它不能直接用于`navtitle`元素。你可以使用

```
<topicref print="printonly" href="primary-topic-title.dita"/>
<topicref print="no" href="primary-topic-title.dita" locktitle="yes">
  <topicmeta>
    <navtitle>Short Title</navtitle>
  </topicmeta>
</topicref> 
```

但这会重复主题引用。`props`添加基于此的自定义分析属性和过滤器可能更容易。这样，您只能调节`navtitle`.

# java - 每个请求的新会话

> ID：14574606
> 
> 赞同：0
> 
> 时间：2013-01-29T02:16:10.877
> 
> 标签：java, jakarta-ee, struts

在我的项目中，要求每个请求都应该有新的会话，但是如果我们在多个选项卡中点击相同的 url，或者两次打开同一个浏览器并点击 url，那么它被认为是一个会话并且我们得到不一致的结果。ie中有一些设置可以解决我的问题的浏览器，但我想知道我们是否可以通过编程方式进行操作。我使用的是 struts 1.3。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T04:20:06.270

我真的认为你应该采取另一种方法来解决这个问题，更多的是在客户端而不是服务器端，或者可能将两者混合使用。在我的脑海中，我可以考虑在每次加载页面时在 javascript 上生成一个唯一 ID（意味着打开另一个选项卡）并将此 ID 保留为选项卡标识符，然后您可以在服务器端使用这些 ID 来匹配每个页面的信息。为什么会是这样？因为 http 服务器对浏览器选项卡一无所知，它们“无状态地”接收请求并发送响应，会话是一种人为的，它们只是由从浏览器发送和发送到浏览器的简单 cookie 跟踪，这有助于服务器知道谁正在说话。

# powershell - powershell 启动服务失败

> ID：14574607
> 
> 赞同：1
> 
> 时间：2013-01-29T02:16:22.013
> 
> 标签：powershell

我有一个非常简单的 powershell 脚本，可以远程启动服务。

```
Invoke-Command -Session $session -ScriptBlock { Start-Service "My test service v1" } 
```

工作正常，但

```
$myval="My test service v1"
Invoke-Command -Session $session -ScriptBlock { Start-Service $myval } 
```

失败了

> 无法验证参数“InputObject”的参数。参数为 null 或空。提供一个不为 null 或空的参数，然后再次尝试该命令。+ CategoryInfo : InvalidData: (:) [Start-Service], ParameterBindingValidationException + FullyQualifiedErrorId : ParameterArgumentValidationError,Microsoft.PowerShell.Commands.StartServiceCommand + PSComputerName : mdfiletest

对我来说，它们是一样的。为什么这不起作用？谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-29T02:56:24.227

它不起作用，因为在远程服务器上执行脚本块时，该变量`$myval`在会话状态下不存在；它只存在于本地（客户端）端。执行此操作的 powershell v2/v3 兼容方法是：

```
invoke-command -session $session -scriptblock {
      param($val); start-service $val } -args $myval 
```

另一种powershell v3（仅限）方式是这样的：

```
invoke-command -session $session -scriptblock { start-service $using:myval } 
```

前缀是一个特殊的`$using`伪作用域，它将捕获局部变量并尝试将其序列化并远程发送。字符串始终是可序列化的（可远程的。）

# c# - 如何在 Web 服务中使用 HttpWebRequest 检测受信任的站点？

> ID：14574610
> 
> 赞同：0
> 
> 时间：2013-01-29T02:16:39.950
> 
> 标签：c#, web-services, httpwebrequest, http-status-code-404

> 我在 C# 中有一个 2.0 框架的控制台应用程序，使用 vs 2005。这很奇怪，我在我的电脑和服务器上工作的代码完全相同（使用 web 服务）。
> 
> 当我`HttpWebRequest.GetResponse`在 URL 上执行时，第一个（pc）运行良好，但最后一个（webservice）返回错误：
> 
> ```
> (404) Not Found. The URL is a trusted site. 
> Internet sites and local intranet sites are detected successfully. 
> But trusted sites only could not be detected. 
> ```
> 
> 我不知道为什么？
> 
> 这是代码：
> 
> ```
> private bool getSiteConnStatus(string url)
> {
>   bool result = true;
>   Uri uri = new Uri(url);
>   try
>   {
>       HttpWebRequest request = (HttpWebRequest)WebRequest.Create(uri);          
>       WebProxy SCProxy = new WebProxy("123.123.123.123");          
>       SCProxy.Credentials = new NetworkCredential();                
>       request.Proxy = SCProxy;          
> 
>       HttpWebResponse response = (HttpWebResponse)request.GetResponse();
>       if (response == null || response.StatusCode != HttpStatusCode.OK)
>       {
>           result = false;
>       }
>       response.Close();
>   }
>   catch (Exception ex)
>   {
>       result = false;
>   }
>   return result;
> } 
> ```

~~~~~~~~~~

我已经解决了。

每当每个站点调用时，代理信息都会更改。所以我在下面添加了一些行。 [参考网站](http://msdn.microsoft.com/ko-kr/library/system.net.httpwebrequest.proxy.aspx)

```
 private bool getSiteConnStatus(string url)
    {
        bool result = true;
        Uri uri = new Uri(url);
        try
        {
            HttpWebRequest request = (HttpWebRequest)WebRequest.Create(uri);
            ***WebProxy SCProxy;
            if (request.Address.Host == "test.net")
            {
                SCProxy = new WebProxy("111.111.111.111", 8080);
            }
            else
            {
                SCProxy = new WebProxy("123.123.123.123", true);
            }
            request.Proxy = SCProxy;***

            HttpWebResponse response = (HttpWebResponse)request.GetResponse();

            if (response == null || response.StatusCode != HttpStatusCode.OK)
            {
                result = false;
            }
            response.Close();
        }
        catch (Exception ex)
        {
            result = false;
        }
        return result;
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T06:15:59.927

尝试从浏览器（在服务器上）访问您的 url - 如果它有效，您的浏览器代理被配置为与给定端口与外界进行通信。

检查您的防火墙策略和他们阻止与外部世界建立连接的任何特定用户代理字符串？

如果您从浏览器尝试它，还要验证您的代理身份验证（我在这里假设它的 IE）。浏览器可能会自动提供它/NTLM 身份验证字符串。您的程序可能无法做到的地方？

# android - 在 android 上播放 RTSP 流

> ID：14574612
> 
> 赞同：1
> 
> 时间：2013-01-29T02:16:54.520
> 
> 标签：android, video-streaming, android-videoview, rtsp

我有一个 RTSP 源，我想在我的 android 应用程序上播放它，但它播放 2 或 3 分钟并且不能播放更长时间:(

我怎样才能玩得更久？

```
// there is my code to play, thanks for advice!
// videoview is my VideoView on layout
    videoview.setVideoURI(Uri.parse("rtsp://192.168.0.119/Bolt.ts"));   
    videoview.setMediaController(new MediaController(this));    
    videoview.requestFocus();   
    videoview.start(); 
```

感谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-12-10T16:06:28.937

可能您的视频编码不完全支持，我建议使用本机播放器是播放 RTSP 的另一个好解决方案。

```
mediaURL = "rtsp://192.168.0.119/Bolt.ts"
Intent intent = new Intent(Intent.ACTION_VIEW, Uri.parse(mediaURL));
startActivity(intent); 
```

**更新：**

好的，如果您不想播放其他应用程序，您的解决方案是正确的

```
videoview.setVideoURI(Uri.parse("rtsp://192.168.0.119/Bolt.ts"));   
videoview.setMediaController(new MediaController(this));    
videoview.requestFocus();   
videoview.start(); 
```

但我很确定导致您的视频停止的原因是流中使用的编解码器可能在您的设备上不完全支持。

我建议使用：`H.264 for video`和`AAC for audio`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-03-18T22:50:16.347

似乎标准的 Android MediaPlayer 不会向 RTSP 流服务器发送回保持活动消息。因此，流媒体服务器终止连接。

一种解决方法是使用不同类型的 MediaPlayer：
- ExoPlayer（来自 Google）
- Vitamino（注意许可问题，这不是很清楚）
- LibVlc

就个人而言，我使用了 LibVlc，它运行良好。你可以在这里找到一些例子： [https ://bitbucket.org/edwardcw/libvlc-android-sample](https://bitbucket.org/edwardcw/libvlc-android-sample)

# windows - 将文件拖放到带有参数的 EXE 中

> ID：14574613
> 
> 赞同：3
> 
> 时间：2013-01-29T02:16:56.727
> 
> 标签：windows, batch-file

我不确定这是否是一个编程问题——这真的取决于我猜的答案。

我有命令行实用程序，可以通过将文件拖放到上面来触发。

发生这种情况时，基本上这会触发该过程：

```
myUtility.exe Filepath/FileName.xyz 
```

我想保留拖放功能，但包括一组固定的选项：

```
myUtility.exe Filepath/FileName.xyz -f -g 
```

有没有办法做到这一点？

请注意，唯一的变量是已删除文件的文件路径/文件名。我无法修改utility.exe 本身。

我想知道是否可以创建一个批处理文件来充当中间人，以便将文件拖放到通向批处理文件的快捷方式上，这会捕获删除的文件名，然后调用带有文件名的实用程序.exe 添加所需的选项。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-29T02:30:58.977

如果`-f -g`不需要在文件名后面加上 ，您可以`-f -g`在实用程序目标字段的快捷方式中添加 。拖放到快捷方式时，文件名将自动添加为第三个参数。许多优秀的命令行应用程序可以按任何顺序处理它们的选项参数。

```
C:\path to utility\myUtility.exe -f -g 
```

否则，是的，您可以创建一个批处理文件来根据需要排列这些值。将此添加到 .bat 文件并保存。直接拖放到脚本或其快捷方式上的文件将放置在 所在`%1`位置。

```
C:\path to utility\myUtility.exe %1 -f -g 
```

# c++ - 什么是 C++ 中的动态内存分配？

> ID：14574617
> 
> 赞同：5
> 
> 时间：2013-01-29T02:17:20.170
> 
> 标签：c++, memory-management, malloc, new-operator, dynamic-allocation

我正在学习 C++ 中的动态内存分配以及关键字`new`和`new[]`被提及。据说可以让用户在运行时指定内存分配的大小，而不是简单地在源代码中声明一个具有固定大小的变量或数组。

我不明白这个概念。它是如何工作的？我只需要澄清这个想法，一个例子会很有帮助！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-29T02:25:25.797

所以，如果你想要一个 10 个整数的数组，你会写：

```
int arr[10]; 
```

但是如果你想做这样的事情怎么办？

```
cout << "How many?";
cin >> num;

int arr[num]; 
```

好吧，C++ 语言不允许这样做。相反，您必须这样做：

```
int *arr = new int[num]; 
```

创建你的数组。稍后您必须[1] 使用：

```
delete [] arr; 
```

释放内存。

那么，这是如何工作的呢？当您调用 new 时，C++ 运行时库 [构成 C++ 基础的您不必编写的代码] 将计算出`num`整数占用了多少空间，并为此在内存中找到一些空间。我不会详细介绍“你如何找到一些记忆”。现在，相信我，有一些可用的内存可以用来存储一些整数。

当您稍后调用`delete`时，相同的内存将返回给它来自的内存“池”或“堆”。

当然，如果您有一台内存为 256 MB 的机器，并且您尝试请求空间来存储 2.5 亿个整数，请记住一个整数占用超过一个字节，这不会成功 -这里没有“魔法” - 内存仍然限于机器中可用的内存量......您有权在程序中确定程序何时运行，您需要多少内存，而不是必须决定何时编写程序。

编辑：通常最好使用已经存在的“容器”和“包装器类”来“隐藏”任何内存分配，这对这个目的非常有用。例如：

```
 std::vector<int> arr; 
```

将用作整数的变量存储，您不必担心释放内存，甚至在将它们存储在那里之前就知道需要多少。

```
 std::shared_ptr<int> arr = new int[num]; 
```

是另一种情况，当“shared_ptr”不再使用时[它在共享指针类中跟踪它，所以你永远不需要关心释放内存]。

[1] 如果您不想泄漏内存，那么泄漏内存是“不好的风格”。如果你这样做，不会让任何人开心。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-12-24T01:03:12.100

我看过很多关于 C++ 中内存分配的帖子，关于“new operator”与“operator new”的问题，关于`new int(100)`vs`new int[100]`的问题，关于内存初始化的问题......我认为应该有一个答案可以一劳永逸地总结一切，我选择这个问题来写这个总结。它与动态内存分配有关，*即*运行时在堆上的分配。我还提供了一个[摘要实现](https://github.com/Sheljohn/Allocators)（公共领域）。

* * *

# C 与 C++

动态内存分配的主要功能：

*   在 C (header `<cstdlib>`) 中，我们主要有`malloc`and`calloc`和`free`。我就不说了`realloc`。
*   在 C++ (header `<new>`) 中，我们有：
    *   带有初始化参数的模板单对象分配：
        *   `new T( args )`
        *   `new (std::nothrow) T( args )`
        *   `delete ( T* )`
    *   具有默认初始化的模板多对象分配：
        *   `new T[ size_t ]`
        *   `new (std::nothrow) T[ size_t ]`
        *   `delete[] ( T* )`
    *   模板内存初始化，无需为单个或多个对象分配：
        *   `new (void*) T( args )`
        *   `new (void*) T[ size_t ]`
    *   内部*新表达式*：
        *   原始内存分配`::operator new( size_t )`；
        *   原始内存分配无一例外`::operator new( size_t, std::nothrow )`；
        *   未分配的原始内存初始化`::operator new( size_t, ptr )`。

请查看[这篇文章](https://stackoverflow.com/questions/240212/what-is-the-difference-between-new-delete-and-malloc-free)以获得简洁的比较。

* * *

# 旧版 C 动态分配

***要点***：完整的类型擦除（`void*`指针），因此**没有构造/破坏**，以字节为单位指定的大小（通常使用`sizeof`）。

[`malloc( size_t )`](http://www.cplusplus.com/reference/cstdlib/malloc/)根本不初始化内存（原始内存包含垃圾，总是在使用前手动初始化）。[`calloc( size_t, size_t )`](http://www.cplusplus.com/reference/cstdlib/calloc/)将所有位初始化为 0（开销很小，但对 POD 数字类型很有用）。任何分配的内存都应该使用**ONLY**释放。[`free`](http://www.cplusplus.com/reference/cstdlib/free/)

 **类实例的构造/销毁**应** *在*使用*前*/内存释放前手动完成。

* * *

# C++ 动态分配

***要点***：由于相似的语法做不同的事情而令人困惑，**所有** `delete`-statements 调用析构函数，**所有** `delete`-statements 采用全类型指针，**一些** `new`-statements 返回全类型指针，**一些** `new`-statements 调用*一些*构造函数。

***警告***：正如您将在下面看到的，`new`可以是*关键字*或*函数*。最好不要谈论“new operator”和/或“operator new”以[避免混淆](https://stackoverflow.com/questions/1885849/difference-between-new-operator-and-operator-new)。我将`new`任何包含`new`函数或关键字的有效语句称为“-statements”。人们还谈论“`new`-expressions”，其中`new`是关键字而不是函数。

## 原始内存分配（无初始化）

**不要自己使用它。**这由*new-expressions*内部使用（见下文）。

*   `::operator new( size_t )`并`::operator new( size_t, std::nothrow )`以字节为单位获取大小，并`void*`在成功的情况下返回 a。
*   如果失败，前者抛出异常[`std::bad_alloc`](http://www.cplusplus.com/reference/new/bad_alloc/)，后者返回`NULL`。
*   用于类型[`::operator new( sizeof(T) )`](http://www.cplusplus.com/reference/new/operator%20new/)的**单个**对象`T`（和用于[`delete`](http://www.cplusplus.com/reference/new/operator%20delete/)发布）和**多个**对象（和用于发布）。[`::operator new( n*sizeof(T) )`](http://www.cplusplus.com/reference/new/operator%20new[]/)**[`delete[]`](http://www.cplusplus.com/reference/new/operator%20delete[]/)**

 **这些分配**不会**初始化内存，特别是它们**不会**调用分配对象的默认构造函数。因此，您必须在使用或释放分配之前**手动初始化所​​有元素**。`delete``delete[]`

***注意***：我不能强调你不应该自己使用它。但是，如果您应该使用它，请确保或`void`时传递一个指针而不是类型化指针（始终在手动初始化之后）。我亲身经历过使用某些编译器的非 POD 类型的运行时错误（也许是我的错误）。`delete``delete[]`

## 原始内存初始化（无分配）

**不要自己使用它。**这由*new-expressions*内部使用（见下文）。在下文中，我假设`void *ptr = ::operator new( n*sizeof(T) )`一些 type`T`和 size `n`。

然后从使用默认构造函数开始`::operator new( n*sizeof(T), (T*) ptr )`初始化`n`类型的元素。这里**没有分配**，只使用默认构造函数进行初始化。`T``ptr``T::T()`

 **## 单对象分配和初始化

*   `new T( args )`使用构造函数为单个类型的对象分配*和*初始化内存。*除非*省略参数（即，甚至） ，否则不会调用默认构造函数。失败时抛出异常。`T``T::T( args )`*`new T()``new T``std::bad_alloc`*
**   相同的`new (std::nothrow) T( args )`只是它`NULL`在失败的情况下返回。*   用于`delete`调用析构函数`T::~T()`并释放相应的内存。*

 *## 多对象分配和初始化

*   `new T[n]`使用默认构造函数为类型对象分配*和*初始化内存。失败时抛出异常。`n``T``std::bad_alloc`
*   同上，`new (std::nothrow) T[n]`除了它`NULL`在失败的情况下返回。
*   用于*为每个元素*`delete[]`调用析构函数并释放相应的内存。`T::~T()`

 *## 内存初始化（又名“放置新”）

这里没有分配。不管如何分配：

*   `new (ptr) T(args)`调用`T::T(args)`存储在的内存上的构造函数`ptr`。除非省略参数，否则不会调用默认构造函数。
*   `new (ptr) T[n]`对存储 from to类型`T::T()`的对象（即字节）调用默认构造函数。`n``T``ptr``ptr+n``n*sizeof(T)`

* * *

# 相关文章

*   简明比较[new/delete 与 malloc/free](https://stackoverflow.com/questions/240212/what-is-the-difference-between-new-delete-and-malloc-free)
*   更详细的[Malloc 与 new](https://stackoverflow.com/questions/184537/in-what-cases-do-i-use-malloc-vs-new)，看看@Flexo 的答案
*   [new 运算符 vs 运算符 new](https://stackoverflow.com/questions/1885849/difference-between-new-operator-and-operator-new)，不要使用这些术语来避免混淆********

# javascript - 在 JQuery/Javascript 中捕捉到网格的可拖动正方形/矩形

> ID：14574618
> 
> 赞同：1
> 
> 时间：2013-01-29T02:17:22.220
> 
> 标签：javascript, jquery, html

我想在 mousedown 上创建一个矩形，它拖过一个网格并在 mouseup 上保持在那里，捕捉到网格线并输出它的位置（x1，x2，y1，y2）的左上角和右下角的坐标。对于开始构建它的任何帮助将不胜感激。

我有一个 500x500 的网格，正方形为 10x10（例如 - [**jsFiddle**](http://jsfiddle.net/nEZyK/16/)）。

网格代码：

```
 function creategrid(size){

          var standardW = Math.floor((500) / size),
              standardH = Math.floor((500) / size);

          var standard = document.createElement('div');
              standard.className = 'grid';
              standard.style.width = (standardW * size) + 'px';
              standard.style.height = (standardH * size) + 'px';

            for (var i = 0; i < standardH; i++) {
                for (var p = 0; p < standardW; p++) {
                  var cell = document.createElement('div');
                      cell.style.height = (size - 1) + 'px';
                      cell.style.width = (size - 1) + 'px';
                      cell.style.position = 'relative'
                      cell.style.zIndex= '2';
            standard.appendChild(cell);
                }
            }

          document.body.appendChild(standard);
      }

      creategrid(10); 
```

网格的 CSS：

```
 .grid {
    margin: 0px auto auto;
    border: 1px solid #000;
    border-width: 0 1px 1px 0;
    background-color: #CCC;
  }

  .grid div {
    border: 1px solid #000;
    border-width: 1px 0 0 1px;
    float: left;
  }

  #tooltip { 
    text-align:center; 
    background:black; 
    color:white; 
    padding:3px 0; 
    width:150px; 
    position:fixed; 
    display:none; 
    white-space:nowrap;
    z-index:3; 
  } 
```

我通过谷歌[http://jqueryui.com/draggable/#snap-to](http://jqueryui.com/draggable/#snap-to)找到了一些捕捉代码，但我确实被卡住了（我是 JQuery 的完整初学者）。

或者，如果有人对如何做到这一点有更好的想法，那将非常受欢迎。

*   如果您想提出一种不同的方法，请提供一些背景知识：这是针对使用 python 和 django 构建的 SQL 服务器运行的网站。它输出的数据是 jSON 对象，但我只是在前端使用 html、css 和 javacript/jQuery。- 不确定该信息是否有用。

**编辑**在 jQuery 中为鼠标悬停网格坐标添加了代码

```
 $(window).load(function() {
        var tooltip = $('<div id="tooltip">').appendTo('body')[0];

        $('.coords').
        each(function() {

            var pos = $(this).offset(),
                top = pos.top,
                left = pos.left,
                width = $(this).width(),
                height = $(this).height();

            $(this).
            mousemove(function(e) {
                var x = ((e.clientX + document.body.scrollLeft + document.documentElement.scrollLeft) - left).toFixed(0),
                    y = (((e.clientY + document.body.scrollTop + document.documentElement.scrollTop) - top)).toFixed(0);

                    $(tooltip).text( x + ', ' + y).css({
                        left: e.clientX + 20,
                        top: e.clientY + 10
                    }).show();

            }).

            mouseleave(function() {
                $(tooltip).hide();
            });

        });

    }); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-29T03:56:37.603

如果我正确理解了您的问题，那么您实际上并不需要 jQueryUI。您需要在 mousemove 上找到与网格单元格对齐的鼠标位置并调整选择矩形的大小。

```
function getMousePos (e) {
  return {
    'left': Math.floor((e.pageX - gridOffset.left) / cellSpacing) * cellSpacing,
    'top': Math.floor((e.pageY - gridOffset.top) / cellSpacing) * cellSpacing
  }
} 
```

这是一个例子 - [http://jsfiddle.net/4efTV/](http://jsfiddle.net/4efTV/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-29T02:34:37.970

我建议你使用那个插件，jQuery UI，它真的很简单，看看这个小提琴：http: [//jsfiddle.net/promatik/hBQxb/](http://jsfiddle.net/promatik/hBQxb/)

HTML

```
<div class="snap-box">snap box</div> 
```

Javascript：

```
$( ".snap-box" ).draggable({ grid: [ 10,10 ] }); 
```

CSS：

```
.snap-box {
    width: 50px;
    height: 50px;
    position: absolute;
    z-index: 10;
} 
```

# bash - Bash 脚本：无法将文件移动到另一个目录

> ID：14574619
> 
> 赞同：0
> 
> 时间：2013-01-29T02:17:22.960
> 
> 标签：bash, syntax, ssh

我的脚本有问题。变量 X 和 Y 被分配了 IP 地址的最后一个八位字节并且工作正常。Z 应该取 X 和 Y 并将值放入一个新的 txt 文件中。

```
X=$(ssh -i key.txt "$USER"@A.B.C.D "awk -F' ' '{print \$2}' /etc/openvpn/ccd/lastip.txt | awk -F'.' '{print \$4+4}'")
Y=$(ssh -i key.txt "$USER"@A.B.C.D "awk -F' ' '{print \$3}' /etc/openvpn/ccd/lastip.txt | awk -F'.' '{print \$4+4}'")
Z=$(ssh -i key.txt "$USER"@A.B.C.D "touch $NAME.txt | chmod 700 $NAME.txt mv $NAME.txt /etc/openvpn/ccd | echo -n "$X $Y" > /etc/openvpn/ccd/$NAME.txt") 
```

我不断收到消息说权限被拒绝：

```
mv: bash: /etc/openvpn/ccd/almost.txt: Permission denied
cannot move `almost.txt' to `/etc/openvpn/ccd/almost.txt': Permission denied 
```

该目录存在并且它的权限很好。我将如何才能将 $NAME.txt 移动到我想要的目录中？

编辑：即使没有 Z=$() 并使用命令行，我仍然会收到权限被拒绝错误

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T02:27:39.117

这一点需要一些工作：

```
touch $NAME.txt | chmod 700 $NAME.txt mv $NAME.txt /etc/openvpn/ccd | echo -n "$X $Y" > /etc/openvpn/ccd/$NAME.txt 
```

至少，您需要用分号替换管道，以及其中一个空格：

```
touch $NAME.txt; chmod 700 $NAME.txt; mv $NAME.txt /etc/openvpn/ccd; echo -n "$X $Y" > /etc/openvpn/ccd/$NAME.txt 
```

您想要执行看起来不合理`$NAME.txt`；您不应该使用 700 而是 600 权限。

由于您在 之前没有分号`mv`，因此`chmod`程序第二次尝试更改文件的权限`mv`，`$NAME.txt`并且`/etc/openvpn/ccd`.

除非您以 . 身份运行`root`，否则您应该无法写入`/etc/openvpn/ccd`。但是，您没有向我们展示当前目录的权限，尽管`touch`似乎已经工作，您大概可以在其中写入。在我写这篇文章的时候，也没有`/etc/openvpn/ccd`给定权限——但见下文。

* * *

而且，正如[John Kugleman](https://stackoverflow.com/users/68587/john-kugelman)在评论中指出的那样，在我剖析的命令字符串位于一组双引号内的更大上下文中，`"$X $Y"`应使用反斜杠对周围的双引号进行转义：

```
Z=$(ssh -i key.txt "$USER"@A.B.C.D "touch $NAME.txt; chmod 700 $NAME.txt; mv $NAME.txt /etc/openvpn/ccd; echo -n \"$X $Y\" > /etc/openvpn/ccd/$NAME.txt") 
```

* * *

### “无权限”错误的来源

鉴于权限`/etc/openvpn/ccd`为：

```
drwxr-xr-x 2 root root 4096 2013-01-16 15:01 /etc/openvpn/ccd 
```

我们可以推断您没有运行`root`并且不允许在目录中写入。您可能需要获得`sudo`在目标机器上使用的权限。

# xmpp - xmpp协议去中心化的实际意义？

> ID：14574620
> 
> 赞同：0
> 
> 时间：2013-01-29T02:17:55.563
> 
> 标签：xmpp

我刚开始研究 xmpp，它的 wiki 页面说“XMPP 网络的架构类似于电子邮件；任何人都可以运行自己的 XMPP 服务器，并且没有中央主服务器。”因此它是分散的

在我的应用程序中，我希望该用户可以通过单击按钮创建一个特定的群聊框。
我的问题是，如果创建聊天框的主要用户离线，他创建的聊天框将保持活动状态，因为分散的建议创建的用户将充当服务器。如果没有，任何人都可以建议即使在用户离线时也可以使聊天框保持活动状态。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-29T15:47:42.360

多用户聊天（在 XMPP 世界中称为“MUC”）由 XMPP 组件托管。这意味着发起聊天的用户 **不是*作为聊天提供者，而是这个特定的 MUC 组件。该组件通常与 XMPP 服务器在同一台机器上运行。因此聊天存在 - 如果 MUC 被标记为永久 - 即使用户退出聊天。

更多信息可以在[XEP-0045：多用户聊天中找到](http://xmpp.org/extensions/xep-0045.html)

# c++ - CentOS 6.02 64 位操作系统中的 OpenSSL 构建错误

> ID：14574622
> 
> 赞同：7
> 
> 时间：2013-01-29T02:18:18.457
> 
> 标签：c++, linux, openssl, centos

我在 CentOS 6.02 64 位操作系统中构建 openssl 时遇到了一些问题。每当我尝试构建它时，我都会遇到以下错误：-

```
md5-x86_64.s:41: Error: 0xd76aa478 out range of signed 32bit displacement
md5-x86_64.s:50: Error: 0xe8c7b756 out range of signed 32bit displacement
md5-x86_64.s:68: Error: 0xc1bdceee out range of signed 32bit displacement
md5-x86_64.s:77: Error: 0xf57c0faf out range of signed 32bit displacement
md5-x86_64.s:95: Error: 0xa8304613 out range of signed 32bit displacement
Many more errors like this. 
```

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2013-01-29T02:35:04.353

这是汇编代码中的寻址问题。（32 位与 64 位寻址。）为此提交了一个[错误。](http://rt.openssl.org/Ticket/Display.html?id=2094&user=guest&pass=guest)

要快速修复，请尝试使用该`no-asm`选项重新编译。

```
cd <openssl-source-directory>
./config no-asm
make && make install 
```

编辑：要解决因没有 -fPIC 标志而导致的错误：执行 a `make clean`，将行更改为`./config no-asm`，`./config no-asm -fPIC`然后运行`make && make install`​​。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-10-18T08:50:11.123

打开文件'openssl-x/crypto/md5/asm/md5-x86_64.pl'

然后进行以下更改：

后：

> 子回合1_step
> 
> { 我的 ($pos, $dst, $x, $y, $z, $k_next, $T_i, $s) = @_;

添加以下行：

```
+ $T_i = unpack("l",pack("l", hex($T_i))); # convert to 32-bit signed decimal 
```

同样，为 sub round2_step、sub round3_step & sub round4_step 添加相同的行

# sas - 在宏执行循环中输出到数据集

> ID：14574626
> 
> 赞同：0
> 
> 时间：2013-01-29T02:18:49.760
> 
> 标签：sas

这是我正在编写的宏，我想查看给定的数据集，并将每个字段（列）名称作为对信息数据集的观察写入。

这就是我所拥有的

```
%macro go_macro(data);

/*get the list of field names from the dictionary*/
proc sql noprint;

    select distinct name into :columns separated by ' '
    from dictionary.columns
    where memname = "%upcase(%scan(&data, -1))" and libname = "%upcase(%scan(&data, 1))" and type = "char"
;

quit;

/*now loop through this list of fieldnames*/
%let var_no = 1; 
%let var = %scan(&columns, &var_no, ' '); 

%do %while (&var ne);

                 /*here is where I want to write the fieldname to an observation*/
    fname = "&var"; 
                 output; 

%let var_no = %eval(&var_no +1);
%let var = %scan(&columns, &var_no, ' '); 
%end;

%mend;

/*execute the code*/
data bdqa.accounts_info; 
%go_macro(braw.accounts)
run; 
```

这给了我

```
[MPRINT] Parsing Base DataServer
/* 0005 */      fname = "SORT_CODE"; 
/* 0006 */          output; 
/* 0009 */      fname = "BANK_NAME"; 
/* 0010 */          output; 
/* 0013 */      fname = "CREDIT_CARD"; 
/* 0014 */          output; 
/* 0017 */      fname = "PRIMARY_ACCT_HOLDER"; 
/* 0018 */          output; 
/* 0021 */      fname = "account_close_date"; 
/* 0022 */          output;
/* 0023 */      run;

    ERROR: Parsing exception - aborting
ERROR: DS-00274 : Could not parse base DataServer code: Encountered " <ALPHANUM> "fname "" at line 5, column 9.
Was expecting one of:
    <EOF> 
    ";" ...
    "*" ...
    "data" ...
    "proc" ...
    (and 9 more)
    while 
```

尽管

```
data mytest;

    do i = 1 to 5; 
    fname = 'hello world';
    output; 
    end;
    keep fname; 
run; 
```

是完全合法的。

以下代码

```
%macro char_freqs(data=);

/*get the different variables*/
proc sql noprint;

select distinct name into :columns separated by ' '
from dictionary.columns
where memname = "%upcase(%scan(&data, -1))" and libname = "%upcase(%scan(&data, 1))" and type = "char"
;

quit;

/*now get the distinct values for each of the variables*/
%let var_no = 1; 
%let var = %scan(&columns, &var_no, ' '); 

%do %while (&var ne);

    proc freq data=&data; 
    tables &var/out=&var._freq; 
    run;    

%let var_no = %eval(&var_no +1);
%let var = %scan(&columns, &var_no, ' '); 
%end;

%mend;

%char_freqs(data=macros.businesses) 
```

也有效 - PROC FREQ 是允许的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-29T16:03:43.417

问题是你有这样的事情：

```
data bdqa.accounts_info; 
%go_macro(braw.accounts)
run; 
```

->

```
data bdqa.accounts_info; 
proc sql;
... select stuff ...;
quit;
fname = "stuff"; ...
run; 
```

你需要：

```
proc sql;
select stuff;
quit;

data bdqa.accounts_info; 
 fname = "stuff";
 ...
run; 
```

您需要从宏中删除 PROC SQL - 您可以在宏之外创建宏变量。老实说，您根本不应该为此使用宏-您可以做以下两件事之一： a) 直接从 DICTIONARY.COLUMNS 创建表

```
proc sql;
create table bdqa.accounts_info as select name as fname from dictionary.columns where ... ;
quit; 
```

b）在数据步中创建它

```
data bdqa.accounts_info;
__data = "&var_no";
do ... ;
run; 
```

（do 循环与宏中的 %do 循环基本相同）

# android - 在应用程序启动时在 Android 中启动 aFunction()

> ID：14574629
> 
> 赞同：0
> 
> 时间：2013-01-29T02:19:00.620
> 
> 标签：android

这个 Android 应用程序开发业务正在加速我的头发从棕色到灰色的转换。

有人能告诉我当应用程序启动时我应该如何`aFunction()`运行，因为我不应该在里面做一段时间（真的）`onCreate()`吗？

我已经阅读了有关 Android 开发人员的教程、其他几个教程、多个问题，但没有人回答这个看似简单的问题。或者，至少我没能找到它——毫无疑问，因为我向 Amphitheatre Parkway 的伟大神谕提出了错误的问题。

该应用程序是我的第一个自制的非教程应用程序，我正在尝试制作基于 GPS 的速度计（显然）。我猜是基本的东西。它需要经常更新，我正在使用 Thread.sleep() 。设置`LocationManager`，获取位置，计算距离和速度正在工作。打印速度正常。除了让它运行之外，一切都在工作（他天真地声称）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T02:26:02.150

Android 开发（实际上是大多数 GUI 开发）与您过去可能进行的控制台开发非常不同。主要区别在于 GUI 是事件驱动的。您通常会创建响应事件的所谓“回调方法”。这允许系统做其他事情，而不是在你的应用程序中等待一个`while(true)`循环。我不熟悉在 Android 应用程序中使用 GPS。您将需要研究处理 GPS 通知所需的回调。我建议从[Make Your App Location Aware](http://developer.android.com/training/basics/location/index.html)和[Location and Maps](http://developer.android.com/guide/topics/location/index.html)开始。

# jquery - 如何在匿名函数之外返回 jQuery 结果？

> ID：14574633
> 
> 赞同：1
> 
> 时间：2013-01-29T02:19:42.243
> 
> 标签：jquery, dynamics-crm-2011

> **可能重复：**
> [不确定变量未定义的原因。可能的范围问题？](http://facebook.stackoverflow.com/questions/9337077/unsure-why-variable-is-undefined-possible-scope-issue)

我很抱歉这个糟糕的标题，但我只是不知道还能怎么称呼它。我希望我的破解代码能够提供足够的信息。（请随意大笑并指着我，但不要忘记在你做的时候提供一些建设性的东西。）

第 24、27、31 和 43 行是我的问题所在。第 27 行包含我期望的数据（第 26 行显示我期望的数据）。但是，我试图在第 24 行将该信息返回给 fetchResults，这显然不会发生：fetchResults 是空的。

我相信这是因为第 27 行将结果返回给第 24 行的匿名函数，但从那里它无处可去。

第 43 行是我计划使用结果的地方。（是的，我手动添加了行号。）

```
1 $(document).ready(function() {
2 
3   // Fetch XML generic fetch format
4   function genericFetch(entityType, fieldA, fieldB, valueX)
5   {   
6       function onFetchError(xhr, status, errorThrown)
7       {
8           var errormsg = $(xhr.responseXML).find('Message').text();
9
10          alert('CrmFetchKit-Error occured: ' +  errormsg);
11      }
12
13      var fetchxml = ['<fetch version="1.0" output-format="xml-platform" mapping="logical">',
14                      ' <entity name="' + entityType + '">',
15                      '  <attribute name="' + fieldA + '" />',
16                      '  <attribute name="' + fieldB + '" />',
17                      '  <filter type="and">',
18                      '   <condition attribute="' + fieldA + '" operator="eq" value="' + valueX + '" />',
19                      '  </filter>',
20                      ' </entity>',
21                      '</fetch>'].join('');
22
23      // Action: load the account with a certain name
24      var fetchResults = CrmFetchKit.Fetch(fetchxml).then(function (results) {
25          /* success handler */
26          alert("results: " + JSON.stringify(results, null, 4));
27          return results;
28      }, onFetchError);
29      
30      alert("fetchResults: " + JSON.stringify(fetchResults, null, 4));
31      return fetchResults;
32  }
33
34
35  $('#ati_ittestingbutton2').click(function(){
36      var entityType = "product";
37      var fieldA = "productnumber";
38      var fieldB = "name";
39      var valueX = "SL64030";
40      
41      var fetchResults = genericFetch(entityType, fieldA, fieldB, valueX);
42      
43      alert("JSON: " + JSON.stringify(fetchResults, null, 4));
44      alert("fetchRes: " + fetchResults[0]['attributes']['productnumber']['value']);
45  });
46 }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T03:42:04.643

必须同意最初的评论回复——这里和其他地方有很多变化——但这可能对你没有帮助，除非你知道你在找什么。

所以...抱歉，如果这是吸鸡蛋 101 但是..

您为获取数据而调用的函数是异步操作的，即，一旦被调用，它会将控制权交还给调用它的代码并开始执行它的操作 - 当它返回时，世界已经继续前进'不要再等待它了 - 那是 ajax 中的'a'，这是我们大多数人都犯的错误（我知道我无论如何都做了......）。

有几种方法可以解决这个问题。您可以更改为同步操作，但这是一件坏事——它违背了 ajax 的目的，并会导致天空下雨鱼和其他天启的预兆。但这并不能阻止我们时不时地这样做……

更好的方法是调整您的程序流程，以便从成功或完整处理程序中调用结果处理代码。

# sql - 在 Ruby on Rails 中正确关闭 SQL 连接？

> ID：14574635
> 
> 赞同：3
> 
> 时间：2013-01-29T02:20:18.877
> 
> 标签：sql, ruby-on-rails, ruby, database-connection

我有一个非常复杂的 SQL 查询，在 ActiveRecord 中无法完成或无法轻松完成。

我创建了我的 SQL 查询并这样做了：

```
sql = getcomplexsqlquery
result = ActiveRecord::Base.connection.execute(sql) 
```

并循环遍历结果。

如何确保 SQL 连接关闭？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-29T02:49:27.250

不要试图关闭它。

您正在使用 ActiveRecord 与数据库的连接，这与用于正常查询的连接相同。

关闭一个将关闭另一个，结果留下一个愤怒的 ActiveRecord 和 Rails。

# cocos2d-android - 使用 Mac Texture Packer 进行 Cocos2D Android 移植

> ID：14574638
> 
> 赞同：1
> 
> 时间：2013-01-29T02:20:38.853
> 
> 标签：cocos2d-android, texturepacker

我刚刚使用 cocos2d 完成了一个 iPhone 游戏。我使用 Texture Packer 程序来创建我的游戏所需的纹理文件。该程序创建了一些 pvr.ccz 压缩文件。

现在我想将游戏移植到Android。我安装了 Android SDK 并准备导入 cocos2d-android 库。但我不清楚我是否可以使用为 iPhone 创建的相同 pvr.ccz 文件。我到底需要在 Texture Packer 中做什么来创建可在 cocs2d-android 项目中使用的输出文件？

请注意，我肯定想使用 cocos2d-android，因为我是从 iPhone android 移植的，所以我不想切换到 libgdx 或其他一些游戏引擎。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T17:11:07.747

Well, I can now answer my own question. The comment by LearnCocos2D above is correct - I verified this with the Texture Packer folks. Android phones really vary in their support for different types of images, some support PVR and some do not. Most if not all do not support any compressed PVR. But all support PNG. So the best solution is to just use the same Texture Packer project but export to PNG instead of pvr.ccz.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-01T06:50:04.363

@LearnCocos2D：png 导致的运行时内存峰值怎么样？您关于 Cocos2D 内存管理的详细博文确实提到了这一点。

此外，通过使用 PNG，我们将无法使用像 PVRTC4/2 这样的图像格式，这会大大减小尺寸。

有什么解决方法吗？让我知道

# java - 如何在 jQuery ajax 调用中接受 Spring MVC 控制器中的 JavaScript 数组参数？

> ID：14574639
> 
> 赞同：0
> 
> 时间：2013-01-29T02:20:58.593
> 
> 标签：java, spring, jquery, spring-mvc

我有一个像这样的 jQuery ajax 调用：

```
var arr = ["a", "b", "c"];
$.get("/test", {testArray: arr}, function(data) {
    alert(data);
}); 
```

服务器端：

```
@RequestMapping(value = "/test", method = RequestMethod.GET)
public String addAnotherAppointment(
        HttpServletRequest request,
        HttpServletResponse response,
                    @RequestParam("arr") arr,
        Model model,
        BindingResult errors) {
} 
```

那么如何接收参数呢？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-29T03:04:21.547

如果您使用 spring 3.0++，请使用“@ResponseBody”注解。

你想发送一个 json 请求，并接收来自 json 的响应吗？如果是这样，您将像这样更改您的代码。

```
var list = {testArray:["a", "b", "c"]};
$.ajax({
    url : '/test',
    data : $.toJSON(list),
    type : 'POST', //<== not 'GET',
    contentType : "application/json; charset=utf-8",
    dataType : 'json',
    error : function() {
        console.log("error");
    },
    success : function(arr) {
        console.log(arr.testArray);
        var testArray = arr.testArray;
         $.each(function(i,e) {
             document.writeln(e);
         });
    }
  }); 
```

服务器端：

1.  创建自己的“Arr”类。

    ```
    public class Arr {
     private List<String> testArray;
     public void setTestArray(List<String> testArray) {
         this.testArray = testArray;
     }
     public List<String> getTestArray() {
         return testArray;
     }
     } 
    ```

    和

    ```
    @RequestMapping(value = "/test", method = RequestMethod.POST)
    @ResponseBody// <== this annotation will bind Arr class and convert to json response.
       public Arr addAnotherAppointment(
       HttpServletRequest request,
        HttpServletResponse response,
        @RequestBody Arr arr, 
        Model model,
        BindingResult errors) {
            return arr;
    } 
    ```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-29T05:41:48.527

更改`@RequestParam("arr") arr,`为`@RequestParam("testArray") String[] arr`

还将您的 HTTP 方法从更改`get`为`post`

请注意 @RequestParam 值必须与从 jquery ajax 发送的参数名称匹配。在您的情况下，参数名称是`testArray`，值是`arr`

# javascript - 如何在javascript中不断生成值？

> ID：14574640
> 
> 赞同：0
> 
> 时间：2013-01-29T02:21:04.450
> 
> 标签：javascript, count

我有一个如下的功能代码

```
function setShort() {
var f = document.editFrm;
var x = 10;
//var project_company = f.project_parent..value;
//project_name from database, 76 = project_parent's id
if (f.project_name.value.length < 11) {
    x = f.project_name.value.length;
}
if (f.project_short_name.value.length >= 0 && f.project_parent.value == 76) {
    var w = 0;
    var y = "UKSP-LC-12-"+(w+1);
    f.project_short_name.value = y;

    return w = w+1;
    //f.project_short_name.value = project_company;
} 
```

此功能用于选择列表，这意味着如果用户单击`project_parent which id = 76`，它将显示到另一个文本字段，即`project_short_name`.

那么我如何编码它`w`不能重复为0但可以`+1`在第一次`0`保存后继续，是否可以使用循环？

或者我可以计算项目父项的行数，这样我就不需要使用循环了`w(total rows of project_parent from sql)+1`，我是循环和js的新手，希望你们有一些想法

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T02:27:58.360

`w`在函数外声明：

```
var w = 0;
function setShort() {
    // ...
    // remove line below:
    // var w = 0; 
    // ....
} 
```

# python - Python：获取未绑定的类方法

> ID：14574641
> 
> 赞同：18
> 
> 时间：2013-01-29T02:21:07.467
> 
> 标签：python, python-3.x

如何获得未绑定的类方法？

```
class Foo:
    @classmethod
    def bar(cls): pass

>>> Foo.bar
<bound method type.bar of <class '__main__.Foo'>> 
```

编辑：这是python 3。很抱歉造成混淆。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-01-29T02:32:04.423

Python 3 没有未绑定的方法。暂时忘记`classmethod`s，看看这个：

```
>>> class Foo:
...     def baz(self): pass
>>> Foo.baz
<function __main__.baz> 
```

在 2.x 中，这将是`<unbound method Foo.baz>`，但 3.x 没有未绑定的方法。

如果您想从绑定方法中获取函数，这很容易：

```
>>> foo = Foo()
>>> foo.baz
<bound method Foo.baz of <__main__.Foo object at 0x104da6850>>
>>> foo.baz.__func__
<function __main__.baz> 
```

以同样的方式：

```
>>> class Foo:
...     @classmethod
...     def bar(cls): pass
>>> Foo.bar
<bound method type.bar of <class '__main__.Foo'>>
>>> Foo.bar.__func__
<function __main__.bar> 
```

2.x 中的事情要有趣得多，因为实际上*有*未绑定的方法可以获取。您通常看不到 unbound `classmethod`，因为重点是它们在类创建时绑定到类，而不是在创建实例时未绑定然后绑定到每个实例。

但实际上，未绑定的方法只是任何为 None`instancemethod`的方法。`im_self`所以，就像你可以这样做：

```
class Foo(object):
    def baz(self): pass

foo = Foo()
bound_baz = foo.baz
unbound_baz = new.instancemethod(bound_baz.im_func, None, bound_baz.im_class) 
```

请注意，这`bound_baz.im_func`是 3.x 中的 2.x 版本，`bound_baz.__func__`但`new.instancemethod`没有 3.x 等效版本。

文档说，为了 3.x 兼容性，`new`不推荐使用 ，`types`实际上，您可以在 2.x 中执行此操作：

```
unbound_baz = types.MethodType(bound_baz.im_func, None, bound_baz.im_class) 
```

但这在 3.x 中不起作用，因为`MethodType`不带`class`参数，并且不允许其`instance`参数为`None`. 就个人而言，当我正在做一些明确的仅限 2.x 并且不能移植到 3.x 的事情时，我认为使用`new`更清晰。

无论如何，给定 2.x 中的一个类，你可以这样做：

```
class Foo(object):
    @classmethod
    def bar(cls): pass

bound_bar = Foo.bar
unbound_bar = new.instancemethod(bound_bar.im_func, None, bound_bar.im_class) 
```

如果你打印出来，你会看到：

```
<unbound method type.bar> 
```

或者，使用您的示例，使用旧式类：

```
class Foo:
    @classmethod
    def bar(cls): pass

<unbound method classobj.bar> 
```

是的，也许旧式课程的`im_class`a是一种欺骗，尽管事实并非如此，但这似乎是让旧式和新式课程在所有通常的用例。`classmethod``classobj``Foo.__class__`

# c++ - 如何在向导模式下设置 CPropertyPage 标题

> ID：14574644
> 
> 赞同：0
> 
> 时间：2013-01-29T02:21:32.117
> 
> 标签：c++, visual-c++, mfc

我正在尝试在 MFC 表单中动态设置 CPropertyPage 的标题。此表单使用向导模式创建。这是我的代码。此代码编译并运行不设置标题。如何设置向导窗口的标题？

```
BOOL MyForm::OnSetActive()
{
    CPropertySheet* pWnd = (CPropertySheet*) GetParent();
    pWnd->SetTitle(L"My Title",PSH_PROPTITLE);  
    return CPropertyPage::OnSetActive();
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T12:35:19.237

尝试在事件 WM_SHOWWINDOW 上执行此操作。在我的代码中，它的工作方式如下：

```
void CPropSIni::OnShowWindow(BOOL bShow, UINT nStatus)
{
    CPropertyPage::OnShowWindow(bShow, nStatus);

    CNodeSheet* pSheet = (CNodeSheet*)GetParent();
    if ( (bShow==TRUE) && (pSheet->IsWizard()) )
    {   
        CString strTemp;
        pSheet->GetWindowText(strTemp);     

        CString strCaption;
        strCaption = CustomFormat(CART_CAPTION_FORMAT_ADD, 2, strTemp, pSheet->m_Name);

        CPropertyPage::OnSetActive();
        pSheet->SetTitle(strCaption);
    }
} 
```

# spring - 如何 jUnit 测试休眠事务？

> ID：14574646
> 
> 赞同：0
> 
> 时间：2013-01-29T02:22:04.563
> 
> 标签：spring, hibernate, junit, transactions

我有一个看起来像这样的事务方法：

```
@Transactions
public processTransaction(MyAPi api); 
```

为了确保休眠事务正常运行，我想测试数据库是否在 Junit 中回滚。

我们该怎么做呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T12:59:37.860

看看[DBUnit](http://www.dbunit.org/) - 它旨在帮助进行这种确切类型的测试。您可以定义表状态，建立内存或物理数据库，然后执行测试并比较表状态。您还可以使用它在每次测试运行之前提供已知状态的数据库。

# c# - MVC 文件夹选择器

> ID：14574653
> 
> 赞同：0
> 
> 时间：2013-01-29T02:23:44.523
> 
> 标签：c#, asp.net-mvc

我将 c# ASP.NET MVC 与剃须刀引擎一起使用。

我已经做了一个文件选择器，但接下来我需要做的是一个**文件夹选择器**。一旦用户选择了文件夹，我需要去获取该文件夹中的所有文件并进行一些处理如果您已经完成了文件夹选择器，请告诉我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T02:37:45.963

在 ASP.Net/MVC 或任何其他仅在浏览器中使用 HTML/JavaScript 的技术中没有办法做到这一点：HTML 不提供在客户端浏览文件夹的能力，也不提供从给定文件夹上传所有文件的能力。

您需要某种完全受信任的客户端代码来执行此操作。

# android - 在环境、ViewClient 中设置 ANDROID_HOME

> ID：14574659
> 
> 赞同：2
> 
> 时间：2013-01-29T02:23:58.663
> 
> 标签：android, monkeyrunner, androidviewclient

我正在使用 viewclient 在我的测试中按下按钮。但是我没有设置 ANDROID_HOME 路径，尽管我在环境变量中设置了它。我正在使用 windows7 操作系统。

```
File "F:\Example\AndroidViewClient\src\com\dtmilano\android\viewclient.py", line 870, in _init_()
File "F:\Example\AndroidViewClient\src\com\dtmilano\android\viewclient.py", line 986 in _ViewClient_obtainAdbPath 
```

它引发了以下异常

```
('adb="%s" is not executable. Did you forget to set ANDROID_HOME in the environment?' %adb)
Exception: adb="%s" is not executable. Did you forget to set ANDROID_HOME in the environment? 
```

我的环境变量

```
ANDROID_HOME=C:\adt-bundle-windows-x86_64\adt-bundle-windows\sdk\platform-tools
ANDROID_VIEW_CLIENT_HOME=C:\Users\testing\Downloads\AndroidViewClient-version_2_3_1\AndroidViewClient-version_2_3_1\AndroidViewClient 
```

它看起来到处都是，弄乱了。所以想请教专家并在这里发布。提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T18:36:48.880

升级到最新的[AndroidViewClient](https://github.com/dtmilano/AndroidViewClient)版本 (2.3.4) 应该可以解决其中的一些**Windows**问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-08-02T09:00:21.783

```
set ANDROID_HOME=c:\Users\Administrator\AppData\Local\Android\android-sdk 
```

帮我解决了

```
RuntimeError: The '<ANDROID_HOME>/tools' directory is missing.
Please set the ANDROID_HOME environment variable to a proper Android SDK installation. 
```

和

```
RuntimeError: Unable to locate the "adb" command.  
Either set the ANDROID_HOME environment variable or add the location of the "adb" command to your path. 
```

# iphone - 使用 VBO 上传顶点后更改顶点的颜色

> ID：14574660
> 
> 赞同：2
> 
> 时间：2013-01-29T02:24:08.370
> 
> 标签：iphone, objective-c, opengl-es, opengl-es-2.0, vbo

**编辑：Apple 在此链接上找到的工作编码示例：http: [//developer.apple.com/library/ios/#documentation/3DDrawing/Conceptual/OpenGLES_ProgrammingGuide/TechniquesforWorkingwithVertexData/TechniquesforWorkingwithVertexData.html](http://developer.apple.com/library/ios/#documentation/3DDrawing/Conceptual/OpenGLES_ProgrammingGuide/TechniquesforWorkingwithVertexData/TechniquesforWorkingwithVertexData.html)**

在为 200 x 200 正方形的固定网格创建顶点后，我通过使用 VBO 将顶点发送到 GPU 来渲染它。然后如何更新顶点的颜色？数百个顶点的颜色会经常变化——每隔几帧。

我之前解决了不使用 VBO 的问题。我创建了顶点和颜色数组，并使用以下代码来渲染顶点。我通过更新数组改变了顶点的颜色`triangleColours`：

```
-(void)render {

    glClearColor(clearColor.r, clearColor.g, clearColor.b, clearColor.a);
    glClear(GL_COLOR_BUFFER_BIT);

    [effect prepareToDraw];

    glEnableVertexAttribArray(GLKVertexAttribPosition);
    glVertexAttribPointer(GLKVertexAttribPosition, 2,
                          GL_FLOAT, GL_FALSE, 0, triangleVertices);

    glEnableVertexAttribArray(GLKVertexAttribColor);
    glVertexAttribPointer(GLKVertexAttribColor, 4,
                          GL_FLOAT, GL_FALSE, 0, triangleColours);

    glDrawArrays(GL_TRIANGLES, 0, numTriangleVertices);

    glDisableVertexAttribArray(GLKVertexAttribPosition);
    glDisableVertexAttribArray(GLKVertexAttribColor);
} 
```

虽然上面的代码有效，但它消耗了很多电池，所以现在我正在尝试用 VBO 来做。顶点不会改变位置，所以我知道 VBO 是一个不错的选择，但是改变顶点的颜色呢？

这是我当前的代码简化为仅绘制一个正方形：

**编辑：**我将如何更新下面的代码，以便在它们更改时只上传顶点颜色？VBO 设置代码和绘制代码应该如何更改？更新我的 verticesColours 颜色数组然后调用 glBufferSubData() 怎么样？

```
 // Setup vertices and VBO

    // Vertices for a single square

    const Vertex Vertices[] = {

        // position and colour
        {{-20, -20}, {1, 1, 1, 1}},
        {{-20, -20}, {1, 1, 1, 1}},
        {{-20, -20}, {1, 1, 1, 1}},
        {{-20, -20}, {1, 1, 1, 1}},
    };

    const GLubyte Indices[] = {

        0, 1, 2,
        2, 3, 0,
    };

    numIndices = sizeof(Indices)/sizeof(Indices[0]);

    [EAGLContext setCurrentContext:self.context];

    glEnable(GL_CULL_FACE);

    self.effect = [[GLKBaseEffect alloc] init];

    self.effect.transform.projectionMatrix = GLKMatrix4MakeOrtho(-50.0, 50.0,
                                                                 -50.0, 50.0,
                                                                  0.0, 1.0);

    glGenVertexArraysOES(1, &_vertexArray);
    glBindVertexArrayOES(_vertexArray);

    glGenBuffers(1, &_vertexBuffer);
    glBindBuffer(GL_ARRAY_BUFFER, _vertexBuffer);
    glBufferData(GL_ARRAY_BUFFER, sizeof(Vertices), Vertices, GL_STATIC_DRAW);

    glGenBuffers(1, &_indexBuffer);
    glBindBuffer(GL_ELEMENT_ARRAY_BUFFER, _indexBuffer);
    glBufferData(GL_ELEMENT_ARRAY_BUFFER, sizeof(Indices), Indices, GL_STATIC_DRAW);

    glEnableVertexAttribArray(GLKVertexAttribPosition);        
    glVertexAttribPointer(GLKVertexAttribPosition, 2, GL_FLOAT, GL_FALSE, sizeof(Vertex), (const GLvoid *) offsetof(Vertex, Position));
    glEnableVertexAttribArray(GLKVertexAttribColor);
    glVertexAttribPointer(GLKVertexAttribColor, 4, GL_FLOAT, GL_FALSE, sizeof(Vertex), (const GLvoid *) offsetof(Vertex, Color));

    glBindVertexArrayOES(0);

// Render

- (void)glkView:(GLKView *)view drawInRect:(CGRect)rect {

    glClearColor(0.0, 0.0, 0.0, 1.0);
    glClear(GL_COLOR_BUFFER_BIT);

    [self.effect prepareToDraw];    

    glBindVertexArrayOES(_vertexArray);   
    glDrawElements(GL_TRIANGLES, numIndices, GL_UNSIGNED_BYTE, 0);
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-29T05:08:16.773

依靠。（好词，不是吗？适用于所有情况。）

如果您确实需要以不可预知的方式改变每个顶点的颜色，那么每次绘制它们时，是的，您需要在每一帧上传顶点颜色。将顶点位置放在它们自己的（静态）VBO 中是一个不错的选择，因为这样可以让您重复使用而无需每次都上传（系统内存 <-> GPU 内存带宽始终是一种宝贵的商品），但是任何*必须*改变的东西，好吧，将*不得不*改变。

但是，如果您可以通过编程计算每个顶点的颜色，那么这就是[顶点着色器](http://www.opengl.org/wiki/Vertex_Shader)派上用场的地方。（确实，它们是用来做什么的！）希望每个顶点的颜色是以下某种组合的某种功能：

1.  每个顶点的静态数据。[您可以在VBO](http://www.opengl.org/wiki/VBO#Vertex_Buffer_Object)中上传一次并重复使用。
2.  整个数组的全局变量数据。为此，您使用[着色器制服，每次绘制只需上传一次。](http://www.opengl.org/wiki/Uniform_%28GLSL%29)
3.  如果您的平台支持，也许[vertex textures ？](http://www.opengl.org/wiki/Vertex_Texture_Fetch)

然后，您可以编写一个顶点着色器，从这些输入中计算颜色，并且每一帧您只需要重新指定着色器制服——通常总共有十几个浮点数。

所以这取决于你希望你的颜色如何改变。如果您可以使用顶点着色器，那么您确实可以在每次绘制时跳过上传。如果你不能和/或突变在顶点着色器中太复杂或太随意——你只需要在 CPU 端做，然后咬紧牙关。

# c# - 从 #2 后面的代码调用 JavaScript 函数

> ID：14574663
> 
> 赞同：0
> 
> 时间：2013-01-29T02:24:22.297
> 
> 标签：c#, asp.net

我有一个 Web 控件（称为`A`）和一个网页（称为`Default`）。

`Default`有没有办法从属于`A`而不是使用调用 JavaScript 函数`OnClientClick`？

我正在使用以下内容`Page_Load`（`Default.aspx.cs`这是我的 JavaScript 函数的来源）：

```
a = (A)LoadControl("~/A.ascx");
a.ID = "AgControl";
panel.Controls.Add(a); 
```

在 Default.aspx 我有以下内容：

```
<asp:Button ID="Button1" runat="server" Text="Button" 
OnClick="Button1_OnClick"
OnClientClick="JavaScript()"  /> 
```

DefaultPage.aspx.cs：

```
protected void Button1_OnClick(object sender, EventArgs e)
   {
  String a = getValueofA();

  If (a == "1")
  {
            //OnClientClick code goes here
  }
  else If (a == "2")
  {
     //No OnClientClick code goes here
  }
 } 
```

`OnClientClick="JavaScript()`我的目标是仅在“if 语句”的第一部分 删除和编码它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T02:27:08.767

[ScriptManager.RegisterStartupScript](http://msdn.microsoft.com/en-us/library/bb359558.aspx)

例子：

```
ScriptManager.RegisterStartupScript(
    Page,
    Page.GetType(),
    "uniquescriptkey", 
    "alert('hi');",
    true
); 
```

# coldfusion - 如何动态循环遍历结构数组

> ID：14574673
> 
> 赞同：2
> 
> 时间：2013-01-29T02:25:31.820
> 
> 标签：coldfusion, coldfusion-9

我需要从结构数组中创建一个查询对象。该数组有大约 200 个键，数组内的结构在名称、大小和深度上各不相同。这是一个节点的样子：

![我需要循环并创建查询对象的结构数组](../Images/705d04bc10dc7ed9f11e6902ba9f34eb.png)

我已经让它对 array[#i].adGroupId 和 array[#i#].userStatus 工作正常，但我需要在将结构值添加到查询之前检查它是否存在。例如，criteria.text 并不总是在结构中，所以我需要检查，但不确定如何。这是到目前为止的代码，但它总是跳过criteria.text 和bids.maxCpc.amount.microAmount。

```
<cfset vColumns = "AdGroupID,KeywordText,Status,MaxCPC" />
<cfset vColumnValue = "AdGroupID,criterion.text,userStatus,bids.maxCPC" />
<cfset loopnum = 1>
<cfset myquery = QueryNew(vColumns) >
<cfloop array="#aKeywordsAll#" index="i">
    <cfset temp = QueryAddRow(myquery, 1)>
    <cfset loopNum2 = 1>
    <cfloop list="#vColumnValue#" index="j">                
        <cfif structKeyExists(aKeywordsAll[loopnum],j)>
            <cfset QuerySetCell(myquery, listGetAt(vColumns, loopNum2), aKeywordsAll[loopnum][j])>
        <cfelse>
            <cfset QuerySetCell(myquery, listGetAt(vColumns, loopNum2), "test")>
        </cfif>
        <cfset loopNum2++ />
    </cfloop>
    <cfset loopnum++ />
</cfloop> 
```

这是创建的查询对象。它说“测试”，但希望它能给出值：

![从我的疯狂循环中创建的查询对象](../Images/6e30025cd0ea70c2466a8b3211f12835.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-29T12:59:25.167

您的问题是 StructKeyExists 函数正在寻找一个字面上名为“criterion.text”的键（例如） - 这是可能的，而不是一个名为“criterion”的键中的“text”键。我创建了一个 UDF，应该可以为您解决问题：

```
 <cffunction name="StructGetByKeyList">
    <cfargument name="struct">
    <cfargument name="key">

    <cfset var result = "">

    <cfif StructKeyExists(struct,ListFirst(key,"."))>
        <cfif ListLen(key,".") GT 1>
            <cfreturn StructGetByKeyList(struct[ListFirst(key,".")],ListRest(key,"."))>
        <cfelse>
            <cfreturn struct[key]>
        </cfif>
    <cfelse>
        <cfreturn "">
    </cfif>
 </cffunction> 
```

然后你可以调用 Len(StructGetByKeyList(aKeywordsAll[loopnum],j)) 而不是 structKeyExists(aKeywordsAll[loopnum],j)。

对于这一行：

```
 <cfset QuerySetCell(myquery, listGetAt(vColumns, loopNum2), aKeywordsAll[loopnum][j])> 
```

用这个：

```
 <cfset QuerySetCell(myquery, listGetAt(vColumns, loopNum2), StructGetByKeyList(aKeywordsAll[loopnum],j))> 
```

# drupal - Drupal 7 - 更改文章视图的布局

> ID：14574680
> 
> 赞同：0
> 
> 时间：2013-01-29T02:26:21.760
> 
> 标签：drupal, layout, view, slideshow, article

我试过用谷歌搜索这个，但它太具体了，我没有遇到任何相关的东西。我目前有一个文章帖子的视图幻灯片，它看起来像这样： ![在此处输入图像描述](../Images/562ac9da2659457a823ca0def77ec846.png)

但我希望它看起来像这样： ![在此处输入图像描述](../Images/75ca4a23adc4b29325d08b38bd3924b9.png)

基本上我只想要两列，用于图像和正文，而不是两行。我试图在视图字段设置中将图像和正文更改为“内联”，但这只是将正文文本与图像旁边的最后一行对齐，其余部分仍在图像下方。

我有一种感觉，我可以在 CSS 中完成此操作，但如果图像太大，如果图像和文本可能重叠，我无法弄清楚如何做到这一点。

在这件事上的任何帮助，你将极大地帮助我！先感谢您！

更新：我了解基本的 CSS，这不是关于是否使用 CSS 或 CSS 是什么的帖子，具体来说是要使用 CSS 中的哪些属性，我尝试将每个字段设置为唯一的 CSS 类和位置：absolute然后是 right:0px/left:0px 与上述相同的问题，还有其他建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T06:49:28.573

你是对的——这几乎是 CSS 基础知识。[您可以在http://w3schools.com](http://w3schools.com)获得出色的参考资料，以回答您的 CSS 和标记相关查询。

我建议使用视图工具向字段添加一些独特的类，以便于设置样式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-01T11:26:34.847

[这里](http://www.acquia.com/blog/drupal-how-get-inline-images-your-drupal-site)有一篇关于你想要做什么的好文章。

另一种解决方案：您可以使用“开放框架”。它是 drupal 7 的主题，基于 bootstrap。那么你可以使用它的类。 就像我在自己的网站中使用的[明信片布局一样：](https://openframework.stanford.edu/postcard-layouts) [quicklearn.ir](http://quicklearn.ir/) 单击视图中字段会话中的最后一个字段，然后转到 REWRITE RESULTS 并用该类包装您的字段。像这样：

```
<div class="postcard-right-wrap">
<div>[field_image]</div>
<div><h3>[title]</h3></div>
<div>[body-summary]</div>
</div> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-29T09:30:01.683

使用[所见即所得](http://drupal.org/project/wysiwyg)的编辑器，你可以很容易地做到这一点。例如，您可以与 CKEditor 一起使用。您也可以使用纯 html 来完成，请参阅此[示例](http://www.echoecho.com/htmlimages08.htm)或仅使用 CSS

# ios - 委托模式，OOP 中界面设计的花哨名称？

> ID：14574685
> 
> 赞同：2
> 
> 时间：2013-01-29T02:27:22.870
> 
> 标签：ios, objective-c

我是来自 C#/Java 背景的 iOS 新手。我正在阅读讨论委托模式及其重要性的文章。一旦我开始使用它，我注意到它实际上只是设计接口并使用定义的方法传递数据。这种说法是真的吗？对于了解 .net 或 java 的 iOS 大师，我可以说委托模式只是接口设计，并使用方法在实现该接口的类之间传递数据吗？还是目标 C 的动态特性让我忽略了其他一些强大的方面？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-29T03:14:09.960

委托不同于界面设计。

Java 和 C# 中的接口是方法声明的集合。接口是一种类（即类型），其他类可以实现它。如果一个类实现了一个接口，这意味着它实现了该接口声明的所有方法。

使用接口进行编程的价值在于，您可以创建方法来接受实现该接口的对象，而无需共享具体的类层次结构。

面向对象编程中出现的一个典型问题是如何以完全抽象的方式根据一些其他操作来定义一个操作，只依赖于对象的一些简单属性。例如，您可能希望实现一个排序算法，该算法可以在任何提供 compareTo 方法的对象上工作，该方法比较两个对象以查看它们的顺序。没有接口，您只能编写适用于所有对象类型的排序算法来自一个共同的超类。对于接口，对于每个希望能够排序的类来说，实现`Sortable`声明单个方法`compareTo`（比如说）的接口就足够了。

接口可以以许多其他方式使用，但它们提供的基础是基于“契约”的更灵活的编程风格。

委托是指更具体的东西。当您需要提供一个作为现有类（或一组类）的变体而没有子类化的类时，委托会有所帮助。使用委托（又名委托模式），您可以创建一个新类，该类包含现有类（委托）的实例，并通过简单地调用委托（它委托）来实现其大部分方法。一个典型的例子是服务的缓存实现。原始服务关闭并获取一些数据（假设它有一个`fetch`方法），这可能很昂贵。所以我们想缓存这个。委托将简单地存储原始服务和缓存：然后当您调用它的`fetch`方法时，它会检查缓存，并且只有当缓存未命中时，它才会调用委托的`fetch`. 只要缓存实现实现与委托相同的接口，就可以在其位置使用它。

因此，在委托提供了一种在严格的类层次结构之外的编程机制的意义上，接口的概念有一些共性，并且（很大程度上）通过使用接口使之成为可能，但是接口还有许多其他用途也是。

# windows - 用于搜索文件然后检查权限的 Windows 命令行脚本

> ID：14574687
> 
> 赞同：0
> 
> 时间：2013-01-29T02:27:47.867
> 
> 标签：windows, file, shell, command-line, batch-file

我有一个正在测试的命令行脚本，用于在整个目录中搜索给定文件（例如 cmd.exe）。该脚本运行良好，并返回每个找到的文件的完整路径。

```
for /r C:\ %i in (*) do @echo %~fi | find /I "cmd.exe" 
```

现在我想扩展这个脚本，一旦找到文件，检查权限（例如 icacls %~fi）。如果可能的话，我想把它保留在命令行上。

非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T16:34:35.973

```
for /f "tokens=*" %I in ('dir /b /s cmd.exe') do icacls "%I" 
```

那是你要找的吗？如果您不想在单独的行上 cd 到 c:\ ，请更改它：

```
pushd "\" && for /f "tokens=*" %I in ('dir /b /s cmd.exe') do (icacls "%I") && popd 
```

你去吧。单线。:)

# java - 在Java中用正则表达式提取双引号之间的子字符串

> ID：14574689
> 
> 赞同：8
> 
> 时间：2013-01-29T02:28:04.973
> 
> 标签：java, regex

我有一个这样的字符串：

```
"   @Test(groups = {G1}, description = "adc, def")" 
```

我想在Java中使用正则表达式提取“adc，def”（不带引号），我该怎么做？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-01-29T02:31:22.267

如果你真的想使用正则表达式：

```
Pattern p = Pattern.compile(".*\\\"(.*)\\\".*");
Matcher m = p.matcher("your \"string\" here");
System.out.println(m.group(1)); 
```

解释：

```
.*   - anything
\\\" - quote (escaped)
(.*) - anything (captured)
\\\" - another quote
.*   - anything 
```

但是，不使用正则表达式要容易得多：

```
"your \"string\" here".split("\"")[1] 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-09-24T10:24:26.390

其实你会得到`IllegalStateException`

```
public class RegexDemo {
    public static void main(String[] args) {
        Pattern p = Pattern.compile(".*\\\"(.*)\\\".*");
        Matcher m = p.matcher("your \"string\" here");
        System.out.println(m.group(1));
    }
} 
```

它给：

```
Exception in thread "main" java.lang.IllegalStateException: No match found
    at java.util.regex.Matcher.group(Matcher.java:485)
    at RegexDemo.main(RegexDemo.java:11)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:606)
    at com.intellij.rt.execution.application.AppMain.main(AppMain.java:134) 
```

使用前`group()`，您需要调用`find()`或`matches()`。

简单测试，例如：

```
public class RegexTest {
    @Test(expected = IllegalStateException.class)
    public void testIllegalState() {
        String string = new String("your \"string\" here");
        Pattern pattern = Pattern.compile(".*\\\"(.*)\\\".*");
        Matcher matcher = pattern.matcher(string);

        System.out.println(matcher.group(1));
    }

    @Test
    public void testLegalState() {
        String string = new String("your \"string\" here");
        Pattern pattern = Pattern.compile(".*\\\"(.*)\\\".*");
        Matcher matcher = pattern.matcher(string);

        if(matcher.find()) {
            System.out.println(matcher.group(1));
        }
    }
} 
```

# php - 多个文件上传

> ID：14574690
> 
> 赞同：0
> 
> 时间：2013-01-29T02:28:06.517
> 
> 标签：php

我不能上传超过 3 个文件

```
<input type="file" name="file[]" multiple/> 
```

在 var_dump 上显示 Array Empty，但当有 3 个或更少时，它会正确显示每个文件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T15:27:58.440

检查你的 js 和 php 代码。根据规范，可以在前端设置js，后端设置php的上传文件计数值。看起来，您的数组位于服务器 php-script 过滤器中。

# php - PHP URI 映射与函数

> ID：14574692
> 
> 赞同：0
> 
> 时间：2013-01-29T02:28:23.227
> 
> 标签：php, routing, uri

我正在开发一个 php 应用程序，它将使用与 MVC 系统相同的主体，但是，我不想使用类。我想要完成的是拥有 SEO URL（mysite.com/product/Some-Cool-Product/123）而不需要类。这些方法将改为使用函数。我遇到的最大问题是将 URI 映射到适当的文件和函数。例如，mysite.com/members/profile/123 将指向文件“sources/members.php”，然后调用“profile”函数。导致问题的原因是添加了为我的源文件使用目录的能力。如果我想使用诸如 'mysite.com/forums/threads/view/12345' 之类的 url，将指向 'sources/forums/threads.php 并以 id 作为参数调用'view' 函数。

有人可以帮我解决这个问题吗？这是我到目前为止所拥有的。

 `````
<?php 

$uri = $_SERVER['REQUEST_URI'];

$uri = ltrim($uri, '/');

$uri_segments = explode('/', $uri);

$invalid = 0;

foreach($uri_segments as $key => $val){

    if(!preg_match('^[a-z0-9]^', $val)){

        $invalid = $invalid + 1;

    }

}

if($invalid > 0){

    die('Could not execute the script... the uri contains invalid characters.');

} else {

    //Load the script.

}

?> 
````  `* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T02:52:20.217

我将假设您在此处使用 LAMP 堆栈（Linux/Apache/MySQL/PHP）。

如果您使用 Apache 作为 Web 服务器，您可以在您的公共目录中设置一个 .htaccess 文件，并使用重写规则自动为您执行此操作。所以当有人打的时候：

[http://www.mysite.com/forums/threads/view/12345](http://www.mysite.com/forums/threads/view/12345)

它会自动加载**“sources/members.php”**并从 URL 中传递 id 作为 get 参数，该参数将显示在 $_GET 数组中。

在您的索引 (index.html/index.php) 文件所在的目录中，创建一个名为**“.htaccess”的文件**

**您的.htaccess**文件的一个示例是：

```
 RewriteEngine On
    RewriteRule ^forums/threads/view/([0-9]+) sources/members.php?thread_id=$1 
```

如果这不起作用，可能是因为您的 Apache 配置配置错误或重写规则格式错误。无论哪种方式，这都比使用 PHP 快得多，不仅在代码编写方面而且在性能方面也是如此。

这里有一个可能有帮助的外部资源：http: [//corz.org/serv/tricks/htaccess2.php](http://corz.org/serv/tricks/htaccess2.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T02:39:15.987

使所有不是文件的请求都通过 index.php。制作一个Router.php - 在index.php 中需要它 - 在Router.php 中解析请求并从那里包含您需要的文件。

在您的 Router.php 中，您至少需要知道要在 uri 中查找的模式。尝试以某种形式的 XML 映射此模式，任何无法与您的模式匹配的内容都应该转到 404 页面。

对不起，含糊不清..但这是一个大问题。有人可以详细说明它很长一段时间。``

# c# - 将字符串转换为 Twilio 的“URL 安全”字符串

> ID：14574695
> 
> 赞同：10
> 
> 时间：2013-01-29T02:28:49.803
> 
> 标签：c#, url, twilio

这不是 Twilio 特定的，但该问题确实会导致 Twilio API 调用失败。

我想通过 Twilio 的实验室生成一个 XML 文件：

```
http://twimlets.com/echo?Twiml=%3CResponse%3E%3CSay%3EHi+there.%3C%2FSay%3E%3C%2FResponse%3E 
```

上面的 URL 作为 API 中的参数非常有用，如果您使用浏览器查看输出，显然可以使用。

我还可以在浏览器中查看以下内容，它工作正常，但是这个版本的 URL 作为 Twilio API 的参数失败了

```
http://twimlets.com/echo?Twiml=Response><Say>Hi+there.</Say></Response> 
```

为了可读性和调试，我*更*喜欢使用第二个 URL。C# 中是否有库或其他方式将第二个漂亮的 URL 转换为第一个，将 %3C 替换为 '<' 字符等等？然后我可以在将其发送到 API 之前进行替换，因为我的应用程序会四处推送并将漂亮的版本存储在其他任何地方。我当然可以自己写一个来进行转换，但这似乎是一个常见问题。谢谢！

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-01-29T02:40:14.217

这可能是您正在寻找的吗？

```
private void Form1_Load(object sender, EventArgs e)
{
    string encoded = "http://twimlets.com/echo?Twiml=%3CResponse%3E%3CSay%3EHi+there.%3C%2FSay%3E%3C%2FResponse%3E";
   string decoded = Uri.UnescapeDataString(encoded);
} 
```

输出 - 未转义的字符串：

```
http://twimlets.com/echo?Twiml=<Response><Say>Hi+there.</Say></Response> 
```

并恢复正常：

```
string encoded = Uri.EscapeDataString(decoded); 
```

输出 - 转义字符串：

```
http://twimlets.com/echo?Twiml=%3CResponse%3E%3CSay%3EHi+there.%3C%2FSay%3E%3C%2FResponse%3E 
```

# assembly - 进位标志可以保存哪些值，以及如何在 x86 汇编中检查其状态？

> ID：14574696
> 
> 赞同：12
> 
> 时间：2013-01-29T02:28:50.433
> 
> 标签：assembly, x86, nasm

1.  进位标志可以保持什么值？它只是 0x00 和 0x01（布尔值）还是像其他 CPU 寄存器一样是 16（或 32/64）位？

2.  如何查看其状态？我是否像`cmp cf, 0x00`那时那样像普通的 CPU 寄存器一样使用它`jg <jump destination>`？

3.  我正在编写一个迷你操作系统。将它用于我自己的目的是一种好习惯，还是应该保留它以供 CPU 独占写入权限，而我所做的只是从中读取？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-01-29T02:34:17.367

这是一个标志，它只能保持真或假（技术上是 1 或 0，但*实际上*是如图所示的真值）。

在使用它方面，不，您不要将它与某物进行比较然后使用`jg`. 它与其他标志处于*同一*抽象级别，因此您可以使用：

```
jc somewhere         ; jump if carry flag is set
jnc somewhere_else   ; jump if carry flag is not set 
```

它是由某些指令自动设置的，例如，要添加两个值并检测进位，您可以使用以下内容：

```
add ax,bx
jc  too_big 
```

而且，虽然它主要由这些指令设置，但您也可以使用`stc`(set)、`clc`(clear) 和`cmc`(complement) 手动设置。例如，如果您正在进入一个将值结转到下一次迭代的循环，那么事先清除它通常很有用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-05-01T15:18:47.997

这本小书曾经与 borland turbo 汇编器一起提供，其中列出了所有 x86 指令，以及它们的 cpu 周期数和每个型号的处理器分别受影响的标志……我建议你去找其中一本书阅读。 .. 2：不，您不能直接在标志 REGISTER 上使用 cmp 等，因为它不是内存，而是 cpu 中的寄存器，但是您可以使用几个指定的结果或先将整个东西移到堆栈上，然后再移入 ram 或与下面的说明相反

CLC（清除（0）进位位） STC（将进位标志设置为 1） JC（如果进位设置则分支） JNC（如果未设置进位则分支） PUSHF（将标志弹出到堆栈） POPF（将堆栈上的最新条目移动到标志寄存器中）

如果我没记错的话……可能还有更多的做事方式。

# c# - 在 Windows 8 商店应用程序中插入 sqlite 数据库总是返回“忙碌”

> ID：14574697
> 
> 赞同：0
> 
> 时间：2013-01-29T02:28:51.690
> 
> 标签：c#, sqlite, windows-8

我正在尝试关注以下文章：[http ://wp.qmatteoq.com/import-an-already-existing-sqlite-database-in-a-windows-8-application/](http://wp.qmatteoq.com/import-an-already-existing-sqlite-database-in-a-windows-8-application/)

我有以下类将复制现有的 sqlite 数据库：

```
public class DataHandler
    {
        public static string GetPath()
        {
            return ApplicationData.Current.LocalFolder.Path + @"\myDB";
        }

        public async void CopyDatabase()
        {
            bool isDatabaseExisting = false;

            try
            {
                StorageFile storageFile = await ApplicationData.Current.LocalFolder.GetFileAsync("myDB");
                isDatabaseExisting = true;
            }
            catch
            {
                isDatabaseExisting = false;
            }

            if (!isDatabaseExisting)
            {
                StorageFile databaseFile = await Package.Current.InstalledLocation.GetFileAsync("myDB");
                await databaseFile.CopyAsync(ApplicationData.Current.LocalFolder);
            }
        }
    } 
```

我可以使用以下代码成功查询数据库：

```
SQLiteAsyncConnection conn = new SQLiteAsyncConnection(DataHandler.GetPath());
            var query = conn.Table<appSetting>().Where(x => x.appSettingId == id);
            var result =  await query.ToListAsync();

            foreach (var item in result)
            {
                this.appSettingId = item.appSettingId;
                this.appVersion = item.appVersion;
            } 
```

但是，每当我尝试使用以下代码进行插入时，我总是会收到“忙碌”的 sqliteexception

```
appSetting app = new appSetting{
                    appSettingId = 2,
                    appVersion = "2.0"
                };

                var conn = new SQLiteAsyncConnection(DataHandler.GetPath());
                var result = await conn.InsertAsync(app); 
```

知道为什么这种情况继续发生吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T11:27:14.023

我不确定，它将如何工作`c#`。通常，`sqlite`如果您打开数据库，则在您的操作完成后您应该打开`close`它。

以防万一，如果您忘记了`close`您的`sqlite database`，它会保持忙碌。

# html - 为 div 标签内的背景图片提供标题属性

> ID：14574701
> 
> 赞同：0
> 
> 时间：2013-01-29T02:29:33.670
> 
> 标签：html, css

是否有一种解决方案可以将标题属性添加到显示为 div 标签的背景图像的图像中。当前的代码就像

```
<div style="background:transparent url(image/smiley.jpg) left bottom; cursor:pointer;"> 
```

我想给背景图片smiley.jpg添加一个标题属性“Smiley”

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T02:31:37.870

您可以`title`在`div`. 由于`background-image`默认情况下重复，它将填充`div`.

```
<div title="Smiley" style="background:transparent url(image/smiley.jpg) left bottom; cursor:pointer;"> 
```

但是假设图像被设置为`no-repeat`并且小于它`div`本身。在这种情况下，只有当光标位于`background-image`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-28T19:07:15.897

我建议在 div 中添加替代文本，然后将文本缩进设置为负值，例如 -9999px。通过这种方式，Google 可以阅读副本，但在浏览器中查看时，文本会从页面上移开。

# python - 使用python访问目录和文件

> ID：14574705
> 
> 赞同：1
> 
> 时间：2013-01-29T02:30:27.170
> 
> 标签：python

我想通过 python 脚本分析我的数据。数据在多个文件中，它们保存在不同的目录中。此外，这些目录中的文件名称相同，但扩展名不同。我只想通过提供一个输入文件名来获得我的输出。例如

我的文件名是“测试”，这将是我的输入

实际文件名是假设 test.data1, test.data2, test.data3, test.data4 其中两个输入文件，如 test1.data1 和 test2.data2 保存在 test1, test2 目录中。test3 和 test4 是输出目录。我的目标是通过 python 脚本访问这些目录，然后访问这些数据文件。所有四个目录都存在于我的机器中，但将通过脚本生成扩展名为 .data3 和 .data4 的两个输出文件。我已经开始使用以下脚本，但我无法完成它。任何帮助将不胜感激

```
import re
import numpy
import os
import glob
filename =raw_input('enter the input file name: ')
lines = open(input.data1, 'r').readlines()
lines1 = open(input.data2, 'r').readlines()
outfile1=open(input.data3, 'w')
outfile2=open(input.data4, 'w') 
```

最佳修行

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-29T02:54:20.180

好的，所以您在访问文件和目录时遇到问题......如果您想查看目录中的文件，您可以执行以下操作：

```
for files in os.listdir("./Downloads"):
  print files 
```

如果您想从用户那里获取文件名并打开该文件进行阅读：

```
filename = raw_input("what is the file name? ")
try:
    fp = open(filename, "r")
catch:
    print "couldn't open file" 
```

现在您的代码中的主要问题之一是您要求提供文件名：

```
filename =raw_input('enter the input file name: ') 
```

然后你永远不会使用它。相反，您尝试打开`input.data1`甚至没有在您的程序中定义的。如果你想打开一个硬编码路径的文件，你可以这样做：`'input.data1'`假设你的文件被称为'input.data1'

您还可以在硬编码的特定路径中打开文件，例如：

```
lines = open("./input/data1", "r").readlines() 
```

希望对您有所帮助，您的问题不是很具体，因此很难给出更好的答案。

# python - python子进程MP3Gain

> ID：14574707
> 
> 赞同：0
> 
> 时间：2013-01-29T02:30:45.103
> 
> 标签：python, subprocess

我正在尝试编写一个脚本，我想要它做的一件事是调用 MP3Gain 的命令行版本并将我正在使用的文件传递给 MP3Gain 以标准化音量。这是我的代码：

```
import subprocess

class normalize():

    def __init__(self, file):  
        self.FileName = file  

    def work(self):
        command = [r"mp3gain.exe", "-r", r"-c ", self.FileName]
        subprocess.Popen(command,shell=True,stdout=subprocess.PIPE)

if __name__ == "__main__":
    test = normalize(r"C:\Users\CPC\Desktop\2013-01-20.mp3")
    test.work() 
```

如果我使用相同的代码并打开不同的程序，它工作正常。如果我让程序将“命令”变量发送到文本文件，然后在 cmd 中将文本文件中的内容作为命令输入，它也可以正常工作。因此，python 子进程模块和 MP3Gain 之间似乎存在某种干扰。有人有这方面的经验吗？有没有其他方法可以完成同样的事情？任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-22T08:46:54.253

我遇到了同样的问题，事实证明，您需要从标准错误读取程序的输出，而不是标准输出

# python - 如何使用python22检查进程是否正在运行？

> ID：14574714
> 
> 赞同：0
> 
> 时间：2013-01-29T02:32:10.320
> 
> 标签：python

我需要制作一个Python2.2程序来检查injector.exe进程是否启动，如何？

```
import win32ui

def WindowExists(classname):
    try:
        win32ui.FindWindow(classname, None)
    except win32ui.error:
        return False
    else:
        return True

if WindowExists("DropboxTrayIcon"):
    print "Dropbox is running, sir."
else:
    print "Dropbox is running..... not." 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T02:44:03.373

一般来说[，这里](http://mail.python.org/pipermail/python-win32/2003-December/001482.html)很好地描述了您正在寻找的内容。谷歌搜索有帮助:)

# javascript - Jasmine 测试套件挂在 chrome 中

> ID：14574722
> 
> 赞同：1
> 
> 时间：2013-01-29T02:32:35.520
> 
> 标签：javascript, google-chrome, jasmine

我的测试套件变得有点大，现在它在运行中途挂在 chrome 中。它将“坚持”在规范 86 附近，并且似乎暂时什么都不做。

有没有人遇到过这个？解决方案是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-11-21T19:09:31.287

检查你的记忆。如果你正在泄漏（就像 Sencha Touch 那样），你会看到这个确切的行为。

# vb.net - dBNull.value 和是运算符

> ID：14574724
> 
> 赞同：1
> 
> 时间：2013-01-29T02:32:36.353
> 
> 标签：vb.net, visual-studio-2008, operator-keyword, dbnull

我正在将 VB2005 Web 应用程序移植到 VB2008，但在编译时遇到了问题。

问题是在我尝试编译项目时引起的，我得到这个错误就行了：

`If m Is DBNull.Value...`

错误：

```
'Is' operator does not accept operands of type 'Integer'. 
Operands must be reference or nullable types. 
```

代码：

```
Public Shared Function getNextID(ByVal t As String, ByVal f As String)

        Dim m = 0

        Dim c As New Data.SqlClient.SqlConnection
        c = getConn()
        c.Open()

        Dim s As String
        s = "SELECT MAX(" & f  & ")AS max FROM " & t

      Dim q As New Data.SqlClient.SqlCommand(s, c)
        Dim r = q.EmecuteReader

        While r.Read
            m = r.GetValue(0)
        End While

        If m Is DBNull.Value Then
            m = 1
        Else
            m += 1
        End If

        r = Nothing
        q = Nothing
        c.Close()
        c = Nothing

        Return m

End Function 
```

有没有办法让这个功能在不改变的情况下运行？如果没有，我将如何解决它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-29T02:39:16.337

您的问题是以下行：

```
Dim m = 0 
```

我怀疑它在 VS2005 中工作的原因是因为`Option Strict`被关闭了，所以类型`m`默认为`Object`. 换句话说，在 VS2005 中，使用`Option Strict Off`，上面的行将相当于：

```
Dim m As Object = 0 
```

如果`m`是一个对象，那么它引用的任何值都将被*装箱*，因此该`Is`操作将被允许。但是，在您的 VS2008 项目中，我怀疑它`Option Infer`已打开（2005 年不存在的功能），因此`m`在编译时推断类型为 an，`Integer`因为您将其设置为等于整数文字（`Dim m = 0`）。换句话说，在 VS2008 中，`Option Infer On`上面的行相当于：

```
Dim m As Integer = 0 
```

由于它被声明为`Integer`类型，而不是`Object`类型，因此您不能再使用`Is`运算符了。有关这方面的更多信息可以在 MSDN 的[这个页面](http://msdn.microsoft.com/en-us/library/zcd4xwzs.aspx)上找到，其中给出了这个例子：

> 昏暗数量 = 5
> 
> *   如果 Option Infer 处于打开状态（默认），则变量采用初始化程序的数据类型。请参见本地类型推断 (Visual Basic)。
> *   如果 Option Infer 关闭且 Option Strict 关闭，则变量采用 Object 的数据类型。
> *   如果 Option Infer 关闭且 Option Strict 开启，则会发生编译时错误。

解决问题的最简单方法是简单地转`Option Infer Off`，以便它以与 VS2005 相同的方式编译。但是，如果您想离开`Option Infer On`并改为修复代码，则需要指定变量类型，如下所示：

```
Dim x As Object = 0 
```

您可能认为可以通过更改检查 if 的方式来修复它`m Is DBNull`。例如，以下任何一行都可以编译：

```
If Convert.IsDBNull(m) Then 
```

或者：

```
If TypeOf m Is DBNull Then 
```

但是，您会注意到这两个`If`语句中的任何一个都不会评估为真。如果`m`被声明为`Integer`，那么它永远不会是`DBNull`。如果数据库中的列曾经等于 null，则以下行将引发异常，因为它会尝试将`DbNull`对象强制转换`Integer`为不可能的对象：

```
m = r.GetValue(0) ' This will throw exception if column is null and m is an integer 
```

`m`变量支持等于 an`Integer`或object的唯一方法`DbNull`是，如果它被声明为`Object`.

如果项目有很多地方没有指定类型，像这样，你应该关闭`Option Infer`. 如果你想把所有出问题的地方都找出来，这样你就可以在代码里把它们都修好，然后再`Option Infer`开机，你可以暂时开机`Option Infer Off`再开机`Option Strict On`。当`Option Strict`打开和`Option Infer`关闭时，除非始终指定所有变量类型，否则项目将不会编译。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T11:14:53.810

您可以使用类似的方法在数据库查询阶段消除问题

```
SELECT COALESCE(MAX(" & f & "), 0) AS max FROM " & t 
```

然后无条件地增加 m。

此外，您可以使用 ExecuteScalar 而不是 ExecuteReader，因为您只能获得一个值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-29T11:21:50.517

只需让您的变量 m 为空

```
 Dim m As Nullable(Of  Integer) 
```

# c# - 为什么此代码不会在加载时运行，仅在按钮单击时运行？

> ID：14574725
> 
> 赞同：0
> 
> 时间：2013-01-29T02:32:39.357
> 
> 标签：c#, winforms, c#-4.0, onclick, onload-event

我有以下工具。底部的预设是从 XML 文件加载的。我不能在加载时将渐变应用于预设（标签），只有当按钮调用代码时。

见下文，加载时，点击按钮：

![CSSGM1](../Images/bced695670f625eefd6776c58e7466cf.png) ![CSSGM2](../Images/4d40d23ffb34c80920b6cbe0bac7994f.png)

该表单名为Main，相关代码如下所示：

```
private void Main_Load(object sender, EventArgs e)
{
    Stop1.BackColor = Gradient.ForeColor;
    Stop2.BackColor = Gradient.BackColor;
    Populate(Gradient.ForeColor);

    // If XML exists etc snipped
    XmlDoc = XDocument.Load("palette.xml");

    IEnumerable<XElement> cssGM = XmlDoc.Root.Elements();
    Label[] Label = new Label[cssGM.Count()];

    for(int i = 0; i < cssGM.Count(); i++)
    {
        Label[i] = new Label();
        Label[i].Name = "Saved" + i.ToString();
        Label[i].ForeColor = ColorTranslator.FromHtml(cssGM.ElementAt(i).Elements().ElementAt(0).Elements().ElementAt(1).Value);
        Label[i].BackColor = ColorTranslator.FromHtml(cssGM.ElementAt(i).Elements().ElementAt(1).Elements().ElementAt(1).Value);
        Label[i].BorderStyle = BorderStyle.FixedSingle;
        Label[i].Location = new System.Drawing.Point(i*54+2, 0);
        Label[i].Size = new System.Drawing.Size(50, 50);
        SavedPanel.Controls.Add(Label[i]);
        //FillGradient(Label[i]);
        //Label[i].Invalidate();
        //SavedPanel.Refresh();
    }

    FillPalettes();
    //Application.DoEvents();
    //this.Invalidate();
}

public void FillPalettes()
{
    foreach(Label Palette in this.SavedPanel.Controls.OfType<Label>())
    {
        FillGradient(Palette);
    }
}

public void FillGradient(Label Target)
{
    Graphics e = Target.CreateGraphics();
    e.FillRectangle(new LinearGradientBrush(new Point(0, 0), new Point(0, Target.Height), Target.ForeColor, Target.BackColor), ClientRectangle);
}

private void button1_Click(object sender, EventArgs e)
{
    FillPalettes();
} 
```

我已经注释掉了我尝试过的东西。另外，我知道选择 XML 节点的方法很糟糕……这是我需要解决的问题。这是 XML：

```
<?xml version="1.0" encoding="utf-8" standalone="yes"?>
<!-- cssGM - Gradient palette data -->
<cssGM Version="0.3">

  <Gradient name="White to Black">>
    <Stop>
      <Location>0</Location>
      <Colour>#fffffa</Colour>
    </Stop>
    <Stop>
      <Location>100</Location>
      <Colour>#000001</Colour>
    </Stop>
  </Gradient>
  ... 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T02:49:01.213

或者，创建您自己的继承自标准的类`Label`：

```
public class GradientLabel : Label {
    protected override void OnPaint(PaintEventArgs e) {
        e.Graphics.FillRectangle(new LinearGradientBrush(new Point(0, 0), new Point(0, this.Height), this.ForeColor, this.BackColor), ClientRectangle);
    }
} 
```

然后，它会不断地被绘制。每当您更改 的`BackColor`or`ForeColor`属性时`GradientLabel`，它都会自行更新：

```
gradientLabelInstance.BackColor = Color.Green; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T02:41:32.617

Form`Loaded`事件在 Form 布局之前触发，可能所有控件都还没有准备好。

您可以尝试使用该`Shown`事件，因为届时所有控件都已准备就绪。

```
 private void Main_Shown(object sender, EventArgs e)
    {
        // all your code;
    } 
```

据我记得，从 good'ol winform 的日子开始，事件是按这个顺序排列的

1.  已加载
2.  创建控件
3.  已激活
4.  显示
5.  OnPaint

你需要等待`CreateControl`事件来创建你的`SavedPanel`，所以`Shown`事件应该没问题。

# entity-framework - 实体框架 5\. 更新多对多关系会违反主键

> ID：14574731
> 
> 赞同：0
> 
> 时间：2013-01-29T02:33:11.140
> 
> 标签：entity-framework, entity-framework-4, entity-framework-5

我见过很多这样的问题，但是那些人正在调用 .Add 方法来处理我不是的多对多关系。我正在使用 WebApi

我是否想调用 .Clear() 然后在实体框架 5 中重新添加更新的实体，或者它应该是自动的，我做错了什么？

我正在使用工作单元和通用实体框架存储库模式。

这是相关代码：

```
 public HttpResponseMessage Put(PromDto promDto)
{
    var creditCardsIds = string.IsNullOrEmpty(promDto.CreditCards) ? null : promDto.CreditCards.Split(',').Select(int.Parse);
    var branchesIds = string.IsNullOrEmpty(promDto.Branches) ? null : promDto.Branches.Split(',').Select(int.Parse);

    var promotion = Uow.Promotions.GetById(promDto.Id);

    promotion.CreditCards = creditCardsIds != null ? Uow.CreditCards.GetByPredicate(t => creditCardsIds.Contains(t.Id)).ToList() : null;
    promotion.Branches = branchesIds != null ? Uow.Branches.GetByPredicate(t => branchesIds.Contains(t.Id)).ToList() : null;

    if (ModelState.IsValid)
    {
        Uow.Promotions.Update(promotion);
        Uow.Commit();
        return new HttpResponseMessage(HttpStatusCode.NoContent);
    }

    throw new HttpResponseException(HttpStatusCode.BadRequest);
} 
```

**在上下文中**

```
modelBuilder.Entity<Branch>().
    HasMany(p => p.Promotions).
    WithMany(s => s.Branches).
    Map(
    m =>
    {
      m.MapLeftKey("BranchId");
      m.MapRightKey("PromotionId");
      m.ToTable("Branch_Promotion");
    });

modelBuilder.Entity<Promotion>().
    HasMany(tt => tt.CreditCards).
    WithMany(p => p.Promotions).
    Map(
    m =>
    {
     m.MapLeftKey("PromotionId");
     m.MapRightKey("CreditCardId");
     m.ToTable("Promotion_CreditCard");
    }); 
```

我应该叫这个吗？

```
promocion.CreditCards.Clear();
promocion.Branches.Clear(); 
```

提前致谢。吉列尔莫。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T02:55:09.123

添加这个解决了它：

```
var promotion = Uow.Promotions.GetByPredicateIncluding(p => p.Id == promotionDto.Id, a => a.CreditCards, a => a.Branches).ToList().FirstOrDefault(); 
```

它加载相关的实体。

似乎需要加载它们才能让实体框架知道它们是否是新的。

如果有人有更好的解释，请随时添加任何评论。

此致。吉列尔莫。

# ruby-on-rails - 无法让 Authlogic 在 Rspec 下工作

> ID：14574736
> 
> 赞同：1
> 
> 时间：2013-01-29T02:33:47.257
> 
> 标签：ruby-on-rails, ruby-on-rails-3, rspec, rspec2, authlogic

**spec_helper.rb** [源码](https://bitbucket.org/andey/bestofama/src/89031511e3e3/spec/spec_helper.rb?at=stackoverflow)

```
ENV["RAILS_ENV"] ||= 'test'
require File.expand_path("../../config/environment", __FILE__)
require 'rspec/rails'
require 'rspec/autorun'
require 'capybara/rspec'
require 'authlogic/test_case' # include at the top of test_helper.rb
include Authlogic::TestCase 
```

**test_spec.rb** [源](https://bitbucket.org/andey/bestofama/src/89031511e3e3/spec/requests/test_spec.rb?at=stackoverflow)

```
require 'spec_helper'

describe "Stackoverflow" do
  describe "GET /test" do
    it "is logged in #1" do
      activate_authlogic
      user = FactoryGirl.create(:user)
      UserSession.create(user)
      get page_path('test')
      response.body.should include('YES')
    end

    it "is logged in #2" do
      activate_authlogic
      user = FactoryGirl.create(:user)
      UserSession.find
      get page_path('test')
      response.body.should include('YES')
    end
  end
end 
```

**test.html.erb** [源码](https://bitbucket.org/andey/bestofama/src/89031511e3e3/app/views/pages/test.html.erb?at=stackoverflow)

```
<% if current_user %>
    YES LOGGED IN
<% else %>
    NOT LOGGED IN
<% end %> 
```

**截图它在我的浏览器中运行**

*   Chrome 已登录
*   Opera 已注销

![截屏](../Images/3d86f7184a7992f7cff89a6f90db3aa5.png)

## 问题

我的两个测试都失败了。Authlogic 似乎没有创建/查找会话。我的观点应该是“YES LOGGED IN”。如果我没有展示相关内容，您可以查看我的完整[源代码](https://bitbucket.org/andey/bestofama/src/89031511e3e33b6caadcbd57760edf339c7f984f/?at=stackoverflow)

# php - 如何将 PHP 数组返回给调用它的 javascript 函数

> ID：14574740
> 
> 赞同：0
> 
> 时间：2013-01-29T02:34:27.657
> 
> 标签：php, javascript, html, html-parsing

..打算尝试另一种方式..

到另一个页面的链接对我来说不是很有用.. 我已经查看了其中的大多数，但无法根据我的需要调整它们。

我不熟悉 ajax 或 jQuery。

我真的可以使用一些关于这个特定问题的详细代码示例的帮助。提前致谢..

我有这段代码叫做：JSON_generator.php

```
<?php
require_once 'EasyWebFetch.php';

$callback = isset($_GET['callback']) ? $_GET['callback'] : 'mymap.weatherhandler';
$station = isset($_GET['rid']) ? $_GET['rid'] : 'FWS';
$product = isset($_GET['product']) ? $_GET['product'] : 'NCR';
$nframes =  isset($_GET['frames']) ? $_GET['frames'] : 10;

if (strlen($product) != 3 || strlen($station) != 3) { exit; }

// fetch directory listing
$wf = new EasyWebFetch;
if (!$wf->get("http://radar.weather.gov/ridge/RadarImg/$product/$station/")) {
  print $wf->getErrorMessage();
  exit;
}
$page = $wf->getContents();
// echo $page."\n\n";

$size = preg_match_all( "/href=\"({$station}[\d_]+{$product}\.gif)\"/" , $page, $match);
$files = $match[1];

$nframes = min(count($files), $nframes);
$files = array_slice($files, -$nframes);

echo $callback."\n(\n{\ndirectory:\n[\n";
for ($i=0; $i < $nframes; $i++) {
  echo "\"ridge/RadarImg/$product/$station/$files[$i]\",\n";

}
echo "]\n}\n)\n;"

?> 
```

当像这样从命令行调用时......

```
http://example.com/mypath/JSON_generator.php?&?callback=CallBack&product=NCR&rid=JAX&frames=5 
```

但我真正需要的是让那些 .gif 路径/文件/名称从一个首先调用 php 的 javascript 函数中“可用”。** 它们需要作为数组中的项目进行访问。

我无法弄清楚要执行此操作的javascript函数调用..

..像这样的东西，但显然不是这个..

```
function Feed (whichproduct, whichsite) {
 var filelist = [];
 var siteimages = filelist("http://example.com/mypath/JSON_generator.php?&product=whichproduct&rid=whichsite&frames=5");
..then..
//alert (filelist [1]); .. should return something like  "ridge/RadarImg/NCR/JAX/JAX_20130128_2354_NCR.gif"
} 
```

显然，我是一个初学者，所以完整的答案对我来说比代码片段更有价值。

底线：

我需要一个 javascript 函数，它可以从 php 脚本中提取每个这些 .gif 名称，并将它们带回我可以在 html 文件的其他地方使用的 javascript“var”。

谢谢，丹尼斯

编辑..编辑删除..想通了..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T02:43:15.407

我将首先使用[jQuery](http://jquery.com/)进行回答，因为这使事情变得非常简单，但我稍后会使用 vanilla Javascript 实现进行更新。

在您的`Feed`函数中，使用 jQuery 的便捷`$.ajax`方法进行 AJAX 调用。

```
function Feed (whichproduct, whichsite) {
    $.ajax({
        "url": "http://mysite.com/mypath/JSON_generator.php?&product=whichproduct&rid=whichsite&frames=5"
        "type": "GET",
        "dataType": "json",
        "success": function( data, status, xhr ){
            alert( data[1] );
        }
    });
} 
```

在您的 PHP 中，使用`json_encode`格式良好的 PHP 数组（只需推送到`array()`而不是直接回显 url 和逗号等）。

最后，`print json_encode( $yourArray )`.

## Vanilla Javascript 更新：

我不会在这里复制（广泛的）javascript，而是链接到[@Richard H 的一个不错的 SO 答案](https://stackoverflow.com/a/5351647/597122)。如果您不打算使用 jQuery，希望对您有所帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T02:39:55.143

`json_encode($array);`是要走的路。该`json_encode`函数为您编写一个 JSON 对象以将其传递给 Javascript。

然后在 Javascript 中，您可以安装（如果您还没有使用它）jQuery 并使用[jQuery.parseJSON()](http://api.jquery.com/jQuery.parseJSON/)解析 JSON 字符串，该字符串返回一个可供使用的 javascript 对象。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-29T03:06:08.133

为了补充已经发布的答案，这里有两个问题：

*   您的响应不是 JSON，而是 JSONP - 请务必以这种方式对待它。JSON 看起来像这样：`{ ... }`，模仿 JSON 的数据结构，并打算被解析；JSONP 有一个围绕它的函数调用，旨在执行：`callback({ ... })`.
*   AJAX 代表异步 JavaScript 和 XML。并非首字母缩写词的所有部分仍然相关，但异步性非常大。这意味着您无法在请求它的同一函数中获得 AJAX 调用的结果：您需要设置一个回调，该函数将在结果到达时接收结果。

# python - python 不可知地确定系统 PATH 系统

> ID：14574745
> 
> 赞同：0
> 
> 时间：2013-01-29T02:34:54.393
> 
> 标签：python, path, python-2.7, operating-system, environment-variables

我正在编写的程序需要确定系统上是否安装了某些其他程序。特别是用于生成哈希值的命令行程序。由于这些程序有很多可能的版本，我只需要检查主要版本（md5、whirlpool 等）。

我正在编写的程序与系统无关，可以在任何 win/mac/*nix 上运行。

我希望能够快速搜索操作系统的标准 $PATH，但我不知道如何在系统之间检索该信息（$PATH 的内容）。

此处搜索仅找到有关查找 python 路径或当前运行脚本的路径的材料。

任何人都有解决方案，或者能够指出我对此的跨平台解决方案吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-29T02:37:08.320

这应该是跨平台的，除非我忽略了一些明显的东西：

Linux 示例：

```
Python 2.7.3 (default, Aug  1 2012, 05:14:39) 
[GCC 4.6.3] on linux2
Type "help", "copyright", "credits" or "license" for more information.
>>> import os
>>> print os.environ['PATH']
/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/usr/games 
```

macOS 示例：

```
Python 2.7.2 (default, Oct 11 2012, 20:14:37) 
[GCC 4.2.1 Compatible Apple Clang 4.0 (tags/Apple/clang-418.0.60)] on darwin
Type "help", "copyright", "credits" or "license" for more information.
>>> import os
>>> print os.environ['PATH']
/Users/vlazarenko/bin:/Users/vlazarenko/SDK/QtSDK/Desktop/Qt/474/gcc/bin:/usr/bin:/bin:/usr/sbin:/sbin:/usr/local/bin 
```

窗口示例：

```
Python 2.7.3 (default, Apr 10 2012, 23:24:47) [MSC v.1500 64 bit (AMD64)] on win
32
Type "help", "copyright", "credits" or "license" for more information.
>>> import os
>>> print os.environ['PATH']
C:\Program Files (x86)\Parallels\Parallels Tools\Applications;C:\Windows\system3
2;C:\Windows;C:\Windows\System32\Wbem;C:\Windows\System32\WindowsPowerShell\v1.0
\;C:\Program Files (x86)\Microsoft SQL Server\100\Tools\Binn\;C:\Program Files\M
icrosoft SQL Server\100\Tools\Binn\;C:\Program Files\Microsoft SQL Server\100\DT
S\Binn\;C:\Program Files (x86)\Git\cmd;C:\Program Files (x86)\Microsoft SQL Serv
er\100\Tools\Binn\VSShell\Common7\IDE\;C:\Program Files (x86)\Microsoft Visual S
tudio 9.0\Common7\IDE\PrivateAssemblies\;C:\Program Files (x86)\Microsoft SQL Se
rver\100\DTS\Binn\
>>> 
```

# c++ - 有哪些 Makefile 生成工具？

> ID：14574749
> 
> 赞同：1
> 
> 时间：2013-01-29T02:35:23.053
> 
> 标签：c++, makefile

我目前正在为我的项目使用手动设计的 Makefile，而且我以前从未使用过 Makefile 生成器。请注意，我目前有 70 多个源文件（C++、Python 和 MATLAB 相结合）。Makefile 主要用于编译 C++ 文件和协议缓冲区（.proto）。我知道我的项目越来越多的文件。他们目前都在一个导演。但我可能需要有多个目录。我担心维护 Makefile 变得越来越难。

我以前经常看到 automake/autoconf，现在越来越多地看到 CMake。有什么选择？他们设计的是大型项目吗？哪个是首选？各有什么优缺点？还有哪些好的选择？

我确实看到 automake 没有列在[任何生成文件的好工具中？](https://stackoverflow.com/questions/9589/any-good-tool-for-makefile-generation). 它过时了吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-29T02:41:38.810

第一个想到的是

*   [自动配置](http://www.gnu.org/software/autoconf/)
*   [制作](http://www.cmake.org/)

什么更适合可能取决于您的特定需求。CMake 涵盖了从自动构建可安装包到单元测试的大量功能，并且比 autoconf 工具恕我直言更容易理解。

对于真正的“大型”项目，需要集成 3rd 方的东西、生成中间源等。我实际上是在使用[ant](http://ant.apache.org/) + CMake 来引导 C++ 编译部分。[这也与Jenkins](http://jenkins-ci.org/)等连续集成服务器很好地集成。

# .net - 为什么我的 nhibernate equals 方法找不到我的字段？

> ID：14574750
> 
> 赞同：0
> 
> 时间：2013-01-29T02:35:27.330
> 
> 标签：.net, nhibernate

所以我有这个（VB，对不起）对象：

```
Class Foo

  Private ReadOnly foo as Integer

  Public Overridable ReadOnly Property Foo() as Integer
    Get
      Return foo
    End Get
  End Property

  Public Overridable Overloads Function Equals(ByVal other as Foo) as Boolean
    Return Me.foo.Equals(other.foo)
  End Function

  Public Overloads Overrides Function Equals(ByVal obj as Object) as Boolean
    ... some boilerplate ...
    Return Equals(DirectCast(obj, Foo))
  End Function
End Class 
```

最大的谜团是，当我从数据库中加载一个对象时， in`Equals()`始终`other.foo`为零，即使 in 的值`Foo()`是正确的。

这怎么可能？

Equals 方法的另一个版本是这样的：

```
Private Overloads Function Equals(ByVal other as Foo) as Boolean Implements IEquatable(Of Foo).Equals
  Return Me.foo.Equals(other.foo)
End Function 
```

在这个版本中，和**都** 为零。`Me.foo``other.foo`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T02:35:27.330

几个小时后，我发现对象类型的 Equals() 方法是罪魁祸首，大概是因为 DirectCast-ed 实例绕过了代理。

在第二种情况下，问题是私有实现（[接口的](https://stackoverflow.com/questions/436305/implement-an-interface-with-a-private-method-in-vb-net)！谁知道！）绕过代理。

所以，这个故事的寓意似乎是：**避免 DirectCast，**避免**私有接口实现。** :-)

# codeigniter - 使用 Codeigniter 的 Paypal 拆分付款/自适应付款。如何？

> ID：14574753
> 
> 赞同：0
> 
> 时间：2013-01-29T02:35:39.727
> 
> 标签：codeigniter, paypal, paypal-adaptive-payments

我有一个即将进行的项目，我的客户需要能够将贝宝付款发送给他自己的商家贝宝，并将其余的钱发送给另一个贝宝用户。假设有人向 joe blow 捐赠了 50 美元，joe blow 在他的贝宝中获得了 45 美元，而公司获得了 5 美元的费用。

我知道我需要为此使用 codeigniter 自适应支付，但我找不到一个好的自适应支付库。关于如何完成上述任务的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T05:56:24.087

[您可以在https://www.x.com/developers/paypal/documentation-tools/paypal-sdk-index#adaptivepaymentsnew](https://www.x.com/developers/paypal/documentation-tools/paypal-sdk-index#adaptivepaymentsnew)试用 PayPal SDK 。

这不是特定于 codeigniter 的库，但您仍然可以使用它。

# ruby-on-rails - Ruby on Rails 的 LDAP 身份验证，使用 Devise

> ID：14574754
> 
> 赞同：1
> 
> 时间：2013-01-29T02:35:41.133
> 
> 标签：ruby-on-rails, devise, active-directory, ldap

需要帮助才能让它工作，现在它说

```
Completed 401 Unauthorized in 1ms 
```

感谢任何建议

ldap.yml

```
authorizations: &AUTHORIZATIONS
## Authorization
group_base: : ou=Group, dc=company, dc=com
required_groups:
- cn=proxyagent,ou=profile,dc=company,dc=com
require_attribute:
obectclass=*
authorizationRole: memberuid
attribute: cn

development:
 host: ldap-33.company.com
 port: 389
 attribute: uid
 base: ou=People,dc=company,dc=com; ou=People, ou=mcdata,dc=company,dc=com
 admin_user: cn=proxyagent,ou=profile,dc=company,dc=com
 admin_password: welcome
ssl: true
<<: *AUTHORIZATIONS 
```

用户.rb

```
class User < ActiveRecord::Base

devise :ldap_authenticatable,:rememberable, :trackable 
```

请告诉我哪里错了，Splunk 的正确设置是：

```
 Host: ldap-33.company.com
Port: 389
Bind DN: cn=proxyagent,ou=profile,dc=company,dc=com
Bind DB Pass:  welcome
User base DN:ou=People,dc=company,dc=com; ou=People, ou=mcdata,dc=company,dc=com
User base filter:  (objectclass=person)
User name attribute:  uid
Real Name attribute: cn
Group mapping attribute: uid

Group settings:
 Group base DN: ou=Group, dc=company, dc=com
 Group base filter: (obectclass=*)
 Group name attribute: cn
 Group member attribute: memberuid 
```

谢谢！

D

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T10:35:18.123

在主机替换

`ldap-33.company.com` 到`ldap://33.company.com`或`ldap.33.company.com`

# c# - 寻找路线

> ID：14574757
> 
> 赞同：-1
> 
> 时间：2013-01-29T02:36:23.680
> 
> 标签：c#, algorithm, graph-theory

给定一条带有起点和终点的路线，我希望找出所有的路径，我应该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T02:40:41.080

从起始顶点运行[DFS](http://en.wikipedia.org/wiki/Depth-first_search)，将到目前为止找到的顶点列表传递到下一个调用级别。到达结束顶点时打印列表，并继续使用 DFS 直到枚举完所有路径。

# maven-ant-tasks - 尝试使用 maven-ant-tasks-2.1.3.jar 从 ant 运行 maven，但失败了

> ID：14574760
> 
> 赞同：1
> 
> 时间：2013-01-29T02:36:38.570
> 
> 标签：maven-ant-tasks

根据[http://maven.apache.org/ant-tasks/installation.html](http://maven.apache.org/ant-tasks/installation.html)的说明，我下载了 jar，将其添加到 ANT_HOME/lib 和 ANT 类路径，但加载类路径失败：

![错误](../Images/7e2dd122422eb0122579e9737cb4b6d1.png)

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T04:48:48.930

`<path id="maven-ant-tasks.classpath" path="lib/maven-ant-tasks-2.1.4-SNAPSHOT.jar" />` `<typedef resource="org/apache/maven/artifact/ant/antlib.xml" uri="antlib:org.apache.maven.artifact.ant" classpathref="maven-ant-tasks.classpath" />`

做到了

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-08-19T09:57:19.047

您的 CLASSPATH 或 Ant 'lib' 目录中可能有一个旧的 Xerces JAR 文件，该文件不匹配。我在一个非常古老的项目中遇到了同样的问题，我通过删除该 JAR 文件解决了这个问题。

# javascript - 同时使用两个几乎相同的 javascript 文件

> ID：14574766
> 
> 赞同：0
> 
> 时间：2013-01-29T02:37:27.093
> 
> 标签：javascript, namespaces

我有一个使用小型化 javascript 文件 J1 的 XSL 模板。可以假设 J1 不可能被追踪和逆向工程。

我遇到的问题是 J1 有一个稍微更新的版本（称为 J1a），我有兴趣将 J1 用于代码的某些部分，将 J1a 用于同一模板中代码的其他部分。显然，由于重复的类和函数，将两者包含在同一个文件中会出现问题。我尝试使用以下代码将 J1 或 J1a 包装到伪命名空间（Javascript 不支持命名空间或模块）中，但无济于事：

```
function mynamespace() {
  this.container = {
  // insert monstrous javascript blob
  }
} // which then is expected to do sth like mynamespace.Container.SomeFunction() 
```

我还尝试了通过手动重命名大量名称（这很容易出错）来进行肮脏的重构，但是这两种方法都不起作用。

在写这篇文章的过程中，我想到了第三种方法，即在 J1 中添加一个函数 X()，在 J1a 中添加一个函数 Y()，然后将我的任务委托给那些应该解决问题的包装函数因为 J1 和 J1a 不相互导入。但是，我没有对此进行测试，也不是经验丰富的 JavaScript 编写者。

编辑：

因为我真正需要的 J1 和 J1a 如下：

```
MyObject.SomeStaticMethod();
MyObject obj = new MyObject(args);
obj.SomeInstanceMethod(); 
```

那么也许我可以这样做：

```
 function X(var args) {
     MyObject.SomeStaticMethod();
     MyObject obj = new MyObject(args);
     obj.SomeInstanceMethod();
 }
 function Y(var args) {
     MyObject.SomeStaticMethod();
     MyObject obj = new MyObject(args);
     obj.SomeInstanceMethod();
 } 
```

并将 X 添加到 J1 并将 Y 添加到 J1a 然后在 XSL 模板中选择性地调用 X() 和 Y() ？

编辑 2：事实证明，巨大的小型化 javascript blob 不包含传统的全局变量，而是一些同样糟糕的东西 - 与 windows 对象绑定的变量。

话虽如此，有没有办法以某种方式拆分 HTML 的呈现，以便一部分在全局范围内只有一个副本，而另一部分在全局范围内有另一个副本？我听说JSP 有一些“平铺方法”。框架也是一种可能，尽管我听说使用它们有很多问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T02:44:43.583

这是一个模仿节点功能的变体。

```
function mynamespace() {
  var container = {};

  // insert giant blob here

  container.exposed1 = something_to_expose;
  container.exposed2 = something_else_to_expose;

  return container;
} 
```

然后使用

```
var v1 = mynamespace();
v1.exposed1(); 
```

ETC....

您还需要确保您的巨型 blob 不使用任何全局变量。

# ios - 如何使用 facebook sdk 上传带有图像的状态？

> ID：14574767
> 
> 赞同：0
> 
> 时间：2013-01-29T02:37:32.283
> 
> 标签：ios, objective-c, facebook

我用它来上传带有消息的图像：

```
NSMutableDictionary *dic=[NSMutableDictionary dictionaryWithCapacity:2];
    [dic setObject:@"a message" forKey:@"message"];
    [dic setObject:UIImagePNGRepresentation([UIImage imageNamed:@"1.png"]) forKey:@"source"];

    [FBRequestConnection startWithGraphPath:@"me/photos" parameters:dic HTTPMethod:@"POST"
     completionHandler:^(FBRequestConnection *connection,id result,NSError *error) {
         NSString *alertText;
         if (error) {
             alertText = [NSString stringWithFormat:
                          @"error: domain = %@, code = %d",
                          error.domain, error.code];
             NSLog(@"%@",error);
         } else {
             alertText = [NSString stringWithFormat:
                          @"Posted action, id: %@",
                          [result objectForKey:@"id"]];
         }
         // Show the result in an alert
         [[[UIAlertView alloc] initWithTitle:@"Result"
                                     message:alertText
                                    delegate:self
                           cancelButtonTitle:@"OK!"
                           otherButtonTitles:nil]
          show];
     }]; 
```

它工作正常，我可以在我的相册中看到图像，但我的主页视图中没有显示上传状态。如何上传带有消息的图像，并且可以在我的主页视图中显示？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-16T08:59:04.630

您的代码完全没问题，我认为问题在于您必须将您的 FB 故事排序为**Most recent** from **Top stories**。

![在此处输入图像描述](../Images/af786694f558f984690f4c39afeb74ed.png)

# java - JScrollPane 没有滚动超过设定的大小

> ID：14574770
> 
> 赞同：1
> 
> 时间：2013-01-29T02:38:12.733
> 
> 标签：java, swing, jscrollpane

我正在使用滚动窗格，其中有一个 JPanel，它绘制了一个正方形网格，这些正方形网格是 [][] 数组中的对象。

如果数组是 [83][81] 大小为 18^2 的矩形，它看起来像：http: [//i.imgur.com/fwJ9LV6.png](http://i.imgur.com/fwJ9LV6.png) （注意网格边缘的白色边框）

但是，[84][82] 处的相同矩形：http: [//i.imgur.com/PZ2rNY3.png](http://i.imgur.com/PZ2rNY3.png)（最后一行被切片）。

现在，我已经：

*   将滚动窗格和 Jpanel 的首选大小和最大大小增加到远高于所需的大小。
*   检查 JPanel 是可滚动对象的视口。

它并没有改变任何东西。

我的 Jpanel 课程是：

```
package BlastRadius;

import java.awt.Color;
import java.awt.Graphics;
import java.awt.Graphics2D;
import java.awt.RenderingHints;
import javax.swing.JPanel;

/**
 * Canvas Class Stuart Bradley 25-1-2013 Contains the paint component
 */
public class BlastRadiusCanvas extends JPanel {

    GridOfNodes grid = new GridOfNodes();

    @Override
    public void paintComponent(Graphics g) {
        super.paintComponent(g);
        Graphics2D g2d = (Graphics2D) g;
        RenderingHints rh = g2d.getRenderingHints();
        rh.put(RenderingHints.KEY_ANTIALIASING, RenderingHints.VALUE_ANTIALIAS_ON);
        g2d.setRenderingHints(rh);

        //Draw space
        int pixelsAcross = 32;
        int pixelsDown = 0;
        int size = 18;
        for (int i = 0; i < grid.getRows(); i++) {
            for (int j = 0; j < grid.getColumns(); j++) {
                g2d.setColor(grid.getNodeGrid()[i][j].getColour());
                g2d.fillRect(pixelsAcross, pixelsDown, size, size);
                g2d.setColor(new Color(0, 0, 0));
                g2d.drawRect(pixelsAcross, pixelsDown, size, size);
                //Better Ovals maybe needed, try Ellipise2D class

                if (grid.getNodeGrid()[i][j].getHasOval() == true) {
                    g2d.setColor(new Color(255, 255, 255));
                    g2d.fillOval((pixelsAcross + (size / 2) - 1), (pixelsDown + (size / 2) - 1), size / 4, size / 4);
                }
                pixelsAcross += 18;
            }
            pixelsDown += 18;
            pixelsAcross = 32;
            //Draws gene string for first object in each row
            g2d.setColor(new Color(0, 0, 0));
            g2d.drawString(grid.getNodeGrid()[i][0].getGeneString(), 5, pixelsDown - 5);
        }
    }
} 
```

滚动窗格和相关的，如果需要可以发布整个 GUI 类：

```
jScrollPane1 = new javax.swing.JScrollPane();
jScrollPane1.setPreferredSize(new java.awt.Dimension(10000, 10000));
jScrollPane1.setViewportView(drawingJPanel);

//Grouping 

javax.swing.GroupLayout layout = new javax.swing.GroupLayout(getContentPane());
        getContentPane().setLayout(layout);
        layout.setHorizontalGroup(
            layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(layout.createSequentialGroup()
                .addContainerGap()
                .addComponent(jPanel1, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.UNRELATED)
                .addComponent(jScrollPane1, javax.swing.GroupLayout.DEFAULT_SIZE, 254, Short.MAX_VALUE)
                .addContainerGap())
        );
        layout.setVerticalGroup(
            layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addComponent(jPanel1, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
            .addComponent(jScrollPane1, javax.swing.GroupLayout.PREFERRED_SIZE, 0, Short.MAX_VALUE)
        ); 
```

虽然我之前通过 RAD 环境和手动完成了 GUI，但可滚动界面对我来说有点新奇！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-29T03:13:31.360

`BlastRadiusCanvas`需要向滚动窗格提供有关它想要多大的信息。

![在此处输入图像描述](../Images/8186a6bc7072f9b43a30a3f7b7988333.png)

根据我对您尝试做的事情的解释，尝试将以下内容添加到您的`BlastRadiusCanvas`

```
@Override
public Dimension getPreferredSize() {
    return new Dimension((grid.getColumns() * 18) + 64, (grid.getRows() * 18) + 1);
} 
```

现在真的，你不应该依赖“魔术”数字，最好使用类似......

```
protected static final int GRID_SIZE = 18;
protected static final int H_GAP = 32;

@Override
public Dimension getPreferredSize() {
    return new Dimension((grid.getColumns() * GRID_SIZE) + (H_GAP * 2), (grid.getRows() * GRID_SIZE) + 1);
} 
```

这将使您的`paintComponent`方法看起来更像...

```
@Override
public void paintComponent(Graphics g) {
    super.paintComponent(g);
    Graphics2D g2d = (Graphics2D) g;
    RenderingHints rh = g2d.getRenderingHints();
    rh.put(RenderingHints.KEY_ANTIALIASING, RenderingHints.VALUE_ANTIALIAS_ON);
    g2d.setRenderingHints(rh);

    //Draw space
    int pixelsAcross = H_GAP;
    int pixelsDown = 0;
    int size = GRID_SIZE;
    for (int i = 0; i < grid.getRows(); i++) {
        for (int j = 0; j < grid.getColumns(); j++) {
            g2d.setColor(grid.getNodeGrid()[i][j].getColour());
            g2d.fillRect(pixelsAcross, pixelsDown, size, size);
            g2d.setColor(new Color(0, 0, 0));
            g2d.drawRect(pixelsAcross, pixelsDown, size, size);
            //Better Ovals maybe needed, try Ellipise2D class

            if (grid.getNodeGrid()[i][j].getHasOval() == true) {
                g2d.setColor(new Color(255, 255, 255));
                g2d.fillOval((pixelsAcross + (size / 2) - 1), (pixelsDown + (size / 2) - 1), size / 4, size / 4);
            }
            pixelsAcross += size;
        }
        pixelsDown += size;
        pixelsAcross = H_GAP;
        //Draws gene string for first object in each row
        g2d.setColor(new Color(0, 0, 0));
        g2d.drawString(grid.getNodeGrid()[i][0].getGeneString(), 5, pixelsDown - 5);
    }
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-29T03:15:07.477

因为`BlastRadiusCanvas`不包含自己的组件，您可以覆盖`getPreferredSize()`以返回最佳大小以显示网格。有关更多详细信息，请参阅此相关[答案](https://stackoverflow.com/a/11377526/230513)。还可以考虑实现[`Scrollable`](http://docs.oracle.com/javase/tutorial/uiswing/components/scrollpane.html#scrollable)接口以返回合适`Dimension`的 from `getPreferredScrollableViewportSize()`。图像似乎具有自然的单位和块大小。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-29T02:46:05.697

万一其他人也有同样的问题-因为谷歌搜索数小时并没有为我解决这个问题。

**检查您的 JFrame 首选尺寸**。如果它太低，它会最大化您拥有的网格数量 - 或任何绘图空间。

# sql - 检索存储过程的列名和类型？

> ID：14574773
> 
> 赞同：46
> 
> 时间：2013-01-29T02:38:55.213
> 
> 标签：sql, sql-server

> **可能重复：**
> [检索存储过程结果集的列定义](https://stackoverflow.com/questions/7368864/retrieve-column-definition-for-stored-procedure-result-set)

我使用以下 SQL 来获取表或视图的列名和类型：

```
DECLARE @viewname varchar (250);

select a.name as colname,b.name as typename 
from syscolumns a, systypes b -- GAH!
where a.id = object_id(@viewname) 
and a.xtype=b.xtype 
and b.name <> 'sysname' 
```

如何对存储过程的输出列执行类似操作？

* * *

## 回答 #1

> 赞同：104
> 
> 时间：2013-01-29T03:18:56.540

[我才意识到我以前[回答过这个问题](https://stackoverflow.com/questions/7368864/retrieve-column-definition-for-stored-procedure-result-set/)]

对存储过程执行此操作比对视图或表执行此操作要复杂得多。问题之一是存储过程可以有多个不同的代码路径，具体取决于输入参数，甚至是您无法控制的东西，例如服务器状态、一天中的时间等。例如，您希望看到的输出这个存储过程？如果有多个结果集而不考虑条件怎么办？

```
CREATE PROCEDURE dbo.foo
  @bar INT
AS
BEGIN
  SET NOCOUNT ON;

  IF @bar = 1
    SELECT a, b, c FROM dbo.blat;
  ELSE
    SELECT d, e, f, g, h FROM dbo.splunge;
END
GO 
```

如果您的存储过程没有代码路径，并且您确信您将始终看到相同的结果集（并且可以提前确定如果存储过程具有非可选参数应提供哪些值），让我们举一个简单的示例：

```
CREATE PROCEDURE dbo.bar
AS
BEGIN
  SET NOCOUNT ON;

  SELECT a = 'a', b = 1, c = GETDATE();
END
GO 
```

# FMTONLY

一种方法是做这样的事情：

```
SET FMTONLY ON;
GO
EXEC dbo.bar; 
```

这将为您提供一个空结果集，您的客户端应用程序可以查看该结果集的属性以确定列名和数据类型。

现在，有很多问题`SET FMTONLY ON;`我不会在这里讨论，但至少[应该注意这个命令已被弃用](http://technet.microsoft.com/en-us/library/ms143729.aspx)- 有充分的理由。完成后还要小心`SET FMTONLY OFF;`，否则您会想知道为什么成功创建存储过程但无法执行它。不，我不会警告你，因为它只是发生在我身上。诚实。:-)

# 公开查询

通过创建一个环回链接服务器，您可以使用诸如`OPENQUERY`执行存储过程之类的工具，但返回您可以检查的可组合结果集（好吧，请接受它作为一个非常松散的定义）。首先创建一个环回服务器（这假设一个名为 的本地实例`FOO`）：

```
USE master;
GO
EXEC sp_addlinkedserver @server = N'.\FOO', @srvproduct=N'SQL Server'
GO
EXEC sp_serveroption @server=N'.\FOO', @optname=N'data access', 
  @optvalue=N'true'; 
```

现在我们可以采用上面的过程并将其输入到这样的查询中：

```
SELECT * INTO #t 
FROM OPENQUERY([.\FOO], 'EXEC dbname.dbo.bar;')
WHERE 1 = 0;

SELECT c.name, t.name
FROM tempdb.sys.columns AS c
INNER JOIN sys.types AS t
ON c.system_type_id = t.system_type_id
WHERE c.[object_id] = OBJECT_ID('tempdb..#t'); 
```

这会忽略别名类型（以前称为用户定义的数据类型），并且还可能为定义为的列显示两行，例如`sysname`. 但从上面它产生：

```
name   name
----   --------
b      int
c      datetime
a      varchar 
```

显然，这里还有更多工作要做 -`varchar`不显示长度，您必须获得其他类型的精度/比例，例如`datetime2`,`time`和`decimal`. 但这是一个开始。

# SQL Server 2012

SQL Server 2012 中有一些新功能使元数据发现变得更加容易。对于上述过程，我们可以执行以下操作：

```
SELECT name, system_type_name
FROM sys.dm_exec_describe_first_result_set_for_object
(
  OBJECT_ID('dbo.bar'), 
  NULL
); 
```

除其他外，这实际上为我们提供了精度和规模并解析了别名类型。对于上述过程，这会产生：

```
name   system_type_name
----   ----------------
a      varchar(1)
b      int
c      datetime 
```

视觉上没有太大区别，但是当您开始以不同的精度和规模进入所有不同的数据类型时，您会欣赏此功能为您所做的额外工作。

缺点：在 SQL Server 2012 中，至少这些函数仅适用于第*一个*结果集（正如函数名称所暗示的那样）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-29T02:53:10.723

您是否试图返回所有存储过程及其所有参数？像这样的东西应该为此工作。

```
select * from information_schema.parameters 
```

如果您需要获取从存储过程返回的列，请查看此处：

[获取从存储过程返回的列名/类型](https://stackoverflow.com/questions/3747879/get-column-names-types-returned-from-a-stored-procedure)

# excel - 更新 Powerpoint - 不同计算机中的 Excel 链接

> ID：14574775
> 
> 赞同：1
> 
> 时间：2013-01-29T02:39:10.947
> 
> 标签：excel, excel-2007, powerpoint

我有一个链接到 powerpoint 幻灯片的 excel 文件，当我在不同的计算机上工作并尝试更改 excel 文件中的值时，PowerPoint 幻灯片中的数据没有自动更新。出现一条消息，告诉我我需要手动更新链接。

那么，如何自动或“在一个工作中”更新不同计算机中的excel文件和powerpoint之间的链接..???

需要帮忙...

thx 在先进....

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T03:18:36.993

要自己滚动，您可以查看 Excel 形状的 .LinkFormat.SourceFullname 属性。它将指向 PPT 期望找到文件的位置。

将文件移动到您想要的任何位置，并将 .LinkFormatSourcefullname 更改为文件的新完整路径。它必须是完整路径；相对路径不起作用。

如果旧路径和新路径一致，这里有一些 VBA 代码可以自动执行此操作：

批量搜索和替换超链接、OLE 链接、电影链接和声音链接 [http://www.pptfaq.com/FAQ00773_Batch_Search_and_Replace_for_Hyperlinks-_OLE_links-_movie_links_and_sound_links.htm](http://www.pptfaq.com/FAQ00773_Batch_Search_and_Replace_for_Hyperlinks-_OLE_links-_movie_links_and_sound_links.htm)

# ruby - Echosign API 和 PDF 中的预填充文本

> ID：14574776
> 
> 赞同：1
> 
> 时间：2013-01-29T02:39:11.427
> 
> 标签：ruby, api, pdf, pdf-generation, echosign

我有一个包含多个文本字段的 pdf。我已经使用 Echosign 关于创建文本标签的教程来创建标签，但 Echosign API 专家告诉我，我被告知要使用的 API 方法 (createURLWidget) 不允许使用预填充后缀预填充数据。

我正在使用 Ruby 来运行这些方法。

我的字段名称是 full_name，我用一个假的切换了实际的文档键。

```
params = 
{
  :name => 'Agreement',
  :document_key => '3434hkfhegeg',
  :mime_type => 'application/pdf',
  :fields => 
  {
    :full_name => 'Mary'
  }
} 
```

我尝试过的文本标签是：

```
full_name_es_:sender:fullname
full_name_es_:signer
full_name_es_:signer1
full_name_es_:signer2
full_name_es_:sender 
```

这是命名语法：

```
<field_name>_es_<:Role><:Field Type> 
```

我试过他们只读而不是。

当我在终端中运行“ruby create_url_widget.rb”时

这是我回复的相关部分：

```
<mergeFieldInfo><ns9:MergeFields/><ns9:fieldName>full_name</ns9:fieldName>
<ns9:defaultValue>Mary</ns9:defaultValue></ns9:MergeFields></mergeFieldInfo> 
```

还会生成一个 URL，其中嵌入了 echosign 网站页面中的正确 PDF。但是，没有文本是 full_name 字段所在的位置。如果我将该文本设置为“只读”，则不再需要填写该框适当地，所以我知道它正在做某事。

我已经使用soupUI 尝试更改我的代码，但仍然没有运气。

如果有人需要我提供更多代码，请告诉我。如果有人有任何建议，请告诉我，我真的被卡住了。我什至不确定这个 API 方法是否会做到这一点，有人知道这一点还是我应该使用另一种方法？

提前感谢您的时间！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T00:42:48.283

当要求发件人在发送文档以供签名之前提供某些数据时，应该使用预填充标签。您可以通过在文档中使用预填充标签（例如 full_name_es:prefill）来测试这一点，确保在将文档发送给收件人进行签名时选择“预览、定位签名或添加表单域”选项。在预览位置屏幕中，您还可以为已放置在文档中的（标记）字段提供默认值。 *es*:signer[#]:fullname 应该在使用 sendDocument 方法发送文档以供签名时捕获签名者的全名（full_name_es_:sender:fullname 不是有效的文本标签，将不起作用）。您似乎正在尝试创建一个通用小部件，您可以重复使用它来捕获来自不同签名者的签名。通用小部件的行为不同，因为您事先不知道签名者（createURLWidget 不接受 recipeint 电子邮件），因此它不会预先填写签名者姓名。如果要为特定签名者生成此小部件，则应考虑使用不同的小部件生成方法 (createPersonalUrlWidget)。我不知道 ruby​​，所以我不能保证对你的 ruby​​ 代码有任何帮助，但如果你能给我提供你的源代码和文档，我可以试一试。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T01:30:18.360

我解决了！除了预先存在的mergeFieldInfo 和mergeFields 之外，我还需要添加一个MergeField 参数。由于每个文本字段都需要它自己的 MergeField 参数，因此它必须放在 each_pair do 循环中。

我的 xml 构建器中的代码：

```
if has?( :fields, Hash )
  xml.mergeFieldInfo do
     xml.tag! 'ns9:mergeFields' do
       fields.each_pair do | key, value |
         xml.tag! 'ns9:MergeField' do 
           xml.tag! 'ns9:fieldName', key.to_s
           xml.tag! 'ns9:defaultValue', value.to_s
         end
       end
     end
  end
end 
```

工作文本标签示例：

```
full_name_es_:signer1 
```

我的回复是这样的：

```
<mergeFieldInfo><ns9:mergeFields>
<ns9:MergeField><ns9:defaultValue>Kristoph</ns9:defaultValue><ns9:fieldName>full_name</ns9:fieldName></ns9:MergeField>
<ns9:MergeField><ns9:defaultValue>123 Mockingbird Lane</ns9:defaultValue><ns9:fieldName>address_1</ns9:fieldName></ns9:MergeField>
</ns9:mergeFields></mergeFieldInfo> 
```

# c# - 如何以一种方法写入文本文件，然后从另一种方法读取？

> ID：14574780
> 
> 赞同：1
> 
> 时间：2013-01-29T02:39:41.410
> 
> 标签：c#, .net

我正在尝试制作一个 Stream Writer，然后将一些输入从控制台写入文件，然后读出内容。唯一的问题是我想用两种不同的方法来做。从这里写：从这里`addbook()`读：`list_books()`。但是我无法从该文件中读取，因为流阅读器不允许我访问我的任何变量或该文件以再次使用。

```
//So I am trying to write from the static void addbook method and then read from the static void list_books method

//I want to Write from one static void and then I want  to read them from a different method.

static void addbook()
{
    //Here is where I get my strings that I will write

    Console.Write("Book Title:");
    string title = Console.ReadLine();

    Console.Write("ISBN#:");
    string isbn = Console.ReadLine();

    Console.Write("Author:");
    string author = Console.ReadLine();

    Console.Write("Publish Date:");
    string publish_date = Console.ReadLine();

    //Here Is where I create the Stream Reader and Writer
    //And where I write to the file
    var fs = File.Open("Librarybooks.txt", FileMode.OpenOrCreate,FileAccess.ReadWrite);
    var sw = new StreamWriter(fs);
    var sr = new StreamReader(fs);

    sw.WriteLine(title.ToCharArray());
    sw.WriteLine(isbn.ToCharArray());
    sw.WriteLine(author.ToCharArray());
    sw.WriteLine(publish_date.ToCharArray());

    Console.WriteLine("Book added Successfully!!");
}

static void list_books()
{
    //Here is where I want to read from so I can just call the list_books method.
    //But I can't access the StreamReader or StreamWriter
    //I just want to be able to read from the file.
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T02:59:36.907

MSDN 提供了如何做这两件事的示例

*   [如何：将文本写入文件](http://msdn.microsoft.com/en-us/library/6ka1wd3w.aspx)
*   [如何：从文件中读取文本](http://msdn.microsoft.com/en-us/library/db5x7c0d.aspx)

从他的示例中可以看出，您不需要将字符串转换为字符数组来编写它们。

您还会注意到这两个示例都使用了[`using`](http://msdn.microsoft.com/en-us/library/yh598w02.aspx)关键字。在这个问题（可能还有许多其他问题）中解释了为什么要使用该构造：[我什么时候应该在 C# 中使用“使用”块？](https://stackoverflow.com/questions/567138/when-should-i-use-using-blocks-in-c)

看起来您已经喜欢这个[`File`](http://msdn.microsoft.com/en-us/library/3saad2h5.aspx)类了，您可以利用其中专门为处理文本文件而设计的其他方法。您可以决定是否要根据行或整个内容写入/读取文件。这里有如何使用`File`该类的示例：

*   [如何：写入文本文件](http://msdn.microsoft.com/en-us/library/8bh11f1k)
*   [如何：从文本文件中读取](http://msdn.microsoft.com/en-us/library/ezwyzy7b)

* * *

根据您似乎刚刚开始编程的代码，请考虑将您的代码放在[CodeReview](https://codereview.stackexchange.com/)上。这样，您可以获得有关如何编写更好代码的有用提示。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-29T02:49:26.320

```
private const string FILE_PATH = "Librarybooks.txt";

static void addbook()
{
    //Here is where I get my strings that I will write

    Console.Write("Book Title:");
    string title = Console.ReadLine();

    Console.Write("ISBN#:");
    string isbn = Console.ReadLine();

    Console.Write("Author:");
    string author = Console.ReadLine();

    Console.Write("Publish Date:");
    string publish_date = Console.ReadLine();

    //Here Is where I create the Stream Reader and Writer
    //And where I write to the file
    using (var fs = File.Open(FILE_PATH, FileMode.OpenOrCreate,FileAccess.ReadWrite))
    {
        using (var sw = new StreamWriter(fs))
        {
            using (var sr = new StreamReader(fs))
            {
                sw.WriteLine(title.ToCharArray());
                sw.WriteLine(isbn.ToCharArray());
                sw.WriteLine(author.ToCharArray());
                sw.WriteLine(publish_date.ToCharArray());

                Console.WriteLine("Book added Successfully!!");
             }
         }
     }
}

static void list_books()
{
    using (StreamReader sr = new StreamReader(FILE_PATH))
    {
       string fileContent = sr.ReadToEnd();
    }
} 
```

# css - 如何将 3 个不同半径的圆“粘”在一起？（带有示例图像）

> ID：14574784
> 
> 赞同：4
> 
> 时间：2013-01-29T02:40:15.160
> 
> 标签：css, math, geometry, trigonometry

我有一个图表，它由三个不同大小的圆圈表示，基于结果集中给定元素的存在。第一个圆圈始终设置为 100%，这是最大的圆圈，其他两个是相对于最大圆圈的百分比。

问题是我正在尝试使用 css 来渲染它们，但我不知道如何让它们沿着它们的两侧“粘”在一起所需的数学。

已知的部分将是每个圆的半径，并且总是首先返回最大的部分。

这是我要完成的示例：

![在此处输入图像描述](../Images/57d8b81a4eeba1e50313643118f3253b.png)

我怎样才能在数学上完成这一点，以便我可以为每个圆圈提供一个边距顶部和左边距，从而以这种方式定位它们？

我可以将最大的圆定位在 0,0 处，将第二大的圆定位在两个直径之差的一半处，使中心点对齐。真正的挑战是第三个最小的圆圈，即根据其他两个圆圈的位置知道将其放置在哪里。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-29T04:09:19.743

用半径 0、半径 1 和半径 2 构建三角形并计算第三个顶点坐标（最小圆心）。我在计算中使用[了这里的公式（23）](http://mathworld.wolfram.com/Triangle.html)。有Delphi代码，但希望原理清楚。

```
var
  r0, r1, r2: Integer;
  x0, x1, x2, y0, y1, y2: Integer;
  a, b, c, ca: Double;
begin
  //some intialization
  Canvas.FillRect(ClientRect);
  Randomize;
  r0 := 200;
  r1 := Round(r0 * (0.25 + 0.75 * Random));
  r2 := Round(r1 * (0.25 + 0.75 * Random));

  //circle centers' coordinates
  //biggest
  x0 := r0;
  y0 := r0;

  //second
  x1 := x0 + r0 + r1;
  y1 := y0;

  //triangle sides
  c := r0 + r1;
  b := r0 + r2;
  a := r1 + r2;

  //x-shift
  ca := (c * c + b * b - a * a) / (2.0 * c);
  x2 := x0 + Round(ca);

  //y-shift is the height of triangle
  //Pythagor's rule
  y2 := y0 + Round(Sqrt(b * b - ca * ca));

  //draw calculated circles
  Canvas.Ellipse(x0 - r0, y0 - r0, x0 + r0 + 1, y0 + r0 + 1);
  Canvas.Ellipse(x1 - r1, y1 - r1, x1 + r1 + 1, y1 + r1 + 1);
  Canvas.Ellipse(x2 - r2, y2 - r2, x2 + r2 + 1, y2 + r2 + 1); 
```

示例输出： ![在此处输入图像描述](../Images/3745d92c60a6a3db4e5738bebe25abbe.png)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-29T04:40:20.893

好的，让我们逐一介绍...假设您的 100% A 圆的半径为 x（例如，B 是 Bx，c 可能是 Cx，B = .7 和 C = .3）。

另外，我实际上会有一个`<div style="position: relative"></div>`，然后你的圈子将`<div style="position: absolute, top: 0, left: 0"></div>`不是使用 margin-top/margin-left

无论如何。显然，top/left = 0。

从您的图片来看，A 和 B 的中心似乎排成一行……这意味着 B 将拥有`left = 2x`并且`top = (1 - B)x`

C 是最难的部分...我将快速绘制三角形以供参考

![](../Images/b7b2e7bf051bc8721ff6ff97fc127daa.png)

首先让我们使用[余弦定律](http://en.wikipedia.org/wiki/Law_of_cosines)找到 A 处的角度

```
(B + C)² = (1 + B)² + (1 + C)² - 2(1 + B)(1 + C)cos A

cosA = (BC - B - C - 1)/(BC + B + C + 1) 
```

使用正常的[三角函数](http://en.wikipedia.org/wiki/Trigonometry)，我们也可以得到高度......

```
sin A = h / (1 + C) 
```

使用规则

```
sin² A + cos² A = 1 
```

我们可以结合得到

```
h = (1 + C) √ (1 - cos² A) 
```

当然要得到顶部，我们需要加 1 和减 C

```
top = ((1 + C) √ (1 - cos² A) + 1 - C)x 
```

再次使用 trig 我们可以得到左侧...

```
cos A = l / (1 + C)

l = (1 + C)cos A 
```

当然要离开，我们必须加 1 并取 C ......

```
left = ((1 + C)cos A + 1 - C)x 
```

我创建了一个示例，使用边界半径来创建 B = .7 和 C = .3 和 x = 50px 的圆圈：http: [//jsfiddle.net/FelixJorkowski/xArpR/](http://jsfiddle.net/FelixJorkowski/xArpR/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-29T16:38:21.543

这是我的@MBo 代码的python 实现

```
r0 = 100
r1 = 50
r2 = 25

＃界
＃最大
x0 = r0
y0 = r0

#2nd
x1 = x0 + r0 + r1
y1 = y0

#边
c = r0 + r1
b = r0 + r2
a = r1 + r2

#x 班次
ca = (c * c + b * b - a * a) / (2.0 * c)
x2 = x0 + 圆形(ca)

#y-shift 是三角形的高度
y2 = y0 + round(math.sqrt(b * b - ca * ca))

left_a = x0 - r0
top_a = y0 - r0
宽度_a = r0 * 2
边界半径_a = 宽度_a / 2

left_b = x1 - r1
top_b = y1 - r1
宽度_b = r1 * 2
border_radius_b = width_b / 2

left_c = x2 - r2
top_c = y2 - r2
宽度_c = r2 * 2
边界半径_c = 宽度_c / 2
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-30T05:04:14.883

使用 Canvas 元素的解决方案，以防其他人偶然发现。

[http://jsfiddle.net/5mgLY/](http://jsfiddle.net/5mgLY/)

```
var centerpoint = 50;
var radius = randomFromInterval(30, 50);                //starting circle between 30 and 50
var radius2 = radius * randomFromInterval(5, 9) / 10;   //between .5 and .9 of starting circle
var radius3 = radius2 * randomFromInterval(3, 8) / 10;  //between .3 and .8 of medium circle

var c=document.getElementById("myCanvas");
var ctx=c.getContext("2d");

//draw the big circle
ctx.beginPath();
ctx.arc(centerpoint,centerpoint,radius,0,2*Math.PI,false);
ctx.fillStyle = 'green';
ctx.fill();
ctx.stroke();

//draw the medium circle
ctx.beginPath();
ctx.arc(centerpoint + radius + radius2,50,radius2,0,2*Math.PI);
ctx.fillStyle = 'red';
ctx.fill();
ctx.stroke();

//find the length of each side of the triangle that forms between the three circles
var hypotenuse = radius + radius2;
var side1 = radius + radius3;
var side2 = radius2 + radius3;

//get x and y offsets
var xOffset = ((hypotenuse*hypotenuse) + (side1*side1)  - (side2*side2)) / (2 * hypotenuse);
var yOffset = Math.sqrt(side1 * side1 - xOffset * xOffset);

//draw the small circle
ctx.beginPath();
ctx.arc(centerpoint + xOffset,centerpoint + yOffset,radius3,0,2*Math.PI);
ctx.fillStyle = 'blue';
ctx.fill();
ctx.stroke();

function randomFromInterval(from,to)
{
    return Math.floor(Math.random()*(to-from+1)+from);
}

function toDegrees (angle) {
  return angle * (180 / Math.PI);
} 
```

# linux - 从一个文件中删除另一个文件中的内容

> ID：14574787
> 
> 赞同：1
> 
> 时间：2013-01-29T02:40:29.213
> 
> 标签：linux, shell, unix, command-line, grep

我有两个文本文件，file1.txt 和 file2.txt。

file1.txt 包含一个数字列表。file2.txt 还包含一个数字列表，但数量更多（很大一部分是来自 file1.txt 的数字）。这就是我想要做的：

我想从 file2.txt 中删除 file1.txt 中的所有数字，并将输出保存到 file3.txt。所以在 file3.txt 中，它将不包含 file1.txt 中的数字。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-29T05:24:45.040

这是一种使用方法`awk`：

```
awk 'FNR==NR { a[$0]; next } !($0 in a)' file1.txt file2.txt > file3.txt 
```

这会将file1读入一个数组，然后在遍历file2时，它将打印不在数组中的file2行并将它们写入输出文件。如果您有任何问题，请不要犹豫。干杯。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-29T04:03:21.613

使用 GNU `grep`，您可以使用 ' `fgrep`' 模式：

```
grep -F -v -f file1.txt -w file2.txt > file3.txt 
```

演示：

```
seq 1 30 > file2.txt
for i in 1 2 3 4 5; do echo $RANDOM; done | sed 's/\(..\).*/\1/' > file1.txt
grep -F -v -f file1.txt -w file2.txt > file3.txt 
```

的内容`file2.txt`是数字 1 到 30 的行。 的内容`file1.txt`是 5 个半随机的 2 位数字。中的输出`file3.txt`是文件 2 中不在文件 1 中的行。请注意，循环生成的随机数不是很好，也没有限制为 1..30（另请参见下面的注释）。

GNU 特有的特性是`grep`标志`-w`，它匹配整个单词。有趣的是，POSIX 2008 指定`-x`应该与精确的行匹配，并且该`-x`选项对我来说可以正常工作（在 Mac OS X 10.7.5 上，但`/usr/bin/grep`在 GNU grep 2.5.1 上）。从理论上讲，`-x`它更便携。由于它也在[POSIX 1997](http://pubs.opengroup.org/onlinepubs/7990989775/xcu/grep.html)标准中，因此应该可以广泛使用。`-w`如果单行上有多个数字（但`grep`会消除整行），则该选项会更合适。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-29T07:16:33.300

您只想打印 file2.txt 的唯一元素。这就是该`comm`实用程序的设计目的：

```
comm -13 <(sort file1.txt) <(sort file2.txt) 
```

*测试*

```
$ cat file1.txt
5
4
6
2
10

$ cat file2.txt
3
7
8
2
4
1
9
10
5
6

$ comm -13 <(sort file1.txt) <(sort file2.txt)
1
3
7
8
9 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-29T02:43:11.243

```
sort file1.txt file2.txt|uniq -u > file3.txt 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-29T02:47:02.300

您可以使用 unix“diff”命令获取差异并过滤掉不需要的行。您可以使用**--changed-group-format**和**--unchanged-group-format**选项来过滤所需的数据。

以下三个选项可用于为每个选项选择相关组：

*   '%<' 从 FILE1 获取行

*   '%>' 从 FILE2 获取行

*   ''（空字符串）用于从两个文件中删除行。

例如：

```
diff --changed-group-format="%>" --unchanged-group-format="" file1.txt file2.txt > file3.txt 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-29T02:43:00.073

你能提供更多关于这些数字是如何格式化的信息吗？他们每个人都在新线上吗？它们的位数都相同吗？

编辑：收到评论后：

```
while read line
do
    bool="false"
    while read secLine
    do
        if [ "$line" == "$secLine" ]
        then
            bool="true"
        fi
    done <file1
    if [ "$bool" == "false" ]
    then
         echo $line >> file3.txt
    fi
done <file2 
```

这将起作用，尽管通过蛮力（或者它应该起作用。检查语法错误。我没有看到任何但可能有一些。）这可能需要一段时间，具体取决于你有多少数字。

# mysql - 分发 MySQL 协议？

> ID：14574790
> 
> 赞同：1
> 
> 时间：2013-01-29T02:40:41.700
> 
> 标签：mysql, lua

我对 MySQL 了解不多，所以我想我不妨先看看是否有可能在开始学习之前做我想做的事。

我想知道是否可以分发软件并让该软件从 MySQL 中的数据库发送/接收数据。

所以说他们正在从分布式应用程序中创建用户名和密码，是否可以在我的服务器上使用该信息？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T02:43:30.610

您永远不想分发包含用户名/密码组合的应用程序。

如果我正确理解您的要求，我的做法是创建一个具有受限权限的 mySQL 用户并创建 PHP 脚本来执行您的数据库访问，使用 HTTP 响应发送和接收您需要的数据。

这种方法不太容易对您的服务器进行攻击。

例子：

> [http://www.example.com/apps/script.php](http://www.example.com/apps/script.php)

```
<?php
    mysql_connect("localhost", "user", "pass");
    print_r(mysql_fetch_assoc(mysql_query("SELECT * FROM some_table"));
?> 
```

在这里，您的应用程序将向上述 URL 发送请求，表格的内容将以原始文本形式打印。然后，您应该设计您的应用程序以根据需要解析响应。

# ios - 将哪些文件发送给我的 iOS 开发人员以接收可测试的应用程序？

> ID：14574793
> 
> 赞同：0
> 
> 时间：2013-01-29T02:41:23.730
> 
> 标签：ios, provisioning, signing

我雇了一个开发人员。他做了应用程序。我想测试一下。

我有的：

1.  Apple 开发者帐户 - 单一的 - 我永远无法弄清楚该公司的国际 ID。
2.  只有我可以访问该帐户（如果这是唯一的方法，我愿意提供访问权限）
3.  我在 Virtual Box 上运行了 OsX 10.6.2 snow lep 一切都很好
4.  XCode 3.2.something（较旧，更新需要新内核并且有问题）
5.  （我可以利用 dev.app.com 上的苹果开发配置向导来获取证书和文件）
6.  我有一个苹果证书文件下载到我的电脑上，这是我在 dev.app.com 上的配置文件下制作的
7.  如果需要，iPod Touch 4g（越狱）。（不知道我是否可以通过虚拟框访问它）

我想做的事...

将任何文件发送给我的 ios 开发人员，以便他可以创建一个文件以通过电子邮件发送给我。我把所说的文件安装在我的 iPod Touch 上，在我的 windows 电脑上。

我需要向他发送什么，以便开发人员能够做到这一点？进一步我需要告诉他做什么。这部分可能看起来很奇怪，为什么“我”不知道如何构建 iOS 应用程序会告诉开发人员如何去做。我已经要求他让这一切发生在以前，并且存在语言障碍。

我不想做的事情：

1.  不再使用 mac（请告诉我这是可能的。）
2.  （以另一种方式说）我想通过将它们放在我的 ipod Touch 上来测试应用程序（使用 iTunes 或 safari 和开发帐户是可以的）但我想使用 Windows。

这可以做到吗？我编码Android。我不知道 Xcode 和处理来自 Xcode 4.6 的构建，然后尝试在 Xcode 3.X 中打开项目，不知道是否存在项目错误等。好吧......学习 xcode jsut 没有意义......我的意思是那时为什么要聘请开发人员？是的，是的，因为他知道 C++ 我得到了那部分。

无论如何，对于这条信息的“风味”部分感到抱歉，我只想发出一条信息，为任何尝试做同样事情的未来旅行者总结“这一切的世界”。

摘要 - 我想在 Ipod Touch（或任何 iOS 设备）上测试应用程序，使用 Windows 将它们安装到设备上。能够并愿意使用 Mac 来创建所需的文件（证书、钥匙串文件等）可以将 Mac 用于所有构建方面。

请提前告知并非常感谢您的编程。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T03:28:41.093

> 1.  不再使用 mac（请告诉我这是可能的。）
> 
> 2 .（以另一种方式说）我想通过将它们放在我的 ipod Touch 上来测试应用程序（使用 iTunes 或 safari 和开发帐户是可以的）但我想使用 Windows。

有可能的。但是，您可能不理解以下步骤，因为这些步骤应该由 iOS 开发人员完成。

步骤1。您的开发人员应该将其存档（在 xcode 中，按 Product，然后按存档）。

第2步。在 xcode 中打开 Organizer（右上角），点击“Archives”页面

第三步。选择您刚刚构建的应用程序。然后单击“分发”按钮并选择“保存为企业或临时部署”

第4步。您将获得 xxx.ipa。您可以在 WINDOWS iTune 中拖动此文件并同步到您的 iPod。

注意：您的 iPod 应标记为“用于开发”并提供有效条款。

# c# - 如何在客户端和服务上使用相同的类？

> ID：14574798
> 
> 赞同：0
> 
> 时间：2013-01-29T02:42:00.220
> 
> 标签：c#, .net, wcf

如何通过 WCF 服务传递整个定义的类？我在服务端和客户端都定义了类。我不断收到错误消息：

> 最佳重载方法匹配有一些无效参数。

整个类从客户端复制到服务端。

客户端调用：

```
TransferProxy.PutTransferOnService(Transfer); 
```

在服务上定义：

```
[OperationContract]
bool PutTransferOnService(TypeTransfer Transfer); 
```

我不想从客户端访问类中的单个项目，我只想移动整个*填充的对象*并在服务器端进行处理。

```
 [DataContract]
    public class TypeTransfer
    {

        private string userID;
        private string transferNum;
        private DateTime effectiveDate;
        private int unitCount;
        private int skuCount;
        private string reason;
        private string localStatus;
        private string destStatus;
        private string carrier;
        private string sourceStore;
        private string destinationStore;
        private string inSeal;
        private string outSeal;

        [DataMember]
        private List<TypeSOQ> correspondingSOQ = new List<TypeSOQ>();

        [DataMember]
        private List<TypeProductList> ProductList = new List<TypeProductList>();

        public TypeTransfer() { }

        // Function adds single item to transfer object
        public void AddItem(int ProductID, string SKU, string PrimarySKU, string SCC, string ProductDescription, int TransferQty)
        {
            ProductList.Add(new TypeProductList
            {
                productID = ProductID,
                sku = SKU,
                primaryUPC = PrimarySKU,
                scc = SCC,
                description = ProductDescription,
                transferQty = TransferQty
            });
        }

        // Add SOQ to transfer object (can support multiple SOQ's)        
        public void AddSOQ(TypeSOQ soq)
        {
            correspondingSOQ.Add(soq);
        }

        // Function returns number of skus in Product List        
        public int GetSKUTotal()
        {
            return ProductList.Count();
        }

        // Function returns total number of items in transfer
        public int GetItemTotal()
        {
            int itemtotal = 0;
            for (int i = 0; i < ProductList.Count(); i++)
            {
                itemtotal += ProductList[i].transferQty;
            }
            return itemtotal;

        }

        // Return entire SOQ list        
        public List<TypeSOQ> GetSOQs()
        {
            return correspondingSOQ;
        }

        // Returns full product list in transfer object        
        public List<TypeProductList> GetProductList()
        {
            return ProductList;
        }

        [DataMember]
        public string UserID
        {
            get { return userID; }
            set { userID = value; }
        }
        [DataMember]
        public string TransferNum
        {
            get { return transferNum; }
            set { transferNum = value; }
        }
        [DataMember]
        public DateTime EffectiveDate
        {
            get { return effectiveDate; }
            set { effectiveDate = value; }
        }
        [DataMember]
        public int UnitCount
        {
            get { return unitCount; }
            set { unitCount = value; }
        }
        [DataMember]
        public string Reason
        {
            get { return reason; }
            set { reason = value; }
        }
        [DataMember]
        public string LocalStatus
        {
            get { return localStatus; }
            set { localStatus = value; }
        }
        [DataMember]
        public string DestStatus
        {
            get { return destStatus; }
            set { destStatus = value; }
        }
        [DataMember]
        public string Carrier
        {
            get { return carrier; }
            set { carrier = value; }
        }
        [DataMember]
        public string SourceStore
        {
            get { return sourceStore; }
            set { sourceStore = value; }
        }
        [DataMember]
        public string DestStore
        {
            get { return destinationStore; }
            set { destinationStore = value; }
        }
        [DataMember]
        public string InSeal
        {
            get { return inSeal; }
            set { inSeal = value; }
        }
        [DataMember]
        public string OutSeal
        {
            get { return outSeal; }
            set { outSeal = value; }
        }
        [DataMember]
        public int SKUCount
        {
            get { return skuCount; }
            set { skuCount = value; }
        }

    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-29T03:00:38.133

You said - `The whole class was copied from the client-side to the service-side`.

You don't need to copy your class to server side. just define your class in a separate library and give reference of that **same** library to both client and server.

# c++ - 科学应用在 Linux 上突然变慢

> ID：14574800
> 
> 赞同：0
> 
> 时间：2013-01-29T02:42:05.760
> 
> 标签：c++, fortran, scientific-computing, xubuntu

我在 Xubuntu 12.10 发行版中使用 c++ 和几个基本的 fortran 例程进行科学计算。多年来，事情一直运行良好。今天突然间，当我弄乱我的代码时，完成每次迭代的时间会在运行中途急剧跳跃。考虑到我犯了一个错误，我恢复到旧的 git 版本，重新制作了整个东西，但仍然遇到同样的问题。我已经在其他计算机上运行了代码，每次迭代的时间保持不变。可能是什么问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-29T02:47:07.270

最佳猜测：您的 CPU 过热。因此，处理器会自我节流以防止损坏。您的代码本身很可能是触发热量飙升的原因。因此，当您“运行到一半”时，您的 CPU 在检测到需要减速的地方已经足够温暖。

检查以确保您的机箱风扇、CPU 风扇和机器上的任何其他冷却装置工作正常。也许只是关闭机器一会儿让它冷却下来，然后重新启动/重新启动将解决问题。

# ios - Flex：如何判断当前应用程序是在模拟器还是真实设备或浏览器上运行

> ID：14574802
> 
> 赞同：0
> 
> 时间：2013-01-29T02:42:55.237
> 
> 标签：ios, apache-flex, ios-simulator

我有一个 Flex 库，用于我的 Flex 移动或 Web 应用程序。如果我在 iPad 模拟器上运行应用程序，`Capabilities.os`给我`Mac OS 10.7.5`，那么我如何（从 Flex 库）判断当前应用程序是在模拟器上运行，还是在真实设备或浏览器上运行？

我正在使用的是：

```
 public static function isSimulator():Boolean
    {
        return Capabilities.version.indexOf("IOS") >= 0 && Capabilities.os.indexOf("Mac OS") >= 0;
    } 
```

但我对此没有那么自信。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T23:50:51.747

见[`Capabilities#isDebugger`](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/system/Capabilities.html#isDebugger)。我不相信您可以分辨出正在模拟哪个设备，但它会告诉您您是否在调试器中。

# ios - 检测用户是否第一次在 iOS 中打开视图

> ID：14574806
> 
> 赞同：2
> 
> 时间：2013-01-29T02:43:11.360
> 
> 标签：ios, iphone, view, nsuserdefaults

我知道如何检测应用程序是否第一次使用 NSUserDefault 打开：

```
BOOL didRunBefore = [[NSUserDefaults standardUserDefaults] boolForKey:@"didRunBefore"];

     if (!didRunBefore) {
      //Your Launch Code
      [[NSUserDefaults standardUserDefaults] setBool:YES forKey:@"didRunBefore"];
      [[NSUserDefaults standardUserDefaults] synchronize];

       } 
```

*问题：我想要一个永远的警报视图，解释它包含哪些功能，并且只在应用程序首次启动时打开此警报？*

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-29T03:03:11.787

作为 OOP 程序员，您可以创建一个通用的公共方法。

```
+ (BOOL)checkWhetherRunBefore:(NSString *)key
{
    return [[NSUserDefaults standardUserDefaults] boolForKey:key];
} 

+ (void)hasRunForMyClass:(NSString *)key
{
    [[NSUserDefaults standardUserDefaults] setBool:YES forKey:key];
    [[NSUserDefaults standardUserDefaults] synchronize];
} 
```

在您的 ViewController 中，您可以像这样在 viewWillAppear 或 viewDidAppear 中编码：

```
- (void)viewWillAppear
{
    if(![HelpController checkWhetherRunBefore:NSStringFromClass([self class])])
    {
        //do your thing
        [HelpController hasRunForMyClass:NSStringFromClass([self class])]
    }

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-29T02:48:17.440

您只需将代码放入 viewDidLoad

当应用加载您的视图时，viewDidLoad 只会运行一次。（内存不足除外）

下次在 viewDidLoad 中再次加载视图时，可以检查 bool didRunBefore

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-29T02:49:02.290

您可以使用任何您想要的密钥。

在`FirstViewController`：

```
BOOL didRunBefore = [[NSUserDefaults standardUserDefaults] boolForKey:@"FirstViewController_didRunBefore"];

if (!didRunBefore) {
    //Your Launch Code
    [[NSUserDefaults standardUserDefaults] setBool:YES forKey:@"FirstViewController_didRunBefore"];
    [[NSUserDefaults standardUserDefaults] synchronize];
} 
```

在`SecondViewController`：

```
BOOL didRunBefore = [[NSUserDefaults standardUserDefaults] boolForKey:@"SecondViewController_didRunBefore"];

if (!didRunBefore) {
    //Your Launch Code
    [[NSUserDefaults standardUserDefaults] setBool:YES forKey:@"SecondViewController_didRunBefore"];
    [[NSUserDefaults standardUserDefaults] synchronize];
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-29T02:54:56.053

你必须需要检测应用程序首次启动，你可以像这样检测t

```
NSUserDefaults *defaults = [NSUserDefaults standardUserDefaults];  
if (![defaults objectForKey:@"firstRun"])
  [defaults setObject:[NSDate date] forKey:@"firstRun"];

[[NSUserDefaults standardUserDefaults] synchronize];
You can then test for it later...

NSUserDefaults *defaults = [NSUserDefaults standardUserDefaults];        
if([defaults objectForKey:@"firstRun"])           
{
  // do something or not...
} 
```

# javascript - Web App 布局 --- 基于 Web App 视图显示/隐藏 Div 元素

> ID：14574809
> 
> 赞同：0
> 
> 时间：2013-01-29T02:43:21.623
> 
> 标签：javascript

我正在尝试布局 Web 应用程序。我的网络应用程序的每个屏幕都是一个面板。我现在有以下面板：主页、关于、设置、游戏和结果。我只想一次显示一个面板。现在只有主面板应该显示，但我的代码不起作用（所有面板现在都显示）。我错过了什么？

jsFiddle：http: [//jsfiddle.net/bNzVA/](http://jsfiddle.net/bNzVA/)

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<title>Untitled Document</title>
<style>
</style>
<script>
window.onload = myOnloadFunc;

function myOnloadFunc() {
    var homePanel = document.getElementById("homePanel");
    var aboutPanel = document.getElementById("aboutPanel");
    var settingsPanel = document.getElementById("settingsPanel");
    var gamePanel = document.getElementById("gamePanel");
    var resultsPanel = document.getElementById("resultsPanel");

    // All panels in app
    var panels = ["homePanel", "aboutPanel", "settingsPanel", "gamePanel", "resultsPanel"];

    // Show selected panel and hide all other panels
    function showPanel(panel) {
        for (var i = 0; i < panels.length; i++) {
            if (panel) {
                // Show panel
                this.style.display = "block";
            } else {
                // Hide
                this.style.display = "none";
            }
        }
    }

    showPanel("homePanel");
}
</script>
</head>

<body>
<!-- homePanel -->
<div class="panel" id="homePanel">
Home panel
</div>

<!-- aboutPanel -->
<div class="panel" id="aboutPanel">
About panel
</div>
</body>

<!-- settingsPanel -->
<div class="panel" id="settingsPanel">
Settings panel
</div>

<!-- gamePanel -->
<div class="panel" id="gamePanel">
Game panel
</div>

<!-- resultsPanel -->
<div class="panel" id="resultsPanel">
Results panel
</div>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T04:59:27.030

您在代码中有几个问题。

1.  `this`关键词。您使用它的方式是指全局对象，即Window。
2.  迭代面板但不将其分配给任何东西。
3.  将节点存储在`panels`
4.  将面板节点与传递给 showPanel 的节点进行比较

我更新了你的小提琴：http: [//jsfiddle.net/bNzVA/2/](http://jsfiddle.net/bNzVA/2/)

```
// All panels in app
var panels = [homePanel, aboutPanel, settingsPanel, gamePanel, resultsPanel];

// Show selected panel and hide all other panels
function showPanel(panel) {
    for (var i = 0; i < panels.length; i++) {
        var p = panels[i]
        if (p === panel) {
            // Show panel
            // this referred to global object, i.e. window
            p.style.display = "block";
        } else {
            // Hide
            p.style.display = "none";
        }
    }
}

showPanel(homePanel); 
```

# gwt - 将逗号放在数字字符串中？

> ID：14574810
> 
> 赞同：1
> 
> 时间：2013-01-29T02:43:30.510
> 
> 标签：gwt

给定一个数字，我想将其转换为字符串，但在数千个位置插入逗号等，例如：

```
int number = 123456;
String formatted = String.valueOf(number);
println(formatted); // but print "123,456"? 
```

GWT 是否提供了这样做的方法，还是我们应该编写自己的方法？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-29T07:33:02.750

第一个是用小数点格式化数字并包含逗号。另一种是没有小数点。我给出这个是因为当我刚开始的时候，第一次弄清楚它并不容易。

```
private NumberFormat decFormat = NumberFormat.getFormat("#,##0.00;(#,##0.00)");
private NumberFormat intFormat = NumberFormat.getFormat("#,##0;(#,##0)"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-29T05:51:30.640

使用GWT 提供的[NumberFormat 。](http://google-web-toolkit.googlecode.com/svn/javadoc/latest/com/google/gwt/i18n/client/NumberFormat.html)

# ruby - 使用 Rails 时区？

> ID：14574812
> 
> 赞同：0
> 
> 时间：2013-01-29T02:43:37.880
> 
> 标签：ruby, ruby-on-rails-3, time, timezone

在 3 周的新指标注册图表上工作，我有以下代码：

```
(3.weeks.ago.to_date..Date.today).map { |date| Metrics.registrations_on(date) } 
```

在 Metrics.rb 中：

```
def self.registrations_on(date)
  date = date.midnight
  end_date = date + 24.hours
  User.where(:created_at => date..end_date).count
end 
```

在加利福尼亚的这一天结束之前，新一天的人数已经开始增加。`created_at`时间戳也是UTC 。

我希望能够使用我们的时区查看今天的统计数据。由于我的数据已经保存为 UTC，我很好奇如何实现这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T04:54:39.087

打开`config/application.rb`、查找`config.time_zone`并为其分配适当的值：

```
config.time_zone = 'Pacific Time (US & Canada)' 
```

重新启动您的应用程序，所有 ruby​​ 日期/时间操作应自动调整为您的时区。

有关所有支持的时区字符串的列表，请使用：

```
bundle exec rake time:zones:all 
```

# r - 使用 svm.tune e1071 包调整 SVM 参数

> ID：14574813
> 
> 赞同：2
> 
> 时间：2013-01-29T02:43:38.933
> 
> 标签：r, svm, libsvm

我正在尝试使用 e1071 包在 R 中使用支持向量机执行分类。使用以下代码并指定成本和伽玛参数，我可以成功训练模型。

```
svm_models <- lapply(training_data,
                function(data)
                {
                  svm(label~., data=data,
                      method="C-classification", kernel="radial",
                      cost=10, gamma=0.1)
                }) 
```

但是如果我在上述函数中执行参数调整，如下代码，

```
svmmodels <- lapply(trainingdata,
                function(data)
                {
                  params <- tune.svm(label~., data=data,
                                    gamma=10^(-6:-2), cost=10^(1:2))
                  svm(label~., data=data,
                      method="C-classification", kernel="radial",
                      cost=params$best.parameter[[2]], gamma=params$best.parameter[[1]])
                }) 
```

然后我收到以下错误：

> predict.svm(ret, xhold, decision.values = TRUE) 中的错误（来自 #4）：模型为空！

这个问题的可能原因是什么？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-11T04:10:06.953

根据`?tune`，应该是`best.parameters`，不是`best.parameter`。尝试在代码中两个实例的末尾添加“s”，看看它是否有效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T04:30:03.223

没有测试数据（甚至没有数据描述），很难说很确定。但是，可以说您的调用与帮助页面`svm`中`tune.svm`的示例不符。`e1071::tune`此外，“成本”和“价格”参数应该作为列表元素给出的形式参数是“范围”。您不需要在输出上运行 svm。

# caching - ServiceStack REST 服务的缓存策略

> ID：14574816
> 
> 赞同：2
> 
> 时间：2013-01-29T02:44:14.843
> 
> 标签：caching, servicestack

我有一个简单的订单服务，想实现缓存。这是我的请求/响应和服务：

```
[Route("/order", "GET")]
[Route("/order/{Id}", "GET")]
public class OrderRequest : IReturn<OrderResponse>
{
    public int Id { get; set; }

    public string Reference1 { get; set; }

    public string Reference2 { get; set; }

    public DateRange CreatedOn { get; set; }

    public DateRange ProcessedOn { get; set; }

    public DateRange ShippedOn { get; set; }

    public DateRange ModifiedOn { get; set; }
}

public class OrderResponse : IHasResponseStatus 
{
    public ResponseStatus ResponseStatus { get; set; }

    public List<Order> Orders { get; set; }
}

public class OrdersService : Service
{
    public object Get(OrderRequest request)
    {
        var cacheKey = UrnId.Create<OrderResponse>(request.Id.ToString());
        return base.RequestContext.ToOptimizedResultUsingCache(base.Cache, cacheKey, new TimeSpan(0,5,0), () =>
        {
            return GetOrders(request);
        });
    }

    public OrderResponse GetOrders(OrderRequest request)
    {
        ..
    }
} 
```

查看文档，为每个缓存项生成一个唯一键。在示例中，这通常是响应对象 + 项目 ID。但是我想缓存不同类型的请求。例如，在我的请求中，我可以指定一个日期范围。如果我在相同的日期范围内发出相同的请求，那么我希望收到缓存的副本。所以我的问题是，根据部分或全部请求参数生成唯一 ID 的最佳方法是什么？也许在请求 DTO 上使用或覆盖 GetHashCode？其次，如果我的缓存包含许多相同类型的对象，即 OrderResponse，我可以删除给定类型的所有项目吗？否则，如果我修改订单，我将不知道要删除哪些缓存对象。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T05:42:27.290

cacheKey 没有什么特别或重要的，它只需要对您要缓存的每个不同项目或结果集都是唯一的。

如果您希望它支持指定日期范围的不同缓存，则需要将变量信息添加到键中。您可以在请求 DTO 上使用唯一属性的组合，或者如果它适合`base.Request.PathInfo`和/或 QueryString 来创建唯一字符串以用作缓存键。

> 其次，如果我的缓存包含许多相同类型的对象，即 OrderResponse，我可以删除给定类型的所有项目吗？

不，每个[CacheProvider](https://github.com/ServiceStack/ServiceStack/wiki/Caching)都不知道缓存的内容，缓存失效逻辑由客户端应用程序管理。

> 否则，如果我修改订单，我将不知道要删除哪些缓存对象。

是的，在这种情况下，您要么必须设置一个过期时间，让它自己过期，要么使用底层缓存提供程序的任何高级特性（如果它们支持的话）。例如，如果您使用`MemoryCacheClient`支持通配符 API：

```
 cache.RemoveByPattern("cache:Orders:*");
 cache.RemoveByRegex("cache:Orders:.*); 
```

因此，如果您使用相同的前缀分层构建密钥，则可以使用单个通配符命令使所有相关缓存无效。

# android - 在android的滚动视图底部添加填充？

> ID：14574817
> 
> 赞同：1
> 
> 时间：2013-01-29T02:44:15.350
> 
> 标签：android, xml, scrollview

我想在此滚动视图的底部添加填充，因为文本与底部的广告重叠。我对android dev还很陌生。我查看了其他几个帖子，但似乎无法弄清楚我的问题。谢谢！

这是我的婚礼片段.xml

```
<?xml version="1.0" encoding="utf-8"?>
<ScrollView xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:fillViewport="false"
    android:gravity="center"
    android:scrollbars="horizontal" android:id="@+id/ScrollView">

<LinearLayout
    android:layout_width="fill_parent"                      
    android:orientation="vertical"
    android:id="@+id/linearLayout2" 
    android:layout_height="wrap_content"  
    android:layout_gravity="center_vertical|center_horizontal">

<TextView
        android:id="@+id/textView1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Formal or Black Tie"
        android:layout_marginTop="16dp"
        android:textAppearance="?android:attr/textAppearanceMedium" 
        android:textStyle="bold" />

    <TextView
        android:id="@+id/textView2"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text=" • This means you should wear a Tuxedo or a dark colored suit."
        android:textAppearance="?android:attr/textAppearanceSmall" />
   </LinearLayout>
</ScrollView> 
```

这是我的activity_main.xml，它是weddingfragment.xml 的父级

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
xmlns:ads="http://schemas.android.com/apk/lib/com.google.ads"
android:layout_width="match_parent"
android:layout_height="match_parent" >

<com.google.ads.AdView android:id="@+id/adView"
                     android:layout_width="wrap_content"
                     android:layout_height="wrap_content"
                     ads:adUnitId=""
                     ads:adSize="BANNER"
                     ads:testDevices=""
                     ads:loadAdOnCreate="true"
                     android:layout_alignParentBottom="true" />
</RelativeLayout> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T03:01:26.713

As I said in the comments, here is an example of XML which you can use to make runtime changes of fragments and still have your adview:

```
 <?xml version="1.0" encoding="utf-8"?>
    <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
        android:layout_width="match_parent"
        android:layout_height="match_parent"

<!-- Get a reference to this fragment and use the fragment .commit() to change it. See the API guides for more info. It must be a framelayout or you can't edit it. -->
        <FrameLayout
            xmlns:android="http://schemas.android.com/apk/res/android"
            android:id="@+id/frag_wedding_container"
            android:layout_width="match_parent"
            android:layout_height="match_parent" >
        </FrameLayout>

<com.google.ads.AdView android:id="@+id/adView"
                     android:layout_width="wrap_content"
                     android:layout_height="wrap_content"
                     ads:adUnitId=""
                     ads:adSize="BANNER"
                     ads:testDevices=""
                     ads:loadAdOnCreate="true"
                     android:layout_alignParentBottom="true" />

    </LinearLayout> 
```

# c - C - 如何在 ctime 函数中实际使用 long long 数据类型

> ID：14574818
> 
> 赞同：0
> 
> 时间：2013-01-29T02:44:26.877
> 
> 标签：c, long-integer, c99, ctime, long-long

我之前试过问这个，但我忘了包括一个问题（因为我刚刚加入该网站），所以我实际上并没有解决我的问题，人们只是告诉我为什么第二段代码是错误的，而不是如何制作它工作。这是家庭作业的一部分。其目的是最终将 INT_MAX+1 放入 ctime 以证明在 32 位机器中日期不能超过 ~2038 的点，因为它自 1970 年以来的秒数用完了位。我的问题很简单，我怎么能把很长很长进入ctime？如何使第二段代码工作？

一切都在 C99 中编译，如果这很重要的话。

作品：

```
 long x = INT_MAX-1;
    printf("Time: %s",ctime(&x)); 
```

不工作：

```
 long long x = INT_MAX+1;
    printf("Time: %s",ctime(&x)); 
```

错误：

```
incompatible pointer type: "Expected 'const time_t *' but argument is of type 'long long int *'" 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T03:08:01.160

你不能。您在使用 32 位`time_t`值的系统上。传递 64 位`long long`将给您一个错误，因为它不起作用。

# c++ - C++ 素数程序

> ID：14574823
> 
> 赞同：-1
> 
> 时间：2013-01-29T02:45:18.463
> 
> 标签：c++, primes

我正在开发一个 C++ 程序，该程序确定并打印用户输入的 3 和整数“x”之间的质数。我假设我需要一个双嵌套循环，一个从 3 迭代到 x，另一个检查数字是否为素数。我认为它需要做一些事情，比如从 2​​ 到 x-1？我只是真的不确定如何在语法方面做到这一点。谢谢你的帮助！:)

编辑：这就是我所拥有的：

```
#include <iostream>
#include <cmath>

using std::cout;
using std::endl;
using std::cin;

int main(){

   int x;
   int i;
   int j;

   cout << "Please enter an integer 'x' greater than 3: " << endl;

   cin >> x;

   if (x <= 3){

        cout << "Please enter new value 'x' greater than 3: " << endl;

        cin >> x;
   }
        for(int i=3; i<=x; i++){
                for(j=2; j<i; j++){
                   if(i%j == 0)
                        break;
                   else if(i == j+1);
                        cout << i << endl;
                   }
        }
        return 0;
} 
```

当我输入 10 作为“x”时，我得到输出：3 5 5 5 7 7 7 7 7 9

谁能告诉我如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T02:53:07.657

如果您`X`的体积足够小，您可以使用 Eratosthenes 筛来更有效地完成此操作。这对于“素数达到 X”的情况是理想的，因为它保留了以前丢弃的素数的内存。它通过为每个候选编号保留一组标志来做到这一点，所有这些标志最初都设置为真（当然除了 1）。

然后取第一个真值 (2)，将其作为素数输出，然后将其所有倍数的标志设置为假。

然后继续：

*   3；
*   5（因为 4 是 2 的倍数）；
*   7（因为 6 是 2 和 3 的倍数）；
*   11（因为 8 和 10 是 2 的倍数，而 9 是 3 的倍数）；
*   13（因为 12 是 2 的倍数）；
*   17（因为 14 和 16 是 2 的倍数，而 15 是 3 和 5 的倍数）；
*   等等。

伪代码类似于：

```
def showPrimesUpTo (num):
    // create array of all true values

    array isPrime[2..num] = true

    // start with 2 and go until finished

    currNum = 2
    while currNum <= num:
        // if prime, output it

        if isPrime[currNum]:
            output currNum

            // also flag all multiples as nonprime

            clearNum = currNum * 2
            while clearNum <= num:
                isprime[clearNum] = false
                clearNum = clearNum + currNum

        // advance to next candidate

        currNum = currNum + 1 
```

否则，您可以根据您的建议进行试用划分。基本思想是检查从 2 到目标数字平方根的每个数字，看看它是否是倍数。在伪代码中，这将是这样的：

```
def isPrime (num):
    // val is the value to check for factor

    val = 2

    // only need to check so far

    while val * val <= num:
        // check if an exact multiple

        if int (num / val) * val == num:
            return false

        // no, carry on

        val = val + 1

    // if no factors found, it is a prime

    return true 
```

您只需要检查平方根的原因是，如果您在上面找到一个因子，那么您已经在平方根*下面找到了相应的因子。*

例如，`3 x 17`是`51`。如果您检查 2 到 50 的数字是否`51`为素数，您会`3`首先找到，这意味着您永远不需要检查`17`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T02:56:28.920

我发现这个非常快速有效

```
 int main(){
    for(int i=3; i<=X; i++)    
            if(IsPrime(i)){
               cout<<i<<endl;
            }
    }

 bool IsPrime(int num){
    /* use commented part if want from 2
        if(num<=1)

            return false;

        if(num==2)

            return true;
    */
        if(num%2==0)

            return false;

        int sRoot = sqrt(num*1.0);

        for(int i=3; i<=sRoot; i+=2)

        {

            if(num%i==0)

                return false;

        }

        return true;
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-29T02:51:40.730

```
int main (char argv) 
{
    int tempNum = atoi(argv);
    for (int i=3; i<=tempNum; i++) 
        for (int j=2; j*j<=i; j++)
        {
            if (i % j == 0) 
                break;
            else if (j+1 > sqrt(i)) {
                cout << i << " ";

            }

        }   

    return 0;
} 
```

[打印从 1 到 100 的素数](https://stackoverflow.com/questions/5200879/printing-prime-numbers-from-1-through-100) 基本上是这个，但经过修改

# c# - 从事件 id 或关键字获取事件日志列表

> ID：14574824
> 
> 赞同：0
> 
> 时间：2013-01-29T02:45:27.010
> 
> 标签：c#, event-log

我正在尝试获取人们尝试登录我们的服务器并禁止在`x`尝试不成功后立即阻止 IP 的事件列表。

这是我到目前为止所拥有的：

```
public partial class Form1 : Form
{
public Form1()
{
  InitializeComponent();
}

private void button1_Click(object sender, EventArgs e)
{
  EventLog eventLog;
  eventLog = new EventLog();
  eventLog.Log = "Security";;
  eventLog.Source = "Security-Auditing";
  eventLog.MachineName = "TGSERVER";

  var count = 0;
  foreach (EventLogEntry log in eventLog.Entries)
  {
    if (count > 200)
    {
      return;
    }
    Console.Write("eventLog.Log: {0}", eventLog.Log);
    count++;
  }
} 
```

不多，但这是一个开始。

我的问题是，我似乎无法隔离这些特定事件，因为我无法按`eventid`or过滤`keyword`，或者至少我看不到办法。

我的目标是获取那些不良尝试的 ip。

有人有什么建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T08:08:46.237

`EventLogEntry`包含`EventID`属性。但要小心，因为`EventID`现在已经过时了。请阅读[EventID 描述](http://msdn.microsoft.com/en-us/library/system.diagnostics.eventlogentry.eventid%28v=vs.90%29.aspx)中的备注部分。据我了解，EventID 显示在 windows eventviewer (eventvwr.msc) 中，但在 eventlog 文件 (.evtx) 中，事件以`InstanceId`.

# c++ - RPG 库存系统教程 C++

> ID：14574825
> 
> 赞同：-2
> 
> 时间：2013-01-29T02:45:26.937
> 
> 标签：c++, inventory

嘿家伙，我想知道是否有 C++ RPG 库存系统的教程或示例代码。我浏览了该网站，我只发现创建了两个类，项目和库存，并将它们中的每一个用于项目的详细信息并将项目保存在链接列表中。

这是我到目前为止所拥有的..

```
using namespace std;

int maxWeight;

class inventory {  //manages the entire inventory
public:
    inventory();
    inventory::inventory(int defaultWeight = maxWeight);

private:
    int maxWeight = 100;

};

class item {  //holds the details about a particular item
public:
    item();
    item(char* name, double weight);    
private:
    char* name;
    double weight;
}; 
```

我希望我对这样一个教程的长期搜索可以结束..

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T03:21:45.757

基本上，据我目前的了解，您正在寻找的是库存中的链接列表来存储所有项目。了解链表的工作原理并从那里继续。你可能需要

1.  添加项目（在添加项目之前检查当前链表的权重）。
2.  删除项目。
3.  打印链接列表中的任何内容。

# django - GSWD Heroku Django manage.py 问题

> ID：14574827
> 
> 赞同：3
> 
> 时间：2013-01-29T02:45:54.193
> 
> 标签：django, heroku, django-manage.py

我在网上完成了一个很棒的 django 教程，但是在最终的 heroku 部署中遇到了问题。

这是 django 教程： http: [//gettingstartedwithdjango.com/en/lessons/introduction-and-launch/](http://gettingstartedwithdjango.com/en/lessons/introduction-and-launch/)

我遇到的问题是最后一次调用heroku：

`heroku python manage.py syncdb`

这是我得到的错误：

```
(blog-venv)vagrant@precise64:/vagrant/projects/microblog$ heroku run python manage.py syncdb
Running `python manage.py syncdb` attached to terminal... up, run.2530
Traceback (most recent call last):
  File "manage.py", line 10, in <module>
    execute_from_command_line(sys.argv)
  File "/app/.heroku/python/lib/python2.7/site-packages/django/core/management/__init__.py", line 443, in execute_from_command_line
    utility.execute()
  File "/app/.heroku/python/lib/python2.7/site-packages/django/core/management/__init__.py", line 382, in execute
    self.fetch_command(subcommand).run_from_argv(self.argv)
  File "/app/.heroku/python/lib/python2.7/site-packages/django/core/management/base.py", line 196, in run_from_argv
    self.execute(*args, **options.__dict__)
  File "/app/.heroku/python/lib/python2.7/site-packages/django/core/management/base.py", line 232, in execute
    output = self.handle(*args, **options)
  File "/app/.heroku/python/lib/python2.7/site-packages/django/core/management/base.py", line 371, in handle
    return self.handle_noargs(**options)
  File "/app/.heroku/python/lib/python2.7/site-packages/django/core/management/commands/syncdb.py", line 57, in handle_noargs
    cursor = connection.cursor()
  File "/app/.heroku/python/lib/python2.7/site-packages/django/db/backends/__init__.py", line 306, in cursor
    cursor = self.make_debug_cursor(self._cursor())
  File "/app/.heroku/python/lib/python2.7/site-packages/django/db/backends/postgresql_psycopg2/base.py", line 177, in _cursor
    self.connection = Database.connect(**conn_params)
  File "/app/.heroku/python/lib/python2.7/site-packages/psycopg2/__init__.py", line 178, in connect
    return _connect(dsn, connection_factory=connection_factory, async=async)
psycopg2.OperationalError: could not connect to server: No such file or directory
        Is the server running locally and accepting
        connections on Unix domain socket "/var/run/postgresql/.s.PGSQL.5432"?

(blog-venv)vagrant@precise64:/vagrant/projects/microblog$ 
```

有什么想法吗

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-03T17:44:10.833

据我所知（git 中级知识） 如果您忘记将 locals.py 添加到 .gitignore 文件并提交它，那么 git 存储库中仍会有 locals.py 文件。

您必须从 git 存储库中删除该文件，因为它包含在以前的提交中。

```
git rm --cached microblog/settings/local.py 
```

然后将 microblog/settings/local.py 添加到 .gitignore 并提交更改。

一旦 heroku 看到正确的 DATABASES 设置。然后syncdb工作正常

```
DATABASES = {'default' : dj_database_url.config() } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-30T00:40:47.117

您是否将： *microblog/settings/local.py*添加 到 .gitignore 文件中？

如果这不起作用，请尝试注释掉 local.py 文件中的 DATABASES = {....} 位，看看是否有效

[https://github.com/kennethlove/gswd-transcripts/blob/master/lesson-01.md](https://github.com/kennethlove/gswd-transcripts/blob/master/lesson-01.md)

# c++ - std::deque 或 std::list

> ID：14574831
> 
> 赞同：7
> 
> 时间：2013-01-29T02:46:13.827
> 
> 标签：c++, performance, list, deque

我正在使用`push_front()`并且`push_back()`只有。因此，我不会因使用`insert()`or而产生任何其他费用`remove()`。

我知道这两个容器都`O(1)`为这些功能中的每一个提供了复杂性，`deque`与 s 具有恒定时间相比，s 具有摊销`list`的恒定时间。

但我想知道哪个时间比另一个少，如果有的话。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-29T02:50:41.543

不知道如何回答你的问题。您似乎希望我们编写一个您自己可以轻松编写的基准程序。因此，我不这样做，而是说明这一点：

*   使用 a `list`，您推送的每个项目都会导致内存分配。
*   使用 a `deque`，一次分配大块。

鉴于内存分配通常很慢，我预计会优于`deque`列表。

如果您一次推送或弹出许多项目，则尤其如此，因为缓存局部性开始发挥作用。

当然，你可以在列表上写一个分配器来使用内存池。那么你可能会得到更好的表现。

因此，考虑到这些假设，离开并*测量*它，如果你想讨论结果，那就是提出问题的时候了。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-29T03:04:24.750

每当谈到性能时，“猜测”（或在互联网上询问，这比猜测稍微好一点，但只是有点）是一个坏主意，并且总是最好测量这两个选项 - 在这种情况下，只需执行一个循环, 和 push_back 或 push_front 足够的东西使它变得现实[你可能想让它更现实并运行你的代码所做的大部分事情，并在循环中执行足够的时间以使其持续足够长以测量时间 - 它通常更多比向`list`/添加大量值`deque`然后发现“当你必须换出时，它变得非常慢！”更现实。

# php - json编码的php数组在javascript中返回未定义

> ID：14574834
> 
> 赞同：0
> 
> 时间：2013-01-29T02:46:40.033
> 
> 标签：php, javascript, mysql, json

这是上一篇文章的后续[。](https://stackoverflow.com/questions/14571491/javascript-only-producing-last-value-of-json-encoded-array)

我正在尝试通过 json_encode 将一些数据传递给 javascript。

我以为我可以将数据放入 javascript 数组中，如下所示：

```
 var data = [<?php echo json_encode($result_array); ?>]; 
```

但是当我尝试调用值时，它们返回未定义。我想它可能会将数据作为单个字符串放入数组中。

如果有人能提供建议，那就太好了。非常感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T02:49:39.043

如果`$result_array`是php中的一个数组，那么你只需要这样做：

```
var data = <?php echo json_encode($result_array); ?>; 
```

# .net - 使用其他表模式中的列更新表模式

> ID：14574835
> 
> 赞同：0
> 
> 时间：2013-01-29T02:46:47.480
> 
> 标签：.net, sql, sql-server, sql-server-2008

我正在开发数据迁移工具。当用户将字段添加到 UI 中的实体时，数据库架构本身会更新。这在尝试移动数据时会造成严重破坏。

我目前有一个包含所有源数据的临时表，但该临时表可能包含目标表没有的额外列。有没有办法用另一个表（在这种情况下是临时表）中的模式来更新表模式？表上有约束和索引，所以我不能只选择一个新表然后将其重命名为旧表。

我正在使用 .NET 4.0（所以没有 SMO），但 SQL 解决方案很好。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T03:09:57.303

我建议在存储过程中为此使用动态 SQL。

您要做的是找出临时表的架构。假设您创建了一个名为 #nameoftemptable 的临时表，这应该有助于您入门：

```
SELECT t.name, c.name as colname, types.name, types.max_length
FROM tempdb.sys.tables t 
   JOIN tempdb.sys.columns c on t.object_id = c.object_id
   JOIN sys.types on c.system_type_id = types.system_type_id
WHERE t.name like '#nameoftemptable%' 
```

注意“tempdb”的使用——这是存储临时表的地方。这将返回临时表中的所有列及其数据类型。

接下来，您需要为类似的查询返回相同的数据，但不是查询 tempdb，而是查询您的数据库名称和表名称：

```
SELECT t.name, c.name as colname, types.name, types.max_length
FROM dbname.sys.tables t 
   join dbname.sys.columns c on t.object_id = c.object_id
   join dbname.sys.types on c.system_type_id = types.system_type_id
where t.name = 'TableName' 
```

现在您应该能够比较哪些列是新列并`ALTER TABLE`相应地使用该命令。

希望这会有所帮助，祝你好运。

# python - 方案中的对和python中的元组之间的区别？

> ID：14574836
> 
> 赞同：0
> 
> 时间：2013-01-29T02:46:53.000
> 
> 标签：python, scheme

在 Scheme 中，如果您有一个配对列表，例如：

`((4 . 7) (4 . 9))`

这基本上不是 2 个元素元组的列表吗？所以如果你用python写这个，会不会是这样的：

`[[4, 7], [4,9]]`还是`[(4, 7), (4,9)]`？

我希望它尽可能接近python。或者创建一个类会更接近？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T02:50:23.913

在 Scheme 术语中，将 pair 称为二元素元组是没有意义的，因为这意味着在 Scheme 中存在三元素元组或四元素元组之类的东西，但实际上并没有。

也就是说，与 Scheme 对最接近的 Python 概念确实是一个二元素元组。对列表绝对不同于列表列表。

哦，回答你在标题中暗示的问题：

在 Scheme 中，列表要么是空列表 ( `()`)，要么是第二个元素是列表的对。所以每个列表都是一对，但有些对不是列表。例如，该对`(1 . (2 . ()))`是一个列表（通常写为`(1 2)`），但该对`(1 . 2)`不是一个列表，因为`2`它不是一个列表。

这些都不适用于 Python。Python 列表是可增长的数组——不是由对/元组组成的链表。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T03:20:54.407

scheme(pair) 和 python(tuple) 有很多不同，比如 tuple 是不可变的，而其他的不是，pair 返回 0 当它不是一对但 tuple 可以代表一个值 (x,) 等等。

阅读：[http](http://www.tutorialspoint.com/python/python_tuples.htm) ://www.tutorialspoint.com/python/python_tuples.htm （对于python） [http://www.gnu.org/software/guile/manual/html_node/Pairs.html](http://www.gnu.org/software/guile/manual/html_node/Pairs.html)（对于Scheme）

:)

# android-maps-v2 - Google Maps Android API v2 getVisibleRegion() 返回 0

> ID：14574839
> 
> 赞同：3
> 
> 时间：2013-01-29T02:47:08.943
> 
> 标签：android-maps-v2

我正在使用新的 Google Maps Android API v2，需要检测屏幕视图角落的 latlng 坐标。我使用 mMap.getProjection().getVisibleRegion() 来执行此操作，这在我第一次加载程序时工作正常，但如果我离开程序然后重新打开它（通过后退按钮或主页按钮）getVisibleRegion () 返回全为 (0.0, 0.0) 的 latlng 坐标。我有一个解决方法，当我第一次打开程序时，我将 VisibleRegion 对象保存为应用程序类中的全局对象，但这似乎是个坏主意。任何人都明白为什么重新打开时纬度坐标变为零（但不是空）？谢谢！

编辑：有时初始加载会给出 (0.0, 0.0) 可见区域，所以我的解决方法不可行。使用 getProjection().fromScreenLocation(point) 也返回 0。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-04T10:58:18.510

好的，我想我解决了：我猜对了：地图不可见，因此也没有可见区域（换句话说，从 0,0,0,0 到 0,0,0,0 的区域）。类似于这个问题

[Android Google Maps API v2 从 onResume 调用 getProjection](https://stackoverflow.com/questions/14381282/android-google-maps-api-v2-calling-getprojection-from-onresume)

我在我的地图上附加了一个 onCameraChanged-Listener。每次移动地图（或相机可用 => 有一个可见区域）时，都会调用此方法。

```
private void initMap() {
    mMap = getMap();

    if (mMap != null) {
        try {

            mMap.setLocationSource(this);
            mMap.setOnMarkerClickListener(this);
            mMap.setOnCameraChangeListener(new OnCameraChangedListener() {
                @Override
                public void onCameraChange(CameraPosition cameraPosition) {
                  Log.d(TAG, "onCameraChange");
                  updateMapItems();
                }
            }
            MapsInitializer.initialize(getActivity());

            ...
        }
    }
} 
```

此侦听器确保您有一个可见区域。

**更新：**由于谷歌地图 API v2 的新更新，有一个回调`onMapReady()`。我还没有使用它，但它似乎正是这个问题的目的：[https ://developer.android.com/reference/com/google/android/gms/maps/OnMapReadyCallback.html](https://developer.android.com/reference/com/google/android/gms/maps/OnMapReadyCallback.html)

# excel - 如何将年份（日期）标准添加到 DSUM？

> ID：14574840
> 
> 赞同：0
> 
> 时间：2013-01-29T02:47:14.177
> 
> 标签：excel, date, format, wildcard

我有一个看起来像这样的数据库：

```
(A1)客户 (B1) 日期 (C1) 债务
(A2)1 (B2) 2008 年 11 月 2 日星期一 (C2) 1500$
(A3)2 (B3) 2008 年 2 月 7 日星期四 (C3) 1000$
(A4)3 (B4) 2009 年 3 月 28 日星期六 (C4) 800$
(A5)4 (B5) 2009 年 3 月 16 日星期一 (C5) 1200$

```

日期格式为 24/11/2008。我必须使用 DSUM 来获得客户在 2008 年的债务总额。

我已经做了一个看起来像这样的表：

```
(A7)客户 (A7) 日期 (C7) 债务
                       (A9) 2008                               

```

和功能`=DSUM(A1:C5,3,A7:C8)`，但似乎我无法从 2008 年 11 月 24 日的日期中提取 2008 年的值。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-29T03:57:46.370

将日期存储为文本通常不是一个好主意，将 2008 年更改为 2008 年 1 月 1 日并将格式设置为“YYYY” 要使用 DSUM 来汇总日历年中的条目，您必须定义开始日期和结束日期，因此您的过滤器数据将如下所示：

```
Client  Date           Date
debts   =">=1/1/2008"  ="<1/1/2009" 
```

# php - 如何在回声中更改 PHP 中变量的字体颜色

> ID：14574842
> 
> 赞同：1
> 
> 时间：2013-01-29T02:47:56.897
> 
> 标签：php

```
echo  $display; 
```

所以我们知道默认颜色是黑色。但我想把它改成白色。尝试过的代码如

```
"<div style=\"color: white;\">$display</div>"; 
```

但它不起作用。你能帮我解决这些问题吗？提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-29T03:12:19.600

```
<?php
    $Color = "red";
    $Text = "This text is red";

    echo '<div style="Color:'.$Color.'">'.$Text.'</div>';
?> 
```

在 php 中，您可以使用`.`将变量添加到一起。在这种情况下，回显线的最终输出是：

```
<div style="Color:red">This text is red</div> 
```

可以在[此处查看](http://beta.tinyclark.com/stackstuff/textcolor.php)此代码的使用示例。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-02-11T11:41:12.860

```
<span style="color:white;"><?php echo $display; ?></span> 
```

希望它可能会有所帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-29T03:09:11.050

```
<?php
$yourtext = "Some text";
?>
<div style="color:<?php echo ((@$_GET["color"]) && !empty(@$_GET["color"])) ? $_GET["color"] : "black"; ?>" ><?php echo $yourtext; ?></div> 
```

在网址中`http://yoursite.you/yourpage.php?color=white`

绿色的

黄色

蓝色等...

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-29T03:43:35.617

如果应用的颜色甚至内联样式都不起作用，那么您可以使用`!important`word, cos 可能所有 div 颜色都来自 css 文件并抑制内联样式。

```
"<div style=\"color: white !important;\">$display</div>"; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-07-08T20:56:58.343

如果您有一个 div 并且想要更改其文本和文本颜色，那么只需复制并粘贴此代码即可。

```
 echo "<script type='text/javascript'>";
      echo"var ele= document.getElementById('login_status');
     ele.innerHTML ='* Your <font color=#ff3322> Email </font> is incorrect ';";

   echo "</script>"; 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-07-06T20:55:50.100

我知道这是一个老问题，但我会写下答案，以防有人有同样的问题并且不知道去哪里找。我认为您想打印链接，所以这就是以前的方法不起作用的原因。在您的 php 文件中写入以下内容：

```
echo "<html>
<head>
     <style>
     /* unvisited link */
     a:link {
        color: red;
     }

     /* visited link */
     a:visited {
         color: green;
     }

     /* mouse over link */
      a:hover {
          color: hotpink;
     }

     /* selected link */
     a:active {
         color: blue;
     }
    </style>
</head>

<body>
    $variableYouWantToChangeColor
</body>
</html>"; 
```

您可以更改/删除 css 的某些部分，使其符合您的需求。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-02-01T08:56:42.083

它可与引导程序一起使用

```
 <p class="text-primary"><?php echo $distance; ?></p> 
```

我发现当我尝试从计算中回显结果时

```
 <p class="text-primary"><?php echo  round ($distance,2); ?></p> 
```

# ios - Objective-c 控制变换旋转

> ID：14574843
> 
> 赞同：0
> 
> 时间：2013-01-29T02:48:07.567
> 
> 标签：ios, transform, cgaffinetransform, cgaffinetransformscale

我有一个图像网格，我在单击图像时放大和缩小。一切正常，但我无法控制 CGAffineTransform 的旋转。我想我可以通过角度来控制我的旋转是如何确定的，但是当我这样做时，变换不会放大，我会被缩小。
我觉得我在创建例程期间错过了某个地方的正确实现，所以如果有人能指出我哪里出错了，我会很感激这是我的代码

```
 float angle =  -1.661799;

     if(status == 0){
             [UIView animateWithDuration:1.5f delay:0.0f
               options:UIViewAnimationOptionCurveEaseIn animations:^{
                  CGAffineTransform totalTransform =
                  CGAffineTransformMakeTranslation(-middleX  , -middleY );
                  totalTransform = CGAffineTransformScale(totalTransform, 3.5f, 3.5f);
                  totalTransform = CGAffineTransformTranslate(totalTransform, middleX , middleY );
                  //totalTransform = CGAffineTransformMakeRotation(angle);
                 [self.view setTransform:totalTransform];
             }completion:^(BOOL finished) {
             }];
            status++;
     }else{
            [UIView animateWithDuration:1.3f delay:0.0f 
               options:UIViewAnimationOptionCurveEaseIn animations:^{

                  CGAffineTransform tr = CGAffineTransformMakeScale(1.00 ,1.00);
                  [self.view setTransform:tr];
                }completion:^(BOOL finished) {

                  [UIView animateWithDuration:1.3f delay:0.0f 
                  options:UIViewAnimationOptionCurveEaseIn animations:^{
                        CGAffineTransform totalTransform =
                        CGAffineTransformMakeTranslation(-middleX  , -middleY );
                        totalTransform = CGAffineTransformScale(totalTransform, 3.5f, 3.5f);
                        totalTransform = CGAffineTransformTranslate(totalTransform, middleX , middleY );
                        //totalTransform = CGAffineTransformMakeRotation(angle);
                        [self.view setTransform:totalTransform];
                   }completion:^(BOOL finished) {}];

               }];
               status = 0;
      } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T04:43:48.997

这是一个老问题——但万一有人回过头来：

当您进行一系列转换时，您需要使用正确的调用。每种类型的变换（旋转、平移、缩放）有两个调用。一种用于组合变换，另一种用于进行新的变换。

第一个呼叫可以是“Make”呼叫。随后的调用需要是非制造品种。

"Make" 调用，生成一个变换矩阵：

```
CGAffineTransformMakeRotation(angle) 
```

non-make call，它修改现有的转换矩阵：

```
CGAffineTransformRotate(existingMatrix, angle) 
```

所以，从你的代码：

```
CGAffineTransform totalTransform = 
      CGAffineTransformMakeTranslation(-middleX  , -middleY );
totalTransform = CGAffineTransformScale(totalTransform, 3.5f, 3.5f);
totalTransform = CGAffineTransformTranslate(totalTransform, middleX , middleY );
totalTransform = CGAffineTransformMakeRotation(angle); 
```

您的第一次调用创建了一个矩阵，这是适当的。但是，您的轮换电话（第 4 次电话）应该是：

```
 totalTransform = CGAffineTransformRotate(totalTransform, angle); 
```

否则，正如您所注意到的，您在该调用之前丢弃所有转换，并且仅获得旋转，在这种情况下，或者您的最后一次转换将是什么。

# oauth-2.0 - 公共客户端上的客户端身份验证

> ID：14574846
> 
> 赞同：23
> 
> 时间：2013-01-29T02:48:20.093
> 
> 标签：oauth-2.0

研究 OAuth2.0 我终于找到了这两个参考： [RFC6749 section 2.3](https://www.rfc-editor.org/rfc/rfc6749#section-2.3) , [RFC6749 section 10.1](https://www.rfc-editor.org/rfc/rfc6749#section-10.1)

如我错了请纠正我：

> 可以使用未注册的客户端，但您必须自己管理它们，存在安全风险。

*   我应该如何管理它们？

一些更具体的问题：

1.  根据定义，本机应用程序（确实是[公共客户端）](https://www.rfc-editor.org/rfc/rfc6749#section-2.1)**无法**安全地存储其凭据（client_id + secret）。是[未注册的客户](https://www.rfc-editor.org/rfc/rfc6749#section-2.4)吗？如果我无法使用秘密验证/验证它，我还应该怎么做？
2.  客户端注册≠端点注册：首先是关于注册Client Credentials（`client_id + secret`）；第二个关于注册[客户端重定向端点](https://www.rfc-editor.org/rfc/rfc6749#section-3.1.2)。重定向端点注册是否足以授予客户端的真实性？
3.  [客户端凭据授予](https://www.rfc-editor.org/rfc/rfc6749#section-1.3.4)是否使用**相同**的凭据 ( `client_id + secret`) 进行客户端注册？

我认为您可以通过解释[本段（RFC6749 第 10.1 节）](https://www.rfc-editor.org/rfc/rfc6749#section-10.1)的含义来回答我。

请给我一些关于如何实现授权服务器和资源服务器之间的交互的参考和实例。

谢谢

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2013-02-03T05:19:24.747

**tl;博士：**

1.  **本机客户端无法使用`client_id`和进行身份验证`client_secret`。如果您需要对客户端进行身份验证，则必须实施不将共享机密委托给客户端的身份验证方案（或让最终用户参与客户端身份验证讨论）。根据您的应用程序的安全模型，您可能*不需要*对客户端进行身份验证。**
2.  **重定向端点通常不足以对客户端进行身份验证（尽管[存在例外](https://www.rfc-editor.org/rfc/rfc6749#section-1.3.2)）。**
3.  **“客户端凭据”授权类型可以使用授权服务器支持的任何客户端身份验证机制，包括在客户端注册时给出的凭据。**

正如我所读的那样，要点是您可以信任机密客户的`client_id`（阅读：“用户名”）和`client_secret`（阅读：“密码”）来使用您的服务对他们进行身份验证。第三方应用程序不可能使用该客户端的凭据来代表自己，因为它们被合理地假设为安全地存储在远离窥探的地方。

然而，公共客户端无法做出这样的保证——无论是基于浏览器的应用程序还是本机桌面应用程序，客户端的 id 和秘密都分发给整个世界。可以合理地假设此类应用程序最终将落入熟练的开发人员和黑客手中，他们可以深入挖掘客户端并提取 id 和秘密。出于这个原因，第 10.1 节明确指出：

```
The authorization server MUST NOT issue client passwords or other
client credentials to native application or user-agent-based
application clients for the purpose of client authentication. 
```

好的。因此公共客户端无法通过密码进行身份验证。不过……</p>

```
The authorization server MAY issue a client password or other
credentials for a specific installation of a native application
client on a specific device. 
```

此异常有效，因为它将客户端的身份验证绑定到特定设备，这意味着即使有人离开了客户端的秘密，他们也无法重用它。然而，在这个例外中隐含的是，“特定设备上的特定安装”必须是唯一可识别的、难以欺骗的，并且是该客户端身份验证过程的组成部分。

并非每个本机应用程序都能满足这些标准，而基于浏览器的应用程序当然不能，因为在它运行的环境中没有唯一可识别或难以欺骗的东西。这导致了几个选项——您可以将客户端视为未经身份验证，或者您可以提出更合适的身份验证机制。

身份验证舞蹈的关键是共享秘密——只有授权服务器和身份验证客户端知道的东西。 **对于公共客户端，客户端本身没有什么是秘密的。** 值得庆幸的是，有很多选择，而且我不只是在谈论 RFID 密钥卡和生物识别技术（尽管这些是完全可以接受的）。

作为一个思想实验，让我们考虑一个基于浏览器的客户端。我们可以合理地假设一些事情：它在浏览器中运行，它从特定域提供服务，并且该域由客户端的作者控制。身份验证服务器应该已经有一个客户端重定向 URI，所以我们已经有了一些东西，但是正如规范所指出的：

```
A valid redirection URI is not sufficient to verify the client's
identity when asking for resource owner authorization but can be
used to prevent delivering credentials to a counterfeit client
after obtaining resource owner authorization. 
```

所以重定向 URI 是我们应该*检查*的东西，但不是我们可以**信任**的东西，很大程度上是因为域可能被欺骗。但是服务器本身不能，所以我们可以尝试向域询问只有客户端域的服务器才知道的东西。最简单的方法是认证服务器需要第二个（“私有”）URI，与客户端在同一个域中，客户端的密钥将在其中托管。当客户端应用程序发出授权请求时，服务器然后“签入”*相对于客户端报告的主机名的*第二个 URI ，并查找共享密钥（仅应向授权服务器披露）

当然，这不是一个完美的解决方案。它不适用于每个应用程序，很容易出错，并且可能需要大量工作才能实现。存在许多潜在的身份验证机制（包括高度特定的和高度通用的），并且任何不将私有数据委托给客户端应用程序的机制都适用于这个问题空间。

我们的另一个选择是不实施进一步的身份验证，并将客户端视为未经身份验证。这与未注册的客户明显*不同*，但区别很微妙。未注册客户是身份**未知**的客户。未经身份验证的客户端是其身份**已知但不受信任**的客户端。两种类型的客户端的安全含义是相同的：都不应该委托私人数据。然而，授权服务器是否选择同等对待这两种情况似乎是由实施者决定的。例如，一个 API 拒绝*所有*来自未注册客户端的连接，并向任何注册客户端提供公共只读内容（即使没有验证客户端的身份）。

然而，实用主义可能会胜出——未经身份验证的客户端与 SSL“错误”基本上没有什么不同，当您的浏览器无法验证站点 SSL 证书的真实性时，您偶尔会看到。浏览器将立即拒绝继续并准确报告*原因*，但允许用户通过保证服务器的身份自行承担风险。类似的工作流程可能对许多 OAuth2 应用程序有意义。

为什么验证客户的身份很重要呢？如果不这样做，信任链就会中断。您的应用程序的用户信任*您的应用程序*。授权工作流确定您的用户也信任*客户端*，因此您的应用程序应该信任客户端。在不验证客户端身份的情况下，另一个客户端可以出现并承担受信任客户端的角色，并拥有其所有安全权限。有关客户端身份验证的所有内容都有助于防止违反信任。

希望这有帮助！

[1]：服务器入侵，即您的应用程序的源代码落入恶意手中，这是一个例外，并且针对这种情况内置了其他保护措施。话虽如此，规范还特别指出简单的用户名/密码组合不是最安全的选择：

```
The authorization server is encouraged to consider stronger
authentication means than a client password. 
```

# android - 在尚未停用或关闭的 null 上完成光标

> ID：14574847
> 
> 赞同：0
> 
> 时间：2013-01-29T02:48:20.267
> 
> 标签：android, database, sqlite, cursor

在我的应用程序中，我尝试使用以下代码来验证用户电子邮件地址是否存在于数据库中。如果用户电子邮件地址不存在，它会将用户信息插入数据库。但是出现了这条消息，我无法将用户信息输入数据库。我不确定这里有什么问题。

**MainActivity.java**

```
public void onCreate(){
   helper = new DBHelper(this);

    Button loginButton = (Button) findViewById(R.id.login_btn);
    loginButton.setOnClickListener(new View.OnClickListener() {
        @Override
        public void onClick(View view)
        {
            if(useremail.length() == 0){

                alertMessage = "Please enter Email Address.";
                dialogBox();
            }
            else if (password.length() == 0){

                alertMessage = "Please enter Password.";
                dialogBox();
            }

            else {
                emailid = useremail.getText().toString();
                userpassword = password.getText().toString();

               if(!helper.emailidChecking(emailid)){
                    helper.insert_wbm_user(emailid);
               }
               else{
                    alertMessage="User email exists";
                    dialogBox();
               }
           }
        }
     });
}

public void onDestroy(){
       super.onDestroy();
       helper.close();
} 
```

**DBHelper.java**

```
 public boolean emailidChecking(String emailid) throws SQLException
{
    helper = this.getReadableDatabase();
    Log.i(TAG, "emailidChecking:" +emailid);
    Cursor c = helper.rawQuery("SELECT * from user_info where emailid='"+emailid+"'", null);
    if(c.getCount()==0){  
        //not in db
        Log.i(TAG, "getCount = 0");
        return true;
    }
    if (c != null && !c.isClosed()) {
        c.close();
    }
    if (helper!=null){
        helper.close();
    }

    return false;

}

public long insert_user_info(String emailid) {

    ContentValues cv=new ContentValues();
    cv=new ContentValues();
    cv.put("emailid", emailid);

    Log.i(TAG, "insert db");

    long createdinMsg = getWritableDatabase().insert("user_info", "emailid", cv);
    return createdinMsg;

} 
```

**日志猫**

```
01-29 10:03:12.007：D/Cursor(2143)：数据库路径：/data/data/com.ff.fbin/databases/wbdb.db
01-29 10:03:12.007: D/Cursor(2143): 表名: null
01-29 10:03:12.007: D/Cursor(2143): SQL: SQLiteQuery: SELECT * from user_info where emailid='asd@hotmail.com'
01-29 10:03:12.007: I/dalvikvm(2143): 终结器抛出未捕获的异常（将被丢弃）：
01-29 10:03:12.007: I/dalvikvm(2143): Ljava/lang/IllegalStateException;: 在尚未停用或关闭的 null 上完成游标 android.database.sqlite.SQLiteCursor@405b07e8
01-29 10:03:12.011: I/dalvikvm(2143): 在 android.database.sqlite.SQLiteCursor.finalize(SQLiteCursor.java:620)
01-29 10:03:12.011: I/dalvikvm(2143): 在 dalvik.system.NativeStart.run(Native Method)

```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T03:41:30.930

```
public boolean emailidChecking(String emailid) throws SQLException
{
   helper = this.getReadableDatabase();
   Log.i(TAG, "emailidChecking:" +emailid);
   Cursor c = helper.rawQuery("SELECT * from user_info where emailid='"+emailid+"'", null);
   if(c.getCount()==0){  
    //not in db
       Log.i(TAG, "getCount = 0");
       c.close();
       return true;
   }
   if (c != null && !c.isClosed()) {
       c.close();
   }
   if (helper!=null){
       helper.close();
   }

   return false;

} 
```

`c.close();`通过包含之前解决的问题`return true;`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T08:45:36.387

> ```
> public boolean emailidChecking(String emailid) throws SQLException
>  {
> helper = this.getReadableDatabase();
> Log.i(TAG, "emailidChecking:" +emailid);
> Cursor c = helper.rawQuery("SELECT * from user_info where emailid='"+emailid+"'", null);
> try
> {
>     if(c.getCount()==0){  
>         //not in db
>        Log.i(TAG, "getCount = 0");
>        c.close();   <-------- Close the cursor here.
>        return true;
>      }
>  }
>  finally
>  {
>      c.close();
>      if (helper!=null){
>         helper.close();
>        }
>    }
>  } 
> ```

# css - IE 不显示我的底部背景图像

> ID：14574848
> 
> 赞同：0
> 
> 时间：2013-01-29T02:48:32.313
> 
> 标签：css, html

我创建了一个网页，它使用两张图片作为背景——一张用于顶部，一张用于底部。Chrome、Safari 和 Firefox 显示页面没有问题，但在 IE 中，底部的背景不显示。这是我正在使用的代码：

```
html {
  font:100%;
  background:url(../images/test8-300.jpg) repeat-x, url(../images/Html-background-Bottom2.png) no-repeat bottom;
  background-color:#d7d7d7;
} 
```

如果您需要看一下以更好地理解，这是地址：doggiestime.co.uk。在底部，您应该能够看到一些狗。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T02:55:36.647

尝试

```
background:#fff repeat-x no-repeat bottom;
background-image:url(../images/test8-300.jpg), url(../images/Html-background-Bottom2.png); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T03:22:25.503

您需要将背景图像设置为`<body>`标签而不是`<html>`

```
body {
  font:100%;
  background:url(../images/test8-300.jpg) repeat-x, url(../images/Html-background-Bottom2.png) no-repeat bottom;
  background-color:#d7d7d7;
} 
```

# mongodb - 在 mongodb 中找不到 ipintervals 的良好索引

> ID：14574850
> 
> 赞同：0
> 
> 时间：2013-01-29T02:48:37.723
> 
> 标签：mongodb, indexing

我有一个名为 Cities 的集合，其中包含城市信息。每个城市文档都有一个内部 IpIntervals 数组 ({StartNum, EndNum})，其中包含城市的 IpIntervals。使用公式 256 * 256 * 256 * a + 256 * 256 * b + 256 * c + d 计算每个间隔边界，其中“abcd”是 IP 地址。要通过 ip 地址查找位置，我正在使用查询：

`{IpIntervals: $elemMatch: {"StartNum": {$lte: <<my_ip_num>>}, "EndNum": {$gte: <<my_ip_num>>}}}}`

效果很好，但大约需要 270 毫秒，所以我想使用一些索引。我尝试了不同的索引，例如：

`{"IpIntervals.StartNum": 1, "IpIntervals.EndNum": 1}`, `{"IpIntervals.StartNum": -1, "IpIntervals.EndNum": 1}`, `{"IpIntervals.StartNum": 1, "IpIntervals.EndNum": -1}`,`{"IpIntervals.StartNum": 1}`

但似乎没有任何效果：它总是 BasicCursor 和 270ms，这不好。关于在这种情况下适合什么索引的任何想法？谢谢。

样本数据：

```
{ 
    "_id" : { "$oid" : "51015e8bd246e8e455ee027d" }, 
    "Name" : "SomeCity", 
    "Latitude" : 28.755787, 
    "Longitude" : 37.617634, 
    "IpIntervals" : [ 
         { "StartNum" : 2457360384, "EndNum" : 2457360639 }, 
         { "StartNum" : 2457361408, "EndNum" : 2457362431 }, 
         { "StartNum" : 2457364480, "EndNum" : 2457366527 }, 
         { "StartNum" : 2461648896, "EndNum" : 2461650943 }
     ] 
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T07:12:34.343

终于找到了大约需要 2 毫秒的查询
`db.Cities.find({"IpIntervals.StartNum": {$lte: <<my_ip_num>>}}).limit(1).sort({"IpIntervals.StartNum": -1})`和索引解决方法。`{"IpIntervals.StartNum": 1}`

* * *

由于 ip 间隔不重叠，我可以订购 StartNums 并获得最接近 my_ip_num 的值。我仍然没有找到任何好的查询索引 `{IpIntervals: $elemMatch: {"StartNum": {$lte: <<my_ip_num>>}, "EndNum": {$gte: <<my_ip_num>>}}}}`

# c - c/c++ for 循环条件语句

> ID：14574865
> 
> 赞同：0
> 
> 时间：2013-01-29T02:49:40.927
> 
> 标签：c, loops, for-loop

伙计们，

我在 for 循环中添加了一个逻辑表达式，但它的行为不像我预期的那样。你能给我一点光吗？非常感谢。

以下代码工作正常

```
for (i=0;i<N;++i)
    if (a[i] == 1){
        ....
    } 
```

我试着这样写，似乎 for 循环被完全跳过了。

```
for (i=0;i<N && a[i]==1;++i){
    ....
} 
```

第二种方式有什么问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-29T02:54:43.147

当条件为真时循环继续。请记住，for 循环`for(A; B; C)`可以替换为 [概念上]：

```
A;
while(B)
{
   ...
   C;
} 
```

所以你有了：

```
i = 0;
while(i < N && a[i] == 1)
{
   ...
   i++;
} 
```

所以，如果在第一个实例 a[i] 不是 1，那么你永远不会进入循环，而只是去后面的任何内容。这可能不是你想做的，这就是为什么它没有做你想做的……;)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T02:58:04.727

这段代码：

```
for (i=0;i<N;++i)
    if (a[i] == 1){ 
```

意思是，increment `i`，从 0 开始，一直到大于等于`N`，检查每个元素`a[]`是否等于 1

然而，这段代码：

```
while(i < N && a[i] == 1) 
```

只要`i`小于`N`且`a[i]`等于 1，就表示循环。因此，只要其中任何一个条件为假，它就会从循环中中断。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-29T04:29:40.590

如果 a[0] != 1，则永远不会进入循环。这是执行 for 循环的条件，就像 i < N 一样。

# mercurial - 在 hg diff 补丁中包含新文件

> ID：14574867
> 
> 赞同：4
> 
> 时间：2013-01-29T02:49:55.890
> 
> 标签：mercurial

如何将新文件添加到 mercurial 差异补丁？我似乎在手册页中找不到任何信息。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-29T03:18:05.887

我不确定我是否完全理解您的问题，但是，如果您使用 Mercurial 生成差异补丁，包含要添加到存储库的新文件的方法是通过使用将新文件标记为存储库的一部分hg`add`命令，然后执行`diff`.

```
hg add newfile
hg diff > my.patch 
```

# c# - C# 和音频生成/播放

> ID：14574869
> 
> 赞同：2
> 
> 时间：2013-01-29T02:50:14.317
> 
> 标签：c#, playback, audio

我正在制作一个音频合成器，但在弄清楚使用什么来播放音频时遇到了问题。我正在使用物理和数学来计算源波形，然后需要将该波形提供给可以将其播放为声音的东西。我需要一些可以 1）播放我计算的波形和 2）同时播放多个声音的东西（比如在按下其他键的同时按住钢琴上的一个键）。我已经对此进行了相当多的研究，但我找不到可以同时做这两件事的东西。据我所知，我有 5 种可能的选择：

1.  **直接声音。**它可以将一个波形（ashort[]）作为参数，作为声音播放，并且可以同时播放多个声音。但它不适用于 .NET 4.5。
2.  **System.Media.SoundPlayer。**它适用于 .NET 4.5 并且具有比 Direct Sound 更好的音频质量，但它必须从 .wav 文件播放声音并且不能一次播放多个声音（SoundPlayer 的多个实例也不能）。我通过将我的波形转换为内存中的 .wav 格式来“欺骗”SoundPlayer 工作，然后向 SoundPlayer 发送内存中 .wav 文件的 MemoryStream。**我可以通过改变流来实现对播放的控制吗？**我无法将字节附加到流中（我尝试过），但我可以使流具有任意大小，并且每次到达流的末尾时，只需用下一段音频数据重新写入流中的所有字节。
3.  **System.Windows.Controls.MediaElement**。我还没有对此进行过实验，但是从 MSDN 文档中，我没有看到一种在内存中发送波形而不先将其保存到磁盘然后读取它的方法；我不认为我可以发送它一个流。
4.  **System.Windows.Controls.MediaPlayer**。我也没有尝试过这个，但文档说它是用来作为某种动画的伴侣的。我可以在不做任何真实（用户可感知的）动画的情况下使用它来达到我想要的效果。
5.  **一个开源解决方案**。我对使用开源解决方案犹豫不决，因为我发现它们通常没有很好的文档记录并且不是很容易维护，但是如果有一个文档有据可查并且可以做我需要的事情，我愿意接受。

谁能给我任何指导或如何创建灵活的音频播放？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-29T02:52:24.190

[http://naudio.codeplex.com](http://naudio.codeplex.com)，毫无疑问。马克是这里的常客，产品很活跃，有很好的代码示例。

有用。我们用它构建了一些很棒的东西。

# android - 制作相对于屏幕尺寸的 UI 元素？

> ID：14574875
> 
> 赞同：2
> 
> 时间：2013-01-29T02:51:32.493
> 
> 标签：android, android-layout, android-widget

假设我想用左右两列按钮制作一个相对视图。

每个按钮恰好占据屏幕的 20%，相隔 10%，其余边框位于两侧。但是要对任何屏幕尺寸执行此操作。DP 我认为行不通，因为你怎么知道每个不同屏幕上的 DP 像素数？

基本上，您如何保持 UI 相对相同并适合所有设备？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T02:54:28.150

简短的回答：`LinearLayout`。

长答案在这里：

[为 LinearLayout 定义百分比宽度？](https://stackoverflow.com/questions/6557220/defining-a-percentage-width-for-a-linearlayout?rq=1)

还有一些方法可以在运行时获得密度，但从长远来看，上述方法更容易。

为一些伪 xml 做好准备！

```
<LinearLayout double fill parent, vertical>
    <RelativeLayout w = 0, h = 0, weight smallish>
         <Button A />
    </RelativeLayout>
    <LinearLayout w = 0, h = 0, weight largish. horizontal>
         <!-- maybe you want these to be RelativeLayout and set the buttons
         as centerHorizontalInParent="true" -->
         <LinearLayout w = 0, h = 0, weight whatever 20% is>
              <Buttons with some padding/margins>
         </LinearLayout>
         <Some kind of spacer, or just pad the LLs />
         <LinearLayout repeat above />
     </LL>
</LL> 
```

编辑：

如果您一心想做很多动态调整大小，我有这个自定义类来获取屏幕大小：

```
public class ScreenGetter {
    private float pixHeight;
    private float pixWidth;
    private float dpHeight;
    private float dpWidth;
    private float density;

public ScreenGetter (Context context){
    Display display = ((WindowManager)
                context.getSystemService(Context.WINDOW_SERVICE))
                .getDefaultDisplay();
    DisplayMetrics metrics = new DisplayMetrics ();
    display.getMetrics(metrics);

    pixHeight = metrics.heightPixels;
    pixWidth = metrics.widthPixels;
    density  = context.getResources().getDisplayMetrics().density;
    dpHeight = pixHeight / density;
    dpWidth  = pixWidth / density;
}

public float getPixHeight(){return pixHeight;}
public float getPixWidth(){return pixWidth;}
public float getDpHeight(){return dpHeight;}
public float getDpWidth(){return dpWidth;}
public float getDensity(){return density;}

} 
```

显然，您需要做一些数学运算来确定不同尺寸和密度的您想要什么。您还需要考虑您不使用的屏幕部分（ActionBar 等）

# zip - 如何为 zip 文件添加 .remove 扩展名

> ID：14574876
> 
> 赞同：1
> 
> 时间：2013-01-29T02:51:40.677
> 
> 标签：zip, zipfile

我正在尝试通过 Gmail 发送项目文件，但在发送包含 .exe 文件的 zip 文件时遇到问题。如何将 zip 文件更改为 fileName.zip.remove？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T03:12:45.130

我建议实际更改 exe 文件本身的名称并重新压缩并发送它。但是要更改文件本身的名称，您应该能够右键单击它，并且重命名应该是一个选项。只需输入 .remove，忽略有关文件扩展名的警告（如果出现），然后发送！:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-29T13:31:01.460

您可以使用`+=`运算符：

```
string filename = "fileName.zip";
filename += ".remove"; 
```

最后一行相当于：

```
filename = filename + ".remove"; 
```

* * *

发送电子邮件时的一个常见问题是防病毒软件会拒绝 .exe 文件，即使它们包含在 zip 文件中也是如此。如果加密此文件，您可以将 exe 文件隐藏在 zip 文件中。这涉及为 zip 文件提供密码。您可以在电子邮件文本中写下此密码。防病毒软件不够聪明，无法使用它。

# javascript - jQuery - 有没有办法“保存”dom元素（css）的状态并恢复到保存的状态等......？

> ID：14574878
> 
> 赞同：1
> 
> 时间：2013-01-29T02:51:43.923
> 
> 标签：javascript, jquery

我有一个 CSS 菜单，它也有子菜单等。问题是，我必须为 tab/jaws 用户创建 eventHandlers。似乎当我使用 show()/hide() 操作菜单时，它会破坏固有的 css 选择器及其状态，因此，如果用户想要同时移动选项卡和鼠标，它将无法正常工作。他们要么必须使用所有鼠标或标签等。

我*可以*为鼠标悬停/退出等创建更多 js 事件处理程序。但是很好奇克隆父元素 onload 是否可行，并绑定到选项卡中，当他们“关闭”菜单时，我“恢复”到这个保存状态，然后用户可以使用鼠标悬停/移出等的css方法。

这有意义吗？或者这是否与为鼠标事件创建更多事件处理程序一样多的工作/开销？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-29T03:01:55.657

这是一个按照您的建议保存和恢复菜单的示例。

[http://jsfiddle.net/5pvGG/](http://jsfiddle.net/5pvGG/)

```
var $saved = $('#cssmenu').clone();

$('#a').click( function() {
    $('#cssmenu').remove();
});

$('#b').click( function() {
    $('body').prepend($saved);
}); 
```

# android - 如何检测安卓设备的移动？

> ID：14574879
> 
> 赞同：38
> 
> 时间：2013-01-29T02:51:50.000
> 
> 标签：android, sensors, motion

我需要有关如何检测 android 设备的移动量的建议。假设我将手机放在桌子或床上，然后如果有人轻敲桌子或坐在床上或躺在床上，那么我想检测 android 设备的移动。

实际上我知道 android 有运动传感器 API，但我不知道使用哪种传感器以及哪种传感器类型最适合这种类型的运动检测。

如果有人可以分享一些基本的演示代码，我会很高兴。

* * *

## 回答 #1

> 赞同：63
> 
> 时间：2013-01-29T03:05:49.623

绝对可以使用加速度计：

```
// Start with some variables
private SensorManager sensorMan;
private Sensor accelerometer;

private float[] mGravity;
private float mAccel;
private float mAccelCurrent;
private float mAccelLast;

// In onCreate method
sensorMan = (SensorManager)getSystemService(SENSOR_SERVICE);
accelerometer = sensorMan.getDefaultSensor(Sensor.TYPE_ACCELEROMETER);
mAccel = 0.00f;
mAccelCurrent = SensorManager.GRAVITY_EARTH;
mAccelLast = SensorManager.GRAVITY_EARTH;

// And these:

@Override
public void onResume() {
    super.onResume();
    sensorMan.registerListener(this, accelerometer,
        SensorManager.SENSOR_DELAY_UI);
}

@Override
protected void onPause() {
    super.onPause();
    sensorMan.unregisterListener(this);
}

@Override
public void onSensorChanged(SensorEvent event) {
    if (event.sensor.getType() == Sensor.TYPE_ACCELEROMETER){
        mGravity = event.values.clone();
        // Shake detection
        float x = mGravity[0];
        float y = mGravity[1];
        float z = mGravity[2];
        mAccelLast = mAccelCurrent;
        mAccelCurrent = FloatMath.sqrt(x*x + y*y + z*z);
        float delta = mAccelCurrent - mAccelLast;
        mAccel = mAccel * 0.9f + delta;
            // Make this higher or lower according to how much
            // motion you want to detect
        if(mAccel > 3){ 
        // do something
        }
    }

}

@Override
public void onAccuracyChanged(Sensor sensor, int accuracy) {
    // required method
} 
```

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2015-06-22T17:47:58.027

我使用了以下课程：

```
public class MovementDetector implements SensorEventListener {

protected final String TAG = getClass().getSimpleName();

private SensorManager sensorMan;
private Sensor accelerometer;

private MovementDetector() {
}

private static MovementDetector mInstance;

public static MovementDetector getInstance() {
    if (mInstance == null) {
        mInstance = new MovementDetector();
        mInstance.init();
    }
    return mInstance;
}

//////////////////////
private HashSet<Listener> mListeners = new HashSet<MovementDetector.Listener>();

private void init() {
    sensorMan = (SensorManager) GlobalData.getInstance().getContext().getSystemService(Context.SENSOR_SERVICE);
    accelerometer = sensorMan.getDefaultSensor(Sensor.TYPE_LINEAR_ACCELERATION);
}

public void start() {
    sensorMan.registerListener(this, accelerometer, SensorManager.SENSOR_DELAY_NORMAL);
}

public void stop() {
    sensorMan.unregisterListener(this);
}

public void addListener(Listener listener) {
    mListeners.add(listener);
}

/* (non-Javadoc)
 * @see android.hardware.SensorEventListener#onSensorChanged(android.hardware.SensorEvent)
 */
@Override
public void onSensorChanged(SensorEvent event) {
    if (event.sensor.getType() == Sensor.TYPE_LINEAR_ACCELERATION) {

        float x = event.values[0];
        float y = event.values[1];
        float z = event.values[2];

        float diff = (float) Math.sqrt(x * x + y * y + z * z);
        if (diff > 0.5) // 0.5 is a threshold, you can test it and change it
            Log.d(TAG,"Device motion detected!!!!");
        for (Listener listener : mListeners) {
            listener.onMotionDetected(event, diff);
        }
    }

}

/* (non-Javadoc)
 * @see android.hardware.SensorEventListener#onAccuracyChanged(android.hardware.Sensor, int)
 */
@Override
public void onAccuracyChanged(Sensor sensor, int accuracy) {
    // TODO Auto-generated method stub

}

public interface Listener {
    void onMotionDetected(SensorEvent event, float acceleration);
    }
} 
```

用法：

在我的活动中`onCrate()`：

```
 MovementDetector.getInstance().addListener(new MovementDetector.Listener() {

        @Override
        public void onMotionDetected(SensorEvent event, float acceleration) {

            mMotionDetectionTextView.setText("Acceleration: ["+String.format("%.3f",event.values[0])+","+String.format("%.3f",event.values[1])+","+String.format("%.3f",event.values[2])+"] "+String.format("%.3f", acceleration));
            if (acceleration > SettingsHelper.getInstance().getMotionDetectionThreshold()){
                mMotionDetectionTextView.setTextColor(Color.RED);
            } else {
                mMotionDetectionTextView.setTextColor(Color.WHITE);
            }

        }
    }); 
```

在我的活动中`onResume()`：

```
MovementDetector.getInstance().start(); 
```

在我的活动中`onPause()`：

```
MovementDetector.getInstance().stop(); 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2016-07-27T04:53:36.743

此代码用于步行检测（修改自@anthropomo 代码）

以获得更平滑的价值。

// 初始化

```
private SensorManager sensorMan;
private Sensor accelerometer;

private float[] mGravity;
private double mAccel;
private double mAccelCurrent;
private double mAccelLast;

private boolean sensorRegistered = false; 
```

// onCreate

```
 sensorMan = (SensorManager) context.getSystemService(Context.SENSOR_SERVICE);
    accelerometer = sensorMan.getDefaultSensor(Sensor.TYPE_ACCELEROMETER);
    mAccel = 0.00f;
    mAccelCurrent = SensorManager.GRAVITY_EARTH;
    mAccelLast = SensorManager.GRAVITY_EARTH;

    sensorMan.registerListener(this, accelerometer,
            SensorManager.SENSOR_DELAY_NORMAL);
    sensorRegistered = true; 
```

// onSensorChanged

```
private int hitCount = 0;
private double hitSum = 0;
private double hitResult = 0;

private final int SAMPLE_SIZE = 50; // change this sample size as you want, higher is more precise but slow measure.
private final double THRESHOLD = 0.2; // change this threshold as you want, higher is more spike movement

@Override
public void onSensorChanged(SensorEvent event) {
    if (event.sensor.getType() == Sensor.TYPE_ACCELEROMETER) {
        mGravity = event.values.clone();
        // Shake detection
        double x = mGravity[0];
        double y = mGravity[1];
        double z = mGravity[2];
        mAccelLast = mAccelCurrent;
        mAccelCurrent = Math.sqrt(x * x + y * y + z * z);
        double delta = mAccelCurrent - mAccelLast;
        mAccel = mAccel * 0.9f + delta;

        if (hitCount <= SAMPLE_SIZE) {
            hitCount++;
            hitSum += Math.abs(mAccel);
        } else {
            hitResult = hitSum / SAMPLE_SIZE;

            Log.d(TAG, String.valueOf(hitResult));

            if (hitResult > THRESHOLD) {
                Log.d(TAG, "Walking");
            } else {
                Log.d(TAG, "Stop Walking");
            }

            hitCount = 0;
            hitSum = 0;
            hitResult = 0;
        }
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-29T02:56:04.450

虽然我没有演示代码（因为您不够具体），但这里有一个好的开始：http: [//developer.android.com/guide/topics/sensors/sensors_motion.html](http://developer.android.com/guide/topics/sensors/sensors_motion.html)（以及左侧的其他项目）。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-01-29T16:18:25.610

如果你想找到手机的位移，你需要找到作用在手机上的线性加速度，而不是重力加速度

android有一个内置的转换器来找到你手机上的LINEAR ACCELERATION

[https://github.com/yuvaramsingh94/AndroidSensorTestCode/tree/master](https://github.com/yuvaramsingh94/AndroidSensorTestCode/tree/master)

这是一个代码，您可以在其中查看如何获取 LINEAR ACCELERATION 的原始值

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-11-20T16:38:33.003

我一直在用类似的想法来测量手机的位移。我发现*LINEAR ACCELERATION*（和*ACCELERATION*）不够准确，无法正确测量位移。

这段代码应该工作得更好一点：

（初始化）

```
private SensorManager sensorManager;
private Sensor accelerometer;
double[] maxAccelerations = new double[3];
double[] position = new double[3];
long[] times = new long[3];
// time combined with maxAcceleration can approximate the change in position,
// with the formula Δpos = (maxAcceleration * time ^ 2) / 6
long currentTime; 
```

(onCreate)

```
sensorManager = (SensorManager) getSystemService(SENSOR_SERVICE);
if (sensorManager.getDefaultSensor(Sensor.TYPE_LINEAR_ACCELERATION) != null) {
    accelerometer = sensorManager.getDefaultSensor(Sensor.TYPE_LINEAR_ACCELERATION);
        sensorManager.registerListener(this, accelerometer, sensorManager.SENSOR_DELAY_FASTEST);
}
currentTime = System.currentTimeMillis();
for(int i=0;i<3;i++){
    times[i]=currentTime;
}
else{
    throw "Error";
    //Which will throw an error, if not the error that is expected. 
} 
```

（onSensorChanged 和 onAccuracyChanged）

```
@Override
public void onAccuracyChanged(Sensor ignore, int thisFunction) {
}

@Override
public void onSensorChanged(SensorEvent event) {
    if (event.sensor.getType() == Sensor.TYPE_LINEAR_ACCELERATION) {
        for(int i=0;i<3;i++){
            if(Math.abs(event.values[i])<0.01){
                // Note: this is to try to prevent accelerating time from being counted when the phone is stationary. 0.01 should be
                // changed to an appropriate sensitivity level that can be calculated by finding an average noise level when the phone is stationary.
                times[i]=System.currentTimeMillis();
            }
            if(event.values[i]>maxAccelerations[i] && maxAccelerations[i]>=0){
                maxAccelerations[i]=event.values[i];
            }
            else if(event.values[i]<maxAccelerations[i] && maxAccelerations[i]<=0){
                maxAccelerations[i]=event.values[i];
            }
            else if(event.values[i]>0 && maxAccelerations[i]<0){
                currentTime = System.currentTimeMillis();
                position[i]+=maxAccelerations[i] * (times[i]-currentTime)*(times[i]-currentTime) / 6;
                times[i]=currentTime;
                maxAccelerations[i]=event.values[i];
            }
            else if(event.values[i]<0 && maxAccelerations[i]>0){
                currentTime = System.currentTimeMillis();
                position[i]+=maxAccelerations[i] * (times[i]-currentTime)*(times[i]-currentTime) / 6;
                times[i]=currentTime;
                maxAccelerations[i]=event.values[i];
            }
        }
    }
} 
```

# windows-runtime - 获取我自己的 Windows 应用程序的完整版本

> ID：14574886
> 
> 赞同：3
> 
> 时间：2013-01-29T02:52:38.960
> 
> 标签：windows-runtime, windows-store-apps, windows-store

有没有办法让我从 Windows 商店安装我自己的 Windows 应用程序的完整版本而无需付费？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T09:30:05.703

不，没有商店代码或类似的东西。您将只需要侧面加载应用程序。

# ruby-on-rails - Rails 教程 5.1.1：Static_page/home 未在服务器上显示？

> ID：14574887
> 
> 赞同：0
> 
> 时间：2013-01-29T02:52:40.133
> 
> 标签：ruby-on-rails, ruby, railstutorial.org

[http://ruby.railstutorial.org/chapters/filling-in-the-layout#sec-adding_to_the_layout](http://ruby.railstutorial.org/chapters/filling-in-the-layout#sec-adding_to_the_layout)

我正在使用红宝石 1.8.7。

当我用他在清单 5.1 中提供的代码更新 app/views/layouts/application.html.erb 时，static_pages/home 不再显示在服务器上。

原文：`

```
<!DOCTYPE html>
<html>
  <head>
    <title><%= full_title(yield(:title)) %></title>
    <%= stylesheet_link_tag    "application", :media => "all" %>
    <%= javascript_include_tag "application" %>
    <%= csrf_meta_tags %>
  </head>
  <body>
    <%= yield %>
  </body>
</html> 
```

` 清单 5.1：

```
<!DOCTYPE html>
<html>
  <head>
    <title><%= full_title(yield(:title)) %></title>
    <%= stylesheet_link_tag    "application", media: "all" %>
    <%= javascript_include_tag "application" %>
    <%= csrf_meta_tags %>
    <!--[if lt IE 9]>
    <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
  </head>
  <body>
    <header class="navbar navbar-fixed-top navbar-inverse">
      <div class="navbar-inner">
        <div class="container">
          <%= link_to "sample app", '#', id: "logo" %>
          <nav>
            <ul class="nav pull-right">
              <li><%= link_to "Home",    '#' %></li>
              <li><%= link_to "Help",    '#' %></li>
              <li><%= link_to "Sign in", '#' %></li>
            </ul>
          </nav>
        </div>
      </div>
    </header>
    <div class="container">
      <%= yield %>
    </div>
  </body>
</html> 
```

我什至将 :media 和 :id 切换回 Ruby 1.8 风格的哈希。

我在服务器上遇到的错误：

```
compile error
/Users/admin/rails_projects/sample_app/app/views/layouts/application.html.erb:16: syntax error, unexpected tSTRING_BEG, expecting ')'
...nk_to "sample app", '#', :id "logo" );@output_buffer.safe_co... 
```

运行测试时出错：失败：

```
1) Static pages About page should have the h1 'About Us'
     Failure/Error: visit '/static_pages/about'
     ActionView::Template::Error:
       compile error
       /Users/admin/rails_projects/sample_app/app/views/layouts/application.html.erb:16: syntax error, unexpected tSTRING_BEG, expecting ')'
       ...nk_to "sample app", '#', :id "logo" );@output_buffer.safe_co...
                                     ^
     # ./app/views/layouts/application.html.erb:34:in `compile'
     # ./spec/requests/static_pages_spec.rb:41

  2) Static pages About page should have the title 'About Us'
     Failure/Error: visit '/static_pages/about'
     ActionView::Template::Error:
       compile error
       /Users/admin/rails_projects/sample_app/app/views/layouts/application.html.erb:16: syntax error, unexpected tSTRING_BEG, expecting ')'
       ...nk_to "sample app", '#', :id "logo" );@output_buffer.safe_co...
                                     ^
     # ./app/views/layouts/application.html.erb:34:in `compile'
     # ./spec/requests/static_pages_spec.rb:46

  3) Static pages Home page should have the base title
     Failure/Error: visit '/static_pages/home'
     ActionView::Template::Error:
       compile error
       /Users/admin/rails_projects/sample_app/app/views/layouts/application.html.erb:16: syntax error, unexpected tSTRING_BEG, expecting ')'
       ...nk_to "sample app", '#', :id "logo" );@output_buffer.safe_co...
                                     ^
     # ./app/views/layouts/application.html.erb:34:in `compile'
     # ./spec/requests/static_pages_spec.rb:13

  4) Static pages Home page should have the h1 'Sample App'
     Failure/Error: visit '/static_pages/home'
     ActionView::Template::Error:
       compile error
       /Users/admin/rails_projects/sample_app/app/views/layouts/application.html.erb:16: syntax error, unexpected tSTRING_BEG, expecting ')'
       ...nk_to "sample app", '#', :id "logo" );@output_buffer.safe_co...
                                     ^
     # ./app/views/layouts/application.html.erb:34:in `compile'
     # ./spec/requests/static_pages_spec.rb:8

  5) Static pages Home page should not have a custom page title
     Failure/Error: visit '/static_pages/home'
     ActionView::Template::Error:
       compile error
       /Users/admin/rails_projects/sample_app/app/views/layouts/application.html.erb:16: syntax error, unexpected tSTRING_BEG, expecting ')'
       ...nk_to "sample app", '#', :id "logo" );@output_buffer.safe_co...
                                     ^
     # ./app/views/layouts/application.html.erb:34:in `compile'
     # ./spec/requests/static_pages_spec.rb:19

  6) Static pages Contact page should have the h1 'Contact'
     Failure/Error: visit '/static_pages/contact'
     ActionView::Template::Error:
       compile error
       /Users/admin/rails_projects/sample_app/app/views/layouts/application.html.erb:16: syntax error, unexpected tSTRING_BEG, expecting ')'
       ...nk_to "sample app", '#', :id "logo" );@output_buffer.safe_co...
                                     ^
     # ./app/views/layouts/application.html.erb:34:in `compile'
     # ./spec/requests/static_pages_spec.rb:55

  7) Static pages Contact page should have the title 'Contact'
     Failure/Error: visit '/static_pages/contact'
     ActionView::Template::Error:
       compile error
       /Users/admin/rails_projects/sample_app/app/views/layouts/application.html.erb:16: syntax error, unexpected tSTRING_BEG, expecting ')'
       ...nk_to "sample app", '#', :id "logo" );@output_buffer.safe_co...
                                     ^
     # ./app/views/layouts/application.html.erb:34:in `compile'
     # ./spec/requests/static_pages_spec.rb:60

  8) Static pages Help page should have the h1 'Help'
     Failure/Error: visit '/static_pages/help'
     ActionView::Template::Error:
       compile error
       /Users/admin/rails_projects/sample_app/app/views/layouts/application.html.erb:16: syntax error, unexpected tSTRING_BEG, expecting ')'
       ...nk_to "sample app", '#', :id "logo" );@output_buffer.safe_co...
                                     ^
     # ./app/views/layouts/application.html.erb:34:in `compile'
     # ./spec/requests/static_pages_spec.rb:27

  9) Static pages Help page should have the title 'Help'
     Failure/Error: visit '/static_pages/help'
     ActionView::Template::Error:
       compile error
       /Users/admin/rails_projects/sample_app/app/views/layouts/application.html.erb:16: syntax error, unexpected tSTRING_BEG, expecting ')'
       ...nk_to "sample app", '#', :id "logo" );@output_buffer.safe_co...
                                     ^
     # ./app/views/layouts/application.html.erb:34:in `compile'
     # ./spec/requests/static_pages_spec.rb:32

Finished in 0.20551 seconds
9 examples, 9 failures

Failed examples:

rspec ./spec/requests/static_pages_spec.rb:40 # Static pages About page should have the h1 'About Us'
rspec ./spec/requests/static_pages_spec.rb:45 # Static pages About page should have the title 'About Us'
rspec ./spec/requests/static_pages_spec.rb:12 # Static pages Home page should have the base title
rspec ./spec/requests/static_pages_spec.rb:7 # Static pages Home page should have the h1 'Sample App'
rspec ./spec/requests/static_pages_spec.rb:18 # Static pages Home page should not have a custom page title
rspec ./spec/requests/static_pages_spec.rb:54 # Static pages Contact page should have the h1 'Contact'
rspec ./spec/requests/static_pages_spec.rb:59 # Static pages Contact page should have the title 'Contact'
rspec ./spec/requests/static_pages_spec.rb:26 # Static pages Help page should have the h1 'Help'
rspec ./spec/requests/static_pages_spec.rb:31 # Static pages Help page should have the title 'Help' 
```

如果我没有提供所有需要的信息，我很抱歉。我不确定问题是什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T01:14:22.003

该错误与使用 1.9 样式哈希有关，您需要将链接更改为使用 1.8 样式哈希，如下所示：

```
link_to "sample app", '#', :id => "logo" 
```

# python - 验证目录写入权限

> ID：14574889
> 
> 赞同：0
> 
> 时间：2013-01-29T02:53:04.997
> 
> 标签：python, posix

我正在用 Python 2.7 编写一个程序，它检索远程文件并将它们转储到用户可以指定的目录中。目前，为了验证程序实际上是否可以写入该目录，我执行以下操作（假设 dumpdir 是一个包含要检查的目录名称的字符串）：

```
try:
    os.mkdir(dumpdir+'/.mwcrawler')
    os.rmdir(dumpdir+'/.mwcrawler')
except:
    logging.error('Could not open %s for writing, using default', dumpdir) 
```

但这感觉比我通常的代码更骇人听闻。这样做的正确方法是什么？也许某种关于特权的断言？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T03:02:46.263

此[链接](http://docs.python.org/2/library/os.html#os.access)描述了 的用法`os.access`，这是一种专门为您的需要而创建的方法。

它还解释了一种更好的进行权限检查的方法。

正如评论中正确提到的那样，`os.access`在一些特定情况下会出现问题，所以为了完全确定，“hit-n-run”方法实际上更好，尝试编写，捕获异常，看看发生了什么 - 从那里开始。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-29T03:06:59.397

一般来说，请求宽恕比请求许可要好——你必须在编写每个文件时处理错误，所以为什么要提前检查呢？

但是，当你有一个用户界面时——甚至是一个命令行界面，你可以在写任何东西之前很久就读取一个 prefs 文件——用户尽快返回错误通常会更方便。只要这是您进行此检查的唯一原因，它就没有任何问题。

但是，有许多小方法可以改进检查*方式*。

首先，您几乎不应该只使用`except:`而不指定任何内容。除了在不同版本的 Python 中捕获不同的东西（因此也会混淆习惯于其他版本的人类读者）这一事实之外，这意味着您无法区分不可写、错误的 Unicode 字符，甚至是代码中的拼写错误.

另外，如果无法写入，您的错误消息会显示“不可读”，这很奇怪。

其次，除非您确定没有人会拥有一个名为的文件`.mwcrawler`（例如，因为您拒绝传输以`'.'`或其他开头的文件），否则使用任何固定名称都是自找麻烦。更好的解决方案是使用例如`tempfile.mkdtemp`.

此外，如果您想要可移植，则应避免对路径使用字符串操作。这就是`os.path`（和更高级别的实用程序）的用途——因此您不必学习或考虑 Windows、zOS 等。

把它们放在一起：

```
try:
    d = tempfile.mkdtemp(prefix='.mwcrawler', dir=dumpdir)
except Exception as e:
    logging.error('Could not open %s for reading (%s), using default', dumpdir, e)
else:
    os.rmdir(d) 
```

# python - 工厂男孩 django 工厂的 FACTORY_FOR 在哪里？

> ID：14574895
> 
> 赞同：1
> 
> 时间：2013-01-29T02:53:48.353
> 
> 标签：python, django, factory-boy

我在 Django 项目中使用 Factory Boy，我需要在相应的工厂中访问在类中定义的类属性。

我的测试用例大致如下：

```
from django.test.testcases import TransactionTestCase
from app.tests.factories import SomeModelFactory

class MyTestCase(TransactionTestCase):   
    def test_something(self):
        ...
        SomeModelFactory.create(
            data_type=SomeModelFactory.FACTORY_FOR.TYPE_STRING)
        ... 
```

正如您可能猜到的那样，我的课程在正确的位置有相应的常量。

```
class SomeModel(models.Model):
  TYPE_STRING = 2
  ... 
```

并且相应的工厂被定义为它应该是

```
class SomeModelFactory(factory.Factory):
  FACTORY_FOR = SomeModel
  ... 
```

测试用例失败，`FACTORY_FOR`说不存在。因此，我认为*元类*将其隐藏在某个地方。理想情况下，如果我使用工厂，我想尽量减少直接**导入模型的需要。**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T12:36:12.807

`SomeModelFactory._associated_class`应该是你要找的...

# google-apps-script - 应用程序脚本：xls 在 gmail 中附加到 google 电子表格

> ID：14574898
> 
> 赞同：0
> 
> 时间：2013-01-29T02:53:59.483
> 
> 标签：google-apps-script, google-sheets

我尝试用应用脚本打开一个 xls。
我可以通过以下方式获取文件的内容类型：

```
 var attach = messages[j].getAttachments()[0];
    var name = attach.getName();
    var type = attach.getContentType(); 
```

我得到：

```
application/vnd.openxmlformats-officedocument.spreadsheetml.sheet 
```

但是，我如何阅读单元格中的信息？

###  编辑

如果我使用

```
DocsList.createFile(attach); 
```

已`attach`添加到 google 文档列表中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T23:45:28.620

我解决了用驱动器上传文件

[https://gist.github.com/4666836](https://gist.github.com/4666836)

# eclipse - 如何在 Eclipse 中监控项目属性的更改？

> ID：14574900
> 
> 赞同：2
> 
> 时间：2013-01-29T02:54:14.960
> 
> 标签：eclipse, eclipse-plugin, eclipse-jdt

如何监听项目属性的更改（即项目属性对话框页面中的更改）？我知道 IPreferenceStore 允许我注册属性更改侦听器，但我不知道如何获取特定项目的首选项存储。具体来说，我正在编写一个自定义的 PropertyPage，它需要响应各种 JDT 属性页中的变化。在我自己的 PropertyPage 的生命周期中，我没有看到项目首选项商店的可用性有明显的挂钩。

# c# - 从 NUNIT 测试启动应用程序

> ID：14574904
> 
> 赞同：3
> 
> 时间：2013-01-29T02:54:31.823
> 
> 标签：c#, .net, nunit

我必须运行一个 nuit，首先我必须启动一个应用程序，即 word.exe，然后让它运行 50 秒而不是停止它并断言一个值被记录了多少次。我有下面的代码，它将读取日志文件并断言它是否正确。但我不确定如何从 NUNIT 启动应用程序并让它运行 50 秒而不是停止它并运行测试。

所以在接下来的测试中，我必须先启动我的应用程序 xyz.exe，让它运行 50 秒，然后再停止并断言。任何想法如何完成它。谢谢

```
- [Test] 
       public void logtest()
       {
           // arrange
           ILog log = LogManager.GetLogger(typeof (LoggingIntegrationTests));
           string  = "Error 2";

           // act
           log.Info(dataToLog);

           // assert
           LogManager.Shutdown();
           var matches = Regex.Matches(File.ReadAllText(logfile), dataToLog);
           Assert.AreEqual(3, matches.Count);
       } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-29T07:18:49.620

```
using System.Diagnostics;
using System.Threading;

[Test]
public void logtest()
{
    // ...
    Process proc = Process.Start(@"c:\windows\system32\notepad.exe");
    if ( null == proc )
        Assert.Fail("Could not start process, maybe an existing process has been reused?");
    Thread.Sleep(50000);
    proc.Kill();
    // ...
} 
```

# python - Why does this python code have a syntax error?

> ID：14574916
> 
> 赞同：2
> 
> 时间：2013-01-29T02:56:12.547
> 
> 标签：python

To practice python, I made a simple class for a tree structure in which each node can have infinite child nodes.

```
class Tree():

  def __init__(self, children, val):
    self.children = children
    self.val = val

  def add(self, child):
    self.children.append(child)

  def remove(self, index):
    child = self.children[index]
    self.children.remove(child)
    return child

  def print(self):
    self.__print__(0)

  def __print__(self, indentation):
    valstr = ''
    for i in range(0, indentation):
      valstr += ' '
    valstr += self.val
    for child in self.children:
      child.__print__(indentation + 1) 
```

However, I have a syntax error in the line `def print(self):`. Where is the error? I have been looking for a long time, and it seems like the right way to define a python function.

I have also tried

```
 @override
  def print(self):
    self.__print__(0) 
```

to no avail.

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-29T02:58:21.983

In Python 2 `print` is a keyword, so you can't use it as the name of a function or method.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-29T03:06:13.190

In Python 2.7 (and maybe other versions) you can override the print statement with a print function and than override that function.

To do that you have to add

```
from __future__ import print_function 
```

as the first line of your file.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-29T02:58:39.363

In Python 2 `print` is a reserved word and cannot be the name of a variable or method or function.

# jquery - 如何在链接下方显示div

> ID：14574917
> 
> 赞同：0
> 
> 时间：2013-01-29T02:56:12.437
> 
> 标签：jquery, css

这里一切正常，唯一的问题是 new_r_div 没有显示在下面

```
 <a href="#">Response Request</a>' 
```

这个怎么做。

[你可以在这里](http://jsfiddle.net/xrcwrn/QQvv6/30/)看到代码

HTML：

```
 <div id="response"> I found this to be a very nice solution. If you had floating children and non floating children, the height will automatically be adjusted to the min amount of space needed. The width is set to 100% to expand to the
this is a
   <a href="#">Response Request</a>
   <div class="new_r_div">
   <ul>
      <li><a href="#" class="link" >Confirm</a></li>
      <li><a href="#" class="link" >Delete</a></li>
   </ul>
 </div>
</div> 
```

CSS：

```
 .new_r_div{
   position:absolute;
   width:100px;
   height:40px;
   background:#ccc;
    overflow: hidden;
   border: solid 2px #ccc;
 background: #99CCFF;
  z-index: 9999;
   -webkit-border-radius: 5px;
  -moz-border-radius: 5px;
  border-radius: 5px;
 visibility: hidden;
}

#response:hover .new_r_div
 {
   visibility: visible;
}
   .new_r_div li:hover{
      background:red;
  } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T04:08:08.577

这可以使用 jQuery 来完成。只需将以下 jQuery 添加到您的代码中即可。

```
$(function(){ setDiv(); });  //Executes on refresh
$(window).resize(function () { setDiv();});  //Executes on page resize

function setDiv(){
    var aLeft = $('#response>a').offset().left;
    $('.new_r_div').css({'left' : aLeft});
} 
```

[**工作小提琴**](http://jsfiddle.net/QQvv6/33/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T03:37:10.523

我想你想要像 => jsfiddle [Link](http://jsfiddle.net/QQvv6/32/)这样的东西。

如图所示，您必须在 css 中进行一些更改。

```
.new_r_div {
    display:inline-block;   
    margin-top:20px;
    margin-left:-102px; 
    position:absolute;
    width:100px;   
    -webkit-border-radius: 5px;
    -moz-border-radius: 5px;
    border-radius: 5px;
    overflow: hidden;
    border: solid 2px #ccc;
    background: #99CCFF;
    visibility: hidden;
} 
```

# jquery - 如何在jQuery中淡入/淡出计数器？

> ID：14574923
> 
> 赞同：2
> 
> 时间：2013-01-29T02:57:28.457
> 
> 标签：jquery, animation, loops

所以我有一堆 div，每个都包含一个数字。我正在尝试设置一个计数器，它的计数如下：

```
1 2 3
2 3 4
3 4 5
4 5 1
1 2 3 
```

等等。[您可以在 jsFiddle 上](http://jsfiddle.net/mirzar/2Q3mN/ "在 jsFiddle 上")查看我当前的代码 。

我试图让节点一次淡入和淡出一个节点，而不是显示/隐藏整个容器。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T11:01:44.503

这是一种方法：

```
//I didn't wrap the roller inside a function for this example, but you can pass
//these values as arguments to a function instead of assigning them here:
var $slides = $('#slides'),
    n = 3; //number of visible children (`.speaker`)

//init by hiding the children with index larger than `n`
$slides.children(':gt('+(n-1)+')').hide();

//note that :eq and :gt are 0-based, hence the n-1\. You could also assign
//n -= 1 or n-- after receiving the n parameter if using a function wrapper
setInterval(function () {
    $slides.children(':first').fadeOut(600, function () {
        $slides.append(this).children(':eq('+(n-1)+')').fadeIn(600);
    });
}, 1500); 
```

[**小提琴**](http://jsfiddle.net/2Q3mN/4/)

# php - 循环时每次执行代码 x <= y

> ID：14574930
> 
> 赞同：0
> 
> 时间：2013-01-29T02:58:34.790
> 
> 标签：php

我不完全确定如何解释这一点，但基本上我有一个 x 变量等于数据库中的行数，每次它等于或小于 4 时，运行一段代码。

假设我有 5 行，我想执行两次代码，因为 x 等于 4 一次然后等于 1。如果我有 6 行 (4+2) 7 行 (4+3) 或 8 行 (4 +4）。

然后，当我达到 9 行 (4+4+1) 时，它将执行三次代码。ETC...

我试图运行的代码是一段 HTML，里面有更多的 PHP。`<ul>`如上所述，每次行数等于或小于 4 时，我想在其中创建一个新的带有上述代码的代码。

现在的代码：

```
<div class="row-fluid well">
  <?php
  $num_rows = mysql_num_rows($result);
  if ($num_rows <= 4) {
    ?>
    <ul class="minigames">
    <?php
    while ($row = mysql_fetch_array($result)) {
      echo "<li class='span3'>";
      if (logged_in() === false && !empty($row['app_about']) === true && strlen($row['app_about']) <= 100) {
        echo "<a href='#!' class='thumbnail minigamedesc' title='" . $row['app_name'] . "' data-content='" . $row['app_about'] . "<br /><br /><center><a href=\"./games.php?play_error#library\" class=\"btn btn-info\"><i class=\"icomoon-white icomoon-screen\"></i> Play in browser</a></center>'>";
      } else if (logged_in() === false && !empty($row['app_about']) === true && strlen($row['app_about']) >= 101) {
        $app_about = substr(strip_tags($row['app_about']), 0, 100);
        echo "<a href='#!' class='thumbnail minigamedesc' title='" . $row['app_name'] . "' data-content='" . $app_about . "<a href=\"./games.php?play_error#library\">...</a><br /><br /><center><a href=\"./games.php?play_error#library\" class=\"btn btn-info\"><i class=\"icomoon-white icomoon-screen\"></i> Play in browser</a></center>'>";
      } else if (!empty($row['app_about']) === true && strlen($row['app_about']) <= 100) {
        echo "<a href='#!' class='thumbnail minigamedesc' title='" . $row['app_name'] . "' data-content='" . $row['app_about'] . "<br /><br /><center><a href=\"./play.php?app=" . $row['app_id'] . "\" class=\"btn btn-info\"><i class=\"icomoon-white icomoon-screen\"></i> Play in browser</a></center>'>";
      } else if (!empty($row['app_about']) === true && strlen($row['app_about']) >= 101) {
        $app_about = substr(strip_tags($row['app_about']), 0, 100);
        echo "<a href='#!' class='thumbnail minigamedesc' title='" . $row['app_name'] . "' data-content='" . $app_about . "<a href=\"./play.php?app=" . $row['app_id'] . "\">...</a><br /><br /><center><a href=\"./play.php?app=" . $row['app_id'] . "\" class=\"btn btn-info\"><i class=\"icomoon-white icomoon-screen\"></i> Play in browser</a></center>'>";
      } else {
        echo "<a href='#!' class='thumbnail minigamedesc' title='" . $row['app_name'] . "' data-content='Nothing to see here, yet ! <br /><br /><center><a href=\"./play.php?app=" . $row['app_id'] . "\" class=\"btn btn-info\"><i class=\"icomoon-white icomoon-screen\"></i> Play in browser</a></center>'>";
      }
      ?>
      <img src="<?php echo $row['app_preview']; ?>">
      <div class="minigames-caption">
        <h4><?php echo $row['app_name']; ?></h4>
        <p>By <?php echo $row['app_dev']; ?>.</p>
      </div>
      </a>
      <?php
      echo "</li>";
    }
      ?>
  <?php
  }
  ?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T03:06:49.617

如果行数有限，我会将结果放入一个数组中，然后`array_chunk()`将它们分成几部分。

```
$results = array();
while ($row = mysql_fetch_array($result)) {
    $results[] = $row;
}

foreach (array_chunk($results, 4) as $chunk) {
    echo '<ul>';
    foreach ($chunk as $row) {
        echo '<li>', /*....*/, '</li>';
    }
    echo '</ul>';
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-29T03:10:08.650

将 x 除以 4 并将其四舍五入。例如 4/4 = 1、5/4 = 2、9/4 = 3。然后，使用 for 循环。

```
var noOfTimes = //x/4 rounded up

for (var i = 0; i < noOfTimes; i++) {
 //insert code here
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-29T03:25:17.977

使用该`ceil`功能。

[http://us3.php.net/manual/en/function.ceil.php](http://us3.php.net/manual/en/function.ceil.php)

```
$num_rows = mysql_num_rows($result);
for ($i = 0; $i < ceil($num_rows / 4); $i++) {
    // do stuff
} 
```

# java - 需要帮助理解 int 数组到字节数组的方法和 Little/Big Endian 想知道吗？

> ID：14574933
> 
> 赞同：3
> 
> 时间：2013-01-29T02:58:50.527
> 
> 标签：java, buffer, bytearray, endianness, bytebuffer

有几个问题，首先是关于这个方法，它将 a 转换`int[]`为 a `byte[]`：

```
public static byte[] intToByte(int[] input){
    ByteBuffer byteBuffer = ByteBuffer.allocate(input.length * 4);
    IntBuffer intBuffer = byteBuffer.asIntBuffer();
    intBuffer.put(input);
    byte[] array = byteBuffer.array();
    return array;
} 
```

我正在制作游戏，我必须通过套接字发送一个字节数组，我喜欢这种方法，因为它基本上可以工作，但我不喜欢使用任何我不真正理解它在做什么的东西，所以你能给我一些见解这个方法在做什么？我相信它首先为比特创造了足够的空间，但为什么它的长度会“乘以”四？intBuffer 是否连接到 byteBuffer？因为如果不是，你为什么需要所有 Intbuffer 的东西。

好的，最后一个问题，与`BIG_ENDIAN`vs.有什么关系`LITTLE_ENDIAN`？例如，在我的其他方法中，将字节数组转换为 int 数组，包含有什么好处`.order(BIG_ENDIAN)`？

```
public static int[] byteToInt(byte[] input){
   IntBuffer intBuf = ByteBuffer.wrap(input).order(ByteOrder.BIG_ENDIAN).asIntBuffer();
   int[] array = new int[intBuf.remaining()];
   intBuf.get(array);
   return array;
} 
```

我知道`BIG_ENDIAN`并且`LITTLE_ENDIAN`只是指定字节的顺序，但为什么还要定义字节序呢？为什么不只是有这个？

```
IntBuffer intBuf = ByteBuffer.wrap(input).asIntBuffer(); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-29T05:11:20.367

IntBuffer 是 byteArray 的字节数组的 int 视图。使用 IntBuffer 的目的是它的 put(int[]) 允许一次性输入 int 数组。事实上，你可以不用 IntBuffer 作为

```
 ByteBuffer byteBuffer = ByteBuffer.allocate(input.length * 4);
    for(int i : input) {
        byteBuffer.putInt(i);
    }
... 
```

结果是一样的。

这演示了 BigEndian（默认）和 LittleEndian 之间的区别

```
 int[] input = {1,2,3,4};
        ByteBuffer byteBuffer = ByteBuffer.allocate(input.length * 4);
//      byteBuffer.order(ByteOrder.LITTLE_ENDIAN);
        for(int i : input) {
            byteBuffer.putInt(i);
        }
        byte[] array = byteBuffer.array();
        System.out.println(Arrays.toString(array)); 
```

输出

```
[0, 0, 0, 1, 0, 0, 0, 2, 0, 0, 0, 3, 0, 0, 0, 4] 
```

取消注释`byteBuffer.order(ByteOrder.LITTLE_ENDIAN);`，输出将是

```
[1, 0, 0, 0, 2, 0, 0, 0, 3, 0, 0, 0, 4, 0, 0, 0] 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-29T03:06:58.683

An`int`占用 4 个字节，因此您必须分配`byte[]`4 倍于`int[]`. `asIntBuffer()`返回 a 的视图`ByteBuffer`，`IntBuffer`因此将s`int[]`放入`IntBuffer`将所有`int`s 转换为每个 4 个字节并将它们放入`ByteBuffer`.

Endianness 定义了将 an 的四个字节`int`写入`ByteBuffer`.

至于你的最后一个问题， an`IntBuffer`不是 an `int[]`，也不是 an`IntBuffer`获得 from`ByteBuffer.asIntBuffer()`支持该`array()`方法。换句话说，没有支持`int[]`这样的 a `IntBuffer`，因为实现是基于 a `byte[]`。

# sql-server - SQL 子串从后开始

> ID：14574935
> 
> 赞同：0
> 
> 时间：2013-01-29T02:59:04.783
> 
> 标签：sql-server

sql server中的子字符串可以从后面开始吗？oracle的substr可以做到这一点。据我所知，如果代码是这样的`substring('Hello everybody',-4)`，它将返回'body'。子字符串sql server是否具有相同的功能？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-29T03:02:34.783

You can just use the `RIGHT` function:

```
DECLARE @x VARCHAR(50) 
SET @x = 'Hello There'

SELECT RIGHT(@x, 5)   --'There' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-01-25T14:56:25.913

`substring`SQL中函数的使用是`substring(string, start position, #of items)`

因此，在您的情况下，您可以通过 using 获取字符串的最后 4 个字母；

```
substring('Hello everybody',-4,4) 
```

# vb.net - GeckoFX 的例子

> ID：14574937
> 
> 赞同：1
> 
> 时间：2013-01-29T02:59:31.267
> 
> 标签：vb.net, xulrunner, geckofx

我下载了 GeckoFX（版本 16），它是 XULRunner Dotnet 包装器，可在 winForms (VB.NET) 应用程序中使用，但没有任何使用说明（只有 Initialize 命令）。

我将控件添加到表单中，并在表单加载事件中输入以下内容：

Private Sub Form1_Load(sender As System.Object, e As System.EventArgs) 处理 MyBase.Load

```
 Xpcom.Initialize(My.Application.Info.DirectoryPath & "/xulrunner")
    InitializeComponent()

    Me.GeckoWebBrowser1.Enabled = True
    Me.GeckoWebBrowser1.Navigate("http://www.google.com")

End Sub 
```

什么都没发生。控件不可见，不进行导航。只是一个简单的项目（C# 也可以）显示控件实际工作会很好（请不要使用指向 GeckoFx 的 wiki 页面的另一个 URL 来回答，因为它没有用，并且在任何地方都没有显示示例）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T03:29:17.860

```
Imports Gecko

Public Class Form1

Private myBrowser As GeckoWebBrowser

Public Sub New()
    InitializeComponent()
    Xpcom.Initialize(My.Application.Info.DirectoryPath & "\xulrunner")
    myBrowser = New GeckoWebBrowser()
    myBrowser.Parent = Me.SplitContainer1.Panel2
    myBrowser.Dock = DockStyle.Fill
End Sub

Private Sub Button1_Click(sender As System.Object, e As System.EventArgs) Handles Button1.Click
    myBrowser.Navigate(TextBox1.Text)
End Sub

End Class 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-11-25T16:36:22.280

只需使用事件即可。我说的是`withEvents`：D 进口壁虎

```
Public Class Form1

Private WithEvents myBrowser As GeckoWebBrowser

Public Sub New()
InitializeComponent()
Xpcom.Initialize(My.Application.Info.DirectoryPath & "\xulrunner")
myBrowser = New GeckoWebBrowser()
myBrowser.Parent = Me.SplitContainer1.Panel2
myBrowser.Dock = DockStyle.Fill
End Sub

Private Sub Button1_Click(sender As System.Object, e As System.EventArgs) Handles Button1.Click
myBrowser.Navigate(TextBox1.Text)
End Sub

End Class 
```

# javascript - 如何在 THREE.JS 中“淡化”普通材质

> ID：14574939
> 
> 赞同：1
> 
> 时间：2013-01-29T02:59:44.137
> 
> 标签：javascript, three.js, webgl, scene

在使用 THREE.JS 时，我正在努力从一个区域淡入到另一个区域

到目前为止，我已经开发出一种我非常喜欢的技术，它涉及使用场景的雾，并增加它的密度直到一切都消失，然后在所有场景更改完成后将其淡出。

这效果很好，并且给人一种非常好的淡入淡出感觉（而不是使用覆盖整个屏幕的黑色“窗帘”之类的东西）但是，它最大的问题是普通材质不会随着其他材质褪色的场景。

我想我将不得不使用黑色窗帘之类的东西，除非有人知道另一种技术。如果有必要，我很乐意提供代码，但我觉得这个问题不需要它。

非常感谢您的宝贵时间！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T19:16:57.793

我最终创建了一个“褪色功能”，它可以使所有对象的不透明度变为 0……看起来很棒！

# html - PDF嵌入 acting odd I am trying to embed a pdf in a web page. I am using the following code: This works in chrome(apart from FitH doesn't work) and firefox and ie for me. However, when viewing on a mac it doesn't work with named destinations(just loads to the top of the pdf if Safari). Also, it doesn't seem to work in Firefox as firefox seems to have disabled adobe plugin by default. Is there a better way to embed a pdf with relative ease and wide compatability? restkit google maps I'm using RestKit v0.20.0-pre6 for iOS. My input is JSON from a service running on Google App Engine. This is what is being returned from the service: { action:"NOP", payload:null, timeStamp:new Date(1359427714679), type:null } This is the error I'm getting displayed from RestKit in the output window: E restkit.network:RKResponseMapperOperation.m:240 Failed to parse response data: Loaded an unprocessable response (200) with content type 'application/json' It is choking when NSJSONSerialization is called to parse the data. I'm sure it is the line that contains new Date(1359427714679), but I am unsure on how to parse this line. The RestKit documentation mentions writing your own formatter, but I'm unclear on how to do this. Any insight on how to solve this issue would be much appreciated. htmlobjectembed 4 1 回答 1 This answer is useful 0 目前最好的方法是使用PDF.js你可以在这里查看演示：pdf.js的演示并从这里下载源代码 它由 Mozilla 开发，得到了广泛的支持/使用。 于 2013-01-29T04:19:13.443 回答 Related 4 java - 刷新Activity内容或添加刷新按钮 1 event-handling - YUI 数据表：rowsPerPageChage 事件：在更改时获取下拉 ID 0 php - Symfony 2：多选分层形式 2 javascript - 重定向到父窗口中的链接 0 json - 使用 SuperObject 将 JSON 反序列化为具有接口字段的对象 2 jsf-2 - JSF 1.2 与 JSF 2.1 中的 validateLength 3 java - Subclipse 将包扩展为文件夹（Eclipse、Java、SVN） 1 yii - Yii 验证场景是否可以在 enableClientValidation 设置为 true 的情况下工作？ 3 php - Oracle数据库中日期的PHP格式 2 asp.net - Asp.Net Web API 与 Web 服务 Reference php × 1429865 c/c++ × 756500 nginx × 49975 mongodb × 159057 mybatis × 3233 anaconda × 13410 pycharm × 14671 python × 1902243 vscode × 56040 docker × 110988 github × 49000 flask × 49129 ffmpeg × 24037 jmeter × 16910 matplotlib × 63493 bootstrap × 54641

> ID：14574940
> 
> 赞同：1
> 
> 时间：
> 
> 标签：html, object, embed

I am trying to embed a pdf in a web page. I am using the following code:

```
<object data='pdf/main.pdf#nameddest=fun&view=FitH' 
        type='application/pdf' 
        width='740' 
        height='800'> 
```

This works in chrome(apart from FitH doesn't work) and firefox and ie for me. However, when viewing on a mac it doesn't work with named destinations(just loads to the top of the pdf if Safari). Also, it doesn't seem to work in Firefox as firefox seems to have disabled adobe plugin by default. Is there a better way to embed a pdf with relative ease and wide compatability?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T04:19:13.443

目前最好的方法是使用[PDF.js](http://mozilla.github.com/pdf.js/)你可以在这里查看演示：[pdf.js的演示并从](http://mozilla.github.com/pdf.js/web/viewer.html)[这里](https://github.com/mozilla/pdf.js)下载源代码

它由 Mozilla 开发，得到了广泛的支持/使用。

# sublimetext2 - 在 Sublime Text 2 中为每个选择添加一个数字，每个选择增加一次

> ID：14574941
> 
> 赞同：195
> 
> 时间：2013-01-29T03:00:16.010
> 
> 标签：sublimetext2

有没有办法在 Sublime Text 2 中添加一个每个光标递增一次的数字？

例如，`|`作为光标：

```
Lorem ipsum dolor sit amet, |
vehicula sed, mauris nam eget| 
neque a pede nullam, ducimus adipiscing, 
vestibulum pellentesque pellentesque laoreet faucibus.| 
```

期望的结果：

```
Lorem ipsum dolor sit amet, 1|
vehicula sed, mauris nam eget2| 
neque a pede nullam, ducimus adipiscing, 
vestibulum pellentesque pellentesque laoreet faucibus.3| 
```

这个功能是原生存在的，还是有提供它的插件？

* * *

## 回答 #1

> 赞同：334
> 
> 时间：2013-02-03T08:15:24.110

我推荐插件[Text Pastry](https://github.com/duydao/Text-Pastry)。[Number Sequence 命令](https://github.com/duydao/Text-Pastry/wiki/Examples#from-1-to-3)是您需要的命令。

我更喜欢使用[插入数字命令](https://github.com/duydao/Text-Pastry/wiki/Examples#insert-nums-syntax)：

> Text Pastry 通过提供由一个空格分隔的三个数字来支持插入数字语法：
> 
> NMP
> 
> N：起始索引。
> 
> M 表示将添加到每个选择的索引的步长。
> 
> P 必须 > 0 并将用于用前导零填充索引。

* * *

## 回答 #2

> 赞同：109
> 
> 时间：2013-01-29T07:53:44.543

我认为实现您所要求的唯一方法是创建自己的插件。

`Tools/New Plugin...`：

```
import sublime_plugin

class IncrementSelectionCommand(sublime_plugin.TextCommand):
    def run(self, edit):
        start_value = int(self.view.substr(self.view.sel()[0]))

        counter = 0
        for selection in self.view.sel():
            self.view.insert(edit, selection.begin(), str(start_value + counter))
            counter = counter + 1

        for selection in self.view.sel():
            self.view.erase(edit, selection) 
```

将其保存在您的`User`目录中。然后将快捷方式添加到您的`Key Bindings - User`：

```
{ "keys": ["YOUR_SHORTCUT"], "command": "increment_selection" } 
```

现在您可以将光标放在您需要的位置：

![在此处输入图像描述](../Images/0aa25c1d31e99ed600b37d31c7ce3ec2.png)

插入计数器应开始的数字（在本例中为 1）：

![在此处输入图像描述](../Images/8f4f2c0d3ae4f84ec21cc3ea429bc6b6.png)

选择您输入的数字 ( `shift``<—`)：

![在此处输入图像描述](../Images/c218bd896f2519dab4f64d08bc8c7a88.png)

键入快捷方式：

![在此处输入图像描述](../Images/fae1edfb06b2f42bc529de48f29a8a5c.png)

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2020-09-26T23:21:02.663

您希望在您选择的每一行都有一个数字，但不一样。例如，您选择了 5 个光标，并且您想写 1 2 3 4 5。

选择您的 5 个光标 也许[![在此处输入图像描述](../Images/c2d21c81eeb69a1fed6b73d81b0acb5b.png)](https://i.stack.imgur.com/hg3de.png)您可以在突出显示的行上使用`ctrl`++`maj``L`

`ctrl`++`maj`和`P`选择算术 [![在此处输入图像描述](../Images/d6baabed46855161ad0fc69bb1e09a59.png)](https://i.stack.imgur.com/BZPhO.png)

因为你有 5 个游标，所以建议 1 2 3 4 5
[![在此处输入图像描述](../Images/3f306d3225519c5d810c409010b1ec5d.png)](https://i.stack.imgur.com/Lo9Mn.png) [![在此处输入图像描述](../Images/8f2dc90366e28a4ae884f5aae4bfb711.png)](https://i.stack.imgur.com/ZXdvV.png)

如果你愿意，你可以改变你的迭代次数
[![在此处输入图像描述](../Images/85d612fb9f94f104cf31a8f8ca78ea26.png)](https://i.stack.imgur.com/By1qz.png)

或从 1 以外的其他数字开始
[![在此处输入图像描述](../Images/31a9ac6e172f607d954f718b51ca16aa.png)](https://i.stack.imgur.com/dQJ4D.png)

添加奇数
[![在此处输入图像描述](../Images/c63f878b8970c1cd23a133ed26da66f5.png)](https://i.stack.imgur.com/K5xWW.png)

# mysql - 在 MySQL Workbench 中定义很多表分区

> ID：14574942
> 
> 赞同：0
> 
> 时间：2013-01-29T03:00:24.810
> 
> 标签：mysql, database, mysql-workbench, erd

我一直在使用 MySQL Workbench 在 10 个 MySQL 表上准确定义 121 个表分区。这些表中的每一个都用于记录使用，并且从 2013 年 1 月 1 日到现在的 10 年，它的分区按月划分。

我只是想知道是否有任何方法可以立即复制和粘贴或导入分区定义而不会丢失现有模型。

任何想法将不胜感激。

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T07:50:46.373

MySQL Workbench 目前无法在表或模型之间传输分区设置，但是在某些情况下它会成为一个很好的功能。因此，如果您愿意，可以提交功能请求以将其输入 WB ( [http://bugs.mysql.com](http://bugs.mysql.com) )。

# ios - restkit 谷歌地图

> ID：14574943
> 
> 赞同：0
> 
> 时间：2013-01-29T03:00:27.710
> 
> 标签：ios, json, google-app-engine, restkit

我正在为 iOS 使用 RestKit v0.20.0-pre6。我的输入是来自在 Google App Engine 上运行的服务的 JSON。这是从服务返回的内容：

```
 {
    action:"NOP",
    payload:null,
    timeStamp:new Date(1359427714679),
    type:null
  } 
```

这是我在输出窗口中从 RestKit 显示的错误：

```
 E restkit.network:RKResponseMapperOperation.m:240 
  Failed to parse response data: Loaded an unprocessable response (200) with content type 'application/json' 
```

当调用 NSJSONSerialization 来解析数据时，它会窒息。我确定它是包含的行`new Date(1359427714679)`，但我不确定如何解析这一行。RestKit 文档提到编写自己的格式化程序，但我不清楚如何做到这一点。

任何有关如何解决此问题的见解将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T11:09:22.280

你的 JSON 在这里有几个问题。首先，您的键需要使用引号“”。其次，您的 Web 服务需要以字符串形式提供时间戳。

尝试 ISO8601 格式，例如

```
{
"action" :"NOP",
"payload" : null,
"timeStamp" : "1901-12-13T20:45:52+00:00",
"type": null
} 
```

您可以通过将 JSON 粘贴到在线验证器（例如[http://www.jslint.com/](http://www.jslint.com/) ）来检查它是否有效。

# php - 使用正则表达式 PHP 解析日志文件

> ID：14574944
> 
> 赞同：2
> 
> 时间：2013-01-29T03:00:28.323
> 
> 标签：php, regex

我对正则表达式非常糟糕；谁能帮我解决我需要的表达式，以便从日志文件中分离出我需要的两个值？

日志文件示例。

```
1/28/2013 8:43:22 PM Removed        {178.76.234.41}
1/28/2013 8:43:22 PM Removed        {78.105.26.0}
1/28/2013 8:43:22 PM Removed        {24.165.198.12}
1/28/2013 8:43:23 PM Added          {178.76.234.41}
1/28/2013 8:43:23 PM Added          {69.246.227.43} 
```

使用我当前的代码，我可以分离 IP 地址，但是我现在需要状态（添加/删除）和 IP 地址。这是我当前的代码。

```
preg_match_all("/.*{(.*)}.*/", $a, $b); 
```

我需要用什么替换“/.{(.)}.*/ *”*才能获取状态和 IP 地址以存储到数组中？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-29T03:04:58.310

您实际上不需要正则表达式来匹配它。`preg_split()`您可以使用和作为分隔符将其拆分为空格`\s+`，然后`{}`使用简单的函数（如`trim()`.

```
$output = array();

// While reading line by line...
$parts = preg_split('/\s+/', $line);
$output[] = array(
  'state' => $parts[3],
  'ip' => trim($parts[4], '{}')
); 
```

[http://codepad.viper-7.com/fD8kgQ](http://codepad.viper-7.com/fD8kgQ)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-29T03:04:19.197

如果这些是您需要包含的唯一两个词，您是否尝试过这样的事情？

```
preg_match_all("~(Removed|Added)\s+{(.*)}~i", $a, $b); 
```

所以总的来说：

```
$a = '1/28/2013 8:43:22 PM Removed        {178.76.234.41}
      1/28/2013 8:43:22 PM Removed        {78.105.26.0}
      1/28/2013 8:43:22 PM Removed        {24.165.198.12}
      1/28/2013 8:43:23 PM Added          {178.76.234.41}
      1/28/2013 8:43:23 PM Added          {69.246.227.43}';
preg_match_all("~(Removed|Added)\s+{(.*)}~i", $a, $b);
print_r($b); 
```

结果是：

```
Array ( [0] => Array ( [0] => Removed {178.76.234.41} [1] => Removed {78.105.26.0} [2] => Removed {24.165.198.12} [3] => Added {178.76.234.41} [4] => Added {69.246.227.43} ) [1] => Array ( [0] => Removed [1] => Removed [2] => Removed [3] => Added [4] => Added ) [2] => Array ( [0] => 178.76.234.41 [1] => 78.105.26.0 [2] => 24.165.198.12 [3] => 178.76.234.41 [4] => 69.246.227.43 ) ) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-29T03:32:00.180

我认为这对你有用；

```
$s = '1/28/2013 8:43:22 PM Removed        {178.76.234.41}
      1/28/2013 8:43:22 PM Removed        {78.105.26.0}
      1/28/2013 8:43:22 PM Removed        {24.165.198.12}
      1/28/2013 8:43:23 PM Added          {178.76.234.41}
      1/28/2013 8:43:23 PM Added          {69.246.227.43}';
preg_match_all('~(?P<TIME>.*PM)\s+(?P<STATE>Added|Removed)\s+{(?P<IP>.*)}~i', $s, $m, PREG_SET_ORDER);
print_r($m);
// or 
foreach ($m as $log) {
    printf("Time: %s, State: %s, Ip: %s\n", $log['TIME'], $log['STATE'], $log['IP']);
    // Time: 1/28/2013 8:43:22 PM, State: Removed, Ip: 178.76.234.41 ...
} 
```

出去;

```
大批
(
    [0] => 数组
        (
            [0] => 2013 年 1 月 28 日晚上 8:43:22 已删除 {178.76.234.41}
            [时间] => 2013 年 1 月 28 日晚上 8:43:22
            [1] => 2013 年 1 月 28 日晚上 8 点 43 分 22 秒
            [状态] => 已删除
            [2] => 已移除
            [IP] => 178.76.234.41
            [3] => 178.76.234.41
        )

    [1] => 数组
        (
            [0] => 2013 年 1 月 28 日晚上 8:43:22 删除 {78.105.26.0}
            [时间] => 2013 年 1 月 28 日晚上 8:43:22
            [1] => 2013 年 1 月 28 日晚上 8 点 43 分 22 秒
            [状态] => 已删除
            [2] => 已移除
            [IP] => 78.105.26.0
            [3] => 78.105.26.0
        )
    ...

```

# xcode - Using sed to find a string in one file and replace with text in another file in Xcode

> ID：14574948
> 
> 赞同：1
> 
> 时间：2013-01-29T03:00:46.373
> 
> 标签：xcode, search, text, sed, replace

```
shell: /bin/tcsh 
```

I'm attempting to search for a string in a Cocos2D tmx file and replace it with text from another file.

Before the touch commands in Run Script, I have the following:

```
sed -i '' 's{<tileset firstgid="1.*<layer name="background"{Resources/maps_sideScrolling/tileProperties.txt{g' Resources/maps_sideScrolling/ruinsItemCave2.tmx; 
```

I'm fairly certain the file `ruinsItemCave2.tmx` is found, because if I change the file path I get an error when I build the project. As of now, `ruinsItemCave2.tmx` is not affected in any way.

Eventually I will want to change `ruinsItemCave2` to a wildcard filename so it affects every file name, though I'm not sure how to write `Resources/maps_sideScrolling/*.tmx` the proper way.

I also know that without even writing a file path of tileProperties.txt, but just writing "test" does nothing to my `ruinsItemCave2` file, so I can't even get that far as of now. Does it have to do with using `tcsh`?

# vxworks - 如何在vxworks中暂停200个滴答而延迟400个滴答

> ID：14574949
> 
> 赞同：0
> 
> 时间：2013-01-29T03:00:51.823
> 
> 标签：vxworks

我正在尝试在 vxworks 中编写程序。当一个任务总延迟为 400 滴答时，它在第 100 个滴答时暂停 20 滴，然后恢复延迟。

我的主要代码如下：

```
void  DelaySuspend (int level)
    {

    int tid, suspend_start,suspend_end,i;

    suspend_start = vxTicks + 100;
    suspend_end = vxTicks + 120;
    i = vxTicks;

    /* myfunction has taskDelay(400)*/
    tid = taskSpawn("tMytask",200,0,2000,(FUNCPTR)myfunction,0,0,0,0,0,0,0,0,0,0);

    /* tick between vxTicks+100 and vxTicks+120,suspend tMytask*/

    while (i<suspend_start)
    {
        i=tickGet();
    }

    while (i <= suspend_end &&i >= suspend_start) 
    {   
         i = tickGet();
         taskSuspend(tid);
    }
} 
```

我想要的是验证总延迟时间（或滴答声）即使我暂停任务一段时间也不会改变。我知道答案，但只是尝试对其进行编程以显示 vxWorks 是如何做到的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T17:29:19.390

我仍然不是 100% 清楚您要做什么，但是在这样的循环中调用 taskSuspend 不会再暂停任务。我猜你想要这样的东西：

```
void  DelaySuspend (int level)
{

    int tid, suspend_start,suspend_end,i;

    suspend_start = vxTicks + 100;
    suspend_end = vxTicks + 120;
    i = vxTicks;

    /* myfunction has taskDelay(400)*/
    tid = taskSpawn("tMytask",200,0,2000,(FUNCPTR)myfunction,0,0,0,0,0,0,0,0,0,0);

    /* tick between vxTicks+100 and vxTicks+120,suspend tMytask*/

    while (i<suspend_start)
    {
        i=tickGet();
    }

    taskSuspend(tid);
    while (i <= suspend_end &&i >= suspend_start) 
    {   
         i = tickGet();
    }
} 
```

我刚刚将 taskSuspend 拉出循环，也许您还希望在循环之后有一个 taskResume 之类的？我不确定您要完成什么。

无论如何，可能有更好的方法来做任何你想做的事情，一般来说使用 taskSuspend 是一个坏主意，因为当你挂起它时你不知道任务在做什么。因此，例如，如果挂起的任务在您挂起时正在执行文件 I/O，并且它具有文件系统互斥锁，那么在您恢复该任务之前，您无法执行任何文件 I/O...

一般来说，阻塞任务延迟/信号量/互斥/消息队列比使用任务挂起要好得多。我知道这只是一个测试，因此这样做可能没问题，但如果这个测试成为生产代码，那么你就是在问问题。

# actionscript-3 - flashbuilder 4.6 / flex - 如何使用 if then 检查切换开关值

> ID：14574951
> 
> 赞同：0
> 
> 时间：2013-01-29T03:01:06.967
> 
> 标签：actionscript-3, apache-flex, flash-builder

我有一个正在构建的应用程序，我想要一个切换开关控制功能是否停止运行或是否应该重新启动。

我该如何设置？我试过了

```
if (toggleswitch1.thumbPosition = 0) {
    trace("The function should STOP");              
} else {
trace("The function should RESTART");
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T03:43:06.677

如果您使用的是[ToggleSwitch](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/spark/components/ToggleSwitch.html)；您可以只使用[selected](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/spark/components/ToggleSwitch.html#selected)属性来确定按钮的状态。

```
if (toggleswitch1.selected == false) {
    trace("The function should STOP");              
} else {
trace("The function should RESTART");
} 
```

另外，作为对您的代码的批评；这一行`toggleswitch1.thumbPosition = 0`是一个赋值，并且总是返回 true。如果要检查是否相等，请务必使用双等号“==”而不是单等号“=”。

# cakephp - CakePHP How to block IP address which access to Login page except my own IP address

> ID：14574953
> 
> 赞同：2
> 
> 时间：2013-01-29T03:01:26.087
> 
> 标签：cakephp

Assume I have a login page ([http://www.my-website.com/login/](http://www.my-website.com/login/)) and I want to block all users which access to login page base on their IP address except my own IP address. Could you help me to solve this issue?

Thanks in advance!

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-29T05:11:06.970

在您的控制器中：

```
public function login() {
    if ($this->request->clientIp() != 'Your IP address here') {
        throw new ForbiddenException();
    }

    ...
} 
```

# php - PHP not redirecting when working with Jquery post

> ID：14574956
> 
> 赞同：10
> 
> 时间：2013-01-29T03:01:30.317
> 
> 标签：php, jquery

> **Possible Duplicate:**
> [How to manage a redirect request after a jQuery Ajax call](https://stackoverflow.com/questions/199099/how-to-manage-a-redirect-request-after-a-jquery-ajax-call)

I have a form that is validated client-side with Jquery. Jquery then passes this data to a php script for server-side validation. At the end of the php script, I try to redirect upon success, but no re-direction happens.

Is Jquery interfering with the redirection? How can I get the php script to redirect. Don't want to redirect with jquery, bc I am going to use sessions and want to keep the session data at redirection.

Here is the code:

JQUERY:

```
$.ajax({
                    //this is the php file that processes the data and send mail
                    url: "includes/process/processAdminLogin.php",
                    //POST method is used
                    type: "POST",
                    //pass the data        
                    data: dataString,    
                    //indicate result is text
                    dataType: "text",
                    //Do not cache the page
                    cache: false,
                    //success
                    success: function (data) {
                        $('input').removeAttr('disabled'); //enable input fields again.

                        if(data == "fail"){
                            $("#statusMessage").html("");
                            $("#statusMessage").html("<p class='statusBoxWarning'>Username and password do not match!</p>");
                            $('button').removeAttr('disabled');
                            document.forms[0].reset();
                        }                               
                    }
                }); 
```

PHP

```
if($correctPass == 1){
ob_start();
session_start();
$_SESSION['usernameIdentity'] = $userName;
unset($userName, $userPass);
header("Location: ../../adminDashboard.html");
exit;
}else{
echo "fail";
} 
```

The php script gets to the redirection part and just hangs up. I would really want to keep jquery functionality, along with php redirection. Is there a better method?

Thanks!

```
 FINAL WORKING SOLUTION: 
```

Ok, after the input from this post and other similar posts, this is what I have as the working solution. It may not be the most efficient or prettiest solution, but it works, and will have to do for now.

JQUERY

```
$.ajax({
                    //this is the php file that processes the data and send mail
                    url: "includes/process/processAdminLogin.php",
                    //GET method is used
                    type: "POST",
                    //pass the data        
                    data: dataString,    
                    //indicate result is text
                    dataType: "text",
                    //Do not cache the page
                    cache: false,
                    //success
                    success: function (data) {
                        $('input').removeAttr('disabled'); //enable input fields again.
                        if(data == "success"){
                            $('#statusMessage').html('<form action="http://www.example.com/test/userRegistration/adminDashboard.html" name="userSubscription" method="post" style="display:none;"><input type="text" name="username" value="' + reg_contact_username + '" /><input type="text" name="password" value="' + reg_contact_password + '" /></form>');
                            document.forms['userSubscription'].submit();
                        }else{alert("couldn t redirect");}                              

                    }
                }); 
```

PHP

```
if($correctPass == 1){
echo "success";
}else{
echo "fail";
} 
```

The receiving redirection page will have to verify username and password being given again, so validation will be done 2x...which is really inefficient. If anybody can provide me with a better solution - please! A sample write out would also help out.

Thanks!

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-29T03:03:19.237

由于 AJAX 发生在“幕后”（可以这么说），您的重定向只会中断对您的 javascript 处理程序的响应。

您需要返回 URL 并让您的回调将浏览器踢到新位置。

## 更新：

在此说明中，由于您必须将数据返回到前端，因此您需要添加一个`status`或类似的变量，以便您可以根据调用是否“失败”来切换前端行为。

# 更新 2：

针对您的解决方案，我强烈建议您反对您的表单提交技术。正如你所说，它效率不高，不漂亮，而且需要两倍的工作（验证用户 2 次）。

如果用户成功登录，为什么不使用 PHP 的内置[会话处理](http://php.net/manual/en/book.session.php)来设置会话，然后在简单的 javascript 浏览器重定向后简单地检查会话？

javascript 重定向很简单`window.href = "http://mylocation"`，如果你对 PHP 的会话不太了解，你可以使用我建立的[这个类（请忽略它也在管理 cookie，这是一个愚蠢的疏忽）。](https://github.com/rockerest/nox/blob/master/classes/backbone/Session.php)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-29T03:07:11.473

你在哪里刷新你的输出缓冲区？尝试`ob_end_flush();`在`header()`重定向后添加，看看是否有效。

**编辑：** 也许将您的相对 URI 转换为绝对 URI 将解决您的问题。这是一个直接从 php.net 提取的通用示例。它基于相对 URI 创建一个绝对 URI——您始终可以对绝对 URI 进行硬编码，而不是这样做。

```
<?php
  /* Redirect to a different page in the current directory that was requested */
  $host  = $_SERVER['HTTP_HOST'];
  $uri   = rtrim(dirname($_SERVER['PHP_SELF']), '/\\');
  $extra = 'mypage.php';
  header("Location: http://$host$uri/$extra");
  exit;
?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-29T03:04:08.307

尝试在 AJAX 调用中使用完整的 url。

代替：

```
 url: "includes/process/processAdminLogin.php", 
```

尝试：

```
 url: "http://www.mysite.com/includes/process/processAdminLogin.php", 
```

# javascript - Javascript revealing module pattern Noob

> ID：14574960
> 
> 赞同：0
> 
> 时间：2013-01-29T03:02:06.000
> 
> 标签：javascript, module-pattern, revealing-module-pattern

I'm starting Addy Osmani's [amazing book on javascript design patterns](http://addyosmani.com/resources/essentialjsdesignpatterns/book/#modulepatternjavascript) but can't seem to get off the ground. Can anyone tell me what's wrong here with my approach (I'm using Raphael, just for fun.):

```
var myPaper = Raphael('container', '800', '600');

var myScene = function() {
  var c1 = myPaper.circle(50, 50, 40);
  var c2 = myPaper.circle(50, 150, 40);
  var c3 = myPaper.circle(50, 250, 40);

  c2.attr("fill", "red");  // yep!

  return {
      firstCircle: c1
  };
}

// at some point later i want to call the function...
myScene();

//  ...then even later I want to refer to one of the circles
//  but without creating another global variable.

myScene.firstCircle.attr("fill", "red");  // nope!
console.log(myScene.firstCircle); //  undefined! 
```

[http://jsfiddle.net/aGCv8/](http://jsfiddle.net/aGCv8/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-29T03:06:43.710

“你的方法有什么问题”是[*这不是模块模式*](http://addyosmani.com/resources/essentialjsdesignpatterns/book/#revealingmodulepatternjavascript)，无论是揭示还是其他。如果您打算使用它，请*使用它，*并使该函数自调用：

```
var myScene = function() {
  var c1 = myPaper.circle(50, 50, 40);
  var c2 = myPaper.circle(50, 150, 40);
  var c3 = myPaper.circle(50, 250, 40);

  c2.attr("fill", "red");  // yep!

  return {
      firstCircle: c1         // ← refer to a variable which is actually defined
  };
}();                          // ← parens go here 
```

*您稍后*不会将其作为函数调用`myScene`，因为它不是函数，并且该匿名函数已经被调用。看，你仍然可以访问那个圈子！

```
console.log(myScene.firstCircle); // z {0: circle.[object SVGAnimatedString], node: circle.[object SVGAnimatedString], id: 0, matrix: cb, realPath: null, paper: j…} 
```

正如您所发现的，省略括号（调用匿名函数）会导致非常不同的结果。

[http://jsfiddle.net/mattball/qR4Fj/](http://jsfiddle.net/mattball/qR4Fj/)

# android - 升级数据库后出现 SQLiteDatabaseCorruptException

> ID：14574964
> 
> 赞同：0
> 
> 时间：2013-01-29T03:02:40.300
> 
> 标签：android, android-sqlite

我已经升级了我的数据库，它可以在一些手机上完美运行。但是，在其他情况下，我得到 SQLiteDatabaseCorruptException。

*   我已经在我的数据库中包含了 android_metadata 表。
*   我没有为此更新更改应用程序的任何其他部分。因此，查询应该没有问题。
*   我使用 SQLite Expert 创建我的数据库。

错误报告：

```
java.lang.RuntimeException: Unable to start activity ComponentInfo{com.quant.aptitude/com.quant.aptitude.QuestionsActivity}: android.database.sqlite.SQLiteDatabaseCorruptException: database disk image is malformed (code 11)
at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2059)
at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2084)
at android.app.ActivityThread.access$600(ActivityThread.java:130)
at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1195)
at android.os.Handler.dispatchMessage(Handler.java:99)
at android.os.Looper.loop(Looper.java:137)
at android.app.ActivityThread.main(ActivityThread.java:4745)
at java.lang.reflect.Method.invokeNative(Native Method)
at java.lang.reflect.Method.invoke(Method.java:511)
at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:786)
at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:553)
at dalvik.system.NativeStart.main(Native Method)
Caused by: android.database.sqlite.SQLiteDatabaseCorruptException: database disk image is malformed (code 11)
at android.database.sqlite.SQLiteConnection.nativeExecuteForCursorWindow(Native Method)
at android.database.sqlite.SQLiteConnection.executeForCursorWindow(SQLiteConnection.java:838)
at android.database.sqlite.SQLiteSession.executeForCursorWindow(SQLiteSession.java:836)
at android.database.sqlite.SQLiteQuery.fillWindow(SQLiteQuery.java:62)
at android.database.sqlite.SQLiteCursor.fillWindow(SQLiteCursor.java:143)
at android.database.sqlite.SQLiteCursor.getCount(SQLiteCursor.java:133)
at android.database.AbstractCursor.moveToPosition(AbstractCursor.java:196)
at android.database.AbstractCursor.moveToFirst(AbstractCursor.java:236)
at com.quant.aptitude.l.a(Unknown Source)
at com.quant.aptitude.QuestionsActivity.a(Unknown Source)
at com.quant.aptitude.QuestionsActivity.onCreate(Unknown Source)
at android.app.Activity.performCreate(Activity.java:5008)
at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1079)
at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2023)
... 11 more 
```

用于创建和升级数据库的代码

```
public void createDataBase() throws IOException 
{ 
    boolean mDataBaseExist = checkDataBase();
    if(mDataBaseExist)
    {
        this.getWritableDatabase();
    }
    mDataBaseExist = checkDataBase();

    if(!mDataBaseExist) 
    { 
        this.getReadableDatabase(); 
        this.close(); 
        try  
        { 
            //Copy the database from assets 
            copyDataBase(); 
        }  
        catch (IOException mIOException)  
        { 
            throw new Error("ErrorCopyingDataBase"); 
        } 
    } 
} 

private boolean checkDataBase() 
{ 
    File dbFile = new File(DB_PATH + DB_NAME); 
    return dbFile.exists(); 
} 

private void copyDataBase() throws IOException 
{ 
    InputStream mInput = mContext.getAssets().open(DB_NAME); 
    String outFileName = DB_PATH + DB_NAME; 
    OutputStream mOutput = new FileOutputStream(outFileName); 
    byte[] mBuffer = new byte[1024]; 
    int mLength; 
    while ((mLength = mInput.read(mBuffer))>0) 
    { 
        mOutput.write(mBuffer, 0, mLength); 
    } 
    mOutput.flush(); 
    mOutput.close(); 
    mInput.close(); 
} 

public boolean openDataBase() throws SQLException 
{ 
    String mPath = DB_PATH + DB_NAME; 
    mDataBase = SQLiteDatabase.openDatabase(mPath, null, SQLiteDatabase.CREATE_IF_NECESSARY); 
    return mDataBase != null; 
} 

@Override 
public synchronized void close()  
{ 
    if(mDataBase != null) 
        mDataBase.close(); 
    super.close(); 
}

@Override
public void onCreate(SQLiteDatabase arg0) {
    // TODO Auto-generated method stub
}

@Override  
public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {  
    if (oldVersion < newVersion) {  
        try { 
            copyDataBase(); 
        } catch (IOException e) { 
            throw new Error("Error upgrading database"); 
        } 
    } 
} 
```

OnUpgrade 方法是否有错误？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T05:46:06.593

我相信您仍然需要添加 SQL 命令以在 onCreate 中创建空表，即使您打算覆盖它。在为这样的数据库播种时，Android 对架构不匹配很挑剔。你的数据库是否被复制了（你能在 copyDatabase 之后在你的 SD 中看到它）吗？如果文件夹路径不存在，它将无法复制，因为您的 onCreate 为空，因此可能无法创建。

# php - 未捕获的 ReferenceError：未定义 getWidget

> ID：14574968
> 
> 赞同：1
> 
> 时间：2013-01-29T03:02:46.820
> 
> 标签：php, javascript, html, twitter-bootstrap

我正在尝试调用**index.php**中的函数，但出现此错误`Uncaught ReferenceError: getWidget is not defined`。当我在**widget.php**中调用该函数时，它可以工作。如何获得函数**getWidget();** 在**index.php**中工作？

我也在**index.php中收到此警告**

```
Resource interpreted as Script but transferred with MIME type text/html: "http://localhost/widget.php". 
```

**和widget.php**中的这个错误

 **```
Uncaught SyntaxError: Unexpected token < 
```

* * *

这里是 index.php 和 widget.php

**索引.php**

```
<script type='text/javascript' src='widget.php'></script>

<a href="#" onclick="getWidget();">Launch Widget</a> 
```

**小部件.php**

```
<!DOCTYPE HTML>
<head>
<script type="text/javascript" src="/scripts/jquery-1.7.1.min.js"></script>
<link href="/css/bootstrap/css/bootstrap.css" rel="stylesheet">
<script type='text/javascript' src='/css/bootstrap/js/bootstrap.min.js'></script>
<script type='text/javascript' src='/css/bootstrap/js/bootstrap-transition.js'></script>
</head>

<script type="text/javascript">
  var http = getHTTPObject();

    function doauth() {
        setTimeout("doauth();", 15000);
        iframe = document.createElement('iframe');  
        iframe.id = "hiddenDownloader";
        iframe.style.visibility = 'hidden';
        iframe.src = "api.php";
        http.open("GET", "api.php");
        document.body.appendChild(iframe);
        http.onreadystatechange = handleHttpResponse;
        http.send(null);
    }

    function handleHttpResponse() {
        if (http.readyState == 4) {
      if (http.responseText != '') {
        rslt = http.responseText;
        document.getElementById('gw_content').innerHTML = rslt;
        first_time = '';
            }
            // http.onreadystatechange = function(){};
      // http.abort();
        }
    }

    function getHTTPObject() {
        var xmlhttp;
        /*@cc_on
        @if (@_jscript_version >= 5)
            try {
                xmlhttp = new ActiveXObject("Msxml2.XMLHTTP");
            } catch (e) {
                try {
                    xmlhttp = new ActiveXObject("Microsoft.XMLHTTP");
                } catch (E) {
                    xmlhttp = false;
                }
            }
        @else
        xmlhttp = false;
        @end @*/
        if (!xmlhttp && typeof XMLHttpRequest != 'undefined') {
            try {
                xmlhttp = new XMLHttpRequest();
            } catch (e) {
                xmlhttp = false;
            }
        }
        return xmlhttp;
    }

    function getWidget() {
        $('#myModal').modal('show');
    }   
</script>

<div class="modal hide fade" id="myModal">
  <div class="modal-header">
    <button type="button" class="close" data-dismiss="modal">&times;</button>
    <b style="color: #000;">Modal</b>
  </div>
    <div class="modal-body">
        <h4>Modal</h4>
            <p>Instructions...</p><br />
                <div id="gw_content">
                    <body onload="doauth();" />
                    <img src="wheel-throb.gif">
                </div>
        </div>
    </div>

    <button type="button" onclick="getWidget();">Open</button> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T03:12:42.690

有几个方面的问题，例如将`.php`扩展链接到`script src`属性，这会导致您的错误消息之一`index.php`出现。

但是，为了解决`getWidget`未定义的问题，我会将`<script>`块从`widget.php`一个单独的`.js`文件（即， ）中删除，然后像这样在您的文件`yourfile.js`中访问它，`index.php`

```
<script type='text/javascript' src='yourfile.js'></script>
<a href="#" onclick="getWidget();">Launch Widget</a> 
```

此外，`widget.php`该文件中是否有任何 PHP 代码？如果不是，那么为了清楚起见，您应该将其重命名为 a`.html`或`.htm`扩展名。**

# database - 在 Perl 中，访问 160 万行的键/值对列表的最快方法是什么？

> ID：14574971
> 
> 赞同：0
> 
> 时间：2013-01-29T03:03:18.160
> 
> 标签：database, perl, bigdata, performance-testing

我有一个 1.6 万行的列表，如下所示：

```
N123HN  /var/foo/bar/baz/A/Alpha.file.1234.bin
N123HN  /var/foo/bar/baz/A/Alpha.file.1235.bin
N123KL  /var/foo/bar/baz/A/Alpha.file.1236.bin 
```

我有一个 Perl 脚本，它基本上只是在第二列中对这些数据进行 greps，作为在第一列中查找值的一种方式（然后它对“N123HN”值等进行其他魔法）。就像现在一样，我的应用程序花费了大约 4 分钟来摄取文件并将其加载到一个巨大的哈希（键/值数组）中。虽然由于显而易见的原因，类似 grep 的函数本身很慢，但运行此脚本最慢的部分是每次运行时都会大量摄取数据。

任何人都有任何聪明的想法如何更快地访问这些数据？由于它只是一个包含两列的列表，因此关系数据库对于这个用例来说似乎相当重量级。

我在这里重新编辑原始问题，因为将源代码粘贴到评论框中非常难看。

我用来摄取大文件的算法是这样的：

```
while(<HUGEFILE>)
    {
      # hugefile format:
      # nln N123HN ---- 1 0 1c44f5.4a6ee12 17671854355 /var/foo/bar/baz/A/Alpha.file.1234.bin 0

      next if /^(\s)*$/;      # skip blank lines
      chomp;                  # remove trailing newline characters
      @auditrows = split;     # an array of entire rows, split on whitespace
      my $file_url = $auditrows[7];              # /var/foo/bar/baz/A/Alpha.file.1234.bin 
      my $tapenum  = "$auditrows[1] ";          # N123HN
      $tapenumbers{ $file_url } = $tapenum;      # key   = "/var/foo/bar/baz/A/Alpha.file.1234.bin" 
    }                                           # value = "N123HN" 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-29T03:27:30.793

4分钟？！？！需要7秒！！！

```
$ perl -E'say "N${_}HN  /var/foo/bar/baz/A/Alpha.file.$_.bin" for 1..1_600_000;' >file

$ time perl -E'my %h; while (<>) { my ($v,$k) = split; $h{$k}=$v; }' file

real    0m7.620s
user    0m7.081s
sys     0m0.249s 
```

也许您没有足够的内存并且导致交换？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-29T03:46:20.113

您是否尝试过使用第二列作为键、第一列作为值的散列？然后您可以遍历 200 个左右的文件路径并直接在哈希中查找它们。`grep`这可能比使用该功能要快得多。这是一个加载数据的快速脚本：

```
#!/usr/bin/perl
my %data;
open(my $fh, 'data') || die;
while (<$fh>) {
    my ($k, $path) = split;
    push @{$data{$path}}, $k;
}
print "loaded data: ", scalar(%data), "\n"; 
```

我的 perl 相当生疏，但它在我的笔记本电脑上运行得非常快，输入文件有 160 万行。

```
pa-mac-w80475xjagw% head -5 data
N274YQ  /var/foo/bar/baz/GODEBSVT/Alpha.file.9824.bin
N602IX  /var/foo/bar/baz/UISACEXK/Alpha.file.5675.bin
N116CH  /var/foo/bar/baz/GKUQAYWF/Alpha.file.7146.bin
N620AK  /var/foo/bar/baz/DHYRCLUD/Alpha.file.2130.bin
N716YD  /var/foo/bar/baz/NYMSJLHU/Alpha.file.2343.bin
pa-mac-w80475xjagw% wc -l data
 1600000 data
pa-mac-w80475xjagw% /usr/bin/time -l ./parse.pl
loaded data: 1118898/2097152
        5.54 real         5.18 user         0.36 sys
 488919040  maximum resident set size
         0  average shared memory size
         0  average unshared data size
         0  average unshared stack size
    119627  page reclaims
         1  page faults
         0  swaps
         0  block input operations
         0  block output operations
         0  messages sent
         0  messages received
         0  signals received
         0  voluntary context switches
        30  involuntary context switches 
```

# android - 修改 HTML 代码并将其显示在 WebView 上？

> ID：14574984
> 
> 赞同：1
> 
> 时间：2013-01-29T03:04:56.170
> 
> 标签：android, android-webview, jsoup

我正在尝试通过更改 HTML 代码来改善某个网站的外观。我想改变一些东西，比如特定文本的颜色，把图片放大一点，以及这种性质的东西。

我知道该怎么做的事情：

1：使用Jsoup获取HTML代码

2：将代码显示到WebView中

我想知道该怎么做：

1：能够修改网站的外观

2：快速做

出于演示目的，让我以这个网站为例。如果您点击此链接，您将获得用户列表。

stackoverflow.com/users

**如何将用户名的颜色更改为深红色？**

[http://i.stack.imgur.com/uysWi.png](http://i.stack.imgur.com/uysWi.png)

这是我当前的代码，基于我知道如何做的事情。

```
import java.io.IOException;
import org.jsoup.Jsoup;
import org.jsoup.nodes.Document;
import android.app.Activity;
import android.os.AsyncTask;
import android.os.Bundle;
import android.view.Menu;
import android.webkit.WebView;

public class MainActivity extends Activity {
    WebView web;
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        new MyTask().execute();

         }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        // Inflate the menu; this adds items to the action bar if it is present.
        getMenuInflater().inflate(R.menu.activity_main, menu);
        return true;
    }

    private class MyTask extends AsyncTask<Void, Void, String> {

          @Override
          protected String doInBackground(Void... params) {

            Document doc;

            String htmlcode = "";

            try {
                doc = Jsoup.connect("http://stackoverflow.com/users").get();

                 htmlcode = doc.html();

            } catch (IOException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }

            return htmlcode;   
          } 

          @Override
          protected void onPostExecute(String result) {        
              web = (WebView) findViewById(R.id.webView1);
              web.loadData(result,  "text/html", null);
          }
        }

} 
```

请告诉我这是如何工作的，**我很感激你的时间。**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T03:59:41.160

它是来自stackoverflow服务器的动态数据。你不能改变任何你喜欢的颜色。但是，如果您正在谈论任何静态 html 页面，那么是的，您可以做任何事情。

您必须在 viewSourceMode 中打开该 htmp 页面，并且必须在其中找到要更改颜色并替换颜色的标签。然后您可以将其加载到 android WebView 以查看更改。

您还可以在加载 WebView 时动态更改颜色。但仅限于静态 html 页面。

希望你明白我的意思。

随时发表评论。

# android - 安卓视频视图

> ID：14574986
> 
> 赞同：1
> 
> 时间：2013-01-29T03:05:03.947
> 
> 标签：android, android-sdcard, android-videoview

我尝试使用 Android Videoview 在我的 SD 卡中播放视频。如果 sdcard 有多个视频，它会在我的 sdcard 中播放下一个视频。但是在我的模拟器或智能手机中，该应用程序都无法运行。

我已经添加了权限

```
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" /> 
```

和一个视频到我的 SD 卡。

以下是我的代码，

```
package com.example.videotest;
import android.media.MediaPlayer;
import android.media.MediaPlayer.OnCompletionListener;
import android.os.Bundle ;
import android.provider.MediaStore.Video;
import android.app.Activity;
import android.database.Cursor;
import android.view.Menu;
import android.widget.Toast;
import android.widget.VideoView;

 public class MainActivity extends Activity implements OnCompletionListener{
 Cursor mediaCursor=null;
 VideoView videoView=null;
 int dataIdx=0;
@Override
public void onCompletion(MediaPlayer arg0) {
    // TODO Auto-generated method stub
    playNextVideo();            
}       
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    VideoView videoView=(VideoView) findViewById(R.id.videoView1);
    videoView.setOnCompletionListener((OnCompletionListener) this);
    String projection[]=new String[] {Video.Media.DATA};
    mediaCursor=getContentResolver().query(Video.Media.EXTERNAL_CONTENT_URI, projection, null, null, null);
    if(mediaCursor!=null&&mediaCursor.getCount()>0){
           dataIdx=mediaCursor.getColumnIndex(Video.Media.DATA);
           playNextVideo();
    }
}
private void playNextVideo(){
        mediaCursor.moveToNext();
        if(mediaCursor.isAfterLast()){ 
            Toast.makeText(getApplicationContext(),"End of Line",Toast.LENGTH_SHORT).show();
        }
        else{
                String path=mediaCursor.getString(dataIdx);
                Toast.makeText(getApplicationContext(),"playing: "+path, Toast.LENGTH_SHORT).show();
                videoView.setVideoPath(path);
                videoView.start();
        }
}

@Override
public void onDestroy(){
     if (mediaCursor!=null){
         mediaCursor.close();
     }
}
@Override
public boolean onCreateOptionsMenu(Menu menu) {
    getMenuInflater().inflate(R.menu.activity_main, menu);
    return true;
}
}

 01-29 10:43:39.186: W/WindowManager(161): Failure taking screenshot for (246x410) to layer 21015
 01-29 10:43:39.256: I/Choreographer(429): Skipped 32 frames!  The application may be doing too much work on its main thread.
 01-29 10:43:39.535: I/Choreographer(429): Skipped 59 frames!  The application may be doing too much work on its main thread.
 01-29 10:44:03.995: D/AndroidRuntime(1345): >>>>>> AndroidRuntime START com.android.internal.os.RuntimeInit <<<<<<
 01-29 10:44:03.995: D/AndroidRuntime(1345): CheckJNI is ON
 01-29 10:44:04.035: D/dalvikvm(1345): Trying to load lib libjavacore.so 0x0
 01-29 10:44:04.045: D/dalvikvm(1345): Added shared lib libjavacore.so 0x0
 01-29 10:44:04.075: D/dalvikvm(1345): Trying to load lib libnativehelper.so 0x0
 01-29 10:44:04.075: D/dalvikvm(1345): Added shared lib libnativehelper.so 0x0
 01-29 10:44:04.895: D/AndroidRuntime(1345): Calling main entry com.android.commands.pm.Pm
 01-29 10:44:04.965: W/ActivityManager(161): No content provider found for permission revoke: file:///data/local/tmp/VideoTEST.apk
 01-29 10:44:04.985: W/ActivityManager(161): No content provider found for permission revoke: file:///data/local/tmp/VideoTEST.apk
 01-29 10:44:05.266: D/dalvikvm(161): GC_CONCURRENT freed 550K, 45% free 10453K/18887K, paused 19ms+27ms, total 148ms
 01-29 10:44:05.326: I/PackageManager(161): Removing non-system package:com.example.videotest
 01-29 10:44:05.326: I/ActivityManager(161): Force stopping package com.example.videotest uid=10044
 01-29 10:44:05.326: I/ActivityManager(161): Killing proc 1282:com.example.videotest/u0a44: force stop
 01-29 10:44:05.326: W/ActivityManager(161): Force removing ActivityRecord{416c3d88 com.example.videotest/.MainActivity}: app died, no saved state
 01-29 10:44:05.376: W/InputDispatcher(161): channel '416195c8 com.example.videotest/com.example.videotest.MainActivity (server)' ~ Consumer closed input channel or an error occurred.  events=0x9
 01-29 10:44:05.376: E/InputDispatcher(161): channel '416195c8 com.example.videotest/com.example.videotest.MainActivity (server)' ~ Channel is unrecoverably broken and will be disposed!
 01-29 10:44:05.386: I/WindowState(161): WIN DEATH: Window{416195c8 com.example.videotest/com.example.videotest.MainActivity paused=false}
 01-29 10:44:05.386: W/InputDispatcher(161): Attempted to unregister already unregistered input channel '416195c8 com.example.videotest/com.example.videotest.MainActivity (server)'
 01-29 10:44:05.386: W/WindowManager(161): Force-removing child win Window{4167b698 SurfaceView paused=false} from container Window{416195c8 com.example.videotest/com.example.videotest.MainActivity paused=false}
 01-29 10:44:05.426: W/WindowManager(161): Failed looking up window
 01-29 10:44:05.426: W/WindowManager(161): java.lang.IllegalArgumentException: Requested window android.os.BinderProxy@4161c220 does not exist
 01-29 10:44:05.426: W/WindowManager(161):  at com.android.server.wm.WindowManagerService.windowForClientLocked(WindowManagerService.java:7640)
   01-29 10:44:05.426: W/WindowManager(161):    at com.android.server.wm.WindowManagerService.windowForClientLocked(WindowManagerService.java:7631)
   01-29 10:44:05.426: W/WindowManager(161):    at com.android.server.wm.WindowState$DeathRecipient.binderDied(WindowState.java:854)
  01-29 10:44:05.426: W/WindowManager(161):     at android.os.BinderProxy.sendDeathNotice(Binder.java:449)
  01-29 10:44:05.426: W/WindowManager(161):     at dalvik.system.NativeStart.run(Native Method)
  01-29 10:44:05.426: I/WindowState(161): WIN DEATH: null
  01-29 10:44:05.426: I/WindowManager(161): WINDOW DIED Window{416195c8 co m.example.videotest/com.example.videotest.MainActivity paused=false}
  01-29 10:44:05.666: W/InputMethodManagerService(161): Got RemoteException sending setActive(false) notification to pid 1282 uid 10044
   01-29 10:44:06.095: I/PackageManager(161): Package com.example.videotest codePath changed from /data/app/com.example.videotest-1.apk to /data/app/com.example.videotest-2.apk; Retaining data and using new
     01-29 10:44:06.095: I/PackageManager(161): Running dexopt on: com.example.videotest
     01-29 10:44:06.965: D/dalvikvm(1356): DexOpt: load 131ms, verify+opt 486ms, 745428 bytes
    01-29 10:44:06.986: I/ActivityManager(161): Force stopping package com.example.videotest uid=10044
  01-29 10:44:06.995: W/PackageManager(161): Code path for pkg : com.example.videotest changing from /data/app/com.example.videotest-1.apk to /data/app/com.example.videotest-2.apk
  01-29 10:44:06.995: W/PackageManager(161): Resource path for pkg : com.example.videotest changing from /data/app/com.example.videotest-1.apk to /data/app/com.example.videotest-2.apk
  01-29 10:44:07.115: D/PackageManager(161): New package installed in /data/app/com.example.videotest-2.apk
  01-29 10:44:07.236: I/ActivityManager(161): Force stopping package com.example.videotest uid=10044
  01-29 10:44:07.246: D/dalvikvm(429): WAIT_FOR_CONCURRENT_GC blocked 0ms
  01-29 10:44:07.286: D/dalvikvm(616): WAIT_FOR_CONCURRENT_GC blocked 0ms
  01-29 10:44:07.436: D/dalvikvm(429): GC_EXPLICIT freed 10435K, 60% free 8931K/21831K, paused 11ms+23ms, total 186ms
  01-29 10:44:07.446: D/dalvikvm(540): WAIT_FOR_CONCURRENT_GC blocked 0ms
  01-29 10:44:07.466: D/dalvikvm(616): GC_EXPLICIT freed 4569K, 37% free 10401K/16455K, paused 7ms+33ms, total 179ms
  01-29 10:44:07.666: I/InputReader(161): Reconfiguring input devices.  changes=0x00000010
  01-29 10:44:07.676: D/PackageManager(161): generateServicesMap(android.accounts.AccountAuthenticator): 2 services unchanged
   01-29 10:44:07.686: D/dalvikvm(540): GC_EXPLICIT freed 86K, 7% free 8394K/8967K, paused 12ms+8ms, total 218ms
   01-29 10:44:07.745: I/AccountTypeManager(710): Loaded meta-data for 1 account types, 0 accounts in 63ms(wall) 6ms(cpu)
   01-29 10:44:07.745: D/PackageManager(161): generateServicesMap(android.content.SyncAdapter): 4 services unchanged
   01-29 10:44:07.755: D/BackupManagerService(161): Received broadcast Intent { act=android.intent.action.PACKAGE_REMOVED dat=package:com.example.videotest flg=0x8000010 (has extras) }
   01-29 10:44:07.865: D/dalvikvm(161): GC_CONCURRENT freed 564K, 45% free 10429K/18887K, paused 53ms+13ms, total 188ms
   01-29 10:44:07.865: D/dalvikvm(161): WAIT_FOR_CONCURRENT_GC blocked 109ms
   01-29 10:44:08.035: D/dalvikvm(161): GC_EXPLICIT freed 61K, 46% free 10369K/18887K, paused 13ms+29ms, total 166ms
   01-29 10:44:08.135: I/ActivityManager(161): Start proc com.android.keychain for broadcast com.android.keychain/.KeyChainBroadcastReceiver: pid=1357 uid=1000 gids={1015, 3002, 3001, 3003, 1028}
     01-29 10:44:08.226: D/PackageManager(161): generateServicesMap(android.accounts.AccountAuthenticator): 2 services unchanged
     01-29 10:44:08.256: D/PackageManager(161): generateServicesMap(android.content.SyncAdapter): 4 services unchanged
     01-29 10:44:08.285: I/InputReader(161): Reconfiguring input devices.  changes=0x00000010
   01-29 10:44:08.296: D/BackupManagerService(161): Received broadcast Intent { act=android.intent.action.PACKAGE_ADDED dat=package:com.example.videotest flg=0x8000010 (has extras) }
     01-29 10:44:08.296: V/BackupManagerService(161): removePackageParticipantsLocked: uid=10044 #1
      01-29 10:44:08.515: V/BackupManagerService(161): addPackageParticipantsLocked: #1
     01-29 10:44:08.556: W/InputMethodManagerService(161): Found no subtypes in a system IME: com.android.inputmethod.pinyin
      01-29 10:44:08.586: E/Trace(1357): error opening trace file: No such file or directory (2)
   01-29 10:44:08.686: I/AccountTypeManager(710): Loaded meta-data for 1 account types, 0 accounts in 9ms(wall) 5ms(cpu)
    01-29 10:44:08.796: D/dalvikvm(161): WAIT_FOR_CONCURRENT_GC blocked 0ms
      01-29 10:44:08.975: W/RecognitionManagerService(161): no available voice recognition services found
    01-29 10:44:09.146: D/dalvikvm(161): GC_EXPLICIT freed 367K, 45% free 10413K/18887K, paused 57ms+22ms, total 355ms
  01-29 10:44:09.186: D/AndroidRuntime(1345): Shutting down VM
  01-29 10:44:09.196: D/dalvikvm(1345): GC_CONCURRENT freed 101K, 78% free 458K/2048K, paused 1ms+2ms, total 12ms
       01-29 10:44:09.206: D/jdwp(1345): Got wake-up signal, bailing out of select
      01-29 10:44:09.206: D/dalvikvm(1345): Debugger has detached; object registry had 1 entries
     01-29 10:44:09.206: I/AndroidRuntime(1345): NOTE: attach of thread 'Binder_3' failed
      01-29 10:44:10.085: D/AndroidRuntime(1377): >>>>>> AndroidRuntime START com.android.internal.os.RuntimeInit <<<<<<
      01-29 10:44:10.085: D/AndroidRuntime(1377): CheckJNI is ON
     01-29 10:44:10.176: D/dalvikvm(1377): Trying to load lib libjavacore.so 0x0
     01-29 10:44:10.186: D/dalvikvm(1377): Added shared lib libjavacore.so 0x0
     01-29 10:44:10.246: D/dalvikvm(1377): Trying to load lib libnativehelper.so 0x0
     01-29 10:44:10.246: D/dalvikvm(1377): Added shared lib libnativehelper.so 0x0
    01-29 10:44:11.126: D/AndroidRuntime(1377): Calling main entry com.an droid.commands.am.Am
     01-29 10:44:11.156: I/ActivityManager(161): START {act=android.intent.action.MAIN cat=[android.intent.category.LAUNCHER] flg=0x10000000 cmp=com.example.videotest/.MainActivity u=0} from pid 1377
     01-29 10:44:11.186: W/WindowManager(161): Failure taking screenshot for (246x410) to    layer 21005
     01-29 10:44:11.226: D/AndroidRuntime(1377): Shutting down VM
     01-29 10:44:11.246: I/AndroidRuntime(1377): NOTE: attach of thread 'Binder_3' failed
     01-29 10:44:11.246: D/dalvikvm(1377): GC_CONCURRENT freed 102K, 77% free 489K/2048K, paused 11ms+1ms, total 23ms
    01-29 10:44:11.256: D/jdwp(1377): Got wake-up signal, bailing out of select
     01-29 10:44:11.256: D/dalvikvm(1377): Debugger has detached; object registry had 1 entries
      01-29 10:44:11.266: D/dalvikvm(1388): Not late-enabling CheckJNI (already on)
     01-29 10:44:11.286: I/ActivityManager(161): Start proc com.example.videotest for activity com.example.videotest/.MainActivity: pid=1388 uid=10044 gids={1015, 1028}
     01-29 10:44:11.705: E/Trace(1388): error opening trace file: No such file or directory (2)
     01-29 10:44:12.256: D/dalvikvm(161): WAIT_FOR_CONCURRENT_GC blocked 0ms
     01-29 10:44:12.406: D/dalvikvm(161): GC_EXPLICIT freed 110K, 45% free 10473K/18887K, paused 10ms+12ms, total 157ms
     01-29 10:44:12.606: I/Choreographer(1388): Skipped 38 frames!  The application may be doing too much work on its main thread.
     01-29 10:44:12.685: D/gralloc_goldfish(1388): Emulator without GPU emulation detected.
     01-29 10:44:12.755: I/ActivityManager(161): Displayed com.example.videotest/.MainActivity: +1s541ms
     01-29 10:44:13.146: I/Choreographer(1388): Skipped 92 frames!  The application may be doing too much work on its main thread.
     01-29 10:48:55.096: E/ThrottleService(161): problem during onPollAlarm: java.lang.IllegalStateException: problem parsing stats: java.io.FileNotFoundException: /proc/net/xt_qtaguid/iface_stat_all: open failed: ENOENT (No such file or directory)
      01-29 10:50:28.105: D/dalvikvm(457): GC_CONCURRENT freed 403K, 7% free 8578K/9159K, paused 17ms+4ms, total 57ms 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T03:36:30.323

在你的`onCreate()`方法中

这条线

```
 VideoView videoView=(VideoView) findViewById(R.id.videoView1); 
```

应该

```
 videoView=(VideoView) findViewById(R.id.videoView1); 
```

# mongodb - mongoimport 后集合_id 没有破折号？

> ID：14574987
> 
> 赞同：1
> 
> 时间：2013-01-29T03:05:16.167
> 
> 标签：mongodb, meteor, mongoimport

所以，我遇到了从 SQL 到 Mongo 数据迁移的问题。我们使用 SQL 数据库并将其扁平化为单个数据数组，具有基本的数组结构，如下所示：

```
[
  {
    'assettype' : 'image',
    'title' : 'Cat',
  },
  {
    'assettype' : 'image',
    'title' : 'Dog',
  },
  {
    'assettype' : 'image',
    'title' : 'Bird',
  }
] 
```

非常简单，非常直接。一旦我们以数组形式获得它，我们将它导入到我们的 mongo 实例中，如下所示。

```
mongoimport -d staging -c assets < library_assets.json --jsonArray 
```

再次，非常简单。非常直截了当。乍一看，似乎一切都按预期工作。但是，经过仔细检查，发现资产集合中所有记录的 MongoIds 都没有破折号！也就是说，所有的 mongo id 都采用以下格式：

```
51073797074f0d6db8e3149a 
```

而不是预期的格式：

```
c6689c53-a05c-4e94-b503-ac61558cc0c6 
```

除了依赖 MongoId 的查询之外，一切都可以找到。因此，例如，这将起作用：

```
db.assets.find(); 
```

但这不会：

```
db.assets.findOne({"_id": 51073797074f0d6db8e3149a }); 
```

我一直在翻阅文档和搜索，但没有找到任何东西。如果有人能指出我正确的方向并帮助导入此文件，使其具有正确的 MongoId 格式，我将不胜感激！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-29T03:14:21.447

我不确定您为什么期望`_id`字段中出现破折号 - 如果它们是由 Mongo 自动生成的（即您的导入中没有`_id`字段），它们看起来像`4f5fbb91a717b0f8d080e9d7`. 因此，您所看到的完全是成功导入的正常结果，没有用户定义的`_id`字段。

也就是说`_id`，当自动生成时，它是一个实例，`ObjectId`而不是一个`String`. 此查询将起作用：

`db.assets.findOne({"_id": new ObjectId("51073797074f0d6db8e3149a")})`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-29T16:05:34.840

所以，在深入研究这个问题之后，事实证明 lobster1234 是完全正确的。此外，这是 Meteor 框架的一个已知错误。

[https://github.com/meteor/meteor/issues/61](https://github.com/meteor/meteor/issues/61)

解决方法是返回原始数据集，其中包含旧系统的一些资产标识，如下所示：

```
[
  {
    'assetid' : '123456789a',
    'assettype' : 'image',
    'title' : 'Cat',
  },
  {
    'assetid' : '123456789b',
    'assettype' : 'image',
    'title' : 'Dog',
  },
  {
    'assetid' : '123456789c',
    'assettype' : 'image',
    'title' : 'Bird',
  }
] 
```

并做一个简单的“assetid”搜索和替换为“_id”，所以数据集如下：

```
[
  {
    '_id' : '123456789a',
    'assettype' : 'image',
    'title' : 'Cat',
  },
  {
    '_id' : '123456789b',
    'assettype' : 'image',
    'title' : 'Dog',
  },
  {
    '_id' : '123456789c',
    'assettype' : 'image',
    'title' : 'Bird',
  }
] 
```

运行 mongoimport 后，_id 字段由数据集中的字符串填充，而不是 MongoDB 生成唯一的 ObjectId。

# spring - 事务不适用于 Spring 3.1 – H2 – junit 4 – hibernate 3.2

> ID：14574988
> 
> 赞同：3
> 
> 时间：2013-01-29T03:05:16.540
> 
> 标签：spring, hibernate, transactions, junit4, h2

我有以下测试..

```
@RunWith(SpringJUnit4ClassRunner.class)
@ContextConfiguration(locations = {"/schedule-agents-config-context.xml"})
@TransactionConfiguration(transactionManager = "transactionManager", defaultRollback = true)
@Transactional
public class H2TransactionNotWorkingTest extends SubmitAgentIntegratedTestBase {
    private static final int FIVE_SUBMISSIONS = 5;

    @Autowired
    private ApplicationSubmissionInfoDao submissionDao;

    private FakeApplicationSubmissionInfoRepository fakeRepo;

    @Before
    public void setUp() {
        fakeRepo = fakeRepoThatNeverFails(submissionDao, null);
        submitApplication(FIVE_SUBMISSIONS, fakeRepo);
    }

    @Test
    @Rollback(true)
    public void shouldSaveSubmissionInfoWhenFailureInDatabase() {
        assertThat(fakeRepo.retrieveAll(), hasSize(FIVE_SUBMISSIONS));

    }

    @Test
    @Rollback(true)
    public void shouldSaveSubmissionInfoWhenFailureInXmlService() {
        assertThat(fakeRepo.retrieveAll().size(), equalTo(FIVE_SUBMISSIONS));
    }
} 
```

...以及以下配置...

```
 <jdbc:embedded-database id="dataSource" type="H2">
        <jdbc:script location="classpath:/db/h2-schema.sql" />
    </jdbc:embedded-database>

    <tx:annotation-driven transaction-manager="transactionManager"/>

    <bean id="transactionManager" class="org.springframework.jdbc.datasource.DataSourceTransactionManager">
        <property name="dataSource" ref="dataSource"/>
    </bean>

    <bean id="transactionalSessionFactory"
          class="org.springframework.orm.hibernate3.annotation.AnnotationSessionFactoryBean">
        <property name="dataSource" ref="dataSource"/>
        <property name="hibernateProperties">
            <props>
                <prop key="hibernate.dialect">org.hibernate.dialect.H2Dialect</prop>
                <prop key="hibernate.show_sql">false</prop>
                <prop key="hibernate.cache.use_second_level_cache">false</prop>
                <prop key="hibernate.cache.use_query_cache">false</prop>
            </props>
        </property>
        <property name="namingStrategy">
            <bean class="org.hibernate.cfg.ImprovedNamingStrategy"/>
        </property>
        <property name="configurationClass" value="org.hibernate.cfg.AnnotationConfiguration"/>
        <property name="packagesToScan" value="au.com.mycomp.life.snapp"/>
    </bean>

    <bean id="regionDependentProperties" class="org.springframework.core.io.ClassPathResource">
        <constructor-arg value="region-dependent-service-test.properties"/>
    </bean 
```

>

我还在 sql 脚本中将自动提交设置为 false

```
SET AUTOCOMMIT FALSE; 
```

代码中没有 REQUIRES_NEW 。为什么回滚在测试中不起作用？

干杯普拉宾

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-05-20T11:46:59.417

我遇到了同样的问题，但我终于解决了，尽管我不使用 Hibernate（应该不重要）。

使其工作的关键项目是扩展正确的 Spring 单元测试类，即`AbstractTransactionalJUnit4SpringContextTests`. 注意类名中的“事务”。因此，一个工作事务单元测试类的框架如下所示：

```
@ContextConfiguration(locations = {"classpath:/com/.../testContext.xml"})
public class Test extends AbstractTransactionalJUnit4SpringContextTests {

    @Test
    @Transactional
    public void test() {
    }
} 
```

关联的 XML 上下文文件包含以下项目：

```
<jdbc:embedded-database id="dataSource" type="H2" />

<tx:annotation-driven transaction-manager="transactionManager"/>
<bean id="transactionManager" class="org.springframework.jdbc.datasource.DataSourceTransactionManager">
    <property name="dataSource" ref="dataSource"></property>
</bean> 
```

使用此设置，每种测试方法的修改都会正确回滚。

问候， 奥拉

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-09-19T11:10:15.923

我遇到了类似的问题，我也在使用 TestNG + Spring 测试支持和 Hibernate。发生的情况是 Hibernate 在事务开始之前禁用连接上的自动提交，并且它会记住原始的自动提交设置：

org.hibernate.engine.transaction.internal.jdbc#JdbcTransaction：

```
@Override
protected void doBegin() {
    try {
        if ( managedConnection != null ) {
            throw new TransactionException( "Already have an associated managed connection" );
        }
        managedConnection = transactionCoordinator().getJdbcCoordinator().getLogicalConnection().getConnection();
        wasInitiallyAutoCommit = managedConnection.getAutoCommit();
        LOG.debugv( "initial autocommit status: {0}", wasInitiallyAutoCommit );
        if ( wasInitiallyAutoCommit ) {
            LOG.debug( "disabling autocommit" );
            managedConnection.setAutoCommit( false );
        }
    }
    catch( SQLException e ) {
        throw new TransactionException( "JDBC begin transaction failed: ", e );
    }

    isDriver = transactionCoordinator().takeOwnership();
} 
```

稍后，在回滚事务后，它将释放连接。这样做休眠也将恢复连接上的原始自动提交设置（以便可能分发相同连接的其他人从原始设置开始）。但是，在事务期间设置自动提交会触发显式提交，请参阅[JavaDoc](http://docs.oracle.com/javase/6/docs/api/java/sql/Connection.html#setAutoCommit%28boolean%29 "JavaDoc")

在下面的代码中，您可以看到这种情况。发出回滚，最后在 releaseManagedConnection 中释放连接。这里将重新设置自动提交，从而触发提交：

org.hibernate.engine.transaction.internal.jdbc#JdbcTransaction：

```
 @Override
protected void doRollback() throws TransactionException {
    try {
        managedConnection.rollback();
        LOG.debug( "rolled JDBC Connection" );
    }
    catch( SQLException e ) {
        throw new TransactionException( "unable to rollback against JDBC connection", e );
    }
    finally {
        releaseManagedConnection();
    }
}

private void releaseManagedConnection() {
    try {
        if ( wasInitiallyAutoCommit ) {
            LOG.debug( "re-enabling autocommit" );
            managedConnection.setAutoCommit( true );
        }
        managedConnection = null;
    }
    catch ( Exception e ) {
        LOG.debug( "Could not toggle autocommit", e );
    }
} 
```

这通常不应该是一个问题，因为 afaik 事务应该在回滚后结束。但更重要的是，如果我在回滚后发出提交，如果回滚和提交之间没有更改，则不应该提交任何更改，来自提交时的 javadoc：

> 使自上次提交/回滚以来所做的所有更改永久化，并释放此 Connection 对象当前持有的所有数据库锁。仅当禁用自动提交模式时才应使用此方法。

在这种情况下，回滚和提交之间没有变化，因为提交（通过重新设置自动提交间接触发）仅在几条语句之后发生。

一种解决方法似乎是禁用自动提交。这将避免恢复自动提交（因为它一开始没有启用），从而防止提交发生。您可以通过操作嵌入式数据源 bean 的 id 来做到这一点。id 不仅用于数据源的标识，还用于数据库名称：

```
<jdbc:embedded-database id="dataSource;AUTOCOMMIT=OFF" type="H2"/> 
```

这将创建一个名为“dataSource”的数据库。额外的参数将由 H2 解释。Spring 还将创建一个名为“dataSource;AUTOCOMMIT=OFF”的 bean。如果您依赖 bean 名称进行注入，您可以创建一个别名以使其更清晰：

```
<alias name="dataSource;AUTOCOMMIT=OFF" alias="dataSource"/> 
```

（没有一种更简洁的方法来操作嵌入式数据库命名空间配置，我希望 Spring 团队能够更好地配置它）

**注意：**通过脚本 (<jdbc:script location="...") 禁用自动提交可能不起作用，因为不能保证相同的连接将被重新用于您的测试。

**注意：**这不是真正的修复，而只是一种解决方法。发生回滚后仍然存在导致数据提交的错误。

**- - 编辑 - -**

经过搜索，我发现了真正的问题。如果您正在使用 HibernateTransactionManager（正如我所做的那样）并且您通过 SessionFactory（Hibernate）和直接通过 DataSource（普通 JDBC）使用您的数据库，您应该将 SessionFactory 和 DataSource 都传递给 HibernateTransactionManager。来自 Javadoc：

> 注意：为了能够为纯 JDBC 代码注册 DataSource 的 Connection，此实例 > 需要了解 DataSource (setDataSource(javax.sql.DataSource))。给定的 >DataSource 显然应该与给定的 SessionFactory 使用的相匹配。

所以最终我这样做了：

```
<bean id="transactionManager" class="org.springframework.orm.hibernate4.HibernateTransactionManager">
    <property name="sessionFactory" ref="sessionFactory" />
    <property name="dataSource" ref="dataSource" />
</bean> 
```

一切都对我有用。

**注意：**同样适用于 JpaTransactionManager！如果您既使用 EntityManager 又使用 DataSource 执行原始 JDBC 访问，您应该在 EMF 旁边单独提供 DataSource。也不要忘记使用 DataSourecUtils 获取连接（或内部使用 DataSourceUtils 获取连接的 JDBCTemplate）

**- - 编辑 - -**

好吧，虽然上面确实解决了我的问题，但这毕竟不是真正的原因:) 在正常情况下**，使用 Spring 的 LocalSessionFactoryBean 时，设置数据源将没有任何效果，因为它已经为你完成了**。

> 如果 SessionFactory 配置了 LocalDataSourceConnectionProvider，即 Spring 的 LocalSessionFactoryBean 配置了指定的“dataSource”，则将自动检测 DataSource：您仍然可以显式指定 DataSource，但在这种情况下不需要。

就我而言，问题在于我们创建了一个扩展 LocalSessionFactoryBean 的缓存工厂 bean。我们仅在测试期间使用它以避免多次启动 SessionFactory。如前所述，如果资源键不同，Spring 测试支持会启动多个应用程序上下文。这种缓存机制完全减轻了开销并确保仅加载 1 个 SF。

这意味着为不同的启动应用程序上下文返回相同的 SessionFactory。此外，传递给 SF 的数据源将是来自启动 SF 的第一个上下文的数据源。这一切都很好，但是 DataSource 本身对于每个新的应用程序上下文都是一个新的“对象”。这会产生差异：

事务由 HibernateTransactionManager 启动。用于事务同步的数据源是从 SessionFactory 中获得的（同样：缓存的 SessionFactory 和 DataSource 实例来自最初加载 SessionFactory 的应用程序上下文）。在您的测试（或生产代码）中直接使用 DataSource 时，您将使用属于此时处于活动状态的应用程序上下文的实例。此实例与用于事务同步的实例不匹配（从 SF 中提取）。这会导致问题，因为获得的连接将无法正确参与事务。

通过在事务管理器上显式设置数据源，这似乎得到了解决，因为后初始化不会从 SF 获取数据源，而是使用注入的数据源。对我来说合适的方法是调整缓存机制，每次从缓存返回 SF 时，将缓存 SF 中的数据源替换为当前 appcontext 中的数据源。

**结论：**您可以忽略我的帖子:) 只要您将 HibernateTransactionManager 或 JtaTransactionManager 与某种用于 SF 或 EM 的 Spring 支持工厂 bean 结合使用，即使将 vanilla JDBC 与 Hibernate 混合使用，您也应该没问题。在后一种情况下，不要忘记通过 DataSourceUtils 获取连接（或使用 JDBCTemplate）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-06-25T14:05:53.213

Try this:

remove the org.springframework.jdbc.datasource.DataSourceTransactionManager

```
<bean id="transactionManager" class="org.springframework.jdbc.datasource.DataSourceTransactionManager">
    <property name="dataSource" ref="dataSource"/>
</bean> 
```

and replace it with the org.springframework.orm.jpa.JpaTransactionManager

```
<bean id="transactionManager" class="org.springframework.orm.jpa.JpaTransactionManager">
    <property name="dataSource" ref="dataSource"/>
</bean> 
```

or you inject an EntityManagerFactory instead ...

```
<bean id="transactionManager" class="org.springframework.orm.jpa.JpaTransactionManager">
    <property name="entityManagerFactory" ref="entityManagerFactory" />
</bean> 
```

you need an EntityManagerFactory then, like the following

```
<bean id="entityManagerFactory"
    class="org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean">
    <property name="dataSource" ref="dataSource" />
    <property name="jpaVendorAdapter">
        <bean id="jpaAdapter"
            class="org.springframework.orm.jpa.vendor.HibernateJpaVendorAdapter">
            <property name="showSql" value="true" />
            <property name="generateDdl" value="true" />
        </bean>
    </property>
</bean> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-29T03:58:53.347

你还没有展示出拼图的所有部分。在这一点上，我的猜测是您的 ApplicationSubmissionInfoDao 是事务性的并且是自行提交的，尽管我认为如果一切配置正确，这将与测试事务冲突。要获得更多答案，请提出更完整的问题。最好的办法是发布[SSCCE](http://sscce.org/)。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-30T01:42:37.110

谢谢瑞恩

测试代码是这样的。

```
@Test
@Rollback(true)
public void shouldHave5ApplicationSubmissionInfo() {
    for (int i = 0; i < 5; i++) {
        hibernateTemplate.saveOrUpdate(new ApplicationSubmissionInfoBuilder()
                .with(NOT_PROCESSED)
                .build());
    }
    assertThat(repo.retrieveAll(), hasSize(5));
}

@Test
@Rollback(true)
public void shouldHave5ApplicationSubmissionInfoAgainButHas10() {
    for (int i = 0; i < 5; i++) {
        hibernateTemplate.saveOrUpdate(new ApplicationSubmissionInfoBuilder()
                .with(NOT_PROCESSED)
                .build());
    }
    assertThat(repo.retrieveAll(), hasSize(5));
} 
```

我发现使用 jdbc:embedded-database 定义的嵌入式数据库没有事务支持。当我使用 commons DBCP 定义数据源并将默认自动提交设置为 false 时，它​​起作用了。

```
<bean id="dataSource" class="org.apache.commons.dbcp.BasicDataSource" scope="singleton">
    <property name="driverClassName" value="org.h2.Driver" />
    <property name="url" value="jdbc:h2:~/snappDb"/>
    <property name="username" value="sa"/>
    <property name="password" value=""/>
    <property name="defaultAutoCommit" value="false" />
    <property name="connectionInitSqls" value=""/>
</bean> 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-06-01T14:18:19.860

以上都不适合我！

但是，我使用的堆栈是 [ **spring-test 4.2.6.RELEASE**，**spring-core 4.2.6.RELEASE**，**spring-data 1.10.1.RELEASE** ]

问题是，使用带有 [SpringJUnit4ClassRunner.class] 注释的任何单元测试类将通过 spring 库设计检查导致自动回滚功能`***org.springframework.test.context.transaction.TransactionalTestExecutionListener*** >> ***isDefaultRollback***`

为了克服这种行为，只需用注释单元测试类 **`@Rollback(value = false)`**

# sql - 查找内部有重复字母的字符串

> ID：14574990
> 
> 赞同：2
> 
> 时间：2013-01-29T03:05:35.830
> 
> 标签：sql, sql-server, tsql, duplicates, letters

有人可以帮我完成这个小任务吗？我需要的是一个存储过程，它可以在表“a”的字符串中找到重复的字母（连续），然后创建一个新表“b”，其中只有具有重复字母的字符串的 id。

像这样的东西：

**表 A**

```
ID Name   
1  Matt
2  Daave
3  Toom
4  Mike
5  Eddie 
```

从该表中我可以看到 , `Daave`,`Toom`连续`Eddie`有重复的字母，我想创建一个新表并仅列出他们的 ID。就像是：

**表 B**

```
ID     
2
3
5 
```

只有 2,3,5，因为这是名称中包含重复字母的字符串的 ID。

我希望这是可以理解的，并且非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-29T15:00:34.667

在您对存储过程的回答中，您有两个错误，一个是列名和 LIKE 子句之间缺少空格，第二个是搜索参数周围缺少单引号。

我首先创建用户定义的标量函数，如果字符串包含重复的字母，则返回 1：

**已编辑**

```
CREATE FUNCTION FindDuplicateLetters
(
    @String NVARCHAR(50)
)
RETURNS BIT
AS
BEGIN

    DECLARE @Result BIT = 0 
    DECLARE @Counter INT = 1

    WHILE (@Counter <= LEN(@String) - 1) 
    BEGIN

    IF(ASCII((SELECT SUBSTRING(@String, @Counter, 1))) = ASCII((SELECT SUBSTRING(@String, @Counter + 1, 1))))
        BEGIN
             SET @Result = 1
             BREAK
        END

        SET @Counter = @Counter + 1 
    END

    RETURN @Result

END
GO 
```

创建函数后，只需从简单`SELECT`查询中调用它，如下所示：

```
SELECT 
    * 
FROM
    (SELECT 
        *, 
        dbo.FindDuplicateLetters(ColumnName) AS Duplicates
    FROM TableName) AS a
WHERE a.Duplicates = 1 
```

使用这种组合，您将只得到具有重复字母的行。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-29T03:15:22.063

在任何版本的 SQL 中，您都可以使用蛮力方法执行此操作：

```
select *
from t
where t.name like '%aa%' or
      t.name like '%bb%' or
      . . .
      t.name like '%zz%' 
```

如果您有区分大小写的排序规则，请使用：

```
where lower(t.name) like '%aa%' or
      . . . 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-08-02T21:40:51.010

尽管这是一篇旧文章，但值得发布一个比蛮力方法或使用标量 udf（通常会降低性能）更快的解决方案。使用[NGrams8K](http://www.sqlservercentral.com/articles/Tally+Table/142316/)这相当简单。

```
--sample data
declare @table table (id int identity primary key, [name] varchar(20));
insert @table([name]) values ('Mattaa'),('Daave'),('Toom'),('Mike'),('Eddie');

-- solution #1
select id
from @table
cross apply dbo.NGrams8k([name],1)
where charindex(replicate(token,2), [name]) > 0
group by id;

-- solution #2 (SQL 2012+ solution using LAG)
select id
from
(
  select id, token, prevToken = lag(token,1) over (partition by id order by position)
  from @table
  cross apply dbo.NGrams8k([name],1)
) prep
where token = prevToken
group by id; -- optional id you want to remove possible duplicates. 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-03-02T20:12:38.200

这是一种方法。

首先创建一个数字表

```
CREATE TABLE dbo.Numbers
  (
     number INT PRIMARY KEY
  );

INSERT INTO dbo.Numbers
SELECT number
FROM   master..spt_values
WHERE  type = 'P'
       AND number > 0; 
```

然后就可以使用

```
SELECT *
FROM   TableA
WHERE  EXISTS (SELECT *
               FROM   dbo.Numbers
               WHERE  number < LEN(Name)
                      AND SUBSTRING(Name, number, 1) = SUBSTRING(Name, number + 1, 1)) 
```

# mod-rewrite - 在 nginx 中以文本形式返回源

> ID：14574991
> 
> 赞同：0
> 
> 时间：2013-01-29T03:05:38.333
> 
> 标签：mod-rewrite, nginx, mime-types

我希望能够返回`filename.jade`并`filename.styl`作为文本 mime 类型。

`nginx`需要提供`/source`目录中的任何内容，就好像它是文本一样

现在使用符号链接

```
/source/subdir/page1.jade.txt => ../subddir/page1.jade 
```

并且在`nginx`

```
location ~ ^/source/ {
  expires 1d;
  try_files $uri.txt 404;
} 
```

这可行，但不是很优雅，并且需要重新创建符号链接

这纯粹是如何完成的`nginx`？是否有必要使用从路径中删除目录`rewrite`？`/source`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T09:30:37.733

最好使用`location`带有指令的特定`types`指令作为示例：

```
location ~ /*.jade {
   types          { }
   default_type   text/plain;
   try_files $uri =404;
}

location ~ /*.styl {
   types          { }
   default_type    text/plain;
   try_files $uri =404;
} 
```

在这里，对于`location`您设置为不使用任何 MIME 类型并用作默认`text/plain`MIME 类型的两个块，它应该适合您。

# jsp - 使用 Beans 处理 JSP 中的异常

> ID：14574993
> 
> 赞同：1
> 
> 时间：2013-01-29T03:05:52.803
> 
> 标签：jsp, exception, servlets, javabeans

我正在寻找一种在我的 JSP 页面中处理异常的好方法。所以我有一个 JSP 页面，我可以在其中访问我的 bean getter，例如：

```
<c:when test="${exampleBean.metric.outOfDate}">
    <div class="OutOfDate">Out of Date</div>
</c:when>
 ... and so on 
```

因此，当我访问 exampleBean.metric 时，它相信它会转到我的 metricBean 中的 getMetric 方法。然而，这个指标可能不存在，所以我从那里抛出一个错误

```
public Metric getMetric() throws Exception1, Exception2{
 // the names of the Exceptions are just dummies here
 try {
       // to do some invalid stufff
    } catch (Exception1 ex) {
        throw ex;
    } catch (Exception2 ex) {
        throw ex;
    }
} 
```

所以，我为一个页面多次调用这个 bean getter 方法，有时它会失败一些，我想知道在我的 JSP 中抛出了什么错误以将其显示给用户。

我知道在我的 web.xml 文件中有一个自定义错误页面的方法，在该文件中我将所有抛出都转到一个错误页面，但我不希望这样，因为页面的一小部分可能会导致错误，我希望页面的其余部分仍然显示

我处理这种方式不正确吗？即错误检查应该以某种方式在我的servlet 或其他地方完成？如果是这样，我将如何在那里检查我的 bean 方法？任何链接将不胜感激

使用 JSTL 方法也没有帮助我，即我尝试用这样的 catch 封装这个东西：

```
<c:catch var="exception">
   <c:when test="${exampleBean.metric.outOfDate}">
      <div class="OutOfDate">Out of Date!</div>
   </c:when>
</c:catch>
<c:if test="${exception!=null}">
     <%-- give a user message saying something was wrong, but this didn't give an exception even when it was called from my bean--%>
</c:if> 
```

# php - 如何为相册创建分页？

> ID：14574995
> 
> 赞同：1
> 
> 时间：2013-01-29T03:06:08.840
> 
> 标签：php, pagination, photo-gallery

我已经使用 web 服务检索了照片列表并将它们的地址添加到数组中。我需要显示照片库和分页。由于大多数示例都与数据库有关，因此我找不到任何用于此目的的分页示例或教程

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T03:23:21.927

看看[array_chunk](http://php.net/array_chunk)。它将从数组中为您创建“页面”。然后[计算](http://php.net/count)页数并通过从 1 循环到页数来创建分页。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-29T04:34:06.593

看起来像工作？

```
$a = array(
    '/gallery?id=1',
    '/gallery?id=2',
    '/gallery?id=3',
);
$c = count($a);
@ $page = intval($_GET['page']);
if (!$page || $page <= 0) $page = 1;
if ($page > $c)           $page = $c;
// print_r($page);
foreach ($a as $i => $gallery) {
    printf("<a href='%s&page=%d'>Page %d</a>\n", $gallery, $i+1, $i+1);
}
// current
print 'Current: '. $a[$page - 1]; 
```

# c++ - 使用 ifstream 进行简单的 .txt 文件读取

> ID：14574998
> 
> 赞同：0
> 
> 时间：2013-01-29T03:06:18.390
> 
> 标签：c++, file, ifstream

对于我一整天都无法弄清楚的事情，这可能是一个基本问题。下面是一段 C++ 代码：

```
Escape::Escape(std::string filename)
{
   std::ifstream file;
   file.open(filename.c_str());
   if (file.is_open()) {
      file >> gridWidth >> gridHeight >> nKeys;
      std::cout << "gridWidth = " << gridWidth << std::endl;
      std::cout << "gridHeight = " << gridHeight << std::endl;
      std::cout << "nKeys = " << nKeys << std::endl;
      /* irrelevant code below */ 
```

基本上，我希望这段代码读取文本文件的前三个整数并将它们保存到变量 gridWidth、gridHeight 和 nKeys 中。这些是名为“Escape”的类的私有整数。以下是文本文件的前几行：

```
8
8
1
BUL--/EUR--/BUL--/BU---/BU---/BU---/BU---/BUR--/
(more text below) 
```

这是此代码的一些示例输出：

```
gridWidth = 107764358
gridHeight = -991553646
nKeys = 0 
```

多次运行此代码，`gridWidth`并且`gridHeight`始终是垃圾并且 nKeys 始终为 0。关于我做错了什么有什么想法吗？

**编辑：问题出在我传递给`file.open()`. 我传入了相对文件名，虽然可以打开，但不能链接到 ifstream。该问题已通过使用文本文件的绝对文件名解决。**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T03:21:25.853

而不是`file >> gridWidth >> gridHeight >> nKeys;`这样做：

`while(file >> gridWidth && file >> gridHeight && file >> nKeys)`

这比将结果存储在字符串中然后必须进行转换要好。