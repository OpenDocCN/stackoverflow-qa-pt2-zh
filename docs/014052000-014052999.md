# StackOverflow 问答 14052000-14052999

# asp.net-mvc-4 - 简单成员表中的密码

> ID：14052004
> 
> 赞同：0
> 
> 时间：2012-12-27T09:03:31.440
> 
> 标签：asp.net-mvc-4

我正在使用 SimpleMembership 提供程序。我在 UserProfile 表上自定义了一些字段。我在那边有一些疑问。

1.  是否可以在 UserProfile 表本身中添加密码字段，而不是单独存储在 pages_Membership 中。
2.  同样在另一个项目中，在不使用任何成员资格的情况下实现了用户和角色表。他们现在可以映射到简单的成员资格吗？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-27T09:08:13.380

不，这是不可能的，如果您要使用 ASP.NET 功能，您需要按照它们呈现给您的方式使用它们。

您可以做的是使用**您自己的 Membership Provider**，然后您可以在您的用户表中拥有任何您想要的东西。

只需[跟进**我**对此](https://stackoverflow.com/a/5702000/28004)的回答，创建自己的会员提供商非常简单，它使您能够准确地使用您需要的东西以及如何需要它。

# uitextfield - 如何在 UITextField 对象上禁用日语模式输入？

> ID：14052006
> 
> 赞同：0
> 
> 时间：2012-12-27T09:03:42.570
> 
> 标签：uitextfield, uitextfielddelegate

我有一个简单的问题。在日语 iApp 中，我有一个不需要日语输入的 UITextField 对象。是否可以仅针对这一对象禁用日语模式输入。（这将使用户更容易输入）

我已经尝试过：

```
myTextField.autocorrectionType=UITextAutocorrectionTypeNo; 
```

它不起作用。

感谢您的任何提示。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-28T11:36:11.693

UITextField 具有keyboardType 属性。当 keyboardType 设置为**UIKeyboardTypeDefault**时，日文键盘可以显示为默认键盘。

```
typedef enum {
   UIKeyboardTypeDefault,
   UIKeyboardTypeASCIICapable,
   UIKeyboardTypeNumbersAndPunctuation,
   UIKeyboardTypeURL,
   UIKeyboardTypeNumberPad,
   UIKeyboardTypePhonePad,
   UIKeyboardTypeNamePhonePad,
   UIKeyboardTypeEmailAddress,
   UIKeyboardTypeDecimalPad,
   UIKeyboardTypeTwitter,
   UIKeyboardTypeAlphabet = UIKeyboardTypeASCIICapable
} UIKeyboardType; 
```

要以编程方式设置 keyboadType，您可以使用**setKeyboardType** 如下：

```
[myTextField setKeyboardType:UIKeyboardTypeASCIICapable]; 
```

文件在这里：

[http://developer.apple.com/library/ios/#documentation/UIKit/Reference/UITextInputTraits_Protocol/Reference/UITextInputTraits.html](http://developer.apple.com/library/ios/#documentation/UIKit/Reference/UITextInputTraits_Protocol/Reference/UITextInputTraits.html)

# jquery - datatables.net 在行点击时获取行数据

> ID：14052008
> 
> 赞同：2
> 
> 时间：2012-12-27T09:03:47.470
> 
> 标签：jquery, datatable

我已经从 datatable.net 插件创建了数据表。数据表以正确的方式生成，但我想进一步获取点击行的数据，我应该如何获取？预先感谢您的帮助。

这是我提到的创建数据表的链接。[http://datatables.net](http://datatables.net)

这是我的数据表代码

```
$('#example').dataTable( {
        "sDom": "<'row-fluid'<'span6'T><'span6'f>r>t<'row-fluid'<'span6'i><'span6'p>>",
        "sPaginationType": "bootstrap",
        "oLanguage": {
            "sLengthMenu": "_MENU_ records per page"
        },
        "bProcessing": true,
                    "sAjaxSource": "server/product_status_get_data.php", //setting the server source here
                    "aoColumns": [
            { "mData": "prd_name" },
            { "mData": "total_doc" },
            { "mData": "promoted" },
             { "mData": "prescribed" }
        ],
        "oTableTools": {
            "aButtons": [
                "pdf"
            ]
        }           
    } ); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-27T09:31:51.360

请参阅示例：http: [//jsfiddle.net/WapYa/1/](http://jsfiddle.net/WapYa/1/)

```
$(document).ready(function() {
 $('#example td').live('click', function() {
    var anOpen = [];
    var nTr = this.parentNode;
    var i = $.inArray(nTr, anOpen);
    console.log(this); // clicked cell
    console.log(nTr); // clicked row
    $(this).parent().find("td").each(function() {
        console.log($(this).html()); // logs each cell value
    });
 });
});​ 
```

# javascript - Visual Studio 2012 中的 Javascript 关键字颜色

> ID：14052010
> 
> 赞同：4
> 
> 时间：2012-12-27T09:03:58.477
> 
> 标签：javascript, .net, visual-studio, visual-studio-2012

可以在 Visual Studio 2012 中更改关键字 JavaScript 的颜色吗？
在我的 aspx 页面中，我有一些 JS 代码，我希望看到更舒适的代码。

在 VS2010 中它是可能的（工具 -> 选项 -> 环境 -> 字体和颜色 -> 脚本关键字），但在 VS 2012 中，这个位置从下拉列表中消失：/

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-27T09:10:42.000

它仍然在同一个地方：工具 -> 选项 -> 环境 -> 字体和颜色

![在此处输入图像描述](../Images/ef6506c1cfa097c230cc77180ef9d0ef.png)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-10-24T09:21:14.563

搜索“标识符”、“关键字”和“字符串”以调整 JS 的颜色

# android - 圆圈内的数字

> ID：14052013
> 
> 赞同：0
> 
> 时间：2012-12-27T09:04:02.790
> 
> 标签：android

用drawCircle在画布上绘制的圆圈内绘制数字的最佳方法是什么？

然后这个圈子可以被用户拖动，当圈子为空时我没有问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T10:03:05.680

This will draw text centered at centerX, centerY

```
Rect rect = new Rect();

paint.getTextBounds(text, 0, text.length(), rect);
float x = centerX - rect.width() / 2;
FontMetrics fm = paint.getFontMetrics();
float y= centerY - (fm.descent + fm.ascent) / 2;
canvas.drawText(text, x, y, paint); 
```

# java - JSMPP Submitsm，无法提交短消息| USSD

> ID：14052029
> 
> 赞同：1
> 
> 时间：2012-12-27T09:04:56.340
> 
> 标签：java, smpp, ussd, jsmpp

每当我尝试在方法之外提交短消息`onAcceptDeliverSm(DeliverSm deliverSm)`时，我都会遇到异常。这是我正在工作的代码：

```
 public void onAcceptDeliverSm(DeliverSm deliverSm)
        throws ProcessRequestException {
    try {
            String messageId = session.submitShortMessage("USSD", TypeOfNumber.NETWORK_SPECIFIC, NumberingPlanIndicator.PRIVATE, "420", TypeOfNumber.INTERNATIONAL, NumberingPlanIndicator.ISDN, msisdn, new ESMClass(),
                    (byte) 0, (byte) 1, timeFormatter.format(new Date()), null, new RegisteredDelivery(SMSCDeliveryReceipt.DEFAULT), (byte) 0, new GeneralDataCoding((byte) 15), (byte) 0, "Welcome.".getBytes(), new OptionalParameter.Byte(OptionalParameter.Tag.USSD_SERVICE_OP, (byte) 2));
        } catch (PDUException ex) {
            Logger.getLogger(MessageReceiverListenerImpl.class.getName()).log(Level.SEVERE, null, ex);
        } catch (ResponseTimeoutException ex) {
            Logger.getLogger(MessageReceiverListenerImpl.class.getName()).log(Level.SEVERE, null, ex);
        } catch (InvalidResponseException ex) {
            Logger.getLogger(MessageReceiverListenerImpl.class.getName()).log(Level.SEVERE, null, ex);
        } catch (NegativeResponseException ex) {
            Logger.getLogger(MessageReceiverListenerImpl.class.getName()).log(Level.SEVERE, null, ex);
        } catch(IOException e) {

        }
} 
```

上面的代码工作正常。但是当我尝试将参数传递给另一个类时，submitsm 不起作用。:(

```
public void onAcceptDeliverSm(DeliverSm deliverSm)
        throws ProcessRequestException {
 Processor processor = new Processor(session, msisdn);
} 
```

**处理器类：**

```
Class Processor {

  public Processor(SMPPSession session, String msisdn)  {
    this.msisdn = msisdn;
    this.sessionid = sessionid;
    this.input = input;
    this.circle_id = circle_id;
    this.session = session;

 String messageId = session.submitShortMessage("USSD", TypeOfNumber.NETWORK_SPECIFIC, NumberingPlanIndicator.PRIVATE, "420", TypeOfNumber.INTERNATIONAL, NumberingPlanIndicator.ISDN, msisdn, new ESMClass(),
                (byte) 0, (byte) 1, timeFormatter.format(new Date()), null, new RegisteredDelivery(SMSCDeliveryReceipt.DEFAULT), (byte) 0, new GeneralDataCoding((byte) 15), (byte) 0, input.getBytes(), new OptionalParameter.Byte(OptionalParameter.Tag.USSD_SERVICE_OP, (byte) 2));

}
} 
```

请告诉我问题出在哪里？谢谢大家

# android - 适用于美国和英国以外的 Android 开发者的 Google Merchant Key

> ID：14052035
> 
> 赞同：0
> 
> 时间：2012-12-27T09:05:03.383
> 
> 标签：android, google-checkout

根据我们[如何在服务器端验证 Android 应用内计费收据？](https://stackoverflow.com/questions/8384246/how-do-we-verify-android-in-app-billing-receipt-on-the-server-side)，Android 开发者可以使用 Google Checkout API ( [https://developers.google.com/checkout/](https://developers.google.com/checkout/) ) 在服务器端验证 Android 应用内。为了充分利用这个 API 的所有功能（在[http://code.google.com/p/google-checkout-php-sample-code/wiki/Documentation](http://code.google.com/p/google-checkout-php-sample-code/wiki/Documentation)中有一个很好的 PHP 库），我们需要商家密钥，但看起来商家密钥仅与网站的 Google Checkout API 相关（不适用于 Android），美国或英国以外的人无法获得此商家密钥。

真的吗？Android 开发者无法获取商家密钥（Google Play 开发者控制台表示现在为每个应用单独管理许可证密钥，但我不知道如何设置商家密钥）？如果没有，我们如何在服务器端验证 Android 应用内？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T09:16:50.787

您可以通过使用从开发者控制台获得的公钥验证签名来进行验证。如果您无权访问商家密钥，则无法使用 Google 结帐 API，并且除了在美国或英国注册一家公司之外，您也无能为力。

# android - Android：确定 2.2 及更高版本上的摄像头数量

> ID：14052037
> 
> 赞同：2
> 
> 时间：2012-12-27T09:05:18.437
> 
> 标签：android, camera

我的应用需要在 Android 2.2 及更高版本上运行。我需要一种方法来确定可用的摄像机数量。有很多帖子解决了这个问题，但我找不到一个有效的。

一种解决方案是简单地检测操作系统版本，任何带有 2.2 的东西都只能限制为 1 个摄像头（即使设备确实有 2 个），但我仍然无法确定任何大于 2.2 的版本的摄像头数量。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-27T09:15:00.850

早期的操作系统版本不支持多个摄像头，因此您可以假设您有 1 个。即使设备有 2 个，标准 Android API 也不支持它们。对于较新的操作系统版本，只需将`Camera.getNumberOfCameras()`and`Camera.getCameraInfo()`与 API 级别保护语句一起使用：

```
 int numCameras = 1;
 if (Build.Version.SDK_INT >= Build.VERSION_CODES.GINGERBREAD) {
   numCameras = Camera.getNumberOfCameras();
 } 
```

# mysql - MySQL Select... for update with index 有并发问题

> ID：14052038
> 
> 赞同：3
> 
> 时间：2012-12-27T09:05:22.800
> 
> 标签：mysql, sql-update, database-deadlocks

这是我上一个问题的后续（你可以跳过它，因为我在这篇文章中解释了这个问题）：
[MySQL InnoDB SELECT...LIMIT 1 FOR UPDATE Vs UPDATE ... LIMIT 1](https://stackoverflow.com/questions/14039853/mysql-innodb-select-limit-1-for-update-vs-update-limit-1)

环境：

*   Glassfish 上的 JSF 2.1
*   JPA 2.0 EclipseLink 和 JTA
*   MySQL 5.5 InnoDB 引擎

我有一张桌子：

```
CREATE TABLE v_ext (
  v_id INT NOT NULL AUTO_INCREMENT,
  product_id INT NOT NULL,
  code VARCHAR(20),
  username VARCHAR(30),
  PRIMARY KEY (v_id)
) ENGINE=InnoDB DEFAULT CHARSET=UTF8; 
```

它填充了 20,000 条这样的记录（`product_id`所有记录为 54 条，`code`随机生成且唯一，用户名设置为 NULL）：

```
v_id     product_id    code                  username
-----------------------------------------------------
1        54            '20 alphanumerical'   NULL
...
20,000   54            '20 alphanumerical'   NULL 
```

当用户购买产品 54 时，他从该表中获得一个代码。如果用户多次购买，他每次都会得到一个代码（对用户名没有唯一限制）。因为我正在为一项高强度活动做准备，所以我想确保：

*   不会发生并发/死锁
*   性能不受需要的锁定机制的影响

从 SO question（见上面的链接）我发现做这样的查询更快：

```
START TRANSACTION;
SELECT v_id FROM v_ext WHERE username IS NULL LIMIT 1 FOR UPDATE;
// Use result for next query
UPDATE v_ext SET username=xxx WHERE v_id=...;
COMMIT; 
```

`username`但是，只有在对列使用索引时，我才发现死锁问题。我认为添加索引将有助于加快一点速度，但它会在大约 19,970 条记录后造成死锁（实际上在这个行数上相当一致）。是否有一个原因？我不明白。谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-27T10:15:23.113

从纯理论的角度来看，您似乎没有锁定正确的行（第一个语句中的条件与 update 语句中的条件不同；此外，由于 ，您只锁定了一行`LIMIT 1`，而稍后您可能会更新更多行）。

试试这个：

```
START TRANSACTION;
SELECT v_id FROM v_ext WHERE username IS NULL AND v_id=yyy FOR UPDATE;
UPDATE v_ext SET username=xxx WHERE v_id=yyy;
COMMIT; 
```

[编辑]

至于死锁的原因，这是可能的答案（[来自手册](http://dev.mysql.com/doc/refman/5.5/en/innodb-locks-set.html)）：

> 如果您没有适合您的语句的索引，并且 MySQL 必须扫描整个表以处理该语句，则表的每一行都会被锁定 (...)

如果没有索引，该`SELECT ... FOR UPDATE`语句可能会锁定整个表，而使用索引，它只会锁定一些行。因为您没有在第一条语句中锁定正确的行，所以在第二条语句期间获得了额外的锁。

显然，如果整个表都被锁定（即没有索引），就不会发生死锁。在第二种设置中肯定会发生死锁。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-27T14:56:35.830

首先，表的定义是错误的。表中没有 tid 列，所以我怀疑主键是 v_id。
其次，如果您选择更新，则锁定该行。在第一个事务完成之前出现的任何其他选择都将等待该行被清除，因为它将达到完全相同的记录。因此，您将等待这一行。
但是，我非常怀疑这在您的情况下可能是一个真正严重的问题，因为首先，您在那里有用户名，其次您在那里有产品 ID。您极不可能在您最初点击的完全相同的记录上获得大量点击，即使您这样做了，事务也应该运行得非常快。
您必须了解，通过使用事务，您通常会放弃并发性以获得一致的数据。没有办法同时支持数据的一致性和并发性。

# java - IndexOutOfBoundsException____

> ID：14052044
> 
> 赞同：-4
> 
> 时间：2012-12-27T09:05:55.497
> 
> 标签：java, mapreduce, indexoutofboundsexception

我做了一个 MapReduce 程序，它在 reduce 端连接两个表。我在小文件上尝试过它并且它有效。但是，当我尝试在大文件（80GB 和 60GB）上执行我的程序时，它会在以下行出现 IndexOutOfBoundsException 失败： if (!(fields[8]).equals("")){ 和 parse(record.toString());

```
private String BAN;
    public void parse(String record) {
        String[] fields = record.split("\\|");
            if (fields.length > 100) {
               if (!(fields[0]).equals("")){            
                BAN = fields[0];
               }
            }
            else if(fields.length<40 && fields.length>0){
                if (!(fields[8]).equals("")){
                    System.err.println("element = "+fields[8]);
            }
      } 

    }
    public void parse(Text record) {
        parse(record.toString());
    }

    public String getStationId(){
        return "BAN = "+BAN;

    } 
```

我知道这个异常意味着数组中没有第 9 个元素，但我不明白为什么......而且调试这样的程序非常困难

请帮帮我！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T09:08:36.493

在以下代码片段中

```
 else if(fields.length<40 && fields.length>0){
            if (!(fields[8]).equals("")){
                System.err.println("element = "+fields[8]);
        } 
```

如果字段的长度是 3 仍然条件为真，那么现在，您正在尝试获取第 8 个位置的元素。不是原因。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T09:09:21.163

为了安全起见，试试这个。

```
if (fields.length >8 && !(fields[8]).equals("")){ 
```

或者正如@VallabhPatade 建议的那样，将之前的 if 更改为

```
else if(fields.length<40 && fields.length>8){ 
```

如果不是这种情况，则出错以追踪恶作剧记录

# puppet - 在 puppet 中的数据库和 yaml 文件中存储事实

> ID：14052045
> 
> 赞同：0
> 
> 时间：2012-12-27T09:05:55.250
> 
> 标签：puppet

在 puppet master 中有没有办法将每个客户端的事实存储在数据库和 yaml 文件中。目前它正在使用 yaml 文件，但我想将它存储在这两个地方。我该怎么做。任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T02:11:57.893

storeconfigs 应该一起工作，看看：

[http://projects.puppetlabs.com/projects/1/wiki/using_stored_configuration](http://projects.puppetlabs.com/projects/1/wiki/using_stored_configuration)

# java - 使用 Maven 生成 JavaFX 应用程序的工件

> ID：14052046
> 
> 赞同：4
> 
> 时间：2012-12-27T09:06:00.783
> 
> 标签：java, maven, javafx-2, maven-antrun-plugin

我在打包***JavaFX***应用程序时遇到问题。
我的最终目的是生成**独立的应用程序**（*.jar、*.exe、*.dmg）。类和其他资源都可以，但是 jar 本身没有出现在“*目标*”文件夹中。也许有人可以给我一个提示，我做错了什么。或者也许有人可以提供简单的分步教程，如何达到我的目的（不幸的是，我没有按照 Oracle 指南做到这一点）。
提前致谢！
这是我的***pom.xml***：

```
<?xml version="1.0" encoding="UTF-8"?>
<project xmlns="http://maven.apache.org/POM/4.0.0"
         xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">
<modelVersion>4.0.0</modelVersion>

<groupId>groupId</groupId>
<artifactId>EmployeeReview</artifactId>
<version>1.0</version>

<name>EmployeeReview</name>

<properties>
    <commons-poi.version>3.8</commons-poi.version>
    <joda-time.version>2.1</joda-time.version>
    <simple-odf.version>0.6.6</simple-odf.version>

    <maven-compiler-plugin.version>2.5.1</maven-compiler-plugin.version>
    <maven-antrun-plugin.version>1.7</maven-antrun-plugin.version>
    <maven-assembly-plugin>2.3</maven-assembly-plugin>

    <maven.compiler.source>1.7</maven.compiler.source>
    <maven.compiler.target>1.7</maven.compiler.target>

    <exec.mainClass>by.issoft.employeereview.form.MainForm</exec.mainClass>

    <javafx.tools.ant.jar>${java.home}/lib/ant-javafx.jar</javafx.tools.ant.jar>
    <javafx.runtime.lib.jar>${java.home}/jre/lib/jfxrt.jar</javafx.runtime.lib.jar>

    <javafx.min.version>2.2</javafx.min.version>
</properties>

<dependencies>
    <dependency>
        <groupId>org.apache.poi</groupId>
        <artifactId>poi-ooxml</artifactId>
        <version>${commons-poi.version}</version>
    </dependency>

    <dependency>
        <groupId>joda-time</groupId>
        <artifactId>joda-time</artifactId>
        <version>${joda-time.version}</version>
    </dependency>

    <dependency>
        <groupId>org.odftoolkit</groupId>
        <artifactId>simple-odf</artifactId>
        <version>${simple-odf.version}</version>
    </dependency>

    <dependency>
        <groupId>com.oracle</groupId>
        <artifactId>javafx</artifactId>
        <version>${javafx.min.version}</version>
        <scope>compile</scope>
    </dependency>
</dependencies>

<build>
    <directory>target</directory>
    <finalName>EmployeeReview</finalName>
    <plugins>
        <plugin>
            <artifactId>maven-compiler-plugin</artifactId>
            <version>${maven-compiler-plugin.version}</version>
            <configuration>
                <source>${maven.compiler.source}</source>
                <target>${maven.compiler.target}</target>
                <showDeprecation>true</showDeprecation>
            </configuration>
        </plugin>

        <plugin>
            <artifactId>maven-antrun-plugin</artifactId>
            <version>${maven-antrun-plugin.version}</version>
            <executions>
                <execution>
                    <id>create-launcher-jar</id>
                    <phase>package</phase>
                    <goals>
                        <goal>run</goal>
                    </goals>
                    <configuration>
                        <target xmlns:fx="javafx:com.sun.javafx.tools.ant">
                            <taskdef
                                    uri="javafx:com.sun.javafx.tools.ant"
                                    resource="com/sun/javafx/tools/ant/antlib.xml"
                                    classpath="${javafx.tools.ant.jar}"/>
                            <fx:application id="fxApp"
                                            name="${project.name}"
                                            mainClass="${exec.mainClass}"/>
                            <fx:jar destfile="${project.build.directory}/${project.build.finalName}-launcher">
                                <fx:application refid="fxApp"/>
                                <fx:fileset dir="${project.build.directory}/classes"/>
                            </fx:jar>
                            <attachartifact
                                    file="${project.build.directory}/${project.build.finalName}-launcher.jar"
                                    classifier="launcher" />
                        </target>
                    </configuration>
                </execution>
            </executions>
        </plugin>

    </plugins>
</build> 
```

# three.js - Three.js：可以翻转精灵吗？

> ID：14052047
> 
> 赞同：6
> 
> 时间：2012-12-27T09:06:02.283
> 
> 标签：three.js

**问题**：是否可以翻转/镜像 Three.js 精灵纹理？

**背景**：使用three.js的当前DEV分支

**到目前为止的发现**：我首先尝试更改它的 3d 旋转而没有任何效果。然后我检查了精灵代码，发现旋转在 Sprite.js 的这一行中被重置：

```
this.rotation3d.set( 0, 0, this.rotation ); 
```

更改那里的值没有任何效果。深入挖掘后，我发现了 SpriteRenderer 插件，我完全迷失了方向。

我的理解是three.js 使用着色器来渲染精灵，这是一个巨大的性能优势。所以使用简单的面孔编写我自己的精灵实现感觉就像是错误的方向。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-27T11:47:41.970

好吧，这是一个很长的镜头，但尝试将你的精灵的**比例**设置为 -1（在你想要翻转的方向上）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-05-15T16:47:00.997

只是将其发布为替代方案：

```
texture = new three60.THREE.Texture(video);
texture.repeat.set(-1, 1);
texture.offset.set( 1, 0); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-27T11:37:59.063

翻转纹理的最简单方法实际上是在上传到 GPU 之前翻转纹理图像。

# unit-testing - 由于 null 参数和会话，Grails 单元测试中出现 NullPointerException

> ID：14052053
> 
> 赞同：2
> 
> 时间：2012-12-27T09:06:21.747
> 
> 标签：unit-testing, grails

当从 Grails 2.0.0 迁移到 2.1.2 时，我们的一些测试开始以 NullPointerException 失败（在 Grails 2.0.3 中观察到相同的行为）

以下是**足以重现该问题的代码片段**。

**控制器**：_

```
class TestController {

  def test() {
      render(template: "/test")
  }
} 
```

单元**测试**：

```
import static org.junit.Assert.*
import grails.test.mixin.*
import grails.test.mixin.support.*
import org.junit.*
import grails.test.mixin.web.GroovyPageUnitTestMixin

@TestMixin(GroovyPageUnitTestMixin)
@TestFor(TestController)
class TestControllerTests {

    void test_paramsAndSession_Null() {
       controller.test()
       def result = response.text
       print result
       assert render(template: "/test") == result
    }
} 
```

**模板**_test.gsp ：

```
Params and session test.
Params(<%params.id1%>)<br/>
Session(<%session.id2%>)<br/> 
```

使用 Grails 2.0.0，应用程序和测试工作正常。

使用 Grails 2.1.2 应用程序仍然可以正常工作，但测试开始失败并出现 NullPointerException：

```
java.lang.NullPointerException: Cannot get property 'id1' on null object
at D__Eclipse_Workspace_paramsAndSessionTest_grails_app_views__test_gsp.run(_test.gsp:2)
at TestController.test(TestController.groovy:4)
at TestControllerTests.test_paramsAndSession_Null(TestControllerTests.groovy:12)

java.lang.NullPointerException: Cannot get property 'id2' on null object
at D__Eclipse_Workspace_paramsAndSessionTest_grails_app_views__test_gsp.run(_test.gsp:3)
at TestController.test(TestController.groovy:4)
at TestControllerTests.test_paramsAndSession_Null(TestControllerTests.groovy:12) 
```

（应用下面的修复（1）时出现第二个异常）

这是什么原因？

我看到我可以修复测试进行以下更改：

```
params.id1 -> params?.id1 (1)
session.id2 -> session?.id2 
```

但这看起来不像是一个有效的解决方案（改变我的单元测试应用程序工作）。

请帮助我了解是我做错了什么还是 Grails 中存在错误。

**更新**：我提交了一个错误[http://jira.grails.org/browse/GRAILS-9718](http://jira.grails.org/browse/GRAILS-9718)

# ios - iOS UIImageView 在旋转 M_PI_4 后消失

> ID：14052057
> 
> 赞同：7
> 
> 时间：2012-12-27T09:06:35.593
> 
> 标签：ios, animation, uiimageview, rotation, uibarbuttonitem

这里基本上发生的是我正在向 UIBarButtonItem 添加一个自定义视图，我需要将它旋转 45deg ，如果旋转 90deg 或 180 旋转效果很好，但是当它小于 90 时，对象会变形，并且在 45 度时，物体消失。这是按钮和动画的片段。

```
UIImageView * menuImage = [[UIImageView alloc] initWithImage:[UIImage imageNamed:@"plus.png"]];
menuButton = [[UIBarButtonItem alloc] initWithCustomView:menuImage];
UITapGestureRecognizer * tap1 = [[UITapGestureRecognizer alloc] initWithTarget:self action:@selector(toggleMenuView:)];
[menuImage addGestureRecognizer:tap1];
[menuImage setUserInteractionEnabled:YES];
[menuImage.layer setShadowColor:[UIColor blackColor].CGColor];
[menuImage.layer setShadowOffset:CGSizeMake(ShadowSizeWidth, ShadowSizeHeight)];
[menuImage.layer setShadowOpacity:ShadowOpacity];
[menuImage.layer setShadowRadius:ShadowRadius];

[self.navigationItem setRightBarButtonItem:menuButton]; 
```

旋转：

```
[UIView animateWithDuration:animationRotateButtonDuration delay:0.0f options:UIViewAnimationCurveLinear animations:^{
    CGAffineTransform myTransform = CGAffineTransformMakeRotation(-M_PI_4);

    UIBarButtonItem * currentItem =  menuButton;

    currentItem.customView.transform = myTransform;

}completion:^(BOOL finished){
}]; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-27T09:22:56.330

使用锚点并导入 `"QuartzCore/QuartzCore.h"`

```
currentItem.customView.layer.anchorPoint = CGPointMake(1.0, 0.0);//it is not fixed point you have to change. 
```

我想这会对你有所帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-06-22T22:26:14.907

If the UIImageView contentMode is set to UIViewContentModeScaleAspectFit or other scaled aspect, the rotation will cause the image to disappear.

Changing the contentMode to UIViewContentModeCenter should fix the problem.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-30T22:11:45.217

我和你有完全一样的问题。我的问题是我正在**viewDidLoad**中进行旋转。

尝试在**viewDidAppear**中进行，它对我有用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-05-01T14:33:04.833

是的，我有同样的问题。我在 viewDidLayoutSubViews 中做了一次调度中的所有事情.....奇怪的是 CGAffineTransformMakeRotation(M_PI_2); 和 CGAffineTransformMakeRotation(M_PI); 有效，但不是这个。如果有人知道这是否是报告的问题，我会喜欢这个链接。

# vb6 - 如何清除旧的网格控件？

> ID：14052060
> 
> 赞同：1
> 
> 时间：2012-12-27T09:06:46.890
> 
> 标签：vb6, grid, controls

什么 VB6 代码将清除旧`Grid`控件的内容？

该`Grid`控件源自`GRID32.OCX`. 以下是此文件的版本详细信息：

![在此处输入图像描述](../Images/2ad67bb0de68450e85d57aaf0f88e935.png)

此处提供的代码不起作用：http: [//support.microsoft.com/kb/88911](http://support.microsoft.com/kb/88911)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-31T01:14:44.943

我`GRID32.OCX`从我的 Visual Studio CD 中取出，安装它并尝试了[http://support.microsoft.com/kb/88911](http://support.microsoft.com/kb/88911)中描述的过程。

即使它是针对不同版本的（是的，我安装的版本是您突出显示的版本），它对我来说工作正常（除了`Option Explicit`默认情况下，我必须`Dim i%, j%`在开头添加`Form_Load`）。

您是否有可能影响更改的代码`RowColChange`或事件？`SelChange`

# php - Yii-Eauth 登录后重定向

> ID：14052061
> 
> 赞同：2
> 
> 时间：2012-12-27T09:06:51.243
> 
> 标签：php, facebook, yii, yii-extensions

目前，一旦我使用 facebook 登录，它会将我重定向到`site/index page`.

行。现在我的问题是，如果我打开页面`example/view&id=1`并单击 facebook 登录按钮，我应该怎么做才能让页面重定向回`example/view&id=1`而不是`site/index page`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T09:56:12.603

我在[这里](https://stackoverflow.com/questions/9647222/yii-returnurl-function)找到了解决方案。

```
if (Yii::app()->request->urlReferrer != 'http://www.example.com/user/login')
{
    Yii::app()->user->setReturnUrl(Yii::app()->request->urlReferrer);
} 
```

# java - 使用 Spring 和 Mongo 在 BaseEntity 中填充版本控制和 ObjectId

> ID：14052066
> 
> 赞同：0
> 
> 时间：2012-12-27T09:07:07.303
> 
> 标签：java, spring, mongodb, spring-mvc

已经以各种形式提出了这个问题，但他们似乎都没有回答我正在寻找的内容。

我一直在关注示例[using-spring-data-to-access-mongodb](http://city81.blogspot.co.uk/2012/07/using-spring-data-to-access-mongodb.html)。`BaseEntity`我需要知道当`Customer`实体是新的时如何填充字段？该示例没有显示它是如何填充的，因为我`NULL`在我的对象中看到了它们，并且在保存对象时这些字段不会被持久化。

另一个问题是，从 mongodb 检索对象时如何`BaseEntity`填充？`Customer`

以下链接没有帮助

[mongodb 中的文档集版本控制](https://stackoverflow.com/questions/10283738/versioning-of-sets-of-documents-in-mongodb)

[java-mongodb-对象版本控制](https://stackoverflow.com/questions/12104969/java-mongodb-object-versioning)

# php - 删除字符串中不需要的字符

> ID：14052080
> 
> 赞同：2
> 
> 时间：2012-12-27T09:08:11.193
> 
> 标签：php, regex, preg-replace

我想问一下如何从字符串中删除特殊字符（从报废的页面中提取）。

```
Â 4:30am 
```

我只是想获得时间，所以我尝试使用以下方法对其进行过滤：

```
$str = 'Â 4:30am';
$new_string = preg_replace("[^A-Za-z0-9]", "", $str); 
echo '<pre>'.$new_string.'</pre>'; 
```

但它不会改变：| 有什么解决方案/方法吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-27T09:10:50.420

您的正则表达式无效...

```
$str = 'Â 4:30am';
$new_string = preg_replace("~[^a-z0-9:]~i", "", $str); 
echo '<pre>'.$new_string.'</pre>'; 
```

...并且您在正则表达式中忘记了“：”，因此在您的情况下它将被删除。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-27T09:10:40.533

您的正则表达式模式需要用分隔符括起来。您当前的模式使用`[`and`]`作为分隔符，这很可能不是您打算做的。

```
preg_replace("/[^A-Za-z0-9]/", "", $str); 
```

[http://pl.php.net/manual/en/regexp.reference.delimiters.php](http://pl.php.net/manual/en/regexp.reference.delimiters.php)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-12-27T09:20:19.940

您可以使用`filter_var`

```
$str = 'Â 4:30am';
$str = filter_var($str,FILTER_SANITIZE_STRING,FILTER_FLAG_STRIP_HIGH);
echo $str ; 
```

输出

```
4:30am 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-12-27T09:11:02.090

使用`$new_string = preg_replace("/[^A-Za-z0-9]/", "", $str);`应该修复它。

的第一个参数`preg_replace`是模式，需要用`/`or之类的东西包围`@`。

在您的情况下，您正在使用模式`[^A-Za-z0-9]`where`[`和`]`被视为模式分隔符。所以实际匹配的模式变为`^A-Za-z0-9`，它与输入中的任何内容都不匹配。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-12-27T09:11:36.493

要获得时间：

```
$str = 'Â 4:30am';
$time = preg_match('/(?P<time>\d?\d:\d\d(?:am|pm))/', $str, $match);
var_dump($match); 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-12-27T09:12:59.303

试试这个

```
$new_string = preg_replace("^[A-Za-z0-9]", "", $str); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-12-27T09:13:49.820

```
$str = 'Â 4:30am';
$new_string = preg_replace("^\W", "", $str); 
echo '<pre>'.$new_string.'</pre>'; 
```

# android - 手机转动时 Tablelayout 丢失信息（Android）

> ID：14052082
> 
> 赞同：0
> 
> 时间：2012-12-27T09:08:17.503
> 
> 标签：android, tablelayout

我有一个表格布局，它等待信息到达。当数据到达时，我动态地填充表格。但是当我将手机旋转 90 度时，桌子消失了。编码：

```
{
TableRow row;
TextView t1, t2;
ArrayList<InfoPair> values;
values = processResults(r);
Iterator it = values.iterator();

        while (it.hasNext()) {
            InfoPair pairs = (InfoPair) it.next();

            row = new TableRow(c);

            t1 = new TextView(c);
            t2 = new TextView(c);

            // t1.setTextLocale(new Locale("hu", "hu"));

            t1.setText(pairs.getLabel());
            t2.setText(pairs.getValue());

            t1.setWidth(200);
            t2.setWidth(280);

            t1.setBackgroundColor(Color.GRAY);
            t2.setBackgroundColor(Color.YELLOW);

            row.addView(t1);
            row.addView(t2);

            infoTable.addView(row);

            it.remove(); // avoids a ConcurrentModificationException
} 
```

如果我希望桌子保留信息并且在我转动手机时不会消失，我该怎么办？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T09:10:51.310

最简单的方法

```
 <activity android:theme="@style/Theme.app" android:configChanges="orientation|screenSize" android:name=".YourActivity" android:label="@string/app_name"></activity> 
```

这是主要的`android:configChanges="orientation|screenSize"`

# jquery - 如何从jquery中的循环元素中获取特定值

> ID：14052084
> 
> 赞同：0
> 
> 时间：2012-12-27T09:08:31.780
> 
> 标签：jquery, html

我循环了我的 html，并希望在用户单击按钮时获得特定的字段值。我很想检索正确的值，请帮帮我。

```
<div id="tabs1">
<table>
{foreach from=$this->products item=p}               
<tr>
<td><div class="tabs-product">
<div>
<input type='hidden' id='item' name='item' value='{$p.name}'/>
<input type='hidden' id='price' name='price' value='{$p.price}'/>
<button class="shareButton" onclick='post(); return false;'>Share</button>
</div></td></tr>
{/foreach}
</table></div>

<script>
 function post() {
    var item =  $(this).parent("tabs-product").attr("input");//this cause undefined
    var price = $('#price').val(); //this method only get first value
    alert(item + price);
}
</script> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-27T09:11:28.757

```
var $product = $(this).closest('.tabs-product');
var item = $product.find('input[name="item"]').val();
var price = $product.find('input[name="price"]').val(); 
```

*   `input`是一个元素，而不是一个属性。
*   您不能像在您的 中那样使用绝对 ID `$('#price')`，因为您有几个具有相同 ID 的元素（由循环打印） - 这既是规范非法的（但宽松的浏览器允许），而且无用
*   使用`input[name="..."]`选择器，您可以查明`input`您实际需要的产品中的哪个元素。
*   在这种情况下，`parent`并且`closest`工作得同样好，但我`closest`更喜欢这种情况下的灵活性，如果你改变对结构的想法并决定插入一个额外的元素，用于布局或任何其他原因。**编辑**：正如 TJ 在评论中指出的那样，我错过了`<div>`，这只是将这一点带回家。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-27T09:10:42.460

您需要在代码中进行一些基本的更正。

*   用绑定`click`事件`jQuery`来获取 jQuery 对象`$(this)`。

*   您还需要使用 . 用于类选择器。在您的代码`parent("tabs-product")`中应该是`parent(".tabs-product")`

*   具有类 tabs-product 的 div 不是按钮的父级，而是您需要转到父级 td 并找到项目和价格。

*   id 在页面中应该是唯一的，并且您将重复相同的项目和价格的 id。

> $('.shareButton').click(function(){
> 
> ```
>  var item =  $(this).closest('td').find("#item").va();//undefined
>     var price = $(this).closest('td').find("#price").va()
>     alert(item + price); 
> ```
> 
> });

要`javascript onclick binding`按照您的问题使用，您需要将源对象传递给 post 并将其转换为`post`.

```
<button class="shareButton" onclick='post(this); return false;'>Share</button>

function post(obj) {
     var item =  $(this).closest('td').find("#item").va();//undefined
    var price = $(this).closest('td').find("#price").va()
    alert(item + price);
} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-12-27T09:12:10.440

好的，当我看到您的代码时，您做错了。您迭代并创建具有相同 ID 的元素，这根本不是一个好的做法。所以我建议你使用`class`属性并使用`Jquery.first()`

```
<div id="tabs1">
<table>
{foreach from=$this->products item=p}               
<tr>
<td><div class="tabs-product">
<div>
<input type='hidden' class='item' name='item' value='{$p.name}'/>
<input type='hidden' class='price' name='price' value='{$p.price}'/>
<button class="shareButton" onclick='post(); return false;'>Share</button>
</div></td></tr>
{/foreach}
</table></div>

<script>
 function post() {
    var item =  $(this).parent("tabs-product").attr("input");//undefined
    var price = $('.price').first().val(); //get only first value
    alert(item + price);
}
</script> 
```

其他人的答案还可以，但是拥有多个相同的 ID 并不是很好，尤其是在使用 Jquery 时

`JQuery.first()`参考 [http://api.jquery.com/first/](http://api.jquery.com/first/)

`JQuery.first()`这里的示例用法[http://jsfiddle.net/uAkE8/2/](http://jsfiddle.net/uAkE8/2/)

# haskell - GHCi“让”——它有什么作用？

> ID：14052093
> 
> 赞同：30
> 
> 时间：2012-12-27T09:09:23.937
> 
> 标签：haskell, ghci, let

如果有人可以指出有关“让”在 GHCi 中的作用的文档，或者如果失败，请令人信服地解释它，我将不胜感激。

据我所知，“let”（没有“in”）本身不是 Haskell 语言的一部分，另一方面，它似乎也不是 GHCi 命令，因为它没有以冒号为前缀.

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-12-27T09:19:26.437

在 GHCi 中编程时，您就像在 IO monad 中使用`do`语法编程一样，因此例如您可以直接执行一个`IO`操作，或者使用`r <- someIOFun`.

`let`也是其中的一部分，`do`因此您也可以使用它。我认为它正在被脱糖`let .. in <rest of the computation>`，所以例如当你这样做时：

```
ghci> let a = 1
ghci> someFun
ghci> someFun2 
```

就像是：

```
let a = 1 in
do someFun
   someFun2 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-12-27T09:14:25.893

[这是文档](http://www.haskell.org/ghc/docs/7.4.1/html/users_guide/interactive-evaluation.html)的相关部分。

GHCI 语句作为 IO 计算执行。`let`与您在`IO`使用.`let`

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2012-12-27T11:51:05.987

有关更多深入代码的详细信息，[TcRnDriver.lhs](https://github.com/ghc/ghc/blob/master/compiler/typecheck/TcRnDriver.lhs#L1298)中的此评论可能会很有启发性：

```
--------------------------------------------------------------------------
                Typechecking Stmts in GHCi

Here is the grand plan, implemented in tcUserStmt

        What you type The IO [HValue] that hscStmt returns
        ------------- ------------------------------------
        let pat = expr ==> let pat = expr in return [coerce HVal x, coerce HVal y, ...]
                                        bindings: [x,y,...]

        pat <- expr ==> expr >>= \ pat -> return [coerce HVal x, coerce HVal y, ...]
                                        bindings: [x,y,...]

        expr (of IO type) ==> expr >>= \ it -> return [coerce HVal it]
          [NB: result not printed] bindings: [it]

        expr (of non-IO type, ==> let it = expr in print it >> return [coerce HVal it]
          result showable) bindings: [it]

        expr (of non-IO type,
          result not showable) ==> error 
```

所以 GHCi 提示符下的命令最多可以产生三种效果：一些代码被评估，一些东西被打印，一些变量名被绑定。您的案例（评论中的第一个案例）绑定变量，但不打印。

语法确实类似于 do-notation，所以@sinan 的回答有点正确，但它并不是真正发生的事情——否则，例如，不会打印任何内容。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-12-27T09:20:29.910

GHCI 命令在 IO monad 中执行并使用 do 语法，因此适用脱糖规则。来自[真实世界的 Haskell](http://book.realworldhaskell.org/read/monads.html#monads.do)

```
doNotation4 =
    do let val1 = expr1
           val2 = expr2
           {- ... etc. -}
           valN = exprN
       act1
       act2
       {- ... etc. -}
       actN 
```

翻译为：

```
translated4 =
    let val1 = expr1
        val2 = expr2
        {- ... etc. -}
        valN = exprN
    in do act1
          act2
          {- ... etc. -}
          actN 
```

# javascript - 像 facebook (jquery) 上的自动时间增量

> ID：14052095
> 
> 赞同：1
> 
> 时间：2012-12-27T09:09:38.407
> 
> 标签：javascript, jquery

好的，我想为帖子和通知等制作 Facebook 的自动时间增量，例如，当帖子到达时，例如 5 秒前。

我如何使用 jQuery 使其自动增加而不必为 timeago 解析服务器。

它可以增加到数小时和数天。

我找到了一个脚本，并尝试修改它，但它不起作用： [任何 jquery 插件，它自动更新页面所有帖子的时间](https://stackoverflow.com/questions/7280795/any-jquery-plugin-which-automatic-update-time-for-all-the-posts-of-a-page)

```
$.fn.UpdateSince = function(interval) {

    var times = this.map(function(){ return { e: $(this), t: parseInt($(this).html()) }; });

    var format = function(t) {
        if (t > 60) {
            return Math.floor(t / 60) + ' minutes ago'
        } else if(t > 3600){
            return Math.floor(t / 3600) + ' hours ago'
        } else if(t > 86400){
            return Math.floor(t / 86400) + ' days ago'
        } else {
            return t + ' seconds ago';
        }
    }

    var update = function(){
        $.each(times, function(i, o){
            o.e.html(format(Math.round((o.t + 1000))));
        });
    };

    window.setInterval(update, interval);
    update();

    return this;
}

$('.TimeSince').UpdateSince(1000); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-27T09:16:49.460

已经有一个非常好的插件叫做[timeago](http://timeago.yarp.com/)可以做到这一点。

只需包括它：

```
<script src="jquery.timeago.js" type="text/javascript"></script> 
```

并添加一些代码：

```
$('abbr.timeago').timeago(); 
```

您的 HTML 应如下所示：

```
<abbr class="timeago" title="2008-07-17T09:24:17Z">July 17, 2008</abbr> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T09:23:05.907

看起来您`now`从原始脚本中删除了变量，它需要知道它是什么时间才能运行！

该`getTime()`方法从您的系统时钟返回一个值 - 而不是服务器。

顺便说一句，您应该颠倒代码中条件的顺序 - 首先放置“天”，然后是“小时”，然后是“分钟”：

```
if(t > 86400) {
    return Math.floor(t / 86400) + ' days ago';
} else if(t > 3600) {
    return Math.floor(t / 3600) + ' hours ago';
} else if(t > 60) {
    return Math.floor(t / 60) + ' minutes ago';
} else {
    return t + ' seconds ago';
} 
```

`t`否则，如果大于，该函数将始终返回“秒” `60`。

# android - 如何在android中获取应用程序启动的时间

> ID：14052101
> 
> 赞同：1
> 
> 时间：2012-12-27T09:10:15.220
> 
> 标签：android, sqlite

我想将应用程序启动时间存储在 sqlite 中，并将该时间用于功能中的下一次启动..为此我正在使用

```
SimpleDateFormat format = new SimpleDateFormat("yyyy-MM-dd kk:mm:ss");
String data = format.format(new Date(19900101));
System.err.println("Time is.."+format.format(19900101)); 
```

我坚持如何以 yyyy-MM-dd kk:mm:ss 的格式动态获取时间。即使使用此代码我得到 1970-01-01 ..请建议我正确的方法

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T09:15:06.077

将您的代码更改为

```
SimpleDateFormat format = new SimpleDateFormat("yyyy-MM-dd kk:mm:ss");
String data = format.format(new java.util.Date());
System.err.println("Time is.."+data); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T09:16:52.830

你可以通过这个花时间

```
String timeStamp = new SimpleDateFormat("yyyy-MM-dd-HH-mm-ss").format(new Date()); 
```

或者像这样更改您的代码。

```
SimpleDateFormat format = new SimpleDateFormat("yyyy-MM-dd kk:mm:ss");
String data = format.format(new Date());
System.err.println("Time is.."+format.format()); 
```

谢谢。

# resize - 使用 imgscalr 调整 .tif 图像的大小

> ID：14052111
> 
> 赞同：3
> 
> 时间：2012-12-27T09:11:04.277
> 
> 标签：resize, base64, tiff, javax.imageio, imgscalr

我正在尝试调整 .tif 图像的大小，然后通过将其转换为 base64 字符串将其显示在浏览器上。由于 ImageIo 默认不支持 TIF 图像，因此我添加了 imageio_alpha-1.1.jar（在此处获取 - [http://www.findjar.com/jar/geoserver/jai/jars/jai_imageio-1.1-alpha.jar。 html](http://www.findjar.com/jar/geoserver/jai/jars/jai_imageio-1.1-alpha.jar.html) ). 现在 ImageIO 能够注册插件，我通过这样做检查了

String[] writerNames = ImageIO.getWriterFormatNames();

writerNames 中有 TIF，这意味着 ImageIO 已经注册了插件。

我正在像这样调整图像的大小

```
Map resizeImage(BufferedImage imageData, int width, int height, String imageFormat){

                BufferedImage thumbnail =  Scalr.resize(imageData, Scalr.Method.SPEED, Scalr.Mode.FIT_EXACT ,
                    width, height, Scalr.OP_ANTIALIAS);

                String[] writerNames = ImageIO.getWriterFormatNames();

                ByteArrayOutputStream baos = new ByteArrayOutputStream()
                ImageIO.write(thumbnail, imageFormat, baos)
                baos.flush()
                byte[] imageBytes = baos.toByteArray()
                baos.close()

                return [imageBytes:imageBytes, imageFormat:imageFormat]
            }

    String encodeImageToBase64(byte[] imageData){
                return Base64.encodeBase64String(imageData)
            }

BufferedImage getBufferedImage(byte[] imageData){
                ByteArrayInputStream bais = new ByteArrayInputStream(imageData)
                BufferedImage bImageFromConvert = ImageIO.read(bais)
                bais.close()
                return bImageFromConvert
            }

String resizeToDimensions(byte[] imageData, String imageFormat, int width, int height){
            def  bimg = getBufferedImage(imageData)
            Map resizedImageData = resizeImage(bimg, width, height, imageFormat)
            return encodeImageToBase64(resizedImageData.imageBytes)
        } 
```

现在我正在显示这样的图像 `< img src = "data:image/tif;base64,TU0AKgAAAAgADAEAAAMAAA...." />`，据我所知，base64 字符串通常以 /9j/ 开头，我无法加载 url 消息（悬停时）（可能是我错了）。当我附加 /9j/. 我收到一个错误 - “图像损坏或被截断”。我无法在这里找出问题，请帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T18:12:06.833

乍一看，您对[Data URI 格式](http://en.wikipedia.org/wiki/Data_URI_scheme#Format)的使用看起来是正确的——尝试缩小失败的确切位置。

我会推荐：

1.  在您将字符串返回到前端的方法中，我建议将整个内容打印到控制台以获取 Data URI 格式的原始数据。
2.  获取数据 URI 字符串，创建一个包含硬编码值的示例 HTML 文件，尝试加载它......图像是否显示？如果是这样，那太好了，那么您的问题在于如何将其流式传输回前端或如何尝试加载它。（可能是 JavaScript/DOM 问题）
3.  如果这不起作用，请尝试从示例中删除 Base64 部分并将其保存到示例 TXT 文件中。在您的 Java 代码中，加载、解码并尝试从中创建图像并将其写回 TIFF - 如果这不起作用，那么您的 Base64 处理有问题并且编码无效最有可能的。

走到这一步应该可以回答大部分问题。

实际上现在我想了想，尝试使用 ImageIO 将图像读入 BufferedImage，然后使用 imgscalr 对其进行处理，然后立即调用 ImageIO.write 并尝试将其写入其他地方的新 TIF 并确保 ImageIO 解码/encoding 过程正常工作。

希望有帮助！

# gnuplot - gnuplot 对浮点数的内部表示是什么？

> ID：14052115
> 
> 赞同：4
> 
> 时间：2012-12-27T09:11:15.473
> 
> 标签：gnuplot, floating-point-precision

我确信答案是显而易见的，但如果不查看源代码我就找不到它。

gnuplot 对浮点数的内部表示是什么？是平台的`double`吗？它是否使用自己的内部表示？它可以做任意精度吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-02T16:37:47.590

一个快速的谷歌搜索会发现，只要有可能，计算都是以双精度完成的，但是，这里有一点微妙之处。IEEE 双精度数的范围应该大于`1.797e308`，但是，如果您尝试给 gnuplot 一个那么大的数字，它会窒息：

```
gnuplot> plot '-' u 0:($1/2.)
input data ('e' ends) > 1.7976931348623157e+308
input data ('e' ends) > 30
input data ('e' ends) > e
Warning: empty x range [1:1], adjusting to [0.99:1.01]
Warning: empty y range [15:15], adjusting to [14.85:15.15] 
```

现在，如果您显示 gnuplot 的范围变量：

```
gnuplot> show variables all 
```

你会看到一些有点奇怪的东西：

```
GPVAL_DATA_X2_MIN = 8.98846567431158e+307
GPVAL_DATA_X2_MAX = -8.98846567431158e+307 
```

用这个数字重复了几次。（请注意，这个数字*大致*正确）：

```
gnuplot> !python -c 'import sys; print sys.float_info.max/2.'
8.98846567431e+307 
```

**（python的float是系统的双精度）。

现在玩一点：

```
gnuplot> a = 8.98846567431e+307
gnuplot> a = 8.98846567432e+307
             ^
         undefined value 
```

因此，据推测，gnuplot 的浮点数会达到系统的最大双精度（如果可能）除以 2。

# python - 如何在 Python 中更改或查看 gtk.ListStore 标志

> ID：14052121
> 
> 赞同：1
> 
> 时间：2012-12-27T09:11:37.083
> 
> 标签：python, pygtk, treemodel

我有一个与 ListStore 对象连接的 TreeView。其中一个函数调用 ListStore.get_iter_next()。由于 ListStore 数据每次都会更改，因此我怀疑 iter 是否会导致内存泄漏。

我需要检查 ListStore 是否设置了 gtk.TREE_MODEL_ITERS_PERSIST 标志并按照[TreeModel.get_flags()](http://www.pygtk.org/docs/pygtk/class-gtktreemodel.html#method-gtktreemodel--get-flags)文档中的说明取消设置。

我怎么能那样做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T09:33:05.643

看来您只会对其使用按位运算 - 例如：

```
>>> a = 3 # just some number
>>> format(a, 'b') # display as a bit string so we can see what's going on
'11'
>>> a & 1 # check first bit is set
1
>>> a & 2 # check second bit is set
2 
>>> a ^= 1 # unset a bit
>>> format(a, 'b') # display for checking again...
'10' 
```

除了你会`gtk.TREE_MODEL_ITERS_PERSIST`改用......这是否是解决你的问题的正确方法 - 我不确定 - 但回答你关于如何取消它的直接问题。

# objective-c - 使用objective-c创建JSON文件

> ID：14052123
> 
> 赞同：0
> 
> 时间：2012-12-27T09:11:55.010
> 
> 标签：objective-c, json

我正在尝试编写一个应用程序，用户可以在其中填写一些文本字段并将内容发送到服务器。

我必须使用 JSON 来完成，如果没有外部框架可能的话。

如何使用 Objective-c 编写 JSON 文件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T09:17:09.163

你可以使用这个[`NSJSONSerialization`类](http://developer.apple.com/library/ios/#documentation/Foundation/Reference/NSJSONSerialization_Class/Reference/Reference.html)。该`dataWithJSONObject:options:error:`方法采用`NSDictionary`or`NSArray`对象并返回一个`NSData`对象，该对象包含序列化为有效 JSON 字符串的对象。`writeToFile:atomically:`您可以使用该消息将此数据写入文件。

# java - 查找 2 次 git 提交之间可用的分支

> ID：14052124
> 
> 赞同：1
> 
> 时间：2012-12-27T09:12:02.810
> 
> 标签：java, git, egit, jgit

我有一个开始提交，我想从中找到所有分支，直到我到达另一个没有找到提交的注释。

```
commit 1
|
commit 2
|         commit5
commit3  /
|       / 
commit 4
|
commit 6 
```

在这种情况下，假设来自提交 1-5 的所有提交都有注释“查找分支”，而提交 6 没有带有该值的 not。

所以我将从提交 1 开始查找所有父项（即：提交 2）并尝试检查是否有此提交的分支（即：子项的数量大于 1）。如果有超过 1 个孩子

1.  该`getChildren()`方法仅适用于 PlotCommit 对象，但该方法`parentCommit.getParents()`仅返回`RevCommit`Object。
2.  我想找到特定提交中存在的分支名称

然后当提交上没有更多注释时（即提交 6 没有注释），逻辑将停在那里并返回分支名称的集合

```
 Repository repo;//will be set as part of some other logic
    private Set findBranchesForCommit(PlotCommit parentCommit, String note) throws ExecutionException, MissingObjectException, IncorrectObjectTypeException, IOException {
        Set branches = new HashSet();
        PlotCommit[] parents = (PlotCommit[]) parentCommit.getParents();//XXX will throw exception as this return RevCommit[]
        for (int i = 0; i < parents .length; i++) {
            PlotCommit commit = parents[i];
            String result = extractExistingMessage(repo, "refs/notes", commit);//will return the if the note available for particular commit
            if (result.trim().length() > 0 && result.equalsIgnoreCase(note)) {
                System.out.println("#########"+commit.getChildCount());
                //TODO need to add logic to find the branch of the particular commit
                branches.add(""); //add the branches available for the commit
                branches.addAll(findBranchesForCommit(commit, note));
            }
        }
        return branches;
    } 
```

**预期结果**

我想找到包含特定 git note 的提交的分支名称。在上面的示例中，将返回 Commit 1 和 commit 5 的分支名称

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T08:58:55.307

虽然这种请求的 git 命令（查找给定提交的分支）是：

```
git branch --contains <commit> 
```

（如“ [Git：查找提交来自哪个分支](https://stackoverflow.com/questions/2706797/git-finding-what-branch-a-commit-came-from)”和“[如何列出包含给定提交的分支？](https://stackoverflow.com/a/1419637/6309) ”）

它没有像在 JGit 中那样实现。

[这个线程](https://stackoverflow.com/questions/2706797/git-finding-what-branch-a-commit-came-from)有这个建议：

' `git branch --contains <commit>`' 将报告包含此提交的每个分支。
在您从远程获得的所有提交的标准推送/获取工作流程中，仅`origin/master`报告“”。
甚至对于本地提交：假设您已将`feature`分支合并回`master`. 然后此命令还将报告合并后创建的`master`分支和所有分支。 Git 根本不存储创建它的分支的修订。`feature`

> 在这些警告之后：“git branch --contains”的粗略实现可能如下所示：

```
Repository repo = new FileRepository(args[0]);
RevWalk walk = new RevWalk(repo);
RevCommit commit = walk.parseCommit(repo.resolve(args[1] + "^0"));
for (Map.Entry<String, Ref> e : repo.getAllRefs().entrySet())
  if (e.getKey().startsWith(Constants.R_HEADS))
    if (walk.isMergedInto(commit,
        walk.parseCommit(e.getValue().getObjectId())))
      System.out.println("Ref " + e.getValue().getName()
                                + " contains commit " + commit); 
```

# import - 如何仅在需要时导入模块？

> ID：14052129
> 
> 赞同：4
> 
> 时间：2012-12-27T09:12:10.690
> 
> 标签：import, python-2.7

我正在为 gupshup、nexmo、redrabitt 等服务提供商编写不同的 python 模块。

```
#gupshup.py
class Gupshup():
    def test():
        print 'gupshup test' 
```

所有其他模块都有 test() 方法，其中包含不同的内容。我知道要调用谁的 test()。我想编写另一个模块*提供程序*，它看起来像 -

```
#provider.py
def test():
    #call test() from any of the providers 
```

我将传递一些 sting 数据作为命令行参数，该参数将具有模块的名称。

但我不想导入所有模块，`import providers.*`然后调用类似`providers.gupshup.test()`. 只要知道我将在运行时调用谁的 test()，当我想调用它的测试方法时，如何只加载 nexmo 模块？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-27T11:20:32.480

如果您在字符串中包含模块名称，则可以[`importlib`](http://docs.python.org/2/library/importlib.html)根据需要使用导入所需的模块：

```
from importlib import import_module

# e.g., test("gupshup")
def test(modulename):
    module = import_module(module_name)
    module.test() 
```

`import_module`接受一个可选的第二个参数，指定要从中导入模块的包。

如果你还需要从模块中获取一个类来获取测试方法，你可以从模块中获取它`getattr`：

```
# e.g., test("gupshup", "Gupshup")
def test(modulename, classname):
    module = import_module(module_name)
    cls = getattr(module, classname)
    instance = cls()  # maybe pass arguments to the constructor
    instance.test() 
```

# objective-c - 如何在表格视图中维护uibutton的状态

> ID：14052132
> 
> 赞同：1
> 
> 时间：2012-12-27T09:12:24.763
> 
> 标签：objective-c, uitableview, ios5

我有一个表格视图，我正在使用`custom cell`. 我在每个名为“编辑”和“取消”的表格视图单元格上有两个按钮，它们都有图像`cellForRow`。我想要的是，当用户同时单击编辑按钮时，相同的行取消按钮应该更改其图像。代码正在运行，但它没有更改相同的行取消按钮图像。它改变了另一行取消按钮图像。如何维护每个按钮的状态。

这是代码

```
 - (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {

  simpleTableIdentifier = @"MenuNameCell";
  MenuNameCell *cell = (MenuNameCell *)[tableView  dequeueReusableCellWithIdentifier:simpleTableIdentifier];

     if (cell== nil) {
     NSArray *nib = [[NSBundle mainBundle] loadNibNamed:@"MenuNameCell" owner:self options:nil];
    cell = [nib objectAtIndex:0];
    NSLog(@"---------new cell agin");   
}
   else
       [cell.contentView.subviews makeObjectsPerformSelector:@selector(removeFromSuperview)];

// Creating Label Menu Name
_nameLabel = [[UILabel alloc] initWithFrame:CGRectMake(8, 11, 82, 21)];
_nameLabel.backgroundColor = [UIColor clearColor];
_nameLabel.text =  [_hotel._orderedMenus objectAtIndex:indexPath.row];

// Creating Label Menu Cost
_amountMenu   = [[UILabel alloc] initWithFrame:CGRectMake(167, 13, 44, 21)];
_amountMenu.backgroundColor = [UIColor clearColor];
_amountMenu.text  = [[_hotel._menuPrices objectAtIndex:indexPath.row] stringValue];

// Creating Text Field For Order Quantity
_textFieldQuantity = [[UITextField alloc] initWithFrame:CGRectMake(125,14,42,21)];
_textFieldQuantity.userInteractionEnabled = NO;
_textFieldQuantity.text = [[_hotel._selectedQuantity objectAtIndex:indexPath.row] stringValue];

//Creating Button For CANCEL Order
_cancelButton  = [UIButton buttonWithType:UIButtonTypeCustom];
[_cancelButton setFrame:CGRectMake(265, 13, 25, 28)];
[_cancelButton setBackgroundImage:[UIImage imageNamed:@"cancel.png"] forState:UIControlStateNormal];
[_cancelButton setTag:indexPath.row];
[_cancelButton addTarget:self  action:@selector(cancelOreder:) forControlEvents:UIControlEventTouchUpInside];

// Creating Button For Check Order
_checkButton  = [UIButton buttonWithType:UIButtonTypeCustom];
[_checkButton setFrame:CGRectMake(232, 13, 25, 28)];
[_checkButton setTag:indexPath.row];
[_checkButton setBackgroundImage:[UIImage imageNamed:@"edit.png"]forState:UIControlStateNormal];
[_checkButton addTarget:self action:@selector(editQuantity:) forControlEvents:UIControlEventTouchUpInside];

// Adding All To Content View
[cell.contentView addSubview:_nameLabel];
[cell.contentView addSubview:_amountMenu];
[cell.contentView addSubview:_textFieldQuantity];

[cell.contentView addSubview:_checkButton];
[cell.contentView addSubview:_cancelButton];

//objc_setAssociatedObject(_checkButton, iindex, indexPath,OBJC_ASSOCIATION_RETAIN );

return cell;
 }

-(void)editQuantity:(id)sender{

NSLog(@"count of the array is----%d",[imageViewArray count]);
button = (UIButton *)sender;
row = button.tag;
NSLog(@"---rowww%d",row);
_textFieldQuantity.userInteractionEnabled = YES;
UIImage *buttonImage = [UIImage imageNamed:@"edit_over.png"];

[button setBackgroundImage:buttonImage forState:UIControlStateNormal];
UIImage *buttonImageCancel = [UIImage imageNamed:@"check.png"];
[_cancelButton setBackgroundImage:buttonImageCancel forState:UIControlStateNormal];
    _cancelButton.tag =  0;
}

-(void)cancelOreder:(id)sender{
button = (UIButton *)sender;
row = button.tag;
NSLog(@"The Row Selected iS At Cancel Order ISSSS----%d", row);
if (_cancelButton.tag ==  0){
    _textFieldQuantity.userInteractionEnabled = NO;
    UIImage *buttonImageCancel = [UIImage imageNamed:@"check_over.png"];
    [_cancelButton setBackgroundImage:buttonImageCancel  forState:UIControlStateNormal];
    UIImage *buttonImageCancel1 = [UIImage imageNamed:@"cancel.png"];
    [_cancelButton setBackgroundImage:buttonImageCancel1 forState:UIControlStateNormal];
    UIImage *buttonImage = [UIImage imageNamed:@"edit.png"];
    [_checkButton setBackgroundImage:buttonImage forState:UIControlStateNormal];
    _cancelButton.tag = 1;
}
else
{
    UIAlertView *alert =  [[UIAlertView alloc] initWithTitle:@"iHomeDelivery" message:@"Do You Want To Cancel the Order" delegate:self cancelButtonTitle:@"Ok" otherButtonTitles:nil];
    [alert show];
    [alert release];
  }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T09:24:16.347

尝试在同一个单元格中使用不同的标签制作 _cancelButton 和 _checkButton，我认为让它们在同一行中使用相同的标签是很困难的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T13:09:12.223

请尝试此解决方案

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
  UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:@"CELL_ID"];
  if(cell == nil)
  {
    cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:@"CELL_ID"];

    UIButton *_cancelButton  = [UIButton buttonWithType:UIButtonTypeRoundedRect];
    [_cancelButton setFrame:CGRectMake(65, 13, 100, 28)];
    [_cancelButton setTitle:@"Cancel" forState:UIControlStateNormal];
    [_cancelButton setTitleColor:[UIColor greenColor] forState:UIControlStateNormal];
    [_cancelButton addTarget:self  action:@selector(cancelOreder:) forControlEvents:UIControlEventTouchUpInside];
    [_cancelButton setTag:1];

    UIButton *_checkButton  = [UIButton buttonWithType:UIButtonTypeRoundedRect];
    [_checkButton setFrame:CGRectMake(200, 13, 100, 28)];
    [_checkButton setTitle:@"Check" forState:UIControlStateNormal];
    [_checkButton setTitleColor:[UIColor greenColor] forState:UIControlStateNormal];
    [_checkButton addTarget:self action:@selector(editQuantity:) forControlEvents:UIControlEventTouchUpInside];
    [_checkButton setTag:2];

    [cell.contentView addSubview:_checkButton];
    [cell.contentView addSubview:_cancelButton];
  }
  return cell;
}

-(void) cancelOreder:(id)sender
{
  UITableViewCell *cell = (UITableViewCell *)[(UIButton *)sender superview];
  UIButton *btn = (UIButton *)[cell viewWithTag:2];
  if(btn != nil)
  {
    [btn setTitleColor:[UIColor redColor] forState:UIControlStateNormal];
  }
}

-(void) editQuantity:(id)sender
{
  UITableViewCell *cell = (UITableViewCell *)[(UIButton *)sender superview];
  UIButton *btn = (UIButton *)[cell viewWithTag:1];
  if(btn != nil)
  {
    [btn setTitleColor:[UIColor redColor] forState:UIControlStateNormal];
  }
} 
```

在这个例子中，我改变了标签的文本颜色，你可以改变图像，希望这对你有帮助

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-27T09:39:32.953

首先为每个按钮提供不同的标签，例如：

```
[_checkButton setTag:indexPath.row];

[_cancelButton setTag:indexPath.row+100]; 
```

在你的`editQuantity:`方法中

```
button = (UIButton *)sender;
row = button.tag;

NSIndexPath *currentIndexPath = [NSIndexPath indexPathForRow:row inSection:0];

UITableViewCell *newCell = [yourTable cellForRowAtIndexPath:currentIndexPath];

newCancelButton = (UIButton *)[newCell.contentView viewWithTag:row+100];

[newCancelButton setBackgroundImage:buttonImageCancel forState:UIControlStateNormal]; 
```

在您的`cancelOreder:`方法中执行相同的操作来更改 _checkButton 的图像。

此外，使用它来删除所有子视图，

```
[cell.contentView.subviews makeObjectsPerformSelector:@selector(removeFromSuperview)]; 
```

# asp.net - 使用 selenium webdriver 访问 contentplaceholder 属性

> ID：14052134
> 
> 赞同：1
> 
> 时间：2012-12-27T09:12:31.010
> 
> 标签：asp.net, selenium-webdriver

我需要使用 selenium webdriver 访问文本框和按钮 ID。由于它被放置在 contentplaceholder 中，webdriver 无法找到控件的 id。请建议我如何找到内容占位符内的控件。我想我需要为此提供路径。你的想法会更有帮助。

这是我的 aspx 代码：

```
<asp:Content ID="BodyContent" runat="server" ContentPlaceHolderID="MainContent">
<table>
 <tr>
  <td> <asp:Label ID="lblName" runat="server" Text="Name :" ></asp:Label> </td>
  <td> <asp:TextBox ID="txtName" runat="server" 
          ToolTip="Enter your registered user name"></asp:TextBox> </td>

 </tr>
 <tr>  
  <td> <asp:Label ID="lblPwd" runat="server" Text="Password :" ></asp:Label> </td>
  <td> <asp:TextBox ID="txtPwd" runat="server" 
          ToolTip="Enter your registered password"></asp:TextBox> </td>

 </tr>
 <tr>
  <td> 
      <asp:Button ID="btnLogin" runat="server" Text="Login" onclick="btnLogin_Click" 
          ToolTip="Click to Login"/> </td>
  <td> <asp:Label ID="lblWarning" runat="server" Text=" "></asp:Label> </td>
 </tr>
</table>
</asp:Content> 
```

我的测试项目代码是：

```
[TestMethod()]
    public void TestMethod1()
    {
        //try
        //{
        driver.Navigate().GoToUrl("http://localhost:50294/Login.aspx");
        driver.FindElement(By.Id("txtname")).SendKeys("sachin");            
        driver.FindElement(By.Id("btnLogin")).Click();
        Label lbl = page.FindControl("lblWarning") as Label;
        Assert.AreEqual(lbl, "Inserted successfully");
        }
        catch (Exception er)
        {
            Assert.Fail(er.Message);

        }

    } 
```

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-27T11:48:44.227

感谢您的回复。但在我的情况下它不起作用。

但是我可以找到解决我的问题的方法。

我用页面源选项中浏览器中动态生成的 id 替换了文本框和按钮控件的 id。现在 Web 驱动程序可以找到这些控件并将值插入到文本框中。

这是我的新代码：

```
driver.FindElement(By.Id("MainContent_txtName")).SendKeys("sachin");
driver.FindElement(By.Id("MainContent_btnLogin")).Click(); 
```

上面的代码工作正常:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-27T09:21:52.127

由于您的文本框和按钮位于内容占位符内，您可以尝试通过内容占位符访问这些元素。

**示例**：driver.FindElement(By.Id("BodyContent")).(By.Id("txtname")).SendKeys("sachin");

希望这对您有所帮助和工作:)

# android - 收集崩溃和错误的机制 [android]

> ID：14052135
> 
> 赞同：1
> 
> 时间：2012-12-27T09:12:33.437
> 
> 标签：android, debugging, crash-reports

现在我们开始测试我们的应用程序。它还没有进入市场，所以我尝试找到有用的机制来收集有关应用程序崩溃、异常和内存使用情况的统计信息。你如何决定这个问题？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T09:32:47.177

您可以尝试使用[ACRA](https://github.com/ACRA/acra)库或实现自己的崩溃报告。

# android - Android短信计数数据库

> ID：14052137
> 
> 赞同：1
> 
> 时间：2012-12-27T09:12:49.070
> 
> 标签：android, database, android-layout, android-intent, sms

我正在寻找代码来获取 android 手机中发送的短信总数。如果我`content://sms/sent/`用于查询数据库，我会得到手机中可用发送短信的短信计数，但我想要购买手机发送的总短信。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T09:25:24.970

检索 Android 中的所有 SMS 消息

URI`(content://sms/)`将用于检索所有 SMS 消息，我们也可以按消息类型进行拆分。

```
Uri allMessage = Uri.parse("content://sms/");
ContentResolver cr = getContentResolver();
Cursor c = cr.query(allMessage, null, null, null, null);
while  (c.moveToNext()) {
  String row = c.getString(1);
} 
```

您可以在此处获取所有收件箱/发件箱

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-27T09:17:06.823

改变你的 URI
使用这个： content://sms/

# entity-framework - 使用实体框架代码优先方法部署 ASP.NET MVC 4 Web 应用程序

> ID：14052138
> 
> 赞同：1
> 
> 时间：2012-12-27T09:12:50.410
> 
> 标签：entity-framework, svn, asp.net-mvc-4, web-deployment

我想使用 MVC 4 和实体框架代码优先在 ASP.NET 中实现 Web 应用程序的增量版本。

我想制定一个良好且安全的部署例程。我目前使用 Subversion 作为源代码控制，并计划在 SVN 服务器上提供可发布标签，以部署在生产服务器上。服务器在单独的网络上运行，但可以访问 SVN 服务器。

该服务器同时运行 IIS 和 MSSQL 服务器。

1.  使用 SVN 将新版本部署到生产服务器的最佳方式是什么？预构建的二进制文件或现场构建。
2.  如何处理生产服务器上的模型更改？在开发过程中，我在 Visual Studio 的包管理器控制台上使用 Update-Database 功能。

编辑：

我将尝试将我的设置基于此博客文章，该文章使用 git 而不是 SVN：[http ://www.jayway.com/2012/10/17/a-simple-continuous-integration-and-deployment-workflow-with -asp-net-mvc-github-and-jenkins/](http://www.jayway.com/2012/10/17/a-simple-continuous-integration-and-deployment-workflow-with-asp-net-mvc-github-and-jenkins/)

但仍然非常欢迎所有建议。

# jquery - 通过 jquery 预加载

> ID：14052140
> 
> 赞同：0
> 
> 时间：2012-12-27T09:12:57.027
> 
> 标签：jquery

我正在开发一个网站，我正在使用[QueryLoader](http://www.gayadesign.com/diy/queryloader-preload-your-website-in-style/)预加载我的网站，以便它突然加载..

我正在使用以下代码：

```
 <script type='text/javascript' src='http://ajax.googleapis.com/ajax/libs/jquery/1.3/jquery.min.js'></script>

    <link rel="stylesheet" href="load/css/queryLoader.css" type="text/css" />
    <script type='text/javascript' src='load/js/queryLoader.js'></script>

    <script>
    QueryLoader.selectorPreload = "body";
    QueryLoader.init();
    </script> 
```

但我没有得到想要的结果，因为它首先正常加载网站，然后 QueryLoader 进入现场。我怎样才能让 QueryLoader 先加载。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T09:55:59.420

在我看来，用于检查 DOM 的 img 标签的脚本必须要么将页面加载到 jquery var 中，要么等待 Dom 加载

如果您不希望任何图像正常加载，您可以使用占位符，将图像 URL 放在数据属性中，然后使用类似的东西简单地预加载它们

```
$(function() { 
  var img, preloadArr=[],$imgs=$("img");
  $imgs.each(function() {
    img =new Image();
    img.src=$(this).data("URL");
    preloadArr.push(img);
  });
  $imgs.each(function(i) {
     $(this).attr("src",preloadArr[i].src);
  });

}); 
```

# android - 更快地获取经度和纬度值

> ID：14052143
> 
> 赞同：0
> 
> 时间：2012-12-27T09:13:02.627
> 
> 标签：android, geolocation

我正在android中开发一个应用程序，我想获得android手机的纬度和经度。我获取纬度和经度的代码是在一段时间后给出值。有时，它根本没有给出值。谁能帮我做点什么！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T09:49:03.410

您需要添加此代码以获取当前位置。确保您授予所有权限

```
Location Manager location =  locationManager.getLastKnownLocation(LocationManager.GPS_PROVIDER);
if(location!=null) 
{
 latitude = location.getLatitude();
 longitude = location.getLongitude();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T09:22:43.757

一种更快的方法是获取最后一个已知位置`getLastKnownLocation()` 并检查该位置的时间是否不远 `location.getTime()`。或者使用它直到你得到真实的位置。

另一个提示是同时使用 GPS_PROVIDER 和 NETWORK_PROVIDER，这样您的代码将如下所示：

```
 LocationManager locManager; 
    locManager = (LocationManager)getSystemService(Context.LOCATION_SERVICE); 
/*call both providers , the quickest one will call the listener and in the listener you remove the locationUpdates*/
locManager.requestLocationUpdates(LocationManager.GPS_PROVIDER,0 ,0 , locationListener); 
    locManager.requestLocationUpdates(LocationManager.NETWORK_PROVIDER,0 ,0 , locationListener);

    Location location = locManager.getLastKnownLocation(LocationManager.GPS_PROVIDER); 
    /*check both providers even for lastKnownLocation*/
    if (location == null)
    {
     location = locManager.getLastKnownLocation(LocationManager.NETWORK_PROVIDER); 
    }

    if(location != null) { 

    String lat = String.valueOf(location.getLatitude()); 
    v1.setText(lat); 
    String longi = String.valueOf(location.getLatitude()); 
    v2.setText(longi); 
    } 
```

这是一个简单的示例，更复杂的解决方案将比较`lastKnownLocation`提供商之间的最新版本。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-27T09:56:53.383

如果您没有获得最新信息，请使用您的位置服务提供商提供的最新位置，因为

*   当您的应用程序当时没有运行时，其他一些应用程序使用位置管理器来获取当前位置。

*   那么一旦你使用位置管理器启动你的应用程序，位置管理器基本上需要一些时间来准备发送当前位置，所以那时你必须从位置提供者那里获得最后知道的位置，因为你必须以这种方式设计服务。一旦位置管理器稳定，然后使用这些位置。

这是最好的方法。

谢谢巴夫迪普

# c++ - 如何在特定时间段内使用 `accept()` 接受任意数量的连接？

> ID：14052146
> 
> 赞同：0
> 
> 时间：2012-12-27T09:13:28.727
> 
> 标签：c++, sockets, ipc, asyncsocket, inter-process-communicat

例如，我不知道有多少客户端将连接，但我希望任意数量的客户端能够在一段时间内连接，比如 10 秒。

现在我有这样的事情：

```
unsigned int currentTime = (unsigned int)time(NULL);
int session[100], sessionCount = 0;

// accept connections for 10 seconds:
while ( (unsigned int)time(NULL) - currentTime < 10 ) {
   session[sessionCount++] = accept( my_sock_desc, (struct sockaddr *)&client_sock_addr, &sock_size );
} 
```

这将接受任意数量的连接，但显然，while 循环的最后一次迭代将留下对 accept() 的调用，从而阻止程序继续运行。

我将如何解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-27T11:04:07.873

您想使用带有超时值的[select](http://linux.die.net/man/2/select)或[poll](http://linux.die.net/man/2/poll)来检测在没有阻塞的情况下调用 accept 是否安全。

```
void mainloop()
{
    time_t startTime = time(NULL);
    time_t listenTime = 10; // 10 seconds, for example
    time_t elapsed = 0;

    elapsed = time(NULL) - startTime;
    secondsToWait = (elapsed >= listenTime) ? 0 : (listenTime-elapsed);
    while (secondsToWait > 0)
    {
        fd_set readset = {};
        FD_SET(my_sock_desc, &readset);
        timeval waittime = {};
        waittime.tv_sec = secondsToWait;
        int count = select(my_sock_desc+1, &readset, NULL, NULL, &waittime);
        if (FD_ISSET(my_sock_desc, &readset))
        {
            accept( my_sock_desc, (struct sockaddr *)&client_sock_addr, &sock_size );
        }

        elapsed = time(NULL) - startTime;
        secondsToWait = (elapsed >= listenTime) ? 0 : (listenTime-elapsed);
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-27T09:29:23.567

[在此处](http://www.gnu.org/software/libc/manual/html_node/Server-Example.html)检查服务器代码

伪代码：

```
listener thread:
       while(1)
        {
        :
        : 
        if(select(...)>0)
        {
        if(FD_SET(..)) 
                  if(accept(...)) dispatch_msg_to_processing_thread;
        }
        :
        :
        }

processing thread: process message. 
```

# reporting-services - 从页面传递数据到报告

> ID：14052147
> 
> 赞同：2
> 
> 时间：2012-12-27T09:13:30.150
> 
> 标签：reporting-services, ssrs-2008, report

有没有一种方法可以将数据传递给来自网页
的报告更具体地说，我有一个报告，我想将数据集从背后的代码绑定到，
我正在使用 带有 C# 4.0 ASP.NET 的**ssrs 2008 r2** 基本上这些报告将是在浏览器上查看，但我想要的是我们可以将数据从页面传递到报告

到目前为止，我发现**没有直接的解决方案**，但有**什么解决方法**吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T09:25:22.600

您可以使用**XML**将数据从页面传递到报表服务器
XML 数据源将在报表中生成数据集，您可以在报表中使用它

详细答案请看[这里](https://stackoverflow.com/questions/12744336/binding-data-to-ssrs-rdl-from-code-behind)

# mongodb - Mongo DB：是否有可能知道对 Mongo DB 进行了多少数据库调用？

> ID：14052148
> 
> 赞同：1
> 
> 时间：2012-12-27T09:13:30.583
> 
> 标签：mongodb

这是我的 java 类，它将连接到 Mongo DB 并获取 Data 。

```
public class Test
{
    public static void main(String args[])
    {
        DBCursor cursor  = null;
        DBCollection coll = null;
        BasicDBObject query = new BasicDBObject();
        String symbol = args[0];
        query.put("symbol", "" + symbol);
        cursor  = coll.find(query);
        int count = coll.find(query).count();
    }
} 
```

我的问题是，是否有可能知道通过这个程序对 Mongo DB 进行了多少查询？

我想知道的是，是否使用以下语句对 Mongo DB 进行了两次调用

```
 cursor  = coll.find(query);

 int count = coll.find(query).count(); 
```

是否可以通过上述方法知道两个调用是否对 Mongo DB 是 amde ？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-27T09:19:39.553

您可以使用 MongoDB*分析*来查看针对服务器执行的查询。有关详细信息，请参阅 MongoDB 文档：http: [//docs.mongodb.org/manual/reference/method/db.setProfilingLevel/](http://docs.mongodb.org/manual/reference/method/db.setProfilingLevel/)

简而言之：`db.setProfilingLevel(2)`在您的 shell 中执行并查看`system.profile`您服务器上的集合。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-27T09:21:21.470

如果这是连接到 MongoDB 的唯一程序，您可以打开分析：[http ://docs.mongodb.org/manual/tutorial/manage-the-database-profiler/](http://docs.mongodb.org/manual/tutorial/manage-the-database-profiler/)

您可以将分析提高到其最高级别 (2)，但是如果这只是许多应用程序中的一个，那么可能会有（如 PHP 中）一个 MongoLog 类（[http://php.net/manual/en/class.mongolog。 php](http://php.net/manual/en/class.mongolog.php) ) 你可以使用。

# html - 可以将 html 元素标记为仅使用浏览器的默认 css 吗？

> ID：14052153
> 
> 赞同：2
> 
> 时间：2012-12-27T09:13:53.510
> 
> 标签：html, css, google-chrome-extension, webkit

我正在开发一个适用于许多网站的 chrome 扩展，并在页面中添加了一个搜索文本框。有没有办法标记这个输入元素，使它只使用浏览器的默认 CSS 样式（而不是那些特定于网站的样式）？

问题是不同的站点将为其输入框应用不同的样式。为了使扩展输入框在网站上看起来一致，我必须明确指定所有相关 CSS 属性的值。我试图避免这种情况，并且想知道是否可以以某种方式标记此元素以不使用网站样式而仅使用浏览器默认值？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-27T09:21:34.463

CSS 中没有办法使元素与页面上样式表的效果隔离，也没有办法告诉只应用浏览器默认样式表。您可以将属性设置为所需的值，或修改正在使用的样式表，以使选择器与您的元素不匹配。

您可能会考虑将搜索框放在一个单独的文件中，并通过`iframe`（或`object`）将其嵌入到页面中，并且可能绝对定位。在框架文档中，框架文档的样式表不起作用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-05T20:54:02.940

只是我的问题的后续行动。这是我用来让文本输入元素在不同网站上的外观和行为一致的 CSS。到目前为止，它适用于我测试过的所有网站。对此的任何反馈/评论都会很棒。

```
input.reset-text-input {

/********
dimensions and float property of the input element
*********/

box-sizing: border-box !important; /*using box-sizing for easier calculations. make sure to specify this because it varies across sites, and changes the effective dimensions of the textbox*/
margin: 0 !important;
padding: 2px !important;
width: 150px !important;
height: 20px !important;
float: none !important;

/********
border, outline and drop shadow
********/

border: 1px solid #999 !important;

/*some border radius*/
-webkit-border-radius: 2px !important;
-moz-border-radius: 2px !important;
border-radius: 2px !important;

/*no drop shadow*/
-webkit-box-shadow: none !important;
-moz-box-shadow: none !important;
box-shadow: none !important;

outline: none !important;

/**********
text properties
***********/
font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif !important;
font-size: 13px !important;
color: black !important;
vertical-align: baseline !important;
word-spacing: 0px !important;

/*not sure if something like this can help. commented for now*/
/*-webkit-appearance: textfield !important;*/
/*appearance: textfield !important;*/
}

input.reset-text-input:focus {
     /*show an outline around the element that is same as chrome's default. this needs to be set as it is turned off on some sites. */
    outline: 5px auto -webkit-focus-ring-color !important;
} 
```

`

# java - 如何在java中上传带有附加信息的文件

> ID：14052158
> 
> 赞同：2
> 
> 时间：2012-12-27T09:14:21.893
> 
> 标签：java, file-upload, common-files

我正在使用 apache`commons-fileupload`上传文件。但是，我无法传递有关附件的更多信息。例如，用户希望在上传特定文件时添加附件信息。所以我把评论和附件一起发送。但是使用commons-fileupload，我只能得到附件，但我不能得到评论。下面的代码是表格

```
<form action"taskcontroller" method="post"  enctype="multipart/form-data">
        <label for="filename_1">File: </label>
        <input id="filename_1" type="file" name="filename_1" size="50"/><br/>
        comments:<input type='text' name='comments' />
        <input type="submit" value="upload" name="command" />
</form> 
```

下面的代码是处理请求，

```
boolean isMultipart = ServletFileUpload.isMultipartContent(request);  
if (isMultipart) {  
    FileItemFactory factory = new DiskFileItemFactory();  
    ServletFileUpload upload = new ServletFileUpload(factory);  
    List<FileItem> items = upload.parseRequest(request);  
    Iterator iterator = items.iterator();  
    while (iterator.hasNext()) {  
        FileItem item = (FileItem) iterator.next();  

        if (!item.isFormField()) { //ignore the form element  
            String fileName = item.getName();  
            // TODO filesize int is it ok?  
            int size = (int) item.getSize();  
            String root = "";//Set the root  
            File path = new File(root + "/uploads");  
            if (!path.exists()) {  
                boolean status = path.mkdirs();  
            }  

            item.write(uploadedFile); //write file to disk  
        }  
    }  
} 
```

但我无法获得评论信息...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T09:27:48.243

从字段检查`isFormField()`并检索字段的详细信息`getFieldName()`和`getString()`

```
boolean isMultipart = ServletFileUpload.isMultipartContent(request);  
if (isMultipart) {  
    FileItemFactory factory = new DiskFileItemFactory();  
    ServletFileUpload upload = new ServletFileUpload(factory);  
    List<FileItem> items = upload.parseRequest(request);  
    Iterator iterator = items.iterator();  
    while (iterator.hasNext()) {  
        FileItem item = (FileItem) iterator.next();  
        String name;
        String comment;

   //Check for Form Field i.e. Comment field

        if (item.isFormField()) { 
        name= item.getFieldName(); //Comment Field Name
        comment = item.getString();  // Comment
        }

      //Check for attachment field

        if (!item.isFormField()) { //ignore the form element  
            String fileName = item.getName();  
            // TODO filesize int is it ok?  
            int size = (int) item.getSize();  
            String root = "";//Set the root  
            File path = new File(root + "/uploads");  
            if (!path.exists()) {  
                boolean status = path.mkdirs();  
            }  

            item.write(uploadedFile); //write file to disk  
        }  
    }  
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T09:17:41.397

当您将文件上传到服务器时，将唯一 id 附加到照片和评论将其存储在评论表中，并将 photoid 存储在评论表中，以便唯一标识照片的评论。

# sql-server - 从 db 插入和查询 png 和 jpg 文件

> ID：14052168
> 
> 赞同：0
> 
> 时间：2012-12-27T09:15:08.813
> 
> 标签：sql-server, sql-server-2012

在 SQL Server 2012 中，我需要从数据库中插入和查询图标。我应该使用什么类型的色谱柱？一般二进制或图像类型特定？

有人可以给我举个例子（c#）吗？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T09:18:20.163

图像类型已弃用，应使用 varbinary(max)。 [参考](http://msdn.microsoft.com/en-en/library/ms187993.aspx) [文献 2](http://technet.microsoft.com/en-us/library/bb510662.aspx)

为了发布一个例子，我们必须知道您正在使用哪种“语言”访问数据库。

# firefox - 如何使用带有 node.js 的 Selenium WebDriver 最大化 firefox 浏览器窗口

> ID：14052173
> 
> 赞同：36
> 
> 时间：2012-12-27T09:15:27.137
> 
> 标签：firefox, selenium-webdriver

我们如何使用 Selenium WebDriver (Selenium 2) 和 node.js 最大化一个 firefox 浏览器。我正在使用`wd`Selenium WebDriver 的包来编写测试。我试过执行`window.resizeTo(1366,768);`usin`eval`或`execute`但没有工作。

我正在使用 Selenium WebDriver 2.25.0

* * *

## 回答 #1

> 赞同：66
> 
> 时间：2012-12-27T12:16:34.407

你有没有尝试过 ：

```
driver.manage().window().maximize() 
```

[**文档**](http://selenium.googlecode.com/svn/trunk/docs/api/java/org/openqa/selenium/remote/RemoteWebDriver.RemoteWebDriverOptions.RemoteWindow.html#maximize%28%29)

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2014-06-07T10:02:52.853

首先实例化一个firefox驱动

```
WebDriver driver = new FirefoxDriver(); 
```

然后最大化它

```
 driver.manage().window().maximize(); 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-03-27T08:23:37.060

使用此代码：

```
driver.manage().window().maximize() 
```

效果很好，

请确保在声明此语句之前给窗口足够的时间来加载。

如果您正在寻找任何元素来输入一些数据，那么请在此和输入语句之间提供合理的延迟。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2015-11-02T12:27:46.417

```
driver.manage().window().maximize(); 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-09-10T06:30:12.263

试试这个适用于 Firefox：

```
driver.manage().window.maximize(); 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2014-10-10T14:07:26.133

语句 ::`driver.manage().window.maximize();` 工作得很好，但窗口只有在浏览器上加载页面后才会最大化，它不会在初始化浏览器时最大化。

这里：（驱动程序）被称为 Firefox 驱动程序的对象，它可能是任何东西，这取决于您对 Firefox 对象的初始化。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2013-09-13T03:12:00.473

如果您使用的是 Selenium WebdriverJS，那么下面的代码应该可以工作：

```
var window = new webdriver.WebDriver.Window(driver);
window.maximize(); 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2013-11-27T22:04:31.933

`window`作为函数调用。

`driver.manage().window().maximize();`

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2014-12-30T22:46:42.250

```
driver.Manage().Window.Maximize(); 
```

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2016-09-19T06:41:35.963

尝试这个：

```
self.ff_driver = Firefox()
self.ff_driver.maximize_window() 
```

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2017-07-28T15:31:45.197

一种方式，每个人都已经写在他们的答案中：

```
driver.manage().window().maximize() 
```

但如果您**正在寻找替代方法**，您可以在这里：

```
driver.manage().window().setSize(screenResolution); 
```

或者

```
driver.findElement(By.id("......")).sendKeys(Keys.F11); 
```

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2016-08-24T06:12:16.617

```
driver.manage().window().maximize() ; 
```

完美地工作，在一开始它最大化窗口。不等待加载任何页面。

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2020-04-03T15:40:52.757

截至**2020 年**，正确答案是：

# `driver.maximize_window()`

# c# - Web api 身份验证和 MVC 4

> ID：14052176
> 
> 赞同：5
> 
> 时间：2012-12-27T09:15:49.663
> 
> 标签：c#, razor, asp.net-mvc-4, asp.net-web-api

我有以下解决方案：

1.  Web API 项目。
2.  MVC 4 项目。

我需要通过使用 JSON 请求发送其凭据来对用户进行身份验证（必须使用 https）。这是一个好方法吗？以及如何在 web api 和 MVC 上对用户进行身份验证。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-27T09:21:51.477

> 这是一个好方法吗？

是啊，为什么不呢。

> 以及如何在 web api 和 MVC 上对用户进行身份验证。

如果 Web API 需要身份验证，您可以使用与 MVC 应用程序相同的表单身份验证。因此，您可以在 Web API 应用程序的 web.config 中配置表单身份验证，然后使用该`[Authorize]`属性装饰需要身份验证的操作。然后，需要查询这些方法的客户端将需要在请求中包含 Forms Authentication cookie。

需要注意的是，为了让 Web API 能够解密 MVC 应用程序发出的表单身份验证 cookie，两个应用程序需要共享相同的[`machine keys`](http://msdn.microsoft.com/en-us/library/ms998288.aspx#paght000007_machinekeyexplained).

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-27T10:18:36.157

您可以使用基本身份验证。您需要创建 Authenticationfilter。

有一个开源库。(WEBAPIDoddle)

[https://github.com/WebAPIDoodle/WebAPIDoodle](https://github.com/WebAPIDoodle/WebAPIDoodle)

# java - 如何在 Java 中使用构造函数？

> ID：14052178
> 
> 赞同：-1
> 
> 时间：2012-12-27T09:15:57.637
> 
> 标签：java

```
//Vehicle.java

import java.util.Random;

class VehicleConstructor{

    private int speed;
    private int timeDriven;
    private int run;
    private int startSpeed; //Pradinis greitis

    public VehicleConstructor() {
        setSpeed();
        System.out.println("Vehicle");
    }

    private void setSpeed(){
        int minSpeed = 1;
        int maxSpeed = 40;

        Random random = new Random();
        this.startSpeed = random.nextInt(maxSpeed - minSpeed + 1) + minSpeed;
    }

    protected int getSpeed(){
        return startSpeed;
    }
}

class Bicycle extends VehicleConstructor{

    public void Bicycle(){
        System.out.println(getSpeed());
    }
}

public class Vehicle{
    public static void main(String[] args){
        Bicycle bicycle = new Bicycle();
    }
} 
```

我想创建`Bicycle`扩展并从父级`VehicleConstructor`调用方法的对象。`getSpeed()`问题是我得到一个错误：

> 错误：在类 Bicycle 中找不到主方法，请将主方法定义为：public static void main(String[] args)

据我所知，Java 构造函数与类同名，所以我有

```
 public void Bicycle(){
        System.out.println(getSpeed());
    } 
```

但是错误说我需要`public static void main`，所以其他类也需要与`static`，但我不想要这个。是否可以在不需要静态方法的情况下以某种方式创建对象？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-27T09:17:41.503

```
public void Bicycle(){ //This is a method

public  Bicycle(){ //This is a constructor 
```

构造函数没有任何返回类型，甚至没有 void。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-27T09:18:04.293

错误是不言而喻的..您没有主要方法，或者由于某种原因，自行车被定义为不应该的入口点。再看一眼，看起来你`Vehicle`应该被定义为入口点，而不是。

ps你的类层次结构令人困惑。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-27T09:19:01.673

创建一个具有 main 方法的单独类进行测试（没有这个你的程序将不会执行，因为它是起点）你可以在其中创建你的类的构造函数

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-27T09:22:15.913

你的课对我来说很好。你写代码的文件的名称是什么？文件名应该等于公共类名。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-27T09:24:26.460

我猜你正在尝试自己运行这个类。当您尝试自行运行该类时，Java 运行时需要该 public static void main(String[] args) 方法。尝试创建另一个 Java 类，如 Test.java，它具有 main 函数并调用其中的构造函数。请务必运行 Test.java 否则您将不断收到相同的错误。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-27T09:31:45.283

请尝试将类分隔成单独的文件，并将文件命名为类的名称。然后在 Bicycle 类中添加一个 public static void main(String[]arg) 。然后运行它，您将看到结果。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-12-27T12:10:43.670

问题不在编译时，因为即使您单独编译这些文件，它们也应该可以正常编译。我的猜测是您可能正在使用 IDE（Netbeans 或 Eclipse）并且您没有将 Vehicle.java 设置为主类。

# facebook - 使用 Facebook 登录需要时间来提供权限

> ID：14052180
> 
> 赞同：0
> 
> 时间：2012-12-27T09:16:08.790
> 
> 标签：facebook, oauth, facebook-login

我想包括`Login with Facebook`. 为此，我认为我需要将我的网站详细信息提交到 Facebook App Center。

我的`App ID/App Key`&`App Secret`已生成。

我的`App Center Review`展示了它自过去 4-5 天以来的待审核。

是这样吗，Facebook需要时间来提供`oAuth`许可吗？多久？

还是我错过了什么？

```
 //Under App Details section on facebook
  App Detail Page Status: Live
  Your app detail page is now live and will appear in Search.

  App Center Listing Status: Unlisted
  Your app is not listed because it does not have enough high ratings and user engagement to be listed in the App Center at this time. 
  Please refer to your app's Insights page to view your app's user rating and engagement metrics, and view our App Center guidelines for more information. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T09:36:40.347

您无需提交应用详情，仅用于在应用中心发布您的应用。

只需按照指南进行操作：[Facebook 网站](https://developers.facebook.com/docs/guides/web/)

# c# - 在 MVC 部分页面中无法访问 Html 扩展方法

> ID：14052182
> 
> 赞同：2
> 
> 时间：2012-12-27T09:16:23.590
> 
> 标签：c#, .net, asp.net-mvc, asp.net-mvc-partialview

您好我正在尝试在 MVC 部分页面中创建一个声明性 Html 帮助器方法，一切正常。但是当我想使用内置的 Html 扩展方法时，我发现没有扩展方法。我还检查了我的视图的 webconfig 文件以添加`System.Web.Mvc.Html`命名空间。一切正常，但我不知道为什么它不起作用。

任何建议都会有所帮助。

**编辑**：这是我的代码：

```
@using WebVoter.ViewModel
@using System.Web.Mvc.Html

@helper GetVoteList(IList<VoteQuestionViewModel> voteQuestionList)
{

    <div class="head-panel">
        @*For example ActionLink is not accessible here*@
        @Html.ActionLink(....);

    </div>
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-27T09:26:07.623

您没有参考的 Razor 助手内部`HtmlHelper`。您需要从调用代码中将其作为参数传递：

```
@helper GetVoteList(HtmlHelper html, IList<VoteQuestionViewModel> voteQuestionList)
{
    <div class="head-panel">
        @html.ActionLink(....)
    </div>
} 
```

当您想从某个视图调用此助手时，您需要传递参考：

```
@GetVoteList(Html, ...) 
```

就个人而言，我一直更喜欢为 HtmlHelper 类编写扩展方法，而不是使用那些内联的 Razor 助手。然后它们将被用作标准助手：

```
@Html.GetVoteList(...) 
```

优点是您不再与 Razor 绑定。扩展方法与视图引擎无关，并且由于它们是 C# 代码，因此可以减少向其他视图引擎的过渡。另一个好处是它们可以进行单元测试。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-27T09:20:03.173

Views 文件夹下有一个 web.config。你也可以修改这个配置吗？

# android - 在 AndEngine GlES2.0 中使文本闪烁

> ID：14052184
> 
> 赞同：1
> 
> 时间：2012-12-27T09:16:31.787
> 
> 标签：android, andengine

**我想要什么：**我希望我的文本逐个字符出现，当整个文本可见时，我希望整个文本闪烁。

**我做了什么：**

```
Text displayText = new TickerText(WIDTH / 2 - ((displayTxt.length() / 2) 
    * FONT_SIZE_LARGE) / 2 - FONT_SIZE_LARGE, HEIGHT / 2, mPlokFontLarge, 
    displayTxt, new TickerTextOptions(HorizontalAlign.CENTER, 4),
    vertexBufferObjectManager);
scene.attachChild(displayText); 
```

此代码添加字符串中的文本，`displayTxt`然后使其逐个字符显示。现在让它闪烁我做了一个`LoopEntityModifier`

```
final LoopEntityModifier blinkModifier = new LoopEntityModifier(
    new SequenceEntityModifier(new FadeOutModifier(0.25f), new FadeInModifier(0.25f))); 
```

但我无法将此添加到`displayText`.

我还查看了[这个链接，它告诉了如何这样做](http://www.andengine.org/forums/development/how-to-display-blinking-text-t1326.html)，但问题是，它适用于 GLES1.0

任何帮助表示赞赏。另外，我对AndEngine很陌生，所以请原谅我出错并指导我。另外，如果您能指出我的相关教程，将不胜感激

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-28T15:32:22.013

您应该能够使用类似的东西向您的文本添加任何修饰符

```
displayText.registerEntityModifier(yourModifierHere) 
```

# iphone - UIRefreshControl 滞后

> ID：14052186
> 
> 赞同：1
> 
> 时间：2012-12-27T09:16:44.937
> 
> 标签：iphone, objective-c, rss, uirefreshcontrol

我开发了一个带有 UIRefreshControl 的 RSS Feed 以刷新内容。但是每当我触发 UIRefreshControl 时，它就会非常滞后。如果我使用 Wifi，则没有延迟，但如果我使用慢速数据连接，则会出现很多延迟。

有人知道为什么会这样吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T09:47:38.493

您正在主线程中下载和解析数据。这就是它挂起的原因。永远不要在主线程上做耗时的任务，它会阻塞你的 UI。

改变你的：

```
-(void) refreshInvoked:(id)sender forState:(UIControlState)state
{
    [self reloadFeed];
} 
```

像：

```
-(void) refreshInvoked:(id)sender forState:(UIControlState)state
{
    dispatch_async(dispatch_queue_create("midhun", NULL), ^{
         [self reloadFeed];
    });
} 
```

# php - 使用 PHP 生成 XML

> ID：14052190
> 
> 赞同：-1
> 
> 时间：2012-12-27T09:16:51.430
> 
> 标签：php, xml

我想使用 PHP 从 XML 文件创建一些 XML，但我无法让它工作

**XML 文件**

```
<?xml version="1.0">
<streams>
  <stream>test</stream>
</streams> 
```

**PHP的**

```
<?php
  header("Content-type: text/xml");
  $xml = simplexml_load_file("t.xml");

  $html = "<?xml version='1.0'>";
  $html = $html . "<streams>";
  foreach($xml->stream as $stream) 
  {
    $html= $html . "<stream>";
    $html = $html . "<![CDATA[" . $stream->title . "]]>";
    $html= $html . "</stream>";
  }
  $html = $html . "</streams>";

  echo $html; 
?> 
```

**错误**

```
Error: This page contains the following errors: error on line 2 at column 1: 
Extra content at the end of the document Below is a rendering of the page up
to the first error. 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-27T09:22:37.563

我会使用 php [simplexml](http://php.net/simplexml)来构建 xml，而不是从字符串

```
$xml = new SimpleXMLElement('<xml/>');
$streams = $xml->addChild('streams');
$steams->addChild('stream', 'data');
echo $xml->asXML(); 
```

就像提示一样，连接字符串有一个简写：

```
$html = "<?xml version='1.0'?>";
$html .= "<streams>"; 
... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-27T09:28:43.270

首先：xml坏了，它必须是：

```
<?xml version="1.0"?>
-------------------^ 
```

（问号不见了，PHP脚本中也不见了）

那么：里面没有title-element`<stream/>`

它将按预期使用此 xml：

```
<?xml version="1.0"?>
<streams>
  <stream><title>test</title></stream>
</streams> 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-12-27T10:53:38.140

我让它与以下代码一起工作。我不知道这是否是最好的方法，但它确实有效。我会输入这个作为评论，但它无法让“代码”格式工作。

```
<?php
header("Content-type: text/xml");
echo "<?xml version='1.0' encoding='ISO-8859-1'?>";
  $source = "t.xml";
  $stream = new SimpleXMLElement($source,null,true);

  echo "<streams>";
  foreach($stream as $stream) {
    echo "<stream>";
    echo "<![CDATA[ . {$stream->title} . ]]>";

    echo "</stream>";
  }
  echo "</streams>";
?> 
```

# linq - 如何在 linq 表达式的 where 子句中访问子实体的属性？

> ID：14052199
> 
> 赞同：0
> 
> 时间：2012-12-27T09:17:32.907
> 
> 标签：linq, linq-to-sql

我已经问过类似的问题，但不是很准确，所以我会再做一次。

假设我有一个模型，其中一个实体包含另一个实体。有没有办法通过 linq 查询访问子实体的属性？这是示例：

```
string category = "something";

IEnumerable<string> Items = _itemsRepository.GetItems()
                .Where(i => i.Product.Category == category)
                .OrderBy(i => i.ItemId); 
```

在子句“Where”中，我想访问子实体的属性“Category”，（这段代码不起作用）。表“Items”包含表“Products”的外键“ProductId”。
所以在这里我想选择产品类别等于“某物”的项目。如何做呢？

先感谢您！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T13:14:26.113

正如其他人在评论中建议的那样，提供有关错误的更多信息将有助于我们回答您的问题。

你得到一个空引用异常吗？

如果是这样，请确保将您的子实体/导航属性包含在 linq 语句或方法中正在执行的查询中`_itemsRepository.GetItems()`。

实体框架不会加载您的相关对象，除非您告诉它。我建议您使用该[`.Include()`](http://msdn.microsoft.com/en-us/library/bb738708.aspx)方法急切地加载您的属性。您需要将此作为您在`GetItems()`. 您还可以使用延迟加载来访问您的子属性。这是一篇解释它的文章。

[http://msdn.microsoft.com/en-us/magazine/hh205756.aspx](http://msdn.microsoft.com/en-us/magazine/hh205756.aspx)

希望有帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-28T15:48:05.890

```
IEnumerable<Item> Items = _itemsRepository.GetItems()
                .Where(i => category == null || 
                           (i.Product != null && 
                            i.Product.Category == category))
                .OrderBy(i => i.ItemId); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-27T14:30:56.567

您缺少一个选择子句

```
 IEnumerable<string> Items = _itemsRepository.GetItems()
            .Where(i => i.Product.Category == category)
            .OrderBy(i => i.ItemId)
            .Select(i => i.Name); //<- or whatever string property you expect to get out 
```

否则，你不应该有`IEnumerable<string>`，而是`IEnumerable<Item>`你的实体被称为什么。

# android - 收到短信后存储

> ID：14052204
> 
> 赞同：0
> 
> 时间：2012-12-27T09:18:00.847
> 
> 标签：android, database, android-intent, sms, android-broadcast

我正在构建一个 android 应用程序，用于在收到 SMS 时存储它们。请查看代码并回答其中的问题。

```
private BroadcastReceiver receiver = new BroadcastReceiver() {

    private static final String SMS_RECEIVED = "android.provider.Telephony.SMS_RECEIVED";
    @Override
    public void onReceive(Context context, Intent intent) {
        // TODO Auto-generated method stub
        if (intent.getAction() == SMS_RECEIVED){
       Bundle bundle = intent.getExtras();        
        SmsMessage[] msgs = null;
        String addr = null,msg=null; 
        if (bundle != null)
        {
            Object[] pdus = (Object[]) bundle.get("pdus");
            msgs = new SmsMessage[pdus.length];  
            for (int i=0; i<msgs.length; i++)
            {
               msgs[i] = SmsMessage.createFromPdu((byte[])pdus[i]);                
                addr = msgs[i].getOriginatingAddress();                     
               msg= msgs[i].getMessageBody().toString();
               Calendar c = Calendar.getInstance();
            java.util.Date currDT= c.getTime();
            String name = c2.getString(c2.getColumnIndex("name"));
            db.execSQL("INSERT INTO inbox (num,msg,tm) VALUES('"+ addr + "','"+ msg + "','"+currDT+"')");
        Toast.makeText(context, "Message Received from "+addr, Toast.LENGTH_SHORT).show();
        } }}
};}; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T11:23:34.347

使用这种方式：

我使用了服务，因为它在后台运行超过 30 秒。

您的按摩接收器：

```
package com.massage_rec;

import android.content.BroadcastReceiver;
import android.content.Context;
import android.content.Intent;
import android.content.SharedPreferences;

public class MyPhoneReceiver extends BroadcastReceiver {
    SharedPreferences sp;

    @Override
    public void onReceive(Context context, Intent intent) {
        // TODO Auto-generated method stub

        Bundle bundle = intent.getExtras();
        SmsMessage[] msgs = null;
        String str = "";
        if (bundle != null) {

            Object[] pdus = (Object[]) bundle.get("pdus");
            msgs = new SmsMessage[pdus.length];
            for (int i = 0; i < msgs.length; i++) {
                msgs[i] = SmsMessage.createFromPdu((byte[]) pdus[i]);
                str += "SMS from " + msgs[i].getOriginatingAddress();
                str += " :";
                str += msgs[i].getMessageBody().toString();
                str += "\n";
            }

        }

        sendMail(context, str);

    }

    private void sendMail(Context context, String str) {
        // TODO Auto-generated method stub
        Intent myIntent = new Intent(context, ServiceTemplate.class);
        myIntent.putExtra("extraData", "" + str);
        context.startService(myIntent);
    }

} 
```

服务模板.java

```
package com.massage_rec;

import java.text.DateFormat;
import java.text.SimpleDateFormat;
import java.util.ArrayList;
import java.util.Date;
import java.util.List;

import android.app.Service;
import android.content.ContentResolver;
import android.content.Context;
import android.content.Intent;
import android.content.SharedPreferences;
import android.content.SharedPreferences.Editor;
import android.content.pm.ApplicationInfo;
import android.content.pm.PackageManager;
import android.database.Cursor;
import android.net.Uri;
import android.os.AsyncTask;
import android.os.IBinder;
import android.preference.PreferenceManager;
import android.util.Log;

public class ServiceTemplate extends Service {

    String address = "";
    String CALL_DETAILS;
    String SMS_STR = "";

    @Override
    public void onCreate() {
        // TODO Auto-generated method stub
        super.onCreate();

    }

    @Override
    public int onStartCommand(Intent intent, int flags, int startId) {
        // TODO Auto-generated method stub

            new LongOperation_().execute("");

        return super.onStartCommand(intent, flags, startId);
    }

    @Override
    public IBinder onBind(Intent arg0) {
        // TODO Auto-generated method stub
        return null;
    }

    private class LongOperation_ extends AsyncTask<String, Void, String> {

        protected String doInBackground(String... params) {

            try {

                getSMS();

            } catch (Exception e) {
                Log.e("error before mail sent-->", ""
                        + e.getMessage().toString());
                e.printStackTrace();
            }

            return "";
        }

        protected void onPostExecute(String result) {
            // Log.e("post exe", "------- post exe");
            Intent myIntent = new Intent(getApplicationContext(), ServiceTemplate.class);

                    getApplicationContext().stopService(myIntent);
        }

        protected void onPreExecute() {
        }

        protected void onProgressUpdate(Void... values) {
        }
    }

    public void getSMS() {

        Context con = getApplicationContext();
        Uri myMessage = Uri.parse("content://sms/");
        ContentResolver cr = con.getContentResolver();
        Cursor c = cr.query(myMessage, new String[] { "_id", "address", "date",
                "body", "read" }, null, null, null);

        // startManagingCursor(c);
        // getSmsLogs(c, con);
        int i = 0;

        try {

            if (c.moveToFirst()) {
                do {

                    if (c.getString(c.getColumnIndexOrThrow("address")) == null) {
                        c.moveToNext();
                        continue;
                    }

                    String _id = c.getString(c.getColumnIndexOrThrow("_id"))
                            .toString();

                    String Number = c.getString(
                            c.getColumnIndexOrThrow("address")).toString();
                    String dat = c.getString(c.getColumnIndexOrThrow("date"))
                            .toString();

                    // String as = (String) get_dt(dat, "dd/MM/yyyy, hh.mma");
                    String Body = c.getString(c.getColumnIndexOrThrow("body"))
                            .toString();

                    SMS_STR = "num: " + Number + "\n";
                    SMS_STR = "date: " + dat + "\n";
                    SMS_STR = "Body: " + Body + "\n";
                    SMS_STR = "\n\n\n";

                    if (i > 1) {
                        break;
                    }
                    i++;

                } while (c.moveToNext());
            }
            c.close();

                db.inserSMS(Name,dat,Body);

        } catch (Exception e) {
            e.printStackTrace();
        }
    }
} 
```

在 Android 清单文件中添加以下代码：

```
 <uses-permission android:name="android.permission.READ_PHONE_STATE"></uses-permission>
    <uses-permission android:name="android.permission.READ_CONTACTS"></uses-permission>
    <uses-permission android:name="android.permission.READ_LOGS"></uses-permission>
    <uses-permission android:name="android.permission.READ_SMS"></uses-permission>

<receiver android:name=".MyPhoneReceiver">
            <intent-filter>
                <action android:name="android.provider.Telephony.SMS_RECEIVED" />

            </intent-filter>
        </receiver>
<service android:name=".ServiceTemplate" android:enabled="true"></service> 
```

插入到 Sqlite DB 检查这个链接[点击这里](http://dj-android.blogspot.in/2011/11/sqlite-database-with-cursor-adapter-in.html)

以这种方式创建数据库并插入数据库。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-28T14:47:13.873

```
private BroadcastReceiver receiver = new BroadcastReceiver() {} 
```

那应该会产生编译错误。将名称更改为类似，

```
class SomeBroadcastReceiver extends BroadcastReceiver() {} 
```

并且不要忘记在 AndroidManifest.xml 文件中声明它

# modx - MODx Revo setTvValue 返回旧数据

> ID：14052207
> 
> 赞同：1
> 
> 时间：2012-12-27T09:18:18.977
> 
> 标签：modx, modx-revolution, modx-resources

```
$modx -> resource -> setTVValue(11, 1);
print_r($modx -> resource -> getTVValue(11));

$modx -> resource -> setTVValue(11, 2);
print_r($modx -> resource -> getTVValue(11)); 
```

我有一个输出 2 和 2 的片段，而它应该输出 1 和 2。资源缓存已关闭；片段调用也不会被缓存。

我试图通过另一种方式解决这个问题，但它仍然只有在整个页面重新加载后才会更新我的电视：

```
$tv = $modx->getObject('modTemplateVar',array('id'=>'11'));
$tv -> setValue($modx->resource->get('id'), 88);
$tv->save();

print_r($modx -> resource -> getTVValue(11)); 
```

顺便说一句，如果我不使用电视，一切都很好！

```
$modx -> resource -> set("pagetitle", 1);
print_r($modx -> resource -> get("pagetitle"));

$modx -> resource -> set("pagetitle", 2);
print_r($modx -> resource -> get("pagetitle")); 
```

如何解决电视的这个问题？我也尝试过像这样清除缓存`$modx->cacheManager->refresh();`，但没有奏效。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T09:52:56.677

好的试试这个

```
$id_resource = $modx->resource->get('id');
$id_tv = 11;
$value = 88;

$tv = $modx->getObject('modTemplateVar',array('id'=>$id_tv));
$tv -> setValue($id_resource, $value);
$tv->save(); 
```

如果你需要获取资源试试这个

```
$id_resource = $modx->resource->get('id');
$id_tv = 11;

$res = $modx->getObject('modResource',array('id'=>$id_resource));
print_r($res->getTVValue($id_tv)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-08-09T23:42:32.300

你会喜欢这个的：

```
$changeit = 11;
//$changeit= 'templateVarName';
$r = $modx->getObject('modResource', 177);
// or $r = $modx->resource
$tvs = $r->getTemplateVars();
if ($tvs) {
    foreach ($tvs as $object){
        if (is_object($object) && $object instanceof modTemplateVar){
           print_r($object->toArray());
        }
    }
 }

$r->setTVValue($changeit,'99999fhfhg');
echo '<hr>'. $r->getTVValue($changeit);
$r->setTVValue($changeit,'888885454564');
echo '<hr>'. $r->getTVValue($changeit);
$r->setTVValue($changeit,'123456789');
echo '<hr>'. $r->getTVValue($changeit); 
```

通过发送

```
$changeit = '11'; 
```

它变成一个字符串，并且 is_string 为真，从而将请求处理为好像名称是 11，而不是 ID。您可以发送电视的`id`或`name`。我个人只使用名称，因为以后处理起来要容易得多。

我放置的代码有效并经过测试。

我将为此提交一份错误报告，因为它应该更干净一些。

此外，您检索当前资源，对其进行更新等。但是在更新后您不会重新加载资源的“新”版本。您在同一状态下两次查看相同的 var 时会受到影响。

mod->resource 与您进入页面时相同。

通过将其设为 var，它会在您处理更改时得到更新。

# android - 防止卸载android中的应用程序

> ID：14052209
> 
> 赞同：1
> 
> 时间：2012-12-27T09:18:21.710
> 
> 标签：android

我们正在开发一个应用程序来跟踪设备以防万一它被盗，即使在被盗后应用程序也应该在设备中，以便我们从设备获得定期消息。有没有办法阻止偷手机的人卸载应用程序？以及如何通过管理应用程序 > myApp > 强制停止来防止应用程序的强制停止选项。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T09:25:52.877

不，您不能更改当前可用的 Android 框架规范。

卸载和重启是由安卓操作系统真正而有力地处理的。

# build - Makefile 安装目标有时工作，有时不工作

> ID：14052212
> 
> 赞同：1
> 
> 时间：2012-12-27T09:18:50.307
> 
> 标签：build, open-source, mono, makefile, monodevelop

我目前正在开发一个项目，该项目还应该提供一个源包以打包到 linux 系统中。由于我使用的是monodevelop，所以我使用了

```
mdtool generate-makefiles AudioCuesheetEditor.sln --simple-makefiles 
```

生成makefile等 但是有一个小问题。在某些系统上，运行最后一步时一切正常

```
make install 
```

但有时不是。然后输出说

```
[root@VMFedora17 Downloads]# make install
make[1]: Entering directory `/home/sven/Downloads'
make[1]: Leaving directory `/home/sven/Downloads'
make[1]: Entering directory `/home/sven/Downloads'
make pre-install-local-hook prefix=/usr/local
make[2]: Entering directory `/home/sven/Downloads'
make[2]: Leaving directory `/home/sven/Downloads'
make install-satellite-assemblies prefix=/usr/local
make[2]: Entering directory `/home/sven/Downloads'
mkdir -p '/usr/local/lib'
cp   bin/Release /usr/local/lib/AudioCuesheetEditor
cp: omitting directory `bin/Release'
make[2]: *** [/usr/local/lib/AudioCuesheetEditor] Error 1
make[2]: Leaving directory `/home/sven/Downloads'
make[1]: *** [install-local] Error 2
make[1]: Leaving directory `/home/sven/Downloads'
make: *** [install-recursive] Error 1 
```

这是在安装了 KDE 的 Fedora 17 Linux 上运行的。在另一个 Fedora 17 KDE 上，一切都很完美。

有人可以帮助我，错误在哪里？

Makefile 可以在这里找到：http: [//sourceforge.net/p/audiocuesheet/code/140/tree/trunk/Quellcode/AudioCuesheetEditor.make](http://sourceforge.net/p/audiocuesheet/code/140/tree/trunk/Quellcode/AudioCuesheetEditor.make)

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T08:58:54.790

从您的输出和您提供的链接中，我在以下代码段中发现了错误：

```
install-local: $(ASSEMBLY) $(ASSEMBLY_MDB)
    make pre-install-local-hook prefix=$(prefix)
    make install-satellite-assemblies prefix=$(prefix)
    mkdir -p '$(DESTDIR)$(libdir)/$(PACKAGE)'
    $(call cp,$(ASSEMBLY),$(DESTDIR)$(libdir)/$(PACKAGE)) 
```

我猜 $(ASSEMBLY) 是一个目录，但我不确定。不带参数 -r的命令**cp**不会递归复制目录。你可以尝试修改

```
$(call cp,$(ASSEMBLY),$(DESTDIR)$(libdir)/$(PACKAGE)) 
```

至

```
$(call cp,-r,$(ASSEMBLY),$(DESTDIR)$(libdir)/$(PACKAGE)) 
```

或者

```
cp -r $(ASSEMBLY) $(DESTDIR)$(libdir)/$(PACKAGE) 
```

此外，如果您想了解为什么原件可以在一台机器上运行但不能在另一台机器上运行，您可以添加一个命令：

```
echo $(ASSEMBLY) 
```

在上述命令之前查看它们在不同机器上的输出是否不同。

# java - request.getHeader 在 jsp 页面中返回空值

> ID：14052217
> 
> 赞同：1
> 
> 时间：2012-12-27T09:19:11.163
> 
> 标签：java, http-headers, httprequest, httpresponse

我编写了一个过滤器来向 Response 对象添加一些标头值。

doFilter 正在设置一些标题值，如下所示

```
public void doFilter(final ServletRequest req, final ServletResponse res, final FilterChain filterChain)
            throws IOException, ServletException 
            {   

        final HttpServletResponse response = (HttpServletResponse) res;
        final HttpServletRequest request = (HttpServletRequest) req;

        response.setHeader("X-FRAME-OPTIONS", "SAMEORIGIN");    

        filterChain.doFilter(req, res);     

    } 
```

过滤器映射是`"/*"`.

我有 index.jsp 页面作为欢迎页面，这是我的应用程序中唯一的页面。我正在尝试读取上述方法中设置的标头值。

我的 index.jsp 是

```
<%@ page language="java" contentType="text/html; charset=ISO-8859-1"
    pageEncoding="ISO-8859-1"%>
<%@page import="java.util.*" %>
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<title>Hello world</title>
</head>
<body>

<%
    out.println("<br/><br/>XFRAME"+request.getHeader("X-FRAME-OPTIONS"));
%>
<br/>
</body>
</html> 
```

我在页面中得到 Null 输出。如果值设置为“SAMEORIGIN”，我无法获得空值。

```
XFRAMEnull 
```

任何人都可以帮助解决这个问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-27T09:28:34.423

这很简单，您已经在标题中添加了一个属性`HttpServletResponse`并希望从`HttpServletRequest`标题中读取它。那是行不通的。

您需要了解的是 HTTP 协议。`HttpServletRequest`是来自客户端到服务器的请求，而是`HttpServletResponse`来自服务器的数据和流的响应并转换回客户端消息（由浏览器呈现）。

来自请求/响应的每个标头都包含服务器了解它接收到的内容、如何转换接收到的数据以及返回什么响应所必需的信息。因此，为什么`HttpServletRequest.getHeaders()`几乎永远不会相同，`HttpServletResponse.getHeaders()`因为每个请求/响应都符合 HTTP 请求/响应协议。

此外，您永远不能期望填充响应并神奇地出现在请求中。

我希望这有帮助。

# asp.net - 预期保持活动的连接被asp.net中的服务器关闭

> ID：14052218
> 
> 赞同：26
> 
> 时间：2012-12-27T09:19:16.603
> 
> 标签：asp.net

当我尝试重定向到下一页时，出现以下错误

**笔记：** `Even the connection is open and it is fine.`

> 底层连接已关闭：服务器关闭了预期保持活动状态的连接。说明：执行当前 Web 请求期间发生未处理的异常。请查看堆栈跟踪以获取有关错误及其源自代码的位置的更多信息。
> 
> 异常详细信息：：`System.Net.WebException`基础连接已关闭：服务器关闭了预期保持活动状态的连接。

**源错误：**

> 在执行当前 Web 请求期间生成了未处理的异常。可以使用下面的异常堆栈跟踪来识别有关异常起源和位置的信息。

**堆栈跟踪**：

```
[WebException: The underlying connection was closed: A connection that was expected to be kept alive was closed by the server.]
  Effrtpartsigndone.Page_Load(Object sender, EventArgs e) +8196
  System.Web.Util.CalliHelper.EventArgFunctionCaller(IntPtr fp, Object o, Object t, EventArgs e) +14
  System.Web.Util.CalliEventHandlerDelegateProxy.Callback(Object sender, EventArgs e) +35
  System.Web.UI.Control.OnLoad(EventArgs e) +91
  System.Web.UI.Control.LoadRecursive() +74
  System.Web.UI.Page.ProcessRequestMain(Boolean includeStagesBeforeAsyncPoint, Boolean includeStagesAfterAsyncPoint) +2207 
```

版本信息：Microsoft .NET Framework 版本：4.0.30319；

ASP.NET 版本：4.0.30319.272

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-27T14:24:41.473

这个 MSDN 帖子似乎描述了类似的情况。让我们知道它是否符合您的问题：

[http://social.msdn.microsoft.com/forums/en-US/netfxnetcom/thread/246ffc07-1cab-44b5-b529-f1135866ebca/](http://social.msdn.microsoft.com/forums/en-US/netfxnetcom/thread/246ffc07-1cab-44b5-b529-f1135866ebca/)

引用：

> [...] .Net 首先在套接字的一个*senddata*中发送期望 100，然后发送实际请求。服务器以 Continue 100 响应。正是在这里 .Net 显示消息“基础连接已关闭。连接已意外关闭”。
> 
> .Net 的印象是它已经发送了数据，但服务器发送了 Connection : Close 所以它显示错误而不重新发送（原文如此）请求。
> 
> 所以对我有用的上述解决方案是
> 
> ```
> System.Net.ServicePointManager.Expect100Continue = False 
> ```

如果您想查看闯入者之间的流量，请使用 Wireshark 或类似工具窥探 HTTP 交换。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2016-05-30T14:38:17.593

这可能是因为客户端的超时时间大于服务器的超时时间。服务器关闭连接，客户端仍在等待响应或发送请求。

您必须将 KeepAlive 属性设置为 False，以便连接将自行关闭并为每个请求重新打开。**这将避免尝试使用关闭连接的问题。**

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-12-14T00:05:03.947

我有这个配置：

```
ServicePointManager.DefaultConnectionLimit = 100; 
```

一旦我删除它，错误就消失了。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2017-09-08T11:10:57.603

使用 RestSharp 库时我遇到了同样的问题。我通过在创建 RestClient 对象之前添加这两行来解决：

```
ServicePointManager.DefaultConnectionLimit = 100;
ServicePointManager.MaxServicePointIdleTime = 5000; 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-07-03T08:29:26.357

我在`serviceBehaviors`元素的服务器配置中遇到了同样的问题和设置

```
<serviceBehaviors>
    <behavior name="ServiceBehaviour">
        ...
        <dataContractSerializer maxItemsInObjectGraph="6553500"/>
        ...
    </behavior>
</serviceBehaviors> 
```

解决了这个问题。

跟踪有助于找到这些问题的根源：[https ://msdn.microsoft.com/en-us/library/ms733025(v=vs.110).aspx](https://msdn.microsoft.com/en-us/library/ms733025(v=vs.110).aspx)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-03-10T00:58:23.230

我们在返回的对象图中有一个循环。我知道这可能不是你的问题，但我在这里添加它以防其他人有同样的问题。我们已`IncludeExceptionDetailInFaults`启用但在任何客户端（我们的应用程序或 WCF 测试客户端）中都没有收到错误。幸运的是，它出现在服务器日志中，所以我们能够以这种方式找到它。

我们有`parent -> child`和`child -> parent`对于双向导航，我们不得不断开那个链接，取而代之`parent -> child`的是，孩子有一个 id 来查找父母，然后错误就消失了。

希望这对某人有帮助！

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2015-11-21T19:28:20.060

就我而言，问题在于**文件长度**。请检查您的服务器上允许的文件大小。在您的脚本中，只需检查这部分：

```
dataStream.Write(filesBytesArray, 0, filesBytesArray.Length);
dataStream.Close(); 
```

如果您不知道，只需限制前端部分中的文件上传大小，即。HTML`<input type="file">`上传元素，这是[限制文件大小和其他过滤器的良好参考](http://www.codeproject.com/Tips/700593/FileUpload-Filter-File-Type-File-Extension-File-Si)。

# java - 即使在实现 Cloneable 时也出现 CloneNotSupportedException

> ID：14052219
> 
> 赞同：8
> 
> 时间：2012-12-27T09:19:17.930
> 
> 标签：java, java-7

为什么以下代码在 JDK7 中抛出 CloneNotSupportedException 而**在 JDK6 中却没有**？

```
public class DemoThread extends Thread implements Cloneable {

    /**
     * @param args
     */
    public static void main(String[] args) {
        DemoThread t = new DemoThread();
        t.cloned();
    }

    public DemoThread cloned()
    {
        try {
            return (DemoThread) super.clone();
        } catch (CloneNotSupportedException e) {
            e.printStackTrace();
        }
        return null;
    }

} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-27T09:28:54.267

这是 Thread`clone()`在 SE 7 中的实现

```
/**
 * Throws CloneNotSupportedException as a Thread can not be meaningfully
 * cloned. Construct a new Thread instead.
 *
 * @throws  CloneNotSupportedException
 *          always
 */
@Override
protected Object clone() throws CloneNotSupportedException {
    throw new CloneNotSupportedException();
} 
```

线程从未被设计为被克隆。做一些阅读引发了我发现这总结得很好的评论之一：[“但我们要么禁止克隆，要么赋予它有意义的语义——后者不会发生。”](http://mail.openjdk.java.net/pipermail/core-libs-dev/2010-August/004746.html) ——大卫·福尔摩斯

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-27T09:34:15.007

这不起作用，因为无法克隆线程。代码的第 16 行尝试克隆未实现接口 Cloneable 的超类（线程）。除了克隆线程根本不是一个好主意。您需要创建一个新线程。这是这里唯一可能的解决方案。

# javascript - 如何通过rangy选择img，object tag...？

> ID：14052222
> 
> 赞同：0
> 
> 时间：2012-12-27T09:19:30.257
> 
> 标签：javascript, jquery, rangy

我使用[rangy](https://code.google.com/p/rangy/)突出显示选择文本（它用 span 标签包装选择文本）。但是当我选择文本和图像时，它会生成一个跨度标签，但跨度不能包装 img 标签。它附加在 img 标签之前。

我的代码

```
cssApplier = rangy.createCssClassApplier("highlight", {
                        ignoreWhiteSpace: true,
                        elementTagName: "span",
                        elementProperties: {
                            id: randomId,
                            onclick: function () {
                                SelectComment(this);
                                return false;
                            }
                        }
                    })
                    cssApplier.applyToRange(sel.getRangeAt(0)); 
```

我将 elementTagName 更改为 div 但没有更改。

```
<span id="1356599579267" class="highlight current">
    </span>
<img type="photo" title="" templatetype="default" style="width:200px " src="http://sohanews2.vcmedia.vn/k:2012/1350782211-hongque_thoitrang_eva--3--f7897/my-nhan-showbiz-va-lo-hong-ve-tam-nhan-thuc.jpg" rel="http://sohanews2.vcmedia.vn/2012/1350782211-hongque_thoitrang_eva--3--f7897.jpg" photoid="24109" id="img_24109" alt=""> 
```

那么，如何包装 img 或 object 标签或 input 标签。通过高亮元素 by rangy？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-29T17:44:10.280

CSS 类应用程序模块仅适用于文本节点，这是设计使然。但是，我可以看到它的价值，所以我打算对此做点什么。Rangy 错误跟踪器中有两个未解决的问题：

*   [http://code.google.com/p/rangy/issues/detail?id=83](http://code.google.com/p/rangy/issues/detail?id=83)
*   [http://code.google.com/p/rangy/issues/detail?id=48](http://code.google.com/p/rangy/issues/detail?id=48)

# c - 通过C程序获取Linux中的网络接口类型

> ID：14052224
> 
> 赞同：2
> 
> 时间：2012-12-27T09:19:32.630
> 
> 标签：c, linux, networking

如何从 Linux 中的 C 程序获取网络接口的类型名称？

我尝试使用`getifaddr`来访问网络接口，并且得到了我需要的一切，除了它的类型名称。有什么想法可以做到吗？

我还是 Linux 的新手，因此对任何变通方法或示例代码的任何评论都将不胜感激。

## 编辑

详细说明问题。基本上，在做的时候`ifconfig`我可以得到这样的东西：

```
eth0 链路封装：以太网 HWaddr 00:0C:29:40:93:9C
inet 地址：192.168.154.102 广播：192.168.154.255 掩码：255.255.255.0
inet6 地址：fe80::20c:29ff:fe40:939c/64 范围：链接
UP BROADCAST RUNNING MULTICAST MTU:1500 Metric:1
RX 数据包：14785 错误：0 丢弃：0 超限：0 帧：0
TX 数据包：429 错误：0 丢弃：0 超限：0 运营商：0
碰撞：0 txqueuelen：1000
RX 字节：961439 (938.9 KiB) TX 字节：71866 (70.1 KiB)
中断：67 基地址：0x2000

```

这是我理解的 eth0 是接口名称。虽然可以有多个网络接口（eth0、eth1、eth2）和多个虚拟接口（tap0、tap1 等）和无线接口，但它们都是以太网接口。

loopbacks 也一样，lo 作为接口名，它的接口是Local Loopback。

所以问题是，当我事先不知道使用了哪些接口以及有多少他们在机器里。

希望我能正确解释这一点。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-27T10:10:19.687

You might try to use RTNETLINK from Netlink([1](http://en.wikipedia.org/wiki/Netlink),[2](http://www.kernel.org/doc/man-pages/online/pages/man7/netlink.7.html)). See [Manipulating the Networking Environment Using RTNETLINK](http://www.linuxjournal.com/article/8498) for an exemple.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-27T10:31:28.397

There's no `ioctl` that returns the link encapsulation, if you `strace` ifconfig or have a look at its [source](http://sourceforge.net/projects/net-tools/) code you will see that it uses a table look-up to find the name of the link encapsulation. This is from net-tools source code, as you can see the names are statically initialized:

```
//lib/hw.c
void hwinit()
{
    loop_hwtype.title = _("Local Loopback");
    unspec_hwtype.title = _("UNSPEC");
#if HAVE_HWSLIP
    slip_hwtype.title = _("Serial Line IP");
    cslip_hwtype.title = _("VJ Serial Line IP");
    slip6_hwtype.title = _("6-bit Serial Line IP");
    cslip6_hwtype.title = _("VJ 6-bit Serial Line IP");
    adaptive_hwtype.title = _("Adaptive Serial Line IP");
#endif
#if HAVE_HWETHER
    ether_hwtype.title = _("Ethernet");
#endif
.... 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-28T02:35:02.910

A simple way would be:

> cat /sys/class/net/X/type

(where X is your netdev name, e.g. eth0)

Then compare the number to: [http://lxr.linux.no/linux+v3.0/include/linux/if_arp.h#L30](http://lxr.linux.no/linux+v3.0/include/linux/if_arp.h#L30)

for example:

> cat /sys/class/net/eth0/type

output:

> 1

=> where 1=ARPHRD_ETHER accoridng to if_arp.h header file.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-27T09:31:17.457

真正广泛的问题。

Under linux the OS itself can be considered a network interface, the so called "loopback interfaces" admit this kind of options and they are "network interfaces" even if they are virtual and not a real piece of hardware they look the same as your PCI network card or your USB dongle. if you are looking for the networking hardware is suggest to take a look at `lshw` or to spend time studying how the kernel interfaces itself with the networking resources.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-02-06T05:10:39.927

Unrelated to the question but, in case someone wants to find it on the shell here one way to find the wifi interfaces:

```
for iface in ` ifconfig | cut -f 1 -d ' ' | sort | grep -v '^$'`
do
if [ -d /sys/class/net/$iface/wireless ];then echo $iface ; fi
done 
```

# java - 如何编写可配置的 Java 变量创建

> ID：14052226
> 
> 赞同：-3
> 
> 时间：2012-12-27T09:19:38.823
> 
> 标签：java

一个新的 java 组件，假设将预定义变量列表发送给外部方。然后，用户将能够定义他们想要通过 xml 属性文件发送的变量（一组固定的变量）

问题是：预定义变量在一个类中，并且与它一起具有业务逻辑，我无法更改或利用（外部 api 的一部分）。例如如下：

```
public class DataColumn implement java.io.Serializable{
    public static final String _actionID = "ActionID";
    public static final String _actionName = "ActionName";
    public static final String _actionDesc = "ActionDescription";
    public static final DataColumn ActionDesc = new DataColumn (_actionDesc);
    public static final DataColumn ActionID = new DataColumn (_actionID);
    public static final DataColumn ActionName = new DataColumn (_actionName);

    ....and about 100 other variale more

    protected WebMediaReportColumn(java.lang.String value) {
       _value_ = value;
       _table_.put(_value_,this);
    } 
} 
```

用户将在 xml 文件中定义如下：

```
<interface>
    <fields isRequired="true">
        <field>ActionID</field>
        <field>ActionName</field>
        <field>ActionDescription</field>
     </fields>
</interface> 
```

为了设置要发送的变量，代码如下所示：

```
interface.setColumns(new DataColumn[] { 
    DataColumn.ActionID, DataColumn.ActionName, DataColumn.ActionDesc
    }
); 
```

问题是：如何最好地编写一个可以基于用户在属性文件中定义的程序，并相应地创建 Datacolumn[] 数组？ **不**使用 If else 块太长且难以维护。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T09:30:27.033

将所有这些语句写入属性文件。

```
actionID = ActionID
actionName = ActionName
actionDesc = ActionDescription
/*... and so on */ 
```

在您的代码中创建一个 Properties 对象并将此文件加载到其中。创建一个字符串数组并填充此属性对象的值。

```
 Properties p = new Properties();
  /*...load the file...*/
  String []columnData = new String[p.keySet().size()];
  int i=0;
  for(Object str : p.keySet()) {
    columnData[i++]=(String)p.getProperty((String)str);
  }

  /*now call the method and pass the array*/ 
  interface.setColumns(columnData); 
```

# sql - 从表中的两列中选择相同的数据，并使用一条sql语句显示所有数据

> ID：14052229
> 
> 赞同：-1
> 
> 时间：2012-12-27T09:19:51.253
> 
> 标签：sql, plsql, oracle10g, plsqldeveloper

我是 sql 领域的新手，我有一些问题。

如下表

```
Table Name:EM

ID    name    Birth   High
1     Tom     11/23   65
2     Mary    11/23   65
3     Bill    03/02   55
4     Liny    01/08   45
5     Kevin   05/16   50
6     Lee     05/16   50 
```

但我只需要如下数据

```
ID    name    Birth   High
1     Tom     11/23   65
2     Mary    11/23   65
3     Kevin   05/16   50
4     Lee     05/16   50 
```

我用傻瓜sql来获取这样的数据

```
select * from em where birth = '11/23' and high = '65';
select * from em where birth = '05/16' and high = '50'; 
```

请教我如何在一条sql语句中得到结果，非常感谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-27T09:25:52.717

你想要 IN

```
select * from em where (birth, high) in (('11/23','65'),('05/16','50')); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-27T09:26:53.733

用来`OR`组合它们：

```
select * from em where (birth = '11/23' and high = '65') or (birth = '05/16' and high = '50'); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-27T09:23:47.270

[你可以从这里开始学习 SQL](http://www.w3schools.com/sql/default.asp)

使用`IN`and在`BETWEEN`这里检查[IN 的教程，](http://www.w3schools.com/sql/sql_in.asp)并在此处[检查 BETWEEN 的教程](http://www.w3schools.com/sql/sql_between.asp)

这可能是您的查询

```
SELECT * FROM YOUR_TABLE WHERE COL1 IN (DATE_HERE,ID_HERE) AND/OR COL2 IN (DATE_HERE,ID_HERE) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-27T09:24:14.803

```
IN operator is used for adding multiples values

select * from em where birth in ('11/23','05/16') and high in ('65','50'); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-27T09:25:04.667

您可以使用 "or","in" 运算符

像这样：

```
 select * from em 
 where 
  birth = '11/23' or birth = '05/16' 
  and high = '65' or  high = '50'; 
```

# jquery - 匹配 highcharts 饼图中的 2 个数组值

> ID：14052230
> 
> 赞同：0
> 
> 时间：2012-12-27T09:19:53.380
> 
> 标签：jquery, json

我在这里使用highchart创建了饼图，然后我希望当点击饼图区域时，控制台将根据我使用“if else”设置的标准写入一些数据。

所以我有2个json数据在这里：

```
var json = {
    "data": [
        {
        "topic": "Manchester United F.C.",
        "id": "/en/manchester_united_fc",
        "type": "/soccer/football_team",
        "audience": [
            {
            "userid": "100003921730958",
            "source": "Manchester United",
            "category": "Professional sports team"}
        ]},
    {
        "topic": "Chelsea F.C.",
        "id": "/en/chelsea_fc",
        "type": "/soccer/football_team",
        "audience": [
            {
            "userid": "100003921730958",
            "source": "Frank Lampard",
            "category": "Athlete"},
        {
            "userid": "100003914111287",
            "source": "Chelsea Football Club",
            "category": "Professional sports team"}
        ]}
    ]
};

var jsonFB = {

    "user1": [
        {
        "id": "100003921730958",
        "name": "Tan Jercia",
        "favorite_teams": [
            {
            "id": "19034719952",
            "name": "Real Madrid C.F."},
        {
            "id": "7724542745",
            "name": "Manchester United"}
        ],
        "interested_in": [
            "female",
            "male"
            ],
        "likes": {
            "data": [
                {
                "name": "Corrinne May",
                "category": "Musician/band",
                "id": "17393005071",
                "created_time": "2012-07-04T05:56:47+0000"},
            {
                "name": "Men In Black",
                "category": "Movie",
                "id": "168169803229342",
                "created_time": "2012-06-06T21:21:19+0000"},
            {
                "name": "Pubbing",
                "category": "Interest",
                "id": "106265502743004",
                "created_time": "2012-05-28T07:04:17+0000"},
            {
                "name": "Sleeping",
                "category": "Public figure",
                "id": "102168219824412",
                "created_time": "2012-05-28T07:03:58+0000"},
            {
                "name": "Lionel Messi",
                "category": "Interest",
                "id": "105543199478544",
                "created_time": "2012-05-28T07:03:37+0000"},
            {
                "name": "David Villa Sánchez",
                "category": "Athlete",
                "id": "20714737025",
                "created_time": "2012-05-28T07:03:18+0000"},
            {
                "name": "Frank Lampard",
                "category": "Athlete",
                "id": "115714874568",
                "created_time": "2012-05-28T10:15:04+0000"},
            {
                "name": "Real Madrid C.F.",
                "category": "Professional sports team",
                "id": "19034719952",
                "created_time": "2012-05-28T07:02:57+0000"},
            {
                "name": "Manchester United",
                "category": "Professional sports team",
                "id": "7724542745",
                "created_time": "2012-05-28T07:02:22+0000"},
            {
                "name": "Badminton",
                "category": "Sport",
                "id": "112285278784684",
                "created_time": "2012-05-28T07:02:16+0000"},
            {
                "name": "Swimming",
                "category": "Sport",
                "id": "109717462380351",
                "created_time": "2012-05-28T07:02:13+0000"},
            {
                "name": "The Vampire Diaries - Tv Series/Books",
                "category": "Community",
                "id": "133372903419059",
                "created_time": "2012-05-28T06:37:38+0000"},
            {
                "name": "Gossip Girl",
                "category": "Tv show",
                "id": "8811587900",
                "created_time": "2012-05-28T06:37:38+0000"},
            {
                "name": "Dear John",
                "category": "Movie",
                "id": "154526009569",
                "created_time": "2012-05-28T06:37:37+0000"},
            {
                "name": "The Vow",
                "category": "Movie",
                "id": "131563483577190",
                "created_time": "2012-05-28T06:37:37+0000"},
            {
                "name": "Harry Potter",
                "category": "Movie",
                "id": "156794164312",
                "created_time": "2012-05-28T06:37:36+0000"},
            {
                "name": "Avengers",
                "category": "Movie",
                "id": "126757470715601",
                "created_time": "2012-05-28T06:37:36+0000"},
            {
                "name": "Batman: The Dark Knight",
                "category": "Movie",
                "id": "12887942787",
                "created_time": "2012-05-28T06:37:35+0000"},
            {
                "name": "The Transporter",
                "category": "Movie",
                "id": "105485349484433",
                "created_time": "2012-05-28T06:37:34+0000"},
            {
                "name": "Ip Man",
                "category": "Movie",
                "id": "104108312958644",
                "created_time": "2012-05-28T06:37:33+0000"},
            {
                "name": "How to Train Your Dragon",
                "category": "Movie",
                "id": "96698020019",
                "created_time": "2012-05-28T06:37:33+0000"},
            {
                "name": "Battleship",
                "category": "Movie",
                "id": "116119711759494",
                "created_time": "2012-05-28T06:37:32+0000"},
            {
                "name": "Inception",
                "category": "Movie",
                "id": "91290503700",
                "created_time": "2012-05-28T06:37:32+0000"},
            {
                "name": "John Carter",
                "category": "Movie",
                "id": "192790732230",
                "created_time": "2012-05-28T06:37:31+0000"},
            {
                "name": "Transformers 3",
                "category": "Movie",
                "id": "118936754809410",
                "created_time": "2012-05-28T06:37:31+0000"},
            {
                "name": "Snow White and the Huntsman",
                "category": "Movie",
                "id": "186450181387455",
                "created_time": "2012-05-28T06:37:30+0000"},
            {
                "name": "This Means War",
                "category": "Movie",
                "id": "290847887611269",
                "created_time": "2012-05-28T06:37:29+0000"},
            {
                "name": "Harry Potter",
                "category": "Book",
                "id": "107641979264998",
                "created_time": "2012-05-28T06:37:29+0000"},
            {
                "name": "Love Story",
                "category": "Book",
                "id": "109789932381273",
                "created_time": "2012-05-28T06:37:28+0000"},
            {
                "name": "Justin Bieber",
                "category": "Musician/band",
                "id": "67253243887",
                "created_time": "2012-05-28T06:37:28+0000"},
            {
                "name": "Kelly Clarkson",
                "category": "Musician/band",
                "id": "18481194560",
                "created_time": "2012-05-28T06:37:26+0000"},
            {
                "name": "Jessie J",
                "category": "Musician/band",
                "id": "145300805513355",
                "created_time": "2012-05-28T06:37:26+0000"},
            {
                "name": "Katy Perry",
                "category": "Musician/band",
                "id": "7126051465",
                "created_time": "2012-05-28T06:37:25+0000"}
            ],
            "paging": {
                "next": "https://graph.facebook.com/100003921730958/likes?limit=5000&offset=5000"
            }
        }}
    ]
};​ 
```

所以基本上我希望我通过匹配我尝试使用循环数组匹配方法的两个用户 ID 单击饼图区域时检索用户的名称并写入控制台。但是它不起作用。:(

```
plotOptions: {
    pie: {
        allowPointSelect: true,
        cursor: 'pointer',
        point: {
            events: {
                click: function() {
                    for (i = 0; i < jsonFB.user1[i]; i++) {

                        for (j = 0; j < json.data[j].audience[j]; j++) {

                            if (jsonFB.user1[i].id == json.data[j].audience[j].userid) {

                                var name = jsonFB.user1[i].name;
                                console.log(name);
                            }
                            else {

                                console.log("false");
                            }

                        }
                    }

                }
            }
        },​ 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T09:49:16.427

问题在于您的`for`条件：

```
for (i = 0; i < jsonFB.user1[i]; i++) {
    for (j = 0; j < json.data[j].audience[j]; j++) { 
```

我认为您的意思是遍历所有`user1`s 和 ( `data`s and) `audience`s，对吗？

```
for (i = 0; i < jsonFB.user1.length; i++) {
    for (k = 0; k < json.data.length; k++) {
        for (j = 0; j < json.data[k].audience.length; j++) { 
```

现在你的（改编的）`if`将工作：

```
if (jsonFB.user1[i].id == json.data[k].audience[j].userid) { 
```

但是，我必须指出，这只会确保每次`json`和`jsonFB`数据匹配时将用户名打印到控制台一次。与图表中单击的内容没有任何关系。检查[Highcharts API](http://api.highcharts.com/highcharts#chart.events.click)。恐怕你必须自己制定细节，但我建议从`event.point`（你需要的信息似乎在那里）开始：

```
click: function(event) {
    console.log(event.point); 
```

[这个演示](http://jsfiddle.net/gh/get/jquery/1.7.2/highslide-software/highcharts.com/tree/master/samples/highcharts/demo/line-ajax/)也可能会有所帮助。

**更新：**如果您有多个用户（例如`user1`等`user2`），您可以像这样迭代它们：

```
$.each(jsonFB, function(prop, value) {
    if ( prop.indexOf("user") == 0 ) { // Check if the name starts with "user"
        for (i = 0; i < value.length; i++) {...} // Replaces jsonFB.user1.length
    }
}); 
```

# javascript - 仅刷新页面问题的 div

> ID：14052233
> 
> 赞同：1
> 
> 时间：2012-12-27T09:20:03.000
> 
> 标签：javascript, jquery, ajax

我有一页（index.php），它被分成几个部分（div）。我喜欢单击链接以刷新特定的 div，但我的问题是该值不是通过 url（使用 get 方法）发送到下一页（例如在 manage_team_teacher2.php 中）。例如 div 的 id 是 item4_section10。

这是链接

```
<a class="nav-link" href="manage_team_teacher2.php?id_team=<?= $row['id_team'];?>">manage</a> 
```

这是jquery代码

```
<script type="text/javascript">
 $(function() {
     $('.nav-link').click( function() {
        var href = $(this).attr('href');
        $('#item4_section10').load(href, function() {

        });
        return false; 
     });
 });
</script> 
```

非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T14:34:12.697

您可以为此创建链接和 iFrame 组合。您可以使用以下 HTML

```
<a href="manage_team_teacher2.php?id_team=<?= $row['id_team'];?>" id="RefreshButton" target="DataFrame">Refresh</a>
<iframe id="DataFrame" name="DataFrame" src="" width="200px" height="200px" frameborder="0">
        <p>Your browser does not support iframes.</p>
</iframe> 
```

并使用以下 jQuery 刷新链接点击

```
$(function () {
    $("#RefreshButton").click(function () {
        var href = $("#RefreshButton").attr('href');
        $("#DataFrame").attr('src', ''); //
        $("#DataFrame").attr('src', '/* Mention the atrget url here */');
        return false;
    });
} 
```

# android - Android tablelayout减少两行之间的差距

> ID：14052235
> 
> 赞同：2
> 
> 时间：2012-12-27T09:20:09.180
> 
> 标签：android, android-layout

如图所示，我想减少两行之间的间隙（用红色标记），以便我的编辑文本显示在文本下方。

![在此处输入图像描述](../Images/61753897e543c024f878d3dac3e9b78b.png)

我的代码

> ```
> <TableRow
>     android:id="@+id/tableRow1"
>     android:layout_width="wrap_content"
>     android:layout_height="wrap_content"
>     android:padding="2dip" > 
>       <TextView
>           android:id="@+id/textView1"
>           android:text="@string/projectName"
>           android:textSize="16sp"
>           android:textAppearance="@string/projectName" 
>           android:textColor="@color/text_color"/>           
> </TableRow>
> 
> <TableRow
>     android:id="@+id/tableRow2"
>     android:layout_width="wrap_content"
>     android:layout_height="wrap_content"
>     android:padding="2dip">        
> 
>      <EditText
>          android:id="@+id/editText"
>          android:layout_width="0dp"
>          android:layout_height="35dp"
>          android:inputType="text"            
>          android:singleLine="true" 
>          android:background="@drawable/editbox_background_normal"
>          android:layout_weight="1"
>          android:padding="5dip"
>          />
> 
> </TableRow>  
>       </TableLayout> 
> ```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T09:23:02.957

摆脱所有这些填充物

```
 android:padding="2dip"
   android:padding="5dip" 
```

您可以使用左右填充。
试试这个

```
<TableRow
    android:id="@+id/tableRow1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
 > 
      <TextView
          android:id="@+id/textView1"
          android:text="@string/projectName"
          android:textSize="16sp"
          android:textAppearance="@string/projectName" 
          android:textColor="@color/text_color"/>           
</TableRow>

<TableRow
    android:id="@+id/tableRow2"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
>        

     <EditText
         android:id="@+id/editText"
         android:layout_width="0dp"
         android:layout_height="35dp"
         android:inputType="text"            
         android:singleLine="true" 
         android:background="@drawable/editbox_background_normal"
         android:layout_weight="1"
         />

</TableRow>  
      </TableLayout> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T09:35:38.737

小伙伴试试这个，一定能帮到你

```
<TableRow
        android:id="@+id/tableRow1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:padding="2dip"
         android:layout_marginBottom="10dp"> 
          <TextView
              android:id="@+id/textView1"
              android:text="@string/projectName"
              android:textSize="16sp"
              android:textAppearance="@string/projectName" 
              android:textColor="@color/text_color"/>           
    </TableRow>

    <TableRow
        android:id="@+id/tableRow2"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:padding="2dip"
     android:layout_marginTop="10dp">        

         <EditText
             android:id="@+id/editText"
             android:layout_width="0dp"
             android:layout_height="35dp"
             android:inputType="text"            
             android:singleLine="true" 
             android:background="@drawable/editbox_background_normal"
             android:layout_weight="1"
             android:padding="5dip"
             />

    </TableRow>  
          </TableLayout> 
```

# android - Android：小部件加载图像

> ID：14052240
> 
> 赞同：0
> 
> 时间：2012-12-27T09:20:29.993
> 
> 标签：android, android-widget, android-asynctask, imageview

我无法找到如何将图像下载到我的小部件！

在我的小部件中，我使用 url、标题加载 AsyncTask json，然后在 TextView 中显示标题，我需要从 url 加载图像。

我试过这个，但图像加载，现在显示

```
class LoadImages extends AsyncTask<Void, Void, Bitmap>{
        @Override
        protected Bitmap doInBackground(Void... params) {
            Bitmap bitmap = null;
            InputStream in = null;
            BufferedOutputStream out = null;

            try {
                in = new BufferedInputStream(new URL("http://mysite/simple.img").openStream());

                final ByteArrayOutputStream dataStream = new ByteArrayOutputStream();
                out = new BufferedOutputStream(dataStream);
                out.flush();

                final byte[] data = dataStream.toByteArray();
                BitmapFactory.Options options = new BitmapFactory.Options();
                //options.inSampleSize = 1;

                bitmap = BitmapFactory.decodeByteArray(data, 0, data.length,options);
                Log.e("Log", "Yeah");
            } catch (IOException e) {
                Log.e("Log", "Could not load Bitmap from: " + "mysiteg");
            }

            return bitmap;
        }
    } 
```

在更新时我称之为

```
 LoadImages load = new LoadImages();
        load.execute();
        Bitmap bitmap = load.get();
        update.setImageViewBitmap(R.id.imageView0, bitmap); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-28T11:43:41.690

您应该重写 LoadImages 类中的 onPostExecute 方法，并在该方法中将位图设置为您的 ImageView。当 LoadImages 任务完成后，它会调用 onPostExcute 方法。考虑使用 Wea​​kReference 包装您的 ImageView 以获得更好的性能。

# math - 计算球体撞击杯子边缘的垂直角度

> ID：14052242
> 
> 赞同：-1
> 
> 时间：2012-12-27T09:20:43.107
> 
> 标签：math, geometry, projection

我正在解决一个问题，其中一个已知半径的球体垂直掉落并撞击杯子的边缘。我需要计算出偏转角，这将是球体接触发生位置的函数。即，如果接触点在死点（极点），则偏转角为 0。离接触点越远，偏转角越大。

在整个问题的制定中（这只是其中的一部分），我严格使用在 xy 平面上的投影，所以我拥有的唯一信息是关于投影圆的信息。我知道球圆和杯圆的中心位置、它们的半径以及（向下投影的）重叠的大小。

如果我只有从极点到接触点的弦长，我可以计算偏转角。我怎样才能得到这个和弦的长度，从 xy 投影给定？附图显示了该问题的一些表述方式。

![问题总结](../Images/6df9c4243d7867cbc57bc9843055bb0f.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-28T10:08:51.797

从我在 math.stackexchange.com 上的正确转发中复制的答案

> 非常感谢我的朋友 Andrew McHugh 博士帮助我找到解决方案。我忽略了我可以通过知道从杯子边缘到球垂直轴的水平距离 (X) 来计算角度 theta。Theta 是 X 与半径 (r) 之比的反正弦值。在 xy 平面投影中，X 是半径 - 连接重叠透镜区域 (d) 的尖端的线。因此，theta = arcsin((rd)/r)。

# objective-c - 每次新运行时 CPU 频率都不同

> ID：14052243
> 
> 赞同：0
> 
> 时间：2012-12-27T09:20:46.790
> 
> 标签：objective-c, ios, xcode

我使用以下代码来获取 cpu 频率。

```
-(int) returnCPUFreq
{
    size_t length;
    int mib[6];
    int result;

    mib[0] = CTL_HW;
    mib[1] = HW_CPU_FREQ;
    length = sizeof(result);

    sysctl(mib, 2, &result, &length, NULL, 0);

    return  result;
} 
```

它给出了 6 位代码，并且每次运行应用程序时都会有所不同。即输出是第一次 644311 ，第二次 303921 .....

这段代码正确吗？每次运行应用程序时，值是否会有所不同？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-27T09:31:31.630

你的答案是正确的。您可以通过检查 sysctl(mib, 2, &result, &length, NULL, 0) < 0 来检查 sysctl 是否返回错误，但这不会改变频率变化的任何内容。这是因为 Apple 不允许读取其所有产品的频率。

当你需要它来确定你可以启用多少细节或类似的东西时，我会检查硬件模型并在我放置所有可用硬件模型的 nsdictionary 中查找 cpu 频率。

# c - gdb 调试函数不在调用堆栈中

> ID：14052248
> 
> 赞同：0
> 
> 时间：2012-12-27T09:21:21.633
> 
> 标签：c, debugging, gdb

我有一个类似的代码片段：

```
int test( /* some arguments */)
{
    ret = func(/* some arguments */)
    if (ret < 0) 
    {
       /* do this */
    }

    /* do this */

    return ret;
} 
```

对于函数`func`内部的某些错误条件，该函数返回 -1。这种错误情况在函数被调用的 100 次中发生一次`test`- 所以我将断点放在`if (ret < 0)`一行中。现在我想调试函数内部发生的事情`func()`。`test`当断点在所述行的函数中被击中时，我该怎么做。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-27T09:23:01.897

我会在

```
return -1; 
```

**在函数本身内**。以你正在做的方式，函数的堆栈框架已经被破坏了。如果您可以移动代码指针，您可以使用相同的参数再次运行该函数，但如果该函数有副作用，它可能不会以相同的方式做出反应。我不知道该怎么做，也许它需要[跳转](http://www.toptip.ca/2010/06/gdb-skip-instructions-or-lines-while.html)命令。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T09:46:57.897

行为是确定性的吗？如果是这样，断点命中计数器对此很有用。您可以在生成错误之前在某处设置一个非常大的计数断点，在返回的错误上也中断，查看计数器，然后将计数更改为在 count-1 处中断。然后，您可以在错误发生时对其进行调试，并且断点可以位于代码中的任何位置，而不仅仅是在确切的点或错误处。

条件断点未得到充分利用......

# c# - 对于 ASP.Net 网站中的 ViewStateEncryption，EnableViewStateMAC=true 是强制性的吗？

> ID：14052249
> 
> 赞同：6
> 
> 时间：2012-12-27T09:21:27.020
> 
> 标签：c#, asp.net, .net, encryption, viewstate

我目前正在修复我们的 ASP.net 网站应用程序中的一些安全问题。

问题之一`ViewState`是未加密。

所以我确实在 StackOverFlow 和其他地方检查了如何加密 viewState，我使用并在 Web.config 中`<pages viewStateEncryptionMode="Always" />`添加了一个像这样的 3DES 机器密钥。`<machineKey validation="3DES" />`

**我想知道这`"EnableViewStateMAC=true"`是否也是强制性的？**因为在我在网上找到的一些建议的解决方案中提到了这一点。但是，在我的检查中，我发现即使没有这个加密也能正常工作。

*[注意：我必须在应用程序级别 (Web.config) 进行这些更改，因为进行单个页面更改不是此应用程序的实际解决方案。]*

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-01-08T07:28:18.947

即使启用了加密，也永远不要将 EnableViewStateMac 设置为 false。MAC 保证客户端不能恶意篡改 ViewState 的内容。（加密本身不足以保证这一点；MAC 是必要的。）

EnableViewStateMac 属性将在产品的未来版本中删除，因为没有正当理由将其设置为“假”。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-05-08T10:01:14.747

以防万一：

> **从 ASP.NET 4.5.2 开始，运行时强制 EnableViewStateMac = true**

更多详细信息：[ASP.NET 4.5.2 和 EnableViewStateMac](http://blogs.msdn.com/b/webdev/archive/2014/05/07/asp-net-4-5-2-and-enableviewstatemac.aspx)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-09-12T10:52:27.850

You might want to note that as of September 2014

All versions of the ASP.NET runtime 1.1 - 4.5.2 now forbid setting

> <%@ Page EnableViewStateMac="false" %>

and

> <pages enableViewStateMac="false" />

[http://blogs.msdn.com/b/webdev/archive/2014/09/09/farewell-enableviewstatemac.aspx](http://blogs.msdn.com/b/webdev/archive/2014/09/09/farewell-enableviewstatemac.aspx)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-27T10:28:54.923

当您托管多台服务器时，这将是一个问题。因为机器密钥不同。

如果您的项目在单台机器上运行。EnableViewStateMAC=true 是安全的。

使用 enableViewStateMac 要求将连续的请求转发到同一台服务器（即服务器关联）。此功能用于帮助防止篡改页面的视图状态；但是，它是基于当前服务器上自动生成的验证密钥来执行此操作的。从此密钥生成消息验证码 (MAC)，并在 ViewState 中将其发送回浏览器。问题是，如果执行 POST 返回并转到不同的服务器，您将收到一条不错的小错误消息，说“Corrupt View State”。

要解决此问题，您可以在元素中将 enableViewStateMac 设置为 false，或者在所有服务器（在场中）的元素中为该元素中的 validationKey 属性指定一个通用值。

顺便说一句，文档说默认情况下这是关闭的。这是不正确的！去检查machine.config！

# asp.net - 根据在文本框中输入的 fromdate 和 enddate 在 gridview 中显示记录

> ID：14052250
> 
> 赞同：0
> 
> 时间：2012-12-27T09:21:30.200
> 
> 标签：asp.net, sql

我有 3 个文本框 - 名称、FromDate 和 StartDate。当我在第一个文本框中输入名称并单击按钮时，它应该显示对应于该记录的记录。如果我输入从日期到日期，它应该显示其中包含出生日期的记录输入值的范围。名称搜索正在工作。但是基于日期的搜索不起作用..我想要在 asp.net 中的代码。请帮助...

```
ALTER PROCEDURE [dbo].[usp_GetSearchResume]                          
@Name varchar(50)=''      
,@FromDate varchar(15)='',                                          
@ToDate varchar (15)=''                                          
AS                          
BEGIN                          
DECLARE @SQL AS VARCHAR(8000) 
SET @SQL = 'SELECT Name,Address,Gender,Marital_Status,Email_Id,Country,State,District,Current_Salary,Total_Salary,Experience,Current_Position,                     
convert(varchar(15),DOB,101) as DOB from Resume'
if(@Name <> '')                          
BEGIN                          
SET @SQL = @SQL + ' where Name like ''%'+  @Name + '%'''                          
END   

IF(@FromDate<>'' and @ToDate<>'' )                                          
begin                                          
set @SQL=@SQL+'or DOB between '''+ CONVERT(varchar(12),@FromDate,101) +''' and ''+  CONVERT(varchar(12),@ToDate,101) +''' '                                               
End                       
print @SQL        
--select (@SQL)                          
exec (@SQL)                          
END 
```

如果我不输入姓名并且我输入日期和日期，它应该显示基于该日期的记录...请帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T09:54:55.873

请通过以下方法减少动态字符串查询问题。

它将查找过去 10 天的记录

```
declare @fromDate datetime = GETDATE()-10
declare @ToDate datetime = GETDATE()

where 1= case   when @fromDate IS NOT NULL AND @ToDate IS NULL AND CreatedOn >
@fromDate  THEN 1 
            when @fromDate IS NULL AND @ToDate IS NOT NULL AND CreatedOn <   @ToDate  THEN 1 
            when CreatedOn between @fromDate AND @ToDate THEN 1 end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T10:01:14.417

aspx 页面上的代码如下：

```
</head>
<body>
<form id="form1" runat="server">
<div>
    <asp:TextBox ID="txtName" runat="server"></asp:TextBox>
    <asp:TextBox ID="txtFromDate" runat="server"></asp:TextBox>
    <asp:TextBox ID="txtToDate" runat="server"></asp:TextBox>

    <asp:SqlDataSource ID="SqlDataSource1" runat="server">
    <SelectParameters>
     <asp:ControlParameter ControlID="txtName" DefaultValue="%" Name="Name" PropertyName="Text" />
     <asp:ControlParameter ControlID="txtFromDate " DefaultValue="%" Name="FromDate" PropertyName="Text"/>
     <asp:ControlParameter ControlID="txtToDate" DefaultValue="%" Name="txtToDate" PropertyName="Text"/>
    </SelectParameters>
    </asp:SqlDataSource>
    <asp:GridView ID="GridView1" runat="server" DataSourceID="SqlDataSource1">
    </asp:GridView>
    <asp:Button ID="Button1" runat="server" Text="Button" onclick="Button1_Click" />
</div>
</form> 
```

按钮点击事件的代码如下：

```
 protected void Button1_Click(object sender, EventArgs e)
  {
    string name = txtName.Text;
    string fromdate = txtFromDate.Text;
    string todate = txtToDate.Text;

    SqlDataSource1.SelectParameters.Clear();
    SqlDataSource1.SelectParameters.Add("@Name", name);
    SqlDataSource1.SelectParameters.Add("@FromDate" , fromdate);
    SqlDataSource1.SelectParameters.Add("@ToDate", todate);
    GridView1.Visible = true;
 } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-27T10:25:22.770

仅在文本框不为空时使用以下修改后的存储过程并添加参数。

```
ALTER PROCEDURE [dbo].[usp_GetSearchResume]                          
@Name varchar(50)=NULL     
,@FromDate datetime=NULL,                                          
@ToDate datetime =NULL                                          
AS                          
BEGIN                         

SELECT  Name,Address,Gender,Marital_Status,Email_Id,Country,State,
        District,Current_Salary,Total_Salary,Experience,Current_Position,                     
        convert(varchar(15),DOB,101) as DOB from Resume
where Name like  '%'+ISNULL(@Name,Name)+'%' 
or DOB between  ISNULL(@FromDate,DOB) and  ISNULL(@ToDate,DOB)

END 
```

.cs 页面

```
 SqlConnection con = new SqlConnection(path);
            SqlCommand cmd = new SqlCommand("usp_GetSearchResume", con);

        cmd.CommandType = CommandType.StoredProcedure; 

        if (!string.IsNullOrWhiteSpace(txtName.Text))
        {
            cmd.Parameters.Add("@Name", SqlDbType.VarChar).Value = txtNames.Text; 
        }
        if (!string.IsNullOrWhiteSpace(txtFrom.Text))
        {
            DateTime str1 = Convert.ToDateTime(txtFrom.Text);
            cmd.Parameters.Add("@FromDate", SqlDbType.DateTime).Value = str1;
        }
        if (!string.IsNullOrWhiteSpace(txtTo.Text))
        {
             DateTime str2 = Convert.ToDateTime(txtTo.Text);           
             cmd.Parameters.Add("@ToDate", SqlDbType.DateTime).Value = str2;
        } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-27T10:25:33.590

更改您的存储过程，如下所示......

```
Alter PROCEDURE [dbo].[usp_GetSearchResume]         
@Name varchar(50)='',
@FromDate varchar(15)='',
@ToDate varchar (15)=''      
AS   BEGIN 
DECLARE @SQL AS VARCHAR(8000)  
SET @SQL = 'SELECT Name,Address,Gender,Marital_Status,Email_Id,Country,State,District,Current_Salary,Total_Salary,Experience,Current_Position, convert(varchar(15),DOB,101) as DOB from Resume' 
if(@Name <> '')    
 BEGIN            
           SET @SQL = @SQL + ' where Name like ''%'+  @Name + '%'''                           END   

IF(@FromDate<>'' and @ToDate<>'' )                                   
begin        
  if(@Name <> '')    
    BEGIN           
      set @SQL=@SQL+'or convert(varchar(15),DOB,101) between '''+ @FromDate
+''' and ''' +  @ToDate +''' ' 
    END    
  ELSE 
    BEGIN  
      set @SQL=@SQL+' Where convert(varchar(15),DOB,101) between '''+ @FromDate +''' and ''' +  @ToDate +''' '  
    END     
End                        
print @SQL        
--select (@SQL)          
exec (@SQL)                   
END 
```

# magento - Magento 查找结帐方法

> ID：14052253
> 
> 赞同：0
> 
> 时间：2012-12-27T09:21:41.173
> 
> 标签：magento

如何找到[结帐](http://docs.magentocommerce.com/Mage_Sales/Mage_Sales_Model_Quote.html#getCheckoutMethod)方式是“客人”还是“注册”。

`getCheckoutMethod`已弃用。因此建议使用它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T10:17:51.330

它在哪里被弃用？最新的 magento 1.7.0.2 似乎使用它并定义它，并且没有提及任何关于弃用此方法的内容

```
Mage::getSingleton('checkout/type_onepage')->getCheckoutMethod(); 
```

此方法在多个地方定义

```
grep ' getCheckoutMethod' app/code -rsn
app/code/core/Mage/Checkout/Model/Type/Onepage.php:165:    public function getCheckoutMethod()
app/code/core/Mage/Paypal/Model/Express/Checkout.php:661:    public function getCheckoutMethod() 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-09-27T11:33:58.943

getCheckoutMethod 通过报价模型被弃用，因此通过 checkout_onepage 模型不被弃用。

```
/**
 * Return quote checkout method code
 *
 * @deprecated after 1.4 beta1 it is checkout module responsibility
 * @param boolean $originalMethod if true return defined method from begining
 * @return string
 */
public function getCheckoutMethod($originalMethod = false)
{
    if ($this->getCustomerId() && !$originalMethod) {
        return self::CHECKOUT_METHOD_LOGIN_IN;
    }
    return $this->_getData('checkout_method');
} 
```

# c# - 使用 C# 按多列对数据表进行排序

> ID：14052254
> 
> 赞同：10
> 
> 时间：2012-12-27T09:21:44.660
> 
> 标签：c#, sorting, datatable, .net-2.0

我有一个名为`foldername`,的列的数据表`documentname`。数据如下：

```
FolderName  DocumentName
Folder1     HR[D] Document
Folder1     ___----'
Folder1     Asp_example.pdf
Folder2     SD
Folder3     Heavy_weight
Folder3     Accesorial Services 
```

如何`alphabetically`在`.Net Framework 2.0`.

我们尝试的解决方案如下，但由于它包含超过 1200000 条记录而花费了太多时间。

```
int counter=0;

while (counter < searchDT.Rows.Count){
   string FolderName = Convert.ToString(searchDT.Rows[counter]["Folder Name"]);

   string exp = "[Folder Name] like '" + FolderName + "'";

   if (FolderName.Contains("%") || FolderName.Contains("_") || FolderName.Contains("[]") ||      FolderName.Contains("'"))

      exp = "[Folder Name] like '" + EscapeLikeValue(FolderName) + "'";

   string sortExpression = "[Document Name] ASC";

   DataRow[] drfoldername = searchDT.Select(exp, sortExpression);

   foreach (DataRow row in drfoldername)
     drfoldernameDT.ImportRow(row);

   counter += drfoldername.Length;

 } 
```

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2012-12-27T09:29:33.450

```
DataTable dt = new DataTable();

DataView dv = new DataView(dt);
dv.Sort = "FolderName, DocumentName ASC"; 
```

试试看。它将首先对 进行排序`FolderName`，然后对 进行排序`DocumentName`。

如果您需要将其发送到屏幕上的组件，您可以像使用`DataTable`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-10-06T15:45:28.380

Here was my solution to this problem:

```
Datatable FI = new Datatable();
DataView viewFI = new DataView(FI);
viewFI.Sort = "ServiceDate, ServiceRoute";
DataTable OFI= viewFI.ToTable(); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-27T09:28:50.240

你试过 DataView.Sort 吗？

```
dt.DefaultView.RowFilter = "FolderName , DocumentName ASC";
dt = dt.DefaultView.ToTable(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-27T11:21:00.133

如果您使用数据表绑定 dgv，则可以使用以下操作：

数据表 dtable = (DataTable) dgv.DataSource; dtable.DefaultView.Sort =

或者检查这个：

[http://www.codeproject.com/csharp/datagridsort.asp](http://www.codeproject.com/csharp/datagridsort.asp)

谢谢

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-01-25T12:41:41.277

您可以使用

```
oDataSet.Tables[0].DefaultView.Sort = "Column1 ASC "; 
```

# android - ListView 未更新 onNotifyDataSetChanged()

> ID：14052257
> 
> 赞同：1
> 
> 时间：2012-12-27T09:21:51.960
> 
> 标签：android, listview

在我的应用程序中，这是我的活动。在计时器内，我正在更新列表视图。即使在 notifyDataSetChanged() 方法之后，我的列表视图也没有更新。

```
protected void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);
        setContentView(R.layout.nodes);
        mListView = (ListView)findViewById(R.id.node_list);
        mNodes = new ArrayList<String>();
        mSentStatus = new ArrayList<String>();
        mRecvStatus = new ArrayList<String>();
        doTimerTask();
        mNodeList = new NodeListViewCustomAdapter(getParent(), mNodes, mSentStatus, mRecvStatus);
        mListView.setAdapter(mNodeList);
        mListView.setOnItemClickListener(this);
    }
    private void doTimerTask() {
        mTimer = new Timer();
        mTimer.scheduleAtFixedRate(new TimerTask() {

            @Override
            public void run() {

                runOnUiThread(new Runnable() {
                    public void run() {
                        mNodes = getNodeListfromPeard();
                        mSentStatus = getSentStatusFromPeard();
                        mRecvStatus = getRecvStatusFromPeard();
                        mNodeList.notifyDataSetChanged();
                    }
                });
            }
        }, delay, period);

    }
    protected ArrayList<String> getRecvStatusFromPeard() {

        ArrayList<String> recvStatusList =  new ArrayList<String>();
        recvStatusList.add("|");
        recvStatusList.add("||");
        return recvStatusList;
    }
    protected ArrayList<String> getSentStatusFromPeard() {
        ArrayList<String> sentStatusList = new ArrayList<String>();
        sentStatusList.add("|");
        sentStatusList.add("||");
        return sentStatusList;
    }
    protected ArrayList<String> getNodeListfromPeard() {

     ArrayList<String> nodeList = new ArrayList<String>();
     nodeList.add("node1");
     nodeList.add("node2");
        return nodeList;
    }

public class NodeListViewCustomAdapter extends BaseAdapter {
    LayoutInflater inflater;
    private ArrayList<String> mNodeTitle;
    Activity mActivity;
    private ArrayList<String> mSentStatus;
    private ArrayList<String> mRecvStatus;

    public NodeListViewCustomAdapter(Activity aContext,ArrayList<String> aTitle,ArrayList<String> sentStatus,ArrayList<String> recvStatus ){
        super();
        mActivity = aContext;
        this.mNodeTitle = aTitle;
        this.mSentStatus = sentStatus;
        this.mRecvStatus = recvStatus;
        this.inflater = (LayoutInflater)aContext.getSystemService(Context.LAYOUT_INFLATER_SERVICE);

    }
    @Override
    public int getCount() {
        return mNodeTitle.size();
    }

    @Override
    public Object getItem(int position) {
        // TODO Auto-generated method stub
        return null;
    }

    @Override
    public long getItemId(int position) {
        // TODO Auto-generated method stub
        return 0;
    }
    public static class ViewHolder
    {
        TextView txtViewnodeTitle;
        TextView sentStatustxtView;
        TextView recvStatustxtView;
    }

    @Override
    public View getView(int position, View convertView, ViewGroup parent) {
        ViewHolder holder;
        if(convertView==null)
        {
            holder = new ViewHolder();
            convertView = inflater.inflate(R.layout.nodelistitem_row, null);

            holder.txtViewnodeTitle = (TextView) convertView.findViewById(R.id.txtViewnodeTitle);
            holder.sentStatustxtView = (TextView) convertView.findViewById(R.id.sentstatustxtView);
            holder.recvStatustxtView = (TextView) convertView.findViewById(R.id.recvstatustextView);
            convertView.setTag(holder);
        }
        else{
            holder=(ViewHolder)convertView.getTag();
        }

        holder.txtViewnodeTitle.setText(mNodeTitle.get(position));
        holder.sentStatustxtView.setText(mSentStatus.get(position));
        holder.recvStatustxtView.setText(mRecvStatus.get(position));

        return convertView;
    }

} 
```

但是当我在数组列表中一一添加时，它会更新。请帮帮我

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T09:35:19.250

将您的 runOnUiThread 更改为如下

```
 runOnUiThread(new Runnable() {
                        public void run() {
                            mNodes = getNodeListfromPeard();
                            mSentStatus = getSentStatusFromPeard();
                            mRecvStatus = getRecvStatusFromPeard();
                            mNodeList = new NodeListViewCustomAdapter(getParent(), mNodes, mSentStatus, mRecvStatus);
mListView.setAdapter(mNodeList);
                        }
                    }); 
```

或者

覆盖适配器中的 notifyDatasetChanged 方法

```
public void notifyDatasetChanged(){

        this.mNodeTitle = ActivityName.this.mNodes;
        this.mSentStatus = ActivityName.this.mSentStatus;
        this.mRecvStatus = ActivityName.this.mRecvStatus;
        super.notifyDatasetChanged(); 

    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T09:32:40.407

您在构造函数中传递数据

```
 mNodeList = new NodeListViewCustomAdapter(getParent(), mNodes, mSentStatus, mRecvStatus); 
```

如果您要使用`mNodeList.notifyDataSetChanged();`，那么您的数据将被使用，您已经在构造函数中传递了数据并且数据不会改变，这就是为什么会出现旧数据。

有两种方法可以刷新列表视图。

**1）再次SetAdaper而不是notidyDataSetChanged()**

```
mNodeList = new NodeListViewCustomAdapter(getParent(), mNodes, mSentStatus, mRecvStatus);
mListView.setAdapter(mNodeList); 
```

**2)notidyDataSetChanged()**

--不要在构造函数中传递数据

--声明所有全局数据并将其用于在列表视图中显示`NodeListViewCustomAdapter`

--更新全局数据和使用`notidyDataSetChanged()`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-27T09:36:48.817

用这个 ：

```
mNodeList = new NodeListViewCustomAdapter(getParent(), mNodes, mSentStatus, mRecvStatus);
mListView.setAdapter(mNodeList); 
```

代替 ：

```
mNodeList.notifyDataSetChanged(); 
```

谢谢。

# node.js - 在 node.js amdefine 中使用 RequireJS 插件

> ID：14052262
> 
> 赞同：2
> 
> 时间：2012-12-27T09:22:15.410
> 
> 标签：node.js, plugins, requirejs

我创建了一个简单的 requireJS 插件。

它在浏览器中运行良好，但在 nodejs 中却不行...插件在[此处](https://github.com/inf3rno/bb-validation/blob/master/src/validation.js)可用。

作为插件而不仅仅是模块的当前代码是这样的：

```
if (typeof define !== 'function')
    var define = require('amdefine')(module);

define(function (require, exports, module) {
    var _ = require("underscore"),
        Backbone = require("backbone");

    ...

    var plugin = {
        load:function (name, require, load, config) {
            var resources = this.parseResources(name);
            require(resources, function () {
                var localValidator = global.Validator.extend({});
                _.each(arguments, function (resource) {
                    localValidator.customize(resource);
                }, this);
                var local = _.extend({}, global, {
                    Validator:localValidator,
                    Model:global.Model.extend({
                        Validator:localValidator
                    }),
                    SyncModel:global.SyncModel.extend({
                        Validator:localValidator
                    })
                });
                load(local);
            });
        },
        parseResources:function (name) {
            if (name == "")
                return [];
            return name.split("+");
        }
    };

    var global = {
        version:"1.0.1",
        View:View,
        Aggregator:Aggregator,
        Messenger:Messenger,
        Model:AsyncModel,
        SyncModel:SyncModel,
        Validator:Validator,
        Runner:Runner,
        DependencyResolver:DependencyResolver,
        load:plugin.load.bind(plugin)
    };

    module.exports = global;

}); 
```

我尝试用nodejs jasmine调用它来单元测试它是否有效，但它显示找不到文件名：

```
if (typeof define !== 'function') { var define = require('amdefine')(module, require) }
require("./validation"); //works
require("./validation!./basicTests"); //does not work, but the plugin and path is ok... 
```

堆：

```
 Message:
     Error: Cannot find module './validation!./basicTests'
   Stacktrace:
     Error: Cannot find module './validation!./basicTests'
    at Function.Module._resolveFilename (module.js:338:15)
    at Function.Module._load (module.js:280:25)
    at Module.require (module.js:362:17)
    at require (module.js:378:17)
    at null.<anonymous> (D:\creation\software developer\projects\dev\document root\src\validation.plugin.spec.js:9:17)
    at jasmine.Env.describe (D:\creation\software developer\libs\jasmine-node\lib\jasmine-node/jasmine-2.0.0.rc1.js:791:21)
    at describe (D:\creation\software developer\libs\jasmine-node\lib\jasmine-node/jasmine-2.0.0.rc1.js:575:27)
    at Object.<anonymous> (D:\creation\software developer\projects\dev\document root\src\validation.plugin.spec.js:7:1)
    at Module._compile (module.js:449:26)
    at Object.Module._extensions..js (module.js:467:10) 
```

有可能让它以某种方式工作吗？

**编辑：**

取得了一些进展：

```
if (typeof define !== 'function')
    var define = require('amdefine')(module, require);

define(function (require, exports, module) {
    var _ = require("underscore"),
        Backbone = require("backbone"),
        global = require("./validation"),
        empty = require("./validation!"),
        local = require("./validation!../src/basicTests");

    describe("validation", function () {
        expect(global).not.toBe(undefined);
        expect(empty).not.toBe(undefined); //fail
        expect(local).not.toBe(undefined); //fail
    });
}); 
```

在 plugin.load 中，本地对象似乎没问题，我把它交给了 load 方法，但它没有随要求到达。至少在定义标记中它调用 amdefine 要求，而不是 commonJS ......

**编辑2：**

我在 amdefine 网站上发现：

> 只要加载器插件同步调用它们的 load() 回调，就支持加载器插件。所以那些做网络请求的将无法工作。但是像 text 这样的插件可以在本地加载文本文件。

我不知道 require 被称为异步。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-27T10:53:44.257

我修改了我的插件，通过 amdefine 同步和浏览器脚本异步调用 require 。

```
var amdefine = false;
if (typeof define !== 'function')
    var define = require('amdefine')(module, require),
        amdefine = true;

define(function (require, exports, module) {
    var _ = require("underscore"),
        Backbone = require("backbone");

    ...

    var plugin = {
        load:function (name, _require, load, config) {
            var resources = this.parseResources(name);
            var require = amdefine ? function (resources, callback) {
                var modules = [];
                _.each(resources, function (resource) {
                    modules.push(_require(resource));
                });
                callback.apply(null, modules);
            } : _require;
            require(resources, function () {
                var localValidator = global.Validator.extend({});
                _.each(arguments, function (resource) {
                    localValidator.customize(resource);
                }, this);
                var local = _.extend({}, global, {
                    Validator:localValidator,
                    Model:global.Model.extend({
                        Validator:localValidator
                    }),
                    SyncModel:global.SyncModel.extend({
                        Validator:localValidator
                    })
                });
                load(local);
            });
        },
        parseResources:function (name) {
            if (name == "")
                return [];
            return name.split(":");
        }
    };

    ...

}); 
```

# algorithm - 圆内两点之间的距离

> ID：14052264
> 
> 赞同：0
> 
> 时间：2012-12-27T09:22:20.507
> 
> 标签：algorithm, math, geometry

我在一个圆圈内得到 2 分。我必须在圆上找到一个点（不是在里面，不是在外面），这样给定的 2 个点和我找到的点之间的距离之和是最小的。我只需要找到最小距离，而不是点的位置。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-27T09:28:54.283

这是一个[最小化问题](http://en.wikipedia.org/wiki/Mathematical_optimization)：

```
minimize sqrt((x1-x0)^2 + (y1-y0)^2) +  sqrt((x2-x0)^2 + (y2-y0)^2)
             ^                                         ^
     (distance from point1)                (distance from point 2)

subject to constraints:
x1 = C1
y1 = C2
x2 = C3
x4 = C4
x0^2 + y0^2 = r^2 
(assuming the coordinates are already aligned to the center of the circle as (0,0)).
(C1,C2,C3,C4,r) are given constants, just need to assign them. 
```

分配 x1,y1,x2,y2 后 - 您会遇到一个包含 2 个变量 (x0,y0) 和一个约束的最小化问题。**最小化问题可以使用[拉格朗日乘数](http://en.wikipedia.org/wiki/Lagrange_multiplier)**来解决。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T10:34:12.433

令 (x1, y1) 和 (x2, y2) 为圆内的点，(x, y) 为圆上的点，r 为圆的半径。您的问题简化为**拉格朗日条件极值问题**，即：

*极值函数*：

```
f(x, y) = sqrt((x-x1)^2 + (y-y1)^2) + sqrt((x-x2)^2 + (y-y2)^2) 
```

*条件*：

```
g(x, y) = x^2 + y^2 = r^2  (1) 
```

引入一个辅助功能（[参考](http://en.wikipedia.org/wiki/Lagrange_multiplier)）：

Λ(x, y, λ) = f(x, y) + λ(g(x, y) - r^2)

令∂Λ / ∂x = 0，我们有：

```
(x-x1)/sqrt((x-x1)^2 + (y-y1)^2) + (x-x2)/sqrt((x-x2)^2 + (y-y2)^2) + 2λx = 0 (2) 
```

令∂Λ / ∂y = 0，我们有：

```
(y-y1)/sqrt((x-x1)^2 + (y-y1)^2) + (y-y2)/sqrt((x-x2)^2 + (y-y2)^2) + 2λy = 0 (3) 
```

现在我们有 3 个变量（即 x、y 和 λ）和 3 个方程（即 (1)、(2) 和 (3)），所以它是可解的。

请注意，应该有两个解决方案（除非两个内点恰好是圆的中心）。一个是最小值（这是您需要的），另一个是最大值（将被忽略）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-29T05:44:18.537

只是另一种方法（更直接）：

为简单起见，假设圆在 (0,0) 处，半径为 r，并假设两个点是 P1(x1,y1) 和 P2(x2,y2)

我们可以计算这两个点的极角，假设它们显然是alpha1和alpha2，那么在圆上并且到P1和P2的距离之和最小的点在alpha1和alpha2组成的圆扇区内

同时，该扇区内圆上的点与P1和P2之间的距离之和是二次函数。因此，可以使用三分法找到最小距离。

![数字：](../Images/c0707ea341720c5bab5ada4f047b44ed.png)

# ios - 从特定日期创建的 iPhone 画廊获取图像

> ID：14052277
> 
> 赞同：-4
> 
> 时间：2012-12-27T09:23:25.863
> 
> 标签：ios

我想显示在特定日期创建的图库中的所有图像。可以吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T10:11:12.877

```
-(void)loadImagelist{
  void (^assetEnumerator)(ALAsset *, NSUInteger, BOOL *) = ^(ALAsset *theAsset, NSUInteger index, BOOL *stop) {
    if(theAsset != NULL) {
      NSString *date = [theAsset valueForProperty: ALAssetPropertyDate];
      //if date == xxx add to list
    }
  };

  void (^assetGroupEnumerator)(ALAssetsGroup *, BOOL *) =  ^(ALAssetsGroup *group, BOOL *stop) {
      if(group != nil) {
        [group setAssetsFilter:[ALAssetsFilter allPhotos]];
        [group enumerateAssetsUsingBlock:assetEnumerator];
    }
  };

  ALAssetsLibrary *library = [[ALAssetsLibrary alloc] init];
  [library enumerateGroupsWithTypes:ALAssetsGroupSavedPhotos usingBlock:assetGroupEnumerator failureBlock: ^(NSError *error) {
      NSLog(@"Failure");
  }];
} 
```

# c - linux上opencl的问题

> ID：14052279
> 
> 赞同：1
> 
> 时间：2012-12-27T09:23:30.077
> 
> 标签：c, opencl, gpu

我有一个带有linux和nvidia gforce 5200的桌面。显卡不支持opencl编程。因此，我安装了 AMD APP SDK v.2 来在 CPU 上编写 opencl。但是，当我在编译后执行时，我得到以下信息： FATAL: Module fglrx not found。fgrlx 是 ATI 专有驱动程序的内核模块。为什么需要这个模块？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T09:30:27.453

Fglrx 是一个专有的、仅 Linux 二进制驱动程序，用于 ATI 图形芯片，支持 3D 加速。你可以[在这里阅读](http://www.thinkwiki.org/wiki/Fglrx)

要安装 AMD App SDK，需要满足以下系统要求 [http://developer.amd.com/tools/heterogeneous-computing/amd-accelerated-parallel-processing-app-sdk/system-requirements-driver-compatibility/](http://developer.amd.com/tools/heterogeneous-computing/amd-accelerated-parallel-processing-app-sdk/system-requirements-driver-compatibility/) 基本上AMD CPU 作为最低要求。

基本上你需要安装 ATI 驱动程序。这是一个讨论程序的教程

```
For RPM based linux (like Fedora) 
```

[http://gofedora.com/how-to-install-ati-catalyst-fglrx-98-drivers-fedora-11/comment-page-1/](http://gofedora.com/how-to-install-ati-catalyst-fglrx-98-drivers-fedora-11/comment-page-1/)

```
For Debian based Linux (like Ubuntu) 
```

[https://help.ubuntu.com/community/BinaryDriverHowto/](https://help.ubuntu.com/community/BinaryDriverHowto/)

一篇博客讲述了如何安装 AMD App SDK [http://blog.markloiseau.com/2012/05/install-opencl-sdk-ubuntu/](http://blog.markloiseau.com/2012/05/install-opencl-sdk-ubuntu/)

# facebook - 关注插件未显示在我的个人资料中

> ID：14052290
> 
> 赞同：1
> 
> 时间：2012-12-27T09:24:19.573
> 
> 标签：facebook, plugins

我正在尝试将“关注”插件添加到我的网站。有几种方法可以解决这个问题（如 Facebook 开发者页面所述），但它们都不适合我。

他们确实使用示例用户“zuck”，但不适用于我的个人资料。当我尝试 XFBML 方法时，我认为我做错了什么，但即使是 iframe 版本也不适用于我的个人资料。我无法解释这一点。

具有默认用户（zuck 的）URL 的插件显示： [http ://www.facebook.com/plugins/follow.php?href=https%3A%2F%2Fwww.facebook.com%2Fzuck&layout=standard&show_faces=true&colorscheme=light&font&width=450](http://www.facebook.com/plugins/follow.php?href=https%3A%2F%2Fwww.facebook.com%2Fzuck&layout=standard&show_faces=true&colorscheme=light&font&width=450)

带有我的个人资料 (middelkoopjan) URL 的插件不显示： [http ://www.facebook.com/plugins/follow.php?href=https%3A%2F%2Fwww.facebook.com%2Fmiddelkoopjan&layout=standard&show_faces=true&colorscheme=light&font&width =450](http://www.facebook.com/plugins/follow.php?href=https%3A%2F%2Fwww.facebook.com%2Fmiddelkoopjan&layout=standard&show_faces=true&colorscheme=light&font&width=450)

我觉得我忽略了一些基本的东西，但我在这里不知所措......任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T16:54:11.947

您必须在 Facebook 个人资料帐户设置中允许订阅。单击屏幕左侧菜单上的“订阅者”链接，然后选中“允许订阅者”复选框。这应该使关注插件适用于您的个人资料。

# javascript - 将模板加载到主干/下划线的单个文件中

> ID：14052293
> 
> 赞同：3
> 
> 时间：2012-12-27T09:24:30.333
> 
> 标签：javascript, jquery, backbone.js, underscore.js, templating

我有一个主干应用程序，由 symfony2 服务器提供服务。

我有许多主干视图，每个视图都有几个模板，这些模板使用下划线的模板引擎在不同时间呈现。

**我试图弄清楚如何以最大的效率为客户提供下划线模板。**

到目前为止，我已经在 twig 中编写了所有模板，然后在初始请求期间将它们作为内联脚本标签呈现给响应 HTML。这导致用户第一次进入我的应用程序时服务器的响应时间很长。

**输出示例：**

```
<html>
<head>
   ...
</head>
<body>
    <script type="text/template" id="template1">
        <div class="example">
            <%= someparam %>
        </div>
    </script>
    <script type="text/template" id="template2">
        <div class="anotherExample">
            <%= otherparam %>
        </div>
    </script>
    ...
    ...
    ...
</body>
</html> 
```

**备择方案**

现在我正在寻找一种更好的方式来加载这些模板。也许通过将它们放入单个文件中的第二个请求中，例如外部 JS 文件。但是对于我尝试过的任何事情，我发现很难访问单个模板（例如通过 id 引用它们）或将它们全部保存在一个有效的结构中（在一个文件中，并且没有太多的字符串操作或太多的 http要求）。

## TL;博士

**如何加载许多下划线模板？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T12:23:05.560

您可以考虑 JST 方法，即将模板连接到单个 javascript 文件中。该模式在[此 Backbone Patterns 教程](http://ricostacruz.com/backbone-patterns/#jst_templates)中进行了描述。

我不熟悉 Symfony/Twig，所以我不知道是否有可用的工具。根据您的问题，我猜想使用现有工具将模板呈现为 javascript 文件而不是 HTML 文档很容易。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-01-11T23:00:06.187

我认为对您来说更好的方法 - 它是预编译模板，尝试使用[jsttojs](https://github.com/kupriyanenko/jsttojs)，它将帮助您获得包含所有模板的单个文件。

例如，从命令行

```
jsttojs templates compiled/templates/index.js --ext mustache --watch 
```

或使用 grunt、[grunt-jsttojs 的解决方案](https://github.com/kupriyanenko/grunt-jsttojs)

# asp.net - 处理命令期间出现一个或多个错误。ORA-00936: 缺少表达式

> ID：14052303
> 
> 赞同：1
> 
> 时间：2012-12-27T09:25:11.647
> 
> 标签：asp.net, oracle10g

我正在尝试执行插入但收到此错误：[异常：处理命令期间发生一个或多个错误。ORA-00936: 缺少表达式]

它适用于选择查询。

```
table structure is as follow
database-oracle 10g
table name-investor_info

investor_id-number
first_name-varchar
lastname-varchar
age-number
location-varchar
contact_number-varchar
email-varchar
checked-number-number

public void insert_details(string fname,string lname, int age, string location, string contactnumber, string email)
    {
        int id = get_id()+1;
        int check=0;

        string query = "INSERT INTO INVESTOR_INFO (INVESTOR_ID,FIRST_NAME,LAST_NAME,AGE,LOCATION,CONTACT_NUMBER,EMAIL,CHECKED) VALUES (@val1,@val2,@val3,@val4,@val5,@val6,@val7,@val8);";

        try
        {
            conn.Open();
            OleDbCommand command1 = new OleDbCommand(query,conn);
            command1.Parameters.AddWithValue("@val1", id);
            command1.Parameters.AddWithValue("@val2", fname);
            command1.Parameters.AddWithValue("@val3", lname);
            command1.Parameters.AddWithValue("@val4", age);
            command1.Parameters.AddWithValue("@val5", location);
            command1.Parameters.AddWithValue("@val6", contactnumber);
            command1.Parameters.AddWithValue("@val7", email);
            command1.Parameters.AddWithValue("@val8", check);

            command1.CommandType = CommandType.Text;

            command1.ExecuteNonQuery();

           // conn.Close();
        }
        catch (Exception e)
        {
            throw new Exception(e.Message);
        }
        finally
        {
            conn.Close();
        }

    }//end of insert 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T09:30:22.437

删除字符串 QUERY 中的分号

它应该是

```
string query = "INSERT INTO INVESTOR_INFO (INVESTOR_ID,FIRST_NAME,LAST_NAME,AGE,LOCATION,CONTACT_NUMBER,EMAIL,CHECKED) VALUES (@val1,@val2,@val3,@val4,@val5,@val6,@val7,@val8)"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T09:30:28.113

从字符串查询中删除分号并尝试如下所示，

字符串查询 = "INSERT INTO INVESTOR_INFO (INVESTOR_ID,FIRST_NAME,LAST_NAME,AGE,LOCATION,CONTACT_NUMBER,EMAIL,CHECKED) 值 (@val1,@val2,@val3,@val4,@val5,@val6,@val7,@val8) ";

始终使用表名指定架构名称。(schemeName.tableName)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-27T09:36:38.073

我已经有一段时间没有在 Oracle 上工作了，但是您是否尝试过将参数替换为`@`a `:`。参考以下文章：

[http://msdn.microsoft.com/en-us/library/system.data.oracleclient.oraclecommand.parameters.aspx](http://msdn.microsoft.com/en-us/library/system.data.oracleclient.oraclecommand.parameters.aspx)

# php - 如何在我的注册页面上验证验证码

> ID：14052315
> 
> 赞同：0
> 
> 时间：2012-12-27T09:26:09.660
> 
> 标签：php

我正在尝试在注册页面上放置一个简单的验证码，但是如果我将表单上的用户名部分留空并按注册，我将无法验证表单上的验证码部分，它会给我一条消息，请输入用户名等等但是当涉及到验证码部分时，如果我将其留空，它将给出一条消息，输入验证码，但如果我输入验证码字母但不是它注册的正确验证码，所以我想尝试结合下面的代码

```
if ( $real == $guess ) {
    die ("enter captcha");
} 
```

和这段代码

```
if ( $real != $guess ) {
   die ("Not equal");
} 
```

这是我的注册页面代码

```
//Collecting info
$username = $_REQUEST['username'];
$password = $_REQUEST['password'];
$pass_conf = $_REQUEST['password_conf'];
$email = $_REQUEST['email'];
$date = $_REQUEST['date'];
$guess = $_POST['captcha'];

$real = ( isset( $_SESSION['real'] ) ) ? $_SESSION['real'] : "";

//Here we will check do we have all inputs filled

if ( empty( $username ) ) {
    die("Please enter your username!<br>");
}

if ( empty( $password ) ) {
    die("Please enter your password!<br>");
}

if ( empty( $pass_conf ) ) {
   die("Please confirm your password!<br>");
}

if ( empty( $email ) ) {
   die("Please enter your email!");
}
if ( $real == $guess ) {
   die ("enter captcha");
} 

//Let's check if this username is already in use

$user_check = mysql_query("SELECT username FROM users WHERE username='$username'");
$do_user_check = mysql_num_rows( $user_check );

//Now if email is already in use

$email_check = mysql_query("SELECT email FROM users WHERE email='$email'");
$do_email_check = mysql_num_rows( $email_check );

//Now display errors

if ( $do_user_check > 0 ) {
    die("Username is already in use!<br>");
}

if ( $do_email_check > 0 ) {
    die("Email is already in use!");
}

//Now let's check does passwords match

if( $password != $pass_conf ) {
   die("Passwords don't match!");
}

//If everything is okay let's register this user

$insert = mysql_query("INSERT INTO users (username, password, email) VALUES ('$username', '$password', '$email')");
if ( !$insert ) {
   die("There's little problem: ".mysql_error());
}

echo $username.", you are now registered. Thank you!<br><a href=login.php>Login</a> | <a href=index.php>Index</a>";

}
$act = isset($_GET['act']) ? $_GET['act'] : '';
switch( $act ) {
   default;
   register_form();
   break;

   case "register";
   register();
   break;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T09:29:44.440

怎么样的东西：

```
if (empty($guess) || $guess !== $real)
{
    die("Please enter the correct CAPTCHA.<br>");
}

// the CAPTCHA entered was correct
... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-27T09:58:53.127

编码：

```
 if ( $real == $guess ) {
   die ("enter captcha");
} 
```

只有当真实等于猜测时才说“输入验证码”。因此，它与您真正想要的相反，因此也是问题的原因。

您需要将其更改为：

```
 if ( $real != $guess ) {
   die ("enter captcha");
} 
```

如果真实**不**等于猜测，它将打印“输入验证码”短语。

# windows - 批处理文件 - 将用户输入设置为系统变量路径

> ID：14052317
> 
> 赞同：-1
> 
> 时间：2012-12-27T09:26:47.067
> 
> 标签：windows, batch-file, cmd, batch-processing

我希望用户输入 bin 目录的路径，然后将该路径存储到系统变量路径

我试过这个

```
 set /p path = Please specify the path to the bin folder
 echo Path is set to = %path% 
```

似乎不起作用

基本上我希望用户输入路径并且输入的路径永久存储在系统变量“路径”中希望我现在更清楚

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T09:36:32.083

您可能会从这个问题的答案中获得帮助：[Setting a system environment variable from a Windows batch file?](https://stackoverflow.com/questions/3803581/setting-a-system-environment-variable-from-a-windows-batch-file)

它说你应该使用`setx`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T09:31:48.043

删除空格。该`set`命令不会修剪，因此输入实际上存储在名为`path<space>`.

`set`如果您在没有参数的情况下调用，您应该能够轻松发现这一点。您将看到一个具有此额外空间的额外变量。

但请注意：`path`已经是一个现有变量，包含命令会话的搜索路径。如果您不想覆盖该变量，则最好完全使用不同的名称。

# visual-studio - Visual Basic InternetSetOption

> ID：14052325
> 
> 赞同：1
> 
> 时间：2012-12-27T09:27:20.613
> 
> 标签：visual-studio, internet-explorer, proxy

我在 IE 中重新加载代理设置时遇到问题。我想在不重新启动 IE 和 Chrome 的情况下重新加载代理选项。我注意到 InternetSetOption 返回 false。

定义：

```
Private Declare Auto Function InternetSetOption Lib "wininet.dll" (ByVal hInternet As IntPtr, ByVal dwOption As Integer, ByVal lpBuffer As IntPtr, ByVal lpdwBufferLength As Integer) As Boolean

Private Const INTERNET_OPTION_REFRESH As Long = 37
Private Const INTERNET_OPTION_SETTINGS_CHANGED As Long = 39 
```

和内部功能：

```
InternetSetOption(vbNull, INTERNET_OPTION_SETTINGS_CHANGED, vbNull, 0)
InternetSetOption(vbNull, INTERNET_OPTION_REFRESH, vbNull, 0) 
```

这是整个功能：

```
Public Sub SetProxy() 'ByVal ServerName As String, ByVal port As Integer
    Dim regkey1 As RegistryKey
    regkey1 = Registry.CurrentUser.CreateSubKey("Software\Microsoft\Windows\CurrentVersion\Internet Settings", RegistryKeyPermissionCheck.Default)
    regkey1.SetValue("ProxyServer", "ftp=10.8.0.1:808;http=10.8.0.1:808;https=10.8.0.1:808;socks=10.8.0.1:1080", RegistryValueKind.Unknown)
    regkey1.SetValue("ProxyEnable", True, RegistryValueKind.DWord)
    regkey1.Close()

    Dim regKey7 As RegistryKey
    regKey7 = Registry.CurrentUser.CreateSubKey("Software\Microsoft\Windows\CurrentVersion\Internet Settings\Connections", RegistryKeyPermissionCheck.Default)

    Dim regKe As Object = Registry.CurrentUser.OpenSubKey("Software\Microsoft\Windows\CurrentVersion\Internet Settings\Connections", True).GetValue("DefaultConnectionSettings")
    If regKe Is Nothing Then
    Else
        regKey7.DeleteValue("DefaultConnectionSettings")
    End If

    Dim regk As Object = Registry.CurrentUser.OpenSubKey("Software\Microsoft\Windows\CurrentVersion\Internet Settings\Connections", True).GetValue("SavedLegacySettings")
    If regk Is Nothing Then
    Else
        regKey7.DeleteValue("SavedLegacySettings")
    End If

    regKey7.Close()

    InternetSetOption(vbNull, INTERNET_OPTION_SETTINGS_CHANGED, vbNull, 0)
    InternetSetOption(vbNull, INTERNET_OPTION_REFRESH, vbNull, 0)

    Label1.Text = "Connected to Disa's Proxy Server"
    Label1.ForeColor = Color.Green

End Sub 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-31T20:56:09.600

您需要将 vbnulls 更改为 IntPtr.Zero。这应该可以纠正问题。

```
Imports System
Imports System.Runtime.InteropServices

Namespace UpdateProxy
    Friend Class Program
        Public Shared Declare Auto Function InternetSetOption Lib "wininet.dll" (hInternet As IntPtr, dwOption As Integer, lpBuffer As IntPtr, dwBufferLength As Integer) As Boolean

        Private Shared Sub Main(args As String())
            Program.InternetSetOption(IntPtr.Zero, 39, IntPtr.Zero, 0)
            Program.InternetSetOption(IntPtr.Zero, 37, IntPtr.Zero, 0)
        End Sub
    End Class
End Namespace 
```

这个简单的程序将使用注册表中的代理设置更新正在运行的 IE 实例。

# javascript - javascript 和 jquery 在 chrome android html5 上不起作用

> ID：14052328
> 
> 赞同：0
> 
> 时间：2012-12-27T09:27:25.190
> 
> 标签：javascript, android, jquery, google-chrome

我在 Android 操作系统上的 Chrome 上遇到问题。
我使用 jQuery 和 javaScript 处理 html5 页面。我有选择框，数字输入..等。

当我尝试“点击”时，我有：

```
var hitEvent = 'ontouchstart' in document.documentElement ? 'touchstart' : 'click'; 
```

在输入或选择上没有任何反应。

然而，当我做`alert("something")`一切开始工作。

在每个浏览器上都可以正常工作（Safari，iPad 上的 Chrome，iPhone...；Firefox，Android 上的 Internet 浏览器）但不是 Android 上的 Chrome。

您对如何解决此问题有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T09:35:54.603

通常，当您发出警报后一切正常时，这意味着异步调用存在问题。

正在发生的事情是警报正在为页面真正加载或事件实际发生提供时间。当您不发出警报时，在事件之前发生了一个动作（例如，一个元素在它生成之前被调用）

在这个角度搜索。

如果它在 Firefox 中运行，那是 Firefox 呈现页面的方式纯属运气，但您仍然必须修复您的错误。

# android - 我需要为每个设备尺寸设计背景吗？

> ID：14052331
> 
> 赞同：2
> 
> 时间：2012-12-27T09:28:01.320
> 
> 标签：android

亲爱的，我将在 android 应用程序中工作，我应该设计界面。[我在http://developer.android.com/design/index.html](http://developer.android.com/design/index.html)上阅读了文章， 但我仍然有一些遗漏之处。我需要为每个设备尺寸设计背景吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T09:42:15.080

检查此[链接](http://developer.android.com/guide/practices/screens_support.html)以支持多屏幕。此链接将向您展示如何为不同屏幕尺寸的设备创建不同的布局。

*但是，即使您想制作一个独特的布局以支持多屏幕的方向或纵向模式，*

```
For image, use 9 patch images. 
```

这是链接[http://developer.android.com/tools/help/draw9patch.html](http://developer.android.com/tools/help/draw9patch.html)

**对于任何小部件的宽度和高度，请使用 wrap_content 或 match_parent 或者您可以使用`android:layout_weight`and`android:weightSum`**

避免使用`pixels i.e. px` Use **dp**

**通过这种方式，您可以创建适用于多个屏幕的独特布局，但该屏幕应处于定向或纵向模式。**

*`If you want to support for for both,then you have to create`**`layout-land`**`for landscape mode in the res folder`*.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T09:57:33.893

这取决于背景类型。如果您的背景是高分辨率图像，则如果整个背景是图像，则应为不同的屏幕尺寸提供不同的图像。你也可以：

*   从瓷砖制作背景（如[icloud.com](https://www.icloud.com/)）
*   如果您的图像类似于框架，角应该保持不变并且身体应该缩放（如果你有一些图片不是很好），请指定一个[Ninepatch 图像](http://developer.android.com/tools/help/draw9patch.html)
*   [为不同的屏幕分辨率和密度指定多个不同的图像。](http://developer.android.com/guide/topics/resources/providing-resources.html)为此，请阅读[支持多个屏幕](http://developer.android.com/training/basics/supporting-devices/screens.html)。如果您需要更精确的图像缩放和质量，您可以使用屏幕属性的基本尺寸，即`sw<N>dp`- 您可以指定应使用图像的屏幕的最小宽度。这是资源文件夹的限定名称。

您可能会在此处将一些值用于常见的屏幕尺寸：

*   320，适用于具有屏幕配置的设备，例如：
    1.  240x320 ldpi（QVGA 手持设备）
    2.  320x480 mdpi（手机）
    3.  480x800 hdpi（高密度手机）
*   480，适用于 480x800 mdpi（平板电脑/手机）等屏幕。
*   600，适用于 600x1024 mdpi（7" 平板电脑）等屏幕。
*   720，适用于 720x1280 mdpi（10 英寸平板电脑）等屏幕。

您还应该查看使 Android 在运行时选择图像的其他[限定符（屏幕密度、可用宽度、可用高度、屏幕尺寸或屏幕纵横比）。](http://developer.android.com/guide/topics/resources/providing-resources.html)通过结合这些限定符并仔细测试，您将确保用户在每台设备上都能获得最佳体验。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-27T09:50:10.237

事实上，你应该。android 中有 4 种主要屏幕尺寸，它们从 res/layout-xlarge、res/layout-large、res/layout-normal 和 res/layout-small 获取布局 xml。同时，对于从 drawable-hdpi、drawable-xhdpi、drawable-mdpi 和 drawable-ldpi 获取图像的不同屏幕，您应该使用不同的图像分辨率。

# actionscript-3 - 如何在基于 Flash 的应用程序中嵌入 pdf 文件（IOS 和 android）

> ID：14052332
> 
> 赞同：0
> 
> 时间：2012-12-27T09:28:11.207
> 
> 标签：actionscript-3, flash, flash-cs5

我正在使用 FLASH CS5.5 为 android 和 IOS 创建应用程序

当我点击按钮时，我想打开 pdf 文件。我尝试使用此代码但不工作

```
package
{
            import flash.html.HTMLLoader;
            import flash.net.URLRequest;
            import flash.display.NativeWindowInitOptions;
            import flash.display.NativeWindowSystemChrome;
            import flash.display.NativeWindowType;
            import flash.display.NativeWindow;
            import flash.events.Event;

            import flash.display.SimpleButton;

            public class bpdf extends SimpleButton
            {

                        public function bpdf()
                        {
                                    // constructor code
                                    var htm:HTMLLoader= new HTMLLoader();
                                    htm.load(new URLRequest("test.pdf"));
                                    var init:NativeWindowInitOptions= new NativeWindowInitOptions();
                                    init.systemChrome = NativeWindowSystemChrome.STANDARD;
                                    init.type = NativeWindowType.NORMAL;
                                    var win:NativeWindow = new NativeWindow(init);
                                    win.stage.addChild(htm);
                                    win.width = stage.stageWidth;
                                    win.height = stage.stageHeight;

                                    win.activate();
                                    htm.width = win.width;
                                    htm.height = win.height;
                                    win.addEventListener(Event.CLOSE, onCloseEvent);
                        }

                        function onCloseEvent(e:Event)
                        {

                                    trace("window closed");

                        }
            }
} 
```

使用“PLYER：AIR FOR ANDROID”发布后，我在输出中收到这些错误消息

```
[SWF] link2.swf - 2907 bytes after decompression
TypeError: Error #1009: Cannot access a property or method of a null object reference.
            at bpdf()[C:\Users\HP\Desktop\PDF Link\Link_2\bpdf.as:30]
            at flash.display::Sprite/constructChildren()
            at flash.display::Sprite()
            at flash.display::MovieClip()
            at runtime::ContentPlayer/loadInitialContent()
            at runtime::ContentPlayer/playRawContent()
            at runtime::ContentPlayer/playContent()
            at runtime::AppRunner/run()
            at ADLAppEntry/run()
            at global/runtime::ADLEntry() 
```

我还将我的文件转换为 APK 并签入我的 android 设备，但是当我单击按钮时出现同样的问题，没有发生任何事情

我制作我的 APK 文件不包含 pdf 和包含 pdf

使用这种方式包含我的 pdf 文件:: 发布设置 > 播放器：AIR FOR ANDROID – 设置 > 包含的文件：test.pdf

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T12:01:53.453

试试这个

如果要打开 pdf，请使用 StageWebView 而不是 HTMLLoader 类。像这样

```
protected function loadPDF(event:MouseEvent):void { 

var file:String = "Lorem_Ipsum.pdf";  

var yOffset:Number = 40;  

var stageWebView:StageWebView = new StageWebView(); 

stageWebView.stage = stage;  
stageWebView.viewPort = new Rectangle(0, yOffset, 500, 500 - yOffset); 

 var pdf:File = File.applicationStorageDirectory.resolvePath(file);  

stageWebView.loadURL(pdf.nativePath);
} 
```

来源：[更多细节](http://thatsthaway.blogspot.in/2012/07/display-and-remove-documents-in-air.html)

另请查看[堆栈溢出 display-local-pdf](https://stackoverflow.com/questions/8979303/how-to-display-local-pdf-in-flex-mobile-project)

# ruby-on-rails - 谷歌地图中的铁路错误

> ID：14052334
> 
> 赞同：0
> 
> 时间：2012-12-27T09:28:28.903
> 
> 标签：ruby-on-rails, ruby-on-rails-3, google-maps, google-maps-api-3, gmaps4rails

2 萤火虫中显示的错误

```
ReferenceError: Gmaps4Rails is not defined

})(Gmaps4Rails);

ReferenceError: Gmaps4RailsGoogle is not defined 

Gmaps.map = new Gmaps4RailsGoogle(); 
```

应用程序.html.erb

```
<%= javascript_include_tag "gmaps4rails/gmaps4rails.googlemaps" %>
  <%= javascript_include_tag "gmaps4rails/gmaps4rails.base" %>
  <%= javascript_include_tag "gmaps4rails/gmaps4rails.bing" %>
  <%= javascript_include_tag "gmaps4rails/gmaps4rails.mapquest" %>
  <%= javascript_include_tag "gmaps4rails/gmaps4rails.openlayers" %>

<body>   
  <%= yield %>
  <%= yield :scripts %>
</body> 
```

propertymap.rb(模型)

```
 attr_accessible :title, :place, :prop_details

  acts_as_gmappable #:process_geocoding => false (if custom lang and longi tudes)

  def gmaps4rails_address

    "#{self.title}, #{self.place}"
  end 
```

property_map_controller.rb

```
 def index

    @properties = PropertyMap.all
    @json = PropertyMap.all.to_gmaps4rails
  end 
```

看法

```
 <%= gmaps4rails(@json) %> 
```

空盒子出现在视图中，里面没有任何东西

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T09:38:01.410

`gmaps4rails.base`应该包含在前面`gmaps4rails.googlemaps`

# python - Python 类实例算术

> ID：14052335
> 
> 赞同：1
> 
> 时间：2012-12-27T09:28:29.557
> 
> 标签：python, class, math

我有一堂课：

```
class Foo:
    def __init__(self, a, b):
        self.a = a
        self.b = b 
```

where`a`是一个浮点数，`b`是一个包含笛卡尔坐标中位置的元组。

比方说`a = Foo(1.23, (1, 2))`。

我想要做的是让它，如果我们这样做`a + 4.56`或`7.89 - a`其他什么，它评估`a`为一个浮动对象（`a.a`）。

我知道我可以添加像`__add__`and这样的内置方法`__sub__`，但是有没有更简单的方法？就像在一种方法中提供功能一样？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-27T09:34:36.080

如果`a`应该是浮点数，那么我建议将其强制为浮点数。

```
float(a) + 4.56 
```

# c# - 在 C# 2010 中添加在 VC++ 中创建的 dll

> ID：14052338
> 
> 赞同：0
> 
> 时间：2012-12-27T09:28:39.863
> 
> 标签：c#

我在 VC++ 和 Visual Studio 2005 中创建了一个 dll，现在我想在我的 C# 应用程序和 VS2010 中添加相同的 dll。

但每当我尝试时，它都会给我错误“无法添加对“../name.dll”的引用，请确保该文件可访问并且它是有效的程序集或 com 组件”

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T09:30:13.533

似乎 C++ dll 是[本机 dll](https://stackoverflow.com/a/3995607/649524)（而不是托管[C++/CLI](http://msdn.microsoft.com/en-us/magazine/cc163852.aspx)）

您需要查看 P/Invoke。

[平台调用教程](http://msdn.microsoft.com/en-us/library/aa288468(v=vs.71).aspx)
[DLL 导入](http://msdn.microsoft.com/en-us/library/system.runtime.interopservices.dllimportattribute.aspx)

# jsf - JSF ViewParams 未通过

> ID：14052339
> 
> 赞同：1
> 
> 时间：2012-12-27T09:28:42.730
> 
> 标签：jsf, jsf-2, omnifaces, viewparams

我发现视图参数不会从目标页面上支持 bean 不同的页面传递。如何将产品参数从 test1.xhtml 传递到 test2.xhtml？

测试.xhtml

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
    xmlns:f="http://java.sun.com/jsf/core"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:ui="http://java.sun.com/jsf/facelets"
    xmlns:p="http://primefaces.org/ui" xmlns:o="http://omnifaces.org/ui">

<body>
    <f:metadata>
        <o:viewParam name="product" value="#{holder.value}"
            converter="#{productConverter}"
            converterMessage="Bad request. Unknown product." required="true"
            requiredMessage="Bad request. Please use a link from within the system." />
    </f:metadata>
    <h:link outcome="/test2.xhtml" includeViewParams="true">link</h:link>

</body>
</html> 
```

test2.xhtml

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
    xmlns:f="http://java.sun.com/jsf/core"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:ui="http://java.sun.com/jsf/facelets"
    xmlns:p="http://primefaces.org/ui" xmlns:o="http://omnifaces.org/ui">

<h:head></h:head>
<body>
    <f:metadata>
        <o:viewParam name="product" value="#{holder2.value}"
            converter="#{productConverter}"
            converterMessage="Bad request. Unknown product." required="true"
            requiredMessage="Bad request. Please use a link from within the system." />
    </f:metadata>
    <h:link outcome="/test.xhtml" includeViewParams="true">link</h:link>
</body>
</html> 
```

持有人.java

```
@ManagedBean
@ViewScoped
public class Holder<T> implements Serializable {
    private T value;

    public T getValue() {
        return value;
    }

    public void setValue(T value) {
        this.value = value;
    }

} 
```

Holder2.java

```
@ManagedBean
@ViewScoped
public class Holder2<T> implements Serializable {
    private T value;

    public T getValue() {
        return value;
    }

    public void setValue(T value) {
        this.value = value;
    }

} 
```

产品.java

```
public class Product {

    private String name;

    public Product(String name) {
        super();
        this.name = name;
    }

    public String getName() {
        return name;
    }

} 
```

产品转换器

```
public class ProductConverter implements Converter {

        private Map<String,Product> productMap=new HashMap<String, Product>();

        public ProductConverter(List<Product> products) {
            for (Product product:products){
                productMap.put(product.getName().toLowerCase(), product);
            }
        }

        @Override
        public Object getAsObject(FacesContext context, UIComponent component, String value) {
            return productMap.get(value.toLowerCase());
        }

        @Override
        public String getAsString(FacesContext context, UIComponent component, Object value) {
              if (!(value instanceof Product) ) {
                    return null;
                }

                return ((Product) value).getName().toLowerCase();
        }

    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T13:23:01.457

```
<h:link outcome="/test2.xhtml?includeViewParams=true">link</h:link> 
```

这不是让 JSF 在`<h:link>`. 将其作为查询字符串参数提供仅在组件的`action`属性中有效`UICommand`。

你需要[的`includeViewParams`属性，`<h:link>`](http://docs.oracle.com/javaee/6/javaserverfaces/2.1/docs/vdldocs/facelets/h/link.html)而不是。

```
<h:link outcome="/test2.xhtml" includeViewParams="true">link</h:link> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T11:15:37.847

`@ViewScoped`仅对回发有效 - 如果您更改 URL，bean 就会死掉。

要在 facelets 之间传递参数，请使用`<ui:param>`

# c# - 在创建表单实例时应用 CultureInfo

> ID：14052345
> 
> 赞同：2
> 
> 时间：2012-12-27T09:28:53.283
> 
> 标签：c#, .net-assembly

我正在研究大多数模块都使用一些常见形式的项目。因此，我计划将主要更改保留在单独的资源文件中，使表单可本地化并使用不同的语言进行主要更改，我可以使代码部分相同，并且只需要在设计器文件中工作。

表单正在使用该方法调用`Assembly.CreateInstance`。虽然我没有成功，但我注意到有一个选项可以传递方法`CultureInfo`。`CreateInstance`

```
myAssembly.CreateInstance("Facts.Forms." + strSomeFormName ,true
                ,BindingFlags.Default, null, null,
              new System.Globalization.CultureInfo("en-ZW"), null); 
```

我错过了什么吗？有什么方法可以实现吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T15:11:23.190

不，这不是 CultureInfo 参数在该调用中所做的。它仅在需要转换类型时用于*args参数。*例如，从字符串到双精度数，一种文化敏感的转换。它对您的情况完全没有影响，因为您为该参数传递了*null 。*

Winforms 只关注 Thread.CurrentThread.CurrentUICulture 属性来选择包含本地化资源的附属程序集。您可以在拨打此电话之前分配它。

# google-app-engine - GAE：Google Apps 配置 UserEntry getEmail 返回 null

> ID：14052346
> 
> 赞同：0
> 
> 时间：2012-12-27T09:29:02.690
> 
> 标签：google-app-engine, google-provisioning-api

我正在尝试从我的域中获取用户电子邮件列表。

行。这就是我的做法（代码片段）：

```
UserService userService = new UserService("ProvisioningApiClient");
userService.setOAuth2Credentials(credential);
userService.useSsl();

UserFeed userFeed = userService.getFeed(url, UserFeed.class);

for (UserEntry userEntry : userFeed.getEntries()) {
    logger.warning(userEntry.getEmail().toString());
} 
```

记录器将抛出 NullPointerException 错误。但是当我尝试使用 userEntry.getTitle.getPlainText() 时，会显示名称。

有什么我错过的吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-28T01:47:37.800

这是我找到的解决方案：

设置一个常数

```
private static final string DOMAIN = "mydomain.com"; 
```

然后从 userEntry 中获取用户名并附加带有别名和域的字符串。

```
String userEmail = userEntry.getLogin.getUsername + "@" + DOMAIN; 
```

# puppet - Puppet 仪表板权限：权限被拒绝 - /var/lib/puppet/reports/

> ID：14052347
> 
> 赞同：2
> 
> 时间：2012-12-27T09:29:05.733
> 
> 标签：puppet

我是第一次设置 Puppet Dashboard。我让它与 Apache 中的乘客模块一起运行。

`sudo rake RAILS_ENV=production reports:import`

当我运行此命令时，任务在仪表板中显示为失败。

> 630个新的失败任务

每个失败的详细信息如下所示：

```
Importing report 201212270754.yaml at 2012-12-27 09:21 UTC
Permission denied - /var/lib/puppet/reports/rb-db1/201212270754.yaml
Backtrace
/usr/share/puppet-dashboard/app/models/report.rb:86:in `read'
/usr/share/puppet-dashboard/app/models/report.rb:86:in `create_from_yaml_file' 
```

报告文件由 puppet:puppet 所有，默认情况下具有 640 权限。

我在报告目录上运行了 chmod a+rw，但仍然遇到相同的错误。

关于我在这里可能做错的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T18:37:28.457

如果您以 root 而不是 puppet-dashboard 用户身份运行 puppet-dashboard 服务器，您将看到此错误。我的系统使用来自 puppetlabs 的 puppet-dashboard-1.2.23-1.el6.noarch rpm 在 centos 6.4 上使用 /usr/share/puppet-dashboard/script/server。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-12-08T10:03:36.480

```
[root@hadoop01 puppet-dashboard]# cat /etc/sysconfig/puppet-dashboard
#
# path to where you installed puppet dashboard
#
DASHBOARD_HOME=/usr/share/puppet-dashboard
#DASHBOARD_USER=puppet-dashboard
DASHBOARD_USER=root
DASHBOARD_RUBY=/usr/bin/ruby
DASHBOARD_ENVIRONMENT=production
DASHBOARD_IFACE=0.0.0.0
DASHBOARD_PORT=3000 
```

像上面一样编辑文件，然后运行命令

```
/etc/init.d/puppet-dashboard restart  && /etc/init.d/puppet-dashboard-workers restart 
```

我的木偶仪表板版本是 1.2.23

# emacs - Emacs Elnode 无法显示 html 页面

> ID：14052350
> 
> 赞同：2
> 
> 时间：2012-12-27T09:29:21.343
> 
> 标签：emacs

我已经安装了 Marmalade 的 Emacs elnode，一切看起来都不错。我已经仔细阅读了手册。

现在elnode已经启动，我可以查看.emacs.d\elnode文件夹下的public_html文件夹。

如果我在 Chrome 中输入 url `http://localhost:8000`，它将显示以下内容：

* * *

/

.

..

默认-webserver-image.png

测试.html

* * *

但是当我单击 test.html 文件时，chrome 无法从 elnode 获得响应。我检查了我的 Emacs，消息文件提供了两个错误：

* * *

elnode-error: elnode--sentinel '从 127.0.0.1 打开。' 对于带有缓冲区 nil 的进程 elnode-webserver-proc 127.0.0.1:2224

elnode 错误：Elnode 状态：elnode-webserver-proc 127.0.0.1:2224 从 127.0.0.1 打开

elnode-error: filter: 在 elnode-webserver-proc 127.0.0.1:2224 上调用处理程序

elnode-error：在 elnode-webserver-proc 127.0.0.1:2224 上启动 HTTP 响应

进程过滤器中的错误：应用：生成子进程：无效参数

进程过滤器中的错误：生成子进程：无效参数

* * *

我只是不知道如何调试它。我也尝试了 elnode-send-file 功能，它也不起作用。

但如果我运行 Hello World 示例，它可以工作：

```
(defun my-status-page (httpcon)
  (elnode-http-start httpcon 200 '("Content-type" . "text/html"))
  (elnode-http-return httpcon "<html><b>HELLO!</b></html>"))
(elnode-start 'my-status-page :port 8010) 
```

核心问题是Emacs不能发送html页面！

安装elnode后是否需要做一些基本的配置？

谢谢

水林

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T07:03:16.733

最新版本解决了这个问题。如果你遇到和我一样的问题，请下载最新版本。

我的测试环境是 Windows7 & Emacs 24.2.1。

# linux - ip route src 不工作

> ID：14052353
> 
> 赞同：3
> 
> 时间：2012-12-27T09:29:39.477
> 
> 标签：linux, networking, ubuntu, ip, routes

1我需要在Linux的接口上使用几个IP，并切换它，但它不起作用。
例如：

```
# ifconfig
eth0      Link encap:Ethernet  HWaddr 90:2b:34:33:80:65  
          inet addr:192.168.1.1  Bcast:192.168.1.255  Mask:255.255.255.0
          inet6 addr: fe80::922b:34ff:fe33:8065/64 Scope:Link
          UP BROADCAST RUNNING MULTICAST  MTU:1500  Metric:1
          RX packets:13220652 errors:0 dropped:32864 overruns:0 frame:0
          TX packets:8296620 errors:0 dropped:0 overruns:0 carrier:1
          collisions:0 txqueuelen:1000 
          RX bytes:16166162509 (16.1 GB)  TX bytes:2186645852 (2.1 GB)
          Interrupt:48 

eth0:1    Link encap:Ethernet  HWaddr 90:2b:34:33:80:65  
          inet addr:192.168.1.99  Bcast:192.168.1.255  Mask:255.255.255.0
          UP BROADCAST RUNNING MULTICAST  MTU:1500  Metric:1
              Interrupt:48 

lo        Link encap:Локальная петля (Loopback)  
          inet addr:127.0.0.1  Mask:255.0.0.0
          inet6 addr: ::1/128 Scope:Host
          UP LOOPBACK RUNNING  MTU:16436  Metric:1
          RX packets:276685 errors:0 dropped:0 overruns:0 frame:0
          TX packets:276685 errors:0 dropped:0 overruns:0 carrier:0
          collisions:0 txqueuelen:0 
          RX bytes:21387439 (21.3 MB)  TX bytes:21387439 (21.3 MB)

# ip route
169.254.0.0/16 dev eth0  scope link  metric 1000 
192.168.1.0/24 dev eth0  scope link  src 192.168.1.99 

# ping 192.168.1.50
PING 192.168.1.50 (192.168.1.50) 56(84) bytes of data.
64 bytes from 192.168.1.50: icmp_req=1 ttl=255 time=1.21 ms
64 bytes from 192.168.1.50: icmp_req=2 ttl=255 time=1.07 ms
64 bytes from 192.168.1.50: icmp_req=3 ttl=255 time=1.05 ms 
```

然后我使用卷曲

```
# curl 192.168.1.50 
```

和 tcpdump：

```
13:24:02.009094 IP 192.168.1.1 > 192.168.1.50: ICMP echo request, id 8919, seq 347, length 64
E..T..@.@..%.......2...s"..[...P....q#...................... !"#$%&'()*+,-./01234567
13:24:02.010087 IP 192.168.1.50 > 192.168.1.1: ICMP echo reply, id 8919, seq 347, length 64
E..T...........2.......s"..[...P....q#...................... !"#$%&'()*+,-./01234567
13:43:40.006264 IP 192.168.1.1.48275 > 192.168.1.50.80: Flags [S], seq 3496592766, win 14600, options [mss 1460,sackOK,TS val 15698502 ecr 0,nop,wscale 7], length 0
E..<O8@.@.h........2...P.i.~......9............
...F........
13:43:40.007663 IP 192.168.1.50.80 > 192.168.1.1.48275: Flags [S.], seq 3006420619, ack 3496592767, win 5792, options [mss 1460,sackOK,TS val 151247914 ecr 15698502,nop,wscale 0], length 0
E..<..@.@..8...2.....P...2V..i.................
    ..*...F.... 
```

并且源IP仍然是192.168.1.1，我做错了什么？

UPD：顺便说一句，刚刚在带有 2.6.32 内核的 Ubuntu 10.04 上尝试了同样的事情，一切正常，你甚至不需要在“ping”命令中添加“-I”，它在我的内核（3.2.0）中接缝有人坏了此功能。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-27T09:41:38.493

该`src`选项仅影响其源地址由操作系统选择的数据包。`ping`程序选择自己的源地址。如果您想影响其选择，请使用`-I`or`-B`选项。如果您想查看您的`src`选项是否有效，请建立 TCP 连接或发送 UDP 数据报。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2021-05-03T12:55:17.680

尝试添加如下特定路线：

ip route add 192.168.1.50/32 dev eth0 proto static src 192.168.1.99

这应该会导致发送到 192.168.1.50 的任何流量都使用 src-ip 192.168.1.99...而不是默认的 192.168.1.1

# ruby-on-rails - 在 Railsinstaller 上安装 Sphinx

> ID：14052356
> 
> 赞同：0
> 
> 时间：2012-12-27T09:29:47.247
> 
> 标签：ruby-on-rails, windows, sphinx, thinking-sphinx, railsinstaller

我使用 railsinstaller 将 rails 安装到 OS Windows 中。为了处理项目，我使用 Aptana。我想在我的项目中使用 gem "thinking-sphinx", "~> 2.0.13"。

当我开始索引时 - **rake thinking_sphinx:index** - 我有一个错误

```
Sphinx cannot be found on your system. You may need to configure the following
settings in your config/sphinx.yml file:
  * bin_path
  * searchd_binary_name
  * indexer_binary_name 
```

狮身人面像.yml

```
development:
  port: 9312
  config_file: "RAILS_ROOT/config/development.sphinx.conf"
  searchd_log_file: "RAILS_ROOT/log/searchd.log"
  query_log_file: "RAILS_ROOT/log/searchd.query.log"
  pid_file: "RAILS_ROOT/log/searchd.development.pid"
  bin_path: '/usr/local/bin'
  searchd_binary_name: 'searchd'
  indexer_binary_name: 'indexer'
test:
  port: 9313
production:
  port: 9312 
```

如何在 Windows 中通过 gem 使用 sphinx？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-27T09:51:59.280

Sphinx 不是一个 gem，而是一个独立的程序，认为 sphinx 是一个接口。

Windows 安装 ripon 说明位于 sphinx 网站上 - [http://sphinxsearch.com/docs/1.10/installing-windows.html](http://sphinxsearch.com/docs/1.10/installing-windows.html)

# c# - 如何从控件集合中检索具有特定属性的控件？

> ID：14052362
> 
> 赞同：0
> 
> 时间：2012-12-27T09:30:10.583
> 
> 标签：c#, asp.net, linq

我在这样的 ASP.NET 应用程序中创建了一个菜单应用程序：

```
// HTML
<td runat="server" id="container">

// C#. This logic is creating
// within a LOOP
Label l = new Label("name_blabla");
Panel p = new Panel();
p.Add(l);
container.Controls.Add(p); 
```

在给定的时刻，我将 CSS 类`myclass`分配给标签`l`：

```
l.CssClass="myClass"; 
```

因此容器只有一个面板，其中仅包含一个`myclass`分配了此名称的标签。

目的是在插入所有控件后从容器中获取此面板。我不知道它插入的位置。使用 LINQ 更好。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T09:37:36.993

您可以使用[`OfType<>()`](http://msdn.microsoft.com/en-us/library/bb360913.aspx)过滤面板，然后应用[SelectMany()](http://msdn.microsoft.com/en-us/library/bb534336.aspx)将标签投影到面板内，然后使用[Where()](http://msdn.microsoft.com/en-us/library/bb534803.aspx)检查标签的 CSS 类：

```
Label theLabel
    = container.Controls.OfType<Panel>()
                        .SelectMany(panel => panel.Controls.OfType<Label>())
                        .Where(label => label.CssClass == "MyClass")
                        .FirstOrDefault(); 
```

**编辑：**如果你想匹配面板而不是标签，你可以使用[Any()](http://msdn.microsoft.com/en-us/library/bb534972.aspx)：

```
Panel thePanel
    = container.Controls.OfType<Panel>()
                        .Where(panel => panel.Controls.OfType<Label>().Any(
                            label => label.CssClass == "MyClass"))
                        .FirstOrDefault(); 
```

# java - 如何使用 webdriver 获取元素的所有后代？

> ID：14052368
> 
> 赞同：44
> 
> 时间：2012-12-27T09:30:35.010
> 
> 标签：java, collections, selenium, webdriver

有这个元素有子元素，那些子元素又有子元素等等。我想获取所有元素的后代元素。谢谢。

* * *

## 回答 #1

> 赞同：87
> 
> 时间：2012-12-27T09:55:39.670

试试这个：

（爪哇）

```
List<WebElement> childs = rootWebElement.findElements(By.xpath(".//*")); 
```

（C＃）

```
IReadOnlyList<IWebElement> childs = rootWebElement.FindElements(By.XPath(".//*")); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-27T13:20:31.610

试试这个

```
List<WebElement> allDescendantsChilds = rootWebElement.findElements(By.xpath("//tr[@class='parent']//*")); 
```

以上内容将为您提供**父 tr的所有后代子元素（不仅是直接子元素）**

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2017-10-27T11:31:21.453

试试这个：

```
List<WebElement> childs = rootWebElement.findElements(By.tagName(".//*")); 
```

# function - Matlab ode求解器使用函数中的时间来获取事件中的“值”

> ID：14052370
> 
> 赞同：0
> 
> 时间：2012-12-27T09:30:44.883
> 
> 标签：function, matlab, events, time, ode

我进行了广泛的搜索，并认为我不会是唯一一个遇到这个问题的人，但它看起来像我。

我正在通过 ode15s 解决一首颂歌（我的问题可能很棘手），我使用“事件”选项来找到我的兴趣点。问题是：我在“价值”中使用的等式取决于（除其他外）特定时间（因此价值= f（t，y，y'），我找不到将当前时间传递给这个函数，只有 y 向量可用。

有人有什么想法吗？在此先感谢大家，祝大家假期愉快！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T19:59:03.207

对不起，犯了一个非常愚蠢的错误（使用，而不是;）......

只要在@odefunction(t,y) 和@events(t,y) 中设置它，就可以使用t 参数。

# php - PHP中的下拉菜单

> ID：14052371
> 
> 赞同：-2
> 
> 时间：2012-12-27T09:30:49.033
> 
> 标签：php, html, postgresql

我想在我的 Php 表单中添加一个下拉菜单（后端：postgresql）：

我想以下拉方式显示供应商详细信息：供应商是 1\. Nasik，2\. Hyderabad，3\. 官员

我的代码：

```
<tr>
<td class="lbl_Fonts" height="30">Supplier<font color="red"> *</font> </td>
<td colspan="1">
 <select name="cmbStamp" onChange="" style="width:200px;" >
 <option value='' > SELECT </option>
 <?php
        $sql= "select supplier_name from supplier_details";
        $row =$conn->Exec($sql);
        while(odbc_fetch_into($row,$Record))
        {
         echo "<option value ='" .trim($Record[0]). "'>" . trim($Record[1]) . "</option>";
        }
        odbc_free_result($row);
  ?>
<td width="21%">&nbsp;</td>
 </tr> 
```

任何人都可以帮助我哪里出错了，目前使用此代码显示一个空白下拉菜单。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T09:40:33.860

你试过什么？

您的代码中没有错误检查。

它没有按预期运行的原因之一是您只从数据库中选择了一个字段 (supplier_name)，但试图在表单中添加 2 ($Record[0], $Record[1])。如果其他一切正常，那么通过查看生成的源 html 应该很明显。

您的代码没有显示 $conn 的任何初始化，并且选择没有关闭元素。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T09:38:39.103

关闭标签 select ，然后尝试编写

```
<?php
    $sql= "select supplier_name from supplier_details";
    $row =$conn->Exec($sql);
    while(odbc_fetch_into($row,$Record))
    {?>
     <option value ="<?php echo trim($Record[0])?>"><?php echo trim($Record[1])?></option>
<?php
    }
    odbc_free_result($row);
?>
</select> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-27T09:34:29.953

将此包含`</select>` 在您的代码中

```
<tr>
    <td class="lbl_Fonts" height="30">Supplier<font color="red"> *</font> </td>
    <td colspan="1">
     <select name="cmbStamp" onChange="" style="width:200px;" >
     <option value='' > SELECT </option>
     <?php
            $sql= "select supplier_name from supplier_details";
            $row =$conn->Exec($sql);
            while(odbc_fetch_into($row,$Record))
            {
             echo "<option value ='" .trim($Record[0]). "'>" . trim($Record[1]) . "</option>";
            }
            odbc_free_result($row);
      ?>
    </select>
    <td width="21%">&nbsp;</td>

 </tr> 
```

# android - Activity 中的 Android 选项卡

> ID：14052373
> 
> 赞同：1
> 
> 时间：2012-12-27T09:30:54.900
> 
> 标签：android, android-layout, tabs, android-ui

我有一个非常好的设计想要实现。这种设计在活动内部有选项卡，比如说在图像下的线性布局中。我只能找到关于 tabactivity 或包含整个活动的选项卡。这是可行的还是我应该改变我的设计？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-27T10:02:03.107

Yes, for this you can create a class which can extends **ActivityGroup**.

Here is the beautiful link for TabActivity with the example.

[http://ericharlow.blogspot.in/2010/09/experience-multiple-android-activities.html](http://ericharlow.blogspot.in/2010/09/experience-multiple-android-activities.html)

# java - Google App Engine 全文搜索中的计数表达式

> ID：14052375
> 
> 赞同：1
> 
> 时间：2012-12-27T09:31:00.383
> 
> 标签：java, google-app-engine, full-text-search

如何`count`在 Google App Engine 中使用表达式？

从[doc](https://developers.google.com/appengine/docs/java/search/overview#Building_Queries)，它指出以下内容：

*   数数
*   一元
*   返回此文档的属性值总数。
*   计数（大小）

# java - 将邮件放入文本框

> ID：14052377
> 
> 赞同：0
> 
> 时间：2012-12-27T09:31:08.833
> 
> 标签：java, javascript

我已经在java中编写了一个函数来获得这个。在收到电子邮件时，我将邮件内容存储到外部文件中

```
MIME-Version: 1.0 Received: by 10.216.237.25 with SMTP id       x25mr3166819weq.30.1346350346502; Thu, 30 Aug 2012 11:12:26 -0700 (PDT)Received: by 10.216.123.197 with HTTP; Thu, 30 Aug 2012 11:12:26 -0700 (PDT)Date: Thu, 30 Aug 2012 20:12:26 +0200 Message-ID: <CAEE+wmOpUFC9Nb9wNAVKsCrFRX7GmDwhDya4brB=hvRHXY6q7Q@mail.gmail.com> Subject: ok, lets see ... From: ABCD DEFG <xyz@gmail.com> To: XYX <xyz@yahoo.com>, def@gmail.com Content-Type: multipart/alternative; boundary=000e0cd5f7142581b204c87f9ed5 X-Processed-By: mx3.mail.genotec.ch X-Spam-Checksum: a84a5db7738f685c28343edc93a6546a X-Greylist: Sender IP 209.85.212.179 not delayed X-Spam-Report: ---- Start der SpamAssassin Auswertung  -1.0 ALL_TRUSTED  Passed through trusted hosts only via SMTP    -0.1 SPF_PASS               SPF: sender matches SPF record   0.0 HTML_MESSAGE           BODY: HTML included in message
    -0.1 DKIM_VALID_AU          Message has a valid DKIM or DK signature from author's
                                domain
    -0.1 DKIM_VALID             Message has at least one valid DKIM or DK signature
     0.1 DKIM_SIGNED            Message has a DKIM or DK signature, not necessarily valid
    ---- Ende der SpamAssassin Auswertung X-GIC-MailScanner-SpamScore: -1.199
X-GIC-MailScanner-SpamCheck: ham, hits=-1.199 required=10 scantime="4.74 seconds" origip=209.85.212.179  X-Scanned-By: "MGate 1.0" on 82.195.224.57 
--000e0cd5f7142581b204c87f9ed5  Content-Type: text/plain; charset=ISO-8859-1
hello worldli ...  --000e0cd5f7142581b204c87f9ed5 Content-Type: text/html; charset=ISO-8859-1  hello worldli ... --000e0cd5f7142581b204c87f9ed5-- 
```

我们可以看到它没有对齐..我想根据发件人、收件人、电子邮件的实际内容、日期对数据进行排序（简而言之，我只想要发件人、收件人、日期、实际数据）...... . 我怎样才能使用 JAVASCRIPT 实现这一点。应该避免其他不必要的事情......并且必须在文本框中显示获取的数据......假设四个字段的四个文本框......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T13:24:49.073

您可以使用正则表达式来完成此任务。

您可以为每个字段编写 4 个不同的正则表达式。

# jquery - 如何获取jquery变量的值

> ID：14052379
> 
> 赞同：-1
> 
> 时间：2012-12-27T09:31:14.660
> 
> 标签：jquery

jQuery代码：

```
<script>
     $(document).ready(function() {
        var ma = $("#qty").val();
        var str = $("#reqid").val();
        $("#myform").validate({
            rules: {
                issue_quant_str: {
                    max: ma
                }
            }
        });
    });​
</script> 
```

HTML：

```
<table>
    <tr><td><?php echo $array['item_name']; ?></td>
    <td><?php echo $array['quantity']; ?></td>
    <input type="hidden" value="<?php echo $array['requisition_id']; ?>" id="reqid" /> 
    <td>
        <div id="maxdiv">
            <input type="text" name="issue_quant_<?php echo $array ['requisition_id'];?>" value="<?php echo $array['quantity']; ?>" />
        </div>
    </td>
    <input type="hidden" value="<?php echo $stock_qty; ?>" id="qty" /> 
    <td><?php echo $stock_qty;?></td>
    <td><input type="text" name="rem_<?php echo $array['requisition_id'];?>" required/></td>
</tr>
</table> 
```

在这里，我希望将 var str 值与 issue_quant 连接。我没有得到 str 值。谁能帮帮我..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T09:34:18.013

```
var rules = {};
rules['issue_quant_' + str] = {max:ma};
$("#myform").validate({
    rules: rules
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T09:33:42.000

尝试`var str=$("#reqid").text();`

前提是你`reqid`生活在你的 html 代码中并且里面有一些价值

# java - 设置文件权限总是返回 FALSE

> ID：14052388
> 
> 赞同：12
> 
> 时间：2012-12-27T09:32:06.677
> 
> 标签：java, file, permissions, io, file-permissions

编码：

```
File dir = new File(path);
boolean rc1 = dir.setExecutable(true, false);
boolean rc2 = dir.setReadable(true, false);
boolean rc3 = dir.setWritable(true, false);
if (!rc1 || !rc2 || !rc3){
    logger.warn("One of the permissions set returned false: rc1="+rc1+" rc2="+rc2+" rc3="+rc3 + " [for dir '"+dir+"']");
} 
```

在 Ubuntu 上，所有 3 个调用都返回 false。在我的 Windows 上，只有对 setWritable 的第三次调用返回 false。

目标是创建文件/目录，以便用户（tomcat）和组能够读/写。
但是在 Ubuntu 上创建的文件没有该组的写入权限。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-12-27T11:55:15.103

我找到了解决方案并将回答我自己的问题：
在文件或目录上设置权限时，您首先必须实际创建目录或写入文件，然后才能设置权限。
所以，我一开始做的事情是错误的：

```
File dir = new File(path);
boolean rc1 = dir.setExecutable(true, false); 
```

虽然实际上需要：

```
File dir = new File(path);
dir.mkdirs();
boolean rc1 = dir.setExecutable(true, false);
boolean rc2 = dir.setReadable(true, false);
boolean rc3 = dir.setWritable(true, false); 
```

或者

```
 File f = new File(uploadedFileLocation);
    ImageIO.write(image, "jpg", f);
    boolean rc1 = f.setExecutable(true, false);
    boolean rc2 = f.setReadable(true, false);
    boolean rc3 = f.setWritable(true, false); 
```

然后它将起作用:)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-27T10:01:24.787

来自 javadocs

**setExecutable()：** 返回

当且仅当操作成功时才​​为真。**如果用户无权更改此抽象路径名的访问权限，则操作将失败**。如果 executable 为 false 并且底层文件系统没有实现执行权限，则操作将失败。

还，

**File(String pathname)**通过将给定的路径名​​字符串转换为抽象路径名来 创建一个新的**File 实例。**它创建一个文件实例。它**不会**创建新文件。

创建新文件

```
File f;
  f=new File("myfile.txt");
  if(!f.exists()){
  f.createNewFile();
  System.out.println("New file \"myfile.txt\" has been created 
  to the current directory");
  } 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-27T09:42:11.070

也许您没有在 Linux 中以超级用户身份运行它。可能是您（登录为）本身无权授予文件权限。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-11-06T10:55:22.260

您需要调用 createNewFile()

# objective-c - 如何使用压缩单元格压缩 uipickerview

> ID：14052389
> 
> 赞同：0
> 
> 时间：2012-12-27T09:32:06.877
> 
> 标签：objective-c

如何`UIPickerView`使用压缩单元进行压缩？我的意思是当我压缩时，`UIPickerView`我的单元格文本也会被压缩或拉伸。有谁能够帮我 ？我用

```
dataPickerView.transform = CGAffineTransformMakeScale(1.0, 0.5); 
```

压缩`UIPickerView`.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T10:46:40.610

您必须实现 viewForRow 方法才能这样做。

-(UIView *)pickerView:(UIPickerView *)pickerView viewForRow:(NSInteger)row forComponent:(NSInteger)component reusingView:(UIView *)view {

```
UILabel *label=[[UILabel alloc]init];
[label setNumberOfLines:NSIntegerMax];
[label setText:[array objectAtIndex:row]];
return label; 
```

}

# python - Python中添加字典条目时逗号的作用

> ID：14052396
> 
> 赞同：3
> 
> 时间：2012-12-27T09:33:17.600
> 
> 标签：python, dictionary, add, comma

我有一个简单的问题。

我有一个字典:`table = collections.defaultdict(set)`和一个先前定义的由如下规则组成的语法：

```
Rule(('Noun', ('money',)))
Rule(('Noun', ('book',)))
Rule(('S', ('book',))) 
```

现在，当我输入这个时，什么也没有发生。

```
for rule in grammar:
    if rule.symbols == ("book"):
        table[col - 1, col].add(rule.head) 
```

当我键入此内容时，将添加该条目。

```
for rule in grammar:
    if rule.symbols == ("book",):
        table[col - 1, col].add(rule.head) 
```

两者之间的唯一区别是“书”后面的逗号。这个逗号有什么作用，为什么有必要？

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-27T09:34:49.247

您需要添加逗号以使其成为元组，否则它只是一个字符串。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-27T09:36:12.630

一是字符串，二是元组（，）：

```
>>> ("book")
'book'
>>> ("book",)
('book',) 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-12-27T09:36:43.020

在第一种情况下，`("book")`括号只是对表达式进行分组的一种方式。该表达式的值就是字符串`"book"`。

在第二种情况下，它正在创建一个包含一个元素的元组。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-02-25T08:37:19.023

The comma transform the expression type from `str` (with useless parenthesis around) to `tuple` with single element.

Use `type()` to see this in action:

```
>>> type(("book"))
<class 'str'>
>>> type(("book",))
<class 'tuple'> 
```

# scheduling - 在 wp7 中定期调用后台代理

> ID：14052397
> 
> 赞同：0
> 
> 时间：2012-12-27T09:33:19.987
> 
> 标签：scheduling, windows-phone, background-agents

我正在开发 Windows Phone 应用程序。在这个应用程序中，我想每天早上 9 点启动后台代理的 OnInvoke() 方法，并希望每天下午 6 点自动停止它。我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T11:10:03.993

您无法选择后台代理何时运行。只要手机有足够的电量，它就会在一天中每 30 分钟左右运行大约 15 秒。

但是您可以做的是，在`OnInvoke`方法开始时，检查当前时间。如果当前时间不在要求的时间间隔内，直接退出方法，不做任何处理。

# android - FATAL EXCEPTION: main（地图和路由程序）

> ID：14052400
> 
> 赞同：0
> 
> 时间：2012-12-27T09:33:34.417
> 
> 标签：android, eclipse, android-intent, android-maps

我得到了这些错误。我的程序是读取当前位置并路由地图路径..以前它在我的 Eclipse 上工作..我在一个月前检查过它们..当我今天再次尝试运行它时出现这些错误......“不幸的是 FirstMap 有停止”有人能告诉我是什么原因吗？是因为Eclipse吗？还是 SDK？还是API？我已经测试了 api 8 和 13 ..它不起作用

非常感谢

```
01-18 02:53:14.372: E/AndroidRuntime(806): FATAL EXCEPTION: main
01-18 02:53:14.372: E/AndroidRuntime(806): java.lang.RuntimeException: Unable to start activity ComponentInfo{my.android.map/my.android.map.MyMap}: java.lang.IllegalArgumentException: provider=network
01-18 02:53:14.372: E/AndroidRuntime(806):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1956)
01-18 02:53:14.372: E/AndroidRuntime(806):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1981)
01-18 02:53:14.372: E/AndroidRuntime(806):  at android.app.ActivityThread.access$600(ActivityThread.java:123)
01-18 02:53:14.372: E/AndroidRuntime(806):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1147)
01-18 02:53:14.372: E/AndroidRuntime(806):  at android.os.Handler.dispatchMessage(Handler.java:99)
01-18 02:53:14.372: E/AndroidRuntime(806):  at android.os.Looper.loop(Looper.java:137)
01-18 02:53:14.372: E/AndroidRuntime(806):  at android.app.ActivityThread.main(ActivityThread.java:4424)
01-18 02:53:14.372: E/AndroidRuntime(806):  at java.lang.reflect.Method.invokeNative(Native Method)
01-18 02:53:14.372: E/AndroidRuntime(806):  at java.lang.reflect.Method.invoke(Method.java:511)
01-18 02:53:14.372: E/AndroidRuntime(806):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
01-18 02:53:14.372: E/AndroidRuntime(806):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
01-18 02:53:14.372: E/AndroidRuntime(806):  at dalvik.system.NativeStart.main(Native Method)
01-18 02:53:14.372: E/AndroidRuntime(806): Caused by: java.lang.IllegalArgumentException: provider=network
01-18 02:53:14.372: E/AndroidRuntime(806):  at android.os.Parcel.readException(Parcel.java:1331)
01-18 02:53:14.372: E/AndroidRuntime(806):  at android.os.Parcel.readException(Parcel.java:1281)
01-18 02:53:14.372: E/AndroidRuntime(806):  at android.location.ILocationManager$Stub$Proxy.requestLocationUpdates(ILocationManager.java:646)
01-18 02:53:14.372: E/AndroidRuntime(806):  at android.location.LocationManager._requestLocationUpdates(LocationManager.java:589)
01-18 02:53:14.372: E/AndroidRuntime(806):  at android.location.LocationManager.requestLocationUpdates(LocationManager.java:453)
01-18 02:53:14.372: E/AndroidRuntime(806):  at my.android.map.MyMap.onCreate(MyMap.java:104)
01-18 02:53:14.372: E/AndroidRuntime(806):  at android.app.Activity.performCreate(Activity.java:4465)
01-18 02:53:14.372: E/AndroidRuntime(806):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1049)
01-18 02:53:14.372: E/AndroidRuntime(806):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1920) 
```

我的假设解决方案：

至于现在..问题仍然是一样的..

我现在更新我的 sdk eclipse..一旦更新完成..我会更新（18.01.13-今天）它在这里工作或不工作..

# iphone - 如何在 ios6 Xcode 中禁用 NSConstraint？

> ID：14052403
> 
> 赞同：1
> 
> 时间：2012-12-27T09:33:42.613
> 
> 标签：iphone, ios, xcode, ios6, autosize

> **可能重复：**
> [删除界面生成器中的自动布局（约束）](https://stackoverflow.com/questions/9566789/remove-autolayout-constraints-in-interface-builder)

我正在创建一个应用程序，我不希望启用 NSConstraints，因为当我运行应用程序时它们正在 UIViewController 中移动东西。

有什么办法可以禁用它们吗？也许每个视图控制器中都有一些代码，或者只是一个设置。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-27T09:35:15.517

`autolayout`在您的 xib 文件检查器中禁用。

![自动布局](../Images/8f4138bb9073ac821d0c0a837bd61be5.png)

检查此[自动布局](http://www.raywenderlich.com/20881/beginning-auto-layout-part-1-of-2)教程以解决问题，而不禁用它。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-27T09:36:50.860

转到笔尖打开属性检查器转到第一个选项卡向下滚动您可以看到自动布局选项

取消选中该复选框。看图片做同样的事情：

![在此处输入图像描述](../Images/c1c4a0229977b6be5d3ab55a06fe40bf.png)

# version-control - CVS 分支在服务器上的实际位置

> ID：14052409
> 
> 赞同：0
> 
> 时间：2012-12-27T09:34:11.450
> 
> 标签：version-control, cvs, cvs2svn

我项目中的 CVS 存储库有一个 HEAD 代码和 8 个其他分支。以“/local/cvs/srcjboss”提及的服务器位置仅包含 HEAD 分支中的项目。

服务器上是否有可以访问所有分支代码的物理位置？我需要 CVS 到 SVN 迁移的服务器位置。

如果有帮助，我们正在使用 linux 服务器

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T09:24:04.017

要使用 cvs2svn 将 CVS 历史记录转换为 Subversion，您需要对中央 CVS 存储库中的数据进行文件系统级别的访问。访问代码签出的工作副本是*不够的。*从你的问题中，你并不清楚你有哪些`/local/cvs/srcjboss`。

一个 CVS 存储库可以从它的 CVSROOT 子目录中识别出来，并且有很多文件命名为您的项目文件，但附加了“,v”，例如“Makefile,v”或“index.html,v”或“build.xml,v” . 这些文件中的每一个都包含项目中相应文件的完整历史记录（包括分支），格式为 rcsfile(5)。存储库可能还包含“阁楼”子目录，其中包含 HEAD 中不存在的文件的历史记录。

另一方面，CVS 工作副本包含每个文件的一个特定版本（没有“，v”后缀），以及`CVS`每个项目目录中的子目录。CVS 工作副本不包含任何项目历史记录。

那么您`/local/cvs/srcjboss`的 CVS 存储库是工作副本还是工作副本？

如果您有一个工作副本并且正在尝试查找中央存储库，请查看名为`CVS/Root`. 它将告诉您从中签出工作副本的存储库的位置。

# android - 使用 Socket 连接模拟器

> ID：14052412
> 
> 赞同：0
> 
> 时间：2012-12-27T09:34:27.190
> 
> 标签：android, android-emulator

我试图使用 SocketServer 来设置服务器

```
int i =1, PORT = 6666;
ServerSocket server;
Socket client;
try {
    server = new ServerSocket(6666);
    for(;;){
        client = server.accept();//fail in here
        textView.setText("server accept..." + i);
        //new MyHttpServer(client, i, PORT).start();
        i++;
    }
} catch (IOException e) {
    // TODO Auto-generated catch block
    //e.printStackTrace();
    textView.setText("Fail...");
} 
```

但是，该应用程序始终停止在`server.accept()`. 我已经为这个应用程序添加了互联网权限。我不知道为什么？

更新：我找到了原因。这是因为线程无法从 Active 实例启动。我在没有线程的情况下将 server.accept() 放在了 onStart 中。现在我为它打开一个新的 Runnable，然后修复

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T09:59:50.213

您的应用程序无法启动服务器的原因可能有多种。我最初的猜测是您正在尝试在模拟器或设备上运行代码，并且您已经有一些其他应用程序在该端口上侦听。

您必须检查/提供`logcat`跟踪才能找到错误的原因。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T10:20:08.563

I think so your app will wait for client with port 6666.

```
 server.accept();// return socket 
```

Above code will return socket if client is available.For more details and clearity you can refer these links::

[http://www.happygeek.in/socket-programming-in-android](http://www.happygeek.in/socket-programming-in-android)

[http://www.edumobile.org/android/android-development/socket-programming/](http://www.edumobile.org/android/android-development/socket-programming/)

# sql-server - 数据阅读器没有从表中读取数据

> ID：14052415
> 
> 赞同：0
> 
> 时间：2012-12-27T09:34:46.553
> 
> 标签：sql-server, c#-4.0

我正在使用数据阅读器将特定列数据显示到网格视图中。实际上我想从表中获取最后一天的记录。

```
 DateTime yestarday = DateTime.Today.AddDays(-1);
            string query = "select NAME,CLOSING_READING,RATE  from CASHSALE_DETAIL where DATE = '" + yestarday + "'";
            SqlCommand cmd = new SqlCommand();
            cmd.Connection = Conn;
            cmd.CommandText = query;
            SqlDataReader dr = cmd.ExecuteReader();

            while (dr.Read())
            {
                CashSaleVoucherGridView.Rows.Add(num, "", dr["NAME"].ToString(), dr["CLOSING_READING"].ToString(), "", "", "", dr["RATE"].ToString());
                num++;
            } 
```

在上面给定的查询数据阅读器返回我 0 记录。有什么建议吗？？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T09:42:28.137

首先检查您的选择是否查询它的返回记录，然后添加 dr.HasRows 以检查您的数据阅读器是否返回行

```
DateTime yesterday = DateTime.Today.AddDays(-1);
string query = "select NAME,CLOSING_READING,RATE  from CASHSALE_DETAIL where DATE = @date";
SqlCommand cmd = new SqlCommand();
cmd.Connection = Conn;
cmd.CommandText = query;
cmd.Parameters.AddWithValue("@date", yesterday );
SqlDataReader dr = cmd.ExecuteReader();
if (dr.HasRows)
{
     while (dr.Read())
            {
                CashSaleVoucherGridView.Rows.Add(num, "", dr["NAME"].ToString(), dr["CLOSING_READING"].ToString(), "", "", "", dr["RATE"].ToString());
                num++;
            }
}
else
{
//Throw error ("No rows found.");
} 
```

此致

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T09:37:14.720

问题在于这个声明

```
string query = "select NAME,CLOSING_READING,RATE  from CASHSALE_DETAIL where DATE = '" + yestarday + "'"; 
```

使用参数化命令

```
DateTime yesterday = DateTime.Today.AddDays(-1);

string query = "select NAME,CLOSING_READING,RATE  from CASHSALE_DETAIL where DATEADD(dd, 0, DATEDIFF(dd, 0, DATE )) = DATEADD(dd, 0, DATEDIFF(dd, 0, @yesterday))";

SqlCommand cmd = new SqlCommand();
cmd.Connection = Conn;
cmd.CommandText = query;
cmd.Parameters.AddWithValue("@yesterday", yesterday);
SqlDataReader dr = cmd.ExecuteReader(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-27T10:47:22.290

您可以像这样格式化日期字段

> ```
> string query = "select NAME,CLOSING_READING,RATE  from CASHSALE_DETAIL
> where convert(varchar(15),DATE,101)= '" + yestarday + "'"; 
> ```

但是@BizApps 和@mdcuesta 提到的方法如下所示的错误非常少

```
cmd.Parameters.AddWithValue("@yesterday", yesterday); 
```

# xml-parsing - 解析 hh:mm:ss[.xxx]

> ID：14052417
> 
> 赞同：0
> 
> 时间：2012-12-27T09:34:50.407
> 
> 标签：xml-parsing

我想解析 .XML 文件中的时间表达式 hh:mm:ss.xxx （小时、分钟、秒、毫秒）。它应该看起来像这样：

`<condition property="illegal-tc"> <matches pattern="the_pattern" string="${timeCode}"/> </condition>`

我需要的是模式 \d{2}:\d{2}:\d{2}.\d{3} 的否定。

我尝试做 ^[\d{2}:\d{2}:\d{2}.\d{3}]$ 但它不能正常工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T10:52:45.823

该`[...]`构造匹配那些`[`和之间的字符集`]`。要获得否定匹配，您需要`(?! ... )`“否定前瞻”构造。

该模式`^(?!\d{2}:\d{2}:\d{2}\.\d{3}).*$`匹配任何*不是*“hh:mm:ss.fff”的东西。

请注意，单个数字小时或少于 3 位数字的一小部分仍将匹配！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-28T14:20:26.873

我找到了另一种解决方案：执行“legal-tc”并在失败条件下使用这样的除非标签否定它：

`<condition property="legal-tc">`

```
 <matches pattern="^\d{2}:\d{2}:\d{2}.\d{3}$" string="${timeCode}"/> 
```

`</condition>`

`<fail message="Illegal Time Code" unless="legal-tc"/>`

# windows - 在受信任的根证书存储上安装 SSL 证书的脚本

> ID：14052423
> 
> 赞同：13
> 
> 时间：2012-12-27T09:35:35.307
> 
> 标签：windows, batch-file, ssl-certificate

我想在 Windows（XP 和 7）中为 IE、Firefox 和 Chrome 安装自签名证书。

我需要为多个系统安装证书，所以我打算创建 .bat 文件来为浏览器安装证书。谷歌搜索时我得到了以下命令

> certutil -addstore -f -enterprise -user root root_ca.cer

但它仅适用于 IE。Chrome 和 Firefox 有什么选择。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-10-15T23:39:08.220

有点旧的帖子，但我想无论如何我都会投入两美分。没错，批处理脚本中的该命令会将证书安装`root_ca.cer`到受信任的 CA 存储中。我会将这一行修改为：

```
certutil -addstore -f -enterprise -user root "%~dp0root_ca.cer" 
```

这样，shell 将扩展`%~dp0`到执行脚本的路径，因此您可以从 UNC 路径通过网络运行它，它仍然可以工作。

在回答您的另一个问题时，Chrome 将（在撰写本文时）从 Windows 证书存储中读取，因此无需做任何特别的事情；运行脚本后只需重新启动 chrome，它应该很甜。

至于 Mozilla，[请查看这篇文章](https://stackoverflow.com/questions/1435000/programmatically-install-certificate-into-mozilla)以获取执行此操作的脚本。简单！

# keystore - 使用 keytool 生成“过期”的 SSL 证书

> ID：14052428
> 
> 赞同：9
> 
> 时间：2012-12-27T09:36:06.103
> 
> 标签：keystore, keytool

我正在使用以下命令创建我的密钥库：

```
keytool -genkey -keystore myStore.keystore -keyalg RSA -keysize 1024 -alias myAlias 
```

我怎样才能生成一个过期日期（使用这个？我想用过期证书测试我的应用程序的行为）。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2016-05-10T07:09:39.387

您可以使用以下参数使用 keytool 命令生成过期证书。

-开始日期

-有效性

虽然有效性参数仅需要天数作为输入，但 startdate 参数可用于提及从有效性开始的时间。startdate 参数的输入格式 [yyyy/mm/dd][HH:MM:SS]

有关详细信息，请参阅此链接 [http://docs.oracle.com/javase/7/docs/technotes/tools/windows/keytool.html](http://docs.oracle.com/javase/7/docs/technotes/tools/windows/keytool.html)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2019-03-07T09:30:28.473

您可以使用以下`openssl`命令生成过期证书，这模仿了签署证书的官方流程。

**注意**：仅在 Linux 上测试。

# 假设自己是 CA

```
#Create CA key, which means you are now the CA using root.key and root.cer to sign certificates
openssl genrsa 4096 > root.key
#Create CA certificate expired ten years later
openssl req -new -x509 -key root.key -out root.cer -days 3650 
```

# 现在，您是申请 CA 签名证书的人

```
#Generates your own private key 
openssl genrsa 4096 > server.key
#Build a Certificate Signing Request
openssl req -new -key server.key -out server.csr 
```

# 现在你又是 CA

```
#sign the certificate and make the certificate expired 1 day ago. Pay attention to the negative -days argument( not working on MacOS )
openssl x509 -req -in server.csr -CA root.cer -CAkey root.key -CAcreateserial -out server.cer -days -1 
```

# 然后你可以检查日期

```
openssl x509 -noout -text -in server.cer 
```

`Validity Not Before: Mar 7 09:11:13 2019 GMT Not After : Mar 6 09:11:13 2019 GMT`

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-27T10:10:23.903

使用 java keytool，keystore 证书的最短有效期可以是 1 天。

编辑：看起来`-startdate`@shyam0191 已经回答了一个选项。

因此，您**不能（更正：您实际上可以）**生成具有过去日期的证书。我建议使用以下命令，它会生成一个有效期为 1 天的证书，第二天您就可以使用它进行测试：

```
keytool -selfcert -alias Test -genkey -keystore myStore.keystore -keyalg RSA -validity 1 
```

或使用@shyam0191 的答案，最终结果相同（但更快）。

# javascript - 使用时间选择器选择的 jQuery 验证开始时间和结束时间

> ID：14052432
> 
> 赞同：0
> 
> 时间：2012-12-27T09:36:24.403
> 
> 标签：javascript, jquery, jquery-ui, datepicker

我想验证使用 12 小时格式的时间选择器选择的开始时间和结束**时间**。结束时间应大于开始时间。我使用了一个`if`语句，但是当测试使用诸如上午 8:00 作为开始时间和下午 1:00 作为结束时间的值时，它不起作用。我能做些什么来解决这个问题。有人请帮我解决这个问题。从昨天开始，我就一直坚持这一点。我只需要**时间**，我**不需要日期**。

```
$("#dateTimeAddButton").click(function () 
{       
    var Date=$('#myDatePickerId').val()
    var startTime = $('#i').val();   
    var endTime   = $('#i1').val();    
    if (startTime > endTime) 
    {
        alert('End time always greater then start time.');
    }
}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-27T09:40:57.573

首先转换为最低面额（此处为分钟）。然后比较一下。

```
st = minFromMidnight(startTime);
et = minFromMidnight(endTime);
if(st>et){
    alert("End time must be greater than start time");
}

function minFromMidnight(tm){
 var ampm= tm.substr(-2)
 var clk = tm.substr(0, 5);
 var m  = parseInt(clk.match(/\d+$/)[0], 10);
 var h  = parseInt(clk.match(/^\d+/)[0], 10);
 h += (ampm.match(/pm/i))? 12: 0;
 return h*60+m;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-01-19T12:04:48.097

请尝试以下代码，以防您的时间长度超过 6 个字符，例如上午 10:00 而不是上午 9:00 会在代码上方引发错误。

我对上面的代码做了一些小的改动，它对我来说就像魅力一样。

```
$('#btnSubmit').on('click', function () {

            var startTime = $('#txtJobStartTime').val();
            var endTime = $('#txtJobEndTime').val();

            var st = minFromMidnight(startTime);
            var et = minFromMidnight(endTime);
            if (st > et) {
                alert('End time always greater then start time.');
                return false;
            }

            function minFromMidnight(tm) {
                var ampm = tm.substr(-2);
                var clk;
                if (tm.length <= 6) {
                    clk = tm.substr(0, 4);
                } else {
                    clk = tm.substr(0, 5);
                }
                var m = parseInt(clk.match(/\d+$/)[0], 10);
                var h = parseInt(clk.match(/^\d+/)[0], 10);
                h += (ampm.match(/pm/i)) ? 12 : 0;
                return h * 60 + m;
            }
        });
```

# makefile - 编写可重用代码的最佳实践

> ID：14052444
> 
> 赞同：7
> 
> 时间：2012-12-27T09:36:54.043
> 
> 标签：makefile

在 s 中编写可重用代码的最佳实践是`Makefile`什么？

假设我有一个 Makefile：

```
.PHONY: all task01-all task01-clean task01-run task02-all task02-clean task02-run

all: task01-all task02-all

###############################################################################
task01-all: task01-clean task01 task01-run

task01-clean:
     rm task01 task01.{exi,o} -f

task01:
    compiler task01.ext -O2 --make

task01-run:
    ./task01

###############################################################################
task02-all: task02-clean task02 task02-run

task02-clean:
    rm task02 task02.{exi,o} -f

task02:
    compiler task02.ext -O2 --make

task02-run:
    ./task02 
```

现在我想添加新的任务系列（task03），我需要复制粘贴整个部分，制作`s/02/03/`它并将它们添加到`.PHONY`部分 - 它很吵，令人作呕而且不正确。

我怎样才能避免这种情况？我可以用模板重新定义所有任务，以便在一行中添加新的任务组吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-27T15:04:35.900

由于问题是关于在 Makefiles 中编写可重用的代码，我将举例说明如何在 GNU Make 中使用模式规则（看起来这就是你在使用的，因为你提到了`.PHONY`目标）。但是，如果您没有使用 Make 的任何依赖项检查，则使用 shell 脚本执行此操作可能会更简单——例如：

```
#!/bin/sh
TASKS="task01 task02 task03"

for i in $TASKS; do
    rm $i $i.ext $i.o -f;
    compiler $i.ext -O2 --make;
    ./$i;
done 
```

但是，要将原则扩展到 Make，我们还有另一个问题需要解决。表格行：

```
task01-all: task01-clean task01 task01-run 
```

不要告诉 Make 以什么顺序构建先决条件——只是它们都需要在`task01-all`构建之前完成。相反，要运行的每个步骤都应取决于它之前的步骤。像这样的东西：

```
TASKS=task01-run task02-run task03-run

.PHONY: all $(TASKS) $(TASKS:run=clean)

all: $(TASKS)

$(TASKS:run=clean): %-clean:
    rm $* $*.ext $*.o -f

%: %.ext | %-clean
    compiler $< -O2 --make

$(TASKS): %-run: %
    ./$< 
```

规则`%`被称为“模式规则”，它们是避免为不同目标多次重写相同规则的好工具。一个警告是 Make 通常不会检查`.PHONY`目标的模式规则。我们通过在这些规则前面加上目标列表和第二个冒号（例如，）来明确地告诉 Make 这样做`$(TASKS):`。

由于工作`task01-run`需要`task01`，我们使`%-run`目标依赖于`%`. 此外，您的 Makefile 显示您希望每次都运行 clean，因此我们`%`依赖`%-clean`. 由于`%-clean`实际上不产生任何输出，因此我们将其设为“仅订单”依赖项——Make 不会查找时间戳或任何内容，它只会在`%-clean`需要运行规则时首先运行`%`规则。“仅订购”依赖项放在 a 之后`|`：

```
%: %.ext | %-clean 
```

值得一提的是，Make 的最大优势之一是它可以通过不重复不需要重复的工作来节省时间——即，它只在依赖项比目标更新时运行规则。因此，您可以取消对 的依赖`%-clean`，这将导致 make 仅在`compiler $< -O2 --make`更新`%.ext`时运行`%`：

```
%: %.ext
    compiler $< -O2 --make 
```

然后，您可以添加一条规则来运行所有`%-clean`目标：

```
.PHONY: all $(TASKS) $(TASKS:run=clean) clean

clean: $(TASKS:run=clean) 
```

最后一件事：我在食谱中使用了一些特殊的变量。`$@`代表正在构建的目标。`$<`代表第一个依赖。`$*`代表模式规则的“词干”（即，由 匹配的部分`%`）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-27T14:22:47.553

看起来像我正在寻找的东西：

```
ALLS=task01-all task02-all
BUILDS=${ALLS:-all=-build}
CLEANS=${ALLS:-all=-clean}
RUNS=${ALLS:-all=-run}

.PHONY: all $(ALLS) $(CLEANS) $(BUILDS) $(RUNS)

all: $(ALLS)

###############################################################################
$(ALLS): $(CLEANS) $(BUILDS) $(RUNS)

$(CLEANS):
        rm ${@:-clean=} ${@:-clean=}.{ext,o} -f

$(BUILDS):
        compiler ${@:-build=}.ext -O2 --make

$(RUNS):
        ./${@:-run=} 
```

# azure-media-services - 如何播放通过代码动态获取的资产的安全流式 URL（在 Azure 媒体服务中）

> ID：14052450
> 
> 赞同：0
> 
> 时间：2012-12-27T09:37:24.467
> 
> 标签：azure-media-services

我正在使用 Azure 媒体服务和 Silverlight 播放器来播放流式 url

我能够摄取视频文件并将其编码为资产文件，但是当我播放流式 URL 时，我遇到了问题。

我使用以下代码来获取网址...

```
context = new CloudMediaContext(_accountName, _accountKey);
 IAsset myAsset = GetAsset("UUID:7a32b941-30bd-4c96-bf4e-26df5022eec5");
 var theManifest = from f in myAsset.AssetFiles
 where f.Name.EndsWith(".ism")
 select f;
 var manifestFile = theManifest.First();
 IAccessPolicy streamingPolicy = _context.AccessPolicies.Create("Streaming policy",
 TimeSpan.FromDays(10),
 AccessPermissions.Read);
 ILocator originLocator = _context.Locators.CreateSasLocator(myAsset, streamingPolicy, DateTime.UtcNow.AddMinutes(-500));
 GetAssetSasUrlList(myAsset, originLocator);
 string urlForClientStreaming = originLocator.Path + manifestFile.Name + "/manifest";
 Console.WriteLine("URL to manifest for client streaming: ");
 Console.WriteLine(urlForClientStreaming); 
```

这个网址就像——

[https://mediasvc06w4dq5k8vd08.blob.core.windows.net/asset-064ed2d5-e42d-4c49-98eb-a712db5c614f?st=2012-12-26T23%3A04%3A22Z&se=2013-01-05T23%3A04%3A22Z&sr=c&si 9350bd2f-ec23-40b2-b27a-248bba01b97e&sig=oGgesnr8mXjCdTM5Dz%2FQpFRBDR0g0%2F60ECoXY14EvsA%3DBigBuckBunny.ism/manifest](https://mediasvc06w4dq5k8vd08.blob.core.windows.net/asset-064ed2d5-e42d-4c49-98eb-a712db5c614f?st=2012-12-26T23%3A04%3A22Z&se=2013-01-05T23%3A04%3A22Z&sr=c&si=9350bd2f-ec23-40b2-b27a-248bba01b97e&sig=oGgesnr8mXjCdTM5Dz%2FQpFRBDR0g0%2F60ECoXY14EvsA%3DBigBuckBunny.ism/manifest)

它不工作。

当我直接将此网址粘贴到浏览器上时，出现以下错误

AuthenticationFailedServer 未能对请求进行身份验证。确保 Authorization 标头的值正确形成，包括签名。RequestId:154422cf-822e-4bbc-af2a-fa69273dfb89 时间:2012-12-27T08:57:30.9509847ZSignature 字段格式不正确。

但是，如果我从门户网站（www.manage.windowsazure.com）发布资产——我会喜欢在 protal 上关注 url。

[http://mediaervices.origin.mediaservices.windows.net/5edbeae7-c3e6-45c5-bc5c-70f46b526cb5/BigBuckBunny.ism/Manifest](http://mediaervices.origin.mediaservices.windows.net/5edbeae7-c3e6-45c5-bc5c-70f46b526cb5/BigBuckBunny.ism/Manifest)

它适用于我的silverlight播放器..

现在的问题是我没有从代码中获取以 http 开头的 url，并且以 https 开头的 url 不适用于我的播放器。

我猜是它的安全问题，并试图在 winows azure 中托管我的播放器并尝试在那里播放但没有成功。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-21T08:42:52.080

不，不是安全问题。您正在为 Smooth 资产请求 SAS url，您需要一个 Origin URL。正确的代码片段在这里，在我的博客上： [http ://blog-ndrouin.azurewebsites.net/?p=1931](http://blog-ndrouin.azurewebsites.net/?p=1931)

具体来说：

```
 private static string GetStreamingUrl(CloudMediaContext context, string outputAssetId)
    {
        var daysForWhichStreamingUrlIsActive = 365;

        var outputAsset = context.Assets.Where(a => a.Id == outputAssetId).FirstOrDefault();

        var accessPolicy = context.AccessPolicies.Create(outputAsset.Name, TimeSpan.FromDays(daysForWhichStreamingUrlIsActive), AccessPermissions.Read | AccessPermissions.List);

        var assetFiles = outputAsset.AssetFiles.ToList();

        var assetFile = assetFiles.Where(f => f.Name.ToLower().EndsWith("m3u8-aapl.ism")).FirstOrDefault();
        if (assetFile != null)
        {
            var locator = context.Locators.CreateLocator(LocatorType.OnDemandOrigin, outputAsset, accessPolicy);

            Uri hlsUri = new Uri(locator.Path + assetFile.Name + "/manifest(format=m3u8-aapl)");
            return hlsUri.ToString();
        }

        assetFile = assetFiles.Where(f => f.Name.ToLower().EndsWith(".ism")).FirstOrDefault();
        if (assetFile != null)
        {
            var locator = context.Locators.CreateLocator(LocatorType.OnDemandOrigin, outputAsset, accessPolicy);
            Uri smoothUri = new Uri(locator.Path + assetFile.Name + "/manifest");
            return smoothUri.ToString();
        }

        assetFile = assetFiles.Where(f => f.Name.ToLower().EndsWith(".mp4")).FirstOrDefault();
        if (assetFile != null)
        {
            var locator = context.Locators.CreateLocator(LocatorType.Sas, outputAsset, accessPolicy);
            var mp4Uri = new UriBuilder(locator.Path);
            mp4Uri.Path += "/" + assetFile.Name;
            return mp4Uri.ToString();
        }
        return string.Empty;
    } 
```

# multithreading - 为使用 QtConcurrent 运行的线程设置堆栈大小

> ID：14052451
> 
> 赞同：0
> 
> 时间：2012-12-27T09:37:27.790
> 
> 标签：multithreading, qt, qthread, qtconcurrent

如何设置线程运行的堆栈大小`QtConcurrent`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T12:00:05.460

这实际上是不可能的（对此[https://bugreports.qt-project.org/browse/QTBUG-25​​68](https://bugreports.qt-project.org/browse/QTBUG-2568)有更改请求）。您必须`QThread`改用，并`setStackSize()`在启动线程之前调用。

# sql - 选择所有包含一件以上商品的订单并检查所有商品状态

> ID：14052456
> 
> 赞同：0
> 
> 时间：2012-12-27T09:37:54.407
> 
> 标签：sql, tsql, sql-server-2005

我有 2 张桌子：

订单：

```
Id   |  Status
-----+--------
 1   |      OK
 2   | WAITING
 3   | WAITING
 4   |      OK
 5   |      OK
 6   |      OK 
```

和 Order_details：

```
Id   |  Order_Id  |  Status
-----+------------+--------
 1   |         1  |      S1
 2   |         1  |      S1
 3   |         2  |      S1
 4   |         4  |      S2
 5   |         4  |      S2
 6   |         4  |      S3
 7   |         5  |      S1
 8   |         5  |      S1 
```

我需要做的是选择所有具有多个 Order_detail 的订单，并且订单状态必须为“OK”，并且每个 order_detail**必须**在 (S1,S2) 中具有状态

我做了这样的事情：

```
SELECT O.Id FROM Orders O 
            JOIN Order_details OD 
                ON O.Id=OD.Order_Id
WHERE O.Status='OK' AND OD.Status IN ('S1','S2')
GROUP BY O.Id
HAVING count(DISTINCT OD.Id)>1 
```

但这会返回具有多个 Order_details 满足条件的所有订单。

我确信这部分很好：

```
SELECT O.Id FROM Orders O 
            JOIN Order_details OD 
                ON O.Id=OD.Order_Id
WHERE O.Status='OK'
GROUP BY O.Id
HAVING count(DISTINCT OD.Id)>1 
```

但我必须检查上述订单的每个 Order_detail 是否有状态 IN (S1, S2)。

因此，如果 Order 将有 2 个详细信息，其中一个具有 status=S1 和第二个 S3，则应跳过此订单。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-27T09:43:58.140

```
SELECT O.Id 
FROM Orders O 
JOIN Order_details OD ON O.Id=OD.Order_Id
WHERE O.Status='OK'
GROUP BY O.Id
HAVING count(DISTINCT OD.Id)>1
AND SUM(CASE WHEN OD.Status NOT IN ('S1','S2') 
             THEN 1 
             ELSE 0 
        END) = 0 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-27T09:46:54.323

```
select O.id
from orders O inner join order_details OD
on O.Id=OD.Order_Id and O.Status='OK' AND OD.Status IN ('S1','S2')
GROUP BY O.Id
HAVING count(DISTINCT OD.Id)>1 
```

# ffmpeg - 我如何通过 libavformat 将 H264 流混合到 MP4 文件中

> ID：14052457
> 
> 赞同：3
> 
> 时间：2012-12-27T09:37:55.173
> 
> 标签：ffmpeg, h.264, mp4, libavformat

我想实现一个应用程序，首先解码一个多媒体文件（例如test.mp4文件，视频编解码器id是H264），得到一个视频流和一个音频流，然后在音频流中做一些不同，最后编码视频流（使用 libx264）和音频流到结果文件（result.mp4）。为了提高效率，我省略了视频流的解码和编码，我通过函数“av_read_frame”得到视频包，然后通过函数“av_write_frame”直接输出到结果文件中。但是输出文件中没有图片，输出文件的大小相当小。

我跟踪了ffmpeg的代码，发现在函数“av_write_frame->mov_write_packet->ff_mov_write_packet”中，会调用函数“ff_avc_parse_nal_units”来获取nal单元的大小，但是返回值很小（比如208字节）。

我发现MP4文件中的H264码流没有以Annex-B格式存储，所以找不到起始码（0x000001），现在我的问题是如何将H264码流改成Annex-B格式，并制作行得通吗？我在每一帧的开头手动添加了启动代码，但它仍然无法正常工作。

任何人都可以给我任何提示吗？非常感谢。以下是与我类似的代码：

```
 // write the stream header, if any
    av_write_header(pFormatCtxEnc);

    .........
    /**
    * Init of Encoder and Decoder
    */

    bool KeyFlag = false;
    bool KeyFlagEx = false;
    // Read frames and save frames to disk
    int iPts = 1;
    av_init_packet(&packet);
    while(av_read_frame(pFormatCtxDec, &packet)>=0)
    {
            if (packet.flags == 1)
                    KeyFlag = true;

            if (!KeyFlag)
                    continue;

            if (m_bStop)
            {
                    break;
            }

            // Is this a packet from the video stream?
            if(packet.stream_index == videoStream)
            {
                    currentframeNum ++;
                    if (progressCB != NULL && currentframeNum%20 == 0)
                    {
                            float fpercent = (float)currentframeNum/frameNum;
                            progressCB(fpercent,m_pUser);
                    }

                    if (currentframeNum >= beginFrame && currentframeNum <= endFrane)
                    {
                            if (packet.flags == 1)
                                    KeyFlagEx = true;

                            if (!KeyFlagEx)
                                    continue;
                            packet.dts = iPts ++;
                            av_write_frame(pFormatCtxEnc, &packet);

                    }
            }
            // Free the packet that was allocated by av_read_frame
    }

    // write the trailer, if any
    av_write_trailer(pFormatCtxEnc);

    /**
    * Release of encoder and decoder
    */

    return true; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-06T04:05:56.283

你可以试试这个：[libavcodec/h264_mp4toannexb_bsf.c](http://ffmpeg.org/doxygen/0.6/h264__mp4toannexb__bsf_8c-source.html)。它将不带起始码的比特流转换为带起始码的比特流。

使用您的源文件，是否`ffmpeg -i src.mp4 -vcodec copy -an dst.mp4`有效？如果添加它会起作用`-bsf h264_mp4toannexb`吗？（当然，都使用与您尝试以编程方式使用的相同版本/构建的ffmpeg）

# ios - 键盘隐藏的文本字段

> ID：14052458
> 
> 赞同：2
> 
> 时间：2012-12-27T09:37:58.120
> 
> 标签：ios, uitextfield, iphone-softkeyboard

我有一些`textfield`在可见时被键盘遮挡的 's。我想当键盘可见时我需要向上移动视图。我如何检测到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-27T10:39:24.357

检查`Managing the Keyboard - Receiving Keyboard Notifications`文本、Web 和 iOS 编辑编程指南中的部分：http: [//developer.apple.com/library/ios/#documentation/StringsTextFonts/Conceptual/TextAndWebiPhoneOS/KeyboardManagement/KeyboardManagement.html](http://developer.apple.com/library/ios/#documentation/StringsTextFonts/Conceptual/TextAndWebiPhoneOS/KeyboardManagement/KeyboardManagement.html)

`When the keyboard is shown or hidden, iOS sends out the following notifications to any registered observers:`

`UIKeyboardWillShowNotification` `UIKeyboardDidShowNotification` `UIKeyboardWillHideNotification` `UIKeyboardDidHideNotification`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-27T09:38:52.380

也许您正在寻找[这个](http://developer.apple.com/library/ios/#documentation/uikit/reference/UITextFieldDelegate_Protocol/UITextFieldDelegate/UITextFieldDelegate.html#//apple_ref/occ/intfm/UITextFieldDelegate/textFieldDidBeginEditing%3a)来检测键盘何时在可编辑的文本字段上可见。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-27T09:43:28.373

我认为你是 iOS 的新手。

我认为您的视图包含 5 - 10 个文本字段，使用将一一输入文本。

如果这是您的情况，请将所有文本字段放在 uiscrollview 中，以便您可以在需要时向上滚动。

这是所有程序员都遵循的正常方法。

如果这是您的情况，请告诉我，我可以给您一些示例链接。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-27T09:50:53.970

```
[UIView beginAnimations:nil context:NULL];
[UIView setAnimationDuration:0.35f]; 
CGRect frame = self.view.frame; 
frame.origin.y = -60; 
[self.view setFrame:frame]; 
[UIView commitAnimations];
[textField resignFirstResponder]; 
```

如果您希望将视图设置在与以前相同的位置，则可以使用此代码上下移动视图，然后您可以使用相同的代码

```
[UIView beginAnimations:nil context:NULL];
[UIView setAnimationDuration:0.35f]; 
CGRect frame = self.view.frame; 
frame.origin.y = 0; 
[self.view setFrame:frame]; 
[UIView commitAnimations];
[textField resignFirstResponder]; 
```

但是 y 的不同值你可以使用 frame.origin.y 并相应地调整它..

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-27T11:41:53.920

[该](http://developer.apple.com/library/ios/#documentation/StringsTextFonts/Conceptual/TextAndWebiPhoneOS/KeyboardManagement/KeyboardManagement.html)文档包含您需要的所有代码

# java - 从 Java 应用程序调用axis2 Web 服务

> ID：14052462
> 
> 赞同：1
> 
> 时间：2012-12-27T09:38:37.663
> 
> 标签：java, web-services, axis2

我创建了一个简单的 Web 服务，并根据[本教程将其部署到 axis2 Web 应用程序](http://netbeans.org/kb/69/websvc/gs-axis.html)

创建我的服务后，我可以将它部署到服务器，我可以通过这个看到 WSDL 文件`url: localhost:8084/axis2/services/HelloAxisWorld?wsdl`

现在，我想通过一个独立的 java 应用程序调用这个服务。我发现了一些进行调用的代码，但我遇到了问题，因为我想我的项目中没有包含正确的库。

有人知道使用axis2调用Web服务的示例吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-27T09:47:55.350

一个简单的谷歌“axis2 客户端教程”给了我[这个](http://roseindia.net/webservices/axis2/axis2-client.shtml)。它涵盖了正确设置类路径、通过 WSDL 从 WSDL 生成 java 以及由此`wsdl2java`开发客户端。

# java - Netty 4 处理通道事件

> ID：14052464
> 
> 赞同：3
> 
> 时间：2012-12-27T09:38:39.350
> 
> 标签：java, events, netty

在 Netty 3 中，我可以使用 ChannelUpstreamHandler 处理打开/关闭事件，例如

```
pipeline.addLast("channelGroupHandler", new SimpleChannelUpstreamHandler() {
  public void channelOpen(ChannelHandlerContext ctx, ChannelStateEvent e) {
    ...
  }

  public void channelDisconnected(ChannelHandlerContext ctx, ChannelStateEvent e) {
    ...
  }
}); 
```

但在 Netty 4 中它不起作用。那么，我现在该如何处理这些事件呢？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2014-07-29T16:18:29.977

如果您[在 4.0 中检查 New and noteworthy，](http://netty.io/wiki/new-and-noteworthy-in-4.0.html#wiki-h4-19)您可以看到：

*   在 3.x 中，当`Channel`创建新连接时，至少`ChannelStateEvents`会触发三个：`channelOpen`、`channelBound`和`channelConnected`。当 a`Channel`闭合时，至少还有 3 个：`channelDisconnected`、`channelUnbound`和`channelClosed`。

*   在 4.x 中`channelOpen`，`channelBound`、 和`channelConnected`已合并到`channelActive`. 否则，`channelDisconnected`、`channelUnbound`和`channelClosed`已合并到`channelInactive`。

您应该使用新的 API，仅此而已。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-08-04T19:19:48.557

看起来在 Netty 4 中使用的新类是`ChannelInboundHandlerAdapter`

```
pipeline.addLast("channelGroupHandler", new ChannelInboundHandlerAdapter() {
  public void channelActive(ChannelHandlerContext ctx) {
    ...
  }

  public void channelInactive(ChannelHandlerContext ctx) {
    ...
  }
}); 
```

# javascript - 使用 Javascript 访问本地 URL

> ID：14052473
> 
> 赞同：14
> 
> 时间：2012-12-27T09:38:58.933
> 
> 标签：javascript, url, firefox, local

[与此处](https://stackoverflow.com/questions/5418536/create-and-go-to-url-with-javascript)相同的问题，但我需要转到 Firefox 中的本地 URL

我尝试使用类似的代码

```
var url = "file:///E:/Test/Test.htm";
window.location.href = url; 
```

但 id 没有用。尝试使用`window.location = url;`并尝试使用`url = "file://E:/Test/Test.htm";`（双“/”而不是三重“/”），但仍然无法正常工作。

谢谢

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-12-27T09:42:39.180

当我尝试这个时：

```
window.location.href = "file:///C:/Users/Cerbrus/Documents/SomeFile.js" 
```

^(（是的，这是一条有效的路径。）)

Chrome 向我抛出了这个错误：

> 不允许加载本地资源：file:///C:/Users//Documents/File.js

这是因为 JavaScript 无法访问**本地**文件（因为它被沙盒化了），并且您正在使用 JavaScript 设置新的 url。
“沙盒”是指某项技术已限制（或禁止）访问超出特定范围。对于浏览器，这意味着页面上运行的代码无法访问您系统上的文件（否则，只需查看用户的文件系统，就很容易“窃取”数据）。

**然而**，

说，我有2个文件：

> C:/Test/Test.htm
> C:/Test/Test1.htm

`Test.htm`仅包含以下内容：

```
<script>
    window.location = "file:///C:/Test/Test1.htm";
</script> 
```

这实际上将重定向到`Test1.htm`，因为目标文件与源文件所在的域位于同一域中。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-27T09:40:19.883

我猜它**不允许**从 javascript加载本地资源

除非您有一个本地 http 服务器正在运行：

```
var url = "http://localhost/MySite/Default.aspx";
window.location.href = url; 
```

它会工作

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-27T09:41:33.253

您无法从本地系统访问该文件。由于浏览器在**沙盒模式下**工作，您不能破坏沙盒并访问本地文件系统，因为它会违反安全性。尝试使用 AJAX 请求直接加载，否则由于沙盒限制，您尝试执行的操作是不可能的，并且也不符合安全策略。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-03-13T13:58:21.413

window.location.href = window.location.pathname + (你的本地文件名或路径)

* * *

## 回答 #5

> 赞同：-5
> 
> 时间：2012-12-27T09:41:41.440

```
window.open(url); // here url can be anything 
```

# javascript - document.execCommand('unlink') 不适用于 Firefox 中的锚点

> ID：14052476
> 
> 赞同：1
> 
> 时间：2012-12-27T09:39:27.743
> 
> 标签：javascript, firefox, execcommand

我正在使用`document.execCommand("unlink", false, false);`我自己的 html 编辑器中删除超链接和锚点。它工作正常，除了一种情况：它不会删除 Firefox 中的锚点。Firefox 不支持此功能还是有其他方法可以解决此问题？

这是我的例子：

```
<div contenteditable="true">This is an <a name="anker">anchor</a>. And this is a <a href="#">normal hyperlink</a>. Please try to select them and then press the "Unlink" button.</div>

<input type="button" id="btn" value="Unlink">

$(document).ready(function() {    
    $('#btn').click(function() {
        document.execCommand("unlink", false, false);
    });
}); 
```

[在 Fiddle 上查看](http://jsfiddle.net/Bz7pR/5/)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-27T10:12:30.597

要回答您关于有哪些替代方案的问题，您可以在调用之前强制解决问题并设置任何`a`元素的属性：`href``unlink`

```
$(document).ready(function() {    
    var $editable = $('[contenteditable]');

    $('#btn').click(function() {
        $editable.find('a:not([href])').attr('href', '#');
        document.execCommand("unlink", false, false);
    });
}); 
```

[http://jsfiddle.net/Bz7pR/7/](http://jsfiddle.net/Bz7pR/7/)

当然，可能有多种方法可以“解决”这个问题。我`$.unwrap()`想可能也可以。我不是那么精通`document.execCommand`和富文本编辑器，但我想你需要小心，精确，并测试测试测试。

注意，这只是一个演示；你真的必须考虑这一点，并准确考虑你将如何处理这个问题。例如，您可以检测并仅在 Firefox 是浏览器时运行它，这将限制您可能遇到的任何意外损害或结果。

**编辑**

这是一个更完整的版本，仅影响选定的文本范围：

```
$(document).ready(function() {    
    $('#btn').click(function unlink() {
        var holder,
            frag,
            range,
            child;

        if (window.getSelection && window.getSelection().getRangeAt) {
            holder = document.createElement('div');
            frag = document.createDocumentFragment();
            range = window.getSelection().getRangeAt(0);

            $(holder)
                .append(range.cloneContents())
                .find('a:not([href])')
                .attr('href', '#');

            while ((child = holder.firstChild)) {
                frag.appendChild(child);
            }

            range.deleteContents();
            range.insertNode(frag);
        }

        document.execCommand("unlink", false, false);
    });    
}); 
```

[http://jsfiddle.net/Bz7pR/12/](http://jsfiddle.net/Bz7pR/12/)

在文本范围和选择方面我不是天才，所以我修改了这个答案中的代码：

[https://stackoverflow.com/a/6252893/451969](https://stackoverflow.com/a/6252893/451969)

想出上面的内容。如果有人看到错误或不连贯的内容，请在下面给我留言。

# java - 在android中检索属于用户名的电子邮件

> ID：14052478
> 
> 赞同：0
> 
> 时间：2012-12-27T09:39:58.480
> 
> 标签：java, android, mysql, web-services, soap

我必须开发一个登录表单android应用程序。在这里，我必须输入用户名和密码。如果正确，则获取属于该用户名的电子邮件并将其显示在文本视图中，如果用户名和密码错误，则显示登录失败消息。

这是我的网络服务代码：

```
public class Login { 
    public String authentication(String username,String password) {
        String retrievedUserName = "";
        String retrievedPassword = "";
        String retrievedEmail = "";
        String status = "";
        try {
            Class.forName("com.mysql.jdbc.Driver");
            Connection con = DriverManager.getConnection("jdbc:mysql://localhost:3306/xcart-432pro","root","");
            PreparedStatement statement =  con.prepareStatement("SELECT * FROM xcart_customers WHERE login = '"+username+"'");
            ResultSet result = statement.executeQuery();
            while(result.next()){  
                retrievedUserName = result.getString("login");
                retrievedPassword = result.getString("password");
                retrievedEmail = result.getString("email");  
            }
            if(retrievedUserName.equals(username)&&retrievedPassword.equals(password)&&!(retrievedUserName.equals("") && retrievedPassword.equals(""))){
                status = "Success";
            }
            else {
                status = "Login fail!!!";
            }
        }
        catch(Exception e){
            e.printStackTrace();
        }
        return status;
    }
}; 
```

这是我的安卓代码：

```
public class CustomerLogin extends Activity {
    private static final String SPF_NAME = "vidslogin";
    private static final String USERNAME = "login";
    private static final String PASSWORD = "password";
    private static final String PREFS_NAME = null;

    CheckBox chkRememberMe;
    private String login;
    String mGrandTotal,total,mTitle;

    EditText username,userPassword;
    private final String NAMESPACE = "http://xcart.com";
    private final String URL = "http://10.0.0.75:8085/XcartLogin/services/Login?wsdl";
    private final String SOAP_ACTION = "http://xcart.com/authentication";
    private final String METHOD_NAME = "authentication";
    private String uName;

    /**Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.customer_login);
        Bundle b = getIntent().getExtras();
        total = b.getString("GrandTotal");
        mTitle = b.getString("Title");
        TextView grandtotal = (TextView) findViewById(R.id.grand_total);
        grandtotal.setText("Welcome ," + mTitle );
        chkRememberMe = (CheckBox) findViewById(R.id.rempasswordcheckbox);
        username = (EditText) findViewById(R.id.tf_userName);
        userPassword = (EditText) findViewById(R.id.tf_password);
        SharedPreferences loginPreferences = getSharedPreferences(SPF_NAME, Context.MODE_PRIVATE);
        username.setText(loginPreferences.getString(USERNAME, ""));
        userPassword.setText(loginPreferences.getString(PASSWORD, ""));
        Button login = (Button) findViewById(R.id.btn_login);
        login.setOnClickListener(new View.OnClickListener() {
            public void onClick(View arg0) {
                loginAction();
            }
        });
    }

    private void loginAction(){
        boolean isUserValidated = true;
        boolean isPasswordValidated = true;

        SoapObject request = new SoapObject(NAMESPACE, METHOD_NAME);
        EditText username = (EditText) findViewById(R.id.tf_userName);
        String user_Name = username.getText().toString();
        EditText userPassword = (EditText) findViewById(R.id.tf_password);
        String user_Password = userPassword.getText().toString();

        //Pass value for userName variable of the web service
        PropertyInfo unameProp =new PropertyInfo();
        unameProp.setName("username");//Define the variable name in the web service method
        unameProp.setValue(user_Name);//set value for userName variable
        unameProp.setType(String.class);//Define the type of the variable
        request.addProperty(unameProp);//Pass properties to the variable

        //Pass value for Password variable of the web service
        PropertyInfo passwordProp =new PropertyInfo();
        passwordProp.setName("password");
        passwordProp.setValue(user_Password);
        passwordProp.setType(String.class);
        request.addProperty(passwordProp);

        SoapSerializationEnvelope envelope = new SoapSerializationEnvelope(SoapEnvelope.VER11);
        envelope.setOutputSoapObject(request);
        HttpTransportSE androidHttpTransport = new HttpTransportSE(URL);

        try{
            androidHttpTransport.call(SOAP_ACTION, envelope);
            SoapPrimitive response = (SoapPrimitive)envelope.getResponse();
            String status = response.toString();
            TextView result = (TextView) findViewById(R.id.tv_status);
            result.setText(response.toString());

            if(status.equals("Success")) {
                //   ADD  to save  and  read next time
                String strUserName = username.getText().toString().trim();
                String strPassword = userPassword.getText().toString().trim();

                if (null == strUserName || strUserName.length() == 0) {
                    //  showToast("Enter Your Name");
                    username.setError( "username is required!" );
                    isUserValidated = false;
                }
                if (null == strPassword || strPassword.length() == 0) {
                    //      showToast("Enter Your Password");
                    isPasswordValidated = false;
                    userPassword.setError( "password is required!" );
                } 
                if (isUserValidated = true && isPasswordValidated == true) {
                    if (chkRememberMe.isChecked()) {
                        SharedPreferences loginPreferences = getSharedPreferences(SPF_NAME, Context.MODE_PRIVATE);
                        loginPreferences.edit().putString(USERNAME, strUserName).putString(PASSWORD, strPassword).commit();
                    } 
                    else {
                        SharedPreferences loginPreferences = getSharedPreferences(SPF_NAME, Context.MODE_PRIVATE);
                        loginPreferences.edit().clear().commit();
                    }
                }
                if (isUserValidated && isPasswordValidated) {

                    Intent intent = new Intent(CustomerLogin.this,PayPalIntegrationActivity.class);
                    intent.putExtra("GrandTotal", total);
                    intent.putExtra("Title", mTitle);
                    intent.putExtra("login",username.getText().toString());
                    startActivity(intent);
                }
            }
            else {
                LayoutInflater inflater = getLayoutInflater();
                View layout = inflater.inflate(R.layout.toast_custom_layout,
                        (ViewGroup) findViewById(R.id.toast_layout_root));
                Toast toast = new Toast(getApplicationContext());
                toast.setGravity(Gravity.TOP, 0, 30);
                toast.setDuration(Toast.LENGTH_LONG);
                toast.setView(layout);
                toast.show();

            }
        }
        catch(Exception e){

        }
    }
} 
```

如果登录成功，它必须在 textview 上显示电子邮件。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T09:58:54.060

您可以使用 asy 任务来执行此操作，

**在 doInBackground**

执行您的登录操作。Asyctask 在另一个任务中进行此操作。

**当在 onPostExecute 中编译时**

显示成功消息。**但是您需要使用 runOnUiThread 因为您无法从非 ui 线程访问 ui 控件**。

```
private class loginTask extends AsyncTask<URL, Integer, int> {
     protected Long doInBackground(URL... urls) {

         // start login process

         return 1;
     }

     protected void onPostExecute(int result) {

           _activity.runOnUiThread(new Runnable() {
                @Override
                public void run() {
                    textview.setText("login success");
                }
            });

     }
 } 
```

# java - 将 SubjectPublicKeyInfo 格式的公钥转换为 RSAPublicKey 格式 java

> ID：14052485
> 
> 赞同：11
> 
> 时间：2012-12-27T09:40:25.777
> 
> 标签：java, cryptography, rsa, pkcs#1

PublicKey.getEncoded()，返回一个字节数组，其中包含 SubjectPublicKeyInfo (x.509) 格式的公钥，如何将其转换为 RSA 公钥编码？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-12-27T09:53:10.293

使用 Bouncy Castle 的[`SubjectPublicKeyInfo`](http://bouncycastle.org/docs/docs1.5on/org/bouncycastle/asn1/x509/SubjectPublicKeyInfo.html)，像这样：

```
byte[] encoded = publicKey.getEncoded();
SubjectPublicKeyInfo subjectPublicKeyInfo = SubjectPublicKeyInfo.getInstance(
        ASN1Sequence.getInstance(encoded));
byte[] otherEncoded = subjectPublicKeyInfo.parsePublicKey().getEncoded(); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-28T14:05:16.220

没有 BouncyCastle：

```
PublicKey publicKey = KeyFactory.getInstance("RSA").generatePublic(new X509EncodedKeySpec(publicKeyBinary)); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-28T10:23:26.453

以下代码片段对我有用，但必须使用 BouncyCastle。

```
byte[] keyBytes = key.getEncoded(); // X.509 for public key
SubjectPublicKeyInfo subPkInfo = new SubjectPublicKeyInfo((ASN1Sequence)ASN1Object.fromByteArray(keyBytes));
byte[] rsaformat = subPkInfo.getPublicKey().getDEREncoded(); 
```

# android - 如何使用“线程”或“AsyncTask”发送电子邮件而不显示 Android 中的默认电子邮件

> ID：14052486
> 
> 赞同：1
> 
> 时间：2012-12-27T09:40:26.110
> 
> 标签：android, email, email-attachments

我正在开发一个应用程序，我想在不经过默认程序和用户交互的情况下发送电子邮件。

我有以下代码，但它不起作用。我阅读了有关该问题的更多信息，并发现我应该使用“线程”或“AsyncTask”。但是，我不知道如何准确地使用它们。

这是代码：

MainActivity.java：

```
package com.example.dialup;

import android.os.Bundle;
import android.app.Activity;
import android.view.Menu;
import android.view.View;
import android.widget.Button;

import android.util.Log;

public class MainActivity extends Activity {

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

         final Button send = (Button) this.findViewById(R.id.send);
            send.setOnClickListener(new View.OnClickListener() {

                public void onClick(View v) {
                    // TODO Auto-generated method stub

                    try {   

                        GMailSender sender = new GMailSender("username", "pass");
                        sender.sendMail("Subject",   
                                "Body",   
                                "blabla@gmail.com",   
                                "blabla@yahoo.com"); 
                        System.out.println("Email sent");

                    } catch (Exception e) {   
                        Log.e("SendMail", e.getMessage(), e);   
                    } 

                }
            });} } 
```

JSSEProvider.java

```
package com.example.dialup;

import java.security.AccessController;
import java.security.Provider;

public final class JSSEProvider extends Provider {

    public JSSEProvider() {
        super("HarmonyJSSE", 1.0, "Harmony JSSE Provider");
        AccessController.doPrivileged(new java.security.PrivilegedAction<Void>() {
            public Void run() {
                put("SSLContext.TLS",
                        "org.apache.harmony.xnet.provider.jsse.SSLContextImpl");
                put("Alg.Alias.SSLContext.TLSv1", "TLS");
                put("KeyManagerFactory.X509",
                        "org.apache.harmony.xnet.provider.jsse.KeyManagerFactoryImpl");
                put("TrustManagerFactory.X509",
                        "org.apache.harmony.xnet.provider.jsse.TrustManagerFactoryImpl");
                return null;
            }
        });
    }
} 
```

GMailSender.java

```
package com.example.dialup;

import javax.activation.DataHandler;   
import javax.activation.DataSource;   
import javax.mail.Message;   
import javax.mail.PasswordAuthentication;   
import javax.mail.Session;   
import javax.mail.Transport;   
import javax.mail.internet.InternetAddress;   
import javax.mail.internet.MimeMessage;   
import java.io.ByteArrayInputStream;   
import java.io.IOException;   
import java.io.InputStream;   
import java.io.OutputStream;   
import java.security.Security;   
import java.util.Properties;   

public class GMailSender extends javax.mail.Authenticator  {   
    private String mailhost = "smtp.gmail.com";   
    private String user;   
    private String password;   
    private Session session;   

    static {   
        Security.addProvider(new com.example.dialup.JSSEProvider());   
    }  

    public  GMailSender(String user, String password)  {   

        this.user = user;   
        this.password = password;   

        Properties props = new Properties();   
        props.setProperty("mail.transport.protocol", "smtp");   
        props.setProperty("mail.host", mailhost);   
        props.put("mail.smtp.auth", "true");   
        props.put("mail.smtp.port", "465");   
        props.put("mail.smtp.socketFactory.port", "465");   
        props.put("mail.smtp.socketFactory.class",   
                "javax.net.ssl.SSLSocketFactory");   
        props.put("mail.smtp.socketFactory.fallback", "false");   
        props.setProperty("mail.smtp.quitwait", "false");   

        session = Session.getDefaultInstance(props, this);   
    }   

    protected PasswordAuthentication getPasswordAuthentication() {   
        return new PasswordAuthentication(user, password);   
    }   

    public synchronized void sendMail(String subject, String body, String sender, String recipients) throws Exception {   
        try{
        MimeMessage message = new MimeMessage(session);   
        DataHandler handler = new DataHandler(new ByteArrayDataSource(body.getBytes(), "text/plain"));   
        message.setSender(new InternetAddress(sender));   
        message.setSubject(subject);   
        message.setDataHandler(handler);   
        if (recipients.indexOf(',') > 0)   
            message.setRecipients(Message.RecipientType.TO, InternetAddress.parse(recipients));   
        else  
            message.setRecipient(Message.RecipientType.TO, new InternetAddress(recipients));   
        Transport.send(message);   
        }catch(Exception e){

        }
    }   

    public class ByteArrayDataSource implements DataSource {   
        private byte[] data;   
        private String type;   

        public ByteArrayDataSource(byte[] data, String type) {   
            super();   
            this.data = data;   
            this.type = type;   
        }   

        public ByteArrayDataSource(byte[] data) {   
            super();   
            this.data = data;   
        }   

        public void setType(String type) {   
            this.type = type;   
        }   

        public String getContentType() {   
            if (type == null)   
                return "application/octet-stream";   
            else  
                return type;   
        }   

        public InputStream getInputStream() throws IOException {   
            return new ByteArrayInputStream(data);   
        }   

        public String getName() {   
            return "ByteArrayDataSource";   
        }   

        public OutputStream getOutputStream() throws IOException {   
            throw new IOException("Not Supported");   
        }   
    }   
} 
```

这是LogCat

```
12-27 13:33:46.589: E/Trace(8410): error opening trace file: No such file or directory (2)
12-27 13:33:46.729: E/SensorManager(8410): thread start
12-27 13:33:46.729: D/SensorManager(8410): registerListener :: handle = 0  name= LSM330DLC 3-axis Accelerometer delay= 200000 Listener= android.view.OrientationEventListener$SensorEventListenerImpl@42bfd9b8
12-27 13:33:46.739: D/SensorManager(8410): unregisterListener::  Listener= android.view.OrientationEventListener$SensorEventListenerImpl@42bfd9b8
12-27 13:33:46.739: D/Sensors(8410): Remain listener = Sending .. normal delay 200ms
12-27 13:33:46.739: I/Sensors(8410): sendDelay --- 200000000
12-27 13:33:46.739: D/SensorManager(8410): JNI - sendDelay
12-27 13:33:46.739: I/SensorManager(8410): Set normal delay = true
12-27 13:33:46.754: D/SensorManager(8410): registerListener :: handle = 0  name= LSM330DLC 3-axis Accelerometer delay= 200000 Listener= android.view.OrientationEventListener$SensorEventListenerImpl@42bfd9b8
12-27 13:33:46.784: D/libEGL(8410): loaded /system/lib/egl/libEGL_mali.so
12-27 13:33:46.789: D/libEGL(8410): loaded /system/lib/egl/libGLESv1_CM_mali.so
12-27 13:33:46.794: D/libEGL(8410): loaded /system/lib/egl/libGLESv2_mali.so
12-27 13:33:46.799: D/(8410): Device driver API match
12-27 13:33:46.799: D/(8410): Device driver API version: 10
12-27 13:33:46.799: D/(8410): User space API version: 10 
12-27 13:33:46.799: D/(8410): mali: REVISION=Linux-r2p4-02rel0 BUILD_DATE=Fri Sep 28 10:42:56 KST 2012 
12-27 13:33:46.834: D/OpenGLRenderer(8410): Enabling debug mode 0
12-27 13:34:04.184: D/SensorManager(8410): unregisterListener::  Listener= android.view.OrientationEventListener$SensorEventListenerImpl@42bfd9b8
12-27 13:34:04.184: D/Sensors(8410): Remain listener = Sending .. normal delay 200ms
12-27 13:34:04.184: I/Sensors(8410): sendDelay --- 200000000
12-27 13:34:04.184: D/SensorManager(8410): JNI - sendDelay
12-27 13:34:04.184: I/SensorManager(8410): Set normal delay = true
12-27 13:34:06.034: D/SensorManager(8410): registerListener :: handle = 0  name= LSM330DLC 3-axis Accelerometer delay= 200000 Listener= android.view.OrientationEventListener$SensorEventListenerImpl@42bfd9b8
12-27 13:34:37.794: D/SensorManager(8410): unregisterListener::  Listener= android.view.OrientationEventListener$SensorEventListenerImpl@42bfd9b8
12-27 13:34:37.794: D/Sensors(8410): Remain listener = Sending .. normal delay 200ms
12-27 13:34:37.794: I/Sensors(8410): sendDelay --- 200000000
12-27 13:34:37.794: D/SensorManager(8410): JNI - sendDelay
12-27 13:34:37.794: I/SensorManager(8410): Set normal delay = true
12-27 13:34:37.924: D/SensorManager(8410): registerListener :: handle = 0  name= LSM330DLC 3-axis Accelerometer delay= 200000 Listener= android.view.OrientationEventListener$SensorEventListenerImpl@42c3a088
12-27 13:34:37.944: D/dalvikvm(8410): GC_CONCURRENT freed 190K, 7% free 12382K/13191K, paused 3ms+13ms, total 35ms
12-27 13:34:37.954: D/SensorManager(8410): unregisterListener::  Listener= android.view.OrientationEventListener$SensorEventListenerImpl@42c3a088
12-27 13:34:37.954: D/Sensors(8410): Remain listener = Sending .. normal delay 200ms
12-27 13:34:37.954: I/Sensors(8410): sendDelay --- 200000000
12-27 13:34:37.954: D/SensorManager(8410): JNI - sendDelay
12-27 13:34:37.954: I/SensorManager(8410): Set normal delay = true
12-27 13:34:37.959: W/IInputConnectionWrapper(8410): showStatusIcon on inactive InputConnection
12-27 13:34:37.964: D/SensorManager(8410): registerListener :: handle = 0  name= LSM330DLC 3-axis Accelerometer delay= 200000 Listener= android.view.OrientationEventListener$SensorEventListenerImpl@42c3a088
12-27 13:34:38.069: W/IInputConnectionWrapper(8410): getSelectedText on inactive InputConnection
12-27 13:34:38.074: W/IInputConnectionWrapper(8410): setComposingText on inactive InputConnection
12-27 13:34:45.439: D/SensorManager(8410): unregisterListener::  Listener= android.view.OrientationEventListener$SensorEventListenerImpl@42c3a088
12-27 13:34:45.439: D/Sensors(8410): Remain listener = Sending .. normal delay 200ms
12-27 13:34:45.439: I/Sensors(8410): sendDelay --- 200000000
12-27 13:34:45.439: D/SensorManager(8410): JNI - sendDelay
12-27 13:34:45.439: I/SensorManager(8410): Set normal delay = true
12-27 13:34:45.504: W/IInputConnectionWrapper(8410): getSelectedText on inactive InputConnection
12-27 13:34:45.504: W/IInputConnectionWrapper(8410): setComposingText on inactive InputConnection
12-27 13:35:01.614: W/IInputConnectionWrapper(8410): showStatusIcon on inactive InputConnection
12-27 13:35:01.874: D/SensorManager(8410): registerListener :: handle = 0  name= LSM330DLC 3-axis Accelerometer delay= 200000 Listener= android.view.OrientationEventListener$SensorEventListenerImpl@42c184e8
12-27 13:35:01.924: D/SensorManager(8410): unregisterListener::  Listener= android.view.OrientationEventListener$SensorEventListenerImpl@42c184e8
12-27 13:35:01.924: D/Sensors(8410): Remain listener = Sending .. normal delay 200ms
12-27 13:35:01.924: I/Sensors(8410): sendDelay --- 200000000
12-27 13:35:01.944: D/SensorManager(8410): JNI - sendDelay
12-27 13:35:01.944: I/SensorManager(8410): Set normal delay = true
12-27 13:35:01.954: D/SensorManager(8410): registerListener :: handle = 0  name= LSM330DLC 3-axis Accelerometer delay= 200000 Listener= android.view.OrientationEventListener$SensorEventListenerImpl@42c184e8 
```

那么如何使用“thread”或“AsyncTask”使其工作呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T09:44:54.240

在 android AsyncTask doInBackground 方法中使用此代码。

```
 try {   

                    GMailSender sender = new GMailSender("username", "pass");
                    sender.sendMail("Subject",   
                            "Body",   
                            "blabla@gmail.com",   
                            "blabla@yahoo.com"); 
                    System.out.println("Email sent");

                } catch (Exception e) {   
                    Log.e("SendMail", e.getMessage(), e);   
                } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T10:10:01.417

首先检查您是否`Internet`在清单中添加了权限。

然后检查您是否已将 3 个 jar 添加到您的 Android 项目中

如果你没有这些罐子，你可以从这里下载。

*   [邮件.jar](http://javamail-android.googlecode.com/files/mail.jar)
*   [激活.jar](http://javamail-android.googlecode.com/files/activation.jar)
*   [附加的.jar](http://javamail-android.googlecode.com/files/additionnal.jar)

[单击此处 - 如何添加外部罐子](https://stackoverflow.com/a/6859020/28557)

# c++ - 有没有使用 C++ 标准同时为两个变量分配两个值的特殊方法？

> ID：14052490
> 
> 赞同：1
> 
> 时间：2012-12-27T09:40:36.357
> 
> 标签：c++, performance

对不起，如果这是一个愚蠢的问题，我还不太精通计算机科学。这是算法速度的问题。

我遇到了这样的问题[，](https://stackoverflow.com/questions/13984077/project-euler-2)我决定解决。我的计划是根据需要增加斐波那契数列以获得准确的结果。

这是我增加的方式；

```
unsigned int last(1), current(1) ;
unsigned int sum = 0 ;

looping
{
   ...
   current += last ;
   last = current - last ;
} 
```

我觉得这肯定与增量需要的一样好，并且可能与我能想到的一样好，因为我的知识有限。但是有没有一种特殊的方法可以只使用这两个变量来做同样的增量？也许我的想法是错误的，但是这样做会更快吗：

```
temp = current ;
current += last ;
last = temp ; 
```

视觉上比以前多了一个语句，还有一个额外的变量。他们都做同样的事情，但我觉得一个更快，使用更少的内存。我是对的，哪一个被认为是最有效的？

附带说明一下，我对使用指针不是很有经验，但是我是否正确地假设指针不会发生太大变化，因为考虑到 int 类型的标准，每条数据通常是 4 个字节？我可以理解为什么使用 50 字节的自定义类型可能更好地使用指针，但它对我的第二种算法有帮助吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-27T09:43:43.770

不不不。保持你的代码简单明了。像这样明显的优化，当它们实际上是改进时，将由编译器进行。

顺便说一句，使用 GCC，这两个函数产生完全相同的 5 个汇编指令：

```
 void sum1(int * __restrict last, int * __restrict current)
    {
            int temp = *current;
            *current += *last;
            *last = temp;
    }

    void sum2(int * __restrict last, int * __restrict current)
    {
            *current += *last;
            *last = *current - *last;
    } 
```

所以 GCC 明白它们总是会产生相同的结果，并且可能也会在其他情况下将它们视为等效的。因此，使用更清楚地表达您的意图，更易于理解和维护的任何一个，等等。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-27T12:38:43.203

您可以使用[std::tuple](http://en.cppreference.com/w/cpp/utility/tuple)：

```
unsigned int last(1), current(1);

looping
{
    ...
    //`std::tie` creates a tuple containing references to `last` and `current`
    //`std::make_tuple` creates a tuple containing the new values. 
    std::tie(current, last) = std::make_tuple(current+last, current);
} 
```

# web-services - JDK1.4中没有注解的Java Web Services

> ID：14052491
> 
> 赞同：0
> 
> 时间：2012-12-27T09:40:37.133
> 
> 标签：web-services, jakarta-ee

我必须用java开发一个web服务，但是这里的限制是我必须使用JDK1.4，而问题是JDK1.4不支持注释。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-31T15:01:28.850

如果前者不可能，我建议您使用轴 2 或轴 1。这应该很容易，就像过去的美好时光一样。:-)

# jquery - 如何在 Spring MVC 中使用 AJAX 在视图中传递和获取模型属性

> ID：14052497
> 
> 赞同：0
> 
> 时间：2012-12-27T09:41:01.220
> 
> 标签：jquery, ajax, spring-mvc

我正在使用 Spring MVC，我需要对服务器进行异步调用并检查用户的凭据。如果匹配，那么我将重定向到另一个页面。

**MyController.java**

```
@RequestMapping("performingLogin.htm")
public ModelAndView performingLogin(@RequestParam String username, @RequestParam String password) 
{   
    //boolean value which decides whether its a valid user
    myService.performingLogin(username, password);

    //Currently returning the new model to be opened irrespective of valid user
    ModelAndView model = new ModelAndView("newpage");
    return model;
} 
```

**主视图.jsp**

```
<script src="http://code.jquery.com/jquery-1.7.1.min.js"></script>
<script type="text/javascript">
function doAjaxPost() {

   $.ajax({  
      url : "dologin.htm",  
      data : {
         username: $('#username').val(),
         password: $('#password').val()
      },   
      success : function(responseTxt,statusTxt,xhr) {  
        /* Opening new page */
        window.location.href="newpage.htm";
      }  
   }); 
} 
```

我需要知道如何在 JSP 端验证用户，以便发出凭据不正确的警报。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-27T09:49:31.313

检查@ResponseBody 注释

```
public @ResponseBody String performingLogin(@RequestParam String username, @RequestParam String password) 
{   
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-27T10:36:13.497

在您的代码中，您完全忽略了返回的视图并在成功时执行 js 重定向。只要您这样做，返回值`ModelAndView`或`@ResponseBody`注释值之间就没有真正的区别。

您可能想要返回`401 Unauthorized`http 错误，然后在您的 javascript 中检查它。

有多种方法可以做到这一点。

一种是创建一个异常并用spring注解对其进行注解，然后抛出它。

类似的东西：

```
 @ResponseStatus(value = HttpStatus.UNAUTHORIZED)
 public class AuthenticationException extends RuntimeException {
     private static final long serialVersionUID = 23949237498237948234l;
 } 
```

将您的请求映射更改为：

```
@RequestMapping("performingLogin.htm")
public ModelAndView performingLogin(@RequestParam String username, @RequestParam String password) 
{   
    //boolean value which decides whether its a valid user
    myService.performingLogin(username, password);

    if (authenticationWentWrong) {
        throw new AuthenticationException();

    }

    //Currently returning the new model to be opened irrespective of valid user
    ModelAndView model = new ModelAndView("newpage");
    return model;
} 
```

然后你的js代码：

```
<script src="http://code.jquery.com/jquery-1.7.1.min.js"></script>
<script type="text/javascript">
function doAjaxPost() {

   $.ajax({
      url : "dologin.htm",
      data : {
         username: $('#username').val(),
         password: $('#password').val()
      },
      success : function(responseTxt,statusTxt,xhr) {
        /* Opening new page */
        window.location.href="newpage.htm";
      },
      statusCode : {
            401: function(jqXHR, textStatus, errorThrown) {
                //handle the authentication error here
            }
      }

   });
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-27T10:40:00.943

此外，您可能想尝试[HTTPResponseEntity，](http://static.springsource.org/spring/docs/3.0.x/javadoc-api/org/springframework/http/ResponseEntity.html)我认为它经常被忽视，但可以让您更好地控制 - 可以用于[spring 3.2 的新测试包。](http://blog.springsource.org/2012/11/12/spring-framework-3-2-rc1-spring-mvc-test-framework/)

# vb.net - VB.NET - 读取包含制表符分隔的整数/双精度的文本文件并将它们存储在数组中

> ID：14052508
> 
> 赞同：3
> 
> 时间：2012-12-27T09:41:40.990
> 
> 标签：vb.net, text-files, streamreader

我有一个包含制表符分隔的整数和双精度的文本文件，例如：

```
5[TAB]0.3[TAB]2.9[TAB]61[TAB]110
8[TAB]1.1[TAB]5.2[TAB]13[TAB]45
1[TAB]0.8[TAB]1.4[TAB]28[TAB]33
... 
```

我需要的是一种在 VB.NET 中将每一行作为双精度数组访问的便捷方法——这样第一个数组是 [ **5.0 0.3 2.9 61.0 110.0** ]，第二个数组是 [ **8.0 1.1 5.2 13.0 45.0** ]，依此类推在...

这如何使用 StreamReader 来完成？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-27T12:21:20.880

如果可以使用列表列表而不是数组列表，则可以这样做：

```
Private Function LoadFile(ByVal filePath As String) As List(Of List(Of Double))
    Dim records As New List(Of List(Of Double))()
    For Each line As String In File.ReadAllLines(filePath)
        Dim values As New List(Of Double)()
        For Each field As String In line.Split(New String() {ControlChars.Tab}, StringSplitOptions.None)
            values.Add(Double.Parse(field))
        Next
        records.Add(values)
    Next
    Return records
End Function 
```

或者，如果它必须是数组列表，您可以这样做：

```
Private Function LoadFileToArrays(ByVal filePath As String) As List(Of Double())
    Dim records As New List(Of Double())()
    For Each line As String In File.ReadAllLines(filePath)
        Dim values As New List(Of Double)()
        For Each field As String In line.Split(New String() {ControlChars.Tab}, StringSplitOptions.None)
            values.Add(Double.Parse(field))
        Next
        records.Add(values.ToArray())
    Next
    Return records
End Function 
```

如果您需要一个数组数组，`records.ToArray()`则可以在最后一个示例中返回。我没有添加任何代码来处理无效或空字段值，因为在您的问题中不清楚您将如何处理这些值。因此，您需要添加代码以适当地处理该问题，否则，此代码将在这种情况下引发异常。

# c++ - 在 WIN32 中显示不带窗口的 HTML 内容

> ID：14052509
> 
> 赞同：0
> 
> 时间：2012-12-27T09:41:46.040
> 
> 标签：c++, html, winapi

我想在 win32 窗口内的 RECT 结构中显示 HTML 文本。我发现很多 API 可以帮助我在单独的窗口中呈现 HTML，但我的要求是我们不必为正在显示的 HTML 分配单独的窗口句柄。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T09:49:19.813

该`RECT`结构基本上是代表一个矩形的两个点，如此[处](http://msdn.microsoft.com/en-us/library/windows/desktop/dd162897%28v=vs.85%29.aspx)所述。您不能将任何其他类型的信息存储在`RECT`.

也许您需要做的是创建一个`EDITTEXT`控件，描述[here](http://msdn.microsoft.com/en-us/library/windows/desktop/aa381009%28v=vs.85%29.aspx)并使用它将HTML显示为文本。您可以使用 中的值`RECT`来定义`x`、`y`和`width`的`height`参数`EDITTEXT`。

# android - 在gridview中延迟加载

> ID：14052520
> 
> 赞同：1
> 
> 时间：2012-12-27T09:42:42.620
> 
> 标签：android, json, gridview, imageview, lazy-loading

这是从 json 获取图像的 gridview。我成功地使用了它。但是当我从服务器获取它时，它有很多图像，这意味着所有图像都来自服务器。我想一次加载 12 张图像。

如何限制要加载的图像数量？

请简要帮助我，因为我对延迟加载视而不见。如果下面的代码还不够。这是完整的来源[http://pastie.org/5583485](http://pastie.org/5583485)

在这个 url 中，50 是要加载的图像数量，我可以通过这个值来限制图像的数量，无论我想要什么。但我只能加载一次，所以我不能加载更多。此 url 以 json 格式提供图像路径。

```
String url = "http://xxx.xxx.xxx/card/all/50/0/?token=57LzEsmBeykLbDCD04wTgK9WWV2XjJY0XBdqVU0HQvjIdu5EtTWOT1IQ1AYNwxt6Q5bG6FG73uvzLQSDGAIezwc8VcopEp0s63uzbdVgLSfts0TLmuVDOgyfn4lX"; 
```

asynctask 的 doInBackground

```
public class DownloadJSONFileAsync extends AsyncTask<String, Void, Void> {

    protected void onPreExecute() {
        super.onPreExecute();
        showDialog(DIALOG_DOWNLOAD_JSON_PROGRESS);
    }

    @Override
    protected Void doInBackground(String... params) {

        String url = "http://rest.mcolle.com/card/all/50/0/?token=57LzEsmBeykLbDCD04wTgK9WWV2XjJY0XBdqVU0HQvjIdu5EtTWOT1IQ1AYNwxt6Q5bG6FG73uvzLQSDGAIezwc8VcopEp0s63uzbdVgLSfts0TLmuVDOgyfn4lX";
        JSONArray data = null;

        try {

            JSONObject jsonObject = new JSONObject(getJSONUrl(url));

            MyArrList = new ArrayList<HashMap<String, Object>>();
            HashMap<String, Object> map;
            data = jsonObject.getJSONArray("data");
            for (int i = 0; i < data.length(); i++) {
                JSONObject c = data.getJSONObject(i);
                map = new HashMap<String, Object>();

                // Thumbnail Get ImageBitmap To Object
                map.put("cardimage", (String) c.getString("cardimage"));
                map.put("ImageThumBitmap",(Bitmap) loadBitmap(c.getString("cardimage")));

                map.put("categoryid", (String) c.getString("categoryid"));

                MyArrList.add(map);

            }

        } catch (JSONException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }

        return null;
    }

    protected void onPostExecute(Void unused) {
        ShowAllContent(); // When Finish Show Content
        dismissDialog(DIALOG_DOWNLOAD_JSON_PROGRESS);
        removeDialog(DIALOG_DOWNLOAD_JSON_PROGRESS);
    } 
```

我显示图像的 ImageAdapter

```
public class ImageAdapter extends BaseAdapter {
    private Context context;
    private ArrayList<HashMap<String, Object>> MyArr = new ArrayList<HashMap<String, Object>>();

    public ImageAdapter(Context c, ArrayList<HashMap<String, Object>> myArrList) {
        context = c;
        MyArr = myArrList;
    }

    public int getCount() {
        return MyArr.size();
    }

    public Object getItem(int position) {
        return position;
    }

    public long getItemId(int position) {
        return position;
    }

    public View getView(int position, View convertView, ViewGroup parent) {
        ViewHolder viewHolder;
        viewHolder = new ViewHolder();

        LayoutInflater inflater = (LayoutInflater) context.getSystemService(Context.LAYOUT_INFLATER_SERVICE);

        if (convertView == null) {
            convertView = inflater.inflate(R.layout.grid_item, null);
        }
        viewHolder.categoryCard = (ImageView) convertView.findViewById(R.id.category_card);

            viewHolder.categoryCard.setImageResource(R.drawable.card_etc);
            viewHolder.imageView = (ImageView) convertView.findViewById(R.id.imageView1);

        try {
            viewHolder.imageView.setImageBitmap((Bitmap) MyArr.get(position).get("ImageThumBitmap"));
        } catch (Exception e) {
            viewHolder.imageView.setImageResource(android.R.drawable.ic_menu_report_image);
        }

        return convertView;

    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T09:48:56.090

您可以使用通用图像加载器，

[https://github.com/nostra13/Android-Universal-Image-Loader](https://github.com/nostra13/Android-Universal-Image-Loader)

# facebook - facebook JS SDK批量请求自定义操作

> ID：14052529
> 
> 赞同：2
> 
> 时间：2012-12-27T09:43:36.037
> 
> 标签：facebook, api, object, batch-file, facebook-opengraph

我编写了以下方法来检查用户是否在网页上提交了 3 个自定义打开图形操作中的任何一个：

```
function checkOpenGraphHistory()
{
    var actionList = new Array($('#fb1').attr("data-action"), $('#fb2').attr("data-action"), $('#fb3').attr("data-action"));
    var nameList = new Array($('#fb1').attr("data-name"), $('#fb2').attr("data-name"), $('#fb3').attr("data-name"));
    var idList = new Array('#fb1', '#fb2','#fb3');
    var i = 0;

    while(i < actionList.length)
    {
    FB.api('me/' + actionList[i] + '/?fields=id&object=' + location.href,
       function (checkResponse)
       {
           --i; //the callbacks seem to be added to a queue instead of being processed per api request. Without this line, i always = actionList.length.
           if (!checkResponse)
           {
               console.log('Check: Empty response checking: ' + checkResponse.error.message);
           }
           else if (checkResponse.error)
           {
               console.log('Check: ERROR checking: ' + checkResponse.error.message);
           }
           else if (checkResponse.data.length < 1)
           {
               console.log('Check: User has not ' + nameList[i] + ' this item before.');
           }
           else
           {
               console.log('Check: User ' + nameList[i] + 'ed item before, ID: ' + checkResponse.data[0].id + " actionList.length: " + actionList.length + "and i is: " + i);
           }
       }  );
       i++;
    }
} 
```

这会执行 3 个 HTTP 请求，并且返回的结果的准确性不是 100%。所以，我要么想把它变成一个批处理请求、FQL 请求，要么我想通过 API 查询网页/对象并返回所有操作（目前 3 个自定义操作，一个内置操作，2 个是自定义操作）当前用户在此网页/对象上执行。

这样的事情会很好：

[https://graph.facebook.com/me/](https://graph.facebook.com/me/) {appNameSpace}:{action}/{object}

但是我想检查多个动作，我现在想检查一个对象上的至少 3 个动作，将来可能会检查更多动作。

我尝试使用带有参数的[Graph API 资源管理器：](https://developers.facebook.com/tools/explorer/)

```
me/?batch=[{"method":"GET", "relative_url":"me/myNamespace:myAction/", "object":"objectURL"}] 
```

和

```
me/?batch=[{"method":"GET", "relative_url":"me/myNamespace:myAction/", "body":"url=objectURL"}] 
```

但是，这会返回针对此特定对象/url 的自定义操作的多个实例，而不仅仅是有关针对该特定对象的特定操作的信息。用户每个对象只能执行一次唯一操作（一对一关系），但可以执行所有三个操作一次，所以我只想每个操作返回一个结果，特别是用户是否对指定对象执行了指定操作.

# ruby-on-rails - 使用 paypal 经常性 gem 进行诸如永久有效的计划时要设置的频率

> ID：14052531
> 
> 赞同：1
> 
> 时间：2012-12-27T09:43:45.440
> 
> 标签：ruby-on-rails, paypal, paypal-ipn, paypal-sandbox

我正在使用 paypal recurring gem 开发一个 ruby​​ on rails 应用程序，并且我有一个永久有效的计划，它永不过期，如果我希望用户订阅该永不过期的计划并希望他的计费继续那么怎么办我在贝宝中设置了频率？

我的代码是

```
period: :monthly, frequency: 1, start_at: Time.zone.now + 30.days 
```

这是创建每月订阅，但永远在这里设置什么。

请帮忙。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T13:21:36.783

**频率**没有说明过期**（**或**循环**或**重复**）。**只有与period**参数结合使用才有意义。

使用您当前的设置，将每月向用户收费，直到他或您取消定期合同。

也许这有助于弄清楚如何`frequency`结合使用`period`：

`period: :monthly, frequency: 1`= *“每1个月”*

`period: :daily, frequency: 3`= *“每 3 天”*

顺便说一句：在 Rails 中，您可以将`30.days.from_now`其用作快捷方式`Time.zone.now + 30.days`

# c# - 如何在代码隐藏c#中将href分配给锚标记

> ID：14052532
> 
> 赞同：5
> 
> 时间：2012-12-27T09:43:53.863
> 
> 标签：c#, c#-4.0

我在数据库中插入的文本是

```
 You also have to click on is <a href="" target="_blank"> link </a> 
```

我在页面加载时分配给标签的文本。我的要求是当我单击“链接”时，我需要重定向到某个页面。如何在后面的代码中将 href 设置为上述代码。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-27T10:05:00.400

尝试使用超链接。

```
 <asp:HyperLink id="hyperlink1" 
                  ImageUrl="images/pict.jpg"
                  NavigateUrl="http://www.microsoft.com"
                  Text="Microsoft Official Site"
                  Target="_new"
                  runat="server"/> 
```

[http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.hyperlink.aspx](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.hyperlink.aspx)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-02-05T23:13:32.217

您应该将 runat="server" 添加到您的锚点，然后给它一个 ID。因此，您可以在代码隐藏中编辑 href 属性。

在html方面：

在后面的代码中：xxxxx.HRef = "bla bla"

看看这个： [你如何在后面的代码中设置转发器内的锚标记的 href 属性？](https://stackoverflow.com/questions/3976659/how-do-you-set-href-attribute-of-anchor-tag-that-is-within-a-repeater-in-code-be)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-27T10:03:13.907

Assuming you can slightly change the format of what you put in the database then I'd do something along these lines:

```
string labelFromDatabase="You also have to click on is <a href=\"{0}\" target=\"_blank\"> link </a>";
string url = "mypage.aspx";
myLabel.Text = String.Format(labelFromDatabase, url); 
```

Adding in the `{0}` placeholder into the database held string means you can easily just use `String.Format` to put in whatever url you want.

Main things to be aware of are that putting `{` or `}` in the DB string will need special care (since they are special characters when you pass it into `String.Format`. Also you will of course need to make sure that url is appropriately escaped if necessary (but that is the case with all solutions).

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-27T09:51:33.217

尝试这个

```
string Myurl="index.aspx";
label1.Text = "You also have to click on is <a href=" + Myurl+ " target="_blank"> link </a> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-04-22T07:54:09.787

使用以下代码将字符串分配给在后面的代码中创建的锚标记中的 href

> 字符串 strstring = "../master/YourPage.aspx?TransID="+ dr["TransId"];

将此字符串分配给 url

```
marqueeText += "<a href='"+strstring+"'" + <span style='color:red;font-weight:bold;font-size:16px'>"
+ Convert.ToString(dr["SocietyName"]) + "</span></a>"; 
```

希望这会帮助你。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-27T10:16:46.980

你需要用这样的格式将你的字符串存储在数据库中......

```
 "You also have to click on is <a href='{0}' target='_blank'> link </a>" 
```

并且当您当时将该文本分配给您的标签时，使用 string.formate 方法将 URL 添加到 href 像这样......

```
//get your database string
string _samplestring ="You also have to click on is <a href='{0}' target='_blank'> link </a>";
string _url ="http://stackoverflow.com/";
lbl.Text = string.Format(_samplestring, _url); 
```

如果您还需要在运行时为目标分配一些东西，那么像这样存储您的字符串..

```
"You also have to click on is <a href='{0}' target='{1}'> link </a>" 
```

并像这样使用它...

```
//get your database string
string _samplestring ="You also have to click on is <a href='{0}' target='{1}'> link </a>";
string _url ="http://stackoverflow.com/";
string _target = "_blank";
lbl.Text = string.Format(_samplestring, _url,_target); 
```

# c# - 将 int 乘以 double c#

> ID：14052534
> 
> 赞同：1
> 
> 时间：2012-12-27T09:44:02.180
> 
> 标签：c#, .net, operators

我想将 textbox1(int) 乘以 textbox2(double) 并在 textbox3 中返回一个 double 我正在做一个 Invoice 应用程序，需要将数量乘以费率来获得数量到目前为止我有这个......

```
private void textbox2_TextChanged(object sender, system.EventArgs e)
{
 int32 qty = int32.Parse(Textbox1.text);
 Double rate = Double.Parse(Textbox2.text);
 Double amt = qty * rate;
 textbox3.text = amt.ToString();
} 
```

我哪里错了？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-27T09:59:14.377

首先，您需要检查第一个文本框是否为空或空格。然后，如果您的第一个文本框为空或空白，则向用户提供适当的消息。

试试下面的例子：

```
if (!string.IsNullOrWhiteSpace(Textbox1.text))
{
    int qty = Int32.Parse(Textbox1.text);
    double rate = Double.Parse(Textbox2.text);
    Textbox3.text = (rate* (double) qty).ToString();
}
else
{
    //Give appropriate message to user for entering quantity in textbox 1
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-27T09:54:12.480

试试这个

```
 textBox3.Text = (Int32.Parse(textBox1.Text) * Double.Parse(textBox2.Text)).ToString(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-27T09:50:57.590

首先关。当你处理金钱时，总是使用十进制，而不是双精度。对于小数，用户使用逗号和点作为小数分隔符总是存在问题。

这段代码对我有用：

```
 int qty = Int32.Parse("2");
    Decimal rate = Decimal.Parse("3.14".Replace(".", ","));
    Decimal amt = qty * rate;
    Console.WriteLine(amt); 
```

# solr - solr 如何过滤大量 id

> ID：14052539
> 
> 赞同：0
> 
> 时间：2012-12-27T09:44:24.257
> 
> 标签：solr, filter, facet, large-data

我有两张表，一张是新闻，另一张是联系人。

新闻：newsid、news_content、news_orgid

联系人：contactid，contact_orgid

我在 solr 中索引了这两个表，所以我有两个核心。但我有一个用例，我需要通过 news_content 找出所有的联系方式。我首先从新闻索引中获得了大量的 orgid，大约 100 万。我想用它作为 solr 中的过滤查询来搜索，比如

> 选择?q= *:* &fq=id:100+id:101+id:102+id:103+id:104

但 solr 限制为 1024 个布尔查询。所以我不能在一个过程中转移。还有其他方法可以解决这个问题吗？

因为我想使用solr的facet数据，所以我无法搜索solr中的所有数据并与ids进行比较。

感谢你的帮助！

最好的祝福！瑞克。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T03:52:03.500

我用solr4.0新特性解决了这个问题：join。首先我将联系人和新闻放在一个核心中，如[http://searchhub.org/2011/02/12/solr-powered-isfdb-part-4/](http://searchhub.org/2011/02/12/solr-powered-isfdb-part-4/)，然后我们可以加入 orgids

# php - 通过php在服务器端将图像转换为视频

> ID：14052540
> 
> 赞同：0
> 
> 时间：2012-12-27T09:44:29.560
> 
> 标签：php, video, converter

我的访客将图片上传到服务器。我的网站为这些上传文件提供了一个连续的名称（例如 0001.jpg、0002.jpg、0003.jpg...）我想要做的是，根据用户的要求，我想在服务器端并将此视频发送到客户端。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-27T10:02:42.970

You have to use [ffmpeg](http://ffmpeg.org/) for creatiion video on serverside. It is very flexible and really powerful tool for working with video, audio and images.

for example, to convert images image1.jpg, image2.jpg,.. into video use this command

```
ffmpeg -f image2 -i image%d.jpg video.mpg 
```

To execute this command from php use [exec](http://php.net/manual/en/function.exec.php) or [system](http://php.net/manual/en/function.system.php) function.

PS. There are other command line utilites can be used to create video from images [ogg-slideshow](http://www.streamnik.de/74.html) and [dvd-slideshow](http://dvd-slideshow.sourceforge.net/wiki/Main_Page). They very convenient if you want to add some predefined transition effects or titles.

# iphone - 如何在 ios 5.0 中使用 bitly 框架和 twitter 框架？

> ID：14052541
> 
> 赞同：0
> 
> 时间：2012-12-27T09:44:37.750
> 
> 标签：iphone, ios, twitter

我正在使用 Twitter 框架从 Twitter 获取推文、提及和更多信息。现在我想在 Twitter 中使用 bitly 来缩短 twitter 帖子中的 url。

所以请建议如何在 iOs 5.0 中使用 bitly ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T09:54:13.660

该`Bitly Twitter`库允许您轻松地包含`Twitter sharing`在您的应用程序中。它建立在`iOS5 twitter integration`.`Apple's TWTweetComposeViewController`

请参阅[bitly_ios_sdk](https://github.com/bitly/bitly_ios_sdk)库源。

请参考[sharekit](https://github.com/ideashower/sharekit/)以在 twitter 中共享图像、文本、url`Bitly`

# javascript - jQuery选择器速度表现

> ID：14052542
> 
> 赞同：1
> 
> 时间：2012-12-27T09:44:41.743
> 
> 标签：javascript, jquery, performance

我有一个很大的产品列表，它是动态的并且随着 ajax 的变化而变化。该表中有大约 100 行。

我已经看到`$('.className', '#parentElement');`选择元素的上下文方法比通常的方法`$('.className');`或`$('#parentElement .className');`. （如果错了请纠正我）

在某些情况下，我需要使用 jQuery 选择特定元素，每个新行都会动态添加唯一`id="product-name-123456"`元素`class="mainproductOffer"`。

**那么，这两种方法的执行速度更快呢？**

1.  `$('tr[id^=product-name-]').click(function(){...});`

2.  `$('tr.mainproductOffer').click(function(){...});`

或者

有没有其他方法可以更快地做同样的事情？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-27T10:19:31.393

在这种情况下使用类选择器，它比属性选择器更快。您应该使用事件委托 - 例如：

```
$('table').on('click','.mainproductOffer',function() {}); 
```

减少事件处理程序的数量。如果类 (mainproductOffer) 仅用于 TR 标签，也请从选择器中删除该标签。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-27T09:57:54.140

> 那么，这两种方法的执行速度更快呢？

$('tr.mainproductOffer').click(function(){...});

> 有没有其他方法可以更快地做同样的事情？

无与伦比的文章 ' [jQuery Anti-Patterns for Performance](http://paulirish.com/2009/perf/) ' 会帮助你

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-27T09:55:48.250

1.  使用 on() （事件委托），因为它是动态添加的。
2.  类选择器比属性选择器快

    `$('tr').on( 'click', '.mainproductOffer', function(){...});`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-27T10:04:41.537

```
$('tr.mainproductOffer').click(function(){.....; OR
$('table').on( 'click', 'tr.mainproductOffer', function(){...; 
```

因为更快

根据jquery[文档](http://api.jquery.com/on/)

> 当 jQuery 用于过滤委托事件时，可以非常快速地处理 tag#id.class 形式的简单选择器。因此，“#myForm”、“a.external”和“button”都是快速选择器。使用更复杂选择器（尤其是分层选择器）的委托事件可能会慢几倍——尽管对于大多数应用程序来说它们仍然足够快。**通常可以通过简单地将处理程序附加到文档中更合适的点来避免分层选择器**。例如，代替**$("body").on("click", "#commentForm .addNew", addComment)**使用**$("#commentForm").on("click", ".addNew", addComment)**。

# xml - 如何使用asp设置http超时？

> ID：14052543
> 
> 赞同：8
> 
> 时间：2012-12-27T09:44:47.220
> 
> 标签：xml, asp-classic

这是我的asp代码

```
<%
http = server.createobject("microsoft.xmlhttp")
http.open "post", servleturl, false
http.setrequestheader "content-type", "application/x-www-form-urlencoded"
http.setrequestheader "accept-encoding", "gzip, deflate"
http.send  "request=" & sxml
http_response = http.responsetext
%> 
```

我需要在 15 秒内没有响应时进行 TimeOut 怎么办？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-12-27T14:36:56.593

您还可以通过像这样调用“SetTimeouts”来继续使用同步请求：

```
<%
Dim http

Set http = Server.CreateObject("MSXML2.ServerXMLHTTP")
http.SetTimeouts 600000, 600000, 15000, 15000
http.Open "post", servleturl, false
http.SetRequestHeader "content-type", "application/x-www-form-urlencoded"
http.SetRequestHeader "accept-encoding", "gzip, deflate"
http.Send  "request=" & sxml

http_response = http.responsetext
%> 
```

[有关文档](http://msdn.microsoft.com/en-us/library/windows/desktop/ms760403%28v=vs.85%29.aspx)，请参见此处。

参数是：

```
setTimeouts (long resolveTimeout, long connectTimeout, long sendTimeout, long receiveTimeout) 
```

> setTimeouts 方法应该在 open 方法之前调用。没有一个参数是可选的。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-12-27T14:00:27.300

我建议在调用后使用实例的[waitForResponse](http://msdn.microsoft.com/en-us/library/windows/desktop/ms765535%28v=vs.85%29.aspx)方法是一种正确的方法。 同样要使用，需要通过设置方法的第三个参数进行异步调用。`ServerXMLHTTP``.Send`
`.WaitForResponse``True``.Open`

```
Const WAIT_TIMEOUT = 15
Dim http
Set http = Server.CreateObject("MSXML2.ServerXMLHTTP")
    http.open "POST", servleturl, True 'async request
    http.setrequestheader "content-type", "application/x-www-form-urlencoded"
    http.setrequestheader "accept-encoding", "gzip, deflate"
    http.send  "request=" & sxml
    If http.waitForResponse(WAIT_TIMEOUT) Then 'response ready
        http_response = http.responseText
    Else 'wait timeout exceeded
        'Handling timeout etc
        'http_response = "TIMEOUT" 
    End If
Set http = Nothing 
```

# file-upload - Symfony2：JFSF 上传捆绑文件输入 NULL

> ID：14052547
> 
> 赞同：0
> 
> 时间：2012-12-27T09:45:11.353
> 
> 标签：file-upload, symfony, bundle

我按照[JFSF 教程](http://blog.jeromefath.com/2011/11/28/bundle-symfony2-pour-la-gestion-de-vos-uploads-avec-doctrine2/)安装 JFSF 上传包。一步一步，我做到了，没有错误。

但是当我尝试在现有包中执行相同操作时，由于某种原因无法验证我的表单，我的文件输入始终为**NULL**。

**也许services.yml**存在一个错误，其参数配置绑定了实体。如果你想要特定的代码，问我，但唯一的区别（理论上）只是实体名称，包名称。

这个包对于处理上传过程非常有用。有人已经试过了吗？

如果我在 isValid() 方法之前在我的控制器中的 createAction() 中 var_dump 我的实体（我使用控制台生成的 crud 表单）：

```
object(Toto\GestionSiteBundle\Entity\People)#368 (4) 
{ 
    ["filePhoto"]=> object(Symfony\Component\HttpFoundation\File\UploadedFile)#12 (7) 
    { 
        ["test":"Symfony\Component\HttpFoundation\File\UploadedFile":private]=> bool(false) 
        ["originalName":"Symfony\Component\HttpFoundation\File\UploadedFile":private]=> string(7) "95.jpeg" 
        ["mimeType":"Symfony\Component\HttpFoundation\File\UploadedFile":private]=> string(10) "image/jpeg" 
        ["size":"Symfony\Component\HttpFoundation\File\UploadedFile":private]=> int(73987) 
        ["error":"Symfony\Component\HttpFoundation\File\UploadedFile":private]=> int(0) 
        ["pathName":"SplFileInfo":private]=> string(36) "/Applications/MAMP/tmp/php/phpKH4PQo" 
        ["fileName":"SplFileInfo":private]=> string(9) "phpKH4PQo" 
    } 
    ["id":"Toto\GestionSiteBundle\Entity\People":private]=> NULL 
    ["nom":"Toto\GestionSiteBundle\Entity\People":private]=> string(4) "cleo" 
    ["photo":"Toto\GestionSiteBundle\Entity\People":private]=> NULL 
} 
```

浏览器返回一个异常：

```
An exception occurred while executing 'INSERT INTO People (nom, photo) VALUES (?, ?)' with params {"1":"cleo","2":null}:

SQLSTATE[23000]: Integrity constraint violation: 1048 Column 'photo' cannot be null 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-28T08:21:56.900

数小时无果后，

我放弃了这个捆绑包，我尝试**了 VichUploaderBundle**。在 5 分钟内，我可以上传我的第一张图片。

这个捆绑听起来不错！

# javascript - CKEDITOR 4 看起来很奇怪 - 第一次使用

> ID：14052560
> 
> 赞同：0
> 
> 时间：2012-12-27T09:46:35.257
> 
> 标签：javascript, css, ckeditor

![工具栏在右侧](../Images/18bed8f6dd3ca44cd352e4462d0c6d37.png)

![在此处输入图像描述](../Images/c7cd5ce3901a530d7f68bc2c1c2af30f.png)

大家好。

这就是我将 CKEDITOR 集成到我的项目时发生的情况。这是一个普通的文本区域，我在其中添加了[框架](http://docs.ckeditor.com/#!/guide/dev_framed)编辑。

除了添加代码，我什么也没做。没有碰过任何文件。

任何人都有同样的问题，或者知道该怎么做？我不知道这里有什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T13:54:18.547

生成的 div che_chrome，需要有一个左浮动和一个宽度。至少这对我有用。

# r - 在 R 中调试 - 如何定位错误？

> ID：14052561
> 
> 赞同：0
> 
> 时间：2012-12-27T09:46:38.807
> 
> 标签：r, debugging, porter-stemmer

我正在尝试编写一个函数，该函数在使文本进行搬运工词干处理时返回单词的词干图。当我尝试运行一个示例时，代码不会停止运行，即没有输出。没有错误，但是当我强制停止它时，它给出了如下警告：

```
1: In stemList[length(stemList) + 1][2] <- flatText[i] :
  number of items to replace is not a multiple of replacement length
2: In stemList[length(stemList) + 1][2] <- flatText[i] :
  number of items to replace is not a multiple of replacement length
3: In stemList[length(stemList) + 1][2] <- flatText[i] :
  number of items to replace is not a multiple of replacement length
4: In stemList[length(stemList) + 1][2] <- flatText[i] :
  number of items to replace is not a multiple of replacement length
5: In stemList[length(stemList) + 1][2] <- flatText[i] :
  number of items to replace is not a multiple of replacement length
6: In stemList[length(stemList) + 1][2] <- flatText[i] :
  number of items to replace is not a multiple of replacement length
7: In stemList[length(stemList) + 1][2] <- flatText[i] :
  number of items to replace is not a multiple of replacement length
8: In stemList[length(stemList) + 1][2] <- flatText[i] :
  number of items to replace is not a multiple of replacement length
9: In stemList[length(stemList) + 1][2] <- flatText[i] :
  number of items to replace is not a multiple of replacement length 
```

我的代码如下：

```
stemMAP<-function(text){
  flatText<-unlist(strsplit(text," "))
  textLength<-length(flatText)

  stemList<-list(NULL)
  for(i in 1:textLength){
    wordStem<-SnowballStemmer(flatText[i])
    flagStem=0
    flagWord=0

    for(j in 1:length(stemList)){
      if(regexpr(wordStem,stemList[j][1])==TRUE){

        for(k in 1:length(stemList[j])){
          if(regexpr(flatText[i],stemList[j][k])==TRUE){ 
            flagWord=1
            #break;
            }
         }

        if(flagWord==0){
          stemList[j][length(stemList[j])+1]<-flatText[i]
          #break;
        }

        flagStem=1

      }

      if(flagStem==0){
        stemList[length(stemList)+1][1]<-wordStem
        stemList[length(stemList)+1][2]<-flatText[i]
      }

    }

  }

  return(stemList)
} 
```

如何识别错误？我的测试语句是：

```
stem<-stemMAP("I like being active and playing because when you play it activates your body and this activation leads to a good health") 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-27T11:32:15.677

在这里，我使用`SnowballStemmer`. 无需用于。

```
library(plyr)   
stemMAP<-function(text){
  flatText <- unlist(strsplit(text," "))
  ## here I use the vectorize version
  wordStem <- as.character(SnowballStemmer(flatText))
  hh <- data.frame(ff = flatText,sn = wordStem)
  ## I use plyr to transform the result to a list
  ## dlply : data.frame to list apply
  ## we group the hh by the column sn , and a apply the 
  ## function as.character(x$ff) to each group( x here is subset data.fame)
  stemList <- dlply(hh,.(sn),function(x) as.character(x$ff))
  stemList
}

stemList
$I
[1] "I"

$a
[1] "a"

$activ
[1] "active"     "activates"  "activation"

$and
[1] "and" "and"

$be
[1] "being" 
```

# webserver - 使用 PHP 前端配置 NetGear 路由器？

> ID：14052562
> 
> 赞同：1
> 
> 时间：2012-12-27T09:46:40.057
> 
> 标签：webserver, lamp, router

我有一个 netgear 路由器和一台用作服务器的 PC。在服务器上，我有一个托管在 WAMP 解决方案（windows、apache、mysql、php）上的网站。Linux 是一种选择，但在这种特定情况下，Windows 是一等奖。

我需要的：

1.  如果有人连接到无线网络，则必须显示托管在服务器上的启动页面。
2.  所有用户都必须具有可为每个用户配置的带宽限制
3.  我必须能够通过 PHP 代码与路由器交互，以便在某些用户登录时执行某些功能等。

所以，我的问题是，人们通常如何做到这一点？有没有办法在路由器上配置它（用户连接到路由器），或者这只能通过代理来完成（用户连接到服务器上的代理，服务器通过路由器连接到互联网）。

这可能吗？有没有可用的软件可以做到这一点？代理是我真正需要的吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T18:26:54.983

[如果您的路由器支持](http://www.dd-wrt.com/site/support/router-database)，您可以在路由器上安装[DD-WRT](http://www.dd-wrt.com)并使用[NoCatSplash](http://www.dd-wrt.com/wiki/index.php/NoCatSplash)捕获连接用户的第一个 HTTP 请求并根据需要重定向它。

# c# - 在 Window Game 中保存和加载游戏状态

> ID：14052566
> 
> 赞同：2
> 
> 时间：2012-12-27T09:46:56.210
> 
> 标签：c#, xna, load, storage

目前我使用 XNA 4.0 Game Studio 和 Visual Studio 2010 提供的 Window Game Statement Management 模板来开发游戏。关于如何保存和加载游戏状态有什么建议吗？以前我开发了一个窗口电话游戏，数据存储在 IsolatedStorage 中。窗口游戏有什么相似之处吗？

```
 using (IsolatedStorageFile file = IsolatedStorageFile.GetUserStoreForAssembly())
            {
                using(IsolatedStorageFileStream stream = file.OpenFile("class123.xml",FileMode.Create))
                {
                    XmlWriterSettings setting = new XmlWriterSettings();
                    setting.Indent = true;
                    using(XmlWriter writer = XmlWriter.Create(stream,setting))
                    {
                        XmlSerializer serializer = new XmlSerializer(typeof(Student));
                        serializer.Serialize(stream,new Student(){Name = "AhLim"});
                    }

                    using (XmlReader reader = XmlReader.Create(stream))
                    {
                        XmlSerializer serializer = new XmlSerializer(typeof(Student));
                        studentA = (Student)serializer.Deserialize(reader);
                    }
                }
            } 
```

这是我最近在 Window Game Applicaiton 中使用的代码。但是，当我到达反序列化部分时，它显示 InvalidOperationException 未处理并且 XML 文档 (0,0) 上的错误。我可以知道问题出在哪里吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-03T17:11:34.497

Windows Phone 游戏中使用的代码应该可以在 PC 上正常运行。数据将存储在 C:\Users\\Documents\SavedGames

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-04T03:25:40.007

尝试

```
 serializer.Serialize(writer, new Student() { Name = "AhLim" }); 
```

代替

```
 serializer.Serialize(stream, new Student() { Name = "AhLim" }); 
```

看起来`IsolatedStorageFileStream`使用了错误的编码。

# java - 为什么在线程外访问时对象变为空

> ID：14052569
> 
> 赞同：1
> 
> 时间：2012-12-27T09:47:05.913
> 
> 标签：java, multithreading

在下面的程序中，我插入

> RThread 类中 allFiles HashMap 中的 files[i].lastModified() 值

当我试图从主类中的 allFiles HashMap 中检索 lastModified 的值时，该值将变为 null。因此，我将 File 对象直接放在 HashMpa 中，而不是 lastModified 值，然后它就起作用了。

任何人都可以指导我这背后的概念。

```
import java.io.File;
import java.util.ArrayList;
import java.util.Comparator;
import java.util.Iterator;
import java.util.List;
import java.util.Map;
import java.util.TreeMap;
import java.util.concurrent.ConcurrentHashMap;

public class RCFLister {

    ConcurrentHashMap allFiles = new ConcurrentHashMap();

    String fileType = null;

    /**
     * @param args
     */
    public static void main(String[] args) {
        RCFLister rcFileLister = new RCFLister();
        rcFileLister.recentFiles(args);
    }

    public void recentFiles(String[] args) {

        int days = 1;
        ThreadGroup rootthreadGr = new ThreadGroup("rootsThreadGroup");
        // reading number of days
        if (args.length > 0 && args[0] != null) {
            days = Integer.valueOf(args[0]);
        }
        // reading file type
        if (args.length > 0 && args[0] != null) {
            fileType = args[1];
        }
        fileType = "png";
        // fileextFilter = new FileExtensionFilter(fileType);
        File[] roots = File.listRoots();
        List threads = new ArrayList();
        for (int i = 0; i < roots.length; i++) {
            // System.out.println(roots[i].getAbsolutePath());
            // rfThread = null;

            RThread rfThread = new RThread(roots[i]);
            Thread t = new Thread(rfThread);
            t.start();
            threads.add(t);
        }

        for (int i = 0; i < threads.size(); i++) {
            try {
                ((Thread) threads.get(i)).join();
            } catch (InterruptedException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
        }   

        ValueComparator vc = new ValueComparator(allFiles);
        TreeMap sortedMap = new TreeMap(vc);
        sortedMap.putAll(allFiles);
        System.out.println(sortedMap.size());
        Iterator it = sortedMap.keySet().iterator();
        while (it.hasNext()) {
            Object key = it.next();
            System.out.println(key + " " + sortedMap.get(key));
        }
    }

    private class ValueComparator implements Comparator {

        Map allFiles;

        public ValueComparator(Map allFiles) {
            this.allFiles = allFiles;
        }

        public int compare(Object o1, Object o2) {
            if (((Long) allFiles.get(o1)) >= ((Long) allFiles.get(o2))) {
                return -1;
            } else {
                return 1;
            }
        }
    }

    private class RThread implements Runnable {
        File rootFolder;

        RThread(File root) {
            rootFolder = root;          
        }

        public void run() {
            getFiles(rootFolder);

        }

        public void getFiles(File folder) {
            File[] files = folder.listFiles();
            for (int i = 0; files != null && i < files.length; i++) {
                // System.out.println(files[i].getAbsolutePath());
                if (files[i].isDirectory()) {
                    getFiles(files[i]);
                } else if (fileType == null
                        || (fileType != null && files[i].getName().endsWith(
                                fileType))) {
                    String filename = null;
                    try {
                        filename = files[i].getCanonicalPath();
                    } catch (Exception e) {
                        e.printStackTrace();
                    }
                                                 if(files[i].lastModified()!=0)
                    allFiles.put(filename, files[i].lastModified());
                }
            }
        }

    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-28T05:39:44.683

ValueComparator 的 compare() 方法从不返回 0。返回 0 表示缺少相等性，因此即使存在键也找不到它。键也是字符串（文件名），您正在按值（长）进行比较。需要重新考虑如何存储数据。只是为了确保它是唯一的问题，打印 CocurrentHashMap。

一定要使用 Generic，它一开始看起来很乏味，但实际上并没有那么糟糕。它将有助于在没有警告的情况下编译代码并实现类型安全。

# mongodb - 在查询中合并变更集文档

> ID：14052572
> 
> 赞同：0
> 
> 时间：2012-12-27T09:47:10.193
> 
> 标签：mongodb

我已经在 mongo 数据库中记录了来自信息系统的更改。每次设置或更改一组值时，都会在 mongo 数据库中保存一条记录。

变更集合采用以下形式：

```
{ "user_id": 1, "timestamp": { "date" : "2010-09-22 09:28:02", "timezone_type" : 3, "timezone" : "Europe/Paris" } }, "changes: { "fieldA": "valueA", "fieldB": "valueB", "fieldC": "valueC" } }
{ "user_id": 1, "timestamp": { "date" : "2010-09-24 19:01:52", "timezone_type" : 3, "timezone" : "Europe/Paris" } }, "changes: { "fieldA": "new_valueA", "fieldB": null, "fieldD": "valueD" } }
{ "user_id": 1, "timestamp": { "date" : "2010-10-01 11:11:02", "timezone_type" : 3, "timezone" : "Europe/Paris" } }, "changes: { "fieldD": "new_valueD" } } 
```

当然，每个用户有数千条具有不同属性的记录，代表数百万条记录。我想要做的是在给定时间查看用户状态。例如，2010 年 9 月 30 日的 user_id 1 将是

```
fieldA: new_valueA
fieldC: valueC
fieldD: valueD 
```

这意味着我需要将给定用户在给定日期之前的所有更改拼合到一条记录中。我可以直接在 mongo 中这样做吗？

**编辑**：我使用的是 2.0 版本的 mongodb，因此无法从聚合框架中受益。

**编辑**：听起来我已经找到了我的问题的答案。

```
var mapTimeAndChangesByUserId = function() { 
    var key = this.user_id;
    var value = { timestamp: this.timestamp.date, changes: this.changes };
    emit(key, value);
}

var reduceMergeChanges = function(user_id, changeset) {
    var mergeFunction = function(a, b) { for (var attr in b) a[attr] = b[attr]; };
    var result = {};

    changeset.forEach(function(e) { mergeFunction(result, e.changes); }); 

    return { timestamp: changeset.pop().timestamp, changes: result };
} 
```

reduce 函数按它们来的顺序合并更改并返回结果。

```
db.user_change.mapReduce(
    mapTimeAndChangesByUserId, 
    reduceMergeChanges,
    { 
        out:   { inline: 1 },
        query: { user_id: 1, "timestamp.date": { $lt: "2010-09-30" } },
        sort:  { "timestamp.date": 1 }
    });
'results' : [
    "_id": 1,
    "value": {
        "timestamp": "2010-09-24 19:01:52",
        "changes": {
            "fieldA": "new_valueA",
            "fieldB": null,
            "fieldC": "valueC",
            "fieldD": "valueD"
        }
    }
] 
```

这对我来说很好。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T16:43:01.363

你可以写一个 MR 来做到这一点。

由于这些字段很像标签，您可以在此处修改一个很好的计算标签的食谱示例：http: [//cookbook.mongodb.org/patterns/count_tags/](http://cookbook.mongodb.org/patterns/count_tags/)当然，您希望应用最新值而不是计数（假设因为这是您的问题不清楚）该领域。

所以让我们得到我们的地图功能：

```
map = function() {
    if (!this.changes) {
        // If there were not changes for some reason lets bail this record
        return;
    }

    // We iterate the changes
    for (index in this.changes) {
        emit(index /* We emit the field name */, this.changes[index] /* We emit the field value */);
    }
} 
```

现在对于我们的减少：

```
reduce = function(values){
    // This part is dependant upon your input query. If you add a sort of 
    // date (ts) DESC then you will prolly want the first index (0) not the last as
    // gathered here by values.length
    return values[values.length];
} 
```

这将针对类型的每个字段更改输出一个文档：

```
{
    _id: your_field_ie_fieldA,
    value: whoop
} 
```

然后，您可以迭代（最有可能）行输出的结尾，并且，bam，您有您的更改。

这当然是一种实现方式，并非旨在完全按照您的应用程序运行，但这一切都取决于您处理的数据的大小；它可以非常接近地运行。

我不确定`group`and是否`distinct`可以在此运行，但看起来可能：[http](http://docs.mongodb.org/manual/reference/method/db.collection.group/#db-collection-group) ://docs.mongodb.org/manual/reference/method/db.collection.group/#db-collection-group但是我应该注意group 基本上是一个 MR 包装器，但您可以执行以下操作（就像上面的 MR 一样未经测试）：

```
db.col.group( {
                   key: { 'changes.fieldA': 1, // the rest of the fields },
                   cond: { 'timestamp.date': { $gt: new Date( '01/01/2012' ) } },
                   reduce: function ( curr, result ) { },
                   initial: { }
                } ) 
```

但它确实需要您定义键，而不是仅仅以可编程的方式迭代它们（也许是更好的方法）。

# c++ - linux终端中的C++运行命令我不明白

> ID：14052573
> 
> 赞同：0
> 
> 时间：2012-12-27T09:47:10.773
> 
> 标签：c++, linux, bash, terminal, command

我正在自学 C++，让我们把它放在桌面上。我通过选择我想要编程的东西并做它来学得最好，一步一步的hello world等等对我来说太慢了，所以现在放在一边。

我试图弄清楚如何`getline`在终端（Kubuntu）中运行我通过（cin，str）得到的字符串。我通读了`system()`这听起来像是一个糟糕的选择，`fork()`我也没有完全理解`exec()`。也许我想错了。

基本上我想移动我编写的 bash 脚本并使其成为程序。我很确定这不是一项小任务，但我这样做是为了好玩。欢迎任何帮助。没有粘贴代码，因为它太基础了，它可能不存在。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T13:01:22.670

> > 基本上我想移动我编写的 bash 脚本并使其成为程序

您可以使用[shc](https://stackoverflow.com/questions/1297318/compilers-for-shell-scripts)将脚本转换为程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T09:49:24.853

你不需要`system()`or`fork()`或`exec()`。这些都是从另一个进程产生进程的系统调用。

相反，您只需要一个 main() 方法，然后读取命令行参数和/或标准输入。例如从[这里](http://wwwx.cs.unc.edu/~sparkst/howto/cpp_main.php)

```
#include <stdio.h>
int main( int argc, const char* argv[] )
{
    printf( "\nHello World\n\n" );
} 
```

不要忘记您的程序可能不会编译到您路径上的任何位置，您可能应该调用它指定适当的目录，例如

```
$ ./myprogram 
```

# android - Android ListView 和 CPU 负载

> ID：14052576
> 
> 赞同：2
> 
> 时间：2012-12-27T09:47:19.583
> 
> 标签：android, listview

我们有某种类型的应用程序通过 Socket 与服务器连接。服务器通常会发送一些订单（添加订单、更新订单和删除订单）。服务器每秒发送更多的 20 个请求。根据对 Android 客户端的这些请求，我们必须更改 ListView 适配器。我们正在这样做，但是我们有大量的 CPU 负载。

你认为这个问题的根源是什么？

ListView 使用 ViewHolder 实现。我们不知道在哪里测量时间以及如何定义这个特定应用程序的瓶颈。我们试图测量请求的分配 - 没关系。我们还测量视图通知。看来也不能慢。然后通过 View.post() 触发 View。也许要查看的 MessageQueue 太长了？

编辑：即使我们当前不在 ListView 中，CPU 负载也很大（我们没有看到它）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T10:16:42.583

您可以参考[Romain Guy](http://www.curious-creature.org/docs/android-performance-case-study-1.html)（主要的 Android 框架工程师之一）撰写的这篇精彩的博客文章，其中展示了如何使用多种优化工具。显示的大多数工具已经包含在 SDK 中，并且可以非常精确地测量以毫秒为单位的时间等。

对任何 android 开发者都非常有用的读物

**编辑：**

这里只是一个疯狂的猜测，考虑到你的描述，也许CPU负载来自移动设备必须处理所有信息，即使信息与它无关（你说根据请求，你改变适配器）为什么不让服务器检查这些数据，然后只向设备发送实际使用的数据？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T10:03:53.813

嗯，每秒 20 个请求对于移动设备本身（不仅仅是`ListView`）来说是一项繁重的任务。

`ListView`每次添加内容时都会重新加载所有内容，因此如果您在列表底部添加新项目，那么最好仅在用户到达列表的最后一项时才加载新项目。

如果您在列表顶部添加新项目，那么`ListView`它并不真正适合您的目的。考虑创建自己的视图并为`onLayout`方法提供不同的实现。

**编辑**

此外，考虑使用某种缓冲区，它将保存累积信息，然后将其刷新到 UI 线程（而不是将每个请求都发布到 UI 线程）。

# node.js - 如何使用 ejs 获得类似“<% name %>”的输出

> ID：14052578
> 
> 赞同：0
> 
> 时间：2012-12-27T09:47:23.617
> 
> 标签：node.js, ejs

我想为`<% name %>`带有 EJS 的 Backbone.js 模板生成输出。我可以用

```
<%- "<%= name %>" %> 
```

解决它，但我认为它会带来一些麻烦。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T12:13:15.763

EJS 无法转义打开和关闭标签。您可以指定另一个打开和关闭标签，例如不与另一个文档内容混淆的`{{`标签。`}}`

# google-maps - 如何在将 Google 地图中的圆圈添加到地图后 x 秒内淡出它？

> ID：14052580
> 
> 赞同：1
> 
> 时间：2012-12-27T09:47:27.620
> 
> 标签：google-maps, google-maps-api-3, google-maps-markers

我基本上想到的是谷歌在[这个](http://www.morethanamap.com/demos/visualization/earthquakes)例子中所做的

每一秒我都想在特定坐标处添加圆圈，然后慢慢淡出它们。我已经设法在地图上添加了圆圈：

```
var citymap = {};
citymap['chicago'] = {
  center: new google.maps.LatLng(41.878113, -87.629798),
  population: 100
};
citymap['amsterdam'] = {
  center: new google.maps.LatLng(52.878113, 5.629798),
  population: 40
};
citymap['paris'] = {
  center: new google.maps.LatLng(48.9021449, 2.4699208),
  population: 100
};
citymap['moscow'] = {
  center: new google.maps.LatLng(56.021369, 37.9650909),
  population: 100
};
citymap['newyork'] = {
  center: new google.maps.LatLng(40.9152414, -73.70027209999999),
  population: 80
};
citymap['losangeles'] = {
  center: new google.maps.LatLng(34.3373061, -118.1552891),
  population: 65
}

for (var city in citymap) {
    var populationOptions = {
        strokeColor: "#900057",
        strokeOpacity: 1,
        strokeWeight: 1,
        fillColor: "#900057",
        fillOpacity: 0.35,
        map: map,
        clickable: false,
        center: citymap[city].center,
        radius: citymap[city].population * 2000
    };
    cityCircle = new google.maps.Circle(populationOptions);
} 
```

但我找不到如何在任何地方淡出它们。已经尝试过浏览 Google Maps API 文档，甚至是示例代码，但也许我错过了一些东西。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-27T14:58:15.623

要使它们淡出，您需要降低填充和描边的不透明度，直到它为 0.0。

```
setInterval(fadeCityCircles,1000);

function fadeCityCircles() {
  for (var city in citymap) {
    var fillOpacity = citymap[city].cityCircle.get("fillOpacity");
    fillOpacity -= 0.02;
    if (fillOpacity < 0) fillOpacity =0.0;
    var strokeOpacity = citymap[city].cityCircle.get("strokeOpacity");
    strokeOpacity -= 0.05;
    if (strokeOpacity < 0) strokeOpacity =0.0;
    citymap[city].cityCircle.setOptions({fillOpacity:fillOpacity, strokeOpacity:strokeOpacity});
  }
} 
```

[例子](http://www.geocodezip.com/v3_SO_circleFade.html)

# android - 将文件夹中的图像加载到android中的画廊视图中

> ID：14052583
> 
> 赞同：2
> 
> 时间：2012-12-27T09:47:46.140
> 
> 标签：android, gallery

我无法访问保存图像的文件夹日记，我想将此文件夹中的所有图像显示到画廊中，请给出一些建议如何做

```
//get the gallery view--------------------------------------------------------------------- 

        Gallery g = (Gallery) findViewById(R.id.gallery);  
        g.setAdapter(new ImageAdapter(this, SDCard()));
//displaying first image on image view      
        Bitmap bm = BitmapFactory.decodeFile( ((List<String>) tFileList).get(0).toString());
        picView.setImageBitmap(bm);

        msg="first image of gallry";
        showToastMessage(msg);

        g.setOnItemClickListener(new OnItemClickListener() 
        {  
            public void onItemClick(AdapterView<?> parent,  View v, int position, long id) 
            { 
                Bitmap bm = BitmapFactory.decodeFile( ((List<String>) tFileList).get(position).toString());
                picView.setImageBitmap(bm);

            }
        });

    }
    private List<String> SDCard()  
    { 
        tFileList = new ArrayList<String>();
        try 
        {

             File dir = Environment.getExternalStorageDirectory();

             File f = new File( dir, "/Diary/");  

             File[] files=f.listFiles();  
             for(int i=0; i<files.length; i++)  
             {  
              File file = files[i];  
              tFileList.add(file.getPath());
             }              
        }  
        catch(Exception e)
        {           
            e.printStackTrace();
            msg="Folder Not Found";
            showToastMessage(msg);

        }       
        return tFileList;
    } 
    public class ImageAdapter extends BaseAdapter 
    {  
        int mGalleryItemBackground;  
        private Context mContext;  
        private List<String> FileList;  

        public ImageAdapter(Context c, List<String> fList) 
        {  
            mContext = c;  
            FileList = fList;  
            TypedArray a = obtainStyledAttributes(R.styleable.Gallery1);  
            mGalleryItemBackground = a.getResourceId(  
            R.styleable.Gallery1_android_galleryItemBackground,0);  
            a.recycle();  
        }  
        public int getCount() 
        {  
            return FileList.size();  
        }  

        public Object getItem(int position) 
        {  
            return position;  
        }         
        public long getItemId(int position) 
        {  
            return (position);  
        }     
        public View getView(int position, View convertView,ViewGroup parent) 
        {  
            ImageView i = new ImageView(mContext);  

            Bitmap bm = BitmapFactory.decodeFile(  
              FileList.get(position).toString());  
            i.setImageBitmap(bm);  

            i.setLayoutParams(new Gallery.LayoutParams(70,50));  
            i.setScaleType(ImageView.ScaleType.FIT_XY);  
            i.setBackgroundResource(mGalleryItemBackground);
            return i;  
        }

    } 
```

在这种情况下该怎么办，我哪里出错了

# iphone - 为 FFT iOS 绘制光谱图

> ID：14052584
> 
> 赞同：0
> 
> 时间：2012-12-27T09:47:48.163
> 
> 标签：iphone, ios, fft, spectrogram

我正在开发一个代码来在 iOS 设备上显示 Spectrograph。我有 FFT 数据，我如何用 FFT 数据绘制 Spectograph。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T09:55:34.583

您可以参考[MIM-Library](https://github.com/ReetuRaj/MIMChart-Library)，它可能会对您有所帮助，它在每个类别中都有一些不错的图表。

MIM-Library 的挂图可以满足您的需求。

# php - 通过php将Access数据库导出为文本文件

> ID：14052586
> 
> 赞同：1
> 
> 时间：2012-12-27T09:47:51.710
> 
> 标签：php, pdo, ms-access-2010

****设想：****

 **我正在从访问数据库中导出一个名为“Registration”的表，并使用 pdo 在 php 中写入一个名为“isl.txt”的文件。用“，”分隔的字段和用“\\”分隔的记录（为了方便，我知道它应该是“\n”，但它不能在文本文件中换行。不知道为什么！！所以我选择了“\ \")

**Access中的注册表：**

Roll_Num,Course,Marks,Discipline,Session

0,CS-101,89,CS,Fall94

0,CS-102,70,CS,Fall94

0,CS-103,59,CS,Fall94

**代码：**

```
$fl = fopen('isl.txt', 'w');
$db = new PDO("odbc:DRIVER={Microsoft Access Driver (*.mdb)};DBQ=D:\Islamabad.mdb;Uid=;Pwd=;");
$results = $db->query("select * from `Registration`");

while ($row = $results->fetch()) {

foreach ($row as $value) {
   $lastv = end($row);

    if ($value != $lastv){

        fwrite($fl, $value.",");
        }

}
 fwrite($fl, $value."\\");
}
 fclose($fl); 
```

**输出：**

0,0,CS-101,CS-101,89,89,CS,CS,Fall94\0,0,CS-102,CS-102,70,70,CS,CS,Fall94\0,0,CS- 103,CS-103,59,59,CS,CS,Fall94

**问题：**

如您所见，记录的每个值都重复两次。请检查我的代码有什么问题！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-27T11:04:34.377

重复值是因为您没有指定 a *`fetch_style`*in `$results->fetch([fetch_style])`。根据手册 - h​​ttp: [//php.net/manual/en/pdostatement.fetch.php](http://php.net/manual/en/pdostatement.fetch.php) - 如果*`fetch_style`*未指定，则默认为`to value of PDO::ATTR_DEFAULT_FETCH_MODE (which defaults to PDO::FETCH_BOTH)`.

> **PDO::FETCH_BOTH**（默认）：返回一个由列名和 0 索引列号索引的数组，如结果集中返回的那样

尝试更改为 -

```
while ($row = $results->fetch(PDO::FETCH_ASSOC)) { 
```

或者

```
while ($row = $results->fetch(PDO::FETCH_NUM)) { 
```**

# deployment - Play framework 2.0部署步骤（我觉得少了点什么）

> ID：14052587
> 
> 赞同：1
> 
> 时间：2012-12-27T09:47:53.047
> 
> 标签：deployment, playframework-2.0, production

当我使用 Play 框架 2.0 部署应用程序构建时，我遇到了一些奇怪的问题。看起来部署没有清理/覆盖编译文件。我知道这是因为改变了一种方法，但仍然以某种方式调用旧方法......

我的部署步骤：

1.  在应用程序目录中`../play stop`
2.  将所有文件从开发上传到应用目录（application.conf 除外）
3.  `../play clean compile stage`
4.  在目标目录中：`./start -Dhttp.port=80 &`

我需要一些“最佳实践”建议；）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-27T10:28:03.703

一些技巧：

*   尝试`play clean-all`改用`play clean`.
*   使用 GIT 来控制更改，也许你忘记上传一些东西。
*   使用[替代配置文件](http://www.playframework.org/documentation/2.0.4/ProductionConfiguration)在不同环境中运行应用程序。
*   使用[`dist`](http://www.playframework.org/documentation/2.0.4/ProductionDist)命令构建独立的生产版本，通过一些`bash scripts`++ `git hooks`，`load balancer`您将能够在不停止应用程序的情况下切换版本。无论如何，请记住将创建的文件移动并解压缩到`/dist`目录之外，因为每次调用`play dist`命令时都会对其进行清理。

# mysql - 使用 JPA（Hibernate 和 Batoo）创建 MySQL 索引

> ID：14052591
> 
> 赞同：0
> 
> 时间：2012-12-27T09:48:05.750
> 
> 标签：mysql, hibernate, jpa, indexing, batoo

我正在尝试使用 JPA 生成索引。我已经知道 JPA 规范本身并没有考虑生成索引的标准方法，但是（一些）提供程序支持此功能。我正在测试新出生的 Batoo (http://batoo.jp/) 和 Hibernate，我对意外的（对我的公司而言）行为感到好奇。我们有 2 个类，第一次定义没有任何索引，我们在其上定义了第二次索引。当我们查看生成的表时，我们发现实际上没有创建索引。然后我们制作了这两个类的精确副本，索引立即到位，这些索引反映在数据库中。这里重要的配置和类文件。**jpa-beans.xml**
（用于休眠）

 **```
<?xml version="1.0" encoding="UTF-8"?>
<beans:beans profile="hibernate" xmlns:beans="http://www.springframework.org/schema/beans"
  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xmlns="http://www.springframework.org/schema/data/jpa"
  xsi:schemaLocation="http://www.springframework.org/schema/beans
    http://www.springframework.org/schema/beans/spring-beans.xsd
    http://www.springframework.org/schema/data/jpa
    http://www.springframework.org/schema/data/jpa/spring-jpa.xsd">

    <beans:import resource="classpath:spring/jpa-common.xml"/>

    <beans:bean id="entityManagerFactory"
            class="org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean">
        <beans:property name="dataSource" ref="dataSource" />
        <beans:property name="jpaVendorAdapter">
            <beans:bean class="org.springframework.orm.jpa.vendor.HibernateJpaVendorAdapter">
                <beans:property name="database" value="MYSQL" />
                <beans:property name="showSql" value="true" />
            </beans:bean>
        </beans:property>
        <beans:property name="persistenceUnitName" value="jpa.sample" />
        <beans:property name="persistenceXmlLocation" value="classpath:META-INF/persistence.xml"/>
        <beans:property name="jpaProperties">
            <beans:props>
                <beans:prop key="hibernate.enable_lazy_load_no_trans">true</beans:prop>
                <beans:prop key="hibernate.hbm2ddl.auto">update</beans:prop>
            </beans:props>
        </beans:property>
    </beans:bean>

    <beans:bean class="org.springframework.orm.jpa.JpaTransactionManager" id="transactionManager">
        <beans:property name="entityManagerFactory" ref="entityManagerFactory" />
        <beans:property name="jpaDialect">
            <beans:bean class="org.springframework.orm.jpa.vendor.HibernateJpaDialect" />
        </beans:property>
    </beans:bean>

</beans:beans> 
```

对于 Batoo，我们只需将 jpaVendorAdapter 更改为我们的自定义适配器和 jpaProperties 映射，以便使用 Batoo 提供的属性。

带注释的 Java 类：
**地址**（@Table 注释中的 uniqueConstraints 是在 DB 上已经存在表时添加的）和**CopyOfAddress**（@Table 注释中的 uniqueConstraints 立即存在）。省略了 setter 和 getter。

```
@Entity
@Table(uniqueConstraints={
    @UniqueConstraint(name="uniqueAddress", columnNames={
        "zipCode", "street", "number", "city", "country"
    })
})
public class Address extends BaseEntity
{
  private String zipCode;
  private String street;
  private String number;
  private String city;
  private String country;

  @Id
  @GeneratedValue(strategy=GenerationType.AUTO)
  Long id;

  @ManyToOne(cascade={CascadeType.PERSIST, CascadeType.MERGE, CascadeType.REFRESH})
  private User user;
  ...
} 
```

**用户**和**CopyOfUser**

```
@Entity
public class User extends BaseEntity
{
  @Column(unique=true)
  private String username;

  private String fullName;

  @Id
  @GeneratedValue(strategy=GenerationType.AUTO)
  private Long id;
  ...
} 
```

我们希望在 db 上创建的表是相同的，但这里使用 mysqldump 获得的转储（只是相关的 create table 语句）：

```
CREATE TABLE `Address` (
  `zipCode` varchar(255) DEFAULT NULL,
  `street` varchar(255) DEFAULT NULL,
  `user_id` bigint(20) DEFAULT NULL,
  `number` varchar(255) DEFAULT NULL,
  `country` varchar(255) DEFAULT NULL,
  `city` varchar(255) DEFAULT NULL,
  `id` bigint(20) DEFAULT NULL,
  KEY `FK_A2CD7CE3` (`user_id`),
  CONSTRAINT `FK_A2CD7CE3` FOREIGN KEY (`user_id`) REFERENCES `User` (`id`)
) ENGINE=InnoDB DEFAULT CHARSET=latin1;

CREATE TABLE `CopyOfAddress` (
  `id` bigint(20) NOT NULL AUTO_INCREMENT,
  `city` varchar(255) DEFAULT NULL,
  `country` varchar(255) DEFAULT NULL,
  `number` varchar(255) DEFAULT NULL,
  `street` varchar(255) DEFAULT NULL,
  `zipCode` varchar(255) DEFAULT NULL,
  `user_id` bigint(20) DEFAULT NULL,
  PRIMARY KEY (`id`),
  UNIQUE KEY `zipCode` (`zipCode`,`street`,`number`,`city`,`country`),
  KEY `FKA0BC6A08E9A4D67F` (`user_id`),
  CONSTRAINT `FKA0BC6A08E9A4D67F` FOREIGN KEY (`user_id`) REFERENCES `User` (`id`)
) ENGINE=InnoDB DEFAULT CHARSET=latin1;

CREATE TABLE `User` (
  `id` bigint(20) NOT NULL DEFAULT '0',
  `username` varchar(255) DEFAULT NULL,
  `fullName` varchar(255) DEFAULT NULL,
  PRIMARY KEY (`id`)
) ENGINE=InnoDB DEFAULT CHARSET=latin1;

DROP TABLE IF EXISTS `CopyOfUser`;

CREATE TABLE `CopyOfUser` (
  `id` bigint(20) NOT NULL DEFAULT '0',
  `username` varchar(255) DEFAULT NULL,
  `fullName` varchar(255) DEFAULT NULL,
  PRIMARY KEY (`id`),
  UNIQUE KEY `username` (`username`)
) ENGINE=InnoDB DEFAULT CHARSET=latin1; 
```

如您所见，在用户和地址中都没有创建索引，而它们在精确的副本中。有谁知道为什么？而且，作为一个附带问题，有谁知道为什么不考虑我们在 CopyOfAddress 中为索引提供的名称？

**编辑**
如果可能有帮助，我可以添加我正在使用 Hibernate 4.1.7.Final 和 Batoo 2.0.1.0-RTM。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-28T12:21:16.363

我使用一些日志深入研究了更多细节，我发现 Hibernate（不了解 Batoo）仅在创建表时创建索引，而仅在添加新列的情况下（并且唯一目的是）更改表（即使现有的数据库表不包含数据，它也不会删除现有的）。这里有一些日志来证明这一点：

*从头开始创建一个新表，具有唯一的约束*

```
DEBUG [tool.hbm2ddl.SchemaUpdate] create table CopyOfCopyOfAddress (id bigint not null auto_increment, city varchar(255), country varchar(255), number varchar(255), street varchar(255), zipCode varchar(255), user_id bigint, primary key (id), unique (zipCode, street, number, city, country))
DEBUG [tool.hbm2ddl.SchemaUpdate] alter table CopyOfCopyOfAddress add index FK50EC293CE9A4D67F (user_id), add constraint FK50EC293CE9A4D67F foreign key (user_id) references User (id) 
```

*向现有表添加新列，其中唯一约束设置到 java 文件中，但未设置到 db 中*

```
DEBUG [tool.hbm2ddl.SchemaUpdate] alter table Address add column zipCode2 varchar(255) 
```

在第二种情况下，我希望看到类似`alter table Address add unique(zipCode, street, number, city, country);`（记住 Address.java）这样的行，因此很明显 Hibernate 不会向现有表添加唯一约束（至少使用标准 JPA 注释）！
如果我没有被证明是错误的，我很快就会接受这个作为答案，因为我不知道还有什么要测试的，而且我没有找到任何文档。**

# php - 如何从 php 中发布的 URL 中获取字段名称

> ID：14052592
> 
> 赞同：1
> 
> 时间：2012-12-27T09:48:06.270
> 
> 标签：php

我想编写一个 php 文件，将发布的值作为 json 数组返回。我使用以下代码将其编写为 json 数组。

```
$camp = $_REQUEST['ldy_camp'];  
$key = $_REQUEST['ldy_key'];    
$visit = $_REQUEST['ldy_visit'];        
$ref = $_REQUEST['ldy_ref'];    
$time = $_REQUEST['ldy_time'];  

$response["ldy_camp"] = $camp;
$response["ldy_key"] = $key;
$response["ldy_visit"] = $visit;
$response["ldy_ref"] = $ref;
$response["ldy_time"] = $time;

echo json_encode($response); 
```

当我使用这样的 url 时，它会返回值：

```
http://php.cynere.net/test/ajax.phpajax.php?ldy_camp=hello&ldy_key=keyvalue&ldy_visit=visit_value&ldy_ref=reference&ldy_time=time%20value 
```

但我的问题是当我像这样将一些未知值传递给 url 时：

```
http://php.cynere.net/test/ajax.phpajax.php?unknown=some values 
```

它应该 php 文件应该返回未知值作为 json 数组

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-27T09:49:41.270

为什么不回来`json_encode($_GET);`呢？

尽管我认为将相同的值返回给客户端没有意义。

# sql-server - SQL Server 2008 推荐使用哪种多租户方法

> ID：14052593
> 
> 赞同：2
> 
> 时间：2012-12-27T09:48:18.663
> 
> 标签：sql-server, asp.net-mvc, database-design, architecture, multi-tenant

我必须使用 ASP.NET MVC 3 或更高版本和 SQL Server 2008。根据[多租户数据架构](http://msdn.microsoft.com/en-us/library/aa479086.aspx)帖子，有 3 种方法可以实现多租户

1.  单独的数据库

2.  共享数据库，分离模式

3.  共享数据库，共享架构

我有以下细节：

1.  用户应该能够备份和恢复他们的数据。
2.  租户数量：1000（大约）
3.  每个租户可能属于不同的域（url）。
4.  它必须支持对租户的监控和管理。
5.  它必须支持每个租户的用户认证和授权
6.  它必须支持租户自定义（启用禁用功能集）
7.  每个租户中的表数：100（初始）

我想知道您的经验表明哪种方法更适合考虑经济和安全的项目？有没有类似的好实时示例（开源项目）？我可以为该项目使用一台专用服务器。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T13:01:07.050

您对用户应该能够备份其数据的要求，可以通过方法 1 和 2 更容易地实现......因为这将是一个本地数据库任务。

如果您采用方法 3（共享-共享），则需要开发逻辑以提取属于单个租户的所有行并将其导出到 xml 文件或类似文件中。然后，如果您需要允许用户恢复该备份文件，则需要开发一个恢复逻辑。

我认为这是唯一可以让你远离#3 的要求。

一旦您使用表中的 TenantID 列设置数据库......如果您的客户非常关注安全性，您可以轻松地将一个数据库用于 1 个租户或一小组租户。例如，您可以在一个数据库中保存未付费的租户（免费/演示帐户），而在另一个数据库中保存付费客户。这样您就可以使用方法#3，但如果您需要它可以表现得像#1。

***：：： 奖金 ：：：***

**身份验证：** 您需要扩展 MVC3 应用程序中使用的 SQL 成员资格和角色提供程序......以便用户登录仅在其所属的租户中有效。

**多个域** 在这里您可以看到一些使用 ASP.NET MVC3 路由的方法： [MVC 3 子域路由](https://stackoverflow.com/questions/5436268/mvc-3-subdomain-routing)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T10:01:54.427

I would always use (3) Shared Database, Shared Schema.

If you want an example, how about Wordpress, Joomla, or any other popular open source web-based project?

Creating separate schemas or databases on a per-tenant basis will lead to massive management overhead. Not to mention increased complexity of analysing your data, costs, etc.

The only reason you'd go for (1) (or perhaps 2) is if you were to give your actual tenant direct access to some/all of the database. As you're using ASP.NET MVC 3, this isn't a consideration.

# hibernate - 休眠 saveOrUpdate() 不起作用

> ID：14052594
> 
> 赞同：0
> 
> 时间：2012-12-27T09:48:20.223
> 
> 标签：hibernate

我在使用该`saveOrUpdate()`方法时遇到问题：

我有表`user`，由 Hibernate 自动生成：

> ```
>  ________
> |  User  |
> |________|
> |Id      |
> |Name    |
> |Address |
> |________| 
> ```

我可以成功保存`[Mohan, BTM]`——创建行`[1, Mohan, BTM]`。

但是，当我更新 Database 中的同一记录时`[1, Mohan, EC]`，它不是更新第 1 行，而是创建一个新行：`[2 , Mohan, EC]`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T13:02:32.880

它正在创建新记录，因为它具有不同的 ID，我假设像休眠映射一样

```
<id name="id" column="id">
        <generator class="native"></generator>
    </id> 
```

当对象具有不同的 id 时，它被认为是新记录。上面的映射将自动生成一个 id，当您尝试更新相同的对象时，您必须显式设置对象 id。

# android - Android：AppWidget Grid View 图标被清除，Widget 停止响应点击

> ID：14052595
> 
> 赞同：1
> 
> 时间：2012-12-27T09:48:34.530
> 
> 标签：android, widget

我创建了一个简单的主屏幕小部件，它在网格视图中使用预定义的应用程序图标显示当前时间和日期。我正在使用 OnReceive 事件的警报管理器更新日期和时间。当我单击时钟时，它会打开配置屏幕。

我的问题是，当我运行其他一些主要是游戏的应用程序时，应用程序图标从小部件中消失，并且小部件在单击时停止响应。但 OnReceive 方法正常工作并更新时钟。

我不明白为什么会这样。请帮我。

**接收代码**

```
 @Override
    public void onReceive(Context context, Intent intent) {
        super.onReceive(context, intent);
        // // Get shared prefs
        myPref = new SharedPref(context);
        try {

            Log.d(LOG_TAG, "OnRecive Called : " + intent.getAction());

            if (CLOCK_WIDGET_UPDATE.equals(intent.getAction())) {
                Log.d(LOG_TAG, "Clock update");
                // Get the widget manager and ids for this widget provider, then
                // // call the shared // clock update method.
                ComponentName thisAppWidget = new ComponentName(context.getPackageName(), getClass().getName());
                AppWidgetManager appWidgetManager = AppWidgetManager.getInstance(context);
                int ids[] = appWidgetManager.getAppWidgetIds(thisAppWidget);
                for (int appWidgetID : ids) {
                    updateAppWidget(context, appWidgetManager, appWidgetID);
                }

            }
        } catch (Exception e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }

        // mWidgetId = getWidgetId(intent);

    } 
```

**更新代码**

```
@Override
    public void onUpdate(Context context, AppWidgetManager appWidgetManager, int[] appWidgetIds) {

        final int N = appWidgetIds.length;
        PendingIntent pendingIntent = null;

        myPref = new SharedPref(context);
        mWidgetId = appWidgetIds[N - 1];
        addWidget_Database_Detail(context);

        // insert Add Button
        // insertAddAppButton(context);

        Log.d(LOG_TAG, "Updating Example Widgets.");
        Random randomGenerator = new Random();
        // Perform this loop procedure for each App Widget that belongs to this
        // provider
        for (int i = 0; i < N; i++) {
            int appWidgetId = appWidgetIds[i];

            // Create an Intent to launch ExampleActivity
            Intent intent = new Intent(context, Configuration_Activity.class);
            intent.putExtra(AppWidgetManager.EXTRA_APPWIDGET_ID, appWidgetId);

            // Get the layout for the App Widget and attach an on-click listener
            // to the button
            RemoteViews views = new RemoteViews(context.getPackageName(), R.layout.widget_layout);

            pendingIntent = PendingIntent.getActivity(context, randomGenerator.nextInt(100), intent, 0);
            views.setOnClickPendingIntent(R.id.linearLayout_Time, pendingIntent);

            setUpAppGrid(context, appWidgetManager, mWidgetId);

            // Tell the AppWidgetManager to perform an update on the current app
            // widget
            appWidgetManager.updateAppWidget(appWidgetId, views);

            // Update The clock label using a shared method
            updateAppWidget(context, appWidgetManager, appWidgetId);
        }
    } 
```

# sql - sql server中的子查询v / s内部联接

> ID：14052596
> 
> 赞同：45
> 
> 时间：2012-12-27T09:48:46.667
> 
> 标签：sql, performance, query-optimization, sql-server-2012

我有以下查询

第一个使用内连接

```
SELECT item_ID,item_Code,item_Name 
FROM [Pharmacy].[tblitemHdr] I 
    INNER JOIN  EMR.tblFavourites F ON I.item_ID=F.itemID
WHERE F.doctorID = @doctorId AND F.favType = 'I' 
```

第二个使用子查询，例如

```
SELECT item_ID,item_Code,item_Name from [Pharmacy].[tblitemHdr]
WHERE item_ID IN
(SELECT itemID FROM EMR.tblFavourites
WHERE doctorID = @doctorId AND favType = 'I'
) 
```

在这个项目表中`[Pharmacy].[tblitemHdr]`包含 15 列和 2000 条记录。并`[Pharmacy].[tblitemHdr]`包含 5 列和大约 100 条记录。在这种情况下`which query gives me better performance?`

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2012-12-27T10:03:06.740

通常连接会比内部查询更快，但实际上它取决于 SQL Server 生成的执行计划。无论您如何编写查询，SQL Server 都会在执行计划上对其进行转换。如果它足够“聪明”，可以从两个查询中生成相同的计划，那么您将得到相同的结果。

[这里](http://blog.sqlauthority.com/2010/06/06/sql-server-subquery-or-join-various-options-sql-server-engine-knows-the-best/)和[这里](http://blog.sqlauthority.com/2010/06/05/sql-server-convert-in-to-exists-performance-talk/)有一些帮助链接。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-12-27T09:55:16.030

在 Sql Server Management Studio 中，您可以启用“**客户端统计**”并**包括实际执行计划**。这将使您能够准确了解每个请求的执行时间和负载。

还要在每个请求之间清理缓存以避免缓存对性能的副作用

```
USE <YOURDATABASENAME>;
GO
CHECKPOINT;
GO
DBCC DROPCLEANBUFFERS;
GO 
```

我认为亲眼所见总比依靠理论好！

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2016-04-23T08:27:42.663

子查询与联接

表一 20 行，2 列

表二 20 行 2 列

子查询20*20

加入20*2

合乎逻辑，纠正

**详细的**

[![在此处输入图像描述](../Images/8cceb3ed5d5356ed8db4a9f7250b6a7d.png)](https://i.stack.imgur.com/Z4ikh.png)

[![在此处输入图像描述](../Images/fe3b3d75d8af19919e156cb259b2a92e.png)](https://i.stack.imgur.com/YOtXK.png)

扫描计数表示乘法效应，因为系统必须一遍又一遍地获取数据，对于您的性能衡量，只需查看时间

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2012-12-27T09:56:32.673

join 比子查询快。

子查询使磁盘访问繁忙，想想硬盘的读写针（头？）在访问时来回走动：用户，搜索表达式，页面大小，DrilldownPageSize，用户，搜索表达式，页面大小，DrilldownPageSize，用户......等等在。

连接通过将操作集中在前两个表的结果上来工作，任何后续连接都将集中在第一个连接表的内存（或缓存到磁盘）结果上，依此类推。更少的读写针运动，因此更快

来源：[这里](https://stackoverflow.com/questions/1788678/sql-sub-query-or-inner-join)

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-12-27T09:56:54.640

第一个查询比第二个查询好。因为第一个查询我们要加入两个表。并检查这两个查询的解释计划......

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-08-27T12:16:39.933

这一切都取决于表之间的数据和关系映射。如果不遵循 RDBMS 规则，那么即使是第一个查询，执行和数据获取也会很慢。

# c++ - 是否有任何 C++ 库可与 WMI 一起使用？

> ID：14052597
> 
> 赞同：0
> 
> 时间：2012-12-27T09:48:45.890
> 
> 标签：c++, wmi, static-libraries

我正在做一个必须轮询远程 WMI 计数器的大项目。我必须用 C++ 编写一个 Win32 应用程序来从远程 Windows 系统查询 WMI。那么，是否有任何 C++ 库（免费或付费）帮助我使用 WMI？请帮我。

非常感谢 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T20:31:09.040

您可以使用[`WMI Delphi Code Creator`](http://code.google.com/p/wmi-delphi-code-creator/)生成[C++ 代码](http://code.google.com/p/wmi-delphi-code-creator/wiki/MSCPPDevelopers)来访问 WMI（Windows 管理规范）类、事件和方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T10:24:12.300

AFAIK，没有现成的库（想想 STL）来访问 WMI。您必须手动完成。MSDN 上有一个关于程序应该做什么来访问这些功能的[简要概述。](http://msdn.microsoft.com/en-us/library/windows/desktop/aa389762%28v=vs.85%29.aspx)[这里](http://msdn.microsoft.com/en-us/library/windows/desktop/aa390418%28v=vs.85%29.aspx)还有一些与文章相关的示例代码。

# wpf - 删除 Xceed 数据网格中的默认文本

> ID：14052602
> 
> 赞同：3
> 
> 时间：2012-12-27T09:48:59.367
> 
> 标签：wpf, wpfdatagrid, xceed-datagrid, xceed

我正在使用 Xceed 数据网格的 Codeplex 版本。
但是，在以表格形式显示网格时，“由 Xceed 提供支持”文本出现在数据网格的右上角。
![在此处输入图像描述](../Images/9f80002906b32c4e2ef793554a4e78fc.png)

可以删除这个吗？如何？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-27T10:23:04.403

我试过这个。有效。

```
 <Style TargetType="{x:Type xcdg:HierarchicalGroupByControl}">
            <Setter Property="Visibility" Value="Collapsed"/>
        </Style> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-01T15:06:05.537

前几天我为此写了一篇简短的博客文章。我做了一个简单的扩展方法来找到装饰层并将其删除。

```
 public static class XceedDataGridExtensions
 {
   public static void RemoveWaterMark(this DataGridControl grid)
   {
     object hgbc = XceedDataGridExtensions.FindChild<HierarchicalGroupByControl>(grid, null);
     AdornerLayer al = AdornerLayer.GetAdornerLayer(hgbc as Control);
     al.Visibility = System.Windows.Visibility.Collapsed;
   }

  static T FindChild<T>(DependencyObject parent, string childName) where T : DependencyObject
  {
     // Confirm parent and childName are valid.
     if (parent == null) return null;
       T foundChild = null;
     int childrenCount = VisualTreeHelper.GetChildrenCount(parent);
     for (int i = 0; i < childrenCount; i++)
     {
       var child = VisualTreeHelper.GetChild(parent, i);
       // If the child is not of the request child type child
       T childType = child as T;
       if (childType == null)
       {
         // recursively drill down the tree
         foundChild = FindChild<T>(child, childName);
         // If the child is found, break so we do not overwrite the found child.
         if (foundChild != null) break;
       }
       else if (!string.IsNullOrEmpty(childName))
       {
         var frameworkElement = child as FrameworkElement;
         // If the child's name is set for search
         if (frameworkElement != null && frameworkElement.Name == childName)
         {
            // if the child's name is of the request name
            foundChild = (T)child;
            break;
         }
      }
      else
      {
         // child element found.
         foundChild = (T)child;
         break;
      }
    }

    return foundChild;
   }
 } 
```

您可以在这里阅读更多相关信息：http: [//blog.itsnotfound.com/2013/02/xceed-community-datagridcontrol-watermark-removal/](http://blog.itsnotfound.com/2013/02/xceed-community-datagridcontrol-watermark-removal/)

此外，@punker76 在我看来，正如社区网站上的讨论线程中所述，删除水印并不违反 MSPL。开发人员承认如何通过修改源代码来去除水印。他们甚至正在研究一种更容易接受的解决方案。请在此处查看讨论：[http ://wpftoolkit.codeplex.com/discussions/428413](http://wpftoolkit.codeplex.com/discussions/428413)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-05-15T08:59:55.673

我认为删除的最简单方法`GroupByControl`是修改`FixedHeaders`属性：

```
 <xcdg:DataGridControl  Grid.ColumnSpan="3"
                           UpdateSourceTrigger="CellContentChanged"
                           Grid.Row="8"
                           AutoCreateColumns="False"
                           IsDeleteCommandEnabled="True"
                           SelectionMode="Single"
                           ItemsSource="{Binding Instructions,UpdateSourceTrigger=PropertyChanged,Mode=TwoWay}">
        <xcdg:DataGridControl.View>
            <xcdg:TableView ShowRowSelectorPane="False"
                            UseDefaultHeadersFooters="False"
                            ColumnStretchMode="All">
                <xcdg:TableView.FixedHeaders>
                    <DataTemplate>
                        <DockPanel>
                            <xcdg:ColumnManagerRow DockPanel.Dock="Right"
                                                   AllowColumnReorder="False"
                                                   AllowColumnResize="False" />
                            <xcdg:GroupByControl x:Name="groupByControl"
                                                 Visibility="Collapsed" />
                        </DockPanel>
                    </DataTemplate>
                </xcdg:TableView.FixedHeaders>
            </xcdg:TableView>
        </xcdg:DataGridControl.View>
        <xcdg:DataGridControl.Columns>
            <xcdg:Column Title="Title"
                         FieldName="Title" />
            <xcdg:Column Title="Content"
                         FieldName="Content" />
            <xcdg:Column Title="Image Url"
                         FieldName="ImageUrl" />
        </xcdg:DataGridControl.Columns>
    </xcdg:DataGridControl> 
```

只需将属性值设置`Visibility`为“已折叠”，如示例中所示。

# html - 如何防止使用 gettext() 翻译评论

> ID：14052604
> 
> 赞同：2
> 
> 时间：2012-12-27T09:49:05.610
> 
> 标签：html, smarty, gettext

我正在使用 gettext() 来处理我的网站的国际化。事实上，我使用 Smarty 作为模板引擎，我不得不通过 smarty 的标签来注释我的部分 html 代码：{* *}。问题是这些注释充满了我曾经开发但我不想摆脱的代码。因此 gettext() 读取内部（大括号之间）代码，并生成一个包含许多非必要翻译项的 .po 文件。如何防止自己拥有一个没有额外翻译项目的干净 po 文件。我的代码上的正则表达式或使用 gettext() 设置的参数？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-27T21:54:43.003

从[xgettext](http://www.gnu.org/savannah-checkouts/gnu/gettext/manual/html_node/xgettext-Invocation.html)手册中，这些是支持的语言：C、C++、ObjectiveC、PO、Shell、Python、Lisp、EmacsLisp、librep、Scheme、Smalltalk、Java、JavaProperties、C#、awk、YCP、Tcl、Perl、PHP、GCC -source、NXStringTable、RST、Glade

因此，除非其中一种语言具有类似聪明的注释 {* *}，否则我认为您不能（轻松）绕过注释代码。

但是，我**猜测**可能的解决方法是以某种方式编译所有模板，然后跨 *.php 文件而不是 *.tpl 运行 poedit。由于 smarty 注释不会包含在编译的模板中，它们将被排除在外

# c# - 如何使用 C# 在电子邮件正文中添加按钮和文本框？

> ID：14052605
> 
> 赞同：-2
> 
> 时间：2012-12-27T09:49:14.017
> 
> 标签：c#, asp.net, .net

截至目前，我将字符串文本作为电子邮件正文发送。但我应该发送确定、取消按钮和一些文本。如果用户单击确定需要执行一些功能。如果取消需要打开一个文本框。请告诉我..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T09:56:20.560

看[这里](https://stackoverflow.com/questions/886728/generating-html-email-body-in-c-sharp)

你应该像这样生成你的 HTML 代码：

```
mm.Body = "<h2>This is an HTML-Formatted Email Send Using the <code>IsBodyHtml</code> Property</h2><p>Isn't HTML <em>neat</em>?</p><p>You can make all sorts of <span style=""color:red;font-weight:bold;"">pretty colors!!</span>.</p>";
mm.IsBodyHtml = true; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-27T09:56:45.813

您将无法运行*任何*脚本，因为现在大多数邮件客户端都阻止了这一点。如果您想在电子邮件中包含按钮，则​​必须插入带有指向***您的公共网页***链接的图像。
要了解单击链接的用户是谁，您还应该在 URL 中包含一些唯一的 Guid...*由于*
现在许多邮件客户端甚至拒绝加载远程图像，您可能需要将图像嵌入到电子邮件中。

无论如何，这种“远程回调”的示例可能是这样的：

```
<a href="http://mywebsite.com/buttonclick.aspx?ClickId=[SomeUniqueGuid]><img src="http://mywebsite.com/image.png"></a> 
```

但为了清楚起见 -***除非****您发明自己的邮件客户端，否则您无法* *弹出文本框或添加脚本*

 *** * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-27T10:34:56.240

我写了一个函数来发送基于 html 的电子邮件。

字符串 mbody 可能包含 html。其中也可以包括按钮或文本框。就我而言，我使用 stringbulder 来构建电子邮件正文。

```
 private string styleTag = "<head><STYLE TYPE='text/css'>body, input, button{color: 
black;background-color: white;font-family: Verdana,Arial,Helvetica;font-size: x-
small;}p{color: #666666;}h1{color: #666666;font-size: medium;}h2{color: 
black;}table{border-collapse: collapse;border-width: 0;border-spacing: 0;width: 90%;table-
layout: auto;}pre{word-wrap: break-word;font-size: x-small;font-family: 
Verdana,Arial,Helvetica;display: inline;}table.WithBorder{border-style: solid;border-color: 
#F1EFE2;border-width: 1px;border-collapse: collapse;width: 90%;}TD{vertical-align: 
top;font-size: x-small;}TD.PropName{vertical-align: top;font-size: x-small;white-space: 
nowrap;background-color: #FFF;border-top: 1px solid #F1EFE2;}TD.PropValue{font-size: x-
small;border-top: 1px dotted #F1EFE2;}TD.Col1Data{font-size: x-small;border-style: 
solid;border-color: #F1EFE2;border-width: 1px;background: #F9F8F4;width: 
auto;}TD.ColData{font-size: x-small;border-style: solid;border-color: #F1EFE2;border-width:
 1px;}TD.ColDataXSmall{font-size: x-small;border-style: solid;border-color: #F1EFE2;border-
width: 1px;width: 5%;}TD.ColDataSmall{font-size: x-small;border-style: solid;border-color: 
#F1EFE2;border-width: 1px;width: 10%;}TD.ColHeadingXSmall{background-color: #F1EFE2;border-
style: solid;border-color: #F1EFE2;border-width: 1px;font-size: x-small;width: 
5%;}TD.ColHeadingSmall{background-color: #F1EFE2;border-style: solid;border-color: 
#F1EFE2;border-width: 1px;font-size: x-small;width: 10%;}TD.ColHeadingMedium{background:
 #F1EFE2;border-style: solid;border-color: #F1EFE2;border-width: 1px;font-size: x-
small;width: 200px;}TD.ColHeading{font-size: x-small;border-style: solid;border-color: 
#F1EFE2;border-width: 1px;background: #F1EFE2;width: auto;}.Title{width:100%;font-size: 
medium;}.footer{width:100%;font-size: xx-small;}</STYLE></head>";

     public string SendEmail(string mTo, string mSubject, string mBody)
        {
            string host = "xxx";
            string str2 = "xxx";
            string userName = "xxx";
            string password = "xxx";
            SmtpClient client = new SmtpClient(host) {
                Port = 0x1b,
                Credentials = new NetworkCredential(userName, password)
            };
            MailAddress from = new MailAddress(str2, userName, Encoding.UTF8);
            MailAddress to = new MailAddress(mTo);
            MailMessage message = new MailMessage(from, to) {
                IsBodyHtml = true,
                Body = mBody,
                Subject = mSubject
            };
            client.Send(message);
            return "email sent";
        } 
```**

# r - 从R中的多个列表对象中提取相同字段的值

> ID：14052612
> 
> 赞同：4
> 
> 时间：2012-12-27T09:49:40.397
> 
> 标签：r, list

我有一个列表对象如下：

```
structure(list(bga_u = structure(list(buy_target_price = numeric(0), 
    sell_target_price = numeric(0), units_holding = 0, tx_record = structure(list(
        `2010-12-01` = structure(list(buy_date = structure(14944, class = "Date"), 
            offer_price = 40.58, buy_unit = 3.15931809278285, 
            status = "hold"), .Names = c("buy_date", "offer_price", 
        "buy_unit", "status")), `2011-01-03` = structure(list(
            buy_date = structure(14977, class = "Date"), offer_price = 42.2, 
            buy_unit = 3.03803621339166, status = "hold"), .Names = c("buy_date", 
        "offer_price", "buy_unit", "status")), `2011-02-01` = structure(list(
            buy_date = structure(15006, class = "Date"), offer_price = 42.59, 
            buy_unit = 3.01021667539629, status = "hold"), .Names = c("buy_date", 
        "offer_price", "buy_unit", "status")), `2011-03-01` = structure(list(
            buy_date = structure(15034, class = "Date"), offer_price = 43.37, 
            buy_unit = 2.95607858439309, status = "hold"), .Names = c("buy_date", 
        "offer_price", "buy_unit", "status")), `2011-04-01` = structure(list(
            buy_date = structure(15065, class = "Date"), offer_price = 43.35, 
            buy_unit = 2.95744240380919, status = "hold"), .Names = c("buy_date", 
        "offer_price", "buy_unit", "status")), `2011-05-03` = structure(list(
            buy_date = structure(15097, class = "Date"), offer_price = 44.53, 
            buy_unit = 2.87907316876551, status = "hold"), .Names = c("buy_date", 
        "offer_price", "buy_unit", "status"))), .Names = c("2010-12-01", 
    "2011-01-03", "2011-02-01", "2011-03-01", "2011-04-01", "2011-05-03"
    ))), .Names = c("buy_target_price", "sell_target_price", 
"units_holding", "tx_record")), bwg_u = structure(list(buy_target_price = numeric(0), 
    sell_target_price = numeric(0), units_holding = 0, tx_record = structure(list(
        `2010-11-02` = structure(list(buy_date = structure(14915, class = "Date"), 
            offer_price = 63.15, buy_unit = 2.03016830095215, 
            status = "hold"), .Names = c("buy_date", "offer_price", 
        "buy_unit", "status")), `2010-12-01` = structure(list(
            buy_date = structure(14944, class = "Date"), offer_price = 64.19, 
            buy_unit = 1.99727571592348, status = "hold"), .Names = c("buy_date", 
        "offer_price", "buy_unit", "status")), `2011-09-01` = structure(list(
            buy_date = structure(15218, class = "Date"), offer_price = 69.29, 
            buy_unit = 1.85026884406304, status = "hold"), .Names = c("buy_date", 
        "offer_price", "buy_unit", "status")), `2011-10-03` = structure(list(
            buy_date = structure(15250, class = "Date"), offer_price = 58.05, 
            buy_unit = 2.20852934031229, status = "hold"), .Names = c("buy_date", 
        "offer_price", "buy_unit", "status"))), .Names = c("2010-11-02", 
    "2010-12-01", "2011-09-01", "2011-10-03"))), .Names = c("buy_target_price", 
"sell_target_price", "units_holding", "tx_record"))), .Names = c("bga_u", 
"bwg_u")) 
```

这是一个由 3 个级别组成的“列表中的列表”对象：

*   级别 1：所有基金的名称（这里有 2 个基金：`bga`_u 和`bwg_u`）
*   级别 2：目标买入价；目标售价；和持有单位
*   第 3 级：特定交易的详细信息（例如购买的单位）

如果该特定交易的状态仍为“持有”，则存储在级别 2 中的“持有单位”是通过将级别 3 中每笔交易的“买入单位”相加来计算的。

如何计算每个基金的“单位持有量”并放入第 2 级？

（我使用 R 2-3 年，但我对这个`list`对象很陌生，我可能在概念上是错误的`list`。）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-27T10:23:23.277

这是一种方法（假设对象是 names `dat`）：

```
lapply(dat, function(x) 
  "[[<-"(x, "units_holding", 
         sum(sapply(x[["tx_record"]], function(y) 
           ifelse(y[["status"]] == "hold", y[["buy_unit"]], 0))))) 
```

在此命令中，`lapply`和`sapply`分别用于迭代列表的第一级和第二级。

笔记。这将创建一个新对象，您可能希望将其分配给新变量（或覆盖旧变量）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-27T10:47:55.850

假设整个列表被命名为`dl`，将函数应用于列表的每个第一级（基金）。首先，制作交易记录的数据框，然后对单位求和并放入`units_holding`。

```
for(i in 1:length(dl)){
  df<-do.call(rbind,lapply(dl[[i]]$tx_record,data.frame))
  dl[[i]]$units_holding<-sum(df$buy_unit[df$status=="hold"])
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-27T10:31:21.350

这是一个版本，它试图使在获取购买价格时执行的操作尽可能不透明。`status`如果不是，我们将返回 0 `hold`，因此将其相加不会影响最终总数。

通常，如果您在 R 中遍历列表并统一处理每个组件，则可以使用`lapply`or`sapply`函数。但是，如果您有特别大量的事务，这可能会很慢。

```
## assume your data is available in a variable 'dat'
get_buy_price <- function(x) {
  if( x[["status"]] == "hold" ) {
    return( x[["buy_unit"]] )
  } else {
    return( 0 )
  }
}

buy_prices <- sapply( dat, function( fund ) {
  sapply( fund["tx_record"], function( date ) {
    sapply( date, get_buy_price )
  })
})

totals <- lapply( buy_prices, sum )

for( fund_ind in seq_along(dat) ) {
  dat[[fund_ind]]$units_holding <- totals[[fund_ind]]
} 
```

# java - 使用 XSL 和 Java 将 int 值转换为颜色对象

> ID：14052614
> 
> 赞同：0
> 
> 时间：2012-12-27T09:49:50.377
> 
> 标签：java, xslt

我是 XSL 的新手，我有一个带有表示 int rgb 颜色的标签的 xml 文件，我想使用 XSL 将它们转换为 Color 对象标签：

我的 xml 包含这些标签

```
<?xml version="1.0" encoding="UTF-8"?>
.
.
.
<ForeGroundColour>-16776961</ForeGroundColour>
.
.
.
</xml> 
```

所需的 xml 是：

```
<ForeGroundColour>
  <red>102</red>
  <blue>102</blue>
  <green>255</green>
  <alpha>255</alpha>
</ForeGroundColour> 
```

我的 XSL 文件是：

```
<xsl:stylesheet version="1.0"
    xmlns:xsl="http://www.w3.org/1999/XSL/Transform" xmlns:Color="java.awt.Color"
    xmlns:Integer="java.lang.Integer" exclude-result-prefixes="Color Integer ">
    <xsl:output method="xml" version="1.0" encoding="UTF-8" indent="yes" />

<!-- identity template !-->
    <xsl:template match="node()|@*">
        <xsl:copy>
            <xsl:apply-templates select="node()|@*" />
        </xsl:copy>
    </xsl:template>

    <xsl:template match="//*[contains(name(),'ForegroundColour')]">
        <xsl:copy>
            <xsl:variable name="rgb" select="." />
            <xsl:variable name="color" select="Color:new(Integer:parseInt($rgb))" />
            <xsl:element name="red">
                <xsl:value-of select="Color:getRed($color)" />
            </xsl:element>
            <xsl:element name="blue">
                <xsl:value-of select="Color:getBlue($color)" />
            </xsl:element>
            <xsl:element name="green">
                <xsl:value-of select="Color:getGreen($color)" />
            </xsl:element>
            <xsl:element name="alpha">
                <xsl:value-of select="Color:getAlpha($color)" />
            </xsl:element>
        </xsl:copy>
    </xsl:template>
</xsl:stylesheet> 
```

我有两个问题：

1-当我运行此代码时，出现以下异常：

```
Exception in thread "main" java.lang.VerifyError: (class: transformer, method: template$dot$1 signature: (Lcom/sun/org/apache/xalan/internal/xsltc/DOM;Lcom/sun/org/apache/xml/internal/dtm/DTMAxisIterator;Lcom/sun/org/apache/xml/internal/serializer/SerializationHandler;I)V) Expecting to find double on stack
    at java.lang.Class.getDeclaredConstructors0(Native Method)
    at java.lang.Class.privateGetDeclaredConstructors(Class.java:2389)
    at java.lang.Class.getConstructor0(Class.java:2699)
    at java.lang.Class.newInstance0(Class.java:326)
    at java.lang.Class.newInstance(Class.java:308)
    at com.sun.org.apache.xalan.internal.xsltc.trax.TemplatesImpl.getTransletInstance(TemplatesImpl.java:364)
    at com.sun.org.apache.xalan.internal.xsltc.trax.TemplatesImpl.newTransformer(TemplatesImpl.java:394)
    at com.sun.org.apache.xalan.internal.xsltc.trax.TransformerFactoryImpl.newTransformer(TransformerFactoryImpl.java:649)
    at com.nyfix.ostp.server.workspacemigrator.XMLTransformer.transform(XMLTransformer.java:44)
    at com.nyfix.ostp.server.workspacemigrator.XSLMigrator.migrate(XSLMigrator.java:45)
    at com.nyfix.ostp.server.workspacemigrator.WorkspaceMigratorFactory.<init>(WorkspaceMigratorFactory.java:19)
    at com.nyfix.ostp.server.workspacemigrator.WorkspaceMigratorFactory.main(WorkspaceMigratorFactory.java:45) 
```

2-当我使用模板只是为了测试插入的节点时，

```
<xsl:template match="//*[contains(name(),'ForegroundColour')]">
    <xsl:copy>
        <xsl:variable name="rgb" select="." />
        <xsl:element name="red">
            <xsl:value-of select="$rgb" />
        </xsl:element>
        <xsl:element name="blue">
            <xsl:value-of select="$rgb" />
        </xsl:element>
        <xsl:element name="green">
            <xsl:value-of select="$rgb" />
        </xsl:element>
        <xsl:element name="alpha">
            <xsl:value-of select="$rgb" />
        </xsl:element>
    </xsl:copy>
</xsl:template> 
```

xml 在没有缩进的情况下进行转换：

```
 <ForegroundColour>
<red>-16776961</red>
<blue>-16776961</blue>
<green>-16776961</green>
<alpha>-16776961</alpha>
</ForegroundColour> 
```

谁能帮我这个？提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-27T16:52:23.787

回答这个问题有点晚了，但它适用于任何可能有同样问题的人，

对于缩进问题，我必须使用自定义 xsl 模板来确保输出 xml 以我想要的方式缩进。

该模板包含许多脏代码，这些代码强制 xml 标记具有模拟缩进的特殊间距

希望这有帮助:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T18:10:12.693

XSLT 变量只能包含字符串、布尔值、数字或节点集——`Color:new(...)`调用返回一个 Java 对象，该对象不能分配给 XSLT 变量，因此出现异常。

可能的解决方案：

`stringToRed`1）使用定义的方法等创建您自己的扩展类，`stringToBlue`以便它们接受字符串，在内部将其转换为`Color`对象，然后将所需的组件（红色，蓝色等）提取为数字或字符串。然后可以直接使用这些函数：

```
<xsl:element name="red">
  <xsl:value-of select="MyColorFunctions:stringToRed(.)" />
</xsl:element> 
```

2) “逆向工程” 将表示为整数的颜色转换为其组件的算法，并直接在 XSLT 中实现，无需使用扩展函数。通常，红色分量是 8 个最低有效位，蓝色是接下来的 8 个位，依此类推（反之亦然），并且您必须处理负值（从 2 补码转换为绝对值） - 所以像这样：

```
 <xsl:variable name="color">
    <xsl:choose>
      <xsl:when test="number(.) &gt;=0">
        <xsl:value-of select="number(.)"/>
      </xsl:when>
      <xsl:otherwise>
        <xsl:value-of select="4278190080+number(.)"/>
      </xsl:otherwise>
    </xsl:choose>
  </xsl:variable>
  <red>
    <xsl:value-of select="floor($color mod 256)" />
  </red>
  <green>
    <xsl:value-of select="floor(($color div 256) mod 256)" />
  </green>
  <blue>
    <xsl:value-of select="floor(($color div 65536) mod 256)" />
  </blue>
  <alpha>
    <xsl:value-of select="floor(($color div 16777216) mod 256)" />
  </alpha> 
```

这种方法的问题在于 XSLT 使用浮点运算，因此在某些情况下舍入错误可能会导致组件的错误值。

# c# - 在浏览器中从命名管道打开文件 - 可能与否？不保存在磁盘上

> ID：14052615
> 
> 赞同：3
> 
> 时间：2012-12-27T09:49:54.167
> 
> 标签：c#, internet-explorer, named-pipes, nt

我在 C# 上创建了命名管道。

***服务器***

```
using (NamedPipeServerStream pipeServer = new NamedPipeServerStream("testpipe", PipeDirection.Out))
        {
            Console.WriteLine("NamedPipeServerStream object created.");
            Console.Write("Waiting for client connection...");
            pipeServer.WaitForConnection();
            Console.WriteLine("Client connected.");
            try
            {
                using (BinaryWriter sw = new BinaryWriter(pipeServer))
                {
                    sw.AutoFlush = true;
                    Console.Write("Enter text: ");
                    byte[] bytes = File.ReadAllBytes(@"C:\\Temp\test.png");
                    sw.Write(bytes);
                }
            }
            catch (IOException e)
            {
                Console.WriteLine("ERROR: {0}", e.Message);
            }
        } 
```

***客户***

```
using (NamedPipeClientStream pipeClient = new NamedPipeClientStream(".", "testpipe", PipeDirection.In))
        {
        Console.Write("Attempting to connect to pipe...");
        pipeClient.Connect();
        Console.WriteLine("Connected to pipe.");
        Console.WriteLine("There are currently {0} pipe server instances open.", pipeClient.NumberOfServerInstances);
        using (BinaryReader sr = new BinaryReader(pipeClient))
        {
            byte[] list;
            list = sr.ReadBytes(214);
        }
    }
    Console.Write("Press Enter to continue...");
    Console.ReadLine();
} 
```

在这个管道中存在一个文件。如何在浏览器（IE）中打开它而不保存在磁盘上？我知道我的文件是NT对象，但是怎么打开呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-27T13:50:09.220

如果您的图片足够小（~32K base64 编码）可以作为参数传递（！）并且您可以使用 IE8 或更高版本（或其他浏览器），您可以尝试以下操作：

```
string base64String = Convert.ToBase64String(bytes);

SHDocVw.InternetExplorer IE = new SHDocVw.InternetExplorer();
object Empty = 0;
object URL = "about:blank";
IE.Visible = true;
IE.Navigate2(ref URL, ref Empty, ref Empty, ref Empty, ref Empty);
IHTMLDocument2 hTMLDocument = (mshtml.IHTMLDocument2)IE.Document;
HTMLWindow2 iHtmlWindow2 = (HTMLWindow2) hTMLDocument.Script ;
iHtmlWindow2.execScript("document.write(\"<img src=\\\"data:image/png;base64," + base64String + "\\\">\")", "javascript"); 
```

如果我想到其他事情，我会告诉你:)

# nginx - 在 Ec2 实例上的 Ubuntu 12.04 LTS 上使用 Nginx 的非 www 到 www 域

> ID：14052622
> 
> 赞同：0
> 
> 时间：2012-12-27T09:50:22.957
> 
> 标签：nginx, amazon-ec2, ubuntu-12.04, no-www

在看到这篇文章[http://www.ewanleith.com/blog/900/10-million-hits-a-day-with-wordpress-using-a-15-server](http://www.ewanleith.com/blog/900/10-million-hits-a-day-with-wordpress-using-a-15-server)后，我将服务器从 apache2 更改为 nginx。我不是计算机极客，精明。我按照步骤操作。在那之后，这个网站就完美了，除了一件事：非 www 到 www 的事情。我在网上搜索了如何做到这一点。我尝试了他们说的 modrewrite 东西，但变得更糟了。现在，它被定向到 www，因为我使用 wordpress 并将其设置在常规设置[http://www.pageantly.com](http://www.pageantly.com)中。然而，我有静态目录，它是普通的非 www。请查看我在 /etc/nginx/conf.d/ 中的 default.conf 以及上面链接的教程：

```
server {
server_name pageantly.com www.pageantly.com;
root /var/www/;
listen 8080;
## This should be in your http block and if it is, it's not needed here.
index index.html index.htm index.php;

include conf.d/drop;

 location / {
            # This is cool because no php is touched for static content
try_files $uri $uri/ /index.php?q=$uri&$args;
    }

        location ~ \.php$ {
        fastcgi_buffers 8 256k;
        fastcgi_buffer_size 128k;
        fastcgi_intercept_errors on;
        include fastcgi_params;
        fastcgi_param SCRIPT_FILENAME $document_root$fastcgi_script_name;
        fastcgi_pass unix:/dev/shm/php-fpm-www.sock;
    }

# BEGIN W3TC Page Cache cache
location ~ /wp-content/w3tc/pgcache.*html$ {
add_header Vary "Accept-Encoding, Cookie";
   } 
[...]
}
# END W3TC Page Cache core 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T14:06:32.540

理想情况下，每个域（包括子域）应该有一个单独的`server`块。这样一来，您的配置将如下所示：

```
# Following block redirects all traffic coming to pageantly.com to www.pageantly.com
server {
  server_name pageantly.com;
  listen 8080;

  # Send a 301 permanent redirect to any request which comes on this domain
  return 301 http://www.pageantly.com$request_uri;
}

# Following block handles requests for www.pageantly.com
server {
  server_name www.pageantly.com;
  listen 8080;
  root /var/www;
  [...] # all your default configuration for the website
} 
```

实现此目的的另一种不干净且低效的方法是引入一个`if`语句，该语句读取域值并相应地分支流以重定向流量（在 pageantly.com 的情况下）或处理请求（在 www.pageantly.com 的情况下），但我建议你避免走那条路。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-28T10:47:27.713

如果您在 AWS 上使用 Route 53；那么你不必做任何这样的事情。在 Route53 本身上，我们可以创建一个别名并进行配置，以便将非 www 重定向到 www。

# maven - Maven：禁用测试阶段但不是集成测试阶段

> ID：14052623
> 
> 赞同：2
> 
> 时间：2012-12-27T09:50:25.850
> 
> 标签：maven, maven-surefire-plugin, maven-failsafe-plugin

我正在使用一个 Maven 项目，并试图只运行集成测试，同时跳过单元测试。

我正在使用故障安全插件运行集成测试，并且插件执行绑定到集成测试阶段。

有什么方法可以只运行集成测试，而跳过单元测试（通过surefire运行）。

我的谷歌搜索导致了一个页面，该页面向我展示了如何做[相反](http://maven.apache.org/surefire/maven-failsafe-plugin/examples/skipping-test.html)的事情。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T17:44:49.303

如果您想[跳过测试](http://maven.apache.org/surefire/maven-surefire-plugin/test-mojo.html#skip)，您有两种选择：

```
mvn -Dskip=true ... 
```

它不会编译测试也不会执行它们（逻辑;-)）。另一种选择只是[跳过测试的执行](http://maven.apache.org/surefire/maven-surefire-plugin/test-mojo.html#skipTests)，但不跳过测试的编译

```
mvn -DskipTests=true ... 
```

但是你不能跳过[Maven 中的测试生命周期阶段](http://maven.apache.org/guides/introduction/introduction-to-the-lifecycle.html)。

# algorithm - 没有动态规划的算法，求解效率低

> ID：14052625
> 
> 赞同：4
> 
> 时间：2012-12-27T09:50:49.460
> 
> 标签：algorithm, complexity-theory, dynamic-programming

比赛中问了一个问题。我已经用动态编程及其复杂性解决了这个问题`O(n^2)`。但我正在寻找效率较低的解决方案。这种效率较低的方法的复杂性是什么。感谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-27T17:29:25.263

有一种通用方法可以降低任何动态编程解决方案的效率。动态规划的本质是存储子问题的解决方案以供重用。

为了以某种合理的方式降低效率，请摆脱子问题结果存储。相反，在需要时重新计算每个子问题的解决方案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-27T16:16:58.200

使用具有相同算法的低效数据结构有助于实现`O(n^3)`. 将城镇存储在链表而不是数组中会使算法效率降低一级。

为了使其效率更低，更改算法更容易。例如检查所有预兆变化的组合并使用最小的，它是时间指数的。

# c++ - 为什么我们需要绑定 std::cin 和 std::cout？

> ID：14052627
> 
> 赞同：22
> 
> 时间：2012-12-27T09:50:56.483
> 
> 标签：c++, c++-standard-library

默认情况下，标准输入设备与标准输出设备以下列形式绑定在一起： `std::cin.tie (&std::cout);`保证在调用输入之前输出缓冲区已被刷新。所以我尝试使用 解开它们`std::cin.tie(0)`，但结果似乎与已绑定的没有区别。

```
#include<iostream>
using namespace std;

int main(int argc, char *argv[])
{
    char c;

    cin.tie(0)

    cout << "Please enter c:";
    cin >> c;
    cout << c ;

    return 0;
} 
```

我测试错了吗？为什么我们需要将它们捆绑在一起？它们共享相同的缓冲区吗？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-12-27T10:01:31.143

您的示例没有任何问题（除了您应该在该行之后添加一个分号`cin.tie(0)`），也没有 iostream 对象的工作方式。

`tie()`只是保证执行输入`cout`之前的刷新。`cin`这对于用户在被要求回答之前查看问题很有用。

但是，如果您取消from ，`tie()`则无法保证刷新的缓冲区。但是不能保证缓冲区也不会被刷新。事实上，如果计算机有足够的资源，它会*立即*刷新缓冲区，所以这发生在请求输入之前。在您的示例中就是这种情况。`cin``cout``cout``cout`*`cin`*

 *所以，一切正常。除了 之后`cin.tie(0)`，不能保证会发生刷新。但是，在 99% 的情况下，仍会发生冲洗（但不再保证）。

理论上，如果捆绑，`cin`可以`cout`共享同一个缓冲区。但是，我认为没有任何实现可以做到这一点。一个原因是这两者可能是 un-tie()d。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2017-02-24T19:01:43.003

我认为，以前的答案是错误的（我想知道为什么它如此受欢迎并被标记为真实，显然不是）。

要打破之前发生的关系，您应该（仅在标准 io 的情况下）（1）删除与 stdio 的同步**和**（2）解开流。

像这样：

```
std::cin.tie (nullptr);
std::cout.sync_with_stdio(false);
std::cout << "Please enter c: ";
std::cin >> c; 
```

然后，您可以**保证**有未绑定的流。与 stdio 同步是一种特殊能力，以便在 C 样式和 C++ 样式输入和输出的排序之后发生正确的事件，我强烈建议您不要在没有真正必要的情况下删除它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-06-30T18:09:51.563

在 C 中，提示用户输入遵循您发出命令以打印提示消息，然后发出命令以输入值的模式。

为了使此过程正常工作，您需要确保实际显示提示消息。配置环境以便这是自动的：

*   在 DOS（或 windows 命令行）环境中，`STDOUT`是无缓冲的，因此 print 命令会立即显示该消息。
*   在 *NIX 环境中，`STDOUT`是行缓冲的。因此，如果您遵循 *NIX 样式，在提示消息中包含换行符，以便用户在下一行输入输入，那么您的提示将在输入之前自动显示。

tie 特性使这种自动刷新行为成为 iostream 库工作方式的一部分，而不是约定俗成的产物。（尽管请注意，自动刷新仅在程序要求系统获取更多输入时发生，因此存在`cin >> c`实际上不会刷新的极端情况）

* * *

然而！默认情况下，iostream 库与 stdio 库*同步。*实际上，这意味着 iostream 根本不做任何缓冲。它只是将数据转发到底层 C 库。

因此，这意味着您将看到如果您编写类似的 C 程序时通常会看到的内容。如果您在 Windows 命令行环境中，则不会缓冲输出，因此您会在输入输入之前看到提示。

`std::cout.sync_with_stdio(false);`要查看本机 C++ 行为，您需要通过在程序开始时运行来关闭同步，如[另一个答案](https://stackoverflow.com/a/42446361/1084944)中所示。

如果你这样做，那么`cout`语句将不会刷新输出缓冲区（除非缓冲区非​​常小）。并且由于您已经移除了领带，因此该`cin`声明也不会刷新它。因此，您将获得必须在看到提示之前输入用户输入的结果。*

# ios - iPad 持久第二个顶栏

> ID：14052630
> 
> 赞同：2
> 
> 时间：2012-12-27T09:51:03.917
> 
> 标签：ios, ipad

我正在设计一个合作的 iPad 应用程序。我的应用程序有 5 个迷你应用程序，每个应用程序在功能上完全独立，但都是为公司服务的。

我计划在顶部有一个全宽的顶部栏，在顶部显示当前的迷你应用程序名称，最左侧有一个主页按钮。这将在每个迷你应用程序中持续存在。然后在下面有自定义应用程序。

每个小应用程序都使用导航栏、标签栏和工具栏。所以上面的想法是我对返回主屏幕的最佳猜测。

有人会反对这个吗？

而且，我怎样才能制作一个持久的顶栏？我可以想出这部分，但以防万一有人知道最好的方法，我想问一下。我正在考虑将导航控制器的框架更改为从 y=20pt 开始。

在[人机界面指南：品牌适当地](http://developer.apple.com/library/ios/#documentation/UserExperience/Conceptual/MobileHIG/UEBestPractices/UEBestPractices.html#//apple_ref/doc/uid/TP40006556-CH20-SW29)它提到有第二个持久的顶部栏，但我不知道其他方式。

# hibernate - 休眠：插入问题 - 找不到父键

> ID：14052631
> 
> 赞同：2
> 
> 时间：2012-12-27T09:51:18.073
> 
> 标签：hibernate

我在将实体插入数据库时​​遇到问题。我正在使用休眠 JPA。这是我的数据库结构：

```
Table : User {CGU_USER_ID as PK}
Table : Industries {CGI_INDUSTRY_ID (PK),CGI_INDUSTRY_NAME}
Table : USER_INDUSTRY_MAP {CUIM_USER_ID (FK),CUIM_INDUSTRY_ID (FK)} 
```

这是我的映射：

```
@JoinTable(name = "USER_INDUSTRY_MAP", joinColumns = @JoinColumn(name = "CUIM_USER_ID", referencedColumnName = "CGU_USER_ID"), inverseJoinColumns = @JoinColumn(name = "CUIM_INDUSTRY_ID"))
@OneToMany(cascade = { CascadeType.MERGE, CascadeType.REMOVE }, fetch = FetchType.EAGER)
private List<Industry> industrySet; 
```

我得到的异常说：

```
org.springframework.dao.DataIntegrityViolationException: could not insert collection: [com.keff.gg.domain.User.industrySet#1242]; SQL [insert into CG_USER_INDUSTRY_MAP (CUIM_USER_ID, CUIM_INDUSTRY_ID) values (?, ?)]; constraint [CUSTOMERGATEWAY.FK_CUIM_USER_ID]; nested exception is org.hibernate.exception.ConstraintViolationException: could not insert collection: [com.keff.gg.domain.User.industrySet#1242]

Caused by: java.sql.SQLException: ORA-02291: integrity constraint (CUSTOMERPROJECT.FK_CUIM_USER_ID) violated - parent key not found 
```

这是我的插入代码：

```
User user = new User();
query = session.createQuery("from Industry industry where industry.industryName=:industryName");
        query.setParameter("industryName", "validIndstry");
        results = (List<?>) query.list();
        if(results != null && results.size()>0){
            industryList = (List<Industry>)results;
        }
user.setIndustrySet(industryList); // If this is set to null then insert into User table is successfull
Long id = (Long) hibernateTemplate.save(user); 
```

有人可以看看我的映射并告诉我我做错了什么。请帮帮我。我对休眠非常陌生。如果需要更多信息来跟踪问题，请告诉我。

更新 - - - - - - - - - - - - - - - - - - - - - - - - - ------------------------------------------------ 我已经尝试过建立多对多和双向的关系

```
//User Class
@JoinTable(name = "CG_USER_INDUSTRY_MAP", joinColumns = @JoinColumn(name = "CUIM_USER_ID", referencedColumnName = "CGU_USER_ID"), inverseJoinColumns = @JoinColumn(name = "CUIM_INDUSTRY_ID"))
@ManyToMany(cascade = { CascadeType.MERGE, CascadeType.REMOVE }, fetch = FetchType.EAGER)
private List<Industry> industrySet;

//Industry Class
@ManyToMany(fetch = FetchType.LAZY, mappedBy = "industrySet")
private List<User> userSet; 
```

但仍然遇到同样的问题。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-03T09:21:13.627

我发现了我面临的问题的根本原因。

用户表上有一个触发器，它在每次插入后更新用户序列。我想这是导致问题的原因。我可以看到，禁用触发器后，我可以正确保存用户实体而没有任何问题。

谢谢大家的时间。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T17:01:05.913

因为您使用的是持久化操作，请确保您的映射上有级联选项。您可以将 CascadeType.PERSIST 添加到您的持久选项中以使其正常工作。

```
@OneToMany(cascade = {  CascadeType.MERGE, CascadeType.REMOVE ,CascadeType.PERSIST })
@JoinTable(name = "USER_INDUSTRY_MAP", joinColumns = { @JoinColumn(name = "CUIM_USER_ID") }, inverseJoinColumns = { @JoinColumn(name = "CUIM_INDUSTRY_ID") })
private List<Industry> industries = new ArrayList<Industry>(); 
```

您甚至可以使用 CascadeType.ALL 来指定所有操作都应该级联以实现关联。

# c++ - “int* const* num”是什么意思？

> ID：14052633
> 
> 赞同：3
> 
> 时间：2012-12-27T09:51:32.410
> 
> 标签：c++, pointers, constants

> **可能重复：**
> [const int*、const int * const、int const * 有什么区别](https://stackoverflow.com/questions/1143262/what-is-the-difference-between-const-int-const-int-const-int-const)

当我碰到这行代码时，我正在阅读 FLTK 代码：

```
Fl_Widget*const* a = array(); 
```

这是实际的代码：

```
Fl_Widget*const* Fl_Group::array() const {
    return children_ <= 1 ? (Fl_Widget**)(&array_) : array_;
}

int Fl_Group::find(const Fl_Widget* o) const {
    Fl_Widget*const* a = array();
    int i; for (i=0; i < children_; i++) if (*a++ == o) break;
    return i;
} 
```

现在我想知道指针变量的类型是什么`a`。是`Fl_Widget*const* a = array();`和`Fl_Widget** const a = array();`平等的吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-27T10:13:33.843

您从右到左阅读它：

```
Fl_Widget      *            const            *              a
          "pointer to" <- "constant" <- "pointer to"  <- "a is" 
```

总结为“`a`是一个指向”的常量指针`Fl_Widget`。

风格上的声明`VAR a: POINTER TO CONST POINTER TO Fl_Widget`会更清晰一些，但是 C++ 将他的变量声明语法从 C 中拖了出来，而 C 是关于表达式的，而不是数据类型。哎呀，它甚至没有`const`字，所以你不必考虑它，并且`int *a, b`显然被破译为“`*a`是`int`，并且`b`是`int`”。

# git - 在我的本地存储库和我的 bitbucket 存储库中删除一个文件夹

> ID：14052635
> 
> 赞同：1
> 
> 时间：2012-12-27T09:51:35.967
> 
> 标签：git, bitbucket

我正在使用 bibucket git，一切运行良好。我在 bitbucket 上有一个名为 php 的主 repo。我克隆了 repo 并在本地 repo 中，我创建了一个名为 oop 的文件夹，在其中我创建了两个文件夹命名空间，重载。

结构如下所示：

```
 php --- parent folder

   oop --- child folder

-namespaces ---- namespaces.php --- files inside the child folder oop
-overloading --- overloading.php --- files inside the child folder oop 
```

我将我所拥有的一切都添加到了我的本地仓库中

```
git add . 
```

并做出了我最初的承诺

```
git commit -m "my initial commit" 
```

我把这个推到了比特桶里

```
git push -u origin master 
```

但是，昨天，我需要将我的 oop 文件夹重命名为 oopnotes。我确实重命名成功并开始照常提交。但是在我的 bitbucket 存储库中，而不是看到唯一的 oopnotes 文件夹，我还看到了旧的 oop 文件夹。未改名。

这是否意味着我的本地存储库中仍然有旧的 oop 文件夹，我如何才能在本地存储库和 bitbucket 存储库中摆脱它？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-27T10:08:31.327

用于`git rm`删除旧文件夹

# android - 更改 ArrayAdapter 的值

> ID：14052641
> 
> 赞同：1
> 
> 时间：2012-12-27T09:52:09.913
> 
> 标签：android, android-arrayadapter

如果选择了第一个元素，我想更新我的 ArrayAdapter 的值：

```
public ArrayAdapter<String> adapter;
String[] categoriesArray;    
...

adapter = new ArrayAdapter<String>(this, android.R.layout.simple_list_item_1, categoriesArray);
list.setAdapter(adapter);

list.setOnItemClickListener(new OnItemClickListener(){
    @Override
    public void onItemClick(AdapterView<?> arg0, View arg1, int arg2, long arg3) {
        if(arg2== Consts.GAME_CATEGORY_POSITION){

            adapter.clear();

            //Add new values to array
            categoriesArray = new String[subCategories.size()];
            for (int i=0; i<subCategories.size(); i++) {
                categoriesArray[i] = subCategories.get(i).getSub_name();                    
            }           
            adapter.notifyDataSetChanged();             
        }           
    }           
}); 
```

但是 clear 方法（适配器）触发了异常

```
12-27 09:37:57.376: E/AndroidRuntime(1423): java.lang.UnsupportedOperationException
12-27 09:37:57.376: E/AndroidRuntime(1423):     at java.util.AbstractList.remove(AbstractList.java:638)
12-27 09:37:57.376: E/AndroidRuntime(1423):     at java.util.AbstractList$SimpleListIterator.remove(AbstractList.java:75)
12-27 09:37:57.376: E/AndroidRuntime(1423):     at java.util.AbstractList.removeRange(AbstractList.java:658)
12-27 09:37:57.376: E/AndroidRuntime(1423):     at java.util.AbstractList.clear(AbstractList.java:466)
12-27 09:37:57.376: E/AndroidRuntime(1423):     at android.widget.ArrayAdapter.clear(ArrayAdapter.java:258) 
```

任何的想法 ？

感谢您的阅读。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-27T09:57:07.013

将您自己的列表而不是数组传递给适配器。适配器使用方法将数组转换为列表`Arrays.asList`，该方法返回的列表不支持删除。您可以从数组创建实例`ArrayList`并将其传递给适配器：

```
List<String> values = new ArrayList<String>(Arrays.asList(categoriesArray));
adapter = new ArrayAdapter<String>(this, android.R.layout.simple_list_item_1, values); 
```

但最好检查@PrafulBhatnagar 提到的非常相似的问题：[Unable to modify ArrayAdapter in ListView: UnsupportedOperationException](https://stackoverflow.com/questions/3200551/unable-to-modify-arrayadapter-in-listview)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-07-24T10:47:15.393

如果您只想更改数据集，则无需重新初始化适配器。试试下面的代码 -

```
adapter.clear();
adapter.addAll(categoriesArray); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-27T10:01:34.280

看看这个帖子的答案

[无法在 ListView 中修改 ArrayAdapter：UnsupportedOperationException](https://stackoverflow.com/questions/3200551/unable-to-modify-arrayadapter-in-listview)

根据这篇文章，您应该使用`ArrayList`代替字符串数组...

# image-processing - 3D人脸重建算法

> ID：14052645
> 
> 赞同：8
> 
> 时间：2012-12-27T09:52:31.007
> 
> 标签：image-processing, opencv, 3d, computer-vision, 3d-reconstruction

项目：3D人脸重建

输入：2D正面人脸图像输出：3D人脸重建与表情模拟平台：Matlab或Opencv cpp。

经过研究，我发现 3D Morphable Models (3DMM) 算法是我项目的一个很好的起点。但我没有巴塞尔人脸模型（3D 人脸数据库）来实现该算法。但是，我已经从[http://gavab.escet.urjc.es/recursos_en.html](http://gavab.escet.urjc.es/recursos_en.html)下载了 GavabDB 。我可以使用 GavabDB 开发 3DMM 来从正面图像进行 3D 人脸重建吗？阅读数据集描述文档后，我观察到 Gavab 不提供 3D 扫描的纹理数据；纹理数据是强制性的吗？

输出质量是否取决于用于建模的 3D 数据库？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-26T14:58:58.230

原始[可变形模型](http://gravis.cs.unibas.ch/Sigg99.html)以及来自同一位主要研究人员的巴塞尔人脸模型确实包含纹理和几何形状。

完全可以从没有纹理的 3D 几何数据计算可变形模型的几何部分。这为您提供了一个模型，该模型可以捕获形状中统计上最显着的变化。

然而，将纯几何模型与 2D 人脸图像匹配比将模型与纹理匹配更困难。它本质上要求你...

1.  识别（或注释）您的 2D 人脸图像中某些地标点的位置
2.  *优化 3D 姿势和形状参数，使 3D Morphable 模型中的相应地标在使用未知相机投影后*靠近您的注释地标。

这是一个有趣的问题，但不是一个微不足道的问题。对于第 2 步，我建议从假设正交投影开始。

关于您的输出质量问题：如果您的数据库中有足够多的 3D 模型，则单个扫描不必具有特别高的质量。噪声不会出现在您实际使用的模型的主要组件中。然而，扫描中的漏洞是一个问题。

最后但并非最不重要的一点，让我无耻地指给你看我几年前写的[一篇论文。](http://iphome.hhi.de/eisert/papers/iccv09a.pdf)它不能解决您的问题，但它包含有关将 3D 可变形模型（仅几何）拟合到从照片中提取的 2D 面部轮廓的部分。

# java - 如何在jsp中从服务器的特定文件夹打开文件到浏览器

> ID：14052648
> 
> 赞同：0
> 
> 时间：2012-12-27T09:52:47.307
> 
> 标签：java, jsp

我正在做一个网络应用程序，我可以在其中从服务器上传和下载 pdf 文件。

在此我创建了一个 pdf 文件并将其路径存储在数据库中。

我想要的是当我按某些标准（如文件名）搜索时，我应该从 db.xml 获取文件列表。当我单击打开链接时，它应该在 jsp 中打开。

下载部分由我完成。我需要的只是在jsp中打开一个pdf。

是否可以从jsp打开服务器文件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T09:57:06.700

将这些文件放在`WEB-INF`文件夹之外并访问。WEB-INF 文件夹在 Java EE 环境中是安全的。通过将文件放在`WebContent`文件夹内和 WEB-INF 文件夹外，将帮助您访问这些文件以进行下载。您需要提及该文件的完整路径。例如，对于图像，您的路径将是`https://localhost:9444/AppName/resources/theme/images/logo.png`

# excel - 我们可以在没有循环的情况下将这种 20:72:84(hh:mm:ss) 持续时间转换为 21:13:24 (hh:mm:ss) 格式吗？

> ID：14052652
> 
> 赞同：0
> 
> 时间：2012-12-27T09:53:16.427
> 
> 标签：excel, vbscript, wsh, vba

在 VBScript 中是否可以将这种 20:72:84(hh:mm:ss) 持续时间转换为 21:13:24 (hh:mm:ss) 格式？

是的，显然我们可以循环通过它，但我想避免这种`Loopy`技术。

**代码**

根据`Siddharth`解决方案 - 我只是修改了代码以适应`VBScript platform`

```
Option Explicit

    Dim S
    S=Convert("23:61:61")
    MsgBox(s)

Function Convert(strTime) 'As String
    Dim timeArray() 
    Dim h , m , s 

    MsgBox("Hi")

    'On Error Resume Next

    timeArray = Split(strTime, ":")

    h = timeArray(0): m = timeArray(1): s = timeArray(2)

    REM If err then

        REM MsgBox(err)
        REM err.clear
        REM Exit Function
    REM End if

    Do Until s < 60
        s = s - 60
        m = m + 1
    Loop

    Do Until m < 60
        m = m - 60
        h = h + 1
    Loop

    Do Until h < 24
        h = h - 24
    Loop

    Convert = Format(h, "00") & ":" & Format(m, "00") & ":" & Format(s, "00")

    'on Error Goto 0
    'Exit Function
'Whoa:
    'Convert = "Error! CYDD!" '<~~ CYDD : Check Your Data Dude :)
End Function 
```

**EDIT1**我收到`Type mismatch`关于该行的错误`timeArray = Split(strTime, ":")`

谢谢，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-27T11:49:09.217

这是你正在尝试的吗？

```
Option Explicit

Sub Sample()
    Debug.Print Convert("23:61:61")
    Debug.Print Convert("24:61:61")
    Debug.Print Convert("20:72:84")
    Debug.Print Convert("Hello World")
End Sub

Function Convert(strTime As String) As String
    Dim timeArray() As String
    Dim h As Long, m As Long, s As Long

    On Error GoTo Whoa

    timeArray = Split(strTime, ":")

    h = timeArray(0): m = timeArray(1): s = timeArray(2)

    Do Until s < 60
        s = s - 60
        m = m + 1
    Loop

    Do Until m < 60
        m = m - 60
        h = h + 1
    Loop

    Do Until h < 24
        h = h - 24
    Loop

    Convert = Format(h, "00") & ":" & Format(m, "00") & ":" & Format(s, "00")

    Exit Function
Whoa:
    Convert = "Error! CYDD!" '<~~ CYDD : Check Your Data Dude :)
End Function 
```

**快照**

![在此处输入图像描述](../Images/a6dd99e4d50525282e09faf9aad15c51.png)

**编辑（跟进）**

我上面给出的代码是用于`VBA-Excel`（*因为它是你的标签之一*）

对于`VB-Script`，使用此代码

```
MsgBox Convert("23:61:61")
MsgBox Convert("24:61:61")
MsgBox Convert("20:72:84")
MsgBox Convert("Hello World")

Function Convert(strTime)
    Dim timeArray
    Dim h, m, s, hh, mm, ss

    On Error Resume Next

    timeArray = Split(strTime, ":", -1, 1)

    h = timeArray(0): m = timeArray(1): s = timeArray(2)

    If Err Then
        Err.Clear
        Exit Function
    End If

    Do Until s < 60
        s = s - 60
        m = m + 1
    Loop

    Do Until m < 60
        m = m - 60
        h = h + 1
    Loop

    ' As per latest request
    'Do Until h < 24
        'h = h - 24
    'Loop

    If Len(Trim(h)) = 1 Then hh = "0" & h Else hh = h
    If Len(Trim(m)) = 1 Then mm = "0" & m Else mm = m
    If Len(Trim(s)) = 1 Then ss = "0" & s Else ss = s

    Convert = hh & ":" & mm & ":" & ss

    On Error GoTo 0
End Function 
```

高温高压

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-28T11:04:05.557

1.  拆分数组
2.  使用将每个部分添加到空白时间`dateadd()`
3.  使用 stringbuilder 将时间重建为格式良好的字符串

    ```
    ' This splits the string in an hours, minutes and seconds part.
    ' the hours will be in dArr(0), minutes in dArr(1) and seconds in dArr(2)
    dArr = split("20:72:84", ":")

    ' Add the hours to an empty date and return it to dt1 
    dt1 = dateadd("h", dArr(0), empty)

    ' Add the minutes to dt1\. Note: Minutes are noted as "n" and not "m" because the
    ' "m" is reserved for months. To find out more about the dateadd() please look here:
    ' http://www.w3schools.com/vbscript/func_dateadd.asp
    ' When the minutes are bigger than they fit in the date, it automatically falls over to
    ' next hour.
    dt1 = dateadd("n", dArr(1), dt1)

    ' Also add the seconds (the third part of the array) to dt1, also the seconds
    ' automatically fall over when too large.
    dt1 = dateadd("s", dArr(2), dt1)

    ' Now that we created a date, we only have to format it properly. I find it the most easy
    ' way to do this is with a dotnet stringbuilder, because we can separate code and 
    ' format. The CreateObject creates the stringbuilder. We chain the AppendFormat
    ' and the ToString methods to it, so actually these are three statements in one.
    ' Mind the HH in the HH:mm:ss format string, hh means 12 hour notation, HH means 24
    ' hour notation.
    msgbox CreateObject("System.Text.StringBuilder").AppendFormat("{0:HH:mm:ss}", dt1).toString() 
    ```

输出`21:13:24`

**编辑：**应 TS 要求的额外评论

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-10-18T21:49:17.673

这似乎很明显是一个“ [XY问题](https://meta.stackexchange.com/a/66378/370758)”：OP正在寻找一种解决方法来处理格式错误的数据，而不是首先弄清楚数据是如何变得格式错误的（并防止它发生）。

`20:72:84`不是*任何*标准的持续时间的逻辑表示，并且创建该字符串的任何内容都是错误的。

*从技术上讲*，根据[ISO-8601](https://wikipedia.org/wiki/ISO_8601)（被认为是“涵盖日期和时间相关数据交换的国际标准”），[持续时间](https://wikipedia.org/wiki/ISO_8601#Durations)应表示为`PnYnMnDTnHnMnS`。

也就是说，我也会选择`HH:MM:SS`......但它应该 [显然？] 永远不会显示超过 59 秒或 59 分钟，任何超过我们的十进制（又名[Base 10](https://wikipedia.org/wiki/Decimal)）数字系统应该计算在内`...0.8, 0.9, 0.10, 0.11...`。（大声笑，*“零点十一”*）

* * *

# 固定持续时间

无论如何，这是一个老问题，我们不知道你是如何得到这个奇怪的数字的，但正如其他人所建议的，我会用[`Split`](https://docs.microsoft.com/office/vba/language/reference/user-interface-help/split-function)它来修复它，尽管我更喜欢压缩形式：

```
Function fixWonkyDuration(t As String) As String
    fixWonkyDuration = Format(((Split(t, ":")(0) * 60 + Split(t, ":")(1)) _
        * 60 + Split(t, ":")(2)) / 86400, "HH:mm:ss")
End Function 
```

上面的函数将通过将每个部分转换为秒、求和，然后[`Date`](https://docs.microsoft.com/office/vba/language/reference/user-interface-help/date-data-type)在使用之前临时转换为 a[`Format`](https://docs.microsoft.com/office/vba/language/reference/user-interface-help/format-function-visual-basic-for-applications)以按预期显示它来修复“不稳定”的持续时间。

需要注意的是，输入*和*输出都不是有效的 Excel [DateTime](https://docs.microsoft.com/office/vba/access/concepts/date-time/calculate-elapsed-time) ( [`Date`](https://docs.microsoft.com/office/vba/language/reference/user-interface-help/date-data-type))，因此两者都声明为[`String`](https://docs.microsoft.com/office/vba/language/reference/user-interface-help/string-data-type)s。

## 示例用法：

```
MsgBox fixWonkyDuration("20:72:84")  'returns "21:13:24" 
```

* * *

# 转换为秒[^(（用于比较、计算等）)]

顺便说一句，当您在格式上有一个*有效*的持续时间`HH:MM:SS`，但想用它进行计算或比较时，最简单的方法是首先在 和 的帮助下将其转换为[`TimeValue`](https://docs.microsoft.com/office/vba/language/reference/user-interface-help/timevalue-function)秒[`CDbl`](https://docs.microsoft.com/office/vba/language/concepts/getting-started/type-conversion-functions)。

**最快的方法：**

```
Function DurationToSeconds(d As String) As Long
    DurationToSeconds = CDbl(TimeValue(d)) * 86400#
End Function 
```

## 示例用法：

```
MsgBox DurationToSeconds("21:13:24")  'returns 76404 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-27T09:59:36.803

好吧，您可以拆分为 3 个变量：h、m 和 s。然后检查是否 s>60。如果是，m=m+s/60 和 s=s%60。对于 m 变量也是如此：

```
if(m>60) then
    h=h+m/60
    m=m%60 
```

然后，连接 h、m 和 s。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-27T10:46:16.803

这是太多的文字，无法发表评论。

当您输入`20:72:33`任何`General`格式的单元格时，它会显示一个序列号。例如`0.883715278`

然后将单元格格式更改为`Time`. 它为您提供了您想要查看的格式和数据。

## **然而**，

上述语句仅在您的秒数为**`below 60`**. 如果输入`60, 61, 84`, '100' 等。**它不起作用。**

所以也许你可以像你现在正在使用的所有干扰代码一样干扰它**。**;)

它尽可能丑陋。`mod 60`继续，`seconds`然后将单元格格式更改为时间。或者就像使用**亚历克斯在他的回答中出现的内容一样。** *它很干净，并在数学上保证了您所需的输出。*

# javascript - 两个串行 webkit 转换在某些 android 设备上不起作用

> ID：14052654
> 
> 赞同：0
> 
> 时间：2012-12-27T09:53:28.597
> 
> 标签：javascript, android, css, webkit-transition

我想让两个 webkitTransition 一个接一个地应用于 webkitTransform 属性的同一个 div 元素。这是代码：

```
<html>
<head>
    <title></title>
    <script type="text/javascript">
        document.addEventListener("DOMContentLoaded", init);
        function init() {
            var d1 = document.getElementById("d1");

            d1.style.webkitTransition = "-webkit-transform 1s linear";
            d1.style.webkitTransform = "translate(-100px,0px)";

            setTimeout(function(){
                d1.style.webkitTransition = "-webkit-transform 1s linear";
                d1.style.webkitTransform = "translate(-150px,0px)";
            }, 1500);
        }
    </script>
       <style type="text/css">
           div#d1 {
               position: absolute;
               background-color: rgba(13,15,112,122);
               width: 200px;
               height: 200px;
               overflow: hidden;
           }
       </style>
</head>
<body>
<div id="d1"/>
</body>
</html> 
```

[http://bit.ly/UnTqAV](http://bit.ly/UnTqAV)

此结果将直接应用于第二个转换，无需在 Android 4.0.4 三星平板电脑默认浏览器 (GT-P5110 GT-P3110 ...) 上进行任何转换。其他设备工作正常。我尝试过使用带/不带 3d 后缀并打开/关闭打开 GL。有没有人有同样的经历？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-11T10:11:05.533

我们遇到了同样的问题，这是 Android 4.0.4 WebView 的一个（大）错误。我们不得不在我们的 webapp 上再次编写一些动画。诀窍是对每个转换使用 CSS 矩阵属性，而不是特定的平移、缩放等。

此链接非常适合了解有关 2D 矩阵的更多信息： [http ://www.eleqtriq.com/wp-content/static/demos/2010/css3d/matrix2dExplorer.html](http://www.eleqtriq.com/wp-content/static/demos/2010/css3d/matrix2dExplorer.html)

# java - FileChannel tryLock() 方法是检查锁还是只是破坏它们？

> ID：14052656
> 
> 赞同：5
> 
> 时间：2012-12-27T09:53:39.903
> 
> 标签：java, solaris, file-locking, filelock

我有两个进程可以同时访问同一个文件并希望实现文件锁定。问题似乎是一个进程是用 java 编写的，另一个是用 C 编写的，并且不清楚在 java 端是如何实现低级锁定的。平台是 Solaris 10。我试图在文件上引入锁定，以防止 Java 进程在 C 进程读取文件时进行更新。我的想法是尝试从 java 代码中获取锁 10 次，然后才无条件地写入文件（我假设锁类型是咨询锁）。但是，java tryLock() 在第二次尝试时会破坏 C 进程的锁定并破坏读取。

这是简化的代码（Java）：

```
 int iAttemptCnt = 0;
              FileChannel wchannel = new FileOutputStream(new File(fileName), false).getChannel();;
              FileLock flock;
    while(true){
        try{
            MyLog.log(MyLog.LVL_INFO, "attempt to lock  file");
            if( (flock = wChannel.tryLock()) == null ){
                // lock held by another program
                if(++iAttemptCnt >= 10 
                    break;                  
            }
            else{
                MyLog.log(MyLog.LVL_INFO, " file locked");
                break;
            }
        }catch(OverlappingFileLockException ofle){
            .......                     
            if(++iAttemptCnt >= 10 ){
            ...
                break;          
            }                   
        }catch(IOException ioe){
            throw new IOException("failed to lock the  file");
        }
        try{
            MyLog.log(MyLog.LVL_INFO, "File already locked, retrying in one second");
            Thread.sleep(1000);
        }catch(InterruptedException ie){
            .....
        }

    } 
```

C 代码使用 fcntl：

```
fd = open(filename, O_RDONLY);

.....

lck.l_type = F_RDLCK;/* F_RDLCK setting a shared or read lock */ 

lck.l_whence = 0; /* offset l_start from beginning of file */ 

lck.l_start = 0LL; 

lck.l_len = 0LL; /* until the end of the file address space */ 

....

while(  fcntl(fd, F_SETLK64, &lck) < 0){ 

  if( errno == EAGAIN )

    ....    
  else if (errno == EIO )

     ...

  else if( errno == ENOLCK)

     ...

  else if (errno == EDEADLK)

     ...
  if(++ii == 10 ){     

    break;
  }

  ...    

  sleep(1);
} 

 MyLongLastingRead();

...
lck.l_type = F_UNLCK;

fcntl(fd, F_SETLK, &lck);

close(fd); 
```

`tryLock()`真的检查锁吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-30T15:38:48.387

我不确定这是否能解决您的问题，但在我看到的示例中，flock 结构的 l_pid 字段设置如下。

```
fl.l_pid = getpid(); 
```

在您的问题中，您没有设置此字段。试试看是否有什么不同。我希望它有所帮助。

# c# - 复制文件，如果较新则覆盖

> ID：14052661
> 
> 赞同：22
> 
> 时间：2012-12-27T09:54:06.793
> 
> 标签：c#, .net

在 C#.NET 中，如何将文件复制到另一个位置，如果源文件比现有文件新（具有较晚的“修改日期”）覆盖现有文件，并注意源文件是否较旧？

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2012-12-27T10:02:41.433

您可以使用[`FileInfo`该类](http://msdn.microsoft.com/en-us/library/system.io.fileinfo.aspx) 及其属性和方法：

```
FileInfo file = new FileInfo(path);
string destDir = @"C:\SomeDirectory";
FileInfo destFile = new FileInfo(Path.Combine(destDir, file.Name));
if (destFile.Exists)
{
    if (file.LastWriteTime > destFile.LastWriteTime)
    { 
        // now you can safely overwrite it
        file.CopyTo(destFile.FullName, true);
    }
} 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-12-27T10:02:24.763

您可以使用 FileInfo 类：

```
FileInfo infoOld = new FileInfo("C:\\old.txt");
FileInfo infoNew = new FileInfo("C:\\new.txt");

if (infoNew.LastWriteTime > infoOld.LastWriteTime)
{
    File.Copy(source path,destination path, true) ;
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-03-02T22:50:18.173

这是我对答案的看法：复制不移动文件夹内容。如果目标不存在，则代码更易于阅读。从技术上讲，为不存在的文件创建文件信息将具有 DateTime.Min 的 LastWriteTime，因此它**会**复制但在可读性方面有点不足。我希望这个经过测试的代码可以帮助某人。

**编辑：我已经更新了我的源代码，使其更加灵活。因为它是基于这个线程的，所以我在这里发布了更新。使用掩码时，*如果*子文件夹不包含匹配的文件，则不会创建子目录。当然，更强大的错误处理程序在您的未来。:)

```
public void CopyFolderContents(string sourceFolder, string destinationFolder)
{
    CopyFolderContents(sourceFolder, destinationFolder, "*.*", false, false);
}

public void CopyFolderContents(string sourceFolder, string destinationFolder, string mask)
{
    CopyFolderContents(sourceFolder, destinationFolder, mask, false, false);
}

public void CopyFolderContents(string sourceFolder, string destinationFolder, string mask, Boolean createFolders, Boolean recurseFolders)
{
    try
    {
        if (!sourceFolder.EndsWith(@"\")){ sourceFolder += @"\"; }
        if (!destinationFolder.EndsWith(@"\")){ destinationFolder += @"\"; }

        var exDir = sourceFolder;
        var dir = new DirectoryInfo(exDir);
        SearchOption so = (recurseFolders ? SearchOption.AllDirectories : SearchOption.TopDirectoryOnly);

        foreach (string sourceFile in Directory.GetFiles(dir.ToString(), mask, so))
        {
            FileInfo srcFile = new FileInfo(sourceFile);
            string srcFileName = srcFile.Name;

            // Create a destination that matches the source structure
            FileInfo destFile = new FileInfo(destinationFolder + srcFile.FullName.Replace(sourceFolder, ""));

            if (!Directory.Exists(destFile.DirectoryName ) && createFolders)
            {
                Directory.CreateDirectory(destFile.DirectoryName);
            }

            if (srcFile.LastWriteTime > destFile.LastWriteTime || !destFile.Exists)
            {
                File.Copy(srcFile.FullName, destFile.FullName, true);
            }
        }
    }
    catch (Exception ex)
    {
        System.Diagnostics.Debug.WriteLine(ex.Message + Environment.NewLine + Environment.NewLine + ex.StackTrace);
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-27T10:05:01.427

在批处理文件中，这将起作用：

```
XCopy "c:\my directory\source.ext" "c:\my other directory\dest.ext" /d 
```

# xcode - Xcode 项目的本地客户端服务器 Git 设置

> ID：14052665
> 
> 赞同：4
> 
> 时间：2012-12-27T09:54:18.703
> 
> 标签：xcode, git

我有一个场景，我们是由 5 名 iOS 开发人员组成的团队。使用 OSX 10.8 和 xCode 4.5 版在 iMAC 上工作。现在我想在处理同一个项目时拥有 Git 版本控制系统。我已经阅读了 Git 教程，但都有远程在线服务器，如 github.com 或 bitbucket。我想创建本地网络 Git 服务器（很可能是我自己的 iMAC），以便我们可以在本地网络上工作。

谁能指导我我该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-27T10:18:13.940

这里有 sparkleshare [http://sparkleshare.org/](http://sparkleshare.org/)，它在后台使用 GIT。

**它是如何工作的？**

SparkleShare 在您的计算机上创建一个保存项目的特殊文件夹。当有人添加、删除或编辑文件时，所有项目都会自动同步到各自的主机（您可以将多个项目连接到不同的主机）和您团队的 SparkleShare 文件夹。

如果您想安装自己的私有 git 服务器，我发现这很有用[http://blog.muehlbachler.org/2012/01/how-to-install-a-private-debian-git-server-using-gitolite-and- gitlabhq/](http://blog.muehlbachler.org/2012/01/how-to-install-a-private-debian-git-server-using-gitolite-and-gitlabhq/)

如果你用谷歌搜索“git 私人服务器”，可能会有很多结果。

我希望这会有所帮助。

编辑

还有 gitlab - [http://gitlab.org/](http://gitlab.org/)这是一个自托管的 git 管理软件。

# windows-runtime - 在 Windows 应用商店应用程序中显示 PowerPoint 演示文稿

> ID：14052667
> 
> 赞同：0
> 
> 时间：2012-12-27T09:54:25.833
> 
> 标签：windows-runtime, powerpoint, openxml

是否有任何方法可以在 Windows 应用商店应用程序中阅读和查看 PowerPoint 演示文稿？我想要实现的是从计算机打开 .pptx 文件并在应用程序中显示幻灯片。基本上，它就像一个 PowerPoint 查看器。我通过大量搜索发现我可以使用 Aspose.Slides API 将幻灯片转换为图像，然后将它们显示给用户。但首先，Aspose.Slides 不适用于 WinRT，其次，它不是免费的。OOXML 真的很复杂，我找不到通过 OOXML 实现这一点的方法。有什么办法可以解决这个问题？有没有办法操纵幻灯片？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-28T10:44:49.860

我还没有看到用于 PowerPoint 的 WinRT API，但如果您找到了用于 .NET 的 API，您可以轻松编写一个 Web 服务，该服务将采用 ppt 或 pptx 并使用该 API 将其转换为图像或您可以显示的其他内容。

如果您对演示文稿有一定的控制权 - 您也可以考虑将它们保存为 XPS，这是基于 WPF/XAML 的格式，但即便如此，您仍需要做更多的工作来将其处理为与 WinRT/XAML 兼容的 XAML 格式，并且可能加载自定义嵌入字体等仍然存在一些问题。

# c# - 使用另一个 Gridview 的属性生成多个 Gridview

> ID：14052668
> 
> 赞同：0
> 
> 时间：2012-12-27T09:54:28.500
> 
> 标签：c#, asp.net, gridview

我在 ASP 中声明了一个 gridview，如下所示：

```
<asp:GridView ID="GV_Sample" runat="server" AutoGenerateColumns="False" Visible="false" CssClass="tabela" style="margin: 0 auto;"
                UseAccessibleHeader="true" >
            <Columns>
                <asp:TemplateField HeaderText="Nome" HeaderStyle-CssClass="col1 column">
                    <HeaderTemplate>
                        Nome
                    </HeaderTemplate>
                    <ItemStyle CssClass="col1 column" />
                    <ItemTemplate>
                        <p><asp:Label ID="lbl_micro" runat="server" Text='<%# Bind("Descricao") %>' /></p>
                    </ItemTemplate>
                </asp:TemplateField>

                <asp:TemplateField HeaderText="Curso" HeaderStyle-CssClass="col2 column">
                    <HeaderTemplate>
                        Curso
                    </HeaderTemplate>
                    <ItemStyle CssClass="col2 column" />
                    <ItemTemplate>
                        <asp:HyperLink ID="link_micro" runat="server" Text='<%# "<span>"+ Eval("id") + "</span>" %>' NavigateUrl='<%# returnRawUrl() + "&id=" + Eval("id") %>' CssClass="linkBlock button-cursos" />
                    </ItemTemplate>
                </asp:TemplateField>
            </Columns>                        
        </asp:GridView> 
```

在后面的代码中，我想使用 GV_Sample 的所有属性生成多个 Gridview，并且只需更改 DataSource：

```
for(int i=0; i<array.Count; i++)
{
     GridView gvr = GV_Sample;
     gvr.id="myGV_"+i;
     SqlDosCursos.SelectParameters["ID"].DefaultValue = array[i];
     gvr.DataSourceID = "SqlDosCursos";
     gvr.DataBind();
     myPlaceHolder.Controls.Add(gvr);
} 
```

问题只是我在占位符中插入 GridView 的最后一个循环，应该插入的所有其他人都不存在。我该如何解决这个问题？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T10:16:01.163

您可以将 UserControl 写入新的 gridView

```
 <%@ Control Language="C#" AutoEventWireup="true" CodeBehind="WebUserControl1.ascx.cs" Inherits="WebApplication1.WebUserControl1" %>

<asp:GridView ID="GridView1" runat="server"></asp:GridView> 
```

然后将用户控件添加到占位符。

```
WebUserControl1 gvr = new WebUserControl1();
            myPlaceHolder.Controls.Add(gvr); 
```

# java - 错误：无法加载类“dijit/layout/ContentPane”

> ID：14052672
> 
> 赞同：0
> 
> 时间：2012-12-27T09:54:55.283
> 
> 标签：java, jsp, dojo

我在 JSP 页面上使用 Dojo 1.6.1。

```
<html>
<%@include file="includes/head.jsp" %>
<body class="tundra">
    <div 
        id="appLayout" 
        class="demoLayout" 
        data-dojo-type="dijit.layout.BorderContainer" 
        data-dojo-props="design: 'headline'"
        style="width: 100%; height: 100%">

    <div 
        class="edgePanel"
        data-dojo-type="dijit/layout/ContentPane" 
        data-dojo-props="region:'top'">

        <%@include file="includes/headline.jsp" %>

    </div>

    <div 
        class="edgePanel" 
        data-dojo-type="dijit.layout.ContentPane" 
        data-dojo-props="region: 'center'">
    ......... 
```

head.jsp 的内容

```
<head>
<meta charset="utf-8">
    <link rel="stylesheet" href="<%=request.getContextPath()%>/dojo.1.6.1/dijit/themes/tundra/tundra.css">
    <link rel="stylesheet" href="<%=request.getContextPath()%>/dojo.1.6.1/dojo/resources/dojo.css">
    <link rel="stylesheet" href="<%=request.getContextPath()%>/css/main.css">
    <style type="text/css">
    </style>
<script src="<%=request.getContextPath()%>/dojo.1.6.1/dojo/dojo.js"
        djConfig="parseOnLoad: true, isDebug: true">
</script>
<script>
    dojo.require("dojo.parser");
    dojo.require("dijit.layout.BorderContainer");
    dojo.require("dijit.layout.ContentPane");
</script>
</head> 
```

部署时，我收到 javascript 错误。 `Could not load class 'dijit/layout/ContentPane'` 当用萤火虫检查时。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T14:36:47.333

似乎`dijit.layout.ContentPane`不在类路径中。尝试添加它或尝试更改`require`a`define`以查看是否修复。

[这](http://dojotoolkit.org/reference-guide/1.8/dijit/layout/ContentPane.html)是示例。

# android - 在android中选择单个相册并获取其内容

> ID：14052675
> 
> 赞同：3
> 
> 时间：2012-12-27T09:55:03.083
> 
> 标签：android, photos

我正在开发我的第一个应用程序，我想要的只是导入/使用/访问单个相册中的所有照片。一般来说，用户应该创建一个文件夹，我的应用程序可以从中获取自定义图稿。

到目前为止，我已经构建了一个 ListView 对话框，并一直在用画廊文件夹中的文件夹列表填充它。

然后我发现了这个：选择一张照片并获取它的相册内容。 [https://stackoverflow.com/a/6041293/1931743](https://stackoverflow.com/a/6041293/1931743)

在一个完美的世界里，我会使用 android 的内置图像选择器来选择一张专辑，但我还没有找到解决方案。

你有什么建议？继续使用 ListView 还是有办法选择带有库存对话框的单个专辑？

谢谢你！

# php - 加载好友信息更快

> ID：14052676
> 
> 赞同：0
> 
> 时间：2012-12-27T09:55:09.623
> 
> 标签：php, sdk, facebook-opengraph

我的应用需要用户的朋友信息（生日、图片和姓名）：

我通过 SDK (php) 使用 Graph API。我首先通过以下方式请求朋友 ID，`api('/me/friends')` 然后我请求上述信息：`api('/id?fields=name,picture,birthday')`

为了优化速度，我以批量请求的形式进行调用。

我的问题是加载 530 个朋友需要大约 40 秒，这在我看来很多。我正在使用其他人开发的类似应用程序，他们在 9 秒内加载了朋友（相同的信息）。

我想知道你们中是否有人知道我怎样才能更快地请求这些信息，或者至少解释一下这种差异的来源。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T10:20:08.737

Instead of making so many api calls, simply use the fql as-

```
$fql = "select uid,name,birthday_date from user where uid in (select uid2 from friend where uid1=me())";
$param  =   array(
                   'method'      => 'fql.query',
                   'query'       => $fql,
                   'access_token'=> ACCESS_TOKEN
                 );

$friends_arr = $facebook->api($param); 
```

Get the path of the picture using:

```
https://graph.facebook.com/'.$FRIEND_ID.'/picture?type=TYPE 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T10:22:27.133

您可以尝试第一次将数据初步加载到本地数据库中，以便您可以使用它来获取更多信息。检索起来会快得多。

如果您的页面上有许多插件，则可能会减慢结果（例如，使用类似的插件）。

连接到 Facebook 所需的时间（延迟）通常是您无法控制的，因此您可以将请求转换为异步请求，并向用户显示它在此过程中正在加载。

# jquery - 达到最大宽度后如何在x轴上调整jquery对话框的大小，它应该在y轴上调整大小？

> ID：14052679
> 
> 赞同：1
> 
> 时间：2012-12-27T09:55:23.757
> 
> 标签：jquery, jquery-dialog

在我的应用程序中，我有一个 jquery 对话框，我需要自定义调整大小，我使用了 resizable true、maxwidth 属性，现在我希望 jquery 对话框首先在 x 轴上调整大小，在达到最大宽度后它应该在 y 中调整大小-axis，我的代码如下

```
 $("#dialogHolder").dialog({
    autoOpen : false,
    title : "Tools",
    height : 100,
    resizable : true,
    minWidth : 300,
    maxWidth: 600,
    zIndex:1050
}); 
```

# shell - sed 命令获取变量

> ID：14052684
> 
> 赞同：2
> 
> 时间：2012-12-27T09:55:42.380
> 
> 标签：shell, unix, sed, aix

我有文件 File1.txt 我必须在其中使用 sed 命令替换文本

File1.txt 内容

```
EURAMOUNTTOBEREPLACED 
```

我有一个用于替换文本 AMOUNTTOBEREPLACED 的 AIX shell 脚本

shell脚本的内容

```
sum=27
sed 's/AMOUNTTOBEREPLACED/"$sum"/g'  File1.txt >> temp
mv temp FileNew.txt 
```

执行脚本后，FileNew.txt 的内容如下

```
EUR"$sum" 
```

但预期输出应该是

```
EUR27 
```

请帮忙怎么办？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T10:10:26.550

我想你想要的是这样的：

```
sed 's/AMOUNTTOBEREPLACED/'$sum'/g' File1.txt >> temp 
```

基本上单 qouting 将字符串带到 sed 并跳过错误的 shell。您希望外壳程序解释变量，这就是我所做的。如果你碰巧有 sed 的 gnu 版本。然后你可以做

```
sed -i 's/AMOUNTTOBEREPLACED/'$sum'/g' File1.txt 
```

它将代码中的这两个语句压缩为上面的一个：

```
sed 's/AMOUNTTOBEREPLACED/'$sum'/g'  File1.txt >> temp
mv temp FileNew.txt 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T10:19:47.033

请改用以下 sed 命令：

```
sed -e "s/AMOUNTTOBEREPLACED/\"${sum}\"/g" 
```

# regex - Bash - 在正则表达式中逃避美元的正确方法

> ID：14052687
> 
> 赞同：5
> 
> 时间：2012-12-27T09:56:02.830
> 
> 标签：regex, bash, substitution, expansion

在 bash 正则表达式中转义美元符号的正确方法是什么？我正在尝试测试字符串是否以美元符号开头。这是我的代码，其中我在双引号表达式中对美元进行了双重转义：

```
echo -e "AB1\nAB2\n\$EXTERNAL_REF\nAB3" | while read value;
do
    if [[ ! $value =~ "^\\$" ]];
    then
            echo $value
    else
            echo "Variable found: $value"
    fi
done 
```

这就是我想要的一个盒子，它有：

```
GNU bash, version 3.2.25(1)-release (x86_64-redhat-linux-gnu) 
```

详细的输出显示

```
+ [[ ! $EXTERNAL_REF =~ ^\$ ]]
+ echo 'Variable found: $EXTERNAL_REF' 
```

但是，在另一个使用

```
GNU bash, version 4.1.2(1)-release (x86_64-redhat-linux-gnu) 
```

比较展开如下

```
+ [[ ! $EXTERNAL_REF =~ \^\\\$ ]]
+ echo '$EXTERNAL_REF' 
```

是否有一种标准/更好的方法可以适用于所有实现？

非常感谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-27T10:14:33.387

为什么在这里使用正则表达式？一个 glob 就足够了：

```
#!/bin/bash

while read value; do
   if [[ "$value" != \$* ]]; then
       echo "$value"
   else
       echo "Variable found: $value"
   fi
done < <(printf "%s\n" "AB1" "AB2" '$EXTERNAL_REF' "AB3") 
```

在这里工作`shopt -s compat32`。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-11-14T13:05:31.803

正则表达式根本不需要任何引号。这应该有效：

```
if [[ ! $value =~ ^\$ ]]; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-27T10:11:54.297

我会用单引号替换双引号并删除一个单引号并`\`进行如下更改

```
$value =~ "^\\$" 
```

也可以用作

```
$value =~ '^\$' 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-10-31T15:09:46.653

我也从未找到解决方案，但出于我的目的，我选择了以下解决方法：

```
if [[ "$value" =~ ^(.)[[:alpha:]_][[:alnum:]_]+\\b && ${BASH_REMATCH[1]} == '$' ]]; then
    echo "Variable found: $value"
else
    echo "$value"
fi 
```

我没有尝试“引用”美元符号，而是匹配它周围的所有内容，并捕获美元符号应该所在的字符以进行直接字符串比较。有点杂乱无章，但它确实有效。

或者，我已经开始使用变量，但仅用于反斜杠字符（我不喜欢将整个正则表达式存储在变量中，因为我发现正则表达式不会出现在使用它的上下文中会令人困惑）：

```
bs="\\"
string="test\$test"
if [[ "$string" =~ $bs$ ]]; then
    echo "output \"$BASH_REMATCH\""
fi 
```

# php - 使用 html 的 php 中的错字问题

> ID：14052688
> 
> 赞同：-3
> 
> 时间：2012-12-27T09:56:03.070
> 
> 标签：php

我猜我有这个简单的错字问题。我该如何解决？

```
<?php the_content("<br /> <span class='custom-more'>Read More: " . get_the_title('', '', false) "</span>"); ?> 
```

我需要在 WordPress 中制作一个阅读更多按钮，并且我需要将阅读更多内容包装在一个跨度类中。我收到此错误消息：

```
Parse error: syntax error, unexpected T_CONSTANT_ENCAPSED_STRING in 
```

我应该如何解决这个问题？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T09:56:49.413

您缺少 函数和`.`之间 的连接运算符`get_the_title``</span>`

```
 <?
    php the_content("<br /> <span class='custom-more'>Read More: ".get_the_title('', '', false)."</span>"); 
 ?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-27T09:59:24.473

你错过了`concatenate (.)`

正确的代码将是

```
 php the_content("<br /> <span class='custom-more'>Read More: ".get_the_title('', '', false)."</span>"); 
```

# android - 模拟 Nexus 10

> ID：14052690
> 
> 赞同：1
> 
> 时间：2012-12-27T09:56:16.657
> 
> 标签：android

我想模拟 Nexus 10，但我不知道要使用什么值。皮肤：内置或自定义分辨率？我应该使用哪些硬件属性？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-27T10:09:06.547

模仿具有相同规格的如此强大的设备，我可能会遇到很大的问题。不幸的是，它没有作为 Nexus 7 包含在 SDK 中。

我建议使用 10 英寸 WXGA 平板电脑屏幕 (800x1280)。和 2GB 的内存。新的 AVD 管理器不允许您指定自定义屏幕尺寸，因此它是您可以通过模拟器获得的最接近的屏幕尺寸。

我猜一般模拟真正的 10.055 英寸 2560 x 1600 (300 ppi) 屏幕会很慢。

还启用“使用主机 GPU”选项以获得更好的性能。

不要忘记根据您的应用需求添加 SD 卡存储。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-28T14:19:20.140

The best way to emulate the Nexus 10 is to use AndroVM. I am currently running Android on it with the full Nexus 10 2560x1600 resolution and it fits onto my HD screen if I set AndroVM to use 320dpi.

Oh.. and it's VERY fast :-)

I personally use it over emulators and real hardware devices as it's extremely responsive.

Update: AndroVM is now called [Genymotion](http://www.genymotion.com/)

# spring - 如何在使用 maven 进行集成测试的战争中包含测试类和配置？

> ID：14052694
> 
> 赞同：8
> 
> 时间：2012-12-27T09:56:24.663
> 
> 标签：spring, tomcat, maven, integration-testing, stub

我目前有一个 Maven Web 项目，我正在尝试为其编写集成测试。对于项目的结构，我在**src/test/java**下定义了测试存根，而这些存根的 spring bean 定义位于**src/test/resources**下。

我想要做的是，当我构建我的战争工件时，我希望所有的测试存根类都被编译并与 spring bean 定义文件一起包含在战争中。我尝试使用 maven 战争插件来做到这一点，但我唯一能够复制的是资源。*简而言之，我想利用测试类路径并将所有这些类包含在我的 war 文件中。*

似乎带有 maven jetty 插件的 useTestClassPath 选项可以解决我的问题，但我正在处理的当前项目目前正在使用 Tomcat 6.0。是否有另一个 Maven 插件或我可以配置 Maven 战争插件以实现我的目标的方法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-27T10:18:44.160

你也可以直接做。这会将测试类和测试资源添加到 WEB-INF/classes：

```
 <plugin>
            <artifactId>maven-antrun-plugin</artifactId>
            <version>1.7</version>
            <executions>
                <execution>
                    <phase>process-test-classes</phase>
                    <configuration>
                        <target>
                            <copy todir="${basedir}/target/classes">
                                <fileset dir="${basedir}/target/test-classes" includes="**/*" />
                            </copy>
                        </target>
                    </configuration>
                    <goals>
                        <goal>run</goal>
                    </goals>
                </execution>
            </executions>
        </plugin> 
```

我还建议您将其放入单独的配置文件中，例如“集成”，并覆盖该配置文件中的包名称，以免在没有打包测试和测试战争的情况下混淆正常战争。

profile 的完整示例在[这里](https://gist.github.com/4387142)。您可能会在不包含测试的情况下进行`mvn clean package`战争`war-it-test.war`，或者您可能会在包含测试的情况下进行`mvn clean package -Pintegration`战争`war-it-test-integration.war`。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-10T18:24:18.603

我相信 Maven 战争插件的以下配置会做你想要的。您将您的测试类复制到您的 WEB-INF/classes 文件夹。您甚至可以过滤这些资源。

```
<plugin>
    <groupId>org.apache.maven.plugins</groupId>
    <artifactId>maven-war-plugin</artifactId>
    <executions>
        <execution>
            <id>generate-test-war</id>
            <phase>pre-integration-test</phase>
            <goals>
                <goal>war</goal>
            </goals>
        </execution>
    </executions>
    <configuration>
        <warSourceDirectory>${basedir}/src/test/webapp</warSourceDirectory>
        <warName>${project.artifactId}-test</warName>
        <webappDirectory>${basedir}/target/${project.artifactId}-test</webappDirectory>
        <primaryArtifact>false</primaryArtifact>
        <webResources>
            <resource>
                <directory>${basedir}/target/test-classes</directory>
                <targetPath>WEB-INF/classes</targetPath>
            </resource>
        </webResources>
    </configuration>
</plugin> 
```

请参阅[http://maven.apache.org/plugins/maven-war-plugin/examples/adding-filtering-webresources.html](http://maven.apache.org/plugins/maven-war-plugin/examples/adding-filtering-webresources.html)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-27T10:09:40.750

您可以使用[maven build helper 插件](http://mojo.codehaus.org/build-helper-maven-plugin/)将其他文件夹添加到“正常”类路径。

但我建议为您的集成测试创建一个新文件夹（例如 src/it/java），并添加此文件夹，而不是“普通”测试文件夹（src/test/java）——资源相同文件夹。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-09-20T20:00:58.263

除了使用 maven antrun 插件，您还可以使用 maven 资源插件并像这样配置它：

```
<plugin>
    <artifactId>maven-resources-plugin</artifactId>
    <version>2.5</version>
    <executions>
        <execution>
            <phase>process-test-classes</phase>
            <id>test-classes</id>
            <goals>
                <goal>copy-resources</goal>
            </goals>
            <configuration>
                <overwrite>false</overwrite>
                <outputDirectory>${project.build.directory}/${project.build.finalName}/WEB-INF/classes</outputDirectory>
                <resources>
                    <resource>
                        <directory>${project.build.directory}/test-classes</directory>
                    </resource>
                </resources>
            </configuration>
        </execution>
    </executions>
</plugin> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-10-02T03:28:27.103

使用带有附加类路径目录配置的 Tomcat 7 插件。

```
 <plugin>
                <groupId>org.apache.tomcat.maven</groupId>
                <artifactId>tomcat7-maven-plugin</artifactId>
                <version>2.2</version>
                <configuration>
                    <additionalClasspathDirs>
                        <additionalClasspathDir>${build.testOutputDirectory}</additionalClasspathDir>
                    </additionalClasspathDirs>
                </configuration>
                <executions>
                    <execution>
                        <id>start-tomcat</id>
                        <goals>
                            <goal>run</goal>
                        </goals>
                        <configuration>
                            <fork>true</fork>
                        </configuration>
                    </execution>
                </executions>
            </plugin> 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-03-13T06:09:32.237

您可以在 pom.xml 文件中进行此配置，您不会在 pom.xml 中收到任何错误，并将测试类添加到我们的 jar 或 war 文件中。

```
 <pluginManagement>
                <plugins>
                    <plugin>
                        <groupId>org.eclipse.m2e</groupId>
                        <artifactId>lifecycle-mapping</artifactId>
                        <version>1.0.0</version>
                        <configuration>
                            <lifecycleMappingMetadata>
                                <pluginExecutions>
                                    <pluginExecution>
                                        <pluginExecutionFilter>
                                            <groupId>org.apache.maven.plugins</groupId>
                                            <artifactId>maven-antrun-plugin</artifactId>
                                            <versionRange>[1.7,)</versionRange>
                                            <goals>
                                                <goal>run</goal>
                                            </goals>
                                        </pluginExecutionFilter>
                                        <action>
                                            <execute />
                                        </action>
                                    </pluginExecution>
                                </pluginExecutions>
                            </lifecycleMappingMetadata>
                        </configuration>
                    </plugin>
                </plugins>
            </pluginManagement>

 <plugins>
        <plugin>
            <artifactId>maven-antrun-plugin</artifactId>
            <version>1.7</version>
            <executions>
                <execution>
                    <phase>process-test-classes</phase>
                    <configuration>
                        <target>
                            <copy todir="${basedir}/target/classes">
                                <fileset dir="${basedir}/target/test-classes" includes="**/*" />
                            </copy>
                        </target>
                    </configuration>
                    <goals>
                        <goal>run</goal>
                    </goals>
                </execution>
            </executions>
        </plugin>
    </plugins> 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-03-13T06:32:18.387

我们需要将以下插件添加到 pom.xml 以便将测试用例添加到 jar 中。感谢@IvonSopov

```
 <plugin>
                <artifactId>maven-antrun-plugin</artifactId>
                <executions>
                    <execution>
                        <phase>process-test-classes</phase>
                        <configuration>
                            <target>
                                <copy todir="${basedir}/target/classes">
                                    <fileset dir="${basedir}/target/test-classes" includes="**/*" />
                                </copy>
                            </target>
                        </configuration>
                        <goals>
                            <goal>run</goal>
                        </goals>
                    </execution>
                </executions>
            </plugin> 
```

但是在添加这一行之后，我们构建成功并且还能够将测试用例类添加到 jar 中。但问题出在 pom.xml 中，它显示为错误

> 生命周期配置未涵盖插件执行：org.apache.maven.plugins:maven-antrun-plugin:1.8:run (execution:default, phase: process-test-classes)

为了消除此错误，我们需要将以下插件作为单独的标签包含在构建标签中。（不在我们之前添加的插件中。）

```
 <pluginManagement>
            <plugins>
                <plugin>
                    <groupId>org.eclipse.m2e</groupId>
                    <artifactId>lifecycle-mapping</artifactId>
                    <version>1.0.0</version>
                    <configuration>
                        <lifecycleMappingMetadata>
                            <pluginExecutions>
                                <pluginExecution>
                                    <pluginExecutionFilter>
                                        <groupId>org.apache.maven.plugins</groupId>
                                        <artifactId>maven-antrun-plugin</artifactId>
                                        <versionRange>[1.7,)</versionRange>
                                        <goals>
                                            <goal>run</goal>
                                        </goals>
                                    </pluginExecutionFilter>
                                    <action>
                                        <execute />
                                    </action>
                                </pluginExecution>
                            </pluginExecutions>
                        </lifecycleMappingMetadata>
                    </configuration>
                </plugin>
            </plugins>
        </pluginManagement> 
```

现在我们可以创建包含测试类的 jar，而不会出现任何错误。

# android - onItemClick 中的 alertDialog

> ID：14052703
> 
> 赞同：1
> 
> 时间：2012-12-27T09:56:56.490
> 
> 标签：android, android-dialog, android-menu

我的 ListView 的 onItemClick() 中有一个 alertDialog。

```
public void onItemClick(AdapterView<?> parent, View view, int position, long id) {
     AlertDialog.Builder alertDialogBuilder = new AlertDialog.Builder(FragmentActivity.this);
       alertDialogBuilder
       .setMessage("Do you wish to save any new/updated defects?")
       .setCancelable(false)
       .setPositiveButton("Yes",new DialogInterface.OnClickListener() {
           public void onClick(DialogInterface dialog,int id) 
           {
                saveMe();
           }
       })
       .setNegativeButton("No",new DialogInterface.OnClickListener() {
           public void onClick(DialogInterface dialog,int id) {
               dialog.cancel();
           }
       });
       AlertDialog alertDialog = alertDialogBuilder.create();
       alertDialog.show(); 
```

`onItemClick()`只有在整个执行后才会创建此对话框。这将导致在显示菜单中的新项目后出现对话框。我希望在选择和显示菜单项之前出现对话框。怎么可能呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T10:07:19.670

我认为您可以在基本适配器中编写任何组件单击事件

# iphone - 我想通过我们的应用程序在“EverNote”中存储一些数据

> ID：14052708
> 
> 赞同：2
> 
> 时间：2012-12-27T09:57:29.947
> 
> 标签：iphone, objective-c, ios, evernote

我想通过我们的应用程序（图像或文本或两者）在“EverNote”中存储一些数据。

我用谷歌搜索，我得到了一些指导，比如 EverNote SDK，我也得到了 EverNoteCounter 示例（当我运行这个时，当我点击 getCount 按钮时，它会显示一条警告消息“无法验证”）。我也生成了开发者令牌。

但我无法创建consumerKey、consumerSecret。而且我也没有找到如何将我们的数据从我们的应用程序存储到印象笔记。

我有一些像[这样](http://discussion.evernote.com/topic/27738-getting-started-posting-image-to-evernote-from-ios-app/)的链接

但是当我通过该链接时，它说（此 URL 不支持 HTTP 方法 GET）

我能够使用 EVERNOTE 进行身份验证，并且能够获取该帐户中的笔记本数量。

我在我的应用程序中使用 sqllite。我正在使用一个文件夹来存放图像。Sqllite 有图像链接信息。

如何存储数据。

我使用以下代码进行身份验证并获取计数

```
 - (IBAction)retrieveUserNameAndNoteCount:(id)sender
{
    // Create local reference to shared session singleton
    EvernoteSession *session = [EvernoteSession sharedSession];
    [session authenticateWithViewController:self completionHandler:^(NSError *error) {
        // Authentication response is handled in this block
        if (error || !session.isAuthenticated) {
            // Either we couldn't authenticate or something else went wrong - inform the user
            if (error) {
                NSLog(@"Error authenticating with Evernote service: %@", error);
            }
            if (!session.isAuthenticated) {
                NSLog(@"User could not be authenticated.");
            }
            UIAlertView *alert = [[[UIAlertView alloc] initWithTitle:@"Error" 
                                                             message:@"Could not authenticate" 
                                                            delegate:nil 
                                                   cancelButtonTitle:@"OK" 
                                                   otherButtonTitles:nil] autorelease];
            [alert show];
        } else {
            // We're authenticated!
            EvernoteUserStore *userStore = [EvernoteUserStore userStore];
            // Retrieve the authenticated user as an EDAMUser instance
            [userStore getUserWithSuccess:^(EDAMUser *user) {
                // Set usernameField (UILabel) text value to username
                [usernameField setText:[user username]];
                // Retrieve total note count and display it
                [self countAllNotesAndSetTextField];                
            } failure:^(NSError *error) {
                NSLog(@"Error retrieving authenticated user: %@", error);
            }];
        } 
    }];    
}

- (void)countAllNotesAndSetTextField
{
    // Allow access to this variable within the block context below (using __block keyword)
    __block int noteCount = 0;

    EvernoteNoteStore *noteStore = [EvernoteNoteStore noteStore];
    [noteStore listNotebooksWithSuccess:^(NSArray *notebooks) {
        for (EDAMNotebook *notebook in notebooks) {
            if ([notebook guid]) {
                EDAMNoteFilter *filter = [[EDAMNoteFilter alloc] init];
                [filter setNotebookGuid:[notebook guid]];
                [noteStore findNoteCountsWithFilter:filter withTrash:NO success:^(EDAMNoteCollectionCounts *counts) {
                    if (counts) {

                        // Get note count for the current notebook and add it to the displayed total
                        NSNumber *notebookCount = (NSNumber *)[[counts notebookCounts] objectForKey:[notebook guid]];
                        noteCount = noteCount + [notebookCount intValue];
                        NSString *noteCountString = [NSString stringWithFormat:@"%d", noteCount];
                        [noteCountField setText:noteCountString];
                    }
                } failure:^(NSError *error) {
                    NSLog(@"Error while retrieving note counts: %@", error);
                }];
            }
        }        
    } failure:^(NSError *error) {
        NSLog(@"Error while retrieving notebooks: %@", error);
    }];
} 
```

请建议我链接或给我指导

非常感谢提前

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-27T18:25:43.097

当您只需要访问自己的帐户时，将使用开发者令牌。要获取消费者密钥/秘密，请访问此处：[http](http://dev.evernote.com/documentation/cloud/) ://dev.evernote.com/documentation/cloud/ 。

如果您使用的是 iOS，[https://github.com/evernote/evernote-sdk-ios](https://github.com/evernote/evernote-sdk-ios)有一个示例应用程序，您可以在拥有使用者密钥和秘密后使用该应用程序。

一般来说，dev.evernote.com 上有很多信息。

所有 SDK 都位于[https://github.com/evernote](https://github.com/evernote)

iOS 入门指南：[http ://blog.evernote.com/tech/2012/05/24/evernote-sdk-integration-ios/](http://blog.evernote.com/tech/2012/05/24/evernote-sdk-integration-ios/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T08:46:03.043

你解决了吗？如果没有，我做了以下工作来让它工作：

1.  下载并包含 sdk
2.  获取 consumerKey 和 secret（如果您也想访问笔记，那么您应该请求完全访问权限，而不是基本访问，[http://dev.evernote.com/documentation/cloud/](http://dev.evernote.com/documentation/cloud/)右上角）
3.  在 info.plist 中添加 URLType 条目（“修改应用程序的主 plist 文件”章节[https://github.com/evernote/evernote-sdk-ios](https://github.com/evernote/evernote-sdk-ios)）
4.  复制session init代码（填写consumer key和secret，hostname保持不变），实现两个applicationdelegate具体代码
5.  一个（屏幕上的）viewcontroller 应该被传递给验证用户的`authenticateWithViewController`方法，fe appdelegate 的 rootViewController

研究此页面以了解 Evernote 使用的模型层次结构：

[http://dev.evernote.com/documentation/cloud/chapters/data_structure.php](http://dev.evernote.com/documentation/cloud/chapters/data_structure.php) [http://dev.evernote.com/documentation/reference/Types.html](http://dev.evernote.com/documentation/reference/Types.html)

图像可以在字段中存储为 EDAMResource（资源），`data`文本在字段中存储为 EDAMNote（注释）`content`。两者都由 Evernote SDK 的`EvernoteNoteStore`对象处理。

# soap - ServiceStack：SOAP 的元数据不正确？

> ID：14052711
> 
> 赞同：2
> 
> 时间：2012-12-27T09:57:37.557
> 
> 标签：soap, servicestack

我遵循了[创建您的第一个 Web 服务](https://github.com/ServiceStack/ServiceStack/wiki/Create-your-first-webservice)教程。当我转到 Hello Service Soap11 元数据页面时，我看到以下内容：

```
POST /xml/reply/Hello HTTP/1.1 
Host: localhost 
Content-Type: application/xml
Content-Length: length

<?xml version="1.0" encoding="utf-8"?>
<soap:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" ...
</soap:Envelope> 
```

该行`POST /xml/reply/Hello HTTP/1.1`似乎不正确。当我使用[Postman Rest Client](https://chrome.google.com/webstore/detail/postman-rest-client/fdmmgilgnpjigdojojpjoooidkmcomcm?utm_source=chrome-ntp-launcher)并发布`/xml/reply/hello`到测试 SOAP 端点时。它不起作用。响应是`400 Bad Request`带有消息“无法反序列化 'application/xml' 请求...”

然后我更改 URL 以将请求发布为`/soap11`，它与 status code 一起使用`200 OK`。

Soap12 元数据页面也会出现此问题。

元数据页面生成似乎有些不对劲？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-30T16:44:47.890

通过查看代码，这看起来确实像一个错误。

我已经解决了这个问题并向 ServiceStack 提交了一个拉取请求，等待接受。

拉取请求：[https ://github.com/ServiceStack/ServiceStack/pull/389](https://github.com/ServiceStack/ServiceStack/pull/389)

更新：拉取请求已合并到 ServiceStack 主分支。问题解决了！

# python - python：数字序列

> ID：14052715
> 
> 赞同：4
> 
> 时间：2012-12-27T09:57:48.823
> 
> 标签：python, python-2.7

只是想知道最简单的方法是什么。我有一个包含以下内容的文件：

```
01 04 
02 04 
04 04 
```

我计划编辑我的文件以将**“缺失”**附加到文件中，因为 04 表示有 4 个项目，但缺少数字 3：

```
01 04 
02 04
#missing 
04 04 
```

最简单的方法是什么？我很确定这是一个简单的修复，只是我是 python 的新手，我一直在尝试非常冗长的方法来实现它。

希望能听到这里的消息，谢谢大家！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-27T10:10:22.880

```
with open('path') as f:
    for i, line in enumerate(f, start=1):
        if int(line.split()[0]) == i:
            pass
        else:
            #put missing 
```

我没有尝试这段代码。这只是概念。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T10:23:40.363

使用另一个文件，然后用它替换您的文件。

```
text = file('file_name','r').read() // read from file
list = '00 00' + [line for line in text]
new_list = []
l=len(list)
for i in xrange(1,l):
  new_list+=['missing' for i in range(int(list[i].split()[0])-int(list[i-1].split()[0])+1)]
  new_list.append(list[i]) 
```

然后将 new_list 写入一个文件，然后用这个替换你的文件

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-27T10:52:24.580

尝试这个：

```
f = open('file.txt', 'r')
newfile = []
lines = f.readlines()
number = lines[0][-3:-1]
for i in range(int(number)):
    string = '0' + str(i+1) + ' ' + number
    if i + 1 != int(number):
        string += '\n'
    if string not in lines:
        newfile.append('missing\n')
    else:
        newfile.append(string)
f.close()
f = open('file.txt', 'w')
f.writelines(newfile)
f.close() 
```

当我尝试使用您的示例时，它起作用了。它检查文件中是否有字符串，`'missing'`如果没有则写入。

注意：不完全确定是否有读写模式（带截断）

# javascript - Brightcove 视频在 wordpress 中不适用于 IE8

> ID：14052717
> 
> 赞同：1
> 
> 时间：2012-12-27T09:58:02.223
> 
> 标签：javascript, wordpress, brightcove

我正在尝试嵌入视频，但它不适用于 IE8。当我在帖子编辑页面中输入嵌入代码时，我设法将其隔离，并且我可以确认问题仅发生在 wordpress 网站上。

这是我的代码：

```
// in the header
<script language="JavaScript" type="text/javascript" src="http://admin.brightcove.com/js/BrightcoveExperiences.js"></script>
<script type="text/javascript" src="http://admin.brightcove.com/js/APIModules_all.js"></script>

//in the post
<div class="video-container"><object id="snippet7" class="BrightcoveExperience">
          <param name="bgcolor" value="#FFFFFF" />
          <param name="width" value="540px" />
          <param name="height" value="310px" />
          <param name="playerID" value="61385794001" />

          <param name="publisherID" value="58740635001"/>

          <param name="isVid" value="true" />
          <param name="isUI" value="true" />
          <param name="@videoPlayer" value="1328442650001" />
          <param name="wmode" value="transparent">
          <param name="autoStart" value="false" />
        </object>   
</div> 
```

你可以在这里看到一个活生生的例子： [http ://www.theisraelcourse.com/wordpress/?page_id=81](http://www.theisraelcourse.com/wordpress/?page_id=81)

除了 IE8 之外，它适用于所有浏览器

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-28T10:31:29.993

一些 Wordpress 主题适用`max-width:100%`于`object`这使得 IE8 将播放器折叠到 0 高度。您可以为播放器对象覆盖它：

```
<style type="text/css">
  .BrightcoveExperience { max-width: none }
</style> 
```

# oracle - 避免使用数据库链接的分布式事务

> ID：14052718
> 
> 赞同：2
> 
> 时间：2012-12-27T09:58:26.047
> 
> 标签：oracle, spring, transactions, dblink, xa

我正在一个 Spring Java EE 应用程序中工作，该应用程序必须处理两个不同的数据源 A 和 B。

因为应用程序需要以一致的方式更新 A 和 B。如果一次更新失败，则整个过程都会失败，必须进行回滚。

我对如何实现应用程序有两种不同的想法：

1.  我必须将这两个更新都包含在分布式事务 XA 中。这种方法在性能方面会很昂贵。此外，B 源将很快关闭，保持整个 XA 基础设施可能是一个瓶颈；
2.  我可以设置从 db A 到 db B 的 Oracle DB 链接，并让我的应用程序相信它只使用单个数据源和本地事务，而 Oracle 处理更新同步。当 B 将被关闭时，我将简单地删除 B 更新并关闭 DB Link。

对于这两种情况，你怎么看？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T14:48:38.580

使用 DB 链接的查询将在 Oracle 中隐式启动分布式事务。因此，您获得的开销与处理 XA 和应用程序中的两个数据源相同。

我们一直在使用 XA，它从来都不是瓶颈。不用担心。

# c# - control.DrawToBitmap() 没有按预期工作

> ID：14052725
> 
> 赞同：2
> 
> 时间：2012-12-27T09:59:02.340
> 
> 标签：c#, winforms, bitmap, drawtobitmap

在 Winform 应用程序中，我有一个用户控件；在其上绘制矩形、圆形等形状。我正在尝试使用 DrawToBitmap() 方法拍摄相同的快照。我有一个固定大小（300 x 300）的位图，用户控件的大小是（600 x 800），所以拍摄的快照只包含用户控件的一部分。

如何在位图中获取整个用户控件的快照？提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-27T10:41:27.913

您可以使用以下方法：

```
static void DrawControlToImage(Control ctrl, Image img) {
    Rectangle sourceRect = ctrl.ClientRectangle;
    Size targetSize = new Size(img.Width, img.Height);
    using(Bitmap tmp = new Bitmap(sourceRect.Width, sourceRect.Height, System.Drawing.Imaging.PixelFormat.Format32bppArgb)) {
        ctrl.DrawToBitmap(tmp, sourceRect);
        using(Graphics g = Graphics.FromImage(img)) {
            g.DrawImage(tmp, new Rectangle(Point.Empty, targetSize));
        }
    }
} 
```

# visual-c++ - 无法从 'LRESULT (__clrcall....) 转换为 'WNDPROC'

> ID：14052726
> 
> 赞同：3
> 
> 时间：2012-12-27T09:59:04.187
> 
> 标签：visual-c++, c++-cli

我尝试在 VS 2010 中创建一个托管 C++ 程序集以与 WinAPI 交互并在我的其他 C# 程序集中使用它。我已经阅读了所有帖子，甚至在 GitHub 中的代码中搜索过，但都没有成功。也许是关于错误消息中的__clrcall，不应该是__stdcall吗？有任何想法吗？

确切的错误信息是：

错误 C2440：“=”：无法从“LRESULT (__clrcall xxx::Win32Demo::*)(HWND,UINT,WPARAM,LPARAM)”转换为“WNDPROC”

源代码：

```
#pragma once

using namespace System;
using namespace System::Drawing;

#include "stdafx.h"
#include "windows.h"

namespace xxx
{

ref class Win32Demo
{

private: HWND__ * handle;
private: static Char * windowClass;

public:

Win32Demo(void)
{
}

static Win32Demo()
{
    tagWNDCLASSEXW w;
    windowClass = (wchar_t*) L"Hello";

    w.cbSize = sizeof(tagWNDCLASSEXW);
    w.style = 0x803;
    w.lpfnWndProc = WindowProc; // Error
    w.cbClsExtra = 0;
    w.cbWndExtra = 0;
    w.hInstance = 0;
    w.hIcon = 0;
    w.hCursor = 0;
    w.hbrBackground = CreateSolidBrush(0);
    w.lpszMenuName = NULL;
    w.lpszClassName = windowClass;
    w.hIconSm = 0;
}

public :
static LRESULT CALLBACK WindowProc(HWND hwnd, UINT message, WPARAM wParam, LPARAM lParam)
{
    return 0;
}

};
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-27T15:22:42.437

这会出错，因为您的 WndProc() 函数正在编译为 IL，而不是机器代码。发生这种情况是因为您使用 /clr 编译它。这不仅仅是一个编译时错误，它也不能在运行时工作。Windows 不知道如何调用托管方法，除非您从 Marshal::GetFunctionPointerForDelegate() 获得帮助。

最好不要去那里。将此代码移动到一个单独的 .cpp 文件中，您可以在不使用 /clr 选项的情况下编译该文件。或`#pragma managed(push, off)`在此代码之前使用，以便将其编译为机器代码而不是 IL。

并考虑为您提供相同功能的托管类包装器。就像 System.Windows.Forms 命名空间中的类一样。或者，如果您想保留此代码，则从 NativeWindow 类派生您自己的类以附加窗口句柄，从而允许您使用托管代码覆盖 WndProc()。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T14:15:31.743

显然，托管类的方法不支持 __stdcall 调用约定。因此，您需要将 WindowProc 放在非托管类中：

```
class WindowProcCallback
{
public:
    static LRESULT __stdcall WindowProc(HWND hWnd, UINT uMsg, WPARAM wParam, LPARAM lParam)
    {
        ...
    }
};

ref class Win32Demo
{
    ...
}; 
```

一个建议：打开警告，以便您收到有关此类内容的警告。如果出现警告，您将收到以下警告：

> `warning C4441: calling convention of '__stdcall ' ignored; '__clrcall ' used instead`

# php - 调用成员函数“FETCH_ASSOC”时出错 - 我的代码有什么问题？

> ID：14052731
> 
> 赞同：1
> 
> 时间：2012-12-27T09:59:30.740
> 
> 标签：php, pdo

我正在尝试连接到 PHP PDO 并对数据运行一个简单的查询，但我遇到了关于未创建对象的错误？我试图使这尽可能简单，并被建议不要创建单例数据库类，而是在需要时定义数据库 PDO，这是针对此初始（简单）查询的。

这是我得到的错误。我需要做什么来修复代码？

> 致命错误：在第 11 行调用非对象 in/home/...index.php 上的成员函数 fetch()

```
<?php

$dbhost = "localhost";
$dbname = "x";
$dbuser = "y";
$dbpass = "z";

$db = new PDO("mysql:host=$dbhost;db_name=$dbname", $dbuser, $dbpass);
$query = $db->query("SELECT * FROM tablename");

while ($row = $query->fetch(PDO::FETCH_ASSOC)){
    echo $row['field_name'],'<br>';
}
?> 
```

如果您有更好的方法来使用 php 从 mysql 表中选择数据，请告诉我。试图学习 PDO 而不是 mysqli。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T10:06:05.437

查询可能存在问题，例如拼写错误或表不存在。

Then`$query`不是[PDOStatement](http://php.net/manual/en/class.pdostatement.php)但`false`您不能调用`false->fetch()`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-27T10:06:23.147

`->query`您必须在或之间做出选择`->fetch`。你不能混合使用这两种*方法*。

[`->query()`](http://php.net/manual/en/pdo.query.php)：

```
 $sql = 'SELECT * FROM tablename';
    foreach ($db->query($sql) as $row) {
        echo $row['field_name'],'<br>';
    } 
```

[`->fetch()`](http://php.net/manual/en/pdostatement.fetch.php)：

```
$sth = $db->prepare("SELECT * FROM tablename");
$sth->execute();

while ($row = $sth->fetch(PDO::FETCH_ASSOC)) {
    echo $row['field_name'],'<br>';
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-27T10:07:56.333

有你的错字：

```
$db = new PDO("mysql:host=$dbhost;db_name=$dbname", $dbuser, $dbpass); 
```

应该：

```
$db = new PDO("mysql:host=$dbhost;dbname=$dbname", $dbuser, $dbpass); 
```

修复错字后，此代码完美运行：

```
$db = new PDO("mysql:host=$dbhost;dbname=$dbname", $dbuser, $dbpass);

$query = $db->query("SELECT * FROM wp_blogs");

while ($row = $query->fetch(PDO::FETCH_ASSOC)) {
    var_dump($row).'<br>';
} 
```

# mysql - 删除mysql中的行

> ID：14052732
> 
> 赞同：3
> 
> 时间：2012-12-27T09:59:33.053
> 
> 标签：mysql, database, jsp

我正在构建 JSP 应用程序，我想在其中对特定表执行以下操作

*   显示数据
*   删除数据

我已经完成了数据的显示，但是：

如果表没有任何主键，如何删除数据库中的一行？（删除操作不依赖于该行的任何值）

假设这里是 may 表 -->> mytemp 这里是数据

```
Name | RollNo
ABC  |  98
XYZ  |  76
ABC  |  98
XYZ  |  76 
```

此表中没有键，我想删除第 3 条记录。我怎样才能做到这一点 ？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-27T10:03:29.610

You can choose any available column you think most suitable: e.g.

```
DELETE FROM table_name WHERE column_name  = 'valuse' 
```

without column_name you can delete all rows only.

`column_name` does not has to be primary key, but all rows with `column_name = 'valuse'` will be deleted.

* * *

**EDIT**
To delete:

```
 DELETE FROM table_name WHERE Name = 'ABC' AND  RollNo  = 98; 
```

`Name` and `RollNo` may not be primary key.

Delete only third row:

```
DELETE FROM table_name  
WHERE ('ABC',98) IN ( SELECT TOP 1 Name, Rollno 
                      FROM table_name 
                      ORDER BY Name,RollNo DES) 
```

Second way: if TOP not works

```
DELETE FROM table_name  
WHERE ('ABC',98) IN ( SELECT  Name, Rollno 
                      FROM table_name 
                      ORDER BY Name,RollNo DES LIMT 1) 
```

~~**CAUTION**: it will delete one, which one I am not sure.~~

Give it a try!!

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-27T10:03:47.090

If you want to delete all records you can use

```
delete from TABLE_NAME 
```

and if you have any difference in the rows in the DB you can add `where` clause as well like

```
delete from TABLE_NAME where COL1=XXX AND/OR COL@ =YYY 
```

etc...

```
delete from TABLE_NAME where RollNo= RollNo_HERE AND Name = 'NAME_HERE' 
```

Hope this will help you

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-27T10:12:27.643

尝试这个：

```
DELETE t
FROM YourTable t
WHERE t.Name    = 'Selected Name'
  AND t.RollNo = 'Selected RollNo'; 
```

# asp.net-mvc - 如何将 SQL Server Express 链接到 MVC

> ID：14052736
> 
> 赞同：1
> 
> 时间：2012-12-27T09:59:57.613
> 
> 标签：asp.net-mvc, model-view-controller, connection-string, sql-server-express

旨在将我的页面链接到 SQL Server Express 中的现有数据库。只有一张桌子要选择。按照`NerdDinner`教程，使用 LINQ-to-SQL 设计器来执行此操作。

但是结果并没有克服它的假设，我的表`Dinner`不能直接调用，我会犯什么错误？

结果返回 *.dbml 和带有 *.edmx 的 NerdDinner。他们有什么不同？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T10:22:54.950

您必须设置连接字符串以将数据库存储在 sql server express 中。请注意，*.edmx 数据库类型将存储在本地文件系统中，可能在项目中的 App-Data 文件夹中作为数据库对象。但另一种类型，比如 *.dbml 用于 DBMS 系统，这里是 SQL server Express。您还可以通过 SQL 服务器工具将 *.edmx 类型转换为 *.dbml 类型。

查看项目根目录下的 web.config 文件。在配置中，您将看到连接字符串设置为存储在 .edmx 类型的本地文件系统中。尝试改变它。

# asp.net - 带有 asp:hyperlink 的 jquery 对话框表单

> ID：14052738
> 
> 赞同：1
> 
> 时间：2012-12-27T10:00:10.517
> 
> 标签：asp.net, jquery-ui, dialog

我在用 asp.net 表单实现 JQuery 对话框时遇到问题。当我点击`#hlChangePassword`什么都没有发生。这是我下面的代码：

```
<script type="text/javascript">

    jQuery(document).ready(function () {
        jQuery('#hlChangePassword').click(function () {
            var dlg = jQuery('div#ChangePass').dialog({
                width: 500,
                height: 500,
                modal: true,
                buttons: {},
                open: function (event, ui) {
                    $(".ui-dialog-titlebar-close").hide();
                }
            });
            dlg.parent().appendTo(jQuery("form:first"));
        });
    });

</script> 
```

html

```
<asp:HyperLink ID="hlChangePassword" 
runat="server" NavigateUrl="#">Change Password</asp:HyperLink>

<div id="ChangePass" style="display:none;">
//The content
</div> 
```

我不知道是什么问题。请帮我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T10:21:18.240

用户事件.preventDefault(); 防止回帖如下

```
 jQuery(document).ready(function () {
    jQuery('#hlChangePassword').click(function (event) {
        var dlg = jQuery('div#ChangePass').dialog({
            width: 500,
            height: 500,
            modal: true,
            buttons: {},
            open: function (event, ui) {
                $(".ui-dialog-titlebar-close").hide();
            }
        });
        dlg.parent().appendTo(jQuery("form:first"));
        event.preventDefault();

    });
}); 
```

作为`hlChangePassword`服务器控件，它会回发。为了克服这个你应该使用`event.preventDefault`.
此外，`id`由于母版页或用户控制，您正在使用可以在运行时更改的选择器。因此，如果您使用 asp.net 4.0 或更高版本，请使用服务器 ID 或静态 ID 作为链接，如下所示

```
ClientIDMode="Static"

<asp:HyperLink ID="hlChangePassword"  ClientIDMode="Static"
 runat="server" NavigateUrl="#">Change Password</asp:HyperLink> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T10:25:45.653

Bingo...
script src="http://code.jquery.com/ui/1.9.2/jquery-ui.js"> 添加上面的行，如果没有 ui.js，它将无法工作。

# c++ - 将字符串插入二维向量的指定位置

> ID：14052739
> 
> 赞同：1
> 
> 时间：2012-12-27T10:00:16.713
> 
> 标签：c++, vector

所以我想做的就是在我的向量中插入一个字符串

```
class World
{
    public:
        void writeCell(int writelocW, int writelocH, std::string input);
    private:
        std::vector<std::string> wH;
    std::vector< std::vector<std::string> > grid;
};

void World::writeCell(int writelocW, int writelocH, std::string input)
{
   wH.insert(wH.begin()+writelocH,1,input);
   grid.insert(grid.begin()+writelocW,1,wH);
} 
```

带有`writeCell`从另一个标头中读取的参数。

`"vector iterator + offset out of range"`但是当我运行它时该文件给了我一个错误，`writelocW`并且`writelocH`都设置为 1 并输入到`"Desc"`. 该错误似乎是`"+writelocH"`由`wH.insert`. 我该如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T10:05:29.133

在插入随机位置之前检查向量大小。如果向量大小小于`writelocH`您得到“超出范围”异常：

代替

```
wH.insert(wH.begin()+writelocH,1,input);
grid.insert(grid.begin()+writelocW,1,wH); 
```

和：

```
if (wH.size() > writelocH)
{
   wH.insert(wH.begin() + writelocH,1,input);
   grid.insert(grid.begin()+writelocW,1,wH);
}
else
{
   wH.insert(wH.begin(),1,input);    
   grid.insert(grid.begin(),1,wH);
 } 
```

# windows-phone-7 - 图像检索

> ID：14052740
> 
> 赞同：5
> 
> 时间：2012-12-27T10:00:17.917
> 
> 标签：windows-phone-7

Im doing App with Camera in Windows Phone. Can Any one say that How can I get Image After Clicking with Camera Capture I want to Display that Image in Other Page and I like to add Some Mater About that and than I like to Save. please any One Guide Me

# ebay-api - eBay Trading API - GetMyeBaySelling 与 GetOrders 用于获取我的已售商品

> ID：14052741
> 
> 赞同：1
> 
> 时间：2012-12-27T10:00:22.063
> 
> 标签：ebay-api

我需要获取我在 eBay 上出售的商品**以及每次销售的详细信息**（购买者、确切的送货地址、电子邮件等）。

我想知道，我应该为此使用什么：`GetMyeBaySelling`和`GetOrders`？他们似乎完全一样！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-27T10:22:27.133

使用`GetOrders`，它可以检索所有相关的订单信息。但一定要使用`Pagination`-Attribute，否则调用只会返回100个订单。

# php - Zend Framework 2 - 为模块设置模板路径

> ID：14052742
> 
> 赞同：0
> 
> 时间：2012-12-27T10:00:33.653
> 
> 标签：php, templates, controller, zend-framework2, zend-view

我google了很多，找不到答案...

我正在使用[教程骨架应用程序](http://framework.zend.com/manual/2.0/en/index.html#userguide)。它会自动在“查看/相册/相册”下包含与我的操作（如添加或索引）相对应的 html 文件。

我正在使用子模块，标准加载找不到我的 html 文件。我按照[本指南](http://samminds.com/2012/08/changing-the-view-template-view-script/)设置自定义模板路径。这适用于索引，因为这里我使用了一个`ViewModel`实例。

[但是我的添加/删除/编辑操作只返回一个像这样](http://framework.zend.com/manual/2.0/en/user-guide/forms-and-actions.html#editing-an-album)的数组。

有没有办法告诉`Zend`它应该使用不同的目录来查找视图？

PS：我也尝试过这种[injectTemplate 方法](http://ctrl-f5.net/php/custom-default-templates-in-zf2/)，但没有运气。它只是设置控制器命名空间/路径，在我的情况下是可以的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T10:59:50.327

这是一个项目特定的问题......

我用作`MasterData`顶级命名空间。在我的 module\MasterData\view 中创建目录树时，我写`masterdata`的是`master-data`. 这导致我的观点没有找到。

一个笨蛋……我知道。

# html - 需要关于 CSS 浮动的帮助

> ID：14052743
> 
> 赞同：0
> 
> 时间：2012-12-27T10:00:37.750
> 
> 标签：html, css

当段落和img都浮动时，为什么只有段落的第一行出现在左侧，而图像下方的所有其他行？这里是代码..

```
 <!DOCTYPE html>
   <html>
    <head>
   <style>
    img,p 
   {
    float:left;
   }
  </style>
  </head>

<body>
 <img src="logocss.gif" width="95" height="84" />
 <p>
 This is some text. This is some text. This is some text.
 This is some text. This is some text. This is some text.
 This is some text. This is some text. This is some text.
 This is some text. This is some text. This is some text.
 This is some text. This is some text. This is some text.

 </p> 
```

但是当只有 img 浮动时一切都很好，即所有文本都出现在左侧

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-27T10:04:26.857

[例子](http://jsfiddle.net/mtJbD/1/)

试试这个代码：

```
<img src="logocss.gif" width="95" height="84" />
 <p style="width:300px;">
 This is some text. This is some text. This is some text.
 This is some text. This is some text. This is some text.
 This is some text. This is some text. This is some text.
 This is some text. This is some text. This is some text.
 This is some text. This is some text. This is some text.

 </p>​ 
```

您的代码不起作用，因为元素 p 没有宽度

如果浮动元素没有预定义的宽度，它将占用所需和可用的水平空间，而与浮动无关。注意：一些浏览器试图在未定义宽度时将元素放在浮动元素旁边 - 通常只给非浮动元素少量空间。所以你应该总是在浮动元素上定义一个宽度。

# jquery - getscript 在 .load 函数中不起作用

> ID：14052746
> 
> 赞同：2
> 
> 时间：2012-12-27T10:00:47.183
> 
> 标签：jquery

我正在尝试使用 .load 在我的页面中加载一些内容，并且我有一些仅在加载的内容中使用的 js 文件，所以我只想在加载内容后加载这些文件。这是我的代码：

```
$("#highlight").load("content.php #" + $(this).attr('name'), function(){
                $.getScript('js/jquery-ui-1.9.2.custom.min.js');
                $.getScript('js/plugins.js');
                $.getScript('js/script2.js');
                }); 
```

此代码位于包含在主页中的 script.js 中，我需要在 content.php 之后加载 script2.js 、 plugins.js 和 jquery ui，但它似乎不起作用。提前感谢任何可以提供帮助的人。

# 编辑：

想法是让一些 jquery 函数在加载的内容中工作，对此的任何解决方案都表示赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-27T10:09:21.713

假设`load`回调被成功调用，使用[`$.getScript`](http://api.jquery.com/jQuery.getScript/)这种方式的问题是它是**异步**的，所以它们可能会被乱序执行。为了确保正确的顺序，要么[`$.ajax`](http://api.jquery.com/jQuery.ajax/)直接使用（使用`async:false`as 选项，以及`dataType: "script"`），要么在彼此的回调中链接加载（避免阻塞页面的其余脚本）：

```
$("#highlight").load("content.php#" + $(this).attr('name'), function(){
    $.getScript('js/jquery-ui-1.9.2.custom.min.js', function() {
        $.getScript('js/plugins.js', function() {
            $.getScript('js/script2.js');
        });
    });
}); 
```

# jquery - 如何在没有内存泄漏的情况下从选择元素中删除选项？

> ID：14052747
> 
> 赞同：1
> 
> 时间：2012-12-27T10:00:52.767
> 
> 标签：jquery, memory, select, memory-leaks, options

我正在尝试动态更改我的选择中的选项。我注意到，这会在 IE8 中产生内存泄漏。选项不会从内存中删除。

之后，我在 Chrome 版本中尝试我的代码。23，我也可以看到内存泄漏。我在那里展示了 2 个版本的代码。

*   jQuery 版本[jsfiddle.net/84Axu/1/](http://jsfiddle.net/84Axu/1/)

    ```
     $('#btn').click(function () {
            $('#tstSelect').empty();
            for (var i = 0; i < 10000; i++) {
                var option = $('');
                option.text(i + 1);
                option.val(i + 1);
                $('#tstSelect').append(option);
            }
        });​ 
    ```

*   纯 javascript 版本[http://jsfiddle.net/3VFMt/](http://jsfiddle.net/3VFMt/)。

    ```
     function btnClick() {
            // clear select
            var select = document.getElementById('tstSelect');
            while (select.firstChild)
                select.removeChild(select.firstChild);
            // fill select
            for (var i = 0; i < 10000; i++) {
                var option = document.createElement('option');
                option.text = i + 1;
                option.value = i + 1;
                document.getElementById('tstSelect').appendChild(option);
            }
        }; 
    ```

这两者都在 IE 和 Chrome 上提供了内存泄漏。

# c# - AC# 相当于 ACE 语法高亮

> ID：14052751
> 
> 赞同：1
> 
> 时间：2012-12-27T10:01:03.810
> 
> 标签：c#

> **可能重复：**
> [有人知道我可以嵌入到 WPF 窗口或 Windows 窗体中的代码编辑器吗？](https://stackoverflow.com/questions/394751/anyone-know-a-code-editor-i-can-embed-in-a-wpf-window-or-windows-forms)

我正在寻找一个与 HTML/JavaScript 语法荧光笔 ACE 相当的 C#，可在此处找到[http://ace.ajax.org](http://ace.ajax.org)。我对任何方法都持开放态度——组件、库——它必须是 WPF；如果它可以支持 C 语言，html，css 等，那就太好了。

提前致谢

# php - 如何控制用户的帖子？

> ID：14052762
> 
> 赞同：-3
> 
> 时间：2012-12-27T10:01:42.313
> 
> 标签：php, mysql

请看图片： ![在此处输入图像描述](../Images/af3dc0573a43e7fa261b27857dab83bd.png)

这是一个简单的论坛页面。如果他/她刚刚注册，任何人都可以打开和发布新主题。但现在我想控制我的用户。我希望如果有人打开一个新主题，它不会直接发布在我的网站上。首先，它必须提交给管理员才能获得批准。但我找不到任何线索来做这件事。只是与我分享这个概念，我会自己做。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-27T10:06:31.927

您可以简单地`approved`在数据库中添加一个默认设置为的标志，`0`一旦批准设置为`1`. 仅列出已批准的主题 ( `WHERE approved = 1`) 并可编辑。未经批准的主题列在管理菜单中，可以接受也可以不接受（在数据库中编辑该标志）。

# iphone - 如何将图像发布到 Web 服务

> ID：14052763
> 
> 赞同：-1
> 
> 时间：2012-12-27T10:01:43.980
> 
> 标签：iphone, objective-c, ios, xcode

在我的项目中： -

1）单击相机中的图片（不要保存）。

2）显示带有 2 个按钮发布和取消的裁剪图像。发布按钮发布图像和取消按钮丢弃图像。它看起来像这样。 ![第二](../Images/e49e38fd64d7c4c8abca2ff5e3410331.png)

我不知道如何发布相机捕获图像。我在互联网上搜索了很多代码，但没有找到任何可以帮助我的代码。

我尝试了这些链接上给出的代码..

[第一](http://www.iriphon.com/2011/11/09/ios-uploading-an-image-from-your-iphone-to-a-server/)，[第二](http://code.developwithus.com/iphone/upload-image-and-data-with-iphone-sdk/)，[第三](https://stackoverflow.com/questions/5319823/newbie-having-issues-with-uploading-a-file-using-asihttprequest)，还有很多其他的。

我希望有人会帮助..如何发布？谢谢。

```
-(IBAction)sendRequest:(id)sender {

     #define DataDownloaderRunMode @"myapp.run_mode" 

        NSMutableURLRequest *request = [[NSMutableURLRequest alloc] initWithURL:url 
                                       cachePolicy:NSURLRequestUseProtocolCachePolicy 
                                       timeoutInterval:60]; 

        [request setHTTPMethod:@"POST"]; 

        NSString *boundary = @"----WebKitFormBoundarycC4YiaUFwM44F6rT";

        NSString *contentType = [NSString stringWithFormat:@"multipart/form-data; boundary=%@",boundary];

        [request addValue:contentType forHTTPHeaderField: @"Content-Type"];

        NSMutableData *body = [NSMutableData data];

        [body appendData:[[NSString stringWithFormat:@"\r\n--%@\r\n",boundary] dataUsingEncoding:NSUTF8StringEncoding]];

        [body appendData:[[NSString stringWithString:@"Content-Disposition: form-data; name="attachment[file]";
        filename="picture.png"\r\n"] dataUsingEncoding:NSUTF8StringEncoding]];

        [body appendData:[[NSString stringWithString:@"Content-Type: image/png\r\n\r\n"] dataUsingEncoding:NSUTF8StringEncoding]];

        [body appendData:[NSData dataWithData:imageData]];

        [body appendData:[[NSString stringWithFormat:@"\r\n--%@--\r\n",boundary] dataUsingEncoding:NSUTF8StringEncoding]];

        [request setHTTPBody:body];

        NSURLConnection *connection = [[NSURLConnection alloc] initWithRequest:request 
                                                               delegate:self 
                                                               startImmediately:NO]; 

        [connection scheduleInRunLoop:[NSRunLoop currentRunLoop] forMode:DataDownloaderRunMode]; 

        [connection start];
} 
```

并将其连接到发布按钮..

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-27T10:10:40.803

**更新：**

```
[body appendData:[[NSString stringWithString:@"Content-Disposition: form-data; name=\"picture\"; filename=\"picture.png\"\r\n"] dataUsingEncoding:NSUTF8StringEncoding]]; 
```

在这里，您用于存储图像的数据库字段名称`picture`然后在参数中写入字段名称`name`...

使用此代码...

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-27T10:16:05.517

```
// add image data
NSData *imageData = UIImageJPEGRepresentation(imageToPost, 1.0);
if (imageData) {
    [body appendData:[[NSString stringWithFormat:@"--%@\r\n", boundary] dataUsingEncoding:NSUTF8StringEncoding]];
    [body appendData:[[NSString stringWithFormat:@"Content-Disposition: form-data; name=\"%@\"; filename=\"image.jpg\"\r\n", FileParamConstant] dataUsingEncoding:NSUTF8StringEncoding]];
    [body appendData:[[NSString stringWithString:@"Content-Type: image/jpeg\r\n\r\n"] dataUsingEncoding:NSUTF8StringEncoding]];
    [body appendData:imageData];
    [body appendData:[[NSString stringWithFormat:@"\r\n"] dataUsingEncoding:NSUTF8StringEncoding]];
} 
```

按照这个答案[链接](https://stackoverflow.com/questions/8042360/nsdata-and-uploading-images-via-post-in-ios)

或者您可以为此使用 ASIHTTP 类

```
ASIFormDataRequest *request = [ASIFormDataRequest requestWithURL:[NSURL URLWithString:@"http://URL/Service.asmx/RegisterClient?"]];
            request.delegate=self;

            encodedImage = UIImagePNGRepresentation(imgRef);

            [[NSUserDefaults standardUserDefaults]setObject:UIImagePNGRepresentation(imgRef) forKey:@"userImage"];

            str =[Base64 encode:encodedImage];

           [request setPostValue:email.text forKey:@"Email"];

            [request setPostValue:name.text forKey:@"FName"];
            [request setPostValue:str forKey:@"UserImage"];
            [request setPostValue:dob.text forKey:@"dob"];
            [request setPostValue:phoneNumber.text forKey:@"Phone"];
            [request setPostValue:ggg.text forKey:@"Gender"];
            [request setPostValue:address.text forKey:@"Address"];
            [request setPostValue:interest.text forKey:@"Interest"];

            [request startAsynchronous]; 
```

[ASIHTTPRequest 文档](http://allseeing-i.com/ASIHTTPRequest/)

# c# - 从类的属性返回 2 个值

> ID：14052767
> 
> 赞同：0
> 
> 时间：2012-12-27T10:01:57.750
> 
> 标签：c#

> **可能重复：**
> [如何从 C# 中的函数返回多个值？](https://stackoverflow.com/questions/748062/how-can-i-return-multiple-values-from-a-function-in-c)

想象一下，我们有一个属性，它得到一个值`10-1685`，我想在一个类中添加另一个属性，将这两个值作为单独的值返回。我怎样才能实现呢？

```
 public string UserName { get; set; }

    public string UserNameSeparated
    {
        get { Username.Split('-');
        }
        set
        {
            ...What do do here??
        }
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-27T10:04:06.203

将属性的返回类型更改为字符串数组：

```
public string UserName { get; set; }

public string[] UserNameSeparated
{
    get { Username.Split('-'); }
    set
    {
        UserName = String.Join("-", value);
    }
} 
```

用法：

```
foo.UserName = "10-1685";
string[] names = foo.UserNameSeparated;
// names[0] = "10";
// names[1] = "1685";
foo.UserNameSeparated = new string[] { "15", "42" };
// foo.UserName = "15-42" 
```

但考虑对名称的两个部分都有属性。您将能够随时计算全名，并且您将处理**好的命名属性**而不是元组或数组索引（支持地狱）：

```
public string FirstName { get; set; }
public string LastName { get; set; }

public string UserName
{
    get { return String.Format("{0}-{1}", FirstName, LastName); }
    set 
    {
        // check if value format valid
        var names = value.Split('-');
        FirstName = names[0];
        LastName = names[1];
    }
} 
```

只需比较（您可以提供更具描述性的名称，更好地描述您的数据）：

```
foo.FirstName
foo.LastName 
```

和：

```
foo.UserNameSeparated.Item1
foo.UserNameSeparated.Item2 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-27T10:04:12.487

您可以使用元组。

这个问题之前已经回答过：[如何从 C# 中的函数返回多个值？](https://stackoverflow.com/questions/748062/how-can-i-return-multiple-values-from-a-function-in-c)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-27T10:40:54.330

在 Jamie 引用的帖子中，有一个帖子的引用是基于：[Returning multiple values from a C++ function](https://stackoverflow.com/questions/321068/returning-multiple-values-from-a-c-function)

那里的“流行”答案是使用touple。但是，您应该注意 Bill K、Fred Larson 和 Jonathan Leffler 的回答，它们都指出了实现这一点的更好方法是使用类或结构。

还可以查看 Microsoft 如何在 .net 框架中构建自己的代码。我从未见过他们使用 touple 作为任何东西的返回值。我认为这本身就是一个很好的迹象，说明哪种做法更好。

# drupal-7 - How to create multiple nivo slider blocks in drupal 7?

> ID：14052768
> 
> 赞同：1
> 
> 时间：2012-12-27T10:01:58.413
> 
> 标签：drupal-7, block, nivo-slider

I want to create multiple nivo slider blocks in drupal 7\. By default there is just a single nivo slider block available on enabling nivo slider module?

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-16T14:40:51.310

[您可以使用MultiBlock](http://drupal.org/project/multiblock)模块创建多个 nivo 滑块。但是您不能为该块设置不同的幻灯片或不同的设置，因为它是该块的副本

# java - 一个合适的模式而不是返回空值

> ID：14052772
> 
> 赞同：7
> 
> 时间：2012-12-27T10:02:27.600
> 
> 标签：java, design-patterns, optimization

什么是在这里使用的好模式？

我不想返回空值，那感觉不对。

**另一件事是，如果我想返回导致它为空的原因怎么办？如果调用者知道它为什么为空，它可以做一些额外的事情，所以我希望调用者知道它并以这种方式行事**

```
Public CustomerDetails getCustomerDetails(){
   if(noCustomer){    
     ..log..etc..
     return null;
   }

   if(some other bad weird condition){    
     ..log..etc..
     return null;
   }

   CustomerDetails details= getCustomerDetailsFromSomewhere();

   if (details!=null){
      return details;
   }
   else {
     ..log..etc..
     return null;
   }

} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-27T10:07:13.010

我认为你有3个主要选择：

*   如果 null 是有效状态，我认为返回 null 没有问题
*   如果 null 是无效状态，则应抛出异常
*   或者使用[Null 对象模式](http://en.wikipedia.org/wiki/Null_Object_pattern)

如果您使用的是 googles [Guava 库](http://code.google.com/p/guava-libraries/)，您也可以使用[Optional](http://docs.guava-libraries.googlecode.com/git/javadoc/com/google/common/base/Optional.html)类。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-27T10:21:37.303

Java 中更自然的方法是在错误条件下抛出异常。

```
public CustomerDetails getCustomerDetails(){
   if(noCustomer){    
     ..log..etc..
     throw new NoSuchCustomer(customerName);
   }

   if(some other bad weird condition){    
     ..log..etc..
     throw new IllegalStateException("some other bad weird condition occurred");
   }

   CustomerDetails details= getCustomerDetailsFromSomewhere();

   if (details==null)
      throw new IllegalStateException("Failed to get customer details for "+ customerName);

   return details;
} 
```

该方法`getCustomerDetailsFromSomewhere()`可以抛出异常而不是返回 null。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-27T10:05:55.780

试试番石榴的可选。请参阅这篇关于避免 null 的文章：[http ://code.google.com/p/guava-libraries/wiki/UsingAndAvoidingNullExplained](http://code.google.com/p/guava-libraries/wiki/UsingAndAvoidingNullExplained)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-27T10:07:09.280

使用[谷歌番石榴可选](http://docs.guava-libraries.googlecode.com/git/javadoc/com/google/common/base/Optional.html)。

这会有所帮助。

> 程序员使用 null 的许多情况是为了表示某种缺失：可能存在值、没有值或找不到值。例如，当没有找到某个键​​的值时，Map.get 返回 null。
> 
> Optional 是一种用非空值替换可为空的 T 引用的方法。Optional 可能包含非空 T 引用（在这种情况下，我们说引用是“存在的”），或者它可能不包含任何内容（在这种情况下，我们说引用是“不存在的”）。从来没有说它“包含空值”。

```
Optional<Integer> possible = Optional.of(5);
possible.isPresent(); // returns true
possible.get(); // returns 5 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-12-27T10:08:04.343

你可以试试；

```
CustomerDetails details = setDetailsToEmpty(); 
```

或一些等价物。

您仍然需要检查空客户详细信息或空客户详细信息。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-12-27T10:12:36.387

如果您真的不希望 null 创建一个特殊的 CustomerDetails 对象

```
...
        public static final CustomerDetails EMPTY_CUSTOMER_DETAILS = new CustomerDetails();
...    
        public CustomerDetails getCustomerDetails(){
            ...
            if (details!=null){
                return details;
            }
            ...
            return EMPTY_CUSTOMER_DETAILS; 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-12-27T10:15:11.533

如果您的意思是`null`不解释其状态，您可以`CustomerDetails`使用另一个可以提供更多详细信息的类进行包装。例如：

```
class Feedback()
{
    private CustomerDetails result;
    private int status;

    public static final int STATUS_OK = 0;
    public static final int STATUS_NULL = 1;
    public static final int STATUS_NO_CUSTOMER = 2;
    public static final int STATUS_BAD_CONDITION = 3;

    public Feedback(CustomerDetails result, int status)
    {
        this.result = result;
        this.status= status;
    }

    public CustomerDetails getResult(){return result;}
    public int getStatus(){return status;}
} 
```

并更改您的方法：

```
Public Feedback getCustomerDetails()
{
   if(noCustomer)
   {
       ..log..etc..
       return new Feedback(null, Feeback.STATUS_NO_CUSTOMER);
   }

   if(some other bad weird condition)
   {
       ..log..etc..
       return new Feedback(null, Feeback.STATUS_BAD_CONDITION);
   }

   CustomerDetails details = getCustomerDetailsFromSomewhere();

   if(details != null)
   {
        return new Feedback(details, Feeback.STATUS_OK);
   }
   else
   {
       ..log..etc..
       return new Feedback(null, Feeback.STATUS_NULL);
   }
} 
```

然后您可以通过 获取状态`feedback.getStatus()`。

# erlang - comparison using if with erlang

> ID：14052773
> 
> 赞同：0
> 
> 时间：2012-12-27T10:02:34.327
> 
> 标签：erlang

I work with erlang

I want to make a function that will check if the Cin and Id is not null

I tried with:

```
if Cin /= null && Id/=null -> {ok,Cin et Id sont différents de null};
     true -> {nok,Cin et Id sont  null}

    end. 
```

I know that the notion of '&&' does not exist in erlang

but I can not find the equivalent of this notion in erlang

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-27T10:04:57.003

在 Erlang 中，使用`andalso`代替`&&`：

```
if Cin /= null andalso Id/=null -> {ok,Cin et Id sont différents de null}; 
```

的使用`andalso`是短路的，等效于`&&`。正则`and`运算符总是计算表达式的两边并且不会短路。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-12-27T13:51:03.740

通常，最好使用匹配：

```
case {Cin, Id} of
  {null, _} -> cin_null;
  {_, null} -> id_null;
  {_, _}    -> not_null
end 
```

但也要注意，你可以完全不检查而侥幸逃脱。在函数头中添加一个守卫：

```
my_func(Cin, Id) when is_integer(Cin), is_binary(Id) ->
  do_something. 
```

如果这不匹配，您就会崩溃，但这通常是您期望在代码库中发生的情况。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2018-06-30T17:56:56.983

您可以创建函数并使用模式匹配：

```
is_null(null, null) ->
  true;
is_null(_, _) ->
  false. 
```

在控制台中：

```
1> c(some_mod).
{ok,some_mod}
2> some_mod:is_null(null, 1).
false
3> some_mod:is_null(1, 1).   
false
4> some_mod:is_null(null, null).
true 
```

# database - How to store a stack or long array in database?

> ID：14052774
> 
> 赞同：1
> 
> 时间：2012-12-27T10:02:35.920
> 
> 标签：database, algorithm, data-structures, stack, tree-traversal

I am implementing a depth first tree traversal code a large tree. It's single traversal process can span several days because of the long processing time at each node and in between the system might crash or shutdown.

Therefore I want to make the whole process resumable if it the process stops in between for some reason. For that reason I am planning make the whole process backed by persistent datastore which essentially stores the state of the process.

As I figured out that for depth first traversal I will need a Stack type of data structure and which can be realized through a linked list type of array implementation. So my question is if there is some datastore which provides the ability to persist large array to maintain the order of the entities to represent a stack by it. Or if there is some other way through which I can maintain the state of my traversal in a persistent storage.

Thanks.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T11:38:07.117

恕我直言：您可以使用链接列表实现自定义的堆栈行为类。这个自定义类应该是可序列化的。间歇性地存储对象的状态。因此，即使系统崩溃，您也会丢失一些数据并通过从持久存储中反序列化对象来重新创建完整的结构。

# javascript - How to get Id of an element without getElementById

> ID：14052778
> 
> 赞同：2
> 
> 时间：2012-12-27T10:02:44.513
> 
> 标签：javascript

lets say we got this html scenario:

Please note:

The forms "action" and "method" attributes are omitted on purpose. The "form" tag is just here because in my real project, I have a similar scenario and having the form around all those fields may help in handling the request.

```
<form id="form1">
    <div id="wrapperDiv">
        <div id="div1">
            <input type="text" id="searchField"/>
        </div>
        <div id="div2">
            <ul>
                <li><a href="javascript:void(0)" onclick="callFunction(this);">Hello</a></li>
            </ul>
        </div>
    </div>
</form>

<script type="text/javascript">
    function callFunction(x)
    {
         //When invoked this function sets the value of "searchField" to the respective link tag innerHTML
         //to set this you cant use something like:
         // var y = document.getElementById("searchField");
    }
</script> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-27T10:15:35.540

要获取文本输入元素的值，我们可以使用文本输入对象的 value 属性：`text_val = oText.value;`

例如，如果我们有以下文本输入元素：

```
<input type="text" name="name" id="txt_name" size="30" maxlength="70"> 
```

我们可以像这样访问元素的值：

```
name = oForm.elements["name"].value; 
```

要获得对文本输入元素的引用，下面是一些示例代码：

`oText = oForm.elements["text_element_name"];`或者

```
oText = oForm.elements[index]; 
```

在上面的代码中，“index”是元素在从 0 开始的元素数组中的位置，oForm 是使用 document.forms 集合获得的表单对象引用：

```
oForm = document.forms[index]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-27T10:19:04.663

You can make it easy if using jQuery. You can use:

```
function callFunction(x) {
    var y = $(this).closest('form').find('input[type="text"]:first');
    y.val(this.innerHTML);
} 
```

to get the search field.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-27T10:09:19.570

如果您确定 div 中只有一个输入元素：

```
var parent = document.getElementById('div1');
var element = parent.GetElementsByTagName('input')[0]; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-27T10:28:40.993

你可以使用 var y= document.getElementsByTagName("input");

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-27T10:53:28.670

一种可能性如下：

```
function findIndex(el, container) {
    // we can't do anything without a node to work on
    if (!el) {
        return false;
    }
    else {
        // container must be a node, if no container is supplied the body is used
        container = container || document.body;
        // finds all elements of the same tagName as the node
        // (el) passed to the function that are within the container node
        var els = container.getElementsByTagName(el.tagName);
        // iterates through each of these nodes
        for (var i = 0, len = els.length; i < len; i++) {
            // sets the 'data-index' attribute to be equal to 'i'
            els[i].setAttribute('data-index', i);
        }
        // returns the generated index from the 'el' node passed into the function
        return el.getAttribute('data-index');
    }
}

function callFunction(el) {
    // if no el passed in, we stop here
    if (!el) {
        return false;
    }
    else {
        // sets the 'i' variable equal to the value of the 'data-index' attribute
        // if it exists, if it doesn't then we generate it
        var i = el.dataIndex ? el.getAttribute('data-index') : findIndex(el, document.forms.form1);
        // if an index is found (the 'i' variable) we set the value of
        // the 'input' with that index to be equal to the text contained
        // within the clicked link
        if (i) {
            document.getElementsByTagName('input')[i].value = (el.textContent || el.innerText);
        }
        // if no index is returned then we exit here
        else {
            return false;
        }
    }
}

var links = document.getElementsByTagName('a');

for (var i = 0, len = links.length; i < len; i++) {
    links[i].onclick = function(e) {
        e.preventDefault();
        callFunction(this);
    }
}​ 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/yTLjM/2/)。

*这确实假设在第n*^个 `input`和第*n*^个 `a`元素之间存在直接关系。

我也不再使用内联事件处理程序，以使维护更容易（并且 JavaScript 不那么突兀）。第一次调用`callFunction()`给出所有`a`元素（并且可以指定父/祖先以将索引限制为仅`a`给定祖先节点/元素内的那些元素），随后的调用使用生成的`data-index`属性（而不是重新生成索引） .

参考：

*   [`Element.getAttribute()`](https://developer.mozilla.org/en-US/docs/DOM/element.getAttribute).
*   [`Element.getElementsByTagName()`](https://developer.mozilla.org/en-US/docs/DOM/element.getElementsByTagName).
*   [`Element.setAttribute()`](https://developer.mozilla.org/en-US/docs/DOM/element.setAttribute).

# php - 如何根据重复区域中该行的相应 $value 将 css 类应用于 a

> ID：14052780
> 
> 赞同：0
> 
> 时间：2012-12-27T10:02:58.113
> 
> 标签：php, css

我有以下代码：

```
 <table>
  <tr>
   <td><?php>echo $recordset['columnname1']; ?></td>
   <td><?php>echo $recordset['columnname2']; ?></td>
   <td><?php>echo $recordset['columnname3']; ?></td>
  </tr>
 </table> 
```

如何根据`$recordset['columnname1']`using的文本值向整行添加一个类`PHP`？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-27T10:05:58.720

是错字。。

就像：

```
<table>
    <tr>
       <td><?php echo $recordset['columnname1']; ?></td>
                ^------------- Removed > from here. It was incorrect syntax.
       <td><?php echo $recordset['columnname2']; ?></td>
       <td><?php echo $recordset['columnname3']; ?></td>
    </tr>
</table> 
```

如果 的值`$recordset['columnname1']`是你的类名并且你想连续应用它，那么你需要`class`给`<tr>`

```
<table>
    <tr class="<?php echo $recordset['columnname1']; ?>">
        <td>..</td>
    </tr>
    <tr class="<?php echo $recordset['columnname2']; ?>">
        <td>..</td>
    </tr>
</table> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-27T10:06:48.983

试试这个：

```
<table>
   <tr class="<?php echo $recordset['columnname1'] ?>">
       ......
   </tr>
</table> 
```

然后它将类添加到那些 td 的整行。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-27T10:19:51.090

简单的放一个`if`条件

```
<table>
  <tr <?php if($recordset["columnname1"] == "myvalue") echo 'class="myclass"'; ?> >
   <td><?php echo $recordset['columnname1']; ?></td>
   <td><?php echo $recordset['columnname2']; ?></td>
   <td><?php echo $recordset['columnname3']; ?></td>
  </tr>
</table> 
```

# javascript - 如何在 div 或 iframe 或 span 中显示完整的 html 内容

> ID：14052792
> 
> 赞同：-1
> 
> 时间：2012-12-27T10:03:49.257
> 
> 标签：javascript, jquery, html, css, jquery-plugins

我在变量中有一个 html 内容，例如

```
var content='<p>long content.....</p><p>long content......</p><img src="abc.jpg" />' 
```

如何在没有滚动条的小 div 或 span 或 iframe 内完全显示此内容。

我想显示内容的预览。

使用 iframe 时会显示滚动条。

任何解决方案或解决方法都可以在小 div 或 iframe 中显示整个内容。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T11:18:14.490

您可以使用 CSS 在 div 中显示预览。为此提及 50% 的比例（或任何适合您的值）

```
transform :scale(0.5); // For Mozilla, Chrome etc 
```

对于 IE，您可以使用 ZOOM 属性。

```
<body style="zoom: 50%">
   CONTENT HERE
</body> 
```

另一种选择是使用**zoomooz.js**

[http://janne.aukia.com/zoomooz/](http://janne.aukia.com/zoomooz/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T10:09:08.170

我假设一个小 div 类似于大小为 500 x 500px 的 div。所以无论如何，只要你的内容大于那个大小，它就会有一个滚动条。没有滚动条就不可能显示***全部***内容。顺便说一句，你的问题应该更清楚一点 - 在一个地方你说*preview*，然后你说*整个*内容。

无论如何，为了获得合适的预览，您可以估计（或“试错式”估计）您的内容中有多少字符适合该小预览 div。如果你有 5000 个字符，你可以裁剪你的内容，比如：

```
var cropped_content = content.substring(0, 5000);

small_preview_div.innerHtml = cropped_content; 
```

# hadoop - when to use Pig and when to use java for Mapreduce?

> ID：14052796
> 
> 赞同：3
> 
> 时间：2012-12-27T10:04:01.873
> 
> 标签：hadoop

As per my knowledge,we can use pig for Mapreduce.And also java can be used for it.Can you please explain me in what scenarios which one to be used?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-27T14:11:13.960

如果您*可以*在 Pig（或 Hive）中执行，请在 Pig（或 Hive）中执行。

否则，请在 Java MapReduce 中执行此操作。

* * *

猪的好处：

*   像 CSV 这样的结构化数据真的很容易加载和使用
*   不比Java慢多少
*   不易出现 Java 级错误
*   更容易阅读和写作
*   无需编译：更易于维护，更易于部署

* * *

有一些事情你可能一开始认为你不能在 Pig 中做并且想要使用 Java 来做，但是一旦你对它有了更多的了解，你就可以在 Pig 中做：

*   [您可以用 Java 编写用户定义的加载器](http://pig.apache.org/docs/r0.10.0/udf.html#load-store-functions)。无论如何，您都将编写一些 Java 来解析这种复杂的数据格式，那么为什么不在 Pig Loader 中进行呢？
*   嵌套[`map`和`bag`数据类型](http://pig.apache.org/docs/r0.10.0/basic.html#data-types)可以很好地模拟分层数据结构，但您可能必须编写大量 UDF。
*   您可以[在 Pig 中使用 Java MapReduce](http://pig.apache.org/docs/r0.10.0/basic.html#mapreduce)。这使您可以在 Pig 中进行艰苦的操作，而在其他地方进行更简单的操作。

这里有一些，但你明白了。Pig 是非常可定制的，通常您最终会编写更少的 Java。

* * *

基本的东西很容易。我们可以做一些事情，比如分层数据结构和自定义加载。好的，那还剩下什么？

*   分区器的特殊用途来做 MapReduce 不打算做的事情。
*   非常讨厌的数据格式或完全非结构化的数据（视频、音频、原始人类可读文本）
*   在 DistributedCache 中做复杂的操作（基本的事情可以用[`JOIN`and`USING 'replicated'`](http://pig.apache.org/docs/r0.10.0/basic.html#join-inner)来完成）

希望其他人可以在评论中添加他们在 Pig 中无法做到的事情。

# api-key - Did anybody receive a Google Map APIKey for IOS?

> ID：14052801
> 
> 赞同：4
> 
> 时间：2012-12-27T10:04:11.940
> 
> 标签：api-key, google-maps-sdk-ios

I have applied for APIKey of google map for IOS several times at this site: [https://developers.google.com/maps/ios-access](https://developers.google.com/maps/ios-access), but they did not reply at all. I even don't know why I did not receive the APIKey.

Does anybody have met this problem and figured it out? Or any suggestions? Thanks very much!

# android - Bluetooth android remote PC

> ID：14052803
> 
> 赞同：2
> 
> 时间：2012-12-27T10:04:24.647
> 
> 标签：android, bluetooth

I have a project with android remote PC using Bluetooth to use android phone as a mouse or keyboard.

However the challenge is that PC don't install any server software, it just accepts the request to connect from android phone.

which library android support for this and what component in PC that smartphone send control signal to ?

Thanks.

# c++ - 将唯一元素从 std::vector 插入到 std::set

> ID：14052806
> 
> 赞同：2
> 
> 时间：2012-12-27T10:04:39.220
> 
> 标签：c++, stl

我有一个名为 的类`Point`，用于存储 x 和 y 双精度值。我有一个包含重复值的`std::vector`of s。`Point`我正在尝试计算此向量中唯一项目的数量。

我想既然`std::set`只有独特的对象，创建一个`set`from`vector`会给我独特的价值。但我没有得到正确的结果。我已经重载了相等运算符。但仍然重复的值被插入到`set`.

目前的结果如下..

```
10,10 repetitions - 1
10,10 repetitions - 1
20,20 repetitions - 1
20,20 repetitions - 1 
```

我期待...

```
10,10 repetitions - 2
20,20 repetitions - 2 
```

任何线索我错了？完整代码如下。

**点.h 文件**

```
#ifndef POINT_H
#define POINT_H
class Point
{
public:
    Point(double x, double y);
    double getX();
    double getY();

    Point(const Point &other);

    bool operator == (const Point& p );
    bool operator != (const Point& p );

private:
    double _x;
    double _y;
};
#endif // POINT_H 
```

**点.cpp 文件**

```
#include "point.h"

Point::Point(double x, double y)
{
    _x = x;
    _y = y;
}

Point::Point(const Point &other)
{
    _x = other._x;
    _y = other._y;
}

double Point::getX()
{
    return _x;
}

double Point::getY()
{
    return _y;
}

bool Point::operator == ( const Point& p )
{
    return ( (_x  == p._x ) && (_y == p._y));
}

bool Point::operator != ( const Point& p )
{
    return !((*this) == p );
} 
```

**main.cpp 文件**

```
#include <iostream>
#include <vector>
#include <set>
#include "Point.h"
using namespace std;

int main()
{
    std::vector <Point*> pointsVector;
    pointsVector.push_back(new Point(10,10));
    pointsVector.push_back(new Point(10,10));
    pointsVector.push_back(new Point(20,20));
    pointsVector.push_back(new Point(20,20));

    std::set<Point*> uniqueSet( pointsVector.begin(), pointsVector.end() );

    std::set<Point*>::iterator it;
    for (it = uniqueSet.begin(); it != uniqueSet.end(); ++it)
    {
        Point* f = *it; // Note the "*" here
        int result = std::count( pointsVector.begin(), pointsVector.end(), f );
        cout << f->getX() << "," << f->getY() << " repetitions - " << result << endl;
    }

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-27T10:06:44.820

你所有的元素都是不同的，因为你：

1）使用指针，因此您必须传递一个自定义比较器，该比较器比较指针以`Point`考虑它们指向的内容。

2）假设`std::set`使用`operator ==`或`operator !=`实际上它使用`operator <`.

我会有一个集合`Point`而不是`Point*`. 你有什么理由使用指针而不是对象吗？如果没有，则使用对象。

# c# - 如何检测碰撞不依赖于 2D 图片的尺寸

> ID：14052810
> 
> 赞同：1
> 
> 时间：2012-12-27T10:04:58.867
> 
> 标签：c#, visual-studio, visual-studio-2008, xna

我正在尝试在 xna 中制作一个小型 2d 游戏。

好吧，问题来了：

如何检测两个组件发生碰撞看下图：

![在此处输入图像描述](../Images/200c7f548744458e267f0133c61010eb.png) 上面的组件是2个PNG组件格式

我成功地将这些组件放入和移动到我的游戏中。

现在我想在它们碰撞时检测这些组件。我也制作了碰撞代码，但这一切都基于图片的尺寸，所以如果按像素碰撞没有颜色，但是它们包括图片之间的尺寸。（我的意思是就像基于图片尺寸的碰撞半径）和在像素颜色之间的碰撞之前，它们将被视为碰撞

好吧，我该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-27T15:06:29.483

更改您的碰撞代码以返回可能发生碰撞的矩形，然后使用该区域检查每个像素的每个 alpha 值。如果您想更详细地查找它，则称为逐像素碰撞检测。

编辑：

```
//Load the texture from the content pipeline
Texture2D texture = Content.Load<Texture2D>("Your Texture Name and Directory");

//Convert the 1D array, to a 2D array for accessing data easily (Much easier to do            
Colors[x,y] than Colors[i],because it specifies an easy to read pixel)
Color[,] Colors = TextureTo2DArray(texture); 
```

而 TextureTo2DArray() 是

```
Color[,] TextureTo2DArray(Texture2D texture)
{
    Color[] colors1D = new Color[texture.Width * texture.Height]; //The hard to read,1D array
    texture.GetData(colors1D); //Get the colors and add them to the array

    Color[,] colors2D = new Color[texture.Width, texture.Height]; //The new, easy to read 2D array
    for (int x = 0; x < texture.Width; x++) //Convert
        for (int y = 0; y < texture.Height; y++)
            colors2D[x, y] = colors1D[x + y * texture.Width];

    return colors2D;
} 
```

# c# - 在 C# 中使用反射设置索引属性的值

> ID：14052812
> 
> 赞同：10
> 
> 时间：2012-12-27T10:04:59.443
> 
> 标签：c#, reflection

我有一堂课

```
ObservableCollection<int> 
```

作为属性，我正在尝试更改该类实例的该属性内的值。这是我拥有的代码，它得到了 TargetException：

```
object[] index = null;
var originalPropertyName = propertyName;
if (propertyName.Contains("[") && propertyName.Contains("]"))
{
    index = new object[1];
    index[0] = Convert.ToInt32(propertyName.Split('[')[1].Split(']')[0]);
    propertyName = propertyName.Split('[')[0];
}
PropertyInfo pi = item.GetType().GetProperty(propertyName);
PropertyInfo opi = item.GetType().GetProperty(originalPropertyName);
Type pType = index != null ? pi.PropertyType.GetGenericArguments()[0] : pi.PropertyType;
if (pi != null)
{
    object convertedValue = Convert.ChangeType(value, pType);
    if (index == null)
    {
        item.GetType().GetProperty(propertyName).SetValue(item, convertedValue, null);
    }
    else
    {
        //PropertyInfo ipi = pi.PropertyType.GetProperties().Single(p => p.GetIndexParameters().Length > 0);
        //var collection = pi.GetValue(item, index);
        //collection.GetType().GetProperty("Value").SetValue(collection, convertedValue, null);
        var _pi = pi.PropertyType.GetProperty("Item");
        _pi.SetValue(pi, convertedValue, index);
    }
} 
```

上面没有显示 propertyName 是如何获得的，但是对于索引属性，它以“IndexedProperty[10]”的形式开始其生命周期。

在“其他”之后的评论中，您可以通过阅读其他一些 stackoverflow 帖子和其他论坛上有关如何执行此操作的信息来查看我尝试过的其他事情，但到目前为止我还失败了。有任何想法吗？

将属性转换为 ObservableCollection 是不可行的，因为我希望它是动态的。

整个事情的概念是通过更新每个实例的正确属性来拥有一个数据绑定的 DataGrid 并让粘贴正常工作，无论这些属性是否被索引。非索引属性工作正常，但我无法让 ObservableCollection 工作。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-12-27T10:11:21.753

具有`ObservableCollection<int>`as 属性的类*实际上并不*具有传统意义上的索引器的索引属性。它只是有一个非索引属性，它*本身*有一个索引器。因此，您需要使用`GetValue`to start with（不指定索引），然后在结果上获取索引器。

基本上，您需要记住：

```
foo.People[10] = new Person(); 
```

相当于：

```
var people = foo.People; // Getter
people[10] = new Person(); // Indexed setter 
```

看起来你*几乎*已经有了这个注释掉的代码：

```
//var collection = pi.GetValue(item, index);
//collection.GetType().GetProperty("Value").SetValue(collection, convertedValue, null); 
```

...但是您在错误的位置应用了索引。你想要（我认为 - 问题不是很清楚）：

```
var collection = pi.GetValue(item, null);
collection.GetType()
          .GetProperty("Item") // Item is the normal name for an indexer
          .SetValue(collection, convertedValue, index); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T10:15:13.900

试试这个，我不确定它是否会起作用

```
_pi.SetValue(pi, convertedValue, new object[] { (int) 0 }); 

//where 0 is the index in which you want to insert the value, in this case to index 0 
```

# php - 如何从本地机器导出存储过程并导入服务器？

> ID：14052814
> 
> 赞同：4
> 
> 时间：2012-12-27T10:05:19.960
> 
> 标签：php, mysql, stored-procedures, phpmyadmin, xampp

我在本地 phpmyadmin 中编写了十几个存储过程。我想将它与表格一起导出到我的服务器。有没有办法做到这一点？请帮忙。

提前致谢..

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-27T10:14:48.527

在导出数据库时在 phpmyadmin 中选择自定义，然后勾选添加`procedures/events/triggers`选项

或者

使用以下命令

```
mysqldump -u root -p db_name --routines --events --triggers > file.sql 
```

欲了解更多信息，请访问此[链接](http://dev.mysql.com/doc/refman/5.1/en/mysqldump.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-27T10:10:16.893

您可以使用 MySQLDump 导出您的存储过程：

与其他所有内容一起存储在转储中：

```
mysqldump -r <dbname> #or
mysqldump --routines <dbname> 
```

只是存储过程：

```
mysqldump -n -t -d -r <dbname> #or
mysqldump --no-create-db --no-create-info --no-data --routines <dbname> 
```

来自：[如何在 MySQL 中备份存储过程](https://stackoverflow.com/questions/881223/how-to-backup-stored-procedures-in-mysql)

# javascript - 禁用 jQuery 对话框中的控件

> ID：14052815
> 
> 赞同：1
> 
> 时间：2012-12-27T10:05:24.687
> 
> 标签：javascript, jquery

我正在尝试使用 Javascript 在我的 jQuery UI 对话框中禁用 ddl (ddlGender)，但它不起作用，也从代码隐藏中尝试过，请建议。谢谢：

```
 function loadDialog() {
       var gender = $('#<%=litGender.ClientID %>').val();
       if (gender != '') {
           alert('true');
           $('#<%=ddlGender.ClientID %>').disabled = true;
       }
        $('#DialogBox').dialog('open');
    }

 <div id="DialogBox" title="">
     <span>Gender:</span><asp:DropDownList ID="ddlGender" runat="server" AutoPostBack="True"
                                                                                       onselectedindexchanged="ddlGender_SelectedIndexChanged">
                                                                         <asp:ListItem Text="Both" Value="" Selected = "True"/>
                                                                         <asp:ListItem Text="Male" Value="m"/>
                                                                         <asp:ListItem Text="Female" Value="f" /> 
                                                                     </asp:DropDownList>
</div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-27T10:07:18.607

您需要为此使用[`attr()`](http://api.jquery.com/attr/)方法：

```
$('#<%=ddlPref.ClientID %>').attr( 'disabled', 'disabled' ); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-27T10:08:19.703

[$()](http://api.jquery.com/jQuery/)返回一个 jQuery 对象，而不是 DOM 元素。您可以使用[prop()](http://api.jquery.com/prop/)：

```
$("#<%=ddlPref.ClientID %>").prop("disabled", true); 
```

或者处理 DOM 元素本身：

```
$("#<%=ddlPref.ClientID %>")[0].disabled = true; 
```

# c# - 我们可以取消向 sql server 发出的查询吗？

> ID：14052818
> 
> 赞同：1
> 
> 时间：2012-12-27T10:05:44.460
> 
> 标签：c#, sql-server, sql-server-2008, c#-4.0, ado.net

我有一段复杂的 SQL，它涉及大量计算等。我想知道是否可以取消向 SQL 服务器发出的查询？

前任。有一个名为“搜索”的按钮，用户单击“搜索”。我想显示一个名为“取消”的按钮，它应该取消向 SQL 服务器发出的查询。

这可能吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-27T10:11:51.660

ADO.NET 中有很多异步函数，例如[`SqlCommand.BeginExecuteNonQuery`](http://msdn.microsoft.com/en-us/library/ca56w9se%28v=vs.100%29.aspx).

您可以在应用程序中调用这些函数，存储结果对象并在用户单击“取消”按钮时取消它。

因此，在伪代码中，您可以执行以下步骤：

1.  用户单击`Search`按钮。
2.  在按钮的处理程序中，打开您的数据库连接等。
3.  显示您的`Cancel`按钮。
4.  调用您选择的 ADO.NET 异步函数。
5.  存储`IAsyncResult`函数调用的返回对象（用于检测操作何时完成以再次隐藏取消按钮）。
6.  在取消按钮的处理程序中，调用的[`Cancel`方法](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlcommand.cancel%28v=vs.100%29.aspx)。`SqlCommand`

# sql - 从特定记录中选择全部

> ID：14052822
> 
> 赞同：-4
> 
> 时间：2012-12-27T10:06:02.117
> 
> 标签：sql

桌子：

```
autn  itcode  date  qty  phstock    
----------------------------------------
1     10      1/1   1   
2     5       2/2   1   
3     6       1/1   5
4     10      2/1   5
5     9       1/1   5   
6     10      3/1   1    5
7     5       5/1   2
8     5       6/1   5   
9     10      5/5   1   
10    5       7/1   2   
11    10      7/2   5    2
12    10      7/8   2 
```

如何获得如下输出：

```
autn  itcode  date  qty  phstock
--------------------------------
11    10      7/2   5    2
12    10      7/8   2 
```

提示：我只想记录我上次输入的“phstock”！[在此处输入图像描述][1]

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T10:11:41.580

这将返回设置的最新行之后的所有行`phstock`：

```
select  *
from    YourTable
where   date >=
        (
        select  max(date)
        from    YourTable
        where   phstock is not null
        ) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T10:10:31.150

```
select * 
  from YourTable x 
 where x.date = (
   select max(y.date) from Yourtable y
   ) 
```

如果我猜对了，您只希望它用于特定的“phstock”。

```
select * from YourTable c
 where x.date = (
   select max(y.date) from Yourtable y where y.phstock = <YourPhStockHere>
   )
 and x.phstock = <YourPhStockHere> 
```

# android - android平板电脑中的sqlite数据库在哪里？

> ID：14052824
> 
> 赞同：2
> 
> 时间：2012-12-27T10:06:04.880
> 
> 标签：android, database, android-sqlite

我正在开发一个应用程序，在其中插入一些值到本地 sqlite 数据库中。它在本地模拟器和平板电脑上运行良好。插入值后，我想获取 sqlite 数据库。我能够从 Emulator 获取数据库，但不幸的是无法从 Android Tablet 获取 sqlite 数据库。请建议从真实设备（平板电脑）获取数据库的程序是什么。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T12:23:11.300

谢谢大家

最后我得到了一个合适的解决方案。我们无法从任何（三星）平板电脑获取 db，但我们可以复制其数据并拉取到我们的 PC。

```
public void copyDataBase() {
        Log.i("info", "in copy data base at finally");
        try {
            File sd = Environment.getExternalStorageDirectory();
            File data = Environment.getDataDirectory();
            if (sd.canWrite()) {
                String currentDBPath = "/data/" + context.getPackageName()
                        + "/databases/DB_29Apr.sqlite";
                String backupDBPath = "DB_29Apr.sqlite";
                File currentDB = new File(data, currentDBPath);
                File backupDB = new File(sd, backupDBPath);
                if (currentDB.exists()) {
                    FileChannel src = new FileInputStream(currentDB)
                            .getChannel();
                    FileChannel dst = new FileOutputStream(backupDB)
                            .getChannel();
                    dst.transferFrom(src, 0, src.size());
                    src.close();
                    dst.close();
                }
            }
        } catch (Exception e) {
            Log.i("info", "in copy of bata base 10 ");

        }
    } 
```

通过上述功能，您可以将数据库复制到平板电脑的外部空间。

转到 DDMS 并在平板电脑的存储位置的 db 中找到具有给定名称的已定义数据库。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-27T10:07:31.550

在您的平板电脑 SD 卡中手动创建一个名为 database 的文件夹。然后运行您的应用程序，然后打开数据库文件夹以获取 .db 文件。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-27T10:09:07.373

您必须从**FileExplorer中选择它** `mnt---> sdcard---> your DB_NAME`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-27T10:11:35.130

仅供参考，出于安全目的，在平板电脑设备中，它不允许找到您的 .db 文件。如果您使用的是模拟器，那么您有权访问数据库的位置[目录]。

这是最终答案。

谢谢

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-12-27T11:24:38.157

原因你不能，因为它会在以下位置创建，比如

```
/data/data/<your root package name in android manifest file>/databases/< you database name> 
```

只能由您的应用程序访问，因此只需将您的文件从上述位置复制到 sd 卡位置以编程方式使用以下功能可能有助于复制流

```
public static void CopyStream(InputStream is, OutputStream os) {
    final int buffer_size = 1024;
    try {
        byte[] bytes = new byte[buffer_size];
        for (;;) {
            int count = is.read(bytes, 0, buffer_size);
            if (count == -1)
                break;
            os.write(bytes, 0, count);
        }
    } catch (Exception ex) {
        ex.printStackTrace();
    }
} 
```

# r - R中的数据模拟

> ID：14052828
> 
> 赞同：0
> 
> 时间：2012-12-27T01:51:57.230
> 
> 标签：r, simulation

假设我想从对数正态分布中模拟 10 个观察值并重复 100 次。我写了一些 R 代码，但由于某种原因它不起作用。这是代码：

```
for(i in 1:100) 
 {

x = rlnorm(10, meanlog = 0, sdlog = 1)

 } 
```

有什么想法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-27T02:32:06.733

也试试这个代码：

```
> x=matrix(0,nrow=10,ncol=100)
> for(i in 1:100) 
+  {
+ 
+ x[,i] = rlnorm(10, meanlog = 0, sdlog = 1)
+ 
+  }
> 
> apply(x,2,mean)
> apply(x,2,sd)
> library(moments)
> apply(x,2,skewness) 
```

# jsf - 如何使用两个 uploadFile 组件？

> ID：14052834
> 
> 赞同：3
> 
> 时间：2012-12-27T10:06:48.393
> 
> 标签：jsf, jsf-2, primefaces

我有一个带有 2 个标签的标签视图。我想为每个选项卡使用两个 uploadFile 组件。我对 uploadFile 组件使用“高级”模式。当我尝试为第一个选项卡 uploadFile 组件上传无效文件（可能存在无效文件大小错误或无效文件类型错误）时，两个选项卡 uploadFile 组件都会显示错误消息。我使用 PF 3.4.1。在 pf_user_guide_3.4 中，写了“目前不支持同格式的多个高级上传器”。我的问题与此说明有关吗？有没有人对这种情况有想法？

```
 main.xhtml
    ..........
    <h:form id="formTabView">
       <p:tabView id="tvSample" activeIndex="#{sampleBean.selectedTab}" cache="false">         
         <p:tab id="tabSubMerchants" title="#{messagebundle.submerc_tab_submerch}">
            <ui:include src="tabsubmerchantssubmtab.xhtml" />
         </p:tab>
        <p:tab id="tabServices" title="#{messagebundle.submerc_tab_svc}">
            <ui:include src="tabsubmerchantssevicestab.xhtml" />
        </p:tab>
      </p:tabView>
    </h:form>
    ...........

    tabsubmerchantssubmtab.xhtml
    ...........
    <h:form id="formTab1Files">
       <p:fileUpload id="fuSubMerchant"
         fileUploadListener="#{fileOperations.uploadSubMerchantFile}"
         sizeLimit="2097152" multiple="true"
         allowTypes="/(\.|\/)(gif|jpeg|png|txt|pdf|doc|docx)$/"
         label="#{messagebundle.fileupload_upload}" auto="true"              
         invalidFileMessage="#{messagebundle.submerc_error_011}"
         invalidSizeMessage="#{messagebundle.submerc_error_012}">
       </p:fileUpload>
    </h:form>      
    ..............

     tabsubmerchantssevicestab.xhtml
     ...................
     <h:form id="formSvcFiles">
        <p:fileUpload id="fuService" 
           fileUploadListener="#{fileOperations.uploadServiceFile}"
           sizeLimit="2097152" multiple="true"
           allowTypes="/(\.|\/)(gif|jpeg|png|txt|pdf|doc|docx)$/"
           label="#{messagebundle.fileupload_upload}" auto="true"
           invalidFileMessage="#{messagebundle.submerc_error_011}"
           invalidSizeMessage="#{messagebundle.submerc_error_012}">
        </p:fileUpload>
     </h:form> 
```

.....................

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T10:18:18.247

你有一个表格，里面还有另外两个表格。我认为您应该删除父表单，并仅将表单保留在选项卡中。

# php - ImageMagick：如何提供图像生成目录路径？

> ID：14052836
> 
> 赞同：2
> 
> 时间：2012-12-27T10:07:05.547
> 
> 标签：php, zend-framework, imagick

我在我的代码中使用 ImageMagick [Caption Best Fit](http://www.imagemagick.org/Usage/text/#caption_bestfit)来生成最适合的文本图像。

PHP代码：

```
$tempPath = realpath(APPLICATION_PATH . '/../public/temp');
$command = 'convert -background none -fill black -pointsize '.$captionFontSize.' -size '.$resizeBoxWidth.'x'.$resizeBoxHeight.' caption:"'.$myCaption.'" '.$tempPath.'/'.$randName.'.png';
$ex = exec($command); 
```

在我在 Windows 上运行 xampp 的本地主机中一切正常。它完美地在 public/temp 目录中创建图像。相同的代码在我的运行 linux 的托管服务器上无法正常工作。问题是由于未生成图像而导致命令未执行。

我谷歌，如果我指定路径的方式是正确的，但我没有得到任何正确的答案。

你认为是什么问题？谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-28T06:32:16.503

临时文件夹在服务器上没有适当的权限。所以当我这样做时，

```
chmod 777 temp 
```

它解决了这个问题。经验教训 - 彻底检查文件/文件夹权限。

# java - 无法从 URL 中获取 URI，为空？

> ID：14052843
> 
> 赞同：2
> 
> 时间：2012-12-27T10:07:35.083
> 
> 标签：java, jar, nullpointerexception

我有一种情况，我的可执行 jar 中有一个模板文件（.xls）。不，在运行时我需要为这个文件创建 100 个副本（稍后将唯一地附加到该文件）。用于获取 jar 文件中的资源 (template.xls)。我在用

```
URL templateFile=G1G2Launcher.class.getClass().getResource(File.separator+"Template.xls");
            System.out.println("URL-->"+templateFile);
            System.out.println("URI For Source-->"+templateFile.toURI().getPath());
            sourceFile=templateFile.toURI().getPath(); 
```

我得到一个空值`templateFile.toURI.getPath()`可能是什么原因？这就是我得到的：

```
URL--> jar:file:/home/eketdik/Desktop/G1G2-KD@Tool.jar!/Template.xls
URI For Source-->null 
```

实际上，我将此 URI 传递给 File 构造函数以获取它的 File Object ..（用于复制它）。所以堆栈跟踪是-->

```
java.lang.NullPointerException
    at java.io.File.<init>(File.java:251)
    at gui.Utility.copyfile(Utility.java:29)
    at printer.Printer.printFinalSiteWiseReportsForSignOff(Printer.java:1408) 
```

请建议我哪里出错了？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-27T10:13:38.537

在运行时修改 Jar 文件是不可能的。

因此，您可以将文件作为输入流获取，然后在 jar 之外创建副本。下面的代码可帮助您创建所需的文件。

```
InputStream in = G1G2Launcher.class.getClass().getResourceAsStream("file.xls")
OutputStream out = new FileOutputStream(new File("file.xls"));
int read = 0;
byte[] bytes = new byte[1024];
while ((read = in.read(bytes)) != -1) {
    out.write(bytes, 0, read);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T10:13:48.307

只需使用[getResourceAsStream(String res)](http://docs.oracle.com/javase/6/docs/api/java/lang/ClassLoader.html#getResourceAsStream%28java.lang.String%29)。

# sql - 用于从另一个表输入数据并在源表中创建列以链接另一个表的 SQL 脚本

> ID：14052844
> 
> 赞同：-3
> 
> 时间：2012-12-27T10:07:36.637
> 
> 标签：sql

我有一个表，其中已经有数据。

```
Table -> Address:
AddressID, Address 1, Address 2, email etc...

Table -> Branches:
BranchesID, StoreName, Address 1, Address 2 
```

现在我需要一个脚本，它可以将所有数据从 Branches 表复制到 Address 表，并在 Branches 中创建一个列，其中包含新复制数据的 AddressID，这样我就可以使用地址表引用 Branches 地址。

请帮忙。

到目前为止，我已经尝试了很多。

```
INSERT Address1, Address2, City, ZipCode)
OUTPUT AddressID
INTO Addresses
SELECT Address1, Address2
FROM Baranches; 
```

但我不知道如何将地址表中新创建的记录 ID 插入到 Braches 表中......

坦克

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-27T11:02:32.517

首先，您需要将`AddressId`字段添加到`Branches`. 我不知道您使用什么 RDBMS，所以这里是 MSSQL 的一个示例，但它应该适用于所有 RDBMS，只需进行一些更改：

```
ALTER TABLE BRANCHES ADD AddressID bigint; 
```

然后将地址`branches`插入`Address`表中。我猜`AddressId`是自动增量PK？`WHERE`此查询中的语句允许避免地址重复。

```
insert into ADDRESS (Address1, Address2)
select Address1, Address2 
    from BRANCHES 
      where 
       not exists(select AddressID 
                        from ADDRESS 
                        where Address1=BRANCHES.Address1
                              and 
                              Address2=BRANCHES.Address2 ) 
```

现在我们应该填写`AddressID`BRANCHES 中的字段：

```
update BRANCHES SET AddressId=(select TOP 1 AddressId from Address where 
                                   Address1=BRANCHES.Address1
                                    and 
                                   Address2=BRANCHES.Address2 ) 
```

# javascript - 如何在模型关闭时暂停视频（videojs）

> ID：14052845
> 
> 赞同：0
> 
> 时间：2012-12-27T10:07:36.760
> 
> 标签：javascript, jquery, html5-video, video.js

是）我有的 ：

```
<script>
  function stopvideos()
  { 
    $(".video-js")[0].player.pause();
   //$("#example_video_0").pause(); 
   //$("#example_video_0").get(0).pause();
   //jQuery(".video-js")[0].player.pause();
   //$("#example_video_0").trigger("pause");
   //$("#example_video_0").player.pause();
   // $('#example_video_1').remove();
   /*VideoJS.DOMReady(function(){
       var myPlayer = VideoJS.setup("example_video_0");
       myPlayer.pause();  
    });
   */ 
}
  </script>
<div id="animation-reel">
    <a class="bClose" onclick="stopvideos();">x<a/>
     <video id="example_video_0" class="video-js vjs-default-skin" controls preload="none" width="210" height="118"
      poster="videos/video-js_poster.jpg" 
      data-setup="{}">
    <source src="videos/animation.m4v" type='video/mp4' />
      <!--<source src="peo_v10.webm" type='video/webm' />
      <source src="http://video-js.zencoder.com/oceans-clip.ogv" type='video/ogg' />
      <track kind="captions" src="videos/captions.vtt" srclang="en" label="English" />-->
    </video>
  </div> 
```

我尝试了什么：

```
1\. $(".video-js")[0].player.pause();
2\. $("#example_video_0").pause(); 
3\. $("#example_video_0").get(0).pause();
4\. jQuery(".video-js")[0].player.pause();
5\. $("#example_video_0").trigger("pause");
6\. $("#example_video_0").player.pause();
7\. $('#example_video_1').remove();
8\. VideoJS.DOMReady(function(){
    var myPlayer = VideoJS.setup("example_video_0");
     myPlayer.pause();  
   }); 
```

我想要的是 ：

暂停视频点击模型关闭链接<a class="bClos​​e" onclick="stopvideos();">x<a/>

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T10:48:39.763

请参考这个**工作示例** [小提琴](http://jsfiddle.net/hNfW8/4/)

只需通过以下方式访问视频元素

```
var vid = document.getElementById("example_video_0");
vid.pause(); 
```

享受..！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-12-19T12:29:29.227

只需删除 iframe 的 src，它会在模型​​关闭后停止播放视频

```
$('button.close').click(function(){
    $('iframe').attr('src','');;
}); 
```

# java - Wicket 与 Spring 的集成

> ID：14052847
> 
> 赞同：6
> 
> 时间：2012-12-27T10:07:41.240
> 
> 标签：java, spring, wicket

我正在制作一个要集成 Wicket + Spring 的应用程序。应用程序是用户来购买东西的杂货店。我知道有两种方法可以做到这一点。

1.  使用注释方法。Wicket-Spring 集成展示了如何将 Spring Beans 注入 Wicket 页面的各种方法。

    ```
    public class FormPage extends WebPage
    {
      @SpringBean
      private IContact icontact;
      ...
      Form<Object> form = new Form<Object>("contactForm",
         new CompoundPropertyModel<Object>(contact))
      {
        private static final long serialVersionUID = 1L;

        protected void onSubmit(Contact contact)
        {               
          icontact.saveContact(contact);
        }
      }; 
    ```

2.  @SpringBean 当然是有效的，并且被许多人认为是最佳实践。但是还有另一种方法，您的 Wicket 应用程序可以提供您需要的服务。

    ```
    public class YourWicketApp extends WebApplication{
      public static YourWicketApp get(){
        return (YourWicketApp) Application.get();
      }
      private ServiceA serviceA;
      // getter and setter for serviceA here
    } 
    ```

    现在在您的组件中，调用

    > YourWicketApp.get().getServiceA();

**我想知道**将 spring 与 wicket 集成的最佳方法是什么，以及每种情况下的缺点是什么。

*但是据我所知，Wicket 页面和组件不是由 Spring 容器管理的，因此您不能在它们上使用 @Transactional 注释（无论如何这都是个坏主意 - 事务属于更深层次）。* **这个说法有效吗？**

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-27T13:19:20.220

不同的选择有一定的优点和缺点。[此处](https://cwiki.apache.org/WICKET/spring.html)解释了不同的选项。就个人而言，我更喜欢基于注释的方法，因为它保证了注释字段的正确分离，并减少了组件对应用程序对象的依赖。

### 1.使用`@SpringBean`

`@SpringBean`注释很好。保证标有它的字段不会与组件一起序列化。即，Wicket 框架通过在每个分离周期中取消字段来“管理”bean，因此您不必担心它。

标有 的字段`@SpringBean`很容易测试，因为您总是可以用模拟替换它们。Wicket 甚至有一个`ApplicationContextMock`类，当使用 WicketTester 时，bean 将从该类中注入：

**我的组件.java**

```
public class MyComponent extends Panel {
    @SpringBean
    MyServiceA myServiceA;
} 
```

**在 MyComponentTest.java**

```
final ApplicationContextMock appContext = new ApplicationContextMock();
appContext.putBean(mock(MyServiceA.class));
Application app = new Application() {
    public void init() {
        ...
        getComponentInstantiationListeners().add(new SpringComponentInjector(this, appContext));
    }
}
WicketTester wicketTester = new WicketTester(app);
wicketTester.startComponent(MyComponent.class); 
```

### 2.使用`YourWicketApp.get().getServiceA()`

这是一种非常轻量级的方法，因为它不需要将 Spring 绑定到您的 Web 应用程序。如果您不构建大型应用程序，这可能是一个可行的替代方案。

这种方法的主要缺点是可测试性差。由于您正在静态访问应用程序，因此您无法在测试中轻松替换应用程序。当然，您可以编写一个`YourWicketAppForTests`可扩展的应用程序`YourWicketApp`，但您将始终受限于该应用程序。通过这样做，您将创建从每个依赖于服务的组件到应用程序类的依赖关系。此外，您需要为每个服务类提供一个方法，这会增加应用程序类的混乱（通常，首先它不会太短）。

### 3.`@Transactional`

事务绝对不属于 Wicket 页面，应该在服务层处理。由于处理 bean 注入和组件实例化的是 Wicket 而不是 Spring，所以`@Transactional`无论如何，如果我是正确的，注释将不起作用。

# android - 如何关闭 Android 中的所有活动并从任务管理器中关闭？

> ID：14052849
> 
> 赞同：1
> 
> 时间：2012-12-27T10:07:45.787
> 
> 标签：android, android-intent, android-activity

我要关闭安卓应用

```
int id= android.os.Process.myPid();
android.os.Process.killProcess(id); 
```

此代码杀死进程。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-27T13:45:43.820

如果您总是希望您的应用程序在每次用户从主屏幕启动应用程序或从最近应用程序列表返回时都以根 Activity（第一个 Activity）开始，那么请将其添加到`<activity>`您的标签中的清单中根活动：

```
 android:clearTaskOnLaunch="true" 
```

但是，如果您只想完成当前任务中的所有活动，您可以执行以下操作：

```
Intent = new Intent(this, MyRootActivity.class); // MyRootActivity should be the name of your root (launcher) activity
intent.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
intent.putExtra("exit", "true"); // This tells MyRootActivity that you want to exit 
```

这将导致任务中的所有活动完成，并将创建一个新的`MyRootActivity`. 在`MyRootActivity.onCreate()`执行以下操作：

```
if (getIntent().hasExtra("exit")) {
    finish(); // We want to exit the application, so just finish this activity now
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T13:57:17.040

```
 this.finish();
    Intent intent = new Intent(getApplicationContext(), CloseApp.class);
    intent.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
    startActivity(intent); 
```

这段代码对我有用。这将关闭所有现有活动以及从第一个活动开始重新打开的时间。

# php - 从 QBO 获得销售税

> ID：14052856
> 
> 赞同：-4
> 
> 时间：2012-12-27T10:08:43.310
> 
> 标签：php, quickbooks-online

参考[https://ipp.developer.intuit.com/0010_Intuit_Partner_Platform/0050_Data_Services/0400_QuickBooks_Online/0500_Supported_Entities_and_Operations](https://ipp.developer.intuit.com/0010_Intuit_Partner_Platform/0050_Data_Services/0400_QuickBooks_Online/0500_Supported_Entities_and_Operations)，似乎无法通过 Intuit 数据服务（IDS）检索 QBO 的销售税对象。

HTTP/1.1 500 内部服务器错误日期：2012 年 12 月 27 日星期四 09:46:34 GMT 服务器：Apache Set-Cookie：qboeuid=10.129.32.5.1356601594381793；路径=/; 过期=格林威治标准时间 2013 年 12 月 27 日星期五 09:46:34；domain=.intuit.com 变化：Accept-Encoding Content-Encoding: gzip Content-Length: 190 Connection: close Content-Type: application/xml Internal Server Error500SERVER 是我在尝试检索 salesTaxes 时得到的响应。

内部服务器错误是因为同样的原因吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-27T10:16:13.453

SalesReceipt[对象](https://ipp.developer.intuit.com/0010_Intuit_Partner_Platform/0050_Data_Services/0400_QuickBooks_Online/SalesReceipt)有一个`TaxAmt`属性。

# iphone - 从 HTML 中获取数据 进入 iPhone

> ID：14052857
> 
> 赞同：-2
> 
> 时间：2012-12-27T10:08:46.757
> 
> 标签：iphone, html, ios, ipad

谁能告诉我从 url 获取 HTML 数据到我的应用程序的简单方法。也请给我一些教程，如果有的话？

预先感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T11:20:54.347

```
NSString* str=[[NSString alloc]initWithFormat:@"%@",@"http://mobiletraining.mcs.schoolinsites.com/?PageName=LatestNews&Section=Highlights&It%E2%80%8C%E2%80%8BemID=114932&ISrc=School&Itype=Highlights&SchoolID=172%0A%09%09"];
NSURL *tutorialsUrl = [NSURL URLWithString:str];
NSString *htmlString = [NSString stringWithContentsOfURL:tutorialsUrl encoding:NSUTF8StringEncoding error:nil];
NSLog(@"Your Html >> %@",htmlString); 
```

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-12-27T10:13:34.700

您可以通过将 url 的数据读取到 NSData 对象中来获取 HTML 数据，如下所示

```
NSData *urlData = [NSData dataWithContentsOfURL:htmlURL]; 
```

或作为 NSString 之类的

```
NSError *error=nil; 
NSString *htmlString = [NSString stringWithContentsOfURL:[NSURL URLWithString:htmlURL] encoding:NSUTF8StringEncoding error:&error]; 
```

# objective-c - 无法在现有 UIWebView 中显示新页面

> ID：14052871
> 
> 赞同：1
> 
> 时间：2012-12-27T10:09:41.800
> 
> 标签：objective-c, uiwebview

我是 Objective-c 的新手，并且已经被这个问题困扰了好几个星期了。因此，非常感谢您对此的任何帮助。

我正在开发一个具有选项卡视图的 iPhone 应用程序，其中一个选项卡是 UIWebView。另一个选项卡提供了一种选择应在 UIWebView 中显示的内容的方法。

我可以在 UIWebView（在 viewDidLoad 中）显示初始视图：

```
[self.groupWebView loadHTMLString:html baseURL:[NSURL fileURLWithPath:[[NSBundle mainBundle] bundlePath]]]; 
```

这工作得很好。

但是当用户在 table view 上选择某些东西时，它必须在现有的 UIWebView 中打开一个新页面。

所以我有这个：

```
-(void) displayGroup:(int)theGroup
{
    // Set our selves to the webviews delegate since we implement the delegate methods here
    self.groupWebView.delegate = self;

    // Load it to the webview

    NSString *html = @"<html><head><title>it worked...</title></head><body><a href=\"custom://THIS_IS_CUSTOM_LINK\">Click for custom link</a><br><a href=\"http://google.com\">it worked...</a></body></html>";
    [self.groupWebView loadHTMLString:html baseURL:[NSURL fileURLWithPath:[[NSBundle mainBundle] bundlePath]]];

} 
```

我称之为它并且它运行但在网络视图上没有任何反应。

.h 文件如下所示：

```
//  PBGroupViewController.h

#import <UIKit/UIKit.h>

@interface PBGroupViewController : UIViewController <UIWebViewDelegate, UIScrollViewDelegate> 

@property (nonatomic, retain) IBOutlet UIWebView *groupWebView;
- (void) displayGroup:(int)theGroup;

@end 
```

对此的任何帮助将不胜感激......谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T11:08:04.557

当用户点击表格视图时，会生成一些 url。如果是，那么你应该使用 didSelectRowAtIndexPath 并且你应该加载你的 webview ..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T10:14:10.863

像这样更改您的`displayGroup`功能：

```
-(void) displayGroup:(int)theGroup
{
    // Set our selves to the webviews delegate since we implement the delegate methods here
    self.groupWebView.delegate = self;

    // Load it to the webview

    NSString *html = @"<html><head><title>it worked...</title></head><body><a href=\"custom://THIS_IS_CUSTOM_LINK\">Click for custom link</a><br><a href=\"http://google.com\">it worked...</a></body></html>";
    [self.groupWebView loadHTMLString:html baseURL:[NSURL fileURLWithPath:[[NSBundle mainBundle] bundlePath]]];
    [self.groupWebView stopLoading ];
    [self.groupWebView reload];
} 
```

# javascript - 使用 JavaScript 根据分辨率为不同设备提供不同尺寸的图像

> ID：14052872
> 
> 赞同：3
> 
> 时间：2012-12-27T10:09:50.827
> 
> 标签：javascript, jquery, image, responsive-design

**例子：** [这个网站](http://mashable.com/)是一个很好的例子。

**第 1 步：**在一个选项卡中

*   只需加载[页面](http://mashable.com/)
*   **查看**最右列中的任何图像。您会看到它们的分辨率为 638x368

**第 2 步：**打开一个新选项卡，然后...

*   加载[页面](http://mashable.com/)并打开 Firebug 或开发者工具 ( `F12`)
*   转到**Network**（或**Net**）选项卡
*   调整浏览器大小并重新加载页面
*   再次最大化浏览器窗口
*   **查看**最右列中的任何图像。您会看到它们的分辨率为 356x205

显然这是一些 JavaScript/jQuery 技巧（+ 一些其他技术），因为如果您检查最右侧列中的任何图像，您将看到如下代码：

```
<div class="article-img-container">
  <a data-turbo-target="post-slider" href="http://mashable.com/2012/12/27/gdigital-therapy-dog/">
    <span class="_ppf">
      <span data-q="true" data-s="http://rack.2.mshcdn.com/media/.../438c2f93/107/GeriJoy.jpg" data-z="638x368#"></span>
      <span data-q="(min-resolution: 1.5dppx)" data-s="http://rack.3.mshcdn.com/media/.../46c08de9/107/GeriJoy.jpg" data-z="1276x736#"></span>
      <span data-q="(max-width: 1160px)" data-s="http://rack.2.mshcdn.com/media/.../fa9bdb7b/107/GeriJoy.jpg" data-z="356x205#"></span>
      <span data-q="(max-width: 1160px) and (min-resolution: 1.5dppx)" data-s="http://rack.3.mshcdn.com/media/.../42ebf99d/107/GeriJoy.jpg" data-z="712x410#"></span>
      <span data-q="(max-width: 480px)" data-s="http://rack.2.mshcdn.com/media/.../948312d1/107/GeriJoy.jpg" data-z="280x157#"></span>
      <span data-q="(max-width: 480px) and (min-resolution: 1.5dppx)" data-s="http://rack.0.mshcdn.com/media/.../da1d8905/107/GeriJoy.jpg" data-z="560x314#"></span>
      <img src="http://rack.2.mshcdn.com/media/ZgkyMDEyLzEyLzI3L2QyL0dlcmlKb3kuNWYyZWYuanBnCnAJdGh1bWIJNjM4eDM2OCMKZQlqcGc/438c2f93/107/GeriJoy.jpg">
    </span>
  </a>
</div> 
```

`view-source`...如果你的页面不存在。是否有一个开源的 javascript 库可以做这样的事情？

我们怎么称呼它？**自适应图像**？

我想问的一个简单的问题是......是否可以根据浏览器的视口大小或屏幕分辨率为不同的设备提供不同尺寸的图像？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-05-22T21:25:06.497

最好的答案是，这在没有 javascript 的情况下已经有一段时间了

将来，该`<picture>`元素正是将要使用和需要的元素。它的 HTML 如下所示

```
<picture>
    <source srcset="examples/images/large.jpg" media="(min-width: 1000px)">
    <source srcset="examples/images/medium.jpg" media="(min-width: 800px)">
    <source srcset="examples/images/small.jpg">

    <img srcset="examples/images/small.jpg" alt="Desciption of image">
</picture> 
```

这与下面的技术本质上是相同的，但它的书写形式更容易，并且它用于`img`a 而不是 a `background-image`。在撰写此答案时，我们可以使用[polyfill](http://scottjehl.github.io/picturefill/)来使用这种格式或`@media`查询

CSS2 媒体类型引入了`@media`查询，允许我们根据视口尺寸影响页面的不同样式以及许多其他内容。这允许我们仅在需要时[将较大的图像作为背景图像提供。](http://benfrain.com/how-to-serve-high-resolution-website-images-for-retina-displays-new-ipadiphone4/)它的使用示例如下

```
.myImg { background-image:url(myurlSmall.png); } /* Start with smallest */

/* Serve larger image only if needed */
@media (min-width:400px) {
    .myImg { background-image:url(myurlMedium.png); }
}
@media (min-width:1200px) {
    .myImg { background-image:url(myurlLarge.png); }
}
/* etc. */ 
```

# javascript - 选择其他下拉js时要显示的下拉值

> ID：14052873
> 
> 赞同：0
> 
> 时间：2012-12-27T10:09:53.430
> 
> 标签：javascript, jquery, drop-down-menu

```
<html>
<select id="degree_id" onchange=geneCourse(this.value);>
    <option value="1">BE</option>
    <option value="2">MBA</option>
</select>
<select id="course_id">
    <option value="10">A</option>
    <option value="20">none</option>
</select>
</html>
<script>
function geneCourse(degree){
    var degree = $('#degree_id option:selected').text();
    if(degree == 'MBA')               
    {
        $("#course_id option:contains('none')").prop("selected", true);
    }
}
</script> 
```

我尝试了上面的代码，但它不起作用:(如果选择了MBA，默认情况下第二个下拉菜单应该是“none”..... *但是这是一个重复的问题，我找不到合适的解决方案为此....* **非常感谢您的帮助。**

在此先感谢 Passioncoder。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T11:07:59.407

这是工作代码

```
<html>
    <select id="degree_id" onchange="geneCourse(this);">
        <option value="BE">BE</option>
        <option value="MBA">MBA</option>
    </select>
    <select id="course_id">
        <option value="10">A</option>
        <option value="20">none</option>
    </select>
</html>
<script>
function geneCourse(element){
    var degree = $(element).val();
    if(degree == 'MBA')               
    {
        $("#course_id option:contains('none')").prop("selected", true);
    }
}
</script> 
```

您可以在此处参考示例[JSFiddle 代码](http://jsfiddle.net/kDFtY/3/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T10:16:27.387

使用这个解决方案。

```
 $("#course_id option:contains('none')").attr("selected", true); 
```

您可能正在使用较旧的 jquery 库。

# facebook - $facebook->api('/me') 总是返回 null

> ID：14052874
> 
> 赞同：-1
> 
> 时间：2012-12-27T10:09:57.677
> 
> 标签：facebook, facebook-apps

> **可能重复：**
> [$me = $facebook->api('/me'); 返回空字符串](https://stackoverflow.com/questions/10147484/me-facebook-api-me-returns-empty-string)

我尝试创建一个 Facebook 应用程序。我为 php 使用 facebook sdk。但是当我通过 $facebook->api('me') 获取用户配置文件时，总是返回空值。我不明白我错在哪里了？我的代码如下。大家帮帮我。非常感谢！

$fbconfig['appid' ] = "3256.......................";//id của bạn

$fbconfig['secret'] = "18cadb0.......";//secret của bạn

```
$user            =   null; //facebook user uid
try{
    include_once "src/facebook.php";
}
catch(Exception $o){
    echo '<pre>';
    print_r($o);
    echo '</pre>';
}

$facebook = new Facebook(array(
  'appId'  => $fbconfig['appid'],
  'secret' => $fbconfig['secret'],
  'fileUpload' => true
));

$user       = $facebook->getUser();//Lấy thông tin người dùng

$loginUrl   = $facebook->getLoginUrl(
        array(
            'scope'         => 'email,publish_stream,user_birthday,user_location,user_work_history,user_about_me,user_hometown'
        )
);//Yêu cầu login với các quyền cần thiết

if ($user) {//Kiểm tra user và lấy thông tin user
  try {
    $user_profile = $facebook->api('/me','GET');
    echo $user.'<br />';
    var_dump($user_profile);
  } catch (FacebookApiException $e) {
    $user = null;
  }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T16:52:26.457

**尝试这个 ：**

```
$pageContent = file_get_contents('http://graph.facebook.com/USERID');
$parsedJson  = json_decode($pageContent);
echo $parsedJson->name; 
```

# jquery - Ajax 和 Combox 生成

> ID：14052876
> 
> 赞同：1
> 
> 时间：2012-12-27T10:10:04.353
> 
> 标签：jquery, ajax

我需要帮助。

我有一个由 displaytag 创建的表格：

```
<div id="contentAccionFormativa" class="displayAF">           
                    <display:table id="displayAF" name="${accionesFormativasList}"                                                              
                                   htmlId="justifAfList"
                                   class="displayTagTable" 
                                   uid="accionFormativa">    
                        <display:column titleKey="asociarJustificante.display.af.header.checkbox"                                    
                                        class="tdBorderFirst center"
                                        headerClass="firstTh"
                                        style="width: 2px;" >                           
                            <form:checkbox id="checkAf" path="listaIdAccionesFormativas" value="${accionFormativa.idAfExteInteIdConv}"/>
                        </display:column>
                        <display:column titleKey="asociarJustificante.display.af.header.descripcion" class="lastTh center" >
                            ${accionFormativa.codAF}
                        </display:column>

                        <display:footer>
                            <tr><td colspan="2" class="firstTh lastTh right"></td></tr>
                        </display:footer>
                    </display:table>
                </div> 
```

我尝试使用以下方法获取计数复选框：

```
jQ('#justifAfList :checkbox').click(function() {
        alert(jQ("input:checked").length);
    }); 
```

它工作正常，但是当我使用 ajax 生成表时：

```
 jQ.each(data.ajaxResult.accionesFormativas, function(i,value){
                    firstTd = "<td class='tdBorderFirst center' style='width: 2px;'><input id='checkAf' type='checkbox' value=" +value.idAfExteInteIdConv+ " name='listaIdAccionesFormativas'><input type='hidden' value='on' name='_listaIdAccionesFormativas'></td>";
                    jQ('#justifAfList > tbody:last').append("<tr class='odd'>" + firstTd + "<td class='lastTh center'>" + value.codAF +"</td></tr>");
                }); 
```

jquery 函数仅捕获对第一个复选框的单击。

有人可以帮助我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T10:14:28.803

尝试将事件委托给现有对象：

```
jQ('#justifAfList').on('click','input:checked',function() {
    alert(jQ("input:checked").length);
}); 
```

或者，如果您使用低于 1.7 的版本，请使用“live”。

# c - 在 C 数据库中处理文件的困难

> ID：14052880
> 
> 赞同：-5
> 
> 时间：2012-12-27T10:10:10.627
> 
> 标签：c

问题解决了dddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddd

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T10:34:54.713

1.  编译错误

    *   缺少 addRecord() 实现

    *   c的typedef需要在使用前进行。

    *   文件 *fp 需要替换为 FILE *fp

2.  其他问题

    *   createNew() 听起来好像您想创建一个新文件“Customer.dat”，而访问模式“r”打开一个现有文件进行读取。使用“w”作为创建新文件的访问模式。
    *   当然，如果先前的 fopen() 调用成功，您应该只调用 fclose(fp)。
    *   add_Customer() 比预期多添加一位客户（在 for 循环中将 <= 替换为 <）

等等。我不相信这个列表是完整的......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T10:20:46.230

1.  `void addRecord(c c1[30]);` needs to be after your typedef declaration of type `c`, otherwise the compiler doesn't know what `c` is.
2.  File needs to be replaced with uppercase `FILE`.
3.  Provide an implementation for `addRecord()` otherwise it's unresolved.

# asp.net - 使用实体框架在 ASP.Net 网站中删除记录时出错

> ID：14052889
> 
> 赞同：1
> 
> 时间：2012-12-27T10:10:37.010
> 
> 标签：asp.net, sql-server, entity-framework

我在 Visual Studio 2012 的 asp.net 中使用实体框架。我只是在学习这些东西。我跟着这个[教程](http://www.asp.net/web-forms/tutorials/getting-started-with-ef/the-entity-framework-and-aspnet-getting-started-part-2)

刚刚创建了网格并运行了网站，除了删除操作之外一切都很好。当我单击删除时，它会显示如下错误：

![在此处输入图像描述](../Images/1111c146946a86ddfc5a45662bb6e40b.png)

有人能告诉我为什么我会收到这个错误以及如何纠正这个错误。. .

提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-27T10:27:35.657

您的问题的答案在您的教程中给出。（仅当您使用相同的表和相同的约束时才适用）在“*修改 EntityDataSource 控件标记以提高性能*”下

> 删除按钮也有效。对于具有注册日期的行单击删除，该行将消失。（没有注册日期的行代表教师，您可能会收到参照完整性错误。在下一个教程中，您将过滤此列表以仅包括学生。）

您收到引用错误意味着您没有在删除操作中使用级联，因此当您删除人员表中的一行时，因为在学生成绩表中引用了同一列。所以删除不会发生。使用级联 - ON DELETE CASCADE。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-27T10:17:33.070

好像您想从学校推荐的 CourseInstructor 中删除一个人。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-27T10:27:56.637

这是一个非常明确的错误消息，快速 google 可以帮助您更快地解决。

Table CourseInstructor 与 Table Person 具有外键关系。在您的 EF 图中，您可以将其视为一种关系（两个实体之间的一条线）。

当 CourseInstructor 仍然具有对 Person 的引用时，数据库不会让您删除 Person，因此您需要首先删除相关的 CourseInstructor，最好是作为事务的一部分。

如果您真的很苦恼，请查找“参照完整性”和“实体框架中的参照完整性”。

希望这会有所帮助。

# php - HTML - 在标记我有一个城市列表。 <select name="cities"><option value="nc">新城市..</option> <option value="quetta">奎达</option> <option value="karachi">卡拉奇</option> <option value="islamabad">伊斯兰堡</option> ID：14052891 赞同：1 时间：2012-12-27T10:10:44.563 标签：php, html 回答 #1 赞同：4 时间：2012-12-27T10:19:59.637 //first you have a specific city of a user $user_city = 'city-name'; //Then you have a list of all cities available (probably from the database, // but I use array here as an example) $cities = array('city1','city2','city3'); <select name="cities"> <?php foreach ( $cities as $city ) { if ( $city == $user_city ) { echo "<option value='".$city."' selected>$city</option>"; } else { echo "<option value='".$city."'>$city</option>"; } } ?> </select> 回答 #2 赞同：1 时间：2012-12-27T10:13:53.857 只需检查数据库中的值并使用 javascript 或 php 将选定的选项添加到该选项 <option value="murree" selected >Murree</option> 回答 #3 赞同：1 时间：2012-12-27T10:14:23.387 将您的城市列表放入数组而不是硬编码的 HTML。 循环遍历列表并输出option每个元素。 当您这样做时，与从数据库中检索到的值进行比较。selected如果匹配则添加。 回答 #4 赞同：0 时间：2012-12-27T10:24:37.120 一种可能的解决方案可能是将您的代码结构更改为以下内容： // hardcoded cities or perhaps loaded from elsewhere $cities = [ "nc" => "New city...", "quetta" => "Quetta", "karachi" => "Karachi" // ... ]; // user's city fetched from the database $userCity = "quetta"; echo '<select name="cities">'; foreach ($cities as $key => $value) { echo '<option ' . ($userCity === $key ? 'selected' : '') . ' value="' . $key . '">' . $value . '</option>'; } echo '</select>'; 回答 #5 赞同：-1 时间：2012-12-27T10:20:51.860 with JQuery $(function() { $("#gate").val('Gateway 2'); }); Working Demo from here</select>

# linux - 删除linux中包含双破折号的文件

> ID：14052892
> 
> 赞同：10
> 
> 时间：2012-12-27T10:10:50.147
> 
> 标签：linux, rm

> **可能重复：**
> [无法删除终端中的特殊命名文件](https://stackoverflow.com/questions/791155/unable-to-remove-a-special-named-files-in-terminal)

我觉得问得很傻，但是如何在 linux 中删除一个名为 的文件`--preserve-permissions`？

我试过：

```
rm "--preserve-permissions"

and

rm "\-\-preserve-permissions" 
```

两者都不起作用。谢谢。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-12-27T10:12:03.657

有几种技术，但这种文件名最直接的方法是：

```
rm ./--preserve-permissions 
```

对于具有不可打印或难以破译字符的文件名，请使用

```
rm -i * 
```

这会提示每个文件名并等待`y`是否`n`删除文件（交互式）。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-12-27T10:11:45.513

采用：

```
rm -- --preserve-permissions 
```

本身的`--`意思是“开关到此结束，后面的一切都是文件名”。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-27T10:16:18.037

您可以使用 inode 编号而不是文件名。请参阅[http://www.cyberciti.biz/tips/delete-remove-files-with-inode-number.html](http://www.cyberciti.biz/tips/delete-remove-files-with-inode-number.html)

# ios - 如何从 iOS 中的 iPod 库中检索播放列表？

> ID：14052893
> 
> 赞同：3
> 
> 时间：2012-12-27T10:11:08.330
> 
> 标签：ios, cocoa-touch, uitableview

我正在尝试`MPMediaQuery`在 iOS 中从 iPod 库中检索播放列表。我想在`UITableView`.

这是我的代码`viewDidLoad`。

```
MPMediaQuery *myQuery = [[MPMediaQuery alloc] init];
[myQuery setGroupingType: MPMediaGroupingPlaylist];
arrayOfPlaylist = [myQuery collections]; 
```

和`UITableViewCell`方法

```
 static NSString *CellIdentifier = @"Cell";

    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if (cell == nil)
    {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];
    }

    for(int i=0;i<self.arrayOfPlaylist.count;i++)
    {
        dic = [self.arrayOfPlaylist objectAtIndex:0];
        cell.textLabel.font = [UIFont systemFontOfSize:10];
        cell.textLabel.text = [NSString stringWithFormat:@"%@",[self.arrayOfPlaylist objectAtIndex:indexPath.row]];
    }

    return cell; 
```

在我写完上面的代码后，`UITableView`我只收到以下消息：

```
<MPConcreteMediaPlaylist : 0x1e51afd0> 
```

我不知道那是什么以及如何将播放列表名称转换为字符串。当我用`NSLog`method 测试时，我的播放列表计数是正确的。

但我只收到上述消息，没有播放列表名称`UITableView`。

我只是iOS的初学者。

请帮我在 中显示播放列表`UITableView`。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-27T10:35:49.723

可以像这样探索播放列表：

```
MPMediaQuery *myQuery = [[MPMediaQuery alloc] init];

arrayOfPlaylist = [myQuery collections];

for (MPMediaPlaylist *playlist in arrayOfPlaylist) {
    NSLog (@"Playlist :%@", [playlist valueForProperty: MPMediaPlaylistPropertyName]);
    NSArray *songs = [playlist items];
    for (MPMediaItem *song in songs) {
        NSString *strSongTitle =
            [song valueForProperty: MPMediaItemPropertyTitle];
        NSLog (@"Title : %@", strSongTitle);
    }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-27T11:19:45.473

我得到了我自己问题的答案。

就这个。

```
MPMediaQuery *query = [MPMediaQuery playlistsQuery]; 
NSArray *playlists = [query collections];

for(int i = 0; i < [playlists count]; i++) 
{
NSLog(@"Playlist : %@", [[playlists objectAtIndex:i] valueForProperty: MPMediaPlaylistPropertyName]);
} 
```

# python - Celery : 调度一个使用最后执行结果的任务

> ID：14052899
> 
> 赞同：1
> 
> 时间：2012-12-27T10:11:24.790
> 
> 标签：python, celery

我从 Celery（与 Django 集成）开始。

我想安排一个任务，每 5 分钟一次。该任务可以有一个参数，该参数是最后一个任务执行结果（它充当上下文）。

我找到了如何链接和安排任务，但我找不到将这个“上下文”提供给下一个任务的正确方法。

抱歉，如果我错过了 Celery 文档中的某些内容..

谢谢你的帮助，阿诺。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T12:23:52.953

我认为最好使用一些持久性存储来解决这个问题。`eta`但是您可以使用或`countdown` [参数](http://docs.celeryproject.org/en/latest/userguide/calling.html#eta-and-countdown)在 celery 中运行延迟任务：

> ETA（预计到达时间）允许您设置一个特定的日期和时间，这是您的任务将执行的最早时间。倒计时是将 eta 设置为未来几秒的快捷方式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T01:22:50.063

我实施了亚历克斯瓦西的解决方案。

首先，我尝试为每个任务使用相同的 id，但有时，该任务无法检索到最后一个结果。

我转向回调方式，所以每次我的任务结束时，我都会使用正确的 ETA 开始另一个任务，并将最后一个结果作为参数传递。它工作得很好。

对于错误处理，我在[task_failure 信号](http://docs.celeryproject.org/en/latest/userguide/signals.html#task-failure)上附加了一个方法。

# jquery - 更改 p 标签的不同背景颜色

> ID：14052900
> 
> 赞同：-4
> 
> 时间：2012-12-27T10:11:28.580
> 
> 标签：jquery

```
<div id="r_1" class="white"></div>
<div id="r_2" class="black"></div>
<div id="r_3" class="blue"></div>
<div id="r_4" class="red"></div>
<div id="r_5" class="green"></div>
<div id="r_6" class="white"></div>

<p id="p_r_1"> some...</p>
<p id="p_r_2"> some...</p>
<p id="p_r_3"> some...</p>
<p id="p_r_4"> some...</p>
<p id="p_r_5"> some...</p>
<p id="p_r_6"> some...</p> 
```

在每次 div 点击时，我需要分别更改`p`标签的不同背景颜色。`div`有时&`p`标签的数量可能会有所不同。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-27T10:18:47.267

```
var $div = $('div'), $p = $('p');    
// var $div = $('div[id^="r_"]'), $p = $('p[id^="p_r"]');

$div.on('click', function(){
   var ind = $div.index(this);
   $p.eq(ind).addClass(this.className);
}); 
```

[http://jsfiddle.net/WdJZ6/](http://jsfiddle.net/WdJZ6/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-27T10:25:13.330

```
​$(document).ready(function(){
   $("#divColurs div").click(function(){

       $("#p_" + $(this).attr("id")).css("background-color",$(this).attr("class"));        
   });
});​ 
```

请参阅此处的工作示例：http: [//jsfiddle.net/GrgKd/](http://jsfiddle.net/GrgKd/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-27T10:47:26.977

这将是解决方案：http: [//jsfiddle.net/CdFQJ/](http://jsfiddle.net/CdFQJ/)

```
$('div[id^="r_"]').click(function() {
    $("#p_" + $(this).attr("id")).css("background-color", $(this).attr("class"));
}); 
```

# java - GWT 战争文件使用旧的源文件

> ID：14052903
> 
> 赞同：2
> 
> 时间：2012-12-27T10:11:38.163
> 
> 标签：java, gwt, tomcat, ant, war

我正在使用 Ant builder 和 Eclipse 创建我的 GWT 项目的 war 文件，以便在 Tomcat（在 Windows 7 机器上）上部署。我正在遵循以下[简单的教程](http://blog.elitecoderz.net/gwt-and-tomcat-create-war-using-eclipse-to-deploy-war-on-tomcat/2009/12/)。

不幸的是，在部署到 Tomcat 之后，我发现它一直在使用旧的源文件。

我尝试了以下解决方案：

*   我重新导出了 src jar 文件。
*   我做了清洁项目。
*   我删除了war文件和jar文件并重新运行了几次脚本。
*   我多次从 Tomcat 部署和取消部署。
*   Tomcat 是全新安装的，因此过去没有原始的战争文件。

我对 Ant 和 Tomcat 都不是很了解。

# ruby - Ruby 给类变量包括

> ID：14052906
> 
> 赞同：0
> 
> 时间：2012-12-27T10:11:45.413
> 
> 标签：ruby, class, inheritance, module, include

我正在玩模块和类来完成一些事情。

当我在没有任何继承的情况下启动 MyClass 时`class MyClass::A4.generate`，A4 会覆盖格式功能。

A4 看起来像这样：

```
class A4 < MyClass
  def somefunction
    format = { :width => 200, :height => 100 }
  end
end 
```

但现在我想在几种格式上创建多个类（生成不同类型的文件）。

我的第一次尝试是，`class MyClass < AnotherClass`但这更像是在 Ruby 中尝试 Javacode，这就是互联网上很多人所说的。

现在第二次尝试更像 Ruby：

```
module AnotherModule
 def somefunction
   format = { :width => 50 }
 end
end

class MyClass
  include AnotherModule
  def initialize
  end
  ......
end 
```

这样的事情可能吗？

```
class A4 < AnotherModule
  def somefunction
    format = { :width => 200, :height => 100 }
  end
end

MyClass::A4.new.generate 
```

如果是这样，怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-27T12:40:37.633

我不喜欢你的名字，所以从现在开始，让我叫`Afile`你叫什么`MyClass`，叫`PrintSettings`什么`AnotherModule`。

假设你有`PrintSettings`,`A4`并`Afile`像这样定义

```
module PrintSettings
  # stuff
end

module A4
end

class Afile
  include PrintSettings
end 
```

现在，您想要动态包含`A4`（重要`A4`的是模块而不是类），您可以在内部某处执行以下操作`Afile`

```
extend format

# example:

class Afile
  include PrintSettings

  def format=(new_format)
    extend new_format
  end
end

# and then using like:

file = Afile.new
file.format = A4 
```

所以，总而言之，当你想在定义类时混入一个模块时，你使用`include`，当你有一个对象，并希望该对象扩展某个模块时，你使用`extend`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T11:04:07.557

如果我正确理解了你的问题，

```
class A4 < AnotherModule
end

MyClass::A4.new.generate 
```

上面的代码没有按预期运行，因为 A4 类正在扩展一个模块，该模块将所有方法`AnotherModule`作为 A4 中的静态方法。

如果 generate 是模块 AnotherModule 给出的方法，

```
`MyClass::A4.generate` will work. 
```

[http://railstips.org/blog/archives/2009/05/15/include-vs-extend-in-ruby/](http://railstips.org/blog/archives/2009/05/15/include-vs-extend-in-ruby/)

希望这可以帮助。

# php - 在活动目录上从 php 创建用户

> ID：14052912
> 
> 赞同：0
> 
> 时间：2012-12-27T10:12:06.993
> 
> 标签：php, windows, active-directory

我有以下代码：

```
<?php
$ldapConn = ldap_connect('ldap://XXX.YYY.WWW.NNN:389');
ldap_set_option($ldapConn, LDAP_OPT_PROTOCOL_VERSION, 3);

ldap_bind( $ldapConn, 'CN=Administrador,CN=Users,DC=XXX,DC=YYY', 'PASWD');

$dn_user='CN=testLDAP,OU=empleados,OU=usuarios_XXX,DC=XXX,DC=YYY';;

$ldaprecord['cn'] = "testLDAP";
$ldaprecord['givenName'] = "testLDAP";  
$ldaprecord['sn'] = "testLDAP";
$ldaprecord['sAMAccountName'] = "testLDAP";
$ldaprecord['UserPrincipalName'] = "testLDAP@XXX.com";
$ldaprecord['displayName'] = "testLDAP";
$ldaprecord['name'] = "testLDAP";
$ldaprecord['UserAccountControl'] = "544";
$ldaprecord['objectclass'][0] = 'top';
$ldaprecord['objectclass'][1] = 'person';
$ldaprecord['objectclass'][2] = 'organizationalPerson';
$ldaprecord['objectclass'][2] = 'user';
$ldaprecord['mail'] = "lkl@fh.com";

ldap_add($ldapConn, $dn_user, $ldaprecord);
ldap_unbind($ldapConn);  
?> 
```

使用此代码，我可以在 Active Directory 上创建一个用户，但如果我使用“Active Directory 用户”MMC 来定位此脚本创建的用户，我在创建它的 OU 上看不到该用户，但我可以看到它来自同一 OU 中的 ADSI 编辑，我在“Active Directory 用户”MMC 中看不到它，我可以在“Active Directory 用户”MMC 中的搜索选项中搜索用户。

我也不能以普通用户身份登录（手动设置密码）

可能是 ldaprecord 中的错误或缺少属性吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T12:46:47.850

我又试了一次，现在它起作用了，我真的不知道为什么。我怀疑 mmc 控制台有什么问题，代码是一样的，它可以正常工作。

# android - 长期运行 IPC 服务的省电策略

> ID：14052915
> 
> 赞同：1
> 
> 时间：2012-12-27T10:12:23.393
> 
> 标签：android

我阅读了这篇很棒的博客文章[Android 架构教程：使用后台服务开发应用程序（使用 IPC）](http://mindtherobot.com/blog/37/android-architecture-tutorial-developing-an-app-with-a-background-service-using-ipc/)

作者展示了在单独进程中以固定间隔运行的推文检索服务。

该服务将无限运行。我意识到停止该过程，去**管理应用程序**并明确停止服务是唯一的方法。

请注意，这不是一种对电池非常友好的方式。甚至作者声称自己。

> 是的，Android 后台服务也有一个阴暗面——太多的服务在后台做太多的事情会减慢手机的速度并消耗电池。然而，这并不是我想在这篇文章中提出的内容，所以也许我们会在另一篇文章中回到资源管理礼仪。

但是，作者不再更新他的博客。

我尝试通过`TweetViewActivity`.

```
@Override
protected void onDestroy() {
    super.onDestroy();              

    try {
        api.removeListener(collectorListener);
        unbindService(serviceConnection);
    } catch (Throwable t) {
        // catch any issues, typical for destroy routines
        // even if we failed to destroy something, we need to continue destroying
        Log.w(TAG, "Failed to unbind from the service", t);
    }

    // New code added by Cheok. Not working. Not sure why.
    this.stopService(intent);

    Log.i(TAG, "Activity destroyed");
} 
```

但这不起作用。我可以看到服务仍在运行。我可以知道，一旦我退出，停止 IPC 服务的正确方法是`Activity`什么？对于上述示例，什么是好的节电策略？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T10:35:40.267

它仍在运行的原因是系统从未调用过 onDestroy。

如果您查看此链接： http: [//developer.android.com/reference/android/app/Activity.html](http://developer.android.com/reference/android/app/Activity.html)您可以从图中看到 onDestroy 仅在系统即将从内存中清除您的应用程序时调用，并且根据内存限制，它可能永远不会被调用。

唯一可以保证被调用的回调是`onPause()`并且你应该依靠它来停止你的服务。

# mysql - 查找结果集中某个字段是否存在重复值

> ID：14052920
> 
> 赞同：1
> 
> 时间：2012-12-27T10:13:03.323
> 
> 标签：mysql, oracle, sql-server-2008

我有这样的结果集：

```
A    B
-------
1    10
2    10
2    10 
3    10
4    10
5    10 
```

我选择 A 的值对应于 B 的值，例如对应于 10 作为 B 的值 A 的值有不同的值，例如 1、2、2、3、4、5。

我想知道对于 B 的任何值，A 中是否存在重复值。因为在这种情况下，2 是重复的，所以在这种情况下的答案是肯定的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-27T10:17:03.343

在标准 ANSI SQL 中，您可以简单地使用 GROUP BY：

```
select a, b
  from my_table
 group by a, b
having count(*) > 1 
```

这将返回超过一行的 和 的每个组合，`a`并且`b`它将在每个指定的 RDBMS 上工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T10:19:21.853

使用组

```
SQL>   with data as (select rownum A ,   10 B from dual connect by level <= 5
  2                union all
  3                select 2 A ,   10 B from dual)
  4  select b, case when count(*) - count(distinct a) > 0 then 'YES' else 'NO' end has_dups
  5    from data
  6   group by b;

         B HAS
---------- ---
        10 YES

SQL>
SQL> with data as (select rownum A ,   10 B from dual connect by level <= 5
  2                union all
  3                select 2 A ,   10 B from dual)
  4  select b, a dup_val, count(*) number_of_dups
  5    from data
  6   group by b, a
  7   having count(*) > 1;

         B    DUP_VAL NUMBER_OF_DUPS
---------- ---------- --------------
        10          2              2 
```

# java - 如何使用 Java 在 Google App Engine 中发送电子邮件

> ID：14052921
> 
> 赞同：1
> 
> 时间：2012-12-27T10:13:06.617
> 
> 标签：java, google-app-engine, jsp

我在使用 Java 中的 Google App Engine 的表单中使用忘记密码选项。jsp程序包含如下代码：

```
<input type="text" size=18 name="emailcheck">
<input type="submit" value="Submit"> 
```

如何验证电子邮件地址并将重置电子邮件链接发送到该验证电子邮件？是Oracle提供的普通Java Mail API，[Java Mail API](http://www.oracle.com/technetwork/java/javamail/index.html)可以与Google App Engine一起使用，还是我需要为Google App Engine编写一些特定的代码？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-27T10:22:56.027

App Engine 有自己的[Java Mail API](https://developers.google.com/appengine/docs/java/mail/overview)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-27T10:22:52.123

我正在分享一个链接，您可以通过该链接在 GAE 中配置电子邮件服务。

[https://developers.google.com/appengine/docs/java/mail/usingjavamail](https://developers.google.com/appengine/docs/java/mail/usingjavamail)

您需要在构建路径中配置 javax.mail jar 来配置它。

并确保您使用您的管理员电子邮件发送电子邮件，您正在使用这些电子邮件部署您的应用程序。这只会在服务器上部署一次。

> 发送电子邮件的代码

```
 import java.io.UnsupportedEncodingException;
   import java.util.Properties;

   import javax.mail.Message;
   import javax.mail.MessagingException;
   import javax.mail.Session;
   import javax.mail.Transport;
   import javax.mail.internet.AddressException;
   import javax.mail.internet.InternetAddress;
   import javax.mail.internet.MimeMessage;

   public class SendMail {  
     public void sendMail(String sendEmailFrom,String sendMailTo,String recipientName,String messageSubject,String messageText){
    Properties prop = new Properties();
    Session session = Session.getDefaultInstance(prop,null);
    try{    
        Message msg = new MimeMessage(session);
        msg.setFrom(new InternetAddress(sendEmailFrom));
        msg.addRecipient(Message.RecipientType.TO, new InternetAddress(sendMailTo, "Mr./Ms. "+recipientName));
        msg.setSubject(messageSubject);
        msg.setText(messageText);
        Transport.send(msg);
        System.out.println("Successfull Delivery.");
    } catch (AddressException e) {
        e.printStackTrace();
    } catch (MessagingException e) {
        e.printStackTrace();
    } catch (UnsupportedEncodingException e) {
        e.printStackTrace();
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-27T11:21:18.343

如果您只需要发送\接收电子邮件，您可以使用 IMAP 访问 Google 邮件。在这种情况下，普通的 Java Mail API 就可以了。

如果你打算有一些特殊的功能更好地使用[Google Java Mail API](https://developers.google.com/appengine/docs/java/mail/)。它使用与普通 Jva Mail API 相同的接口。因此，您只需要添加 google jar（不要忘记排除 oracle 的邮件 jar）。

# java - 错误 1136 (21S01)：列计数与第 1 行的值计数不匹配

> ID：14052923
> 
> 赞同：1
> 
> 时间：2012-12-27T10:13:15.047
> 
> 标签：java, mysql

我有一张名为 event_log 的表，它的结构是这样的

```
CREATE TABLE `incident_log` (
`il_id` int NOT NULL auto_increment,    
`il_i_id` int default NULL,
`il_time_occured` datetime NOT NULL,
`il_status` varChar(255) NOT NULL default 'OPEN',       
`il_prevstate` varChar(255),        
`il_trigger` varchar(255),          
`il_current_state` int NOT NULL default 0, 
`il_prev_state` int NOT NULL default 0, 
`il_current_trigger` int NOT NULL default 0,                    
`il_prev_trigger` int NOT NULL default 0,
`il_pol_as_status` mediumblob,  
`il_obj_id` int,        
`il_occuredCount` int default 0,
`il_reportedOccuredCount` int default 0, 
`il_reportedCount` int default 0,   
`il_cascadeReportedTime` bigint default 0, 
`il_obj1` text,     
`il_obj2` text,     
`il_obj3` text,     
`il_itype` enum('CRITICAL','EVENT') NOT NULL default 'CRITICAL',
`il_usrNotifyStatus` enum('NEW','NOTIFIED','NOT_NOTIFIED') NOT NULL default 'NEW', 
`il_rootcause_il_id` int NOT NULL DEFAULT 0,
`il_rootcause_info` text DEFAULT NULL,
`il_rootcause_i_objclass` enum('DATASET','COMPONENT','SERVICE','SERVER','BCS') default NULL, 
`il_rootcause_i_obj_id` int(11) default 0,
`il_acset_id` int default NULL, 
`il_intRes1` int, 
`il_intRes2` int, 
`il_intRes3` int, 
`il_intRes4` int, 
`il_varcharRes1` varchar(64), 
`il_varcharRes2` varchar(255) ); 
```

但是当插入以下数据时，它给了我一个错误

```
ERROR 1136 (21S01): Column count doesn't match value count at row 1 
```

```
INSERT INTO incident_log  (il_i_id, il_time_occured, il_cascadeReportedTime,
                           il_occuredCount,il_obj_id, il_obj1, il_obj2, il_obj3,
                           il_status, il_rootcause_il_id, il_rootcause_info, 
                           il_rootcause_i_objclass, il_rootcause_i_obj_id, 
                           il_acset_id)  
                  VALUES  (1,'',0,0,12,'','','','OPEN',0,NULL,NULL,0,NULL); 
```

请帮我解决这个问题..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T10:42:17.853

我在您的创建表语法中发现了一些更正

1.  应在主键中定义自动增量列
2.  你`il_time_occured`在约会时间。`''`通过错误不正确的字段插入（空值）时。

你的插入语句没有错

此查询工作正常。

```
INSERT INTO incident_log (il_i_id, il_time_occured, il_cascadeReportedTime, il_occuredCount,il_obj_id, il_obj1, il_obj2, il_obj3, il_status, il_rootcause_il_id, il_rootcause_info, il_rootcause_i_objclass, il_rootcause_i_obj_id, il_acset_id) VALUES (1,'2012-12-27 16:03:32',0,0,12,'','','','OPEN',0,NULL,NULL,0,NULL) 
```

请参阅屏幕短： ![在此处输入图像描述](../Images/a70593d1d263e0f93907c75246da243d.png)

[请参阅 sqlfiddle 演示。](http://sqlfiddle.com/#!2/73380)

# c# - REST Web 服务中的西里尔字母 GET 请求

> ID：14052929
> 
> 赞同：1
> 
> 时间：2012-12-27T10:13:49.287
> 
> 标签：c#, asp.net, web-services, encoding, character-encoding

我有我的 REST Web 服务，它应该接收带有西里尔字母的 GET 编码请求。

例如：www.service/srv?param1=%D1%E0%ED%EA%F2

我知道这是 Windows-1251 ISO-8859-1，但作为我的 Web 服务函数中的输入参数值，总是有类似问号的东西。我猜该服务将字符串转换为 UTF-8。

是否可以在 Windows-1251 代码页中接收 GET 请求？

有一个类似的线程：[Cyrillic letters are wrongly encoding in the C# Web Service](https://stackoverflow.com/questions/10562166/cyrillic-letters-are-incorrectly-encoded-in-the-c-sharp-web-service) 答案是使用 utf-8 编码。但在我的情况下，我无法更改对 Web 服务的请求。

网络服务说明：

```
[OperationContract]
   [WebInvoke(Method="GET", ResponseFormat=WebMessageFormat.Json,
            BodyStyle = WebMessageBodyStyle.Bare, 
            UriTemplate = @"param?p1={p1}&p2={p2}&p3={p3}…")]

   string MyFunction(string p1, string p2, string p3, …); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T14:46:49.963

我能提供的唯一解决方案是：

```
 PropertyInfo[] inf = WebOperationContext.Current.IncomingRequest.GetType().GetProperties(BindingFlags.NonPublic | BindingFlags.Instance);
                HttpRequestMessageProperty val = (HttpRequestMessageProperty)inf[0].GetValue(WebOperationContext.Current.IncomingRequest, null);
                string paramString = HttpUtility.UrlDecode(val.QueryString, Encoding.GetEncoding(1251));
                Uri address = new Uri("http://server.ru/services/service.svc/reg?" + paramString);

                p1 = HttpUtility.ParseQueryString(address.Query).Get("p1");
                p2 = HttpUtility.ParseQueryString(address.Query).Get("p2");
                p3 = HttpUtility.ParseQueryString(address.Query).Get("p3");
                ... 
```

我想知道为什么全球化标签在这种情况下不起作用。尽管此代码有效，但我非常感谢有关此问题的任何进一步建议。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T10:44:39.950

您可以尝试像这样更改您的 web.config：

```
<system.web> 
    <globalization requestEncoding="iso-8859-1" ... other stuff... /> 
</system.web> 
```

请注意，它可能会对您的应用程序产生一些其他副作用。

# java - 无法使用 Java API 将本地 csv 文件上传到 BigQuery

> ID：14052930
> 
> 赞同：2
> 
> 时间：2012-12-27T10:13:50.413
> 
> 标签：java, csv, upload, google-bigquery

我尝试使用 java api 将本地 csv 文件导入 BigQuery。

但我没能做到。

如果您了解我在下面的代码中的错误，请告诉我...

```
 TableSchema schema = new TableSchema();
        ArrayList<TableFieldSchema> fields = new ArrayList<TableFieldSchema>();
        fields.add(new TableFieldSchema().setName("nn").setType("String"));
        fields.add(new TableFieldSchema().setName("gg").setType("String"));
        fields.add(new TableFieldSchema().setName("uu").setType("String"));
        schema.setFields(fields);

        TableReference destTable = new TableReference();
        destTable.setProjectId(projectId);
        destTable.setDatasetId(datasetId);
        destTable.setTableId("testUploads_fromJava");

        FileContent content = new FileContent("application/octet-stream", new File(csv));

        Job job = new Job();
        JobConfiguration config = new JobConfiguration();
        JobConfigurationLoad configLoad = new JobConfigurationLoad();

        configLoad.setSchema(schema);
        configLoad.setDestinationTable(destTable);

        config.setLoad(configLoad);
        job.setConfiguration(config);

        Insert insert = bigquery.jobs().insert(projectId, job, content);
        insert.setProjectId(projectId);
        JobReference jobRef = insert.execute().getJobReference(); 
```

“JobReference jobRef = insert.execute().getJobReference();”中发生错误。

这是错误代码。

```
java.lang.NullPointerException
at java.net.URI$Parser.parse(URI.java:3004)
at java.net.URI.<init>(URI.java:577)
at com.google.api.client.http.GenericUrl.<init>(GenericUrl.java:100)
at com.google.api.client.googleapis.media.MediaHttpUploader.upload(MediaHttpUploader.java:269)
at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:408)
at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:328)
at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.execute(AbstractGoogleClientRequest.java:449)
at bigquery.GettingBigQueryResult.loadLocalCSVtoBQ(GettingBigQueryResult.java:117)
at main.GetBQData.main(GetBQData.java:70) 
```

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T08:42:12.033

@greeness[谢谢](https://stackoverflow.com/users/1667256/greeness)你的建议。

我对设置方案有误。我修改代码，因为方案定义是从 json 加载的。

正确的代码如下。

```
TableSchema schema = new TableSchema();
        schema.setFields(new ArrayList<TableFieldSchema>());
        JacksonFactory JACKSON = new JacksonFactory();
        JACKSON.createJsonParser(new FileInputStream("schema.json"))
        .parseArrayAndClose(schema.getFields(), TableFieldSchema.class, null);
        schema.setFactory(JACKSON);

        TableReference destTable = new TableReference();
        destTable.setProjectId(projectId);
        destTable.setDatasetId(datasetId);
        destTable.setTableId(tableId);

        FileContent content = new FileContent("application/octet-stream", new File(csv));

        Job job = new Job();
        JobConfiguration config = new JobConfiguration();
        JobConfigurationLoad configLoad = new JobConfigurationLoad();

        configLoad.setSchema(schema);
        configLoad.setDestinationTable(destTable);

        configLoad.setEncoding("UTF-8");
        configLoad.setCreateDisposition("CREATE_IF_NEEDED");

        config.setLoad(configLoad);
        job.setConfiguration(config);

        Insert insert = bigquery.jobs().insert(projectId, job, content);
        insert.setProjectId(projectId);
        JobReference jobRef = insert.execute().getJobReference();
        String jobId = jobRef.getJobId(); 
```

谢谢你。

# highcharts - 如何制作 Highchart 2 个或更多内馅饼，但只有 1 个带有甜甜圈类型的外馅饼？

> ID：14052931
> 
> 赞同：0
> 
> 时间：2012-12-27T10:13:50.847
> 
> 标签：highcharts, donut-chart

我需要一个带有 2 个或更多内部饼图和 1 个带有 Highchart 插件甜甜圈类型的外部饼图的图表。

这是甜甜圈的例子：

[http://tinyurl.com/d4fp8p9](http://tinyurl.com/d4fp8p9)

这是jsfiddle。它有类别，每个类别都有超过 1 个数据。我想要的是 ？我有类别，但每个类别都没有数据。只有 1 个切片具有外部饼图的数据。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T10:28:34.017

[这是工作演示](http://jsfiddle.net/NTkSc/)

实际上，您需要`drilldown`从与甜甜圈派没有链接的派中删除属性并检查数据：

```
 if(data[i].drilldown!=undefined){
    for (var j = 0; j < data[i].drilldown.data.length; j++) {
        var brightness = 0.2 - (j /data[i].drilldown.data.length) / 5 ;
        versionsData.push({
            name: data[i].drilldown.categories[j],
            y: data[i].drilldown.data[j],
            color: Highcharts.Color(data[i].color).brighten(brightness).get()
        });
    }
}} 
```

[或者像这个Demo](http://jsfiddle.net/NTkSc/1/)一样放空钻取

# javascript - Wordpress ReferenceError：未定义邮箱

> ID：14052933
> 
> 赞同：0
> 
> 时间：2012-12-27T10:13:56.057
> 
> 标签：javascript, wordpress

我已经在 wordpress.org 上发布了这个，我希望我能在 stackoverflow 中得到更快的响应。

问题：导航菜单页面中的菜单突然消失了。并得到了这个错误

```
ReferenceError: postboxes is not defined 
```

**...我尝试停用/激活插件，当联系表格 7**和**类型**插件都被激活时，似乎会发生这种情况。但这仅发生在特定服务器上，它在我的开发服务器上运行良好。

一些建议是增加内存限制和更改文件/文件夹权限，但都没有解决问题。

多谢你们！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T10:29:32.937

它是由插件引起的。停用所有不必要的插件，然后它开始正常工作

# ajax - 将 URL 变量转换为 ajax 请求

> ID：14052934
> 
> 赞同：0
> 
> 时间：2012-12-27T10:13:56.023
> 
> 标签：ajax, url, variables

我正在尝试将 URL 变量（pid）放入 ajax 请求（url）中，但没有成功。

我的网址是：www.domain.com/news.html?pid=1256

我的java脚本：

```
$(document).ready(function() {
var output = $('#news');
var id = jQuery(this).attr('pid');

$.ajax({
    url: 'http://www.domain.com/?post_type=news&post_id=' + id,
    async: false,
    callback: 'callback',
    crossDomain: true,
    contentType: 'application/json; charset=utf-8',
    type: 'POST',
    dataType: 'jsonp',
    timeout: 5000,
    success: function(data, status) {
        $.each(data.posts, function(i, item) {
            var news = '<div>' + item.title + '</div><div>' + item.content + '</div><hr/>';

            output.append(news);

        });
    },
    error: function() {
        output.text('There was an error loading the data.');
    }
});}) 
```

非常感谢你的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-27T10:19:54.383

If I understand correctly, you want to get the query param 'pid' from your current page?

You can get the query params via **window.location.search**.

To get a specific param, you should create a [getQueryVariable()](https://stackoverflow.com/a/2091331/1916258) function.

So in your case:

```
var getQueryVariable = function(variable) {
   ...
};
$(document).ready(function() {
   var output = $('#news');    
   var id = getQueryVariable('pid');
   ... 
```

# php - 如何以所需格式从数据库中检索数据（PHP MYSQL）

> ID：14052936
> 
> 赞同：2
> 
> 时间：2012-12-27T10:14:01.487
> 
> 标签：php, mysql

我在以所需格式从 db 检索数据时遇到问题。我用过 PHP MYSQL。我可以使用`while($row=mysql_fetch_array($result));`等等来检索记录......但不是我想要的格式。

假设，从 db 我得到 10 条记录作为 1 到 10 垂直，但我想要以下格式使用表。

```
1 2 3 4

5 6 7 8

9 10 
```

注意：没有记录本质上是动态的，我希望每行有 4 列。

请帮帮我。提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-27T10:24:00.147

你不能用 MySQL 做到这一点，MySQL 不是用来很好地显示你的数据，它只用于存储和检索你的数据。

您需要的是以下内容，而 $array 可以替换为数据库中的数据：

```
$array = array(1, 2, 3, 4, 5, 6, 7, 8, 9, 10);

echo '<table>';
    echo '<tr>';
for ($i = 0; $i < sizeof($array); $i++) {
    if(($i % 4) == 0 && $i != 0) {
        echo '</tr><tr>';
    }
    echo '<td>';
        echo $array[$i];
    echo '</td>';
}
    echo '</tr>';
echo '</table>'; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-27T10:21:00.783

Having 4 records per row in the database is not changing anything. There's no such a feature in database because it serves no purpose and can be achieved using PHP instead. As stated in the comments databases are not designed for data representation.

You can instead retrieve those data and store them as group of fours later using a simple PHP script:

```
$i = 0;
$in = 0;
$array = array();
while($row = mysql_fetch_array($result)) {
    if ($i%4) {
        $in++;
    }
    $array[$in][] = $result;
    $i++;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-27T10:24:36.790

正如**juergen d**所说 *，SQL 不是为数据表示而设计的。在你的逻辑中处理它*

这样你就可以

```
$array = array(1,2,3,4,5,6,7,8,9,10);
$i=0;

while($i < sizeof($array ) )
{
 if($i%4 ==0 && $i>0) echo "<br>";
  echo $array[$i++] ;
} 
```

**注意**`$array`用数据库中的数组替换

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-27T10:24:45.197

```
$data = ... your mysqli call that returns the data from mysql
$i = 0;
if ($data) {
    $HTML = '<table><tr>';
    foreach($data as $k => $v) {
         $HTML .= '<td>'.$v.'</td>';
         if ($i == 3) {
             $i = 0;
             $HTML .= '</tr><tr>';
         }
         $i++;
    }
    $HTML .= '</tr></table>';
    echo $HTML;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-10-13T21:36:18.277

这是完整的示例 :) .. 您需要在 MYSQL 中使用“Cname”列创建表“Category”

```
<?php 
    require 'ConnDB.php';
    $sql = "Select * From Category";
    $ResShowCateg = mysqli_query($conn_link, $sql); 

    echo '<table>';
    echo '<tr>';

    for ($i = 0; $i < mysqli_num_rows($ResShowCateg); $i++) {
        $row = mysqli_fetch_assoc($ResShowCateg);
        if(($i % 3) == 0 && $i != 0){
            echo '</tr><tr>';
        }
        echo '<td>';
        echo $row["Cname"];
        echo '</td>';
    }

    echo '</tr>';
    echo '</table>';

    mysqli_close($conn_link);
?> 
```

# facebook - Facebook。向用户发布更新

> ID：14052939
> 
> 赞同：1
> 
> 时间：2012-12-27T10:14:11.547
> 
> 标签：facebook

是一种以编程方式向喜欢 fb 外部页面的用户发布更新的方法吗？我知道 fb 曾经提供在页面达到某个点赞阈值时管理页面的能力，但我相信这已被弃用。有人知道其他方法可以做到这一点吗？

# jquery-ui - 当我将 .ajaxstop 用于其他功能时，jquery autcomplete 不起作用

> ID：14052942
> 
> 赞同：0
> 
> 时间：2012-12-27T10:14:23.170
> 
> 标签：jquery-ui, jquery, jquery-autocomplete

我使用这个 js 为我的网页的所有页面显示一个“请稍候”弹出窗口“我将它包含在标题中”，它工作正常，并在每次 ajax 调用时显示弹出窗口，并在完成后隐藏。

```
$('#loadingDiv')
    .hide()  // hide it initially
    .ajaxStart(function() {$('#loadingDiv').dialog({ resizable: false }).show();$(".ui-dialog-titlebar").hide();})
    .ajaxStop(function() {$('#loadingDiv').dialog("close");}); 
```

问题出现在使用 jquery 自动完成插件的页面中，因为它会干扰自动完成并且 ac 不再显示其下拉列表 我的自动完成 JS

```
$('input.completeme').each(function() {

$(this).autocomplete({
            source: function(request, response) {
                $.ajax({ url: '<?=base_url()?>booking/ac',
                data: { 'term': this.term,'name': this.element.attr('name') },
                dataType: "json",
                type: "POST",
                success: function(data){
                    response(data);
                }
            });
        },
        select: function(event, ui){
                    $("#pt_name").val(ui.item.name);
                    $("#pt_id").val(ui.item.id);
                    $("#pt_dob").val(ui.item.dob);
        },
        minLength: 2
    });
}); 
```

我认为因为自动完成也使用 .ajaxStop，所以有没有办法解决这个问题？

我真的很喜欢这个函数，因为它绑定到所有 ajax 调用，我将它包含在我的标题中，不再担心请等待弹出窗口。但它看起来像自动完成讨厌它:(

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T10:51:57.540

使用“文档”来绑定 ajaxStop 事件。

```
$(document).ajaxStop(function(){...}) 
```

我已经测试过这个解决方案并且没有问题。

# c++ - 编译检查是否编译为静态库

> ID：14052944
> 
> 赞同：7
> 
> 时间：2012-12-27T10:14:32.223
> 
> 标签：c++, visual-studio-2010, compilation, static-libraries

如果项目正在编译为 lib，我如何在编译时检查？（静态库）

我可以检查某种静态断言或其他标志吗？

我自己无法添加预处理器变量，因为它是一个实用程序，将在公司的其他项目中使用。所以我想知道是否有一些默认情况下正在发送的预处理器标志或其他东西。

我正在使用 Visual Studio 2010

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-27T12:56:20.613

预定义的宏列表中没有这样的东西 - [http://msdn.microsoft.com/en-us/library/b0084kay%28v=vs.100%29.aspx](http://msdn.microsoft.com/en-us/library/b0084kay%28v=vs.100%29.aspx)。

但默认情况下，如果 MSVC`_LIB`是“静态库”项目，它会添加到预处理器定义列表中。
（它也`_USRDLL`为 DLL 添加）

**编辑：**在 Visual Studio 2017 中，DLL 的定义是`_WINDLL`（来自 IDE 应用的“Windows 动态链接库”属性表）。该`_LIB`定义不再可用。

另一种解决方案是使用以下预处理器定义将属性表添加到项目（签入您的版本控制存储库）`_$(OutputType);%(PreprocessorDefinitions)`：.

`$(OutputType)`将解析为 DLL 的“库”和静态库的“静态库”，分别产生`_library`和`_staticlibrary`定义（或`_exe`应用程序）。

`%(PreprocessorDefinitions)`将从以前的属性表中堆叠定义。确保它也包含在项目属性中！

要添加属性表，请导航至**查看 | 其他窗口 |** Visual Studio 中的**属性管理器。**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T10:42:22.253

如果您使用的是 Visual Studio，我看不出添加您自己的预处理器定义有什么问题。这背后的原因是您*无论如何都必须提供项目文件*，因此该选项将与项目文件一起正确分发。

或者，您可能的意思是“如何检查**文件**是否被编译为库” - 没有办法（除了编译器定义）。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2016-06-03T02:38:36.277

特定程序集的构建内容在 vcxproj 文件中明确设置，它是已知的并在编译时间之前设置。可能棘手的是，在配置管理器中显示的解决方案文件设置中，您的解决方案配置和平台可能已经确定了一些与您的解决方案构建不一致的项目配置和平台。

在 vcxproj xml 中，构建输出类型将显示为`<ConfigurationType>`元素的值。

```
 <PropertyGroup Condition="'$(Configuration)|$(Platform)'=='Release|Win32'" Label="Configuration">
    <ConfigurationType>StaticLibrary</ConfigurationType>
    <UseDebugLibraries>false</UseDebugLibraries>
    <WholeProgramOptimization>true</WholeProgramOptimization>
    <CharacterSet>MultiByte</CharacterSet>
  </PropertyGroup> 
```

类似地，在项目属性页中`Configuration Properties -> General -> Configuration Type`，您可以指定程序集的构建方式。如果有意义的话，你甚至可能会偏离目标扩展，例如在构建一些 BoostPython 东西时，我将 dll 更改为 pyd。

[![项目属性突出显示配置类型设置](../Images/e4f2e1612f3efeeb02db91a24f30ae14.png)](https://i.stack.imgur.com/vAD1B.png)

为了突出我正在谈论的那种不稳定的混合，这可能是错误的或有缺陷的合并或其他原因，您可以检查解决方案配置下每个项目的逐项构建设置。我在下面给出了一个示例，其中解决方案平台是 ReleaseOffline，但解决方案中的各种项目被拨入 Release、DebugStatic 等。屏幕截图中许多项目都已关闭，但您可以想象混合依赖项会使事情变得糟糕状态混合构建类型。一些混淆可能是故意的，因此请确保您知道自己在做什么/正在寻找什么，因为 Visual Studio 在这些配置中提供了这种灵活性。还要记住，您看到的设置特定于所选的配置/平台对。改变其中任何一个，你'

[![配置管理器中的示例项目配置混合](../Images/99dbf46cfdfff3b1ee053655b0cf138d.png)](https://i.stack.imgur.com/yFU6o.png)

# joyent - 如何在 beagle bone 中下载 cloud9 示例代码的副本

> ID：14052949
> 
> 赞同：0
> 
> 时间：2012-12-27T10:14:51.477
> 
> 标签：joyent

今天是 2012 年 12 月 27 日，我刚从 RS Components 拿到我的 Beagle Bone 板。一旦我进入设备 Cloud9 IDE... 我选择了 blinkingleds.js 示例并单击了运行。它确实在运行，我试图停止它（运行过程），但机器拒绝了。不知何故，我看到了 Tour 按钮，然后单击此按钮... Cloud9 文件夹下的整个源代码都被删除了！

宾果游戏，我需要 Beagle Bone 中 Cloud9 树/文件夹下的整个文件（以前可用）的另一个副本。我怎么得到那个副本？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T13:02:27.543

带有示例的 Bonescript 库可从[http://github.com/jadonk/bonescript](http://github.com/jadonk/bonescript)获得。如果您可以在您的网络上获取您的 BeagleBone 并登录到控制台提示符，您可以：

```
cd /var/lib/cloud9
git stash
git pull 
```

这应该可以让您获得最新的代码。

# google-app-engine - 是否可以使用 objectify 从 DataStore 中获取所有命名空间

> ID：14052951
> 
> 赞同：0
> 
> 时间：2012-12-27T10:14:55.727
> 
> 标签：google-app-engine, namespaces, datastore, objectify

如何使用 objectify 从 GAE 数据存储中获取所有命名空间的列表？

我在[这里](https://developers.google.com/appengine/docs/java/datastore/metadataqueries)找到了谷歌的实现：

```
import com.google.appengine.api.datastore.DatastoreService;
import com.google.appengine.api.datastore.Entities;
import com.google.appengine.api.datastore.Entity;
import com.google.appengine.api.datastore.Query;

void printAllNamespaces(DatastoreService ds, PrintWriter writer) {

  Query q = new Query(Entities.NAMESPACE_METADATA_KIND);

  for (Entity e : ds.prepare(q).asIterable()) {
    // A nonzero numeric id denotes the default namespace;
    // see Namespace Queries, below
    if (e.getKey().getId() != 0) {
      writer.println("<default>");
    } else {
      writer.println(e.getKey().getName());
    }
  } 
```

我找不到任何方法将它与 objectify 一起使用。有谁知道这样的方式？还是尚未实施。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T10:23:46.650

使用 objectify 框架目前无法做到这一点。[在google 群组](https://groups.google.com/forum/?fromgroups=#!topic/objectify-appengine/ZqryTKFLt6E)中打开了一个讨论

# java - 无法将音频文件编码为 Vorbis

> ID：14052957
> 
> 赞同：2
> 
> 时间：2012-12-27T10:15:21.007
> 
> 标签：java, ogg, xuggler, vorbis

我试图使用 Xuggler 将音频格式转换为 ogg ( vorbis ) 文件。

首先，我已经尝试了非常基本的方法，

```
IMediaReader readermp3 = ToolFactory.makeReader(sourcefile);
IMediaWriter writer = ToolFactory.makeWriter(targetfilemp3, readermp3);
readermp3.addListener(writer);
while (readermp3.readPacket() == null) 
```

目标文件以 .ogg 结尾。这实际上有效，但是它编码为 ogg FLAC 而不是 ogg vorbis。

然后我尝试手动完成它的一些部分，

首先 - 获取原始采样率和通道号，其次 - 添加音频流，使用这些采样率、通道号和 vorbis 的编解码器 ID。

```
IMediaReader readermp3 = ToolFactory.makeReader(sourcefile);
    IContainer readercontainer = readermp3.getContainer();
    readercontainer.open(sourcefile, IContainer.Type.READ,null);

    int numStreams = readercontainer.getNumStreams();  

    IStream stream = null;
    for(int i = 0; i < numStreams; i++) {  
    stream = readercontainer.getStream(i); } 

IStreamCoder mycoder = stream.getStreamCoder();
int sourcechannels,sourcesamplerate;
sourcechannels = mycoder.getChannels();
sourcesamplerate = mycoder.getSampleRate(); 
```

/* 这些是用于获取采样率和通道，我认为它们不相关，但我*/复制它只是为了以防万一

```
IMediaWriter writer = ToolFactory.makeWriter(targetfilemp3, readermp3);
writer.addAudioStream(0, 0,ICodec.ID.CODEC_ID_VORBIS,sourcechannels, sourcesamplerate);
readermp3.addListener(writer);
while (readermp3.readPacket() == null)
       ; 
```

当我尝试运行它时，它给了我一个错误“错误 org.ffmpeg - [libvorbis @ 0436F300] 不支持指定的 sample_fmt。” “警告 com.xuggle.xuggler - 错误：无法打开编解码器 (../../../../../../../csrc/com/xuggle/xuggler/StreamCoder.cpp:831) "

旁注 = 它适用于 mp3、wav 和 flac ogg 文件。另外，我尝试将扩展名更改为 .vorbis 而不是 .ogg。还是同样的错误。

然后当然，我用谷歌搜索了它。关于这个问题只有 1 个相关的 q/a [https://groups.google.com/forum/?fromgroups=#!topic/xuggler-users/18hsI_LGxI4](https://groups.google.com/forum/?fromgroups=#!topic/xuggler-users/18hsI_LGxI4)

但是，我不明白答案=）。

非常感谢您的回答。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-05-07T05:03:44.747

***Xuggler***发生了一件奇怪的事情，它并不总是允许您将采样率设置为`IAudioSamples`. 您需要使用**`IAudioResampler`**.

我花了一段时间才弄清楚这一点。[Marty](https://groups.google.com/d/msg/xuggler-users/18hsI_LGxI4/vLYE1AeHVHEJ)的这篇文章很有帮助，尽管他的代码现在已经过时了。

这是你如何解决它。

# .

### 编码前

我在这里假设音频输入已正确设置，导致`IStreamCoder`调用`audioCoder`.

完成后，您可能正在启动`IMediaWriter`并添加一个音频流，如下所示：

```
final IMediaWriter oggWriter = ToolFactory.makeWriter(oggOutputFile);

// Using stream 1 'cause there is also a video stream.
// For an audio only file you should use stream 0.
oggWriter.addAudioStream(1, 1, ICodec.ID.CODEC_ID_VORBIS, 
                         audioCoder.getChannels(), audioCoder.getSampleRate()); 
```

现在创建一个`IAudioResampler`：

```
IAudioResampler oggResampler = IAudioResampler.make(audioCoder.getChannels(), 
                                                   audioCoder.getChannels(), 
                                                   audioCoder.getSampleRate(),
                                                   audioCoder.getSampleRate(),  
                                                   IAudioSamples.Format.FMT_FLT, 
                                                   audioCoder.getSampleFormat()); 
```

并告诉您`IMediaWriter`更新到其示例格式：

```
// The stream 1 here is consistent with the stream we added earlier.
oggWriter.getContainer().getStream(1).getStreamCoder().
                         setSampleFormat(IAudioSamples.Format.FMT_FLT); 
```

# .

### 编码期间

您当前可能正在启动一个`IAudioSamples`并用音频数据填充它，如下所示：

```
IAudioSamples audioSample = IAudioSamples.make(512, audioCoder.getChannels(), 
                                                    audioCoder.getSampleFormat());

int bytesDecoded = audioCoder.decodeAudio(audioSample, packet, offset); 
```

现在为我们的重采样数据启动*IAudioSamples ：*

```
IAudioSamples vorbisSample = IAudioSamples.make(512, audioCoder.getChannels(),
                                                IAudioSamples.Format.FMT_FLT); 
```

最后，重新采样音频数据并写入结果：

```
oggResampler.resample(vorbisSample, audioSample, 0);

oggWriter.encodeAudio(1, vorbisSample); 
```

# .

### 最后的想法

只是让您的输出文件正常播放的提示：

*   如果在同一个容器中使用音频和视频，那么音频和视频数据包的写入顺序应该是每个数据包的时间戳都高于前一个数据包的时间戳。因此，您几乎可以肯定需要某种交替写入音频和视频的缓冲机制。

# android - Android：快速滚动时 Gridview 变为空白

> ID：14052959
> 
> 赞同：1
> 
> 时间：2012-12-27T10:15:27.270
> 
> 标签：android, android-layout, android-gridview

如果我快速滚动，GridView 在 android 中将变为空白

请给我一个解决方案。

提前致谢..

这是我的代码

```
gridView.setAdapter(new ImageAdapter(ChangedDashboard.this, stringarray)); 
```

这是我在 gridview 上设置的适配器类

```
public class ImageAdapter extends BaseAdapter {
private Context context;
private final String[] menuvalues;

public ImageAdapter(Context context, String[] menuValues) {
    this.context = context;
    this.menuvalues = menuValues;
}
public View getView(int position, View convertView, ViewGroup parent) {

    LayoutInflater inflater = (LayoutInflater) context
    .getSystemService(Context.LAYOUT_INFLATER_SERVICE);

    View gridView;

    if (convertView == null) {

        gridView = new View(context);

        // get layout from mobile.xml
        gridView = inflater.inflate(R.layout.changedashboard, null);

    } else {
        gridView = (View) convertView;
    }

    TextView textView = (TextView) gridView
    .findViewById(R.id.textView1);
    textView.setText(menuvalues[position]);

    // set image based on selected text
    ImageView imageView = (ImageView) gridView
    .findViewById(R.id.imageView1);

    String mobile = menuvalues[position];

    if (mobile.equals("1")) {
        imageView.setImageResource(R.drawable.new1);
    } else if (mobile.equals("2")) {
        imageView.setImageResource(R.drawable.new2);
    } else if (mobile.equals("3")) {
        imageView.setImageResource(R.drawable.new3);
    }else if (mobile.equals("4")) {
        imageView.setImageResource(R.drawable.new4);
    } else if (mobile.equals("5")) {
        imageView.setImageResource(R.drawable.new5);
    }else if (mobile.equals("6")) {
        imageView.setImageResource(R.drawable.new6);
    } 

    return gridView;
}

public int getCount() {
    return menuvalues.length;
}

public Object getItem(int position) {
    return null;
}

public long getItemId(int position) {
    return 0;
} 
```

}

请给我这个解决方案

更新代码

```
public class ImageAdapter extends BaseAdapter {
private Context context;
private final String[] menuvalues;

public ImageAdapter(Context context, String[] menuValues) {
    this.context = context;
    this.menuvalues = menuValues;
}
public View getView(int position, View convertView, ViewGroup parent) {

    LayoutInflater inflater = (LayoutInflater) context
    .getSystemService(Context.LAYOUT_INFLATER_SERVICE);

    View gridView;

    if (convertView == null) {

        gridView = new View(context);

        // get layout from mobile.xml
        gridView = inflater.inflate(R.layout.changedashboard, null);
        ViewHolder holder = new ViewHolder();
        holder.textView = (TextView) gridView
                .findViewById(R.id.textView1);
        holder.imageView = (ImageView) gridView
                .findViewById(R.id.imageView1);
        gridView.setTag(holder);

    } else {
        gridView = (View) convertView;
    }

    /*TextView textView = (TextView) gridView
    .findViewById(R.id.textView1);*/

    // set image based on selected text
    /*ImageView imageView = (ImageView) gridView
    .findViewById(R.id.imageView1);*/

    String mobile = menuvalues[position];

    ViewHolder holder = (ViewHolder)gridView.getTag();
    holder.textView.setText(mobile);
    if (mobile.equals("1")) {
        holder.imageView.setImageResource(R.drawable.new1);
    } else if (mobile.equals("2")) {
        holder.imageView.setImageResource(R.drawable.new2);
    } else if (mobile.equals("3")) {
        holder.imageView.setImageResource(R.drawable.new3);
    }else if (mobile.equals("4")) {
        holder.imageView.setImageResource(R.drawable.new4);
    } else if (mobile.equals("5")) {
        holder.imageView.setImageResource(R.drawable.new5);
    }

    return gridView;
}

public int getCount() {
    return menuvalues.length;
}

public Object getItem(int position) {
    return null;
}

public long getItemId(int position) {
    return 0;
}
public static class ViewHolder {
    TextView textView;
    ImageView imageView;
} 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T10:41:05.433

重用视图的用户`ViewHolder`方法。因为，每次滚动时，您都会按 id 查找视图，这需要一些处理，并且可能会导致非常小的延迟，从而导致 GridView 闪烁。

这里有一些有用的链接来了解 ViewHolder。

1.  [为什么 ViewHolder 模式有效？](https://stackoverflow.com/a/5987664/593709)
2.  [ViewHolder 模式：有效缓存](http://xjaphx.wordpress.com/2011/06/16/viewholder-pattern-caching-view-efficiently/)
3.  [Commonsware：AdapterViews 和 Adapters](http://commonsware.com/Android/excerpt.pdf)详见 ViewHolder 部分。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-05-26T07:33:33.187

我面临同样的问题可能是TextView的高度问题。因此，使 TextView 单行，如：

android:singleLine="true" 或者，如果您希望某些项目有 2 或 3 行，则使所有项目都有 2 或 3 行，例如：

安卓：m​​inLines="2"

参考：[GridView 在滚动时中断](https://stackoverflow.com/questions/28761779/gridview-breaks-while-scrolling)

# ruby-on-rails - 如何在动态链接中使用 HAML？

> ID：14052979
> 
> 赞同：10
> 
> 时间：2012-12-27T10:17:21.923
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, haml

我正在尝试使用看起来像这样的 HAML 创建一个链接

```
=link_to("Last updated on<%=@last_data.date_from.month %>",'/member/abc/def?month={Time.now.month}&range=xyz&year={Time.now.year}') 
```

它没有采用 Ruby 代码，而是将其显示为字符串

> 最后更新于<%=@last_data.date_from.month %>

并且在 URL 中也没有使用函数`Time.now.month`或`Time.now.year`.

如何在 URL 和字符串中传递 Ruby 代码？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-27T10:20:04.647

你可能应该使用这样的东西：

```
= link_to("Last updated on #{@last_data.date_from.month}", "/member/abc/def?month=#{Time.now.month}&range=xyz&year=#{Time.now.year}") 
```

请注意，在第二个字符串中，有必要将 更改`'`为`"`。此外，如果链接文本越来越长，您可以使用以下内容：

```
= link_to("/member/abc/def?month=#{Time.now.month}&range=xyz&year=#{Time.now.year}") do
  Last updated on #{@last_data.date_from.month} 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-12-27T10:21:39.703

HAML 中的所有`=`内容都是 Ruby 表达式。Ruby 不像 HAML 那样插值字符串，它有自己的插值方式。

在 Ruby 中，当您想在另一个字符串中包含某个变量的字符串值时，您可以这样做。

```
"Some string #{Time.now}" 
```

所以，它应该是：

```
= link_to "Last updated on #{@last_data.date_from.month}", "/member/abc/def?month=#{Time.now.month}&range=xyz&year=#{Time.now.year}" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-12-03T18:07:53.657

一个语法简单的简单示例：

```
 link_to "Profile #{rubycode}", "profile_path(@profile)/#{ruby_code}", class: "active" 
```

# java - JLayeredPane 重绘删除了一些图像

> ID：14052982
> 
> 赞同：1
> 
> 时间：2012-12-27T10:17:34.397
> 
> 标签：java, image, swing, jlayeredpane

我需要一个 UI，我想在其中描绘网络设备的摆动图形表示。为此，我只是加载多个图像并将它们一一重叠以显示设备的当前状态。我必须支持缩放这个视图。缩放代码如下所示。

```
public void zoom(double factor){
    if (factor < MIN_ZOOM_VALUE)
        factor = MIN_ZOOM_VALUE;
    else if (factor > MAX_ZOOM_VALUE)
        factor = MAX_ZOOM_VALUE;

    scaleFactor = factor;

    layeredPane.revalidate();
    layeredPane.repaint();
} 
```

图像被添加为标签。

```
private class ImageLabel extends JLabel{

    private ImageIcon image;
    private Position position;

    public ImageLabel(ImageIcon image, Position position){
        super(image);
        this.image = image;
        this.position = position;
    }

    public void paintComponent(Graphics g) {

        int newX = (int)(position.getLeft() * scaleFactor);
        int newY = (int)(position.getTop() * scaleFactor);

        Graphics2D g2 = (Graphics2D)g;
        int newW = (int)(position.getWidth() * scaleFactor);
        int newH = (int)(position.getHeight() * scaleFactor);

        setBounds(newX, newY, newW, newH);

        g2.setRenderingHint(
                     //RenderingHints.KEY_INTERPOLATION,
                    //RenderingHints.VALUE_INTERPOLATION_BILINEAR);
                RenderingHints.KEY_ANTIALIASING, 
                        RenderingHints.VALUE_ANTIALIAS_ON);
        g2.drawImage(image.getImage(), 0, 0, newW, newH, null);

    }
} 
```

但这里的问题是，当我放大一次并缩小时，一些图像会消失。知道为什么它会这样吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-27T11:49:45.707

+1 @AndrewThompsons 评论。

我能看到的唯一另一个问题是你不尊重*油漆链*。

还要记住通过调用覆盖绘制方法（以及任何覆盖方法）的实现来尊重*绘制链*`super.XXX`，除非你知道你在做什么并且故意不调用它们`super`的实现，或者像你描述的那样的视觉工件可能/将会发生。

为此，您可以像这样调用`super.paintComponent(Graphics g)`第一个方法被覆盖`paintComponent`：

```
@Override
protected void paintComponent(Graphics g) {
     super.paintComponent(g);

     //do other drawings here
} 
```

还要注意我是如何使用`@Override`注释的，这样我就可以确定我覆盖了正确的方法。

# mysql - 如何在mysql中显示用户出生的日期？

> ID：14052983
> 
> 赞同：2
> 
> 时间：2012-12-27T10:17:43.833
> 
> 标签：mysql, string, date

我想显示用户出生的日期。我的表格中有**date-of-birth 列，格式为 date Format**。所以请让我知道问题的解决方案。我尝试了自己，然后尝试通过互联网获取它，但是对于其他数据库（如 oracle 和 sqlserver）得到了几个结果，所以请告诉我如何获取它。

提前致谢..！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-27T10:20:20.330

[编辑]

```
SELECT DAYNAME('2012-12-27'); 
```

[http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_dayname](http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_dayname)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-27T10:22:12.293

您可以将[DATE_FORMAT](http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_date-format)与 %w 或 %W 一起使用：

```
DATE_FORMAT('2012-12-27', '%w'); 
```

*   %W = 工作日名称（星期日..星期六）
*   %w = 星期几（0=星期日..6=星期六）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-27T10:22:33.510

使用[EXTRACT()](http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_extract)函数

```
select  
     EXTRACT(YEAR FROM BirthDate), 
     EXTRACT(MONTH FROM BirthDate), 
     EXTRACT(DAY FROM BirthDate) 
from t 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-27T10:23:08.987

试试这个：

```
SELECT DAYNAME('2012-12-27'); 
```

**输出**

```
Thursday 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-12-27T10:25:15.043

如果您是当天的名称，请使用：-

```
 SELECT DAYNAME('2007-02-03'); 
```

或者如果想要星期几，然后使用

```
SELECT DAYOFWEEK('2012-12-27); 
```

欲了解更多详情，请访问：-

[http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_dayname](http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_dayname)

# php - PHP 上的正则表达式从电子邮件字符串中删除 url

> ID：14052989
> 
> 赞同：0
> 
> 时间：2012-12-27T10:18:10.333
> 
> 标签：php, regex, preg-replace, preg-match-all

我正在上传从 Excel 导出的制表符分隔文本文件，基本上我通过使用 preg_match_all 获取文档上的所有电子邮件字段

```
preg_match_all("/([\s]*)[\._a-zA-Z0-9-]+@[\._a-zA-Z0-9-]+/i",$string,$emails); 
```

在某些情况下，电子邮件会附加一个 url，如下所示：`prefix.user@domain.comwww.domain.com`

我只需要删除电子邮件，而不需要电子邮件地址之后的 url

我怎样才能使用正则表达式来完成这项工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T10:34:26.023

像这样列出最后一个正则表达式组中所有可能的域名，默认情况下包括顶级域。

```
[A-Z0-9._%+-]+@[A-Z0-9.-]+\.(?:[A-Z]{2}|com|org|net|edu|gov|mil|biz|info|mobi|name|aero|asia|jobs|museum) 
```

您可以在此处阅读有关*电子邮件验证的更多信息或* [在](https://stackoverflow.com/questions/201323/using-a-regular-expression-to-validate-an-email-address)[此处](http://www.regular-expressions.info/email.html)阅读相关问题。

**更新**

符合*[RFC 2822](http://www.ietf.org/rfc/rfc2822.txt)*标准的表达式

```
[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+(?:[a-zA-Z]{2}|com|org|net|edu|gov|mil|biz|info|mobi|name|aero|asia|jobs|museum) 
```

# java - 从类中获取带注释的变量

> ID：14052994
> 
> 赞同：5
> 
> 时间：2012-12-27T10:18:29.933
> 
> 标签：java, reflection

这个问题是我在java之前发现的一个问题的后续
[：get all variable names in a class](https://stackoverflow.com/questions/2126714/java-get-all-variable-names-in-a-class)

我想要的是从一个类中获取变量，而不是全部获取它们，我只想要具有 annotation 的变量`@isSearchable`。

所以基本上我有两个问题：

*   如何创建注释？

*   如何仅通过此注释过滤我的字段？

还有一件事，如果它是我经常使用的东西，它是可取的（我猜反射应该很慢）。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-27T10:29:20.877

```
/** Annotation declaration */
@Retention(RetentionPolicy.RUNTIME)
@Target(ElementType.FIELD)
public @interface isSearchable{
    //...   
}

@isSearchable
public String anyField = "any value"; 
```

检查如下：

```
//use MyClass.class.getDeclaredFields() if you want the fields only for this class.
//.getFields() returns the fields for all the class hierarchy
for(Field field : MyClass.class.getFields()){
    isSearchable s = field.getAnnotation(isSearchable.class);
    if (s != null) {
        //field has the annotation isSearchable
    } else {
        //field has not the annotation
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-27T10:26:37.337

> 如何仅通过此注释过滤我的字段？

你可以通过这个简单的片段

```
Field field = ... //obtain field object
Annotation[] annotations = field.getDeclaredAnnotations();

for(Annotation annotation : annotations){
    if(annotation instanceof IsSearchable){
        MyAnnotation myAnnotation = (MyAnnotation) annotation;
        System.out.println("name: " + myAnnotation.name());
        System.out.println("value: " + myAnnotation.value());
    }
} 
```

在上面的代码片段中，您基本上只过滤`IsSearchable`注释。

关于您的`one more thing`查询

[是的，正如这里](https://stackoverflow.com/questions/435553/java-reflection-performance)所讨论的，反射会很慢，如果可以避免，建议您避免。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-27T10:27:25.403

这是一个例子

```
class Test {
    @IsSearchable
    String str1;
    String str2;

    @Target(ElementType.FIELD)
    @Retention(RetentionPolicy.RUNTIME)
    @interface IsSearchable {
    }

    public static void main(String[] args) throws Exception {
        for (Field f : Test.class.getDeclaredFields()) {
            if (f.getAnnotation(IsSearchable.class) != null) {
                System.out.println(f);
            }
        }
    }
} 
```

印刷

```
java.lang.String Test.str1 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-27T10:21:41.300

[Field.getDeclaredAnnotations()](http://docs.oracle.com/javase/7/docs/api/java/lang/reflect/Field.html#getDeclaredAnnotations%28%29)为您提供每个字段的注释。

为了回答您的补充问题，我通常希望反思会很慢。话虽如此，在这成为您的问题之前，我可能不会担心优化。

提示：确保您检查的是[最新的 Javadoc](http://docs.oracle.com/javase/7/docs/api/)。Google 倾向于给我 Java 1.4 Javadocs，而注解在 Java 5 之前并不存在。

# iphone - SKStoreproductviewcontroller 在横向模式下被截断

> ID：14052997
> 
> 赞同：8
> 
> 时间：2012-12-27T10:18:39.243
> 
> 标签：iphone, ios, uiviewcontroller, storekit

我刚刚添加了 SKStoreProductViewController 并从我自己的 UIViewController 中展示了它。如果我将设备旋转到横向模式 - 只有标题适合宽度，其他部分会被截断

```
....
NSDictionary *parameters = @{SKStoreProductParameterITunesItemIdentifier:[NSNumber numberWithInteger:[productID integerValue]]};

    [self.storeViewController loadProductWithParameters:parameters
                                   completionBlock:^(BOOL result, NSError *error) {
                                       if (result)
                                       {
                                           [presentingViewController presentModalViewController:self.storeViewController
                                                                                       animated:YES];
                                       }
                                       handler(result);
                                   }]; 
```

![在此处输入图像描述](../Images/80576744505e22f6857b1938e0f9ee13.png)

![在此处输入图像描述](../Images/d510f3b1448a8f76cb96e0e380d88339.png)

是否可以在横向模式下调整“产品页面”，使其看起来不错？

环境：iPhone 4S IOS 6.0.1

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T12:29:51.533

是的，它的实施非常糟糕。实际上，我很惊讶这已经成功地通过了 Apple 的任何 QA。

当您按下其中一个屏幕截图时，它会显示一个“细节”屏幕，其中滚动视图仍会截断图像，并且图像本身并未在屏幕上居中，这导致它们被一半遮挡。

我在 Apple 的错误报告系统中记录了一个错误，我鼓励您也这样做，因为这会增加 Apple 实际修复它的机会。

[https://developer.apple.com/bugreporter/](https://developer.apple.com/bugreporter/)